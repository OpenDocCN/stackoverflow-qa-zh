# StackOverflow 问答 12086000-12086999

# pdf - Mozilla PdfJs 操作

> ID：12086002
> 
> 赞同：6
> 
> 时间：2012-08-23T06:34:27.430
> 
> 标签：pdf, pdf.js

给定一个使用 pdfjs 在浏览器中呈现的 PDF，是否有执行以下基本视图操作的函数：

*   旋转
*   翻动
*   飞涨

如果不是，我可以使用哪些最佳策略来执行上述操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-24T19:56:13.717

您可以在获取视口表单 PdfPage 对象时设置旋转：

```
var viewport = pdfPage.getViewport(scale, rotation); 
```

如果要立即设置所有参数，可以克隆视口，使用 scale = 1 创建：

```
var defaultViewport = pdfPage.getViewport(1);
var neededViewport = defaultViewport.clone({scale: needScale, rotation: needRotation, dontFlip: true}); 
```

# java - 如何防止接口的冗余代码

> ID：12086022
> 
> 赞同：1
> 
> 时间：2012-08-23T06:35:49.140
> 
> 标签：java, interface, polymorphism

我有一个扩展接口 A 的接口 B。

现在我想要一个实现接口 B 的 Bravo 类。

由于我有一个实现接口 A 的 Alpha 类，是否可以仅声明

```
class Bravo extends Alpha implements B 
```

并保存 A 的方法的实现，因为 Bravo 继承了它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:46:26.617

对我来说很好：

```
interface A {
    public void foo();
}

interface B extends A {
    public void bar();
}

class Alpha implements A {
    public void foo() {
        System.out.println("foo");
    }
}

class Bravo extends Alpha implements B {   
    public void bar() {
        System.out.println("bar");  
    }   
}

class Test {

    public static void main(String[] args) {
        Bravo bravo = new Bravo();
        bravo.foo();
        bravo.bar();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T06:38:58.080

是的，可以通过继承获得实现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:38:38.767

那是完全可能的。有效地，`Bravo`将执行`A`和`B`使用`Alpha`的执行`A`作为它自己的执行。

# java - 如何使用 jQuery 在 Selenium WebDriver 中单击带有 Java 的按钮

> ID：12086024
> 
> 赞同：2
> 
> 时间：2012-08-23T06:35:59.857
> 
> 标签：java, jquery, eclipse, selenium-webdriver, testng

我有以下 HTML：

```
<button class="gbqfba" name="btnK" aria-label="Google Search" id="gbqfba"><span id="gbqfsa">Google Search</span></button> 
```

我在 WebDriver 中使用 java 单击“Google 搜索”按钮的以下代码运行良好：

```
driver.findElement(By.id("gbqfb")).click(); 
```

我想使用 jQuery 和 WebDriver 来单击按钮。我该怎么做？

我做了以下（使用TestNG框架在eclipse中运行测试）：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("$('#gbqfba').click();"); 
```

不幸的是，显示了以下错误：

**org.openqa.selenium.WebDriverException：$ 未定义（警告：服务器未提供任何堆栈跟踪信息）命令持续时间或超时：23 毫秒**

我上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:08:58.183

WebDriver 显然没有使用 jQuery 扩展，因此 '$' 不在名称空间中。您可以将缩小的 jQuery.js 加载到字符串中，然后将其作为测试的一部分进行评估 - 这会将“$”添加到页面的命名空间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:21:59.567

以下代码运行良好：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
URL jqueryUrl = Resources.getResource("jquery-1.8.2.min.js");
String jqueryText = Resources.toString(jqueryUrl, Charsets.UTF_8);
jse.executeScript(jqueryText);
jse.executeScript("$('#gbqfba').click();"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T13:18:38.330

这也可以使用 List of classes 来解决

列表 w = driver.findElements(By.cssSelector("button.gbqfba"));

```
 for(WebElement s1: w)
    {
        String s2= s1.getText();
        System.out.println(s2);

        if(s2.contentEquals("Google Search"))
        {
            s1.click();   
            break;
        }
    } 
```

# oop - 与对象的多对多关系，其中存在中间字段？

> ID：12086028
> 
> 赞同：2
> 
> 时间：2012-08-23T06:36:09.027
> 
> 标签：oop, list, relationship, object-model, object-object-mapping

我正在尝试在我的工作场所构建服务器和应用程序的模型。一台服务器可以托管许多应用程序。一个应用程序可以托管在许多服务器上。

通常我只会让主机类包含一个列表，而应用程序类包含一个列表。但是，有一些特定于特定主机-应用程序关系的字段。例如，UsedMb 表示主机上的应用程序使用的磁盘空间量。

当然，我可以有一个 HostedApplication 类来表示一个包含 UsedMb 字段的中间对象。Host 和 Application 类都将包含一个 List。

然而，问题在于，应用程序还需要了解其主机的某些方面，这些方面将包含在 Host 类中（例如，主机在地理上分布；应用程序需要知道它托管在多少个数据中心，因此它需要能够检查其所有主机的 DC 名称。

因此，我可以让 HostedApplication 类同时保存对它所引用的 Host 对象和 Application 对象的引用。但在某些情况下，我需要遍历所有应用程序（在其他情况下，需要遍历所有主机）。因此，我需要 3 个单独的列表，一个列表和列表，以及一个列表，以便能够根据需要遍历所有三个列表。

我的基本问题是，处理这种配置的标准方法是什么？所有选项都有优点和缺点。我提到的最后一个选项似乎最正确，但是有三个列表是不是有点过分了？有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:53:21.683

理想情况下，我可以与您讨论这个问题，但根据我对需求的粗略理解，这是一个潜在的解决方案（c++ 风格，省略了很多实现）

```
class Host {
public:

  string GeographicLocation() const;
  string DCName() const;
};

class HostAsAppearsToClient : public Host {

  HostAsAppearsToClient(const Host&);
  // Allows Host -> HostAsAppears... conversion

  size UsedMB() const;
  void UseMoreMB(size) const;
};

class Client {
  HostAsAppearsToClient* hosts;

  void AddHost(const Host& host) {
    // Reallocate enough size or move a pointer or whatever
    hosts[new_index] = HostAsAppearsToClient(host);
    hosts[new_index].UseMoreMB(56);
  }

  void DoSomething() {
    hosts[index].UsedMB();
    // Gets the MB that that host is using, and all other normal host data if
    // we decide we need it ...
    print(hosts[index].DCName());
  }
};

int Main() {
  Host* hosts = new Host[40];
  Client* clients = new Client[30];

  // hosts[2].UsedMB() // Doesn't allow
} 
```

我完全希望这不符合您的要求，但请让我知道以什么方式，以便我更好地理解您的问题。

编辑：

VBA ....不走运:-P

可以在 VBA 中加载 dll，这将允许您使用任何其他语言编写和编译代码，并通过 VBA 将输入和输出从 UI 转发到 DLL，但我想这取决于您是否值得它。有关如何在 VBA Excel 中使用 dll 的文档：[链接](http://msdn.microsoft.com/en-us/library/office/bb687915.aspx)

祝你好运！

# sql - Linq：使用 2 个不同的语句将 pro 映射到函数

> ID：12086030
> 
> 赞同：0
> 
> 时间：2012-08-23T06:36:14.257
> 
> 标签：sql, linq

我制作了选择有条件的数据的存储过程，但问题是：-

当RequiredIDID = 2（选择带有连接表中的一些数据，如果不是，我不在else语句中选择它）并且映射到linq函数后出现此问题

如果我将 requirdID = 2 传递给函数，则不会出现问题，因为 proc 中的第一个选择已执行，但如果我传递其他 requirdID（例如 = 3），则会出现此消息

> 数据读取器与指定的“RealEstateCenterModel.SearchForRealState_Reader”不兼容。类型的成员“FloorTypeCategory”在数据读取器中没有同名的对应列。

```
USE [RealEstateCenter]
GO
/****** Object:  StoredProcedure [dbo].[TestOptionalParameter]    Script Date: 08/23/2012 07:29:02 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER proc [dbo].[TestOptionalParameter]
@RequiredIDID int =NULL 
as

if @RequiredIDID=2
begin
SELECT     FloorSpace.SpaceFrom, RealEstateCategoryDetails.RequiredCategoryTypeName, FloorType.FloorTypeCategory, FloorType.FloorNotes, 
                      RealEstateTypes.RequiedType
FROM         PersonalRealStateDetails INNER JOIN
                      FloorSpace ON PersonalRealStateDetails.FloorSpaceID = FloorSpace.FloorSpaceID INNER JOIN
                      RealEstateCategoryDetails ON PersonalRealStateDetails.RequiredCategoryTypeID = RealEstateCategoryDetails.RequiredCategoryTypeID INNER JOIN
                      FloorType ON PersonalRealStateDetails.FloorTypeID = FloorType.FloorTypeID INNER JOIN
                      RealEstateTypes ON RealEstateCategoryDetails.RequiredID = RealEstateTypes.RequiredID

end

else
begin
SELECT     FloorSpace.SpaceFrom, RealEstateCategoryDetails.RequiredCategoryTypeName, RealEstateTypes.RequiedType
FROM         PersonalRealStateDetails INNER JOIN
                      FloorSpace ON PersonalRealStateDetails.FloorSpaceID = FloorSpace.FloorSpaceID INNER JOIN
                      RealEstateCategoryDetails ON PersonalRealStateDetails.RequiredCategoryTypeID = RealEstateCategoryDetails.RequiredCategoryTypeID INNER JOIN
                      RealEstateTypes ON RealEstateCategoryDetails.RequiredID = RealEstateTypes.RequiredID
end 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:43:28.073

您可以将缺少的列和一些默认值添加到第二个选择中。

```
SELECT FloorSpace.SpaceFrom, RealEstateCategoryDetails.RequiredCategoryTypeName, RealEstateTypes.RequiedType, 0 as [FloorType.FloorTypeCategory], NULL as [FloorType.FloorNotes] 
```

或者

```
SELECT FloorSpace.SpaceFrom, RealEstateCategoryDetails.RequiredCategoryTypeName, RealEstateTypes.RequiedType, 0 as FloorTypeCategory, NULL as FloorNotes 
```

# linux - 通过 UDP 在端口上接收消息的非阻塞服务

> ID：12086033
> 
> 赞同：2
> 
> 时间：2012-06-24T14:15:05.683
> 
> 标签：linux, node.js

我想在我的 Linux VPS 上构建一个服务，它侦听某个 UDP 端口并对捕获的（文本）消息执行某些操作。此处理包括将消息附加到本地存储的 txt 文件并将其作为 http 发送，并带有一个 post 变量到另一台服务器。

* * *

我已经查看了 Nginx，但目前可以看到该服务器只能绑定接收 http 数据包。虽然是异步的。

在 linux 上实现这种监听服务的最佳方法是什么？哪个有能力进行上述处理？

例如 node.js 有可能吗？看起来不错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:36:55.670

为简单起见，您可以使用 xinetd，对于应用程序，您可以使用任何脚本语言，这将从标准输入读取数据包并将其保存到文件中。

# php - 将 $options 传递给 symfony2 中的构建器

> ID：12086035
> 
> 赞同：0
> 
> 时间：2012-08-23T06:36:37.113
> 
> 标签：php, symfony, doctrine-orm

我的表单生成器中有此代码

```
->add('user', 'entity', array(
                'class' => 'Acme\Entity\User',
                'query_builder' => function(EntityRepository $er) use ($options) {
                        return $er->createQueryBuilder('u') 
                        ->where('u.id = :id')
                        ->setParameter('id',$options['my'])
                        ->orderBy('u.name', 'ASC');},)) 
```

当我回显时，`$options['my']`我得到`1`了构建器内部的输出。现在，当我提交表单时，我得到 NULL 作为 User 对象。

但是，如果我使用 `->setParameter('id',1)`它，它就可以正常工作。

现在如果我用这个

`$options['test'] = 1`在构建表单中并使用

`->setParameter('id',$options['test'])`然后它也可以正常工作。

但是 ->setParameter('id',$options['my']) 不能直接工作。它在表单中回显为 1 ，因此值在该变量中。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:47:34.417

这是类型的常见错误。在第一种情况下`1`是**字符串**，在第二种情况下是**int 。**试试这是否有效：

```
->setParameter('id',intval($options['my'])) 
```

您的调试虽然非常好，但最好使用`var_dump`而不是`echo`. 您还可以将类型与 进行比较`gettype()`。

`var_dump($options['my'])`与比较`var_dump($options[test'])`。

`gettype($options['my'])`与比较`gettype($options['test'])`。

# perl - 如何修剪反斜杠？

> ID：12086036
> 
> 赞同：-2
> 
> 时间：2012-08-23T06:36:38.363
> 
> 标签：perl

我需要从数组中删除反斜杠。

```
use strict;
use warnings;
use Time::HiRes qw(sleep);
use Test::WWW::Selenium;
use Test::More "no_plan";
use Test::Exception; 

@array = "qwerty-uioplkjadsfcxhbdhjjkgkmnvkgmkgmkgkglmzbcd\-\dfgtg\qwerty"; 
```

我需要`\`在上面的数组中删除。我试过了，`@array =~ s/\\//;`但我做不到。

从数组中删除反斜杠后，数组应包含如下内容：

```
 print @array;

    output:

qwerty-uioplkjadsfcxhbdhjjkgkmnvkgmkgmkgkglmzbcd - dfgtg qwerty 
```

我怎样才能删除反斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:56:58.817

首先：双引号会插入，所以你应该写`'...d\-\dfgtg\qwerty";'`而不是 `"..";`或使用[`q{ }`.](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)

然后`@array =~ s/\\//;`是无效的语法。我猜你想写`s#\\##g for @array;`。

此代码有效：

```
my @array = q{qwerty-uioplkjadsfcxhbdhjjkgkmnvkgmkgmkgkglmzbcd\-\dfgtg\qwerty};
say "--> '$_'" for @array;

s#\\##g for @array;
say "--> '$_'" for @array; 
```

输出：

```
--> 'qwerty-uioplkjadsfcxhbdhjjkgkmnvkgmkgmkgkglmzbcd\-\dfgtg\qwerty'
--> 'qwerty-uioplkjadsfcxhbdhjjkgkmnvkgmkgmkgkglmzbcd-dfgtgqwerty' 
```

顺便说一句：如果您的数组中只有一个元素，您可能应该使用[scalar](http://perldoc.perl.org/perlintro.html#Perl-variable-types)。

# iphone - 1分钟后iphone插座断开

> ID：12086037
> 
> 赞同：2
> 
> 时间：2012-08-23T06:36:47.800
> 
> 标签：iphone, ios, sockets, ios4, network-programming

我们有以下代码用于连接到我们的服务器。这是 iPhone 应用程序的一部分。

问题是 recv(CFSocketGetNative(inSocketRef), &length, sizeof(length), 0); call 在 60 秒后返回 0。我们没有从服务器发送任何东西。我希望它等待数据或断开连接（服务器或客户端启动）。但是，它总是在 60 秒后返回。

我在这里做错了什么？

* * *

```
 void CallbackHandlerConnectionHandler(CFSocketRef inSocketRef, CFSocketCallBackType inType,
                 CFDataRef inAddress, const void *inData, void *inInfo)
{

ChatServerConnectionHandler *conHandler = (ChatServerConnectionHandler *)inInfo;

if([conHandler respondsToSelector:@selector(dataRecievedFromServer:)])
{
    int res = 0;
    SInt32 length;
    res = recv(CFSocketGetNative(inSocketRef), &length, sizeof(length), MSG_PEEK);

    if(0 >= res || (length < 0))
    {
        //Disconnect the connection, as some has occcured in the sockets..
        [conHandler performSelector:@selector(errorEncountered)];

        NSLog(@"Error occured in server!!");
        return;
    }

    printf ("good data")
}
}

-(BOOL) connectToServer:(NSString *)ipAddress Port:(int)portNumber
{       
connectionState = eConnectionEstablishInProgress;
self.threadStopped = NO;
CFRunLoopSourceRef source;

int sockfd;
struct sockaddr_in serv_addr;

struct hostent *host;
host = gethostbyname([ipAddress cStringUsingEncoding:NSUTF8StringEncoding]);

sockfd = socket(AF_INET, SOCK_STREAM, 0);
struct timeval timeout;

if (sockfd < 0)
{  
    error("ERROR opening socket");
    connectionState = eNoConnection;
    return NO;
}

bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
serv_addr.sin_port = htons(portNumber);
serv_addr.sin_addr = *((struct in_addr *)host->h_addr);
bzero(&(serv_addr.sin_zero),8); 

/* Creates a CFSocket object for a pre-existing native socket */
CFSocketContext socketContext={0,self,NULL,NULL,NULL};
socketRef   = CFSocketCreateWithNative(kCFAllocatorDefault,  
                                       sockfd, 
                                       kCFSocketReadCallBack, 
                                       CallbackHandlerConnectionHandler, 
                                       &socketContext);

source = CFSocketCreateRunLoopSource(NULL, socketRef, 0);
CFRunLoopAddSource(CFRunLoopGetCurrent(), source, kCFRunLoopDefaultMode);
CFRelease(source);
source = nil;

InstallSignalHandlers();

CFDataRef socketAddress;
socketAddress = CFDataCreateWithBytesNoCopy(kCFAllocatorDefault, (UInt8 *)&serv_addr, sizeof(serv_addr), kCFAllocatorNull);
CFSocketError result=CFSocketConnectToAddress(socketRef, socketAddress, 0);
CFRelease(socketAddress);

if(kCFSocketSuccess == result)
{
    //printf("Socket connection established");
    self.serverRunning = YES;
    connectionState = eConnectionEstablised;
    NSLog(@"\nCall Connection accepted callback.");
    if([delegate respondsToSelector:@selector(conectionEstablishedWithTheServer)])
    {
        [delegate performSelector:@selector(conectionEstablishedWithTheServer)];
    }

}
else
{
    //printf("Unable to create socket why???***");
    connectionState = eNoConnection;
    if(socketRef)
        CFRelease(socketRef);
    socketRef = nil;
    return NO;
}

while(FALSE == self.threadStopped)
{
    CFRunLoopRunInMode(kCFRunLoopDefaultMode, 1, FALSE);
}
NSLog(@"\nOut of Server socket connection thread.");

self.serverRunning = NO;

if([delegate respondsToSelector:@selector(conectionFinishedWithServer)])
{
    [delegate performSelector:@selector(conectionFinishedWithServer)];
}

if(socketRef)
{
    if(CFSocketIsValid(socketRef))
        CFSocketInvalidate(socketRef);
}

return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:12:41.743

这看起来像是服务器问题 - 或者更确切地说是功能问题：关闭非活动连接以保留足够的可用资源。

如果您没有编写服务器代码，请尝试联系作者。

您提到的数据包 [FIN, ACK] 是一个关闭套接字的数据包：您应该检查 IP 地址，但服务器很可能是该数据包的发起者。

# xquery - 是否有可能使用 XQuery 生成随机数？

> ID：12086038
> 
> 赞同：5
> 
> 时间：2012-08-23T06:36:50.187
> 
> 标签：xquery

我必须使用 XQuery 生成一系列随机数。我找到了一组库，但这些库是付费的。如果有人能给我一个方向，我将不胜感激（最好是代码）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T11:18:08.453

标准 XQuery 语言不提供随机函数，但许多实现提供。开源实现的一些示例：

*   BaseX 提供了一个[随机模块](http://docs.basex.org/wiki/Random_Module)
*   Zorba 也有一个随机[模块](http://www.zorba-xquery.com/html/modules/zorba/xdm/atomic/random)
*   eXist-db 在[Util Module中有一些合适的功能](http://demo.exist-db.org:8098/exist/functions/util)
*   MarkLogic 提供[xdmp:random()](https://docs.marklogic.com/xdmp:random)函数

作为替代方案，XQuery 的大多数 Java 实现（例如 BaseX、Saxon 或 Qizx）都提供了所谓的*Java 绑定*来评估 Java 代码：

```
declare namespace math = 'java:java.lang.Math';
math:random() 
```

如果实现支持最​​新的 XQuery 3.0 规范，也可以这样写：

```
Q{java:java.lang.Math}random() 
```

# rest - 使用 REST api 的 Guid 令牌而不是用户名/密码的基本身份验证

> ID：12086041
> 
> 赞同：33
> 
> 时间：2012-08-23T06:36:56.030
> 
> 标签：rest, authentication, oauth, asp.net-web-api

## 概述

我正在为后端使用带有 REST API 的 PhoneGap 开发一个移动应用程序。REST API 不会被第三方开发人员使用，而是特定于应用程序，因此不需要实现 oAuth。因此，我计划在用户输入他们的用户名/密码来访问 API 资源时使用基本身份验证。所有 API 通信都将在 SSL 上进行。

## 使用令牌的基本身份验证

与其让应用程序存储用户名/密码并将其与每个请求一起发送到 API，我宁愿在第一个登录请求上验证用户名/密码并返回 GUID 令牌。客户端存储此 GUID 令牌，并通过 Authorization 标头将令牌与每个请求一起发送回 API，如下所示：

> 授权：基本e1d9753f-a508-46cc-a428-1787595d63e4

在服务器端，用户名/GUID 组合将与设备设置一起存储在服务器上。这将允许跟踪用户登录的设备数量，并在 Guid 到期后使会话到期。

这种方法听起来合理且安全吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-03-15T00:11:36.810

您根本不需要创建自定义标头或身份验证方案。

`Bearer`身份验证方案专为您的用例而设计：

```
Authorization: Bearer e1d9753f-a508-46cc-a428-1787595d63e4 
```

`Basic`身份验证**必须**如下：

```
Authorization: Basic base64EncodedUsernameAndPassword 
```

其中`base64EncodedUsernameAndPassword`等于输出：

```
base_64_encode(username + ':' + raw_password) 
```

`Basic`如果尾随文本值不是上述精确算法，请勿使用。

如果您只想在方案名称后加上您想要的任何值，请使用`Bearer`方案 - 这就是它的发明目的。

### 警告

虽然您可以使用简单的 GUID/UUID 作为令牌，但这并不是真正的安全令牌。考虑改用[JWT](https://www.rfc-editor.org/rfc/rfc7519)。JWT 可以进行数字签名并分配一个 TTL，以便只有设置它的服务器才能 a) 创建它并验证其真实性 b) 确保它的使用时间不会超过允许的时间。虽然这*可能*适用于基于 GUID 存储的数据，但 JWT 方法不需要服务器状态——因此它可以更好地扩展——并完成同样的事情。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-23T07:32:51.330

一般的“使用令牌进行身份验证”方法非常好，但您不应尝试使基本身份验证以不同于预期的方式工作（毕竟它是一个已定义的标准）。您应该使用自己的标头进行身份验证。您可以在此处找到对此类场景的非常好的描述：

*   [使您的 ASP.NET Web API 安全](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)

# c++ - 运算符优先级

> ID：12086047
> 
> 赞同：7
> 
> 时间：2012-08-23T06:37:25.170
> 
> 标签：c++, operators

> **可能重复：**
> [cout << 调用它打印的函数的顺序？](https://stackoverflow.com/questions/2129230/cout-order-of-call-to-functions-it-prints)
> [未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

为什么此代码打印 2 1 0？

```
#include <iostream>
struct A{
  int p;
  A():p(0){}
  int get(){
    return p++;
  }
};

int main(){
 A a;
 std::cout<<a.get()<<" "<<a.get()<<" "<<a.get()<<std::endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T06:43:34.727

正如我在[评论](https://stackoverflow.com/questions/12086047/operator-precedence/12086118#comment16148072_12086047)中所说，没有*序列点*......

根据 Stroustrup 的*The C++ Programming Language, Third Edition*的§6.2.2 ...

> **表达式中子表达式的求值顺序未定义。特别是，您不能假设表达式是从左到右计算的。**

C++03 标准的 §5.4 规定：

> 除非另有说明，否则未指定单个运算符的操作数和单个表达式的子表达式的求值顺序，以及副作用发生的顺序。在前一个和下一个序列点之间，一个标量对象的存储值最多只能通过表达式的评估修改一次。

[您可以在此处](https://stackoverflow.com/a/4176333/591495)了解有关序列点和未定义行为的更多信息。

# mysql - mysql 数据库在复制，但在主服务器上创建的用户没有在从服务器上复制

> ID：12086049
> 
> 赞同：5
> 
> 时间：2012-08-23T06:37:56.420
> 
> 标签：mysql

在主从复制中，我们使用 mysql DB 在从属服务器上复制几个 DB。我在主服务器上创建了一个用户，不幸的是它没有在从服务器上复制。

Replicate_Do_DB：app1，app2，mysql

用户创建命令：

```
GRANT SELECT on *.* to 'user1'@'localhost' identified by 'user1';

GRANT SELECT on *.* to 'user1'@'%' identified by 'user1';

GRANT SELECT on *.* to 'user1'@'10.10.10.10' identified by 'user1'; 
```

用户帐户在主服务器上成功创建，但未在从服务器上复制。

如果 mysql db 在复制中，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T08:45:11.063

唔。我要在这里赌一把，说您可能使用的是基于 STATEMENT 的复制，而不是基于 ROW 的复制，并且您的 MySQL 版本是 5.1 或更高版本......

您可以通过在从属设备上运行以下 SQL 来判断您正在运行哪种类型：

```
select variable_value
from information_schema.session_variables
where upper(variable_name) = 'BINLOG_FORMAT'; 
```

[正如您正确识别的那样，只有在复制中包含 mysql 模式](http://dev.mysql.com/doc/refman/5.0/en/replication-features-userprivs.html)时才会复制权限

然而，“明白了！” 这是[--replicate-do-db](http://dev.mysql.com/doc/refman/5.1/en/replication-options-slave.html#option_mysqld_replicate-do-db)选项。如果您使用基于语句的复制，则需要在运行授权之前将 mysql 数据库指定为默认数据库，因为：

> 此选项的效果取决于使用的是基于语句的复制还是基于行的复制。
> 
> 基于语句的复制。告诉从 SQL 线程将复制限制为默认数据库（即 USE 选择的数据库）为 db_name 的语句。

那就是尝试运行：

```
USE MYSQL;

GRANT SELECT on *.* to 'user1'@'localhost' identified by 'user1';

GRANT SELECT on *.* to 'user1'@'%' identified by 'user1';

GRANT SELECT on *.* to 'user1'@'10.10.10.10' identified by 'user1'; 
```

它可能会起作用。如果没有，请查看另一个答案！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-25T12:57:42.207

在 MySQL 5.7 中，如果您从 Tom Mac 的[answer](https://stackoverflow.com/a/12087927/295264)执行查询，您将收到以下错误：

> 错误 3167 (HY000)：“INFORMATION_SCHEMA.SESSION_VARIABLES”功能被禁用；请参阅“show_compatibility_56”的文档

您应该查询`performance_schema`。运行以下命令：

```
SELECT variable_value FROM performance_schema.session_variables WHERE upper(variable_name) = 'BINLOG_FORMAT'; 
```

# php - 在 .NET 中获取 PHP 脚本请求的响应

> ID：12086050
> 
> 赞同：0
> 
> 时间：2012-08-23T06:37:58.540
> 
> 标签：php, vb.net, variables, httpwebrequest, response

嘿，我正在.net 中制作激活架构。我已经编写了一个发布 PHP 变量的脚本，但是，PHP 回显了服务器响应，我想取回该响应。

我尝试了一些代码片段，但它们不起作用。

示例 php 脚本是：

```
<?php

$name = $_POST['username'];

echo $name;

?> 
```

我无法得到回应，即`echo $name`，我无法得到它，请帮助

我的代码是：

```
 Dim requestStream As Stream = request.GetRequestStream()
    requestStream.Write(postBuffer, 0, postBuffer.Length)

    Dim stream As Stream = request.GetResponse().GetResponseStream()

    Dim reader As New StreamReader(stream)

    Dim response As String

    Dim newStream As Stream = request.GetRequestStream()

    While response = reader.ReadLine()
        response += reader.ReadLine()
    End While

    Return response

    requestStream.Close() 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T10:46:52.147

您可能想查看[我对这篇文章的回答](https://stackoverflow.com/questions/16656011/visual-basic-php-server/18463078#18463078)。它比您需要的答案要复杂一些，但它会解决您的问题。第二个例子就是你想要的。但***不要只是复制它***，你还需要**类**和**参考**。

希望能帮助到你。

# javascript - 动态源属性更新在铬中不起作用

> ID：12086052
> 
> 赞同：0
> 
> 时间：2012-08-23T06:38:00.403
> 
> 标签：javascript, ajax, google-chrome

我有一个脚本，其中与问题相关的部分是：

```
<script type="text/javascript">
    function imageOnClick() {
        var image = $("#image_id");
        $(image).attr("src", "ajax-loader.gif");
        $.ajax({
            // do staffs
            complete: function () {
                $(image).attr("src", "default.gif");   // ***     
            }
        });
    }
</script> 
```

在 Firefox 和 IE-8 中一切正常。但是，在 GoogleChrom(21.0.1180.83) 中显示加载图像，然后`complete`调用，图像的源被更改，但不显示。我已检查图像元素的`src`属性已按预期更改，`default.gif`但图像空间留空。

**这是一个简单的解决方案的常见问题吗？**还是我必须重新检查大型`imageOnClick`功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:58:36.410

[这个](http://jsfiddle.net/TYdQ6/1/)小提琴在 Chrome 21.0.1180.79 中对我有用。

我不确定您为什么会遇到问题，但图像对象的额外选择至少是多余的。`var image = $("#image_id");`给出一个 jQuery 对象（或它们的数组）。稍后`$(image)`再做会给你完全相同的对象。

您可能还想阅读[prop() 与 attr()](http://api.jquery.com/prop/)的对比。

# jquery - xml子节点搜索

> ID：12086053
> 
> 赞同：0
> 
> 时间：2012-08-23T06:38:01.420
> 
> 标签：jquery, xml

我有一个带有地址的 xml 文件，它工作正常。我希望使用 State 搜索 xml 文件。请帮助我。

```
$(document).ready(function() {
    $('#INFO').click(function() {
        $.get('book.xml',function(book){
            $('#content').empty();
            $(book).find('data').each(function(){
                var $data= $(this);
                var html = '<div class="book">';    
                html += '<b> M/s.: ' + $data.attr('company') + '</b> ';
                html += '<div class="address">' + $data.find('address').text() + '</div>';
                html += '<div class="address1">' + $data.find('address1').text() + '</div>';
                html += '<div class="state">' + $data.find('state').text() + '&nbsp;&nbsp; Pincode:' +$data.find('pin').text() + '</div>';
                html += '<div class="phone"> Phone:' + $data.find('phone').text() + '</div>';
                $('#content').append(html);
            });                        
        });
        return false;
    });
});

    <body>
    <a href="#" id="INFO">Get Full address</a>
    <br /><br /><br />
    <div id="content">
    </div></body> 
```

先生，正如所问，Book.xml 的 XML 文件如下所示。我需要的是用“state== Maharashtra”搜索地址

```
<?xml version="1.0" encoding="utf-8"?>
<datas>
    <data company="Bhusan Limited">
        <address> Main road, Second lane, </address>    
       <address1>MUMBAI </address1>
       <state> Maharastra </state>    
        <pin>400020</pin>
        <phone>022-23452345 </phone>
    </data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:45:43.037

而不是`$(book).find('data')...`试试这个：

```
$($.parseXML(book)).find('data')... 
```

# linkedin - Linkedin 个人资料 - 我有访问令牌，我可以在其他域中提取数据吗

> ID：12086054
> 
> 赞同：1
> 
> 时间：2012-08-23T06:38:04.890
> 
> 标签：linkedin

我已经在 LinkedIn 上注册了我的应用程序并提供了网站 URL：`abc.net`

在我们的案例中，我能够获取`abc.net`充当服务器的用户的 access_token 和个人资料信息。现在我需要将这些数据发送到不同的域。

在 Facebook API 中，如果我只将 access_token 发送到其他域，我可以使用

```
$fb_id_url = "https://graph.facebook.com/me?access_token=" . $token;
$fb_info_json = file_get_contents($fb_id_url); 
```

Linkedin 有这样的规定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:57:24.497

听起来您正在使用[REST API](https://developer.linkedin.com/rest) - 在这种情况下，应用程序不一定绑定到单个域或机器 - 使用应用程序 API 密钥和来自其他域的用户 OAuth 令牌应该可以正常工作。

# java - 哪个版本的 apache tomcat 支持 netbeans 中的 java 7 功能？

> ID：12086057
> 
> 赞同：1
> 
> 时间：2012-08-23T06:38:14.623
> 
> 标签：java, tomcat, netbeans, java-7

我正在使用带有 5.5 版 apache tomcat 服务器的 Netbeans 7.2。它不支持 java 7 功能并要求将服务器级别设置为 7？我怎样才能做到这一点？还是我应该使用其他服务器？你会推荐哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:14:20.667

Apache Tomcat 7 可以与 Java 7 一起使用。您可以在[http://tomcat.apache.org/tomcat-7.0-doc/changelog.html查看 Tomcat 7 最新的更新日志](http://tomcat.apache.org/tomcat-7.0-doc/changelog.html)

注意：大多数时候，最好使用可用的最新服务器开始您的开发（除非您有非常具体的版本要求）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:29:54.353

目前没有支持 Java 7 的 Tomcat 版本。已知所有当前支持的 Apache Tomcat 版本（5.5.x、6.0.x 和 7.0.x）都可以在 Java 6 上正确运行。

# javascript - 从 firebug 中查找要编辑的 js 文件

> ID：12086059
> 
> 赞同：0
> 
> 时间：2012-08-23T06:38:25.420
> 
> 标签：javascript, firebug

我正在使用 firebug 来编辑我的 magento 主题。在一个特定的元素中，我得到了一个要编辑的 element.style 属性。现在我怎么知道要编辑哪个 JS 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:17:55.953

如果您想通过 Javascript 与元素交互，可以使用 Firebug 中的控制台功能。转到控制台，然后单击启用，然后您可以从那里开始输入代码，就好像它是 javascript。

例如，如果您想检查特定元素的 z-index 属性，您只需在控制台中键入 javascript：

```
document.getElementById("idOfElement").style.z-index 
```

当你点击进入它应该告诉你。如果有任何错误，您还可以在 javascript 文件中看到错误。

如果您正在寻找在 z-index 属性中提交此更改的 Javascript 文件，并且您 100% 确定这是因为 Javascript，那么您可以使用 Firebug 的调试器，它也在“脚本”选项卡中。如果您正在处理多个 javascript 文件，我不完全确定您如何筛选导致它的 JS 文件，我相信您必须自己进行挖掘。调试器允许您逐步浏览 JS 文件，并查看正在逐步进行的更改。

如果您不熟悉，这里有一个关于如何使用调试器的[教程。](http://thecodecentral.com/2007/08/01/debug-javascript-with-firebug#header-2)希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:47:42.967

不确定萤火虫，

但是如果你使用 linux 你可以试试这个命令，

> grep "element.style" -Rn 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:47:49.253

你想改变风格或其他东西。如果要更改特定元素的样式，只需按照以下步骤操作

1.  F12
2.  选择检查工具
3.  单击要更改的元素
4.  在 FireBug 窗口中查看 Right 并确保选择了样式选项卡
5.  只需单击特定属性的值

如果您没有找到解决方案，请明确确定问题位。

# sql - 如何将 (sql) 数据库添加到我的 sintra 应用程序？

> ID：12086062
> 
> 赞同：1
> 
> 时间：2012-08-23T06:38:32.487
> 
> 标签：sql, ruby, sinatra

当我开始编写我的 sinatra 应用程序时，我以前从未使用过它。请注意，我曾经并且仍然没有使用 RoR 的经验。我有一个 .rb 文件和一个 .haml 并且很高兴。现在我不得不将 .rb 文件拆分为大约 10 个“库”文件，因为整个应用程序变得越来越复杂。

我将一些应用程序日志/信息存储在 csv 文件中，现在我在访问 csv 文件时遇到了冲突。所以我认为我需要引入“适当的”数据库解决方案。我希望它成为我的 ruby​​ (sinatra) 应用程序的一部分。

如何在我的 sintra 应用程序中引入“轻量级”sql 数据库？

* * *

我正在使用 ruby​​ 1.8.7 (2010-08-16 patchlevel 302) [i386-mingw32] 即将升级到 1.9 (希望如此)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:12:15.313

我建议看[Sequel](http://sequel.rubyforge.org/)。它非常灵活和强大，可以很好地与 SQLite、MySQL、Postgres、Oracle 和其他 DBM 配合使用。它对你如何与数据库交谈并不固执己见；您可以将其用作 ORM 或简单的数据集，并允许嵌入式 SQL 或更多编程方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:50:27.133

对于 ORM，建议同时使用 ActiveRecord 和 Sequel。关于数据库，我想 sqlite3 足以满足您的需要。你也可以选择mysql或pg。

如果你想使用 active_record，你会发现这篇[文章](http://blog.aizatto.com/2007/05/21/activerecord-without-rails/)非常有用。如果选择 Sequel，请[在此处](http://sequel.rubyforge.org/documentation.html)阅读 Sequel 文档。

宝石安装后。您可以开始编写一些代码来连接数据库。然后可能会进行一些迁移任务来构建数据库表（并且不要忘记构建一些相应的模型）。两个 gem 具有相似的迁移语法。之后，导入您的 csv 数据并做得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:09:48.377

`Active Record`我在使用任何一个或`DataMapper`将对象持久性添加到我的应用程序时都没有遇到任何问题`Sinatra`。人们也告诉我`Sequel`非常好，但从哲学上讲，它与`Active Record`恕我直言并非没有世界。

`Active Record`并`Sequel`支持一种更加*以数据库为中心的*方法，即您将表拼写为迁移文件集合中的一组数据库和表定义，并将它们合并到一个模式中，然后用于构建或更新您的数据库表。如果您真的关心底层 SQL 数据库，那么其中之一就是给您的。我发现它们是一个中的六个，另一个是六个。

`DataMapper`更加*以对象为中心*，允许您在对象自己的类定义中定义所需的属性和对象关系；然后当您的应用程序启动时，请确保您调用`DataMapper.auto_upgrade!`并升级数据库以适合您的对象图。好处是您只有一个地方可以查找您的对象可能具有的属性。缺点是您对底层数据库的细节控制较少，尽管严格定义映射并非不可能，`DataMapper`当您关心数据库表上的对象图时效果很好。

`SQL`好消息是，一旦您定义了从对象图到数据库表的映射，它们几乎都以相同的方式工作。所有这些都支持相关对象集合、many_to_many 关系、多态性等的延迟或抢先加载，并且往往仅在配置和播种细节方面有所不同。

我经常使用`DataMapper`它启动和拆除数据库模式的速度来启动项目，因为应用程序的对象图仍在不断变化；`Active Record`当架构稳定下来时，我会快速重构以使用。下一个项目我想我会`Sequel`试一试，因为人们似乎对它赞不绝口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:46:26.357

我在 Sinatra 中使用 datamapper 取得了成功，就像其他帖子一样，您也可以使用 Sequel 和 Active Record。不过，使用 Active Record 的一个好处是，如果您确实想使用/学习 ROR，Active Record 是默认的 ORM，因此您可能需要考虑这一点。

如果你不想走 ORM 路线，你总是可以使用 SQL-Ruby gem，它允许你创建和运行 sql 查询。[这是来自网站http://sqlite-ruby.rubyforge.org/](http://sqlite-ruby.rubyforge.org/)的一些示例代码

```
require 'sqlite'

db = SQLite::Database.new( "data.db" )

db.execute( "select * from table" ) do |row|
  p row
end

db.close 
```

# android - 在 iOS 中创建“仪表板”主屏幕

> ID：12086066
> 
> 赞同：0
> 
> 时间：2012-08-23T06:39:03.017
> 
> 标签：android, ios, xcode

我正在 iOS 中创建我的第一个应用程序，并且我非常习惯于在 eclipse 中为 Android 开发。我的第一步是我需要创建一个仪表板作为主屏幕。对于我应该在 xcode 中选择哪种布局，我有点“困惑”。在 android 中我总是选择最基本的设置，最后我得到一个空白的活动和一个空白的布局。这就是我想开始的地方，因为我已经习惯了。我想知道是否有经验丰富的 iOS 开发人员可以指出我从哪个模板开始的正确方向。

![在此处输入图像描述](../Images/2fb2c1733627f48a238880a155008f06.png)

说使用空应用程序似乎很容易，但如果我将不得不做更多不值得我花时间的设置，那么请赐教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:18:04.617

您可能想要使用单视图应用程序。这将为您提供一个带有视图控制器的模板和一个可以构建的空白界面文件（您可以选择 xib 或故事板）。从那里你可以添加任何你想要的。

使用此模板，您将能够立即将您的应用程序构建到模拟器或您的设备上。但是，如果您已经知道您希望您的应用程序如何工作，您可以选择基于选项卡的应用程序是否应该有多个选项卡并且大部分工作将为您完成，或者基于实用程序的应用程序将为您提供两个视图控制器，其中之一将以模态方式呈现。等等等等……

# android - AIR Android 强制数字文本输入

> ID：12086067
> 
> 赞同：2
> 
> 时间：2012-08-23T06:39:19.757
> 
> 标签：android, actionscript-3, air

在 as3 中，是否可以强制数字键盘条目显示在文本字段而不是标准键盘上？

我有一个文本字段，用户将输入价格，这将是一个更好的用户体验。我知道我可以限制文本字段输入，但希望显示实际的数字键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:47:46.727

首先，请参阅后续文档。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StageText.html#StageText%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StageText.html#StageText%28%29)

[http://blogs.adobe.com/cantrell/archives/2011/09/native-text-input-with-stagetext.html](http://blogs.adobe.com/cantrell/archives/2011/09/native-text-input-with-stagetext.html)

并参考以下代码。

```
import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.geom.Rectangle;
import flash.text.ReturnKeyLabel;
import flash.text.SoftKeyboardType;
import flash.text.StageText;

var text:StageText = new StageText();
text.softKeyboardType = SoftKeyboardType.NUMBER;
text.restrict = "0-9";
text.returnKeyLabel = ReturnKeyLabel.GO;

text.stage = this.stage;
text.viewPort = new Rectangle(10, 10, 300, 40 ); 
```

# java - JODReports freemarker 'if' with 'and' 指令异常

> ID：12086072
> 
> 赞同：2
> 
> 时间：2012-08-23T06:39:31.277
> 
> 标签：java, if-statement, report, freemarker

我在我的项目中使用 JODReports (http://jodreports.sourceforge.net/) 来生成文档。问题在于 '[#if...]' 指令中的 'AND' 逻辑运算。示例（在“.odt”模板中）：

```
[#if entry1?? AND entry2??]bla bla[/#if] 
```

如果存在“entry1”和“entry2”并且它们不是空值，则应该写为“bla bla”，但是在解析模板时出现错误：

```
freemarker.core.ParseException: Encountered "AND" at line 4, column 30424 in content.xml.
Was expecting one of:
    ">" ...
    "." ...
    "[" ...
    "(" ...
    "?" ...
    "!" ...
    <TERMINATING_EXCLAM> ...
    "??" ...
    "+" ...
    "-" ...
    "*" ...
    "/" ...
    "%" ...
    "!=" ...
    "=" ...
    "==" ...
    ">=" ...
    <ESCAPED_GTE> ...
    ">" ...
    <ESCAPED_GT> ...
    <LESS_THAN_EQUALS> ...
    <LESS_THAN> ...
    ".." ...
    <AND> ...
    <OR> ...

    at freemarker.core.FMParser.generateParseException(FMParser.java:4697)
    at freemarker.core.FMParser.jj_consume_token(FMParser.java:4568)
    at freemarker.core.FMParser.If(FMParser.java:1171)
    at freemarker.core.FMParser.FreemarkerDirective(FMParser.java:2372)
    at freemarker.core.FMParser.Content(FMParser.java:2618)
    at freemarker.core.FMParser.OptionalBlock(FMParser.java:2786)
    at freemarker.core.FMParser.List(FMParser.java:1257)
    at freemarker.core.FMParser.FreemarkerDirective(FMParser.java:2375)
    at freemarker.core.FMParser.Content(FMParser.java:2618)
    at freemarker.core.FMParser.OptionalBlock(FMParser.java:2786)
    at freemarker.core.FMParser.Escape(FMParser.java:2302)
    at freemarker.core.FMParser.FreemarkerDirective(FMParser.java:2445)
    at freemarker.core.FMParser.Content(FMParser.java:2618)
    at freemarker.core.FMParser.OptionalBlock(FMParser.java:2786)
    at freemarker.core.FMParser.Root(FMParser.java:2958)
    at freemarker.template.Template.<init>(Template.java:149)
    at freemarker.template.Template.<init>(Template.java:172)... 
```

这很奇怪，因为“AND”在预期语句列表中。更改模板为：

```
 [#if (entry1??) AND (entry2??)]bla bla[/#if]
    [#if entry1?? <AND> entry2??]bla bla[/#if]
    [#if (entry1??) <AND> (entry2??)]bla bla[/#if]
    [#if (entry1)?? AND (entry2)??]bla bla[/#if]
    [#if entry1?? [AND] entry2??]bla bla[/#if]
    [#if (entry1??) [AND] (entry2??)]bla bla[/#if] 
```

也不起作用。使用 '&&' 或 '&' 而不是 'AND' 会给我错误：

```
freemarker.core.ParseException: Encountered ";" at line 4, column 30430 in content.xml.
Was expecting one of:
    ">" ...
    "." ...
    "[" ...
    "(" ...
    "?" ...
    "!" ...
    <TERMINATING_EXCLAM> ...
    "??" ...
    "+" ...
    "-" ...
    "*" ...
    "/" ...
    "%" ...
    "!=" ...
    "=" ...
    "==" ...
    ">=" ...
    <ESCAPED_GTE> ...
    ">" ...
    <ESCAPED_GT> ...
    <LESS_THAN_EQUALS> ...
    <LESS_THAN> ...
    ".." ...
    <AND> ...
    <OR> ...

    at freemarker.core.FMParser.generateParseException(FMParser.java:4697)
    at freemarker.core.FMParser.jj_consume_token(FMParser.java:4568)
    at freemarker.core.FMParser.If(FMParser.java:1171)
    at freemarker.core.FMParser.FreemarkerDirective(FMParser.java:2372)
    at freemarker.core.FMParser.Content(FMParser.java:2618)
    at freemarker.core.FMParser.OptionalBlock(FMParser.java:2786)
    at freemarker.core.FMParser.List(FMParser.java:1257)
    at freemarker.core.FMParser.FreemarkerDirective(FMParser.java:2375)
    at freemarker.core.FMParser.Content(FMParser.java:2618)
    at freemarker.core.FMParser.OptionalBlock(FMParser.java:2786)
    at freemarker.core.FMParser.Escape(FMParser.java:2302)... 
```

我当然可以写两个“[#if]”指令——像这样：`[#if entry1??][#if entry2??]bla bla[/#if][/#if]`——但我不想那样做。有什么建议么？
谢谢， 阿雷克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:59:39.663

FreeMarker 没有类似`and`or的运算符`AND`，它只有`&&`. 所以`[#if entry1?? && entry2??]bla bla[/#if]`应该工作。从您在这种情况下收到的错误消息中，我假设某些东西（不是 FreeMarker）已经逃脱了`&&`to `&amp;&amp;`。需要防止这种情况，然后它将起作用。

在错误消息中说明`AND`支持，这是一个原始的 JavaCC 错误消息，它只是说标识为`<AND>`受支持的令牌......我建议在有疑问时使用 FreeMarker 的文档：http: [//freemarker.org/docs/ dgui_template_exp.html#dgui_template_exp_logicalop](http://freemarker.org/docs/dgui_template_exp.html#dgui_template_exp_logicalop)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T11:50:29.900

如果您查看 JODReport JUnit 测试

公共无效 testDirectiveWithSpecialChars() ：

[https://github.com/hernad/jodreports/blob/master/jodreports/src/test/java/net/sf/jooreports/templates/TextInputTagTest.java](https://github.com/hernad/jodreports/blob/master/jodreports/src/test/java/net/sf/jooreports/templates/TextInputTagTest.java)

使用此 ODT：

[https://github.com/hernad/jodreports/blob/master/jodreports/src/test/resources/textinput-directives-special-chars-template.odt](https://github.com/hernad/jodreports/blob/master/jodreports/src/test/resources/textinput-directives-special-chars-template.odt)

情况相同，此测试正确通过。

```
 <text:p text:style-name="Standard">
            <text:text-input text:description="jooscript">[#if (cond1==&apos;pass&apos; &amp;&amp; cond2==&apos;pass&apos;)]</text:text-input>
        </text:p>
        <text:p text:style-name="Standard">All passed!</text:p>
        <text:p text:style-name="Standard">
            <text:text-input text:description="jooscript">[#elseif (cond1==&apos;pass&apos; || cond2==&apos;pass&apos;)]</text:text-input>
        </text:p>
        <text:p text:style-name="Standard">Partly passed!</text:p>
        <text:p text:style-name="Standard">
            <text:text-input text:description="jooscript">[#else]</text:text-input>
        </text:p>
        <text:p text:style-name="Standard">All failed!</text:p>
        <text:p text:style-name="Standard">
            <text:text-input text:description="jooscript">[/#if]</text:text-input>
        </text:p> 
```

但是当你删除标签时：

```
<text:text-input text:description="jooscript"> </text:text-input> 
```

正如您所描述的，测试将失败。所以现在，解决方案是使用该标签来封装您的代码。

马丁

# java - 是否有另一种方法来创建 Junit 测试结果报告而不是 ant 的 Junitreport 任务

> ID：12086074
> 
> 赞同：0
> 
> 时间：2012-08-23T06:39:39.040
> 
> 标签：java, eclipse, ant, junit, junit4

我们正在使用 Ant 的 Junitreport 创建运行 Junit 的结果。代码是这样的：

```
<target name="report.html">
    <junitreport todir="${test.reports}">
        <fileset dir="${test.reports}">
            <include name="TEST-*.xml" />
        </fileset>
        <report todir="${test.reports}" />
    </junitreport>
</target> 
```

问题是它不能与 Java 一起正常工作。当我们第一次将 Java 升级到 Java 7 时，它停止了工作！现在我将 Java 升级到 Java 1.7.05 并将其更改为 64 位版本而不是 32 位版本。它再次停止工作。我会遇到这样的转换错误：应用转换时出现错误：转换期间出现致命错误

两个问题：

1.  有替代方法代替 Junitreport 吗？
2.  如果不是，错误取决于什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:24:30.453

这看起来像是 ant 1.8.2 及更低版本的问题。似乎是导致这些问题的相同错误：

[<junitreport> 在设置 SecurityManager 时在 JDK 7 上损坏](https://issues.apache.org/bugzilla/show_bug.cgi?id=51668)

[设置 SecurityManager 时，JDK 7 上的 <xslt> 重定向中断](https://issues.apache.org/bugzilla/show_bug.cgi?id=52382)

在 Eclipse 和 NetBeans 中使用 ant 似乎存在问题。

[<junitreport> 在 JDK 7 上的 IDE 内部损坏](http://netbeans.org/bugzilla/show_bug.cgi?id=201022)

[使用 Java 6u32 或更高版本在 junitreport 中构建 Ant 失败](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384757)

尝试使用更新版本的 ant，例如 1.8.3 甚至更好的 1.8.4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T11:29:54.443

更改 java 和 Ant 的版本。检查[http://www.duncanjauncey.com/blog/archives/41](http://www.duncanjauncey.com/blog/archives/41)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:51:52.463

它与Java版本无关。当您切换到新平台时，您的测试是否失败？

ant 任务对 xml 使用 xslt 处理。如果它有一些非常大的错误字符串，它可能会给错误一些像你写的那样的错误。

# qt - 如何让 Qt WebView 像 chrome 一样显示网站？

> ID：12086078
> 
> 赞同：0
> 
> 时间：2012-08-23T06:40:12.337
> 
> 标签：qt, webkit

在 Qt Creator 中，webview 像 IE 一样显示网站。我怎样才能让它像 Chrome 一样使用 webkit 显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:44:11.233

IE 不使用 webkit 引擎，但您的 Qt Webview 就像 Google Chrome 浏览器一样。所以不同之处可能在于您的 Qt Webview 使用的 webkit 版本。尝试阅读 webkit 并使用最新版本更新您的 qt sdk。您还可以尝试切换 webview 属性，如 javascript 和开发人员工具，以检查问题是出在您的代码还是 webview 上。

# android - 如何在android中单击按钮时更新小部件的视图？

> ID：12086080
> 
> 赞同：4
> 
> 时间：2012-08-23T06:40:29.203
> 
> 标签：android, android-widget, android-pendingintent

我正在开发 android 小部件，我在该小部件上显示了一些来自网络服务的数据，它工作正常。听到的是代码。

**代码**

```
public class WatchWidget extends AppWidgetProvider{

    private static final String TAG = "WatchWidget";

    @Override
    public void onUpdate( Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds ){
        Log.i(TAG, "* onUpdate");

        EBWeaterData ebwd=new EBWeaterData();

        EBWeatreUtils.getWeatherFeeds(context, ebwd, "my url to get data");

        RemoteViews views = new RemoteViews(context.getPackageName(),R.layout.main);
        RemoteViews newView = new RemoteViews(context.getPackageName(), R.layout.test);

        //get data 
        String day=ebwd.getDay_1()+ebwd.getDay_suffix_1()+" "+ebwd.getDay_name_1();
        String minmaxtemp="Max Temp "+ebwd.getDay_max_temp_1()+"°C "+"Min Temp "+ebwd.getDay_min_temp_1()+"°C";

        //set dat to views
        newView.setTextViewText(R.id.textView_day_name, day);
        newView.setTextViewText(R.id.textView_minmaxtemp, minmaxtemp);  
        newView.setImageViewResource(R.id.ImageView_icon, R.drawable.sunny);

        views.addView(R.id.view_container, newView);      
        ComponentName thisWidget = new ComponentName(context,WatchWidget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(context);
        manager.updateAppWidget(thisWidget, views);

    }

} 
```

我在该小部件上有一个按钮，现在我想在用户单击按钮时使用不同的值更新小部件视图。我知道我必须像下面这样处理它pendingIntent。

```
 Intent intent = new Intent(context, activitytogetNewdata.class);
      PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
      views.setOnClickPendingIntent(R.id.imageView1, pendingIntent); 
```

但它会开始另一个我不想去另一个活动的活动。我只需要在按钮单击后用新值更新相同的小部件视图。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:32:24.363

我发现了我的代码的问题。当我要使用pendingintent更新我的视图时，它会在每个按钮点击时动态添加视图，因为我使用了2个布局，所以我解决了如下问题。（我使用一个布局代替使用两个）

**代码**

```
public class WatchWidget extends AppWidgetProvider{

    private static final String TAG = "WatchWidget";

    @Override
    public void onUpdate( Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds ){
        Log.i(TAG, "* onUpdate");

        EBWeaterData ebwd=new EBWeaterData();

        EBWeatreUtils.getWeatherFeeds(context, ebwd, "my url to get data");

        RemoteViews newView = new RemoteViews(context.getPackageName(), R.layout.test);

        //get data 
        String day=ebwd.getDay_1()+ebwd.getDay_suffix_1()+" "+ebwd.getDay_name_1();
        String minmaxtemp="Max Temp "+ebwd.getDay_max_temp_1()+"°C "+"Min Temp "+ebwd.getDay_min_temp_1()+"°C";

        //set dat to views
        newView.setTextViewText(R.id.textView_day_name, day);
        newView.setTextViewText(R.id.textView_minmaxtemp, minmaxtemp);  
        newView.setImageViewResource(R.id.ImageView_icon, R.drawable.sunny);

        ComponentName thisWidget = new ComponentName(context,WatchWidget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(context);
        manager.updateAppWidget(thisWidget, newView);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:48:46.693

浏览本教程。

访问[http://www.developer.com/ws/android/programming/Handling-User-Interaction-with-Android-App-Widgets-3837531.htm](http://www.developer.com/ws/android/programming/Handling-User-Interaction-with-Android-App-Widgets-3837531.htm)

他们已经解决了你所拥有的问题。

# html - 创建圆角箭头

> ID：12086085
> 
> 赞同：3
> 
> 时间：2012-08-23T06:40:54.983
> 
> 标签：html, css

我有这个设计，其中每个框前都有一个倾斜的箭头：

[![替代文字](../Images/ffa7796426edaa82c7f694b183534c51.png)](https://leketshibolim.ort.org.il/wp-content/uploads/2012/08/wanted.jpg)

我使用 CSS 伪元素`:before`和`:after`.
这是 [我写的代码](http://jsfiddle.net/KgpVX/)

他们就这样出来了：

[![替代文字](../Images/7524e237f2584b1a969987d7032d4133.png)](https://leketshibolim.ort.org.il/wp-content/uploads/2012/08/have.jpg)

如您所见，设计中的箭头比实际创建的箭头更圆。我真的不知道如何改变这一点。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-13T09:26:09.170

css 边框不支持舍入，但 svg 的笔画支持使用：

`stroke-linecap: round;`和`stroke-linejoin: round;`

```
<svg preserveAspectRatio="none" viewBox="-1 -1 100 100">
  <polyline points="10,10 10,0 0,10" stroke-linejoin="round" stroke-width="2" stroke="red"/> 
</svg>
```

它的灵活性有限，但确实提供了一些操作，并且可以产生虽然很小的圆形边缘。

```
.slider-pagination {
  padding: 50px;
  background-color: #dedede;
}

.sld-menu-item {
  position: relative;
  float: right;
  margin: 0 0 0 13px;
  text-align: center;
  width: 106px;
  height: 85px;
  border: 3px solid #fff;
  position: relative;
  /*nicer box-shadow for webkit and mozilla. later - less nice bordershadow for IE8*/
  box-shadow: 0 2px 5px 2px rgba(0, 0, 0, 0.3);
  /*rachel's shadow*/
  -moz-box-shadow: 0 2px 5px 2px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0 2px 5px 2px rgba(0, 0, 0, 0.3);
  behavior: url(/singa/wp-content/themes/singalovsky/PIE.htc);
  list-style: none;
}

.sld-menu-item span {
  background-color: #e5e5e5;
  display: inline-block;
  width: 85%;
  height: 61px;
  color: #414141;
  font-weight: bold;
  text-decoration: none;
  padding: 15px 8px 0;
  font-size: 14px;
  line-height: 16px;
  cursor: pointer;
  kit-transition: background 1s linear;
  -moz-transition-property: color, background;
  -moz-transition-duration: 0.5s, 0.5s;
  -moz-transition-timing-function: ease, ease;
  -o-transition: background 1s ease-out;
  transition: background 1s linear;
}

.sld-menu-item svg {
  position: absolute;
  top: -20px;
  right: 20px;
  z-index: 10;
  height: 20px;
  width: 20px;
}

.sld-menu-item polyline {
  stroke-linecap: round;
  stroke: #fff;
  stroke-width: 18;
  stroke-linejoin: round;
  fill: #e5e5e5;
  -webkit-filter: drop-shadow(5px 5px 4px rgba(0, 0, 0, 0.3));
  filter: drop-shadow(5px 5px 4px rgba(0, 0, 0, 0.3));
}
```

```
<ul class="slider-pagination clearfix" id="slider-pagination">
  <li onclick="slideshow.pos(0)" class="sld-menu-item sld-menu-item-1 selected">
    <span title="תחומי לימוד"></span>
    <svg preserveAspectRatio="none" viewBox="10 -20 100 100">  
      <polyline points="100,100 100,0 0,100"/>
    </svg>
  </li>
</ul>
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-23T06:47:28.397

试试这个[http://cssarrowplease.com](http://cssarrowplease.com) - 简单而且几乎支持所有浏览器，

**您的设计具有外部**边框（笔画-外部/内部/中心），这只能使用 Photoshop 而不能使用 css，

因此你不能用 css 来处理它 :)

所以我认为你应该使用 Image/svg

# c++ - 将对象的地址推送到向量后更改对象

> ID：12086088
> 
> 赞同：2
> 
> 时间：2012-08-23T06:41:18.087
> 
> 标签：c++, vector

我有个问题：

```
class B : public class A {
public:
  vector<int*> vec; 
};

class A  {
};

vector<A*> vec_a;
vector<B*> vec_b; 
```

如果我将一个类对象推回`B`两个向量中。

```
B* b = new B;
vec_a.push_back(b);
vec_b.push_back(b); 
```

然后在那之后，我改变了 class 对象内部的一些东西`B`，

如：

```
int* i = ....
vec_b[0].push_back(i); 
```

有`vec_a`变化吗？

我对此感到困惑，因为我已经检查过当矢量 push_back 时，它只会创建一个副本。但是当我检查上面的代码时，它发生了变化。这两个向量是否拥有 object 的共享内存`b`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:45:29.770

是的，当推送到`vector`副本时会创建。但是，在您的情况下，它是*指针*的副本，而不是实际对象的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:44:58.537

您在两个向量中都放置了指向同一个对象的指针，因此从元素 in 指向的对象的任何更改`vec_a`也会影响 in 的元素`vec_b`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:45:22.710

是的。毕竟，您只创建一个对象。你推指针。所以`std::vector`复制指针，但是你改变它们指向的内存。这就是为什么你会得到你的结果。我建议你阅读更多关于指针的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T06:46:01.303

您的向量包含指向公共对象的指针。因此，您通过这些指针之一的取消引用在该对象内更改的任何内容都会反映在它们指向的对象中。将指针添加到向量会创建指针本身的副本，而不是它们指向的对象。如果您向两个向量添加了类的公共**实例**`B`，则每个向量将包含该对象的单独副本。添加指针会导致原始指针的副本被添加到每个向量中 - 但两个副本将具有相同的值，即它们指向的对象的内存地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T07:05:33.883

矢量 push_back 方法确实创建了一个副本。但是由于您已经指定了指针向量（指向 vec_a 和 vec_b），因此复制这些指针实际上不会更改原始对象。如果你使用，你会得到你最初期望的

```
vector<A> vec_a;
vector<B> vec_b; 
```

相反，用

```
B b;
vec_a.push_back(b);
vec_b.push_back(b); 
```

实际上会将 b 的内容复制到向量中。改变一个不会影响另一个。

# security - 安全和路由 - Symfony2

> ID：12086091
> 
> 赞同：0
> 
> 时间：2012-08-23T06:41:38.603
> 
> 标签：security, symfony, routing

我希望我的项目的索引页面是一个登录表单，下面有一个注册链接，未登录的访问者应该只能看到带有路由的登录表单和带有路由`/`的注册页面`/register`。当日志我希望他们被重定向到主页时 route `/home`。我尝试了一些东西，它在开发环境中工作（虽然工具栏有一些问题 - [Symfony2 - dev environment](https://stackoverflow.com/questions/12073945/symfony2-dev-environment)）但是当我切换到 prod env 时，浏览器说：“页面没有正确重定向。Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。这个问题有时可能是由禁用或拒绝接受 cookie 引起的。

这是我的文件：

**安全.yml**

```
security:
    encoders:
        EM\MyFriendsBundle\Entity\User:
            algorithm:        sha1
            encode_as_base64: false
            iterations:       1

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER

providers:
    administrators:
        entity: { class: EMMyFriendsBundle:User }

firewalls:
    secured_area:
        pattern:    ^/
        anonymous: ~
        form_login:
            login_path:  /login
            check_path:  /login_check
            default_target_path: /home

access_control:
    - { path: ^/home, roles: ROLE_ADMIN } 
```

**路由.yml**

```
login_display:
    pattern: /
    defaults: { _controller: EMMyFriendsBundle:Welcome:display }

login:
    pattern:   /login
    defaults:  { _controller: EMMyFriendsBundle:Welcome:login}

login_check:
    pattern:   /login_check

register:
    pattern: /register
    defaults: { _controller: EMMyFriendsBundle:Welcome:register }

home_display:
    pattern: /home
    defaults: { _controller: EMMyFriendsBundle:Home:display } 
```

**欢迎控制器.php**

```
<?php

namespace EM\MyFriendsBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\Security\Core\SecurityContext;

class WelcomeController extends Controller
{
    public function displayAction()
    {
        $error=null;
        $last_username=null;
        return $this->render('EMMyFriendsBundle:Welcome:login.html.twig', array('error' => $error, 'last_username' => $last_username));
    }

    public function loginAction()
    {
        $request = $this->getRequest();
        $session = $request->getSession();

        // get the login error if there is one
        if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
            $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
        } else {
            $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
            $session->remove(SecurityContext::AUTHENTICATION_ERROR);
        }

        return $this->render('EMMyFriendsBundle:Welcome:login.html.twig', array(
            // last username entered by the user
            'last_username' => $session->get(SecurityContext::LAST_USERNAME),
            'error'         => $error
        ));
    }

    public function registerAction()
    {
         return $this->render('EMMyFriendsBundle:Welcome:register.html.twig');
    }
} 
```

**家庭控制器.php**

```
<?php
namespace EM\MyFriendsBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class HomeController extends Controller
{
    public function displayAction()
    {
        return $this->render('EMMyFriendsBundle:Home:home.html.twig');
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:59:53.627

添加：

```
 - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }. 
```

# grails - MySQLIntegrityConstraintException - Grails 中的“无法添加或更新子行：外键约束失败”

> ID：12086096
> 
> 赞同：4
> 
> 时间：2012-08-23T06:42:01.787
> 
> 标签：grails

我试图从 XML 文件中获取一些订单信息并尝试将其存储在数据库（MySQL）表中。我可以从 XML 文件中检索订单信息，但是当我尝试插入表时，它显示错误为 MySQLIntegrityConstraintException。

我的程序包含如下，

`def Order = new XmlParser().parse("MyXml.xml")`
`def set1 = sql.dataSet("order_item")`
`def set2 = sql.dataSet("order_header")`
`Order.order_item.each {`
`// retrieving order information and storing`
`}`
`set1.add(Column_Name1:order_id,Column_Name2:field2,Column_Name3:field3)`
`set2.add(Column_Name1:order_id)`

我在下面详细列出了错误

> 警告：执行失败：插入 order_item（order_id、order_item_seq_id、order_item_type_id、product_id、prod_catalog_id、quantity、unit_price、unit_list_price、item_description、status_id）值（?、?、?、?、?、?、?、?、? ，？）因为使用：无法添加或更新子行：外键约束失败（`ecommerc e/order_item`，CONSTRAINT `ORDER_ITEM_HDR`FOREIGN KEY（`ORDER_ID`）REFERENCES `order_header`（`ORDER_ID`））捕获：com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationExcepti on：无法添加或更新子行：外键约束失败（`ecommerce /order_item`，CONSTRAINT `ORDER_ITEM_HDR`FOREIGN KEY（`ORDER_ID`）REFERENCES `o rder_header`（`ORDER_ID`））com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：无法添加或更新子行：外键约束失败（`ecommerce/order_i tem`, 约束外`ORDER_ITEM_HDR`键 ( `ORDER_ID`) 参考`order_hea der`(`ORDER_ID`)) 在 com.mysql.jdbc.Util.getInstance(Util.java:384) 在 com.mysql.jdbc.Util.handleNewInstance(Util.java:409) 在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java :1041) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3562) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3494) 在 com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO. java:1960) 在 com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2114) 在 com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2696) 在 com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement .ja va:2105) 在 com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java :2398) 在 com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java :2316) 在 com。mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java :2301) 在 db2xml.XMLToDatabase$_main_closure2.doCall(XMLToDatabase.groovy:52) 在 db2xml.XMLToDatabase.main(XMLToDatabase.groovy:38)

谁能帮我摆脱这个问题。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:19:17.047

首先要更新的外键约束表，然后是我应该更新的特定表。上面代码的一个小改动是

`set2.add(Column_Name1:order_id)` `set1.add(Column_Name1:order_id,Column_Name2:field2,Column_Name3:field3)`

应该先更新第 2 组，然后再更新第 1 组。

现在它对我有用。谢谢大家。

# c++ - 如何在 NetBeans 中使用框架

> ID：12086097
> 
> 赞同：1
> 
> 时间：2012-08-23T06:42:07.260
> 
> 标签：c++, qt, netbeans, frameworks, qwt

我正在尝试在 NetBeans (Mac OSX) 中使用框架。该框架是`qwt`，它作为 qwt.framework 驻留在 /Library/Frameworks 中。

为了让项目运行并使用这个框架，我在项目设置中做了两件事：

1) 添加了链接选项“ `-framework qwt`”

2) 添加包含目录' `/Library/Frameworks/qwt.framework/Headers`'

这让事情顺利进行，程序成功编译并运行，但我想知道这是否是在 NetBeans 中使用框架的正确方法。我想我希望我可以在某个地方添加框架，而不必担心包含，因为它们会被自动拾取。

任何人都可以提供有关在 NetBeans 中使用框架的更有效/正确方法的建议吗？

谢谢皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:11:34.130

在进行了一些谷歌研究之后，似乎没有比上述步骤更简单的方法来利用 NetBeans 中的框架了。a）添加一个链接选项' `-framework xxx`'和b）从框架中添加包含目录，该目录位于`xxx.framework/Headers`（通常）。XCode 和 QtCreator 有直接添加框架的选项，但 NetBeans 似乎没有这个选项。希望这些步骤对想要使用 NetBeans 和框架的人有用。（我更喜欢 NetBeans 而不是 QtCreator 来制作 Qt 项目，因为我发现它的调试工具和通用 IDE 更好用。）Pete

# amazon-cloudfront - Amazon CloudFront - 通过正则表达式使文件无效，例如 *.png

> ID：12086099
> 
> 赞同：4
> 
> 时间：2012-08-23T06:42:17.790
> 
> 标签：amazon-cloudfront, invalidation

有没有办法让 Amazon CloudFront 失效（通过管理控制台），使所有匹配模式的文件失效？例如图片/*.png

语境 -

1.  我在我的网站上为图像设置了缓存控制，但错误地在 Apache 的缓存指令中遗漏了 png 扩展名。所以 .gif/.jpg 文件被缓存在用户计算机上，但 .png 文件没有。
2.  所以我修复了 apache 指令，现在我的 apache 服务器使用适当的缓存控制指令提供 png 文件。我对此进行了测试。
3.  但是云端过去已经获取了那些 png 文件，所以通过云端访问这些 png 文件仍然会带来那些没有缓存控制的 png 文件。最终结果 - 仍然没有用户缓存这些 png 文件
4.  我尝试将 Amazon CloudFront 控制台中的失效设置为 images/*.png。控制台说完成，但我仍然没有在 png 文件中获得缓存控制指令。--> 让我相信失效并没有发生。
5.  我可以为完整的图像目录设置失效；但是我有太多的图像文件——>为此我会被收取 > 100 美元的费用。所以试图避免这种情况。
6.  更改图像版本以便云端获取新版本在我的代码中是一项痛苦的练习；为 500 个 png 文件做这件事会很痛苦。--> 尽量避免。
7.  列出单个 png 文件也是一种痛苦——> 也试图避免它。

谢谢，-阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:29:06.527

如果您的 CloudFront 分配配置在 S3 存储桶之前，您可以列出 S3 存储桶中的所有对象，使用正则表达式模式（例如，`/*.png/i`）过滤它们，然后使用该列表构建您的失效请求。

反正我就是这么做的。我希望这有帮助！:)

# php - 如何检查网站是否已启动并长时间存储结果

> ID：12086106
> 
> 赞同：0
> 
> 时间：2012-08-23T06:42:53.953
> 
> 标签：php, mysql, database, monitoring, large-data

我正在监视一个网站（使用 curl）以查看它是否已启动并了解主页上简单 GET 请求的响应时间。我正在使用自制脚本来执行此操作，并且我不想为此使用 Nagios 或任何其他现有工具。

我的问题是我不知道如何长时间（比如几个月）存储结果。我当然不需要自纪元以来的每个请求的响应时间，但我想获得状态（向上|向下）和大部分时间的平均响应时间。例如 ：

1.  [上个月] -> 每日响应时间（平均）
2.  [过去 3 个月] -> 每周响应时间（平均）
3.  [过去 12 个月] -> 每月响应时间（平均）

在整个期间，我想保持状态。为此，我猜我只会保存状态更改发生的最后日期。

所以问题是：以这种频率/保留率存储此类信息的最佳方式是什么？我正在用 PHP 编码，后面有一个 Mysql DB，但也许有比 DB 更好的东西吗？

接受任何语言/技术，只要它是免费的并且在 linux/unix 上运行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:53:15.713

将每个请求保存到 DB 表和 calcualte `daily response time (avg)`，`weekly response time (avg)`并`monthly response time (avg)`编写简单的 PHP 函数。

如果您只存储响应时间和请求日期，您的表将不会快速增长，并且使用正确的索引将快速运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:00:15.700

这听起来像是一个典型的循环数据库。[RRDtool](http://oss.oetiker.ch/rrdtool/)允许您管理这样的数据库。我看不出重新发明轮子的理由。

# spring - Facebook 登录和获取个人资料信息

> ID：12086109
> 
> 赞同：1
> 
> 时间：2012-08-23T06:43:04.827
> 
> 标签：spring, facebook-login

我正在做一个关于 JSF2.0 和 Spring 3.0.2 的项目。现在我的要求是使用 facebook 登录并获取个人资料信息。

谁能给我一些链接或建议，以便我继续。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:22:52.083

Spring 有一个名为 spring social 的子项目。有一些教程可以帮助您入门。登录和获取个人资料信息非常简单。看看这个[快速入门](https://github.com/SpringSource/spring-social/wiki/Quick-Start)。

# java - 为什么在 Array 上允许使用克隆方法？

> ID：12086115
> 
> 赞同：2
> 
> 时间：2012-08-23T06:43:30.910
> 
> 标签：java, clone

`clone()`默认情况下，该方法在类中不可见，`Object`那么它如何不会为 Array 类型提供错误？
这是否意味着有一种称为 int[] 的类型，其实现是用 java 编写的，如果是，在哪里可以找到它？
如果它是写的，那为什么不完整地写呢？
我的意思是为什么不正确地实现每个方法，而不仅仅是`Object`Class 的行为。

```
 int[] a ={1,2,3};
    Object object = new Object();
    object.clone();//Does not compile since clone is protected.
    a.clone();// allowed as this method is from int[] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T06:49:25.837

所有数组都实现了 Cloneable 接口。

请参阅 Java 语言规范的相关部分：[§10.7 数组成员](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7)

> public 方法`clone`，覆盖类中同名的方法，`Object`不抛出检查异常。`clone`数组类型的方法的返回类型`T[]`是`T[]`。多维数组的克隆是浅的，也就是说它只创建一个新数组。子数组是共享的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:44:04.417

数组被 JVM 实现为动态创建的类的实例。该类有一个特殊的名称，它实现了上面其他海报所指出的 Cloneable 和 Serializable 接口。（它还有一个名为长度的公共最终字段......）。

该类还具有受保护的 Object.clone() 方法的具体和**公共**实现。Java 允许方法的访问级别（*公共、私有、受保护和默认的包保护访问级别*）在该方法被覆盖时限制较少。换句话说，受保护的方法可以在子类中公开，这就是 JVM 对数组类实现的受保护的 clone() 方法所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:08:02.603

因为数组不能作为普通对象扩展。制作数组的唯一方法`Cloneable`是从一开始就实现`Cloneable`接口。出于同样的原因，数组默认实现`Serializable`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:49:35.657

这是因为有一个 Cloneable 接口使它可以`Object.clone()`访问该方法。Java 中的数组已经实现了 Cloneable，因此您可以克隆一个数组对象。

另一方面，任意对象不能保证它可以对自身进行逐个字段的复制。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-11-21T14:33:11.210

因为`clone()`在`Object`类中受保护，并且受保护的访问说明符表示您可以访问同一个包的子类中的超类受保护方法。通过这种推理，`Object`类在`java.lang`包中，并且您正在从不同的包中访问它，这就是您收到编译错误的原因。

# jquery - JqG rid 使用 SetRowData 添加按钮对象

> ID：12086117
> 
> 赞同：0
> 
> 时间：2012-08-23T06:43:32.597
> 
> 标签：jquery, jqgrid

我在 gridComplete 中使用 setRowData 将两个按钮添加到我的 JQGrid 中名为“Actions”的列中。它工作得很好但是由于最近的更改，我不得不从传递 html 切换到 setRowData 以某种方式传递两个按钮对象...更改后，setRowData 导致 [object Object] 显示在列中...我只是想知道将两个按钮对象添加到 jqGrid 中的列的最佳方法是什么？我应该改用 SetCell 吗？

谢谢， HS

编辑：谢谢你们的回复。但是我不确定我是否遵循您的答案......也许我没有清楚地描述可能......我按照[这篇](https://stackoverflow.com/questions/2939631/jqgrid-add-custom-button-to-row)文章中的方法将我的按钮添加到 Action 列。但是由于最近的更改，我不得不像这样创建我的按钮：

```
acceptButton = $('<button class="ui-state-default ui-corner-all"><span class="ui-button-text">Accept</span></button>',{click:function(){ AcceptNewValue(gridId,currentRow["UserID"],'') }});
rejectButton = $('<button class="ui-state-default ui-corner-all"><span class="ui-button-text">Reject</span></button>', {click:function(){ RejectNewValue(gridId,currentRow["UserID"],'') }}); 
```

问题是我现在如何将两个按钮都添加到网格的“操作”列中？所有行上都应该出现两个按钮...当单击来自不同行的按钮时，不同的 UserID 将被传递到单击函数中。

谢谢， HS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:39:36.600

我`afterInsertRow: function(rowid, rowdata, rowelem)`在创建 jqGrid 时使用回调，然后

```
$(this).jqGrid('setCell', rowid, '[col_id]', '简单按钮');
```

# c# - 如何在没有控制问题的情况下停用 ViewState

> ID：12086120
> 
> 赞同：3
> 
> 时间：2012-08-23T06:43:39.490
> 
> 标签：c#, asp.net, html, controls, viewstate

我编写了一个 ASP.NET 应用程序，它在服务器的 IIS7 中运行。如果我在浏览器中打开此网络表单并向我显示站点代码，我会看到...

![在此处输入图像描述](../Images/7c517727fb8eacbeec4e14b4b874e6f4.png)

我有很多控制按钮、标签、文本框和 ListView 的方式。我尝试在 web.config 中停用 ViewState，但如果我停用它，我的应用程序将无法正常运行。我能做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T06:55:03.560

仅停用不需要视图状态的控件。

为此，您需要了解视图状态是什么。

Viewstate 是页面保存和记住控件值的地方，以便在回发后拥有它们。请记住，**视图状态在回发后使用。**

所以实际上你有两次相同的数据，但只有视图状态是回发以前的数据，后面的代码可以使用该数据。

所以主要的问题是，你需要哪些控件来记住你填写的内容，或者需要哪些控件来记住它们以前的状态。

让我们看一个打开和关闭 EnableViewState 的简单文字。

## 视图状态开启

```
<asp:Literal runat="server" EnableViewState="true" ID="txtLiterar"> 
```

现在，如果您在此文字上放置一个文本，则该文本也将保存在视图状态中，并且您可以执行此操作。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        txtLiterar.Text = "Hello There";
    }
} 
```

所以回帖后 Literal 仍然有它的内容，你可以避免再次填充它，因为 viewstate 有它并自动再次填充它。

## 视图状态关闭

```
<asp:Literal runat="server" EnableViewState="false" ID="txtLiterar"> 
```

现在，如果您在此文字上放置文本，则该文本不会保存在视图状态和您将其添加为后面的代码中。

```
protected void Page_Load(object sender, EventArgs e)
{
    txtLiterar.Text = "Hello There";
} 
```

所以不同的是，您需要始终在每个帖子上用数据填充该控件。

## 最需要视图状态的地方。

视图状态中最需要的部分是填写下拉列表时。那里有一个数据绑定，后面的代码需要记住要放置在 SelectValue 上的正确值。

GridView 和其他类似的控件也需要它，因为在分页数据时保留上一页和其他信息。

因此，您可以关闭大多数控件的视图状态 - 在该控件上，您可以在每次回帖时再次填充它们，以及在不需要记住先前状态的控件上。

更多阅读内容：
[如何优化视图状态类](https://stackoverflow.com/questions/2784132/how-to-optimize-class-for-viewstate)
[在服务页面之前确定 ASP.NET 页面视图状态的大小](https://stackoverflow.com/questions/4046805/determine-size-of-asp-net-pages-viewstate-before-serving-page)
[限制 AJAX 调用的视图状态信息](https://stackoverflow.com/questions/8877252/limiting-view-state-information-on-ajax-calls)

# javascript - Javascript添加字符串开始

> ID：12086121
> 
> 赞同：2
> 
> 时间：2012-08-23T06:43:46.180
> 
> 标签：javascript, string

我的代码：

```
var test = "aa";
test += "ee";
alert(test); 
```

打印出“aaee”

我怎么能做同样的事情，**但添加字符串不是结束，而是开始**：像这样：

```
var test = "aa";
test = "ee" + test; 
```

这是很长的路，但有没有像第一个例子中那样的**更短的方法**？

**我想要的是我不能在定义中再次写出初始变量。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T06:48:32.380

没有内置运算符可以让您像第一个示例中那样实现此目的。也`test = "ee" + test;`似乎很不言自明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-21T05:36:12.850

你可以这样做..

```
test = test.replace (/^/,'ee'); 
```

*免责声明：http: [//xkcd.com/208/](http://xkcd.com/208/)*

* * *

![等等，忘记逃生了。 呜呜[taptaptap]eeeeee。](../Images/5b7424f195a52a8af01efc9473dc35c5.png "等等，忘记逃生了。 呜呜[taptaptap]eeeeee。")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:49:13.353

```
var test = "aa";
 alert('ee'.concat(test)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:53:41.503

您有几种可能性，虽然不是很短：

```
var test = "aa";

// all yield eeaa
result = "ee" + test;
result = test.replace(/^/, "ee"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T06:57:13.797

你所拥有的，`test = "ee" + test;`似乎完全没问题，而且没有更短的方法可以做到这一点。

如果你想要一个`js`解决方案，你可以做类似的事情，

```
test = test.replace(/^/, "ee"); 
```

有[很多方法](http://www.w3schools.com/jsref/jsref_obj_string.asp)可以实现这一点，但`test = "ee" + test;`似乎是最好的 imo。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-20T11:07:43.477

您可以在开头添加一个**字符串**（如果需要，可以多次添加），直到结果字符串达到您希望使用[String.prototype.padStart() 的长度。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)像这样：

```
var test = "aa";
test = test.padStart(4, "e");
alert(test); 
```

打印出来

> eeaa

```
var test = "aa";
test = test.padStart(5, "e");
alert(test); 
```

打印出来

> eeaa

# php - 通过使用 php mysql dreamweaver 我想使用两个相关表一键自动插入 1200 个数据

> ID：12086122
> 
> 赞同：0
> 
> 时间：2012-08-23T06:43:49.533
> 
> 标签：php, mysql, dreamweaver

我想在一个表中插入自动数据..一个数据将来自另一个我在这里称为 p_no(personal number) 的表，它来自另一个表(emp_info) n 它是另一个表出勤的外键。我想自动插入 1200 个数据，只需单击一个按钮 .1200 数据意味着 1200 p_no 和其他信息。

1.emp_info(p_no,name,designation..etc) P_no 是主键 2.attandance (aid(auto increment),attendance,tiffin,shift,ot date,p_no) p_no 是外键。现在我想通过单击一个按钮从 emp_info 表中访问 p_no 信息来自动插入 1200 个数据。

我正在使用dreamweaver、php、mysql。

* * *

```
 <?php require_once('Connections/bndock.php'); ?>
<?php
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  $theValue = (!get_magic_quotes_gpc()) ? addslashes($theValue) : $theValue;

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? "'" . doubleval($theValue) . "'" : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break; 
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}

mysql_select_db($database_bndock, $bndock);
$query_Recordset1 = "SELECT p_no FROM emp_info";
$Recordset1 = mysql_query($query_Recordset1, $bndock) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}
$val=10;

for($row_Recordset1=0;$row_Recordset1<=$val;$row_Recordset1++){

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
  $insertSQL = sprintf("INSERT INTO attndance (aid, doa, attnc, stnd, ot, shift, p_no) VALUES (%s, now(), %s, %s, %s, %s,%s)",
                       GetSQLValueString($_POST['aid'], "int"),                    
                       GetSQLValueString($_POST['attnc'], "text"),//attendance//doa=date
                       GetSQLValueString($_POST['stnd'], "text"),//tiffin
                       GetSQLValueString($_POST['ot'], "text"),
                       GetSQLValueString($_POST['shift'], "text"),
                    GetSQLValueString($_POST['p_no'], "int"));

  mysql_select_db($database_bndock, $bndock);
  $Result1 = mysql_query($insertSQL, $bndock) or die(mysql_error());

  $insertGoTo = "attnd_show.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
}

}

?> 
```

* * *

```
<form action="<?php echo $editFormAction; ?>" method="post" name="form1" id="form1">
<table width="296" height="190" align="center" bordercolor="#ECE9D8" bgcolor="#ECE9D8">
          <tr valign="baseline">
            <td colspan="2" align="right" nowrap="nowrap">&nbsp;</td>
            </tr>
          <tr valign="baseline">
            <td width="77" align="right" nowrap="nowrap"><strong>Attendance:</strong></td>
            <td width="193"><select name="attnc">
              <option value="P" selected="selected">P</option>
              <option value="A">A</option>
              <option value="L">L</option>
              <option value="Sick">Sick</option>
              <option value="Suspend">Suspend</option>
              <option value="TY">TY</option>
                                                                                                  </select>            </td>
          </tr>
          <tr valign="baseline">
            <td nowrap="nowrap" align="right"><strong>Stand Easy :</strong></td>
            <td><select name="stnd">
              <option value="Yes">Y</option>
              <option value="No">N</option>
                          </select>            </td>
          </tr>
          <tr valign="baseline">
            <td nowrap="nowrap" align="right"><strong>Over time:</strong></td>
            <td><select name="ot">
              <option value="Yes">Y</option>
              <option value="No">N</option>
                          </select>            </td>
          </tr>
          <tr valign="baseline">
            <td nowrap="nowrap" align="right"><strong>Shift:</strong></td>
            <td><select name="shift">
              <option value="A">A</option>
              <option value="B">B</option>
              <option value="C">C</option>
              <option selected="selected">-</option>
                                                                                                                          </select>            </td>
          </tr>
          <tr valign="baseline">
            <td nowrap="nowrap" align="right"><strong>P.No:</strong></td>
            <td><select name="p_no">
                <?php 
do {  
?>
                <option value="<?php echo $row_Recordset1['p_no']?>" <?php if (!(strcmp($row_Recordset1['p_no'], $row_Recordset1['p_no']))) {echo "SELECTED";} ?>><?php echo $row_Recordset1['p_no']?></option>
                <?php
} while ($row_Recordset1 = mysql_fetch_assoc($Recordset1));
?>
              </select>            </td>
          </tr>

          <tr valign="baseline">
            <td nowrap="nowrap" align="right">&nbsp;</td>
            <td><input name="submit" type="submit" value="Insert record" /></td>
          </tr>
        </table>

<input type="hidden" name="aid" value="" />
        <input type="hidden" name="MM_insert" value="form1" />
      </form></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:56:36.767

我认为您想编写一个考勤系统来标记员工的失踪/病假天数。

我并不是说您不应该在出勤表中插入 1200 个值（在我看来，您希望在 4 年的时间跨度内每天都有一个条目）

但做类似的事情会是一个更好的主意：

a）如果“离开时间”（与出勤时间相反）中没有条目，则假装员工正在工作和工作，并以某种形式的 callendar 仅显示缺勤/病假天数（php 可以轻松生成类似的内容）

b）假装员工是邪恶的和生病的，只要他没有踩到并自己生成一个考勤条目

对于您的初始问题，如果您坚持使用 1200 个条目......只需使用 for 循环即可：

```
// mysql-query getting all employees (use PDO, i am old fashioned and still use mysql_ functions)
while( mysql_fetch_array($sql-query-getting-employees) )
{
$insert = "INSERT INTO ATTENDANCE (col1, col2...) VALUES ";
for( $i = 0; $i <= 2000; $++ )
{
if($i != 0) { $insert += ", "; } //append comma for more than 1 value
$insert += "( val1, val2 )";
}
} 
```

然后通过 mysql_query($insert) 插入值

# ruby-on-rails - has_secure_password (bcrypt) 使 Rails 中的所有测试变慢？

> ID：12086123
> 
> 赞同：1
> 
> 时间：2012-08-23T06:43:56.127
> 
> 标签：ruby-on-rails, bcrypt

我正在关注 Michael Hartl 的[教程](http://ruby.railstutorial.org/chapters/sign-up)。它说要降低测试中的 bcrypt 成本，我应该添加`config/environments/test.rb`以下内容

```
require 'bcrypt'
silence_warnings do
  BCrypt::Engine::DEFAULT_COST = BCrypt::Engine::MIN_COST
end 
```

我这样做了，它加快了所有测试（通过观察绿点出现来衡量），即使它们似乎与测试用户数据库模型无关。任何人都可以验证这一点和/或解释我为什么会看到这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T05:53:06.267

Bcrypt 很慢。性能将因计算费用参数而增加。

因此，降低参数将大大加快 bcrypt 计算。

使用 bcrypt 的原因是它很慢。因此，暴力破解加密密码需要更长的时间。

# php - 允许网站的 PHP 安全下载

> ID：12086128
> 
> 赞同：1
> 
> 时间：2012-08-23T06:44:11.287
> 
> 标签：php, security, download, zip, fileshare

我已经将一些 zip 文件上传到我的服务器，现在希望允许用户在他/她有适当密码的情况下下载它们。我正在用 PHP 进行编码，并且我已经做到了，因此除非输入了正确的密码，否则用户无法访问带有 zip 文件链接的页面，但是通过链接到我的 zip 文件，用户可以看到并且将来case 输入 zip 文件的绝对位置并绕过我的密码检查。如果我更改 zip 文件的文件权限，则无法将其作为链接，因为用户将无法访问它。我怎样才能允许用户获取 zip 文件，同时仍然保持它的安全？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:48:28.783

最好的方法是`mask url`.

*   用户登录
*   根据他的登录详细信息生成令牌。一些`md5`或任何你决定
*   创建一个下载链接（例如：）`download.php`，该链接基于有效的令牌和会话加载文件，并使用`file_get_contents()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:49:22.060

使用 .htaccess 拒绝直接访问文件。将此 .htaccess 文件放在相关文件夹中。

然后从 php 验证用户，并在成功验证后，将用户重定向到以文件名作为参数（甚至是 id）的 download.php，然后用于`force download`让他们下载。这样，即使他们有 zip 文件的直接链接，他们也无法下载该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T13:47:36.363

您需要编写可以隐藏下载链接的代码/链接需要过期，新链接应该取代它和/或链接应该改变。

您可以使用 PHP 对其进行编码，也可以使用现有的代码来完成此操作。

[http://sixthlife.net/product/secure-download-links/](http://sixthlife.net/product/secure-download-links/)

# java - Sonar Web 客户端 - 更新值失败

> ID：12086129
> 
> 赞同：0
> 
> 时间：2012-08-23T06:44:12.223
> 
> 标签：java, rest, sonarqube

我正在尝试使用 Web 服务客户端从外部提供的值修改声纳中现有的手动指标。到目前为止，我能够从插件中读取现有的指标值，但对更新值有疑问。

此外，在更新指标时

```
sonar.update(new PropertyUpdateQuery("<metric_key>, "Metric Value")); 
```

什么都没有发生，但是[javadocs](http://docs.sonarsource.org/2.7/apidocs/index.html?overview-summary.html)提到了 UpdateQuery 类中的 PUT 操作。编辑：我也尝试使用这种方法更新方法：

```
 UpdateQuery<Metric> update = new UpdateQuery<Metric>() {
        @Override
        public Class<Metric> getModelClass() {
            return Metric.class;
        }
        @Override
        public String getUrl() {
            return "/drilldown/measures/70?metric=<Metric Key>";
        }
    };
    sonar.update(update); 
```

这是更新手动指标的正确方法吗？另外，模型类和 url 应该更具体吗？- 到目前为止还没有这方面的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:26:33.043

在处理 REST API 时，最好访问以下页面：[http ://docs.codehaus.org/display/SONAR/Web+Service+API](http://docs.codehaus.org/display/SONAR/Web+Service+API)

在那里，您可以找到[手动测量的可用操作](http://docs.codehaus.org/display/SONAR/Web+Service+API#WebServiceAPI-ManualMeasures)：获取、创建和删除。手动措施没有更新操作。

顺便说一句，Java Web 服务客户端中的等效项是 ManualMeasure*Query，而不是更新声纳属性的 PropertyUpdateQuery。

# javascript - 在插件中分配事件

> ID：12086130
> 
> 赞同：0
> 
> 时间：2012-08-23T06:44:13.937
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

我开发了一个用于分配上下文菜单的插件。html代码：

```
<ul id='list1'>
 <li class='item'>Items</li>
 <li class='item'>Items</li>
 <li class='item'>Items</li>
  ...
</ul> 
```

jQuery插件代码：

```
$(function(){
 $.fn.cnxtmenu=function(options){
   this.bind('contextmenu',function(){
    //To display menu
    });
  }
}); 
```

插件的使用：

```
$('#list1').cnxtmenu(options);
$('.item').cnxtmenu(options); 
```

我的问题是插件代码执行了很多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:20:42.457

我的第一个猜测是，当您将处理程序附加到几个元素以及它们的容器时，事件正在冒泡并且处理程序执行了两次。所以，在你的`bind`，试试这个：

```
// Remember to pass 'ev' to the handler
this.bind('contextmenu',function(ev){
    ev.stopPropagation();
    //To display menu
}); 
```

正如我告诉你的，这是我的第一个猜测。我需要触发`contextmenu`事件的代码才能给出更准确的答案。如果您的代码正在执行，那么您必须在某个地方`$(something).trigger('contextmenu')`

# ruby-on-rails-3 - wicked_pdf 数据流问题

> ID：12086131
> 
> 赞同：2
> 
> 时间：2012-08-23T06:44:17.307
> 
> 标签：ruby-on-rails-3, wkhtmltopdf, wicked-pdf

有没有人对我如何在页面之间中断时始终从下一页开始内容有任何建议。

示例 - 我有要导出为 pdf 的照片列表。虽然列出一些照片被分成两部分，但首先进入一页，其余进入另一页，所以我们如何开始分成两部分的照片应该始终从页面开始显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:01:44.970

```
.nobreak {
    page-break-inside: avoid;
} 
```

/* [http://code.google.com/p/wkhtmltopdf/issues/detail?id=9#c21](http://code.google.com/p/wkhtmltopdf/issues/detail?id=9#c21) */

非常感谢 Unixmonkey

# scala - 如何在 Play 中直接返回协议缓冲区！2.0 框架？

> ID：12086132
> 
> 赞同：6
> 
> 时间：2012-08-23T06:44:19.410
> 
> 标签：scala, playframework-2.0, protocol-buffers

Play 允许您直接在控制器中返回许多不同的类型，例如`JsValue`或`XML`与纯文本一起返回。我想扩展它以接受协议缓冲区，所以我可以写：

```
def page = Action {
    val protobuf = //...
    Ok(protobuf)
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T06:44:19.410

Java 中的协议缓冲区都继承自一个`com.google.protobuf.Message`类。

在应用程序控制器的范围内添加以下隐式转换：

```
implicit def contentTypeOf_Protobuf: ContentTypeOf[Message] = {
  ContentTypeOf[Message](Some("application/x-protobuf"))
}
implicit def writeableOf_Protobuf: Writeable[Message] = {
  Writeable[Message](message => message.toByteArray())
} 
```

这些将允许 Play 在由状态给出的响应中直接序列化缓冲区，例如`Ok(protobuf)`

### 更新：

我已经发布了一个相反情况的工作示例，其中可以解析传入的请求并且可以自动提取 protobuf。

*   [https://gist.github.com/3455432](https://gist.github.com/3455432)

在此示例中，解析器采用动作的形式，但您也可以编写正文解析器：

```
object Put extends Controller {
  def index = DecodeProtobuf(classOf[MyProtobuf]) { stack :MyProtobuf =>
    Action {
      // do something with stack
    }
  }
} 
```

发送请求的客户端应该将缓冲区序列化为字节数组，并直接在请求正文中传递。

# performance - 如何提高这个 MongoDB 查询的速度？

> ID：12086140
> 
> 赞同：0
> 
> 时间：2012-08-23T06:44:53.220
> 
> 标签：performance, mongodb, mapreduce

MongoDB 2.0.7 和 PHP 5

我正在尝试计算每个数组的长度。每个文档都有一个数组。我想获取每个数组中的元素数和文档的 ID。除了来自 Id 之外，没有索引。

这是我的代码：

```
$map = new MongoCode("function() {
    emit(this._id,{
    '_id':this._id,'cd':this.cd,'msgCount':this.cs[0].msgs.length}
    );
}");

$reduce = new MongoCode("function(k, vals) {
    return vals[0];
}");

$cmmd = smongo::$db->command(array(
    "mapreduce" => "sessions",
    "map" => $map,
    "reduce" => $reduce,
    "out" => "result")); 
```

这些是时间。如您所见，查询非常慢

```
Array
(
[result] => result
[timeMillis] => 29452
[counts] => Array
(
[input] => 106026
[emit] => 106026
[reduce] => 0
[output] => 106026
)
[ok] => 1
) 
```

我怎样才能减少时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:06:19.167

如果您经常需要数组的计数，更好的方法是`count`在实际文档中包含一个字段。否则，您将扫描所有文档以进行计数（根据您的 Map/Reduce 示例）。

您可以使用[原子操作](http://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-Modifieroperations)，例如[`$inc`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24inc)在更新数组的同时增加/减少此计数。

# node.js - NodeJS：如何获得正确的加密结果？

> ID：12086144
> 
> 赞同：1
> 
> 时间：2012-08-23T06:45:17.607
> 
> 标签：node.js

我正在使用 NodeJS 编写 DES 加密代码。

根据DES算法，结果应该是这样的，

```
* http://www.unsw.adfa.edu.au/~lpb/src/DEScalc/DEScalc.html

An example DES test value, taken from
"H. Katzan, The Standard Data Encryption Algorithm, pp75-94, Petrocelli Books Inc., New York, 1977" is:

Key:        5B5A57676A56676E (HEX)
Plaintext:  675A69675E5A6B5A (HEX)
Ciphertext: 974AFFBF86022D1F (HEX) 
```

但是，我的代码打印的值有些不同。

```
var assert = require("assert");
var crypto = require("crypto");

var plaintext = new Buffer( '675A69675E5A6B5A', 'hex' ).toString( 'binary' );
var key = new Buffer( '5B5A57676A56676E', 'hex' ).toString( 'binary' );

var cipher = crypto.createCipher( 'des-ecb', key );
var c = cipher.update( plaintext, 'binary', 'hex' );
c += cipher.final( 'hex' );

console.log( c ); 
```

我应该在上面的代码中修复什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:15:05.163

5B5A57676A56676E 是密钥，而不是密码。

```
var crypto = require("crypto");
var plaintext = new Buffer( '675A69675E5A6B5A', 'hex' ).toString( 'binary' );
console.log("plian:"+plaintext);
var key = new Buffer( '5B5A57676A56676E', 'hex' );
var iv = new Buffer(8);
iv.fill(0);
var cipher = crypto.createCipheriv("des", key, iv);
cipher.setAutoPadding(false);
var c = cipher.update( plaintext, 'binary', 'hex' );
c+=cipher.final('hex' );
console.log(c); 
```

# objective-c - 将目标 C 中的全局对象传递给函数时实例化它们。关于对象范围的混淆

> ID：12086148
> 
> 赞同：0
> 
> 时间：2012-08-23T06:45:33.920
> 
> 标签：objective-c, c, variables, cocos2d-iphone, instantiation

一般来说，我是 Objective-C 和 C 的新手。我一直在环顾四周，找不到解决此问题的方法。任何帮助，将不胜感激。

我有以下全局变量

`CCSprite* BackgroundImage; CCSprite* BackgroundGhost; CCSprite* Globe; CCSprite* Logo;`

在我的初始化中，我调用一个函数并将全局变量作为参数传递。

```
if(_ourDevice == iPad)
   {

       [self CustomCodeSetAssetForIpad:BackgroundImage ghost:BackgroundGhost TheGlobe:Globe AndTheLogo:Logo];

   } 
```

这是 CustomCodeSetAssetForIpad 的代码：

```
-(void) CustomCodeSetAssetForIpad:(CCSprite*) _Background ghost:(CCSprite*) _BackgroundGhosts TheGlobe:(CCSprite*)_Globes AndTheLogo:(CCSprite*) _Logos
{
    _Background = [CCSprite spriteWithFile:@"1028-768-sunray.png"];
    _BackgroundGhosts = [CCSprite spriteWithFile:@"1028-768-sunray.png"];
    _Globes = [CCSprite spriteWithFile:@"BigGlobe.png"];
    _Logos  = [CCSprite spriteWithFile:@"DefaultLogo.png"];

    [_BackgroundGhosts setAnchorPoint:CGPointMake(0.5, 0)];
    [_BackgroundGhosts setScale:2];
    [_BackgroundGhosts setOpacity:120];
    //[BackgroundGhost setPosition: CGPointMake(BackgroundGhost.position.x, BackgroundGhost.position.y-500)];

    [_BackgroundGhosts setPosition:CGPointMake([[CCDirector sharedDirector]winSize].width/2, -100)];

    [_Globes setAnchorPoint:CGPointMake(0.5, 0.5)];
    [_Globes setScale:0.7];
    [_Globes setPosition:CGPointMake([[CCDirector sharedDirector]winSize].width/2, -260)];

    [_Logos setPosition:CGPointMake([self CenterOfTheScreen].x, [[CCDirector sharedDirector]winSize].height-[[CCDirector sharedDirector]winSize].height*0.2)]; 
    [_Logos setScale:0.05];

} 
```

前几行实例化了传递的全局变量。但是，当函数完成后，对这些对象的引用就会丢失。我认为当您将指针传递给函数时，当对象被实例化时，它将保留其对实例化对象的引用。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:50:23.370

啊...类型变量`**classname** *`实际上是对该类实例的引用。因此，在您的情况下，是作为函数参数`_Background`传入的实例引用*。*如果你试图从一个函数返回多个结果（通过指针），你的参数应该真的是 type `**classname** **`，它是一个指向引用的指针。

所以调用代码看起来像这样：

```
CCSprite * background = nil ;
CCSprite * ghosts = nil ;
CCSprite * globes = nil ;
CCSprite * logos = nil ; 
```

`[ self customCodeSetAssetForIpad:**&**background ghosts:**&**ghosts globes:**&**globes logos:**&**logos ] ;`

您的方法如下所示：

```
-(void)customCodeSetAssetForIPad:(CCSprite**)background ghosts:(CCSprite**)backgroundhosts globe:globes logos:(CCSprite**)logos
{
    *background = [CCSprite spriteWithFile:@"1028-768-sunray.png"];
    // ... the rest of your code ...
} 
```

另外，我冒昧地使您的方法名称和变量名称更像objective-c（方法和变量以小写字母开头）

**编辑：我个人会这样构造它：**

```
//
// World... global things go in here
//

@interface World

@property ( nonatomic, readonly, strong ) CCSprite * background ;

+(id)theWorld // accessor to get the global world object

@end

@implementation World
@synthesize CCSprite * background = _background ;

static World * __theWorld = nil ; // global variable to hold our shared global World instance

+(void)load
{
    // when this class is loaded, create our global world object
    __theWorld = [ [ [ self class ] alloc ] init ] ;
}

+(id)theWorld
{
    return __theWorld ;
}

// return the background sprite, creating it if it hasn't be created yet
-(CCSprite*)background
{
    if ( !_background) { _background = [ CCSprite spriteWithFile:[CCSprite spriteWithFile:@"1028-768-sunray.png"] ; }
    return _background ;
}

@end 
```

# java - 在黑莓中将长字符串转换为字符串数组？

> ID：12086150
> 
> 赞同：0
> 
> 时间：2012-08-23T06:45:35.587
> 
> 标签：java, string, blackberry

我正在开发一个 BB 应用程序，在该应用程序中我从服务器获取了一个长字符串。现在我想将该字符串转换为字符串中存在的单词的字符串数组，以便我可以将完整的数组元素与我的硬编码字段一一进行比较，并可以将它们显示给用户。

请让我知道您的有用建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:47:01.333

`split()`不适用于 Java 1.3 (CLDC 1.1) 。

你已经看过了`net.rim.device.api.util.StringUtilities#stringToWords`吗？

# php - 从另一个页面检索信息

> ID：12086151
> 
> 赞同：0
> 
> 时间：2012-08-23T06:45:39.193
> 
> 标签：php

我正在考虑一种向页面发送请求，并从页面接收请求然后读取它的方法。问题是我不知道实现这一目标的最有效方法是什么。

```
 $result=file_get_contents('scan_results.php');

      $scanning=true;

      while($scanning){
             if(stristr($result,'Nothing to scan.')){
                    $scanning=false;
                }
      } 
```

现在，我只是简单地向页面发送一个请求，然后尝试从页面中抓取“Nothing to scan.”这句话。

页面scan_results.php，应该做一些任务，所以我循环它直到我得到'Nothing to scan'..所以基本上，我正在考虑使用更好的方法来检查我什么时候得到句子Nothing to scan..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:47:45.523

试试卷曲： http: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

# android - Android Ant 错误：解析为没有项目的 project.properties 文件的路径

> ID：12086154
> 
> 赞同：2
> 
> 时间：2012-08-23T06:45:47.397
> 
> 标签：android, ant

我在 Ant 脚本中执行此操作。我链接一个库项目，更新它们并构建它们。但我一直在标题中收到此错误。任何人都知道如何解决这个问题？

```
<target name="updateProject">

    <echo>updating Project...</echo>
    <exec dir="${scannerLibrary_home}" executable="ant">
        <arg line="project"/>
        <arg line="update"/>
        <arg line="--path"/>
        <arg line="."/>
    </exec>
    <exec dir="${projectroot}" executable="ant">
        <arg line="project"/>
        <arg line="update"/>
        <arg line="--path"/>
        <arg line="."/>
    </exec>

    <exec dir="${android_home}/tools" executable="./android">
        <arg line="update"/>
        <arg line="project"/>
        <arg line="--target"/>
        <arg line="4"/>
        <arg line="--path"/>
        <arg line="${scannerLibrary_home}"/>
    </exec>
    <exec dir="${android_home}/tools"  executable="./android"> 
        <arg line="update"/>
        <arg line="project"/>
        <arg line="--target"/>
        <arg line="4"/>
        <arg line="--path"/>
        <arg line="${targetdir}"/>
    </exec>

    <antcall target="buildScanner"/>
</target>

<target name="buildScanner">
    <exec dir="${scannerLibrary_home}"  executable="ant"> 
        <arg line="debug"/>
    </exec>
    <antcall target="buildProject"/>
</target>

<target name="buildProject">
    <exec dir="${targetdir}"  executable="ant"> 
        <arg line="debug"/>
    </exec>
    <antcall target="install"/>
</target> 
```

# installation - 在两台机器上安装安装程序

> ID：12086162
> 
> 赞同：1
> 
> 时间：2012-08-23T06:46:13.853
> 
> 标签：installation, windows-installer, nsis

我需要创建一个安装程序，它将在两台不同的机器上安装组件。“APP Server”上的 Windows 服务和 Web 服务以及“DB Server”上的数据库部分。SQL Server 2005/2008 将已存在于 DB SERVER 上。但它可能使用与 sql server 的默认端口不同的端口。

为了实现这一点，我需要什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:39:35.033

只需将 SQL 脚本与安装程序捆绑在一起，然后通过使用 ExecWait 调用 sqlcmd 来执行脚本。

我们可以通过以下方式使用受信任的连接运行脚本：

```
sqlcmd -S _SERVER\_INSTANCE_ -d _DBNAME_ -i _SCRIPT_FILE_ 
```

或者使用 SQL 登录：

```
sqlcmd -S _SERVER\_INSTANCE_ -d _DBNAME_ -U _USERNAME_ -P _PASSWORD_ -i _SCRIPT_FILE_ 
```

要在远程 SQL Server 引擎上执行操作，需要本机驱动程序。在 SQL Server 2005 或更高版本中，命令行客户端称为 sqlcmd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:17:32.283

我建议创建 2 个单选按钮：

(o) 安装 - 应用服务器

( ) 安装 - 数据库服务器

用户选择一项，将安装相应的组件。（如应用服务器上的 .dlls、.exes、... 和数据文件或数据库服务器上的 sql 脚本 [也可以执行脚本]）。一切都打包到一个安装程序中。

还应该有一些自定义页面（使用 nsDialogs 创建），用户可以在其中设置参数（端口、服务器名称、数据库名称、数据库路径...）

# episerver - episerver 4 - 在编辑器中添加表单标签

> ID：12086168
> 
> 赞同：0
> 
> 时间：2012-08-23T06:46:31.657
> 
> 标签：episerver

我目前正在使用旧版本的 EPiServer。在编辑器中，我需要像这样添加 html：

```
<FORM method=get name=name action=http://somesite.html target=_blank>
<TABLE border=0 cellPadding=5 width=400>
<TBODY>
<TR>
<TD><INPUT name=keywords maxLength=50 size=30><INPUT value=Search type=submit> </TD></TR></TBODY></TABLE></FORM> 
```

这不起作用，我认为这是因为页面上会有两个表单标签。有任何想法吗？

编辑：更具体：表单标签当然是嵌套的。

这有效

```
<p><input id="someId" type="text" /> 
<input onclick="window.open('http://somesite.html'+document.getElementById('someId').value)" type="button" value="Search" /></p> 
```

结案……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:34:42.677

在编辑器中添加编辑器工具栏不支持的内容是个坏主意。

但由于您能够保存 HTML，答案就在您的模板中。您的母版页很可能有一个包含大部分 BODY 的大型 ASP.NET 服务器 FORM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:43:16.850

所有基于 Web 表单的页面都必须有一个封闭的表单标签，即 runat="server"（如前面的答案所述）。

回到 EPiServer 4 天，我们曾经做过一个丑陋的 hack，在 ASP.NET runat="server" 表单之后添加第二个表单，然后用 CSS 重新定位它。第二种形式不能包含任何 runat="server" 的 asp.net 控件。

# android - 仅适用于平板电脑的 Android 设计应用程序

> ID：12086170
> 
> 赞同：0
> 
> 时间：2012-08-23T06:46:50.313
> 
> 标签：android

我正在尝试仅为平板电脑开发 android 应用程序，问题是我如何为不同的分辨率和不同的 SDK 设计布局。示例平板电脑从 3.0 开始正式支持，但有些平板电脑从 2.2 开始可用，请帮助我如何实现.

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:53:19.027

使用[Android 支持库](http://developer.android.com/tools/extras/support-library.html)

它是这样工作的：

*   将 android 支持库 jar 放在您的 libs 文件夹中
*   将jar添加到eclipse构建路径
*   在所有活动中扩展 FragmentActivity 而不是 Activity。
*   使用与密度无关的像素
*   遵循针对不同屏幕尺寸进行设计的提示：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)
*   遵循片段的开发者指南（主要用于平板电脑）：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

这也是一个很好的教程（其中包括对支持库的引用）： http: [//marakana.com/s/android_fragments_tutorial,1250/index.html](http://marakana.com/s/android_fragments_tutorial,1250/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:53:52.030

通过此链接：访问[http://www.netmagazine.com/tutorials/user-interface-design-android-apps](http://www.netmagazine.com/tutorials/user-interface-design-android-apps)

您将对设计模式有一个粗略的了解。我建议针对平板设备使用 layout-large ，在最新的 ADT 插件中，您可以使用 drawable-xhdpi 来处理图像和所有内容。不要使用硬编码的小部件宽度或高度，因为这会在您从 7" 迁移到 8.9" 或 10.1" 时产生问题。

平板电脑版本最好使用 9 补丁图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:02:14.807

*   **开发工具包：**

使用 4.1 SDK 并指定 min SDK = 2.2。Eclipse 会告诉您在哪里使用了太新的方法或类，您必须在代码中处理它。例如：

```
if (android.os.Build.VERSION.SDK_INT >= VERSION_CODES.HONEYCOMB){
... 
} else {
...             
} 
```

*   **布局和屏幕尺寸：**

使用不同的布局文件夹（默认为“布局”）。您可以使用 layout-small、layout-normal、layout-large、layout-xlarge。

*   顺便提一句。**始终阅读 Android 指南**：

[支持多屏](http://developer.android.com/guide/practices/screens_support.html)

# jquery - jQuery Form Validate，移动错误信息

> ID：12086172
> 
> 赞同：1
> 
> 时间：2012-08-23T06:46:57.357
> 
> 标签：jquery

嗨，我正在使用一个简单的 jQuery 验证脚本，其中只需要`required`添加“”类。有没有办法在提交按钮上方而不是在每个字段旁边显示错误消息？

```
<script type="text/javascript">
  $(document).ready(function() {
  $("#theForm").validate();
  });
</script>
<form id="theForm">
<label for="email">Email</label>
<input class="required email" name="email" type="text" id="email" />

<label for="city">City</label>
<input name="city" type="text" id="city"  />
<input class="button" type="submit" value="SEND CONTACT FORM" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:55:50.540

您可以添加`errorplacement`如下功能：

```
jQuery.validator.setDefaults({
    errorPlacement: function(error, element) {
        error.appendTo('#errorcontainer-' + element.attr('id'));
    }
}); 
```

`id`并且可以将 div 放在提交按钮附近

```
 <div id="errorcontainer-city" class='errorDiv'></div> 
```

所以现在`error message`for`city`字段将显示在这个 div 中。因此，您可以在所需位置放置电子邮件和其他字段的 div。

# ruby-on-rails - Rails 3路由问题路由错误

> ID：12086174
> 
> 赞同：0
> 
> 时间：2012-08-23T06:47:19.370
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的**路线.rb**

```
resources :users do
    resources :requests , :only => [:new,:create,:destroy]
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
    attr_accessor :password
    attr_accessible :email, :firstname, :lastname, :state, :city, :password, :password_confirmation, :image
 # mount_uploader :image, ImageUploader
 has_many :requests 
```

**请求.rb**

```
class Request < ActiveRecord::Base
    attr_accessible :email, :status, :user_id
    belongs_to :user
end 
```

用户登录后，从 user.show 页面我传递了一个链接

```
<li><span>  <%= link_to "Send Request" , new_user_request_path(@user)  %> </li> 
```

我的路径显示正确，但在 request.new 下未显示，并且出现以下错误。

路由错误

```
No route matches {:controller=>"users", :action=>"edit"} 
```

我是rails新手，有谁能帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:02:13.990

看起来您正在调用`edit`操作而不是`new`操作。这可以解释错误，因为您需要将请求`edit_user_request_path`与用户一起传递（因为请求是嵌套资源），如下所示：

```
edit_user_request_path(@user, @request) 
```

请再次检查您的代码以查看错误实际来自何处。

# c# - 如何从 gridview 播放视频？

> ID：12086175
> 
> 赞同：-2
> 
> 时间：2012-08-23T06:47:25.073
> 
> 标签：c#, asp.net, gridview

我使用 asp.net C# 编写代码以在使用 fileupload 控件选择视频文件时生成缩略图，并将其显示在 gridview 中。所以，我想做的是当点击gridview中的图像时，它应该播放与创建特定缩略图的视频相对应的视频而不涉及数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:30:42.753

一定有解决问题的Jquery插件。我知道那里有很多 jQuery 视频插件，只需搜索即可。为什么要涉及数据库？你不能在你的项目中包含视频文件并从你的图像中创建一个链接吗？我不知道这是否会解决您的问题，但值得一试：

[简单的 jQuery 视频插件](http://smple.com/videoGallery/)

如果您决定使用数据库，我建议您保持简单并使用免费且易于设置的 MySQL。

# magento - 如何在magento中将产品从子类别移动到其根类别

> ID：12086177
> 
> 赞同：2
> 
> 时间：2012-08-23T06:47:38.503
> 
> 标签：magento, magento-1.7

如何在不编辑每个产品的情况下将产品从子类别移动到其根类别？目前根类别不包含任何产品，子类别包含 58 个产品。我需要删除子类别并将其产品移动到根类别。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:31:02.117

如果您决心以编程方式执行此操作，SO 上的此线程可能会有所帮助；

[在 Magento 中复制和粘贴类别](https://stackoverflow.com/questions/3064494/copy-and-paste-category-in-magento)

我不得不说，对于 58 种产品，我只需要花费 10 分钟，然后亲自在管理界面中进行操作。为了完整起见，这是如何完成的；

您将进入目录-> 管理类别，然后单击您的根类别进行编辑。进入类别产品选项卡并点击“重置过滤器”按钮以显示所有产品。选择您想要的，然后保存类别并删除子类别。

# c# - 工具提示定位 C#

> ID：12086178
> 
> 赞同：1
> 
> 时间：2012-08-23T06:47:42.110
> 
> 标签：c#, .net, tooltip

我有一个带有鼠标悬停事件的图片框，可以根据服务的状态显示工具提示。这似乎有效，但它只是在鼠标所在的位置弹出，有时在鼠标下方，在图片中间，看起来不正确。我正在阅读[http://msdn.microsoft.com/en-us/library/windows/desktop/aa511495.aspx#infotipsgl](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511495.aspx#infotipsgl)，它建议将工具提示移到一边。这会很棒，但我不知道如何移动它。

toolTip1 上的 ToolTip 为空白，并且在我尝试使用的 mouseHover 事件上

```
toolTip.SetToolTip(this.pictureBox1, "Message text."); 
```

和

```
toolTip.Show("Message text.", pictureBox1); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:06:08.473

```
ToolTip tooltip = new ToolTip();
tooltip.Placement = PlacementMode.Right;
tooltip.PlacementRectangle = new Rect(50, 0, 0, 0);
tooltip.HorizontalOffset = 10;
tooltip.VerticalOffset = 20; 
```

有关更多详细信息，请参见[**此处**](http://msdn.microsoft.com/en-us/library/ms752368.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:56:22.627

对于 Windows 窗体，您可以使用[Show](http://msdn.microsoft.com/en-us/library/c85ff5s9%28v=vs.100%29.aspx)方法的此重载。它允许您设置相对于具有工具提示的控件的位置偏移。

在 wpf 中，Ravi Patel 已经向您指出了我们的文章：

```
<ToolTip HorizontalOffset="10" 
               VerticalOffset="20" .../> 
```

# asp.net-mvc-3 - 如何在 MVC3 中限制 FileUpload 中的文件类型？

> ID：12086183
> 
> 赞同：7
> 
> 时间：2012-08-23T06:47:49.190
> 
> 标签：asp.net-mvc-3, file-upload

我有一个文件上传功能，用户可以上传文件。我想限制用户上传某些文件类型。允许的类型是：**.doc,.xlsx,.txt,.jpeg**。

我怎么能做到这一点？

这是我的实际文件上传代码：

```
 public ActionResult UploadFile(string AttachmentName, BugModel model)
       {            
        BugModel bug = null;
        if (Session["CaptureData"] == null)
        {
            bug = model;
        }
        else
        {
            bug = (BugModel)Session["CaptureData"];
        }
        foreach (string inputTagName in Request.Files)
        {
            HttpPostedFileBase file1 = Request.Files[inputTagName];
            if (file1.ContentLength > 0)
            {
                string path = "/Content/UploadedFiles/" + Path.GetFileName(file1.FileName);
                string savedFileName = Path.Combine(Server.MapPath("~" + path));
                file1.SaveAs(savedFileName);
                BugAttachment attachment = new BugAttachment();
                attachment.FileName = "~" + path.ToString();
                attachment.AttachmentName = AttachmentName;
                attachment.AttachmentUrl = attachment.FileName;
                bug.ListFile.Add(attachment);
                model = bug;
                Session["CaptureData"] = model;
            }
        }
        ModelState.Clear();
        return View("LoadBug", bug);
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-23T06:50:35.733

首先要验证的是其中包含的文件扩展名是否`file1.FileName`与允许的扩展名匹配。然后，如果您真的想确保用户没有将某些其他文件类型重命名为允许的扩展名，您将需要查看文件的内容以识别它是否是允许的类型之一。

这是一个如何检查文件扩展名是否属于预定义扩展名列表的示例：

```
var allowedExtensions = new[] { ".doc", ".xlsx", ".txt", ".jpeg" };
var extension = Path.GetExtension(file1.FileName);
if (!allowedExtensions.Contains(extension))
{
    // Not allowed
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-30T11:48:59.510

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class AllowedFileExtensionAttribute : ValidationAttribute
{
    public string[] AllowedFileExtensions { get; private set; }
    public AllowedFileExtensionAttribute(params string[] allowedFileExtensions)
    {
        AllowedFileExtensions = allowedFileExtensions;
    }
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var file = value as HttpPostedFileBase;
        if (file != null)
        {
            if (!AllowedFileExtensions.Any(item => file.FileName.EndsWith(item, StringComparison.OrdinalIgnoreCase)))
            {
                return new ValidationResult(string.Format("{1} için izin verilen dosya uzantıları : {0} : {2}", string.Join(", ", AllowedFileExtensions), validationContext.DisplayName, this.ErrorMessage));
            }
        }
        return null;
    }
} 
```

模型中的用法

```
 [AllowedFileExtension(".jpg", ".png", ".gif", ".jpeg")]
    public HttpPostedFileBase KategoriResmi { get; set; } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-23T06:53:11.387

您可以使用 的`ContentType`属性对`HttpPostedFileBase`文件类型（mime 类型）进行基本检查：[请参阅 MSDN 的 Content-Type 属性页面here](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilebase.contenttype.aspx)

这是一种方法：

```
private static bool IsValidContentType(string contentType)
{
    string ct = contentType.ToLower();

    return ((ct == "application/msword") || (ct == "application/pdf") || (ct == "application/vnd.openxmlformats-officedocument.wordprocessingml.document"));
} 
```

ETC..

但是，要进行更深入的检查，您必须检查文件内容。更改文件扩展名很容易..

# objective-c - iOS如何识别按下了哪个图像（按钮）？

> ID：12086185
> 
> 赞同：0
> 
> 时间：2012-08-23T06:47:54.610
> 
> 标签：objective-c, ios, uibutton, uiimage

我有三个随机生成的图像（实际上是 UIButton），当应用程序运行时，它要求用户在三个图像中选择一个随机图像（比如 a.png）。用户选择图像后，应用程序将根据选择的正确图像做一些事情或不。

现在的问题是我如何识别该用户选择正确的图像？我正在尝试获取用户选择的图像名称然后检查它，但真的不知道该怎么做。我已经在谷歌上搜索过这个，但找不到有用的东西。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:14:05.550

当您真的想将图像的名称存储到按钮中时，而不是使用`tag`属性，您可以将其设置为标题并隐藏 titleLabel （[苹果参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)说：虽然这个属性是只读的，但它自己的属性被读取/write。使用这些属性来配置按钮标签的外观。）：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

[button setImage:[UIImage imageNamed:@"a.png"] forState:UIControlStateNormal]; 

button.titleLabel.hidden = true;
[button setTitle:@"a.png" forState:UIControlStateNormal]; 
```

然后您可以使用`button.currentTitle`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T06:50:55.653

在生成 UIButtons 时，您可以填充`tag`属性。然后您可以检查您`sender.tag`的值是否等于您填写的值。

当您只想检查是否选择了正确的图像时，您可以只将这一个设置为`1`，将其他按钮设置为`0`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T06:59:50.910

要知道单击了哪个按钮，您需要添加标签，例如从 0、1、2

```
[yourButton setTag:0]; //set tag 1 and 2 also to other button 
```

现在为所有按钮添加相同的选择器或方法：

```
[yourButton setTarget:@selector(buttonClicked:) forState:UIControlTouchUPInside];
// setTarget to other buttons too 
```

方法是这样的：

```
-(void)buttonClicked:(id)sender
{

  if([sender tag] == 0)
  {
     //button 1 clicked
  }
  else if([sender tag] == 1)
  {
     //button 2 clicked
  }
  else if([sender tag] == 2)
  {
    //button 3 clicked
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T06:54:03.910

好吧，如果您`UIButton`为此目的使用 s，则可以`Target Selector` 在每个按钮上进行设置并确定`UIButton`使用它们的标签值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T11:47:42.617

还有另一种方法可以提供帮助。但只有你们中的一个人使用'backgroundImage'。这个动作应该与你的按钮相关联：

```
-(IBAction)photoIconClicked:(id)sender{
    if ([sender isKindOfClass:[UIButton class]]){
        UIButton *button = (UIButton*)sender;
        _currentImage = button.currentBackgroundImage;
    }
} 
```

# cassandra - 读取具有不同值类型的列

> ID：12086186
> 
> 赞同：1
> 
> 时间：2012-08-23T06:48:00.377
> 
> 标签：cassandra, hector

SliceQuery< Long, String, String > 表示 keytype 是 long，列名是 string，列值是 string。当我使用 QueryResult < ColumnSlice< String, String >> 执行切片查询时，我可以获得所有列，但是键很长，因此必须有一个值为 long 类型的列。在这里看到类型安全如何工作对我来说有点令人困惑（因为查询结果将获得一个列类型）。此外，如果有一列的值类型不是字符串，那么一定会出现问题。

如何拥有可用于查询不同值类型列的通用切片查询？

PS：我是 cassandra/hector 的新手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:11:53.507

几乎。第一种类型是您指出的行键的类型，但行键不存储为列。行键存储在其他一些特殊的地方。这是来自关系数据库世界（如我）的人们绊倒的那些陷阱之一。

至于如何管理不同类型的列值，有两种方法。首先，将值存储为字节数组并自行序列化。其次，您关闭列名以告诉您正在处理的列 - 以及因此的值类型。一旦您知道正确的类型，您就可以使用适当的序列化器将字节值反序列化为正确类型的变量。对于您自己的复杂对象和特殊类型，您可以编写自己的序列化程序。

# php - 在 PHP 中嵌入 C 以提高速度

> ID：12086191
> 
> 赞同：2
> 
> 时间：2012-08-23T06:48:34.417
> 
> 标签：php, php-extension

我正在考虑用 C 编写一个 PHP 扩展，只是为了提高速度。`strpos()`等等`preg_match()`对我的项目来说太慢了。

但它让我印象深刻，`strpos()`而且`preg_match()`一定是“最初”用 C 或其他一些原始语言编写的。

所以，我的问题是：我用 C 语言编写一些扩展是否有意义，只是为了提高计算速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:54:10.297

你有兴趣用 PHP 编写一些扩展真的很酷。

请通过以下链接了解有关 Facebook 如何启动 HipHop 项目以提高速度的更多信息。他们通过用 C 等本地语言而不是 PHP 编写一些代码来实现这一点。

[http://developers.facebook.com/blog/post/2010/02/02/hiphop-for-php--move-fast/](http://developers.facebook.com/blog/post/2010/02/02/hiphop-for-php--move-fast/)

但与其重写一些已经用 PHP 编写的 ext，不如尝试编写新的，你会发现很多关于用 PHP 编写新扩展的文章。

现有的扩展已经优化，所以如果你想做一些特定的工作，并且有一个好的算法来支持它，那就去写你自己的扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T07:25:27.307

It *might* be useful if you can identify a "self-contained" bottleneck. PHP is still a scripting language. There are a lot of lookup operations, some memory operations which can be optimized away in C, maybe a handle/value/memory block from one of the underlying libraries that you could store/use more efficiently in your specific case, and so on and on.

But, make sure that the code block you're touching is worth the effort. I.e. first identify the bottleneck. Run a php profiler (like e.g. xdebug) and then maybe even a C profiler to see where the time is spent in the php runtime. And keep in mind that if you write the extension it's your job to keep it up to date, running and functional (including bug tracking/fixing, quality assurance, ...).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:50:28.963

没有经过验证，但我认为，当您只执行自己的正则表达式或字符串扫描的低级实现时，您无法获得明显更好的速度...... php*是*用 c 编写的并且已经高度优化......

检查您的代码并改进流程...

如果不可能，请查看 facebook 上的“HipHop”...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T06:52:19.223

`strpos()`用 C 语言编写or的另一个实现没有意义，`preg_match()`因为 PHP 已经在`C`.

而是使您的 PHP 代码优化以便它可以使用这些功能而不是 **滥用**它们是有意义的

但是如果你真的想通过提供另一个实现来加快速度，当且仅当它足够快时它可能会有所帮助。否则只是浪费时间和劳力。

您可以查看 PHP 源代码并检查这些功能的当前实现，看看您是否真的可以改进。

# windows - perl Socket6 仅绑定到一个通配符地址

> ID：12086192
> 
> 赞同：0
> 
> 时间：2012-08-23T06:48:36.430
> 
> 标签：windows, perl, sockets, ipv6

我在 perl 中有以下程序，它应该监听 IPv6 地址，理论上应该同时服务于双堆栈盒上的 IPv4（通过 IPv4 映射的 IPv6 地址）和 IPv6 客户端。

```
use Socket;
use Socket6;

@res = getaddrinfo('', 8086, AF_UNSPEC, SOCK_STREAM,0, AI_PASSIVE);
my @ipv6Result;

while(scalar(@res)>=5){
    my @currentResult = @res;
    ($family, $socktype, $proto, $saddr, $canonname, @res) = @res;
    if($family == AF_INET6){
        @ipv6Result = @currentResult;
    }
} 

if(@ipv6Result){
    ($family, $socktype, $proto, $saddr, $canonname) = @ipv6Result;
}

socket(Socket_Handle, $family, $socktype,$proto) || next;
bind(Socket_Handle,$saddr  )    || die "bind: $!";
listen(Socket_Handle, 1)                       || die "listen: $!";
$paddr = accept(Client,Socket_Handle) || die "accept: $!"; 
```

运行此之后，netstat 给出了以下观察结果：

```
c:\Perl\bin>netstat -nao | findstr 8086
TCP    [::]:8086              [::]:0                 LISTENING       2892 
```

看来，它只监听 IPv6 通配符地址 (::) 而不是 IPv4 通配符地址 (0.0.0.0)。我无法从 IPv4 客户端连接此服务器进程，但能够通过 IPv6 客户端进行连接。

我在java中尝试了一个类似的服务器程序，如下（在相同的设置上）：

```
import java.net.ServerSocket;
public class CodeTCPServer {
    public static void main(String[] args) throws Exception{
        new ServerSocket(8086).accept();
    }
} 
```

对此的 netstat 输出如下：

```
C:\Users\Administrator>netstat -nao | findstr 8086
TCP    0.0.0.0:8086           0.0.0.0:0              LISTENING       3820
TCP    [::]:8086              [::]:0                 LISTENING       3820 
```

似乎在 IPv6 和 IPv4 上都可以收听，我也可以从 IPv4 和 IPv6 客户端连接它。

如果我在 linux 机器上运行相同的 perl 程序，它工作正常，我可以通过 IPv4 和 IPv6 客户端连接到它。

我想知道，如果 Windows 上的某些东西阻止了 perl 程序同时监听 IPv4 和 IPv6（但出于同样的原因，它也应该停止了 java 程序）。如果程序逻辑有问题，它也不应该在 linux 上工作。

（我现在使用的是 Socket6，因为我无法在 Windows 上以某种方式使用 perl 对 IPv6 的内置支持，我正在与作者沟通以使其在我的设置中工作）

更新：

我刚试过以下：

```
setsockopt (Socket_Handle, IPPROTO_IPV6, IPV6_V6ONLY, 0 ) or print("\nFailed to set IPV6_V6ONLY $! "); 
```

预计套接字选项的默认值是 1（对于这个平台），我必须手动覆盖它，但是唉！我收到以下错误：

您的供应商尚未定义套接字宏 IPV6_V6ONLY，用于 c:\socket6\Socket6Server.pl 第 66 行

现在我想知道“供应商”是什么意思，是 Socket6 模块/perl 供应商还是操作系统供应商？

更新2

我认为答案在[http://metacpan.org/pod/IO::Socket::IP](http://metacpan.org/pod/IO::Socket::IP)中给出（对于 V6Only 参数）

使用以下几行：如果您的平台不支持禁用此选项，但您仍想同时侦听 AF_INET 和 AF_INET6 连接，则必须创建两个侦听套接字，一个绑定到每个协议。

这对我有用！但是我需要检查平台是否支持 V6Only 禁用（我的程序中的协议感知代码:(），与 Java 相比，Java 会自动为我执行此操作（检查并创建 2 个套接字）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:38:52.107

这需要`BIND_V6ONLY`关闭套接字选项。有关方法的详细信息，请参阅`IO::Socket::IP`源代码。

* * *

另外，为了回应您的评论

> 我现在使用的是 Socket6，因为我无法在 Windows 上以某种方式使用 perl 对 IPv6 的内置支持，我正在与作者沟通以使其在我的设置中工作）

如果没有记错的话，这并不完全正确。您遇到了麻烦，`IO::Socket::IP`但简单的`Socket`东西应该都可以正常工作。您不需要使用`Socket6`，因为`Socket`2.006 已经具备所有功能。您可以将代码替换为：

```
use Socket qw( :addrinfo SOCK_STREAM AF_INET6 );

my ($err, @res) = getaddrinfo('', 8086,
   { socktype => SOCK_STREAM, flags => AI_PASSIVE });
my $ipv6Result;

my $current;
while(@res){
    $current = shift @res;
    if($current->{family} == AF_INET6) {
        $ipv6Result = $current;
    }
}

if($ipv6Result) {
    $current = $ipv6Result;
}

socket(my $sock, $current->{family}, $current->{socktype}, $current->{proto}) or next;
bind(my $sock ,$current->{addr}) or die "bind: $!";
listen(my $sock, 1) or die "listen: $!";

my $paddr = accept(my $client, $sock) or die "accept: $!"; 
```

# ios - 应用程序在释放视图控制器对象时崩溃

> ID：12086195
> 
> 赞同：0
> 
> 时间：2012-08-23T06:48:50.540
> 
> 标签：ios, viewcontroller

我的应用程序在释放视图控制器对象时崩溃。这是我的代码。

```
TagCloudWebViewController *controller=[[[TagCloudWebViewController alloc]init]autorelease];
controller.htmlString=[[notification userInfo] valueForKey:@"url"];
[self.navigationController pushViewController:controller animated:YES]; 
```

这是我调用上述方法时的代码

```
-(void)viewDidLoad{
 [super viewDidLoad]; 
[[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(openTextInWebview:) name:@"kTouchTextUrl" object:Nil];
} 
```

和

```
#pragma mark - UIGestureDelegate
- (void)longPressRecognized:(UILongPressGestureRecognizer *)longPressRecognizer {
CGPoint touchPoint = [longPressRecognizer locationInView:self];
NSArray *subviews = self.subviews;
for (int i=0; i<subviews.count; i++) {
    TagView * tagLabel = (TagView *)[subviews objectAtIndex:i];

        if ( CGRectContainsPoint( [tagLabel frame], touchPoint ) ) {
            NSArray*objectArray=[[[NSArray alloc] initWithObjects:tagLabel.customLink, nil] autorelease];
            NSArray*keyArray=[[[NSArray alloc] initWithObjects:@"url",  nil] autorelease];
            NSDictionary *userInfo = [NSDictionary dictionaryWithObjects:objectArray forKeys:keyArray ];
            [[NSNotificationCenter defaultCenter] postNotificationName:@"kTouchTextUrl" object:nil userInfo:userInfo];
            //[[UIApplication sharedApplication] openURL:[NSURL URLWithString: tagLabel.customLink]];
            break;
        }
    }
} 
```

这是通知方法

DidLoad 方法

```
- (void) viewDidLoad {
[super viewDidLoad];

    _webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
    _webView.delegate = self;
    _webView.autoresizingMask = (UIViewAutoresizingFlexibleWidth
                                 | UIViewAutoresizingFlexibleHeight);
    _webView.scalesPageToFit = YES;
    [self.view addSubview:_webView];

    [self initSpinner];

    if (htmlString) {
        [self openURL:[NSURL URLWithString:htmlString]];
    }
} 
```

WebView 委托方法

```
-(void) webViewDidStartLoad:(UIWebView *)webView {
self.navigationItem.title = @"Loading...";
[spinnerView startAnimating];  
isLoading = YES; 
```

}

```
-(void) webViewDidFinishLoad:(UIWebView*)webView {
self.navigationItem.title = [_webView stringByEvaluatingJavaScriptFromString:@"document.title"];
[self performSelector:@selector(stopSpinner) withObject:nil afterDelay:0.1]; 
isLoading = NO;
}

-(void) webView:(UIWebView*)webView didFailLoadWithError:(NSError*)error {
[self webViewDidFinishLoad:webView];
[self performSelector:@selector(stopSpinner) withObject:nil afterDelay:0.1]; 
isLoading = NO;
} 
```

*   (void) openURL:(NSURL*)URL { NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:URL]; [_webView loadRequest:request]; }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:30:02.867

**更新：**以下答案是对为什么`UIViewController`with a`UIWebView`没有出现的原始问题的回应。OP 最初的理论是它与视图控制器对象的过早释放有关的一些问题有关。但是，正如我在下面的回答中所述，我怀疑问题与视图控制器本身的创建有关。无论如何，我对原始问题的回答如下（但不幸的是，它与修改后的问题无关）：

> 我个人不怀疑这个问题与控制器的释放有关。我认为这是在创建控制器的视图。上述代码中没有任何内容会导致对象被释放，因此您的问题在于其他地方，您需要显示更多代码。如果您担心通知中心的内容，请尝试绕过它，只需添加一个按钮来执行您的 `TagCloudWebViewController`分配/初始化、设置`htmlString`和推送，看看是否仍然会导致您的程序崩溃，我怀疑它会崩溃。
> 
> 我注意到您正在通过`alloc`and创建控制器`init`，但不是`initWithNibNamed`。根据[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：“如果您无法在情节提要或 nib 文件中定义视图，请覆盖该`loadView`方法以手动实例化视图层次结构并将其分配给视图属性。”
> 
> 因此，底线是使用 NIB、使用情节提要或定义 `loadView`. 定义 a`viewDidLoad`并不排除对 a 的需要 `loadView`。您需要为您的控制器创建一个视图，如果您使用 NIB 或情节提要，则为您完成，或者`loadView`如果您不使用 NIB 或情节提要，则必须通过手动完成。
> 
> 请参阅 [iPhone SDK：loadView 和 viewDidLoad 有什么区别？](https://stackoverflow.com/questions/573958/iphone-sdk-what-is-the-difference-between-loadview-and-viewdidload)`viewDidLoad`讨论和 之间的差异`loadView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:29:24.623

我没有看到任何导致崩溃的东西。我认为你已经改变了你的问题。根据你没有在任何地方使用 ViewController 的问题。请显示更多详细信息。

**更新：**请检查，您正在创建自动释放的对象，可能是您错误地释放了一些地方。尽量避免自动释放的对象保留在池中和以后的版本中，这可能会导致您的内存问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:15:19.173

上述问题是由于 WebView delgate 引起的。按下后退按钮后，对象的引用正在从内存中释放，因为此应用程序在释放视图控制器对象时崩溃。我做了一些类似的事情

```
-(void) viewDidDisappear:(BOOL)animated{
if([_webView isLoading]) {
    [_webView stopLoading];
}
[_webView setDelegate:nil]; 
```

}

由于上面的代码，我的崩溃已经解决

# java - 将 Web 应用程序部署到 Amazon 弹性 beantalk 时出错

> ID：12086198
> 
> 赞同：10
> 
> 时间：2012-08-23T06:49:06.170
> 
> 标签：java, eclipse, amazon-s3, amazon-web-services, amazon-elastic-beanstalk

我正在使用 Eclipse EE Juno 版本。我创建了一个动态 Web 应用程序，它使用 Amazon Simple DB 并检索一些值并向用户显示。我已经安装了用于使用亚马逊服务的 AWS 工具包。

我有一个 simpleDB 帐户。

我尝试将它部署到 AWS Elastic Beanstalk（通过插件）。它显示我选择服务器。我选择它作为 AW Beanstalk 和 TOmcat 6（亚太东京）。

一段时间后，它给出了这个错误。

无法将应用程序上传到 Amazon S3：用户：arn:aws:iam::379007759147:user/SSSS 无权执行：elasticbeanstalk:CreateStorageLocation 用户：arn:aws:iam::379007759147:user/SSSS 无权执行：弹性豆茎：创建存储位置

我希望将 Web 应用程序上传到 AWS beanstalk，并感谢您在实现它方面的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-01-13T23:35:53.117

它具有以下权限对我有用

1.  AWSElasticBeanstalkFullAccess - AWS 托管策略
2.  AWSElasticBeanstalkService - AWS 托管策略
3.  AWSCodeDeployRole - AWS 托管策略
4.  AWSCodeDeployFullAccess - AWS 托管策略

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-03T12:37:08.873

用户需要有3个权限：

*   IAM（读取）
*   S3（写）
*   豆茎（写）

并且，有 1 个用户的限制，最多可以附加 2 个策略。

所以，也许你需要创建 3 个组并将这个用户分配给这 3 个组。

它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:24:36.950

您的 IAM 配置文件（即您登录时使用的用户）尚未获得创建 S3 存储桶所需的权限。Beanstalk 创建一个新的存储桶，用于转储应用程序版本。与对您的 AWS 账户进行 root 管理的任何人交谈。他们应该能够修复您的 IAM 配置文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-02T20:32:26.493

就我而言，我试图从 AWS **Lightsail**实例运行 beanstalk，这显然是被禁止的。

角色 AmazonLightsailInstanceRole 预分配给**Lightsail**服务器默认用户（对于 aws linux 为“ec2-user”），不能修改为包含 Elastic Beanstalk 权限。

# blackberry - 如何在黑莓的Imagefield上方添加labelfield

> ID：12086203
> 
> 赞同：1
> 
> 时间：2012-08-23T06:49:21.937
> 
> 标签：blackberry

我有一个图像域。我想在该图像文件上显示标签字段。

如何在黑莓上显示这个。

我希望像这张图片。

如何添加填充为 50% 的白色背景的标签字段（用于透明效果）。

如果有任何示例代码片段。请给。

![在此处输入图像描述](../Images/7f95cbe0922aa5c6e808125adc33d665.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:58:51.703

有一个字段管理器，并通过方法子布局方法覆盖它的宽度和高度。并将图像设置为此布局的背景。

现在在上面添加一个标签字段。并通过设置 alpha 将其背景设置为一些半透明的颜色。

还没有申请自己，但它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:45:31.857

我不会提供任何片段。有两种可能的解决方案：

1.  使用`AbsoluteFieldManager`put并在顶部放置透明背景和字体颜色（OS 5+ `ImageField`）`LabelField`
2.  `ImageField`在通话中和通话后覆盖绘画`super.paint()`以透明背景绘制文本。

案例的附加关键字：

1.  `BackgroundFactory`,`Field.setBackground()`
2.  `Graphics`

# c# - 在 C# 中的空选项卡控件上显示文本

> ID：12086206
> 
> 赞同：0
> 
> 时间：2012-08-23T06:49:25.853
> 
> 标签：c#, label, tabcontrol

我在拆分容器中有 2 个选项卡控件，当没有打开选项卡时，我想显示一些文本（左侧为“1”，右侧为“2”）。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:58:43.413

选项卡控件是一个容器控件，因此您可以在选项卡控件上添加标签控件并显示所需的文本。当您在选项卡控件中加载第一个选项卡页时，可以隐藏标签或清空其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:09:17.987

```
private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (tabControl1.SelectedTab == null)
        lblMessage.Text = "1";
    else
        lblMessage.Text = "";
} 
```

看图片，我`tabControl2.SelectedTab = null;`在button22中设置了点击

![在此处输入图像描述](../Images/7a78e9858f44931a44f61079f8d7f6cc.png)

# android - 如何在 Windows 7 中添加 GUI 元素（如 Android 中的“this.add”）

> ID：12086209
> 
> 赞同：0
> 
> 时间：2012-08-23T06:49:35.017
> 
> 标签：android, windows-phone-7, interface

在android中，当我们想在我们使用的屏幕上添加一个GUI元素时

```
this.add 
```

如何在 Windows phone 7 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:42:42.310

我对 Android 不太了解，但是如果您想在屏幕上添加 UI 元素，请在 windows phone 应用程序中：

首先使用所有属性集创建所需的元素

```
Button button = new Button();
button.Content = "Click here";
button.Width = 100;
button.Height = 50; 
```

然后将其添加到 XAML 页面

```
Grid.SetRow(button, 2); //here 2 is the row number in which you want to place your element
this.ContentPanel.Children.Add(button); //this adds the button to the "ContentPanel" grid 
```

与 Grid 相比，添加到 StackPanel 要简单得多。

```
this.stackPanel.Children.Add(button); //where stackPanel is the name of the existing StackPanel 
```

通过以下链接将元素添加到[GRID](http://msdn.microsoft.com/en-us/library/ms752271.aspx)和[STACKPANEL](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.children.aspx)

# php - 这是在fuelphp中与额外字段创建多对多关系的正确方法吗

> ID：12086211
> 
> 赞同：1
> 
> 时间：2012-08-23T06:49:45.017
> 
> 标签：php, mysql, orm, fuelphp

似乎没有太多关于创建还包括额外字段的多对多关系的文档（因此它不仅仅是两个模型的 ID）。据我了解，中间需要另一个模型，其中将包含其他字段（因为关系本身不支持它）。

这是正确的方法吗？

```
class Model_Ab
{
  protected static $_belongs_to = array('a', 'b');

  //this has the additional fields
}

class Model_A
{
  protected static $_has_many = array('ab');
}

class Model_B
{
  protected static $_has_many = array('ab');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:04:30.443

FuelPHP 的 ORM 不支持多对多表中的任何附加列。当然，您可以采取一种解决方法：

```
modelA -> has_one <=> has_many model_through -> has_many <=> has_one modelB 
```

# database - 如何从网页更新 Google 电子表格

> ID：12086212
> 
> 赞同：0
> 
> 时间：2012-08-23T06:49:45.727
> 
> 标签：database, google-apps-script, google-sheets

我正在一个网站上工作，该网站使用像 SQL 数据库这样的 Google 电子表格（通过将 csv 文件发布到网络上，并将其作为多维数组读取）。现在，当用户更新他们在网站上的信息时，我遇到了更新电子表格中的字段的问题。有没有人对如何最好地做到这一点有任何建议？我可以使用访问某个网页时触发的 Google Apps 脚本来执行此操作吗？或者甚至直接使用 PHP/javascript/其他什么？

我只是在寻找如何解决这个问题的一般策略，任何信息都会非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:09:23.100

这应该非常简单明了...

您说您将来自电子表格的 CSV 文件中的数据读取到多维数组中......

好吧，只需跳过该步骤，直接从电子表格中创建数组`getDataRange.getValues()`，处理二维数组中的数据，每次您需要验证更改时使用`getRange(1,1,array.length,array[0].length).setValues(array)`，应该就是这样！

这就是我通常的工作方式，而且非常简单高效；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:18:15.827

我想如果你为他们创建了一个谷歌表单来更新他们的信息，并设置一个脚本来运行 onFormSubmit()，你可以加载“数据库”并从他们提交的信息中更新值。要加载数据库，您需要它的 ID，然后使用电子表格 = SpreadsheetApp.openByID("theID"); 打开它后，您需要让单元格进行编辑。诀窍是找到它们。如果您遍历行，直到找到一些与用户匹配的键值（在表单中输入的 id#？）然后您可以更改该行中每个单元格的值以匹配新值。

# php - 本地服务器上的 Apache 分段错误，但 vps 上没有

> ID：12086222
> 
> 赞同：1
> 
> 时间：2012-08-23T06:50:27.707
> 
> 标签：php, apache

我在笔记本电脑和 vps 上安装了 ubuntu 12.04，并且都安装了 php 5.4.4 + apache。相同的 php 代码在我的本地服务器上导致分段错误，但在我的 vps 上运行良好（检查日志.. 还没有分段错误错误）。我还尝试使用 php 的服务器运行该项目，但它也因分段错误而崩溃。
不仅如此，代码多次运行（例如 10 次中的 1 次），但大多数时候我都会遇到段错误。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:21:00.140

错误是由于这个原因引起的：[https](https://bugs.php.net/bug.php?id=62358) ://bugs.php.net/bug.php?id=62358 ..我删除了所有特征使用并为特征提供的所有功能设置了一个继承树（叹息..我虽然喜欢使用特征）并且一切正常。此错误已在较新版本的 php 中得到修复，但由于某种原因，该修复尚未合并到 5.4.4 中。而且由于我选择了使用 ppa 设置 php 的懒惰方式，所以我坚持使用 5.4.4，直到管理 ppa 的人更新它

# python - 为什么 os.path.join 不使用 os.path.sep 或 os.sep？

> ID：12086224
> 
> 赞同：4
> 
> 时间：2012-08-23T06:50:35.167
> 
> 标签：python, path

众所周知，windows 接受`"\"`和`"/"`作为分隔符。但是在python中，`"\"`是使用的。例如， call `os.path.join("foo","bar")`，`'foo\\bar'`将被返回。烦人的是有一个转义字符，所以你不能只复制路径字符串并粘贴到你的资源管理器位置栏。

我想知道有没有办法让 python`"/"`用作默认分隔符，我尝试将 os.path.sep 和 os.sep 的值更改为`"/"`，但`os.path.join`仍然使用`"\\"`.

什么是正确的方法？

**PS：**

我只是不明白为什么python在windows上使用“\”作为默认分隔符，也许旧版本的windows不支持“/”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-06T01:53:00.030

要尽可能简单地回答您的问题，只需使用 posixpath 而不是 os.path。

所以而不是：

```
from os.path import join
join('foo', 'bar')
# will give you either 'foo/bar' or 'foo\\bar' depending on your OS 
```

利用：

```
from posixpath import join
join('foo', 'bar')
# will always give you 'foo/bar' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T06:56:03.750

这完全是关于 Python 如何检测你的操作系统：

```
# in os.py
if 'posix' in _names:
    ...
    import posixpath as path   

elif 'nt' in _names:
    ...
    import ntpath as path 
```

因此，在 Windows 上，`ntpath`模块已加载。如果您检查`ntpath.py`and`posixpath.py`模块，您会发现`ntpath.join()`它有点复杂，这也是因为您提到的原因：Windows 理解`/`为路径分隔符。

底线：虽然您可以`posixpath.join()`在 Windows 中使用（只要参数是`POSIX`格式的），但我不建议这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T06:58:08.803

为什么不定义自定义显示功能？

例如

```
def display_path(path):
    return path.replace("\\", "/") 
```

如果你想替换`str.join`，`os.path.join`你可以这样做（`str.join`期望一个列表，`os.path.join`期望`*args`）：

```
join = lambda *args: "/".join(args) 
```

也许更好的是让 Python 规范化所有内容，然后替换，例如：

```
join = lambda *args: os.path.join(*args).replace("\\", "/") 
```

当文件路径中有空格时，上面的唯一问题可能是在 posix 上。

`if`然后，您可以在 utils 文件的顶部放置一条语句，如果不在 Windows 上，则分别将 and 定义为 no-op 和 os.path.join `display_path`。`join`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T07:17:23.147

我不建议这样做。

请注意，虽然 windows 也接受斜杠`/`作为路径分隔符，但它在某些上下文中具有不同的含义。

它被视为使用相对路径`cd`，例如：

**命令行：**

> c:\Users\YourUser> cd /FooBar
> c:\FooBar

在这里，`/`替换驱动器号。

* * *

另外，我根本看不出复制字符串有问题，因为如果你`print`是字符串，那么字符串会按照你的意愿显示：

**Python解释器：**

> >>> 导入操作系统
> >>> 打印 os.path.join("c:\", "foo","bar")
> c:\foo\bar
> >>>

* * *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T17:19:02.597

我没有足够的声誉发表评论，但[上述答案](https://stackoverflow.com/a/12086577/1757831)不正确。

Windows 有工作目录和工作驱动器的概念。`/`被视为**当前工作驱动器**上的**绝对路径**，因为 Windows 没有单根的概念。在上面的示例中，因为工作驱动器是 C:，而不是因为 C: 是“根”驱动器或某种特殊的驱动器。**`cd /FooBar``C:\foobar`**

 **这是一个例子：

```
C:\Users\user> cd /
C:\> d:
D:\> cd /Users
The system cannot find the path specified.
D:\> mkdir test
D:\> cd test
D:\test> cd c:/Users
D:\test> cd /
D:\> cd test
D:\test> c:
C:\Users\> d:
D:\test> 
```**

# c++ - 配置文件模板生成makefile

> ID：12086229
> 
> 赞同：2
> 
> 时间：2012-08-23T06:51:07.497
> 
> 标签：c++, linux, makefile

几乎所有 Linux 中的开源 c++ 项目都有一个“配置”文件，用于在构建源代码之前生成 Makefile。

我正在从头开始编写一个项目，这个“配置”文件有模板吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:15:33.380

大多数时候，配置文件不是手动创建的，而是由[autoconf](http://www.gnu.org/software/autoconf/)等工具生成的。然而，还有更现代的替代品，它们大多更容易使用。看看[cmake](http://www.cmake.org/)，[qmake](https://doc.qt.io/qt-5/qmake-manual.html) for Qt 或[scons](http://www.scons.org/)。

还可以查看以前的问题，例如[C++ build systems](https://stackoverflow.com/questions/2847730/c-build-systems)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T06:53:00.863

它是由一个名为[Autoconf](http://www.gnu.org/software/autoconf/)的程序生成的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T07:42:46.067

该`configure`文件是通过 autoconf 从`configure.ac`文件生成的。`configure.ac`这是我使用 C++的最小模板：

```
dnl Minimal autoconf version supported. 2.60 is quite a good bias.
AC_PREREQ([2.60])
dnl Set program name and version. It will be used in output,
dnl and then passed to program as #define PACKAGE_NAME and PACKAGE_VERSION.
AC_INIT([program-name], [program-version])
dnl Keep helpers in build-aux/ subdirectory to not leave too much junk.
AC_CONFIG_AUX_DIR([build-aux])
dnl Enable generation of Makefile.in by automake.
dnl Minimal automake version: 1.6 (another good bias IMO).
dnl foreign = disable GNU rules requiring files like NEWS, README etc.
dnl dist-bzip2 = generate .tar.bz2 archives by default (make dist).
dnl subdir-objects = keep .o files in subdirectories with source files.
AM_INIT_AUTOMAKE([1.6 foreign dist-bzip2 subdir-objects])

dnl Enable silent rules if supported (i.e. CC something.o instead of gcc call)
m4_ifdef([AM_SILENT_RULES], [AM_SILENT_RULES])

dnl Find a good C++ compiler.
AC_PROG_CXX

dnl Write #defines to config.h file.
dnl You need to generate config.h.in, for example using autoheader.
AC_CONFIG_HEADERS([config.h])
dnl Generate Makefile from Makefile.in.
AC_CONFIG_FILES([Makefile])
dnl This generates fore-mentioned files.
AC_OUTPUT 
```

这些`dnl`行是给您的注释（解释），您可以将它们从文件中删除。

它假设您也使用 automake 来生成`Makefile`。如果你不想这样，你需要`Makefile.in`手动准备一个（并删除`AM_INIT_AUTOMAKE`线）。

配置结果将写入`config.h`. 你通常包括它：

```
#ifdef HAVE_CONFIG_H
#    include "config.h"
#endif 
```

我的模板`Makefile.am`（由automake使用）：

```
# Programs which will be compiled and installed to /usr/bin (or similar).
bin_PROGRAMS = myprogram

# Source files for program 'myprogram'.
myprogram_SOURCES = src/f1.cxx src/f2.cxx
# Linked libraries for program 'myprogram'.
myprogram_LDADD = -llib1 -llib2 
```

创建这两个模板后，您通常会`autoreconf -vi`自己运行而不是随机运行工具。这将猜测您需要什么并运行它。

如果您需要更多内容，请随时告诉您，我很乐意解释。

# xml - 如何用 xsl 和 xml 做 I18N

> ID：12086231
> 
> 赞同：6
> 
> 时间：2012-08-23T06:51:18.783
> 
> 标签：xml, xslt, internationalization

我正在尝试使用 xml/xsl 制作不同语言的页面。我只想拥有一个 xml 和一个 xsl。在我的页面 Url 上，我有一个参数 pLanguage，我想我可以用它来查看我是否选择了英语或荷兰语。

我试过这段代码，但我不知道我是怎么把它放在一起的：

首先，我对所有需要翻译的单词进行变量处理，如下所示：

```
<xsl:variable name="lang.pageTitle" select="'This is the title in English'"/> 
```

要在模板中获取 pageTitle，我现在可以使用

```
<xsl:value-of select="$lang.pageTitle"/> 
```

我想通过使用 if-else 语句来测试我选择的语言是 EN 还是 NL 来替换上面的第一行代码，如下所示：

```
<xsl:choose>
      <xsl:when test="$choosenLanguage &#61; ‘NL’">
        <xsl:variable name="lang.pageTitle" select="Titel in het nederlands'"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:variable name="lang.pageTitle" select="'This is the title in English'"/>
      </xsl:otherwise>
    </xsl:choose> 
```

但我收到错误：java.lang.IllegalArgumentException: can't parse argument number $lang.opdracht

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:27:50.547

**这是一个完整的示例，如何以通用方式完成此操作**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" exclude-result-prefixes="my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pLang" select="'nl'"/>

 <my:texts>
  <pageTitle lang="en">This is the title in English</pageTitle>
  <pageTitle lang="nl">Titel in het nederlands</pageTitle>
 </my:texts>

 <xsl:variable name="vTexts" select="document('')/*/my:texts"/>

 <xsl:template match="/">
     <html>
      <title>
        <xsl:value-of select="$vTexts/pageTitle[@lang = $pLang]"/>
      </title>
     </html>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果（标题是根据全局/外部参数`$pLang`生成的）：**

```
<html>
   <title>Titel in het nederlands</title>
</html> 
```

**请注意**：

建议将所有字符串保存在与 XSLT 样式表文件分开的 XML 文档中。这允许在不更改 XSLT 代码的情况下修改/添加/删除字符串。

要从另一个 XML 文档访问字符串，代码几乎保持不变，唯一的区别是`document()`函数的参数现在是字符串 XML 文档的 URI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-22T22:39:08.157

如果您在自己的应用程序中执行转换，则可以使用另一种方法。一种需要一些编码但使您的样式表不那么混乱的方法。

样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE stylesheet SYSTEM "i18n/humanreadable.ent">
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"...>
    &text1; &text2; 
```

（您可以为 i18n 目录选择任何您喜欢的名称，请记住它起着特殊的作用。）

人类可读的.ent：

```
<!ENTITY text1 "Hello">
<!ENTITY text2 "world!"> 
```

到目前为止，这仍然是一个很好的旧且有效的 XSLT。但是，虽然它使样式表更具可读性，但它并没有为您提供非常需要的多语言支持。为此，您需要进行一些编码。

自定义用于解析样式表文件的文档构建器；**为其分配一个实体解析器**：

```
Source getStylesheetSource(String stylesheetFilename, EntityResolver entityResolver) throws ... {
    DocumentBuilder docBuilder = getDomFactory().newDocumentBuilder();
    docBuilder.setEntityResolver(entityResolver);
    Document stylesheet = docBuilder.parse(new FileInputStream(new File(stylesheetFilename)));
    return new DOMSource(stylesheet);
} 
```

当您的样式表被解析为文档时，每次遇到相对 URL/路径时都会调用此实体解析器。
发生这种情况时，检查路径是否以您的魔术前缀（您的特殊目录）开头，并将此前缀转换为指向所需语言的 humanreadable.ent 的路径。

```
final String targetLanguage = figureOutDesiredLanguage(...);
EntityResolver entityResolver = new EntityResolver() {
        @Override
        public InputSource resolveEntity(String publicId, String systemId) throws IOException {
            if (pointsToMySpecialFolder(systemId)) {
                String lang = targetLanguage;
                String i18n = insertLangIntoThePath(systemId, lang);
                return new InputSource(new FileInputStream(new File(i18n)));
            }
            return null;
        }
};

Source stylesheet = getStylesheetSource("stylesheet.xslt", entityResolver);
Result result = new SAXResult(...);
Transformer transformer = transformerFactory.newTransformer(stylesheet);
transformer.transform(new DOMSource(inputXml), result); 
```

The drawbacks are obvious: you need to do some coding outside of XML/XSLT, and your XSLT stylesheet is multi-lingual only when used within your super-special application.

The benefit is no extra tag soup in my (already rather dense) XSLT stylesheets.

# json - JSP 上的 JSON 格式化

> ID：12086233
> 
> 赞同：0
> 
> 时间：2012-08-23T06:51:29.847
> 
> 标签：json, jsp

我将 JSON 数据以字符串格式存储在数据库表中。要求是在 JSP 页面上显示这个可能是一些基本的可读格式（一个有两个列的表 - 名称，值）。

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:53:42.177

转换`jsonString`为`jsonObject`使用[json](http://www.json.org/)或[gson](http://code.google.com/p/google-gson/)解析器 API。一旦你有了*对象*，你就可以轻松地格式化*数据*并通过 EL、JSTL 在网页上显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:54:54.810

请参阅[http://flexjson.sourceforge.net/javadoc/flexjson/JSONDeserializer.html](http://flexjson.sourceforge.net/javadoc/flexjson/JSONDeserializer.html)

你这个 flexJson api 来反序列化你的 JSON 字符串并分配给相应的对象。

现在使用您的对象来显示您想要的任何内容！

# android - 是否可以在 Android 中以编程方式旋转 ScrollView

> ID：12086235
> 
> 赞同：3
> 
> 时间：2012-08-23T06:52:02.077
> 
> 标签：android, android-layout, orientation, scrollview, horizontalscrollview

我有一个活动，我有一个相机预览。

我希望`noSensor|landscape`为活动固定方向，以便相机预览在方向更改期间不会出现任何抖动。

现在我没有从 Android 获得方向反馈，这对预览有好处。

但我有一些 UI 必须响应所有 4 个方向。

布局 xml 文件是纵向的。

我聆听传感器方向的变化`onOrientationChanged`，通过 Id 获取视图并在控件周围移动以模拟 UI 的方向变化。

现在我面临的问题特别是在显示带有捕获图像缩略图的滚动视图时。

`scrollview`应始终在视图底部水平显示。

这个想法是活动将始终以纵向模式显示 UI（作为它使用的布局）。

我必须旋转 ui 控件来模拟方向变化。

我有一个`linearLayout`动态添加 ImageViews 的容器。

当我处于纵向模式时，我将容器的方向设置为水平并将线性容器添加到水平滚动视图中，以便它水平滚动。

当我必须模拟横向时，我将线性容器的方向更改为 vertical ，将其从水平视图中删除并将容器添加到 scrollView 以便它垂直滚动。

这种方法适用于纵向和横向，但在反向横向和反向纵向模式下，滚动视图应从下到上显示元素，水平滚动视图应从右到左显示，如下图所示。

我已经更改了正在执行这项工作的容器的对齐方式，但滚动视图滚动 lint 固定在底部。

我想在横向模式下向下滚动（第一个图像在顶部，最后一个图像在底部）并在横向反转期间向上滚动（第一个图像在底部，最后一个图像在顶部）。

我需要一种方法来扭转反向模式（横向旋转和纵向旋转）的滚动限制。

请帮忙。

下面是我想要实现的 UI 规范。所有视图都以纵向模式模拟： ![肖像](../Images/d8956bc23996409b4327301b121afc4d.png)![纵向反转](../Images/2176967607eb4838c4f17ec129aca887.png)![景观](../Images/303f8aaf3db7c284850bb6dcc5378fbf.png)![景观反转](../Images/d5a3ac4413dddc3b3c338ec8eddef1b0.png)

# android - 如何取消另一个活动的警报

> ID：12086236
> 
> 赞同：0
> 
> 时间：2012-08-23T06:52:05.147
> 
> 标签：android

我有两个活动

在活动 A 中，我设置了闹钟

```
public static ActivityA contextA;
Intent intent = new Intent(contextA, AlarmReciever.class);
        intent.setAction(MY_ACTION);
        AlarmManager manager = (AlarmManager) contextA
                .getSystemService(Context.ALARM_SERVICE);
        intent.putExtra("TITLE", triggerTitle);
        PendingIntent ShotSender = PendingIntent.getBroadcast(contextA,
                0, intent, 0);
        manager.setRepeat(AlarmManager.RTC_WAKEUP, fireTime, fireTime*2 + 
                        system.currentTimeMillis(), ShotSender); 
```

在活动 B 中，我想取消闹钟：

```
Intent intent = new Intent(ActivityA.contextA, AlarmReciever.class);
        intent.setAction(MY_ACTION);
        AlarmManager manager = (AlarmManager) ActivityA.contextA
                .getSystemService(Context.ALARM_SERVICE);
        intent.putExtra("TITLE", triggerTitle);
        PendingIntent ShotSender = PendingIntent.getBroadcast(ActivityA.contextA,
                0, intent, 0);
        manager.cancel(ShotSender); 
```

但它会引发异常：NullPointerException

发生在活动 B：

```
 Intent intent = new Intent(ActivityA.contextA, AlarmReciever.class); 
```

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:58:38.053

创建 Intent 时需要使用 ActivityB 的上下文。将 ActivityB 中的代码更改为：

```
Intent intent = new Intent(this, AlarmReciever.class);
intent.setAction(MY_ACTION);
AlarmManager manager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
intent.putExtra("TITLE", triggerTitle);
PendingIntent ShotSender = PendingIntent.getBroadcast(this, 0, intent, 0);
manager.cancel(ShotSender); 
```

# mysql - 从存储在文件中的数据中将值插入 mysql

> ID：12086242
> 
> 赞同：0
> 
> 时间：2012-08-23T06:52:28.690
> 
> 标签：mysql, file, insert

我有一个名为的数据库，有一个`mydb` 名为`mytable` 列的表，`mytable`我`"a","b","c","d"` 想将值插入到文件中的这些`a,b,c,d`列中`mytable`，该文件`myfile.txt`的数据顺序与`mytable`. 有没有一种简单的方法可以在不使用任何循环的情况下将值从文件中插入到表中？

### 编辑部分

该表中已经有大量数据，我不想打扰它。而不是仅仅加载数据，我想简单地将值插入表中，而且我不想一个一个地做，而是在一个命令中不使用循环。

#

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:54:47.570

尝试加载数据输入

```
LOAD DATA INFILE 'data.txt' INTO TABLE tbl_name
  FIELDS TERMINATED BY ',' ENCLOSED BY '"'
  LINES TERMINATED BY '\r\n' 
```

# 请参阅[MYSQL 文档](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:55:14.777

您应该使用 MySQL 加载器：

```
LOAD DATA INFILE 'C:/myfile.txt'
     INTO TABLE mytable
     FIELDS TERMINATED BY ','
     LINES TERMINATED BY '\n'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:55:44.997

您可以使用[INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

```
mysql -e "LOAD DATA INFILE 'ls.dat' INTO TABLE t1" db1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:56:28.617

如果您使用 csv 文件而不是 txt 文件会更好。如果您想在 openoffice 或 MS Office 中编辑数据，然后将其导入数据库，这将是有益的。对于 MySql，您可以使用“LOAD DATA INFILE”选项。它快速高效，唯一的前提是您应该知道表的结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T07:03:42.197

将文件另存为 CSV (myfile.csv) 文件

然后发出命令

```
LOAD DATA INFILE 'myfile.csv' 
INTO TABLE my_table 
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
(Col1, Col2, Col2, Col4) 
```

当您转换为 CSV 格式时，您可能必须删除 Office 程序将附加的任何空白单元格

# objective-c - Objective C 报警本地通知

> ID：12086243
> 
> 赞同：-1
> 
> 时间：2012-08-23T06:52:36.307
> 
> 标签：objective-c, uilocalnotification

我开发了一个报警应用程序。我已经使用`local notification`了取消和贪睡警报按钮。它工作正常，但是当应用程序离线时如何设置贪睡？

我的意思是，执行本地通知时如何打开我的应用程序（以便用户可以暂停它）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T01:04:09.423

这是一个问题`UILocalNotification`。执行后，未经用户授权，您无法打开您的应用程序。你有没有检查过iOS的一些警报应用程序？你需要让它整夜打开。

调用该`applicationDidEnterBackground`方法时，您可以将本地通知设置为 5 秒，这样您就可以提醒用户让您的应用程序打开。

另一种方式：您可以将本地通知按钮设置为“贪睡”，当用户按下它时，您的应用程序就会打开。这样做，`didFinishLaunchingWithOptions`如果用户“打盹”，该方法将返回您。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotif)
    {
        // The user snooze the alert. Insert another local notification here.
    }

    return YES;
} 
```

# java - 传递对象 Java

> ID：12086270
> 
> 赞同：0
> 
> 时间：2012-08-23T06:54:15.737
> 
> 标签：java, parameter-passing

Java中的以下代码有什么区别？我无法清楚地了解对象是如何在 Java 中传递的。谁能解释下面的代码。

```
package cc;

public class C {

    public static class Value {
        private String value;

        public void setValue(String str) {
            value=str;
        }

        public String getValue() {
            return value;
        }
    }

    public static void test(Value str) {
        str.setValue("test");
    }

    public static void test2(Value str) {
        str=new Value();
        str.setValue("test2");
    }
    public static void main(String[] args) {
        String m="main";
        Value v=new Value();
        v.setValue(m);
        System.out.println(v.getValue()); // prints main fine
        test(v);
        System.out.println(v.getValue()); // prints 'test' fine
        test2(v);
        System.out.println(v.getValue()); // prints 'test' again after assigning to test2 in function why?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:55:46.047

在`test2()`一个新实例中创建并且您在较新的实例中设置值，而不是在其引用被传递的对象中

```
public static void test2(Value str) {
        str=new Value();
        str.setValue("test2");
} 
```

**也可以看看**

*   [Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:59:53.153

当你传入`v`你`test2`实际上正在做的事情是将指向方法的引用的*副本*`v`传递给该方法时 - 将其视为具有相同值的新变量`v`。

当您将一个新`Value`对象分配给`str`inside`test2`时，您正在为引用的副本分配一个新值 - 存在于内部的原始引用`main`不受此重新分配的影响，并且仍然引用原始对象。

当您执行第三个`println`时，`main`您仍在使用原始`Value`对象，而不是在内部创建的新对象，`test2`因此您看到`test`并没有`test2`打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:01:28.690

在java中，对象是按值传递的。它将 v2 的引用复制到 str。尽管您创建了一个新对象并分配给 str，但 str 是 test2 方法范围内的局部变量。仅更改了 test2 方法中的 str 。

```
public static void test2(Value str) {
  str=new Value();
  str.setValue("test2");
  System.out.println(str.getValue());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T07:04:04.547

在您的函数`test()`中，您正在传递`Value`对象并在该对象中设置一些字符串。

```
 public static void test(Value str) {
    str.setValue("test");
 } 
```

所以当你打印`System.out.println(v.getValue());`它会给你`test`作为输出。

接下来，您调用`test2()`which 创建一个新实例，`Value` 并在较新的实例中设置值。但不是在传递的对象中，所以新创建的对象中的`test2`值是并且旧对象中的值仍然是`test`。

# node.js - Node V0.8.0 升级在我的项目中有问题

> ID：12086276
> 
> 赞同：0
> 
> 时间：2012-08-23T06:54:58.587
> 
> 标签：node.js

我已将我的节点升级到 v0.8.0，之前是 v0.6.9。我已将我的模块升级到最新版本。

但是当我启动我的服务器时，我反复收到如下错误：

> 未捕获的异常：\"sys\" 模块现在称为 \"util\"。，堆栈：错误：\"sys\" 模块现在称为 \"util\"。\n 在 sys.js:1:69 \n 在 NativeModule.compile (node.js:602:5)\n 在 Function.NativeModule.require (node.js:570:18)\n 在 Function.Module._load (module.js:297:25)\ n 在 Module.require (module.js:362:17)\n 在 require (module.js:378:17)\n 在 Object. (/home/user1/pollroll/code/web/node_modules/oauth-server/lib/util.js:23:7)\n 在 Module._compile (module.js:449:26)\n 在 Object.Module。 _extensions..js (module.js:467:10)\n 在 Module.load (module.js:356:32)"}

你能提出一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:43:41.223

模块[oauth-server](https://github.com/unscene/oauth-server)已在一年多前更新。它还没有准备好 node.js 0.8。您可以手动解决此问题，方法是更改`sys = require('sys')`​​为.`sys = require('util')``/home/user1/pollroll/code/web/node_modules/oauth-server/lib/util.js`

# android - 如何将联系人插入群组？

> ID：12086281
> 
> 赞同：1
> 
> 时间：2012-08-23T06:55:18.550
> 
> 标签：android, contacts

我想将一个添加`contact`到一个特定的组中，我通过使用拥有所有组名及其 ID `ContactsContract.Groups._ID`，现在我想`contact`通过 this 将一个添加到一个组中`id`。即插入一些`contact id`到一些`group id`。

我已检索到组和原始联系人 ID，请告诉我执行此操作的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:48:57.437

我在[如何在 Android 上将联系人添加到群组中找到了答案？](https://stackoverflow.com/questions/2491546/how-do-i-add-contact-to-a-group-on-android.Thanks)奔腾10

```
public Uri addToGroup(long personId, long groupId) {

        //remove if exists
    //    this.removeFromGroup(personId, groupId);

        ContentValues values = new ContentValues();
        values.put(ContactsContract.CommonDataKinds.GroupMembership.RAW_CONTACT_ID,
                personId);
        values.put(
                ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID,
                groupId);
        values
                .put(
                        ContactsContract.CommonDataKinds.GroupMembership.MIMETYPE,
                        ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE);

        return this.ctx.getContentResolver().insert(
                ContactsContract.Data.CONTENT_URI, values);

    } 
```

# ms-access - Access 中的文本到日期转换

> ID：12086286
> 
> 赞同：2
> 
> 时间：2012-08-23T06:55:57.503
> 
> 标签：ms-access, date, datetime

我的 Access 2007 表中有一个格式为“m/d/yyyy hh:mi:ss”的文本列，即 1-2 位数月份 1-2 位数日期 4 位数年份和“美国”日期格式。本地日期格式为 dd/mm/yyyy。

我想将这些日期转换为日期/时间字段，以便对它们进行排序，但是当我使用 CDate 运行更新查询时，它对月份和日期的处理不一致。天数 > 12 可以，因为日期是明确的，但它会将 8 月 1 日（2011 年 8 月 1 日）转换为 1 月 8 日...

我无权更改我的语言环境 - 如果您可以暂时这样做，这可能是一种创可贴。

我可以通过对 Left、Right、Mid、InStr 等进行大量工作来“强制”转换，但由于 1-2 位数的日期和月份，这比应有的工作量要多得多。

我想要（但找不到）是在 Borland Delphi/Pascal 中 StrToDate 的 VB 等效项，您可以在其中传递日期字符串和一个格式字符串，该字符串告诉转换每个数字代表什么。

在 Delphi 中，这很简单：-

```
MyDate:= StrToDate(MyAmericanFormattedDate,'d/m/yyyy hh24:mi:ss'); 
```

有VB等价物吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:33:39.533

VBA 中没有像 Delphi 函数那样的东西。您可以创建一个函数来正确转换字符串值。你不需要使用那些`Left`, `Right`,`Mid`和`InStr`函数。该`Split()`功能从 Access 2000 开始可用，因此您可以拆分日期部分并将它们提供给该`DateSerial()`功能。

```
Public Function DateFromAmericanFormat(ByVal pIn As String, _
        Optional ByVal pDelimiter As String = "/") As Date
    Dim strDate As String
    Dim strTime As String
    Dim dteReturn As Date
    Dim astrFirstSplit() As String
    Dim astrDateParts() As String
    Dim intMonth As Integer
    Dim intDay As Integer
    Dim intYear As Integer

    astrFirstSplit = Split(pIn, " ")
    strDate = astrFirstSplit(0)
    strTime = astrFirstSplit(1)

    astrDateParts = Split(strDate, pDelimiter)
    intMonth = CInt(astrDateParts(0))
    intDay = CInt(astrDateParts(1))
    intYear = CInt(astrDateParts(2))
    dteReturn = DateSerial(intYear, intMonth, intDay) + CDate(strTime)
    DateFromAmericanFormat = dteReturn
End Function 
```

这只是一个粗略的轮廓。它将在“下标超出范围”的 Null 输入上失败。所以这可能需要改进，但希望这是一个合理的起点。

# phpwebsocket - PHP WebSocket 服务器在一段时间后停止工作

> ID：12086290
> 
> 赞同：1
> 
> 时间：2012-08-23T06:56:21.657
> 
> 标签：phpwebsocket

我正在运行一个版本的 Lemmingzshadow 的 PHP websocket 服务器。它可以毫无问题地运行几个小时，有时甚至几天，有几个用户连接/断开连接。然后，没有明显的原因，它停止接受新的连接。它仍在运行，并且仍在正确处理*连接*的用户，但没有*新*用户可以连接。

当用户尝试连接时，我在日志文件中得到了这个：

```
PHP Warning:  fwrite(): 1425 is not a valid stream resource in /server/includes/Socket.php on line 127 
```

有什么想法可能导致这种情况吗？再一次，一切都运行了一段时间，然后......它没有。

# c# - 如果未初始化，则 .NET XML 序列化标记丢失

> ID：12086292
> 
> 赞同：1
> 
> 时间：2012-08-23T06:56:23.720
> 
> 标签：c#, .net, xml, xml-serialization

我对 .NET XML 序列化有疑问。如果我在没有特定标签的情况下反序列化 XML 并将此对象序列化回 XML，其中一些标签将被跳过。无参数构造函数将这些属性设置为默认值，并且它们同时具有 getter 和 setter。

只有`int`属性被跳过，`String`被序列化。

输入文件：

```
<FileList>
  <File>
    <FilePath>RE.msg</FilePath>
  </File>
</FileList> 
```

输出文件：

```
<FileList GUID="A13EDDDF-F55A-4540-A776-609245B92D83" Created="2012-08-23T09:46:30+03:00">
  <File GUID="28C6E090-A3D5-4CD7-97A6-7A46F2F0DDF7" Created="2012-08-23T09:46:30+03:00">
    <FilePath>RE.msg</FilePath>
    <FileStamp>wjoeao1x.msg</FileStamp>
    <StatusMessage>Created</StatusMessage>
  </File>
</FileList> 
```

`int`无参数构造函数为属性设置值，`Status`但它没有被序列化：

```
public CT_File()
{
    Status = 1;
    StatusMessage = "Created";
} 
```

类定义。它是从 XSD 架构自动生成的。

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.1432")]
[System.SerializableAttribute()]
//[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
public partial class CT_File : CT_Base {

    private string filePathField;

    private string descriptionField;

    private string fileStampField;

    private string kapprisIDField;

    private int statusField;

    private bool statusFieldSpecified;

    private string statusMessageField;

    private int errorCodeField;

    private bool errorCodeFieldSpecified;

    private string errorMessageField;

    private CT_FileList attachmentsField;

    private string originalIDField;

    public CT_File()
    {
        Status = 1;
        StatusMessage = "Created";
        this.attachmentsField = new CT_FileList();
    }

    /// <remarks/>
    public string FilePath {
        get {
            return this.filePathField;
        }
        set {
            this.filePathField = value;
        }
    }

    /// <remarks/>
    public string Description {
        get {
            return this.descriptionField;
        }
        set {
            this.descriptionField = value;
        }
    }

    /// <remarks/>
    public string FileStamp {
        get {
            return this.fileStampField;
        }
        set {
            this.fileStampField = value;
        }
    }

    /// <remarks/>
    public string KapprisID {
        get {
            return this.kapprisIDField;
        }
        set {
            this.kapprisIDField = value;
        }
    }

    /// <remarks/>
    public int Status {
        get {
            return this.statusField;
        }
        set {
            this.statusField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlIgnoreAttribute()]
    public bool StatusSpecified {
        get {
            return this.statusFieldSpecified;
        }
        set {
            this.statusFieldSpecified = value;
        }
    }

    /// <remarks/>
    public string StatusMessage {
        get {
            return this.statusMessageField;
        }
        set {
            this.statusMessageField = value;
        }
    }

    /// <remarks/>
    public int ErrorCode {
        get {
            return this.errorCodeField;
        }
        set {
            this.errorCodeField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlIgnoreAttribute()]
    public bool ErrorCodeSpecified {
        get {
            return this.errorCodeFieldSpecified;
        }
        set {
            this.errorCodeFieldSpecified = value;
        }
    }

    /// <remarks/>
    public string ErrorMessage {
        get {
            return this.errorMessageField;
        }
        set {
            this.errorMessageField = value;
        }
    }

    /// <remarks/>
    public CT_FileList Attachments {
        get {
            return this.attachmentsField;
        }
        set {
            this.attachmentsField = value;
        }
    }

    /// <remarks/>
    public string OriginalID {
        get {
            return this.originalIDField;
        }
        set {
            this.originalIDField = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:12:00.627

XmlSerializer 仅序列化公共字段/属性，并且对于属性：仅当它们同时具有 getter 和 setter 时。例如：

```
private int Status; 
```

没有序列化，也没有：

```
private int status;
public int Status { get { return status; } } 
```

或者：

```
private int status;
public int Status { get { return status; } private set { status = value; } } 
```

或者：

```
public int Status { get; protected set; } 
```

此外，如果成员被标记`[XmlIgnore]`，或者如果存在与基于名称的模式匹配的方法，则不会序列化成员：

```
public bool ShouldSerializeStatus() { return false; } 
```

第二种模式的工作方式相同，但允许双向检查（即“我应该序列化这个吗？”和“这在反序列化期间是否得到了一个值？”）：

```
[XmlIgnore]
public bool StatusSpecified { get {...} set {...} } 
```

此外，与其显式默认值匹配的值不会被序列化：

```
[DefaultValue(1)]
public int Status { get; set; } // won't serialize if ===1 
```

我的猜测是，由于上述原因之一，它没有序列化。

# android - 如何禁用按钮双击按钮

> ID：12086295
> 
> 赞同：0
> 
> 时间：2012-08-23T06:56:39.247
> 
> 标签：android

我在一个活动中有下一个按钮，可将您带到下一个活动，并且使用相同的按钮转到下一个活动。

在这里，我的问题是，当我在第一个活动中单击两次下一个时，它会将我带到第三个活动。

# java - 为什么超类的实例变量不被子类覆盖？

> ID：12086298
> 
> 赞同：44
> 
> 时间：2012-08-23T06:57:07.187
> 
> 标签：java

请参阅下面的代码，其中方法`print`被覆盖但变量`a`没有。为什么允许在子类中声明重复变量？

```
class B {
    int a = 10;
    public void print() {
        System.out.println("inside B superclass");
    }
}

class C extends B {
    int a = 20;
    public void print() {
        System.out.println("inside C subclass");
    }
}

public class A {
    public static void main(String[] args) {
        B b = new C();
        b.print(); // prints: inside C subclass
        System.out.println(b.a); // prints superclass variable value 10
    }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-23T07:36:48.957

> 为什么在子类方法中不覆盖超类的实例变量，请参阅下面的代码...

因为实例变量不能在 Java 中被覆盖。在 Java 中，只有方法可以被覆盖。

当您在超类中声明与现有字段同名的字段时，新字段会*隐藏*现有字段。超类中的现有字段仍然存在于子类中，甚至可以使用……符合正常的 Java 访问规则。

（在您的示例中， 的实例`C`有两个不同的字段，称为`a`，包含不同的值。）

* * *

> 因为实例变量在 Java 中不能被覆盖，但是为什么呢？为什么在Java中以这种方式完成？什么原因？

他们为什么要这样设计？

1.  因为覆盖变量会从根本上破坏超类中的代码。例如，如果覆盖更改了变量的类型，则很可能会更改在使用原始变量的父类中声明的方法的行为。在最坏的情况下，它会使它们无法编译。

    例如：

    ```
     public class Sup {
           private int foo;
           public int getFoo() {
               return foo;
           }
       }

       public class Sub extends Sup {
           private int[] foo;
           ...
       } 
    ```

    如果`Sub.foo`覆盖（即替换）`Sup.foo`，如何`getFoo()`工作？在子类上下文中，它会尝试返回错误类型的字段的值！

2.  如果被覆盖的字段不是私有的，那就更糟了。这将以非常基本的方式打破 Liskov 可替代性原则 (LSP)。这消除了多态性的基础。

3.  另一方面，覆盖字段不会实现任何其他方式无法*做得更好*的事情。例如，一个好的设计将所有实例变量声明为私有，并根据需要为它们提供 getter/setter。getter/setter*可以*被覆盖，并且父类可以通过直接使用私有字段或声明 getters/setter 来“保护”自己免受不需要的覆盖 `final`。

* * *

参考：

*   Java 教程 -[隐藏字段](http://docs.oracle.com/javase/tutorial/java/IandI/hidevariables.html)
*   JLS[示例 8.3.1.1-3 - 隐藏实例字段](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#d5e10217)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-12T00:44:37.323

您可以参考[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)中解释该主题的以下部分/示例。

1.  示例 8.3.1.1-3。[隐藏实例变量](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#d5e10238)
2.  第 8.4.8 节。[继承、覆盖和隐藏](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8)以及相关示例

我的其余帖子是为那些有兴趣在此主题上了解 jvm 内部结构的人提供的附加信息。我们可以首先检查使用 javap 为类 A 生成的字节码。以下将字节码反汇编成人类可读的基于文本的指令（助记符）。

```
javap -c A.class 
```

在不迷失整个反汇编的很多细节的情况下，我们可以专注于 b.print 和 ba 对应的行

```
9: invokevirtual #4                  // Method B.print:()V
...
...
16: getfield      #6                  // Field B.a:I 
```

我们可以立即推断出用于访问方法和变量的操作码是不同的。如果您来自 C++ 学校，您可能会感觉到所有方法调用在 java 中默认情况下都是虚拟的。

现在让我们编写另一个与 A 相同的类 A1，但只有一个用于访问 C 中的变量“a”的转换。

> 公共类 A1 {
>   public static void main(String[] args) {
>     B b=new C();
>     b.打印（）；// 转换在这里是无关紧要的，因为无论如何方法都是在运行时绑定 System.out.println(((C)b).a);// 转换允许我们访问 C 中 a 的值
>   }
> }

编译文件并反汇编类。

> javap -c A1.class

你会注意到反汇编现在指向 Ca 而不是 Ba

> 19: getfield #6 // 字段 Ca:I

如果您想深入研究，这里有更多信息：
- invokevirtual 对应于操作码 0xb6
- getfield 对应于操作码 0xb4

[您可以在http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html)找到全面解释这些操作码的 JVM 规范
在 amazon.com 中查看“Java 虚拟机” ” 可以使解码规范的生活变得更加轻松的书籍。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-18T10:52:54.167

我已经修改了您的代码以便于解释，而不是变量“a”，可以说 C 类包含变量“c”。这与 C 类在没有类型转换的情况下无法访问 C 类本身的实例变量的原因相同。示例如下

```
class B
{
     int a=10;
     public void print()
     {
         System.out.println("inside B super class");
     }

}
 class C extends B
 {
     int x=20;
     public void print()
     {
         System.out.println("inside C sub class");
     }

 }
public class A  {
    public static void main(String[] args) {
        B b=new C();

        System.out.println(b.x);//will throw compile error unless b is type casted to Class C

    }

} 
```

因此，在 java 中，编译器通过引用而不是实例。为了克服这个编译器使用**运行时多态性**，但它是用于方法，而不是实例变量。所以变量不能在没有类型转换的情况下被访问，并且方法除非被覆盖（运行时多态性）不能在没有类型转换的情况下被访问。

所以，在我们的例子中，携带子类实例的超类的引用很明显要在超类中查看。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-09T16:13:12.267

因为Java中的变量不遵循多态性，覆盖只适用于方法而不适用于变量。

在Java中，当子类和父类都有同名的变量时，子类的变量会隐藏父类的变量，即使它们的类型不同。这个概念被称为**变量隐藏**。

在方法覆盖的情况下，覆盖方法完全替换了继承的方法，但在变量隐藏中，子类隐藏了继承的变量而不是替换，这基本上意味着子类的对象包含两个变量，但子类的变量隐藏了父类的变量。因此，当我们尝试访问 Child 类中的变量时，它将从子类中访问。

如果我们试图访问 Parent 和 Child 类之外的变量，则从引用类型中选择实例变量。

### 为什么从引用类型而不是实例中选择实例变量

正如[JVM 如何在内部处理方法重载和覆盖](https://programmingmitra.com/2017/05/how-does-jvm-handle-method-overriding-internally.html)中所解释的，在编译时，仅从引用类处理覆盖方法调用，但所有被覆盖的方法在运行时使用 vtable 被覆盖方法替换，这种现象称为**运行时多态**。

同样，在编译时变量访问也是从引用类型处理的，但正如我们所讨论的，变量不遵循覆盖或运行时多态性，因此它们在运行时不会被子类变量替换，仍然引用引用类型。

### 为什么变量不遵循覆盖或为什么它们遵循隐藏

因为如果我们在子类中更改变量的类型，变量覆盖可能会破坏从父类继承的方法。

我们知道每个子类都从其父类继承变量和方法（状态和行为）。想象一下，如果 Java 允许变量覆盖并且我们在子类中将变量的类型从`int`更改为 。`Object`它将破坏使用该变量的任何方法，并且由于子类从父类继承了这些方法，编译器将在子类中给出错误。

如前所述，如果 Java 允许变量覆盖，则 Child 的变量不能替代 Parent 的变量，这将违反 Liskov 可替代性原则 (LSP)。

你可以阅读我的文章[什么是Java中的变量阴影和隐藏](https://programmingmitra.com/2018/02/what-is-variable-shadowing-and-hiding.html)，[为什么超类的实例变量在子类中没有被覆盖](https://programmingmitra.com/2018/11/why-instance-variable-of-super-class-is-not-overridden-In-sub-class.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-04T11:09:39.803

这是我在设计/概念层面上关于为什么不覆盖实例变量的观点。为简单起见，如果我们考虑抽象类，它们会定义抽象方法并期望它们被覆盖。**从来没有像抽象变量这样的东西**。如果有，那么我们可以期望语言通过覆盖来支持它。所以，当一个抽象类被设计时，设计者定义了一些**常见的具体状态**子类型的常见行为（包括抽象方法）。几乎总是如果要继承状态（受保护的访问），那么它将被简单地继承，我相信在极少数情况下可以重新定义其中的一些，但很少重新声明。因此，状态自然被期望被简单地继承，而行为被期望被继承和覆盖。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-26T05:10:29.323

就像其他人提到的那样，您不能覆盖超类的实例变量，但**您可以使用构造函数为您的对象分配正确的值。**例如，您可以使用构造函数使类 C 中的 'a' 的值等于 '20'。

这是您的原始代码，使用构造函数将“a”的值设置为 C 类中的“20”。

长话短说，我们使用对象实例和构造函数的参数将值传递给超类。

```
 public class B {
        private int a; //initialize int a
        public int getA() { //create a getter for a
            return a;
        }
    public B(int size) { //constructor that takes an int
            a = size; //sets a to the value in the parameters
        }
        public void print() {
            System.out.println("inside B superclass");
        }
    }

public class C extends B{
    public C(int a) { //C constructor takes an int
        super(a); //it send the name up to its superclass (B)
    }
    public void print() {
        System.out.println("inside C subclass");
    }
}

public class A {
    public static void main(String[] args) {
        B b = new C(20); //Creates a new object 'b' of type C
        b.print(); // prints: inside C subclass
        System.out.println(b.getA()); // prints the value '20'
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-02-11T20:27:39.187

由于实例变量不会在 java 中被覆盖，因此没有与它们关联的运行时多态性，因此在编译时仅由引用决定。

在您的代码中

```
B b = new C();
b.print();

As b is of type Class B which is Parent to C and hence as there is no 
run time polymorphism it is decided at compile time to call instance 
variable of Class B. 
```

# android - 如何从远程服务器运行 android 网络摄像头？

> ID：12086304
> 
> 赞同：0
> 
> 时间：2012-08-23T06:57:54.647
> 
> 标签：android, gwt, cordova, gwt2

我目前正在做一个需要使用移动相机设备拍摄照片并将它们发送到远程服务器的项目。

问题是我们不需要移动原生应用程序，而是一个将所有代码部署在远程服务器上的 Web 应用程序。例如，可以制作照片并将其部署到服务器的 JavaScript 代码。我想知道是否可以以这种方式使用相机功能？

我在带有 Andoird 4.0.3 的三星 Galaxy S3 上尝试了 gwt-phonegap 1.8.1 的 Geolocation API，其中 Web 应用程序托管在远程服务器上并且运行良好，但是当我尝试打开相机并拍照时，只有一个 TODO图片显示。是我这边的问题还是这个功能还没有实现，或者它不应该那样工作？

这是我的代码中的一个片段，显示了实际的相机使用情况

```
PictureOptions options = new PictureOptions(25); 
        options.setDestinationType(PictureOptions.DESTINATION_TYPE_DATA_URL); 
        options.setSourceType(PictureOptions.PICTURE_SOURCE_TYPE_CAMERA); 

        final Image image = new Image(); 

        if (phoneGap.getCamera() != null) { 
          message += "camera was detected and we are trying to take a photo"; 

          phoneGap.getCamera().getPicture(options, new PictureCallback() { 

            public void onSuccess(String data) { 
//        display.setImageData("data:image/jpeg;base64," + data); 
              image.setUrl("data:image/jpeg;base64," + data); 
              panel.add(image); 
            } 

            @Override 
            public void onFailure(String message) { 
              Window.alert("Photo not successful"); 
            } 

          }); 

        } else { 
          message += "camera was not detected"; 
          message += " " + phoneGap.getClass().getName(); 

        } 

        label.setText(message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:07:33.240

您可以使用`<input type=file>`具有特殊`accept`属性值（需要用户交互）或`getUserMedia`API 的 an。

有关详细信息和一些示例代码，请参见[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)。

在 GWT 中，您必须使用 JSNI 或[Elemental 库](https://developers.google.com/web-toolkit/articles/elemental)才能使用`getUserMedia`API。

# datetime - 给 .setNumberFormat() 以显示时区的参数

> ID：12086307
> 
> 赞同：0
> 
> 时间：2012-08-23T06:58:18.783
> 
> 标签：datetime, formatting, google-apps-script

我有一个谷歌应用程序脚本，我在其中复制单元格中的日期。我想设置单元格的格式以查看类似“2012 年 8 月 22 日 - 23:55 - PDT”的内容。

我没有找到我可以为方法 .setNumberFormat() 提供的所有参数的清晰列表。我找到了[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)但它似乎不适用于所有参数。

通过反复试验，我设法猜测出最适合我目的的“d MMM yy - HH:mm”，但我想在最后添加时区（“d MMM yy - HH:mm - Timezone”）。有什么线索吗？

谢谢，

雪绒花

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:20:26.047

您需要做的第一件事是将电子表格中单元格的格式明确设置为纯文本。否则，它将被格式化为日期并以它根据区域设置选择的任何默认格式显示。

接下来，使用 Utilities.formatDate() 函数来格式化您的日期。根据您的要求，使用格式字符串作为

`// This will return a string.`

`var str = Utilities.formatDate(new Date(), "PDT", "dd MMM yyyy - HH:mm - z");`

# python - python ctypes cast获取空字符串

> ID：12086309
> 
> 赞同：0
> 
> 时间：2012-08-23T06:58:25.527
> 
> 标签：python, casting, ctypes

python ctypes cast获取空字符串

`b`是地址

如果`b_v.value`是普通字符，这是正常的。但是如果`b`的内容是像“1122001314”这样的十六进制，只要它包含十六进制“00”，结果可能是 1122 001314 应该丢失

现在我想获取所有内容“1122001314”。请给我一些方法谢谢。

代码是：

```
b_v=ctypes.cast(b,ctypes.POINTER(ctypes.c_char_p))

print binascii.b2a_hex(b_v.value) 
```

例子：

```
import ctypes
import binascii

va=binascii.a2b_hex('1212273031003535')
tt=ctypes.create_string_buffer(va)
b=ctypes.addressof(tt)
b_v=ctypes.cast(b,ctypes.c_char_p)
print binascii.b2a_hex(b_v.value) 
```

现在结果是：`"1212273031"`

我想要的结果是`"1212273031003535"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:25:46.297

在行中，`tt=ctypes.create_string_buffer(va)`您正在从数据（二进制数据）的十六进制表示中构建 string_buffer，这是错误的，因为 c 字符串以第一个 0 值字符结尾。所以你的数据中断了。幸运的是，除了字符串值之外，ctypes 还提供原始数据，因此`tt.raw`您可以访问原始数据并且可以使用`binascii.b2a_hex(tt.raw)`，但我不确定它是否对您有用。

如果您想运行`b=ctypes.addressof(tt)`并将地址传递到其他地方，然后从 address by 检索数据`b_v=ctypes.cast(b,ctypes.c_char_p)`，我应该说这是不可能的 string_buffer 类型，因为您的数据不是文本，它是二进制数据，您不能将其存储在 string_buffer然后使用它的地址访问它。

如果你也知道数据的长度，你可以通过知道 b 来检索数据，试试这个：

```
b, l = ctypes.addressof(tt), len(tt) - 1 # l - 1, because there is one extra byte for terminator NULL

#Somewhere else:
b_v=ctypes.cast(b, ctypes.POINTER(ctypes.c_char * l))
print binascii.b2a_hex(b_v.contents) 
```

# mysql - 从 MySQL 表中获取两天的数据

> ID：12086310
> 
> 赞同：2
> 
> 时间：2012-08-23T06:58:25.680
> 
> 标签：mysql, date

我在数据库中有 unix 时间戳字段。

```
check_in_mktime
-------------
1345639136
1345639146
1345639176

```

如何使用时间戳获取两天数据（包括今天和昨天）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:06:06.343

试试这个查询 -

*（已编辑）*

```
SELECT * FROM table1
WHERE
  check_in_mktime >= UNIX_TIMESTAMP(CURDATE() - INTERVAL 1 DAY) AND
  check_in_mktime < UNIX_TIMESTAMP(CURDATE() + INTERVAL 1 DAY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:04:58.423

你可以这样做：

```
 SELECT * 
 FROM your_table 
  WHERE Date(FROM_UNIXTIME(check_in_mktime)) between date(now() + interval 1 day) and date(now() - interval 1 day) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:07:54.890

您需要使用以下内容：

*   `NOW()` => 当前日期和时间
*   `FROM_UNIXTIME()`=> 将时间戳转换为日期
*   `DATE()`=> 从日期时间数据类型获取日期
*   `DATE_SUB()`=> 减去日期

尝试，

```
 SELECT * 
  FROM  your_table 
  WHERE DATE(FROM_UNIXTIME(check_in_mktime`))     -- converts timestamp to date
                   between DATE(NOW) and                    -- today
                           DATE_SUB(NOW(),INTERVAL 1 DAY)   -- yesterday 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T07:06:55.977

如果将来没有签到，那么

```
SELECT * FROM table_name 
WHERE check_in_mktime >= UNIX_TIMESTAMP(CURDATE() - INTERVAL 1 DAY) 
```

# regex - 字符串的正则表达式后跟括号中的参数

> ID：12086314
> 
> 赞同：2
> 
> 时间：2012-08-23T06:58:39.217
> 
> 标签：regex

我正在尝试为以下场景编写正则表达式。

它可以是简单的字母数字字符串（即使它是特殊字符也可以有'@'）或字母数字字符串后跟括号中的参数列表或字母数字字符串后跟空白括号：

1.  My_macro -> 接受这个
2.  My_macro() -> 接受这个
3.  My_macro(arg1, arg2, arg3) -> 接受这个

我是正则表达式的新手，我阅读了一些教程并且可以形成这个正则表达式。

```
([a-zA-Z]+[a-zA-Z0-9_@]*) | ([a-zA-Z]+[a-zA-Z0-9_@.]+[\(][a-zA-Z]+[a-zA-Z0-9_@,]+[\)]) 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:06:35.653

我注意到的一些事情：

*   第一部分（宏名）在所有情况下都会出现，因此您无需重复。（您可以使用“？”作为可选部分——parens 和 args 列表。）
*   `+`后面的表达式与后面的表达式是`[a-zA-Z]`多余的。`*``[a-zA-Z...]`
*   您可能/可能没有管道/条（“|”）周围的额外空间。这可能会弄乱您的正则表达式。
*   您的示例在参数之间有空格，但您的正则表达式没有。

[更新] 另一个花絮：

*   逗号很棘手。你基本上需要这样的东西：（请原谅我的伪正则表达式）

    (<arg 表达式> ([spaces]*[comma][spaces]*<arg 表达式>)* )?

...应该可以选择匹配括号内的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:19:11.930

```
^[\w@]+(\((\w+,?\s*)*\))?$ 
```

火柴：

```
My_macro(arg1,  arg2, arg3)
My_macro(arg1)
My_macro
My_macro()
My_macro@()

^                   # Line Start
[\w@]+              # Matches alphanumerics and @ => My_@macro
(\((\w+,?\s*)*\))?  # Matches optional argument (empty) list (), (arg) and (arg1, arg2) 
$                   # Matches Line End 
```

问题是你到底想要达到什么目的。为什么需要匹配这些字符串？无论如何，您的要求与大多数字符串匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:05:39.107

```
[A-Za-z@][A-Za-z0-9@]*\s*\(\s*([A-Za-z@][A-Za-z0-9@]*\s*(\s*,\s*[A-Za-z@][A-Za-z0-9@]*\s*)+)?\s*\) 
```

顺便说一句，我不会使用单个正则表达式来执行此操作，而是首先获取标识符，然后去除括号，然后拆分参数列表。在代码中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T07:12:15.143

在 php 中它看起来像：

```
 $subject = "My_macro My_@acro My_macro() My_macro(arg1, arg2, arg3)";
    $pattern = '![a-zA-Z0-9_@]+(\((([a-zA-Z0-9_@]+(\,\s)?){3})?\))?!';
    preg_match_all($pattern, $subject, $matches);
    print_r($matches[0]);

Array
(
    [0] => My_macro
    [1] => My_@acro
    [2] => My_macro()
    [3] => My_macro(arg1, arg2, arg3)
) 
```

# php - cURL 和摘要认证

> ID：12086316
> 
> 赞同：0
> 
> 时间：2012-08-23T06:58:46.100
> 
> 标签：php, curl, libcurl, digest, digest-authentication

我正在使用 cURL 进行 DIGEST AUTH，它运行良好。问题是，我需要浏览器将那些在登录页面上制作的 Digest Credentials 保存在所有其他页面中，而无需重新发送 user:pass。

例子：

我在 login.php 中，我写了我的用户名和密码，我发出一个 cURL 请求进行身份验证，服务器响应 OK，所以我重定向到 index.php，它需要进行身份验证，但它会询问用户名和密码再次，它并没有阻止它从 login.php。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:04:04.710

您需要为此使用 Cookie Jar，例如：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
/* more cURL options */
curl_setopt($ch, CURLOPT_COOKIEJAR, '/tmp/cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, '/tmp/cookies.txt');

$output = curl_exec($ch);
curl_close($ch); 
```

# android - android httpurlconnection 数据连接速度慢

> ID：12086318
> 
> 赞同：2
> 
> 时间：2012-08-23T06:58:54.590
> 
> 标签：android, http, httpurlconnection, keep-alive

为什么对数据的第一个http请求这么慢？

我在以下几行中使用了一些东西：连续执行 3 个 HTTP 请求（一个接一个），然后等待给定时间并再次循环执行 3 个 HTTP 请求。

我正在使用keep-alive，它基本上也可以工作，但是在第一个HTTP请求上，每次我从3个HTTP请求开始时都会有2秒的惩罚。只有第一个 HTTP 请求有这个 2 秒的惩罚。如果我将连续 HTTP 请求之间的等待时间降低到 200 毫秒左右，那么所有请求都很快，而第一个请求没有看到这 2 秒的惩罚。

显然，这听起来像第一个请求可能不使用保持活动连接，但实际上并非如此。我在服务器上运行 tcpdump，我可以清楚地看到所有请求都使用相同的 TCP 连接，而无需关闭并再次建立新连接。服务器上的保持活动设置设置为 60 秒，而在应用程序上等待的时间例如为 5 秒。此外，当我切换到 WIFI 时，我看不到这种行为。在等待的同时，所有请求都很快。

http 连接代码使用 HttpURLConnection，如下所示：

```
m_res.error = null;
HttpURLConnection connection;
try {
    connection = (HttpURLConnection)(new URL(m_url + "/" + m_call.command).openConnection());
    connection.setDoOutput(true); // triggers POST.
    connection.setDoInput(true);
    connection.setRequestProperty("Accept-Charset", m_charset);
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=" + m_charset);
    connection.setRequestProperty("Connection", "Keep-Alive");
    connection.setRequestProperty("Accept-Encoding", "gzip");
    //connection.setChunkedStreamingMode(0);
    OutputStream output = null;

    try {
        output = connection.getOutputStream();
        output.write(m_call.query_string.getBytes(m_charset));
        InputStream response = null;
        try {
            response = connection.getInputStream();
            if ("gzip".equals(connection.getContentEncoding())) {
                response = new GZIPInputStream(response);
            }
        }
        catch (IOException e) {
            response = connection.getErrorStream();
        }
        if (response == null) {
            m_res.error = "Connection Error";
        }
        else {
            m_res.body = getAsString(response);
            m_res.status = connection.getResponseCode();
        }
    } 
    catch (IOException e) {
        e.printStackTrace();
        m_res.error = "Connection Error";
    }
    finally {
        if (output != null) 
                try { 
                    output.close(); 
                } catch (IOException logOrIgnore) {}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:18:03.087

我认为对此的一个可能答案是，IP 下一层上的设备数据连接正在改变其状态，例如，当在给定时间内没有传入或传出数据时，可能存在某种待机状态，例如在我的例如 5 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:21:28.120

查看 ARO 工具，该工具可让您查看网络级别发生的情况。[https://developer.att.com/developer/aro](https://developer.att.com/developer/aro) 该分析器将向您展示正在发生的所有不同网络通信，并帮助您更有效地利用网络。我在评论中发布的另一个链接解释了状态机以及空闲时不同时间的连接会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-13T09:11:46.727

您可以使用 volley 库及其功能。 1\. 请求队列和优先级 2\. 有效的请求缓存和内存管理 3\. 库的可扩展性和自定义以满足我们的需求 4\. 取消请求

并使用此链接[http://www.androidhive.info/2014/05/android-working-with-volley-library-1/](http://www.androidhive.info/2014/05/android-working-with-volley-library-1/)

# c# - 在浏览器中打开 PDF 而不是下载它

> ID：12086321
> 
> 赞同：18
> 
> 时间：2012-08-23T06:59:15.380
> 
> 标签：c#, asp.net, pdf-generation

我正在使用 iTextSharp 在单击按钮时将面板打印到 PDF 中。单击按钮后，PDF 正在下载到客户的计算机上。而不是这个，我需要在浏览器中打开 PDF 而不是下载。用户可以从浏览器将 PDF 下载到他的 PC 上。

我正在使用以下代码：

```
Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "attachment;filename=" + filename + ".pdf");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
pnl_print.RenderControl(hw);

StringReader sr = new StringReader(sw.ToString());
Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 100f, 0f);
HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
pdfDoc.Open();
htmlparser.Parse(sr);
pdfDoc.Close();
Response.Write(pdfDoc);
Response.End();

sr.Close();
hw.Close();
sw.Close(); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-23T07:12:04.457

将`content-disposition`改为`inline`代替`attachment`。

您的代码段的第二行将是

```
Response.AddHeader("content-disposition", "inline;filename=" + filename + ".pdf"); 
```

请参阅[Content-Disposition：“内联”和“附件”有什么区别？](https://stackoverflow.com/questions/1395151/content-dispositionwhat-are-the-differences-between-inline-and-attachment)了解更多详情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:01:25.077

试试这个代码：

行动：

```
Response.AddHeader("content-disposition", "attachment;filename=" + filename + ".pdf"); 
```

要在新选项卡/窗口中打开：

```
@Html.ActionLink("view pdf", "getpdf", "somecontroller", null, 
                  new { target = "_blank" }) 
```

或者

```
<a href="GeneratePdf.ashx?somekey=10" target="_blank"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-17T12:44:30.857

您应该查看“Content-Disposition”标题；例如，将“Content-Disposition”设置为“attachment; filename=FileName.pdf”将提示用户（通常）使用“另存为：FileName.pdf”对话框，而不是打开它。但是，这需要来自正在下载的请求，因此您不能在重定向期间执行此操作。但是，ASP.NET 为此提供了 Response.TransmitFile。例如（假设您没有使用 MVC，它有其他首选选项）：

```
Response.Clear();
Response.ContentType = "application/pdf";
Response.AppendHeader("Content-Disposition", "attachment; filename=FileName.pdf");
Response.TransmitFile(Server.MapPath("~/folder/Sample.pdf"));
Response.End(); 
```

如果您尝试打开然后 apicontroller 中的文件将流转换为字节数组，然后填充内容

```
HttpResponseMessage result = null;
result = Request.CreateResponse(HttpStatusCode.OK);
FileStream stream = File.OpenRead(path);
byte[] fileBytes = new byte[stream.Length];
stream.Read(fileBytes, 0, fileBytes.Length);
stream.Close();           
result.Content = new ByteArrayContent(fileBytes);
result.Content.Headers.ContentDisposition = new System.Net.Http.Headers.ContentDispositionHeaderValue("attachment");
result.Content.Headers.ContentDisposition.FileName = "FileName.pdf"; 
```

我想它会帮助你...

# sql-server - 以分层样式列出数据库中的数据

> ID：12086332
> 
> 赞同：0
> 
> 时间：2012-08-23T07:00:26.347
> 
> 标签：sql-server, vb.net, treeview, components, vb.net-2010

我如何以这种方式列出数据字段

![在此处输入图像描述](../Images/a00774b6411e1e6903011d47f431034b.png)

我划伤的数据来自 MS SQL 数据库，而我没有划伤的数据是我想要保留的静态数据。

在 VB.NET 中是否有任何特定的组件，或者我需要从任何第三方供应商那里获得它？

它被称为树视图组件还是其他东西？我在互联网上搜索了很多，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:55:55.533

是的，那是一个树视图组件。.Net 中有可用的树视图，以及许多不同质量的第三方组件。您如何填充它取决于您选择的组件和平台（winforms 或 web）

# android - 使用调用 startActivity() 重新启动应用程序但获得“使用完成的操作”

> ID：12086333
> 
> 赞同：1
> 
> 时间：2012-08-23T07:00:31.423
> 
> 标签：android, android-activity, android-listfragment

我正在重新发布这个问题：

我希望我的应用程序在警报对话框中按“确定”时重新启动。但是当我按下按钮时，我得到“使用完成操作”屏幕，我如何启动我的应用程序而不必去“完成操作..”？

这是重新启动应用程序的正确方法吗？

PS我需要重新启动应用程序，因为最初当应用程序启动时列表是从本地数据库显示的，然后在从服务器获取新数据并更新本地数据库后，我无法显示更新的列表。它在重新启动应用程序后工作。

调用startActivity的代码：

Toast.makeText(mContext, "阅读完毕", Toast.LENGTH_SHORT).show();

```
 AlertDialog.Builder clickAlert = new AlertDialog.Builder(mContext);
    clickAlert.setMessage("Database has been updated, please restart application to load new data. ");
    clickAlert.setPositiveButton("Restart", new OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            Intent i = new Intent("android.intent.action.MAIN");
            mContext.startActivity(i);

        }
    });
    clickAlert.create().show(); 
```

我有一个从字符串适配器填充的 listFragment，这个字符串是从从服务器返回数据的方法填充的。我需要重新填充此列表。代码：

// 获取包含 storelist 的游标

```
 Cursor curStoreList = mDbHelper.getStoreList();
    String[] StoreList = new String[curStoreList.getCount()];
    int i = 0;

    // Store returned items in StoreList[]
    while (curStoreList.moveToNext()) {
        String storeName = curStoreList.getString(0);
        StoreList[i] = storeName;
        i++;
    }

    // Create an adapter with list of stores and populate the list with
    // values
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, StoreList);
    setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:06:39.853

实际上，

```
android.intent.action.MAIN 
```

是意图操作名称而不是任何活动名称。

**您必须使用要启动的活动名称而不是它..**

喜欢，

```
Intent intent = new Intent(<Current_Activity>.this, <Starting_Activity>.class); 
```

**更新：**

您想要实现的`android.intent.action.MAIN`是 Android 中所有应用程序的通用操作名称。

如果要使用 Intent Action Name 启动 Activity，则必须在应用程序的 Manifest 文件中的 Activity Tag 中定义自己的 Intent Action 名称。

看看这个 SO Question[如何在 <intent-filter> 的帮助下开始 MAIN 活动？](https://stackoverflow.com/questions/11703143/how-can-i-start-main-activity-with-the-help-of-intent-filter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:03:04.053

改变这个意图

```
 Intent i = new Intent("android.intent.action.MAIN"); 
```

有点像

```
 Intent mainIntent = new Intent(crntactivity.this, classuwanttogo.class); 
```

# android - URC 的不同供应商 RIL 实现对 Android 的影响

> ID：12086336
> 
> 赞同：1
> 
> 时间：2012-08-23T07:00:44.903
> 
> 标签：android, sleep, phone-state-listener, ril

我想知道是否有人可以向我解释以下内容。

我有两台设备，一台 HTC Desire 和一台三星 Galaxy Nexus。我在两者上运行相同的应用程序。该应用程序有一个前台服务，通过注册到 PhoneStateListener 来监听小区位置和信号强度更新。

当手机完全唤醒时，两者的工作方式相似。当手机进入睡眠状态时，nexus 会不断更新信号强度（有时还会更新手机位置），但 Desire 会停止。我认为这是由于每个 RIL 如何处理 SCREEN_OFF 意图。

我想了解的是，当手机处于睡眠状态时，小区/信号更新对 nexus 的影响是什么。我在侦听器中有一个记录器，并且在睡眠期间不断获取更新日志。

1) 这是否意味着 Android 在每次信号强度更新时都会唤醒？2）如果我在屏幕关闭时从这个监听器中注销，Android 是否仍会因为 RIL 的实现方式而唤醒？

我在侦听器内部没有任何 cpu 锁。

谢谢。

# jquery - 如何在 Jquery UI DatePicker 中选择后将所选日期转换为标准日期？

> ID：12086338
> 
> 赞同：0
> 
> 时间：2012-08-23T07:00:53.793
> 
> 标签：jquery, jquery-ui, datepicker

我在我的项目中集成了 JQueryUI DatePicker 的本地化版本。它运行良好。但是现在我希望当用户在我的自定义文化中选择一个日期时，`input`字段中显示的日期是标准格式。因为我打算将它存储在数据库表中.而且我不喜欢在我的应用程序中添加日期转换重载。

我的 DatePicker 集成代码：

```
 $('#PublishDate').datepicker({

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:14:06.300

我只会使用：

`$('#element').datepicker({ dateFormat: "dd-mm-yy" });`

或者甚至更好地打开您在`dateFormat`那里使用和编辑的文化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:10:58.040

`enter code here`这用于设置日期格式....

```
//getter
var dateFormat = $( ".selector" ).datepicker( "option", "dateFormat" );

//setter
$( ".selector" ).datepicker( "option", "dateFormat", "yy-mm-dd" ); 
```

或者你也可以实现选择事件

```
$('.selector').datepicker({
   onSelect: function(dateText, inst) { ... }
}); 
```

并编写代码以更改输入字段中的日期格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:11:19.790

你需要类似的东西：

```
$('#PublishDate').datepicker({            
'altField' => '#PublishDateH',
'altFormat' => 'yy-mm-dd',    
}); 
```

`PublishDateH`并创建一个可以存储在数据库中的隐藏元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:40:05.760

根据您需要的任何区域设置文化，就像这样..

```
$.datepicker.setDefaults($.datepicker.regional['en-GB']); // for English-UK 
```

根据您的情况将其设置为您需要的任何内容。更多细节[在这里](http://jqueryui.com/demos/datepicker/#localization)。

# javascript - 如何使矩形的特定边可调整大小？

> ID：12086347
> 
> 赞同：0
> 
> 时间：2012-08-23T07:01:37.250
> 
> 标签：javascript, raphael, graphiti-js

我想让矩形的少数或单边在 Graphiti 中可调整大小。如果有人有任何想法，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:03:19.120

在 1.0.0 版本中，您可以覆盖**Figure.showResizeHandles**方法。有关示例，请参见 Horizo​​ntalBus 图

```
/**
 * @method
 * Callback to update the visibility of the resize handles
 * 
 * @param {graphiti.Canvas} canvas
 * @param {graphiti.ResizeHandle} resizeHandle1 topLeft resize handle
 * @param {graphiti.ResizeHandle} resizeHandle2 topCenter resize handle
 * @param {graphiti.ResizeHandle} resizeHandle3 topRight resize handle
 * @param {graphiti.ResizeHandle} resizeHandle4 rightMiddle resize handle
 * @param {graphiti.ResizeHandle} resizeHandle5 bottomRight resize handle
 * @param {graphiti.ResizeHandle} resizeHandle6 bottomCenter resize handle
 * @param {graphiti.ResizeHandle} resizeHandle7 bottomLeft resize handle
 * @param {graphiti.ResizeHandle} resizeHandle8 leftMiddle resize handle
 * @template
 */
 showResizeHandles: function(canvas, resizeHandle1, resizeHandle2, resizeHandle3, resizeHandle4, resizeHandle5, resizeHandle6, resizeHandle7, resizeHandle8)
 {
    resizeHandle4.setDimension(resizeHandle4.getWidth(), this.getHeight());
    resizeHandle8.setDimension(resizeHandle4.getWidth(), this.getHeight());

    this._super(canvas, resizeHandle1, resizeHandle2, resizeHandle3, resizeHandle4, resizeHandle5, resizeHandle6, resizeHandle7, resizeHandle8);

    resizeHandle1.hide();
    resizeHandle2.hide();
    resizeHandle3.hide();
    resizeHandle5.hide();
    resizeHandle6.hide();
    resizeHandle7.hide();
 }, 
```

这将在右侧和左侧创建两个调整大小手柄，并具有父图形的完整高度。

1.0.0 版将于 9 月 17 日发布

# objective-c - 如何使按钮更改 WebKit Web View Xcode 上的网页

> ID：12086352
> 
> 赞同：0
> 
> 时间：2012-08-23T07:02:10.670
> 
> 标签：objective-c, xcode, macos, web, webkit

如何在 WebKit Web View Xcode 上制作按钮更改网页，是的，我说的是 mac，如果您回复谢谢，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:05:51.503

```
-(IBAction) changeWebPage
{
    [webView setMainFrameURL:@"www.google.com"];
} 
```

那是你要的吗？

# properties - 通过 twiddle 检索系统属性

> ID：12086356
> 
> 赞同：2
> 
> 时间：2012-08-23T07:02:58.237
> 
> 标签：properties, jboss, classpath, twiddle

我正在尝试使用`twiddle`jboss4.3 从 JMX 控制台检索系统属性。

以下命令有效并为我提供了单个属性的值...

```
twiddle.sh -u<username> -p<password> -Djnp.disableDiscovery 
--server=localhost:<port>
invoke 'jboss:name=SystemProperties,type=Service' get 
<SYSTEM PROPERTY NAME> 
```

但是，当我尝试一次尝试获取所有属性时，它不起作用......

```
twiddle.sh -u<username> -p<password> -Djnp.disableDiscovery 
--server=localhost:<port> 
invoke 'jboss:name=SystemProperties,type=Service' showAll 
```

并显示以下异常：

```
00:02:21,773 ERROR [Twiddle] Exec failed
java.lang.reflect.UndeclaredThrowableException
        at $Proxy0.invoke(Unknown Source)
        at org.jboss.console.twiddle.command.InvokeCommand.invoke(InvokeCommand.java:234)
        at org.jboss.console.twiddle.command.InvokeCommand.execute(InvokeCommand.java:282)
        at org.jboss.console.twiddle.Twiddle.main(Twiddle.java:306)
Caused by: java.lang.ClassNotFoundException: org.jboss.varia.property.SystemPropertiesService$HTMLMap (no security manager: RMI class loader disabled)
        at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:375)
        at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:165)
        at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
        at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:247)
        at sun.rmi.server.MarshalInputStream.resolveClass(MarshalInputStream.java:197)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1575)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1496)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1732)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
        at java.rmi.MarshalledObject.get(MarshalledObject.java:142)
        at org.jboss.invocation.jrmp.interfaces.JRMPInvokerProxy.invoke(JRMPInvokerProxy.java:134)
        at org.jboss.invocation.InvokerInterceptor.invokeInvoker(InvokerInterceptor.java:365)
        at org.jboss.invocation.InvokerInterceptor.invoke(InvokerInterceptor.java:197)
        at org.jboss.jmx.connector.invoker.client.InvokerAdaptorClientInterceptor.invoke(InvokerAdaptorClientInterceptor.java:66)
        at org.jboss.proxy.SecurityInterceptor.invoke(SecurityInterceptor.java:70)
        at org.jboss.proxy.ClientMethodInterceptor.invoke(ClientMethodInterceptor.java:74)
        at org.jboss.proxy.ClientContainer.invoke(ClientContainer.java:100)
        ... 4 more 
```

有什么线索吗？？

## 编辑

添加`properties-plugin.jar`错误更改后：

```
01:51:36,366 ERROR [Twiddle] Exec failed
java.lang.RuntimeException: No property editor for type: class org.jboss.varia.property.SystemPropertiesService$HTMLMap
        at org.jboss.util.propertyeditor.PropertyEditors.getEditor(PropertyEditors.java:176)
        at org.jboss.console.twiddle.command.InvokeCommand.invoke(InvokeCommand.java:244)
        at org.jboss.console.twiddle.command.InvokeCommand.execute(InvokeCommand.java:282)
        at org.jboss.console.twiddle.Twiddle.main(Twiddle.java:306) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:39:43.780

此错误的原因是`showAll`返回的自定义类`org.jboss.varia.property.SystemPropertiesService$HTMLMap`的对象不存在于 twiddle 的类路径中。

只需添加到您的 twiddle.sh：

```
JBOSS_CLASSPATH="$JBOSS_CLASSPATH:$JBOSS_HOME/server/default/lib/properties-plugin.jar" 
```

注意，它适用于 JBoss 4.x。你没有提到版本。但是 stacktrace 表明它是 JBoss 4.x。

# c# - 在 asp.net 中回发后 HTML5 画布刷新

> ID：12086357
> 
> 赞同：0
> 
> 时间：2012-08-23T07:03:00.483
> 
> 标签：c#, jquery, asp.net, canvas, html5-canvas

我在我的 asp.net 应用程序中使用 HTML5 画布标签和 Jquery 插件进行免费手写。

[http://www.websanova.com/plugins/paint/html5#websanova](http://www.websanova.com/plugins/paint/html5#websanova)

我面临一个问题。当单击我的服务器端按钮以保存图像时，它会执行我猜的回发并刷新页面的画布。回发后，它给了我空白的画布，我得到了通过代码保存的空白图像。

这是我的代码片段

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="wPaint.aspx.cs" Inherits="wPaint" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>.::wPaint in .NET::.</title>
    <!-- jQuery -->
    <script type="text/javascript" src="wPaint/jquery.1.7.1.min.js"></script>
    <script type="text/javascript" src="wPaint/jquery.ui.core.min.js"></script>
    <script type="text/javascript" src="wPaint/jquery.ui.widget.min.js"></script>
    <script type="text/javascript" src="wPaint/jquery.ui.mouse.min.js"></script>
    <script type="text/javascript" src="wPaint/jquery.ui.draggable.min.js"></script>
    <!-- wColorPicker -->
    <link rel="Stylesheet" type="text/css" href="wPaint/wColorPicker.1.2.min.css" />
    <script type="text/javascript" src="wPaint/wColorPicker.1.2.min.js"></script>
    <!-- wPaint -->
    <link rel="Stylesheet" type="text/css" href="Styles/wPaint.css" />
    <script type="text/javascript" src="wPaint/wPaint.js"></script>
</head>
<body>
    <form id="form1" runat="server">
            <div id="wPaint" style="position: relative; width: 500px; height: 300px; background: #CACACA;
                border: solid black 1px; overflow: hidden;">
            </div>

    <script type="text/javascript">
        $("#wPaint").wPaint();

        function loadImage() {
            var imagedata = $("#lblImage").text();
            var extension = $("#lblextension").text();
            $("#wPaint").wPaint("image", "data:image/" + extension + ";base64," + imagedata + "");
        }

        function saveImage() {
            var imageData = $("#wPaint").wPaint("image");
            $("#lblImage").text(imageData);
        }

        function Clear() { $("#wPaint").wPaint(); }

    </script>
    <div>
        <div style="float: left; width: 100px; margin: 10px;">
            <asp:Button ID="btnSave" runat="server" Text="Save Image" OnClick="btnSave_Click" /></div>
        <div style="float: left; width: 100px; margin: 10px;">
            <asp:Button ID="btnClear" runat="server" Text="Clear" OnClick="btnClear_Click" /></div>
    </div>
            <asp:Label ID="lblImage" runat="server" Style="display: block" />
            <asp:Label ID="lblextension" runat="server" Style="display: none" />
    </form>
</body>
</html> 
```

：：：：：：：：：：： CS：：：：：：：：：：：：：：：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.IO;
using System.Drawing;
using System.Drawing.Imaging;

public partial class wPaint : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnSave_Click(object sender, EventArgs e)
    {
        this.ClientScript.RegisterStartupScript(GetType(), "Javascript", "saveImage();", true);

    }
    protected void btnClear_Click(object sender, EventArgs e)
    {
        this.ClientScript.RegisterStartupScript(GetType(), "Javascript", "Clear();", true);

// Convert Base64 String to byte[]
            byte[] imageBytes = Convert.FromBase64String(lblImage.Text);
            MemoryStream ms = new MemoryStream(imageBytes, 0,
              imageBytes.Length);

            // Convert byte[] to Image
            ms.Write(imageBytes, 0, imageBytes.Length);
            Image image = Image.FromStream(ms, true);
            image.Save(Server.MapPath(".\\Saved\\Arslan.png"));
           // return image;
    }
   } 
```

请建议我解决这个问题的任何方法。所以我的画布不会变成空白。它在客户端 html 按钮上工作正常并完美保存图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:21:08.607

解决这个问题的最简单方法是返回一个 ajax 帖子，并留在页面上。

第二个困难的解决方案是用上一篇文章中的图像重新绘制画布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:21:15.253

自然往返（回发）将擦除绘图。为了发送和保存`dataUri`你必须写`WebMethod`或`WCF service`请求它`jQuery.ajax()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:47:20.387

你可以试着把这个保存按钮放在里面`UpdatePanel`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T07:51:55.870

嗨，您可以将运行在服务器上的表单放在 iframe 中并在那里进行上传。成功上传后，使用 $('#Id',window.parent.document) 从 iframe 访问父 html 并设置图像。回发将在 iframe 中进行，您的画布不会受到影响。

# oracle - 哪个 ORM 最适合报告模块？

> ID：12086359
> 
> 赞同：0
> 
> 时间：2012-08-23T07:03:06.453
> 
> 标签：oracle, hibernate, ibatis

我们`IBatis`在一个模块和`Hibernate`另一个模块中使用。
一般来说，这两个 ORM 中哪一个最适合报告？
我个人觉得`IBatis`最适合报道。
请谈谈你对此的看法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:40:27.040

据我说：iBatis 是更好的选择，因为：

1.  在报告中，您可能需要编写复杂的查询。在 iBatis 中编写复杂的查询非常容易。
2.  您只需要读取数据，无需担心数据库更新。如果大量使用数据库写入操作，我推荐 Hibernate。

# c# - LinqToEntities 分组

> ID：12086360
> 
> 赞同：1
> 
> 时间：2012-08-23T07:03:08.347
> 
> 标签：c#, .net, linq-to-entities

我有一个包含成员的消息列表：

> 文本 = m.Text，用户 = m.User，日期 = m.Date

此列表包括所有消息，例如

```
Text = "How Are You"
User = "Michael"
Date = "1/1/12"

Text = "Well Done"
User = "Michael"
Date = "2/1/12"

Text = "Who?"
User = "John"
Date = "1/1/12" 
```

我恳请从不会显示来自同一个人的多条消息的人那里获取最新消息，并且只提供最后一条消息，例如：

```
Text = "Well Done"
User = "Michael"
Date = "2/1/12"

Text = "Who?"
User = "John"
Date = "1/1/12" 
```

如你所见; 我想消除来自同一个人的先前消息。

我目前正在使用：

```
var messages = (from m in mList select new
{
Text = m.Text, 
User = m.User, 
Date = m.Date
}).ToList(); 
```

我应该在这个查询中添加什么来实现我的目标？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:06:27.257

```
var messages = (from m in mList select new
{
   Text = m.Text, 
   User = m.User, 
   Date = m.Date
})
.GroupBy(m => m.User)
.Select(g => g.OrderByDescending(m => m.Date).First())
.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:08:26.317

```
try{
    var messages = (from m in mList select new
    {
        Text = m.Text, 
        User = m.User, 
        Date = DateTime.Parse(m.Date)
    })
    .GroupBy(x => x.User).Select(x => x.First()).ToList();
}catch{} 
```

因为日期不是字符串可排序的......

# c# - Create View 后返回的 ViewModel 为 Empty

> ID：12086361
> 
> 赞同：2
> 
> 时间：2012-08-23T07:03:11.833
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我有一个创建视图：-

```
@model MvcCommons.ViewModels.CompositeViewModel
@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Article</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleTitle)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleTitle)
            @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleTitle)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleDate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleDate)
            @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleDate)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleText)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleText)
            @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleText)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleSource)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleSource)
            @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleSource)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ArticleViewModel.Article.CategoryID, "Category")
        </div>
        <div class="editor-field">
            @Html.DropDownList("CategoryID", String.Empty)
            @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.CategoryID)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

在控制器中我有以下内容： -

```
[HttpPost]
    public ActionResult Create(CompositeViewModel viewModel)
    {

        if (ModelState.IsValid)
        {
            unitOfWork.ArticleRepository.Insert(viewModel.ArticleViewModel.Article);
            unitOfWork.Save();
            return RedirectToAction("Index");
        }

        PopulateDropDownList(viewModel.ArticleViewModel.Article.CategoryID);
        return View(viewModel);

    } 
```

CompositeViewModel 如下：-

```
 public class CompositeViewModel
{
    public ImageViewModel ImageViewModel;
    public ArticleViewModel ArticleViewModel;
    public ProjectViewModel ProjectViewModel;

    public CompositeViewModel()
    {
        ImageViewModel = new ImageViewModel();
        ArticleViewModel = new ArticleViewModel();
        ProjectViewModel = new ProjectViewModel();
    }
} 
```

我的问题是，当我单击 Create 链接并进入 Controller 的 Action 时，CompositeViewModel viewModel 是空的。

谁能告诉我为什么，我似乎无法弄清楚为什么。

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:11:55.260

在模型中将现有字段设置为属性并且不要使用构造函数，因为在每个模型实例化时它将创建新成员：示例：

```
 public class CompositeViewModel
 {
    public ImageViewModel ImageViewModel { get; set; };
    public ArticleViewModel ArticleViewModel{ get; set; };
    public ProjectViewModel ProjectViewModel{ get; set; };
 } 
```

# android - FFMPEG for Android - 缺少 alsa 格式

> ID：12086364
> 
> 赞同：0
> 
> 时间：2012-08-23T07:03:24.337
> 
> 标签：android, android-ndk, ffmpeg, alsa

@rowntreerob 有一个使用默认文件设置成功构建的 android-ffmpeg 实现。

当您从 configure_ffmpeg 脚本中删除 disble-avdevice 和 disbale-devices 时，ndk-build 会失败。以下是错误信息：

> CP ffmpeg
> STRIP ffmpeg
> ~/android-ffmpeg/Project/jni
> ~/android-ffmpeg/Project/jni
> ~/android-ffmpeg/Project/jni
> jasongipsyblues@android-master:~/android-ffmpeg/Project/jni$ ndk-build
> 编译拇指：ffmpeg <= ffmpeg.c
> 编译拇指：ffmpeg <= cmdutils.c
> 可执行文件：ffmpeg
> /home/jasongipsyblues/android-ffmpeg/Project/obj/local/armeabi->v7a/objs/ffmpeg/ffmpeg/ffmpeg.o ：在函数“主”中：
> 
> /home/jasongipsyblues/android-ffmpeg/Project/jni/ffmpeg/ffmpeg.c:6130：未定义>对“avdevice_register_all”的引用
> 
> /home/jasongipsyblues/android-ffmpeg/Project/obj/local/armeabi->v7a/objs/ffmpeg/ffmpeg/cmdutils.o：在函数“print_all_libs_info”中：
> 
> /home/jasongipsyblues/android-ffmpeg/Project/jni/ffmpeg/cmdutils.c:639：未定义>对“avdevice_configuration”的引用
> 
> /home/jasongipsyblues/android-ffmpeg/Project/jni/ffmpeg/cmdutils.c:639：未定义>对“avdevice_version”
> collect2的引用：ld返回1退出状态
> 
> 制作：*** * [/home/jasongipsyblues/android-ffmpeg/Project/obj/local/armeabi-v7a/ffmpeg] >错误 1

请原谅我糟糕的格式化技巧，我仍然没有得到格式化的东西。看来删除对 avdevices 的引用肯定会影响 ndk-build 的使用。

所有 alsa 源文件都存在于 ffmpeg 代码中。如何以将 alsa 包含在格式中的方式构建 ffmpeg？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:10:20.213

我已经使用这个开源 [http://code.google.com/p/dolphin-player/](http://code.google.com/p/dolphin-player/)构建了 FFMPEG 。您正在获取 libffmpeg.so，然后在您的项目中使用它。

我不知道 alsa 是否包含在其中，但看起来很容易从他们的配置脚本中找到。

# objective-c - 如何为 Core Data 实现自定义映射模型？

> ID：12086365
> 
> 赞同：0
> 
> 时间：2012-08-23T07:03:38.203
> 
> 标签：objective-c, core-data, core-data-migration

我在核心数据模型中添加了一个新实体（站点），并与指向站点的旧实体（通知）建立了关系。我需要做的是用单个对象填充新实体（新对象的属性值现在在用户默认值中），然后将所有旧对象分配给表示关系的变量。

Site 对象上的通知变量是一对多且可选的。Notification 对象上的站点变量是一对一的并且是必需的。

我的新对象如下所示：

```
#import <Foundation/Foundation.h>

@interface Site : NSManagedObject

@property (nonatomic, retain) NSString *url;
@property (nonatomic, retain) NSString *accessKey;
@property (nonatomic, retain) NSString *secretKey;
@property (nonatomic, retain) NSSet *notifications;

@end 
```

旧对象有一个新的“站点”属性：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
#import "Site.h"

@interface Notification : NSManagedObject

@property (nonatomic, retain) NSNumber *created;
@property (nonatomic, retain) NSNumber *isRead;
@property (nonatomic, retain) NSString *message;
@property (nonatomic, retain) NSNumber *notificationId;
@property (nonatomic, retain) NSString *url;
@property (nonatomic, retain) NSString *urlMarkRead;
@property (nonatomic, retain) Site *site;

@end 
```

有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:02:55.197

您可以进行手动迁移。编写代码对您来说将是一些工作，但它会解决您的问题。

查看*核心数据版本控制和数据迁移编程指南*。在那里，您会找到*“迁移过程”*，其中包含一个名为“*自定义实体迁移策略*”的小节，该小节描述了您的情况。

您需要创建一个`NSEntityMigrationPolicy`.

# wpf - Powershell ShowUI 为复选框添加键盘快捷键

> ID：12086372
> 
> 赞同：0
> 
> 时间：2012-08-23T07:04:03.903
> 
> 标签：wpf, powershell

我现在有一个脚本，我从文件列表中制作了一堆复选框。我希望能够使用箭头键对它们进行排序（并将它们切换为选中或不选中），这样它会比单击更快。

```
$checkedFiles = StackPanel -ControlName 'Get-FilesToProcess' {                       
foreach($file in $files)
{
    New-CheckBox -Name $file ("Name" + $file)  -IsChecked true -On_GotKeyboardFocus     {$_.IsChecked = $false}

}          
New-Button "OK" -IsDefault  -On_Click { Get-ParentControl | Set-UIValue -PassThru |     Close-Control}      
} -show  

$checkedFiles 
```

我对 WPF 有点陌生，所以我在事件和方法中苦苦挣扎。我在 GotKeyboardFocus 的正确轨道上吗？

# java - 如何使用具有有效会话 ID 的 Rest Client 限制用户访问我们的服务？

> ID：12086375
> 
> 赞同：0
> 
> 时间：2012-08-23T07:04:04.640
> 
> 标签：java, jakarta-ee, servlets

我有一个应用程序，如果他尝试使用他的会话 ID 访问服务，我需要在其中重新限制对我的 Web 服务的访问？

我的意思是一旦他退出应用程序，但他可以使用 Rest Client 基于会话 ID 访问我们的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:06:23.863

添加身份验证过滤器检查用户是否在请求进入 REST servlet 之前登录

# macos - mac 上的 Safari HTTP 监视器（如 HttpFox）

> ID：12086378
> 
> 赞同：0
> 
> 时间：2012-08-23T07:04:19.883
> 
> 标签：macos, http, safari, httpfox

我正在为 Safari 寻找 HTTP 流量监视器/嗅探器（类似于 Firefox 的 HTTPFox），用于调试/开发目的。我正在使用 OSX。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:15:32.647

我没有看到 Safari 的扩展，但这里有一些你可以使用的 macOS 工具。

*   [Wireshark](https://www.wireshark.org/download.html)
    您可以查看 Wiresahark（免费，但功能齐全的数据包嗅探器）。仅适用于 HTTP 并不理想。
*   tcpdump（[nixCraft 文章](https://www.cyberciti.biz/faq/howto-monitor-sniff-apache-http-packets/)）
    它是命令行（免费）。
*   [Cocoa Packet Analyzer](http://www.tastycocoabytes.com/cpa/)
    它是免费的，但它更像 Wireshark。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T21:55:10.543

最好的工具之一是[Fiddler](http://www.telerik.com/fiddler)，尽管它目前仅适用于[Mac 和 Linux 系统的 alpha 版本](http://fiddler.wikidot.com/mono)。另一个不错的 Mac OSX 工具，虽然不是免费的，但我过去发现它很方便，是[Charles Web Debugging Proxy](http://www.charlesproxy.com/)。另外，考虑探索现代版 Safari 中内置的调试工具；它们非常强大，包含大量的网络调试信息。

（另见[这个问题](https://stackoverflow.com/questions/1680381/are-there-any-http-https-interception-tools-like-fiddler-for-mac-os-x)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T10:25:42.863

我已经使用[paros 代理](https://sourceforge.net/projects/paros/)来嗅探所有的 http 连接。我将 Safari 配置为使用 paros 进行所有连接并检查流量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T12:45:30.627

我使用[Captor](https://itunes.apple.com/us/app/captor-http-analyzer/id1100708036)在 mac 上捕获 HTTPS 流量，您也可以捕获 safari 流量。它是一个原生APP。您可以从 Apple Mac Store 下载它。

# asp.net-mvc-3 - 找不到 IIS 7 资源 MVC3

> ID：12086379
> 
> 赞同：0
> 
> 时间：2012-08-23T07:04:32.817
> 
> 标签：asp.net-mvc-3

大家好，我正在尝试通过 ISS7 发布我的网站。我已经部署了所有必要的 dll 文件，但我得到“找不到资源”。请问你能帮帮我吗

```
Server Error in '/WebCity' Application.
--------------------------------------------------------------------------------

The resource cannot be found. 
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

Requested URL: /WebCity/Views/Home/Index.cshtml

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:07:36.537

永远不应将 .cshtml 文件作为 URL 请求。

相反，请求一个映射到控制器操作的路由（大概是呈现您试图定位的 .cshtml 视图的路由），例如

> /WebCity/首页/索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:15:34.580

如果您查看`Global.ascx`文件，您将看到默认路由设置，例如

```
 routes.MapRoute(
              "default",
              "{controller}/{action}/{id}",
              new { action = "Index", id = "" }
             )}
            ); 
```

因此在您的情况下请求的 URL 看起来像

> ```
> /Home/Index
>          ^ Controller Action
>  ^ Controller 
> ```

如果您的应用程序部署在本地主机上，那么它可能看起来像

```
http://localhost/Home 
```

或者

```
http://localhost/Home/Index 
```

# jquery - jquery 移动数据占位符

> ID：12086386
> 
> 赞同：0
> 
> 时间：2012-08-23T07:04:52.820
> 
> 标签：jquery, jquery-mobile

我想用 jQuery mobile 做一个多选菜单，我更喜欢原生菜单，所以设置 data-native-menu="true"。

当我为选择菜单设置数据占位符文本时，我发现可以选择数据占位符。

我可以避免选择数据占位符吗？

顺便说一句，我的设备是三星 Galaxy S3。

谢谢。

示例：http: [//jsfiddle.net/HGBQc/62/](http://jsfiddle.net/HGBQc/62/)

截图：http: [//imgur.com/yYImZ](http://imgur.com/yYImZ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:10:13.767

根据[http://forum.jquery.com/topic/placeholder-in](http://forum.jquery.com/topic/placeholder-in)，您只能将占位符与 data-native-menu="false" 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:33:24.733

您使用的是什么版本的 Jquery 手机？如果您使用的是 1.1.1，则可以尝试以下方法之一：

*   提供没有值属性（或空值属性）的选项
*   提供一个没有文本节点的选项
*   提供一个带有 data-placeholder="true" 属性的选项 - 在标签上而不是 . （这允许您使用具有值和文本节点的选项作为占位符选项）。

Jquery mobile 自动将这些呈现为菜单标题而不是选项

# php - SF2.1 RC1 - 没有要处理的元数据类

> ID：12086390
> 
> 赞同：4
> 
> 时间：2012-08-23T07:05:04.110
> 
> 标签：php, doctrine-orm, symfony-2.1

我已经用 composer 完成了 Symfony 2 的全新安装，并通过`app/console`. 我还创建了一个数据库并通过`app/console`.

所以现在我执行`app/console doctrine:schema:create`创建数据库方案。不幸的是，我收到以下错误：

```
No Metadata Classes to process. 
```

我仔细检查了命名空间，一切似乎都是正确的，尤其是因为它都是生成的代码。我还检查了`/resources/config/doctrine/*bundlename*.orm.php`它是否存在，它确实存在。

我是否必须以某种方式重新配置 Doctrine？我在这里想念什么？我已经多次删除缓存没有任何运气。我尝试了自定义映射`config.yml`，没有任何结果。

运行 Xampp 1.8.0、PHP 5.4.4、Apache 2.4.2、Windows 7、Symfony 2.1 RC1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:38:56.777

看起来您已正确配置了您的驱动程序选项，或者实体文件夹（或 YAML / XML 映射）中没有实体

或者您忘记在实体类文档块上方添加@entity

教义配置信息： [http ://docs.doctrine-project.org/en/latest/reference/configuration.html](http://docs.doctrine-project.org/en/latest/reference/configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-07T19:52:17.650

在您的实体之上，您必须使用 Doctrine：

```
namespace Osiris\BlogBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Blog
 *
 * @ORM\Entity
 * @ORM\Table(name="blog")
 */
class Blog {
   ...
} 
```

然后运行 ​​php app/console dictionary:schema:update --dump-sql

# gwt - GWT - 增加和减少字体大小

> ID：12086391
> 
> 赞同：0
> 
> 时间：2012-08-23T07:05:14.663
> 
> 标签：gwt, font-size, gwt2

在 GWT Web 应用程序中，我想让我的用户有机会减少或增加当前页面的字体大小。

如果用户单击 + 按钮，是否可以在 GWT 中执行此操作：

```
body { font-size: 150%; } 
```

为此，如果用户单击 - 按钮：

```
body { font-size: 50%; } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:31:40.217

这适用于 CSS 内联解决方案。替换`CLASSNAMEHERE`以适合您的需要，或将其作为函数的参数传递。

```
private static native void changeFontSize(int inc)/*-{
        {
            var p = $doc.getElementsByClassName('CLASSNAMEHERE');
            for (n = 0; n < p.length; n++) {
                if (p[n].style.fontSize) {
                    var size = parseInt(p[n].style.fontSize.replace("px", ""));
                } else {
                    var size = 11;
                }
                p[n].style.fontSize = size + inc + 'px';
            }
        }
    }-*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:11:59.897

请尝试以下操作：

```
Document.get().setStyleAttribute("font-size", "150%"); 
```

如果您需要修改特定样式类的样式，那么您应该先以某种方式查询它们。（以原生 JS 或[http://code.google.com/p/gwtquery/](http://code.google.com/p/gwtquery/)为例）然后迭代它们并修改样式属性

```
DOM.setStyleAttribute(someGwtElement.getElement(), "font-size", "150%"); 
```

# visual-studio-2010 - 无法连接到 Microsoft Visual Studio 远程调试监视器

> ID：12086392
> 
> 赞同：1
> 
> 时间：2012-08-23T07:05:16.103
> 
> 标签：visual-studio-2010, remote-debugging, attach-to-process

我想在虚拟机上附加到从 Visual Studio 2010 到 Windows Server 2003 的过程，名称和密码相同。在虚拟机上，我有远程调试监视器版本 10.0.30319.1 当我尝试附加到进程时，它给了我一个错误： ![在此处输入图像描述](../Images/9d8ee4793fa4f9a3f5475768f5e4ad42.png)

# javascript - 在没有水平滚动条的情况下垂直包装 webview 中的 html 内容？

> ID：12086393
> 
> 赞同：0
> 
> 时间：2012-08-23T07:05:16.590
> 
> 标签：javascript, android, html, css, webview

我正在使用 android 中的 HTML 页面阅读器，并且必须提供类似电子书阅读器的功能，在这里我面临一个问题，所以请告诉我如何将内容包装在 web-view 的宽度内（我正在使用填充- XML 中的父级）缩放或缩放，即内容应增加高度（垂直）而不是宽度（无水平滚动条），因此内容应向下流动，宽度将始终固定为相同，即 700 dp

> > 在 android web-view 中，我想通过编程来缩放页面，但我什么也没得到如果我选择它，那么所有页面都作为一个页面连接在一起，并且所有滚动都在此处禁用。在这里我有一个单击下一个按钮，我将向下滚动，所以如果我放大重新流动，那么内容应该总是换行并且应该在网络视图高度内可见，所以请告诉我解决此问题的任何解决方案或步骤。

在这里增加缩放后，内容超出了网络视图宽度并且不可见，因为没有水平滚动

# java - 在 Cassandra 中复制列族的最快方法是什么？

> ID：12086395
> 
> 赞同：2
> 
> 时间：2012-08-23T07:05:25.313
> 
> 标签：java, jakarta-ee, cassandra, hector

我想使用 Hector（或任何其他客户端）在 Cassandra 中创建另一个名称的 Column Family 副本，有没有最快的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:27:19.463

cassandra hadoop 集成读取整个列族以用作 map reduce 作业的输入；它还可以批量输出到列族。阅读`org.apache.cassandra.hadoop`包中的代码以了解该做什么。

对于读取，它会确定哪些令牌位于哪些节点上，然后使用该令牌范围执行[get_range_slice](http://wiki.apache.org/cassandra/API#get_range_slices)（它也将令牌范围拆分为可管理的块）。对于写它（或者如果你使用 Bulk* 类可以做）通过构造一个 SSTable 然后将其上传到 cassandra 与上述解决方案类似的事情。

我怀疑上面使用 sstable2json 的其他答案会更加有效，但这会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T17:49:55.113

您可以使用 sstable2json 将其读出，然后使用 json2sstable 将其写回作为您的新 CF。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T18:30:06.787

我的回答将涉及逐行迭代，你说你已经在做。我对此的唯一改进是使用 KeySlice 来获取多个键，因此每个请求获取多行。

# mysql - 错误 - SELECT GROUP_CONCAT 如何在子查询中返回多于 1 行？

> ID：12086400
> 
> 赞同：1
> 
> 时间：2012-08-23T07:05:39.027
> 
> 标签：mysql, subquery, group-concat

我有一个问题，但我似乎还没有找到答案（我已经解决了真正的问题）。

我有一个相当大的查询，可以正常工作.. 3-4 个月，然后在通过添加项目并在应用程序中工作进行了一些更改后，带有 group_concat 的子查询返回了超过 1 行，我认为 group_concat 的重点是 concat 1行中的所有项目？！

简化的查询是这样的：

```
(SELECT * FROM (SELECT id,
             (other_selects),
    (SELECT GROUP_CONCAT(' ',IF(user_nume IS NOT NULL, (
                    SELECT CONCAT(user_nume,' ',user_prenume)
                    FROM table
                    WHERE u2.user_id = cal_id_user
                    AND i1.cai_id = cal_id_imobil
                    ), (
                        SELECT user_company
                        FROM table
                        WHERE u2.user_id = cal_id_user
                        AND i1.cai_id = cal_id_imobil
                        ) ))
    FROM table2 u2) as locatari,
    ( other selects )   
    .........................
    FROM table3 i1
    ...... JOINS ............
GROUP BY cai_id
ORDER BY cai_id DESC)t" ;) 
```

这个 subqery 返回给我超过 1 行，我不明白如何。

我不得不提到我删除了表名，JOINS 或其他 sintax 错误没有问题。

这个问题的解决方案是添加一个

```
GROUP BY cal_id_user 
```

在 IF 条件内的两个 SELECTS 中。

有人可以向我解释这个问题是怎么可能的吗？不幸的是，我没有找到此类问题的确切答案。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:19:49.747

问题是 MySQL 允许您在没有 GROUP BY 子句的情况下使用聚合函数，这太疯狂了。如果没有 GROUP BY，您的查询可以在 MySQL 中运行，但这并不意味着它是正确的。（在 MSSQL 中试试这个，你会看到。）

# javascript - Raphael.JS + 用图像填充路径

> ID：12086417
> 
> 赞同：1
> 
> 时间：2012-08-23T07:06:43.447
> 
> 标签：javascript, canvas, svg, raphael

这是我第一次使用 Raphael.js，所以当你看到乱七八糟的代码时请记住这一点 :)

我正在尝试做的事情：

创建一个“可移动”立方体（带有 6 个“面”）。每张脸都应该用特定的图像填充。

到目前为止一切正常，但有一件事困扰着我，我找不到“修复”它，但让我首先向您展示小提琴和相关图像：

小提琴：http: [//jsfiddle.net/YWmpz/1/](http://jsfiddle.net/YWmpz/1/)

图片：http: [//i48.tinypic.com/2u8f79u.jpg](http://i48.tinypic.com/2u8f79u.jpg)

困扰我的问题是，当您移动立方体时，您会看到图像移动或以某种方式奇怪地缩放，因此灰色边框（在图像中绘制）看起来很混乱。我来给你展示：

[http://i47.tinypic.com/33xzyhd.jpg](http://i47.tinypic.com/33xzyhd.jpg)

[http://i46.tinypic.com/2vt6xl5.jpg](http://i46.tinypic.com/2vt6xl5.jpg)

我希望你通过看到灰色边框的图片明白我的意思。

我的猜测是它可以通过某种方式应用`position:fixed`或固定`width`/来解决`height`，但我找不到任何东西。

# java - 使用发送重定向到 JSP

> ID：12086420
> 
> 赞同：0
> 
> 时间：2012-08-23T07:06:49.573
> 
> 标签：java, jsp, jakarta-ee, servlets

重定向到 jsp 时出现问题。我已将我的 servlet 代码放在下面。而且我也放了错误日志。任何人都可以帮我解决这个问题。如果您需要更多详细信息，请在下面评论。我在其他 servlet 中做了同样的事情它正在工作。

```
 public class DoctorServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        String sDocId=request.getParameter("doctorId");
        Integer dId=Integer.parseInt(sDocId);
        String speciality=request.getParameter("speciality");
        String experience=request.getParameter("experience");
        String qualification=request.getParameter("qualification");
        String sempId=request.getParameter("employeeId");
        Integer empId=Integer.parseInt(sempId);
        String action=request.getParameter("method");

        Doctors d=new Doctors();

        if(action.equalsIgnoreCase("add")){

            d.setDocId(dId);
            d.setEmpId(empId);
            d.setExp(experience);
            d.setSumOfQn(qualification);
            d.setSpeciality(speciality);
            try {
                boolean result=new Doctors().insertDoctor(d);
                if(result==true){

                    request.setAttribute("add","sucess");
                }
                  request.getRequestDispatcher("doctor_result.jsp").forward(request, response);
                response.sendRedirect("doctor_result.jsp");

            } catch (SQLException ex) {
                Logger.getLogger(DoctorServlet.class.getName()).log(Level.SEVERE, null, ex);
            }

        }

    }

} 
```

* * *

```
 Aug 23, 2012 12:29:50 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [DoctorServlet] in context with path [/AsiaHospital] threw exception
java.lang.IllegalStateException: Cannot call sendRedirect() after the response has been committed
    at org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:483)
    at javax.servlet.http.HttpServletResponseWrapper.sendRedirect(HttpServletResponseWrapper.java:138)
    at com.asiahospital.servlet.DoctorServlet.doPost(DoctorServlet.java:52)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T07:09:14.733

您正在转发到其他一些 JSP，因此它会提交响应

```
request.getRequestDispatcher("doctor_result.jsp").forward(request, response); 
```

现在您正在尝试发回已经提交的响应

```
response.sendRedirect("doctor_result.jsp"); 
```

这是无效的

您应该转发或重定向相同的响应实例

* * *

**也可以看看**

*   [转发和重定向的区别](https://stackoverflow.com/questions/8646650/difference-between-forwarding-and-redirection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:09:29.913

它可能是由类路径污染引起的。确保 /WEB-INF/lib 不包含类似 jsp-api-*.jar 的内容。

# sql - 这是对资源的良好 SQL 查询吗？

> ID：12086421
> 
> 赞同：0
> 
> 时间：2012-08-23T07:06:52.270
> 
> 标签：sql

我有这些 sql 查询（我使用 codeigniter db 类）：

```
 $query = $this->db->select("a.title AS articles_title, 
                    a.content AS articles_content,
                    a.excerpt AS articles_excerpt,
                    a.slug AS articles_slug,
                    a.views AS articles_views,
                    a.views AS articles_views,
                    CONCAT(up.first_name, ' ', up.last_name) AS articles_author,
                    DATE_FORMAT(a.created, '%T %d.%m.%Y') AS articles_created, 
                    (SELECT IF(ROUND(AVG(av.vote),1), ROUND(AVG(av.vote),1), 0)  FROM articles_votes av WHERE a.id = av.article_id) AS articles_votes,
                    (SELECT COUNT(ac.id) FROM articles_comments ac WHERE a.id = ac.article_id) AS articles_totalcomments", FALSE)
            ->from('articles a')
            ->join('user_profiles up', 'a.author_id = up.user_id')
            ->where('page_id', $page_id)
            ->order_by("a.$ordering")
            ->get(); 
```

对服务器资源和速度有好处吗？或者我应该创建另一个计算投票和评论的函数，它将计算所有评论和平均投票，然后将其添加到文章数组中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:31:27.440

使用的资源和查询计划的效率取决于底层数据库，当然还有生成的实际 SQL。最好使用 SQL 分析工具来确保您了解查询的实际结果。

那就是说。有时您可以通过以下方式获得更好的性能：

```
SELECT 
   a.student_id, 
   a.name, 
   (select sum(s.score) from scores s where s.student_id = a.student_id) as total_score
FROM students a 
```

对于这样的事情：

```
SELECT
   a.student_id,
   a.name,
   tot.score
FROM students a
JOIN (
   SELECT student_id, 
          sum(score)
   FROM scores 
   GROUP BY student_id
) as tot ON tot.student_id = a.student_id 
```

如果您的列表达式涉及对未索引列的查询，则每次运行时可能需要进行全表扫描。在我的示例中，我在连接结果中包含一个键，因此查询完成一次，然后您可以在外部选择中获取它。

希望有帮助。

# jsf - JSF 2.0 打开 PDF 报告（不保存）

> ID：12086425
> 
> 赞同：0
> 
> 时间：2012-08-23T07:07:03.213
> 
> 标签：jsf, primefaces, jasper-reports

我正在使用*PrimeFaces*。

我有一个包含命令链接 pdf 生成的数据表

当我单击此链接时，我想在新浏览器中打开*pdf 。*

我的生成报告代码为*PDF*：

```
HttpServletResponse response = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
String reportPath = FacesContext.getCurrentInstance().getExternalContext().getRealPath("/report/personReport.jrxml");
JasperDesign jasperDesign = JRXmlLoader.load(reportPath);
JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);

ArrayList<PersonReportBean> arrayList = new ArrayList<PersonReportBean>();
arrayList.add(bean); // here bean populate with all data
JRBeanCollectionDataSource collectionDataSource = new JRBeanCollectionDataSource(arrayList);
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, new HashMap<String, Object>(), collectionDataSource);
response.setContentType("application/pdf");
JRPdfExporter exporter = new JRPdfExporter();
exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, response.getOutputStream());
exporter.exportReport();
FacesContext.getCurrentInstance().responseComplete(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:29:47.320

你可以试试这个：

```
JasperExportManager.exportReportToPdfStream(jasperPrint,response.getOutputStream()); 
```

代替：

```
JRPdfExporter exporter = new JRPdfExporter();   
exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, response.getOutputStream());   
exporter.exportReport(); 
```

# html - 这个奇怪的点在 Firefox 中意味着什么？

> ID：12086428
> 
> 赞同：0
> 
> 时间：2012-08-23T07:07:14.953
> 
> 标签：html, wordpress, firefox

我在 WordPress 中自定义了一些小部件，但不是自定义小部件，这个

![](../Images/57438431d81babe94cba1863d23baba9.png)

黑点来了。我检查了源代码，但没有与这个点相关的代码。但在 Chrome 中，每件事都按预期出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:11:23.920

使用 UL 标记文本？然后使用使用 css`list-style: none`到 UL，否则使用代码更新您的帖子

# javascript - 向显示字段添加点击事件

> ID：12086434
> 
> 赞同：1
> 
> 时间：2012-08-23T07:07:45.233
> 
> 标签：javascript, extjs4.1

我想在我的 extjs 应用程序中进行内联编辑：我创建了一个简单的表单，其中充满了显示字段，旁边有一个小图标，表示它们是可编辑的。我希望它们成为点击时的实际字段。

我在[这里](https://stackoverflow.com/questions/8330088/switch-from-textfield-to-displayfield-with-extjs4)看到了类似的问题，但没有答案。

这是我的表格：

```
var editPic = "<img src='https://s3.amazonaws.com/bzimages/pencil.png' alt='edit' height='24' width='24'/>";

Ext.define('BM.view.test.Edit', {
    extend: 'Ext.form.Panel',
    alias: 'widget.test-edit',

    layout: 'anchor',
    title: 'Edit Test',
    defaultType: 'displayfield',

//    handleFieldChanged: function() {
//        console.log('click el');
//    },
//
//    listeners: {
//        add: function(me, component, index) {
////            if( component.isFormField ) {
//                component.on('click', me.handleFieldChanged, me);
////            }
//        }
//    },

    items: [
        {name: 'id', hidden: true},
        {
            name: 'name',
            fieldLabel: 'Name',
            afterSubTpl: editPic,
            cls: 'editable',
            listeners: [
                {
                    element: 'element',
                    delegate: '.editable',
                    event: 'click',
                    fn: function() {
                        console.log('Edit Now!');
                    }
                }
            ]
        },

        {name: 'status', fieldLabel: 'Status'}
        ]
}); 
```

这是我的控制器内部的控件：

```
 this.control({
        'test-edit': {
            afterrender: this.beenRendered
        },
        'test-edit > displayfield': {
            click: this.updateTestField
        }
    });

updateTestField: function(button) {
    console.log('field clicked');
},

beenRendered: function() {
        console.log('Rendered!'); // Getting here
        var myDiv = Ext.get(".editable");  // Doesn't find anything
        myDiv.on("click",handleClick); 

    function handleClick(e, t){ // e is not a standard event object, it is a Ext.EventObject
        e.preventDefault();
        console.log('clicked');
    }

}, 
```

据我了解，字段没有监听点击事件。我该怎么做？正如您在上面看到的，我尝试了很多方法。afterrender 事件效果很好。

也许我应该以某种方式用一个监视点击事件的容器封装这些字段？

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:35:44.897

使用`getEl()`方法定义字段。

```
df.getEl().on('click', function(){}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:38:07.030

您可以使用该`el`属性：

```
..
beenRendered: function(df) {
        console.log('Rendered!'); // Getting here
        var el = df.el;
        el.on("click",handleClick); 

    function handleClick(e, t){
        e.preventDefault();
        console.log('clicked');
    }

} 
```

el 是 Ext.Element（html dom 的包装器）w/c 的一个实例，然后您可以使用它来处理事件。

# iphone - iPhone 应用程序中的多种语言选择选项

> ID：12086446
> 
> 赞同：0
> 
> 时间：2012-08-23T07:08:29.820
> 
> 标签：iphone, objective-c, ios, xcode

我发现了一些类似的问题。但是问题和答案都没有澄清我的问题。

我想实现一个选项，用户可以从中选择他/她在 iPhone 应用程序中选择的语言。（本地化不是我需要的东西）选择语言后，应用程序应翻译为所选语言。

如何实施？

我希望用户选择语言，而不是通过本地化使用系统语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:21:10.070

首先，您需要创建语言文件（strings/xml/plist ... 取决于您）其次，为用户选择语言制作一个屏幕，将选择的语言信息保存到 NSUserDefaults。

最后，编写一个检查NSUserDefault中保存的语言并读取strings/xml/plist的方法。

谷歌更多，执行这些步骤，并发布您在这里工作时遇到的问题，我会提供详细帮助:)

# python - Windows 上 Python 中的自重启脚本

> ID：12086447
> 
> 赞同：0
> 
> 时间：2012-08-23T07:08:34.663
> 
> 标签：python

我有一个脚本与外部服务器通信，有时会抛出错误并破坏我的程序。我试图解决它，但除非我手动重新启动程序，否则它似乎一直在抛出错误。

在 Windows 上有什么方法可以让 python 脚本在出错时自行重启？每当我搜索这些类型的东西时，我都会看到这个 ox.exec，但似乎无法弄清楚如何让它工作

```
In my main code: 
except:
    print "Unexpected error:", sys.exc_info()[0]
    logout()

def logout():
gv.logout()
time.sleep(20)
login()

def login():
try:
    gv.login(settings.user,settings.passw)
    textcheck()
except:
    print "Unexpected error:", sys.exc_info()[0]
    time.sleep(30)
    login() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:23:31.220

您可以运行另一个程序来检查它是否处于活动状态，例如 python 程序每分钟更新一次心跳文件，并且您的守护进程检查文件是否上次修改时间以查看另一端是否处于活动状态。您也可以使用[WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394599%28v=vs.85%29.aspx)，只需编写一个查询

```
select * from win32_process where xxx 
```

检查python脚本是否正在运行。

# python - Django：密码如何存储在 django auth_user 表中

> ID：12086450
> 
> 赞同：4
> 
> 时间：2012-08-23T07:08:53.680
> 
> 标签：python, django

我正在自定义 django 用户模块并添加一些额外的字段

我的模型看起来像

```
class Drinker(models.Model):
    user = models.OneToOneField(User)
    birthday = models.DateField()
    name     = models.CharField(max_length = 100)

    def __unicode__(self):
        return self.name 
```

这是我的注册视图

```
def DrinkerRegistration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == "POST":
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create(username = form.cleaned_data['username'],email = form.cleaned_data['email'],password = form.cleaned_data['password'])
            user.save()
            drinker = Drinker(name = form.cleaned_data['name'],birthday = form.cleaned_data['birthday'],user=user)
            drinker.save()
            return HttpResponseRedirect('/profile/')
    else:
        form = RegistrationForm()
        context = {'form':form}
        return render_to_response('register.html',context,context_instance = RequestContext(request)) 
```

现在我的问题是当用户在我的 auth_user 表中注册时，密码存储在计划文本中，即导致

```
Unknown password hashing algorithm '123'. Did you specify it in the PASSWORD_HASHERS setting? 
```

登录时出错

但是对于超级用户的密码在 auth_user 表中是 SHA1 格式（我不确定）并且他们能够登录

请建议我如何在这里散列密码字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:28:26.217

不要使用`User.objects.create()`，使用[`User.objects.create_user()`](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.models.UserManager.create_user)- 它会使用正确的算法散列提供的密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:29:17.160

您应该让 User.set_password 对密码进行哈希处理并将其存储为适当的格式，或者使用其他答案中提到的适当的管理器功能。

基本上，您从未要求 Django 对密码进行哈希处理，并尝试将纯文本放入您的数据库中。这样做时，没有满足 Django 预期的格式（哈希盐 hashed_pa​​ss），因此出现错误。

更好的是，您的应用程序的这些部分最好使用可重用的应用程序（例如 Django 注册）来完成。

然后，您可以在用户注册（创建）后使用信号创建饮酒者配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:29:23.557

您需要使用[`create_user()`](https://docs.djangoproject.com/en/dev/topics/auth/#creating-users)帮助函数，它将正确设置密码。

# html - 在 li 元素周围包裹锚标记

> ID：12086453
> 
> 赞同：29
> 
> 时间：2012-08-23T07:09:10.897
> 
> 标签：html, css

我正在创建导航菜单。我想使用 css 以便将锚标签包裹在 li 元素周围，但锚标签在 li 元素内。

这是html

```
<ul>
    <li><a href="">Uutiset</a></li>
    <li><a href="">Foorumi</a></li>
    <li><a href="">Kauppa</a></li>
    <li><a href="">Messut</a></li>
    <li><a href="">Asiakaspalvelu</a></li>
    <li><a href="">Nakoislehti</a></li>
    <li><a href="">Nae meidat</a></li>
</ul> 
```

这是我的少 css

```
ul {
  list-style-type: none;
  padding: 0;
  margin: 0;
  li {
    padding: 2% 4%;
    border: 1px solid green;
    a {
        text-decoration: none;
        display: block;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-23T07:11:54.113

a 中唯一允许的合法元素`<ul>`是`<li>`. 你不能在`<li>`. 在 HTML5 中也是如此，其中锚点可以环绕其他块级元素。

您在 CSS 中所拥有的几乎就在那里，只需添加：

```
a {
     text-decoration: none;
     display: block;
     width: 100%;
     height: 100%;
} 
```

你的锚将填满整个空间`<li>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T07:18:59.933

不要在 中使用填充`li`，而是使用`line-height`锚文本。这将使它覆盖`li`元素的整个高度。

在这里，看看这个[**例子**](http://jsfiddle.net/seSPs/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T07:12:41.017

您不能使 li 可点击，但您可以按照此处的建议将 a-link 扩展为 li 的大小：[https ://stackoverflow.com/a/1121754/1068495](https://stackoverflow.com/a/1121754/1068495)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T07:17:47.873

试试这个，给填充锚而不是 li。不能守在里外。一定要设计你的锚而不是 li。让 li 像一个包装器一样行动。

```
ul {
  list-style-type: none;
  padding: 0;
  margin: 0;
  li {
    a {
        padding: 2% 4%;
        border: 1px solid green;
        text-decoration: none;
        display: block;
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-19T15:21:48.137

在 2022 年撰写本文时，将锚标签或任何标签放在列表项周围是完全有效的。尽管这可能被认为是不寻常或不好的做法。

从规格：[https ://html.spec.whatwg.org/multipage/grouping-content.html#the-li-element](https://html.spec.whatwg.org/multipage/grouping-content.html#the-li-element)

> 'display' 的计算值为 'list-item' 的任何元素都有一个列表所有者，其确定如下：

> 如果元素没有被渲染，则返回 null；该元素没有列表所有者。

> 让祖先成为元素的父元素。

> 如果元素具有 ol、ul 或 menu 祖先，则将祖先设置为最接近的此类祖先元素。

<li> 标记的“所有者”不是由其直接父级确定，而是由最近的 ol、ul 或菜单祖先确定。

在其周围放置其他标签不应出现任何问题，可访问性或其他问题。只要它在某个级别的 ol、ul 或菜单中，它就会找到它的所有者。这是使整个 <li> 容器（包括项目符号或数字）可单击的唯一方法。

```
<ol>
  <li>
    <a href="example.com/1">This is fine.</a>
   </li>
  <a href="example.com/2">
    <li>This link is the entire container.</li>
  </a>
  <a href="example.com/3">
    <div>
      <div>
        <div>
          <li>This has four parents before the &lt;ol.&gt</li>
        </div>
      </div>
    </div>
  </a>
</ol>
```

# .net - 是否可以仅回滚嵌套事务以进行自动测试

> ID：12086454
> 
> 赞同：2
> 
> 时间：2012-08-23T07:09:12.287
> 
> 标签：.net, sql-server, unit-testing, transactionscope

考虑以下代码：

```
ExecuteSQL("UPDATE ...");

using (var t = new TransactionScope())
{
    ExecuteSQL("UPDATE ...");

    if (SomeCondition)
        t.Commit();
    else
        t.Rollback();
}

var result = ExecuteSQL("SELECT ..."); 
```

*然后我们使用外部TransactionScope*编写一个自动测试，以在每次测试后回滚更改：

```
[TestInitialize]
public override void Initialize()
{
    _transaction = new TransactionScope();
}

[TestCleanup]
public override void Cleanup()
{
    _transaction.Dispose();
} 
```

当*SomeCondition*为*false*时，不可能为案例编写正确的测试。因为嵌套事务 ROLLBACK 回滚整个外部事务，包括第一个 UPDATE 语句。

你知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:15:39.320

不可以。您可以回滚到保存点，请参阅[异常处理和嵌套事务](http://rusanu.com/2009/06/11/exception-handling-and-nested-transactions/)，但这与您想要的不同。

你*真正*想要达到的目标是什么？测试应在与生产类似的条件下进行。在内部事务中添加超级事务和测试方法与系统在生产中的行为方式完全不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:15:26.947

SQL Server 并不真正支持嵌套事务。它只有一个事务已经看到了多个`start transaction`语句，并且`commit transaction`在它真正提交之前需要多个语句。

作为一种解决方法，不要嵌套事务。可以在不同的连接上同时运行两个事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:16:33.477

未命名的回滚将所有操作回滚到堆栈顶部。

唯一可以帮助的是使用命名的[保存交易](http://msdn.microsoft.com/en-us/library/ms188378.aspx)

**警告**：不适用于分布式事务。

# http - GStreamer 网络摄像头 mpeg4 通过 http 直播

> ID：12086455
> 
> 赞同：2
> 
> 时间：2012-08-23T07:09:12.377
> 
> 标签：http, webcam, gstreamer, mpeg-4

我想知道如何在包含 H.264/AVC 视频的 mpeg-4 中对来自网络摄像头的视频流进行编码，然后使用 gstreamer 通过 http 进行流式传输？网络摄像头只是一个简单的 USB 2.0 网络摄像头。我发现的唯一示例是通过 rtsp 流式传输 mpeg-4，但我使用的客户端不知道 rtsp。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:49:46.387

Gstreamer 还有一个 http 客户端：souphttpclientsink，它可以对您想要流式传输的内容进行 http put。接收服务器必须能够处理 http put。

```
gst-launch videotestsrc ! x264enc ! souphttpclientsink location=<put the server location here> 
```

以上对我有用。用您的捕获替换testsrc，您需要一个可以接受该位置的http的服务器。对souphttpclientsink进行gst检查以获取更多详细信息

# php - php querystring 默认在 url 中返回当前月份的开始日期和结束日期

> ID：12086472
> 
> 赞同：1
> 
> 时间：2012-08-23T07:10:45.453
> 
> 标签：php

我有一个带有两个参数 @startdate 和 @enddate 的存储过程

我有一个如下网址

'http://localhost/filename.php?startdate='01-08-2012'&enddate='31-08-2012'

就目前而言，每个月我都必须手动更改它以获取本月的开始日期和结束日期。例如，对于 9 月，我将不得不更改 '01-09-2012' '31-09-2012'

我正在寻找 php 代码或函数，它将自动将每个月的第一天作为 startdate，并将该月的最后一天作为 url 中的 enddate？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:15:27.047

第一天：

```
date('Y-m-01'); //current year and month 
```

最后一天：

```
date("Y-m-t"); //current year and month and t means the last day of this month 
```

根据您的需要更改格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:18:23.027

上个月的第一天和最后一天：

```
$current_year = date('Y');
$current_month = date('m');
$lastdateofmonth = date('t', $current_month);
$startdate = "01-$current_month-$current_year";
$enddate = "$lastdateofmonth-$current_month-$current_year"; 
```

# php - 从 ssh2_exec 获取结果

> ID：12086474
> 
> 赞同：16
> 
> 时间：2012-08-23T07:10:56.077
> 
> 标签：php

我有一个与服务器建立 SSH 连接的脚本（这工作正常）。现在我想执行一个命令并回显我从这个命令得到的结果。

所以我这样做：

```
$stream = ssh2_exec($conn, 'php -v'); 
```

但我无法让它显示响应，`var_dump`返回`resource(3) of type (stream)`。

我曾尝试使用：

```
$stream = ssh2_exec($conn, 'php -v');
$stream_out = ssh2_fetch_stream($stream, SSH2_STREAM_STDERR); 
```

但`$stream_out`返回一个空字符串。

那么是否可以将响应打印为脚本的结果？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-23T15:12:20.397

好的，我找到了解决方案，所以我将其发布以供将来参考

因此，要输出 ssh2_exec 执行的命令的结果，您应该使用以下代码设置

```
$stream = ssh2_exec($conn, 'php -v');
stream_set_blocking($stream, true);
$stream_out = ssh2_fetch_stream($stream, SSH2_STREAM_STDIO);
echo stream_get_contents($stream_out); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:20:05.000

添加：

```
echo stream_get_contents($stream); 
```

结果是 STREAM，你必须先获取它的内容......

stream-fetch 仅用于获取备用子流...（afaik）

# linux - 我需要将 javac 切换到版本 7 吗？

> ID：12086477
> 
> 赞同：0
> 
> 时间：2012-08-23T07:11:10.270
> 
> 标签：linux, java-7

我`/usr/bin/java`在 ubuntu 12.04 中设置了 Java 7 来替换默认的 Java 6。

我对`/usr/bin/javaws`.

`/usr/bin/javac`为了完全一致，我是否也需要这样做？由于某种原因`/usr/bin/javac`，默认情况下不存在。运行`javac -verion`只会产生一个我用来安装它的建议，`apt-get`但犹豫不决地得出它没有安装的结论。当然，如果我使用`javac`，我希望保持一致并拥有版本 7，但我不确定我是否使用`javac`.

我使用 Eclipse 创建`.jar`文件，但不确定 Eclipse 内部发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:15:15.347

Eclipse 使用它自己的 Java 编译器——它不使用 javac。因此，如果您的包管理器告诉您没有安装 javac，那么您可能没有 - Eclipse 不会关心您是否安装了 javac。它也不会受到您安装的 javac 版本的影响，因为正如我所说，它不使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:20:25.503

您安装了 Java 运行时环境 (JRE)。它不包含 Java 编译器 (javac)。编译器只是 Java 开发工具包 (JDK) 安装的一部分。

Eclipse 带有自己的 JDK 和/或私有 JRE。在使用 Eclipse for Java Developers 时，您可以选择要用于编译项目的 JDK。因此，您也不需要更新 Eclipse 的 JRE。

# javascript - 显示每个按钮的点击次数和总和

> ID：12086481
> 
> 赞同：0
> 
> 时间：2012-08-23T07:11:32.667
> 
> 标签：javascript, button, count, onclick

我希望能够显示按钮#1、按钮#2 的点击次数，并显示按钮#1+按钮#2 的点击总和。到目前为止，我所能展示的只是总和。

HTML

```
 <button id="1" onclick = "countCar('ferrari');">Button#1</button>
 <a>Ferraris</a><span id="ferrariCount"></span>

 <a id="showSum">SUM<span id="carCount"></span></a>

 <button id="2" onclick = "countCar('toyota');">Button#2</button>
 <a>Toyotas</a><span id="toyotaCount"></span> 
```

Javascript

```
 var carCount = 0; 
  var ferrariCount = 0;
  var toyotaCount = 0;
  function countCar(type)

  {
    carCount = carCount + 1;
    document.getElementById('carCount').innerHTML = carCount;

    ferrariCount = ferrariCount + 1;
    toyotaCount = toyotaCount + 1;

     if(type =='ferrari'){document.getElementById('ferrariCount').innerHTML = ferrariCount;
             }else{
             document.getElementById('toyotaCount').innerHTML = toyotaCount;}
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:16:22.990

并改变

document.getElementById('toyotaCount')。**interHTML** = toyotaCount;}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:17:19.083

如果（类型 = '1'）

你为什么用这个？

它应该更改为

if(type === 'ferrari') 然后它将起作用。

还有它的innerHTML 一些错字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:17:58.590

您的代码有点多余，因此我将其结构如下：

```
var counts = {
  'ferrari': 0,
  'toyota': 0,
  'total': 0
};

function countCar(type) {
  document.getElementById('carCount').innerHTML = ++counts['total'];
  document.getElementById(type + 'Count').innerHTML = ++counts[type];
} 
```

而不是使用大量的全局变量，只需创建和对象将您的数字存储在其中。它使您的代码更清晰，更易于阅读。

# asp.net-mvc-3 - 连接两个表时不相等的操作

> ID：12086484
> 
> 赞同：0
> 
> 时间：2012-08-23T07:11:42.517
> 
> 标签：asp.net-mvc-3, linq

我想加入两个表，同时加入该列中的两个表，示例查询是

```
 from a in project_modules
   join b in module_functions on  a.project_module_id equals b.project_module_id 
```

我想要不等于操作代替等于

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:20:26.403

从字面上理解你的要求是：

```
from a in project_modules
from b in module_functions
where a.project_module_id != b.project_module_id 
```

请注意，它产生除内部连接记录之外的笛卡尔积。好吧，也许你需要它来做某事。

# c# - 为 RegEx 组添加常量字符串的前缀

> ID：12086487
> 
> 赞同：2
> 
> 时间：2012-08-23T07:11:52.853
> 
> 标签：c#, regex

我被困在一个简单的问题上。

我正在使用 RegEx 从 html 标记中提取 url。我想添加常量前缀

```
"The site is" 
```

到提取的 RegEx 组。

示例标记：

```
<html>
  <body>
    <a href="www.stackoverflow.com"></a>
  </body>
</html> 
```

我使用的表达式是：

```
<a\shref="(?<Url>.*?)"></a> 
```

当前我将组网址作为

```
www.stackoverflow.com 
```

但我希望这样

```
The site is www.stackoverflow.com 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:23:33.113

```
Regex  regex  = new Regex(@"<a\shref=""(?<Url>.*?)""></a>")
String input  = ... // your sample markup
String result = regex.Match(input).Result("The site is ${Url}"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:16:02.630

简要回答：不要使用正则表达式解析 HTML。[深入解答](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# android - Android中的应用内结算

> ID：12086497
> 
> 赞同：0
> 
> 时间：2012-08-23T07:12:20.710
> 
> 标签：android, in-app-purchase, in-app-billing

自 3 天以来，我正在我的应用中实施应用内结算。提供的示例代码运行良好，但是当我将该代码与我的原始应用程序合并时，修改如下：

```
1.Changing Public Key in Security.java
2.changed the package names in all classes.
3.Changed product name in code and product list in Android market.
4.Signed ,Uploaded and Activated the .apk in Android market. 
```

我应该在代码中做更多的修改吗？但是我没有从 android 或 google play 中得到响应，作为我购买的特定商品的购买状态的 JSON。

它还要求使用信用卡或借记卡“接受并购买”。

但没有得到任何回应，请帮我摆脱这个。

每次我为购买产品进行交易时，它都会在日志中响应开发人员错误和结果错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:12:45.993

我找到[了这个插件](https://github.com/poiuytrez/phonegap-plugins/tree/billingPlugin/Android/InAppBilling)（我声称没有开发它的功劳！）并让它在 15 分钟内工作。

# wix - WIX 3.6 中的 Build to Build 升级

> ID：12086499
> 
> 赞同：0
> 
> 时间：2012-08-23T07:12:22.803
> 
> 标签：wix, wix3.6

我们有一个版本为 1.0.0.1 的 wix 安装程序，在下一次构建中版本号将修改为 1.0.0.2 等等，WIX 中的升级如何工作，以便产品从 1.0.0.1 升级到 1.0.0.2。

# html - html 使用列表完成表格

> ID：12086500
> 
> 赞同：0
> 
> 时间：2012-08-23T07:12:23.747
> 
> 标签：html, forms, list

我知道这似乎是一个笑话，但我正在寻找一些我找不到的东西，因为我不知道它是如何被调用的。

事实上，它正在使用表格

我们有一个列表，我们可以在其中将我们的选择保存到另一个列表中。

如果我们愿意，我们可以删除这个选择。

我不知道它是如何被调用的以及如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:25:34.443

您是否试图将元素从一个列表移动到另一个列表？这是我从你的要求中理解的。

这个网站上有一些问题可以解决同样的问题，例如：[双列表框 - 如何在两个列表框之间移动项目？](https://stackoverflow.com/questions/9451246/dual-listbox-move-items-between-tow-list-boxes)

祝你好运！

# iphone - 更改 ios 搜索栏中的文本时，我的 iphone 应用程序崩溃

> ID：12086504
> 
> 赞同：0
> 
> 时间：2012-08-23T07:12:30.837
> 
> 标签：iphone, objective-c

我有一个应用程序，我正在使用带有 tableview 的搜索栏。当在搜索栏中输入特定单词并单击搜索按钮时，与该特定关键字匹配的所有值都显示在 tableview 中。但是当我单击搜索栏时再次开始删除特定单词，然后我的应用程序崩溃。这是我用于搜索文本并在表格视图中显示的代码。

```
-(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    if ([searcharray count]>0)
    {
        canSelectRow = YES;
        self.tblView.scrollEnabled = YES;
    }else {
        canSelectRow = NO;
        self.tblView.scrollEnabled = NO;
    }
    isSearchOn = YES;
    searchBar.showsCancelButton = YES;
    [searchBar setShowsCancelButton:YES animated:YES];
    searchBar.autocorrectionType = UITextAutocorrectionTypeNo;

}

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)searchText 
{
    [searcharray removeAllObjects];

    if ([searchText length]>0) 
    {
        isSearchOn = YES;
        canSelectRow = YES;
        self.tblView.scrollEnabled = YES;
        [self searchTableView];
    }
    else {

        isSearchOn = NO;
        canSelectRow = NO;
        self.tblView.scrollEnabled = NO;
    }
    [self.tblView reloadData];

}

-(void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    searchBar.showsCancelButton = NO;

}

-(void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
    searchBar.text = @"";
    testSearch = NO;
    canSelectRow = YES;
    self.tblView.scrollEnabled = YES;
    [searchBar resignFirstResponder];
    [self.tblView reloadData];
}

-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar1
{
    testSearch = TRUE;
    NSString *searchtext = searchBar.text;

    int tag =(NSNumber*) [[NSUserDefaults standardUserDefaults] integerForKey:@"buttontag"];
    if (tag==0)
    {
        //calling my api method to display on the tableview.    
    }
    else if(tag==1)
    {
        //calling my api method to display on the tableview.
    }
    else if(tag==2)
    {
        //calling my api method to display on the tableview.
    }
    else if(tag==3)
    {
        //calling my api method to display on the tableview.
    }
    else if(tag==4)
    {
        //calling my api method to display on the tableview.
    }
    else if(tag ==5)
    {
        //calling my api method to display on the tableview.
    }

    [searchBar resignFirstResponder];
} 
```

在单元格中显示时，我正在使用 searcharray

```
tableview cellForRowAtIndexPath
{
//testSearch is the bool variable that i have returned true when search button is clicked
if (testSearch)
    {
        //through the search arrray i am displaying in cell.
        NSDictionary *dict = [searcharray objectAtIndex:indexPath.row];

// app is crashing at this point.
        ****cell.lblPassion.text = [dict objectForKey:@"Title"];****
        cell.lblCost.text = [dict objectForKey:@"DescriptionMobile"];

        NSString *startdate =[dict objectForKey:@"StartDtm"];
        NSDate *newstartdate = [dateformatter dateFromString:startdate];
        NSString *custommessage = (NSString*)[dict objectForKey:@"OfferCustomMessage"];
        if ( custommessage !=nil && custommessage !=NULL && custommessage !=(NSString*) [NSNull null]) {

            cell.lblCustomMsg.hidden = NO;
            cell.lblCustomMsg.text = custommessage;
            cell.lblDiscount.hidden = YES;
            cell.lblDeal.hidden = YES;
            cell.lblStrikeout.hidden = YES;
            cell.strikeimage.hidden = YES;

        }
} 
```

# java - Java同步对双重检查锁定的影响？

> ID：12086505
> 
> 赞同：2
> 
> 时间：2012-08-23T07:12:31.523
> 
> 标签：java, multithreading, synchronized, java-memory-model, double-checked-locking

我已经阅读了不同的文章，例如[Double-checked locking: Clever, but broken](http://www.javaworld.com/jw-02-2001/jw-0209-double.html?page=1)并且我理解以下代码在多线程使用中被破坏的原因。

```
class SomeClass {
  private Resource resource = null;
  public Resource getResource() {
    if (resource == null) {
      synchronized {
        if (resource == null) 
          resource = new Resource();
      }
    }
    return resource;
  }
} 
```

然而，根据它的解释，当一个线程退出一个同步块时，它会执行一个写屏障——它必须在释放锁之前将该块中修改的所有变量刷新到主内存。因此，当线程 A 运行到同步块时，然后依次执行以下过程：

1.  将为新的 Resource 对象分配内存；
2.  将调用 Resource 的构造函数，
3.  初始化新对象的成员字段；
4.  SomeClass 的字段资源将被分配对新创建对象的引用

最后，在线程 A 退出同步块之前，它会将其本地资源对象写回主存，然后线程 B 将在运行到同步块时从主内存中读取这个新创建的资源。

**为什么线程 B 看到这些内存操作的顺序可能与线程 A 执行的顺序不同？**我认为线程 B 不会知道资源对象已创建，直到线程 A 从同步块退出时将其本地内存刷新到主内存，因为线程 B 只能从可共享的主内存中读取资源对象？

请纠正我的理解......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:17:52.010

您引用的文章指的是 Java 5.0 之前的 Java 内存模型。

在 Java 5.0+ 中，您`resource`必须声明`volatile`它才能工作。即使更改被刷新到主内存，也不能保证（除了`volatile`）线程 B 将从主内存而不是它自己的本地缓存（其中值为 null）中读取新值。

在以前的版本中，volatile 没有对重新排序施加严格的限制，因此不能保证双重检查锁定正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:30:21.247

“双重检查锁定”是不会消亡的模因之一。恕我直言，使用枚举要聪明得多（正如 Josh Bloch 在 Effective Java 2nd edition 中所建议的）

```
enum SomeClass {
    INSTANCE; // thread safe and lazy loaded
} 
```

您所指的错误已在 2004 年的 Java 5.0 中修复。

简而言之，a）不要使用它 b）使用 Java 5.0+ 的版本 c）不要使用非常旧的不受支持的 Java 版本，并且对非常非常旧的文章（2001 年）持保留态度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:30:29.953

> 最后，在线程 A 退出同步块之前，它会将其本地资源对象写回主存，然后线程 B 将在运行到同步块时从主内存中读取这个新创建的资源。

这就是它崩溃的地方。因为线程 B`resource`在没有同步的情况下访问，所以它的操作没有读障碍。`resource`因此，它可能会看到单元格或（稍后）对应于实例的某些字段的单元格的过期缓存副本`Resource`。

Costi Ciudatu 的修复对于 Java 版本 >= 5.0 是正确的。但是对于早于该版本的版本， 的语义`volatile`并不能保证所有更改都会从 A 刷新到主内存再到 B。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T07:43:35.253

我不会说比其他人已经做过的更多，但是因为这是一个经常使用的模式，为什么不为它制作一个实用方法呢？喜欢：[供应商记忆](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Suppliers.html#memoize%28com.google.common.base.Supplier%29)

# google-apps-script - 如何在 Google Apps 脚本中使用 oAuth 2.0 来授权 Picasa 网络相册

> ID：12086509
> 
> 赞同：2
> 
> 时间：2012-08-23T07:13:18.337
> 
> 标签：google-apps-script, picasa

我想知道如何在 Google Apps 脚本中使用 oAuth2.0。

我想在 picasa 中使用它。这是我的授权代码：

```
var url = "https://accounts.google.com/o/oauth2/auth?redirect_uri=https%3A%2F%2Fscript.google.com%2Foauth2callback&response_type=code&client_id=" + My_Client_Id + "&approval_prompt=force&scope=https%3A%2F%2Fpicasaweb.google.com%2Fdata%2F&access_type=offline&"
var option = {oAuthUseToken: "always", oAuthServiceName: "lh2"};
var response = UrlFetchApp.fetch(url, option); 
```

但是授权失败。

我知道 Google 已经编写了一个链接 picasa 的示例（[https://developers.google.com/apps-script/articles/picasa_google_apis](https://developers.google.com/apps-script/articles/picasa_google_apis)）。但是，它是用于客户端登录的。我想做的是在一些照片中添加一些标签。因此不能使用示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T18:35:47.893

从我可以看到你是 urlFetchApp 目前只支持 OAuth1.0。我将查看此处概述的使用 OAuth 2.0 [https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#Auth](https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#Auth)的步骤。我实际上并没有使用 Picasa 身份验证，但我已经通过 Facebook 为我的网站设置了 OAuth 2.0 身份验证，因此其中一些可能很有用 - 这一切都在我的博客[http://socialsamplr.blogspot.co.nz/](http://socialsamplr.blogspot.co.nz/)上。

问候，丹尼尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-19T23:26:08.210

# 简短的回答

按照[https://github.com/googlesamples/apps-script-oauth2中的说明进行操作](https://github.com/googlesamples/apps-script-oauth2)

# 解释

我尝试使用[Picasa 服务库](https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/picasa-services)，但身份验证过程未完成，因此我获取了库源代码，适用于使用来自[https://github.com/googlesamples/apps-script-oauth2](https://github.com/googlesamples/apps-script-oauth2)的 OAuth 文件。我将结果发布到[https://gist.github.com/rubenrivera/97cf176b8787d04e10929adf6aa7ae5f](https://gist.github.com/rubenrivera/97cf176b8787d04e10929adf6aa7ae5f)

## 遵循的步骤

1.  从 Google Developers Console 获得了我自己的 CLIENT_ID 和 CLIENT_SECRET
2.  添加了 SERVICE、SERVICE_URL、SCOPE 作为全局变量，以便以后可以轻松地将 OAuth2 与其他服务一起使用。

```
//使用 Picasa 网络相册 API 的全局变量
var SERVICE_ = 'lh2';
var SCOPE_ = 'http://picasaweb.google.com/data/';
var SERVICE_URL_ = 'https://picasaweb.google.com/data/feed/api/user/default';

// 项目的全局变量。从 Google Developers Console 获得
var CLIENT_ID_ = '...';
var CLIENT_SECRET_ = '...';

```

注意：步骤 3 和 4 是可选的。另一种方法是从相关库中添加它们

3.  [将 OAuth2 脚本文件替换为来自https://github.com/googlesamples/apps-script-oauth2/tree/master/dist/OAuth2.gs](https://github.com/googlesamples/apps-script-oauth2/tree/master/dist/OAuth2.gs)的同名文件。
4.  [从https://github.com/googlesamples/apps-script-oauth2/blob/master/dist/Underscore.gs](https://github.com/googlesamples/apps-script-oauth2/blob/master/dist/Underscore.gs)添加了下划线文件。
5.  运行以下代码获取重定向 URI 并在 Google Developers Console 中注册

```
/**
 * 记录 redict URI 以在 Google Developers Console 中注册。
 */
函数 logRedirectUri() {
  var service = getService();
  Logger.log(service.getRedirectUri());
}

```

5.  从 Google Developer Console 获取 CLIENT_I 和 CLIENT_SECRET
6.  运行以下代码对脚本进行授权。获取显示的 URL 并从新选项卡运行它。

```
/**
 * 授权并向 API 发出请求。
 */
函数运行（）{
  var service = getService();
  if (service.hasAccess()) {
    var url = SERVICE_URL；
    var response = UrlFetchApp.fetch(url, {
      标题：{
        授权：'Bearer' + service.getAccessToken()
      }
    });
    尝试 {
      var 结果 = JSON.parse(response.getContentText());
      Logger.log(JSON.stringify(result, null, 2));
    } 捕捉（e）{
      var 结果 = Xml.parse(response.getContentText(),true);
      Logger.log(result.toXmlString());
    }
  } 别的 {
    var authenticationUrl = service.getAuthorizationUrl();
    Logger.log('打开以下 URL 并重新运行脚本：%s',
        授权网址）；
  }
}

```

4.  注释掉原来的 googleOAuth_()
5.  添加了以下代码函数 googleOAuth_() { var service = getService(); return { headers: { Authorization: 'Bearer' + service.getAccessToken() } } }

# ruby-on-rails - 如何使用 Rails 将图像存储在谷歌存储中？

> ID：12086514
> 
> 赞同：0
> 
> 时间：2012-08-23T07:13:24.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 中处理过一个示例`github`，它用于`paperclip`在文件夹中存储图像`system`。我知道那`heroku`是`read_only`文件系统，所以我想存储在其他地方并使用它，就像存储和检索`system folder`. 我已经阅读了一些选项，例如使用 amazon s3。我可以为此使用谷歌存储吗？如果可以，如何使用？

也告诉我github中是否有这方面的例子，所以我可以试试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:45:03.873

查看 Carrierwave，尤其是[本](https://github.com/jnicklas/carrierwave#using-google-storage-for-developers)节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:25:25.317

对于`Paperclip`，[这](https://github.com/thoughtbot/paperclip/wiki/Restricting-Access-to-Objects-Stored-on-Amazon-S3)是您将其存储在 Amazon 的 S3 上的方式。但是您可以通过`path`编辑`url`. `has_attached_file`看[这里](http://rdoc.info/gems/paperclip)

# asp.net - 手动升级后将新的 ASP.NET Web 优化框架添加到 MVC4 项目

> ID：12086518
> 
> 赞同：13
> 
> 时间：2012-08-23T07:13:30.507
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-optimization, bundling-and-minification

[使用这些说明](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)手动将 ASP.NET MVC 项目升级到 MVC4 后，您如何在 MVC4 中设置新的 CSS 和 JavaScript 资产捆绑以及 ASP.NET Web 优化框架的最小化功能？默认模板已全部设置好，但是您如何手动完成呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-23T07:13:30.507

*   右键单击 References 然后 Manage NuGet Packages 并添加“Microsoft.AspNet.Web.Optimization”（或`Install-Package Microsoft.AspNet.Web.Optimization`在 NuGet 控制台中键入）。
*   在您的 Web.config 文件中，将以下内容添加到`<system.webServer>`，允许使用无扩展 URL 提供缩小的捆绑包。

```
<handlers>
<remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
<remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
<remove name="ExtensionlessUrlHandler-Integrated-4.0" />
<add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
<add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

*   在您的 App_Start 文件夹中，添加一个名为 BundleConfig.cs 的新类。它应该看起来像这样：

```
using System.Web;
using System.Web.Optimization;

namespace MvcApplication1
{
    public class BundleConfig
    {
        // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
        public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                "~/Scripts/jquery-{version}.js"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                "~/Scripts/jquery-ui-{version}.js"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                "~/Scripts/jquery.unobtrusive*",
                "~/Scripts/jquery.validate*"));

            // Use the development version of Modernizr to develop with and learn from. Then, when you're
            // ready for production, use the build tool at http://modernizr.com to pick only the tests you need.
            bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                        "~/Scripts/modernizr-*"));

            bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css"));

            bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                        "~/Content/themes/base/jquery.ui.core.css"));
        }
    }
} 
```

*   编辑以上内容以添加您需要的脚本和样式表包，然后将以下行添加到 Global.asax.cs 中的 using 部分和 Application_Start 中：

```
//using section
using System.Web.Optimization;

//Application_Start
BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

*   将 _Layout.cshtml 中的 CSS 和 JavaScript 以及标签替换为对`@Styles.Render("~/Content/css")`和的调用`@Scripts.Render("~/bundles/jquery")`，将参数替换为添加到 BundleConfig.cs 的包的名称。确保不要将任何包命名为与项目中的文件夹相同的名称。

你现在应该已经准备好了——在此处阅读有关如何使用完整功能集的信息：[http ://www.asp.net/mvc/overview/performance/bundling-and-minification](http://www.asp.net/mvc/overview/performance/bundling-and-minification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T08:17:19.650

是 按照以下步骤捆绑和缩小 JS 和 CSS：

*   首先打开包管理器控制台并运行命令，选择您的 Web 应用程序作为项目。

安装包 Microsoft.AspNet.Web.Optimization

*   转到 global.asax 右键单击​​并查看代码

*   粘贴以下代码：

    ```
    public static void MinifyJavaScriptAndCSS()
    {
       var scripts1 = new ScriptBundle("~/bundles/customJSBundle");
       scripts1.Include("~/Scripts/script1.js");
       scripts1.Include("~/Scripts/script2.js");
       BundleTable.Bundles.Add(scripts1);

        //Bundle Css
        var css1 = new StyleBundle("~/bundles/customCSSBundle");
        css1.Include("~/Styles/style1.css");
        css1.Include("~/Styles/style2.css");
        BundleTable.Bundles.Add(css1);  
     } 
    ```

*   在 Application_Start() 中调用它

    ```
     protected void Application_Start()
    {
        ApplicationHelper.MinifyJavaScript();
     } 
    ```

*   转到 Views/Shared 中的 _Layout.cshtml

*   在头部添加行

    @ViewBag.Title - 我的 ASP.NET 应用程序 @Styles.Render("~/bundles/customCSSBundle")

*   在关闭body标签之前添加这个

    ```
     //your code
      @Scripts.Render("~/bundles/customJSBundle")
     </body> 
    ```

*   在 web.config 中如果设置编译 debug=true，文件将不会被捆绑。如果将其设置为 false，则将捆绑文件。

# jquery - jquery幻灯片onclick下一张幻灯片

> ID：12086520
> 
> 赞同：1
> 
> 时间：2012-08-23T07:13:33.190
> 
> 标签：jquery, wordpress, onclick, slideshow

我是 jquery 的新手，在自定义我的 Wordpress 'Easy Gallery Slider' 插件时遇到了很多麻烦。

**这是网站：** [http ://andycallahan.eu/2012/bikes-2/](http://andycallahan.eu/2012/bikes-2/)

我希望幻灯片在单击图像时前进到下一张幻灯片。

我遇到这么多麻烦的原因是幻灯片中的图像不在它自己的 div 中，所以它必须是 ul/li onclick 事件。

我不太确定要显示哪些代码片段，所以为了节省空间，这里是链接：

**jquery.flexslider.js：** [http ://www.heypasteit.com/clip/0G8K](http://www.heypasteit.com/clip/0G8K)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:33:49.887

文档说，有一个 slider.flexAnimate(target) 方法。使用它`$("ul.slides img").click(function(ev){ /* here */ }).`

# nunit - NUnit 与 teamcity 集成

> ID：12086521
> 
> 赞同：12
> 
> 时间：2012-08-23T07:13:35.940
> 
> 标签：nunit, teamcity

我尝试了很多，但仍然没有得到正确的链接和文章来解决我的问题。

我有一些 NUnit 测试，我想与团队城市服务器集成，为此我在 Teamcity 中使用 NUnit 运行器类型，我给出了我的 dll 文件路径，测试必须从中执行，但过了一会儿它给出了“这个版本可能挂了”。

我需要为此做任何额外的配置吗？任何人都可以帮我解决这个问题。

在这里，我还附上了我的 NUnit 构建运行器配置。

![在此处输入图像描述](../Images/86c325ed3a06997bfa99d2919addb12c.png)![在此处输入图像描述](../Images/cb072c019f3bae41c5a950f31903e170.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T11:23:26.143

我可以说一些对你的情况可能有用的事情。

1.  确保您的测试项目名称正确。

所以它应该像 MyProject001.Tests。命名空间也应该相同，最后输出的 DLL 应该看起来像 MyProject001.Tests.dll

2.  确保您在本地正确的文件夹中有 MyProject001.Tests.dll，并且您也可以通过 SVN 正确提交它。

3.  有时`Auto MSIL`选择不是一个好的决定。

4.  在 NUnit 设置下，我使用***/** /BuildOutput/MyProject001.Tests.dll之类的路径

5.  还要设置正确的 .NET 框架版本。

我希望它能以某种方式帮助你。保持微笑，兄弟！

附言

在我的 C# 代码中，我得到了

```
 [TestFixture]
    public class TestClass
    {

        [TestCase]
        public void Test0001()
        {
            // blah blah
            Assert.AreEqual(true, result);
        } 

    } 
```

# jquery - 停止动画然后重新启动它

> ID：12086523
> 
> 赞同：0
> 
> 时间：2012-08-23T07:13:48.310
> 
> 标签：jquery, css, jquery-animate

我不知道当鼠标悬停在它上面时如何停止这个动画

[http://jsfiddle.net/xRcwH/14/](http://jsfiddle.net/xRcwH/14/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:50:37.687

希望以下内容可以像您*希望的那样工作：*

```
var $marquee;

var reset = function() {
    "use strict";
    $marquee.css("margin-left", "0%");
    $marquee.animate({ "margin-left": "-100%" }, 4000, 'linear', reset);
};

var func = function() {
    "use strict";
    $marquee = $("#marquee");
    $marquee.css({"overflow": "hidden", "width": "100%"});
    $marquee.wrapInner("<span>");
    $marquee.find("span").css({ "width": "50%", "display": "inline-block", "text-align": "right" });
    $marquee.append($marquee.find("span").clone());
    $marquee.wrapInner("<div>");
    $marquee.find("div").css("width", "200%");
    reset.call($marquee.find("div"));
};

$(function() {
    "use strict";
    func();

    $marquee.hover(
        function() {
            $(this).stop();
        },
        function() {
            $(this).animate({ "margin-left": "-100%" }, 4000, 'linear', reset);
        }
    );
}); 
```

在此处查看更新的小提琴：http: [//jsfiddle.net/xRcwH/27/](http://jsfiddle.net/xRcwH/27/)

我已经清理了你的代码并移动了一些东西。该`reset`函数**不应**在函数中声明，`func`因此我将其移出。

此外，我改变了：

```
marquee.find("span").css({ "width": "50%", "display": "inline-block", "text-align":"center" }); 
```

至

```
$marquee.find("span").css({ "width": "50%", "display": "inline-block", "text-align": "right" }); 
```

因为这使它在整个屏幕上动画。

最后我正在使用[`.hover()`](http://api.jquery.com/hover/)，因为这是它的用途，[`.hover()`](http://api.jquery.com/hover/)与做的一样：

`$(selector).mouseenter(handlerIn).mouseleave(handlerOut);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:21:19.003

这是您需要的效果吗：http: [//jsfiddle.net/xRcwH/24/](http://jsfiddle.net/xRcwH/24/)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:55:23.223

您还应该在此处发布您的代码，但这就是它停止的原因：

```
$(this).find('div').stop(); 
```

代替

```
$this.stop(); 
```

因为动画在选框内的 div 上。

# android - 在 Android ActionBar 上访问 ActionView

> ID：12086526
> 
> 赞同：1
> 
> 时间：2012-08-23T07:13:56.730
> 
> 标签：android, android-actionbar, actionbarsherlock

我从操作栏中使用的菜单项获取操作视图时遇到问题。出于兼容性原因，我正在使用 Actionbarsherlock。

我在 onCreateOptionMenu 中使用此代码：

```
 menu.add("Search")
        .setIcon(R.drawable.ic_search)
        .setActionView(R.layout.collapsible_edittext)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

我设置的 ActionView 只是一个来自 XML 的 EditText，它的宽度将是“fill_parent”。由于我找不到访问此编辑文本以注册事件处理程序的方法，因此我尝试在 oncreateoptionsmenu（以及稍后在 onOptionsItemSelected）中膨胀“R.layout.collapsible_edittext”，并将结果添加为 acitonview。完成此操作后，我可以访问edittext，但在单击图标后它不再占据我的操作栏中的全部宽度。

任何提示如何正确访问 ActionView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:01:34.797

编辑文本布局

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:singleLine="true"
          android:hint="Search"/> 
```

代码

```
 private EditText search;

  private TextWatcher filterTextWatcher = new TextWatcher() {
        public void afterTextChanged(Editable s) {
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            //... your logic here    
        }
    };

@Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        menu.add(0, 3, 3, R.string.ac_search  ).setIcon(R.drawable.ic_action_search).setActionView(R.layout.action_search).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
        return super.onCreateOptionsMenu(menu);
    }

  @Override
    public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
        switch (item.getItemId()){

            case 3:
                search = (EditText) item.getActionView();
                search.addTextChangedListener(filterTextWatcher);
                break;

        }
        return true;
    } 
```

# gridview - asp.net中的Gridview新PageSetting模式

> ID：12086527
> 
> 赞同：0
> 
> 时间：2012-08-23T07:13:57.997
> 
> 标签：gridview, pagination

在 PagerSettings 内的 ASP.Net Gridview 属性中，我们如何添加名为的新模式

**NumericNextPreviousFirstLast**

这将显示分页为

**上一页 1 2 3 下一页 末页**?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:46:49.250

您无法添加新模式。

结帐[http://patpack.blogspot.de/2007/04/numeric-first-last-with-next-previous.html](http://patpack.blogspot.de/2007/04/numeric-first-last-with-next-previous.html)例如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T11:07:06.150

这可能是更好的选择。

```
public class CustomGrid : System.Web.UI.WebControls.GridView
{
    protected override void OnRowCreated(GridViewRowEventArgs e)
    {
        base.OnRowCreated(e);

        if (PagerSettings.Mode == PagerButtons.NumericFirstLast && e.Row.RowType == DataControlRowType.Pager)
        {
            Table pagerTable = (Table)e.Row.Cells[0].Controls[0];
            TableRow row = pagerTable.Rows[0];
            if (row.Cells.Count > 1)
            {
                if (PageIndex != 0)
                {
                    TableCell cell = new TableCell();
                    LiteralControl prev = new LiteralControl();

                    prev.Text = "<a href=\"javascript:__doPostBack('" + ClientID.Replace("_", "$") + "','Page$Prev')\">&lt;</a>";

                    cell.Controls.Add(prev);

                    if ((row.Cells[0].Controls[0] as LinkButton).CommandArgument != "First")
                    {
                        row.Cells.AddAt(0, cell);
                    }
                    else
                    {
                        row.Cells.AddAt(1, cell);
                    }
                }
                if (PageIndex != PageCount - 1)
                {
                    TableCell cell = new TableCell();
                    LiteralControl next = new LiteralControl();

                    next.Text = "<a href=\"javascript:__doPostBack('" + ClientID.Replace("_", "$") + "','Page$Next')\">&gt;</a>";

                    cell.Controls.Add(next);

                    if ((row.Cells[row.Cells.Count - 1].Controls[0] as LinkButton).CommandArgument != "Last")
                    {
                        row.Cells.Add(cell);
                    }
                    else
                    {
                        row.Cells.AddAt(row.Cells.Count - 1, cell);
                    }
                }
            }
        }
    }
} 
```

# sql - 用于检索的 SQL 查询

> ID：12086528
> 
> 赞同：1
> 
> 时间：2012-08-23T07:13:58.403
> 
> 标签：sql

这是我的表结构

```
id   state     city   lat    lon
1     erer      wer    34     34
2     ffff      dfd    44     33
1     fds       rw     0      45 
```

使用它，我必须从上表中检索没有重复的数据。如果我必须使用 id`1`和检索数据`2`，我使用`Group by id`. 现在我还必须检查另一个条件，是否`lat > 0`.

```
select *
  from table
 group by id and lat > 0 
```

但仍在检索 0 的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:15:12.833

采用`HAVING`

```
select *
from table
group by id
having lat > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:15:23.650

尝试，

```
select *
from table
WHERE lat > 0 
group by id 
```

# c# - 使用 C# 以编程方式将关机脚本添加到组策略

> ID：12086531
> 
> 赞同：2
> 
> 时间：2012-08-23T07:14:06.563
> 
> 标签：c#, windows, group-policy, visual-studio-setup-proje

我的要求是当用户从 Windows 注销时我必须运行一个应用程序。为了实现这一点，我觉得在 Windows 的组策略中添加一个关闭脚本将是一个可行的解决方案。我们通常通过 gpedit.msc 来完成。但我想从 C# 以编程方式进行。非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-30T08:27:22.703

The use of "gpedit.msc" means we are talking Local GPO so [please see my answer here.](https://stackoverflow.com/questions/10377617/is-there-any-way-to-programmatically-add-a-startup-script-to-the-local-group-pol)

Hope this answers your question,

Shaun

# java - 如何在 Java 项目中使用 Android 的 LogCat？

> ID：12086536
> 
> 赞同：0
> 
> 时间：2012-08-23T07:14:34.783
> 
> 标签：java, android, logcat, android-logcat

我有一个 Java 项目，我想在其中使用 Android LogCat 的调试标记功能。

Java项目有可能吗？（不是Android，而是纯Java）

**编辑：**

如下所述，这是不可能的。Java有什么替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:30:57.043

不，Logcat 正在格式化 ADB（Android 调试桥）的输出。由于您无法将 ADB 连接到普通的 java 项目，因此您无法以这种方式使用 Logcat。

当然，除非您获得 Android Eclipse 插件的源代码并根据您的需要对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:34:07.120

我认为您想要使用的是[log4j](http://logging.apache.org/log4j)或[tinylog](http://www.tinylog.org/)

# android - Android 上的 AdMob 自家广告中介

> ID：12086541
> 
> 赞同：2
> 
> 时间：2012-08-23T07:14:57.660
> 
> 标签：android, admob, ads

我正在尝试在我的普通 AdMob 广告中加入一些自家广告。但是每当我设置一个广告系列时，它会立即压倒正常的广告。我可以恢复它们的唯一方法是完全删除该广告系列。我尝试了各种中介设置，但无济于事。理想情况下，我希望广告活动的显示率约为 5%，但目前它的显示率为 100%。正确的设置是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:59:09.453

1.  创建一个新的发布者 ID。
2.  创建一个完全分配流量的自家广告活动 - 将活动分配给新创建的发布商 ID。
3.  在您的中介展示位置上，使用您的常规发布商 ID 配置“AdMob 网络”。
4.  在您的中介展示位置上，使用这个新创建的发布商 ID 配置“AdMob 自家广告”，该发布商 ID 配置为每次都投放自家广告。
5.  按百分比分配您的中介位置。将 95% 分配给 AdMob 网络，将 5% 分配给 AdMob 自家广告。

更新：

AdMob 不再提供百分比分配。如果确切的百分比对您来说并不重要，您可以在中介流中将广告置于其他网络之后，并且当您无法从任何其他配置的网络中获得广告时，内部广告就会显示。

如果您真的想获得百分比，您可以编写一个 AdMob 自定义事件，该事件随机生成一个数字，并决定是请求自家广告还是立即失败并转到该网络。这里有一个例子[。](https://code.google.com/p/google-mobile-dev/source/browse/examples/custom-events/src/com/google/example/ads/customevents/impl/PercentageHouseAds.java?repo=examples-android)按照该示例，步骤将更改为以下内容：

1.  和上面一样
2.  和上面一样
3.  将示例类放入您的应用程序中，根据需要调整包
4.  在您的中介展示位置上，选择“添加自定义事件”并进行以下设置：

> 标签： 百分比房屋广告
> 
> 类名：com.google.example.ads.customevents.impl.PercentageHousAds（替换为您的全限定类名）
> 
> 参数：{"publisherId": "YOUR_HOUSE_ADS_PUBLISHER_ID", "percentage": 5}

5.使您的自定义事件在所有网络中具有最高的 eCPM，因此自定义事件总是首先被请求。

# c# - 数据库资源管理器在 vs 2010 中被服务器资源管理器取代

> ID：12086542
> 
> 赞同：0
> 
> 时间：2012-08-23T07:14:57.753
> 
> 标签：c#, .net, sql, visual-studio-2010, visual-studio-2008

乡亲

我在 VS 2005 中看到了它的数据库资源管理器，但在 VS 2010 中我没有发现它。那是服务器资源管理器吗？如果万一被更换，为什么要更换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:17:34.503

从这篇文章中我可以看出，它是同一个东西，但名称不同。

[http://msdn.microsoft.com/en-us/library/x603htbk(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/x603htbk(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:20:43.050

它们没有替换任何东西，如果您在服务器资源管理器中展开数据连接图标，您可以找到与数据库资源管理器相同的视图。它基本上是同样的事情，但你不需要 teo windows 来做几乎同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:22:28.297

**来源：** [服务器资源管理器/数据库资源管理器](http://msdn.microsoft.com/en-us/library/x603htbk%28v=vs.110%29.aspx)

> **Server Explorer/Database Explorer**是 Visual Studio 的服务器管理控制台。使用此窗口打开数据连接并登录服务器并浏览其数据库和系统服务。在 **Visual Studio Express 产品**中，此窗口名为**Database Explorer**。在所有其他 Visual Studio 产品中，此窗口名为 **Server Explorer**。
> 
> 要访问服务器资源管理器/数据库资源管理器，请在查看菜单上选择服务器资源管理器或数据库资源管理器。

希望对您有所帮助。

# jquery - jQuery每周计划者

> ID：12086546
> 
> 赞同：0
> 
> 时间：2012-08-23T07:15:01.740
> 
> 标签：jquery, uislider

我想创建一个每周计划计划器。我在网上找到了一个小部件，它可以完成我需要的一半。小部件，加上小的修改可以在这里找到：http: [//jsfiddle.net/inadcod/GyanJ/](http://jsfiddle.net/inadcod/GyanJ/) 我的问题是，对于每一天，我希望能够添加新的时间间隔滑块来捕获不同的小时间隔一天。像星期一我想设置三个时间间隔，一个在 8:00 到 12:00 之间，另一个在 12:45 到 16:30 之间，还有一个在 17:00 到 21:45 之间。如果有人可以帮助我，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:21:57.000

```
$('.addNewInterval').click 
```

你忘了 . 上课！添加相对于`$(this)`按钮单击处理程序内部的间隔滑块，现在您将在任何地方添加它。

`.slider()`在新函数中添加新配置。另请注意，我只选择新的而不是所有滑块（像您一样使用类引用）。

[http://jsfiddle.net/GyanJ/5/](http://jsfiddle.net/GyanJ/5/)

***编辑***

您必须插入新的输入字段来填充。（或者您将覆盖）并且您可以在之后获取该值，但在您尝试的时候它始终为 0。更好的是当幻灯片处理程序内部的值发生变化时。

将配置/选项对象放入变量中可能是明智之举，这样您不仅可以在第一次创建时使用它，还可以在每个额外添加的滑块中使用它，而不是编写两次相同的代码。

这可能会有所帮助，我添加了一些评论。

[http://jsfiddle.net/GyanJ/8/](http://jsfiddle.net/GyanJ/8/)

***编辑***

做了更多的工作：（可能需要一些样式）

[http://jsfiddle.net/GyanJ/16/](http://jsfiddle.net/GyanJ/16/)

# javascript - 除了第一次外，两级手风琴不起作用

> ID：12086548
> 
> 赞同：1
> 
> 时间：2012-08-23T07:15:08.840
> 
> 标签：javascript, css, twitter-bootstrap, accordion

我有以下代码

```
<g:each in="${elementGroups}">
            <div class="accordion" id="accordion${it.id}">
                <!-- Element Group Heading -->
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion${it.id}" href="#collapse${it.id}"> 
                    <b>${it.name}</b>
                    </a>
                </div>
                <!-- Elements -->
                <div id="collapse${it.id}" class="accordion-body collapse">
                    <g:each  var="element" in="${it.elements}">
                        <!--  -->
                        <div class="accordion" id="accordion${it.id}-${element.id}">
                            <div class="accordion-heading" style="margin-left: 30px">
                                <label class="radio" class="accordion-toggle" data-toggle="collapse"    data-parent="#accordion${it.id}-${element.id}" data-target="#collapseOne${it.id}-${element.id}">
                                <input type="radio" name="optionsCheckboxList" value="${element.id}"/>${element.name}
                                </label>
                            </div>
                            <div id="collapseOne${it.id}-${element.id}" class="accordion-body collapse">
                            <div class="accordion-inner" style="margin-left: 60px">

                            <!-- Sample Description -->
                            <g:each var="desc1" in="${element.descriptions}">
                                <input type="radio" name="selComment" value="${desc1.name}" onclick="populateComment(this.value)"/>${desc1.name}<br/>
                            </g:each>
                            </div></div>
                        </div>
                        <!--  -->
                    </g:each>
                </div>
            </div>
        </g:each> 
```

请注意，有两个级别的手风琴具有正确的 id 和父 id。它们都是第一次扩展。一旦我改变了一些东西，手风琴就不再扩展了。可能是什么问题呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:36:09.110

您在and`<div class="accordion-group">`周围缺少 a 。这可能会导致你的问题。[请参阅http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)上的示例并查看源代码以了解他们如何实现它。`accordion-heading``accordion-body`

# mysql - 如何将用于在 Mssql 中创建表的查询转换为在 mysql 中的查询

> ID：12086555
> 
> 赞同：0
> 
> 时间：2012-08-23T07:15:29.543
> 
> 标签：mysql, sql-server

嗨，我曾在 mssql 数据库上工作并编写了一个用于创建表的查询，如下所示

```
CREATE TABLE [dbo].[Extb_History](
    [ExtbHistoryID] [int] IDENTITY(1,1) NOT NULL,
    [SiteID] [int] NOT NULL,
    [StartTime] [datetime] NOT NULL,
    [EndTime] [datetime] NULL,
    [Count] [int] NULL,
    [ExceptionID] [int] NULL,
PRIMARY KEY CLUSTERED ([ExtbHistoryID] ASC) 
WITH 
(
  PAD_INDEX  = OFF
  , STATISTICS_NORECOMPUTE  = OFF
  , IGNORE_DUP_KEY = OFF
  , ALLOW_ROW_LOCKS  = ON
  , ALLOW_PAGE_LOCKS  = ON
) ON [PRIMARY]
) ON [PRIMARY] 
```

如何在Mysql数据库中编写上述查询来创建表，

我尝试通过更改数据类型和语法，但在主键概念附近出现错误，任何人都可以帮助我在 mysql 中编写上述查询，这将非常有用，我真的很震惊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:21:46.780

语法在这里：

[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

你需要类似的东西（*未经*测试！）：

```
create table extb_history
(
exthistoryb int auto_increment
, siteid int not null
, starttime date not null
, endtime datetime not null
, count int null
, exceptionid int null
, primary key(exthistoryid)
) ENGINE = InnoDB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:22:24.603

像这样的东西：

```
CREATE TABLE Extb_History
(
    ExtbHistoryID INT NOT NULL AUTO_INCREMENT,
    SiteID INT NOT NULL,
    StartTime DATETIME NOT NULL, 
    EndTime DATETIME NULL, 
    Count INT NULL,
    ExceptionID INT NULL,
    PRIMARY KEY(ExtbHistoryID)
); 
```

# asp.net-membership - 将用户和密码移动到新的会员数据库

> ID：12086559
> 
> 赞同：2
> 
> 时间：2012-08-23T07:15:37.177
> 
> 标签：asp.net-membership, asp.net-4.5

我正在尝试将在 .Net 4 中创建的会员数据库移动到新创建的 .Net 4.5 会员数据库。.Net 4.5 数据库与旧的 .Net 4 数据库具有不同的架构。所以我创建了一个新的 4.5 会员数据库并尝试重新创建用户。

我正在从旧数据库中选择我的用户，然后使用 Membership.CreateUser() 在新的会员数据库中重新创建这些用户。因为我还需要他们的密码，所以我使用 SQL UPDATE 语句将 Membership 表中的 Password 和 PasswordSalt 字段设置为与旧数据库中相同的值。

任何新用户都可以毫无问题地登录，但如上所述，复制的用户无法登录（“您的登录尝试不成功。请重试。”）

我可以看到“FailedPasswordAttemptCount”随着您尝试登录而增加..所以它正在寻找用户..问题必须与密码或密码的解密有关。

我做错了什么，试图复制密码？两个数据库都在同一台机器上......当然密码和密码盐应该足以解密它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:50:42.980

首先，您的密码不会被解密，用户提交的密码是经过哈希处理的，并且与存储在数据库中的哈希值进行比较。哈希通常在机器密钥上起作用，尽管这可以在`Web.Config`不同版本的 IIS 中进行更改。

您可以尝试制作原始数据库的副本，然后对其运行 .net 4.5 ASPNET_REGSQL 以查看它是否会正确更新它，我怀疑它会，但值得一试。

我要做的第一件事是在您的`Web.Config`文件中查看该`Providers`部分并验证它与旧项目版本的相同。这决定了密码格式，如果你幸运的话，这将是问题，但我怀疑它是。

您还可以（取决于数据库中有多少用户）能够通过某些程序或网站解密他们的密码。[这](http://www.byteblocks.com/post/2011/05/03/Decrypt-password-in-SqlMembershipProvider.aspx)是过时的，但可能会有所帮助。如果可以检索他们的纯文本密码，您可以像这样重新创建用户。

我找不到任何说明散列过程从 4.0 版更改为 4.5 版的内容，但如果确实如此，您可能需要定义自定义散列算法。基本上，您需要像 .net 4.0 那样重新创建散列。

如果第一次验证失败，您还可以尝试对密码进行第二次手动验证。像[这样](http://www.codeproject.com/Articles/32600/Manually-validating-an-ASP-NET-user-account-with-a)的东西。

> PasswordFormat 值在 ASP.NET 应用程序的 Web.config 文件的提供程序部分中指定。
> 
> 默认情况下，加密和散列密码根据您配置中 machineKey 元素中提供的信息进行加密或散列。请注意，如果您为验证属性指定值 3DES，或者如果未指定值，则散列密码将使用 SHA1 算法进行散列。
> 
> 可以使用成员资格配置元素的 hashAlgorithmType 属性定义自定义哈希算法。如果您选择加密，则默认密码加密使用 AES。您可以通过设置 machineKey 配置元素的解密属性来更改加密算法。如果要加密密码，则必须为 machineKey 元素中的 decryptionKey 属性提供显式值。使用具有 ASP.NET 成员身份的加密密码时，不支持 decryptionKey 属性的默认值 AutoGenerate。

*   [http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.passwordformat.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.passwordformat.aspx)

# ruby-on-rails-3 - Rails 3：针对 LDAP 服务器的 ActiveResource 身份验证

> ID：12086564
> 
> 赞同：1
> 
> 时间：2012-08-23T07:15:56.817
> 
> 标签：ruby-on-rails-3, authentication, ldap, activeresource

我在我的 Rails 3 应用程序中使用[devise](https://github.com/plataformatec/devise)和[devise_ldap_authentication](https://github.com/cschiewek/devise_ldap_authenticatable)让用户针对公司的 LDAP 服务器（Active Directory）进行身份验证。到目前为止工作得很好。

现在我希望这些 Rails 3 应用程序中的一些应用程序能够相互通信，因此我向它们添加了 ActiveResource 模型。当然，这种通信应该是安全的，所以我也想为这个 ActiveResource 模型添加某种身份验证。根据[Rails API](http://api.rubyonrails.org/classes/ActiveResource/Base.html)，支持 HTTP 基本身份验证，在使用两个虚拟应用程序测试后，这确实很容易工作。

但是，如果这些应用程序也可以通过 LDAP 进行身份验证，我更愿意。有没有人尝试过这种情况和/或就如何实现这一点提供任何提示？

我想“HTTP 基本身份验证”(HBA) 场景的一个禁忌是“应用程序间通信”旨在调用普通人类用户使用的相同控制器/操作。因此，我认为如果接收到请求并将其路由到 - 比如说 - Book#create，应用程序可能很难决定应该使用哪个身份验证后端（HBA 或 LDAP）

# vb.net - VB.net/C# 将记录从一个数据库复制到另一个数据库

> ID：12086565
> 
> 赞同：0
> 
> 时间：2012-08-23T07:15:57.697
> 
> 标签：vb.net, ms-access, ado.net

我有 2 个结构相同但数据不同的 MS-Access 数据库。我想将记录从一个数据库复制到另一个。

例子 ：

* * *

```
Database Source, table Person
Record 1:
Field 1, PersonNumber, primary key, value : 1
Field 2, CompanyNumber, foreign key, value : 1 
```

* * *

```
Database Source, table Company
Record 1:
Field 1, CompanyNumber, primary key, value : 1
Field 2, CompanyName, value : Microsoft 
```

* * *

因此，CompanyNumber 上的两个表之间存在关系。

所以，如果我想在我的目标数据库中复制这 2 个表的这 2 条记录，如果我已经有一个人或公司在目标表中的主键值为 1，我可能会遇到问题。

第二个问题，我所有的表都有很多外键，如果没有创建公司的记录，如何从人那里复制记录？

我如何使用 vb.net 或 C#？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:59:34.880

您可以在 MS Access SQL 中轻松引用另一个数据库，语言无关紧要，只是连接：

```
SELECT Table1.AText, Table1_1.AText
FROM [;database=z:\docs\test.accdb].Table1 
INNER JOIN Table1 AS Table1_1 ON Table1.ID = Table1_1.ID; 
```

在那之后，有大量的编码来检查一切。

# android - 从两个位置获取距离

> ID：12086570
> 
> 赞同：1
> 
> 时间：2012-08-23T07:16:35.923
> 
> 标签：android, google-maps, gps, driving-directions, driving-distance

我在这里搜索了很多链接。但我不明白完整的代码。建议我一个简单易懂的代码，用于两个位置之间的行车方向，并从两个位置获取距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:23:59.007

您可以在这里看到[这篇](https://stackoverflow.com/a/11745316/1230123)文章，它从 Google API 检索 JSON 方向信息，您可以在其中在两个位置之间的地图上绘制路线，或者找到两个位置之间的距离（距离在类 Route 中使用`getLength()`方法）。

# ant - activiti explorer 打不开

> ID：12086572
> 
> 赞同：0
> 
> 时间：2012-08-23T07:16:40.977
> 
> 标签：ant, activiti

我已经下载了 activiti 5.10 并运行了演示设置，方法是输入

```
Ant demo.start 
```

在 CMD 命令行中，它给了我“构建成功”。但是当 activiti-explorer 链接自动打开时，它向我显示以下错误：-

**HTTP 状态 404 - /activiti-explorer

类型状态报告

消息 /activiti-explorer

描述 请求的资源 (/activiti-explorer) 不可用。**

那么可能出了什么问题？BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:02:07.113

我将 C:\Program Files\Java\jdk1.7.0_06\bin 添加到我的 PATH 中，它工作正常。

# java - 使用java将数据插入excel

> ID：12086573
> 
> 赞同：0
> 
> 时间：2012-08-23T07:16:49.683
> 
> 标签：java, sql, excel, syntax, odbc

我正在使用 java swing 构建一个独立的应用程序。和 excel 2007 表作为存储我的数据的后端。excel表格中有15列。我只需 5 列就可以将数据插入其中。但是当我尝试插入 15 列时它显示“语法错误”。一次可以插入的列数是否有限制？或者是否有其他用于冗长记录的语法？我是java新手。所以请帮帮我。在此先感谢:)我已经发布了编码的一部分

```
 try
                       {

                         String value1=t1.getText();

                         String value2=(String)c6.getSelectedItem();

                         String value3=t3.getText();

                         String value4=t4.getText();

                         String value5=t5.getText();

                         String value6 = (String) c4.getSelectedItem(); 

                         String value7=t7.getText();

                         String value8=t8.getText();

                         String value9 = (String) c1.getSelectedItem(); 

                         String value10 = (String) c2.getSelectedItem(); 

                         String value11 = (String) c5.getSelectedItem(); 

                         String value12 = (String) c3.getSelectedItem(); 

                         String value13=t13.getText();

                         String value14=t14.getText();

                         String value15=t15.getText();

           //connection to the database          

                  Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
               Connection con=DriverManager.getConnection("jdbc:odbc:testingApp");

          //Execute some sql and load the records into the resultset
                  Statement st=con.createStatement();
                String q = "insert into [sheet1$] (CRN,CR_NUM,SOW_N,PSM,LBG,TYPE,VALUE,REMARKS,STATUS,APPROVAL,PLATFORM,MODEL,START_DATE,END_DATE,CUM_VALUE) values ('"+value1+"','"+value2+"','"+value3+"','"+value4+"','"+value5+"','"+value6+"','"+value7+"','"+value8+"','"+value9+"','"+value10+"','"+value11+"','"+value12+"','"+value13+"','"+value14+"','"+value15+"')";
                 int ds = st.executeUpdate(q);
                 System.out.println("Inserted Sucessfully...!!!");

                  /* t1.setText(null);
                    c6.addItem(null);
                    t3.setText(null);
                    t4.setText(null);
                    t5.setText(null);
                    c4.addItem(null);
                    t7.setText(null);
                    t8.setText(null);
                    c1.addItem(null);
                    c2.addItem(null);
                    c5.addItem(null);
                    c3.addItem(null); 
                    t13.setText(null);
                    t14.setText(null);
                    t15.setText(null); */
                    }catch(Exception e)
                       {
                           System.out.println(e.getMessage());
                        }
                    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:33:03.003

如果你想要 xls/xlsx 格式，那么作为 sp00m sai，Apache POI 是最好的解决方案，
如果你想要 csv 文件，那么只需创建文本文件并在那里写入数据，用逗号分隔列，用“\n”字符分隔行

# android - 如何以编程方式通过 Wifi 获取连接在同一网络上的其他设备的 IP 地址？

> ID：12086578
> 
> 赞同：3
> 
> 时间：2012-08-23T07:17:23.083
> 
> 标签：android, ip, wifi, ip-address, android-wifi

我已经在我的 Android 手机中检查了它。启用 Wifi 后，它向我显示了已连接的网络，然后还提供了获取特定网络 IP 地址、信号强度等详细信息。

我能否以编程方式在 Android 2.3 版中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T16:27:08.400

路由器将 IP 分配给范围内的连接设备。例如说来自：

> 192.168.1.2 到 192.168.1.254

您可以根据您的设备子网和网关来计算，如下所示 -

> 地址：192.168.0.1 => 11000000.10101000.00000000 .00000001
> 
> 网络掩码：255.255.255.0 = 24 => 11111111.11111111.11111111 .00000000
> 
> 通配符：0.0.0.255 => 00000000.00000000.00000000 .11111111
> 
> =>
> 
> 网络：192.168.0.0/24 => 11000000.10101000.00000000 .00000000（C类）
> 
> 广播：192.168.0.255 => 11000000.10101000.00000000 .11111111
> 
> 主机最小值：192.168.0.1 => 11000000.10101000.00000000 .00000001
> 
> HostMax：192.168.0.254 => 11000000.10101000.00000000 .11111110
> 
> 主机/网络：254（私人互联网）

现在尝试从您的设备在 192.168.0.1 到 192.168.0.254 范围内发送 PING 命令，如果您收到回复，通过这种方式您可以了解网络中存在的其他设备。

# node.js - 在 Windows 7 中安装 Node.exe

> ID：12086580
> 
> 赞同：2
> 
> 时间：2012-08-23T07:17:38.013
> 
> 标签：node.js

目前我正在尝试学习什么是node.js。我已经在windows中安装了node.exe，不知道下一步该做什么

你们能帮帮我吗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:25:25.140

您创建一个 js 文件，编写代码并使用`node.exe path/to/file.js`. 之后，您可以打开浏览器并查看该程序。

这里是一个例子（`helloWorld.js`）：

```
var http = require('http');
var server = http.createServer(function(req, res) {
    res.writeHead(200);
    res.end('Hello World!');
}).listen(8080);

node.exe helloWorld.js 
```

打开浏览器并查看`localhost:8080`

另[请查看](http://nodejs.org/docs/v0.8.8/api/)文档。此外，您还可以在开发人员[页面](http://nodejs.org/)（底部）上找到如何设置网络服务器的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:29:50.873

您可以使用 IIS Express 在 Windows 上运行 nodejs。目前在 Windows 上，您可以使用来自[http://web.ms/的 webmatrix](http://web.ms/)

请记住，即使您的系统是 x64，您也需要使用 node.exe 的 X86，因为[IIS Express 仅提供 32 位。](http://tomasz.janczuk.org/2011/08/developing-nodejs-applications-in.html)

如果您安装 webmatrix 并尝试使用 nodejs，它会自动为您配置一切。

请记住，如果您尚未安装 nodejs，那么 webmatrix 将为您安装旧版本。您需要从其官方网站手动安装 node.js。

见贾斯汀的帖子[http://jbeckwith.com/2012/06/07/node-js-meet-webmatrix-2/](http://jbeckwith.com/2012/06/07/node-js-meet-webmatrix-2/)

[http://www.microsoft.com/web/post/how-to-use-the-nodejs-starter-template-in-webmatrix](http://www.microsoft.com/web/post/how-to-use-the-nodejs-starter-template-in-webmatrix)

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:28:47.377

由于您是在学习之后并且您在 Win7 机器上，您还可以在 IIS 中托管 node.exe。也许您会发现本指南很有帮助： [http ://www.hanselman.com/blog/InstallingAndRunningNodejsApplicationsWithinIISOnWindowsAreYouMad.aspx](http://www.hanselman.com/blog/InstallingAndRunningNodejsApplicationsWithinIISOnWindowsAreYouMad.aspx)

# java - 休眠空间：类型 org.hibernatespatial.GeometryUserType

> ID：12086586
> 
> 赞同：2
> 
> 时间：2012-08-23T07:17:55.300
> 
> 标签：java, hibernate, spatial

我正在使用 Hibernate Spatial 版本 4.0-M1。我在[这里](http://www.hibernatespatial.org/tutorial-hs4.html)学习教程。但是，我的代码失败并出现以下错误：`org.hibernate.MappingException: Could not determine type for: org.hibernatespatial.GeometryUserType, at #table_name# for column #geometry_column#`.

我的会话工厂创建类如下图：

```
public class HibernateUtil {
    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory from hibernate.cfg.xml
            sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
        } catch (Exception ex) {
            // Make sure you log the exception, as it might be swallowed
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

在寻找可能的原因后，我发现它与我的配置有关。我`hibernate.cfg.xml`的如下图：

```
<session-factory>

    <property name="connection.driver_class">org.postgresql.Driver</property>
    <property name="connection.url">jdbc:postgresql://localhost:5432/dbName</property>
    <property name="connection.username">dbUsername</property>
    <property name="connection.password">dbPassword</property>

    <property name="connection.pool_size">1</property>
    <property name="dialect">org.hibernatespatial.postgis.PostgisDialect</property>
    <property name="current_session_context_class">thread</property>
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

    <property name="show_sql">true</property>

    <mapping class="com.testapp.model.EntityClassWithAnnotations" />

</session-factory> 
```

任何关于我可能做错了什么的想法都将不胜感激。

**更新：**我的实体类如下所示：

```
@Entity
@Table(name = "table_name")
public class MyEntityClass implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Column(name = "gid")
    private Long gid;

    @Column(name = "adm1_name")
    private String  adminName;

    @Column(name = "adm1_code")
    private String adminCode;

    @Column(name = "pmal")
    private Double pmale;

    @Column(name = "pfem")
    private Double pfemale;

    @Type(type = "org.hibernatespatial.GeometryUserType")
    @Column(name = "the_geom", nullable = true)
    private Geometry geom;

    public MyEntityClass() {}

    public Long getGid() {
        return gid;
    }

    public void setGid(Long gid) {
        this.gid = gid;
    }

    public String getAdminName() {
        return adminName;
    }

    public void setAdmin_name(String adminName) {
        this.adminName = adminName;
    }

    public String getAdminCode() {
        return adminCode;
    }

    public void setAdmin_code(String adminCode) {
        this.adminCode = adminCode;
    }

    public Double getPmale() {
        return pmale;
    }

    public void setPmale(Double pmale) {
        this.pmale = pmale;
    }

    public Double getPfemale() {
        return pfemale;
    }

    public void setPfemale(Double pfemale) {
        this.pfemale = pfemale;
    }

    public Geometry getGeom() {
        return geom;
    }

    public void setGeom(Geometry geom) {
        this.geom = geom;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:36:30.140

**编辑**：我想我在你的 hibernate.cfg 文件中看到了错误，你使用了错误的方言。

将您的方言行替换为：

```
<property name="hibernate.dialect" value="org.hibernate.spatial.dialect.postgis.PostgisDialect"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-10T08:24:37.827

就我而言，`hibernate-spatial.jar`缺少包括`org.hibernatespatial.GeometryUserType`.

我们使用的是 Maven 和旧的 1.1.1 版本的休眠空间，所以在我将以下内容添加到 pom 之后，一切都很好：

```
<dependency>
    <groupId>org.hibernatespatial</groupId>
    <artifactId>hibernate-spatial</artifactId>
    <version>1.1.1</version>
</dependency> 
```

# java - maven组装的替代方案：单个用于包装

> ID：12086593
> 
> 赞同：1
> 
> 时间：2012-08-23T07:18:15.760
> 
> 标签：java, maven, maven-assembly-plugin

除了创建一个大的胖程序集之外，还有什么方法可以打包一个独立的 java 应用程序，这在某些情况下是可怕的，因为

1) 两个或多个 jar 的资源路径中的冲突文件（具有相同的名称，例如 reference.xml）被幸运者覆盖。

2) 如果不重新提取、合并和压缩，则无法更换单个 jar。

是否有更多关于爆炸战争文件的解决方案，所有库都在 lib 文件夹中，主类文件的 jar 包含清单条目。我确信我已经在 ant 中做到了这一点，并且肯定也可以在 maven 中完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:54:10.927

装配插件将是带有自定义描述符的不错选择：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-assembly-plugin</artifactId>
<configuration>
    <descriptors>
        <descriptor>assembly.xml</descriptor>
    </descriptors>
</configuration>
</plugin> 
```

在 assembly.xml 中：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
<id>bin</id>
<formats>
    <format>tar.gz</format>
</formats>
<includeBaseDirectory>true</includeBaseDirectory>
<fileSets>
    <fileSet>
        <directory>${project.build.directory}</directory>
        <outputDirectory>/</outputDirectory>
        <includes>
            <include>${project.artifactId}-${project.version}.jar</include>
        </includes>
    </fileSet>
</fileSets>
<dependencySets>
    <dependencySet>
        <outputDirectory>/lib</outputDirectory>
        <useProjectArtifact>false</useProjectArtifact>
        <unpack>false</unpack>
    </dependencySet>
</dependencySets>
</assembly> 
```

所有依赖项将在项目 jar 文件旁边的 lib 目录中的单独 jar 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:46:01.980

我倾向于使用[Mojo 的 AppAssembler Maven 插件](http://mojohaus.org/appassembler/appassembler-maven-plugin/)来制作发行版，然后使用[Maven 装配插件](http://maven.apache.org/plugins/maven-assembly-plugin/)将所有内容包装到一个`tar.gz`或`zip`包含发行版的文件中......有时我会更进一步并使用[Mojo 的 Unix Maven 插件](http://mojo.codehaus.org/unix/)来创建`.deb`和`.rpm`安装程序，并且我从需要使用[Mojo 的 NSIS Maven 插件的](http://mojo.codehaus.org/nsis-maven-plugin/)Windows 安装程序的人那里听到了好消息，尽管[Npanday 的 WiX Maven 插件](http://incubator.apache.org/npanday/docs/1.2/plugins/wix-maven-plugin/)应该能够做类似的事情，以前当我需要生成 Windows 安装程序时，我编写了自己的 WiX Maven 插件，但是源代码因为我以前的雇主仍然如此。

如果你走[AppAssembler](http://mojohaus.org/appassembler/appassembler-maven-plugin/)路线，我怀疑你可能更喜欢[repositoryLayout](http://mojohaus.org/appassembler/appassembler-maven-plugin/assemble-mojo.html#repositoryLayout)`flat`

# asp.net - “/”应用程序中的服务器错误。不提供此类页面

> ID：12086595
> 
> 赞同：6
> 
> 时间：2012-08-23T07:18:31.773
> 
> 标签：asp.net, razor, web-config

我有一个主机，在那里我托管了一个带有`.cshtml`扩展名的网页。我的主机是提供 ASP 和 .NET 托管的*arvixe.com*，但是当我尝试加载我的网页时，我收到此错误消息。

> “/”应用程序中的服务器错误。
> 
> 不提供此类页面。
> 
> 说明：您请求的页面类型未提供服务，因为它已被明确禁止。扩展名“.cshtml”可能不正确。请查看下面的 URL 并确保其拼写正确。
> 
> 请求的 URL：/samples/WoT/Default.cshtml
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.276

我读了一些东西我必须在我的 web.config 文件中写一些东西才能让它像这样工作

```
<compilation>
  <assemblies>
    <add assembly="System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
  <buildProviders>
    <add extension=".cshtml" type="System.Web.WebPages.Razor.RazorBuildProvider, System.Web.WebPages.Razor"/>
  </buildProviders>
</compilation> 
```

但是我尝试了所有方法，将其粘贴在不同的行上，但没有任何效果。我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T11:25:29.927

我相信您没有使用 MVC 功能并试图仅加载视图外部的剃刀视图或自定义区域文件夹。

然后您需要在 Web.config 中启用网页键，该键在 .Net 4.0 中默认禁用

```
<add key="webpages:Enabled" value="true" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-18T17:40:16.867

```
<appSettings>
<add key="webpages:Enabled" value="true" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-20T10:33:10.230

使用 IIS 10 在 Windows 10 Pro 中修复此问题是一场噩梦，花了两天时间，但我终于能够使用以下过程达到预期的结果：

1.  在 Visual Studio 中打开您的网站。您执行此操作的方法是转到**文件 > 新建 > 网站**，然后选择**ASP.Net 空网站**，然后在单击确定之前将位置更改为您的项目位置。就我而言，我的项目在`C:\inetpub\wwwroot\AspNet\Projects\Test`

2.  打开 Internet 信息服务管理器（单击“cortana”搜索并键入 IIS，只要您安装了它，它就会显示出来）。**在ServerName > Sites > Default Web Site > ...**下找到您的项目文件夹，右键单击它并单击**“转换为 Web 应用程序”**按钮。**在大多数情况下，通过单击“确定**”在提示符处接受默认值就足够了。

3.  使用以下 Web.Config 文件或类似文件。NuGet 可能会覆盖某些设置，但这不是一个大问题。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=301879
  -->
<configuration>
  <appSettings>
    <add key="webPages:Version" value="3.0.0"/>
    <add key="webpages:Enabled" value="true"/>
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    </assemblyBinding>
  </runtime>
</configuration>
```

4.  删除您的**bin**文件夹和**packages.config**文件（如果存在）。这是因为我们必须假设该 bin 文件夹中的某些内容已损坏，因为 IIS 旨在运行 Razor/ASP。在您的 Visual Studio 项目中，您需要刷新您的项目，以便它知道这些文件已被删除。这可以通过单击*解决方案资源管理器*框架顶部菜单中的刷新按钮来完成。在您的 Visual Studio 项目中，转到**工具 > NuGet 包管理器 > 包管理器控制台**并输入以下两个命令。

    安装包 Microsoft.AspNet.Razor -Version 3.0.0

    安装包 Microsoft.AspNet.WebPages

这足以让 IIS 10 在 Windows 10 Pro 上呈现 *.cshtml 页面。

# asp.net - 简单的通用处理程序服务图像

> ID：12086597
> 
> 赞同：1
> 
> 时间：2012-08-23T07:18:41.347
> 
> 标签：asp.net, visual-studio-2010, generic-handler

[ASP.NET 4.0 Visual Studio 2010]

嗨，我是 ASP.NET 的新手，我只是想：

*   创建一个通用处理程序，以便我的服务器端图像控件可以像 Image1.ImageUrl = "~/ImageHandle.ashx" 一样引用它

*   通过查询传递我的 Dropbox 帐户中的文件名，即图像文件的名称 (jpeg)

*   旋转图像并将其返回给我的调用代码。

但我真的很新，这就是我所拥有的，我不知道我做错了什么。

* * *

```
Public Class ImageHandle
Implements System.Web.IHttpHandler
Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
   Dim imgurl As String = "https://dl.dropbox.com/u/134313/Duel%20Portal%20Info/Images/" & context.Request("file").Replace("_", "%20") 'Number Changed for privacy reasons
    context.Response.ContentType = "image/jpeg"
    Dim img As System.Drawing.Image = Nothing
    Dim webc As New Net.WebClient, theBytes() As Byte
    Try

        theBytes = webc.DownloadData(imgurl)
        img = Byte2Image(theBytes)
        img = Rotate90Degrees(img)

    Catch ex As Exception
    End Try
    img.Save(context.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg)
End Sub
End Class 
```

* * *

只是图像不显示。ImageHandle 根本没有遇到断点。

我也不知道如何格式化 web.config 并包含它。非常感谢您的帮助。

编辑：到目前为止，这是我的 Web.Config。还是行不通！！请帮忙！

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
       <handlers>
           <add name="ImageHandle" path="~/ImageHandle.ashx" verb="*"/>
        </handlers>
 </system.webServer> 
```

# java - 如何在任务栏上限制多个 java 应用程序图标？

> ID：12086600
> 
> 赞同：2
> 
> 时间：2012-08-23T07:18:52.640
> 
> 标签：java, swing, user-interface, awt, taskbar

我在 java 中创建了一个具有多种形式的应用程序。在应用程序开始在按钮单击事件上打开新表单期间，在 Windows 的任务栏上，该表单的图标数量会增加。我想要的只是应用程序图标应该显示在任务栏上，无论是打开一个表单还是打开多个表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:26:37.703

我认为本教程将帮助您解决您的任务。

[使用 JDesktopPane 和 JInternalFrame 的多个文档接口](http://www.deitel.com/articles/java_tutorials/20060505/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:48:30.540

出现问题是因为每个`JFrame`都有一个任务栏图标。请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556)获取大量解决方案的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T09:45:41.393

如果您已经将新窗口作为 JDialog 并且仍然面临任务栏中有两个图标的问题，则可能是您正在创建模态 JDialog，如下所示：

```
JDialog dialog = new JDialog((JFrame) null, true); 
```

将`owner`（第一个）参数设置为 null，应用程序在任务栏中为对话框创建一个新图标。因此，为避免这种情况，只需在打开对话框时（例如，通过单击按钮）将对框架的引用传递给对话框构造函数。像这样：

```
public class MyBrandNewDialog {

    public MyBrandNewDialog(JFrame owner) {

        // create new modal dialog (the second argument is for modality)
        JDialog dialog = new JDialog(owner, true);

        // ...
} 
```

# iphone - Dropbox SDK 401 错误

> ID：12086603
> 
> 赞同：6
> 
> 时间：2012-08-23T07:19:09.083
> 
> 标签：iphone, objective-c, dropbox

我正在使用 Dropbox SDK，并且我已经对其进行了设置，因此该应用程序只能访问 /Apps/MyAPP 文件夹。我正在对其进行测试并在线删除了该文件夹。现在，当我在应用程序中而不是要求重新链接保管箱时，它会给我一个 401 错误。我不知道为什么它不显示视图。在我删除文件夹之前它正在工作（在线取消链接应用程序）。先感谢您。

> PageFlipper[66893:c07] [警告] DropboxSDK：向 /1/metadata/sandbox 发出请求时出错 - 令牌无效。2012-08-23 03:10:12.920 PageFlipper [66893:c07] 加载元数据时出错：错误域 = dropbox.com 代码 = 401“操作无法完成。（dropbox.com 错误 401。）”用户信息 = 0x23263fe0 {path=/, error=Token 无效。}

```
-(IBAction)addDropBox:(id)sender{
    if (![[DBSession sharedSession] isLinked]) {
        [[DBSession sharedSession] linkFromController:[self parentViewController]];
    }
    [[self restClient] loadMetadata:@"/"];
    restClient = nil;
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T17:26:14.977

我有同样的问题。就我而言，问题是我确实在连接用户**之前**设置了 restClient 。在这种情况下，未设置 userId 并且令牌无效。

我的 restClient 的 getter 现在看起来像这样：

```
- (DBRestClient *)restClient
{
    if (_restClient == nil) {
        if ( [[DBSession sharedSession].userIds count] ) {
            _restClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
            _restClient.delegate = self;
        }
    }

    return _restClient;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:07:49.127

我通过将代码更改为以下内容来解决问题。

```
[[DBSession sharedSession] linkFromController:(UINavigationController *)[[appDelegate window] rootViewController]]; 
```

# multithreading - 内存屏障和可见性 - x64

> ID：12086605
> 
> 赞同：1
> 
> 时间：2012-08-23T07:19:17.187
> 
> 标签：multithreading, synchronization, 64-bit, lockless

我已经阅读了有关 x64 上的内存排序的英特尔文档：http: [//www.multicoreinfo.com/research/papers/2008/damp08-intel64.pdf](http://www.multicoreinfo.com/research/papers/2008/damp08-intel64.pdf)。他们说锁定指令会导致完全障碍，从而使处理器可以看到例如指定的更新命令。但是，障碍引起的能见度并没有什么。障碍是否会导致其他处理器将立即看到变量的更新，或者更新可能只会以指定的顺序传播到其他处理器但没有指定的时间？

例如

线程1：

```
flag = true;
MemoryBarrier(); 
```

线程 2：

```
MemoryBarrier();
tmp = flag; 
```

如果线程 1 将在线程 2 之前执行其代码，线程 2 是否总是 flag=true？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:03:47.733

屏障保证其他处理器将按照指定的顺序看到更新，但不是在这种情况发生时。

这带来了后续问题，在多处理器系统中如何定义“立即”[1]，或者如何确保线程 1 在线程 2 之前执行？在这种情况下，一个答案是线程 1 使用诸如 xchg 之类的原子指令来存储标志变量，然后线程 2 在标志上旋转，并在它注意到值更改时继续（由于方式x86 内存模型有效，线程 2 可以使用正常的加载指令旋转，使用原子完成存储就足够了）

[1] 可以从相对论物理学的角度来思考，每个观察者（线程）通过自己的“光锥”看到事件。因此，必须为所有观察者放弃诸如单一通用时间之类的概念。

# matlab - 如何计算特定行中有多少个值 1

> ID：12086607
> 
> 赞同：1
> 
> 时间：2012-08-23T07:19:21.763
> 
> 标签：matlab, matrix

我有矩阵：

```
 A=[ 1 2 3 4 5 0 0 0 0 0 0;
     0 1 2 3 4 5 0 0 0 0 0;
     0 0 0 1 2 3 4 5 0 0 0;
     0 0 1 2 3 4 5 0 0 0 0;
     0 0 0 0 0 1 2 3 4 5 0;
     1 2 3 4 5 0 0 0 0 0 0] 
```

我想`1`在我的矩阵中搜索从 rows`4`到的数字`6`。只有在它之前的同一索引处的列元素小于`3`.

例如：

在行`4`中，数字`1`位于第 3 位，但在前一行的同一位置存在`3`行中的值。`1`因此，这应该被忽略并继续寻找下一个。

在 row `6`，条件失败，应该返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:40:17.460

怎么样

```
C = sum( A(4:6,all(A(1:6,:)<3,1)) == 1, 2) 
```

该部分`B = A(4:6,all(A(1:6,:)<3,1))`提取第 4 行到第 6 行，并对`<3`从第 1 行到第 6 行的所有列应用限制。然后，`B == 1`对各行求等和求和将导致

```
C = [0
     0
     1]; 
```

# c# - 异步套接字 + waitone()

> ID：12086608
> 
> 赞同：0
> 
> 时间：2012-08-23T07:19:31.127
> 
> 标签：c#, sockets, asynchronous

让我们从一些代码开始：

```
class InternetConnector
{
    private struct ConnectionData
    {
        public Action<Socket> SuccessHandler { get; set; }
        public ClientStateObject clientObj { get; set; }
        public Action<Exception> ErrorHandler { get; set; }
        public Socket Socket { get; set; }
    }
    public static ManualResetEvent processingDone = new ManualResetEvent( false );
    public static ConcurrentQueue<string> messages = new ConcurrentQueue<string>();

    public bool ReceiveMessage(Action<Socket> successHandler, Action<Exception> errorHandler)
    {
        ClientStateObject obj = new ClientStateObject();
        obj.server = client;
        var connectionData = new ConnectionData
        {
            ErrorHandler = errorHandler,
            SuccessHandler = successHandler,
            Socket = client,
            clientObj = obj
        };
        if (Connected)
        {
            client.BeginReceive(connectionData.clientObj.buffer, 0, ClientStateObject.bufSize, 0, new AsyncCallback(ReceiveCallback), connectionData);
            receive = true;
            receiveDone.WaitOne();
        }
        return receive;
    }

    private static void ReceiveCallback(IAsyncResult ar)
    {
        ConnectionData connectionData = new ConnectionData();
        bool complete = false;
        try
        {
            connectionData = (ConnectionData)ar.AsyncState;
            Socket client = connectionData.Socket;
            int num = client.EndReceive(ar);
            {
                connectionData.clientObj.stringBuffer.Append(Encoding.ASCII.GetString(connectionData.clientObj.buffer, 0, num));
                string response = connectionData.clientObj.stringBuffer.ToString();
                string[] msgs = response.Split('&');
                for (int i = 0; i < msgs.Count(); i++)
                {
                    string sts = msgs[i];
                    messages.Enqueue(sts + "&" );
                }
                receiveDone.Set();
                if (connectionData.SuccessHandler != null)
                {
                    connectionData.SuccessHandler(client);
                    processingDone.WaitOne();
                    client.BeginReceive(connectionData.clientObj.buffer, 0, ClientStateObject.bufSize, 0, new AsyncCallback(ReceiveCallback), connectionData);
                }
            }
        }
        catch (Exception e)
        {
            if (connectionData.ErrorHandler != null)
                connectionData.ErrorHandler(e);
        }
    }

public partial class Form1 : Form
{
    private InternetConnector client = new InternetConnector();
    private bool isRunning = false;

    private void AsyncSuccessHandler(Socket socket)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new Action( () => AsyncSuccessHandler( socket ) ));
            return;
        }
        if (InternetConnector.messages.Count() == 0)
        {
            status.Text = "Signals Receiver: Connected";
            status.ForeColor = Color.Green;
            isRunning = true;
            client.ReceiveMessage(AsyncSuccessHandler, AsyncErrorHandler);
        }
        else
        {
            GUIChangeOnConnection();
            InternetConnector.processingDone.Set();
        }
    }

    private void GUIChangeOnConnection()
    {
            for( int i = 0; i < InternetConnector.messages.Count; i++ )
            {
                string message;
                InternetConnector.messages.TryDequeue( out message );
// process the message
            }
    }
 } 
```

现在的问题。

一切正常。正在从套接字读取。但是`processingDone.WaitOne();`，应该无限期地阻止回调的调用，直到调用`processingDone.Set();`返回太早。

`GUIChangeOnConnection();`我通过在- 函数右括号行的末尾设置断点来验证它。它到达断点并查看`InternetConnector.messages`我看到队列不是空的，这意味着 for 循环没有完成。第二次命中此断点时，队列中的消息数量猛增。

我究竟做错了什么？或者我的设计不正确？

谢谢你。

# android - imageButton 在动画结束时闪烁

> ID：12086609
> 
> 赞同：0
> 
> 时间：2012-08-23T07:19:41.030
> 
> 标签：android, animation, button

我正在尝试制作一个可以移动的按钮。一切正常，直到动画结束。发生的情况是按钮消失并且收割速度非常快。

这是我的代码：

```
resetLayout = (RelativeLayout) findViewById(R.id.reset_layout);
    resetButton = (Button) findViewById(R.id.reset_button);
    resetLayout.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent mE) {

            delta = mE.getX();
            if (mE.getAction() == MotionEvent.ACTION_MOVE) {
                RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) resetButton
                        .getLayoutParams();
                params.setMargins((int) mE.getX() - 130, 0, 0, 0);
                resetButton.setLayoutParams(params);
            }

            if (mE.getAction() == MotionEvent.ACTION_UP) {
                final TranslateAnimation TAnimation=new TranslateAnimation(0, -mE.getX() + 50, 0, 0)   ;     
                TAnimation.setDuration(250);
                //TAnimation.setFillAfter(true);
                resetButton.startAnimation(TAnimation);
                TAnimation.setAnimationListener(new AnimationListener() {

                    public void onAnimationStart(Animation animation) {}
                    public void onAnimationRepeat(Animation animation) {}

                    public void onAnimationEnd(Animation animation) {
                        RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) resetButton
                                .getLayoutParams();
                        params.setMargins(-80, 0, 0, 0);
                            resetButton.setLayoutParams(params);

                    }
                });

            //  Handler handler = new Handler();
            //  handler.postDelayed(delayRunnable, 2);
            }
            return true;
        }
    }); 
```

如您所见`onAnimationEnd`，我正在更改按钮参数。所以，这将是动画停止。但你实际上可以看到它发生的瞬间。

为什么会这样，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T19:00:03.737

你可以尝试给予

```
TAnimation.setFillAfter(true); 
```

我认为这将解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:22:48.493

尝试添加这个

```
TAnimation.setFillBefore(true); 
```

到动画对象。

# selenium - Selenium2 中的 Web 驱动程序等待时间是否有任何限制

> ID：12086610
> 
> 赞同：0
> 
> 时间：2012-08-23T07:19:42.537
> 
> 标签：selenium, selenium-webdriver, webdriver, webdriverwait

selenium web 驱动程序中的等待时间是否有任何限制。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:45:10.747

我觉得答案是否定的。

但就我而言，我使用的最长等待时间是 10 秒。您将很快达到您所知道的时间量：

*   如果元素还没有出现，它可能根本不会出现
*   此外，等待超过 30 秒的时间通常是个坏主意。戴上你的用户帽子：你会等待服务超过 30 秒吗？
*   是的，我知道测试环境大多是精简和动力不足的。但是，如果测试服务需要很长时间，那么投资测试环境或至少进行性能测试是有意义的。

（最后一个例子：计算你在等待上花费的时间。乘以你的时薪。这么多钱是公司损失的仅仅是因为他们付钱给你什么都不做。但另一方面，我是测试人员，有时我很享受在等待部署的“工作”期间阅读书籍和喝咖啡的好时机 :) )

# git - Git 和 Dropbox - 本地仓库

> ID：12086611
> 
> 赞同：2
> 
> 时间：2012-08-23T07:19:45.953
> 
> 标签：git, backup, sync, dropbox, data-consistency

我已经阅读了许多主题并观看了许多关于结合 Dropbox 和 Git 功能的视频。一个这样的主题是：[有效地同时使用 Git 和 Dropbox？](https://stackoverflow.com/questions/1960799/using-gitdropbox-together-effectively)

这是我想做的：

*   我目前正在做一个大型的个人项目（只有我，不需要加密）。
*   工作在两台台式计算机（Win 7、Ubuntu）和一台笔记本电脑（OSx）上完成。
*   我希望我的文件可以从任何地方访问并在版本控制（git）下
*   对所有文件（通过 Dropbox.com）进行网络访问会很棒，所以如果我要安装 Git，就不需要安装 Git。借一台电脑。

大多数指南使用 Dropbox 来存放**远程**仓库。这没关系，但是必须在每台计算机上安装 git 才能访问文件，这样就无法通过 web 直接访问文件。

目前我在 Dropbox 中有我的文件和本地存储库（是的，我知道大小问题），以及学校 ssh 服务器上的远程存储库。这个想法是我可以选择在任何计算机上工作（即使没有提交），并且仍然能够使用计算机 #2 或 #3 继续工作并从那里提交。整体备份在 ssh 服务器上。

对此设置的任何想法将不胜感激。如果有人有更好的主意，请告诉我:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:43:43.770

我真的不认为 Dropbox 是一个很好的解决方案。对于您想要的，我可能会`git clone`使用 U 盘随身携带。

除此之外，我所知道的所有在线 git 主机（github 等）都允许您下载任何提交的 tarball，其中许多允许您就地编辑文件。

# iphone - iphone开发：随机动画

> ID：12086612
> 
> 赞同：0
> 
> 时间：2012-08-23T07:19:46.560
> 
> 标签：iphone, objective-c, animation, random, 2d-games

在我的 iphone 应用程序中，我有几个图像。让我们说一些小方形图像。我想要的是我希望小物体在 rondom 时间从屏幕顶部出现并从底部离开屏幕。我的意思是，例如，对象从 x:30 y:0 点随机出现（x 值必须是随机的）并从 x:30 y:460 离开并带有动画。

我正在编写一个 2d 赛车游戏，它们就是汽车。希望很清楚。

编辑：好吧，我尝试更改数字属于其他内容的框架。但是我无法获得图像的框架，而且我无法弄清楚如何多次随机生成位置。因为我打算把它放在 viewDidLoad 上。

```
[UIView beginAnimations:@"myAnimation" context:nil];
CGRect Frame = image.frame;
if(Frame.origin.y == 340){
    Frame.origin.y = 260;
}else{
    Frame.origin.y = 340;
}
image.frame = Frame;
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:17:36.707

您的示例代码未显示您的要求。也很难猜出你想要什么。

这是我对您所要求的内容的字面解释

```
for (int i = 0; i < 100; i++) {

    CGRect startFrame = CGRectMake(arc4random_uniform(320), -50, 50, 50);
    CGRect endFrame   = CGRectMake(arc4random_uniform(320),  
                                   CGRectGetHeight(self.view.bounds) + 50, 
                                   50, 
                                   50);

    UIView *animatedView = [[UIView alloc] initWithFrame:startFrame];
    animatedView.backgroundColor = [UIColor redColor];

    [self.view addSubview:animatedView];

    [UIView animateWithDuration:2.f
                          delay:i * 0.5f
                        options:UIViewAnimationCurveLinear
                     animations:^{
                         animatedView.frame = endFrame;
                     } completion:^(BOOL finished) {
                         [animatedView removeFromSuperview];
                     }];
} 
```

如果你坚持下去，`viewDidAppear:`你会看到 100 个对象以你想要的方式动画。显然这是非常低效的，你可能想看看回收视图等，但这显示了如何使用`UIView`带有一些随机点的动画来动画视图

# codeigniter - Pyrocms 页面上的分页

> ID：12086615
> 
> 赞同：0
> 
> 时间：2012-08-23T07:19:52.240
> 
> 标签：codeigniter, pagination, pyrocms

我目前在 pyrocms 页面上显示产品列表。使用插件我从数据库表中获取产品并将它们显示为我想使用分页但不知道如何使用它以及从哪里开始的列表。有没有人知道任何教程或有一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:25:27.797

您不需要加载分页库或初始化它。它与您在常规 codeigniter 中所做的有点不同，您也可以肯定地使用您在[codeigniter 分页类中的方式](http://codeigniter.com/user_guide/libraries/pagination.html)

我通常这样做是为了分页。

在你的控制器中使用这个

```
 ....
    // Create pagination links
    $total_rows = $this->products_m->count_all_products();
    $pagination = create_pagination('products/list', $total_rows);
    //notice that product/list is your controller/method you want to see pagination there        

    // Using this data, get the relevant results
    $params = array(
        'limit' => $pagination['limit']
    );
    $this_page_products = $this->product_m->get_all_products($params);
    ....
    //you got to pass $pagination to the view
    $this->template
            ->set('pagination', $pagination)
            ->set('products', $this_page_products)
            ->build('products/view'); 
```

显然，您将有一个名为`products_m` At your model 这将是您的`get_all_products`功能的模型，我相信您也可以构建该`count_all_products()`功能

```
private function get_all_products($params){
 //your query to get products here
 // use $this->db->limit();

 // Limit the results based on 1 number or 2 (2nd is offset)
        if (isset($params['limit']) && is_array($params['limit']))
                $this->db->limit($params['limit'][0], $params['limit'][1]);
        elseif (isset($params['limit']))
                $this->db->limit($params['limit']);
 //rest of your query and return
} 
```

现在在您的视图中，您必须`foreach`在传递的`$products`变量中显示分页链接，在您的视图中使用这一行

```
<?php echo $pagination['links'];?> 
```

我在我的作品中使用它，希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:07:46.190

Pyrocms 使用了 codeigniter 框架，这个代码在模块的情况下工作得很好，但我从来没有在插件上尝试过这个，但你仍然可以尝试这个。

在 Controller 中加载分页库

```
$this->load->library('pagination');

$config['base_url'] = 'http://example.com/index.php/test/page/';
$config['total_rows'] = 200;
$config['per_page'] = 20;

$this->pagination->initialize($config); 
```

在视图中使用此代码生成链接

```
echo $this->pagination->create_links(); 
```

# android - 触摸事件上的Android Imageview

> ID：12086616
> 
> 赞同：5
> 
> 时间：2012-08-23T07:20:00.400
> 
> 标签：android

我正在创建一个安卓应用程序。在这里，我有一个 imageview 。我的目标是在图像上移动手指时从数据库中获取下一张图片

```
float nPicturePositionM = 0;

public boolean onTouch(View v, MotionEvent event) {
    boolean aHandledL = false;
    if (event.getAction() == MotionEvent.ACTION_MOVE) {
        float nNewPicturePosL = event.getX();
        if (nPicturePositionM < nNewPicturePosL) {
            nPicturePositionM = nNewPicturePosL;
            GetPictures(true);
        } else {
            nPicturePositionM = nNewPicturePosL;
            GetPictures(false);
        }
        aHandledL = true;
    }

    return aHandledL;

    //return false;
} 
```

我如何使用触摸事件处理它？图像应该像我们在画廊中那样滑动

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T07:38:23.207

首先，您在 xml 中声明一个 imageview：

```
<ImageView
    android:id="@+id/imageview1"
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="45dp"
    android:layout_centerHorizontal="true" /> 
```

然后在您的活动中初始化组件：

私有 ImageView image1;

在 onCreate ：

```
this.image1= (ImageView)this.findViewById(R.id.imageview1);
this.image1.setImageResource(R.drawable.NAMEOFIMAGE); 
```

下一步是检测图像是否被“点击”。然后，您可以使用在线数据库或 SQLite 数据库来保存图像或图像的路径，其中的数据库部分是从头开始教授的很大一部分，具体取决于您要使用的路线：

```
 this.image1.setOnClickListener(new View.OnClickListener() {        
        @Override
           public void onClick(View view) {
            if (view == findViewById(R.id.imageview1)) {     
                         //PUT IN CODE HERE TO GET NEXT IMAGE
            }
            }
        }); 
```

我希望这有帮助。让我知道事情的后续 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:54:20.277

您必须使用数据库中的图像数组并在 Touch...like.. 的基础上进行设置。

```
img.setOnTouchListener(new OnTouchListener() 
        {

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) 
            {
                    img.setImageURI(uri[pos]);
                    pos++;
                    return false;
            }
        }); 
```

# android - measureText 在 Android 4.0 上总是返回 0

> ID：12086621
> 
> 赞同：0
> 
> 时间：2012-08-23T07:20:09.543
> 
> 标签：android

使用时

```
Paint.measureText(char[] buf, int start, int length) 
```

在 Android 4.0 上，它总是返回 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:20:09.543

这是 Android 4.0 中的一个已知问题，如此处[所述](http://code.google.com/p/android/issues/detail?id=23337)

可以应用以下解决方法：

```
char[] tmpBuf = new char[length];
for (int i = 0; i < length; i++) {
    tmpBuf[i] = buf[start+i];
} 
```

然后使用

```
paint.measureText(tmpBuf, 0, length); 
```

# c++ - 有没有办法在 C++11 中取消/分离未来？

> ID：12086622
> 
> 赞同：40
> 
> 时间：2012-08-23T07:20:09.747
> 
> 标签：c++, c++11, future

我有以下代码：

```
#include <iostream>
#include <future>
#include <chrono>
#include <thread>

using namespace std;

int sleep_10s()
{
    this_thread::sleep_for(chrono::seconds(10));
    cout << "Sleeping Done\n";
    return 3;
}

int main()
{
    auto result=async(launch::async, sleep_10s);
    auto status=result.wait_for(chrono::seconds(1));
    if (status==future_status::ready)
        cout << "Success" << result.get() << "\n";
    else
        cout << "Timeout\n";
} 
```

这应该等待 1 秒，打印“超时”，然后退出。它没有退出，而是再等待 9 秒，打印“Sleeping Done”，然后出现段错误。有没有办法取消或分离未来，所以我的代码将在 main 结束时退出，而不是等待未来完成执行？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-23T07:56:59.743

C++11 标准不提供取消以`std::async`. 您将必须实现自己的取消机制，例如将原子标志变量传递给定期检查的异步任务。

你的代码不应该崩溃。到达结束时`main`，`std::future<int>`保存的对象`result`被销毁，它将等待任务完成，然后丢弃结果，清理所有使用的资源。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-10-24T06:21:11.030

这里有一个简单的例子，使用原子 bool 同时取消一个或多个未来。atomic bool 可以包装在 Cancellation 类中（取决于口味）。

```
#include <chrono>
#include <future>
#include <iostream>

using namespace std;

int long_running_task(int target, const std::atomic_bool& cancelled)
{
    // simulate a long running task for target*100ms, 
    // the task should check for cancelled often enough!
    while(target-- && !cancelled)
        this_thread::sleep_for(chrono::milliseconds(100));
    // return results to the future or raise an error 
    // in case of cancellation
    return cancelled ? 1 : 0;
}

int main()
{
    std::atomic_bool cancellation_token;
    auto task_10_seconds= async(launch::async, 
                                long_running_task, 
                                100, 
                                std::ref(cancellation_token));
    auto task_500_milliseconds = async(launch::async, 
                                       long_running_task, 
                                       5, 
                                       std::ref(cancellation_token));
// do something else (should allow short task 
// to finish while the long task will be cancelled)
    this_thread::sleep_for(chrono::seconds(1));
// cancel
    cancellation_token = true;
// wait for cancellation/results
    cout << task_10_seconds.get() << " " 
         << task_500_milliseconds.get() << endl;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-02-12T21:52:53.033

我知道这是一个老问题，但在搜索时它仍然是“分离 std::future”的最高结果。我想出了一个简单的基于模板的方法来处理这个：

```
template <typename RESULT_TYPE, typename FUNCTION_TYPE>
std::future<RESULT_TYPE> startDetachedFuture(FUNCTION_TYPE func) {
    std::promise<RESULT_TYPE> pro;
    std::future<RESULT_TYPE> fut = pro.get_future();

    std::thread([func](std::promise<RESULT_TYPE> p){p.set_value(func());},
                std::move(pro)).detach();

    return fut;
} 
```

你像这样使用它：

```
int main(int argc, char ** argv) {
    auto returner = []{fprintf(stderr, "I LIVE!\n"); sleep(10); return 123;};

    std::future<int> myFuture = startDetachedFuture<int, decltype(returner)>(returner);
    sleep(1);
} 
```

输出：

```
$ ./a.out 
I LIVE!
$ 
```

如果 myFuture 超出范围并被破坏，线程将继续执行它正在执行的任何操作而不会导致问题，因为它拥有 std::promise 及其共享状态。适用于您有时更愿意忽略计算结果并继续前进的情况（我的用例）。

对于 OP 的问题：如果您到达 main 的末尾，它将退出而不等待未来完成。

这个宏是不必要的，但如果您要经常调用它，可以节省输入。

```
// convenience macro to save boilerplate template code
#define START_DETACHED_FUTURE(func) \
    startDetachedFuture<decltype(func()), decltype(func)>(func)

// works like so:
auto myFuture = START_DETACHED_FUTURE(myFunc); 
```

# hibernate-tools - hibernatetools ant 任务 - hbm2java - 在没有包语句的情况下创建 pojo

> ID：12086632
> 
> 赞同：0
> 
> 时间：2012-08-23T07:20:36.883
> 
> 标签：hibernate-tools, hbm2java

我正在使用 ant 任务将我的映射 (hbm.xml) 导出到 pojo 类。它在映射目录中生成 POJO 文件。但是 Classes 错过了 Package 声明。它只是在默认包中创建所有文件

```
// default package
// Generated Aug 23, 2012 12:34:40 PM by Hibernate Tools 3.2.2.GA 
```

这是我用于该任务的 ant 构建文件。

```
 <project name="Hibernate Tools for Ant - hbm2java" default="gensrc">

    <path id="tools">
        <path location="lib/hibernate-tools-3.2.3.GA.jar"/>
        <path location="lib/hibernate3.6.10.jar"/>
        <path location="lib/freemarker-2.3.8.jar"/>
        <path location="lib/hsqldb-2.2.4.jar"/>
        <path location="lib/commons-logging.jar"/>
        <path location="lib/dom4j-1.6.1.jar"/>
        <path location="lib/slf4j-api-1.6.1.jar"/>
        <path location="lib/hibernate-jpa-2.0-api-1.0.1.Final.jar"/>
    </path>
    <taskdef name="gen-src" classname="org.hibernate.tool.ant.HibernateToolTask"
             classpathref="tools"/>
    <target name="gensrc">
        <gen-src destdir="src/main/java">
            <configuration
                    configurationfile="src/main/resources/hibernate.cfg.xml">
                <fileset dir="src/main/java/com/kee/example/domain/maps">
                    <include name="Event.hbm.xml"/>
                </fileset>
            </configuration>
            <hbm2java destdir="src/main/java/com/kee/example/domain"/>
        </gen-src>
    </target>
</project> 
```

默认的 Pojo.ftl（在 hibernate-tools.jar 中）具有如下声明

```
 ${pojo.getPackageDeclaration()}
// Generated ${date} by Hibernate Tools ${version} 
```

为了在生成的 POJO 中有正确的包声明，我应该改变什么。

***更新：*** 这是我的映射文件

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.kee.example.domain">
    <meta attribute="generated-class">EventBase</meta>
    <meta attribute="implement-equals">true</meta>
    <meta attribute="scope-field">protected</meta>
    <class name="com.kee.example.domain.Event" table="event">
        <id name="id" type="java.lang.Long">
            <generator class="native"/>
        </id>
        <property name="eventDate" type="timestamp"/>
        <property name="eventString" type="java.lang.String"/>
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:14:46.357

我在 maven 中遇到了同样的问题，但不确定原因，但是一旦我开始使用*annotationconfiguration*而不是*jdbcconfiguration*就解决了。

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>hibernate3-maven-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <components>
                    <component>
                        <name>hbm2ddl</name>
                        <implementation>annotationconfiguration</implementation>
                        <outputDirectory>${db.src.dir}</outputDirectory>
                    </component>
                    <component>
                        <name>hbm2java</name>
                        <implementation>annotationconfiguration</implementation>
                        <outputDirectory>src/main/java</outputDirectory>
                    </component>
                </components>
                <componentProperties>
                    <drop>true</drop>
                    <create>true</create>
                    <export>false</export>
                    <format>true</format>
                    <jdk5>true</jdk5>
                    <ejb3>true</ejb3>
                    <outputfilename>${ddl.file}</outputfilename>
                    <templatepath>src/main/resources/hibernate-template</templatepath>
                    <delimiter>;</delimiter>
                    <configurationfile>src/main/resources/hibernate.cfg.xml</configurationfile>
                </componentProperties>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>${jdbc.groupId}</groupId>
                    <artifactId>${jdbc.artifactId}</artifactId>
                    <version>${jdbc.version}</version>
                </dependency>
            </dependencies>
        </plugin> 
```

我不想要带注释的 pojo 类，所以我在 *.ftl 文件中注释了代码。

# login - 如何通过代码将登录项添加到山狮osx

> ID：12086638
> 
> 赞同：6
> 
> 时间：2012-08-23T07:20:55.347
> 
> 标签：login, osx-mountain-lion

我想在 Mountain Lion (10.8) 中以编程方式添加登录项。

到目前为止，我可以通过编辑此 plist 添加登录项：

```
/Users/test/Library/Preferences/loginwindow.plist 
```

并将项目（路径，名称，隐藏）添加到`AutoLaunchedApplicationDictionary`操作系统中的字典不再起作用。添加到此字典的项目不会在登录时启动。我看到登录项保存在一个名为：`com.apple.loginitems.plist`

但我不明白如何向此文件添加项目。我尝试`CustomListItems`使用名称、路径、隐藏等参数将项目添加到字典中，但它们没有在登录时启动。

有谁知道如何从代码登录项中添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T02:05:23.403

我了解您希望在用户登录时自动启动程序。

在*旧*版本的*OS X*中，可以通过编辑*loginwindow.plist*手动添加登录项。[Apple在向操作系统添加](https://developer.apple.com/library/mac/documentation/macosx/conceptual/bpsystemstartup/Chapters/CreatingLoginItems.html#//apple_ref/doc/uid/10000172i-SW5-BAJJBJEG)*LaunchAgent*和*LaunchDaemon*功能 时弃用了这种方法。

由于您使用的是*Mountain Lion*，因此启动程序的正确方法是为其创建启动**代理**。这是一个*.plist*文件，您可以使用它来告诉 OS X **a ) 在****b)**发生特定事件时执行某些操作（例如：启动*/some/program.app*）（例如：登录、注销等）

 **[您将在此处找到 Apple 关于创建](https://developer.apple.com/library/mac/documentation/macosx/conceptual/bpsystemstartup/Chapters/CreatingLaunchdJobs.html#//apple_ref/doc/uid/10000172i-SW7-BCIEDDBJ)*LaunchAgents* 的官方文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T18:45:25.653

这看起来像是一个关于现代做事方式的很棒的教程：[登录沙盒项目的启动](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)

[它从隐藏在App Sandbox 设计指南](https://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html#//apple_ref/doc/uid/TP40011183-CH4-SW3)中的一段开始：

> **为您的应用创建登录项**
> 
> 要为您的沙盒应用程序创建登录项，请使用 SMLoginItemSetEnabled 函数（在 ServiceManagement/SMLoginItem.h 中声明），如守护程序和服务编程指南中的“使用服务管理框架添加登录项”中所述。
> 
> （对于App Sandbox，您不能使用LSSharedFileList.h头文件中的函数创建登录项。例如，您不能使用函数LSSharedFileListInsertItemURL。也不能操纵启动服务的状态，例如使用函数LSRegisterURL。）

然后从那里滚...**

# android - 从 Eclipse 导入 Android 项目后，依赖项列表中的项无效

> ID：12086639
> 
> 赞同：7
> 
> 时间：2012-08-23T07:20:58.863
> 
> 标签：android, eclipse, import, intellij-idea

将 Eclipse 中使用 Android 项目向导生成的通用 HelloWorld 项目导入 IntelliJ IDEA CE 后，我有两个错误：

```
invalid item 'com.android.ide.eclipse.adt.ANDROID_FRAMEWORK' in dependencies list
invalid item 'com.android.ide.eclipse.adt.LIBRARIES' in dependencies list 
```

如何正确导入项目以避免错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:02:38.107

您需要删除这些依赖项并[自己配置 Android SDK 和 JSDK](https://stackoverflow.com/a/5054197/104891)。

请注意，Android SDK 平台配置取决于 JDK 配置，因此您需要同时配置两者。

不要忘记运行`SDK Manager`以下载您将使用的 Android 平台。

# java - 当其中一个地址无效时，为什么 Transport.sendMessage 会失败？

> ID：12086641
> 
> 赞同：0
> 
> 时间：2012-08-23T07:21:01.493
> 
> 标签：java, email

我正在使用以下代码发送邮件

```
public void send() throws MessagingException
    {
        // create some properties and get the Session
        Properties props = new Properties();
        props.put("mail.smtp.host", this.getSMTPServer());

        if( this.getDebugMode() )
            props.put("mail.debug", "true");
        else
            props.put("mail.debug", "false");
        //Comment by Sandip for FIRSTMEDIA-578
        //props.put("mail.smtp.auth", "true");

        Session session = Session.getInstance(props, null);

        MimeMessage mail = new MimeMessage(session);

        //Set Mailer string in Header.. 
        mail.setHeader("X-Mailer", this.getMailer() );

        //Set TO Recipients, toList would be of comma separated if multiple addresses are there
        if( this.getTo() != null )
        {
            StringTokenizer st = new StringTokenizer(this.getTo(),",");
            InternetAddress[] recList = new InternetAddress[st.countTokens()];

            for (int r = 0; st.hasMoreTokens(); r++)
                recList[r] = new InternetAddress(st.nextToken().trim());          

            if(recList.length != 0 )
            {
                mail.setRecipients(Message.RecipientType.TO, recList);
            }

        }           

        //Set CC Recipients, bccList would be of comma separated if multiple addresses are there
        if( this.getCc() != null )
        {
            StringTokenizer st1 = new StringTokenizer(this.getCc(),",");
            InternetAddress[] copyList = new InternetAddress[st1.countTokens()];
            for (int c = 0; st1.hasMoreTokens(); c++)
                copyList[c] = new InternetAddress(st1.nextToken().trim());          

            if(copyList.length != 0 )
                mail.setRecipients(Message.RecipientType.CC, copyList);
        }           

        //Set BCC Recipients, bccList would be of comma separated if multiple addresses are there
        if( this.getBcc() != null )
        {
            StringTokenizer st2 = new StringTokenizer(this.getBcc(),",");
            InternetAddress[] bcopyList = new InternetAddress[st2.countTokens()];
            for (int c = 0; st2.hasMoreTokens(); c++)
                bcopyList[c] = new InternetAddress(st2.nextToken().trim());          

            if(bcopyList.length != 0 )
                mail.setRecipients(Message.RecipientType.BCC, bcopyList);
        }   

        // Create a mime message
        mail.setFrom(new InternetAddress(this.getFrom()));
        mail.setSubject(subject);

        //create mulitple parts to added
        Multipart mp = new MimeMultipart();

        MimeBodyPart mbp1 = new MimeBodyPart();

        //messageMIME can be "text/plain" or "text/html" or anything related to mime
        mbp1.setContent(this.getMsgText(),this.getContentType());
        mp.addBodyPart(mbp1);

        //Adding attachments to mail
        if( this.attachmentList != null )
        {
            for(int i=0; i < this.attachmentList.size() ; i++ )
            {
                MimeBodyPart mbp = new MimeBodyPart();
                FileDataSource fds = new FileDataSource((File)this.attachmentList.elementAt(i));
                mbp.setDataHandler(new DataHandler(fds));
                mbp.setFileName(fds.getName());
                mp.addBodyPart(mbp);
            }
        }

        mail.setContent(mp);
        mail.saveChanges();

        mail.setSentDate(new Date());

        // Send the message
        Transport trans = session.getTransport("smtp");
        trans.connect(this.getSMTPServer(), this.getSMTPUsername(), this.getSMTPPassword());
        trans.sendMessage(mail, mail.getAllRecipients());
        trans.close();

    } 
```

有了这个，当邮件发送到收件人列表中的一个收件人失败时，所有收件人的邮件发送都会失败。

是否有任何更改需要将邮件发送给列表中所有正确的邮件收件人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:33:46.533

如果您检查[Doc](http://javamail.kenai.com/nonav/javadocs/javax/mail/Transport.html#sendMessage%28javax.mail.Message,%20javax.mail.Address%5B%5D%29)，发送消息说：“将消息发送到指定的地址列表。指示传递状态的适当 TransportEvent 被传递到在此传输上注册的任何 TransportListener。此外，如果任何地址无效，则 SendFailedException被抛出。消息是否仍然成功发送到任何有效地址取决于传输实现。"

您可以尝试：

*   在您的代码中按一个发送它或
*   您可以捕获异常`SendFailedException`并检查是否 `getValidUnsentAddresses`已发送到尚未发送的有效地址。

我真的更喜欢第二个:)

检查[发送失败异常](http://javamail.kenai.com/nonav/javadocs/javax/mail/SendFailedException.html)

# iphone - 在 iPhone 中访问 typedef 枚举函数？

> ID：12086645
> 
> 赞同：1
> 
> 时间：2012-08-23T07:21:12.207
> 
> 标签：iphone, ios5, enums, typedef

我正在使用标头中的一些值来 typedef。我如何访问枚举值并在应用程序中使用任何人帮助我。

```
typedef enum{
INFO,PROD,WARN
}INFOS;
@interface ViewController : UIViewController{
     INFOS infos;
}
-(NSString *)method:(INFOS)infovalue;
- (void)viewDidLoad
{

 [self method:infos];

[super viewDidLoad];
}
- (NSString *) method:(INFOS) infovalue {
NSString *result = nil;

switch(infovalue) {
    case INFO:
        result = @"info";
        break;
    case PROD:
        result = @"prod";
        break;
    case WARN:
        result = @"warn";
        break;

    default:
        result = @"unknown";
}

return result;
} 
```

但视图加载后未调用该方法。我该怎么做。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:27:06.170

```
typedef enum{
   info = 1,
   prod = 2,
   warn = 3
}INFOS;

@interface ViewController : UIViewController{
     //INFOS infos; you do not need this
}
-(NSString *)method:(INFOS)infovalue;
-(void)viewDidLoad;
{

 [self method:info];

 [super viewDidLoad];
}
- (NSString *) method:(INFOS) infovalue {
NSString *result = nil;

switch(infovalue) {
    case 1:
        result = @"info";
        break;
    case 2:
        result = @"prod";
        break;
    case 3:
        result = @"warn";
        break;

    default:
        result = @"unknown";
}

return result;

 } 
```

# java - JPanel.getWidth() 不准确。为什么？

> ID：12086651
> 
> 赞同：0
> 
> 时间：2012-08-23T07:21:40.910
> 
> 标签：java, swing, user-interface, jpanel

我正在重写 JPanel 的`paintComponent()`方法来在屏幕上绘制一些东西。

这是它的样子：

![面板](../Images/49c8b39fb2148307141b84ed6f522585.png)

我正在使用以下代码来设置剪切区域。这样可以使边缘弯曲。

```
RoundRectangle2D r = new RoundRectangle2D.Double(0, 0, getWidth(), getHeight(), 100, 150);
g.setClip(r); 
```

* * *

显然，窗口右侧有问题。经过进一步检查，我发现 JPanel 的`getWidth()`方法没有报告正确的数字。通常，它会稍微偏离。例如：

```
Width = 500,  getWidth() = 492
Width = 1000, getWidth() = 992
Width = 100,  getWidth() = 192
Width = 350,  getWidth() = 342
Width = 600,  getWidth() = 592 
```

我的问题是，**为什么它*总是*如此错误？**为什么是`getHeight()`正确的？

如果没有编程方式来获得实际宽度，我应该简单地添加 8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:24:26.497

首先，小心剪裁。重绘管理器在将剪切矩形传递给您的组件时已经设置了它，并且您最终可能会在组件外部进行绘制（如果您已经创建了自己的缓冲区，那么就将自己淘汰）。

组件大小基于 0，这意味着您想要的宽度是`getWidth() - 1`

这与集合和数组的概念相同。

此外，当我在这里时，您假设窗口大小（例如 500）将环绕您的组件。这是相反的方式。由于窗口边框的原因，大小为 500 的窗口将生成小于该大小的组件。

# android - 处理地图显示/滚动/缩放的库？

> ID：12086656
> 
> 赞同：0
> 
> 时间：2012-08-23T07:22:05.613
> 
> 标签：android, google-maps, map, geolocation

为了避免一次又一次地重新发明轮子：Android 应用程序的一项非常常见的任务是显示地图（可选地使用来自谷歌、谷歌卫星、OSM 的数据）、滚动这些地图、放大和缩小并绘制一些自己的、附加的数据到他们。

我想避免实现已经存在于成熟状态的东西，所以我的问题是：是否有可用的免费库来执行这些任务并且也可以在自己的应用程序中使用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:24:52.187

那这个呢 ？ [https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

# mysql - MySQL InnoDB 数据库使用 .frm 文件和 ibdata 文件恢复

> ID：12086657
> 
> 赞同：0
> 
> 时间：2012-08-23T07:22:05.327
> 
> 标签：mysql, xampp, innodb, recover

嗨，我错误地从基于 Windows XP 的 PC 中删除了我的 MySQL 数据库（该数据库用于托管使用 Xampp 包的 Wiki 服务）。现在我正在尝试恢复数据，以便我至少可以检索在 Mediawiki 包的相应表中输入的文本。

删除后，我尝试使用 Minitool 数据恢复软件恢复数据，并且能够恢复包含 .frm 文件、ib_logfile0、ib_logfile1 和 ibdata1 的主模式文件夹（存储在 C>xampp>mysql>data 下）。

现在我正在尝试恢复数据库，以便我可以进行 SQL 转储并相应地使用它。我参考了专家之前提供的一些建议。以下是链接 -

[在 Windows 上恢复 MySQL InnoDB 文件](http://www.nerdydork.com/restoring-mysql-innodb-files-on-windows.html)

[Stackoverflow 答案](https://stackoverflow.com/questions/115681/mysql-innodb-database-restore)

但是这些对我没有多大帮助，不确定我在说明中到底遗漏了什么。最后我无法启动 MySQL 服务，它失败了，日志中出现以下错误 -

```
120823 12:17:04 [Note] Plugin 'FEDERATED' is disabled.
120823 12:17:04 InnoDB: The InnoDB memory heap is disabled
120823 12:17:04 InnoDB: Mutexes and rw_locks use Windows interlocked functions
120823 12:17:04 InnoDB: Compressed tables use zlib 1.2.3
120823 12:17:04 InnoDB: Initializing buffer pool, size = 16.0M
120823 12:17:04 InnoDB: Completed initialization of buffer pool
120823 12:17:04 InnoDB: highest supported file format is Barracuda.
InnoDB: No valid checkpoint found.
InnoDB: If this error appears when you are creating an InnoDB database,
InnoDB: the problem may be that during an earlier attempt you managed
InnoDB: to create the InnoDB data files, but log file creation failed.
InnoDB: If that is the case, please refer to
InnoDB: http://dev.mysql.com/doc/refman/5.5/en/error-creating-innodb.html
120823 12:17:04 [ERROR] Plugin 'InnoDB' init function returned error.
120823 12:17:04 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
120823 12:17:04 [ERROR] Unknown/unsupported storage engine: InnoDB
120823 12:17:04 [ERROR] Aborting 
```

从这种情况中恢复的任何帮助将不胜感激。如果需要，我愿意提供更多数据。[ `MySQL Server Version 5.5, xampp-win32-1.8.0-VC9`]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T19:26:02.500

哦，上帝终于解决了：）实际上我是一个新手，这就是为什么我无法快速解决这个问题。这是我遵循的工作流程。

*   我安装了 MySQL 服务器的新副本。为事务数据库运行向导配置。
*   我停止了 MySQL`Services.msc`
*   然后覆盖服务器 5.5/data 文件夹中的`ib* and *frm`文件（在模式文件夹下）`C/programdata/mysql/mysql`
*   将 my.ini 更新`C/apps/mysql`为`innodb_log_file_size=<actual size of iblogfile0>`
*   运行命令`mysqld --defaults-file="C:/apps/mysql/my.ini" --standalone --console --innodb_force_recovery=6`
*   一旦上述完成关闭`cmd.exe`
*   重新启动 MySQL 服务
*   打开 MySQL 工作台并转储

很抱歉让大家感到困惑。再次感谢。让我知道是否有人需要明确上述步骤。

# ios - 通过设置其中心属性来移动 UIView 的超级视图

> ID：12086658
> 
> 赞同：0
> 
> 时间：2012-08-23T07:22:05.657
> 
> 标签：ios, uiview, positioning, cgaffinetransform

我有一个非常奇怪的问题。我试图像这样手动旋转和移动 UIView 的超级视图`viewDidAppear`：

```
- (void)viewWillAppear:(BOOL)animated
{
    // ...

    [self.view.superview setTransform:CGAffineTransformMakeRotation(M_PI/2)];
    [self.view.superview setCenter:CGPointMake(100, 200)]; // (100, 200) is toy value

    // ...
} 
```

由于某种原因，旋转被正确应用，但超级视图的中心（即位置）根本没有移动。我还尝试将变换设置为`CGAffineTransform`旋转+平移（或仅平移）的组合，并且也不会移动超级视图。

如果它有所作为，`self.view.superview`是最顶层的视图（即`self.view.superview.superview`is `nil`）。

我在这里错过了一些非常简单的东西吗？

编辑：nielsbot 的评论是正确的，因为将它放入 viewDidLoad 是有效的，但是到那时，视图已经出现，所以它会闪烁到新位置。有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:27:32.480

尝试设置视图的边界，这样：

```
[self.view.superview setBounds:CGRectMake(x,y,self.view.superview.width,self.view.superview.height)]; 
```

这应该将您的视图移动到您给他的 x,y 位置但当然这不是中心

中心仅代表一个特殊点，例如用于旋转

# javascript - 如果单击任意位置，如何关闭框？

> ID：12086663
> 
> 赞同：0
> 
> 时间：2012-08-23T07:22:22.057
> 
> 标签：javascript, jquery

我有一个函数是自动建议的代码。这段代码效果很好。我只是想问您在文本框中输入文本后如何关闭该框。在我的代码中，当我尝试单击任意位置时，它并没有关闭该框。所以我想做的是当我点击任何地方时，框必须关闭。

这是我的 jQuery：

```
$(document).ready(function() {
    $(".text_search").keyup(function() {
        var searchbox = $(this).val();
        var dataString = 'searchword=' + searchbox;
        if (searchbox == '') {} else {
            $.ajax({
                type: "POST",
                url: "search1.php",
                data: dataString,
                cache: false,
                success: function(html) {
                    $("#display").html(html).show();
                }
            });
        }
        return false;
    });
});​ 
```

HTML：

```
<div class="search">
<form method="get" action="search.php" autocomplete="off">
<input class="text_search" type="text" name="q" id="q" value="Search people" onfocus="if (this.value == 'Search people') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search people';}">
</form>
</div>

<div id="display">
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:24:02.853

只需在文档正文上添加一个事件处理程序并在它打开时关闭该框。把它放在你身体的末端：

```
<script>
    $(window).ready(function(){
        $('body').click(function(){
            $("#display").hide();
        });
    });
</script> 
```

**编辑 ：**

如果您还希望在单击搜索框时再次启动搜索，请将脚本更改为：

```
$(document).ready(function() {
    var launchSearch = function() {
        var searchbox = $(this).val();
        var dataString = 'searchword=' + searchbox;
        if (searchbox == '') {} else {
            $.ajax({
                type: "POST",
                url: "search1.php",
                data: dataString,
                cache: false,
                success: function(html) {
                    $("#display").html(html).show();
                }
            });
        }
        return false;
    };
    $(".text_search").keyup(launchSearch).click(launchSearch);
    $('body').click(function(){
        $("#display").hide();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T07:24:53.970

尝试这个：

```
 $('body').click(function(){
        $("#display").hide();
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:27:39.493

```
$(document).click(function(e) {
                  if($(e.target).parents("#display").length == 0 && 
                     $(e.target).attr("id") != "display") {
                         $("#display").hide();
                    }
               }); 
```

您必须检查单击是否不在显示 div 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T07:28:12.370

尝试这个

```
$(document).ready(function(){
$('body').click(function(){
            $("#display").hide();
        });

$(".text_search").keyup(function()
{
var searchbox = $(this).val();
var dataString = 'searchword='+ searchbox;
if(searchbox=='')
{}
else
{
$.ajax({
type: "POST",
url: "search1.php",
data: dataString,
cache: false,
success: function(html)
{
$("#display").html(html).show();
}
});
}return false;
});
}); 
```

# c# - TreeView 多次触发 BeforeSelect 事件

> ID：12086664
> 
> 赞同：3
> 
> 时间：2012-08-23T07:22:22.937
> 
> 标签：c#, .net, winforms, treeview

我正在使用[Windows 窗体`TreeView`](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aspx)控件。

我连接它的方式如下（简化）：

```
TreeView treeView = new TreeView();

treeView.BeforeSelect += beforeSelect;

private void beforeSelect(sender, args)
{
     MessageBox.Show("Some msg");

     // more code
} 
```

在某些情况下，对***MessageBox.Show的调用会触发******BeforeSelect***事件的另一个引发，该事件会触发另一个，另一个，...

似乎在树视图中每个项目都会引发此事件（我已经计算过它被引发的次数）。

我已经在整个互联网上搜索了有关为什么会发生这种情况的更多信息。

我发现的一件事是 TreeView 在获得焦点时会自动选择第一个节点。然而，这并不能解释为什么事件被触发为树中树节点项目的数量。

任何帮助将不胜感激。我正在考虑为此提出一个 Microsoft Connect 错误，因为这似乎是一种非常奇怪的行为，与我认为控件的工作方式不一致。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:44:46.603

像下面这样简单地阻止自己就足够了吗？

```
private bool _inside;

private void beforeSelect( object sender, EventArgs args )
{
    if ( !_inside )
    {
        _inside = true;

        MessageBox.Show("Some msg");

        // more code

        _inside = false;
    }
} 
```

这将禁止您的函数的“递归”调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T07:51:47.867

默认情况下，[BeforeSelect](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.beforeselect.aspx)事件不会多次触发。

当您选择一个节点时，您会显示一个对话框（此处为消息框），该对话框会中断选择事件或任务，但是在您关闭对话框后，选择事件会根据中断再次触发。您应该使用Treeview 的[AfterSelect](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.afterselect.aspx)事件来做事……而[BeforeSelect](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.beforeselect.aspx)仅用于验证……

请看这段代码 - 运行它

```
void treeView1_BeforeSelect(object sender, TreeViewCancelEventArgs e)
{
    e.Node.Tag = (int)(e.Node.Tag ?? 0) + 1;
    int count = (int)(e.Node.Tag); 
    e.Node.Text = String.Format("selected {0} Count: {1}", e.Action.ToString(), count);
 } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-04-26T09:16:48.513

当你定义一个对象时，你应该这样写；

真写：

```
private static TreeView projectagac; 
...
...
...
projectagac = new TreeView(); 
```

因此您将只创建一个对象。

# visual-studio-2010 - 好的 MSbuild 日志格式化程序？

> ID：12086670
> 
> 赞同：4
> 
> 时间：2012-08-23T07:22:30.010
> 
> 标签：visual-studio-2010, visual-c++, msbuild, jenkins-plugins

我们正在使用 MSBuild 在构建服务器 (Jenkins) 上构建一个非常大的 Visual C++ 2010 解决方案（大约 150 个项目，完整构建大约需要一个小时）。不幸的是，当一个项目失败时，很难找出失败的原因和原因，因为控制台日志太长而且很难找到错误。

是否有一个很好的 msbuild 日志解析器或 msbuild 记录器，可以很好地列出所有失败的项目和错误消息？到目前为止，我们发现的最好的是[警告插件](https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin)，但在许多情况下这几乎没有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T08:15:07.183

我发现[Log Parser Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Log+Parser+Plugin)非常有用，尽管您需要提供自己的解析器文件（在 /jobs/vs_parsing_rules 中）。我使用以下，它适用于`msbuild`

```
error /[Ee]rror *:/
error /Error on line/
error /error [CM]/
error /fatal error/
error /unresolved external/
error /[aA]ccess is denied/
error /aborted/
warning /[Ww]arning *:/
warning /[Ww]arning C/
warning /WARNING/
warning /Couldn't/
warning /Can't/
warning /Cannot/
warning /ld.*unsupported/
error /[uU]ndefined symbols/
warning /[rR]eferenced from/
warning /[nN]ot found/
warning /exit status/
warning /no symbols/
error /ERROR[^A-Za-z]/
info /INFO/
start /BUILD/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T07:26:49.727

另一个适用于 msbuild 的有用解析规则：

```
# Divide into sections based on project compile start
start /^------/

# Compiler Error
error /(?i)error [A-Z]+[0-9]+:/
error /MSBUILD : (?i)error :/
error /\(\d+(,\d+)?\): (?i)error [A-Za-z]*:/

# Compiler Warning
warning /(?i)warning [A-Z]+[0-9]+:/ 
```

# ios4 - 我可以在 OSX 10.6.8 (Snow Leopard) 上安装 Xcode 4.2 吗？

> ID：12086671
> 
> 赞同：1
> 
> 时间：2012-08-23T07:22:34.310
> 
> 标签：ios4, xcode4.2

我的 Mac 有雪豹版本 10.6.8。我已经安装了 Xcode 3.2.5，我可以用我当前的操作系统版本更新到 xcode 4.2 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:26:28.797

是的你可以。4.2 是支持 Snow Leopard 的最后一个 XCode 版本，您需要更高版本的操作系统才能使用更新的版本。但是，您需要一个开发者帐户才能从 Apple 下载它。我并不是说您需要从 Apple 下载它。我把剩下的留给你想象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:25:00.057

不，不可能，您需要最新版本的 Mac OSX：Snow Lion (10.8) 才能运行 xCode 4.2。幸运的是，升级并没有那么贵，据说物有所值（已经购买了升级，但我自己没有安装:-)）

# php - 在大量文本中查找许多关键字的最佳可扩展方式？

> ID：12086678
> 
> 赞同：2
> 
> 时间：2012-08-23T07:23:22.130
> 
> 标签：php

每隔几分钟，就会有大约 500 个段落被提交到名为“内容”的表中的数据库中（这个数字将在几个月内达到 2,500 多个）。还有一个名为“Keywords”的表，它有 4,000 多行（预计将增长到 10,000 多行）。

```
Keywords
+------------+-------------------+
| Keyword_id | keyword           |
+------------+-------------------+
|          1 | "Venture Capital" |
|          2 | "Financing"       |
+------------+-------------------+ 
```

问题是：**在传入的文本段落中交叉引用每个关键字以查看是否匹配的解决方案的最佳方法是什么？**

因为我不关心段落中哪里有匹配（我唯一关心的是有匹配）； `if(preg_match()){}`可能会起作用，但即使在低端，也就是 2,000,000 次，您会在段落中搜索关键字。另外，如果我错了，请纠正我，preg_match 非常昂贵。

我想到的可能性之一是将关键字数组保留在缓存中，而不必为每一行调用数据库。我认为这肯定有助于加快速度。

我不关心这只是在 PHP 中。如果应用程序的这一部分需要在 Python 中（如果我错了，请纠正我，但我听说 Python 在解析文本方面要便宜得多），那么我全都听好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:45:03.483

使用 MySQL：

搜索查询：`Vent Capit`

使用[匹配](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)：

```
SELECT * FROM keywords WHERE MATCH (keyword) AGAINST ('+Vent* +Capit*' IN BOOLEAN MODE); 
```

如果您使用`_ci`排序规则（ci 代表不区分大小写），则匹配将忽略大写 :)

# nutch - nutch 1.4 中的自动重新抓取网站？

> ID：12086679
> 
> 赞同：0
> 
> 时间：2012-08-23T07:23:26.260
> 
> 标签：nutch, web-crawler

我想每天重新抓取我的网站 3 次。我知道我应该为此写一个脚本，但我不知道怎么做？而且我不知道如何运行脚本？有人可以逐步解释一下吗谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:43:29.463

编写一个shell脚本。可以使用以下结构：

1.  while 循环
2.  ......你用来调用 nutch 一次的命令
3.  ......睡几个小时
4.  结束循环

使用 nohup 或 screen 会话运行此脚本。它会很好用！

# android - Nexus 7 处理 jQuery Mobile：输入类型数字问题

> ID：12086684
> 
> 赞同：2
> 
> 时间：2012-08-23T07:23:41.103
> 
> 标签：android, jquery, jquery-ui, jquery-mobile, nexus-7

我目前正在开发一个实际使用`HTML Form`, 构建的应用程序`jQuery mobile`。该应用程序在平板电脑`version 2.3.4`上运行**良好**`input texts`（`input field`

 **有关信息，平板电脑在新版本的 Android ( `JellyBean, version 4.1.1`) 上运行。我正在处理的版本`1.7.1`和`jQuery`版本`1.1.0`。`jQuery` `mobile`

所以我的问题是：我应该将我的版本`jQuery mobile`升级到`1.2.0`（谁是实验性的但支持`JellyBean`）或者它是一个众所周知的错误`jQuery` `mobile`，一般来说是 Nexus 7？

非常感谢，

**编辑**：我注意到它只出现在数字字段中

前任 ：

```
<label id="lbl_nozone">Area id:</label>

<input name="nozone" id="nozone" type="number" maxlength="2" style="width:70px" 
openmrs-fieldtype="" openmrs-datatype="" openmrs-class="" openmrs-concept=""/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:23:51.247

有关信息，我解决了该错误。当您将 maxlength 属性设置为输入时，它会出现。

这是问题的错误：[35264](http://code.google.com/p/android/issues/detail?id=35264)

[这](https://stackoverflow.com/questions/11754575/jelly-bean-webview-not-working-well-with-html-maxlength-attribute-for-text-box)是 stackoverflow 的响应。**

# java - IllegalArgumentException 的原因是什么：kabeja 中的负宽度

> ID：12086686
> 
> 赞同：3
> 
> 时间：2012-08-23T07:23:55.950
> 
> 标签：java, exception, svg, dxf

`IllegalArgumentException: negative width`请问有人可以解释使用 Kabeja 包时引发异常的原因吗？

这是我得到的错误堆栈：

```
 java.lang.IllegalArgumentException: negative width
    at java.awt.BasicStroke.<init>(BasicStroke.java:181)
    at org.apache.batik.bridge.PaintServer.convertStroke(Unknown Source)
    at org.apache.batik.bridge.PaintServer.convertStrokePainter(Unknown Source)
    at org.apache.batik.bridge.SVGLineElementBridge.createFillStrokePainter(Unknown Source)
    at org.apache.batik.bridge.SVGDecoratedShapeElementBridge.createShapePainter(Unknown Source)
    at org.apache.batik.bridge.SVGShapeElementBridge.buildGraphicsNode(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.buildGraphicsNode(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.buildComposite(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.build(Unknown Source)
    at org.apache.batik.bridge.SVGUseElementBridge.buildCompositeGraphicsNode(Unknown Source)
    at org.apache.batik.bridge.SVGUseElementBridge.createGraphicsNode(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.buildGraphicsNode(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.buildComposite(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.buildGraphicsNode(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.buildComposite(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.buildGraphicsNode(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.buildComposite(Unknown Source)
    at org.apache.batik.bridge.GVTBuilder.build(Unknown Source)
    at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(Unknown Source)
    at org.apache.batik.transcoder.image.ImageTranscoder.transcode(Unknown Source)
    at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(Unknown Source)
    at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(Unknown Source)
    at org.kabeja.batik.tools.AbstractSAXSerializer.transcode(AbstractSAXSerializer.java:214)
    at org.kabeja.batik.tools.AbstractSAXSerializer.endDocument(AbstractSAXSerializer.java:156)
    at org.kabeja.svg.SVGGenerator.generateSAX(SVGGenerator.java:361)
    at org.kabeja.svg.SVGGenerator.generate(SVGGenerator.java:88)
    at org.kabeja.xml.AbstractSAXGenerator.generate(AbstractSAXGenerator.java:37)
    at BasicFunc.DXFFileLoad.parseFile(DXFFileLoad.java:54)
    at desktopapplication3.Foundation_details.jButton1ActionPerformed(Foundation_details.java:450)
    at desktopapplication3.Foundation_details.access$200(Foundation_details.java:12)
    at desktopapplication3.Foundation_details$3.actionPerformed(Foundation_details.java:147)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6263)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6028)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4574)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2475)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

请问有人可以解释这个例外的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:39:12.310

查看堆栈跟踪，似乎在尝试使用负宽度绘制形状的*笔触时触发了错误。*这当然是不正确的，因为不能有负宽度的笔画。SVG 规范甚至[提到负宽度是错误的](http://www.w3.org/TR/SVG/painting.html#StrokeWidthProperty)。

我会说DXF输入文件是错误的。它在 Autodesk 中渲染得很好吗？你能找到笔画错误的元素，看看它是如何显示的吗？

解决方案是向 Kabeja 项目提交错误报告，请求修复。根据该元素在 Autodesk 中的显示方式，负笔划宽度可能是：

1.  如果不应显示笔划，则设置为 0
2.  `abs`如果符号应该被忽略，则设置为olute 值，并且宽度`-1mm`应该与`1mm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-28T16:22:42.483

在 AUTOCAD 中保存 .dxf 文件时，只需将数据帐户设置为两位（或三位）小数
![设置截图](../Images/6b481bdf878ba2620f6ca533fada50c0.png)

# c++ - Windows 8 - 有没有办法激活多个拼写检查提供程序？

> ID：12086687
> 
> 赞同：0
> 
> 时间：2012-08-23T07:23:56.630
> 
> 标签：c++, windows-8, spell-checking, provider

因此，我正在构建自己的拼写检查提供程序，但它是针对某些情况的特定提供程序，并不能纠正所有错误。有没有办法通过我的提供商进行拼写检查，然后将单词转发给另一个提供商（Microsoft 拼写检查）？如果有人想扩展 Microsoft 拼写检查器功能，这将很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:37:22.147

您需要既是提供者又是客户端，但是当您是客户端时，无法请求特定的拼写检查提供者。这仅由用户控制。我从您的问题中猜测，尽管您想支持特定案例，例如法律或医学术语。如果是这种情况，您可能需要考虑仅添加这些术语的单词列表并允许内置提供程序处理。

# jquery - 将悬停手风琴转换为 onclick

> ID：12086690
> 
> 赞同：5
> 
> 时间：2012-08-23T07:24:14.510
> 
> 标签：jquery, jquery-ui, css, onclick, accordion

我有一个使用纯 css3 开发的手风琴菜单。目前它在悬停时打开菜单，但我希望它在点击时打开。我如何做到这一点？

还有一个帮助。目前内容 div 位于标题的右侧，但我需要在左侧打开它。

并且内容 div 应该具有基于内容的自动宽度。

这是[演示](http://jsfiddle.net/a545y/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:30:31.850

```
$('h3','.horizontalaccordion ul li').on('click',function() {
    $(this).closest('li').toggleClass('hover').siblings().removeClass('hover');
});​ 
```

​<a href="http://jsfiddle.net/a545y/15/" rel="nofollow"> **FIDDLE**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:37:10.207

我认为您不仅需要单击，还想关闭以前打开的面板，请查看以下代码：

```
$('h3','.horizontalaccordion ul li').click(function() {
  $('*[class*=hover]').removeClass('hover'); // close all opened tabs
  $(this).closest('li').addClass('hover'); // open the currently clicked one
});​ 
```

[jsFiddle 示例](http://jsfiddle.net/rostovtsev/Ra5CT/1/)

我希望这对你有用！

# iphone - UITableView 中的 UISegment 控件

> ID：12086692
> 
> 赞同：1
> 
> 时间：2012-08-23T07:24:31.047
> 
> 标签：iphone, uitableview, xcode4.2, uisegmentedcontrol

![在此处输入图像描述](../Images/022bd64f09e40714daf496b59507bff7.png)我在表格视图中添加了一个段控件，我的问题/问题是我需要根据选定的段在表格视图单元格中显示文本。

我遵循了一些教程，因为它们根据所选的段给了我标签中的文本。我`segmentControl.selectedIndexPath`也用过。那么任何人都可以告诉我如何根据所选的段将该对象数组设置为我的表格视图单元格？

如果我的英语有任何错误，请纠正我。

请帮我。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:00:52.930

首先，您必须将数据划分为不同的数组，这取决于您的要求，即段控制的数量。

在这里，如果有三个段控件，则根据段控件的选定索引在表格视图的委托方法中创建三个数组，将数组更改为在表格视图中显示。

就像 if `segmentControl.selectedIndex == 0`then `array1`if `== 1`then`array2`和 if `== 2`then一样`array3`。

在表视图的所有委托和数据源方法中。并在段控件的selecedIndexChange: 方法调用重载表。

快乐编码:)

**编辑 1**

对于分段控件的索引更改的表视图中的更改数据，您必须有一个`IBOutlet`用于 tableView 并使用它`IBOutlet`来更改`[tableView reloadData];`此处使用`tableView`的数据`IBOutlet`用于表视图。

快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:38:24.180

tableview的常用；在控制器中，您有一个包含对象的数组，可以说 _tableObjects 您已在控制器数据源方法中实现

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
     UITableViewCell *cell =......
     .................
     cell.labelText.text = [_tableObjects objectAtIndex:indexPath.row].name;
     return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
   return _tableObjects.count;
} 
```

因此，如果是这样，您可以在代码中的某处更改 _tableObjects 数组。

```
_tableObjects = myOtherArray;
[self.tableView reloadData]; 
```

# licensing - 借助蓝图开发汽车模型

> ID：12086693
> 
> 赞同：0
> 
> 时间：2012-08-23T07:24:31.177
> 
> 标签：licensing, blender, 3d-modelling, blueprint

我从网上（谷歌搜索）获取了一张汽车蓝图，以在 Belnder 3d 中开发汽车建模。我的问题是有任何与版权/许可相关的顾虑/问题吗？例如，如果我想为奥迪 A6 建模，从互联网上获取蓝图，奥迪人会有一些权利吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:28:54.633

几年前，我是一款拉力游戏的开发者，据我回忆，我们不得不与几乎所有人协商许可。我们根据蓝图、屏幕截图和诸如此类的东西开发了汽车。汽车制造商不会为您的游戏提供现成的模型 :)

然而，他们很容易对付。这完全取决于他们是否喜欢你给他们的那种曝光。最简单和最安全的选择是向他们发送电子邮件并询问。避免任何令人讨厌的惊喜。

# java - 如何在 Tomcat 中重新部署之前监控 PermGen 空间使用情况

> ID：12086703
> 
> 赞同：2
> 
> 时间：2012-08-23T07:25:00.080
> 
> 标签：java, tomcat, permgen, redeploy

为了确定 jvm 在下一次重新部署后是否可能会遇到 permgen 空间不足，我想事先监控当前的 permgen 空间使用情况

就像是：

```
set myPermGenThreshold = 0.51  (51%)
currentlyUsedPermGenSize = (...ask the jvm here... say it's 0.6)

if (currentlyUsedPermGenSize > myPermGenThreshold ) {
 (...restart tomcat...)
}
else {
  (...redeploy application...)
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T08:22:16.187

[Memory MX Bean](http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryMXBean.html)将为您提供所有非堆使用，其中 perm gen 是其中的一部分。perm gen 池本身的大小应该可以使用[Memory Pool MX Bean](http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryPoolMXBean.html)获得，但请注意池的名称是实现和 GC 相关的。

像往常一样，这两个 JMX bean 都可以从平台服务器获得，因此它们应该可以使用[JMX 客户端](http://docs.oracle.com/javase/tutorial/jmx/remote/custom.html)从外部获得。

编辑 - 链接更新到 1.7。

# android - Android 适配器 notifyDataSetChanged() 不清除以前的列表

> ID：12086715
> 
> 赞同：2
> 
> 时间：2012-08-23T07:26:30.810
> 
> 标签：android, arraylist, android-listview, android-adapter

我看到关于 notifyDataSetChanged() 有很多问题。我浏览了其中的许多，但没有一个解决方案对我有用。

我正在使用 ArrayList 来设置我的列表，并且在我的 ArrayList 更新后，我运行了 notifyDataSetChanged()。新列表将添加到前一个列表中。

假设第一个列表是 a，b，新列表是 a，b，c。我最后得到的是a，b，a，b，c。并且每次更新都会使用新列表再次发生。

我尝试过其他方法，例如 invalidate()、适配器 clear()、refreshDrawableState() 等，但没有任何效果。

先感谢您。

这是简化的代码，即使在我更改 .xml 文件中的代码后，更改 MainActivity 将 Activity 扩展为 ListActivity 也会使程序崩溃。

```
public class MainActivity extends Activity 
{
ArrayList<String> names = new ArrayList<String>();
ArrayAdapter arrayAdapter = null;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    ListView lv1 = (ListView) findViewById(R.id.listview);
    arrayAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, names);
    lv1.setAdapter(arrayAdapter);

}

//code here to edit the ArrayList names.

public void onResume() 
{
    super.onResume();  // Always call the superclass method first

    //the activity need to be updated everytime it resumes.
    arrayAdapter.notifyDataSetChanged();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:39:05.810

似乎您没有正确更新数组列表。请在更新后尝试记录数组列表内容。

# ruby-on-rails - 根据查询结果在 Rails 3 中生成报告

> ID：12086718
> 
> 赞同：0
> 
> 时间：2012-08-23T07:26:34.063
> 
> 标签：ruby-on-rails, ruby, report

我想**从任何数据库表或两个表的连接结果****生成**ruby​​ on rails报告。

 ***   报告应采用不同的**格式**，例如**：pdf、excel、csv、html 等。**

*   这在rails 3.2.6中是否可行。？？？

我知道**ruport** gem，但不知道如何使用它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:20:48.360

您可以使用像`Prawn`. 还有一个关于如何开始的 Railscast，很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T22:07:33.733

有各种宝石可用于不同类型的报告，如下所示：

```
pdf - pdfkit gem, wkhtmltopdf gem, pdftk plugin 
```

[https://rubygems.org/gems/wkhtmltopdf](https://rubygems.org/gems/wkhtmltopdf)

[http://rubygems.org/gems/pdfkit](http://rubygems.org/gems/pdfkit)

```
excel - spreadsheet gem 
```

[https://rubygems.org/gems/spreadsheet](https://rubygems.org/gems/spreadsheet)

```
csv - csv gem 
```

[http://rubygems.org/gems/fastercsv](http://rubygems.org/gems/fastercsv)

```
etc.. 
```

您可以根据自己的要求使用或使用。**

# xml - 用于 xml xml-tag 的 TSQL 仅一次

> ID：12086720
> 
> 赞同：1
> 
> 时间：2012-08-23T07:26:37.080
> 
> 标签：xml, tsql

我有以下 SELECT 查询：

```
SELECT
'2012' 'period',
Person.Name 'users/person'
FROM Person
FOR XML PATH(''), ROOT ('company') 
```

这给了我以下 XML：

```
<company>
  <period>2012</period>
  <users>
    <person>Dubach</person>
  </users>
  <period>2012</period>
  <users>
    <person>Pletscher</person>
  </users>
  <period>2012</period>
  .... 
```

我想在结果 XML 的开头只使用一次“句点”标签。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:50:09.670

```
DECLARE @period XML = '<period>2012</period>'
DECLARE @xml XML = (
        SELECT 
        Person.Name 'users/person'
        FROM Person
        FOR XML PATH(''), ROOT ('company')
    )

SET @xml.modify('insert sql:variable("@period") as first into (/company)[1]')

SELECT @xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:04:07.337

您可以将`users/person`元素的创建嵌套在子选择中，然后围绕它创建外部 XML：

```
declare @Person table (Name varchar(10))
insert into @Person values ('Bob'),('Harry')

SELECT
'2012' 'period',
(SELECT p.Name 'users/person'
FROM @Person p
FOR XML PATH(''), TYPE
)
FOR XML PATH(''), ROOT ('company') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:54:41.683

您可以随意使用显式模式来塑造它：

```
CREATE TABLE #person (
    name VARCHAR(10)
)

INSERT #person VALUES ('One')
INSERT #person VALUES ('Two')
INSERT #person VALUES ('Three')
INSERT #person VALUES ('Four')
INSERT #person VALUES ('Five')

SELECT
    1 AS Tag,
    NULL AS Parent,
    '2012' AS [company!1!period!ELEMENT],
    NULL AS [users!2!person!ELEMENT]
FROM
    (SELECT 1 AS fake) AS data
UNION ALL
SELECT
    2 AS Tag,
    1 AS Parent,
    '2012',
    P.name
FROM
    #person P
FOR XML EXPLICIT 
```

# python - 我想使用 python 在 file.data 中保存更多文本

> ID：12086724
> 
> 赞同：-1
> 
> 时间：2012-08-23T07:26:59.747
> 
> 标签：python, python-2.7

我有这个代码。

```
# -*- coding: utf-8 -*-
import pickle
import random

guessesTaken = 0

print('Hello! What is your name?')
name = raw_input()
number = random.randint(1, 20)
print('Well, ' + name + ', I am thinking of a number between 1 and 20.')

while guessesTaken < 6:
    print('Take a guess.') # There are four spaces in front of print.
    guess = raw_input()
    guess = int(guess)

    guessesTaken = guessesTaken + 1

    if guess < number:
        print('Your guess is too low.') # There are eight spaces in front of print.

    if guess > number:
        print('Your guess is too high.')

    if guess == number:
        break

if guess == number:
    guessesTaken = str(guessesTaken)
    print('Good job, ' + name + '! You guessed my number in ' + guessesTaken + ' guesses!')

has= str(name) + '    ' + str(guessesTaken)

f='toplevel.data'
f = open(f, 'wb')
pickle.dump(has, f) # depunem (engl. dump) obiectul în fişier
f.close() 
```

我有个问题。如果我再次玩这个“游戏”toplevel.data 将用新文件刷新。我希望如果我再次玩这个游戏 toplevel.data 不会用新文件刷新。我希望新文件放在旧文件之后，例如：旧文件新文件（1）新文件（2）新文件（3）...................... ............... 对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:36:05.847

如果我正确理解了您的问题，您希望在文件末尾而不是顶部写。

您可以以追加模式打开文件`a+`或将文件指针设置到末尾，`f.seek(-1,2)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:36:01.857

您可以尝试通过计算现有文件来对文件进行编号：

```
import os, glob

# ...

files = glob.glob('toplevel*.data')
filename = 'toplevel{n}.data'.format(n=len(files))

with open(filename, 'wb') as handle:
  pickle.dump(has, handle) # depunem (engl. dump) obiectul în fişier 
```

# c# - 从数组列表中的对象调用适当的方法

> ID：12086725
> 
> 赞同：1
> 
> 时间：2012-08-23T07:27:02.523
> 
> 标签：c#, inheritance, xna, polymorphism

我有许多来自基类的派生类。基类是 FormItem，派生类是 InputField、Label 或 Button。

在 FormItem 类中，我有许多虚函数，例如：

```
internal virtual void draw(parameters) {} 
```

该函数在每个派生类中都被重载。

我将派生类生成的对象存储在一个名为 formItems 的数组列表中。

当我这样打电话时：

```
((FormItem)formItems[index]).draw(parameters) 
```

我希望调用重载函数，因为基类中的函数是虚拟的。然而，基类的 draw() 方法被调用。

一个相当丑陋的解决方案是制作一个巨大的 if 语句，如下所示：

```
if (formItems[index] is Button)
  {
  ((Button)formItems[index]).draw(parameters);
  }
 else if (formItems[index] is Label) 
```

ETC...

但是我希望有一个更好的解决方案，不需要我创建这个巨大的 if-else 块，但允许我让编译器自动将我正在查看的项目解释为派生类的对象，并且调用适当的 draw() 方法。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:30:55.907

> ```
> internal virtual void draw(parameters) {} 
> ```
> 
> 该函数在每个派生类中都被重载。

我怀疑这是*真的*。为确保您自动调用正确的实现，必须在每个派生类中*重写*它，即

```
class Button : FormItem {
    internal override void draw(parameters) { /* actual impl */ }
    ...
} 
```

只要你`override`，它应该可以正常工作。

# android - 设置上下文操作栏的标题

> ID：12086729
> 
> 赞同：23
> 
> 时间：2012-08-23T07:27:22.593
> 
> 标签：android, android-actionbar

我想为上下文操作栏设置标题（如下图所示）。 ![在此处输入图像描述](../Images/6c224d666be68fd1a698c4df82710ffe.png)

我尝试了以下方法：

```
getActionBar().setTitle("Title for cab"); 
```

但标题没有出现。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-15T05:39:21.187

我设法通过调用 ActionMode 的 setTitle 方法来设置标题。

```
mActionMode.setTitle("Title for cab"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-25T10:20:16.923

这个答案对我有用

```
 @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {

        mode.setTitle(yourTitlehere);
        return false; // Return false if nothing is done
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-11T15:56:37.377

根据Android文档：

[http://developer.android.com/guide/topics/ui/menus.html#CAB](http://developer.android.com/guide/topics/ui/menus.html#CAB)

它可以`onItemCheckedStateChanged()`在创建`MultiChoiceModeListener`对象时在覆盖的方法中完成。

这可以解决问题。简洁明了：

```
@Override
public void onItemCheckedStateChanged(ActionMode mode, int position,
                                      long id, boolean checked) {
    // Set contextual action bar title
    mode.setTitle("Your title");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T22:11:23.883

我假设您不是在谈论文本的静态设置，并且您想在运行时更改它。如果是这样，@AmJay 的方法应该有效。如果没有，那么您应该在菜单项创建中使用 android:title 。

# java - 无协议的 URL 验证

> ID：12086736
> 
> 赞同：4
> 
> 时间：2012-08-23T07:27:44.087
> 
> 标签：java, url

我在 java 中使用 URLValidator 类来验证 URL 。但我希望如果用户不会在 URL 中提供任何协议，那么验证也应该作为有效返回。

正确解释：如果在 URL“http://www.google.com”中提供了它，那么它也应该是一个有效的 URL，如果提供了“www.google.com”，那么验证也应该作为有效的 URL 返回。

我已经尝试了很多。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:31:00.767

检查这是否适合您：

```
boolean foundMatch = false;
try {
    Pattern regex = Pattern.compile("\\b(?:(https?|ftp|file)://|www\\.)?[-A-Z0-9+&#/%?=~_|$!:,.;]*[A-Z0-9+&@#/%=~_|$]\\.[-A-Z0-9+&@#/%?=~_|$!:,.;]*[A-Z0-9+&@#/%=~_|$]", Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE);
    Matcher regexMatcher = regex.matcher(subjectString);
    foundMatch = regexMatcher.matches();
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:54:06.000

最好的办法是在没有协议的情况下添加 http（因为这是 url 的默认协议），然后验证 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:50:59.890

您的要求非常具体，不能一概而论。您正在使用的`URLValidator`验证正确。**协议字符串**（如 http://）的存在是URL 有效的**基本要求。**根据您的需要，您可以执行以下操作

1.  创建**自定义 URL 验证器**（通过扩展`URLValidator`或使用组合）。
2.  在其 validate 方法中，检查 URL 开头是否有协议字符串。如果它不存在，则添加它并调用`URLValidator`以实际验证 URL。

# php - 如何在 PHP 中使用 ORM

> ID：12086744
> 
> 赞同：3
> 
> 时间：2012-08-23T07:28:12.770
> 
> 标签：php, orm

我已经看到十几个主题和问题都在说明在 PHP 中使用 ORM（[30 个 php 初学者最佳实践](http://net.tutsplus.com/tutorials/php/30-php-best-practices-for-beginners/)以及[为什么在 php 中使用 orm](https://stackoverflow.com/questions/5592215/why-use-an-orm-in-php)）

所以我想知道，**如何**在 PHP 中使用 ORM。特别是OOPHP。

假设我们有一个类 User 并且我们正在注册一个。（我正在使用 RedBean）

```
<?php
class User {
    private $username;
    private $password;

    public function registerUser($username, $password) {
        require $root . "classes/Helper.php";
        $helper = new Helper();
        $salt = sha1($helper->generateSalt());

        $this->username = $username;
        $this->password = sha1($password + $salt);
        $this->salt = $salt;
        $this->store();
    }
    private function store() {
        $user = R::dispense(__CLASS__);
        $user->username = $this->username;
        $user->password = $this->password;
    }
}
?> 
```

这行得通。每次用户注册时，我都会存储它。还是将`store()`函数放在更好的`__construct()` 方法中？或者有更好的方法吗？它有用`__CLASS__`还是我应该更好地使用`'User'`？

```
private function load($username){
    $user = R::find(__CLASS__, 'username=?', array($username));
    $this->username = $user->username;
    $this->password = $user->password;
    $this->salt = $user->salt;
    $this->email = $user->email;
} 
```

现在，如果我想加载一个用户，我可以在我的页面中创建一个新的用户对象并调用`load()`以用所需的用户填充它。或者我应该直接使用`$userbean = R::find('User', 'username=?', array($username));`并将它放在一个`$user = new User();`？

我对可以完成几件事的方式感到有些困惑。这实际上是与面向对象的 PHP 一起使用的吗？

[编辑：] 那么，我使用 RedBean 和 OOPHP 的方法是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:51:13.763

这取决于您的 ORM，一般来说，您有一个关于 ORM 入门的常见问题解答。对于 DOCTRINE 2 ORM，您可以阅读[此页面](http://docs.doctrine-project.org/en/latest/index.html)，对于 PROPEL ORM ，您可以阅读此页面，对于redbean，您可以阅读[该](http://redbeanphp.com/community/wiki/index.php/Tutorial)[页面](http://www.propelorm.org/documentation/01-installation)。

对不起，我不知道 redbean，但是，对于其他 ORM，它可能很有用（我使用 Doctrine2），我们可以在那里与 OOPHP 一起使用。开始安装 ORM 后，当我们“调用”你的数据库中链接的 ORM 时接收 Object 更方便执行 SQL 请求并对每个请求进行处理...

对于用户不能像 SQL 或数据库，更方便，因为 ORM 负责优化请求......

# jquery - jQuery - 可拖动，拖动子项时拖动容器

> ID：12086748
> 
> 赞同：0
> 
> 时间：2012-08-23T07:28:27.393
> 
> 标签：jquery

我正在尝试使用 jQuery 中的 Draggable 库制作一些不错的东西。

我不想让 div 的一小块区域成为你必须拖动的“东西”，开始可拖动的动作，然后移动整个 div，而不仅仅是小区域。但我无法弄清楚如何做到这一点？

基本：拖动小框，使整个父div拖动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:42:41.280

我认为这就是你要找的：

[http://jqueryui.com/demos/draggable/#handle](http://jqueryui.com/demos/draggable/#handle)

# c# - 自定义电子邮件验证属性不起作用

> ID：12086752
> 
> 赞同：0
> 
> 时间：2012-08-23T07:28:49.110
> 
> 标签：c#, asp.net-mvc-3, validation

我正在创建自定义电子邮件验证属性，我的代码：

```
 public class EmailAttribute :  RegularExpressionAttribute
    {
        public EmailAttribute()
            : base("^[a-z0-9_\\+-]+(\\.[a-z0-9_\\+-]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*\\.([a-z]{2,4})$")
        { }
    } 
```

现在我将此属性放在电子邮件属性上，例如：

```
 [Required(ErrorMessage = "Required")]
    [Email(ErrorMessage = "Must be a valid Email")]
    public string Email { get; set; } 
```

但这并没有验证电子邮件，`Required`属性工作正常但`Email`不工作。谁能解释一下为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:32:47.223

当您使用正则表达式调用 base() 时，您正在设置错误消息。尝试将 RegularExpressionAttribute 用于基类或删除您的 EmailAttribute 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:44:52.280

服务器端验证应该可以正常工作。我认为您正在谈论客户端验证，为此您必须`IClientValidatable`在自定义电子邮件属性中进行接口，并且您还必须创建 jquery 适配器。

[你可以在这里](http://prideparrot.com/blog/archive/2012/4/model_validation_in_asp_net_mvc)看到一个例子。

# android - 如何解决android中的错误复制数据库错误？

> ID：12086756
> 
> 赞同：0
> 
> 时间：2012-08-23T07:29:03.670
> 
> 标签：android

我在 4.0 版本中创建了一个 android 应用程序，并将我的 sqlite 数据库保存在 assets 文件夹中。当我尝试在 2.3 版本中运行我的应用程序时，我收到错误“复制数据库时出错”。我尝试将 checkdatabase 方法更改为以下方法，但仍然无效。请任何人都可以指导我解决这个问题。

```
public boolean checkDataBase()
    {
    File dbFile = new File(DB_PATH + DB_NAME);
    return dbFile.exists();
    } 
```

**DBadapter.java**

公共类 DBAdapter 扩展 SQLiteOpenHelper {

```
private static String DB_PATH = "";
private static final String DB_NAME = "mydatabase.sqlite";
private SQLiteDatabase myDataBase1;
private final Context myContext1;

private static DBAdapter mDBConnection;

/**
 * Constructor 
 * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
 * @param context
 */
private DBAdapter(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext1 = context;
    DB_PATH = "/data/data/"
            + context.getApplicationContext().getPackageName()
            + "/databases/";
    // The Android's default system path of your application database is
    // "/data/data/mypackagename/databases/"

}

/**
 * getting Instance
 * @param context
 * @return DBAdapter
 */
public static synchronized DBAdapter getDBAdapterInstance(Context context) {
    if (mDBConnection == null) {
        mDBConnection = new DBAdapter(context);
    }
    return mDBConnection;
}

/**
 * Creates an empty database on the system and rewrites it with your own database.
 **/
public void createDataBase() throws IOException {
    boolean dbExist = checkDataBase();
    if (dbExist) {
        // do nothing - database already exist
    } else {
        // By calling following method 
        // 1) an empty database will be created into the default system path of your application 
        // 2) than we overwrite that database with our database.
        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */

private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {
        // database does't exist yet.
    }
    if (checkDB != null) {
        checkDB.close();
    }
    return checkDB != null ? true : false;
} 

/*public boolean checkDataBase()
{
File dbFile = new File(DB_PATH + DB_NAME);
return dbFile.exists();
}*/

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {
        // Open your local db as the input stream
    InputStream myInput = myContext1.getAssets().open(DB_NAME);
        // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;
        // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
        // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }////
        // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

/**
 * Open the database
 * @throws SQLException
 */
public void openDataBase() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    myDataBase1 = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);     
}

/**
 * Close the database if exist
 */
@Override
public synchronized void close() {
    if (myDataBase1 != null)
        myDataBase1.close();
    super.close();
}

/**
 * Call on creating data base for example for creating tables at run time
 */
@Override
public void onCreate(SQLiteDatabase db) {
}

/**
 * can used for drop tables then call onCreate(db) function to create tables again - upgrade
 */
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

// ----------------------- CRUD Functions ------------------------------

/**
 * This function used to select the records from DB.
 * @param tableName
 * @param tableColumns
 * @param whereClase
 * @param whereArgs
 * @param groupBy
 * @param having
 * @param orderBy
 * @return A Cursor object, which is positioned before the first entry.
 */
public Cursor selectRecordsFromDB(String tableName, String[] tableColumns,
        String whereClase, String whereArgs[], String groupBy,
        String having, String orderBy) {
    return myDataBase1.query(tableName, tableColumns, whereClase, whereArgs,
            groupBy, having, orderBy);
}

/**
 * select records from db and return in list
 * @param tableName
 * @param tableColumns
 * @param whereClase
 * @param whereArgs
 * @param groupBy
 * @param having
 * @param orderBy
 * @return ArrayList<ArrayList<String>>
 */
public ArrayList<ArrayList<String>> selectRecordsFromDBList(String tableName, String[] tableColumns,
        String whereClase, String whereArgs[], String groupBy,
        String having, String orderBy) {        

    ArrayList<ArrayList<String>> retList = new ArrayList<ArrayList<String>>();
      ArrayList<String> list = new ArrayList<String>();
      Cursor cursor = myDataBase1.query(tableName, tableColumns, whereClase, whereArgs,
                groupBy, having, orderBy);        
      if (cursor.moveToFirst()) {
         do {
             list = new ArrayList<String>();
             for(int i=0; i<cursor.getColumnCount(); i++){                   
                 list.add( cursor.getString(i) );
             }   
             retList.add(list);
         } while (cursor.moveToNext());
      }
      if (cursor != null && !cursor.isClosed()) {
         cursor.close();
      }
      return retList;

}   

/**
 * This function used to insert the Record in DB. 
 * @param tableName
 * @param nullColumnHack
 * @param initialValues
 * @return the row ID of the newly inserted row, or -1 if an error occurred
 */
public long insertRecordsInDB(String tableName, String nullColumnHack,
        ContentValues initialValues) {
    return myDataBase1.insert(tableName, nullColumnHack, initialValues);
}

/**
 * This function used to update the Record in DB.
 * @param tableName
 * @param initialValues
 * @param whereClause
 * @param whereArgs
 * @return true / false on updating one or more records
 */
/*public boolean updateRecordInDB(String tableName,
        ContentValues initialValues, String whereClause, String whereArgs[]) {
    return myDataBase.update(tableName, initialValues, whereClause,
            whereArgs) > 0;             
}*/

/**
 * This function used to update the Record in DB.
 * @param tableName
 * @param initialValues
 * @param whereClause
 * @param whereArgs
 * @return 0 in case of failure otherwise return no of row(s) are updated
 */
/*public int updateRecordsInDB(String tableName,
        ContentValues initialValues, String whereClause, String whereArgs[]) {
    return myDataBase.update(tableName, initialValues, whereClause, whereArgs);     
}*/

/**
 * This function used to delete the Record in DB.
 * @param tableName
 * @param whereClause
 * @param whereArgs
 * @return 0 in case of failure otherwise return no of row(s) are deleted.
 */
/*public int deleteRecordInDB(String tableName, String whereClause,
        String[] whereArgs) {
    return myDataBase.delete(tableName, whereClause, whereArgs);
}*/

// --------------------- Select Raw Query Functions ---------------------

/**
 * apply raw Query
 * @param query
 * @param selectionArgs
 * @return Cursor
 */
public Cursor selectRecordsFromDB(String query, String[] selectionArgs) {
    return myDataBase1.rawQuery(query, selectionArgs);      
}

/**
 * apply raw query and return result in list
 * @param query
 * @param selectionArgs
 * @return ArrayList<ArrayList<String>>
 */
public ArrayList<ArrayList<String>> selectRecordsFromDBList(String query, String[] selectionArgs) {       
      ArrayList<ArrayList<String>> retList = new ArrayList<ArrayList<String>>();
      ArrayList<String> list = new ArrayList<String>();
      Cursor cursor = myDataBase1.rawQuery(query, selectionArgs);           
      if (cursor.moveToFirst()) {
         do {
             list = new ArrayList<String>();
             for(int i=0; i<cursor.getColumnCount(); i++){                   
                 list.add( cursor.getString(i) );
             }   
             retList.add(list);
         } while (cursor.moveToNext());
      }
      if (cursor != null && !cursor.isClosed()) {
         cursor.close();

      }
      return retList;
   } 
```

}

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:30:05.150

**检查数据库**

```
 private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
        } catch (SQLiteException e) {
        // database does't exist yet.
        }
    if (checkDB != null) {
        checkDB.close();
    }
    return checkDB != null ? true : false;
} 
```

改变 ：

```
super(context, DB_NAME, null, 1); 
```

到 ：

```
 super(context, DB_NAME, null, 2); 
```

**创建数据库**

```
public void createDataBase() throws IOException {
    boolean dbExist = checkDataBase();
    if (dbExist) {
        // do nothing - database already exist
          // check if we need to upgrade
        openDataBase();
        int cVersion = myDataBase.getVersion();
        if(cVersion != 2){
            onUpgrade(myDataBase, myDataBase.getVersion(), 2);}
        close();
    } else {
        // By calling this method and empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.

        this.getReadableDatabase();
        try {
            copyDataBase();
            } catch (IOException e) {
            throw new Error("Error copying database");
            }
        }
} 
```

然后，如果数据库升级，您可以创建 onUpgrade 函数。我希望这有帮助。如果我遗漏了什么，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:54:09.757

尝试使用

```
 checkDB = SQLiteDatabase.openDatabase(myPath, null,
        SQLiteDatabase.CREATE_IF_NECESSARY); 
```

安装的

```
checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T21:43:20.720

检查以下链接。此方法在 4.0 和 2.3 上进行了测试。

[使用带有 SqliteOpenHelper 的预加载 sqlite 数据库](http://kdehairy.com/2012/08/19/using-a-preloaded-sqlite-database-with-sqliteopenhelper/)

# php - wordpress 中的插件问题

> ID：12086758
> 
> 赞同：0
> 
> 时间：2012-08-23T07:29:10.180
> 
> 标签：php, wordpress

**这是插件的代码：**

```
 <?php

        function np_init() {  
            $args = array(  
                'public' => true,  
                'label' => 'Nivo Images',  
                'supports' => array(  
                    'title',  
                    'thumbnail'  
                )  
            );  
            register_post_type('np_images', $args);  
        }  
        add_action('init', 'np_init');
          function np_widget{
               add_image_size('np_widget', 180, 100, true);  
        }
        function np_function {
        add_image_size('np_function', 600, 280, true);  
      }
          ?>
    <?php
    /*
      Plugin Name: Nivo Plugin
      Description: Simple implementation of a nivo slideshow into wordpress
      Author: Ciprian Turcu
      Version: 1.0
     */
    ?>
      <?php  function np_register_scripts() {  
            if (!is_admin()) {  
                // register  
                wp_register_script('np_nivo-script', plugins_url('nivo-slider/jquery.nivo.slider.js', __FILE__), array( 'jquery' ));  
                wp_register_script('np_script', plugins_url('script.js', __FILE__));  

                // enqueue  
                wp_enqueue_script('np_nivo-script');  
                wp_enqueue_script('np_script');  
            }  
        }  

        function np_register_styles() {  
            // register  
            wp_register_style('np_styles', plugins_url('nivo-slider/nivo-slider.css', __FILE__));  
            wp_register_style('np_styles_theme', plugins_url('nivo-slider/themes/default/default.css', __FILE__));  

            // enqueue  
            wp_enqueue_style('np_styles');  
            wp_enqueue_style('np_styles_theme');  
        }  ?> 
```

**我不知道在哪里放置以下代码行：**

```
add_action('wp_print_scripts', 'np_register_scripts');  
add_action('wp_print_styles', 'np_register_styles'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:14:32.987

你应该把`add_action`右边放在函数后面。例如：

```
function np_script()
{
 .....
 .....
} 
add_action('wp_print_scripts' , 'np_script');

function np_style()
{
 .....
 .....
} 
add_action('wp_print_styles' , 'np_style'); 
```

# iphone - UIScrollView 中 UIImageView 的 UISwipeGestureRecognizer

> ID：12086766
> 
> 赞同：0
> 
> 时间：2012-08-23T07:29:39.750
> 
> 标签：iphone, xcode, uiscrollview, uiimageview, uigesturerecognizer

我正在使用`UIImageView`in`UIScrollView`来显示图片库。
这是我的代码：

```
 [scrollView1 setBackgroundColor:[UIColor blackColor]];
    [scrollView1 setCanCancelContentTouches:NO];
    scrollView1.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scrollView1.clipsToBounds = YES;
    scrollView1.scrollEnabled = YES;
    scrollView1.pagingEnabled = YES;

NSUInteger i;
for (i = 0; i <= kNumImages; i++)
{
    imageView.userInteractionEnabled = YES;

    imageName = [NSString stringWithFormat:@"image%d.jpg", i];
    UIImage *image = [UIImage imageNamed:imageName];
    imageView = [[UIImageView alloc] initWithImage:image];
    imageView.contentMode = UIViewContentModeScaleAspectFit;

    CGRect rect = imageView.frame;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        rect.size.height = kScrollObjHeight;
        rect.size.width = kScrollObjWidth;

    }
    else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        rect.size.height = kScrollObjHeight_ipad;
        rect.size.width = kScrollObjWidth_ipad;
    }

    imageView.frame = rect;
    imageView.tag = i;
    [scrollView1 addSubview:imageView];
} 
```

现在我有一个保存按钮来将图像保存在库中。为此，我必须在滚动时找到每个图像标签。我认为可以通过检测滑动手势来实现`UIImageView`并且可以获取`imageView.tag`. 我搜索了很多东西，但没有得到太多的运气。我只知道很难识别滚动中的滑动。

我对这个手势的东西很陌生。谁能建议我该怎么做？
有没有其他方法可以获得特定的 imagetag ？或者，如果我只需要使用这个 Gesting Thins，那该怎么办？

任何帮助将是一个很大的帮助..！
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:18:38.823

在我看来，你有几个选择：

1.给你的UIImageView添加一个UISwipeGestureRecognizer，并在它的action方法中改变imageView的图像。例如

```
UISwipeGestureRecognizer *mySwipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] init];
[mySwipeGestureRecognizer addTarget:self action:@selector(gestureAction:)];
[imageView addGestureRecognizer:mySwipeGestureRecognizer];

-(void)gestureAction:(id)sender  //Here you can also make some validations so to make sure the gesture is finished
{
imageView.image = [UIImage imageNamed:@"someOtherImage"];
} 
```

然后只需保存 imageView 的图像。

2.另一种选择是根据图像的数量设置imageView的框架，然后简单地获取imageView的X坐标来计算它正在显示的图像。例如，

```
for(int i=0; i < numeberOfImages; i++)
{
imageView.frame = CGSizeMake(320*i,0,100,100);
[self.view addSubview:imageView];
} 
```

然后获取 scoll 的位置以确定正在显示的图像。

另外，我认为另一种方法是实现scrollView的委托和方法

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

有一个变量来计算用户滚动了多少次，然后计算正在显示的图像。不要忘记设置

```
scrollView.delegate = self; 
```

# codeigniter - 在 codeigniter 使用活动记录中使用限制 1 更新

> ID：12086767
> 
> 赞同：7
> 
> 时间：2012-08-23T07:29:39.977
> 
> 标签：codeigniter, activerecord

我正在尝试使用 codeigniter 的活动记录更新单个记录，但它仍然失败。

```
$data = array('status' => 1);

$this->db->where('field1', $info);
$this->db->update('example', $data);
$this->db->limit(1); 
```

当我运行更新数据库的所有字段时。通过制作 $ this->db->last_query() 不会向我显示限制

什么是错误

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T07:30:05.557

在应始终最后调用的更新之前移动限制：

```
$this->db->limit(1);
$this->db->update('example', $data); 
```

# jsp - 带有 Struts 框架的 Freemarker 模板

> ID：12086772
> 
> 赞同：1
> 
> 时间：2012-08-23T07:29:59.827
> 
> 标签：jsp, jakarta-ee, web-applications, struts, freemarker

我是 ftl 和 struts 框架的新手。我正在尝试将 index.ftl 作为欢迎页面并在 web.xml 中提到它。

但是当我运行我的项目时，它会显示错误 403，即拒绝访问错误。请帮助我为什么我无法将 ftl 作为欢迎页面以及为什么会发生此错误？

当我将 index.jsp 作为欢迎文件时，同一个项目正在正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:01:15.467

您是否正确地将您的 struts 操作映射到 index.ftl？就像是...

* * *

```
Struts.xml
<action name="homepage" class="someJavaFile.class">
       <result name="homePage" type="freemarker">
        <param name="location">/ftl/index.ftl</param>
    </result>
</action> 
```

* * *

一些JavaFile.java

```
//......Some Code........
public static string execute()
{
      //----Some Code-----
      return "homePage";
} 
```

# php - 如何在查询中只显示一定数量的帖子？

> ID：12086775
> 
> 赞同：0
> 
> 时间：2012-08-23T07:30:12.867
> 
> 标签：php, wordpress

我正在尝试在由 Wordpress 提供支持的网站主页中查询 3 个最新帖子：

```
 wp_reset_postdata();
    wp_reset_query();
    query_posts('showposts=3');
    rewind_posts();
    while (have_posts()) : the_post();
        // do stuff.
        the_title();
    endwhile; 
```

但是，正在显示 7 个帖子。此外，并非所有这 7 个帖子都是最新帖子。在此查询之上，还有其他查询。

如您所见，我尝试重置发布数据和查询数据无济于事。还有哪些其他因素会影响检索到的帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:04:12.463

确保不要将该代码放在另一个`have_posts`循环中。这应该有效：

```
query_posts( array( 'posts_per_page' => 3, 'orderby' => 'date', 'order' => 'DESC' ) );
    while (have_posts()) : the_post();
        // do stuff.
        the_title();
    endwhile; 
```

# c++ - 如何从重复继承的基类中消除覆盖虚拟的歧义？

> ID：12086777
> 
> 赞同：2
> 
> 时间：2012-08-23T07:30:23.867
> 
> 标签：c++, multiple-inheritance

考虑以下无效的 C++ 代码。

```
#include <assert.h>

class NodeInterface {
public:
    virtual ~NodeInterface () {}

    virtual int f (const int& n) const = 0;
};

class ChildNodeInterface : public NodeInterface {
public:
    virtual ~ChildNodeInterface () {}
};

class ParentNodeInterface : public NodeInterface {
public:
    virtual ~ParentNodeInterface () {}
};

class ChildNode : public ChildNodeInterface {
public:
    virtual ~ChildNode () {}

    virtual int f (const int& n) const {
        return 2*n;
    }
};

class ParentNode : public ParentNodeInterface, private ChildNodeInterface {
public:
    explicit ParentNode () :
        mChild (new ChildNode ())
    {
    }

    virtual ~ParentNode () {}

    ChildNodeInterface* GetChildHandle () {
        return this;
    }

    virtual int f (const int& n) const {
        return 3*n;
    }

private:
    ChildNode* const mChild;

    // How do I specify that I would like to override ChildNodeInterface::f?
    virtual int f (const int& n) const { // On MSVC2010: C2535 member function already defined or declared
        return 1 + mChild->f (n);
    }
};

int main()
{
    ParentNode parent;
    assert (parent.f (2) == 6);
    ChildNode node;
    assert (node.f (2) == 4);
    ChildNodeInterface* child (parent.GetChildHandle ());
    assert (child->f (2) == 5);
    return 0;
} 
```

我的目标是让`ParentNode`私下看起来像一个`ChildNode`，这样它就可以`ChildNode`在`ChildNodeInterface`. `ParentNode`因此可以有效地被视为`ChildNode`变相的-句柄，由 的简单性表示`GetChildHandle`。显然，如果`ParentNode`不重复从 继承`NodeInterface`，就不会有问题。因为，人们可以很容易地消除覆盖的歧义。以下正确示例说明了这一点：

```
#include <assert.h>

class ChildNodeInterface {
public:
    virtual ~ChildNodeInterface () {}

    virtual int ChildMethod (const int& n) const = 0;
};

class ParentNodeInterface {
public:
    virtual ~ParentNodeInterface () {}

    virtual int ParentMethod (const int& n) const = 0;
};

class ChildNode : public ChildNodeInterface {
public:
    virtual ~ChildNode () {}

    virtual int ChildMethod (const int& n) const {
        return 2*n;
    }
};

class ParentNode : public ParentNodeInterface, private ChildNodeInterface {
public:
    explicit ParentNode () :
        mChild (new ChildNode ()),
        mValue (1)
    {
    }

    ChildNodeInterface* GetChildHandle () {
        return this;
    }

    virtual int ParentMethod (const int& n) const {
        return 3*n;
    }

private:
    ChildNode* const mChild;
    const int mValue;

    virtual int ChildMethod (const int& n) const {
        return mValue + mChild->ChildMethod (n);
    }
};

int main()
{
    ParentNode parent;
    assert (parent.ParentMethod (2) == 6);
    ChildNode node;
    assert (node.ChildMethod (2) == 4);
    ChildNodeInterface* child (parent.GetChildHandle ());
    assert (child->ChildMethod (2) == 5);
    return 0;
} 
```

`ParentNodeInterface`但是，在和`ChildNodeInterface`都继承自的特殊情况下，`NodeInterface`就会出现歧义。从 中的断言中应该可以清楚地看出`main`，我的目标不是虚拟继承`NodeInterface`. 我打算对`NodeInterface::f`in进行真正不同的实现`ParentNode`。我想知道（如果可能的话）我如何区分`ParentNodeInterface::f`和`ChildNodeInterface::f`in的实现`ParentNode`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:56:16.023

我认为你的设计是错误的。您继承了 ChildNodeInterface 并且您的 ParentNode 类中有 ChildNode 成员？

Inherited ChildNodeInterface 不允许您使用 f 函数实现，因为 ChildNode 类不在继承树中。

C++ 不允许重新定义具有相同签名的函数两次。因此无法编写相同虚函数的 2 个实现。

所以你有2个选择：

1.  [最佳] 尝试以正确的方式使用继承重新定义您的类设计。钻石继承通常是由于糟糕的设计。
2.  [最快] 从 ChildNodeInterface 中删除继承，并更喜欢在 ParentNode::f() 函数中调用 mChild->f() 以将 Child 行为添加到父级：

    virtual int f (const int& n) const { return 3*n + mChild->f(n); 但我不知道这是否是你想要的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:16:45.263

请注意，`ChildNodeInterface`确实与`ChildNode::f()`.

但是要解决您的问题（我认为），而不是私下继承 from ，而是使用继承自该类型并覆盖该类型 `ChildNodeInterface`的辅助类型。可以维护指向其中一个对象的指针（或仅具有该类型的普通旧成员），并在调用时分配指向该对象的指针：`ChildNode``ChildNode::f()``ParentNode``ParentNode::GetChildHandle()`

```
// the helper class
class ParentNode;
class ParentsChildNodeInterface : public ChildNode {
public:
    virtual int f (const int& n) const;
};

class ParentNode : public ParentNodeInterface {

public:
    explicit ParentNode () :
        mChild (new ParentsChildNodeInterface ())
    {
    }

    virtual ~ParentNode () {}

    ChildNodeInterface* GetChildHandle () {
        return mChild;
    }

    virtual int f (const int& n) const {
        return 3*n;
    }

private:
    ParentsChildNodeInterface* const mChild;
};

// the new, special f() for children of parents...
int ParentsChildNodeInterface::f (const int& n) const {
    return 1 + ChildNode::f (n);
} 
```

正如所发布的，帮助类不需要访问`ParentNode`对象中的任何状态。但是，如果确实需要，您可以将助手类设为`friend`.`ParentNode`

# python - 在第二个列表中查找一个列表的第一个实例

> ID：12086779
> 
> 赞同：6
> 
> 时间：2012-08-23T07:30:29.960
> 
> 标签：python, list, numpy, set

我有两个清单。

第一个列表已经排序（通过一些其他标准），因此列表中越早越好。

```
sortedList = ['200', '050', '202', '203', '206', '205', '049', '047', '042', '041', '043', '044', '046', '045', '210', '211', '306', '302', '308', '309', '311', '310', '221', '220', '213', '212'] 
```

第二个列表是允许值的列表：

```
allowedList = ['001','002','003','004','005','006','007','008','009','010','203','204','205','206','207','212','213','215','216'] 
```

我想选择 allowedList 中存在的最高排序值，而我只是想出了一些愚蠢的方法。像这样的事情：

```
import numpy as np
temp = []
for x in allowedList:
    temp.append(sortedList.index(x))
np.min(temp) 
```

必须有比这更好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:34:46.890

这是没有 numpy 的情况下如何做到这一点的方法

```
>>> sorted_list = ['200', '050', '202', '203', '206', '205', '049', '047', '042', '041', '043', '044', '046', '045', '210', '211', '306', '302', '308', '309', '311', '310', '221', '220', '213', '212']
>>> allowed_list = ['001','002','003','004','005','006','007','008','009','010','203','204','205','206','207','212','213','215','216']
>>> allowed_set = set(allowed_list)
>>> next((x for x in sorted_list if x in allowed_set), None)
'203' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:46:34.857

`allowedlist`使用已经排序的事实的解决方案可能更有效（并且使用 a `set`，它们当然是 - 线性时间与二次），但仅出于完整性考虑，您现有的解决方案可以缩短很多，并消除临时列表：

```
min(allowedList, key=sortedList.index) 
```

这使用 Python 的[内置`min`函数](http://docs.python.org/library/functions.html#min)，而不是来自 numpy 的函数 -`np.min`主要仅在将它们与 numpy 数组一起使用时有用；使用列表时不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:43:45.573

```
allowedSet = set(allowedList)
i, a = next(((i, a) for i, a in enumerate(sortedList) if a in allowedSet), (-1, None)) 
```

`i`是第一个这样的元素 (3) 的索引，`a`是那个元素 ('203')。

如果，在任何情况下，这两个列表没有共同的元素，`i = -1`和`a = None`，您可以自己修改。

# android - android保存/重新加载设置

> ID：12086782
> 
> 赞同：0
> 
> 时间：2012-08-23T07:30:33.497
> 
> 标签：android, settings, android-actionbar

在我的应用程序中，我有 2 个活动，第一个是每个页面中带有列表的操作栏，第二个是设置活动，您可以在其中设置操作栏包含的数量和选项卡。一切正常，但最后一件事，我无法完成的是，当我设置设置并单击按钮时，如何回到第一个活动。我不想将意图和启动活动作为新的传递，因为 JSONRpc 客户端正在启动并且需要一段时间才能连接等，这会很烦人。我尝试完成（）第二个活动并调用 setActionBar onResume（），但它正在工作......有什么想法吗？谢谢..继承人一些代码：

第一项活动：

```
 public void onCreate(Bundle savedInstanceState){
 super.onCreate(savedInstanceState);

 Rubriky = ((HNapp) this.getApplication()).getRubriky();
 count=((HNapp) this.getApplication()).getCount(); 

 int catIndex = savedInstanceState == null ? 0 :savedInstanceState.getInt("catIndex", 0);
 setUpActionBar(catIndex);
 }
 //my try
 public void onResume(Bundle savedInstanceState){
    super.onResume();
    int catIndex = savedInstanceState == null ? 0 : savedInstanceState.getInt("catIndex", 0);
    Rubriky = ((HNapp) this.getApplication()).getRubriky();
    count=((HNapp) this.getApplication()).getCount();
    setUpActionBar(catIndex);
}

 //setting up actionbar
 public void setUpActionBar(int selTab) {

    ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayShowTitleEnabled(false);

    CABNavHan handler = new CABNavHan(this);

        actionBar.setNavigationMode(android.app.ActionBar.NAVIGATION_MODE_TABS);
        int i;
        for (i = 0; i < count; i++) {
            actionBar.addTab(actionBar.newTab().setText(Rubriky[i]).setTabListener(handler));
        }
    actionBar.setSelectedNavigationItem(selTab);
    actionBar.setDisplayUseLogoEnabled(true);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:26:49.463

1.  您是否已验证 count 正在按照您的预期更新 onResume （假设当您完成（）设置活动时，它会返回到后台堆栈中的现有操作）？

2.  我注意到 onResume 您正在对已填充的 UI 对象执行相同的行为。是否可能已经配置了此 UI 实例的 ActionBar 并且您需要更新它而不是重新创建它？从您提供的代码片段中很难分辨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:32:54.353

调用 onBackPressed(); 你想回到第一次活动的地方。

# c# - 从 EventStore 获取事件

> ID：12086793
> 
> 赞同：2
> 
> 时间：2012-08-23T07:31:28.127
> 
> 标签：c#, cqrs, neventstore

如果我想根据存储在 ES 中的所有历史事件填充新的 Viewmodel，我该怎么做？

我可以看到，`IPersistStreams.GetFrom(DateTime)`但一口气把它们全部搞定似乎有点吓人。

我认为分批获取它们是我正在寻找的。

EventStore 3.0 是我正在使用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T16:39:12.177

在引擎盖下，它不是“一次性完成”。EventStore 足够智能，可以代表您对结果进行分页，这样您就不会将数十万甚至数百万个事件加载到内存中。您甚至可以在 EventStore 连线期间配置分页大小。

# c# - 动作过滤器上的简单注入器属性注入

> ID：12086797
> 
> 赞同：6
> 
> 时间：2012-08-23T07:31:52.760
> 
> 标签：c#, .net, asp.net-mvc-3, dependency-injection, simple-injector

我要注入的动作过滤器是这样开始的

```
public class UserAuthorisation : AuthorizeAttribute
{
    public IWcfClientProxy<IAppFrameworkServiceChannel>
        FrameworkServiceProxy { get; set; } 
```

我已经像这样设置了我的容器：

```
container.Register<IWcfClientProxy<IAppFrameworkServiceChannel>>(
    ()=> new WcfClientProxy<IAppFrameworkServiceChannel>());

container.RegisterInitializer<UserAuthorisation>(handler =>
{
    handler.FrameworkServiceProxy = container
       .GetInstance<IWcfClientProxy<IAppFrameworkServiceChannel>>();
}); 
```

当我运行它时，该`FrameworkServiceProxy`属性为空。

我读过这篇文章：[简单注入器：在基类中注入属性](https://stackoverflow.com/questions/6227074/simple-injector-injecting-a-property-in-a-base-class)并遵循答案。我还阅读了此页面[Simple Injector Documentation](http://simpleinjector.codeplex.com/wikipage?title=Using%20the%20Simple%20Injector&referringTitle=Documentation)中的示例。

我没有注入基类，也许这就是问题所在？

### ＃＃ 更新 ＃＃

我正在添加更多信息，因为我认为它应该从史蒂文斯回答中所说的内容开始工作。

我正在为 MVC 3 使用 NuGet 包。这会将以下内容添加到应用程序中：

```
public static class SimpleInjectorInitializer
{
    /// <summary>Initialize the container and register it as MVC3 Dependency Resolver.</summary>
    public static void Initialize()
    {
        var container = new Container();
        InitializeContainer(container);
        container.RegisterMvcControllers(Assembly.GetExecutingAssembly());
        container.RegisterMvcAttributeFilterProvider();
        container.Verify();
        DependencyResolver.SetResolver(new SimpleInjectorDependencyResolver(container));
    }

    private static void InitializeContainer(Container container)
    {
        container.Register<IWcfClientProxy<IAppFrameworkServiceChannel>>(() => new WcfClientProxy<IAppFrameworkServiceChannel>());
        container.RegisterInitializer<UserAuthorisation>(handler =>
            {
                handler.FrameworkServiceProxy = container.GetInstance<IWcfClientProxy<IAppFrameworkServiceChannel>>();
            });
    } 
```

这包括`container.RegisterMvcAttributeFilterProvider();`我现在理解的应该注册一个过滤器提供程序，并且应该意味着过滤器是通过容器创建的（这种理解可能是错误的），然后属性会自动连接起来。

我的过滤器在 Global.asax.cs 中注册，如下所示：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new UserAuthorisation());
} 
```

在我看来，过滤器不是由容器创建的，所以我认为我需要做一些其他事情来实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T09:11:43.810

我选择了 Stevens 的答案作为答案，因为它让我找到了解决方案，我现在正在使用他在评论中提到的命令处理程序。

我做了一个简单的工作来注入我的全局过滤器。

在 App_Start\SimpleInjectorInitializer.cs 我添加了`RegisterGlobalFilters`这样的：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters, Container container)
{
    //Add simple injector resolved types.
    filters.Add(container.GetInstance<UserAuthorisation>());
} 
```

在`Initialize`我添加的方法中`RegisterGlobalFilters(GlobalFilters.Filters, container);`

完整的方法如下所示：

```
/// <summary>Initialize the container and register it as MVC3 Dependency Resolver.</summary>
public static void Initialize()
{
    var container = new Container();
    InitializeContainer(container);
    container.RegisterMvcControllers(Assembly.GetExecutingAssembly());
    container.RegisterMvcAttributeFilterProvider();
    container.Verify();
    DependencyResolver.SetResolver(new SimpleInjectorDependencyResolver(container));

    RegisterGlobalFilters(GlobalFilters.Filters, container);
} 
```

正如我所说的很简单。只需从简单的注入器中获取我的实例，然后将它们添加到全局列表中，我相信有更好的方法可以做到这一点。

这种方式确实意味着您不需要更改 global.asax.cs，这可能是一件好事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T07:57:10.780

您正在为您的`UserAuthorisation`属性注册一个初始化程序。然而，初始化器仅在容器本身创建类型时由容器使用。由于属性是由 CLR 创建的，因此初始化程序不会关闭。

SimpleInjector.Integration.Web.Mvc.dll（[这个 NuGet 包](http://nuget.org/packages/SimpleInjector.MVC3)）包含一个`RegisterMvcAttributeFilterProvider`扩展方法。这将注册一个`AttributeFilterProvider`将执行隐式属性注入（并调用该`container.InjectProperties`方法）的函数。调用之后`container.RegisterMvcAttributeFilterProvider()`，你会看到这个属性是自动注入的。

# php - mod_rewrite 最佳实践

> ID：12086799
> 
> 赞同：4
> 
> 时间：2012-08-23T07:31:54.693
> 
> 标签：php, apache, mod-rewrite

所以我刚开始搞乱 Apache 的重写模块，并想确保我有这个权利，因为我已经看到它以几种不同的方式完成。我的示例代码现在只是一个实验，但它可能最终成为我正在处理的一个新项目的基本结构。

这是我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_\-]+)/?$ index.php?id=$1 [L,NC]
</IfModule> 
```

我的索引文件：

```
<?php
include 'views/headerView.php';
switch(strtolower($_GET['id']))
{
    case "first": include 'views/firstPageView.php';
    break;
    case "second": include 'views/secondPageView.php';
    break;
    default: include 'views/homeView.php';
}
include 'views/footerView.php';
?> 
```

以及默认的 homeView 模板：

```
<p>This is the home page.</p>
<p>To the first page. <a href="first">First Page</a></p>
<p>To the second page. <a href="second">Second Page</a></p> 
```

我主要关心的是模板上的锚标签中只有“第一”和“第二”网址。url 用于索引文件上的开关，以确定要显示的视图。我这样做是因为当用户单击链接时，“first”或“second”一词将用于重写模块的反向引用，并在 url 中显示为 domain.com/first 而不是 domain。 com/?id=first。那么我是在正确的轨道上还是我错过了什么？任何有用的建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T20:51:09.847

> 那么我是在正确的轨道上还是我错过了什么？任何有用的建议将不胜感激，谢谢。

你在正确的轨道上。你在这里做的事情没有错。当然，您将不得不进行一些调整，但总的来说您走在正确的轨道上。您可能想要为您生成链接的东西，某种映射或其他东西。所以“第一个”和那个映射到“views/firstPageView.php”。然后，您可以在 index.php 中使用它来处理路由以及生成链接。因此，如果将“first”之类的内容更改为“something_else”，您将无需转到所有模板并手动更改它们。

此外，您让 mod_rewrite 规则处理可能的尾部斜杠。由于尾随斜杠，可能会弹出很多随机性。当 mod_dir 认为请求是针对目录时，Apache 将 301 将缺少尾部斜杠的 URL 重定向到包含尾部斜杠的 URL。您可能希望所有链接都带有斜杠以避免这种情况。此外，如果您有一个尾部斜杠，则相对链接`<a href="first">First Page</a>`可能会停止工作，因为 URI 基现在`/first/`而不是`/`.

# validation - 在 JPanel 中获取组件的值

> ID：12086802
> 
> 赞同：0
> 
> 时间：2012-08-23T07:32:11.243
> 
> 标签：validation, dynamic, components, jpanel, fetch

我在 Jframe 中有两个 JPanel。上面板有一个 JCombobox。根据上面板组合框中的选择，下面板由各种组件动态填充。要添加到下面板的组件的类型和数量始终是动态的。下面的一个例子 -

下JPanel：

JLabelA：JCombobox

JLabelB：JCombobox + JTextfield

JLabelC：JCombobox1 + JCombobox2 + JCombobox3

JLabelD：JList

用户可以在所需组件中选择/键入值，然后单击提交按钮。点击按钮。我需要进行自定义验证（例如，一些组件是强制性的，一些是可选的，在上面的 JLabelC 的情况下，已在所有三个组合框中选择了值）。通过所有验证后，我需要在下部面板中获取用户选择/提供的值。请注意，下部面板中的组件名称不固定，因此我无法直接获取值。一种方法是逐个遍历下部面板中的所有组件并选择值。这似乎不是很有效，因为我需要遍历所有内容，而我只需要遍历用户提供了一些输入的那些。

查询-

1) 我们如何将验证附加到组件（就像我们在 JavaScript 验证中所做的那样）？

2) 请建议获取组件值的替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:00:13.160

我已经看到（遗留）代码遍历 JComponents 并将多用途侦听器绑定/取消绑定到组合框、文本字段等。我记得它工作正常（它用于将“脏”侦听器附加到所有可编辑的小部件到那个防止用户留下未保存的更改）。

如果要进行实时验证，可以将 ChangeListeners 或 ActionListeners 附加到 JComboBoxes 或 JLists 和 DocumentListeners 到 JTextField 文档。我尝试过使用 InputVerifiers，但是当您使用组件焦点时，这通常会给用户带来问题。

# ios - InAppSettingsKit 文本字段

> ID：12086803
> 
> 赞同：0
> 
> 时间：2012-08-23T07:32:15.380
> 
> 标签：ios, iphone, settings, inappsettingskit

我有一个显示我的 InAppSettingsKit 的视图控制器。我有一个文本字段。问题是，每次按键都会触发 settingsChanged 事件。我可以更改它，因此用户必须按返回/完成/从文本字段中删除 fokus？

在此文本字段中，用户应输入我的应用程序缓存的大小。因此，假设缓存大小为 128 MB，因此如果用户要将其更改为 256 MB，则文本字段将包含 128，他将删除 128 并输入 256。在当前模式下，返回的数字将是

```
128 --> 12 --> 1 --> " " --> 2 --> 25 --> 256 
```

这不是我想要实现的解决方案。我想

```
128 --> 256 
```

我怎么能这样得到它？

问候亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T22:11:30.913

仅在关闭设置视图控制器后才使用新值。

# python - Mongo链接/引用：最有效的方式？例子？

> ID：12086807
> 
> 赞同：2
> 
> 时间：2012-08-23T07:32:38.130
> 
> 标签：python, mongodb, pymongo, database

我试图弄清楚如何将文档链接/引用到另一个文档，但我在文档或其他来源中找不到太多信息或示例。链接文档时，我必须通过 ObjectID 链接还是可以使用任何字段？我需要直接从原始文档中提取字段值，还是可以从任何地方传递相同的值？例如，给定一个 UUID 对象的十六进制字符串，我想通过包含 uuid1 对象的字段“GUID”链接 2 个文档：

```
 # What is more efficience/the correct way, option 1 or 2?

 # Option 1
 hexString = '5d78ad35ea5f11e1a183705681b29c47'
 newLinkField = { 'linkToSong' : uuid.UUID( hexString ) }
 db.artists.update( { 'name' : 'Bob Dylan' }, { $set : newLinkField }, upsert = False)

 # Option 2
 hexString = '5d78ad35ea5f11e1a183705681b29c47'
 songGUID = db.songs.find_one({ 'GUID' : uuid.UUID( hexString ) }, {'GUID': 1 });
 newLinkField = { 'linkToSong' : songGUID }
 db.artists.update( { 'name' : 'Bob Dylan' }, { $set : newLinkField }, upsert = False) 
```

此外，这是存储实际链接还是只是 UUID 对象的副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:42:38.070

我强烈推荐这个 10gen 视频，以了解链接和嵌入、如何使用它们以及权衡是什么：

[http://www.10gen.com/presentations/mongosv-2011/schema-design-principles-and-practice](http://www.10gen.com/presentations/mongosv-2011/schema-design-principles-and-practice)

要回答您的问题：将文档 A“链接”到文档 B 只是意味着将*一些*信息放入 A 中，以允许您的应用程序查询 B。通常，它会是这样的：

```
// Document A, in collection 'comments':
{ _id: ObjectId('123...'), user: ObjectId('abc...'), text: 'Hi!' }

// Document B, in collection 'users':
{ _id: ObjectId('abc...'), name: 'Jesse' } 
```

文档 A，我的评论，链接到 B，我的用户资料。您的应用程序可以查询它想要的 A（按 _id、按用户、按文本……），然后检查其“用户”字段，然后通过查询该 ObjectId 的用户集合来查找我的用户配置文件。

您用于将 A 链接到 B 的字段在 B 的集合中应该是唯一的，并且*绝对*应该在 B 的集合中被索引。

任何集合的 _id 字段始终满足这两个要求，但也可以由其他一些字段满足。

你的例子1很好。尽管您可能会反过来：歌曲中应该有艺术家 ID，而不是相反，除非 Bob Dylan 只写过一首歌。

在示例 2 中，如果您已经知道将如何查询艺术家文档，则在艺术家​​之前查找歌曲是不必要且昂贵的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T08:50:46.907

[Mongoengine](http://mongoengine.org/)可以在开箱即用的模型之间进行引用。但是对于面向文档的数据库，这确实是一件坏事。因为您可能会在扩展数据库时遇到问题，并且基于引用解决会降低 noSQL 数据库的性能。随意在一张唱片中写入您需要的所有数据，例如，如果您需要为歌曲创建唱片，您可以这样做：

```
{'title': 'Black and white', 'singer': 'M Jackson', 'album': 'Some album' and etc} 
```

不要害怕数据开销，面向对象的数据库主要是为这些东西设计的。

# scala - Scala^Z3：删除先前的断言

> ID：12086809
> 
> 赞同：3
> 
> 时间：2012-08-23T07:32:42.357
> 
> 标签：scala, z3

我想使用 Scala^Z3 进行增量求解。在每次迭代中，我想

a）添加公式的一部分

b) 添加断言

应该为接下来的每次迭代保留公式，但如果我不能实现它，我需要删除断言，因为下一次迭代中的断言会有所不同。

那么有没有办法删除以前的语句？Z3Context.pop() 听起来有点像我需要的，但我找不到它的作用的描述..

将非常感谢那里的一些帮助！

最良好的祝愿，1428162

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:51:33.070

是的，你是对的，你想`pop`（删除）最后一个断言。为此，您首先需要将当前的断言集保存为`push`. 这就是 Z3 支持作用域的方式。

通过添加公式的某些部分，我将假设您的意思是定义一个变量，其中包含您正在执行增量检查的一些原始大型公式的附加块。我还将假设原始公式是子公式的大合取。这个新公式将在推送和弹出之间保持定义（假设您保留一个引用它的变量）。

这是z3py中大致以下伪代码示例的链接，除了在z3py脚本中，我还假设公式和约束实际上是同一件事，但也许你想根据那块创建一些不同的约束子公式： [http:](http://rise4fun.com/Z3Py/LIxW) //rise4fun.com/Z3Py/LIxW

我没有使用过 Scala^Z3，但大致上你想做以下事情：

```
formula // list containing parts (sub-formulas) of original large formula
while (formulaPart = formula.removeFirst()) // remove first element of list
    Z3Context.push() // save current set of assertions

    assertion = makeConstraint( formulaPart ) // assertion based on sub-formula

    Z3Context.assertCnstr( assertion ) // add new assertion

    if !Z3Context.check() // check if assertions cannot be satisfied
        Z3Context.pop() // remove most recent assertion 
```

这是一个使用 .NET API 中的 pop/push 的示例：[http ://research.microsoft.com/en-us/um/redmond/projects/z3/test__managed_8cs_source.html#l00637](http://research.microsoft.com/en-us/um/redmond/projects/z3/test__managed_8cs_source.html#l00637)

您也会对此感兴趣：[Z3 中的软/硬约束](https://stackoverflow.com/questions/8439556/soft-hard-constraints-in-z3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T21:47:37.640

没错，`ctx.pop()`就是你想要的。它也可以带一个参数，如`ctx.pop(2)`，但如果你省略它，它默认为 1。直观地说，将求解器的状态恢复到“`n`推送前”的位置。

所以如果你这样做：

```
ctx.assertCnstr(formula1)
ctx.push()

ctx.assertCnstr(extraAssertion)
ctx.check() match {
  case Some(true)  => ... // SAT
  case Some(false) => ... // UNSAT
  case None        => ... // UNKNOWN
}

ctx.pop(1) 
```

...求解器的状态恢复到您调用之前的状态`push()`。

[请注意，它们的行为与Z3 C API](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html)中的等效项完全相同，因此那里的文档也适用。

另请注意，从 Z3 4.0 开始，不推荐在上下文中调用`push`和。`pop`现在推荐的方法是让上下文首先创建一个求解器，然后直接在求解器上使用`push`和`pop`（在 Z3 4.0 之前没有求解器的概念）。Scala^Z3 还没有赶上，但您可以预期更改最终会传播。

# regex - 正则表达式模式来查找 & 出现在文本中但不在实体中？

> ID：12086810
> 
> 赞同：0
> 
> 时间：2012-08-23T07:32:43.693
> 
> 标签：regex, html-entities

我需要匹配`&`纯文本中存在的内容，但它不应该`&`从实体中捕获，例如`&#x69;`

例如，

```
hi this is a plain text containing & and the entity &#x45; , &#65286; and &amp; 
```

在上面的文本中，我应该只找到文本中的`&`那个——即，在`containing`. 我尝试了这种模式`&[^#x]*`，但我无法获得所有匹配项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:01:49.667

[被盗的正则表达式与来自另一个答案](https://stackoverflow.com/a/311890/471214)的 HTML 实体相匹配，并结合了前瞻：

```
&(?!(amp|apos|gt|lt|nbsp|quot|bull|hellip|[lr][ds]quo|[mn]dash|permil|
     \#[1-9]\d{1,3}|[A-Za-z][0-9A-Za-z]+);) 
```

### 缩短：

```
&(?!(\#[1-9]\d{1,3}|[A-Za-z][0-9A-Za-z]+);) 
```

### 解释：

我们想要匹配`&`但不是`&123;`等等。

```
&                 // match an ampersand
(                 // group starts
    ?!            // negative look-ahead (don't match '&' if this group matches)
    (\#[1-9]\d{1,3}|[A-Za-z][0-9A-Za-z]+); // regex to match HTML entity after '&'
)                 // group ends 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:39:49.237

与`[^#x]`您匹配所有不是“#”或“x”的**单个字符。**你可能想要的是`&[^#][^x]`. 如果字符串末尾可能有 '&' 或字符串可能少于 3 个字符，则必须另外考虑这些情况。

PS：转义取决于您的正则表达式的实际风格。

**编辑**

对于`&amp`（以及所有其他 HTML 实体，例如`!`= `&excl;`），您可以简单地提供替代方案，例如 `&([^#][^x])|([^a][^m][^p])|([^e][^x][^c][^l])`

如果您的正则表达式风格允许前瞻断言，则它更易于使用`&(?!(#x|amp|excl))`等。

# hadoop - “map.tasks.maximum”可以改善我的工作延迟吗？

> ID：12086811
> 
> 赞同：2
> 
> 时间：2012-08-23T07:32:44.057
> 
> 标签：hadoop

在 hadoop wiki 中找不到对此的具体引用...

假设我有一份需要 100 个映射器的工作，没有偏差。当我将“map.tasks.maximum”设置为 100 时，hadoop 会等待它们全部完成，然后进行随机播放（复制到减速器），这需要等待网络带宽的时间。

如果我将“map.tasks.maximum”设置为 10，则将有 10 个映射器的 10 代，当每一代完成时，将执行 1/10 数据的洗牌，而下一代映射器已经在工作在接下来的记录中。

这真的会更精简并改善我的工作延迟吗？这甚至是一个有价值的目标吗？这会以集群的吞吐量为代价吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:58:33.580

我怀疑它会改善你的延迟。
我的考虑是：在所有映射器完成之前，任何 reducer 调用都无法完成 - 因为它无法知道最后一个映射器不会发出相同的密钥。所以我不希望在最后一个映射器完成之前完成更多工作
我会尝试做的（没有算法更改）是为洗牌提供更多内存以避免溢出到磁盘。
您还可以尝试压缩映射器和减速器之间的中间数据。
据我所知——数据序列化是成本的重要组成部分——如果你能让它变得更简单，它可能会有所帮助。

# excel - 在使用 openxml 创建的 word 中重新启动子标题编号

> ID：12086812
> 
> 赞同：2
> 
> 时间：2012-08-23T07:32:45.033
> 
> 标签：excel, ms-word, c#-3.0, openxml-sdk

我使用 OpenXML 生成了从 Excel 表中提取内容的 word 文档，并且我已经将样式应用于许多段落。我得到的输出为

1.  标题 1

    1.1 标题 2

    1.2 标题 3

2.  标题 1

    1.3 标题

1.4 标题

我需要**在副标题中重新编号**。如何在 OpenXML 中做到这一点？

输出应该像

1.  标题 1

    1.1 标题 2

    1.2 标题 3

2.  标题 1

    2.1 标题

2.2 标题

# variables - 如何在datagridview选定行双击事件的变量中获取值

> ID：12086818
> 
> 赞同：0
> 
> 时间：2012-08-23T07:32:53.320
> 
> 标签：variables, datagridview, vb.net-2010, double-click, selectedvalue

我有这个数据网格视图：

![在此处输入图像描述](../Images/729d2cf6ecf4c27bcaad8dafad9af099.png)

现在，当双击第一行时，我希望将其所有数据保存在变量中，例如该字段`name`应该以变量`name`名`First Name`a 出现，并且应该以另一个变量名出现`fname`，依此类推。

我一直在尝试使用`DataGridView1.CellContentDoubleClick`事件获取值，该属性称为`SelectedCells`但智能感知没有向我提供有关如何获取该特定选定行中每一列的值的任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:57:15.850

要直接从 datagridview 获取数据，您可以执行以下操作：

```
Dim fName As String = String.Empty
Dim sName As String = String.Empty

Private Sub DataGridView1_CellContentDoubleClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellContentDoubleClick
    If DataGridView1.SelectedRows.Count <> 0 Then
        Dim row As DataGridViewRow = DataGridView1.SelectedRows(0)
        fName = row.Cells("fNameColumnName").Value
        sName = row.Cells("sNameColumnName").Value
    End If
End Sub 
```

但是，这不适用于设置为 true 的多选属性！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:01:08.187

最后我得到了对我有用的答案，所以在这里分享：

```
Private Sub DataGridView1_CellContentClick_1(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellContentDoubleClick
        frm_dashboard.lbl_pnum_text.Text = DataGridView1.SelectedRows(0).Cells(0).Value
        frm_dashboard.lbl_pname_text.Text = DataGridView1.SelectedRows(0).Cells(2).Value + " " + DataGridView1.SelectedRows(0).Cells(1).Value
        frm_dashboard.lbl_paddress_text.Text = DataGridView1.SelectedRows(0).Cells(4).Value
        frm_dashboard.Enabled = True
        Me.Hide()
    End Sub 
```

# c# - 无法在 VS 2010 中的 WInform 中从数据源拖放到表单

> ID：12086821
> 
> 赞同：1
> 
> 时间：2012-08-23T07:33:04.313
> 
> 标签：c#, .net, visual-studio-2010, dataset, datasource

![在此处输入图像描述](../Images/69eb82d6d9a1105765306f7122cc5ac1.png)乡亲

我在刚刚创建的 VS 2010 的数据源中有一个数据集表。但是我无法在 VS 2010 中将其拖放到 winform :( 我将数据源配置为“DataGrid”。没有任何反应 :( 请帮助我的尝试： ![在此处输入图像描述](../Images/a73c6d1a2331a97445b79e253678fa71.png) 我已将图片放在这里。请如果有人不能明白我的意思，请看图。在那个图中，开发人员只是将DS下的左侧DS配置为Datagrid并拖放到右侧窗体中。然后它自动在右侧创建了一个dg，显示所有工具栏。我是无法拖放，想知道是什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-26T15:20:07.280

要将字段从数据源直接拖放到 C# 中的表单中，请执行以下操作：

1.  创建一个 C# windows 窗体项目。
2.  通过单击选择表单并转到属性。
3.  在属性的行为类别中，将**Allow Drop**属性设置为**True**。
4.  从项目选项卡中，选择**添加新数据源**。将打开一个窗口，让您选择数据源。
5.  选择数据库，然后选择下一个数据集，如果没有，则创建一个新连接。
6.  通过选中所有或部分字段来选择要在表单中使用的表。
7.  单击完成按钮。在 VS 的 View 菜单中，选择`Other windows`然后选择`database explorer`. 选择数据库浏览器的目的是查看数据库是否连接。
8.  只需单击数据库资源管理器中的刷新图标即可使用数据库连接进行连接。
9.  现在再次选择`View`菜单并选择`Other Windows`，然后`Data Sources`。
10.  您将能够在打开的数据源窗口中看到您选择的表。
11.  只需从数据源窗口表中突出显示您想要的字段，然后拖放到您的表单中。您将通过自动将表格字段链接到您创建的表单来完成工作。

注意：在执行此操作时，请始终注意数据库资源管理器窗口，以防与数据库的连接因任何问题而断开。

我希望这对你有用。亲切的问候

阿什拉夫·萨达

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:59:05.203

将数据网格绑定到数据集的最简单方法是将 DataGridView 控件从工具箱拖放到表单中，然后在任务菜单（左上角的三角形）中进行设置。将有“选择数据源”选项，您可以在其中选择现有数据源或通过“添加项目数据源”创建新数据源。为网格选择数据源将自动创建新的 DataSet 控件和 DataSetBindingSource 控件。

您还可以[在此处找到“操作方法”](http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx)

# php - 如何为基于相同框架的多个项目使用公共目录（库）？

> ID：12086822
> 
> 赞同：1
> 
> 时间：2012-08-23T07:33:06.720
> 
> 标签：php

我已经开始学习 Zend 框架，现在我已经创建了几乎 6 个项目进行练习，并且在每个项目的库中我都复制了 Zend 文件夹。有没有办法可以将这个**Library**文件夹或**library/Zend**文件夹放在一个公共的地方，并通过其他方式包含它，这可以节省我的磁盘空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:42:21.023

您可以将它放在任何地方并将其添加到 php.ini 中的包含路径中，或者在运行时将其添加到 index.php 中的包含路径中，就在您开始调用引导程序之前：

```
$path = 'path_to_zend';
set_include_path(get_include_path() . PATH_SEPARATOR . $path); 
```

[http://php.net/manual/en/function.set-include-path.php](http://php.net/manual/en/function.set-include-path.php)

这样，如果您要部署到不允许的主机，您就不必依赖修改 php.ini。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:42:37.393

如果您使用的是 Linux，则可以使用软链接。

对于 Windows，您可以通过分配一个专用于第三方库的文件夹并将该目录添加到 PHP 的`include_path`. 这可以在您的`php.ini`文件中找到。

我的风格是有一个`D:/PHP_Libraries`文件夹，将 Zend Framework 放在那里（以及其他库，如 Doctrine），我有`php.ini`这样的：

```
include_path= ".;c:\php\includes;d:\PHP_Libraries" 
```

你可以对 Linux 发行版做同样的事情。它也可以在 Mac 上完成。

# mysql - MYSQL，仅从具有多个相同值行的列中获取具有唯一 ID 的第一行？

> ID：12086823
> 
> 赞同：0
> 
> 时间：2012-08-23T07:33:16.030
> 
> 标签：mysql, select, unique, unique-key

我有两个表`user_photos`，`user_annons`我使用`join`.

在`user_annons`每一行中总是有一个唯一的 id，Id 列是自增的，randomkey 列也是唯一的。

但是`user_photos`表中可以有多行具有相同的 randomkey 值，并且 randomkey 值与中相同`user_annons`。`user_photos`表也​​有一个自动递增的 id 列。

我的代码如下所示：

```
$result = mysql_query("SELECT iname, title, pris 
                        FROM user_annons 
                        JOIN user_photos 
                        ON user_photos.randomkey = user_annons.randomkey 
                        AND user_annons.profile_id='".$profile_id."' 
                        AND user_photos.profile_id='".$profile_id."'");

while ($row2 = mysql_fetch_array($result, MYSQL_ASSOC))
{
    echo "<a href=\"".$profile_id."/images/".$row2['iname']."\">
    <img src=\"".$profile_id."/images/".$row2['iname']."\"></a>";
    echo $row2['title'];
    echo $row2['pris'];
} 
```

我想要的是获取表中唯一具有唯一随机键值的`user_annons`行，以及表中的第一个唯一随机键行`user_photos`。

现在代码首先显示一张图片，然后显示来自 u 的标题和 pris `ser_annons`，然后显示不同的图片，但来自 的标题和 pris 相同`user_annons`，因为其中有一行`user_annons`但有两行`user_photos`具有相同的 randomkey 值。

那么有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:36:56.070

使用限制 1

```
$result = mysql_query("SELECT iname, title, pris 
                        FROM user_annons 
                        JOIN user_photos 
                        ON user_photos.randomkey = user_annons.randomkey 
                        AND user_annons.profile_id='".$profile_id."' 
                        AND user_photos.profile_id='".$profile_id."' LIMIT 1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:43:27.847

```
SELECT 
    ua.iname, 
    ua.title, 
    ua.pris,
    up.profile_id
FROM user_annons as ua
JOIN (select min(id) as up_id , randomkey , profile_id from  user_photos) as up ON up.randomkey = ua.randomkey 
AND ua.profile_id='".$profile_id."' 
AND up.profile_id='".$profile_id."' 
```

使用 MIN() 将获取第一个匹配行，如果使用 MAX 它将获取最后一个

# ruby-on-rails - Rails：表列返回 nil（无响应）

> ID：12086827
> 
> 赞同：0
> 
> 时间：2012-08-23T07:33:39.177
> 
> 标签：ruby-on-rails, model, return, response

这是我之前能够解决的问题的延续：[参数未正确保存（Rails）](https://stackoverflow.com/questions/12080530/parameters-not-saving-properly-rails)

但是现在我遇到了一个奇怪的问题。虽然我可以获取要保存的参数，但当我尝试引用它时它没有响应。

该模型：

```
# == Schema Information
#
# Table name: messages
#
#  id             :integer          not null, primary key
#  content        :text
#  sender_id      :integer
#  recipient_list :text
#  created_at     :datetime         not null
#  updated_at     :datetime         not null
#

class Message < ActiveRecord::Base
  attr_accessible :content, :sender_id, :recipient_list
  attr_reader :recipient_list #necessary for jquery-token-fields
  serialize :recipient_list, Array

  validates :content, presence: true
  validates :sender_id, presence: true

  def recipient_list=(ids) #necessary for jquery-token-fields
    recipient_list = ids.split(",")
    super(recipient_list)
  end
end 
```

目的：

```
#<Message id: 60, content: "foobar123", sender_id: 1, recipient_list: ["1", "2"], created_at: "2012-08-23 06:40:00", updated_at: "2012-08-23 06:40:00">] 
```

看法：

```
<%= Message.find_by_id(60).content %>
<%= Message.find_by_id(60).recipient_list %> 
```

结果是对内容的调用按预期返回：“foobar123” 但是，对接收者列表的调用仅返回 nil。尽管那里显然存在价值。我怀疑 recipient_list=(ids) 方法可能会覆盖 @message.recipient_list 否则会执行的常规功能。我至少在正确的球场上吗？这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:42:06.510

`recipient_list`您在这一行使用 getter 重新定义了默认方法：

```
attr_reader :recipient_list #necessary for jquery-token-fields 
```

我认为你必须删除它。那么一切都应该没问题。

我不知道您的评论是什么意思，您的模型对所有表列都有 getter 和 setter。

# jquery - 在悬停时停止描述的 jQuery 函数并在 mouseleave 上重新启动它

> ID：12086829
> 
> 赞同：0
> 
> 时间：2012-08-23T07:33:49.010
> 
> 标签：jquery, html, hover, mouseleave

我有一个 jQuery 函数`func1`，可以在文档就绪时正常工作：

```
$(document).ready(function ()
{
   //func1 description is here
   ...
   $(func1);
} 
```

我也有

```
$(function ()
{
            $("#my-ul a").hover(function ()
            {
               //do something on my-ul a hover
            });
            $("#my-ul a").mouseleave(function ()
            {
               //do something on my-ul a mouseleave
            });
}); 
```

它工作正常。

我也想要停止`func1`并`my-ul a hover`重新启动它`my-ul a mouseleave`（就像你根本没有悬停一样）。

浏览stackoverflow并没有帮助我找到答案。我相信应该使用 .stop() 函数，但我没有运气在我的例子中正确使用它。

谢谢你。

更新：这是一个[jsFiddle 示例](http://jsfiddle.net/Dv2KV/7/)，我想在将鼠标悬停在链接上时停止更改文本并开始以相同的方式更改 onmouseleave 回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:39:02.857

您无法取消`delay`，您需要使用`setTimeout`or`serInterval`代替。

代码（***[演示](http://jsfiddle.net/Dv2KV/9/)***）：

```
$(document).ready(function () {
    var terms = ["span_aaa", "span_bbb", "span_ccc", "span_ddd", "span_eee", "span_fff"],
        i = 0,
        intervalId = null;

    function rotateTerm() {
        $("#text-content").fadeOut(200, function () {
            $(this).text($('#text-slider .' + terms[i]).html() + i).fadeIn(200);
        });
        $("#title-content").fadeOut(200, function () {
            $(this).text($('#title-slider .' + terms[i]).html() + i).fadeIn(200);
            i == terms.length - 1 ? i = 0 : i++;
        });
    }
    rotateTerm();
    intervalId = setInterval(rotateTerm, 2000);
    $('#stop-on-hover').hover(function () {
        if (intervalId) {
            clearInterval(intervalId);
        }
    }, function () {
        intervalId = setInterval(rotateTerm, 2000);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:54:09.097

我可以提出两个选择：

1.  使用 Javascript`setTimeout`而不是`delay`因为您可以停止前者。这是一个如何发挥作用的例子。见[演示](http://jsfiddle.net/mhusaini/XQRgm/1/)。

    ```
    var thread = null;

    function rotateTerm() {
        var ct = $("#text-content").data("term") || 0;

        function fadeIn() {
            $("#text-content").data("term", ct == terms.length - 1 ? 0 : ct + 1).text($('#text-slider .' + terms[ct]).html() + ct).fadeIn();
            $("#title-content").text($('#title-slider .' + terms[ct]).html() + ct).fadeIn();
        }

        function fadeOut(callback) {
            $("#text-content").fadeOut(200);
            $("#title-content").fadeOut(200, callback);
        }

        fadeIn();
        thread = window.setTimeout(function() {
            fadeOut(rotateTerm);
        }, 2000);
    }

    rotateTerm();
    $("a#stop-on-hover").hover(function() {
        thread && window.clearTimeout(thread);
    }, function() {
        rotateTerm();
    }); 
    ```

2.  设置一个标志，告诉您的代码是继续动画还是停止动画，您可以在悬停和悬停时更改它。这是一个例子。见[演示](http://jsfiddle.net/mhusaini/gggu6/1/)。有一些闪烁，但您可以使用代码使其正常工作。

    ```
    var animate = true;

    function rotateTerm() {
        var ct = $("#text-content").data("term") || 0;

        function fadeIn() {
            $("#text-content").data("term", ct == terms.length - 1 ? 0 : ct + 1).text($('#text-slider .' + terms[ct]).html() + ct).fadeIn();
            $("#title-content").text($('#title-slider .' + terms[ct]).html() + ct).fadeIn();
        }

        function fadeOut(callback) {
            $("#text-content").fadeOut(200);
            $("#title-content").fadeOut(200, callback);
        }

        fadeIn();

        window.setTimeout(function() {
            if (animate) {
                fadeOut(rotateTerm);
            }
        }, 2000);
    }

    rotateTerm();
    $("a#stop-on-hover").hover(function() {
        animate = false;
    }, function() {
        animate = true;
        rotateTerm();
    }); 
    ```

# java - Jooq 如何区分或 countDistinct 多列

> ID：12086831
> 
> 赞同：1
> 
> 时间：2012-08-23T07:33:51.610
> 
> 标签：java, mysql, distinct, aggregate-functions, jooq

我发现Factory类中的distinct函数只接受一个参数

```
public static AggregateFunction<Integer> countDistinct(Field<?> field); 
```

并且没有类似的功能`distinct(Field... fields)`

我想表达这样的 SQL 语句：

```
select c1, count(distinct c2,c3) from t1 group by c1; 
```

PS：有一个非 dsl api: `SelectQuery.setDistinct(true)`，但它会“区分”所有列，这不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T08:02:11.973

这太有趣了。据我所知，这在 SQL 中是不可能的。SQL:2008 标准规定

```
10.9 <aggregate function>

Format
<aggregate function> ::=
      COUNT <left paren> <asterisk> <right paren> [ <filter clause> ]
    | <general set function> [ <filter clause> ]

<general set function> ::=
  <set function type> <left paren> [ <set quantifier> ]
    <value expression> <right paren> 
```

逗号分隔的参数列表没有空间，不管有没有`DISTINCT`集合量词。这在 Oracle 中正确实现：

[![在此处输入图像描述](../Images/fc78557f5d5f1334ffb65201f619ea7b.png)](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions037.htm#i82697)

然而，MySQL 似乎允许这种非标准的“方便语法”：

> ```
> COUNT(DISTINCT expr,[expr...]) 
> ```
> 
> 返回具有不同非 NULL expr 值的行数。

（取自[http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_count](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_count)）。

要回答您的问题，这在 jOOQ 中目前是不可能的，尽管我提交了[#1728](https://github.com/jOOQ/jOOQ/issues/1728)以供将来支持。目前，您可以通过编写自己的多参数聚合函数支持来解决此问题：

```
Field<Integer> myCount = Factory.field(
  "count(distinct {0}, {1})", Integer.class, c2, c3); 
```

[`Factory.field(String, Class<T>, QueryPart...)`](http://www.jooq.org/javadoc/latest/org/jooq/impl/Factory.html#field%28java.lang.String,%20java.lang.Class,%20org.jooq.QueryPart...%29)具体方法见相关Javadoc

### 这现在在 jOOQ 2.6 中实现：

你可以写

```
Field<Integer> count = Factory.countDistinct(c2, c3); 
```

有关详细信息，请参阅该[`Factory.countDistinct(Field...)`](http://www.jooq.org/javadoc/latest/org/jooq/impl/Factory.html#countDistinct%28org.jooq.Field...%29)方法的 Javadoc

# gwt - 无法在 GWT 选项卡中显示 XML 格式的输出

> ID：12086832
> 
> 赞同：1
> 
> 时间：2012-08-23T07:33:52.570
> 
> 标签：gwt

我正在尝试在 GWT 的 Tab 小部件中显示格式化的 xml 输出。我尝试的是以下内容：

```
final Tab myTab = new Tab("MyTab");
String instanceUrl = "someUrl/someXml.xml";
final HTMLPane dataPane = new HTMLPane();
dataPane.setContentsURL(instanceUrl);
dataPane.setContentsType(ContentsType.PAGE);
dataPane.setPane(dataPane); 
```

我得到的是一个空标签。什么都没有可视化，但是当我单击页面时，“查看源代码”正在以我希望在选项卡中看到的方式显示我的 XML。

有人对此有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T05:48:59.487

暂时不要做 GWT。尝试在 HTML 页面上执行此操作。

创建一个空白 .html 文件（不是 .xml）文件作为本地文件。

在 html 页面的正文中，放置您想要显示的所有 XML 内容。

然后单击刚刚创建的本地 html 文件，将其显示在浏览器上。

瞧！XML 不显示。

为什么？

您的所有标签括号“<”和“>”都必须进行编码/转义，以告诉 html 窗格它们不是页面/窗格的 HTML/XML，而是按原样显示。

```
&GT; in place of >.
&LT; in place of <. 
```

在 GWT 中，使用此类中的编码方法：http: [//google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/safehtml/shared/SafeHtmlUtils.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/safehtml/shared/SafeHtmlUtils.html)。

# ruby-on-rails - 如何限制文件上传到 Rails 上的某些扩展

> ID：12086833
> 
> 赞同：1
> 
> 时间：2012-08-23T07:33:58.230
> 
> 标签：ruby-on-rails

`.xls`我正在尝试通过扩展名为和来允许上传文件`.xlsx`。因此，在文件选择窗口中，它必须只允许具有这些扩展名的文件。

使用以下代码在 Rails 中进行文件上传

```
 <%= form_for @book, :url => book_path, :method => :post do |f| %>
      <div class="file_input" id="import">
        <%= f.file_field(:excel_file) %>
      </div>
  <% end %> 
```

那么，我如何只允许具有这些（.xls、.xlsx）扩展名的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:19:36.893

你不应该真的因为它是一个安全风险。而是使用类似`Paperclip`or的宝石`Carrierwave`。两者都有 Railscasts 可以帮助您开始使用它们。

# c# - int 也可以在 c# 中存储 var 类型

> ID：12086842
> 
> 赞同：0
> 
> 时间：2012-08-23T07:34:32.353
> 
> 标签：c#

我有一个模型：

```
public class KPIResults
{
   public virtual string Title { get; set; }
   public virtual int Total { get; set; }
   public virtual  int Week6 { get; set; }
   public virtual  int Week5 { get; set; }
   public virtual  int Week4 { get; set; }
   public virtual  int Week3 { get; set; }
   public virtual  int Week2 { get; set; }
   public virtual  int Week1 { get; set; }

   public virtual string stringWeek6 { get; set; }
   public virtual string stringWeek5 { get; set; }
   public virtual string stringWeek4 { get; set; }
   public virtual string stringWeek3 { get; set; }
   public virtual string stringWeek2 { get; set; }
   public virtual string stringWeek1 { get; set; }
} 
```

在我的报告存储库中，我有：

```
 int strfound = 0;
 string str = "Number";
 foreach (DataRow dr in dt.Rows)
 {
    string title = dr["Title"].ToString();
    int total = Convert.ToInt32(dr["Total"]);
    if (dr["Week6"].contains("Number")  //synntacs not right?
        var week6 = dr["strWeek6"]
    end

    or do this:
    strfound = str.IndexOf(dr);  //syntacs not right?
    if (strfound == 0)
    {
         var week6 = dr["strWeek6"]
    } 
    var week6 = Convert.ToInt32(dr["Week6"]);
    var week5 = Convert.ToInt32(dr["Week5"]);
    var week4 = Convert.ToInt32(dr["Week4"]);
    var week3 = Convert.ToInt32(dr["Week3"]);
    var week2 = Convert.ToInt32(dr["Week2"]);
    var week1 = Convert.ToInt32(dr["Week1"]);

    results.Add(new KPIResults() {Title = title, Total = total, Week6 = week6, Week5 = week5, Week4 = week4, Week3 = week3, Week2 = week2, Week1 = week1});

  }
  return results; 
```

我也许应该尝试进行字符串搜索，但我在 is 中的代码不正确。我寻找处理字符串的方法，但不清楚。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:03:26.260

有点不清楚你要做什么，回答你的问题，`All I want to know is it possible to cast the var type to be stored as an int or the other way around?`不。

我认为您最好的选择是使用`string`它将能够保存文本和数字。您可以进行正则表达式测试以检查它是否包含文本，如果没有，则将其存储的数字转换为 an`int`以供您使用。

或者只是制作一个更好的模型，其中包含您需要的所有部分。

您还可以使用`.GetType()`来返回`var`.

**更新**

好的，看起来您现在正在尝试检测是否`dr["Week6"]`包含 a`string`或`int`. 解决此问题的一种方法是：

```
int number;
if(int.TryParse(dr["Week6"], out number))
    var week6 = dr["strWeek6"] 
```

如果`dr["Week6"]`可以转换为`int`，则该`if`语句是`true`并且`number`将包含 的值`dr["Week6"]`。

这是元数据`int.TryParse`：

> 摘要：将数字的字符串表示形式转换为其等效的 32 位有符号整数。返回值指示转换是否成功。
> 
> 参数： s：包含要转换的数字的字符串。
> 
> 结果：当此方法返回时，如果转换成功，则包含与 s 中包含的数字等效的 32 位有符号整数值，如果转换失败，则返回零。如果 s 参数为空、格式不正确或表示小于 System.Int32.MinValue 或大于 System.Int32.MaxValue 的数字，则转换失败。此参数未初始化传递。
> 
> 返回：如果 s 转换成功，则返回 true；否则为假。

# single-sign-on - 在单点登录中，发行者如何维护同一应用程序的令牌列表？

> ID：12086846
> 
> 赞同：0
> 
> 时间：2012-08-23T07:34:55.510
> 
> 标签：single-sign-on

当我们实现基于声明的单点登录时，发行者如何维护它为应用程序分配给特定用户的令牌列表？发行的令牌有效的时间段如何？假设为一个应用程序1 授予了令牌，如果用户想转移到另一个应用程序2，那么该令牌将在多长时间内有效，是否有一些到期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:48:49.073

您没有定义任何工具，所以我认为这是您自己的 sso 解决方案，在这方面您有多种解决方案。

有两个步骤：身份验证（即带有日期检查的 sso 本身）和授权（我可以访问哪个应用程序）

你所描述的是角色。角色将用户与权限列表相关联（如访问 App1 和 App2，但不访问 App3），这些权限通常在数据库中定义。然而，“userId”和令牌过期通常是令牌本身的一部分。

例如，您可以使用 userId + 时间戳并对其进行加密。在与服务器的每次通信时，都会解密令牌，验证时间戳范围（即身份验证），查找用户 ID 以确定具有哪些角色（即授权）

我建议在每次往返时重新生成令牌并给它一个小的有效期。

# facebook-fql - Facebook FQL：链接类型帖子的位置标签数据丢失

> ID：12086847
> 
> 赞同：0
> 
> 时间：2012-08-23T07:34:56.197
> 
> 标签：facebook-fql

我在 Facebook Web 上发布了一个带有位置标签的链接类型的帖子。现在我正在尝试通过 FQL 获取带有位置标签的帖子：

```
SELECT post_id, actor_id, message, type, place FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0 
```

帖子已成功检索，但 place = null。在“链接”表中，无法获取地点数据。我在哪里可以获得链接类型的帖子位置标签数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:51:09.297

这是 FB 中的一个错误，已经存在至少 6 个月。[http://developers.facebook.com/bugs/478567888825332?browse=search_5036b94d0e62d2437772284](http://developers.facebook.com/bugs/478567888825332?browse=search_5036b94d0e62d2437772284)

# ember.js - Emberjs - 如何在访问其子级之前等到模板完全呈现

> ID：12086848
> 
> 赞同：4
> 
> 时间：2012-08-23T07:35:00.490
> 
> 标签：ember.js

有没有办法等到模板完全呈现后再通过视图访问其子级，例如使用 jquery？

didInsertElement 对我来说似乎没有按预期工作。在模板完全构建之前，我需要添加额外的半秒延迟。模板遍历控制器中的数组并创建多个 div。即使我覆盖了 didInsertElement，也无法立即访问这些 div。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T06:07:10.980

我最近在 Ember 中添加了一些更优雅的东西：`afterRender`队列。请参阅[此提交](https://github.com/emberjs/ember.js/commit/512327c0128f53d4a0d6828ab38f27c6ccf686ec)，特别是使用示例的测试。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-23T17:52:18.160

我不知道您如何插入这些子视图，但一种方法如下：

```
didInsertElement: function(){
  if (this.$().find(".myAwesomeChildViews").length > 0) {  // <-- adapt this to your needs
     // my childViews are inserted
  } else {
     Ember.run.next(this, function() {
        this.didInsertElement();
     });
  }
} 
```

这里重要的是 didInsertElement() 将一直​​被调用，直到检查结果为真。

* * *

更好的是，您可以将其重构如下：

```
Ember.View.reopen({
    didInsertElement: function() {
        this._super();
        this.setIsRendered();
    },

     setIsRendered: function() {
        if (!!this.$()) {
            this.set('isRendered', true);
        } else {
            Ember.run.next(this, function() {
                this.setIsRendered();
            });
        }
    },
}); 
```

然后在你看来：

```
App.MyView = Ember.View.extend({
   areMyChildViewsRendered: function() {
      return this.get('childViews').everyProperty('isRendered');
   }.property('chilViews.@each.isRendered')
}); 
```

# jakarta-ee - Scope Interceptor Struts 2：后退按钮行为

> ID：12086849
> 
> 赞同：0
> 
> 时间：2012-08-23T07:35:08.563
> 
> 标签：jakarta-ee, struts2, scope, wizard, interceptor

我想使用 Scope 拦截器在我的 Struts2(2.2.3.1) 应用程序中实现类似向导的功能。

我的 struts.xml 文件如下：

```
<action name="actionA class="classA" method="methodA">
    <interceptor-ref name="basicStack" />   
    <interceptor-ref name="scope">
        <param name="session">stringA</param>
        <param name="key">consultGuides</param>
        <param name="type">start</param>
    </interceptor-ref>      
    <result>/resultA.jsp</result>
</action>
<action name="actionB" class="classA" method="methodB">
    <interceptor-ref name="scope">
        <param name="session">stringA, listA</param>
        <param name="key">consultGuides</param>
        </interceptor-ref>
        <interceptor-ref name="basicStack" />               
        <result>/resultB.jsp</result>
</action>
    ....
    .... 
```

“resultA.jsp”提交给填充“listA”的“actionB”。但是现在如果我按下后退按钮（到达 resultA.jsp，其中 resultA.jsp 只是从其缓存加载到浏览器而不向服务器发出新请求）并对列表进行任何更改，新条目将附加到“listA”而不是完全替换它。

修改“listA”的“resultA.jsp”中的代码是

```
<s:iterator value="listB"   status="statusB">
    <li>
        <a title="%{varA}">
            <s:checkbox name="listA.id" fieldValue="%{varB}" />
        </a>
    </li>
</s:iterator> 
```

我没有实现 SessionAware，只是依靠 scopeInterceptor 将 listA 提供给会话。

如何让它用请求中的新列表替换“listA”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:22:34.527

为了在单击浏览器的后退或前进按钮后不允许缓存页面，您可以尝试在 http 响应中添加一些标头，这将在您每次单击后退或前进按钮时清除缓存。

如果您在拦截器中添加它，这将非常有效。

```
response.setHeader("Cache-Control", "no-cache, no-store"); //HTTP 1.1
response.setHeader("Pragma", "no-cache"); //HTTP 1.0
response.setDateHeader("Expires", 0); //prevents caching at the proxy server 
```

通过这样做，按下后退按钮将不会加载缓存页面，但会向服务器发出新请求。这应该可以解决您的问题。

# php - 如何推送到数组？push_array 的名字？

> ID：12086850
> 
> 赞同：-2
> 
> 时间：2012-08-23T07:35:15.447
> 
> 标签：php

我创建了一个这样的数组。

```
$oldarray =  array('Condition' => 'New',"MinimumPrice" => "$minprice"); 
```

现在我需要根据 if 语句添加额外的数组名称和值。我怎样才能 push_array 或任何函数来获得结果。

```
$finalarray = array('Condition' => 'New',"MinimumPrice" => "$minprice", 'NewLabel' => 'labelvalue'); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:38:09.877

```
$array = array(
    "one" => "two",
    "3" => "4",
); 
```

添加更多值创建一个循环，循环内将是您的 IF 语句并添加值：
`$array[] = 'value';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:38:52.373

这很简单：

```
<?php

$your_array = array('Condition' => 'New',"MinimumPrice" => "$minprice");
$your_array['NewLabel'] = 'labelvalue';

print_r($your_array);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:39:02.520

```
<?php
$x = array('Condition' => 'New',"MinimumPrice" => "$minprice");
$x['new']= 'yo';
var_dump($x);
?> 
```

在php中向数组添加值的简单方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T07:39:02.840

```
$array = array('Condition' => 'New',
               'MinimumPrice' => $minprice,
        );

$array2 = array('NewLabel' => 'labelvalue');
$finalarray = $array + $array2; 
```

# c# - 实体框架：递归更新父子给我重复

> ID：12086857
> 
> 赞同：0
> 
> 时间：2012-08-23T07:36:18.710
> 
> 标签：c#, entity-framework, recursion, parent-child, recursive-datastructures

给定下表（在从 Locations 到 Customers 的屏幕截图中 FK 不可见，但它在那里，只是没有刷新......）：

![D B](../Images/163eeb8a54eef0f5e489cb9bf7c4269a.png)

还有我的映射：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Customer>().ToTable("CUSTOMERS");
        modelBuilder.Entity<Customer>().HasKey(c => c.Id).Property(c => c.Id).HasColumnName("CUSTNO");
        modelBuilder.Entity<Customer>().Property(c => c.Name).HasColumnName("NAME");
        modelBuilder.Entity<Customer>().HasMany(c => c.AllLocations).WithRequired(l => l.Customer).Map(x => x.MapKey("CUSTNO"));
        modelBuilder.Entity<Customer>().Ignore(c => c.RootLocations);

        modelBuilder.Entity<Location>().ToTable("LOCATIONS");
        modelBuilder.Entity<Location>().HasKey(c => c.Id);
        modelBuilder.Entity<Location>().Property(c => c.Id).HasColumnName("ID");
        modelBuilder.Entity<Location>().Property(c => c.LocationCode).HasColumnName("LOCATION_CODE");
        modelBuilder.Entity<Location>().HasMany(l => l.Children).WithOptional(ch => ch.Parent).Map(x => x.MapKey("PARENT_ID"));

        modelBuilder.Entity<Product>().ToTable("PRODUCTS");
        modelBuilder.Entity<Product>().HasKey(p => new { p.Partno, p.LocationId, p.Quantity, p.SellUnit });
        modelBuilder.Entity<Product>().Property(p => p.Partno).HasColumnName("PARTNO");
        modelBuilder.Entity<Product>().Property(p => p.LocationId).HasColumnName("LOCATION_ID");
        modelBuilder.Entity<Product>().Property(p => p.PartDescription).HasColumnName("PART_DESCRIPTION");
        modelBuilder.Entity<Product>().Property(p => p.Quantity).HasColumnName("QUANTITY");
        modelBuilder.Entity<Product>().Property(p => p.SellUnit).HasColumnName("SELL_UNIT");
        modelBuilder.Entity<Product>().HasRequired(p => p.Location).WithMany(l => l.Products).HasForeignKey(p => p.LocationId);
    } 
```

还有我的更新代码：

```
 public void UpdateLocations(string customerId, IEnumerable<Location> locations)
    {
        using (var context = new CustomerWarehouseContext(connectionString))
        {
            foreach (var location in locations)
                RecursiveUpdate(location, context);
            context.SaveChanges();
        }
    }

    private void RecursiveUpdate(Location location, CustomerWarehouseContext context)
    {
        if (location != null)
        {
            bool locationIsNew = location.Id.Equals(Guid.Empty);
            if (locationIsNew)
            {
                location.Id = Guid.NewGuid();
                context.Locations.Add(location);
            }
            else
            {
                context.Entry(context.Locations.Single(l => l.Id.Equals(location.Id))).CurrentValues.SetValues(location);
            }
            if (location.Children != null)
            {
                foreach (var childLocation in location.Children)
                {
                    childLocation.Parent = location;
                    RecursiveUpdate(childLocation, context);
                }
            }
            if (location.Products != null)
            {

                foreach (var product in location.Products)
                {
                    if (locationIsNew)
                    {
                        location.Products.Add(product);
                    }
                    else
                    {
                        //How to update product when key is changed? I cannot use contex.Entry here?
                    }
                }
            }
        }
    } 
```

我执行以下代码：

```
 Customer customer = null;
        using (var context = new AwesomeContext("myAwesomeConnectionString"))
        {
            customer = (from c in context.Customers.Include(c => c.AllLocations.Select(l => l.Products))
                        where c.Id.Equals("100100")
                        select c).FirstOrDefault();
        }

        Location locationToUpdate = customer.RootLocations.Single(l => l.Id.Equals(Guid.Parse("1a2ad52e-84cc-bf4c-b14d-dc57b6d229a6")));
        locationToUpdate.LocationCode = "Parent " + DateTime.Now.Millisecond; //Goes  OK
        locationToUpdate.Children[0].LocationCode = "Child " + DateTime.Now.Millisecond; //Goes  OK
        locationToUpdate.Children[0].Products[0].Quantity = 200;  
        locationToUpdate.Children.Add(new Location() { LocationCode = "XXX", Customer = customer, Parent = locationToUpdate }); //Creates duplicates?
        UpdateLocations(customer.Id, newList); 
```

因此，我正在更改父子位置的位置代码，更新子位置中产品的产品数量。数量是产品表键的一部分。另外，我正在向父级添加一个新位置。

问题：

*   如何更新我的产品？因为我更改了部分密钥，所以我无法使用 context.Entry(...) 来检索旧密钥。
*   添加第二个子位置后，为什么我的上下文中有重复的客户/位置？我最终得到 5 个位置和 2 个客户，而不是 3 个位置和 1 个客户，所以它给了我一个 PK 例外。在将孩子添加到某个位置后，它以某种方式创建了一个新客户。所以它有一个有 2 个位置的客户实体，一个有 3 个位置的客户实体。为什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:48:18.643

> 如何更新我的产品？因为我更改了部分密钥，所以我无法使用 context.Entry(...) 来检索旧密钥。

您不能使用 Entity Framework 更改或更新实体的键。如果您需要这样做，您必须使用手写 SQL 命令：

```
context.Database.ExecuteSqlCommand("UPDATE..."); 
```

> 添加第二个子位置后，为什么我的上下文中有重复的客户/位置？

您将分离的对象图传递到您的`UpdateLocations`. 如果您将图形的任何节点添加到上下文中，则所有其他可通过该节点的导航属性访问的分离实体都将添加到上下文中，并且它们都具有 EntityState `Added`。如果调用`SaveChanges`实体，将被插入到数据库中。例如，这发生在这里：

```
context.Locations.Add(location); 
```

因为您的新位置引用了客户，所以客户也将进入`Added`状态，这将在数据库中复制客户。您可以通过首先将客户附加到上下文来避免这种情况。调用`Attach`将使实体进入状态`Unchanged`并避免客户的重复：

```
context.Customers.Attach(location.Customer);
context.Locations.Add(location); 
```

# php - apache mod_rewrite 显示找不到对象 404

> ID：12086866
> 
> 赞同：2
> 
> 时间：2012-08-23T07:37:25.803
> 
> 标签：php, .htaccess, web

我有一个链接`http://localhost/css/dictionary?letter=a`，我想让它像这样`http://localhost/css/dictionary/a`

但不知何故，它说 404 消息

我在这里错过了什么吗？这是我在 .htaccess 中的代码，请帮助我。

```
RewriteEngine On
RewriteBase /css/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([^\.]+)$ $1.php [NC]

RewriteRule ^([a-zA-Z])$ dictionary?letter=$1 
```

我一直在搜索所有 youtube 视频和阅读文章，到目前为止我仍然遇到麻烦，请我需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:43:35.660

这是因为你有 2 条规则，第一个匹配第一个（因为它比第二个更通用）。

第二个甚至根本不检查`dictionary`。

第二个条件应该是：

```
RewriteRule ^dictionary/([a-zA-Z])$ dictionary.php?letter=$1 
```

# apache - 虚拟主机还是别的？

> ID：12086868
> 
> 赞同：0
> 
> 时间：2012-08-23T07:37:34.433
> 
> 标签：apache, virtualhost

我想设置以下结构： staging.mydomain.com/client/projectname production.mydomain.com/client/projectname

对于新项目，我在 /home/-文件夹中创建以下文件夹：

*   “客户名称”-文件夹
    *   “项目名称”-文件夹
        *   暂存文件夹
        *   生产文件夹

我制作了一个使用“a2ensite”启用的文件，包括下面显示的内容。

它与 clientA 一起用于“生产”和“登台”工作正常，但当然 clientB 不会工作，因为它类似于被 clientA 覆盖，对吧？

```
<VirtualHost *:80> 
    ServerName www.mydomain.com 
    ServerAlias mydomain.com 
    DirectoryIndex index.html index.php 
    DocumentRoot /home/mysite 
</VirtualHost> 

<VirtualHost *:80> 
    ServerName production.mydomain.com 
    ServerAlias production.mydomain.com 
    DirectoryIndex index.html index.php 
    DocumentRoot /home/clientA/projectA/production 
    Alias /clientA/projectA /home/clientA/projectA/production 
</VirtualHost> 

<VirtualHost *:80> 
    ServerName staging.mydomain.com 
    ServerAlias staging.mydomain.com 
    DirectoryIndex index.html index.php 
    DocumentRoot /home/clientA/projectA/staging 
    Alias /clientA/projectA /home/clientA/projectA/staging 
</VirtualHost> 

<VirtualHost *:80> 
    ServerName production.mydomain.com 
    ServerAlias production.mydomain.com 
    DirectoryIndex index.html index.php 
    DocumentRoot /home/clientB/projectA/production 
    Alias /clientB/projectA /home/clientB/projectA/production 
</VirtualHost> 

<VirtualHost *:80> 
    ServerName staging.mydomain.com 
    ServerAlias staging.mydomain.com 
    DirectoryIndex index.html index.php 
    DocumentRoot /home/clientB/projectA/staging 
    Alias /clientB/projectA /home/clientB/projectA/staging 
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:54:04.493

> 它与 clientA 一起用于“生产”和“登台”工作正常，但当然 clientB 不会工作，因为它类似于被 clientA 覆盖，对吧？

好吧，您为相同的服务器名称定义了 2 个虚拟主机：

```
<VirtualHost *:80> 
    ServerName staging.mydomain.com 
    ServerAlias staging.mydomain.com 
    DirectoryIndex index.html index.php 
    DocumentRoot /home/clientA/projectA/staging 
    Alias /clientA/projectA /home/clientA/projectA/staging 
</VirtualHost> 
```

和

```
<VirtualHost *:80> 
    ServerName staging.mydomain.com 
    ServerAlias staging.mydomain.com 
    DirectoryIndex index.html index.php 
    DocumentRoot /home/clientB/projectA/staging 
    Alias /clientB/projectA /home/clientB/projectA/staging 
</VirtualHost> 
```

第二个将被忽略，因为您已经拥有服务器“staging.mydomain.com”的虚拟主机，同样适用于“production.mydomain.com”

当您定义这些虚拟主机并定义它们时，`ServerName`它托管的主机称为“staging.mydomain.com”

当您键入`http://staging.mydomain.com/`时，您希望它转到哪个虚拟主机？其中有 2 个声称托管该主机名。你必须给这些虚拟主机不同的名字。

# ruby - ruby oci8 如何使用值数组作为绑定值

> ID：12086869
> 
> 赞同：1
> 
> 时间：2012-08-23T07:37:35.347
> 
> 标签：ruby, oracle, rhomobile, oci8

我想在数组或散列中使用可变数量的值作为绑定变量，用于在 RhoMobile 的 RhoConnect 部分中使用 oci8 动态生成的 sql 更新字符串。不过不知道该怎么做：这是我的 irb 摆弄。

```
b(main):006:0> values = ['1','2']
b(main):007:0>  @conn.exec( 'Select id, age, salary,name,company,gender from employee where id = :1 or id = :2', values  ) do |row|
b(main):008:1* puts row[0]
b(main):009:1> end
ntimeError: unsupported datatype: 2
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:650:in `make_bind_object'
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:454:in `bind_param'
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:671:in `bind_params'
      from (irb):9:in `each_with_index'
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:669:in `each'
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:669:in `each_with_index'
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:669:in `bind_params'
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:473:in `exec'
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:282:in `exec_internal'
      from C:/RhoStudiotest/ruby/lib/ruby/gems/1.8/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:275:in `exec'
      from (irb):7
b(main):010:0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:59:58.603

您可以执行以下操作 -

```
sql = "Select id, age, salary,name,company,gender from employee where id = :1 or id = :2"
index,values = 1,["1","2"]

cursor = conn.parse(sql)
values.each {|value| cursor.bind_param(index,value);index += 1}
cursor.exec

while row = cursor.fetch
    puts "#{row}"
end 
```

# c# - LINQ 无法从实体框架中检索相关数据

> ID：12086877
> 
> 赞同：0
> 
> 时间：2012-08-23T07:38:19.153
> 
> 标签：c#, asp.net, linq, entity-framework

我有以下内容：

`db.Products.Where(p=>p.Sectors.Where(s=>s.website_id == websiteObj.website_id)).Count();`

websiteObj 不为 null 并且具有有效数据。产品和部门之间存在多对多的关系。此外，部门和网站之间存在一对多的关系。我不能直接访问网站上的产品，我必须通过网站相关部门。

无论如何，这个例子有效： `db.Sectors.Where(p=>p.website_id == websiteObj.website_id)).Count();`

但问题是第一个 LINQ 查询给了我以下错误： `Delegate 'System.Func<BusinessObjects.Product,int,bool>' does not take 1 arguments.` `Cannot convert lambda expression to type 'string' because it is not a delegate type.`

还有其他几个错误。

无论如何，我做错了什么？这是我第一次尝试使用 LINQ。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:40:59.633

我认为您需要`Any`在内部查询中：

```
db.Products.Where(p => p.Sectors.Any(s => s.website_id == websiteObj.website_id))
           .Count(); 
```

这将返回所有具有指定 website_id 的至少一个扇区的产品。

如果您想要所有部门都属于指定 website_id 的所有产品*，*只需使用`All`而不是`Any`：

```
db.Products.Where(p => p.Sectors.All(s => s.website_id == websiteObj.website_id))
           .Count(); 
```

# objective-c - uiview中元素之间的位置

> ID：12086894
> 
> 赞同：0
> 
> 时间：2012-08-23T07:39:12.660
> 
> 标签：objective-c, xcode4.2, xib

我无法在我的 UIview 中获得我想要的位置，我正在使用 .xib 视图：

这就是我要的：

![在此处输入图像描述](../Images/febaa869f05682a8a120788a4b8e643c.png)

因此，作为背景的图像和内部的 IUWebView，我想上下左右查看图像，但这就是我得到的：

![在此处输入图像描述](../Images/1718888f5f9b42e425389cbc2ad51a70.png)

为什么我没有下降保证金？

先感谢您

# github - 从我的公共存储库中提取的 Git 不起作用

> ID：12086897
> 
> 赞同：1
> 
> 时间：2012-08-23T07:39:20.953
> 
> 标签：github, repository, git-pull

这是我`.git/config`的存储库中的配置文件：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    url = git@github.com:<username>/<repository>.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[user]
    name = <username> 
```

我已经在 github 中正确配置了我的公共 ssh 密钥。我将我的更改从另一台机器推送到这个存储库，该机器正确更新到 github。

但是在我当前的机器中，当我发出 git pull 请求时：

```
git pull origin master 
```

它说“已经是最新的”

如果根本不是这种情况，我的 github 存储库中的更新文件不在我的本地存储库中。

我做错了什么？

**更新：**

我从 Olivier Refalo 的回答中尝试了以下方法：

在 github 和本地分支是主分支。

命令的输出：

```
git for-each-ref --format="local: %(refname:short) <--sync--> remote: %(upstream:short)" refs/heads 
```

是否如下：

> 本地：主 <--同步--> 远程：

`git remove -v`返回以下输出：

> 来源 git@github.com:username/repository.git (fetch)
> 
> 来源 git@github.com:username/repository.git（推送）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:02:32.797

这里可能会发生多种情况：

我会相信 git，遥控器与您的本地同步。这里的问题是它可能指向与您想象的不同的位置。

1.  您可能正在将本地分支 XYZ（不是 master）推送到 origin/master
2.  您可能正在推送到不同的 URL

要解决这个问题，请运行以下代码：

1.  git 分支，确保你在 master 上
2.  git for-each-ref --format="local: %(refname:short) <--sync--> remote: %(upstream:short)" refs/heads
3.  git 远程 -v

后者将显示一个关联表，显示哪个本地分支与哪个远程同步。最后，最新的语句显示了您的远程 url。

我从我的[G2项目中获取了这些命令](https://github.com/orefalo/g2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:24:46.333

我没有找出问题所在，所以我所做的是从 github 新建一个 git clone 以获取更新的文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T07:50:15.580

尝试使用力拉。在 git 和 pull 之间添加“强制”

# jquery - 使用 jquery masonry 隐藏元素后重新组织所有元素

> ID：12086900
> 
> 赞同：9
> 
> 时间：2012-08-23T07:39:38.300
> 
> 标签：jquery

我隐藏了一个 li，隐藏它之后，html 中留下了一个空白，我想重新加载砌体并重新排列内容。我试过 .masonry('reload') 但我没有工作。任何帮助

小提琴 [http://jsfiddle.net/emtBX/1/](http://jsfiddle.net/emtBX/1/)

JS

```
$(document).ready(function(){
              $('#container').masonry({
                // options
                itemSelector : '.item',
                columnWidth : 240,

                isAnimated: true,
                  animationOptions: {
                    duration: 750,
                    easing: 'linear',
                    queue: false
                  }
              });

              $('#butn1').click(function() {

                    $('#container ul li').eq(2).hide();
                    $('#container').masonry('reload');

              });
            }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T07:56:06.793

您可以隐藏 li 元素并删除 .item 类以重新排序元素，[http://jsfiddle.net/emtBX/11/](http://jsfiddle.net/emtBX/11/)

```
$('#container ul li').eq(2)
    .css({'visibility': 'hidden', 'display': 'none'})
    .removeClass("item masonry-brick"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-06T13:22:55.320

要回答刘易斯评论并为在 v3 中寻找解决方案的人提供答案，在 v3 中隐藏方法不再存在，您只需使用 jquery 的 hide() 方法并在触发砌体布局后。所以想法是隐藏元素：

```
$('.something-to-hide').each(function(){
   $(this).hide();
});
$('.grid').masonry('layout'); //we assume grid is your class use to masonry container. 
```

然后显示隐藏的元素：

```
$('.class-for-all-elements').show()
$('.grid').masonry('layout'); 
```

就我而言，我在隐藏之前添加了一些搜索，这就是我使用 each() 函数的原因。

斯蒂芬妮

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-12T13:42:00.657

jquery masonry 本身有一个名为“hide”的方法（[http://masonry.desandro.com/methods.html#hide](http://masonry.desandro.com/methods.html#hide)）

像这样使用它：

```
$('#container').masonry( 'hide', $('#container ul li').eq(2) ).masonry(); 
```

最后一个 masonry() 调用做你想做的事：“重新加载”瓷砖

# hadoop - pig 示例 apache [输入路径不存在]

> ID：12086901
> 
> 赞同：0
> 
> 时间：2012-08-23T07:39:39.620
> 
> 标签：hadoop, user-defined-functions, hdfs, apache-pig

我正在本地桌面上试用 apache pig。

我希望 apache 页面上的教程是准确的或调用步骤。我安装了 pig 并试图粘贴示例代码：从这里[http://pig.apache.org/docs/r0.7.0/setup.html#Sample+Code](http://pig.apache.org/docs/r0.7.0/setup.html#Sample+Code)

```
Local Mode

$ pig -x local
Mapreduce Mode

$ pig
or
$ pig -x mapreduce
For either mode, the Grunt shell is invoked and you can enter commands at the prompt. The results are displayed to your terminal screen (if DUMP is used) or to a file (if STORE is used).

grunt> A = load 'passwd' using PigStorage(':'); 
grunt> B = foreach A generate $0 as id; 
grunt> dump B; 
grunt> store B; 
```

不清楚我是否必须输入 pig -x local 来尝试 grunt 命令 [可能是 pig 必须以两种模式之一运行，但不明显开箱即用的操作]

我输入后

```
pig -x local 
```

我得到 grunt 提示，但命令失败说：

```
 Message: org.apache.pig.backend.executionengine.ExecException: ERROR 2118: Input path does not exist: file:/home/<usr>/passwd 
```

在搜索谷歌时，我被路由到这样的邮件档案：http://mail-archives.apache.org/mod_mbox/pig-user/201109.mbox/%3C4E73658D.3000705@figarocms.fr%3E 这些很难阅读并关注对话。

这是我正在寻找的两件事：1]在您开始使用有线之前，是否有更好的指南来编写猪脚本和UDF，可以让您掌握一段时间[至少让您通过编写1-2个UDF来分析示例日志]错误。任何博客文章等如果说我有 4 个小时来编写几个简单的猪脚本，那么一个好的起点是什么 2] 对于我得到的错误，我可能需要将 passwd 文件添加到 HDFS 吗？不幸的是，“hadoop fs -mkdir -p /home/”表示该目录存在。那么我现在如何将文件放在那里。由于我在本地模式下运行它，有没有办法让 HDFS 在我在 FS 上提到的路径上查找文件，而不是每次都将文件放到 HDFS 上？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:26:23.043

在本地启动 pig 时，它将连接到您的本地文件系统：

```
user@machine~/pig-distrib$ pig -x local
12/08/23 10:10:24 INFO pig.Main: Apache Pig version 0.10.0 (r1328203) compiled Apr 19 2012, 22:54:12
12/08/23 10:10:24 INFO pig.Main: Logging error messages to: /home/user/pig-distrib/logs/pig.log
12/08/23 10:10:24 INFO executionengine.HExecutionEngine: Connecting to hadoop file system at: file:///
grunt> 
... 
```

要找到 passwd，您有以下选项：
1.
复制`/etc/passwd`到执行 pig shell 的目录，然后您可以发出：

```
grunt> A = load 'passwd' using PigStorage(':'); 
```

2.
导航到 shell 中的目录：

```
grunt> cd /etc
grunt> A = load 'passwd' using PigStorage(':'); 
```

3.
或者使用文件的完整路径：

```
grunt> A = load '/etc/passwd' using PigStorage(':'); 
```

您也可以查看这些资源：
[http ://www.cloudera.com/wp-content/uploads/2010/01/IntroToPig.pdf](http://www.cloudera.com/wp-content/uploads/2010/01/IntroToPig.pdf)
[Programming Pig 在线笔记](http://ofps.oreilly.com/titles/9781449302641/index.html)
[http://parand.com/say/index.php/2008 /06/19/pig-hadoop-commands-and-sample-results/](http://parand.com/say/index.php/2008/06/19/pig-hadoop-commands-and-sample-results/)

# android - 如何检查 WebView 是否已完全呈现并准备就绪？

> ID：12086902
> 
> 赞同：6
> 
> 时间：2012-08-23T07:39:41.960
> 
> 标签：android, html, webview

我的问题是，有时我有几秒钟的空白网页视图，而不是渲染的 HTML，这非常令人沮丧。我想实现一些监听器来检查 webview 是否呈现所有 HTML。换句话说：我想让我的 webview 空白证明。

我已经在 HTML 中插入了 javascript 简单触发器，它告诉应用程序何时 HTML 已完全加载并准备好呈现：

```
$(window).load(function(){
     tellAndroidImReady();
}); 
```

它工作得很好，但有时我会让这个空白屏幕持续几秒钟，而不是闪亮的渲染页面。这让我发疯...

我在 stackoverflow 上进行了一些搜索，只找到了[这个主题](http://goo.gl/VmChG)，它说解决方案中使用的部分方法已被弃用，所以我猜它不应该是正确的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T07:44:20.990

你需要

```
mWebView.setWebViewClient(new WebViewClient() {
 public void onPageFinished(WebView view, String url) {
     // your code    
 } 
}); 
```

# android - 多点触控：检测手指何时触摸屏幕，而一根手指已经触摸

> ID：12086906
> 
> 赞同：0
> 
> 时间：2012-08-23T07:39:49.827
> 
> 标签：android, multi-touch

我正在尝试使用以下代码进行捏合旋转图像的操作：

```
public boolean onTouchEvent(MotionEvent e) {
    if(e.getPointerCount() > 1) {
      if (e.getActionMasked()== MotionEvent.ACTION_MOVE) {
            previousX1 = curX1;
            previousY1 = curY1;
            currentX1 = e.getX(1);
            currentY1 = e.getY(1);

            previousX0 = curX0;
            previousY0 = curY0;
            currentX0 = e.getX(0);
            currentY0 = e.getY(0);

            double prevDist = Math.hypot(prevX1 - prevX2, prevY1 - prevY2);
            double dist = Math.hypot(curX1 - curX2, curY1 - curY2);
            angle += ((dist - prevDist) * 0.01);

        }
    }
   return true;
} 
```

现在，这在大多数情况下都可以正常工作，除了我想在捏合开始时立即更新 currentX1、currentX2 等值，即第二根手指触摸（或抬起）屏幕的 MotionEvent而第一根手指已经被按住。但是，Android API 相当混乱，我不知道如何检测何时发生这种情况。使用`(e.getActionMasked() == MotionEvent.ACTION_DOWN)`or`(e.getActionMasked() == MotionEvent.ACTION_POINTER_DOWN)`作为条件似乎不起作用。

非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:13:23.397

如果你只想用**两个**手指在屏幕上进行测试，你可以使用这个：

```
 @Override
    public boolean onTouch(final View view, MotionEvent event) {

              final int action = event.getAction();
              float xPosition = 0;
              float yPosition = 0;

                  switch (action){
                        case MotionEvent.ACTION_DOWN :
                                xPosition = event.getX();
                                yPosition = event.getY();
                            break;
                        case MotionEvent.ACTION_POINTER_2_DOWN :
                                xPosition = event.getX(1);
                                yPosition = event.getY(1);
                            break;  
                        default:
                            break;
                    }
} 
```

# php - 递归 - 找到具有最多子元素的元素

> ID：12086910
> 
> 赞同：0
> 
> 时间：2012-08-23T07:40:11.810
> 
> 标签：php, recursion

我有一个 PHP 对象（或者它可能是一个数组），我想递归地遍历它的元素及其所有子元素，并找出哪个元素的子元素数量最多。

这就是我所做的。

```
var $max_element = array();

$this->find_longest_element_recursively($data, 0, array());

public function find_longest_element_recursively($object, $index, $max_array) {

  if(!is_array((array) $object) || is_string($object) || is_numeric($object) || is_bool($object)) {

  } else {
    foreach($object as $key => $element) {
      if(sizeof((array) $element) > sizeof((array) $this->max_array)) {
        $this->max_array = $element;
      }
      $this->find_longest_element_recursively($element, $index+1, $max_array);
    }
  }     
} 
```

好的。所以这对我有用。但我只是不认为这是进行递归的正确方法。我想我可以摆脱 $max_element 变量并作为递归函数的结果返回实际的 max_element 对象，但不确定如何在递归期间跟踪 max_element 对象。喜欢听听你的想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:48:03.717

您可以将其包含在一个类中：

```
class MaxFinder {

    var $max_element = array();
    function MaxFinder() {
    }

    public function find_longest_element_recursively($object, $index, $max_array) {

      if(!is_array((array) $object) || is_string($object) || is_numeric($object) || is_bool($object)) {

      } else {
        foreach($object as $key => $element) {
          if(sizeof((array) $element) > sizeof((array) $this->max_array)) {
            $this->max_array = $element;
          }
          $this->find_longest_element_recursively($element, $index+1, $max_array);
        }
      }     
     }

     public get_longest_element($object, $index, $max_array) {
          $this->find_longest_element_recursively($object, $index, $max_array);
          return $this->max_element;
     }
} 
```

这将为您提供一个仅调用一次的计算，而不会使您的变量空间混乱：

```
 $result = (new MaxFinder()).get_longest_element_recursively($data, 0, array()); 
```

当然，您也可以创建一个静态函数来为您执行实例化和 get_... 调用。

# eclipse - 安装 GWT 后 Eclipse->首选项中不存在 WindowBuilder

> ID：12086911
> 
> 赞同：0
> 
> 时间：2012-08-23T07:40:13.027
> 
> 标签：eclipse, gwt

当我试图在 Eclipse Indigo 中打开 GWT 设计器时，GWT 初始化超时。

为了增加超时，我应该去 Preferences->Window Builder->GWT。但我在首选项中看不到 WindowBuilder。

操作系统——红帽 Linux；编辑器 - Eclipse Indigo

我可以看到 WindowBuilder 核心组件已经安装在 Eclipse 中

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T20:40:21.237

您可以在“窗口->显示视图->其他”下找到一些可用的“窗口构建器”面板（在我的情况下为 2 个）。

现在，要在窗口构建器中查看 java 类，只需使用 java 类“打开方式 -> Gwt Designer”上的上下文菜单。然后，您将在编辑器视图的底部看到 2 个选项卡：“源”和“设计”。

希望这就是你要找的^^

# forms - 通过 TypoScript 将数据从一种形式发送到另一种形式

> ID：12086915
> 
> 赞同：0
> 
> 时间：2012-08-23T07:40:26.763
> 
> 标签：forms, typo3, typoscript

我在将数据从一个表单发送到另一个表单时遇到问题（使用表单处理程序）。我得到了这两个 TypoScripts：

第一种形式：

```
finishers {
    1.class = Finisher_Redirect
    1.config {
        redirectPage = {$formhandlerExamples.multistep-forms.first-step.redirectPage}
    }

  2.class = Tx_Formhandler_Finisher_StoreGP
  2.config {
    get_item = TEXT
    get_item.data = global:HTTP_POST_VARS|first-step|get_item
  }
} 
```

第二个：

```
preProcessors {
  1.class = Tx_Formhandler_PreProcessor_LoadGetPost
    1.config {

  get_item.defaultValue = TEXT
  get_item.defaultvalue.data = global:HTTP_POST_VARS|next-form|get_item

    }
} 
```

但什么也没有发生。谁能知道为什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:08:04.967

问题已解决：

第一种形式 TS：

```
finishers {
  10.class = Finisher_StoreGP
  20 {
     class = Finisher_Redirect
     config {
                redirectPage = {$formhandlerExamples.multistep-forms.redirectPage}
            }
     }
  } 
```

第二种形式 TS：

```
preProcessors {
   10 {
       class = PreProcessor_LoadDefaultValues
       config {
                1 {
                   get_item.defaultValue = TEXT
                   get_item.defaultValue.data = TSFE:fe_user|sesData|get_item
                  }
               }
        }
} 
```

# command-line-interface - 是否有用于查询适用于 Java 1.4.2 的 MBEAN 属性的 JMX 命令行界面？

> ID：12086917
> 
> 赞同：2
> 
> 时间：2012-08-23T07:40:58.190
> 
> 标签：command-line-interface, jmx

有许多 CLI，例如 Jmxterm，但它们需要 Java 1.5。

我们有一些运行 Java 1.4.2 的旧系统需要通过 JMX 进行查询。

我什至不确定那个阶段的 JMX 是否能够提供 MBEAN 属性。

如果您知道兼容 1.4.2 的 CLI，您会很开心！

谢谢

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T10:18:07.427

为什么不激活远程 JMX 连接并从运行 Java 1.5+ 并使用这些工具的机器连接到您的 Java 1.4 程序？

# java - Excel宏只能用VBA写？爪哇呢？

> ID：12086919
> 
> 赞同：-4
> 
> 时间：2012-08-23T07:41:04.633
> 
> 标签：java, vba, excel

我需要使用 Excel 宏编写脚本，但我的 VBA 太差了。是否可以用 Java 或其他语言编写脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:49:30.083

不，您不能使用除 VBA 之外的任何其他语言为 MS Office 编写宏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:10:23.913

如果您选择的语言支持这种编译，您总是可以编写一个 .dll，然后使用 VBA 链接到函数。这样，您无需学习太多 VBA 即可使其工作。但是，这也意味着该项目可能会变得更加难以维护。

例如，使用标准 Windows `User32.dll`：

```
Public Declare Function SetForegroundWindow Lib "user32" (ByVal HWND As Long) As Long 
```

（有关使用等的更多信息，请参阅[此 MSDN 链接。）](http://msdn.microsoft.com/en-us/library/office/aa165080%28v=office.10%29.aspx)

# javascript - JavaScript window.location 在内容编辑器 Web 部件中不起作用

> ID：12086921
> 
> 赞同：1
> 
> 时间：2012-08-23T07:41:18.233
> 
> 标签：javascript, html, dom, sharepoint-2010, content-editor

我的问题是，以下带有 window.location 函数的脚本在共享点内容编辑器 webpart 中不起作用。我已经将它作为一个独立的设备进行了测试，它运行良好，但是一旦我将它插入到内容编辑器 webpart 中，执行脚本时似乎什么也没有发生。

我将不胜感激任何帮助

```
<script type="text/javascript">
    function redirect(){
       var search = document.getElementById('searchtxt').value;
       var url = "test.com/test.aspx?s="+search;
       window.location = "http://"+url+"";
       return;
    }
    </script>
    <input type="text" id="searchtxt"/> <input type="submit" value="Search" onclick="return redirect()"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:48:46.993

如果编辑器在 iframe 中，则需要定位`top`窗口：

```
window.top.location = "http://"+url+""; 
```

您还应该确保编辑器接受脚本标签（并非所有编辑器都接受）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:28:33.913

你可以用这个`document.location.href='http://someurl.com/'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:42:58.457

尝试使用`window.location.href`或`window.location.replace()`

# javascript - 管理 node.js 中的运行时错误

> ID：12086927
> 
> 赞同：0
> 
> 时间：2012-08-23T07:41:53.950
> 
> 标签：javascript, node.js

**我想知道面对运行时错误，人们使用什么方法来保持 node.js 实例运行。**

未捕获的运行时异常将关闭节点进程（有效地关闭您的服务器）。我认为人们经常使用像 forever 或 upstart 这样的工具来缓解这种情况，如果它崩溃了，它们只会让进程重新恢复。这对于简单的 Web 服务器场景来说似乎很好，但是如果您正在维护一个会话，例如通过 websockets，那么这并不是一个真正的解决方案（因为它会丢弃您的所有会话）。

当然，理想情况下我应该捕捉潜在的异常，但总会错过一些东西。

那么，有哪些解决方案呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:46:18.587

您可以使用[process.uncaughtException](http://nodejs.org/api/process.html#process_event_uncaughtexception)事件来处理未捕获的异常，而无需重新启动应用程序。

在节点 0.8.x 中，您可以使用[域](http://nodejs.org/api/domain.html)模块更智能地处理错误。对于 express/connect，您可以使用[connect-domain](https://github.com/baryshev/connect-domain)模块。

# javascript - 表格 - 滚动到底部

> ID：12086928
> 
> 赞同：0
> 
> 时间：2012-08-23T07:42:00.230
> 
> 标签：javascript, jquery, scroll

我使用 PHP 制作了一个聊天系统，它不像其他聊天系统，我放了一些独特的东西，它使用一个表格，并且在每个表格行中显示一条消息，因此它就像消息或任何代码一样有序并放入设计，但是当加载评论时，包含该表格的框会像任何通常的页面或 div 一样滚动到顶部，我想让它在每次聊天框刷新时滚动到底部，这样它就可以像聊天框一样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:54:52.483

基本上，您可以执行以下操作：

在您的 jQuqery 中，对于添加的任何评论，请附加：

```
<a name='last_comment'></a> 
```

并将其从之前的评论中删除。因此，您将只有一个`last_comment`锚点 - 在最后一条评论之后。

在同一个函数中，在该锚链接上使用`trigger`a 。`click event`

# c# - 在 WPF 中实时处理大图像

> ID：12086929
> 
> 赞同：3
> 
> 时间：2012-08-23T07:42:01.130
> 
> 标签：c#, wpf, image, image-processing, aforge

我有非常大的图像（高达 12MPx）并且我想有效地处理它们（平移、缩放、更改亮度和对比度），所有这些都必须在 WPF 中完成。我正在使用 AForge.NET 库在非托管内存中进行图像处理，它运行良好，但仅适用于小图像。我正在寻找一种很好的方法来进行所有转换\过滤并实时有效地显示它们。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:11:14.817

没有王道。12 兆像素太多，无法仅由 CPU 实时处理。绝对缺乏计算能力是真正的问题。我建议你在 GPU 上使用库，例如​​ DirectX 或 OpenCV_GPU。

# ios - 如果目标 iPhone 应用在 App Store 上不可用，如何测试 Facebook SDK 的 apprequest？

> ID：12086932
> 
> 赞同：1
> 
> 时间：2012-08-23T07:42:21.380
> 
> 标签：ios, facebook

我的情况是，我正在开发一个 iPhone 应用程序，它将向用户的朋友发送 Facebook apprequest 以邀请他们使用这个应用程序。

因此，我在 Facebook 开发者平台上创建了一个应用程序并设置了“Native iOS App”，包括

1.  iOS Bundle ID - 来自我的 iPhone 开发中心
2.  iPhone App Store ID - 我放了一个市场上可用的 ID，而不是我正在开发的 ID。
3.  iPad App Store ID - (空)
4.  iOS SSO 设置 - 已启用
5.  iOS 原生深度链接 - 已启用
6.  方案后缀 - （空）

好的。然后。

我现在正在开发的 iPhone 应用程序可以通过 Facebook SDK 发送 apprequest，并且用户的朋友确实在他们的手机上的 Facebook iPhone 应用程序上收到了通知。但是，在用户手机上点击 Facebook iPhone 应用上的通知后，有两种情况。一种是如果手机上安装了我正在开发的 iPhone 应用程序，就会启动该应用程序。这是 Facebook 开发指南中描述的正确行为，并且运行顺利。

第二种情况应该是，如果我正在开发的应用程序没有安装在该手机上，则应该启动 App Store。但在我的情况下不会发生。屏幕切换后，Facebook iPhone 应用程序关闭，App Store 未启动。这很奇怪。

因此，我尝试在我的 Facebook 开发中心验证代码和设置的每个部分，它们看起来不错，除了“iPhone App Store ID 和 iOS Bundle ID 不属于同一个应用程序”。

所以，我重写了我的一个 iPhone 应用程序（例如 2nd App）来支持 Facebook 功能，包括邀请功能。为第二个应用程序设置 Facebook 开发中心。在 iPhone 上收到并单击通知后，确保手机上没有安装我的 2nd App，App Store 已启动，并且我的 2nd 已显示并准备下载。

所以，我很困惑。在确保每个功能都正常工作之前，我不想发布应用程序。当您的应用在 App Store 上不可用时，您如何确保将您的用户引导至 App Store？

欢迎任何建议。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:57:55.493

事实证明，我的 Facebook 开发中心出了点问题。

即使我将第二个应用程序的相同设置放入第一个应用程序，它也不起作用。

然后我删除第一个应用程序并使用相同的名称重新创建它，然后再次输入相同的设置，它可以工作。

我不确定是什么原因造成的，但这个解决方案对我有用。

# zend-framework - Zend 表关系保存/更新

> ID：12086933
> 
> 赞同：1
> 
> 时间：2012-08-23T07:42:29.757
> 
> 标签：zend-framework, save, sql-update, zend-db-table, table-relationships

目前我正在开发一个 cms 页面模块，在对文本进行一些修改后，我需要更新页面。因为我从多个表中获取多个数据，所以我还需要将数据保存/更新到多个表中。

将数据更新到一个特定的表不是问题，但由于某种原因，我无法弄清楚如何对表关系执行相同的技巧。我的一个问题是如何做到这一点，如果您可能需要为每个模型创建一个 savePage 方法并单独处理特定数据。或者他们是使用 ManyToManyRowsets 等选项处理保存的更好解决方案。

我不确定是我在寻找错误的东西，还是我想要的东西不存在。无论如何，下面的链接似乎有点像我想要的。如果有人可以帮助我，我将非常感激。

[https://stackoverflow.com/a/640648/1553963](https://stackoverflow.com/a/640648/1553963)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:30:07.573

这篇文章应该回答你的问题（没有简单的方法），并为你提供一个方法：

[Zend 多对多关系](https://stackoverflow.com/questions/1036450/zend-many-to-many-relationship)

卢西安

# qt - Qt 应用程序在 MinGW 上构建后中断

> ID：12086941
> 
> 赞同：1
> 
> 时间：2012-08-23T07:43:00.003
> 
> 标签：qt, build, mingw, entry-point

当我构建 Qt 4.8.2 时，它构建成功。但是，当我运行任何 Qt 预构建应用程序（qtdemo.exe、designer.exe 等）时，它会引发程序入口点错误。

这就是它所说的：

![在此处输入图像描述](../Images/afcb157ce3c1b07fa08f2432e76c2045.png)

我就是无法让它工作！

我已经构建了调试和发布 DLL，没有 Phonon、Script、Qt3support 或 webkit。

* * *

我在 Dependency Walker 中打开了该应用程序，它以粗体红色文本表示：

> 错误：由于隐式依赖模块中缺少导出函数，至少一个模块具有未解析的导入。
> 
> 错误：发现具有不同 CPU 类型的模块。
> 
> 警告：至少没有找到一个延迟加载依赖模块。警告：由于延迟加载依赖模块中缺少导出功能，至少有一个模块存在未解析的导入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:55:11.043

当您的系统 PATH 中有另一个版本的 QtCore4.dll 时，就会出现此问题。您可以通过将新编译的 dll 复制到与可执行文件相同的目录中来解决此问题，以便它找到正确的版本。

您可以在系统中搜索 QtCore4.dll 以查看哪些程序安装了冲突文件。

# php - 如何将这样的网址传递给facebook

> ID：12086944
> 
> 赞同：1
> 
> 时间：2012-08-23T07:43:24.800
> 
> 标签：php, facebook, facebook-graph-api

问：如何将这样的 url 传递给 facebook。

[https://www.facebook.com/sharer.php?t=XBOX&u=http://aaa.com/#/project/xbox-branding](https://www.facebook.com/sharer.php?t=XBOX&u=http://aaa.com/#/project/xbox-branding)

当我将此 url 传递给 facebook 时，facebook 将 url 修改为

[http://aaa.com/project/xbox-branding](http://aaa.com/project/xbox-branding)

在 facebook 的帖子中，我共享的 url 无法链接到正确的 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:46:08.417

编码`#`为`%23`，你可以用[urlencode()](http://br2.php.net/urlencode)

```
https://www.facebook.com/sharer.php?t=XBOX&u=http://aaa.com/%23/project/xbox-branding 
```

但您应该像这样对完整的重定向 URL 进行编码：

```
https://www.facebook.com/sharer.php?t=XBOX&u=http%3A%2F%2Faaa.com%2F%23%2Fproject%2Fxbox-branding 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:47:45.863

```
<a href="http://www.facebook.com/share.php?t=XBOX&u=http://aaa.com/%23/project/xbox-branding/" onclick="return fbs_click()" target="_blank">CLICK ME</a>

<script>function fbs_click() {u=location.href;t=document.title;window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false;}</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:50:56.040

始终对 url 进行编码以转义特殊字符。

在js中，

```
'https://www.facebook.com/sharer.php?t=XBOX&u=' + encodeURIComponent('http://aaa.com/#/project/xbox-branding'); 
```

在 php 中，

```
'https://www.facebook.com/sharer.php?t=XBOX&u='.urlencode('http://aaa.com/#/project/xbox-branding'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T06:04:27.517

ans : 将 url 中的 # 更改为 %23。例如[http://aaa.com/%23/project/](http://aaa.com/%23/project/) ......

# android - Android：如何将 imageview 的源设置为位图数组中的位图

> ID：12086948
> 
> 赞同：0
> 
> 时间：2012-08-23T07:43:36.767
> 
> 标签：android, image

我是 android 新手，我正在尝试在其中做 1 个小项目。我正在尝试从可绘制文件夹中获取图片并将其切割成 9 块并将这些块存储在位图数组中。我能够做到那..

现在，我如何从位图数组中检索这些片段并将其显示在图像视图上？

我在 UI 中使用了 gridview 来显示图像....但无法将位图数组分配给 imageResource ...

好的，这就是我想要做的..

```
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    Activity activity=(Activity)mContext;
    Resources res=activity.getResources();
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        //imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    Bitmap img=BitmapFactory.decodeResource(res, R.drawable.kite);
    createBitmapPieces(img);
    imageView.setImageResource(bmp[2]);//I dont know how to set the image from the array
}

public Bitmap[] createBitmapPieces(Bitmap source){

    int k=0;
    int width=source.getWidth();
    int height=source.getHeight();
    for(int i=0;i<3;i++){
       for(int j=0;j<3;j++){
        bmp[k]=Bitmap.createBitmap(source,(width*j)/3,(i*height)/3,width/3,height/3);
        k++;
    }

    }
    return bmp;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:49:35.427

您只能将一个位图分配给`ImageView`. 如果要使用数组，则必须扩展`ImageView`类，并在自定义中自己处理数组`View`。

你必须做的两件事：

**1.）**您必须创建一个公共方法来将`Bitmap`数组设置为新的私有字段。

**2.）**您必须覆盖该`onDraw(Canvas canvas)`方法并`Bitmaps`在数组中绘制而不是绘制单个`Drawable`.

**编辑：**我可能误解了您的问题，如果您尝试添加`Bitmaps`,`GridView`而不是单个`ImageView`，那么您可以使用自定义适配器来完成：

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    private Bitmap[] mPics;

    public ImageAdapter(Context c, Bitmap[] pics) {
        mContext = c;
        mPics = pics
    }

    public int getCount() {
        return mPics.length;
    }

    public Object getItem(int position) {
        return mPics[position];
    }

    public long getItemId(int position) {return 0;}

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageDrawable(new BitmapDrawable(getItem(position)));
        return imageView;
    }
} 
```

在你的`Activity`：

```
GridView grid = (GridView) findViewById(R.id.your_imageview_id);
grid.setAdapter(new ImageAdapter(this, YOUR_BITMAP_ARRAY)); 
```

# python - python 2.5 编码

> ID：12086953
> 
> 赞同：2
> 
> 时间：2012-08-23T07:43:51.267
> 
> 标签：python, encoding, utf-8, character-encoding

```
# -*- coding: utf-8 -*-
from pyquery import PyQuery as pq
from urllib import urlencode
from urllib2 import Request,urlopen
    def sendRequest(url, data = None, headersOnly = False):
    headers  = { 'User-Agent' : 'Mozilla/5.0 (X11; U; Linux i686; en-US;)' }
    request  = Request(url, data, headers)
    return urlopen(request).read()

resp = sendRequest("https://foursquare.com/v/rivers-edge-cafe--    morrison/4c1907776e02b7132eae627b")
print pq(resp)("#venueCategories").text() 
```

输出应为 Café、Burger Joint、Sandwich Place 但出现异常：

```
Traceback (most recent call last):
  File "unicodeerr1.py", line 11, in <module>
    print pq(resp)("#venueCategories").text()
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 3: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T07:51:05.537

您需要为源代码指定编码，或者使用字符转义。

```
# -*- coding: utf-8 -*- 
```

或者

```
print 'caf\xc3\xa9' # UTF-8 representation of e accent egu. 
```

不过，您可能想使用 Unicode 文字（这里使用 Unicode 转义字符）：

```
print u'caf\u00e9' 
```

请务必阅读[Unicode HOWTO](http://docs.python.org/howto/unicode.html)以完全理解这里发生的事情。其他有用的文件：

*   Joel Spolsky 的[《每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最小值》（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)
*   Ned Batchelder 的[实用 Unicode 演示文稿](http://nedbatchelder.com/text/unipain.html)。

请注意，您的特定错误与 python 2.5 与 2.7 没有任何关系，而是与您打印*到*的任何内容的输出编码有关。在您使用 python2.5 的服务器上，没有指定编码或明确设置为 ASCII，但在您使用 python 2.7 的本地计算机上，您很可能正在处理支持 UTF-8 的终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:55:08.423

我刚刚升级到 python 2.7，我所有的编码问题都得到了修复。

# hadoop - Hadoop mapreduce 出现“无法解析主机名”错误

> ID：12086954
> 
> 赞同：5
> 
> 时间：2012-08-23T07:43:53.377
> 
> 标签：hadoop, mapreduce

现在我运行Hadoop mapreduce作业，输入数据来自HBase表，最近出现错误，错误如下：

**错误 mapreduce.TableInputFormatBase：无法解析 /172.16.4.195 的主机名，因为 javax.naming.NameNotFoundException：找不到 DNS 名称 [响应代码 3]；剩余名称“195.4.16.172.in-addr.arpa”**

* *172.16.4.195* *是集群节点（从）IP地址，我不知道什么是“195.4.16.172”。

我第一次运行这个作业时没有这样的错误，我不知道为什么会出现这样的错误。如果你解决了问题，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:51:38.693

找不到反向 dns，你需要添加类似的东西

```
172.16.4.195 master_host_name 
```

到主机文件

如果在 linux 上运行，则位于 /etc/hosts 的文件

如果在 Windows 上运行，该文件位于 %WINDIR%/System32/Drivers/etc/hosts

# c++ - C++ std::set 查找函数重载 == 运算符

> ID：12086957
> 
> 赞同：8
> 
> 时间：2012-08-23T07:44:16.133
> 
> 标签：c++, set, stdset

我正在使用套装。我使用自定义结构作为键。我正在插入一个值并试图找到插入的值。但它似乎永远找不到元素。

我已经覆盖了 == 运算符和 < 运算符。

这是结构的代码：

```
struct distance_t
{
 public:
int id;
double distance;

bool operator<(const distance_t& rhs) const
{
    if(distance < rhs.distance)
        return true;
    else 
        return false;
}

bool operator==( const distance_t& rhs) 
{
    if(id == rhs.id)
        return true;
    else
        return false;
}
}; 
```

这是主要的代码

```
int main()
{
    set<distance_t> currentSet;

    distance_t insertDistance;
    insertDistance.id =1;
    insertDistance.distance = 0.5;

    currentSet.insert(insertDistance);

    distance_t findDistance;
    findDistance.id = 1;

    assert(currentSet.find(findDistance) != currentSet.end());
} 
```

它总是在断言语句中失败。我究竟做错了什么？

编辑-好的，现在我知道它根本不使用 == 运算符。这就是我想要的。我需要按距离排序的数据结构。但我应该可以使用 id 将其删除。是否有任何干净的方法或已经存在的数据结构来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T07:46:33.697

它失败了，因为您的小于比较使用`distance_t::distance`了您没有设置的`findDistance`：

```
distance_t findDistance;
findDistance.id = 1; 
```

[std::set](http://en.cppreference.com/w/cpp/container/set)不`operator==`用于任何事情。它只使用`operator<`. 所以你必须改变它的逻辑来使用`distance_t::id`.

如果要在`id`不更改集合顺序的情况下进行搜索，可以使用[std::find](http://en.cppreference.com/w/cpp/algorithm/find)：

```
set<distance_t>::iterator it = std::find(currentSet.begin(), 
                                         currentSet.end(), 
                                         findDistance); 
```

这将使用您的`operator==`. 请记住，这具有线性时间复杂度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T07:49:17.700

因为`operator==`根本没有被调用。比较元素就像：

```
!(a < b) && !(b < a) 
```

换句话说，它使用`operator<`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:49:57.547

由于您没有`findDistance.distance`为小于的结果分配值，因此比较未定义。

请注意，您对相等运算符和小于比较运算符的定义是危险的，因为很容易定义`distance_t`其结果不一致的实例。一个例子是两个距离相同但 ID 不同的实例。

# android - MapView onTap 问题：android.view.WindowManager$BadTokenException：无法添加窗口——令牌 null 不适用于应用程序

> ID：12086959
> 
> 赞同：3
> 
> 时间：2012-08-23T07:44:22.167
> 
> 标签：android, android-mapview, android-alertdialog, itemizedoverlay, android-context

有[类似的问题](https://stackoverflow.com/questions/7933206/android-unable-to-add-window-token-null-is-not-for-an-application-exception)，但对于试图为 MapView 实现 onTap 事件的人（如我）来说，问题出在哪里可能并不明显。问题/问题是这样的：

您正在尝试在 MapView 中实现自定义的 ItemizedOverlay，如下所示：

```
MyCustomItemizedOverlay mOverlay = new MyCustomItemizedOverlay(drawable, mContext); 
```

通常，如果您从活动中执行此操作，则使用以下内容就足够了：

```
MyCustomItemizedOverlay mOverlay = new MyCustomItemizedOverlay(drawable, this); 
```

这是您可以在各种教程（包括 Google 的 HelloItemizedOverlay 示例）中找到的一行，您可能已经从其中一个教程中复制了它。但是，如果您尝试将此代码移动到活动主线程以外的任何位置（例如，移动到 AyncTask 中），`this`则将无法工作。如果您认为（像我一样）更改`this`为`getBaseContext()`or `getApplicationContext()`，那么当您尝试点击 MapView 中的 ItemizedOverlay 时，您将遇到以下错误：

```
08-23 09:59:21.444: E/AndroidRuntime(30056): FATAL EXCEPTION: main
08-23 09:59:21.444: E/AndroidRuntime(30056): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
08-23 09:59:21.444: E/AndroidRuntime(30056):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:589)
08-23 09:59:21.444: E/AndroidRuntime(30056):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:326)
08-23 09:59:21.444: E/AndroidRuntime(30056):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
08-23 09:59:21.444: E/AndroidRuntime(30056):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
08-23 09:59:21.444: E/AndroidRuntime(30056):    at android.app.Dialog.show(Dialog.java:277)
08-23 09:59:21.444: E/AndroidRuntime(30056):    at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
08-23 09:59:21.444: E/AndroidRuntime(30056):    at com.myapp.MyCustomItemizedOverlay.onTap(MyCustomItemizedOverlay.java:32) 
```

此错误的原因是什么，您如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:44:22.167

问题在于您需要指定将显示 ItemizedOverlay的*Activity 上下文，而不是 Application 上下文。*从错误消息中并不能立即明确这一点，我相信这种混乱的根源可以在 Google 的[MapView 教程](https://developers.google.com/maps/documentation/android/hello-mapview)的错误中找到。当您应该引用将显示 ItemizedOverlay 的活动上下文时，它明确表示要引用应用程序上下文。因此，您可以通过将上面引用的行更改为：

```
MyCustomItemizedOverlay mOverlay = new MyCustomItemizedOverlay(drawable, MyActivity.this); 
```

甚至更好：

```
MyCustomItemizedOverlay mOverlay = new MyCustomItemizedOverlay(drawable, mapView.getContext()); 
```

`mapView`实际显示 ItemizedOverlay 的 MapView 实例在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T07:07:59.323

创建警报对话框时遇到问题...通过将“getApplicationContext()”更改为“MyActivity.this”解决...

感谢@robguinness :D

# c# - C# 非阻塞 Socket.Connect()

> ID：12086961
> 
> 赞同：2
> 
> 时间：2012-08-23T07:44:26.877
> 
> 标签：c#, sockets, winsock, nonblocking

我选择不使用异步调用，因为它需要回调，我只是好奇是否有办法通过使用**类似 Unix 的非阻塞套接字**方法来解决这个问题：Poll()，因为 Asyn 是专门为 Windows 环境创建的. 我正在研究这是否可以在没有异步的情况下完成。

**需要注意的是：非阻塞！=异步**:)

因此，我通过关闭 socket & Poll() 方法的阻塞标志有以下方法：

```
 try
    {
        IPEndPoint hostEp = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 11000);
        Socket hostSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        hostSock.Blocking = false;
        hostSock.Connect(hostEp);

    }
    catch (Win32Exception se)
    {
        if (ex.ErrorCode == 10035) // WSAEWOULDBLOCK is expected, means connect is in progress
        while (true)
        {
            Console.WriteLine("Connecting in progress");
            bool connected = hostSock.Poll(1000000, SelectMode.SelectWrite);
            if (connected)
            {
                Console.WriteLine("Connected");
                break;
            }

        }
    } 
```

但是然后 SelectMode.SelectWrite 似乎并没有为我重新启动连接尝试。所以有什么问题？我怎么能解决这个问题？我应该使用[Select() 而不是 Poll() 吗？](http://codeidol.com/csharp/csharp-network/Asynchronous-Sockets/Using-Non-blocking-Socket-Methods/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:46:44.963

只需使用异步方法 ( [`ConnectAsync()`](https://msdn.microsoft.com/en-us/library/system.net.sockets.socket.connectasync(v=vs.110).aspx))，它们就是为此而设计的。不要对程序逻辑使用异常。

您可以在不阻塞的情况下同步`Connect()`TCP 套接字：

> [手册](http://msdn.microsoft.com/en-us/library/ych8bz3x.aspx)：
> 
> Connect 方法将阻塞，除非您在调用 Connect 之前专门将 Blocking 属性设置为 false。如果您使用 TCP 等面向连接的协议并且您确实禁用了阻塞，则 Connect 将抛出 SocketException，因为它需要时间来建立连接。
> 
> 您可以使用 SocketException.ErrorCode 来获取具体的错误代码。获取此代码后，请参阅 MSDN 库中的 Windows Sockets version 2 API 错误代码文档，了解错误的详细说明。
> 
> 如果错误返回 WSAEWOULDBLOCK，则远程主机连接已由面向连接的 Socket 发起，但尚未成功完成。使用 Poll 方法来确定 Socket 何时完成连接。

但这正是您的代码所做的，因此应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:04:46.927

您可以使用[线程](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx)或[任务](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)来启动 Connect 而不会阻塞主线程。

如果需要与 UI（WinForms / WPF）交互，由于跨线程保护，这将增加复杂性。

您也可以使用[BackgroundWorker](http://msdn.microsoft.com/es-es/library/system.componentmodel.backgroundworker%28v=vs.95%29.aspx)来避免此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-31T22:12:57.937

实际上，您的代码正在我的系统上运行。但是，您当然需要一个接受您的 TCP 连接的服务器。如果你没有那个，那么你将永远等待。所以我猜你缺少一个服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-16T17:51:19.937

我有确切的问题，但对我来说答案相当愚蠢：我的代码有用于从字符串中获取 IpAddress 的库存代码（来自[microsoft](https://docs.microsoft.com/en-us/dotnet/framework/network-programming/synchronous-client-socket-example)）：

```
 var ipHostInfo = Dns.GetHostEntry(hostname);
 return ipHostInfo.AddressList[0]; 
```

这一切都很好，但我的测试是针对“127.0.0.1:9000”进行测试，由于某种原因，它生成了我实际以太网连接的 IP 地址。将解析机制更改为：

```
if (hostname.Equals("localhost"))
{
    return IPAddress.Parse("127.0.0.1");
}
try
{
    return IPAddress.Parse(hostname);
}
catch (FormatException e)
{
    var ipHostInfo = Dns.GetHostEntry(hostname);
    return ipHostInfo.AddressList[0];
} 
```

成功了（至少对我来说！）

# php - mssql/php - 循环遍历结果集并有效地执行新查询 - 内存表？

> ID：12086962
> 
> 赞同：0
> 
> 时间：2012-08-23T07:44:27.517
> 
> 标签：php, sql-server, in-memory

我对 MSSQL 相当陌生，从未使用过内存表，也不能 100% 确定这是否是我需要的。

我有一个查询结果集（无法修改），我循环显示每一行数据。对于结果集中的一个字段，我需要执行查询以获取该字段的相关显示数据。问题是我可能不得不在循环中调用这个查询 1000 次，具体取决于结果集中有多少行。

谁能建议有效地做到这一点的方法？我听说过 In Memory 表，想知道这是否是我需要的？如果是这样，我从哪里开始？或者我只是存储在一个数组或其他东西中？

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:38:19.107

```
Declare @Test_Memory_Table Table
(
/* Fields needed for lookup; use same datatypes as schema */ 
IndexOrPkFieldName Numeric(19,0),
Field1 varchar(255),
Field2 date
)

Insert into @Test_Memory_Table Select t2.Field1 as field1, t1.field2 as Field2, CONVERT(char(10),t3.Field3, 101) as Field3 
                 From   Table1 t1 
                 INNER JOIN Table2 t2 on t1.pkId = t2.pkId and isnull(t2.IS_ACTIVE,0) = 1  and ISNULL(t2.TYPE, 0) > 0 
                 INNER JOIN Table3 t3 on t2.pkId = t3.pkId

select * from @Test_Memory_Table 
```

只需在 SSMS 中测试查询并查看计划，看看返回内存表查询与直接查询表需要多长时间。请记住，由于 ssms 中的默认提示（例如 arithabort），ssms 可能比生产更快，但在通过 .net 客户端查询时可能不会以这种方式设置。如果您的桌子很小，我希望差异很小。

# symfony - 一对一的单向关系

> ID：12086965
> 
> 赞同：0
> 
> 时间：2012-08-23T07:44:53.820
> 
> 标签：symfony, doctrine, doctrine-orm

我有这些实体： - 商店和包装

我想构建一个 StoreType 表单，在其中添加包 ID。

我制作了一个 StoreType Form 类：（我希望从中获得一个选择框，其中列出了所有包）

我已经通过一对一的方式添加了包，但是我的问题是当我在存储表单中添加包时，创建了表单，但是在我的数据库存储表列包中是空的。我不知道为什么？

*   存储.php

```
/**
 * @ORM\Entity
 */
class Store
     {
        /**
         * @ORM\Id
         * @ORM\Column(type="integer")
         * @ORM\GeneratedValue(strategy="AUTO")
         */
        protected $id;

        /**
         * @ORM\Column(type="string", length="255")
         */
        protected $title;

        /**
         * @ORM\Column(type="string", length="255")
         */
        protected $domain;

        /**
         * @ORM\OneToOne(targetEntity="Package",cascade={"persist", "remove"})
         * @ORM\JoinColumn(name="package_id", referencedColumnName="id")
         */
        protected $package;
    } 
```

*   包.php

```
/**
 * @ORM\Entity
 */
class Package
     {
         /**
          * @ORM\Id
          * @ORM\Column(type="integer")
          * @ORM\GeneratedValue(strategy="AUTO")
          */
         protected $id;

         /**
          * @ORM\Column(type="string", length=255)
          */
         protected $title;

         /**
          * @ORM\Column(type="text", length="4000")
          */
         protected $description;

         /**
          * @ORM\Column(type="boolean")
          */
         protected $active;

         public function __toString()
          {
           return $this->getTitle();
          }
     } 
```

*   StoreType.php

```
class StoreType extends AbstractType
    {
        public function buildForm(FormBuilder $builder, array $options)
        {
            $builder
                ->add('title')
                ->add('domain')
                ->add('package','entity',array(
                    'class' => 'WebmuchProductBundle:Package',
            ));
        }

        public function getName()
        {
            return 'webmuch_productbundle_storetype';
        }
    } 
```

*   StoreController.php

```
/**
 * Store controller.
 *
 * @Route("/store")
 */
class StoreController extends Controller
{
/**
 * Lists all Store entities.
 *
 * @Route("/", name="store")
 * @Template()
 */
public function indexAction()
{
    $em = $this->getDoctrine()->getEntityManager();

    $entities = $em->getRepository('WebmuchProductBundle:Store')->findAll();

    return array('entities' => $entities);
}

/**
 * Finds and displays a Store entity.
 *
 * @Route("/{id}/show", name="store_show")
 * @Template()
 */
public function showAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();

    $entity = $em->getRepository('WebmuchProductBundle:Store')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Store entity.');
    }

    $deleteForm = $this->createDeleteForm($id);

    return array(
        'entity'      => $entity,
        'delete_form' => $deleteForm->createView(),        );
}

/**
 * Displays a form to create a new Store entity.
 *
 * @Route("/new", name="store_new")
 * @Template()
 */
public function newAction()
{
    $store = new Store();
    $form   = $this->createForm(new StoreType(), $store);

    return array(
        'entity' => $store,
        'form'   => $form->createView()
    );
}

/**
 * Creates a new Store entity.
 *
 * @Route("/create", name="store_create")
 * @Method("post")
 * @Template("WebmuchProductBundle:Store:new.html.twig")
 */
public function createAction()
{
    $entity  = new Store();
    $request = $this->getRequest();
    $form    = $this->createForm(new StoreType(), $entity);
    $form->bindRequest($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('store_show', array('id' => $entity->getId())));

    }

    return array(
        'entity' => $entity,
        'form'   => $form->createView()
    );
}

/**
 * Displays a form to edit an existing Store entity.
 *
 * @Route("/{id}/edit", name="store_edit")
 * @Template()
 */
public function editAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();

    $entity = $em->getRepository('WebmuchProductBundle:Store')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Store entity.');
    }

    $editForm = $this->createForm(new StoreType(), $entity);
    $deleteForm = $this->createDeleteForm($id);

    return array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
        'delete_form' => $deleteForm->createView(),
    );
}

/**
 * Edits an existing Store entity.
 *
 * @Route("/{id}/update", name="store_update")
 * @Method("post")
 * @Template("WebmuchProductBundle:Store:edit.html.twig")
 */
public function updateAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();

    $entity = $em->getRepository('WebmuchProductBundle:Store')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Store entity.');
    }

    $editForm   = $this->createForm(new StoreType(), $entity);
    $deleteForm = $this->createDeleteForm($id);

    $request = $this->getRequest();

    $editForm->bindRequest($request);

    if ($editForm->isValid()) {
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('store_edit', array('id' => $id)));
    }

    return array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
        'delete_form' => $deleteForm->createView(),
    );
}

/**
 * Deletes a Store entity.
 *
 * @Route("/{id}/delete", name="store_delete")
 * @Method("post")
 */
public function deleteAction($id)
{
    $form = $this->createDeleteForm($id);
    $request = $this->getRequest();

    $form->bindRequest($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        $entity = $em->getRepository('WebmuchProductBundle:Store')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Store entity.');
        }

        $em->remove($entity);
        $em->flush();
    }

    return $this->redirect($this->generateUrl('store'));
}

private function createDeleteForm($id)
{
    return $this->createFormBuilder(array('id' => $id))
        ->add('id', 'hidden')
        ->getForm()
    ;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:43:34.123

我认为您忘记在 createAction 中执行此操作：

```
 $request = $this->getRequest();
$form->setData($request->getPost()); 
```

# php - 在 if 语句中定义值不起作用

> ID：12086969
> 
> 赞同：0
> 
> 时间：2012-08-23T07:45:08.010
> 
> 标签：php

我正在研究一种简单的方法来编辑 Paypal 支付系统的状态，这样我就可以在需要时在测试模式下切换它而无需进入代码。“MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER”被定义为“Live”，但由于某种原因，它不断抛出沙盒 url。

```
echo MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER ;

if (MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER == "Live") {
    $form_action_url = 'https://www.paypal.com/cgi-bin/webscr';
  } else {
    $form_action_url = 'https://www.sandbox.paypal.com/cgi-bin/webscr';
  }
echo ' '.$form_action_url;
die(); 
```

上述输出：

> 直播[https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr) '

如果我将 MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER 替换为“live”，它会正确返回值，我还尝试将 DEFINE 移动到变量，然后再转到 IF 语句，但它仍然不起作用。

我正在使用 OsCommerce 通过管理系统来定义它。

var_dump 还显示：

> 字符串（20）“直播”

而不是应该的：

> 字符串（4）“直播”

MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER 的选项是“实时”和“沙盒”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:49:26.337

以下代码按预期工作：

```
<?php
    define("MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER", "LIVE");
    echo MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER ;

    if (MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER == "Live") 
    {
        $form_action_url = 'https://www.paypal.com/cgi-bin/webscr';
    } 
    else 
    {
        $form_action_url = 'https://www.sandbox.paypal.com/cgi-bin/webscr';
    }
    echo ' '.$form_action_url;
    die();
?>

// Outpu: Live https://www.paypal.com/cgi-bin/webscr 
```

你到底是如何定义你的常数的？

当以下内容发生变化时：

```
define("MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER", "LIVE"); 
```

输出是

```
LIVE https://www.sandbox.paypal.com/cgi-bin/webscr 
```

编辑：根据您的评论，代码的工作方式与当时应有的完全一样。您将常量定义为，`LIVE`但随后在 if 语句中针对`Live`. 当您比较它们时，它们*不*相等，因此该`if`语句的计算结果为 false 并执行您的第二个条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:51:59.007

```
<?php
if(!defined('MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER')) {
  define('MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER', 'Live');
}

if(MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER == 'Live') {
 echo('live');
} else {
 echo('sandboxing');
}
?> 
```

现场**直播**;-))

按预期工作 - 无法重现您描述的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:16:36.633

在删除并添加 MODULE_PAYMENT_PAYPAL_STANDARD_GATEWAY_SERVER 几次后，我完全从网站上删除了 paypal 脚本并再次安装它。现在它起作用了！

# mysql - 数据透视表出错（选择语句）

> ID：12086970
> 
> 赞同：0
> 
> 时间：2012-08-23T07:45:09.390
> 
> 标签：mysql

我有一个结构如下的表：

```
ID   , AMOUNT
'001', 17333935.00
'005', 1883045.00
'011', 29992400.00
'015', 17547235.00 
```

我想创建一个这样的列表：

```
| '001'       | '005'       | '011'       | '015' |

| 17333935.00 | 1883045.00  | 29992400.00 | 17547235.00 | 
```

我试图使用这个 Select 语句，但它不起作用。

```
SELECT col1.ROW_RPT,col1.IDUSER,col1.SUBTOT,col2.SUBTOT,col3.SUBTOT
 FROM
(SELECT 'OMSET' ROW_RPT,IDUSER,Sum(ORG_QTY*ORG_PRC) SUBTOT FROM sales WHERE IDUSER='001') col1 
INNER JOIN
(SELECT 'OMSET' ROW_RPT,IDUSER,Sum(ORG_QTY*ORG_PRC) SUBTOT FROM sales WHERE IDUSER='005') col2 ON col2.ROW_RPT=col1.ROW_RPT INNER JOIN
(SELECT 'OMSET' ROW_RPT,IDUSER,Sum(ORG_QTY*ORG_PRC) SUBTOT FROM sales WHERE IDUSER='011') col3 ON col3.ROW_RPT=col1.ROW_RPT INNER JOIN
(SELECT 'OMSET' ROW_RPT,IDUSER,Sum(ORG_QTY*ORG_PRC) SUBTOT FROM sales WHERE IDUSER='015') col4 ON col3.ROW_RPT=col1.ROW_RPT 
```

如何提取上述数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:12:19.387

你可以使用这样的东西 -

```
SELECT
  MAX(IF(id = '001', AMOUNT, NULL)) AS '001',
  MAX(IF(id = '005', AMOUNT, NULL)) AS '005',
  ..
FROM
  sales 
```

但我认为这不是一个好主意，因为可能有很多`id`.

# android - Android：相对布局的背景图像

> ID：12086975
> 
> 赞同：0
> 
> 时间：2012-08-23T07:45:28.610
> 
> 标签：android, android-layout

背景图像（png 文件）的大小是多少？如何确定图像的大小？（我想覆盖整个相对布局，从而覆盖整个屏幕）

我是否需要多个 png 文件，所有文件都具有相同的图像，但所有屏幕都支持不同的大小？（3.7 英寸、4.2 英寸、平板电脑尺寸等...）有人可以帮忙吗？我虽然有 1 张图像，然后根据从设备系统检索的屏幕尺寸对其进行拉伸，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:47:35.683

您可以使用填充父级，但要获得准确的信息，请使用[http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

它将帮助您提供资源 它是开发人员站点 - 它包含有关提供资源的信息，您还可以看到支持多个屏幕以便更好地理解

# iphone - 苹果 mach-o 链接器（id）错误对此感到困惑

> ID：12086977
> 
> 赞同：0
> 
> 时间：2012-08-23T07:45:39.273
> 
> 标签：iphone, ios5, xcode4.2, xcodebuild

我刚刚在 xcode 4.2 中打开了在 xcode 3.1.5 版本中制作的项目，并且收到以下错误，任何人都可以在这方面帮助我。

1)

```
Ld /Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator/ARecipeViewer.app/ARecipeViewer normal i386
    cd /Users/hasmukh.mandavia/Desktop/DevelopmentArea/ARecipe
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator -L/Users/hasmukh.mandavia/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.0.sdk/lib -L/Users/hasmukh.mandavia/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.0.sdk/lib/gstreamer-0.10 -L/Users/hasmukh.mandavia/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.0.sdk/lib/pkgconfig -F/Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator -filelist /Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Intermediates/ARecipeViewer.build/Debug-iphonesimulator/ARecipeViewer.build/Objects-normal/i386/ARecipeViewer.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -lpocketsphinx -lsphinxbase -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=30100 -framework Foundation -framework UIKit -lsqlite3.0 -framework AudioToolbox -framework CFNetwork -liconv -lcv -lcxcore -framework CoreGraphics -framework QuartzCore -framework OpenGLES -o /Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator/ARecipeViewer.app/ARecipeViewer

ld: library not found for -lcv
Command /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang failed with exit code 1 
```

2)

```
GenerateDSYMFile /Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator/ARecipeViewer.app.dSYM /Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator/ARecipeViewer.app/ARecipeViewer
    cd /Users/hasmukh.mandavia/Desktop/DevelopmentArea/ARecipe
    setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Developer/usr/bin/dsymutil /Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator/ARecipeViewer.app/ARecipeViewer -o /Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator/ARecipeViewer.app.dSYM

error: unable to open executable '/Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator/ARecipeViewer.app/ARecipeViewer' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:18:24.407

1.) As the first error says

```
ld: library not found for -lcv 
```

It means your project needs a static library for `'cv'` and either its is not there in your project or placed at some different location(if you are using it)

or

you are putting additional compiler flag in build settings(if you are not using the library in your code). following compiler flags in build settings.

```
-liconv -lcv -lcxcore 
```

put cv library at right location.(so that it can be included in project).

2.) Second error may be because .app file is yet not created in derived data directory. Go at path shown in error, i.e.. and verify whether .app file exist or not.

```
error: unable to open executable '/Users/hasmukh.mandavia/Library/Developer/Xcode/DerivedData/ARecipeViewer-cdsqawgcznmakicuonkiinivjeed/Build/Products/Debug-iphonesimulator/ARecipeViewer.app/ARecipeViewer' 
```

# iphone - 尝试使用 UIGraphicsGetImageFromCurrentImageContext() 捕获 MPMoviePlayerViewController 视图时获取空白图像

> ID：12086979
> 
> 赞同：1
> 
> 时间：2012-08-23T07:45:47.127
> 
> 标签：iphone, ios, ipad, ios5

当我的应用程序处于前台时，我需要捕获 iPhone 屏幕。我已经为此使用`UIGraphicsGetImageFromCurrentImageContaxt()`了它，它在大多数 synerio 中都可以使用，但在使用`MPMoviePlayerViewController`或 AVPlayer 播放视频时失败，并通过播放器控制返回黑色图像。

可能我的猜测是`MPMoviePlayerViewController`使用 OpenGL 渲染帧并且方法`UIGraphicsGetImageFromCurrentImageContaxt()`无法捕获图像？？

我遗漏了一些东西，或者在应用程序处于前台时是否有任何替代解决方案可用于捕获 iPhone 屏幕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:49:37.527

对此没有任何简单的解决方案（即我可能不知道），但您需要弄清楚。在这里，我描述了可能的解决方案。当您尝试简单地在上下文中渲染视图时，它将给出空白屏幕代替播放器，其他事情将保持原样。

我知道的可能解决方案
**Private API**
您可以使用`UIGetScreenImage()`函数来捕获设备的整个屏幕，包括播放器及其控件。这是您可以轻松获得具有视图的播放器图像的方式。
**注意**：有些小伙伴说使用这个功能可能会导致申请被拒绝（我从来没有用过应用商店的应用，所以我没有太多经验:)）。

**第二种方式。**

如果您想获取播放器的图像以及驻留在主视图或 iPhone 屏幕中的其他内容，那么基本想法是捕获两个图像（即一个电影播放器​​和另一个像您正在使用的整个屏幕`UIGraphicsGetImageFromCurrentImageContext`）并将它们组合为一张图像使用一些适当的计算。这样你需要做一些计算，所以准确性取决于你的计算。

在这里，我更喜欢使用`AVPlayer`MPMoviePlayer 而不是我不确定我是否真实，但因为我觉得 AVPlayer 在特定时间提供了准确的帧（准确度好。屏幕上显示的准确图像。）

请将 AVPlayer 的重力模式设置为`AVLayerVideoGravityResizeAspect`。此模式将保留纵横比并适合图层范围（即此选项是默认选项）。你可以这样设置。

```
playerLayer.videoGravity = setVideoFillMode:AVLayerVideoGravityResizeAspect; 
```

其中 playerLayer 是 的对象`AVPlayerLayer`。

现在得到图像`AVPlayerLayer`

```
AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] 
                                                     initWithAsset:asset];
            imageGenerator.appliesPreferredTrackTransform=YES;
            /*AVAssetImageGenerator will scale images such that they fit within the defined bounding box. Images will never be scaled up. So provide this should be the size of AVPlayer. */
            imageGenerator.maximumSize=CGSizeMake(400, 400); 
            CGImageRef imgRef = [imageGenerator copyCGImageAtTime:storedCMTime actualTime:NULL error:NULL];
            [imageGenerator release]; 
```

请注意，此生成的图像可能不是您正在寻找的确切尺寸，或者您提供的最大尺寸，因为正如我在上面的评论中提到的，这里的图像永远不会按比例放大。如果图像不是您正在查看的确切大小，则使用一些图像实用程序功能根据播放器的大小缩放图像，但不要破坏纵横比，因为我们已将 AVPLayer 的模式设置为 AVLayerVideoGravityResizeAspect.store 此图像临时.

现在使用 UIGraphicsGetImageFromCurrentImageContext 捕获 View 的图像（即就像您当前正在做的那样）。绘制我们已经捕获并存储在您视图上显示的黑色区域的 AVplayer 图像（即，您需要进行一些试验和错误才能获得完全相同的结果）。

在这里，我试图涵盖所有可能引起恐慌或不立即明显的要点。

**更新：** 来自 APPLE 的屏幕捕获解决方案：http: [//developer.apple.com/library/ios/#qa/qa1703/_index.html#//apple_ref/doc/uid/DTS40010193](http://developer.apple.com/library/ios/#qa/qa1703/_index.html#//apple_ref/doc/uid/DTS40010193)

如果您想使用 MPMoviewPlayerController，那没关系。使用@Kuldeep 显示的代码获取缩略图。**并使用 Image Masking**结合两个视图的图像和缩略图在这里准确解释：[链接](https://stackoverflow.com/questions/10582943/how-to-take-a-screenshot-from-an-video-playing-through-mpmediaplayercontroller-i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:21:03.087

我宁愿建议使用下面的代码段，可能会更容易使用。您只需要传递需要捕获视频的时间因素。

```
float timeFactor = 60.0;
CGRect rect = CGRectMake(self.view.center.x, self.view.center.y, 100.0, 100.0)
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
UIImage *thumbnail = [player thumbnailImageAtTime:timeFactor timeOption:MPMovieTimeOptionNearestKeyFrame];
UIImageView *imagV=[[UIImageView alloc]initWithImage:thumbnail];
[imagV setFrame:rect]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T16:01:20.167

好吧，似乎我找到了在 AVPlayer 中捕获帧的解决方案：

```
 - (UIImage*) captureFrame {

    AVAssetImageGenerator *imageGenerator = [AVAssetImageGenerator assetImageGeneratorWithAsset:[self.player.currentItem asset]];

    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 5) {
        [imageGenerator setRequestedTimeToleranceAfter:kCMTimeZero];
        [imageGenerator setRequestedTimeToleranceBefore:kCMTimeZero];
    }

    CGImageRef ref = [imageGenerator copyCGImageAtTime:self.player.currentItem.currentTime actualTime:nil error:nil];
    UIImage *img = [UIImage imageWithCGImage:ref];
    CGImageRelease(ref);

    return img;
} 
```

# iphone - addSubview 动画仅在第二次后才有效

> ID：12086980
> 
> 赞同：1
> 
> 时间：2012-08-23T07:46:00.880
> 
> 标签：iphone, objective-c, ios

我试图让我的标签出现动画：

```
- (void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer {
    if (isShowingRectangleLabel == NO) {
    [UIView transitionWithView:rectangleLabel duration:0.5
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    animations:^ { [self.view addSubview:rectangleLabel]; }
                    completion:nil];
        NSLog(@"action");
        isShowingRectangleLabel = YES;
    } else {
        [UIView transitionWithView:rectangleLabel duration:0.5
                       options:UIViewAnimationOptionTransitionFlipFromBottom
                    animations:^ { [rectangleLabel removeFromSuperview]; }
                    completion:nil];
        isShowingRectangleLabel = NO;
    }

} 
```

但是这个动画只有在第二次添加到子视图后才能工作。我该如何解决？

**编辑**澄清，`addSubview`作品但没有动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:09:49.610

做这个：

```
- (void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer {
    if (isShowingRectangleLabel == NO) {
    [UIView transitionWithView:self.view duration:0.5
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    animations:^ { [self.view addSubview:rectangleLabel]; }
                    completion:nil];
        NSLog(@"action");
        isShowingRectangleLabel = YES;
    } else {
        [UIView transitionWithView:self.view duration:0.5
                       options:UIViewAnimationOptionTransitionFlipFromBottom
                    animations:^ { [rectangleLabel removeFromSuperview]; }
                    completion:nil];
        isShowingRectangleLabel = NO;
    }

} 
```

# java - 使用“我的文件”应用程序单击按钮打开文件夹

> ID：12086981
> 
> 赞同：2
> 
> 时间：2012-08-23T07:46:03.303
> 
> 标签：java, android, directory

我正在制作安卓应用程序。在按钮单击时，我只需要打开我有 pdf 的特定文件夹，以便用户可以选择一些 pdf 从该文件夹中读取。

我设法列出了 pdf 文件夹中的所有文件，但这不是我需要的。最合乎逻辑的解决方案是使用“我的文件”应用程序打开文件夹，该应用程序已经是 Android 操作系统的一部分。在android上有什么乳清可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:52:53.640

当心。并非所有 Android 设备都有“我的文件”应用程序。所以最好的方法是创建自己的列表/文件浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:58:01.083

这是我列出文件的代码，如何在点击时打开 pdf 文件。

```
 public class AndroidListFilesActivity extends ListActivity {

    private List<String> fileList = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        File root = new File(Environment.getExternalStorageDirectory()
                .getAbsolutePath());    
        File pdf = new File(root, "PDF");
        ListDir(pdf);
    }

    void ListDir(File f) {
        File[] files = f.listFiles();
        fileList.clear();
        for (File file : files) {
            fileList.add(file.getPath());
        }

        ArrayAdapter<String> directoryList = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, fileList);
        setListAdapter(directoryList);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T10:47:18.940

此代码在没有“我的文件”应用程序的情况下工作，这是更好的解决方案。

```
 public class AndroidListFilesActivity extends ListActivity {

    File root;
    File pdf;

    private List<String> fileList = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        root = new File(Environment.getExternalStorageDirectory()
                .getAbsolutePath());
        // ListDir(root);

        pdf = new File(root, "PDF");
        ListDir(pdf);
    }

    void ListDir(File f) {
        File[] files = f.listFiles();
        fileList.clear();
        for (File file : files) {
            fileList.add(file.getPath());
        }

        ArrayAdapter<String> directoryList = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, fileList);

        setListAdapter(directoryList);

    }

    public void onListItemClick(ListView parent, View v, int position, long id) {
        //selection.setText(fileList.indexOf(simple_list_item_1));
        OpenPdf(fileList.get(position).toString());
    }

    public void OpenPdf(String path)
    {
          File file = new File(path);
          if (file.exists()) {
              Uri p = Uri.fromFile(file);
              Intent intent = new Intent(Intent.ACTION_VIEW);
              intent.setDataAndType(p, "application/pdf");
              intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

              try {
                  startActivity(intent);
              } 
              catch (ActivityNotFoundException e){
              }
          }
    }
} 
```

# css - 列表项内文本问题的垂直对齐

> ID：12086983
> 
> 赞同：0
> 
> 时间：2012-08-23T07:46:11.777
> 
> 标签：css

**这是一个示例** [http://dabblet.com/gist/3433883](http://dabblet.com/gist/3433883)。

在这个例子中，我的问题是如何使最后一个文本“一些文本”在里面`<li>`垂直对齐而不用额外的元素包装。寻找与 IE7+ 的兼容性。

我已经知道如果我将它包装在 a 中`span`并给予，我可以实现这一目标，`vertical-align:middle`但我只是好奇如果没有它是否有可能。

**HTML**

```
<ul>
<li><span class="icon"></span><b>bold text</b>Some text</li>
</ul> 
```

**CSS**

```
ul {list-style:none}
li {background:yellow}
.icon {background:url(http://www.gfdl.noaa.gov/pix/user_images/kd/qt_icon.png);
        display:block;
        height:32px;
        width:32px;
        display:inline-block;
        margin-right:10px;
        vertical-align:middle}
b {vertical-align:middle} 
```

**编辑：（经过一些回答）**

`<b>`如果我删除-tag上的垂直对齐：中间。我得到不均匀的间距

![在此处输入图像描述](../Images/ecbf31feeb631e9b7396f7f38146b716.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:03:02.007

设置`vertical-align`为最高元素（通常是`IMG`标签，但在您的情况下`SPAN`带有背景图像）就足够了，您可以安全地将其从`<b>`标签上删除。试试这个 CSS 作为概念证明：

```
ul {
    list-style:none
}
li {
    background:yellow;
}
.icon {
    background:pink;
    height:48px;
    width:32px;
    display:inline-block;
    margin-right:10px;
    vertical-align:middle
} 
```

![在此处输入图像描述](../Images/63c8b7327191f1d615ee675f40b39172.png)

[http://jsfiddle.net/tVtKD/](http://jsfiddle.net/tVtKD/)

在 IE7+ 中测试

**更新**

与 OP 的想法相反，这个文本没有不均匀的间距，你只需要测量正确的字形。从大写字母的顶部到小写**y**或**p**的底部。这个放大的图像，它的两边正好有 15 px 的空间。：

![在此处输入图像描述](../Images/67e948593b42654b18ea5593df192d2f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:52:55.357

`<b>`您应该删除-tag上的垂直对齐：中间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:50:54.720

添加`vertical-align`到`li`.

```
ul {list-style:none}
li {background:yellow;
vertical-align:middle;
}
.icon {background:url(http://www.gfdl.noaa.gov/pix/user_images/kd/qt_icon.png);
        display:block;
        height:32px;
        width:32px;
        display:inline-block;
        margin-right:10px;
        vertical-align:middle} 
```

![在此处输入图像描述](../Images/9612c828ad39d7621faebfeb0d8ac467.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T07:51:46.007

您还可以使用在标签`line-height`内垂直对齐文本：`<li>`

```
ul {list-style:none}
li {background:yellow; line-height:32px;}
.icon {background:url(http://www.gfdl.noaa.gov/pix/user_images/kd/qt_icon.png);
    display:block;
    height:32px;
    width:32px;
    display:inline-block;
    margin-right:10px;
    vertical-align:middle} 
```

这是我个人使用 垂直对齐文本的偏好`line-height`，因为它在 Windows、Mac 和 Linux 平台上同样适用——字体不同（尤其是在 Mac 上），并通过明确指定`line-height`确保行在所有平台上的对齐方式相同。

# mysql - 按城市分组Mysql查询联系人表

> ID：12086985
> 
> 赞同：0
> 
> 时间：2012-08-23T07:46:18.587
> 
> 标签：mysql, sql

一个简单的，很长一段时间我不使用mysql查询所以也许有人可以帮助我解决这个nooby问题，我有一个联系人表，id，姓名和城市..我想得到如下列出的所有联系人。

```
城市 1
--------
联系人1
联系人2
联系方式3

城市 2
--------
联系方式4
联系方式7
联系人10

城市 3
--------
联系人5
联系人6
联系人8

```

我不想使用任何额外的 php 编码，只是得到这样的 sql 结果

```
city 1 
   -> contact 1
   -> contact 2
   -> contact 3
city 2 
   -> contact 4
   -> contact 7
   -> contact 10 
```

...

然后将结果填充到 php 对象中并执行以下操作：

```
foreach (cities as city)
{ 
   // code here
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:49:08.677

使用 GROUP_CONCAT

```
SELECT  city, GROUP_CONCAT(name)
FROM    contacts
GROUP BY    city 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:48:33.460

您只需要`GROUP BY`城市列并使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)函数`SELECT`来获取每个城市的名称的逗号分隔列表。

```
SELECT city, GROUP_CONCAT(name) AS name
FROM contacts 
GROUP BY city; 
```

# context-free-grammar - 计算上下文无关语法中的单词

> ID：12086986
> 
> 赞同：4
> 
> 时间：2012-08-23T07:46:33.120
> 
> 标签：context-free-grammar

因此，我遇到了一个无法解决的上下文无关语法问题。这不是为了成绩什么的，所以不要担心。

## 问题是这样的：

> 有一个上下文无关的语法，看起来像
> 
> S -> S1 | S2
> 
> S1 -> aS1B | 乙
> 
> S2 -> S2aB | 乙
> 
> B -> bS | b
> 
> 任务是编写一个函数（用任何编程语言）count_words(n)。函数需要返回长度为“n”的单词数，这些单词在这种上下文无关语言中“涉及”。
> 
> ***假设我用 count_words(3) 调用函数，函数必须返回长度为 3 的可能单词的数量（在该上下文无关语言中）。那就是：bab、abb、aab 等。

任何人都可以帮助我吗？我完全不知道……假设这并不难，但我不能强迫自己以正确的方式思考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:56:00.453

您将需要模拟语法。给定终端`a`和`b`，构造一个接受您的语言的自动机。由于您提供的语法是左递归语法，因此可以选择构造一个类似于 LR 解析器的下推自动机。在每次符号推送之后，如果生成的解析堆栈可以减少到起始符号，则该字符串可以被文法接受。继续此操作，直到所需的字符串长度。

本质上，您是在模拟自动机并进行分支，因为您将在减少解析堆栈后尝试使用所有可能的输入进行模拟。

您可以避免完全构建自动机，而只需查看在给定每个状态时您处于哪些可能的规则。

# c# - 为什么我不能使用 int 来计算字节到千兆字节？

> ID：12086994
> 
> 赞同：3
> 
> 时间：2012-08-23T07:47:13.540
> 
> 标签：c#

在我当前的项目中将字节转换为千兆字节时遇到了一些麻烦。最初我是这样做的：

```
 long requiredDiskSpace = 5000000000000; // In bytes
 int gb = (int)requiredDiskSpace / 1024 / 1024 / 1024; 
```

此计算变为 0。（正确应为 4 656）。然后我切换到`decimal`类型，如下所示：

```
 long requiredDiskSpace = 5000000000000; // In bytes
 decimal gb = requiredDiskSpace / 1024 / 1024 / 1024;
 int gbAsInt = (int)gb; 
```

这个计算（正确）得出`gbAsInt`4 656。

现在，我的问题很简单；为什么？对我来说，计算看起来很相似，因为我对任何十进制数字都不感兴趣，我不明白为什么我不能在实际计算中只使用 int 。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T07:50:49.547

您正在尝试将 5000000000000 转换为整数。这将无法正常工作，因为该数字大于`Int.MaxValue`所以您实际上应该这样做：

```
int gb = (int)(requiredDiskSpace / 1024 / 1024 / 1024); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T07:49:55.183

问题是`(int)requiredDiskSpace`，这个值`5000000000000`对于整数来说太大了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-23T07:51:16.977

你的问题就`(int)`在那里。你正在`long`向`int`那个方向投掷你的。但是 5000000000000 不能适合 32 位整数，因此您最终会得到一个完全不同的数字，介于 -2 ^(31)和 2 ^(31)之间。将其除以 1073741824 得到 0。

我怀疑您只是希望将结果转换为`int`：

```
int gb = (int)(requiredDiskSpace / 1024 / 1024 / 1024); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-23T07:50:34.527

原因是你的演员。如果使用括号，它将正常工作：

```
(int)(requiredDiskSpace / 1024 / 1024 / 1024) 
```

您的代码中发生的情况是：

1.  5000000000000 被强制转换为 int，由于整数溢出导致 658067456。
2.  658067456 除以 1024 得到 642644
3.  642644 除以 1024 得到 627.58203125。由于所有操作都在整数上进行，因此结果实际上是 627，因为小数被去掉了。
4.  627 除以 1024 得到 0.6123.. 再一次，小数被去掉，你最终得到**0**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-23T07:51:15.073

计算后投射：

```
 long requiredDiskSpace = 5000000000000; // In bytes
    int gb = (int)(requiredDiskSpace / 1024 / 1024 / 1024); 
```

当您立即转换为 int 时，您将失去价值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-23T07:53:40.853

您正在将字节值转换为`int`，它无法容纳如此大的数字。

```
long test = 5000000000000;
int value = (int)test; // value = 658067456 
```

将此值除以 1024 三倍将导致`627 / 1024`等于（整数运算）`0`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-23T07:49:06.417

因为当您使用整数除法时，结果每次都会被截断为整数。
所以你在第一次尝试时为零，即使因为 5000000000000 太大而无法存储在 int var 中。
你应该使用

```
double gb = 1.0d * requiredDiskSpace / (1024 * 1024 * 1024); 
```

# ajax - Joomla 插件数据库错误？这里有什么问题？

> ID：12086995
> 
> 赞同：0
> 
> 时间：2012-08-23T07:47:16.830
> 
> 标签：ajax, plugins, joomla

我刚开始学习Jplugin开发，所以在这里我做了一个小投票脚本。这里一切正常，但我希望 conf.php 文件以 joomla 框架样式制作。正如您在此处看到的，1 和 2 个文件完美地结合在一起。我想使用第三个示例而不是第二个示例，其中我使用简单的 php 代码。我尝试做的最后一个示例是使用 joomla 框架，但它不起作用。我不知道该代码有什么问题。任何人看到都可以告诉我在哪里犯了错误，或者可能远离正确吗？

```
<?php
defined( '_JEXEC' ) or die;
?>

<?php
class plgSystemRatingx extends JPlugin

{
   public function onContentBeforeDisplay()
   {
?>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function()
{
$(".like").click(function()
{
var id=$(this).attr("id");
var name=$(this).attr("name");
var dataString = 'id='+ id + '&name='+ name;
$("#votebox").slideDown("slow");

$("#flash").fadeIn("slow");

$.ajax
({
type: "POST",
url: "conf.php",
data: dataString,
cache: false,
success: function(html)
{
$("#flash").fadeOut("slow");
$("#content").html(html);
} 
});
});

$(".close").click(function()
{
$("#votebox").slideUp("slow");
});

});
</script>
<body>
<div style="margin:50px">
<a href="#" class="like" id="1" name="up">Like</a> -- <a href="#" class="like" id="1" name="down">Dislike</a>
<div id="votebox">
<span id='close'><a href="#" class="close" title="Close This">X</a></span>
<div style="height:13px">
<div id="flash">Loading........</div>
</div>
<div id="content">
</div>
</div>
</div>
<?php
      return true;
   }
} 
```

这段代码完美运行

```
<?php
$mysql_hostname = "localhost";
$mysql_user = "px";
$mysql_password = "px";
$mysql_database = "jum";
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) 
or die("Opps some thing went wrong");
mysql_select_db($mysql_database, $bd) or die("Opps some thing went wrong");

if($_POST['id'])
{
$id=mysql_real_escape_string($_POST['id']);
$name=mysql_real_escape_string($_POST['name']);

mysql_query("update messages set $name=$name+1 where id='$id'");

$result=mysql_query("select up,down from messages where id='$id'");
$row=mysql_fetch_array($result);
$up_value=$row['up'];
$down_value=$row['down'];
$total=$up_value+$down_value;

$up_per=($up_value*100)/$total;
$down_per=($down_value*100)/$total;
?>
<div style="margin-bottom:10px">
<b>Ratings for this blog</b> ( <?php echo $total; ?> total)
</div>
<table width="700px">

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $up_value; ?></td>
<td width="600px"><div id="greebar" style="width:<?php echo $up_per; ?>%"></div></td>
</tr>

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $down_value; ?></td>
<td width="600px"><div id="redbar" style="width:<?php echo $down_per; ?>%"></div></td>
</tr>

</table>

<?php

}
?> 
```

这以joomla风格制作的根本不起作用

```
<?php
defined( '_JEXEC' ) or die;
?>
<?php
if(JRequest::getVar('id'))
{

$id = JRequest::getInt('id');
$name = JRequest::getInt('name');

$db = JFactory::getDbo();

$query = $db->getQuery(true);
$query2 = $db->getQuery(true);
$queryup = $db->getQuery(true);
$querydown = $db->getQuery(true);

$query->update('messages');
$query->set("message = 1");
$query->where("id = $id");

$query2->select('up,down');
$query2->from('messages');
$query2->where("id = $id");

$queryup->select('up');
$queryup->from('messages');
$queryup->where("id = $id");

$querydown->select('down');
$querydown->from('messages');
$querydown->where("id = $id");

$db->setQuery( $query );
$db->query();
$db->setQuery( $query2 );
$db->query();

$db->setQuery( $queryup );
$data0 = $db->query();
$db->setQuery( $querydown );
$data1 = $db->query();

$up_value= $db->insertid($data0);;
$down_value = $db->insertid($data1);

$total=$up_value+$down_value;

$up_per=($up_value*100)/$total;
$down_per=($down_value*100)/$total;

?>

<table width="700px">

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $up_value; ?></td>
<td width="600px"><div id="greebar" style="width:<?php echo $up_per; ?>%"></div></td>
</tr>

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $down_value; ?></td>
<td width="600px"><div id="redbar" style="width:<?php echo $down_per; ?>%"></div></td>
</tr>

</table>
<?php
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:19:24.617

试试这个 $query->where('id = ' . $db->qn($id));

ETC

# wordpress - 带有特定模板的 Wordpress 查询页面

> ID：12086998
> 
> 赞同：10
> 
> 时间：2012-08-23T07:47:23.307
> 
> 标签：wordpress

有没有办法查询具有特定模板的 Wordpress 页面？这是我得到的，但没有显示任何内容：

```
<?php $my_query = new WP_Query(array( 'meta_key' => '_wp_page_template', 'meta_value' => 'template-city.php' )); ?>
                <?php while ($my_query->have_posts()) : $my_query->the_post(); ?>
                    <li>
                    <?php the_title(); ?>
                    </li>
                <?php endwhile; ?> 
```

当然，还有名为的页面模板文件`template-city.php`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T11:40:12.797

如果`post_type`被遗漏了，WP 将寻找帖子，而您正在寻找页面。

```
<?php
    $args = array(
        'post_type' => 'page',//it is a Page right?
        'post_status' => 'publish',
        'meta_query' => array(
            array(
                'key' => '_wp_page_template',
                'value' => 'template-city.php', // template name as stored in the dB
            )
        )
    );
$my_query = new WP_Query($args)
?> 
```

# ajax - 通过 Ajax 调用通过 Web 方法从 C# 下载文件？

> ID：12086999
> 
> 赞同：6
> 
> 时间：2012-08-23T07:47:24.700
> 
> 标签：ajax, webmethod

我试图通过 web 方法从服务器下载文件，但它对我不起作用。我的代码如下

```
 [System.Web.Services.WebMethod()]
public static string GetServerDateTime(string msg)
{
    String result = "Result : " + DateTime.Now.ToString() + " - From Server";
    System.IO.FileInfo file = new System.IO.FileInfo(System.Web.HttpContext.Current.Server.MapPath(System.Configuration.ConfigurationManager.AppSettings["FolderPath"].ToString()) + "\\" + "Default.aspx");
    System.Web.HttpResponse Response = System.Web.HttpContext.Current.Response;
    Response.ClearContent();
    Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);
    Response.AddHeader("Content-Length", file.Length.ToString());
    Response.ContentType = "application/octet-stream";
    Response.WriteFile(file.FullName);
    //HttpContext.Current.ApplicationInstance.CompleteRequest();
    Response.Flush();
    Response.End();
    return result;        
} 
```

我的ajax调用代码如下

```
 <script type="text/javascript">
    function GetDateTime() {
                    var params = "{'msg':'From Client'}";
                    $.ajax
                      ({
                          type: "POST",
                          url: "Default.aspx/GetServerDateTime",
                          data: params,
                          contentType: "application/json;charset=utf-8",
                          dataType: "json",
                          success: function (result) {
                              alert(result.d);
                          },
                          error: function (err) {

                          }
                      });
    }
</script> 
```

我已经在按钮点击中调用了这个函数..

我不知道如何用其他方法下载文件

如果有其他方法可用，请建议我或在同一代码中进行更正。

谢谢大家..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T07:54:21.657

WebMethod 无法控制当前的响应流，因此不可能这样做。在您从 javascript 调用 Web 方法时，响应流已经传送到客户端，您对此无能为力。

执行此操作的一个选项是 WebMethod 将文件作为物理文件生成在服务器上的某个位置，然后将生成文件的 url 返回给调用 javascript，然后调用 javascript`window.open(...)`来打开它。
除了生成物理文件之外，您还可以调用一些 GenerateFile.aspx，它执行您最初在 WebMethod 中尝试的操作，但在 中执行它`Page_Load`，并 `window.open('GenerateFile.aspx?msg=From Clent')`从 javascript 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T10:09:19.880

与其调用 Web 方法，不如使用通用处理程序（.ashx 文件）并将用于下载文件的代码放在处理程序的 ProcessRequest 方法中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T15:35:54.590

这是 Ajax 调用

```
 $(".Download").bind("click", function () 
             {
                var CommentId = $(this).attr("data-id");
                $.ajax({
                   type: "POST",
                   contentType: "application/json; charset=utf-8",
                   url: "TaskComment.aspx/DownloadDoc",
                   data: "{'id':'" + CommentId + "'}",
                   success: function (data) {

                   },
                   complete: function () {

                }
            });
        }); 
```

C#背后的代码

```
 [System.Web.Services.WebMethod]
   public static string DownloadDoc(string id)
   {
       string jsonStringList = "";
       try
       {
        int CommentId = Convert.ToInt32(id);
        TaskManagemtEntities contextDB = new TaskManagementEntities();
        var FileDetail = contextDB.tblFile.Where(x => x.CommentId == CommentId).FirstOrDefault();
        string fileName = FileDetail.FileName;
        System.IO.FileStream fs = null;
        string path = HostingEnvironment.ApplicationPhysicalPath + "/PostFiles/" + fileName;
        fs = System.IO.File.Open(path + fileName, System.IO.FileMode.Open);
        byte[] btFile = new byte[fs.Length];
        fs.Read(btFile, 0, Convert.ToInt32(fs.Length));
        fs.Close();
        HttpContext.Current.Response.AddHeader("Content-disposition", "attachment; filename=" + fileName);
        HttpContext.Current.Response.ContentType = "application/octet-stream";
        HttpContext.Current.Response.BinaryWrite(btFile);
        HttpContext.Current.Response.End();
        fs = null;
        //jsonStringList = new JavaScriptSerializer().Serialize(PendingTasks);
    }
    catch (Exception ex)
    {

    }
    return jsonStringList;
} 
```