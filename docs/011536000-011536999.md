# StackOverflow 问答 11536000-11536999

# html - Phonegap 应用程序/HTML

> ID：11536000
> 
> 赞同：1
> 
> 时间：2012-07-18T07:08:03.380
> 
> 标签：html, web-applications, cordova

我有一个 HTML 应用程序，而不是本机应用程序。它就像一个网站，我用我的移动设备访问一个网址，就像一个网站。并且地理定位不起作用。这是一个Phonegap应用程序。我有：index.html、cordova-1.9.0.js 和两个包含函数的 .js。

我在Google的Phonegap群发了我没有获取坐标的问题，Simon Mac Donald回复我说我做错了，但是他很忙，告诉我他稍后会回复我...

现在，我访问[了我的帖子](https://groups.google.com/forum/?hl=es&fromgroups#!topic/phonegap/ma5jlBmp2vg)，但没有更新。谁能给我解释一下？非常感谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:20:13.677

PhoneGap 适用于原生应用。您使用 HTML、Javascript 和 CSS 编写代码，添加指向 cordova/phonegap.js 文件的链接，***然后将其编译***到支持的平台之一（iOS、Android、Winphone 等）。最终结果是一个原生应用程序。

您不能在 Web 应用程序中使用 PhoneGap 或其任何功能。

现在，位置服务*可以*在 Web 应用程序中使用，因为它是由所有现代浏览器提供的。您需要的对象是`window.navigator.geolocation`. 这是如何使用它的示例（`watchPosition()`根据您的评论使用）。捕获`error`可以帮助您找出为什么它不适合您。

**演示（代码）：http:** [//jsfiddle.net/ThinkingStiff/UZwdv/](http://jsfiddle.net/ThinkingStiff/UZwdv/)

**演示（在您的手机上打开）：http:** [//jsfiddle.net/ThinkingStiff/UZwdv/show/](http://jsfiddle.net/ThinkingStiff/UZwdv/show/)

### 脚本

```
var location = document.getElementById( 'location' );

var geo = window.navigator.geolocation.watchPosition( function ( position ) {
        location.textContent = position.coords.latitude  + ', ' + position.coords.longitude;
    },
    function ( error ) {
        location.textContent = error.message;
    }
);

//later if you want to cancel it
window.navigator.geolocation.clearWatch( geo ); 
```

### HTML

```
<div id="location"></div>​ 
```

# javascript - Asp .net treeview ，从 javascript 中获取值

> ID：11536001
> 
> 赞同：0
> 
> 时间：2012-07-18T07:08:04.617
> 
> 标签：javascript, asp.net, javascript-events

我有一个`ascx control`带有**ASP.NET**树视图的内部。我正在尝试`ascx control`使用以下方法从同一页面中的另一个获取值。

```
 var treeViewData = window["<%=TreeView1.ClientID%>" + "_Data"];
        if (treeViewData.selectedNodeID.value != "") {
            var selectedNode = document.getElementById(treeViewData.selectedNodeID.value);
            var value = selectedNode.href.substring(selectedNode.href.indexOf(",") + 3, selectedNode.href.length - 2);
            var text = selectedNode.innerHTML;
            alert("Text: " + text + "\r\n" + "Value: " + value);
        } else {
            alert("No node selected.")
        } 
```

但它找不到 TreeView1，因为它是一个不同的 ascx 控件。任何想法如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:58:26.673

在您的第一个用户控件中创建一个 JavaScript 变量并放入

```
var treeViewID = "<%=TreeView1.ClientID%>"; 
```

然后在你的第二个用户控件中使用这个 JavaScript 变量来获取元素（JS 变量是全局的）

```
var treeView = window[treeViewID + "_Data"] ; 
```

注意：为此，您的第一个控件应在第二个控件之前呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:00:15.973

您可以在 ascx 页面中添加一个全局 js 变量，该变量将由 ascx 在选择节点后使用树视图设置，并在另一个 ascx 中获取此值。他们的 js 代码一起运行，但不是他们的 aspx 和 cs 代码。

# java - 将不同的 javadoc zip 文件组合成单个 javadoc zip 文件

> ID：11536006
> 
> 赞同：1
> 
> 时间：2012-07-18T07:08:38.830
> 
> 标签：java, javadoc

对于我们使用的不同的 3rd 方 jar，我们有不同的 Javadoc 文件。我们必须将所有这些组合成一个 Javadoc 文件，以便与我们的产品一起分发。

有可能这样做吗？有没有可用的工具？

至少有什么工具可以让我输入与一个 jar 相关的 .class 文件和该 jar 的 javadoc，它还会生成带有文档的 .java（源代码）文件，这样我就可以组合这些源并为所有文件生成 javadoc单次拍摄图书馆？

任何指针都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T17:29:07.933

我也想做同样的事情，这个问题鼓励我走得更远。

我找到了一个适合我的解决方案：

1.  反编译所有类文件以获得可**编译**的源文件。有几个可用的反编译器（参见[这个问题](https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files)）。我首先尝试了 Java Decompiler，但它产生了太多的语法错误。然后我在 Procyon 中做到了，它只在猜测的参数名称中产生了 2 个错误（大约 5000 个类）：

    ```
    java -jar procyon-decompiler-0.5.26.jar -o src [jarfile.jar] 
    ```

2.  为那些反编译的类生成 javadoc：

    ```
    javadoc -sourcepath src -d javadoc -subpackages com 
    ```

    这实质上会产生垃圾文档，因为您的源文件中没有 javadoc。但是索引文件是正确的！

3.  将包 javadoc 文件夹替换为可用 javadoc 中的相应文件夹。对我来说，这意味着`com`文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:35:12.773

我认为最好的办法是下载所有三个库的源代码，将所有源代码放入一个 IDE 项目（NetBeans、Eclipse ...）中，然后从那里生成文档。反编译 .class 文件，然后将它们与 java 文档结合起来似乎是个坏主意。由于 javadocs 是从源代码生成的，因此结合所有三个项目应该是最简单的。也就是说，这可能是一项相当大的工作。

另一种选择是从两个库中取出相关位（文件夹）并将它们复制到第三个库的根目录中（首先解压缩 javadocs jar）。例如 Java 6 SE 这些文件夹将是`java`,`javax`和`org`. 这些包含实际的文档文件，其余的只是链接和框架以及其他 html 管道。从那里您可以创建一个脚本，通过其他两个库的类层次结构并将它们添加到第三个库的 html 管道中。不过，这将比仅从合并的源重新生成文档要多得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:14:16.790

您可以通过将它们全部解压缩到同一目录并再次打包它们来组合它们。

您可以获得将 .class 转换为 .java 文件的反编译器，但我不知道任何可以结合 javadocs 的反编译器。如果它对您很重要，您可能必须手动执行此操作。

我会认为未经第三方图书馆许可分发源代码是*一个坏主意*。

# android - 在用户模式下构建 android 源代码

> ID：11536012
> 
> 赞同：0
> 
> 时间：2012-07-18T07:09:14.383
> 
> 标签：android

我想在用户模式下构建 android sdk。任何人都可以指导我。请告诉我实现这一目标的步骤。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:17:22.977

构建 Android 源代码是一项复杂的任务。您必须首先为此初始化构建环境。在为您的要求选择一个分支之后。

我建议你专门在 Linux 机器上构建 android 源代码**ubuntu 10.04**。作为 Android 平台的官方支持。

*注意：源下载大小约为 6GB。您将需要 25GB 的免费空间来完成单个构建，并需要高达 90GB（或更多）的空间来完成完整的构建。*

您可以找到有关此[Initializing a Build Environment 的进一步说明](http://source.android.com/source/initializing.html)

**更新：**

另请参阅[如何编译 ICS (Ubuntu)](http://www.freeyourandroid.com/guide/compile-ics)以及[如何从源代码编译 Android](http://www.xda-developers.com/android/how-to-compile-android-from-source-code-xda-tv/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+xda-developers%2FShsH+%28xda-developers%29&utm_content=Google+International)

在用户模式下开发一个sdk，使用这个命令

```
$ lunch full-user 
```

访问受限；适合生产

**还有其他目标（开发模式）**

```
$ lunch full-userdebug 
```

像“用户”，但具有 root 访问权限和可调试性；调试首选

```
$ lunch full-eng 
```

带有附加调试工具的开发配置

# google-maps-api-3 - 谷歌融合表查询

> ID：11536015
> 
> 赞同：0
> 
> 时间：2012-07-18T07:09:19.893
> 
> 标签：google-maps-api-3, google-fusion-tables

以下 javascript 代码不起作用，它对 google fusion 表有查询。

```
$('#map_canvas').gmap({ 'center': new google.maps.LatLng(37.447038,-122.160575), 'zoom': 11, 'mapTypeId' :  google.maps.MapTypeId.ROADMAP, 'callback': function(map) {

$('#map_canvas').gmap('loadFusion', { 'query': { 

    'from': '297050' ,
    'orderBy': ST_DISTANCE('Address', LATLNG(37.447038,-122.160575)),
    'limit':10 } });

var t = setTimeout(function() {$('#dialog').dialog('close');}, 2000);                       
                }
}); 
```

如果我删除具有 orderby 子句的查询行（如下所示），它可以正常工作

```
$('#map_canvas').gmap({ 'center': new google.maps.LatLng(37.447038,-122.160575), 'zoom': 11, 'mapTypeId' :  google.maps.MapTypeId.ROADMAP, 'callback': function(map) {

$('#map_canvas').gmap('loadFusion', { 'query': { 

    'from': '297050' ,

    'limit':10 } });

var t = setTimeout(function() {$('#dialog').dialog('close');}, 2000);                       
                }
}); 
```

请建议热修复此查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:53:34.230

“orderBy”属性似乎作为一个字符串工作。代替：

```
'from': '297050' ,
'orderBy': ST_DISTANCE('Address', LATLNG(37.447038,-122.160575)),
'limit':10 } }); 
```

尝试（注意 orderBy 属性周围的双引号 (")：

```
 query: {
        select: 'Address',
        from: 297050,
        orderBy: "ST_DISTANCE('Address', LATLNG(37.447038,-122.160575))",
        limit:5
      }, 
```

[工作示例](http://www.geocodezip.com/v3_GoogleEx_orderByQuery.html)

# c# - C# 中的工厂、构造函数和泛型

> ID：11536017
> 
> 赞同：2
> 
> 时间：2012-07-18T07:09:31.233
> 
> 标签：c#, generics, constructor

假设我有一个类似这样的工厂：

```
public static class BusinessObjectFactory
{
   public static T Create<T>(int objectId) where T : BusinessObject, new()
    {
        var dataSource = DataLayer.DataSources.Repository.Get<T>();
        var serializer = DataLayer.Serializers.Repository.Get<T>();

        var businessObject = new T {ObjectId = objectId, DataSource = dataSource, Serializer = serializer};

        return businessObject;
    }
} 
```

如果我有 ObjectId、DataSource 和 Serializer 的公共访问器，则此方法有效。

我宁愿在我的类型 T 构造函数中指定这些参数，因为知道 T 被约束为 BusinessObject 并且 BusinessObject 具有这种构造函数。

我知道我可以用这样的方式替换对 new T 的调用：

```
var businessObject = (T) Activator.CreateInstance(typeof (T), objectId, dataSource, serializer); 
```

但是我的 T 构造函数必须是无参数的，技术原因是什么？我觉得我对泛型有些不理解。我已经看到几个与该主题相关的问题，但没有真正启发我的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:16:39.310

泛型是*编译时*工件。这意味着在*编译时*会有新生成的合适的类。

在*编译时*，无法识别 ctor 的参数（如果它不是常量）。

这就是为什么你必须有一个“空”的 ctor，CLR 才能构造你的类型的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:16:46.290

只有一个`new()`约束，指定有一个无参数的构造函数。无法指定该类型需要`T(ObjectId, DataSource, Serializer)`构造函数。不在泛型约束中，也不在接口或基类中。

# php - PHP 将 JS 脚本写入我的 html 源文档

> ID：11536018
> 
> 赞同：0
> 
> 时间：2012-07-18T07:09:39.820
> 
> 标签：php, javascript

我正在尝试使用 PHP 将 JS 脚本写入我的 html 源文档。我已经调查了许多其他论坛，但仍然无法完全确定错误..

我试图嵌入的 JS 脚本遵循默认 YUI 图表库脚本中的语法。

假设我的 php 字符串输出（从***echo: $data->dump_yui($row_numbers=false, $col_letters=false, $sheet=0, $table_class='excel');***生成）适合参数 r'qd YUI 脚本语法，在我的 html 文档中嵌入脚本时哪里出错了？

PHP 在 HTML 中写入 JavaScript：

```
<?php 
echo "<script language=javascript>";
echo 'document.write("YUI().use('charts',function(Y){var myDataValues = [';
echo $data->dump_yui($row_numbers=false, $col_letters=false, $sheet=0, $table_class='excel');
echo "<br>];<br><br>var styleDef = {series:<br>{Stock:{line:{color:'#898DD5'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},<br>Liability:{line:{color:'#171944'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},<br>Shipment:{line:{color:'#ff0000',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#ff0000',alpha:0,wmode:'transparent'},over:{fill:{color:'#ff0000',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},<br>Production:{line:{color:'#FFD700',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#FFD700',alpha:0,wmode:'transparent'},over:{fill:{color:'#FFD700',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},<br>Order:{line:{color:'#006400',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#006400',alpha:0,wmode:'transparent'},over:{fill:{color:'#006400',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}}}};<br>var myAxes={dateRange:{keys:['date'],position:'bottom',type:'category',title:'Date Range',styles:{majorTicks:{display:'none'},label:{rotation:-45,margin:{top:5}},title:{fontSize:'90%'}}}};var mychart=new Y.Chart({dataProvider:myDataValues,interactionType:'planar',render:'#mychart',categoryKey:'Date',styles:styleDef,categoryType:'time',horizontalGridlines:{styles:{line:{color:'#fff'}}},verticalGridlines:{styles:{line:{color:'#fff'}}}});<br>});";
echo '");';
echo "</script>";
?> 
```

（我也尝试过执行不包含“document.write”的脚本）

我对 PHP 相当陌生.. 有什么想法吗？

***_* __ 更新（12 年 7 月 18 日）：感谢您的反馈 - 我尝试了所有修复程序，但图表仍未呈现，代码：**

```
<?php 
echo "<script type='text/javascript'>";
echo 'document.write("YUI().use(\'charts\',function(Y){var myDataValues = [';
echo $data->dump_yui($row_numbers=false, $col_letters=false, $sheet=0, $table_class='excel');
echo "\n];\n\nvar styleDef = {series:\n{Stock:{line:{color:'#898DD5'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},<br>Liability:{line:{color:'#171944'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},<br>Shipment:{line:{color:'#ff0000',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#ff0000',alpha:0,wmode:'transparent'},over:{fill:{color:'#ff0000',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},<br>Production:{line:{color:'#FFD700',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#FFD700',alpha:0,wmode:'transparent'},over:{fill:{color:'#FFD700',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},<br>Order:{line:{color:'#006400',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#006400',alpha:0,wmode:'transparent'},over:{fill:{color:'#006400',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}}}};<br>var myAxes={dateRange:{keys:['date'],position:'bottom',type:'category',title:'Date Range',styles:{majorTicks:{display:'none'},label:{rotation:-45,margin:{top:5}},title:{fontSize:'90%'}}}};var mychart=new Y.Chart({dataProvider:myDataValues,interactionType:'planar',render:'#mychart',categoryKey:'Date',styles:styleDef,categoryType:'time',horizontalGridlines:{styles:{line:{color:'#fff'}}},verticalGridlines:{styles:{line:{color:'#fff'}}}});<br>});";
echo '");';
echo "</script>";
?> 
```

** **_** 更新（12 年 7 月 20 日）：

感谢大家的额外反馈。我将一个页面推送到我的服务器，其中包含三个代码片段（以某种有组织的方式）。

* * *

*   [http://demo.opendataregistry.com/dashboard/Jacobs_PHP_thanks_for_taking_a_look.html](http://demo.opendataregistry.com/dashboard/Jacobs_PHP_thanks_for_taking_a_look.html)

* * *

......仍然无法解决这个错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:11:50.137

这里：

```
echo 'document.write("YUI().use('charts',function(Y){var myDataValues = ['; 
```

这是“图表”撇号的问题。应该是，例如：

```
echo 'document.write("YUI().use("charts",function(Y){var myDataValues = ['; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:13:47.673

除了其他人提到的之外，您的 JavaScript 代码中还有一大堆`<br>`元素，这是无效的。你将不得不摆脱那些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:14:16.307

不要忘记转义单引号：

`echo 'document.write("YUI().use(\'charts\',function(Y){var myDataValues = [';`

并替换`<br />`为`\n`.

```
echo "\n];\n\nvar styleDef = {series:\n{Stock:{line:{color:'#898DD5'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},<br>Liability:{line:{color:'#171944'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},<br>Shipment:{line:{color:'#ff0000',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#ff0000',alpha:0,wmode:'transparent'},over:{fill:{color:'#ff0000',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},<br>Production:{line:{color:'#FFD700',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#FFD700',alpha:0,wmode:'transparent'},over:{fill:{color:'#FFD700',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},<br>Order:{line:{color:'#006400',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#006400',alpha:0,wmode:'transparent'},over:{fill:{color:'#006400',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}}}};<br>var myAxes={dateRange:{keys:['date'],position:'bottom',type:'category',title:'Date Range',styles:{majorTicks:{display:'none'},label:{rotation:-45,margin:{top:5}},title:{fontSize:'90%'}}}};var mychart=new Y.Chart({dataProvider:myDataValues,interactionType:'planar',render:'#mychart',categoryKey:'Date',styles:styleDef,categoryType:'time',horizontalGridlines:{styles:{line:{color:'#fff'}}},verticalGridlines:{styles:{line:{color:'#fff'}}}});<br>});"; 
```

# visual-studio-2010 - LINQ to Entities 不支持指定的类型成员“”。

> ID：11536020
> 
> 赞同：0
> 
> 时间：2012-07-18T07:09:49.023
> 
> 标签：visual-studio-2010, linq, entity-framework

我在使用 LINQ 时遇到问题

```
var operations = (from c in dCAPPEntities.CIC_OPERAZIONI
                                where c.CD_CIC_PRODUZIONE == 15835 && !(from s in dCAPPEntities.CIC_SEQUENCE where s.CD_CIC_PRODUZIONE==15835 select s.CD_CIC_OPERAZIONE).Contains(c.CD_CIC_OPERAZIONI) select new { c }).GroupBy(i=>i.c.CD_CIC_OPERAZIONI, i=> new Alternative1{ State=0, Iden=i.c.Iden}); 
```

当我执行此查询时，我收到以下错误：LINQ to Entities 中不支持指定的类型成员“Iden”。仅支持初始化程序、实体成员和实体导航属性。

如果我在查询中写 Iden="" 它可以工作，所以我不知道为什么会出现错误。

我还添加了我使用的一些类的代码：

```
public interface IAlternative
{
    string Iden { get; }

    int State { get; set; }

} 
```

扩展表的部分类

```
 public partial class CIC_OPERAZIONI : IAlternative
{
public string Iden
    {
        get
        {
            return AFCDOPER + "\r" + AFDSOPER;
        }
    }

    private int _state = 0;
    public int State
    {
        get { return _state; }
        set
        {
            _state = value;
        }
    }
} 
```

我认为最后一节课有助于理解这个问题

```
public class Alternative1 : INotifyPropertyChanged, IAlternative
{
    public event PropertyChangedEventHandler PropertyChanged;

    #region IAlternative Members

    public string Iden { get; set; }

    public int State { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:43:26.827

`c`是一个`CIC_OPERAZIONI`。`CIC_OPERAZIONI.Iden`不是实体成员或导航属性，它是一个计算属性，其值取决于其他属性。EF 不支持这一点：您的查询实际上并没有最终创建`CIC_OPERAZIONI`对象，因此无法`CIC_OPERAZIONI`调用成员函数或属性。根据其他属性的定义，如果您将其展开内联，它可能会或可能不会起作用：

```
[...].GroupBy(
    i=> i.c.CD_CIC_OPERAZIONI,
    i=> new Alternative1
        {
            State = 0,
            Iden = i.c.AFCDOPER + "\r" + i.c.AFDSOPER
        }) 
```

如果它不起作用，可能是因为`AFCDOPER`或`AFDSOPER`不是实体成员，您需要对其他属性执行相同操作。

# basic-authentication - websphere 7 上的基本身份验证

> ID：11536024
> 
> 赞同：0
> 
> 时间：2012-07-18T07:10:07.020
> 
> 标签：basic-authentication, websphere-7

我正在为我的简单 web 应用程序使用基于 websphere 7 文件的基本安全性。我的应用程序包含两个屏幕 1.Add Partner 2.List Partner。为此，我创建了两个角色 1.AddPartner 2.ListPartner。我用不同的用户名和密码映射了这两个角色。当用户单击 AddPartner 链接时，它应该要求提供凭据，就像 ListPartner 链接一样。下面是我的 web.xml 条目（我正在使用 strut2 约定）

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>servicepartner</web-resource-name>
        <url-pattern>/add-partner</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>AddPartner</role-name>
    </auth-constraint>
</security-constraint>

<security-constraint>
    <web-resource-collection>
    <web-resource-name>servicepartner</web-resource-name>
     <url-pattern>/list-partner</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>ListPartner</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>BASIC</auth-method>
</login-config>
<security-role>
    <role-name>AddPartner</role-name>
</security-role>
<security-role>
    <role-name>ListPartner</role-name>
</security-role> 
```

但它适用于 AddPartner 但是当我单击 ListPartner 链接应用程序抛出 403 禁止错误，因为它检查 aganist AddPartner 凭据。我的服务器控制台出现以下错误。

```
Authorization failed for user commonuser:defaultWIMFileBasedRealm while invoking GET on default_host:/serviceapp/list-partner, Authorization failed, Not granted any of the required roles: ListPartner 
```

是否可以在单个应用程序中检查不同的凭据。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T08:21:08.817

必须完成这些步骤才能在 Web 模块中使用应用程序安全性：
1\. 您必须在 WAS 中启用“应用程序安全性”
2\. 您的应用程序 (web.xml) 必须定义角色、日志记录方法和资源限制。还请`<realm-name>defaultWIMFileBasedRealm</realm-name>`在您的`<login-config>`标签之间指定领域名称，例如。
3\. 角色必须映射到主题（用户、组或特殊主题，例如所有经过身份验证的用户到“某些”领域。这可以在我猜 application.xml 中的 Rational Application Developer 中完成（物理写入 ibm-application- bnd.xmi) 或指定的部署时间
![在此处输入图像描述](../Images/43e80b06cb45fba2892f57b5403e77fd.png)

# c++ - 使用智能指针释放内存

> ID：11536028
> 
> 赞同：1
> 
> 时间：2012-07-18T07:10:40.020
> 
> 标签：c++

在 C++ 中，假设 Helper 类中有一个方法，它返回一个指向另一个对象的指针。除了方法签名和返回对象的类型外，我没有关于此方法的更多信息。在这种情况下如何进行内存管理？

我试图在下面使用智能指针作为这个函数：

```
void f() {
   auto_ptr<SomeClass> p_someClass = p_Helper->getSomeclass();
   p_someClass->doSomething();
} 
```

一旦 f() 超出范围，分配给 p_someClass 的内存就会被释放。但是，如果 getSomeclass() 不分配新内存而只是返回一个“单例”指针（并且 p_Helper 也是单例）怎么办？那么下一次调用 p_Helper->getSomeclass() 就会遇到麻烦。

处理这个问题的常用方法是什么，尤其是当 Helper 类的文档很少时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:30:07.137

助手类的文档说什么？那是终极问题。你不能在不指定其生命周期的情况下返回指针或引用：如果它是指向类内部某些东西的指针，它可能是类对象的生命周期，但它也可能具有静态生命周期（直到程序结束——这是将字符串文字返回为 ) 的函数的情况`char const*`，它可能有一些较短的生命周期（例如 `operator[]`由标准库容器返回的引用），或者助手可能希望您删除它。然而，后者在纯 C++ 中应该很少见。在这种情况下，惯例是返回`std::auto_ptr`（或 `std::unique_ptr`如果你有一个非常现代的编译器）。（在 C 中，经常记录必须通过调用返回它的库中的特定函数来释放返回的指针。如果没有析构函数，您必须在最后做一些事情来重新获得控制权。）

在没有文档的情况下，我很想说这个库不可用。仍然......假设它指向内部的东西并且具有类的生命周期可能是最合理的猜测；这是程序员最容易忘记记录的情况。删除它，或者把它放在一个将删除它的智能指针中，可能不是一个好主意：关于所有权问题已经说得够多了，如果你应该删除它，类作者似乎不太可能无法记录这一事实. （但是请注意，即使您不应该删除它，生命周期问题仍然存在。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:13:04.417

如果你不是 p_Helper 类的作者，首先：

单例通常没有公共析构函数，因此在这种情况下不会编译。

其次，如果您“只是得到”一个没有任何进一步信息的裸指针，则无法知道是否可以删除它。**该信息需要在文档中提供，**以便您使用该函数/方法。

如果您正在*设计*p_Helper，则让它*返回*智能指针，而不是裸指针。如果该方法为每个调用创建一个新资源，我建议`unique_ptr`，看看这里：[unique_ptr 和 shared_ptr 之间的差异](https://stackoverflow.com/questions/6876751/differences-between-unique-ptr-and-shared-ptr)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:13:27.150

这种情况的典型方法是使用引用计数，这样的智能指针`shared_ptr`通常会处理所有合理的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T07:14:32.980

在这种情况下，您可以使用原始指针。

```
void f() {
   SomeClass *p_someClass = p_Helper->getSomeclass();
   p_someClass->doSomething();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T07:39:34.410

您可以进行快速测试并比较两次调用 p_Helper->getSomeclass(); 所返回的指针；

```
bool do_not_delete =  p_Helper->getSomeclass() ==  p_Helper->getSomeclass(); 
```

如果两个指针相等，您很可能会得到一个指针，该指针是一个（可能是可选的）引用。

hth 托斯滕

# perl - SIGINT 时优雅地关闭 ssh 并退出 net::ssh::perl

> ID：11536031
> 
> 赞同：5
> 
> 时间：2012-07-18T07:10:43.090
> 
> 标签：perl, ssh, event-handling, signals

我正在连接到远程主机并执行不退出的命令（tail -f logfile）

我正在注册一个处理程序并将输出写入日志文件。这工作正常但我想在主程序上按 Control+C，它应该停止远程机器上的命令并优雅地关闭 ssh 连接

所以我正在为 SIGINT 注册一个信号处理程序

需要我需要放入子程序的代码

下面的代码在一个从分叉子调用的函数中

```
#!/ats/bin/perl

use Net::SSH::Perl;
use File::Path;
use Text::CSV_XS;

chomp ($progName = `basename $0`);

if (@ARGV != 1 ) {
        print "usage: perl $progName <tc_id>\n";
        exit;
}

$tc_id = shift;
$file = "config.prop";
$log_dir = "logs/";

#$SIG{INT}=\&close_write;

sub close_write
{
#-- write it to file
print "\nInside END block\n";
#open FH, ">$log_file";
#print $log_file;
#print FH @out;
#$thr->kill('INT');
#close $ssh->sock;
#undef $ssh;
exit 1;
}

# Read the configuration file and populate the Hash
$index = 0;
my $csv = Text::CSV_XS->new ({ binary => 1, eol => $/ });
 open my $io, "<", $file or die "$file: $!";
 while (my $row = $csv->getline ($io)) {
    next if (${$row}[0] =~ m/^#/);  #Ignore comments
    next if (${$row}[0] =~ m/^\s*$/);   #Ignore blank lines
    ($logHashArray->[$index]->{host}, $logHashArray->[$index]->{user}, $logHashArray->[$index]->{pass}, $logHashArray->[$index]->{cmd}, $logHashArray->[$index]->{log_file}) = @$row;
    $index++;
 }

# Append "/" at the end of the directory if it does not exist
unless ($log_dir =~ m/\/$/) {
        $log_dir = $log_dir . "/";
        print "LogDir: $log_dir\n";
        }
# Check if the log directory exists, if not, create it
if (-e $log_dir) {
        unless (-d $log_dir) {
                die "File exists but is not directory";
                }
        }
else {
        # don't forget to check mkdir's failure
        print "Directory $log_dir does not exist... Creating it\n";
        mkpath($log_dir, 0777) or die "Can't make directory: $!";
        }

foreach $logHash (@{$logHashArray}){
        #print "LogHash Index $logHash\n";
        $logHash->{log_file} = $tc_id . "_" . $logHash->{host} . "_" .$logHash->{log_file};
        $logHash->{cmd} = $logHash->{cmd} . " | tee /tmp/" . $logHash->{log_file};
        $logHash->{log_dir} = $log_dir;

        #$logHash->{thr}=threads->new(\&connect_get_logs, $logHash);

        $logHash->{pid} = fork();

        if ($logHash->{pid}){
            # Parent
            push(@childs, $logHash->{pid});
        }
        elsif ($pid == 0){
            # Child
            connect_get_logs($logHash);
        }
        else {
            die "couldn’t fork: $!\n";
            }

while (($key, $value) = each(%{$logHash})){
     print $key."=>".$value."\n";
}

}

#$SIG{INT}=\&close_write;
#$thr=threads->new(\&connect_get_logs, $logHash);

foreach (@childs) {
    waitpid($_, 0);
    }

#print "Waiting...";
#while(1) {sleep 1;}

#$thr->join;

sub connect_get_logs{

$SIG{INT}= sub {
        print "Inside INT block\n"; ### Need proper code here
        close $ssh->sock;
        undef $ssh;
        };

my $logHash = shift;

while (($key, $value) = each(%{$logHash})){
     print $key."=>".$value."\n";
}
my $stdout;
my $stderr;
my $exit;

#-- setup a new connection
print "Logging in to $logHash->{host}...";
my $ssh = Net::SSH::Perl->new($logHash->{host}, debug => 0, protocol => '2', options => ["PasswordAuthentication yes", "BatchMode yes",
                    "PubkeyAuthenticaion no", "RhostsAuthentication no", "RhostsRSAAuthentication no", "RSAAuthentication no", "DSAAuthentication no"]);

#-- authenticate
$ssh->login($logHash->{user}, $logHash->{pass});
print "Logged In\n";

#-- Create or Overwrite the log files
open LOG_FILE, ">", "$logHash->{log_dir}$logHash->{log_file}" or die $!;

#-- register a handler
$ssh->register_handler("stdout", sub {
        my($channel, $buffer) = @_;
        $str = $buffer->bytes;
        #push @out, $str;
        print LOG_FILE $str;
        #print $str;
});

#$SIG{INT}=\&close_write;

#-- execute the command
($stdout, $stderr, $exit) = $ssh->cmd($logHash->{cmd});

print "Error: $stderr";

} 
```

创建 csv 格式的 config.prop 文件

主机/IP，用户名，密码，命令（tail -F /full/path/to/logfile），文件名另存为

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:36:43.260

`-t`诀窍是使用（或可能）调用 ssh `-tt`。

默认情况下，ssh 仅在远程机器上为交互式登录 shell 分配一个 pty（即，不在远程调用命令时）。 `-t`强制 ssh 分配一个 pty，即使在执行远程命令时也是如此。可以看到效果：

```
$ ssh starquake tty
not a tty 
```

对比

```
$ ssh -t starquake tty
/dev/pts/1
Connection to starquake closed. 
```

当连接到终端时， ssh[显然会将信号传递给远程进程](https://stackoverflow.com/questions/3235180/starting-a-process-over-ssh-using-bash-and-then-killing-it-on-sigint)，否则不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T07:51:07.733

在这里，您可以看到使用 SFTP 而不是 SSH 连续读取远程文件的替代解决方案：[sftp_tail.pl](https://metacpan.org/source/SALVA/Net-SFTP-Foreign-1.77/samples/sftp_tail.pl)。

远程`sftp-server`进程将在连接关闭时退出（例如，因为您按 Ctrl-C），而无需您采取任何进一步的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T14:58:03.933

$ssh->登录（）；#登录ssh会话

$ssh->关闭；#从 ssh 会话中注销

请享用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:31:05.880

如果您知道对 的调用的进程 ID，则可以从命令行`tail -f`向其发送信号：`INT`

```
kill -s INT <pid> 
```

你需要在`$SIG{'INT'}`你的主程序中做的是让它也`INT`通过`Net::SSH`连接发送一个。不幸的是，我不知道该怎么做。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-30T15:07:55.713

在 perl 中登录、访问和关闭 ssh 会话的完整过程。

```
 my $host = 192.168.0.1;

            my $username = "example";

            my $passwd  = "example";

            my $ssh = Net::SSH::Expect->new(
            host => $host,
            user => $username,
            password => $passwd,
            timeout => 20,
            );
            $ssh->login();
            $ssh->exec("command_to_be_executed_in_ssh\r\n");
            $ssh ->close; 
```

# php - 将图像合并在一起并没有真正奏效

> ID：11536034
> 
> 赞同：1
> 
> 时间：2012-07-18T07:10:47.020
> 
> 标签：php, gd

由于某种原因，我似乎无法合并 2 张图像，而且我不知道自己做错了什么。这对我来说还是有点新鲜。这是我的代码：

```
$source = 'http://localhost:8888/develop/trunk/develop/wp-content/uploads/2012/07/card01-80x80.jpg';
$im = imagecreatetruecolor(200, 200);
$black = imagecolorallocate($im, 0, 0, 0);
// Make the background transparent
imagecolortransparent($im, $black);
$text_color = imagecolorallocate($im, 255, 255, 255);
imagestring($im, 1, 5, 5,  "A Simple Text String", $text_color);
imagejpeg($im, WP_UPLOADS_PATH . 'post-image-generator/1.jpg');

//merge images
$thumb = imagecreatefromjpeg($source);
$destination = imagecreatefromjpeg(WP_UPLOADS_PATH . 'post-image-generator/1.jpg');

imagecopymerge($destination, $thumb, 0, 0, 0, 0, 0, 0, 100);

imagejpeg($destination, WP_UPLOADS_PATH . 'post-image-generator/1.jpg');

echo "
    <style></style>
    <img src='" . WP_UPLOADS_URL . 'post-image-generator/1.jpg' . "' />
        ";

imagedestroy($thumb);
imagedestroy($destination);
imagedestroy($im); 
```

它生成以下内容：

![生成的图像](../Images/a207c026304588a7714b9c01089e51e1.png)

但还应包括以下图像：

![丢失图像](../Images/e45be0c4798070e0a6849b105c738557.png)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:07:04.337

据我所知，没有实际测试它是这样的：

imagecopymerge($destination, $thumb, 0, 0, 0, 0, **0, 0,** 100);

您要复制的区域从 $thumb 中的 0,0 开始，要复制的区域的宽度和高度为 0 和 0。由于源图片是 80x80，并且您希望将整个内容复制到顶部第一张图片的左角，您需要将其更改为：

imagecopymerge($destination, $thumb, 0, 0, 0, 0, 80, 80, 100);

这会将整个 80 像素的图像复制到 $destination 的左上角。

# jquery - 更改功能在 document.ready ie7 中不起作用，ie8

> ID：11536035
> 
> 赞同：0
> 
> 时间：2012-07-18T07:10:47.687
> 
> 标签：jquery, document-ready

嗨，我正在使用 jquery 1.3.2 分钟

问题是 document.ready 不工作

```
jQuery(document).ready(function(){  

    alert("1");
});

    alert("2");

jQuery('.lob_dropdown').change(function(){

    alert("changed");
}); 
```

这里只有 2 是警报，1 是不警报。

在 document.ready 中更改功能时，它不起作用。但在document.ready之外它工作正常。

我在 ie 控制台中有错误

![在此处输入图像描述](../Images/874259efd54bf24ff95bcfe7ab61c409.png)

无法理解为什么会发生这种情况..请帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:14:00.020

尝试使用最新版本的 jQuery ：

[http://docs.jquery.com/Downloading_jQuery](http://docs.jquery.com/Downloading_jQuery)

或与谷歌

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:13:02.187

试试这个，它会工作。

```
jQuery(document).ready(function(){  
    alert("1");
    jQuery('.lob_dropdown').change(function(){
         alert("changed");
    });
});

alert("2"); 
```

在准备 dom 之前，您正在访问类是“lob_dropdown”的元素。

所以把它准备好，它会工作的。

# php - php soap webservices不在服务器上工作

> ID：11536037
> 
> 赞同：0
> 
> 时间：2012-07-18T07:10:52.903
> 
> 标签：php, web-services, soap

我正在使用 php 网络服务。当我单独使用它时，服务调用返回值只有一个，但是当我将它与多个函数一起使用时，它正在调用但不返回值。单个 wsdl 就像：对于 MessageRS()

```
<?xml version ='1.0' encoding ='utf-8' ?>
<definitions name='shop'
  targetNamespace='http://localhost/soap/'
  xmlns:tns='http://localhost/soap/'
  xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/'
  xmlns:xsd='http://www.w3.org/2001/XMLSchema'
  xmlns:soapenc='http://schemas.xmlsoap.org/soap/encoding/'
  xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'
  xmlns='http://schemas.xmlsoap.org/wsdl/'>

    <message name='messageRQ'>
    <part name='sendXML' type='xsd:string'/>
  </message>
  <message name='messageRS'>
    <part name='Result' type='xsd:string'/>
  </message>

  <portType name='CatalogPortType'>

  <operation name='MessageRS'>
        <input message='tns:messageRQ'/>
        <output message='tns:messageRS'/>
    </operation>

    </portType>

    <binding name='CatalogBinding' type='tns:CatalogPortType'>
    <soap:binding style='rpc' transport='http://schemas.xmlsoap.org/soap/http'/>

    <operation name='MessageRS'>
        <soap:operation soapAction='urn:localhost-catalog#MessageRS'/>
        <input>
            <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
        </input>
        <output>
            <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
        </output>
    </operation>
    </binding>

    <service name='CatalogService'>
    <port name='CatalogPort' binding='CatalogBinding'>
      <soap:address location='http://1mp1.viewthedemo.com/s/server/server.php'/>
    </port>
  </service>
</definitions> 
```

和使用时

```
<message name='getCatalogRequest'>
    <part name='catalogId' type='xsd:string'/>
  </message>
  <message name='getCatalogResponse'>
    <part name='Result' type='xsd:string'/>
  </message>

  <message name='manufacturerRQ'>
    <part name='manufacturerRQxml' type='xsd:string'/>
  </message>
  <message name='mamufacturerRS'>
    <part name='Result' type='xsd:string'/>
  </message>

  <message name='messageRQ'>
    <part name='sendXML' type='xsd:string'/>
  </message>
  <message name='messageRS'>
    <part name='Result' type='xsd:string'/>
  </message>

  <message name='saveRQ'>
    <part name='SaveRQParameter' type='xsd:string'/>
  </message>
  <message name='saveRS'>
    <part name='Result' type='xsd:string'/>
  </message>

  <message name='Product_list'>
    <part name='Result' type='xsd:string'/>
  </message>

  <message name='SettingRQ'>
    <part name='xml' type='xsd:string'/>
  </message>
  <message name='SettingRS'>
    <part name='Result' type='xsd:string'/>
  </message>

  <portType name='CatalogPortType'>
    <operation name='getCatalogEntry'>
      <input message='tns:getCatalogRequest'/>
      <output message='tns:getCatalogResponse'/>
    </operation>
    <operation name='ManufacturerRS'>
      <input message='tns:manufacturerRQ'/>
      <output message='tns:mamufacturerRS'/> 
     </operation>
    <operation name='MessageRS'>
        <input message='tns:messageRQ'/>
        <output message='tns:messageRS'/>
    </operation>

    <operation name='SaveRS'>
      <input message='tns:saveRQ'/>
      <output message='tns:saveRS'/>
    </operation>
    <operation name='Product_list'>
      <input message='tns:Product_list'/>
      <output message='tns:Product_list'/>
    </operation>
    <operation name='SettingRS'>
      <input message='tns:SettingRQ'/>
      <output message='tns:SettingRS'/>
    </operation>

  </portType>

  <binding name='CatalogBinding' type='tns:CatalogPortType'>
    <soap:binding style='rpc' transport='http://schemas.xmlsoap.org/soap/http'/>
    <operation name='getCatalogEntry'>
      <soap:operation soapAction='urn:localhost-catalog#getCatalogEntry'/>
      <input>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </input>
      <output>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </output>
    </operation>

    <operation name='ManufacturerRS'>
      <soap:operation soapAction='urn:localhost-catalog#ManufacturerRS'/>
      <input>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </input>
      <output>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </output>
    </operation>

    <operation name='MessageRS'>
        <soap:operation soapAction='urn:localhost-catalog#MessageRS'/>
        <input>
            <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
        </input>
        <output>
            <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
        </output>
    </operation>

    <operation name='SaveRS'>
      <soap:operation soapAction='urn:localhost-catalog#SaveRS'/>
      <input>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </input>
      <output>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </output>
    </operation>

    <operation name='Product_list'>
      <soap:operation soapAction='urn:localhost-catalog#Product_list'/>
      <input>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </input>
      <output>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </output>
    </operation>

    <operation name='SettingRS'>
      <soap:operation soapAction='urn:localhost-catalog#Product_list'/>
      <input>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </input>
      <output>
        <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
      </output>
    </operation> 
```

然后它不在客户端页面中发送值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:21:01.083

我想首先您需要检查服务器上是否启用了soap扩展。您可以使用phpinfo（）检查soap扩展。

# jakarta-ee - 在 WEB-INF/lib 中创建文件夹，以便对所有 lib 文件进行排序

> ID：11536041
> 
> 赞同：0
> 
> 时间：2012-07-18T07:11:00.153
> 
> 标签：jakarta-ee, web-inf

我正在研究这个`Java EE`项目，而不是在任何框架上。当我开始处理它时，只有 3 个`jar`文件。目前该特定文件夹有 10 个`jar`文件，将来可能超过 25 个。这就是我要对所有 lib 文件进行排序的原因。

我用谷歌搜索了它，我得到了[这个链接](http://www.coderanch.com/t/491886/Tomcat/add-folder-WEB-INF-lib)，他们说可以完成，但他们没有指定在做出之后需要什么样的改变。因此，任何人都知道在 lib 文件夹中添加文件夹后需要进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:38:51.830

包含 的or`war`可以由构建基础设施组装。构建基础设施使用配置文件来定义. 例如，您可以查看[Maven](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)。`ear``WEB-INF``WEB-INF`

构建基础设施的优点如下：

1.  排序——你可以根据需要对配置文件中的依赖项进行排序；
2.  文档——您在文件中提供有关依赖项的附加信息；
3.  版本控制——它有利于一个干净的版本控制方案，例如`dependency-1.2.3.jar`；
4.  模块化——它可以自动构建依赖项目以获得最新的`jar`。
5.  灵活——您可以自动打包来自不同位置的不同类型的源，例如静态 html 文件或图像，`jar`来自依赖项目，用于本地化的资源文件等。

缺点很明显：

1.  复杂性——构建基础设施是您项目中要控制的另一项技术。

我只会为非常简单的项目不使用构建基础设施。可能有 10-25 个依赖 jar 的事实似乎表明已经是中等项目。可能值得考虑这个选项。

# java - 从 Java 客户端发送的 servlet 中读取 File、String、Int

> ID：11536043
> 
> 赞同：1
> 
> 时间：2012-07-18T07:11:02.687
> 
> 标签：java, jsp, jakarta-ee, servlets, servlet-3.0

我正在从 java 客户端程序向 Servlet 发送请求，如下所示，

```
URL url = new URL("http://localhost:8080/TestWebProject/execute");
HttpURLConnection httpCon = (HttpURLConnection) url.openConnection();
httpCon.setDoOutput(true);
httpCon.setRequestMethod("POST");

DataOutputStream out = new DataOutputStream(httpCon.getOutputStream());
out.writeUTF("hello");
out.writeUTF("World");

ByteArrayOutputStream bos;
File baseFile = new File("C:\\Users\\jp\\Desktop\\mdn.txt");

if (!baseFile.exists())
{
    System.out.println("File Not Found Correctly");
}

FileInputStream fis = new FileInputStream(baseFile);

byte[] fileBytes = new byte[1024];
bos = new ByteArrayOutputStream();

while (true)
{
    int ch = fis.read(fileBytes);

    if (ch != -1)
    {
        bos.write(fileBytes, 0, ch);
    }
    else
    {
        break;
    }
}
bos.close();
fis.close();

out.write(bos.toByteArray());

out.writeInt(10);

out.close(); 
```

***** ** *** ** *** ** ******伺服器端****** ** *** ** *** ** *****

```
InputStream is = (InputStream) req.getInputStream();

DataInputStream dis = new DataInputStream(is);
System.out.println("NAME US :" + dis.readUTF());
System.out.println("NAME US 1:" + dis.readUTF());

File f = new File("D:\\temp2.txt");
f.createNewFile();

FileOutputStream fos = new FileOutputStream(f);

byte[] fileBytes = new byte[1024];
ByteArrayOutputStream bos = new ByteArrayOutputStream();

while (true)
{
    int ch = dis.read(fileBytes);

    if (ch != -1)
    {
        bos.write(fileBytes, 0, ch);
    }
    else
    {
        break;
    }
}
fos.write(bos.toByteArray());

System.out.println(dis.readInt()); 
```

我得到输出作为 Hello World 文件也成功复制到提到的位置 temp2.​​txt

我在 System.out.println(dis.readInt()); 行遇到问题 当 EOF 到达时。

我在哪里做错了，以及如何从 DataInputStream 读取数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:29:34.610

你的循环循环直到你的流是“空的”，然后你退出你的循环。但是之后您尝试再次从流中读取，这是空的并且您正在到达 eof。您想将哪些数据打印到 sysout？

**编辑**：

您可以像这样直接写入您的`FileOutputStream`并重写您的循环：

```
FileOutputStream fos=new FileOutputStream(f);

byte[] fileBytes=new byte[1024];
int ch;

while(((ch = dis.read(fileBytes)) != -1) {
   fos.write(fileBytes,0,ch);
} 
```

# android - 启动服务时如何检测BT耳机/耳机

> ID：11536044
> 
> 赞同：0
> 
> 时间：2012-07-18T07:11:05.493
> 
> 标签：android, bluetooth, headset

我正在启动一项为 BT 设备连接/断开连接注册广播接收器的服务。它似乎工作得很好。虽然，我遇到了问题。我需要检测 BT 耳机是否已经连接，以便我知道当前状态。我使用下面的代码，但看起来它没有完成它的工作：

```
// ...
// get BluetoothAdapter 
BluetoothAdapter ba = BluetoothAdapter.getDefaultAdapter();
// to tell if BT headset is connected
boolean isBtHeadsetOn = false;

// if device supports BT
if (ba != null) {
    // get list of paired devices
    Set<BluetoothDevice> devices = ba.getBondedDevices();

    if (devices != null) {
        // loop through devices
        for (BluetoothDevice device : devices) {
            // get device class
            BluetoothClass bc = device.getBluetoothClass();
            if (bc == null) continue;
            int devClass = bc.getDeviceClass();

            // check if device is handsfree, headphones or headset
            if (devClass == BluetoothClass.Device.AUDIO_VIDEO_HANDSFREE || devClass == BluetoothClass.Device.AUDIO_VIDEO_HEADPHONES || devClass == BluetoothClass.Device.AUDIO_VIDEO_WEARABLE_HEADSET) {
                // yes, it is
                isBtHeadsetOn = true;
                break;
            }
        }
    }
}

// now I got my result in variable isBtHeadsetOn
// ... 
```

我正在为 android 2.1 开发，上面的代码放在 Service#onCreate() 中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:59:17.527

此代码只为您提供绑定的设备，但不提供连接状态。这意味着，您的手机记住的蓝牙设备......但它们可以连接或不连接。

一般来说，要了解状态，您应该捕获设备状态的更改：

```
<receiver android:name=".receiver.BTReceiver">
        <intent-filter>
            <action android:name="android.bluetooth.adapter.action.STATE_CHANGED" />
            <action android:name="android.bluetooth.device.action.ACL_CONNECTED" />
            <action android:name="android.bluetooth.device.action.ACL_DISCONNECTED" />
            <action android:name="android.bluetooth.device.action.BOND_STATE_CHANGED" />
        </intent-filter> 
```

如果您知道这是免提设备，您可以获得一个 BluetoothHeadset 对象，它实际上有一些方法可以了解连接状态：http: [//developer.android.com/reference/android/bluetooth/BluetoothHeadset.html](http://developer.android.com/reference/android/bluetooth/BluetoothHeadset.html)

# ruby-on-rails - FactoryGirl：`块（3级）在 '：未定义的局部变量或方法'user'

> ID：11536046
> 
> 赞同：0
> 
> 时间：2012-07-18T07:11:14.870
> 
> 标签：ruby-on-rails, rspec, factory-bot

我不断收到`user`未定义的错误，即使我认为我这样做了`let(:user) { FactoryGirl.create(:user) }`。我该如何解决？

我尝试做删除、重新创建、迁移的数据库并做了`rake db:test:prepare`.

我也尝试重新启动服务器。

这些技巧都没有奏效。

forums_spec.rb

```
require 'spec_helper'

describe "Forums" do

  subject { page }

  shared_examples_for 'All signed off pages' do
    describe 'should have logo' do
      it { should have_selector('#logo', text: 'Minforum')}
    end

    describe 'should have navigation header' do
      it { should have_selector('.nav.pull-right li', text: 'Sign in') }
      it { should have_selector('.nav.pull-right li', text: 'Register') }
    end

    describe 'should have footer links' do
      it { should have_link('About', href: about_path) }
      it { should have_link('Code', href: 'https://github.com/serv/minforum') }
      it { should have_link('Privacy Policy', href: privacy_path) }
    end
  end

  shared_examples_for 'All pages' do
    it { should have_selector('h1', text: heading) }
    it { should have_selector('title', text: full_title(title)) }
  end

  describe 'index page' do
    before { visit root_path }
    let(:title) {''}
    let(:heading) {'Forums'}

    describe 'should have large intro display' do
      it { should have_selector('.intro h1', text: 'Minforum') }
      it { should have_selector('.intro p', text: 'Simple forum software written with Ruby on Rails') }
      it { should have_link('View project on GitHub', href: 'https://github.com/serv/minforum') }
    end

    describe 'should have valid table headings' do
      it { should have_selector('table thead tr th', text: '') }
      it { should have_selector('table thead tr th', text: 'Topics') }
      it { should have_selector('table thead tr th', text: 'Posts') }
      it { should have_selector('table thead tr th', text: 'Views') }
    end

    it_should_behave_like 'All pages'
    it_should_behave_like 'All signed off pages'
  end

  describe 'new page' do
    describe 'should not let visitors in' do
      before { visit new_forum_path }
      it { should have_selector('.alert.alert-notice', text:'You do not have permission to do that.') }
    end

    describe 'should not let nonadmin users in' do
      let(:user) { FactoryGirl.create(:user) }
      sign_in user
      visit new_forum_path

      it { should have_selector('.alert.alert-notice', text:'You do not have permission to do that.') }
      user.delete
    end
  end
end 
```

工厂.rb

```
FactoryGirl.define do
  factory :user do
    sequence(:name)  { |n| "Person#{n}" }
    sequence(:email) { |n| "person_#{n}@example.com"}   
    password "foobar"
    password_confirmation "foobar"
    bio 'This is a bio.'

    factory :admin do
      admin true
    end

    factory :mod do
      mod true
    end
  end

  factory :forum do
    name 'Jason Forum1'
    description 'The factory_girl gem is used to create default model objects for tests. For example, if a controller action requires finding a User object before displaying...'
    user
  end

  factory :topic do
    name 'The application generator template will ask you for your preferences'
    views 10
    forum_id 1
    last_post_id 10
  end
end 
```

登录方法

```
def sign_in(user)
  visit signin_path
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
  # Sign in when not using Capybara as well.
  cookies[:remember_token] = user.remember_token
end 
```

错误

```
Jasons-MacBook-Pro:minforum jasonkim$ bundle exec rspec spec/requests/forums_spec.rb 
/Users/jasonkim/rails/minforum/spec/requests/forums_spec.rb:59:in `block (3 levels) in <top (required)>': undefined local variable or method `user' for #<Class:0x007f95e7e64130> (NameError)
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:201:in `module_eval'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:201:in `subclass'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:187:in `describe'
    from /Users/jasonkim/rails/minforum/spec/requests/forums_spec.rb:57:in `block (2 levels) in <top (required)>'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:201:in `module_eval'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:201:in `subclass'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:187:in `describe'
    from /Users/jasonkim/rails/minforum/spec/requests/forums_spec.rb:51:in `block in <top (required)>'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:201:in `module_eval'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:201:in `subclass'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/example_group.rb:187:in `describe'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/dsl.rb:18:in `describe'
    from /Users/jasonkim/rails/minforum/spec/requests/forums_spec.rb:3:in `<top (required)>'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `load'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `block in load_spec_files'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `map'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `load_spec_files'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:80:in `run_in_process'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:69:in `run'
    from /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

将答案更改为 avendt 后出现新错误

```
Jasons-MacBook-Pro:minforum jasonkim$ bundle exec rspec spec/requests/forums_spec.rb
................F

Failures:

  1) Forums new page should not let nonadmin users in 
     Failure/Error: sign_in user
     NoMethodError:
       undefined method `forums' for nil:NilClass
     # ./app/controllers/users_controller.rb:8:in `show'
     # (eval):2:in `click_button'
     # ./spec/support/utilities.rb:22:in `sign_in'
     # ./spec/requests/forums_spec.rb:60:in `block (4 levels) in <top (required)>'

Finished in 0.74504 seconds
17 examples, 1 failure

Failed examples:

rspec ./spec/requests/forums_spec.rb:65 # Forums new page should not let nonadmin users in 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:15:08.637

我不确定，但这可能是范围问题。您在`user`可能导致问题的示例之外调用。尝试类似：

```
before do
  sign_in user
  visit new_forum_path
end
after { user.delete ) 
```

在 的开头`describe`，就像您之前对示例所做的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T20:47:27.153

let 块正在创建一个在示例（实例）级别可用的方法，并且您直接在示例组（类）级别的描述块中引用。您只能在其他 let、before、after、it 和指定块中引用 let。这是一个例子：

```
describe 'should not let nonadmin users in' do
  let(:user) { FactoryGirl.create(:user) }
  before do
    sign_in user
    visit new_forum_path
  end

  it { should have_selector('.alert.alert-notice', text:'You do not have permission to do that.') }

  after { user.delete }
end 
```

不过，在这里使用 RSpec DSL 似乎并没有得到很多回报，而且它似乎让事情变得更加困难，所以我建议将事情弄平：

```
it 'should not let nonadmin users in' do
  user = FactoryGirl.create(:user)
  sign_in user
  visit new_forum_path
  page.should have_selector('.alert.alert-notice', text:'You do not have permission to do that.')
end

after { user.delete } 
```

如果该“用户”在本地数据库中，我还建议使用 database_cleaner 或类似的东西，而不是在规范结束时手动删除用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:24:08.270

您在规范开始时缺少 it 声明：

```
it "should have not permitted selector" do
  sign_in user
  visit new_forum_path

  it { should have_selector('.alert.alert-notice', text:'You do not have permission to do that.') }
  user.delete
end 
```

# playframework-2.0 - playframework2(java) 中错误 500 的自定义处理？

> ID：11536047
> 
> 赞同：0
> 
> 时间：2012-07-18T07:11:30.177
> 
> 标签：playframework-2.0

在我的 Routes 文件中，我做了类似的事情 - GET /error Controllers.error.Error()

但它给出了编译错误。在我的error.java中，我做了类似的事情，

```
Public static error Error(Throwable t) 
{
Return internalservererror(views.html.myerrorpage.render())
} 
```

我想知道在路由文件中为错误 500 写什么，我还想知道服务器是否会记录发生的错误，它是如何工作的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:27:08.787

您可以覆盖 Global 对象中的那些。

编辑：使用受控 URL。

**全球斯卡拉**：

```
override def onError(request: RequestHeader, ex: Throwable) = {
   Redirect(routes.ErrorHandler.error())
} 
```

**路线**：

```
GET /error      controllers.ErrorHandler.error() 
```

# java - 将 JsonNode 转换为 java 数组

> ID：11536051
> 
> 赞同：15
> 
> 时间：2012-07-18T07:11:50.153
> 
> 标签：java, json, playframework, playframework-2.0

我正在使用 websocket 和 JsonNode 开发 Play framewrok 2。前端通过 websocket 连接到 play framework 后端。我将一个 javascript 数组转换为一个 json 节点，并通过使用 webscoket 连接将其发送到后端。现在我的问题是如何将 json 对象转换为 java 数组或任何合适的结构，以便我可以操作数据。

这是我创建的 json 对象

```
var myjeson = {"x":arrayX,"y":arrayY} ; 
```

这是动态填充的数组

```
 function pixelCount ()
    {  arrayX[counter] = xcoordinate;        
    arrayY[counter] = ycoordinate;
    socket.send(" from array X,Y  "+arrayX[counter]+ " " +arrayY[counter]); 
    ++counter;      
    } 
```

下面的代码发送数据

```
$('button.send').click(function() {            
sock.send(JSON.stringify(myjeson)); 
```

在服务器端我有以下代码

```
 public static WebSocket<JsonNode> givenIn() {
    return new WebSocket<JsonNode>() {
    // called when the websocket is established
    public void onReady(WebSocket.In<JsonNode> in, WebSocket.Out<JsonNode> out) {
    // register a callback for processing instream events             
    in.onMessage(new Callback<JsonNode>() {
    public void invoke(JsonNode event) {                 
    Logger.info(event.toString());
    } 
```

当我检查日志时，消息已传递：以下是日志信息 [info] 应用程序 -

```
{"x":
[78.72727298736572,79.72727298736572,82.72727298736572,
7298736572,93.72727298736572,83.72727298736572132.72727298736572],

"y":
[82.6363639831543,82.6363639831543,63.54545593261719,63.54545593261719,64.545455932
61719,65.54545593261719,70.54545593261719,189.5454559326172,188.5454559326172]} 
```

现在我想将这些数据放在一个数组中，以便我可以访问它们。任何建议将不胜感激。也欢迎提供替代建议。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2018-12-06T10:01:57.467

将我的评论移至答案，因为它得到了很多人的支持。

这应该做OP需要的：

`new ObjectMapper().convertValue(jsonNode, ArrayList.class)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-14T22:24:39.827

使用树模型的快速方法...将 JSON 字符串转换为 JsonNode 的树：

```
ObjectMapper mapper = new ObjectMapper();
JsonNode rootNode = mapper.readTree("...<JSON string>..."); 
```

然后提取子节点并将它们转换为列表：

```
List<Double> x = mapper.convertValue(rootNode.get("x"), ArrayList.class);
List<Double> y = mapper.convertValue(rootNode.get("y"), ArrayList.class); 
```

一个稍长但有争议的更好方法是定义一个表示您期望的 JSON 结构的类：

```
public class Request {
    List<Double> x;
    List<Double> y;
} 
```

然后直接反序列化如下：

```
Request request = mapper.readValue("...<JSON string>...", Request.class); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-30T14:01:06.013

“...如何将 json 对象转换为 java 数组”

```
import com.google.common.collect.Streams;

public void invoke(JsonNode event) {                 
    Streams.stream(event.withArray("x").elements())
        .forEach( num -> Logger.info(num.asDouble()) )
} 
```

诀窍是首先使用“elements()”方法获取 Iterator 对象，然后使用 Guava “stream”方法获取流。一旦你有了流，你就可以进行各种数组操作（例如过滤器、映射）来使用你的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T11:45:45.803

答案主要在[Jackson 文档](https://github.com/FasterXML/jackson-docs)和[教程](http://www.studytrails.com/java/json/java-jackson-introduction.jsp)中；

您有几种方法可以将该 JsonNode 转换为有用的数据。

如果您事先知道数据的结构，则可以使用[数据绑定](http://www.studytrails.com/java/json/java-jackson-Data-Binding.jsp)方法：对于“完整”绑定，请创建一个对应于所有字段的类）；对于结构较少的方法，“原始”绑定允许您使用通用对象。

否则，[树模型](http://www.studytrails.com/java/json/java-jackson-json-tree-parsing.jsp)方法应该适合您；您将在链接页面中找到的示例与您的用例非常吻合。

请尝试该示例，然后如果您有更具体的问题，请返回确切的实际或哲学问题！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-02T11:51:17.933

Stefano 在接受的答案中提到的**树模型方法**的快速 答案：

```
JsonNode rootNode = new ObjectMapper().readTree(new StringReader(jsonStr));
JsonNode x=rootNode.get("x");
System.out.println(x.getNodeType());//should print: ARRAY
Iterator<JsonNode> arrayIterator=x.iterator();
List<Double> xList=new ArrayList<Double>();
while(arrayIterator.hasNext()) {
    JsonNode elementInX=arrayIterator.next();
    Double xDoubleValue=elementInX.asDouble();
    xList.add(xDoubleValue);
}
Double[] xArray=new Double[xList.size()];
xList.toArray(xArray);//xArray now should be what you want

//do the same thing to y 
```

# asp.net-mvc-3 - 如何将列绑定到 DropDownList 并获取 MVC3 中 Selected 的值？

> ID：11536054
> 
> 赞同：1
> 
> 时间：2012-07-18T07:11:54.853
> 
> 标签：asp.net-mvc-3, c#-4.0, html-select

嗨，伙计们，我有两张看起来像这样的桌子

```
 usertable                                 RoleTable
   -----------------------                     ---------------------------
  UserID|UserName|Pwd|RoleID                        RoleID|RoleName
    1   |Anil    |123|1                               1   |Admin 
```

现在我在表格中显示用户表，他有一个 AddNew 链接，当管理员单击 AddNew 链接时，我将向他显示 AddNew 页面，其中他有一些标签和文本框给 AddNew 用户，

现在我要做的是在 AddNew 页面中我想在 DropDown 中显示所有 RoleNames，以便管理员可以选择用户必须是哪个角色....并且我想检索选定的数据

这是我的模型课

```
 public class ResourceModel
{
    public static List<ResourceModel> GetList { get; set; }
    public Int16 EmployeeId { get; set; }
    public string EmployeeName { get; set; }
    public string EmployeeEmailId { get; set;}
    public string GroupName { get; set; }
    public string EmployeePassword { get; set; }

} 
```

这是我的控制器

```
 [AcceptVerbs(HttpVerbs.Get)]
     public ActionResult AddNew()
    {

        ViewBag.Roles = new SelectList(GetRoles(),"RoleID","RoleName");           
        return View();
    }
    //
    //Geting All Roles In a GetRoles()/
    //
      public static GetRoles()
      {

        SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
        SqlCommand Cmd = new SqlCommand("Select GroupId,EmplopyeeRole from  EmployeeGroup", conn);
        conn.Open();
        SqlDataAdapter da = new SqlDataAdapter(Cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
        {
            //roles.Add(new SelectListItem{.Value=i,.Text=i};                   
            var model = new ResourceModel();
            model.RoleId = Convert.ToInt16(ds.Tables[0].Rows[i]["GroupId"]);
            model.RoleName = ds.Tables[0].Rows[i]["EmplopyeeRole"].ToString();
            //roles.Value=Convert.ToString( model.RoleId);
            //roles.Text=model.RoleName;
        }
        conn.Close();
          return ds ;
      } 
```

我必须在上面的代码中返回什么

这是我的 AddNew Aspx 页面

```
 <div>
    <% using (Html.BeginForm())
  { %>
  <%-- <form action="Create.aspx" method="post"></form>--%>
   <%:Html.ValidationSummary(true)%>
     <fieldset>
   <legend style="color:Orange; font-weight:bolder;">AddNew Project</legend>

    <div class="editor-label" style="color:Orange; font-weight:bolder;">
        <%: Html.LabelFor(model => model.EmployeeName)%>
    </div>
    <div class="editor-field">
       <%:Html.EditorFor(model => model.EmployeeName)%>
      <%: Html.ValidationMessageFor(model => model.EmployeeName)%>
    </div>

    <div class="editor-label" style="color:Orange; font-weight:bolder;">
       <%:Html.LabelFor(model => model.EmployeeEmailId)%>
    </div>
    <div class="editor-field">
       <%:Html.EditorFor(model => model.EmployeeEmailId)%>
       <%:Html.ValidationMessageFor(model => model.EmployeeEmailId)%>
    </div>
    <div class="editor-label" style="color:Orange; font-weight:bolder;">
    <%:Html.LabelFor(model => model.EmployeePassword)%>
    </div>
    <div class="editor-field">
    <%:Html.EditorFor(model => model.EmployeePassword)%>
    <%:Html.ValidationMessageFor(model => model.EmployeePassword)%>
    </div>
      <div class="editor-label" style="color:Orange; font-weight:bolder;">
    <%:Html.LabelFor(model => model.GroupName)%>
    </div>
    <div class="editor-field">
    <%:Html.EditorFor(model => model.GroupName)%>
    <%:Html.ValidationMessageFor(model => model.GroupName)%>
    <p>
        <input type="submit" value="Create" style="color:Orange; font-weight:bolder;"/>
    </p>
    </fieldset>
    <%} %>        
  </div> 
```

任何人都可以帮助我在 MVC3 中执行此操作....我必须在下拉菜单中显示 RoleNames 我必须检索在控制器中的 [AcceptVerbs(HttpVerbs.Post)] 中选择的值....请有任何想法

我有一个我的 [AcceptVerbs(HttpVerbs.Post)] 的存储过程，其中使用选定的下拉值我将在 Db 中插入 RoleName 的 RoleID

```
 Create Procedure InsertEmplyoee
       (
       @EmployeeName varchar(50),
       @EmployeeEmailId varchar(50),
      @EmployeePassword varchar (50),
       @GroupName varchar (50)
          )
       as
       begin
       insert into EmployeeDetails   (EmployeeName,EmployeeEmailId,EmployeePassword,GroupId) values 
    (@EmployeeName,@EmployeeEmailId,@EmployeePassword,(select GroupId from   EmployeeGroup where EmplopyeeRole=@GroupName )) 
```

结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:24:40.510

想想你将如何`POST`将选定的角色 id 返回到服务器。

而不是`public static List<ResourceModel> GetList { get; set; }`使用 `public int RoleId {get;set;}`. 您不能`@Html.DropDownListFor`为 a创建一个`List<T>`，这没有任何意义，您只是在发回一个值。

接下来在您的模型中创建一个返回`IEnumerable`of 的方法`SelectListItem`。

```
public static IEnumerable<SelectListItem> GetRoles()
    {
        var roles = //However you plan to get this data from db
        return roles.Select(o => new SelectListItem
                                     {
                                         Value = o.RoleID,
                                         Text = o.RoleName
                                     });
    } 
```

最后在你看来：

`@Html.DropDownListFor(x=> x.RoleId, ResourceModel.GetRoles())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:46:06.570

让你的 Get Action 像这样：

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult AddNew()
{
        ViewBag.RoleId = new SelectList(GetRoles(), "RoleID", "RoleName");
        return View();
} 
```

`GetRoles`应该返回一个列表`Role`

在您看来：

```
@Html.DropDownList("RoleId") 
```

**编辑：解释**

`Html.DropDownList`方法将搜索`ViewBag`（`ViewData`实际上）一个`SelectListItem`带有名称`RoleId`的列表并用它创建下拉列表。您无需自己明确指定列表。

**编辑：更正`GetRoles`**

`GetRoles`方法应该是这样的：

```
public static List<Role> GetRoles() {
    SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
    SqlCommand Cmd = new SqlCommand("Select GroupId,EmplopyeeRole from  EmployeeGroup", conn);
    conn.Open();
    SqlDataAdapter da = new SqlDataAdapter(Cmd);
    DataSet ds = new DataSet();
    da.Fill(ds);

    List<Role> allRoles = new List<Role>();
    for(int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++) {
        Role role = new Role {
            RoleId = Convert.ToInt16(ds.Tables[0].Rows[i]["GroupId"]),
            RoleName = ds.Tables[0].Rows[i]["EmplopyeeRole"].ToString()
        };

        allRoles.Add(role);
    }
    conn.Close();
    return allRoles;
} 
```

我一直与`EntityFramework`. 你为什么不使用那个或其他一些ORM？

# r - 在 R 中创建图形用户界面

> ID：11536057
> 
> 赞同：-2
> 
> 时间：2012-07-18T07:12:01.017
> 
> 标签：r, matlab, user-interface, data-analysis

目前我正在 R 中进行数据分析。最终，我想创建一个可以提供分析摘要和主图的 GUI。有谁知道我是否可以使用 R 创建界面？如果没有，你知道我是否可以将 MATLAB（用于 GUI）和 R 结合起来吗？

感谢您的合作。

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T07:32:38.690

我建议研究基于[tcltk](http://cran.r-project.org/web/packages/rpanel/index.html)构建的 rpanel 和基于 GTK+ 构建的[RGtk2 。](http://www.ggobi.org/rgtk2/)

ETA：针对您关于使用 R 制作 PDF/HTML 报告的评论：我*强烈*推荐将 R 嵌入 LaTeX 的[Sweave 。](http://www.statistik.lmu.de/~leisch/Sweave/)它功能强大，能够制作格式非常好的报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:21:51.623

这个包[http://cran.r-project.org/web/packages/ProgGUIinR/index.html](http://cran.r-project.org/web/packages/ProgGUIinR/index.html)有一些代码用于制作你描述的 guis。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:04:26.357

[Rcommander](http://cran.r-project.org/web/packages/Rcmdr/index.html)、[RStudio](http://rstudio.org/)，如果您使用的是 linux，RKWard (http://rkward.sourceforge.net/) 提供了一些用于绘图和统计分析的 GUI 元素。这可能是您正在寻找的。

# postgresql - 将查询结果选择到 plpgsql 中的变量中

> ID：11536058
> 
> 赞同：2
> 
> 时间：2012-07-18T07:12:13.070
> 
> 标签：postgresql, stored-procedures, plpgsql

我正在编写一个 PL/PGSQL 函数。它涉及处理查询的结果。文档中的 IIRC`SELECT INTO`在这种情况下不起作用，但是，可以通过创建临时表来存储查询结果。

我运行以下快速测试：

```
create function foo() returns numeric as $body$ 
begin 
  create temporary table footable as 
  select * from some_table; 

  return 1.23; 
end; 
$body$ language plpgsql; 
```

然后我运行测试它如下：

```
select * from foo();
1.23
select * from foo();
ERROR:  relation "footable" already exists
CONTEXT:  SQL statement "create temporary table footable as select * from 
          some_table"
PL/pgSQL function "foo" line 1 at SQL statement 
```

那么，如何将查询结果临时缓存在变量中，以便稍后在我的存储过程中使用？

我正在使用 PG 8.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:57:38.157

**临时表在当前会话**（不是事务）结束时被销毁。您可以通过修改`CREATE`语句使其在提交/回滚后消失：

`CREATE TEMPORARY TABLE footable ... ON COMMIT DROP;`

当然，您不能在**每个事务**`CREATE`中多次运行它，因为它会给您带来 错误。**`relation "footable" already exists`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:16:17.767

还有更多方法 - 通常最好的方法是每个会话只创建一次临时表，[请参阅](http://okbob.blogspot.cz/2008/11/plpgsql-and-temp-tables.html)**

# android - SQLDatabase 不会保存字符串

> ID：11536066
> 
> 赞同：0
> 
> 时间：2012-07-18T07:12:39.363
> 
> 标签：android, sqlite, manifest

我目前正在制作一个简单的 Android sql 数据库程序。第一个活动有效，但它不会保存我在编辑文本中输入的文本。这是我的代码：

```
public class DatabaseFinalActivity extends Activity {
    NoteAdapter adapter=null;
    NoteHelper helper=null;
    Cursor dataset_cursor=null;
    EditText editNote=null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try
        {
            setContentView(R.layout.main);
            ListView list=(ListView)findViewById(R.id.listView1);
            editNote = (EditText)findViewById(R.id.editText1);

            helper=new NoteHelper(this);
            dataset_cursor=helper.getAll();
            startManagingCursor(dataset_cursor);
            adapter=new NoteAdapter(dataset_cursor);
            list.setAdapter(adapter);

            Button btn = (Button) findViewById(R.id.button1);
            btn.setOnClickListener(onSave); 
        }
        catch(Exception e) {
            Log.e("Error", "Error in code: " + e.toString());
            e.printStackTrace();
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        helper.close();
    }

    private View.OnClickListener onSave=new View.OnClickListener() {
        public void onClick(View v){
            helper.insert(editNote.getText().toString());
            dataset_cursor.requery();
            editNote.setText("");
        }
    };

    class NoteAdapter extends CursorAdapter {
        NoteAdapter(Cursor c) {
            super(DatabaseFinalActivity.this, c);
        }

        @Override 
        public void bindView(View row, Context ctxt, Cursor c) 
        {
            NoteHolder holder=(NoteHolder)row.getTag();
            holder.populateFrom(c, helper);
        }

        @Override
        public View newView(Context ctxt, Cursor c, ViewGroup parent) {
            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.row, parent, false);
            NoteHolder holder=new NoteHolder(row);

            row.setTag(holder);
            return(row);
        }
    }

    static class NoteHolder {
        private TextView noteText=null;
        NoteHolder(View row){
            noteText=(TextView)row.findViewById(R.id.textView1);
        }

        void populateFrom(Cursor c, NoteHelper helper) {
            noteText.setText(helper.getNote(c)); 
        }
    }
} 
```

这是我的帮手：

```
public class NoteHelper extends SQLiteOpenHelper {
    private static final String DATABASE_NAME="note.db";
    private static final int SCHEMA_VERSION=1;

    public NoteHelper(Context context) { 
        super(context, DATABASE_NAME, null, SCHEMA_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE NOTES (_id INTEGER PRIMARY KEY AUTOINCREMENT, note TEXT);");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int OldVersion, int NewVersion) {
    }

    public void insert (String note) {
        ContentValues cv=new ContentValues();
        cv.put("note", note);
        getWritableDatabase().insert("Notes", "note", cv);
    }

    public Cursor getAll() {
        return(getReadableDatabase().rawQuery("SELECT_id, note FROM notes", null));
    }

    public String getNote(Cursor c) {
        return(c.getString(1));
    }
} 
```

我怀疑问题出在清单中。这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="database.fli.one"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".DatabaseFinalActivity"
            android:label="@string/app_name" >
        </activity>
    </application>

</manifest> 
```

提前感谢您的意见和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:01:16.443

问题很简单，改一下：

```
getWritableDatabase().insert("Notes", "note", cv); 
```

对此：

```
getWritableDatabase().insert("Notes", null, cv); 
```

[SQLiteDatabase.insert()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)的中间参数是一种将空/空行插入数据库的解决方法，方法是传递`note`您告诉数据库该列将为空的列，*而不管*ContentValues 中的内容是什么。

简而言之，您告诉数据库输入一个空白行。请改用 null。

# php - odbc num_rows codeigniter result_set 为空

> ID：11536077
> 
> 赞同：1
> 
> 时间：2012-07-18T07:13:32.420
> 
> 标签：php, codeigniter, odbc

我使用此代码来验证用户。

```
public function verify_user($username, $password)
{
    $q = $this->db->where('username', $username)
        ->where('password', md5($password))
        ->limit(1)
        ->get('users');

    if ($q->num_rows() === 1) {
        echo '<pre>';
        print_r($q->row());
        echo '</pre>';
    } else {
        echo 'EMPTY';
    }
} 
```

但是，当它等于 1 时，它什么也不显示。

```
Array
(
) 
```

当我使用此代码修复 odbc num_rows = -1 问题时出现：[CODEIGNITER Issue](https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/drivers/odbc/odbc_result.php) on line 40 until 67

**编辑==============================**

我想要达到的是这个

```
stdClass Object
(
    [id_user] => 2
    [username] => 114080077
    [password] => 0d5ccab9e7f4ae3fe040f143046e386c
) 
```

我修改的代码是： **之前（STABLE VERSION）**：

```
/**
 * Number of rows in the result set
 *
 * @access  public
 * @return  integer
 */
function num_rows()
{
    return @odbc_num_rows($this->result_id);
} 
```

**之后（问题修复）**：

```
/**
 * Number of rows in the result set
 *
 * @return  int
 */
public function num_rows()
{
    if (is_int($this->num_rows))
    {
        return $this->num_rows;
    }
    elseif (($this->num_rows = @odbc_num_rows($this->result_id)) !== -1)
    {
        return $this->num_rows;
    }

    // Work-around for ODBC subdrivers that don't support num_rows()
    if (count($this->result_array) > 0)
    {
        return $this->num_rows = count($this->result_array);
    }
    elseif (count($this->result_object) > 0)
    {
        return $this->num_rows = count($this->result_object);
    }

    return $this->num_rows = count($this->result_array());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:23:12.730

if条件有错误，使用：

```
$q->num_rows() 
```

并尝试使用

`$q->result()`反而`->row()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:55:14.337

通过用这个替换 system/database/drivers/odbc/odbc_result.php 来修复： [修复问题](https://github.com/EllisLab/CodeIgniter/blob/9c68c3173c84041b1ee77929e540a4a4382edeee/system/database/drivers/odbc/odbc_result.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:00:15.320

您不能只使用`CI_DB_odbc_result`2.1 版本树的开发版本并保留其余内容。如果您不想全部替换，则需要从存储库中获取以下文件：

```
system/database/DB_driver.php
system/database/DB_result.php
system/database/drivers/odbc/odbc_driver.php
system/database/drivers/odbc/odbc_result.php 
```

（假设您只使用 ODBC）

ODBC 结果类仍然*可能*存在问题，我将对此进行调查，但考虑到您的问题是指尚未发布的 CodeIgniter 版本 - 最好将任何问题报告发布到 CodeIgniter 论坛或GitHub 存储库。

# php - 丢弃搜索词前后的前 10 个单词以外的所有字符

> ID：11536080
> 
> 赞同：3
> 
> 时间：2012-07-18T07:13:49.147
> 
> 标签：php, regex, full-text-search, preg-replace

我正在尝试在我正在开发的网站之一中完成搜索功能。由于我的搜索结果只显示匹配项目内容的摘录，我想做的是突出显示搜索结果中的搜索词，并只显示实际包含这些搜索词的部分文本。

我想我要做的是从数据库中获取全部内容并使用在搜索词周围`preg_replace`插入`<span>`元素，同时只提取词前后的前 10 个词。所以这是它的正则表达式部分：

```
(?:.*?)((?:\w+\W+){0,10})('.implode('|', $terms).')((?:\W*\w+\W+){0,10}) 
```

基本上，我尝试使用非捕获子模式“丢弃”除搜索词之前的前 10 个单词之外的所有文本，然后获取该词之前的 10 个词，然后是词本身，然后是接下来的 10 个词。

这是中的替换文本`preg_replace`：

```
\\1<span class="search-term search-term-content">\\2</span>\\3... 
```

`MySQL`正在通过's`MATCH()...AGAINST()`搜索搜索词以查找`MyISAM FULLTEXT`多列上的索引。但是，上述正则表达式仅应用于一列（我们称此列，即使用上述正则表达式的列`content`）。

所以我的问题是，每当我在其他列而不是列上得到匹配时`content`，上面的正则表达式就会从`content`列中删除所有文本。这是因为一`(?:.*?)`开始的子模式会继续匹配，而不会找到下一个子模式。

我想知道是否有任何其他方法可以在没有这种副作用的情况下实现正则表达式的原始目的。我目前正在考虑简单地使用`preg_match_all`来匹配搜索词及其前后的 10 个单词。我将遍历所有匹配项并手动构建预览文本。是的，这是一个不错的解决方案，但考虑到我对正则表达式的经验不足，我想我不妨尝试找到解决方案。

**更新**

我只是注意到，`contents`当我输入 2 个或更多搜索词时，我只会变得空白。除此之外，它完美无缺。我现在不知道为什么会这样。

**更新 2**

回声`preg_last_error()`，我得到这个错误`PREG_BACKTRACK_LIMIT_ERROR`。我使用这些词`new`和`post`作为搜索词。

正则表达式的A`var_dump`和术语显示了这一点：

```
@(?:.*?)((?:\w+\W+){0,10})(new|post)((?:\W*\w+\W+){0,10})@i

array
  0 => string 'new' (length=3)
  1 => string 'post' (length=4) 
```

**更新 3**

我曾经`Regex Coach`引导我完成匹配模式，似乎它在找不到匹配后回溯太多`(new|post)`。目标文本只是一个随机的 3 段 lorem ipsum。我想我需要为这项任务找到一个更好的正则表达式。

**更新 4**

使用`Once-Only`子模式可以解决问题。虽然我不知道它的细节，但我只是重新阅读了 PHP 手册并阅读了其中的一部分，`Once-Only`子模式有助于过多的回溯。这是新的正则表达式：

```
(?:.*?)((?>\w+\W+){0,10})('.implode('|', $terms).')((?:\W*\w+\W+){0,10}) 
```

但我仍然愿意为更好的正则表达式提供建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:10:27.810

如果您在达到回溯限制时遇到问题，您通常希望查看[仅一次的子模式](http://www.php.net/manual/en/regexp.reference.onlyonce.php)。

但是，在这种情况下，您的主要问题似乎是`(?:.*?)`被`(?:\w+\W+){0,10}`. 以字符串 'hello world!' 为例，暂时忽略`{0,10}`. 这将匹配两种模式，如下所示：

*   ''和'你好'
*   “h”和“你好”
*   “他”和“你”
*   'hel' 和 'lo'
*   “地狱”和“o”
*   “你好”和“世界！”
*   “你好 w”和“orld！”
*   “你好 wo”和“rld！”
*   “你好”和“ld！”
*   “你好世界”和“d！”

阻止这种冗余回溯的最简单方法是`\b`在子模式之后添加单词边界检查 ( ) `(?:.*?)`。这将减少这些潜在的匹配到

*   ''和'你好'
*   “你好”和“世界！”

**编辑：**这是一个为什么一次性子模式在这里不起作用的例子：

```
preg_replace('/(?>[a-z]{0,2})a/','x','bac') 
```

在本例中，我们期望结果为“xc”，但是子模式贪婪地匹配“ba”，然后从不回溯，因此错过了匹配。我们可以使模式不贪婪，但随后我们会得到结果“bxc”，因为它在匹配子模式的“”后永远不会回溯。

# magento - Magento 谷歌结账免运费

> ID：11536081
> 
> 赞同：0
> 
> 时间：2012-07-18T07:13:53.547
> 
> 标签：magento, google-checkout

我正在使用 magento 1.7.0.2 和 Google Checkout。当想要使用统一费率时，超过 75 美元的免费送货和 10% 的运费在 68 - 75 美元之间。

我如何在我的 magento 商店中实现这三个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:10:09.510

我进行了更多搜索并得到了解决方案，更改核心文件不是一个好主意，但它正在工作。您可以在发送谷歌结帐之前计算价格和费用。***在/app/code/core/Mage/GoogleCheckout/Model/Api/Xml/checkout.php***更改谷歌结帐的核心文件。

***转到第 579 行***并根据需要设置条件。在我的情况下，条件是：

```
*********************

$subTotal = Mage::getModel('checkout/cart')->getQuote()->getSubtotal();
            if($subTotal <=68.50){

            $xml .= <<<EOT
                <{$nodeName} name="{$title}">
                    <shipping-restrictions>
                        <allowed-areas>
                        {$allowedAreasXml}
                        </allowed-areas>
                    </shipping-restrictions>
                    <price currency="{$this->getCurrency()}">{$price}</price>
                </{$nodeName}>
EOT;
            }

            if(($subTotal > 68.50) && ($subTotal < 75)){
            $price = $subTotal*10/100;
            $xml .= <<<EOT
                <{$nodeName} name="{$title}">
                    <shipping-restrictions>
                        <allowed-areas>
                        {$allowedAreasXml}
                        </allowed-areas>
                    </shipping-restrictions>
                    <price currency="{$this->getCurrency()}">{$price}</price>
                </{$nodeName}>
EOT;
            }

            if($subTotal >=75){
            $price = 0.00;
            $xml .= <<<EOT
                <{$nodeName} name="{$title}">
                    <shipping-restrictions>
                        <allowed-areas>
                        {$allowedAreasXml}
                        </allowed-areas>
                    </shipping-restrictions>
                    <price currency="{$this->getCurrency()}">{$price}</price>
                </{$nodeName}>
EOT;
            }
        } 
```

* * *

现在刷新您的商店并使用 google checkout 付款。

# asp.net-mvc - 带有 EF 的 ASP.NET MVC 项目中复杂数据类型的组合框控件

> ID：11536086
> 
> 赞同：0
> 
> 时间：2012-07-18T07:14:05.523
> 
> 标签：asp.net-mvc, entity-framework, razor

在带有 EF 的 ASP.NET MVC 3 项目中，我试图弄清楚如何处理复杂的数据类型。

我有一个实体学生与物业学校。当用户创建或编辑实体学生时，我希望用户能够从数据库中的学校列表中选择学校。

我有以下型号：

```
public class TesterDB : DbContext
{
    public DbSet<School> Schools { get; set; }

    public DbSet<Student> Students { get; set; }
}    

[DataContract]
public class School
{
    public int ID { get; set; }

    public string Name { get; set; }
}

[DataContract]
public class Student
{
    public int ID { get; set; }

    public string Name { get; set; }

    public School School { get; set; }
} 
```

在学生控制器中创建方法：

```
 public ActionResult Create()
    {
        return View();
    } 

    [HttpPost]
    public ActionResult Create(Student student)
    {
        if (ModelState.IsValid)
        {
            db.Students.Add(student);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(student);
    } 
```

学生创建视图：

```
@model Tester.Models.Student
@{
     ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"   type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Student</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
     @Html.ActionLink("Back to List", "Index")
</div> 
```

知道如何在 Studnet 模型的创建视图中添加一个组合框，让我从数据库中的学校列表中选择一所学校

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:59:46.893

在您的 (get) create 方法中，您需要添加一个方法来提供 Schools 数据：

```
public ActionResult Create()
{
    ViewBag.SchoolId = new SelectList(db.Schools, "SchoolId", "Name");
    return View();
} 
```

那么在您看来，您需要呈现这些数据：

```
<fieldset> 
...
    <div class="editor-label">
        @Html.LabelFor(model => model.SchoolId, "School")
    </div>
    <div class="editor-field">
        @Html.DropDownList("SchoolId", String.Empty)
        @Html.ValidationMessageFor(model => model.SchoolId)
    </div>
...
</fieldset> 
```

这样您就可以在您的帖子中检索学校 ID 并将其应用于学生对象：

```
[HttpPost]
public ActionResult Create(Student student)
{
    if (ModelState.IsValid)
    {
        db.Students.Add(student);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }
    ViewBag.SchoolId = new SelectList(db.Schools, "SchoolId", "Name", student.SchoolId);
    return View(student);
} 
```

# java - 使所有按钮大小相同

> ID：11536089
> 
> 赞同：2
> 
> 时间：2012-07-18T07:14:14.663
> 
> 标签：java, swing

请看下面的代码

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class GUI extends JFrame
{
    private JButton open, process;
    private JLabel center;
    private JScrollPane scroll;
    private Box box;
    private IplImage image;

    public FirstGUI()
    {
        open = new JButton("Open Image");
        open.setPreferredSize(new Dimension(70,20));
        open.setMaximumSize(new Dimension(100,20));

        open.addActionListener(new OpenImageAction());
        process = new JButton("Process");
        process.setPreferredSize(new Dimension(100,20));
        process.setMinimumSize(new Dimension(100,20));
        process.addActionListener(new ProcessAction());
        System.out.println("Open Size: "+open.getSize()+"      Process size: "+process.getSize());

        box = new Box(BoxLayout.Y_AXIS);
        box.add(open);
        box.add(process);

        center = new JLabel();
        scroll = new JScrollPane(center);

        getContentPane().add(box,"West");
        getContentPane().add(scroll,"Center");

        this.setSize(300,300);
        this.pack();
        this.validate();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    public static void main(String[]args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

            new GUI();
        }
        catch(java.lang.Exception e)
        {
            JOptionPane.showMessageDialog(null,"GUI Error");
        }
    } 
```

我想让所有按钮的大小都一样。在这里，第一个比第二个宽。我需要相同的宽度和高度。如您所见，我已经使用了所有可用的方法，如 setPrefferedSize()、setMaximumSize()、setMinimumSize()，但它仍然无法正常工作。请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T07:34:32.677

这是使用`GridLayout`. 我还引入了一个附加功能`JPanel`，以便在`JFrame`调整大小时不会拉伸按钮，我为它选择了`GridBagLayout`，以便它将按钮面板垂直居中。肯定有其他方法可以解决您的问题。

您应该尽量避免的一件事是强制首选/最大/最小尺寸。将此委托给 L&F 和 LayoutManager 的。

如果你调用`pack()`a `JFrame`，那么之前设置它的大小是没有用的，因为`pack()`无论如何都会改变它。尝试调用`setVisible(true);`GUI 初始化的最后一行。

如果您想正确理解布局、定位、调整大小等在 Swing 中的工作原理，我强烈建议您阅读[LayoutManager 的教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

```
import java.awt.BorderLayout;
import java.awt.GridBagLayout;
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class GUI extends JFrame {
    private JButton open, process;
    private JLabel center;
    private JScrollPane scroll;
    private JPanel box;

    public GUI() {
        open = new JButton("Open Image");
        // open.addActionListener(new OpenImageAction());
        process = new JButton("Process");
        // process.addActionListener(new ProcessAction());

        box = new JPanel(new GridLayout(2, 1));
        box.add(open);
        box.add(process);
        JPanel west = new JPanel(new GridBagLayout());
        west.add(box);

        center = new JLabel("Some center label");
        scroll = new JScrollPane(center);

        getContentPane().add(west, BorderLayout.WEST);
        getContentPane().add(scroll);

        this.pack();
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (java.lang.Exception e) {
            JOptionPane.showMessageDialog(null, "GUI Error");
        }
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new GUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:18:17.133

您可以创建自己的布局管理器来计算所有按钮的最大尺寸（可能来自首选尺寸值）并基本上分配相同的尺寸（通过 setSize）。您当然还必须提供位置信息，但这提供了提供垂直和水平布局选项的优势

**更新**

这是我使用的实现，我不相信它，你可以看到它是由 Santhosh Kumar 创作的。我发现它非常有用，因为它不仅将所有按钮的大小调整为相同的大小，而且还提供了对齐功能。您可以在此处找到原始帖子[http://www.jroller.com/santhosh/entry/how_do_you_layout_command](http://www.jroller.com/santhosh/entry/how_do_you_layout_command)

```
/**
* @author Santhosh Kumar - santhosh@in.fiorano.com
*/
public class ButtonLayout implements LayoutManager, SwingConstants {

    protected static Logger logger = Logger.getLogger(ButtonLayout.class);

    private int gap;
    private int alignment;

    public ButtonLayout() {

        setAlignment(RIGHT);
        setGap(2);

    }

    public ButtonLayout(int alignment, int gap) {
        setGap(gap);
        setAlignment(alignment);
    }

    public ButtonLayout(int gap) {
        this(RIGHT, gap);
    }

    public int getAlignment() {
        return alignment;
    }

    public void setAlignment(int alignment) {
        this.alignment = alignment;
    }

    public int getGap() {
        return gap;
    }

    public void setGap(int gap) {
        this.gap = gap;
    }

    private Dimension[] dimensions(Component children[]) {
        int maxWidth = 0;
        int maxHeight = 0;
        int visibleCount = 0;
        Dimension componentPreferredSize;

        for (int i = 0, c = children.length; i < c; i++) {

            if (children[i].isVisible()) {

                componentPreferredSize = children[i].getPreferredSize();
                maxWidth = Math.max(maxWidth, componentPreferredSize.width);
                maxHeight = Math.max(maxHeight, componentPreferredSize.height);
                visibleCount++;

            }

        }

        int usedWidth = 0;
        int usedHeight = 0;

        switch (alignment) {

            case LEFT:
            case RIGHT:
                usedWidth = maxWidth * visibleCount + gap * (visibleCount - 1);
                usedHeight = maxHeight;
                break;

            case TOP:
            case BOTTOM:
                usedWidth = maxWidth;
                usedHeight = maxHeight * visibleCount + gap * (visibleCount - 1);
                break;

        }

        return new Dimension[]{
                            new Dimension(maxWidth, maxHeight),
                            new Dimension(usedWidth, usedHeight),};
    }

    public void layoutContainer(Container container) {

        Insets insets = container.getInsets();
        int width = container.getWidth() - (insets.left + insets.right);
        int height = container.getHeight() - (insets.top + insets.bottom);

        Component[] children = container.getComponents();
        Dimension dim[] = dimensions(children);

        int maxWidth = dim[0].width;
        int maxHeight = dim[0].height;
        int usedWidth = dim[1].width;
        int usedHeight = dim[1].height;

        for (int i = 0, c = children.length; i < c; i++) {

            if (children[i].isVisible()) {

                switch (alignment) {
                    case LEFT:
                        children[i].setBounds(
                                        insets.left + (maxWidth + gap) * i,
                                        insets.top,
                                        maxWidth,
                                        maxHeight);
                        break;
                    case TOP:
                        children[i].setBounds(
                                        insets.left + ((width - maxWidth) / 2),
                                        insets.top + (maxHeight + gap) * i,
                                        maxWidth,
                                        maxHeight);
                        break;
                    case RIGHT:
                        children[i].setBounds(
                                        width - insets.right - usedWidth + (maxWidth + gap) * i,
                                        insets.top,
                                        maxWidth,
                                        maxHeight);
                        break;
                    case BOTTOM:
                        children[i].setBounds(
                                        insets.left + (maxWidth + gap) * i,
                                        height - insets.bottom - usedHeight + (maxHeight + gap) * i,
//                                      insets.top,
                                        maxWidth,
                                        maxHeight);
                        break;
                }

            }

        }

    }

    public Dimension minimumLayoutSize(Container c) {
        return preferredLayoutSize(c);
    }

    public Dimension preferredLayoutSize(Container container) {

        Insets insets = container.getInsets();

        Component[] children = container.getComponents();
        Dimension dim[] = dimensions(children);

        int usedWidth = dim[1].width;
        int usedHeight = dim[1].height;

        return new Dimension(
                        insets.left + usedWidth + insets.right,
                        insets.top + usedHeight + insets.bottom);
    }

    public void addLayoutComponent(String string, Component comp) {
    }

    public void removeLayoutComponent(Component c) {
    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T07:36:17.503

1.  为两个按钮设置相同的尺寸。
2.  设置两个按钮的最大和最小尺寸。现在它只有第一个的最大值和第二个的最小值。它会工作的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-18T07:21:05.517

也许是因为尺寸不一样`setPreferredSize()`？

```
 open.setPreferredSize(new Dimension(70,20));

    process.setPreferredSize(new Dimension(100,20)); 
```

# php - 使用 array_map/array_walk 函数的 PHP 多维数组转换

> ID：11536093
> 
> 赞同：2
> 
> 时间：2012-07-18T07:14:24.887
> 
> 标签：php, multidimensional-array

我有以下多维数组：

```
$userList = array(
    0 => array('id' => 1000, 'first_name' => 'John', 'last_name' => 'Smith'),
    1 => array('id' => 1001, 'first_name' => 'Sam', 'last_name' => 'Johnson'),
); 
```

我想将它转换为数组，如：

```
$userData = array(
    1000 => 'John Smith',
    1001 => 'Sam Johnson',
); 
```

对我来说，如何使用 foreach 循环实现这一点非常明显，但我想知道是否可以使用 array_map 或 array_walk 等 PHP 数组函数来实现这一点。回调函数请使用 PHP 5.3。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:20:15.883

由于这些函数只对数组*values*起作用，让它们在新数组中设置*键*有点尴尬。一种方法是：

```
$arr = array_combine(
    array_map(function ($i) { return $i['id']; }, $arr),
    array_map(function ($i) { return "$i[first_name] $i[last_name]"; }, $arr)
); 
```

这是一个`foreach`更合适的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:22:34.233

函数式编程的一个小技巧。

```
$arr = array_reduce(
  $arr,
  function ($result, $item) {
    $result[$item['id']] = $item['first_name'] . ' ' . $item['last_name'];
    return $result;
  },
  array()
); 
```

见[`array_reduce()`](http://php.net/array-reduce)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:32:25.653

代码：

```
<?php

function convertArray ( $array ) {

    $newUserList = array();
    foreach ( $array as $value ) {
        $newUserList[ $value[ 'id' ] ] = $value[ 'first_name' ] . ' ' . $value[ 'last_name' ];
    }

    return $newUserList;

}   

$userList = array(
    0 => array( 'id' => 1000, 'first_name' => 'John', 'last_name' => 'Smith' ),
    1 => array( 'id' => 1001, 'first_name' => 'Sam', 'last_name' => 'Johnson' )
);

$newUserList = convertArray( $userList );

?> 
```

输出：

```
Array
(
    [1000] => John Smith
    [1001] => Sam Johnson
) 
```

# android - 启动应用程序时未选择选项卡

> ID：11536094
> 
> 赞同：0
> 
> 时间：2012-07-18T07:14:26.227
> 
> 标签：android

我有一项活动，有五个标签。默认情况下，当我启动应用程序时，会选择第一个选项卡（索引为 0）。

我希望它应该像我启动应用程序时一样工作，不应该选择五个选项卡中的任何一个。当我单击特定选项卡时，它应该根据所选选项卡显示 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:16:00.907

使初始化例程选择选项卡之一。

# algorithm - 字母映射到值：如何找到加起来等于给定值的实际单词？

> ID：11536097
> 
> 赞同：1
> 
> 时间：2012-07-18T07:14:40.907
> 
> 标签：algorithm, list, word

我遇到了一个 G+ 帖子，其中有人分享了：

```
If
  A B C D E F G H I J  K  L  M  N  O  P  Q  R  S  T  U  V  W  X  Y  Z

Equals
  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26

Then
  K + N + O + W + L + E + D + G + E = 96% 
  H + A + R + D + W + O + R + K     = 98%

But
  A + T + T + I + T + U + D + E     = 100% 
```

就这么多，为了它的乐趣，忽略百分比技巧，把剩下的谈话留给 G+ 评论。

但我问自己：从给定的单词列表（一组固定的 n 个单词）中找到所有加起来为 100 的单词的最佳方法（算法）是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:22:11.407

我认为直接的方法会很好——它是 O( *n* )：

1.  创建一个将每个字母与点值相关联的哈希表
2.  循环遍历列表。对于每个单词，将与哈希表中的字母关联的数字的值相加。如果总和为 100，则打印该单词或以某种方式将其标记为已找到（添加到新列表或其他内容）...

（我想，如果你说“单词”可以任意长，你可能会争论 O( *n )；尽管如果单词列表是某种语言中单词的子集，这不是问题。如果你有**m*是一个单词中的最大字母数，那么算法是 O( *nm* )。不过，在某些时候你将不得不“查看”每个字母和每个单词，所以我无法想象还有更多省时算法。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:26:34.247

[这里](https://stackoverflow.com/questions/2065553/python-get-all-numbers-that-add-up-to-a-number)讨论了一个类似的问题。但是，您的具体问题提出了一种更简单的方法。由于单词列表中的单词数量是有限的，并且总是小于最长单词长度的字符排列数，因此最好按照以下方式进行：

假设我们有一个`charToNum`函数，它将一个字符映射到相应的数字：

```
for each word in wordlist
  sum := 0
  for each character in word
    sum := sum + charToNum(character)
    if (sum > 100)
      break // Correct result no longer possible
  if (sum == 100)
    Add the word to the result set 
```

# file-io - 通过 vb.net 比较数据集

> ID：11536099
> 
> 赞同：0
> 
> 时间：2012-07-18T07:14:44.760
> 
> 标签：file-io, dataset, vb.net-2010

dasaset (ds) 包含类似这样的值，将两个数据集合并，并将电话号码从数据集写入记事本，这不等于 dataset1。但是我在记事本中得到结果，就像电话号码一样，这两个数据集都相等

```
dataset
-------
91  9942321400
91  9865015695
91  9677031515
91  9994828285
91  9688104229

dataset1 values
----------------
91  9942321400
91  9865015695
91  9677031515

expected result in notepad
--------------------------
91  9994828285
91  9688104229

my code
-------
Dim i As Integer = 0
        Dim toggle As Boolean = False
        Do While (i <= ds1.Tables(0).Rows.Count - 1)
            Dim phone As String = ds1.Tables(0).Rows(i).Item(1).ToString
            Dim j As Integer = 0
            Do While (j <= Ds.Tables(0).Rows.Count - 1)
                Dim dumphone As String = Ds.Tables(0).Rows(j).Item(4).ToString
                If dumphone <> phone Then toggle = True 'This will set your flag to add the output.
                j = (j + 1)
            Loop
            'After we're done checking if there's a match, we decided to add it to the output.
            If toggle = True Then

                TextBox1.AppendText(a.ToString & "|" & b.ToString & "|" & c.ToString & "|" & d.ToString & "|" & phone.ToString & "|" & e1.ToString & "|" & f.ToString & "|" & g.ToString & "|" & h.ToString & "|" & i1.ToString & "|" & j1.ToString & "|" & k.ToString & "|" & l.ToString & "|" & m.ToString & "|" & n1.ToString & "|" & o.ToString & "|" & p.ToString & "|" & q.ToString & "|" & r.ToString & "|" & s.ToString & "|" & t.ToString & "|" & u.ToString & "|" & v.ToString & "|" & w.ToString & "|" & x.ToString)
                sw.WriteLine(TextBox1.Text)
                TextBox1.Text = ""
                toggle = False 'Reset the flag for the next value
            End If
            i = (i + 1) 'Move to the next value to check against.
        Loop

but am getting the output in note pad like this
------------------------------------------------
91  9942321400
91  9865015695
91  9677031515 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:15:08.927

我试过这种方式，我得到了你想要的结果......

```
For i As Integer = 0 To dataset.Tables(0).Rows.Count - 1
            Dim found As Boolean = False
            For j As Integer = 0 To dataset1.Tables(0).Rows.Count - 1
                If dataset.Tables(0).Rows(i)(0).ToString = dataset1.Tables(0).Rows(j)    (0).ToString Then
                    found = True
                End If
            Next
            If found = False Then
                'here you are getting the right result in each loop
                'in this example i'm showing the result in a textbox
                'just change the instruction and write them in your note pad or wherever you want to
                MsgBox(dataset.Tables(0).Rows(i)(0).ToString)
            End If
        Next 
```

# iphone - Google Analytics GANTracker - 如何在 IOS 应用程序中使用 setCustomVariable？

> ID：11536104
> 
> 赞同：0
> 
> 时间：2012-07-18T07:14:57.873
> 
> 标签：iphone, ios, google-analytics, analytics

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {    

  [[GANTracker sharedTracker] startTrackerWithAccountID:kAnalyticsAccountId
                                           dispatchPeriod:kGANDispatchPeriodSec
                                                 delegate:nil];
    NSError *error;
    NSCalendar * calendar = [NSCalendar currentCalendar];
    NSDateComponents * components = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit | NSSecondCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit
                                                fromDate:[NSDate date]];
    NSString * stringTime = [NSString stringWithFormat:@"%d:%d",components.hour, components.minute];

    if (![[GANTracker sharedTracker] setCustomVariableAtIndex:1
                                                         name:@"TIME"
                                                        value:stringTime
                                                    withError:&error]) {
        NSLog(@"error in setCustomVariableAtIndex");
    }

  [self.window addSubview:navigationController.view];  
  [self.window makeKeyAndVisible];
   return YES;

 } 
```

由于这些值是 URL 编码的，因此 16:30 在 GA 站点中变为 16%3A30。我希望它按原样显示。即，16:30。我该怎么做呢？我从其他控制器设置的自定义变量也没有得到更新。例如：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIDevice *device = [UIDevice currentDevice];

    NSError *errorMsg;

    if (![[GANTracker sharedTracker] setCustomVariableAtIndex:2
                                                         name:@"DEVICE"
                                                        value:device.model
                                                    withError:&errorMsg]) {
        NSLog(@"error in setCustomVariableAtIndex2");
    }
} 
```

这不会得到更新。我知道数据需要一天的时间才能反映在网站上。但只有自定义变量（键 1）有数据。其他键显示“此视图没有数据”，尽管我使用的是索引 2（请参阅上面的代码）。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:36:40.900

> 由于这些值是 URL 编码的，因此 16:30 在 GA 站点中变为 16%3A30。我希望它按原样显示。即，16:30。我该怎么做呢？

```
NSString *testme = @"16%3A30";
testme = [testme stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"testme = %@", testme); //16:30 
```

# android - 如何将我的动态布局添加到 ListView？

> ID：11536107
> 
> 赞同：5
> 
> 时间：2012-07-18T07:15:13.660
> 
> 标签：android, listview, layout, dynamic

我创建了一个动态线性布局，我想将这些布局添加到 ListView。代码如下：

动态布局代码：

```
import android.content.Context;
import android.widget.LinearLayout;
import android.widget.TextView;

public class DynamicContentLayout extends LinearLayout{
    private Context context;
    private int linearLayoutMargin;

    public DynamicContentLayout(Context context) {
        super(context);
        this.context = context;
        linearLayoutMargin = (int) context.getResources().getDimension(R.dimen.xlarge_margin_padding_fixed);
        initViews();
    }

    private void initViews() {
        LinearLayout.LayoutParams layout_lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        layout_lp.setMargins(linearLayoutMargin, linearLayoutMargin, linearLayoutMargin, linearLayoutMargin);
        this.setLayoutParams(layout_lp);
        this.setOrientation(LinearLayout.VERTICAL);
        this.addView(headerTitle("My Text"));

    }

    private TextView headerTitle(String title) {
        TextView txtView = new TextView(context);
        txtView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        txtView.setPadding(6, 6, 6, 6);
        txtView.setText(title);
        txtView.setBackgroundColor(context.getResources().getColor(R.color.red));
        txtView.setTextColor(context.getResources().getColor(R.color.white));
        return txtView;
    }

} 
```

列表适配器代码：

```
import java.util.ArrayList;
import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

public class ListViewAdapter extends ArrayAdapter<DynamicContentLayout> {

    private Context context;
    private ArrayList<DynamicContentLayout> layoutList = null;

    public ListViewAdapter(Context context, int textViewResourceId, ArrayList<DynamicContentLayout> layoutList) {
        super(context, textViewResourceId, layoutList);
        this.context = context;
        this.layoutList = layoutList;
    }

    @Override
    public int getCount() {
        return layoutList.size();
    }

    @Override
    public DynamicContentLayout getItem(int position){
        return layoutList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        DynamicContentLayout entry = (DynamicContentLayout) layoutList.get(position);
        convertView = (View) entry;
        return convertView;
    }
} 
```

最后是我设置适配器的 MainActivity 中的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ListView listView = (ListView) findViewById(R.id.listView);
    ArrayList<DynamicContentLayout> contents = new ArrayList<DynamicContentLayout>();
    contents.add(new DynamicContentLayout(getApplicationContext()));
    contents.add(new DynamicContentLayout(getApplicationContext()));
    contents.add(new DynamicContentLayout(getApplicationContext()));
    ArrayAdapter<DynamicContentLayout> arrayAdapter = new ArrayAdapter<DynamicContentLayout>(getApplicationContext(), android.R.layout.simple_list_item_1, contents);
    listView.setAdapter(arrayAdapter);
    arrayAdapter.notifyDataSetChanged();
} 
```

Xml 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
>

    <ListView
        android:id="@+id/listView"
        android:layout_width="fill_parent"
        android:background="@color/blue"
        android:layout_height="fill_parent"
        android:alwaysDrawnWithCache="true"
        android:clickable="true"
        android:layout_alignParentTop="true"
        android:divider="@color/grey"
        android:drawingCacheQuality="auto"
        android:fastScrollEnabled="true"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:scrollbars="none" >
    </ListView>

</RelativeLayout> 
```

现在，当我运行时，没有报告错误。但我看不到 listItems 布局。我只能看到班级的名称。例如：“com.myexample.dynamicontentoverview.DynamicContentLayout@405193d0”作为 listItem 的行而不是 Layout。

我还想补充一点。我不能使用 XMl 布局，因为我的 DynamicLinearLayout 中的视图可以增加/减少某些行。

请提出一些建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:35:22.020

您完全错误地理解了自定义 listViews 的概念。

您应该在 xml 布局中定义您的自定义布局。您的阵列适配器的类型不应该是布局。它应该是您尝试填充 listView 的对象类型。

查看本[教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)以更好地了解您应该执行的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:20:18.720

您正在`ArrayAdapter`用作您的适配器`ListView`而不是您自己的`ListViewAdapter`扩展`ArrayAdapter< DynamicContentLayout>`

您现在看到的是您的对象 toString 表示，因为这就是 ArrayAdapter 所做的。

# iphone - 如何解决推送通知中出现此错误

> ID：11536114
> 
> 赞同：0
> 
> 时间：2012-07-18T07:15:38.490
> 
> 标签：iphone, objective-c

当从终端完成某些任务时，它会给我消息连接被外国主机关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:17:52.453

如果您想测试您的证书，请使用 openssl 的客户端命令。就像是

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195 -prexit -cert Cert.pem -debug -showcerts -CAfile CA.pem 
```

显然，在需要的地方填写您的证书文件名。

# php - 在 MySQL/PHP 中排序行的正确日期和时间格式是什么？

> ID：11536118
> 
> 赞同：0
> 
> 时间：2012-07-18T07:16:01.063
> 
> 标签：php, mysql, sql, datetime, sql-order-by

我正在尝试`SELECT`从 MySQL 表中获取行并按日期和时间对它们进行排序：

```
mysql_query("SELECT * FROM `user` ORDER BY post_date DESC"); 
```

`post_date`格式如下： 2012-07-18 01:52:57 **am (omd h:i:sa)**。我认为这是正确的简单日期格式，但排序不准确。

防爆输出：

1.) 2012-07-18 12:41:07am

2.) 2012-07-18 12:26:03am

3.) 2012-07-18 01:52:57am

如您所见，1:52 的最新帖子应位于顶部，但位于底部。我到底做错了什么，正确的日期和时间格式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:18:11.933

我认为它正在处理 12>1 ..最好使用 24 小时格式而不使用 am/pm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:18:13.217

您是否存储`post_date`为字符串？有一种`datetime`类型（也`timestamp`可能是发布日期之类的首选）。如果您可以更改为这些类型，它将更好地工作。

否则，您将不得不使用以下方式将它们存储在 php 中`strtotime`：

```
$results = array();
while ($row = mysql_fetch_assoc($result)) {
   $results[strtotime($row['post_date'])] = $row;
}
ksort($results); 
```

这是最简单的解决方案，但它也要求没有相同的时间戳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:20:36.057

```
SELECT * FROM `user` 
ORDER BY cast(post_date as datetime) DESC 
```

# c - 在单调递增然后递减的序列中找到一个数字

> ID：11536123
> 
> 赞同：10
> 
> 时间：2012-07-18T07:16:24.153
> 
> 标签：c, algorithm, binary-search

可以在 O(log n) 中找到单调增加然后单调减少的序列中的最大值或最小值。

但是，如果我想检查一个数字是否存在于这样的序列中，这也可以在 O(log n) 中完成吗？

我不认为这是可能的。考虑这个例子：1 4 5 6 7 10 8 3 2 0。

在这个例子中，如果我需要查找序列是否包含'2'，我没有任何条件将搜索空间划分为原始搜索空间的一半。在最坏的情况下，它将是 O(n)，因为当我们尝试搜索 2 时，您需要检查两半。

我想知道，如果这个搜索在 O(log n) 时间内完成？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T07:20:08.557

如您所述，您可以在 O(logn) 中找到最大值（及其位置）。然后你可以在每个部分进行二进制搜索，这也是 O(logn)。

在上面的示例中，您在位置 5 处找到最大值 10。然后在子序列 [0..5] (1, 4, 5, 6, 7, 10) 中进行二进制搜索。由于未找到 2，因此您继续在另一部分 (10, 8, 3, 2, 0) 中进行二进制搜索。

要在 O(logn) 中找到最大值：查看中心的两个元素：7 < 10。所以我们仍然处于递增部分，必须在序列的右半部分寻找最大值：(10, 8 , 3, 2, 0)。看 8 和 3 并继续左侧部分 (10, 8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T17:08:09.957

我记得对元素按递增然后递减排序的数组的最佳搜索是斐波那契搜索算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-29T18:21:50.500

这是python中的草图。简而言之，我们的目标是找到一个与递增和递减区域接壤的元素（我们检查两个条件来检查相邻元素）。我们像标准的二分搜索一样不停地跳跃，直到找到这个元素。希望有帮助。

```
def get_max(arr):
    if len(arr) == 1:
         return arr[0]
    if len(arr) in [0,2]:
        return None
    left, right = 0, len(arr) - 1
    while left <= right:
        mid = (left+right) // 2
        #increasing region
        if arr[mid+1] >  arr[mid] and arr[mid] > arr[mid-1]:
            left = mid + 1
        #decreasing region
        elif arr[mid+1] < arr[mid] and arr[mid] < arr[mid-1]:
            right = mid - 1
        elif arr[mid+1] < arr[mid] and arr[mid-1] > arr[mid]:
            return arr[mid-1]
        else:
            return arr[mid]
    return -1 
```

# delphi - 是否有任何 .pas 文件（Delphi 或 Pascal）解析器？

> ID：11536126
> 
> 赞同：5
> 
> 时间：2012-07-18T07:16:39.113
> 
> 标签：delphi, parsing

我需要解析 Delphi .pas 文件以使用具有读/写能力的类。添加/修改/删除字段、属性、方法等。知道如何实现吗？实现不一定在Delphi中，脚本语言也是允许的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T07:52:11.353

Jacob Thurman的[Castalia Delphi Parser目前托管在 GitHub 上。](https://github.com/jacobthurman/Castalia-Delphi-Parser)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:48:07.947

CnWizards 有内置的语法高亮，所以他们也使用一些解析器，但我不记得具体是哪个。您可以在[https://github.com/cnpack/cnwizards查看他们的来源](https://github.com/cnpack/cnwizards)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:58:12.767

[PasParse](https://github.com/Turbo87/PasParse)对你有好处！优秀的 (C#) [DGrok](http://dgrok.excastle.com/)的 Delphi 端口。

德尔福2007级。

# php - 在 php 中，我应该在通常返回数组的方法中返回 false、null 还是空数组？

> ID：11536128
> 
> 赞同：22
> 
> 时间：2012-07-18T07:16:40.813
> 
> 标签：php, methods, return-value

我找到了几个对此的回应，但没有一个与 PHP（这是一种极其弱类型的语言）有关：

对于*PHP*，在通常会返回数组但发生故障的方法中返回 false、null 或空数组是否合适？

换句话说，如果另一个开发人员加入我的项目，他们会期望看到什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-18T07:26:22.603

数组是事物的集合。一个空数组表示*“一切正常，该集合中什么都没有”*。如果你真的想发出**错误**信号，你应该返回`false`。由于 PHP 是动态类型的，因此很容易严格或松散地检查返回值，具体取决于您的需要：

```
$result = getCollection();

if (!$result)           // $result was false or empty, either way nothing useful
if ($result === false)  // an actual error occurred
if ($result)            // we have an array with content 
```

*在特殊*情况下也有错误报告的*例外*情况。这实际上取决于功能的职责和错误的严重程度。如果函数的角色允许响应“empty collection”和“nope”相等，上面的可能没问题。但是，如果定义的函数必须始终返回一个集合（即使它是空的）并且在某些情况下它不能，那么抛出异常可能比返回更合适。*`false`*

 ** * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-18T08:36:54.177

我强烈反对返回混合类型的返回值。我认为这是一个很大的问题，所以我写了一篇关于[不返回混合类型值](http://www.martinstoeckli.ch/php/php.html#mixedReturnType)的小文章。

要回答您的问题，请返回一个空数组。下面你可以找到一个小例子，为什么返回其他值会导致问题：

```
// This kind of mixed-typed return value (boolean or string),
// can lead to unreliable code!
function precariousCheckEmail($input)
{
  if (filter_var($input, FILTER_VALIDATE_EMAIL))
    return true;
  else
    return 'E-Mail address is invalid.';
}

// All this checks will wrongly accept the email as valid!
$result = precariousCheckEmail('nonsense');
if ($result == true)
  print('OK'); // -> OK will be given out

if ($result)
  print('OK'); // -> OK will be given out

if ($result === false)
  print($result);
else
  print('OK'); // -> OK will be given out

if ($result == false)
  print($result);
else
  print('OK'); // -> OK will be given out 
```

希望这有助于防止一些误解。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T07:19:22.360

就我自己而言，我通常更喜欢返回一个空数组，因为如果函数总是返回一个数组，那么将它与 PHP 的数组函数和 foreach 一起使用是安全的（它们将接受空数组）。如果返回 null 或 false，则必须在将结果传递给数组函数之前检查结果的类型。

如果您需要区分方法执行正确但没有找到任何结果的情况，以及方法发生错误的情况，那么这就是异常的来源。在前一种情况下，返回一个空数组是安全的. 在后者中，仅返回一个空数组不足以通知您发生错误的事实。但是，如果您返回的不是数组，那么您将不得不在调用代码中处理它。抛出异常使您可以在适当的错误处理程序中处理其他地方的错误，并允许您将消息和代码附加到异常以描述失败发生的原因。

如果我们没有找到任何感兴趣的东西，下面的伪代码将简单地返回一个空数组。但是，如果在处理我们返回的内容列表时出现问题，则会引发异常。

```
method getThings () {
    $things = array ();
    if (get_things_we_are_interested_in ()) {
        $things [] = something_else ();
    } 
    if (!empty ($things)) {
        if (!process_things ($things)) {
            throw new RuntimeExcpetion ('Things went wrong when I tried to process your things for the things!');
        }
    }
    return $things;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-01-07T15:31:23.303

这是一个现代答案，可能自 1960 年代以来一直有效。

PHP 的早期版本（PHP 4 之前）中的一些糟糕的设计选择使许多 PHP 开发人员接触到了一直很糟糕的约定。幸运的是，PHP 5 来来去去——它帮助引导许多 PHP 开发人员走上“正确的道路”。

PHP 7 现在看到了经历 PHP 5 阶段的好处——它是现有执行速度最快的脚本语言之一。

*   这使得 PHP 7 成为现有最快和最强大的脚本语言之一成为可能。

自 PHP 第 4 版以来，PHP 核心开发人员为逐步完善 PHP 语言付出了巨大的努力。许多事情仍然存在，因为我们仍然希望有*一些*向后兼容性。

**错误时不要返回*false***

> *如果您的函数被命名为类似`isEverythingFine()`.*

`false`一直是返回错误的错误值。您仍然在 PHP 文档中看到它的原因是向后兼容。

1.  这将是不一致的。在您的函数应该返回布尔值`true`或的情况下，您会返回什么错误`false`？

2.  如果你的函数应该返回布尔值以外的东西，那么你强迫自己编写代码来处理类型检查。由于许多人不进行类型检查，因此 PHP 操作码编译器也被迫编写也进行类型检查的操作码。*你得到双重类型检查！*

**你*可以*返回 null**

`null`大多数脚本语言都为其数据类型中的值做出了有效的规定。理想情况下，您甚至不使用该值类型 - 但如果您不能抛出异常，那么我更喜欢`null`. 它是 PHP 中所有数据类型的有效“值”——即使它在 PC 内部不是有效值。

对于计算机/CPU 而言，最理想的情况是整个值位于单个 1、2、4 或 8 字节的内存“单元”中。这些值大小对于所有本机值类型都是通用的。

如果允许值是`null`，则必须将其编码在单独的内存单元中，并且每当计算机需要将值传递给函数或返回它们时，它必须返回两个值。一个包含`isNull`，另一个用于值。

**您*可以*根据类型返回一个特殊值**

这并不理想，因为

*   如果您的函数应该返回一个整数，则返回 -1。
*   如果您的函数应该返回一个字符串

**你*应该*抛出异常**

异常与大多数 CPU 的内部工作方式相匹配。它们有一个专用的内部标志来声明发生了异常事件。

它是高效的，即使不是这样，在正常的非错误情况下我们也不会有很多额外的工作，这会带来巨大的好处。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-18T07:19:54.987

这取决于情况和错误的严重程度，但一个好的（而且经常被忽视的）选择是[抛出异常](http://php.net/manual/en/language.exceptions.php)：

```
<?php
function inverse($x) {
    if (!$x) {
        throw new Exception('Division by zero.');
    }
    else return 1/$x;
}

try {
    echo inverse(5) . "\n";
    echo inverse(0) . "\n";
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} 
```

这将确保您的函数不会静默失败，并且不会发现错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-13T12:43:02.967

我假设你的方法的返回类型是数组，所以只有在执行正常但没有找到结果的情况下才应该返回一个空数组。

如果发生错误，您应该抛出异常。这应该是处理错误的首选方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T07:19:34.533

不管你喜欢哪个，尽管我建议一个空数组是有充分理由的。您不必先检查类型！

```
<?php
function return_empty_array() {
    return array();
}

$array = return_empty_array();

// there are no values, thus code within doesn't get executed
foreach($array as $key => $value) {
    echo $key . ' => ' . $value . PHP_EOL;
}
?> 
```

在任何其他情况下，如果您返回 false 或 null，您将在 foreach 循环中收到错误。

这是一个微小的差异，尽管在我看来是一个很大的差异。我不想检查我得到了什么类型的值，我想假设它是一个数组。如果没有结果，那么它是一个空数组。

无论如何，就我而言，没有返回空值的“默认值”。原生 PHP 函数以其返回的非常不同的值让我惊叹不已。有时为假，有时为空，有时为空对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-18T07:21:02.043

如果确实存在问题，那么您应该引发错误，否则如果不满足条件等，则返回一个空白数组。*

# android - 安卓自定义标志

> ID：11536130
> 
> 赞同：0
> 
> 时间：2012-07-18T07:16:43.793
> 
> 标签：android, flags

我目前正在开发一个具有服务和活动的应用程序。他们更改了一些文件，我想保存他们中的哪一个进行了最后一次更改。除了再次写入文件之外还有其他方法吗？我可以创建一个自定义标志，如 android 中已经定义的标志，如 RINGER_MODE_CHANGED_ACTION？

**编辑：** 我不想使用 SharedPreferences，我真正想学习的是如果可能的话在操作系统中创建自定义标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:21:19.807

您可以使用 Android SharedPreferences 来存储上次更改的文件。[这](http://www.rominirani.com/android-preferences-tutorial/)是帮助您开始使用 SharedPreferences 的教程。

# grails - 如何停止在终端上收到 DEBUG 消息？

> ID：11536134
> 
> 赞同：0
> 
> 时间：2012-07-18T07:17:19.577
> 
> 标签：grails

```
DEBUG: Resource: /fancybox/fancybox-y.png - disposition image - rendering disposition defer

DEBUG: Resource: /fancybox/fancy_title_over.png - disposition image - rendering disposition 
defer

DEBUG: Resource: /images/shadow.png - disposition image - rendering disposition defer

DEBUG: Resource: /js/jquery-ui/themes/cupertino/images/ui-bg_highlight-
hard_100_f2f5f7_1x100.png - disposition image - rendering disposition defer
DEBUG: Resource: /js/jquery-ui/themes/cupertino/images/ui-bg_highlight-soft_100_deedf7_1x100.png - disposition image - rendering disposition defer

DEBUG: Resource: /js/jquery-ui/themes/cupertino/images/ui-bg_glass_80_d7ebf9_1x400.png - disposition image - rendering disposition defer

DEBUG: Resource: /js/jquery-ui/themes/cupertino/images/ui-bg_glass_100_e4f1fb_1x400.png - disposition image - rendering disposition defer 
```

我想停止得到这个

> **调试**消息

每次我浏览我的应用程序时。有什么需要检查的东西来阻止这种情况吗？对此问题的任何解决方案将不胜感激。谢谢！提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:30:08.767

在您使用的任何记录器中将记录器级别配置设置为来自 DEBUG 的 INFO（请参阅[通用日志级别](http://www.allapplabs.com/log4j/log4j_levels.htm)）。如果是 grails 内置日志记录，您可能需要检查 log4j 部分中的 Config.groovy 文件

# c# - Convert a completed project to a DLL

> ID：11536140
> 
> 赞同：26
> 
> 时间：2012-07-18T07:17:26.150
> 
> 标签：c#, winforms, dll

How can I convert a completed C# project to a DLL, in order to use it in other projects?

I have Googled but lots of results say to open the Class Library, write your code there, then Build Solution and everything will be ok.

But my question is: how can I convert a completed project to a DLL? The project can include lots of Forms etc.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-18T07:18:45.663

if your code is complete, you need to create a Class project out of it, if you already have a project then only transfer the useful code to the class project for reuse in other projects

or change the [`Output Type`](https://thuruinhttp.files.wordpress.com/2014/02/image2.png) to class library, you can find that in your project properties under the tab application

![Output type](../Images/2328e4ffa7158074a1ceb498e0b34fdc.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-18T07:23:33.507

If you are using VS2010, go to your solution in Visual Studio,

1.  Click the 'Project' tab
2.  Select 'Project Properties' down at the bottom of the menu
3.  Now in the 'Properties' window click 'Application'. This should show you a menu
4.  On this menu, select the 'Output type' as 'Class Library'

Now when you compile the project you will get your output as a DLL (.dll) in the relevant bin folder.

I hope this helps.

# extjs4 - ExtJS 中的 me.dokedItems 错误

> ID：11536141
> 
> 赞同：10
> 
> 时间：2012-07-18T07:17:26.447
> 
> 标签：extjs4, firebug

我试图测试我在 firebug 控制台上编写的脚本，我认为脚本很简单。当我运行脚本时，我得到了这个错误 me.dokedItems is undefined。这是我从 Firefox 的 firebug 控制台运行的代码：

```
Ext.create('Ext.window.Window',{
    title : 'Login',
    width : 400,
    height : 500,
    initComponent : function() {
        var me = this;

        var usernameField = Ext.create('Ext.form.field.Text',{
            fieldLabel : 'Net ID',
            allowBlank : false,
            labelWidth : 150,
            width : 150,
            emptyText : 'Net ID'
        });

        var passField = Ext.create('Ext.form.field.Text',{
            fieldLabel : 'Password',
            allowBlank : false,
            labelWidth : 150,
            width : 150,
            emptyText : 'Pass'
        });

        this.items = [usernameField,passField];
        this.callParent(arguments);
    }
}).show(); 
```

感谢您帮助找出代码有什么问题

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-24T16:41:15.730

我在做的时候遇到了这个错误

```
Ext.define('blah', {

    initComponent: function(){
        //do stuff
    }
}); 
```

事实证明这个问题有点指向正确的方向，但如果你不打电话，你也会得到这个神秘的错误

```
this.callParent(arguments); 
```

在 initComponent 的末尾。有用！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T07:22:35.297

创建实例时不要覆盖 initComponent。

```
Ext.create('Ext.window.Window', {
    title: 'Login',
    width: 400,
    height: 500,
    items: [{
        xtype: 'textfield',
        fieldLabel: 'Net ID',
        allowBlank: false,
        labelWidth: 150,
        width: 150,
        emptyText: 'Net ID'
    }, {
        xtype: 'textfield',
        fieldLabel: 'Password',
        allowBlank: false,
        labelWidth: 150,
        width: 150,
        emptyText: 'Pass'
    }]
}).show(); 
```

# html - div对齐不起作用

> ID：11536142
> 
> 赞同：0
> 
> 时间：2012-07-18T07:17:35.713
> 
> 标签：html, css

我有一个主 div `PricingBar`，里面有 3 个子 div。同时保持`PricingBar` `height: auto;`子 div 显示在`PricingBar`

![在此处输入图像描述](../Images/6c8ceb9bd148801928e640d465ed3dac.png)

这里绿色边框是`PricingBar`

**选项 A、选项 B、选项 C**是子 div

**html代码：**

```
<div id="PriceBar">
   <div id="OptionA">
     <h2>Option A</h2>
     <table class="optiontable">
        <tr><td class="column1">Setup Fee: </td><td><span>&#36;250.00</span> (includes 10 customized apparel pieces)</td></tr>
         <tr><td class="column1">Monthly Fee:</td><td><span>&#36;25.00</span></td></tr>
     </table>
   </div>
   <div id="OptionB">
     <h2>Option B</h2>
     <table class="optiontable">
        <tr><td class="column1">Setup Fee:</td><td><span>&#36;99.00</span> (includes 10 customized apparel pieces)</td></tr>
        <tr><td class="column1">Monthly Fee:</td><td><span>&#36;40.00</span></td></tr>
      </table>
   </div>
   <div id="OptionC">
     <h2>Option C</h2>
     <table class="optiontable">
          <tr><td class="column1">Setup Fee:</td><td>Refund</td></tr>
          <tr><td class="column1">Monthly Fee:</td><td>Refunded</td></tr>
      </table>
   </div>
</div> 
```

**CSS代码：**

```
#PriceBar{
    width: 1004px;
    position: relative;
    height:auto;
    padding:10px;
    border: 2px solid green;
    background:#930;
    float: inherit;

}

#OptionA, #OptionB, #OptionC{
    margin: 10px 20px;
    padding: 5px;
    float: left;
    width: 283px;
    height: auto;
    background-color: #FFF;
    -webkit-border-radius:15px;
    -mox-border-radius:15px;
    border-radius:15px;
}

#OptionA h2, #OptionB h2, #OptionC h2{
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    color: #006A8E;
}
table.optiontable tr td{
    padding: 10px 5px;
    color: #B9B196;
}
td.column1{
    width:100px;
    vertical-align: top;
    font-size: 12px;
    font-weight: bold;
    font-family: Verdana, Geneva, sans-serif;
    color: #252525 !important;
}
table.optiontable tr td span{
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:23:57.713

由于您的所有`div`元素都浮动，因此“红条”基本上“忘记”它是它们的容器。只需添加一个`overflow:auto;`以使其记住。我也倾向于`zoom:1`为 IE 添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T07:22:21.280

因为子 div 的**浮动**

添加溢出：隐藏到 PricingBar

```
#PriceBar{
    width: 1004px;
    position: relative;
    height:auto;
    padding:10px;
    border: 2px solid green;
    background:#930;
    float: inherit;

    overflow:hidden;/*!!!*/

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:25:28.460

将 overflow:hidden 添加到您的#PriceBar 样式应该可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T07:25:59.280

演示 [http://jsfiddle.net/8aduV/1/](http://jsfiddle.net/8aduV/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T07:30:49.427

你不需要 height:auto;

只需将其设为表格，因为它将是跨浏览器：

```
<table id="PriceBar">
    <tr>
        <td id="OptionA">
            <h2>Option A</h2>
            <table class="optiontable">
                <tr><td class="column1">Setup Fee: </td><td><span>&#36;250.00</span> (includes 10 customized apparel pieces)</td></tr>
                <tr><td class="column1">Monthly Fee:</td><td><span>&#36;25.00</span></td></tr>
            </table>
        </td>
        <td id="OptionB">
            <h2>Option B</h2>
            <table class="optiontable">
                <tr><td class="column1">Setup Fee:</td><td><span>&#36;99.00</span> (includes 10 customized apparel pieces)</td></tr>
                <tr><td class="column1">Monthly Fee:</td><td><span>&#36;40.00</span></td></tr>
            </table>
        </td>
        <td id="OptionC">
            <h2>Option C</h2>
            <table class="optiontable">
                <tr><td class="column1">Setup Fee:</td><td>Refund</td></tr>
                <tr><td class="column1">Monthly Fee:</td><td>Refunded</td></tr>
            </table>
        </td>
    </tr>
</table>
​ 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-18T07:36:40.850

这是正常的，如果你在 auto 中有一个高度；在你的两个第一个块中，你的块在两行中，在第三个中，文本它只是在一个块中，尝试在每个“tr”中使用“min-height”

```
tr{
    min-height:40px;
} 
```

或者，其他解决方案是为所有代码创建一个全局表。你的三列是链接，你没有这个问题：p

对于调试，使用[Firebug](https://addons.mozilla.org/fr/firefox/addon/firebug/)更容易测试您的 html 代码和 CSS。

希望能帮到你;-P

# android - 使用 Adob e Reader 打开 pdf 文件时如何防止“使用完成操作”。

> ID：11536143
> 
> 赞同：0
> 
> 时间：2012-07-18T07:17:41.913
> 
> 标签：android, pdf, adobe

我想使用已安装的 adobe reader 打开 pdf 文件。我尝试通过以下方式阻止“使用完成操作”菜单。

```
Intent intent = new Intent();
intent.setPackage("com.adobe.reader");
intent.setDataAndType(Uri.fromFile(doc), "application/pdf");
startActivity(intent); 
```

使用上面的代码，我设法将列表大小减少到 2。有没有办法避免显示上下文菜单（使用完成操作）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:38:36.763

当两个活动具有相同的意图过滤操作时，Android 系统会自动显示“完成操作使用”对话框。一旦您选择了默认操作。Android 不会显示它并使用默认操作完成任务。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-19T13:04:01.337

我要感谢每一位试图回答这个问题的人。经过一番浏览，我找到了我的问题的解决方案。这对我来说非常有用。

而不是使用

```
intent.setPackage("com.adobe.reader"); 
```

我用了

```
intent.setClassName("com.adobe.reader", "com.adobe.reader.AdobeReader"); 
```

不要忘记在 try catch 块中启动活动，当设备上未安装 adobe reader 时，它会有所帮助。请检查以下代码段。

```
try {
    Intent intent = new Intent();

    intent.setClassName("com.adobe.reader", "com.adobe.reader.AdobeReader");
    intent.setAction(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(doc), "application/pdf");
    startActivity(intent);

   } 
   catch (ActivityNotFoundException activityNotFoundException) {
    activityNotFoundException.printStackTrace();
    } 
```

# android - 检索当前位置的附近地点

> ID：11536144
> 
> 赞同：0
> 
> 时间：2012-07-18T07:17:43.037
> 
> 标签：android, google-places-api

我正在开发一个应用程序，我需要检索当前位置附近的餐馆。论坛建议我使用 Google Places API。当我阅读 Google Place API 时，它说项目需要是“Google App Engine 项目”+ Android 客户端。但是我很困惑，因为我对谷歌世界还很陌生，这是否是一种正确的做法。

有人可以建议我检索当前位置附近餐厅的最佳方式吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:33:12.607

按照这个链接。为您的应用程序创建一个应用程序密钥，您只需发出一个 Http 请求，您将获得 Xml//json 中的所有信息。 [https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

[https://maps.googleapis.com/maps/api/place/search/xml?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/search/xml?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere)

在上面的网址中，添加您的 Api 密钥和位置。它将返回一个 xml 给您，其中包含 500m 圈内的所有restras。

此 url 将只接受获取请求。Yov 必须在 Url 本身中附加所有参数。

```
@Override
                public void run() 
                {
                     String params="location="+(location.getLatitude())+","+(location.getLongitude())+"&radius=5000&types=food&sensor=false&key=your kay";
                        try
                        {
                            http.getPlaces(new URL("https://maps.googleapis.com/maps/api/place/search/xml?"+params));
                            Log.i("url", "https://maps.googleapis.com/maps/api/place/search/xml?"+params);
                            setList();
                        } 
                        catch (MalformedURLException e)
                        {
                            e.printStackTrace();
                        }
                        catch (Exception e) 
                        {
                            e.printStackTrace();
                        }

                }
            });

public void getPlacesDetails(URL url) throws Exception {
    try 
    {
        connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        connection.setConnectTimeout(TIMEOUT_CONNECT_MILLIS);
        connection.setReadTimeout(TIMEOUT_READ_MILLIS);
        connection.setRequestMethod("GET");

        inStream = (InputStream) connection.getInputStream();

        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        HospitalDetailParser myXMLHandler = new HospitalDetailParser();
        xr.setContentHandler(myXMLHandler);
        xr.parse(new InputSource(inStream));

    }

    catch (MalformedURLException e) 
    {

        Log.i("exception in sms", "" + e.toString());
        throw e;
    }

    catch (Exception e) 
    {

        Log.i("exception in sms", "" + e.toString());
        throw e;
    }

} 
```

# java - 如何将属性文件放在 Eclipse 中 .jar 之前的类路径中的目录中？

> ID：11536146
> 
> 赞同：0
> 
> 时间：2012-07-18T07:17:48.990
> 
> 标签：java, eclipse, classpath, properties-file

我想将`ABC.properties`文件放在`cmbview81.jar`.

`cmbview81.jar`里面已经有`ABC.properties`文件了。我提取文件做了一些更改并制作了`new ABC.properties`文件，现在想在`cmbview81.j`ar 文件之前设置它的路径，这样应用程序就不会指向文件中的文件。它`cmbview81.jar`应该使用`new ABC.properties`file.

我尝试了此处提供的解决方案[How to place a file on classpath in eclipse?](https://stackoverflow.com/questions/11302531/how-to-place-a-file-on-classpath-in-eclipse) 但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:44:49.183

将它放在一个单独的 Jar 文件中，并确保该 Jar 文件包含在类路径规范中现有 Jar 文件的前面。类路径中 Jar 文件的指定顺序很重要（这与直接使用 CLASSPATH 变量的想法相同）。

您也可以将它放在您的`src`某个地方，但只需确保您的`src`文件夹出现在 Eclipse Java 构建路径配置的 Order and Export 选项卡中的 Jar 文件之前。

# iphone - cocos2d中的自由奔跑/侧滚式游戏

> ID：11536150
> 
> 赞同：2
> 
> 时间：2012-07-18T07:18:09.033
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我想在 cocos2d 中制作自由奔跑/横向滚动类型的游戏。我在瓷砖地图中尝试过，但我是

由于问题而卡住了。问题是我想跳跃，跳跃后玩家精灵检测到

降低楼层边界并在没有获得边界时获取楼层边界的位置

死了。任何人都可以建议我做什么或任何教程等吗？或者通过代码示例帮助我？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:56:07.600

我为 Global Game Jam 创建了一个基本的平台游戏，使用 Box2D 并添加了几个类似于名为“Citrus Engine”的 Flash 引擎的类。你可以随心所欲地使用它，并以此为例。

[http://globalgamejam.org/2012/o](http://globalgamejam.org/2012/o)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:03:01.480

我在我的游戏中编写你想要的代码。

所以我建议你创建玩家类并设置玩家的重力和速度。在播放器类的更新方法中设置播放器的位置。并在数组中添加地板，并在更新方法中使用 CGRectIntersectsRect 测试玩家和地板之间的碰撞。

```
floor *flr = [allfloors objectAtIndex:i];
CGRectIntersectsRect([self boundingbox],[flr boundingbox])
{
  self.position = ccp(self.position.x,flr.position.y + flr.contentSize.height/2);
  velocity = 0;
} 
```

每当你想跳跃时，只需应用速度。

# android - 启用以开始其他活动？

> ID：11536151
> 
> 赞同：1
> 
> 时间：2012-07-18T07:18:11.407
> 
> 标签：android, android-activity

我在主 Activity 中有 home 和 exit 按钮，当我单击 Exit 按钮时，应用程序关闭。但是当我单击主页按钮时，它会得到 RunTimeException。

这是MainActivity的`onCreate`方法代码

```
public void onCreate(Bundle savedInstanceState) {

    home = (Button) findViewById(R.id.home);
    exit_app = (Button) findViewById(R.id.exit_app);

    home.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent1 = new Intent(MainActivity.this,
                    FirstActivity.class);
            startActivity(intent1);

        }
    });

    exit_app.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();
        }
    });
} 
```

这是 FirstActivity 的`onCreate`方法：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.firstactivitylayout);

            home = (Button) findViewById(R.id.home);
            button2 = (Button) findViewById(R.id.button2);
            button3 = (Button) findViewById(R.id.button3);
            exit_app = (Button) findViewById(R.id.exit_app);

            home.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                Intent intent = new Intent(FirstActivity.this,MainActivity.class);
                startActivity(intent);
                }
            });

            exit_app.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    finish();

                }
            });

    } 
```

# iphone - 使 UIImageView 模糊

> ID：11536156
> 
> 赞同：0
> 
> 时间：2012-07-18T07:18:24.533
> 
> 标签：iphone, ios, cocoa-touch, uiimageview

我有一个 View1，它有一个`UIImageView`我正在加载`UIImage`. 当我在 View1 中按下一个按钮时，我添加了一个名为 View2 的子视图，它有 2 个按钮。

我正在使用下面的 alpha 值将我的第二个视图作为透明度。

```
[_view2 setBackgroundColor:[UIColor clearColor]];
_imageView.alpha = 0.4; 
```

那没问题。但我想做的是，当我添加第二个子视图时，第一个视图是可见的。降低 alpha 值将导致它的亮度。但我想在第一个视图中显示图像视图有点模糊。我需要设置 alpha 值以及使背景图像视图模糊。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:21:04.080

看看这个承诺在 iOS 下实现图像模糊的类：[https](https://github.com/tomsoft1/StackBluriOS) ://github.com/tomsoft1/StackBluriOS 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-22T06:17:43.577

斯威夫特版本

```
 public extension UIImageView {

   public func blur(withStyle style: UIBlurEffectStyle = .light) {
    let blurEffect = UIBlurEffect(style: style)
    let blurEffectView = UIVisualEffectView(effect: blurEffect)
    blurEffectView.frame = bounds
    blurEffectView.autoresizingMask = [.flexibleWidth, .flexibleHeight] // for supporting device rotation
    addSubview(blurEffectView)
    clipsToBounds = true
  }

} 
```

# java - JPA 实体侦听器中的排除字段

> ID：11536162
> 
> 赞同：3
> 
> 时间：2012-07-18T07:19:02.343
> 
> 标签：java, jakarta-ee, jpa, entitylisteners

我的 Enterprise Java 应用程序中有一个实体类，它附加了一个实体侦听器：

```
@Entity
@EntityListeners(ChangeListener.class)
public class MyEntity {

   @Id
   private long id;

   private String name;

   private Integer result;

   private Boolean dirty;

   ...
} 
```

但是，我希望它能够为除布尔值之外的所有字段触发实体侦听器。有什么方法可以排除字段触发实体侦听器而不使其瞬态？

我正在使用带有 Hibernate 的 Java EE 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:57:33.267

但是，如果您实施自己的解决方案，这是可能的。我对审计日志业务需求也有同样的需求，所以设计了自己的 AuditField 注释，并应用于要审计日志的字段。

这是一个实体 bean 中的示例 - 站点。

```
@AuditField(exclude={EntityActionType.DELETE})
@Column(name = "site_code", nullable = false)
private String siteCode; 
```

因此，该示例表明“siteCode”是审核日志的字段，但 DELETE 操作除外。（EntityActionType 是一个枚举，它包含 CRUD 操作。）

此外，EntityListener 也有这部分代码。

```
@PostPersist
public void created(Site pEntity) {
log(pEntity, EntityActionType.CREATE);
}

@PreUpdate
public void updated(Site pEntity) {
log(pEntity, EntityActionType.UPDATE);
}

@PreRemove
public void deleted(Site pEntity) {
log(pEntity, EntityActionType.DELETE);
} 
```

现在它在 log() 中要做的是，弄清楚哪些字段是审计日志以及可选地涉及哪些自定义操作。

但是，还有另一个需要考虑。如果将注释放在另一个实体变量中，则必须记录实体的哪些字段？（即链式日志记录）

您可以选择仅在实体中使用 @AuditField 注释的内容还是其他方式。就我而言，我们决定只记录实体 ID，它是数据库表的 PK。但是，假设业务可以改变，我想使其灵活。因此，所有实体都必须实现 auditValue() 方法，该方法来自基实体类，并且默认实现（可覆盖）是返回其 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:40:06.937

这里有某种概念的混合。EntityListener 不会收到有关属性值更改的通知 - 不是针对单个属性，也不是针对所有属性。

出于某种原因，它们被称为生命周期回调。它们由以下实体的生命周期事件触发：

*   坚持（前/后）
*   加载（发布）
*   更新（前/后）
*   删除（前/后）

对于它们中的每一个，都有匹配的注释。所以答案是不可能通过持久属性的类型来限制这个功能。

# android - android 获取活动返回 null

> ID：11536166
> 
> 赞同：14
> 
> 时间：2012-07-18T07:19:37.217
> 
> 标签：android, android-layout

我在 Activity 上使用操作栏。对于每个选项卡，我都显示不同的布局。由于布局太重。所以我将每个布局膨胀成一个视图。所以在每个选项卡上选择

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if (mView == null) {
        mView = LayoutInflater.from(mAct).inflate(mLayout, null);  // mAct is Activity reference
    }
    mAct.setContentView(mView);
    for (int i = 0; i < mFrags.length; i++) {
     mFrags[i] = (LutronFragment) mAct.getFragmentManager()
         .findFragmentById(mIds[i]);

     if (mFrags[i] != null) {
       mFrags[i].setupHeader();
      }
  }
}
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
  for (Fragment f : mFrags) {
   try { 
         if (f != null) {
        ft.remove(f);
      }
  } catch (IllegalStateException e) {
        e.printStackTrace();
  }
   }
} 
```

所以现在如果我第二次选择选项卡并在该选项卡上执行一些操作，应用程序会在 getActivity.(NullPointerException) 上崩溃

请建议是否有其他方法来缓存重布局。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-18T07:29:05.197

问题很可能是您正在使用已从您的活动中分离的旧片段。

因此，第一次创建 Fragment 时，它会附加到您的活动中。一切都很好。然后，当您更改选项卡时，您的片段可能会或可能不会与活动分离。当您返回它时，旧片段可能会与活动分离，因此`getActivity()`返回 null。

如果您尝试保留对片段的引用，而不是通过`FragmentManager`.

如果您的适配器返回对片段而不是新片段的引用，也会发生这种情况。我掉进了这个陷阱。

（发布您创建片段的代码可能会有所帮助）

**编辑**

也许看看[这个](http://developer.android.com/reference/android/app/ActionBar.html#newTab%28%29)以及他们如何创建添加他们的 ActionBar 侦听器。您需要活动范围。他们这样做的方式是在 Activity/Fragment 中定义侦听器（通过实现接口），然后将其附加到 Tab。这将为您提供范围，并且可能是一种更稳定的做事方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-23T20:18:42.963

如果您在调用`getActiviy()`. 如果`getActivity()`在片段从片段堆栈中弹出后在匿名对象中调用，`getActivity()`将返回 null。此时，片段不再与活动相关联。

# performance - PHP邮件功能减慢页面

> ID：11536168
> 
> 赞同：1
> 
> 时间：2012-07-18T07:19:48.143
> 
> 标签：performance, php

我有 2 页 PageA 用于发布查询和 PageB - 谢谢页面。

我已将 SendMail PHP 函数添加到 PageA 中，一旦在 PageA 中发布查询，它将向 3 个人发送邮件以及附件。

现在完成此操作后，我将重定向到 PageB，这是感谢页面。

现在的问题是重定向到 PageB 需要很长时间（超过 2 秒），因为 PageA 中的邮件功能正在减慢这一速度。

请让我知道如何摆脱这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:57:23.053

您如何使用由 cron 作业触发的单独脚本发送电子邮件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:13:39.590

一些选项包括：

1）在本地邮件服务器中排队邮件，让它处理到达最终目的地的细节。此选项可能需要您设置邮件服务器，但应立即交付并允许脚本继续执行。

2) 不要立即发送邮件，而是在数据库中标记它处于待处理状态，并运行一个 cron 作业以将待处理的电子邮件与网页分开发送。

# c++ - C/C++ 代码突出显示在网页中看起来很奇怪

> ID：11536169
> 
> 赞同：0
> 
> 时间：2012-07-18T07:19:50.267
> 
> 标签：c++, html, emacs, syntax-highlighting, org-mode

我的 emacs 有黑色背景和白色文本。如果我将 org 文件转换为 html 代码高亮可能看起来很奇怪。特别是显示的“main”和“[]”基本是不可见的。

如何让它看起来漂亮，或者至少清晰可读？</p>

[见这里 http://att.newsmth.net/nForum/att/Emacs/101182/527](http://att.newsmth.net/nForum/att/Emacs/101182/527)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:25:55.777

我不确定我是否理解您的问题，但是如果您只需要一个好的配色方案来突出显示代码，请尝试[solarized](http://ethanschoonover.com/solarized)，这是一个很棒的配色方案，并且已经有人为 emacs 制作了一个主题。

# php - 如何自动换行回声描述

> ID：11536173
> 
> 赞同：0
> 
> 时间：2012-07-18T07:20:14.480
> 
> 标签：php, word-wrap

我在使用自动换行吗？导致它不工作。不知道只是 echo 确实包装了文本..

```
<p><?php echo wordwrap(ucfirst($row->description), 10);?></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:26:24.603

默认情况下，`wordwrap`插入`ASCII`换行符 ( `\n`)。当您想在 HTML 中直观地显示这些换行符时，请使用的第三个参数`wordwrap`并指定`<br />`.

```
<p><?php echo wordwrap(ucfirst($row->description), 10, '<br />');?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:26:37.633

[您可以阅读PHP.net](http://php.net/manual/en/function.wordwrap.php)上所有本机函数的文档。

在您的情况下，您没有提供第三个参数，因此它默认为“ `\n`”（换行符），您只会在源代码中看到。您可能希望“ `<br />\n`”作为您的第三个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:29:56.633

如果要截断描述，可以使用*mb_substr()*

[http://php.net/manual/en/function.mb-substr.php](http://php.net/manual/en/function.mb-substr.php)

# javascript - 使用数组中的参数调用函数 - apply() 没有上下文参数？

> ID：11536177
> 
> 赞同：2
> 
> 时间：2012-07-18T07:20:20.233
> 
> 标签：javascript

是否有任何方法可以调用函数但将上下文设置为`this`当我调用函数时它具有的“默认”值`fn()`？

这个方法应该接受一个数组并将单个元素作为参数传递给函数，就像 apply() 一样：

```
emitter = new EventEmitter();
args = ['foo', 'bar'];

// This is the desired result:
emitter.emit('event', args[0], args[1], ...);

// I can do this using apply, but need to set the context right
emitter.emit.apply(emitter, 'event', args);

// How can I trim the context from this?
emitter.emit.???('event', args); 
```

*编辑：*为了澄清这一点，我确实关心`this`被调用函数内部的值 - 它需要是它在执行时具有的“正常”上下文`emitter.emit()`，而不是全局对象或其他任何东西。否则，这有时会破坏事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T07:23:21.973

`null`如果`undefined`你不关心上下文，你可以通过。在函数内部，将在非严格模式下`this` [引用全局对象，在](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)[严格模式](https://developer.mozilla.org/en/JavaScript/Strict_mode#.22Securing.22_JavaScript)[下`null`分别`undefined`](https://developer.mozilla.org/en/JavaScript/Strict_mode#.22Securing.22_JavaScript)引用。

函数的“默认”上下文很难定义

```
function f() { return this };
a = { b: f }
c = a.b;

console.log(f());   # window
console.log(a.b()); # a
console.log(c());   # window 
```

其中哪一个是“正确”的上下文？

在您的情况下，您可能会考虑实用功能

```
/* you might call it something else */
emitter.emit_all = function (event, args) {
    return this.emit.apply(this, [event].concat(args));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T07:23:03.917

只需将第一个参数设置为全局对象（即`window`在浏览器中）

在 ES3 浏览器中，您可以`null`改为传递，它会自动更改为全局对象，但该行为[已在 ES5 规范中删除](http://es5.github.com/#x15.3.4.3)。

* * *

**编辑**听起来你只需要一个新功能：

```
EventEmitter.prototype.emitArgs = function(event, args) {
    this.emit.apply(this, [event].concat(args));
} 
```

此时您可以致电：

```
emitter.emitArgs('event', args); 
```

（**编辑**感谢@Esalija `[].concat`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T08:26:42.870

这是由本机函数“参数”变量解决的。

```
var EventEmitter = window.EventEmitter = function(){
    //this.emit = this.emit.bind(this);//bind emit to "this"
    return this;
};
EventEmitter.prototype.isMe = function(obj){
    return obj === this;
};
EventEmitter.prototype.emit = function(eventName){
    var input = Array.prototype.slice.call(arguments, 1);
    console.log("this:%O, Emitting event:%s, with arguments:%O", this, eventName,input);
};

emitter = new EventEmitter();
emitter.emit('magicEvent', 'Zelda Con', 'Zork Meetup', 'etc'); 
```

为了维护“this”上下文，您可以在构造函数中绑定 emit 方法，尽管这会为每个实例创建“自己的”对象属性，从而增加内存消耗，并且实际上在对象创建时执行所有原型链查找（对于绑定方法），无论您是否需要他们与否。

# android - 想在 android 中为我的应用程序创建一个单独的主题 apk

> ID：11536180
> 
> 赞同：1
> 
> 时间：2012-07-18T07:20:35.327
> 
> 标签：android, integration, android-theme

如何为我以前的应用程序开发一个应用程序只是即插即用型。就像我现在有一个应用程序并想要它的主题应用程序一样。请帮助我如何做这种事情。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:37:34.943

您可以通过存储主题资源（样式、图像、颜色等）来创建主题应用程序。然后在您的应用程序中，您可以使用以下代码访问另一个应用程序的资源：

```
Resources res = context.getPackageManager().getResourcesForApplication("com.example.foo") 
```

# scala - 我应该为命令行和 Eclipse IDE 分别安装 Scala 吗？

> ID：11536181
> 
> 赞同：2
> 
> 时间：2012-07-18T07:20:41.423
> 
> 标签：scala, eclipse-plugin, scala-ide

我已经使用更新机制安装了 Scala IDE for Eclipse，然后我发现那里没有包含命令行工具。那么我应该下载另一个 Scala 包的副本以获得命令行支持并分别维护它们是否正确？

或者有没有一种集成的方法可以让它在两种环境中工作？我只想在 Eclipse 中编写和调试代码，偶尔在命令行上运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:04:23.097

首先，您可以在 Eclipse 中打开一个 Scala 命令行。只需转到`Window`-> `Show View`-> `Scala Interpreter`，它将打开一个解释器窗口，将您的项目加载到类路径中。

其次，为命令行使用单独的 Scala 安装并没有错。我这样做。有几个终端窗口通常很方便，您可以在其中运行东西或快速测试代码位。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T09:05:10.513

您需要先安装 scala 编译器。否则不能使用eclipse插件。如果你已经安装了 scala 编译器，你只需要将它添加到你的类路径中。现在你可以输入`scala`你正在使用的任何终端，然后 REPL 就会启动。

# android - 为什么在 Android 中通话时 WiFi 连接断开

> ID：11536186
> 
> 赞同：1
> 
> 时间：2012-07-18T07:20:50.860
> 
> 标签：android, android-wifi

我有一个程序需要一直保持 WiFi 连接。我的问题是当用户拨打电话时，几秒钟后通话连接屏幕熄灭，然后 WiFi 连接断开。

`WIFI_MODE_FULL`我尝试在 WiFi`FULL_WAKE_LOCK`上按住 a`PowerManager`并将其设置`SCREEN_TIMEOUT`为 -1，这些都没有帮助。仍然 WiFi 连接断开。我在 LG-P990 Android 2.2.2 上遇到了这个问题

有人知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T08:45:45.933

可以通过更改设置中的设置 => 高级 => 在睡眠期间保持 Wifi-on 来保持 wifi 连接处于活动状态

# php - 从 PHP 网络服务自动发布推文，无需多个推特帐户的用户交互

> ID：11536188
> 
> 赞同：-2
> 
> 时间：2012-07-18T07:21:00.250
> 
> 标签：php, authentication, twitter

我对 php 脚本的要求如下。数据库有大约 20 个 twitterID 的列表。Webapp 应该能够代表列表中给出的任何 twitterID 发布推文。这发生在后门，这意味着没有将涉及用户交互，例如重定向到 Twitter 身份验证页面以允许 twitterApp 访问某些内容，并且用户将接受以允许访问。用户不知道此后端操作。

我的问题是：

1.  这可能/可行吗？
2.  如果可能的话，我应该如何处理开发路线图。我的技术是基于 PHP 的，涉及到智能手机客户端的 REST APi 集成。

期待一些深入的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:24:10.363

您需要的不仅仅是 twitter ID 来代表他们发帖。他们必须首先对应用程序进行身份验证。

这会生成两个令牌`OAuthToken`和`OAuthTokenSecret`，它们可以存储在您的数据库后端中，因此，可以从您的 PHP 后端用于代表用户发布，直到用户取消对您的应用程序的授权，此时`OAuthToken`将不再起作用.

Twitter OAuthToken**不会**过期，但用户可以撤销您的访问权限。

[您可以使用Twitter PHP 库](https://dev.twitter.com/docs/twitter-libraries#php)之一在 PHP 中实现上述内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:24:34.030

在某些时候，用户必须知道它，他们必须第一次授权您的页面（您不希望有人在您不知道的情况下在您的 Twitter 提要上发帖，对吧？）。

当他们第一次授权您的页面时，您可以存储您在身份验证过程结束时收到的 OAuth 令牌，并在以后使用它来发布推文，而无需要求用户再次验证自己，只要令牌是有效的。

# perl - SVN 预提交钩子

> ID：11536194
> 
> 赞同：0
> 
> 时间：2012-07-18T07:21:23.533
> 
> 标签：perl, svn, tortoisesvn

我是 svn 的新手。Svn 存储库在 Linux 中，开发人员正在使用 TSVN 客户端在 Windows 上工作。我实现了一个带有 32 个字符的正确注释的每次提交挂钩。它在 Linux 中工作。但我尝试在 TSVN 客户端提交带有注释的代码少于 32 个字符，它正在工作。任何人都可以帮我解决这个问题。

这是代码：

```
$minchars = 10; 
$svnlook = '/usr/bin/svnlook'; 
#-------------------------------------------- 
$repos = $ARGV[0]; 
$txn = $ARGV[1]; 
$comment = `$svnlook log -t "$txn" "$repos"`; 
chomp($comment); 
if ( length($comment) == 0 ) { 
  print STDERR "A comment is required!"; 
  exit(1); 
} elsif ( length($comment) < $minchars ) { 
  print STDERR "Comment must be at least $minchars characters."; 
  exit(1); 
} 
exit(0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:28:50.830

尝试这个：

将您的脚本复制到另一个目录并修改它以使用命令的`-r`参数`svnlook`而不是`-t`. 然后，尝试使用应该失败的提交修订。

例如：

```
$ cd $repo_dir/hooks
$ cp pre-commit $HOME
$ cd
$ vim pre-commit   #Change from Transaction to Revision

$ # Revision #123 should have failed
$ ./pre-commit $repo $rev 
```

如果脚本没有产生错误，您可以尝试打印引号中的注释以查看其长度是否为零等。这将帮助您找到脚本中可能存在的逻辑错误。

您还应该在您的 Perl 脚本中使用`use strict;`and `use warnings;`，因为它很容易发现您在脚本中可能没有意识到的错误。很容易忘记不一定设置了特定变量，或者您输入了错误的变量。这些 pragma 会发现这些类型的错误，这些错误似乎会导致 Perl 中大约 90% 的问题：

```
#! /usr/bin/env perl

use strict;
use warnings;

my $svnlook = "/usr/bin/svnlook";
my $minchars = 10; 

my $repos = $ARGV[0]; 
my $txn = $ARGV[1];
chomp ( my $comment = qx($svnlook log -t $txn $repos) );
if (not $comment) {
        die "A comment is required!\n";
}   
elsif ( length $comment  < $minchars ) { 
        die "Comment must be at least $minchars characters.\n";
}   
exit 0; 
```

你也可以使用我的[预提交](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)脚本。它可以用来验证提交注释的长度和结构。例如，您可以要求提交评论需要缺陷 ID。它还允许您控制谁在存储库的哪些部分拥有提交权限，还可以强制在某些文件上使用某些属性。例如，您可能希望确保所有 shell 脚本和 Perl 脚本都`svn:eol-style`设置为`native`or 或`LF`。

它还可以允许用户创建标签，但不允许用户在创建后对标签进行更改。这可以防止用户意外签出标签、进行更改然后提交。

* * *

还有一件事情：

看看像[Jenkins](http://jenkins-ci.org)这样的持续构建系统。我发现的一件事是，仅仅通过持续构建，开发人员自然而然地改进了他们的提交消息，而无需进行任何形式的强制执行。

那是因为提交消息现在很容易看到。Jenkins 显示每次构建中的更改，构建本身是否成功，测试结果等。它显示了更改和提交评论。突然之间，提交评论对开发人员自己变得更加有用，他们只是做了更好的评论。

你可以看看`svn log`我什么时候实现 Jenkins：之前要么没有提交评论，要么没有诸如“*重新格式化的代码*”或非常有用的“*进行更改*”（都超过 10 个字符）之类的有用的东西。突然评论是“*修正了 BUG-1233。在将它传递给 foo 方法之前检查了空指针*”。

# android - 当我使用 clean 选项在 android 中清理项目时，R.java 会从 gen 文件中删除

> ID：11536195
> 
> 赞同：-1
> 
> 时间：2012-07-18T07:21:22.770
> 
> 标签：android, eclipse

> **可能重复：**
> [R.java 项目清理后消失](https://stackoverflow.com/questions/3896301/r-java-disappears-after-project-clean)

我正在使用“Eclipse Indigo”编辑器。在我的 android 项目中，当我使用清理选项工具清理项目中存在的错误时，gen 文件夹中的“R.java”也会被删除。我打开和关闭 Eclipse 几次，但在项目中找不到 R.java 文件。

请帮我。伸出援助之手受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:24:29.693

可能的问题是，在您的布局中出现任何错误，但 Eclipse 并没有指出该错误。如果您遇到任何错误，请查看控制台附近的问题选项卡。并考虑从[这篇](https://stackoverflow.com/questions/2757107/developing-for-android-in-eclipse-r-java-not-generating)文章中了解更多关于为什么 R.java 有时不是由 Eclipse 生成的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:23:44.573

这很正常。清理过程删除要重建的 gen 和 bin 文件。清理完项目后，它们应该会再次出现，除非您的 res 文件中有任何错误，在这种情况下，将无法生成 R.java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:28:25.200

如果在清理过程中没有重新生成 R 文件，这是因为您的项目有一些错误（除了丢失的 R 文件生成的错误）。检查您的项目并修复其他错误。

我认为您的 XML 文件中有错误 - R.java 是从 xml 属性生成的。检查您的代码并修复错误。

# linux - 在Linux中打印匹配前10行的行和行

> ID：11536196
> 
> 赞同：0
> 
> 时间：2012-07-18T07:21:25.233
> 
> 标签：linux, unix

我想匹配文件中的字符串，打印匹配的行和匹配发生前的第 10 行。我正在尝试使用 awk、sed 和 grep，但无法得到正确的结果。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:28:15.180

试试这个命令：

```
grep -B 10 PATTERN file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:28:32.113

GNU grep的`-A`and`-B`选项允许您指定在匹配行之后和之前应该显示多少上下文。

# java - 如何更改鼠标进入/鼠标退出时按钮的图标图像？

> ID：11536200
> 
> 赞同：3
> 
> 时间：2012-07-18T07:21:51.460
> 
> 标签：java, swing, icons, jbutton, mouselistener

我想在鼠标进入和鼠标退出时更改按钮的图标图像。

```
 private void jButton1MouseEntered(java.awt.event.MouseEvent evt) {    
    this.jButton1.setBackground(Color.red);
    this.jButton1.setForeground(Color.BLUE)
    }  ;
 private void jButton1MouseExited(java.awt.event.MouseEvent evt) {                                     
       this.jButton1.setBackground(Color.lightGray);
       this.jButton1.setForeground(Color.BLACK);

    } 
```

请建议如何更改图标图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T08:00:43.273

见[`setRolloverIcon(Icon)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setRolloverIcon%28javax.swing.Icon%29)（不需要`MouseListener`）。

# android - GCM 在第一次执行时不显示注册 ID？

> ID：11536201
> 
> 赞同：1
> 
> 时间：2012-07-18T07:22:03.890
> 
> 标签：android, google-cloud-messaging

我正在尝试运行 GCM 的演示 SamplePush 应用程序。当我第一次安装它时，当我再次运行它时，textview 显示为空白，我可以在 textview 上看到registrationID。

我指的教程是：[http ://android.amolgupta.in/2012/07/google-cloud-messaging-gcm-tutorial.html](http://android.amolgupta.in/2012/07/google-cloud-messaging-gcm-tutorial.html)

有谁知道为什么会这样？有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:43:11.910

这是因为这是异步操作。您触发一个请求 ID 的意图，并且在某些时候您会收到一个带有 ID 的广播，然后该 ID 会被保存

# sql - MAX 在 INT 和 VARCHAR 数据类型的 t-SQL 中的功能

> ID：11536209
> 
> 赞同：2
> 
> 时间：2012-07-18T07:22:27.350
> 
> 标签：sql, tsql, max

昨天早上，我的经理给了我一个新数据库，我必须在其中编写一些 SQL 存储过程。有一列 MMs 表示数值，所以我知道 Sql Function MAX 可以处理它。但事实并非如此。

这是一个 varchar 列，其中包含从 1 到 41 随机存储的数值。我假设我的 SQL 语句：“SELECT MAX(MMS) FROM tbl”会给我 41 作为结果，但结果是 9。

后来，当与字符串数据类型一起使用时，我投资了 MAX 从列中取出第一个数字字母，然后从中给出 MAX。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:25:42.270

从这里：

[http://msdn.microsoft.com/en-uk/library/ms187751.aspx](http://msdn.microsoft.com/en-uk/library/ms187751.aspx)

> 对于字符列，MAX 查找整理序列中的最大值。

如果要按数字对列的内容进行排序，可以执行以下操作：

```
ORDER BY len(mms), mms 
```

# java - 用于绘制大型、可缩放、交互式图表的 Java GUI

> ID：11536213
> 
> 赞同：1
> 
> 时间：2012-07-18T07:22:34.747
> 
> 标签：java, swing, user-interface, diagram, zooming

我试图在 Swing 中绘制一个图表，在大量嵌套的 JPanel 中包含大量（数千个）JLabel，所有这些 JLabel 都具有不同的布局。

我使整个图表可缩放，缩放一个步骤，我在图表中的所有组件上使用 setPrefferedSize()。

它也是交互式的，通过单击其中一个 JLabel，程序会放大该 JLabel。每个 JLabel 都有一个工具提示，并且在悬停时会改变颜色。

问题是当图表太大时，缩放速度太慢了。有一个 for 循环必须遍历图中的所有 JComponent 并更改它们的首选大小。然后我必须在 JComponents 父级上调用 .revalidate() 。

## 所以我的问题是：

1.  我是否应该只使用一个具有空布局的 JPanel 并在所有 JLabel 上使用 setBounds() 来定位和放大它们，而不是使用具有不同布局的嵌套 JPanel 来定位和放大它们？电脑会不会更轻？

2.  我应该使用另一个 GUI 吗？它必须支持以下内容：

    *   绘制带有tooltips的矩形标签，可以添加mouseListener。
    *   可缩放，可以缩放整个图表
    *   可以在图表中绘制文字。
    *   可滚动，可以将图表添加到 JScrollPane（放大时很重要）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:08:27.273

`paintComponent`您可以忘记单独的 JLabels，只在主 JPanel的方法中绘制文本项。
您可以使用`drawString`来绘制文本项目。
此外，您可以保留“缩放级别”值并根据该缩放级别在不同的位置/大小绘制字符串。

如果我是你，我会举一个简单的例子来绘制几千个字符串，看看这在你的目标规范客户端机器上是否足够快。

编辑：像这样的东西：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;

/**
 * TestPaintComponentZooming
 * 
 * @author davidf
 */
public class TestPaintComponentZooming {
    private JFrame f;
    private JPanel panel;
    private double zoom = 1.0;

    public static void main(String[] args) {
        TestPaintComponentZooming t = new TestPaintComponentZooming();
        t.init();
    }

    public TestPaintComponentZooming() {
    }

    public void init() {
        JButton b = new JButton();
        b.setBackground(Color.red);
        b.setBorder(new LineBorder(Color.black, 2));
        b.setPreferredSize(new Dimension(600, 10));
        panel = new _JPanel();
        panel.add(b);
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(panel, "Center");
        f.add(getCheckBoxPanel(), "South");
        f.setLocation(200, 200);
        f.setSize(400, 400);
        f.validate();
        f.setVisible(true);
    }

    private JPanel getCheckBoxPanel() {
        JButton zoomIn = new JButton("Zoom in");
        zoomIn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                zoomAndRepaint(0.1);
            }
        });
        JButton zoomOut = new JButton("Zoom out");
        zoomOut.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                zoomAndRepaint(-0.1);
            }
        });
        JPanel panel2 = new JPanel();
        panel2.add(zoomIn);
        panel2.add(zoomOut);
        return panel2;
    }

    /**
     * zoomAndRepaint
     */
    protected void zoomAndRepaint(double d) {
        zoom += d;
        f.repaint();
    }

    private class _JPanel extends JPanel {

        public _JPanel() {
            super(null);
        }

        /**
         * @see javax.swing.JComponent#paintComponent(java.awt.Graphics)
         */
        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            g.setFont(new Font("Arial", Font.PLAIN, (int) (zoom * 10 + 2)));
            for (int x=0; x < 100; x++) {
                for (int y=0; y < 100; y++) {
                    g.drawString("Hello " + x + "," + y, (int) (x * 60 * zoom), (int) (y * 10 * zoom));                    
                }
            }
        }
    }
} 
```

# iphone - 如何在UILabel中的部分文本中设置粗体

> ID：11536217
> 
> 赞同：1
> 
> 时间：2012-07-18T07:22:53.493
> 
> 标签：iphone, label, bold

我是 iPhone 应用程序开发的新手。如何在`UILabel`.

例子：

**步骤 1-**分离植物的所有部分（茎、根、叶、花等）

**第 2 步 -**一次只测试一个零件

我需要像这样的例子`UILabel`

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:41:20.557

实施 [`TTTAttributedLabel`](https://github.com/mattt/TTTAttributedLabel/)或[`OHAttributedLabel`](https://github.com/AliSoftware/OHAttributedLabel/)使用：

```
NSMutableAttributedString *theText = theLabel.text;
[theText applyFontTraits:NSBoldFontMask range:NSMakeRange(0,[text length])];
theLabel.text = theText; 
```

将字符串的特定部分加粗（`NSRange`根据需要更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:38:34.593

现在，您将不得不使用第三方组件，因为 UILabel 中没有属性字符串支持。

试试[https://github.com/mattt/TTTAttributedLabel/](https://github.com/mattt/TTTAttributedLabel/)

为了增加复杂性，这里有一些其他的解决方案：

或者，使用带有 HTML 的 WebView。

或者，使用 CATextLayer，这仅比添加 UILabel 稍微多一点工作，但您需要对图层与视图的工作方式有一点了解。

或者，使用 CoreText 自己绘制字符串。

# php - $.post 数据 html 返回 null

> ID：11536221
> 
> 赞同：0
> 
> 时间：2012-07-18T07:22:58.377
> 
> 标签：php, ajax, jquery

`$.post`当我使用php 文件时，遇到了一些奇怪的问题。没有任何帖子的文件本身会回显“someresult”，当我去 $.post 时，帖子数据的 html() 为空......请帮助

```
$('#podborform').submit(function(){
    var phone = $('#tour_selection_phone').val();
    if(phone != null && phone != '' && phone.length >= 7){
        var values = $(this).serialize();
        var qwer = String('captcha');
        var url = $(this).attr( 'action' );
        $.post( url, values,
            function( data ) {
                var content1 = $( data ).html();
                //content = String(content);
                //alert(qwer+'  -  '+content);
                if(content1 == qwer){
                    alert('Вы не правильно ввели код с картинки, попробуйте еще раз!');
                }
                if(content1 == 'false'){
                    alert('Извините произошла ошибка!');
                }
                if(content1 == 'true'){
                    alert('Ваша заявка успешно отправлена!');
                }
            }
        );
    }else{
        alert('Вы не ввели все обязательные поля!');
    }
    return false;
}); 
```

它连接到包含以下内容的php：

```
<?php
class mailer{
    //var $fields = array();
    function __construct(){
        if($this->captcha()){
            $this->sendmail();
        }else{
            exit('false');
        }
    }
    function sendmail(){
        foreach($_POST as $key=>$post){
            $text .= $key.': '.$post.PHP_EOL;
        }
        if(mail("123@gmail.com", "the subject", $text,
            "From: sales@123.ru\r\n"
           ."Reply-To: {$_POST['email']}\r\n"
           ."X-Mailer: PHP/" . phpversion())){
                exit('true');
            }else{
                exit('false_mail');
        }
    }
    function captcha(){
        require_once('recaptchalib.php');
        $privatekey = "123123";
        $resp = recaptcha_check_answer ($privatekey,
                                      $_SERVER["REMOTE_ADDR"],
                                      $_POST["recaptcha_challenge_field"],
                                      $_POST["recaptcha_response_field"]);

        if (!$resp->is_valid) {
          // What happens when the CAPTCHA was entered incorrectly
          echo 'captcha'; exit;
        } else {
            unset($_POST["recaptcha_challenge_field"],
                                      $_POST["recaptcha_response_field"]);
          return true;
        }
    }
}
    $mail = new mailer;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:27:00.497

您忘记了对象邮件程序构造上的 () ：

```
$mail = new mailer; 
```

应该

```
$mail = new mailer(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:28:05.823

`.html`获取**包含的**HTML。

例子

```
$('<div><img/></div>').html() // returns '<img/>'
$('test').html() // returns null 
```

你可以`data`直接使用。它将包含作为字符串的响应

```
if(data == qwer){
}
if(data == 'true'){
} 
```

# .net - 使用 Azure 上托管的 Web 应用程序访问本地 SQL 数据库

> ID：11536222
> 
> 赞同：0
> 
> 时间：2012-07-18T07:22:59.820
> 
> 标签：.net, windows, azure, connect

我正在尝试从 Azure 中托管的服务访问公司场所中存在的 SQL 数据库。这是我尝试过的：

1.  在本地服务器上创建 MS SQL 数据库
2.  创建了示例 Web 应用程序（Windows Azure 云服务）
3.  修改 web.config 文件以具有正确的 SQL 连接字符串
4.  使用 Azure 管理门户中的激活令牌激活 Web 角色
5.  在本地服务器上安装本地端点
6.  将 Web 应用程序发布到 Azure
7.  使用 Web 角色和本地端点创建端点组
8.  启动应用程序
9.  试图从数据库中获取记录。

尝试使用 Azure 从数据库中获取记录时出现以下错误：

```
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at WebRole1._Default.btnGetEmployee_Click(Object sender, EventArgs e) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:01:09.937

Trusted_Connection 必须为假。您不能从 Azure 执行 Windows 身份验证。

# java - Eclipse 在 Java 小程序中显示图像

> ID：11536223
> 
> 赞同：0
> 
> 时间：2012-07-18T07:23:00.750
> 
> 标签：java, eclipse, applet

我想在我的小程序中显示一个简单的球图像（使用 getCodeBase()），但是当我运行我的小程序时，要么什么都没有显示，要么我在 getImage 方法中的 String 参数上从 eclipse 中得到一个语法错误。我的错误是“语法错误：无效的转义序列。只允许 \b \n \f \" \'。”

我的图像存储在 C:\Java\eclipse\Images(Java)\ball.gif

这是我的代码：

```
import java.awt.*;
import java.applet.*;
public class Image1 extends Applet {
    private static final long serialVersionUID = 1L;
    Image pic;
    public void init(){
        pic = getImage(getCodeBase(), "\Images(Java)\ball.gif");
    }
    public void paint(Graphics g){
        g.drawImage(pic,0,0,this);
        g.drawImage(pic, 100,100,125,100,this);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:27:37.463

只是一些提示...

*   A) 您无法使用`getCodeBase()`方法获取本地图像，因为它返回 http://... 小程序位置路径。在您的 IDE 情况下，http 不可用...
*   B）要获得主机映像，`getCodeBase()`您必须在真实主机上部署您的小程序，而不是使用测试它`AppletViewer`
*   C）如果您只需要一个图像来在 IDE 中测试您的小程序，您可以使用[ImageIO](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)简单地获取它。我记得lib`AppletViewer`没问题`io.*;`

祝你好运

# asp.net - CompareValidator 错误信息位置

> ID：11536227
> 
> 赞同：0
> 
> 时间：2012-07-18T07:23:17.667
> 
> 标签：asp.net, compare, validation, comparevalidator

我的网页中有 CompareValidator 控件，它运行良好。我用它来验证用户可以在文本框中输入的日期。问题是，该错误消息显示在文本框的右侧。有没有办法在文本框下显示它？
控制代码是这样的：

```
<asp:CompareValidator
   runat="server"
   ID="myValidatorID"
   Type="Date"
   Operator="DataTypeCheck"
   ControlToValidate="DateTextBoxID"
   ErrorMessage="Date is not valid">
</asp:CompareValidator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:25:37.743

尝试这个

```
<table>

<tr>
<td><asp:TextBox runat="server" ID="txtBox"/></td>
<td>another control</td>
<td>another control</td>
</tr>
<tr>
<td><asp:CompareValidator
       runat="server"
       ID="myValidatorID"
       Type="Date"
       Operator="DataTypeCheck"
       ControlToValidate="DateTextBoxID"
       ErrorMessage="Date is not valid">
    </asp:CompareValidator>
</td>
<td></td>
<td></td>
<tr>

</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T07:46:47.253

尝试这个

它是在另一行显示错误消息的动态验证器。

```
<asp:CompareValidator
   runat="server"
   ID="myValidatorID"
   Type="Date"
   Operator="DataTypeCheck"
   ControlToValidate="DateTextBoxID"
   ErrorMessage="&lt;br /&gt;Date is not valid">
   Display="Dynamic" 
</asp:CompareValidator> 
```

# liferay - 如何将自定义方法和字段添加到 Liferay 用户模型类

> ID：11536229
> 
> 赞同：1
> 
> 时间：2012-07-18T07:23:20.050
> 
> 标签：liferay, liferay-6

我想在`liferay.portal.model.User`类中再添加 3 个方法和一个字段。任何人都知道我该怎么做？我可以像这样通过钩子切换类吗：

```
<service>
    <service-type>com.liferay.portal.model.User</service-type>
    <service-impl>my.pack.userExpanded</service-impl>
</service> 
```

我想仔细看看服务构建器，但找不到好的资源来展示如何用我自己的类切换 liferay 类（因为使用太多）。

所以第二个问题是有人知道关于这个的一些好的教程或博客吗？特别是我对添加额外的方法和字段感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:03:30.570

标准的 Liferay 开发者文档很好：

[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/overriding-a-portal-servi-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/overriding-a-portal-servi-4)

另一种选择是添加`Custom Fields`到用户实体：

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-18T12:02:37.643

您不能修改 liferay 实体。你也不能使用钩子来修改这些东西，钩子只能修改[文档](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/hoo-4)建议的有限的东西。

我认为您甚至不能使用 EXT 来修改 liferay 实体。

所以现在我想到的仍然是`custom-fields`为您的字段要求创建并构建一个帮助实用程序类，它将为您提供所需的用户方法。

您可以通过将帮助程序类打包到 jar 中并将其粘贴到全局路径（在 tomcat 中`[TOMCAT_HOME]/lib/ext`）来使门户网站可用。

# java - 如何在 Java 中打开第 2 层原始套接字？

> ID：11536232
> 
> 赞同：3
> 
> 时间：2012-07-18T07:23:29.930
> 
> 标签：java

如何在 Java 中打开第 2 层原始套接字？在 C 语言中，我们通常使用 AF_PACKET 级别来打开具有 sockaddr_ll 结构的第 2 层原始套接字。二层编程对应的socket包是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:39:18.463

这是不可能使用纯 Java 方法的，因为 Java 在第 3 层以下不提供网络支持。唯一的方法是`pcap`通过 JNI 使用本机库的解决方法。有几个 Java 库为此提供了更高级别的接口：

*   [https://github.com/mgodave/Jpcap](https://github.com/mgodave/Jpcap)（也可以写包）
*   [http://jpcap.sourceforge.net/](http://jpcap.sourceforge.net/)

编辑：更新了断开的链接

# mysql - MySQL CSV 导入要在里面包含 \\ 字符串值？

> ID：11536236
> 
> 赞同：0
> 
> 时间：2012-07-18T07:23:38.220
> 
> 标签：mysql, csv, import, escaping

如何导入包含具有以下字符串的列的 CSV：

```
\\abc 
```

原始值被转义（更改）到 MySQL 中：

```
\abc 
```

我不希望它被改变。我怎样才能阻止它不改变价值观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:56:05.757

假设您使用 加载数据[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)，您应该指定`FIELDS ESCAPED BY ''`以避免将单个`\`视为转义字符串。

如果您不使用`LOAD DATA INFILE`，那么您用于加载数据的应用程序负责发生的任何反转义，因此您应该提供相关详细信息。

# iphone - 如何在 UIButton 上设置标题

> ID：11536250
> 
> 赞同：2
> 
> 时间：2012-07-18T07:24:23.313
> 
> 标签：iphone

怎么设置文字`UIButton`

```
topYellowButton2 = [UIButton buttonWithType:UIButtonTypeCustom];
topYellowButton2.frame = CGRectMake(80, 0, 90, 20);

[topYellowButton2 setTitleColor:[UIColor colorWithRed:0.0 green:0.6 blue:1.0 alpha:1.0] forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:28:35.113

尝试这个

```
topYellowButton2=[UIButton buttonWithType:UIButtonTypeCustom]; 
topYellowButton2.frame=CGRectMake(80, 0, 90, 20);
[topYellowButton2 setTitle:@"Your Title" forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:30:03.480

为正常和突出显示设置标题

```
[topYellowButton2 setTitle:@"Button Title" forControlState:UIControlStateNormal];
[topYellowButton2 setTitle:@"Button Title" forControlState:UIControlStateHighlighted]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:28:09.660

只需添加这一行：

```
[topYellowButton2 setTitle:@"my button" forState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T07:26:36.027

```
[topYellowButton2 setTitle:@"My Title" forState:UIControlStateNormal]; 
```

# r - R 生成频率表

> ID：11536252
> 
> 赞同：0
> 
> 时间：2012-07-18T07:24:29.240
> 
> 标签：r, vector, frequency

我有这样的样本向量：

```
v <- c(1, 2, 1, 3, 2, 3, 3, 4, 1, 4) 
```

我想得到的是频率表，它会告诉我数字的频率，然后是另一个数字。

输出：

```
 1 2 3 4
1 0 1 0 1
2 1 0 1 0
3 1 1 1 0
4 1 0 1 0 
```

然后以百分比表示相同的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T07:34:34.603

这是一种方法：

```
## Construct a data frame in which each row is a pair of consecutive characters.
df <- data.frame(a=head(v,-1), b=v[-1])
## tabulate frequencies of the ordered pairs
res <- xtabs(~a+b, df)
res
#    b
# a   1 2 3 4
#   1 0 1 1 1
#   2 1 0 1 0
#   3 0 1 1 1
#   4 1 0 0 0

res/sum(res)
#    b
# a           1         2         3         4
#   1 0.0000000 0.1111111 0.1111111 0.1111111
#   2 0.1111111 0.0000000 0.1111111 0.0000000
#   3 0.0000000 0.1111111 0.1111111 0.1111111
#   4 0.1111111 0.0000000 0.0000000 0.0000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:35:37.597

如果我认为您的意思是正确的，请尝试：

```
xtabs(~v[-1]+v[1:(length(v)-1)])
     v[1:(length(v) - 1)]
v[-1] 1 2 3 4
    1 0 1 0 1
    2 1 0 1 0
    3 1 1 1 0
    4 1 0 1 0 
```

这与您的预期输出不匹配，但我不确定您是如何得出的。

对于百分比，使用`prop.table`：

```
prop.table(xtabs(~v[-1]+v[1:(length(v)-1)]))*100
     v[1:(length(v) - 1)]
v[-1]        1        2        3        4
    1  0.00000 11.11111  0.00000 11.11111
    2 11.11111  0.00000 11.11111  0.00000
    3 11.11111 11.11111 11.11111  0.00000
    4 11.11111  0.00000 11.11111  0.00000 
```

# php - 从图像创建居中对齐的缩略图

> ID：11536256
> 
> 赞同：0
> 
> 时间：2012-07-18T07:24:42.990
> 
> 标签：php

我正在尝试制作一个带有图像的网站，但我不想拥有传统的缩略图（它只是一个较小的图像），我想要这样的东西：http: [//imgur.com/r/funny](http://imgur.com/r/funny)

请注意所有图像的缩略图都是 160x160 并且只显示图像的中心。我想按照这些思路做一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:41:48.857

首先，在 PHP 中，您将 gd-lib 用于此类事情。

任务是这样进行的：

*   使用 imagecreatefromXXXX 打开原始图像：http: [//php.net/manual/de/function.imagecreatefromjpeg.php](http://php.net/manual/de/function.imagecreatefromjpeg.php)
*   使用 imagesx() 和 imagesy() 获取图像边界
*   您要调整图像大小的方法是：“获取原始图像的较小边并按比例调整图像大小。因此，至少一侧与相应的结果图像的一侧匹配”。棘手的是，当你有一个目标尺寸时，水平和垂直尺寸不相等。例如。170x120。
*   然后您创建一个新图像并使用 imagecopyresampled() 调整/复制原始图像的大小。
*   您现在有一个图像，其中一侧等于相应的目标侧。另一边较大或与目标图像上的相应尺寸相同。下一步是裁剪此图像。这也可以使用 imagecopyresampled() 来完成 - 同样在同一步骤中，您是否调整了图像的大小。
*   现在将图像保存在新文件名下（或另一个目录中）并链接它...

# java - 如何在java中使用FTPclient从FTPserver下载xml文件

> ID：11536258
> 
> 赞同：1
> 
> 时间：2012-07-18T07:25:02.447
> 
> 标签：java

问题当我从 ftp 服务器下载文件到本地机器时，文件正在复制，但文件内容没有复制，它显示为零字节文件，其中不包含任何内容。

请有人可以帮助我..

谢谢长良州

# ruby-on-rails - 如何将类/模块加载到模型中

> ID：11536262
> 
> 赞同：0
> 
> 时间：2012-07-18T07:25:11.980
> 
> 标签：ruby-on-rails, ruby, class, model

我正在 Ruby on Rails 上开发一个应用程序，但我被卡住了。我有一个类将所有奇怪的字符映射为普通字符（即 é, è -> e ）。我需要两个模型中的这个类，因为我不想重复代码，我想加载它以便模型可以使用它。知道该怎么做吗？

**编辑****我上传课程**

类 UtfAnalyzer < Ferret::Analysis::Analyzer 包括 Ferret::Analysis

```
CHARACTER_MAPPINGS = {
    ['à','á','â','ã','ä','å','ā','ă']         => 'a',
    ['æ']                                     => 'ae',
    ['ď','đ']                                 => 'd',
    ['ć','č','ĉ','ċ']                         => 'c',
    ['è','é','ê','ë','ē','ę','ě','ĕ','ė',]    => 'e',
    ['ƒ']                                     => 'f',
    ['ĝ','ğ','ġ','ģ']                         => 'g',
    ['ĥ','ħ']                                 => 'h',
    ['ì','ì','í','î','ï','ī','ĩ','ĭ']         => 'i',
    ['į','ı','ĳ','ĵ']                         => 'j',
    ['ķ','ĸ']                                 => 'k',
    ['ł','ľ','ĺ','ļ','ŀ']                     => 'l',
    ['ñ','ń','ň','ņ','ŉ','ŋ']                 => 'n',
    ['ò','ó','ô','õ','ö','ø','ō','ő','ŏ','ŏ'] => 'o',
    ['œ']                                     => 'oek',
    ['ą']                                     => 'q',
    ['ŕ','ř','ŗ']                             => 'r',
    ['ś','š','ş','ŝ','ș']                     => 's',
    ['ť','ţ','ŧ','ț']                         => 't',
    ['ù','ú','û','ü','ū','ů','ű','ŭ','ũ','ų'] => 'u',
    ['ŵ']                                     => 'w',
    ['ý','ÿ','ŷ']                             => 'y',
    ['ž','ż','ź']                             => 'z'
}
HTML_MAPPINGS = {
    ['&agrave;', '&aacute;', '&Agrave;', '&Aacute;', '&auml;', '&Auml;']                => 'a',
    ['&egrave;', '&eacute;', '&Egrave;', '&Eacute;', '&euml;', '&Euml;']                => 'e',
    ['&igrave;', '&iacute;', '&Igrave;', '&Iacute;', '&iuml;', '&Iuml;']                => 'i',
    ['&ograve;', '&oacute;', '&Ograve;', '&Oacute;', '&ouml;', '&Ouml;']                => 'o',
    ['&ugrave;', '&uacute;', '&Ugrave;', '&Uacute;', '&uuml;', '&Uuml;']                => 'u',
    ['&ccedil;', '&Ccedil;']                                                            => 'ç'
}

def self.token_stream(field, str)
  ts = MappingFilter.new(RegExpTokenizer.new(str, /([a-zA-Z0-9ÑñàáäèéëìíïòóöùúüÀÁÈÉËÌÍÏÒÓÖÙÚÜçÇ]|(&([aeiouAEIOU](acute|grave|uml)|ccedil|Ccedil);))+/), HTML_MAPPINGS)
  ts = MappingFilter.new(StandardTokenizer.new(str), CHARACTER_MAPPINGS)
  ts = MappingFilter.new(ts, CHARACTER_MAPPINGS)
  ts = LowerCaseFilter.new(ts)
end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:28:36.493

使用模块：

```
module CharConverter
  def convert(c)
    #your conversion logic here
  end
end 
```

然后在模型中包含模块：

```
class MyModel < ActiveRecord::Base
  include CharConverter
end 
```

方法 convert 将在 MyModel 实例范围内为您提供（如`MyModel.new.convert`）。为了使您可以在 MyModel 类范围（如`MyModel.convert`）中使用 convert 替换`include CharConverter`为`extend CharConverter`.

[您可以在此处](http://railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)找到有关扩展和包含之间区别的更多信息。

# android - 使用 Flex 4 和 as3 打开弹出窗口时背景屏幕的淡入淡出效果

> ID：11536263
> 
> 赞同：1
> 
> 时间：2012-07-18T07:25:14.947
> 
> 标签：android, actionscript-3, flex4

如何使用 flex 4 和动作脚本 3 为手机屏幕设置淡入淡出效果。当弹出窗口打开时，背景手机屏幕必须变暗（淡入淡出），当我关闭弹出窗口时，屏幕再次恢复正常模式。我怎样才能做到这一点 ？我尝试使用 s:transitions 但我无法做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:11:41.430

我会有一个 100% 宽度和高度的视图，带有灰色/黑色背景，并且仅在打开弹出窗口时将其添加到 displayList 中。从 0 开始 alpha 并逐渐增加其不透明度，这应该会创建类似于您正在寻找的东西。

# c# - 使用 DataTemplate 的 TreeView 中的无限子节点

> ID：11536264
> 
> 赞同：1
> 
> 时间：2012-07-18T07:25:21.210
> 
> 标签：c#, wpf, treeview, datatemplate, children

有没有办法在`TreeView`使用中创建无限的子节点**`DataTemplate`**？

我阅读了很多教程，但它们都只显示手动填充的`TreeView`. 我需要`TreeView`从数据库中填充我的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:56:10.367

尝试使用`HierarchicalDataTemplate`；要从 DB 中填充数据，您必须首先获取数据，创建适当的`DataModel`对象，然后使用它们来填充`TreeView`. 我还建议您为此使用 MVVM，MVVM 使其非常易于使用`TreeView`。

看看 Josh Smith 的以下精彩文章，解释这两个（以及更多）-

[使用 ViewModel 模式简化 WPF TreeView](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)

# jquery - 多合一横幅---链接图片

> ID：11536266
> 
> 赞同：1
> 
> 时间：2012-07-18T07:25:26.807
> 
> 标签：jquery, html, css

我购买了用于图像演示的代码，我想知道是否以及如何在图像上放置链接......例如：

[http://orhsfoundation.com/Trial](http://orhsfoundation.com/Trial)

从这里买的：

[http://codecanyon.net/item/jquery-banner-rotator-content-slider-carousel/full_screen_preview/1534434](http://codecanyon.net/item/jquery-banner-rotator-content-slider-carousel/full_screen_preview/1534434)（它是带有播放列表的横幅）

也不太重要的是，我在图像上有这个烦人的移动光标。css 中没有任何东西告诉它这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:27:46.293

您在包含图像的 div 中的 css 中有这个。如果您从此元素中删除下面显示的 css，它将更正光标。

它没有 id，但它有这些类 ( `allinone_bannerWithPlaylist easy ui-draggable`)

```
cursor: url(http://orhsfoundation.com/skins/hand.cur), url(http://orhsfoundation.com/skins/hand.cur), move; 
```

您也可以通过放置`cursor:default`图像来覆盖它。

还要在图像上放置链接，您需要使用`a`标签

```
<a href="LINKTOPAGE.html2"><img src="LINKTOIMAGE" /></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T14:59:35.497

只需将“数据链接”添加到`<li>`图像周围：

`<li data-transition="fade" data-target="_self" data-link="http://www.com"><img width="580" height="358" border="0" alt="" src="image.jpg" /></li>`

# javascript - 验证动态添加的输入字段

> ID：11536271
> 
> 赞同：44
> 
> 时间：2012-07-18T07:25:40.847
> 
> 标签：javascript, jquery, html, jquery-validate

我已[将此](http://docs.jquery.com/Plugins/Validation)jquery 验证插件用于以下表单。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>

<script>
    $(document).ready(function(){
        $("#commentForm").validate();
    });

    function addInput() {
        var obj = document.getElementById("list").cloneNode(true);
        document.getElementById('parent').appendChild(obj);
    }
</script>

<form id="commentForm" method="get" action="">
    <p id="parent">
        <input id="list"  class="required" />
    </p>

    <input class="submit" type="submit" value="Submit"/>
    <input type="button" value="add" onClick="addInput()" />
</form> 
```

单击添加按钮时，会动态添加新输入。但是，当提交表单时，仅验证第一个输入字段。如何验证动态添加的输入？谢谢...

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-18T11:15:28.793

您的输入应该具有“名称”属性。您需要动态添加规则，一种选择是在表单提交时添加它们。

这是我测试过的解决方案，它有效：

```
<script type="text/javascript">
   $(document).ready(function() {
        var numberIncr = 1; // used to increment the name for the inputs

        function addInput() {
            $('#inputs').append($('<input class="comment" name="name'+numberIncr+'" />'));
            numberIncr++;
        }

        $('form.commentForm').on('submit', function(event) {

            // adding rules for inputs with class 'comment'
            $('input.comment').each(function() {
                $(this).rules("add", 
                    {
                        required: true
                    })
            });            

            // prevent default submit action         
            event.preventDefault();

            // test if form is valid 
            if($('form.commentForm').validate().form()) {
                console.log("validates");
            } else {
                console.log("does not validate");
            }
        })

        // set handler for addInput button click
        $("#addInput").on('click', addInput);

        // initialize the validator
        $('form.commentForm').validate();

   });

</script> 
```

以及 html 表单部分：

```
<form class="commentForm" method="get" action="">
    <div>

        <p id="inputs">    
            <input class="comment" name="name0" />
        </p>

    <input class="submit" type="submit" value="Submit" />
    <input type="button" value="add" id="addInput" />

    </div>
</form> 
```

祝你好运！如果适合您，请批准答案！

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-11-04T17:12:24.063

添加新字段后重置表单验证。

```
function resetFormValidator(formId) {
    $(formId).removeData('validator');
    $(formId).removeData('unobtrusiveValidation');
    $.validator.unobtrusive.parse(formId);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-13T08:25:18.657

您需要在添加动态内容后重新解析表单以验证内容

```
$('form').data('validator', null);
$.validator.unobtrusive.parse($('form')); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-29T20:53:33.143

发布的一个 mahesh 不起作用，因为缺少属性名称：

所以而不是

```
<input id="list" class="required"  /> 
```

您可以使用：

```
<input id="list" name="list" class="required"  /> 
```

[修改版](http://jsfiddle.net/bAsat/43/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-19T12:57:48.380

jquery 验证插件版本工作正常**v1.15.0**但**v1.17.0**不适合我。

```
$(document).find('#add_patient_form').validate({
          ignore: [],
          rules:{
            'email[]':
            {
              required:true,
            },               
          },
          messages:{
            'email[]':
            {
              'required':'Required'
            },            
          },    
        }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-02T16:56:18.573

关于@RitchieD 响应，如果您使用 jQuery，这里有一个 jQuery 插件版本可以让事情变得更容易。

```
(function ($) {

    $.fn.initValidation = function () {

        $(this).removeData("validator");
        $(this).removeData("unobtrusiveValidation");
        $.validator.unobtrusive.parse(this);

        return this;
    };

}(jQuery)); 
```

这可以像这样使用：

```
$("#SomeForm").initValidation(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-12T20:23:40.553

```
$('#form-btn').click(function () {
//set global rules & messages array to use in validator
   var rules = {};
   var messages = {};
//get input, select, textarea of form
   $('#formId').find('input, select, textarea').each(function () {
      var name = $(this).attr('name');
      rules[name] = {};
      messages[name] = {};

      rules[name] = {required: true}; // set required true against every name
//apply more rules, you can also apply custom rules & messages
      if (name === "email") {
         rules[name].email = true;
         //messages[name].email = "Please provide valid email";
      }
      else if(name==='url'){
        rules[name].required = false; // url filed is not required
//add other rules & messages
      }
   });
//submit form and use above created global rules & messages array
   $('#formId').submit(function (e) {
            e.preventDefault();
        }).validate({
            rules: rules,
            messages: messages,
            submitHandler: function (form) {
            console.log("validation success");
            }
        });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-10T01:16:11.350

尝试使用输入数组：

```
<form action="try.php" method="post">
    <div id="events_wrapper">
        <div id="sub_events">
            <input type="text" name="firstname[]" />                                       
        </div>
    </div>
    <input type="button" id="add_another_event" name="add_another_event" value="Add Another" />
    <input type="submit" name="submit" value="submit" />
</form> 
```

并添加这个脚本和[jQuery](http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js)，使用 foreach() 来检索 $_POST 的数据：

```
<script>                                                                                    
    $(document).ready(function(){
        $("#add_another_event").click(function(){
        var $address = $('#sub_events');
        var num = $('.clonedAddress').length; // there are 5 children inside each address so the prevCloned address * 5 + original
        var newNum = num + 1;
        var newElem = $address.clone().attr('id', 'address' + newNum).addClass('clonedAddress');

        //set all div id's and the input id's
        newElem.children('div').each (function (i) {
            this.id = 'input' + (newNum*5 + i);
        });

        newElem.find('input').each (function () {
            this.id = this.id + newNum;
            this.name = this.name + newNum;
        });

        if (num > 0) {
            $('.clonedAddress:last').after(newElem);
        } else {
            $address.after(newElem);
        }

        $('#btnDel').removeAttr('disabled');
        });

        $("#remove").click(function(){

        });

    });
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-04T13:24:44.517

如果您有一个表单，您可以添加一个类名，如下所示：

```
<form id="my-form">
  <input class="js-input" type="text" name="samplename" />
  <input class="js-input" type="text" name="samplename" />
  <input class="submit" type="submit" value="Submit" />
</form> 
```

然后，您可以使用验证器的[addClassRules](https://jqueryvalidation.org/jQuery.validator.addClassRules/)方法添加这样的规则，这将应用于所有动态添加的输入：

```
$(document).ready(function() {
  $.validator.addClassRules('js-input', {
    required: true,
  });
  //validate the form
  $('#my-form').validate();
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-06T07:34:46.953

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-validation@1.17.0/dist/jquery.validate.js"></script>

<script>
    $(document).ready(function(){
        $("#commentForm").validate();
    });

    function addInput() {

        var indexVal = $("#index").val();
        var index = parseInt(indexVal) + 1
        var obj = '<input id="list'+index+'" name=list['+index+']  class="required" />'
        $("#parent").append(obj);

        $("#list"+index).rules("add", "required");
        $("#index").val(index)
    }
</script>

<form id="commentForm" method="get" action="">
    <input type="hidden" name="index" name="list[1]" id="index" value="1">
    <p id="parent">
        <input id="list1"  class="required" />
    </p>
    <input class="submit" type="submit" value="Submit"/>
    <input type="button" value="add" onClick="addInput()" />
</form> 
```

# android - 传输图像中的错误

> ID：11536272
> 
> 赞同：0
> 
> 时间：2012-07-18T07:25:40.987
> 
> 标签：android, file, memory, bitmap, file-transfer

您好，当我想在 android 中传输图像时，我遇到了这个错误。我不明白为什么。

**编辑：我找到了理由。理由是他们没有足够的内存。如何更改允许的内存？**

```
 EDIT:FATAL EXCEPTION: main
   java.lang.OutOfMemoryError

07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:587)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:389)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at P12.transferImage(P12.java:503)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at P12.access$4(P12.java:487)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at P12$6.onClick(P12.java:313)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.view.View.performClick(View.java:3644)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.view.View$PerformClick.run(View.java:14313)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.os.Handler.handleCallback(Handler.java:605)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.os.Looper.loop(Looper.java:137)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at android.app.ActivityThread.main(ActivityThread.java:4514)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at java.lang.reflect.Method.invokeNative(Native Method)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at java.lang.reflect.Method.invoke(Method.java:511)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
07-18 08:50:35.169: E/AndroidRuntime(16772):    at dalvik.system.NativeStart.main(Native Method)
07-18 08:55:44.474: I/Process(16772): Sending signal. PID: 16772 SIG: 9
07-18 08:55:44.764: D/dalvikvm(17129): GC_FOR_ALLOC freed 65K, 4% free 12756K/13187K, paused 16ms 
```

问题是在线的

```
Bitmap imgTaken = BitmapFactory.decodeFile(from, options); 
```

url文件是正确的我已经验证

这是我的转移功能的开始。

```
private void transferImage(String from,String imageName) throws IOException {
    Log.i("debug","from:"+from.toString());
    // we want remote host, user name and password
    if (from == null || from.length() == 0) {
        Toast.makeText(getBaseContext(), getString(R.string.errorFTPparameters), Toast.LENGTH_LONG).show();
        setResult(11);
        finish();
    }

    try {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inTempStorage = new byte[16*1024];

        // byte array transfers
        Bitmap imgTaken = BitmapFactory.decodeFile(from, options);

        if (imgTaken == null) {
            Toast.makeText(getBaseContext(), getString(R.string.errorcreatingstream), Toast.LENGTH_LONG).show();

            setResult(11);
            finish();
        }

        // transforming image into byte array
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        imgTaken.compress(CompressFormat.JPEG, 60, bos);
        byte[] bitmapdata = bos.toByteArray();

        // base64 encoding of the bytes in a string
        String bos1 = Base64.encodeBytes(bitmapdata);
        //... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:09:27.860

好吧，您的图像太大，无法放入 Android 为您分配的内存中。如果您不需要全分辨率图片，请尝试使用以下方法[将图像尺寸](https://groups.google.com/forum/?fromgroups#!topic/android-developers/74NNLVN6AN0)预先设置为更小[`inSampleSize`](https://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)：

```
options.inSampleSize = 2 //gives you an image with half the height/width 
```

如果您需要全分辨率图片，请说明您想要用您的`transferImage`功能实现什么，那么也许我们可以为您提供另一种方式。

# c# - 正则表达式性能问题？

> ID：11536274
> 
> 赞同：0
> 
> 时间：2012-07-18T07:25:49.083
> 
> 标签：c#, regex, visual-studio-2005

我有如下所示的代码，它正在做正则表达式比较，我想优化代码。当我使用 .net 分析器检查时，它显示 80 % 的时间在这里花费，我检查了我的正则表达式过滤器是否发生任何回溯，但在正则表达式方面没有任何问题。所以这是现有的代码

```
public class TestFilter : SmoothFilter
   {
     public override bool Apply(Team liveEvent)
          {
                   // Apply each individual piece of the filter using the Match method
                   if ((Filter == null) || (Filter.Length <= 0) || Match(Filter, pl.Instance))
                   {

          }

    private bool Match(string pattern, string inputdata)
    {
        bool vals = Regex.IsMatch(inputdata, pattern, RegexOptions.IgnoreCase);
        return vals;
    }
} 
```

当我用谷歌搜索时，我看到了链接[http://blog.kurtschindler.net/post/regular-expression-performance-comparisons](http://blog.kurtschindler.net/post/regular-expression-performance-comparisons)，如果您不花费初始启动时间，则提到了最佳和更快的方法。所以我修改了我的代码，如下所示。但是我移动了我的系统，我没有任何工具可以分析，任何人都可以告诉我它是否真的有所改善？下面这个修改过的代码

```
 static readonly Regex regexForMethod_E = new Regex("pattern", RegexOptions.Compiled);

 private bool Match(string pattern, string inputdata)
 {
     bool vals = regexForMethod_E.IsMatch("inputdata");
     return vals;
} 
```

**编辑**

我仍然不知道如何在 Match() 方法中移动正则表达式实例化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:00:55.943

这取决于模式的复杂性。在任何情况下它都不会变慢，它会随着正则表达式的更复杂而加快速度。

此外，您的代码不等效。为此，您需要调用：

```
new Regex("pattern", RegexOptions.Compiled | RegexOptions.IgnoreCase); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:30:11.223

简短的回答：我相信是的，是的，但我不知道有多少。

长（呃）答案：我认为您正在为自己和计算节省大量时间：看看您的方法首先需要执行多少即时计算。现在看看第二种方法需要做多少——你的函数只需要传递一个参数，而不是 3 个；这是性能提升（尽管很小）。

正则表达式已经计算过了，所以程序需要做的就是根据您的输入数据检查它，而不是获取所有参数并即时计算它们。

一个更快的方法是这样的：

```
private bool Match(string inputdata)
{
     return regexForMethod_E.IsMatch("inputdata");
} 
```

我知道这种变化几乎可以忽略不计，但想象一下这个电话被打了 1000 次。那是您实际上不需要的 1000 个布尔变量！

# c# - .net 内存使用情况，决定私有字节大小的因素

> ID：11536276
> 
> 赞同：4
> 
> 时间：2012-07-18T07:25:54.097
> 
> 标签：c#, memory-management, memory-leaks, working-set

**被私有字节搞糊涂了！**

目前正在使用 ANTS 分析器分析我们的 C# .NET 应用程序的内存使用情况。以下是我们在屏幕上可见的主窗体启动后的发现。没有使用其他功能。

*Gen 0 堆 - 5.8MB
Gen 1 堆 - 2.5MB
Gen 2 堆 - 所有堆中的 13.9MB
字节 - 17MB
大对象堆 - 0.7MB
私有字节 - 130MB
工作集 - 150MB*

如果所有堆中的字节只有 17MB，为什么我们有这么大的私有字节分配？私有字节是由系统分配的，还是在软件填充时从零开始扩展？即**私有字节是一个实际上可能只被部分使用的泡沫吗？如果是这样，是什么决定了它的大小？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:29:52.153

[来自 Red-Gate：关于“私有字节”的一般信息](http://www.red-gate.com/supportcenter/content/knowledgebase/ANTS_Memory_Profiler/KB201003000463)

> 私有字节包括 .NET 堆上的可用空间以及非托管内存使用情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:55:02.993

私有字节是进程的所有虚拟分配，不能与其他进程共享（即不包括代码和内存映射文件）。这将包括所有 NT (native) 堆、任何托管堆、堆栈和任何由应用程序 ( [VirtualAlocEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366890%28v=vs.85%29.aspx) ) 显式分配的内存。

您可以使用`!dumpheap -stat`获取 CLR 内存使用情况的详细使用情况。请参阅[CLR 内存泄漏](http://rusanu.com/2009/01/19/clr-memory-leak/)

# apache-flex - 弹性列表：与第一项不同的外观

> ID：11536277
> 
> 赞同：1
> 
> 时间：2012-07-18T07:25:55.217
> 
> 标签：apache-flex, mobile, flash-builder

我正在使用 Flex 创建一个显示新闻列表的移动应用程序。

每条新闻都有一个标题和一张图片，所以我使用一个带有 iconItemRenderer 的列表来显示结果。似乎 itemRenderers 总是为所有项目提供相同的外观。

但是我想给第一个项目一个不同的外观，一个全宽的图片和一个更大的标题。我不知道该怎么做。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:32:29.187

您应该使用自定义组件并覆盖一些基本方法。所以，我尝试这样做，但遇到了一些问题。可能是 flex 3 中没有解决这个问题（我使用的是 flex 3 :-)）。所以，尽管如此，我还是找到了解决方案。

```
import mx.controls.List;
import mx.core.IFactory;

public class ListEx extends List{

    public function ListEx(){
        super();
    }

    public var item1stRenderer:IFactory;
    public var item1stCount:int=1;
    private static var _first:int = 0;

    override public function getItemRendererFactory(data:Object):IFactory{
        if(_first<=item1stCount && item1stRenderer != null && data != null){
            return item1stRenderer;
        }else{
            return super.getItemRendererFactory(data);
        }
    }

    override public function get itemRenderer():IFactory{
        if(_first<=item1stCount && item1stRenderer != null){
            _first++;
            return item1stRenderer;
        }else{
            return super.itemRenderer;
        }           
    }       
} 
```

让我们测试一下！

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" height="100%" width="100%" xmlns:local="*">

    <mx:Model id="mystates">
        <states>
            <state label="Alabama" data="AL"/>
            <state label="Alaska" data="AK"/>
            <state label="Arizona" data="AZ"/>
            <state label="Arkansas" data="AR"/>
            <state label="California" data="CA"/>
            <state label="Colorado" data="CO"/>
            <state label="Connecticut" data="CT"/>
        </states>
    </mx:Model>

    <local:ListEx itemRenderer="mx.controls.TextInput" id="g_list" dataProvider="{mystates.state}" width="100%">
        <local:item1stRenderer>
            <mx:Component>
                <mx:Label color="blue"/>
            </mx:Component>
        </local:item1stRenderer>
    </local:ListEx>

</mx:Application> 
```

希望，我可以帮助你。

PS：对不起我的英语，我说俄语:)

# gcc - 在 Fedora 16 中制作后，Ada 编译器未安装在此系统上错误

> ID：11536284
> 
> 赞同：2
> 
> 时间：2012-07-18T07:26:26.133
> 
> 标签：gcc, ada, fedora16

我安装了 gcc 4.3.4 罚款一个 fedora16 但我的问题是运行 ada 程序得到错误 `Ada compiler not installed on this system`。我认为它崩溃是因为在 gcc 4.6.3 上安装了旧版本的 gcc。如何克服这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:57:27.960

安装多个版本的gcc绝对没有问题。问题是 Ada 编译器 gnat 依赖于特定的 gcc，例如，gnat-4.x 依赖于 gcc-4.x-

文件 /usr/bin/gcc 应该是默认 gcc 的符号链接。将符号链接更改为正确的 gcc (/usr/bin/gcc-4.6) 可以解决您的问题。^^^^^^^ 适用于 gnat-4.6 的 gcc

如果更改符号不起作用，请再次重新安装（删除+安装）Ada 编译器（gnat）。

# .net - 是否有充分的理由在单平台系统上使用 .proto 文件？

> ID：11536285
> 
> 赞同：3
> 
> 时间：2012-07-18T07:26:30.003
> 
> 标签：.net, protocol-buffers, protobuf-net

我们正在开发一些通过协议缓冲区相互通信的服务。所有服务都写在 .NET 上。我预计不会将它们从 .NET 中迁移出来。我预计不会在其他平台上使用与服务相同的消息。

这些消息当前是用 .proto 编写的。代码生成步骤对我来说似乎是多余的。

除了跨平台兼容性（这不是我们关心的问题）之外，还有什么理由用 .proto 而不是直接用 .NET 语言编写消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:36:06.257

鉴于您描述的设置（.NET-to-.NET，不太可能需要跨平台），那么我会说“不”。我们做了**很多**符合这一类的事情，我们只是代码优先，即我们编写 C# 类型，然后使用它们。这给了我们对类型的完全控制和灵活性，并避免了不必要的构建/工具步骤。

事实上，这实际上是 protobuf-net 的核心动机和目的：它能够像所有其他 .NET 序列化程序一样，从常规 c# 类型工作而无需在 DSL 中定义（`XmlSerializer`、`DataContractSerializer`、`JavaScriptSerializer`等） .

请注意，虽然 protobuf-net 包含一个`.GetProto<T>`功能，但它尚未在 v2 中重新实现；但是，既然跨平台预编译器已经完成并且可以正常工作，那么这是我列表中的下一个。我的观点是：如果需要跨平台等，*那么*protobuf-net 可能能够帮助您从现有合约中生成 .proto。

如果您担心在某些时候*可能*需要与其他平台互操作，请坚持使用核心 protobuf 功能集。避免添加 protobuf-net，例如：

*   遗产
*   .NET 特定类型支持（`DateTime`,`decimal`等）
*   参考跟踪
*   动态类型支持

# mysql - 插入分区表需要很长时间

> ID：11536289
> 
> 赞同：0
> 
> 时间：2012-07-18T07:26:39.203
> 
> 标签：mysql, mysqli, bulkinsert, partitioning, load-data-infile

我有如下表结构：

```
CREATE TABLE IF NOT EXISTS `dnddata` (
  `numbers` varchar(10) NOT NULL,
  `opstype` char(1) NOT NULL,
  PRIMARY KEY (`numbers`)
) ENGINE=MYISAM DEFAULT CHARSET=latin1
/*!50100 PARTITION BY KEY (numbers)
PARTITIONS 20 */; 
```

当我将数据插入此表时需要很长时间。

用 50 分钟插入 300 万条记录。

我用过`load data`和`insert into dnddata SELECT * from another_myisamtable`。

这两种方法花费的时间几乎相同。

没有分区的同一张表耗时不到 2 分钟。

我必须插入 5000 万条记录的数据。

请建议插入这么多记录的最佳方法。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:05:55.673

分区表的有趣之处在于，当您尝试`INSERT`只进入一个分区时，您必须去锁定（或至少“访问锁定”）所有分区。所以 - 更多分区 == 更多锁。

您可以在[Giuseppe Maxia 的博客](http://datacharmer.blogspot.co.il/2010/05/two-quick-performance-tips-with-mysql.html)中了解更多信息。

尽管该帖子讨论了`INSERT`单行，但同样的问题也适用于多行。

由于您使用的是 MyISAM，因此会使用实际的锁。您可以选择对相同格式的 InnoDB 表进行相同的尝试。

# html - 页面调整后 CSS 自动调整页面大小

> ID：11536295
> 
> 赞同：-2
> 
> 时间：2012-07-18T07:27:00.033
> 
> 标签：html, css

美好的一天。我怎样才能设置我的CSS，每次我重新调整浏览器的大小时，页面上的内容都会自动相应地重新调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:28:44.547

使用 `%`而不是`px`. 你也可以使用 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:27:23.183

我猜你正在寻找的是一个响应式框架。我建议你使用现有的[Foundation 3](http://foundation.zurb.com/)或[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。它们还提供不仅仅是响应式的功能，例如预样式按钮、手风琴菜单、下拉菜单等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:30:51.653

这是示例代码..看看

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
    <TITLE>Strawberries</TITLE>
    <SCRIPT TYPE="text/javascript">
        <!--
        function image(url, width, height) {
            return('<IMG SRC="' + url + '"' +
                ' WIDTH=' + width +
                ' HEIGHT=' + height + '>');
        }
        function strawberry1(width) {
            return(image("images/Strawberry1.gif", width, Math.round(width*1.323)));
        }

        function strawberry2(width) {
            return(image("images/Strawberry2.gif", width, Math.round(width*1.155)));
        }
        // -->
    </SCRIPT>
    <SCRIPT TYPE="text/javascript">
        <!--
        var imageWidth = window.innerWidth/4;
        var fontSize = Math.min(7, Math.round(window.innerWidth/100));
        document.writeln('<TABLE>\n' +' <TR><TD>' + strawberry1(imageWidth) + '\n' +'<TH><FONT SIZE=' + fontSize + '>\n' +'"Doubtless God <I>could</I> have made\n' +'a better berry, but doubtless He\n' +'never did."</FONT>\n'+'<TD>' + strawberry2(imageWidth) + '\n' +'</TABLE>');
        // -->
    </SCRIPT>
    </HEAD>
<BODY>    
<HR>

Strawberries are my favorite garden crop; a fresh ...
</BODY>
</HTML> 
```

# android - Admob 不计算点击次数

> ID：11536298
> 
> 赞同：0
> 
> 时间：2012-07-18T07:27:08.063
> 
> 标签：android, admob

我的 Android 应用程序在市场上已经三天了，展示次数增加了..但点击次数为 0。

我知道有些人点击了广告，但 admob 不计算此点击次数..（我认为代码是正确的..我尝试点击的第一天，admob 计算它）

有人知道吗？有什么想法或建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:36:42.710

有时需要几天时间。我经常看到过去 2-3 天的变化，直到数字稳定下来。这可能是由“填充”选项引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T21:58:26.520

不要点击你的广告，任何作弊都会让你被封号！稍等一下，它们将被计算在内，如果不删除站点/应用程序并获取新的发布者 ID，然后更新您的应用程序。

# javascript - 以面向对象的方式使用 Meteor 和 javascript

> ID：11536301
> 
> 赞同：3
> 
> 时间：2012-07-18T07:27:09.070
> 
> 标签：javascript, meteor

请多多包涵，因为我是 JS 新手，并且在使用 Meteor 实现某些事情时遇到了麻烦。我用 JavaScript 实现了一个类

```
function Class() {
  this.property = 0
  this.method = function () {
  return "method called"
  }
} 
```

我使用 new Meteor.collection 制作了一个新的 Meteor Collection bu，并成功检索了客户端上的数据，并且可以在 html 模板中显示 Class.property。但是，我无法访问 Class.method 并且想知道是否有任何方法可以实现这一点，以及使用 Meteor.methods 定义将 Class 实例作为输入的函数是否是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T22:11:59.423

对于仍在查看此内容的任何人，代码不起作用的原因是因为 mongodb 将文档存储为 bson。bson 和 json 一样，不支持函数（[http://bsonspec.org](http://bsonspec.org)），所以当上面的类被流星保存到 mongo 中时，该方法不会作为文档的一部分保存。

我知道没有简单优雅的解决方案。我有同样的问题。为了利用类方法，您需要在每次需要时实例化该类，您可以将其作为数据库模型的一部分来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:52:08.220

这不是一个真正的答案，但在流星的包管理器中，您可以添加诸如[骨干网](http://backbonejs.org/)之类的库，它为您提供模型、集合和视图以及一个不错的路由器，我发现在制作流星应用程序时非常方便。Backbone 与[jQuery](http://jquery.com/)配合得很好。

我的另一个建议是使用像[Mootools](http://mootools.net/)这样的库，它与 jQuery 不同，它不会尝试改变您编写 javascript 的方式，而是增强制作面向对象的 javascript 的体验。（见：[jqueryvsmootools](http://jqueryvsmootools.com/)）。使用 mootools，您可以通过以下方式制作课程...

```
var MyClass = new Class({
    'Implements': [Options],

    //default options
    'options': {
        'foo': null
    },

    'initialize': function(options) {
        this.foo = options.foo;
    },

    'bar' : function() {
       return this.foo;
    }
});

var blub = new MyClass({'foo': 'Hello World'});
blub.bar(); // "Hello World" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-04T20:35:01.430

我想做同样的事情。

我发现了一个名为“transform”的函数，当从流星集合中获取某些东西时会调用它。您可以根据需要使用它向流星对象添加功能。

这是向流星对象添加“endDate”函数和“remaining”函数的示例

```
Products = new Meteor.Collection("Products", {
  transform: function (doc) {
    doc.endDate = function () {
      // SugarJS gives us minutesAfter() which gives us a nice syntax for
      // creating new Date objects
      // http://sugarjs.com/api/Number/unitAfter
      return ((25).minutesAfter(this.startDate));
    };
    doc.remaining = function () {
      return this.endDate().getTime() - Date.now();
    };
    return doc;
  }
}); 
```

在这里阅读更多： [http ://www.okgrow.com/posts/2014/05/19/meteor-transform/](http://www.okgrow.com/posts/2014/05/19/meteor-transform/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T05:04:00.797

这种方法对我来说效果很好：

[http://www.okgrow.com/posts/2014/05/19/meteor-transform/](http://www.okgrow.com/posts/2014/05/19/meteor-transform/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-18T10:55:52.837

我对 Meteor 一无所知，但我发现您的代码有问题。您在以下内容后缺少分号：

```
this.property = 0 
```

如果没有该分号，javascript 解释器将不会执行 this.method 分配。

# c# - 使用 Access 数据库的 Csharp 数据库应用程序

> ID：11536303
> 
> 赞同：0
> 
> 时间：2012-07-18T07:27:16.350
> 
> 标签：c#, ms-access-2010

我是编程新手，并尝试使用 MS Access DB 2010 使用 C# 2010 Express 开发数据库应用程序。

我在表单上通过向导生成了 DataGridView 和 Detail 视图。我正在使用文本框的 TextChanged 事件过滤数据。

当我浏览记录时，datagridview 也会根据详细视图上的当前记录滚动，反之亦然。

在应用和删除过滤后，此导航行为根本不起作用（即 datagridview 不再根据详细视图中的当前记录滚动）。

任何帮助，将不胜感激。

谢谢。

这是我用于过滤数据的代码（FilterField 来自单选按钮的 Tag 属性）：

```
DataView dv = new DataView(personel_csDataSet.Tables["tblData"]);
dv.RowFilter = FilterField + " like '%' + '" + tbFilter.Text + "' + '%' ";
this.tblDataDataGridView.DataSource = dv;
tblDataBindingSource.Filter = FilterField + " like '%' + '" + tbFilter.Text + "' + '%' "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:44:22.193

那是因为您为网格和详细信息视图设置了不同的数据源。如果 tblDataBindingSource 是详细视图的数据源，请将其指定为网格的数据源，并且不要创建另一个视图：

this.tblDataDataGridView.DataSource = tblDataBindingSource;
tblDataBindingSource.Filter = FilterField + "like '%' + '" + tbFilter.Text + "' + '%' ";

顺便说一句，您不必在那里精确地分配数据源。您可以在开始时执行此操作，而无需在应用过滤器后重新分配它。

# android - Android支持屏幕设计

> ID：11536305
> 
> 赞同：1
> 
> 时间：2012-07-18T07:27:21.473
> 
> 标签：android

我知道在 Android 中支持多个屏幕，并在我的应用程序中使用它。但是支持不同的屏幕尺寸和 DPI 会使您的应用程序尺寸变大。我们都知道 Google Play 中 5​​0mb 的文件大小限制，对吧？那么，是否可以创建如下所示的文件夹？

```
\layout-small-160
\layout-normal-240 
```

如果这是不可能的，这里有没有人知道如何支持多种屏幕尺寸及其 DPI，而不使用太多图像来缩小我的应用程序尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:30:49.623

我只给出我的建议，你可以试试。

默认情况下，我们有 3 个可绘制文件夹 drawable-ldpi(120)、drawable-mdpi(160)、drawable-hdpi(240)。

当 App 需要图片时，Android 会根据屏幕命运查找图片。显然，drawable-ldpi 文件夹中的图像适用于运行在低端手机上的应用程序。

但是如果 drawable-ldpi 文件夹中没有图像。Android 会查找 drawable-hdpi 中是否有图像。如果存在，android 将缩放图像（0.5）并显示它。

所以你不需要为每一个命运准备图像。您只需要为 hdpi scrren 准备图像。而对于一些需要精确尺寸的个体图像，则需要为三命运做好准备。

你可以下载一些著名的APK并解压出来，然后进入res文件夹看看作者是怎么做的。

对不起我的英语不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:25:44.103

来自Android 文档的[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)文章：

```
To optimize your application's UI for the different screen sizes and densities, you can provide alternative resources for any of the generalized sizes and densities. Typically, you should provide alternative layouts for some of the different screen sizes and alternative bitmap images for different screen densities. At runtime, the system uses the appropriate resources for your application, based on the generalized size or density of the current device screen. 
```

因此，是的，可以为您在问题中提到的不同布局创建文件夹。以下是为不同的屏幕尺寸和不同的位图可绘制对象组织资源文件夹的良好做法：

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

然而，您不需要为屏幕尺寸和密度的每种组合提供替代资源。[如果您按照此处](http://developer.android.com/guide/practices/screens_support.html#screen-independence)描述的说明开发应用程序，该系统提供了强大的兼容性功能，可以处理在任何设备屏幕上呈现您的应用程序的大部分工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:31:54.733

2条建议：

1.  将图像大小调整为您需要的大小。使用适当的压缩（使用专业应用程序编辑图像，如 Photoshop，优化图像并很好地压缩它）。
2.  将部分图像放在外部服务器上，并在第一次使用时全部下载。从服务器下载图像的好处是您知道设备尺寸，因此您只能下载相关尺寸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:24:50.597

案例关闭.. 可以创建一个包含两个修饰符的文件夹..

像这样

layout-normal-hdpi ---- 这只会设置来自具有 240 dpi 和普通屏幕的特定手机的视图

感谢所有在这里发表评论并给出想法的人..

# c - 如何根据输入测试用例文件测试我的程序

> ID：11536306
> 
> 赞同：0
> 
> 时间：2012-07-18T07:27:30.487
> 
> 标签：c, windows

我参加了一些编码竞赛，幸运的是我的代码也运行了。然而，我的解决方案出乎意料，因为我对输入的模式有误。

* * *

问题涉及将整数作为输入并执行一些操作并返回不同或相同的整数。我的程序没有任何问题，我只是不知道如何编码以便接受这样的输入

* * *

```
Input

The input will contain several test cases (not more than 10). 
Each test case is a single  line with a number n, 0 <= n <= 1 000 000 000\. 
It is the number given as input.

Output

For each test case output a single line, containing the integer returned. 
```

* * *

```
Example

Input:
12
2

Output:
13
2 
```

* * *

我的代码是

* * *

```
#include <stdio.h>

int functionReturningInteger(int n)
{
// implementation
........ 
return num;
}

int main(void)
{

int number;
//printf("Enter the number: ");
scanf("%d",&number);
printf(functionReturningInteger(number));
return 0; 
```

}

* * *

我怎么知道他们将提供多少输入（尽管它们确实提供了最大限制）。如果我使用一个数组来存储这些大小等于最大限制的输入，我如何检查 c 中整数数组的大小？

* * *

我将感谢任何人提供一小段代码。此外，如果能够根据输入测试文件对其进行测试并生成“output.txt”（输出文件）。我已经有了所需的输出文件“des.txt”。那么我如何匹配两个文件是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:32:25.237

您可以逐行读取，直到文件中没有可读取的内容。这样您就不需要知道给出了多少输入。

在 C 中没有跟踪数组大小的默认方法。

要匹配您可以`diff`在 Linux\Unix 操作系统上使用的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:33:55.167

```
#include <stdio.h>
int scanned;
while((scanned = scanf("%d", &number)) != EOF) {
    printf("%d\n", functionReturningInteger(number));
} 
```

如果`scanf`在成功转换之前检测到输入结束，则返回`EOF`.

对于其他问题，重定向输入和输出，

```
$ ./your_prog < input.txt > output.txt 
```

并比较

```
$ comp output.txt des.txt 
```

# jquery - JQuery Mobile 选择菜单的选择选项选择值

> ID：11536307
> 
> 赞同：0
> 
> 时间：2012-07-18T07:27:34.480
> 
> 标签：jquery, html, jquery-mobile

在我的 php 文件中，我有两个选择菜单。When the first one is selected second one gets the values with jquery. 它在简单的 php 文件中运行良好。**但是，当使用JQuery mobile**粘贴到文件时，会出现一个小问题：更改第一个时，第二个的值会发生变化，但第一个的选定选项仍然存在。

这是我的 .js 文件：

```
function deg(){
var id = document.getElementById("il").options[document.getElementById("il").selectedIndex].value;
var ilcx;

switch(id){
case "a":
ilcx = {"x" : "x"
}; break;
case "b":
ilcx = {"y" : "y"
}; break;
case "c":
ilcx = {"c" : "c"
}; break;

}

var $el = $("#ilcx");
$el.empty(); 
$.each(ilcx, function(key, value) {
  $el.append($("<option></option>")
     .attr("value", value).text(key));
}); 
```

和php的部分：

```
 <select name="il" id="il" onchange="deg();">
                            <option id="a" value="a">a</option>
                            <option id="b" value="b">b</option>
                            <option id="c" value="c">c</option>
  </select>
                        <select name="ilcx" id="ilcx">
                            <option id="x" value="x">x</option>
                            <option id="y" value="y">y</option>
                            <option id="z" value="z">z</option>

    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:50:40.170

用解决方案做了一个[jsfiddle](http://jsfiddle.net/Hx3bt/1/)

**HTML**

```
<select name="il" id="il">
    <option id="a" value="x" selected="selected">a</option>
    <option id="b" value="y">b</option>
    <option id="c" value="c">c</option>
</select>
<select name="ilcx" id="ilcx">
    <option id="x" value="x" selected="selected">x</option>
    <option id="y" value="y">y</option>
    <option id="z" value="z">z</option>
</select> 
```

**JS**

```
$(document).on('change', '#il', function() { deg(this); });

function deg(obj){
    var val = obj.value,
        $el = $('#ilcx'),
        $opt = $('<option />');

    $opt.val(val).text(val).appendTo($el);
} 
```

# iphone - 如何在 iPhone 的 pjsip 中忽略证书不受信任？

> ID：11536308
> 
> 赞同：2
> 
> 时间：2012-07-18T07:27:39.353
> 
> 标签：iphone, sip, pjsip, lync-server-2010

*   目前，我已经成功地为 iPhone SDK 5.1 版构建了 pjsip 库。我已经成功地为 OpenSSL 支持构建了。

*   我使用此库通过以下命令登录到 Server Lync：

b1：+一个

b2: hn.fisil@nextuc.net

b3: sip.nextuc.net;transport=tls

b4: sip.nextuc.net

b5: hn.fisil

b6：通过

我总是收到如下错误：

2012-07-18 13:46:42.403 ipjsua[434:5f03] 13:46:42.402 pjsua_app.c **[sip.nextuc.net:5061] 的 TLS 证书验证结果：证书不受信任**\ 2012-07-18 13 :46:42.405 ipjsua[434:5f03] 13:46:42.405 pjsua_app.c **PJSUA 配置为忽略 TLS 证书验证错误**

如何忽略 pjsip 中证书不受信任的错误/警告

请帮我。

==================================================== ============================= **以下是整个日志：**

```
2012-07-18 13:46:11.262 ipjsua[434:5103] 13:46:11.262    pjsua_acc.c  Adding account: id=sip:hn.fisil@nextuc.net

2012-07-18 13:46:11.265 ipjsua[434:5103] 13:46:11.265    pjsua_acc.c  .Account sip:hn.fisil@nextuc.net added with id 3

2012-07-18 13:46:11.268 ipjsua[434:5103] 13:46:11.268    pjsua_acc.c  .Acc 3: setting registration..

2012-07-18 13:46:11.271 ipjsua[434:5103] 13:46:11.271    pjsua_acc.c  ..Contact for acc 3 updated for SIP outbound: <sip:hn.fisil@10.0.0.29:5061;transport=TLS;ob>;reg-id=1;+sip.instance="<urn:uuid:00000000-0000-0000-0000-00005f38fd37>"

2012-07-18 13:46:11.420 ipjsua[434:5103] 13:46:11.420  tlsc0x1346214  ...TLS client transport created

2012-07-18 13:46:11.424 ipjsua[434:5103] 13:46:11.424  tlsc0x1346214  ...TLS transport 10.0.0.29:49659 is connecting to sip.nextuc.net:5061...

2012-07-18 13:46:11.427 ipjsua[434:5103] 13:46:11.426   pjsua_core.c  ...TX 669 bytes Request msg REGISTER/cseq=1274 (tdta0xb8aa00) to tls 108.166.11.10:5061:
REGISTER sip:sip.nextuc.net;transport=tls SIP/2.0
Via: SIP/2.0/TLS 10.0.0.29:49659;rport;branch=z9hG4bKPju0MvTx5itoPOYx4mTYTotLcWStES2gqc
Max-Forwards: 70

From: <sip:hn.fisil@nextuc.net>;tag=xuLN729d-2nPKZHA.mqqSbh1s0MKCd16

To: <sip:hn.fisil@nextuc.net>

Call-ID: KJUJOcZtCYrmMTP5TD721o--wFQScx83

CSeq: 1274 REGISTER

User-Agent: PJSUA v2.0-rc-svn iPhone OS-5.1/arm/iOS-SDK-5.1

Supported: outbound, path

Contact: <sip:hn.fisil@10.0.0.29:5061;transport=TLS;ob>;reg-id=1;+sip.instance="

<urn:uuid:00000000-0000-0000-0000-00005f38fd37>"

Expires: 300

Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
Content-Length:  0

--end msg--

2012-07-18 13:46:11.429 ipjsua[434:5103] 13:46:11.429    pjsua_acc.c  ..Acc 3: Registration sent

2012-07-18 13:46:11.431 ipjsua[434:5103] >>> 
pardtx560pardeftab560qlqnaturalpardirnatural

f1b0 cf0 [Switching to process 10243 thread 0x2803]
pardtx560pardeftab560qlqnaturalpardirnatural

f0b cf0 2012-07-18 13:46:42.395 ipjsua[434:5f03] 13:46:42.394    pjsua_app.c !SIP tls transport is connected to [sip.nextuc.net:5061]

2012-07-18 13:46:42.397 ipjsua[434:5f03] 13:46:42.397    pjsua_app.c  TLS cipher used: 0x000004/RC4-MD5

2012-07-18 13:46:42.398 ipjsua[434:5f03] 13:46:42.398    pjsua_app.c  TLS cert info of [sip.nextuc.net:5061]:

  Version    : v3

  Serial     : 09 37 73 71 79 66 C3 49 C0 C0 9F CB E8 73 D8 D5

  Subject    : sip.nextuc.net
               /C=US/ST=Utah/L=South Jordan/O=NextUC/CN=sip.nextuc.net

Issuer     : DigiCert High Assurance CA-3
               /C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance CA-3

Valid from : Tue 2011-01-18 00:00:00.000 GMT

Valid to   : Mon 2013-01-21 12:00:00.000 GMT

subjectAltName extension

DNS : sip.nextuc.net

         DNS : sip.nextuc.com

         DNS : sip.lyncucs.com

         DNS : sip.lyncweb.com

         DNS : sip.lyncdude.com

         DNS : sip.criticalpathtraining.com

         DNS : sip.lynxinteractive.com

         DNS : sip.cyberuc.com

         DNS : sip.vardynamics.com

         DNS : sip.calstrawberry.net

         DNS : sip.na.pgi.com

         DNS : sip.cowperthwaiteco.com

         DNS : sip.securitymicro.com

         DNS : sip.jmaventuresllc.com

         DNS : sip.asylument.com

         DNS : sip.getsimplyclean.com

         DNS : sip.totalofficeapplications.com

         DNS : sip.nucadence.com

         DNS : sip.caroluscapitaladvisors.com

         DNS : sip.360sync.us

         DNS : sip.invoicewareint.com

         DNS : sip.misystems.com

         DNS : sip.citrius.com

         DNS : sip.jhanrahan.com

         DNS : sip.calmico.com

         DNS : sip.360sync.ca

         DNS : sip.dynamiktek.com

         DNS : sip.plannedgivingmarketing.com

         DNS : sip.honeycutt.com

         DNS : sip.mbagz.com

         DNS : sip.pr1it.com

         DNS : sip.office365team.com

         DNS : sip.plannedgiving.com

         DNS : sip.green-itconsulting.com

         DNS : sip.lync-demo.com

         DNS : sip.innerworkings.com

         DNS : sip.lyncweb.net

         DNS : sip.voxogo.com

         DNS : sip.artcgroupinc.com

         DNS : sip.buddy.com

         DNS : sip.yanceyworks.com

         DNS : sip.intuplex.com

         DNS : sip.ziptonlabs.com

         DNS : sip.christnertech.com

         DNS : sip.grahamcg.com

         DNS : sip.sumoet.com

2012-07-18 13:46:42.403 ipjsua[434:5f03] 13:46:42.402    pjsua_app.c  TLS cert verification result of [sip.nextuc.net:5061] : The certificate is untrusted

2012-07-18 13:46:42.405 ipjsua[434:5f03] 13:46:42.405    pjsua_app.c  PJSUA is configured to ignore TLS cert verification errors

2012-07-18 13:46:42.407 ipjsua[434:5f03] 13:46:42.407  tlsc0x1346214  TLS transport 10.0.0.29:49659 is connected to sip.nextuc.net:5061

2012-07-18 13:46:42.679 ipjsua[434:5f03] 13:46:42.679   pjsua_core.c  .RX 460 bytes Response msg 504/REGISTER/cseq=1274 (rdata0x13463c4) from tls 108.166.11.10:5061:
SIP/2.0 504 Server time-out
ms-user-logon-data: RemoteUser
From: <sip:hn.fisil@nextuc.net>;tag=xuLN729d-2nPKZHA.mqqSbh1s0MKCd16
To: <sip:hn.fisil@nextuc.net>;tag=EF0526A2E37D90799792ED71161FA886
Call-ID: KJUJOcZtCYrmMTP5TD721o--wFQScx83
CSeq: 1274 REGISTER
Via: SIP/2.0/TLS 10.0.0.29:49659;rport;branch=z9hG4bKPju0MvTx5itoPOYx4mTYTotLcWStES2gqc;received=115.78.227.37;ms-received-port=57093;ms-received-cid=21E5D00
Server: RTC/4.0
Content-Length: 0

--end msg--

2012-07-18 13:46:42.683 ipjsua[434:5f03] 13:46:42.682    pjsua_acc.c  ....SIP registration failed, status=504 (Server time-out)

2012-07-18 13:46:42.685 ipjsua[434:5f03] 13:46:42.685    pjsua_acc.c  ....Scheduling re-registration retry for acc 3 in 4 seconds 
```

# facebook-like - 如何重新启动 Facebook

> ID：11536314
> 
> 赞同：2
> 
> 时间：2012-07-18T07:28:01.163
> 
> 标签：facebook-like, facebook-javascript-sdk, lightbox

我使用 FB Javascript API 创建 Like 按钮。该按钮出现在基于 lightbox2 (http://lokeshdhakar.com/projects/lightbox2/) 的图像的灯箱视图中我创建了一次带有 id 的 div

```
.append($('<div/>', {
          "id": 'fb-image-like', "data-send" : 'false', "data-layout" : 'button_count', "data-width" : '250', "data-show-faces" : 'true', "data-colorscheme" : 'dark', "data-font":'arial'
      })) 
```

在灯箱的“构建”事件上。在“updateDetails”（显示下一张图片）上，我设置了 data-href-attribute，附加“fb-like”-class 并启动 window.fbAsyncInit();

```
$('.fb-like').removeClass("fb-like");
        //FB._initialized = false;
        $("#fb-image-like").attr("data-href", url).addClass("fb-like");
        window.fbAsyncInit(); 
```

Facebook 使用 Like 按钮创建 iframe，一切正常。在下一张图片上，生成的代码看起来不错（替换了 data-href），但 Like-Button 显示为已被喜欢，因为 like.php 中的 URL 没有改变。`window.fbAsyncInit();`不会重新启动会话。如果我现在不喜欢，最后一张图片将被不喜欢。我该怎么做才能完全重新启动 Facebook 会话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:16:01.280

> window.fbAsyncInit(); 不会重新启动会话。

当然不是，因为这根本不是它的*目的*。

只需再次调用 FB.XFBML.parse （可能使用范围参数），让它重新解析您喜欢的按钮标签。

# iphone - 如何在 iOS 中基于设备方向以编程方式创建视图？

> ID：11536317
> 
> 赞同：0
> 
> 时间：2012-07-18T07:28:07.663
> 
> 标签：iphone, ios, ipad, user-interface

我想以编程方式创建许多视图并根据设备方向设置它们的大小。这就是我现在的做法：

```
UIView *view1 = [[UIView alloc] init];

if(UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) 
    view1.frame = CGRectMake (0, 0, 1024, 44);
else 
    view1.frame = CGRectMake (0, 0, 764, 44);

[self.view addSubview:view1]; 
```

但是对每一个视图都这样做是很痛苦的。我还必须复制我在`- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation) toInterfaceOrientation duration:(NSTimeInterval)duration`方法中使用的代码。没有更简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:33:40.330

你当然有。

您唯一需要做的就是创建一个`BaseViewController`继承自`UIViewController`

实现这个基类的方法，`ViewController`你需要的所有其他方法都继承这个`BaseViewController`

你也可以配置`UINavigationItems`，`UIActivityIndicators`在这个`BaseViewController`。

你必须适应面向对象的思维:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:30:31.960

嘿，你不必这样做。为 View 设置 AutoResizingMask，在这里您可以指定不同的边框、高度和宽度应如何达到父视图大小的变化。

切勿尝试手动更改它。它会变得复杂......总是让苹果为你做......

# jquery - 找到另一个 div 的高度并应用数学

> ID：11536318
> 
> 赞同：3
> 
> 时间：2012-07-18T07:28:09.100
> 
> 标签：jquery, math, height

我试图找到一个名为的外部元素的高度`.content`并将其应用于内部元素`blockquote`减号`100px`。

```
$("blockquote").height($(".content").height()); 
```

这会产生 600px 的当前结果并将它们设置为相同的高度，但我不知道如何将数学应用于最终输出。600 像素 - 100 像素。然后将这个数学结果应用为`.height`块引用，现在应该是 500px。

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T07:29:10.393

试试这个：

```
$("blockquote").height($(".content").height() - 100); 
```

`$(".content").height()`仅返回数值，因此您可以从中减去 100 并将结果高度设置为``blockquote`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:04:24.703

所有导航器中的所有版本，包括旧版本的 jquery

```
var _height= parseInt($(".content").height()) - 100
$("blockquote").height(height); 
```

# android - 查找不同设备的高度和宽度

> ID：11536320
> 
> 赞同：0
> 
> 时间：2012-07-18T07:28:12.847
> 
> 标签：android, android-layout

我一直在开发一个需要查找不同设备的高度和宽度的应用程序。如果我删除高度和宽度的代码，如果我包含应用程序崩溃的代码，则应用程序可以工作。

你能建议代码有什么问题吗？

这是代码：

```
public class Newone extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_newone);
    }

    final Context context = this;
    public String cntry = "";
    int w= getWindowManager().getDefaultDisplay().getWidth();
    int h = getWindowManager().getDefaultDisplay().getHeight();

    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    int w = metrics.widthPixels;
    int h = metrics.heightPixels;

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        MotionEvent object holds X-Y values
        if(event.getAction() == MotionEvent.ACTION_DOWN) {              
            String text = "You click at x = " + event.getX() + " and y = " + event.getY();
            //Toast.makeText(this, text, Toast.LENGTH_LONG).show();

            if((event.getX()>((w/1280)*850)) && (event.getX()<((h/752)*900)) && (event.getY()>((w/1280)*380)) && (event.getY()<((h/752)*450)))
                if((event.getX()>850) && (event.getX()<900) && (event.getY()>380) && (event.getY()<450)) {
                    Toast.makeText(this, text, Toast.LENGTH_LONG).show();
                    display(cntry);
                }

                if((event.getX()>280) && (event.getX()<400) && (event.getY()>200) && (event.getY()<300)) {
                    //Toast.makeText(this, text, Toast.LENGTH_LONG).show();
                    cntry = "US";
                    display(cntry);
                }

                if((event.getX()>900) && (event.getX()<1200) && (event.getY()>500) && (event.getY()<650))
        }
        return super.onTouchEvent(event);
    }   

    private void display(final String cntry) {
        final Dialog dialog = new Dialog(context);
        dialog.show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_newone, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:53:15.943

您必须在 onCreate 中移动以下内容。

```
final Context context = this;
public String cntry = "";

DisplayMetrics metrics = context.getResources().getDisplayMetrics();
int w = metrics.widthPixels;
int h = metrics.heightPixels; 
```

此外`getWindowManager().getDefaultDisplay().getWidth();`，`getHeight`现在已弃用..所以避免使用它们。

这是更正的片段。

```
public class Newone extends Activity {
    final Context context;
    public String cntry = "";
    int w, h;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_newone);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        context = this;

        DisplayMetrics metrics = context.getResources().getDisplayMetrics();
        w = metrics.widthPixels;
        h = metrics.heightPixels;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_DOWN) {

            String text = "You click at x = " + event.getX() + " and y = "
                    + event.getY();
            // Toast.makeText(this, text, Toast.LENGTH_LONG).show();

            if ((event.getX() > ((w / 1280) * 850))
                    && (event.getX() < ((h / 752) * 900))
                    && (event.getY() > ((w / 1280) * 380))
                    && (event.getY() < ((h / 752) * 450)))
                if ((event.getX() > 850) && (event.getX() < 900)
                        && (event.getY() > 380) && (event.getY() < 450))

                {
                    Toast.makeText(this, text, Toast.LENGTH_LONG).show();

                    display(cntry);
                }

            if ((event.getX() > 280) && (event.getX() < 400)
                    && (event.getY() > 200) && (event.getY() < 300))

            { // Toast.makeText(this, text, Toast.LENGTH_LONG).show();
                cntry = "US";
                display(cntry);
            }

            if ((event.getX() > 900) && (event.getX() < 1200)
                    && (event.getY() > 500) && (event.getY() < 650)) {

            }

        }

        return super.onTouchEvent(event);
    }

    private void display(final String cntry) {

        final Dialog dialog = new Dialog(context);
        dialog.show();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_newone, menu);
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:49:16.883

如果你搬家了怎么办`getWindowManager().getDefaultDisplay().getWidth()`；和你`getHeight()`的`metrics = context.getResources().getDisplayMetrics();`内心`onCreate`？我不确定`context`，其他人在`Activity`'s 的施工时间可用。

# knockout.js - 从值列表中更新复选框数组的淘汰赛

> ID：11536324
> 
> 赞同：0
> 
> 时间：2012-07-18T07:28:20.320
> 
> 标签：knockout.js

我有一个表格，可以添加新的人员记录，也可以编辑他们的记录。

因此，当它是新记录时，表单会显示与其资格相对应的未选中复选框列表。他们毫不费力地保存回数据库。

当我想编辑人员数据时，我可以将他们的资格作为资格 ID 的分隔列表来获取。因此，我想检查表单上的相应复选框。

我想有一个映射/更新函数需要用这个人的数据更新可观察的复选框数组。

我已经建立了一个基本的[jsFiddle](http://jsfiddle.net/mikertjones/GS2aJ/2/)，但缺少重要的一点。

我想知道有人能指出我正确的方向吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:47:20.027

以下自定义绑定最初是由另一个用户 RPNiemeyer 发布的，但目前我无法检索到答案。无论如何，您可以在以下位置找到它：

自定义绑定称为“checkedWithInit”，此处 HTML 元素的 checked 属性很方便地设置为 true，以便清楚起见：

```
<input id="yourId" type="checkbox" value="yourValue" data-bind="checkedWithInit: yourInitialStateVariable" checked="true" /> 
```

自定义绑定代码是元素的“init”事件处理程序的“覆盖”

```
ko.bindingHandlers.checkedWithInit = {
        init: function(element, valueAccessor, allBindingsAccessor, context) {
        var value = valueAccessor();
        if (element.checked) {
            //if it is an array then push this value to it
            if (value.push) {
                value.push(element.value);                 
            } else { //otherwise, just write the value
                if (ko.isWriteableObservable(value)) {
                    value(element.checked);   
                }
            }
        }
        //run the real checked binding's init function
        ko.bindingHandlers.checked.init(element, valueAccessor, allBindingsAccessor, context);
        },
        //always run the checked bindings update function
        update: ko.bindingHandlers.checked.update
    }; 
```

我希望这有帮助，

瓦莱里奥

# android - Android setText/R.string/values

> ID：11536326
> 
> 赞同：10
> 
> 时间：2012-07-18T07:28:25.853
> 
> 标签：android, textview, settext

我在使用格式和多个值的文本视图中设置文本时遇到问题。

```
holder.car.setText(R.string.mycar + lm.getCarName() + R.string.year + lm.getYear()); 
```

这给了我“ 2143545 Camero 2143213 1977 ”

我从网上尝试了一些其他“解决方案”

```
holder.car.setText(getString(R.string.mycar) + lm.getCarName() + getString(R.string.year) + lm.getYear());  << not work, getString undefine>> 
```

我什至试过`String.valueOf(R.string.mycar); getResources().getText(R.String.mycar)`了，还是不行。

如果有人可以帮助我，那就太好了，谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-18T07:30:50.360

尝试这个

`holder.car.setText(getResources().getString(R.string.mycar));`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-18T08:04:09.713

我认为您正在尝试在字符串中使用参数。

尝试这个：

```
<string name="mycar">Car: %1$s Year: %2$s</string>

String mycar = getString(R.string.mycar);
mycar = String.format(mycar, lm.getCarName(), lm.getYear()); 
```

你应该得到：

车：科迈罗年份：1977

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-06T10:48:50.533

如果您想将 textview 设置为 string.xml 文件中的字符串，

```
mytextview.setText(R.String.mycar); 
```

如果你想用一些字符串或整数的组合来设置你的文本视图，（比第一种方式更好）

```
int number=5;

mytextview.setText(getResources().getString(R.String.mycar) + " " +number + " " + getResources().getString(R.String.mysecondcar)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-18T07:35:09.710

R.string.mycar 和 R.string.year 只是资源的 ID。出于这个原因，您会得到数字（ID 是数字）。

要从资源中获取字符串，您需要使用以下构造：

```
String myCar = getResources().getString(R.string.mycar); 
```

现在 myCar 变量保存了您在 mycar 名称下放入 strings.xml 文件中的字符串。

getResources() 方法属于 Context。如果您在 Activity 之外运行代码，请使用上下文实例来获取字符串，如下所示：

```
String myCar = context.getResources().getString(R.string.mycar); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-18T07:34:08.667

尝试这个。如果您在课堂上获取字符串而不`Activity`使用您的扩展 Get`Context`

```
holder.car.setText(context.getResources().getString(R.string.mycar)); 
```

如果你要扩展`Activity`

```
holder.car.setText(yourActivity.this.getResources().getString(R.string.mycar)); 
```

希望这可以帮助你..

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-18T07:30:59.253

您必须先检索您的资源，然后调用方法 getString(int)，而不是 getText，您是否已经提出。

所以，它应该是：

```
getResources().getString(R.String.mycar); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T08:03:50.457

R 类包含指向您的资源的指针，因此您不能直接使用它们，如其他人所说，使用 getResources().getString()。

# javascript - 如何正确添加 div 块？

> ID：11536338
> 
> 赞同：0
> 
> 时间：2012-07-18T07:29:08.160
> 
> 标签：javascript, jquery, html, css

我有以下代码将简单文本更改为 textarea 字段：

```
 $('.field').live({      
            mouseenter:
                function()
                {
                    title='<?php echo $user_title; ?>';
                    old_value=$(this).text();
                    item_id=$(this).attr('id');
                    item=$(this).parent('td');
                    height=event.target.offsetHeight;
                    width=event.target.parentNode.offsetWidth;
                    new_value=(old_value=='Not translated') ? '' : old_value;
                    $(this).empty();
                    var field=(title=='Login') ? "<textarea style='vertical-align: middle; font-family: Helvetica; font-size: 12pt; width: 212px;' id='new_value' name='term'>" + new_value + "</textarea>" 
                                : "<textarea style='vertical-align: middle; font-family: Helvetica; font-size: 12pt; width: 212px;' id='new_value' name='term'>" + new_value + "</textarea><div id='save_button' class='btn btn-primary' href='#'>>></div>";
                    $(this).html(field);
                    $("#new_value").height(height);
                    button_id=item_id.split('/')[0];
                    button_id=button_id.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g, "\\$1");
                    $("#"+button_id).show();

                    $("#new_value").click(function()
                    {
                        if (title=='Login') 
                            window.location.replace('<?php echo $fb_url?>');
                    });
                },
            mouseleave:
                function()
                {
                    $(this).empty();
                    $(this).html(old_value);
                    $("#"+button_id).hide();
                    alert($(this).html());
                }
            }
        ); 
```

**文本的 div 块：**

```
echo "<td width='250'><div class='field' id='".$record['translate']['label_value']."/".$record['language_id']."'>".
strip_tags($record['translate']['coalesce(loc.language_value)'])."</div>"; 
```

**它工作正常，但我需要添加额外的 div 块：**

```
echo "<td width='250'><div class='field' id='".$record['translate']['label_value']."/".$record['language_id']."'><div style='width: 200px;'>".
strip_tags($record['translate']['coalesce(loc.language_value)'])."</div></div>"; 
```

执行此操作后，我的代码不起作用！它将文本更改为 textarea 字段，但在“mouseleave”事件中它不起作用`$(this).empty()`构造！请告诉我，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:40:52.430

尝试关闭标签

```
echo "<td width='250'><div class='field' id='".$record['translate']['label_value']."/".$record['language_id']."'><div style='width: 200px;'>".strip_tags($record['translate']['coalesce(loc.language_value)'])."</div></div></td>"; 
```

我在最后加了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:42:16.357

您必须在关闭 DIV 标签后关闭 TD 标签。

```
echo "<td width='250'><div class='field' id='".$record['translate']['label_value']."/".$record['language_id']."'>".
                                        strip_tags($record['translate']['coalesce(loc.language_value)'])."</div>"; 
```

您刚刚忘记关闭 TD 标记以及 id 属性的单引号。

```
 echo "<td width='250'><div class='field' id='".$record['translate']['label_value']."/".$record['language_id']."'>".strip_tags($record['translate']['coalesce(loc.language_value)'])."'</div></td>"; 
```

它应该像这样工作。确保所有的 html 标签和属性都是有效的。

# objective-c - iOS API Diffs 中的“（无可用架构）”是什么意思？

> ID：11536340
> 
> 赞同：0
> 
> 时间：2012-07-18T07:29:12.410
> 
> 标签：objective-c, ios, xcode

谁能回答这个美丽的问题？:DI 需要使用具有此短语但 Xcode 未检测到它的方法之一：/。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:08:45.307

您可能忘记包含标题....

编辑：我弄清楚了该消息的含义。这意味着它已添加到标题中，但不适用于 iOS，因此您无法使用它。

# android - Android距离是错误的

> ID：11536342
> 
> 赞同：2
> 
> 时间：2012-07-18T07:29:20.923
> 
> 标签：android, google-maps

```
lat = 6.92961234
lng = 79.84796614

lat1 = 6.85620511
lng1 = 79.91251376 

Location locationA = new Location("point A");

locationA.setLatitude(lat);
locationA.setLongitude(lng);

Location locationB = new Location("point B");

locationB.setLatitude(lati);
locationB.setLongitude(lngi);

double distancei = locationA.distanceTo(locationB);

String cc = Double.toString(distancei);

float[] results = new float[1];
Location.distanceBetween(lati / 1E6, lngi / 1E6, lat / 1E6, lng / 1E6,results);
float s = results[0] * 0.000621371192f;
String a2 = Float.toString(s); 
```

两种方法给了我不同的答案，而且似乎都**错**了..因为我查看了谷歌地图，答案显示大约 14 公里（约 8 密耳）。但答案显示为 6point smthing。我不知道它的米/公里/英里。

请帮帮我...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:30:31.690

如果您不厌其烦地生成了一些编译并运行的代码，请阅读 javadocs 并通过调试器运行以下更正的代码：

```
private void test() {

    double lat = 6.92961234;
    double lng = 79.84796614;

    double lati = 6.85620511;
    double lngi = 79.91251376;

    Location locationA = new Location("point A");
    locationA.setLatitude(lat);
    locationA.setLongitude(lng);
    Location locationB = new Location("point B");
    locationB.setLatitude(lati);
    locationB.setLongitude(lngi);

    double distancei = locationA.distanceTo(locationB);
    float[] results = new float[3];
    Location.distanceBetween(lati, lngi, lat, lng,  results);
    // Distance in metres is in results[0]
} 
```

您会看到 distancei 和 results[0] 都给出了相同的答案，即 10807 米。这对我来说似乎是正确的。

# asp.net - 如何从全局 asax 中的代码中访问值

> ID：11536345
> 
> 赞同：0
> 
> 时间：2012-07-18T07:29:31.370
> 
> 标签：asp.net, global-asax

在我的页面中，每次单击按钮以转到下一页时，我都会重新生成会话 ID。在登录时，我已经将用户名保存在我的会话变量 (session["uname"]=txtusername.text) 中。但是当我重新生成新的会话 id 时，session["uname"] 的引用为空，因为的新会话 id。这就是为什么我想 在**会话启动函数中使用****Global.asax**设置会话变量值。

 **```
void Session_Start(object sender, EventArgs e) 
    {
       session["uname"]=here;
    } 
```

**但是在 Global.asax 页面中，我无法从我的登录页面访问任何值。**. **主要问题是从后面的代码访问 global.asax 中的任何值。** 我该如何解决这个问题......请帮助......提前致谢............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:36:16.387

首先不要在 Global.asax 中编写业务逻辑。我想指出 3 点基本的东西：

1.  当 session_start() 调用
2.  如何维护会话
3.  您应该在哪里设置会话变量。

对于以下详细信息，我假设您有 login.aspx、login.aspx.cs：

如您所知，HTTP 是无状态协议，因此每个请求都是新请求。所以对于每个请求 session_start() 都会被执行。

当用户第一次请求资源时，将生成唯一的会话，并将包含会话 ID 的 cookie 发送给客户端。

对于用户的任何进一步请求，HTTP 客户端会将 cookie 传递给服务器，以便服务器可以跟踪用户。这就是会话的工作方式。

* * *

现在让我们来看看您在 Globlax.asax 的 session_start() 中设置 Session["uname"] 的代码，请记住，在页面生命周期开始之前调用 Globlax.asax，因此它无法访问页面数据。

Instade 你应该在 login.aspx.cs 文件中设置你的 Session["uname"]。此处检查用户凭据是否正确：
设置 Session["uname"]=value。

现在对于该用户的所有其他请求 Session["uname"] 将可用。您还可以检索/更新 Global.asax 的 session_start() 中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:30:53.470

```
HttpContext.Current.Session["uname"]=here; 
```**

# java - 在我的android项目中有两个类，第一类有一个按钮，当我点击按钮时我需要查看下一页。

> ID：11536350
> 
> 赞同：0
> 
> 时间：2012-07-18T07:29:50.163
> 
> 标签：java, android

在我的android项目中有两个类，第一类有一个按钮，当我点击按钮时我需要查看下一页。

包 com.example.restaurantapp；

```
import android.os.Bundle;    
import android.app.Activity;     
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.view.View.OnClickListener;
import android.support.v4.app.NavUtils;

public class RestaurantActivity extends Activity {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first);
        Button orderbutton=(Button)findviewById(R.layout.activity_first);
        orderbutton.setOnClickListener(new View.OnClickListener());
    }
    private Button findviewById(int activityFirst) {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_first, menu);
        { 
        public void onClick(View v) {
            Intent intent = new Intent(RestaurantActivity.this,SecondActivity.class);
            startActivity(intent);
        }

        return true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:02:44.917

假设您所指的按钮是`orderbutton`，您需要在`OnClickListener`单击按钮时执行实际操作：

```
 orderbutton.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             // use an Intent to go to the second Activity
         }
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T20:50:54.763

在第一个活动中，在按钮上设置侦听器，并在其中以明确的意图启动第二个活动：

```
myButton.setOnClickListener(
    new OnClickListener(){
        startActivity( new Intent(this,SecondActivity.class) );
    };
); 
```

# javascript - 启用 shouldStartLoadWithRequest 方法时，Phonegap（基于 Cordova 1.9.0）警报不起作用

> ID：11536352
> 
> 赞同：0
> 
> 时间：2012-07-18T07:29:53.157
> 
> 标签：javascript, iphone, cordova

用于 URL 请求处理时， Phonegap 通知 (`navigator.notification.alert`和`navigator.notification.confirm`) 不起作用。`shouldStartLoadWithRequest`

Javascript：

```
function onBodyLoad() {
  document.addEventListener("deviceready", onDeviceReady, false);
}
function onDeviceReady() {
  navigator.notification.alert("Cordova is working");
} 
```

目标 C：

```
- (BOOL)webView:(UIWebView *)webView2
shouldStartLoadWithRequest:(NSURLRequest *)request
  navigationType:(UIWebViewNavigationType)navigationType{
    if ([[[request URL] absoluteString] hasPrefix:@"js-call:"]) {
      // Extract the selector name from the URL
      NSString *requestString = [[request URL] absoluteString];
      NSArray *components = [requestString componentsSeparatedByString:@":"];
      NSString *function = [components objectAtIndex:1];
      NSLog(@"the function name is  %@",function);
      // Call the given selector
      [self performSelector:NSSelectorFromString(function)];
      // Cancel the location change
      return NO;
    }
    return YES;
  } 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:25:09.533

遇到非常相似的问题。更改最后一行

```
return YES; 
```

到

```
return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType]; 
```

插件的所有命令都通过 gap:// 桥。每次这样的调用都会调用**shouldStartLoadWithRequest 。**因此，默认为**YES**似乎是问题所在。事实上，它应该为 gap:// 调用返回**NO 。**

# jquery - Symfony2 验证和 bootstrap/jquery 模式

> ID：11536358
> 
> 赞同：0
> 
> 时间：2012-07-18T07:30:11.610
> 
> 标签：jquery, symfony, twitter-bootstrap

我有以下情况：

我将 symfony2-form 呈现为模态（使用引导程序和 jQuery）。当表单无效时，错误消息应出现在模式框中。我像这样链接到模态框： route/to/action#modal

我怎样才能做到这一点？

在我的模板中，我有一个模态的简单链接：

```
<a data-toggle="modal" href="#new">Add member</a> 
```

此链接打开一个模式。在里面，有一个简单的表格，包含标题、名字和姓氏：

```
{{ form_widget(form.title) }}
{{ form_widget(form.first_name) }}
{{ form_widget(form.last_name) }} 
```

在表单类中，我是这样定义的：

```
 $builder
        ->add('title', 'text', array('required' => false))
        ->add('first_name')
        ->add('last_name'); 
```

因此，标题是可选的，名字和姓氏是必需的。所以我将这些行添加到我的validation.yml中：

```
Acme\MemberBundle\Entity\Member:
properties:
    first_name:
        - NotBlank: { message: Please enter a first name }
    last_name:
        - NotBlank: { message: Please enter a last name } 
```

在我的操作中（在提交表单时调用）我有以下几行：

```
/**
 * Creates a new Member entity.
 *
 * @Route("/create", name="acme_member_create")
 * @Method("post")
 * @Template("AcmeMemberBundle:Member:index.html.twig")
 */
public function createAction()
{
    $member = new Member();
    $em = $this->getDoctrine()->getEntityManager();
    $request = $this->getRequest();
    $form = $this->createForm(new MemberType(), $member);
    $form->bindRequest($request);

    if ($form->isValid()) {
        $em->persist($member);
        $em->flush();

        return $this->redirect($this->generateUrl('acme_member'));

    }

    $entities = $em->getRepository('AcmeMemberBundle:Member')->findAll();

    return array(
        'entities' => $entities,
        'form'   => $form->createView()
    );
} 
```

因此，当 for 无效时，我想路由回我的 index.html.twig （显示模式的地方）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:29:03.690

I found a solution!

With this JavaScript-Code, I can show the modal when the page is loaded:

```
$(window).load(function(){
    $('#new').modal()
}); 
```

So, I just execute this code if the form is not valid.

# ruby-on-rails - 无法使用 NET::HTTP 或 httpclient 发送 POST 请求并正确获取响应？

> ID：11536359
> 
> 赞同：1
> 
> 时间：2012-07-18T07:30:14.260
> 
> 标签：ruby-on-rails, httprequest

我需要向 PayPal 发送带有标题和正文的不同请求。我想使用标准类 NET::HTTP，所以这是我的代码（**ISN'T WORKING**）：

```
 require "net/http"
    require "uri"
    header = {...}
    body = {...}
    url = "https://svcs.sandbox.paypal.com/AdaptiveAccounts/GetVerifiedStatus"
    uri = URI.parse(url)
    args = { 'header' => header,'body' => body }
    res = Net::HTTP.post_form(uri, args)
    puts res.status 
```

给我错误：

```
 C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock': An existing connection was forcibly closed by the remote host. (Errno::ECONNRESET) 
```

**编辑** 第二个变体：

```
 require 'httpclient'
      require 'xmlsimple'
      header =  {"X-PAYPAL-SECURITY-USERID" => "tok261_biz_api.abc.com",
           "X-PAYPAL-SECURITY-PASSWORD" => "1244612379",
           "X-PAYPAL-SECURITY-SIGNATURE" => "lkfg9groingghb4uw5",
           "X-PAYPAL-REQUEST-DATA-FORMAT" => "NV",
           "X-PAYPAL-RESPONSE-DATA-FORMAT" => "XML",
           "X-PAYPAL-APPLICATION-ID" =>  "APP-80W284485P519543T"
            }
      #data to be sent in the request
      data = {"emailAddress" => "denmed_1342605975_biz@gmail.com",
       "firstName"=> "Den",
       "lastName" => "Med",
       "matchCriteria"=> "NAME",
       "requestEnvelope.errorLanguage" => "en_US"}
      #initialize the request
      clnt = HTTPClient.new
      #API end point(sandbox)
      uri = "https://svcs.sandbox.paypal.com/AdaptiveAccounts/GetVerifiedStatus"
     #make the post
     res = clnt.post(uri, data, header)
     if res.status == 200
      @xml = XmlSimple.xml_in(res.content)
     if @xml['accountType']!=nil
    account_type = @xml['accountType'][0]
    #its pretty obvious from here init?
   if account_type.to_s() == "Business"
    puts "Business account!"
    elseif account_type.to_s() == "Premier"
    puts  "Premier Account!"
  end
   elseif account_type.to_s() == "Personal"
    puts "Personal account!"
   else
    puts "Account type not null but not a valid PayPal account type."
   end
   else
    puts "Gee! sorry! something went seriously wrong"
   end 
```

这种方法 - 不断给我 - 帐户类型不为空，但不是有效的 PayPal 帐户类型。但它在沙盒中得到了验证！试图留下空白字段，但它给了我同样的！

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:57:31.757

我不熟悉你的第二个代码示例，但是我之前使用过第一个（Net::HTTP），我发现它工作得很好。我通常只将它用于 GET，但我会尝试在 POST 上提供建议 :)

第一件事：不应将标头设置为与请求一起发送的数据（您似乎正在这样做）-相反，应将每个标头设置为请求的属性：

```
request['X-HEADER_NAME'] = header_value 
```

如果使用 Net::HTTP，我建议您的代码块应该如下所示：

```
require "net/http"
require "uri"

url = "https://svcs.sandbox.paypal.com/AdaptiveAccounts/GetVerifiedStatus"
uri = URI.parse(url)

req = Net::HTTP::Post.new(url)
req["X-PAYPAL-SECURITY-USERID"] = "tok261_biz_api.abc.com"
req["X-PAYPAL-SECURITY-PASSWORD"] = "1244612379"
req["...."] = "...."   .... etc for all headers

req.set_form_data( {"emailAddress" => "denmed_1342605975_biz@gmail.com",
   "firstName"=> "Den",
   "lastName" => "Med",
   "matchCriteria"=> "NAME",
   "requestEnvelope.errorLanguage" => "en_US"} )

Net::HTTP.start(uri.host, uri.port) do |http|
    response = http.request(req)
    return response
end 
```

我建议尝试一下，如果它不起作用，你能给我给定错误的确切措辞吗？

**注意** 另一个建议是，每当我的应用程序接收`Errno::ECONNRESET`到 ，这意味着后端服务器不可访问（在这种情况下，我猜那将是贝宝服务器） - 你确定服务器正在运行吗？你确定没有防火墙或任何阻止你连接的地方吗？

# django - How to add a button for password request in django login?

> ID：11536361
> 
> 赞同：2
> 
> 时间：2012-07-18T07:30:22.687
> 
> 标签：django, django-authentication, django-permissions, django-login

In my django App on the login page i want to have a request password button which functions like, when this button is clicked I get a request from the user per email to provide that user a password for the site.At the template login.html I made this change :

```
 {% extends "base.html" %}
    {% load url from future %}

    {% block site_contents %}

    {% if form.errors %}
    <p>Your username and password didn't match. Please try again.</p>
    {% endif %}

    <form method="post" action="{% url 'django.contrib.auth.views.login' %}">
    {% csrf_token %}
     <table>
     <tr>
     <td>{{ form.username.label_tag }}</td>
     <td>{{ form.username }}</td>
     </tr>
     <tr>
     <td>{{ form.password.label_tag }}</td>
     <td>{{ form.password }}</td>
     </tr>
     </table>
     <input type="submit" name="request_password" value="Request Password" />
     <input type="submit" value="login" />
     <input type="hidden" name="next" value="{{ next }}" />
     </form>

     {% endblock %} 
```

Where in views can I write code to capture the event request_password and write my code to email to the amdin about user's request?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:35:47.573

I think this would be easier to do by creating a new form and pointing it to your own view. Or, if you want to have it in one form, you can probably create a view along the lines of:

```
from django.contrib.auth.views login as original_login
def my_login(request):
    if request.method == 'POST' and 'request_password' in request.POST:
        # process password request somehow
    else:
        return original_login(request) 
```

Modifying Django-supplied view would probably just complicate things for you in the long run.

# coldfusion - 如何使用 CFINVOKE 将结构传递给 Coldfusion CFC？

> ID：11536363
> 
> 赞同：0
> 
> 时间：2012-07-18T07:30:29.907
> 
> 标签：coldfusion, struct, cfc, cfinvoke

我有一个 CFC 文件，它处理我从应用程序发送的所有电子邮件（使用 Coldfusion8）。

我正在使用 CFINVOKE 调用此 CFC 中的相应函数，并传递一个包含所有用户数据的结构，如下所示：

```
<cfscript>  
var User.data = {};
    User.data.name = "John Doe";
    User.data.email = "john@doe.com";
    ...
</cfscript>     
// call mailer
<cfinvoke component="mailer_user" method="say_hi">
    <cfinvokeargument name="userData" value="#User.data#">
</cfinvoke> 
```

在我的 mailer.cfc 里面

```
<cffunction name="say_hi" access="public" output="false">
    <cfargument name="userData" type="struct" required="true" /> 
 .... 
```

**出于某种原因，这现在失败了，如果我将字段作为cfargument**单独传递，我只能让它工作，这很痛苦，因为我传递了很多数据。

**问题**：如何使用**argumentCollection**使其工作。

即使我这样 CFINVOKE：

```
 <cfinvoke component="mailer_user" argumentcollection="#User.data#" method="say_hi"></cfinvoke> 
```

它仍然没有做任何事情。我在 cfinvoke 之前和之后设置输出标志，以及在进出的“say_hi”函数内部。我只是在 CFINVOKE 之前拿到了旗帜。

旁注：这都是通过 AJAX 完成的，如果我的 CFC 在某处出现错误，我只会返回 success="false"。我只在系统上远程工作，所以无法在CFADMIN中设置AJAX调试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:02:47.170

当我输入上面的评论时，我想到了问题可能是什么。

您正在将结构传递给您的函数。您传递具有名称、电子邮件、等等作为该结构中的键的 User.data。这些键需要与函数中的参数匹配

```
<cffunction name="say_hi" access="public" output="false">
    <cfargument name="name" type="struct" required="true" /> 
    <cfargument name="email" type="struct" required="true" /> 
    <cfargument name="blah" type="struct" required="true" /> 
    <cfargument name="etc" type="struct" required="true" /> 
```

如果您想将结构作为参数传递，则需要将 user.userData 作为用户数据的结构，并且您的函数应该是

```
<cffunction name="say_hi" access="public" output="false">
    <cfargument name="userData" type="struct" required="true" /> 
```

当您将集合作为argumentCollection 传递时，您应该执行argumentCollection="#user#"，以便userData 部分与您在函数中的cfargument 匹配。

清如泥？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:50:05.037

我认为你应该通过写作保持 cfscript 风格

```
// call mailer
mailUser = createObject("component", "mailer_user");    // or new mailer_user(); for CF9+
mailUser.say_hi(User.data); 
```

这应该有效，如果没有，它在你的代码中的其他地方。尝试查看错误日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:14:42.013

您应该将变量映射到您传递的数据，然后发送结构没有问题。这样做

```
<cfset objMailer = createObject("component","mailer_user") /> 
```

`<cfset objMailer.say_hi(userData:user.data)/>`

这甚至在 CF7 中也有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:37:14.583

行。我的邮件 CFC 中有一个错字，其中我有一个带有“##”的变量。就像在我的电子邮件文本中一样，它没有被注意到......

所以你可以使用这个来传递一个结构：

```
<cfinvoke component="mailer_user" method="say_hi">
    <cfinvokeargument name="userData" value="#User.userdata#">
</cfinvoke> 
```

并在你调用的函数中抓取它，如下所示：

```
<cffunction name="say_hi" access="public" output="false" hint=""> 
    <cfargument name="userData" type="struct" required="true" hint="user data  passed" /> 
    <cfscript>  
        var internalInfo = "";
        var User = {};
        User.userdata = userData;                   
    </cfscript> 
    ... 
```

也许其他人可以使用该片段。

# python - 将多个掩码应用于数组

> ID：11536367
> 
> 赞同：9
> 
> 时间：2012-07-18T07:30:39.160
> 
> 标签：python, arrays, filter, numpy

我正在解释我实际上希望做什么，以防有更高级别的建议完全消除了这个问题。

我有存储在三个数组中的科学数据：`wave`, `flux`, `error`。这些代表波长、通量和误差值。阵列大约有 4000 个元素长（阵列的索引号对应于探测器的像素号）。

我做了各种测试，但对于这个例子，假设我做了 2 个测试，我需要有效地屏蔽关联的数组。

```
masks = []
masks.append(wave > 5500.35)
masks.append(flux / wave > 8.5) 
```

**子问题**：我可以轻松地做 2-mask 案例，例如：

```
fullmask = [x[0] and x[1] for x in zip(masks[0], masks[1])] 
```

但是对于任意数量的口罩有什么办法呢？

**真正的问题**：有没有办法将所有掩码应用于每个数组（、、、`wave`）`flux`并`error`保留原始索引号？通过“保留原始索引号”，我的意思是原则上我可以获取掩蔽波阵列的平均像素数（原始索引号）？也就是说：如果`wave[98:99]`唯一的部分没有被屏蔽，平均像素将为 98.5。

元问题：这是做这些事情的最佳方式吗？

* * *

编辑

所以这里有一些示例数据可供使用。

```
wave = array([5000, 5001, 5002, 5003, 5004, 5005, 5006, 5007, 5008, 5009, 5010,
   5011, 5012, 5013, 5014, 5015, 5016, 5017, 5018, 5019, 5020, 5021,
   5022, 5023, 5024, 5025, 5026, 5027, 5028, 5029, 5030, 5031, 5032,
   5033, 5034, 5035, 5036, 5037, 5038, 5039, 5040, 5041, 5042, 5043,
   5044, 5045, 5046, 5047, 5048, 5049, 5050, 5051, 5052, 5053, 5054,
   5055, 5056, 5057, 5058, 5059, 5060, 5061, 5062, 5063, 5064, 5065,
   5066, 5067, 5068, 5069, 5070, 5071, 5072, 5073, 5074, 5075, 5076,
   5077, 5078, 5079, 5080, 5081, 5082, 5083, 5084, 5085, 5086, 5087,
   5088, 5089, 5090, 5091, 5092, 5093, 5094, 5095, 5096, 5097, 5098,
   5099])

flux = array([ 112.65878609,  109.2008992 ,  113.30629929,  117.17002715,
   103.19663878,  110.42131523,  106.00841123,  100.27882741,
   103.89160905,  102.29402469,  105.58894696,  103.21314852,
    96.97242814,  106.70130478,  108.83891225,  110.60598803,
    95.10361887,  109.39734257,  103.08289878,  104.97258911,
    96.46606257,  106.75993458,   99.25386914,  105.91429417,
   105.83752232,  100.53312657,   99.74871394,  107.12735837,
   108.81187473,   96.51418895,   99.71311101,   94.08702553,
    98.81198643,   93.84567201,  103.21444519,   94.7027134 ,
    99.61842203,  103.71336458,  100.8697998 ,   92.1564786 ,
    96.56711985,   94.7728761 ,   82.65194671,   83.52280884,
    86.57960844,   73.6700194 ,   66.11794666,   61.01624627,
    63.19944529,   55.50283247,   62.09172307,   59.55436092,
    75.66399466,   70.69397378,   64.27899192,   73.80248662,
    89.17119606,   78.97024327,   82.3334254 ,  100.82581489,
   102.77937201,   99.37717696,   96.2215563 ,  104.52291339,
    93.7581944 ,   93.32154346,  103.57018896,  108.08682518,
   105.2711359 ,  100.00242988,  100.86934866,  103.20764384,
   104.19274473,  101.3314802 ,  102.75057114,   94.02347591,
    95.48758551,  106.0099397 ,   99.50733501,   97.88110415,
   107.54266965,  107.76126331,   98.14882302,  101.55654606,
   101.02418212,  106.82324958,   95.52086925,  102.65957133,
   104.93806492,  103.22762427,  108.02087993,  106.71911141,
    97.24396195,  103.3450277 ,  113.99870588,  106.4145751 ,
   110.08294674,  109.40908288,  118.61518086,  114.37341062])

error = array([ 11.72799338,  22.33423611,  16.89347382,  12.80063102,
   23.99242356,  25.15863754,  20.44765811,  14.84358628,
   19.16343785,  19.5703491 ,  18.44427035,  19.08648083,
   19.09116433,  12.22098884,  14.81280352,  11.35010222,
   18.59850136,  15.78855734,  21.85877638,  20.12179042,
   22.04894395,  21.986731  ,  13.26738352,  16.10987762,
   24.28528627,  30.11866128,  25.30220842,  25.02100014,
   29.38560916,  16.8192307 ,  29.15097205,  23.56805267,
   15.17285709,  18.27495747,  18.63750452,  18.61618504,
   11.45940025,  21.95805701,  24.22923951,  11.76824052,
   19.75465065,  14.72979889,  15.45936176,  14.73227474,
   28.91683627,  22.90534472,  16.82376093,  21.47830226,
   20.05012214,  16.74393817,  17.79456361,  20.80008233,
   19.32059989,  23.23471888,  13.77434964,  17.56121752,
   15.96716163,  18.5294016 ,  28.31005939,  13.66340359,
   10.38160267,  16.09621015,  18.25125683,  20.95954331,
   21.31996941,  24.51998489,  16.58831953,  15.25427142,
   23.93065281,  30.4552266 ,  16.94527367,  16.92730802,
   17.79659417,  18.85080572,  18.0839428 ,  23.93949481,
   26.60243553,  13.68320208,  16.74669921,  20.30238694,
   12.74773905,  19.20810456,  20.7189417 ,  20.73402554,
   17.12106905,  25.06475175,  13.0947528 ,  28.16437938,
   22.4803386 ,  13.71143627,   6.60617725,  20.41186825,
   23.54924934,  22.25930658,  20.09337438,  24.94705884,
   18.58056249,   5.58653271,  18.71242702,  17.83578444])

# How I created masks, or just jump to next comment if it's too painful to look at...
masks = []
masks.append(flux/error > 4.0) # high error
absorptionMask1 = (wave < 5060)
absorptionMask2 = (wave > 5040)
bob = [all(x) for x in zip(absorptionMask1, absorptionMask2)]
absorptionMask = ~np.array(bob)
masks.append(absorptionMask) 

# The resulting mask
masks = [array([ True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True, False, False,
       True, False,  True, False, False,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True, False,
      False, False, False, False, False, False, False, False, False,
       True,  True,  True,  True, False,  True,  True,  True,  True,
       True,  True, False,  True,  True,  True, False,  True,  True,
       True,  True,  True, False, False,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True, False,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,  True], dtype=bool),
array([ True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True, False, False, False, False,
      False, False, False, False, False, False, False, False, False,
      False, False, False, False, False, False,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,
       True,  True,  True,  True,  True,  True,  True,  True,  True,  True], dtype=bool)]

# More in a bit, should get you a feel for what I'm looking at. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T08:08:49.420

否则你可以使用布尔运算符，让我们定义一个例子：

```
d=np.arange(10)
masks = [d>5, d % 2 == 0, d<8] 
```

您可以使用 reduce 来组合所有这些：

```
from functools import reduce

total_mask = reduce(np.logical_and, masks) 
```

如果您需要手动选择掩码，也可以显式使用布尔运算符：

```
total_mask = masks[0] & masks[1] & masks[2] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T07:35:06.180

我认为您正在寻找明星运营商：

```
fullmask = [all(mask) for mask in zip(*masks)] 
```

...虽然我不确定我是否完全理解您的数据结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T08:13:15.740

使用[numpy 记录数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)怎么样？

```
import numpy as np

# create some data
pixel = np.arange(4000)
wave = pixel / 4000\. + 5500
flux = pixel / 4000\. + 9.5 * 5500
data = np.rec.fromarrays((pixel, wave, flux), names='pixel, wave, flux')

mask = data.wave > 5500.25
mask &= data.flux / data.wave > 8.5

print data[mask].pixel.mean() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T08:26:03.563

如果我理解正确，您想要的是过滤数组。

这是过滤数组的示例

```
your_array = [1, 5, 6000]    
filter(lambda elem: elem > 5000, your_array) 
```

这将返回 [6000]

当您说“保留原始索引号”时，我认为您的意思是您要测试每个元素的条件并存储每个元素的结果？如果是这样，您可能需要使用地图

```
your_array = [1, 5, 6000]
map(lambda elem: elem > 5000, your_array) 
```

这将返回 [False, False, True]

如果您有更复杂的条件，您可以用您定义的函数替换所有 lambda。

PS我认为如果你给出你想要的示例输入和示例输出会有所帮助。问题的措辞令人困惑。

编辑：

使用示例数据，我认为这就是您想要的，请随时发表评论。此方法可帮助您避免存储 True、False 列表，然后再查找所需元素的索引。它将返回一个索引列表，并允许您使用更少的步骤来计算平均值。

```
# Given wave, error, and flux the way you defined

# If wave is [21.2, 34.1, 43.423], then this returns [(0, 21.2), (1, 34.1), (2, 43.423)]
# Each element is now a tuple of (index, elem)
enum_wave = enumerate(wave)

# Returns a list of the indexes that pass the condition
# For example, if only 98, and 99 aren't filtered out, this will return [98, 99]
masked_wave = [index for index, elem in enum_wave if elem > 5060]

# To find the average
sum(masked_wave) / float(len(masked_wave)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-20T04:41:24.363

您也可以这样做而不是使用`functools.reduce`：

```
combined_mask = np.full(len(masks), True)
for mask in masks:
    combined_mask &= mask 
```

# bash - 在 unix 中对日期字段进行排序

> ID：11536368
> 
> 赞同：4
> 
> 时间：2012-07-18T07:30:40.787
> 
> 标签：bash, shell, unix, sorting

我有包含数十万条记录的文本文件。其中一个字段是日期字段。有没有办法根据日期字段对文件进行排序？

```
09-APR-12 04.08.43.632279000 AM
19-MAR-12 03.53.38.189606000 PM
19-MAR-12 03.56.27.933365000 PM
19-MAR-12 04.00.13.387316000 PM
19-MAR-12 04.04.45.168361000 PM
19-MAR-12 03.54.32.595348000 PM
27-MAR-12 10.28.14.797580000 AM
28-MAR-12 12.28.02.652969000 AM
27-MAR-12 07.28.02.828746000 PM 
```

输出应为

```
19-MAR-12 03.53.38.189606000 PM
19-MAR-12 03.54.32.595348000 PM
19-MAR-12 03.56.27.933365000 PM
19-MAR-12 04.00.13.387316000 PM
19-MAR-12 04.04.45.168361000 PM
27-MAR-12 10.28.14.797580000 AM
27-MAR-12 07.28.02.828746000 PM
28-MAR-12 12.28.02.652969000 AM
09-APR-12 04.08.43.632279000 AM 
```

我已经尝试使用 sort 命令对日期进行排序（将日期字段作为字符串），但它没有给出正确的输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T15:35:05.270

Chronicle 的解决方案很接近，但错过了 AM/PM 的区别，排序`27-MAR-12 07.28.02.828746000 PM`before `27-MAR-12 10.28.14.797580000 AM`。这可以修改：

```
sort -t- -k 3.1,3.2 -k 2M -k 1n -k 3.23,3.24 
```

但这仍然非常脆弱。将日期转换为纪元时间并进行数字比较会更好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T07:47:58.057

尝试这个 ：

**输入.txt**

```
09-APR-12 04.08.43.632279000 AM 
19-MAR-12 03.53.38.189606000 PM 
19-MAR-12 03.56.27.933365000 PM 
19-MAR-12 04.00.13.387316000 PM 
19-MAR-12 04.04.45.168361000 PM 
19-MAR-12 03.54.32.595348000 PM 
27-MAR-12 10.28.14.797580000 AM 
28-MAR-12 12.28.02.652969000 AM 
27-MAR-12 07.28.02.828746000 PM 
```

**代码**

```
 sort -t "-"  -k 3 -k 2M -nk 1 Input.txt 
```

**输出**

```
19-MAR-12 03.53.38.189606000 PM
19-MAR-12 03.54.32.595348000 PM
19-MAR-12 03.56.27.933365000 PM
19-MAR-12 04.00.13.387316000 PM
19-MAR-12 04.04.45.168361000 PM
27-MAR-12 07.28.02.828746000 PM
27-MAR-12 10.28.14.797580000 AM
28-MAR-12 12.28.02.652969000 AM
09-APR-12 04.08.43.632279000 AM 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T16:05:44.800

此脚本以纳秒分辨率按纪元时间排序：

```
awk '{
  t = gensub(/\.([0-9]{2})\./, ":\\1:", 1, $0);
  command = "date +%s%N -d \x022" t "\x022";
  command | getline t;
  close(command);
  print t, $0;
}' unsorted.txt | sort -n -k 1 | cut -d ' ' -f 2- > sorted.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-24T01:58:26.337

您可以使用日期，这通常可能是一个不错的主意，特别是如果您不需要担心微秒，否则您可能会剪掉微秒并将其作为辅助排序字段进行排序。

```
while read a; do   
grep "^${a}" input.txt; 
done < <(sed 's/\./:/;s/\./:/' input.txt | xargs -n3 -I{} date -d"{}" +%s | sort | xargs -n1 -I{} date -d @'{}' +'%d-%^h-%y %I.%M.%S') 
```

# esper - Esper 没有动态列表的事件

> ID：11536374
> 
> 赞同：1
> 
> 时间：2012-07-18T07:30:54.193
> 
> 标签：esper, complex-event-processing, nesper

我试图找出一个基本场景来确定是否应该基于 Esper 的警报应用程序。

我有一组随时间动态变化的传感器。其中每一个都配置了一个超时，该超时定义了我应该多久收到一次传感器读数。我希望 Esper 在阅读未及时到达时通知我。

使用这种事件模式似乎可以工作，尽管一旦 Esper 启动，我就无法更改传感器集。

```
every s=Sensor -> (every (timer:interval(s.Timeout sec) and not Reading(SensorId=s.SensorId))) 
```

我怎么能做到这一点？我猜我需要将“每个 s=Sensor”部分更改为不同的东西，因为事件是不可变的。

# c# - 在 c#/xaml Metro 风格应用程序的 MediaCapture 示例中获取“HRESULT 异常：0xC00DABE0”

> ID：11536378
> 
> 赞同：3
> 
> 时间：2012-07-18T07:31:09.110
> 
> 标签：c#, exception, microsoft-metro, windows-runtime, audio-recording

我已经检查了这个 [MediaCapture](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)示例。我试图录制音频，但是当我按下“StartDevice”按钮时，我得到了“HRESULT 异常：0xC00DABE0”。我的音频设备工作正常，我检查了 Windows 8 的内置录音应用程序。谁能帮我解决这个问题？

**我用 HTML5/JS 示例尝试了相同的应用程序，它记录了音频，但 C#/XAML 应用程序给出了异常。**

![在此处输入图像描述](../Images/e0e8697e395531dac4bc38bdd4283a80.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:15:18.307

终于找到了解决办法

将此行更改为示例

```
await m_mediaCaptureMgr.InitializeAsync(); 
```

对此

```
await m_mediaCaptureMgr.InitializeAsync(settings); 
```

# shutdown - 安卓：关机

> ID：11536379
> 
> 赞同：0
> 
> 时间：2012-07-18T07:31:10.007
> 
> 标签：shutdown

如何以编程方式关闭我的 android 设备？直到现在我已经通过 SuperonClick v.2.3.3.0 植根我的 android 设备并且生根成功。然后我授予了我的 .apk 文件超级用户权限。然后我实现了代码执行 su 文件并在我的程序中重新启动

```
try {
                Process proc = Runtime.getRuntime().exec(new String[] { "su", "-c", "reboot" });
                DataOutputStream os= new DataOutputStream(proc.getOutputStream());
                os.writeBytes("/system/bin/-p\n");
                os.flush();     

            } catch (Exception ex) {
               ex.printStackTrace();
            } 
```

.

但是设备没有重新启动，也没有关机。请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:34:53.263

您是否在 manifest.xml 中设置了正确的权限？类似 [http://developer.android.com/reference/android/Manifest.permission.html#REBOOT](http://developer.android.com/reference/android/Manifest.permission.html#REBOOT)

编辑：您是否尝试过仅使用 su 命令？

```
Process process = Runtime.getRuntime().exec("su"); 
```

# php - 通过 Facebook API 获取用户的生日

> ID：11536382
> 
> 赞同：2
> 
> 时间：2012-07-18T07:31:28.143
> 
> 标签：php, javascript, facebook

我在使用 Facebook API 时遇到了一些问题，我正在通过 Javascript 请求对用户的某些信息的许可：

```
FB.login(function (response) {
    if (response.authResponse) {
        // authorized
    } else {
        // canceled
    }
}, {scope: 'email,user_birthday,user_location'}); 
```

现在我想通过 PHP 获取用户的信息（当他被授权时）：

```
$facebookUser = json_decode(file_get_contents('https://graph.facebook.com/' . $this->data['userid'] . '?access_token=' . $this->oathtoken . '&fields=id,name,location,gender,email,picture,birthday,link')); 
```

一切都很好，除了 API 没有回馈用户的生日。即使我将我的生日隐私设置设为公开，它也不会显示。

所以：

```
echo $facebookUser['birthday']; // Gives an error, since this key does not exists 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:39:28.620

您在客户端登录，但 php 在服务器端执行，因此您只收到用户对象的基本信息。

如果您在服务器端登录并拥有[权限](https://developers.facebook.com/docs/authentication/permissions/)，那么您可以简单地通过以下方式获取生日：

```
echo $facebookUser['birthday']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T08:54:38.683

很可能您没有收到`user_birthday`来自 FB 的请求批准。

`user_birthday`除非 FB 审查您的 FB 应用程序，否则您无法获得。

未经审查只能请求以下权限：`public_profile`和`user_friends`（`email` 参见：[https](https://developers.facebook.com/docs/facebook-login/review/what-is-login-review) ://developers.facebook.com/docs/facebook-login/review/what-is-login-review ）

未经审查，您只能请求`age_range`，但不能`user_birthday`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:28:42.527

```
FB.login(function (response) {
    var user_birthday = response.user_birthday; 
    console.log(user_birthday);
if (response.authResponse) {

} else {
    // canceled
}
}, {scope: 'email,user_birthday,user_location'}); 
```

如果您想在服务器端获取 FB 信息，为什么不使用服务器端身份验证？

如果您对客户端身份验证没问题，上面应该可以工作。

# sql - PostgreSQL 查询中的日期列算术

> ID：11536385
> 
> 赞同：1
> 
> 时间：2012-07-18T07:31:53.887
> 
> 标签：sql, postgresql, date-arithmetic

我有两个看起来像这样的表：

```
CREATE TABLE table1 (user_id int, the_date date);
CREATE TABLE table2 (user_id int, the_date date, something_else real); 
```

我正在编写一个看起来像这样的查询

```
CREATE TABLE foo AS 
 SELECT t1.user_id
 , (t1.the_date - (t2.the_date - t1.the_date)::int) start_date
 FROM table1 t1, table2 t2 
 where t1.user_id=t2.user_id
 ; 
```

当我运行上述查询时，我在 psql 控制台上显示以下错误：

> ```
> ERROR:  syntax error at or near "$1"
> LINE 1: ...the_date - (t2.the_date - t1.the_date)::int)  $1 ...
> 
>                                                              ^ 
> ```

查询结果中的第二列是显示一个日期，即`N days BEFORE`table1 中的日期，其中 N 是 table2 中的日期与 table1 中的日期之间的差异（以天为单位）。

注意：`table2`总是有比`table1`.

如何执行此日期计算并将结果存储为查询中的新列别名？

我正在使用 PG 8.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:25:29.690

您需要表格限定`t1.user_id`来消除歧义。加上其他调整：

```
CREATE TABLE foo AS 
SELECT user_id, (t1.the_date - (t2.the_date - t1.the_date)) AS start_date
FROM   table1 t1
JOIN   table2 t2 USING (user_id); 
```

*   减去两个日期产生整数。演员阵容是多余的。

*   Don't omit the `AS` keyword for [column aliases](https://www.postgresql.org/docs/current/queries-table-expressions.html#QUERIES-TABLE-ALIASES) - while it's generally OK to omit `AS` for table aliases. [The manual:](https://www.postgresql.org/docs/current/sql-select.html#SQL-SELECT-LIST)

    > You can omit `AS`, but only if the desired output name does not match any PostgreSQL keyword ([see Appendix C](https://www.postgresql.org/docs/current/sql-keywords-appendix.html)). For protection against possible future keyword additions, it is recommended that you always either write `AS` or double-quote the output name.)

*   Joining tables with a `USING` clause only keeps *one* instance of the joining columns(s) (`user_id` in this case) in the result set and you don't have to table-qualify it any more.

# php - 从本地系统上传后将视频转换为 .mp4 格式不显示视频只听到声音

> ID：11536387
> 
> 赞同：0
> 
> 时间：2012-07-18T07:32:13.777
> 
> 标签：php, ffmpeg, mp4, video-conversion

我正在使用`fileuploader.js`上传视频文件。现在我想将视频格式转换为`.mp4`. 我已经使用`ffmpeg`并在上传后将`php`视频转换为`.mp4`。我使用的样本段是

```
$converted = "uploads/".$uniqid.".mp4"; //$uniqid is the id for the video after upload
$cmd = "$ffmpeg -i $sourceUrl -f mp4 $converted"; //$sourceUrl is the path of the video 
```

我试图将`.flv`视频文件转换为`.mp4`格式，但问题是我看不到视频，只能在转换后听到声音。是不是用的转换线`$cmd`不正确。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:44:33.477

应该`ffmpeg -i source.flv output.mp4`足够了，它将使用 mp4 的默认编解码器。您可以将 ffmpeg 响应粘贴到上述命令吗？

# c - C：将最小 32 位整数 (-2147483648) 转换为浮点数给出正数 (2147483648.0)

> ID：11536389
> 
> 赞同：15
> 
> 时间：2012-07-18T07:32:17.337
> 
> 标签：c, floating-point, int, long-integer, minimum

当我遇到一些我认为奇怪的行为时，我正在做一个嵌入式项目。我设法在键盘上重现它（见下文）以确认，但我的机器上没有任何其他 C 编译器可以在它们上尝试。

场景：我有`#define`一个 32 位整数可以容纳的最大负值，然后我尝试使用它与浮点值进行比较，如下所示：

```
#define INT32_MIN (-2147483648L)

void main()
{
    float myNumber = 0.0f;
    if(myNumber > INT32_MIN)
    {
        printf("Everything is OK");
    }
    else
    {
        printf("The universe is broken!!");
    }
} 
```

键盘链接：[http ://codepad.org/cBneMZL5](http://codepad.org/cBneMZL5)

对我来说，这段代码看起来应该可以正常工作，但令我惊讶的是它会打印出`The universe is broken!!`.

这段代码隐式地将 转换`INT32_MIN`为 a `float`，但事实证明这会导致浮点值`2147483648.0`（正！），即使浮点类型完全能够表示`-2147483648.0`。

有没有人对这种行为的原因有任何见解？

**代码解决方案**：正如史蒂夫杰索普在他的回答中提到的，`limits.h`并且已经`stdint.h`包含正确的（工作）`int`范围`define`，所以我现在使用这些而不是我自己的`#define`

**问题/解决方案解释摘要：**鉴于答案和讨论，我认为这是对正在发生的事情的一个很好的总结（注意：仍然阅读答案/评论，因为它们提供了更详细的解释）：

*   我正在使用具有 32 位`long`s 的 C89 编译器，因此任何大于`LONG_MAX`和小于或等于后缀的值都有一种`ULONG_MAX`类型`L``unsigned long`
*   `(-2147483648L)`实际上是`-`（见前`unsigned long`一点）值的一元：`-(2147483648L)`. 此否定操作将值“包装”为的`unsigned long`值`2147483648`（因为 32 位`unsigned long`s 具有范围`0`- `4294967295`）。
*   这个`unsigned long`数字在打印为 an或传递给函数时*看起来*像预期的负值，因为它首先被强制转换为 an ，它将这个超出范围的范围包装为（因为 32 位s 的范围为 -2147483648至 2147483647)`int``int``int``2147483648``-2147483648``int`
*   但是，强制转换`float`为使用实际`unsigned long`值`2147483648`进行转换，从而产生 的浮点值`2147483648.0`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T07:38:51.070

代替

```
#define INT32_MIN (-2147483648L) 
```

和

```
#define INT32_MIN (-2147483647 - 1) 
```

`-2147483648`被编译器解释为 的否定`2147483648`，这会导致 . 的溢出`int`。所以你应该改写`(-2147483647 - 1)`。
不过，这都是`C89`标准的。请参阅史蒂夫杰索普的答案`C99`。
通常在`long`32 位机器上是 32 位，在 64 位机器上是 64 位。`int`这里把事情做好了。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-18T08:16:49.937

在具有 32 位的 C89 中`long`，`2147483648L`具有类型`unsigned long int`（请参阅 3.1.3.2 整数常量）。因此，一旦将模算术应用于一元减法运算，`INT32_MIN`就是类型为 2147483648 的正值`unsigned long`。

在 C99 中，如果大于 32 位，则`2147483648L`具有类型，否则（请参阅 6.4.4.1 整数常量）。所以没有问题，是负值 -2147483648 类型为or 。`long``long``long long``INT32_MIN``long``long long`

`long`同样在大于 32 位的 C89 中，`2147483648L`有类型`long`并且`INT32_MIN`是负数。

我猜你使用的是 32 位的 C89 编译器`long`。

一种看待它的方法是 C99 修复了 C89 中的“错误”。在 C99 中，没有`U`后缀的十进制文字*始终*具有带符号类型，而在 C89 中，它可能是有符号或无符号的，具体取决于其值。

顺便说一句，您可能应该做的是包含`limits.h`并使用a`INT_MIN`的最小值`int`和`LONG_MIN`a 的最小值`long`。它们具有正确的值*和*预期的类型（`INT_MIN`is an `int`, `LONG_MIN`is a `long`）。如果您需要一个精确的 32 位类型，那么（假设您的实现是 2 的补码）：

*   对于不必移植的代码，您可以使用您喜欢的正确大小的任何类型，并断言它是安全的。
*   对于必须可移植的代码，请搜索`stdint.h`适用于 C89 编译器的 C99 标头版本，并从中使用`int32_t`和使用`INT32_MIN`。
*   如果一切都失败了，请写下`stdint.h`自己，并使用 WiSaGaN 答案中的表达式。它的类型为`int`if`int`至少为 32 位，否则为`long`.

# php - 在 Paypal 中完成购买后重定向到原始站点

> ID：11536393
> 
> 赞同：0
> 
> 时间：2012-07-18T07:32:25.330
> 
> 标签：php, cakephp, paypal, integration

我正在制作一个网络应用程序。我使用简单的表单提交到 Paypal 站点，将 Paypal 集成到其中。一切正常。但是每当付款成功时，它应该使用 Paypal 的响应重定向回我的原始站点。但是，它没有按应有的方式工作。目前它只保留在 Paypal 网站上。

```
<form action='https://www.sandbox.paypal.com/cgi-bin/webscr' method='post' name='form'>
 <input type='hidden' name='business' value='<?php echo $paypal_id; ?>'>
<input type='hidden' name='cmd' value='_xclick'>
<input type='hidden' name='item_name' id='item_name' value=''>
<input type='hidden' name='item_number' id='item_number' value=''>
<input type='hidden' name='amount' id='amount' value=''>
<input type='hidden' name='no_shipping' value='1'>
<input type='hidden' name='currency_code' value='USD'>
<input type='hidden' name='cancel_return' value='http://yoursite.com/cancel.php'>
<input type='hidden' name='return' value='http://mysite.com/user_credits/purchase_credits'>
<input type="image" src="https://paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" name="submit"> 
```

我错过了什么？我正在使用 CakePHP 2.0。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T07:37:19.977

您必须在 paypal 中启用自动退货功能设置。

只需按照以下步骤启用

1.  登录并单击“我的帐户”下的“个人资料”子选项卡。
2.  单击销售偏好下的网站支付偏好链接。
3.  单击打开单选按钮以启用自动返回。
4.  输入返回 URL。注意：您必须满足退货 URL 要求才能设置自动退货。详细了解返回 URL。

对于沙盒帐户，请执行以下操作

1.  登录到 Sandbox Merchant Id，然后单击“我的帐户”下的“个人资料”子选项卡。
2.  单击配置文件下的更多选项链接。
3.  看第三行的销售偏好。
4.  点击销售偏好下的网站支付偏好链接
5.  单击打开单选按钮以启用自动返回。
6.  单击打开单选按钮以启用自动返回。
7.  输入返回 URL。注意：您必须满足退货 URL 要求才能设置自动退货。详细了解返回 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:41:16.533

根据PayPal 按钮参数[的规范](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)，您需要设置返回方式。

```
<input type='hidden' name='return' value='http://mysite.com/user_credits/purchase_credits'>
<input type='hidden' name='rm' value='1'> 
```

值如下：

*   `0`- 不要重定向，并使用 GET。
*   `1`- 使用 GET 自动重定向到`return`URL。
*   `2`- 使用 POST 自动重定向到`return`URL，包括所有支付变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T13:05:39.180

要实现 PayPal 按钮 html 表单参数，请使用此

```
<form method=post action=https://api-3t.sandbox.paypal.com/nvp>
  <input type=hidden name=USER value=API_username>
  <input type=hidden name=PWD value=API_password>
  <input type=hidden name=SIGNATURE value=API_signature>
  <input type=hidden name=VERSION value=XX.0>
  <input type=hidden name=PAYMENTREQUEST_0_PAYMENTACTION value=Sale>
  <input name=PAYMENTREQUEST_0_AMT value=19.95>
  <input type=hidden name=RETURNURL value=https://www.YourReturnURL.com>
  <input type=hidden name=CANCELURL value=https://www.YourCancelURL.com>
  <input type=submit name=METHOD value=SetExpressCheckout>
</form> 
```

此页面包含您需要的所有信息 [https://developer.paypal.com/docs/classic/express-checkout/integration-guide/ECGettingStarted/](https://developer.paypal.com/docs/classic/express-checkout/integration-guide/ECGettingStarted/)

或者使用集成向导生成格式 [https://devtools-paypal.com/integrationwizard/ecpaypal/main.php](https://devtools-paypal.com/integrationwizard/ecpaypal/main.php)

# mysql - MySQL效率/组合

> ID：11536396
> 
> 赞同：0
> 
> 时间：2012-07-18T07:32:35.650
> 
> 标签：mysql, performance, combinations

```
CREATE TABLE VanNaar_4P

SELECT

a2.ID as Van,a2.lat as v_lat ,a2.lon as v_lon,

a1.ID as Naar,a1.lat as n_lat ,a1.lon as n_lon

FROM

adressen a1 

JOIN adressen a2; 
```

这个查询可以写得更有效率吗？我觉得它的大小已经很长了……基本上我有一个这样的列表：

```
1 a b
2 d e
3 i w 
```

我需要所有组合（每行的一些字段，基于唯一的 ID）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:36:15.517

一些 JOIN 条件怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:24:31.463

查询所有可能的组合：

**[SQLFiddle示例](http://sqlfiddle.com/#!2/940af/1)**

```
SELECT
*
FROM tbl t1, tbl t2 
```

您的查询每个可能的组合：

```
SELECT
a2.ID as Van,a2.lat as v_lat ,a2.lon as v_lon,
a1.ID as Naar,a1.lat as n_lat ,a1.lon as n_lon
FROM adressen a1, adressen a2 
```

一些示例数据：

```
INSERT INTO tbl
(type, details)
VALUES
('a', 'b'),
('g', 'z'),
('k', 'l'),
('c', 'a'); 
```

结果：

```
| TYPE | DETAILS |
------------------
|    a |       b |
|    g |       z |
|    k |       l |
|    c |       a |
|    a |       b |
|    g |       z |
|    k |       l |
|    c |       a |
|    a |       b |
|    g |       z |
|    k |       l |
|    c |       a |
|    a |       b |
|    g |       z |
|    k |       l |
|    c |       a | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:50:04.433

首先，你的问题是对称的，所以你可以这样做

```
CREATE TABLE VanNaar_temp
SELECT
  a2.ID as Van,a2.lat as v_lat ,a2.lon as v_lon,
  a1.ID as Naar,a1.lat as n_lat ,a1.lon as n_lon
FROM adressen a1 
INNER JOIN adressen a2 ON a2.id<a1.id;

CREATE TABLE VanNaar_4P
SELECT * FROM VanNaar_temp;

INSERT INTO VanNaar_4P
SELECT Narr, n_lat, n_lon, Van, v_lat, v_long
FROM VanNaar_temp;

DROP TABLE VanNaar_temp; 
```

这忽略了零方式，即`Van==Nar`。如果您真的需要它们，请添加

```
INSERT INTO VanNaar_4P
SELECT
  a2.ID as Van,a2.lat as v_lat ,a2.lon as v_lon,
  a1.ID as Naar,a1.lat as n_lat ,a1.lon as n_lon
FROM adressen a1 
INNER JOIN adressen a2 ON a2.id=a1.id; 
```

# java - 大十进制字符串

> ID：11536403
> 
> 赞同：1
> 
> 时间：2012-07-18T07:33:10.413
> 
> 标签：java, tostring, bigdecimal

我正在尝试上传一个列包含超过 250 位数字的 excel 字段。当我在 excel 中输入值时，它会自动将其转换为这种格式 1.23456789012345E+256 当我尝试使用 Big Decimal 的 toPlainString 方法读取值时，它会在 15 位后返回全 0。如果我给出没有指数的整个数字，同样的效果也很好。当输入为 1.23456789012345E+256 时，如何获得整数？

```
BigDecimal bd = new BigDecimal(String.valueOf("1.23456789012345E+256"));
System.out.println( bd.toPlainString()); 
```

返回的字符串

*123456789012345*0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000来了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:37:00.693

> 输入为 1.23456789012345E+256 时如何获取整数

这是作为 BigDecimal 的整个数字。

1.23456789012345E+256 == 12345678901234500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

* * *

你为什么使用 BigDecimal？Excel 使用`double`并且保留它使用的类型会更有意义。

```
double d = 1.23456789012345E+256;
System.out.println(d); 
```

印刷

```
1.23456789012345E256 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:37:04.563

你不能，精度会丢失。您必须以更高精度的格式存储您的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T05:41:51.393

尝试使用 Double 而不是 double。它还基于您的数据库列数据类型。如果您的数据库允许 1.23456789012345E+256，那么 Double 将帮助您，如果数据库列是 Float。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T06:57:25.253

通过在数字'1233278238789787前加上单引号，我能够在四舍五入之前获得原始数字

# objective-c - 数据导入后，FetchedResultsController 看不到 managedObjectContext 的变化

> ID：11536409
> 
> 赞同：2
> 
> 时间：2012-07-18T07:33:40.137
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

我正在我的应用程序中处理数据导入部分，为了使 UI 更可靠，我关注了这篇 Marcus Zarra 文章 [http://www.cimgf.com/2011/08/22/importing-and-displaying-large -核心数据中的数据集/](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)

这个想法是您在后台踏板的单独上下文中进行导入（我为此使用 GCD），并且您的 fetchedResultsController 的上下文通过观察**NSManagedObjectContextDidSaveNotification**来合并更改。

我遇到的问题对我来说很奇怪——我的 fetchedResultsController 没有得到这些更改，并且在新数据到来时不会重新加载 TableView。但是，如果我触发以下方法，该方法会进行获取并重新加载表 - 它会全部获取。

```
- (void)updateUI
{                                         
  NSError *error;
  if (![[self fetchedResultsController] performFetch:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
  }
  [self.tableView reloadData];
} 
```

所以现在我在获得**NSManagedObjectContextDidSaveNotification**以使其工作时调用该方法，但它对我来说看起来很奇怪和讨厌。

```
 - (void)contextChanged:(NSNotification*)notification
{
  if ([notification object] == [self managedObjectContext]) return;

  if (![NSThread isMainThread]) {
    [self performSelectorOnMainThread:@selector(contextChanged:) withObject:notification waitUntilDone:NO];
    return;
  }

  [[self managedObjectContext] mergeChangesFromContextDidSaveNotification:notification];
  //TODO:Make it work as it should - merge, without updateUI
   [self updateUI];//!!!Want to get rid of this!
} 
```

为什么会这样？这是负责解析数据并添加观察者的代码。

```
- (void)parseWordsFromServer:(NSNotification *)notification
{

  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0) , ^{
    NSDictionary *listInJSON = [notification userInfo];
    wordsNumbers = [[listInJSON valueForKey:@"words"]mutableCopy];

    if ([wordsNumbers count])
    {
      [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(contextChanged:) name:NSManagedObjectContextDidSaveNotification object:nil]; 
```

//新线程的新上下文 NSManagedObjectContext *backContext = [[AppDelegate sharedAppDelegate]backManagedObjectContext];

```
 //Get all the words we already have on this device
      NSArray *wordsWeHave = [Word wordsWithNumbers:wordsNumbers inManagedContext:backContext];
      //Add them to this list
      for (Word *word in wordsWeHave)
        [[List listWithID:[currentList listID] inManagedObjectContext:backContext]addWordsObject:word];
      [backContext save:nil];!//Save the context - get the notification
         }

  });

} 
```

**编辑** 我`NSFetchedResutsControllerDelegate`确实使用了，如果我没有，我怎么能假装我的表格视图被更新？

**更新**决定只是转移到父子范式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:31:32.723

这个问题已经讨论过很多次了，比如[NSFetchedResultsController 没有显示来自不同上下文](https://stackoverflow.com/questions/10428271/nsfetchedresultscontroller-doesnt-show-updates-from-a-different-context)的更新，而且很难理解发生了什么，但我没有什么笔记。

首先，您违反了一个简单的规则：每个线程都需要一个托管对象上下文（[与核心数据部分的并发](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)）。

> 为每个线程创建一个单独的托管对象上下文并共享一个持久存储协调器。

因此，在您的自定义线程中访问主上下文，获取其持久协调器并将其设置为新上下文。

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
[moc setPersistentStoreCoordinator:persistentStoreCoordinatorGrabbedFromAppDelegate]; 
```

二、不需要注册

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(contextChanged:) name:NSManagedObjectContextDidSaveNotification object:nil]; 
```

在新线程中。只需在创建新线程的类中（或在应用程序委托中）注册它。

最后，如果您不使用 a [`NSFetchedResutsControllerDelegate`](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSFetchedResultsControllerDelegate)，请使用它。它允许摆脱重新加载数据表。当上下文发生变化时，委托会响应变化：编辑、删除、添加。

从 iOS 5 开始，您可以使用新的 Core Data API 并通过新的[限制机制](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html)让您的生活更轻松。

**编辑**

来自**@mros**评论。

> [多上下文CoreData](http://www.cocoanetics.com/2012/07/multi-context-coredata/)
> 
> 它可能会帮助您更多地了解使用父子核心数据模型的优势。我特别喜欢使用私有队列上下文来处理持久存储。确保通读整件事，因为开头显示了如何不这样做。

希望有帮助。

# java - 将 ActionBarSherlock 作为库添加到 android 项目时出错

> ID：11536415
> 
> 赞同：0
> 
> 时间：2012-07-18T07:34:00.923
> 
> 标签：java, android, actionbarsherlock

我一直在尝试用谷歌地图来行动。按照这个 youtube 链接（http://www.youtube.com/watch?v=avcp6eD_X2k），我设法将它作为一个库添加到我的 android 项目中。但是，添加后，我收到如下错误，并且我的 R.java 文件被删除。

```
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:47: error: Error: No resource found that matches the given name: attr 'android:actionBarSize'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:48: error: Error: No resource found that matches the given name: attr 'android:actionBarStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:50: error: Error: No resource found that matches the given name: attr 'android:actionBarTabBarStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:49: error: Error: No resource found that matches the given name: attr 'android:actionBarTabStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:51: error: Error: No resource found that matches the given name: attr 'android:actionBarTabTextStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:52: error: Error: No resource found that matches the given name: attr 'android:actionButtonStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:53: error: Error: No resource found that matches the given name: attr 'android:actionDropDownStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:54: error: Error: No resource found that matches the given name: attr 'android:actionMenuTextAppearance'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:55: error: Error: No resource found that matches the given name: attr 'android:actionMenuTextColor'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:56: error: Error: No resource found that matches the given name: attr 'android:actionModeBackground'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:57: error: Error: No resource found that matches the given name: attr 'android:actionModeCloseButtonStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:58: error: Error: No resource found that matches the given name: attr 'android:actionModeCloseDrawable'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:59: error: Error: No resource found that matches the given name: attr 'android:actionOverflowButtonStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:61: error: Error: No resource found that matches the given name: attr 'android:popupMenuStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:62: error: Error: No resource found that matches the given name: attr 'android:selectableItemBackground'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:63: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:64: error: Error: No resource found that matches the given name: attr 'android:windowActionModeOverlay'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v13\abs__styles.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabBar'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v13\abs__styles.xml:5: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabView'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v13\abs__styles.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabText'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:88: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionButton'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values\abs__styles.xml:73: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Spinner.DropDown'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:89: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Spinner'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:90: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionButton.CloseMode'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:91: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionButton.Overflow'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values\abs__styles.xml:93: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.ListPopupWindow'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:93: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ListPopupWindow'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:92: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ListView.DropDown'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values\abs__styles.xml:102: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.PopupMenu'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:94: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.PopupMenu'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:98: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:140: error: Error: No resource found that matches the given name: attr 'android:actionBarSize'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:141: error: Error: No resource found that matches the given name: attr 'android:actionBarStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:143: error: Error: No resource found that matches the given name: attr 'android:actionBarTabBarStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:142: error: Error: No resource found that matches the given name: attr 'android:actionBarTabStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:144: error: Error: No resource found that matches the given name: attr 'android:actionBarTabTextStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:145: error: Error: No resource found that matches the given name: attr 'android:actionButtonStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:146: error: Error: No resource found that matches the given name: attr 'android:actionDropDownStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:147: error: Error: No resource found that matches the given name: attr 'android:actionMenuTextAppearance'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:148: error: Error: No resource found that matches the given name: attr 'android:actionMenuTextColor'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:149: error: Error: No resource found that matches the given name: attr 'android:actionModeBackground'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:150: error: Error: No resource found that matches the given name: attr 'android:actionModeCloseButtonStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:151: error: Error: No resource found that matches the given name: attr 'android:actionModeCloseDrawable'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:152: error: Error: No resource found that matches the given name: attr 'android:actionOverflowButtonStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:154: error: Error: No resource found that matches the given name: attr 'android:popupMenuStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:155: error: Error: No resource found that matches the given name: attr 'android:selectableItemBackground'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:156: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:157: error: Error: No resource found that matches the given name: attr 'android:windowActionModeOverlay'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v13\abs__styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabBar'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v13\abs__styles.xml:9: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabView'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v13\abs__styles.xml:10: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabText'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:180: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionButton'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:183: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionButton.Overflow'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values\abs__styles.xml:191: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Spinner.DropDown'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:181: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.Spinner'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:182: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionButton.CloseMode'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:184: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ListView.DropDown'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values\abs__styles.xml:202: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.ListPopupWindow'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:185: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ListPopupWindow'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values\abs__styles.xml:205: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.PopupMenu'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:186: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.PopupMenu'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:67: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:69: error: Error: No resource found that matches the given name: attr 'android:customNavigationLayout'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:70: error: Error: No resource found that matches the given name: attr 'android:displayOptions'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:73: error: Error: No resource found that matches the given name: attr 'android:homeLayout'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:75: error: Error: No resource found that matches the given name: attr 'android:indeterminateProgressStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:76: error: Error: No resource found that matches the given name: attr 'android:itemPadding'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:77: error: Error: No resource found that matches the given name: attr 'android:logo'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:78: error: Error: No resource found that matches the given name: attr 'android:navigationMode'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:81: error: Error: No resource found that matches the given name: attr 'android:progressBarPadding'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:83: error: Error: No resource found that matches the given name: attr 'android:subtitle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:84: error: Error: No resource found that matches the given name: attr 'android:subtitleTextStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:80: error: Error: No resource found that matches the given name: attr 'android:titleTextStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:160: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:162: error: Error: No resource found that matches the given name: attr 'android:customNavigationLayout'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:163: error: Error: No resource found that matches the given name: attr 'android:displayOptions'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:166: error: Error: No resource found that matches the given name: attr 'android:homeLayout'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:168: error: Error: No resource found that matches the given name: attr 'android:indeterminateProgressStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:169: error: Error: No resource found that matches the given name: attr 'android:itemPadding'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:170: error: Error: No resource found that matches the given name: attr 'android:logo'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:171: error: Error: No resource found that matches the given name: attr 'android:navigationMode'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:174: error: Error: No resource found that matches the given name: attr 'android:progressBarPadding'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:176: error: Error: No resource found that matches the given name: attr 'android:subtitle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:177: error: Error: No resource found that matches the given name: attr 'android:subtitleTextStyle'.
[2012-07-18 15:26:46 - SRD-Android] C:\Users\consprice\Downloads\JakeWharton-ActionBarSherlock-3.4.0-0-g38eb59b\JakeWharton-ActionBarSherlock-0a25f34\library\res\values-v11\abs__styles.xml:173: error: Error: No resource found that matches the given name: attr 'android:titleTextStyle'. 
```

android 应用程序使用 Google API 8。库项目是使用 Google API 15 构建的。我还为地图添加了插件，但出现以下错误：

`The type com.actionbarsherlock.ActionBarSherlock$OnCreatePanelMenuListener cannot be resolved. It is indirectly referenced from required .class files`

我猜这是由于图书馆的错误。任何人都可以提供一些帮助吗？

编辑（项目属性）

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system edit
# "ant.properties", and override values to adapt the script to your
# project structure.
#
# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
#proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt:proguard-project.txt

# Project target.
target=Google Inc.:Google APIs:8
android.library.reference.1=../../Downloads/JakeWharton-ActionBarSherlock-4.0.0-0-g422d546/JakeWharton-ActionBarSherlock-df676ad/library 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:39:41.693

以下是您需要做的几件事：

1-至少将您的构建目标设置为 API 级别 14。

2-在您的清单中添加：

```
<uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="14" />

<application
        android:theme="@style/Theme.Sherlock" > 
```

# string - FastReports 中的字符串长度

> ID：11536418
> 
> 赞同：0
> 
> 时间：2012-07-18T07:34:11.693
> 
> 标签：string, delphi

我正在从 Ms-Sql 数据库中提取数据。但在将它们打印到我的报告中之前，我想检查组件 frMaster."column1" 和 frMaster."column2" 的长度。我怎样才能做到这一点？Column1 和 Column2 是字符串。如果我的字符串长度超过 10 个字符，我的备忘录必须增加它们的高度，如果不是，它们保持不变。此代码无效，备忘录保持不变。我试图做这样的事情，但它在打印事件之前不起作用：

```
 if (Length(<frMaster."column1">) > 10)  or (Length(<frMaster."column2">) > 10)                          
   then 
           begin 
                   Memo34.Height:= 0.7;
                   Memo33.Height:= Memo33.Height + 0.35;
                   Memo20.Top := Memo20.Top + 0.35;
                   Memo21.Top := Memo21.Top + 0.35;
                   Memo35.Top := Memo35.Top + 0.35;
                   Memo36.Top := Memo36.Top + 0.35;
                   Memo22.Top := Memo22.Top + 0.35;
                   Memo39.Top := Memo39.Top + 0.35;                           

           end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:21:38.677

您可以使用数据树中可用的长度函数或作为包含在代码中的函数：

![数据树](../Images/cf7b5e181afbbf188995404f048b7be4.png)

您可以像在 Delphi 中一样通过覆盖备忘录的事件处理程序来使用它：

![在此处输入图像描述](../Images/61058fce96a5bb6bdedad1c21c4867fb.png)

啊! 我懂了。你用了它，但它没有用。正确的！好像我以前也有过这种情况。我想我可能做了一些事情，比如让备忘录只打印文本，然后可能是文本的长度，然后可能将事件移动到数据带，然后可能确保数据带的属性 Stretched 设置为 True 并制作确保备忘录的属性 StretchMode 设置为 smActualHeight 或 smMaxHeight。

# linux - linux默认库路径中的动态库不起作用

> ID：11536421
> 
> 赞同：0
> 
> 时间：2012-07-18T07:34:33.567
> 
> 标签：linux, dynamic-library

我已经将一个可执行文件复制到另一台机器上，我也将其依赖库复制到“/lib”目录，但是当我运行该文件时，它仍然找不到该库。当我设置

```
LD_LIBRARY_PATH=/lib 
```

它工作正常。</p>

目录**“/lib”**是查找库的默认路径吗？为什么在我设置 LD_LIBRARY_PATH 之前它不起作用？并且完全没有必要将 LD_LIBRARY_PATH 设置为应该是**默认**路径的“/lib”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:36:45.780

您忘记运行`ldconfig`以更新库位置缓存。

# jquery - 带有两个导航栏的jquery mobile

> ID：11536425
> 
> 赞同：-2
> 
> 时间：2012-07-18T07:34:36.443
> 
> 标签：jquery, mobile, navbar

我在第 1 页中有导航栏 A，在第 2 页中有导航栏 B，当我单击第 2 页中的导航栏 B 时，第 1 页中的导航栏 A 失去了焦点，所以当从第 2 页返回到第 1 页时，第 1 页没有显示任何内容因为导航栏 A 失去活动。

在page 1的Header中：</p>

```
<div data-role = "navbar"  id = "mainHeaderNavbar>
  <ul>  
    <li><a data-id = "top" id = "menu-top" class="ui-btn-active ui-state-persist my-btn" >Top</a></li>  
    <li><a data-id = "sports" id = "menu-sports" class="my-btn">Sports</a></li>  
  </ul>
</div> 
```

在第 2 页的页脚中：

```
<div data-role="navbar" data-iconpos="top" data-id = "setfooter" id = "setPageNavbar">
        <ul> 
            <li><a data-id = "discuss" id = "discuss"  data-icon="plus" class="my-btn"></a></li>
            <li><a data-id = "download" id = "download" data-icon="arrow-d" class="my-btn"></a></li>    
        </ul>  
</div> 
```

在我的 javascript 文件中，我使用它来收听第 1 页的导航栏事件：

```
$(document).delegate('.ui-navbar a', 'click', function () {
    $(this).addClass('ui-btn-active');
    $('.content_div').hide();
    $('#' + $(this).attr('data-id')).show();
}); 
```

如在第 2 页的导航栏中：

```
$("#discuss").live("click",function() 
```

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:41:34.977

应用于`data-ajax="false`导航栏..

例如：-

```
<a href="index.html" data-ajax="false>Link</a> 
```

# asp.net-mvc-3 - 如何对 DropDownlist 和 Checkbox 进行数据绑定？

> ID：11536427
> 
> 赞同：1
> 
> 时间：2012-07-18T07:34:43.953
> 
> 标签：asp.net-mvc-3, c#-4.0, sql-server-2008-r2

我有一个数据表，我在其中添加了分配工作链接....当单击它时，它会将我带到一个 assinedwork 按钮，我在下拉列表中绑定项目名称中的数据...和复选框...

```
Table for Projects
-----------

ProjetsId  |  ProjectName  |Decscription..
 1         |    aaaa       |    hihihihi
 2         |   bbbb         |  helohelo

 like that .....
 to bind the project name to Dropdownlist.

Table for Employee
-------------------
EmployeeId  |  EmployeNameName  |EmployeDescription..
 1         |    aaaa            |    hihihihi
 2         |   bbbb             |  helohelo

to bind the EmployeName to Checkbox
please help me ..................... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:11:56.760

**绑定到下拉列表**

基本上，您必须创建一个可枚举的集合`SelectListItem`并通过**ViewBag**或**View Model**将其传递给控制器​​。

从动作来看，

```
public ViewResult Edit(int id)
{
   ...

   var projects = _repository.GetAllProjects().Select(p => 
                     new SelectListItem
                     {
                        Text = p.ProjectName,
                        Value = p.ProjectsId.ToString()
                     });

   ViewBag.Projects = projects; // you can also use viewmodel

   ...
} 
```

从外观上看，

```
@Html.DropDownListFor(x => x.ProjectId, ViewBag.Projects, "Choose a project") 
```

# flex4 - 在 Flex 4 中将 TextArea 添加到 Datagrid

> ID：11536428
> 
> 赞同：0
> 
> 时间：2012-07-18T07:34:45.460
> 
> 标签：flex4, textarea

我们在项目中使用 Flex 4。这是一项要求。我们有一个带有一些行和列的 AdvancedDataGrid 控件。有一个产品列。因为产品的数量比较多，所以我们希望它显示在一个 textArea 中。我们有一个产品列的渲染器。单击产品列后，此文本区域应在单击的列上方可见。

我在 ProductsRenderer.mxml 中尝试了以下代码。这里的 x 和 y 是任意的。当我单击该列时，我看不到任何文本区域。

```
 <fx:Declarations>   
        <parsley:Configure/>
</fx:Declarations>

    <fx:Script>
        protected function clickHandler(event:MouseEvent):void
        {
            var textArea:TextArea = new TextArea();
            textArea.height = 40;
            textArea.width  = 50;
            textArea.x = //get x for TextArea;
            textArea.y = //get y for TextArea;
            textArea.visible = true;
            textArea.setFocus();
            textArea.text = fProducts;
        }

    ]]>
    </fx:Script>

<s:VGroup id="Box"
              paddingBottom="0"
              paddingTop="5"
              horizontalAlign="left" height="100%">
        <s:Label id="productsData" top="0" left="0" right="0" bottom="0" width="100%" click="clickHandler(event)"/>
</s:VGroup> 
```

这里应该怎么做才能让文本区域显示在网格上？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:40:11.690

您没有将 textArea 添加到任何父容器。执行以下操作：

```
protected function clickHandler(event:MouseEvent):void
        {
            var textArea:TextArea = new TextArea();
            textArea.height = 40;
            textArea.width  = 50;
            textArea.x = //get x for TextArea;
            textArea.y = //get y for TextArea;
            textArea.visible = true;
            FlexGlobals.topLevelApplication.addChild(textArea); //this could be something else, showing an example here.
            textArea.setFocus();
            textArea.text = fProducts;
        } 
```

# mysql - 如何停止 innodb 日志文件？

> ID：11536429
> 
> 赞同：1
> 
> 时间：2012-07-18T07:34:50.360
> 
> 标签：mysql, database

我想阻止 mysql 数据库创建 innodb 日志文件。我们可以删除或停止它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:54:20.420

您将需要完全禁用 InnoDB，因为 InnoDB 需要这些文件。

要禁用 InnoDB，请将以下两个参数添加到 MySQL 配置文件中，然后重新启动 MySQL：

```
[mysqld]

skip_innodb
default_storage_engine=MyISAM 
```

这假设您还没有任何 InnoDB 表。

答案到此结束——但我很好奇：你为什么要禁用 InnoDB？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T03:48:01.710

你为什么要这样做？
日志机制是引擎持久性和一致性的一部分，因此关闭它不会让数据库从崩溃中恢复（从上一个检查点到崩溃的数据将无法恢复，并且您会发现严重错误在日志中）。
由于引擎设计 - 日志文件是必须的。

你的需求是什么？也许有更好的解决方案满足您的需求。
例如 - 内存表对您来说是一个很好的解决方案（如果您不关心内容，只关心速度）？

# windows - 如何以编程方式在 Windows 和任何其他操作系统（主要是 Linux）之间共享位图图像？

> ID：11536443
> 
> 赞同：0
> 
> 时间：2012-07-18T07:35:41.973
> 
> 标签：windows, linux, graphics, bitmap

我认为位图文件的格式，甚至是与设备无关的位图，因为它在 Windows 上与其他操作系统不兼容。

有没有一种方法可以跨操作系统传输/共享原始位图图像，而无需对 PNG、JPEG 等格式进行编码和解码？

我将使用套接字。

编辑：为了增加一些清晰度，我需要处理到达我的 Windows 机器的图像并将其进一步传输到另一台机器，这主要是一个 Linux 机器，它将被进一步处理。图像以位图的形式以高频率到达。处理和传输必须尽可能快地进行，几乎是实时的，因此需要使用原始位图而不是压缩图像。对于传输，我将使用套接字和 tcp/ip。图像必须至少为 1600 万色。并且图像必须在另一台机器上绘制，这是疑问的症结所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:08:41.063

Windows 位图 (AKA .BMP) 格式是一种众所周知的格式，您可以在网上找到它的说明。许多图像查看器在 Windows 以外的操作系统上都支持它。

此外，网络、互联网和套接字丝毫不关心您传输的数据或格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:23:44.593

您可以使用 PGM/PPM 文件（PGM 用于单通道，PPM 用于 3 通道）。我个人使用过这些格式，因为它们非常容易读/写。[您可以在此处 (PGM)](http://netpbm.sourceforge.net/doc/pgm.html)和[此处 (PPM)](http://netpbm.sourceforge.net/doc/ppm.html)找到格式规范。

文件头纯 ASCII 如下：

```
<MAGIC>\n
<WIDTH> <HEIGHT> <MAX_VAL>\n 
```

其中`<MAGIC>`PGM 为“P5”，PPM 为“P6”。`<WIDTH>`并且`<HEIGHT>`是您的宽度和高度，作为 ASCII 编码的数字。`<MAX_VAL>`对于每通道 8 位的图像，可能是 255。我已明确指出换行符，但您实际上可以使用任何您喜欢的空格来分隔标题中的四个字段。然而，在 之后必须`<MAX_VAL>`紧跟一个空白字符（尽管它可以是任何空白字符）。

在 Linux 上编写彩色位图的代码草图：

```
unsigned char image[height][width][3];
// ... fill image ...
int fd = // open socket

// prepare and send header
char header[100] = {0};
int headerLen = snprintf(header, 100, "P6\n%d %d 255\n", width, height);
ssize_t written = write(fd, header, headerLen);
if(written != headerLen) ERROR;

// send body
written = write(fd, image, sizeof(image));
if(written != sizeof(image)) ERROR; 
```

对于阅读，您显然只需要阅读幻数、宽度和高度。

```
int fieldsRead = fscanf(fd, "P6\n%d %d 255\n", &width, &height);
if(fieldsRead != 2) ERROR; 
```

然后为 body 分配存储并读取它：

```
unsigned char data = new unsigned char[width * height * 3]; // remember to delete later
ssize_t bytesRead = read(fd, data, width*height*3);
if(width*height*3 != bytesRead) {
  delete [] data;
  ERROR;
} 
```

当然，可能必须更改读/写调用以使用您的套接字，但意图应该是明确的。

# lwuit - 将单选按钮的外观设置为代号一中的文本区域

> ID：11536447
> 
> 赞同：1
> 
> 时间：2012-07-18T07:35:50.587
> 
> 标签：lwuit, codenameone

我正在使用[代号一构建应用程序](http://www.codenameone.com)

我有一个带有很长文本的单选按钮。

当我关注此单选按钮时，该单选按钮的文本开始滚动。

我想做的是在屏幕上显示与单选按钮相关的所有文本。

所以我尝试了`radiotbutton.setUIID("TextArea");`

但是有了这个，只有单选按钮的外观会改变。单选按钮的文本不会溢出到多行。

我想一次全部显示单选按钮的文本（不管它有多长）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:09:49.853

`MultiButton`有单选按钮模式，但您需要提前知道行数。

解决方案类似于：

```
RadioButton r = new RadioButton();
Container c = new Container(new BoxLayout(new BoxLayout.X_AXIS));
c.addComponent(r);
TextArea radioText = new TextArea("Long text for radio button");
radioText.setEditable(false);
c.addComponent(radioText);
radioText.setUIID("RadioButton");
c.setLeadComponent(r); 
```

您可以在支持主要组件的 GUI 构建器中完成整个操作。

# asp.net - 检查跨数据库的 SOAP 标头用户名和密码？

> ID：11536449
> 
> 赞同：0
> 
> 时间：2012-07-18T07:36:05.953
> 
> 标签：asp.net, web-services, security, soapheader

我正在使用一个使用 SOAP 标头的 Web 服务。我需要验证数据库中的 SOAP 标头用户名和密码。有没有可能实现？？

我目前的工作方式是

```
if (AuthenticateUser.UserName == "smilu1" && AuthenticateUser.Password == "smilupass")
{ /*mycode*/  } 
```

在此您可以看到我已经硬编码了用户名和密码。我不想这样工作。相反，我需要从数据库访问它，以便完全控制它。

这个可以吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:42:41.117

创建一个数据库并将 UID (PK)、登录名和密码放入表中。

从数据库中获取登录名的密码。

如果没有返回行 = 未找到用户

如果有一行，请使用“AuthenticateUser.Password”检查密码。

成功后，您应该将密码作为哈希存储在数据库中。

您的问题不是 SOAP HEADER 而是数据库。

（对不起，我不是英语）

# svn - 将已存在于 SVN 中的项目共享到 SVN

> ID：11536452
> 
> 赞同：0
> 
> 时间：2012-07-18T07:36:14.703
> 
> 标签：svn

我正在处理工作区的离线（未连接到 svn ）版本。现在我想将此工作区同步到 SVN（这些项目已经存在于 SVN 上）。

如果我这样做了`right click -> share project`，那么我的结果是：项目与存储库同步，但我的所有文件都被存储库中的文件覆盖。（我不想要这个）

我不希望发生任何类型的自动更新/提交。我想将我的项目与存储库链接，而不是同步它并通过解决冲突进行手动签入或签出。因为我想签入工作区中的一些文件并签出其他一些文件。

请提出一些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:28:43.190

我解决这种情况的方法如下：

1.  首先将存储库签出为新项目。
2.  将项目的所有文件复制到刚刚签出存储库的刚刚创建的项目中。在文件冲突的情况下覆盖现有文件。我建议您**不要在 Eclipse 中执行复制操作**，最好使用您的系统文件浏览器（例如 Windows 上的资源管理器）执行此操作。
3.  在新项目上执行*刷新*，所有更改现在应该在项目中可见，您可以使用*比较到 -> 基本版本*来识别差异。
4.  如果所有修改都准备好了，您可以提交您的更改。

# java - 在javascript中调用java方法

> ID：11536455
> 
> 赞同：3
> 
> 时间：2012-07-18T07:36:35.593
> 
> 标签：java, javascript, html, jsp, jakarta-ee

我正在尝试在 javascript 中调用 java 方法。java 类驻留在服务器端。

示例 Java 代码是：

```
public class deleteconfig
{
  static boolean check = true;
  public static void initiate()
  {
    check = false; 
  }

} 
```

我想在我的 javascript 中调用我的 deleteconfig.initiate() 方法

任何帮助是极大的赞赏。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T07:57:36.207

由于 javascript 是客户端脚本，它不能直接调用驻留在服务器上的 java 方法

如果没有任何特定的 java 框架，您可以使用 Java Server Pages (JSP) 在收到来自 javascript 的 GET 请求时调用 deleteconfig.initiate()。

**发送请求**

您可能还想使用 JQuery（一个 javscript 插件 - [http://jquery.com/](http://jquery.com/)）像这样向服务器发送异步 GET 请求

```
//javascript code
function callInititiate(){

   //This sends a get request to executeInit.jsp
   //
   $.get('localhost/myWebbApp/executeInit.jsp');

}

$(callInitiate); 
```

**接收请求**

在服务器端，您应该有调用 deleteconfig.initiate() 静态方法的 executeInit.jsp

```
//in executeInit.jsp
<%@ page import="deleteconfig"%>

<%
// executes initiate() static method
deleteconfig.initiate();

%> 
```

也许阅读有关 Java Server Pages 的更多信息可以帮助您入门！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T08:06:47.897

javascript 在您的浏览器中运行，您的 java 代码部署在您的容器（Tomcat）中。

因此，调用它的唯一方法是通过 Web 调用。您的 javascript 应该调用对一个 servlet（在 web.xml 中配置）的 ajax 调用，并且该 servlet 应该调用您的 java 方法。

您也可以在服务器中运行 javascript。参见 NodeJS

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T07:55:52.417

您可以使用 JavaServerPage (JSP) 或 Applets，以下是针对您的情况的 JSP 示例：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
<HTML> 
 <HEAD> 
  <TITLE>JSP</TITLE> 
 </HEAD> 
 <BODY> 
  <H2>JSP </H2> 
  <UL> 
    <LI>Curent time: <%= new java.util.Date() %> 
    <LI>Host name: <%= request.getRemoteHost() %> 
    <LI>ID sesion: <%= session.getId() %> 
  </UL> 
  <% deleteconfig deletecfg = new deleteconfig(); %>
  <%= delectecfg.initiate(); =%>
 </BODY> 
</HTML> 
```

JSP 脚本元素是：

*   表达式：`<% = expression%>`表达式被评估并打印出文档。
*   Scriptlet`<% code%>`将代码插入到 servlet 服务方法中。
*   语句：`<%! code%>`代码插入到 servlet 类中，在任何方法之外。

对于 JSP 脚本元素是可能的，并且基于 XML 标记的另一种语法形式：

*   `<jsp:expression> Java expression </ jsp: expression>`
*   `<jsp:scriptlet> Java code </ jsp: scriptlet>`
*   `<jsp:declaration> Statement Java </ jsp: declaration>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T07:51:56.830

您的 Javascript 在浏览器中运行客户端，因此通常不会与运行服务器端的 Java 代码交互。您可能希望将 Java 方法公开为 RESTful API 端点并在 Javascript 代码中执行 AJAX 调用。

*   参见：[http](http://docs.jquery.com/Tutorials) ://docs.jquery.com/Tutorials （ajax 教程）

有几种方法在技术上是可行的，但不确定你为什么要这样做：

*   参见：[http ://www.andonyar.com/rec/2008-12/gemse/demo/doc/dev/java.xhtml](http://www.andonyar.com/rec/2008-12/gemse/demo/doc/dev/java.xhtml)
*   参见：[http ://www.rgagnon.com/javadetails/java-0170.html](http://www.rgagnon.com/javadetails/java-0170.html)

Google 的网络工具包： - 参见：[http ://code.google.com/p/google-web-toolkit-doc-1-5/wiki/DevGuideRPCDeployment](http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/DevGuideRPCDeployment)

# iphone - TBxml 沿字符串分隔符使用 tableview 解析

> ID：11536459
> 
> 赞同：0
> 
> 时间：2012-07-18T07:36:44.097
> 
> 标签：iphone, xcode, uitableview, uilabel, tbxml

我正在从一个 url 解析一个 xml 文件，它正确显示了内容。这是我的 xml 文件

```
<gold>
<price>
<title>22 K Gold - SGD $69.50</title>
</price>
<price>
<title>24 K Gold - SGD $62.50</title>
</price>
</gold> 
```

现在它在单元格中显示每个内容，如下图所示

![图片](../Images/06dfbfc793c93c64af707dd2bab43eac.png)

现在我需要在一个单元格中显示 22kgold 和一个单元格中的 SGD $69.50。还有下一个元素相同。还要在两个标签中打印这些值。

这是我在 .m 文件中的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSMutableArray *tableArray = [[NSMutableArray alloc]init];

    NSData *xmlData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://www.p41tech.com/img/application/android/server/kamala/goldprice.xml"]];
    tbxml = [[TBXML alloc]initWithXMLData:xmlData];

    TBXMLElement * root = tbxml.rootXMLElement;

    if (root)
    {
        TBXMLElement * elem_PLANT = [TBXML childElementNamed:@"price" parentElement:root];

        while (elem_PLANT !=nil)
        {
            TBXMLElement * elem_BOTANICAL = [TBXML childElementNamed:@"title" parentElement:elem_PLANT];
            NSString *botanicalName = [TBXML textForElement:elem_BOTANICAL];
            [tableArray addObject:botanicalName];
            elem_PLANT = [TBXML nextSiblingNamed:@"price" searchFromElement:elem_PLANT];
        }      
    }

    label1.text=@"%@",botanicalName;
    label2.text=@"%@",elem_PLANT;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [tableArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"download.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];   
    cell.textLabel.backgroundColor=[UIColor clearColor];
    cell.textLabel.text = [tableArray objectAtIndex:indexPath.row];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    tableView.backgroundColor=[UIColor clearColor];
    return cell;
} 
```

我的标签内容没有显示，我需要用'-'分隔每个单元格中的字符串。请指导我..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:36:36.837

你可能的意思是：

```
label1.text = [NSString stringWithFormat:@"%@", botanicalName];
label2.text = [NSString stringWithFormat:@"%@", elem_PLANT]; 
```

否则，您将字符串 "%@" 分配到标签中，而忽略`botanicalName`and `elem_PLANT`。

要将行分成两部分，您可以在`tableView:cellForRowAtIndexPath:`方法中使用以下内容：

```
NSArray *parts = [[tableArray objectAtIndex:indexPath.row] componentsSeparatedByString:@" - "];
NSString *item = [parts objectAtIndex:0];
NSString *price = [parts objectAtIndex:1]; 
```

然后，您可以：

1.  使用 、 或 单元格样式之一`UITableViewCellStyleSubtitle`，`UITableViewCellStyleValue1`并将`UITableViewCellStyleValue1`and`item`变量`price`分配给`cell.textLabel.text`and`cell.detailTextLabel.text`属性，或者

2.  您可以添加自定义单元格视图，并将它们分配给该视图中您自己的标签。

# c# - TransactionScope 给出错误分布式事务已完成。在新事务或 NULL 事务中登记此会话

> ID：11536462
> 
> 赞同：3
> 
> 时间：2012-07-18T07:36:58.363
> 
> 标签：c#, transactionscope

我正在用 c# 编写一个类库来执行生产数据库的归档功能（使用 SQLServer 2000）。在该函数中，我将多个表的记录从生产数据库移动到存档数据库，并在出现故障时使用 transactionScope 回滚更改。

由于大数据正在从生产数据库移动到存档数据库，因此至少需要 1/2 小时。如果我删除 transactionScope，一切正常，但使用 transactionScope，我会在 9-10 分钟后得到以下错误。

**分布式事务完成。在新事务或 NULL 事务中登记此会话。**

下面是伪代码

```
using (TransactionScope ts = new TransactionScope(TransactionScopeOption.Required, new TimeSpan(2, 0, 0)))
{
    Open connection
    Check data present in production DB

Insert into Archivedb.dbo.table1(field1,field2,field3....) Select * from Proddb.dbo.table1 where date between date1 and date2
Insert into Archivedb.dbo.table2(field1,field2,field3....) Select * from Proddb.dbo.table2 where date between date1 and date2
Insert into Archivedb.dbo.table3(field1,field2,field3....) Select * from Proddb.dbo.table3 where date between date1 and date2
Insert into Archivedb.dbo.table4(field1,field2,field3....) Select * from Proddb.dbo.table4 where date between date1 and date2
} 
```

我需要在某处设置超时吗？

## **编辑**

在打破我的头脑这么久之后，在下面的链接中找到了解决方案 [http://blogs.msdn.com/b/dotnetinterop/archive/2005/12/16/504604.aspx](http://blogs.msdn.com/b/dotnetinterop/archive/2005/12/16/504604.aspx) 希望它也能帮助其他人。

# python - django 完整性错误

> ID：11536468
> 
> 赞同：0
> 
> 时间：2012-07-18T07:37:16.763
> 
> 标签：python, django, web-applications

我有一个不寻常的案例。在我的 models.py 中，我有一个 Event 元素，以及两种不同类型的引用它的用户元素，如下所示。

```
class User(models.Model):

     attending = models.ManyToManyField('Event', related_name='User_attending')
     hosting = models.ForeignKey('Event', related_name='User_hosting')

     username = models.CharField(max_length=40)

class Event(models.Model):
     #event title
     title = models.CharField(max_length=200)
     #time created
     created = models.DateField('Date Created',auto_now_add=True) 
```

在我的views.py中，当我想创建一个用户时，我有以下一些：

```
 user = User()
    user.username = ""
    user.gender = 0
    user.fName = ""
    user.lName = ""
    ....
    user.save 
```

这是我的浏览器对我大喊大叫并说：

完整性错误，list_user.hosting_id 可能不为 NULL

在不创建事件元素的情况下解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:39:59.780

看来您想创建一个`User`而不给出`hosting`值。您可以通过添加`blank=True, null=True`到该字段来做到这一点：

```
hosting = models.ForeignKey('Event', related_name='User_hosting',
                            blank=True, null=True) 
```

您还需要添加迁移以修复数据库（因为数据库需要允许具有空字段的能力）。我建议为此目的使用[South 。](http://south.aeracode.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:41:38.013

你搞砸了你的关系；他们应该在`Event`，指向`User`。

# c# - 如何在数据表上执行交叉连接

> ID：11536469
> 
> 赞同：1
> 
> 时间：2012-07-18T07:37:17.497
> 
> 标签：c#, datatable, cross-join

我要对数据表（table1 X table2 X table3 X n 表）执行交叉连接（多对多关系）。这可以使用 for/foreach 循环或 linq 来完成。但不知道我应该选择哪一个或任何其他可用选项。

注意：我正在从 .xls 文件中读取数据，因此无法进行 sql 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:50:24.400

我认为没有一种自动方法可以与数据表进行交叉连接。

如果我是你，我会选择 Linq To Datasets。

看看这个 MSDN How to。[跨表查询（LINQ to DataSet）](http://msdn.microsoft.com/en-us/library/bb386969.aspx)

# objective-c - Mac OS X：在应用商店中启动时启动？

> ID：11536477
> 
> 赞同：9
> 
> 时间：2012-07-18T07:38:16.123
> 
> 标签：objective-c, macos, cocoa

我需要在系统启动时启动我的应用程序，但问题是：它已经在 App Store 中，所以我必须遵循一些规则，比如使用沙盒。这会导致所需功能（如*LSSharedFileListInsertItemURL*和*SMLoginItemSetEnabled ）失败*。在这种情况下我应该如何处理？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T12:43:40.603

我最近经历了同样的过程，不幸的是，使用沙盒它并不像以前那么容易。我制作了一个带有非常详细说明的测试应用程序，现在[在 Github 上](https://github.com/Keithbsmiley/LoginItemTest)

## 笔记

此演示应用程序和您的应用程序**只有在它们**最好部署在Xcode 调试文件夹中时才能工作，`/Applications/MyGreat.app`并且**不能可靠地工作。**

### 项目设置

这些是我的项目的设置，与此实现完美配合。

1.  创建启用 ARC 的新项目
2.  沙箱你的主应用程序和帮助应用程序（如果你还没有创建一个帮助程序，我们很快就会得到它）我还启用了代码签名
3.  由于这只是一个测试应用程序，因此我对主应用程序或助手都没有有效的权利
4.  如果您还没有，请创建一个帮助应用程序。转到您的项目设置并单击“添加目标”选择一个 Cocoa 应用程序。将其命名为 MyAwesomeProjectHelper 也启用了 ARC。（我将其“App Store 类别”留空）
5.  现在选择主应用程序的目标。转到构建阶段 -> 添加构建阶段 -> 添加复制文件。
6.  将目标更改为包装器。使子路径`Contents/Library/LoginItems`仅在未选中安装时保留复制。将您的助手应用程序从左侧的 Products 拖到 tableview 中。

### 主要应用程序代码设置

1.  将 ServiceManagement.framework 导入您的主应用程序（不是您的助手）并包含`#import <ServiceManagement/ServiceManagement.h>`在您的 .h 文件中
2.  从 Github[获取 StartAtLoginController](https://github.com/alexzielenski/StartAtLoginController)。这是 Alex Zielenski 的一个易于使用的类，用于处理添加、删除和查询登录项的复杂性。导入`StartAtLoginController.h`您的 h 文件。
3.  创建您想要控制此设置的任何界面。*如果您的应用程序自动启用此功能，它将被 Mac App Store 拒绝（根据指南 #2.26）*
4.  实现一个方法，例如`- (IBAction)checkChanged:(id)sender`我制作了一个与 StandardUserDefaults 绑定的简单复选框。（如果您选择做其他事情，您的实现可能会有所不同。）我还将复选框绑定到`IBOutlet NSButton *loginCheck;`以确定它的状态。这也可以通过`[[NSUserDefaults standardUserDefaults] boolForKey:YourKey]`
5.  在您的 .m 文件中实现与此类似的代码。

    ```
    StartAtLoginController *loginController = [[StartAtLoginController alloc] init];
    [loginController setBundle:[NSBundle bundleWithPath:[[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"Contents/Library/LoginItems/HelperApp.app"]]]; 
    // Change "HelperApp.app" to the name of your helper

    if ([loginCheck state]) {
        if (![loginController startAtLogin]) {
            [loginController setStartAtLogin: YES];
        }
    } else {
        if ([loginController startAtLogin]) {
            [loginController setStartAtLogin:NO];
        }
    } 
    ```

6.  而已。正如您在此项目中看到的，您可能还需要使用其他一些方法，例如：

    ```
    if ([loginController startAtLogin]) {
        NSLog(@"Error");
    } 
    ```

    用于在启用或禁用设置后检查以确保其正常工作。或这个：

    ```
    BOOL startsAtLogin = [loginController startAtLogin];
    if (startsAtLogin) {
        // Do stuff
    } 
    ```

    如果启用了登录助手，则执行某些操作。

### 助手应用程序代码设置

确保在您的实现中大力测试此代码。

1.  默认情况下，导航到位于 Supporting Files 组中的 HelperApp.plist，使您的帮助应用程序成为 UIElement。在底部添加一行键`Application is agent (UIElement)`和`YES`值*（这将禁止应用程序在每次用户启用登录时启动时闪烁停靠图标）我还删除了界面构建器中除了 App Delegate 之外的所有内容*
2.  删除默认方法`- (void)applicationDidFinishLaunching:(NSNotification *)aNotification`并将其替换为`- (void)applicationWillFinishLaunching:(NSNotification *)aNotification`
3.  在此方法中实现与此类似的代码。

    ```
    NSString *appPath = [[[[[[NSBundle mainBundle] bundlePath] stringByDeletingLastPathComponent] stringByDeletingLastPathComponent] stringByDeletingLastPathComponent] stringByDeletingLastPathComponent];
    // This string takes you from MyGreat.App/Contents/Library/LoginItems/MyHelper.app to MyGreat.App This is an obnoxious but dynamic way to do this since that specific Subpath is required
    NSString *binaryPath = [[NSBundle bundleWithPath:appPath] executablePath]; // This gets the binary executable within your main application
    [[NSWorkspace sharedWorkspace] launchApplication:binaryPath];
    [NSApp terminate:nil]; 
    ```

    此代码找到您的主应用程序，确定它是二进制可执行文件（在沙箱中启动应用程序所需）打开您的应用程序，然后退出

4.  而已。

### 部署

在为自己或 Mac App Store 部署应用程序时，您应该做的最后一件事是从存档项目中删除您的 Helper 应用程序。通过导航到 HelperApp 的 Target -> Build Settings -> Skip Install 并为 Release 设置 Yes。Apple 在 (http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/000-About_Xcode/about.html) 提供了更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T13:23:06.197

对于沙盒应用程序，您需要创建特殊的登录项帮助应用程序（位于 Contents/Library/LoginItems 内）。[在这里](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html%23//apple_ref/doc/uid/10000172i-SW5-SW1)查看更多。另请注意，您的应用程序**必须**从 /Applications 文件夹启动才能正确工作登录项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T13:32:53.087

我刚刚为我自己的应用程序实现了一个 LoginItem，并发现这些链接中的信息很有用：

[如何为 Mac App 创建一个帮助应用程序以在用户登录时启动它？](https://stackoverflow.com/questions/7436318/how-to-create-a-helper-application-for-mac-app-to-start-it-on-user-login)

[http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html)

[https://github.com/tcurdt/TCLoginItemHelper](https://github.com/tcurdt/TCLoginItemHelper)

[http://www.delitestudio.com/2011/10/25/start-dockless-apps-at-login-with-app-sandbox-enabled/](http://www.delitestudio.com/2011/10/25/start-dockless-apps-at-login-with-app-sandbox-enabled/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-21T11:12:32.190

让您的沙盒应用程序在登录时启动的设置非常耗时，而且很容易出错。这就是为什么我制作了一个 Swift 包来自动化它。使用我的[`LaunchAtLogin`](https://github.com/sindresorhus/LaunchAtLogin)包，您所要做的就是在 Xcode 中添加一个构建步骤，然后编写两行代码：

```
import LaunchAtLogin

LaunchAtLogin.isEnabled = true 
```

# sql - 更好地解析名称值或组合

> ID：11536483
> 
> 赞同：1
> 
> 时间：2012-07-18T07:38:36.677
> 
> 标签：sql, sql-server, sql-server-2008, parsing, sql-parser

我有两个不同的表，名称值以不同的方式存储......

例如一个字段是：

发明人姓名

约翰·C·史密斯

而在另一个表中的字段是：

发明家优先 | InventorLast

约翰 C. | 史密斯

问题是对我来说将单独的名字组合起来比花天知道解析单独的名字需要多长时间更有意义。我了解查询时的缺点：

姓氏为 Thomas 的查找和发明者可以在字段中包含 thomas 的名字，除此之外，查询主要使用 like 和*name* ，我不喜欢，因为我希望它尽可能准确。

我对此很陌生，我读过的所有名称解析文章都让它看起来像是一场噩梦，并且可以使用一些诚实的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:47:56.247

将它们结合起来。

如此多的人有四个或更多的名字，连字符的名字，后缀和事物的所有变体都不适合你试图提出的任何分隔。此外，它还允许其他实体很好地适应该领域，例如 Xerox Parc（适合您的发明者示例）。

现在世界已经习惯了谷歌式的搜索。如果他们键入 Thomas，他们看到里面有 Thomas 的所有东西并不奇怪（他们甚至期待它）。

数据库可以`LIKE`很好地处理搜索。

不要打破名字。

# objective-c - iphone 应用程序中的 Facebook 集成

> ID：11536484
> 
> 赞同：0
> 
> 时间：2012-07-18T07:38:37.373
> 
> 标签：objective-c, ios, xcode4.3

很抱歉问了同样的问题，这已经在 stackove 流程中了。我正在尝试将 Facebook 集成到我的 iPhone 应用程序中。为此，我遵循了[https://developers.facebook.com/docs/mobile/ios/build/#sdk](https://developers.facebook.com/docs/mobile/ios/build/#sdk)。每当我在我的应用程序中单击 Facebook 按钮时，它都会正确显示登录屏幕。但是，每当我单击登录按钮时，都会收到警报，因为“Safari 无法打开页面，因为地址无效”。阅读有关堆栈溢出的许多问题，这些问题与我的问题有关，但问题尚未解决。即使我已经正确添加了 SSO。非常感谢您的帮助

我认为我的信息列表也是正确的。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>en</string>
    <key>CFBundleDisplayName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundleExecutable</key>
    <string>${EXECUTABLE_NAME}</string>
    <key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>fb432606956784814</string>
            </array>
        </dict>
    </array>
    <key>CFBundleIconFile</key>
    <string></string>
    <key>CFBundleIdentifier</key>
    <string>VJILConsultingLtd.${PRODUCT_NAME:rfc1034identifier}</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>LSRequiresIPhoneOS</key>
    <true/>
    <key>NSMainNibFile</key>
    <string>MainWindow</string>
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
        <string>UIInterfaceOrientationLandscapeRight</string>
    </array>
</dict>
</plist> 
```

我仍然没有得到它。我不明白问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:52:48.720

如果我没记错的话，我遇到了同样的问题，就我而言，这是因为我没有在.plist 中设置 fb[YOUR_APP_ID]，你设置正确了吗？

> 创建一个名为 URL types 的新行，其中包含单个项目 URL Schemes，其中包含单个值 fb[YOUR_APP_ID]（文字字符 fb 后跟您的应用程序 ID）。

尝试在 Facebook Hackbook 示例项目中使用 YOUR_APP_ID，在这里找到它：[https ://github.com/facebook/facebook-ios-sdk/](https://github.com/facebook/facebook-ios-sdk/)

要测试 YOUR_APP_ID，您需要在两个地方更改项目：
1) 在 .plist 文件中
2) 在 HackbookAppDelegate.m 中搜索`kAppId`并将其设置为 YOUR_APP_ID，

```
static NSString* kAppId = @"432606956784814"; 
```

如果这可行，那么我们将知道您知道如何正确设置 .plist 并且 YOUR_APP_ID 是有效的。

# asp.net - 如何获取下拉列表中的第一个值作为选择？

> ID：11536485
> 
> 赞同：1
> 
> 时间：2012-07-18T07:38:45.130
> 
> 标签：asp.net

我正在使用 3 层架构在 asp.net 中做一个项目。使用各种试验和错误，我已经成功地将下拉列表中表的列内的值绑定。

我现在坚持的事情是，在页面加载事件期间，我得到了下拉框中的值，这些值在我的表中可用。但真正的问题是我必须将下拉列表中的第一个值作为“选择”或“选择任何一个”。我无法做到这一点。

这是我的代码

```
 DataTable datatable = new DataTable();
       _bl = new HomeFileUploadBL();
        voo = _bl.SelectNameOfDocument();
        datatable = voo.DocumentName;
        ddlDocument.DataSource = datatable;
        ddlDocument.DataTextField = datatable.Columns["Name"].ToString();
        ddlDocument.DataValueField = datatable.Columns["Name"].ToString();
        ddlDocument.DataBind(); 
```

记法为：ddlDocument指DropDownList，datatable指DataTable，_bl指业务类对象，voo.Document指值对象类，Document是DataTable类型。

页面加载后，表中的第一个值就可以在下拉列表中使用。

此外，当我单击下拉列表时，我的第一个值应该是“选择”或“选择任何一个”

我错过了这真的很明显。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:43:00.177

嗨尝试这样的事情......

```
DataRow dtRow = null;  if (ddlDocument.Rows.Count > 0)
    {
        dtRow = ddlDocument.NewRow();
        dtRow[0] = 0;
        dtRow[1] = "Select All";
        ddlDocument.Rows.InsertAt(dtRow, 0);
        ddlDocument.AcceptChanges();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:43:02.990

是的，您错过了添加选择。您可以在绑定下拉列表后手动执行它应该是这样的。我已经修改了你的代码。试试这个。。

```
DataTable datatable = new DataTable();
    _bl = new HomeFileUploadBL();
    voo = _bl.SelectNameOfDocument();
    datatable = voo.DocumentName;
    ddlDocument.DataSource = datatable;
    ddlDocument.DataTextField = datatable.Columns["Name"].ToString();
    ddlDocument.DataValueField = datatable.Columns["Name"].ToString();
    ddlDocument.DataBind();
    ddlDocument.Items.Insert(0, new ListItem("Select", "0")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:43:37.910

在 DataBind 之后添加

```
ddlDocument.Items.Insert(0, new ListItem("Select", "0")); 
```

或者

```
ddlDocument.Items.Insert(0, new ListItem("Choose any one", "0")); 
```

# c++ - 带有 Builder 的 C++ 工作线程（Borland 库）

> ID：11536487
> 
> 赞同：0
> 
> 时间：2012-07-18T07:38:51.177
> 
> 标签：c++, multithreading, c++builder

我有一个应用程序，它基本上有一个 GUI 和一个负责运行我的主程序和创建对象的函数。

目前我的 GUI 会崩溃，因为后台工作完成后后台工作太多，它将再次恢复活力。

我需要创建一个工作线程（我们不需要接口线程，因为我的 GUI 只显示正在发生的事情的进度。），工作线程将运行我的函数，另一个工作线程将运行我的 GUI。

我正在努力寻找这方面的任何信息。谷歌似乎没有帮助，谁能给我一些有用的信息？目前我有这样的事情：

```
void __fastcall TfrmRunning::FormCreate(TObject *Sender)
{
   //Does most of my background stuff when this form is created
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:19:27.343

Threadz 很容易使用 C++ Builder，尤其是。如果您不需要任何 GUI 通讯。我不得不就 GUI 通信的问题向 SO 征求意见 - 需要一个宏来处理消息，并且我提供了错误的表单类 - 我得到了堆栈溢出:)

'classes'中有一个TThread类，类似于Delphi。覆盖“执行”以执行您的线程代码，例如：

```
class TpoolThread : public TThread{
    CBthreadPool *FmyPool;
protected:
     virtual void __fastcall Execute(void);
public:
    TpoolThread(CBthreadPool *myPool):TThread(true){
        FmyPool=myPool;
        Resume();
    };
}; 
```

如果您没有 TThread 类（我有 C++ Builder 2009 - 之前不确定），您可以按照@inkooboo 的建议依赖 API 调用。WINAPI CreateThread() 只会调用简单的 C 风格函数或静态方法，因此您通常需要显式传递一个实例（通常是“this”）作为 CreateThread 参数，以便从线程代码中调用实例方法。使用 CreateThread API 的 ThreadPool 示例，（尽管我确信如果你有 STL，你也会有 TThread）：

```
#ifndef cthreadpoolH
#define cthreadpoolH

#include <Classes.hpp>
#include <deque.h>

class ThreadPool;

class PoolTask {
friend class ThreadPool;
    TNotifyEvent FonComplete;
protected:
    ThreadPool *myPool;
    int param;
public:
    PoolTask(int inParam, TNotifyEvent OnDone):param(inParam),FonComplete(OnDone){};
    virtual void run()=0;
};

template <typename T> class PCSqueue{
    CRITICAL_SECTION access;
    deque<T> *objectQueue;
    HANDLE queueSema;
public:
    PCSqueue(){
        objectQueue=new deque<T>;
        InitializeCriticalSection(&access);
        queueSema=CreateSemaphore(NULL,0,MAXINT,NULL);
    };
    void push(T ref){
        EnterCriticalSection(&access);
        objectQueue->push_front(ref);
        LeaveCriticalSection(&access);
        ReleaseSemaphore(queueSema,1,NULL);
    };
    bool pop(T *ref,DWORD timeout){
        if (WAIT_OBJECT_0==WaitForSingleObject(queueSema,timeout)) {
            EnterCriticalSection(&access);
            *ref=objectQueue->back();
            objectQueue->pop_back();
            LeaveCriticalSection(&access);
            return(true);
        }
        else
            return(false);
    };
};

class ThreadPool {
    int FthreadCount;
    PCSqueue<PoolTask*> queue;
public:
    ThreadPool(int initThreads){
        for(FthreadCount=0;FthreadCount!=initThreads;FthreadCount++){
            CreateThread(NULL,0,staticThreadRun,this,0,0);
        };
    }
    void setThreadCount(int newCount){
        while(FthreadCount<newCount){
            CreateThread(NULL,0,staticThreadRun,this,0,0);
            FthreadCount++;
        };
        while(FthreadCount>newCount){
            queue.push((PoolTask*)NULL);
            FthreadCount--;
        };
    }
    static DWORD _stdcall staticThreadRun(void *param){
        ThreadPool *myPool=(ThreadPool*)param;
        PoolTask *thisTask;
        SetThreadPriority(GetCurrentThread(),THREAD_PRIORITY_BELOW_NORMAL);
        while (myPool->queue.pop(&thisTask,INFINITE)){
            if(thisTask==NULL){return(0);};
            thisTask->run();
            if (thisTask->FonComplete!=NULL) {
                thisTask->FonComplete((TObject*)thisTask);
            }
        }
    }
    void submit(PoolTask *aTask){
        aTask->myPool=this;
        queue.push(aTask);
    };
};

#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:51:08.780

您可以使用[WinAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx)线程工具或任何线程库，例如：[boost](http://www.boost.org/doc/libs/1_50_0/doc/html/thread.html) / [C++11 线程库](http://en.cppreference.com/w/cpp/thread/thread)、[pthread](http://en.wikipedia.org/wiki/POSIX_Threads)等。

欢迎使用 C++ 中的多线程！

# java - Restlet 作为独立应用程序的优势？

> ID：11536490
> 
> 赞同：2
> 
> 时间：2012-07-18T07:39:02.503
> 
> 标签：java, restlet

将 restlet 配置为作为独立的 java 应用程序运行非常容易。

但是我想知道与部署到像 tomcat 或 jetty 这样的容器相比有什么优势？

我遇到的主要问题是稳定性和可用性：容器通常作为受操作系统监控的服务运行，例如在启动时重新启动等。对于独立应用程序，我必须自己创建监控和启动服务。

是否存在独立应用程序更好的特定用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:36:47.247

我能想到的第一件事是独立应用程序更轻量级并且需要更少的配置。

其次，我发现它在测试时非常有用，因为它很容易在 junit 环境中启动。

# php - php下载zip压缩包大文件大小

> ID：11536491
> 
> 赞同：1
> 
> 时间：2012-07-18T07:39:05.897
> 
> 标签：php

嗨，

我有一个带有多个复选框的表单，它允许用户在提示下载 zip 文件之前选择他们想要的小册子。zip 存档下载功能正常工作。但我意识到下载会话将在不下载整个文件（比如 8MB）的情况下终止，并且下载的 zip 文件将损坏。

参考下面的代码，并不能解决问题。任何人都可以建议我需要查看哪些设置，或者我错过了任何功能？

```
if($send) {     
    // Make sure program execution doesn't time out
    // Set maximum script execution time in seconds (0 means no limit)
    set_time_limit(0);

    $post = $_POST;     
    $file_folder = "pdf/";  // folder to load files
    $zip = new ZipArchive();    // Load zip library 
    $zip_name = "File-".time().".zip";          // Zip name
    if($zip->open($zip_name, ZIPARCHIVE::CREATE)!==TRUE){       // Opening zip file to load files
        $error .=  "* Sorry ZIP creation failed at this time<br/>";
    }
    foreach($post['brochure'] as $file){                
        $zip->addFile($file_folder.$file);          // Adding files into zip
    }
    $zip->close();
    if(file_exists($zip_name)){
        // set headers push to download the zip
        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: public");
        header('Content-type: application/zip');
        header("Content-Transfer-Encoding: Binary");
        header('Content-Disposition: attachment; filename="'.$zip_name.'"');
        header("Content-Length: ".filesize($zip_name)); 
        readfile($zip_name);
        // remove zip file is exists in temp path
        unlink($zip_name);

        $fp = @fopen($zip_name, "rb");
        if ($fp) {
         while(!feof($fp)) {
             print(fread($fp, 1024*8));
             flush(); // this is essential for large downloads
             if (connection_status()!=0) {
                 @fclose($file);
                 die();
             }
         }
         @fclose($file);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:58:04.740

而不是制作“readfile（）”，您是否尝试过这种解决方案？

```
if(file_exists($zip_name)){
    header("Pragma: public");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: public");
    header('Content-type: application/zip');
    header("Content-Transfer-Encoding: Binary");
    header('Content-Disposition: attachment; filename="'.$zip_name.'"');
    header("Content-Length: ".filesize($zip_name)); 

    echo file_get_contents($file);
    exit
} 
```

对我来说，它更简单，而且很多时候对我来说都很好。

在此之后，我看到的问题是你做了：

```
unlink($zip_name);
$fp = @fopen($zip_name, "rb");
if ($fp) {
    ...
} 
```

这部分代码不应该继续，因为您在打开文件之前取消了链接！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:42:38.203

设法用下面的代码解决我的问题。基本上我不应该在调用 fopen 之前取消链接文件。

```
if($send) {
    // Make sure program execution doesn't time out
    // Set maximum script execution time in seconds (0 means no limit)
    set_time_limit(0);

    $post = $_POST;     
    $file_folder = "pdf/";  // folder to load files
    $zip = new ZipArchive();    // Load zip library 
    $zip_name = "File-".time().".zip";          // Zip name
    if($zip->open($zip_name, ZIPARCHIVE::CREATE)!==TRUE){       // Opening zip file to load files
        $error .=  "* Sorry ZIP creation failed at this time<br/>";
    }
    foreach($post['brochure'] as $file){                
        $zip->addFile($file_folder.$file);          // Adding files into zip
    }
    $zip->close();
    if(file_exists($zip_name)){

        // set headers push to download the zip
        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: public");
        header('Content-type: application/zip');
        header("Content-Transfer-Encoding: Binary");
        header('Content-Disposition: attachment; filename="'.$zip_name.'"');
        header("Content-Length: ".filesize($zip_name)); 

        //readfile($zip_name);
        // remove zip file is exists in temp path
        //unlink($zip_name);

        $fp = @fopen($zip_name, "rb");
        if ($fp) {
         while(!feof($fp)) {
             echo fread($fp, 8192);
             flush(); // this is essential for large downloads
             if (connection_status()!=0) {
                 @fclose($zip_name);
                 die();
             }
         }
         @fclose($zip_name);
        }
        unlink($zip_name);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:10:45.513

首先，你的`if ($fp) {...}`代码块永远不应该被执行，因为你之前已经完成了`unlink($zip_name);`。所以这个块是没有用的。

次要的，我建议你更换

```
readfile($zip_name); 
```

和

```
ob_clean();
flush();
readfile($zip_name); 
```

这将防止意外的边框效果。

最后，如果您仍然有损坏的存档（我相信），那么我认为这是因为在下载刷新之前、期间或之后发生了一些 PHP 错误（请注意，您的 PHP 代码似乎没有在下载，所以代码可能会继续，之后可能会发生一些错误）。如果发生了这样的 PHP 错误或 PHP 通知，则 PHP 错误消息已随流式输出。这很容易检查：使用文本编辑器打开损坏的存档以查看二进制内容，然后 PHP 错误消息应该在存档二进制内容的最开始或最底部显示清晰易读。无需以 HEXA 模式打开存档。

# c++ - 如何确定 NifTi 文件的字节顺序？

> ID：11536492
> 
> 赞同：4
> 
> 时间：2012-07-18T07:39:06.897
> 
> 标签：c++, file-format, endianness

我有一个 NifTi 文件，当我加载它时，值奇怪地分散在 int_32 的范围内。但是，当我通过 NifTi-Python 绑定加载相同的文件时，值范围不同且正确。（我知道这是正确的，因为文件的生产者（FSL）声称只产生该范围内的值。）所以我想检查这些值是否真的存储在不同的字节序中（与其他文件相比），如果是这样，那么正确解释这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:56:19.343

您可以使用`nifti_1_header`结构中的第一个字段。它`sizeof_hdr`包含标题的大小（在我的例子中是一个 348 字节的结构，而不是三个较小的结构）。

只需读取标题的前 4 个字节，它应该是`348`（别名`0x0000015C`），如果它是用大端写的，你就会拥有`0x5C010000`（所以在磁盘上你会读到`5C 01 00 00`小端和`00 00 01 5C`大端）。

# visual-studio-2010 - 升级提升导致调试构建缓慢

> ID：11536501
> 
> 赞同：1
> 
> 时间：2012-07-18T07:39:42.683
> 
> 标签：visual-studio-2010, boost, build, performance

从 Boost 1.47.0 升级到 1.50.0 后，我们的调试构建时间激增。他们现在大约需要。3 倍的时间，而发布版本有点慢但不是很多。我们使用 VS2010 结合 Teamcity 进行构建。

有人知道这是从哪里来的吗？从我在构建日志中看到的每个使用 Boost 的项目的构建速度都要慢得多，它似乎与 Boost 的特定部分无关。我们确实预编译了 Boost 头文件。

在某些项目中，我不得不使用 -Zm 编译器选项增加可用于预编译的内存，这样至少表明需要比以前更多的内存。不过，我们的构建代理似乎有足够的内存。我确实注意到编译器（cl.exe）没有使用大量的 CPU 时间（5-10%），这可能表明从网络获取头文件的速度很慢，但我不明白为什么这在升级 Boost 版本。

非常感谢任何帮助。

# php - 如何在 symfony2 中安装 EventDispatcher

> ID：11536510
> 
> 赞同：1
> 
> 时间：2012-07-18T07:40:16.153
> 
> 标签：php, symfony, composer-php

我想安装事件调度程序。我已经下载了作曲家并将其放入`composer.json`文件中

```
"require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": "2.2.*",
        "doctrine/doctrine-bundle": "dev-master",
        "twig/extensions": "dev-master",
        "symfony/assetic-bundle": "dev-master",
        "symfony/swiftmailer-bundle": "dev-master",
        "symfony/monolog-bundle": "dev-master",
        "sensio/distribution-bundle": "dev-master",
        "sensio/framework-extra-bundle": "dev-master",
        "sensio/generator-bundle": "dev-master",
        "jms/security-extra-bundle": "1.1.*",
        "jms/di-extra-bundle": "1.0.*",

    **"symfony/event-dispatcher": "dev-master"** 
```

但我仍然无法安装它。

我收到这个错误

> PHP 致命错误：在 /home/xxxxx/public_html/cxxxxx/Symfony/app/autoload.php 中找不到类“Symfony\Component\ClassLoader\UniversalClassLoader”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:40:35.703

您需要`symfony/symfony`其中包括事件调度程序。所以不需要添加它。一旦作曲家工作，您将可以访问它。

然而，实际的问题是您正在尝试使用作曲家，但没有使您适应`autoload.php`使用作曲家自动加载器。

看看[Symfony 标准版的`autoload.php`](https://github.com/symfony/symfony-standard/blob/master/app/autoload.php). 如果你这样做，你将摆脱你的错误。

# c# - 初始化事件与检查 null

> ID：11536511
> 
> 赞同：5
> 
> 时间：2012-07-18T07:40:23.663
> 
> 标签：c#

基本上这已经在我脑海中有一段时间了......我想看看你的意见

我读了 Jon Skeet 的一本名为：C# in Depth, Second Edition 的好书，并且建议在声明自定义事件时使用类似这样的东西：

```
public event Action<string> MyEvent = delegate { }; 
```

此声明将在触发事件之前将我们从*无效性检查语句中释放出来，所以不要这样：*

```
 if (this.MyEvent != null)
    {
        this.MyEvent("OMG osh");
    } 
```

我们可以简单地调用：

```
this.MyEvent("OMG osh"); 
```

我们的代码就可以工作了。

当您像这样声明事件时，该事件将使用空委托初始化，因此我们不需要检查是否为空。

这是声明事件的另一种方式，它们是等价的

```
private Action<string> myDelegate;
public event Action<string> MyEvent
{
    add
    {
        this.myDelegate += value;
    }
    remove
    {
        this.myDelegate -= value;
    }
} 
```

欲了解更多信息：[http ://csharpindepth.com/Articles/Chapter2/Events.aspx](http://csharpindepth.com/Articles/Chapter2/Events.aspx)

我刚刚和一些同事讨论过，在工作中，我们正在讨论这个话题，他们争辩说有时我们需要一次清除事件的所有订阅，我们可以简单地将 null 分配给后面的代表如果我们想继续使用相同的模式，我们将不得不使用空委托重新初始化事件。他们还问在多线程场景中会发生什么，这就是我提出这个问题的主要原因

**问题**

1.  我想知道在声明遵循此模式的事件与检查 null 时是否存在一些隐藏的含义（可能在使用多线程时）

2.  如果我使用这种模式，我将有效地删除几个`if`条件，从而删除*跳转*语句。这在整体性能方面不是更好吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:04:37.427

我对性能的兴趣不如开发团队的可读性和期望。您真的不希望其他不了解使用模式的开发人员认为，“啊！我看到有人忘记正确使用委托调用并检查 null”

我一直明白，要处理多线程场景，您仍然需要制作底层 Delegate 的本地副本，以便即使在调用订阅者时在该列表的迭代期间订阅者列表发生更改，您也可以向所有订阅者触发。

话虽如此，我仍然想知道使用此扩展方法来保存样板代码（具有多个参数的重载）

如果订阅者不需要知道谁触发了事件，我倾向于使用 Action 而不是 EventHandler 事件。

```
public static class ActionExtension
{
    public static void SafeInvoke<T>(this Action<T> action, T arg)
    {
        var temp = action;
        if (temp != null)
        {
            temp(arg);
        }
    }
}

public event Action<string> InterestingEvent;
// event invoker
InterestingEvent.SaveInvoke("Boo!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:02:03.400

首先：你确定你没有过早优化吗？您是否真的面临性能问题，因为不是检查 null，而是在触发事件时调用了一个额外的空方法？如果没有，那么我建议你放弃这个问题。

现在，对于您的问题：我认为可以肯定地说检查 null*比*多余的方法调用便宜，所以如果您想要尽可能好的性能，那么 Jon Skeet 的便捷`delegate { }`模式可能不适合您。

当涉及到多线程时，一个更重要的问题是定义将在哪个线程/在哪个上下文（例如`SynchronizationContext`）中调用每个事件处理程序。您应该能够将此决定留给您的事件的每个消费者，因为一些事件处理程序不会关心，其他将希望转发到正确的上下文（例如通过`SynchronizationContext.Post`）。

如果您*确实*决定检查 null，请注意，而不是这个：

```
if (this.MyEvent != null)
{
    this.MyEvent("OMG osh");
} 
```

建议在多线程场景中，改为这样做：

```
Action<string> handlers = this.MyEvent;
if (handlers != null)
{
    handlers("OMG osh");
} 
```

也就是说，首先将委托复制到局部变量中。这是因为委托变量*可能*在检查空值期间被另一个线程操作。（我不太确定这是否真的有必要，但这是建议的模式。）

* * *

题外话：我认为你有一个小错误：

> *[W] 当您声明一个事件时，实际发生的是您声明 a`delegate`和 an `event`。*

这是正确的，但值得注意的是，对于 CLI，事件只是几个方法的组合（例如`add`,`remove`和`raise`可能的其他访问器）。几乎所有其他内容实际上都是特定于语言的。例如，C# 中的事件只不过是一个委托，与一些访问器方法配对，以及对委托可以做什么的一些额外限制（即`+=`，并且`-=`是来自事件所在类型之外的委托的唯一有效操作）被声明）。

# asp.net - 在 ASP.net MVC3.0 中将文件从网站上传到 FTP 服务器时出错

> ID：11536514
> 
> 赞同：0
> 
> 时间：2012-07-18T07:40:37.713
> 
> 标签：asp.net, asp.net-mvc

```
While uploading Zip file more than 20MB into FTP server, the Error [The underlying connection was closed: An unexpected error occurred on a receive] raised in suituation.
here i attached the code. for where the exception raise
 {ftpReq.Credentials = new NetworkCredential(userName, passWord);
                ftpReq.KeepAlive = false;
                ftpReq.Method = WebRequestMethods.Ftp.UploadFile;
                ftpReq.UseBinary = true;
                FileStream fs = fileInfo.Open(FileMode.OpenOrCreate,    FileAccess.ReadWrite, FileShare.ReadWrite);
                byte[] buffer = new byte[fs.Length];
                fs.Read(buffer, 0, buffer.Length);
                Stream ftpstream = ftpReq.GetRequestStream();
                ftpstream.Write(buffer, 0, buffer.Length);
           **`ftpstream.Close();`****---->  the Error Appeared in the suituation while closing FTP connection .i applied solution for the problem from website .
     i have set Timeout Property of FTP. {ftpreq.Timeout=300000[5min] } above Web Request methods. In My Local Host it' allow to upload upto 50\. while uploading file in  Production it allows 30 MB file to upload. if we upload more than 30 MB shows error "Server time out problem"i have tried lot of testing, but i could not fix the issue. 
```

请提供正确的解决方案为什么我们不能上传更多的文件大小。为此，我们必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:50:42.820

我认为您必须更改 webconfig 中的默认上传大小

像这样

```
<configuration>
  <system.web>
    <httpRuntime maxRequestLength="size in kbs" />
  </system.web>
</configuration> 
```

默认值为 4096 (= 4 MB)。

# java - 有人可以解释一下这个 hashcode() 合约中应用程序的实际含义吗？

> ID：11536515
> 
> 赞同：1
> 
> 时间：2012-07-18T07:40:39.977
> 
> 标签：java, jls

来自 JLS：

> 每当在应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。

**这里的应用程序**一词是什么意思 ，为什么`hashcode()`允许 for on 对象在同一应用程序的不同执行之间有所不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T07:44:04.443

[应用程序](http://en.wikipedia.org/wiki/Application_software)是您的 Java 程序。

它可能因不同的应用程序实例而异，因为默认情况下（的哈希码`Object`）基于对象的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:48:28.647

> 此处的应用一词是什么意思

听起来很简单，这里没有技巧。

> 为什么 hashcode() 允许在同一应用程序的不同执行之间有所不同？

哈希集合仅在内存中，并在您的应用程序重新启动时重新构建。这意味着它每次构建时都可以有不同的实现。（现有收藏不能更改）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:50:41.443

hashCode 方法被各种 java 类使用。例如，[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)使用 hashCode来有效地存储和检索键。

为了给出可靠的结果，hashCode 的合约按原样说明。例如，如果在应用程序运行期间 HashMap 中使用的对象的 hashCode 不同，则 HashMap 将无法一致地检索密钥。

所以这里的应用程序意味着你的java程序的一个运行实例。如果程序停止并重新启动，hashCode 会返回不同的值，我会很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T08:14:43.477

举个例子：

```
class Employee{
public int id;
public String name;

public Employee(int id,String name){
 this.id=id;
 this.name=name;
 }

public boolean equals(Employee employee){

return (this.id==emplooyee.id && this.name.equals(employee.name))

}

public hashcode(){

return id+name.hashcode();

} 
```

现在假设某个其他类中的以下代码被`main`函数调用；

```
 Employee emp = new Employee(1, "Sam");
 emp.hashcode();
 //some other code with does not modify the contents of `emp`
 emp.hashcode(); 
```

**即使在同一执行**`emp.hashcode()`期间多次调用，这些对方法的调用也将返回相同的整数。

 **这就是声明的意思：

> 每当在应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。

现在当你再次运行程序时说

```
Employee emp = new Employee(1, "Sam"); 
```

这里的 `emp.hashcode();`方法*可能会或可能不会返回*与前一个相同的整数（取决于`hashcode()`方法实现）。

这就是剩余语句的含义：

> 该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T07:47:25.440

应用程序是指您的 Java 程序。哈希码可能在程序的不同实例之间有所不同，但在同一个实例中却不同。

有关更多信息，`hashCode`请参阅

*   [深入 hashCode()](http://www.jusfortechies.com/java/core-java/hashcode.php)
*   [Java hashCode()](http://en.wikipedia.org/wiki/Java_hashCode%28%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T07:56:06.380

hashcode() 的目的是创建对象的哈希码，以便可以将其存储在哈希集、哈希映射等中。 hashcode() 的目的**不是**比较不同的对象（这就是 equals() 的用途）。

hashcode() 根本不需要在多次运行 JVM 时始终产生相同的结果。尽管大多数 java 对象总是为实例的相同状态返回相同的哈希码，但您永远不应该依赖它。

您还应该注意，如果您`equals()`在一个类中覆盖，您也应该覆盖`hashcode()`.

> 请注意，每当重写该方法时，通常都需要重写 hashCode 方法，以维护 hashCode 方法的一般约定，即相等的对象必须具有相等的哈希码。

[http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object) )**

# android - 将数据从服务传回活动

> ID：11536528
> 
> 赞同：1
> 
> 时间：2012-07-18T07:41:28.447
> 
> 标签：android, service, android-activity, intentservice

为了将数据从服务传回活动，我开始了解**ResultReceiver**、**广播/本地广播**和**绑定服务**。但是我对这种方法感到困惑：如果我们简单地调用活动静态公共函数来传递一些东西，那么这种方法的优缺点是什么。说我有活动：

```
public interface ListenerInterface {

    void DataExchange(String data);

}
public class MainActivity extends Activity implements ListenerInterface{

    private static MainActivity instance;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        instance=this;

        Intent i=new Intent();
        i.setClass(this, MyService.class);
        startService(i);
    }

    public static MainActivity getInstance(){
        if(instance!=null)
            return instance;

        return null;
    }

    @Override
public void DataExchange(String data) {
    // TODO Auto-generated method stub
    Log.d("sohail","data received="+data);
}

} 
```

和一个 IntentService：

```
public class MyService extends IntentService{

    MainActivity obj;
    public MyService() {
        super("MyService");
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onHandleIntent(Intent arg0) {
        // TODO Auto-generated method stub

        MainActivity.getInstance().DataExchange("Service Data");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:52:42.087

缺点：

*   一个活动可以有多个实例，使用您的方法，只有最后创建的一个会得到结果。
*   交付结果时，它可能可见/可用，也可能不可见/可用。
*   您的服务将直接取决于您的 UI（活动）。

更好的方法是让活动实现一些接口（例如`DataHandler`），而不是将其直接耦合到服务。此外，为确保仅在您可以实际使用数据时接收数据，请将活动注册为处理程序`onStart()`并取消注册`onStop()`。

# c# - 无法在 OnRowChanging 事件中调用 CancelEdit()

> ID：11536529
> 
> 赞同：2
> 
> 时间：2012-07-18T07:41:30.297
> 
> 标签：c#, ado.net

```
private void Cource_Load(object sender, EventArgs e)
{
    //fill dataset by using .GetAllCourses() function 
    DataSet ds = new DataAccess.newCourcesDAC().GetAllCourses();

    //define and set BindingSource to tblCourses of dataset
    BindingSource BS = new BindingSource();
    BS.DataSource = ds;
    BS.DataMember = "tblCourses";

    //bind datagridview to Bindingsource
    ds.Tables["tblCourses"].RowChanging += new  DataRowChangeEventHandler(Cource_RowChanging);
    dataGridView1.DataSource = BS;

    //bind for texbox to navigat 4 column of Cource table
    txtCourseID.DataBindings.Add("Text", BS, "CourseID");
    txtCourseName.DataBindings.Add("Text", BS, "CourseName");
    txtPrequest.DataBindings.Add("Text", BS, "Prequest");
    txtCourseContent.DataBindings.Add("Text", BS, "CourseContent");
}
**void Cource_RowChanging(object sender, DataRowChangeEventArgs e)
    {
        if ( e.Action==DataRowAction.Add)
        {
            if (((int)e.Row["CourseID", DataRowVersion.Proposed]) < 10)
            {
                e.Row.SetColumnError("CourseID", "cource id must < 10");
                e.Row.CancelEdit();
            }
        }
    }** 
```

我有一个数据集（ds）和一个表（tblCourse），它有4列，使用绑定源绑定到4个文本框。我想通过 RowChanging 事件向数据表添加新记录时验证数据。

当发生指定条件时，我想用 [ e.Row.CancelEdit();] 取消行。

但我收到此错误：无法在 OnRowChanging 事件中调用 CancelEdit()。抛出异常以取消此更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-13T18:24:04.210

为了任何可能偶然发现这个旧线程的人的利益，我将发布一个解决方案来解决与此问题相关的一些“陷阱”。

1.  尽管错误消息说什么，在 RowChanging 中与 Try-Catch 一起引发异常不会删除新行。我不能说当抛出错误时它*永远不会删除该行，只是我还没有看到它发生。*

2.  在没有 Try-Catch 的情况下抛出异常会将行标记为有错误。如果您有任何 WPF 数据网格代码来指示验证错误 - 例如显示我喜欢的红色复选标记 - 那么错误将正确显示。该行不会被删除。

3.  在我迄今为止看到的任何情况下，在 RowChanging 中调用 e.Delete 也不会删除该行。如果设置断点并检查 RowState，它将设置为 Detached。下次触发 RowChanged 事件时，RowState 将恢复为 e.Added。即使可以在某些其他条件下删除 RowChanging 中的一行，这也可能不会将数据集或后端数据库中的任何标识列重置为添加之前的最后一个值。

4.  下面我相当简单的 VB.Net 解决方法使用标志变量（我通常将我的变量放在数据类级别）来识别 RowChanging 中是否发生取消，然后在 RowChanged 中采取适当的操作并重置标志。到目前为止，我还没有遇到任何问题，除了一些“该行已从表中删除并且没有任何数据。BeginEdit() 将允许在该行中创建新数据。” 当遇到删除的行时，我的代码中的其他地方出现异常，通过对 RowState 设置为 Detached 的一些简单检查来修复这些异常。我希望这有帮助。

    私有 LastRowAdditionCanceled 作为布尔值

    ```
    Public Sub RowChanging(ByVal sender As Object, ByVal e As DataRowChangeEventArgs)

         If e.Action = DataRowAction.Add Then
        'Add the conditions where you want to cancel the row addition above
        LastRowAdditionCanceled = True
          End If
    End Sub

    Public Sub RowChanged(ByVal sender As Object, ByVal e As DataRowChangeEventArgs)

          If LastRowAdditionCanceled = False Then
             'execute your usual RowChanged code here

          Else
                e.Row.RejectChanges()
                LastRowAdditionCanceled = False
          End If
    End Sub 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:54:22.370

使用事件“RowChanged”，如果要删除该行，可以调用 e.Row.Delete()。我附上了示例代码，您可以在其中看到如果插入的值为“2”，则删除该行：

```
 class Program
{
    static void Main(string[] args)
    {
        DataTable dataTable = new DataTable();
        dataTable.Columns.Add("ID", typeof(int));
        dataTable.RowChanged += new DataRowChangeEventHandler(dt_RowChanged);

        dataTable.Rows.Add(1);
        dataTable.Rows.Add(2);
        dataTable.Rows.Add(3);

        Console.WriteLine("Total rows: {0}", dataTable.Rows.Count);
        foreach (DataRow item in dataTable.Rows)
        {
            Console.WriteLine(item["ID"]);
        }

        Console.Read();
    }

    private static void dt_RowChanged(object sender, DataRowChangeEventArgs e)
    {
        if (e.Action == DataRowAction.Add)
        {
            if (((int)e.Row["ID"]) == 2)
            {
                e.Row.Delete();
            }
        }
    }
} 
```

# c# - 检查Sql Server中的表是否被锁定

> ID：11536535
> 
> 赞同：2
> 
> 时间：2012-07-18T07:42:04.900
> 
> 标签：c#, .net, sql-server-2008

我正在编写一个连接到 sql server 并对表执行更新操作的 Windows 应用程序。

已经有另一个名为 P2 的程序正在更改同一个表中的数据。所以表被锁定

从我的应用程序访问表时出现错误

我需要一个解决方案，其中程序首先检查表是否已锁定，如果表未锁定，则必须更新数据。如果表已经被锁定，那么它必须等待一段时间并重试该操作。

谁能给我一份？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:01:39.157

在执行操作之前检查某些东西是否被锁定绝不是一个好主意。因为可以在执行检查之后和执行更新之前获取锁：

```
if(noLockOnTheTable)
{
  // ... something else acquires the lock just at this point
  updateTable();
} 
```

所以尝试检查锁是徒劳的。您应该继续尝试获取锁并立即执行更新。您可能会避免这种情况，因为其他操作花费的时间太长并且您不希望用户等待。在这种情况下，您可以指定“短锁定等待超时”并向用户提供一条消息，说明“稍后再试”。用户无需等待。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:48:46.417

您可以尝试以下方法：

```
CREATE TABLE #lockTable
(
[spid] smallint
, [dbid] smallint
, [objid] int
, [indid] smallint
, [type] nchar(4)
, [resource] nchar(32)
, [mode] nvarchar(8)
, [status] nvarchar(5)
);

INSERT INTO #lockTable EXEC sp_lock;

SELECT * FROM #lockTable WHERE objeid = OBJECT_ID('mytable');

DROP TABLE #lockTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:05:16.583

例如-在当前会话中获取锁：

```
create table dbo.test (i int)
Go    

begin tran
insert into dbo.test With (tablock) (i) values (1)
Go
Select 
    DB_NAME(tl.resource_database_id) database_name, 
    tl.resource_type, 
    case when resource_type = 'OBJECT' then OBJECT_NAME(tl.resource_associated_entity_id) Else null End ObjectName, 
    tl.resource_type, 
    tl.request_mode,
    tl.request_status,
    tl.* 
From sys.dm_tran_locks tl
Where request_session_id = @@SPID 
order by case when resource_type = 'OBJECT' then OBJECT_NAME(tl.resource_associated_entity_id) Else null End,
    tl.request_mode, tl.resource_type
Rollback 
```

# javascript - 如何创建类似的 CSS 类

> ID：11536537
> 
> 赞同：2
> 
> 时间：2012-07-18T07:42:19.850
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [如何在 JavaScript 中动态创建 CSS 类并应用？](https://stackoverflow.com/questions/1720320/how-to-dynamically-create-css-class-in-javascript-and-apply)

我想根据用户在文本字段中指定宽度来创建 css 类。我知道我可以使用内联样式来做到这一点，但我想避免它，因为有很多属性需要处理。在这个问题中，“宽度”只是一个例子。

例如：如果用户将宽度指定为“20”，那么我想要 -

```
.w20 {width:20px} 
```

如果用户指定 21 那么我想要

```
.w21 {width:21px} 
```

等等...

**[小提琴](http://jsfiddle.net/ashwyn/qGmsP/)**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:44:46.620

您可以使用`document.stylesheets`将 css 规则直接动态添加到样式表中。

```
styleSheet = document.styleSheets[0];
// check for undefined could make sense here
styleSheet.addRule(selector, style); 
```

[insertRule 文档](https://developer.mozilla.org/en/DOM/CSSStyleSheet/insertRule)
[addRule 文档](http://help.dottoro.com/ljuucnct.php)

或创建一个新的样式元素

```
var style = document.createElement('style');
style.type = 'text/css';
style.innerHTML = '.class { rules }';
document.getElementsByTagName('head')[0].appendChild(style); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:45:50.073

您可以尝试使用`document.stylesheets`将 css 动态添加到样式表中。

```
styleSheet = document.styleSheets[0];
styleSheet.addRule(selector, style); 
```

您也可以使用内联样式（id 推荐这种方法）。

您可以像这样使用 JavaScript 更改元素的宽度。

```
elem.style.width = "100px"; 
```

并使用 jQuery

```
$("#selector").css("width", "100px"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:55:08.837

请参阅[此处](https://stackoverflow.com/questions/1212500/jquery-create-css-rule-class-runtime)了解如何在运行时添加 css 规则。

我的观点：有了最好的软件设计，你永远不需要这样做。

# c# - 如何使用 iTextSharp 在 pdf 中显示罗马尼亚语的“Times new roman”字体

> ID：11536540
> 
> 赞同：0
> 
> 时间：2012-07-18T07:42:47.287
> 
> 标签：c#, stylesheet, html-to-pdf

LoadTagStyle 不适用于带有 times new roman 字体的标签正文 我想在 pdf 文档中生成一个 html 页面在他的里面我有 font times new roman 我尝试设置 font times new roman 但他不起作用

我尝试了几种情况：

```
 var styles = new StyleSheet();

1\. styles.LoadTagStyle("body", "font-family", "times new roman");
2\. styles.LoadTagStyle("body", "face", "times new roman");
3\. styles.LoadTagStyle(HtmlTags.BODY, "face", "times new roman");
4\. styles.LoadTagStyle(HtmlTags.BODY, HtmlTags.FONT, "times new roman"); 
```

但这些例子都不起作用

我也试过：

```
FontFactory.RegisterDirectories(); 
```

和

```
FontFactory.Register(FULL_PATH_TO_TIMES_NEW_ROMAN); 
```

和

```
style.LoadTagStyle(HtmlTags.TABLE, HtmlTags.FACE, "times-roman"); 
```

生成的文本是没有变音符号的一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:01:52.140

这段代码解决了我的问题

```
 FontFactory.Register("c:\\windows\\fonts\\times.ttf");
            StyleSheet st = new StyleSheet();
            st.LoadTagStyle(HtmlTags.TABLE, "border", "1");
            st.LoadTagStyle("body", "face", "times new roman");
            st.LoadTagStyle("body", "encoding", "Identity-H"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T05:13:43.417

**我试过这个 Itz Working Jst Try It。**

* * *

```
 FontFactory.RegisterDirectories();

 styles.LoadTagStyle(HtmlTags.TABLE, HtmlTags.FONT, "comic-sans-ms");

```

# objective-c - NSOpenPanel 选择一个目录（不是文件）

> ID：11536551
> 
> 赞同：11
> 
> 时间：2012-07-18T07:43:41.237
> 
> 标签：objective-c, macos, cocoa

我想让用户选择一个目录来保存文件。但是如何确保 url 是目录而不是文件？

```
NSOpenPanel* panel = [NSOpenPanel openPanel];
[panel setCanChooseDirectories:YES];
[panel setCanCreateDirectories:YES];

[panel beginSheetModalForWindow:self.window completionHandler:^(NSInteger result){
    if (result == NSFileHandlingPanelOKButton) {
        NSArray* urls = [panel URLs];
        for (NSURL *url in urls) {
            //here how to judge the url is a directory or a file
        }
    }
}]; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-06-08T22:07:00.200

为将来阅读此内容的任何人更新：

在 Swift 中，可以通过使用来避免检查选择的路径是否为文件

```
panel.canChooseFiles = false 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T08:59:04.313

```
// First, check if the URL is a file URL, as opposed to a web address, etc.
if (url.isFileURL) {
  BOOL isDir = NO;
  // Verify that the file exists 
  // and is indeed a directory (isDirectory is an out parameter)
  if ([[NSFileManager defaultManager] fileExistsAtPath: url.path isDirectory: &isDir]
      && isDir) {
    // Here you can be certain the url exists and is a directory
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-10T06:24:56.053

**斯威夫特 4**版本：

```
if (url.isFileURL) {
    var isDir: ObjCBool = false
    if (FileManager.default.fileExists(atPath: url.path, isDirectory: &isDir)) { 
       if isDir.boolValue {
                            print("It's a Directory path")
                          } else {
                            print("It's a file path")
                        }
                    }
} 
```

# magento - 如何检查 css 是否在 magento 网站中正确加载

> ID：11536553
> 
> 赞同：-1
> 
> 时间：2012-07-18T07:43:45.893
> 
> 标签：magento

我正在尝试为 magento 扩展添加一些样式。为此，我尝试通过其 Extension.xml 加载 css 文件。通过添加以下代码->

```
<refernce name="head">
<action method="addItem"><type>skin_css</type><name>EXTENSION NAME/css/style.css</name><params/></action>

</refernce> 
```

但它不起作用。所以我的问题是如何检查 css 文件是否在 magento 站点中加载。我尝试检查源文件，但不包含我想要的 css 文件的链接，但它也不包含默认情况下已存在于 Extension.xml 中的 js 文件的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:58:24.993

您可以使用 firebug（如果您使用的是 mozilla firefox）来检查您的 css 是否已应用。如果应用了 css，它会显示 css 名称及​​其属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:52:50.247

您可以通过查看页面源代码来判断代码行和代码是否正确加载……在您的情况下，它们的声音不是。

我的猜测是您的问题是关闭参数标记（为什么存在？）或者根本没有加载扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:33:19.183

确保您已正确初始化扩展并且所有文件都放置在正确的路径中。

假设您的命名空间是“Yourcompany”，您的扩展名为“Extension”，并且您使用的是默认/默认主题，至少您需要以下文件：

1.  应用程序/etc/modules/Yourcompany_Extension.xml
2.  app/code/local/Yourcompany/Extension/etc/config.xml
3.  应用程序/设计/前端/默认/默认/布局/extension.xml
4.  皮肤/前端/默认/默认/扩展/css/style.css

# objective-c - 如何在objc中比较时间

> ID：11536554
> 
> 赞同：-3
> 
> 时间：2012-07-18T07:43:54.847
> 
> 标签：objective-c, nsdate

我想要一个倒计时，显示日，小时，M 和 S。一秒钟被称为一次。

```
- (void)changetime {     

    NSCalendar *cal = [NSCalendar currentCalendar];//定义一个NSCalendar对象                 
    NSDate *today = [NSDate date];//得到当前时间

    unsigned int unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
    NSDateComponents *weekdayComponents =[cal components:(unitFlags) fromDate:self.overDate]; 
    NSDate *todate = [cal dateFromComponents:weekdayComponents]; 
    NSDateComponents *d = [cal components:unitFlags fromDate:today toDate:todate options:0];

    NSInteger days=[d year]*365+[d month]*31+[d day];
    if ([self.overDate earlierDate:[NSDate date]]==self.overDate) {
        [myTimer invalidate];
        myTimer=nil;
        self.labdate.text = [NSString stringWithFormat:@"%d天%d时%d分%d秒",days, [d hour], [d minute], [d second]];
        return;
    }    
    self.labdate.text = [NSString stringWithFormat:@"%d天%d时%d分%d秒",days, [d hour], [d minute], [d second]];     
}

myTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(changetime) userInfo:nil repeats:YES];

self.overDate=[wedding date];//this is a future time 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:01:33.113

以下行应该引起您的警报：

```
NSInteger days=[d year]*365+[d month]*31+[d day]; 
```

一年只有 365 天~75% 的时间在公历中。将近 50% 的月份在该日历中没有 31 天。查看 Apple 文档中的[Date Calculations](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW1)部分，该部分告诉您，如果您在`components:fromDate:toDate:options:`通话中要求 Day 组件并且没有更大的内容，您将获得考虑日历所需的天数。

# iphone - 我想只在 iphone sdk 的 uiscrollview 上实现放大功能。可以这样做吗？

> ID：11536555
> 
> 赞同：0
> 
> 时间：2012-07-18T07:43:58.933
> 
> 标签：iphone, objective-c, ios, xcode, ios4

我想只在 iphone sdk 的 uiscrollview 上实现放大功能。可以这样做吗？

我正在使用下面的代码

```
{
scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 700, 510)];
   scrollView.delegate = self;
   scrollView.ScrollEnabled=YES;
   scrollView.contentSize = CGSizeMake(700, 510);
   scrollView.userInteractionEnabled = FALSE;
   scrollView.clipsToBounds = YES;
   scrollView.minimumZoomScale = 1;
   scrollView.maximumZoomScale = 2;
   [scrollView addSubview:portrateSlideImage];
   [portSlideContainer addSubview:scrollView]; 
```

}

并使用 uiscrollview delagte

```
-(UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return portrateSlideImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:05:16.113

尝试这个。可能这会对你有所帮助。

从代码中删除设置滚动视图最大比例的行

```
{
   scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 700, 510)];
   scrollView.delegate = self;
   scrollView.ScrollEnabled=YES;
   scrollView.contentSize = CGSizeMake(700, 510);
   scrollView.userInteractionEnabled = TRUE;         //edited again
   scrollView.clipsToBounds = YES;
   scrollView.minimumZoomScale = 1;
   scrollView.maximumZoomScale = 2;                  //edited again
   [scrollView addSubview:portrateSlideImage];
   [portSlideContainer addSubview:scrollView];
} 
```

并添加此功能

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale
{
   scrollView.minimumZoomScale = scale;
} 
```

它不允许你这样做`zoom out`。只是放大

# groovy - Gradle - 处理外部资源

> ID：11536560
> 
> 赞同：3
> 
> 时间：2012-07-18T07:44:06.640
> 
> 标签：groovy, classpath, gradle

我正在尝试将一个简单的 Groovy 项目移至 Gradle。我主要能够配置项目，但我不知道如何处理外部资源。

基本上，我的应用程序需要访问 JSON 格式的配置文件。在迁移到 Gradle 之前，我曾经在命令行上传递此 JSON 文件的位置。我制作了一个简单的 bash 脚本来调用具有正确资源路径的主类。

如果我理解正确，使用 Gradle，我应该能够将该文件移入`src/main/resources/`并以某种方式从 Groovy 类中获得它。问题是：如何？

**编辑**

如果我理解正确，资源应该以生成的 JAR 结尾。我的目录结构就像

```
src
  main
    groovy
      orgName
        packageName
          source.groovy
    resources
      orgName
        packageName
          config.json 
```

但是我没有看到`build`目录中生成的 packageName.jar 内的资源

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T08:05:42.887

我举了一个简单的例子......鉴于这个目录结构：

```
.
|-- src
|    |-- main
|         |-- groovy
|         |    \-- org
|         |         |-- Test.groovy
|         \-- resources
|              \-- config.json
\-- build.gradle 
```

在哪里`Test.groovy`：

```
package org

import groovy.json.*

public class Test {
  static main( args ) {
    def slurper = new JsonSlurper()
    def config = slurper.parseText( Test.class.getResource( '/config.json' ).text )
    println "Args were $args, config is $config"
  }
} 
```

`config.json`是：

```
{
  "data": true
} 
```

并且`build.gradle`是：

```
apply plugin: 'groovy'

repositories {
  mavenCentral()
}

dependencies {
  groovy 'org.codehaus.groovy:groovy-all:2.0.0'
}

task runTest ( dependsOn: 'classes', type: JavaExec ) {
  main = 'org.Test'
  classpath = sourceSets.main.runtimeClasspath
  args 'ARG1'
} 
```

你应该能够运行`gradle runTest`，它应该只是工作......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:03:27.467

Gradle 不要求您将文件视为资源。这只是 Java/JVM 的最佳实践。如果这样做，则必须通过类加载器访问该文件。有关说明，请参阅[在 Java](http://littletutorials.com/2008/03/26/locating-resources-in-java/)中查找资源。请注意，这与 Gradle 无关，只是 Gradle 会将文件添加`src/main/resources`到构建的 Jar 下。

# php - 数据没有在带有where子句的php mysql中插入我的表中

> ID：11536562
> 
> 赞同：-2
> 
> 时间：2012-07-18T07:44:09.887
> 
> 标签：php, mysql, insert, where

```
<form method="post"  action="insert.php" >

<p>Name:<input type="text" name="food_name"  id="food_name"/>

<p>Price:<input type="text" name="food_price"  id="food_price"/>

<?php 

$query = "SELECT * FROM category";  

// Execute it, or return the error message if there's a problem.  

 $result = mysql_query($query) or die(mysql_error()); 

//$options = "";

$dropdown = "<select name='cat_name'>";

while($row = mysql_fetch_assoc($result)) 

{

 $dropdown .= "\r\n<option value='{$row['cat_id']}'>{$row['cat_name']}</option>";

}

$dropdown .= "\r\n</select>";

echo $dropdown;

?>

 <input type="submit" value="Insert Price" />

<a href="show.php">Cancel

</form> 
```

//这是从下拉菜单和文本框中获取数据的表单

X=======================X

```
if(isset($_POST['cat_name'])!= '')

{

$cat_id=$_POST['cat_name'];

$food_name=$_POST['food_name'];

$foodPrice=$_POST['food_price'];

$query="INSERT INTO food (food_name,food_price) values( $food_name,$foodPrice) where 

cat_id= $cat_id";

if(mysql_query($query))

{

echo "new item added";

}

else

{

die(mysql_error());} 

}

?> 
```

这是错误“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'where cat_id= 4' 附近使用正确的语法”

它应该通过选择类别来插入食物名称和价格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:47:33.580

您不需要在插入时使用 where 子句，这没有任何意义，如果您需要设置 id 然后将其作为参数之一传递，如果它是自动增量，则不要包含它。

```
$query="INSERT INTO food (food_name,food_price,cat_id) values(\"$food_name\",$foodPrice,$cat_id)"; 
```

考虑使用 mysqli 或 PDO，但是当涉及到 sql 查询时，不要使用 mysql_* 版本。您应该考虑使用准备好的语句，这将有助于保护您免受 sql 注入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T07:47:58.763

你在混合`insert`和`update`陈述。`insert`里面没有`where`子句。您只是在没有任何条件的情况下向表中添加记录

```
INSERT INTO food (food_name,food_price) values('$food_name', $foodPrice) 
```

如果您想更新记录，您可以这样做：

```
update food set food_name = '$food_name', food_price = $foodPrice
where cat_id= $cat_id"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:47:41.983

修改查询如下

```
$query="INSERT INTO food (food_name,food_price) values('".$food_name."','".$foodPrice."'); 
```

如果 cat_id 已经可用意味着您必须使用更新查询来更新表

```
update table food set food_name='$food_name' , food_price ='$foodPrice' where cat_id = $cat_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:04:38.833

如果您已经设置了 id，请编辑它。

`UPDATE food SET food_name = "Name", food_price = "Price" WHERE cat_id = $cat_id` 插入时不需要 where 子句

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T07:51:30.903

您不能在 INSERT 语句中使用 WHERE。

您有 2 个选项：

进行更新：

```
UPDATE food SET food_name=<food_name>, food_price=<food_price> WHERE cat_id=<cat_id>; 
```

或以这种方式制作一个 INSERT （其中 food_name+cat_id 在此示例中具有唯一索引）：

```
INSERT INTO foot (cat_id, food_name, food_price) VALUES (<cat_id>, <food_name>, <food_price>) ON DUPLICATE KEY UPDATE food_price=VALUE(food_price); 
```

这`INSERT INTO ... ON DUPLICATE KEY UPDATE ...`是一个大规模更新声明。

# javascript - 如何创建一组图像作为链接？

> ID：11536573
> 
> 赞同：1
> 
> 时间：2012-07-18T07:45:18.170
> 
> 标签：javascript, html, arrays

我有一系列图像

```
images:[
{image: 'img/img01.jpg'},
{image: 'img/img02.jpg'},
] 
```

我想将它们作为链接：

```
images:[
{<a href="#"><img src="img/img01.jpg"/></a>},
{<a href="#"><img src="img/img02.jpg"/></a>},
] 
```

并出现语法错误。什么是正确的方法，请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:49:33.243

您必须在数组中使用字符串，如下所示：

```
images = [
'<a href="#"><img src="img/img01.jpg"/></a>',
'<a href="#"><img src="img/img02.jpg"/></a>'
]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:50:40.337

```
for(var i=0;i<images.length;i++)
images[i].image='<a href="#"><img src="'+images[i].image+'"/></a>'; 
```

将您的数组转换为

```
{images:[
{image:'<a href="#"><img src="img/img01.jpg"/></a>'},
{image:'<a href="#"><img src="img/img02.jpg"/></a>'},
]} 
```

从 `{images:[ {image: 'img/img01.jpg'}, {image: 'img/img02.jpg'}, ]}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:50:31.787

```
var images = [{image: '<a href="#"><img src="img/img01.jpg"/></a>'},
              {image: '<a href="#"><img src="img/img02.jpg"/></a>'}
             ]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T08:02:39.187

使用本机方法**forEach**。;)

```
​images.forEach(function(item){
    item.image = '<a href="#"><img src="'+item.image+'"/></a>';
});​ 
```

预览 - [http://jsfiddle.net/NJ6Ck/](http://jsfiddle.net/NJ6Ck/)

# c# - 从 PNG 到 BitmapImage。透明度问题。

> ID：11536577
> 
> 赞同：2
> 
> 时间：2012-07-18T07:45:44.237
> 
> 标签：c#, .net, wpf

我有一些问题。我正在尝试将 png-image 从资源加载到我的 viewModel 中的 BitmapImage 属性，如下所示：

```
Bitmap bmp = Resource1.ResourceManager.GetObject(String.Format("_{0}",i)) as Bitmap;
MemoryStream ms = new MemoryStream();
bmp.Save(ms, ImageFormat.Bmp);
BitmapImage bImg = new BitmapImage();

bImg.BeginInit();
bImg.StreamSource = new MemoryStream(ms.ToArray());
bImg.EndInit();

this.Image = bImg; 
```

但是当我这样做时，我失去了图像的透明度。所以问题是如何在不损失透明度的情况下从资源中加载 png 图像？谢谢，帕维尔。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-28T18:58:24.220

Ria 的回答帮助我解决了透明度问题。这是对我有用的代码：

```
public BitmapImage ToBitmapImage(Bitmap bitmap)
{
  using (MemoryStream stream = new MemoryStream())
  {
    bitmap.Save(stream, ImageFormat.Png); // Was .Bmp, but this did not show a transparent background.

    stream.Position = 0;
    BitmapImage result = new BitmapImage();
    result.BeginInit();
    // According to MSDN, "The default OnDemand cache option retains access to the stream until the image is needed."
    // Force the bitmap to load right now so we can dispose the stream.
    result.CacheOption = BitmapCacheOption.OnLoad;
    result.StreamSource = stream;
    result.EndInit();
    result.Freeze();
    return result;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T08:47:43.620

这是因为`BMP`文件格式不支持透明度，而`PNG`文件格式支持。如果你想要透明度，你将不得不使用`PNG`.

尝试[`ImageFormat.Png`](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat.png.aspx)保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:58:19.030

`BitmapImage`这通常是由不支持的 64 位深度 PNG 图像引起的。Photoshop 似乎错误地将这些显示为 16 位，因此您需要使用 Windows 资源管理器进行检查：

*   右键单击该文件。
*   单击属性。
*   转到详细信息选项卡。
*   寻找“位深度”——它通常在图像部分，有宽度和高度。

如果显示为 64，则需要使用 16 位深度重新编码图像。我建议使用[Paint.NET](http://www.getpaint.net/)，因为它可以正确处理 PNG 位深度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:09:27.320

我查看了这篇文章以找到与此处相同的透明度问题的答案。

但后来我看到给出的示例代码，只是想分享这段代码来从资源加载图像。

```
Image connection = Resources.connection; 
```

使用这个我发现我不需要将我的图像重新编码为 16 位。谢谢。

# objective-c - UISwitch 没有调用动作

> ID：11536579
> 
> 赞同：0
> 
> 时间：2012-07-18T07:45:56.967
> 
> 标签：objective-c, selector, uiswitch

我有一个`UITableView`带有可变数量的单元格，每个单元格都有一个`UISwitch`. 这是所有开关的行：

```
[cell.currentSwitch addTarget:self action:@selector(changeCurrentEvent:) forControlEvents:UIControlEventValueChanged]; 
```

我设置了，当您拨动一个开关时，它会关闭所有其他开关（在内部`-changeCurrentEvent:`）。我注意到的是，`-changeCurrentEvent:`当我手动拨动开关时会正确调用它，但由于它会关闭所有其他开关，因此改变它们的值，它们不应该也调用`-changeCurrentEvent:`吗？无论如何，这就是我希望他们做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:04:56.617

控制事件仅在用户操作更改控制时发送（例如，在开关的情况下轻敲）。如果您要更改代码中的值，则不会发送它们。

这很好地避免了控件更新以响应其他控件更改的无限循环情况，这会导致其他控件更改...

您的实现`-changeCurrentEvent:`应该对模型进行所有必要的更改，以响应单个开关的更改。

# objective-c - 具有多个时间间隔的 NSTimer

> ID：11536580
> 
> 赞同：5
> 
> 时间：2012-07-18T07:45:59.033
> 
> 标签：objective-c, ios, nstimer, intervals

在不创建多个`NSTimer`实例的情况下，如何实现`NSTimer`以序列中不同的间隔触发特定或多个方法。例如方法 1（0.3 秒）、方法 2（0.5）、方法 3（0.7）等。

如果有人可以分享任何示例代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:27:37.980

我不确定您的最终目标是什么，但是在阅读了您的问题后，**我建议您尝试以下方式**，也许这就是您要寻找的。

你应该把这段代码放在你通常想要以`NSTimer`不同的间隔开始同一个类的地方（不幸的是，这是不可能的）。

```
{
    // ...
    [self performSelector:@selector(method1) withObject:nil afterDelay:0.3f];
    [self performSelector:@selector(method2) withObject:nil afterDelay:0.5f];
    [self performSelector:@selector(method3) withObject:nil afterDelay:0.7f];
    // ...
} 
```

当需要取消调度所有排队的选择器时，请使用此代码。

```
[NSObject cancelPreviousPerformRequestsWithTarget:self]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T07:53:04.703

`NSTimer`它本身不提供该功能，它会以固定的时间间隔触发一次或重复触发。您将需要多个计时器来实现此效果，或者完全远离`NSTimer`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:58:06.410

我相信您应该将当前时间间隔传递给触发的选择器并在那里进一步处理它。如果时间间隔是 0.3，你调用 method1, 0.5 - method2，很可能没有其他方法可以实现这个

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T08:09:46.727

制作一个包装器来包装`NSTimer`方法调用，如下所示：

> ```
> - (void) CallTimerWithTimeInterval:(float) interval andSelector:(NSString *)methodName 
> {
> SEL selector = selectorFromString(methodName);
>     [NSTimer scheduledTimerWithTimeInterval:interval target:self selector:@selector(selector) userInfo:nil repeats:YES];
> } 
> ```

您可以调用此方法并根据您的要求传递间隔和选择器方法。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-18T07:56:44.733

在选择器方法中从那里创建一个带有 timeinterval = 0.1 的选择器的计时器，您可以通过保留一个静态浮点变量并每次添加 0.1 来检查，例如：

```
static CGFloat counter= 0;

counter+= 0.1; 
```

然后检查计数器值并调用你的方法..

```
if(0.3 == counter)
{
    [self callMethod1];
}
else if(0.5 == counter)
{
    [self callMethod2];
}
else if(0.7 == counter)
{
    [self callMethod3];
}
...
...
..
.. 
```

# c# - 如何在不使用 SLsvcutil.exe 工具的情况下以编程方式动态创建自动生成的代码？

> ID：11536582
> 
> 赞同：1
> 
> 时间：2012-07-18T07:46:00.323
> 
> 标签：c#, silverlight, slsvcutil

我们正在使用 WCF 服务来获取操作。我知道，如何使用 svutil.exe 工具以编程方式生成 WCF 服务的元数据。我不知道如何使用 SLsvcutil.exe 工具来做到这一点。我需要在 C# 中通过 slsvcutil.exe 以编程方式创建自动生成的代码。

请问有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:54:30.823

最后，我使用 Silverlight 服务模型代理生成工具 (SLsvcUtil.exe) 动态或仅使用 C# 代码从服务元数据文档生成 Silverlight 客户端代理，而无需打开并在该工具上键入命令。

这是 slsvcutil.exe 的简单 C#.NET 源代码：

```
 string arguments = string.Empty;
        string SvcUtilPath = string.Empty;

        SvcUtilPath = @"C:\Program Files\Microsoft SDKs\Silverlight\v5.0\Tools\SlSvcUtil.exe";

        arguments += @"http://localhost:3628/WCFservices/CompilerHelper.svc?wsdl ";
        arguments += @"/out:C:\Clients_FIles\ClientProxy.cs ";
        arguments += @"/edb /namespace:*,ClientProxy ";
        arguments += @"/ct:System.Collections.ObjectModel.ObservableCollection`1 ";
        arguments += @"/r:""C:\Program Files\Microsoft Silverlight\5.1.10411.0\System.Windows.dll"" ";

        Process process_ = new Process();
        process_.StartInfo.FileName = SvcUtilPath;
        process_.StartInfo.Arguments = arguments;
        process_.StartInfo.ErrorDialog = true;
        process_.StartInfo.UseShellExecute = false;
        process_.Start();
        process_.WaitForExit(); 
```

使用 System.Disagnostics.Process 命名空间，我们可以调用 slsvcutil.exe 文件并运行参数以生成任何（WCF）服务文件的 silverlight 服务模型代码。

谢谢，普拉巴卡兰 G。

# iphone - 为推送通知创建.pem 文件？

> ID：11536587
> 
> 赞同：11
> 
> 时间：2012-07-18T07:46:34.787
> 
> 标签：iphone, ios, ipad

我有一个 iPhone 应用程序，我在其中实现推送通知。为此，我创建了一个 csrfile、p12 文件和生产 cer。为应用程序 id 启用了推送通知。并下载了配置文件。当我在设备上运行时，我得到了注册通知也来了。但是当我将证书中的 pem 文件和 p12 密钥中的 pem 文件结合起来，并生成另一个 pem 文件并放入我的服务器时。推送通知没有进入我的手机。我在终端来创建文件。`

```
openssl x509 -in aps_production.cer -inform der -out phoneapp.pem 

openssl pkcs12 -nocerts -out phoneappKey.pem -in veapp.p12

cat phoneapp.pem phoneappKey.pem > applicationwebservice.pem 
```

`谁能帮我正确获取pem文件？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-18T15:07:18.360

得到 p12 文件后，需要在终端执行以下命令，将其转换为 PEM 格式：

```
openssl pkcs12 -clcerts -nokeys -out apns-dev-cert.pem -in apns-dev-cert.p12
openssl pkcs12 -nocerts -out apns-dev-key.pem -in apns-dev-key.p12 
```

如果您希望删除密码，请在导出/转换时不要设置密码或执行：

```
openssl rsa -in apns-dev-key.pem -out apns-dev-key-noenc.pem 
```

最后，您需要将密钥和证书文件组合成一个 apns-dev.pem 文件，我们将在连接到 APNS 时使用：

```
cat apns-dev-cert.pem apns-dev-key-noenc.pem > apns-dev.pem 
```

这是获取pem文件的方法，更多细节参考[我的博客](http://sreecharans.blogspot.com/2011/08/how-to-build-apple-push-notification.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-18T09:08:07.033

尝试使用以下命令：

```
openssl pkcs12 -clcerts -nokeys -out cert.pem -in cert.p12

openssl pkcs12 -nocerts -out key.pem -in key.p12

openssl rsa -in key.pem -out key.unencrypted.pem

cat cert.pem key.unencrypted.pem > ck.pem 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-08T09:33:25.913

要创建 .pem 文件，您需要遵循以下简单步骤。

干得好。

**第 1 步**：登录到您的开发人员帐户，进入 Provisioning Portal，单击“证书”。然后，单击“+”按钮。

**第 2 步**：选择分发部分下的 Apple Push Notification service SSL (Production) 选项，然后单击“继续”。

**第 3 步**：选择要用于 BYO 应用程序的应用程序 ID（如何创建应用程序 ID），然后单击“继续”进入下一步。

**第 4 步**：按照“关于创建证书签名请求 (CSR)”的步骤创建证书签名请求。

**第五步**：上传第四步生成的“.CSR”文件，然后点击“生成”。

**Step 6** : 点击“Done”完成注册，iOS Provisioning Portal Page 将会改变 UI。

**第 7 步**：现在转到“钥匙串”，查找刚刚安装的证书。如果不确定哪个证书是正确的，它应该以“Apple Production IOS Push Services:”开头，然后是您的应用程序的捆绑 ID。

**第 8 步**：展开证书，您应该会看到带有您的姓名或公司名称的私钥。使用键盘上的“选择”键选择这两个项目，右键单击（如果使用单键鼠标，则单击 cmd），选择“导出 2 个项目”。然后将名为“yourselectedname.p12”的 p12 文件保存到您的桌面 - 现在您将被提示输入密码以保护它，您可以单击 Enter 跳过密码或输入您想要的密码。

**第 9 步**：现在在 Mac 上打开“终端”，然后运行以下命令：
cd
cd Desktop
openssl pkcs12 -in pushcert.p12 -out pushcert.pem -nodes -clcerts

** 完成，您已成功创建 Apple 推送通知证书（.pem 文件）！**

# c++ - 如何使用 boost asio 区分繁忙的端点和未连接的端点

> ID：11536590
> 
> 赞同：1
> 
> 时间：2012-07-18T07:46:42.240
> 
> 标签：c++, windows, tcp, boost-asio

我有一个想绑定到本地端点的 TCP 套接字。

我有两种情况：

1.  将套接字连接到未使用且不等待连接的本地端点。
2.  将套接字连接到上一次运行时使用/未正确关闭的本地端点。

我曾经使用传递 io_service 和端点的构造函数来初始化接收器，但是当它尝试连接到使用的端点时，接收器崩溃了。

```
acceptor_(io_service_, endpoint) 
```

我做的下一件事是将构造函数更改为仅获取 io_service （承诺不会打开套接字）。

```
acceptor_(io_service_) 
```

我看到 asio 有一个 bind() 函数，它将套接字与本地端点绑定。函数 bind() 有一个参数指示是否发生了错误，但对于上述两种情况，它都返回相同的错误。

```
boost::system::error_code ec;
acceptor_.bind(endpoint, ec);

if(ec)
{
    // SOME ERROR NOTIFYING
// EDIT: error code returned is 10009
} 
```

有没有办法连接到端点并为此类错误获取不同的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:53:56.883

我使用的接受器的套接字确实无效。

根据boost的代码（位于：[boost asio implementation](http://www.boost.org/doc/libs/1_43_0/boost/asio/basic_socket_acceptor.hpp)），我看到接收 io_service 和端点的构造函数使用端点本身的协议打开套接字，然后才将它与接受器绑定。

解决方案是仅使用 io_service 初始化接受器，然后打开接受器，然后将端点绑定到它。

感谢您的评论！

# java - 如何检查和关闭一个excel文件是否已经在java中打开

> ID：11536596
> 
> 赞同：0
> 
> 时间：2012-07-18T07:47:18.463
> 
> 标签：java, io

> **可能重复：**
> [Java：检查文件是否已打开](https://stackoverflow.com/questions/1390592/java-check-if-file-is-already-open)

我正在制作一个摇摆实用程序，我在其中创建和使用 Apache poi 的 excel 表。如果文件在我试图访问它时已经打开，它会抛出一个异常，就像其他进程正在使用这个 excel 文件一样。所以我只想检查该excel文件是否已经打开，如果是，则关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:55:51.973

你有没有在这个主题上做一些谷歌搜索：这是我想出的一些

*   [Java：检查文件是否已经打开](https://stackoverflow.com/q/1390592/851432)
*   [在尝试删除文件之前检查文件是否已经打开](https://stackoverflow.com/q/8634377/851432)
*   [检查 Excel 文件是否已被另一个应用程序打开](http://www.coderanch.com/t/438783/Streams/java/checking-excel-file-already-opened)

我在这里复制stackoverflow上第一个问题的答案：

```
File file = new File(fileName);
FileChannel channel = new RandomAccessFile(file, "rw").getChannel();
// Get an exclusive lock on the whole file
FileLock lock = channel.lock();
try {
    lock = channel.tryLock();
    // Ok. You get the lock
} catch (OverlappingFileLockException e) {
    // File is open by someone else
} finally {
    lock.release();
} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T08:00:05.283

你有没有试过这个：

```
File file = new File(pathToFile);
if (file.canRead()) {
  <do whatever you are doing with the file>
} 
```

# orchardcms - 如何在果园中管理主题中的区域？

> ID：11536597
> 
> 赞同：2
> 
> 时间：2012-07-18T07:47:24.233
> 
> 标签：orchardcms

我目前正在尝试创建自己的主题，但我不知道如何定义区域（用于小部件等）。

当我启用“contoso”主题时，会出现很多区域，但是当它被禁用时，所有区域都会消失。

我试过查看“contoso”主题的代码，但我不知道他们是如何做到的。

PS：我使用的是果园 1.5 rc2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:41:23.517

查看views文件夹中的layout.cshtml文件，以及主题根目录下的theme.txt文件。

# grails - grails中的上次访问日期函数

> ID：11536604
> 
> 赞同：0
> 
> 时间：2012-07-18T07:47:44.550
> 
> 标签：grails, grails-2.0

我如何发布一个功能来向用户显示某个人在网站上的最后一次访问？我从 Grails in Action 一书中写了一些方法，但它不能正常工作。

```
static String getNiceDate(Date date) {
    def now = new Date()
    def diff = Math.abs(now.time - date.time)
    final long second = 1000
    final long minute = second * 60
    final long hour = minute * 60
    final long day = hour * 24

    def niceTime = ""
    long calc = 0;
    calc = Math.floor(diff/day)
    if(calc) {
        niceTime += calc + " day" + (calc > 1 ? "s " : " ")
        diff %= day
    }

    calc = Math.floor(diff/hour)
    if(calc){
        niceTime += calc + " hour" + (calc > 1 ? "s " : " ")
        diff %= hour
    }

    calc = Math.floor(diff/minute)
    if(calc) {
        niceTime =+ calc + " minute" + (calc > 1 ? "s " : " ")
        diff %= minute
    }

    if(!niceTime) {
        niceTime = "Right now"
    } else {
        niceTime += (date.time > now.time) ? "from now" : "ago"
    }

    return niceTime

} 
```

这段代码有什么问题？每次都显示 20 分钟前或 10 分钟前的内容，但用户的最后一次访问是昨天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:47:44.060

试试这种方式：

```
/**
   * Returns differnce b/w new Date and old date as Map holding difference in years, weeks, days, hrs, mins & secs 
   */
  public static Map getDiffernceInDates(Date oldDate, Date newDate = new Date()) {
    Long difference = newDate.time - oldDate.time
    Map diffMap =[:]
    difference = difference / 1000
    diffMap.seconds = difference % 60
    difference = (difference - diffMap.seconds) / 60
    diffMap.minutes = difference % 60
    difference = (difference - diffMap.minutes) / 60
    diffMap.hours = difference % 24
    difference = (difference - diffMap.hours) / 24
    diffMap.years = (difference / 365).toInteger()
    if(diffMap.years)
       difference = (difference) % 365
    diffMap.days = difference % 7
    diffMap.weeks = (difference - diffMap.days) / 7  
    return diffMap
  } 
```

* * *

下面给出了详细显示日期差异的标记库：

```
def timeDiffInDetail = {attrs ->
        Map diff = DateUtil.getDiffernceInDates(attrs.oldDate, attrs.newDate ?: new Date())
        String result =  diff.years ? diff.years + " years " : ""
        result += diff.weeks ? diff.weeks + " weeks " : ""
        result += diff.days ? diff.days + " days " : ""
        result += diff.hours ? diff.hours + " hours " : ""
        result += diff.minutes ? diff.minutes + " minutes ago" : ""
        if (result)
          out << result
        else
          out << " 0 minutes ago"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:22:33.950

在注销函数中添加一个简单的行来记录该时刻的日期/时间。（使用**new Date()**）。[使用 java 中的SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)将其转换为您想要的格式，并将其作为新字段记录在数据库中（无论您存储用户信息的位置）。当用户重新登录并显示它时检索此信息！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:07:21.550

我对以前的代码进行了一些更改，并且运行良好。如果有人需要，这是一个工作版本：

```
class LastVisitTagLib {

static namespace = "own"

def lastVisit = {attrs ->
    def date = attrs.date
    def niceDate = getNiceDate(date)
    out << niceDate
}

static String getNiceDate(Date date) {

    def now = new Date()

    def diff = Math.abs(now.getTime() - date.getTime())

    long second = 1000
    long minute = 1000 * 60
    long hour = minute * 60
    long day = hour * 24

    def niceTime = ""

    long calc = 0L;

    calc = Math.floor(diff / day)
    if (calc > 0) {
        niceTime += calc + " day" + (calc > 1 ? "s " : " ")
        diff = diff % day
    }

    calc = Math.floor(diff / hour)
    if (calc > 0) {
        niceTime += calc + " hour" + (calc > 1 ? "s " : " ")
        diff = diff % hour
    }

    calc = Math.floor(diff / minute)
    if (calc > 0) {
        niceTime += calc + " minute" + (calc > 1 ? "s " : " ")
        diff = diff % minute
    }

    if (niceTime.length() == 0) {
        niceTime = "Right now"
    } else {
        niceTime += (date.getTime() > now.getTime()) ? "from now" : "ago"
    }

    return niceTime

} 
```

}

命名空间“拥有”的标签，如

感谢所有帮助过我的人

# file-read - 读取 Abaqus ODB 文件

> ID：11536608
> 
> 赞同：0
> 
> 时间：2012-07-18T07:47:57.677
> 
> 标签：file-read

我想写一个类来从 Abaqus 读取 odb 文件。有人告诉我有一个 C++ 接口，其中包含从 odb 文件中提取信息的函数。但我既没有找到这个函数，也没有找到关于它的文档。有人知道这个接口在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:23:31.740

读取 odb 文件有 2 个选项，python API 和 C++ API。Python API 将更容易开发，因为您可以阅读工作目录中的 *.rpy 文件，并查看您的 GUI 命令在 Python 术语中的翻译。查看 Abaqus 文档中的脚本参考手册。

# php - 聪明的 if 语句

> ID：11536611
> 
> 赞同：1
> 
> 时间：2012-07-18T07:48:09.353
> 
> 标签：php, smarty, smarty3

我第一次使用 smarty 所以请不要作恶..希望有人可以帮助我解决这个问题。我在 page.tpl 中有以下代码：

```
{$user-status}
{if $user-status == '-'}
    <h1>OK</h1>
{/if} 
```

加载页面时，我看到

```
"user-status-string" // this is correct
    {if $user-status == '-'}
        <h1>OK</h1>
    {/if} 
```

它准确地显示了我编写的代码，尽管上面显示了正确的变量属性。有人知道我在做什么错吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T07:49:50.640

我猜想用破折号命名变量可能会导致 Smarty 出现不良行为。

尝试分配和使用一个名为`$userStatus`例如的变量。

# svn - svn 将关键字属性添加到所有文件

> ID：11536612
> 
> 赞同：0
> 
> 时间：2012-07-18T07:48:19.487
> 
> 标签：svn

我想使用 statnsart 命令将属性关键字：Id 添加到我的项目中的所有 *.java 和 *.js 文件

```
svn ps svn:keywords "Id" filename 
```

我怎样才能快速完成？
操作系统 Windows
svn 版本 1.6.17 CollabNet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:37:14.593

命令脚本

```
for /f %%f in ('dir .\*java /s /B') do svn ps svn:keyword "Id" %%f 
```

# python - Python UDP套接字半随机无法接收

> ID：11536613
> 
> 赞同：6
> 
> 时间：2012-07-18T07:48:22.470
> 
> 标签：python, windows, sockets, udp

我有什么问题，我猜是代码。

该应用程序用于“ping”一些定制的网络设备以检查它们是否还活着。它每 20 秒使用一个特殊的 UDP 数据包对它们进行 ping 操作，并期望得到响应。如果他们未能连续 3 次回复 ping，则应用程序会向工作人员发送警告消息。

该应用程序每天 24/7 运行，并且每天有随机次数（主要是 2-5 次），应用程序在 10 分钟的确切时间内无法接收 UDP 数据包，之后一切恢复正常。在这 10 分钟内，似乎只有一台设备在回复，其他设备似乎已死机。我已经能够从日志中推断出。

我已经使用wireshark 来嗅探数据包，并且我已经验证了ping 数据包既进出又进，所以网络部分似乎工作正常，一直到操作系统。这些计算机正在运行 WinXPPro，有些计算机没有配置防火墙。我在不同的计算机、不同的 Windows 安装和不同的网络上遇到了这个问题。

我真的不知道这里可能是什么问题。

我附上了执行所有网络的代码的相关部分。这是在与应用程序的其余部分分开的线程中运行的。

我提前感谢您提供的任何见解。

```
def monitor(self):
    checkTimer = time()
    while self.running:
        read, write, error = select.select([self.commSocket],[self.commSocket],[],0)
        if self.commSocket in read:
            try:
                data, addr = self.commSocket.recvfrom(1024)
                self.processInput(data, addr)
            except:
                pass

        if time() - checkTimer > 20: # every 20 seconds
            checkTimer = time()
            if self.commSocket in write:
                for rtc in self.rtcList:
                    try:
                        addr = (rtc, 7) # port 7 is the echo port
                        self.commSocket.sendto('ping',addr)
                        if not self.rtcCheckins[rtc][0]: # if last check was a failure
                            self.rtcCheckins[rtc][1] += 1 # incr failure count
                        self.rtcCheckins[rtc][0] = False # setting last check to failure
                    except:
                        pass

        for rtc in self.rtcList:
            if self.rtcCheckins[rtc][1] > 2: # didn't answer for a whole minute
                self.rtcCheckins[rtc][1] = 0
                self.sendError(rtc) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:32:48.010

你没有提到它，所以我不得不提醒你，因为你使用`select()`的是那个套接字，所以最好是非阻塞的。否则你`recvfrom()`可以阻止。如果处理得当，不应该真的发生，但很难从简短的代码片段中分辨出来。

然后您不必检查 UDP 套接字的可写性 - 它始终是可写的。

现在是真正的问题 - 你说数据包正在进入系统，但你的代码没有收到它们。这很可能是由于套接字接收缓冲区溢出。在过去 15 年中，ping 目标的数量是否增加了？您正在为 ping 响应风暴做准备，并且可能没有足够快地读取这些响应，因此它们堆积在接收缓冲区中并最终被丢弃。

我的建议按投资回报率排序：

*   分散 ping 请求，不要为 DDOS 设置自己。例如，每次迭代查询一个系统并保留每个目标的最后检查时间。这将允许您平衡进出数据包的数量。
*   增加到`SO_RCVBUF`一个较大的值。这将使您的网络堆栈能够更好地处理数据包突发。
*   *循环*读取数据包，即一旦您的 UDP 套接字是可读的（假设它是非阻塞的），读取直到您得到`EWOULDBLOCK`. 这将为您节省大量`select()`电话。
*   看看你是否可以使用一些类似于 Linux 的高级 Windows API [`recvmmsg(2)`](http://man7.org/linux/man-pages/man2/recvmmsg.2.html)，如果存在这样的东西，每个系统调用都会使多个数据包出队。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:57:45.343

UDP 不保证可靠传输。这可以在现在、下一个小时和明年发挥作用。然后在两年内它将无法通信整整一个小时。

在某些情况下，数据包的路由路径可能会被阻塞。当 TCP 发生这种情况时，发送者会被告知丢失，并且发送者可能会尝试通过不同的路由路径发送它。由于 UDP 是“发送后忘记”传输协议，因此您可能会在统计上丢失一些数据包。

**tl;博士使用 TCP。**

# windows-phone-7 - 如何在 WP7 XNA 中为我的游戏添加屏幕？

> ID：11536614
> 
> 赞同：0
> 
> 时间：2012-07-18T07:48:23.043
> 
> 标签：windows-phone-7, xna

我刚刚在 WP7 XNA 中完成了一个游戏，我现在需要制作一个主菜单屏幕、最高分屏幕和说明屏幕。

我需要知道如何为主菜单添加一个屏幕，以及如何让游戏从那里开始执行。

以及如何在这些屏幕之间导航。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:13:24.050

您需要的是介绍 XNA 最佳实践。我建议您查看该示例[http://create.msdn.com/en-US/education/catalog/sample/game_state_management](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)

该示例帮助我了解如何在游戏中管理屏幕、输入和菜单。

# mysql - MySQL 计数 + 字段值分组

> ID：11536618
> 
> 赞同：0
> 
> 时间：2012-07-18T07:48:53.980
> 
> 标签：mysql, sql

我有一张桌子：

```
Date       | Code

2012-04-01 | 1
2012-04-01 | 0
2012-04-01 | 0
2012-04-01 | 2
2012-04-02 | 4
2012-04-03 | 1
2012-04-03 | 0
2012-04-03 | 0
2012-04-04 | 1
2012-04-04 | 3
2012-04-04 | 4
2012-04-04 | 4
2012-04-04 | 0 
```

代码预定义为 0-5。

我想要的是一个按代码和日期计数的查询，其中每条记录用于 1 个日期。每个预定义代码应计入一个单独的字段。

所以，结果应该是这样的：

```
Date       | Code0 | Code1 | Code2 | Code3 | Code4 | Code5

2012-04-01 |     2 |     1 |     1 |     0 |     0 |     0 
2012-04-02 |     0 |     0 |     0 |     0 |     1 |     0 
2012-04-03 |     2 |     1 |     0 |     0 |     0 |     0 
2012-04-04 |     1 |     1 |     0 |     3 |     4 |     0 
```

我想以最有效的方式执行此操作，数据大小约为 400,000，因此一些基于联合的查询可能会损害数据库。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:53:24.960

尝试

```
select `date`, 
       sum(code=0) as code0, 
       sum(code=1) as code1,
       sum(code=2) as code2,
       sum(code=3) as code3, 
       sum(code=4) as code4, 
       sum(code=5) as code5           
from your_table
group by `date` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:53:03.200

```
SELECT
  `Date`,
  SUM(IF(`Code`=0,1,0)) AS `Code0`,
  SUM(IF(`Code`=1,1,0)) AS `Code1`,
  SUM(IF(`Code`=2,1,0)) AS `Code2`,
  SUM(IF(`Code`=3,1,0)) AS `Code3`,
  SUM(IF(`Code`=4,1,0)) AS `Code4`
FROM
  tablename
GROUP BY `Date` 
```

这只会遍历您的表一次，这已经足够好了。

# html - AppCache：资源不会重新加载

> ID：11536620
> 
> 赞同：1
> 
> 时间：2012-07-18T07:48:59.027
> 
> 标签：html, application-cache

当我更新我的清单并加载页面时，我检查了开发人员工具我已更改的脚本。它不在那里。我总是需要清除浏览器缓存才能加载它。我有一个用于更新缓存的侦听器：

```
$(function() {    
    if (window.applicationCache) {
    applicationCache.addEventListener('updateready', function() {        
        console.log("appcache updated");
            window.location.reload();

    });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T01:49:28.757

使用 AppCache 时有很多问题。

我建议的第一件事是将 swapCache 方法添加到上面的代码中。例如

```
 $(function() {    
     if (window.applicationCache) {
       applicationCache.addEventListener('updateready', function() {        
         if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
           window.applicationCache.swapCache();
           console.log("appcache updated");
           window.location.reload();
         }
       });
     }
   } 
```

以下是其他一些需要注意的事项：

*   确保在更改代码时更新清单文件（听起来你正在这样做）
*   将 javascript 处理程序添加到所有 applicationEvents 以帮助调试。看看这个[http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)底部的一些代码。事实上，请阅读整页并确保您明白了。密切注意任何错误。
*   请注意，即使您的清单发生更改，也不意味着浏览器会自动获取最新版本的文件。然后它将尝试请求，但仍可能从正常缓存中检索它们。这可以通过设置缓存标头来避免。请参阅[HTML5 离线 Appcache 更新未在 Firefox 中显示](https://stackoverflow.com/questions/7314671/html5-offline-appcache-updates-not-showing-in-firefox?rq=1)。

在 stackoverflow 的其他地方也有相当多的关于 AppCache 问题的答案。

如果这些没有帮助，也许发布一些代码，我们可以解决它。

# android - 销毁 Activity 后线程仍在运行

> ID：11536625
> 
> 赞同：0
> 
> 时间：2012-07-18T07:49:09.673
> 
> 标签：android, multithreading

我已经通过调用finish（）销毁了我的活动。但是在销毁活动后活动中的线程仍在运行，并导致应用程序崩溃。我该如何处理？为什么线程在销毁活动后运行？请提供一些帮助？

```
class DBThread extends Thread {

    @Override
    public void run() {
        while (finish) {
            Cursor cursor = null;

            Cursor mCursor = lrDB.selectUserDetails(mUser_Id);
            if (mCursor.getCount() > 0) {
                mCursor.moveToNext();
                String Name = mCursor .getString(0);
                String userName = mCursor .getInt(1);
                String password = mCursor .getString(3);

            }
            mCursor.close();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:22:58.763

首先更正您的线程：

```
class DBThread extends Thread { 
    @Override 
    public void run() { 
        while (!isInterrupted()) {
            Cursor mCursor = lrDB.selectUserDetails(mUser_Id); 
            if (mCursor.getCount() > 0) { 
                mCursor.moveToNext(); 
                String Name = mCursor .getString(0); 
                String userName = mCursor .getInt(1); 
                String password = mCursor .getString(3); 

            } 
            mCursor.close(); 
        } 
    } 
} 
```

其次要优雅地关闭线程，在活动中执行类似的操作：

```
@Override
public void onDestroy() {
    if (yourThread!=null) {
        yourThread.interrupt(); // request to terminate thread in regular way
        yourThread.join(500); // wait until thread ends or timeout after 0.5 second
        if (yourThread.isAlive()) {
            // this is needed only when something is wrong with thread, for example hangs in ininitive loop or waits to long for lock to be released by other thread.
            Log.e(TAG, "Serious problem with thread!");
            yourThread.stop();
        }
    }
    super.onDrestroy();
} 
```

请注意， Thread.destroy() 已被弃用并且将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:07:22.880

添加以下代码：

```
@Override
    protected void onDestroy() {
        thread.stop();
        thread.destroy();
        super.onDestroy();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:51:28.843

`Thread`stop 在退出`run`方法时运行。所以，如果你有一个像

```
public void run() {
  while(condition) {
    // exec
  }
} 
```

请记住设置`condition`为`false`，以便让线程完成其执行

```
class DBThread extends Thread {

private boolean finish = true;    

public void stopThread() {
   finish = false;
}

@Override
public void run() {
    while (finish) {
        Cursor cursor = null;

        Cursor mCursor = lrDB.selectUserDetails(mUser_Id);
        if (mCursor.getCount() > 0) {
            mCursor.moveToNext();
            String Name = mCursor .getString(0);
            String userName = mCursor .getInt(1);
            String password = mCursor .getString(3);

        }
        mCursor.close();

    }
 }
} 
```

内部`onDrestroy()`调用`yourThreadInstance.stopThread();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:06:27.523

您可以调用正在运行的线程的中断函数并在线程上验证您是否使用 isInterrupted() 函数中断并相应地继续。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T08:18:51.493

> ```
> @Override     
> protected void onStop() {
>          thread.stop();
>            super.onDestroy();
>  }
> 
>  @Override     
> protected void onPouse() {
>          thread.stop();
>         super.onDestroy();
> } 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T07:50:43.003

您可以在 onStop 或 onDestroy 方法中处理这种情况。在 onDestroy 方法中中断线程。

# .net - 下载文件 - ConnectStream.Read 超时

> ID：11536631
> 
> 赞同：1
> 
> 时间：2012-07-18T07:49:29.557
> 
> 标签：.net, httpwebrequest, system.net

**问题**- 通过 WebClient 或 HTTPWebRequest 下载大量文件时，下载将随机但定期挂起并给出“System.Net.WebException：操作已超时。”。使用 HTTPWebRequest 时，我可以看出这个异常是通过读取流从 ConnectStream.Read 方法中引发的。更改读取流的方法，Stream.CopyTo vs Stream.ReadByte vs Stream.Read，没有任何影响。

我已经通过为下载添加一些重试代码来阻止这个异常对我们的软件产生任何影响，但我真的很想知道是什么导致了这个异常？

**背景**- 作为我们自定义数据同步的一部分，我们的软件必须通过 HTTPS 从我们的在线服务器 (IIS7) 下载许多 zip 文件（小于 2 mb）。在我们的一台开发机器上，我们遇到了上述问题，但我们没有在运行完全相同代码的同一台机器上遇到它。

# c# - 无法遍历 C# DataGrid 中的单元格以更改其背景颜色

> ID：11536635
> 
> 赞同：0
> 
> 时间：2012-07-18T07:49:59.130
> 
> 标签：c#, .net, wpf, data-binding, datagrid

我想遍历 DataGrid 中的单元格，以便可以使用[以下代码](http://en.allexperts.com/q/C-3307/2008/3/Change-Datagrid-cell-color.htm)突出显示一些单元格：

```
//Loop through all rows.
for (int x = 0; x < yourGridName.Rows.Count; x++) {
  //Loop through all cells in that row and change its color.
  for (int y = 0; y < yourGridName.Rows[x].Cells.Count; y++) {
    yourGridName.Rows[x].Cells[y].Style.BackColor = System.Drawing.Color.Red;
  }
} 
```

我在 WPF 中定义了我的 DataGrid，如下所示：

```
<DataGrid AutoGenerateColumns="False"
  EnableRowVirtualization="True" ItemsSource="{Binding}"
  Margin="12,236,12,0" Name="conflictedDevicesDataGrid"
  RowDetailsVisibilityMode="VisibleWhenSelected" Grid.ColumnSpan="2"
  AlternatingRowBackground="#2FFF0000" IsManipulationEnabled="False">
  <DataGrid.Columns>
        ....
  </DataGrid.Columns>
</DataGrid> 
```

然后我用这段代码填充它：

```
var conflictedDevicesDataTable = new DataTable();
conflictedDevicesDataTable.Rows.Add(new object[] {
  "CSV",roc.scadaNode, roc.deviceName, roc.deviceDescription, roc.rocChannel,
  roc.rocAddress, roc.rocGroup, roc.configuration, roc.revision
});
...
conflictedDevicesDataGrid.ItemsSource = conflictedDevicesDataTable.DefaultView; 
```

但是，当我尝试通过以下方式遍历列和行时：

```
conflictedDevicesDataGrid.Rows[x] 
```

行不是一个项目，我可以遍历列但不能遍历行。我在 Google 上找到的每个示例都说要通过 .Rows[x] 遍历数据网格，但我似乎无法做到这一点。我还能如何遍历 DataGrid 中的每个单元格并以编程方式更改背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:58:13.777

好的，无论出于何种原因，您想要实现的目标实际上在 WPF 中非常困难。

问题是，正如您所发现的，在 WPF 中，您无法迭代给定行的单元格。所以你有2个选择：

*   迭代 VisualTree 中的单元格。我强烈反对这个选项，因为首先，如果您使用虚拟化，它会非常糟糕，其次，它非常难看。

*   在您的 viewModel 上设置一个特殊属性，并通过 DataGrid.CellStyle 将 dataGridCell 的背景属性绑定到此属性。这里的问题是不能直接绑定，因为 DataGridCell 的 datacontext 是对应于单元格所属行的 ViewModel（看图...），而不是单元格所代表的项的属性。所以它变得相当复杂，因为你必须做一种“传递”的投标。

我建议你看看这里：

[将单元格对象的属性绑定到 WPF DataGrid 中的 DataGridCell](https://stackoverflow.com/questions/3628500/binding-a-cell-objects-property-to-a-datagridcell-in-wpf-datagrid)

和这里：

[如何动态设置 WPF DataGridCell 样式](https://stackoverflow.com/questions/4864806/how-to-style-a-wpf-datagridcell-dynamically)

这第二个链接解释了我如何做你想要实现的完全相同的事情，以及这种方法的缺点：缓慢......（阅读问题，而不是答案）

这样做，然后您可以迭代项目并在 ViewModel 中设置属性值。

**编辑：**这是给你的一些代码（根据你的问题）

```
 <local:CellViewModelToTagConverter x:Key="CellViewModelToTagConverter" />

    <DataGrid AutoGenerateColumns="False"
              EnableRowVirtualization="True"
              ItemsSource="{Binding}"
              Margin="12,236,12,0"
              Name="conflictedDevicesDataGrid"
              RowDetailsVisibilityMode="VisibleWhenSelected"
              Grid.ColumnSpan="2"
              AlternatingRowBackground="#2FFF0000"
              IsManipulationEnabled="False">
        <DataGrid.Columns>
            <!--binding to the Text property of the CellViewModel for the column n°0-->
            <DataGridTextColumn Binding="{Binding [0].Text}">
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <!--this part is the most important, this is where you transfer the right dataContext to the cell-->
                        <Setter Property="Tag">
                            <Setter.Value>
                                <MultiBinding Converter="{StaticResource CellViewModelToTagConverter}" Mode="OneWay" UpdateSourceTrigger="PropertyChanged">
                                    <Binding />
                                    <Binding RelativeSource="{x:Static RelativeSource.Self}"/>
                                </MultiBinding>
                            </Setter.Value>
                        </Setter>
                        <!--and here, you bind the Background property-->
                        <Setter Property="Background" Value="{Binding Tag.Background, RelativeSource={RelativeSource Self}, Mode=OneWay}" />
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

这是转换器背后的代码：

```
public class CellViewModelToTagConverter : MarkupExtension, IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        var row = values[0] as MyRowViewModel;
        var cell = values[1] as DataGridCell;

        if (row != null && cell != null)
        {
            var column = cell.Column as DataGridColumn;

            if (column != null)
                cell.SetBinding(FrameworkElement.TagProperty, new Binding {
                    Source = row[column.DataGridOwner.Columns.IndexOf(column)],
                    BindsDirectlyToSource = true
                });
        }

        return DependencyProperty.UnsetValue;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return new CellViewModelToTagConverter();
    }
} 
```

当然，这意味着您在某处有一个*MyRowViewModel*：

```
internal class MyRowViewModel : Collection<MyCellViewModel>, INotifyPropertyChanged
{
} 
```

和一个带有*背景*依赖属性的*MyCellViewModel ：*

 *```
internal class MyCellViewModel : DependencyObject
{
private static readonly DependencyProperty BackgroundProperty = DependencyProperty.Register("Background", typeof(Brush), typeof(MyCellViewModel));
internal Brush Background
{
    get { return (Brush)(GetValue(BackgroundProperty)); }
    set { SetValue(BackgroundProperty, value); }
}
} 
```

这应该可以解决问题（我希望我没有忘记任何事情，如果我忘记了，您可以随时添加评论）

注意：这当然是我的代码的略微修改版本，因为我的应用程序要复杂得多，而且我没有像这样测试它，所以你可能需要做一些调整。另外，在我的情况下，我必须为每种类型的单元格设置一个 CellViewModel，因为我还动态设置了 Foreground、Font、FontSyle、fontWeight 等属性（因此我的性能问题，顺便说一句）但你可能没问题具有更简单的结构。你只需要根据你的情况调整这个想法。*

# javascript - 如何在小胡子中将十进制格式格式化为货币格式？

> ID：11536638
> 
> 赞同：15
> 
> 时间：2012-07-18T07:50:17.153
> 
> 标签：javascript, mustache

我正在使用 mustache 来呈现通过 Ajax 接收到的 json 数据。

我想以货币格式呈现这个数字：

`{{price}}`

例如：12300

我怎样才能将它呈现为：

`"12,300"`

使用 mustache 模板引擎？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-18T08:02:47.337

Mustache 非常简约，不为此提供任何支持。

您必须提供格式化数据或返回格式化数据的函数

```
{ priceDecimal: function () { return formatDecimal(this.price); } } 
```

另一种选择是使用支持辅助函数的[handlebars.js](http://handlebarsjs.com/)

```
Handlebars.registerHelper('decimal', function(number) {
  return formatDecimal(number);
}); 
```

并像这样使用它

```
{{decimal price}} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-19T17:27:02.263

虽然我同意[Lucero 的回答](https://stackoverflow.com/a/11536758/613588)，但可以使用[Mustache 中的函数](https://github.com/janl/mustache.js/#functions)来格式化您的数据。

简单模板：

```
<ul>
    {{#price}}
        <li>{{commaFormat}}</li>
    {{/price}}
</ul> 
```

JavaScript 使用格式化函数处理您的价格数据：

```
var tpl = $('#tpl').html(),
    data = {
        price: ['1234', '123', '123456', '1234567890'],
        commaFormat: function() {
            // adapted from https://stackoverflow.com/questions/2901102/how-to-print-number-with-commas-as-thousands-separators-in-javascript
            return this.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
    },
    html = Mustache.to_html(tpl, data);

document.write(html);​ 
```

生成的 HTML：

```
<ul>
    <li>1,234</li>
    <li>123</li>
    <li>123,456</li>
    <li>1,234,567,890</li>
</ul> 
```

这是用于进一步检查和使用[的工作 jsFiddle 。](http://jsfiddle.net/maxbeatty/xHkQs/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-06T08:42:52.953

我为 Mustache.js 创建了一个小扩展，它可以在表达式中使用格式化程序，例如 {{expression | 格式化程序}}

您可以在 github 中查看：http: [//jvitela.github.io/mustache-wax/](http://jvitela.github.io/mustache-wax/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T07:58:56.567

在将模型传递给 mustache（或任何模板引擎）之前，您应该这样做。除了能够进行字符串操作之外，问题在于并非所有国家/地区的数字格式都相同，因此显示表示可能会有所不同，并且不应在模板中进行硬编码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-08-22T00:16:56.640

[我使用来自https://www.npmjs.com/package/handlebars.numeral](https://www.npmjs.com/package/handlebars.numeral)的 Handlebars NumeralHelper 包

首先，安装（并可选择将其保存到 package.json）：

```
npm install --save handlebars.numeral 
```

接下来，加载帮助程序：

```
var Handlebars = require('handlebars');
var NumeralHelper = require("handlebars.numeral");
NumeralHelper.registerHelpers(Handlebars); 
```

最后，在您的页面中使用它：

```
<script>
myNumber = 12300:
</script>

 <div>
 {{ number myNumber }}
 </div> 
```

此示例的输出是`12,300`.

# php - 引用类值时，echo ru 不返回任何内容

> ID：11536639
> 
> 赞同：0
> 
> 时间：2012-07-18T07:50:17.647
> 
> 标签：php

```
class bbsObj{
    var $num;
    var $dates;
    var $title;
    var $counts;
    function bbsObj($num, $datas, $title, $counts) {
        $this->num = $num;
        $this->dates = $num;
        $this->title = $title;
        $this->counts = $counts;        
    }

    function getNum(){
        return $this->num;
    }
    function getDates(){
        return $this->dates;
    }
}   

$bbsObject = new bbsObj("1", "2012", "title", "0");
$data = array();
$data[0] = $bbsObject;
echo($data[0]->getNum()); 
```

有什么方法可以在 php 中表达 arraylist < class > 类型？

我相信 echo 应该返回“1”，但不知道为什么它什么也不返回，什么也不显示。

为什么我在回声时什么也得不到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:52:22.153

它的输出`1`

检查一下[——http://codepad.org/zRqQe8RX](http://codepad.org/zRqQe8RX)

检查你的`php`版本

# sql - SQL：检索不在聚合或组语句中的列

> ID：11536651
> 
> 赞同：1
> 
> 时间：2012-07-18T07:50:52.230
> 
> 标签：sql, sqlite, group-by, greatest-n-per-group

我有以下数据。

```
--------------------------------------------------------------------------------
id             | value_name    | last_modified | system_id     | value_data    |
--------------------------------------------------------------------------------
1              | name1         | 2012-06-04    | 1             | aaa           |
2              | name1         | 2012-02-04    | 1             | bbb           |
3              | name1         | 2012-04-25    | 1             | ccc           |
4              | name2         | 2012-07-04    | 1             | ddd           |
5              | name2         | 2012-06-14    | 1             | eee           |
6              | name3         | 2011-09-05    | 1             | qqq           |
-------------------------------------------------------------------------------- 
```

现在我只需要获取最近修改的值。

**更新**

对于上表，我想得到以下结果

```
--------------------------------------------------------------------------------
id             | value_name    | last_modified | system_id     | value_data    |
--------------------------------------------------------------------------------
1              | name1         | 2012-06-04    | 1             | aaa           |
4              | name2         | 2012-07-04    | 1             | ddd           |
6              | name3         | 2011-09-05    | 1             | qqq           |
-------------------------------------------------------------------------------- 
```

我在这里和谷歌搜索了很多，但我能找到的解决方案实际上并不起作用。例如，建议的解决方案之一是使用连接。

```
SELECT
    v.[id],
    v.[system_id],
    v.[value_name],
    v.[value_data]
FROM
    [values] v INNER JOIN
    (
        SELECT
            v.[id],      
            MAX(v.[last_modified]) AS last_modified
        FROM
            [values] v
        WHERE
            v.[system_id] = 1
        GROUP BY
            v.[id]
    ) s 
ON
    v.[id] = s.[id] 
```

但是子查询是按`id`（唯一的）分组的，所以它不会计算最大最后修改日期。我正在使用 SQLite，这样的简单查询对我有用

```
SELECT
    v.[id],
    v.[system_id],
    v.[value_name],
    v.[value_data],
    MAX(v.[last_modified]) AS last_modified
FROM
    [values] v
WHERE
    v.[system_id] = 1
GROUP BY
    v.[value_name] 
```

但我记得在 Oracle 中，您不能选择未在聚合函数或 group by 语句中列出的字段，所以我不确定这是否能保证给我预期的结果。任何建议如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:07:29.763

如果`last_modified`每个 value_name 是唯一的，则可以使用：

```
SELECT
    v.[id],
    v.[system_id],
    v.[value_name]
FROM
    [values] v INNER JOIN
    (
        SELECT
            v.[value_name],      
            MAX(v.[last_modified]) AS last_modified
        FROM
            [values] v
        WHERE
            v.[system_id] = 1
        GROUP BY
            v.[value_name]
    ) s 
ON
    v.[value_name] = s.[value_name]
AND
    v.[last_modified] = s.[last_modified] 
```

如果没有，您将需要提取按 value_name 分组的 last_modified 的最后一个 id：

```
SELECT
    v.[id],
    v.[system_id],
    v.[value_name]
FROM
    [values] v INNER JOIN
    (
        SELECT max(id) ID
          FROM [values] v_max
         INNER JOIN
         (
             SELECT
                 [value_name],      
                 MAX([last_modified]) AS last_modified
             FROM
                 [values]
             WHERE
                 [system_id] = 1
             GROUP BY
                 [value_name]
         ) s 
          ON
              v_max.[value_name] = s.[value_name]
          AND
              v_max.[last_modified] = s.[last_modified]
         GROUP BY s.value_name, s.last_modified
   ) maxID
   ON v.ID = maxID.ID 
```

免责声明：未经测试。

# .net-4.0 - 如何检查 dll 是否依赖于 .net 4.5？

> ID：11536652
> 
> 赞同：1
> 
> 时间：2012-07-18T07:50:53.243
> 
> 标签：.net-4.0, .net-4.5

有没有一种快速的方法来测试给定的 dll 是否包含只能使用 .net 4.5 运行的代码，而无需实际尝试通过任何 CLR 加载它？

背景：我有一个 DLL，我正在编译到 4.0 目标，但使用 .net 4.5 (vs 2012) 工具集。我的运行环境没有安装4.5。我正在使用`AsyncTargetingPack`编写异步代码，并将代码定位到 .net 4.0。

我想确保我没有意外搞砸会导致我的 DLL 引用某些仅 .net 4.5 的类/命名空间的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:56:55.857

除非有重大的 CLR 版本更改，否则这是不可能的。从 .NET 1.0 到 1.1、1.1 到 2.0 和 3.5 到 4.0。中间版本没有 CLR 版本更改，也没有从 4.0 到 4.5 的版本

这导致了 WaitHandle.WaitOne(int) 方法的一个非常臭名昭著的问题，该方法被添加到 mscorlib 的 .NET 2.0 SP1 版本中。没有相应的改变[AssemblyVersion]，仍然是2.0.0.0。因此，程序员在不知不觉中使用了重载，并在没有安装服务包的机器上安装了代码炸弹。

Microsoft 在 .NET 4 中修复了该问题，引用程序集不再是运行时程序集的副本。它们只包含元数据，没有 IL。这反过来又允许他们更改公共类而不用担心会破坏任何东西，参考程序集没有更新。.NET 4 的许多更新已经发布，从未听说过事故。

.NET 4 到 4.5 也是如此。当您使用 4.0 参考程序集时，您可以确保不会意外使用 4.5 特定的类或方法。实际上使用 4.5 添加的功能需要使用 4.5 参考程序集进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:42:56.723

使用 .NET Reflector，您可以打开程序集/dll 并查看其目标运行时和平台目标。ildasm.exe 也可以为您执行此操作，但查看标头会更加晦涩难懂。查找它的 /header 选项。

ildasm.exe 可以从 Visual Studio 命令提示符运行。

# linq - NHibernate LINQ 和多对多映射

> ID：11536653
> 
> 赞同：0
> 
> 时间：2012-07-18T07:50:53.053
> 
> 标签：linq, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我在 NHibernate 3.2 上使用 FluentNHibernate 1.3 映射了这个类：

```
public class ClassA
{
    public virtual Int32 Id{ get; }
    ....
    public ICollection<ClassB> ClassesB { get; }
    public ICollection<ClassC> ClassesC { get; }
}

public class ClassB
{
    public virtual Int32 Id{ get; }
    ....
    public ICollection<ClassA> ClassesA { get; }
    public ICollection<ClassC> ClassesC { get; }
}

public class ClassC
{
    public virtual Int32 Id{ get; }
    ....
    public ICollection<ClassA> ClassesA { get; }
    public ICollection<ClassB> ClassesB { get; }
} 
```

所有映射都按预期正常工作。但是我需要使用 LINQ 进行查询，例如返回给定 ClassB 或 ClassA 实例中的所有 ClassC 实例，反之亦然。在获取 ClassC 列表之前，我需要在不加载任何 ClassB 或 ClassA 实例的情况下执行此操作，只需使用实例的 ID 进行查询。

我知道我可以加载，例如，一个 ClassB 实例，然后获取 ClassesC 集合，但是对于我的应用程序设计，我必须这样做而不这样做，我将使用它来处理诸如在网格上分页和其他不同的操作从分页。

在纯 SQL 上，我可以使用简单的连接查询来做到这一点，但我不知道如何使用 LINQ 来做到这一点。而且我不想要 HQL 或 ICriteria 的选项，它必须使用 LINQ（首选扩展）来完成，因为应用程序使用的插件必须不知道 NHibernate 的存在。该插件接收一个 IQueryable 实例来进行查询（这允许我们轻松地将核心应用程序移植到其他数据库模式，例如 NoSQL 或其他东西，甚至无需重新编译插件或应用程序的其他部分）。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:16:03.600

默认情况下`HasMany`，FluentNHibernate 会延迟加载集合。您可以使用流利的语法进行配置。

延迟加载示例：

```
class ClassAMap : ClassMap<ClassA>
{
    public ClassAMap()
    {
    // ...
    // lazy loading using select
    HasMany(x => x.ClassesB)
        .LazyLoad()
        .Fetch.Select()
    // ...
} 
```

或贪婪加载使用`join`：

```
class ClassAMap : ClassMap<ClassA>
{
    public ClassAMap()
    {
    // ...
    // greedy loading using join
    HasMany(x => x.ClassesB)
        .Fetch.Join()
    // ...
} 
```

或[约定](https://github.com/jagregory/fluent-nhibernate/wiki/Conventions)

```
Table.Is(x => x.EntityType.Name + "Table")
    DefaultLazy.Always() 
```

无论如何，这个配置主题非常复杂，取决于您如何配置映射。**我建议您查看 hHibernate SQL 日志，`log4net` 以查看 SQL 命令是由 ORM 生成的**。

# inf - 如何使用 InstallShield LE 安装 INF 文件？

> ID：11536655
> 
> 赞同：3
> 
> 时间：2012-07-18T07:51:13.793
> 
> 标签：inf, installshield-le

我们有一个应用程序，我们正在使用 InstallShield LE（Visual Studio 2010 附带的那个）来管理应用程序的安装。

作为安装的一部分，我需要安装一个 INF 文件，以便应用程序可以与调制解调器通信

我怎样才能让 InstallShield LE 做到这一点？这可能吗？如果没有，是否可以使用完整版的 InstallShield？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:58:39.617

转到自定义操作-> 添加启动可执行文件的新操作。对于工作目录，您可以输入“SystemFolder”，对于文件名和命令行输入：

```
rundll32 syssetup,SetupInfObjectInstallAction DefaultInstall 128 .\<file>.inf 
```

返回处理 - 同步（忽略退出代码）

然后将此操作包含在安装序列中的某个位置。我相信这应该可以解决问题。我正在使用不同版本的 install shield 写这篇文章，但我相信它仍然应该成立。

编辑：关于如何安装信息文件的行取自[这里](http://www.windowsitpro.com/article/installation2/how-can-i-install-a-inf-file-from-the-command-line-)

**后来由 DaveDev 编辑：**

这行得通。只是为了澄清需要做什么，我已经包含了屏幕截图（因为每张图片为我节省了 1000 个字，对吗？）

首先，inf 文件需要包含在安装程序配置的 Files 部分下的“SystemFolder”部分中：

![在此处输入图像描述](../Images/a77fccbf505cd5e43e83df8553c57489.png)

其次，在自定义操作部分，需要填写如下字段。这实际上是@izomorphius 所说的一切，但对于那些不熟悉该产品的人来说，这更清楚一点：

![在此处输入图像描述](../Images/af3c35f0539e8858546d573eef495ef8.png)

完成后，构建和部署，setup.exe 应该处理 inf 文件的安装。

# linux - linux中的log4j xml配置

> ID：11536659
> 
> 赞同：0
> 
> 时间：2012-07-18T07:51:21.340
> 
> 标签：linux, log4j

```
 <appender name="RollingFileAppender" class="org.apache.log4j.RollingFileAppender">
 <param name="Append" value="false"/>
 <param name="MaxFileSize" value="1KB"/>
 <param name="File" value="/mylog.log"/>
 <param name="MaxBackupIndex" value="3"/>
 <layout class="org.apache.log4j.PatternLayout">
   <param name="ConversionPattern" value="%d{yyyy-MM-dd hh:mm:ss}:%p %t %c - %m%n"/>
 </layout>
 </appender> 
```

此配置在 linux 中工作，它由从 shell 脚本调用的 java 使用。我需要将 mylog.log 放到 ${home} 目录中。应该是怎样的？${home}/mylog.log?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:03:12.160

如如何在 Linux 环境中为 Log4j 文件提供默认路径中所述，系统属性`${user.home}`应该执行您想要的操作[？](https://stackoverflow.com/questions/8036061/how-to-provide-a-default-path-for-log4j-file-inside-linux-environment)

# vb.net - 从 mvc 4 中的 webapi 中删除实体密钥

> ID：11536660
> 
> 赞同：0
> 
> 时间：2012-07-18T07:51:27.117
> 
> 标签：vb.net, asp.net-mvc-4

这是我尝试在 dotnet 中执行 webapi 的代码

```
 Public Function [Get]() As IEnumerable(Of user_data)
    Dim db As New databaseusersEntities
    Dim avg_users = (From p In db.user_data
              Select p.FullName).ToList()
    Return db.user_data.ToList()
    'Return avg_users.ToList()  --- this one doesn't work
    End Function 
```

我想避免从 json 数据和全名中获取“实体密钥”，我使用 POCO/DTO 来防止但得到错误

> “无法投射‘System.Collections.Generic.List `1[System.String]' to type 'System.Collections.Generic.IEnumerable`1’类型的对象”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:59:16.120

将方法的返回类型更改为字符串

```
Public Function [Get]() As IEnumerable(Of String)
    Dim db As New databaseusersEntities
    Dim avg_users = (From p In db.user_data
              Select p.FullName).ToList()
    Return avg_users.ToList()
End Function 
```

# wordpress - jquery手风琴子菜单下拉

> ID：11536663
> 
> 赞同：0
> 
> 时间：2012-07-18T07:51:55.790
> 
> 标签：wordpress, jquery-ui

我想创建手风琴标签。我参考了[这个](http://www.designchemical.com/blog/index.php/jquery/jquery-simple-vertical-accordion-menu/)网站。我得到以下输出：

![在此处输入图像描述](../Images/5ab62f4cbe591de93fdb0e1b2a2de661.png)

实际上点击**项目 1**它应该展开并显示子菜单..

但是有些 onclick 不起作用，并且在导航栏中我得到**#**附加到 url ..

下面的代码是jquery函数。

```
 $(document).ready(function () {
     $('#nav > li > a').click(function(){
     if ($(this).attr('class') != 'active'){
     $('#nav li ul').slideUp();
     $(this).next().slideToggle();
     $('#nav li a').removeClass('active');
     $(this).addClass('active');
  }
}); 
```

});

我添加了以下脚本

```
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/development-bundle/jquery-1.4.2.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/development-bundle/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/development-bundle/ui/jquery.ui.accordion.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/development-bundle/ui/jquery.ui.tabs.js"></script> 
```

我是否需要添加更多脚本才能达到同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:07:17.537

你能检查下面的链接手风琴[插件吗](http://www.designchemical.com/lab/demo-wordpress-vertical-accordion-menu-plugin/)

如果遇到任何问题检查`jQuery`冲突

# sql - 如何在 SQLite 中使用触发器自动输入经常性金额？

> ID：11536667
> 
> 赞同：1
> 
> 时间：2012-07-18T07:51:59.310
> 
> 标签：sql, sqlite, triggers

关于在 SQLite 中使用触发器进行自动更新的一个棘手问题......

我在这里遇到一种情况，我需要从特定日期开始以特定间隔在表格中输入条目。**“ Category** ”表中的每个类别都有一个“ **RecurAmount** ”，设置为以 4 个固定间隔之一重复：7 天、14 天、1 个月、1 年。（我用整数 1、2、3、4 表示这些）每个类别都有一个**RecurDate**，它最初是由用户选择的。一旦这个日期过去，我需要让应用程序执行以下操作（例如假设应用程序几个月没有打开并且需要刷新）：

**1) 从类别**中选择所有类别，其中**RecurDate**为 <= date('now') ... 这些是要刷新的类别。

2) 插入“ **Costs** ”表**RecurAmount** , **RecurDate** , **CatKey** , **Recur**取自“ **Categories** ”表的值到以下**Costs**列中： **Amount** , **CostDate** ,* *CatFK* *, **AutoExp**

3）然后我需要能够让 SQLite以“ **Recur** ”值确定的间隔自动将定期间隔日期的金额插入到**Costs**表中。因此，如果它的**Recur**值为“1”，我需要从**RecurDate**开始每隔 7 天在**Costs**表中输入一系列条目，直到今天的日期，但不再赘述。

 ******4) 一旦所有类别都将其经常性成本实体应用到当前日期...我需要将一个未来日期添加到**类别**表中的**RecurDate**字段中。这将作为下一个自动输入发生之前需要匹配或传递的下一个日期。

 **以下是我正在使用的表格：“**类别**”表格：

```
RecurDate       Key      RecurAmount    Recur   RecurInterval
2012-06-26      20       100            1            Weekly
2012-07-18       21        200          1            Weekly
2012-07-10       22        250          3            Monthly
2012-08-10       22        300          3            Monthly
2012-07-16       23        200          2            Fortnightly
2012-06-20       24       100           4             Yearly 
```

“**成本**”表。这是以固定日期间隔接收插入金额的表格。假设今天的日期是 2012-07-18，当我在很长一段时间后启动应用程序时没有这样做......我需要将 Costs 表更新为如下内容：

```
CostDate    CatFK       Amount      AutoExp

2012-06-26    20          100       1       
2012-07-03    20          100       1
2012-07-10    20          100       1
2012-07-17    20          100       1
2012-07-18    21          200       1
2012-07-10    22          250       3
2012-07-16    23          200       2
2012-06-20    24          100       4 
```

到目前为止，这是我的代码的开始，它试图完成每周的经常性费用。它显然不起作用...

```
PRAGMA recursive_triggers = on
CREATE TEMPORARY TRIGGER MyTrigger
BEFORE INSERT ON Costs
WHEN new.RecurDate < (select date('now','localtime')) BEGIN
INSERT INTO Costs (CostDate, Amount, CatFK, AutoExp)
VALUES (date(new.RecurDate,'+'||7||' days'), Category.RecurAmount, Category.Key,    Category.Recur;
END

INSERT INTO Costs (CostDate, Amount, CatFK, AutoExp)
SELECT RecurDate, RecurAmount,Key, Recur from Category
WHERE
Recur =1 ; 
```

正如你所看到的，我正在以某种方式使用触发器来实现这一点，但我距离完成这件事还有很长的路要走。复杂性来自我正在处理的不同的重复间隔，并根据这些不同的间隔识别和插入未来的“RecurDate”回到类别表中。我几乎在想我在 SQLite 之外使用 AS3 和一个循环来构建一个自定义语句来锻炼日期，然后将我需要的内容插入到 SQLite 中。

我想知道是否有人可以给我一些指示，因为这很棘手而且我不是很好:)

谢谢

马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:46:40.363

我认为主要问题是如何在 CostDate 和今天的日期之间给定每行的 RecurDate 值生成必要的 CostDate 值。

我对 SQLlite 一无所知，但我可以在 SQL Server 中解决问题，所以我将尝试解释所需的逻辑。

我建议在 4 遍中执行此操作，每个刷新周期一次。因此，我将在下面的叙述中假设，我们正在创建重复周期为每 7 天的新行。您应该能够根据需要复制其他周期的逻辑。

您需要一个从 0（=earliest RecurDate）到今天（包括今天）的整数值（天数）的临时表。因此，例如，如果最早的日期是 142 天前，则该表将需要包含 0 到 142 的值；或者，如果我们可以假设最早可能的 RecurDate 是 1000 天前或更短时间（即接近 3 年前），我们可以说该表将始终需要包含 0 到 1000 的值。

要创建它，我不确定您需要什么语法，但我会这样做：

```
 create table Days (interval int);
    insert Days values (0);
    insert Days values (1);

    declare @offset int, @max int;
    select @offset = 2, @max = 1000  /*(1000 per the assumption of a maximum value)*/
    while @offset < @max begin
      insert Days 
      select interval + @offset 
      from Days 
      where interval + @offset <= @max
    end 
```

此表中的数据需要与插入语句中的类别交叉连接（即创建一个笛卡尔积，其中第一个表中的所有行都匹配另一个表中的所有行）以创建新行：

```
 insert costs (Amount, CostDate, CatFK, AutoExp)
    select c.RecurAmount, c.RecurDate + d.interval, c.Catkey, c.Recur
    from Categories c cross join Days d
    where c.RecurDate < getdate()      /*'now'*/
      and c.Recur = 1
      and c.RecurDate + d.interval <= getdate()
      and d.interval > 0
      and d.interval mod 7 = 0; 
```

因此，我们在成本表中插入类别表列 + 期间，对于 RecurDate 在今天之前的所有类别，并且重复间隔为 1（每周），并且 RecurDate + 使用期间小于或等于今天日期，并且期间不是 0（因此您不会创建记录日期 = RecurDate），并且用于每个插入的期间可以被 7 整除。

我假设（或者我读错了）在此过程运行后，RecurDate 将根据每个类别的成本中最近的 CostDate 进行更新。

希望这会有所帮助:-) JB********

# iphone - 如何摆脱 TabBarItem 的 FinishedSelectedImage 下面的黑条

> ID：11536669
> 
> 赞同：0
> 
> 时间：2012-07-18T07:52:14.533
> 
> 标签：iphone, objective-c, ios5, uiimage, uitabbarcontroller

我对 FinishedSelectedImages 有疑问。我得到了这个代码：

`[self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"measure_tabBar_m.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"measure_tabBar.png"]];`

现在我的图像下方有一些空间，在该空间后面是 TabBar。我已经尝试让 .png 文件的高度更大，但它没有帮助。有谁知道如何摆脱屏幕底部和我的标签图像之间的这个空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:24:39.517

这个 API 的文档记录真的很差。

你`finishedSelectedImage`应该是一个〜30x30px的图标。毫无疑问，您已经（和我一样）创建了一个`finishedSelectedImage`完整的背景，即 49px 高（tabBar 的全高）。然后系统将此图像的底部放置在其所在空间的上方`tabBarItem.title`。

如果你想要一个完全自定义的 tabBar 样式，你还需要指定一个`tabBar.backgroundImage`（49px 高，全屏宽度）和一个`tabBar.selectionIndicatorImage`（49px 高，单标签宽度）。

`backgroundImage`从概念上讲，您从tabBar的全角开始，添加一个`selectionIndicatorImage`用作所选选项卡的背景图像的功能，然后添加每个选项卡图标的两个版本，然后`finishedUnselectedImage`添加`finishedSelectedImage`.

# javascript - 回调仅在堆栈中的最后一个执行

> ID：11536670
> 
> 赞同：1
> 
> 时间：2012-07-18T07:52:20.843
> 
> 标签：javascript, jquery

目前我已经这样设置了，

```
var elements = $('#one, $two, #three, #four, #six');

var _temp = 0;
elements.hide(0, function(){
    /* by default, the callback will be performed to
       every single element in stack */

    _temp++; // increment temporary cache

    // perform actual callback only on last in list
    if (_temp == elements.length) {
        // do stuff
    }
}); 
```

但感觉不对，因为如果我想对下面的另一个回调 241 行做同样的事情，我必须重置`_temp`，而且，全局变量只是混乱。

我怎么能简化这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:55:00.900

一种可能的方法是使用闭包：

```
var elements = $('#one, $two, #three, #four, #six');

elements.hide(0, (function(){
    var _temp = 0;
    return function(){
        _temp++; // increment temporary cache

        // perform actual callback only on last in list
        if (_temp == elements.length) {
            // do stuff
        }
    };
})()); 
```

如果您想更频繁地使用此模式，您可以创建一个返回回调的函数。

另请注意，[`.hide()`](http://api.jquery.com/hide/)有一个持续时间作为第一个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:59:05.063

尝试在函数中使用静态变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:16:48.197

还有另一种没有临时变量的方法，它可能对某些人来说可读性较差，并迫使您将选择存储在变量中，但是：

```
elements.hide(0, function(){
    // if last callback (compare raw DOMElements, because jQuery object aren't somehow similar)
    if ($(this)[0] === elements.last()[0]) {
        // do stuff
    }
}); 
```

缩小一些线，并做到了。

# mysql - 我应该插入和删除记录还是插入和更新 LIKE/UNLIKE 按钮的记录？哪个更划算？

> ID：11536672
> 
> 赞同：0
> 
> 时间：2012-07-18T07:52:23.727
> 
> 标签：mysql, social-media-like

在我需要实现类似/不同功能的项目中，我想知道从性能的角度来看哪种方法比其他方法更好。如果我必须使用插入删除，那么如果有人喜欢/不喜欢它这么多次会发生什么（那么可能大多数主键编号将基于喜欢/不喜欢被占用）？
有谁知道社交网站是如何做到的？

编辑：
我的表如下：

```
CREATE TABLE `junc_user_share_like` (
 `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
 `jusid` int(10) unsigned NOT NULL,
 `liker` mediumint(8) unsigned NOT NULL,
 `when` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 PRIMARY KEY (`id`),
 UNIQUE KEY `jusid` (`jusid`,`liker`),
 KEY `liker` (`liker`),
 CONSTRAINT `junc_user_share_like_ibfk_1` FOREIGN KEY (`liker`) REFERENCES `user` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `junc_user_share_like_ibfk_2` FOREIGN KEY (`jusid`) REFERENCES `junc_user_share` (`jusid`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB 
```

编辑 2：
正如您在上次更新中所说的，这就是我所推断的：

```
INSERT INTO likes SET jusid=$jusid, liker=$liker
UPDATE junc_user_share SET likes=likes+1 WHERE id=$id 
```

这对喜欢很有用，但如果有人想撤销他的喜欢怎么办？我应该删除喜欢的记录吗？我的问题正是在这里？在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:58:54.520

非规范化。

*   有一张表，上面有喜欢和不喜欢的东西（**谁**对**哪个**项目做**了什么）**
***   在 items 表上有一个`likes`和一个`unlikes`字段，都以 0 开头**

 **在一个喜欢/不喜欢做（假设1 =喜欢，0 =不喜欢）

```
INSERT INTO likes_unlikes SET item=[id of item], user=[id of user], action=[0|1];
UPDATE items SET likes=IF([action]=1,likes+1,likes), unlikes=IF([action]=0,unlikes+1,unlikes) WHERE id=[id of item] 
```

A `UNIQUE KEY`on`likes_unlikes(item,user)`给您作为礼物的独特性。

**编辑**

经过讨论，如果你只是喜欢，没有不喜欢，情况就更容易了：

*   只`likes`需要一个带有项目和用户 ID 的表
*   `likes`项目表上只需要一个字段

查询现在类似于

```
INSERT INTO likes SET item=[id of item], user=[id of user];
UPDATE items SET likes=likes+1 WHERE id=[id of item] 
```

并反转类似：

```
DELETE FROM likes WHERE item=[id of item] AND user=[id of user];
UPDATE items SET likes=likes-1 WHERE id=[id of item] 
```**

# jetty - 在 Jetty 8 中使用 JNDI

> ID：11536679
> 
> 赞同：2
> 
> 时间：2012-07-18T07:52:58.063
> 
> 标签：jetty, jndi, embedded-jetty

我正在尝试将 Jetty 8（具体来说：8.1.4.v20120524）配置为使用 JNDI。在我的 jetty.xml 文件中，我有以下配置：

```
<Array id="plusConfig" type="java.lang.String">
    <Item>org.eclipse.jetty.webapp.WebInfConfiguration</Item>
    <Item>org.eclipse.jetty.webapp.WebXmlConfiguration</Item>
    <Item>org.eclipse.jetty.webapp.MetaInfConfiguration</Item>
    <Item>org.eclipse.jetty.webapp.FragmentConfiguration</Item>
    <Item>org.eclipse.jetty.plus.webapp.EnvConfiguration</Item>
    <Item>org.eclipse.jetty.plus.webapp.PlusConfiguration</Item>
    <Item>org.eclipse.jetty.webapp.JettyWebXmlConfiguration</Item>
    <Item>org.eclipse.jetty.webapp.TagLibConfiguration</Item>
</Array>

<Call name="setAttribute">
  <Arg>org.eclipse.jetty.webapp.configuration</Arg>
  <Arg>
      <Ref id="plusConfig"/>
  </Arg>
</Call>

<New class="org.eclipse.jetty.plus.jndi.EnvEntry">
  <Arg>stopport</Arg>
  <Arg type="java.lang.Integer">8888</Arg>
  <Arg type="boolean">true</Arg>
</New> 
```

我使用嵌入式码头从 Java 调用它：

```
 Server jetty = (Server) new XmlConfiguration(<myconfig>).configure();
      jetty.start();
      InitialContext ic = new InitialContext();
      Integer sport = (Integer) ic.lookup("java:comp/env/stopport"); 
```

但是，JNDI 绑定似乎不完整/不正确，因为这失败了：

```
javax.naming.NameNotFoundException; remaining name 'env/stopport'
org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:500)
org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:531)
org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:546)
org.eclipse.jetty.jndi.java.javaRootURLContext.lookup(javaRootURLContext.java:112)
javax.naming.InitialContext.lookup(InitialContext.java:409)
org.basex.BaseXHTTP.<init>(BaseXHTTP.java:80)
org.basex.BaseXHTTP.main(BaseXHTTP.java:47)
javax.naming.NameNotFoundException; remaining name 'env/stopport' 
```

实际代码可以在[https://github.com/dirkk/basex-api/tree/basexjetty](https://github.com/dirkk/basex-api/tree/basexjetty)的 src/main/resources/.basexjetty（这是 jetty.xml，刚刚重命名）和 src/main/java中找到/org/basex/BaseXHTTP.java

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:11:56.907

我想知道在接线时是否使用了 EnvEntry 上的错误构造函数

试试这个，让我知道它是否有效：

```
<New class="org.eclipse.jetty.plus.jndi.EnvEntry">
  <Arg></Arg>
  <Arg>stopport</Arg>
  <Arg type="java.lang.Integer">8888</Arg>
  <Arg type="boolean">true</Arg>
</New> 
```

# actionscript-3 - AS3：为什么我不能在其类中将实例设置为空？

> ID：11536684
> 
> 赞同：0
> 
> 时间：2012-07-18T07:53:22.573
> 
> 标签：actionscript-3, null

假设我正在创建一个名为 Hitchhiker 的类。

```
package hi.my.name.is {
    public function Hitchhiker():void {
        // ...
    }

    public function nullify():void {
        this = null;
    }
} 
```

然后它给了我一个错误：

```
Error: Cannot assign to a non-reference value. 
```

有没有搞错？我虽然您可以将实例设置为 null，例如：

```
var hitchhiker:Hitchhiker = new Hitchhiker();
hitchhiker = null; 
```

为什么我不能在课堂上这样做？我打算通过将引用设置为弱引用来删除所有事件侦听器，然后使实例无效以将它们全部删除。为什么我不能？

有人帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:00:26.820

你首先在哪里定义了这个类？这是您定义类的方式：

```
package xyz {

    public class Hitchhiker {

        public function Hitchhiker():void {

        }

        public function nullify():void {
            this = null;
        }
    }
} 
```

除了你的错误来这里：`this = null;`

* * *

基本上，该错误意味着您不能从类的实例内部使对象无效，您只能从外部使对象无效，而您已经在这样做了。

所以删除函数'nullify'。

* * *

使用 dispatchEvent 的例子：

```
public function nullify():void { 

            dispatchEvent(new Event("destroyMe")); 
} 
```

您可以通过以下方式收听：

```
obj.addEventListener("destroyMe", destroyObject);

function destroyObject(event:Event):void { 

            // set your object to null here 
} 
```

或者更好的方法是使用数组来跟踪创建的对象。

但我仍然不确定你为什么不希望 GC 处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:07:11.553

```
this = null;
hitchhiker = null; 
```

这些动作是不平等的。实际上，第一个是无意义的行动。如果要为 GC 准备对象，则应删除所有引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:17:20.367

指针是编程语言的`this`自动功能，而不是“常规”变量实例，这就是为什么您不能将其设置为`null`. 变量实例必须被*声明*和*赋值*，对于`this`. 当然，它也不影响垃圾回收，所以绝对不需要清除它。

但除了这些特定于语言的细节之外，还有一些有趣的普遍事实适用于大多数或所有 OO 语言：

*   如果保留对象可以将自己的实例设置为`null`，则它必须了解其“父”类的结构——这会破坏封装，产生非常强的耦合，违反[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，并导致僵化和脆弱代码。不是一个好主意。因此，**我们应该让*实际持有引用*的类决定何时使用它**。
*   **如果将同一个对象实例分配给多个变量怎么办？如果在某个点丢弃了对象，则某些引用可能仍在使用中 - 这会使您的应用程序面临过多的内存分段错误。**为了防止这些，您总是必须手动跟踪使用引用的所有位置，并确保在删除之前不再需要它。你能想象这涉及到多少工作吗？也就是说，如果您自己在编译之前在代码中执行此操作。
*   但是等一下，你总是可以……嗯……想一个自动机制来在运行时跟踪变量引用！*它将记录它们的使用位置，在收到信号表明持有它的类*不再需要它时清除每个引用，检查是否存在任何其他引用，并最终在所有引用都消失后释放内存。好想法！现在我们要考虑的是如何实现那个信号......感谢上帝，它已经完成了： **将变量设置为`null`意味着：“我不再需要这个了。”** - GC 机制的目的是为您完成所有内存管理，因此您可以担心程序的功能。您所要做的就是注意从正确的位置发送信号。

# javascript - 如何在 Java 脚本中指定 XMLSerializer 的属性顺序？

> ID：11536693
> 
> 赞同：0
> 
> 时间：2012-07-18T07:54:10.007
> 
> 标签：javascript, xmlserializer

在 javascript 中，我可以指定 XMLSerializer 输出的属性顺序。这是我的代码。

```
var serializer = new XMLSerializer ();
var str = serializer.serializeToString (document); 
```

当我尝试将此“str”值写入 Window.document 并再次对其进行序列化时，我会以不同的顺序获得属性。

例如： 在第一个序列化输出
`<img style="width: 10%" src="../Koala.jpg" />`
中 在第二个序列化输出中
`<img src="../Koala.jpg" style="width: 10%" />`

我希望这两个输出相等。因为我想做一个字符串比较，所以这是一个基本要求。请建议我完成此任务的方法..提前感谢..

# php - 如何在 Heroku 中使用 Facebook PHP SDK？

> ID：11536698
> 
> 赞同：-3
> 
> 时间：2012-07-18T07:54:34.273
> 
> 标签：php, facebook-graph-api, heroku

我完全是 Facebook 应用程序的新手，所以我使用 Heroku 作为主机（因为它是免费的）。

但我坚持获取用户信息，如用户名、他们的朋友等

我不知道如何在 Heroku 中使用 PHP SDK，所以，如果你知道，请分享。任何帮助将不胜感激。

PS：我喜欢PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:11:30.187

我能给你的唯一解决方案是查看他们的文档：http: [//developers.facebook.com/docs/](http://developers.facebook.com/docs/)

特别是权限部分：http: [//developers.facebook.com/docs/authentication/permissions/](http://developers.facebook.com/docs/authentication/permissions/)

# php - 通过ajax发送多维数组

> ID：11536705
> 
> 赞同：1
> 
> 时间：2012-07-18T07:55:02.823
> 
> 标签：php, javascript, jquery, html, ajax

所以基本上这里是我用于创建数组的 jQuery 和 HTML 代码。它基本上采用每个具有类设置的 div 并检查它是否具有属性 rel 的跨度，如果有，它将插入到数组下的数组中。每个新的 div.settign span rel 属性都将插入到同一父数组下的另一个数组中。

检查此代码以了解它 - [http://jsfiddle.net/xVuHx/](http://jsfiddle.net/xVuHx/)。

也贴在这里——

```
jQuery(document).ready(function() {
    var rel = [];
    jQuery(".setting").each(function() {
        rel.push(jQuery(this).find('span[rel]').map(function() {
            return this.getAttribute('rel');
        }).get());
    });               
    jQuery("body").text(rel);
});​ 
```

和 html -

```
<div class="setting">
    <span rel="Variable">Variable</span>
    <span rel="Item">Item</span>
    <span rel="Something">Something</span>
</div>
<div>
    <span rel="Smth">Smth</span>
    <span>Sec</span>
</div>
<div class="setting">
    <span>Second</span>
    <span rel="first">First</span>
    <span rel="Third">Third</span>
</div> 
```

它工作得很好并显示了两个数组 - 一个有 3 个元素，一个有两个，但是当我尝试通过 ajax 将它传递给 PHP 文件时，ti 给了我 [object Object] with var_dump($array); . 我也尝试做foreach，但它告诉我无效的参数被传递给foreach 语句，所以我想我错误地将数组发送到ajax 或者数组制作不正确。

这是我的ajax代码-

```
var myArray = jQuery(this).sortable("serialize") + "&type="+rel+"&action=update_homepage";
jQuery.post("'.admin_url("admin-ajax.php").'", myArray, function(response){
   var info = response.slice(0,-1);
}); 
```

此 ajax 代码是通过 wordpress 制作的，因此它的 ajax 请求与默认的 AJAX 请求略有不同。

你能检查一下到底是什么问题吗？

**编辑：**

刚刚尝试`print_r($myArray);`在php端输出，它输出空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:08:47.643

在浏览器控制台（部分网络）中检查 AJAX 请求中发布数据的格式。

[您可以在此 stackexchange 问题](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)中找到有关在浏览器中打开控制台的信息。

[JSON-js](https://github.com/douglascrockford/JSON-js) - JavaScript 中的 JSON。

要将对象转换为 JSON，请使用`JSON.stringify`：

```
var json_text = JSON.stringify(your_object, null, 2); 
```

将您的数组编码为 JSON，然后使用 Ajax 请求发送。要在 PHP 中解码 JSON，请使用[json_decode](http://us.php.net/json_decode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:04:14.993

最好将其转换为json

# c# - 连接到数据库时当前位置没有可用的源

> ID：11536707
> 
> 赞同：1
> 
> 时间：2012-07-18T07:55:06.130
> 
> 标签：c#, asp.net, enterprise-library

嗨，我在尝试连接到数据库时遇到以下错误

> 查找“e:\Builds\EntLib\Latest\Source\Blocks\Data\Src\Data\Sql\SqlDatabase.cs”的源。校验和：MD5 {43 28 d1 1d 5d 3b a6 a8 15 e d3 6b 52 f5 4d 89} 文件 'e:\Builds\EntLib\Latest\Source\Blocks\Data\Src\Data\Sql\SqlDatabase.cs' 确实不存在。在脚本文档中查找 'e:\Builds\EntLib\Latest\Source\Blocks\Data\Src\Data\Sql\SqlDatabase.cs'... 在项目中查找 'e:\Builds\EntLib\Latest\Source \Blocks\Data\Src\Data\Sql\SqlDatabase.cs'。在项目中找不到该文件。查看目录'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\crt\src\'... 查看目录'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\ src\mfc\'... 查看目录 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\atl\'... 查看目录 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\'... 活动解决方案的调试源文件设置表明调试器不会要求用户查找文件: e:\Builds\EntLib\Latest\Source\Blocks\Data\Src\Data\Sql\SqlDatabase.cs。调试器找不到源文件 'e:\Builds\EntLib\Latest\Source\Blocks\Data\Src\Data\Sql\SqlDatabase.cs'。

我的 we.config 条目是

```
 <configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="Data Source=version;Initial Catalog=database;Persist Security Info=True;Connect Timeout=300;User ID=myusername;Password=mypass"
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T14:32:12.430

确保正确配置了对 Microsoft.Practices.EnterpriseLibrary 的引用。检查他们的路径。尝试在项目中添加和重新添加 Microsoft.Practices.EnterpriseLibrary 引用，确保它们指向同一个库。

# mysql - SQL 分组、拥有和排序 (MySQL)

> ID：11536711
> 
> 赞同：1
> 
> 时间：2012-07-18T07:55:13.820
> 
> 标签：mysql, sql, group-by, distinct

我有以下 SQL：

```
select code, distance from places; 
```

输出如下：

```
CODE      DISTANCE
106     386.895834130068
80      2116.6747774121 
80      2117.61925131453
106     2563.46708627407 
```

我希望能够只获得一个代码和最近的距离。所以我希望它返回这个：

```
CODE      DISTANCE
106     386.895834130068
80      2116.6747774121 
```

仍在使用 Distinct 和 Group By。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:57:18.860

```
select `code`, min(distance) as minimal_distance
from places
group by `code` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:58:41.653

```
select code, min(distance) as distance
from places
group by code 
```

这里有 GROUP BY 的手册：http: [//dev.mysql.com/doc/refman/5.0/en/group-by-functions-and-modifiers.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions-and-modifiers.html)

教程：

*   [http://www.tizag.com/mysqlTutorial/mysqlgroupby.php/](http://www.tizag.com/mysqlTutorial/mysqlgroupby.php/)
*   [http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T07:59:42.633

试试这个：

```
SELECT
  Code,
  MIN(Distance) AS closest_distance
FROM
  your_table
GROUP BY
  Code 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T08:00:34.207

```
select `code`, min(distance) as distance
from places
group by `code` 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T07:57:41.777

```
select code, min(distance) as mindist
from places
group by code 
```

# bash - Bash 脚本执行时间过长

> ID：11536712
> 
> 赞同：0
> 
> 时间：2012-07-18T07:55:14.977
> 
> 标签：bash, shell, loops, for-loop

我制作的一个脚本有问题，执行时间太长（比如 24 分钟），但时间是可变的（取决于日志），在不久的将来，时间肯定会增加。

麻烦在一个嵌套的for循环中：

```
obtener_ErroresLanzados()
{
        #Buscamos los equipos del log lanzados_a_pendientes en los logs de instala_sw_qcc para ver el porque no se han lanzado.
        totalLanzadosPendientes=`cat $rutaTemporales/lanzados_a_pendientes.log | wc -l`;
        lanzadosPendientes=$(cat $rutaTemporales/lanzados_a_pendientes.log);
        #grep "$paqueteBuscado" instala_sw_qcc_2012*.log | cut -f 1 -d ":" > $rutaTemporales/logsErrores.log;
        find $rutaTrazas -name "instala_sw_qcc_2012*" | xargs grep -l "$rutaQcc/$paqueteBuscado" | xargs grep -l "ERROR \[" | cut -f 9 -d "/" > $rutaTemporales/logsErrores.log;
        logsErrores=$(cat $rutaTemporales/logsErrores.log);
        totalLogsErrores=`cat $rutaTemporales/logsErrores.log | wc -l`;

for (( j=1; j<=$totalLanzadosPendientes; j++ ))
    do
equipoBusqueda=`echo $lanzadosPendientes | cut -f $j -d " "`;
            for (( k=1; k<=$totalLogsErrores; k++ ))
            do
            logBusqueda=`echo $logsErrores | cut -f $k -d " "`;
            grep "ERROR \[$equipoBusqueda\]" $rutaTrazas/$logBusqueda >> $rutaTemporales/erroresPendientes.log;
            if [ $? -eq 0 ];then
                    break;
            fi;
                    done;
    done;
    cat $rutaTemporales/erroresPendientes.log | sed 's/  / /g' | sed '/No se ha podido/d' | cut -f 7-14 -d " " | sort -u > $rutaTemporales/erroresPendientes_Final.log;
} 
```

问题在于大于 20k 的 $totalLogsErrores ...

我可以通过其他方式做到这一点吗？

谢谢！

----------------------- 编辑 1 -----------

```
$ time find $rutaTrazas -name "instala_sw_qcc_2012*" | xargs grep -l "$rutaQcc/$paqueteBuscado" | xargs grep -l "ERROR [" | cut -f 9 -d "/" 

real 0m3.862s
user 0m0.959s
sys 0m2.941s 
```

* * *

```
$ du -h ../trazas/instala_sw_qcc_20120718091838.log 

4.0K ../trazas/instala_sw_qcc_20120718091838.log 
```

* * *

```
$ time grep error ../trazas/instala_sw_qcc_20120718091838.log 

real 0m0.001s
user 0m0.001s
sys 0m0.000s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:44:46.620

要限定此性能问题，您可以尝试以下操作：

评估您的第一个`find`&`grep`命令的影响：

```
$ time find $rutaTrazas -name "instala_sw_qcc_2012*" | xargs grep -l "$rutaQcc/$paqueteBuscado" | xargs grep -l "ERROR \[" | cut -f 9 -d "/" > $rutaTemporales/logsErrores.log; 
```

在您的嵌套`for`循环中，评估`grep`. 文件有多大？在您的评论中，您提到了`100*10000`重复，如果每个`grep`需要 4 毫秒，这将是巨大的。

当`find`您有很多子目录时，它`grep`变得昂贵，而当您的文件足够大时，它变得昂贵。

```
$ du -h file.out 
  20K   file.out

$ time grep ERROR file.out 

real    0m0.004s
user    0m0.000s
sys     0m0.003s 
```

如果你有 1000000 个循环，那将需要很多:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:13:03.257

cat 的无用用法：`wc -l <file`而不是`cat file | wc -l`

无用的 wc ：`while read line; do ...;done <file`而不是 for 循环：

```
find $rutaTrazas -name "instala_sw_qcc_2012*" | xargs grep -l "$rutaQcc/$paqueteBuscado" | xargs grep -l "ERROR \[" | cut -f 9 -d "/" > $rutaTemporales/logsErrores.log;
while read equipoBusqueda; do
    while read logBusqueda; do
        grep "ERROR \[$equipoBusqueda\]" $rutaTrazas/$logBusqueda >> $rutaTemporales/erroresPendientes.log
        if [ $? -eq 0 ];then
            break; 
        fi;
    done <$rutaTemporales/logsErrores.log
done <$rutaTemporales/lanzados_a_pendientes.log
cat $rutaTemporales/erroresPendientes.log | sed 's/  / /g' | sed '/No se ha podido/d' |
    cut -f 7-14 -d " " | sort -u > $rutaTemporales/erroresPendientes_Final.log; 
```

最后find、grep、sed、cut等命令可以简化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:17:20.310

Yo 正在将整个文件读入一个 shell 变量，然后使用单独的剪切过程提取每一行。这是非常低效的。

很难破译你想做什么。也许你可以用这样的东西替换这个函数：

```
$ cd $rutaTrazas
$ sed 's/^/ERROR \[/; s/$/\]/' $rutaTemporales/lanzados_a_pendientes.log > search_strings
$ xargs grep -F -f search_strings \
    < $rutaTemporales/logsErrores.log \
    >> $rutaTemporales/erroresPendientes.log
$ < $rutaTemporales/erroresPendientes.log \
    sed 's/  / /g' | sed '/No se ha podido/d' |
    cut -f 7-14 -d " " | 
    sort -u > $rutaTemporales/erroresPendientes_Final.log 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:10:59.977

### 循环处理效率低下

几乎不可能弄清楚您在这里*真正*想要做什么，因为没有语料库或样本输出显示您实际尝试解析的内容。但是，您可以将此问题归结为低效的处理和进程分叉。

### 使用 AWK 进行面向记录的操作

日志文件通常是面向记录的，其中每一行是具有多个字段的记录。如果这是您的用例，那么 AWK（或 AWK 仿真模式下的 Perl/Ruby）通常是适合这项工作的工具。这确保您只处理每行一次，并且读取行和拆分字段非常有效。

例如，使用 Bash 4 和 GNU awk（又名 gawk）：

```
shopt -s globstar
awk 'BEGIN {error_count = 0}
     /ERROR/ {print $9; ++error_count}
     # other pattern/action pairs
     END {print "Total errors:", error_count}
    ' **/instala_sw_qcc_2012* > /path/to/output/file 
```

您可以将多个模式匹配应用于每一行，或者如果您确实需要这样做，则可以从 awk 内部直接输出到单个文件。但是，通过让 awk 在一个进程中处理循环和行解析，您可能会获得很大的效率。

# php - 你如何回显 in_array 结果？

> ID：11536716
> 
> 赞同：1
> 
> 时间：2012-07-18T07:55:29.810
> 
> 标签：php, arrays

我正在尝试每个匹配的机场代码值。即如果它匹配HKG，它将呼应香港。

```
$city  = array (
            'HKG'=>'Hong Kong',
            'SIN'=>'Singapore',
            'TPE'=>'Taipei',
            'HND'=>'Tokyo',
            'MDW'=>'Chicago',
         );

if(in_array($city, $row->city)){
    echo 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T07:57:11.823

为什么不直接使用

```
echo $city[$row->city]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:59:35.647

如果你得到结果，只需使用

```
echo $row->city; 
```

# ruby-on-rails - 在 Rails 3 的 en.yml 中指定标签值

> ID：11536718
> 
> 赞同：0
> 
> 时间：2012-07-18T07:55:39.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, localization

我正在写一个网页，我需要有一些单选按钮供选择。

代码如下：

```
 - Person.food_type.options[:flags].each do |cs|
    = radio_button_tag "Person[food_type]", cs, @Person.food_type == cs ? true : false
    = label_tag(:food_type,cs.to_s.capitalize, :class => "checkbox_label") 
```

对于生成的每个标签，我想在 en.yml 文件中为该标签指定一个值。

如何在 en.yml 中定义这些标签值？

例如，而不是标签是：

[单选按钮] 辛辣食物，

我希望它是：

[单选按钮] 辣的食物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:05:41.560

你能做这样的事情吗：

```
- Person.food_type.options[:flags].each do |cs|
  = radio_button_tag "Person[food_type]", cs, @Person.food_type == cs ? true : false
  = label_tag(:food_type,t('.label_#{cs}'), :class => "checkbox_label") 
```

并将值添加到您的 .yml 文件中。

您还可以更改或创建`to_s`模型中的方法。

# actionscript-3 - 缩放 fxg 图形

> ID：11536719
> 
> 赞同：0
> 
> 时间：2012-07-18T07:55:41.747
> 
> 标签：actionscript-3

我尝试在 as3 项目中缩放 *.fxg 图形，但问题是视觉图像被缩放，但宽度属性保持与原始相同。如果我更改宽度属性图像的大小在视觉上调整得很好，并且属性也是正确的。以 *.svg 为例，这没有问题。

```
var logo:Sprite = new Logo() //Logo.fxg - width 400px
logo.scaleX = .5
trace(logo.width) //400
logo.width = 200
trace(logo.width) //200 
```

# php - Wordpress Cursor 在网站后面

> ID：11536725
> 
> 赞同：0
> 
> 时间：2012-07-18T07:56:11.493
> 
> 标签：php, wordpress

我最近为 wordpress 安装了鼠标/光标试验插件。该插件正在运行，但是鼠标轨迹图像消失在网站内容后面，仅显示在背景上

有人能指导我正确的方向来修复它吗？

谢谢

插件链接：Wordpress Cursor Trails

```
function add_cursor_trail(){
    $ct_data = get_option('cursor_trail_options');
    if( date('Y-m-d', current_time('timestamp')) == '2011-02-14'){
        $ct_data['pointer'] = WP_PLUGIN_URL.'/cursor-trail/valentines.png'; 
    }
    if( !empty($ct_data['start']) && current_time('timestamp') <= strtotime($ct_data['start']) ){
        return;     
    }
    if( !empty($ct_data['end']) && current_time('timestamp') >= strtotime($ct_data['end']) ){

        return;
    }
    ?>
    <script type="text/javascript">
        jQuery(document).ready( function($) {
            var container = $(document.body);
            var speed = <?php echo $ct_data['speed']; ?>;
            container.mousemove( function(e){
                if( $(this).parents('a').length == 0 ){
                    $('<img src="<?php echo $ct_data['pointer']; ?>" />').css({ 'position':'absolute', 'top':e.pageY+5, 'left':e.pageX+5}).prependTo(container).fadeOut(speed, function(){ 
                        $(this).remove(); 
                    });
                }
            });
        });
    </script>
    <?php
}
add_action('wp_head','add_cursor_trail',999);

/* Creating the wp_events table to store event data*/
function cursor_trail_activate() {
    $ct_data = array(
        'pointer' => WP_PLUGIN_URL.'/cursor-trail/pointer.png',
        'speed' => 900
    );
    add_option('cursor_trail_options', $ct_data);
}
register_activation_hook( __FILE__,'cursor_trail_activate');

class CursorTrailAdmin{
    // action function for above hook
    function CursorTrailAdmin() {
        global $user_level;
        add_action ( 'admin_menu', array (&$this, 'menus') );
    }

    function menus(){
        $page = add_options_page('Cursor Trail', 'Cursor Trail', 'manage_options', 'cursor-trail', array(&$this,'options'));
        add_action('admin_head-'.$page, array(&$this,'options_head'));
    }

    function options_head(){
        ?>
        <style type="text/css">
            .nwl-plugin table { width:100%; }
            .nwl-plugin table .col { width:100px; }
            .nwl-plugin table input.wide { width:100%; padding:2px; }
        </style>
        <?php
    }

    function options() {
        add_option('cursor_trail_options');
        if( is_admin() && !empty($_POST['ctsubmitted']) ){
            //Build the array of options here
            foreach ($_POST as $postKey => $postValue){
                if( substr($postKey, 0, 3) == 'ct_' ){
                    //For now, no validation, since this is in admin area.
                    if($postValue != ''){
                        $ct_data[substr($postKey, 3)] = $postValue;
                    }
                }
            }
            update_option('cursor_trail_options', $ct_data);
            ?>
            <div class="updated"><p><strong><?php _e('Changes saved.'); ?></strong></p></div>
            <?php
        }else{
            $ct_data = get_option('cursor_trail_options');  
        }
        ?>
        <div class="wrap nwl-plugin">
            <h2>Cursor Trail</h2>
            <div id="poststuff" class="metabox-holder has-right-sidebar">
                <div id="side-info-column" class="inner-sidebar">
                <div id="categorydiv" class="postbox ">
                    <div class="handlediv" title="Click to toggle"></div>
                        <h3 class="hndle">Donations</h3>
                        <div class="inside">
                            <em>Plugins don't grow on trees.</em> Please remember that this plugin is provided to you free of charge, yet it takes many hours of work to maintain and improve!
                            <div style="text-align:center;">
                                <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                                    <input type="hidden" name="cmd" value="_s-xclick">
                                    <input type="hidden" name="hosted_button_id" value="8H9R5FVER3SWW">
                                    <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                                    <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
                                </form>
                            </div>
                        </div>
                    </div>
                    <div id="categorydiv" class="postbox ">
                        <div class="handlediv" title="Click to toggle"></div>
                        <h3 class="hndle">Plugin Information</h3>
                        <div class="inside">
                            <p>This plugin was developed by <a href="http://twitter.com/marcussykes">Marcus Sykes</a> @ <a href="http://netweblogic.com">NetWebLogic</a></p>
                            <p>Please visit <a href="http://netweblogic.com/forums/">our forum</a> for plugin support.</p>
                        </div>
                    </div>
                </div>
                <div id="post-body">
                    <div id="post-body-content">
                        <p>If you have any suggestions, come over to our plugin page and leave a comment. It may just happen!</p>
                        <form method="post" action="<?php echo str_replace( '%7E', '~', $_SERVER['REQUEST_URI']); ?>">
                        <table class="form-table">
                            <tbody id="lwa-body">
                                <tr valign="top">
                                    <td colspan="2">
                                        <h3><?php _e("General Settings", 'cursor-trail'); ?></h3>
                                    </td>
                                </tr>
                                <tr valign="top">
                                    <td scope="row">
                                        <label><?php _e("Cursor Image", 'cursor-trail'); ?></label>
                                    </td>
                                    <td>
                                        <input type="text" name="ct_pointer" value='<?php echo (!empty($ct_data['pointer'])) ? $ct_data['pointer']:WP_PLUGIN_URL.'/cursor-trail/pointer.png'; ?>' class='wide' />
                                        <i><?php _e("Add the url for the image you want to use as a cursor trail. Defaults to a mouse pointer if left blank.", 'cursor-trail'); ?></i> 
                                    </td>
                                </tr>
                                <tr valign="top">
                                    <td scope="row">
                                        <label><?php _e("Cursor Fade Speed", 'cursor-trail'); ?></label>
                                    </td>
                                    <td>
                                        <input type="text" name="ct_speed" value='<?php echo (!empty($ct_data['speed'])) ? $ct_data['speed']:900; ?>' class='wide' />
                                        <i><?php _e("Speed in ms that each cursor trail will take to fade out.", 'cursor-trail'); ?></i> 
                                    </td>
                                </tr>
                                <tr valign="top">
                                    <td scope="row">
                                        <label><?php _e("Start Date", 'cursor-trail'); ?></label>
                                    </td>
                                    <td>
                                        <input type="text" name="ct_start" value='<?php echo (!empty($ct_data['start'])) ? $ct_data['start']:''; ?>' class='wide' />
                                        <i><?php _e("If filled, cursors won't start to trail until this date. Use YYYY-MM-DD format.", 'cursor-trail'); ?></i> 
                                    </td>
                                </tr>
                                <tr valign="top">
                                    <td scope="row">
                                        <label><?php _e("Cut-Off Date", 'cursor-trail'); ?></label>
                                    </td>
                                    <td>
                                        <input type="text" name="ct_end" value='<?php echo (!empty($ct_data['end'])) ? $ct_data['end']:''; ?>' class='wide' />
                                        <i><?php _e("If filled, cursors won't trail after this date. Use YYYY-MM-DD format.", 'cursor-trail'); ?></i> 
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr valign="top">
                                    <td colspan="2">    
                                        <input type="hidden" name="ctsubmitted" value="1" />
                                        <p class="submit">
                                            <input type="submit" class="button-primary" value="<?php _e('Save Changes') ?>" />
                                        </p>                            
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <?php
    }
}
global $CursorTrailAdmin; 
$CursorTrailAdmin = new CursorTrailAdmin(); 
```

我尝试将以下内容添加到我的 style.css，但它不起作用：

```
img[src$="/pointer.png"] { 
  z-index: 1000; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:08:14.977

有同样的问题，这解决了它：

```
img[src$="/pointer.png"],
img[src$="/valentines.png"] {
  z-index: 1000!important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:09:24.273

您的 img 的 z-index 仅限于父元素。检查此元素是否位于其他内容的后面。如果是这样，1000 的 z-index 将没有任何帮助。您必须将父元素放在其他元素的前面。

# git - Git查找给定文件的标签中已完成的更改

> ID：11536726
> 
> 赞同：2
> 
> 时间：2012-07-18T07:56:11.217
> 
> 标签：git, git-commit

我想为我的源代码文件 Foo.cpp 查找版本标记 v3.4.0 中所做的所有更改。

希望上面的句子足以解释我的问题。实际上，我只需要在一个为版本标签 v3.4.0 推送的文件中找到所有更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:16:01.697

要查看给定文件的标记中已完成的所有更改：

```
git diff <prev_tag_name> <tag_name> <path/to/filename> 
```

git diff v3.3.9 v3.4.0 Foo.cpp

就是这样..

# java - 在 Android 中，我试图在单个 Activity 中为不同的方向调用 2 个 xml 布局

> ID：11536728
> 
> 赞同：1
> 
> 时间：2012-07-18T07:56:24.737
> 
> 标签：java, android, android-layout

在 Android 中，我试图在单个 Activity 中为不同的方向调用 2 个 xml 布局，它可以工作，但是当方向从横向更改为纵向时，我的 Activity 正在重新加载，但我想要在更改方向之前它是怎样的

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:00:26.723

你的意思是说你想保存你的活动状态。你可以将你的值保存在 onBundleSaveinstance 方法中作为键值对，然后简单地在 oncreate 中获取它并再次设置值。例如。将您的复选框状态保存为选中或未选中作为布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:59:11.603

如果您想避免`onCreate()`每次进行定向时都调用您的方法，请将其添加到您的清单中。`<activity android:name=".MyActivity" android:configChanges="orientation|keyboardHidden" />`

这不会重新加载您的视图，并且之前存在的内容仍将保留。

# css - Twitter Bootstrap 2 流畅的布局应该适合屏幕（+ 可滚动区域）

> ID：11536734
> 
> 赞同：4
> 
> 时间：2012-07-18T07:57:03.307
> 
> 标签：css, layout, twitter-bootstrap, overflow

我尝试实现一个新的基于 Bootstrap 的设计。

![在此处输入图像描述](../Images/cbb0510b849ee31ca308f0fcba7c066c.png)

如何使流畅的布局适合屏幕并仅创建一个可滚动区域（内容）？

我试图将 Content-div 的 body、html 和所有父标签设置为 height:100%、overflow:hidden 并且只有 Content 设置为 overflow:auto - 但这不起作用。

有任何想法吗？

该设计由一个流体布局和三行组成（页眉：span2+span10，正文：span2+span10，页脚：span12）

编辑：目前我使用 jQuery 并在每次窗口大小更改时调整它的大小 - 它可以工作，但不是一个好的解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:01:33.917

假设你有类似的东西：

```
<div class="row-fluid">
    <div class="span3">
        Sidebar
    </div>
    <div class="span9" style="overflow:auto">
        Content
    </div>
</div> 
```

您可以设置侧边栏 div 和内容 div 的 CSS *（*`height`甚至`max-height`），或者您可以使用[EqualHeighs jQuery 插件之类的](http://www.cssnewbie.com/equalheights-jquery-plugin/)东西来动态设置相同的高度（*记住设置最小和最大高度*：） 。 **`$(".x").equalHeights(100,300);`**

# facebook - 我无法从评论插件中获取超过 1000 条回复

> ID：11536739
> 
> 赞同：0
> 
> 时间：2012-07-18T07:57:34.430
> 
> 标签：facebook

我想做的是从这里获得所有回复：

[https://graph.facebook.com/293474140751567/comments](https://graph.facebook.com/293474140751567/comments)

如果我一次得到所有这些都没关系（我知道这是不可能的）

或按一定数量单独获取（我尝试使用 limit&offset 参数每次 500）；

问题是我最多只能得到 1000 个回复。（有超过 2500 个回复）如果我将 offset 参数设置为 1000，那么我根本没有得到任何结果。

有谁知道如何获得所有回复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:09:48.550

这与可见性有关。您正在访问所有人都可以使用的评论。一些用户更改了他们的安全/隐私设置，这会阻止您看到它们。恰好该帖子上有大约 990 条可见（公开）评论。

这里还有[一个问题](https://stackoverflow.com/questions/10553510/facebook-open-graph-api-weird-behavior-of-parameter-limit-while-getting-a-pagin)比我能解释得更好。

# ios - 如何通过单击第一个选项卡中的按钮导航到另一个选项卡栏项目？

> ID：11536749
> 
> 赞同：3
> 
> 时间：2012-07-18T07:58:23.743
> 
> 标签：ios

我有一种情况是通过单击第一个选项卡中的按钮从第一个选项卡项导航到第二个选项卡项。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T08:29:14.440

您可以调用`-setSelectedIndex:`您的按钮单击处理程序。这将选择第三个选项卡。

```
[tabBarController setSelectedIndex: 2]; 
```

请注意，文档是您的朋友：[UITabBarController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)

另外你可以试试这个：

```
[tabBarController setSelectedViewController:(UIViewController *)[tabBarController.viewControllers objectAtIndex: 2]]; 
```

# html - 在 chrome 中选择粗体下拉选项

> ID：11536763
> 
> 赞同：2
> 
> 时间：2012-07-18T07:59:13.230
> 
> 标签：html, css, google-chrome, drop-down-menu

有没有办法使用 CSS 在 Chrome 和 IE 的框中使`<option>`标签变为粗体？`select`它在 Firefox 中运行。

```
option.red {
    background-color: #cc0000; 
    font-weight: bold; 
    font-size: 12px; 
    color: white;
} 
```

```
<select name="color">
    <option class="red" value="red">Red</option>
    <option value="white">White</option>
    <option value="blue">Blue</option>
    <option value="green">Green</option>
</select> 
```

[这与这里](https://stackoverflow.com/questions/5887133/cssselect-dropdown-option)的问题相同，但没有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:05:06.773

你不可以做这个。您会发现“在那里”最有可能的解决方案是添加一个带有硬编码样式的环绕跨度，但 IE (7) 和 Firefox (3.0.12) 都不支持这一点。

您可以做的是使用 JavaScript 解决方案为您提供选择的外观，而无需实际使用选择。

这里有一个很棒的“操作方法”：http: [//www.devirtuoso.com/2009/08/styling-drop-down-boxes-with-jquery/](http://www.devirtuoso.com/2009/08/styling-drop-down-boxes-with-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T18:21:47.940

我用了`<option class="bold">Bold Text here</option>`

使用 CSS：

```
option.bold {
     font-weight:bold;
} 
```

它适用于 Firefox（Mac 和 Windows）和 IE11，但不适用于 Chrome 或 Safari。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T08:03:44.700

由于 Chrome 不允许在选项标签上使用粗体，您可以使用`text-shadow`类似的属性

```
text-shadow: 0px 0px 0px black; 
```

它将给出相同的粗体外观并适用于所有浏览器。

# python - 即使使用 __init__.py，如何修复“尝试在非包中进行相对导入”

> ID：11536764
> 
> 赞同：798
> 
> 时间：2012-07-18T07:59:14.477
> 
> 标签：python, package, python-import, importerror, init

我正在尝试遵循[PEP 328](http://www.python.org/dev/peps/pep-0328/)，具有以下目录结构：

```
pkg/
  __init__.py
  components/
    core.py
    __init__.py
  tests/
    core_test.py
    __init__.py 
```

在`core_test.py`我有以下导入语句

```
from ..components.core import GameLoopEvents 
```

但是，当我运行时，我收到以下错误：

```
tests$ python core_test.py 
Traceback (most recent call last):
  File "core_test.py", line 3, in <module>
    from ..components.core import GameLoopEvents
ValueError: Attempted relative import in non-package 
```

环顾四周，我发现“[即使使用 __init__.py 相对路径也不起作用](https://stackoverflow.com/questions/9427037/relative-path-not-working-even-with-init-py)”和“[从相对路径导入模块](https://stackoverflow.com/questions/279237/python-import-a-module-from-a-folder/6098238#6098238)”，但它们没有帮助。

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：672
> 
> 时间：2012-07-18T08:26:51.360

详细说明[Ignacio Vazquez-Abrams 的](https://stackoverflow.com/a/11536794/5337834)回答：

Python 导入机制相对于`__name__`当前文件起作用。当你直接执行一个文件时，它没有它通常的名字，而是有`"__main__"`它的名字。所以相对进口不起作用。

正如 Igancio 建议的那样，您可以使用该`-m`选项执行它。如果您的包的一部分打算作为脚本运行，您还可以使用该`__package__`属性来告诉该文件它应该在包层次结构中具有什么名称。

有关详细信息，请参阅[http://www.python.org/dev/peps/pep-0366/](http://www.python.org/dev/peps/pep-0366/)。

* * *

## 回答 #2

> 赞同：466
> 
> 时间：2012-07-18T08:01:04.023

是的。你没有把它当作一个包来使用。

```
python -m pkg.tests.core_test 
```

* * *

## 回答 #3

> 赞同：214
> 
> 时间：2015-01-10T13:36:37.273

这取决于您要如何启动脚本。

如果您想以经典方式[从命令行启动 UnitTest](https://docs.python.org/3/using/cmdline.html)，即：

```
python tests/core_test.py 
```

然后，由于在这种情况下*'components'*和*'tests'*是同级文件夹，您可以使用*[sys.path](https://docs.python.org/2/library/sys.html#sys.path)**模块的insert*或*append*方法导入相关模块。就像是：

```
import sys
from os import path
sys.path.append( path.dirname( path.dirname( path.abspath(__file__) ) ) )
from components.core import GameLoopEvents 
```

否则，您可以[使用“-m”参数启动脚本](https://docs.python.org/2/using/cmdline.html#cmdoption-m)（请注意，在这种情况下，我们谈论的是一个包，因此您不能提供*“.py”*扩展名），即：

```
python -m pkg.tests.core_test 
```

在这种情况下，您可以像以前一样简单地使用相对导入：

```
from ..components.core import GameLoopEvents 
```

您最终可以混合使用这两种方法，以便您的脚本无论如何调用都能正常工作。例如：

```
if __name__ == '__main__':
    if __package__ is None:
        import sys
        from os import path
        sys.path.append( path.dirname( path.dirname( path.abspath(__file__) ) ) )
        from components.core import GameLoopEvents
    else:
        from ..components.core import GameLoopEvents 
```

* * *

## 回答 #4

> 赞同：210
> 
> 时间：2013-10-04T21:00:02.010

`import components.core`如果将当前目录附加到，则可以直接使用`sys.path`：

```
if __name__ == '__main__' and __package__ is None:
    from os import sys, path
    sys.path.append(path.dirname(path.dirname(path.abspath(__file__)))) 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2017-01-10T17:44:57.223

**在 core_test.py 中，执行以下操作：**

```
import sys
sys.path.append('../components')
from core import GameLoopEvents 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-11-13T17:00:09.563

如果您的用例用于运行测试，并且确实如此，那么您可以执行以下操作。而不是像运行测试脚本那样`python core_test.py`使用测试框架，例如`pytest`. 然后可以在命令行输入

```
$$ py.test 
```

这将在您的目录中运行测试。这解决了`__name__`@BrenBarn`__main__`指出的存在问题。接下来，将一个空`__init__.py`文件放入您的测试目录，这将使测试目录成为您包的一部分。然后你就可以做

```
from ..components.core import GameLoopEvents 
```

但是，如果您将测试脚本作为主程序运行，那么事情将再次失败。所以只需使用测试运行器。也许这也适用于其他测试运行器，例如`nosetests`但我还没有检查过。希望这可以帮助。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2016-11-01T07:19:41.110

我的快速修复是将目录添加到路径：

```
import sys
sys.path.insert(0, '../components/') 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2019-11-19T08:35:52.963

问题在于您的测试方法，

你试过`python core_test.py`

那么你会得到这个错误 **ValueError: Attempted relative import in non-package**

原因：您正在从非包源测试您的包。

所以从包源测试你的模块。

如果这是您的项目结构，

```
pkg/
  __init__.py
  components/
    core.py
    __init__.py
  tests/
    core_test.py
    __init__.py 
```

**光盘包装**

```
python -m tests.core_test # dont use .py 
```

**或从外部 pkg/**

```
python -m pkg.tests.core_test 
```

`.`如果要从同一目录中的文件夹导入，则为单个。每后退一步再加一个。

```
hi/
  hello.py
how.py 
```

在`how.py`

```
from .hi import hello 
```

如果你想从 hello.py 导入如何

```
from .. import how 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-09-20T08:01:03.590

正如[Paolo](https://stackoverflow.com/questions/11536764/how-to-fix-attempted-relative-import-in-non-package-even-with-init-py/27876800#27876800)所说，我们有 2 种调用方法：

```
1) python -m tests.core_test
2) python tests/core_test.py 
```

它们之间的一个区别是 sys.path[0] 字符串。由于[在执行 import 时解释器会搜索 sys.path](https://docs.python.org/3.6/library/sys.html)，我们可以这样做`tests/core_test.py`：

```
if __name__ == '__main__':
    import sys
    from pathlib import Path
    sys.path.insert(0, str(Path(__file__).resolve().parent.parent))
    from components import core
    <other stuff> 
```

在此之后，我们可以使用其他方法运行 core_test.py：

```
cd tests
python core_test.py
python -m core_test
... 
```

注意，py36 仅测试过。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-04-18T17:13:32.710

旧线程。我发现`__all__= ['submodule', ...]`在 **__init__.py**文件中添加一个，然后`from <CURRENT_MODULE> import *`在目标中使用它可以正常工作。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-07-14T11:20:11.653

你可以使用`from pkg.components.core import GameLoopEvents`，例如我使用pycharm，下面是我的项目结构图，我只是从根包中导入，然后就可以了：

[![在此处输入图像描述](../Images/4c4bd0ca4ad27b59b8ca73731b52a6d7.png)](https://i.stack.imgur.com/O8dKL.png)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-05-13T22:36:27.693

这种方法对我有用，并且比某些解决方案更简洁：

```
try:
  from ..components.core import GameLoopEvents
except ValueError:
  from components.core import GameLoopEvents 
```

父目录在我的PYTHONPATH中，父目录和这个目录下都有`__init__.py`文件。

以上在 python 2 中始终有效，但 python 3 有时会遇到 ImportError 或 ModuleNotFoundError （后者是 python 3.6 中的新内容，是 ImportError 的子类），因此以下调整在 python 2 和 3 中都适用于我：

```
try:
  from ..components.core import GameLoopEvents
except ( ValueError, ImportError):
  from components.core import GameLoopEvents 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-05-24T05:41:17.527

试试这个

```
import components
from components import * 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-02-21T10:17:58.670

如果有人正在寻找解决方法，我偶然发现了一个。这里有一点上下文。我想测试我在文件中的一种方法。当我从内部运行它时

```
if __name__ == "__main__": 
```

它总是抱怨相对进口。我尝试应用上述解决方案，但未能奏效，因为有许多嵌套文件，每个文件都有多个导入。

这就是我所做的。我刚刚创建了一个启动器，一个可以导入必要方法并调用它们的外部程序。虽然，这不是一个很好的解决方案，但它确实有效。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-12-02T22:54:48.100

这是一种会激怒所有人但效果很好的方法。在测试运行中：

```
ln -s ../components components 
```

然后像往常一样导入组件。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-06-13T20:27:33.567

由于您已经将所有内容标记为模块，因此如果您作为 python 模块启动，则无需使用相对引用。

代替

```
from ..components.core import GameLoopEvents 
```

简单地

```
from pkg.components.core import GameLoopEvents 
```

当您从 pkg 的父级运行时，请使用以下命令

```
python -m pkg.tests.core_test 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-10-27T23:12:15.647

对我来说只有这个工作：我必须明确地将**package**的值设置为父目录，并将父目录添加到 sys.path

```
from os import path
import sys
if __package__ is None:
    sys.path.append( path.dirname( path.dirname( path.abspath(__file__) ) ) )
    __package__= "myparent"

from .subdir import something # the . can now be resolved 
```

我现在可以直接使用`python myscript.py`.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-02-11T09:26:00.510

这非常令人困惑，如果您使用的是 pycharm 之类的 IDE，那就更令人困惑了。什么对我有用： 1\. 进行 pycharm 项目设置（如果你从 VE 或 python 目录运行 python） 2\. 你定义的方式没有错。有时它适用于 from folder1.file1 导入类

如果它不起作用，请使用 import folder1.file1 3\. 您的环境变量应在系统中正确提及或在命令行参数中提供。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-01-18T21:49:33.483

## `python <main module>.py`不适用于相对导入

问题是当您从命令行运行模块时，[相对导入](https://www.python.org/dev/peps/pep-0328/#relative-imports-and-name)不起作用`__main__`

```
python <main_module>.py 
```

[PEP 338](https://staging.python.org/dev/peps/pep-0338/#import-statements-and-the-main-module)中明确说明了这一点。

> 2.5b1 的发布显示了此 PEP 和 PEP 328 之间令人惊讶的（尽管回想起来很明显）交互 -**显式相对导入在主模块中不起作用**。这是因为相对导入依赖于`__name__`确定当前模块在包层次结构中的位置。在主模块中，值`__name__`always `'__main__'`，因此**显式相对导入总是会失败**（因为它们仅适用于包内的模块）。

## 原因

*   [Python Bug Tracker Issue1510172：绝对/相对导入不起作用？](https://bugs.python.org/issue1510172)

> 这个问题实际上并不是 -m 开关所独有的。问题是相对导入基于`__name__`，并且在主模块中，`__name__`始终具有值`__main__`。因此，**相对导入目前无法从应用程序的主模块正常工作**，因为**主模块不知道它真正适合 Python 模块命名空间的**位置（这对于通过-m 开关，但直接执行文件和交互式解释器完全不走运）。

要进一步了解，请参阅[Python 3 中的相对导入](https://stackoverflow.com/a/28154841/4281353)以获取详细说明以及如何完成它。

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2019-10-31T12:38:58.600

因为你的代码中包含`if __name__ == "__main__"`，它没有作为包导入，所以你最好用它`sys.path.append()`来解决问题。

# java - 链表实现了用于分区数据和顺序访问的arraylist

> ID：11536768
> 
> 赞同：0
> 
> 时间：2012-07-18T07:59:29.693
> 
> 标签：java, multithreading, parallel-processing, arraylist, linked-list

我一直在使用已`Linked List`实现`ArrayList`将我的数据存储在`Java`. 它非常大，我将它划分为几个区域，使用`subList`并将其发送到不同的处理器创建线程进行处理。我的系统中有 80 个内核，我现在正在创建 20 个线程。每个线程必须处理数百万个实例中的至少一百万个实例。数据被划分为：

```
 List<List<Integer>> totalInstances = new ArrayList<List<Integer>>();
 //fill the data in totalInstances
 List<List<Integer>>  instanceSet1 = totalInstances.subList(index1,index2);
 List<List<Integer>>  instanceSet2 = totalInstances.subList(index2,index3); 
.................... 
```

等等。我已经创建了这样的 20 个集合。处理几乎是不同步的。有一些同步，但似乎很少出现。这只是在这个数据集中发生的读取操作。我没有加入从子列表中读取每个示例的步骤。线程仅在读取其相应实例列表中的所有实例后才同步以进入下一个加入。即使这样我在处理过程中也会出现一些暂停。当每个线程读取一个实例时会发生这种情况，它们会等待一段时间并读取另一个线程。这可能是什么原因？

1.  是因为使用链表吗？
2.  我正在打印每个线程访问的实例。我听说该`I/O` 操作阻碍了多线程进程。
3.  任何适合它的数据结构？
4.  任何用于查找性能障碍的调试工具？

提前致谢

# python - 比较两个列表的元素

> ID：11536777
> 
> 赞同：3
> 
> 时间：2012-07-18T08:00:04.443
> 
> 标签：python, list

```
A = [a1, a2, a3...]  #a1<a2<a3...
B = [b1, b2...]  #b1<b2<b3... 
```

A 和 B 不相交。是不是我事先不知道 A/B 中元素的数量和它们的值。我想比较列表和删除元素中元素的值：

```
delete a[i+1] if there is no b[j] such that a[i]<b[j]<a[i+1]
delete b[i+1] if there is no a[j] such that b[i]<a[j]<b[i+1] 
```

最后，我想分开列表，而不是 A 和 B 的组合。

例如，如果`A[0] < B[0]`，A = [1, 10, 40]，B = [15, 30]。比较`A[1]`和`B[0]`第一。删除`10`，因为 B 中没有元素介于 1 和 15 之间。然后删除，`15`因为在 15 和 30 之间不再存在任何元素。输出应该是：如果您尝试对新 2 个列表的元素进行排序，它应该是`A[0]<B[0]<A[1]<B[1]<...`

如果`A[0] > B[0]`，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:16:29.950

在你编辑之前我想出了这个。但似乎输出不是您所期望的。无论如何，它可能会帮助您走上正轨：

```
a = range(0, 30, 3)
b = range(0, 20, 2)

a.sort()
b.sort()

A = [a[i+1] for i in range(len(a)-1) if any(a[i]<b[j]<a[i+1] for j in range(len(b)-1))]
B = [b[i+1] for i in range(len(b)-1) if any(b[i]<a[j]<b[i+1] for j in range(len(a)-1))]

result = sorted(A+B)

print a, b
print result 
```

这是您所表达的“字面意思”，但`result`这里不是您所期望的。我会努力改进这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:25:22.550

```
a = [1, 10, 40]
b = [15, 30]

srcs = [a, b]
dsts = [[], []]
prev_which = -1
while all(srcs):
    which = int(srcs[0][0] > srcs[1][0])
    elem = srcs[which].pop(0)
    if prev_which != which:
        dsts[which].append(elem)
    prev_which = which
for src, dst in zip(srcs,dsts):
    if src:
        dst.append(src.pop(0))
a, b = dsts 
```

返回：

```
a = [1, 40]
b = [15] 
```

并且对于

```
a = [3, 4, 6, 7, 8, 9]
b = [1, 2, 5, 10] 
```

它返回`[3, 6]`和`[1, 5, 10]`。

**编辑**：另一种可能性：

```
import itertools as it
import operator as op

a = [3, 4, 6, 7, 8, 9]
b = [1, 2, 5, 10]
srcs = [a, b]
dsts = [[], []]

for which, elems in it.groupby(sorted((x, i) for i in (0,1) for x in srcs[i]), key=op.itemgetter(1)):
    dsts[which].append(next(elems)[0])
a, b = dsts 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:14:13.337

我知道使用 bisect 模块可能是一个很好的解决方案：

```
>>> def sort_relative(L1, L2):
    # Switch if needed
    if L1[0] > L2[0]:
        L1, L2 = L2, L1
    i = 0
    while i + 1 < max(len(L1), len(L2)):
        try:
            # We know that L1[i] < L2[i]
            # Get indexes where L2[i] and L2[i + 1] should be inserted
            i11 = bisect.bisect_left(L1, L2[i])
            i12 = bisect.bisect_left(L1, L2[i + 1])

            # This condition allows to know if one element of L1
            # was found between L2[i] and L2[i + 1]:
            # - if so, we have L1[i] < L2[i] < L1[i + 1] < L2[i + 1]
            # - else we have L1[i] < L2[i] < L1[i + 1] but
            # we don't know between L1[i + 1] and L2[i + 1]
            if L1[i11] < L2[i + 1]:
                L1 = L1[:i + 1] + [L1[i11]] + L1[i12:]
                index1, index2 = i + 1, i + 2
            else:
                L1 = L1[:i + 1] + L1[i12:]
                index1, index2 = i, i + 1

            # Do the same kind of symetric search,
            # with indexes computed above
            i21 = bisect.bisect_left(L2, L1[index1])
            i22 = bisect.bisect_left(L2, L1[index2])
            if L2[i21] < L1[index2]:
                L2 = L2[:index1] + [L2[i21]] + L2[i22:]
            else:
                L2 = L2[:index1] + L2[i22:]
        # Little trick not to test indexes everywhere:
        # lists are browsed at the same time
        except IndexError:
            pass

        # Next index !
        i += 1

    # Show result
    print 'L1:', L1, '- L2:', L2

>>> sort_relative([1, 10, 50], [15, 30])
L1: [1, 50] - L2: [15]
>>> sort_relative([17, 18, 50], [15, 30])
L1: [15, 30] - L2: [17, 50]
>>> sort_relative([1, 10, 12, 25, 27, 50], [15, 30, 70])
L1: [1, 25, 50] - L2: [15, 30, 70]
>>> sort_relative([1, 10, 12, 25, 27, 50], [15, 30, 34, 70])
L1: [1, 25, 50] - L2: [15, 30, 70]
>>> 
```

我没有考虑数字同时在`A`和中的情况`B`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T14:30:38.297

所以，如果我没看错，你的例子中期望的输出是 [1,40] 和 [15]，是吗？

如果是这样，以下将得到正确的结果，但我确信有一种更严格的方法可以做到这一点。

```
a = [1, 10, 40]
b = [15, 30]
c = sorted([[e_a,'a'] for e_a in a] + [[e_b,'b'] for e_b in b])
indices = []

for i in range(len(c)-1):
    if c[i][1] == c[i+1][1]:
        indices.append(i+1)

for e in sorted(indices, reverse=True):
    del c[e]

a,b = [e[0] for e in c if e[1]=='a'],[e[0] for e in c if e[1]=='b'] 
```

首先 - 合并列表并对它们进行排序，同时跟踪它们来自哪个列表。

第二 - 然后删除合并列表中的下一个项目来自同一源列表的所有实例。

第三 - 更新 a 和 b。

# svn - SVN 同步更改为子目录

> ID：11536788
> 
> 赞同：0
> 
> 时间：2012-07-18T08:00:39.350
> 
> 标签：svn, synchronization

我在 Windows 7 上有一个名为“repo_root”的本地目录，它与 SVN 的主干文件夹同步。SVN 的主干有两个子目录，分别名为“work”和“documentation”。所以本地 repo_root 目录也有来自 SVN 的两个子目录（工作和文档）。它工作了大约六个月。但是今天当我启动计算机时，本地目录 repo_root 到主干文件夹的链接消失了，本地子目录工作（在 repo_root 内）在没有我干预的情况下链接到主干文件夹。所以我现在不能对 repo_root 文件夹进行 SVN 更新。如果我对子目录“work”进行 SVN 更新，则会使用本地“work”目录创建两个新的子目录“work”和“documentation”。

它看起来像一个词混乱，所以任何关于澄清问题的问题，请询问。感谢您的及时回复。

兄弟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:12:41.217

您可以尝试 SVN-Relocate 将您的 repo_root 目录转移到主干目录

# c# - 如何按行中的自定义标签对gridview进行排序

> ID：11536790
> 
> 赞同：1
> 
> 时间：2012-07-18T08:00:45.970
> 
> 标签：c#, devexpress, aspxgridview

我正在使用这些代码为每一行编写标签。

```
protected void grd_HtmlRowCreated(object sender, ASPxGridViewTableRowEventArgs e)
{
ASPxLabel lblPoint = grd.FindRowCellTemplateControl(e.VisibleIndex, grdBildiriler.Columns["cTotalValue"] as GridViewDataColumn, "lblPoint") as ASPxLabel;
lblPoint.text = "a value different for each row"
} 
```

我的问题是：如何使用 lblPoint.Text 为 Column["cTotalValue"] 启用排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:18:18.657

ASPxGridView 有一个可以实现的事件，称为 CustomColumnSort。[http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_CustomColumnSorttopic](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_CustomColumnSorttopic)

```
protected void grid_CustomColumnSort (object sender, DevExpress.Web.ASPxGridView.CustomColumnSortEventArgs e) {
    if (e.Column.FieldName == "cTotalValue") 
    {
        e.Handled = true;

        //you can get the row index of 2 columns being sorted through e.ListSourceRowIndex1 and e.ListSourceRowIndex2
        //Get the two custom values and compare and set result

        var value1 = "Some custom value you retrieve using e.ListSourceRowIndex1";
        var value2 = "Another custom value you retrieve using e.ListSourceRowIndex2";

        if (value1 > value2)
            e.Result = 1;
        else if (value1 == value2)
            e.Result = Comparer.Default.Compare(value1, value2);
        else
            e.Result = -1;
    }
} 
```

# jquery - jquery getJSON 回调函数未在 asp.net mvc jsonresult 上触发，但适用于 twitter json api

> ID：11536793
> 
> 赞同：1
> 
> 时间：2012-07-18T08:00:53.453
> 
> 标签：jquery, asp.net-mvc, json

从子域调用 json api 似乎是什么问题？

Asp.net MVC 动作

```
 [AllowAnonymous]
        [OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
        public JsonResult getBalances()
        {
            var balances = new[]
                               {
                                   new {Id = 1, Balance = 3},
                                   new {Id = 2, Balance = 2},
                                   new {Id = 3, Balance = 1}
                               };
            return Json(balances, JsonRequestBehavior.AllowGet);
        } 

```

jQuery代码

```
 var url = "http://subdomain.mysite.com/getBalances/";

$.getJSON(url + '?callback=?', function (data) {
           alert(data);
        }); 

```

但是如果我使用 twitter api url，上面的脚本可以工作：

```
 var url = "https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2"; 

```

![这是请求和响应标头](../Images/3d51426479e7c9782df1b483cb243a5c.png)

json响应是： `[{"Id":1,"Balance":3},{"Id":2,"Balance":2},{"Id":3,"Balance":1}]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:11:23.413

我怀疑你违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。该代码适用于 Twitter，因为 Twitter 支持[JSONP](http://en.wikipedia.org/wiki/JSONP)，而您的控制器操作仅返回 JSON。

如果您导航到`http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2&callback=abc`您会注意到 JSON 响应是如何与`callback`您作为查询字符串参数提供的包装在一起的：

```
abc([...]) 
```

如果你想在你的网站上实现同样的效果，你应该返回 JSONP。这是您可以使用的自定义 JSONP 操作结果的示例：

```
public class JsonpResult : ActionResult
{
    private readonly object _obj;

    public JsonpResult(object obj)
    {
        _obj = obj;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var serializer = new JavaScriptSerializer();
        var callbackname = context.HttpContext.Request["callback"];
        var jsonp = string.Format("{0}({1})", callbackname, serializer.Serialize(_obj));
        var response = context.HttpContext.Response;
        response.ContentType = "application/json";
        response.Write(jsonp);
    }
} 
```

你的控制器动作变成：

```
[AllowAnonymous]
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public JsonResult getBalances()
{
    var balances = new[]
    {
        new { Id = 1, Balance = 3 },
        new { Id = 2, Balance = 2 },
        new { Id = 3, Balance = 1 }
    };
    return new JsonpResult(balances);
} 
```

和电话：

```
var url = "http://subdomain.mysite.com/getBalances/";
$.getJSON(url + '?callback=?', function (data) {
    alert(data);
}); 
```

# php - 将使用 Mozilla Thunderbird 创建的 CSV 文件中的多字节字符导入 PHP

> ID：11536796
> 
> 赞同：1
> 
> 时间：2012-07-18T08:01:15.350
> 
> 标签：php, drupal, csv, thunderbird

我正在尝试将 CSV 文件导入到使用 Drupal 构建的 PHP 应用程序中。我在导入从Mozilla Thunderbird导出的CSV文件时遇到了一个奇怪的情况（我正在导出联系人的通讯录）。如果我使用 Windows 版本的 Thunderbird 导出，任何多字节字符都不会呈现到屏幕上，并且在将提取的内容的内容转储到屏幕时显示为缺失字符。但是，当使用使用 Linux 版本的 Thunderbird 创建的相同文件时，不存在此问题。在这种情况下，一切都完美无缺。

为了测试这一点，我在 Linux 和 Windows 7 上安装了相同版本的 Thunderbird。然后我在地址簿中创建了相同的单个用户（姓：张，名字：利），然后将地址簿导出为 CSV 文件。如上所述，linux CSV 文件可以成功导入，但 Windows 不能。

如果我在 linux 中检查这两个文件，使用`file --mime myfilename.csv`is 得到以下输出：

> LinuxTB14.csv：文本/纯文本；字符集=utf-8
> 
> WinTB14.csv：文本/纯文本；字符集=iso-8859-1

所以windows文件，即使它包含中文字符，也被编码为iso-8859-1。发现这一点后，我认为这是一个编码问题，我只需要告诉 PHP 将违规内容编码为 UTF-8。

问题是 PHP 似乎以另一种我无法理解的方式检测编码。

```
// Set correct locale to avoid any issues with multibyte characters.
$original_local_value = setlocale(LC_CTYPE, 0);
if ($original_local_value !== 'en_US.UTF-8') {
  setlocale(LC_CTYPE, 'en_US.UTF-8');
} 
$handle = fopen($file->uri, "r");
$cardinfo = array();
while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
  $cardinfo[] = $data;
  // dsm() is a drupal function which prints the content of the argument to screen.
  dsm(mb_detect_encoding($data[0])); 
  dsm($data[0]);
} 
```

如果我包含上面的代码，它显示了 CSV 文件每一行中第一个值的编码和内容，我会在屏幕上显示以下内容：

对于 Thunderbird 在 windows 中创建的 CSV

> ASCII
> 
> 名
> 
> UTF-8

对于 Thunderbird 在 Linux 中创建的 CSV

> ASCII
> 
> 名
> 
> UTF-8
> 
> 利</p>

如您所见，PHP 报告两个文件的编码相同，即使 Windows 文件中的中文字符没有打印到屏幕上。

有人知道这里可能发生什么吗？

**编辑**

如果我在记事本中打开 Windows CSV 文件并另存为.. UTF-8 格式，则文件将正确导入。所以这显然是一个编码问题。如果文件编码尚未设置为 UTF-8，我添加了以下代码来转换文件编码。

```
 $file_contents = file_get_contents($file->uri);
  $file_encoding = mb_detect_encoding($file_contents, 'UTF-8, ISO-8859-1, WINDOWS-1252');
  if ($file_encoding  !== 'UTF-8') {
    $file_contents = iconv($file_encoding, 'UTF-8', $file_contents);
    $handle = fopen($file->uri, 'w');
    fwrite($handle, $file_contents);
    fclose($handle);
  } 
```

这部分解决了问题。字符出现了，但它们是乱码（例如，张显示为 ÕÅ）。我检查了浏览器的页面编码和页面标题，两者都设置为 UTF-8，所以这不是浏览器问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:48:28.047

我为这个问题提出的唯一解决方案是首先不尝试检测和转换上传文件的编码。经过大量研究，似乎并不存在可靠的编码检测。这样做有太多的错误空间。

最安全的选择是确保上传的文件以 UTF-8 编码，因为可以可靠地检测到 UTF-8 编码。以下代码是我如何进行 UTF-8 编码检测。

```
$file_content = file_get_contents($file->uri);
// Create regex pattern which detects UTF-8 encoding.
$regex = '%^(?:
  [\x09\x0A\x0D\x20-\x7E]              # ASCII
  | [\xC2-\xDF][\x80-\xBF]             # non-overlong 2-byte
  | \xE0[\xA0-\xBF][\x80-\xBF]         # excluding overlongs
  | [\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}  # straight 3-byte
  | \xED[\x80-\x9F][\x80-\xBF]         # excluding surrogates
  | \xF0[\x90-\xBF][\x80-\xBF]{2}      # planes 1-3
  | [\xF1-\xF3][\x80-\xBF]{3}          # planes 4-15
  | \xF4[\x80-\x8F][\x80-\xBF]{2}      # plane 16
)*$%xs';
if (!preg_match($regex, $file_content)) {
  // Not valid UTF-8 encoding so flag an error.
} 
```

# android - 在 Android 应用中动态添加单选按钮

> ID：11536802
> 
> 赞同：2
> 
> 时间：2012-07-18T08:01:56.397
> 
> 标签：android

我需要动态添加单选按钮。一个单选按钮可以是 3、4、5 或 6，它将水平添加，一行最多包含 3 个单选按钮。

如果有超过 3 个，那么它会像在网格视图中一样位于上面一行单选按钮的下方。我的单选按钮代码如下，但它在一行中显示所有单选按钮，这意味着它隐藏了单选按钮。

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
 android:orientation="vertical" >

   <TextView
 android:id="@+id/TextView01"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="Choose Your Favorite Actress" >
  </TextView>

 <RadioGroup
android:id="@+id/RadioGroup01"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
 </RadioGroup>
 <Button
android:id="@+id/Button01"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Submit" >
 </Button>
</LinearLayout> 
```

Java类是：

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       DisplayRadioButton();
  }

  public void DisplayRadioButton() {
       for(int i=0;i<10;i++) {
           RadioGroup radiogroup = (RadioGroup)findViewById(R.id.RadioGroup01);
           RadioButton rdbtn = new RadioButton(this);
           rdbtn.setId(i);
           rdbtn.setText(text[i]);
           radiogroup.addView(rdbtn);
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:50:23.600

请尝试以下方式：

1）在您的 xml 中删除**RadioGroup**。通过动态创建它

```
RadioGroup radiogroup[];
RadioButton rdbtn[];
LinearLayout linear[]; 

radiogroup = new RadioGroup[9/3];
rdbtn = new RadioButton[9];
linear = new LinearLayout[9/3];

......
int count = 0; // integer flag

for(int i=0;i<9;i++){

  if the value of i is equal to 3 multiple then increase count by 1
         // sett linear[count]'s orientation is horizontal.

         root_layout.addView(linear[count]);
         radiogroup[count] = new RadioGroup(this);
         linear[count].addView(radiogroup[count]);  // add radio group to linear layout

       add radio button to radio group.

          rdbtn[i] = new RadioButton(this);
          rdbtn[i].addView(radiogroup[count]);

} 
```

我希望你得到解决。注意数组索引越界异常。

您的 xml 可能如下所示：

```
<LinearLayout
           android:id= rootlayout
           ..... // the child linearlayout
                     .. . radio group
                        ... radio button
 </LinearLayout> 
```

# asp.net - Xenu 斜线重定向

> ID：11536805
> 
> 赞同：0
> 
> 时间：2012-07-18T08:02:11.483
> 
> 标签：asp.net, seo, xenu

我正在使用我的网站检查与 Xenu 断开的链接，它没有正确解释服务器端重定向。

我已经使用 asp.net 构建了我的网站，并使用了服务器端方向，如下所示客户端从该页面重定向

> [http://mysite.com/ordermanagement/ordersequence/OrderFormRedirector.aspx](http://mysite.com/ordermanagement/ordersequence/OrderFormRedirector.aspx)

从服务器端到 /signup/newclientsignup.aspx?pt=0&pkc=0&pkt=0 呈现为

> [http://mysite.com/signup/newclientsignup.aspx?pt=0&pkc=0&pkt=0](http://mysite.com/signup/newclientsignup.aspx?pt=0&pkc=0&pkt=0)

但Xenu将其解释如下

> [http://mysite.com/ordermanagement/ordersequence/%2fsignup%2fnewclientsignup.aspx%3fpt=0&pkc=0&pkt=0](http://mysite.com/ordermanagement/ordersequence/%2fsignup%2fnewclientsignup.aspx%3fpt=0&pkc=0&pkt=0)

# html - html 列，其宽度会根据其内容自动更改

> ID：11536806
> 
> 赞同：2
> 
> 时间：2012-07-18T08:02:14.833
> 
> 标签：html, css, html-table

我创建具有 3 列的动态 HTML 页面。每列可以包含可变数量的文本 - 从 0 到 1000 个单词。我希望 3 列中的文本看起来大致相同的高度。所以，我想让列宽根据它们包含的文本量自动改变。

在 HTML 中，这会在表格中自动发生，当每个单元格都有一个文本 div 时，请参见此处的第一个表格：http: [//tora.us.fm/_script/demotables.html](http://tora.us.fm/_script/demotables.html)

但是，当单元格包含多个 div 时，这将不再起作用，请参见那里的第二个表。最左边的柱子非常窄和高，而不是更宽和更短。

向最左侧的列添加“宽度”属性（通过单击按钮）显示预期结果。但是，我事先不知道什么列应该是什么宽度。

可以自动调整吗？

一个jsfiddle：http: [//jsfiddle.net/erelsgl/RJa2k/5/](http://jsfiddle.net/erelsgl/RJa2k/5/)

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:01:44.543

尝试将 this`td div{white-space: nowrap}`或 this添加到 css`td div{display: inline}`中。这是你需要的结果吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:30:40.577

在我的朋友 Eden Erez 的帮助下，我发现了一个可以部分解决问题的 hack：

*   在每个 TD 中，再次打印内容 - 在一个特殊的 div 中，如下所示：

    ```
    < td >
     < div class='autowidth' >
         $content
     < /div >
     $content
    < /td > 
    ```

*   在样式表中，插入：

    ```
    .autowidth {visibility:hidden;}
    .autowidth * {display:inline;} 
    ```

在某些情况下，这将使浏览器将列宽设置为好像它们是单段落一样，但仍将它们显示为多段落。在此处查看示例：http: [//jsfiddle.net/erelsgl/RJa2k/76/](http://jsfiddle.net/erelsgl/RJa2k/76/)

在大多数情况下，这非常有效。`

# c++-cli - c++/cli 接口覆盖的显式实现

> ID：11536808
> 
> 赞同：3
> 
> 时间：2012-07-18T08:02:20.887
> 
> 标签：c++-cli

我有两个接口：

```
public interface I1
{
    A MyProperty { get; set; }
}

public interface I2 : I1
{
    new B MyProperty { get; set; }
} 
```

在 C# 中，我可以像这样显式实现：

```
public class C : I1, I2
{
    public B MyProperty { get; set; }
    A I1.MyProperty { get; set; }
} 
```

不知何故，我必须在 c++/cli 项目中使用这些接口。那么，我怎样才能在 c++/cli 中实现呢？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T07:05:02.483

我自己解决了。它应该是：

```
public ref class C : I1, I2
{
public:
    virtual property B^ MyProperty
    {
        B^ get() { ... }
        void set(B^ value) { ... }
    }

 protected:
     virtual property A^ DummyProperty
     {
         A^ get() = I1::MyProperty::get { return nullptr; }
         void set(A^ value) = I1::MyProperty::set { }
     }
 } 
```

# javascript - CollapsiblePanelExtender：无法在页面的 onLoad 中获取对象（AJAX 工具包）

> ID：11536810
> 
> 赞同：0
> 
> 时间：2012-07-18T08:02:31.833
> 
> 标签：javascript, dom-events, ajaxcontroltoolkit

我需要为`CollapsiblePanelExtender`页面的 Javascript 页面加载添加一个 Javascript 事件。以下是 的定义`CollapsiblePanelExtender`：

```
 <cc1:CollapsiblePanelExtender ID="cpe" runat="Server" TargetControlID="pnlInstances" 
     BehaviorID="cpe" ImageControlID="lnkWebroleAction" ExpandedImage="~/App_Themes/Default/images/MonitorDownArrow16.png"CollapsedImage="~/App_Themes/Default/images/MonitorLeftArrow16.png" 
     CollapsedSize="0" Collapsed="false" ExpandControlID="lnkWebroleAction" CollapseControlID="lnkWebroleAction"
     AutoCollapse="false" AutoExpand="false" ExpandDirection="Vertical" SuppressPostBack="true" /> 
```

以下是我正在执行的 Javascript 代码：

```
window.onload = pageLoad1();
    function pageLoad1() {$find("cpe").add_expandComplete(coll_ExpandedComplete);                                
    } 
```

问题是`$find("cpe")`在此事件上返回 null。如果我从按钮单击执行相同的功能，我可以找到该对象。
我可以使用哪些其他的 Javascript 加载事件？我试过了`$(documnt).ready`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:57:12.280

您没有将`pageLoad1`函数分配给`window.onload`，而是立即调用它并分配*它返回的值*（即`undefined`）。

你必须写：

```
window.onload = pageLoad1;  // No parenthesis.
function pageLoad1() {
    $find("cpe").add_expandComplete(coll_ExpandedComplete);
} 
```

或者，也可以编写一个[pageLoad()](http://msdn.microsoft.com/en-us/library/bb386417.aspx)函数，当页面完成加载时，框架会自动调用该函数：

```
function pageLoad() {
    $find("cpe").add_expandComplete(coll_ExpandedComplete);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:15:53.193

我同意 OP；（正如原始回答者指出的那样）原始帖子中有一个错误，足以使它看起来这里没有真正的问题；但我有一个复杂的 JS/Ajax 驱动页面，以及一些代码试图通过它们的 BehaviorID 在 /is/ 在 PageLoad 上调用的 JS 函数中获取一些 ASP.NET Ajax CollapsiblePanelExtender 对象。

这些对象通常已准备好，但有时还没有；如果尝试稍微延迟（100 毫秒）运行代码，它们就准备好了。但是耽误一段固定时间也不是很好；我可以使用什么事件来知道这些 ASP.NET Ajax 对象已经完成了自己的构建？

# java - 仅加载一次 url

> ID：11536815
> 
> 赞同：0
> 
> 时间：2012-07-18T08:02:42.327
> 
> 标签：java, spring-mvc

我有一个要加载的 url 表，该表可以有一个或多个时间的 url。

例如，一个具有三个值的表：url1、url2 url1。

所以，之后，我加载了一个 url，一个他的 html 片段的提取（例如 a ）。

我有这个 ：

```
 HtmlPage page=null;

for (int i = 0; i < tableUrlSource.length; i++) {
try {
                page = webClient.getPage(tabUrlSource[i]);
                List<HtmlElement> nbElements = (List<HtmlElement>) page.getByXPath(tabXpathSource[i]);
                if (null != nbElements && !nbElements.isEmpty()) {
                    htmlResult = nbElements.get(0).asText();

    }

... 
```

但这并不是更高效，因为它会加载 url1 两次和 url 一次。所以它会喜欢有三个 url 来加载，然后，使处理时间更长。

如何只加载一次 url 并保持相同的最终结果？

我希望我的英语很清楚，所以我的问题。

问候。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:08:05.000

您可以使用 a`Set<HtmlElement>`而不是 a `List`。这将自动删除重复项。

这当然取决于`HtmlElement`s 具有可比性这一事实。如果不是，您可以改为将所有 URL 添加到 a 中`Set<String>`，然后对其进行迭代。

***更新***

澄清第二部分：

A[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)在 Javadocs 中是这样声明的：

> 不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

换句话说，为了确保没有重复，它依赖于通过该`equals()`方法可比较的元素。如果`HtmlElement`没有重写此方法，`Set`则将仅使用该`Object.equals()`方法，该方法仅比较对象引用而不是`HtmlElements`.

但是，`String`已经覆盖了该`equals()`方法，因此您可以确定重复`String`的 s 将从 a 中删除`Set<String>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:19:45.927

Keppil 的回答是正确的，但您必须使用 Set 代替 tabUrlSource[i] 而不是 for`Set<HtmlElement>`

编辑：好的，tabUrlSource[i] 的内容是什么？它是 URL 类型还是自定义类型？如果它是 URL，这就是它的样子

```
 Set <URL>uniqueURLs = new HashSet <URL>();

  for (int i = 0; i < tableUrlSource.length; i++) { 
  uniqueURLs.add(tableUrlSource[i])
  } 
```

然后像这样迭代这个 Set 而不是 tableUrlSource 数组

```
 for(Iterator itr = uniqueURLs.iterator(); itr.hasNext();  ){
   page = webClient.getPage((URL)itr.next());
    .............
    ............. 
```

继续剩下的代码

您还说您正在使用索引“i”来关联 url 和 xpath。对于相同的 url，xpath 是否相同？如果是这样，您可以使用 HashMap 而不是将键作为 URL，将值作为 xpath，以便覆盖重复的键。然后你可以遍历这个 hashmap 键来获取'page'并使用'value'来获取 HTMLELEMENT

如果它们不相同，您仍然可以使用这样的 HashSet

```
 Set <URL>uniqueURLs = new HashSet <URL>();
      HtmlPage page=null;

   for (int i = 0; i < tableUrlSource.length; i++) {
   try {    
            if(uniqueURLs.contains(tabUrlSource[i]) continue;
            else
             uniqueURLs.add( tabUrlSource[i] );
            page = webClient.getPage(tabUrlSource[i]);
            List<HtmlElement> nbElements = (List<HtmlElement>) 
            page.getByXPath(tabXpathSource[i]);
            if (null != nbElements && !nbElements.isEmpty()) {
                htmlResult = nbElements.get(0).asText();

} 
```

希望这可以帮助 ：）

# java - WebResource accept() 在发布（运行）模式下 java over jetty 不工作使用 Jersey 框架

> ID：11536816
> 
> 赞同：1
> 
> 时间：2012-07-18T08:02:42.447
> 
> 标签：java, jetty, jersey

**我正在尝试使用 Jersey 框架通过码头服务器连接到 Google Cloud Messaging（GCM）服务器。** 它在调试模式下运行良好，但在我正常运行时失败。这是与 GCM 建立连接的代码：

```
WebResource r = client.resource("https://android.googleapis.com/gcm/send");
response = r.accept(
           MediaType.APPLICATION_JSON).
           header("Content-Length", ""+sPostData.length()).
           header("Authorization", "key="+sAPIKey).
           header("Keep-Alive", "false").
           entity(sPostData).
           post(String.class);
System.out.println("response:"+response); 
```

控制永远不会出现在最后一行。 **它在调试模式下运行良好，使用码头服务器的发布（运行）模式存在问题** 有人可以就为什么会发生这种情况提出建议吗？请提供您对此的想法。

# xml - 遗留未知值的 xsd 模式选择

> ID：11536821
> 
> 赞同：1
> 
> 时间：2012-07-18T08:02:59.693
> 
> 标签：xml, xsd, schema, choice

我正在尝试提出一个架构，该架构允许 xml 指定由于遗留原因而未知的元素，而不仅仅是使元素成为非强制性的。

例如：

```
<personName>John</personName> 
```

有效但

```
<personName></personName> 
```

无效但

```
<personName><legacyUnknown /></personName> 
```

已验证。

无论元素 personName 的复杂性如何，这都应该有效。有时它可能是一个带有字符串限制的简单类型，有时它可能是一个复杂元素。

```
<choice>
    <element name="personName" type="name" />
    <element name="personName" type="legacyUnknown" />
</choice>
<simpleType name="name">
<restriction base="string">
...enum values
</restriction>
</simpleType> 
```

会很棒，但据我所知，你不能这样做。我知道这可以通过替换组来完成，但在我看来，我必须在我希望应用到的每种类型上放置用于构建子组的详细代码。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:57:30.777

您可以决定将“遗留未知”语义附加到原本相当无用的 xsi:nil 构造。然后，您将架构中的元素定义为 nillable，并使用 xsi:nil="true" 标记实例，以使用“legacy unknown”捕获您想要的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:17:07.280

如果应根据文档的上下文（如客户端请求与服务器响应）应用限制，您可以考虑以下内容：

```
 <xs:element name="request">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="personName" type="PersonName"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="response">
    <xs:complexType>
        <xs:sequence>
            <xs:element minOccurs="0" name="personName" type="PersonName"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:simpleType name="PersonName">
    <xs:restriction base="xs:string">
        <xs:minLength value="1"/>
    </xs:restriction>
</xs:simpleType> 
```

# c++ - 字符串作为函数参数：如何使用内存？

> ID：11536823
> 
> 赞同：1
> 
> 时间：2012-07-18T08:02:59.467
> 
> 标签：c++

```
void foo(const char* s) { }
foo("bar"); 
```

1.  内存在哪里`bar`释放？
2.  在函数参数中使用匿名字符串最舒适且无内存泄漏的做法是什么？（我知道不应该有魔法字符串，只是好奇。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T08:06:55.587

在您的示例中，参数是一个字符串文字，它具有静态生命周期，并且永远不会被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:07:20.810

“bar”在数据部分中定义，地址将在您拥有的所有地方替换它。将使用指向该地址的指针调用 foo 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:06:26.850

bar 的内存是在编译时分配的。因此，它永远不必被释放。

c++ 二进制文件中有不同的部分。一些示例是文本（存储代码的位置）、堆栈和堆。还有一段只读静态内存。我相信这是存储字符串的地方。

由于字符串不在堆上，因此不需要释放它。

# c# - 如何获取 ID 以从表中删除此项目？

> ID：11536824
> 
> 赞同：0
> 
> 时间：2012-07-18T08:03:02.607
> 
> 标签：c#, asp.net

我正在尝试开发一个动态表，用户可以在其中直接添加新行。我现在在代码隐藏中有一个问题，用于获取插入问题的 ID，但我不知道如何获取它。那么如何获得呢？

仅供参考，我拥有的数据库设计如下：问题表：QuestionID、Question、QuestionOrder、AnswerExplanation

ASP.NET 代码：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
        <ContentTemplate>
        <asp:Table ID="questionsList" runat="server" Width="50%" CellPadding="0" CellSpacing="0"
                    style="border:2px solid #003366; font-size:17px; font-weight:bold;">
        </asp:Table>

        <asp:Table ID="Table1" runat="server" Width="50%" CellPadding="0" CellSpacing="0"
                    style="border:2px solid #003366;">
            <asp:TableFooterRow>
                <asp:TableCell>Add</asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox ID="txtQuestion" runat="server"></asp:TextBox>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TBWE" runat="server"
                                    TargetControlID="Question" WatermarkText="Type the Question here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>
                <asp:TableCell>
                    <span style="margin:3px 10px 0px 0px;">
                        <asp:ImageButton ID="addButton" runat="server" ImageUrl="Images/tick_small.png" OnClick="addQuestion" />
                    </span>
                </asp:TableCell>
            </asp:TableFooterRow>
        </asp:Table>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

代码隐藏：

```
public void fill_Questions()
    {
        string connString = ConfigurationManager.ConnectionStrings["QuizSysDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string selectQuery = "SELECT * FROM Questions";
        SqlCommand cmd = new SqlCommand(selectQuery, conn);
        DataSet ds = new DataSet();
        SqlDataAdapter sda = new SqlDataAdapter();
        sda.SelectCommand = cmd;

        Table table = (Table)UpdatePanel1.FindControl("questionsList");
        try
        {
            //open the connection
            conn.Open();
            //filling the dataset with the data
            sda.Fill(ds);
            //close the connection
            conn.Close();
        }
        catch
        {
            table.Rows.Clear();
        }

        //Loading the data into the table
        if (ds.Tables.Count > 0)
        {
            int rowsNum = ds.Tables[0].Rows.Count;
            for (int i = 0; i < rowsNum; i++) 
            {
                TableRow row = new TableRow();
                table.Rows.Add(row);

                for (int colCount = 0; colCount < 4; colCount++)
                {
                    TableCell cell = new TableCell();
                    row.Cells.Add(cell);

                    if (colCount == 0)
                    {
                        int n = i + 1;
                        cell.Controls.Add(new LiteralControl(n.ToString()));
                    }
                    else if (colCount == 1)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["Question"].ToString()));
                    }
                    else if (colCount == 2)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["QuestionOrder"].ToString()));
                    }
                    else if (colCount == 3)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["AnswerExplanation"].ToString()));
                    }
                    else if (colCount == 4)
                    {
                        ImageButton deleteButton = new ImageButton();
                        deleteButton.ImageUrl = "Images/DeleteRed.png";
                        deleteButton.ID = ds.Tables[0].Rows[i]["Question"].ToString() + "_" + i;
                        deleteButton.Click += new ImageClickEventHandler(deleteQuestion);
                        cell.Controls.Add(deleteButton);

                    }
                } //End for loop
            }//End OUTER for loop

        }//End if statement

    }

    //For deleting question
    public void deleteQuestion(object sender, EventArgs e) 
    {
        //int id = System.Convert.ToInt32((ImageButton)sender.ToString().Split()[0]);
        try 
        {
            string connString = ConfigurationManager.ConnectionStrings["QuizSysDB"].ConnectionString;
            SqlConnection conn = new SqlConnection(connString);
            string deleteQuery = "DELETE FROM Question WHERE ID = @id";
            SqlCommand cmd = new SqlCommand(deleteQuery,conn);
            cmd.Parameters.AddWithValue("@id", ID);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
            fill_Questions();
        }
        catch(SqlException se){}
    } 
```

我现在的问题正是 deleteQuestion 方法中的以下行：

```
 //int id = System.Convert.ToInt32((ImageButton)sender.ToString().Split()[0]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:12:26.043

您可以通过这种方式获取 imagebutton id

```
int id = System.Convert.ToInt32((ImageButton)sender.ToString().Split('_')[1]); 
```

# objective-c - UITableViewCell 和 UITextField 的滚动问题

> ID：11536825
> 
> 赞同：0
> 
> 时间：2012-07-18T08:03:09.640
> 
> 标签：objective-c, ios, uitableview, uitextfield

我的 UITableViewCells 有点问题。我的 tableView 中有 5 个具有不同行数的部分。我为每一行添加了一个包含 UITextfield 的子视图。我遇到的问题是，当我滚动时，我的单元格子视图正在发生变化。我拍了一个视频，所以你可以明白我的意思。

[http://files.beger.org/Scolling_Issue18072012.swf](http://files.beger.org/Scolling_Issue18072012.swf)

抱歉，全是德语：）

这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

// Add a UITextFiel
    if ([indexPath section] == 0) {
        UITextField *textFieldName = [[UITextField alloc] initWithFrame:CGRectMake(120, 10, 185, 30)];
        textFieldName.adjustsFontSizeToFitWidth = YES;
        textFieldName.textColor = [UIColor blackColor];
        if ([indexPath row] == 0) {
            textFieldName.placeholder = @"Max";
            textFieldName.keyboardType = UIKeyboardTypeDefault;
            textFieldName.returnKeyType = UIReturnKeyDone;
        }
        else {
            textFieldName.placeholder = @"Mustermann";
            textFieldName.keyboardType = UIKeyboardTypeDefault;
            textFieldName.returnKeyType = UIReturnKeyDone;
        }       
        textFieldName.backgroundColor = [UIColor clearColor];
        textFieldName.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
        textFieldName.autocapitalizationType = UITextAutocapitalizationTypeWords; // no auto capitalization support
        textFieldName.textAlignment = UITextAlignmentLeft;
        textFieldName.tag = 0;
        //playerTextField.delegate = self;

        textFieldName.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
        [textFieldName setEnabled: YES];

        [cell addSubview:textFieldName];

        [textFieldName release];
    }
    else if ([indexPath section] == 1) {
        UITextField *textFieldContactData = [[UITextField alloc] initWithFrame:CGRectMake(120, 10, 185, 30)];
        textFieldContactData.adjustsFontSizeToFitWidth = YES;
        textFieldContactData.textColor = [UIColor blackColor];
        if ([indexPath row] == 0) {
            textFieldContactData.placeholder = @"04132 21123 321";
            textFieldContactData.keyboardType = UIKeyboardTypePhonePad;
        }
        else if ([indexPath row] == 1) {
            textFieldContactData.placeholder = @"04132 21123 300";
            textFieldContactData.keyboardType = UIKeyboardTypePhonePad;
        }
        else if ([indexPath row] == 2) {
            textFieldContactData.placeholder = @"0150 12543 101";
            textFieldContactData.keyboardType = UIKeyboardTypePhonePad;
        }
        else if ([indexPath row] == 3) {
            textFieldContactData.placeholder = @"beispiel@musterfirma.de";
            textFieldContactData.keyboardType = UIKeyboardTypeEmailAddress;
            textFieldContactData.returnKeyType = UIReturnKeyDone;
        }
        else if ([indexPath row] == 4) {
            textFieldContactData.placeholder = @"www.musterfirma.de";
            textFieldContactData.keyboardType = UIKeyboardTypeURL;
            textFieldContactData.returnKeyType = UIReturnKeyDone;
        }
        else {
            textFieldContactData.placeholder = @"Deutsch";
            textFieldContactData.keyboardType = UIKeyboardTypeDefault;
            textFieldContactData.returnKeyType = UIReturnKeyDone;
        }
        textFieldContactData.backgroundColor = [UIColor clearColor];
        textFieldContactData.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
        textFieldContactData.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
        textFieldContactData.textAlignment = UITextAlignmentLeft;
        textFieldContactData.tag = 0;
        //playerTextField.delegate = self;

        textFieldContactData.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
        [textFieldContactData setEnabled: YES];

        [cell addSubview:textFieldContactData];

        [textFieldContactData release];
    }
    // Adresse
    else if ([indexPath section] == 2) {
        UITextField *textFieldAddress = [[UITextField alloc] initWithFrame:CGRectMake(120, 10, 185, 30)];
        textFieldAddress.adjustsFontSizeToFitWidth = YES;
        textFieldAddress.textColor = [UIColor blackColor];
        if ([indexPath row] == 0) {
            textFieldAddress.placeholder = @"Musterstr. 10";
            textFieldAddress.keyboardType = UIKeyboardTypeDefault;
            textFieldAddress.autocapitalizationType = UITextAutocapitalizationTypeWords;
        }
        else if ([indexPath row] == 1) {
            textFieldAddress.placeholder = @"50000";
            textFieldAddress.keyboardType = UIKeyboardTypeDefault;
        }
        else if ([indexPath row] == 2) {
            textFieldAddress.placeholder = @"Musterstadt";
            textFieldAddress.keyboardType = UIKeyboardTypeDefault;
            textFieldAddress.autocapitalizationType = UITextAutocapitalizationTypeWords;
        }
        else {
            textFieldAddress.placeholder = @"Deutschland";
            textFieldAddress.keyboardType = UIKeyboardTypeDefault;
            textFieldAddress.autocapitalizationType = UITextAutocapitalizationTypeWords;
        }
        textFieldAddress.backgroundColor = [UIColor clearColor];
        textFieldAddress.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
        textFieldAddress.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
        textFieldAddress.textAlignment = UITextAlignmentLeft;
        textFieldAddress.tag = 0;
        //playerTextField.delegate = self;

        textFieldAddress.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
        [textFieldAddress setEnabled: YES];

        [cell addSubview:textFieldAddress];

        [textFieldAddress release];
    }
    // Abteilung und Funktion
    else if ([indexPath section] == 3) {
        UITextField *textFieldFunction = [[UITextField alloc] initWithFrame:CGRectMake(120, 10, 185, 30)];
        textFieldFunction.adjustsFontSizeToFitWidth = YES;
        textFieldFunction.textColor = [UIColor blackColor];
        if ([indexPath row] == 0) {
            textFieldFunction.placeholder = @"Einkauf";
            textFieldFunction.keyboardType = UIKeyboardTypeDefault;
            textFieldFunction.autocapitalizationType = UITextAutocapitalizationTypeWords;
        }
        else {
            textFieldFunction.placeholder = @"Einkaufsleiter";
            textFieldFunction.keyboardType = UIKeyboardTypeDefault;
            textFieldFunction.autocapitalizationType = UITextAutocapitalizationTypeWords;
        }
        textFieldFunction.backgroundColor = [UIColor clearColor];
        textFieldFunction.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
        textFieldFunction.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
        textFieldFunction.textAlignment = UITextAlignmentLeft;
        textFieldFunction.tag = 0;
        //playerTextField.delegate = self;

        textFieldFunction.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
        [textFieldFunction setEnabled: YES];

        [cell addSubview:textFieldFunction];

        [textFieldFunction release];
    }
    // Kundenbeziehung
    else if ([indexPath section] == 4) {
        UITextField *textFieldCustomer= [[UITextField alloc] initWithFrame:CGRectMake(120, 10, 185, 30)];
        textFieldCustomer.adjustsFontSizeToFitWidth = YES;
        textFieldCustomer.textColor = [UIColor blackColor];
        textFieldCustomer.placeholder = @"Musterfirma AG";
        textFieldCustomer.keyboardType = UIKeyboardTypeDefault;
        textFieldCustomer.backgroundColor = [UIColor clearColor];
        textFieldCustomer.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
        textFieldCustomer.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
        textFieldCustomer.textAlignment = UITextAlignmentLeft;
        textFieldCustomer.tag = 0;

        textFieldCustomer.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
        [textFieldCustomer setEnabled: YES];

        [cell addSubview:textFieldCustomer];

        [textFieldCustomer release];
    }
    // Lieferantenbeziehung
    else {
        UITextField *textFieldSupplier= [[UITextField alloc] initWithFrame:CGRectMake(120, 10, 185, 30)];
        textFieldSupplier.adjustsFontSizeToFitWidth = YES;
        textFieldSupplier.textColor = [UIColor blackColor];
        textFieldSupplier.placeholder = @"Lieferanten AG";
        textFieldSupplier.keyboardType = UIKeyboardTypeDefault;
        textFieldSupplier.backgroundColor = [UIColor clearColor];
        textFieldSupplier.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
        textFieldSupplier.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
        textFieldSupplier.textAlignment = UITextAlignmentLeft;
        textFieldSupplier.tag = 0;

        textFieldSupplier.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
        [textFieldSupplier setEnabled: YES];

        [cell addSubview:textFieldSupplier];

        [textFieldSupplier release];
    }
}
if ([indexPath section] == 0) {
    if ([indexPath row] == 0) { 
        // Vorname
        cell.textLabel.text = @"Vorname";
    }
    else {
        // Nachname
        cell.textLabel.text = @"Nachname";
    }
}
// Kontaktdaten
else if ([indexPath section] == 1) {
    if ([indexPath row] == 0) { 
        cell.textLabel.text = @"Telefon";
    }
    else if ([indexPath row] == 1) {
         cell.textLabel.text = @"Fax";
    }
    else if ([indexPath row] == 2) {
        cell.textLabel.text = @"Mobil";
    }
    else if ([indexPath row] == 3) {
        cell.textLabel.text = @"E-Mail";
    }
    else if ([indexPath row] == 4) {
        cell.textLabel.text = @"WWW";
    }
    else {
        cell.textLabel.text = @"Sprache";
    }
}
// Adresse
else if ([indexPath section] == 2) {
    if ([indexPath row] == 0) { 
        cell.textLabel.text = @"Straße";
    }
    else if ([indexPath row] == 1) {
        cell.textLabel.text = @"PLZ";
    }
    else if ([indexPath row] == 2) {
        cell.textLabel.text = @"Ort";
    }
    else {
        cell.textLabel.text = @"Land";
    }
}
// Section Abteilung und Funktion
else if ([indexPath section] == 3) {
    if ([indexPath row] == 0) { 
        cell.textLabel.text = @"Abteilung";
    }
    else {
        cell.textLabel.text = @"Funktion";
    }
}
// Section Kundenbeziehung
else if ([indexPath section] == 4) {
        cell.textLabel.text = @"Kunde";
}
// Section Lieferantenbeziehung
else {
    cell.textLabel.text = @"Lieferant";
}
return cell; 
```

}

我认为当我重用它们时，这些单元格无法存储我的数据/子视图。有没有办法解决这个问题？

谢谢！克里斯托夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:22:59.547

dequeueReusableCellWithIdentifier 返回可重用单元格（如果有）。这意味着如果某些单元格不可见，iOS 将不会再次创建 UITableViewCell。它将直接返回使用的单元格。它使性能更好，内存利用率低。

因此，当您确定单元格为 nil 时，您应该创建一个单元格和文本字段。将文本文件添加为单元格的子视图。

单元格之外为 nil，您应该提供 textfiled 的其他属性。你对 cell.textLable.text 做了同样的事情。您还需要为 textfiled 进行相同的练习。要获取文本字段，请在添加时添加标签。使用该标签，您可以取回 textField。

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

// Add a UITextFiel
    if ([indexPath section] == 0) {
        UITextField *textFieldName = [[UITextField alloc] initWithFrame:CGRectMake(120, 10, 185, 30)];
        textFieldName.adjustsFontSizeToFitWidth = YES;
        textFieldName.textColor = [UIColor blackColor];
        textFieldName.tag = 25;
        if ([indexPath row] == 0) {
            textFieldName.placeholder = @"Max";
            textFieldName.keyboardType = UIKeyboardTypeDefault;
            textFieldName.returnKeyType = UIReturnKeyDone;
 textFieldName.backgroundColor = [UIColor clearColor];
        textFieldName.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
        textFieldName.autocapitalizationType = UITextAutocapitalizationTypeWords; // no auto capitalization support
        textFieldName.textAlignment = UITextAlignmentLeft;
[cell addSubview:textFieldName];

        [textFieldName release];
        }
    }
}

//Here fetch the textFiled..
UITextFiled *tField = [cell viewWithTag:25];
//Identify row, section and do other operations like setting text, place holder etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:19:23.377

如果单元格是新创建的单元格，则仅添加 UITextView，因此如果重新使用该单元格，则 UITextview 也会被重新使用。要解决这个问题，您可以：

将所有 UITextView 创建代码移出 if (cell == nil) 语句

或者

当您设置 cell.textlabel.text 时，找到一种访问已添加到单元格的 textview 的方法（使用 tag 属性，或循环遍历子视图）并对其进行更改。

希望这可以帮助。

# sql - 如何创建一个 SQL 触发器来复制另一个表中的选择？

> ID：11536828
> 
> 赞同：0
> 
> 时间：2012-07-18T08:03:19.130
> 
> 标签：sql, sql-server-2008, triggers

您好，我创建了一个 SQL 触发器，它复制已编辑的行并设置一个新 ID。还有另一个由 id 连接的表。我很难解释我给你一个例子：

表 1 与产品：

```
ID           BEZEICHNUNG            PREIS

45           Coffee                 5,60
46           Tea                    2,20 
```

表 2 从 Room 到产品的连接：

```
ProductID          RoomID
45                 11
45                 46
46                 48
46                 41 
```

当我更新表 1 中第一行的价格时，触发器会创建一个具有新 ID 的新行，如下所示：

```
ID           BEZEICHNUNG            PREIS

45           Coffee                 5,60
46           Tea                    2,20
47           Coffee                 4 
```

我的目标是将属于旧行的所有房间 id 的新 id 插入到表 2 中。

它应该如下所示：

```
ProductID          RoomID
45                 11
45                 46
46                 48
46                 41
47                 11
47                 46 
```

我当前的触发器如下所示：

```
ALTER TRIGGER [dbo].[DIENSTLEISTUNG_UPDATE]
   ON [dbo].[DIENSTLEISTUNG]
   INSTEAD OF UPDATE
AS
BEGIN
      SET  NOCOUNT ON;

    INSERT INTO [DIENSTLEISTUNG] (BEZEICHNUNG, MENGENEINHEIT, 
        PREIS, BESCHREIBUNG, VORLAUFZEIT,
        AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
        AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
        UPDATE_USER, UPDATE_DATE, RUESTZEIT,
        PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
        ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,FLAG)

    SELECT  BEZEICHNUNG, MENGENEINHEIT, 
        PREIS, BESCHREIBUNG, VORLAUFZEIT,
        AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
        AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
        UPDATE_USER,GETDATE(),RUESTZEIT,
        PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
        ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,
        0 
    FROM INSERTED

    UPDATE  DIENSTLEISTUNG
    SET     FLAG = 1 
    FROM    DIENSTLEISTUNG 
            INNER JOIN INSERTED
                ON INSERTED.ID = DIENSTLEISTUNG.ID
SET  NOCOUNT OFF;      
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:29:27.977

在触发器中，插入后添加

```
 SELECT @intNewID = Scope_Identity() 
```

这将获取新插入产品的 ID

```
 INSERT table2 (ProductID, RoomID)  
 SELECT @intNewID, RoomID
 FROM deleted
      INNER JOIN table2 on deleted.productid=table2.productid 
```

这会从已删除的产品中获取链接到旧产品的产品，并复制它们

# ios - iOS在webview中检索缓存

> ID：11536835
> 
> 赞同：0
> 
> 时间：2012-07-18T08:03:43.870
> 
> 标签：ios, caching, webview

我有一个 webview 来显示 web 内容，比如说 google.com。我用

```
NSURLRequest *request = [NSURLRequest requestWithURL:url 
                                         cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30];
[storeWebView loadRequest:request]; 
```

在 viewDidLoad 函数上。但是当我单击网页中的另一个按钮（不是 UIButton）时，如何“保存”缓存，当我单击另一个按钮或后退按钮时，它会找到并检索缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:58:04.857

我的理解是系统会为你缓存页面，如果你再次使用相同的请求，它会首先在系统缓存中查找，如果页面在那里，它会从缓存中加载它......

清除缓存，使用`[[NSURLCache sharedURLCache] removeAllCachedResponses];`

如果您想要更多控制，请查看[NSURLCache 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html)

# doctrine-orm - Doctrine2，在persist之前更新一些数据

> ID：11536837
> 
> 赞同：1
> 
> 时间：2012-07-18T08:03:46.147
> 
> 标签：doctrine-orm, persist

我正在使用 Doctrine2 开发我的 php 软件。使用它非常简单，但我有一个小问题，我会知道在这种情况下什么是最佳实践。也许你可以帮助我！你会得到我所有的感激:-D

**情况 ：**

我有 2 个实体（用户和联系人）

*   一个用户可以包含一些联系人
*   实体（表）联系人有一个标记为 mainContact 的字段，该字段定义它是否是用户的主要联系人。
*   只有一个联系人可以是主要联系人（mainContact=1）

**有问题的：**

当我坚持联系时，我会喜欢这样：

*   如果此联系人的 mainContact=1，则与该用户关联的所有其他联系人都应更新为 mainContact=0
*   如果此联系人的 mainContact=0，我需要检查所有其他联系人。如果我没有找到该用户的 mainContact=1 的任何其他联系人，我会自动使用 setMainContact(true) 更新当前联系人。

**可能的解决方案 ：**

我对如何处理这个逻辑有一些想法，但我想知道为了编写好的代码的最佳实践，因为这个应用程序将是一个开源应用程序。

不干净的想法：

*   在联系人存储库中创建一个方法，该方法将更新分配给用户的所有其他联系人，并将值返回给当前联系人的属性。

使用此解决方案，我必须始终先启动存储库方法才能在应用程序周围保持联系。如果我忘记启动它，数据库完整性应该会受到影响。

*   使用实体的 Prepersist 机制获取实体管理器并更新所有其他用户的联系人。

不推荐使用此方法，实体不应直接访问实体管理器。

谁能告诉我这样做的最佳做法是什么？非常感谢你 ！

**PS：**对不起我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:39:21.477

您可以在这里做的最好的事情（从纯 OOP 的角度来看，甚至没有持久性逻辑）是在实体的设置器中实现此逻辑。毕竟，考虑到 a`User`不会有很多的逻辑并不重`contacts`，也不会经常发生操作。

```
<?php

class User
{
    protected $contacts;

    // constructor, other fields, other methods

    public function addContact(Contact $contact)
    {
        if ($this->contacts->contains($contact)) {
            return;
        }

        if ($contact->isMainContact()) {
            foreach ($this->contacts as $existingContact) {
                $existingContact->setMainContact(false);
            }

            $this->contacts->add($contact);
            $contact->setUser($this); // set the owning side of the relation too!
            return;
        }

        $mainContact = true;

        foreach ($this->contacts as $existingContact) {
            if ($existingContact->isMainContact()) {
                $mainContact = false;
                break; // no need for further checks
            }
        }

        $contact->setMainContact($mainContact);
        $this->contacts->add($contact);
        $contact->setUser($this); // set the owning side of the relation too!
    }
} 
```

另一方面，考虑为您的用户添加一个字段：

```
<?php

class User
{
    // keep reference here instead of the contact (cleaner)
    protected $mainContact;
} 
```

# git - Get file names which modified the particular string?

> ID：11536841
> 
> 赞同：2
> 
> 时间：2012-07-18T08:03:55.993
> 
> 标签：git

I need a list of files which added/removed the string "textXYZ" in the project history.

```
git log -S"testXYZ" 
```

gives me the list of commits which introduce or remove an instance of the string "testXYZ".

Unfortunately each of those commits have more than 10 files.

How do I get a particular file(s) which introduce or remove the string in the commit?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:42:11.643

Add the `--stat` option:

```
git log -S"testXYZ" --stat 
```

Or to get the diffs, add `--patch`.

# linq - System.IObservable to System.IObservable >

> ID：11536847
> 
> 赞同：2
> 
> 时间：2012-07-18T08:04:30.813
> 
> 标签：linq, system.reactive

How can I convert `System.IObservable<string>` to `System.IObservable<System.Collections.Generic.List<string>>`?

```
public static IObservable<List<string>> GetUrlList(Uri url) {
  var result = (from request in Observable.Return(GetWebRequest(url, false))
    from response in Observable.FromAsyncPattern<WebResponse>(
    request.BeginGetResponse, request.EndGetResponse)()
      from item in GetUrlCollection(response).ToObservable()
    select item);
  return result;
} 
```

Here the type of the item is "list of string". I need to convert that to `IObservable List of strings`. How can I achieve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:07:55.070

Try this:

```
public static IObservable<List<string>> GetUrlList(Uri url)
{
    var result = (
        from request in Observable.Return(
            GetWebRequest(url, false))
        from response in Observable.FromAsyncPattern<WebResponse>(
            request.BeginGetResponse, request.EndGetResponse)()
        from item in GetUrlCollection(response)
            .ToObservable()
            .ToArray()
        select item
            .ToList());
    return result;
} 
```

My only concern with this whole approach is that your `GetUrlCollection(response)` is returning an enumerable. You really should code this to return an observable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:28:09.503

Hmmm I think Observable.Start is your friend here. You have a bunch of code that it looks like you are forcing into Observable Sequences, when they really don't look like they are.

Remember Rx is designed to work with sequences of push data. You seem to have a sequence of 1 that happens to be a List. TPL/Task/async would be a good fit here.

If you do want to use Rx, I would suggest avoiding boucing around between IEnumable and IObservable. Doing so is a quick way to creating nasty race conditions and confusing the next developer.

```
public static IObservable<List<string>> GetUrlList(Uri url) 
{
  return Observable.Start(()=>
  {
    var request = GetWebRequest(url, false);
    return GetUrlCollection(request);//Code change here??
  });
} 
```

Here you can happily be synchronous in your Observable.Start delegate. This should be a lot easier for the next guy to understand (i.e. this is a single value sequence with the UrlCollection as the value).

# java - 密钥库类型：使用哪一种？

> ID：11536848
> 
> 赞同：129
> 
> 时间：2012-07-18T08:04:32.013
> 
> 标签：java, security, ssl, jsse

通过查看`java.security`my的文件`JRE`，我看到默认使用的密钥库类型设置为`JKS`. [在这里](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#KeyStore)，有一个可以使用的密钥库类型的列表。

有推荐的密钥库类型吗？不同密钥库类型的优缺点是什么？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-07-18T11:15:55.770

除了您链接到的标准名称列表中列出的类型之外，还有更多类型。您可以在[密码提供程序文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html)中找到更多信息。最常见的当然是`JKS`（默认）和`PKCS12`（对于 PKCS#12 文件，通常带有扩展名`.p12`或有时带有`.pfx`）。

如果您留在 Java 世界中，JKS 是最常见的。PKCS#12 不是 Java 特定的，使用从浏览器备份的证书（带有私钥）或来自基于 OpenSSL 的工具（`keytool`在 Java 6 之前无法转换密钥库和导入其私钥）特别方便，所以你必须使用其他工具）。

如果您已经有一个 PKCS#12 文件，直接使用该`PKCS12`类型通常更容易。可以转换格式，但如果您可以直接选择密钥库类型，则很少需要。

在 Java 7 中，`PKCS12`主要用作*密钥库*，但较少用于*信任*库（请参阅[密钥库和信任库之间的区别](https://stackoverflow.com/a/6341566/372643)），因为没有私钥就无法存储证书条目。相反，`JKS`不要求每个条目都是私钥条目，因此您可以拥有仅包含证书的条目，这对于存储您信任的证书列表的信任存储很有用（但您没有他们的私钥）。

这在 Java 8 中发生了变化，因此您现在也可以在`PKCS12`商店中拥有仅限证书的条目。（有关这些更改和进一步计划的更多详细信息，请参阅[JEP 229：默认创建 PKCS12 密钥库](http://openjdk.java.net/jeps/229)。）

还有一些其他的密钥库类型，可能不太常用（取决于上下文），包括：

*   `PKCS11`，对于 PKCS#11 库，通常用于访问硬件加密令牌，但 Sun 提供程序实现也通过此支持 NSS 存储（来自 Mozilla）。
*   `BKS`，使用 BouncyCastle 提供程序（通常用于 Android）。
*   `Windows-MY`/ `Windows-ROOT`，如果您想直接访问 Windows 证书存储。
*   `KeychainStore`, 如果你想直接使用 OSX 钥匙串。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-08-21T09:27:12.567

这是一篇介绍 Java 中不同类型的 keystore 以及不同类型的 keystore 之间的差异的帖子。[http://www.pixelstech.net/article/1408345768-Different-types-of-keystore-in-Java----概览](http://www.pixelstech.net/article/1408345768-Different-types-of-keystore-in-Java----Overview)

以下是帖子中不同密钥库的描述：

> JKS，Java 密钥库。您可以在 sun.security.provider.JavaKeyStore 找到此文件。此密钥库是 Java 特定的，它通常具有 jks 的扩展名。这种类型的密钥库可以包含私钥和证书，但不能用于存储密钥。由于它是 Java 特定的密钥库，因此不能在其他编程语言中使用。
> 
> JCEKS，JCE 密钥库。您可以在 com.sun.crypto.provider.JceKeyStore 找到此文件。此密钥库具有 jceks 的扩展。可以放入 JCEKS 密钥库的条目是私钥、密钥和证书。
> 
> PKCS12，这是一种标准的密钥库类型，可用于 Java 和其他语言。您可以在 sun.security.pkcs12.PKCS12KeyStore 找到此密钥库实现。它通常具有 p12 或 pfx 的扩展名。您可以在此类型上存储私钥、密钥和证书。
> 
> PKCS11，这是一种硬件密钥库类型。它为 Java 库提供一个接口，以便与 Luna、nCipher 等硬件密钥库设备连接。你可以在 sun.security.pkcs11.P11KeyStore 找到这个实现。加载密钥库时，您无需创建具有特定配置的特定提供程序。该密钥库可以存储私钥、密钥和证书。加载密钥库时，将从密钥库中检索条目，然后将其转换为软件条目。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-10-20T14:55:06.913

如果您使用的是 Java 8 或更新版本，您绝对应该选择Java 9 ( [JEP 229](https://openjdk.java.net/jeps/229)`PKCS12` )以来的默认值。

`JKS`与和相比的优点`JCEKS`是：

*   可以存储密钥、私钥和证书
*   `PKCS12`是一种标准格式，可以被其他程序和库读取¹
*   提高安全性：`JKS`并且`JCEKS`非常不安全。从这些密钥库类型的暴力破解密码工具的数量可以看出这一点，在 Android 开发人员中尤其流行。^(2、3)

* * *

¹有[JDK-8202837](https://bugs.openjdk.java.net/browse/JDK-8202837)，已在 Java 11 中修复

²所有密钥库类型（包括 PKCS12）使用的 PBE 的迭代次数过去相当弱（[CVE-2017-10356](https://bugzilla.redhat.com/show_bug.cgi?id=1503169)），但是这已在 9.0.1、8u151、7u161 和 6u171 中得到修复

³进一步阅读：

*   [介意你的钥匙吗？Java 密钥库的安全评估](https://www.ndss-symposium.org/wp-content/uploads/2018/02/ndss2018_02B-1_Focardi_paper.pdf)(PDF)
*   [Java KeyStores——血淋淋的细节](https://neilmadden.blog/2017/11/17/java-keystores-the-gory-details/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-03-19T14:38:50.407

Java 11 提供了以下类型的`KeyStore`s：

`jceks`：SunJCE 提供者提供的专有密钥库实现。

`jks`：由 SUN 提供者提供的专有密钥库实现。

`dks`：域密钥库是作为单个逻辑密钥库呈现的密钥库的集合。它由配置数据指定，其语法在 DomainLoadStoreParameter 类中描述。

`pkcs11`：由 PKCS #11 令牌支持的密钥库。

`pkcs12`：PKCS #12 中定义的个人身份信息的传输语法。

来源：[https ://docs.oracle.com/en/java/javase/11/docs/specs/security/standard-names.html#keystore-types](https://docs.oracle.com/en/java/javase/11/docs/specs/security/standard-names.html#keystore-types)

# c# - SQL 连接查询不返回任何内容

> ID：11536854
> 
> 赞同：0
> 
> 时间：2012-07-18T08:04:58.567
> 
> 标签：c#, sql, join, inner-join

我正在尝试使用 join 语句进行查询。这就是我所拥有的：

```
SELECT Person.Id,  
      Person.AddressLine1, Person.AddressLine2, Person.Name, 
      Person.City
  FROM Person WITH (NOLOCK) INNER JOIN
      Customer ON 
      Customer.Id = Person.Id
  WHERE (Person.IsRegular = 1) 
```

但是当我使用它时（我在 WHERE 子句中添加了另一个参数）：

```
SELECT Person.Id,  
      Person.AddressLine1, Person.AddressLine2, Person.Name, 
      Person.City
  FROM Person WITH (NOLOCK) INNER JOIN
      Customer ON 
      Customer.Id = Person.Id
  WHERE (Person.IsRegular = 1) AND
      (Customer.RoleType = 'XX') AND 
      (Customer.LocType = 3) 
```

即使我的 Customer 表中有一行与 Person.Id 匹配，并且该特定行有一个 RoleType="XX" 和 LocType=3 的字段，也没有结果。

更新：修复了它，但现在我遇到了问题..我这样做了：

```
SELECT Person.Id, Person.AddressLine1, Person.AddressLine2, Person.Name, Person.City 
FROM Person WITH (NOLOCK) 
INNER JOIN Customer ON Customer.Id = Person.Id WHERE (Person.IsRegular = 1) AND (Customer.RoleType = 'XX') AND (Customer.LocType = 3) 
AS xxx ON xxx.Id=1... it says:incorrect syntax near the keyword 'AS' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:07:34.170

`INNER JOIN`用 a替换`LEFT OUTER JOIN`你的第二个`SELECT`以查看`Customer`表中实际检测到的内容，以及它是否是你所期望的。

检查数据类型：例如，RoleType 是一个`CHAR`字段（带有填充）而不是`VARCHAR`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:12:55.333

您应该将 customerid 加入 personid 吗？或者客户表中是否有personid列？这些可能不匹配...其中一个表可能包含外键。就像是：

```
SELECT Person.Id,         
Person.AddressLine1, 
Person.AddressLine2, Person.Name,        
Person.City   
FROM Person WITH (NOLOCK) INNER JOIN Customer ON
Customer.Id = Person.CustomerId   
WHERE (Person.IsRegular = 1) 
```

根据您的表格的布局方式，这可能是

```
Customer.PersonId = Person.Id 
```

# ios - 如何在 UIwebView 中设置缓存大小？

> ID：11536864
> 
> 赞同：1
> 
> 时间：2012-07-18T08:05:53.437
> 
> 标签：ios, caching, uiwebview

我有一个UIWebview的应用程序，我打开网页A，网页A中有很多图像。所以我第一次打开它时很慢。然后我打开另一个网页B然后回到网页A，它非常快并且直接显示图像。然后我打开了很多其他网页，然后回到网页A，网页A又变慢了，网页A没有任何变化。

当我打开很多其他网页时，看起来 uiwebivew 缓存大小不够，所以它删除了旧记录。

我应该如何避免这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:15:16.693

请参阅[NSURLCache](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLCache/initWithMemoryCapacity%3adiskCapacity%3adiskPath%3a)文档。

您可以按如下方式设置缓存值：

```
NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:1000000 diskCapacity:0 diskPath:nil];
[NSURLCache setSharedURLCache:sharedCache];
[sharedCache release];
sharedCache = nil; 
```

# javascript - IE < 9 问题中的 jQuery UI 手风琴

> ID：11536866
> 
> 赞同：0
> 
> 时间：2012-07-18T08:05:55.380
> 
> 标签：javascript, jquery, jquery-ui

我在 IE 8 中使用 jQuery UI Accordion 并在此行遇到“意外调用方法或属性访问”问题

{this.nodeType===1&&this.insertBefore(a,this.firstChild)}

我正在使用 jQuery-1.7.1.min.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:17:06.377

我的错，我在错误的地方放置了一个隐藏的输入。现代浏览器太聪明了！:)

# jquery - jQuery maskedinput 字符不是必需的

> ID：11536867
> 
> 赞同：1
> 
> 时间：2012-07-18T08:05:56.490
> 
> 标签：jquery, primefaces, maskedinput

我正在使用 primefaces 的 inputMask-tag，它将 jQuery 的 maskedinput-plugin 添加到我的应用程序中。

我有一个带有此掩码的输入字段：

```
***-999 
```

用户应该能够将一些字符留空（例如用于搜索表单）

[我在 stackoverflow 中](https://stackoverflow.com/questions/9795153/jquery-masked-input-plugin-to-not-clear-field-when-errored)找到了这篇文章。所以我把我的面具改成：

```
?***-999 
```

这是一个示例输入：_ _ _ 123（用户只需输入最后 3 位数字）

如果用户不关注输入字段，则输入字段包含以下值：

123

如果他再次关注输入字段，则它包含以下值：

123-_23

我可以做些什么来使我的示例正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T23:17:01.153

以防万一你还在苦苦挣扎，我不久前写了一个类似的插件，它可以屏蔽字段并且在你上面描述的情况下工作得很好。请参阅以下示例用法：

[http://tomaszegiert.seowebsolutions.com.au/maskit/index.html](http://tomaszegiert.seowebsolutions.com.au/maskit/index.html)

如果我计数正确，您会感兴趣的可选字段示例是从顶部算起的第 23 位。我希望它会帮助某人。

# android - 如何在操作栏中显示，只有它可以适合文本？

> ID：11536869
> 
> 赞同：3
> 
> 时间：2012-07-18T08:06:10.560
> 
> 标签：android, android-actionbar, actionbarsherlock, android-menu

我有以下按钮，带有一些 ic_menu 图标：`Register`, `Clear`.

我希望它们在任何设备（智能手机或平板电脑）中显示它们是否适合，包括它们的文本。

如果我同时使用它们：`withText|ifRoom`，在智能手机上它们都出现，纵向没有文本，横向文本。在平板电脑上，它们都带有文本。

如果他们也无法修复他们的文字，我希望他们在智能手机上不要出现。还有其他组合吗？

还有是`collapseActionView`为了什么？

# jquery - 使用 .scroll() 控制变换属性

> ID：11536876
> 
> 赞同：0
> 
> 时间：2012-07-18T08:06:54.143
> 
> 标签：jquery, css, transform, css-transitions

我是一个 jQuery 初学者，所以我只是在寻找一些提示，以便我可以继续朝着正确的方向跋涉。

我想要发生的是：当用户向下滚动页面时，固定图像会旋转。理想情况下，旋转速度与滚动匹配（快速滚动 = 快速旋转）。

这就是我所在的位置：

```
$(window).scroll(function () { 
  $("img").css("-webkit-transform","rotate(90deg)") 
}); 
```

我知道我需要使用小于 90 度的增量，当然需要更多的供应商前缀，但我这里的主要问题是这只会让图像旋转 90 度一次。至少我希望它笨拙地一遍又一遍地旋转。然后我可以努力让它顺利。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:27:46.807

您所要求的基本上是任何视差站点将如何工作 - 某些元素与滚动动作相关联。为了使它工作，每次滚动发生时，您都会获得窗口的位置。

起初这将很难让你的头绕起来，但使用那个滚动位置，你会进行计算，然后进入旋转的程度。

通读本教程以更好地了解我对滚动位置的含义。

[视差教程](http://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/)

# java - 如何在 Android 中接收 UDP 数据？

> ID：11536878
> 
> 赞同：0
> 
> 时间：2012-07-18T08:06:58.503
> 
> 标签：java, android

我将数据从 PC 发送到 Android。但我无法在 Android 中使用 UDP 接收数据。如何在 Android 中使用 UDP 接收数据？如何在 android-display 上查看接收到的数据？谁能帮我？

代码在这里：

```
public class MainActivity extends Activity {
  EditText textOut;
  EditText port;
  int UDP_SERVER_PORT = 8255;
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.main);
    try {
      int port = UDP_SERVER_PORT;
      Log.d("UDP", "Connecting..");
      DatagramSocket clientsocket = new DatagramSocket(port);
      byte[] receivebuf = new byte[1024];
      DatagramPacket receivepacket =
        new DatagramPacket(receivebuf,receivebuf.length);
      clientsocket.receive(receivepacket);
      String modifiedSentence = new String(receivepacket.getData());
      System.out.println("FROM SERVER:" + modifiedSentence);
      clientsocket.close();
    } catch (Exception e) {
      Log.e("UDP", "C: Error", e);
    }
  };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:13:42.557

为了查看接收到的数据，让我们假设数据被转换为字符串，然后您需要一个视图将其值设置为等于接收到的数据。这对你有意义吗。

# linux - shell 编程 - printf %10s 只返回 5 个空格

> ID：11536879
> 
> 赞同：0
> 
> 时间：2012-07-18T08:07:02.560
> 
> 标签：linux

为什么 %10s 只返回 5 个空格。只想知道5去哪儿了

例如 printf %s %20s 返回 15 个空格

# c++ - 拆分字符串 C++

> ID：11536893
> 
> 赞同：-4
> 
> 时间：2012-07-18T08:07:50.290
> 
> 标签：c++, string, c++-standard-library

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我有一个复制文件的程序。

我有一个字符串，它是一个目录路径，但它可能只是一个文件名。例如：

`rootdirname\childdirname\filename.ini`

或者它可能是：

`filename.ini`

我对 C++ 还是很陌生，我需要拆分字符串`\`并使用`MKDir`.

有人知道如何拆分字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:12:13.553

我不确定你是如何定义你的字符串的，但如果它是一个 char*，你可以使用 strtok。[http://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:11:47.913

您可以使用此 C 解决方案：

[http://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

这允许您将字符串拆分为多个标记。您可以随意将字符串滑到“/”上。

Stackoverflow 中也有这个答案，我认为它会有所帮助：

[如何在 C++ 中标记字符串？](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:19:20.323

在 linux 上重新发明了轮子

```
#include <string>
#include <sys/statfs.h>

bool existsDir( const std::string& dir ) {
    return existsFile( dir );
}

bool existsFile( const std::string& file ) {
    struct stat fileInfo;
    int error = stat( file.c_str(), &fileInfo );
    if( error == 0 ){
        return true;
    } else {
        return false;
    }
}

bool createDir( std::string dir, int mask = S_IRWXU | S_IRWXG | S_IRWXO ) {
    if( !existsDir( dir ) ) {
        mkdir( dir.c_str(), mask );
        return existsDir( dir );
    } else {
        return true;
    }
}

bool createPath( std::string path, int mask = S_IRWXU | S_IRWXG | S_IRWXO ) {
    if( path.at( path.length()-1 ) == '/' ){
        path.erase( path.length()-1 );
    }
    std::list<std::string> pathParts;

    int slashPos = 0;
    while( true ) {
        slashPos = path.find_first_of( "/", slashPos+1 );
        if( slashPos < 0)
            break;
        std::string pp( path.substr( 0, slashPos ) );
        pathParts.push_back( pp );
    }
    std::list<std::string>::const_iterator pp_cit;
    for( pp_cit=pathParts.begin(); pp_cit!=pathParts.end(); ++pp_cit ){
        createDir( (*pp_cit), mask );
    }

    createDir( path, mask );
    return existsDir( path );
} 
```

# javascript - 获取通过ajax加载的页面中第一个div的id

> ID：11536896
> 
> 赞同：1
> 
> 时间：2012-07-18T08:07:58.653
> 
> 标签：javascript, jquery

我正在使用 $.get 函数来加载部分视图：

```
$.get('/desk/nextstep', function (data) {
            var ids = $(data).filter(':first').attr('id');
            alert(ids);                
}); 
```

我想获得`id`第一个（根）div，但这段代码不起作用：

```
var ids = $(data).filter(':first').attr('id'); 
```

我收到`undefined`警报消息。如何解决？
谢谢。

**更新：** 在`data` html代码中：

```
<div id="step1" class="scroll-pane">
    <div class="scroll_cont">
     //other content
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:09:52.213

试试这个：

```
$.get('/desk/nextstep', function (data) {
     var ids = $('<div/>').append(data).find(':first').attr('id');
     alert(ids);                
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:21:14.070

您可以使用本机方法**match**。;)

```
var ids = data.match(/id="([^"]+)"/); 
```

预览 - [http://jsfiddle.net/fsGe6/](http://jsfiddle.net/fsGe6/)

# jquery - Jquery：根据 $.post() 的返回做不同的事情

> ID：11536899
> 
> 赞同：1
> 
> 时间：2012-07-18T08:08:05.867
> 
> 标签：jquery

我有这个代码来添加一个用户：

```
$.post('ajax/aj_adduser.php', $("form#adduserform").serialize(), function(result) {
disablePopup();             $('#addsuccess').delay(200).fadeToggle('slow').delay(2000).fadeToggle('slow');  
$('div.mainadmin').html(result);            
}); 
```

这几乎可以正常工作:-)问题是，这条线：

```
$('#addsuccess').delay(200).fadeToggle('slow').delay(2000).fadeToggle('slow'); 
```

只有在添加了用户时才应该执行，所以如果结果集包含该用户已经存在的消息，则不应执行。

我该如何解决？我首先尝试在POST成功与否时执行，但它总是成功，只是结果，结果集不同。

所有帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:12:13.960

JQuery 的 AJAX 函数会将来自 AJAX 调用的数据返回给您尝试调用该行的函数。您可以访问从`result`函数中获得的结果集。

这意味着您可以检查返回的数据并有条件地对其进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:15:09.023

您应该确保 ajax/aj_adduser.php 中的 php 文件返回一个状态参数。

像这样的东西：

```
if ($useradded){
   $rt->status = "useradded";
   $rt->result = $result;
}else{
   $rt->status = "failed";
}
echo json_encode($rt); 
```

您可以将 $.post 调用更改为 $.getJSON，并检查结果如下：

```
$.getJSON('ajax/aj_adduser.php', $("form#adduserform").serialize(), function(result) {
    if (result.status = "useradded"){
        // do something
        $('div.mainadmin').html(result.result); 
    }else{
       // don't do anything
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:15:10.277

```
$.post('ajax/aj_adduser.php', $("form#adduserform").serialize(), function(result) {
    disablePopup();   
    if(result.YourMessage == ...){
        $('#addsuccess').delay(200).fadeToggle('slow').delay(2000).fadeToggle('slow');     
    }  
    else{ ... }        
    $('div.mainadmin').html(result);            
}); 
```

# jquery - 是否有一个现有的 jQuery 插件可以倒计时到特定时间，然后倒计时？

> ID：11536900
> 
> 赞同：0
> 
> 时间：2012-07-18T08:08:11.390
> 
> 标签：jquery, jquery-plugins, timer

我正在寻找一个现有的插件（在我写它之前），它以天、小时、分钟和秒倒计时到特定时间，然后在达到 0 时开始从它开始计数。没有什么花哨的，只是文字很好。

现有的教程或密切相关的项目也适用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:15:17.110

您可以使用[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)可以倒数和倒数。您必须手动更改

```
$('#countdown').countdown({
    until: liftoffTime, 
    onExpiry: function(){
        var startTime = new Date();
        $('#countdown').countdown({since: startTime});
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:14:44.757

我知道这个，他很好并且可以定制：

[http://www.littlewebthings.com/projects/countdown/](http://www.littlewebthings.com/projects/countdown/)

# php - 如何在 googlemaps 页面中使用文本文件中的 GPS 坐标？

> ID：11536906
> 
> 赞同：2
> 
> 时间：2012-07-18T08:08:28.110
> 
> 标签：php, html, google-maps-api-3

我正在将 GPS 坐标复制到一个文本文件中，以用于显示谷歌地图的网站。之前，我使用 php 脚本获取 gps 坐标和一些长字符串来创建可以显示的 kml 文档。这似乎不是最好的方法。我有文本文件 gpsinfo.txt，其中包含 4 个数据点的信息，打开时看起来像这样：

```
7.784606,63.10403 7.784606,64.10403 7.784606,65.10403 7.784606,66.10403 
```

我应该如何使用该文本文件在我的网页上创建 4 个点？

我正在考虑使用 php 文件来创建我的网页可以读取的 js 文件，但这听起来不是一个非常干净的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:19:12.977

您可以尝试使用 php 读取相同的文本文件，然后构建您需要的内容。

例子：

```
<?php

$contents = file_get_contents("gpsinfo.txt");
$contentsArray = explode(" ", $contents);

$gpsCoords = array(); // your final result to use when constructing javascript for maps

foreach($contentsArray as $key => $gpsItem)
{
    $gpsArray = explode("," $gpsItem);
    $gpsArray[$key]['lat'] = $gpsItem[0];  
    $gpsArray[$key]['lon'] = $gpsItem[1];
    // The latter two might change as I am not sure which is 
    // the lon and which is the lat at your end
}

?> 
```

该代码可以在返回坐标数组的函数中使用，也可以只是内联，具体取决于您的代码样式。

另一种方法是将坐标存储到 JSON 数组中，然后尝试获取它并将其直接提供给 javascript。尽管在我的示例中，您只需要以某种特定方式存储数据：即调用 php 来构造一个数组或在 javascript 中为每个坐标调用一个函数，这会将标记放在地图上。PHP 在 javascript 之前运行（服务器端，而 js 运行客户端），这意味着有多种方法可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:15:40.003

这就是我正在做的解决这个问题：

我有一个 php 文件抓取一些网页以获取 GPS 坐标，然后将它们复制到一个文本文件中，但采用 JSON 格式：

```
 [{ "boat": "Edda", "coordinates" : { "lat" : 7.80086, "lon": 64.75658}}, { "...... 
```

然后我有一个 php 文件，它读取文件并由我的网页使用 ajax 访问并输出字符串，然后网页处理它。

网页上的ajax：

```
<script type="text/javascript" language="JavaScript">
var point;
microAjax("BackgroundFiles/genjsonGPS.php", function (res) {

  var json_obj = JSON.parse(res.toString());

  initialize(json_obj);
  window.setTimeout(function(){

    }, 500);      
});

  </script> 
```

genjsonGPS.php：

```
<?php

$myFile = "vesselGPS.txt";
$fh = fopen($myFile, 'r');
$vesselGPS = fread($fh, filesize($myFile));
fclose($fh);

echo($vesselGPS);

?> 
```

# jquery-mobile - jquery mobile listview搜索过滤器开始输入检测

> ID：11536907
> 
> 赞同：0
> 
> 时间：2012-07-18T08:08:31.157
> 
> 标签：jquery-mobile, cordova

我想检测用户何时开始输入 intp jquery 移动列表视图过滤器输入。还可以获取用户类型的按钮。

```
<ul data-role="listview" data-filter="true">
    <li><a href="#id">Acura</a></li>
    <li><a href="#id">Audi</a></li>
    <li><a href="#id">BMW</a></li>
</ul> 
```

任何帮助将不胜感激。

注意：这是一个 PhoneGap 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:26:26.273

找到了怎么做。如果有人有同样的问题，我会发布它。

```
$('div.ui-input-search').delegate("input", "keyup",
        function(e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code != 8) {

                //Any key other that backspace clicked

                var text = $(this).val();
                if (text.length == 1) {

                    //Just Started Typing
                }

            }
        }
);

$('div.ui-input-search').delegate("input", "keydown",
        function(e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code == 8) {
                // BackSpace is clicked.
                var remainingText = $(this).val();
                if (remainingText.length == 1) {

                       //Cleared all characteres

                }

            }
            // console.log(code+'\n\n\n');
            // var remainingText = $(this).val();
            // console.log(remainingText);
        }
); 
```

# java - 无法在 Android 上使用 XOAUTH 连接到 Gmail IMAP

> ID：11536911
> 
> 赞同：2
> 
> 时间：2012-07-18T08:08:41.823
> 
> 标签：java, android, oauth, imap, gmail-imap

我正在构建一个使用 Gmail 备份一些数据的应用程序。我使用 XOAUTH 连接到 Gmail 并获得了令牌和密码。但我无法连接到 Gmail 的 IMAP 服务。我按照[http://code.google.com/p/google-mail-xoauth-tools/wiki/JavaSampleCode](http://code.google.com/p/google-mail-xoauth-tools/wiki/JavaSampleCode)上的示例进行操作：

```
Properties props = new Properties();
props.put("mail.imaps.sasl.enable", "true");
props.put("mail.imaps.sasl.mechanisms", "XOAUTH");
props.put(OAUTH_TOKEN_PROP, oauthToken);
props.put(OAUTH_TOKEN_SECRET_PROP, oauthTokenSecret);
props.put(CONSUMER_KEY_PROP, Const.CONSUMER_KEY);
props.put(CONSUMER_SECRET_PROP, Const.CONSUMER_SECRET);
Session session = Session.getInstance(props);
session.setDebug(debug);

final URLName unusedUrlName = null;
IMAPSSLStore store = new IMAPSSLStore(session, unusedUrlName);
final String emptyPassword = "";
store.connect(host, port, userEmail, emptyPassword);
return store; 
```

运行时，它会报告以下异常。

```
javax.mail.MessagingException: * BYE [UNAVAILABLE] Temporary System Error;
   nested exception is:
    com.sun.mail.iap.ConnectionException: * BYE [UNAVAILABLE] Temporary System Error
    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:569)
    at javax.mail.Service.connect(Service.java:288)
    at com.doodlemobile.zy.finenote.OAuthHelperActivity$XoauthAuthenticator.connectToImap(OAuthHelperActivity.java:565)
    at com.doodlemobile.zy.finenote.OAuthHelperActivity$ConnectGmailTask.doInBackground(OAuthHelperActivity.java:484)
    at com.doodlemobile.zy.finenote.OAuthHelperActivity$ConnectGmailTask.doInBackground(OAuthHelperActivity.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:287)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    at java.lang.Thread.run(Thread.java:856)
 Caused by: com.sun.mail.iap.ConnectionException: * BYE [UNAVAILABLE] Temporary System Error
    at com.sun.mail.iap.Protocol.handleResult(Protocol.java:346)
    at com.sun.mail.imap.protocol.IMAPProtocol.login(IMAPProtocol.java:336)
    at com.sun.mail.imap.IMAPStore.login(IMAPStore.java:615)
    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:549)
    ... 11 more 
```

我用的是SUN的javamail。有人会帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:29:57.350

我面临同样的问题。

启用调试 ( `session.setDebug(true)`) 后，我注意到[`ClassNotFoundException`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassNotFoundException.html)在显示临时系统错误之前我收到了一个。

```
08-06 14:38:59.148: I/System.out(3139): DEBUG IMAP: Can't load SASL authenticator: java.lang.ClassNotFoundException: com.sun.mail.imap.protocol.IMAPSaslAuthenticator
08-06 14:38:59.148: I/System.out(3139): DEBUG IMAP: LOGIN command trace suppressed
08-06 14:39:00.265: I/System.out(3139): DEBUG IMAP: LOGIN command result: * BYE [UNAVAILABLE] Temporary System Error
08-06 14:39:00.289: E/com.example.gmailandroid.MainActivity(3139): * BYE [UNAVAILABLE] Temporary System Error
08-06 14:39:00.289: E/com.example.gmailandroid.MainActivity(3139): javax.mail.MessagingException: * BYE [UNAVAILABLE] Temporary System Error;
08-06 14:39:00.289: E/com.example.gmailandroid.MainActivity(3139):   nested exception is:
08-06 14:39:00.289: E/com.example.gmailandroid.MainActivity(3139):  com.sun.mail.iap.ConnectionException: * BYE [UNAVAILABLE] Temporary System Error
08-06 14:39:00.289: E/com.example.gmailandroid.MainActivity(3139):  at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:668) 
```

查看 JavaMail 源代码，似乎这是因为它试图加载依赖于非 android java 资源的 com.sun.mail.imap.protocol.IMAPSaslAuthenticator。

```
javax.security.sasl.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:10:52.000

其他人也[遇到了这个错误](https://groups.google.com/d/topic/google-mail-xoauth-tools/C6Jue70DwS8/discussion)。

试试他们给出的建议：

> 我取消了注册，然后在每个会话之间注册了安全提供程序，并对其进行了修复。虽然不知道为什么...

和

> 我最终让它工作了。事实证明，我需要在我正在使用的系统上安装更新版本的 Java。一旦我升级了事情就开始没有问题地工作。

# iphone - 如何知道 UITableView 以哪种方式滚动

> ID：11536918
> 
> 赞同：22
> 
> 时间：2012-07-18T08:09:08.083
> 
> 标签：iphone, ios, ipad, uitableview

有什么方法可以知道 a`UITableView`是向上还是向下滚动？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-18T08:25:05.063

```
-(void) scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGPoint currentOffset = scrollView.contentOffset;
    if (currentOffset.y > self.lastContentOffset.y)
    {
        // Downward
    }
    else
    {
        // Upward
    }
    self.lastContentOffset = currentOffset;
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-01-21T16:40:08.570

```
-(void)scrollViewWillEndDragging:(UIScrollView *)scrollView 
                    withVelocity:(CGPoint)velocity 
             targetContentOffset:(inout CGPoint *)targetContentOffset{

    if (velocity.y > 0){
        NSLog(@"up");
    }
    if (velocity.y < 0){
        NSLog(@"down");
    }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-19T06:32:12.890

我们可以这样做吗？

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {

      if ([scrollView.panGestureRecognizer translationInView:scrollView].y > 0) {
        // down
      } else {
        // up
      }

    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T08:19:54.483

`UITableView`是一个`UIScrollView`子类，因此您可以将自己设置为`UIScrollViewDelegate`并获取滚动视图委托回调。

这些委托方法之一 ( `-scrollViewDidScroll:`) 的参数是滚动的滚动视图，您可以将其与表视图进行比较，以了解滚动的是哪一个。

* * *

对不起，我看错了你的问题。我以为您想知道正在滚动*哪个表视图（我错过了“方式”）。*

要知道方向，您可以将先前的偏移量保留在变量中，并查看增量（current.y - previous.y）是正数（向下滚动）还是负数（向上滚动）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T08:18:45.020

您可以跟踪内容偏移的差异。将旧的保留在成员/静态变量中并检查当前。如果旧值较低，则滚动向下，反之亦然。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-12T04:57:53.817

```
 override func scrollViewWillEndDragging(scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>) {

        if targetContentOffset.memory.y < scrollView.contentOffset.y {
            //println("Going up!")

        } else {
           // println("Going down!")

        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-20T09:08:31.117

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
   if (yourTableView.isDragging || yourTableView.isDecelerating)
       {
                // your tableview is scrolled.
               // Add your code here
       }
} 
```

在这里，您必须替换您的 tableview 名称而不是“yourTableView”。

**yourTableView.isDragging** - 如果用户开始滚动，它返回 YES。这可能需要一些时间或距离才能开始。

**yourTableView.isDecelerating** - 如果用户没有拖动（触摸）但滚动视图仍在移动，则返回 YES。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-18T03:25:02.600

您可以通过以这种方式实现`UIScrollView`的委托方法来做到这一点，它很优雅。

PS：`lastOffset`并且`scrollingUpward`是 ViewController 的属性。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGPoint currentOffset = scrollView.contentOffset;
    self.scrollingUpward = currentOffset.y > self.lastOffset.y;
    self.lastOffset = currentOffset;
} 
```

# html - 图像未显示在 HTML 网页中

> ID：11536920
> 
> 赞同：1
> 
> 时间：2012-07-18T08:09:25.053
> 
> 标签：html, image

我已在所有浏览器中打开此网页，但没有一个显示图像。它只在该区域留下一个空白空间，但是如果您右键单击该区域，则会出现典型的菜单。当我在新选项卡中选择打开图像时，它根本不显示任何内容，尽管图片存储在正确的文件夹中

这里使用的代码是，

```
<td colspan="2" rowspan="2">
    <img src="images/advert1.jpg" width="192" height="253" alt="">
</td> 
```

但是，如果我将路径替换为

```
"C:/wamp/www/images/advert1.jpg" 
```

然后它在那个区域穿了一个小盒子，但图片没有显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:11:14.230

你的语法没有问题（我可以看到）。确保图像存在于该路径并且具有正确的 unix 权限（假设您正在运行基于 unix 的系统）。任何图像都可以被世界阅读，而不仅仅是你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T02:57:41.917

C:\Users\ 然后将您的个人资料名称以及保存图像的位置放入 .png 或 .jpg

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-08T03:37:05.203

同样的问题首先发生在我身上，所以我再次将文件保存在计算机的另一个位置，然后浏览器开始显示图像。尝试将您的文件和图像保存在单独的文件中，然后将它们保存在不同的位置。

# xamarin.android - VS Designer 中的景观

> ID：11536921
> 
> 赞同：0
> 
> 时间：2012-07-18T08:09:26.467
> 
> 标签：xamarin.android

我正在为 Android 测试 Mono 并将创建一个始终设置在 Landscape 中的 TableView。VS 中的设计师首先显示横向，但在接下来打开 .axml 文件后，我总是得到纵向样式并且无法切换到横向。

彼得·阿泰尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:52:15.877

确保您的设备具有`Landscape`“`Portrait`配置”。

以“7in WSVGA (Tablet)”为例。

然后您可以在设计器的工具栏中选择“配置”（横向或纵向）。

# android - 如何将使用相机活动拍摄的图像的 imagePath 存储到数据库中并检索路径？

> ID：11536923
> 
> 赞同：0
> 
> 时间：2012-07-18T08:09:31.793
> 
> 标签：android, database, android-image

如何将我使用相机活动捕获的图像的 imagePath 存储到数据库中。我还需要检索该 imagePath 并显示在另一个活动上吗？
有人能帮助我吗？

*更新：*

```
public class Image_secondPage extends Activity 
{
    public static final int CAMERA_RESULT = 1;
    Button btn1;
    ImageView imageView1;
    private final String tag = getClass().getName();

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.image_secondpage);

        imageView1 = (ImageView)findViewById(R.id.imageView1);
     Button btnNext = (Button)findViewById(R.id.buttonNext);
     btnNext.setOnClickListener(new View.OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
            Intent intent = new Intent(Image_secondPage.this, ImagesPage.class);
            startActivity(intent);

        }
    });

        PackageManager pm = getPackageManager();
        if(pm.hasSystemFeature(PackageManager.FEATURE_CAMERA))
        {
            Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            i.putExtra(MediaStore.EXTRA_OUTPUT, MyFileContentProvider.CONTENT_URI);
            startActivityForResult(i, CAMERA_RESULT);
        }
        else
        {
            Toast.makeText(getBaseContext(), "Camera is not available", Toast.LENGTH_LONG).show();
        }   

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);
        Log.i(tag, "Receive the camera result");
        if(resultCode == RESULT_OK && requestCode == CAMERA_RESULT)
        {
            File out = new File(getFilesDir(), "newImage.jpg");
            if(!out.exists())
            {
                Toast.makeText(getBaseContext(), "Error while capturing image", Toast.LENGTH_LONG).show();
                return;
            }
            Bitmap mBitmap = BitmapFactory.decodeFile(out.getAbsolutePath());
            imageView1.setImageBitmap(mBitmap);
        }
    }

    @Override
    protected void onDestroy()
    {
        super.onDestroy();
        imageView1 = null;
    } 
```

我应该获取我捕获的 imagePath 并在下一节课的 imageView 上显示图像，但我不知道如何。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:32:08.840

尝试使用这个

```
bitmap = (Bitmap) data.getExtras().get("data"); 
```

这将为您提供位图图像，然后您可以将其保存到数据库或任何您想要的。
如果这不能解决您的问题，请告诉我。

# sql-server-2008 - 基于参数化值的条件连接表

> ID：11536926
> 
> 赞同：1
> 
> 时间：2012-07-18T08:09:47.237
> 
> 标签：sql-server-2008, tsql

是否可以基于参数进行条件连接；例如：

```
//PSEUDE CODE:
DECLARE @condition bit
SET @condition=1 or 0 

SELECT * 
FROM tableA 
INNER JOIN tableB on tableA.SomeColumn = tableB.SomeColumn 
if @condition = 0 THEN 
   INNER JOIN tableC ON tableC.SomeCOlumn = TableA.SomeColumn 
ELSE
   INNER JOIN tableD ON tableD.SomeColumn=TableA.someColumn 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:18:59.647

### 描述

您可以构建一个包含查询的 varchar 并用于`exec`执行它们。

> 在 Transact-SQL 批处理或以下模块之一中执行命令字符串或字符串：系统存储过程、用户定义存储过程、CLR 存储过程、标量值用户定义函数或扩展存储过程。

### 样本

```
DECLARE @SQL varchar(max)
DECLARE @condition bit
SET @condition=1 

SET @SQL = 'SELECT * FROM tableA INNER JOIN tableB on tableA.SomeColumn=tableB.SomeColumn'

IF (@condition = 1) 
BEGIN 
    SET @SQL = @SQL + ' INNER JOIN tableC ON tableC.SomeCOlumn=TableA.SomeColumn'
END ELSE BEGIN
    SET @SQL = @SQL + ' INNER JOIN tableD ON tableD.SomeColumn=TableA.someColumn'
    END

exec(@SQL) 
```

### 更多信息

*   [MSDN - 执行 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188332.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:17:35.410

你可以用动态查询来做到这一点

```
declare @sql_str varchar(500)
if @contidion=0
@sql_str='INNER JOIN tableC ON tableC.SomeCOlumn=TableA.SomeColumn'
else
@sql_str='INNER JOIN tableD ON tableD.SomeColumn=TableA.someColumn'

exec('SELECT * FROM tableA INNER JOIN tableB on 
 tableA.SomeColumn=tableB.SomeColumn' +@sql_str) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:21:34.637

有可能，看[这里](http://weblogs.sqlteam.com/jeffs/archive/2007/04/03/Conditional-Joins.aspx)

但是在这种情况下，如果您的条件是预定义的并且不是太多，我宁愿使用多个 if 语句。这更容易阅读和维护。

```
If (condition1)
 Select * From tblA
Else If (condition2)
 Select * From tblA Inner Join tblB ...
Else If (condition3)
 ..... 
```

# selenium - 在junit selenium webdriver中报告

> ID：11536927
> 
> 赞同：1
> 
> 时间：2012-07-18T08:09:47.737
> 
> 标签：selenium, report, webdriver

我在 Eclipse 中使用 selenium web 驱动程序和 junit。请告诉我如何报告测试结果？

我尝试以这种方式制作它：

```
http://testerinyou.blogspot.com/2011/03/how-to-create-reports-using-junit.html?showComment=1342535781861#c6211334222001490686 
```

但在gereration期间得到错误：

```
Buildfile: E:\eclipse\WebDriver\build.xml
build-subprojects:
init:
build-project:
[echo] WebDriver: E:\eclipse\WebDriver\build.xml
[javac] E:\eclipse\WebDriver\build.xml:43: warning: 'includeantruntime' was not set,    defaulting to build.sysclasspath=last; set to false for repeatable builds
build:
Sector:
[mkdir] Created dir: E:\eclipse\WebDriver\junit
[junit] Running Sector
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
[junit] Test Sector FAILED
junitreport:
[junitreport] Processing E:\eclipse\WebDriver\junit\TESTS-TestSuites.xml to E:\DOCUME~1\CONSUL~1\LOCALS~1\Temp\null255203125
[junitreport] Loading stylesheet jar:file:/E:/eclipse/plugins/org.apache.ant_1.8.2.v20120109-1030/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs /optional/junit/xsl/junit-frames.xsl
[junitreport] : Error! The first argument to the non-static Java function 'replace' is not a valid object reference.
[junitreport] : Error! Cannot convert data-type 'void' to 'reference'.
[junitreport] : Fatal Error! Could not compile stylesheet
[junitreport] Failed to process E:\eclipse\WebDriver\junit\TESTS-TestSuites.xml

BUILD FAILED
E:\eclipse\WebDriver\build.xml:135: Errors while applying transformations: Fatal error during transformation

Total time: 4 seconds 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:53:34.647

为 Selenium WebDriver 创建报告有不同的可能性。一位用户开发了一个小型库来创建带有屏幕截图等的 html 报告。有关更多信息，请参见此处：[https ://github.com/vorburger/webdriver-reporting](https://github.com/vorburger/webdriver-reporting)

此外，您可以使用另一个基于 Selenium 的框架，称为 Thucydides。它生成非常漂亮的 html 报告并改进了 Selenium WebDriver。您可以访问官方网站了解更多信息（www.thucydides.info）

您可以使用 Ant oder TestNG 为您的测试创建报告。在这里查看更多信息：[http ://selftechy.com/2011/06/29/selenium-use-ant-to-generate-html-reports](http://selftechy.com/2011/06/29/selenium-use-ant-to-generate-html-reports)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:03:22.650

我喜欢[UnitTH](http://junitth.sourceforge.net/)生成测试报告。

您可以通过 ant 或 maven 启动它

进一步的问题？

# c# - 在 VS 2010 asp.net 中没有得到 gridview1.Rows.Clear() 选项

> ID：11536931
> 
> 赞同：1
> 
> 时间：2012-07-18T08:09:52.843
> 
> 标签：c#, asp.net, gridview

> **可能重复：**
> [如何使用 C# 清除 DataGridView 中的行？](https://stackoverflow.com/questions/6184402/how-can-i-clear-rows-in-datagridview-with-c)

我正在使用 gridview 来显示我的一些数据的详细信息。流程是这样的：当一个下拉值发生变化时，gridview中的数据会根据选中的值进行绑定。现在当没有与该值对应的数据时，我需要清除gridview。为此，我使用：

```
gridview1.Rows.Clear() 
```

但是当我编译我的代码时，会产生一个错误：

```
System.Web.UI.WebControls.GridViewRowCollection' does not contain a definition for
'Clear' and no extension method 'Clear' accepting a first argument of type
'System.Web.UI.WebControls.GridViewRowCollection' could be found (are you missing
a using directive or an assembly reference?) 
```

我也给出了参考：

```
using System.Web.UI.WebControls; 
```

现在我应该如何清除gridview？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:12:21.650

您可以将`GridView`与绑定`null`，也可以与新的`DataSource`.

```
gridview1.DataSource = null;
gridview1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:19:20.443

`"EmptyDataText"`是的，如果您想在网格视图中没有记录时显示一些文本，您可以将网格视图绑定到空数据表并设置值属性。

# java - 如何从 Java 中的任何字符串中获取字母数字字符串？

> ID：11536934
> 
> 赞同：3
> 
> 时间：2012-07-18T08:10:11.510
> 
> 标签：java, string

> **可能重复：**
> [ń ǹ ň ñ ṅ ņ ṇ ṋ ṉ ̈ ɲ ƞ ᶇ ɳ ȵ --> n 或从 unicode 字符中删除变音符号](https://stackoverflow.com/questions/1453171/n-n-n-or-remove-diacritical-marks-from-unicode-cha)
> [如何替换字符串中的特殊字符？](https://stackoverflow.com/questions/4283351/how-to-replace-special-characters-in-a-string)

我想格式化一些字符串，`"I>Télé"`比如`"itele"`. 这个想法是我希望我的字符串是小写（完成），没有空格（完成），没有重音或特殊字符（如`>`, `<`, `/`, `%`, `~`, `é`,`@`等`ï`）。

删除出现的特殊字符是可以的，但我想在删除重音符号的同时保留字母（就像我在示例中所做的那样）。这是我所做的，但我不认为好的解决方案是将每个 é,è,ê,ë 替换为“e”，而不是对“i”、“a”等再做一次，然后删除每个特殊字符...

```
String name ="I>télé" //example
String result = name.toLowerCase().replace(" ", "").replace("é","e").........; 
```

这样做的目的是为 Android 应用程序的资源提供有效的文件名，所以如果您有任何其他想法，我会接受！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-18T08:21:18.180

您可以使用[`java.text.Normalizer`](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)该类将文本转换为普通的拉丁字符，并在可能的情况下后跟变音符号（重音符号）。因此，例如，单字符串`"é"`将变为两个字符串`['e', {COMBINING ACUTE ACCENT}]`。

完成此操作后，您的字符串将是非重音字符、重音修饰符和您提到的其他特殊字符的组合。此时，您可以仅使用白名单过滤字符串中的字符以保留您想要的内容（这可能与`[A-Za-z0-9]`正则表达式一样简单，具体取决于您所追求的内容）。

一种方法可能如下所示：

```
String name ="I>télé"; //example
String normalized = Normalizer.normalize(name, Form.NFD);
String result = normalized.replaceAll("[^A-Za-z0-9]", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:28:29.657

你可以做类似的事情

```
String res = ""
for (char c : name.toCharArray()) {
    if (Character.isLetter(c) ||Character.isDigit(c))
        res += c    
}

//Normalize using the method below 
```

[http://blog.smartkey.co.uk/2009/10/how-to-strip-accents-from-strings-using-java-6/](http://blog.smartkey.co.uk/2009/10/how-to-strip-accents-from-strings-using-java-6/)

```
public static String stripAccents(String s) {    
    s = Normalizer.normalize(s, Normalizer.Form.NFD);   
    s = s.replaceAll("\\p{InCombiningDiacriticalMarks}+", ""); 
    return s;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:20:17.103

尝试使用 ascii 代码。[这个链接可能会有所帮助](http://www.asciitable.com/)

# java - 如何检查Java中当前正在运行的线程数？

> ID：11536938
> 
> 赞同：13
> 
> 时间：2012-07-18T08:10:44.130
> 
> 标签：java, multithreading

我正在寻找一种方法来查看当前正在运行的线程数

1.  首先通过 Windows
2.  以编程方式

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-18T08:16:56.963

这将为您提供 VM 中的线程总数：

```
int nbThreads =  Thread.getAllStackTraces().keySet().size(); 
```

现在，如果您希望所有线程当前正在执行，您可以这样做：

```
int nbRunning = 0;
for (Thread t : Thread.getAllStackTraces().keySet()) {
    if (t.getState()==Thread.State.RUNNABLE) nbRunning++;
} 
```

此处列举了可能的状态：[Thread.State javadoc](https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.State.html)

如果您想通过 Windows 工具而不是编程方式查看正在运行的线程，您可以使用[Process Explorer](http://en.wikipedia.org/wiki/Process_Explorer)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T08:15:01.410

[您可以使用Thread.getAllStackTraces() 获取](http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#getAllStackTraces--)在 JVM 中运行的所有线程及其堆栈跟踪

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:32:46.890

回应您的以下评论

> 在以下代码中： while(resultSet.next()) { name=resultSet.getString("hName"); MyRunnable worker = new MyRunnable(hName); threadExecutor.execute(worker); } 。我的线程池大小为 10。我需要确保我的程序在多线程下正常工作，并且想要检查某个时刻有多少线程正在运行。我怎样才能做到这一点？

对于另一个答案，我建议您使用[JVisualVM](http://visualvm.java.net/)分析您的代码并检查您的线程池是否正常工作。这个建议背后的原因是，您不必为 JVM 管理的所有其他内务线程而烦恼。除了你想要做的是为什么像 JVisualVM 这样的工具是为之而生的。

如果您是分析 Java 程序的新手，JVisualVM 可以让您在运行代码时查看幕后发生的事情。您可以查看堆、GC 活动，检查运行/等待任何样本/配置您的 CPU 或内存使用情况的线程。还有不少插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:14:58.423

从 Windows：

肯定有一个进程的[性能计数器](http://technet.microsoft.com/en-us/library/bb734903)可以告诉你这一点。

以编程方式：

有[`Thread#activeCount`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#activeCount%28%29)：

> 返回当前线程的线程组及其子组中活动线程数的估计值。递归迭代当前线程的线程组中的所有子组。

或者更直接地说，[`ThreadGroup#activeCount`](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#activeCount%28%29)：

> 返回此线程组及其子组中活动线程数的估计值。

和[`ThreadGroup#getParent`](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#getParent%28%29)：

> 返回此线程组的父级。
> 
> 首先，如果parent不为null，则调用父线程组的checkAccess方法，不带参数；这可能会导致安全异常。

所有这些似乎都暗示了以下几点：

```
int activeThreadTotalEstimate() {
    ThreadGroup group;
    ThreadGroup parent;

    group = Thread.currentThread().getThreadGroup();
    while ((parent = group.getParent()) != null) {
        group = parent;
    }
    return group.activeCount();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-03T12:15:23.823

代码片段：

```
import java.util.Set;
import java.lang.Thread.State;
public class ActiveThreads {
    public static void main(String args[]) throws Exception{
        for ( int i=0; i< 5; i++){
            Thread t = new Thread(new MyThread());
            t.setName("MyThread:"+i);
            t.start();
        }
        int threadCount = 0;
        Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
        for ( Thread t : threadSet){
            if ( t.getThreadGroup() == Thread.currentThread().getThreadGroup() && 
                t.getState() == Thread.State.RUNNABLE){
                System.out.println("Thread :"+t+":"+"state:"+t.getState());
                ++threadCount;
            }
        }
        System.out.println("Thread count started by Main thread:"+threadCount);
    }
}

class MyThread implements Runnable{
    public void run(){
        try{
            Thread.sleep(2000);
        }catch(Exception err){
            err.printStackTrace();
        }
    }
} 
```

输出：

```
Thread :Thread[main,5,main]:state:RUNNABLE
Thread count started by Main thread:1 
```

解释：

`Thread.getAllStackTraces().keySet()`为您提供所有线程的列表，这些线程已由两者启动`Program and System`。在没有`ThreadeGroup`条件的情况下，如果它们处于活动状态，您将获得系统线程数。

`Reference Handler, Signal Dispatcher,Attach Listener and Finalizer`

# c#-4.0 - ITextSharp：用西里尔文/国际单词解析 html

> ID：11536942
> 
> 赞同：1
> 
> 时间：2012-07-18T08:10:55.130
> 
> 标签：c#-4.0, itextsharp, cp1251

我尝试解析 html 文件并生成 pdf。我使用代码

```
document.Open();
HtmlPipelineContext htmlContext = new HtmlPipelineContext(null);
htmlContext.SetTagFactory(Tags.GetHtmlTagProcessorFactory());
ICSSResolver cssResolver = XMLWorkerHelper.GetInstance().GetDefaultCssResolver(true);
IPipeline pipeline =
    new CssResolverPipeline(cssResolver,
        new HtmlPipeline(htmlContext,
                new PdfWriterPipeline(document, writer)));

XMLWorker worker = new XMLWorker(pipeline, true);
XMLParser p = new XMLParser(true, worker, Encoding.Unicode);

p.Parse((TextReader)File.OpenText(@"Template.html"));
document.Close(); 
```

如何定义基本字体，如果我想使用西里尔文/国际字词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T19:05:11.707

你应该注册字体

```
string arialuniTff = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "ARIALUNI.TTF");
FontFactory.Register(arialuniTff); 
```

并修改了页面的正文

```
<body face='Arial' encoding='koi8-r' >
...
</body > 
```

对于可以阅读俄语的人来说，这篇[文章](http://billibook.blogspot.com/2012/08/iTextSharp.html)可能很有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:38:28.597

我提出以下变体

```
//connect the font
            String FONT_LOCATION = Server.MapPath("~/fonts/arial.ttf");
            BaseFont baseFont = BaseFont.CreateFont(FONT_LOCATION, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
            iTextSharp.text.Font font = new iTextSharp.text.Font(baseFont, iTextSharp.text.Font.DEFAULTSIZE, iTextSharp.text.Font.NORMAL);
            //connected

PdfPCell cell1 = new PdfPCell(new Phrase(lblN, font)) { HorizontalAlignment = 1, VerticalAlignment= 1 }; 
```

# symfony - 为什么这个 json Symfony 输出输出标题

> ID：11536952
> 
> 赞同：1
> 
> 时间：2012-07-18T08:11:56.100
> 
> 标签：symfony, drupal-8

这是我玩 Symfony 和 drupal 8 的第一天，所以如果我的问题很明显，请原谅我。

**使用 Drupal 7：**

```
drupal_json_output(array('products' => array_values($products)));
exit; 
```

json输出很干净：

```
{"products":["item_1","item_2",....]} 
```

**使用 Drupal 8：**

```
use Symfony\Component\HttpFoundation\JsonResponse; 
// some process
print new JsonResponse(array('products' => array_values($products)));
exit; 
```

它与标题一起输出：

```
HTTP/1.0 200 OK
Cache-Control: no-cache
Content-Type:  application/json
Date:          Wed, 18 Jul 2012 07:53:26 GMT

{"products":["item_1","item_2",....]} 
```

你如何摆脱这些标题？

我坚持在[这里](http://api.drupal.org/api/drupal/core!vendor!symfony!http-foundation!Symfony!Component!HttpFoundation!Tests!JsonResponseTest.php/8)阅读参考资料。

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:23:55.290

您可以通过调用仅获取响应的“内容” `$response->getContent()`。

在你的情况下，你可以做

```
use Symfony\Component\HttpFoundation\JsonResponse; 
// some process
$response = new JsonResponse(array('products' => array_values($products)));
print $response->getContent();
exit; 
```

但是，请注意，这将是一种不好的做法，因为您会在此过程中丢失响应标头，并且不会告诉您响应的内容类型是什么（在这种情况下：“application/json”） ETC ...

我不知道如何用drupal正确地做到这一点，任何提示都值得赞赏。

# html - 溢出：隐藏点和多行文本的结尾

> ID：11536954
> 
> 赞同：1
> 
> 时间：2012-07-18T08:12:00.040
> 
> 标签：html, css

我正在使用 ASP.NET MVC 创建一个 Web 应用程序，它向用户显示一些文章。

并且每篇文章都有一个摘要`div`。

目前，我正在汇总加载整个内容`div`并为此设置此样式`overflow:hidden`。这是结果：

![当前结果](../Images/91c53f892bfa07e3a968de8eb13e7552.png)

但是那条零碎的行（最后一行）**很难**看，而且**整个内容都在下载到用户的计算机上，这对速度和性能不利。**

我想要这样的东西：（下图是我的目标）

![目标](../Images/cebc7a58e6a82b2a7d39eb9013917872.png)

（删除最后一行的零碎文本，并`...`在文本末尾添加）

最好避免将整个内容下载到用户的计算机上。

怎么做？

PS：有人知道这个问题的更好标题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:24:21.660

您可以设置要显示的字符数，然后如果要显示的文本大于限制数，则截断：

```
if(text.Length > 200)
        {
            text.Substring(0, 200) + "..."; 
        } 
```

或者，如果您正在构建系统，您可以创建一个有限的字段来保存预览文本，并在列表中显示预览文本而不是大内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:30:46.890

将您的文本放在另一个 div 中并使用`height`+`line-height`

工作示例：http: [//jsfiddle.net/DNh4W/2/](http://jsfiddle.net/DNh4W/2/)

如果您想以省略号结尾，则 CSS3 中没有针对多行文本的解决方案。您必须使用 javascript，例如： http: [//pvdspek.github.com/jquery.autoellipsis/](http://pvdspek.github.com/jquery.autoellipsis/)

jquery autoellipsis 示例：http: [//jsfiddle.net/bdM89/1/](http://jsfiddle.net/bdM89/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:18:55.537

如果您在浏览器兼容性方面使用 CSS3 没有问题，您可以使用 CSS 截断文本，就像在[本教程](http://sharonminsuk.com/blog/2010/07/22/css3-text-truncation-and-ellipses-even-in-firefox-and-without-the-styling-constraints/)中一样：

```
.ellipsis {
    overflow: hidden;
    text-overflow: ellipsis;
    -o-text-overflow: ellipsis; /* required for Opera */
    -ms-text-overflow: ellipsis;    /* required for IE8, allegedly */
    -moz-binding: url('ellipsis.xml#ellipsis');    /* for Firefox; details [here][2] */
} 
```

关于 mozilla firefox，[这里](http://mattsnider.com/css-string-truncation-with-ellipsis/)有一个如何使用 XMLs 处理它的教程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:29:00.367

首先，我认为应该在服务器端截断文本（到一定数量的字符）并添加省略号。

然后，如果您只想使用 CSS 执行此操作，您只需让 div 的高度为自动。它可能不会对所有人都一样，但它会看起来不错。

# jquery-mobile - jQuery Mobile - 页面未重新加载

> ID：11536955
> 
> 赞同：0
> 
> 时间：2012-07-18T08:12:04.803
> 
> 标签：jquery-mobile

我是 jQuery Mobile 的新手。我正在尝试从页面#one1 移动到#page2。#page2 包含一个地址簿表单。如果我在表格中填写一些内容并单击后退按钮移动到#page1，然后我再次移动到#page2，表格将显示所有以前填写的数据。

我希望当我返回#page2 时所有字段都为空白。

我也尝试过发出警报。警报将第一次弹出，但当我再次访问此页面时未显示。

```
$('#page2').live('pageinit',function(event){
alert("Edit");
}); 
```

谢谢维韦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:16:28.217

在显示#page2 的按钮中，不要立即移动到#page2，首先调用一个清除字段的函数。然后你可以移动到#page2 ...

# python - python对象属性和方法

> ID：11536961
> 
> 赞同：-2
> 
> 时间：2012-07-18T08:12:30.320
> 
> 标签：python

在python中，所有数据都是对象，任何对象都应该有属性和方法。有人知道没有任何属性和方法的python对象吗？

```
>>> len(dir(1))
64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:39:04.393

这很容易通过[覆盖`__dir__`](http://docs.python.org/library/functions.html#dir)and来实现`__getattribute__`：

```
class Empty(object):
    def __dir__(self):
        return []
    def __getattribute__(self, name):
        raise AttributeError("'{0}' object has no attribute '{1}'".format(type(self).__name__, name))

e = Empty()
dir(e)
[]
e.__name__
AttributeError: 'Empty' object has no attribute '__name__' 
```

（在[python2](/questions/tagged/python2 "显示标记为“python2”的问题")中，`Empty`需要是新式类，所以`class Empty(object):`是必需的；在[python3](/questions/tagged/python3 "显示标记为“python3”的问题")中，旧式类已经灭绝，所以`class Empty:`就足够了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:39:23.153

是的！（或者没有...）

```
def AMeta(name, bases, dct):
    class NoProp:
        pass
    del NoProp.__doc__
    del NoProp.__module__
    return NoProp

class A:
    __metaclass__ = AMeta

print dir(A), 'len', len(dir(A))

print
print 'but... A.__name__ is', A.__name__
print 'Delete it!'
try:
    del A.__name__
except Exception as e:
    print 'Did not work: ', repr(e)

print
print 'and... A.__dict__ is', A.__dict__
print 'Delete it!'
try:
    del A.__dict__
except Exception as e:
    print 'Did not work: ', repr(e)

print
print 'and... A.__bases__ is', A.__bases__
print 'Delete it!'
try:
    del A.__bases__
except Exception as e:
    print 'Did not work: ', repr(e)

print 
print 'What is the type of A?'
t = type(A)
print t, 'which is a', type(t)

print "All of these will raise an AttributeError:"
print "A.__class__, A.__module__, (and maybe some others which are usually there too...)" 
```

通常，所有对象都有**一些**属性，无论这些属性是什么。但是当使用元类时，您可以自定义创建类的方式，然后就可以了。

但是，即使`dir`为空，您仍然可以访问`A.__name__`, `A.__dict__`, `A.__bases__`.

这就是我所做的测试给我的：

```
[] len 0

but... A.__name__ is NoProp
Delete it!
Did not work:  TypeError('__name__ must be a string object',)

and... A.__dict__ is {}
Delete it!
Did not work:  TypeError('__dict__ must be a dictionary object',)

and... A.__bases__ is ()
Delete it!
Did not work:  TypeError('__bases__ must be a tuple object',)

What is the type of A?
<type 'classobj'> which is a <type 'type'>
All of these will raise an AttributeError:
A.__class__, A.__module__, (and maybe some others which are usually there too...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:21:17.117

没有遇到任何这样的对象，它没有任何属性..见下文

```
In [74]: class dummy():
   ....:     pass
   ....:

In [75]: d1 = dummy()

In [76]: dir(d1)
Out[76]: ['__doc__', '__module__']

In [77]: len(dir(d1))
Out[77]: 2 
```

甚至 None 也有属性...

```
In [78]: dir(None)
Out[78]:
['__class__',
 '__delattr__',
 '__doc__',
 '__format__',
 '__getattribute__',
 '__hash__',
 '__init__',
 '__new__',
 '__reduce__',
 '__reduce_ex__',
 '__repr__',
 '__setattr__',
 '__sizeof__',
 '__str__',
 '__subclasshook__'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:21:04.830

您可以创建一个没有任何“公共”属性和方法的对象：

```
class Bare(object):
    pass 
```

但是这个对象会有一些内部/标准的方法和属性：

```
>>> x = Bare()
>>> dir(x)
['__class__',
 '__delattr__',
 '__doc__',
 '__format__',
 '__getattribute__',
 '__hash__',
 '__init__',
 '__new__',
 '__reduce__',
 '__reduce_ex__',
 '__repr__',
 '__setattr__',
 '__sizeof__',
 '__str__',
 '__subclasshook__'] 
```

Python 没有强制私有方法和属性的概念，一切都是公开的。但是，按照惯例，您应该避免外部访问以 开头的方法和属性`_`，这些应该保留供内部使用（Python 内部方法使用双下划线）。在实践中，您可以检查没有任何“公共”属性的实例：

```
>>> filter(lambda a: a[0] != '_', dir(x))
[]

>>> len(filter(lambda a: a[0] != '_', dir(x)))
0 
```

即使您通过覆盖`__dir__`and来作弊`__getattribute__`，内置属性仍然存在，并且可以`__getattribute__`从父类中使用（感谢[martineau](https://stackoverflow.com/users/355230/martineau)指出我这一点）：

```
class FakeEmpty:
    def __dir__(self):
        return []
    def __getattribute__(self, name):
        raise AttributeError("'{0}' object has no attribute '{1}'".format(type(self).__name__, name))

>>> e = FakeEmpty()
>>> object.__getattribute__(e, '__class__')
__main__.Empty 
```

所以答案是：不是真的，但你几乎可以伪造它。

# php - Zend Framework 2 中的路由，跳过 url 中的“索引”操作但获取 id

> ID：11536962
> 
> 赞同：2
> 
> 时间：2012-07-18T08:12:31.823
> 
> 标签：php, zend-route, zend-framework2

我有一个控制器，可以像操作和其他一些操作一样调用`modulename/xmlcoverage`，`index`比如说`testAction()`。这个控制器的 url 是`xml/coverage`.

然后，默认方式是`xml/coverage`映射到我的索引操作。这`xml/coverage/test`映射到 testAction。如果我需要 testAction 的 id，则 url 就像这样`xml/coverage/test/33`。

但是，对于索引操作，它需要是`xml/coverage/index/33` Where I would like it be `xml/coverage/33`。

这是我的路线

```
'xmlcoverage' => array(
        'type'    => 'segment',
        'options' => array(
                'route' => '/xml/coverage[/:action][/:id]',
                'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id'     => '[0-9]+',
                ),
                'defaults' => array(
                        'controller' => 'modulename/xmlcoverage',
                        'action'     => 'index',
                ),
        ),
), 
```

在尝试 url xml/coverage/33 时，我认为 33 应该映射到 id，因为它与操作的正则表达式不匹配，并且两者都是可选的。而且由于它不匹配一个动作，所以应该使用默认值（索引）。

相反，我收到一条错误消息，指出路由无法匹配 url。所以对我来说，它的作用就好像路由是`'/xml/coverage[/:action[/:id]]'`因为我出于某种原因**必须**为其指定操作以识别 id。

我做错了什么，我怎样才能让网址按我的意愿工作？谢谢。

**编辑：这是一个问题。** 在我看来这样做：

```
$this->url('xmlcoverage', array('action' => 'index', 'id' => $someid)) 
```

`xml/coverage/1`实际上在表单上给出了一个会崩溃的 URL ！将路由更改`/xml/coverage[/:action[/:id]]`为至少会使 url 助手生成工作 url。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T06:44:11.657

在与 IRC 上优秀的 ZF2 人员交谈和调试后，我们发现了路由中的一个错误。

在讨论过程中，我为我的问题做了一个小例子，[这里](http://pastebin.com/02GPEnYb)是。正如您从 var dump [here](http://pastebin.com/nkJZ15yj)中看到的那样，该操作在第二种情况下会丢失，它应该默认为“index”。

但是，如果有人现在需要此功能才能正常工作，可以使用以下方法来解决它：

1.  url 助手将添加 /index/ 并且至少它可以工作，而不是`/test[/:action][/:id]`让它成为它的路由。`/test[/:action[/:id]]`
2.  `/test[/:id]`制作一条新路线，除了另一条路线外，您只听。
3.  在你的控制器中，做`public function notFoundAction() { $view = new ViewModel($this->indexAction()); //etc}`Kinda hacky，但是有了这个错误，它会发送一个未找到的动作，你可以捎带它。

# entity-framework - 从集合中删除时删除数据库中的项目（EF 4.3）

> ID：11536963
> 
> 赞同：1
> 
> 时间：2012-07-18T08:12:37.643
> 
> 标签：entity-framework

首先在我的 EF4.3 代码中（但使用明确设计的数据库，而不是由 EF 生成的数据库），我有以下问题。

我有一个实体“WorkPlan”，它可以包含一对多的“Break”实体。在模型中，工作计划有一个 ICollection，但 Break 不知道工作计划。

这是一种聚合关系。“中断”不能存在于工作计划范围之外。

我想要发生的是，当我从工作计划的休息时间集合中删除休息时间时，应该在保存更改时在数据库中删除该休息时间：

```
[Test]
public void ShouldRemoveBreakInDatabase()
{
    // Setup
    var workPlan = WorkPlanBuilder.Build(x => x.AddBreak());
    Save(workPlan);

    // Exercise
    var exerciseContext = CreateDataContext();
    workPlan = exerciseContext.WorkPlans.Single();
    workPlan.RemoveBreak(workPlan.Breaks.Single());
    exerciseContext.SaveChanges();

    // Verify            
    var actual = SqlHelper.ExecuteScalar("select count(*) from Breaks");
    Assert.That(actual, Is.EqualTo(0));
} 
```

但是，SaveChanges() 调用会导致以下异常：

> System.Data.Entity.Infrastructure.DbUpdateException ：保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地在保存时处理异常。有关详细信息，请参阅 InnerException。
> ----> System.Data.UpdateException : 更新条目时出错。有关详细信息，请参阅内部异常。
> ----> System.Data.SqlClient.SqlException：无法将值 NULL 插入到列“WorkPlan_Id”、表“ActivityStore.dbo.Breaks”中；列不允许空值。更新失败。该语句已终止。

似乎很清楚，当从 WorkPlan 的集合中删除 Break 时，EF 假定它应该在数据库中将 WorkPlan_Id 字段设置为 null，但该字段不可为 null。

将以下内容添加到我的数据上下文中：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<WorkPlan>().HasMany(x => x.Breaks).WithRequired();
} 
```

导致不同的异常：

> System.Data.Entity.Infrastructure.DbUpdateException ：保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地在保存时处理异常。有关详细信息，请参阅 InnerException。
> ----> System.Data.UpdateException：来自“WorkPlan_Breaks”关联集的关系处于“已删除”状态。给定多重约束，相应的“WorkPlan_Breaks_Target”也必须处于“已删除”状态。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:18:20.307

我遇到了同样的问题，经过 1.5 小时的谷歌搜索，我找到了解决方案。完成这项任务的关键是所谓的“识别关系”。这些是告诉 EF 实体仅作为其他实体的子实体“存在”的方法，因此将其从其父实体中删除也应将其从数据库中删除。查看相关问题：

*   [是否可以从集合中删除子项并解决 SaveChanges 上的问题？](https://stackoverflow.com/questions/11033348/is-it-possible-to-remove-child-from-collection-and-resolve-issues-on-savechanges) （我实际上会将其标记为重复，但我不知道如何:)）
*   [识别关系和非识别关系有什么区别？](https://stackoverflow.com/questions/762937/whats-the-difference-between-identifying-and-non-identifying-relationships/762994#762994)

总而言之，我的解决方案如下所示：

```
public class Item
{
    [Key, Column(Order = 0), DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    [Key, ForeignKey("Group"), Column(Order = 1)]
    public int GroupId { get; set; }
    public ItemGroup Group { get; set; }
}

public class ItemGroup
{
    public int Id { get; set; }
    public ICollection<Item> Items { get; set; }
} 
```

在数据库 Item.Id 和标识列中，GroupId 是外键（我不使用 EF 自动生成 db）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:10:38.223

我确实想出了一个解决方案。但我更喜欢纯粹的配置。

但它至少与我的 DataContext 实现隔离：

```
 private DbSet<WorkPlan> _workPlans;
    public DbSet<WorkPlan> WorkPlans
    {
        get { return _workPlans; }
        set 
        { 
            _workPlans = value;
            _workPlans.Local.CollectionChanged += LocalWorkPlansChanged;
        }
    }

    private void LocalWorkPlansChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action != NotifyCollectionChangedAction.Add)
            return;

        foreach (var workPlan in e.NewItems.Cast<WorkPlan>())
        {
            var collection = workPlan.Breaks as EntityCollection<Break>;
            if (collection == null)
                continue;
            collection.AssociationChanged += WorkPlanBreaksAssociationChanged;
        }
    }

    private void WorkPlanBreaksAssociationChanged(object sender, CollectionChangeEventArgs e)
    {
        if (e.Action == CollectionChangeAction.Remove)
        {
            var @break = (Break)e.Element;
            Breaks.Remove(@break);
        }
    } 
```

所以，

第 1 步：连接每当 DbSet 的内存中工作计划集合更改时引发的事件。

第 2 步：确定工作计划更改是否是因为新对象。这可能意味着一个新实例化的对象，或者一个从数据存储中加载的对象。

第 3 步：查看添加对象的 WorkPlan.Breaks 集合。如果集合是 EntityCollection<>，则该对象是从数据库中加载的。连接 AssociationChanged 事件以在关联更改时获得通知。

第 4 步：当收到关联更改事件时，检查它是否为“Remove”事件，如果是，则从 Breaks DbSet 中显式删除 Break。

欢迎使用更简单的解决方案。

# email - 单击按钮时添加电子邮件警报

> ID：11536967
> 
> 赞同：-2
> 
> 时间：2012-07-18T08:12:43.637
> 
> 标签：email, alert

这是提交按钮的代码

```
 <div class="submit_btn_input"><input name="submit" id="submit" type="submit"  /></div> 
```

点击它时我需要添加什么来发送电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:16:10.013

检查 PHP 中的 mail() 函数。

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:20:15.797

没有 PHP 尝试将其放入`<form action="mailto:myforms@mydomain.com"></form>`.

[在这里检查](http://www.html-form-guide.com/email-form/email-form-mailto.html)

# java - PopupWindow 适用于 Android 2.1 但不适用于其他版本

> ID：11536970
> 
> 赞同：1
> 
> 时间：2012-07-18T08:13:07.237
> 
> 标签：java, android, android-xml

我尝试创建 PopupWindow 对象。现在我已经遵循 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/toast_root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/toast2_2"
        android:layout_gravity="center"
        android:clickable="true"
        android:maxWidth="270dp"
        android:textColor="#000000"
        android:textSize="18sp" />

    <ImageView
        android:id="@+id/ptr"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/toast2_1" />

</LinearLayout> 
```

并遵循 Java 代码：

```
package com.izhmap.helpers;

import android.graphics.Rect;
import android.graphics.drawable.BitmapDrawable;
import android.text.TextPaint;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.view.WindowManager;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.PopupWindow;
import android.widget.TextView;

import com.izhmap.map.R;

public class DynamicPopup {

    private int MAX_POPUP_WIDTH = 270;

    private PopupWindow _pw = null;
    LinearLayout _toastLayout = null;
    View _parentView = null;
    TextView _popupText = null;
    // class constructor
    public DynamicPopup(LinearLayout toastLayout, View parentView, DisplayMetrics dm) {
        MAX_POPUP_WIDTH*=dm.density;
        _toastLayout = toastLayout;

        _popupText = (TextView)_toastLayout.findViewById(R.id.text);

        _parentView = parentView;

        _pw = new PopupWindow(parentView.getContext());
        _pw.setTouchable(true);
        _pw.setWindowLayoutMode(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        _pw.setBackgroundDrawable(new BitmapDrawable());
        Log.d("DynamicPopup","st: DynamicPopup(), MAX_POPUP_WIDTH = "+MAX_POPUP_WIDTH);
    }

    public void showPopup(int x, int y, String text, ViewGroup.MarginLayoutParams mpl) {
        // Set new text to PopupWindow
        _popupText.setText(text);
        // choose the appropriate background size
        Rect bounds = getPopUpRect(text);

        int h = bounds.height();
        int w = bounds.width();

        Log.d("IzhMap","Popup: w="+w+" w = "+h);

        _toastLayout.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);
        h = _toastLayout.getMeasuredHeight();
        w = _toastLayout.getMeasuredWidth();

        if((x - (w / 2)) < 0) {
            mpl.setMargins(x - 11, 0, 0, 0);
        } else {
            if((x + (w / 2)) > 10000) {
                mpl.setMargins(x + 11, 0, 0, 0);
            } else {
                mpl.setMargins(w / 2 - 11, 0, 0, 0);
            }
        }

        _pw.setContentView(_toastLayout);

        _pw.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
        _pw.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);

        _pw.setClippingEnabled(true);
        Log.d("IzhMap","Popup:show x="+(x-w/2)+" y = "+y);

        if(h > 64) {
            _pw.showAtLocation(_parentView, Gravity.NO_GRAVITY, x - w / 2, y - bounds.height() - 30);
        } else {
            _pw.showAtLocation(_parentView, Gravity.NO_GRAVITY, x - w / 2, y - bounds.height() - 15);
        }
        _pw.update(_parentView, x - w/2, y - h, -1, -1);
    }

    private Rect getPopUpRect(String text) {
        Rect r = new Rect();

        TextPaint tp = _popupText.getPaint();
        float fontSize = _popupText.getTextSize();

        tp.setTextSize(fontSize);
        tp.getTextBounds(text, 0, text.length(), r);

        Log.d("IzhMap", "popUp need width: " + r.toShortString());

        int w = r.width();
        int h = r.height();

        if (w>=MAX_POPUP_WIDTH) {
            while (w>=MAX_POPUP_WIDTH) {
                w-=MAX_POPUP_WIDTH;
                h+=r.height();
            }

            r.set(0, 0, MAX_POPUP_WIDTH, h);
        }

        Log.d("IzhMap", "popUp width: " + r.toShortString());

        return r;
    }

    public void hidePopup(){
        _pw.dismiss();
    }

    public boolean isShowing() {
        return _pw.isShowing();
    }
} 
```

如果应用程序在 Android 2.1 设备上运行，那么我可以看到这个弹出窗口。如果应用程序在 Android 4.1 或 3.2 设备上运行，则我看不到弹出窗口。此应用程序运行时，Android 2.3 设备没有响应。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:47:28.200

我发现了问题。当我删除以下行时：

```
_pw.update(_parentView, x - w/2, y - h, -1, -1); 
```

PopupWindow 工作正常。

# django - django 导入视图

> ID：11536972
> 
> 赞同：0
> 
> 时间：2012-07-18T08:13:17.923
> 
> 标签：django, import, views

我正在编写的 Django 应用程序有问题。我有一个视图 *project_detail*，它应该仅限于作为该项目的项目负责人的用户。我已经使用在单独的文件*helpers.py*中定义的装饰器解决了这个问题。如果发生错误，则调用另一个视图*错误。*这是两个文件*views.py*和*helpers.py*

```
#views.py#
from projectmanagement.helpers import is_projectleader    

@is_projectleader
def project_detail(request,id):
...

def error(request, errormessage)
....
    return render_to_response(...)

--------------------------------------
#helpers.py#
def is_projectleader():
....
if not request.user in project.projectleaders:
    return error(request,errormessage="You are not a projectleader")
.... 
```

现在我收到一个错误*未定义*的错误，但如果我添加

```
from projectmanagement.views import error 
```

我收到一个错误，我无法导入*error*。你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:17:38.367

导入模块本身，并引用该模块的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:22:47.917

首先 - 请写下整个堆栈跟踪和错误消息。第二 - 如果您将所有内容都放在一个文件中（例如views.py）会发生什么。这似乎是循环依赖——从views.py你正在导入helpers.py；从 helpers.py 你正在导入views.py。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:50:55.443

您不能同时从另一个模块导入一个模块，反之亦然。将`error`函数的定义移动到`helpers.py`或为像这样的视图创建一个新模块。

# c# - 客户端如何获得服务安全 SSL？

> ID：11536973
> 
> 赞同：0
> 
> 时间：2012-07-18T08:13:36.923
> 
> 标签：c#, wcf, web-services

我有一个服务类：

```
namespace TestService
{
    public class Service:IService 
    {
        #region IService Members

        public string TestCall()
        {
            return "You just called a WCF webservice On SSL(Transport Layer Security)";
        }

        #endregion
    }
} 
```

和配置服务：

```
<configuration>
    <system.serviceModel>
        <services>
            <service behaviorConfiguration="returnFaults" name="TestService.Service">
                <endpoint binding="wsHttpBinding" bindingConfiguration="TransportSecurity" contract="TestService.IService"/>
                <endpoint address="mex" binding="mexHttpsBinding" name="MetadataBinding" contract="IMetadataExchange"/>
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior name="returnFaults">
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                    <serviceMetadata httpsGetEnabled="true"/>
                    <serviceTimeouts/>
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <bindings>
            <wsHttpBinding>
                <binding name="TransportSecurity">
                    <security mode="Transport">
                        <transport clientCredentialType="None"/>
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <diagnostics>
            <messageLogging logEntireMessage="true" maxMessagesToLog="300" logMessagesAtServiceLevel="true" logMalformedMessages="true" logMessagesAtTransportLevel="true"/>
        </diagnostics>
    </system.serviceModel>
</configuration> 
```

我将服务设置为 IIS，并在 https：“https://localhost/service.svc”和 http：“http://localhost/service.svc”处设置 http、https 服务，当设置 https 我已设置证书” WCF 服务器”。我可以访问地址“https://localhost/service.svc”的服务。我在地址“https://localhost/service.svc”添加了服务引用并调用服务：

```
 ServiceReference1.ServiceClient proxy = new ServiceReference1.ServiceClient();
            proxy.TestCall(); 
```

它返回错误：

> 根据验证程序，远程证书无效。

这个配置客户端：

```
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_IService">
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://thanguk-pc/service.svc" binding="wsHttpBinding" behaviorConfiguration="firstSsl"
        bindingConfiguration="WSHttpBinding_IService" contract="ServiceReference1.IService"
        name="WSHttpBinding_IService" >
        <identity>
          <dns value="WcfServer" />
        </identity>
      </endpoint>
    </client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="firstSsl">
          <clientCredentials>
            <serviceCertificate>
              <authentication certificateValidationMode="None" revocationMode="NoCheck"/>
            </serviceCertificate>
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

客户使用服务有什么问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:38:33.440

WCF 配置对我来说看起来不错。因此，我将开始查看您的证书、证书安装和[主机名](https://stackoverflow.com/questions/3453125/the-remote-certificate-is-invalid-according-to-the-validation-procedure)（正如@flem 所指出的）。谁颁发的证书？听起来它可能是自签名的。[在SSL 握手](http://pic.dhe.ibm.com/infocenter/tivihelp/v2r1/index.jsp?topic=/com.ibm.itame2.doc_5.1/ss7aumst18.htm)期间，客户端将不信任自签名证书。您可以在服务器上运行[netmon](http://www.microsoft.com/en-us/download/details.aspx?id=4865)（打开 TLS 过滤器）并查看 SSL 握手。这可以让您深入了解故障发生的位置。

一个提示是，为了让您的服务正常工作，您应该能够通过 https 从客户端浏览元数据 (.svc)，而不会出现任何浏览器证书错误（例如，chrome 上的绿色锁）。如果浏览器变绿，则通常证书已正确安装和配置。否则，WCF 也会拒绝它（但不会让您选择继续）。

# unix - 使用 grep 和 sed 将一个字符串替换为另一个字符串

> ID：11536975
> 
> 赞同：2
> 
> 时间：2012-07-18T08:13:44.733
> 
> 标签：unix, sed, grep

我想用另一个文件中的字符串替换一个文件中的一个字符串。尽管我对这些命令没有经验，但我希望 grep 和 sed 的某种组合会做得最好。

使这更复杂的是我不知道这两个字符串是什么（我正在尝试自动替换文档上的版本号）。我知道在这两种情况下，我正在寻找的字符串（比如“2.3.4”）前面都有“版本：”

所以我可以说'在“版本：”（我们称之为string1）之后查找单词（或其余行或任何可能的内容）并在另一个文件中执行相同操作（给出string2）并将字符串string1替换为string2。

以下是一些示例文本文件：

文件1.txt

> 这是一个包含
> 更新版本号的文件。
> 版本：2.3.4
> 这是一个包含更多信息的字符串

文件2.txt

> 这是一个配置文件
> 它可能包含一个旧版本号
> 版本：2.3.2
> 请更新这个

因此 file2.txt 的预期输出将变为：

文件2.txt

> 这是一个配置文件
> 它可能包含一个旧版本号
> 版本：2.3.4
> 请更新这个

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:17:39.270

如果您有一个`sed`支持该选项的`-i`选项，

```
sed -i 's/version: .*/version: 1.2.3/' file1 file2 file3 ... 
```

您可能需要调整正则表达式通配符；`.*`匹配到行尾，而`[.0-9]*`匹配最长的点和数字序列。您可能还希望允许周围空白的变化...但是由于这可能是该站点上前 10% 的常见问题解答之一，请在这一点上寻找类似的问题。

从 file1 获取替换字符串并将其应用于 file2、file3 等，例如

```
new=$(sed -n 's/version: //p' file1)
# Use double quotes, not single, in order to expand $new
sed -i "s/version: [.0-9]*/version: $new/" file2 file3 ... 
```

第一次`sed`调用将仅打印找到并删除“版本：”的行（替换为空字符串）。大概文件中只有这样的一行。将输出通过管道传输到`head -n 1`or`uniq`或其他东西，或者查找/创建更精细的`sed`脚本。

您通常在文字字符串周围使用单引号，但由于您不希望`$new`在替换中使用文字，我们使用双引号，这允许 shell 执行变量替换（以及我们在这里不涉及的许多其他替换）在带引号的字符串中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:23:40.620

你可以吗？

```
kent$  head f1 f2
==> f1 <==
This is a file containing
the updated version number.
version: 2.3.4
here is a string with more info

==> f2 <==
This is a configuration file
It could contain an old version number
version: 2.3.2
Please update this

kent$  awk 'NR==FNR{if($0~/^version:/){x=$0;} next;}{gsub(/^version:.*$/,x);print $0}' f1 f2
This is a configuration file
It could contain an old version number
version: 2.3.4
Please update this 
```

# java - 线程“AWT-EventQueue-0”java.lang.NumberFormatException 中的异常：对于输入字符串：“java 中的 78 错误

> ID：11536976
> 
> 赞同：1
> 
> 时间：2012-07-18T08:13:46.980
> 
> 标签：java

我有一个带有味精长度的签名味精：

> 我同意合同中提到的所有条款和条件。3AACBCB0C8FA6A23C72ACBECDE626AC7CD09C9B514CB47E8263150608E915EC2F64F7A13AA7BFEFC49FF2FDE74C0E1F34B33AA964BD03858D67966199A19D4DA5A57566812694AC1B79835EC8A1893DD5CEA709F5B59CB966C6D068837406AB16C762494BD4C9BC0A66E23B5219932FB2DFC82A62D392C0F3C23C793855AAF6C0078

这里 78 只是消息的长度。我需要借助消息长度从签名消息中提取消息。我在java（netbeans）中使用了以下代码：

```
int MsgLen = Integer.parseInt(Msg.substring(Msg.length() - 4));
System.out.println("Message length: "+MsgLen); 
```

但我收到这样的错误：

> 线程“AWT-EventQueue-0”java.lang.NumberFormatException 中的异常：对于输入字符串：“78”

如果有人可以帮助我解决问题，请尽快发布您的答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:01:23.650

Glad you fixed it.

Edit: I was wrong about needing to remove the leading zeros. Integer.parseInt handles this for us. Your original code actually works for your example message. Self contained example:

```
public class IntegerParseTest {
    public static void main(String[] args) {
        String Msg = "3AACBCB0C8FA6A23C72ACBECDE626AC7CD09C9B514CB47E8263150608E915EC2F64F7A13AA7BFEFC49FF2FDE74C0E1F34B33AA964BD03858D67966199A19D4DA5A57566812694AC1B79835EC8A1893DD5CEA709F5B59CB966C6D068837406AB16C762494BD4C9BC0A66E23B5219932FB2DFC82A62D392C0F3C23C793855AAF6C0078";
        Integer MsgLen = Integer.parseInt(Msg.substring(Msg.length() - 4));
        System.out.println("Message length: "+MsgLen);
    }
} 
```

results in:

```
Message length: 78 
```

I guess your messages have trailing white space which wasn't obvious in the question. Anyway, glad you fixed it.

# c# - 最少占用内存的集合？

> ID：11536979
> 
> 赞同：2
> 
> 时间：2012-07-18T08:14:04.693
> 
> 标签：c#, .net, optimization, collections, memory-optimization

除了滚动我自己的集合之外，我想知道哪个现有的（.NET 3.5）集合和 IDictionary 使用的内存最少。

我目前正在使用

*   List<int>，我只添加项目并稍后对其进行迭代。
*   Dictionary<int,int>，我只设置和获取键值对。

注意：我正在做成熟的优化。

编辑：我事先不知道大小，但大约，字典将增长到大约 789679 个元素，并且列表平均包含 10-20 个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:50:41.993

索引始终是空间和性能之间的权衡。列表和字典接口的内存占用最少的实现始终是平面数组。当然，这意味着您的字典性能会很**糟糕**，并且插入性能（对于任何一个）都会*更差*！

对于 10-20 个元素的列表，坦率地说：甚至不要调查。只需使用`List<T>`. 对于如此微不足道的数据量，没有任何明智的问题需要回答。

甚至 789679 也不大。但是，如果您的重点是**内存**，那么简单地对数据进行预排序可能是您最好的选择。然后，您可以使用二进制搜索来查找项目。不如哈希表实现快，但内存少得多：只有 2 个数组（或单个元组数组）。或者换句话说：使用[`SortedList<TKey,TValue>`](http://msdn.microsoft.com/en-us/library/ms132319.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:19:08.023

您可以以 CPU 周期为代价节省一些内存：

```
int[] data;
{
   List<int> temp = ....;
   // fill the list
   data = temp.ToArray();
} 
```

当您事先知道元素的数量时，您可以省去几个步骤。

字典不是那么容易替换的。

# mysql - 如何查找给定列表值中不存在于 mysql 表中的每个条目？

> ID：11536983
> 
> 赞同：0
> 
> 时间：2012-07-18T08:14:29.623
> 
> 标签：mysql

首先，我有一个包含产品数据的 mysql 表，包括一个 EAN 代码（没什么特别的，只是一个数字代码）。

其次，我有 EAN 代码值列表。此列表不存储在任何表中，它是由用户输入创建的。

有没有办法从我的列表中找到产品表中不存在的每个 EAN 代码，而无需先将 EAN 列表存储在表中？

例如，假设 products 表中有以下数据：

```
id: 1, ean: 12345
id: 2, ean: 23456 
```

以及要比较的列表：

```
12345,23456,88888,99999 
```

在这种情况下，期望的结果是

```
88888,99999. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:19:16.277

这是解决方案：

```
SELECT tmp_list.ean FROM (
                          SELECT 12345 AS ean UNION
                          SELECT 23456 AS ean UNION
                          SELECT 88888 AS ean UNION
                          SELECT 99999 AS ean
                         ) AS tmp_list
                    WHERE ean NOT IN (
                                       SELECT ean FROM table_name
                                     ) 
```

如果您的列表元素数量较少，这会很有帮助。

# sql - 从孙表中检索多条记录

> ID：11536989
> 
> 赞同：0
> 
> 时间：2012-07-18T08:14:44.907
> 
> 标签：sql, sql-server-2008

以下 sql 查询不起作用。

```
select UserName 
from [User] 
where UserID Like 
      ( select UserID 
        from UserRoles 
        where RoleID =
              ( select RoleID 
                from Roles 
                where RoleName='Manager'
              )
      ) 
```

在这里，我们正在使用 3 个表`User, UserRoles, Roles`。它显示错误如下

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:21:06.497

错误的原因是子查询返回多行。

当您有类似`a = b`或 的条件时`a LIKE b`，双方都应该是一个项目。如果任一侧是子查询，则应注意子查询始终返回 0 或 1 行（并且永远不会超过一个）。

您可以使用 Joins 重写或将`LIKE`and更改`=`为`IN`：

```
select UserName 
from [User] 
where UserID IN                          --- LIKE replaced
      ( select UserID 
        from UserRoles 
        where RoleID IN                  --- equality (=) replaced
              ( select RoleID 
                from Roles 
                where RoleName = 'Manager'
              )
      ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:19:25.363

你需要了解join

```
SELECT UserName
FROM
     [User]
          inner join UserRoles on [User].UserID=UserRoles.UserID
          inner join Roles on UserRoles.RoleID=Roles.RoleID
WHERE
     RoleName='Manager' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:22:26.593

```
select 
    UserName 
from 
    [User] as u 
inner join 
    (select UserID from UserRoles where RoleID in (select RoleID from Roles where RoleName='Manager'))
as t on u.userId like t.userid+%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:34:34.163

```
 select U.UserName 
        from UserRoles UR join Roles R
        on UR.RoleID=R.RoleID
        join [User] U
        on U.UserID like '%'+UR.UserID+'%'
        where R.RoleName='Manager' 
```

# scala - 将我的库模式应用于类层次结构

> ID：11536992
> 
> 赞同：3
> 
> 时间：2012-07-18T08:14:47.077
> 
> 标签：scala, polymorphism, implicit

我有以下类层次结构。

```
sealed abstract class A
case class B extends A
case class C extends A 
```

现在，我想向`foo`classes `A`、`B`和`C`. 但我不想以任何方式改变课程。所以我如下应用皮条客我的图书馆模式。

```
abstract class RichA(a: A) {
    def foo
}
class RichB(b: B) extends RichA(b){
    def foo = { println("B"); //do something with b}
}
class RichC(c: C) extends RichA(c) {
    def foo = { println("C"); //do something with c}
}
/////////////
implicit def A2RichA(a: A) = {
    a match {
    case a: B => new RichB(a)
    case a: C => new RichC(a)
    }
}
implicit def B2RichB(b: B) = new RichB(b)
implicit def C2RichC(c: C) = new RichC(c)
/////////////
def test() = {
    def printA(a: A) = {
        a.foo
    }
    val obj = new C
    printA(obj)
}
test() //This prints "C" 
```

这是可行的，但是`A2RichA`隐式函数的实现对我来说有点难看，因为它涉及 A 的每个子类的 case 语句。这可以用更优雅的方式完成吗？基本要求是，如果我调用`foo`type 的对象`A`，它应该调用适当的方法`foo`，`B`或者`C`取决于对象的动态类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:55:58.733

通过允许编译器提供正确的转换，您可以使您的`A2RichA`方法更加优雅（或难以理解，具体取决于您的观点）：

```
implicit def A2RichA(a: A): RichA = 
   a match {
      case b: B => b // the compiler turns this into B2RichB(b)
      case c: C => c // the compiler turns this into C2RichC(c)
   }

implicit def B2RichB(b: B): RichA = new RichB(b)

implicit def C2RichC(c: C): RichA = new RichC(c) 
```

但是，我认为没有更简单的方法可以解决基本问题：您希望提供基于参数的*动态*类型的转换。隐式搜索发生在编译时，因此只能提供基于*静态*类型的转换。

您可以在运行时反思性地搜索转换，但这既不简单也不优雅（对于如此小的层次结构当然是不可取的）。

由于您的层次结构是密封的，如果您在向层次结构添加新类时忘记提供转换，编译器*会警告您。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:46:30.537

**第一种方法：** -根据OP不足-

假设单个实现`foo`适合您的层次结构中的所有类，这将是可行的：

```
sealed abstract class A
case class B() extends A
case class C() extends A

class RichA(a: A) {
  def foo() { println(this.a.getClass.getSimpleName) }
}

implicit def a2RichA(a: A): RichA = new RichA(a)

(new C).foo() /* anon$1$C */ 
```

**第二种方法：** -- 缺乏动态调度 --

我的第二种方法受到[Scala 集合库](http://www.artima.com/scalazine/articles/scala_collections_architecture.html)内部结构的启发。但是，它缺乏动态调度，所以它仍然不能解决你的问题。

```
sealed abstract class A
case class B() extends A
case class C() extends A

abstract class RichA(a: A) {
  def foo(): Unit
}

class RichB(b: B) extends RichA(b) {
  def foo() { println("Doing B-specific stuff") }
}

class RichC(c: C) extends RichA(c) {
  def foo() { println("Doing C-specific stuff") }
}

sealed trait RichBuilder[T <: A] {
  def apply(t: T): RichA
}

implicit object RichB extends RichBuilder[B] {
  def apply(b: B) = new RichB(b)
}

implicit object RichC extends RichBuilder[C] {
  def apply(c: C) = new RichC(c)
}

implicit def a2RichA[T <: A](t: T)
                            (implicit rb: RichBuilder[T])
                            : RichA = {

  rb(t)
}

(new B).foo() /* B-specific */
(new C).foo() /* C-specific */
// (new C).asInstanceOf[A].foo() /* ERROR: Can't find an implicit */ 
```

**索赔：**

如果您想要取决于对象的运行时类型的行为，我可以看到两种可能性：

1.  模式匹配
2.  动态调度

在您的原始代码中使用的模式匹配似乎会导致您在执行匹配的代码中有一个位置。因此，你的类层次结构的扩展需要改变那个地方——这可能是不可能的，例如，如果层次结构是由客户扩展的。

动态调度没有这个缺点，这可能是为什么在 Scala 集合中使用这种方法的原因（在文章中简要提到过）。所以你可以尝试使用双重调度（参见[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)）但是，这有一个缺点，即基类`A`必须已经声明了一个相应的方法——这在某种程度上违背了皮条客我的图书馆模式的目标。Scala 2.10 的新[动态](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.Dynamic)特性在这里可能会有所帮助，但由于缺少经验，我无法对此发表评论。

# sql-server - 如何在where语句中执行存储过程

> ID：11536993
> 
> 赞同：0
> 
> 时间：2012-07-18T08:14:47.367
> 
> 标签：sql-server, select, stored-procedures

`id`如果我有一个带有 ' ' 并返回 ' '的存储过程`age`。假设它的名字是`getAge` 并且我想使用这个存储过程来获取年龄，给定`id`

如果我有这样的查询：

```
select id, age where age > ( getAge id) 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:16:59.060

假设您使用的是 SQL Server

```
Declare @t table(age int)
insert into @t
EXEC procedure_name

select id, age where age > (select age from @t) 
```

# jquery - 在哪种情况下使用 .append() 更好，哪个 .appendTo()？

> ID：11536994
> 
> 赞同：8
> 
> 时间：2012-07-18T08:14:48.897
> 
> 标签：jquery, append, prepend

除了语法之外，这些函数之间没有太大区别：

```
$('.target').append('text');
$('text').appendTo('.target'); 
```

正如[jQuery 文档](http://api.jquery.com/append/)中所说：

> .append() 和 .appendTo() 方法执行相同的任务。主要区别在于语法，内容和目标的位置。使用 .append()，方法前面的选择器表达式是插入内容的容器。另一方面，使用 .appendTo()，内容在方法之前，作为选择器表达式或作为动态创建的标记，它被插入到目标容器中。

**那么在哪种情况下最好使用 .append()，以及哪个 .appendTo()？** 哪些代码示例只适合这两个函数中的一个而另一个不够好？

同样的问题适用于：

*   [.prepend()](http://api.jquery.com/prepend/)与[.prependTo()](http://api.jquery.com/prependTo/)
*   [.before()](http://api.jquery.com/before/)与.insertBefore( [)](http://api.jquery.com/insertBefore/)
*   [.after( )](http://api.jquery.com/after/)与[.insertAfter()](http://api.jquery.com/insertAfter/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:19:58.477

你自己说的——没有太大区别。但是，我对使用什么的选择通常取决于方法链接，前提是您已经引用了元素。

IE

```
var _target, _content;

_target.append(_content).addClass('foo');
// will add the foo class to _target

_content.appendTo(_target).addClass('foo');
// will add the foo class to _content 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:19:50.027

创建元素时，使用`.appendTo`等价物会更顺畅

```
$("<div>", {text: "hello"}).appendTo("body"); 
```

对比

```
$("body").append( $("<div>", {text: "hello" }) /*Awkward having to call jQuery constructor here*/); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:21:58.307

我认为主要有两点需要考虑：

1.  您已经参考了哪些内容？如果您已经有一个包含要附加的元素的 jQuery 对象，那么使用`.appendTo()`而不是选择要附加的元素然后使用`.append()`.

2.  您想要/需要链接功能吗？jQuery 擅长的一件事是允许您将函数链接在一起，因为每个函数都返回一个 jQuery 对象。显然，如果您想在要附加的元素上调用函数，您将需要使用`.appendTo()`，以便在此之后链接的任何函数都将应用于要附加的元素，而不是要附加的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T08:24:54.353

## **在上下文中**

*   就我个人而言，我使用这两个函数取决于我的函数正在执行的指令集或它们的使用位置（**上下文**），您*阅读*代码的方式可能会改变您更喜欢*编写*代码的方式，并且主观上感觉更好给你自己的。

无论哪种方式，它都是相当字面的，我发现自己不假思索地自动编写每一个。

在每种情况下，如果主题是您正在操作的区域，

* * *

```
$(target).append(content)
//within a function based around manipulating a specific area 
```

似乎更有意义，而如果功能的主题是新内容，那么

```
$(content).appendTo(target);
//appending data to something 
```

更有意义。

* * *

## **链接函数**

*   同样重要的是要注意，在每种情况下链接函数时也更有意义。IE。如果你已经在处理一个元素

* * *

```
$(target).toggle().append(content); 
```

* * *

比添加另一行更有意义，反之亦然。

## **资源**

*   [.append() （jQuery 文档）](http://api.jquery.com/append/)

*   [.appendTo()（jQuery 文档）](http://api.jquery.com/appendTo/)

*   [关于该主题的一篇很好的博客文章（请参阅 .append() 和 .appendTo() 之间的区别）](http://php.refulz.com/dom-insertion-with-jquery-append-and-appendto/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-21T11:43:53.440

就像他们说的，大多数 append() 和 appendTo 产生相同的结果。但是，当您开始链接结果时，您会看到不同之处！

目标 HTML：

```
<DIV class=.inner1><SPAN></span><SPAN></span></div>
<DIV class=.inner2><SPAN></span><SPAN></span></div> 
```

首先使用 append()：

```
$( ".inner1" )
  .append   ( "<p>Test</p>" )
  .addClass ( "addBorder" ); 
```

产生：

```
<DIV class="inner1 addBorder"><SPAN></span><SPAN></span>
<P>Test</p>
</div> 
```

其次是 appendTo()

```
$( "<p>Test</p>" )
.appendTo ( ".inner2" )
.addClass ( "addBorder" ); 
```

产生：

```
<DIV class="inner2">
    <SPAN></span><SPAN></span>
    <P class="addBorder">Test</p>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T08:20:45.447

当您将几个 jQuery 操作链接在一起时，它很有用。像这样：

```
$('.target').css({display:"block"}).fadeOut().appendTo('.somewhere');
// appends target to somewhere 
```

或者：

```
$('.target').css({display:"block"}).fadeOut().append('.somewhere');
// appends somewhere to target 
```

这两个是不同的动作，因此同时拥有它们很有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T08:36:09.013

这主要是口味问题。

一种`appendTo`更方便的情况是当您引用元素而不是 jQuery 对象时，例如在变量中`dest`：

```
$("<div/>").appendTo(dest); 
```

要使用该`append`方法，您必须为元素创建一个 jQuery 对象才能调用它：

```
$(dest).append($("<div/>")); 
```

# java - 从 JSON 对象或 JSON 字符串创建 Jasper 报告 PDF 表单

> ID：11536995
> 
> 赞同：14
> 
> 时间：2012-07-18T08:14:57.050
> 
> 标签：java, json, report

使用 JRBeanCollectionDataSource 创建 Jasper 报告（PDF、Excel、Csv）时很好。这意味着 .jrxml 文件接受 pojo 的集合作为处理报告的输入。

现在，我一直在尝试使用相同的 .jrxml 但来自 JSON 对象创建碧玉报告。我尝试了以下方法，但 pdf 报告中的所有值均为空

```
Resource resource = new ClassPathXmlApplicationContext().getResource("classpath:reports/project.jrxml");
JsonDataSource ds = new JsonDataSource(new File("c:\myjson.json"));
jasperDesign = JRXmlLoader.load(resource.getInputStream());
JasperReport jasperReport  = JasperCompileManager.compileReport(jasperDesign);
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport,  parameters,  ds);
JasperExportManager.exportReportToPdfFile(jasperPrint, destination+fileName+".pdf"); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-20T08:24:26.267

我一直在努力使用 JSON 作为 Jasper 报告的数据源，并且由于网络上缺乏像样的示例，我想我会在此处发布此内容以供将来参考。

这个例子是如何使用 iReport 设计器和一个 JSON 数据源。

首先，输入 JSON：

```
{ 
    "userName": "Evil Raat",
    "details": {
        "email": "not_really@test.com"
    }
} 
```

然后在 iReport Designer 中创建一个 JSON 数据源并将其指向您的文件（将所有其他详细信息保留为默认值）

接下来可以使用下面的 jrxml 模板将上面的 JSON 渲染成报告：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sample" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a894078a-929b-4aae-a1d0-46485f0f8835">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString language="json">
        <![CDATA[]]>
    </queryString>
    <field name="userName" class="java.lang.String">
        <fieldDescription><![CDATA[userName]]></fieldDescription>
    </field>
    <field name="userEmail" class="java.lang.String">
        <fieldDescription><![CDATA[details.email]]></fieldDescription>
    </field>
    <title>
        <band height="200" splitType="Stretch">
            <textField>
                <reportElement uuid="3b74775b-4555-43c3-bdf2-1677145c8660" x="0" y="31" width="555" height="20"/>
                <textElement textAlignment="Right">
                    <font fontName="Helvetica" size="12" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{userName}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="aa6cc7c8-2ca1-4f0f-92e2-c466083daba0" x="0" y="54" width="555" height="20"/>
                <textElement textAlignment="Right">
                    <font fontName="Helvetica" size="12" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{userEmail}]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

**注意：**您必须先定义字段元素，然后才能使用它们。它们应该是使用标准点表示法的 JSON 输入文件根目录的 JSON 路径。有关示例，请参见上面的 fieldDescription 元素。

定义字段后，您可以在文本字段或其他任何内容中使用其计算值：

希望对一些人有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-20T05:36:44.140

这就是我在 jasper 中处理 json 数组的方式

假设我想报告以下数组。

```
[
  {"name":"Jerry", "value":"Jesus"},
  {"name":"Gideon", "value": "Loves"},
  {"name":"Eva", "value": "You"}
] 
```

设计报告时，请确保将字段命名为与 json 字段名称完全相同的名称。所以在设计器中我会添加两个字段，分别称为**name**和**value**。您甚至可以根据需要向报表设计器添加任意数量的参数。对于这个例子，我将在 Jasper Studio 中添加一个名为**title的参数。**

现在这里是 java 代码，它将基于这个测试数组创建 jasper 报告。我将在代码中对 json 数据进行硬编码，但您可以从文件或任何您认为最好的方式加载。我评论了代码以解释正在发生的事情。

```
import net.sf.jasperreports.engine.export.JRHtmlExporterParameter;
import net.sf.jasperreports.engine.export.JRXlsExporterParameter;
import net.sf.jasperreports.engine.export.JRHtmlExporter;
import net.sf.jasperreports.engine.export.JRXlsExporter;
import net.sf.jasperreports.engine.data.JsonDataSource;
import net.sf.jasperreports.engine.JRExporterParameter;
import net.sf.jasperreports.engine.JasperExportManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.util.JRLoader;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperPrint;
import org.apache.commons.codec.binary.Base64;
import java.util.HashMap;
import java.util.Locale;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.io.*;

//Class Name. This must match the class name you put in your build.gradle file
public class JasperPDFExample {
 public static void main(String[] args) {
  try {
   try {
    //Our json object. This can be loaded from file
    String rawJsonData = "[{\"name\":\"Jerry\", \"value\":\"Jesus\"},"
                       + "{\"name\":\"Gideon\", \"value\": \"Loves\"},"
                       + "{\"name\":\"Eva\", \"value\": \"You\"}"
                       + "]";
    //Load compiled jasper report that we created on first section.
    JasperReport report = (JasperReport) JRLoader.loadObject(new File("/home/jerry/Sample.jasper"));
    //Convert json string to byte array.
    ByteArrayInputStream jsonDataStream = new ByteArrayInputStream(rawJsonData.getBytes());
    //Create json datasource from json stream
    JsonDataSource ds = new JsonDataSource(jsonDataStream);
    //Create HashMap to add report parameters
    Map parameters = new HashMap();
    //Add title parameter. Make sure the key is same name as what you named the parameter in jasper report.
    parameters.put("title", "Jasper PDF Example");
    //Create Jasper Print object passing report, parameter json data source.
    JasperPrint jasperPrint = JasperFillManager.fillReport(report, parameters, ds);
    //Export and save pdf to file
    JasperExportManager.exportReportToPdfFile(jasperPrint,"/home/jerry/jasperpdfexample.pdf");
   } catch (JRException ex) {
    ex.printStackTrace();
    throw new RuntimeException(ex);
   } catch (Exception ex) {
    ex.printStackTrace();
    throw new RuntimeException(ex);
   }
  } catch (Exception ex) {
   ex.printStackTrace();
   throw new RuntimeException(ex);
  }
 }
} 
```

感谢[https://mis.io/pub/how-to-create-a-jasper-pdf-report-from-a-json-datasource-in-java/](https://mis.io/pub/how-to-create-a-jasper-pdf-report-from-a-json-datasource-in-java/)我能够让它与设置一起工作java for jasper 使用 gradle 构建工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T17:41:51.583

如果你在 Java 中这样做，你会在自己的脚下开枪。

Groovy 示例要简单得多：

```
@Grab(group='net.sf.jasperreports', module='jasperreports', version='6.17.0')

import net.sf.jasperreports.engine.JasperCompileManager
import net.sf.jasperreports.engine.JasperFillManager
import net.sf.jasperreports.engine.JasperExportManager
import net.sf.jasperreports.engine.data.JsonDataSource

def xmlFile = "report.xml"
def jrReport = JasperCompileManager.compileReport(xmlFile)

def url = 'https://jsonplaceholder.typicode.com/users'
def is = new URL(url).openStream()
def ds = new JsonDataSource(is)

def params = [:]
def jrPrint = JasperFillManager.fillReport(jrReport, params, ds)

JasperExportManager.exportReportToPdfFile(jrPrint, "report.pdf") 
```

报告模板：

```
<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN"
        "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">

<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
   http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="report" topMargin="20" bottomMargin="20">

    <queryString language="json">
        <![CDATA[]]>
    </queryString>

    <field name="id" class="java.lang.Long"/>
    <field name="name"/>
    <field name="username"/>

    <detail>
        <band height="15">

            <textField>
                <reportElement x="0" y="0" width="50" height="15"/>
                <textElement textAlignment="Right" verticalAlignment="Middle"/>
                <textFieldExpression class="java.lang.Long">
                    <![CDATA[$F{id}]]>
                </textFieldExpression>
            </textField>

            <textField>
                <reportElement x="70" y="0" width="100" height="15" />

                <textElement textAlignment="Left" verticalAlignment="Middle"/>
                <textFieldExpression>
                    <![CDATA[$F{name}]]>
                </textFieldExpression>
            </textField>

            <textField>
                <reportElement x="190" y="0" width="100" height="15" />
                <textElement textAlignment="Right" verticalAlignment="Middle"/>
                <textFieldExpression>
                    <![CDATA[$F{username}]]>
                </textFieldExpression>
            </textField>

        </band>
    </detail>

</jasperReport> 
```

在示例中，我们从流行的 API 测试网站[https://jsonplaceholder.typicode.com/users](https://jsonplaceholder.typicode.com/users)获取数据，并选择三个字段显示在我们的报告中。

运行`$ groovy report.gvy`