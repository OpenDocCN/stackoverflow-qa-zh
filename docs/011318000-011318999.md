# StackOverflow 问答 11318000-11318999

# c# - Modifying value of structure passed to DLL from C#

> ID：11318002
> 
> 赞同：3
> 
> 时间：2012-07-03T19:40:21.193
> 
> 标签：c#, dll, struct, marshalling

I am trying to do 2 things: get a return value from a C dll function, and have that same function modify 1 of the members of a structure that is passed to it. After much experimentation I was able to get the function to return a value, but I am still unable to get it to return a modified value to the C# code; the value remains (unmodified) as 0. I've tried lots of variations (ref, [In,Out], etc) to no avail

```
using System;
using System.Drawing;
using System.Linq;
using System.Runtime.InteropServices;

namespace Vexing.Problem{
    public class myIdx : VexingObject {
        public myIdx(object _ctx) : base(_ctx) { }
        private IPlotObject plot1;
    [StructLayout(LayoutKind.Sequential)] 
    public class PLEX { public int yowser; }

    [DllImport("my.dll", CharSet = CharSet.Unicode)]
    public static extern int cFunction(
               [MarshalAs(UnmanagedType.LPStruct)] PLEX mPlex);

    PLEX a;
    protected override void Create() { a = new PLEX(); }
    protected override void CalcBar() {
        int mf = cFunction(a);
        plot1.Set(a.yowser); }
}}

// pertinent c dll code
typedef struct s_plex { int yowser;} cplex;

extern "C" __declspec( dllexport )  
int cFunction(cplex *Cplex){ Cplex->yowser = 44; return 1;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:26:11.957

Your import declaration is wrong.
Setting the `CharSet` in your case doesn't make any sense (there are no string parameters in the native function declaration).
If you want to pass class instance, ref/out also must be thrown away (classes being passed by reference).
And the main point: `extern "C" __declspec( dllexport )` means `CallingConvention.Cdecl`.

**UPDATE**. Here's complete working code sample:
C++ (header):

```
struct CStruct
{
    int myField;
};

extern "C" __declspec( dllexport ) int MyFunction(CStruct *pStruct); 
```

C++ (code):

```
int MyFunction(CStruct *pStruct)
{
    pStruct->myField = 100;
    return 1;
} 
```

C#:

```
[StructLayout(LayoutKind.Sequential)]
class MyStruct
{
    public int myField;
};

class Program
{
    MyStruct myStruct = new MyStruct();

    [DllImport("MyLib.dll", CallingConvention = CallingConvention.Cdecl)]
    static extern int MyFunction(MyStruct pStruct);

    static void Main(string[] args)
    {
        var p = new Program();
        var result = MyFunction(p.myStruct);

        Console.WriteLine("Result: {0}, MyStruct.myField = {1}", result, p.myStruct.myField);
    }
} 
```

Prints:

> Result: 1, MyStruct.myField = 100

# java - 如何设置 UniObjects 的时区？

> ID：11318004
> 
> 赞同：3
> 
> 时间：2012-07-03T19:40:21.537
> 
> 标签：java, u2, unidata, uniobjects

我正在使用 Uniobjects for Java 从 Win7Pro 连接到 AIX 5.3 机器。当 udcs 用户登录时，会执行 /etc/profile。似乎 /etc/environment 没有来源。

如果 rpc 方法（使用 aix 用户 'sbr'）调用使用 TIME() 的 Unidata 子例程，则其结果为 UTC。如果同一个用户 ('sbr') 登录并执行相同的操作（没有 rpc），则 TIME() 返回 UTC-5。

在与我的支持人员讨论这个问题时，我被告知 UniObjects rpc 调用执行 /etc/profile，但从不检查用户主目录中的 .profile。就像我在第一句话中所说的那样，似乎也没有使用 /etc/environment 。

注意：我最初没有将其标记为 java，因为这与 VB 绑定到同一个 rpc 服务是一致的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:28:47.900

这不是您将通过 UniObjects 解决的问题。您需要确保在服务器本身上为 udcs 用户设置了正确的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:34:51.390

我花了几个小时试图解决这个问题。

这里真正的解决方案是不要依赖 TIME() 函数来处理任何重要的事情。如果您在此特定盒子上解决问题，只需将其移动到另一个盒子，问题可能会再次出现。

此外，如果其他程序对时区设置（即 cron 作业）同样敏感，那么弄乱这些设置可能会与这些设置发生冲突。

幸运的是，我可以重构我的 UniBasic 函数，使其不依赖于 TIME() 函数。

祝你好运！

# c# - 使用 List.Add() 方法使我的代码脱离了 foreach 循环

> ID：11318005
> 
> 赞同：0
> 
> 时间：2012-07-03T19:40:29.540
> 
> 标签：c#, list, foreach, linq-to-xml

所以，本质上，我遇到了一个有趣的问题，当调用`CreateXML()`以下代码中的“”函数时，会按预期创建一个 xelement，但是当我尝试将它添加到 xeleents 集合中时，而不是继续调用“ `CreateXML()`”的foreach循环，而是中断foreach循环，并调用“ `WriteXML()`”。此外，虽然创建并填充了 XElement，但它并未添加到列表中。[为澄清起见，我所指的 foreach 循环存在于 " `ParseDoc()`" 方法中]

```
 private List<XElement> _xelemlist;
    private void WriteXml()
    {
        XElement head = new XElement("header", new XAttribute("headerattributename", "attribute"));
        foreach (XElement xelem in _xelemlist)
        {
            head.Add(xelem);
        }
        XDocument doc = new XDocument();
        doc.Add(head);

    }
    private void CreateXML(string attname, string att)
    {
        XElement xelem = new XElement("name", new XElement("child", new XAttribute(attname, att), segment));
        _xelemlist.Add(xelem);
    }
    private void ExtractSegment(HtmlNode node)
    {
        HtmlAttribute[] segatts = node.Attributes.ToArray();
        string attname = segatts[0].Value.ToString();
        string att = node.InnerText.ToString();
        CreateXML(attname, att);
    }
    private HtmlDocument ParseDoc(HtmlDocument document)
    {
        try
        {
            HtmlNode root = document.DocumentNode.FirstChild;
            foreach (HtmlNode childnode1 in root.SelectNodes(".//child1"))
            {
                foreach (HtmlNode childnode2 in node.SelectNodes(".//child2"))
                {
                    ExtractSegment(childnode2);
                }
            }
        }
        catch (Exception e) { }
        WriteXml();
        return document;
    } 
```

当我注释掉“ `List.Add()`”中的“ `CreateXML()`”并单步执行代码时，foreach 循环在第一次迭代后没有中断，并且代码可以正常工作。

我不知道我做错了什么（是的，代码是由公共成员实例化的，别担心：我只是将相关的内部方法发布到我的问题中）......如果有人遇到过这种情况之前的行为，我真的很感激朝着正确的方向努力尝试纠正它......特别是：问题只是编码不佳，还是这种行为是我正在使用的方法/库之一的属性的结果?

**一个警告**：我知道我正在使用 HTMLAgilityPack 来解析文件并提取信息，但是对这段代码的要求迫使我使用 XDocument 来编写所述信息......不要问我为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:43:19.583

> 我不知道我做错了什么

这对于初学者来说：

```
catch (Exception e) { } 
```

这会阻止你看到地球上正在发生的事情。我强烈怀疑你有一个`NullReferenceException`由于为`_xelemlist`空，但这是一个*次要*问题。主要问题是，通过假装一切都很好，没有**任何**日志记录，到达任何地方的唯一方法就是调试，当你不需要经历它时，这是一种糟糕的体验。

在没有任何日志记录的情况下捕获异常并吞下它们*几乎不是一个好主意。*用. *_* _`Exception`

每当您遇到难以诊断的问题时，首先要提高诊断能力。这样，当您*下次*遇到问题时，诊断会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:43:27.280

`List`以这种方式声明，

```
private List<XElement> _xelemlist = new List<XElement>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:46:01.520

在您的 foreach 循环中，您尝试将其`XElement head`用作 XElements 列表`add()`。这可能应该是 XElements 的列表？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T20:02:41.710

我可以建议切换到使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)吗？

这是我为工作编写的一些示例代码（已更改以保护我的工作：D），我们正在使用它。

代码：

```
XmlDocument doc = new XmlDocument();
XmlNode root;
if(File.Exists(path + "\\MyXmlFile.xml"))
{
    doc.Load(path + "\\MyXmlFile.xml");
    root = doc.SelectSingleNode("//Library");
}
else
{    
    XmlDeclaration dec = doc.CreateXmlDeclaration("1.0", "UTF-8", null);
    doc.AppendChild(dec);
    root = doc.CreateElement("Library");
    doc.AppendChild(root);
}

XmlElement book = doc.CreateElement("Book");
XmlElement title = doc.CreateElement("Title");
XmlElement author = doc.CreateElement("Author");
XmlElement isbn = doc.CreateElement("ISBN");

title.InnerText = "Title of a Book";
author.InnerText = "Some Author";
isbn.InnerText = "RandomNumbers";

book.AppendChild(title);
book.AppendChild(author);
book.AppendChild(isbn);
root.AppendChild(book);

doc.Save(path + "\\MyXmlFile.xml"); 
```

# python - 如何在空闲时停止程序，python 3.2

> ID：11318010
> 
> 赞同：1
> 
> 时间：2012-07-03T19:40:45.117
> 
> 标签：python

我在 Idle 中做了一个程序，上面写着：

```
for trial in range(3):
if input('Password:') == 'password':
    break
else:
    # didn't find password after 3 attempts
    **I need a stop program here**
print ("Welcome in") 
```

请记住，这是空闲的，所以我需要空闲的程序，而不是 CMD。如果有帮助，我也在使用 Python 3.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:48:27.213

恕我直言，一个更好的方法是将您的程序放入一个函数中，并`return`在您希望它停止时。然后只需调用该函数即可运行您的程序。

```
def main():
    for trial in range(3):
        if input('Password:') == 'password':
            break
    else:
        return
    print ("Welcome in")

main() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:43:47.993

使用`sys.exit()`或`raise SystemExit`

```
import sys
for trial in range(3):
    if input('Password:') == 'password':
        break
else:
    sys.exit()
print ("Welcome in")) 
```

**编辑：** 要以**静默**方式结束它，请将其包装在一个`try-except`块中：

```
try:
    import sys
    for trial in range(1):
        if raw_input('Password:') == 'password':
            break
    else:
        raise SystemExit #or just sys.exit()
    print ("Welcome in")
except SystemExit:
    pass  #when the program throws SysExit do nothing here,i.e end silently 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:45:58.057

我不确定您所说的“in IDLE”与“in CMD”是什么意思。IDLE 启动的 Python shell 应该能够以与从命令行启动的 Python shell 相同的方式终止。

此外，您的示例中的选项卡似乎是错误的：下面`for...`和上面的所有内容都`print...`应该缩进。

关于您的问题：您是否要求在此时终止您的脚本的命令？如果是这样，添加两行`from sys import exit`然后调用`exit()`应该可以解决问题，尽管它会引发`SystemExit`异常。如果您不喜欢这样，您可以在程序的外层`pass`为异常类型添加一个处理程序。`SystemExit`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T19:46:52.017

[`sys.exit`](http://docs.python.org/library/sys.html#sys.exit)可以随时退出程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-07T17:00:15.507

我试过`sys.exit()`了，它突出显示`'sys'`为`INVALID SYNTAX`.

这可能与我的工作方式有关，但如果是这样的话，那就是 IDK。

# iphone - 如何从 iphone ios 4.2 的设置中删除“开发者”选项卡

> ID：11318012
> 
> 赞同：1
> 
> 时间：2012-07-03T19:40:53.090
> 
> 标签：iphone, ios4

当我将它连接到 Xcode 然后单击“将其用于开发”时，我有这个“开发人员”-> 电源 -> 记录的新选项卡，添加到我的 iphone 3GS 和 ios 4.2.1 的设置中。我知道它用于通过 Xcode 工具获取各种应用程序的功耗。有没有办法从设置中永久删除此选项卡？我不想要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:51:13.793

你必须恢复你的 iPhone，或者当你的 iPhone 越狱时有办法隐藏这个标签，但是这个小标签不是很烦人;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T14:26:12.557

在设置 --> 常规 --> 配置文件中删除您的开发人员配置文件后，重新启动您的 iPad/iphone（按下电源按钮 5 秒。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:44:21.350

您可能需要恢复您的手机。

# php - 使用登录时页面不显示，但页面代码正在显示

> ID：11318015
> 
> 赞同：0
> 
> 时间：2012-07-03T19:41:01.690
> 
> 标签：php, javascript, html

我正在尝试输入登录凭据来访问我的网页：我在 login.html 中写了这个

```
<html>
    <head>
        <title>Please type your Username and Password... </title>
        <script language="JavaScript" type="text/JavaScript" src="login.js"></script>
    </head>
    <body bgcolor="#eeeeee">
        <form>
            <br>
            <center>
            Username: <input type="text" name="username" style="background:#bfbfbf;color:#212121;border-color:#212121;" onFocus="this.style.background = '#ffffff';" onBlur="this.style.background = '#bfbfbf';">
            <br>
            Password: <input type="password" name="password" style="background:#bfbfbf;color:#212121;border-color:#212121;" onFocus="this.style.background = '#ffffff';" onBlur="this.style.background = '#bfbfbf';">
            <br>
            <input type="button" value="Login" onClick="Login(this.form);" style="background:#bfbfbf;color:#000000;border-color:#212121;" onMouseOver="this.style.color = '#404040';" onMouseOut="this.style.color = '#000000';" onFocusr="this.style.color = '#404040';" onBlur="this.style.color = '#000000';">
            </center>
        </form>
    </body>
</html> 
```

我在 login.js 中写了这个 JS

```
function Login(form) {
    username = new Array("u1","u2");
    password = new Array("p1","p2");
    page = "untitled_1" + ".php";
    if (form.username.value == username[0] && form.password.value == password[0] || form.username.value == username[1] && form.password.value == password[1])
    {
        self.location.href = page;
    } else {
        alert("Either the username or password you entered is incorrect.\nPlease try again.");
        form.username.focus();
    }
    return true;
} 
```

因此，当我打开页面时，我输入凭据然后登录。浏览器显示页面“untitled_1.php”的代码所有php和html代码，但不显示页面:(

请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:42:36.473

您没有运行 PHP 的 Web 服务器。`php`文件只是文本文件，除非您正在运行服务器，否则浏览器将显示它们。如果您没有任何 PHP 代码，请将其重命名为`.html`，它应该可以工作！

如果您确实有 PHP 代码，请确保该文件位于您的`www`目录中（`public_html`可能是您调用的任何名称），以便 Web 服务器可以处理它并配置为执行`php`文件。如果你没有服务器，你可以安装类似[xampp](http://www.apachefriends.org/en/xampp.html)的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:43:31.817

您没有正确配置 Apache 来执行`.php`文件。

# vba - 为什么 Selection.Find 不返回 Word VBA 中的所有结果？

> ID：11318016
> 
> 赞同：1
> 
> 时间：2012-07-03T19:41:06.313
> 
> 标签：vba, ms-word

我正在尝试根据某些格式规则从文档中提取文本，例如字体大小等于 10.5。这就是我现在正在做的事情：

```
Selection.Find.Font.Size = 10.5
Text = ""

Do While Selection.Find.Execute = True
    Text = Text + Selection
Loop

Debug.Print Text 
```

它有效，但由于某种原因，它似乎没有返回所有结果。当我进行手动搜索（即 Ctrl+H）并使用相同的格式规则时，会返回更多结果。

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:12:42.237

在 VBA`+`中不用于连接。您必须将其替换为`&`

更改并重`Text = Text + Selection`试`Text = Text & Selection`。我已经对其进行了测试，并且可以正常工作...

# ios - 如何将 UIImage 调整为特定大小

> ID：11318020
> 
> 赞同：-2
> 
> 时间：2012-07-03T19:41:25.237
> 
> 标签：ios, uiview, uiimage, image-resizing

在我的应用程序中，我正在用相机拍照并以 320*320 显示`UIView`。但是由于图像分辨率超过了`UIView`它的样子，看起来有点挤压。有什么办法可以调整该图像的大小吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:02:16.367

以下是如何在保留其纵横比的同时调整图像大小。下面的代码来自一个类别`UIImage`：

```
+ (UIImage*)imageWithImage:(UIImage *)image 
              scaledToSize:(CGSize)newSize
{

    float heightToWidthRatio = image.size.height / image.size.width;
    float scaleFactor = 1;
    if(heightToWidthRatio > 0) {
        scaleFactor = newSize.height / image.size.height;
    } else {
        scaleFactor = newSize.width / image.size.width;
    }

    CGSize newSize2 = newSize;
    newSize2.width = image.size.width * scaleFactor;
    newSize2.height = image.size.height * scaleFactor;

    UIGraphicsBeginImageContext(newSize2);
    [image drawInRect:CGRectMake(0,0,newSize2.width,newSize2.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:46:36.300

我这样做，但首先我将照片选择器启用为可编辑，因此它是默认的 1:1 纵横比，如下所示：

```
imgPicker.allowsImageEditing = YES; //I think this is what you're really looking for 
```

然后我使用这种方法调整图像的大小：

```
-(UIImage*)resizeImage:(UIImage*)image{
    CGSize newSize = CGSizeMake(480.0, 480.0);
    UIGraphicsBeginImageContext(newSize);
        [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
        UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

# r - 带有乳胶forloop的knitr

> ID：11318021
> 
> 赞同：2
> 
> 时间：2012-07-03T19:41:28.613
> 
> 标签：r, for-loop, latex, knitr

抱歉，如果这是一个愚蠢的问题，但有人知道如何在 knitr 中循环 R 函数吗？到目前为止，我的问题是将变量从乳胶传递到 R 函数。我正在尝试做这样的事情：

```
\documentclass{article}
\usepackage{forloop}
\newcounter{ind}  
\begin{document}

%Simple R function:
<<simpleRFun, results='asis' ,echo=FALSE>>=
simpleRFun = function(ind){
  set.seed(ind) ;
  plot(runif(100)) ;
}
@

%Run the function for value of 1
<<>>=
simpleRFun(1)
@

%Run the function for value of 2
<<>>=
simpleRFun(2)
@

%Loop over values of 1 and 2:
\forloop{ind}{1}{\value{ind} < 3}{
   \arabic{ind}
}

%Loop over values of 1 and 2 and pass to R function:
%Everything runs fine until this line:
\forloop{ind}{1}{\value{ind} < 3}{
<<>>=
simpleRFun(ind)
@
}

\end{document} 
```

我收到以下错误：

```
Runaway argument?
 #### Error: object 'ind' not found \end {verbatim} \end {kframe} \end \ETC.
./knitr-minimal.tex:97: Paragraph ended before \@xverbatim was complete.
<to be read again> 
                   \par 
l.97 } 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:02:38.177

我不认为你可以做你想做的事（至少不能以你想做的方式）。该`knitr`函数运行所有 R 代码而不对 LaTeX 代码执行任何操作，然后您在结果上使用 LaTeX，它不会为 R 部分运行 R。

您可以重做循环以在 R 中进行循环，以便`knitr`将循环的结果放入 LaTeX 中吗？

要么，要么你需要一个 LaTeX 的扩展来为你运行 R 部分。

# vba - 无法在 Excel VBA 中添加两个数字

> ID：11318023
> 
> 赞同：2
> 
> 时间：2012-07-03T19:41:37.620
> 
> 标签：vba, excel

我有以下代码。当我尝试添加两个数字时，我得到一个零：

```
Public Function getCategory(Value As String, Optional col As Long = 1) As String
   Sheets("Product Master").Select
   Range("A2").Select
   Dim I As Long
   Do Until Selection.Value = Value
   ActiveCell.Offset(1, 0).Select
   Loop
   getCategory = Selection.Value
End Function

Sub Calculate()
Dim furnitureTotal As Double
Dim furQuantity As Integer
furnitureTotal = 0
furQuantity = 0

Dim applianceTotal As Double
Dim appQuantity As Integer
applianceTotal = 0
appQuantity = 0

Dim whiteGoodsTotal As Double
Dim whiteGoodQuantity As Integer
whiteGoodQuantity = 0
whiteGoodsTotal = 0

Dim softFurTotal As Double
Dim softFurQuantity As Integer
softFurTotal = 0
softFurQuantity = 0

Dim description As String
Dim total As Double
Dim quantity As Integer

Sheets("Invoice").Select
Range("F64").Select
Do Until (ActiveCell.Value = "Finish" Or ActiveCell.Value = "")
    description = ActiveCell.Value
    ActiveCell.Offset(0, 1).Select
    quantity = Selection.Value
    ActiveCell.Offset(0, 6).Select
    total = Selection.Value
    If (getCategory(description) = "Furniture") Then
        furnitureTotal = furnitureTotal + Val(total)  <---------- this line
        furQuantity = furQuantity + quantity
        End If

    If getCategory(description) = "Electronics" Then
        applianceTotal = applianceTotal + total
        appQuantity = appQuantity + quantity
        End If

    If getCategory(description) = "White Goods" Then
        whiteGoodsTotal = whiteGoodsTotal + total
        whiteGoodQuantity = whiteGoodQuantity + quantity
        End If

    If getCategory(description) = "Soft Furnishings" Then
        softFurTotal = softFurTotal + total
        softFurQuantity = softFurQuantity + quantity
        End If

    Sheets("Invoice").Select
    ActiveCell.Offset(1, -7).Select
Loop

Sheets("Invoice").Select <---------------------- breakpoint was placed here
Range("L24").Select
Selection.Value = furQuantity
ActiveCell.Offset(0, 1).Select
Selection.Value = furnitureTotal
Range("L25").Select
Selection.Value = appQuantity
ActiveCell.Offset(0, 1).Select
Selection.Value = applianceTotal
Range("L26").Select
Selection.Value = whiteGoodQuantity
ActiveCell.Offset(0, 1).Select
Selection.Value = whiteGoodsTotal
Range("L27").Select
Selection.Value = softFurQuantity
ActiveCell.Offset(0, 1).Select
Selection.Value = softFurTotal

End Sub 
```

当每个描述都属于家具类别时，我运行了此代码。当我运行它时，所有变量的值都保持为 0。当我打开调试器并查看变量的值时，它显示了变量的值：

```
Line:    `furnitureTotal = furnitureTotal + Val(total)`
Values:         0                  0            1750 
```

我不明白为什么它不添加两个双精度值。这与变量的生命周期有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:53:17.543

这不是一个真正的答案，但我不知道如何发布这个。

您可以使用 SUMIF 函数一起避免 VBA。

例如，如果不是家具，则在 L24 中使用以下代码替换用于家具的实际代码。

```
=SUMIF(F:F,"Furniture",G:G) 
```

使用它，您无需为该单元格再次计算，因为公式将为您处理它。您可以使用类似的公式更新所有其他计算单元格，并且不再需要运行宏。

只要您在 F 列中没有完全包含“家具”且不应包含的具有相应值的行，此特定公式就会为您提供正确的结果。如果你这样做，只需手动输入一个合理的范围。

顺便说一句，您的 Function getCategory 没有做任何有用的事情。如所写，它将返回提供的值（如果所选单元格与提供的值相同，则返回所选单元格的值）或循环，直到您最终尝试选择一个单元格时出现运行时错误不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:06:28.110

我看到的两件事-您使用`total`，但这是 listcolumn 对象中使用的关键字，并且当 vlookup 可以替换代码时，您反复调用 getcategory 。

这是代码，稍作改写：

```
Sub Calculate()
Dim furnitureTot As Double
Dim furQuantity As Integer
Dim applianceTot As Double
Dim appQuantity As Integer
Dim whiteGoodsTot As Double
Dim whiteGoodQuantity As Integer
Dim softFurTot As Double
Dim softFurQuantity As Integer
Dim description As String
Dim Tot As Double
Dim quantity As Integer

furnitureTot = 0
furQuantity = 0
applianceTot = 0
appQuantity = 0
whiteGoodQuantity = 0
whiteGoodsTot = 0
softFurTot = 0
softFurQuantity = 0

Sheets("Invoice").Select
Range("F64").Select
Do Until (ActiveCell.Value = "Finish" Or ActiveCell.Value = "")
    description = Application.WorksheetFunction.VLookup(ActiveCell.Value, Range("'Product Master'!A2:B9999"), 2, False) ' lookup value, rather than do it repeatedly, and use built in function
    ActiveCell.Offset(0, 1).Select
    quantity = Val(Selection.Value) ' try to get number, even if it's input as text
    ActiveCell.Offset(0, 6).Select
    Tot = Val(Selection.Value)

    Select Case description ' only 1 test needed
        Case "Furniture"
            furnitureTot = furnitureTot + Tot
            furQuantity = furQuantity + quantity
        Case "Electronics"
            applianceTot = applianceTot + Tot
            appQuantity = appQuantity + quantity
        Case "White Goods"
            whiteGoodsTot = whiteGoodsTot + Tot
            whiteGoodQuantity = whiteGoodQuantity + quantity
        Case "Soft Furnishings"
            softFurTot = softFurTot + Tot
            softFurQuantity = softFurQuantity + quantity
    End Select
    Sheets("Invoice").Select
    ActiveCell.Offset(1, -7).Select
Loop

Sheets("Invoice").Select
Range("L24").Select
Selection.Value = furQuantity
ActiveCell.Offset(0, 1).Select
Selection.Value = furnitureTot
Range("L25").Select
Selection.Value = appQuantity
ActiveCell.Offset(0, 1).Select
Selection.Value = applianceTot
Range("L26").Select
Selection.Value = whiteGoodQuantity
ActiveCell.Offset(0, 1).Select
Selection.Value = whiteGoodsTot
Range("L27").Select
Selection.Value = softFurQuantity
ActiveCell.Offset(0, 1).Select
Selection.Value = softFurTot

End Sub 
```

# jquery - 我在这个功能上做错了什么？

> ID：11318026
> 
> 赞同：-1
> 
> 时间：2012-07-03T19:41:49.740
> 
> 标签：jquery

```
"fnServerParams": function (aoData) {
            var sReportType = (jQuery('#report_type').val() == "") ? "Downline" : jQuery('#report_type').val();
            var aRankID = (jQuery('#rank_id').val() == null) ? [] : jQuery('#rank_id').val();

            aoData.push({
                "name": "report_type",
                "value": sReportType,
                "name": "rankid",
                "value": aRankID.join(',')
            });
        }, 
```

aRankID 应该是一个空数组或填充多选框中的值。

当我第一次加载页面时，萤火虫返回。

```
>>> jQuery('#rank_id').val();
null 
```

在我在这里做出一些选择后，它会返回。

```
>>> jQuery('#rank_id').val();
["1", "2", "3"] 
```

我一定遗漏了一些东西，因为它导致我的 ajax 页面崩溃。我需要 use.join 因为我的 ajax 页面需要一个字符串。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:44:20.290

应该

```
var aRankID = (jQuery('#rank_id').val() == null) ? [] : jQuery('#report_type').val(); 
```

不是

```
var aRankID = (jQuery('#rank_id').val() == null) ? [] : jQuery('#rank_id').val(); 
```

您正在使用`jQuery('#report_type').val()`而不是`jQuery('#rank_id').val()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:44:53.030

这看起来很可疑：

```
var aRankID = (jQuery('#rank_id').val() == null) ? [] : jQuery('#report_type').val(); 
```

您的意思是检查`#rank_id`但使用 from 的值`#report_type`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:47:31.257

试试这个：

```
 "fnServerParams": function (aoData) {
        aoData.push({
            "name": "report_type",
            "value": jQuery('#report_type').val() || "Downline",
            "name": "rankid",
            "value": (jQuery('#rank_id').val() || []).join(",")
        });
  } 
```

# python - 使用 python 的 -S 选项是否安全？

> ID：11318028
> 
> 赞同：15
> 
> 时间：2012-07-03T19:42:00.820
> 
> 标签：python

python 的 -S 选项由文档定义为“禁用模块站点的导入以及它需要的 sys.path 的站点相关操作”。我发现当我使用这个选项时，我机器上的 python 启动速度是原来的两倍多，有时*甚至更快。*例如，在一台（慢）机器上：

```
$ time python -c 'print "hello"'   
hello
python -c 'print "hello"'  0.14s user 0.03s system 85% cpu 0.204 total

$ time python -Sc 'print "hello"'
hello
python -Sc 'print "hello"'  0.02s user 0.01s system 73% cpu 0.038 total 
```

这是 5.3 倍的加速。它似乎工作正常，至少在我尝试过的脚本中是这样。使用它有什么缺点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T19:57:00.027

这可能不是一个好主意。除其他外，这意味着不会将 site-packages 目录添加到路径中，因此您将无法导入标准 lib 模块以外的任何内容：

```
python -Sc "import numpy"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named numpy 
```

你可以看看`site.py`自己，看看它在做什么。它只是常规库目录中的一个模块。至少在我的系统上，它看起来主要做了四件事：

*   设置站点包路径
*   设置默认编码
*   定义了一些用于交互使用的辅助函数 (`quit`和`help`)
*   设置用户特定的站点自定义

如上所述，第一个可能是最关键的。第二个对于执行字符串 I/O 可能很重要，具体取决于系统的区域设置（即，如果未正确设置默认编码，则可能会出错）。第三个可能不是那么重要。如果您希望自定义每个用户的路径（让用户拥有自己的个人库目录等），最后一个可能很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T19:58:13.457

该`-S`标志执行以下操作：

> 不要在初始化时暗示“导入站点”

这意味着在Python 的初始化期间不会导入模块[站点。](http://docs.python.org/library/site.html)一个简短的描述是这个模块*“将附加站点特定的路径到模块搜索路径并添加一些内置”*。不做所有这些工作确实会使启动速度更快。

使用文档作为指导，`-S`标志会导致：

*   没有额外的模块添加到`sys.path`. 您可以通过在两者中启动`python`和`python -S`执行以下操作来比较差异`import sys; print sys.path`。许多模块将不可用，因此您将无法导入它们。
*   不会运行自定义站点初始化代码（这可以在名为 的模块中定义`sitecustomize`）。
*   自定义初始化代码将不会运行（这可以在名为 的模块中定义`usercustomize`）。

对您的问题的简短回答是：是的，它使 Python 启动更快，但许多模块和自定义代码将不可用或不可用。

如果您主要导入自己的模块并编写自己的计算/代码，那么`-S`标志就可以了。但是，如果您有一个 Python 安装并且模块安装在不同的位置，那么您将无法将它们与`-S`标志一起使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T19:57:10.817

执行此操作时，您将丢失大部分模块搜索路径：

```
$ python -S
Python 2.6.8 (unknown, Apr 19 2012, 01:24:00) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
>>> import sys
>>> len(sys.path)
9

$ python
Python 2.6.8 (unknown, Apr 19 2012, 01:24:00) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> len(sys.path)
26 
```

根据您的系统，这可能会对可用的模块产生重大影响。

其他可能会破坏的是语言环境（由 site.py 设置为系统默认值），并且在 Windows 上，某些编解码器将不可用（它们由 site.py 别名）。

# c++ - 对话框单位到屏幕坐标

> ID：11318029
> 
> 赞同：1
> 
> 时间：2012-07-03T19:42:05.667
> 
> 标签：c++, windows, dialog, window, coordinates

有人可以解释一下如何将对话框单位转换为屏幕坐标值？我看到有 MapDialogRect 函数，但它转换 RECT，我想将 x,y 和 cx,cy 值转换为屏幕坐标值，我真的不明白如何实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T13:06:39.793

如果您已经有一个窗口句柄，那么只需使用[该`MapDialogRect`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645502%28v=vs.85%29.aspx)。正如其他人所指出的，`MapDialogRect`需要 a `RECT`，所以如果你没有 a `RECT`，你可以创建一个。

```
RECT rc;
rc.left = x;
rc.top = y;
rc.right = x + cx;
rc.bottom = y + cy;
MapDialogRect(hdlg, &rc); 
```

如果您的问题是您首先没有对话框句柄，那么该`MapDialogRect`函数的文档会告诉您如何执行计算：确定对话框的平均字符尺寸（文档调用`baseunitX`和`baseunitY`）然后将其代入公式。

请注意，这会计算对话框的客户矩形。您仍然必须添加非客户空间。目前尚不清楚您要做什么，所以我不知道添加非客户端空间是否合适。

# sqlite - 使用准备好的语句使用多个标记进行 SQLite 全文搜索

> ID：11318030
> 
> 赞同：1
> 
> 时间：2012-07-03T19:42:11.147
> 
> 标签：sqlite, full-text-search, prepared-statement

给定下表：

```
create table index(name text, docid int);
create virtual table docs using fts4(); 
```

以下查询在查询单个令牌时按预期工作（例如：`march`或`bad`）：

```
select name from index where docid in (select docid from docs where docs match ?) 
```

但是我如何查询多个令牌（例如，`bad bed`）？直接绑定字符串`bad bed`不起作用（总是不选择任何内容），既不能用双引号括住占位符或字符串，也不能单独使用`AND`每个`MATCH`标记（最后一个会引发错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:54:14.377

Using`intersect`确实有效，但在搜索许多令牌时它很笨重且效率低下：

```
select name from index where docid in (
    select docid from docs where docs match ?
    intersect
    select docid from docs where docs match ?
    intersect
    ...
) 
```

每个`?`都与一个令牌配对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T16:04:38.063

您可以`||`在 sqlite 中使用连接运算符。`''`将是空字符串

```
SELECT * FROM table WHERE docs MATCH '' || ? || ' ' || ? || ' ' || ? || '' 
```

Make sure there is a space between every token or an `' AND '`.

**Update**

Actually it doesn't work. It seems there are tokenator issues with this approach. Its better to concatenate all the tokens with the space and bind the resulting string with a single '?'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T18:54:45.213

There are operators within the match syntax in FTS so you can use `AND`, `OR` and `NOT`.

[See here for documentation](http://www.sqlite.org/fts3.html#section_3_1)

e.g.

```
-- Return the docid values associated with all documents that contain the
-- two terms "sqlite" and "database", and/or contain the term "library".
SELECT docid FROM docs WHERE docs MATCH 'sqlite AND database OR library';

```

# jquery - 内部 div 的 div 高度

> ID：11318033
> 
> 赞同：0
> 
> 时间：2012-07-03T19:42:22.203
> 
> 标签：jquery, jquery-ui

我正在像这样`div`在另一个内部附加一个`div`：

```
$('#maindivid').append('<div id="newid" style="background: url(xyz/image/test.png); position:absolute; min-height:100%; width:100%; height:100%; top:0px; left:0px; overflow:auto;"></div>'); 
```

但是我的新`div`的并没有得到容器的整个高度`div`。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:20:34.703

父级：

```
<div id="maindivid" scrollleft="0" scrolltop="0" style="border:1px solid black; width: auto; height: 561.4px;" class="class-new " >
       Parent Border
</div>​ 
```

附加孩子的脚本：

```
 $('#maindivid').append('<div id="childid" style="border: 1px solid red; position:absolute; width:100%; height:inherit; ">Child</div>'); ​ 
```

[这适用](http://jsfiddle.net/qY47q/)于 jsfiddle.net：http://jsfiddle.net/qY47q/

注意：我确实删除了孩子的 height:100% ，因为您已经指定高度将继承给父母。另外，我添加了边框，以便我可以看到 div 的实际高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:44:44.953

将新 div 的属性设置为`height:inherit`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:47:56.873

尝试设置父 div 的高度，然后将子 div 的高度设置为 100%。

# django - 使用 Dajax Django 为帖子添加评论。

> ID：11318034
> 
> 赞同：0
> 
> 时间：2012-07-03T19:42:33.250
> 
> 标签：django, dajaxice

我想在 django 中通过 dajax 技术在帖子中添加评论，但是这些东西不起作用。你能帮我解决这个问题，或者在那个例子中告诉更多如何使用 dajax。

ajax.py

`@dajaxice_register`

`def add_comment(request):`

```
`if request.method == 'POST':
    post_id = request.POST['post_id']    
    post_obj = Post.objects.get(id = post_id)
    error = {}
    iweb_obj = post_obj.topic.iweb  
    content = request.POST['content']
    img = request.POST['img']       
    if len(content) == 0:
        error[content] = 'Write something'
    else:
        new_comment = Comment(img=img, post=post_obj, content=content, author=request.user, pub_date=datetime.datetime.now())        
        new_comment.save()

        comment = render_to_response('comment.html',{'comment':new_comment})
        dajax = Dajax() 
        dajax.assign('#post-' +int(post_id)+ ' comments', innerHTML, comment)   
        return dajax.json() ` 
```

应在下面添加注释的 HTML 邮政编码。 `table width="100%" id="post-{{ post.post.id }}"`

帖子在这里

`ul class="comments" {% include "comments.html" %} /ul`

`/table`

JS 代码，但comment_form 在另一个模板中。

`$('.comment_form form').submit(function() {`

```
 `var form = $(this);

    if($('textarea', form).val().length > 1) {
            Dajaxice.project.add_comment(Dajax.progress,{});
            $('textarea', form).val('');

                }
            }

     )});` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:18:36.697

一些实际的错误消息会有所帮助 - “这个东西不起作用”与神秘的 Dajax 错误消息“出现问题”有点匹配，但也许你可以提供一些额外的信息。

我确实注意到您的 js 提交函数具有：

```
Dajax.progress   // which should be Dajax.process 
```

Firebug 或 Chrome 的控制台应该可以帮助您发现类似的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:17:05.863

如果不查看完整的代码，很难确切地看到出了什么问题，但是从上面显示的内容来看，我可以看到几个问题：

1.  您不应该使用`render_to_response`来生成`comment`. 与返回 HttpResponse 的普通 Django 视图不同，这里`Dajax.assign`用于将 HTML 元素的实际内容设置为字符串。幸运的是 Django 只提供了你需要的模板渲染功能：`render_to_string`. 改用那个。

2.  在该`Dajax.assign`行中，您正在使用的选择器，例如`'#post-23 comments'`，它看起来不像对应于 HTML，其中`comments`是类而不是元素名称。

3.  在同一行中，`innerHTML`应该是`'innerHTML'`（即引用）。

4.  正如 toasterleavings 提到的，`Dajax.progress`应该是`Dajax.process`.

对于以类似方式使用 Dajaxice/Dajax 的注释示例，您可能会找到我对[Django 和 Ajax 的回答——我能做什么？](https://stackoverflow.com/questions/11711687/django-and-ajax-what-can-i-do/11715295#11715295)有帮助。

# css - 缩放或更改分辨率时如何使css菜单宽度无法更改？

> ID：11318036
> 
> 赞同：4
> 
> 时间：2012-07-03T19:42:37.527
> 
> 标签：css, menu, width, zooming, resolution

我正在构建一个 Joomla 模板，但我遇到了菜单宽度问题，我从未找到解决方法。当我制作基于文本的菜单时，某些项目在缩放或分辨率发生变化时总是排成两行，例如：

[第 1 项] [第 2 项] [第 3 项] [第 4 项] [第 5 项]

变成

[第 1 项] [第 2 项] [第 3 项] [第 4 项]

[第5项]

所以基本上，当我制作基于文本的菜单时，宽度总是会改变。但是，如果我让它基于图像，问题就解决了，但它不能用于这个项目，因为它有太多的菜单项，其中一些可能会在以后更改。我看过一个网站，每次您在网站上放大/缩小时都会重新生成字体大小以保持网站定义的宽度，但是我不记得了。你们有什么想法吗？无论浏览器字体大小设置、缩放或显示分辨率如何，都必须有某种脚本来强制基于文本的菜单定义宽度。

提前致谢。顺便说一下，这里是网站：[http](http://business.delux.lv/) ://business.delux.lv/ 我实际上注意到很多网站都有这个问题，但有些网站没有那么多菜单项让他们分两行，所以这有点让它不太明显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:03:59.643

将此添加到菜单 css 样式

```
white-space:nowrap; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:52:49.767

将此行添加到您的 CSS：

```
#menu{width: 104%;} 
```

# html - html中的http授权标头

> ID：11318038
> 
> 赞同：2
> 
> 时间：2012-07-03T19:42:52.830
> 
> 标签：html, oauth, header, authorization

我需要帮助在 html 文件中设置授权标头。所以我在 dev.twitter.com 上使用了 OAuth 工具，得到了这个标题内容：

```
Authorization: OAuth oauth_consumer_key="BKsXdR3SO4hSZyFT2JevHQ", oauth_nonce="718a5099a51230e737474c7e76d21581", oauth_signature="rQ5DJWi8qMmdR76rwIOwJYUhuvc%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1341342796", oauth_token="69848552-B6geQZCA8ttirQIMKrIk47SOE541V7d5ZcYwEBUqQ", oauth_version="1.0" 
```

现在我不知道该怎么办。我试过这个：

```
<meta name="Authorization" content="OAuth" 
    oauth_consumer_key="BKsXdR3SO4hSZyFT2JevHQ", 
    oauth_nonce="b98cf39b3f8dba6286cbd1b741eb7504", 
    oauth_signature="Vgmudlrkv1dzFel9zpFztXfR6gI%3D", 
    oauth_signature_method="HMAC-SHA1", 
    oauth_timestamp="1341339879", 
    oauth_token="69848552-B6geQZCA8ttirQIMKrIk47SOE541V7d5ZcYwEBUqQ", 
    oauth_version="1.0"> 
```

但它不起作用！我肯定做错了什么。

请帮忙！

阿拉姆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:12:22.367

标题有本质区别。OAuth 需要对 HTTP 标头进行“授权”，而不是在 HTML 标头中。

```
POST /1/statuses/update.json?include_entities=true HTTP/1.1
Accept: */*
Connection: close
User-Agent: OAuth gem v0.4.4
Content-Type: application/x-www-form-urlencoded
Authorization: 
        OAuth oauth_consumer_key="xvz1evFS4wEEPTGEFPHBog", 
              oauth_nonce="kYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg", 
              oauth_signature="tnnArxj06cWHq44gCs1OSKk%2FjLY%3D", 
              oauth_signature_method="HMAC-SHA1", 
              oauth_timestamp="1318622958", 
              oauth_token="370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb", 
              oauth_version="1.0"
Content-Length: 76
Host: api.twitter.com 
```

您可以通过服务器端脚本（使用 PHP、Python 等）在请求中设置此标头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:58:45.603

您可以使用 AJAX 调用（例如使用[jQuery ）从 Javascript 发出 HTTP 请求（特别是](http://api.jquery.com/category/ajax/)[XMLHttpRequests](https://de.wikipedia.org/wiki/XMLHttpRequest)）。查看[Perfect jQuery AJAX Request](http://kyleschaeffer.com/best-practices/the-perfect-jquery-ajax-request/)的示例。然后你也可以设置你的[请求头](https://stackoverflow.com/a/3258685/1467115)。

# android - Android Easy Tracker 基础知识

> ID：11318039
> 
> 赞同：0
> 
> 时间：2012-07-03T19:42:55.263
> 
> 标签：android, google-analytics

我想在多个页面上进行分析，我看到一篇帖子说您需要实现 EasyTracker 及其所有文件。我在课堂上扩展了 TrackedActivity，但我需要澄清问题，因为这方面的文档很糟糕。（我还添加了 String UA 等内容）

我用这个网站来帮助自己（我知道 EasyTracker 会在 onResume 和所有其他类似功能被调用时处理）： [Android 应用程序中的 Google Analytics - 处理多个活动](https://stackoverflow.com/questions/3216692/google-analytics-in-android-app-dealing-with-multiple-activities/6253664#6253664)

1) 我似乎只看到 ListViews 上的示例。这仍然适用于非列表视图吗？

2) EasyTracker 如何追踪数据？从我在记事本示例中看到的内容来看，它只是扩展了 TrackedActivity [http://code.google.com/p/analytics-api-samples/source/browse/#svn%2Ftrunk%2Fsrc%2Ftracking%2Fmobile%2Fandroid%2FEasyTracker%2FExamples %2F记事本](http://code.google.com/p/analytics-api-samples/source/browse/#svn%2Ftrunk%2Fsrc%2Ftracking%2Fmobile%2Fandroid%2FEasyTracker%2FExamples%2FNotePad)

3) 它如何跟踪多个页面而不是一个页面？

换句话说，我非常困惑。

# php - yii 使用经过身份验证的用户进行功能测试

> ID：11318046
> 
> 赞同：2
> 
> 时间：2012-07-03T19:43:20.207
> 
> 标签：php, authentication, yii, functional-testing

我正在尝试使用硒在 YII 上对经过身份验证的用户进行功能测试。我写了以下

```
protected function _login(){

    $id=new UserIdentity('admin','admin');
    $id->authenticate();
    if($id->errorCode===UserIdentity::ERROR_NONE)
    {
        Yii::app()->user->login($id);
        return true;
    }
    return false;
}
public function testSpot(){
    $this->assertTrue($this->_login());
    ob_end_flush();
    $this->open('production/request/create');
} 
```

我在 bootstrap.php 上添加了一个 ob_start() ，因为标头被发送了两次并在登录后刷新它。访问生产/请求/创建时的测试仍然进入登录页面，因为即使登录是有效的，也不会计算登录.

编辑：如果您在 phpunit 上使用 --stderr 选项，则不需要 ob_end_flush 和 ob_start 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:29:52.610

这不会起作用，因为您只是针对从命令行运行的会话进行身份验证。您需要对 Web 会话进行身份验证。

看到这个评论：

[http://www.yiiframework.com/doc/guide/1.1/en/test.functional#c10015](http://www.yiiframework.com/doc/guide/1.1/en/test.functional#c10015)

# html - 在不使用行跨度的情况下创建语义正确的表

> ID：11318056
> 
> 赞同：2
> 
> 时间：2012-07-03T19:43:47.390
> 
> 标签：html, css

我正在尝试使用纯 HTML 和 CSS 构建简历，并希望尽可能保持简洁。在[这个小提琴](http://jsfiddle.net/93CsQ/15/)中，我构建了我想要实现的布局。

这显然不是最漂亮的解决方案，因为如果条目“语言”更长，它就会中断。

Rowspan 更简洁一些，但是会出现两个问题：

首先，每当我在列表中添加一个新条目时，我都必须增加 colspan（我不想使用任何脚本，KISS）。

其次，更令人担忧的是，`td:first-child`选择器不考虑行跨度。[在这个小提琴](http://jsfiddle.net/v9AKM/3/)中可以看到残骸

我尝试过的另一种方法是使用 a`<ul>`然后使用`ul:before`选择器在块前面加上灰线和“语言”文本。一个新的挑战出现了：设置`content`这个伪元素会将其***置于***`<ul>`.

你认为处理这种情况的最干净、最精简的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:54:56.740

使用`divs`and`float`制作两列怎么样？你可以把任何你想要的东西放在右边，桌子`ul`，，任何东西。

**HTML**

```
<div id="resume">
    <div class="category">Skills</div>
    <div class="left">Languages</div>
    <div class="right">asfd<br /> asfd<br /> asfd<br /> asfd<br /></div>
    <div class="divider"></div>

    <div class="left">Languages</div>
    <div class="right">asfd<br /> asfd<br /> asfd<br /> asfd<br /> asfd<br /> asfd<br /> asfd<br /></div>
    <div class="divider"></div>

    <div class="category">Skills</div>
    <div class="left">Languages</div>
    <div class="right">asfd<br /> asfd<br /> asfd<br /> asfd<br /> asfd<br /> asfd<br /> asfd<br /></div>
    <div class="divider"></div>
</div> 
```

**CSS**

```
.divider {
    clear: both;
    padding-bottom: 10px;
}

.category{
    padding-left: 100px;
    font-weight: bold;
}

.left {
    float: left;
    width: 100px;
}
.right {
    float: left;
} 
```

[**演示**](http://jsfiddle.net/93CsQ/21/)

# ssl-certificate - genkey 和 selfcert 的区别

> ID：11318060
> 
> 赞同：4
> 
> 时间：2012-07-03T19:43:56.697
> 
> 标签：ssl-certificate, public-key-encryption, keytool

有人可以解释一下 keytool 命令 genkey 和 selfcert 之间的区别吗？

如何使用 keytool 命令签署带有证书的 CSR？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T20:44:41.280

genkey 同时创建一个密钥和一个证书。selfcert 用新的自证书替换现有密钥的证书。当您的旧证书过期时执行此操作。如果您想使用不同的证书（可能来自 CA）对其进行签名，请使用 import。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:40:20.657

我将首先假设您已生成 CSR 并将其发送给 CA。CA 会返回证书，您可以将其返回到您为其生成 CSR`importcert`的密钥库中。`alias`

简而言之：

`keytool -v -importcert -keystore mykeystore.jks -alias mycertalias -file CASignedCert.cer -trustcacerts`

# javascript - 使用 JavaScript 向 Highstock 图表 (highcharts) 添加标志

> ID：11318068
> 
> 赞同：2
> 
> 时间：2012-07-03T19:44:41.427
> 
> 标签：javascript, jquery, html, highcharts, highstock

我一直在研究这个演示图表[http://jsfiddle.net/hcharge/G7rsh/](http://jsfiddle.net/hcharge/G7rsh/)我正在努力将标志添加到 x 轴。

在 highchart 网页上的示例中，他们使用 UTC 来定位标志，但是此图表上的系列以不同的方式绘制，使用此格式 [1330560000000,32.29]

有人会有答案吗？我不确定这是否特定于 JavaScript 或 Highcharts，但认为值得在此处发布。

我试过添加

`series: [{ type: 'flags', data : [{'text':'Flag Set','title':'E','x':1330560000000} ], width: 16 }],`

到javascript，但这似乎没有任何作用，任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:43:23.277

```
if (seriesCounter == names.length) {
    selectSeries(0);
    // build flags
    seriesOptions.push({
        'type': 'flags',
        //'name': 'myflag',
        'data': [{
            'title':'E',
            'x':1330560000000
        }],
        'width': 16,
        // if you want to place to some serie add the following line
        //'onSeries': 1 //serie id
    });
    createChart();
} 
```

你可以看到下面的[**演示**](http://jsfiddle.net/ricardolohmann/G7rsh/4/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:01:20.780

这是 unix 时间格式，在使用 highstock 时，您必须使用 unix 时间格式来表示 xaxis

*这就是您将标志添加到 highstock 的方式*

```
 var alarms = { type: 'flags', name:'flag',color: 'red',
              data : 
              [{x:1326845030000,title : 'Alarm 1',text : 'Alarm 1'} ,                                                             
               {x:1326847030000,title : 'Alarm 2',text : 'Alarm 3'} , 
               {x:1326840030000,title : 'Alarm 3',text : 'Alarm 2'} ],
                shape : 'squarepin',width : 50  }; 
```

`alarm`然后变量将被推送到您的系列数组

`x`是您将标志放置在 xAxis 上的位置，如果您希望将标志放在系列上，请使用`onSeries : 'series_id'`警报对象中的对象

# android - 回到绘图板：Volume Switch App Starter

> ID：11318070
> 
> 赞同：0
> 
> 时间：2012-07-03T19:44:43.030
> 
> 标签：android

好吧，正如我过去几天一直在问的那样，并且越来越接近这个问题的最终结果：

是否可以使用音量（向上/向下）按钮来启动应用程序？

这是我正在使用的代码：

```
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
    Log.w("myApp", "LONG PRESS");
}
    //my code here 
return super.onKeyLongPress(keyCode, event); 
```

我想知道我做错了什么。代码中的任何内容都没有给我错误，只是当我告诉它时它没有运行。
注意：
如果这有帮助的话，我正在一个实时的 android 上测试这个。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:52:57.940

> 是否可以使用音量（向上/向下）按钮来启动应用程序？

不，对不起。您不能使用硬件按钮来启动应用程序，除了 CAMERA 按钮（它存在的地方）或 MEDIA 按钮（它存在的地方，通常在耳机上）。对于这些，您将`BroadcastReceiver`在清单中为它们各自的广播注册 a，并记住，这些广播仅在前台活动不消耗键事件时才发送出去（例如，按下 MEDIA 按钮时音乐播放器暂停）。

# firefox - Firefox 13 PC 和锯齿状字体

> ID：11318076
> 
> 赞同：0
> 
> 时间：2012-07-03T19:44:59.210
> 
> 标签：firefox, fonts, rendering, cleartype

在 Firefox PC 上，字体呈锯齿状。

问题：对于这个 Firefox PC 问题，是否有当前的 CSS 解决方法或公认的解决方案？

我使用 fontsquirrel 将我的桌面 TTF 字体转换为 EOT、WOFF 等。唯一给我带来问题的浏览器是 Firefox PC。所有其他浏览器/操作系统组合看起来都很流畅。cleartype 与此有关吗？

# php - 将 HTML 从一个页面保存到另一个页面 onclick

> ID：11318077
> 
> 赞同：1
> 
> 时间：2012-07-03T19:45:04.903
> 
> 标签：php, jquery

我知道我可以使用 php include 从服务器上的文件中读取 html，但是一旦用户单击导航到下一页，如何将文件写入服务器？

我有一个由 jquery 在第一页上更改的 div。当用户单击转到第二页并将 html 从第一页写入第二页时，我想读取更改后的 div。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:50:13.113

您可以使用 javascript 和 php 代码的组合。

**jQuery**

获取更改的 div 的值并将其放入隐藏字段中，包裹在表单标签中并将表单提交到下一页

**php**

并在下一页上，从 $_post 数组中获取隐藏字段值并显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:02:42.557

所以你有一个`div`通过 jQuery 改变的：

```
<div id="something">something here</div> 
```

要访问 div 中的 HTML，

```
var myHTML = $('#something').html(); 
```

然后使用 AJAX 将值发送到第二页：

```
$.ajax({
    url: 'secondpage.php',
    data: {
        'key' : myHTML
    }
    type: 'post'
}); 
```

在 secondpage.php 中，检查`$_POST['key']`如下

```
if( isset($_POST['key']) ) {
  // myHTML was sent successfully
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:57:10.090

1.  当用户单击“转到下一页”链接时，向某个 PHP 文件发送 AJAX 请求。
    *   AJAX 请求应包含 div html（使用 jQuery: `$(this).html()`）
2.  在 php 文件中写入 html，并将信息返回给 AJAX (true/false)。
3.  当 AJAX 成功时转到下一页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T19:52:16.903

不确定在用户单击时这样做是否是个好主意，因为更新文档需要一段时间，如果多个用户试图访问同一页面怎么办？您可以使用称为 cronjob 的东西，它基本上以指定的时间间隔从您的站点服务器执行 PHP。我这样做是为了每 10 分钟用我的 Twitter 提要更新我的网站，但每次点击都会太慢。你到底想做什么？

# java - Android Activity 中未调用 main 方法

> ID：11318078
> 
> 赞同：0
> 
> 时间：2012-07-03T19:45:07.447
> 
> 标签：java, android, android-lifecycle

所以我有这段代码可以解决java（android开发）中的二次方程，它什么也没做！！！！当我按下按钮时，它根本没有给出答案……我什至无法检查它是否正确。

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class QuadraticEquationSolver extends Activity {
public void main(String[] args){

    Button calc = (Button) findViewById(R.id.Calculate);
    calc.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            EditText X2 = (EditText)findViewById(R.id.X2);
            EditText X = (EditText)findViewById(R.id.X);
            EditText Num = (EditText)findViewById(R.id.Num);
            TextView ans= (TextView) findViewById(R.id.finalans);
            double x2 = Integer.parseInt(X2.getText().toString());
            double x = Integer.parseInt(X.getText().toString());
            double num = Integer.parseInt(Num.getText().toString());
            double finalNum = ((x*-1) + (Math.sqrt((x*x)-(4*x*num))))/(2*x2);
            ans.setText("answer: " + finalNum);

        }
    });
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_quadratic_equation_solver);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_quadratic_equation_solver, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T19:50:17.723

首先，欢迎来到安卓开发。我强烈建议您首先阅读 SDK 文档站点上的[App Fundamentals](http://developer.android.com/guide/components/fundamentals.html)和相关指南，因为它们将极大地帮助您进行新的努力。

Android 不使用单个入口点（即 main 方法），因此不会调用您的代码。您将希望将所有这些代码移动到`onCreate()`.

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_quadratic_equation_solver);

    Button calc = (Button) findViewById(R.id.Calculate);
    calc.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            EditText X2 = (EditText)findViewById(R.id.X2);
            EditText X = (EditText)findViewById(R.id.X);
            EditText Num = (EditText)findViewById(R.id.Num);
            TextView ans= (TextView) findViewById(R.id.finalans);
            double x2 = Integer.parseInt(X2.getText().toString());
            double x = Integer.parseInt(X.getText().toString());
            double num = Integer.parseInt(Num.getText().toString());
            double finalNum = ((x*-1) + (Math.sqrt((x*x)-(4*x*num))))/(2*x2);
            ans.setText("answer: " + finalNum);

        }
    });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T19:48:23.130

我不做任何 android 编程，但我怀疑 Android 会调用你的 main 方法。这个main方法的内容大概在onCreate方法中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T19:48:58.430

`onCreate()`是您`main()`在 Android 中的等价物。你的`main()`函数永远不会被调用。的内容`main()`应该进去`onCreate()`。

# asp.net - ASP.NET 类库最佳实践

> ID：11318082
> 
> 赞同：2
> 
> 时间：2012-07-03T19:45:31.490
> 
> 标签：asp.net, vb.net

我有一个包含许多类的 ASP.NET 项目。

我正在考虑为类文件创建一个类库，以便可以在其他应用程序中重用代码。有两种选择：

1）创建一个包含所有类的类库 2）只为包含将被共享的代码的类创建一个类库，然后可能使用接口

选项 2 有什么真正的好处吗？选项 1 将是有益的，因为所有代码都将在一个地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:51:02.670

我会推荐选项＃2。

如果代码将被其他应用程序重用，我不会在其中添加其他类，因为它会使库变得混乱。我会将剩余的类放在特定于该应用程序的 ASP.NET 应用程序的 App_Code 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:51:56.247

如果您的目的是重用，那么将要重用的类捆绑在一起是有意义的。然而，这并不是开发类库时唯一需要考虑的问题。最终，您需要高内聚和低耦合，不仅在类/方法级别，而且在类库（组件级别）也是如此。看：

[http://jasoncoffin.com/2011/03/10/cohesion-and-coupling-principles-of-orthogonal-object-orientated-programming/](http://jasoncoffin.com/2011/03/10/cohesion-and-coupling-principles-of-orthogonal-object-orientated-programming/)

[初学者的松散耦合和 OO 实践](https://stackoverflow.com/questions/690869/loose-coupling-and-oo-practices-for-beginners)

# ruby-on-rails - 6 个 ruby 进程在 mysql 上调用 SHOW TABLES，导致 mysql 宕机

> ID：11318084
> 
> 赞同：3
> 
> 时间：2012-07-03T19:45:35.827
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3

我正在运行一个 Rails 3.1.0 应用程序，但我遇到了一个奇怪的问题。在我们的登台服务器上，活动非常少，我们有 5 个 ruby​​ 进程不断地使用以下命令 ping mySQL：

```
poll([{fd=12, events=POLLIN|POLLPRI}], 1, 0) = 0 (Timeout)
write(12, "\f\0\0\0\3SHOW TABLES", 16)  = 16
select(13, [12], NULL, NULL, NULL)      = 1 (in [12])
read(12, "\1\0\0\1\1D\0\0\2\3def\0\vTABLE_NAMES\0\31Tabl"..., 16384) = 637
poll([{fd=12, events=POLLIN|POLLPRI}], 1, 0) = 0 (Timeout)
write(12, "\f\0\0\0\3SHOW TABLES", 16)  = 16
select(13, [12], NULL, NULL, NULL) 
```

最后一行是不完整的，但我们每秒钟都在谈论几次（x5/6 进程）。该服务器是一个野兽，它有 32GB 的 RAM 并且已经进行了一些优化（即 mySQL 设置），但它杀死了服务器。

就像我说的，服务器的活动很少，所以它不是用户，也不是任务。

（对于考虑将其从该论坛移开的管理员，我相信这是一个 ruby​​/rails 问题，我不确定它是否在服务器论坛中，它与回答者有很好的兼容性）

我会非常感谢任何建议，我担心这可能会让我有点不知所措。我不是这样的 Linux/mySQL 专业人士。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:52:06.170

我会查看您的数据库的连接池。运行这个有帮助吗？

ActiveRecord::Base.clear_active_connections！

具体来说，在此环境的 config/database.yml 中，尝试设置 pool:50 并重新启动 rails，然后查看这是否会影响结果。如果您的池已用尽，下一个问题是了解数据库连接池被用完的具体原因（此命令或在 resque 中运行的某些内容）。我认为池默认大小是 4 或 5

# javascript - Javascript 和 Heroku。脚本不在服务器上运行，即使它在本地运行

> ID：11318093
> 
> 赞同：0
> 
> 时间：2012-07-03T19:46:03.033
> 
> 标签：javascript, ruby-on-rails-3, heroku

我有一个带有 Slidedeck jquery 插件的站点。当我在本地提供它时，它工作得很好，看起来很棒。但是，在我将它推送到 Heroku 之后，它根本不起作用。

我正在使用 sprockets 包含我的所有文件，并且我还使用了一个处理主题的 gem (themes_for_rails)。我在配置中有一个初始化程序：

```
 ThemesForRails.config do |config|
  # themes_dir is used to allow ThemesForRails to list available themes. It is not used to resolve any paths or routes.
  config.themes_dir = ":root/app/assets/themes"

  # assets_dir is the path to your theme assets.
  config.assets_dir = ":root/app/assets/themes/halo"

  # views_dir is the path to your theme views
  config.views_dir =  ":root/app/views/themes/halo"

  # themes_routes_dir is the asset pipeline route base. 
  # Because of the way the asset pipeline resolves paths, you do
  # not need to include the 'themes' folder in your route dir.
  #
  # for example, to get application.css for the default theme, 
  # your URL route should be : /assets/default/stylesheets/application.css
  config.themes_routes_dir = "assets"
end 
```

这是在我的 application.js 中：

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require_tree ../themes/halo/javascripts 
```

也许我的问题是我在 Heroku 中使用相对路径。不过，我不确切知道如何做绝对路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:04:02.040

我以前没有使用过 Slidedeck 库，但这里有一些事情可以用来缩小你的错误来源：

*   Javascript 出错。在 Heroku 上的应用程序中加载控制台。基本的 Javascript 工作吗？如果不是，那么可能是某些错误正在吞噬您的错误——我以前见过这种情况，但我无法找到究竟是什么原因造成的。

*   Slidedeck加载实际上存在问题吗？如果它被包装在一个类中（就像 jQuery 是如何被包装在 jQuery 类中的），你能在控制台中引用那个类吗？

*   Heroku 上的相对路径应该没问题……但我注意到这一行：

    //= require_tree ../themes/halo/javascripts

    你需要相当于`app/assets/themes/halo/javascripts`. 是对的吗？为什么不使用`javascripts`文件夹？如果您在此文件夹中也有 css 和图像，您可以将它们拆分到各自的`app/assets/`子文件夹中，以确保。（我的队友告诉我这不是或不应该是必要的，但我发现它在一两次情况下对我有帮助）。

*   是否有任何与资产预编译失败相关的控制台错误推送到 Heroku？他们有一个专门的页面来解决这个错误。

# jquery - 手风琴在 JQuery Mobile 中全部折叠/展开

> ID：11318103
> 
> 赞同：5
> 
> 时间：2012-07-03T19:47:00.743
> 
> 标签：jquery, jquery-mobile

我正在使用 JQuery Mobile，我的页面上有一堆手风琴。我想通过单击按钮一次展开/折叠所有手风琴。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T20:07:31.067

这样的事情有用吗？

*   [http://jsfiddle.net/UUhMa/](http://jsfiddle.net/UUhMa/)
*   [http://jsfiddle.net/UUhMa/3/](http://jsfiddle.net/UUhMa/3/)（没有foreach）

JS

```
$('#openAll').on('click', function() {
    $('.openMe').each(function() {
        var coll = $(this);
        coll.trigger('expand');
    });
});
$('#closeAll').on('click', function() {
    $('.openMe').each(function() {
        var coll = $(this);
        coll.trigger('collapse'); 
    });
}); 
```

备用 JS（没有 foreach）：

```
$('#openAll').on('click', function() {
    $('.openMe').trigger('expand');
});
$('#closeAll').on('click', function() {
    $('.openMe').trigger('collapse');
}); 
```

HTML

```
<div data-role="collapsible" class="openMe">
   <h3>Hello 1</h3>
   <p>I'm the collapsible content. By default I'm closed, but you can click the header to open me.</p>
</div>
<div data-role="collapsible" class="openMe">
   <h3>Hello 2</h3>
   <p>I'm the collapsible content. By default I'm closed, but you can click the header to open me.</p>
</div>
<div data-role="collapsible" class="openMe">
   <h3>Hello 3</h3>
   <p>I'm the collapsible content. By default I'm closed, but you can click the header to open me.</p>
</div>
<br />
<a href="#" data-role="button" id="openAll">Open All Collapsible</a>
<a href="#" data-role="button" id="closeAll">Close All Collapsible</a>
​ 
```

文件：

*   [http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible.html](http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible.html)

看起来这不适用于一组，因为一次只能打开一个：

*   [http://jsfiddle.net/UUhMa/1/](http://jsfiddle.net/UUhMa/1/)

设置文档：

*   [http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-set.html](http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-set.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-25T11:13:54.610

由于某种原因，上述解决方案对我不起作用，即；$('.openMe').trigger('collapse'); 和 $('.openMe').trigger('expand'); 不管用。

所以，我稍微重写了方法。

Javascript 代码将如下所示

```
$('#openAll').on('click', function() {
        $(".ui-collapsible-heading").removeClass("ui-collapsible-heading-collapsed");
        $(".ui-collapsible-content").removeClass("ui-collapsible-content-collapsed");
        $(".ui-collapsible-heading a").addClass("ui-icon-minus").removeClass("ui-icon-plus"); 
```

});

```
$('#closeAll').on('click', function() {
        $(".ui-collapsible-heading").addClass("ui-collapsible-heading-collapsed");
        $(".ui-collapsible-content").addClass("ui-collapsible-content-collapsed");
        $(".ui-collapsible-heading a").removeClass("ui-icon-minus").addClass("ui-icon-plus"); 
```

});

IE; 使用 jquery 添加和删除所需的类。

[相同的jsfiddle](http://jsfiddle.net/jnelsonin/jy9m7/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-29T05:39:46.867

我在试图弄清楚为什么它不能在一个可折叠的集合上工作时偶然发现了这篇文章，正如菲尔所说的那样，这是不可能的，因为一次只能打开一个。

它可能不是合适的解决方案，但我能够模仿可折叠集的外观，同时通过将以下 CSS 添加到可折叠物本身使其成为简单的可折叠物：

```
.collapsible { margin: -1px 0 0; border-radius: 0; } 
```

然后，这使我可以使用

```
$('.collapsible').collapsible('expand');
$('.collapsible').collapsible('collapse'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-30T17:06:51.540

假设您所有的可折叠 div 共享一个共同的父级：

```
$("#parent-id").children().collapsible("collapse"); 
```

# oracle - 为什么我在插入 BLOB 时会在 ValueOfCopyOfInterpreter 中获得 NPE？

> ID：11318105
> 
> 赞同：0
> 
> 时间：2012-07-03T19:47:04.450
> 
> 标签：oracle, nullpointerexception, orbeon

要查看问题：

1.  在 Oracle 中创建一个表：

    ```
    create table ut_table_ut_service_pj (
       PATH VARCHAR(80),
       BINARY BLOB
    ); 
    ```

2.  将以下管道粘贴到 XPL 沙箱中，您可以访问`http://localhost:8080/orbeon/sandbox-transformations/xpl/`，根据您的系统替换数据库 URI、用户名和密码：

    ```
    <p:config xmlns:p="http://www.orbeon.com/oxf/pipeline"
              xmlns:oxf="http://www.orbeon.com/oxf/processors"
              xmlns:xforms="http://www.w3.org/2002/xforms"
              xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
              xmlns:sql="http://orbeon.org/oxf/xml/sql"
              xmlns:odt="http://orbeon.org/oxf/xml/datatypes"
              xmlns:xs="http://www.w3.org/2001/XMLSchema"
              xmlns:exist="http://exist.sourceforge.net/NS/exist">

        <p:processor name="oxf:url-generator">
            <p:input name="config">
                <config>
                    <url>test.pdf</url>
                    <mode>binary</mode>
                </config>
            </p:input>
            <p:output name="data" id="document"/>
        </p:processor>

        <p:processor name="oxf:sql">
            <p:input name="datasource">
                <datasource>
                    <driver-class-name>oracle.jdbc.OracleDriver</driver-class-name>
                    <uri>jdbc:oracle:thin:@//localhost:1522/globaldb</uri>
                    <username>orbeon</username>
                    <password>password</password>
                </datasource>
            </p:input>
            <p:input name="data" href="#document"/>
            <p:input name="config">
                <sql:config>
                    <sql:connection>
                        <sql:execute>
                            <sql:update debug="write">
                                insert into ut_table_ut_service_pj
                                values('test.pdf',
                                <sql:param select="/*"
                                           type="xs:base64Binary" sql-type="blob"/>
                                )
                            </sql:update>
                        </sql:execute>
                    </sql:connection>
                </sql:config>
            </p:input>
        </p:processor>

    </p:config> 
    ```

这会导致以下异常：

```
|----------------------------------------------------------------------------------------------------------------------|
|Exception: java.lang.NullPointerException                                                                             |
|----------------------------------------------------------------------------------------------------------------------|
|org.orbeon.oxf.processor.sql.interpreters.ValueOfCo|<init>                        |ValueOfCopyOfInterpreter.java |  48|
|org.orbeon.oxf.processor.sql.SQLProcessor$Interpret|addAllDefaultElementHandlers  |SQLProcessor.java             | 476|
|org.orbeon.oxf.processor.sql.interpreters.ConfigInt|start                         |ConfigInterpreter.java        |  32|
|org.orbeon.oxf.processor.sql.SQLProcessor$Interpret|startElement                  |SQLProcessor.java             | 503|
|org.orbeon.oxf.processor.sql.SQLProcessor$RootInter|startElement                  |SQLProcessor.java             | 280| 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:47:06.197

NPE 是一个[错误](https://github.com/orbeon/orbeon-forms/issues/349)。这是从 2012-07-03 开始[​​修复](https://github.com/orbeon/orbeon-forms/commit/dda2cfad55a5ee1ed89371b7a36f8421c8e53569)的。

*   在 中`ValueOfCopyOfInterpreter`，`interpreterContext.getCurrentNode()`为空。
    *   这`SQLProcessorInterpreterContext`是在构造函数中创建的`RootInterpreter`。
    *   解释器上下文中的第一个节点`currentNodes`添加在 中`SQLProcessorInterpreterContext.setInput()`，`null`由 by调用`RootInterpreter`。
    *   这`null`来自于`SQLProcessor.execute()`决定配置中的所有 XPath 表达式（这里只是`/*`）都可以流式传输，因此不需要读取文档，这没关系。
*   `ValueOfCopyOfInterpreter`使用该包装器：
    *   评估`string(.)`列表（原子化），包装列表中的每个元素。
    *   评估`string(.)`一个`Node`
*   `data`在这两种情况下，基于输入文档而不是 from创建包装器确实有意义`Dom4jUtils.createDocument()`，尽管我不确定会产生什么影响。
*   使固定
    *   但是由于此时我们必须有一个当前节点，正如我们所说的`XPathUtils.selectObjectValue()`传递该当前节点，似乎将包装器的创建延迟到该点是有意义的。
    *   仍然保留`wrapper`as object 属性，因此我们不会不必要地重新创建包装器。

下一个错误是：`Invalid sql-type attribute: blob`，由于另一个[错误](https://github.com/orbeon/orbeon-forms/issues/350)。这是从 2012-07-03 开始[​​修复](https://github.com/orbeon/orbeon-forms/commit/9eb052228befc72607e45853a89b2a16eff5b86d)的。

*   这是由 触发的`<sql:param select="/*" type="xs:base64Binary" sql-type="blob"/>`。
*   在`QueryInterpreter`中，如果类型是`xs:anyURI`，那么我们对 BLOB 和 CLOB 使用相同的技术。
*   但是如果类型是`xs:base64Binary`，如果类型是 BLOB，我们会通过异常。
    *   顺便说一句，这是 MySQL 和 Oracle 持久层存储文件时使用的。
*   因此，当类型为 时，这样做似乎是合理的`xs:base64Binary`。

# django - 客户端与服务器端模板

> ID：11318109
> 
> 赞同：0
> 
> 时间：2012-07-03T19:47:17.107
> 
> 标签：django, templates, django-templates, templating

我想知道进行 ajax 调用以更新用户名列表的最佳选择是什么。我可以

一种。进行ajax调用并取回用户对象并构建html并将其附加到div中

```
build_html = function(obj) {
    html = 'username - ' + obj.username
    $('#container').append(html);
} 
```

湾。做一个ajax调用并让django返回html。

```
response = render_to_response ('user_item_template.html', {'user' : user})
return response._container 
```

如果响应成功，我会将其附加到容器 div 中。

使用方法“b”是否有任何缺点，因为根据情况在 javascript 中构建 html 可能会遇到问题，例如未转义的字符，而且通常很混乱。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T19:55:05.957

如果您请求的内容仅用于生成 HTML，则只需将 HTML 作为响应返回。无需涉及客户端，并且您的服务器在生成时总是会更快，尤其是在使用缓存的情况下。

如果您需要来自响应的*数据*，即您可以稍后自省以在您的 JS 中做出决策的东西，那么您需要返回 JSON 并处理任何 HTML 客户端的生成。

基本上，如果您可以通过返回平面 HTML 来解决问题，那就去做吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:47:43.343

我想说这取决于...在大多数情况下（特别是如果您关心连接速度较慢的移动用户）传输较少的数据比解析 JSON 和生成 HTML 客户端所花费的时间更重要。

推荐阅读：[http ://ryanflorence.com/2012/client-v-server-templating/](http://ryanflorence.com/2012/client-v-server-templating/)

# ios - UIPopover 中的 UIWebView - 报告大小

> ID：11318110
> 
> 赞同：3
> 
> 时间：2012-07-03T19:47:19.230
> 
> 标签：ios, uiwebview, uipopovercontroller

我在 iOS 应用程序的 UIPopoverController 中显示 UIWebView。

iPad 报告其窗口大小为 980x1532。因此，当我加载外部页面时，它会加载并呈现 980 像素宽。

我在这个 webview 中访问了一个外部网站，所以我不能从服务器修改任何代码。

有没有办法设置它，以便 iPad UIWebView 将报告弹出框的大小（320x480）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T21:39:09.997

问题可能出在 HTML 中。该页面设置了 content="width=device-width" ，它将 uiWebView 内容大小设置为设备大小与视图大小。

结帐此问题的第二个答案，[在 UIPopoverController 内的 UIWebView 中显示 Wiki 移动页面](https://stackoverflow.com/questions/7808579/displaying-wiki-mobile-page-in-uiwebview-within-uipopovercontroller)

它解决了我的问题代码如下

```
- (void)webViewDidFinishLoad:(UIWebView *)aWebView {
if(aWebView.frame.size.width < aWebView.window.frame.size.width) {
    // width=device-width results in a wrong viewport dimension for webpages displayed in a popover
    NSString *jsCmd = @"var viewport = document.querySelector('meta[name=viewport]');";
    jsCmd = [jsCmd stringByAppendingFormat:@"viewport.setAttribute('content', 'width=%i, initial-scale=1.0, user-scalable=1');", (NSUInteger)aWebView.frame.size.width];
    [aWebView stringByEvaluatingJavaScriptFromString:jsCmd];
}
// stop network indicator
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO; 
```

}

# php - 如何在课堂上获取变量？

> ID：11318115
> 
> 赞同：0
> 
> 时间：2012-07-03T19:47:34.697
> 
> 标签：php

> **更新**

**其他类**

*   其他类->函数A
*   其他类->函数B
*   OtherClass->whatever (dynamic) <-- 可以调用 OtherClass->foo 或 OtherClass->bar

**甲级**

```
class A
{
    protected $_data;

    public function __construct()
    {
        $other = new OtherClass;
        $something = $this->_data;
        $this->process = $other->$something; // Not Work
    }

    public function ipsum()
    {
        return $this->process; 
    }
} 
```

**B类**

```
class B extends A
{
    protected $_data = 'string';

    public function __construct()
    {
        parent::__construct();
    }

    public function lorem()
    {
        return $this->ipsum(); // $other->string; 
    }
} 
```

我怎样才能得到`$_data`？

它在`$other->foo`没有变量的情况下工作

帮助..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:49:26.560

你确定你不是说：

```
$process = $other->something; 
```

`$other->$something``$something`将从object返回其名称存储在其中的属性`$other`，并且从上面的示例中`$something`是 is `NULL`。

# vb.net - 图形是符号？

> ID：11318120
> 
> 赞同：2
> 
> 时间：2012-07-03T19:48:02.160
> 
> 标签：vb.net, drawing

我有一个 Visual Studio 2003 应用程序，可以将图形呈现到我的网页上。自从我使用它已经有一段时间了，但我将代码复制并粘贴到一个新的 2008 Visual Studio Vb.Net 项目中，屏幕上的输出只是很多符号而不是图形。

我做了一个简短的测试代码，它不会工作。我错过了什么？

```
 Dim X As Integer = 0
    Dim Y As Integer = 0

    'Build a BitMap that will act as the pallet and container 
    Dim objBitMap As New Bitmap(360, 360)
    'Declare your Graphics objects for painting graphics on your newly created bitmap.
    Dim objGraphics As Graphics
    objGraphics = Graphics.FromImage(objBitMap)
    objGraphics.Clear(Color.White)
    objGraphics.DrawLine(New Pen(Color.Red), 0, 0, 200, 200)
    objBitMap.Save(Response.OutputStream, ImageFormat.Gif)
    objBitMap.Dispose()
    objGraphics.Dispose() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:55:19.713

您只是将字节数组写入响应流 - 假设默认内容类型为`text/html`，浏览器认为它正在获取 HTML 并将其呈现为文本。

将内容类型更改为`image/gif`输出前：

```
Response.ContentType = "image/gif"
objBitMap.Save(Response.OutputStream, ImageFormat.Gif) 
```

# jquery - 只影响一个元素的一个实例来激活 jQuery 行为？

> ID：11318123
> 
> 赞同：0
> 
> 时间：2012-07-03T19:48:20.737
> 
> 标签：jquery, slidetoggle

我有一个带有标题的图像容器，当我将鼠标悬停在它上面时，我打算让标题滑入，为此我使用了 jQuery slideToggle。这是代码...

```
<div class="image">
    <div class="caption">Caption Content</div>
</div>

$('.image').hover(function() {
    $('.image .caption').slideToggle('slow', function() {
    // Animation complete.
    });
}); 
```

这是一个工作版本：http: [//jsfiddle.net/HZAHg/](http://jsfiddle.net/HZAHg/)

...它完美地工作。但是，我有多个实例，因此当我将鼠标悬停在其中一个上时，它们都会激活。我如何使它一次只有一个激活（我悬停在上面的那个）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:53:44.313

试试这个：

```
$('.image').hover(function() {
    $(".caption", this).slideToggle('slow', function() {
    // Animation complete.
    });
});​ 
```

因为图像被悬停在上面，所以“this”指的是图像。如果你在选择器中的逗号后面放了一些东西，这意味着只在选择器的那组节点内部查看。所以在这里我们说“查看悬停在（this）上的'.image'节点内部并在其中查找.caption”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:51:27.840

试试这个：

```
$('.image').hover(function() {
    $('.caption', this).slideToggle('slow', function() {
    // Animation complete.
}); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:52:41.713

试试这个：

```
$('.image').hover(function() {
    $('.caption', this).slideToggle('slow', function() {
        // Animation complete.
    });
}); 
```

[更新的小提琴](http://jsfiddle.net/HZAHg/1/)

# android - 发布/升级多个团队成员

> ID：11318128
> 
> 赞同：0
> 
> 时间：2012-07-03T19:49:01.523
> 
> 标签：android, google-play, jar-signing

作为一个团队，我们在 Google Play 中开发并发布了一个应用程序。这是通过使用个人生成的证书签名来完成的。现在我们想升级应用程序，但遇到了需要原始（个人）证书才能运行的问题。

不同的成员（最初发布应用程序的成员除外）必须能够升级应用程序。现在我能想到的唯一解决方案是与团队成员共享生成的私钥。还有另一种方法可以做到这一点吗？签名密钥应该保密吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:07:23.567

每个需要能够将 apk 上传到市场的人都需要一份发布密钥的副本。

如果您的开发团队担心隐私/安全问题，那么我建议您创建一些系统，让开发人员可以将 apk 提交给某种“领导”，该“领导”可以批准将其上传到市场（通过使用发布密钥对其进行签名）。

但是如果你希望所有的开发者都能够编译并上传一个apk到市场上，那么他们都必须有release key，这样他们才能在导出apk时对其进行签名。

# ruby-on-rails - 非迁移数据库修改

> ID：11318129
> 
> 赞同：0
> 
> 时间：2012-07-03T19:49:06.000
> 
> 标签：ruby-on-rails, model-view-controller, sinatra

我处于构建 Web 应用程序的相对早期阶段，但我知道它的总体目标应该是什么。我目前正在使用 rails (3)，并且我完全欣赏 rails 的好处。

但是，我可以在某一时刻做的一件事是允许客户自己向数据库添加/删除一些列。这些额外的列将在我将设置的模板中（“数字”列，具有用于搜索、查询等的预设选项）

基本上我想知道这是否可以在 Rails 中完成，或者是否或多或少有必要切换到较低级别的平台，因为在许多方面这个想法违反了 Rails 约定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:54:47.387

我永远不会允许客户/用户弄乱我的数据库模式！！！！oneeleven

您可能会考虑将可选的用户相关属性放入序列化字段或使用基于文档的数据存储（如 mongoDB），这样您就可以摆脱“列”的约束

# drupal - Drupal 中的角色（用户模块）

> ID：11318131
> 
> 赞同：1
> 
> 时间：2012-07-03T19:49:08.573
> 
> 标签：drupal, drupal-7, drupal-modules

我一直在尝试使用 Drupal 7 并且对用户角色有疑问。

1.  In the application that I am trying to create, There are 5 roles for users and there is one role ( say E ), which when chosen, the others ( A, B, C, D ) will grey out or can't be chosen .

简单来说，

if( $role selected == A || B || C || D ) { 可以选择其他角色，包括角色 'E' }

if( $role selected == E ) { 其他角色被阻止，无法选择 }

有什么可能的方法可以实现吗？

2\. 我对角色的状态还有另一个疑问。除了默认的“状态”之外，我还能以其他方式标记用户吗？另外，如果这不可能，我是否可以创建一个新的 Status ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:14:15.210

对于第 1 点，您可以使用 jQuery 来实现。您可以使用[此答案](https://stackoverflow.com/a/2330236/863380)中的代码来帮助您入门。

对于第 2 点，是的，您可以标记用户。您可以将自己的过滤器添加为字段，`admin/config/people/accounts/fields`并使用[字段权限模块](http://drupal.org/project/field_permissions)阻止用户访问此字段。

**更新：** 详细步骤：

1-去`http://[YOUR_SITE.COM]/admin/config/people/accounts/fields`

2- 在 to 下`Add new field`，输入新字段名称，然后`Type of data to store`选择`List (text)`。然后点击`Save`

3- 在`Field settings`页面中，输入`Allowed values list`（演讲者，与会者，...）

4- 如果启用了[字段权限模块](http://drupal.org/project/field_permissions)`Field visibility and permissions`，您应该会在页面底部看到。选择`Custom permissions`并检查可以查看/编辑此字段的角色。然后单击`Save settings`。

希望这会有所帮助……穆罕默德。

# c# - C#：水平翻转图像

> ID：11318134
> 
> 赞同：8
> 
> 时间：2012-07-03T19:49:16.870
> 
> 标签：c#, visual-studio-2010, visual-studio, image, rotation

我想要做的是，在单选按钮单击时水平翻转图像。

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
{
    arrow.Image.RotateFlip(RotateFlipType.RotateNoneFlipX);
}

private void radioButton2_CheckedChanged(object sender, EventArgs e)
{
    arrow.Image.RotateFlip(RotateFlipType.RotateNoneFlipX);
} 
```

上面的代码不会翻转图像：图像保持原样。我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T20:05:23.610

您需要使其重绘，您可以通过执行手动强制执行

```
 private void radioButton1_CheckedChanged(object sender, EventArgs e)
 {
     arrow.Image.RotateFlip(RotateFlipType.RotateNoneFlipX);
     arrow.Invalidate() ;
 } 
```

您也应该只在其中一个单选按钮上使用它，而不是两者，否则它们会相互否定，所以用上面的替换你当前的东西。刚刚验证在vs2005下可以用，没有vs2010方便

# cocoa-touch - iOS 应用程序在使用 colorWithRed:green:blue:alpha 时崩溃

> ID：11318138
> 
> 赞同：1
> 
> 时间：2012-07-03T19:49:26.740
> 
> 标签：cocoa-touch, crash, uicolor

我的 iOS 应用程序中有一个`UIControl`子类（我使用的是 iOS 4.3），子类的一部分是一个名为“setButtonColor:(UIColor)bc”的方法。每当我从我的代码中调用此方法时，它都可以正常工作……但前提是我使用了像 greenColor 或 redColor 这样的内置颜色。如果我使用“ `colorWithRed:green:blue:alpha`，”来制作我自己的颜色，它会在控制台中崩溃并显示以下消息：

```
-[UIDeviceRGBColor set]: message sent to deallocated instance 0x4e61560 
```

这是 setButtonColor: 方法：

```
-(void)setButtonColor:(UIColor *)bc{
    buttonColor = bc;
    [self setNeedsDisplay];
} 
```

如果我删除`setNeedsDisplay`，它不会崩溃，但按钮颜色不会像预期的那样改变。如果有人对为什么会发生这种情况有任何见解，我将不胜感激，如果您需要更多详细信息，请询问。

编辑：我只是稍微研究了一下。在我的 -drawRect 方法中，我调用 [buttonColor set]。通过注释掉它，它不再崩溃，但同样，它也不会改变按钮的颜色。

提前致谢，

thekmc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:07:22.930

我假设您没有使用ARC。

当设置不保留时，buttonColor 将在当前池刷新`buttonColor = bc`时成为一个悬空指针（假设它没有在其他地方保留）。`autorelease`

[self setNeedsDisplay] 将在稍后调用 drawRect:，此时 buttonColor 可能已经被释放，这将在引用它时使您的应用程序崩溃。

静态颜色不会崩溃的原因可能是 UIKit 保留了这些颜色的所有权以供以后重用。

通过在将 buttonColor 设置为 bc 后保留它，您可以保留所有权，使其对 drawRect: 仍然有效。

# javascript - 停止动画停止工作，jQuery /悬停

> ID：11318140
> 
> 赞同：1
> 
> 时间：2012-07-03T19:49:57.007
> 
> 标签：javascript, animation, jquery-hover

我正在使用 jQuery 为 3 个不同 div 的背景颜色设置动画，重复以制作 3x3 网格。如果悬停时间超过一秒，除了悬停/停止动画似乎停止工作外，一切都很好。

如果您悬停一秒钟并移出，颜色会根据需要冻结在适当的位置。但是，长时间悬停似乎会破坏悬停/停止功能。

尝试同时控制多个功能时，有人可以帮助解释悬停/停止功能的工作原理吗？

由于显示工作 jQuery 的唯一方法是通过 JSfiddle，我在这里链接到一个工作示例：http: [//jsfiddle.net/Commandrea/KbLDq/3/](http://jsfiddle.net/Commandrea/KbLDq/3/)

```
 function pixelColors(){
    var color = '#'+(Math.random()*0xFFFFFF<<0).toString(16);

    $('.logo').animate({
    backgroundColor: color
    }, 1000, pixelColors);

    }

    function pixelColors2(){
    var color = '#'+(Math.random()*0xFFFFFF<<0).toString(16);

    $('.logo2').animate({
    backgroundColor: color
    }, 2000, pixelColors2);

    }

    function pixelColors3(){
    var color = '#'+(Math.random()*0xFFFFFF<<0).toString(16);

    $('.logo3').animate({
    backgroundColor: color
    }, 1500, pixelColors3);

    }

    $('#logo_back').hover(
    pixelColors,
    function() {
    $('.logo').stop()
    }
    );

    $('#logo_back').hover(
    pixelColors2,
    function() {
    $('.logo2').stop()
    }
    );

    $('#logo_back').hover(
    pixelColors3,
    function() {
    $('.logo3').stop()
    }
    );

    .header {
    position: relative;
    margin: 0 auto;
    }

    #home_header {
    position: relative;
    z-index: 7;
    }

    .pixCol {
    float: left;
    height: 288px;
    margin-right: 20px;
    margin-top: 12px;
    min-height: 1px;
    padding-left: 15px;
    width: 227px;
    }

    #pixelBox {
    left: 14px;
    position: relative;
    top: 20px;
    }

    .logo {
    height: 69px;
    width: 69px;
    z-index: 8;
    background-color:#9C3;
    display:inline-block;
    float:left;
    background-color:#F60;
    }

    .logo2 {
    height: 69px;
    width: 69px;
    z-index: 8;
    background-color:#9C3;
    display:inline-block;
    float:left;
    background-color:#F90;
    }

    .logo3 {
    height: 69px;
    width: 69px;
    z-index: 8;
    background-color:#9C3;
    display:inline-block;
    float:left;
    background-color:#F33;
    }

    .logo_back{
    background:none;
    height: 220px;
    margin-top: 51px;
    position: absolute;
    width: 229px;
    z-index: 9;
    }

    .logo_back2 {
    background: url("images/logo/batterEmpty.png") no-repeat scroll 0 0 transparent;
    height: 220px;
    margin-top: 51px;
    position: absolute;
    width: 229px;
    z-index: 9;
    }

    ​

    <div class="header">
    <div class="pixCol">
    <div id="home_header">
    <div id="logo_back" class="logo_back"></div>
    <div id="pixelBox">

    <div class="logo"></div>
    <div class="logo2"></div>
    <div class="logo3"></div>
    <div class="logo3"></div>
    <div class="logo"></div>
    <div class="logo2"></div>
    <div class="logo2"></div>
    <div class="logo3"></div>
    <div class="logo"></div>

    </div>
    </div>
    </div>
    </div>
    ​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:03:43.633

您可以使用一个悬停事件而不是三个，并且已经知道`stop(true)`会解决问题

```
 $('#logo_back').hover(
     function(){
         pixelColors();
         pixelColors2();
         pixelColors3();
     },
    function() {
        $('.logo, .logo2, .logo3').stop(true);
    }
); 
```

[**演示。**](http://jsfiddle.net/KbLDq/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:55:02.743

~~我对你的代码很困惑，你为什么要同时启动 3 个动画？~~[编辑：哦，我看到它们在不同的元素上] 无论如何，这就是它没有停止的原因 - 你也必须调用`stop(true)`来停止排队的动画，并且由于你不断地同时触发 3 个动画，所以有很多队列中的动画。只要通过 true，你的小提琴就可以正常工作。

# ios - 分发内部业务 IOS 应用程序

> ID：11318143
> 
> 赞同：2
> 
> 时间：2012-07-03T19:50:27.707
> 
> 标签：ios, distribution

我遇到了 IOS App 分发的一个令人困惑的部分。因此，我需要对我的限制进行简单细分，将我的应用程序分发给我的员工、同事或任何被认为是“内部”的人。（这是另一种说明我不想在应用商店中使用该应用的方式）

我的情况是我为几家公司开发，他们所有的员工（和一些客户）都需要我的应用程序来查看报告。而且我不想发布应用程序，只是根据需要将其分发给人们，这是随机的。

在我的 Apple Developer 帐户中，我看到了 2 个内部分发选项：

1.  自定义 B2B 应用程序
2.  临时分发

我有几百台设备来安装我的应用程序。
我不确定哪个最适合我的场景。Ad Hoc 似乎有 100 台设备的限制，但这可能是用于 beta 测试，而不是生产版本。而且我仍在尝试掌握 B2B 应用程序的功能。

然后我看到一些公司允许 Beta 测试，而无需 iTunes 参与。

-TestFlightApp.com -AppCentral.com -HockeyApp

看起来很酷，这些业务允许我提醒人们任何应用程序更新，或邀请人们下载应用程序。（看起来很吸引人，因为用户需要简单的下载应用程序）

使用其中一项服务有缺点吗？Apple 对这个 3rd-party 的东西有问题吗？

我对建议和见解非常开放。我是这个游戏的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:58:28.693

您需要[企业许可证](https://developer.apple.com/programs/ios/enterprise/)。它允许您分发到内部设备的白名单。在此处比较[许可证](https://developer.apple.com/programs/start/ios/)

# android - Android Multipart POST - org.apache.comons.io.IOUtils 的类未找到异常

> ID：11318145
> 
> 赞同：1
> 
> 时间：2012-07-03T19:50:36.200
> 
> 标签：android, multipart

我的项目的 lib 目录中有以下 jar 文件。

apache-mime4j-core-0.72.jar commons-io-2.4.jar httpclient-4.2.jar httpcore-4.2.jar httpmime-4.2.jar

我还右键单击项目名称和 BUILD PATH 以包含这些 jar 文件。但是当我在模拟器中运行我的应用程序时，我得到了 org.apache.commons.io.IOUtils 和上述 jar 文件中的其他几个类的 Class Not Found Exception。

我会感谢任何知道如何解决问题的人。谢谢，安卓学习者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:58:46.570

您是否将 jar 文件放在项目的 /libs 文件夹中？ADT 插件将选择这些 jar 并将它们与 APK 捆绑在一起。

# bluetooth - 如何使用蓝牙模块？

> ID：11318146
> 
> 赞同：1
> 
> 时间：2012-07-03T19:50:41.530
> 
> 标签：bluetooth, serial-port

我最近从中国购买了一个蓝牙模块。现在我有了它，我不知道如何使用它。我什至无法让我的电脑找到它。我尝试将“模式引脚”连接到地和 Vcc，但这并不能使其被发现。

我怎样才能让我的电脑连接到这个？一旦我这样做了，我怎么能像串口一样实际使用它？

谢谢你。

这是模块的照片。 ![这是模块](../Images/d9825e80668d49c5ea802a42ddbed2cd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:04:54.733

看看这个链接，我猜它们与你的板子相匹配：

[http://iteadstudio.com/produce/serial-port-bluetooth-module-slave-connect-to-pc/](http://iteadstudio.com/produce/serial-port-bluetooth-module-slave-connect-to-pc/)

[http://www.elechouse.com/elechouse/index.php?main_page=product_info&cPath=90_91&products_id=647](http://www.elechouse.com/elechouse/index.php?main_page=product_info&cPath=90_91&products_id=647)

[http://www.robotshop.com/content/PDF/SeeedStudio-Bluetooth-Module-Manual-v1.2.pdf](http://www.robotshop.com/content/PDF/SeeedStudio-Bluetooth-Module-Manual-v1.2.pdf)

[http://www.robotshop.com/seeedstudio-serial-bluetooth-module.html](http://www.robotshop.com/seeedstudio-serial-bluetooth-module.html)

这是一款基于 CSR BlueCore 4 芯片的蓝牙 2.0 模块。我认为蓝板只是适配器，因此您可以轻松地将其集成到其他原型中。您可以通过 UART 将其连接到嵌入式板，如 Arduino、LaunchPad 或 PC（您需要一个补充适配器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:34:05.373

我也在电气工程网站上发布了这个问题，我从他们那里得到了很好的回答。

你可以[在这里查看。](https://electronics.stackexchange.com/questions/35630/how-to-use-arduino-bluetooth-module)

# java - 在自定义标签 Java 中注入 Bean - @Configurable

> ID：11318153
> 
> 赞同：0
> 
> 时间：2012-07-03T19:51:27.917
> 
> 标签：java, spring, dependency-injection, taglib

我无法将服务注入到我创建的自定义标签中：

```
@Configurable
public MyTag extends BodyTagSupport{

 @Autowired
 private MyService service;

 @Override
 public int doStartTag(){
 ......
  service.callServiceMethod(); // service is null
 ....
 }
 .......
} 
```

有没有办法在自定义标签中使用 @Configurable 注入 bean？我不想使用以下方法注入 bean：

```
 ServletContext sc = ((PageContext) getJspContext()).getServletContext();
 ApplicationContext context = 
   WebApplicationContextUtils.getWebApplicationContext(sc); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:54:21.433

@Configurable 需要启用使用 AspectJ 的编译时间或加载时间编织。它不适用于普通的 Spring AOP，您能否确认您的项目使用 AspectJ。

# perforce - P4 复制命令

> ID：11318166
> 
> 赞同：0
> 
> 时间：2012-07-03T19:52:24.477
> 
> 标签：perforce

我是 perforce 的新手，我想编写批处理脚本，以使用 p4 copy 命令将一个应用程序中的相同设置文件复制到另一个应用程序。当我在命令提示符下运行时，命令执行没有任何错误。通过触发器执行时，提示触发器验证错误？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:01:32.883

触发器编写的绝对第一条规则是“对环境**一无所知**！” [1](http://www.robertcowham.com/blog/82/perforce-triggers-hintstipstrapspitfalls/) .

触发器由服务器进程执行。虽然脚本可能在开发/测试期间（通过命令提示符）在本地工作，但不能保证通过触发器执行相同的命令时会出现这种情况。

检查服务器上的 p4 环境（使用[p4 set 命令](http://www.perforce.com/perforce/doc.current/manuals/cmdref/set.html)）并将其与本地环境进行比较。

Perforce 用户手册有一些[关于编写触发器/守护进程的有用建议](http://www.perforce.com/perforce/doc.current/manuals/p4sag/06_scripting.html)，我建议您阅读这些建议。

# perl - 如何跳过 Parse::RecDescent 解析器中的所有单行和多行注释

> ID：11318169
> 
> 赞同：1
> 
> 时间：2012-07-03T19:52:44.510
> 
> 标签：perl, parsing, parse-recdescent

在 Parse::RecDescent 中，我如何有效地忽略 C++/Java 样式的注释？这包括单行（'//' 直到行尾）和多行（/*此处*/之间的所有内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:05:40.960

`<skip>`定义解析器认为的空白。

```
parse: <skip: qr{(?xs:
          (?: \s+                       # Whitespace
          |   /[*] (?:(?![*]/).)* [*]/  # Inline comment
          |   // [^\n]* \n?             # End of line comment
          )
       )*}>
       main_rule
       /\Z/
       { $item[2] } 
```

与 Nate Glenn 的解决方案不同，我的

*   不设置影响所有解析器的全局变量。
*   不使用不必要的捕获。
*   不使用非贪婪修饰符。（他使用 non-greedy 修饰符来确保某些字符在某些位置不匹配，但 non-greedy 修饰符并不能保证这一点。）

* * *

注意：`(?:(?!STRING).)*`is to `(?:STRING)`as `[^CHAR]`is to `CHAR`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:52:44.930

您必须设置 的值`$Parse::RecDescent::skip`。默认情况下，Parse::RecDescent 会跳过所有空白。如果将此变量设置为匹配空格和注释的正则表达式，则可以跳过它们。用这个：

```
$Parse::RecDescent::skip = 
    qr{
        (
            \s+                 #whitespace
                |               #or
            /[*] .*? [*]/ \s*   #a multiline comment
                |               #or
            //.*?$               #a single line comment
        )*                      #zero or more

    }mxs;
# m allows '$' to match a newline, x allows regex comments/whitespace, 
# s allows '.' to match newlines. 
```

# c - C：使用指针时如何分配内存？

> ID：11318174
> 
> 赞同：1
> 
> 时间：2012-07-03T19:52:56.427
> 
> 标签：c, string, pointers, string-literals, playing-cards

我只是在看[Deitel](http://www.deitel.com/Books/C/CHowtoProgram6e/tabid/3527/Default.aspx)的这个例子：

```
#include <stdio.h>

struct card {
    char *face;
    char *suit;
};

int main( void )
{
    struct card aCard;
    struct card *cardPtr;
    aCard.face = "Aces";
    aCard.suit = "Spades";
    cardPtr = &aCard;

    printf( "%s%s%s\n%s%s%s\n%s%s%s\n", aCard.face, " of ", aCard.suit,
        cardPtr->face, " of ", cardPtr->suit,
        ( *cardPtr ).face, " of ", ( *cardPtr ).suit
    );

    system("pause");
    return 0;
} 
```

我看到有一个指向 char 的指针，但从没想过你可以使用`char *`...保存字符串

问题是：这里的内存是如何处理的，因为我没有看到任何类似`char word[50]`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:54:12.067

编译器保留一些足够大的内存位置来存储文字并将其地址分配给指针。此后，您可以像正常使用它一样使用它`char *`。一个警告是你不能修改它指向的内存。

```
char *str = "This is the end";
printf("%s\n", str);

str[5] = 0; /* Illegal. */ 
```

顺便说一句，这个[C FAQ](http://c-faq.com/strangeprob/strlitnomod.html)也讨论了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:56:53.643

字符串常量`"Aces"`,`"Spades"`等不仅仅是编译时文字*。*编译器在（通常是只读的）程序内存中为这些分配空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:10:24.480

aCard.face = "王牌"; aCard.suit = "黑桃"; 取决于它保存字符串文字的编译器。如果在只读段中，更改它将导致分段错误，如果在可写例如堆栈段中，您可以修改。所以行为是不确定的！

# c# - C# 应用程序是否跟踪其运行了多长时间？

> ID：11318175
> 
> 赞同：104
> 
> 时间：2012-07-03T19:52:56.710
> 
> 标签：c#, .net

如果是这样，是否有一种简单的方法可以获取自开始以来的总时间？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-07-03T19:55:31.807

该类`System.Diagnostics.Process`有一个包含开始时间的属性，您可以使用它来计算它已经运行了多长时间：

```
var current = System.Diagnostics.Process.GetCurrentProcess();
DateTime startedAt = current.StartTime 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-03T19:55:20.973

将此功能使用`StopWatch`类。

即使有点矫枉过正，即使用户更改时钟或即使在此过程中进行了一些夏令时更改，它也将始终有效。- [Julien Lebosquain](https://stackoverflow.com/users/183367/julien-lebosquain)（评论我的回答。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T19:54:35.480

您可以`Static DateTime Variable`为您的项目创建一个，并将日期时间存储在主类的构造函数中。引用此静态变量，并与当前时间进行比较可以帮助您实现结果

# c# - Office Encryption Provider 接口实现

> ID：11318180
> 
> 赞同：3
> 
> 时间：2012-07-03T19:53:07.147
> 
> 标签：c#, encryption, ms-office, office-interop

我一般是 C# 和 Office 插件的新手，在 Office.EncryptionProvider 接口上找不到任何信息，我试图实现该接口以创建文档加密和身份验证的自定义方法。当我致力于实现这个接口时，我意识到我不知道如何让办公室利用我的插件作为加密提供者。所以我的问题如下：

1.  任何人都可以向我指出有关此接口实现的任何 GOOD 文档（msdn 文档在这方面很可怜），[请参见此处](http://msdn.microsoft.com/en-us/library/ff870296)？
2.  有谁知道一旦建成，如何在办公室（最好是 2010 年）内建立我的插件作为加密提供程序，以便我可以检测/验证/加密/解密文档？
3.  从 Office C# 加载项的角度来看，这甚至可能吗？如果我走错了路，什么是正确的（目标是创造一种无缝的办公体验）？

更新：我找到了一个有用的文档，我将程序重建为一个 COM 插件，我发现它是必需的，但我仍然无法将其注册为加密提供程序，显然我必须设置注册表项 @ `HKCU\Software\Microsoft\Office\14.0\Common\Security\OpenXMLEncryption` 但作为我是否能够触发对我的插件的调用以进行加密。我希望知道的人可以帮助我......

# c++ - 类析构函数错误

> ID：11318187
> 
> 赞同：1
> 
> 时间：2012-07-03T19:53:49.373
> 
> 标签：c++, class, destructor, copy-constructor

我正在做一个练习题，问题要求创建一个析构函数以确保没有任何内存泄漏。当我使用此析构函数时，在执行 system("pause"); 后出现此错误：

[http://imgur.com/r2bvF](http://imgur.com/r2bvF)

这是复制构造函数：

```
 vector_of_int::vector_of_int ( const vector_of_int& a_vector )
    {
        an_array = new int[ a_vector.size ];

        this->size = a_vector.size;
        for( int i = 0; i < size; ++i )
        {
            an_array[i] = a_vector.an_array[i];
        }
    } 
```

和赋值运算符：

```
 vector_of_int& vector_of_int::operator= ( const vector_of_int& a_vector )
    {
        if( this == &a_vector )
        {
            return *this;
        }

        this->size = a_vector.size;
        for( int i = 0; i < size; ++i )
        {
            an_array[i] = NULL;
            an_array[i] = a_vector.an_array[i];
        }
            return *this;
     } 
```

我在网上搜索了一下，有人提到这可能是由于复制构造函数指向相同的内存位置。为了测试这一点，在我的 main() 函数中，我将数据推送到每个向量 a、b、c 中，然后重新打印它们，它们都是不同的。此错误在调用析构函数后显示并继续执行下一行 system("pause"); 在按任意键后，它会显示。这是 main() 的结尾：

```
 a_vector.~vector_of_int();
    b_vector.~vector_of_int();
    c_vector.~vector_of_int();
    cout << "\n";
    system("pause");
    return 0; 
```

main.exe 在 main 的大括号结束后是否再次调用析构函数？当我评论所有 3 个析构函数语句时，错误不再显示。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T19:56:23.840

不要显式地调用析构函数，这将在对象超出范围时自动发生（从代码中，我相信给定`.`用于调用析构函数的符号，向量是堆栈分配的）。即使它们是在堆上分配的，使用`new`，您仍然不会显式调用析构函数，而是使用`delete`。

此外，在赋值运算符`this->size`中更新但`an_array`不是。如果`a_vector.size > this->size`那样的话，它将导致越界访问，`an_array`因为它没有足够的元素：`delete[]`和`new[]` `an_array`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:58:31.030

从代码中可以看出您正在显式调用析构函数。虽然这是合法的并且有一些用途，但通常你不应该显式调用析构函数，因为当对象超出范围（或被`delete`调用指针）时它们会自动调用。在已经销毁的对象上执行析构函数是未定义的行为。

在您的特定代码中，析构函数可能正在释放内存，第二次（在局部变量范围的末尾自动调用）它尝试释放已由您的手动调用释放并触发运行时错误的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:57:00.773

我想你已经像这样创建了你的向量：

```
vector_of_int v; 
```

然后不要删除它 - 它是自动存储。它将在范围结束时自动删除

如果您将向量创建为：

```
vector_of_int *v = new vector_of_int(); 
```

致电`delete`运营商将其删除：

```
delete v; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T20:01:11.683

在赋值运算符中，您将项目从一个数组复制到另一个数组。但是，如果本地数组的大小小于传递给运算符的参数怎么办？您将超过数组的大小。

# android - 使用 Rezound 的 Eclipse 设备屏幕捕获在右侧有黑带

> ID：11318190
> 
> 赞同：1
> 
> 时间：2012-07-03T19:53:57.537
> 
> 标签：android, eclipse, screen-capture

在 Eclipse 中的 DDMS 选项卡上，如果我使用 HTC Rezound 进行设备屏幕捕获，我总是会在屏幕右侧看到带有黑色条带的图片（见下文）。我试过的其他手机都没有这个问题，我怀疑这是由于这款手机上的 720p 显示屏造成的。关于如何使用这款手机获得良好的屏幕截图的任何想法？谢谢！

![在此处输入图像描述](../Images/ba6cb18aeb08b6610aef747615b5b973.png)

# php - Windows路径中的php Gettext

> ID：11318193
> 
> 赞同：0
> 
> 时间：2012-07-03T19:54:06.947
> 
> 标签：php, internationalization, gettext

嗨，我正在尝试在 Windows 中使用 gettext。此代码在 linux 上运行良好，但在 windows 中不起作用。问题是它找不到区域设置文件夹的路径。有什么建议吗？

```
<?php
// I18N support information here
$language = 'pt_BR';
putenv("LANG=$language"); 
setlocale(LC_ALL, $language);

// Set the text domain as 'messages'
$domain = 'messages';
bindtextdomain($domain, './locale'); 
textdomain($domain);

echo gettext("A string to be translated would go here"); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T05:06:51.190

如果我将代码放置为，您的代码在我的 Windows 机器（Windows 7 专业版）上运行没有问题，

```
 c:\temp\test.php 
```

和资源文件为

```
 c:\temp\locales\pt_BR\LC_MESSAGES\messages.mo 
```

我通过在同一目录中制作messages.po来制作message.mo文件，然后在Poedit上编辑该文件，添加“要翻译的字符串将放在此处”的翻译（我不懂葡萄牙语，所以它是虚拟文本） , 保存（作为 .mo）。

# websocket - 我试图了解 websockets 是如何工作的以及它们在多大程度上依赖于代理服务器

> ID：11318197
> 
> 赞同：2
> 
> 时间：2012-07-03T19:54:14.980
> 
> 标签：websocket

我遇到了这个[stackoverflow 问题](https://stackoverflow.com/questions/4262543/what-are-good-resources-for-learning-html-5-websockets)，然后通过这个问题阅读了[这篇文章](http://www.infoq.com/articles/Web-Sockets-Proxy-Servers)。

据我了解，加密/非加密的 websocket 连接都依赖于通过正确的标头发送的代理服务器。

来自关于未加密的 websocket 连接的文章

> 如果未加密的 WebSocket 流量在到达 WebSocket 服务器的途中经过透明代理，则实际上连接很可能会失败，因为在这种情况下浏览器不会发出 CONNECT 方法。当代理服务器将请求转发到 >(WebSocket) 服务器时，预计会剥离某些标头，包括连接 >标头。因此，一个表现良好的透明代理服务器将导致 WebSocket >upgrade >handshake 几乎立即失败。并非所有代理服务器都符合有关预期代理行为的 HTTP 标准。例如，某些代理服务器配置为不删除 Connection: Upgrade 标头并将其传递给 WebSocket 服务器，WebSocket 服务器反过来发送 101 Web Socket Protocol Handshake 响应。当客户端或服务器开始发送第一个 WebSocket 帧时，就会出现问题。由于该帧与代理服务器可能期望的任何内容（例如常规 HTTP 流量）不同，因此可能会发生一些异常，除非代理服务器专门配置为处理 WebSocket 流量。

在加密的 Web 套接字连接上

> 在透明代理服务器的情况下，浏览器不知道代理服务器，因此不发送 HTTP CONNECT 方法。但是，由于有线流量是加密的，中间透明代理服务器可能会简单地允许加密流量通过，因此如果使用 Web Sockets Secure，WebSocket 连接成功的可能性会大得多。

如果预计未加密的连接会失败，而加密的连接只有更好的成功机会，它是如何工作的？！！

我很可能把整个事情弄错了，但我很想了解这是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:10:55.090

在加密连接中，代理看不到 HTTP 内容，因此它们只是传递消息。但是在非加密连接中，HTTP 消息（例如标头）可能会被代理检查和更改（在某些情况下），因此在某些情况下，它们需要支持 WebSocket，因为 WebSocket 消息看起来不像 HTTP-消息（例如，没有 HTTP 标头）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T12:29:40.060

值得注意的是，您所引用的文章是由为一家生产旨在解决这些问题的产品的公司工作的人撰写的。因此，作者可能有动机夸大问题的严重程度。

例如，作者说：

> [一个透明代理]预计会剥离某些标头，包括 Connection 标头

这不是真的。根据 RFC2616：

> “透明代理”是一种不会修改超出代理身份验证和识别所需的请求或响应的代理

当然，许多代理并不完全遵循 RFC，因此使用加密连接仍然是一个好主意。

TLS 加密专门用于防止中间服务器干扰您的流量。如果中间代理服务器导致安全 WebSockets 连接出现问题，那么您可能会遇到更大的问题，因为它还可能干扰其他安全流量，例如您与网上银行之间的连接。

# jquery - jQuery - 使用 remove 或 replaceWith 更改 HTML

> ID：11318198
> 
> 赞同：3
> 
> 时间：2012-07-03T19:54:15.443
> 
> 标签：jquery, html

我需要使用 jQuery 更改一些 HTML - （我无法控制 HTML，因此我需要使用一些客户端来进行这种轻微的更改）

如果 a`<br />`是名为“列”的 div 中的第一个元素，那么我需要将其删除。

所以：

```
<div class="column">
   <br />text here lorem ipsum blah<br /> 
```

会成为：

```
<div class="column">
   text here lorem ipsum blah<br /> 
```

注意，我不想去掉所有的`<br />`标签，只有当`<br />`标签直接跟在开始标签之后。

我曾希望这样的事情会奏效，但没有快乐

```
$('<div class="column"><br />').replaceWith('<div class="column">'); 
```

任何帮助表示赞赏！非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:08:31.607

Something like this should do it :

```
var pattern = /^<br\/>/;
$("<div.column").each(function() {
    var $this = $(this),
        text = $this.text();
    if(text.match(pattern)) {
        $this.text(text.replace('<br/>', ''))
    }
}); 
```

*(ignore - left in place so as to make sense of comments below)*

## EDIT

Try this :

```
var pattern = /^\n*\s*<br>/;
$("div.column").each(function() {
    var $this = $(this),
        html = $this.html();
    if(html.match(pattern)) {
        $this.html(html.replace(pattern, ''))
    }
}); 
```

**[DEMO](http://jsfiddle.net/KLWtt/)**

As @minitech points out, any event handlers and data attached to the original HTML will be lost, so either :

*   do the replacement before attaching any event handlers/data
*   take measures to re-instantiate event handlers/data after replacement
*   delegate event handling to the container element
*   do something completely different that is non-destructive - see @minitech's answer.

## Second EDIT

After much playing, at last something concise. Try this near 100% jQuery version of @minitech's approach :

```
$('.column').each(function() {
    $.each(this.childNodes, function(i, c) {
        return !$(c).filter('br').remove().end().text().trim(); 
    });
}); 
```

**[DEMO](http://jsfiddle.net/7x5vs/)**

Explanation: The inner loop visits each childNode in turn; its single statement removes the current node if it is a `<br>` but allows the loop to progress only if the current node is blank or whitespace. Note judicious use of `.end()` to keep everything in one method chain.

Efficiency: Poor - that jQuery method chain must consume a few CPU cycles but that seems a small price to pay.

Readabiity: Close to nada.

## Third EDIT

With a mild mod, this will handle any combination of leading whitespace/BRs/HTML comments :

```
$('.column').each(function() {
    $(this.childNodes).each(function(i, c) {
        return !$(c).filter('br').remove().end().text().trim(); 
    });
}); 
```

The difference from the last version is that the jQuery object `$(this.childNodes)` remains unaffected by node removal, whereas the raw `this.childNodes` is affected and the `.each()` loop doesn't scan properly. At least, that's my best attempt at an explanation.

**[DEMO](http://jsfiddle.net/7x5vs/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:07:28.353

原始节点操作！

```
$('.column').each(function() {
    var firstChild = this.firstChild;

    while(firstChild && (firstChild.nodeType === 3 && /^\s*$/.test(firstChild.nodeValue) || firstChild.nodeType === 8)) {
        firstChild = firstChild.nextSibling;
    }

    if(firstChild && firstChild.nodeName === 'BR') {
        this.removeChild(firstChild);
    }
});​ 
```

[这是一个演示。](http://jsfiddle.net/AxJTz/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:01:47.627

如果它在第一个位置，如何删除它？

```
var relevantDiv = $('#someDiv');
var divHtml = relevantDiv.html();
if ($.trim(divHtml).indexOf('<br') == 0)
{
    relevantDiv.html(divHtml.substr(divHtml.indexOf('>')+1));
} 
```

一开始就处理各种 br 标签和空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:13:26.797

怎么样：

```
$("div.column").each(function(){
    var ws=true;
    $(this).contents().filter(function(){
        if (this.nodeName.toLowerCase() === 'br' && ws){
            ws = false;
            return true;
        }
        ws &= $.trim($(this).text()) === "" && this.nodeName === "#text";
        return false;
    }).remove();
});​ 
```

[http://jsfiddle.net/bnWM7/1/](http://jsfiddle.net/bnWM7/1/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T20:59:48.003

这些人怎么样：

```
var br = $("div.column br:first-child");

if(br.length > 0 && br[0].previousSibling == null)
{
    br.remove();
} 
```

[http://jsfiddle.net/zeDn3/3/](http://jsfiddle.net/zeDn3/3/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-03T20:00:37.177

尝试这样的事情：

```
 var content = $('div.column').html();
    // there remove <br /> from content if it exits
    $('div.column').empty().append(content); 
```

# api - 获得 2 个字母的州/省缩写

> ID：11318203
> 
> 赞同：6
> 
> 时间：2012-07-03T19:54:43.633
> 
> 标签：api, geolocation, geonames

因此，我使用 GeoNames API 来获取国家和州/省信息，这些信息用于填充表单中的选择下拉列表。此表单将其信息提交给 SOAP Web 服务，而 SOAP 服务器仅了解 2 个字母形式的国家和州/省数据。IE。CA 代表加拿大，US 代表美国。GeoNames API 为不同国家/地区提供此信息，但不为其子（州/省）提供此信息。

有谁知道如何从 GeoNames 获取州/省/领地的 2 个字母缩写，或者我可以尝试其他 API 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:36:35.193

与@user640118 一致，在北美，州缩写不会经常改变，如果有的话。最好只列出代码或缩写的静态列表。

不过，为了回答您的问题，我开发了一种名为[LiveAddress](http://smartystreets.com/products/liveaddress-api)的 Web 服务，它通过一个简单的 REST 端点提供地理/邮政数据。不过，它更先进一点，因为它接受一个地址，部分或完整，并完整地填写它并验证它并标准化它。您可能会发现这对于删除重复项和对用户数据进行地理编码很有价值。

如果你有一个地址，你可以像这样在 Javascript中使用[这个包装函数：](https://github.com/smartystreets/LiveAddressSamples/blob/master/javascript/liveaddress.js)

```
LiveAddress.verify("123 main st 12345", function(results) {
   console.log(results);
}); 
```

示例输出可以在 API 文档中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:25:41.563

我不熟悉 GeoNames API，但您似乎正在获取 ISO-3166 alpha-2 国家代码：[http ://www.iso.org/iso/country_codes.htm](http://www.iso.org/iso/country_codes.htm)

如果是这样，ISO 3166-2:2007 定义了州和省。上面的页面描述了如何购买数据库和其他格式的信息。

除非需要从 Web 服务获取此信息，否则我认为从某种类型的静态文件中读取下拉列表并创建偶尔更新的机制会更简单。这种类型的数据不应该经常改变（嗯，至少在稳定的国家）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T21:48:47.460

Geonames 为国家/地区提供 2 个字母的缩写，但只有少数国家/地区的州使用它们。

为什么他们不提供标准（和有用）的东西，因为这超出了我的范围。

# java - 如何在图像上写文字

> ID：11318205
> 
> 赞同：7
> 
> 时间：2012-07-03T19:54:48.103
> 
> 标签：java, android, image, text, png

我可以在 iPhone 上的 Objective-C 中做到这一点，但现在我正在寻找等效的 Android Java 代码。我也可以用纯 Java 来做，但我不知道 Android 特定的类是什么。我想动态生成一个PNG图像，其中一些文本位于图像中心。

```
public void createImage(String word, String outputFilePath){ 
    /* what do I do here? */ 
} 
```

相关线程：

*   [如何在 Objective-C (iOS) 中的图像上写文本？](https://stackoverflow.com/questions/6992830/how-to-write-text-on-image-in-objective-c-iphone)

*   [如何使用 Java 加载图像并向其写入文本？](https://stackoverflow.com/questions/6540376/how-can-i-load-an-image-and-write-text-to-it-using-java)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T19:59:30.843

怎么样的东西：

```
Bitmap bitmap = ... // Load your bitmap here
Canvas canvas = new Canvas(bitmap);
Paint paint = new Paint(); 
paint.setColor(Color.BLACK); 
paint.setTextSize(10); 
canvas.drawText("Some Text here", x, y, paint); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T20:06:45.060

您不需要使用图形。

一种更简单的方法是`FrameLayout`使用两个元素创建一个`ImageView`- 用于图像，另一个视图用于您想要在顶部绘制的任何内容。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</FrameLayout> 
```

当然，图像顶部的东西不需要是简单的`TextView`，它可以是另一个图像，或者另一个包含你喜欢的任意元素的布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-26T10:02:49.900

我认为这也是一个很好的解决方案，可以解决您的问题。或者下载[**源码demo**](http://www.whats-online.info/science-and-tutorials/126/how-to-write-text-on-bitmap-image-in-android-programmatically/)

```
public Bitmap drawText(String text, int textWidth, int color) {

        // Get text dimensions
        TextPaint textPaint = new TextPaint(Paint.ANTI_ALIAS_FLAG | Paint.LINEAR_TEXT_FLAG);
        textPaint.setStyle(Paint.Style.FILL);
        textPaint.setColor(Color.parseColor("#ff00ff"));
        textPaint.setTextSize(30);

        StaticLayout mTextLayout = new StaticLayout(text, textPaint, textWidth, Layout.Alignment.ALIGN_CENTER, 1.0f, 0.0f, false);

        // Create bitmap and canvas to draw to
        Bitmap b = Bitmap.createBitmap(textWidth, mTextLayout.getHeight(), Bitmap.Config.ARGB_4444);
        Canvas c = new Canvas(b);

        // Draw background
        Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG | Paint.LINEAR_TEXT_FLAG);
        paint.setStyle(Paint.Style.FILL);
        paint.setColor(color);
        c.drawPaint(paint);

        // Draw text
        c.save();
        c.translate(0, 0);
        mTextLayout.draw(c);
        c.restore();

        return b;
    } 
```

上面的函数从文本中绘制位图图像或者下载[**源码demo**](http://www.whats-online.info/science-and-tutorials/126/how-to-write-text-on-bitmap-image-in-android-programmatically/)看看它是如何工作的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-14T12:01:22.473

GETah 的答案对我不起作用，所以我稍微调整了一下，这是一个 Kotlin 版本，它可以使用，使用`TextPaint`：

```
val canvas = Canvas(bm)
val textPaint = TextPaint(Paint.ANTI_ALIAS_FLAG or Paint.LINEAR_TEXT_FLAG)
textPaint.style = Paint.Style.FILL
textPaint.color = Color.BLACK
textPaint.textSize = 30f
canvas.drawText("Hello", 50f, 50f, textPaint) 
```

# vb.net - 实体框架 - 标记要删除的未更改子项的通用方法

> ID：11318207
> 
> 赞同：0
> 
> 时间：2012-07-03T19:54:59.477
> 
> 标签：vb.net, entity-framework, generics, dbcontext

我正在使用 EF4.3.1 并实现了 DBContext。
我有几个具有父子关系的实体。当我更新现有父实体时，我检索现有父实体，进行更改，将其附加到上下文，将其标记为已修改并调用 SaveChanges()。
如果父实体有子实体，我会遵循类似的过程：找到现有的，进行更改并将它们标记为已修改。我有一个通用方法来遍历我的实体上的所有子集合并将它们添加或附加到上下文中，但我还需要删除不再在父集合中的任何子集合。

例如，假设我的父实体是一个程序，每个程序都有一个子位置集合。当我第一次插入一个程序时，它有 3 个位置。当我稍后去更新父级时，位置的数量已减少到 2。我的第一种方法会将剩余的 2 个位置标记为“已修改”，并将 3 个保留为“未更改”。

这是我到目前为止的方法，但是速度很慢，所以我希望有更好的方法：

```
<Extension()>
Public Sub MarkUnmodifiedChildrenAsDeleted(Of T As Class)(context As DbContext, theEntity As T)

    'get all of the children navigation properties of the Entity
    Dim navigationProperties As List(Of NavigationProperty) = context.GetNavigationProperties(Of T)().Where(Function(w) w.ToEndMember.RelationshipMultiplicity = RelationshipMultiplicity.Many).ToList

    'get the
    Dim primaryKeyProperty As PropertyInfo = FindPrimaryKeyProperty(context, theEntity)
    Dim pkValue As Integer = CInt(primaryKeyProperty.GetValue(theEntity, Nothing))

    For Each navigationProperty In navigationProperties
        Dim theList = context.Entry(theEntity).Collection(navigationProperty.Name).CurrentValue
        If theList.count > 0 Then
            'get the foreign key property on the child entity
            Dim foreignKeyName As String = DirectCast(navigationProperty.RelationshipType, AssociationType).ReferentialConstraints.Single().ToProperties.Single.Name

            'get the child type
            Dim propInfo As PropertyInfo = GetType(T).GetProperty(navigationProperty.Name)
            Dim propValue As Object = propInfo.GetValue(theEntity, Nothing)
            Dim theChildType As Type = propValue.GetType().GetGenericArguments()(0)

            'get a dbset that contains all of the Entities that match the Child Type in the database
            Dim theDBSet = context.Set(theChildType)
            For Each item In theDBSet
                Dim dbEE As DbEntityEntry = context.Entry(item)
                'if the entity is a child of the current Parent Entity and it's marked as UnChanged, mark it to Deleted
                If dbEE.Property(foreignKeyName).CurrentValue = pkValue AndAlso dbEE.State = EntityState.Unchanged Then
                    dbEE.State = EntityState.Deleted
                End If
            Next
        End If
    Next

End Sub 
```

# vb6 - 在VB6中将事物绘制到图片框的各种方法是什么，每种方法的优点是什么？

> ID：11318212
> 
> 赞同：1
> 
> 时间：2012-07-03T19:55:11.297
> 
> 标签：vb6, drawing, picturebox

我知道两种方法：

1.  使用 .line、.circle 等方法
2.  使用 bitblt
3.  PaintPicture（从未使用过；在 google 上找到）

还有其他人吗？

使用某个系统相对于另一个系统有什么优势？（速度、抗锯齿等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T00:37:39.320

Line 和 Circle 用于矢量图形。Line 绘制线条、矩形和正方形。Circles 绘制椭圆和圆形。您可以控制这些方法是轮廓还是填充、线宽以及前景和背景颜色。

BitBlt 是一个 Win32 API 调用（不是内置的 VB 功能），它允许您将位图写入设备上下文（PictureBox 具有）。有许多不同的模式允许您将正在绘制的背景的像素与图形的像素进行交互）。

PaintPicture() 方法本质上是一个围绕 BitBlt 的 COM 包装器，位图句柄被替换为 Picture 对象。

还有PSet，它只是简单的在屏幕上的指定位置画一个点。而且我想您还可以包括 Print，它允许您绘制文本（可能包含图形字体）。

如果您使用 Win32 API，还有许多其他图形函数可用于绘制其他形状，例如圆弧、多边形和贝塞尔曲线。但是，它们通常比内置的 VB 方法更难使用。

至于一个比另一个的优势，基本上是：

*   VB 特性 vs. Win32 API 特性：易用性 vs. 功耗
*   矢量图形与位图图形：更灵活，但需要更多编程而不是简单，但使用更多内存。

# ruby-on-rails - 可以强制依赖gem的版本吗？

> ID：11318216
> 
> 赞同：3
> 
> 时间：2012-07-03T19:55:15.863
> 
> 标签：ruby-on-rails, gem, bundler

我正在使用两个依赖于宝石的`faraday`宝石。不幸的是，这取决于不同的版本......

```
Bundler could not find compatible versions for gem "faraday":
  In Gemfile:
    vacuum (~> 0.2) depends on
      faraday (~> 0.7.6)

    sorcery depends on
      faraday (0.8.1) 
```

有没有办法强制使用`vacuum`依赖的版本？`faraday``sorcery`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:58:16.910

[master 分支](https://github.com/hakanensari/vacuum)依赖于 faraday 0.8.1 。现在将您的 Gemfile 指向 git 存储库，并敦促作者将更新的 gem 发布到 ruby​​gems。

要针对作者未更新的情况回答您的问题，您必须自己 fork gem，更新[gemspec](https://github.com/hakanensari/vacuum/blob/master/vacuum.gemspec)中的依赖项，并在您的应用程序中使用您的 fork 版本。

# jquery - asp经典和ajax

> ID：11318221
> 
> 赞同：-1
> 
> 时间：2012-07-03T19:55:31.827
> 
> 标签：jquery, ajax, asp-classic

我有一个带有一堆字段的 asp 表单，我想对其实现 ajax。

我想知道什么是最好的方法和初学者的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:31:36.197

这是一个很常见的任务。这是一个使用 ajax 提交表单的基本 jQuery 示例：

```
var formData = $("#frmAction").serialize();

$.ajax({
   url: "url to ajax page",
   dataType: "json",
   type: "POST",
   data: formData,
   success: function() {
      alert("success");
   },
   error: function() {
      alert("error");
   }
}); 
```

# jquery - 未捕获的类型错误：对象# Chrome 中没有“查找”方法

> ID：11318224
> 
> 赞同：3
> 
> 时间：2012-07-03T19:55:41.580
> 
> 标签：jquery, jquery-ui, google-chrome, tinymce, jquery-ui-tabs

可能与：[Uncaught TypeError: Object #<HTMLLIElement> has no method 'find'有关：](https://stackoverflow.com/q/11134646/561731)

* * *

这是我的问题讨论的聊天： [https](https://chat.stackoverflow.com/rooms/17/conversation/tabs-issue)
://chat.stackoverflow.com/rooms/17/conversation/tabs-issue 它继续到这里：[https ://chat.stackoverflow.com/transcript/message/4373231 #4373231](https://chat.stackoverflow.com/transcript/message/4373231#4373231)

* * *

我正在执行以下操作：

```
$(document).on({
"click": function () {
    $(this).addClass("active");
    $(".TaskRow").not(this).removeClass("active").removeClass("hoverActive");
    $(".TaskDetails").hide();
    $(document).off("keyup", "body", keyDownFn);
    keyDownFn = makeRelationships(this);
    $(document).on("keyup", "body", keyDownFn);
    var thisTaskDetails = ".task" + $(this).data("id") + "Details";
    if (detailsArray[thisTaskDetails] !== undefined) {
        detailsArray[thisTaskDetails].show();
        var td = $(".taskDetails", detailsArray[thisTaskDetails]);
        if ($(".hide", detailsArray[thisTaskDetails]).length) {
            toggleMCE(td, $(".taskCopy", detailsArray[thisTaskDetails]))
            $("#" + td.attr("id") + "_parent", detailsArray[thisTaskDetails]).show();
        }
    } else {
        var thisID = $(this).data("id"),
            displayTask = function () {
                $.get(WEBROOT + INDEX + "/Task/displayTask/" + thisID, function (data) {
                    var domElement = $(data),
                        saveThis = function () {
                            $("form", domElement).trigger("submit");
                            return true;
                        },
                        taskDetails = $(".taskDetailsArea", domElement);

                    console.log(domElement);
                    detailsArray[thisTaskDetails] = domElement.appendTo(bottomLeftPane);
                    detailsArray[thisTaskDetails].tabs();  //ERROR HERE
                    console.log(domElement, detailsArray);
                    //*
                    taskDetails.tinymce({
                        // Location of TinyMCE script
                        script_url: INDEX + '/js/tiny_mce/tiny_mce.js',

                        // General options
                        theme: "advanced",
                        plugins: "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

                        // Theme options
                        theme_advanced_buttons1: "save,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
                        theme_advanced_buttons2: "pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,insertdate,inserttime,preview,|,forecolor,backcolor",
                        theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,ltr,rtl,|,fullscreen",
                        theme_advanced_toolbar_location: "top",
                        theme_advanced_toolbar_align: "left",
                        theme_advanced_statusbar_location: "bottom",
                        theme_advanced_resizing: true,

                        //Saving:
                        save_enablewhendirty: true,
                        save_onsavecallback: saveThis,

                        //                                    width: $("#leftPane").width(), height: $("#leftPane").height(),

                        //Setup:
                        setup: function (ed) {
                            console.log(ed, "setup");
                            ed.onChange.add(function (ed) { //blur
                                console.log('Editor was changed: ' + ed.id);
                                saveThis();
                                //                                          toggleMCE(taskDetails, $(".taskCopy", domElement));
                            });
                            ed.onClick.add(function (ed, evt) { //focus
                                console.log('Editor was clicked: ' + ed.id, evt);
                            });
                        }
                    });

                    $("form", domElement).on("submit", function (e) {
                        e.preventDefault();
                        var posts = $(this).serialize();
                        $.post(WEBROOT + INDEX + "/Task/changeSomething", posts);
                        return false;
                    });
                    $("form", domElement).on("focus", function (e) {
                        e.preventDefault();
                        console.log("focused on body", e);
                        return false;
                    });
                    //*/
                });
            };

        if (thisID !== undefined) {
            displayTask();
        } else {

        }
    }
}
}, ".TaskRow"); 
```

整个错误仅发生在此函数的**第二次**加载时。它失败了`detailsArray[thisTaskDetails].tabs();`

这是堆栈跟踪：

```
Uncaught TypeError: Object #<HTMLLIElement> has no method 'find' jquery.js:2
e.fn.e.init jquery.js:2
e jquery.js:2
(anonymous function) jquery-ui-1.8.9.custom.min.js:446
e.fn.e.map jquery.js:2
e.extend.map jquery.js:2
e.fn.e.map jquery.js:2
d.widget._tabify jquery-ui-1.8.9.custom.min.js:445
d.widget._create jquery-ui-1.8.9.custom.min.js:443
b.Widget._createWidget jquery-ui-1.8.9.custom.min.js:30
b.widget.b.(anonymous function).(anonymous function) jquery-ui-1.8.9.custom.min.js:28
b.widget.bridge.b.fn.(anonymous function) jquery-ui-1.8.9.custom.min.js:29
e.extend.each jquery.js:2
e.fn.e.each jquery.js:2
b.widget.bridge.b.fn.(anonymous function) jquery-ui-1.8.9.custom.min.js:29
$.on.click.displayTask :2525/#tabs-25:502
f.Callbacks.n jquery.js:2
f.Callbacks.o.fireWith jquery.js:2
w jquery.js:4
f.support.ajax.f.ajaxTransport.send.d jquery.js:4 
```

我在用`Chrome 20+`

* * *

＃＃在旁边：

中返回的`$.get`内容来自 php：

```
<div class="TaskDetails Task task<?php echo $task['Task']['taskId']; ?>Details">
    <ul>
        <li><a href="#tabs-1">Details</a></li>
        <li><a href="#tabs-2">Users</a></li>
        <li><a href="#tabs-3">Array</a></li>
    </ul>
    <div id="tabs-1" style="padding: 0px; height: 100%; width: 100%;">
        <form method="post" data-row="<?php echo $task['Task']['taskId']; ?>">
            <?php 
            $details = $task['Task']['taskDetails'];
            $details = nl2br($details);
            $details = str_replace(array("\\r\\n", "\\r"), "\n", $details);
            $details = implode("",explode("\n", $details));
            $details = stripslashes($details);
            ?>
            <textarea id="task<?php echo $task['Task']['taskId']; ?>Details" name="changedTo" class="Task task<?php echo $task['Task']['taskId']; ?> taskDetails taskDetailsArea"><?php echo $details; ?></textarea>
            <div id="task<?php echo $task['Task']['taskId']; ?>Details" class="taskCopy"><?php echo $details; ?></div>
            <input name="changed" value="taskDetails" type="hidden"/>
            <input name="row" value="<?php echo $task['Task']['taskId']; ?>" type="hidden"/>
        </form>
    </div>
    <div id="tabs-2" class="Task task<?php echo $task['Task']['taskId']; ?> taskUsers">
        <?php echo $task['Task']['taskUsers']; ?>
    </div>
    <div id="tabs-3" class="Task task<?php echo $task['Task']['taskId']; ?>">
            <pre><?php print_r($task);?></pre>
    </div>
</div> 
```

##More info: 开头`detailsArray`是一个空对象。是一些被点击的任意 DOM 元素。`{}`
`var thisTaskDetails = ".task" + $(this).data("id") + "Details";`
`$(this)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T02:51:10.380

这可能会帮助比我零更好的程序员解决方案：

过去一周，我在自己编写的 JS 页面构建器界面上注意到了这个错误。（没有 TinyMCE，但有大量的 jQuery 插件。）我得出了与这张票的作者相同的结论，即 jQuery 错误地在普通 DOM 元素上调用 find()。

有趣的是，当您关闭 Chrome 调试器时，问题就消失了。（我敢肯定，我们都可以体会到那个讽刺的意味。）

我知道这不会让你更接近解决方案，但至少你可以放心，你的 99.9% 的用户（除非他们来自 StackOverflow，我想）可能永远不会看到这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:00:18.470

I believe this is a bug in Google chrome document Inspector. There is a family of related errors. It doesn't happen in other browsers. One good thing is that most users won't find this error. On the other hand, I lost 3 hrs trying to debug the problem with document inspector, when the actual solution was to close the document inspector!

# php - 使用 Propel 时有没有办法忽略现有的表？

> ID：11318226
> 
> 赞同：0
> 
> 时间：2012-07-03T19:56:05.743
> 
> 标签：php, propel

我正在使用 Propel for PHP，我想创建一个差异任务来创建新表。

问题是这是在现有数据库中，其中表已经存在。我不希望这些表由 Propel 管理。在执行 diff 任务时，它会查看这些表。无论如何在差异过程中忽略这些表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:59:24.740

不，目前迁移任务非常愚蠢。这就是为什么您总是需要查看生成的差异类的原因。

# templates - ui:include 不包含在 Facelets 模板中

> ID：11318235
> 
> 赞同：0
> 
> 时间：2012-07-03T19:56:41.487
> 
> 标签：templates, jsf-2, insert, include, facelets

我无法将 facelets 文件加载到模板中。

我有一个名为frontpage.xhtml 的内容facelet，它被设置为web.xml 中的欢迎页面。这将加载模板。然后该模板将包含许多其他文件。当他们不加载时，我将其缩减为一个（header.xhtml）以尝试进行故障排除。当我将标头 xhtml 文件与模板和首页文件放在同一目录中时，它甚至不会加载。

当应用程序运行时，frontpage.xhtml 在模板内运行。我可以看到这一点，因为我可以看到模板中加载的 css 的效果。我可以在标题栏中看到“Hello World”和“Hello World！” 显示在页面中。但是标题没有加载到顶部。

我也尝试从模板正文中删除所有 div 和类信息。面片中没有。它没有帮助。

有人可以在这里提供一些见解吗？也许我不在基地，但我认为我可以这样定义模板，以便我可以调用加载到模板内容区域的不同 facelet。

此应用程序在没有模板的情况下可以正常运行。即，当所有内容都集中在一页中时，我正试图摆脱模块化。

目录结构（从网页的根目录开始）

```
/frontpage.xhtml
/soulard_base_template.xhtml
/sections/base/header.xhtml 
```

web.xml （我认为是相关部分）

```
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <!--<welcome-file>faces/welcome.xhtml</welcome-file>-->
    <welcome-file>faces/frontpage.xhtml</welcome-file>
</welcome-file-list> 
```

前端页面.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">
  <body>
    <ui:composition template="soulard_base_template.xhtml">
      <ui:define name="windowTitle">
        Hello World
      </ui:define>
      <ui:define name="content">
        <h2>Hello World!</h2> 
      </ui:define>
    </ui:composition>
  </body>
</html> 
```

soulard_base_template.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

  <h:head>
    <title><ui:insert name="windowTitle" /></title>
    <link href="${facesContext.externalContext.requestContextPath}/css/print.css" rel="stylesheet" type="text/css" media="print" />
    <link href="${facesContext.externalContext.requestContextPath}/css/screen.css" rel="stylesheet" type="text/css" media="screen, projection" />
    <!--[if lt IE 8]>
    <link href="${facesContext.externalContext.requestContextPath}/css/ie.css" rel="stylesheet" type="text/css" media="screen, projection" />
    <![endif]-->
    <link href="${facesContext.externalContext.requestContextPath}/css/soulardtheme.css" rel="stylesheet" type="text/css" media="screen, projection" />
    <link href="${facesContext.externalContext.requestContextPath}/css/soulard_base.css" rel="stylesheet" type="text/css" media="screen, projection" />

  </h:head>
  <h:body>
    <div class="container showgrid" title="Container">
      <div class="span-24" title="Banner">
        <ui:insert name="header">
          <ui:include src="sections/base/header.xhtml"/>
        </ui:insert>
      </div><!-- End of Banner -->

      <div class="span-16" title="Content Column">
        <ui:insert name="content" />
      </div><!-- End of Centre Column -->
    </div><!-- End of Container -->
  </h:body>

</html> 
```

header.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">
  <body>
    <ui:composition>
      <ui:define name="header">
        <h2>Header</h2>
        <h:graphicImage url="/images/header.png" 
                        width="950"
                        height="175"/>
      </ui:define>
    </ui:composition>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:48:14.447

好的，它数字。经过数小时的折腾和沮丧后，我在stackoverflow上提出了问题。然后我走了几个小时。去健身房，放松一下，回来10分钟搞定。

与教科书（Core JSF 2.0）不同，我删除了一堆插入和定义并且它起作用了。

例如 header.xhtml 现在看起来像这样：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">
  <body>
    <ui:composition>

      <h2>Header</h2>
      <h:graphicImage url="/images/williamrosmusdotcomHeader.png" 
                      width="950"
                      height="175"/>

    </ui:composition>
  </body>
</html> 
```

模板如下所示：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

  <h:head>
    <title><ui:insert name="windowTitle" /></title>
    <link href="${facesContext.externalContext.requestContextPath}/css/print.css" rel="stylesheet" type="text/css" media="print" />
    <link href="${facesContext.externalContext.requestContextPath}/css/screen.css" rel="stylesheet" type="text/css" media="screen, projection" />
    <!--[if lt IE 8]>
    <link href="${facesContext.externalContext.requestContextPath}/css/ie.css" rel="stylesheet" type="text/css" media="screen, projection" />
    <![endif]-->
    <link href="${facesContext.externalContext.requestContextPath}/css/soulardtheme.css" rel="stylesheet" type="text/css" media="screen, projection" />
    <link href="${facesContext.externalContext.requestContextPath}/css/soulard_base.css" rel="stylesheet" type="text/css" media="screen, projection" />

  </h:head>
  <h:body>
    <div class="container showgrid" title="Container">
      <div class="span-24" title="Banner">
          <ui:include src="sections/base/header.xhtml"/>
      </div><!-- End of Banner -->

      <div class="span-24" title="Menu">
        <ui:include src="sections/base/menu.xhtml"/>
      </div><!-- End of Menu -->

      <div class="span-4" title="Left Column">
        <ui:include src="sections/base/leftsidebar.xhtml"/>
      </div><!-- End of Left Column -->

      <div class="span-16" title="Content Column">
        <ui:insert name="content" />
      </div><!-- End of Centre Column -->

      <div class="span-4 last" title="Right Column">
        <ui:include src="sections/base/rightsidebar.xhtml"/>
      </div><!-- End of Right Column -->

      <div title="Footer" class ="span-24">
        <ui:include src="sections/base/footer.xhtml"/>
      </div><!-- End of Footer -->

    </div><!-- End of Container -->
  </h:body>

</html> 
```

所以现在的问题是，“插入”和“定义”有什么意义，因为它们似乎所做的只是让事情*不起作用*。那是另一天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:04:04.450

问题是 header.xhtml 中的附加“定义”条目`<ui:define name="header">`。您通常使用 ui:define 替换模板中的某些内容，但请注意外部`<ui:composition>`没有对模板的引用。所以，如果没有模板，facelets 不知道在哪里应用它，最终内部内容永远不会被使用。

# html - 页面重新加载后选择某些部分元素

> ID：11318236
> 
> 赞同：0
> 
> 时间：2012-07-03T19:56:41.570
> 
> 标签：html, css, tabs

我目前正在开发一个 html5 和 jquery 项目。我在一个页面上有一个 html5 选项卡视图，它每 5 秒刷新一次。它通过发布到从数据库中检索信息的 php 脚本来刷新，然后一些 javascript 将 php 脚本的打印输出添加到 div。在刷新之前，它会使用 ajax 加载图像更新另一个 div，一旦更新完成，它会使用`&nbsp;`. 由于刷新虽然它总是默认为第一个选项卡，显然，但我需要在刷新后将其保留在选定的选项卡上。

下面是选项卡选择的代码。

```
function getEmailData()
{
    echo '
        <article class="tabs">
            <section id="tab1">
                <h2><a href="#tab1">Queued</a></h2>
                    <center><strong>Queued Emails</strong></center>
                ' . getEmails("Queued") . '
            </section>
            <section id="tab2">
                <h2><a href="#tab2">Trying</a></h2>
                <center><strong>Trying</strong></center>
                ' . getEmails("Trying") . '
            </section>
            <section id="tab3">
                <h2><a href="#tab3">Sent</a></h2>
                <center><strong>Sent Emails</strong></center>
                ' . getEmails("Sent") . '
            </section>
            <section id="tab4">
                <h2><a href="#tab4">Failed</a></h2>
                <center><strong>Failed Emails</strong></center>
                ' . getEmails("Failed") . '
            </section>
        </article>
    ';
} 
```

获取电子邮件（）；函数返回的数据应该显示在每个选项卡内。

下面是CSS

```
article.tabs
{
    position: relative;
    display: block;
    width: 40em;
    height: 15em;
    margin: 2em auto;
}

article.tabs section
{
    position: absolute;
    display: block;
    /*top: 1.8em;*/
    top: -10px;
    left: 0;
    height: 12em;
    padding: 10px 20px;
    background-color: #ddd;
    border-radius: 5px;
    box-shadow: 0 3px 3px rgba(0, 0, 0, 0.1);
    z-index: 0;
    width: 800px;
    height: 300px;
}

article.tabs section:first-child
{
    z-index: 1;
        color: #333;
    background-color: #fff;
    z-index: 2;
}

article.tabs section h2
{
    position: absolute;
    font-size: 1em;
    font-weight: normal;
    width: 120px;
    height: 1.8em;
    top: -1.8em;
    left: 10px;
    padding: 0;
    margin: 0;
    color: #999;
    background-color: #ddd;
    border-radius: 5px 5px 0 0;
}

article.tabs section:nth-child(2) h2
{
    left: 132px;
}

article.tabs section:nth-child(3) h2
{
    left: 254px;
}

article.tabs section:nth-child(4) h2
{
    left: 376px;
}

article.tabs section h2 a
{
    display: block;
    width: 100%;
    line-height: 1.8em;
    text-align: center;
    text-decoration: none;
    color: inherit;
    outline: 0 none;
}

article.tabs section:target, article.tabs section:target h2
{
    color: #333;
    background-color: #fff;
    z-index: 2;
}

article.tabs section, article.tabs section h2
{
    -webkit-transition: all 500ms ease;
    -moz-transition: all 500ms ease;
    -ms-transition: all 500ms ease;
    -o-transition: all 500ms ease;
    transition: all 500ms ease;
} 
```

基本上，我的问题是，如果我选择第三个选项卡，并且 ajax 帖子重新加载，我如何确保第三个选项卡仍然被选中并且不会默认返回到第一个选项卡。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:20:42.530

据我所知，您有 3 个选择：

1.  单独刷新每个选项卡，并且只刷新选项卡的内容，而不是整篇文章
2.  在Ajax调用之前将之前选择的选项卡保存到JavaScript变量中，然后在接收并插入数据后重新选择选项卡
3.  通过 ajax 调用发送预先选择的选项卡，并在后端代码的选项卡上插入一个“选定”类。

2 和 3 实际上是相同的——只是改变了数据的存储位置。

我的偏好是 1 号，因为它不需要 jQuery 来刷新选项卡对象，并且还减少了回发的数据量。但是，如果您必须刷新整个`article`2 或 3 就可以了（虽然 2 可能更容易实现！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:31:33.113

您应该通过 PHP 或 javascript 设置当前选择的选项卡来创建 cookie。尝试类似：

```
</script src="https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js"></script>

$('.tabs section h2 a').click(function(){
  var tabIndex = $(this).parents('section').first().addClass('selected').index();
  $.cookies.set( 'tabIndex', tabIndex );
}) 
```

然后在文件加载

```
var tabIndex = $.cookies.get('tabIndex')
if( tabIndex ) {
   $('.tabs section:nth-child(' +tabIndex+ ')' ).addClass('selected')
} 
```

免责声明：未经测试。

# php - 无法发送电子邮件

> ID：11318239
> 
> 赞同：0
> 
> 时间：2012-07-03T19:56:57.837
> 
> 标签：php, codeigniter

我尝试使用 CodeIgniter 的电子邮件类发送邮件，但它显示了一些错误：

```
fsockopen() [function.fsockopen]: unable to connect to
ssl://smtp.googlemail.com:465 (Unable to find the socket transport
"ssl" - did you forget to enable it when you configured PHP?) 
```

我的代码在这里：

```
 $config['protocol'] = 'smtp';
        $config['smtp_host'] = 'ssl://smtp.googlemail.com';
        $config['smtp_port'] = 465;
        $config['smtp_user'] = 'myemail.world2010@gmail.com';
        $config['smtp_pass'] = 'email';

        $this->load->library('email');
        $this->email->initialize($config);
        $this->email->set_newline("\r\n");        
       $message="
           username:{$this->input->post('username')}
           password:{$this->input->post('password')}
            ";
       $this->email->from('sagar.world2010@gmail.com','Admin');
       $this->email->to($this->input->post('email'));
       $this->email->subject('Activation Message');
       $this->email->message($message);
       $this->email->send();
       echo $this->email->print_debugger(); 
```

我也改了php.ini文件并粘贴`extension=php_openssl.dll`进去，还是不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:06:31.877

来自 gmail 的 smtp 服务器是 smtp.gmail.com

所以你的配置应该是：

```
$config['protocol'] = 'smtp';  
$config['smtp_host'] = 'ssl://smtp.gmail.com';  
$config['smtp_port'] = 465;  
$config['smtp_user'] = 'myemail.world2010@gmail.com';
$config['smtp_pass'] = 'email'; 
```

但我不确定 smtp_host 是否需要 'ssl://' 部分

# javascript - bxslider 样式配置

> ID：11318247
> 
> 赞同：1
> 
> 时间：2012-07-03T19:57:21.477
> 
> 标签：javascript, jquery, html, css, bxslider

我正在尝试设置 bxslider，一个 jquery 滑块插件，但是他们的文档没有告诉您如何设置滑块的样式，就像设置网页的示例一样。我有这个代码到目前为止：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script src="jquery.bxSlider.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $('#slider1').bxSlider({
    auto: false,
    pager: true,
});
  });
</script>
</head>
<body>
<ul id="slider1">
  <li>Slide one content</li>
  <li>Slide two content</li>
  <li>Slide three content</li>
  <li>And so on...</li>
</ul>
</body>
</html> 
```

我需要添加什么才能像在此页面上一样设置按钮和格式设置：http: [//bxslider.com/](http://bxslider.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:40:18.327

您需要拥有 bx_styles 文件夹并链接到 bx_slider 样式表。

[https://github.com/wandoledzep/bxslider/tree/master/bx_styles](https://github.com/wandoledzep/bxslider/tree/master/bx_styles)

# javascript - JSON 连接

> ID：11318251
> 
> 赞同：0
> 
> 时间：2012-07-03T19:57:45.727
> 
> 标签：javascript, json, concat

如何转换此 JSON 对象：

```
"context":{"#text":["Most Visited Pages  "," 
Hall Residents Advanced Components"," Clerk"],"highlight":["City","City"]} 
```

进入：

```
Most Visited Pages <highlight>City</highlight> 
Hall Residents Advanced Components <highlight>City</highlight> Clerk 
```

通过使用Javascript？

我试过了：

```
 function highlightContext_22(context) {
      var highlighted;
      $.each(context['#text'], function(key, val) { 
           highlighted += val + val.highlight;
      });
      return highlighted;
 } 
```

输出是：

```
undefinedMost Visited Pages undefined 
Hall Residents Advanced Components undefined Clerkundefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:24:39.690

该属性`val.highlight`不存在，这就是您未定义的原因。您的对象具有 的键的数组值`#text`。键是一个单独的`highlight`属性，因此无法在当前上下文中访问。

下面的解决方案更正了引用以允许`highlight`引用该值。 *出于说明目的，我添加了其他指标。*

JavaScript：

```
var obj = {
    "context": {
        "#text": [
            "Most Visited Pages  ",
            " Hall Residents Advanced Components",
            " Clerk"
        ],
        "highlight": [
            "City",
            "City"
        ]
    }
};

var result = [];
var data = obj.context;

for(var i=0; i < data['#text'].length; i++){
    result[i] = data['#text'][i] + (data.highlight[i] ? '<highlight>' + data.highlight[i] + '</highlight>' : '');
}

document.getElementById('result').innerHTML = result.join('');

alert(document.getElementById('result').innerHTML); 
```

演示：http: [//jsfiddle.net/Wv3vH/](http://jsfiddle.net/Wv3vH/)

**注意**：上述数据试图比较两个长度相等的数组。由于`#text`数组比`highlight`数组大一，因此存在一个未定义的值，由于布尔逻辑检查该值是否存在而未显示。

# javascript - 根据主要选择过滤选择框选项

> ID：11318253
> 
> 赞同：2
> 
> 时间：2012-07-03T19:57:47.880
> 
> 标签：javascript, jquery

我正在创建一些选择框，我需要根据主选项中的选择来限制我的选项。

基本上我有`Select field 1`和`Select field 2`。

这些选择框的数据是从数据库中解析的。

选择字段 1：

```
errortype_id | errortype_text 
```

选择字段 2：

```
errorreason_id | errortype_id | errorreason_text 
```

有没有一种简单的方法可以`Select field 2`根据所做的选择自定义选项数据`Select field 1`？我的`Select field 2`表中有要过滤的变量/属性。

![在此处输入图像描述](../Images/1d172b4a19306a368124f05c7b82a269.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:06:23.193

看到[这个问题](https://stackoverflow.com/questions/2999163/changing-options-in-select-box-based-on-different-select-options)。基本上，您需要添加一个更改事件并检查`$(this).val()`. 从那里您只需创建选项元素并将它们作为 html 添加到您的选择框 2。

```
$('#select1').change(function() {
    var options = '';
    if($(this).val() == 'a') {
        options = '<option value="1">1</option><option value="2">2</option>';
    }
    else if ($(this).val() == 'b'){
        options = '<option value="3">3</option><option value="4">4</option>';
    }

    $('#select2').html(options);
}); 
```

编辑：我不明白您是否想实际过滤值、删除值或添加任意数量的值。如果您真的想过滤掉元素，您可以使用我的更改事件并将其与[.filter()](http://api.jquery.com/filter/)结合使用。

# jsp - JFreeChart 在 JSP 中向 PieChart 添加百分比

> ID：11318257
> 
> 赞同：0
> 
> 时间：2012-07-03T19:58:13.197
> 
> 标签：jsp, jfreechart, pie-chart

这是我在 JSP 中创建饼图的代码。

```
Connection conn = DBConnection.getConnection(); 

String strQuery = "SELECT keyword,count(*) from paper_keywords group by keyword";
PreparedStatement preparedStatement = conn.prepareStatement(strQuery);
ResultSet rs = preparedStatement.executeQuery();

DefaultPieDataset pieDataset = new DefaultPieDataset();
while(rs.next())
{ 
    pieDataset.setValue(rs.getString(1),rs.getInt(2));
}
rs.close();
preparedStatement.close();  

JFreeChart chart = ChartFactory.createPieChart ("Popular Keywords", pieDataset, true,true,true);

try {
    final ChartRenderingInfo info = new ChartRenderingInfo (new    StandardEntityCollection());

String test = getServletContext().getRealPath("/");
final File file1 = new File(test+"chart/areachart.png");

ChartUtilities.saveChartAsPNG(file1, chart, 550, 400, info);
} 
catch (Exception e) {
out.println(e);
} 
```

我稍后会在 jsp 页面中使用它：

```
<IMG SRC="../chart/areachart.png" > 
```

如何在图例中添加百分比？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:30:40.050

[`StandardPieSectionLabelGenerator`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/labels/StandardPieSectionLabelGenerator.html)可以做到这一点。

```
PiePlot plot = (PiePlot) chart.getPlot();
plot.setLegendLabelGenerator(
    new StandardPieSectionLabelGenerator("{0} {1} {2}")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T09:37:55.390

[第 1 步：首先从http://www.java2s.com/Code/Jar/j/Downloadjfreechartjar.htm](http://www.java2s.com/Code/Jar/j/Downloadjfreechartjar.htm)下载 jfreechart

第 2 步：在构建路径中包含 jar 文件

第三步：添加以下代码

```
 PiePlot plot2 = (PiePlot) chart.getPlot();
       plot2.setLabelGenerator(new StandardPieItemLabelGenerator(
                "{0} ({2})", NumberFormat.getNumberInstance(), NumberFormat.getPercentInstance()
            )); 
```

# php - MySQL 查询未显示 LEFT JOIN 和多个 AND 子句

> ID：11318264
> 
> 赞同：1
> 
> 时间：2012-07-03T19:58:36.137
> 
> 标签：php, mysql, sql, phpmyadmin

我添加了 AND 行，`t.cover='$c'`现在它不会显示任何结果。但是，所有变量都是正确的。如果我在 phpMyAdmin 中运行该行，它将很好地显示结果。我在 PHP 中缺少语法吗？如果我删除该`t.cover='$c'`脚本在网络上工作正常。 `$c`只是一个`$_GET['c']`，要么为空，要么等于 0，我将其重新定义为“否”。

```
if($t != '') {
    if($c == 'No') {
         $getListings = mysql_query("SELECT * FROM events t LEFT JOIN bars b on t.venue=b.name WHERE t.date='$date' AND t.type='$t' AND t.cover='$c' AND b.active='1' ORDER BY t.promoted DESC, t.order ASC");
    } else {
         $getListings = mysql_query("SELECT * FROM events t LEFT JOIN bars b on t.venue=b.name WHERE t.date='$date' AND t.type='$t' AND b.active='1' ORDER BY t.promoted DESC, t.order ASC");
    }
} else {
     if($c == 'No') {
          $getListings = mysql_query("SELECT * FROM events t LEFT JOIN bars b on t.venue=b.name WHERE t.date='$date' AND t.cover='$c' AND t.type='$t' AND b.active='1' ORDER BY t.promoted DESC, t.order ASC");
     } else {
          $getListings = mysql_query("SELECT * FROM events t LEFT JOIN bars b on t.venue=b.name WHERE t.date='$date' AND b.active='1' ORDER BY t.promoted DESC, t.order ASC");
     }
} 
```

我最大的困惑是为什么它可以在 phpMyAdmin 中工作，但在网络上却没有显示任何行。

看来我已经在 Google 上尝试了所有方法，但仍然没有运气。我希望它会抛出一个错误或一些东西来为我指明一个方向，但它只是出现就好像查询是空的一样。如果有人有任何想法，我仍在寻找输入。也许 LEFT JOIN 正在这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:56:02.273

... `LEFT JOIN bars b on t.venue=b.name AND b.active=1`...
从 WHERE 中删除 b.active 否则它将成为 SELECT 的条件

当前的查询`SELECT... WHERE ... b.active = 1 ...`意味着它只能返回满足该条件的结果

# bash - Bash：将变量传递到有空格的脚本中

> ID：11318267
> 
> 赞同：1
> 
> 时间：2012-07-03T19:58:46.973
> 
> 标签：bash

我目前有一个 bash 脚本。它看起来像这样：

```
#!/bin/bash

case "$1" in
    sendcommand)
        do X with $2
        exit
        ;;
esac 
```

我如何将所有命令发送`this command with spaces`到 $2 而不`command`充当 $3、`with`$4 等等？bash 是否有类似 PHP 或 Javascript 的 encodeURI 的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T20:42:04.843

您还必须使用引号中的第二个参数调用您的脚本

```
./scriptname sendcommand "command with spaces" 
```

您的脚本应如下所示

```
#!/bin/bash

case "$1" in
    sendcommand)
        something "$2"
        exit
        ;;
esac 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:00:16.980

用双引号括起来：

```
do_X_with "$2" 
```

双引号保留变量的内部间距，包括换行符（如果它们首先在值中）。事实上，理解双引号和`"$@"`and的用法也很重要`"$*"`，更不用说在使用`bash`数组时了。

您不能轻易调用命令，`do`因为 shell`do`在其循环结构中用作关键字。要调用它，您必须指定命令的路径，例如`./do`or `$HOME/bin/do`。

* * *

> 但是 $2 是“this”，OP 希望它是“这个带有空格的命令”。

好的。我们需要检查命令行调用和期望的行为。假设正在执行的脚本被调用`script`。此外，正在执行的命令是`othercommand`（不能使用`command`；这是标准命令）。

可能的调用包括：

*   `script sendcommand "this command with spaces"`
*   `script sendcommand 'this command with spaces'`
*   `script sendcommand this command with spaces`

在此示例中，单引号和双引号调用是等效的。如果在参数列表中有要扩展的变量或要调用的命令，它们将不等价。

可以编写`script`来处理所有三种情况：

```
#!/bin/bash

case "$1" in
    sendcommand)
        shift
        othercommand "$*"
        exit
        ;;
esac 
```

假设调用将参数括在引号中。该`shift`命令`$1`从参数列表中删除并将剩余的（单个）参数重新编号为`$1`。`othercommand`然后它使用一个字符串参数调用，该字符串参数由串联在一起的参数内容组成。如果有多个参数，则内容将由一个“空格”（的第一个字符`$IFS`）分隔。

假设调用没有将参数括在引号中。该`shift`命令仍然从参数列表中删除`$1`( `sendcommand`)，然后用空格将剩余的参数分隔为单个参数。

在所有这三种情况下，都`othercommand`看到了一个由以下组成的参数`"this command with spaces"`（当然，程序看不到双引号）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T20:00:39.797

您可以只使用双引号：

```
do X with "$2" 
```

# java - 为什么在尝试创建 jar 文件时，我的 cmd 说它无法识别该命令？

> ID：11318270
> 
> 赞同：0
> 
> 时间：2012-07-03T19:58:50.257
> 
> 标签：java, jar, cmd, exe, drjava

我无法让我已经编译和保存`.java`的文件不会在 cmd 中编译，并且它不允许我创建`.jar`文件，因为终端告诉我，当我尝试编译命令`'jar' is not a recognized as an internal or external command, operable program or batch file.`时它给了我相同的输出。`javac`

我需要创建`.jar`才能继续创建`.exe`正确的？还是有其他方法？

我也在 drJava 工作，这可能是个问题，但我不知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:04:33.880

该`<JDK_HOME>\bin`目录应该在您的 PATH 环境变量中：

```
set PATH=c:\java\jdk_xx\bin;%PATH% 
```

而且您将无法创建 .exe 文件。`java`使用该命令启动 Java 程序。

这应该在您的 Java 书籍或教程的第一章中涵盖。阅读。

# sql - 如何在 LIKE 语句中连接 % 和列名

> ID：11318276
> 
> 赞同：12
> 
> 时间：2012-07-03T19:59:29.000
> 
> 标签：sql, sql-server, sql-server-2008, sql-like

我正在尝试这个：

```
SELECT FacilityID, FacilityName, CMSProviderID, [Provider Number] 
FROM G2_Facility, SCIPHospitalCompare
WHERE [Provider Number] LIKE '%' + CMSProviderID + '%'; 
```

我得到：

```
Msg 245, Level 16, State 1, Line 1
Conversion failed when converting the varchar value '%' to data type int. 
```

我究竟做错了什么？我看到很多这样的例子，但由于某种原因，它根本不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T20:01:31.620

我假设要么 要么`[Provider Number]`是`CMSProviderID`一个数字字段？

将数值字段转换为字符串以比较两者：

```
SELECT FacilityID, FacilityName, CMSProviderID, [Provider Number]  
FROM G2_Facility, SCIPHospitalCompare 
WHERE CAST([Provider Number] as nvarchar(50)) LIKE 
    '%' + CAST(CMSProviderID as nvarchar(50)) + '%'; 
```

# objective-c - iOS 应用 - 谷歌分析页面视图

> ID：11318278
> 
> 赞同：0
> 
> 时间：2012-07-03T19:59:37.473
> 
> 标签：objective-c, ios, google-analytics

我的应用程序开发已接近尾声，我认为跟踪使用情况是个好主意，因此我实施了 Google Analytics。

我有这个工作得很好，并设法跟踪事件。但是，我想使用变量作为 trackPageView 字符串来跟踪新的页面视图。到目前为止，我已经尝试过：

```
 NSError *error;
    if (![[GANTracker sharedTracker] trackPageview:titleString
                                         withError:&error]) {
        NSLog(@"new page track error");
    } 
```

但这会返回 NSLog 错误。所以我然后尝试使用一个事件，如下所示：

```
 NSError *error;
    if (![[GANTracker sharedTracker] trackEvent:@"show_page"
     action:@"show_page"
     label:titleString
     value:-1
     withError:&error]) {

         NSLog(@"event error");
} 
```

审核提交的数据后，Event Category 和 Event Action 都提交了，但没有 event label。如何使用变量作为页面视图字符串？

提前致谢。

# flash - 允许拒绝记住闪存安全面板

> ID：11318279
> 
> 赞同：5
> 
> 时间：2012-07-03T19:59:39.973
> 
> 标签：flash, security, webcam

为什么有些Flash网站在相机/麦克风的隐私选项下可以选择“允许”“拒绝”和“记住”，而有些Flash网站只有“允许”和“拒绝”

![闪存安全](../Images/b993e67b2e52c91ae265a08540e72fb9.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T01:04:30.213

它可能有问题 :) 但这是两个单独的对话框。

第一个图像是“隐私”面板，它具有记住设置的选项。它是通过调用专门调用的（如@lazfish 评论中的链接所示）`Security.showSettings(SecurityPanel.PRIVACY);`。

第二个对话框是应用程序尝试使用相机/麦克风时 Flash 播放器显示的默认对话框。

**编辑：**为了清楚起见......“默认”不是指`SecurityPanel.DEFAULT`......我指的是Flash Player显示的通用对话框，默认情况下，如果用户尚未授予对相机/麦克风的访问权限。

更多用户友好的应用程序将使隐私面板出现，因此用户可以授予访问权限并单击“记住”。其他应用程序只是尝试访问您的相机，因此如果用户之前没有允许，Flash Player 会自动显示“默认”对话框。

您会看到“默认”对话框的另一个原因是使用“隐身”浏览（例如在 Chrome 中）。在这种情况下，浏览器将永远不会显示“隐私”对话框，而只会显示“默认”对话框。

# c++ - 使用 Alpha 通道复制 SDL_Surfaces

> ID：11318280
> 
> 赞同：1
> 
> 时间：2012-07-03T19:59:44.707
> 
> 标签：c++, sdl, alpha

我遇到了保留被复制/剪辑 blitted 表面的 alpha 通道的问题（将表面的部分 blitting 到较小的表面上，它们是 spritesheets）。我尝试了各种解决方案，但最终结果是任何应该具有透明度的表面最终变得完全不透明（alpha 蒙版变为白色）。

所以我的问题是，如何将一个 RGBA SDL_Surface 复制到另一个新表面（也是 RGBA），包括 alpha 通道？如果它有任何不同，如何将 RGBA 表面的一部分复制到新的 RGBA 表面（与源表面的剪切部分大小相同），ala tilesheet blitting。

似乎 SDL_BlitSurface 混合了 alpha 通道，所以例如，当我想将瓷砖从瓷砖表面复制到新表面时（当然，这是空白的，我假设 SDL 默认用黑色或白色填充表面） ，它最终会丢失它的 alpha 蒙版，因此当该图块最终被传送到屏幕时，它不会与屏幕上的任何内容混合。

SDL_DisplayFormatAlpha 非常适合使用 alpha 蒙版复制表面，但它不采用剪辑参数，它仅用于复制整个表面，而不是其中的一部分，因此是我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:55:08.080

我之前遇到过这个问题，还没有得到官方的回答。但是，我认为唯一的方法是编写自己的复制函数。 [http://www.libsdl.org/docs/html/sdlpixelformat.html](http://www.libsdl.org/docs/html/sdlpixelformat.html) 此页面将帮助您了解 SDL_Surface 如何存储颜色信息。请注意，8 位以上和以下的颜色之间存在巨大差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-11T15:16:20.003

如果这么多年后还有人想知道：

在对表面进行 bliting 之前，您需要确保源（即 SDL_Surface）的混合模式设置为 SDL_BLENDMODE_NONE，如文档中所述：[SDL_SetSurfaceBlendMode()](https://wiki.libsdl.org/SDL_SetSurfaceBlendMode#:%7E:text=To%20copy%20a%20surface%20to%20another%20surface%20(or%20texture)%20without%20blending%20with%20the%20existing%20data%2C%20the%20blendmode%20of%20the%20SOURCE%20surface%20should%20be%20set%20to%20SDL_BLENDMODE_NONE.)。应该看起来像这样简单：

```
SDL_SetSurfaceBlendMode(source, SDL_BLENDMODE_BLEND);
SDL_BlitSurface(source, sourceRect, destination, destinationRect); 
```

# makefile - 如何根据以前的编译更改 make 行为？

> ID：11318282
> 
> 赞同：1
> 
> 时间：2012-07-03T19:59:58.010
> 
> 标签：makefile, gnu-make

我有一个很大的makefile，我已经配置了几个虚假目标。一种用调试标志编译程序，一种用优化标志编译，等等。

我遇到的一个问题是，当您之前使用一个目标但后来指定另一个目标时，它不知道它需要使用新的一组标志重新编译所有文件。

例如，我使用调试目标编译所有内容。编译后我测试程序。没有看到任何问题，我尝试使用优化目标运行 make，但它什么也没编译，因为根据 Make 的计算，一切都是最新的。

我只是想使目标文件的位置取决于选择的目标，但除此之外我什么都没有。

有什么办法可以优雅地处理这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:29:57.460

```
# Assuming you already know the type of new build
# and it is stored in this variable.
BUILD_TYPE := release

ifneq ($(MAKECMDGOALS),__clean)

# This file stores the type of the last build.
-include .last_build_type.mk

ifneq ($(__last_build_type),$(BUILD_TYPE))
.PHONY : .last_build_type.mk
.last_build_type.mk :
    @$(MAKE) __clean
    @echo '__last_build_type := $(BUILD_TYPE)' > $@
endif

else

.PHONY : __clean
__clean : clean # Delegate the job to your real 'clean' target.

endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:17:08.890

这种事情会被[makepp](http://makepp.sourceforge.net/ "可靠的 GNU 替代品")自动捕获。

# tfs - 运行 TFS 源代码控制中的 Powershell 脚本

> ID：11318284
> 
> 赞同：5
> 
> 时间：2012-07-03T20:00:02.713
> 
> 标签：tfs, powershell-2.0, tfsbuild

我正在尝试在构建过程中运行 Powershell 脚本，但我不知道如何访问已签入源代码控制 (TFS 2010) 的 ps1 文件。存在类似的 SO question，但我实际上不确定它是否正确：

[TFS 2010：运行存储在源代码控制中的 powershell 脚本](https://stackoverflow.com/questions/6278804/tfs-2010-run-powershell-script-stored-in-source-control)

我的 TFS 源代码控制设置如下：

=Project
==BuildScripts
===MyScript.ps1
==代码
===
Dir1 ====MySolution.sln

我认为传递类似`SourcesDirectory + "\..\..\MyScript.ps1"`（告诉Powershell脚本在哪里）之类的东西会起作用，但我想我在某个地方。

有人可以帮我弄清楚如何引用 ps1 文件并运行它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:17:33.673

您将需要在构建定义中设置工作区，其中包括带有 Powershell 脚本的目录。

所以你的映射可能是这样的：

```
*Server*                    *Workspace*
$/Project/Code/Dir     -    $(SourcesDir) 
```

您将需要添加：

```
*Server*                    *Workspace*
$/Project/Code/Dir     -    $(SourcesDir)
$/Project/BuildScripts -    $(SourcesDir)/BuildScripts 
```

然后您的 InvokeProcess 可以传递`Path.Combine(SourceDirectory, "BuildScripts", "MyScript.ps1")`到 Powershell 命令行。

注意您也可以将`$/Project/Code/Dir`工作区设置为`$(SourcesDir)/Code`.

# google-maps - 已添加地点的 Google Places API 的参考令牌不起作用。接受的地方可以。

> ID：11318289
> 
> 赞同：2
> 
> 时间：2012-07-03T20:00:31.167
> 
> 标签：google-maps, google-places-api

我有一个运行良好的 android 应用程序，但 2 天前事情开始失败。经过一番调试后，我注意到我无法检索已添加到 Places API 的地点的详细信息。根据我的位置进行地点搜索后，我确实看到列出了我添加的位置。当我获取提供的参考令牌并尝试执行 Places Details 请求时，我会返回以下 JSON。

```
{
   "html_attributions" : [],
   "status" : "NOT_FOUND"
} 
```

有趣的是，如果我使用提供的 ORIGINAL 令牌来执行相同的详细信息请求，我实际上确实会这样获取详细信息。

```
{
   "html_attributions" : [],
   "result" : {
      "geometry" : {
         "location" : {
            "lat" : 44.2778780,
            "lng" : -88.39451800000002
         }
      },
      "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/geocode-71.png",
      "id" : "c52c0ee9bdd0aea66419a0dfeaed32925f18216e",
      "name" : "Amc broom closet",
      "reference" :   "CmRgAAAAGZwx9penijotKZ9lizruTGr8KPbrTc4CD39tPQZ5rpsoEC0ofXDr
       2wpP0Ws9Vr1IIwGtTzRNyOYxOxMKQluhU-_SDydaPKJOsT9F2zqN8gBNPH-
       8Lenq4tkfLKdRmhF4EhD5KdxkNndh0J_cdy4lNPI
       MGhS8l2EdBcalDXfYRbkiFvWa3Bb8Og",
      "types" : [ "other" ]
   },
   "status" : "OK"
} 
```

但是，如果我随后获取该参考令牌并尝试获取详细信息，那么我将再次留下...

```
{
   "html_attributions" : [],
   "status" : "NOT_FOUND"
} 
```

我很确定这是一个新的变化。也许我没有彻底测试开始（很可能）。然而，这让我陷入了困境。因为根据文档，我目前可以使用的原始令牌将来可能无法使用！我不确定如何围绕它进行编程。

请告诉我这是系统中的临时故障，否则，我的桨刚刚冲到下游。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:12:24.137

这似乎是一个错误，请在[此处](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Bug)发布，以便我们尽快调查。

# zsh - ZSH 和 Oh-My-Zsh 本地环境映射？

> ID：11318295
> 
> 赞同：3
> 
> 时间：2012-07-03T20:01:04.383
> 
> 标签：zsh, .bash-profile, zshrc

我使用 Bash Shell 很长时间，最近因为[O-My-Zsh](https://github.com/robbyrussell/oh-my-zsh/)项目的伟大而切换到 ZSH 。

我没有问题如何使用 zsh 但设置本地环境。我目前正在使用来自 Peepcode 截屏视频的 dotfiles 结构，如下图所示：

将 .bash_profile 映射到 .zshrc 文件，将 .zshrc 文件映射到 ~/bin/dotfile/zshrc 文件，zshrc 文件只加载 3 个文件，即环境、别名、配置。（这3个文件是.zshrc文件的逻辑分离）

那是我的设置。它目前正在以应有的方式工作。我可以使用我在别名文件中设置的别名等。

这是我的问题，项目[O-My-Zsh](https://github.com/robbyrussell/oh-my-zsh/)需要配置文件，例如加载 .oh-my-zsh 文件夹和 .oh-my-zsh.sh 文件。如果我将 .oh-my-zsh 配置设置放在 ~/.zshrc 文件中，它就可以工作。既然我将 .zshrc 映射到另一个地方，我怎么还能引用[O-My-Zsh](https://github.com/robbyrussell/oh-my-zsh/)主题、插件、设置的源代码？我应该如何以干净的方式获取 ~/.oh-my-zsh 文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T18:12:48.617

我想我理解你的问题，我目前的设置可能类似：

为了在多台机器之间进行设置和同步，我已将所有点文件移至 Dropbox（在名为 .zsh 的文件夹中）。符号链接连接`Dropbox/.zsh/.zshrc`到`~/.zshrc`，并`Dropbox/.zsh/.zshrc`获取我所有的各种配置文件，如下所示：

```
# Set so that all other sourced files can be found.
export ZDOTDIR="$HOME/Dropbox/.zsh"

source $ZDOTDIR/checks.zsh
# source $ZDOTDIR/colors.zsh
source $ZDOTDIR/exports.zsh
source $ZDOTDIR/oh-my-zsh_opts.zsh
source $ZDOTDIR/setopt.zsh
source $ZDOTDIR/pyopts.zsh
source $ZDOTDIR/prompt.zsh
source $ZDOTDIR/completion.zsh
source $ZDOTDIR/aliases.zsh
source $ZDOTDIR/bindkeys.zsh
source $ZDOTDIR/functions.zsh
# source $ZDOTDIR/zsh_hooks.zsh 
```

同样，`$ZDOTDIR/oh-my-zsh_opts.zsh`定义我所有的 Oh-my-zsh 选项：

```
# Path to your oh-my-zsh configuration.
ZSH=$ZDOTDIR/.oh-my-zsh

# Set name of the theme to load.
# Look in ~/.oh-my-zsh/themes/
# Optionally, if you set this to "random", it'll load a random theme each
# time that oh-my-zsh is loaded.
# ZSH_THEME="af-magic"

# Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)
# Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
plugins=(battery colored-man colorize cp extract frontend git pip python pyenv\
 virtualenv)

if [[ $IS_MAC -eq 1 ]]; then
    plugins=($plugins brew brew-cask osx textmate)
fi

if [[ $IS_LINUX -eq 1 ]]; then
    plugins=($plugins)
fi

if [[ $HAS_APT -eq 1 ]]; then
    plugins=($plugins debian)
fi

if [[ $HAS_YUM -eq 1 ]]; then
    plugins=($plugins yum)
fi  

source $ZSH/oh-my-zsh.sh 
```

# arrays - 在 Perl 中，如何检查数字是否是数组的元素？

> ID：11318299
> 
> 赞同：0
> 
> 时间：2012-07-03T20:01:16.230
> 
> 标签：arrays, perl, list, member

我想写一个简短的 Perl prg，它有 1 个参数（一个 3 位整数）传递给它，并根据它是哪个列表的成员返回相应列表的编号。我怎样才能做到这一点，还有什么方法可以将一系列数字作为元素放入列表中？

```
 ::Returns 1,2,3,4 Depending on testNum passed
 @gp1= (829,845,851,859,864,867);
 @gp2= ("826-828","830-839","843-844","847-850","852-854","860-862","883");
 @gp3= ("855-858",861,"863","865");
 @gp4= ("877-882",884);

 if ( ($ARGV[0]>=822 && $ARGV[0] <=824) || $ARGV[0]  is membergp1)
 {  
  return 1
 }
  if ( $ARGV[0]>=826 && $ARGV[0]<=828 || $ARGV[0] is memebr of group2
    return 2
  if $ARGV[0] is memebr of group3
      return 3
  if $ARGV[0] is memebr of group4
      return 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:02:40.313

三位数字只需要一千个元素的数组。我建议将数据解压缩到一个数组中，并简单地使用传递的参数索引该数组。

这个程序显示了这个想法。它需要命令行上的三位数字。

```
use strict;
use warnings;

my @gp1=  qw(  829  845  851  859  864  867  );
my @gp2=  qw(  826-828  830-839  843-844  847-850  852-854  860-862  883  );
my @gp3=  qw(  855-858  861  863  865  );
my @gp4=  qw(  877-882  884  );

my @places;

my $n = 0;
for (\(@gp1, @gp2, @gp3, @gp4)) {
  $n++;
  for (@$_) {
    my @indices = /\d+/g;
    $places[$_] = $n for $indices[0] .. $indices[-1];
  }
}

my $val = $ARGV[0];
my $place = $places[$val];
printf "Value %s appears in %s\n", $val, $place ? "group $place" : "no group"; 
```

**输出**

```
Value 832 appears in group 2 
```

* * *

**更新**

或者，您可以在处理时检查传递的参数是否与每个范围匹配。

输出与之前的解决方案相同。

```
use strict;
use warnings;

my @gp1=  qw(  829  845  851  859  864  867  );
my @gp2=  qw(  826-828  830-839  843-844  847-850  852-854  860-862  883  );
my @gp3=  qw(  855-858  861  863  865  );
my @gp4=  qw(  877-882  884  );

my $val = $ARGV[0];

my $n = 0;
for (\(@gp1, @gp2, @gp3, @gp4)) {
  $n++;
  for (@$_) {
    my @indices = /\d+/g;
    if ($val >= $indices[0] and $val <= $indices[-1]) {
      printf "Value %s appears in group %d\n", $val, $n;
      exit;
    }
  }
}

printf "Value %s appears in no group\n", $val; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:20:12.230

使用 Number::Range 将所有列表放入范围对象中（必须下载）：

```
 use Number::Range;
  my $range= Number::Range->new("23..98,103..150");
       if ($range->inrange("110")) {
           print "In range\n";
       } else {
           print "Not in range\n";
       } 
```

请参阅以下网址：

[http://forums.devshed.com/perl-programming-6/check-if-number-is-in-range-23-98t-574713.html](http://forums.devshed.com/perl-programming-6/check-if-number-is-in-range-23-98t-574713.html) [https://metacpan.org/pod/Number::Range](https://metacpan.org/pod/Number::Range)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:25:10.600

您可以使用范围运算符实现范围`..`：

```
#!/usr/bin/perl
use warnings;
use strict;
use feature 'say';

my @lists = (
             [829,845,851,859,864,867],
             [826 .. 828, 830 .. 839, 843 .. 844, 847 .. 850, 852 .. 854, 860 .. 862, 883],
             [855 .. 858, 861, 863, 865],
             [877 .. 882, 884]
            );

say join ' ',
         "In list(s):",
         grep { grep $_ == $ARGV[0], @{ $lists[$_ - 1] }} 1 .. @lists; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T22:09:30.347

硬编码组的数量或为每个组创建一个独立的数组不是一个好主意。

```
#!/usr/bin/env perl

use strict; use warnings;
use feature 'say';
use List::MoreUtils qw( first_index );

my @groups = (
    [829, 845, 851, 859, 864, 867 ],
    [
        826 .. 828,
        830 .. 839,
        843 .. 844,
        847 .. 850,
        852 .. 854,
        860 .. 862,
        883,
    ],
    [ 855 .. 858, 861, 863, 865 ],
    [ 877 .. 882, 884 ],
);

my ($candidate) = @ARGV;

my $group = first_index {
    (-1 < first_index { $candidate == $_ } @$_)
} @groups;

say $group > -1 ? $group : 'not found'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T20:17:18.530

撇开数字范围的问题不谈，解决这个问题的一个简单方法是对数字和它们所在的组进行哈希处理。

```
my %num2group = (
    829 => 1,
    830 => 2,
    861 => 3,
    884 => 4,
    ...and so on...
); 
```

然后您可以简单地查询哈希以查看数字所在的组（如果有）。

```
my $group = $num2group{$number}; 
```

您可以从数字列表中生成它，而不是手动创建该哈希。

```
$num2group{$_} = 1 for @grp1;
$num2group{$_} = 2 for @grp2;
...and so on... 
```

这是您处理范围的地方。在生成`%num2group`时，您会将任何范围扩展到单个哈希条目。假设这些范围不是很大，这将提高查找组的效率。

```
for my $num (@grp1) {
    if( /^(\d+)-(\d+)$/ ) {  # range
        $num2group{$_} = 1 for $1..$2;
    }
    else {
        $num2group{$num} = 1;
    }
} 
```

最后，与其对组号进行硬编码，不如将其放入子程序中。

```
sub add_to_group_hash {
    my($numbers, $group, $hash) = @_;

    for my $num (@$numbers) {
        if( /^(\d+)-(\d+)$/ ) {  # range
            $hash->{$_} = $group for $1..$2;
        }
        else {
            $hash->{$num} = $group;
        }
    }
 }

 add_to_group_hash(\@grp1, 1, \%num2group);
 add_to_group_hash(\@grp2, 2, \%num2group);
 ...and so on... 
```

然后，您可以添加一些错误检查以确保一个数字不会出现在两组中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T20:22:04.853

您可能想要使用[List::MoreUtils](http://search.cpan.org/~adamk/List-MoreUtils-0.33/lib/List/MoreUtils.pm)中的函数，例如`any`.

# c++ - std::unique_ptr 编译器错误：派生类的成员不能访问基类的私有成员

> ID：11318302
> 
> 赞同：6
> 
> 时间：2012-07-03T20:01:20.577
> 
> 标签：c++, c++11, compiler-errors, unique-ptr

当我尝试编译以下代码时出现[编译器错误 C2248 ：](http://msdn.microsoft.com/en-us/library/tsbce2bh%28v=vs.110%29)

```
#include <list>
#include <memory>
using namespace std;

class data
{
public:

    static data parse()
    {
        data d;
        data::parse(d);
        return d;
    }

    list<std::unique_ptr<data>> l;

private:

    static void parse(data& node)
    {       }
};

int main()
{

    return 0;
} 
```

为什么？我怎样才能解决这个问题？

注意：我使用`std::shared_ptr`而不是`std::unique_ptr`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T20:20:31.597

您需要为您的类型提供移动操作：

```
data(data&& other)
    : l(std::move(other.l))
{
}

data& operator=(data&& other)
{
    l = std::move(other.l);
    return *this;
} 
```

而且，由于您将添加一个用户声明的构造函数，因此您还需要一个用户声明的默认构造函数：

```
data() { } 
```

我的理解是，根据最终的 C++11 语言标准，您的代码是正确的。Visual C++ 没有完全实现何时隐式生成移动操作的最终规范（从 Visual C++ 2012 RC 开始）。何时生成隐式移动操作的规范在标准化过程的后期发生了多次更改。

如果您的类类型`C`具有任何可移动但不可复制的数据成员，则 Visual C++ 将不会生成隐式移动构造函数或移动赋值运算符，并且隐式复制构造函数和复制赋值运算符都会被 move- 的存在所抑制。唯一的数据成员。换句话说，如果您想要聚合仅移动类型，则必须自己为聚合类提供移动操作。

（至少，这是我对编译器实验的理解。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T20:16:12.623

首先，VC++ 还不会自动生成移动 ctor 和移动赋值运算符，这意味着您需要自己定义它们。

接下来，当您返回局部变量时，编译器首先会尝试*移动*它们，然后才能真正按照通常的方式复制它们。但是，要做到这一点，它需要一个移动 ctor。因为它没有，它会尝试通常的复制，并通过生成的复制ctor自动调用复制构造函数，`std::list`而复制构造函数又尝试调用其元素类型的复制ctor，这在`std::unique_ptr`s 情况下是私有的。

您需要定义适当的移动 ctor 或不调用`std::unique_ptr`复制 ctor 的复制 ctor（即，制作内容的深层副本）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T20:21:19.100

简短回答：（特定于 C++11）a 中的项目`list`必须是可复制或可移动的。A`unique_ptr`在设计上是不可复制的，但它是可移动的，只要受控类型也是可移动的。

您的类型`data`不可移动，因为您尚未实现移动语义并且编译器没有为您执行此操作。

实现移动语义，您可以`unique_ptr`在 a中使用`list`：

```
data(ddata&&) {}; 
```

根据标准，编译器将为您的类生成一个移动构造函数。但是，VS10 不支持这一点——这可能是你遇到的问题。

如需进一步参考，请参阅我在 CR 上的帖子：[移动语义的规范实现](https://codereview.stackexchange.com/questions/12954/canonical-implementation-of-move-semantics)

# php - 带有变音符号的 PHP URL 中的 CURL

> ID：11318305
> 
> 赞同：0
> 
> 时间：2012-07-03T20:01:22.453
> 
> 标签：php, url, curl

我在使用 curl 时遇到问题：我从 Mysql（城市名称）获取数据，这些数据使用 ascii HEX 编码的变音符号（例如 %DF 表示 ß 或 %DC 表示 ü ）。我用 str_replace() 转换它们；到德语变音符号 (ß,ü,ä,ö)。当我使用 curl 发送数据（城市）时出现错误。（“填写正确的！”）

当我发送没有变音符号（ä、ö、ü、ß）的数据时，一切都很好！我的代码或 curl 有什么问题。我也用 shell 试过了——同样的问题！

```
$this->url = "blah.org/?params=diesdas&city_from=Straßbourg&City_to=München";

$this->ckfile = tempnam("/tmp", "cookie");
$this->ch = curl_init();
curl_setopt($this->ch,CURLOPT_URL, $this->url);
curl_setopt($this->ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($this->ch, CURLOPT_PROXY, "46.4.248.80");
curl_setopt($this->ch, CURLOPT_PROXYPORT, "3128");
curl_setopt($this->ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($this->ch, CURLOPT_COOKIEJAR, $this->ckfile);
echo 'getting cookie file...';
$cookie = curl_exec($this->ch);
if($cookie = false){echo 'couldn\'t get cookie!<br> '.curl_error($this->ch);}else{echo 'got cookie! omnomnom!<br>';}

$this->ch = curl_init("blah.com/sendcookietome");
curl_setopt($this->ch, CURLOPT_COOKIEFILE, $this->ckfile);
curl_setopt($this->ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($this->ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($this->ch, CURLOPT_PROXY, "46.4.248.80");
curl_setopt($this->ch, CURLOPT_PROXYPORT, "3128");
curl_exec($this->ch); 
```

最好的，meeeeh！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:50:07.930

为您的城市使用 rawurlencode()。

[http://php.net/manual/en/function.rawurlencode.php](http://php.net/manual/en/function.rawurlencode.php)

你也拼错了**Straßburg**那里的表格....

在您的示例中：

```
$cityname =rawurlencode('Straßburg');

$url ='http://bahn.ltur.com/index/search/?mnd=de&lang=de_DE&searchin=DE-SB-VI&trip_mode=trip_simple&from_spar='.$cityname.'&to_spar=Haiger&start_datum=04.07.2012&start_time=06%3A30&end_datum=06.07.2012&end_time=16%3A42&SEA_adults=1&SEA_kids1=0&SEA_kids2=0&SEA_adult1=&SEA_adult2=&SEA_adult3=&SEA_adult4=&SEA_adult5=&SEA_kid11=&SEA_kid12=&SEA_kid13=&SEA_kid14=&SEA_kid15=&trainclass_spar=2&x=54&y=15
';

//do your curl thing.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:03:56.570

如果您在 GET 或 POST 数据中使用字符，则需要对字符进行 url 编码。不要解码它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:32:18.853

我让它工作：wow.wtf？

此链接适用于“ß”：blah.org/&from_spar=StraÃŸburg&to_spar=Kiel+Hbf blah.org/&from_spar=Köln+Hbf&to_spar=Stuttgart+Hbf

这就是它被接受的方式。

# c# - 使用 Linq 查询 XML 树

> ID：11318306
> 
> 赞同：0
> 
> 时间：2012-07-03T20:01:24.093
> 
> 标签：c#, xml, linq

我正在尝试使用 LINQ 解析一个复杂的 XML 文件。这些文件包含数千条记录，每条记录都有数百个字段。我需要解析出每种药物的某些信息并将其存储在数据库中。

**编辑：** 我很抱歉，但最初发布的 XML 实际上并不准确。我不知道属性会改变过程的事实。我更新了问题以准确描述 XML 文件的真实性质。

这是 XML 的示例：

```
<<drugs xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://drugbank.ca" xs:schemaLocation="http://www.drugbank.ca/docs/drugbank.xsd" schemaVersion="1.4">
   <drug>
      <name>foo</name>
      <indication>Some info here</indication>
      <half-life>1 to 3 hours</half-life>
      <protein-binding>90%</protein-binding>
        // hundreds of other elements
      <properties>
         <property>
            <kind>logP/hydrophobicity</kind>
            <value>-0.777</value>
         </property>
         <property>
            <kind>Molecular Weight</kind>
            <value>6963.4250</value>
         </property>
         <property>
            <kind>Molecular Formula</kind>
            <value>C287H440N80O110S6</value>
         </property>
         //dozens of other properties
      </properties>
   </drug>
   // thousands of more drugs
</drugs> 
```

我对实际查询非常模糊，因为这是我第一次使用 LINQ。我熟悉 SQL，因此复杂查询的概念对我来说并不困难，但我无法找到任何我能理解的有助于解决此问题的文档。到目前为止，我的查询如下：

```
XDocument xdoc = XDocument.Load(@"drugbank.xml");

var d = from drugs in xdoc.Descendants("drug")
                        select new
                        {
                            name = drugs.Element("name").Value,
                            indication = drugs.Element("indication").Value,
                            halflife = drugs.Element("half-life").Value,
                            proteinBinding = drugs.Element("protein-binding").Value,
                        }; 
```

第一个问题（理论上）已解决。到...

第二个问题是我需要提取一些属性（即疏水性、分子量和分子式），但我感到困惑的是属性种类和属性值存储在两个不同的 XElement 中。如何将属性值限制在我关心的字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:30:13.787

您可以执行子查询以将属性获取到外部通用对象的另一个属性中。如果您希望它们嵌套：

```
XNamespace defaultNS = "http://drugbank.ca";

var d = from drugs in xdoc.Descendants(defaultNS + "drug")
        select new
        {
            name = drugs.Element(defaultNS + "name").Value,
            indication = drugs.Element(defaultNS + "indication").Value,
            halflife = drugs.Element(defaultNS + "half-life").Value,
            proteinBinding = drugs.Element(defaultNS + "protein-binding").Value,
            Properties = (from property in drugs.Element(defaultNS + "properties").Elements(defaultNS + "property")
                          let kind = property.Element(defaultNS + "kind").Value
                          where kind == "logP/hydrophobicity" || kind == "Molecular Weight" || kind == "Molecular Formula"
                          select new { Kind = kind, Value = property.Element(defaultNS + "value").Value })
        }; 
```

或扁平化：

```
XNamespace defaultNS = "http://drugbank.ca";

var d = from drugs in xdoc.Descendants(defaultNS + "drug")
        let properties = drugs.Element(defaultNS + "properties").Elements(defaultNS + "property")
        select new
        {
            name = drugs.Element(defaultNS + "name").Value,
            indication = drugs.Element(defaultNS + "indication").Value,
            halflife = drugs.Element(defaultNS + "half-life").Value,
            proteinBinding = drugs.Element(defaultNS + "protein-binding").Value,
            hydrophobicity = (from property in properties
                          let kind = property.Element(defaultNS + "kind").Value
                          where kind == "logP/hydrophobicity"
                          select property.Element(defaultNS + "value").Value).FirstOrdefaultNS(),
            molecularWeight = (from property in properties
                          let kind = property.Element(defaultNS + "kind").Value
                          where kind == "Molecular Weight" || kind == "Molecular Formula"
                          select property.Element(defaultNS + "value").Value).FirstOrdefaultNS(),
            molecularFormula = (from property in properties
                          let kind = property.Element(defaultNS + "kind").Value
                          where kind == "Molecular Formula"
                          select property.Element(defaultNS + "value").Value).FirstOrdefaultNS()
        }; 
```

此外，可以帮助您了解 Linq 的非常有用的参考资料是[101 LINQ Samples](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:13:37.507

我已经粘贴了你的代码：输出：

```
foo
Some info here
1 to 3 hours
90% 
```

正如预期的那样

# magento - Magento _getUrl 调用函数将 url 复制到我的链接

> ID：11318307
> 
> 赞同：0
> 
> 时间：2012-07-03T20:01:28.003
> 
> 标签：magento

我使用该函数`_getUrl`链接我在自定义模块中创建的顶部链接，但由于某种原因它重复了 URL。例如，假设我希望它链接到：

```
www.localhost.com/magento/sapna/account/index 
```

相反，它显示：

```
www.localhost.com/magento/http://index/www.localhost.com/magentosapna/account/index 
```

这是我的功能：

```
const ROUTE_FORM = 'sapna/account/index';
 /**
 * Retrieve goomer/breeder registariion url
 *
 * @return string
 */
public function getLoginUrl(){
    return $this->_getUrl(self::ROUTE_FORM, $this->getLoginUrlParams());
} 
```

我在 module/Helper/Data.php 中做，我使用 getUrl 它不起作用

我在 Data.php 帮助文件中写了这个。任何人都可以帮忙吗？我已经经历了很多次，但我看不出有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:06:56.107

检查您的 customer.xml 文件中的以下内容：

```
<customer_logged_out>
    <reference name="top.links">
        <action method="addLink" translate="label title" module="customer">
            <label>Log In</label>
            <url helper="customer/getLoginUrl"/>
            <title>Log In</title>
            <prepare/>
            <urlParams/>
            <position>100</position>
        </action>
    </reference>
    <remove name="reorder"></remove>
</customer_logged_out>

/* Use <prepare/> instead of <prepare>true</prepare> */ 
```

为我工作......！

# python - 将 socket.error 从客户端提升到服务器

> ID：11318320
> 
> 赞同：0
> 
> 时间：2012-07-03T20:02:25.243
> 
> 标签：python

我有以下问题。我有一个服务器应用程序，它接受通过 SSL 包装的套接字连接。客户端通过它发送用户和密码，一旦在服务器上我检查用户/密码是否正确。

如果用户/密码错误，我希望服务器向客户端发送 Socket.error。现在唯一想到的想法是将“错误密码”发回给客户端，但我认为使用内置错误更安全，这样我可以通过 try except 语句扭曲代码。

无论如何从服务器向客户端发送套接字错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:04:57.610

最简单的方法是发回某种返回码，当客户端看到来自服务器的返回码时，它会自己抛出异常。

# ruby-on-rails - 在 rails 3 中将 :id 的名称修改为 :another_id

> ID：11318322
> 
> 赞同：1
> 
> 时间：2012-07-03T20:02:39.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

好吧，我用谷歌搜索了我的问题，但我找不到任何东西，或者我这不是正确的问题..

问题是我需要用 :another_id 修改数据库的主键名称：id，在我的项目中我需要使用 pgrouting，它包含几个 plsql 函数，这些函数使用名称为 gid 的主键，而不是修改 plsql函数最好更改 id 名称，我想通过迁移来做到这一点，因为我认为这是 rails 方式。

有可能吗，我该怎么做？

在此先感谢并为我的英语感到抱歉。

**编辑**

```
 create_table :pruebas, primary_key: :gid do |t|
    t.string :name
    t.timestamps
  end 
```

这可以解决问题，并使用此活动记录生成并使用 pk 作为 gid。

对不起，如果我的问题不清楚.. Gracias por las respuestas。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:05:26.947

要自己设置主键，当您创建表时，您将执行以下操作：

```
create_table(:table_name, primary_key: 'gid') do |t|
   ...
end 
```

您需要在模型中定义主键名称：

```
self.primary_key = 'gid' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:11:58.013

我没有任何使用 PostgreSQL 或 pgRouting 的经验，但我相信您正在寻找的是一种指示 ActiveRecord 使用不同列作为主键的方法。

我相信您正在寻找 set_primary_key。

```
class Project < ActiveRecord::Base
  set_primary_key "gid"
end 
```

# ruby-on-rails - 用户控制器未显示注册表单

> ID：11318325
> 
> 赞同：0
> 
> 时间：2012-07-03T20:02:47.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有一个我正在尝试将 devise_invitable 集成到其中的 rails 应用程序。所以，认证系统当然是 Devise。Devise 不进行注册，而是由 CRUD 控制器处理，因此只有管理员可以使用它进行注册。

在顶部的代码中，我有：

```
class UsersController<ApplicationController 
```

我不确定是否必须将其更改为

```
class UsersController<Devise::InvitationsController 
```

因为，当我尝试这样做时，我的路线说 /users 不是路径。

CRUD 控制器很简单，看起来像这样：

```
 def new
    @user = User.new
  end 
```

我也不认为这是视图，因为我在进入日志文件时向日志文件添加了调试，并且确实如此。另外，在我尝试添加 devise_invitable 之前，它运行良好。

关于为什么它不会显示表单的任何想法？控制台也没有显示任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:20:30.170

我需要在 form_for 前面添加一个等号，而不是`<% form_for(user)%>`使用`<%=form_for(user)%>`

# c# - 视频停止播放时关闭 c# 应用程序

> ID：11318327
> 
> 赞同：0
> 
> 时间：2012-07-03T20:02:55.167
> 
> 标签：c#, video

我试图弄清楚当表单播放的视频停止播放时如何关闭我的应用程序。目前，用户单击一个按钮以调出 Form2。视频的控件设置为强制视频全屏，并从视频的开头开始播放。我正在使用 axWindowsMediaPlayer 来提供视频。当谈到 C# 时，我也是一个完全的新手。

当视频停止播放时，我如何让我的应用程序关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:04:41.650

您需要检测媒体何时结束，这里有一个教程：[“检测媒体结束 - axWindowsMediaPlayer”](http://www.codeguru.com/csharp/csharp/cs_controls/tutorials/article.php/c16597/Tip-C--Detect-the-End-of-Media--axWindowsMediaPlayer.htm)。然后您需要调用`Close();`以关闭您当前正在播放媒体的表单。

[示例（来自msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562460%28v=vs.85%29.aspx)的片段）：

```
// Subscribe to the Play State Change event
player.PlayStateChange += 
  new AxWMPLib._WMPOCXEvents_PlayStateChangeEventHandler(player_PlayStateChange); 
```

然后你需要看起来像这样的事件处理程序：

```
private void player_PlayStateChange(object sender,
                                  AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
{
    // 8 = Media Ended
    if(e.newState == 8) { Close(); }

} 
```

# java - 从出生之日起按年龄范围搜索休眠条件

> ID：11318328
> 
> 赞同：0
> 
> 时间：2012-07-03T20:02:57.303
> 
> 标签：java, hibernate, criteria

我有一个用户类，它有一个出生日期变量，我正在尝试编写一个条件查询来查找所有超过 X 岁且小于 Y 的用户，其中 X 和 Y 是两个整数，出生日期是日期。

我使用这个表达式解决了它，但我想避免使用表达式，因为我猜它只适用于 MySQL。

```
.createCriteria(User.class)
.add(Expression
         .sql("DATE_FORMAT( FROM_DAYS( TO_DAYS( NOW( ) ) - TO_DAYS( BIRTHDATE ) ) ,  '%Y' ) >= " + lowAge))
.add(Expression
         .sql("DATE_FORMAT( FROM_DAYS( TO_DAYS( NOW( ) ) - TO_DAYS( BIRTHDATE ) ) ,  '%Y' ) <= " + highAge)) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-26T18:54:16.720

这是一个老问题。但是今天我以这种方式解决了，可能对更多人有帮助：

```
Criteria=cri=session.createCriteria(YourClass.class);
Conjunction conj=Restrictions.conjunction();
Calendar cal=Calendar.getInstance();
cal.add(Calendar.YEAR,(-1*age));
Date birthEnd=cal.getTime();
cal.add(Calendar.YEAR,-1);
Date birthStart=cal.getTime();
conj.add(Restrictions.gt("birthdayAttributeName", birthStart));
conj.add(Restrictions.le("birthdayAttributeName", birthEnd));
disj.add(conj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:14:33.163

可以`Restrictions`改用吗？

```
.createCriteria(User.class)
.add(Restrictions.ge("birthdate", lowAge))
.add(Restrictions.le("birthdate", highAge)) 
```

`birthdate`是您`User`班级的出生日期字段。

# javascript - Appcelerator Titanium Studio 不会运行 iOS 模拟器或允许我选择 iOS 作为目标操作系统

> ID：11318329
> 
> 赞同：0
> 
> 时间：2012-07-03T20:03:07.143
> 
> 标签：javascript, ios, ios5, mobile, titanium

我在使用 Titanium Studio 开发 iOS 时遇到问题。（我正在使用运行 snowleopard 的 Mac。）我尝试按照本教程（[https://wiki.appcelerator.org/display/guides/Quick+Start#QuickStart-HelloWorld%21](https://wiki.appcelerator.org/display/guides/Quick+Start#QuickStart-HelloWorld%21)）进行操作，我可以进入这个阶段：
![](../Images/2a5a43b351a1ec484bb2ac174e2c6ba9.png)
但在“部署目标”下，iPad、iPhone、Andriod 和 Blackberry 是灰色的，我唯一的选择是 Mobile Web。（基本上与图片相反）。

然后，当我按照指示运行我的应用程序时（见下图），我唯一的选择是“浏览器中的移动 Web 预览”，它会打开 Firefox，或者在 iOS 仍然不可用的情况下“运行配置”。

![](../Images/955c49fff418df7f664578a7041f12b3.png)

在我的钛仪表板上，有 iOS 和 Android 的图标，上面有问号。当我点击 iOS 时，它说它找不到 iOS SDK 并提示我从应用商店下载 Xcode。但是，当我这样做时，我无法做到，因为我的系统对于新的 Xcode 来说太旧了。

此外，如果事实证明 iOS 模拟器根本无法在我的机器上运行，我仍然无法弄清楚如何将我的项目导出为移动应用程序。（哈哈）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:15:15.227

如果您在 Titanium Studio IDE 中打开仪表板页面，则有一个配置面板将帮助配置 IOS SDK 并提供有关如何告诉 TiStudio 在哪里找到它的说明![在此处输入图像描述](../Images/cc100490bc7c2837ec99d77970803b62.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:39:24.950

您必须指定 iOS SDK 在您的机器上的位置，以便 Titanium Studio 为您提供部署到 iOS 设备的选项。XCode 版本控制可能会让人感到困惑和沮丧，但我认为是时候将 Mac 更新到 Lion 并使用最新版本的 XCode、Titanium SDK 和 Titanium Studio 以实现兼容性。

# r - R.matlab/readMat：readTag 中的错误（此）

> ID：11318331
> 
> 赞同：2
> 
> 时间：2012-07-03T20:03:13.787
> 
> 标签：r

我正在尝试使用 R.matlab 将 matlab 文件读入 R，但遇到此错误：

```
require(R.matlab)
r <- readMat("file.mat", verbose=T)

Trying to read MAT v5 file stream...
Error in readTag(this) : Unknown data type. Not in range [1,19]: 18569
In addition: Warning message:
In readMat5Header(this, firstFourBytes = firstFourBytes) :
  Unknown MAT version tag: 512\. Will assume version 5. 
```

如何解决此问题，或者是否有其他方法可以加载 matlab 文件？我可以使用 hdf5load 但听说这会弄乱数据。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-13T20:17:21.153

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:14:30.250

我有一个非常相似的问题，直到我将该函数指向一个实际存在的 .mat 文件。在此之前，我一直在指定两个同名文件，但一个是 .mat，另一个是 .txt，所以它可能一直在尝试打开另一个。
我意识到这可能无法直接解决您的问题（我在错误消息中看到的唯一区别是没有第一行“正在尝试...”以及之后的特定数字以及另外几个类似的奇数警告)，但它可能指向一些简单的文件名问题作为问题。我在 64 位 vista 上使用最新的 matlab，在 32 位 xp 上使用最新的 R。

# java - 是否可以在没有浏览器的谷歌广告中实现 oauth2 身份验证？

> ID：11318332
> 
> 赞同：3
> 
> 时间：2012-07-03T20:03:23.217
> 
> 标签：java, browser, oauth-2.0, ads

是否可以在没有浏览器的谷歌广告中实现 oauth2 身份验证（在 JAVA 中）？我下载[了 http://code.google.com/p/google-api-ads-java/](http://code.google.com/p/google-api-ads-java/)和示例。在浏览器的帮助下有 oauth2 autentication 的示例是否可以在没有浏览器的情况下进行？如果可能，那怎么办？浏览器中有按钮： *允许访问/不，谢谢* 如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:23:44.300

OAuth2[链接](https://developers.google.com/accounts/docs/OAuth2)的选项很少，我认为[服务帐户](https://developers.google.com/accounts/docs/OAuth2#serviceaccount)不需要用户同意 - 但我没有找到任何使用它的示例。

在我的实现中，我做了一些有点丑陋的事情，我使用了 Selenium，它进入网页并授予访问权限。它看起来像这样：

```
 final WebDriver driver = new HtmlUnitDriver();
    driver.get(url);
    try {
        final WebElement element = driver.findElement(By.id("submit_approve_access"));
        element.click();
    } catch (NoSuchElementException nsee) {
        //we aren't logged so first we log in then next we click approve
        final WebElement login = driver.findElement(By.id("Email"));
        final WebElement password = driver.findElement(By.id("Passwd"));

        login.sendKeys(email);
        password.sendKeys(passwd);

        password.submit();
        // logged in

        final WebElement aproveButton = driver.findElement(By.id("submit_approve_access"));
        aproveButton.submit();
        // oauth approved
    } finally {
        driver.close();
    } 
```

# php - 如何对查询结果求和

> ID：11318333
> 
> 赞同：0
> 
> 时间：2012-07-03T20:03:25.463
> 
> 标签：php, mysql

我有一个查询，其中输出处理如下所示：

```
 while($row = mysql_fetch_array($result)){
    echo $row['username'] . " " . $row['earning'];
 } 
```

输出结果是这样的：

```
 JOHN  200
 JOHN  350
 NEO   100
 NEO   220 
```

我想要实现的是每个名字都出现一次，而“收入”是该名字所有收入的总和，如下所示：

```
 JOHN 550
 NEO  320 
```

我不得不提到我*不能*更改查询；这是最大的问题。

有希望吗？一些建议？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:05:28.063

尝试：

```
$user = array();

while($row = mysql_fetch_array($result)){
    $user[$row['username']]  += $row['earning'];
 } 
```

做回声：

```
foreach($user as $key => $value) {
    echo $key."=". $earnings."<br>";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T20:07:30.663

您可以将循环中的值与另一个数组相加，然后将其输出。

尝试：

```
$earnings = array();

while($row = mysql_fetch_array($result)) {
    if (!isset($earnings[$row['username']])) $earnings[$row['username']] = 0;
    $earnings[$row['username']] += $row['earning'];
}

foreach($earnings as $user => $earnings) {
    echo "$user  $earnings<br />\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T20:09:52.583

要获得此答案的快速解决方案，您可能只想将这些结果附加到关联的数组，然后简单地循环它以获得最终计数。

所以，像这样：

```
 $names= array();

 while($row = mysql_fetch_array($result)){
    $names[$row["username"]] += $row["earning"];
 }

 foreach($names as $k => $v) {
    echo $k." ".$v."\n";
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T20:05:31.437

不只是选择数据，而是选择字段并`SUM(otherfield)`作为`otherfield`要求和的数字的字段。然后添加`GROUP BY`第一个字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T06:50:08.003

在mysql端试试这个你不需要在php端计算所以不要像这样更改你的PHP端代码jst更改查询

```
SELECT
  username,
  SUM(earning)
FROM yourtable
GROUP BY (username) 
```

希望它对你有用

# php - 亚马逊 API 上的价格返回 false

> ID：11318336
> 
> 赞同：0
> 
> 时间：2012-07-03T20:03:43.867
> 
> 标签：php, api, amazon

我希望在这里得到一些帮助，解决我们似乎无法找到解决方案的问题。我们正在向亚马逊提出请求，但返回的价格是“假的”。以下是返回值的 URL：

[http://vpaun.ro/test/amazon.php?debug=1&isbn=9780091883768](http://vpaun.ro/test/amazon.php?debug=1&isbn=9780091883768)

任何想法为什么会发生这种情况？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:23:53.370

从这里（https://forums.aws.amazon.com/thread.jspa?messageID=99882

# dynamic - 在页面内动态加载 AngularJS 模板

> ID：11318337
> 
> 赞同：16
> 
> 时间：2012-07-03T20:03:43.880
> 
> 标签：dynamic, dom-manipulation, angularjs

我有一个包含 2 个控制器的页面：一个管理所谓的“应用程序”列表，另一个是将新的 Angular 模板放入其 Div 元素的 innerHTML 中。

```
<div ng-controller="appList"></div>
<div ng-controller="appPane"> Dynamic content should be loaded here! </div> 
```

我尝试使用标准的 {{expression}} 绑定，但它们不适用于 html，我还尝试了 ng-bind-html-unsafe 指令（将 innerhtml 绑定到 App 请求返回的指令）但控制器不是在这个新代码中执行。

问题似乎是通过使用绑定，Angular 不会重新解析相关 html 的内容以将其用作 Angular 应用程序。关于如何让它解析动态内容的任何想法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-03T20:43:20.057

似乎 $compile 服务在提供您希望与当前范围一起重新编译的元素时，可以满足我的要求。

来自我的来源的示例：

```
var appPane = $('#AppPane');//JQuery request for the app pane element.
appPane.html(data);//The dynamically loaded data
$compile(appPane.contents())($scope);//Tells Angular to recompile the contents of the app pane. 
```

我希望这应该可以帮助遇到我的问题的任何人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T14:11:42.123

查看 angularjs 中的[$routes](http://docs.angularjs.org/api/ng.$route)和 ngView。

这是一个非常基本的示例：

[http://jsfiddle.net/pXpja/3/](http://jsfiddle.net/pXpja/3/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-04T00:49:03.207

查看[uiRouter](https://github.com/angular-ui/ui-router)模块（来自[AngularUI](http://angular-ui.github.io/)项目）。它添加了状态的概念，这与路由非常相似，但具有其他优点，例如嵌套它们的能力。例如：

```
$stateProvider
    .state('myState', {
        url: '/mystate',
        templateUrl: '...',
        controller: 'MyCtrl'
    })
    .state('myState.substate', {
        url: '/{substate}',
        templateUrl: '...',
        controller: 'MySubCtrl'
    }); 
```

`MySubCtrl`每当您进入时将被激活`/mystate/something`，您可以使用该“某物”作为参数（请参阅 参考资料[`$stateParams`](https://github.com/angular-ui/ui-router/wiki/Quick-Reference#wiki-stateparams-1)）。您可以将状态嵌套到任意数量的级别。

# java - 我可以在 Mac 上让 Java 小程序忽略/通过 Command+Q 吗？

> ID：11318338
> 
> 赞同：3
> 
> 时间：2012-07-03T20:03:48.507
> 
> 标签：java, macos, command-line, applet, command

这个问题有点奇怪，但我使用的是作为 Java 小程序运行的 KVM over IP 客户端。当我按下 Command+Q 时，在 OS X 上运行的本地 Java 小程序会拦截命令并关闭小程序，从而终止我的 KVM 会话。我希望能够发送此命令并让小程序忽略它（作为命令），但仍将其传递，以便在 KVM 会话中运行的程序看到并响应该命令。有谁知道有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T17:43:59.657

在我看来，这是不可能的。Mac OS 将捕获 Command-Q 快捷方式，除非您告诉它不要这样做，这只能通过本机方法完成，不能在小程序中使用。

# forms - 如何在 Yii 表单标签中添加一个类？

> ID：11318339
> 
> 赞同：3
> 
> 时间：2012-07-03T20:03:52.267
> 
> 标签：forms, yii, label

要生成以下标记：

```
<label class="foo">Bar</label> 
```

PHP 将类似于：

```
<?php echo $form->label($model,'username'); ?> 
```

似乎它应该是 label() 的 htmlOptions 参数的一部分，但我无法真正弄清楚。

来自 Yii 的文档：

```
public string label(CModel $model, string $attribute, array $htmlOptions=array ( )) 
```

参考：

[http://www.yiiframework.com/doc/api/1.1/CActiveForm#label-detail](http://www.yiiframework.com/doc/api/1.1/CActiveForm#label-detail)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T20:22:33.950

正如文档所说， $htmlOptions 是一组附加的 HTML 属性。键是属性，值是属性值，所以给标签添加一个类属性：

```
<?php echo $form->label( $model,'username', array('class'=>'className') ); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T11:52:17.477

您还可以使用 setLabelAttribute 将类添加到 PHP 表单类中，例如：

```
<?php
class Login extends Yp_Form_Abstract
{

    public function init()
    {
...
        $username = new Yp_Form_Element(Yp_Form_Element::FIELD_textField, 'username', $this);
        $username->setLabel('Username');
        $username->setLabelAttribute('class', 'some-class');
    }
} 
```

# javascript - 将地址地理编码为 GPS 坐标

> ID：11318347
> 
> 赞同：2
> 
> 时间：2012-07-03T20:04:18.707
> 
> 标签：javascript, google-maps, geolocation, yahoo-maps

我正在寻找对地址进行地理编码并将其转换为 GPS 坐标。基本上，

```
var address;

//  Google/Yahoo/whatever program to convert address to GPS coordinates

var output=xx.xxxxxxx,xx.xxxxxxx 
```

我研究了 Google 和 Yahoo API，但似乎无法让他们的代码在我的 Google Gadget 中工作。有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:16:00.237

这是我为地址到gps-coords的需求所做的：

```
function get_coords(address)
{
    var gc      = new google.maps.Geocoder(),
        opts    = { 'address' : address };

    gc.geocode(opts, function (results, status)
    {
        if (status == google.maps.GeocoderStatus.OK)
        {   
            var loc     = results[0].geometry.location,
                lat     = loc.$a,
                long    = loc.ab;

            // Success.  Do stuff here.
        }
        else
        {
            // Ruh roh.  Output error stuff here
        }
    });
} 
```

然后你调用它`get_coords('1600 Pennsylvania Avenue NW Washington, DC 20500')`，它会返回纬度和经度。

当然，您需要提供自己的 Google Maps API 密钥才能使其正常工作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:41:06.110

我帮助维护一个名为[LiveAddress](http://smartystreets.com/products/liveaddress-api)的 API 来执行此操作。比 Google/Yahoo 的 API 更易于使用，并且没有限制性的服务条款，该条款禁止大量请求*、*存储结果或在不显示地图或通过自动化的情况下使用数据。

这是一个完整的示例，使用[此示例包装函数](https://github.com/smartystreets/LiveAddressSamples/blob/master/javascript/liveaddress.js)：

```
LiveAddress.init(123456789); // your API key here
LiveAddress.geocode("address goes here", function(geo) {
    // You can also pass in an array of addresses,
    // the ID of a DOM element containing the address,
    // or an array of IDs
    console.log(geo);
}); 
```

单个坐标位于`geo.lat`和`geo.lon`中，组合字符串“lat, lon”格式位于`geo.coords`. 您还可以使用 获得数据的精度`geo.precision`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T18:26:00.640

我做到了这一点并且工作完美：

```
<script type="text/javascript">
var dir1 = "5th ave, new york";
var google_url = "http://maps.googleapis.com/maps/api/geocode/json?address=";
var sensor = "&sensor=false";
var resultado;

function myFunction(){ 

    $.getJSON(
        google_url+dir1+sensor,
        function(result){
            $( "body" ).append( "Latitude: " + JSON.stringify(result.results[0].geometry.bounds.northeast.lat) )
            $( "body" ).append( "Longitude: " + JSON.stringify(result.results[0].geometry.bounds.northeast.lng) )  
    });

} 
```

# android - Android 4.0.3 模拟器崩溃：分配内存失败：8

> ID：11318348
> 
> 赞同：18
> 
> 时间：2012-07-03T20:04:20.027
> 
> 标签：android, android-emulator

当我将皮肤内置显示设置更改为 WXGA720 时，问题就开始了。然后每次我尝试运行模拟器时，它都会显示以下消息：

> AVD 'android403' 的启动模拟器无法分配内存：8 此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

我已经尝试将 RAM 大小降低到 800 MB，然后是 512 MB（甚至 256），但它也没有工作......

我不知道该怎么办...

这是模拟器设置窗口的屏幕截图：

![在此处输入图像描述](../Images/8eeed9481d0e8a401f7970af7689a99c.png)

预先感谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-05T12:11:30.267

我有时确实有同样的问题。也许我的解决方案也适合你：不要选择 WXGA720 皮肤预设，而是手动将分辨率设置为 720*1280，并手动将 RAM 设置为 768 甚至 512。看起来很愚蠢，但如果皮肤预设为使用或手动分辨率配置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-02T01:09:49.707

我有同样的问题。我已手动将分辨率设置为`720 X 1280`. 将 RAM 大小设置为`128MB`并将 SSD 设置为`16 MB`。之后该应用程序没有任何问题出现

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T22:46:44.327

这可能听起来很傻，但我通过在 RAM 设置后添加“MB”解决了这个问题，将（例如）1024 更改为 1024MB。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-02T08:36:04.827

我想到了。问题出在我为虚拟机指定的内存量上，它是 1024MB，现在我有 512MB，没关系。请享用 ;）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-12T05:30:58.910

对于 android 4.0.3 的 x86 模拟器，我也遇到了同样的问题。只有当我尝试从 Eclipse 启动模拟器时，才会出现这个问题。但是当我从命令行启动模拟器时工作正常。尝试从命令行启动模拟器。

转到 android 工具目录并使用“emulator -avd”来启动你的模拟器。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-24T20:47:23.720

我有同样的问题，试图模仿 Galaxy S3。将分辨率设置为 720 x 1280 并将 ram 从 1024 降低到 700 对我有用。无法让它在内置的 wxga720 设置上运行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-07T18:16:53.827

我今天遇到了同样的问题，但我设法解决它（至少对我来说，因为我做错了），希望它对你也有用。

我试图通过 Eclipse 通过 Android Virtual Device Manager 直接更改 de Device RAM 内存。我不知道为什么，但是这种更改不会影响例如 \android-sdk\platforms\android-16\skins\WXGA800-7in 中存在的“hardware.ini”文件。要更改设备 RAM，或者只是添加 MB，您需要更改此文件。

# python - 如何验证 jinja2/pyramid/sqlalchemy 中的唯一表单元素？

> ID：11318350
> 
> 赞同：-1
> 
> 时间：2012-07-03T20:04:21.743
> 
> 标签：python, sqlalchemy, pyramid, jinja2

是否有一种简单的方法来验证用户输入表单中的独特元素？我找到了在 php 中执行此操作的方法（用户在表中输入后查找值）但不确定如何使用 jinja2

例如，假设一个用户正在注册，我要求所有电子邮件地址都是唯一的，我怎么能让他们在提交结果之前知道它不是唯一的（如果你是这样： [https](https://github.com/signup/free) ://github.com/signup/free已经是会员，如果您输入您的电子邮件，它会在您转到下一行时立即告诉您它存在。我见过很多网站都这样做）？现在我可以捕捉到错误，但它会刷新页面并给他们一个错误，我想让他们知道他们的表单在提交之前会失败。在此示例中，我正在检查不存在的内容，但在其他一些示例中，我想检查数据库中是否存在某些内容。

我知道我需要查询我的数据库，但我不确定如何从模板本身执行此操作，或者是否有其他方法可以执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:59:43.597

您可以使用**Javascript执行****XMLHttpRequest** ( [https://developer.mozilla.org/en/using_xmlhttprequest](https://developer.mozilla.org/en/using_xmlhttprequest) )以**POST**输入框的文本（如果您使用**jQuery 则更**容易，如即将到来的示例所示）并执行数据库查询服务器端查看电子邮件（输入框文本）是否唯一。因此，您将从此视图返回响应，其中在非 IE 浏览器的装饰器中为 IE 浏览器设置。例如：******`xhr=True``@view_config()``request.response.content_type='text/html'`******

 ******```
@view_config(permission='view', route_name='check_email', renderer='json') ##for IE browsers
@view_config(permission='view', route_name='check_email', renderer='json', xhr=True) ##for non-IE
def check_email(request):
    email= request.POST['email']

    dbquery = DBSession.query(User).filter(User.email==email).first()

    ## if the email exists in the DB
    if dbquery:
        msg = 'used'
    ## else if the email is available
    else:
        msg = 'available'

    if request.is_xhr:
        return {'msg':msg}
    else: # for IE browser
        request.response.content_type = 'text/html'
        return Response(json.dumps({'msg':msg})) 
```

您可以通过使用诸如 jQuery 之类的库来处理 XMLHttpRequest 轻松地（客户端）进行 POST。在您的模板中包含 jQuery 库以及脚本中的 .js 文件后：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type='text/javascript' src="{{request.static_url('tutorial:static/myscript.js')}}"></script> 
```

然后在**myscript.js**中执行：

```
$(function() {
  $('#email').on('blur', postEmail)
})

// this function POSTs the entered email
function postEmail() {
  var email = $(this).val()
  $.post('/check_email', email, callback)
}

// this function is used to do something with the response returned from your view
function callback(data) {
  if (data['msg'] === 'used') {
    alert('used')
  }
  else if (data['msg'] === 'available') {
    alert('available')
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T16:50:19.390

您可以创建一个消息系统，而不是使用 javascript 或 Jquery，通过 dict 将其传递给渲染器。例如：

```
message = ''
if 'form.submitted' in request.params:#form.submitted being the name of the submit of the form
    #check if email exists
    if exists:
         message = 'email already registered'
    else:
         message = 'success'
return dict(message = message) 
```

只是一种没有 JS 的方法******

# ruby-on-rails - 检查具有关联的对象

> ID：11318353
> 
> 赞同：1
> 
> 时间：2012-07-03T20:04:28.037
> 
> 标签：ruby-on-rails, ruby, has-many

我有两个模型，其中 A has_many B. 如果我加载 A，包括关联的 B：

```
a = A.find(:first, include: :bs) 
```

`a.inspect`只显示a的属性：

```
 => "#<A id: 1, name: \"Test\", created_at: \"2012-07-02 21:50:32\", updated_at: \"2012-07-02 21:50:32\">" 
```

我该怎么做`a.inspect`才能显示所有相关的`a.bs`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:59:09.797

默认情况下你不能这样做。它可能会在检查对象时产生太多问题和副作用。但是，您可以通过以下方式扩展`inspect`自己：

```
class A < ActiveRecord::Base
  ...
  def inspect
    [super, bs.inspect].join("\n")
  end
end 
```

请注意，这不是很聪明，因为它会在`bs`您每次检查`A`实例时强制加载。所以也许你想变得更聪明，做这样的事情：

```
def inspect
  [super, bs.loaded? ? bs.inspect : nil].compact.join("\n")
end 
```

这只会检查`bs`它是否已经预加载（`:include`例如）。

或者，也许您想创建一个`super_inspect`自动执行所有操作的替代方案。您可以使用以下内容进行扩展`ActiveRecord::Base`：

```
class ActiveRecord::Base
  def deep_inspect
    ([inspect] + self.class.reflect_on_all_associations.map { |a|
      self.send(a.name).inspect
    }).compact.join("\n  ")
  end
end 
```

这将自动查找与 的所有关联[`reflect_on_all_associations`](http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#method-i-reflect_on_all_associations)，如果关联已加载，它将调用`inspect`它。

现在您可以修改上面的代码，但是您想创建自己的自定义检查，或者如果您愿意，只需扩展当前检查。只需一点代码，一切皆有可能。

这是一个更智能的更新版本的示例：

```
class ActiveRecord::Base
  def deep_inspect
    ([inspect] + self.class.reflect_on_all_associations.map { |a|
      out = ""
      assoc = self.send(a.name)
      # Check for collection
      if assoc.is_a?(ActiveRecord::Associations::CollectionProxy)
        # Include name of collection in output
        out += "\n#{assoc.name.pluralize}:\n"
        out += self.send(a.name).to_a.inspect
      else
        out += self.send(a.name).inspect
      end
      out
    }).compact.join("\n  ")
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T08:02:57.390

与@Casper 的答案相同，这是一个辅助方法，可将所有关联编组到依赖链中：

```
# app/models/application_record.rb
#
#   placing the helper in the ApplicationRecord superclass
#   allows all application models to inherit the helper

class ApplicationRecord < ActiveRecord::Base
  def self.marshal

    # collect the names of the objects associations
    single_associations = self.class.reflect_on_all_associations(:has_one ).map {|x| x.name}
    plural_associations = self.class.reflect_on_all_associations(:has_many).map {|x| x.name}

    # serialize the object as a JSON-compatible hash
    self.as_json.merge(

      # merge in a hash containing each `has_one` association via recursive marshalling
      #   the resulting set of associated objects are merged into
      #   the original object's serialized hash, each keyed by the name of the association
        single_associations.reduce({}) { |memo, assoc| memo.merge({ assoc => self.send(assoc).marshal }) }.as_json
    ).merge(

      # merge in the `has_many` associations
      #   the resulting set of associated collections must then be processed
      #   via mapping each collection into an array of singular serialized objects
        plural_associations.reduce({}) { |memo, assoc| memo.merge({ assoc => self.send(assoc).map {|item| item.marshal } }) }.as_json
    )
  end
end 
```

然后，您可以通过调用以下方法调用此辅助方法：

```
Marshal.serialize a 
```

这与检查并不完全相同，因为它实际上是将对象序列化为哈希结构，但它会为您提供类似的信息。

* * *

请注意，可能的关联被分成两组：单数关联（引用单个目标对象）和复数关联（它们是[ActiveRecord CollectionProxy](https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html)对象，即它们是可枚举的）。因为我们将关联对象序列化为哈希，所以每个`has_many`关联必须被解析为单独序列化对象的集合（例如，我们将集合中的每个关联映射为其序列化形式）。

该`belongs_to`关联应该被忽略，因为在两个方向上映射关联会立即创建一个循环依赖图。如果你想沿着“归属链”编组，你可以做类似的事情

```
def self.trace
    parent_associations = obj.class.reflect_on_all_associations(:belongs_to).map {|x| x.name}

    obj.as_json.merge single_associations.reduce({}) { |memo, assoc| memo.merge({ assoc => obj.send(assoc).trace }) }.as_json
end 
```

* * *

# c# - 使用响应式扩展来处理来自条形码阅读器的按键

> ID：11318354
> 
> 赞同：0
> 
> 时间：2012-07-03T20:04:30.397
> 
> 标签：c#, winforms, system.reactive

我的条形码阅读器被编程为添加“，”的前缀和后缀，否则就像键盘一样工作。我有一个在扫描条形码时会打开的 Windows 窗体。

与其编写一堆 KeyDown 代码，Reactive Extensions 似乎非常适合这种工作。我想做的事：

*   按下逗号时，开始按住按键（不要让屏幕上的任何控件处理它们）
*   收集所有键，直到按下另一个逗号或 250 毫秒过去。
*   如果在 250 毫秒内没有按下逗号，则将按键返回到任何处于活动状态的控件。
*   如果按下逗号，则对从条码扫描进来的字符串值进行处理。

如何在匹配条形码扫描仪的前缀和后缀时使用 System.Reactive 按住按键，如果后缀匹配则处理，但在后缀在时限内不匹配时正常处理按键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:05:19.910

有人会出现，可能会给出比这更优雅的答案。但我发现这个具有挑战性。

首先，这个例子没有展示如何为表单上的键做这件事。那里有足够的额外复杂性，需要先尝试自己，或者问另一个问题。在这里需要一个完整的应用程序来回答您问题的所有方面。可以这么说：

1.  您可以将 KeyEventArgs 转换为可在此框架中使用的 observable
2.  您可以决定使用[SuppressKeyPress](http://msdn.microsoft.com/en-us/library/system.windows.forms.keyeventargs.suppresskeypress.aspx)`KeyEventArgs`将其抑制到条形码流中
3.  您可以决定不抑制`KeyEventArgs`非条形码流中的任何内容

目前的解决方案涉及定义一个函数，该函数采用 a`IObservable<char>`并将其转换为 a`GroupedObservable`标记（用 a `bool`）底层字符是否在“条形码”流中（真）或不（假）：

```
public IObservable<IGroupedObservable<bool, IObservable<char>>> GroupBySurroundingChars(IObservable<char> source, char ends, TimeSpan within)
{
    var result = 
        source.Buffer(() => 
            source.Select(c => {
                if (c == ends) return source.Where(x => x == ends).Amb(Observable.Timer(within).Select(_ => default(char)));
                else           return Observable.Return(default(char));
            }).Concat())
            .GroupBy(buffer => buffer.Count > 2 && buffer[0] == ends && buffer.Last() == ends, buffer => buffer.ToObservable());                        

    return result;
} 
```

这个函数的作用是：

1.  用每个字符开始一个缓冲区
2.  如果该字符不是逗号，则立即返回缓冲区
3.  如果该字符是逗号，则保持缓冲区打开，直到找到另一个逗号或 250 毫秒过去
4.  检查缓冲区是否在两端包含逗号（标记为条形码）或不包含（标记为无条形码）

然后是一个完整的用法示例：

```
var keys1 = "xxx,1234567,xxx,1,xxx".ToCharArray().ToObservable(Scheduler.ThreadPool).Do(_ => Thread.Sleep(100)).Publish().RefCount();
var keys2 = "xxx,1234567,xxx,1,xxx".ToCharArray().ToObservable(Scheduler.ThreadPool).Do(_ => Thread.Sleep(10)).Publish().RefCount();

var result = GroupBySurroundingChars(keys1, ',', TimeSpan.FromMilliseconds(250));

var barcodes = result.Where(x => x.Key);
var others = result.Where(x => !x.Key);

barcodes.Subscribe(groups => groups.Subscribe(x => x.ToList().Dump())); 
```

如果使用`keys1`，按键速度太慢，无法找到第一个条形码，但它会找到第二个。如果您使用`keys2`，按键速度足以找到两个条形码。

在任何一种情况下，`others`流都包含最终未标记为包含条形码的所有键。该`barcodes`流可以被视为一个字符一个字符的流，或者`List`像我上面所做的那样与每组条形码一起转换为一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:04:34.407

让我们一块一块地拆开它。

首先，您需要将按键作为 Observable：

```
 var keys =
        Observable.FromEventPattern<KeyEventHandler, KeyEventArgs>(
                a => this.KeyDown += a,
                a => this.KeyDown -= a
            ).Select(ea => ea.EventArgs)
            .Publish();

        var unsubscription = keys.Connect(); 
```

您有一个条件来描述缓冲，基于接收到一个按键：

```
 Func<KeyEventArgs, bool> isDelimiter =
            k => k.KeyCode == Keys.Oemcomma; 
```

现在我们可以在满足缓冲条件时收到通知`keys.Where(isDelimiter)`

当遇到分隔符或经过一段时间直到没有输入时，我们需要关闭缓冲区：

```
Observable.Amb(keys.Where(isDelimiter), keys.Throttle(TimeSpan.FromMilliseconds(2000)) 
```

将这些放在一起，我们可以创建在这些条件下出现的字符窗口：

```
 var windows = 
            keys.Window(keys.Where(isDelimiter),
                        first => Observable.Amb(
                                    keys.Where(isDelimiter), 
                                    keys.Throttle(TimeSpan.FromMilliseconds(2000)
                                )
                                .Where(_ => isDelimiter(first)))); 
```

现在您需要做的就是保持缓冲直到窗口关闭，并尝试阻止其余控件在缓冲时接收键：

```
 windows
            .SelectMany(window => window
                                        .Do(ka => ka.SuppressKeyPress = true)
                                        .Buffer(() => Observable.Never<KeyEventArgs>())
                                        )
            .Subscribe(buf => Trace.WriteLine(new string(buf.Select(ka => (char)ka.KeyValue).ToArray()))); 
```

`SelectMany`为您提供缓冲按键的最终流，您最终可以在其中放入程序逻辑。在这里，我只是将列表作为字符串打印到 Trace。

# c# - 实体框架中的 Restsharp 和关系/导航属性

> ID：11318362
> 
> 赞同：1
> 
> 时间：2012-07-03T20:04:51.057
> 
> 标签：c#, web-services, restsharp

我正在使用 RestSharp 用来自 web 服务的数据填充一些使用 MS Entity Framework 生成的对象，并且效果非常好。但这只是一个小测试。现在我在数据库中创建了更多的表，其中包含一些关系，Entity Framework 为其生成导航属性，现在 RestSharp 崩溃了。我猜这是因为它正在寻找不在网络服务响应中的链接表数据。

有谁知道如何解决这个问题？我喜欢使用 RestSharp，但是当它无法处理任何关系/导航属性时它就无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:45:36.733

由于这个问题从未得到答案，我想我会添加过去几个人告诉我的内容。“在服务/客户端上使用 POCO 是最佳实践”。

所以这就是我所做的。我编写了一些普通的旧 CLR 类来与 RestSharp 一起使用，然后我开始填充/更改我自己的实体框架对象。

这似乎确实是处理 RestSharp 响应的最佳方法。

# r - 从列表中选择最终项目

> ID：11318365
> 
> 赞同：3
> 
> 时间：2012-07-03T20:05:08.823
> 
> 标签：r

我有一个姓名列表，想提取每个人的姓氏。复杂之处在于一些条目有中间名，一些有昵称等。这是我的例子，基于[这个问题](https://stackoverflow.com/questions/1355355/how-to-avoid-a-loop-in-r-selecting-items-from-a-list/1355409#1355409)，但改变格式以反映我的情况：

```
df <- c("bob smith","mary ann d. jane","jose chung","michael mike marx","charlie m. ivan") 
```

要获得名字，我使用以下内容：

```
firstnames <- sapply(strsplit(df, " "), '[',1) 
```

但是，有没有办法让元素处于“最终”位置？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T20:08:21.327

```
> lastnames <- sapply(strsplit(df, " "), tail, 1)
> 
> lastnames
[1] "smith" "jane"  "chung" "marx"  "ivan" 
```

# css - 撇号内的 SCSS 变量内容

> ID：11318372
> 
> 赞同：0
> 
> 时间：2012-07-03T20:05:25.943
> 
> 标签：css, variables, sass, apostrophe

```
@mixin f1($color1, $color2){
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='$color1', endColorstr='$color2',GradientType=0);
} 
```

我想要做的是逃避撇号将 $color1 变成字符串的能力。startColorstr='$color1' 变成 startColor1str='#000000'。

```
@mixin f1($color1, $color2){
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=+"'"+$color1+"'"+, endColorstr=+"'"+$color2+"'"+,GradientType=0);
} 
```

这没用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:59:13.827

显然我必须在括号内添加变量，如'{$color}'，但仍然不能单独工作。我还必须添加一个'#'（哈希）以及'#{$color}'（即使我在mixin中传递了“#333”的值，它仍然需要#

所以结果看起来像这样：

```
@mixin f1($color1,$color2){
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#{$color1}', endColorstr='#{$color2}',GradientType=0);
} 
```

# php - 如何在 PHP 中将嵌套数组转换为 xml？

> ID：11318373
> 
> 赞同：1
> 
> 时间：2012-07-03T20:05:25.993
> 
> 标签：php, xml, arrays, nested

如何将以下嵌套数组转换为 xml 文件？XML 文件会是什么样子？

```
Array(
array('name'=>'Jone Smith','phone'=>'416-689-9865'),
array('name'=>'Jane    Ling','phone'=>'658-985-5222')
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:37:40.987

```
<?php
$your_array= array ('key1' => 'val1', 'key2' => 'val2', 'second_array' => array ('key3' => 'val3','key4' => 'val4'),);
$toXml = new SimpleXMLElement('<root/>');
array_walk_recursive($your_array, array ($toXml, 'addChild'));
print_r($toXml->asXML()); 
```

其他替代方法是使用`array_walk`. array_walk_recursive() 函数在用户自定义函数中运行每个数组元素。数组的键和值是函数中的参数。此函数与 array_walk() 函数之间的区别在于，使用此函数可以处理更深的数组（数组中的数组）

# android - Android 显示“无法获取项目的系统库”

> ID：11318374
> 
> 赞同：3
> 
> 时间：2012-07-03T20:05:26.593
> 
> 标签：android

我正在编写一个 android 教程，它希望我从另一个项目中导入该库。一切都很好。导入工作并且项目正常工作。但是我注意到这样做显然会弄乱构建路径，从而弄乱了我的其他几个项目（使用 Android 2.2 的项目）。现在，我在 gen 文件夹下没有看到“Google APIs [Android 2.2]”，而是看到了“无法获取项目的系统库”。当我右键单击项目并转到属性时，我看到正确的项目构建目标已被选中（Google APIs [Android 2.2]），但“无法获取项目的系统库”仍然显示在资产文件夹上方和下方和 Android 依赖项。清理所有项目无济于事。我该如何解决这个问题，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T11:33:51.153

在项目根文件夹中，您应该有名为 project.properties 的文件

---- 文件内容 -----

target=android-16 ## <--- 确保它在那里并且你安装了正确的 sdk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T01:27:37.990

对我来说，我选择了 SDK 版本 8，但如果我选择了下一个最高版本，应用，然后再次选择版本 8 并应用，解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T07:00:56.683

对我来说，问题是在项目设置 - Android 选项卡中，我没有选择 Android 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-11T21:32:56.873

对我来说，有效的是重新启动 Eclipse。希望这可以帮助。

# c# - 使用 WindowsIdentity 查询当前用户的身份？

> ID：11318377
> 
> 赞同：5
> 
> 时间：2012-07-03T20:05:29.267
> 
> 标签：c#, single-sign-on, wif

我正在使用 WindowsIdentity 获取当前用户的 ID 以执行 SSO。在大多数情况下，我得到的正是我想要的，但对于某些用户来说，我得到了奇怪的结果。示例代码：

```
IIdentity WinId = HttpContext.Current.User.Identity;
WindowsIdentity wi = (WindowsIdentity)WinId;
String idName = wi.Name.Replace(@"TESTHQ\", ""); 
```

有时我会收到`duy@test.org`，然后我就可以登录。其他时候我会收到 jone@test.org/broadcast@test.org。

有没有可以看到使用 Windows 7 的当前身份的地方？比如在控制面板什么的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:08:21.583

Then you can change your code to split the values on `/`

try

```
WindowsIdentity MyIdentity = WindowsIdentity.GetCurrent(); 
```

# java - 增加一个数组副本以计算用户输入的 int Java

> ID：11318378
> 
> 赞同：-3
> 
> 时间：2012-07-03T20:05:29.283
> 
> 标签：java, arrays, loops, increment

当我运行程序时：

```
 Enter a number: 222
        Digit:      0 1 2 3 4 5 6 7 8 9
        Occurrences:    1 9 
```

*显然这是家庭作业。在过去的四天里，我浏览了这个网站，并根据不同的想法无数次地更改了代码，这是我在继续尝试进行更改时的最后手段。有什么想法/方向可以完成这项工作吗？

谢谢。

```
import jpb.*;

            public class RepeatDigit {
        public static void main(String[] args) {
    //User input
    SimpleIO.prompt("Enter a number: ");
    String userInput = SimpleIO.readLine().trim();
    int number = Integer.parseInt(userInput);

    //Array to store digit counts               
    int[] digitCounts = new int [10];

    while (number > 0) {
        digitCounts[number%10]++;
        number /=10;
    }

    System.out.print("Digit:\t\t");

    //Printing 0-9
    int[] digit = {0,1,2,3,4,5,6,7,8,9};
    for (int i1 = 0; i1 < digit.length - 1; i1++)
        System.out.print(digit[i1] + " ");
    System.out.print(digit[digit.length - 1]);

    System.out.print("\nOccurrences:    ");

            //Attempt to make a new array copy and compare this with 
            //user input

    int []tempArray= new int [digit.length];
    System.arraycopy(digit, 0, tempArray, 0, digit.length);
        for (int i1 = 0; i1 < tempArray.length - 1; i1++)
                if (tempArray[i1] == number);
                    number += 1;

    System.out.print(tempArray[number] + " "); e
    System.out.print(tempArray[tempArray.length -1]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:34:28.900

首先，你的

```
for (int i1 = 0; i1 < digit.length - 1; i1++)
        System.out.print(digit[i1] + " ");
    System.out.print(digit[digit.length - 1]); 
```

看起来有点不必要地难以阅读。你可以做

```
for (int i1 = 0; i1 < digit.length; i1++)
        System.out.print(digit[i1] + " "); 
```

其次，我猜你想打印出标签`digitCounts`后面的内容。`Occurences`在这种情况下，您可以按照与打印`digit[]`数组相同的方式执行此操作。

如果那不是您想要做的，请告诉我您实际上想要做什么，以便我可以更好地帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:32:44.010

我认为这是预期的行为：

```
Enter a number: 222
Digit:      0 1 2 3 4 5 6 7 8 9
Occurrences:    3 
```

在您显示的代码中，您将输入的字符串转换为数字，然后尝试使用`%`and一次处理一个字符`/`。乍一看，这个循环似乎不太可能按预期工作，但幸运的是，不需要这种方法。假设此代码不是性能关键，您可以一次通过用户输入一个字符并解析该单个数字，例如：

```
for (Character c : input.toCharArray()) {
    int i = Integer.parseInt(c.toString());
    // handle i
} 
```

`arraycopy`除非作业需要，否则我不会使用此任务。使用一个用 0 填充的大小为 10 的数组。每当您解析数字`x`时，增加 index 处的值`x`。

你似乎已经弄清楚了打印`digit[]`，你可以对出现的次数做同样的事情。

# php - 我可以在 echo 语句中包含 php

> ID：11318383
> 
> 赞同：1
> 
> 时间：2012-07-03T20:05:57.373
> 
> 标签：php, smarty, heredoc

我可能对此非常不雅 - 但我是新手，所以尽我所能解决问题。

我正在使用 smarty 标签动态生成表单。

在我有一个聪明的标签内

```
<<MY PHP>>
<<The HTML echod using heredoc syntax>> 
```

我想根据会话变量设置表单的值，例如，想放一个

```
if($_SESSION['sv_02']=="2012") echo "selected"; 
```

根据存储在 SESSION 中的变量预填充下拉菜单。

**如何*在*我的 heredoc 块中包含这样的 PHP 命令。是否可以？**

如果这是一种倒退的操作方式，我也会感谢有关该方面的建议。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:11:01.537

为什么不先设置变量的逻辑然后是heredoc

```
if($_SESSION['sv_02']=="2012" $selected= "selected";

....

echo <<<EOT
---
--
$selected
---
EOT; 
```

选择

```
echo <<<EOT
---
--
EOT;

if($_SESSION['sv_02']=="2012" echo "selected";

echo <<<EOT
---
--
EOT; 
```

# java - 尝试在模态对话框中更新 JLabel

> ID：11318387
> 
> 赞同：4
> 
> 时间：2012-07-03T20:06:15.170
> 
> 标签：java, swing, concurrency, jlabel, event-dispatch-thread

我有一个包含 JLabel 的模式对话框。此对话框调用另一个类中的方法，该方法执行长时间运行的查找活动。我希望这个查找类更新从模态对话框传递的 JLabel。

我尝试从查找过程中的代码循环和 Timer 中更新 JLabel。（我发现当模式对话框运行时，Swing 计时器的 actionPerformed 方法永远不会被调用。）自从实现了 Timer，我将查找过程移到了一个单独的线程中。

我的查找有效，但直到过程结束，JLabel 仍然没有重新绘制。我将不胜感激任何帮助。

这是相关的方法。DictionaryTuple 是一个 POJO，包含两个字段：一个 List 和一个 String。只是 getter 和 setter，但 dictionaryThread 确实可以访问 tupleList；请注意，在 dictionaryThread 完成之前，我们不会在这里触摸它。

```
public List<DictionaryTuple> findTuples() {
    tupleList = new ArrayList<DictionaryTuple>();
    Thread dictionaryThread = new Thread(this);  // This is the long-running lookup thread
    dictionaryThread.start();

    progressTimer = new Timer();
    progressTimer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
                       //  progressCaption is updated in dictionaryThread
            synchronized (progressCaption) {
                lblProgress.setText(progressCaption);
            }
            lblProgress.repaint();
            Thread.yield();
        }
    }, 250, 250);

     try {
        dictionaryThread.join();
    } catch (InterruptedException e) {
    } finally {
      progressTimer.cancel();
      lblProgress.setText("");
      progressCaption = "";
    }
    return tupleList;
} 
```

我也尝试过这种变化；在这种情况下，内部的 run() 调用将一直保持到处理完成：

```
 progressTimer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            synchronized (progressCaption) {
            System.out.println("Fire!");
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    System.out.println("Update");
                    lblProgress.setText(progressCaption);
                    lblProgress.repaint();
                }});
            }
        }
    }, 250, 250); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:25:42.660

这个演示应该会有所帮助。如果我通过调用 run 与在单独的线程中运行它来运行长作业，请查看不同之处

```
 public static void modalDialogTest() {
        JDialog dialog = new JDialog((JFrame)null);
        final JLabel jl = new JLabel("Need some space");
        JButton jb = new JButton ("Click me");
        Timer t = new Timer(1000, new AbstractAction() {
            int it = 0;
            @Override
            public void actionPerformed(ActionEvent arg0) {
                // TODO Auto-generated method stub
                jl.setText("" + it);
                jl.repaint();
                it++;
            }

        });
        t.start();

        AbstractAction wait = new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                Runnable r = new Runnable() {
                    public void run() {
                        try {
                            Thread.sleep(10000);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                };
                //r.run();
                new Thread(r).start();
            }
        };

        jb.addActionListener(wait);
        dialog.getContentPane().add(jl);
        dialog.getContentPane().add(jb);
        dialog.getContentPane().setLayout(new FlowLayout());
        dialog.pack();
        dialog.setVisible(true);
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:14:25.183

您需要准确地向我们展示***您***将对话框设置为可见的位置——是在调用方法之前还是之后`findTuples()`？这很关键。

**建议：**

*   始终在 Swing 事件线程或 EDT（事件调度线程）上更新 JLabel。
*   不要使用 java.util.Timer 来更新 Swing 应用程序的组件。
*   您可以使用 javax.swing.Timer 来更新 Swing 组件，但这在这里不起作用，除非您使用它来轮询后台进程。
*   考虑将 SwingWorker 用于后台线程，然后通过 worker 的发布/处理方法或通过添加到 SwingWorker 的 PropertyChangeListener 更新 JLabel。
*   在将对话框设置为可见***之前***，在对话框运行时调用您想要运行的所有方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:50:31.237

谢谢大家的建议。我实施的是 Hovercraft 的，使用 SwingWorker。

我的方法所在的 Dictionary 类现在扩展了 SwingWorker。findTuples() 方法变为 doInBackground()。不再需要计时器和我自己的线程代码。

doInBackground() 使用带有属性名称“progress”的 publish() 来提供要出现在更新的 JLabel 中的文本。

回到对话代码中，调用涉及创建 Dictionary 实例，并使用 PropertyChangeListener 处理 JLabel（名为 lblProgress）中的更改并检测处理何时完成：

```
private void myCallingMethod() {
    final Dictionary dictionary = new Dictionary();

    dictionary.addPropertyChangeListener(new PropertyChangeListener() {
        @Override
        public void propertyChange(PropertyChangeEvent event) {
            List<DictionaryTuple> tupleList;

            // Is processing complete?
            if (event.getNewValue() instanceof StateValue
                    && event.getNewValue() == StateValue.DONE) {
                try {
                    tupleList = dictionary.get();
                    lblProgress.setText(tupleList.size() + " Tuples Found");
                } catch (Exception e) {
                    JOptionPane.showMessageDialog(
                            null,
                            "Error in processing dictionary: "
                                    + e.getMessage());
                    tupleList = new ArrayList<DictionaryTuple>();
                    lblProgress.setText("");
                }

                // Process the results.
                processTuples(tupleList);

            } else {
                // The process isn't done yet.
                // Is this a request to change lblProgress?
                if (event.getPropertyName().equals("progress")) {  
                    lblProgress.setText((String) event.getNewValue());
                }
            }
        }
    });

    // Start the dictionary lookup to run asynchronously.
    dictionary.execute();
} 
```

我学会了不要依赖 SwingWorker.isDone() 来判断 SwingWorker 的处理是否完成。就我而言，PropertyChangeListener 在该状态下被调用了两次：一次是最后一次 publish() 调用的结果，一次是任务实际完成时。

# javascript - Modernizr 检查以检测 Firefox

> ID：11318389
> 
> 赞同：4
> 
> 时间：2012-07-03T20:06:24.567
> 
> 标签：javascript, modernizr

使用modernizr可以进行哪些检查来检测firefox功能？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T21:05:25.510

Even if browser detection is not recommended for features it could be use to present other type of information.

```
Modernizr.addTest('firefox', function () {
 return !!navigator.userAgent.match(/firefox/i);
}); 
```

This adds a class .firefox to document.documentElement (html tag)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T20:48:19.043

不幸的是，对于视频和音频之类的东西，浏览器检测仍然是必要的，因为所有浏览器都支持不同的格式。我想你会在这里找到答案，纳豆：

[http://diveintohtml5.info/detect.html](http://diveintohtml5.info/detect.html)

# perforce - 使用“协调离线工作”时 p4v 出错，“无法理解的修订规范 '\...#have'。”

> ID：11318390
> 
> 赞同：1
> 
> 时间：2012-07-03T20:06:30.407
> 
> 标签：perforce, p4v

当我尝试在 Windows 上的 p4v 客户端中以“\C#\”结尾的目录上使用“协调脱机工作”时，我收到了该错误。

它与路径中的“#”有关吗？是否有任何不涉及重命名目录的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:43:49.713

是的，这是因为 # 字符表示修订号（例如 path_to_file#3 表示修订版 3）。我认为没有任何方法可以逃避 P4V 中的角色，因此您必须重命名目录。

# c# - WPF：对“实时”数据进行分组

> ID：11318396
> 
> 赞同：0
> 
> 时间：2012-07-03T20:06:42.327
> 
> 标签：c#, wpf, mvvm, collectionview

## 模型：

假设我有`Book`模型。

```
public class Book
{
    public string Author { get; set; }
    public string Title { get; set; }
    public string Genre { get; set; }
    public DateTime Published { get; set; }
} 
```

另外，我有这样的DataService。它具有使客户端的书籍保持最新的事件：

```
public interface IBookService
{
    List<Book> GetAllBooks();

    // Book changed event.
    EventHandler<BookChangedEventArgs> BookChanged;

    // Book added/removed event.
    EventHandler<BooksCollectionChangedEventArgs> BooksCollectionChanged;
} 
```

## WPF（MVVM）用户界面客户端：

我有`BookViewModel`课（换行`Book`）。我有一个与接口`ObservableCollection<BookViewModel>`的某些实现同步的`IBookService`。

所以，问题。有必要允许用户选择具有以下 UI**的一本书（不是类型也不是作者） ：**

![用户界面](../Images/032360daad235ae993bf44a5f590bf14.png)

平面集合`BookViewModel`应该以某种方式按顺序“分组”（或者我不知道如何正确称呼它）：

1.  流派。
2.  作者（选定类型的）。
3.  书籍（选定类型和选定作者）。

因此，每个级别都是其后代级别的**大师**。

此外，您可能会提到上一个/下一个按钮。他们应该浏览**书籍级别**（最后一本书）：例如，如果选择**了最后一本书**并按下 Next（见图），则 UI 的下一个状态应该是：第二流派 => 第二作者 => 某本书（第二体裁和第二作者）。

如何实现如此复杂的 UI：多级分组？实现这种图书浏览器的最简单方法是什么？如果您能给我提供一些类似的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:54:08.933

他塞尔吉，

我只会使用一个实现您的 IBookService 的 SelectBookViewModel。此 ViewModel 包含一个`Collection<Book>`或一个`ObservableCollection<Book>`. 每次收到更新 Book-Collection 的 UpdateEvent 时，您都会对该集合执行 LINQ 查询以获取以下类型的列表：

```
GenreListProperty = (from book in books
                     select book.Genre).Distinct().ToList(); 
```

将您的第一个 ListView 绑定到 this `GenreListProperty`。`SelectedItem`根据第一个列表框属性的更改事件，实现一些其他逻辑来查询相同样式的其他 ListView 的列表。

按钮只是在 ListViews 上进行一些导航，并在`SelectedItem`更改时更新它们的逻辑。当按下 Ok 按钮时，您只需对 Book-Collection 执行组合 LINQ 查询，以选择您的处理继续进行的选择一个。

# php - SQL 数据库中的 PHP 字符串显示为纯文本

> ID：11318400
> 
> 赞同：0
> 
> 时间：2012-07-03T20:07:17.827
> 
> 标签：php, sql

请原谅初学者的问题——我正在尝试使用另一个命令从 SQL 数据库调用 PHP 命令，但网页将命令显示为纯文本。

例如，我在页面上的命令是`<?php echo $row_rsLeftColumn['code']; ?>`and 调用 SQL 数据库中的此项：`<?php echo '<p>Hello World</p>'; ?>`. 但是，即使我可以在源代码中看到该行，网页也不显示“Hello World”——因此，该行已成功从 SQL 数据库中提取，页面只是将其视为纯文本。

当我直接将该行添加到网页中时，它可以按预期工作，因此问题似乎不是Web服务器上的PHP配置错误；相反，当它从 SQL 数据库调用 PHP 时，页面无法识别 PHP，即使它直接在页面上识别它也是如此。

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:10:27.840

If you have PHP code in the database that you wish to extract and execute, you need to use [eval()](http://php.net/eval) to run it.

Take caution with eval as it doesn't perform any checks on the code so if end users can enter code, they can write any malicious code they want. Read over the docs on eval thoroughly before using it if you must. And take note that you must remove the `<?php ?>` tags from the code before calling eval.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:55:34.057

抱歉，我还不能在评论中回复...

`eval()`需要 PHP 代码，所以如果你的字符串以 HTML 开头，你需要在它前面加上`?>`.

```
<?php eval('?>' . $row_rsLeftColumn['code']); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:11:36.253

它作为字符串从数据库中出来。现在你把它拉出来并告诉它回声。您应该使用 eval() 函数。

```
<?php eval($row_rsLeftColumn['code']); ?> 
```

# javascript - EXTJS 3、如何手动控制分页事件？

> ID：11318401
> 
> 赞同：2
> 
> 时间：2012-07-03T20:07:18.007
> 
> 标签：javascript, extjs, extjs3

在 EXTJS 3 中，我定义了一个数据存储和网格，它工作正常。现在问题是分页，我想手动控制“下一步”按钮事件。

我试图在分页中使用'beforechange'事件，但它不起作用，因为它是'BEFORE'。如何手动加载带有参数值的商店？

服务器端是 C#。

谢谢

这家店是

```
 var store = new Ext.data.DirectStore({
            storeId: 'store',
            directFn: Report.Function1,
            autoLoad: false,
            paramsAsHash: false,
            paramOrder: 'param1|start',
            ....
            fields: [ ...   ],
            remoteSort: false,          
        }); 
```

分页是

```
var pager = new Ext.PagingToolbar({
            store: store,
            displayInfo: true,
            pageSize: this.pageSize,

            listeners: {
                beforechange: function (paging, params) {
                    currentPage = params.start;
                    report_search(params);
                }
            }
        });

 function report_search(page) {
    var store = Ext.StoreMgr.lookup('store');
    store.removeAll();

    store.load({
        params: {
            param1: Ext.getCmp("param1").getValue(),           
            start: page.start
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T09:40:47.563

似乎您想在加载完成之前对商店应用一个特殊的参数。
为此 - 您需要：

```
this.store.on('beforeload', this.applyParams.createDelegate(this));
...

applyParams: function(store, options) {
    options.params = options.params || {};

    var params = {
        param1: Ext.getCmp("param1").getValue()
    };

    Ext.apply(options.params, params);
} 
```

我希望您不需要拒绝“下一步”按钮单击，因为可以从其他地方加载商店（自动，从其他地方手动）。

# ios - 以编程方式处理旋转 UIView

> ID：11318406
> 
> 赞同：0
> 
> 时间：2012-07-03T20:07:26.013
> 
> 标签：ios, uiview, rotation, uiwindow

在第一次启动时，该应用程序处理数据库的内务管理。这需要一段时间，因此，我添加了一个带有微调器的半透明视图和一个告诉用户发生了什么的标签。

为了将这个半透明视图置于其他所有内容之上，我已将其添加为 self.view.window 的子视图。整个代码如下所示：

```
-(void)housekeepDataBase{

    self.searchOptionsControl.hidden=TRUE;
    self.searchBar.hidden=TRUE;

    UIView *translucentView=[[UIView alloc]initWithFrame:CGRectMake(0, 0, self.view.window.frame.size.width, self.view.window.frame.size.height)];
    translucentView.backgroundColor=[UIColor blackColor];
    translucentView.alpha=0.65;

    UILabel *activityLabel=[[UILabel alloc]initWithFrame:CGRectMake((self.view.center.x-140), (self.view.frame.size.width*0.75), 280, 20)];
    activityLabel.numberOfLines=1;
    activityLabel.textAlignment=UITextAlignmentCenter;
    activityLabel.font=[UIFont fontWithName:@"Arial" size:20.0];
    activityLabel.text=@"Cleaning up database";
    activityLabel.textColor=[UIColor whiteColor];
    activityLabel.backgroundColor=[UIColor clearColor];

    UILabel *activityLabel2=[[UILabel alloc]initWithFrame:CGRectMake((self.view.center.x-140), (self.view.frame.size.width*0.75+40), 280, 20)];    activityLabel2.numberOfLines=1;
    activityLabel2.textAlignment=UITextAlignmentCenter;
    activityLabel2.font=[UIFont fontWithName:@"Arial" size:16.0];
    activityLabel2.text=@"(It might take a while)";
    activityLabel2.textColor=[UIColor whiteColor];
    activityLabel2.backgroundColor=[UIColor clearColor];

    UIActivityIndicatorView *spinner=[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    spinner.frame=CGRectMake((self.view.center.x-50), (self.view.frame.size.width*0.50), 100, 37);
    [spinner startAnimating];

    [self.view.window addSubview:translucentView];
    [self.view.window addSubview:spinner];
    [self.view.window addSubview:activityLabel];
    [self.view.window addSubview:activityLabel2];

// dealing with the DB

} 
```

不幸的是，它会导致这些视图（视图、微调器和标签）不根据设备方向旋转。

所以，问题是：有没有其他方法可以处理这个问题？旋转或添加视图？我想要的是让半透明视图位于屏幕顶部的导航栏顶部，以及底部工具栏的顶部。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:35:39.120

设置 autoresizingMask，例如，

```
- (void)housekeepDataBase
{
    self.searchOptionsControl.hidden=TRUE;
    self.searchBar.hidden=TRUE;

    UIViewAutoresizing controlMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
    UIViewAutoresizing viewMask    = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

    UIView *view   = self.navigationController.view;
    CGRect  frame  = CGRectMake(0, 0, view.frame.size.width, view.frame.size.height);
    CGPoint center = CGPointMake(frame.size.width / 2.0, frame.size.height / 2.0);

    _containerView                   = [[UIView alloc] initWithFrame:frame];
    _containerView.autoresizingMask  = viewMask;

    UIView *translucentView          = [[UIView alloc] initWithFrame:frame];
    translucentView.backgroundColor  = [UIColor blackColor];
    translucentView.alpha            = 0.65;
    translucentView.autoresizingMask = viewMask;

    UILabel *activityLabel           = [[UILabel alloc] initWithFrame:CGRectMake((center.x-140), (frame.size.width*0.75), 280, 20)];
    activityLabel.numberOfLines      = 1;
    activityLabel.textAlignment      = UITextAlignmentCenter;
    activityLabel.font               = [UIFont fontWithName:@"Arial" size:20.0];
    activityLabel.text               = @"Cleaning up database";
    activityLabel.textColor          = [UIColor whiteColor];
    activityLabel.backgroundColor    = [UIColor clearColor];
    activityLabel.autoresizingMask   = controlMask;

    UILabel *activityLabel2          = [[UILabel alloc] initWithFrame:CGRectMake((center.x-140), (frame.size.width*0.75+40), 280, 20)];
    activityLabel2.numberOfLines     = 1;
    activityLabel2.textAlignment     = UITextAlignmentCenter;
    activityLabel2.font              = [UIFont fontWithName:@"Arial" size:16.0];
    activityLabel2.text              = @"(It might take a while)";
    activityLabel2.textColor         = [UIColor whiteColor];
    activityLabel2.backgroundColor   = [UIColor clearColor];
    activityLabel2.autoresizingMask  = controlMask;

    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    spinner.frame                    = CGRectMake((center.x-50), (frame.size.width*0.50), 100, 37);
    spinner.autoresizingMask         = controlMask;
    [spinner startAnimating];

    [view addSubview:_containerView];
    [_containerView addSubview:translucentView];
    [_containerView addSubview:spinner];
    [_containerView addSubview:activityLabel];
    [_containerView addSubview:activityLabel2];

    // dealing with the DB
} 
```

而且，通过将这一切都放在一个容器视图中，当您完成后，您只需移除一个视图即可移除所有这些控件。如果这是一个 ivar，其他方法也可以删除它，例如，

```
- (void)removeHousekeepDataBase
{
    [_containerView removeFromSuperview];
    _containerView = nil;
} 
```

# html - 无法点击 div 元素后面的输入元素

> ID：11318412
> 
> 赞同：2
> 
> 时间：2012-07-03T20:07:40.243
> 
> 标签：html, css

在我的网站上：[http](http://alsite.com.br/solalev/) ://alsite.com.br/solalev/我在页面底部有一些我无法点击的元素。元素上方是一个名为 push 的 div。我使用此 div 使页脚始终保持在页面底部，即使内容较小...（我不知道我这样做是否正确..但它确实有效)..

所以.. 在 Chrome 和 Firefox 上我无法点击.. 但在 IE 上这有效....

我用这个：

```
.push{
    pointer-events: none;
} 
```

但什么也没发生……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:24:19.410

你有什么理由`pointer-events: none;`在你的 CSS 中使用这么多？如果不是，那么只需摆脱它，因为这是导致问题的原因。

仔细观察你的问题是 .wrapper div。你的 .push div 的高度为 231px，你的 .wrapper 的 margin-bottom 为 -231px 以创建一个粘性页脚。我会找到一种更好的方法来创建粘性页脚，因为这远非理想。也许这些答案中建议的可能会有所帮助或使用这种久经考验的方法

[CSS技巧粘页脚](http://css-tricks.com/snippets/css/sticky-footer/)

或者

[JQuery 粘性页脚](http://css-tricks.com/snippets/jquery/jquery-sticky-footer/)

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:25:23.840

从您的 css 属性中删除所有`pointer-events: none;`内容（html、body、wrapper、baixo、push、footer）。似乎您想禁用所有鼠标事件，现在想知道为什么鼠标单击没有发生任何事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:28:15.350

似乎 .push 是让您的页脚停留在底部的不好方法......这是另一种方法：

**HTML**

```
<html>
     <head>
          <title></title>
     </head>
     <body>
          <div id="paddingFix">
               <div id="content">
                   <!-- Your content goes here. -->
               </div>

               <div id="footer">Footer</div>
          </div>
     </body>
</html> 
```

**CSS**

```
body,html {
    height:100%;
    padding:0px;
    margin:0px;
}
#paddingFix {
    min-height:100%;
    position:relative;
}
#content {
    padding-bottom:60px;
    text-align:center;
}

#footer {
    height:40px;
    position:absolute;
    left:0px;
    bottom:0px;
    color:#FFF;
    background:black;
    width:100%;
} 
```

[演示](http://jsfiddle.net/nubx/b38Z5/3/)

基本上，它将页脚定位在最小高度：100% 的容器的绝对底部；和相对位置；所有的内容都在容器中，还有一个填充底部，其大小与页脚高度的大小加上一点空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:12:09.733

首先，删除包装器上的负边距：

```
#wrapper {
    margin:0 auto;
} 
```

然后一起摆脱你的 div.push （从 HTML 代码中删除它）。最后，删除“指针事件”。

现在，您的页脚将始终位于内容下方，用户将可以填写表单。

此外，更多的是出于好奇，但看起来大部分代码都是使用 DIV（正确）完成的，直到页脚。然后，砰，它是表格城市（更不用说随机卡在那里的样式表和元标记）！页脚是否来自第三方？

# java - 每个线程实现一个队列

> ID：11318417
> 
> 赞同：1
> 
> 时间：2012-07-03T20:08:14.333
> 
> 标签：java, multithreading, events, queue, thread-local

您将如何实现一个侦听器，该侦听器将在多线程环境中线程执行结束时执行的事件排队？期望的行为是每个线程都有自己的事件队列，这样它们就不会混淆并被原子执行。所以如果线程 A 调用 listener.execute() 那么只有“他的”事件被执行。

我能想到的唯一方法是使用 ThreadLocal 变量，但如果我考虑到[这里的复杂性，](https://stackoverflow.com/a/818120/306488)我宁愿不使用任何变量。

假设您有一棵树，并且您想删除 x 个节点，那么您不想在每个“刷新”事件之后执行刷新 x 次，但您最好将它们排入队列并在最后执行……这样可以节省 x -1 刷新:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:15:52.513

如果您真的想避免使用 ThreadLocal，您可以反转模式并将所有者线程的[弱引用与（唯一）](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html)[队列](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)中的每个事件一起存储。

如果所有者不再可用，这也将允许重新部署到任何其他线程。

但我有点不确定，因为我从未见过需要在“线程执行结束”时执行这样一个事件队列。你真的有线程还是它们真的是任务或可运行的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:19:18.917

如果每个线程在执行结束时都有自己的 OWN 队列，那么您的所有队列不都是 1-MEMBER 队列吗？

# html - Bootstrap css in IE

> ID：11318418
> 
> 赞同：0
> 
> 时间：2012-07-03T20:08:15.110
> 
> 标签：html, css, twitter-bootstrap

I'm using some of the bootstrap components in particular the button group. I want to be able to add gradients to IE. When I view it in IE8 it degrades to a solid background. I tried to set a style for IE

Right now .btn class is using this setup to color the background gradients.

```
 background-color: #F5F5F5;
  background-image: -moz-linear-gradient(center top , #FFFFFF, #E6E6E6); 
```

Here is what I'm adding for IE but it doesn't seem to do anything.

```
.btn{
background: linear-gradient(to bottom, #ffffff 0%,#e6e6e6 100%); 
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e6e6e6',GradientType=0 );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:31:54.713

在手册中偷看，`colorstr`论点[似乎期望`AARRGGBB`符号。](http://msdn.microsoft.com/en-us/library/ms532930%28v=vs.85%29.aspx)

> 颜色以#AARRGGBB 格式表示，其中AA 是alpha 十六进制值，RR 是红色十六进制值，GG 是绿色十六进制值，BB 是蓝色十六进制值。alpha 值控制对象的不透明度。alpha 值 00 是透明的，而 FF 值是不透明的。

所以试试

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffffff',
endColorstr='#ffe6e6e6',GradientType=0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:29:16.737

虽然您可以使用过滤器，但如果有纯色背景，IE 将使用它。（好吧，技术上不是，但效果是一样的）

因此，尝试删除背景颜色，看看是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:34:32.060

好的，问题是我首先加载了 IE 样式表，而 bootstrap.css 中的背景颜色覆盖了它。感谢大家的所有建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T20:13:57.023

您总是可以尝试覆盖透明 png，但请注意它在 IE6 中不起作用。

# photoshop - 带有 Photoshop 智能感知的 Javascript 编辑器

> ID：11318419
> 
> 赞同：7
> 
> 时间：2012-07-03T12:00:51.127
> 
> 标签：photoshop

我想开始使用 Photoshop 编写一些脚本，我想知道是否有一个编辑器已经拥有 Photoshop 的对象或允许加载 Photoshop 的 DOM 以进行智能感知。

任何指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T00:23:33.473

Adobe 套件附带的 Extendscript Toolkit 几乎是您所需要的。它甚至可以通过帮助菜单获得整个 DOM 参考。它执行代码完成（智能感知），您可以在编辑器中运行/调试脚本。

# vba - How to Open a FTP file with a * wild character in Name Using VBA

> ID：11318436
> 
> 赞同：1
> 
> 时间：2012-07-03T20:09:23.177
> 
> 标签：vba, excel

I want to open a file from a folder in FTP Site. This folder has multiple reports with the same name only difference is timestamp i.e. Reports for each day

So i was trying to use a Wild Character * in my code to pick up todays report , see the code below

```
sReportDate = Format(ReportDate, "mmddyy")
ReportName = "_______Notification_of_Separation_______.POSFTPADPRFT1JFAGP02." &   sReportDate  & "*.csv" 

Workbooks.OpenText fileName:="ftp://UserID:Password@IPAddress/Separation Notifications/" & ReportName 
```

but it is not working and doesn't opens the file.

however if i hard code the report name it works, there is some thing wrong with wild character.

Any help ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:00:41.630

从 Excel VBA 帮助：

> ***文件名*** 必需**字符串**。要打开的工作簿的文件名

Windows 系统上的单个文件的名称（我猜你在 Windows 下运行 Excel）不能包含通配符。您必须指定要打开的文件的确切文件名。

既然您说目录中的所有文件都具有“相同的名称，唯一的区别是时间戳”，并且您提供的是 in `sReportDate`，那么为什么仍然需要通配符？

如果事实上文件名在日期之后有一个*可变*的时间戳，那么您将需要查询文件夹以找到要打开的相关文件。在另一个问题中开始这样做：[Dir() 是否对返回的文件的顺序做出任何保证？](https://stackoverflow.com/questions/4282940/does-dir-make-any-guarantee-on-the-order-of-files-returned)当您检查目录中的文件名时，您**可以使用通配符 - 然后，找到与您的日期匹配的文件名，您知道相关名称并可以显式打开它。**

# php - Magento：Mage_Core_Block_Flush（核心/刷新）块有什么用？

> ID：11318437
> 
> 赞同：3
> 
> 时间：2012-07-03T20:09:28.853
> 
> 标签：php, magento

看起来这个块直接刷新输出。

这个块的实际用途是什么？我该如何使用它？

有人用过吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T20:23:33.037

核心（afaik）不使用它。它关闭输出缓冲，因此渲染的输出将立即发送。唯一可以工作的块是根块，否则嵌套`core/flush`块和所有后续块将在包含外部块之前呈现。

我想不出一个合理的用例。由于前端控制器负责将输出发送给客户端，因此该`core/flush`块中断了他的进程。在最坏的情况下，它可能导致 PHP Headers 已经发送通知。

我不知道，但我猜这是 Magento 预发布时代的遗留物，当时整个渲染系统还没有最终确定。在当时看来可能是个好主意。
也许当时和核心团队在一起的人可以启发我们了解历史。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T22:55:12.757

可以使用它的一种情况是自定义报告。由于 MySQL 查询繁重，我有一些报告需要很长时间才能加载。我猜这个块将允许我在输出开始生成后立即开始显示页面，这样它就不必等待 phtml 布局完成其执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:18:32.567

看起来该块没用，因为它[已从 Magento2 中删除](https://github.com/magento/magento2/issues/35#issuecomment-7265641)。

# python - 在使用表单数据之前对其进行预处理

> ID：11318438
> 
> 赞同：1
> 
> 时间：2012-07-03T20:09:33.020
> 
> 标签：python, web2py

我需要将一些 HTML 表单数据发送到 python 脚本以在 web2py 应用程序中进行格式化，但不知道如何执行此操作。用户将数据输入到 HTML 表单中。数据被发送到脚本进行清理和标记化。修改后的数据被发送到另一个要使用的 python 函数。我该怎么做？每个 python 函数都进入 default.py 控制器还是应该创建一个新的 .py 文件来处理表单数据？我这里有一个例子。这会将搜索词作为用户输入并将其发送到结果页面。在将其发送到结果页面之前，如何将其发送到 python 脚本？我真的对此感到困惑！

索引.html：

```
<div id="MainArea">
  <p align="center">MY SEARCH ENGINE</p>
  <form name="form1" method="get" action="results.html">
    <label for="SearchBar"></label>
    <div align="center">
      <input name="query" type="text" id="SearchBar" value="" size = "100px"><br />
      <input name="submit" type="submit" value="Search">
    </div>
  </form>
  <p align="center">&nbsp;</p>

</div> 
```

结果.html

```
{{extend 'layout.html'}}
<h1>This is the default/results.html template</h1>
{{=BEAUTIFY(response._vars)}}

<div>{{=results}}</div> 
```

默认.py：

```
import urllib2

def index():
    return dict()

def results():
    address = "http://www.blekko.com/?q=%(query)s+/json&auth=<mykey>" % dict(query=request.vars.query)
    response = urllib2.urlopen(address)
    html=response.read()
    return html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:57:37.757

看起来您没有使用内置的表单机制。我很好奇——您究竟需要如何清理数据？

通常，您会创建一个控制器文件，其中包含一个构建表单的函数，并且还有一个分支来处理它。在您的数据模型中，您将指定可接受的输入，并在表单处理函数（控制器函数）中操作数据。

你也可以使用

```
form.process(..., onvalidation=some_func) 
```

onvalidation 是一个可以进一步处理表单的函数，在将值存储到 DB 之前创建/操作值（或者您根本不能将它们存储在 DB 中），并进行进一步的验证。

请参阅：[http ://web2py.com/books/default/chapter/29/7#onvalidation](http://web2py.com/books/default/chapter/29/7#onvalidation)

Web2py 表单一般会自行提交并设置会话密钥以防止重复提交等。您这样做的方式必须确保在没有会话的情况下使用 form.accepts(...) 或跳过 web2py form.accepts/form.process 并仅使用 request.vars.field_name_that_you_provided 来获取表单字段数据. 然后你必须自己验证数据。

我建议创建一个 web2py 模型（models/form.py），或者至少在负责显示和处理表单的控制器文件中使用 web2py 的 FORM 助手创建表单。

这是 web2py 方式——一个返回表单以填写或处理它的单个函数。如果一切正常，您可以使用重定向将它们发送到另一个页面。

```
def display_form():
    form = FORM('Your name:',
            INPUT(_name='name', requires=IS_NOT_EMPTY()),
            INPUT(_type='submit'))
    if form.process().accepted:
        session.flash = 'form accepted'
        redirect(URL('next'))
    elif form.errors:
        response.flash = 'form has errors'
    else:
        response.flash = 'please fill the form'
    return dict(form=form) 
```

另一种方法是：

```
def process_form():
   validated_data = dict()
   for k,v in request.vars.values(): # I think this works...
      if k == 'some_key':
         do_some_processing()
      ...
      validated_data[k] = some_func(v)
      ...
   # now everyhing is validated and ok, send the data on
   redirect('next_page', vars=validated_data) 
```

重定向会将经过验证的表单数据发送到下一个函数。如果您不需要将其发送到 web2py 函数，则执行 process_form 函数所需的任何函数。

有道理？

编辑：另一种说法是脚本内容应该在表单处理函数中执行。您可以定义由同一控制器文件中的另一个函数显式执行的控制器函数。它不会有关联的视图，也不会是一个独立的页面，而只是一个功能。

您也可以使用 execfile("path/to/file")。我建议将脚本放在 applications//private/ 中，并使用 request.folder 来获取应用程序所在的文件夹，然后再添加私有...所以类似于：

```
execfile(os.path.join(request.folder, 'private', 'script.py')) 
```

但是您必须验证是否可以找到正确的路径。

编辑（验证表单）：查看有关如何制作数据模型和使用表单/验证器的 web2py 书（[http://web2py.com/books/default/chapter/29/7](http://web2py.com/books/default/chapter/29/7)）。当您定义 web2py 数据模型时，您可以直接在字段定义中包含验证器。这样，数据库将知道它是整数还是字符串，并且您可以在输入上强制长度或正则表达式模式。优点是您创建的表单：

```
form = SQLFORM(db.some_table) 
```

甚至：form = SQLFORM.factory(Field('some_field', 'integer'), Field('some_str', 'string', requires=IS_ALPHANUMERIC))

验证非常简单——整数类型的字段将立即删除输入的任何非数字值，即使您修改了源代码或发送了带有错误值的 POST/GET 请求，form.process(...) 方法会使它无效并允许您轻松突出显示错误。

这是一个示例表单定义：

```
db.define_table('news_item',
  Field('title', 'string', label='Title', requires=IS_NOT_EMPTY()),
  Field('type', 'string', label='Type', requires=IS_IN_SET(news_types)),
  Field('pub_date', 'date', default=request.now),
  Field('post_date', 'date', default=request.now), # Set date defaults 
  Field('link', 'string', label='News Link', requires=IS_EMPTY_OR(IS_URL())),
  Field('img', 'upload', uploadfield='img_file', label='Story Title Image'),
  Field('img_file', 'blob', label='Story Title Image'),
  Field('tagline', 'text', label='Tagline', requires=IS_NOT_EMPTY()),
  Field('published', 'boolean', label='Published?', notnull=True, required=True),
) 
```

这将在程序前面定义的数据库中创建一个名为 news_item 的表 (db = DAL("...connection string") )，并允许您立即创建一个漂亮的表单。请注意，有许多选项参数。

您也可以跳过数据库并直接制作表格，但我会让您在文档中查找:)

# javascript - 使用 $index 和 if 绑定的 knockout.js

> ID：11318441
> 
> 赞同：84
> 
> 时间：2012-07-03T20:09:39.367
> 
> 标签：javascript, knockout.js

我试图根据 的值显示一些标记`$index`，我可以显示该值，但我似乎无法将它与`if`绑定一起使用，这里最好的方法是什么？

```
<!-- ko if: $index===0 -->
  <div>some mark up here</div>
<!-- /ko --> 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-07-03T20:30:30.297

$index 是一个可观察对象，而可观察对象是函数。当你在表达式中使用 observables 时，你必须使用 () 形式来访问值。

```
<!-- ko if: $index() === 0 --> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-15T15:36:30.210

从[淘汰赛绑定页面](http://knockoutjs.com/documentation/binding-context.html)

> $index（仅在 foreach 绑定中可用）
> 
> 这是由 foreach 绑定呈现的当前数组条目的从零开始的索引。与其他绑定上下文属性不同，$index 是一个可观察对象，并且会在项的索引更改时更新（例如，如果项被添加到数组中或从数组中删除）。

例子

```
<div data-bind="foreach: details.additionalDetails">
    <!-- ko if: $index() !== 0 -->
        <span> | </span>
     <!-- /ko -->
        <span data-bind="text: name"></span> <span data-bind="text: value"></span>
</div> 
```

结果是

```
Model #: UAI5021 | Catalog #: UIOY786 
```

# asp.net - Disabling the edit button in grid view when with the help of date field condition using asp.net

> ID：11318443
> 
> 赞同：1
> 
> 时间：2012-07-03T20:09:54.687
> 
> 标签：asp.net, oracle, oracle10g

I am new to the asp.net, and sorry for grammar mistakes.

I have 3 fields in my table, `name`, `age` and `created_date`. I used the grid view to display all the fields on a web form. Later, I added a `command` column and then converted it to a template field.

I need to disable the edit button based on `created_date`; i.e `if created_date + 5 > sysdate` then I need to disable the edit button.

How can I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:25:41.643

您可以在代码后面添加此代码，以实现网格视图的 RowDataBound 事件：

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs  e)
{
    // check if this row is on the edit state
    if (e.Row.RowState == DataControlRowState.Edit)
    {
        // get date_created from bind
        DateTime date_created = Convert.ToDateTime(DataBinder.Eval(e.Row.DataItem, "date_created"));

        // check if from this date more 5 days if greather than now
        if(date_created.AddDays(5) > DateTime.Now)
        {
            // disable button
            ((Button) e.Row.FindControl("btnEdit")).Enabled = false;
        }
    }
} 
```

在 asp.net 服务器标签上，您可以在 gridview 标签上引用此事件：

```
<asp:GridView ID="gv" runat="server" OnRowDataBound="gv_RowDataBound">
...
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:21:39.117

对于像这样的 asp.net 按钮可能会成功

```
<asp:Button ID="Edit" runat="server" Text="Edit" ... 
    Enabled='<%# ((DateTime)Eval("created_date")).AddDays(5) > DateTime.Now ? false : true %>'/> 
```

# matlab - Matlab Uitable Adding a logical column to existing table

> ID：11318444
> 
> 赞同：0
> 
> 时间：2012-07-03T20:09:57.540
> 
> 标签：matlab, user-interface, checkbox, matlab-uitable

I am using a UITABLE to display some data. After displaying the table i want to add a logical column to the end of the table. And depending on columns checked or unchecked future actions are taken. Any idea Guys?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:45:24.897

一个例子：

```
%# initial table
c1 = rand(10,3);
h = uitable('Units','normalized', 'Position',[0 0 1 1], 'Data',c1);

%# add new column of check boxes
c2 = c1(:,1)>0.5;
set(h, 'Data',[num2cell(c1) num2cell(c2)], ...
    'ColumnFormat',[repmat({[]},1,size(c1,2)),'logical'], ...
    'ColumnEditable',[false(1,size(c1,2)),true]) 
```

![截屏](../Images/07dc3fdeb98c0c3da9c1fb7a5a265115.png)

您可能想要处理[`CellEditCallback`](http://www.mathworks.com/help/techdoc/ref/uitableproperties.html#brgcv4s)执行自定义操作。

# uitableview - Subclassing UITableViewCell and handling UIButton within subclass

> ID：11318446
> 
> 赞同：0
> 
> 时间：2012-07-03T20:10:04.733
> 
> 标签：uitableview, uibutton, subclass

I understand how to get button clicks if I have a button within a row of UITableView but what I cannot figure out is the correct way to add a button to a UITableViewCell subclass and get the clicks for it within my UITableView class. I think I'm making the mistake of putting everything into the layoutSubviews method. Can somebody please point me in the right direction?

```
-(void) layoutSubviews 
{
//  UIButton *myButton1; <- This is declared as a property in my subclass header file

  [super layoutSubviews];

  //self.textLabel.frame = CGRectMake(0, 0, 40, 20);

  //        cell.textLabel.text = timeElapsed;
  self.textLabel.frame = CGRectMake( 5, 5, 80, self.frame.size.height - 10 );
  self.accessoryType = UITableViewCellAccessoryDisclosureIndicator;   

  // Don't need UIButton alloc because method below does it for us..
  myButton1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];

  //CGRect cellFrame = [self.tableView rectForRowAtIndexPath:indexPath];
  CGRect cellFrame = self.frame;

  myButton1.tag = idButton;

  int nButtonWidth  = 80;
  int nButtonHeight = 30;
  int nActualCellWidth = cellFrame.size.width - 40;
  int nButtonDeltaX = ( nActualCellWidth      - nButtonWidth  ) / 2;
  int nButtonDeltaY = ( cellFrame.size.height - nButtonHeight ) / 2;
  myButton1.frame = CGRectMake( nButtonDeltaX, nButtonDeltaY, nButtonWidth, nButtonHeight );      

  [myButton1 setTitle:@"OK" forState:UIControlStateNormal];

  // PDS: Add delaget for stopwatch clicking..
//  [myButton1 addTarget:self action:@selector(buttonClickedStopWatch:) forControlEvents:UIControlEventTouchUpInside];  

  [self.contentView addSubview:myButton1];      
  [self.contentView bringSubviewToFront:myButton1];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:34:58.220

首先，layoutSubviews 可能会被多次调用，因此这确实不是创建按钮并将其添加到视图层次结构的好地方。这将导致每次都创建一个新按钮。您应该在指定的初始化程序中创建按钮，并且只使用 layoutSubviews 来设置框架等。

其次，UITableView 的实例通常不是处理按钮点击的好地方。这通常是 UIViewController 子类的任务。

无论您选择哪个类来处理点击操作，首先要在单元格中为您的自定义按钮添加一个属性。然后让 UITableView 或 UIViewController 通过访问属性并将目标设置为 self 来添加该控件事件的操作目标。

# c#-4.0 - Firebird Prepared Statements

> ID：11318447
> 
> 赞同：0
> 
> 时间：2012-07-03T20:10:04.847
> 
> 标签：c#-4.0, firebird2.5

Can anyone advise if Firebird will cache query plans across sessions and, therefore, if FbCommand.Prepare() should be used or is useful?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:05:13.103

Firebird 保持查询准备就绪，直到它未准备好或会话关闭。“Firebird 不会在连接之间保留准备好的查询的缓存”（来自 Ann Harrison 在[Re: [firebird-support] Firebird Prepared Queries](http://fb-list-archive.s3-website-eu-west-1.amazonaws.com/firebird-support/2010/2/106941.html)中的一条消息）

# java - java.lang.Process Kill not done

> ID：11318449
> 
> 赞同：0
> 
> 时间：2012-07-03T20:10:11.087
> 
> 标签：java, eclipse, swt

I am creating a SWT Application which invokes an external executable (say abc.exe) in `java.lang.Process`. This new process is created on 'Start' button on my composite.

The problem is that if the executbale *abc.exe* hangs; my entire SWT shell hangs! So I thought of adding new button called 'Stop' so the user can easily kill the hung process, but since everything executes in a single thread I am not able to press 'Stop' also.

Can anyone tell me/show me how best way I can solve this problem.

Many Thanks, Tor

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:19:56.360

您将需要在后台线程中运行该进程。问题是您在同一个线程中同时运行 SWT 应用程序和 abc.exe。会发生什么，是进程轮流请求/响应，并且 abc.exe 进程没有响应，所以它坐在那里等待 - 如果 abc.exe 正在执行长时间运行的算法，也会发生同样的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:35:31.203

进程终止实际上在java中没有实现，因为它非常危险

# vb.net - Asynchronous function and Session State

> ID：11318450
> 
> 赞同：0
> 
> 时间：2012-07-03T20:10:25.177
> 
> 标签：vb.net, web-services, asynchronous, delegates

In my WebService I'm trying to call an assynchronous function using delegate. The problem is that the session is lost when the function is called. Is there anyway to keep the Session state when the asynchronous function is called?

Thanks a lot,

Rafael

# c# - C# OpenPop.net Getting attachments from a E-mail

> ID：11318453
> 
> 赞同：1
> 
> 时间：2012-07-03T20:10:28.423
> 
> 标签：c#, email, attachment, openpop

I'm here asking if it is possible to list all the attachments in a E-mail, show them in a list box, and only retrive them (on a program in the OS that opens that extension) once the user clicks on it.

If it's possible, please explain how. I'm using OpenPop.net and C#.

Thanks in advance.

João Borrego.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T20:47:36.567

你当然可以。

使用该[`Message.FindAllAttachments`](http://hpop.sourceforge.net/documentation/OpenPop~OpenPop.Mime.Message.FindAllAttachments.html)方法获取`List<MessagePart>`对`Message`. 您可以使用该[`MessagePart.FileName`](http://hpop.sourceforge.net/documentation/OpenPop~OpenPop.Mime.MessagePart.FileName.html)属性来填充您的 ListBox（但请注意重复名称）。

我不确定您如何通过用户与 ListBox 的交互来下载附件。一些想法浮现在脑海中，但通常您可以使用[File.WriteAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)方法下载附件，并传入[`Message.Body`](http://hpop.sourceforge.net/documentation/OpenPop~OpenPop.Mime.MessagePart.Body.html)该方法`bytes`参数的属性。

我最近在一个项目中使用了[OpenPop](http://hpop.sourceforge.net/examples.php) ，对此我很满意。

# uitableview - 来自 UITableView 中的静态 UITableViewCell 的 UITextField 值未显示

> ID：11318456
> 
> 赞同：2
> 
> 时间：2012-07-03T20:10:41.020
> 
> 标签：uitableview, uitextfield, nsarray

我在保存方法中有以下代码：

```
NSArray *cells = [tbleView visibleCells];
UITableViewCell *aCell;
UITextField *medField;

for (int i=1; i<cells.count; i++) //0 = text 
{
    aCell = (UITableViewCell *) [cells objectAtIndex:i];
    medField = (UITextField *)[[aCell contentView] viewWithTag:i];
    NSLog(@"%@", medField.text);
} 
```

在我的 TableView 中，我有 7 个静态单元格，第一行和最后一行/单元格没有文本字段，单元格 1-5 有一个`UITextField`. 当我在字段中输入文本时，调试器显示一切正常，直到我在第 5 个单元格中输入文本，然后所有以前有效的值（包括 5）都返回 null。一切都很好，直到我打到第 5 个牢房。我确保标签是正确的，尝试切割 cells.count -1，尝试制作 i<=cells.count，它必须是简单的我在这里做错了，但我现在迷失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:05:13.883

这个问题的答案就在这里： [Load all cells in UITableView before scrolling](https://stackoverflow.com/questions/9414746/load-all-cells-in-uitableview-before-scrolling)

问题是键盘隐藏了单元格。因此细胞是不可见的。

伙计，我讨厌这样的问题！希望这篇文章可以帮助别人。

# jquery - jQuery Cycle 插件 - 一页网站上的多个简单幻灯片/实例

> ID：11318464
> 
> 赞同：0
> 
> 时间：2012-07-03T20:11:13.117
> 
> 标签：jquery, jquery-cycle, jquery-isotope, custom-data-attribute

我正在使用 David De Sandro 的 jQuery Isotope 插件开发一个单页网站。在 7 Isotope 元素中，我以基本方式运行 Cycle 幻灯片插件（无点击、分页、暂停、悬停等）。它有效 - 但我怀疑我没有很有效地实现这一点。

HTML（7 种同位素元素之一）

```
<div class="content">
  <div class="slideshow preview1">
  <img src="media/cl_t_preview_0.jpg" />
  <img src="media/cl_t_preview_1.jpg" />
  <img src="media/cl_t_preview_2.jpg" />
  </div>
</div> // and 6 more... 
```

CSS（适用于所有 7 个幻灯片）

```
.slideshow.preview1, .slideshow.preview2, .slideshow.preview3, .slideshow.preview4, .slideshow.preview5, .slideshow.preview6, .slideshow.preview7 {
position: relative;
overflow: hidden;
height: 252px;
width: 252px;
}
.slideshow.preview1 img, .slideshow.preview2 img, .slideshow.preview3 img, .slideshow.preview4 img, .slideshow.preview5 img, .slideshow.preview6 img, .slideshow.preview7 img {
display: block;
} 
```

JS（7 个实例 - 这是重复且无效的）

```
$(document).ready(function() {

    $('.slideshow.preview1').cycle({
    fx: 'scrollHorz',
    random: 1,
    speed: 300,
    timeout: 6000,
    delay: -1000
});
    $('.slideshow.preview2').cycle({
    fx: 'scrollHorz',
    random: 1,
    speed: 300,
    timeout: 6000,
    delay: -2000
}); // and five more calls...
}); 
```

那么，我怎样才能使 JS 部分比我现在做的那样顽固地重复 7 次更有效呢？不知何故，我应该只传递类名和 7 个不同的延迟值......

[在这里](http://jquery.malsup.com/cycle/int.html "这里")，Michael Malsup 使用了一种带有表格的技术（我不明白）通过 HTML 本身传递必要的参数。这是最好的方法吗？我刚刚看到了 HTML5 数据属性的使用；也许这是删除我的 JS 冗余的最佳实践方式？

```
<div class="content">
  <div class="slideshow preview" data-delay="-2000"> // each occurrence has its own delay
      <img src="media/prevslide_3.jpg" alt="Img 1" />
      <img src="media/prevslide_4.jpg" alt="Img 2" />
      <img src="media/prevslide_5.jpg" alt="Img 3" />
  </div>
</div>

$('.slideshow.preview').cycle({ // and the call needs to occur only once
fx: 'scrollHorz',
random: 1,
speed: 300,
timeout: 6000,
delay: -2000 // but how to pass the data-delay value in here?
}); 
```

非常感谢您！

# javascript - Node.js 中的意外 vm.runInThisContext 控制流

> ID：11318466
> 
> 赞同：0
> 
> 时间：2012-07-03T20:11:27.253
> 
> 标签：javascript, node.js

我正在编写一个如下所示的 Node.js 脚本：

```
var vm = require('vm');
var fs = require('fs');

vm.runInThisContext("console.log('started1');" + fs.readFileSync('library1.js') + "console.log('ended1');");

vm.runInThisContext("console.log('started2');" + fs.readFileSync('library2.js') + "console.log('ended2');")); 
```

Library1.js 和 library2.js 最初是为 Web 编写的，因此据我所知，它们不会执行任何文件系统调用或任何其他会意外异步的操作。

Library1.js 设置了 Library2.js 需要的一些全局变量。

输出是（翻译成这个例子）：

```
started1
ended1
started2
ERROR, global variable was undefined and a property access caused the script to die 
```

如果我在 library1 中手动插入另一个注释，其中设置了全局变量（它位于 library1 中的另一个函数内，在 library1 结束之前立即调用），上面写着“我已被设置”，我得到这个（如，没有变化） ：

```
started1
ended1
started2
ERROR, global variable was undefined and a property access caused the script to die 
```

如果我手动插入甚至一秒的 setTimeout，那么我会得到：

```
started1
ended1
I've been set
started2
ended2 
```

这里可能会发生什么？显然有一些我没有预料到的异步行为。会是什么呢？对我来说奇怪的是 library1 脚本实际上完全结束了，我仍然得到这个错误。如果生成了一些线程来处理 library1 中的函数调用，这种行为将是有意义的，但我的理解是，虽然 Node.js 是非阻塞的，但它不会为每个函数调用生成新线程。我错了吗？它是单线程但所有调用函数的时间共享吗？在这一点上我只是猜测，试图理解这种行为。

编写以下内容只是为了测试 Node 是否像我想的那样工作，而且似乎确实如此：

```
function x() {
    for ( var i = 0; i < 100000; i++ ) {
        console.log('x');
    }
    console.log('loopedX');
}

function y() {
    console.log('startedY');
}

x();
y(); 
```

这会输出很多 'x' 后跟 'startedY'，这似乎证实 Node 在移动到下一个函数之前完成了一个函数的工作（直到它返回）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:59:35.317

好的，所以这最终不是 Node.js 中的意外行为，只是大型库 (YUI) 中的意外（未知）行为。YUI 做了一些我没想到的异步加载，当变量被分配给它时，它会抛出。仍在寻找解决方案，但作为 YUI 问题而不是 Node.js 问题。

我建议将这个线程留在这里，以防万一有人遇到同样的问题，以便他们看到可能是他们的库而不是 Node.js 导致了问题。

# c - 如何在 C 中从/到不同的拱门运行代码？

> ID：11318473
> 
> 赞同：-2
> 
> 时间：2012-07-03T20:11:50.007
> 
> 标签：c, architecture

我开发了一个小型（非常小的）ftp 客户端和服务器。**只有**当它们使用相同的拱门时
，这两个程序才能编译和运行良好。

 **1.  如果客户端是 Ubuntu amd64 而服务器是 Ubuntu i386 我有一个段错误（我认为这是一个指针问题）
2.  如果客户端是 Ubuntu amd64 而服务器是 Ubuntu amd64 一切正常
3.  如果客户端是 Ubuntu i386 而服务器是 Ubuntu i386 一切正常

我怎样才能让这两个程序在不同的拱门上工作？
是代码问题吗？如果是这样，我该怎么办？
提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T20:26:31.437

这可能是各种类型的大小不同，您正在通过网络发送和接收它们。由于大小不匹配，协议将变得不同步。

Linux 使用x86_64的[LP64 数据模型](http://en.wikipedia.org/wiki/LP64)`int`，因此仍然是 32 位，但是`long`64 位。在 x86`long`上是 32 位。

`stdint.h`幸运的是，C 标准在头文件中定义了几种固定宽度的整数类型。如果包含，则可以使用无符号类型和有符号类型，其中*n*为 8、16、32 或 64。网络协议要考虑的另一件事是字节顺序。POSIX 提供函数、、和，它们分别将 32 位和 16 位整数从主机顺序转换为网络顺序，反之亦然。`uint*n*_t``int*n*_t`*`htonl``htons``ntohl``ntohs`*

 *编辑：

正如可变长度编码器所指出的，发送整个结构也是不可移植的（尽管它在 x86 和 x86_64 之间）。如果您通过网络发送一个结构，您应该一次一个成员地发送它，并分配到接收端的适当字段中。

编辑2：

`size_t`也不是可移植的数据类型。您应该选择适合协议的明确大小的类型。大概`uint32_t`是个不错的选择。

另外，由于所有的大小修饰符`printf`都是基于标准的`short`//类型`int`，`long`你需要使用宏`<inttypes.h>`来制作格式字符串。例如：

```
#include <inttypes.h>

/* ... */

int32_t signed32;
uint16_t unsigned16;

printf("Signed 32 is %"PRIu32" and unsigned 16 is %"PRId16"\n", signed32, unsigned16); 
```

您的系统可能在这些头文件上有手册页（我的 fedora 系统有），因此您可以在命令提示符下使用

```
man stdint.h 
```

和

```
man inttypes.h 
```

获取有关这些标头中定义的类型、宏和函数的更多信息。***

# facebook - C# SDK 版本 6.0.20 - (OAuthException - #190) 验证访问令牌时出错

> ID：11318474
> 
> 赞同：1
> 
> 时间：2012-07-03T20:11:59.263
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, facebook-login

我正在使用 Facebook C# SDK 6.0.20 版对用户进行身份验证。

它对我来说很好，我能够获得用户的名字和姓氏。但是当我稍后尝试时，我得到了访问令牌，但`fbClient.Get(“me”)`失败并出现以下错误：

> (OAuthException – #190) 验证访问令牌时出错：会话与当前存储的会话不匹配。这可能是因为用户在创建会话后更改了密码，或者 Facebook 出于安全原因更改了会话。

请帮忙。

**当用户从身份验证对话框**重定向回来时，我运行以下代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request.Params["code"] != null)
    {
      Facebook.FacebookClient fbClient = new Facebook.FacebookClient(GetAccessToken());

        dynamic me = fbClient.Get("me");

        string firstName = me.first_name;
        string lastName = me.last_name;
        string email = me.email;
        string userID = me.id;
        string gender = me.gender;
        string dob = me.birthday;
        string locale = me.locale;
        string mStatus = me.relationship_status;            
    }

}

private string GetAccessToken()
{
    if (HttpRuntime.Cache["access_token"] == null)
    {
        Dictionary<string, string> args = GetOauthTokens(Request.Params["code"]);
        HttpRuntime.Cache.Insert("access_token", args["access_token"], null, DateTime.Now.AddMinutes(Convert.ToDouble(args["expires"])), TimeSpan.Zero);
    }

    return HttpRuntime.Cache["access_token"].ToString();
}

private Dictionary<string, string> GetOauthTokens(string code)
{
    Dictionary<string, string> tokens = new Dictionary<string, string>();

    string clientId = "xxxxxxxxxxxxxxxxxx";
    string redirectUrl = "http://localhost:51215/TestFBWebSite/FacebookRedirect.aspx";
    string clientSecret = "xxxxxxxxxxxxxxxxxxxxxx";

    string url = string.Format("https://graph.facebook.com/oauth/access_token?  client_id={0}&redirect_uri={1}&client_secret={2}&code={3}",
                    clientId, redirectUrl, clientSecret, code);

    HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
    using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
    {
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string retVal = reader.ReadToEnd();

        foreach (string token in retVal.Split('&'))
        {
            tokens.Add(token.Substring(0, token.IndexOf("=")),
                token.Substring(token.IndexOf("=") + 1, token.Length - token.IndexOf("=") - 1));
        }
    }

    return tokens;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:07:07.753

fbClient.Get("me") 确实有效（没有前面的“/”），这就是我们正在使用的并且它可以正常工作。

```
string redirectUrl = "http://localhost:51215/TestFBWebSite/FacebookRedirect.aspx"; 
```

我注意到这部分 - 我发现在使用 localhost（或 127.0.0.1）时集成不起作用，我们通过将“test.mydomain.com”的主机记录设置为指向 127.0.0.1 来解决这个问题

在我们的实时环境中，我们也偶尔会遇到 #190 错误。奇怪的是，只有在 Facebook 刚刚对用户进行身份验证后才会触发生成错误的位置，因此身份验证令牌不应该已经过期！我们正在编写代码来处理这个错误（即不要在我们的系统上验证用户身份），但是到目前为止，我认为导致问题的两种可能性是：

1.  我们在获取令牌后调用 Facebook 的速度太快了 - 如果 Facebook 将新的 Auth 令牌传递到所有相关服务器时出现复制延迟，则有可能发生这种情况
2.  Facebook 的一般内部错误

我认为这可能是选项 1，但是我还没有找到足够的信息来支持它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:56:54.833

我认为一开始有语法错误。

```
dynamic me = fbClient.Get("/me");

        string firstName = me.first_name;
        string lastName = me.last_name;
        string email = me.email;
        string userID = me.id;
        string gender = me.gender;
        string dob = me.birthday;
        string locale = me.locale;
        string mStatus = me.relationship_status; 
```

试试这个代码使用“\me”而不是“me”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T22:52:09.773

如果您向陌生人发送更多好友请求，您的帐户将被阻止并出现 190 错误代码。所以取消请求并再次登录。

# php - 带有 cURL、file_get_contents() 和 fopen() 的标头响应“403 Forbidden”

> ID：11318476
> 
> 赞同：0
> 
> 时间：2012-07-03T20:12:32.890
> 
> 标签：php

我希望你能帮助我。该网站目前在线，我可以正常访问，但我似乎无法理解为什么这不起作用。

`file_get_contents()`并`fopen()`返回一个错误，说明如下：

```
PHP Warning:  file_get_contents(http://www.hackforums.net): failed to open stream: HTTP request failed! HTTP/1.1 403 Forbidden in /host/Users/Phizo/Desktop/stalker.php on line 29 
```

现在我刚开始使用 cURL，因为我想尝试绕过这个 403，也没有运气。

```
$handle = curl_init();
$file = fopen('source.txt', 'w');

curl_setopt($handle, CURLOPT_URL, 'http://www.hackforums.net/');
curl_setopt($handle, CURLOPT_CUSTOMREQUEST, 'GET');
curl_setopt($handle, CURLOPT_HEADER, true);
curl_setopt($handle, CURLOPT_AUTOREFERER, true);
curl_setopt($handle, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1');
curl_setopt($handle, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($handle, CURLOPT_FILE, $file);

curl_exec($handle);

print_r(curl_getinfo($handle));

curl_close($handle);
fclose($file); 
```

输出以下错误：

```
Fatal error: Maximum execution time of 30 seconds exceeded in D:\Hosting\6514439\html\zeonsglobal\admin\press_uploads\stalker.php on line 29 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:17:21.207

此代码对我有用，您无需执行自定义请求即可实现您想要的。

```
$handle = curl_init();

curl_setopt($handle, CURLOPT_URL, 'http://www.hackforums.net/');
curl_setopt($handle, CURLOPT_HEADER, true);
curl_setopt($handle, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1');
curl_setopt($handle, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, 1);

$result = curl_exec($handle);

var_dump($result);

curl_close($handle); 
```

您获得 403 的可能原因是 fopen 正在传递的用户代理。如果您从 curl 请求中删除用户代理，您也会收到 403 错误。

我添加了 curl 选项`CURLOPT_RETURNTRANSFER`，以便在您调用时以字符串形式返回响应`curl_exec()`。

希望有帮助。

# amazon - CrowdFlower/Mechanical Turk 的两组答案选择

> ID：11318478
> 
> 赞同：0
> 
> 时间：2012-07-03T20:12:43.380
> 
> 标签：amazon, survey, mechanicalturk, multiple-choice

在我的调查中，有一半的问题会有一组多项选择（称之为 A）；另一半将有另一组多项选择（称为 B）。如何在 CrowdFlower 上执行此操作？

我是否应该创建一个名为“答案类型”的列（指定为 A 或 B），然后在 CML（CrowdFlower 标记语言）中创建一个可以使用 JavaScript 抓取和操作的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:46:34.747

正如我在您的其他问题中提到的，如果需要，您可以使用 Liquid 在没有 Javascript 的情况下执行此操作。显然，如果您想走这条路，Javascript 也为您提供了很大的灵活性。

在这种情况下，您可以按照您的描述定义一个 answer_type 列，然后编写：

```
{% if answer_type == "1" %}
one
{% else %}
two
{% endif %} 
```

Liquid 也有 case 语句。

# ruby-on-rails - Rails 3：POST请求的参数未转换为HashWithIndifferentAccess

> ID：11318481
> 
> 赞同：1
> 
> 时间：2012-07-03T20:13:17.937
> 
> 标签：ruby-on-rails, jmeter

我正在使用 JMeter (2.3.4x3.8) 在我的应用程序上运行一些负载测试。我遇到了一个问题，即发布的参数未转换为 ActiveSupport::HashWithIndifferentAccess（与从浏览器发布 POST 请求时相比）。我查看了我的 Rails 控制台，params 只是一个字符串。我已经设置了 Accept、X-Requested-With、Content-Type 等，但它仍然没有解决我的问题。有没有人有任何见解？

# javascript - 不在前面时查找文本

> ID：11318489
> 
> 赞同：-1
> 
> 时间：2012-07-03T20:13:53.487
> 
> 标签：javascript, jquery

如果之前没有，我需要找出`<img>`我的 HTML 中标记`<br/>`之前的内容。如果`<img>`在它之前有其他内容，那么我需要`<br/>`在它之前添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:39:08.833

考虑这个 html 代码：-（这个解决方案使用 JQuery！）

```
<h1><img src="#"/><h1>
<br/><img src="#"/> 
```

现在在一种情况下，您需要先获取元素`<img>`

```
 $(document).ready(
function(){
 $('img').each(function(){
  if($(this).prev()==$('br'))
   {
      $(this).prev().replaceWith('');
   }
   if($(this).prev()!=$('br)')
        {
          $(this).prev().replaceWith('br');
        }
});

}); 
```

猜猜这会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:34:10.020

一个更简单和更快的版本

```
$(document).ready(function(){

    $('img').each(function(){
         var prev = $(this).prev();
         if (prev[0] && prev[0].nodeName.toUpperCase() !== 'BR') {
            prev.after('<br>')
         }
   })

}) 
```

# delphi - 如何在 TForm 中正确使用 TOleContainer 中的 Word，布局方式？

> ID：11318492
> 
> 赞同：7
> 
> 时间：2012-07-03T20:14:11.033
> 
> 标签：delphi, layout, ms-word, ole

我想知道在 TForm 中嵌入和控制 MS Word 的建议方法是什么？目前，我（1）在 TForm 上放了两个 TPanel。TPanel`alBottom`有一个 TButton，`alClient`TPanel 有一个`alNone`TOleContainer。(2) 在 TMainForm.FormCreate 事件处理程序中设置布局。

问题是 MS Word 喜欢占用其父窗体的所有空间。只有如下所示的第四种方式似乎可以提供可接受的布局。基于反复试验，似乎有必要使用子表单而不是 TPanel 来托管 TOleContainer。（另外，Windows.SetParent 似乎是必要的。）我想知道子表单是否是正确的方法？

PS：德尔福 XE，Word 2010，Windows 7

PS：与“托管外部应用程序”相关的网页：

[Binh Ly 的网站](http://www.techvanguards.com/)

[黛博拉的网站](http://www.djpate.freeserve.co.uk/Automation.htm)

[如何外壳到另一个应用程序并让它以德尔福形式出现](https://stackoverflow.com/questions/796883/how-to-shell-to-another-app-and-have-it-appear-in-a-delphi-form)

[重访 TOleContainer](http://www.delphigroups.info/2/b3/264586.html)

[在delphi中打开word文档？](http://answers.yahoo.com/question/index?qid=20091023063914AA1rIkg)

[Delphi & Word (SimpChn)](http://hi.baidu.com/firebirdrui/blog/item/b78519e6213d7429b838203a.html)

PS：与“Form in Panel（子表单）”相关的网页：

[如何在 Panel 内制作透明表单？](https://stackoverflow.com/questions/10742819/how-to-make-a-transparent-form-inside-panel)

[Delphi - OleContainer - PowerPoint - 自动播放](https://stackoverflow.com/questions/5679935/delphi-olecontainer-powerpoint-autoplay)

[FreePascal/Lazarus MultiDoc](http://wiki.freepascal.org/MultiDoc)

[面板中的 TForm](http://www.delphigroups.info/2/4/708423.html)

[如何创建一个包含多个“子”表单的delphi表单，这些表单可以移动/调整大小并显示为激活状态](https://stackoverflow.com/questions/5729295/how-to-create-a-delphi-form-containing-multiple-child-forms-that-can-be-moved/5730918#5730918)

### 示例代码

```
unit uMainForm;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, OleCtnrs, ExtCtrls, StdCtrls;

type
  TMainForm = class(TForm)
    PanelOle: TPanel;
    PanelBtn: TPanel;
    OleContainer1: TOleContainer;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainForm: TMainForm;

implementation

{$R *.dfm}

procedure TMainForm.FormCreate(Sender: TObject);
var
  OleForm: TForm;
begin
////
//// 1
////
//  OleContainer1.Parent := PanelOle;
//  OleContainer1.Align := alClient;
//
////
//// 2
////
//  Windows.SetParent(OleContainer1.Handle, PanelOle.Handle);
//  OleContainer1.Align := alClient;
//
////
//// 3
////
//  OleForm := TForm.Create(Self);
//  OleForm.Parent := PanelOle;
//  OleForm.Align := alClient;
//  OleForm.Visible := True;
//  OleContainer1.Parent := OleForm;
//  OleContainer1.Align := alClient;
//
////
//// 4 Works!
////
//  OleForm := TForm.Create(Self);
//  Windows.SetParent(OleForm.Handle, PanelOle.Handle);
//  OleForm.Align := alClient;
//  OleForm.Visible := True;
//  OleContainer1.Parent := OleForm;
//  OleContainer1.Align := alClient;
//
////
//// 5
////
//  OleForm := TForm.Create(Self);
//  OleForm.Parent := PanelOle;
//  OleForm.Align := alClient;
//  OleForm.Visible := True;
//  Windows.SetParent(OleContainer1.Handle,OleForm.Handle);
//  OleContainer1.Align := alClient;
//
////
//// 6
////
//  OleForm := TForm.Create(Self);
//  Windows.SetParent(OleForm.Handle, PanelOle.Handle);
//  OleForm.Align := alClient;
//  OleForm.Visible := True;
//  Windows.SetParent(OleContainer1.Handle,OleForm.Handle);
//  OleContainer1.Align := alClient;

end;

procedure TMainForm.Button1Click(Sender: TObject);
var
// Declare the item to be a generic OleVariant to force late binding
  Ds: OleVariant;
  D: OleVariant;
begin
  OleContainer1.CreateObjectFromFile('sample.docx', False);

  OleContainer1.Run;

  OleContainer1.AutoActivate := aaManual;
  OleContainer1.DoVerb(ovShow);  // not in FormCreate, in or after FormShow

  Ds := OleContainer1.OleObject.Application.Documents;
  Caption := IntToStr(Ds.Count);
end;

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:44:33.183

子表单是一种正确的方法。我们在生产环境中使用了这种方法，并且效果很好。我们在一个面板中托管了我们的“子”表单。但是，我们修改了 TOleContainer 和 TOleForm 并带有一个标志是使用父窗体还是最顶层的窗体：

```
procedure TOurOleContainer.InitObject;
...
begin
  if FDrawInTopForm then
    DocForm := GetParentForm(Self)
  else
    DocForm := TCustomForm(Parent);
... 
```

其中 FDrawInTopForm 是我们引入的一个属性。我们还修改了：

```
function GetVCLFrameForm(Form: TCustomForm; DrawInTopForm: Boolean): IVCLFrameForm;
begin
  if Form.OleFormObject = nil then TOleForm.Create(Form, DrawInTopForm); 
  Result := Form.OleFormObject as IVCLFrameForm;
end; 
```

不幸的是，由于与客户的协议，我无法在此处发布完整的解决方案。

# ios - 如何使用 Speakhere 示例中的 AQRecorder

> ID：11318493
> 
> 赞同：2
> 
> 时间：2012-07-03T20:14:12.770
> 
> 标签：ios, audioqueue

我已经从 speakHere 示例中复制了 AQRecorder 以及所有其他需要的文件。这样做之后，由于编译错误，我将链中使用它的所有类重命名为 .mm，现在似乎已解决。但是我仍然无法弄清楚如何使用 AQRecorder 类。该示例中还有另一个名为 SpeakHereController 的类，但它也不起作用。这是我最近尝试的代码：

```
#import "AQRecorder.h"

    AQRecorder recorder;
    [recorder startRecord]; 
```

> 错误：错误的接收器类型“AQRecorder”

我知道这不起作用有几个原因，一个它没有调用构造函数，我相信这应该是一个指针。我有很多不同的变化，就像我说的，我也尝试过使用 SpeakHereController：

```
 SpeakHereController * recorder;
    recorder = [[SpeakHereController alloc]init];
        [recorder startRecord]; 
```

但是，这会产生错误：

> 架构 i386 的未定义符号：“AQPlayer::StopQueue()”，引用自：-[SpeakHereController stopPlayQueue] in SpeakHereController.o
> 
> “AQPlayer::PauseQueue()”，引用自：-[SpeakHereController pausePlayQueue] in SpeakHereController.o
> 
> “AQPlayer::DisposeQueue(unsigned char)”，引用自：-[SpeakHereController stopRecord] in SpeakHereController.o
> 
> “AQPlayer::CreateQueueForFile(__CFString const*)”，引用自：-[SpeakHereController stopRecord] in SpeakHereController.o
> 
> “AQPlayer::StartQueue(signed char)”，引用自：-[SpeakHereController play:] in SpeakHereController.o interruptListener(void*, unsigned long) in SpeakHereController.o
> 
> “AQPlayer::AQPlayer()”，引用自：-[SpeakHereController awakeFromNib] in SpeakHereController.o
> 
> “AQPlayer::~AQPlayer()”，引用自：-[SpeakHereController dealloc] in SpeakHereController.o

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:00:00.630

我最终使用了这个

```
 SpeakHereController * recorder;
    recorder = [[SpeakHereController alloc]init];
    [recorder awakeFromNib]; 
```

但是我只需要记录器，为此我必须从文件中注释掉所有 AQPlayer 引用。无论出于何种原因，它的播放方法都有一堆链接器错误。

调用 awakeFromNib 的原因是该方法很像 init，初始化 AQRecorder/AudioQueue 的所有设置

# jakarta-ee - JBoss 6 中 DatabaseServerLoginModule 的登录问题

> ID：11318494
> 
> 赞同：0
> 
> 时间：2012-07-03T20:14:17.920
> 
> 标签：jakarta-ee, login, jboss, jboss6.x, jaas

当我尝试使用[DatabaseServerLoginModule](http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html_single/index.html#sect-DatabaseServerLoginModule)登录时，我得到一个**[ServeletException: Failed to authenticate a principal](http://pastebin.ca/2166774)**。我猜问题是如何将密码写入数据库或角色查询不正确。在这一点上，我当然可以使用有关如何进行故障排除的建议。这是我的设置：

**登录-config.xml**

```
<application-policy name = "Avengers">
  <authentication>
    <login-module code = "org.jboss.security.auth.spi.DatabaseServerLoginModule" flag = "required">
       <module-option name = "dsJndiName">java:/jdbc/thor_ds</module-option>
       <module-option name = "principalsQuery">SELECT password FROM usertable WHERE username = ?</module-option>
       <module-option name="rolesQuery" value="SELECT groupid, 'Roles' FROM grouptable WHERE username=?" />
       <!--<module-option name="rolesQuery" value="SELECT gt.groupid as 'userRoles', gt.groupid as 'Roles' FROM grouptable as gt WHERE username=?" />-->
       <module-option name="hashAlgorithm">MD5</module-option>
       <module-option name="hashEncoding">base64</module-option>
    </login-module>
  </authentication>
</application-policy> 
```

**jboss-web.xml**

```
<jboss-web>
  <context-root>/Avengers</context-root>
  <security-domain>java:/jaas/Avengers</security-domain>
</jboss-web> 
```

**mysql-init.sql**

```
create table usertable (
    username varchar(128) NOT NULL PRIMARY KEY,
    password varchar(128) NOT NULL,
    email varchar(128) NOT NULL,
    firstname varchar(128) NOT NULL,
    lastname varchar(128) NOT NULL
);

create table grouptable(
    username varchar(128) NOT NULL,
    groupid  varchar(128) NOT NULL,
    CONSTRAINT GROUP_PK PRIMARY KEY(username, groupid),
    CONSTRAINT USER_FK FOREIGN KEY(username) REFERENCES usertable(username)
        ON DELETE CASCADE ON UPDATE RESTRICT
);

insert into usertable(username,password,email,firstname,lastname) 
    values ('admin', '21232f297a57a5a743894a0e4a801fc3','','','');
insert into grouptable(username,groupid) values ('admin', 'USER');
insert into grouptable(username,groupid) values ('admin', 'ADMIN'); 
```

**来自web.xml**的片段

 **```
<security-constraint>
    <display-name>Admin</display-name>
    <web-resource-collection>
        <web-resource-name>Admin Views</web-resource-name>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>USER</role-name>
        <role-name>ADMIN</role-name>
    </auth-constraint>
</security-constraint>
<security-constraint>
    <display-name>Compass Web</display-name>
    <web-resource-collection>
        <web-resource-name>Monitoring Module</web-resource-name>
        <url-pattern>/monitor/*</url-pattern>
    </web-resource-collection>
    <web-resource-collection>
        <web-resource-name>Core Web Module</web-resource-name>
        <url-pattern>/main/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>USER</role-name>
        <role-name>ADMIN</role-name>
    </auth-constraint>
</security-constraint>
<security-constraint>
    <display-name>Login</display-name>
    <web-resource-collection>
        <web-resource-name>Login Pages</web-resource-name>
        <url-pattern>/login/*</url-pattern>
    </web-resource-collection>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>avengers</realm-name>
    <form-login-config>
        <form-login-page>/login/login.xhtml</form-login-page>
        <form-error-page>/login/error.xhtml</form-error-page>
    </form-login-config>
</login-config>
<security-role>
    <description/>
    <role-name>ADMIN</role-name>
</security-role>
<security-role>
    <description/>
    <role-name>USER</role-name>
</security-role> 
```

我的 UserBean.login()

```
public String login() {

    System.out.println("user "+username+" is attempting to login...");

    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();
    try {
        request.login(this.username, this.password);
        this.cUser = Utils.getEntityManager().find(MyUser.class, username);
        System.out.println("User "+username+" successfully logged in...");
    } catch (ServletException e) {
        // Handle unknown username/password in request.login().
        context.addMessage(null, new FacesMessage("Invalid Login Credentials"));
        System.err.println("Invalid Login Credentials");
        e.printStackTrace();

        return "/login/error.xhtml";
    }

    return "/main/index.xhtml";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:34:04.710

[我能够在jboss as forums](https://community.jboss.org/message/746700#746700)上获得这方面的帮助。我的解决方案是从以下位置修改角色查询的标记：

```
<module-option name="rolesQuery" 
    value="SELECT groupid, 'Roles' FROM grouptable WHERE username=?" /> 
```

对此：

```
<module-option name="rolesQuery">
   SELECT groupid, 'Roles' FROM grouptable WHERE username=?
</module-option> 
```

我还必须将编码样式更改为**HEX**。这是我的工作**login-config.xml**。

```
<application-policy name="Avengers">
    <authentication>
       <login-module code="org.jboss.security.auth.spi.DatabaseServerLoginModule" flag = "required">
          <module-option name="dsJndiName">java:/jdbc/thor_ds</module-option>
          <module-option name="principalsQuery">SELECT password FROM usertable WHERE username = ?</module-option>
          <module-option name="rolesQuery">SELECT groupid, 'Roles' FROM grouptable WHERE username=?</module-option>
          <module-option name="hashAlgorithm">MD5</module-option>
          <module-option name="hashEncoding">HEX</module-option>
          <!--<module-option name="hashEncoding">base64</module-option>-->
       </login-module>
    </authentication>
 </application-policy> 
```**

# editor - 批量编辑，但不是所有位置（grep？sed？awk？vim？）

> ID：11318500
> 
> 赞同：0
> 
> 时间：2012-07-03T20:14:36.110
> 
> 标签：editor, grep

我有一个相对较大的代码库，希望对整个代码进行类似的更改。

我有一堆这样的行

```
$options = new Options(); 
```

我想用

```
$options = Options::getInstance(); 
```

但在某些地方我有

```
$options = new Options('alternate_options_file.txt') 
```

那些，我想一个人离开。

此外，我希望将来会有更多这样的变化。

我想要一些方法来在代码库中进行这种更改，而无需手动接触每个文件。在这种情况下，我可以轻松地制作一个正则表达式来只捕获我想要的那些。但是肯定会有更复杂的版本出现。我想要一个通用的解决方案，它可以让我：

1.  找到一组可能的位置来改变
2.  包括或排除其中一些
3.  在我指定的地方自动进行更改。

（我记得使用过 resharper，它会向您显示将要更改的所有位置的列表，并让您包含/排除它们。但现在我正在研究 PHP，我想做一些替换而不是纯粹的重构。）

现在，我最好的选择似乎是`ack`在 vim 内部使用，记录一个宏，然后`:cnext`在适当的情况下使用和应用宏。不过可能有更好的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:13:12.770

[http://www.ibrahim-ahmed.com/2008/01/find-and-replace-in-multiple-files-in.html](http://www.ibrahim-ahmed.com/2008/01/find-and-replace-in-multiple-files-in.html)

Vim 可以跨文件交互地替换文本，例如：

```
:args **/*.php
:argdo %s/new Options()/Options::getInstance()/gec | update 
```

我还建议您在尝试之前提交整个代码库。注意不要搞砸你的存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:32:38.257

sed 模式将是

```
s/\$options = new Options();/\$options = Options::getInstance();/g 
```

`sed -i`要在 Linux 或`sed -i.bak`BSD/Mac 上就地应用它，请删除备份）。要将自己限制在 PHP 文件中，并且可能只触及带有该行的文件，请尝试以下操作：

```
find . -name "*.php" | xargs grep -l "\$options = new Options();" | xargs sed -i 's/\$options = new Options();/\$options = Options::getInstance();/g' 
```

如果文件名中有空格等，请尝试`find . -name "*.php" -print0 | xargs -0 sed ...`.

请务必先备份所有内容。如果您正在使用源代码控制（对吗？）并且在进行更改之前所有内容都已提交，那么您应该没问题。

# iphone - 如何在 UIScrollView 中绘制垂直线

> ID：11318502
> 
> 赞同：0
> 
> 时间：2012-07-03T20:14:44.640
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 UIScrollView，我想绘制一条高度为 UIScrollView contentHeight 的垂直线。如何在不牺牲性能的情况下轻松做到这一点？我正在考虑使用高度非常大的 UIVIew（因为我们不知道 scrollView 的 contentHeight 是什么）并将其添加为 UIScrollView 的子视图。还有比这更好的方法吗？

这条线基本上是 10px 宽，灰色，从 scrollView 的顶部到底部。

这是我现在所拥有的，我基本上覆盖了 UIScrollView drawRect：

```
- (void)drawRect:(CGRect)rect
{
    if (shouldDrawVerticalLineForProfile){
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGColorRef separatorColor = [UIColor colorWithRed:47.0/255.0 green:47.0/255.0 
                                                     blue:47.0/255.0 alpha:1.0].CGColor;

        // Add at bottom
        CGPoint startPoint = CGPointMake(30, 0);
        CGPoint endPoint = CGPointMake(30, 10000);

        CGContextSaveGState(context);
        CGContextSetLineCap(context, kCGLineCapSquare);
        CGContextSetStrokeColorWithColor(context, separatorColor);
        CGContextSetLineWidth(context, 5.0);
        CGContextMoveToPoint(context, startPoint.x + 0.5, startPoint.y + 0.5);
        CGContextAddLineToPoint(context, endPoint.x + 0.5, endPoint.y + 0.5);
        CGContextStrokePath(context);
        CGContextRestoreGState(context);     
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T20:18:25.417

嗯，最简单的方法就是添加一个 UIView 并设置背景颜色。

```
-(void)viewDidLoad {
   [super viewDidLoad];

   UIView *verticalBar = [[[UIView alloc] init] autorelease];
   [verticalBar setBackgroundColor:[UIColor grayColor]];
   [verticalBar setFrame:CGRectMake(0,0,10,[scrollView contentSize].height)];

   [[self view] addSubview:verticalBar];
} 
```

您不需要“非常非常大的高度”，因为您通过滚动视图知道最大高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:27:51.343

```
- (void)drawRect:(CGRect)rect {
  CGContextRef ctx = UIGraphicsGetCurrentContext();
  CGContextSetStrokeColorWithColor(ctx, [UIColor colorWithRed: 0.0 green:0.0 blue:0.0 alpha:.6].CGColor);
  CGContextSetLineWidth(ctx, 1);

  CGContextBeginPath(ctx);
  CGContextMoveToPoint(ctx, 0, CGRectGetMaxY(rect) - 2);
  CGContextAddLineToPoint(ctx, CGRectGetMaxX(rect), CGRectGetMaxY(rect) - 2);
  CGContextStrokePath(ctx);
  CGContextSetLineWidth(ctx, 2);
  CGContextSetStrokeColorWithColor(ctx, [UIColor colorWithRed: .34 green:.35 blue:.352 alpha:.6].CGColor);

  CGContextBeginPath(ctx);
  CGContextMoveToPoint(ctx, 0, CGRectGetMaxY(rect));
  CGContextAddLineToPoint(ctx, CGRectGetMaxX(rect), CGRectGetMaxY(rect));
  CGContextStrokePath(ctx);

} 
```

将此添加到您的 UIScrollView 的控制器

我给你的代码画了一条水平线，但你应该能够适应它。

# menu - Ralt 的 Impress.js 菜单

> ID：11318506
> 
> 赞同：1
> 
> 时间：2012-07-03T20:15:13.020
> 
> 标签：menu, navigation, custom-font, impress.js

我已经设法创建了一个 impress.js 演示文稿并添加了由 Ralt 创建的菜单（https://github.com/bartaz/impress.js/pull/153）但是，我现在想要做什么并且可以似乎无法通过将菜单的字体和菜单标题更改为我选择的自定义字体（@font/font-family 功能似乎对我不起作用）并且还能够更改实际的导航/菜单按钮，用于显示我选择的图像，而不仅仅是当前设置的文字...

帮助任何人？？

谢谢！！

路德斯

# iphone - 在 Objective C 中查询数组（如 MySQL）

> ID：11318509
> 
> 赞同：0
> 
> 时间：2012-07-03T20:15:20.730
> 
> 标签：iphone, objective-c, ios, filter

所以基本上我有一个巨大的数组数组（只有一个二维数组）......

我的根数组可以说有 100 个子数组...

我想查询根/子数组并仅返回其 2 对象等于 hello 的子数组...

所以基本上我在下面有一个虚构的想法......

```
updatedArray = [rootArray WHERE childArray objectAtIndex:2 == @"hello"]; 
```

现在如您所见，我希望更新后的数组在 rootArray 中包含 40 或 50 个子数组...

明白我的意思——它有点像 MySQL，只有数组而不是数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:26:08.277

试试这个：

```
NSMutableArray *updated = [[NSMutableArray alloc] init];
for (NSArray *a in rootArray)
{
    if ([[a objectAtIndex:2] isEqualToString:@"hello"])
        [updated addObject:a];
} 
```

现在`updated`将包含`rootArray`第三个对象为的数组`@"hello"`。

不要忘记在使用后释放它（如果你不使用 ARC）。

您还可以将谓词用于简单的逻辑；请参阅[NSPredicate 类。](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:40:14.327

您可以使用 过滤数组`NSPredicate`，如下所示：

```
NSArray *data = [NSArray arrayWithObjects:
    [NSArray arrayWithObjects:@"One", @"Two", nil]
,   [NSArray arrayWithObjects:@"Three", @"Four", nil]
,   [NSArray arrayWithObjects:@"Nine", @"Two", nil]
,   nil];
NSPredicate *filter = [NSPredicate predicateWithBlock:^BOOL(id array, NSDictionary *bindings) {
    // This is the place where the condition is specified.
    // You can perform arbitrary testing on your nested arrays
    // to determine their eligibility:
    return [[array objectAtIndex:1] isEqual:@"Two"];
}];
NSArray *res = [data filteredArrayUsingPredicate:filter];
NSLog(@"%lu", res.count); 
```

# linux - 在 Linux 上安装 Freeglut

> ID：11318510
> 
> 赞同：7
> 
> 时间：2012-07-03T20:15:23.097
> 
> 标签：linux, opengl, installation, freeglut, linux-mint

我正在尝试在运行 Linux Mint 的计算机上安装 freeglut。我按照这个网站上的步骤操作：http: [//freeglut.sourceforge.net/docs/install.php](http://freeglut.sourceforge.net/docs/install.php)。当我`make all`在 src 目录中执行此操作时，会出现以下错误：

`fatal error: GL/gl.h`

此错误由 ../include/GL/freeglut_std.h 给出。经检查，include/GL 目录确实没有任何 gl.h 文件。它也缺少 glu.h，freeglut_std.h 也尝试这样做`#include`。我该怎么办？为什么 gl.h 和 glu.h 不见了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T20:28:49.407

我建议安装`freeglut3-dev`软件包而不是从源代码构建。这将为您提供有用的东西，例如自动更新和[`pkg-config`](http://en.wikipedia.org/wiki/Pkg-config)可以在`make`文件中引用的正确条目。

如果您一心想从源代码构建 freeglut，您可能需要`libgl1-mesa-dev`and (也许)`libglu1-mesa-dev`软件包。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-05T22:05:38.100

对于安装：

1.  `sudo apt-get install freeglut3 freeglut3-dev libglew-dev`
2.  `sudo apt-get install mesa-utils`

对于链接：

```
 g++ .... -lglut -lGL .... 
```

# html - IE7 内宽度的 div 中没有换行的文本

> ID：11318511
> 
> 赞同：1
> 
> 时间：2012-07-03T20:15:34.863
> 
> 标签：html, css, internet-explorer-7

在 IE7 中，宽度比文本窄的 div 中的文本不会换行为两行。它适用于比 IE7 更好的其他浏览器。

```
<div class="office-header-info">
<div class="local-office">District of Columbia</div>
</div> 
```

```
.office-header-info {
  float: left;
}

.local-office {
  color: #893f22;
  width: 165px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  margin-top: 17px;
  white-space: normal;
  line-height: 1.1;
} 
```

在 IE7 中，哥伦比亚特区在其他浏览器中保持在一条线上

> 哥伦比亚特区

这应该是什么，所以 IE7 与哥伦比亚特区这样的线路不正确。如果我添加溢出：隐藏它会被切断。

任何关于此的解释为什么文本不会在 IE7 中换成两行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:36:27.310

```
white-space: pre; /* CSS 2.0 */
white-space: pre-wrap; /* CSS 2.1 */
white-space: pre-line; /* CSS 3.0 */
white-space: -pre-wrap; /* Opera 4-6 */
white-space: -o-pre-wrap; /* Opera 7 */
white-space: -moz-pre-wrap; /* Mozilla */
white-space: -hp-pre-wrap; /* HP Printers */
word-wrap: break-word; /* IE 5+ */ 
```

试一试。

# wpf - 资源字典组织

> ID：11318513
> 
> 赞同：2
> 
> 时间：2012-07-03T20:15:54.597
> 
> 标签：wpf, xaml, resources, resourcedictionary, code-organization

我知道有两个关于这个主题的不错的在线资源，[XAML 指南](http://www.cookingwithxaml.com/content/xamlguidelines/xamlGuidelinesDraft0.pdf)和[这个不太完整的一个](http://projekt202.com/blog/2010/xaml-organization/)。

而且我还是不太明白！

例如，假设我有两个项目：

1.  Wpf.ControlLibrary.proj
2.  Wpf.App.proj

在 Wpf 应用程序中，我有三个资源一起工作，形成一种统一的方式，为不同的视图提供错误反馈和关闭。其中两个资源通过 DataTemplate 提供：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="EditedStateIndicator.xaml" />
    <ResourceDictionary Source="CloseCrossToggleButton.xaml" />
</ResourceDictionary.MergedDictionaries>

<DataTemplate x:Key="SatelliteViewClosePanelStyle" >
    <StackPanel Orientation="Horizontal">
        <Button Style="{StaticResource CloseCrossButtonStyle}"  />
        <Ellipse Style="{StaticResource EditedStateIndicatorStyle}"  />
    </StackPanel>
</DataTemplate> 
```

这又在“SatelliteView.ResourceLibrary.xaml”中提供：

```
<!-- ##Satellite View Library-->
<ResourceDictionary.MergedDictionaries>

    <ResourceDictionary Source="SatelliteViewClosePanel.xaml" />
    <ResourceDictionary Source="InlineBorder.xaml" />

</ResourceDictionary.MergedDictionaries> 
```

这又在“ControlLibrary.ResourceLibrary.xaml”中提供

```
<!-- ##Master Control Library reference-->
<ResourceDictionary.MergedDictionaries>

    ...
    <ResourceDictionary Source="CustomControlStyles/SatelliteViewStyles/ResourceLibrary.xaml" />

    ...

</ResourceDictionary.MergedDictionaries> 
```

然后在 Wpf.App 项目中消费，字面意思是 App.xaml

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/Wpf.ControlLibrary;component/ResourceLibrary.xaml" />
        </ResourceDictionary.MergedDictionaries>

    </ResourceDictionary>

</Application.Resources> 
```

应用程序内部是一个视图，它使用了一些也需要访问控件库的内容：

```
<ResourceDictionary.MergedDictionaries>
   Source="pack://application:,,,/SWpf.ControlLibrary;component/ResourceLibrary.xaml" />
</ResourceDictionary.MergedDictionaries>

<DataTemplate x:Key="AvatarEditingControlTemplate">

    ...

</DataTemplate> 
```

# 好的，那么你的问题是什么？

1.  鉴于 DataTemplate 需要“ControlLibrary.ResourceLibrary”或引发错误，那么在 App.Resources 中提供它有什么好处？我认为应用程序资源应该使应用程序可以使用所有资源？
2.  我怎样才能更好地组织这里显示的资源，或者这是一个体面的方法？关于我错过的主题的任何其他好的链接？大多数不平凡的项目是否需要一些代码来获得某种共享资源库？

干杯，
贝里尔

# python - 如何在循环中使用输入

> ID：11318516
> 
> 赞同：0
> 
> 时间：2012-07-03T20:16:00.703
> 
> 标签：python

我创建了一个代码来显示斐波那契数列中的数字。我想要一种方法来允许用户输入显示的数字数量。这是我的代码：

```
total = 1
total2 = 0
for i in range (*Number of numbers/2*):
    total = total + total2
    print (total)
    total2 = total + total2
    print (total2)
#Shows golden ratio
total3 = total2/total
print (total3) 
```

有人能帮我吗？那会很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:17:59.317

这是 Python 2.x 中如何获取整数的示例：

```
myNum = int(raw_input("Enter a number: "))
print(myNum + 1) 
```

编辑：未经测试的 Python 3 版本：

```
myNum = int(input("Enter a number: "))
print(myNum + 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:19:48.290

**蟒蛇2.x：**

```
for i in xrange (int(raw_input())//2):    #use xrange() in python 2.x, 
                                          #it is similar to python 3.x's range() 
```

**蟒蛇3.x：**

```
for i in range (int(input())//2): 
```

# iphone - 执行代码块代替@selector

> ID：11318519
> 
> 赞同：4
> 
> 时间：2012-07-03T20:16:21.800
> 
> 标签：iphone, objective-c, xcode, objective-c-blocks

我正在创建一个 barButton，按下它时应该将 UITableView 的编辑模式设置为是。这是我的代码：

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle: @"Edit"
                                                                             style: self.navigationController.navigationItem.leftBarButtonItem.style
                                                                            target: self
                                                                             action: ]; 
```

我不明白的是我需要作为该`action`部分的参数放置什么，以便我可以在那里执行代码块。我可以很容易地提出`@selector(someMethod)`，但我只执行一两行并且创建另一种方法是毫无意义的。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T20:22:31.190

除了 pgb 的评论，写这样的东西可以解决问题：

```
@interface PJBlockHolder

+ (id)blockHolderWithBlock:(dispatch_block_t)block;
- (void)invoke;

@end

/* obvious implementation; copy the block, issue it upon invoke */ 
```

和：

```
[[UIBarButtonItem alloc] initWithTitle: @"Edit"
    style: self.navigationController.navigationItem.leftBarButtonItem.style
    target: [PJBlockHolderWithBlock:^{ /* your code here */ }]
    action:@selector(invoke) ]; 
```

因此，您创建了一个自定义对象，该对象包装了一个块并在特定选择器上发出它。

编辑：如下所述，`UIControl`s 不保留其目标。所以可能最简单的事情是将块持有者的生命周期与控件的生命周期联系起来；这不一定是理想的，因为如果您随后将其作为目标删除，同时保持控件处于活动状态，那么持有者的寿命将超过其有用性，但它可能适用于大多数情况。

选项是使用 Objective-C 内置的关联对象，或者使用`UIControl`继承自的事实`UIView`，给它一个`CALayer`，它可以存储任意键对象。

Justin Spahr-Summers 在下面的评论中链接到前者的一个有据可查的公共领域实现，所以为了讨论的目的，我将展示后者的一个例子，即使它很hacky。

```
PJBlockHolderWithBlock *blockHolder = [PJBlockHolderWithBlock:^{ /* your code here */ }];
UIBarButtonItem *barButtonItem =
    [[UIBarButtonItem alloc] initWithTitle: @"Edit"
        style: self.navigationController.navigationItem.leftBarButtonItem.style
        target: blockHolder
        action:@selector(invoke) ];
[barButtonItem.layer setValue:blockHolder forKey:@"__myBlockHolderKey__"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:19:08.570

你不能按照你的意愿去做。这些`target:` `action:`参数旨在发送一个对象和一个要在该对象上调用的选择器。据我所知，没有使用块的等效 API。

# php - PHP检测重复单词

> ID：11318520
> 
> 赞同：1
> 
> 时间：2012-07-03T20:16:27.973
> 
> 标签：php, detect

是否可以从此字符串中检测到重复的单词：

```
$string = "dogdog"; 
```

我只想返回“str”而不是“strstr”

我尝试了一些好的解决方案，但它并不能真正做到我想要的那样：

```
$string = "dogdog";
$length = strlen($string) / 2;
 echo substr($string, $length); 
```

我希望**从一个大句子**中检测到它（$string =“ *dogdog* something *dogdog* else bla bla, something, (something ); something"; )....*字符串包含2个重复的**正确**单词，没有分隔*，如何检测并将其修复为一个真正的单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:20:04.700

[`explode`](http://www.php.net/manual/en/function.explode.php)/[`preg_split`](http://www.php.net/manual/en/function.preg-split.php)你的句子变成一个单词数组，然后在每个单词上使用你的技巧。

你还没有具体说明什么是“词”；这将准确地确定您需要爆炸的分隔符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T20:21:54.293

您应该迭代地执行此操作。这是一个开始：

```
//turn punctuation into something we can split on
$sanitized = preg_replace('/[^a-z0-9]+/i', '_', $string);
$words = explode("_",$sanitized);

//now that you have a 'clean' array, do logic
foreach($words as $word) {
    //tinker with word dup' logic here.
} 
```

# javascript - JavaScript 可以存储特定浏览器窗口实例独有的数据吗？

> ID：11318525
> 
> 赞同：1
> 
> 时间：2012-07-03T20:16:47.433
> 
> 标签：javascript

是否有一种 JavaScript 方法来存储浏览器窗口独有的数据，这样如果用户打开了多个浏览器窗口（所有相同的浏览器，比如：Firefox），每个窗口都会有唯一的数据。...与所有窗口共享的 cookie 不同。

我的用户需要打开多个窗口到同一个 .html 页面，以查看动态嵌入数据。同时，每个窗口将动态显示来自不同嵌入式源的数据。

因此，我的 JavaScript 需要能够区分一个窗口和另一个窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:23:23.900

我唯一能想到的就是设置 window.name ......我什至没有尝试过，但据我所知，它应该像 cookie 一样在页面导航中存活 - 我会在一秒钟内回来，要做一些测试...

--

似乎工作正常，我不确定 window.name 的最大长度是多少（编辑：2MB 跨浏览器，如果你不包括 Opera 则更多 - [http://www.thomasfrank.se/sessionvars.html](http://www.thomasfrank.se/sessionvars.html)）。我发现的唯一一件事是在 Chrome 中，如果您访问另一个域，window.name 会丢失，但在其他浏览器中，该名称仍然存在，所以它是可行的，不是 100% 确定您应该依赖它在未来始终工作尽管。

存储每个窗口/选项卡状态的另一种方法是通过 URI，但在涉及导航的地方也可能会变得很棘手。我的意思是它需要有纪律地使用特定的导航机制来确保它不会意外丢失，并且它也会在你的用户的视野中。如果这是一个设计目标，那么它的好处是可以收藏/发送电子邮件等。

--

所有这些方法都将不适用于个人/敏感/关键数据，但对于易失性/瞬态视图状态，我看不到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:18:51.570

如果您将数据附加到各种窗口实例，每个窗口上下文将与其他窗口上下文不同。

```
var w = window.open('somepage.html');
window.foo = 'bar';
w.foo = 'baz'; 
```

# android - 是否可以找到android应用程序连接到哪个服务器

> ID：11318529
> 
> 赞同：0
> 
> 时间：2012-07-03T20:17:06.713
> 
> 标签：android, download, backtrace

我想知道是否可以跟踪应用程序连接到哪个服务器以获取数据。我正在考虑使用 Google APK 扩展来捆绑我的媒体文件（纹理、视频等），并且想知道，因为 LVL 据说有很多错误，如果将这些文件存储在一个 zip 上不是更好单独的服务器并在首次运行时下载它们并将它们解压缩到内部存储中，然后删除这些文件。

那么是否有可能跟踪文件或信息来自哪个服务器，如果是，有什么方法可以使它更难做到这一点。

感谢任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:20:12.173

是的。根据场景，有很多方法可以做到这一点。 [Wi-Fi 网络上的Wireshark](http://en.wikipedia.org/wiki/Wireshark)混杂模式只是其中之一。

试图混淆这一点是没有意义的。

# javascript - Javascript多图像加载器

> ID：11318539
> 
> 赞同：2
> 
> 时间：2012-07-03T20:17:52.533
> 
> 标签：javascript, html, image, loader, preload

我想做一个 javascript 图像加载器。

这就是我尝试的：

```
function ImgLoader() {

   this.imgs_ = {
       0 : {name: "floor", img: new Image()},
       1 : {name: "highlight", img: new Image()},
       2 : {name: "player-north", img: new Image()},
       3 : {name: "player-south", img: new Image()},
       4 : {name: "player-west", img: new Image()},
       5 : {name: "player-east", img: new Image()},
       6 : {name: "food_small", img: new Image()},
       7 : {name: "food_medium", img: new Image()},
       8 : {name: "food_large", img: new Image()},
   };

}

 ImgLoader.prototype.load = function() {

 for (var i = 0; typeof(this.imgs_[i]) != "undefined"; i++)
     this.imgs_[i].img.src = "img/" + this.imgs_[i].name + ".png";
 } 
```

使用这种方法，我有一个图像“数组”，以后可以轻松使用。但是，有时似乎很少有图像没有完全加载。

制作这种装载机的最佳方法是什么？

谢谢 ！

* * *

好的 Šime Vidas 说一个非常好的解决方案...但是：我们不能确定图像是否已完全加载！

这是代码：

```
var imgs = Object.create( null ); // or var imgs = {};

[
   'floor',
   'highlight',
   'player-north',
   'player-south',
   'player-west',
   'player-east',
   'food_small',
   'food_medium',
   'food_large'
].forEach(function ( name ) {
    var img = new Image;
    img.src = 'img/' + name + '.png';
    imgs[ name ] = img;
}); 
```

用途是：

```
imgs.food_small; 
```

但是如果我像这样检查图像完整属性

```
console.log(imgs.food_small.complete); 
```

有时我们可以看到：false

我认为我们应该等待像“onload”这样的事件，然后再在 forEach 中加载下一张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:33:01.173

这就是我的做法：

```
var imgs = Object.create( null ); // or var imgs = {};

[
    'floor',
    'highlight',
    'player-north',
    'player-south',
    'player-west',
    'player-east',
    'food_small',
    'food_medium',
    'food_large'
].forEach(function ( name ) {
    var img = new Image;
    img.src = 'img/' + name + '.png';
    imgs[ name ] = img;
}); 
```

现在您可以像这样检索每个单独的图像：

```
imgs.food_small 
```

例如：

```
ctx.drawImage( imgs.food_small, 0, 0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:31:43.743

首先，按原样插入这个函数

```
function preload(arrayOfImages) {
            $(arrayOfImages).each(function(){
                $('<img/>')[0].src = this;
            });
        } 
```

要使用它，请将所有图像插入以下函数。

```
jQuery(document).ready(function(){
    preload([
        '/images/image1.png',
        '/images/image2.png'
    ]); 
}); 
```

# mysql - 迁移数据库到当前版本的MySQL，一张表有保留字

> ID：11318540
> 
> 赞同：2
> 
> 时间：2012-07-03T20:17:56.423
> 
> 标签：mysql, mysql-error-1054

我有这张表是从旧版本的 mysql 迁移而来的：

```
> SHOW COLUMNS from tbl
(output modified below for posting)

watch_id           | int(11)      | NO   | PRI | NULL  
user_id            | varchar(125) | YES  | MUL | NULL
type               | int(11)      | YES  | MUL | NULL
range              | int(10)      | YES  |     | NULL
active             | tinyint(4)   | NO   |     | 1 
```

“范围”是当前版本中的保留字

```
ALTER TABLE `db`.`tbl` CHANGE COLUMN `range` `watch_range` INT(10) DEFAULT NULL; 
```

结果是

```
ERROR 1054 (42S22): Unknown column 'range' in 'tbl' 
```

有任何想法吗？

注意：当我最初发布此内容时，我打错了，sql 有：

```
`range` not `range' as I originally posted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:55:37.667

正如@eggyal 建议的那样

```
ran mysql_upgrade
ran repair 
```

然后

```
dumped the database and removed it
imported the dump
restarted mysql 
```

工作，不知道为什么

# asp.net-mvc - 没有特定控制器的 ASP.NET MVC 3 路由

> ID：11318542
> 
> 赞同：3
> 
> 时间：2012-07-03T20:18:06.360
> 
> 标签：asp.net-mvc, asp.net-mvc-3, routing, seo

我有一个非常有趣的案例：

我有一个网站，这已经在工作了

*   [http://mysite.com/](http://mysite.com/)
*   [http://mysite.com/browse/mens](http://mysite.com/browse/mens)
*   [http://mysite.com/product/1/cooltshirt](http://mysite.com/product/1/cooltshirt)

但我也希望这些网址也能正常工作

*   [http://mysite.com/farm](http://mysite.com/farm)
*   [http://mysite.com/farm/browse/mens](http://mysite.com/farm/browse/mens)
*   [http://mysite.com/farm/product/1/cooltshirt](http://mysite.com/farm/product/1/cooltshirt)

**农场部分是假的，除了存在于 SEO 之外，它什么也不做，没有与之关联的相应控制器或操作**

本质上，我已经有很多路由，但是如果在主机名“mysite”之后附加“farm”，我也希望该站点的行为完全相同。所以它有点像一个子目录，其行为与主站点上的行为完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:24:02.640

您可以添加带约束的路线。确保它高于默认路由。

```
routes.MapRoute(
    "Farm", // Route name
    "farm/{controller}/{action}", // URL with parameters
    new { controller = "Home", action = "Index"} // Parameter defaults
); 
```

它只是确保以“farm”开头的 URL 从第 2 段获取控制器名称，从第 3 段获取操作名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:32:19.443

我假设你有一个 FarmController，你可以让它们路由到你的 FarmController

```
routes.MapRoute(
    "Farm", // Route name
    "Farm/{controller}/{action}", // URL with parameters
    new { controller = "Farm", action = "Index"} // Parameter defaults
); 
```

# scala - 为什么以下参数化方法无法编译？

> ID：11318544
> 
> 赞同：0
> 
> 时间：2012-07-03T20:18:18.200
> 
> 标签：scala, parameterized

从[Scala API](http://www.scala-lang.org/api/current/index.html#scala.reflect.Manifest)，我得到了以下示例，该示例无法编译；

```
scala> def arr[T] = new Array[T](0)
<console>:10: error: cannot find class manifest for element type T
       def arr[T] = new Array[T](0)
                    ^ 
```

我想知道，为什么它不能编译（Scala API 没有解释错误）？它不只是一个普通的参数化方法吗？为什么编译器抱怨它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T20:20:50.377

正如编译器错误消息所说，您需要一个`Manifest`约束。

```
scala> def arr[T : Manifest] = new Array[T](0)
arr: [T](implicit evidence$1: Manifest[T])Array[T] 
```

[在此处](http://www.scala-lang.org/docu/files/collections-api/collections_38.html)了解更多信息。有关更深入的信息，请参阅[论文。](http://www.scala-lang.org/sites/default/files/sids/cunei/Thu,%202009-10-01,%2013:54/arrays.pdf)

# android - 创建具有类似标签功能的自定义 editText

> ID：11318551
> 
> 赞同：29
> 
> 时间：2012-07-03T20:19:02.237
> 
> 标签：android, android-edittext, custom-component

我一直在寻找，但找不到任何答案。我要实现的是一个类似于 ICS gmail 应用程序的撰写屏幕中的“收件人”字段的 EditText。

这是一张描述我想要的图片： ![在此处输入图像描述](../Images/64db4471d8285a4202bee92a57d13cb9.png)

我正在考虑扩展`EditText`和实现我自己的自定义`EditText`类，但我不确定如何做到这一点，或者即使这是最好的解决方案。有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-07-07T09:06:19.240

[从这个答案](https://stackoverflow.com/questions/10812316/contact-bubble-edittext/10864568#10864568)改编了解决方案。插入逗号时自动分隔输入（分隔符可以调整）。创建一个 ImageSpan 和一个 ClickableSpan（可以通过单击右侧部分来删除条目）。

```
public class TagEditText extends EditText {

    TextWatcher textWatcher;

    String lastString;

    String separator = ",";

    public TagEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        setMovementMethod(LinkMovementMethod.getInstance());

        textWatcher = new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

            }

            @Override
            public void afterTextChanged(Editable s) {
                String thisString = s.toString();
                if (thisString.length() > 0 && !thisString.equals(lastString)) {
                    format();

                }
            }
        };

        addTextChangedListener(textWatcher);
    }

    private void format() {

        SpannableStringBuilder sb = new SpannableStringBuilder();
        String fullString = getText().toString();

        String[] strings = fullString.split(separator);

        for (int i = 0; i < strings.length; i++) {

            String string = strings[i];
            sb.append(string);

            if (fullString.charAt(fullString.length() - 1) != separator.charAt(0) && i == strings.length - 1) {
                break;
            }

            BitmapDrawable bd = (BitmapDrawable) convertViewToDrawable(createTokenView(string));
            bd.setBounds(0, 0, bd.getIntrinsicWidth(), bd.getIntrinsicHeight());

            int startIdx = sb.length() - (string.length());
            int endIdx = sb.length();

            sb.setSpan(new ImageSpan(bd), startIdx, endIdx, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

            MyClickableSpan myClickableSpan = new MyClickableSpan(startIdx, endIdx);
            sb.setSpan(myClickableSpan, Math.max(endIdx-2, startIdx), endIdx, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

            if (i < strings.length - 1) {
                sb.append(separator);
            } else if (fullString.charAt(fullString.length() - 1) == separator.charAt(0)) {
                sb.append(separator);
            }
        }

        lastString = sb.toString();

        setText(sb);
        setSelection(sb.length());

    }

    public View createTokenView(String text) {

        LinearLayout l = new LinearLayout(getContext());
        l.setOrientation(LinearLayout.HORIZONTAL);
        l.setBackgroundResource(R.drawable.bordered_rectangle_rounded_corners);

        TextView tv = new TextView(getContext());
        l.addView(tv);
        tv.setText(text);
        tv.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 14);

        ImageView im = new ImageView(getContext());
        l.addView(im);
        im.setImageResource(R.drawable.ic_cross_15dp);
        im.setScaleType(ImageView.ScaleType.FIT_CENTER);

        return l;
    }

    public Object convertViewToDrawable(View view) {
        int spec = View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED);
        view.measure(spec, spec);
        view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());

        Bitmap b = Bitmap.createBitmap(view.getMeasuredWidth(), view.getMeasuredHeight(), Bitmap.Config.ARGB_8888);

        Canvas c = new Canvas(b);

        c.translate(-view.getScrollX(), -view.getScrollY());
        view.draw(c);
        view.setDrawingCacheEnabled(true);
        Bitmap cacheBmp = view.getDrawingCache();
        Bitmap viewBmp = cacheBmp.copy(Bitmap.Config.ARGB_8888, true);
        view.destroyDrawingCache();
        return new BitmapDrawable(getContext().getResources(), viewBmp);
    }

    private class MyClickableSpan extends ClickableSpan{

        int startIdx;
        int endIdx;

        public MyClickableSpan(int startIdx, int endIdx) {
            super();
            this.startIdx = startIdx;
            this.endIdx = endIdx;
        }

        @Override
        public void onClick(View widget) {

            String s = getText().toString();

            String s1 = s.substring(0, startIdx);
            String s2 = s.substring(Math.min(endIdx+1, s.length()-1), s.length() );

            TagEditText.this.setText(s1 + s2);
        }

    }
} 
```

R.drawable.bordered_rectangle_rounded_corners：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid
        android:color="@color/transparent"/>
    <stroke android:width="1dp" android:color="#AAAAAA" />
    <corners
        android:radius="100dp" />
    <padding
        android:left="5dp"
        android:top="5dp"
        android:right="5dp"
        android:bottom="5dp" />
</shape> 
```

最后要添加的是“x 按钮”的 png。到目前为止效果很好，唯一的问题是长按删除键不起作用（如果有人知道如何使它工作，请随时发表评论）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T20:19:11.067

嗯，花了一段时间才找到一个类似的问题，但尽管如此，这是[我找到的最接近的答案](https://stackoverflow.com/questions/10812316/contact-bubble-edittext)。我以前就知道其他人有这种问题！感谢 CommonsWare 为我指明了正确的方向。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-22T23:08:53.020

我找不到一个好的解决方案，所以我会建立自己的库来处理这个问题：[TokenAutoComplete](https://github.com/splitwise/TokenAutoComplete)。这是一个基本示例：

```
public class ContactsCompletionView extends TokenCompleteTextView {
    public ContactsCompletionView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected View getViewForObject(Object object) {
        Person p = (Person)object;

        LayoutInflater l = (LayoutInflater)getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        LinearLayout view = (LinearLayout)l.inflate(R.layout.contact_token, (ViewGroup)ContactsCompletionView.this.getParent(), false);
        ((TextView)view.findViewById(R.id.name)).setText(p.getName());

        return view;
    }

    @Override
    protected Object defaultObject(String completionText) {
        //Stupid simple example of guessing if we have an email or not
        int index = completionText.indexOf('@');
        if (index == -1) {
            return new Person(completionText, completionText.replace(" ", "") + "@example.com");
        } else {
            return new Person(completionText.substring(0, index), completionText);
        }
    }
} 
```

contact_token 的布局代码（您需要找到自己的 x drawable）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:background="@drawable/token_background">
    <TextView android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/white"
        android:textSize="14sp"
        android:text="Test Me"
        android:padding="2dp" />

    <ImageView
        android:layout_height="10dp"
        android:layout_width="10dp"
        android:src="@drawable/x"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="3dp"
        android:layout_marginRight="5dp" />
</LinearLayout> 
```

令牌背景可绘制

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid android:color="#ffafafaf" />
    <corners
        android:topLeftRadius="5dp"
        android:bottomLeftRadius="5dp"
        android:topRightRadius="5dp"
        android:bottomRightRadius="5dp" />
</shape> 
```

人物对象代码

```
public class Person implements Serializable {
    private String name;
    private String email;

    public Person(String n, String e) { name = n; email = e; }

    public String getName() { return name; }
    public String getEmail() { return email; }

    @Override
    public String toString() { return name; }
} 
```

示例活动

```
public class TokenActivity extends Activity {
    ContactsCompletionView completionView;
    Person[] people;
    ArrayAdapter<Person> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        people = new Person[]{
                new Person("Marshall Weir", "marshall@example.com"),
                new Person("Margaret Smith", "margaret@example.com"),
                new Person("Max Jordan", "max@example.com"),
                new Person("Meg Peterson", "meg@example.com"),
                new Person("Amanda Johnson", "amanda@example.com"),
                new Person("Terry Anderson", "terry@example.com")
        };

        adapter = new ArrayAdapter<Person>(this, android.R.layout.simple_list_item_1, people);

        completionView = (ContactsCompletionView)findViewById(R.id.searchView);
        completionView.setAdapter(adapter);
        completionView.setTokenClickStyle(TokenCompleteTextView.TokenClickStyle.Delete);
    }
} 
```

布局代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.tokenautocomplete.ContactsCompletionView
        android:id="@+id/searchView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

# mamp - 使用 MAMP Pro 设置 xip.io 时遇到问题

> ID：11318554
> 
> 赞同：0
> 
> 时间：2012-07-03T20:19:16.840
> 
> 标签：mamp

我在 OS X Lion 上为 MAMP Pro 设置 xip.io 时遇到了很多麻烦。我这样做是为了可以在本地运行 Adob​​e Shadow。

我已经阅读了 2 个教程：

[http://blogs.adobe.com/shadow/2012/06/19/shadow-xip-io-virtual-hosts-workflow-simplified/](http://blogs.adobe.com/shadow/2012/06/19/shadow-xip-io-virtual-hosts-workflow-simplified/)

[http://www.thenerdary.net/post/24695946158/xip-io-and-apache-serveralias/](http://www.thenerdary.net/post/24695946158/xip-io-and-apache-serveralias/)

做了他们都说过的事情，但似乎仍然无法让它充分发挥作用。

我得到的只是一个页面，上面写着“它有效！” 但我无法让它显示驻留在该文件夹中的 index.php 页面。

有没有其他人使用相同的环境进行设置，或者知道可以提供帮助的好的（更深入的）教程？

非常感谢，杰克

# jquery - jQuery 切换和悬停功能

> ID：11318558
> 
> 赞同：0
> 
> 时间：2012-07-03T20:19:24.980
> 
> 标签：jquery, hover, toggle, bind

所以我有一个元素可以在单击时在两种背景颜色之间切换。但是当没有选择元素时，我希望背景颜色在悬停时改变（并恢复）。我尝试在切换中使用 .on('hover') 和 .off('hover') ，但似乎只有 .off() 有效。

```
$('.element').hover(
  function() {
    $(this).css('background', '#e7f1f5');
  },
  function() {
    $(this).css('background', '#fff');
  }
);

$('.element').toggle(
  function( select ) {
    select.preventDefault();
    $(this).off('hover');
    $(this).css('background', '#f6f6f6');
    other.code();
  },
  function( unselect ) {
    unselect.preventDefault();
    $(this).on('hover');
    $(this).css('background', '#fff');
    other.code();
  }
); 
```

我切换“开”，“悬停”事件不再触发（根据需要）。当我切换“关闭”时，“悬停”事件仍然不会触发。

我对 jQuery 和 StackOverflow 还很陌生，所以如果这个问题是微不足道的，我很抱歉。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:23:51.983

使用 CSS：

```
.element{
   background-color:#FFF;
}
.element.hover{
   background-color:#e7f1f5;
} 
```

而不是`$(this).off('hover');`这样做：

```
$(this).addClass('hover'); 
```

而不是`$(this).on('hover');`这样做：

```
$(this).removeClass('hover'); 
```

# c# - 实施每个属性更改跟踪

> ID：11318559
> 
> 赞同：3
> 
> 时间：2012-07-03T20:19:27.460
> 
> 标签：c#

我正在使用 MVVM 模式编写一个 C# 应用程序，我想知道在每个属性的基础上实现更改跟踪的最佳方法是什么。我目前已实现 INotofyPropertyChanged 并标记整个对象是否脏，但我必须实现的一些要求是他们希望能够通过 UI 上的文本框为每个已更改的属性显示图像。

基本上我的视图模型都有一个私有字段，它是我的类，其中包含来自我的数据访问层的数据。所以基本上一个类将如下所示：

```
private BusinessObj _data

public Name
{
    get{ return _data.Name;}
    set
    {
       if(_data.Name != value)
       {
           _data.Name = value;
           PropertyChanged("Name");
           IsDirty = true;
       }
    }
} 
```

我的数据访问层基本上是序列化和反序列化 XAML 配置文件以配置我们的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:56:26.027

您可以`ObservableCollection`在您的模型类中使用并让您的 UI 在可观察的业务数据集合发生更改时订阅该事件。

在模型视图中

```
public class BusinessObjList : ObservableCollection<BusinessObj>
{
   public BusinessObjList() : base()

   public void AddBusinessObj
   {
       // your own manipulation
   }
} 
```

在用户界面中

```
BusinessObjList BL = new BL();
BL.CollectionChanged += new NotifyCollectionChangedEventHandler(bl_CollectionChanged);

static void bl_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
   // handle the change in UI.
} 
```

# winapi - 64 位 RTC 和高分辨率性能计数器是否相同？

> ID：11318560
> 
> 赞同：2
> 
> 时间：2012-07-03T20:19:28.010
> 
> 标签：winapi

高分辨率性能计数器和 64 位 RTC 是否都基于系统启动后的 CPU 周期数工作？两者都使用相同的硬件？

吉特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T00:05:24.873

这取决于主板 + BIOS，HAL（硬件抽象层）将其拾起。但它不是传统的，而且现在肯定不是具有可变 cpu 时钟速率的。主板制造商通常会选择芯片组中可用的频率。传统速率为 1.1932 MHz，[NTSC 色同步频率](http://en.wikipedia.org/wiki/NTSC#Color_encoding)除以 3 和 Intel 8253 定时器芯片的时钟源。但由于无情的成本削减，不再存在。

始终使用 QueryPerformanceFrequency()。

# javascript - Chrome 扩展：将数据从 background.js 发送到 contentscript.js

> ID：11318561
> 
> 赞同：1
> 
> 时间：2012-07-03T20:19:31.160
> 
> 标签：javascript, google-chrome-extension

我正在尝试使用 chrome exstion API 做一些事情，我想将数据从 background.js 发送到 contentscrip.js 。我所做的一切都失败了，甚至尝试复制并粘贴谷歌示例，但仍然没有成功。（这样做了 2 天，哈哈）

这是我的 json 文件：

```
 {
  "name": "BlaExtension",
  "version": "0.1",
  "description": "bla the the exstion",
  "permissions": [
    "tabs","http://*/*","https://*/*"
  ],
  "background": {
    "scripts": ["background.js"]
  },
  "content_scripts": [
    {
       "matches": ["http://*/*","https://*/*"],
      "js": ["content_script.js"]
    }
  ],

     "permissions": [
    "tabs", "http://www.google.com/*"
  ],
  "manifest_version": 2
} 
```

背景.js

```
chrome.tabs.getSelected(null, function (tab) {
    chrome.tabs.sendMessage(tab.id, { greeting: "hello" }, function (response) {
        alert(foo);
    });
}); 
```

content_script.js

```
chrome.extension.onMessage.addListener(function (request, sender, sendResponse) {
  alert(request.greeting);

}); 
```

我尝试在 stackoverflow 上有关消息传递的旧帖子中寻求帮助，但似乎没有任何帮助。我在做什么？（对不起我的英语不好）

# objective-c - NSScrollView 不滚动

> ID：11318562
> 
> 赞同：1
> 
> 时间：2012-07-03T20:19:35.467
> 
> 标签：objective-c, cocoa, osx-lion, appkit, nsscrollview

我正在将使用本[教程](http://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text)的 iPhone 应用程序移植到 Mac 应用程序中。我已经能够让文本显示在 NSScrollView 中，但我无法让文本滚动，我希望有人知道我错过了什么。

在 iPhone 应用中，CTView 是 UIScrollView 的子类

CTView.h：

```
@interface CTView : UIScrollView <UIScrollViewDelegate> { 
```

1）但是AppKit中没有NSScrollViewDelegate。NSScrollView 缺少委托接口是问题吗？

因此对于 Mac 应用程序，CTView.h 如下所示：

```
@interface CTView : NSScrollView 
```

在 CTView.m 我有

```
[self setHasHorizontalScroller:YES];
[self setAcceptsTouchEvents:YES]; 
```

同样在 CTView.m 中，我创建了一个 NSMutableArray 帧作为

```
self.frames = [NSMutableArray array]; 
```

并用框架填充阵列。我还为我希望能够滚动浏览的完整较大图像设置了文档视图的框架：

```
[[self contentView] setFrame:[self bounds]];
[self.documentView setFrame:  NSMakeRect(0, 0, totalPages * self.bounds.size.width, textFrame.size.height)]; 
```

第一帧在 CTView 中可见，但是当我移动水平滚动条时，第二帧不会出现在 CTView 中。

我正在使用 Xcode 4.3.3 和 Mac OS X 10.7.4。

有谁知道我需要与 UIScrollView 做不同的事情才能使 NSScrollView 能够滚动帧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:55:49.363

终于想通了。哇！

1) NSScrollView 需要为其 documentView 提供一个视图，其中 documentView 是滚动的内容。因此，在笔尖中，我创建了一个包含 documentView 视图的 NSScrollView，并将 documentView 设置为该视图，如 CTView.m 中的代码所示

```
NSArray *viewArray     = [self subviews];
NSArray *docViewArray  = [[viewArray objectAtIndex:0] subviews]; 
NSView  *docView       = [docViewArray objectAtIndex:0];

[self setDocumentView:docView]; 
```

2) 然后我将通常会添加到 UIScrollView 的帧数组添加到 NSScrollView 的 documentView。帧数组由多个内容元素组成。

```
 while (textPos < [attString length]) { 
    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(textPos, 0), innerPath, NULL);
    CFRange frameRange = CTFrameGetVisibleStringRange(frame); 

   CTColumnView* content = [[[CTColumnView alloc] initWithFrame: NSMakeRect(0, 0, self.contentSize.width, self.contentSize.height)] autorelease];
    [docView addSubview: content];  // <<-- Here is where the frames are added to the documentView
    textPos += frameRange.length;
  } 
```

这就是诀窍。

# mongodb - 用于用户设计表单的数据存储 - NoSQL for EAV 的任何优势

> ID：11318563
> 
> 赞同：4
> 
> 时间：2012-07-03T20:19:37.343
> 
> 标签：mongodb, entity-attribute-value, dynamic-forms, nosql

我需要在我的软件中允许通过 Web 界面创建用户设计的表单。即，他们创建一个问题、一个类型（文本、单选、复选框等）、选项（如果需要）（单选/检查），然后添加并继续此过程，直到他们在表单中创建了所有字段。

除了查看/填写/打印它们之外，不会对他们进行任何查询，即他们正在添加可以无限次填写的“问卷”（有些可能是 20 次，有些可能是数百万次）。

经过一些研究，似乎 EAV 类型的解决方案听起来不错，除了那里有很多负面看法。许多人建议在这种情况下使用 NoSQL 数据库，但我并没有真正看到它的优点——你仍然有一个包含许多字段的表单，然后是包含许多字段的结果。

某些字段（文本/文本区域/日期）将有一个可能的值，但许多字段也会有多个选项（单选按钮、选择下拉菜单、复选框）。

这是传统 SQL 中的示例设计：

形式：creator_id，名称

form_field: form_id, order, question, type (text, text_area, date, radio, select, check)

form_field_option：form_field_id、名称、值、顺序（用于单选/选择/检查）

form_result：form_id，application_id（不是我使用的名称，但所有结果都属于“应用程序”）

form_field_value：form_result_id、form_field_id、form_field_option_id、值（如果选项字段的值为空白，则文本字段 form_field_option_id 将为空白）

基于此构建表单并获得结果似乎相当容易。它可能会也可能不会完全有效，但是说典型的表格是 5-30 个问题，那会很糟糕吗？

将其放入 NoSQL 数据库（即 Mongo 或类似数据库）中是否有任何优势？如果是这样，你能给我具体的例子来说明它们是什么，并给我一个样本设计吗？我看过很多答案，比如“NoSQL 更适合这个”，但我在这方面没有经验，是因为更快地检索结果，还是什么？使用 NoSQL 会带来什么缺点？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T00:33:16.373

MongoDB 可能比关系数据库更适合这个应用程序。您的基本实体，表单设计和表单结果，实际上是其内容本质上绑定在一起的文档，即表单字段在其父表单的上下文之外几乎没有意义。

MongoDB 将允许您将这些文档存储为单个结构，而不是像在关系数据模型中那样分散在各个表中。

这是 YAML 只是因为它比 JSON 更简洁。底层结构将是相同的。

```
_id: 12345
creator: Adrian
name: NoSQL form demonstrator

fields:
  - id: first_name
    label: First name
    type: text
    required: true

  - id: last_name
    label: Last name
    type: text
    required: true

  - id: dob
    label: Date of birth
    type: date

  - id: bio
    label: Biography
    type: textarea

  - id: drink
    label: What would you like to drink?
    type: select
    options:
      - id: tea
        label: Tea
      - id: coffee
        label: Coffee
      - id: beer
        label: Beer
      - id: water
        label: Mineral water

    - id: mailing_list
      label: Join our mailing list?
      type: check
      default: false 
```

笔记：

您只需将键存储在需要它们的位置，而不是像在关系数据库中那样为每个上下文中的每件事都设置一个列。例如，不需要`required: false`-- 如果这是默认设置，则将其排除在外。

MongoDB 文档具有内在顺序，因此无需在表单设计中创建字段来保存字段的顺序。

表单结果将以相同的方式存储。只需按照您的预期自然存储它们：

```
_id: 545245
form_id: 12345
name: NoSQL form demonstrator

results:
  - id: first_name
    label: First name
    type: text
    value: Adrian

  - id: last_name
    label: Last name
    type: text
    value: Short

  - id: dob
    label: Date of birth
    type: date
    value: 1970-01-01

  - id: bio
    label: Biography
    type: textarea
    value: Doing things on the internet

  - id: drink
    label: What would you like to drink?
    type: select
    value: Tea

  - id: mailing_list
    label: Join our mailing list?
    type: check
    value: false 
```

# git - git 存储库快照与差异

> ID：11318564
> 
> 赞同：1
> 
> 时间：2012-07-03T20:19:45.720
> 
> 标签：git

我多次阅读 git 提交包含所有存储库的快照而不是 diff。但是我不明白存储格式（快照与差异）如何影响其他操作。

对我来说，差异和快照作为存储选项是相等的。这意味着我收到与其中任何一个相同的功能。举个例子：使用快照存储选项来获取差异，需要比较两个快照并检索该差异，使用差异存储选项只需获取此差异。恕我直言，这样的方案适用于所有操作（再举一个例子：检查一些带有快照的分支只需要从快照中提取所有文件，对于差异，有必要应用所有差异，结果将与快照相同）。

那么，快照和差异之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:37:54.070

git commit 引用快照（或完整树）的事实是概念数据模型事实，而不是底层存储选择。

事实上，将提交存储为快照通常是不正确的。打包后，构成提交的“文件”将以类似于差异存储选择的方式针对类似文件进行增量压缩，尽管在 git 中它们可能针对不一定是相同的先前版本的东西进行增量压缩文件。

我的建议是先学习 git 的概念和它的数据模型，不要一开始就担心存储机制。

# ember.js - 使用 Ember 进行导航的正确方法

> ID：11318572
> 
> 赞同：28
> 
> 时间：2012-07-03T20:20:14.617
> 
> 标签：ember.js, ember-old-router, ember-router

导航侧边栏的“正确方式”（或至少是选项，如果没有单一的“Ember 方式”）是什么？我应该以某种方式查看 ContainerViews，还是应该只使用新的出口功能并将导航粘贴在我的应用程序视图中？

此外，根据 URL（我正在使用路由）在 li 上设置 .active 类的“正确方法”是什么？有什么帮手吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-03T21:41:17.797

**<更新日期="2013-01-16">**

由于最近路由器 API 发生了变化，前面的示例不再有效，所以我不打算修复这些。所有使用旧路由器的应用程序都应尽快迁移到最新版本。

这是一个更新的小提琴： [**来源**](http://jsfiddle.net/schawaska/SqhJB/)| [**现场演示**](http://jsfiddle.net/schawaska/SqhJB/show)

我会经常维护/修复/添加功能。

**2013 年 4 月 3 日编辑**：

替代样品 - WIP：[**来源**](http://jsfiddle.net/dWcUp/171/)| [**演示**](http://jsfiddle.net/dWcUp/171/embedded/result/)

# 以下所有内容均已弃用

**<更新>**

2012-11-09

只需将链接添加到更好的样本，该链接还解决了OP想要在选择给定路由时在当前Navbar项目中设置类的零件

[JSFiddle](http://jsfiddle.net/schawaska/hEx84/)中的源代码（单击[此处](http://jsfiddle.net/schawaska/hEx84/show/)查看它的运行情况）

如果您查看 NavigationController，您将看到“selected”属性，我使用它来检查子视图 NavigationItemView 的 isActive 方法。`menu`isActive 将根据同一视图（在模板中定义）的属性中的值和`selected`（控制器的）属性中的值返回 true 或 false 。然后检查 classNameBinding 表达式，该表达式将“活动”设置为该特定孩子的类或不设置任何内容。还要检查 ConnectOutlets，这是我将该导航项标记为选中的位置。

这是在[ember-latest](http://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js)上运行的。我还使用了一些[Ember.Bootstrap](https://github.com/emberjs-addons/ember-bootstrap)以及一些原始的 Twitter Bootstrap 功能/类/等（但我已经用[metro-bootstrap](http://talkslab.github.com/metro-bootstrap/)替换了样式）。

由于空间和所有的原因，这里没有粘贴整个东西。我将保留原始代码并链接到相同的代码以供参考原始问题/答案。

我会不断更新这个新样本，因为 ember 很有趣 =)

**</更新>**

**[这个 fiddle](http://jsfiddle.net/schawaska/pfbva/)**从一个视图中显示了一个静态导航栏，outlet 仅用于内容显示，或者您可以直接到显示中**[查看它正在运行](http://fiddle.jshell.net/schawaska/pfbva/show)**

如您所见，您可以使用包含操作链接的简单视图，并在应用程序主视图中呈现此视图。“开始”下的子路线也有一个迷你导航栏，来自类似的模板。

**车把**：

```
<script type="text/x-handlebars" data-template-name="application">
    <h1>My Ember Application</h1>
    {{view App.NavbarView controllerBinding="controller.controllers.navbarController"}}
    <br /><hr />
    <div class="content">
        {{outlet}}
    </div>
</script>

<script type="text/x-handlebars" data-template-name="navbar">
    <ul>
        <li><a href="#" {{action gotoHome}}>Home</a></li>
        <li><a href="#" {{action gotoStarting}}>Getting Started</a></li>
        <li><a href="#" {{action gotoCommunity}}>Community</a></li>
    </ul>
</script>

<script type="text/x-handlebars" data-template-name="getting-started-menu">
    <ul>
        <li><a href="#" {{action gotoIndex}}>Overview</a></li>
        <li><a href="#" {{action gotoMVC}}>About MVC</a></li>
        <li><a href="#" {{action gotoEmber}}>About Ember</a></li>
    </ul>
</script>

<script type="text/x-handlebars" data-template-name="home">
    <h2>Welcome</h2>
    <br />
    <img src="http://emberjs.com/images/about/ember-productivity-sm.png" alt="ember logo" />
    <br />
    <br />
    <p>Bacon ipsum dolor sit amet qui ullamco exercitation, shankle beef sed bacon ground round kielbasa in. Prosciutto pig bresaola, qui meatloaf ea tongue non dolore et pork belly andouille ribeye spare ribs enim. Enim exercitation elit, brisket nisi ex swine in jerky consequat pastrami dolore sed ad. In drumstick cow, salami swine fatback short ribs ham ut in shankle consequat corned beef id. Deserunt prosciutto beef speck. Sirloin incididunt kielbasa excepteur irure.</p>
    <p>Do beef ribs dolore swine chicken shankle, venison officia qui magna ea anim. Jerky shank shankle, tongue in pork loin commodo boudin elit cupidatat turducken id capicola meatball. Strip steak ham hock tenderloin, id chicken drumstick sint jerky. Dolore veniam cillum minim, pariatur est beef. Sunt fatback tri-tip ex chuck.</p>
    <br />
    <br />
    <strong>Note</strong>: This is a basic template with no <i>bindings</i>
</script>

<script type="text/x-handlebars" data-template-name="starting">
    <h2>Getting Started with Ember</h2>
    {{view App.StartingMenuView}}
    <br />
    <br />
    <br />
    <p>Bacon ipsum dolor sit amet qui ullamco exercitation, shankle beef sed bacon ground round kielbasa in. Prosciutto pig bresaola, qui meatloaf ea tongue non dolore et pork belly andouille ribeye spare ribs enim. Enim exercitation elit, brisket nisi ex swine in jerky consequat pastrami dolore sed ad. In drumstick cow, salami swine fatback short ribs ham ut in shankle consequat corned beef id. Deserunt prosciutto beef speck. Sirloin incididunt kielbasa excepteur irure.</p>
    <p>Do beef ribs dolore swine chicken shankle, venison officia qui magna ea anim. Jerky shank shankle, tongue in pork loin commodo boudin elit cupidatat turducken id capicola meatball. Strip steak ham hock tenderloin, id chicken drumstick sint jerky. Dolore veniam cillum minim, pariatur est beef. Sunt fatback tri-tip ex chuck.</p>
    <br />
    <br />
    <strong>Note</strong>: This is a basic template has a menu view embedded
</script>

<script type="text/x-handlebars" data-template-name="about-mvc">
    <h2>About MVC</h2>
    {{view App.StartingMenuView}}
    <br /><br />
    <br /><p>
        Model–View–Controller (MVC) is a software design for interactive computer user interfaces that separates the representation of  information from the user's interaction with it.[1][8] The model consists of application data and business rules, and the controller mediates input, converting it to commands for the model or view.[3] A view can be any output representation of data, such as a chart or a diagram. Multiple views of the same data are possible, such as a pie chart for management and a tabular view for accountants.
    </p>
    Read more at <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">Wikipedia</a>
    <br />
    <br />
    <strong>Note</strong>: This is a basic template has a menu view embedded
</script>

<script type="text/x-handlebars" data-template-name="about-ember">
    <h2>About Ember</h2>
    {{view App.StartingMenuView}}
    <br /><br />
    <br />
    <p>A framework for creating <strong>ambitious</strong> web applications</p>
    Read more at <a href="http://emberjs.com/about/" target="_blank">emberjs.com</a>
    <br />
    <br />
    <p>Bacon ipsum dolor sit amet qui ullamco exercitation, shankle beef sed bacon ground round kielbasa in. Prosciutto pig bresaola, qui meatloaf ea tongue non dolore et pork belly andouille ribeye spare ribs enim. Enim exercitation elit, brisket nisi ex swine in jerky consequat pastrami dolore sed ad. In drumstick cow, salami swine fatback short ribs ham ut in shankle consequat corned beef id. Deserunt prosciutto beef speck. Sirloin incididunt kielbasa excepteur irure.</p>
    <p>Do beef ribs dolore swine chicken shankle, venison officia qui magna ea anim. Jerky shank shankle, tongue in pork loin commodo boudin elit cupidatat turducken id capicola meatball. Strip steak ham hock tenderloin, id chicken drumstick sint jerky. Dolore veniam cillum minim, pariatur est beef. Sunt fatback tri-tip ex chuck.</p><br />
    <br />
    <strong>Note</strong>: This is a basic template has a menu view embedded
</script>

<script type="text/x-handlebars" data-template-name="community">
    <h1>Ember Community</h1>
    <p>
        Get in touch with the community
    </p>
    <p>Featured contact info:</p>
    {{#each item in content}}
        <a {{bindAttr href="item.linkUrl" }} target="_blank">
            <img height="32" width="32" {{bindAttr src="item.imageUrl" title="item.displayName" alt="item.displayName"}} /><br />
            {{item.displayName}}
        </a><br />
    {{/each}}
    <br />
    Check more information about ember community at <a href="http://emberjs.com/community/" target="_blank">emberjs.com</a>
    <br />
    <br />
    <strong>Note</strong>: This is a template with a <i>foreach</i> type of loop
</script>​ 
```

**JavaScript**：

```
App = Em.Application.create();

App.ApplicationController = Em.Controller.extend();
App.ApplicationView = Em.View.extend({
    templateName: 'application'
});

App.HomeController = Em.Controller.extend();
App.HomeView = Em.View.extend({
    templateName: 'home'
});

App.NavbarController = Em.Controller.extend();
App.NavbarView = Em.View.extend({
    templateName: 'navbar'
});

App.StartingController = Em.Controller.extend();
App.StartingView = Em.View.extend({
    templateName: 'starting'
});

App.StartingMenuController = Em.Controller.extend();
App.StartingMenuView = Em.View.extend({
    templateName: 'getting-started-menu'
});

App.AboutMVCController = Em.Controller.extend();
App.AboutMVCView = Em.View.extend({
    templateName: 'about-mvc'
});

App.AboutEmberController = Em.Controller.extend();
App.AboutEmberView = Em.View.extend({
    templateName: 'about-ember'
});

App.CommunityModel = Em.Object.extend({
    displayName: null,
    linkUrl: null,
    imageUrl: null
});

App.CommunityController = Em.ArrayController.extend({
    content: [],
    init: function() {
        this._super();
        this.pushObject(
        App.CommunityModel.create({
            displayName: 'Twitter',
            linkUrl: 'https://twitter.com/#!/emberjs',
            imageUrl: 'http://icons.iconarchive.com/icons/iconshots/social-media-network/32/twitter-icon.png'
        }));
        this.pushObject(
        App.CommunityModel.create({
            displayName: 'GitHub',
            linkUrl: 'https://github.com/emberjs/ember.js',
            imageUrl: 'http://www.workinprogress.ca/wp-content/uploads/github.png'
        }));
    }
});

App.CommunityView = Em.View.extend({
    templateName: 'community',
    contentBinding: 'App.CommunityController.content'
});

App.Router = Em.Router.extend({
    enableLogging: true,
    location: 'hash',

    root: Em.Route.extend({
        // EVENTS
        gotoHome: Ember.Route.transitionTo('home'),
        gotoStarting: Ember.Route.transitionTo('starting.index'),
        gotoCommunity: Ember.Route.transitionTo('community.index'),

        // STATES
        home: Em.Route.extend({
            route: '/',
            connectOutlets: function(router, context) {
                router.get('applicationController').connectOutlet('home');
            }
        }),
        starting: Em.Route.extend({
            // SETUP
            route: '/starting',
            connectOutlets: function(router, context) {
                router.get('applicationController').connectOutlet('starting');
            },
            // EVENTS
            gotoMVC: Ember.Route.transitionTo('mvc'),
            gotoEmber: Ember.Route.transitionTo('ember'),
            gotoIndex: Ember.Route.transitionTo('index'),

            // STATES
            index: Em.Route.extend({
                route: '/',
                connectOutlets: function(router, context) {
                    router.get('applicationController').connectOutlet('starting');
                }
            }),
            mvc: Em.Route.extend({
                route: '/mvc',
                connectOutlets: function(router, context) {
                    router.get('applicationController').connectOutlet('aboutMVC');
                }
            }),
            ember: Em.Route.extend({
                route: '/ember',
                connectOutlets: function(router, context) {
                    router.get('applicationController').connectOutlet('aboutEmber');
                }
            })
        }),
        community: Em.Route.extend({
            // SETUP
            route: '/community',
            connectOutlets: function(router, context) {
                router.get('applicationController').connectOutlet('community');
            },
            // EVENTS
            // STATES
            index: Em.Route.extend({
                route: '/',
                connectOutlets: function(router, context) {
                    router.get('applicationController').connectOutlet('community');
                }
            })
        })
    })
});
App.initialize();​ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T16:03:01.930

我不喜欢 MilkyWayJoe 的回答，因为如果您迟早要更改状态的命名或您必须通过代码和视图进行的任何操作，那么还为每条路线添加一个函数似乎是不可取的。我的方法更加程序化和模块化：

```
# Parent View-Tamplate, holding the navbar DOM elements
App.NavView = Ember.View.extend( 
  controller: App.NavArrayController
  templateName: "ember-nav"
)
# We push NavItems into this array
App.NavArrayController = Ember.ArrayController.create(
  content: Ember.A([])
)
# NavItem has two settable properties and 
# an programmatic active state depending on the router
App.NavItem = Ember.Object.extend(
  title: ''
  goto: null    # <=this is the name of the state we want to go to!
  active: (->
    if App.router.currentState.name == @.get "goto"
      true
    else
      false
  ).property('App.router.currentState.name').cacheable()
)
# the actual NavElement which gets the class="active" if the 
# property "active" is true, plus a on-click binding to
# make the Router transition to this state
App.NavItemView = Ember.View.extend(
 tagName: "li"
  classNameBindings: ["active"]
  click: ->
    App.router.transitionTo(@get('goto'))
    false
) 
```

nav-view.hbs（用于 twitter-bootstrap 风格的导航）

```
<div class="nav-collapse collapse">
  <ul class="nav">
    {{#each App.NavArrayController}}
      {{#view App.NavItemView classBinding="active" gotoBinding="goto"}}
        <a href="#" {{bindAttr data-goto="goto"}}> {{title}}</a>
      {{/view}}
    {{/each}}
  </ul>
</div> 
```

这样，我可以在路由器中创建和处理我的路线，并保持导航定义并排：

```
# put this somewhere close to the Router 
App.NavArrayController.pushObjects(
  [
    App.NavItem.create(
      title: 'Home'
      goto: 'home'
    ),
    App.NavItem.create(
      title: 'Chat'
      goto: 'chat'
    ),
    App.NavItem.create(
      title: 'Test'
      goto: 'test'
    )
  ]
) 
```

# sql-server - 仅将周数应用于整周的日期

> ID：11318574
> 
> 赞同：1
> 
> 时间：2012-07-03T20:20:30.057
> 
> 标签：sql-server, tsql, sql-server-2005, datetime

现在的时间是：`(m/d/yyyy) => 2009/01/04`

![在此处输入图像描述](../Images/d1c945a78850e1b9a5880b77c405f10b.png)

使用此命令`using datepart(wk,'20090104')`，我可以获得周数（对于任何给定日期）。

所以 ：

```
SELECT datepart(wk,'20090101') //1
SELECT datepart(wk,'20090102') //1
SELECT datepart(wk,'20090103') //1
SELECT datepart(wk,'20090104') //2 
```

到现在为止还挺好。

问题 ：

这 3 个第一次约会不是整周的一部分，所以我不能把它们放在一个固定的 52 周图表中。

我们公司需要在一年的**52 周**中查看有关每个**整**周的信息。（每年有 52 个整周）。

 **![在此处输入图像描述](../Images/7b94d4c2e116c8d8c370a05e069f02a8.png)

所以`20090101`不属于2009年的第一周！

它属于上一年（*这与我的问题无关*）

所以我需要一个UDF（*我一直在寻找很多，并且`ISOWEEK`没有满足我的需求*），它`datetime`会给我`Week Number`（周=整周，所以不考虑部分周）。

例子 ：

```
calcweekNum ('20090101') //52 ...from the last year
calcweekNum ('20090102') //52 ...from the last year
calcweekNum ('20090103') //52 ...from the last year
calcweekNum ('20090104') //1
..
..
calcweekNum ('20090110') //1
calcweekNum ('20090111') //2
calcweekNum ('20090112') //2
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T20:49:35.343

这是一种不同的方法。您只需要提供年份：

```
DECLARE @year INT = 2009;

DECLARE @start SMALLDATETIME;
SET @start = DATEADD(YEAR, @year-1900, 0);

;WITH n AS
(
  SELECT TOP (366) -- in case of leap year
      d = DATEADD(DAY, ROW_NUMBER() OVER (ORDER BY name)-1, @start)
    FROM sys.all_objects
),
x AS 
(
  SELECT md = MIN(d) FROM n 
    WHERE DATEPART(WEEKDAY, d) = 1 -- assuming DATEFIRST is Sunday
),
y(d,wk) AS
(
  SELECT n.d, ((DATEPART(DAYOFYEAR, n.d) - DATEDIFF(DAY, @start, x.md)-1)/7) + 1
  FROM n CROSS JOIN x
  WHERE n.d >= x.md
  AND n.d < DATEADD(YEAR, 1, @start)
)
SELECT [date] = d, [week] = wk
FROM y WHERE wk < 53
ORDER BY [date]; 
```

结果：

```
date        week
----------  ----
2009-01-04  1
2009-01-05  1
2009-01-06  1
2009-01-07  1
2009-01-08  1
2009-01-09  1
2009-01-10  1
2009-01-11  2
2009-01-12  2
...
2009-12-25  51
2009-12-26  51
2009-12-27  52
2009-12-28  52
2009-12-29  52
2009-12-30  52
2009-12-31  52 
```

请注意，第 52 周不一定是整周，并且在某些情况下（例如 2012 年），一年中的最后一天或两天可能在第 53 周，因此它们被排除在外。

另一种方法是重复 MIN 表达式两次：

```
DECLARE @year INT = 2009;

DECLARE @start SMALLDATETIME;
SET @start = DATEADD(YEAR, @year-1900, 0);

;WITH n AS
(
  SELECT TOP (366) -- in case of leap year
      d = DATEADD(DAY, ROW_NUMBER() OVER (ORDER BY name)-1, @start)
    FROM sys.all_objects
),
y(d,wk) AS
(
  SELECT n.d, ((DATEPART(DAYOFYEAR, n.d) - DATEDIFF(DAY, @start, (SELECT MIN(d) 
    FROM n WHERE DATEPART(WEEKDAY, d) = 1))-1)/7) + 1
  FROM n
  WHERE n.d >= (SELECT md = MIN(d) FROM n WHERE DATEPART(WEEKDAY, d) = 1)
  AND n.d < DATEADD(YEAR, 1, @start)
)
SELECT [date] = d, [week] = wk
FROM y WHERE wk < 53
ORDER BY d; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T23:08:19.163

这是一个供您即时计算的函数：

```
CREATE FUNCTION dbo.WholeWeekFromDate (
   @Date datetime
)
RETURNS tinyint
AS BEGIN
RETURN (
   SELECT DateDiff(Day, DateAdd(Year, DateDiff(Year, 0, CalcDate), 0), CalcDate) / 7 + 1
   FROM (SELECT DateAdd(Day, (DateDiff(Day, 0, @Date) + 1) / 7 * 7, 0)) X (CalcDate)
);
END; 
```

我不建议您使用它，因为它可能会因为每行调用一次而表现不佳。如果您绝对必须有一个函数才能在实际查询中使用，则将其转换为返回单个列和行的内联函数，并按如下方式使用它：

```
SELECT
   OtherColumns,
   (SELECT WeekNumber FROM dbo.WholeWeekFromDate(DateColumn)) WeekNumber
FROM
   YourTable; 
```

这将允许它在执行计划中“内联”并执行得更好。

但正如其他人所建议的那样，更好的是使用 BusinessDate 表。这是为您创建一个的先机：

```
CREATE TABLE dbo.BusinessDate (
   BusinessDate date NOT NULL CONSTRAINT PK_BusinessDate PRIMARY KEY CLUSTERED,
   WholeWeekYear smallint NOT NULL
      CONSTRAINT CK_BusinessDate_WholeWeekYear_Valid
      CHECK (WholeWeekYear BETWEEN 1900 AND 9999),
   WholeWeekNumber tinyint NOT NULL
      CONSTRAINT CK_BusinessDate_WholeWeekNumber_Valid
      CHECK (WholeWeekNumber BETWEEN 1 AND 53),
   Holiday bit CONSTRAINT DF_BusinessDate_Holiday DEFAULT (0),
   Weekend bit CONSTRAINT DF_BusinessDate_Weekend DEFAULT (0),
   BusinessDay AS
      (Convert(bit, CASE WHEN Holiday = 0 AND Weekend = 0 THEN 1 ELSE 0 END)) PERSISTED
); 
```

我什至会从 1900-01-01 到 2617-09-22 填充它（这足以满足您产品的预计寿命吗？它只有 7.8MB，所以不要担心过大）：

```
WITH A (N) AS (SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1
   UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1),
B (N) AS (SELECT 1 FROM A F, A A, A L, A C, A O, A N),
C (N) AS (SELECT Row_Number() OVER (ORDER BY (SELECT 1)) FROM B),
Dates AS (
   SELECT
      N,
      DateAdd(Day, N, '18991231') Dte,
      DateAdd(Day, N / 7 * 7, '19000101') CalcDate
   FROM C
)
INSERT dbo.BusinessDate
SELECT
   Dte,
   Year(CalcDate),
   DateDiff(Day, DateAdd(Year, DateDiff(Year, 0, CalcDate), 0), CalcDate) / 7 + 1,
   0,
   (N + 6) % 7 / 5 -- calculate weekends
FROM Dates; -- 3-7 seconds or so on my VM server 
```

然后在日期加入表，并使用 WholeWeekNumber 列作为输出。您也可以考虑添加一个 WeekNumberYear，因为如果没有这个，很难确定 2009-01-01 的 52 确实属于 2008 ......如果你不这样做，肯定会有一个奇怪的数据点（笑）。

示例表内容：

```
BusinessDate WholeWeekYear WholeWeekNumber Holiday Weekend BusinessDay
------------ ------------- --------------- ------- ------- -----------
   1/1/2009          2008              52       0       0           1 
   1/2/2009          2008              52       0       0           1 
   1/3/2009          2008              52       0       1           0 
   1/4/2009          2009               1       0       1           0 
   1/5/2009          2009               1       0       0           1 
   1/6/2009          2009               1       0       0           1 
   1/7/2009          2009               1       0       0           1 
   1/8/2009          2009               1       0       0           1 
   1/9/2009          2009               1       0       0           1 
  1/10/2009          2009               1       0       1           0 
  1/11/2009          2009               2       0       1           0 
```

如果您真的不想将其用作一般的营业日期计算表，您可以删除最后 3 列，否则，将公司假期的 Holiday 列更新为 1。

注意：如果您确实制作了上面的表，并且您对它的访问通常在不同的列上使用 JOIN 或 WHERE 条件`BusinessDate`，则将主键设为非聚集的并添加从备用列开始的聚集索引。

*上述某些脚本需要 SQL 2005 或更高版本。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T20:24:30.113

设置一个自定义日历表相对容易，其中一年中的每个日期都有一行，然后有其他字段可以让您根据需要进行汇总。当我有客户使用不同的日历（即会计年度）时，我会这样做，它使查询逻辑非常简单。

然后你只需加入 date-to-date 并获得你想要的星期数。

```
date       | reporting year | reporting week
-----------|----------------|---------------
2009-01-01 | 2008           | 52
2009-01-02 | 2008           | 52
2009-01-03 | 2008           | 52
2009-01-04 | 2009           | 01
2009-01-05 | 2009           | 01
etc. 
```

然后使用它（例如，通过您的自定义周获得总销售额汇总，没有验证我的 sql）：

```
select reporting_year, reporting_month, sum(sales) 
  from sales
  inner join custom_date_table cdt on cdt.sysdate = sales.sysdate
  group by reporting_year, reporting_month
  where report_year=2009 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T20:38:05.940

```
DECLARE @StartDate DATE;
SET @StartDate = '20120101';

WITH Calendar AS (
    SELECT @StartDate AS DateValue
        ,DATEPART(DW, @StartDate) AS DayOfWeek
        ,CASE WHEN DATEPART(DW, @StartDate) = 1 THEN 1 ELSE 0 END AS WeekNumber
    UNION ALL
    SELECT DATEADD(d, 1, DateValue)
        ,DATEPART(DW, DATEADD(d, 1, DateValue)) AS DayOfWeek
        ,CASE WHEN DayOfWeek = 7 THEN WeekNumber + 1 ELSE WeekNumber END
    FROM Calendar 
    WHERE DATEPART(YEAR, DateValue) = DATEPART(YEAR, @StartDate)
)
SELECT DateValue, WeekNumber
FROM Calendar
WHERE WeekNumber BETWEEN 1 AND 52
    AND DATEPART(YEAR, DateValue) = DATEPART(YEAR, @StartDate)
OPTION (MAXRECURSION 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T20:26:08.147

不要使用 UDF，而是使用[日历表](https://stackoverflow.com/questions/5635594/how-to-create-a-calender-table-for-100-years-in-sql)，然后您可以完全按照您的公司需要定义周数，并简单地从表中查询它们，这将比使用 UDF 更容易并且可能更快。

日历表在 SQL 中有很多用途（搜索此站点或 Google），所以无论如何您都应该创建它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-03T20:23:10.257

对此没有好的答案。

一年不是 52 周。

平年是 52 周零*一天*，闰年是 52 周零*两天。***

# android - 以 3.0+ 为目标时，在可运行文件中获取 NetworkOnMainThreadException

> ID：11318575
> 
> 赞同：1
> 
> 时间：2012-07-03T20:20:31.060
> 
> 标签：android, multithreading, asynchronous, handler, networkonmainthread

由于 ActionBarSherlock 的问题，我将 Manifest 更改为目标 API 16，从那时起，我检查当前播放歌曲的处理程序不再工作。它在我在下面标记的行上引发 NetworkOnMainThreadException。

我究竟做错了什么？我以为我已经正确设置了多线程。

这是我的代码：

```
 handler = new Handler();

    updateSongTask = new Runnable() {
        public void run() {
            Log.d("asdf", "scraper started");
            Scraper scraper = new ShoutCastScraper(); // THIS LINE throws the exception
            List<Stream> streams;
            try {
                streams = scraper.scrape(new URI(url));
                for (Stream stream : streams) {                     
                    Intent songIntent = new Intent(CUSTOM_INTENT);

                    String[] songAndArtist = songAndArtist(stream.getCurrentSong());
                    songIntent.putExtra("song", songAndArtist[0]);
                    songIntent.putExtra("artist", songAndArtist[1]);
                    songIntent.putExtra("stationurl", url);
                    sendBroadcast(songIntent);
                    Log.d("asdf", "should send broadcast" );

                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            handler.postDelayed(this, 5000);
        }
    };

    handler.postDelayed(updateSongTask, 0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T20:22:42.763

`postDelayed()`告诉 Android`Runnable`在延迟后在主应用程序线程上运行。它不在`Runnable`后台线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:03:12.847

CommonsWare 是对的。我只是在我的处理程序中放置了一个 ASyncTask 并将我所有的歌曲更新（工作）代码移动到 doInBackground() 方法中。适用于所有版本，没有网络异常！

# php - 使用 PHPMailer 和 GMAIL SMTP 发送电子邮件

> ID：11318578
> 
> 赞同：2
> 
> 时间：2012-07-03T20:20:36.077
> 
> 标签：php, phpmailer

我已经阅读了网络上的每个示例，但我似乎仍然无法连接到 GMAIL SMTP。这是我正在运行的代码：

```
include("phpMailer/class.phpmailer.php"); // path to the PHPMailer class
$mail = new PHPMailer(); 
$mail->IsSMTP(); // send via SMTP

$mail->SMTPAuth = true; // turn on SMTP authentication
$mail->Username = "myUsername"; // SMTP username
$mail->Password = "myPassword"; // SMTP password
$mail->SMTPDebug = 1;
$webmaster_email = "webMasterEmail@gmail.com"; //Reply to this email ID
$email="someone@gmail.com"; // Recipients email ID
$name="SomeonesName"; // Recipient's name
$mail->From = $webmaster_email;
$mail->FromName = "Me";
$mail->AddAddress($email,$name);
$mail->AddReplyTo($webmaster_email,"Webmaster");
$mail->WordWrap = 50; // set word wrap
$mail->IsHTML(true); // send as HTML
$mail->Subject = "This is the subject";
$mail->Body = "Hi,
This is the HTML BODY "; //HTML Body
$mail->AltBody = "This is the body when user views in plain text format"; //Text Body
if(!$mail->Send())
{
    echo "Mailer Error: " . $mail->ErrorInfo;
}
else
{
    echo "Message has been sent";
} 
```

我尝试在此处设置端口，并且我还在 class.smtp.php 文件中使用以下内容进行了当前设置：

```
$host = "ssl://smtp.gmail.com";
$port = 465; 
```

我不断收到相同的错误，并且已确保启用了 ssl。我得到的错误是：

```
SMTP -> ERROR: Failed to connect to server: No connection could be made because the target machine actively refused it.(10061) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:41:31.693

正如我上面提到的，我已经通过摆脱 ; 来启用 ssl。与 php_openssl.dll 并重新启动 Apache 就行了。我做了更多阅读，发现有些人在启用命令之前也有“[PHP_OPENSSL]”。我添加了它并重新启动了 Apache，一切正常！感谢所有的评论

在 php.ini 中：

```
[PHP_OPENSSL]
extension=php_openssl.dll 
```

# php - 使用字母数字、逗号、句点、感叹号等的 preg_match 和 reg 表达式

> ID：11318579
> 
> 赞同：1
> 
> 时间：2012-07-03T20:20:37.457
> 
> 标签：php, regex, preg-match

我有一个地狱般的时间想出一种体面的方法，使这个 if 语句在文件中搜索这些代码。我设置了要从中读取的文本文件：

**我的文件.txt**

```
r)
0Y7
1a6
q.
@g
@(
#a
!P
T[
V}
0, 
```

这是我的工作的简要说明。

```
$subject = file_get_contents(fvManager_Path . 'myfile.txt');
if ( preg_match('/^[a-zA-Z0-9,]+$/',$result['fmbushels_itemCode'], $subject) ) { 
```

基本上我正在尝试逐行搜索文本文件以查看整个字符串是否存在。它们也区分大小写。

$result['fmbushels_itemCode'] 来自 sql 查询，并且总是在文本中返回类似于上面的代码。

我很感激这方面的任何帮助。如果有人知道这样做的更好方法或不同的命令，我也愿意试一试:)

编辑：

```
private function _fvShareBushels() {
$subject = file_get_contents(fvManager_Path . 'myfile.txt');

if (count($vShareArray) > 0) {
$vCntMoves = count($vShareArray);

for ($vI = 0;$vI < $vRunMainLoop;$vI++) {
sell $result['fmbushels_itemCode']);    
}
}
} 
```

这是一段大代码。由于职位限制，我不得不撕掉大部分内容。我可以工作的领域是：

```
if (count($vShareArray) > 0) { 
```

如果我能做到这一点：

```
if (count($vShareArray) > 0 && $result['fmbushels_itemCode'] **is not in** $subject) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:28:40.033

如果要逐行执行，请使用 file() 函数。

```
$f = file(fvManager_Path . 'myfile.txt');
foreach($f AS $line){
    // $line is current line at file
} 
```

我不确定您是否完全理解 preg_match 的工作原理。第一个参数是正则表达式模式，第二个是你想要匹配的模式，第三个是匹配的数组。因此，对于第二个参数中匹配的每个有效模式，都会在数组上创建一个新索引。

我不是 100% 你想要完成的事情。您是否尝试查看`$result['fmbushels_itemCode']`文件中是否存在？

如果上述情况正确，您只需要执行以下操作：

```
$f = file('myfile.txt');
array_map('trim', $f);
if(in_array($result['fmbushels_itemCode'], $f)){
    // success
} 
```

# visual-studio-2008 - 可能由于安全原因，Windows HTML 帮助文件未显示

> ID：11318589
> 
> 赞同：0
> 
> 时间：2012-07-03T20:21:05.317
> 
> 标签：visual-studio-2008, mfc, html-helper

我想知道是否有人以前遇到过这个问题，并希望有一个解决方案。我目前正在开发的程序是一个 MFC 应用程序，并且`.exe`由于依赖性问题而作为（无安装屏蔽）分发。我包括一个 HTML 帮助文件：`.chm`扩展，嵌入在资源中。当用户请求帮助文件时，它会从资源中提取为二进制文件并复制到文件系统中。`FindResource`, `LoadResource`, 和`LockResource`调用。提取文件后，我会这样调用`ShellExecute`：

```
ShellExecute(m_hWnd, L"open", pathToFile, NULL, NULL, SW_SHOWDEFAULT); 
```

HTML 帮助查看器启动时没有问题。但是，在某些计算机上无法查看文件中的页面。我看到“无法显示网页”消息。

我注意到两件事：

1.  该错误仅在“您要运行此文件吗？”之后发生。当用户第一次尝试进入程序时会出现对话框。

2.  如果 .exe 从 USB 运行（而不是从电子邮件下载），则可以查看 HTML 帮助文件

有没有人发生过这样的事情？有什么建议么？

**编辑：**

我正在使用`ShellExecute()`，因为`HtmlHelp()`调用给出了相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:17:31.417

如果您检查 .chm 文件的属性（通过 Windows 资源管理器），是否会显示：
“此文件来自另一台计算机，可能会被阻止以帮助保护这台计算机”。
这将显示在“属性”窗口中“常规”选项卡的底部附近。

如果是这样，请单击取消阻止按钮。

有关详细信息，请参阅 [http://blog.crowe.co.nz/archive/2007/04/13/719.aspx](http://blog.crowe.co.nz/archive/2007/04/13/719.aspx) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:21:35.733

如果您不使用 ShellExecute()，而是使用“正确”方式，通过 HtmlHelp() api 调用会发生什么？

您的 htmlhelp 文件中是否有活动内容（即 javascript）？

你最好不要解压到 .exe 所在的同一个目录。例如，当用户从网络驱动器上运行你的程序时，你会得到同样的错误（从网络驱动程序打开的 htmlhelp 文件被标记为“不受信任”） '）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:55:28.547

我能够找到解决方案。

[两个安全更新](http://support.microsoft.com/kb/892675)导致了这个问题。以下链接概述了问题并为大多数非程序员提供了解决方案。我使用了支持页面中的示例 #2 以及[Registry Reference API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724875%28v=vs.85%29.aspx)来解决问题。

# css - 标题没有出现在 IE 7 中...可能是什么问题？

> ID：11318590
> 
> 赞同：0
> 
> 时间：2012-07-03T20:21:06.207
> 
> 标签：css, internet-explorer, internet-explorer-7

像往常一样，我们在 IE 中遇到了问题。

无论出于何种原因，标题都没有出现在 IE7 中。

[http://stevens.usc.edu/innovationatUSC/](http://stevens.usc.edu/innovationatUSC/)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:26:30.437

IE7 不理解 HTML5 元素，你需要一个“shiv”，在这里你可以找到它：[http ://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:36:07.203

将此代码插入到 head 元素中：

```
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

此外，您应该为所有 html5 元素添加一个“显示：块”作为 CSS 重置的一部分，以便 IE 知道它们是块元素：

```
article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:30:03.617

如 Dive Into Html 5 中所述，IE7 默认不支持该标签。

[http://fortuito.us/diveintohtml5/semantics.html#unknown-elements](http://fortuito.us/diveintohtml5/semantics.html#unknown-elements)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:38:55.400

尝试在标题元素上设置宽度。

您的样式表中有一个“.header {width:960px)”，但这不会影响 header 元素，因为它不是一个类，所以它应该只是“header {width:960px)”。

它可能应该从它的父元素#page 继承宽度，但是对于 IE，你永远不知道。

# python - 有没有办法在 Python 中不使用方括号来初始化列表？

> ID：11318592
> 
> 赞同：3
> 
> 时间：2012-07-03T20:21:09.057
> 
> 标签：python, functional-programming

有没有办法在 Python 中不使用方括号来初始化列表？

例如，是否有这样的功能`list_cons`：

```
x = list_cons(1, 2, 3, 4) 
```

相当于：

```
x = [1, 2, 3, 4] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T20:23:07.210

```
In [1]: def list_cons(*args):
   ...:     return list(args)
   ...: 

In [2]: list_cons(1,2,3,4)
Out[2]: [1, 2, 3, 4] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T20:29:50.037

我认为这不是一个特别有用的功能。打括号这么难吗？如果您解释了为什么要这样做，也许我们可以给您一个更有用的答案。

不过，您可以在 Python 3 中做一件有趣的事情：

```
>>> (*x,) = 1, 2, 3, 4, 5
>>> x
[1, 2, 3, 4, 5] 
```

你甚至可以省略括号——`*x, = 1, 2, 3, 4, 5`也可以。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T20:23:07.897

使用列表构造函数并传递一个元组。

```
x = list((1,2,3,4)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T20:26:47.897

仅适用于**python 2.x**：

```
>>> def list_cons(*args):
       return map(None,args)

>>> list_cons(1,2,3,4)
[1, 2, 3, 4] 
```

# wcf - WCF 服务与指向类的方法和 DLL 进行通信

> ID：11318603
> 
> 赞同：0
> 
> 时间：2012-07-03T20:22:13.873
> 
> 标签：wcf, visual-studio-2008

由于我的标题可能令人困惑，我有点自己。如果我有一个 WCF 服务正在运行，它从类中调用方法，`MyDataAccessLayer`并且我还有一个 DLL，我在我的项目中用作引用从 中调用方法`MyDataAccessLayer`，这可能是导致此问题的原因：

`WCFTestService.ITestService`在`ServiceModel`客户端配置部分中找不到引用合同“”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

我正在尝试尽可能多地了解 WCF，并且我已经检查了 app.config 文件一千次，我没有发现我的端点设置有任何问题。有什么想法吗？

# android - 挂在“compressToJpeg”

> ID：11318617
> 
> 赞同：0
> 
> 时间：2012-07-03T20:23:16.993
> 
> 标签：android

**查看下面的所有 3 个编辑**

**更新：将 'read()' 更改为 'readFully()' 并让一些工作正常进行。'decodeByteArray()' 不再返回 null。写入卡片的 jpeg 实际上是一个完整的图像。图像仍未被绘制到我的视野中。如果需要，我将继续工作并发布另一个问题。**

我正在编写一个视频流客户端程序，它从 DataInputStream 中获取图像。

因为服务器在这些图像上调用了 compressToJpeg()，所以我想我可以简单地从 DataInputStream 中获取字节数组，对其进行解码，然后将位图从 decodeByteArray() 绘制到我的 SurfaceView。不幸的是，该方法只让我 decodeByteArray() 返回 null。

所以我添加了一个中间步骤。我创建了一个 compressFrame() 方法，它简单地从流中获取字节数组，创建一个新的 YuvImage 实例，并使用它来调用 compressToJpeg()。但是，在运行时，此方法会*挂起 compressToJpeg*并*关闭我的客户端活动*。没有 FC 弹出窗口，我的日志中也没有错误。

我提供了调用问题方法的线程的 run()、方法本身以及在应用程序关闭之前打印的日志。

**编辑：**我还添加了 ReceiverUtils.getFrame() 以防万一。

```
@Override
public void run() {

    String fromServer = null;
    int jpgSize;
    byte[] buffer;
    byte[] jpgData;
    Bitmap image;
    ByteArrayOutputStream jpgBaos = null;

    while(isItOK && (receiver.textIn != null)){
        if(!holder.getSurface().isValid()){
            continue;
        }

        ReceiverUtils.init(holder);

        //Receive 'ready' flag from camcorder
        fromServer = ReceiverUtils.receiveText(receiver);

        while((fromServer != null)){

            Log.e("From server: ", fromServer); //logging here because of null pointers when done in Utils

            if(fromServer.startsWith("ANDROID_JPG_READY")){

                //Obtain size for byte array
                jpgSize = Integer.parseInt(fromServer.substring(18));
                Log.e("JPG SIZE", String.valueOf(jpgSize));

                //Create byte array of size jpgSize
                buffer = new byte[jpgSize];
                Log.e("BUFFER SIZE", String.valueOf(buffer.length));

                //Send flag and receive image data from camcorder
                ReceiverUtils.sendText(receiver, "ANDROID_JPG_SEND");
                jpgData = ReceiverUtils.receiveData(receiver, buffer);

                //Compress jpgData and write result to jpgBaos
                jpgBaos = ReceiverUtils.compressFrame(imgRect, jpgData);

                //Decode jpgData into Bitmap
                image = ReceiverUtils.getFrame(jpgBaos.toByteArray(), jpgSize);
                //image = ReceiverUtils.getFrame(jpgData, jpgSize);

                //Set buffer and jpgData to null since we aren't using them
                buffer = null;
                jpgData = null;

                //Draw Bitmap to canvas
                ReceiverUtils.draw(image, holder, imgRect);
                //break; (testing one run-through)
            }

            //Receive 'ready' flag from camcorder
            fromServer = ReceiverUtils.receiveText(receiver);
            if(isItOK == false){
                break;
            }
        }
        //break; (testing one run-through)
    }
    } 
```

这是前面代码片段中调用的 ReceiverUtils.compressFrame()。

```
/*----------------------------------------
 * compressFrame(Rect imgRect, byte[] input): Creates new instance of YuvImage used to compress ARGB 
 * byte array data to jpeg. Returns ByteArrayOutputStream with data.    
 */

    public static ByteArrayOutputStream compressFrame(Rect imgRect, byte[] input){
        boolean success = false;

        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        YuvImage yuvImage = new YuvImage(input, ImageFormat.NV21, 
                  imgRect.width(), imgRect.height(), null);
        Log.e("HEY", "HEY");
        success = yuvImage.compressToJpeg(imgRect, 80, baos);
        Log.e("Compression Success:", String.valueOf(success));

        return baos;
    } 
```

最后，这是我从 LogCat 获得的输出。（当心一些明显仓促编写的调试日志。）

```
07-03 15:01:19.754: E/From server:(1634): ANDROID_JPG_READY_26907
07-03 15:01:19.754: E/JPG SIZE(1634): 26907
07-03 15:01:19.764: E/BUFFER SIZE(1634): 26907
07-03 15:01:19.764: E/To server:(1634): ANDROID_JPG_SEND
07-03 15:01:19.834: E/jpgIn(1634): Data received successfully.
07-03 15:01:19.834: E/HEY(1634): HEY
07-03 15:01:19.844: D/skia(1634): onFlyCompress 
```

**编辑：ReceiverUtils.getFrame()**

```
/*---------------------------------------
 * getFrame(byte[] jpgData, int jpgSize): Decodes a byte array into a Bitmap and 
 * returns the Bitmap.
 */
    public static Bitmap getFrame(byte[] jpgData, int jpgSize){
        Bitmap res = null;

        res = BitmapFactory.decodeByteArray(jpgData, 0, jpgSize);
        Log.e("Decode success", String.valueOf(!(res == null)));            

        return res;
    } 
```

**编辑 2：添加压缩之前的代码**

```
//Compress jpgData and write result to jpgBaos
//jpgBaos = ReceiverUtils.compressFrame(imgRect, jpgData);

//Decode jpgData into Bitmap
//image = ReceiverUtils.getFrame(jpgBaos.toByteArray(), jpgSize);
image = ReceiverUtils.getFrame(jpgData, jpgSize); 
```

**编辑 3：保存到 SD 卡后的图像**

Android 在第一个代码片段中的“jpgData”中保存的图像不是整个图像。由于是新用户，我无法发布它。我添加了一个“writeToSD”方法来测试。我认为它无法解码的原因是因为图像的大部分只是空白空间，并且只有一部分图像在那里。

# c# - 想从asp.net网站发送自动邮件

> ID：11318620
> 
> 赞同：3
> 
> 时间：2012-07-03T20:23:25.683
> 
> 标签：c#, asp.net

每当有人单击提交按钮输入一些值时，我都会尝试从我的 asp.net 网站发送一封自动邮件。我在 C# 中创建了一些代码。它没有显示任何错误，也没有发送任何邮件。我在网络凭据中使用组织的邮件服务器的 IP 地址。我不知道如何为我用来发送邮件的电子邮件地址提供密码。我正在与您分享我的代码。

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Data.SqlClient;
using System.ComponentModel;// for backgroundworker class
using System.Net;
using System.Net.Mail;
using System.Threading;

public partial class Contact : System.Web.UI.Page
{
   protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void LoginView1_ViewChanged(object sender, EventArgs e)
    {

    }

    public void Button3_Click(object sender, EventArgs e)
    {
        using (SqlConnection connn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
        {

            SqlCommand command = new SqlCommand();
            command.CommandType = System.Data.CommandType.StoredProcedure;
            command.CommandText = "dbo.Procedure";

            command.Parameters.Add("@name", System.Data.SqlDbType.VarChar).Value = TextBox1.Text;
            command.Parameters.Add("email", System.Data.SqlDbType.VarChar).Value = email.Text;
            command.Parameters.Add("sub", System.Data.SqlDbType.VarChar).Value = sub.Text;
            command.Parameters.Add("message", System.Data.SqlDbType.VarChar).Value = message.Text;

            string from = "info@xxx.com";
            string to = "abc@xxx.com";
            string mailSubject = sub.Text.ToString();
            string mailBody = message.Text.ToString(); 
            MailMessage mess = new MailMessage(from, to, mailSubject, mailBody);
            mess.IsBodyHtml = true;
            SmtpClient emailClient = new SmtpClient("//xxx.xxx.x.x/", 25); //Server ip & port
            emailClient.UseDefaultCredentials = true;
            //System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential("", "");
            //emailClient.Credentials = SMTPUserInfo;
            //emailClient.Send(mess);

           // emailClient.Credentials = CredentialCache.DefaultNetworkCredentials;

            try
            {
                emailClient.Send(mess);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception caught in CreateTestMessage1(): {0}",
                      ex.ToString());
            }

            command.Connection = connn;
            connn.Open();
            command.ExecuteNonQuery();
            connn.Close();
        }
        TextBox1.Text = "";
        email.Text = "";
        sub.Text = "";
        message.Text = "";
        lblmsg.Text = "Data entered successfully!!! Thank You for contacting us! We will get back to you as soon as possible.";
        //Response.Write("Submitted Succesfully");
        Response.Redirect("~/XX.aspx");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:46:03.867

您可能想停止使用默认凭据

```
emailClient.UseDefaultCredentials = false; 
```

并添加

```
emailClient.Credentials = new System.Net.NetworkCredential("yourusername", "yourpassword"); 
```

使用您自己的凭据，因为大多数 SMTP 服务器现在会阻止匿名中继以阻止垃圾邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:04:07.190

请将配置放入应用程序的 web.config 文件中。以下是如何配置它的示例：

```
 <system.net>
    <mailSettings>
      <smtp from="test@test.com">
        <network host="smtpserver1" port="25" userName="StackOverFlow" password="HatSoft" defaultCredentials="true" />
      </smtp>
    </mailSettings>
  </system.net> 
```

我已经在[无法从 asp.net 表单发送电子邮件中回答了类似的查询](https://stackoverflow.com/questions/11285338/unable-to-send-email-from-asp-net-form/11285457#11285457)

# paypal - 通过 Paypal 或 Google 电子钱包更新订阅付款

> ID：11318623
> 
> 赞同：2
> 
> 时间：2012-07-03T20:23:36.960
> 
> 标签：paypal, credit-card, subscription, google-checkout, android-pay

我目前允许通过 Paypal 和 Google Wallet 订阅。我正在寻找允许我修改（或添加到）每个用户使用的订阅付款金额的附加功能。

例如：如果用户订阅了每月 5 美元的计划并决定以 2 美元购买附加功能，我需要一种方法将这 2 美元作为一次性付款添加到当前 5 美元的订阅金额中。

[Stripe Metered Payments](https://stripe.com/docs/subscriptions#metered-billing-and-one-time-charges)已经有类似的解决方案了

看起来这可以通过以下方式完成：

通过预先批准付款的[Paypal 自适应付款](https://www.x.com/developers/paypal/documentation-tools/how-to-guides/how-set-payment-preapproval-using-adaptive-payments)

[商家处理](https://developers.google.com/checkout/developer/Google_Checkout_Beta_Subscriptions#Merchant_Handled_Subscriptions)的 Google 电子钱包订阅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:29:00.880

对于 Google 电子钱包，一旦设置订阅，您就无法更改最高收费，因此请确保允许用户可能购买的附加功能的价格上涨。

为了获得更好的交易费用，您可能还想看看新推出的数字商品谷歌钱包订阅：

[https://developers.google.com/in-app-payments/](https://developers.google.com/in-app-payments/)

[https://developers.google.com/in-app-payments/docs/subscriptions](https://developers.google.com/in-app-payments/docs/subscriptions)

# java - 如何在 playframework 中渲染列表

> ID：11318625
> 
> 赞同：0
> 
> 时间：2012-07-03T20:23:46.720
> 
> 标签：java, list, playframework-2.0

我想知道如何将列表呈现为模板作为 ajax 回调 arg。

我这样做了：

```
List<String> filteredTW = Twitt.filtertw(tagname);
return ok(filteredTW).as("text/plain"); 
```

但据说，我需要自己定义 ok(List) 函数。Playframework 确实不提供此功能吗？

我会感谢任何尝试帮助..

编辑：我的 ajax 函数是：

```
 $(function() {
    $('.filter').click(function() {
        var tagname = $(this).text();
    $('.post').remove();
    $.ajax({
            url: '/filter',
            type: 'POST',
            dataType: 'html',
            context: this,
            data: { tags: tagname },
        }).success(function(response) {
            alert(response);
        });
    });
}) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:31:51.737

你可能想试试`return ok(play.libs.Json.toJson(filteredTW));`

在这种情况下，您可以将`response`其视为常规 javascript 数组。

```
for (i = 0; i < response.length; i++)
  alert(response[i]); 
```

# android - 如何解决 ArrayIndexOutOfBoundsException

> ID：11318627
> 
> 赞同：-2
> 
> 时间：2012-07-03T20:23:55.093
> 
> 标签：android, database, sqlite

我正在尝试访问数据库“listOfFolder”表“文件夹”中的所有数据，并希望将数据存储在字符串数组文件夹 [] 中，但我正在了解如何解决 ArrayIndexOutOfBoundsException。

```
try{

  mydb = openOrCreateDatabase("listOfFolder", MODE_WORLD_WRITEABLE, null);  

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
      }

int count = 0;
String folders[] = null;
Cursor folderCursor = mydb.query("folder", null, null, null, null, null, null); 
while(folderCursor.moveToNext()) {

  folders[count] = folderCursor.getString(folderCursor.getColumnIndex("name"));
                    count++;
}

ListView list = (ListView)findViewById(R.id.lv);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(DropboxActivity.this, android.R.layout.simple_list_item_1,folders);
list.setAdapter(adapter);
setContentView(R.layout.listoffolder); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:26:42.013

这是你的问题：

```
String folders[] = null; 
```

你期望会发生什么？

这段代码是个坏主意，因为您不知道查询将带回多大的集合。您必须调用`new`以分配足够大的数组。

如果您可以使用，我更喜欢像[List](http://developer.android.com/reference/java/util/List.html)这样的集合。也看看[这个](http://www.higherpass.com/Android/Tutorials/Creating-Lists-Using-The-Android-Listactivity/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T20:27:37.647

改变

```
String folders[] = null;
Cursor folderCursor = mydb.query("folder", null, null, null, null, null, null); 
while(folderCursor.moveToNext()){
    folders[count] = folderCursor.getString(folderCursor.getColumnIndex("name"));
    count++;
} 
```

到

```
Cursor folderCursor = mydb.query("folder", null, null, null, null, null, null);
if (folderCursor.moveToFirst()) {
    String folders[] = new String[folderCursor.getCount()];
    do {
        folders[count] = folderCursor.getString(folderCursor.getColumnIndex("name"));
        count++;
    } while(folderCursor.moveToNext());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:02:53.557

像这样：

```
ArrayList<datatypehere> namehere=new ArrayList<datatypehere>(); 
```

然后，您可以通过以下方式将元素添加到列表中：

```
String example1 = "this is a string";
namehere.add(example1); 
```

如果您搜索它们，JavaDocs 和 Java 教程中的列表相当多。

# javascript - 如何将 RFC 3339 中的日期转换为 javascript 日期对象（自 1970 年以来的毫秒数）

> ID：11318634
> 
> 赞同：11
> 
> 时间：2012-07-03T20:24:36.500
> 
> 标签：javascript, datetime, date

谷歌日历向我抛出 rfc3339，但我所有的日期都是自 1970 年 1 月以来的毫秒数。

RFC3999：

```
2012-07-04T18:10:00.000+09:00 
```

javascript 当前时间: (new Date()).getTime():

```
1341346502585 
```

我更喜欢毫秒，因为我只处理倒计时而不是日期。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T20:26:59.703

具有 3 个小数位和一个“T”的该格式的日期时间在传递给构造函数时具有明确[定义的行为：](https://tc39.es/ecma262/#sec-date.parse)[`Date.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse "解析 - MDN")`Date`

```
console.log(Date.parse('2012-07-04T18:10:00.000+09:00'));
// 1341393000000 on all conforming engines
```

但是，您必须小心始终提供符合 JavaScript 规范的输入，否则您可能会在不知不觉中退回到实现定义的解析，这种解析是实现定义的，跨浏览器和环境并不可靠。对于其他格式，可以使用正则表达式手动解析等选项：

```
var googleDate = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})([+-]\d{2}):(\d{2})$/;

function parseGoogleDate(d) {
    var m = googleDate.exec(d);
    var year   = +m[1];
    var month  = +m[2];
    var day    = +m[3];
    var hour   = +m[4];
    var minute = +m[5];
    var second = +m[6];
    var msec   = +m[7];
    var tzHour = +m[8];
    var tzMin  = +m[9];
    var tzOffset = tzHour * 60 + tzMin;

    return Date.UTC(year, month - 1, day, hour, minute - tzOffset, second, msec);
}

console.log(parseGoogleDate('2012-07-04T18:10:00.000+09:00'));
```

[或像Moment.js](https://momentjs.com/)这样的全功能库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T20:46:11.760

您可以尝试两个 Javascript 日期库：

*   [日期.js](http://www.datejs.com/)

*   [Moment.js](http://momentjs.com/)

这两个都将为您提供允许您以几乎任何格式解析和生成日期的函数。

如果你经常使用日期，你会想要使用这些库之一；这比每次都滚动自己的功能要少得多。

希望有帮助。

# ruby-on-rails - 当使用 accept_nested_attributes_for 方法时，当我告诉我的控制器构建嵌套表单时实际发生了什么？

> ID：11318635
> 
> 赞同：0
> 
> 时间：2012-07-03T20:24:37.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nested-attributes

我要做的是在通过控制器创建项目后更新它的属性，如下所示：

```
 def create
    @check_out = CheckOut.new(params[:check_out]) 
    @check_out.request_id = @request.id
    @check_out.status = 'complete'
    @check_out.date_taken = Time.now
    etc.....

    respond_to do |format|
      if @check_out.save
        format.html { redirect_to(@check_out, :notice => 'Check out was successfully created.') }
        format.xml  { render :xml => @check_out, :status => :created, :location => @check_out }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @check_out.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

问题是创建的项目是通过嵌套属性创建的。通过痛苦的反复试验，我开始意识到，创建嵌套项目时，不是通过它们的控制器，而是通过其他方式。我需要弄清楚这是如何完成的，所以我可以尝试提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:29:33.180

开始[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for的好地方](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for)

# serial-port - 通过串行通信开始新的生产线

> ID：11318638
> 
> 赞同：4
> 
> 时间：2012-07-03T20:24:58.543
> 
> 标签：serial-port, arduino, putty

我正试图让一个 arduino 告诉我的计算机它的继电器状态是什么。并且由于某种原因，每次它发送一个新字符串时，PuTTY 都会离开​​最后一个文本的水平位置。这使得显示非常难看。

我希望 PuTTY 看起来像 arduino 串行管理器。

这是arduino串行管理器的样子 ![在此处输入图像描述](../Images/27e70c8fd1a5e0102a584505af2af08f.png)

这就是 PuTTY 中的样子 ![在此处输入图像描述](../Images/e8886ecfe91b2c660034d2c343c0d8c8.png)

这是我用来从 arduino 发送到计算机的代码。 ![在此处输入图像描述](../Images/2e6d53c162fd5d6fe960577e4ed34c8f.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T17:31:29.353

您可以`Implicit CR in every LF`从 PuTTY 的终端选项中设置选项，而不是将代码中的每一行终止从`\n`更改为`\r\n`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T20:30:43.090

可能您应该在行尾使用“\r\n”而不是“\n”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T20:29:23.733

发送`\r\n`而不是`\n`仅作为行尾标记。很多终端（包括 Putty、Minicom）都需要它。

# cuda - CUDA - 如何在卷积之前填充内核？

> ID：11318639
> 
> 赞同：2
> 
> 时间：2012-07-03T20:25:01.560
> 
> 标签：cuda, signal-processing, fft, nvidia, convolution

我知道频率乘法 = 离散信号（向量）在时间空间中的循环卷积。

我也知道“只有在 x(n) 和 h(n) 在 DFT 之前用零填充以使它们各自的长度为 Nx+Nh-1 时，卷积定理才会产生所需的线性卷积结果，基本上将所有循环归零文物。”

一切都适用于向量..但我的目标是与本文中的矩阵进行循环卷积：

[http://developer.download.nvidia.com/compute/cuda/2_2/sdk/website/projects/convolutionFFT2D/doc/convolutionFFT2D.pdf](http://developer.download.nvidia.com/compute/cuda/2_2/sdk/website/projects/convolutionFFT2D/doc/convolutionFFT2D.pdf)

如果您观察前两个图（图 1 和图 2），您会看到内核以一种我以前从未见过的奇怪方式填充，这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:36:29.707

通过填充和扩展矩阵来解决圆形伪影（参见 nvidia CUDA sdk 论文）

# javascript - 使用 Javascript 解析电子邮件源的文本/html 部分

> ID：11318640
> 
> 赞同：2
> 
> 时间：2012-07-03T20:25:04.517
> 
> 标签：javascript, regex, email, mime

使用 javascript，我需要解析`text/html`电子邮件的 Content-Type 部分并仅提取 HTML 部分。以下是相关邮件源部分的示例：

```
------=_Part_1504541_510475628.1327512846983
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: 7bit

<html ... a bunch of html ...

/html> 
```

我想`<html>`在`text/html`. 我该怎么做呢？

注意：我可以使用 hacky 正则表达式。我不希望这是防弹的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:43:47.720

根据 RFC/MIME 文档，*封装边界定义为一行完全由两个连字符（“-”，十进制代码 45）组成，后跟来自 Content-Type 标头字段的边界参数值*。

**注意：**在 JavaScript 中确实没有`/s`修饰符可以使点`.`匹配所有字符，包括换行符。要绝对匹配任何字符，您可以使用包含速记类及其否定版本的字符类，例如`[\s\S]`.

* * *

***正则表达式：***

```
\n--[^\n\r]*\r?\nContent-Type: text\/html[\s\S]*?\r?\n\r?\n([\s\S]*?)\n\r?\n-- 
```

***JavaScript：***

```
matches = /\n--[^\n\r]*\r?\nContent-Type: text\/html[\s\S]*?\r?\n\r?\n([\s\S]*?)\n\r?\n--/gim.exec(mail); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T15:11:44.957

Ωmega 的答案很接近，但您不能确定边界是否包含`-`字符。

您首先需要查看标题。实际电子邮件内容的标题和正文将由`\r\n\r\n`. 你应该看到一个类似的标题

```
Content-Type: multipart/alternative;
    boundary="------=_Part_1504541_510475628.1327512846983" 
```

然后您可以使用此边界来找到实际的分隔线。然后，您可以像 Ωmega 一样构造一个正则表达式，但在此分隔符中进行替换。

唯一需要注意的是，`--`除了正常的边界内容之外，最后一个边界将在末尾具有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T21:12:31.717

```
var html = source.toString().substr(source.toString().indexOf("\n\n")).trim(); 
```

# java - 未找到 Spring 类

> ID：11318641
> 
> 赞同：2
> 
> 时间：2012-07-03T20:25:05.260
> 
> 标签：java, spring, maven, spring-mvc, spring-security

我确定这是一个缺少依赖项的 maven，但我用谷歌搜索了一个找不到类似的东西。

启动tomcat时出现以下异常...

```
ERROR: org.springframework.security.config.SecurityNamespaceHandler - Failed to load required web classes
java.lang.ClassNotFoundException: org.springframework.security.web.FilterChainProxy
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:257)
    at org.springframework.security.config.SecurityNamespaceHandler.loadParsers(SecurityNamespaceHandler.java:145)
    at org.springframework.security.config.SecurityNamespaceHandler.init(SecurityNamespaceHandler.java:127)
    at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:130)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1414)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1409)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
ERROR: org.springframework.security.config.SecurityNamespaceHandler - Failed to load required web classes
java.lang.ClassNotFoundException: org.springframework.security.web.FilterChainProxy
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:257)
    at org.springframework.security.config.SecurityNamespaceHandler.loadParsers(SecurityNamespaceHandler.java:145)
    at org.springframework.security.config.SecurityNamespaceHandler.parse(SecurityNamespaceHandler.java:74)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1419)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1409)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

我的 pom.xml 在下面...

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.assessme</groupId>
    <artifactId>com</artifactId>
    <name>assessme</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.9</org.aspectj-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>

                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Persistence -->

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.5.6-Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency>
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.11.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.18</version>
        </dependency>

        <!-- Jackson JSON Mapper -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.5</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

最后，security-app-context.xml 在下面，我知道我遗漏了一些东西，但我不知道是什么。

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http use-expressions="true">
        <intercept-url pattern="/**" access="permitAll" />
        <form-login />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="rod" password="koala" authorities="supervisor, teller, user" />
                <user name="dianne" password="emu" authorities="teller, user" />
                <user name="scott" password="wombat" authorities="user" />
                <user name="peter" password="opal" authorities="user" />
            </user-service>
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T21:16:04.647

看起来您缺少 spring-security-web 依赖项。将以下内容添加到您的 pom.xml

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>${org.springframework-version}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T21:16:47.437

看起来您需要添加其他 Spring Security 依赖项来添加您的 pom.xml。根据错误，您似乎缺少以下内容：

```
<dependency>
      <groupId>org.springframework.security</groupId> 
      <artifactId>spring-security-web</artifactId>
      <version>${org.springframework-version}</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:28:57.410

您可能需要在`web.xml`.

# wordpress - 远程监控 wordpress 安装

> ID：11318646
> 
> 赞同：0
> 
> 时间：2012-07-03T20:25:36.823
> 
> 标签：wordpress, plugins, monitoring

我想在一个页面上监控我们所有的 wordpress 安装，以显示安装的当前版本......

我不知道从哪里开始......我们需要在wordpress中安装一个小插件来将版本号推送到我们的监控页面吗？

我希望我们的监控页面在我们将监控插件添加到 wordpress 安装时自动检测...

谢谢大家...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:45:43.137

为您的每个 Wordpress 安装编写一个连接到数据库的插件，并读取您需要的属性并显示它。

# ruby - should_receive 会做我没想到的事情吗？

> ID：11318662
> 
> 赞同：1
> 
> 时间：2012-07-03T20:26:23.343
> 
> 标签：ruby, testing, rspec, stubbing, expectations

考虑以下两个简单模型：

```
class Iq

  def score
    #Some Irrelevant Code
  end

end

class Person

  def iq_score
    Iq.new(self).score   #error here
  end

end 
```

以及以下 Rspec 测试：

```
describe "#iq_score" do

  let(:person) { Person.new }

  it "creates an instance of Iq with the person" do
    Iq.should_receive(:new).with(person)
    Iq.any_instance.stub(:score).and_return(100.0)
    person.iq_score
  end

end 
```

当我运行这个测试（或者，更确切地说，一个类似的测试）时，存根似乎没有工作：

```
Failure/Error: person.iq_score
  NoMethodError:
    undefined method `iq_score' for nil:NilClass 
```

正如您可能猜到的那样，失败出现在上面标有“此处错误”的行上。当该`should_receive`行被注释掉时，这个错误就消失了。这是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T09:50:12.803

由于 RSpec 扩展了 stubber 功能，现在以下方式是正确的：

```
Iq.should_receive(:new).with(person).and_call_original 
```

它将 (1) 检查期望 (2) 将控制权返回给原始函数，而不仅仅是返回 nil。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T08:00:11.307

您正在删除初始化程序：

```
Iq.should_receive(:new).with(person) 
```

返回 nil，因此 Iq.new 为 nil。要修复，只需执行以下操作：

```
Iq.should_receive(:new).with(person).and_return(mock('iq', :iq_score => 34))
person.iq_score.should == 34 // assert it is really the mock you get 
```

# c# - 防止用户删除、移动或重命名文件

> ID：11318663
> 
> 赞同：14
> 
> 时间：2012-07-03T20:26:23.853
> 
> 标签：c#, move, delete-file, file-rename

我想要做的是当我的程序正在使用文件时，我想阻止用户重命名、删除或移动文件（嗯......根据 Windows，移动是删除和在不同位置创建[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)，但我离题了）。

有人建议我使用[FileStream.Lock](http://msdn.microsoft.com/en-us/library/system.io.filestream.lock.aspx)或使用[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)。*但是， FileStream.Lock 似乎只是为了防止我试图允许*的文件被修改。此外，我非常不确定互斥锁是否可以锁定文件，尽管我仍在.Net 4.0 库中阅读它。

有没有人对使用任何一个有任何建议，如果有基于代码的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T20:32:40.580

打开文件时，可以指定共享模式。

[使用FileAccess.Read](http://msdn.microsoft.com/en-us/library/4z36sx0f.aspx)打开文件使您能够读取文件，而[FileShare.ReadWrite](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)允许继续编辑文件，但不能删除或移动文件。

```
var fs = File.Open(@"C:\temp\file.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
MessageBox.Show("File Locked");  // While the messagebox is up, try to open or delete the file.
// Do your work here
fs.Close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T20:43:46.867

这将防止移动或删除文件，但允许读取和写入：

```
 using (FileStream fs = new FileStream(@"C:\TestDir\Test.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
    {
        // Do Stuff.
    } 
```

FileStream.Lock 实际上是一个范围锁，它可以防止在持有锁时修改文件的特定部分。

# iphone - 自定义 UITable 单元格如何使用唯一包含的对象状态构建？

> ID：11318673
> 
> 赞同：0
> 
> 时间：2012-07-03T20:27:12.207
> 
> 标签：iphone, uitableview, reuseidentifier

所以我有通过 builder 定义的自定义表格单元格并通过 nib 加载（它有一个 idexPath 的属性），它有 2 个按钮。我想显示这些按钮状态动态变化的表格。IE 第一个单元格 - 都启用，第二个单元格 - 两个按钮都禁用，第三个 - 第一个 btn 启用和第二个 btn 禁用等等。
现在，如果我使用 1 个重用标识符，所有单元格将看起来与我不想要的相同。我希望每个单元格都有自己的视图，这意味着每个单元格都有唯一的重用 ID。
但是如何达到这一点？如果我将创建一些独特的 cellId 在

```
- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
```

这将是一个字符串，那么我无法在对象的含义上创建相同的字符串。我可以创建具有相同文本的字符串，但这将是另一个对象，因此我无法通过reuseId 再次获取先前创建的具有此类cellId 的单元格。所以我不能改变一个单元格的按钮状态，然后用

```
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:path] withRowAnimation:UITableViewRowAnimationNone]; 
```

但只有`[tableView reloadData];`意志起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:09:38.023

**我有一种感觉，当您第一次使用initWithStyle:reuseIdentifier:**创建单元格时，您只是在设置单元格按钮的状态。这是做事的错误方式。您需要在每次调用**cellForRowAtIndexPath**时为您的单元格设置状态，无论它们是否被重新使用。在您的情况下，如果每个单元格具有相同的 UI（两个按钮），那么它们都应该共享一个重用标识符。您的数据源应该负责维护单元格的状态，*而不是*UITableViewCell 对象。

这之间的区别是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
     myCustomCell *cell = (myCustomCell *)[myTable dequeueReusableCellWithIdentifier:@"myCellIdentifier"];
     if (cell == nil) {
       // Load cell from nib here and set the cell's button states based on indexPath
     }
    return cell;
} 
```

还有这个：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
     myCustomCell *cell = (myCustomCell *)[myTable dequeueReusableCellWithIdentifier:@"myCellIdentifier"];
     if (cell == nil) {
       // Load cell from nib here
     }
    // set the cell's button states based on indexPath here
    return cell;
} 
```

# java - 坚持使用 Struts-tiles Web 应用程序

> ID：11318674
> 
> 赞同：0
> 
> 时间：2012-07-03T20:27:20.700
> 
> 标签：java, struts, tiles, struts-1

我被这个错误困住了**"Attribute property has a runtime value of definitions-config. property must reference a valid Java identifier"**。

```
<plug-in className="org.apache.struts.tiles.TilesPlugin">
<set-property property="definitions-config" value="/WEB-INF/tiles-defs.xml" />
<set-property property="moduleAware" value="true" />
</plug-in> 
```

我正在使用 struts-tiles 1.3.8 来创建一个带有页眉、页脚、正文和菜单的 Web 应用程序。我不知道天气我缺少一些 jar 文件吗？我没有任何线索。请帮助我的人。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T12:13:12.993

我们不能说确切的错误发生在哪里。有了这个代码，我们不能具体说。但我有一个关于 Tiles 的资源。

通过这个资源，我希望这可以帮助你。

[带瓷砖的 Struts](http://javabynataraj.blogspot.com/2011/06/simple-struts-program-using-tiles.html)

# css - CSS3 scale() 导致 div 像素化

> ID：11318676
> 
> 赞同：10
> 
> 时间：2012-07-03T20:27:30.483
> 
> 标签：css, webkit

我注意到，在为 CSS3 制作动画时`scale()`，它似乎会像素化它所使用的每个元素。

示例：http: [//jsfiddle.net/PD7Vh/2/](http://jsfiddle.net/PD7Vh/2/)

在上面的示例中，`scale()`当您将鼠标悬停在中心 div 上时，它会对其进行像素化。

我的css设置是错误的，还是`scale()`自然而然的？

这是 Windows 7 上 Chrome 的屏幕截图：

![](../Images/72bea8a43723c642e6ec6fc9f52b97b4.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T21:27:05.127

# canvas - Flex：如何在画布上缩放使用 ImageSnapshot.captureImage 的结果

> ID：11318677
> 
> 赞同：0
> 
> 时间：2012-07-03T20:27:36.040
> 
> 标签：canvas, flex4

我正在使用`ImageSnapshot.captureImage(canvas, 0, jPEGEncoder)`将绘图画布捕获到位图，但我希望生成的 jpeg 比画布本身大得多。

例如，画布是 100x400，但我希望画布的结果图像是 200x800。我无法将画布放大/缩放到这个大小，因为它会弄乱 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:50:01.727

scaleLimited:Boolean (default = true) — `The maximum width or height of a bitmap in Flash is 2880 pixels`- 如果 scaleLimited 设置为 true，则分辨率将按比例降低以适应 2880 像素，否则，如果 scaleLimited 为 false，则将拍摄较小的快照窗口并将其拼接在一起以捕获更大的图像。默认值为真。

[信息网站](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/graphics/ImageSnapshot.html#captureImage%28%29)

# wcf - 跨多个项目保护 WCF 服务

> ID：11318679
> 
> 赞同：0
> 
> 时间：2012-07-03T20:27:40.023
> 
> 标签：wcf, architecture, wcf-security

我很难围绕一些架构元素来保护由许多不同应用程序使用的核心 WCF 服务。

在内部，我们有一个应用程序允许 HR 人员更新 peron 的详细信息。这包含在 WPF 应用程序中。在外部，我们有一个网站，允许个人进行身份验证（通过 AD 会员提供者）并更新他们的详细信息。

我们不希望用户能够看到其他用户的信息（出于显而易见的原因）。但是我们不想在用户登录的同一个 Web 应用程序中托管此服务。以下是从视觉工作室的角度来看架构的外观：

服务应用

Wpf应用程序

MVCWeb应用程序

它们不存在于相同的域中，例如，服务应用程序将托管在[http://www.service1.com/Service.svc](http://www.service1.com/Service.svc)，而 mvc 应用程序将托管在[http://www.updateyourprofile.com](http://www.updateyourprofile.com) . 因此，用户登录[http://www.updateyourprofile.com](http://www.updateyourprofile.com)，我们想通过 JSON 访问 Wcf 服务。服务应用程序、wpf 应用程序和 mvc Web 应用程序都将使用 AD 凭据进行身份验证。但是我们如何保护服务，让登录 mvc Web 应用程序的用户只能看到他们的信息？

我看到的大多数示例都说要在服务内部使用 HttpContext.Current.User 检查。但是由于用户在不同的站点进行了身份验证，那么 cookie 是如何传输的呢？您是否最终不得不在您想要使用的同一个 Web 应用程序中发布您的服务，以便 cookie 透明地传输？

或者，是否不可能拥有一个具有不同应用程序的集中式服务，这些应用程序使用相同的身份验证存储来确定谁可以访问服务上的哪些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:50:26.010

您正在寻找的是某种由所有入口点使用的联合身份验证系统。这就是 Windows Identity Foundation 可以帮助您构建的内容。

在每个应用程序内部，访问控制将基于声明，根据嵌入在身份验证系统颁发的每个用户的安全令牌中的声明。

[MSDN 上有一本关于该主题的整本书。](http://msdn.microsoft.com/en-us/library/ff423674)

# javascript - 将数组拆分为长度为 N 的块

> ID：11318680
> 
> 赞同：103
> 
> 时间：2012-07-03T20:27:43.170
> 
> 标签：javascript, arrays

如何将一个数组（有 10 个项目）拆分为 4 个块，其中最多包含`n`项目。

```
var a = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'];
//a function splits it to four arrays.
console.log(b, c, d, e); 
```

它打印：

```
['a', 'b', 'c']
['d', 'e', 'f']
['j', 'h', 'i']
['j'] 
```

但是，以上假设`n = 3`该值应该是动态的。

谢谢

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-07-03T20:36:21.863

它可能是这样的：

```
var a = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'];

var arrays = [], size = 3;

while (a.length > 0)
  arrays.push(a.splice(0, size));

console.log(arrays);
```

请参阅[拼接](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)阵列的方法。

一种不改变数组的替代方法，除了在分块之前创建它的浅拷贝之外，可以通过使用[slice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)和 for...循环来完成：

```
var a = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'];

var arrays = [], size = 3;

for (let i = 0; i < a.length; i += size)
   arrays.push(a.slice(i, i + size));

console.log(arrays);
```

虽然更面向函数式编程的方法可能是：

```
const chunks = (a, size) =>
    Array.from(
        new Array(Math.ceil(a.length / size)),
        (_, i) => a.slice(i * size, i * size + size)
    );

let a = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'];

console.log(chunks(a, 3));
console.log(chunks(a, 2));
```

具体参见[Array.from](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)以及[new Array(n)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Array)的工作原理。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-10-30T10:17:12.950

也许这段代码有帮助：

```
var chunk_size = 10;
var arr = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];
var groups = arr.map( function(e,i){ 
     return i%chunk_size===0 ? arr.slice(i,i+chunk_size) : null; 
}).filter(function(e){ return e; });
console.log({arr, groups})
```

# python - 从 rails 启动 python 脚本的问题

> ID：11318683
> 
> 赞同：0
> 
> 时间：2012-07-03T20:27:50.437
> 
> 标签：python, ruby-on-rails, ruby

我需要从我的 rails 应用程序启动一个没有外部依赖项的 python 脚本。我需要将文件夹添加到`PYTHONPATH`并启动脚本。我试过这个：

```
puts system(PYTHONPATH=../lib/python/ python ../reporter/src/reporter.py) 
```

但脚本不起作用。它应该创建一个特定的文件，但它没有。我也试过：

```
puts system("PYTHONPATH=../lib/python/ | python ../reporter/src/reporter.py") 
```

但我收到以下错误：

```
ImportError: No module named...." 
```

看起来好像`PYTHONPATH`没有在第二种情况下设置。我究竟做错了什么？如何启动 python 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:34:23.823

你有没有尝试过

`system("export PYTHONPATH=../lib/python/ && python ../reporter/src/reporter.py")`

您可能还需要输入完整路径并使用 Rails.root.to_s

# python - 如何查询那些未加入的对象（SQLAlchemy）

> ID：11318686
> 
> 赞同：2
> 
> 时间：2012-07-03T20:28:10.833
> 
> 标签：python, sql, sqlalchemy

我在 SQLAlchemy 中有两个模型，具有多对多关系

```
team_user_table = Table('team_user', Base.metadata,
    Column('user_id', Integer, ForeignKey('users.id')),
    Column('team_id', Integer, ForeignKey('teams.id'))
)

class User(Base):
    """ The SQLAlchemy declarative model class for a User object. """
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    name = Column(String, unique=True)

class Team(Base):
    """ The SQLAlchemy declarative model class for a Team object. """
    __tablename__ = 'teams'
    id = Column(Integer, primary_key=True)
    name = Column(Text, unique=True)
    members = relationship("User",
        secondary=team_user_table,
        backref="memberteams") 
```

我想查询那些不是特定团队成员的用户。

在 SQL 中（例如）：

```
SELECT u.id,u.name FROM users u WHERE u.id NOT IN (SELECT tu.user_id FROM team_user tu WHERE tu.team_id=?); 
```

我怎样才能在 SQLAlchemy 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:37:07.070

这可以满足您的要求：

```
team_id = 1
query = session.query(User.id).filter(~User.memberteams.any(Team.id == team_id)) 
```

这是它输出的 SQL（在 MySQL 上）：

```
SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE NOT (EXISTS (SELECT 1 
FROM team_user, teams 
WHERE users.id = team_user.user_id AND teams.id = team_user.team_id AND teams.id = %s)) 
```

这不完全是您的查询现在的样子，但我认为这是应该完成的方式。检查[这个文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#using-exists)。

我在 MySQL 上对此进行了测试。但是，我认为它应该适用于任何其他。

要获得您正在寻找的确切查询，您可能需要考虑[将子查询](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#using-subqueries)与 filter 语句结合使用。我认为您需要`team_user`在代码中明确引用该表才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:30:04.527

我相信这应该可行，并且它不使用子查询。

```
session.query(User).join(team_users_table).filter(team_users_table.team_id != OTHER_TEAM) 
```

# iphone - 在 Core Graphics 中获取 Bezier 路径的起点

> ID：11318687
> 
> 赞同：2
> 
> 时间：2012-07-03T20:28:14.883
> 
> 标签：iphone, path, core-graphics, bezier, cgpoint

我一直在寻找，我找不到答案。我想在视图中获得贝塞尔路径的起点。我尝试使用边界，但这似乎得到了路径周围的框的 0,0。currentpoint 似乎是曲线的最后一个点。我可以在路径内移动当前点吗？除了在创建路径时将其存储在数组中之外，还有更简单的方法来获取起点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:02:11.110

您可以使用该`CGPathApply()`函数迭代路径中的所有元素，并指定应为每个元素调用的自定义函数。这就像`for`Core Graphics 路径的循环。不可能告诉函数只遍历路径中的第一个元素，因此您必须手动检查第一次运行`CGPathApplierFunction`并将有关当时当前路径元素的信息存储在 ivar 中。

# c# - xna 游戏工作室中滞后的 c# 代码问题

> ID：11318689
> 
> 赞同：4
> 
> 时间：2012-07-03T20:28:20.253
> 
> 标签：c#, xna

我的代码似乎可以编译，但是当我尝试运行它时，它挂得很严重。

我一直在关注 Riemers XNA[教程](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Manual_texture_creation.php)。

我对 C# 非常熟悉，但绝不是专家。到目前为止，我没有遇到任何问题，并且没有抛出任何错误或异常......它只是挂断了。我在他的相关论坛上读过，用户讨论了其他问题，通常与拼写错误或代码错误有关，但那里没有这样的东西......每个人似乎都能很好地运行它。

也许我做错了什么？底部的嵌套 for 循环对我来说似乎有点笨拙。screenWidth 和 screenHeight 分别为 500 和 500。

顺便说一句：这是从 LoadContent 覆盖方法运行的，所以据我所知，它应该只运行一次。

```
 private void GenerateTerrainContour()
    {
        terrainContour = new int[screenWidth];

        for (int x = 0; x < screenWidth; x++)
            terrainContour[x] = screenHeight / 2;
    }

    private void CreateForeground()
    {
        Color[] foregroundColors = new Color[screenWidth * screenHeight];

        for (int x = 0; x < screenWidth; x++)
        {
            for (int y = 0; y < screenHeight; y++)
            {
                if (y > terrainContour[x])
                    foregroundColors[x + y * screenWidth] = Color.Green;
                else
                    foregroundColors[x + y * screenWidth] = Color.Transparent;
                fgTexture = new Texture2D(device, screenWidth, screenHeight, false, SurfaceFormat.Color);
                fgTexture.SetData(foregroundColors);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T20:30:28.390

可能与您正在创建 250,000 个屏幕大小的纹理（天哪）有关！

资源分配总是很繁重——尤其是在处理声音和图像等媒体时。

似乎您在这里只需要一种纹理，请尝试移出`fgTexture = new Texture2D(device, screenWidth, screenHeight, false, SurfaceFormat.Color);`循环。然后尝试移动`fgTexture.SetData(foregroundColors);`到循环之外。

```
private void CreateForeground()
{
    Color[] foregroundColors = new Color[screenWidth * screenHeight];

    fgTexture = new Texture2D(device, screenWidth, screenHeight, false, SurfaceFormat.Color);

    for (int x = 0; x < screenWidth; x++)
    {
        for (int y = 0; y < screenHeight; y++)
        {
            if (y > terrainContour[x])
                foregroundColors[x + y * screenWidth] = Color.Green;
            else
                foregroundColors[x + y * screenWidth] = Color.Transparent;
        }
    }

    fgTexture.SetData(foregroundColors);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T20:32:58.340

```
for (int x = 0; x < screenWidth; x++)
  {
    for (int y = 0; y < screenHeight; y++)
    {
      if (y > terrainContour[x])
        foregroundColors[x + y * screenWidth] = Color.Green;
      else
        foregroundColors[x + y * screenWidth] = Color.Transparent;
    }
 }

 foregroundTexture = new Texture2D(device, screenWidth, screenHeight, false, SurfaceFormat.Color);
 foregroundTexture.SetData(foregroundColors); 
```

你的问题在最后两行。在您的循环中，您正在创建*500 x 500* `Texture2D`的对象，这会减慢您的速度。将它们移到 for 循环之外。

# android - 可以在没有上下文的函数中使用 getPackageManager 吗？

> ID：11318690
> 
> 赞同：2
> 
> 时间：2012-07-03T20:28:20.830
> 
> 标签：android

这个问题有点难问：

使用 Timer，每 5 秒启动一个方法，在此函数中，我需要知道实际运行的活动，所以我写：

```
public class ProcessesCheck extends TimerTask {

@Override
public void run() {
   Log.w("hello", "my name is Nicolas".concat( String.valueOf( SystemClock.uptimeMillis() )));
   Context.getPackageManager();
       etc.....
} 
```

}

run 方法每 5 秒运行一次。

但是问题是我没有Context，我什至不能实例化一个my_context对象，为了得到getPackageManager方法。

所以这一行：'Context.getPackageManager();' 有错误！

有人知道如何在“运行”方法中启动 getPackageManager 吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:38:40.593

大多数时候，这只是`getPackageManager()`你想要的。从来没有`Context.getPackageManager()`，因为它不是静态方法。

看起来您`ProcessesCheck`是一个独立的类，因此您需要为此代码提供一个有效的上下文对象，也许可以通过构造函数传入一个。如果你命名它`context`，那么你就有了`context.getPackageManager()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:44:22.943

最后我做到了，它似乎运作良好。

```
public class Automated_launcher_service extends Service {

Context my_service = this;

private TimerTask my_TimerTask = new TimerTask() {
    public void run() {
        Log.w("hello", "my name is Nicolas" + String.valueOf( SystemClock.uptimeMillis() ) );
        Object my_packages = my_service.getPackageManager();
        Log.w("hello", "my name is Nicolas" + String.valueOf(my_packages));
    }
};

int i = 0;

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Timer my_timer = new Timer("automated launchemy loop",true);
    if(i==0){
        i=1;
        my_timer.schedule(my_TimerTask, 0, 5000);
    }
    return super.onStartCommand(intent,flags,startId);
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}

} 
```

# javascript - 不安全的 JavaScript 尝试在 Chrome 中访问带有 URL 错误的框架

> ID：11318691
> 
> 赞同：1
> 
> 时间：2012-07-03T20:28:28.117
> 
> 标签：javascript, asp.net, html

我在 Chrome 上收到此错误：

不安全的 JavaScript 尝试从带有 URL2 的框架访问带有 URL1 的框架

我搜索了这个，但大多数地方实际上都使用了 Iframe，它试图访问父级。

就我而言，我没有 IFrame，但收到此错误。它在页面上：

[http://sikhvideos.org/video-details.asp?id=39](http://sikhvideos.org/video-details.asp?id=39)

要在 Chrome 上获取错误，请单击主视频屏幕下方的视频剪辑缩略图之一。这会导致填充视频右侧的内容。这是通过替换 id "width366px" 中的内容来完成的。

代码是通常的：

```
document.getElementById("width366px").innerHTML= <data returned by ajaxVideoPartDetails.asp> 
```

非常感谢所有帮助。

最好的问候桑迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:07:15.627

您会收到此错误，因为脚本正在运行`static.ak.fbcdn.net`，即使主站点运行在与视频相同的 url 上，脚本也不是。

所以 chrome 正在检查脚本并且脚本是从不同的站点运行的，这会引发这个错误。

解决方案是将这部分脚本移到页面上 - 或您的域上，然后从那里而不是从其他站点调用它。

# entity-framework - 如何使用ef迁移创建数据库？

> ID：11318698
> 
> 赞同：2
> 
> 时间：2012-07-03T20:29:05.933
> 
> 标签：entity-framework, migration, ef-code-first, entity-framework-4.3, entity-framework-migrations

我搜索了迁移教程。在所有这些中，首先运行应用程序以通过 ef 创建数据库，然后启用迁移！有没有办法通过迁移创建数据库？不运行应用程序？我试试这些：

```
Add-Migration CustomName // not works

Add-Migration $InitialDatabase // not works

Add-Migration InitialDatabase // not works

Add-Migration InitialCreate // not works

Update-Database // not works

Update-Database Update-Database –TargetMigration:$InitialDatabase // not works 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:19:21.523

如果您已正确设置所有内容（连接字符串，已运行 enable-migrations），那么您应该能够`update-database`在包管理器控制台上运行以创建数据库。

这`$InitialDatabase`是一个自动创建的特殊迁移步骤。您永远不应尝试使用该名称添加新的迁移步骤。

# javascript - Android 4.1 的访问控制允许来源错误

> ID：11318703
> 
> 赞同：15
> 
> 时间：2012-07-03T20:29:17.767
> 
> 标签：javascript, android, xmlhttprequest, cross-domain

我在 Android 4.1 上遇到 Access-Control-Allow-Origin 问题

在我的应用程序中，我有一些本地 HTML 文件和 Javascript，用于从 Web 服务获取数据。在尝试 Android 4.1 之前没有问题，但是在尝试 Android 4.1 之后我得到了这个错误。

我阅读了很多文件，但我找不到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-16T19:20:16.580

你需要做类似的事情

```
if (Build.VERSION.SDK_INT >= VERSION_CODES.JELLY_BEAN) 
  wv.getSettings().setAllowUniversalAccessFromFileURLs(true); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T13:12:30.523

@我是开发人员和其他面临同样问题的人。

Slushis 解决方案工作正常。但是，如果您想针对 API11 以下的系统进行编译和支持，则必须添加以下内容：

```
if (Build.VERSION.SDK_INT >= 16) {  
    Class<?> clazz = webView.getSettings().getClass();
    Method method = clazz.getMethod("setAllowUniversalAccessFromFileURLs", boolean.class);
    if (method != null) {
        method.invoke(webView.getSettings(), true);
    }
} 
```

这将在运行时加载并调用该方法，因此您可以使用例如 Android 2.3.3 进行编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:20:28.827

您的 Web 服务是否来自同一个域？我曾经在对不同域下的服务进行 ajax 调用时遇到此错误。如果您对 Web 服务具有控制权，则可以在标头中设置 Access-Control-Allow-Origin: * （尽管这种方式不是一种安全的方式。）

# sql - 获取前几个月的数据

> ID：11318712
> 
> 赞同：-1
> 
> 时间：2012-07-03T20:29:55.917
> 
> 标签：sql, sql-server, date

在过去的 30 天里，这似乎已被多次回答。但似乎不是我需要的。

例如，如果今天是 2012 年 7 月 10 日。我希望提取 6 月份的所有数据。我需要在每个月初的几天后运行此查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:42:35.190

当然有更好的方法可以做到这一点，但一种方法是：

```
DECLARE @Date DATETIME
SET @Date = '20120710'

SELECT *
FROM YourTable
WHERE YourDateColumn >= CONVERT(VARCHAR(6),DATEADD(MONTH,-1,@Date),112)+'01' 
AND YourDateColumn < CONVERT(VARCHAR(6),@Date,112)+'01') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T07:05:12.720

-- 上个月的第一天

```
select DateAdd(Month, DateDiff(Month, 0, GetDate())-1,0) 
```

-- 上个月的最后一天

```
Select DateAdd(day,-1,DateAdd(Month,1,DateAdd(Month, 
                                            DateDiff(Month, 0,GETDATE())-1,0))) 
```

请用您的日期列替换 GETDATE()

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T20:41:46.693

啊，在那种情况下，你需要这样的东西：

```
SELECT *
FROM
  reporting_table_name_goes_here
WHERE
  DATEPART(month, YourDateColumn) = DATEPART(month, DATEADD(month, -1, getdate()))
AND DATEPART(year, YourDateColumn) = DATEPART(year, DATEADD(month, -1, getdate())) 
```

查看[MSDN](http://msdn.microsoft.com/en-us/library/aa258265%28v=sql.80%29.aspx)了解详细信息。

# php - image_graph 底漆

> ID：11318717
> 
> 赞同：1
> 
> 时间：2012-07-03T20:30:19.437
> 
> 标签：php, graph, matrix, pear

任何人都知道 Pear 的 image_graph 库的好入门吗？我有 Jesper Veggerby 的示例代码，但我需要更详细的内容来提供语法和使用规则。我在生成图表矩阵时遇到问题 - 我要么在矩阵中的所有图表上复制相同的数据，要么只在图表的最左边一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:57:14.013

我不会使用 Image_Graph，而是使用其他库之一，例如 ez Component Graph 库。它的错误更少，看起来更好。

# matlab - Matlab 的 slice() 函数无法按预期工作

> ID：11318724
> 
> 赞同：3
> 
> 时间：2012-07-03T20:30:48.380
> 
> 标签：matlab, 3d, plot, volume-rendering, discrete-space

我想使用以下代码行在13 个`z`位置绘制离散的 2D 图像。`[4:4:52]`

```
a=100;
[mesh.x,mesh.y,mesh.z] = meshgrid(1:1:100,1:1:100,4:4:52);
a_unifdist=0;
b_unifdist=10;
noise=a_unifdist+(b_unifdist-a_unifdist).*rand(100,100,13);
c = (a./mesh.x)+noise;
slice(c,1:100,1:100,4:4:52); 
```

但是，我得到了从 1 到 13 的 13 个连续图，而不是 13 个离散位置，如下所示：

![在此处输入图像描述](../Images/4174ccad4d51ec9fd47f3def46b0298f.png)

有人可以告诉我我的错误是什么吗？我希望图像堆叠在`[4:4:52]`z 轴上的位置。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T21:05:21.760

也许你的意思是：

```
slice(mesh.x, mesh.y, mesh.z, c, [], [], 4:4:52) 
```

* * *

这是一个比随机数据更有趣的例子：

```
load mri
D = double(squeeze(D));

h = slice(D, [], [], 1:size(D,3));
set(h, 'EdgeColor','none', 'FaceColor','interp')
alpha(.1) 
```

![截屏](../Images/62dfe3a74069a026c7bf86e3c73f9e6d.png)

# ruby-on-rails - 对未命名为复数的表使用 ActiveRecord

> ID：11318725
> 
> 赞同：0
> 
> 时间：2012-07-03T20:30:56.507
> 
> 标签：ruby-on-rails, activerecord

我正在尝试获取一个基本的 rails 应用程序来从 MS SQL Server 数据库中读取数据。在我正在阅读的教程中（如下所示），它提到表需要遵循某些规则，例如名称是复数形式和下划线等。我的数据库中的表都没有遵循该约定并且可以不能改变。这仍然是真的吗？如果是这样，我需要阅读什么来了解如何与这些表进行通信？

片段 [http://coding.smashingmagazine.com/2009/03/27/ultimate-beginners-guide-to-ruby-on-rails/](http://coding.smashingmagazine.com/2009/03/27/ultimate-beginners-guide-to-ruby-on-rails/)

模型的结构和行为与数据库中的表之间的映射大部分是完全自动化的，前提是您在表的设计中遵守一些规则。一般原则是：

1.  您的表名是您的类名的复数、带下划线的变体。因此，类 User 将映射到表 users.CookieRecipe 将映射到 cookie_recipes。

2.  您的表需要在具有自动增量属性的名为 id 的整数列上具有其主键。

3.  与其他表的关联存储在以它们命名的列中。如果要存储属于用户的帖子，则帖子表需要一个 user_id 列

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:58:45.237

首先，假设您有一些其他数据库系统支持您的 rails 应用程序，您只需要添加对 SQLServer 数据库的只读访问权限。

首先在 app/models/rosql.rb 中创建一个主模型：

```
def Rosql < ActiveRecord::Base
   establish_connection("ROSQL#{Rails.env}")
end 
```

然后将其添加到您的 database.yml

```
ROSQLproduction:
  adapter: sqlserver
  mode: dblib
  dataserver: WHATEVER
  username: user
  password: password
  database: WHATEVER
  port: 1433 
```

最后一部分实际上高度依赖于您用于访问 SQL Server 的堆栈。上面是我选择的一个例子，它是 TinyTDS/Freetds。无论如何，现在您可以开始声明 SQL Server 表模型，如下所示：

```
SqlServerTable < Rosql
  self.table_name = "non_railsy_table_name"
end 
```

您可能想也可能不想尝试定义主键：

```
SqlServerTable < Rosql
  self.table_name = "non_railsy_table_name"
  self.primary_key "thingKey_PK"
end 
```

所以现在，假设 thingKeyPK 是一个字符串！

```
@x = SqlServerTable.find("XYZ123") 
```

将工作！

# php - 使用一个 PHP 提交按钮更新多个 MySQL 行

> ID：11318727
> 
> 赞同：1
> 
> 时间：2012-07-03T20:31:06.337
> 
> 标签：php, mysql, database

我很难弄清楚我认为应该简单的事情。我需要使用一个提交按钮更新数据库中的多行。我现在可以为每一行提交一个提交，但我需要将它结合起来。这就是我正在尝试的。我哪里出错了？（我一直在使用我在网上找到的多个教程，我想我把事情都搞混了）。

这是表格：

```
<?php foreach ($teams as $team): 
$id[]=$team['id'];?>

<form action="?update" method="post">
    <div class="team-box">
        <h2><?php echo $team['name'] ?></h2>

        <label for="name">Name:</label>
        <input type="text" name="name" value="<?php echo $team['name'] ?>" />

        <label for="name">Match Wins:</label>
        <input type="text" name="mwins" value="<?php echo $team['mwins'] ?>" />

        <label for="name">Match Losses:</label>
        <input type="text" name="mlosses" value="<?php echo $team['mlosses'] ?>" />

        <label for="name">Match Ties:</label>
        <input type="text" name="mties" value="<?php echo $team['mties'] ?>" />

        <label for="name">Game Wins:</label>
        <input type="text" name="gwins" value="<?php echo $team['gwins'] ?>" />

        <label for="name">Game Losses:</label>
        <input type="text" name="glosses" value="<?php echo $team['glosses'] ?>" />

        <input type="hidden" name="id" value="<?php echo $team['id'] ?>" />
    </div> 
```

这是处理更新的PHP：

```
try
{
foreach($_POST['id'] as $id) {
$sql = 'UPDATE teams SET
    name = "' . $_POST['name'.$id] . '",
    mwins = "' . $_POST['mwins'.$id] . '",
    mlosses = "' . $_POST['mlosses'.$id] . '",
    mties = "' . $_POST['mties'.$id] . '",
    gwins = "' . $_POST['gwins'.$id] . '",
    glosses = "' . $_POST['glosses'.$id] . '"
    WHERE id = "' . $_POST['id'.$id] . '"';
$pdo->exec($sql);
}

}
catch (PDOException $e)
{
    $error = 'Error adding submitted team: ' . $e->getMessage();
    include 'error.html.php';
    exit();
}

header('Location: .');
exit(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:34:40.453

由于每个 UPDATE 查询的所有字段名称都会更改，因此您需要像已经执行的那样执行单独的查询。我认为您无法执行单个 UPDATE 查询。

我不明白，执行几个更新查询有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:04:50.677

有几件事需要修复。

1.  FORM 必须在 foreach 之外。

2.  '...name="name" value="...' 与 _POST 代码一致，应改为：... name="name" value="...

这样，单个 POST 将提交，比如说，

```
 name123="Rangers"
  mwins174="123" 
```

然后你需要所有的ID。您可以通过在 foreach 中发出以下命令来做到这一点：

```
 <input type="hidden" name="id[]" value="<?php print $team['id']; ?>" /> 
```

这将产生 HTML：

```
 <input type="hidden" name="id[]" value="123" />
 ...
 <input type="hidden" name="id[]" value="456" /> 
```

并且 $_POST['id'] 是一个包含 123、456 等的数组。

您也可以输入 HTML：

```
 <input type="text" name="name[<?php print $team['id']; ?>]" value="... 
```

这样 $_POST['name'] 将是一个向量，其键与 id 的值相同，因此：

```
foreach($id as $team_id)
{
    // Pseudocode
    UPDATE... SET name=$name[$team_id]... WHERE id = $team_id;
} 
```

这样你就有一个提交和多个更新。

# iphone - 尝试向应用商店提交更新时“未找到合适的应用程序”

> ID：11318728
> 
> 赞同：0
> 
> 时间：2012-07-03T20:31:18.053
> 
> 标签：iphone, xcode, app-store-connect

我为此查看了其他问题，但他们没有回答我的问题。我正在尝试为我的应用程序提交更新，因此在 iTunes Connect 中我单击了添加版本并将版本更新为 1.01。然后我进入 info.plist 并将捆绑版本更新为 1.01。当我尝试将其提交到应用商店时，我收到了上述错误。在我的管理应用程序中，它说版本 1.01 准备上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:55:39.047

不要直接在 plist 中进行版本更改，而是使用项目包目标页面上的摘要选项卡。此外，请确保您的捆绑包标识符在那里也没有更改。请务必在任何更改后按 Enter 并检查下一个选项卡“信息”以查看更改是否已反映在那里。如果这些都匹配并且您仍然有问题，请联系苹果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:48:45.430

您需要在 Xcode 找到它之前单击“准备上传二进制文件”按钮。

否则，它可能是您版本号中前面的零。您应该使用`1.1`或`1.0.1`。

# oauth - Google Analytics Service API - 确定访问令牌是否过期

> ID：11318733
> 
> 赞同：0
> 
> 时间：2012-07-03T20:31:39.990
> 
> 标签：oauth, google-analytics

我想知道是否有人知道使用分析 API 检测 401 响应的干净编程方式。我知道底层的 HTTP 传输可能有它，但是当通过 Analytics 对象进行调用时，唯一的失败指示是 IOException（这可能表示任何类型的错误）。如果有某种方法可以获取堆栈跟踪中显示的 JSON 响应，您可能可以在那里检查，但现在我唯一能想到的就是解析 e.getMessage() 字符串。例子：

```
GaData gadata = null;
try {
    gaData = analytics.data().ga().get(
            "ga:" + profileId,
            "2012-06-01",
            "2012-06-30",
            "ga:visits")
            .execute();
} catch (IOException ioe) {
    if (ioe.contains("401")) {
        System.out.println("A 401 occurred.");
    }
} 
```

隔离这种情况的原因是因为它表明访问令牌已过期，因此替代解决方案将是检查访问令牌是否已过期的更好方法。如果可以做到这一点，那么代码可以使用 API 密钥进行调用以授予新的访问令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:53:29.603

[文档](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api#requests)说[GoogleJsonResponseException](http://javadoc.google-api-java-client.googlecode.com/hg/1.6.0-beta/com/google/api/client/googleapis/json/GoogleJsonResponseException.html)将被抛出。GoogleJsonResponseException.getDetails() 返回一个[GoogleJsonError](http://javadoc.google-api-java-client.googlecode.com/hg/1.6.0-beta/com/google/api/client/googleapis/json/GoogleJsonError.html)。GoogleJsonError.code 方法将返回错误代码（在本例中为 HTTP 401 错误）。

# git - 在源代码控制下管理代码使用的第三方源代码和二进制文件

> ID：11318738
> 
> 赞同：29
> 
> 时间：2012-07-03T20:32:00.510
> 
> 标签：git, git-submodules, git-subtree

我在源代码控制下有一个大型代码库（以前是颠覆，现在是 git）。为了编译代码并运行测试，我使用了一组 3rd 方库。这些库可以分为几类L

*   仅限二进制文件
*   第三方来源
*   3rd 方来源 + 本地修改

每个库都有其 {Windows, Linux} X {debug, release} X {32bit, 64bit} 配置。此外，这些库随着时间的推移而发展，我的项目的不同版本使用这些库的不同版本/构建。

**我的问题是存储这些第 3 方的最佳方式是什么？**

这是我的一组偏好：

1.  保持项目源存储库的大小较小
2.  使项目源与第 3 方保持同步，以便我始终可以编译和运行旧版本
3.  易于管理
4.  跨平台

我尝试并想到了几种解决方案，但都不令人满意：

1.  使用版本控制脚本从手动管理的 ftp 服务器获取二进制文件，该服务器包含所有版本的库。这可行，但需要仔细管理服务器上的目录结构。这很容易出错，因为有人可能会用新版本覆盖其中一个二进制文件。
2.  SVN externals - 当时 SVN externals 无法引用特定标签。今天我正在使用 git。
3.  Git 子模块 - 拉取可能很大的整个外部存储库。或者，它需要为每个库管理一个单独的存储库。子模块指向一个特定的标签，这意味着要么我得到所有的外部，当我只需要一些时，要么我在 git 树中模仿一些奇怪的文件系统。

我很清楚，第 3 方源代码需要存储在供应商分支的 git 中，但二进制文件和标头是另一回事。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T07:36:49.963

我的问题的一个公平解决方案是最近合并到主线 git中的[git-subtree 。](https://github.com/apenwarr/git-subtree/)它在我的要求和平台限制之间提供了一个公平的平衡。现在我有多个外部存储库（每个都有一个供应商分支和本地更改分支），每个项目存储库都将这些外部存储的一部分放入子文件夹中。为了使事情井井有条，我维护了一个“bin”和“lib”文件夹，其中包含指向 externals 子文件夹中相应文件/文件夹的软链接。

git-subtree 允许将外部存储库中的子树合并到子文件夹中。子文件夹可以与外部存储库来回合并。

优点缺点：

1.  小型存储库 - 存储库没有我希望的那么小，但它仅包含来自外部存储库的必要部分。为了节省空间，我尽量保持外部树木很小。我认为这是一个很好的代价，作为回报，我得到了简单性和健壮性；因为加载和更新项目是一个简单的 git pull 并且所有项目相关数据都包含在一个存储库中

2.  项目/外部同步 - 由于项目和外部在同一个存储库中进行版本控制，我可以签出我想要的任何分支/标签，并期望它能够正常工作。

3.  简单 - 日常工作是直截了当的。更新外部存储库、创建新存储库或切换到不同版本的外部存储库可能会很棘手，并且需要特殊的语法。然而，这确实发生得太多了。最好的事情是可以先向这个项目添加一个新的外部，然后才将它（使用 git-subtree）拆分到它自己的存储库中。

4.  跨平台 - 嗯，它是 git

5.  二进制文件 - 我决定避免持有二进制文件，而是提供 Makefile。我做出这个决定是因为我的一些外部依赖于其他外部，这使得构建一个不经常更改的二进制文件变得非常困难。对于某些外部组件，由于构建时间非常长，我确实存储了二进制文件。

结构：

```
/root
   /External
      /External1 (git-subtree from git@git.domain.com:External1 v1.0)
      /External2 (git-subtree from git@git.domain.com:External2 v0.7)
   /lib
      /libExternal1.a -> ../External/External1/libExternal1.a
      /libExternal2.a -> ../External/External1/libExternal2.a
   /include
      /External1 -> ../External/External1/include
      /External2 -> ../External/External2/include 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:38:13.630

我们已经选择了您的选项 3 的变体。选项 1 在我看来等同于选项 3，但您需要更多的实施/测试工作，因此更有可能出错。

最终，如果您希望能够准确地重新创建构建，您需要将您的外部（包括二进制文件）与代码本身一起进行版本控制并在本地托管。并且 git 子模块会很好地为你做这件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T19:41:47.857

对于第三方来源，我认为子模块正是您正在寻找的。如果您不想在每个克隆中都需要整个上游历史记录，请使用您自己的上游存储库前端，其中包含一个仅包含必要历史记录的手工分支。看看`git commit-tree`如何制作这些，这很容易。提交 id 不会匹配权威上游，但树 id 会。

对于二进制文件，git 附件似乎是最推荐的存储与 git 的源差异焦点不相符的内容的方式。我自己没有使用过它，但该设计看起来已准备好用于生产，它还支持多个独立的“存储库”，并且看起来尽可能方便。

这不是交钥匙，所以它并不能真正满足您的第三个要求，但它可以解决剩下的问题，您需要的是直接使用基本工具。

# android - 有没有办法加快 Jsoup.parse() 的速度？

> ID：11318739
> 
> 赞同：8
> 
> 时间：2012-07-03T20:32:19.483
> 
> 标签：android, jsoup

我正在使用 Jsoup.parse() 的所有 String 版本：

```
parse(String html, String baseUri) 
```

排除连接速度以对其性能进行基准测试。

在典型的低端 Android 手机`Jsoup.parse()`上，调用一个不太罕见的长维基百科页面 (~600KB) 的 html 字符串需要**9 秒**！

我的客户不愿意接受这种延迟，我正在考虑将 Jsoup 转储到不同的引擎，自己解析网页（仍然使用 Java），或者在 NDK 中使用一些 C/C++ 解析器（如果可用）。

但我更喜欢尽可能继续使用 Jsoup。

有没有办法加快速度`Jsoup.parse()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T11:04:07.433

我尝试用大页面自己做的事情（**如果可能**并且您只想要页面上的一些信息）是尝试最小化文本以解析先前识别您想要的区域，然后使用 JSoup 解析想要的区域。

这样你就可以在 Java 中结合你自己的解析来减少数据，然后使用 JSoup 作为商品。

# css - 背景图像不显示在 Windows 7 浏览器上

> ID：11318741
> 
> 赞同：1
> 
> 时间：2012-07-03T20:32:22.990
> 
> 标签：css, windows-7, background-image

我为家人的朋友开发了一个非常基本的网站。它几乎准备好解决 Windows 7 浏览器上的一个小问题。

我对 Windows 7 平台的设计经验不是很丰富，因此一无所获。我也没有自己的 Windows 7 机器，必须在工作中检查，这使得调试变得很棘手。

这是网址——

pipecoproducts.com

问题在于背景图像，它们显示在我测试的所有其他平台上，但不是 Windows 7。图像是在 Photoshop 中创建的，并在其上添加了白色清洗，以使内容显示在顶部。它被保存为 png 文件。

这是用于显示背景图像的 CSS，但我不明白为什么 Windows 7 浏览器不喜欢它-

```
#main {
    background-image:url("/img/backgrounds/pipeco.png");
    background-repeat:no-repeat;
} 
```

有没有人有办法解决这个问题？

提前致谢。

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:41:19.160

在我的 Windows 7 PC 上的 Internet Explorer 9、Chrome 和 Firefox 上对此进行了测试，图像在这里没有任何问题。

似乎问题出在您的身边，而不是您的代码上，尽管我注意到您的背景图像是 1MB，这对于背景来说确实很大，也许图像停止加载适当的大小或者您没有等待足够长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:00:43.700

您的工作计算机/网络是否有某种可能阻止访问图像文件的网络过滤软件？

否则，正如 EliotVU 所说，1MB 太大了，尤其是对于背景图像。在慢速连接上，加载可能需要很长时间，以至于您认为它不会出现。

# java - Spring Batch：读取数据库并写入多记录平面文件

> ID：11318746
> 
> 赞同：0
> 
> 时间：2012-07-03T20:32:57.147
> 
> 标签：java, spring, spring-batch

嗨，我正在为读取数据库和写入平面文件的设计做 POC/base。我在这里遇到了几个问题，但首先我会告诉你平面文件的输出格式 ![在此处输入图像描述](../Images/467299d6c702185c1736ce44b3b2a786.png)

请让我知道如何设计输入编写器，我需要从不同的表中读取事务，处理记录，找出汇总字段，然后我应该如何设计具有如此复杂设计的项目编写器。请指教。我能够成功地从单个表中读取并写入文件，但上述任务看起来很复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:36:35.120

扩展[`FlatFileItemWriter`](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/FlatFileItemWriter.html)为只打开一个文件一次并附加到它而不是覆盖它。然后按照您希望它们出现的顺序将同一个文件写入器传递给多个阅读器。（确保读者阅读的每个对象都可以通过作者理解的东西进行扩展！也许`interface BatchWriteable`是个好名字。）

一些粗略的伪代码：

### 在一切开始之前：

*   打开文件。
*   写入文件头。
*   开始批处理步骤

### 根据需要多次实施

*   阅读批处理部分
*   处理批次部分
*   写批处理部分

### 完成后：

*   写入文件页脚
*   关闭文件

# android - 更改 ActionBar 选项卡的背景颜色

> ID：11318750
> 
> 赞同：13
> 
> 时间：2012-07-03T20:33:04.900
> 
> 标签：android, android-actionbar, android-ui

有没有办法改变ActionBar中标签栏的背景颜色而不用在单行版本中改变它？

为了澄清我想要什么：在纵向模式下，ActionBar 分为两行，ActionBar 本身和下面的选项卡。在横向模式下，选项卡位于实际的 ActionBar 中。

我想更改纵向模式的背景颜色。如果我更改 TabView 中的背景，两种模式都会更改。我是否必须为这些创建单独的样式？这就引出了第二个问题：有没有办法知道什么时候是两条线，什么时候不是？

还是我只是错过了什么？

我正在使用 ActionBarSherlock 顺便说一句

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-08T08:49:43.120

我认为您正在寻找`android:backgroundStacked`ActionBar 样式的属性：

```
<style name="MyTheme" parent="android:Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/MyActionBarStyle</item>
</style>

<style name="MyActionBarStyle" parent="@android:style/Widget.Holo.Light.ActionBar.Solid">
    <item name="android:backgroundStacked">@drawable/my_stacked_background</item>
</style> 
```

或（如果使用 ActionBarSherlock）：

```
<style name="MyTheme" parent="@style/Theme.Sherlock.Light">
    <item name="android:actionBarStyle">@style/MyActionBarStyle</item>
    <item name="actionBarStyle">@style/MyActionBarStyle</item>
</style>

<style name="MyActionBarStyle" parent="@style/Widget.Sherlock.Light.ActionBar.Solid">
    <item name="android:backgroundStacked">@drawable/my_stacked_background</item>
    <item name="backgroundStacked">@drawable/my_stacked_background</item>
</style> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-12-17T07:54:37.453

要更改操作栏选项卡的颜色，请使用以下代码：

//例如如果你想要白色作为标签背景，那么

```
getActionBar().setStackedBackgroundDrawable(new ColorDrawable(Color.parseColor("#FFFFFF"))); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T20:39:58.140

在 ActionBarSherlock 中`values/abs__themes.xml`有

```
<item name="actionModeSplitBackground">@drawable/abs__cab_background_bottom_holo_dark</item> 
```

您必须创建自己的源自 ABS 的主题

```
<style name="AppTheme" parent="Theme.Sherlock">
    <item name="actionBarStyle">@style/MyActionBar</item>
    <item name="android:actionBarStyle">@style/MyActionBar</item>
</style>

<style name="MyActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="actionModeSplitBackground">@drawable/my_split_background</item>
</style> 
```

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-01T20:08:59.293

```
ColorDrawable colorDrawable = new ColorDrawable(Color.White);
actionBar.SetStackedBackgroundDrawable(colorDrawable); 
```

对于 xamarin 人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T20:50:36.560

要根据方向分离样式，您必须在`/res`文件夹中创建一个名为`layout-land`（横向模式）和`layout-port`（纵向模式）的新文件夹，并将您的 xml 文件放在操作栏上，并在每个文件夹上设置它的特定样式（使用您想要的颜色）文件夹。

# mootools - MooTools Page Peel back 图像突出效果

> ID：11318751
> 
> 赞同：1
> 
> 时间：2012-07-03T20:33:05.117
> 
> 标签：mootools

我有一个运行良好的 Mootools Page Peel 功能，除了当您将鼠标悬停在“小”图像（小剥离）上时，较大的图像会展开，后面的图像可以在前面的图像后面看到，假设可以覆盖它。请看我的例子： http: [//jsfiddle.net/uc6PJ/1/](http://jsfiddle.net/uc6PJ/1/) 我让动画变慢了，这样你就能明白我的意思了 - 看看效果的底部，你会发现它看起来不正确。

谢谢你！

# html - CSS没有扩展？

> ID：11318753
> 
> 赞同：1
> 
> 时间：2012-07-03T20:33:18.440
> 
> 标签：html, css, flask, jinja2

我正在做一个我自己创建的项目（www.deepsecurity.org），人们将来可以粘贴东西等等。

我对这个项目有一个问题，如果你检查网站并检查某人发布的“圣经”粘贴，你可以清楚地看到帖子退出黑屏，你无法再阅读其余部分。

我怎样才能解决这个问题？已经尝试了几个小时。

我正在使用 Flask + SQLAlchemy + WTForms 和 Pygments。

看一下css（我写得很背的css，对此感到抱歉）

样式.css

```
@import url('topbar_style.css');
@import url('errors.css');
@import url('showcodes.css');
@import url('addcode.css');
@import url('highlight.css');
@import url('about.css');
@import url('login.css');

html {
    font-family: 'Lucida Console', Monaco, monospace;
    font-size: 13px;
    color: #FFFFFF;
    background: #F2F2F2 url('images/bg_body.png') repeat-x 0 0;
    display: inline-block
}

.page {
    overflow: hidden;
    margin: 3em auto;
    width: 950px;
    display: inline-block
    border: 5px solid #ccc;
    padding: 0.8em;
    border: 1px solid #383838;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    background: #202020;
}

div.codes h1 {
    font-family: 'Lucida Console', Monaco, monospace;
    margin: 0px;
    color: #F2F2F2;
    border-bottom: 2px solid #eee;
}

h2 { 
    font-size: 15px;
}

div.about-text { 
    white-space: pre; 
}

div.codes {
    white-space: pre;
} 
```

显示代码.css

```
.codes {
    display: inline;
    list-style: none; 
    margin: 0; 
    padding: 0;
}

.codes li { 
    margin: 0.2em 1em;
} 
```

![这就是改变你们告诉我的内容后发生的事情](../Images/6c29ae7f9166b91cccd4f57fc08e1482.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:43:24.650

好的，所以，您在此页面中有两个问题：

1.  style.css ，第 44 行，

    ```
    div.codes {
        white-space: pre;
    } 
    ```

    删除那个。

2.  在页面的“圣经”部分，粘贴有一个`<code><pre>`标签，它基本上强制文本“未格式化” [http://reference.sitepoint.com/html/pre](http://reference.sitepoint.com/html/pre) 您可以将所有代码/pre 元素更改为 div或 p，或者您可以简单地将这一行添加到您的 css 文件中：

    ```
    code {
        white-space: normal;
    } 
    ```

问题解决了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:48:16.690

这是因为空白 CSS 声明。要修复它，请使用以下命令：

```
.codes code { 
    white-space:pre-wrap; 
} 
```

这将使预格式化的文本保持原样，但强制它换行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:44:06.360

我相信这是因为 white-space: pre 仅遵循预先格式化的换行符，将其更改为 white-space: normal;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:03:43.183

1.  您无法阅读 div 之外的其余文本，因为

    ```
    .page {
     overflow: hidden;
    } 
    ```

2.  `pre`由于那些该死的标签，它没有包装。删除它们。

3.  还有，改变

    ```
    div.codes {
     white-space: pre;
    } 
    ```

至

```
 div.codes {
    white-space: normal;
   } 
```

# ruby-on-rails-3.1 - 特立尼达的 OpenSSL 密钥库生成

> ID：11318754
> 
> 赞同：1
> 
> 时间：2012-07-03T20:33:21.663
> 
> 标签：ruby-on-rails-3.1, https, openssl, keystore, trinidad

我正在尝试使用 openSSL 为我的应用程序设置 https 连接。我正在运行一个 Neo4j 1.2.2 数据库，一个 Trinidad 1.3.5 Web 服务器，使用 Rails 3.1 和 ruby​​ 1.9。

我有一个 Thawte 试用证书 ca_cert.crt，它们的中间证书和根证书分别为 ca_intermediate.crt 和 ca_root.crt，以及我自己的私钥 ca_private.pem。我需要运行什么 openssl 命令来创建密钥库，我可以在我的应用程序的 trinidad.yaml 配置文件中指定它？

到目前为止，我尝试过的“看起来最接近正确”的事情是：

```
pkcs12 –export –in ca_cert.crt inkey ca_private.pem –out keystore.p12 –name tomcat 
```

它给了我错误：

```
unable to load certificates
6380:error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag:.\crypto\as
n1\tasn_dec.c:1319:
6380:error:0D07803A:asn1 encoding routines:ASN1_ITEM_EX_D2I:nested asn1 error:.\
crypto\asn1\tasn_dec.c:381:Type=X509_CINF
6380:error:0D08303A:asn1 encoding routines:ASN1_TEMPLATE_NOEXP_D2I:nested asn1 e
rror:.\crypto\asn1\tasn_dec.c:751:Field=cert_info, Type=X509
6380:error:0907400D:PEM routines:PEM_X509_INFO_read_bio:ASN1 lib:.\crypto\pem\pe
m_info.c:258:
error in pkcs12 
```

在我看来，openssl 不喜欢我保存文件的格式，尽管我尝试了几乎所有我能想到的 .pem、.crt、.cer 和 .key 扩展名的组合都无济于事。我完全是 SSL 新手，所以我希望我只是在做一些愚蠢的事情，而且它很容易解决......

这是我一直在尝试遵循的示例：[https ://github.com/trinidad/trinidad/wiki/ssl-end-to-end-example](https://github.com/trinidad/trinidad/wiki/ssl-end-to-end-example)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:57:16.317

从[这个答案](https://stackoverflow.com/a/2620293/277733)看来，Thawte 证书的格式为 PKCS#7，而`openssl pkcs12 -export`命令[需要 PEM](http://www.openssl.org/docs/apps/pkcs12.html#FILE_CREATION_OPTIONS)。PKCS#7 中的证书可以使用先前链接答案的命令的修改版本进行转换。

```
$ openssl pkcs7 -in ca_cert.crt -print_certs | openssl x509 -outform PEM > ca_cert.pem 
```

然后执行您提供的命令，创建 PKCS#12 密钥库。

```
$ openssl pkcs12 –export –in ca_cert.pem -inkey ca_private.pem –out keystore.p12 –name tomcat 
```

# optimization - CUDA 中全局优化的成本函数计算

> ID：11318756
> 
> 赞同：4
> 
> 时间：2012-07-03T20:33:32.507
> 
> 标签：optimization, cuda, genetic-algorithm, nonlinear-optimization, cub

我正在尝试使用参数（ ）*优化一个函数*（比如找到最小值）。所有's 都绑定到某个范围（例如to ），如果任何参数离开此范围，则函数会非常快地变为无穷大。但是，可能很大（从到大约）并且计算它的值需要很长时间。`n``Xn``Xi``-200``200``n``20``60-70`

我不认为*关于函数*的细节有很大的相关性，但这里有一些：它由较小的函数（所有不同的）的加权和组成，`20-30`这些函数本身由倒数符号下的点积总和组成正弦函数（`arcsin`、`arccos`、`arctan`等）。类似的东西`arcsin(X1 . X2) + arcsin(X4 . X7) + ...`。

该函数通常具有许多局部最小值，因此（朴素）共轭梯度或准牛顿等方法是无用的。搜索整个域蛮力太慢了。

我最初的想法是结合遗传算法使用某种大规模并行化，该算法在函数域中的不同位置执行许多搜索，并定期检查某些搜索是否达到局部最小值。如果是，它比较它们并丢弃除最小的结果之外的所有结果，并继续搜索直到找到一个相当小的值。

我的两个问题是：

1）是否可以在 CUDA 或类似技术中实现这个问题？CUDA 能足够快地计算出这样一个函数的值吗？

2）在多核PC（12+核）上解决问题会更好/更快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:01:07.520

在 GPU 上实现全局优化算法当然是可能的，但您可能必须修改算法以获得最佳性能。我个人在 GPU 上实现了大约六种基于人口的元启发式算法，并且相对于多线程 CPU 可以获得出色的加速。

随着基于种群的算法迭代几代，您可能会发现种群大小成为您性能的限制因素。如果您的目标函数不容易并行化，那么并行线程的最大数量通常是总体中候选解决方案的数量。GPU 在至少有数万个同时线程的情况下工作得最好，由于人口惯性和其他影响，这对于基于人口的算法并不总是实用的。

您可以通过并行运行多个优化实例在一定程度上绕过人口限制，每个实例都从不同的随机种子开始。此外，您可以安排并行实例通过某种网络拓扑进行通信（这将是一个孤岛模型算法），以便并行实例可以协作演化复杂问题的解决方案。我实际上已经在 OpenCL 中为我的 MScE 论文实现了这一点。

总的来说，这里是您问题的简洁答案：

1) 是的，您可以在 CUDA 或类似技术中实现此功能。您的加速将取决于您的目标函数的可并行化程度以及您希望同时运行多少个并行实例。2) 由于现有库范围更广，而且 CPU 编程模型在概念上比 GPU 模型更简单，因此在 CPU 上实现几乎肯定会更快。它是否“更好”取决于您的价值。

这仍然是一个活跃的研究领域，与构建多核 CPU 实现相比，构建一个有效的 GPU 实现可能需要更长的时间。如果实现时间是您最关心的问题，我建议您查看 PaGMO 项目（及其 Python 绑定 PyGMO），它是岛模型优化器的出色实现，具有广泛的局部和全局优化功能包括。可以为这些岛屿分配任意算法以独立运行，并且您可以准确指定它们如何通信以协同优化您的目标函数。

[http://sourceforge.net/apps/mediawiki/pagmo/index.php?title=Main_Page](http://sourceforge.net/apps/mediawiki/pagmo/index.php?title=Main_Page)

您的问题完全属于我的研究领域，如果您需要，我很乐意为您提供进一步的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-10T07:39:52.057

> CUDA 能足够快地计算出这样一个函数的值吗？

许多成本泛函以一定数量的项的总和的形式表示。例子是：

**球体功能**

![在此处输入图像描述](../Images/1ff37effdc7b85f85feb290980462522.png)

**罗森布洛克函数**

![在此处输入图像描述](../Images/b41d9543bb8248056babc19dac326586.png)

**Styblinski-Tang 函数**

![在此处输入图像描述](../Images/2bb56bf1c392cca37e554b84715083df.png)

在所有这些情况下，成本函数的评估可以通过缩减来执行，或者更好的是，先转换然后缩减。

CUDA Thrust`thrust::transform_reduce`肯定可以服务于范围，但您当然可以设置自己的转换 + 缩减例程。

下面，我将提供一个示例，说明如何使用 CUDA Thrust 或 CUDA 示例提供的缩减例程的自定义版本来计算 Rosenbrock 函数。在后一种情况下，如果定义了关键字，或者在定制例程的编译单元中定义并编译了转换函数，则将指向`__device__`转换函数的指针传递给定制函数。`transform_reduce``EXTERNAL``transform_reduce`

在非外部情况下，Kepler K20c 卡的一些性能结果：

```
N =   90000       Thrust = 0.055ms       Customized = 0.059ms
N =  900000       Thrust = 0.67ms        Customized = 0.14ms
N = 9000000       Thrust = 0.85ms        Customized = 0.87ms 
```

这是代码。有关计时功能，请参阅[OrangeOwlSolutions/Timing](https://github.com/OrangeOwlSolutions/Timing)和[OrangeOwlSolutions/CUDA_Utilities](https://github.com/OrangeOwlSolutions/CUDA_Utilities) github 项目。

请注意，需要单独编译。

**内核.cu**

```
// --- Requires separate compilation

#include <stdio.h>

#include <thrust/device_vector.h>

#include "transform_reduce.cuh"
#include "Utilities.cuh"
#include "TimingCPU.h"
#include "TimingGPU.cuh"

/***************************************/
/* COST FUNCTION - GPU/CUSTOMIZED CASE */
/***************************************/
// --- Transformation function
__device__ __forceinline__ float transformation(const float * __restrict__ x, const int i) { return (100.f * (x[i+1] - x[i] * x[i]) * (x[i+1] - x[i] * x[i]) + (x[i] - 1.f) * (x[i] - 1.f)) ; }
// --- Device-side function pointer
__device__ pointFunction_t dev_pfunc = transformation;

/***********************************/
/* COST FUNCTION - GPU/THRUST CASE */
/***********************************/
struct CostFunctionStructGPU{
template <typename Tuple>
    __host__ __device__ float operator()(Tuple a) {

        float temp1 = (thrust::get<1>(a) - thrust::get<0>(a) * thrust::get<0>(a));
        float temp2 = (thrust::get<0>(a) - 1.f);

        return 100.f * temp1 * temp1 + temp2 * temp2;
    }
};

/********/
/* MAIN */
/********/
int main()
{
    const int N = 90000000;

    float *x = (float *)malloc(N * sizeof(float));
    for (int i=0; i<N; i++) x[i] = 3.f;

    float *d_x; gpuErrchk(cudaMalloc((void**)&d_x, N * sizeof(float)));
    gpuErrchk(cudaMemcpy(d_x, x, N * sizeof(float), cudaMemcpyHostToDevice));

    /************************************************/
    /* "CUSTOMIZED" DEVICE-SIDE TRANSFORM REDUCTION */
    /************************************************/
    float customizedDeviceResult = transform_reduce(d_x, N - 1, &dev_pfunc);
    TimingGPU timerGPU;
    timerGPU.StartCounter();
    customizedDeviceResult = transform_reduce(d_x, N - 1, &dev_pfunc);
    printf("Timing for 'customized', device-side transform reduction = %f\n", timerGPU.GetCounter());
    printf("Result for 'customized', device-side transform reduction = %f\n", customizedDeviceResult);
    printf("\n\n");

    /************************************************/
    /* THRUST-BASED DEVICE-SIDE TRANSFORM REDUCTION */
    /************************************************/
    thrust::device_vector<float> d_vec(N,3.f);

    timerGPU.StartCounter();
    float ThrustResult = thrust::transform_reduce(thrust::make_zip_iterator(thrust::make_tuple(d_vec.begin(), d_vec.begin() + 1)), thrust::make_zip_iterator(thrust::make_tuple(d_vec.begin() + N - 1, d_vec.begin() + N)), CostFunctionStructGPU(), 0.f, thrust::plus<float>());
    printf("Timing for Thrust-based, device-side transform reduction = %f\n", timerGPU.GetCounter());
    printf("Result for Thrust-based, device-side transform reduction = %f\n", ThrustResult);
    printf("\n\n");

    /*********************************/
    /* HOST-SIDE TRANSFORM REDUCTION */
    /*********************************/
//  thrust::host_vector<float> h_vec(d_vec);
        //sum_host = sum_host + transformation(thrust::raw_pointer_cast(h_vec.data()), i);

    TimingCPU timerCPU;
    timerCPU.StartCounter();
    float sum_host = 0.f;
    for (int i=0; i<N-1; i++) {
        float temp = (100.f * (x[i+1] - x[i] * x[i]) * (x[i+1] - x[i] * x[i]) + (x[i] - 1.f) * (x[i] - 1.f));
        sum_host = sum_host + temp;
        //printf("%i %f %f\n", i, temp, sum_host);
    }

    printf("Timing for host-side transform reduction = %f\n", timerCPU.GetCounter());
    printf("Result for host-side transform reduction = %f\n", sum_host);
    printf("\n\n");

    sum_host = 0.f;
    float c        = 0.f;
    for (int i=0; i<N-1; i++) {
        float temp = (100.f * (x[i+1] - x[i] * x[i]) * (x[i+1] - x[i] * x[i]) + (x[i] - 1.f) * (x[i] - 1.f)) - c;
        float t    = sum_host + temp;
        c          = (t - sum_host) - temp;
        sum_host = t;
    }

    printf("Result for host-side transform reduction = %f\n", sum_host);

//  cudaDeviceReset();

} 
```

**transform_reduce.cuh**

```
#ifndef TRANSFORM_REDUCE_CUH
#define TRANSFORM_REDUCE_CUH

// --- Function pointer type
// --- Complete with your own favourite instantiations
typedef float(*pointFunction_t)(const float * __restrict__, const int);

template <class T> T transform_reduce(T *, unsigned int, pointFunction_t *);

#endif 
```

**transform_reduce.cu**

```
#include <stdio.h>

#include "Utilities.cuh"
#include "transform_reduce.cuh"

#define BLOCKSIZE 512
#define warpSize 32

// --- Host-side function pointer
pointFunction_t h_pfunc;

// --- Uncomment if you want to apply CUDA error checking to the kernel launches
//#define DEBUG

//#define EXTERNAL

/*******************************************************/
/* CALCULATING THE NEXT POWER OF 2 OF A CERTAIN NUMBER */

/*******************************************************/
unsigned int nextPow2(unsigned int x)
{
    --x;
    x |= x >> 1;
    x |= x >> 2;
    x |= x >> 4;
    x |= x >> 8;
    x |= x >> 16;
    return ++x;
}

/*************************************/
/* CHECK IF A NUMBER IS A POWER OF 2 */
/*************************************/
// --- Note: although x = 1 is a power of 2 (1 = 2^0), this routine returns 0 for x == 1.
bool isPow2(unsigned int x) {
    if (x == 1) return 0;
    else        return ((x&(x-1))==0);
}

/***************************/
/* TRANSFORMATION FUNCTION */
/***************************/
template <class T>
__host__ __device__ __forceinline__ T transformation(const T * __restrict__ x, const int i) { return ((T)100 * (x[i+1] - x[i] * x[i]) * (x[i+1] - x[i] * x[i]) + (x[i] - (T)1) * (x[i] - (T)1)) ; }

/********************/
/* REDUCTION KERNEL */
/********************/
/*
    This version adds multiple elements per thread sequentially.  This reduces the overall
    cost of the algorithm while keeping the work complexity O(n) and the step complexity O(log n).
    (Brent's Theorem optimization)

    Note, this kernel needs a minimum of 64*sizeof(T) bytes of shared memory.
    In other words if blockSize <= 32, allocate 64*sizeof(T) bytes.
    If blockSize > 32, allocate blockSize*sizeof(T) bytes.
*/
template <class T, unsigned int blockSize, bool nIsPow2>
__global__ void reductionKernel(T *g_idata, T *g_odata, unsigned int N, pointFunction_t pPointTransformation)
{
    extern __shared__ T sdata[];

    unsigned int tid    = threadIdx.x;                              // Local thread index
    unsigned int i = blockIdx.x*(blockDim.x*2) + threadIdx.x;       // Global thread index - Fictitiously double the block dimension
    unsigned int gridSize = blockSize*2*gridDim.x;

    // --- Performs the first level of reduction in registers when reading from global memory on multiple elements per thread.
    //     More blocks will result in a larger gridSize and therefore fewer elements per thread
    T mySum = 0;

    while (i < N) {
#ifdef EXTERNAL
        mySum += (*pPointTransformation)(g_idata, i);
#else
        mySum += transformation(g_idata, i);
#endif
        // --- Ensure we don't read out of bounds -- this is optimized away for powerOf2 sized arrays
        if (nIsPow2 || i + blockSize < N)
#ifdef EXTERNAL
            mySum += (*pPointTransformation)(g_idata, i+blockSize);
#else
            mySum += transformation(g_idata, i+blockSize);
#endif
        i += gridSize; }

    // --- Each thread puts its local sum into shared memory
    sdata[tid] = mySum;
    __syncthreads();

    // --- Reduction in shared memory. Fully unrolled loop.
    if ((blockSize >= 512) && (tid < 256)) sdata[tid] = mySum = mySum + sdata[tid + 256];
    __syncthreads();

    if ((blockSize >= 256) && (tid < 128)) sdata[tid] = mySum = mySum + sdata[tid + 128];
     __syncthreads();

    if ((blockSize >= 128) && (tid <  64)) sdata[tid] = mySum = mySum + sdata[tid +  64];
    __syncthreads();

#if (__CUDA_ARCH__ >= 300 )
    // --- Single warp reduction by shuffle operations
    if ( tid < 32 )
    {
        // --- Last iteration removed from the for loop, but needed for shuffle reduction
        mySum += sdata[tid + 32];
        // --- Reduce final warp using shuffle
        for (int offset = warpSize/2; offset > 0; offset /= 2) mySum += __shfl_down(mySum, offset);
        //for (int offset=1; offset < warpSize; offset *= 2) mySum += __shfl_xor(mySum, i);
    }
#else
    // --- Reduction within a single warp. Fully unrolled loop.
    if ((blockSize >=  64) && (tid < 32)) sdata[tid] = mySum = mySum + sdata[tid + 32];
    __syncthreads();

    if ((blockSize >=  32) && (tid < 16)) sdata[tid] = mySum = mySum + sdata[tid + 16];
    __syncthreads();

    if ((blockSize >=  16) && (tid <  8)) sdata[tid] = mySum = mySum + sdata[tid +  8];
    __syncthreads();

    if ((blockSize >=   8) && (tid <  4)) sdata[tid] = mySum = mySum + sdata[tid +  4];
     __syncthreads();

    if ((blockSize >=   4) && (tid <  2)) sdata[tid] = mySum = mySum + sdata[tid +  2];
    __syncthreads();

    if ((blockSize >=   2) && ( tid < 1)) sdata[tid] = mySum = mySum + sdata[tid +  1];
    __syncthreads();
#endif

    // --- Write result for this block to global memory. At the end of the kernel, global memory will contain the results for the summations of
    //     individual blocks
    if (tid == 0) g_odata[blockIdx.x] = mySum;
}

/******************************/
/* REDUCTION WRAPPER FUNCTION */
/******************************/
template <class T>
T transform_reduce_inner(T *g_idata, unsigned int N, pointFunction_t h_pfunc) {

    // --- Reduction parameters
    const int NumThreads    = (N < BLOCKSIZE) ? nextPow2(N) : BLOCKSIZE;
    const int NumBlocks     = (N + NumThreads - 1) / NumThreads;
    const int smemSize      = (NumThreads <= 32) ? 2 * NumThreads * sizeof(T) : NumThreads * sizeof(T);

    // --- Device memory space where storing the partial reduction results
    T *g_odata; gpuErrchk(cudaMalloc((void**)&g_odata, NumBlocks * sizeof(T)));

    if (isPow2(N)) {
        switch (NumThreads) {
            case 512: reductionKernel<T, 512, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 256: reductionKernel<T, 256, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 128: reductionKernel<T, 128, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 64:  reductionKernel<T,  64, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 32:  reductionKernel<T,  32, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 16:  reductionKernel<T,  16, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case  8:  reductionKernel<T,   8, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case  4:  reductionKernel<T,   4, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case  2:  reductionKernel<T,   2, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case  1:  reductionKernel<T,   1, true><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
        }
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif
    }
    else {
        switch (NumThreads) {
            case 512: reductionKernel<T, 512, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 256: reductionKernel<T, 256, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 128: reductionKernel<T, 128, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 64:  reductionKernel<T,  64, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 32:  reductionKernel<T,  32, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case 16:  reductionKernel<T,  16, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case  8:  reductionKernel<T,   8, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case  4:  reductionKernel<T,   4, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case  2:  reductionKernel<T,   2, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
            case  1:  reductionKernel<T,   1, false><<< NumBlocks, NumThreads, smemSize>>>(g_idata, g_odata, N, h_pfunc); break;
        }
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif
    }

    // --- The last part of the reduction, which would be expensive to perform on the device, is executed on the host
    T *host_vector = (T *)malloc(NumBlocks * sizeof(T));
    gpuErrchk(cudaMemcpy(host_vector, g_odata, NumBlocks * sizeof(T), cudaMemcpyDeviceToHost));

    T sum_transformReduce = (T)0;
    for (int i=0; i<NumBlocks; i++) sum_transformReduce = sum_transformReduce + host_vector[i];

    return sum_transformReduce;
}

template <class T>
T transform_reduce(T *g_idata, unsigned int N, pointFunction_t *dev_pfunc) {
#ifdef EXTERNAL
    gpuErrchk(cudaMemcpyFromSymbol(&h_pfunc, *dev_pfunc, sizeof(pointFunction_t)));
#endif
    T customizedDeviceResult = transform_reduce_inner(g_idata, N, h_pfunc);
    return customizedDeviceResult;
}

// --- Complete with your own favourite instantiations
template float transform_reduce(float *, unsigned int, pointFunction_t *); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T06:48:16.140

我上面的答案主要适用于具有大量未知数的问题，这些问题通常由*局部优化*算法处理。我将把它留在这里以供其他用户参考。

正如您所提到的，您正在处理`60`-`70`未知数，这是一种可以通过*全局优化*算法更容易管理的场景。

如上所述，成本泛函通常由求和组成，因此它们的计算相当于后续的变换和归约操作。有了这么多的未知数，减少共享内存可能是一个有趣的选择。幸运的是，[CUB](http://nvlabs.github.io/cub/)提供了减少共享内存的原语。

这是一个关于如何使用 CUB 计算具有中等数量未知数的问题的大量成本函数值的工作示例。在这种情况下，成本函数被选择为 Rastrigin 函数，但该示例可以通过更改相应的函数来适应其他成本`__device__`函数。

```
#include <cub/cub.cuh>
#include <cuda.h>

#include "Utilities.cuh"

#include <iostream>

#define BLOCKSIZE           256

const int N = 4096;

/************************/
/* RASTRIGIN FUNCTIONAL */
/************************/
__device__ float rastrigin(float x) {

    return x * x - 10.0f * cosf(2.0f * x) + 10.0f;

}

/******************************/
/* TRANSFORM REDUCTION KERNEL */
/******************************/
__global__ void CostFunctionalCalculation(const float * __restrict__ indata, float * __restrict__ outdata) {

    unsigned int tid = threadIdx.x + blockIdx.x * gridDim.x;

    // --- Specialize BlockReduce for type float. 
    typedef cub::BlockReduce<float, BLOCKSIZE> BlockReduceT;

    __shared__ typename BlockReduceT::TempStorage  temp_storage;

    float result;
    if(tid < N) result = BlockReduceT(temp_storage).Sum(rastrigin(indata[tid]));

    if(threadIdx.x == 0) outdata[blockIdx.x] = result;

    return;
}

/********/
/* MAIN */
/********/
int main() {

    // --- Allocate host side space for 
    float *h_data       = (float *)malloc(N               * sizeof(float));
    float *h_result     = (float *)malloc((N / BLOCKSIZE) * sizeof(float));

    float *d_data;      gpuErrchk(cudaMalloc(&d_data,   N               * sizeof(float)));
    float *d_result;    gpuErrchk(cudaMalloc(&d_result, (N / BLOCKSIZE) * sizeof(float)));

    for (int i = 0; i < N; i++) {
        h_data[i] = 1.f;
    }

    gpuErrchk(cudaMemcpy(d_data, h_data, N * sizeof(float), cudaMemcpyHostToDevice));

    CostFunctionalCalculation<<<iDivUp(N, BLOCKSIZE), BLOCKSIZE>>>(d_data, d_result);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    gpuErrchk(cudaMemcpy(h_result, d_result, (N / BLOCKSIZE) * sizeof(float), cudaMemcpyDeviceToHost));

    std::cout << "output: \n";
    for (int k = 0; k < N / BLOCKSIZE; k++) std::cout << k << " " << h_result[k] << "\n";
    std::cout << std::endl;

    gpuErrchk(cudaFree(d_data));
    gpuErrchk(cudaFree(d_result));

    return 0;
} 
```

# jquery - 如何从简单列表中创建带有子列表的无序列表

> ID：11318757
> 
> 赞同：0
> 
> 时间：2012-07-03T20:33:33.233
> 
> 标签：jquery, html-lists

我有这个清单：

```
<ul>
   <li class="level0">First item</li>
   <li class="level1">Second item (children of level0)</li>
   <li class="level2">Third</li>
   <li class="level3">Forth</li>
   <li class="level2">Third</li>
   <li class="level3">Forth</li>
   <li class="level4">Fifth</li>
   <li class="level4">Fifth</li>
   <li class="level2">Second</li>
   <li class="level3">Third</li>
   <li class="level2">Second</li>
</ul> 
```

我想用 javascript 或 jQuery 中的这个列表来做这个

```
<ul>
   <li class="level0">First item</li>
   <ul>
        <li class="level1">Second item (children of level0)</li>
        <ul>
            <li class="level2">Third</li>
            <ul>    
                <li class="level3">Forth</li>
            </ul>
            <li class="level2">Third</li>
            <ul>
                <li class="level3">Forth</li>
                <ul>
                    <li class="level4">Fifth</li>
                    <li class="level4">Fifth</li>
                </ul>
            </ul>
        </ul>
        <ul>
            <li class="level2">Second</li>
            <ul>
                <li class="level3">Third</li>
            </ul>
            <li class="level2">Second</li>
        </ul>
    </ul>
</ul> 
```

如果我能做到这一点，它将极大地帮助用 jQuery 中的手风琴之类的东西来显示它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:56:53.370

尝试这个：

[http://jsfiddle.net/J8LP4/](http://jsfiddle.net/J8LP4/)

```
var re = /\d+$/;

$( "ul li").detach().each( function() {
    doit( this, +this.className.match(re)[0] );
});

function doit( li, level ) {
    var cur = $( "ul:first"),
        prev = cur,
        ul;
    while( level-- ) {
        cur = $( "ul:first", cur );
        if( !cur.length ) {
            cur = $( "<ul>" ).appendTo(prev);
        }
        prev = cur;
    }

    cur.append(li);
}​ 
```

# android - JSON Android 列表视图

> ID：11318761
> 
> 赞同：2
> 
> 时间：2012-07-03T20:34:08.747
> 
> 标签：android, json, web-services, android-listview

我在 netbeans 上构建了这个网络服务，

```
package in.figures.on.mobile;

import db.koneksi.dbKoneksi;
import java.sql.Statement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;
import org.json.simple.JSONValue;

/**
 *
 * @author Setyadi
 */
@WebService()
public class AksesData {

    /**
     * Web service operation
     */
    @WebMethod(operationName = "Kategori")
    public String Kategori() {
        //TODO write your implementation code here:

        dbKoneksi con = new dbKoneksi();
        Statement statement;
        Properties properties;
        List list = new ArrayList();
        String sql = "SELECT idPrimary_key, kategori FROM kategori ";
        ResultSet hasil;
        String kategori = null;

        try{
            statement = con.getConnection().createStatement();
            hasil = statement.executeQuery(sql);
            while (hasil.next()) {
                properties = new Properties();
                properties.put("idPrimary_key", hasil.getString(1));
                properties.put("kategori", hasil.getString(2));
                list.add(properties);
            }
            kategori = JSONValue.toJSONString(list);
        }
        catch(Exception e){
        }

        return kategori;
    }

} 
```

并返回这样的 JSON

```
[{"idPrimary_key":"21ye21","kategori":"FirstCategory"},
{"idPrimary_key":"89oy89","kategori":"SecondCategory"},
{"idPrimary_key":"34ew34","kategori":"ThirdCategory"}] 
```

我尝试像这样在 Android ListView 中消费，但仍然出现错误，

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);  

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);

        HttpTransportSE transportSE = new HttpTransportSE(URL);

        try {
            transportSE.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
            result = response.toString();

        } catch (Exception e) {
            e.printStackTrace();

        }

        String jsonAN = "{\"kat\":"+result+"}"; //try to build to be like this {"kat":[{blablablaJSON}]}
        String kategoriJSONList[][] = new String[99][2];
        String katList[] = new String[99]; //tobe shown on listview, derived from two dimensional array above.
        try {
            jsonObject = new JSONObject(jsonAN);
            jsonArray = jsonObject.getJSONArray("kat");

            for(int i=0; i < jsonArray.length() ; i++){
                kategoriJSONList[i][0] = jsonArray.getJSONObject(i).getString("idPrimary_key").toString();
                kategoriJSONList[i][1] = jsonArray.getJSONObject(i).getString("kategori").toString();
            }

            for(int i=0; i < jsonArray.length(); i++){
                katList[i] = kategoriJSONList[i][1];
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        ListView list  = (ListView) findViewById(R.id.listKategori);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                WebServiceActivity.this, android.R.layout.simple_list_item_1,katList
                );

        list.setAdapter(adapter);

        list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {
                final String kategori = (String) ((TextView)arg1).getText();
                Toast.makeText(WebServiceActivity.this, kategori,
                        Toast.LENGTH_LONG).show();
            }
        }); 
```

需要帮助如何使用如上所示返回的 JSONValue 以显示为 ListView。这几天我压力很大。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T22:26:01.680

行。试试下面的代码。它对我来说功能齐全。您应该在注释行中实现 HttpRequest。请注意 JSON 数组是硬编码的。

 **```
// the Adapter
public class ListViewAdapter extends BaseAdapter {

    private Context context = null;
    private List<String> fields = null;

    public ListViewAdapter(Context context, JSONArray arr) {
        this.context = context;
        this.fields = new ArrayList<String>();
        for (int i=0; i<arr.length(); ++i) {
            try {
                fields.add(arr.getJSONObject(i).toString());
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    }

    @Override
    public int getCount() {
        return fields.size();
    }

    @Override
    public Object getItem(int position) {
        return fields.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup viewGroup) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.itemlist, null);
        TextView txt = (TextView) convertView.findViewById(R.id.ItemList_txt);
        txt.setText(fields.get(position));
        return convertView;
    }

}

// the activity
public class ListViewActivity extends Activity {

    public final String result = "[{\"idPrimary_key\":\"21ye21\",\"kategori\":\"FirstCategory\"},{\"idPrimary_key\":\"89oy89\",\"kategori\":\"SecondCategory\"},{\"idPrimary_key\":\"34ew34\",\"kategori\":\"ThirdCategory\"}]";
    public final String obj = "{\"kat\":"+result+"}";

    private ListViewAdapter adapter = null;
    private ListView myList = null;
    private JSONArray items = new JSONArray();

    final Handler handler = new Handler() {
        @Override
        public void handleMessage(android.os.Message msg) {
            if (msg.what == 0) { // server returned null, try again
                loadFields();
            } else if(msg.what == 1) { // error in json
                // do something to treat it
            } else if (msg.what == 2) { // ready to roll the list
                adapter = new ListViewAdapter(ListViewActivity.this, items);
                myList.setAdapter(adapter);
                adapter.notifyDataSetChanged();
            }
        }
    };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myList = (ListView) findViewById(R.id.Lists_notificationsListview);
    loadFields();
}

private void loadFields() {
    new Thread() {
        @Override
        public void run() {
            Looper.prepare();
            StringBuilder builder = new StringBuilder(obj);
            if (builder != null) {
                try {
                    // HERE, you should implement the HTTP request...
                    items = new JSONObject(obj).getJSONArray("kat");
                    handler.sendEmptyMessage(2);
                } catch (JSONException e) {
                    handler.sendEmptyMessage(1);
                }
            } else {
                handler.sendEmptyMessage(0);
            }
            Looper.loop();
        }
    }.start();
} 
```*  *和 xml 文件：

 **```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:orientation="vertical"
        android:isScrollContainer="true">
        <ListView
            android:id="@+id/Lists_notificationsListview"
            android:layout_width="fill_parent" android:layout_height="match_parent">
        </ListView>
    </RelativeLayout>
</LinearLayout> 
```*  ***```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <TextView
        android:id="@+id/ItemList_txt"
        android:layout_width="fill_parent" android:layout_height="wrap_content"/>
</LinearLayout> 
```*  *结果，它生成以下视图：

![在此处输入图像描述](../Images/0dff99be06270501d3f29d050a9838c3.png)

当然，您可以自定义它来创建您想要的列表，只需解析 jsons！希望我在某种程度上有所帮助...******

# installshield - 在字符串表中找不到关于字符串 ID“IDS_ERROR_27555”的警告

> ID：11318767
> 
> 赞同：1
> 
> 时间：2012-07-03T20:34:29.250
> 
> 标签：installshield, installshield-2010, installshield-2012

我有一个 Installshield2010 项目，在我入职前就出现了这个警告

`ISDEV : warning -3028: The string ID "IDS_ERROR_27555" was not found in the string table. It is referenced in the table:"Error" in column:"Message".`

查看 svn 历史，这一行是几年前添加到错误表中的 - 以及看似无关的更改

`<row><td>27555</td><td>##IDS_ERROR_27555##</td></row>`

但是，正如错误所示，ISString 表中没有相应的条目。我很好奇它是如何添加的。IDS_ERROR 字符串看起来像固定字符串，将它添加到我的 ism 的人似乎不太可能手动这样做。

当然，Flexera 的论坛[是一座鬼城](http://community.flexerasoftware.com/showthread.php?p=465389)。我确实找到了一个[将该字符串定义](http://code.google.com/p/google-saml-bridge-for-windows/source/browse/tags/2.0/SAML_MSI_2.0/GSARKS_x64/Google+Services+for+Sharepoint.ism?r=130#3534)为 的ism`<row><td>IDS_ERROR_27555</td><td>1033</td><td>Error attempting to apply permissions to object '[2]'. System error: [3] ([4])</td><td>0</td><td/><td>1394414478</td></row>`

您的任何 ism 是否定义或引用了 IDS_ERROR_27555？我很确定我可以删除字符串并且不会因为磨损而变得更糟……但我不知道发生了什么让我很烦恼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:14:57.510

我不记得我们在哪个版本中添加了这些字符串，但您可以通过在 Languages 文件夹下导入您的语言的字符串文件（英语为 1033.txt）来获取它们。跨版本的 InstallShield 升级应该已添加此字符串。您可以通过在字符串编辑器视图中导入字符串文件来自己添加它们。当然，如果您修改了其他字符串，您需要确保保留您的首选版本。

# php - Apache 上的 PHP 标准输出

> ID：11318768
> 
> 赞同：12
> 
> 时间：2012-07-03T20:34:30.173
> 
> 标签：php, apache

在 Windows 7 上的 Apache 2.2 中使用 PHP 5.3 作为 php5_module。

上面的配置中stdout去哪里了？

用以下代码测试：

```
<?php
    $stdout = fopen('php://stdout', 'w');
    fwrite($stdout, "stdout<br />\n");

    $output = fopen('php://output', 'w');
    fwrite($output, "output<br />\n");
?> 
```

这仅显示`output`在浏览器中。标准输出会发生什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-03T21:11:38.793

正如[php:// wrappers](http://www.php.net/manual/en/wrappers.php.php)手册页上的手册所示：

> *php://output是一个只写流，它允许您以与***print**和**echo**相同的方式写入输出缓冲区机制。

因此，如果要将输出写入浏览器，请使用`php://output`

另一方面，`php://stdout`

> 允许直接访问 PHP 进程的相应输入或输出流。

对于 Apache，此输出是 Apache 的标准输出句柄，通常在任何地方都看不到，因为这是 Apache 的控制台输出，通常在后台运行。如果您要在控制台的前台运行 Apache，那么您写入的任何内容都`php://stdout`将在控制台上可见。由于 Apache 在后台运行，因此`stdout`通常不会在任何地方捕获或写入数据。

要对此进行测试，请执行以下步骤：

*   在前台运行 Apache（例如`/usr/local/apache2/bin/httpd -D FOREGROUND -k start`）
*   保持控制台窗口打开
*   从浏览器运行脚本
*   `stdout`在控制台上查找您的输出。

# c# - 用数组实现 IEnumerable

> ID：11318779
> 
> 赞同：11
> 
> 时间：2012-07-03T20:35:15.983
> 
> 标签：c#, ienumerable

这可能是一个简单的语法问题，但我无法弄清楚。

通常，我会这样做：

```
public class OrderBook : IEnumerable<PriceLevel>
{
    private readonly List<PriceLevel> PriceLevels = new List<PriceLevel>();

    public IEnumerator<PriceLevel> GetEnumerator()
    {
        return PriceLevels.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return PriceLevels.GetEnumerator();
    }
} 
```

但我想使用一个数组而不是一个列表 - 像这样：

```
public class ArrayOrderBook : IEnumerable<PriceLevel>
{
    private PriceLevel[] PriceLevels = new PriceLevel[500];

    public IEnumerator<PriceLevel> GetEnumerator()
    {
        return PriceLevels.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return PriceLevels.GetEnumerator();
    }
} 
```

`IEnumerator IEnumerable.GetEnumerator()`似乎编译得很好 - 但公众说`IEnumerator<PriceLevel>`我需要某种演员 - 这样做的最佳方法是什么？

威廉

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T20:41:33.850

试试这个：

```
public class ArrayOrderBook : IEnumerable<PriceLevel>
{
    private PriceLevel[] PriceLevels = new PriceLevel[500];

    public IEnumerator<PriceLevel> GetEnumerator()
    {
        return PriceLevels.AsEnumerable().GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return PriceLevels.GetEnumerator();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T20:43:09.923

从您自己的`IEnumerable<T>`实现中可以看出，您需要提供通用和非通用版本的方法来实现接口。为了做到这一点，由于方法具有相同的签名，其中之一需要是显式接口实现。在 的情况下`List`，泛型版本是类中的方法，非泛型版本是显式接口定义，因为泛型版本通常更有用。在数组的情况下，它已经将非泛型版本作为实现，并且在后续版本中添加了该方法的泛型版本。为了避免重大更改，通用版本改为显式接口定义。

有很多方法可以解决这个问题。这里是三个简单的。

```
public IEnumerator<PriceLevel> GetEnumerator()
{
    return PriceLevels.AsEnumerable().GetEnumerator();
}

public IEnumerator<PriceLevel> GetEnumerator()
{
    IEnumerable<PriceLevel> enumerator = PriceLevels;
    return enumerator.GetEnumerator();
}

public IEnumerator<PriceLevel> GetEnumerator()
{
    return ((IEnumerable<PriceLevel>)PriceLevels).GetEnumerator()
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T20:43:57.360

投射`T[]`到相应的`IEnumerable<T>`：

```
 public IEnumerator<PriceLevel> GetEnumerator()
    {
        return ((IEnumerable<PriceLevel>)PriceLevels).GetEnumerator();
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T20:59:46.340

根据 ECMA-335 Partition I, §8.9.1，实现了一个向量类型（单维数组，如`T[]`）`IList<T>`，这意味着它也实现了`IEnumerable<T>`。但是，这些方法的实现是明确的，因此您需要使用其中之一：

选项 1：简单地使用数组的隐式赋值给`IList<T>`.

```
private IList<PriceLevel> PriceLevels = new PriceLevel[500]; 
```

选项2：将成员变量保留为数组，并使用`AsEnumerable`扩展方法。此扩展方法使用受支持的隐式赋值，这比使用直接强制转换（如`(IEnumerable<PriceLevel>)PriceLevels`.

```
IEnumerator IEnumerable.GetEnumerator()  
{  
    return PriceLevels.AsEnumerable().GetEnumerator();  
} 
```

要避免的项目：

1.  该`Cast<T>`方法为数组的每个元素引入了不必要的类型检查，应该避免。
2.  如果您只需要包含枚举中的非空元素，则可以使用`OfType<T>`扩展方法。否则，此方法还会对每个元素引入不必要的类型检查。

# asp.net-mvc-3 - Windows 身份验证--对众多用户进行身份验证

> ID：11318783
> 
> 赞同：0
> 
> 时间：2012-07-03T20:35:28.670
> 
> 标签：asp.net-mvc-3

我在网站上使用 Windows 身份验证，但希望具有访问级别。目前，我正在使用 [Authorize(Users = "userA")] 语法。

但是，由于有超过 20 个 Windows 帐户访问一个站点，我不想在每个 Authorize 语句中硬编码 20 个用户。更重要的是，一些用户需要拥有与其他用户不同的访问权限。我想拥有一个 CustomAuthorizationAttribute 迭代的用户列表，以查看所需的用户是否在其中。

基本上，我试图在不使用表单身份验证的情况下获取角色。

最有效、最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:47:01.093

您的答案位于 ActiveDirectory 域中。由于您使用的是 MVC 3，因此您应该有权访问以下命名空间“目录服务帐户管理”：

[http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

您可以看到这篇文章来描述下面的整个过程，它提供了示例代码供您立即使用：

[http://msdn.microsoft.com/en-us/magazine/cc135979.aspx](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)

警告：您还必须建立一个 LDAP 连接字符串。LDAP 是一种用于从受保护的 Windows 数据库中检索该信息的协议。

[http://technet.microsoft.com/en-us/library/aa996205(v=exchg.65).aspx](http://technet.microsoft.com/en-us/library/aa996205(v=exchg.65).aspx)

要查看实际使用的代码：

[http://www.willasrari.com/blog/query-active-directory-users-using-c/000133.aspx](http://www.willasrari.com/blog/query-active-directory-users-using-c/000133.aspx)

我在使用 IIS 7 的 .NET 3.5 环境中做了类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T00:50:09.677

我读过的关于基于角色的授权的最好的文章之一是： *Darren Neimke*和*Scott Mitchell*[的基于角色的表单身份验证](http://aspnet.4guysfromrolla.com/articles/082703-1.aspx)（[第 2 部分](http://aspnet.4guysfromrolla.com/articles/082703-1.2.aspx)）。他们为 ASP.NET 2.0 编写了它，并且在 4.0 版（以及据我所知的 4.5 版）中没有改变任何概念。

 **要成为该领域的大师，请阅读此 MSDN 及其所有章节：

[构建安全的 ASP.NET 应用程序：身份验证、授权和安全通信](http://msdn.microsoft.com/en-us/library/ff649100.aspx)**

# ruby-on-rails - 创建文件时流式下载

> ID：11318789
> 
> 赞同：2
> 
> 时间：2012-07-03T20:35:44.917
> 
> 标签：ruby-on-rails

我想知道是否有人知道如何在创建文件的同时流式传输文件下载。

我正在生成一个巨大的 CSV 导出文件，截至目前，创建文件需要几分钟时间。一旦它创建浏览器然后下载文件。

我想更改它，以便浏览器在创建文件时开始下载文件。看着这个进度条用户会更愿意等待。尽管它会告诉我“剩余时间未知”，但我不太可能不耐烦，因为我知道数据正在稳步下载。

注意：我使用的是 Rails 版本 3.0.9

这是我的代码：

```
def users_export
  File.new("users_export.csv", "w")                 # creates new file to write to
  @todays_date = Time.now.strftime("%m-%d-%Y")
  @outfile = @todays_date + ".csv"

  @users = User.select('id, login, email, last_login, created_at, updated_at')

  FasterCSV.open("users_export.csv", "w+") do |csv|
    csv << [ @todays_date ]

    csv << [ "id","login","email","last_login", "created_at", "updated_at" ]
    @users.find_each(:batch_size => 100 ) do |u|
      csv << [ u.id, u.login, u.email, u.last_login, u.created_at, u.updated_at ]
    end
  end

  send_file "users_export.csv",
    :type => 'text/csv; charset=iso-8859-1; header=present',
    :disposition => "attachment; filename=#{@outfile}",
    :stream => true,
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:25:27.210

几周前，我寻求这个问题的答案。我认为如果数据被流回客户端，那么 Heroku 可能不会在 30 秒后使我长时间运行的 API 调用超时。我什至找到了一个看起来很有希望的答案：

```
format.xml do
  self.response_body =
    lambda { |response, output|
      output.write("<?xml version='1.0' encoding='UTF-8' ?>")
      output.write("<results type='array' count='#{@report.count}'>")
      @report.each do |result|
        output.write("""
          <result>
            <element-1>Data-1</element-1>
            <element-2>Data-2</element-2>
            <element-n>Data-N</element-n>
          </result>
        """)
      end
      output.write("</results>")
    }
  end 
```

这个想法是 response_body lambda 可以直接访问返回到客户端的输出缓冲区。然而，在实践中，Rack 对应该发回哪些数据以及何时发回有自己的想法。此外，这种作为 lambda 模式的 response_body 在较新版本的 rails 中已被弃用，我认为在 3.2 中完全放弃了支持。你可以在中间件堆栈中弄脏你的手，并将这个输出写成[Rails Metal](http://weblog.rubyonrails.org/2008/12/17/introducing-rails-metal/)但是......

如果我可以这么大胆，我强烈建议将这项工作重构为后台工作。好处很多：

*   您的用户不必只是坐下来等待下载。他们可以请求文件，然后浏览到您网站的其他更令人兴奋的部分。

*   文件生成和下载将更加强大，例如，如果用户在当前设置下下载的第三分钟失去互联网连接，即使是短暂的，他们将失去所有时间并需要重新开始。如果文件是在您网站的后台生成的，那么只要开始工作，他们就只需要互联网。

*   如果后台作业生成文件并且您在应用程序的页面上提供生成文件的链接，它将减少前端进程的负载，并且可能会减少您网站的负载。有可能一个文件生成可以提供多个下载。

*   由于几乎所有 Rails Web 服务器都是开箱即用的单线程和同步的，因此每次用户请求时，您都会有一个完整的应用服务器进程与这个文件下载相关联。这使用户很容易意外地对您的站点进行 DoS 攻击。

*   您可以将后台生成的文件发送到诸如 S3 之类的 CDN，并且可能会在您的用户看到的下载速度上获得性能提升。

*   后台进程完成后，您可以通过电子邮件通知用户，这样他们甚至不必在他们启动文件生成的计算机上就可以知道它已完成。

*   在应用程序中拥有后台作业系统后，您会发现它的更多用途，例如发送电子邮件或更新搜索索引。

抱歉，这并不能真正回答您的原始问题。但我坚信这是一个更好的整体解决方案。

# java - 使用 AES-128 加密/解密字节数组 > 256 字节

> ID：11318790
> 
> 赞同：0
> 
> 时间：2012-07-03T20:35:54.087
> 
> 标签：java, encryption

以下代码使用 AES-128 将字节数组 SOURCE_DATA 加密为另一个字节数组 ENCRYPTED_DATA，然后再次将其解密为 DECRYPTED_DATA。对于 <= 256 字节的字节数组大小，代码可以正常工作，但如果字节数组较长，则 DECRYPTED_DATA 在字节 256 之后仅包含零，并且不等于 SOURCE_DATA 数组。我错过了什么？

**输出：**

> 源数据：...fbfcfdfeff0001
> 解密数据：...fbfcfdfeff000 **0**

**代码：**

```
// Create data array with size greater 256 bytes
byte[] SOURCE_DATA = new byte[257];     
for (int i=0;i<SOURCE_DATA.length; i++) {
    SOURCE_DATA[i] = (byte)((i+1) & 0xff);
}

// Init ciphers
Cipher encC = Cipher.getInstance("AES/ECB/PKCS5Padding");
Cipher decC = Cipher.getInstance("AES/ECB/PKCS5Padding");
encC.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(new byte[] {0,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6}, "AES"));                  
decC.init(Cipher.DECRYPT_MODE, new SecretKeySpec(new byte[] {0,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6}, "AES"));          

// Encrypt
ByteArrayOutputStream bos = new ByteArrayOutputStream();
CipherOutputStream cos = new CipherOutputStream(bos, encC);
DataOutputStream dos = new DataOutputStream(cos);

dos.write(SOURCE_DATA, 0, SOURCE_DATA.length);
dos.close();

byte[] ENCRYPTED_DATA = bos.toByteArray();

// Decrypt
ByteArrayInputStream bis = new ByteArrayInputStream(ENCRYPTED_DATA);
CipherInputStream cis = new CipherInputStream(bis, decC);
DataInputStream dis = new DataInputStream(cis);

byte[] DECRYPTED_DATA = new byte[SOURCE_DATA.length];
dis.read(DECRYPTED_DATA, 0, DECRYPTED_DATA.length);
cis.close();

System.out.println("Source Data:    "+toHex(SOURCE_DATA));
System.out.println("Decrypted Data: "+toHex(DECRYPTED_DATA)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:48:33.627

尝试使用`DataInputStream.readFully`（即您只读取部分结果，这就是为什么您总是`InputStream.read`在 while 循环中调用）。

# sql - SQL 查询为表中不存在的日期返回 nil

> ID：11318792
> 
> 赞同：1
> 
> 时间：2012-07-03T20:35:57.647
> 
> 标签：sql, ruby-on-rails, activerecord, gaps-and-islands

我有一个表'my_table'。它有以下数据：

```
ID  ---   Date         

1   ---   01/30/2012  
2   ---   01/30/2012   
3   ---   05/30/2012 
```

我可以编写一个 SQL 查询来返回某些日期之间的 ID 计数，按月份分组，如下所示：

```
{"01/30/2012" => 2, "05/30/2012" => 1} 
```

我怎样才能得到一个结果，它在请求的日期之间包含所有缺失的月份，值为“0”，如下所示：

```
{"01/30/2012" => 2, "02/30/2012" => 0, "03/30/2012" => 0, "04/30/2012" => 0, "05/30/2012" => 1} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:51:59.770

我这样做的方法是有一个包含所有日期列表的静态表。在您的情况下，这是每个月的 30 日（二月呢？）。让我们将此表称为 REF_DATE。它有一个包含日期的单列 DT。

假设 my_table 每个月仅包含 0 个或最多 1 个不同的日期（30 日），您需要做的是：

```
select DT,count(ID) from 
REF_DT REF 
left outer join my_table MT 
on REF.DT=my_table.DATE
group by REF.DT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:16:19.563

我想出了一些有点骇人听闻的方式穿过铁轨

```
class Month<Date   # for getting months in range
  def succ
    self >> 1
  end
end

range = Month.new(2010,1,1)..Month.new(2013,1,1) # range of date to query
months=Hash.new
(range).each do |month|
  months.merge!({month.to_s => 0}) # get all months as per range requirement of project
end

db_months = MyTable.find_all_by_date(range).group_by{ |u| u.date.beginning_of_month }.map{|m,v| [m.to_s , v.size]} #get all records grouped by months

all_months = months.merge(Hash[db_months]) # merge all missing months 
```

根据您的要求，将范围替换为您想要的日期以及日期的格式。

* * *

# php - 图片上传预览器 JQ/PHP

> ID：11318793
> 
> 赞同：1
> 
> 时间：2012-07-03T20:35:59.627
> 
> 标签：php, jquery

我目前正在使用在[本网站](http://dondedeportes.es/uploader-previewer/)找到的图像上传器。保存按钮将图像存储在我的文件目录中并返回一个 URL，这是它的工作方式，但我不希望它重定向到 save.php 而是留在同一页面中。有办法吗？我试过操纵代码，但没有运气。

再次请查看我是否获得了文件的网站：[HERE](http://dondedeportes.es/uploader-previewer/)。

这是我的代码：

```
// includes

require_once('./php/configuration.php');

?>  

    <div class="imageForms"></div>

    <div class="buttonSave">
        <button id="buttonSave">Save</button>
    </div>

    <?php

$images = explode(',', $_GET['i']);

$path = Configuration::getUploadUrlPath('medium', 'target');

?> 
```

# python - Python“推送服务器”tcp客户端

> ID：11318801
> 
> 赞同：1
> 
> 时间：2012-07-03T20:36:42.603
> 
> 标签：python, tcp, json-rpc

我正在为 xbmc 开发 python 服务，但我陷入了绝望。XBMC 具有通过 JSON-RPC 进行通信的 TCP API。XBMC 有服务器 TCP 套接字，主要用于接收命令和响应，但如果系统发生某些事情，它会向 TCP 发送“通知”。问题是我需要创建行为类似于服务器的 TCP 客户端，因此它能够接收此“通知”。无论我在哪里运行`socket.recv(4096)`它都会等待数据并卡住我的代码，因为我需要循环我的代码。代码结构基本上是这样的：

```
import xbmc, xbmcgui, xbmcaddon

class XPlayer(xbmc.Player) :   
    def __init__ (self):
        xbmc.Player.__init__(self)
    def onPlayBackStarted(self):
        if xbmc.Player().isPlayingVideo():
            doPlayBackStartedStuff()

player=XPlayer()
doStartupStuff()

while (not xbmc.abortRequested):
    if xbmc.Player().isPlayingVideo():
        doPlayingVideoStuff()
    else:
        doPlayingEverythingElseStuff()

    xbmc.sleep(500)
    # This loop is the most essential part of code

if (xbmc.abortRequested):
    closeEverything()
    xbmc.log('Aborting...') 
```

我尝试了所有线程，多处理，阻塞，非阻塞，没有任何帮助。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:51:37.363

您可能需要 select()、poll() 或 epoll()： [http ://docs.python.org/library/select.html](http://docs.python.org/library/select.html)

这个 Python pipe-progress-meter 应用程序使用 select，例如： [http ://stromberg.dnsalias.org/~strombrg/reblock.html](http://stromberg.dnsalias.org/~strombrg/reblock.html)

如果您知道什么样的分隔符分隔协议的各个部分，您可能还会发现这很有用，不需要 select 或类似的： [http](http://stromberg.dnsalias.org/~strombrg/bufsock.html) ://stromberg.dnsalias.org/~strombrg/bufsock.html 它处理得很好优雅地使用“读取下一个空字节”、“读取最多 100 个字节”等。

# go - Go 数组的索引是什么？

> ID：11318802
> 
> 赞同：3
> 
> 时间：2012-07-03T20:36:44.400
> 
> 标签：go

我是一些“内存分配器”类型代码，使用数组和索引而不是指针。我希望数组索引的大小小于指针。我很在意，因为我将“指针”作为整数索引存储在数组中，而不是 64 位指针。

我在 Go 规范中看不到任何说明数组索引的内容。显然它是某种整数。传递非常大的值会使运行时抱怨我不能传递负数，所以我猜测它以某种方式转换为有符号整数。那么它是一个`int32`吗？我猜这不是`int64`因为我没有触及最高位（这将是 2 对负数的恭维）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:01:53.433

数组可以由任何整数类型索引。

[Go 编程语言规范](http://golang.org/ref/spec)的[数组类型](http://golang.org/ref/spec#Array_types)部分说，在数组类型定义中，

> 长度是数组类型的一部分，并且必须是计算结果为非负整数值的常量表达式。

在[索引表达式](http://golang.org/ref/spec#Indexes)中，例如`a[x]`：

> `x`必须是整数值并且`0 <= x < len(a)`

但是指数的*大小是有限制的；*[长度和容量](http://golang.org/ref/spec#Length_and_capacity)的描述说：

> 内置函数`len`并`cap`接受各种类型的参数并返回 type 的结果`int`。该实现保证结果始终适合`int`.

因此，数组的声明大小或索引表达式中的索引可以是任何[整数](http://golang.org/ref/spec#Numeric_types)类型（大小相同或- 尽管它是不同的类型）。`int``uint``uintptr``int8``int16``int32``int64``uint8``uint16``uint32``uint64``int``int32``int64`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:56:23.297

这确实是一个非常有趣的问题。我也没有在文档中找到任何直接规则；相反，我在群组中发现了两个很棒的讨论。

在[第一个](https://groups.google.com/group/golang-nuts/browse_thread/thread/3a61fbaaebd8f9b7)中，在很多事情中，我找到了一个答案，为什么索引被实现为`int`- 但不是`uint`：

> 算法可以受益于表达负偏移等的能力。如果索引未签名，那么在这些情况下您总是需要进行转换。

[第二个](https://groups.google.com/group/golang-nuts/browse_thread/thread/49da12516f29c3f6/)`int64`专门讨论了用于大型数组的可能性（但仅限于可能性！） ，提到了`len`和功能的限制（文档`cap`中实际上[提到了这些限制）：](http://golang.org/ref/spec#Length_and_capacity)

> 内置函数 len 和 cap 接受各种类型的参数并返回 int 类型的结果。该实现保证结果始终适合 int。

不过，我确实同意，更……官方的观点不会受到伤害。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T20:47:05.707

数组和切片由`int`s 索引。An`int`定义为 32 或 64 位有符号整数。最常见的实现 (6g) 使用 32 位整数，而不管此时的体系结构如何。但是，计划最终在 64 位机器上 int 将是 64 位，因此与指针的长度相同。

语言规范定义了 3 种依赖于实现的数字类型：

```
uint     either 32 or 64 bits
int      same size as uint
uintptr  an unsigned integer large enough to store the uninterpreted bits of a pointer value 
```

# c# - Socket 的状态从 Connected 变为 Disconnected

> ID：11318804
> 
> 赞同：0
> 
> 时间：2012-07-03T20:36:55.113
> 
> 标签：c#, sockets, asyncsocket

我有两个应用程序，一个通过 TCP Socket 连接到另一个。我遇到了一个问题，经过长时间的故障排除后，我开始认为根本原因是由于 Socket 断开连接，也就是 Socket.state 更改为**Disconnected**。

我得出上述结论的原因纯粹是阅读代码并分析它们。我需要证明是这种情况，因此我的问题是你有没有遇到过这种类型的问题，即即使在尝试连接到它们之后，套接字实际上仍然断开连接？

下面是我的连接代码，我有一个循环不断检查套接字的状态本身，如果我检测到状态是**“断开连接”**，我会再次调用这个 Connect() 函数。每次我调用 Connect() 时，我都注意到我的套接字状态又回到了**Connected**状态。

所以我的问题是：

```
 1\.  Have you seen this behavior yourself before?
 2\.  Do you see any problem in me calling multiple Connect() again and again?
 3\.  Is there a way to simulate this type of socket disconnections?  I tried but I can't set the Socket.Connected flag.

public override void Connect()
    {
        try
        {
            sState = Defs.STATE_CONNECTING;

            // send message to UI
            string sMsg = "<Msg SocketStatus=\"" + sState + "\" />";
            HandleMessage(sMsg);

            // Create the socket object
            sSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

            string sIP = "";

            // Define the Server address and port
            if (Validate.IsIPAddress(sServer.ToString()))
            {
                sIP = sServer.ToString();
            }
            else
            {
                IPHostEntry iphost = Dns.GetHostEntry(sServer.ToString());
                sIP = iphost.AddressList[0].ToString();
            }

            IPEndPoint epServer = new IPEndPoint(IPAddress.Parse(sIP), 1234);

            // Connect to Server non-Blocking method
            sSock.Blocking = false;
            AsyncCallback onconnect = new AsyncCallback(OnConnect);
            sSock.BeginConnect(epServer, onconnect, sSock);
        }
        catch (Exception ex)
        {
            LogException(new Object[] { ex });
        }
    } 
```

# java - android中的线程问题

> ID：11318805
> 
> 赞同：0
> 
> 时间：2012-07-03T20:36:55.447
> 
> 标签：java, android

我正在开发 android 中的应用程序。我正在尝试从后台线程将数据更新到 UI。但是，由于某些原因，它不起作用。任何人都可以找出错误或提出更好的解决方案吗？我使用 Thread 从蓝牙套接字读取数据并使用 RunOntheUI 更新 UI。这是代码：

```
socket = belt.createRfcommSocketToServiceRecord(UUID_SECURE);
            socket.connect();

                   stream = socket.getInputStream();
                    //  final int intch;
                       Thread timer2 = new Thread() { // Threads - do multiple things
                            public void run() {
                                try {

                                   // read data from input stream if the end has not been reached
                                   while ((intch = stream.read()) != -1) {

                                       byte ch = (byte) intch;
                                       b1.append(ByteToHexString(ch) +"/");
                                        decoder.Decode(b1.toString());  
                                        runOnUiThread(new Runnable() {
                                            public void run()
                                            {
// update the uI

                                        hRMonitor.SetHeartRateValue((int) decoder.GetHeartRate());
                                            }
                                        });
                                        Thread.sleep(1000);
                                   }
                                } catch (Exception e) {
                                       e.printStackTrace();
                                   } 
                                }};

                                timer2.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:40:28.127

利用

```
Your_Current_Activity.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
             hRMonitor.SetHeartRateValue((int) decoder.GetHeartRate());
           }
       }); 
```

代替

```
runOnUiThread(new Runnable() {
      public void run()
      {
      // update the uI
      hRMonitor.SetHeartRateValue((int) decoder.GetHeartRate());
      }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:33:49.623

不，你**不能**那样做。永远不要使用另一个线程来更新 UI Thread，因为 UI Thread 不是`thread-safe`，这意味着：当你更新你的 UI Thread 时，UI Thread 不会停止为你做一些事情。

Android 对这项工作有独到之处。这是`Asyntask`：它将创建另一个线程，并且在需要时，它将有安全的方式来更新 UI 线程。如果你想了解更多细节，Asyntask 会将消息放到 UI Thread 的消息队列中。

这是我关于不同线程、处理程序和 Asyntask 的帖子的另一个链接。[异步任务](https://stackoverflow.com/questions/6964011/handler-vs-asynctask-vs-thread/9800870#9800870)

希望这有帮助:)

# java - log4j:WARN 找不到记录器的附加程序（运行 jar 文件，而不是 Web 应用程序）

> ID：11318806
> 
> 赞同：54
> 
> 时间：2012-07-03T20:37:01.340
> 
> 标签：java, log4j

首先 - 是的，我已经阅读了关于这个主题的多个问题和答案，并且无法获得其中的任何解决方案来帮助我。我没有运行 Tomcat 或 JBoss，也没有`web.xml`要更改的文件。我正在使用 Java 6.0 和`log4j-1.2.8.jar`.

我正在使用 IDEA IntelliJ 创建一个可运行的 jar 文件，其中 jar 库单独打包并通过清单链接。我在 Linux 服务器上运行我的代码，因此：

```
me@server:/mydir> java -jar code/myjar.jar
log4j:WARN No appenders could be found for logger (FactoredEventsForTrna).
log4j:WARN Please initialize the log4j system properly. 
```

我的 log4j 配置文件（我把它放在`mydir`和中`mydir/code`，以防万一）是：

```
## Logger configure file for myproject
log.dir=log/
datestamp=yyyy-MM-dd/HH:mm:ss.SSS
log4j.rootLogger=TRACE, file, proappender, console

log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.maxFileSize=1GB
log4j.appender.file.maxBackupIndex=5
log4j.appender.file.File=log/mydebug.log
log4j.appender.file.threshold=TRACE
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{${datestamp}} %5p: %c{2} - %m%n

log4j.appender.proappender=org.apache.log4j.RollingFileAppender
log4j.appender.proappender.maxFileSize=5GB
log4j.appender.proappender.Threshold=INFO
log4j.appender.proappender.File=log/myinfo.log
log4j.appender.proappender.layout=org.apache.log4j.PatternLayout
log4j.appender.proappender.layout.ConversionPattern=%d{${datestamp}} %5p: %c{2} - %m%n

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.Threshold=DEBUG
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%d{${datestamp}} %5p: %c{2} - %m%n 
```

我已经在和中创建了`log/`目录，以防万一。`mydir``mydir/code`

有任何想法吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-03T20:49:19.907

有许多可能的选项来指定您的 log4j 配置。一种是文件被准确命名为“log4j.properties”并位于您的类路径中。另一种方法是随心所欲地命名它，并在启动 Java 时将系统属性添加到命令行，如下所示：

```
-Dlog4j.configuration=file:///path/to/your/log4j.properties 
```

所有这些都在这里列出[http://logging.apache.org/log4j/1.2/manual.html#defaultInit](http://logging.apache.org/log4j/1.2/manual.html#defaultInit)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-02-13T04:19:23.857

## 解决方案

1.  下载**`log4j.jar`**文件
2.  将**`log4j.jar`**文件添加到构建路径
3.  呼叫记录器：

    ```
    private static org.apache.log4j.Logger log 
        = Logger.getLogger(<class-where-this-is-used>.class); 
    ```

4.  如果 log4j 属性不存在，则在 bin 目录中创建新文件 log4j.properties 文件新文件：

    ```
    /workspace/projectdirectory/bin/ 
    ```

## 示例 log4j.properties 文件

```
log4j.rootLogger=debug, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%t %-5p %c{2} - %m%n 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-10T08:33:17.443

我已将 log4j.properties 移动到资源文件夹中，它对我来说很好用！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-11T23:05:09.237

伙计，我在我的一个 Eclipse 项目中遇到了问题，令人惊讶的是，问题是我的 .project 文件中 jar 的顺序。信不信由你！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-17T18:47:27.120

您将在**solr/examples/resources中找到 de** **log4j.properties**。

 **如果找不到文件，我把它放在这里：

```
#  Logging level
solr.log=logs/
log4j.rootLogger=INFO, file, CONSOLE

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender

log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%-4r [%t] %-5p %c %x \u2013 %m%n

#- size rotation with log cleanup.
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.MaxFileSize=4MB
log4j.appender.file.MaxBackupIndex=9

#- File to log to and log format
log4j.appender.file.File=${solr.log}/solr.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%-5p - %d{yyyy-MM-dd HH:mm:ss.SSS}; %C; %m\n

log4j.logger.org.apache.zookeeper=WARN
log4j.logger.org.apache.hadoop=WARN

# set to INFO to enable infostream log messages
log4j.logger.org.apache.solr.update.LoggingInfoStream=OFF 
```

问候

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-06T04:08:03.950

将您的 log4j.properties 文件移动到 src 文件夹中。打开 Windows 资源管理器，浏览到项目所在的目录。浏览到 bin 目录并删除其中的所有**文件夹**。

现在在eclipse中点击项目---->clean---->OK

这将迫使它再次构建项目，从 bin 目录中删除的所有内容都将被重新创建。

我花了一段时间才弄清楚这一点。有时直接点击清洁不起作用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-20T14:05:10.097

将包含用于登录的属性文件的文件夹放入 java 构建路径源。您可以通过右键单击项目来添加它---->构建路径----->配置构建路径-->添加t**

# c# - 如何在 WCF 服务中使用角色管理器？

> ID：11318808
> 
> 赞同：13
> 
> 时间：2012-07-03T20:37:23.583
> 
> 标签：c#, wcf

如何在 WCF 服务中使用角色管理器？

`[Authorize(Roles=)]`在我的 .NET 应用程序中，我可以使用标记来限制类或方法。如何为我的 WCF 服务启用此功能？

我目前为每个端点设置了以下绑定：

```
 <webHttpBinding>
    <binding name="TransportSecurity" maxReceivedMessageSize="5242880">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </webHttpBinding> 
```

由于我想让用户登录并接收主体的 cookie，我是否需要将其更改为另一种类型`clientCredentialType`？

**编辑1：**

这是使用 REST，而不是 SOAP。还需要注意的是，它适用于移动设备（android、iPhone）并且可以使用 cookie 来维护会话，这一点很重要。到目前为止，我一直无法使用以下代码/配置来完成这项工作：

**配置文件：**

```
 <roleManager enabled="true" defaultProvider="ActiveDirectoryRoleProvider" cacheRolesInCookie="true" cookieName="RoleCookie" cookiePath="/" cookieTimeout="30" cookieRequireSSL="false" cookieSlidingExpiration="true" createPersistentCookie="false" cookieProtection="All">
      <providers>
        <clear />
        <add name="ActiveDirectoryRoleProvider" connectionStringName="ADServices" connectionUsername="" connectionPassword="" attributeMapUsername="sAMAccountName" type="" />
      </providers>
    </roleManager>

    <membership defaultProvider="MembershipADProvider">
      <providers>
        <add name="MembershipADProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" applicationName="" connectionStringName="ADServices" connectionUsername="" connectionPassword="" attributeMapUsername="sAMAccountName" />
      </providers>
    </membership>

<bindings>
  <webHttpBinding> <!-- webHttpBinding is for REST -->
    <binding name="TransportSecurity" maxReceivedMessageSize="5242880">
      <security mode="Transport">
      </security>
    </binding>
  </webHttpBinding>
</bindings>

<behaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviour">
      <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" />
      <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true" />
      <serviceAuthorization principalPermissionMode="UseAspNetRoles" roleProviderName="ActiveDirectoryRoleProvider" />
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="MembershipProvider" membershipProviderName="MembershipADProvider" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

**代码**

```
 public void SignIn2(string userName, bool createPersistentCookie)
    {
        if (String.IsNullOrEmpty(userName)) throw new ArgumentException("Value cannot be null or empty.", "userName");

        // put the attributes in a string for userdata
        string userData = "";

        // create the ticket
        FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(1,
                                                userName,
                                                DateTime.Now,
                                                DateTime.Now.AddMinutes(240),
                                                createPersistentCookie,
                                                userData);

        // Now encrypt the ticket.
        string encryptedTicket = FormsAuthentication.Encrypt(authTicket);

        // Create a cookie and add the encrypted ticket to the cookie as data.
        HttpCookie authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);

        // add the cookie
        HttpContext.Current.Response.Cookies.Add(authCookie);
    } 
```

**现在使用 Principal Permission**，我得到一个`SecurityException`（我知道该角色在服务器上有效）

```
 [PrincipalPermission(SecurityAction.Demand, Role = Constants.RoleUser)]
    public Message TestRoles()
    {
        var context = NetworkHelper.GetWebOperationContext();

        return context.CreateTextResponse("You have successfully activated the endpoint.");
    } 
```

我在这里错过了关键的一步吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T04:04:51.657

我写[了一篇](http://traf-o-data.blogspot.com/2011/08/adding-passwords-to-wcf-service.html)关于如何在 WCF 中使用 ASP.NET 身份验证的博客文章；它的要点是您要使用以下绑定：

```
 <basicHttpBinding>
    <binding>
      <security mode="TransportWithMessageCredential">
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </basicHttpBinding> 
```

您还必须应用以下内容`serviceBehavior`

```
 <behavior>
      <!-- no need for http get;
          but https get exposes endpoint over SSL/TLS-->
      <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"/>
      <!-- the authorization and credentials elements tie
        this behavior (defined as the default behavior) to
        the ASP.NET membership framework-->
      <serviceAuthorization
          principalPermissionMode="UseAspNetRoles"
          roleProviderName="AspNetRoleProvider" />
      <serviceCredentials>
        <userNameAuthentication
            userNamePasswordValidationMode="MembershipProvider"
            membershipProviderName="AspNetMembershipProvider" />
      </serviceCredentials>
    </behavior> 
```

需要注意的重要一点是，如果要使用名称和密码保护 WCF，则必须使用 SSL，这就是指定传输安全性的原因。

完成此操作后，您应该能够使用该`PrincipalPermission`属性来保护您的服务方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T15:59:49.677

很久以前，我和校长也有类似的问题。我不记得细节了，但试试这个，从我非常古老的项目中：

一世。您必须添加 2 个辅助类：

* * *

```
using System.Web;
using System.IdentityModel.Claims;
using System.IdentityModel.Policy;

namespace TicketingCore
{
    public class HttpContextPrincipalPolicy : IAuthorizationPolicy
    {
        public bool Evaluate(EvaluationContext evaluationContext, ref object state)
        {
            HttpContext context = HttpContext.Current;

            if (context != null)
            {
                evaluationContext.Properties["Principal"] = context.User;
            }

            return true;
        }

        public System.IdentityModel.Claims.ClaimSet Issuer
        {
            get { return ClaimSet.System; }
        }

        public string Id
        {
            get { return "TicketingCore HttpContextPrincipalPolicy"; }
        }
    }
} 

using System;
using System.Collections.Generic;
using System.IdentityModel.Claims;
using System.IdentityModel.Policy;
using System.Text;
using System.Web;
using System.Security.Principal;

namespace TicketingCore
{
    // syncs ServiceSecurityContext.PrimaryIdentity in WCF with whatever is set 
    // by the HTTP pipeline on Context.User.Identity (optional)
    public class HttpContextIdentityPolicy : IAuthorizationPolicy
    {
        public bool Evaluate(EvaluationContext evaluationContext, ref object state)
        {
            HttpContext context = HttpContext.Current;

            if (context != null)
            {
                // set the identity (for PrimaryIdentity)
                evaluationContext.Properties["Identities"] = 
                    new List<IIdentity>() { context.User.Identity };

                // add a claim set containing the client name
                Claim name = Claim.CreateNameClaim(context.User.Identity.Name);
                ClaimSet set = new DefaultClaimSet(name);
                evaluationContext.AddClaimSet(this, set);
            }

            return true;
        }

        public System.IdentityModel.Claims.ClaimSet Issuer
        {
            get { return ClaimSet.System; }
        }

        public string Id
        {
            get { return "TicketingCore HttpContextIdentityPolicy"; }
        }
    }
} 
```

ii. 更改 webconfig 以添加这 2 个策略，这是我的配置（格式： add policyType="namespace.class, assembly" ）

```
<serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="MembershipProvider" membershipProviderName="SQLMembershipProvider"/>
      </serviceCredentials>
      <serviceAuthorization principalPermissionMode="Custom">
        <authorizationPolicies>
          <add policyType="TicketingCore.HttpContextIdentityPolicy, TicketingCore"/>
          <add policyType="TicketingCore.HttpContextPrincipalPolicy, TicketingCore"/>
        </authorizationPolicies>
      </serviceAuthorization>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors> 
```

iii. 确保 cookie 和角色工作正常

注意：我也不记得解决方案的来源了，你可能需要谷歌类名才能找到，希望对你有帮助，祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T20:53:06.467

我认为这样的东西会提供你正在寻找的东西：

```
// Only members of the SpecialClients group can call this method.
[PrincipalPermission(SecurityAction.Demand, Role = "SpecialClients")]
public void DoSomething()
{ 
} 
```

您可以在此处找到有关设置服务的不同选项的好文章：[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms789011.aspx)。您可能希望使用以下内容更新配置：

```
<security mode="TransportWithMessageCredential" >
    <transport clientCredentialType="Windows" />
</security> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T21:19:05.277

两年前，我写了一篇关于 wcf 与表单身份验证和主体权限属性集成的博客。我相信你会发现这很有用：

[http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html](http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T14:16:04.973

查看这个问题[Passing FormsAuthentication cookie to a WCF service](https://stackoverflow.com/questions/1087271/passing-formsauthentication-cookie-to-a-wcf-service)。要点是身份验证 cookie 无法发送或接收，因为 cookie 域/asp 设置/身份验证加密密钥。我建议您出于调试目的转储该 cookie 值 Request.Cookies[".ASPXAUTH"]。

# android - Gingerbread 和 ICS 之间 SQLite 数据库生命周期的变化；间歇性空指针异常

> ID：11318810
> 
> 赞同：1
> 
> 时间：2012-07-03T20:37:36.813
> 
> 标签：android, sqlite, nullpointerexception, lifecycle, onresume

我注意到，当我从 Gingerbread 升级到 ICS 后，我的应用程序在 Gingerbread 下运行良好时开始崩溃。

应用程序的主要活动（活动 A）有一个菜单选项，可打开从数据库填充的 ListActivity（活动 B）；当单击列表中的条目时，会打开第三个活动（活动 C）。当使用返回按钮关闭活动 C 时，应该重新显示活动 B。

在 Gingerbread（和更早的 Android 版本）中，这运行良好，并且大部分时间在 ICS 中继续运行良好。但是，如果我离开应用程序，让活动 C 长时间打开，它就会崩溃。返回应用程序并尝试从活动 C 退回到活动 B 时，应用程序将停止。由于活动 B 的 onResume 中出现空指针异常，LogCat 报告“无法恢复活动”。

onResume 方法中的违规行包含对活动 A 的 onCreate 方法中定义的 DBAdapter 的引用。通过记录对活动 B 的各种生命周期方法的调用，我发现活动 B 在打开活动 C 时总是（如预期的那样）停止. 如果它只是停止就没有问题：在调用 onResume 时仍必须定义 DBAdapter。但是，如果应用程序离开较长时间，则活动 B 被销毁，在这种情况下，DBAdapter（在活动 A 的 onCreate 方法中定义）也必须变为未定义。

解决此问题的方法似乎是插入 `if (Global.mDBAdapter== null) {Global.mDBAdapter = new DBAdapter( this, "DatabaseName" );}`到活动 B 的 onCreate 方法中。

我想检查一下我是否正确理解了这一点。是否有描述 SQLite 数据库适配器/助手生命周期行为变化（姜饼和 ICS 之间）的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:55:51.790

似乎您做出了没有根据的假设，而您恰好在 Gingerbread 设备上侥幸逃脱。

一个 Activity 的进程在被调用后的任何时候都是可以杀死的`onStop()`，所以在结束时`onStop()`，你必须准备好你的下一个生命周期回调是以下三个中的任何一个：

1.  `onRestart()`-- 如果进程没有被杀死并且Activity很快被重新启动。
2.  `onDestroy()`-- 如果系统已决定停止活动，并且觉得方便时通知您。
3.  `onCreate()`- 如果进程没有调用就被杀死了`onDestroy()`。

（Honeycomb 之前，该过程甚至可以在之后杀死`onPause()`。）

因此，听起来正在发生的是，当您长时间远离活动 C 时，整个过程都会被终止。当您返回 Activity C，然后按 BACK 时，Activity B 将通过`onCreate()`-> `onStart()`-> `onResume()`，您似乎假设您已通过 Activity A 设置了全局状态，但事实并非如此。

这不是 Gingerbread 和 ICS 之间的变化。你以前只是走运。

阅读和理解的好资源：

*   [关于活动的开发人员指南文章](http://developer.android.com/guide/components/activities.html)
*   [活动的文档](http://developer.android.com/reference/android/app/Activity.html)

**更新：**您在下面的评论中询问了 Android 在销毁应用程序时究竟保留了哪些有关您的应用程序状态的信息。我的印象是它基本上只是 Activity 堆栈和来自`onSaveInstanceState()`. （它不会特别记住哪个 Activity 是打开的，那只是堆栈的顶部。）这是有道理的：Android 处理它的结束（活动堆栈），而你处理你的（通过保存最重要的内容并准备好重新创建其余部分）。

默认实现`onSaveInstanceState()`在所有视图上调用同名方法，这可以让您看起来像是在免费保存和恢复一些数据。但是，如果不覆盖该方法，您肯定*不会*保存任何自己的数据成员，无论是静态的还是其他的。这对我来说很有意义：自动这样做需要反思，而且效率低下，经常浪费，而且相当混乱。保存重要的内容由您决定，Android 为您提供回调以简化此操作。

这是您的另一个资源：

*   [重新创建活动](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)

但是，您不一定需要处理`onSaveInstanceState()`；有些东西重新创建更有意义，例如您的数据库适配器。

# sql - 如何在 SQL Server 的 xml 列中查询 xml 值

> ID：11318811
> 
> 赞同：3
> 
> 时间：2012-07-03T20:37:41.940
> 
> 标签：sql, sql-server, xml, tsql

我在名为“AlgorithmLog”的表的 [XMLValue] 列中有类似以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<AdapterInfo xmlns:i="http://www.w3.org/2001/XMLSchema-instance"     
            xmlns:d1p1="http://schemas.datacontract.org/2004/07/Adapters.Adapter.CloudTrader"    
            xmlns="http://schemas.datacontract.org/2004/07/Adapters.Adapter"  
            i:type="d1p1:AlgorithmStatusReport">
    <SequenceNumber>0</SequenceNumber>
    <TrackingGuid i:nil="true" />
    <d1p1:Broker>Default</d1p1:Broker>
    ...
       <d1p1:XMLValue>&lt;?xml version="1.0"?&gt;&lt;int xmlns="http://schemas.microsoft.com/2003/10/Serialization/"&gt;1900&lt;/int&gt;</d1p1:XMLValue>
</AdapterInfo> 
```

我想在节点内获取值“1900”`<d1p1:XMLValue>`

所以这是我的查询：

```
WITH XMLNAMESPACES('http://schemas.datacontract.org/2004/07/Adapters.Adapter' AS x, 
                   'http://schemas.datacontract.org/2004/07/Adapters.Adapter.CloudTrader' As p,
                   'http://schemas.microsoft.com/2003/10/Serialization/'as w)
   SELECT  
       XMLValue.query('(/x:AdapterInfo/p:XMLValue/w:int)[1]')AS [XMLVaule]
   FROM AlgorithmLog 
```

但它什么也不返回。

谁能告诉我我在哪里做错了或者我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:03:59.220

由于您已经在另一个 XML 节点中“编码”了 XML，并且您无法`XML`使用`.value()`XQuery 方法自动转换为数据类型，所以这一切都涉及到了一点——但这似乎对我有用：

```
;WITH XMLNAMESPACES('http://schemas.datacontract.org/2004/07/Adapters.Adapter' AS x, 
                    'http://schemas.datacontract.org/2004/07/Adapters.Adapter.CloudTrader' As p,
                    'http://schemas.microsoft.com/2003/10/Serialization/'as w)
   SELECT  
       CAST(XmlContent.value('(/x:AdapterInfo/p:XMLValue)[1]', 'varchar(2000)') AS XML).value('(w:int)[1]', 'int') AS [XMLValue]
   FROM AlgorithmLog
   WHERE .......  -- use whatever condition makes sense for you here 
```

# linux - 使用命令行重定向输入和输出

> ID：11318814
> 
> 赞同：1
> 
> 时间：2012-07-03T20:38:03.277
> 
> 标签：linux

以下工作并将转换`/tmp/file.docx`为`/tmp/file.pdf`.

```
libreoffice3.5\. --headless --convert-to pdf --outdir /tmp /tmp/file.docx 
```

我将如何转换[https://www.mysite.com/getfile.php?id=123](https://www.mysite.com/getfile.php?id=123)（这将返回一个 docx 文件）并将其另存为`/tmp/file_123.pdf`？我希望它需要 wget、管道和输入/输出重定向。

谢谢

编辑 - 对 zebediah49 帖子的回应

```
> libreoffice3.5 --headless --convert-to pdf --outdir /tmp <(wget -O - "http://www.mysite.com/demo/lib/m.php?cid=9&controller=detail&task=displayDocument&id=56&x=fc872c033770e3bc8706e6a90bcdff02")

--2012-07-03 14:09:03--  http://www.mysite.com/demo/lib/m.php?cid=9&controller=detail&task=displayDocument&id=56&x=fc872c033770e3bc8706e6a90bcdff02
Resolving www.mysite.com... 99.999.999.999
Connecting to www.mysite.com|99.999.999.999|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 29696 (29K) [application/msword]
Saving to: `STDOUT'

     0K .......... .......... .........                       100% 14.2M=0.002s

2012-07-03 14:09:03 (14.2 MB/s) - `-' saved [29696/29696] 
```

编辑 - 对 rekire 的第一个解决方案的回应

```
> wget http://www.mysite.com/demo/lib/m.php?cid=9&controller=detail&task=displayDocument&id=56&x=fc872c033770e3bc8706e6a90bcdff02 --no-check-certificate -O /tmp/file.docx
--2012-07-03 14:34:12--  http://www.mysite.com/demo/lib/m.php?cid=9
Resolving www.mysite.com... bash: --no-check-certificate: command not found
99.999.999.999
Connecting to www.mysite.com|99.999.999.999|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1236 (1.2K) [text/html]
Saving to: `m.php?cid=9.8'

     0K .                                                     100% 42.1M=0s

2012-07-03 14:34:12 (42.1 MB/s) - `m.php?cid=9.8' saved [1236/1236]

> libreoffice3.5 --headless --convert-to pdf --outdir /tmp /tmp/file.docx 
```

编辑 - 对 rekire 的第二个解决方案的回应

```
> TMPFILE=`mktemp -u`
> wget http://www.mysite.com/demo/lib/m.php?cid=9&controller=detail&task=displayDocument&id=56&x=fc872c033770e3bc8706e6a90bcdff02 --no-check-certificate -O $TMPFILE
--2012-07-03 14:24:09--  http://www.mysite.com/demo/lib/m.php?cid=9
Resolving www.mysite.com... bash: --no-check-certificate: command not found
99.999.999.999
Connecting to www.mysite.com|99.999.999.999|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1236 (1.2K) [text/html]
Saving to: `m.php?cid=9.5'

     0K .                                                     100% 42.1M=0s

2012-07-03 14:24:09 (42.1 MB/s) - `m.php?cid=9.5' saved [1236/1236]

> libreoffice3.5 --headless --convert-to pdf --outdir /tmp $TMPFILE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:44:05.733

如果你想要一行，你可以使用重定向来做

```
libreoffice3.5\. --headless --convert-to pdf --outdir /tmp <(wget -O - "https://www.mysite.com/getfile.php?id=123") 
```

编辑：

我担心 libreoffice 在使用`--convert-to`. 如果您愿意，这是一个使用临时目录的版本，但将输出保存在当前目录中（我假设您不想通过 /tmp 挖掘来查找您的东西......

```
TEMP_DIR=`mktemp -d`
wget -P "$TEMP_DIR" "https://www.mysite.com/getfile.php?id=123"
libreoffice3.5\. --headless --convert-to pdf --outdir ./ "$TEMD_DIR/*"
rm -r "$TEMP_DIR" 
```

我正在格式化它，就好像它是在脚本中一样。如果你只是自己运行它，你可以知道你不会破坏任何东西和/或做你当前目录中的所有事情，因此只需使用

```
wget "https://www.mysite.com/getfile.php?id=123"
libreoffice3.5\. --headless --convert-to pdf "getfile.php?id=123" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:41:20.343

根据您的命令，这两行应该可以工作：

```
wget https://www.mysite.com/getfile.php?id=123 --no-check-certificate -O /tmp/file.docx
libreoffice3.5\. --headless --convert-to pdf:outfile.pdf --outdir /tmp /tmp/file.docx 
```

或者像 zebediah49 用一个独特的文件名说的那样：

```
TMPFILE=`mktemp -u`
wget https://www.mysite.com/getfile.php?id=123 --no-check-certificate -O $TMPFILE
libreoffice3.5\. --headless --convert-to pdf:outfile.pdf --outdir /tmp $TMPFILE 
```

**请注意：**输出文件将在每次运行时被覆盖，因此您还应该为输出文件使用唯一名称。

# function - 将类型绑定过程作为参数传递

> ID：11318816
> 
> 赞同：4
> 
> 时间：2012-07-03T20:38:10.690
> 
> 标签：function, fortran, user-defined-types, fortran2003

我正在尝试将类型绑定过程作为参数传递给另一个子例程。我想知道这在 Fortran 中是否可行。这是一个代码片段，显示了我正在尝试做的事情。

```
module type_definitions 
 type test_type 
 integer :: i1, i2,i3
 contains 
   procedure :: add_integers_up 
 end type test_type
 contains 
   subroutine add_integers_up(this,i4,ans)
       class(test_type) :: this 
       integer :: i4,ans 
       ans = this%i1+this%i2+this%i3+i4
    end subroutine add_integers_up

subroutine print_result_of_subroutine(i4,random_subroutine) 
  integer :: i4,ans 

  interface 
     subroutine  random_subroutine(i1,i2) 
       integer:: i1,i2
     end subroutine random_subroutine
  end interface

  call random_subroutine(i4,ans) 
  write(*,*) ans 

end subroutine print_result_of_subroutine

end module type_definitions

program main 
   use type_definitions
   implicit none 
   integer :: i1,i2,i3,i4
   integer :: ans 
   type(test_type) :: test_obj

   i1 =1; i2=2; i3=3
   test_obj%i1 = i1 
   test_obj%i2 = i2 
   test_obj%i3 = i3 
   i4 = 4

   call print_result_of_subroutine(i4,test_obj%add_integers_up) 

    end program main 
```

这可以在 Fortran 中做到吗？当我尝试使用 ifort 编译此代码时出现编译器错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T22:54:16.000

test_obj%add_integers_up 不是一个过程 - 它是一个绑定，恰好是一个名为 add_integers_up 的过程。您不能将绑定作为实际参数传递。

如果要传递绑定所关联的特定过程，则传递过程！假设：

```
call print_result_of_subroutine(i4, add_integers_up) 
```

但正如其他海报所指出的，在您的示例代码中，该过程的接口与 print_result_of_subroutine 中相应虚拟参数的接口不匹配。

如果 test_obj%add_integers_up 引用了一个关联的过程指针组件（并且该组件的接口与 print_result_of_subroutine 所期望的相匹配），那么事情就会如您所期望的那样工作。

请注意，Fortran 90 不支持类型绑定过程（或过程指针组件） - 您的代码非常需要 Fortran 2003。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T23:18:38.437

您没有向我们展示您收到的确切错误消息，我自己也没有尝试您的示例，但我很确定问题是过程虚拟参数的接口与实际的接口不对应传递给它的参数。

更明确地说，`random_subroutine`被声明为接受两个参数，而`test_obj%add_integers_up`接受三个参数；即使其中一个用作传递对象的虚拟参数，它仍然算作该过程接口的一部分。

# wpf - DataGridTemplateColumn 找不到绑定根

> ID：11318818
> 
> 赞同：0
> 
> 时间：2012-07-03T20:38:13.227
> 
> 标签：wpf, binding, datagrid, user-controls

我正在尝试将名为 simpleChart 的用户控件放入 DataGridTemplateColumn。我将 DataGrid 绑定到一个`ObservableCollection<Index>`（其中 Index 是我为显示创建的 INotifyPropertyChanged 类）。但不知何故，绑定找不到根项。为了检查我的绑定，我在 templateColumn 旁边放了一个 textColumn，它工作得很好。以下是相关代码：

```
<Window x:Class="TechniqueAnalysis.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="" Height="549" Width="1744" 
    xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
    xmlns:local="clr-namespace:Charts"
    xmlns:simpleChart ="clr-namespace:ChartOnGird;assembly=ChartOnGird"
    WindowState="Maximized" Closing="Window_Closing">
<Grid>
<DataGrid Margin="0,60,0,0" Name="dataGridWei" CanUserResizeColumns="False"  ItemsSource="{Binding}">
<DataGridTemplateColumn Header="2 day"  Width="100">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
           <simpleChart:SimpleChart X ="{Binding Path=X1, diagnostics:PresentationTraceSources.TraceLevel=High}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>
<DataGridTextColumn Header="Value" Binding="{Binding Path=X1, diagnostics:PresentationTraceSources.TraceLevel=High, StringFormat=N2}"/>
</DataGrid>
</Grid>
</Window> 
```

数据绑定是通过后台代码将 ObservableCollection 绑定到数据网格的 DataContext。

我得到了模板列的以下输出：

```
System.Windows.Data Warning: 58 : BindingExpression (hash=45649854): Default mode resolved to OneWay
System.Windows.Data Warning: 59 : BindingExpression (hash=45649854): Default update trigger resolved to PropertyChanged
System.Windows.Data Warning: 60 : BindingExpression (hash=45649854): Attach to ChartOnGird.SimpleChart.X (hash=40977533)
System.Windows.Data Warning: 65 : BindingExpression (hash=45649854): Resolving source
System.Windows.Data Warning: 68 : BindingExpression (hash=45649854): Found data context element: SimpleChart (hash=40977533) (OK)
System.Windows.Data Warning: 76 : BindingExpression (hash=45649854): Activate with root item ''
System.Windows.Data Warning: 106 : BindingExpression (hash=45649854):   At level 0 - for String.X1 found accessor <null>
System.Windows.Data Warning: 106 : BindingExpression (hash=45649854):   At level 0 - for EnumerableCollectionView.X1 found accessor <null>
System.Windows.Data Warning: 102 : BindingExpression (hash=45649854): Replace item at level 0 with {NullDataItem}, using accessor {DependencyProperty.UnsetValue}
System.Windows.Data Warning: 78 : BindingExpression (hash=45649854): TransferValue - got raw value {DependencyProperty.UnsetValue}
System.Windows.Data Warning: 86 : BindingExpression (hash=45649854): TransferValue - using fallback/default value '9'
System.Windows.Data Warning: 87 : BindingExpression (hash=45649854): TransferValue - using final value '9'
System.Windows.Data Warning: 54 : Created BindingExpression (hash=32948864) for Binding (hash=33575416) 
```

但是对于文本列，我收到以下警告：

```
System.Windows.Data Warning: 58 : BindingExpression (hash=32948864): Default mode resolved to OneWay
System.Windows.Data Warning: 59 : BindingExpression (hash=32948864): Default update trigger resolved to PropertyChanged
System.Windows.Data Warning: 60 : BindingExpression (hash=32948864): Attach to System.Windows.Controls.TextBlock.Text (hash=6303902)
System.Windows.Data Warning: 65 : BindingExpression (hash=32948864): Resolving source
System.Windows.Data Warning: 68 : BindingExpression (hash=32948864): Found data context element: TextBlock (hash=6303902) (OK)
System.Windows.Data Warning: 69 : BindingExpression (hash=32948864): DataContext is null
System.Windows.Data Warning: 63 : BindingExpression (hash=32948864): Resolve source deferred
System.Windows.Data Warning: 65 : BindingExpression (hash=8194399): Resolving source 
System.Windows.Data Warning: 68 : BindingExpression (hash=8194399): Found data context element: TextBlock (hash=33203677) (OK)
System.Windows.Data Warning: 76 : BindingExpression (hash=8194399): Activate with root item Index (hash=33903126)
System.Windows.Data Warning: 106 : BindingExpression (hash=8194399):   At level 0 - for Index.X1 found accessor RuntimePropertyInfo(X1)
System.Windows.Data Warning: 102 : BindingExpression (hash=8194399): Replace item at level 0 with Index (hash=33903126), using accessor RuntimePropertyInfo(X1)
System.Windows.Data Warning: 99 : BindingExpression (hash=8194399): GetValue at level 0 from Index (hash=33903126) using RuntimePropertyInfo(X1): '1'
System.Windows.Data Warning: 78 : BindingExpression (hash=8194399): TransferValue - got raw value '1'
System.Windows.Data Warning: 82 : BindingExpression (hash=8194399): TransferValue - implicit converter produced '1.00'
System.Windows.Data Warning: 87 : BindingExpression (hash=8194399): TransferValue - using final value '1.00'
System.Windows.Data Warning: 65 : BindingExpression (hash=32948864): Resolving source
System.Windows.Data Warning: 68 : BindingExpression (hash=32948864): Found data context element: TextBlock (hash=6303902) (OK)
System.Windows.Data Warning: 76 : BindingExpression (hash=32948864): Activate with root item Index (hash=49245678)
System.Windows.Data Warning: 105 : BindingExpression (hash=32948864):   At level 0 using cached accessor for Index.X1: RuntimePropertyInfo(X1)
System.Windows.Data Warning: 102 : BindingExpression (hash=32948864): Replace item at level 0 with Index (hash=49245678), using accessor RuntimePropertyInfo(X1)
System.Windows.Data Warning: 99 : BindingExpression (hash=32948864): GetValue at level 0 from Index (hash=49245678) using RuntimePropertyInfo(X1): '1'
System.Windows.Data Warning: 78 : BindingExpression (hash=32948864): TransferValue - got raw value '1'
System.Windows.Data Warning: 82 : BindingExpression (hash=32948864): TransferValue - implicit converter produced '1.00'
System.Windows.Data Warning: 87 : BindingExpression (hash=32948864): TransferValue - using final value '1.00' 
```

模板列似乎无法找到正确的根项。问题是什么是帮助它找到正确的正确方法？我试图添加一个 RelateSource 但没有弄清楚如何。我的类“索引”在 MainWindow 类下。请帮我。我花了2天时间。我相信我快到了，但有些事情在没有帮助的情况下我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:20:13.363

我猜问题是你的 simpleChart `UserControl`。可能您`DataContext`以错误的方式为此控件设置了 ，这就是为什么绑定不会`Row.DataContext`找到`UserControl.DataContext`.

看看这个[用于创建可重用用户控件的简单模式，](http://www.scottlogic.co.uk/blog/colin/2012/02/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight/)以正确的方式进行操作。

# linux - 根据另一个位置的目录列表从一个位置删除一堆目录？

> ID：11318828
> 
> 赞同：0
> 
> 时间：2012-07-03T20:39:08.690
> 
> 标签：linux, shell, command-line

我在文件系统中完全不同的地方有两个目录： /path1/dir1/* /path2/dir2/*

dir1 有一个子目录列表，dir2 有一个类似的子目录列表，其中一些也在 dir1 中

我想要一个可以使用当前位于 dir1 中的子目录列表的命令，如果它们存在于 dir2 中，请删除它们。

我能够使用 find 命令和 sed 一起输出子目录名称列表，如下所示：

找到 $PWD -maxdepth 1 -type d | sed -e 's\^/path1/dir1///g' 这将输出： subdir1 subdir2 subdir3

但我不知道如何将其输入命令以从另一个位置（递归地）删除这些子目录。我需要使用 awk 或 xargs 什么的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:46:55.447

听起来你想要这样的东西：

```
cd /path1/dir1; find . -type d -maxdepth 1 -mindepth 1 -exec rm -rf /path2/dir2/{} \; 
```

将“rm -rf”替换为“echo”以查看在尝试之前它将删除哪些目录 :-)

如果目录不存在，“-f”选项可防止错误

某些版本的 find（GNU？）也有“-execdir”。你可以像这样使用它：

```
find /path1/dir -type d -maxdepth 1 -mindepth 1 -execdir rm -rf /path2/dir2/{} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T02:03:43.790

您也可以尝试使用 find 来定位到 awk 的目录和管道：

```
find /path1/dir1/ -maxdepth 1 -mindepth 1 -type d |awk 'BEGIN{FS="/"}{system("echo rm -rf /path2/dir2/"$NF);}' 
```

当您确定命令运行正常时，删除 system() 调用中的“回声”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T00:23:20.467

```
for dir in path1/dir1/*/
do
    rm -rf path2/dir2/"$(basename dir)"
done 
```

# java - 使用gson将json解析为java对象

> ID：11318830
> 
> 赞同：2
> 
> 时间：2012-07-03T20:39:10.560
> 
> 标签：java, json, gson

我想将 json 数据解析为 java 对象，然后将其发布到 .jsp 以将其转换回 json 对象，这样我就可以将其放入 javascript 数组中。

这是我要解析的数据示例：

```
"LoanList" = [ {"Loan" : "One","Lat" : "35.65365", "Lng" : "123.1331" , "Bal" : "4565" ,  "Address" : "Address 1" , "Delinquency" : "True')] 
```

读完之后，我决定使用gson来解析数据： 读了关于这个话题的其他问题之后，我写了两个类。

**class1.java**

```
import java.util.ArrayList;

public class JSON1 {

    ArrayList<innerData> Loanlst;

    public ArrayList<innerData> getLoanlst() {
        return Loanlst;
    }
    public void setLoanlst(ArrayList<innerData> Loanlst) {
        this.Loanlst = Loanlst;
    }
} 
```

**类2.java**

```
import java.math.*;

public class innerData {
public String loan;
public BigDecimal lat;
public BigDecimal lng;
public BigDecimal bal;
public String addrs;
public String delinq;

public String getLoan() {
    return loan;
}

public void setLoan(String loan){
    this.loan = loan;
}

public BigDecimal getLat() {
    return lat;
}

public void setLat(BigDecimal lat){
    this.lat = lat;
}

public BigDecimal getLng() {
    return lng;
}

public void setLng(BigDecimal lng){
    this.lng = lng;
}

public BigDecimal getBal() {
    return bal;
}

public void setBal(BigDecimal bal){
    this.bal = bal;
}

public String getAddrs() {
    return addrs;
}

public void setAddrs(String addrs){
    this.addrs = addrs;
}

public String getDelinq() {
    return delinq;
}

public void setDelinq(String delinq){
    this.delinq = delinq;
}
} 
```

这是我卡住的地方，我在哪里创建新的 Gson() 来在发送数据之前解析数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:58:48.910

使用您的课程，您应该能够执行以下操作：

```
InnerData obj = new InnerData(...);//fill in with data
Gson gson = new Gson();

// convert java object to JSON format,
// and returned as JSON formatted string
String json = gson.toJson(obj); 
```

[在此处](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)和[此处](https://sites.google.com/site/gson/gson-user-guide#TOC-Using-Gson)查看示例

提示：尝试创建一个主类来单独运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T03:27:29.223

试试这个： JsonParser parser = new JsonParser(); JsonObject jsonObject=parser.parse("你的字符串").getAsJsonObject();

如果它是 jsonArray ，请将 getAsJsonObject 更改为 getAsJsonArray

jackson 还提供了一个易于解析到 json 的字符串，您可以搜索 jackson apache

# wordpress - 按wordpress中的标签过滤

> ID：11318832
> 
> 赞同：0
> 
> 时间：2012-07-03T20:39:21.570
> 
> 标签：wordpress, search, filter, tags

我正在 wordpress 中创建一个视频库，我需要按标签进行搜索过滤。

这些视频将是“wordpress 帖子”，并将在 fancybox 中打开。

就像这样： http: [//molho.tv/](http://molho.tv/)除了在这个网站上的视频没有在 fancybox 中打开。（在这种情况下，过滤器是：ALL、MOTION、FILM、PRINT）

必须有一个我可以适应的主题，或者一个可以做到这一点的搜索插件。

任何建议将不胜感激！

阿图尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:48:32.040

尝试：[http](http://wordpress.org/extend/plugins/search-everything/) ://wordpress.org/extend/plugins/search-everything/ 或者您可以在 PHP/MySQL 中编写自己的解决方案，在视频类别中搜索 wp_posts 中每个帖子的标签列。

# java - 使用 Hector 在 Cassandra 之间存储和检索 float[]

> ID：11318834
> 
> 赞同：2
> 
> 时间：2012-07-03T20:39:41.553
> 
> 标签：java, serialization, nosql, cassandra, hector

我有以下 Cassandra 架构：

```
ColumnFamily: FloatArrays {
    SCKey: SuperColumn Key (Integer) {
        Key: FloatArray (float[]) {
            field (String): value (String)
        }
    }
} 
```

为了插入符合此模式的数据，我在 Hector 中创建了以下模板：

```
template = new ThriftSuperCfTemplate<Integer, FloatArray, String>(
    keyspace, "FloatArrays", IntegerSerializer.get(),
    FloatArraySerializer.get(), StringSerializer.get()); 
```

要（反）序列化我创建（和单元测试）自定义序列化器的 FloatArray：

```
public class FloatArraySerializer extends AbstractSerializer<FloatArray> {

    private static final FloatArraySerializer instance = 
        new FloatArraySerializer();

    public static FloatArraySerializer get() {
        return instance;
    }

    @Override
    public FloatArray fromByteBuffer(ByteBuffer buffer) {
        buffer.rewind();
        FloatBuffer floatBuf = buffer.asFloatBuffer();
        float[] floats = new float[floatBuf.limit()];
        if (floatBuf.hasArray()) {
            floats = floatBuf.array(); 
        } else {
            floatBuf.get(floats, 0, floatBuf.limit());
        }
        return new FloatArray(floats);
    }

    @Override
    public ByteBuffer toByteBuffer(FloatArray theArray) {
        float[] floats = theArray.getFloats();
        ByteBuffer byteBuf = ByteBuffer.allocate(4 * descriptor.length);
        FloatBuffer floatBuf = byteBuf.asFloatBuffer();
        floatBuf.put(floats);
        byteBuf.rewind();
        return byteBuf;
    }

} 
```

现在是棘手的一点。存储然后检索浮点数组不会返回相同的结果。实际上，数组中的元素数量甚至都不相同。我用来检索结果的代码如下所示：

```
SuperCfResult<Integer, FloatArray, String> result = 
    template.querySuperColumns(hash);
for (FloatArray floatArray: result.getSuperColumns()) {
    // Do something with the FloatArrays
} 
```

因为我对 Cassandra/Hector 很陌生，所以我在这里犯了一个概念上的错误吗？现在我什至不知道哪里出了问题。序列化器似乎没问题。您能否为我提供一些指示以继续我的搜索？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:53:21.173

我认为你在正确的轨道上。当我使用 ByteBuffers 时，我发现我有时需要以下语句：

```
import org.apache.thrift.TBaseHelper;

       ... 

ByteBuffer aCorrectedByteBuffer = TBaseHelper.rightSize(theByteBufferIWasGiven); 
```

字节缓冲区有时会将其值作为偏移量存储到其缓冲区中，但序列化程序似乎假设字节缓冲区的值从偏移量 0 开始。TBaseHelper 尽我所能纠正偏移量，因此序列化程序实现中的假设是有效的.

数组输入和数组输出的长度差异是从错误的偏移量开始的结果。序列化值的第一个或两个字节包含数组的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:40:49.420

感谢克里斯，我解决了这个问题。序列化器现在看起来像这样：

```
public class FloatArraySerializer extends AbstractSerializer<FloatArray> {

    private static final FloatArraySerializer instance = 
        new FloatArraySerializer();

    public static FloatArraySerializer get() {
        return instance;
    }

    @Override
    public FloatArray fromByteBuffer(ByteBuffer buffer) {
        ByteBuffer rightBuffer = TBaseHelper.rightSize(buffer);  // This does the trick
        FloatBuffer floatBuf = rightBuffer.asFloatBuffer();
        float[] floats = new float[floatBuf.limit()];
        if (floatBuf.hasArray()) {
            floats = floatBuf.array(); 
        } else {
            floatBuf.get(floats, 0, floatBuf.limit());
        }
        return new FloatArray(floats);
    }

    @Override
    public ByteBuffer toByteBuffer(FloatArray theArray) {
        float[] floats = theArray.getDescriptor();
        ByteBuffer byteBuf = ByteBuffer.allocate(4 * descriptor.length);
        FloatBuffer floatBuf = byteBuf.asFloatBuffer();
        floatBuf.put(floats);
        byteBuf.rewind();
        return byteBuf;
    }

} 
```

# java - 使用 Guice 进行通用绑定

> ID：11318836
> 
> 赞同：2
> 
> 时间：2012-07-03T20:39:45.207
> 
> 标签：java, guice

我试图用 guice persist 和其他一些东西来构建一个简单的持久化库。

我已经有一个`AbstractDao<T>`，我可以像老板一样轻松地扩展和绑定具体的实现。

但是，我想要一种 GenericDao，像这样：

```
public abstract class GenericDao<T extends Bean> {

@Inject
private Provider<EntityManager> emp;

protected EntityManager em() {
    return emp.get();
}

public AbstractDao() {
}

protected abstract Class<T> clazz();
// .... 
```

如果我将只有 CRUD（在抽象 dao 中实现）用于某个 bean，我想像`GenericDao<SomeBean>`老板一样注入。

所以，我开始尝试一些技巧，并得到以下结果：

```
public abstract class AbstractPersistentModule extends AbstractModule {

    protected <T extends Bean> LinkedBindingBuilder<T> bindGenericDao(final Class<T> clazz) {
       return bind(
               new TypeLiteral<GenericDao<T>>(){}
       )./* what the hell can I do here? */;
    }
} 
```

如果我能让它工作，我将能够做一个简单的：

```
bindGenericDao(Pessoa.class); 
```

有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:17:15.020

有关工作实施，请参阅此[帖子。](http://jamolkhon.blogspot.com/2012/07/generic-typesafe-dao-with-guice-and.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:16:28.877

经过很多黑客攻击，我终于设法让它工作了。请看一下并告诉我您的想法：[https ://github.com/namekusei/persistence/blob/master/src/main/java/com/github/namekusei/inject/AbstractPersistentModule.java](https://github.com/namekusei/persistence/blob/master/src/main/java/com/github/namekusei/inject/AbstractPersistentModule.java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T11:38:32.100

我记得 Weld 是另一种方法，您可以使用@InjectionPoint 来说明注入元素的类型。

```
class Foo {
   @Inject
   private GenericDAO<Employee> dao;
   //...
}

..
@Produces
public GenericDAO<T> createDaoInstances(InjectionPoint type){
   return new GenericDAO(type.getMember().getSomeThing());
}

public GenericDAO<T>{
   //..
   public GenericDAO<T>(EntityManager em){
   //...
} 
```

}

我认为这是一个更有趣的，只是因为你可以更好地分离组件和层之间的绑定。

# spotify - 通过应用程序 api 或 web api 检测 spotify 跟踪是否“显式”

> ID：11318840
> 
> 赞同：1
> 
> 时间：2012-07-03T20:40:00.190
> 
> 标签：spotify

有什么方法可以通过应用程序 api 或 web api 检测 spotify 中的轨道是否是显式的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:34:29.277

截至目前，Web API 确实公开了这些数据。

[示例 JSON 搜索](http://ws.spotify.com/search/1/track.json?q=fuck+you)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:26:28.637

API 当前不公开此数据。

# ios - 构造这个 UIViewController 类层次结构的惯用方法是什么？

> ID：11318841
> 
> 赞同：0
> 
> 时间：2012-07-03T20:40:00.393
> 
> 标签：ios, uiview

我有一个包含几个`UITableViewController`子类的应用程序。我创建了一个共享父级，我在其中处理大部分 prepareForSegue 工作并通过模板方法模式委托给子类的实现。

这个父类有一些逻辑，比如何时`setEditing:animated`向`navigationItem`.

我刚刚添加了一个详细视图，它只是 a`UITextField`和 a`UITextView`所以它真的不需要是 a `UITableView`。事实上，如果它是一个表格视图，我就不会有我想要的滚动行为。所以我`UIViewController`直接把它变成了一个子类。

但我希望它具有与其他视图控制器从中间类继承的相同的编辑/取消行为。

解决重复的惯用方法是什么？类别？

# ios - IOS：在滚动视图中添加图像视图以进行缩放

> ID：11318845
> 
> 赞同：29
> 
> 时间：2012-07-03T20:40:21.327
> 
> 标签：ios, uiscrollview, uiimageview, uiimage

我想用 a 设置一个 UIImageView`UIImage`并将这个 imageview 放在 a`UIScrollView`中以获得这个图像的缩放；我想要这个`UIImageView`并`UIScrollView`适合视图中心的矩形......有可能吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-03T21:07:40.900

1.  将您的视图控制器设置为`<UIScrollViewDelegate>`
2.  `UIScrollView`在视图中心绘制您想要的矩形大小。将检查器中的最大缩放设置为大于 1 的值。例如 4 或 10。
3.  右键单击滚动视图并将委托连接到您的视图控制器。
4.  画你`UIImageView`的`UIScrollView`并用你想要的任何图像进行设置。使其大小与`UIScrollView`.
5.  Ctrl+拖动窗体`UIImageView`到`.h`你的 View 控制器创建一个`IBOutlet`for `UIImageView`，称之为聪明之类的东西`imageView`。
6.  添加此代码：

    > ```
    > -(UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView
    > {
    >     return self.imageView;
    > } 
    > ```

7.  运行应用程序并捏合平移，直到您心满意足。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-03T21:09:39.463

下载[这个](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Listings/2_Autoscroll_Classes_TapDetectingImageView_h.html)和[这个](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Listings/3_Tiling_Classes_TapDetectingView_h.html#//apple_ref/doc/uid/DTS40008904-3_Tiling_Classes_TapDetectingView_h-DontLinkElementID_21)文件。您将需要它们来处理触摸。

将 scrollView 委托添加到您的视图`<UIScrollViewDelegate>`并声明出口：

```
 @property (nonatomic, retain) IBOutlet UIScrollView *imageScrollView;
 @property (nonatomic, retain) UIImageView *imageView; 
```

在屏幕内导入下载的文件并执行以下操作：

```
#import "TapDetectingImageView.h"

#define ZOOM_STEP 2.0
@interface myView (UtilityMethods)
- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center;
@end

@implementation myView
@synthesize imageScrollView, imageView;

- (void)viewDidLoad
{

    [super viewDidLoad];

    //Setting up the scrollView    
    imageScrollView.bouncesZoom = YES;
    imageScrollView.delegate = self;
    imageScrollView.clipsToBounds = YES;

    //Setting up the imageView
    imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myImage.png"]];
    imageView.userInteractionEnabled = YES;
    imageView.autoresizingMask = ( UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin);

    //Adding the imageView to the scrollView as subView
    [imageScrollView addSubview:imageView];
    imageScrollView.contentSize = CGSizeMake(imageView.bounds.size.width, imageView.bounds.size.height);
    imageScrollView.decelerationRate = UIScrollViewDecelerationRateFast;

    //UITapGestureRecognizer set up
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    UITapGestureRecognizer *twoFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTwoFingerTap:)];

    [doubleTap setNumberOfTapsRequired:2];
    [twoFingerTap setNumberOfTouchesRequired:2];

    //Adding gesture recognizer
    [imageView addGestureRecognizer:doubleTap];
    [imageView addGestureRecognizer:twoFingerTap];

    [singleTap release];
    [doubleTap release];
    [twoFingerTap release];

    // calculate minimum scale to perfectly fit image width, and begin at that scale
    float minimumScale = 1.0;//This is the minimum scale, set it to whatever you want. 1.0 = default
    imageScrollView.maximumZoomScale = 4.0;
    imageScrollView.minimumZoomScale = minimumScale;
    imageScrollView.zoomScale = minimumScale;
    [imageScrollView setContentMode:UIViewContentModeScaleAspectFit];
    [imageView sizeToFit];
    [imageScrollView setContentSize:CGSizeMake(imageView.frame.size.width, imageView.frame.size.height)];

}

- (void)scrollViewDidZoom:(UIScrollView *)aScrollView {
    CGFloat offsetX = (imageScrollView.bounds.size.width > imageScrollView.contentSize.width)? 
    (imageScrollView.bounds.size.width - imageScrollView.contentSize.width) * 0.5 : 0.0;
    CGFloat offsetY = (imageScrollView.bounds.size.height > imageScrollView.contentSize.height)? 
    (imageScrollView.bounds.size.height - imageScrollView.contentSize.height) * 0.5 : 0.0;
    imageView.center = CGPointMake(imageScrollView.contentSize.width * 0.5 + offsetX, 
                                   imageScrollView.contentSize.height * 0.5 + offsetY);
}

- (void)viewDidUnload {
    self.imageScrollView = nil;
    self.imageView = nil;
}

#pragma mark UIScrollViewDelegate methods

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return imageView;
}

#pragma mark TapDetectingImageViewDelegate methods

- (void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer {
    // zoom in
    float newScale = [imageScrollView zoomScale] * ZOOM_STEP;

    if (newScale > self.imageScrollView.maximumZoomScale){
        newScale = self.imageScrollView.minimumZoomScale;
        CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];

        [imageScrollView zoomToRect:zoomRect animated:YES];

    }
    else{

        newScale = self.imageScrollView.maximumZoomScale;
        CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];

        [imageScrollView zoomToRect:zoomRect animated:YES];
    }
}

- (void)handleTwoFingerTap:(UIGestureRecognizer *)gestureRecognizer {
    // two-finger tap zooms out
    float newScale = [imageScrollView zoomScale] / ZOOM_STEP;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [imageScrollView zoomToRect:zoomRect animated:YES];
}

#pragma mark Utility methods

- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center {

    CGRect zoomRect;

    // the zoom rect is in the content view's coordinates. 
    //    At a zoom scale of 1.0, it would be the size of the imageScrollView's bounds.
    //    As the zoom scale decreases, so more content is visible, the size of the rect grows.
    zoomRect.size.height = [imageScrollView frame].size.height / scale;
    zoomRect.size.width  = [imageScrollView frame].size.width  / scale;

    // choose an origin so as to get the right center.
    zoomRect.origin.x    = center.x - (zoomRect.size.width  / 2.0);
    zoomRect.origin.y    = center.y - (zoomRect.size.height / 2.0);

    return zoomRect;
} 
```

完毕！

基本上这段代码所做的就是添加`imageView`as 的子视图`imageScrollView`。

然后，它将`TapDetecting`类方法添加到 scrollView，以识别点击次数 - 用户进行的捏合并添加缩放功能。

您可以设置`minimumScale`图像的 ，如果您保留`1.0`图像应按原样显示（如果将其设置得低一点，则正在缩放），而`maximumZoomScale`，我建议您将其保留为 4 ，没关系！

现在，您可以从那里以编程方式加载图像。

您要做的最后一件事是`UIScrollView`在您的 xib 文件中插入 a 并将其链接到`imageScrollView`. 您将拥有完美中心的图像，您可以在代码中设置时双击它进行缩放、捏合进行缩放。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-30T16:43:13.943

使用 Swift 4 和 iOS 11，您可以使用以下两种解决方案之一来解决您的问题。

* * *

# #1。使用插图

*ViewController.swift*

```
import UIKit

final class ViewController: UIViewController {

    private let scrollView = ImageScrollView(image: UIImage(named: "image")!)

    override func viewDidLoad() {
        view.backgroundColor = .black
        view.addSubview(scrollView)

        scrollView.frame = view.frame
        scrollView.autoresizingMask = [.flexibleWidth, .flexibleHeight]
    }

} 
```

*ImageScrollView.swift*

```
import UIKit

final class ImageScrollView: UIScrollView {

    private let imageView = UIImageView()
    override var frame: CGRect {
        didSet {
            if frame.size != oldValue.size { setZoomScale() }
        }
    }

    required init(image: UIImage) {
        super.init(frame: .zero)

        imageView.image = image
        imageView.sizeToFit()
        addSubview(imageView)
        contentSize = imageView.bounds.size

        contentInsetAdjustmentBehavior = .never // Adjust content according to safe area if necessary
        showsVerticalScrollIndicator = false
        showsHorizontalScrollIndicator = false
        alwaysBounceHorizontal = true
        alwaysBounceVertical = true
        delegate = self
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    // MARK: - Helper methods

    func setZoomScale() {
        let widthScale = frame.size.width / imageView.bounds.width
        let heightScale = frame.size.height / imageView.bounds.height
        let minScale = min(widthScale, heightScale)
        minimumZoomScale = minScale
        zoomScale = minScale
    }

} 
```

```
extension ImageScrollView: UIScrollViewDelegate {

    func viewForZooming(in scrollView: UIScrollView) -> UIView? {
        return imageView
    }

    func scrollViewDidZoom(_ scrollView: UIScrollView) {
        let imageViewSize = imageView.frame.size
        let scrollViewSize = scrollView.bounds.size
        let verticalInset = imageViewSize.height < scrollViewSize.height ? (scrollViewSize.height - imageViewSize.height) / 2 : 0
        let horizontalInset = imageViewSize.width < scrollViewSize.width ? (scrollViewSize.width - imageViewSize.width) / 2 : 0
        scrollView.contentInset = UIEdgeInsets(top: verticalInset, left: horizontalInset, bottom: verticalInset, right: horizontalInset)
    }

} 
```

* * *

# #2。使用自动布局

*ViewController.swift*

```
import UIKit

final class ViewController: UIViewController {

    private let scrollView = ImageScrollView(image: UIImage(named: "image")!)

    override func viewDidLoad() {
        view.backgroundColor = .black
        view.addSubview(scrollView)

        scrollView.translatesAutoresizingMaskIntoConstraints = false
        scrollView.leadingAnchor.constraint(equalTo: view.leadingAnchor).isActive = true
        scrollView.trailingAnchor.constraint(equalTo: view.trailingAnchor).isActive = true
        scrollView.topAnchor.constraint(equalTo: view.topAnchor).isActive = true
        scrollView.bottomAnchor.constraint(equalTo: view.bottomAnchor).isActive = true
    }

    override func viewDidLayoutSubviews() {        
        scrollView.setZoomScale()
    }

} 
```

*ImageScrollView.swift*

```
import UIKit

final class ImageScrollView: UIScrollView {

    private let imageView = UIImageView()
    private var imageViewBottomConstraint = NSLayoutConstraint()
    private var imageViewLeadingConstraint = NSLayoutConstraint()
    private var imageViewTopConstraint = NSLayoutConstraint()
    private var imageViewTrailingConstraint = NSLayoutConstraint()

    required init(image: UIImage) {
        super.init(frame: .zero)

        imageView.image = image
        imageView.sizeToFit()
        addSubview(imageView)

        imageView.translatesAutoresizingMaskIntoConstraints = false
        imageViewLeadingConstraint = imageView.leadingAnchor.constraint(equalTo: leadingAnchor)
        imageViewTrailingConstraint = imageView.trailingAnchor.constraint(equalTo: trailingAnchor)
        imageViewTopConstraint = imageView.topAnchor.constraint(equalTo: topAnchor)
        imageViewBottomConstraint = imageView.bottomAnchor.constraint(equalTo: bottomAnchor)
        NSLayoutConstraint.activate([imageViewLeadingConstraint, imageViewTrailingConstraint, imageViewTopConstraint, imageViewBottomConstraint])

        contentInsetAdjustmentBehavior = .never // Adjust content according to safe area if necessary
        showsVerticalScrollIndicator = false
        showsHorizontalScrollIndicator = false
        alwaysBounceHorizontal = true
        alwaysBounceVertical = true
        delegate = self
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    // MARK: - Helper methods

    func setZoomScale() {
        let widthScale = frame.size.width / imageView.bounds.width
        let heightScale = frame.size.height / imageView.bounds.height
        let minScale = min(widthScale, heightScale)
        minimumZoomScale = minScale
        zoomScale = minScale
    }

} 
```

```
extension ImageScrollView: UIScrollViewDelegate {

    func viewForZooming(in scrollView: UIScrollView) -> UIView? {
        return imageView
    }

    func scrollViewDidZoom(_ scrollView: UIScrollView) {
        let yOffset = max(0, (bounds.size.height - imageView.frame.height) / 2)
        imageViewTopConstraint.constant = yOffset
        imageViewBottomConstraint.constant = yOffset

        let xOffset = max(0, (bounds.size.width - imageView.frame.width) / 2)
        imageViewLeadingConstraint.constant = xOffset
        imageViewTrailingConstraint.constant = xOffset

        layoutIfNeeded()
    }

} 
```

* * *

资料来源：

*   [Github / ImageScrollView](https://github.com/imanoupetit/ImageScrollView)
*   [raywenderlich.com / UIScrollView 教程：入门](https://www.raywenderlich.com/159481/uiscrollview-tutorial-getting-started)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-25T05:58:27.663

我编写了一个示例应用程序，它也支持 AutoLayout 和 Storyboards 来演示这种行为。我希望它可以节省每个人试图弄清楚这一点的时间：[http](http://rexstjohn.com/facebook-like-ios-photo-modal-gallery-swipe-gestures/) ://rexstjohn.com/facebook-like-ios-photo-modal-gallery-swipe-gestures/ 。

# mercurial - Mercurial：发现被遗弃的事务运行 hg 恢复。缺少revlogs

> ID：11318846
> 
> 赞同：1
> 
> 时间：2012-07-03T20:40:23.367
> 
> 标签：mercurial

我最近尝试推送到中央存储库并收到错误：发现已放弃的事务。运行 hg recover 表示没有丢失事务。根据另一个[答案](https://stackoverflow.com/questions/5529207/mercurial-abandoned-transaction-found-run-hg-recover-recover-does-not-work)的建议，我使用 hg verify 来查看我的存储库缺少两个 revlog；下面是运行 hg verify 的结果：

```
% hg --repository C:\dev\WHDLawWeb verify --verbose
repository uses revlog format 1
checking changesets
checking manifests
crosschecking files in changesets and manifests
checking files
 data/WHDLawWeb/Images/pastsponsorships.jpg.d@167: missing revlog!
 data/WHDLawWeb/WHDLawWeb/Resources/Image/ALFALogoWhite.jpg.i@319: missing revlog!          
7175 files, 988 changesets, 14987 total revisions           
2 integrity errors encountered!        
(first damaged changeset appears to be 167)       
[command returned code 1 Tue Jul 03 15:02:13 2012] 
```

为了纠正这个问题，主要是由于我在这一点上的挫败感，我决定只克隆中央存储库，因为我只会丢失一些修订。但是，一旦我尝试从这个克隆的存储库推送，我会收到以下错误报告：

```
** Mercurial version (2.2.2).  TortoiseHg version (2.4.1)   
** Command: --nofork workbench  
** CWD: C:\dev  
** Encoding: cp1252    
** Extensions loaded: bugzilla, graphlog, convert, extdiff  
** Python version: 2.6.6 (r266:84297, Aug 24 2010, 18:46:32) [MSC v.1500 32 bit (Intel)]  
** Windows version: (6, 1, 7601, 2, 'Service Pack 1')  
** Processor architecture: x86  
** Qt-4.7.4 PyQt-4.8.6  
Traceback (most recent call last):  
  File "tortoisehg\hgqt\repowidget.pyo", line 954, in repositoryChanged  
  File "tortoisehg\hgqt\repowidget.pyo", line 916, in rebuildGraph  
  File "tortoisehg\hgqt\repowidget.pyo", line 777, in setupModels  
  File "tortoisehg\hgqt\repomodel.pyo", line 151, in __init__  
  File "tortoisehg\hgqt\repomodel.pyo", line 170, in initBranchColors  
  File "mercurial\localrepo.pyo", line 523, in branchtags  
  File "mercurial\changelog.pyo", line 195, in read  
  File "mercurial\revlog.pyo", line 926, in revision  
  File "mercurial\revlog.pyo", line 849, in _chunkbase  
  File "mercurial\revlog.pyo", line 846, in _chunk  
  File "mercurial\revlog.pyo", line 115, in decompress  
error: Error -5 while decompressing data: incomplete or truncated stream  
Traceback (most recent call last):  
  File "tortoisehg\hgqt\commit.pyo", line 533, in repositoryChanged  
  File "tortoisehg\hgqt\commit.pyo", line 553, in refresh  
  File "tortoisehg\hgqt\thgrepo.pyo", line 631, in thgmqappliedpatch  
  File "tortoisehg\hgqt\thgrepo.pyo", line 623, in _thgmqpatchtags  
  File "mercurial\context.pyo", line 191, in tags  
  File "mercurial\localrepo.pyo", line 468, in nodetags  
  File "mercurial\util.pyo", line 237, in __get__  
  File "mercurial\localrepo.pyo", line 395, in _tagscache  
  File "mercurial\localrepo.pyo", line 428, in _findtags  
  File "mercurial\tags.pyo", line 30, in findglobaltags  
  File "mercurial\tags.pyo", line 242, in _readtagcache  
  File "mercurial\context.pyo", line 251, in filenode  
  File "mercurial\context.pyo", line 240, in _fileinfo  
  File "mercurial\context.pyo", line 183, in files  
  File "mercurial\util.pyo", line 237, in __get__  
  File "mercurial\context.pyo", line 134, in _changeset  
  File "mercurial\changelog.pyo", line 195, in read  
  File "mercurial\revlog.pyo", line 926, in revision  
  File "mercurial\revlog.pyo", line 849, in _chunkbase  
  File "mercurial\revlog.pyo", line 846, in _chunk  
  File "mercurial\revlog.pyo", line 115, in decompress  
error: Error -5 while decompressing data: incomplete or truncated stream 
```

在中央存储库上运行 hg verify 表明这里也缺少两个 revlog。如果有人知道如何修复我的原始或克隆存储库，我将不胜感激。

在这里也尝试[了一个解决方案](https://stackoverflow.com/questions/5970648/mercurial-missing-revlog)，遇到了同样的问题。我对 mercurial 和 tortiosehg 比较陌生，请原谅任何愚蠢的错误。就像我说的帮助将不胜感激。

# mongodb - 为什么 MongoDb 不将我的斜杠存储在这个字符串中？

> ID：11318850
> 
> 赞同：5
> 
> 时间：2012-07-03T20:40:33.670
> 
> 标签：mongodb

谁能告诉我为什么这个命令在 MongoDB shell 客户端不起作用：

```
db.coll.update({'live':true},{$set:{'mask':"\D\D\D\D\D\D\D\D"}},false,true) 
```

但

```
db.coll.findOne({'id':'someId'}) 
```

将掩码字段返回为：

```
"mask" : "DDDDDDDD", 
```

斜线去哪儿了？

我尝试使用 \\D 进行“双重转义”，并插入两个斜杠：

```
"mask" : "\\D\\D\\D\\D\\D\\D\\D\\D", 
```

MongoDB shell 版本：2.0.6，MongoDB 版本：2.0.5，OSX Lion

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T22:12:35.370

实际上，MongoDB 确实将反斜杠正确地存储在数据库中。您所看到的是 mongo shell 如何显示包含反斜杠字符的字符串的工件。它会将它们打印为转义序列而不是单个字符。如果您查看返回的实际数据，您会发现它是正确的。

```
> db.tst.drop()
true
> db.tst.insert({ _id: 1, str: "\\D\\D\\D\\D\\D"} );
> x = db.tst.findOne( {_id:1} );
{ "_id" : 1, "str" : "\\D\\D\\D\\D\\D" }     // looks like it's double-backslashes
> x.str;
\D\D\D\D\D     // but it's really not
x.str.quote();
"\\D\\D\\D\\D\\D"   // it's what String.quote() prints 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:43:28.083

使用正则表达式（不带引号）

```
/\D\D\D\D\D\D\D\D/ 
```

或使用四个斜线。

```
"////D" ==> "/D" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T20:47:23.797

这是 *nix 和 C 潜入一切的例子。在 C 中，字符 \ 是转义字符。如果允许您“转义”下一个或多个字符以形成一些特殊字符或字符序列。因此，\n 是换行符 (0x0a)，\d 是回车符 (0x0d)。所以，既然 \ 有这个特殊的含义，为了得到一个 \ 你必须有两个。

将您的字符串更改为 "\D\D\D\D\D\D\D\D"

# magento - 升级后magento交易电子邮件不起作用

> ID：11318851
> 
> 赞同：1
> 
> 时间：2012-07-03T20:40:37.000
> 
> 标签：magento, magento-1.4, magento-1.6

将 1.4.1 升级到 1.6.2 后，我的 Magento 商店不发送电子邮件。在升级过程中，我们将 magento 文件的位置从 /magento-1.4 更改为根目录。

服务器没有改变，同一台服务器上的其他安装能够发送 magento 邮件。

自上次安装以来，邮件配置未更改。我已经检查过它们，它们看起来都很好。有什么建议么？

# android - 检索 JSON 会引发 ClientProtocolException

> ID：11318864
> 
> 赞同：0
> 
> 时间：2012-07-03T20:42:05.567
> 
> 标签：android, json, http, exception

我已经编写了两种几乎相同的方法来检索`JSONObject`. 较新的方法 throws `ClientProtocolException`，代码 500。我试图弄清楚这两种方法之间的区别可能会导致一种抛出异常，而另一种则可以正常工作。

方法#1：

```
public class MainActivity extends Activity
{
    // fluff

    protected JSONObject retrieveJSON()
    {
        HttpClient client = new DefaultHttpClient();
        String url = getString(R.string.url);
        String result = null;
        JSONObject json = null;

        try
        {
            HttpGet getMethod = new HttpGet(url);
            ReponseHandler<String> responseHandler = new BasicResponseHandler();
            result = client.execute(getMethod, responseHandler);

            json = new JSONObject(responseBody);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }   
} 
```

方法#2

```
public class ServiceRequest
{
    public ServiceRequest()
    {
    }

    public ServiceRequest(String url)
    {
        this.URL = url;
    }

    public String URL;

    public String execute()
    {
        String result = null;
        HttpClient httpClient = new DefaultHttpClient();
        HttpGet getRequest = new HttpGet(this.URL);

        try
        {
            ResponseHandler<String> handler = new BasicResponseHandler();
            result = httpClient.execute(getRequest, handler);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

        return result;
    }
} 
```

两种方法都返回`result`，然后将其处理为`JSONObject`. 或者至少，这两种方法都应该。我能想到的唯一主要区别是**方法#1**被编码为主要活动的类方法，而**方法#2**存在于独立类中。这种差异可能是引发的原因`ClientProtocolException`吗？

# flash - 按索引禁用火花按钮栏按钮

> ID：11318870
> 
> 赞同：2
> 
> 时间：2012-07-03T20:42:54.673
> 
> 标签：flash, apache-flex, actionscript

我可以通过索引值禁用 Spark 按钮栏按钮，还是必须通过按钮皮肤来执行此操作，如此处所示[使用](http://blog.flexexamples.com/2009/08/01/disabling-specific-buttons-in-a-spark-buttonbar-control-in-flex-4/)标签。

和我想做的例子：

```
public function disableButton(index:uint):void
{
    var button:ButtonBarButton = this.getChildAt(index) as ButtonBarButton;

    button.enabled = false;

} 
```

这不起作用，因为按钮对象返回 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:29:59.493

你想要的代码是：

```
public function disableButton(index:int):void
{
    // Bounds check
    if (index < 0 || index >= this.dataGroup.numElements) return;

    var btn:ButtonBarButton = this.dataGroup.getElementAt(index) as ButtonBarButton;
    if (btn)
    {
        btn.enabled = false;
    }
} 
```

这是一个[完整的工作示例](http://blog.flexexamples.com/2009/08/02/accessing-specific-buttons-in-a-spark-buttonbar-control-in-flex-4/)。

# c# - 组合框没有更新

> ID：11318881
> 
> 赞同：0
> 
> 时间：2012-07-03T20:43:29.220
> 
> 标签：c#, .net, wpf, mvvm

选择 Division 时，ComboBox 类别上的绑定不会更新。
选择一个部门后，ProjectCategories 属性会填充两个结果，但视图不会更新。

如果我将 ProjectCategories 作为参考发送到 ProjectCategoriesGetByDivisionId() ，那么绑定会更新。

我不想传递对我的模型和数据类的引用。如何在不更改模型和数据类的情况下更新绑定？

这是更改类别组合框绑定值的 Divisions ComboBox。

```
<ComboBox x:Name="Divisions" ItemsSource="{Binding Divisions}" DisplayMemberPath="Name" SelectedValuePath="DivisionId">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <cmd:EventToCommand Command="{Binding DivisionChanged}" CommandParameter="{Binding ElementName=Divisions, Path=SelectedItem}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</ComboBox> 
```

未更新的 ComboBox

```
<ComboBox x:Name="Categories" ItemsSource="{Binding Categories}" DisplayMemberPath="Name" SelectedValuePath="CategoryId" /> 
```

触发 Divisions SelectedChanged 事件时触发的方法。

```
private void DivisionChanged(Division d)
{
    ProjectCategories = ProjectCategory.GetByDivisionId(d.DivisionId);
} 
```

ComboBox 绑定到的 ViewModel 属性

```
public ObservableCollection<ProjectCategory> ProjectCategories
{
    get { return projectCategories; }
    set
    {
        projectCategories = value;

        if (base.PropertyChangedHandler != null)
            base.PropertyChangedHandler(this, new PropertyChangedEventArgs("ProjectCategories"));
    }
} 
```

被调用的模型方法

```
public static ObservableCollection<ProjectCategory> GetByDivisionId(int divisionId)
{
    return ProjectData.ProjectCategoriesGetByDivisionId(divisionId);
} 
```

我认为其余的都是不言自明的。

```
public static ObservableCollection<ProjectCategory> ProjectCategoriesGetByDivisionId(int divisionId)
{
    ObservableCollection<ProjectCategory> projectCategory = new ObservableCollection<ProjectCategory>();
    SqlConnection conn = null;

    try
    {
        conn = new SqlConnection(connectionString);
        SqlCommand cmd = new SqlCommand("TRK_ProjectCategory_GetByDivisionId", conn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("@DivisionId", SqlDbType.Int).Value = divisionId;
        conn.Open();
        SqlDataReader sdr = cmd.ExecuteReader();

        while (sdr.Read())
            projectCategory.Add(ObjectConstructors.ProjectCategoryConstructor(sdr));
    }
    catch (Exception ex)
    {
        ErrorHandler.EmailLog("MineralsData", "public static ObservableCollection<ProjectCategory> ProjectCategoriesGetByDivisionId(int divisionId)", ex.ToString(), string.Empty);
        throw ex;
    }
    finally
    {
        if (conn != null)
            conn.Close();
        conn = null;
    }

    return projectCategory;
}

public static ProjectCategory ProjectCategoryConstructor(SqlDataReader dr)
{
    ProjectCategory ec = new ProjectCategory();

    ec.CategoryId = dr["CategoryId"].SDR_GetInt();
    ec.Name = dr["Name"].SDR_GetString();
    ec.Description = dr["Description"].SDR_GetString();
    ec.LastModified = dr["LastModified"].SDR_GetDateTime();
    ec.ModifiedBy = dr["ModifiedBy"].SDR_GetString();

    return ec;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:57:33.650

您的组合框绑定到一个名为“类别”的属性。您没有为此属性显示任何其他代码。仅当您为类别调用 propertychanged 事件时，它才会更新。您的意思是绑定到“ProjectCategories”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:22:33.457

正如@Lee 所说，您的 xmal 绑定到一个名为 的对象`Categories`，但是在您拥有的视图模型中`ProjectCategories`，将类别组合框更改为

```
<ComboBox x:Name="Categories" ItemsSource="{Binding ProjectCategories}" DisplayMemberPath="Name" SelectedValuePath="CategoryId" /> 
```

您不需要调用 propertychanged 事件，因为您已经`PropertyChangedEventHandler`在 setter 中提出。

# segue - 搜索栏和搜索显示控制器与 segue

> ID：11318883
> 
> 赞同：0
> 
> 时间：2012-07-03T20:43:38.730
> 
> 标签：segue

点击搜索表格单元格时从不调用

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"Show Detail"])
    {
        Player *player = [self.fetchedResultsController objectAtIndexPath:[self.tableView indexPathForSelectedRow]];
        [segue.destinationViewController setPlayer:player];
    }
} 
```

**这会正确过滤列表，但是当点击搜索表单元格时，永远不会调用 prepareForSegue。**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Player Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if (tableView == self.tableView) 
    {
        // normal table view population
        Player *player = [self.fetchedResultsController objectAtIndexPath:indexPath];
        cell.textLabel.text = [[NSString alloc] initWithFormat:@"#%@ %@ %@", player.number, player.firstName, player.lastName];
        cell.detailTextLabel.text = [[NSString alloc] initWithFormat:@"%@", player.position];
        [cell.imageView setImageWithURL:[NSURL URLWithString:player.photo] placeholderImage:[UIImage imageNamed:@"playerplaceholder.jpg"]];

    }
    else if(tableView == self.searchDisplayController.searchResultsTableView)
    {
        // search view population
        Player *player = [self.filteredFetchedResultsController objectAtIndexPath:indexPath];
        cell.textLabel.text = [[NSString alloc] initWithFormat:@"#%@ %@ %@", player.number, player.firstName, player.lastName];
        cell.detailTextLabel.text = [[NSString alloc] initWithFormat:@"%@", player.position];
        [cell.imageView setImageWithURL:[NSURL URLWithString:player.photo] placeholderImage:[UIImage imageNamed:@"playerplaceholder.jpg"]];

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:44:54.377

您需要放置 IF 检查搜索是否有结果。就像在这段代码中：

```
if ([[segue identifier]isEqualToString:@"ShowDetails"])
    {
        ShowDetailsViewController *sdvc = (ShowDetailsViewController *)[segue destinationViewController];
        NSIndexPath *indexPath = [[self tableView] indexPathForSelectedRow];

        Books *selectedBooks = nil;
        if(self.searchDisplayController.active)
            selectedBooks = (Books *)[[self searchResults]objectAtIndex:[[[[self searchDisplayController]searchResultsTableView]indexPathForSelectedRow]row]];
        else
            selectedBooks = (Books *)[[self fetchResultsController] objectAtIndexPath:indexPath];

        sdvc.currentBooks = selectedBooks;
    } 
```

# ruby-on-rails - Rails 正在尝试远程渲染……但不是

> ID：11318885
> 
> 赞同：0
> 
> 时间：2012-07-03T20:43:48.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, calendar

我正在开发一个 Rails 应用程序，并试图将[event_calendar](https://github.com/elevation/event_calendar) gem 的“下个月”链接转换为 ajax 响应。

我将链接设置为远程：

```
 def month_link(month_date)
    link_to I18n.localize(month_date, :format => "%B"),
      {:month => month_date.month, :year => month_date.year},
      remote: true
  end 
```

告诉它响应js...

```
respond_to do |format|
  format.html
  format.js { render text: "help me!" }
end 
```

它有效！

```
Started GET "/calendar/2012/6" for 127.0.0.1 at 2012-07-03 15:27:42 -0500
Processing by CalendarController#index as JS
  Parameters: {"year"=>"2012", "month"=>"6"}
  Event Load (0.3ms)  SELECT "events".* FROM "events" WHERE (('2012-05-27 05:00:00.000000' <= end_at) AND (start_at< '2012-07-01 05:00:00.000000')) ORDER BY start_at ASC
  Rendered text template (0.0ms)
Completed 200 OK in 14ms (Views: 0.7ms | ActiveRecord: 0.3ms) 
```

*好吧*......除了它实际上没有渲染任何东西的部分我通过它。如果我只是告诉它`format.js`没有渲染，它实际上不会响应 js 文件。

**什么可能导致渲染不显示？**

## 更新

*   我刚刚注意到，如果您像这样访问 url`localhost:3000/calendar/2012/6.js`它会按预期工作，所以我认为这是如何设置链接的问题？

*   好的，我得到了 js 文件，但我不知道为什么。我认为我在使用错误`render`（尽管我可以发誓我曾经将它用于调试目的）。我猜 render 只有在响应 html 请求时才真正呈现 html 页面。会有意义，因为它将 json 传递给 javascript 以进行 ajax 请求。

*   问题的另一部分是我试图将 CoffeeScript 与`index.js.coffee.erb`or一起使用`index.js.erb.coffee`。我以为它工作了最长时间，但真正发生的是，它使用的是`index.js.erb`我先写的原件，即使我已经删除了它。一旦我重新启动服务器，一切都坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:26:58.693

试试这个：

```
def month_link(month_date)
  link_to I18n.localize(month_date, :format => "%B"),
  {:remote=>true, :month => month_date.month, :year => month_date.year}
end 
```

您要使用的 link_to 格式为：

```
link_to(body, url_options = {}, html_options = {}) 
```

:remote=>true 想要在 url_options 中。我不确定 :month 和 :year 键的用途，但如果它们是 html 选项，你会想要这个：

```
def month_link(month_date)
  link_to I18n.localize(month_date, :format => "%B"),
  {:remote=>true}, 
  {:month => month_date.month, :year => month_date.year}
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:06:18.110

似乎默认情况下该`remote`选项会忽略任何呈现或重定向的尝试。考虑到 Ajax 的目的是防止这两种情况……我明白为什么。

为了自我参考，这里是（据我所知）创建远程时发生的情况`link_to`：

jquery_ujs.js 的第 51 行

```
 $.rails = rails = {
    // Link elements bound by jquery-ujs
    linkClickSelector: 'a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]', 
```

下面`linkClickSelector`我们在第 300 行找到这个函数

```
 $(document).delegate(rails.linkClickSelector, 'click.rails', function(e) {
    var link = $(this), method = link.data('method'), data = link.data('params');
    if (!rails.allowAction(link)) return rails.stopEverything(e);

    if (link.is(rails.linkDisableSelector)) rails.disableElement(link);

    if (link.data('remote') !== undefined) {
      if ( (e.metaKey || e.ctrlKey) && (!method || method === 'GET') && !data ) { return true; }

      if (rails.handleRemote(link) === false) { rails.enableElement(link); }
      return false;

    } else if (link.data('method')) {
      rails.handleMethod(link);
      return false;
    }
  }); 
```

假设`handleRemote`处理 AJAX，我们在第 107 行找到这个怪物

```
// Submits "remote" forms and links with ajax
handleRemote: function(element) {
  var method, url, data, crossDomain, dataType, options;

  if (rails.fire(element, 'ajax:before')) {
    crossDomain = element.data('cross-domain') || null;
    dataType = element.data('type') || ($.ajaxSettings && $.ajaxSettings.dataType);

    if (element.is('form')) {
      method = element.attr('method');
      url = element.attr('action');
      data = element.serializeArray();
      // memoized value from clicked submit button
      var button = element.data('ujs:submit-button');
      if (button) {
        data.push(button);
        element.data('ujs:submit-button', null);
      }
    } else if (element.is(rails.inputChangeSelector)) {
      method = element.data('method');
      url = element.data('url');
      data = element.serialize();
      if (element.data('params')) data = data + "&" + element.data('params');
    } else {
      method = element.data('method');
      url = rails.href(element);
      data = element.data('params') || null;
    }

    options = {
      type: method || 'GET', data: data, dataType: dataType, crossDomain: crossDomain,
      // stopping the "ajax:beforeSend" event will cancel the ajax request
      beforeSend: function(xhr, settings) {
        if (settings.dataType === undefined) {
          xhr.setRequestHeader('accept', '*/*;q=0.5, ' + settings.accepts.script);
        }
        return rails.fire(element, 'ajax:beforeSend', [xhr, settings]);
      },
      success: function(data, status, xhr) {
        element.trigger('ajax:success', [data, status, xhr]);
      },
      complete: function(xhr, status) {
        element.trigger('ajax:complete', [xhr, status]);
      },
      error: function(xhr, status, error) {
        element.trigger('ajax:error', [xhr, status, error]);
      }
    };
    // Only pass url to `ajax` options if not blank
    if (url) { options.url = url; }

    return rails.ajax(options);
  } else {
    return false;
  }
}, 
```

# mysql - 如何将关联编辑为单个实体

> ID：11318897
> 
> 赞同：0
> 
> 时间：2012-07-03T20:44:53.320
> 
> 标签：mysql, database, relational-database

我有一个网络应用程序，其中有**帖子**，每个帖子都有并属于许多**标签**。我希望与每个帖子关联的标签可以使用单个文本字段作为逗号分隔列表进行编辑。这允许添加、删除和编辑标签（删除和添加）。但是，我的网络应用程序不知道删除和删除的内容，因为它只是传递了我希望帖子具有的一组标签。

我可以想到两种处理方法：

1.  删除标签和帖子之间的所有关联，并重建它们。
2.  在编辑之前获取一组标签，进行比较以找出要添加删除的标签。

**处理这种情况的最佳方法是什么，为什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:15:48.850

我最终所做的只是删除与该帖子相关的所有标签，然后重新构建它们。

# android - 我想要一些关于开发多平台移动应用程序的方向

> ID：11318899
> 
> 赞同：1
> 
> 时间：2012-07-03T20:44:53.593
> 
> 标签：android, iphone, mobile

用于移动开发的工具太多了，以至于信息过载。我也是一名程序员，并且想就什么最适合我的要求提出一些意见。我没有 Mac，如果我能提供帮助，我也没有购买 Mac 的计划。我正在尝试构建的应用程序似乎相对简单。我还想拥有它的 iPhone 和 Android 版本，将来有可能用于 Windows 手机。

*   需要是带有 youtube 视频的免费版本 - 所以可以访问 youtube 播放器
*   我希望能够嵌入一些文章 - 不确定这篇文章，只是文本或 pdf 等。
*   需要有升级到付费版本的选项。
*   付费版本将是基于订阅的服务。
*   付费版本将提供来自 S3（或其他更好的来源）的视频内容
*   付费版本需要有通知/推送服务，我可以按月将内容推送到应用程序。

因此，考虑到所有这些，我查看了 appcelerator、phonegap、xamarin 和许多其他服务。它们看起来都不错，但考虑到要求，我开始稍微倾向于phonegap，因为这不会是一款游戏，它主要是一项服务，它也可以同时处理Iphone和Android。

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:54:12.937

我认为PhoneGap 是您最好的选择，我与我所在地区的许多移动应用程序开发公司进行了交谈，他们都高度评价它。Phonegap 最近已被 Adob​​e 拥有，因此您可以期待它成为一个受支持/记录更严格的平台，您可以从中创建多平台应用程序。此外，它符合您的要求

我现在正在避免使用 PhoneGap，因为我想掌握 Obj-C 和 C# 以扩展我对不同编程语言的知识，但是如果我试图针对尽可能多的平台，PhoneGap 是首选。

# dynamics-crm-2011 - Dynamics CRM - 可能性和限制

> ID：11318901
> 
> 赞同：4
> 
> 时间：2012-07-03T20:45:10.157
> 
> 标签：dynamics-crm-2011, crm, microsoft-dynamics

我有一些可能模棱两可的问题，我不确定我是否会得到正确的答案，但我想我会把它放在那里，因为不知道在哪里可以得到答案。

作为一个部门，过去 2 年一直在实施各种现代开发实践，包括敏捷、Scrum、TDD、持续集成、MVC。

我的公司现在要迁移到 Microsoft Dynamics CRM（目前我们使用第三方产品）。他们希望将 Dynamics 用作 CRM，但也用于定制开发，通过阅读和背景学习，我可以理解 Microsoft Dynamics 是一款出色的产品，它有它的位置，并为许多企业解决了问题。我对 Microsoft Dynamics 的了解来自以下视频。[http://channel9.msdn.com/Series/DynamicsCRM2011](http://channel9.msdn.com/Series/DynamicsCRM2011)

我们的实施可能是针对业务高度定制的，我们还将在 Dynamics CRM 中构建大量自定义应用程序。我的公司是微软公司，所以我们已经在使用 .NET、SQL Server 等。

我的问题：

*   Microsoft Dynamics 是否允许现代开发实践，例如 TDD、持续集成、MVC？

*   如果 CRM 部分是高度定制的，我们会失去使用 Dynamics CRM 的好处吗？

*   它作为产品在市场上的声誉如何？

*   与自定义 MVC 应用程序相比，在 Dynamics CRM 中开发具有大量业务规则的定制自定义应用程序是更快还是更慢？

*   已知的限制或缺点是什么？

*   如果有的话，还有什么其他好的选择？

我意识到没有答案，只有意见，如果有人使用过或有观点，或者可以向我指出一些平衡观点和事实的良好链接，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T23:10:44.153

Microsoft CRM 是一个很棒的产品，它提供了一个非常好的应用程序框架。就像任何框架一样，它并不是最适合所有情况。一般来说，CRM 非常适合需要关系和/或工作流程的结构化数据的解决方案。

我们使用 CRM 后端构建 MVC 应用程序，将 CRM 更像 SQL 数据库；但是，这些通常适用于访问门户的非 CRM 用户。通常，对于您的 CRM 用户，您正在通过 JavaScript、插件（例如 C#）和 iFrame（指向您想要的任何东西）来定制事物。

当涉及到测试驱动开发 (TDD) 或持续集成 (CI) 时，没有标准的 CRM 工具可以帮助您。我们已经构建了一些工具来自动化/协助我们的开发，并且使用 SDK 很容易做到这一点。单元测试你的插件应该很好地适应你现在正在做的任何事情。但是，您目前从 UI 测试您的 MVC 应用程序也应该继续进行，因此您在开发/质量保证过程中投入了多少是任何新框架都需要考虑的事情。

> 如果 CRM 部分是高度定制的，我们会失去使用 Dynamics CRM 的好处吗？

这取决于你想要做什么。CRM 建立在关系之上。因此，如果您想用一堆不相关的实体定制解决方案而不使用工作流、安全性等，那么我会说 CRM 不适合您。

> 与自定义 MVC 应用程序相比，在 Dynamics CRM 中开发具有大量业务规则的定制自定义应用程序是更快还是更慢？

通常，在 CRM 界面中开发某些东西比开发非 CRM MVC 应用程序要快得多。部分问题将是增加您的开发人员。

如果情况发生在 MVC 方法更适用的情况下，那么您可以开发一个 MVC 应用程序，它与 CRM（或 SQL）对话，并通过左侧导航集成到 CRM 中。

> 已知的限制或缺点是什么？

Sharepoint 更适合非结构化数据。所以，我会说这是 CRM 的一个弱点。支持 CRM 的 SQL 数据库中有很多活动部件，所以如果您有一个 SQL 应用程序，您在其中集群多个数据库，那么我不会增加开销。唯一的另一个缺点是加速。

像任何工具一样，知道何时使用它与不使用它是关键。CRM 并不是万能的，但我已经看到它为各行各业的客户创造了奇迹。

*完全披露，我是 Microsoft 合作伙伴的开发人员。我强烈建议您拥有一个合作伙伴，该合作伙伴可以为您提供培训、入门模板等，以加快您的开发时间。*

# java - 尝试运行程序时，非法的类文字意味着什么？

> ID：11318904
> 
> 赞同：-1
> 
> 时间：2012-07-03T20:45:34.133
> 
> 标签：java, jar, exe, drjava

我在 Dr. Java 中创建了一个项目，编译后可以自动转换为 Jar 文件，然后再转换为 Jar 文件，`.exe`但是我不断收到此错误：

```
 Illegal class literal 
```

当我尝试测试运行项目时，知道为什么会发生这种情况吗？

这是主要课程：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;

public class CoolingTowerFrame extends JFrame
{ 
  public JLabel testLabel = new JLabel("All Temperatures in (deg)F");
  public JLabel testCalculationsLabel = new JLabel("");
  public JPanel testPanel = new JPanel();
  public JPanel textFieldPanel = new JPanel();
  public JPanel flowRatePanel = new JPanel();
  public JPanel wetBulbTempPanel = new JPanel();
  public JPanel waterInTempPanel = new JPanel();
  public JPanel waterOutTempPanel = new JPanel();
  public JPanel buttonPanel = new JPanel();
  public JTextField flowRateField = new JTextField(10);
  public JTextField wetBulbTempField = new JTextField(10);
  public JTextField waterInTempField = new JTextField(10);
  public JTextField waterOutTempField = new JTextField(10);
  public JLabel flowRateLabel = new JLabel();
  public JLabel wetBulbTempLabel = new JLabel();
  public JLabel waterInTempLabel = new JLabel();
  public JLabel waterOutTempLabel = new JLabel();
  public JButton submitButton = new JButton("Check Calculations");
  public JButton clearButton = new JButton("Clear");
  public JButton unknownWetBulbButton = new JButton("Unknown");
  public JButton findButton = new JButton("Find Unit");
  public int roundCoolingTons;
  public int approach;
  public int range;
  public int wetBulbTemp;
  public int flowRate;

  public CoolingTowerFrame(String title, int frameWidth, int frameHeight)
  {
    super(title);
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension dimensions = toolkit.getScreenSize();
    int x = (dimensions.width - frameWidth)/2; 
    int y = (dimensions.height - frameHeight)/2;
    setBounds(x, y, frameWidth, frameHeight);

    submitButton.addActionListener(new ButtonListener());
    clearButton.addActionListener(new ButtonListener());
    unknownWetBulbButton.addActionListener(new ButtonListener());
    findButton.addActionListener(new ButtonListener());

    flowRateLabel.setFont(new Font("Arial", Font.BOLD, 12));
    flowRateLabel.setText("Flow Rate (GPM) :");
    flowRatePanel.add(flowRateLabel);
    flowRatePanel.add(flowRateField);
    textFieldPanel.add(flowRatePanel);

    wetBulbTempLabel.setFont(new Font("Arial", Font.BOLD, 12));
    wetBulbTempLabel.setText("Wet Bulb:");
    wetBulbTempPanel.add(wetBulbTempLabel);
    wetBulbTempPanel.add(wetBulbTempField);
    wetBulbTempPanel.add(unknownWetBulbButton);
    textFieldPanel.add(wetBulbTempPanel);

    waterInTempLabel.setFont(new Font("Arial", Font.BOLD, 12));
    waterInTempLabel.setText("Water In:");
    waterInTempPanel.add(waterInTempLabel);
    waterInTempPanel.add(waterInTempField);
    textFieldPanel.add(waterInTempPanel);

    waterOutTempLabel.setFont(new Font("Arial", Font.BOLD, 12));
    waterOutTempLabel.setText("Water Out:");
    waterOutTempPanel.add(waterOutTempLabel);
    waterOutTempPanel.add(waterOutTempField);
    textFieldPanel.add(waterOutTempPanel);

    add(textFieldPanel, BorderLayout.CENTER);

    buttonPanel.add(submitButton);
    buttonPanel.add(clearButton);
    buttonPanel.add(findButton);

    add(buttonPanel, BorderLayout.SOUTH); 

    testPanel.add(testLabel);
    testPanel.add(testCalculationsLabel);
    add(testPanel, BorderLayout.NORTH);
  }

  public CoolingTowerFrame(String stringWetBulb)
  {
    super("Cooling Tower Selection Program");
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension dimensions = toolkit.getScreenSize();
    int x = (dimensions.width - 315)/2; 
    int y = (dimensions.height - 250)/2;
    setBounds(x, y, 315, 250); 
    setVisible(true);
    setResizable(false);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    wetBulbTempField.setText(stringWetBulb);
    wetBulbTempField.setEditable(false);

    submitButton.addActionListener(new ButtonListener());
    clearButton.addActionListener(new ButtonListener());
    unknownWetBulbButton.addActionListener(new ButtonListener());
    findButton.addActionListener(new ButtonListener());

    flowRateLabel.setFont(new Font("Arial", Font.BOLD, 12));
    flowRateLabel.setText("Flow Rate (GPM):");
    flowRatePanel.add(flowRateLabel);
    flowRatePanel.add(flowRateField);
    textFieldPanel.add(flowRatePanel);

    wetBulbTempLabel.setFont(new Font("Arial", Font.BOLD, 12));
    wetBulbTempLabel.setText("Wet Bulb:");
    wetBulbTempPanel.add(wetBulbTempLabel);
    wetBulbTempPanel.add(wetBulbTempField);
    wetBulbTempPanel.add(unknownWetBulbButton);
    textFieldPanel.add(wetBulbTempPanel);

    waterInTempLabel.setFont(new Font("Arial", Font.BOLD, 12));
    waterInTempLabel.setText("Water In:");
    waterInTempPanel.add(waterInTempLabel);
    waterInTempPanel.add(waterInTempField);
    textFieldPanel.add(waterInTempPanel);

    waterOutTempLabel.setFont(new Font("Arial", Font.BOLD, 12));
    waterOutTempLabel.setText("Water Out:");
    waterOutTempPanel.add(waterOutTempLabel);
    waterOutTempPanel.add(waterOutTempField);
    textFieldPanel.add(waterOutTempPanel);

    add(textFieldPanel, BorderLayout.CENTER);

    buttonPanel.add(submitButton);
    buttonPanel.add(clearButton);
    buttonPanel.add(findButton);

    add(buttonPanel, BorderLayout.SOUTH); 

    testPanel.add(testLabel);
    testPanel.add(testCalculationsLabel);
    add(testPanel, BorderLayout.NORTH);
  }

  private class ButtonListener implements ActionListener
  {
    public void actionPerformed(ActionEvent e)
    {
      if (e.getSource() == submitButton)
      {
        try
        {
          flowRate = Integer.parseInt(flowRateField.getText());
          wetBulbTemp = Integer.parseInt(wetBulbTempField.getText());
          int waterInTemp = Integer.parseInt(waterInTempField.getText());
          int waterOutTemp = Integer.parseInt(waterOutTempField.getText());

          testLabel.setText("");

          double coolingTons = calculateCoolingTons(flowRate, waterInTemp, waterOutTemp);
          Double roundedTemp = new Double(coolingTons);
          roundedTemp = Math.rint(roundedTemp);
          roundCoolingTons = roundedTemp.intValue();
          approach = calculateApproach(waterOutTemp, wetBulbTemp);
          range = calculateRange(waterInTemp, waterOutTemp);

          testCalculationsLabel.setText("Cooling Tons: " + roundCoolingTons + " Approach: " + approach + " Range: " + range);
        }
        catch(NumberFormatException ex)
        {
          testLabel.setText("Improper Imput");
          testCalculationsLabel.setText("Unable to perform calculations");
        }
      }
      else if (e.getSource() == findButton)
      {
        if ((roundCoolingTons == 0) && (approach == 0) && (range == 0))
        {
          testLabel.setText("Please Fill in Text Fields to Find Unit");
        }
        else
        {
          JFrame selectUnit = new WetBulbChart(flowRate, wetBulbTemp, roundCoolingTons, approach, range);
        }
      }
      else if (e.getSource() == clearButton)
      {
        testLabel.setText("All Temperatures in (deg)F");
        flowRateField.setText("");
        wetBulbTempField.setText("");
        wetBulbTempField.setEditable(true);
        waterInTempField.setText("");
        waterOutTempField.setText("");
        testCalculationsLabel.setText("");
      }
      else
      {
        JFrame wbf1 = new WetBulbByLocationFrame1();
      }
    }
  }

  public static double calculateCoolingTons(int flowrate, int waterin, int waterout)
  {
    int differential = (waterin - waterout);
    double tons = ((differential*flowrate)/30.00);
    tons = Math.rint(tons);
    return tons;
  }

  public static int calculateApproach(int waterout, int wetbulb)
  {
    int approach = (waterout - wetbulb);
    return approach;
  }

  public static int calculateRange(int waterin, int waterout)
  {
    int range = (waterin - waterout);
    return range;
  }

  public static void main(String []args)
  {
    JFrame frame = new CoolingTowerFrame("Cooling Tower Selection Program", 315, 250);
    frame.setVisible(true);
    frame.setResizable(false);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  }
} 
```

这是我按下运行后的错误截图： ![在此处输入图像描述](../Images/342d099d586a278819bb04afba631efe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:16:37.790

问题出在我不完全理解的 drjava 上。我敢打赌，如果您在控制台中输入“运行 CoolingTowerFrame”，它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-11T20:27:17.777

我也遇到过这个错误。快把我逼疯了。我会在 DrJava 中建立一个项目，其中包含一个以我的游戏名称命名的文件夹，其中包含两个文件夹：***src***和***class***。我将 Game.class 文件设置为错误的主类。一旦我更正了项目属性 - 将主类更改为 Game.java，错误就消失了。

# webforms - iPhone密码表（简单）

> ID：11318905
> 
> 赞同：1
> 
> 时间：2012-07-03T20:45:49.990
> 
> 标签：webforms

我正在尝试在移动互联网上创建一个网络表单。我一切正常，但对如何创建单个密码登录表单感到困惑。

示例：您单击一个链接，它将引导您进入仅密码登录。密码不必存储在数据库中，它只是要求输入密码，然后当您输入正确的密码时，它会将您定向到下载的网站，如果输入错误，则会显示弹出错误提示错误密码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:40:44.863

.htaccess 和 .htpasswd 文件有一个简单的方法。我在我的网站上尝试过，访问[ph3nx.com/test](http://ph3nx.com/test)（使用**用户名**：“test”和**密码**：“1234”登录）它只是我网站空间上的一个目录，我在其中放置了一个包含“正确”的 index.htm 和这两个文件：

*.htaccess*

```
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile /var/www/test/.htpasswd 
AuthGroupFile /dev/null 
<Files index.htm>
require valid-user
</Files> 
```

*.htpasswd*

```
test:zYghPID4qWkpI 
```

它适用于 iPhone 和计算机，非常简单 :) 在这里您可以创建这些文件：[tools.dynamicdrive.com/password](http://www.tools.dynamicdrive.com/password/) 我希望这对您有所帮助；)

# android - android小部件使用服务获取数据，一次不能使用多个

> ID：11318906
> 
> 赞同：0
> 
> 时间：2012-07-03T20:45:50.700
> 
> 标签：android, service, widget

我的小部件每 3 分钟从 Internet 获取一次数据，其中一些直接显示在小部件上，而另一些则存储在 SharedPreferences 中，因此当用户点击小部件时，信息会显示为对话框。当运行多个小部件时，无论我单击哪个小部件，日志都会显示 appWidgetId**始终来自其中一个**

我的问题似乎是我声明小部件的 setOnClickPendingIntent() 的方式。我在服务内部执行此操作，就在获取数据之前，并且由于每个（小部件）AlarmManager 都运行相同的服务，因此每个小部件都从上次运行的服务中获取 PendingIntent。

```
public class WidgetService extends Service
{
@Override
    public void onStart(Intent intent, int startId) 
    {
          Intent intentUmbrales = new Intent(context, LaunchUmbralesDialog.class);
          intentUmbrales.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
          PendingIntent pendingIntentUmbrales = PendingIntent.getActivity(context,0,intentUmbrales,0);

          // Get the layout for the App Widget and attach an on-click listener to the button
          RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

        //  views.setOnClickPendingIntent(R.id.energia_widget, pendingIntentImei);
          views.setOnClickPendingIntent(R.id.imageLogo_widget, pendingIntentUmbrales);
        //..then I fetch data, store the rest in SharedPreferences and update widget remoteViews
    }
} 
```

我怎样才能避免这种情况？如何为每个小部件制作一个单独的“按钮”并让它们重叠？另请注意，我已经尝试在 AppWidgetProvider 的 onUpdate() 方法中声明这些 PendingIntents（在该方法给出的数组中每个 appWidgetId 的循环内）

提前致谢！

问候，罗德里戈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:56:46.993

声明 .setOnClickPendingIntent() 时首先添加到 Intent

```
Uri data = Uri.withAppendedPath(
                    Uri.parse(URI_SCHEME + "://widget/id/")
                    ,String.valueOf(appWidgetId));
                intent.setData(data); 
```

这样每个小部件都会获得一个唯一的 ID，并且不会弄乱！

# jquery - Jquery如何在同一个div中设置输入的值

> ID：11318908
> 
> 赞同：0
> 
> 时间：2012-07-03T20:46:04.063
> 
> 标签：jquery

我正在尝试将输入的值设置为单击的列表项的值。它们都存在于 class = container 的同一个 div 中

jQuery

```
$('li').click(function(){

    /* Somehow set the value of the input that is within the same div 
    with class equal container to the data-personguid on this li. */

}); 
```

HTML

```
<div class="container">
    <div>
        <ul>
            <li data-personguid="3" />
            </li>
        </ul>
    </div>
    <input type="hidden" class="personguid" id="thirdinput" />
</div>

<div class="container">
    <div>
        <ul>
            <li data-personguid="4" />
            </li>
        </ul>
    </div>
    <input type="hidden" class="personguid" id="fourthinput />
</div> 
```

因此，如果单击了 data-personguid = 3 的 li，我希望输入 id = thirdinput 将其值设置为 3。

同样，如果单击 data-personguid = 4 的 li，我希望输入 id = Fourthinput 将其值设置为 4。

所以我想我会尝试做的是找到类 personguid 的输入，它在同一个 div 中，class = container 作为单击的列表项，并设置它的值。

目前不确定如何执行此操作。

jquery 需要是通用的，因此每个容器块使用相同的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:52:37.177

```
$('li').on('click', function(){
    $(this).closest('.container').find('.personguid').val($(this).data('personguid'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:50:34.237

如果您只是将数字附加到您的 id 会更容易，这样您就不必对每个数字进行硬编码

```
$('li').click(function(){
    var x = $(this).data('personguid');
    $('#input'+ x).val(x);
}); 
```

所以你的输入将是 id=input1, id=input2, id=input3 等

# c# - 从 ViewModel 打开 Image 上的动画

> ID：11318909
> 
> 赞同：0
> 
> 时间：2012-07-03T20:46:05.343
> 
> 标签：c#, wpf, xaml, animation, mvvm

在我从这里获得的要运行的图像上的动画之后：[在按钮中设置动画图像](https://stackoverflow.com/questions/11093302/how-to-animate-an-image-in-a-button-to-shake-every-30-seconds-in-wpf?lq=1) 我希望能够打开和关闭动画，具体取决于从外部单击按钮，即来自 ViewModel

所以我向 Bahavior 添加了一个新的 DependencyProperty（这里需要的所有东西）

```
 public static readonly DependencyProperty IsShakingProperty =
        DependencyProperty.Register(IsShakingName,
                                    typeof(bool),
                                    typeof(ShakeBehavior),
                                    new PropertyMetadata(DefaultIsShaking)); 
```

我在 ViewModel 中添加了一个新的公共属性

```
public bool IsShaking { get; set; } 
```

但是，根据 ViewModel 属性设置为 true 还是 false，我可以做些什么来打开和关闭动画？（我想控制按钮点击动画）

这是我认为相关的一些代码

```
private Timeline CreateAnimationTimeline()
{
    DoubleAnimationUsingKeyFrames animation = new DoubleAnimationUsingKeyFrames();

    animation.SetValue(Storyboard.TargetPropertyProperty, new PropertyPath("(0).(1)", UIElement.RenderTransformProperty, RotateTransform.AngleProperty));

    int keyFrameCount = 8;
    double timeOffsetInSeconds = 0.25;
    double totalAnimationLength = keyFrameCount * timeOffsetInSeconds;
    double repeatInterval = RepeatInterval;
    bool isShaking = IsShaking;

    // Can't be less than zero and pointless to be less than total length
    if (repeatInterval < totalAnimationLength)
        repeatInterval = totalAnimationLength;

    animation.Duration = new Duration(TimeSpan.FromSeconds(repeatInterval));

    int targetValue = 12;
    for (int i = 0; i < keyFrameCount; i++)
        animation.KeyFrames.Add(new LinearDoubleKeyFrame(i % 2 == 0 ? targetValue : -targetValue, KeyTime.FromTimeSpan(TimeSpan.FromSeconds(i * timeOffsetInSeconds))));

    animation.KeyFrames.Add(new LinearDoubleKeyFrame(0, KeyTime.FromTimeSpan(TimeSpan.FromSeconds(totalAnimationLength))));
    return animation;
} 
```

这是我的 XAML 的一部分：

```
<ListBox.ItemTemplate>
                <DataTemplate>
                    <Button Focusable="False" Command="{Binding ClickToolCommand}" Grid.Row="{Binding Path=Row}" Grid.Column="{Binding Path=Col}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
                        <Image Source="myImage.png" Grid.Row="{Binding Path=Row}" Grid.Column="{Binding Path=Col}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
                            <i:Interaction.Behaviors>
                                <local:ShakeBehavior RepeatInterval="1" SpeedRatio="3.0" IsShaking="{Binding Path=IsShaking}"/>
                            </i:Interaction.Behaviors>

                        </Image>
                    </Button>
                </DataTemplate>
            </ListBox.ItemTemplate> 
```

正如其他 SO 中所指出的，也许 DataTrigger 可以提供帮助，但我的 XAML 中没有情节提要，因为我有一个自定义`Behavior`

任何输入高度赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T23:44:05.687

首先，让我重复一下我在开始这件事的原始[帖子中所说的话。](https://stackoverflow.com/questions/11093302/how-to-animate-an-image-in-a-button-to-shake-every-30-seconds-in-wpf)如果您只使用自定义控件，则制作“摇晃”的图像按钮会变得简单得多。此外，使用摇摇欲坠的图像按钮作为“吸引用户注意力的一种方式”是一个可怕的想法，让我想起了 1990 年的网站设计。此外，您复制的实现中存在一个小缺陷，在创建的触发器上没有退出操作。无论如何，这里是如何做你需要的：

如下创建附加属性：

```
 public static bool GetStopAnimating(DependencyObject obj)
        {
            return (bool)obj.GetValue(StopAnimatingProperty);
        }

        public static void SetStopAnimating(DependencyObject obj, bool value)
        {
            obj.SetValue(StopAnimatingProperty, value);
        }

        // Using a DependencyProperty as the backing store for StopAnimating.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty StopAnimatingProperty =
            DependencyProperty.RegisterAttached("StopAnimating", typeof(bool), typeof(ShakeBehavior), new UIPropertyMetadata(true)); 
```

然后将现有的“OnAttach”方法替换为以下内容：

```
 private BeginStoryboard _beginStoryBoard;
        private RemoveStoryboard _removeStoryboard;

        protected override void OnAttached()
        {
            _orignalStyle = AssociatedObject.Style;

            _beginStoryBoard = new BeginStoryboard { Storyboard = CreateStoryboard() };
            _beginStoryBoard.Name = "terribleUi";
            _removeStoryboard = new RemoveStoryboard();
            _removeStoryboard.BeginStoryboardName = _beginStoryBoard.Name; 

            AssociatedObject.Style = CreateShakeStyle();

            AssociatedObject.Style.RegisterName("terribleUi", _beginStoryBoard);
        } 
```

然后，不要根据按钮的可见性来使用摇动触发器，而是将其更改为使用您的附加属性：

```
 private Trigger CreateTrigger()
        {
            Trigger trigger = new Trigger
            {
                Property = StopAnimatingProperty,
                Value = false,
            };

            trigger.EnterActions.Add(_beginStoryBoard);

            trigger.ExitActions.Add(_removeStoryboard);

            return trigger;
        } 
```

然后按如下方式使用它：

```
<Button Height="50" Width="150" >
        <StackPanel>
            <Image Source="\Untitled.png" local:ShakeBehavior.StopAnimating="{Binding YourPropertyToStopTheShaking}">
                <i:Interaction.Behaviors>
                        <local:ShakeBehavior RepeatInterval="5.0" SpeedRatio="3.0"  />
                </i:Interaction.Behaviors>
            </Image>

        </StackPanel>
    </Button> 
```

# android - 如何删除动态膨胀的视图？

> ID：11318912
> 
> 赞同：2
> 
> 时间：2012-07-03T20:46:12.773
> 
> 标签：android

在我想开发的一个简单的纸牌游戏中，我有三个按钮：button1、button2 和 button3。button1 在一个表格行中创建两个图像视图并显示图像。当 button2 和/或 button3 被点击时，它会通过布局充气器在 tablerow 上动态添加 imageview。游戏结束后，我希望用户单击 button1 并重新开始。我能够做到这一点，但问题是，以前通过单击 button2 和 button3 显示的图像视图也会显示。我希望在单击 button1 时将它们删除。如何在单击 button1 时删除它们？请帮我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T20:49:29.883

就像您添加视图一样，您可以删除它们。只需调用`removeViewAt(int index)`或`removeView(View view)`在父容器上删除您想要的视图。

或者，如果您预见到重用它们，您可以将它们的可见性设置为`GONE`. 然后，您可以将它们带回来，而无需再次膨胀它们。

如果您让充气器自动将充气的图像视图附加到父级，那么您必须跟踪添加的视图的位置。您可以`getChildCount`在膨胀之前在父级上使用以查找将要添加的下一个视图的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:50:05.887

你可以使用[ViewGroup.removeView(View v);](http://developer.android.com/reference/android/view/ViewGroup.html#removeView%28android.view.View%29)

像这样的东西：

```
tblRow.removeView(button2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-31T11:25:13.407

这是我如何添加然后在 5 秒后删除视图（在另一个上下文中）

```
 final LinearLayout linearLayout = context.getResources().getLayout(R.layout.activity_main)
  LayoutInflater inflater = LayoutInflater.from(linearLayout.getContext());
  final View details = inflater.inflate(R.layout.extra_details, linearLayout, false);
  linearLayout.addView(details);

  new Handler().postDelayed(new Runnable() {
                @Override
                public void run() {
                    if (linearLayout.findViewById(R.id.extra_details) != null){
                        linearLayout.removeView(details);
                    }
                }
            }, 5000); 
```

同样的使用场景是在 onClickListener 的上下文中。在此处查看更多信息[https://www.bignerdranch.com/blog/understanding-androids-layoutinflater-inflate/](https://www.bignerdranch.com/blog/understanding-androids-layoutinflater-inflate/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-12T12:42:04.530

//添加视图

```
LayoutInflater inflater = (LayoutInflater)this.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
final View buttons = inflater.inflate(R.layout.activity, null );
addContentView(buttons, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

//移除视图

```
((ViewManager)buttons.getParent()).removeView(buttons); 
```

# image - Magento - 如何检索捆绑的选项图像

> ID：11318915
> 
> 赞同：6
> 
> 时间：2012-07-03T20:46:28.757
> 
> 标签：image, magento, options

我一直在进行我的第一个 magento 部署。建立了一个非常定制的主题......现在处理一些非标准的定制：

我的主要产品类型之一是我将其设置为捆绑产品的办公椅。这种产品类型有很多选项（大约 100 种面料选项、手臂样式、腰部、头枕等），我需要能够在目录/产品/视图页面上显示每个选项的图像。

作为捆绑产品（我将避免讨论这是否是正确的产品类型 - 我们在可配置和捆绑之间进行了辩论） - 每个产品都由许多简单的产品组装而成（作为选项） . 这些简单的产品可以上传图片，我已经这样做了。**我现在想从媒体文件夹中检索网址...**

经过一番狩猎 - 这些似乎是基本要素：

**主题/../template/catalog/product/view/options.phtml**

```
<?php $_options = Mage::helper('core')->decorateArray($this->getOptions()) ?>
<dl>
    <?php foreach($_options as $_option): ?>
        <?php echo $this->getOptionHtml($_option) ?>
    <?php endforeach; ?>
</dl> 
```

**主题/../template/bundle/catalog/product/view/type/bundle/option/select.phtml**

```
<?php /* @var $this Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Select */ ?>
<?php $_option      = $this->getOption(); ?>
<?php $_selections  = $_option->getSelections(); ?> 
```

我终于找到**`getSelections()`**了：

```
class Mage_Bundle_Model_Resource_Price_Index extends Mage_Core_Model_Resource_Db_Abstract
{ ...

    /**
        * Retrieve bundle options with selections and prices by product
       *
        * @param int $productId
        * @return array
        */
       public function getSelections($productId)
       {
           $options = array();
           $read = $this->_getReadAdapter();
           $select = $read->select()
               ->from(
                   array('option_table' => $this->getTable('bundle/option')),
                   array('option_id', 'required', 'type')
               )
               ->join(
                   array('selection_table' => $this->getTable('bundle/selection')),
                   'selection_table.option_id=option_table.option_id',
                   array('selection_id', 'product_id', 'selection_price_type',
                       'selection_price_value', 'selection_qty', 'selection_can_change_qty')
               )
               ->join(
                   array('e' => $this->getTable('catalog/product')),
                   'e.entity_id=selection_table.product_id AND e.required_options=0',
                   array()
               )
               ->where('option_table.parent_id=:product_id');

           $query = $read->query($select, array('product_id' => $productId));
           while ($row = $query->fetch()) {
               if (!isset($options[$row['option_id']])) {
                   $options[$row['option_id']] = array(
                       'option_id'     => $row['option_id'],
                       'required'      => $row['required'],
                       'type'          => $row['type'],
                       'selections'    => array()
                   );
               }
               $options[$row['option_id']]['selections'][$row['selection_id']] = array(
                   'selection_id'      => $row['selection_id'],
                   'product_id'        => $row['product_id'],
                   'price_type'        => $row['selection_price_type'],
                   'price_value'       => $row['selection_price_value'],
                   'qty'               => $row['selection_qty'],
                   'can_change_qty'    => $row['selection_can_change_qty']
               );
           }

           return $options;
       } 
```

所以我们用 , 等返回一个数组`selection_id`...`product_id`但`price_type`没有任何内容涉及该选择的图像 url...

鉴于：

```
class Mage_Catalog_Helper_Product extends Mage_Core_Helper_Url
{ ...
public function getImageUrl($product)
        {
            $url = false;
            if (!$product->getImage()) {
                $url = Mage::getDesign()->getSkinUrl('images/no_image.jpg');
            }
            elseif ($attribute = $product->getResource()->getAttribute('image')) {
               $url = $attribute->getFrontend()->getUrl($product);
           }
           return $url;
       } 
```

我正在尝试使用对每个选择的图像 url 的引用构建一个 js 对象，就像在**theme/../template/bundle/catalog/product/view/type/bundle/option/select.phtml**

```
var option_set_<?php echo $_option->getId() ?> = {};
<?php foreach ($_selections as $_selection): ?>
    option_set_<?php echo $_option->getId() ?>._<?php echo $_selection->getSelectionId() ?> = '<?php echo $_selection->getImageUrl(); ?>';
<?php endforeach; ?> 
```

但`$_selection`显然没有正确输入，因为它只是让我跳到占位符图形。

假设这些选项可以输入为 Product （或者以某种方式从**selection_id**获取简单的产品，似乎这样的东西可以工作。我不确定这是否正是我想要管理此功能的方式，但如果我可以获取一堆网址 - 然后我会做生意

奇怪的是，互联网基本上对这个话题保持沉默。显然没有人需要为他们的产品选项显示图像（或者，唯一的解决方案是付费扩展 - 这将是最后的手段）。

我该如何解决这个问题？

耶稣踢踏舞基督。法师能再复杂点吗？

* * *

**更新**

让它这样工作：

```
<?php echo $this->helper('catalog/image')->init($_selection, 'small_image')->resize(40,40); ?> 
```

如果有人需要此修复，我选择的答案也可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T21:40:36.430

$_selections 中的 product_id 表示选择的简单产品的 id。所以要做的就是：

1.  取 $_selections 的 product_id，
2.  按此 product_id 加载产品
3.  将生成的产品对象提供给 Mage_Catalog_Helper_Product::getImageUrl。

# c# - .Net 中 DAL 的强类型数据集的优缺点

> ID：11318916
> 
> 赞同：3
> 
> 时间：2012-07-03T20:46:31.480
> 
> 标签：c#, orm, poco, data-access-layer, strongly-typed-dataset

我目前正在使用一个使用.Net 的强类型数据集继承了 DAL 的系统。在此之前我从未与他们合作过，但我发现我对使用它们有强烈的反感。与基于 POCO 的 DAL 相比，它们似乎笨重、难以管理，并且生成的对象与特定于数据库的问题高度耦合（例如，从表和行访问对象、通过键值获取所需数据等） DAL 的全部目的不是将其从逻辑层中抽象出来吗？）。

已经有一些关于重写和/或重构数据库层部分的讨论。我个人希望看到这些数据集被删除，但我很难说服一些习惯使用它们的同事。

使用强类型数据集与基于 POCO 的 DAL 有哪些优缺点？我是否有理由厌恶强类型数据集，或者社区一致认为它们不是问题？我还缺少其他解决方案吗？

虽然我也同意使用像 NHibernate 这样的 ORM 框架有很多好处，但我认为这种复杂性的库对我的同事来说很难卖。如果有人可以为这个方向提供足够令人信服的论据，我想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:05:49.797

强类型数据集是一种基于设计器的数据库访问方法的简单方法。它们可以从数据库中生成，并且相当容易更新。它们还具有强制执行数据类型的好处。

您可以将它们视为具有 DataSet、DataTables 和 DataAdapter 的原始 ADO.NET 与实体框架之间的过渡阶段。我会尝试向您的同事展示使用设计器和数据库优先代码生成的实体框架，以替代当前方法。这应该是一种熟悉的模式，可以让他们更轻松地过渡。改造现有代码的额外工作量也应该是最少的。

您可以使用该介绍来提高他们的舒适度，然后开始在新项目中引入 POCO、Linq 和关注点分离。请记住，通常，变化的速度越快（和/或工作量越大），阻力就越大。如果你能以一口大小的形式展示新的方法论并作为概念的安全证明，你会得到更好的接受。变化就是风险，因此管理由于未知因素导致的认知和潜在的工作扩展很重要。

# jquery-ui - 如何以编程方式开始拖动可排序项目

> ID：11318919
> 
> 赞同：1
> 
> 时间：2012-07-03T20:46:37.943
> 
> 标签：jquery-ui, jquery-ui-sortable

这是情况

我有一些项目/元素，并使用 jQuery UI/sortable 使它们可排序。我正在使用一个手柄来启动拖动。

现在我想让手柄在要拖动的项目之外。根据文档，句柄必须是要拖动的元素的后代。

问题是：

是否可以将手柄放在物品外面？有什么好的解决方法吗？

一种想法是以编程方式启动拖动，但我不知道从哪里开始。

之前在 jQuery UI 跟踪器中已经提出过这个问题，但目前还不清楚计划是什么。 [http://bugs.jqueryui.com/ticket/3022](http://bugs.jqueryui.com/ticket/3022)

# android - 自定义 ExpandableListView 中的可点击视图

> ID：11318920
> 
> 赞同：0
> 
> 时间：2012-07-03T20:46:39.680
> 
> 标签：android, xamarin.android

transferAvailPowered.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:focusable="false"
android:layout_margin="5dp"
android:padding="5dp"
android:gravity="left">
<TextView
    android:id="@+id/availSerial"
    android:layout_width="0dp"
    android:layout_weight=".30"
    android:layout_height="wrap_content"
    android:layout_marginLeft="45dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp"
    android:focusable="false"
    android:padding="5dp"
    android:gravity="left" />
<TextView
    android:id="@+id/availModel"
    android:layout_width="0dp"
    android:layout_weight=".30"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:focusable="false"
    android:padding="5dp"
    android:gravity="left" />
<AutoCompleteTextView
    android:id="@+id/availSite"
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:hint="To Site"
    android:background="@android:color/white"
    android:textColor="@android:color/black"
    android:textCursorDrawable="@null"
    android:focusable="false"
    android:layout_margin="5dp"
    android:gravity="left" />
<ImageButton
    android:id="@+id/addToTransfer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:layout_margin="5dp"
    android:background="@drawable/addsmall"
    android:focusable="false"
    android:gravity="left" /> 
```

transferAvailAttached.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:focusable="false"
android:layout_margin="5dp"
android:padding="5dp">
<TextView
    android:id="@+id/availSerial"
    android:layout_width="0dp"
    android:layout_weight=".30"
    android:focusable="false"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:padding="5dp"
    android:gravity="right" />
<TextView
    android:id="@+id/availModel"
    android:layout_width="0dp"
    android:layout_weight=".30"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:layout_margin="5dp"
    android:padding="5dp"
    android:gravity="center" />
<CheckBox
    android:id="@+id/include"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="left|center_vertical"
    android:focusable="false"
    android:layout_marginRight="30dp"
    android:background="@drawable/bg_checkbox" />
<ImageButton
    android:id="@+id/removeAttachment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:padding="5dp"
    android:layout_margin="5dp"
    android:background="@drawable/deletesmall"
    android:gravity="right" /> 
```

适配器

```
class EquipAdapter : BaseExpandableListAdapter
{
    private List<CPEquipment> Parent { get; set; }
    private List<List<CPEquipment>> Child { get; set; }
    private Context _context { get; set; }
    private IListAdapter _adapter { get; set; }
    private ExpandableListView _list { get; set; }

    public EquipAdapter(Context context, List<CPEquipment> parent, List<List<CPEquipment>> child, IListAdapter adapter, ExpandableListView list)
    {
        _context = context;
        Parent = parent;
        Child = child;
        _adapter = adapter;
        _list = list;
    }

    public override Java.Lang.Object GetChild(int groupPosition, int childPosition)
    {
        List<CPEquipment> level1 = Child.ElementAt(groupPosition);
        CPEquipment level2 = level1.ElementAt(childPosition);
        E e = new E() {Serial = level2.Serial, Model = level2.Model};
        return e;
    }

    public override long GetChildId(int groupPosition, int childPosition)
    {
        return Convert.ToInt32(groupPosition.ToString(CultureInfo.InvariantCulture) + childPosition.ToString(CultureInfo.InvariantCulture));
    }

    public override int GetChildrenCount(int groupPosition)
    {
        return Child.ElementAt(groupPosition).Count;
    }

    public override View GetChildView(int groupPosition, int childPosition, bool isLastChild, View convertView, ViewGroup parent)
    {
        if (convertView == null)
        {
            LayoutInflater inflater = (LayoutInflater)_context.GetSystemService(Context.LayoutInflaterService);
            convertView = inflater.Inflate(Resource.Layout.transferAvailAttached, null);
        }

        E e = (E)GetChild(groupPosition, childPosition);
        TextView serial = (TextView)convertView.FindViewById(Resource.Id.availSerial);
        serial.Text = e.Serial;
        TextView model = (TextView)convertView.FindViewById(Resource.Id.availModel);
        model.Text = e.Model;          

        return convertView;
    }

    public override Object GetGroup(int groupPosition)
    {
        CPEquipment c = Parent.ElementAt(groupPosition);
        E e = new E(){Serial = c.Serial, Model = c.Model, Type = c.Status}; 

        return e;
    }

    public override long GetGroupId(int groupPosition)
    {
        return groupPosition;
    }

    public override View GetGroupView(int groupPosition, bool isExpanded, View convertView, ViewGroup parent)
    {
        E e = (E)GetGroup(groupPosition);

        if (convertView == null)
        {
            LayoutInflater inflater = (LayoutInflater)_context.GetSystemService(Context.LayoutInflaterService);
                convertView = inflater.Inflate(Resource.Layout.transferAvailPowered, null);
     }

        TextView serial = (TextView)convertView.FindViewById(Resource.Id.availSerial);
        serial.Text = e.Serial;
        TextView model = (TextView)convertView.FindViewById(Resource.Id.availModel);
        model.Text = e.Model;
        AutoCompleteTextView acText = (AutoCompleteTextView)convertView.FindViewById(Resource.Id.availSite);
        acText.Adapter = _adapter;

        _list.ExpandGroup(groupPosition);

        return convertView;
    }

    public override bool IsChildSelectable(int groupPosition, int childPosition)
    {
        return true;
    }

    public override int GroupCount
    {
        get { return Parent.Count; }
    }

    public override bool HasStableIds
    {
        get { return true; }
    }

} 
```

结果：

![在此处输入图像描述](../Images/81d3e9e819dff49334b0c83d4e8f3a00.png)

在这种情况下，父组中的 AutoCompleteTextView 和绿色加号按钮应该是“可选择的”，以便用户可以在字段中输入信息并单击该按钮而不会折叠组。并且子项中的 CheckBox 和红色 x 按钮也应该是“可选择的”，以便用户可以选中 CheckBox 并单击按钮。唯一真正起作用的部分是 CheckBox 是可选的并且组不会折叠，因为由于缺少更好的术语，组布局是“死的”并且在按下时什么也不做。看似“工作”的 CheckBox 甚至不是这样，因为它做了一件奇怪的事情，选中或取消选中一个会随机选中或取消选中另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:36:24.470

下面的代码是为了解决复选框问题“CheckBox 甚至不是这样，因为它做了一件奇怪的事情，选中或取消选中一个会随机选中或取消选中其他人。” 连同 ImageButton 和 CheckBox 处理。

```
public override View GetChildView(final int groupPosition, int childPosition, bool isLastChild, View convertView, ViewGroup parent)
{
    LayoutInflater inflater = (LayoutInflater)_context.GetSystemService(Context.LayoutInflaterService);
    convertView = inflater.Inflate(Resource.Layout.transferAvailAttached, null);

    E e = (E)GetChild(groupPosition, childPosition);
    TextView serial = (TextView)convertView.FindViewById(Resource.Id.availSerial);
    serial.Text = e.Serial;
    TextView model = (TextView)convertView.FindViewById(Resource.Id.availModel);
    model.Text = e.Model;     

    CheckBox include = (CheckBox)convertView.FindViewById(Resource.Id.include); 

    include.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            //DO your checkbox handling here
        }
    });

    ImageButton removeAttachment =(CheckBox)convertView.FindViewById(Resource.Id. removeAttachment);  

    removeAttachment.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //DO your imageButton handling here
        }
    });

    return convertView;
}

public override View GetGroupView(final int groupPosition, bool isExpanded, View convertview, ViewGroup parent)
{
    View convertView = convertview;
    if (convertView == null) 
    {
        E e = (E)GetGroup(groupPosition);

        LayoutInflater inflater = (LayoutInflater)_context.GetSystemService(Context.LayoutInflaterService);
        convertView = inflater.Inflate(Resource.Layout.transferAvailPowered, null);
    }

    TextView serial = (TextView)convertView.FindViewById(Resource.Id.availSerial);
    serial.Text = e.Serial;
    TextView model = (TextView)convertView.FindViewById(Resource.Id.availModel);
    model.Text = e.Model;
    AutoCompleteTextView acText = (AutoCompleteTextView)convertView.FindViewById(Resource.Id.availSite);
    acText.Adapter = _adapter;

    ImageButton addToTransfer =(CheckBox)convertView.FindViewById(Resource.Id. addToTransfer);  

    addToTransfer.setOnClickListener(new OnClickListener() {                        
        public void onClick(View v) {
            // TODO Auto-generated method stub

            //DO your addToTransfer imageButton handling here

        }
    });

    _list.ExpandGroup(groupPosition);

    return convertView;
} 
```

# javascript - 茉莉花没有从'src'目录加载js文件

> ID：11318922
> 
> 赞同：3
> 
> 时间：2012-07-03T20:46:44.950
> 
> 标签：javascript, maven, jasmine

我已经成功构建了我的 maven 项目，该项目使用[jasmine-maven-plugin](https://github.com/searls/jasmine-maven-plugin)将源代码和测试 javascript 文件放在正确的位置。当我有一个简单的测试时，例如：

```
describe('true', function() {
    it('should be true', function() {
        expect(true).toBe(true);
    })
}) 
```

整个过程没有问题，所有的茉莉花规格都通过了。但是，当我尝试创建我在包含 target/jasmine/src 文件夹的文件之一中概述的对象的实例时，我收到“ReferenceError：“Stat”未定义”错误。

```
describe('stat test',function() {
    var stat = new Stat();

    it('get data',function() {
        stat.data = 13;
        expect(stat.getData()).toBe(13);
    });
}); 
```

js文件是否加载不正确？完全被这里难住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:04:34.367

茉莉花的设置是否正确？jasmine好像找不到你的js文件，这里有一个maven配置的例子：

```
<plugin>
        <groupId>com.github.searls</groupId>
        <artifactId>jasmine-maven-plugin</artifactId>
        <version>1.1.0</version>
        <executions>
            <execution>
                <goals>
                    <goal> test </goal>
                </goals>
            </execution>
         </executions>
         <configuration>
             <jsSrcDir> main/www/js </jsSrcDir>    <---HERE you define the source directory
             <haltOnFailure>false</haltOnFailure>
             <sourceIncludes>       <---- HERE you specifies which files you include into the test
                <include>libs/jquery-1.7.1.js</include>
                <include>libs/underscore.js</include>
                <include>**/*.js</include>
             </sourceIncludes>
             <sourceExcludes> <----- HERE you define the files that you exclude
                  <exclude>jsonresponses-mock.js</exclude>
                  <exclude>libs/jquery.mockjax.js</exclude>
             </sourceExcludes>
             <jsTestSrcDir> test/www/fakeJs </jsTestSrcDir> <---Define your Test source Dir
                   <haltOnFailure>true</haltOnFailure>
                   <browserVersion>FIREFOX_3</browserVersion>
                   <serverPort>8234</serverPort>
                   <specDirectoryName>specs</specDirectoryName>
         </configuration>
</plugin> 
```

在这个页面的底部： http: [//searls.github.com/jasmine-maven-plugin](http://searls.github.com/jasmine-maven-plugin)你有所有可能的标签。检查您的 pom 是否以正确的方式使用...希望它可以提供帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:10:51.783

在经历了很大的精神压力并且运气不佳之后，我只是修改了插件以忽略感知到的 javascript 错误，以便一切都可以编译。瞧，这一切都奏效了！脚本只是乱序添加。对于那些感兴趣的人，我在 TestMojo.java 的第 90 行添加了“client.setThrowExceptionOnScriptError(false)”，所以现在当标签设置为 false（默认）时，javascript 错误将被忽略。

# websphere - 安装 IBM websphere commerce developer 7.0.0.0 时的 APPCRASH

> ID：11318923
> 
> 赞同：0
> 
> 时间：2012-07-03T20:46:49.070
> 
> 标签：websphere, crash

我尝试在 windows server 2008 r2 标准中安装 IBM Websphere commerce developer 7.0.0.0，但由于以下错误，安装未完成：

问题签名：

问题事件名称：APPRCASH

应用程序名称：jar.exe

应用程序版本：6.0.0.0

申请时间戳：49a91e61

故障模块名称：hyprtshim24.dll

故障模块版本：2.4.0.9087

故障模块时间戳：4d51e7cd

异常代码：c0000005

异常偏移量：00002dfc

操作系统版本：6.1.7600.2.0.0.272.7

区域 ID：9226

附加信息 1：1ec0

附加信息 2：1ec0fd70d07d060e5bfcf53c69ad1739

附加信息 3：2c48

附加信息 4：2c48940de5e7d1cb2e131ad6a0ca2feb

在线阅读我们的隐私声明：http: [//go.microsoft.com/fwlink/ ?linkid=104288&clcid=0x0409](http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409)

如果在线隐私声明不可用，请离线阅读我们的隐私声明：C:\Windows\system32\en-US\erofflps.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:53:05.123

IBM 软件支持可以告诉您在软件安装中出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T10:47:44.917

安装 7.0.0-WS-WCServer-FP007.pak 并重新启动后，我遇到了类似的崩溃。

%PATH% 环境变量可能有问题：根据创建的 minidump，`java.exe`并`hyprtshim24.dll`驻留在不同的`jre`文件夹中：

```
C:\IBM\WebSphere\AppServer\java\bin\java.exe
C:\IBM\WebSphere\AppServer\java\jre\bin\j9vm\jvm.dll
C:\Program Files\IBM\WebSphere\UpdateInstallerWS\java\jre\bin\hyprtshim24.dll 
```

# jquery - jQuery scrollTo 提交

> ID：11318924
> 
> 赞同：0
> 
> 时间：2012-07-03T20:46:49.757
> 
> 标签：jquery, scrollto

所以经过数小时的插电之后，我仍然在摸索如何完成这个（非常简单的）任务。

在此页面上：[www.bassworx.com/matrix](http://www.bassworx.com/matrix)

我希望它在单击输入按钮上的提交时向下滚动到#results 区域。我已经尝试使用 scrollTo 和 JSlideto 来实现这一点，我觉得我应该能够用它们中的任何一个来做到这一点，因为这些例子是我非常想要发生的。

有人可以看看有问题的页面，并帮我解决这个问题吗？它开始真的让我头疼，我几乎可以肯定我只是缺少一些小的语法或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:00:32.627

我不知道这个`goToByScroll()`功能是从哪里来的，但对做它的人来说是道具。不完全确定这是你想要的，但它以我认为你想要的方式工作

[工作jsfiddle示例](http://jsfiddle.net/4uqFP/)

**HTML**

```
form
<input type="submit" id="go"/>
<p style="min-height:600px;"></p>
<div id="results">results</div>
<p style="min-height:300px;"></p> 
```

**JS**

```
$("#go").click(function (e) {
    goToByScroll("results");
    e.preventDefault();
});

function goToByScroll(id) {
                var toMe = $("#" + id)
                $("html,body").animate({ scrollTop: toMe.offset().top }, "slow");
                toMe.addClass("hightlightResult");
                setTimeout(function () {
                    toMe.removeClass("hightlightResult", 1500);
                }, 500);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:50:32.487

也许在它滚动之前尝试延迟（），因为内容必须在它可以滚动到任何地方之前加载。

# drupal - Apple 设备从 iCal 文件中获取错误的日期

> ID：11318926
> 
> 赞同：0
> 
> 时间：2012-07-03T20:46:53.160
> 
> 标签：drupal, icalendar

我正在通过[Drupal 日历模块](http://drupal.org/project/calendar)制作 iCal 事件。我可以毫无问题地将它导入到 Kubuntu 机器上的 Thunderbird 和 Korganizer。但在 Mac 和 iPhone 上，该事件无法正确识别。事件已导入，但用作开始日期的日期是 DTSTAMP 而不是 DTSTART。但是，来自另一个网站（Typo3）的几乎相同的 ics 文件可以正常工作。这是两个文件：

这个有效：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//TYPO3/NONSGML Calendar Base (cal) V1.3.2//EN
METHOD:PUBLISH
BEGIN:VEVENT
UID:www.example.com_4_46252
DTSTAMP:20120530T090015
DTSTART:20120723T170000Z
DTEND:20120723T170001Z
SUMMARY:The Title
DESCRIPTION:Here is the description.
LOCATION:Some location
ORGANIZER;CN=Name:MAILTO:email@example.com
END:VEVENT
END:VCALENDAR 
```

而这个没有：

```
BEGIN:VCALENDAR
VERSION:2.0
METHOD:PUBLISH
PRODID:-//Drupal iCal API//EN
BEGIN:VEVENT
UID:calendar.52399.field_date.0.0
SUMMARY:The Title
DTSTAMP:20120624T200438Z
DTSTART:20120723T170000Z
DTEND:20120723T170000Z
URL;VALUE=URI:http://example.com
LOCATION:Some location
DESCRIPTION:Here is the description.
END:VEVENT
END:VCALENDAR 
```

有什么提示可以找到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:26:56.443

我将您的 Drupal 创建的 ical 代码复制到一个新文件 test.ics 中，并在 Mac OS10.5 iCal 中打开它，它工作正常。

尝试这个：

通过终端在 VI 编辑器中打开文件，然后查找 ^M (ctrl-M) 字符。如果它们在那里，请尝试删除它们 (http://www.tech-recipes.com/rx/150/remove-m-characters-at-end-of-lines-in-vi/) 并重新打开文件。

# sockets - 关于网络套接字

> ID：11318932
> 
> 赞同：0
> 
> 时间：2012-07-03T20:47:15.427
> 
> 标签：sockets

我需要有一台服务器才能使用套接字吗？我可以直接将数据包发送到其他客户端并在主机都不是服务器的情况下接收它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:50:15.307

任何两台计算机都可以通信，但一台必须是服务器，另一台必须是客户端。他们可以互换角色，并且每个角色都可以相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:56:21.170

是的，你可以这样做。即使在同一台计算机上。只要确保他们使用相同的端口并且客户端尝试连接到 localhost。我定期使用这种技术来测试我的网络应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T22:09:53.943

套接字编程中客户端/服务器的区别并不像听起来那么具体。基本上它与两台机器的连接方式有关。

服务器使用`bind`、`listen`和`accept`来不断等待传入的连接。客户端必须知道服务器的 IP 地址。这就是 URL 和 DNS 存在的原因，以提供映射到服务器 IP 地址的易于记忆的名称。

一旦客户端`connect()`s 和`accept()`由服务器编辑，差异就差不多结束了。`send()`客户端和服务器都可以根据需要随时`recv()`读取字节，并且对数据没有限制。

任何计算机都可以是服务器。您可以将 386 笔记本电脑作为服务器，将全新的双 Xeon 机架机器作为客户端。

# android - 在 Android 上监听音量变化事件

> ID：11318933
> 
> 赞同：13
> 
> 时间：2012-07-03T20:47:17.513
> 
> 标签：android, event-handling, volume

有什么方法可以收听Android上的音量变化事件，而不仅仅是接管音量按钮？

我发现唯一可以工作的是[here](https://stackoverflow.com/questions/6896746/android-is-there-a-broadcast-action-for-volume-changes)，但它只有在音量控制消失后才能工作。

并非所有设备都有音量按钮，我需要在音量变化发生时立即捕捉它们，而不是在音量对话框消失后捕捉它们。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-05-25T15:27:17.893

更好的是，您可以`ContentObserver`按如下方式注册 a：

```
 getApplicationContext().getContentResolver().registerContentObserver(android.provider.Settings.System.CONTENT_URI, true, new ContentObserver(){...} ); 
```

您的 ContentObserver 可能如下所示：

```
public class SettingsContentObserver extends ContentObserver {
    private AudioManager audioManager;

    public SettingsContentObserver(Context context, Handler handler) {
        super(handler);
        audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
    }

    @Override
    public boolean deliverSelfNotifications() {
        return false;
    }

    @Override
    public void onChange(boolean selfChange) {
        int currentVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);

        Log.d(TAG, "Volume now " + currentVolume);
    }
} 
```

完成后：

```
getApplicationContext().getContentResolver().unregisterContentObserver(mContentObserver); 
```

不过需要注意的是 - 如果快速按下大量按钮，有时通知似乎会延迟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T09:44:33.780

好的，现在，我要做的是使用 onKeyDown 听音量按钮（并检查 KEYCODE_VOLUME_DOWN、KEYCODE_VOLUME_MUTE、KEYCODE_VOLUME_UP），并使用一个处理程序，我发布了一个新的可运行文件来检查音量级别。

另外，由于某些设备具有音量对话框，因此根据[此链接](https://stackoverflow.com/questions/6896746/android-is-there-a-broadcast-action-for-volume-changes)，我在它消失时添加了一个侦听器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-13T19:25:34.713

Use broadcast receiver VOLUME_CHANGED_ACTION then use AudioManager to obtain current volume.

```
<receiver android:name="VolumeChangeReceiver" >
    <intent-filter>
         <action android:name="android.media.VOLUME_CHANGED_ACTION" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:57:25.170

You can use : [registerMediaButtonEventReceiver](http://developer.android.com/reference/android/media/AudioManager.html#registerMediaButtonEventReceiver%28android.content.ComponentName%29) (ComponentName eventReceiver) which registers a component to be the sole receiver of MEDIA_BUTTON intents.

```
//  in your activity.
MediaButtonReceiver receiver = new MediaButtonReceiver();

// in onCreate put
registerMediaButtonEventReceiver(receiver); 

class MediaButtonReceiver implements BroadcastReceiver {
     void onReceive(Intent intent) {
          KeyEvent ke = (KeyEvent)intent.getExtra(Intent.EXTRA_KEY_EVENT); 
          if (ke .getKeyCode() == KeyEvent.KEYCODE_VOLUME_DOWN) {
            //action when volume goes down
          }
           if (ke .getKeyCode() == KeyEvent.KEYCODE_VOLUME_UP) {
              //action when volume goes up
          }
     } 
}

   //In both onStop and onPause put :
   unregisterMediaButtonEventReceiver(receiver); 
```

what we are doing here is defining a BroadcastReceiver that deals with ACTION_MEDIA_BUTTON. and use EXTRA_KEY_EVENT which is containing the key event that caused the broadcast to get what was pressed and act upon that.

# ms-access - 在asp中使用unionall或crosstab访问查询不起作用

> ID：11318934
> 
> 赞同：0
> 
> 时间：2012-07-03T20:47:23.600
> 
> 标签：ms-access, asp-classic, ms-access-2007

这是我拥有的示例访问查询（查询参考/名称 - 以上查询）

```
select column_date, sum(field1), sum(field2) from table
group by column_date
union all
select 'Total' as column_date, sum(field1), sum(field2) from table 
```

当我尝试在 asp 中使用以下代码访问浏览器中的 SQL 查询时，它只显示标题。

```
<html>
<body>
<%
set conn=Server.CreateObject("ADODB.Connection")
conn.open "odbcdatasourcename"
set rs = Server.CreateObject("ADODB.recordset")
sql="SELECT * from abovequery"
rs.Open sql, conn
%>
<table border="1" width="100%">
<tr>
<%for each x in rs.Fields
response.write("<th>" & x.name & "</th>")
next%>
</tr>
<%do until rs.EOF%>
<tr>
<%for each x in rs.Fields%>
   <td><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>
<%loop
rs.close
conn.close
%>
</table>
</body>
</html> 
```

请注意，当我将上述查询的输出复制到表中并使用相同的 asp 代码时，它可以正常工作。所以显然这是在 asp 中执行“UNION”查询的问题。我想知道是否有任何解决方案。当我尝试执行交叉表查询时也会发生同样的问题。

新：这是我现在尝试的

*   但它的最后一行总计未与其他主要数据行正确对齐。

这是我现在创建的示例访问查询

第一个查询 - query1

```
select column_date, sum(field1), sum(field2) from table
group by column_date 
```

第二个查询 - query2

```
select 'Total' as column_date, sum(field1), sum(field2) from table 
```

ASP代码

```
<html>
<body>
<%
set conn=Server.CreateObject("ADODB.Connection")
conn.open "odbcdatasourcename"
set rs = Server.CreateObject("ADODB.recordset")
sql="SELECT * from query1"
rs.Open sql, conn
%>
<table border="1" width="100%">
<tr>
<%for each x in rs.Fields
response.write("<th>" & x.name & "</th>")
next%>
</tr>
<%do until rs.EOF%>
<tr>
<%for each x in rs.Fields%>
   <td><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>
<%loop
rs.close
conn.close
%>
<%
set conn=Server.CreateObject("ADODB.Connection")
conn.open "odbcdatasourcename"
set rs = Server.CreateObject("ADODB.recordset")
sql="SELECT * from query2"
rs.Open sql, conn
%>
<table border="1" width="100%">

<%for each x in rs.Fields%>
   <td><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>
<%loop
rs.close
conn.close
%>
</table>
</body>
</html> 
```

这是我第三次尝试解决对齐问题

```
<html>
<body>
<%
set conn=Server.CreateObject("ADODB.Connection")
conn.open "odbcdatasourcename"
set rs = Server.CreateObject("ADODB.recordset")
sql="SELECT * from query1"
rs.Open sql, conn
%>
<table border="1" width="100%">
<tr>
<%for each x in rs.Fields
response.write("<th>" & x.name & "</th>")
next%>
</tr>
<%do until rs.EOF%>
<tr>
<%for each x in rs.Fields%>
   <td><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>

<%
set rs = Server.CreateObject("ADODB.recordset")
sql="SELECT * from query2"
rs.Open sql, conn
%>
<%for each x in rs.Fields%>
<td><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>
<%loop
rs.close
conn.close
%>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:07:40.540

您的描述听起来像记录集不包含任何记录。确认这一点。

```
<html>
<body>
<%
set conn=Server.CreateObject("ADODB.Connection")
conn.open "odbcdatasourcename"
set rs = Server.CreateObject("ADODB.recordset")
sql="SELECT * from abovequery"
rs.Open sql, conn, 3 ' adOpenStatic '
Response.Write("RecordCount: " & rs.RecordCount)
rs.close
conn.close
%>
</body>
</html> 
```

# whitespace - 没有空白的简单背景颜色 div

> ID：11318938
> 
> 赞同：0
> 
> 时间：2012-07-03T20:47:41.540
> 
> 标签：whitespace, css

尝试创建一个背景颜色为白色的内容框。它位于页眉 div 和页脚 div 之间，它们都是图像。我无法让它与两个 div 对齐并且没有空格，只有一个或另一个。

这是CSS：

```
#content {
    background-color:#ffffff;
    width:1024px; 
    margin: 0 auto; 
    font-family:Verdana, Geneva, sans-serif;
    font-size:12px;
    padding: 0;
    display: inline-block;
} 
```

如何让内容框与页面的其余部分对齐并且没有任何空格？

这就是它现在的样子，我想去掉 HELLO 框和它上面和下面的图像之间的空间。

![这就是它现在的样子，我想去掉 HELLO 框和它上面和下面的图像之间的空间。](../Images/834ac08bbe266a849f15da36e5de2805.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:14:23.290

这对我来说似乎不是一个干净的解决方案，但我在这里：

```
#content { 
margin-top: -15px; margin-bottom: -15px; 
} 
```

其实我不知道 -15px 是否足够好，你应该尝试自己的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:04:36.567

这不是一个很好的解决方案，但根据给定的信息，这是我唯一能想到的。

**CSS**

```
#content {
    background-color:#ffffff;
    width:1024px; 
    margin: 0 auto; 
    font-family:Verdana, Geneva, sans-serif;
    font-size:12px;
    padding: 0;
    display: inline-block;

    position:relative;
}

#topWhiteFix, #botWhiteFix {
    position:absolute;
    left:0px;
    height:12px;
    width:100%;
    background:#FFFFFF;
}

#topWhiteFix {
    top:-12px;
}

#botWhiteFix {
    bottom:-12px;
} 
```

**HTML**

```
<div id="content">
     <div id="topWhiteFix"></div>
     <div id="botWhiteFix"></div>

     HELLO
</div> 
```

（未经测试）

# facebook - Facebook WinRT 身份验证

> ID：11318940
> 
> 赞同：1
> 
> 时间：2012-07-03T20:47:46.423
> 
> 标签：facebook, windows-8, windows-runtime

我正在使用 WinRT 的 WebAuthenticationBroker 尝试通过 OAuth 连接到 Facebook。当我这样做时，我会返回一个页面，上面写着：发生错误。请稍后再试。

我想知道如何获取错误的详细信息以便修复它。任何有关调试 Facebook 的信息都会很棒。

# c# - 在事件处理程序中打印 Process 的标准输出

> ID：11318941
> 
> 赞同：0
> 
> 时间：2012-07-03T20:47:47.777
> 
> 标签：c#, .net, event-handling

我有一个控制台应用程序，我作为 C# 程序的进程运行。
我已经制作了一个事件处理程序，以便在此进程终止时调用。
如何在事件处理程序中打印此进程的标准输出。基本上，我如何访问事件处理程序中进程的属性？
我的代码如下所示。

```
public void myFunc()
{
.
.
Process p = new Process();
p.StartInfo.FileName = "myProgram.exe";
p.StartInfo.RedirectStandardOutput = true;
p.EnableRaisingEvents = true;
p.Exited += new EventHandler(myProcess_Exited);
p.Start();
.
.
}

private void myProcess_Exited(object sender, System.EventArgs e)
{

    Console.WriteLine("log: {0}", <what should be here?>);
} 
```

我不想将进程对象 p 作为类的一个字段。

另外，`System.EventArgs e`field 有什么用？这个怎么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:52:58.260

在您的事件处理程序中

```
object sender 
```

是 Process 对象（顺便说一下，这是整个 .NET Framework 中非常常见的模式）

```
Process originalProcess = sender as Process;
Console.WriteLine("log: {0}", originalProcess.StandardOutput.ReadToEnd()); 
```

另请注意，您必须设置：

```
p.StartInfo.UseShellExecute = false; 
```

在您的流程中使用 IO 重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:49:42.587

像这样使用：

```
private void myProcess_Exited(object sender, System.EventArgs e)
{
    Process pro = sender as Process; 
    string output = pro.StandardOutput.ReadToEnd()
    Console.WriteLine("log: {0}", output);
} 
```

*标准输出*就是[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:00:18.893

一种选择是在闭包中捕获它：

```
public void myFunc()
{
    Process p = new Process();
    p.StartInfo.FileName = "myProgram.exe";
    p.StartInfo.RedirectStandardOutput = true;
    p.EnableRaisingEvents = true;
    p.Exited += new EventHandler((sender, args) => processExited(p));
    p.Start();
}

private void processExited(Process p)
{
    Console.WriteLine(p.ExitTime);
} 
```

# api - Instapaper Simple API：添加链接而不存储用户密码？

> ID：11318943
> 
> 赞同：1
> 
> 时间：2012-07-03T20:48:03.040
> 
> 标签：api, instapaper

我正在尝试使用 Instapaper 的简单 API (http://www.instapaper.com/api/simple)。

API 使用条款 (http://www.instapaper.com/api/terms) 说应用程序不应该存储用户 ID 和密码，我也不想存储它们。然而，似乎通过简单的 API 向用户的 Instapaper 添加链接的唯一方法是存储用户名/密码（如果用户确实有密码）。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:32:27.940

The API terms of use state that:

> Apps must not store users’ passwords. Passwords may only be collected for the xAuth token acquisition and must be discarded afterward.

Only the full API uses xAuth tokens. The above sentence doesn't apply to the simple API, since it uses Basic HTTP Authentication.

You still "must make reasonable efforts to prevent passwords from being compromised, and must not disclose passwords to any other services or individuals".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-19T14:05:18.497

如果您使用的是本地 Mac 应用程序（如 Apple 的邮件客户端或第三方邮件客户端，如 Airmail），则没有一种简单的方法来保存到 Instapaper 的链接，而无需先在浏览器中打开链接，然后使用 Instapaper 的其中一个浏览器扩展来实际保存文章。

我发现加快此任务的一种解决方法是为 OS X 编写一个服务，该服务使用 Instapaper 的 API 来保存链接。

为了编写自己的服务，首先打开 Apple 的 Automator 应用程序并创建一个新服务。然后，将 Run Shell Script 操作拖到应用程序的主工作流区域。

确保服务不接收任何输入，任何应用程序都可以使用，并且 shell 脚本设置为运行 python。

# c++ - 如何在 dbx 中设置硬件观察点？

> ID：11318947
> 
> 赞同：1
> 
> 时间：2012-07-03T20:48:30.753
> 
> 标签：c++, gdb, solaris, dbx, watchpoint

我需要检测 Solaris 上 dbx 中的某些内存何时发生变化。我知道在 gdb 中我会使用`watch <memoryLocation>`. 但是，我目前正在使用 dbx，所以我需要知道如何在 dbx 中设置硬件观察点。设置硬件观察点的 dbx 命令是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:10:26.397

`dbx`是 Solaris 和 AIX 上的标准调试器；这些调试器是不同的，你没有说你实际使用的是哪一个。

此 Google[查询为](https://www.google.com/search?q=dbx%20hardware%20watchpoint)[Solaris](http://docs.oracle.com/cd/E19059-01/wrkshp50/805-4948/z400055837ac/index.html)和[AIX](http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds2/dbx.htm)生成答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T18:17:50.297

我认为您的问题在这里得到了解答： [如何在 dbx 中的内存位置放置断点？](https://stackoverflow.com/questions/351052/how-do-you-put-a-breakpoint-on-a-memory-location-in-dbx)

C 和 C++ 也是如此。

# java - Java 故障转移框架/库

> ID：11318952
> 
> 赞同：1
> 
> 时间：2012-07-03T20:49:24.750
> 
> 标签：java, high-availability, failover, low-latency

是否有任何框架/库来处理主动/被动故障转移？理想情况下，它应该是快速、轻量级和可嵌入的。我找到了一些，但它们不太符合标准...

*   [http://zookeeper.apache.org/](http://zookeeper.apache.org/)
*   [http://sourceforge.net/projects/jheartbeat/](http://sourceforge.net/projects/jheartbeat/)
*   [http://www.javaworld.com/javaworld/jw-03-2002/jw-0315-heart.html](http://www.javaworld.com/javaworld/jw-03-2002/jw-0315-heart.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:24:46.607

[http://www.drdobbs.com/jvm/building-dynamic-fail-over-java-servers/184404846](http://www.drdobbs.com/jvm/building-dynamic-fail-over-java-servers/184404846)

它是可嵌入的；轻巧……足够快

这是 dobbs 博士的一篇非常古老的文章，它依赖于 UDP，这可能会给您带来麻烦，具体取决于您的网络拓扑。

# c# - href javascript 链接中的数据绑定值

> ID：11318954
> 
> 赞同：0
> 
> 时间：2012-07-03T20:49:29.837
> 
> 标签：c#, javascript, asp.net

我已经在网上搜索了让它工作的语法，我希望这是一个快速修复，否则我会发疯的。基本上我有一个嵌套中继器，下面的按钮隐藏了另一个嵌套中继器。

`((location_details)((RepeaterItem)Container.Parent.Parent).DataItem).tbl_location.location_id`评估得非常好（在我正在测试的情况下为 3824），但是当我尝试传递它以便它是 javascript 函数的字符串参数时，它每次都会失败。

```
<asp:Linkbutton ID="lb_showhide_oloc_gnotes" runat="server" Text="Expand/Close" 
 href='javascript:sltoggle('" + <%# ((location_details)((RepeaterItem)Container.Parent.Parent).DataItem).tbl_location.location_id %> +" '); return false;' /> 
```

我缺少的任何想法（我知道上面的语法是错误的，我必须已经更改了 100 次，但你明白了）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:59:29.550

我现在无法对此进行测试，所以这可能是错误的，但您不需要将 的值连接`href`在一起。

```
<asp:Linkbutton ID="lb_showhide_oloc_gnotes" runat="server" Text="Expand/Close" 
 href='javascript:sltoggle("<%# ((location_details)((RepeaterItem)Container.Parent.Parent).DataItem).tbl_location.location_id %>"); return false;' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:59:08.340

你试过`asp:HyperLink`吗`NavigateUrl`？我认为`asp:LinkButton`渲染到一个锚标记，它的`href`属性应该由 ASP 生成（所以它会导致回发），这就是它不会绑定到它的原因。

# c++ - 加载具有本机依赖项的 clr 库

> ID：11318956
> 
> 赞同：0
> 
> 时间：2012-07-03T20:49:33.147
> 
> 标签：c++, dependencies, c++-cli, clr, ironpython

我正在编写 IronPython 脚本并尝试加载我编写的使用 CLI/C++ 与本机 C++ 互操作的库。鉴于我不能直接添加对非 CLR 库的引用，有没有办法让 IronPython 加载 CLR 库并找到合适的本机库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:49:09.687

事实证明 IronPython 不会自己找到所有系统文件。我使用[依赖walker](http://www.dependencywalker.com/)来查找我丢失的系统dll。

# sql - 从具有不同列的多个表中选择

> ID：11318960
> 
> 赞同：0
> 
> 时间：2012-07-03T20:49:52.823
> 
> 标签：sql, inheritance, database-design

假设我得到了这个 SQL 模式。

表作业：

```
id,title, type, is_enabled 
```

表 JobFileCopy：

```
job_id,from_path,to_path 
```

表 JobFileDelete：

```
job_id, file_path 
```

表 JobStartProcess：

```
job_id, file_path, arguments, working_directory 
```

还有许多其他具有不同列数的表，它们都有外键 job_id，它链接到表 Job 中的 id。

我的问题：
这是正确的方法吗？我不需要随时删除任何内容。我主要需要选择和插入。

其次，从单个数据库命中的所有不同表中获取具有相关详细信息的作业列表的最佳方法是什么？例如，我想选择前 20 个具有详细信息的作业，它们的详细信息可以在任何表中（取决于表作业中的列类型），直到运行时我才知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:13:57.687

```
select (case when type = 'type1' then (select field from table1) else (select field from table2) end) as a from table; 
```

它可以成为您的解决方案吗？

# html - 和 和有什么不一样？

> ID：11318961
> 
> 赞同：112
> 
> 时间：2012-07-03T20:49:58.180
> 
> 标签：html, lang

`<html lang="en">`和 和有什么不一样`<html lang="en-US">`？破折号后面可以有哪些其他值？

根据[w3.org](http://www.w3.org/TR/html4/struct/dirlang.html#langcodes)的说法， “任何两个字母的子代码都被理解为 [ISO3166] 国家代码。” 那么这是否意味着[alpha-2 代码下列出的任何值](http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes)都是可接受的值？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-07-03T21:12:11.880

> `<html lang="en">`
> `<html lang="en-US">`

第一个`lang`标签仅指定语言代码。第二个指定语言代码，后跟国家代码。

> 破折号后面可以有哪些其他值？根据 w3.org的说法， *“任何两个字母的子代码都被理解为 [ISO3166] 国家代码。”* 那么这是否意味着 alpha-2 代码下列出的任何值都是可接受的值？

是的，但是该值可能有也可能没有任何实际意义。

`<html lang="en-US">`本质上的意思是“这个页面是美国风格的英语”。以类似的方式，`<html lang="en-GB">`将意味着“此页面采用英国风格的英语”。

如果你真的想指定一个无效的组合，你可以。据我了解，这没什么意义，但`<html lang="en-ES">`根据规范是有效的。但是，由于西班牙不常用英语，因此该语言/国家/地区组合不会起到太大作用。

> 我的意思是这是否会进一步帮助浏览器显示页面？

它对浏览器显示页面没有帮助，但对搜索引擎、屏幕阅读器和其他可能阅读并尝试解释页面的东西很有用，除了人类。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T21:00:46.927

您可以使用任何国家/地区代码，是的，但这并不意味着浏览器或其他软件会识别它或因此而做任何不同的事情。例如，如果屏幕阅读器仅支持英语中的美式口音，则屏幕阅读器可能会以相同的方式处理“en-US”和“en-GB”。不过，另一款有两种不同声音的软件可以根据国家代码进行调整。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-01T15:30:34.477

这应该有帮助： [http ://www.w3.org/International/articles/language-tags/](http://www.w3.org/International/articles/language-tags/)

> 创建语言标签时的黄金法则是使标签尽可能短。避免使用区域、脚本或其他子标签，除非它们添加了有用的区分信息。例如，使用 ja 表示日语而不是 ja-JP，除非有特殊原因您需要说这是日本所说的日语，而不是其他地方所说的日语。
> 
> 下面的列表显示了可用的各种类型的子标签。我们将通过这些方法以及在接下来的部分中如何使用它们。
> 
> ***语言-extlang-script-region-variant-extension-privateuse***

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T21:12:08.423

[RFC 3066](http://www.ietf.org/rfc/rfc3066.txt)给出了允许值的详细信息（添加了强调和链接）：

> 所有 2 字母子标签都被解释为**[[ISO 3166]](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)****中的ISO 3166 alpha-2 国家代码**，或随后由 ISO 3166 维护机构或管理标准化机构分配，表示该语言变体涉及的区域。

我将其解释为任何有效（根据 ISO 3166）2 字母代码都可以作为子标签有效。RFC 继续声明：

> 根据本文档第 5 章的规则，可以在 IANA 注册具有 3 到 8 个字母的第二个子标签的标签。

顺便说一句，这看起来像是一个错字，因为第 3 章似乎与注册过程有关，而不是第 5 章。

快速搜索 IANA 注册表会显示一个[*很*长的列表](http://www.iana.org/assignments/language-subtag-registry)，其中包含所有可用的语言子标签。这是列表中的一个示例（将用作`en-scouse`）：

> 类型：变体
> 
> 子标签：scouse
> 
> 说明： 斯库斯
> 
> 添加： 2006-09-18
> 
> 前缀：en
> 
> 评论：被称为“Scouse”的英语利物浦方言

有*各种*可用的子标签；一个快速卷轴已经显露`fr-1694acad`（17 世纪的法语）。

* * *

当涉及到设计用于在浏览器中显示的文档时，其中一些（我会说绝大多数）标签的用处是有限的。[W3C 国际化规范](http://www.w3.org/International/tutorials/language-decl/#Slide0030)简单地说：

> 浏览器和其他应用程序可以使用有关内容语言的信息向用户传递最合适的信息，或以最合适的方式向用户呈现信息。正确标记和标记的内容越多，此类应用程序将变得越有用和普遍。

我正在努力寻找有关浏览器在遇到不同语言标签时如何表现的详细信息，但它们很可能会为那些使用屏幕阅读器的用户提供一些好处，这些用户可以使用标签来确定语言/方言/口音在其中呈现内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-16T12:33:16.627

XML Schema 要求在使用 xml:lang（和其他 xml 命名空间值）之前声明和导入 xml 命名空间，如在 XML 中一样，RELAX NG 预先声明了 xml 命名空间，因此不需要额外的声明。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-03T20:54:41.157

嗯，第一个问题很简单。有很多`en`s（英语），但（大部分）只有一种美国英语。有人会猜测有`en-CN`, `en-GB`, `en-AU`。猜猜甚至可能有奥地利英语，但你能做到的比有的更多。

# asp.net - 找不到实体框架的架构信息

> ID：11318963
> 
> 赞同：1
> 
> 时间：2012-07-03T20:50:06.443
> 
> 标签：asp.net, entity-framework, web-config

当我`web.config`在 ASP.NET Web 应用程序中打开文件时，错误列表中会显示一些消息：

```
Meldung 1   Die Schemainformationen für das Element 'entityFramework' konnten nicht gefunden werden.
Meldung 2   Die Schemainformationen für das Element 'defaultConnectionFactory' konnten nicht gefunden werden.
Meldung 3   Die Schemainformationen für das Attribut 'type' konnten nicht gefunden werden.
Meldung 4   Die Schemainformationen für das Element 'parameters' konnten nicht gefunden werden.
Meldung 5   Die Schemainformationen für das Element 'parameter' konnten nicht gefunden werden.
Meldung 6   Die Schemainformationen für das Attribut 'value' konnten nicht gefunden werden. 
```

所以 Visual Studio 似乎无法找到实体框架的架构信息，其他消息是由这个问题引起的。

我的`web.config`文件看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  [...]
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

我在哪里可以找到必要的架构信息文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:17:29.157

更新的 XSD 将包含在 Visual Studio 2012 中。同时，消息不应影响配置文件的编译或使用，并且当文件未在编辑器中打开时应该消失。

# java - ASM 使用代码查找偏移量

> ID：11318966
> 
> 赞同：0
> 
> 时间：2012-07-03T20:50:27.600
> 
> 标签：java, assembly, bytecode, offset

我想在我使用的测试用例中找到不同方法的偏移量。我可以找到方法的开始和结束位置，我查找操作码 RETURN 和 ARETURN（我在一个扩展方法 visitInsn() 中的 methodVisitor 的类中这样做），但我无法找到这些发生在字节码。有任何想法吗？

*以防万一：* 我正在使用 ASM 的核心 API，我知道树 API 可以帮助我找到我需要的东西，但是树 API 使一切变得缓慢并使用内存，我买不起任何这些，所以我使用核心 API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:27:22.563

我找到了一种方法来获取每条指令的偏移量，这不是一种常见的方法，但它对我有用。ASM 不会为您提供每条指令的偏移量，因为通常您不需要它，但您仍然可以获得它，我必须修改 ASM 中的类以使我的想法生效。

我修改了 Label 类和 ClassReader 类，在第二个中，有一个部分只在特殊情况下创建标签并将标签添加到标签数组中，所以我只是告诉它为每个指令添加一个标签，然后我只是调用getOffset 内的 visitInsn 内的 methodVisitor 和，标签将被解析并具有偏移量。

# facebook - 我可以在我的 Facebook 应用程序中使用 YouTube 视频作为主要内容吗？

> ID：11318971
> 
> 赞同：-4
> 
> 时间：2012-07-03T20:50:43.840
> 
> 标签：facebook, youtube, youtube-api, gdata

我想创建一个 Faceook 应用程序，它与 Socialcam 相同，但在不同方面，即运动。

我可以获取用户喜欢的体育项目，并根据他们创建视频播放列表，在此过程中或创建我想使用 Gdata api 并使用 Youtube 拉 youtube 视频的视频列表。

这可能吗？ Youtube 对此有什么限制吗？

谢谢大家

编辑：据我通过谷歌搜索和阅读他们的条款所见，这似乎是不可能的，因为我需要在我的网站上投放广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:25:53.167

在 Facebook 应用程序中使用 YouTube 视频是很有可能的，并且相对非常​​容易（尽管您需要检查每个视频都设置了嵌入标志）。

您是否被允许取决于您的应用程序是否被货币化（即投放广告或用户付费）以及视频是否是它们在其中显示的主要内容。如需完整的服务条款，请访问[http://www.youtube.com/t/terms](http://www.youtube.com/t/terms)

# node.js - 使用 Sinon 对 Mongoose 模型进行 Stub

> ID：11318972
> 
> 赞同：27
> 
> 时间：2012-07-03T20:50:46.187
> 
> 标签：node.js, mongoose, sinon

我想为`save`特定模型中的 Mongoose 方法创建一个存根，以便我创建的模型的任何实例都将调用存根而不是普通的 Mongoose`save`方法。我的理解是，这样做的唯一方法是像这样对整个模型进行存根：

```
var stub = sinon.stub(myModel.prototype); 
```

不幸的是，这行代码导致我的测试抛出以下错误：

```
TypeError: Cannot read property 'states' of undefined 
```

有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-19T19:22:44.390

有两种方法可以做到这一点。第一个是

```
var mongoose = require('mongoose');
var myStub = sinon.stub(mongoose.Model, METHODNAME); 
```

如果您控制台日志 mongoose.Model 您将看到模型可用的方法（特别是这不包括 lte 选项）。

另一种（特定于模型的）方式是

```
var myStub = sinon.stub(YOURMODEL.prototype.base.Model, 'METHODNAME'); 
```

同样，存根也可以使用相同的方法。

编辑：一些方法，如保存，如下所示：

```
var myStub = sinon.stub(mongoose.Model.prototype, METHODNAME);
var myStub = sinon.stub(YOURMODEL.prototype, METHODNAME); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-13T15:48:03.957

看看[sinon-mongoose](https://github.com/gaguirre/sinon-mongoose "sinon-猫鼬")。您可以期望只有几行的链式方法：

```
sinon.mock(YourModel).expects('find')
  .chain('limit').withArgs(10)
  .chain('exec'); 
```

您可以在 repo 上找到工作示例。

另外，建议：使用`mock`method 而不是`stub`，这将检查该方法是否确实存在。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-07T22:37:06.197

`save`不是模型上的方法，而是文档（模型的实例）上的方法。在mongoose[文档](http://mongoosejs.com/docs/models.html)中说明。

> 构建文档
> 
> 文档是我们模型的实例。创建它们并保存到数据库很容易

因此，如果您使用模型来模拟一个`save()`

配合@Gon的回答，使用[sinon-mongoose](https://github.com/gaguirre/sinon-mongoose)和[factory-girl](https://github.com/aexmachina/factory-girl)`Account`作为我的模特：

### 不管用

```
var AccountMock = sinon.mock(Account)

AccountMock
  .expects('save') // TypeError: Attempted to wrap undefined property save as function
  .resolves(account) 
```

### *会*工作

```
var account = { email: 'sasha@gmail.com', password: 'abc123' }

Factory.define(account, Account)
Factory.build('account', account).then(accountDocument => {
  account = accountDocument

  var accountMock = sinon.mock(account)

  accountMock
    .expects('save')
    .resolves(account)

  // do your testing...
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T08:47:55.807

Instead of the whole object, try:

```
sinon.stub(YOURMODEL.prototype, 'save') 
```

Make sure YOURMODEL is the class not the instance.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-19T20:31:53.703

切线相关，但相关...

我需要模拟一个自定义模型方法，例如：

```
myModelSchema.methods.myCustomMethod = function() {....} 
```

要创建一个存根，我做了：

```
myCustomMethodStub = sinon.stub(MyModel.schema.methods, 'myCustomMethod').callThrough(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-18T13:17:00.220

正如djv所说，该`save`方法在文档上。所以你可以这样存根：

```
const user = new User({
      email: 'email@email.com',
      firstName: 'firstName',
      lastName: 'lastName',
      userName: 'userName',
      password: 'password',
    });

stub(user, 'save').resolves({ foo: 'bar' }); 
```

奖励，您可以按照以下方式使用[Chai](https://www.chaijs.com/)和[Chai](https://www.chaijs.com/plugins/chai-as-promised/)声明它：

```
const promise = user.save();
await chai.assert.doesNotBecome(promise, { foo: 'bar' }); 
```

# c# - C#泛型中的无效？

> ID：11318973
> 
> 赞同：114
> 
> 时间：2012-07-03T20:50:59.910
> 
> 标签：c#, generics

我有一个接受请求并提供响应的通用方法。

```
public Tres DoSomething<Tres, Treq>(Tres response, Treq request)
{/*stuff*/} 
```

但我并不总是希望我的请求得到响应，我也不总是希望提供请求数据来获得响应。我也不想复制和粘贴整个方法来进行细微的更改。我想要的是能够做到这一点：

```
public Tre DoSomething<Tres>(Tres response)
{
    return DoSomething<Tres, void>(response, null);
} 
```

这在某种程度上可行吗？似乎专门使用 void 不起作用，但我希望找到类似的东西。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-03T20:53:40.147

你不能用`void`，但你可以用`object`：有点不方便，因为你的可能的`void`函数需要返回`null`，但如果它统一了你的代码，那应该是一个很小的代价。

这种无法`void`用作返回类型的原因至少部分地导致了泛型委托`Func<...>`和`Action<...>`家族之间的分裂：如果可以返回`void`，那么一切`Action<X,Y,Z>`都会变得简单`Func<X,Y,Z,void>`。不幸的是，这是不可能的。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-07-03T20:54:55.420

不，很遗憾没有。如果`void`是“真实”类型（例如[`unit`在 F#](http://msdn.microsoft.com/en-us/library/dd483472.aspx)中），那么生活在许多方面都会简单得多。特别是，我们不会同时需要`Func<T>`和`Action<T>`家庭——只需要`Func<void>`代替`Action`，`Func<T, void>`代替`Action<T>`等。

它还会使 async 更简单——根本不需要非泛型`Task`类型——我们只需要`Task<void>`.

不幸的是，这不是 C# 或 .NET 类型系统的工作方式......

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-09-26T17:15:25.387

这是你可以做的。正如@JohnSkeet 所说，C# 中没有单元类型，所以自己制作吧！

```
public sealed class ThankYou {
   private ThankYou() { }
   private readonly static ThankYou bye = new ThankYou();
   public static ThankYou Bye { get { return bye; } }
} 
```

现在您可以随时使用`Func<..., ThankYou>`而不是`Action<...>`

```
public ThankYou MethodWithNoResult() {
   /* do things */
   return ThankYou.Bye;
} 
```

或者使用 Rx 团队已经制作的东西：http: [//msdn.microsoft.com/en-us/library/system.reactive.unit%28v=VS.103%29.aspx](http://msdn.microsoft.com/en-us/library/system.reactive.unit%28v=VS.103%29.aspx)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-07-03T21:19:58.720

您可以`Object`像其他人建议的那样简单地使用。或者`Int32`我已经看到了一些用途。using`Int32`引入了一个“虚拟”数字（ use `0`），但至少您不能将任何大而奇特的对象放入`Int32`引用中（结构是密封的）。

您也可以编写自己的“void”类型：

```
public sealed class MyVoid
{
  MyVoid()
  {
    throw new InvalidOperationException("Don't instantiate MyVoid.");
  }
} 
```

`MyVoid`允许引用（它不是静态类），但只能是`null`. 实例构造函数是私有的（如果有人试图通过反射调用这个私有构造函数，则会向他们抛出异常）。

* * *

由于引入了值元组（2017，.NET 4.7），使用[结构`ValueTuple`](https://docs.microsoft.com/en-us/dotnet/api/system.valuetuple)（0 元组，非泛型变体）而不是这样的`MyVoid`. 它的实例有一个`ToString()`返回的`"()"`，所以它看起来像一个零元组。从 C# 的当前版本开始，您不能使用`()`代码中的标记来获取实例。您可以使用`default(ValueTuple)`or just `default`(当类型可以从上下文中推断出来时) 代替。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-06-15T19:42:21.470

我喜欢上面 Aleksey Bykov 的想法，但可以稍微简化一下

```
public sealed class Nothing {
    public static Nothing AtAll { get { return null; } }
} 
```

我看不出没有什么明显的原因，为什么 Nothing.AtAll 不能只给出 null

同样的想法（或 Jeppe Stig Nielsen 的想法）也适用于类型化类。

例如，如果类型仅用于描述作为参数传递给某个方法的过程/函数的参数，并且它本身不接受任何参数。

（您仍然需要制作一个虚拟包装器或允许可选的“Nothing”。但恕我直言，myClass<Nothing> 的类用法看起来不错）

```
void myProcWithNoArguments(Nothing Dummy){
     myProcWithNoArguments(){
} 
```

或者

```
void myProcWithNoArguments(Nothing Dummy=null){
    ...
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-03T20:52:14.987

`void`，虽然是一种类型，但仅作为方法的返回类型有效。

没有办法绕过这个限制`void`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-12T11:51:44.073

我目前所做的是使用私有构造函数创建自定义密封类型。这比在 c-tor 中抛出异常要好，因为您不必等到运行时才能确定情况不正确。它比返回静态实例要好得多，因为您甚至不必分配一次。它比返回静态 null 稍微好一点，因为它在调用端不那么冗长。调用者唯一能做的就是给 null。

```
public sealed class Void {
    private Void() { }
}

public sealed class None {
    private None() { }
} 
```

# javascript - 在 ExtJS 4 容器/面板中渲染图表

> ID：11318974
> 
> 赞同：1
> 
> 时间：2012-07-03T20:51:07.530
> 
> 标签：javascript, extjs, extjs4

我有一个像这样的预定义饼图：

```
Ext.create('Ext.chart.Chart', {
        width : 450,
        height : 300,
        animate : true,
        store : store,
        theme : 'Base:gradients',
        series : [{
            type : 'pie',
            field : 'data1',
            showInLegend : true,
            tips : {
                trackMouse : true,
                width : 140,
                height : 28,
                renderer : function(storeItem, item) {
                    // calculate and display percentage on hover
                    var total = 0;
                    store.each(function(rec) {
                        total += rec.get('data1');
                    });
                    this.setTitle(storeItem.get('name') + ': ' + Math.round(storeItem.get('data1') / total * 100) + '%');
                }
            },
            highlight : {
                segment : {
                    margin : 20
                }
            },
            label : {
                field : 'name',
                display : 'rotate',
                contrast : true,
                font : '18px Arial'
            }
        }]
    }); 
```

然后我创建了一个 Container/Panel，这里我使用的是 Container。

我正在寻找一种将我的预定义图表放入容器的方法。我看到了一些示例，他们实际上在 Container 字段中定义了图表，但这不是我想要的。有什么方法可以将我预先指定的图表放在下面的`items`字段中，以便可以呈现图表？

```
Ext.create('Ext.container.Container', {
        layout: 'fit',
        width: 600,
        height: 600,
        renderTo: Ext.getBody(),
        border: 1,
        style: {boderColor: '#000000', borderStyle: 'solid', borderWidth: '1px'},
        items: [{

        }]
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:31:40.983

是的，它很简单：

```
var chart = Ext.create('Ext.chart.Chart', {
    animate: true,
    store: store,
    theme: 'Base:gradients',
    series: [{
        type: 'pie',
        field: 'data1',
        showInLegend: true,
        tips: {
            trackMouse: true,
            width: 140,
            height: 28,
            renderer: function(storeItem, item) {
                // calculate and display percentage on hover
                var total = 0;
                store.each(function(rec) {
                    total += rec.get('data1');
                });
                this.setTitle(storeItem.get('name') + ': ' + Math.round(storeItem.get('data1') / total * 100) + '%');
            }
        },
        highlight: {
            segment: {
                margin: 20
            }
        },
        label: {
            field: 'name',
            display: 'rotate',
            contrast: true,
            font: '18px Arial'
        }
    }]
});

Ext.create('Ext.container.Container', {
    layout: 'fit',
    width: 600,
    height: 600,
    renderTo: Ext.getBody(),
    border: 1,
    style: {
        boderColor: '#000000',
        borderStyle: 'solid',
        borderWidth: '1px'
    },
    items: chart
}); 
```

另请注意，在图表上指定尺寸是没有用的，因为它用于合适的布局。

# python - 大小不等的压缩列表

> ID：11318977
> 
> 赞同：46
> 
> 时间：2012-07-03T20:51:31.623
> 
> 标签：python, data-structures

我有两个清单

```
a = [1,2,3]
b = [9,10] 
```

我想将这两个列表合并（压缩）到一个列表中`c`，这样

```
c = [(1,9), (2,10), (3, )] 
```

Python的标准库中是否有任何功能可以做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-03T20:53:23.903

通常，您[`itertools.zip_longest`](https://docs.python.org/library/itertools.html#itertools.zip_longest)用于此：

```
>>> import itertools
>>> a = [1, 2, 3]
>>> b = [9, 10]
>>> for i in itertools.zip_longest(a, b): print(i)
... 
(1, 9)
(2, 10)
(3, None) 
```

但是用 s （或您作为参数传递的任何值）`zip_longest`填充较短的可迭代对象。如果这不是您想要的，那么您可以使用[理解](https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)来过滤掉s：`None`[`fillvalue=`](https://docs.python.org/3/library/itertools.html?highlight=fillvalue#itertools.zip_longest)`None`

```
>>> for i in (tuple(p for p in pair if p is not None) 
...           for pair in itertools.zip_longest(a, b)):
...     print(i)
... 
(1, 9)
(2, 10)
(3,) 
```

但请注意，如果任何一个可迭代对象都有`None`值，这也会将它们过滤掉。如果您不希望这样，请定义您自己的对象`fillvalue=`并对其进行过滤，而不是`None`：

```
sentinel = object()

def zip_longest_no_fill(a, b):
    for i in itertools.zip_longest(a, b, fillvalue=sentinel):
        yield tuple(x for x in i if x is not sentinel)

list(zip_longest_no_fill(a, b))  # [(1, 9), (2, 10), (3,)] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T20:58:37.660

另一种方法是`map`：

```
a = [1, 2, 3]
b = [9, 10]
c = map(None, a, b) 
```

尽管那也将包含`(3, None)`而不是`(3,)`. 为此，这里有一条有趣的线路：

```
c = (tuple(y for y in x if y is not None) for x in map(None, a, b)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T21:26:20.317

编写显式 Python 来执行所需的操作并不难：

```
def izip_short(a, b):
    ia = iter(a)
    ib = iter(b)
    for x in ia:
        try:
            y = next(ib)
            yield (x, y)
        except StopIteration:
            yield (x,)
            break
    for x in ia:
        yield (x,)
    for y in ib:
        yield (None, y)

a = [1, 2, 3]
b = [9, 10]
list(izip_short(a, b))
list(izip_short(b, a)) 
```

我不确定你想如何处理`b`比序列长的`a`序列，所以在这种情况下，我只是`None`将元组中的第一个值填入 a 中。

为每个序列获取一个显式迭代器。将`a`迭代器作为`for`循环运行，同时手动使用`next(ib)`从`b`序列中获取下一个值。如果我们`StopIteration`在`b`序列上得到 a，我们打破循环，然后`for x in ia:`得到`a`序列的其余部分；之后`for y in ib:`什么都不做，因为那个迭代器已经用完了。或者，如果第一个`for x in ia:`循环耗尽了`a`迭代器，那么第二个循环`for x in ia:`什么也不做，但`b`序列中可能会留下一些值，然后`for y in ib:`循环收集它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-23T07:51:17.260

单线：

`c = zip(a, b) + [(x,) for x in a[len(b):]] + [(x,) for x in b[len(a):]]`

如果你想重用这个：

```
def mergeUsNicely(a, b):
    def tupleMe(val):
        return (val,)
    return zip(a, b) + map(tupleMe, a[len(b):]) + map(tupleMe, b[len(a):]) 
```

# php - MySQL 并发多行插入 - 插入 ID 假设

> ID：11318982
> 
> 赞同：6
> 
> 时间：2012-07-03T20:51:47.260
> 
> 标签：php, mysql, auto-increment

在我的应用程序中，我有很多外键依赖项，并且经常插入大量行。到目前为止，我所做的是一次运行一个插入，并记录插入 ID。当插入大量行时，这往往需要很长时间，即使 apache 和 mysql 在同一台服务器上运行也是如此。

我的问题是，如果我要更改我的应用程序以使用单个 INSERT 添加多个行，我是否能够严格根据 mysql 连接返回的最后一个插入 ID 来假设每行的 ID？问题是偶尔会有不止一个人同时将大量信息放入数据库的情况。

从我能够确定的情况来看，似乎可以安全地假设当您插入 500 行时，您的插入 ID 的范围将从 (lastInsertID) 到 (lastInsertID+499)，无论来自另一个连接的查询是否已经开始或结束完成所需的时间，但我想确保这被接受为安全做法。

我主要运行 InnoDB，但也偶尔会出现 MyISAM。

谢谢大家！

-杰尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:18:07.190

mysql_insert_id 和现在推荐的替代方法[mysqli_insert_id](http://uk3.php.net/manual/en/mysqli.insert-id.php)从您运行的最后一个查询的受影响表的 AUTO_INCREMENT 列中返回第一个条目 id。

Mysql 分组的 INSERT 语句从第一个条目 AUTO_INCREMENT 索引迭代插入。所以是的，可以安全地假设从单个 INSERT 语句插入的条目是连续的。

来自[Mysql 参考](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)的评论“生成的 ID 在每个连接的基础上在服务器中维护。这意味着函数返回给给定客户端的值是为影响 AUTO_INCREMENT 列的最近语句生成的第一个 AUTO_INCREMENT 值由该客户端。此值不会受到其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。此行为确保每个客户端都可以检索自己的 ID，而无需关心其他客户端的活动，也不需要锁或交易。

# iphone - 获取 OpenGL 图像 - 在模拟器中运行，在 iPad 上崩溃

> ID：11318983
> 
> 赞同：0
> 
> 时间：2012-07-03T20:51:51.517
> 
> 标签：iphone, objective-c, ios, ios5, ios-simulator

此函数的目的是从 openGL 图像返回 UIImage。将其转换为 CG 图像的原因是 openGL 和 UIKit 元素可以相互叠加渲染，这在另一个函数中得到了处理。

奇怪的是，当应用程序在模拟器中运行时，一切正常。但是，在多个不同的 iPad 上测试应用程序后，当`drawGlToImage`调用该方法时`self`，应用程序崩溃并出现 EXC_BAD_ACCESS code=1 错误。有谁知道我在这里做什么会导致这种情况？我读过它`UIGraphicsBeginImageContext()`曾经有线程安全问题，但似乎在 iOS 4 中已修复。

```
 - (UIImage *)drawGlToImage
{
    self.context = [EAGLContext currentContext];
    [EAGLContext setCurrentContext:self.context];
    UIGraphicsBeginImageContext(self.view.frame.size);

    unsigned char buffer[1024 * 768 * 4];
    NSInteger dataSize = 1024 * 768 * 4;

    CGContextRef currentContext = UIGraphicsGetCurrentContext();
    UIGraphicsPushContext(currentContext);

    glReadPixels(0, 0, 1024, 768, GL_RGBA, GL_UNSIGNED_BYTE, &buffer);

    //flip the image
    GLubyte *flippedBuffer = (GLubyte *) malloc(dataSize);

    for(int y = 0; y <768; y++)
    {
        for(int x = 0; x <1024 * 4; x++)
        {
            if(buffer[y* 4 * 1024 + x]==0)
                flippedBuffer[(767 - y) * 1024 * 4 + x]=1;
            else
                flippedBuffer[(767 - y) * 1024 * 4 + x] = buffer[y* 4 * 1024 + x];
        }
    }

    CGDataProviderRef ref = CGDataProviderCreateWithData(NULL, flippedBuffer, 1024 * 768 * 4, NULL);
    CGImageRef iref = CGImageCreate(1024,768,8,32,1024*4, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaLast, ref, NULL, true, kCGRenderingIntentDefault);

    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CGContextTranslateCTM(currentContext, 0, -self.view.frame.size.height);

    UIGraphicsPopContext();
    UIImage *image = [[UIImage alloc] initWithCGImage:iref];
    UIGraphicsEndImageContext();

    return image;
    free(flippedBuffer);
    UIGraphicsPopContext();
} 
```

当一个按钮被按下时，一个被调用的方法会进行这个赋值，这会导致应用程序崩溃。

```
UIImage *glImage = [self drawGlToImage]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:02:28.023

我不确定您在哪个阶段调用此方法。但在调用任何 OpenGL 函数之前，您需要设置正确的 OpenGL 上下文。在 Xcode 模板中是这一行

```
[EAGLContext setCurrentContext:self.context]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:26:09.223

这是用于解决它的代码

```
- (UIImage *)drawGlToImage {

    // Code borrowed and tweaked from:
    // http://stackoverflow.com/questions/9881143/missing-part-of-the-image-when-taking-screenshot-while-supporting-retina-display

    CGFloat scale = UIScreen.mainScreen.scale;
    CGFloat xOffset = 40.0f;
    CGFloat yOffset = -16.0f;
    CGSize size = CGSizeMake((self.chart.frame.size.width) * scale,
                             self.chart.frame.size.height * scale);

    //Create buffer for pixels
    GLuint bufferLength = size.width * size.height * 4;
    GLubyte* buffer = (GLubyte*)malloc(bufferLength);

    //Read Pixels from OpenGL
    glReadPixels(0.0f, 0.0f, size.width, size.height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
    //Make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer, bufferLength, NULL);

    //Configure image
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * size.width;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGImageAlphaLast;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;
    CGImageRef iref = CGImageCreate(size.width, size.height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    uint32_t* pixels = (uint32_t*)malloc(bufferLength);
    CGContextRef context = CGBitmapContextCreate(pixels, size.width, size.height, 8, size.width * 4, CGImageGetColorSpace(iref), kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    CGContextTranslateCTM(context, 0.0f, size.height);
    CGContextScaleCTM(context, 1.0f, -1.0f);

    // These numbers are a little magical.
    CGContextDrawImage(context, CGRectMake(xOffset, yOffset, ((size.width - (6.0f * scale)) / scale) - (xOffset / 2), (size.height / scale) - (yOffset / 2)), iref);
    UIImage *outputImage = [UIImage imageWithCGImage:CGBitmapContextCreateImage(context)];

    //Dealloc
    CGDataProviderRelease(provider);
    CGImageRelease(iref);
    CGContextRelease(context);
    free(buffer);
    free(pixels);

    return outputImage;
} 
```

# iphone - 在 UIScrollView 中覆盖 drawRect 时的黑色背景

> ID：11318987
> 
> 赞同：20
> 
> 时间：2012-07-03T20:52:06.087
> 
> 标签：iphone, objective-c, ios, ipad

所以我试图在我的 UIScrollView 中覆盖 drawRect，但是它给了我这个黑色背景，而不是我为 UIScrollView 指定的背景颜色。为什么是这样？如果我删除 drawRect 代码，那么一切都很好：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
    if (shouldDrawVerticalLineForProfile){

        CGContextRef context = UIGraphicsGetCurrentContext();
        CGColorRef separatorColor = [UIColor colorWithRed:47.0/255.0 green:47.0/255.0 
                                                     blue:47.0/255.0 alpha:1.0].CGColor;

        // Add at bottom
        CGPoint startPoint = CGPointMake(60, 0);
        CGPoint endPoint = CGPointMake(60, 10000);

        CGContextSaveGState(context);
        CGContextSetLineCap(context, kCGLineCapSquare);
        CGContextSetStrokeColorWithColor(context, separatorColor);
        CGContextSetLineWidth(context, 5.0);
        CGContextMoveToPoint(context, startPoint.x + 0.5, startPoint.y + 0.5);
        CGContextAddLineToPoint(context, endPoint.x + 0.5, endPoint.y + 0.5);
        CGContextStrokePath(context);
        CGContextRestoreGState(context);  

    }

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-04T14:13:08.437

我猜你正在寻找的是：

```
myScrollViewInstance.opaque = NO 
```

之后，滚动视图的背景不再是黑色。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-28T19:38:03.830

在我的 UIScrollView 子类中覆盖 drawRect 时，我遇到了类似的情况。

简单地覆盖：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
} 
```

导致黑色背景而不是我没有覆盖的所需清晰背景。

我发现这是因为在 Interface Builder 中将 View Background 设置为 Default 并且将其设置为`Clear Color`解决了我的问题。

我不确定这是否与您的问题有关，但我想我会分享以防万一。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-22T17:29:12.013

UIView 方法的 AppleDocs 中非常清楚地记录了这里的答案`drawRect:`。第一句话是：

> 此方法的默认实现什么也不做。

因此，这里调用 super 的建议无济于事。其余的答案包含在讨论的后面：

> ...如果您的视图的 opaque 属性设置为 YES，您的 drawRect: 方法必须用不透明的内容完全填充指定的矩形。

这意味着如果您不打算拥有透明背景，则需要实际绘制背景。最正确的方法是使用以下`drawRect:`模板：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect]; // optional if a direct UIView-subclass, should be called otherwise.

    CGContextRef context = UIGraphicsGetCurrentContext();
    // Fill the background color, if needed
    if (self.opaque) {
        UIGraphicsPushContext(context);
        CGContextSetFillColorWithColor(context, self.backgroundColor.CGColor);
        CGContextFillRect(context, rect);
        UIGraphicsPopContext();
    }

    // Your code here...
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-03T21:32:09.850

这应该有帮助

```
CGContextSetFillColorWithColor(context, colorBack);
CGContextFillRect(context, self.bounds); 
```

// 相应地选择 bounds 和 colorBack

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-04-03T08:59:38.960

请试试这个它为我工作

```
 - (id)initWithFrame:(CGRect)frame {
        if (self = [super initWithFrame:frame]) {
            [self setBackgroundColor:[UIColor clearColor]];
        }
        return self;
    }
    - (void)drawRect:(CGRect)rect
    {
        [super drawRect:rect];
        if (shouldDrawVerticalLineForProfile){

            CGContextRef context = UIGraphicsGetCurrentContext();
            CGColorRef separatorColor = [UIColor colorWithRed:47.0/255.0 green:47.0/255.0 
                                                         blue:47.0/255.0 alpha:1.0].CGColor;

            // Add at bottom
            CGPoint startPoint = CGPointMake(60, 0);
            CGPoint endPoint = CGPointMake(60, 10000);

            CGContextSaveGState(context);
            CGContextSetLineCap(context, kCGLineCapSquare);
            CGContextSetStrokeColorWithColor(context, separatorColor);
            CGContextSetLineWidth(context, 5.0);
            CGContextMoveToPoint(context, startPoint.x + 0.5, startPoint.y + 0.5);
            CGContextAddLineToPoint(context, endPoint.x + 0.5, endPoint.y + 0.5);
            CGContextStrokePath(context);
            CGContextRestoreGState(context);  

        }

    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-14T03:00:40.567

唯一对我有用的是在任何调用`setNeedsDisplay`. 在我的示例中，我使用的是 a `MKAnnotationView`over a map 的子类，而不是 a `UIScrollView`，所以我真的不*知道*这在 OP 场景中的适用程度。就我而言，我是从 调用`setNeedsDisplay`的`setAnnotation`，我发现这样做会重置`backgroundColor`。只需在解决问题`backgroundColor`后重新设置即可。`setNeedsDisplay`

FWIW，我也观察到简单地覆盖`drawRect`委托给超类会导致这个黑色背景问题。

# winforms - Datagridview 内存使用过多

> ID：11318988
> 
> 赞同：0
> 
> 时间：2012-07-03T20:52:11.297
> 
> 标签：winforms, memory, datagridview

我有一个未绑定的数据网格视图，它有 175 列和 50,000 行，主要填充双精度数。根据我的计算，这相当于 175*50000*8 字节 = 70 MB 的内存使用量。但是，任务管理器说网格使用了大约 1.2 GB 的内存 - 17 倍的开销！谁能解释为什么它会消耗这么多内存？

从关于缩放 datagridview ( [http://msdn.microsoft.com/en-us/library/ha5xt0d9.aspx](http://msdn.microsoft.com/en-us/library/ha5xt0d9.aspx) ) 的 msdn 文章中，我认为我没有做任何公然错误的事情。我没有为单个单元格设置样式或上下文菜单条。除了在列级别填充单元格值和设置格式字符串外，没有任何修改。

我知道虚拟模式或共享行可能会减少内存消耗，但鉴于我上面的计算，我认为没有必要。17x 开销对我来说听起来不合适。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:55:07.107

请记住，DataGridView 的每个单元格都包含一个[DataGridViewCell](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.aspx)实例，其中包含大约[33 个属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell_properties)。它的开销不仅仅是一个`double`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:56:37.977

您的计算基于包含 8 个字节的 System.Double。底层 System.Data.DataTable 中每个单元格的值可能有 8 个字节，但这并不意味着 DataGridView 中相同数量的数据只有 8 个字节。

每个单元格都有多个属性 - 高度、宽度、边框样式、边框颜色等。即使这些都是默认值，这些默认值也会消耗内存。

# sharepoint - 以编程方式获取存储空间分配 - 列表

> ID：11318995
> 
> 赞同：0
> 
> 时间：2012-07-03T20:52:55.853
> 
> 标签：sharepoint, post, screen-scraping

我的任务是编写一份报告，将数据从各种 SharePoint 网站的“存储空间分配”部分中提取出来。我可以通过执行一般的 GET 调用来筛选一般的“文档库”值，但我无法以编程方式获取“列表”值。当我导航到 SharePoint 网站 (*/_layouts/storman.aspx) 时，“文档库”是默认选择。我想我需要发送一个 POST 调用才能将其更改为“列表”[然后我可以抓取值]。创建适当的 POST 调用变得很麻烦，因为 SharePoint 似乎无法识别我的键/值对（或者我可能没有提供所有必要的参数？）。

我试过这段代码，但没有运气 - 只返回“文档库”数据。

```
using (System.Net.WebClient client = new System.Net.WebClient() { UseDefaultCredentials = true })
{
    NameValueCollection myQueryStringCollection = new NameValueCollection();
    myQueryStringCollection.Add(queryParameterName, queryParameterValue);

    client.QueryString = myQueryStringCollection;

    return client.DownloadString(url);
} 
```

我也试过这个（连同其他想法）：

```
private static string GetWebResponse(string url, NameValueCollection parameters)
{
    var httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
    httpWebRequest.UseDefaultCredentials = true;
    httpWebRequest.ContentType = "application/x-www-form-urlencoded";
    httpWebRequest.Method = "POST";

    var sb = new StringBuilder();
    foreach (var key in parameters.AllKeys)
        sb.Append(key + "=" + parameters[key] + "&");
    sb.Length = sb.Length - 1;

    byte[] requestBytes = Encoding.UTF8.GetBytes(sb.ToString());
    httpWebRequest.ContentLength = requestBytes.Length;

    using (var requestStream = httpWebRequest.GetRequestStream())
    {
        requestStream.Write(requestBytes, 0, requestBytes.Length);
        requestStream.Close();
    }

    Task<WebResponse> responseTask = Task.Factory.FromAsync<WebResponse>(httpWebRequest.BeginGetResponse, httpWebRequest.EndGetResponse, null);
    using (var responseStream = responseTask.Result.GetResponseStream())
    {
        var reader = new StreamReader(responseStream);
        return reader.ReadToEnd();
    }
} 
```

查看 _layouts/storman.aspx 页面的源代码，我可以看到我需要发送的名称/值对分别是**ct100$PlaceHolderMain$m_filterDropdown**和**Lists**。我通过这个视图源代码确定了这一点：

```
<select name="ctl00$PlaceHolderMain$m_filterDropdown" id="ctl00_PlaceHolderMain_m_filterDropdown" class="ms-viewselect">
<option selected="selected" value="Document Libraries">Document Libraries</option>
<option value="Documents">Documents</option>
<option value="Lists">Lists</option>
<option value="Recycle Bin">Recycle Bin</option>
</select> 
```

关于如何从此页面获取列表值的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:33:20.547

我终于想通了……

我必须发送 SharePoint 期望的每个名称/值查询参数对。为了使事情复杂化，我必须首先执行一个 GET 请求，以获取 SharePoint 期望的 __REQUESTDIGEST、__VIEWSTATE、__EVENTVALIDATION 值。此外，当我将所有参数发送回 SharePoint 时，它们必须是 UrlEncoded。

# mysql - MySQL - 具有重复固定 id 范围的查询

> ID：11318999
> 
> 赞同：1
> 
> 时间：2012-07-03T20:53:15.383
> 
> 标签：mysql

我有以下查询：

```
SELECT child.id_catalog_category AS id_category, ancestor.id_catalog_category AS tree
FROM catalog_category AS child
JOIN catalog_category AS ancestor
ON (child.lft BETWEEN ancestor.lft AND ancestor.rgt)
WHERE ancestor.id_catalog_category != 1
ORDER BY id_category ASC, tree ASC 
```

这是对分层产品类别的二叉树的重构。对于一个 id_category，我们最多可以有 4 个“树”值，如示例所示：

> id_category / 树
> 
> 3 2
> 
> 3 3
> 
> 4 2
> 
> 4 3
> 
> 4 4
> 
> 5 2
> 
> 5 3
> 
> 5 5
> 
> 6 2
> 
> 6 3
> 
> 6 6
> 
> 7 2
> 
> 7 3
> 
> 7 7

期望的结果应该是：

> id / id_category / 树
> 
> 1 3 2
> 
> 2 3 3
> 
> 3 空空
> 
> 4 空空
> 
> 1 4 2
> 
> 2 4 3
> 
> 3 4 4
> 
> 4 空空......

换句话说，我想为每个 id_category 添加一个从 1 到 4 的范围 id，如果 id_category 的值小于 4，它应该显示空值。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:20:29.307

为了复制您指定的数据集，我这样做是为了获得一个工作集：

```
CREATE TABLE cc (id_category INT, tree INT);
INSERT INTO cc VALUES (3,2),(3,3),(4,2),(4,3),(4,4),(5,2),(5,3),
                      (5,5),(6,2),(6,3),(6,6),(7,2),(7,3),(7,7);
SELECT cc.* FROM cc ORDER BY 1,2; 
```

SQL 小提琴在这里：[http ://sqlfiddle.com/#!2/16249/3](http://sqlfiddle.com/#!2/16249/3)

* * *

以下是我将如何解决这个问题。首先，我会得到一个不同的`id_category`值列表。这很简单。（我可以使用 DISTINCT 关键字而不是 GROUP BY，无论哪个。）

```
SELECT id_category
  FROM cc
 GROUP BY id_category
 ORDER BY id_category 
```

然后，我将从这些行中的每一行生成四行。所以，我将把之前的查询包装为一个内联视图（将它括在一组括号中，给它一个别名，并引用整个混乱，就像它只是一个表名一样。像这样的东西：

```
SELECT c.id_category, j_.j
  FROM (SELECT 1 AS j UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4) j_
  JOIN (
        SELECT cc.id_category
          FROM cc cc
         GROUP BY cc.id_category
         ORDER BY cc.id_category
       ) c
 ORDER BY c.id_category, j_.j 
```

我正在使用另一个内联视图来返回整数 1 到 4，并执行 CROSS JOIN 以获得每个不同 id_category 的四行。这基本上让我得到了我想要返回的结果集的轮廓......但我没有任何树列的值（NULL 除外）。

所以现在，我需要备份并开始处理另一个行集，基本上是 cc 表中的有序集，但这次包括树列中的值。我在这里不关心得到四行，只是在树列中有值的行。同样，非常简单：

```
SELECT s.id_category_id, s.tree
  FROM cc s
 ORDER BY s.id_category, s.tree 
```

但是现在，我想在每个 id_category 中为这些行中的每一行分配一个相对行号。我可以通过将该查询包装在一组括号中，给它一个别名，并将其视为一个表，如下所示：

```
SELECT @i := IF(r.id_category = @prev_idcat,@i + 1,1) AS i
     , @prev_idcat := r.id_category AS id_category
     , r.tree
  FROM (SELECT @i := 0, @prev_idcat := NULL) i_ 
  JOIN (
        SELECT s.id_category, s.tree
          FROM cc s
         ORDER BY s.id_category, s.tree
       ) r 
```

我正在使用带有用户变量的 MySQL 技巧，为每个不同的 id_category 分配从 1 开始的升序整数值。这里的技巧是让 MySQL 为我排序行（在别名为 r 的内联视图中，并将前一行中的 id_category “保存”在用户变量中，以便我可以将其与下一行进行比较。

现在我们真的达到了在 MySQL 中提供公共表表达式的地步，这将非常非常好。但由于它们不是，我们向前推进，嵌套我们的内联视图。

因此，我将为每个“行编号”查询赋予一个别名，并像引用它们一样引用它们；查询将采用以下形式...

```
SELECT b.*, q.*
  FROM ( ) b
  LEFT
  JOIN ( ) q
    ON q.id_category = b.id_category AND q.i = b.j 
```

（我们省略了这些内联视图的内容，只是为了大致了解该语句的实际作用。）

这将开始看起来很丑陋，但这就是魔术发生的地方。我从 b 中提取每个 id_category 的四行，然后将其连接到 q，匹配 id_category 和“行号”。这是一个左外连接，所以我要从 b 中获取所有行，并从 q 中选择任何“匹配”行。

```
SELECT b.id_category, q.tree
  FROM (SELECT c.id_category, j_.j
          FROM (SELECT 1 AS j UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4
               ) j_
          JOIN (
                SELECT cc.id_category
                  FROM cc cc
                 GROUP BY cc.id_category
                 ORDER BY cc.id_category
               ) c
         ORDER BY c.id_category, j_.j
       ) b   
  LEFT 
  JOIN (SELECT @i := IF(r.id_category = @prev_idcat,@i + 1,1) AS i
             , @prev_idcat := r.id_category AS id_category
             , r.tree
          FROM (SELECT @i := 0, @prev_idcat := NULL) i_ 
          JOIN (
                SELECT s.id_category, s.tree
                  FROM cc s
                 ORDER BY s.id_category, s.tree
               ) r
       ) q
    ON q.id_category = b.id_category AND q.i = b.j
 ORDER BY b.id_category, b.j 
```

规范中唯一剩下的就是为`id`列生成值。如果我要插入一个表，我可以使用一个 AUTO_INCREMENT 列来为我做这件事。但如果没有，我生成`id`值最方便的地方是在别名为 的内联视图中`b`。稍微调整一下，最后，我们就有了一个查询，它返回指定的结果集：

* * *

```
SELECT b.k AS id, b.id_category, q.tree
  FROM (SELECT @k := @k + 1 AS k
             , c.id_category
             , j_.j
          FROM (SELECT @k := 0) k_
          JOIN (SELECT 1 AS j UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4
               ) j_ 
          JOIN (
                SELECT cc.id_category
                  FROM cc cc
                 GROUP BY cc.id_category
                 ORDER BY cc.id_category
               ) c
         ORDER BY c.id_category, j_.j
       ) b
  LEFT
  JOIN (SELECT @i := IF(r.id_category = @prev_idcat,@i + 1,1) AS i
             , @prev_idcat := r.id_category AS id_category
             , r.tree
          FROM (SELECT @i := 0, @prev_idcat := NULL) i_ 
          JOIN (
                SELECT s.id_category, s.tree
                 FROM cc s
                 ORDER BY s.id_category, s.tree
               ) r
       ) q
    ON q.id_category = b.id_category AND q.i = b.j 
 ORDER BY b.id_category, b.j 
```

为了让它与您的行集一起使用，您可以`cc`用括号中的查询替换对我的表的每个引用。或者，您可以像我一样创建一个名为 cc 的表，并将查询结果插入其中。

有人可能有一个更简单的 SQL 语句，可以可靠地产生相同的结果集。我很想学习一种更简单的方法。