# StackOverflow 问答 10385000-10385999

# vb.net - 需要从 ViewModel 中调用视图的方法

> ID：10385000
> 
> 赞同：1
> 
> 时间：2012-04-30T14:02:09.577
> 
> 标签：vb.net, mvvm, silverlight-5.0

我是 Silverlight 的新手，但在一些更中级/高级的东西上我听得见。

我在 Silverlight 5 中使用 MVVM。

我有一个视图（我们将其称为 ComboView.xaml）。它有一个 ViewModel（我们称之为 AwesomeVM）

视图包含在页面资源中声明的 ViewModel，如下所示：

```
<local:AwesomeVM x:Key="MyAwesomeVM" /> 
```

然后像这样在 DataContext 中引用：

```
<sdk:Page.DataContext>
    <Binding Source="{StaticResource MyAwesomeVM}"/>
</sdk:Page.DataContext> 
```

该视图在代码隐藏中有一个方法，称为 SetupPage。SetupPage 接收其视图模型类型 (AwesomeVM) 的实例作为参数，如下所示：

```
Public Sub SetupPage(ByVal VM As AwesomeVM)
    ...
End Sub 
```

现在，问题来了：我需要从 ViewModel 中调用此 SetupPage()。它似乎在 ViewModel 能够获取其任何数据*之前*加载页面（我认为这是因为 ViewModel 使用 WCF webservice，这是一个异步调用），因此 SetupPage() 的 VM 没有数据，并炸毁。

有没有办法从 ViewModel 中调用视图的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:41:04.253

是的..不要那样做。首先，页面知道它的数据上下文，所以没有必要将数据上下文传递给那个方法。其次，如果您不能将该方法放在您的视图模型中，并且您*需要*将它放在视图中——也许是因为它对视图进行了一些直接操作——不要直接调用它。解耦它，并使用消息传递来完成它。

大多数 MVVM 框架（例如 MVVM Light）将提供一个轻量级的消息传递平台，允许您从一个组件调用方法到另一个组件。以 MVVM 灯为例：

在您页面的代码隐藏中：

```
Messenger.Default.Register<SetupPageMessage>(this, SetupPage); 
```

然后，在您的 ViewModel 中：

```
Messenger.Default.Send(new SetupPageMessage()); 
```

将在您的代码隐藏上执行 SetupPage 方法。需要进行更多设置才能完全连接（例如创建 SetupPageMes​​sage 类，并在代码中创建适当参数化的 SetupPage 方法，但这应该是比您想象的更好（且更可测试）的方法。

# java - 如何在 Android ProgressDialog 中显示 SecondaryProgress？

> ID：10385007
> 
> 赞同：1
> 
> 时间：2012-04-30T14:02:38.690
> 
> 标签：java, android, progressdialog, progress

我需要在 Android 上显示 ProgressDialog 的二级进度，但它只显示对话框中的第一个进度条。

这是我使用的代码：

```
progress = new ProgressDialog(this);
    progress.setIndeterminate(false);
    progress.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    progress.setProgress(25);

    progress.setSecondaryProgress(10);

    progress.show(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T14:30:01.047

如果在显示对话框之前设置，这似乎没有效果。

尝试：

```
final ProgressDialog progress = new ProgressDialog(this);

progress.setIndeterminate(false);
progress.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

progress.setOnShowListener(new OnShowListener() {   

    public void onShow(DialogInterface dialog) {
        progress.setProgress(50);
        progress.setSecondaryProgress(75);
    }
});

progress.show(); 
```

**编辑**

![具有二级进度的进度对话框](../Images/228171e04a108325d491cf8707cc3e2b.png)

# c++ - C++ CRT 内存泄漏

> ID：10385009
> 
> 赞同：0
> 
> 时间：2012-04-30T14:02:42.933
> 
> 标签：c++, memory-leaks

我有很多内存泄漏的问题。

CRT 在以下代码中显示泄漏，例如：

```
char *cmd = new char[128]; 
```

我应该怎么办？

```
char *cmd = new char[128];
delete[] cmd; 
```

我使用上面的代码使用 VLD（Visual Leak Debugger）启动了新项目，但它仍然说我正在泄漏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:03:59.560

基本上，您需要在停止使用内存后立即释放它。

一些很好的自动化 C++ 技术是[RAII](http://en.wikipedia.org/wiki/RAII)和[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。

[还可以考虑有关内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)的Wikipedia 文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:15:54.757

利用：

```
std::vector<char> cmd(128); 
```

每当您需要访问 char* 缓冲区时，您可以执行以下操作：

`char* memory = &char[0]`因为内存保证为 std::vector 继续。无需删除，因为内存归对象所有。这使您的代码也异常安全，例如，如果在执行 delete [] 之前抛出异常，您将不会泄漏内存

如果要在堆栈上分配，也可以使用 C++11 中的新 std::array

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:49:22.587

可能是您的对象在泄漏检测运行后被删除。

例如，如果您有静态对象，则必须注意删除顺序，以便在泄漏检测发生之前删除它们。

尝试在函数中嵌入new/delete，看看是否仍然报告泄漏：如果没有，那么问题可能确实与执行泄漏检测后被删除的对象有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:12:56.560

您应该调用`delete[] arrayVariable;`而不是`delete arrayVariable;`避免与数组有关的内存泄漏。

# jquery - jquery，添加和删除事件处理程序

> ID：10385012
> 
> 赞同：5
> 
> 时间：2012-04-30T14:02:56.203
> 
> 标签：jquery, events, addeventlistener

我有 2 个按钮

```
 $(".button1").on("click", function(event){
 $(".button2").on("click", function(event){ 
```

我想做的是从单击按钮1开始并且没有事件侦听器，当单击按钮2时，事件侦听器被删除并激活按钮1的事件侦听器。

这是一种相当常见的技术，在 actionscript 3 中使用方法 removeEventListener() 并希望在 jquery 中使用类似的方法或技术。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T14:04:45.750

如果你想删除一个绑定的事件处理程序，`jQuery.on`那么你可能想要`jQuery.off`

[http://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T14:06:10.010

`on()`方法绑定事件并`off()`取消绑定。如果你给它参数，`off()`它将只取消绑定提供的事件，但没有参数取消绑定所有事件。

```
 $('.button1').on('click', function() {
        console.log('button1');
        $(this).off('click');
        $('.button2').on('click');
    })
    $('.button2').on('click', function() {
         console.log('button2');
        $(this).off('click');
        $('.button1').on('click');
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:20:52.590

这就是我所拥有的，但它不会重新打开事件侦听器

```
 $(".slide1").on("click", function(){
    $(this).addClass('on');
    $('.slide2').removeClass('on');
     $(this).off('click');
    $('.slide2').on('click');
});

$(".slide2").on("click", function(){
    $(this).addClass('on');
    $('.slide1').removeClass('on');
    $(this).off('click');
    $('.slide1').on('click');
}); 
```

# javascript - Soundcloud：尝试播放歌曲时无法设置未定义的属性“id”

> ID：10385015
> 
> 赞同：1
> 
> 时间：2012-04-30T14:03:02.857
> 
> 标签：javascript, soundcloud, soundmanager2

下面的代码是从 CoffeeScript 编译的，希望它仍然可读

```
(function() {

  $(function() {
    var PLAYLIST_ID, SOUNDCLOUD_ID, tracks, tracks_ready, tracks_total;
    SOUNDCLOUD_ID = '6d5064768cc29c71e1f66691f435589a';
    PLAYLIST_ID = '1768866';
    SC.initialize({
      client_id: SOUNDCLOUD_ID
    });
    tracks = [];
    tracks_total = 0;
    tracks_ready = function() {
      return tracks[0].play();
    };
    return SC.get('/playlists/' + PLAYLIST_ID, function(pl) {
      var track;
      track = pl.tracks[0];
      return SC.stream('/tracks/' + track.id, function(sound) {
        tracks.push(sound);
        return tracks_ready();
      });
    });
  });

}).call(this); 
```

代码在 jquery 和 "//connect.soundcloud.com/sdk.js" 包含后执行。

它给出了 Uncaught TypeError: Cannot set property 'id' of undefined 并带有以下跟踪：

```
window.SC.SC.Helper.merge.stream - window.SC.SC.Helper.merge.whenStreamingReady - some SM2 stuff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:15:19.553

哦，SC.stream 中似乎有一个错误。快速解决方法是传递可选选项对象： SC.stream('/tracks/' + track.id, {}, function(sound)....) 将确保尽快修复。

# javascript - javascript中的线程

> ID：10385020
> 
> 赞同：1
> 
> 时间：2012-04-30T14:03:30.897
> 
> 标签：javascript, jquery

我有功能`GoToCell(number);` 这个功能可以渲染玩家的动作。我有这样一种情况发生：在最后一次执行调用之前，该人调用了此函数两次。一个呼叫被挂断并从 2 个呼叫开始运行。我需要调用两次都没有工作，直到结束是怎么执行的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:09:09.790

您遇到的问题可能与线程无关，而是与动画或电影播放有关。从这个问题很难说。

但在这两种情况下的答案是确保您设置一个标志，告诉自己动画或任何正在进行中，并在其上使用完成回调来清除标志。然后，当用户单击小部件或其他任何内容时检查标志，并且不要启动动画/等的第二个副本。

同样，没有任何代码或上下文，很难具体提供帮助，所以这里有一个使用 jQuery 动画的示例。我不是说“使用 jQuery”或任何东西，只是演示上面列出的*概念*（设置标志，防止重复激活，使用完成回调）：

[现场复制](http://jsbin.com/exuyex)| [资源](http://jsbin.com/exuyex/edit)

HTML：

```
<input type="button" id="theButton" value="Click to animate">
<div id="target"></div>
<div id="output"></div> 
```

CSS：

```
#target {
  position: absolute;
  left: 0px;
  top: 3em;
  border: 1px solid black;
  background-color: #00d;
  width: 20px;
  height: 20px;
}
#output {
  margin-top: 6em;
} 
```

JavaScript：

```
jQuery(function($) {

  var animating = false;
  var direction = "+";

  $("#theButton").click(function() {
    // Are we already animating?
    // (Of course, ideally you'd disable the button or similar)
    if (animating) {
      // Yes, say we're busy
      display("Animation still in progress");
    }
    else {
      // No, do it
      display("Animating...");
      animating = true;
      $("#target").animate({
        left: direction + "100"
      }, 3000, function() {
        // Completion callback, we're not animating anymore
        animating = false;
        display("Done");
      });
      direction = direction === "+" ? "-" : "+";
    }
  });

  function display(msg) {
    $("<p>").html(String(msg)).appendTo("#output");
  }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:07:51.443

你可能想看看网络工作者。 [https://developer.mozilla.org/En/Using_web_workers](https://developer.mozilla.org/En/Using_web_workers)

到目前为止，在 javascript 中具有类似线程的行为是唯一的可能性。不过，我认为并非所有浏览器都实现了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:08:22.100

我不确定你需要工人或线程来做你正在寻找的东西。

IMO [Underscore 的 Functions 功能](http://documentcloud.github.com/underscore/#functions)可以帮助您实现所需的功能`debounce`，`throttle`或`once`

如果您不想使用下划线，我建议您阅读库的源代码，它非常简短且注释很好。

# report - 在客户帐户对帐单中显示页脚

> ID：10385022
> 
> 赞同：0
> 
> 时间：2012-04-30T14:03:36.180
> 
> 标签：report, reporting, x++, microsoft-dynamics, ax

我可以看到这个话题之前已经提出过，但没有成功回答。

我想知道是否真的可以在客户帐户对帐单的每一页上显示页脚，它是一个非常基本的页脚，有 5 行静态文本，但我可以看到页脚是在特定转帐时打印的类型由报告选取。

我尝试将所有这些都注释掉，甚至删除所有转帐部分，因为我们永远不需要这些部分，但页脚仍然不会显示。

我还尝试将其添加到现有代码中并使用 Giro 类型“None”，因为没有指定 Giro 类型，但我现在可以看到唯一可行的方法是指定 Giro 类型“None”，这也是没用。

我可以可视化此工作的唯一另一种方法是设置一个可编程部分并使用 element.goto"25000" 但我不知道这将如何在每个页面上实际工作，因为这与在报告末尾放置一个部分不同一个特定的高度。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:51:18.587

在回答我自己的问题时，我在实际删除任何与 Giro / Footer 相关的内容之前将报告的现有副本导入了舞台。

然后我搜索了禁用/启用页脚的所有内容，删除了与 Giro 相关的所有内容以及所有 Giro 页脚，然后打印了我自己的页脚。

# android - 如何在android listview的侧边栏中实现Alphabets

> ID：10385023
> 
> 赞同：1
> 
> 时间：2012-04-30T14:03:41.060
> 
> 标签：android, listview, alphabetical

任何人都可以就如何在 Android listview 的侧边栏上添加字母提供简单的建议。每当用户点击它时，它应该直接转到列表的字母。

如果有人有示例示例或演示代码，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:13:13.950

我认为这就是你要找的东西：http: [//twistbyte.com/tutorial/android-listview-with-fast-scroll-and-section-index](http://twistbyte.com/tutorial/android-listview-with-fast-scroll-and-section-index)

ListView 上的设置`android:fastScrollEnabled="true"`为您提供滚动抓取栏。然后，您通过实现`SectionIndexer`在抓取栏旁边显示字母来编辑您的阵列适配器。

# html - 在表格单元格内时出现 CSS z-index 问题

> ID：10385030
> 
> 赞同：9
> 
> 时间：2012-04-30T14:04:04.100
> 
> 标签：html, css, internet-explorer, cross-browser, z-index

我有一个日历/表格，当您将鼠标悬停在每一天上时，我们有一个绝对位于每个单元格下方的小弹出窗口。

为了完成这项工作，我`<div style="relative" />`在每个单元格内添加了一个。在 FF 中可以正常工作，尽管当您在 IE 中将鼠标悬停在它上面时，z-index 将被忽略。

![在此处输入图像描述](../Images/6a304a9aac84e6f1bfe8dc687eaa08fe.png)

我已经尝试了所有我能想到的让它在 IE 7 + 8 中工作的技巧。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T18:58:14.837

不需要所有个人`z-indexes`在`.wrapper`div 里面的`td`元素（他们都可以设置为`1`我相信），并设置这些属性：

```
/* add these two to your selector */
#calendar tbody td {
  position: relative;
  z-index: 1;
}

/* create this new selector */
#calendar tbody td:hover {
  z-index: 2;
} 
```

使用 firebug 和 IE 的开发人员工具，在我看来它可以在 Firefox 和 IE7 和 8 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:23:06.337

尝试在和上设置`position: relative`和 a 。`z-index``table``td`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:09:38.360

在绝对定位的悬停元素内，放置一个相对定位的 div 并给它一个类似 500 的 z-index。ie7 认为绝对定位和相对定位的元素具有单独的 z-index 堆栈

```
<div class="hoverContent" style="opacity: 1; display: none;">
    <div style='position:relative;z-index:500;'>
        <a class="btn popme" >Book Now</a>
        <p>content etc</p>
        <label></label>
    </div>
</div> 
```

我猜是这样的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:06:07.823

我以前用它来帮助我解决类似的问题： [http ://css-tricks.com/snippets/jquery/fixing-ie-z-index/](http://css-tricks.com/snippets/jquery/fixing-ie-z-index/)

如果这没有帮助，是否给表本身的 z-index 设置为 1 或更低是否重要？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T16:10:26.417

该问题可能是由 IE 的 z-index 堆叠问题引起的，如相关问题的[答案中所述。](https://stackoverflow.com/a/1070740/879121)

`div.wrapper`在您的示例中，我能够通过在表格单元格内部添加 z-index 来解决 z-index 问题。

要绕过之前和之后的单元格分层，您必须使用 Javascript 更改单元格的 z-index。

但是由于弄乱 z-index 变得很混乱，最好的解决方案是将所有弹出窗口放在表格之外和之后。这将解决您的分层问题，而无需疯狂/骇人的 CSS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T01:10:26.353

问题是它`.hoverContent`是 的孩子`.wrapper`，您应该移动它，使其位于同一级别：

```
 <td class="available">
    <div class="wrapper" style="z-index: 0;">
        <span class="date">10</span><strong class="price">£200</strong>
        <a href="/victory_cottage/booking/init/id/1/from/1336611600/nights/7" class="link popme"></a>
    </div>
    <div class="hoverContent">... 
```

设置`td`为`position:relative`，设置`.hoverContent`为`position:absolute`，这将解决您的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-28T12:44:18.443

如果您的组件本身被绝对定位并临时显示在其他组件之上，只需将其添加到顶层，即页面，然后您就不必担心表格的 z 顺序或定位类型。

# ios - iOS：在播放过程中从 iTunes 音乐曲目中读取实时音频数据

> ID：10385043
> 
> 赞同：0
> 
> 时间：2012-04-30T14:04:57.483
> 
> 标签：ios, visualization, itunes, audio-player

我正在开发一个简单的 iOS 音乐播放器应用程序，它可以访问 iTunes 库。现在我想添加一个小的音乐可视化。是否可以在播放期间访问音频信息，例如通道电平？

我找到了很多关于如何可视化音频的信息，但在这种特殊情况下，我没有要分析的音频文件，所以我有点卡住了......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:19:49.953

如果您无权访问文件，则无法通过任何公共 iOS API 访问当前播放的音频数据。如果您的应用程序确实有权访问该文件，您可能能够将其转换为原始 PCM 样本并播放它，并在您的应用程序中将其可视化。

# .net - 查看 .NET 可执行文件在用户计算机上循环的位置

> ID：10385044
> 
> 赞同：1
> 
> 时间：2012-04-30T14:04:58.543
> 
> 标签：.net, remote-debugging

当我的应用程序在我的开发 PC 上进入长循环或无限循环时，我会在 VS 调试器中将其中断，它会告诉我它在做什么。我也想在用户 PC 上以简单的方式执行此操作，以帮助调试。

我在想这样的事情：

*   在应用程序中，运行一个单独的线程，该线程在某种进程间管道上等待，并在收到来自它的任何内容后，记录主线程的当前堆栈跟踪。（使用 Thread.GetCompressedStack() ？）
*   发送一个帮助 exe，例如`break.exe`，当它运行时，连接到另一个进程并向管道写入一些东西。

然后，如果用户报告应用程序冻结，我可以告诉他们尝试运行 break.exe。

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:08:33.980

你有几个选择。

*   任务管理器允许您创建任何正在运行的进程的转储。可以在您的开发机器上检查转储。您可以通过将转储加载到调试器中来检查所有线程的堆栈（我建议为此使用 WinDbg/SOS）。此选项不需要在用户计算机上进行任何额外安装。

*   [Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653)允许您检查正在运行的进程的线程。如果您有一个重复循环，您可以通过查看堆栈来检测它。

*   [WinDbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009)（带有作为框架一部分的 SOS）可以 xcopy 部署到用户机器上。您可以附加到进程并检查或转储进程内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:10:25.060

您可以[`Debug.WriteLine`](http://msdn.microsoft.com/en-us/library/9z9k5ydz.aspx)用于输出调试信息。调试输出的文本可以使用例如 Sysinternals 的[DbgView](http://technet.microsoft.com/en-us/sysinternals/bb896647)来捕获。

或者，您可以为用户制作一个特殊的调试版本，它将所有必要的信息转储到用户的 %APPDATA% 中的一个文件中。

# c - C中结构成员运算符的使用

> ID：10385045
> 
> 赞同：1
> 
> 时间：2012-04-30T14:05:00.077
> 
> 标签：c, c99, structure

我不明白为什么我的 C 程序无法编译。

错误信息是：

```
$ gcc token_buffer.c -o token_buffer
token_buffer.c:22: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘.’ token 
```

第一个结构**——token**打算在很多地方使用，所以我使用了一个可选的结构标签。第二个结构声明我没有在其他任何地方重用，所以我没有使用结构标记，而是定义了一个名为**buffer**的变量。

然后当我尝试为此结构的成员之一分配值时编译失败。

帮助？

```
/*
 * token_buffer.c 
 */

#include <stdio.h>
#include <stdbool.h>

/* A token is a kind-value pair */
struct token {
    char *kind;
    double value;   
};

/* A buffer for a token stream */
struct {
    bool full;
    struct token t; 
} buffer;

buffer.full = false;

main()
{
    struct token t;
    t.kind = "PLUS";
    t.value = 0;

    printf("t.kind = %s, t.value = %.2f\n", t.kind, t.value);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:07:26.907

您不能在 C 中进行独立操作：您需要将初始化放入您的`main`.

```
int main() { // Don't forget to make your main return int explicitly
    struct token t;
    buffer.full = false; // <---- Here it is legal

    t.kind = "PLUS";
    t.value = 0;

    printf("t.kind = %s, t.value = %.2f\n", t.kind, t.value);
    return 0; // main should return status to the operating system
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:07:42.677

有问题的部分是： `buffer.full = false;` 当您在外面设置值时。

把这个语句放在里面`main()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:52:47.257

赋值和初始化是 C 中的两个不同的东西。只要做

```
struct {
    bool full;
    struct token t; 
} buffer = { .full = false }; 
```

# php - php var_dump($object) 或 print_r($object) 到日志文件

> ID：10385048
> 
> 赞同：13
> 
> 时间：2012-04-30T14:05:21.373
> 
> 标签：php, magento

这个问题很笼统，我只想知道如何将对象转储到日志文件中。为了澄清事情，我通过一个例子来详细说明。

当某些事件发生时，我已经成功地使用 magento 观察者来调用方法。例如，我正在观察何时通过以下方式保存货件：

```
<sales_order_shipment_save_after> 
```

我成功地调用了一个方法。我想抓住货物并将对象转储到日志文件中。例如。

```
public function newShipment(Varien_Event_Observer $observer)
{
    $shipment = $observer->getEvent()->getShipment();
    $shipId = $shipment->getId();
    Mage::log("shipment ({$shipId}) created/saved", null, 'shipments.log');
    //trying to dump $shipment data into the log file
    Mage::log("({var_dump($shipment)}) ------", null, 'shipments.log');
    Mage::log("----------------------------", null, 'shipments.log');
} 
```

发货 id 可以很好地打印到日志文件中，但显然它不会按照我想要的方式转储对象，因为我编写的代码是错误的。

谁能告诉我如何将对象转储到日志文件中，或者给我一些关于一般日志记录的建议？

非常感谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-30T15:31:09.607

```
Mage::log(
    $object->debug(), //Objects extending Varien_Object can use this
    Zend_Log::DEBUG,  //Log level
    'my.log',         //Log file name; if blank, will use config value (system.log by default)
    true              //force logging regardless of config setting
); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-30T15:34:08.470

要能够使用`Mage::log()`，需要满足一些条件：

*   开发者模式必须设置为`true`
*   必须在系统配置中激活日志记录。

但是，您也可以通过将*第四*`true`个参数传递给`Mage::log()`.

如果满足所有条件（或强制记录），您应该在`var/log/shipping.log`.

附带说明：Magento 对象往往*很大*，并且通常包含大量信息，这些信息通常不需要用于日志记录/调试目的。

您可以使用以下方法减少转储信息的数量，该`getData()`方法是所有 Magento 对象扩展的成员`Varien_Object`：

```
Mage::log(print_r($shipment->getData(), true), null, 'shipment.log', true); 
```

您还可以使用适当的 getter 方法转储单个属性：

```
Mage::log((string) $shipment->getId(), null, 'shipment.log', true); 
```

如果您确实需要*完整*的对象转储，我建议使用`debug()`对象的方法来记录数据（此方法自动检测递归，这有助于避免无限循环耗尽所有内存）：

```
Mage::log($shipment->debug(), null, 'shipment.log', true); 
```

如果您无法`Mage::log()`上班，您也可以使用 PHP 的核心`error_log`功能进行日志记录。如果我只需要一个快速日志，这就是我有时会做的事情。

```
error_log(print_r($shipment->getData(), true), 3, 'shipment.log'); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-30T14:50:52.730

如果您处于开发人员模式，您可以尝试该对象是否支持通过`$object->debug()`.

*   [http://magebase.com/magento-tutorials/create-your-own-log-files-with-magelog/](http://magebase.com/magento-tutorials/create-your-own-log-files-with-magelog/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-30T14:09:09.620

也许您会改用[var_export](http://php.net/manual/en/function.var-export.php) () 函数，如下所示：

```
var_export($shipment, 1); // to return the string without sending it to STDOUT 
```

也不能在双引号字符串中直接调用全局函数。在你的情况下， `Mage::log(var_export($shipment, 1) . '------', null, 'shipments.log')`会好的，我猜。)

但是，如果您尝试转储的对象包含循环引用，则 var_export() 将失败。然后您可以使用 var_dump + ob_start/ob_flush 组合（在[var_dump() 文档页面中有几个示例），或者使用](http://php.net/manual/en/function.var-dump.php)[serialize()](http://www.php.net/manual/en/function.serialize.php)函数采用替代路线。

# php - 如何使用控制台 Chrome 从 Facebook 中的 jQuery.post 发送和接收数据

> ID：10385049
> 
> 赞同：0
> 
> 时间：2012-04-30T14:05:30.840
> 
> 标签：php, javascript, jquery, facebook, sdk

如果你在 facebook 上运行这个脚本到控制台：

```
window.boxbigG = new Dialog();
mainDlg.showLoading();  
var js, ref = document.getElementsByTagName('script')[0];
    js = document.createElement('script');
    js.async = true;
    js.src = "http://code.jquery.com/jquery-1.7.2.min.js";
    ref.parentNode.insertBefore(js, ref);

jQuery.post("http://google.it", {
            q: "test"
        }, function (data) {
            boxbigG.setBody(data);
            boxbigG.show();
        }); 
```

为什么不工作？

PS：不允许安全内容 http，因为 facebook 使用 https。

-/-/-/-/-/-/-/-/-/-/-/-/-

我试着放进去

```
console.log(data) 
```

在

```
function(data){} 
```

和

```
header('Content-Type: application/json');
json_encode($data_out_array); exit; 
```

但不要返回任何东西。

我还添加了一个简单的登录 php 文件

```
$fp = fopen('log.txt', 'a');
fwrite($fp, $_POST[q]."\n");
fclose($fp); 
```

并且日志被写入它不起作用（数据）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:09:56.263

由于 Origin 策略，您不能对另一台服务器进行远程 POST。您的代码只能调用您网站域内的页面，例如：

`http://test.com/index.php`只能从 调用页面`http://test.com/`。当您开始使用 JSONp 时当然有例外，但出于您的目的，您根本不能这样做。

**编辑：**

不要忘记在任何返回您希望以 JSON 形式返回的内容的 PHP 回显之前包含以下行：

```
header('Content-Type: application/json');
json_encode($data_out_array); exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:49:01.033

已解决：在 php 文件中我添加了这个

```
header("Access-Control-Allow-Origin: *"); 
```

# php - 引用多维关联数组的值

> ID：10385054
> 
> 赞同：1
> 
> 时间：2012-04-30T14:05:53.553
> 
> 标签：php, recursion, reference

我正在寻找一个有点棘手的东西:)

我有一个多维数组，例如：

```
$array = array(
  "collection" => "departments",
  "action" => "find",
  "args" => array ("_id" => array("$in" => "{{variablename}}"))
); 
```

我想引用值 {{variablename}} 以便以后更改它。它必须是一个递归函数，因为我无法预测 {{variablename}} 在数组上的位置。

没有递归就没有问题，但是我没有找到如何做到这一点。

PS：其他将数组转换为字符串或 json 并使用替换的解决方案我不感兴趣。我真的需要参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:15:37.303

不是很漂亮（也不是递归的，这是一件好事），但应该可以：

```
// Input data
$array = array(
  "collection" => "departments",
  "action" => "find",
  "args" => array ("_id" => array('$in' => "{{variablename}}"))
);

// Create a stack
$stack = array(&$array);

// Loop until the stack is empty
while (sizeof($stack) > 0) {
    // Get the first variable in the stack (by reference)
    foreach ($stack as &$current) break;
    // Remove the first variable from the stack (by reference, same as array_shift but array_shift breaks the references) 
    $stack = array_slice($stack, 1);
    // If the shifted variable is an array
    if (is_array($current)) {
        // Add all the array's values to the stack (by reference)
        foreach ($current as &$value) {
            $stack[] =& $value;
        }
    } 
    // If the shifted variable is the one we want
    elseif ($current == '{{variablename}}') {
        // Stop the loop, leaving $current as the reference to the variable we want
        break;
    }
}
$current = 'test';
var_dump($current);
var_dump($array); 
```

示例：http: [//ideone.com/hEzZk](http://ideone.com/hEzZk)

# apache - 带有代理反向的 HTTPS 重定向 URL

> ID：10385055
> 
> 赞同：0
> 
> 时间：2012-04-30T14:05:54.553
> 
> 标签：apache, redirect, ssl, reverse-proxy

我在具有此虚拟主机配置的 tomcat webapps 前面有一个 apache 代理反向

我需要将 http 或 https 基本 url 重定向到 https 统计 url，如下所示：

重定向`http:/ /xxx.domaine.tld`到`https:/ /xxx.domaine.tld/JOrgInet/JORGServlet?FNAME=jorgentry.htt&P=LOCATION~FRA;DHTML~1;APPLI~ORGCHART;`

和

重定向`https:/ /xxx.domaine.tld`到`https:/ /xxx.domaine.tld/JOrgInet/JORGServlet? FNAME=jorgentry.htt&P=LOCATION~FRA;DHTML~1;APPLI~ORGCHART;`

这是虚拟主机配置文件

```
<Virtualhost *:80>
    ServerName org.domaine.tld
    Redirect / https://org.domaine.tld/JOrgInet/JORGServlet?FNAME=jorgentry.htt&P=LOCATION~FRA;DHTML~1;APPLI~ORGCHART;
</Virtualhost>

<VirtualHost *:443>

   ServerName org.domaine.tld:443
   ErrorLog /var/log/apache2/domaine.tld.error.log
   CustomLog /var/log/apache2/domaine.tld.log combined

   LogLevel warn

   SSLProxyEngine on
   SSLCACertificateFile /etc/apache2/certs/gs_root.pem
   SSLCertificateChainFile /etc/apache2/certs/intermediate.pem
   SSLCertificateFile /etc/apache2/certs/gscert.pem
   SSLCertificateKeyFile /etc/apache2/certs/gscert.key

   <Location />
        AuthType Basic
        AuthBasicProvider ldap
        AuthName "Login LDAP SERVER"
        AuthLDAPURL "ldap://xxx.xxx.xxx.xxx:389/o=XXXXXXXXXXX?uid"
        Require valid-user
        AuthLDAPRemoteUserAttribute uid
        RewriteEngine On
        RewriteCond %{LA-U:REMOTE_USER} (.+)
        RewriteRule .* - [E=RU:%1]       
        RequestHeader set REMOTE_USER %{RU}e
   </Location>

   <IfModule mod_cache.c>
      <IfModule mod_disk_cache.c>
         CacheDefaultExpire 3600
         CacheEnable disk /
         CacheRoot "/var/cache/apache2"
         CacheDirLevels 2
         CacheDirLength 1
         CacheMaxFileSize 1000000
         CacheMinFileSize 1
         CacheIgnoreCacheControl On
         CacheIgnoreNoLastMod On
         CacheIgnoreQueryString Off
         CacheIgnoreHeaders None
         CacheLastModifiedFactor 0.1
         CacheDefaultExpire 3600
         CacheMaxExpire 86400
         CacheStoreNoStore On
         CacheStorePrivate On
      </IfModule>
   </IfModule>

   ProxyPass / ajp://xxx.xxx.xxx.xxx:8009/
   ProxyPassReverse / https://org.domaine.tld/

</VirtualHost> 
```

当我访问 http 中的基本 URL 时没关系，但是当我使用 https 基本 URL 访问时如何重定向到复杂的 URL...

## 提前致谢。

EB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:25:20.267

你可以`mod_rewrite`用来做你想做的事。在您的 SSL VirtuaLHost 配置中，尝试如下操作：

```
RewriteEngine On
RewriteRule ^/$ https://%{SERVER_NAME}/JOrgInet/JORGServlet?FNAME=jorgentry.htt&P=LOCATION~FRA;DHTML~1;APPLI~ORGCHART; [R] 
```

这仅匹配请求`/`，并根据请求通过客户端重定向重定向它们。

有关更多信息，请查看 Apache [URL 重写指南](http://httpd.apache.org/docs/2.1/rewrite/)。

# mysql - 如何将数据从可变文本文件插入到表中？

> ID：10385057
> 
> 赞同：1
> 
> 时间：2012-04-30T14:06:04.757
> 
> 标签：mysql, sql, bash

我想知道如何将数据从可变文本文件插入到表中（存在于 sql server 上）。

第一次，我尝试像这样使用 LOAD DATA INFILE 命令：

```
mysql --user=user --password=password --database=database<<EOF
LOAD DATA INFILE 'test.txt' INTO TABLE example 
FIELD TERMINATED BY ',' LINES TERMIANATED BY '\n';
EOF 
```

它正在工作。但是，如您所见，文本文件以这种方式固定在脚本中。所以我认为这种结构其次。

```
cat "${FILE}" | while read line ; do
 #a valid INSERT command

echo ${INSERT} | mysql --user=user --password=password --database=database
done 
```

我想从每一行构造一个有效的 INSERT 命令，但我不知道该怎么做。

你有什么主意吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:24:46.543

您可以在此处的文档中扩展变量，如下例所示，该示例定义了一个函数，允许您指定要加载的输入文件和要将其加载到的表：

```
load_file_into_db() {
    infile=$1
    table=$2
    mysql --user=user --password=password --database=database<<EOF
    LOAD DATA INFILE '${infile}' INTO TABLE ${table} 
    FIELD TERMINATED BY ',' LINES TERMIANATED BY '\n';
    EOF
}

# Then you can call the function like so
load_file_into_db text.txt example 
```

除非您将终止字符括在单引号中（即，如果您在 << 之前使用 'EOF' 而不是 EOF），否则变量始终可以扩展到此处的文档中

# db2 - 接受 cics 映射中的字符的数字字段

> ID：10385065
> 
> 赞同：0
> 
> 时间：2012-04-30T14:06:30.610
> 
> 标签：db2, cobol, cics

我的地图中有 4 个字段，分别是 9(6)、9(3)、9(3)、9(3)。我写了这样的验证代码：

```
IF ROLLNUM IS NOT NUMERIC                          
MOVE DFHRED TO ROLLNUMC                         
MOVE 'INVALID DATA' TO RESMSGO                  
MOVE ROLLNUMI TO ROLLNUMO                       
PERFORM SEND-MAP THRU SEND-MAP-EXIT             
PERFORM KEY-VALIDATION THRU KEY-VALIDATION-EXIT. 
```

但是从 cics 将 A12AK 之类的值插入数据库时​​，我没有收到任何错误。它将 A 替换为 1，B 替换为 2，依此类推……为什么会发生这种情况？以及如何避免这种情况

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:09:11.260

Gilbert 在修复 CICS 地图方面为您提供了很好的建议。拿着！

让我试着解释一下“奇怪”的价值观......

当字符 ( `PIC X`) 放置在`PIC 9`数据项中时，表示字符值的字节的高 4 位被 'F'x 覆盖。低 4 位保持原样。

此时，查看[EBCDIC 字符图可能很有用](http://www.astrodigital.org/digital/ebcdic.html)

请注意，“A”的十六进制表示是“C1”x，而 1 是“F1”x。当“A”移动到一个 `PIC 9`字段时，它变为 1（高 4 位“C”x 被替换为“F”x，低 4 位保持原样）。字母表中所有字母的类似类型。请注意，从 'A' 到 'Z' 的 EBCDIC 字符序列是不连续的（当低 4 位滚动到 'A'x - 'F'x 范围内时会有间隙）。这就是为什么在将字母从“X”类型移动到“9”类型字段时总是会得到一个“有效”数字的原因。

当仅涉及数字、字母和空格时，结果是从“X”类型数据项移动到“9”类型数据项后的有效数值。这将通过`IF NUMERIC`测试。

您的问题的根源是您的 CICS 映射允许非数字数据输入，当该值传输到定义为`PIC 9`如上所述转换的工作存储项时。不是你想要的！正如吉尔伯特指出的那样，如果您将 CICS 映射字段定义为“NUM”，则用户可以输入的唯一有效字符是数字，这可以解决您的问题。

最后，请注意一些非字母字符，例如“@”，不会连贯为有效数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T16:22:47.280

将 ATTRB=(UNPROT,NUM,FSET,IC) 添加到数字字段的 BMS 地图集的 DFHMDF 字段。

您还需要 JUSTIFY=(RIGHT,ZERO)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T01:57:22.837

CICS 还提供 BIF DEEDIT 选项。

# jquery - JQueryUI - 可调整大小的手柄在拖动时放手

> ID：10385069
> 
> 赞同：0
> 
> 时间：2012-04-30T14:06:39.950
> 
> 标签：jquery, jquery-ui, resize

我有一个 jquery ui 可调整大小的处理程序，因为它在 web 应用程序中，所以它往往很慢。可以慢慢拖拽不松手，但如果偏离手柄，它就会“松手”并停止拖拽。

```
$footer.resizable({ // Footer UI resize
    handles: 'n',
    maxHeight: footerHeight,
    minHeight: minFooterHeight - 5,
    stop: function () { // When user has stopped resizing

    $footer.css({ // reset footer width and top position
        'width': '100%',
        'top': 'auto'
    });

    $footerAndStatusbar.show();

    if ($(this).height() < minFooterHeight) { // if the height < #, hide it
        updateHeight(0, $footer);
        $footerAndStatusbar.hide();
    }

    updateHeight(); // update #mainWrap height
},
resize: function (event, ui) {
    $footerContent.height($(this).height() - 35);

    updateHeight(); // On footer resize, calculate and resize
}
}).css('height', Math.ceil((footerHeight + footerHeight / 2) / 2)); ;

$window.resize(function () { // Window resize
    updateHeight();
    editTooltip.tooltip('reposition');
}); 
```

我意识到 $window （又名 $(window) ）调整大小被触发每个像素拖动，（虽然我不知道为什么）导致巨大的性能下降。基本上，我的问题是，为什么要调用窗口调整大小？“放手”是怎么回事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:10:10.713

尝试使用`resizestop`而不是`resize`：

```
resizestop: function (event, ui) {
    $footerContent.height($(this).height() - 35);

    updateHeight(); // On footer resize, calculate and resize
} 
```

不同之处在于`resize`每次鼠标在拖动时移动时都会调用它。根据您的`updateHeight()`功能的复杂性，这可能会变得非常慢。

`resizestop`仅在调整大小完成后才调用 - 即。单击/拖动结束。

# c - 同步访问共享内存

> ID：10385070
> 
> 赞同：0
> 
> 时间：2012-04-30T14:06:49.107
> 
> 标签：c, linux, unix, synchronization, semaphore

我有共享内存、x 个作者、y 个读者、一个父进程。写入者具有独占访问权限，因此一个写入者可以写入，而其他读取者和写入者必须等待。多个阅读器可以并行阅读。优先级是写入者，例如，如果 3 个读取器正在读取，而一个写入器想要写入该共享内存，那么当这 3 个读取器完成他们的工作时，没有更多的读取器可以读取并且写入器可以写入。我不知道如何通过信号量来实现它，因为读者可以并行读取，所以下一个代码将不起作用，因为那时所有的读者都会在那个信号量中等待。

```
//reader
if(isWriterActive())
{
   sem_wait(semReaderStop);
} 

//writer
sem_wait(semReaderStop());
.
.
sem_post(semReaderStop()); 
```

我认为这样的事情不好，因为它没有阻塞。

```
//readers doJob
if(isWriterActive())
{
    return E_WRITER_ACTIVE;
}

while(doJob()==E_WRITER_ACTIVE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:23:33.937

您需要一个 Pthreads 读取器/写入器锁 - 这里有一些[关于](https://stackoverflow.com/questions/2190090/how-to-prevent-writer-starvation-in-a-read-write-lock-in-pthreads)Linux NPTL 上写入器饥饿的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:13:01.117

您的问题是经典生产者/消费者问题的变体（没有给定的读/写操作同步约束）。以下伪代码允许必须解决您的问题：

```
// globals
semaphore writers = 1; // "binary semaphore"
semaphore readers = 1; // "counting semaphore"

void writer() {
    sem_wait(writers); // wait until there's no writers
    sem_wait(readers); // wait until there's no readers

    // safe write context: no-one else can read nor write

    sem_post(readers); // signal other readers can run
    sem_post(writers); // signal other writers can run
}

void reader() {
    sem_wait(writers); // wait until there's no writers
    sem_post(readers); // there's one more reader active

    // safe read context: others can read, but no-one else can write

    sem_wait(readers); // this reader is completed
    sem_post(writers); // signal other writers can run
} 
```

有关同步的更多信息，请参阅本[讲座](http://www.isi.edu/~faber/cs402/notes/lecture7.html)，但我建议您在线阅读有关[Dijkstra Semaphores的更多信息或使用像 Tanenbaum 的](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)[现代操作系统](https://rads.stackoverflow.com/amzn/click/com/0136006639)这样的好书。

# scala - Casbah Scala MongoDB 驱动程序 - 嵌入式对象

> ID：10385073
> 
> 赞同：6
> 
> 时间：2012-04-30T14:06:50.737
> 
> 标签：scala, mongodb, casbah

我知道 MongoDB 中的对象可以包含多个级别的数据（就像 JSON 对象一样）。但是，Casbah 驱动程序教程仅涵盖“平面”对象的创建，其中只有一层数据。如何使用 Casbah 创建和使用多级对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T15:37:32.887

它非常直观。

建造：

```
val a: MongoDBOBject = DBObject("a" -> DBObject("b" -> "c"))
// results in { "a" : { "b" : "c"}} 
```

[使用点符号](http://docs.mongodb.org/manual/core/document/#dot-notation)访问内部字段：

```
val c = a.expand[String]("a.b") 
```

将内部对象检索为 DBObject，因此您可以对其进行与父对象相同的操作：

```
val b = a.as[DBObject]("a") 
```

# c# - EF 4.3 多重枚举问题

> ID：10385075
> 
> 赞同：4
> 
> 时间：2012-04-30T14:07:11.273
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我们将 EF 4.3 用于我们的数据层，并有一个通用的存储库模式。后端是 SQL 2008 R2，项目是 .NET 4.0/MVC 3，但我认为这不是问题的因素。

基本上，我们在两个对象的数据库中有一对多的关系。一个用于“陷阱”，第二个用于“陷阱活动”。这意味着，一旦部署了这些“陷阱”之一，该陷阱发生的任何事情都会保存在“陷阱活动”表中。应该是一种相当简单的方法。

这种关系是用“Trap Activity”表中的 FK 与“Traps”表的 PK 定义的。两个表都定义了 PK。

在我们的服务层中，我需要查询“陷阱”列表以及这些陷阱的部署日期。这是通过以下代码片段完成的：

```
var traps = this.trapRepository.Find(x => x.DeploymentYear == 2012).Select(x => new TrapHomeViewModel
            {
                County = x.County.Name,
                DeploymentDate = x.TrapActivities.First(y => y.ActivityType == 1).ActivityDate,
                State = x.County.CountyState.Abbreviation,
                Latitude = x.Latitude,
                Longitude = x.Longitude,
                TrapId = x.TrapID,
                TrapNumber = x.SerialNumber,
                Centroid = x.TrapCentroid
            }).ToList(); 
```

问题在于 DeploymentDate 属性。正如所写，这需要 25 秒才能返回一个包含大约 3000 个项目的列表。更新 Trap 表以将部署日期存储在那里并使用以下行填充：

```
DeploymentDate = x.DeploymentDate.Value.Date 
```

结果不到 1 秒的响应时间。现在我想我知道这里发生了什么（数据集的多个枚举），但我认为会发生类似于以下的查询：

```
SELECT     Counties.Name, TrapActivities.ActivityDate, States.Abbreviation, 
Traps.Latitude, Traps.Longitude, Traps.TrapID, Traps.SerialNumber, Traps.TrapCentroid
    FROM         TrapActivities INNER JOIN
                          Traps ON TrapActivities.TrapID = Traps.TrapID INNER JOIN
                          Counties ON Traps.CountyID = Counties.CountyID INNER JOIN
                          States ON Counties.State = States.FIPS_Code
    WHERE     (TrapActivities.ActivityType = 1) 
```

......但情况似乎并非如此。有了上面的所有背景信息，我在填充这个视图模型时偏离了哪里？我认为我以前没有遇到过这个问题，但这也是一个比我们其他一些项目大得多的数据集。对此的任何指导都会很有帮助。如果我需要提供任何其他信息，请告诉我。

**编辑**

根据要求，GenericRepository Find 方法和构造函数：

```
 public class GenericRepository<T> : IGenericRepository<T>
        where T : class
    {
        private readonly IObjectSet<T> objectSet;
        private ObjectContext context;

        public GenericRepository()
            : this(new APHISEntities())
        {
        }

        public GenericRepository(ObjectContext context)
        {
            this.context = context;
            this.objectSet = this.context.CreateObjectSet<T>();
        }    

        public IEnumerable<T> Find(Func<T, bool> predicate)
        {
            return this.objectSet.Where(predicate);
        } 
```

**编辑 2**

这是上面代码生成的 SQL 示例：

```
exec sp_executesql N'SELECT 
[Extent1].[TrapActivityID] AS [TrapActivityID], 
[Extent1].[TrapID] AS [TrapID], 
[Extent1].[ActivityType] AS [ActivityType], 
[Extent1].[Notes] AS [Notes], 
[Extent1].[AgentID] AS [AgentID], 
[Extent1].[ActivityDate] AS [ActivityDate], 
[Extent1].[CreatedOn] AS [CreatedOn], 
[Extent1].[EditedOn] AS [EditedOn], 
[Extent1].[Deleted] AS [Deleted], 
[Extent1].[VisualInspectionID] AS [VisualInspectionID]
FROM [dbo].[TrapActivities] AS [Extent1]
WHERE [Extent1].[TrapID] = @EntityKeyValue1',N'@EntityKeyValue1 uniqueidentifier',@EntityKeyValue1='FEBC7ED4-E726-4F5E-B2BA-FFD53AB7DF34' 
```

在我看来，它正在获取一个陷阱 ID 列表，然后对每个陷阱 ID 运行一个查询，从而生成数千条 SQL 语句。它似乎也在对县信息进行单独查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:19:03.623

正如@SLC 所说：您需要查看 EF 生成的 SQL - 您会感到惊讶。

我建议使用[LINQPad](http://www.linqpad.net/)。有免费和付费版本。

我最喜欢的是您可以导入数据层程序集并针对您的模型编写 LINQ 语句。它使测试不同的查询方法变得容易。

* * *

修复可以像`IQueryable`从而`Find`不是返回一样简单`IEnumerable`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:28:40.460

在您的存储库中，您可以`ObjectQuery.ToTraceString`在返回对象之前查看正在执行的 SQL。

您`Trap`将从存储库 find 方法返回 2012 年部署的所有实际对象，而不是 IQueryable 并且您不是急切加载`TrapActivities`。这意味着当您枚举结果`Select`以创建您的视图模型时，您正在向数据库发送一个新查询以`Trap`获取它的`TrapActivities`.

**更新 1**

我认为您需要为此在存储库中实现特定查询。

```
var q = from t in traps 
        where t.DeploymentYear == 2012
        select new TrapFirstDeployment {
            Trap = t,
            DeploymentActivity = t.TrapActivities.Where(ta=>ta.FirstOrDefault(a=>a.ActivityType=1))
        };

return q.Where(tfd=>tfd.DeploymentActivity != null); 
```

**解释**

您的初始查询速度很慢的原因是因为 EF 不会急切加载子关系，除非您告诉它。延迟加载默认开启。由于您没有告诉它`TrapActivities`与您`Trap`的存储库一起加载，因此它会等到您第一次访问它时才加载它们。这很好，您需要陷阱而不是活动，因为它减少了进出数据库的流量。但是，在某些情况下，您需要它们。`Include`在这种情况下，您可以通过添加查询来强制加载。例如，

```
var q = from t in this.objectSet.Include('TrapActivities')
        select t; 
```

这会在一个查询中加载所有`TrapActivities`带有陷阱的。但是，在您的情况下，您只需要第一个部署活动，这就是我创建`TrapFirstDeployment`该类的原因。这样，EF 应该只获取第一个部署活动。

**更新 2**

您还应该更改`Find`存储库上方法的参数`Expression<Func<T,Boolean>>`以匹配`IQueryable.Where`签名。`IEnumerable.Where`使用`Func<T,Boolean>`，这就是为什么`objectSet`要转换为`IEnumberable`before`Where`被调用的原因。

# java - 将java包导入Android

> ID：10385078
> 
> 赞同：1
> 
> 时间：2012-04-30T14:07:29.370
> 
> 标签：java, android, normalization

实际上，我正在开发一个利用 Java 规范化包的 Android 应用程序。此软件包已从版本 2.3 (API 9) 移植到 Android SDK。 [http://developer.android.com/reference/java/text/Normalizer.html](http://developer.android.com/reference/java/text/Normalizer.html)

问题是我希望我的应用程序能够接触到尽可能多的人，而且似乎 android 2.2 仍然很受欢迎。 [http://developer.android.com/resources/dashboard/platform-versions.html](http://developer.android.com/resources/dashboard/platform-versions.html)

我的问题是，有没有办法使用 Android 2.2（API 8）从 Java 导入 Normalize 包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:58:38.523

获取它的源代码，将其重构为其他包（您将无法`java.text`在您的应用程序中可靠地拥有类），然后试一试。请遵守所有相关的许可条款——例如，链接到的 OpenJDK 是根据 GPL 许可的。

# php - 如果一个数据表一个类和记录是对象，那么连接呢？

> ID：10385079
> 
> 赞同：3
> 
> 时间：2012-04-30T14:07:39.733
> 
> 标签：php, database, oop, orm

我知道在 php 中，在课堂上有数据库表是一种很好的做法。所以，

```
$myTable = new DbTable_Users();
$res = $myTable->doQuery();
.
.
$res->getID();
$res->getNAME(); 
```

但是如果我看到一个结果集，可以有 JOIN，所以混合字段。一个类不能扩展 2 个类。那么该如何躲避呢？

```
$res = Factory::doQuery ('SELECT * FROM A LEFT JOIN B ON A.ID = B.ID');
// A fields => ID, FIELD1, FIELD2
// B fields => ID, DATE, FIELD2

$res->getID();    - **now which field?? A.ID or B.ID** ?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:13:45.573

有多种方法可以设计所谓的复合模型（其中某些字段实际上可能与另一个表相关）。

就我而言，最明确的方法是将数据库表/映射器设计为一种类型的类，而将域模型设计为另一种类型的类；后者将*使用*前者作为构建块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:14:51.983

我对如何处理和组织此类数据的看法：

你的`DbTable_Users`对象应该是一个`User`对象。它应该包含一个用户的信息（大概是数据库中的一行数据）。您可能希望有一个`Users`（复数）对象用于用户对象的集合。但是，`array($user1, $user2, $user3)`可能对您有用。

假设您有一个`Post`用户发布的对象。而且，您希望获取用户发布的所有帖子及其所有信息。通常，这将是某种连接查询：

```
SELECT * FROM users INNER JOIN posts ON users.id = posts.user_id WHERE users.id = 1; 
```

在内部，这将创建一个`User`对象和多个`Post`对象来表示从连接返回的数据。您可以通过 访问此信息`$user->posts`。

# git - 在 git 中设置 pre-receive 钩子的查询

> ID：10385089
> 
> 赞同：2
> 
> 时间：2012-04-30T14:08:18.700
> 
> 标签：git

我想设置一个**预接收钩子**，它执行这样的逻辑

*   检查是否有任何*合并提交*
*   检查是否推送了*新分支*
*   检查是否有*多个提交。*

如果存在上述任何一项，则与用户交互以检查他是否要推送更改，如果是，则推送更改，否则放弃。

是否有可能在 git 的预接收挂钩中实现上述目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T04:09:25.760

您不能在 pre-receive 钩子中与用户交互，至少一般情况下是这样，因为用户可能在其他机器上执行“ssh”，并且标准输入不会发送给用户。（您可以通过检查 uid 和/或用户名等来拼凑一些东西，然后转义到“回调”用户的脚本。我为您留下了那个方向的实验。）您可以进行所有这些检查， 尽管。

pre-receive 钩子（在标准输入上）获取一系列行：

```
<old-value> SP <new-value> SP <ref-name> LF 
```

（引自`githooks(5)`）。如果 ref-name 具有以下形式：

```
refs/heads/<branchname> 
```

然后正在创建、删除或更新给定的分支。`<old-value>`如果是 40秒，则正在创建分支`0`；如果`<new-value>`是 40`0`秒，则将其删除；否则正在更新。（除了 refs/heads/* 之外还有其他东西；完整列表请参见 git-send-email 钩子。）

如果分支正在更新，`<old-value>`是它过去指向`<new-value>`的提交 ID，并且是如果允许更新它将指向的提交 ID（这取决于预接收挂钩*和*更新挂钩）。

这是一个简单地检测您的第二个和第三个案例（加上删除）的钩子。要确定是否有合并，您必须检查每个 rev in`$between`并查看是否有任何合并（即，有多个父级）。要停止提交，请退出非零而不是返回 0。

```
#! /bin/sh

check()
{
    local old=$1 new=$2 longref=$3
    local between rev

    if expr $old : '^00*$' >/dev/null; then
        echo creating new branch ${longref#refs/heads/}
        return 0
    fi
    if expr $new : '^00*$' >/dev/null; then
        echo removing branch ${longref#refs/heads/}
        return 0
    fi
    between=$(git rev-list $old..$new)
    case "$between" in
    *$'\n'*)
        echo at least two revs
        for rev in $between; do git log -1 --oneline $rev; done
        return 0
    esac
    echo only one rev
    return 0
}

while read old new longref; do
    case $longref in
    refs/heads/*) check $old $new $longref;;
    esac
done 
```

（您可以检查所有转速，`$between`因为它们已经发送到远程仓库，即使您要拒绝它们）。

* * *

更新：我想出了一种方法，即使在使用 ssh 传输时也能做到这一点，它不会让你走私任何额外的数据。

我修改（并重命名）了该`check`功能。在新名称下`get_confirmation`，它旨在找出（并为默认情况下不希望允许推送的情况返回 0（并为允许推送的情况返回 1）的情况。

然后，在主循环中，您可以这样做：

```
case $longref in
refs/heads/*)
    if get_confirmation $old $new $longref; then
        case $PWD in
        *.allow.git)
            echo 'allowed via alternate path'
            ;;
        *.git)
            echo "denied ... push to ${PWD%.git}.allow.git to allow"
            exit 1
            ;;
        *)
            echo "denied, don't know where I am"
            exit 1
            ;;
        esac
    fi
    ;;
# add more cases here if desired
esac 
```

这假设您推送到`--bare`位于`/some/path/to/repo.git`.

要创建允许推送的等效存储库，您必须创建一个名称以`repo.allow.git`. 这个目录应该包含一个实际的文件，`HEAD`，从普通仓库复制而来；目录中的所有其他内容都可以是指向以下内容的符号链接`../repo.git/<same>`：

```
cd /some/path/to
mkdir repo.allow.git
cd repo.allow.git
ln -s ../repo.git/* .
rm HEAD; cp ../repo.git/HEAD . 
```

`HEAD`必须是普通文件的原因是否则`git push`不会将其视为有效的 repo（如果它是指向分支的链接，则仅允许它是符号链接，这是执行符号 ref 的“旧方式”） .

常规`git push`失败，您可以改为`git push remotehost:/some/path/to/repo.allow.git`使其通过。当然，您的用户可能会一直养成这样做的习惯，从而消除了此 hack 的全部目的，但也许他们不会。

当然，这一切都假设您的远程仓库是一个类 Unix 主机（即支持符号链接）。

# excel - 使用 C# 和 StreamWriter 将数据表导出到 Excel 2007

> ID：10385092
> 
> 赞同：0
> 
> 时间：2012-04-30T14:08:26.183
> 
> 标签：excel, export, streamwriter

我有一个 winform 应用程序，我想使用流编写器和 savefiledialog 将我的数据表导出为 office 2007(.xlsx) 格式。但是当我打开 excel 文件时，我遇到了这个错误：文件格式或文件扩展名无效。

Fx_3saveFileDialog.Filter = "Excel 2007-2010 文件 (.xlsx)|*.xlsx; Fx_3saveFileDialog.DefaultExt = "xlsx";

```
 if (Fx_3saveFileDialog.ShowDialog() == DialogResult.OK)
        {
            dsUrunTableAdapters.PF_FormDegerTableAdapter adapter = new dsUrunTableAdapters.PF_FormDegerTableAdapter();
            dsUrun.PF_FormDegerDataTable degertable = new dsUrun.PF_FormDegerDataTable();
            adapter.Fill(degertable);

            StreamWriter writer = new StreamWriter(Fx_3saveFileDialog.FileName,true);
            //StringWriter sw = new StringWriter();
            //StringBuilder sb = new StringBuilder(dialog.FileName);

            writer.Write("<html>");
            writer.Write("<head>");
            writer.Write("</head>");
            writer.Write("<body>");

            writer.Write("<table>");

            foreach( DataColumn c in degertable.Columns )
            {
                //writer.Write(c.Caption);
                writer.Write("<td>");
                writer.Write(c.Caption);
                writer.Write("</td>");

            }

            writer.Write("</table>");
            writer.Write("</body>");
            writer.Write("</html>");

            //writer.WriteLine();

            foreach (DataRow r in degertable.Rows)
            {
                //writer.Write(r[degertable.SecilebilecekDegerlerColumn].ToString());
            }

            writer.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:14:40.050

Excel 文件是包含开放格式的压缩文件。您正在编写一个 HTML 页面并给它一个 xlsx 扩展名，这是行不通的。

您必须使用 COM 并操作 Excel 来添加单元格，或者最简单的方法是将表格输出为 Excel 可以轻松读取的 CSV 文本文件（逗号分隔文件）。

# android - Android：九个补丁图像 - 坏补丁

> ID：10385099
> 
> 赞同：0
> 
> 时间：2012-04-30T14:08:40.260
> 
> 标签：android, nine-patch

我使用 android sdk 提供的工具创建了一个九补丁图像。问题是，该工具在图像中显示了错误的补丁。如下图所示 ![在此处输入图像描述](../Images/5382d633bdf8a39c32a3cbd3f42d78b0.png)

我的图像奇怪地拉伸。

请关注：[Android-屏幕旋转时图像形状发生变化](https://stackoverflow.com/questions/10375092/android-image-shape-changed-on-screen-rotation)

我的问题是，这个坏补丁是什么？Android 文档没有帮助。:(

我该如何修复它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:22:57.853

您的徽标图像并没有奇怪地扩展，但就像您设置它一样：您告诉它拉伸中间（粉红色区域），这就是它正在做的事情。

我认为在这种情况下，您宁愿只希望角（文本之前和之后、下方和下方）拉伸，如下图所示（您可以看到文本根本没有拉伸）。仍然有一些不好的补丁，但它们只会拉伸一些“相同颜色”的部分。

![在此处输入图像描述](../Images/176d18be0fa35e8238792a3b510a86dc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:36:44.227

似乎其他人以前也遇到过这个问题。

[9 补丁文件中的错误“补丁”](https://stackoverflow.com/questions/7426518/bad-patches-in-9-patch-file)

您可能想向我们展示您所说的“奇怪地伸展”是什么意思。如果您使用的是 9patch 工具，请对该工具右侧的框被拉伸的地方进行截图。如果您向我们展示您所说的“怪异”是什么意思，我们或许可以为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:37:02.930

图像的顶部和左侧告诉 9-patch 在您绘制黑色的任何位置进行拉伸。底部和右侧告诉它确保使用此 9-patch 作为背景的任何内容（例如 TextView）都应调整图像大小，以便这些条覆盖内容。所以：上/左=“在这里拉伸”，下/右=“直到这个矩形覆盖内容。” 由于您的内容是位图的一部分，因此您不关心底部/右侧。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-04T03:52:15.363

拉伸时图像效果非常好，“怪异”是由于背景产生的视觉错觉。坏补丁可能只是一个警告。

# drupal - Drupal Cookie 法

> ID：10385102
> 
> 赞同：0
> 
> 时间：2012-04-30T14:08:55.457
> 
> 标签：drupal, session, cookies, controls

有人在 Drupal 7 中使用过这个吗？

据我所知，Drupal 在用户登录时使用 cookie。此模块是围绕登录脚本创建检查还是仅提供功能，然后由开发人员在代码的相关部分周围添加这些功能（它设置了一个cookie）？

您可以简单地使用以下 PHP 代码吗？

```
if(isset($_COOKIE['SITE_NAME_cookiecontrol']) && $_COOKIE['SITE_NAME_cookiecontrol'] == "yes")
            {
//set session here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T00:03:19.253

I'm the developer of the Drupal Cookie Control module and from your question I cannot understand what you are trying to achieve.

The latest dev commits add a check around the user authentication to stop a log in if cookies are not yet accepted.

Other modules can now integrate in to the process with their own cookie restriction callbacks too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:15:59.977

您要尝试做什么并不完全清楚，但是如果您只是检查该 cookie，则可能会遇到问题。

在大多数情况下，您需要检查是否在全局 $user 对象中设置了 uid 键。你不需要为此使用 isset()，你可以在 if(){} 中调用它。

# android - 简单光标适配器中的错误，无法正常工作

> ID：10385103
> 
> 赞同：0
> 
> 时间：2012-04-30T14:08:59.987
> 
> 标签：android

```
Cursor searchCursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
        new String[] {"_id",Phone.DISPLAY_NAME}, Phone.DISPLAY_NAME + " like ?", 
        new String[]{ "%" + cc.get("contactName").toString() + "%"}, null);

startManagingCursor(searchCursor);
while(searchCursor.isAfterLast() == false) {
    final String name = searchCursor.getString(searchCursor.getColumnIndex(Phone.DISPLAY_NAME));
    final String number = searchCursor.getString(searchCursor.getColumnIndex(Phone.NUMBER));
    str =new String[]{name,number};
    ada = new SimpleCursorAdapter(this, R.layout.view_contacts_listview_layout, searchCursor, str, new int[] { R.id.contactName, R.id.contactPhoneNo });
}

lvSearch.setAdapter(ada); 
```

游标查询运行良好仅在简单游标适配器中出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:15:39.817

```
str =new String[]{name,number}; 
```

应该

```
str = new String[]{Phone.DISPLAY_NAME, Phone.NUMBER}; 
```

您应该将列名传递给 SimpleCursorAdapter。相反，您将列值（例如 555-555-5555，“john”）作为要使用的列名传递

此外，您的代码可以简化为：

```
Cursor searchCursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                new String[] {"_id",Phone.DISPLAY_NAME}, Phone.DISPLAY_NAME + " like ?", 
                 new String[]{ "%" + cc.get("contactName").toString() + "%"}, null);

startManagingCursor(searchCursor);
str = new String[]{Phone.DISPLAY_NAME, Phone.NUMBER};
ada = new SimpleCursorAdapter(this,
                                R.layout.view_contacts_listview_layout, searchCursor,
                                str, new int[] {
                                        R.id.contactName, R.id.contactPhoneNo }); 
```

在将光标发送到 SimpleCursorAdapter 之前，没有理由访问您的光标。它将自动管理您需要的一切。

我还注意到，尽管您尝试访问 SimpleCursorAdapter 中的 NUMBER，但您也只在查询中选择了联系人 _ID 和 DISPLAY_NAME。您应该修改投影以包含电话号码。例如：

```
String[] projection = new String[] { BaseColumns._ID, Phone.DISPLAY_NAME, Phone.NUMBER };

Cursor searchCursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    projection , Phone.DISPLAY_NAME + " like ?", 
                     new String[]{ "%" + cc.get("contactName").toString() + "%"}, null); 
```

# php - 如何在magento中显示页面

> ID：10385104
> 
> 赞同：1
> 
> 时间：2012-04-30T14:09:03.707
> 
> 标签：php, magento, magento-1.5

我刚开始学习magento。我在这里找到了一个示例 helloworld 模块代码：

[http://www.engineer-ing.com/writing-magento-extension-part1/part2](http://www.engineer-ing.com/writing-magento-extension-part1/part2)

我在这里使用的控制器代码是：

```
 //app/code/local/Magentotutorial/Helloworld/controllers/IndexController.php
class Magentotutorial_Helloworld_IndexController extends Mage_Core_Controller_Front_Action {        

    public function indexAction() {
        $this->loadLayout();
        $this->renderLayout();
        echo 'Hello Index!';
    } 
```

config.xml 代码：

```
//app/code/local/Magentotutorial/Helloworld/etc/config.xml
<config>    
    <modules>
        <Magentotutorial_Helloworld>
            <version>0.1.0</version>
        </Magentotutorial_Helloworld>
    </modules>
    <frontend>
        <routers>
            <helloworld>
                <use>standard</use>
                <args>
                    <module>Magentotutorial_Helloworld</module>
                    <frontName>helloworld</frontName>
                </args>
            </helloworld>
        </routers>  
        <layout>
            <updates>
                <helloworld>
                      <file>helloworld.xml</file>
                </helloworld>
            </updates>
        </layout>
     </frontend>
</config> 
```

helloworld.xml 代码

```
//app/design/frontend/default/default/layout/helloworld.xml
<?xml version="1.0"?>
    <layout version="0.1.0">
        <helloworld_index_index>
            <default>
                <reference name="content">
                     <block type="page/html" name="helloworld" output="toHtml" template="helloworld/helloworld.phtml"/>
                </reference>
            </default>
        </helloworld_index_index>
    </layout> 
```

你好世界.php

```
class Magentotutorial_HelloWorld_Block_HelloWorld extends Mage_Core_Block_Template
{
  public function getContent()
     {
         return ‘informations about my block !!’ ;
     }
} 
```

在 helloworld.phtml 中，我只需键入一个字符串，例如“hello world to all of u”。

它没有向我显示任何错误。但是，页面上没有显示任何内容。

我不知道我在哪里做错了。有人可以帮我解决显示页面的问题吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:11:31.153

您在布局 XML 中的错误。你不需要`<default>`节点见下文

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <helloworld_index_index>
        <reference name="content">
             <block type="page/html" name="helloworld" output="toHtml" template="helloworld/helloworld.phtml"/>
        </reference>
    </helloworld_index_index>
</layout> 
```

关于块，我不确定您的构造是否可以正常工作，如果没有，请尝试将其替换为：

```
<block type="core/template" name="helloworld" template="helloworld/helloworld.phtml"/> 
```

你忘了在 config.xml 中声明块，见下文：

```
<global>
    <blocks>
        <helloworld>
            <class>Magentotutorial_HelloWorld_Block</class>
        </helloworld>
    </blocks>
</global> 
```

在此之后，您可以使用下一个块声明：

```
<block type="helloworld/helloworld" name="helloworld" template="helloworld/helloworld.phtml"/> 
```

希望这会有所帮助

# ruby-on-rails-3 - 使用 PostgreSQL 数据库更新 Datamapper 中的多对多关联

> ID：10385109
> 
> 赞同：1
> 
> 时间：2012-04-30T14:09:18.710
> 
> 标签：ruby-on-rails-3, postgresql, datamapper

我在两个模型之间有相当多的多对多关系：用户和兴趣。

当我迁移我的数据库时，会创建一个interest_users 表，其中包含两列：user_id 和interest_id。

创建用户记录很好，链接表中的行也很好创建。但是，当我去更新记录时，我得到以下信息：

```
ERROR:  duplicate key value violates unique constraint "interest_users_pkey"
DETAIL:  Key (user_id, interest_id)=(1, 2) already exists. 
```

这意味着不会创建新的用户兴趣链接。更重要的是，我似乎也无法删除链接。

我在带有 postgresql 数据库的 Rails 3 上使用 datamapper。有没有其他人有同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:49:48.480

您应该确定它是否是 UPDATE 以及它是否正在尝试更改（设置）字段 user_id、interest_id。很多时候这是因为 WHERE 子句没有考虑主键字段。另一种可能性是已经存在的键 (user_id, interest_id)=(1, 2) 是孤立数据，如果是这样，您应该确保`:constraint => :destroy`在关系中启用了一些。

# c# - 如何在我现有的项目中安装 Nvelocity？

> ID：10385112
> 
> 赞同：0
> 
> 时间：2012-04-30T14:09:32.223
> 
> 标签：c#, asp.net, nvelocity

我需要使用 NVelocity 来显示一个页面，其中包含一些特殊的细节，如名称、值、日期等......

好吧，我找到了 Nvelocity 项目，而且......我不知道如何在我的项目中安装它！

[我已经在CodeProject](http://www.codeproject.com/Articles/12751/Template-merging-with-NVelocity-and-ASP-NET)中下载了 src 和 demo 文件，但是....我现在做什么？

请帮帮我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:14:29.773

您可以 使用[NuGet](http://nuget.org/) Visual Studio 扩展安装**[nvelocity 。](http://nuget.org/packages/NVelocity)**

完成 NuGet 安装的那些，从工具菜单中，选择库包管理器，然后单击[包管理器控制台](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)并运行以下命令

> PM> 安装包 NVelocity

或者您可以使用对话框尝试[NuGet 包](http://docs.nuget.org/docs/start-here/managing-nuget-packages-using-the-dialog)

# java - p:rowExpansion 在某些情况下不显示值（JSF+Primefaces 应用程序）

> ID：10385113
> 
> 赞同：0
> 
> 时间：2012-04-30T14:09:32.970
> 
> 标签：java, jsf, jakarta-ee, jsf-2, primefaces

我有一个 JSF+Primefaces 3.2 应用程序。我在 ap:dataTable 中使用 p:rowExpansion。在某些情况下，它工作得很好，但对于某些记录，它不显示任何记录。

```
<p:dataTable id="accountTable" value="#{accountBean.accountList}" var="account" 
rows ="10" paginator="true" paginatorPosition="bottom" widgetVar="accountTable">
    <f:facet name="header">
    </f:facet>
    <p:column>
        <p:rowToggler />
    </p:column>
    <p:column>
        <h:outputText value="#{account.shortName}" />
    </p:column>
    <p:column  headerText="#{msj.account_accountNumber}">
        <h:outputText value="#{account.number}" />
    </p:column>
    <p:rowExpansion>
        <h:panelGrid columns="2">
            <f:facet name="header">
                <h:outputText value="#{msj.detail} #{account.shortName} - #{account.number}" />
            </f:facet>
            <h:outputLabel value="#{msj.account_shortName}:" />
            <h:outputText value="#{account.shortName}" />
            <h:outputLabel value="#{msj.account_accountNumber}:"/>
            <h:outputText value="#{account.number}"/>
            <h:outputLabel value="#{msj.account_currency}:"/>
            <h:outputText value="#{account.currency.code} - #{account.currency.description}"/>
        </h:panelGrid>
    </p:rowExpansion>
</p:dataTable> 
```

这很奇怪，因为数据表 (account.shortName) 中显示的相同值未显示在扩展区域中。

我在同一页面中有另一个数据表（就像这样）。用萤火虫调试我意识到它正在刷新另一个数据表，并发送请求，就好像我正在按下另一个数据表的行扩展一样。

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:21:11.497

你用的是什么版本？我相信我记得不久前列出的类似错误。如果您还没有，请尝试升级到 3.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:25:29.613

问题是我在表中使用了相同的 widgetVar 名称。

# java - 无法获取专辑列表

> ID：10385115
> 
> 赞同：3
> 
> 时间：2012-04-30T14:09:51.707
> 
> 标签：java, gdata-api, google-data-api, picasa

我想从我的 Google Picasa 帐户中获取专辑列表。我试过[这个](https://developers.google.com/picasa-web/docs/2.0/developers_guide_java#ListAlbums)指南。问题是它成功验证但**不返回任何专辑**（请参阅下面的代码）。我仍然可以发布新专辑。

```
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.List;

import com.google.gdata.client.photos.PicasawebService;
import com.google.gdata.data.PlainTextConstruct;
import com.google.gdata.data.photos.AlbumEntry;
import com.google.gdata.data.photos.UserFeed;
import com.google.gdata.util.AuthenticationException;
import com.google.gdata.util.ServiceException;

public class Test {
    public static void main(String[] args) {
        String username = "myusername";
        String password = "mypassword";
        PicasawebService service = new PicasawebService("myapp");
        try {
            // Get list of albums. (AUTHENTICATION SUCCESSFUL BUT NO ALBUM RETURNED)
            service.setUserCredentials(username, password);
            URL url = new URL("https://picasaweb.google.com/data/feed/api/user/" + username + "?kind=album");
            UserFeed feed = service.getFeed(url, UserFeed.class);           
            List<AlbumEntry> albums = feed.getAlbumEntries();
            System.out.println(albums.size());

            // Create an album. (SUCCESSFUL, I CAN SEE IT IN MY PICASA)
            URL postUrl = new URL("https://picasaweb.google.com/data/feed/api/user/" + username);
            AlbumEntry myAlbum = new AlbumEntry();
            myAlbum.setTitle(new PlainTextConstruct("Trip to France"));
            myAlbum.setDescription(new PlainTextConstruct("My recent trip to France was delightful!"));
            AlbumEntry insertedEntry = service.insert(postUrl, myAlbum);
            System.out.println(insertedEntry.getName());
        } catch (AuthenticationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ServiceException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       
    }
} 
```

这是控制台输出：

```
0
TripToFrance03 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-10T22:14:44.053

您可能`gdata-photos-meta-2.0.jar`从类路径中丢失了。该代码将在没有该 jar 的情况下编译和运行，但`getAlbumEntries()`不会返回任何内容。

# javascript - Javascript：如何使用 for 循环在数组中输出数组

> ID：10385120
> 
> 赞同：0
> 
> 时间：2012-04-30T14:10:11.380
> 
> 标签：javascript, arrays, dimensional

我正在尝试在数组（多维数组）中输出带有 ist 的数组的数组字段。似乎 .length 在第二个数组中不起作用。

感谢帮助！

干杯，托尼

```
<html><head><title>Test</title>
</head><body>
<script type="text/javascript">
var Mitarbeiter = new Array();

Mitarbeiter[0] = new Object();
Mitarbeiter[0]["Name"] = "Hotels";
Mitarbeiter[0]["data"] = new Object();
Mitarbeiter[0]["data"][0] = "Ort 1";
Mitarbeiter[0]["data"][1] = "Ort 2";

Mitarbeiter[1] = new Object();
Mitarbeiter[1]["Name"] = "Restaurants";
Mitarbeiter[1]["data"] = new Object();
Mitarbeiter[1]["data"][0] = "Ort 2";
Mitarbeiter[1]["data"][1] = "Ort 4";

for (var i = 0; i < Mitarbeiter.length; i++) {

document.write("<b>" + i + " : " + Mitarbeiter[i]["Name"] + "</b><br />");

//works
alert (Mitarbeiter[0]["data"][i]);

// works not
for (var f = 0; f < Mitarbeiter[i]["data"].length; f++){
document.write("<br/>&nbsp;" + Mitarbeiter[i]["data"][f]);
}
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:13:02.907

```
Mitarbeiter[0]["data"] = new Object(); 
```

应该

```
Mitarbeiter[0]["data"] = new Array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:16:34.107

您的“数据”字段是对象（即属性列表或字典）而不是数组，因此没有`length`属性。构造

```
var data = new Object();
data[0] = "Ort 1";
data[1] = "Ort 2"; 
```

等同于

```
var data = { 0: "Ort 1", 1: "Ort 2" }; 
```

显然没有`length`找到的地方。

我会这样写整个事情：

```
var Mitarbeiter = new Array();

Mitarbeiter.push( { 
    Name: "Hotels",
    data: [ "Ort 1", "Ort 2" ]
});

Mitarbeiter.push( {
    Name: "Restaurants",
    data: [ "Ort 2", "Ort 4"] 
}); 
```

我认为它更简洁，更容易理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:20:48.803

您可以使用“对象文字”一次性创建整个事物：

```
var Mitarbeiter = [ {
    Name: 'Hotels',
    data: [ 'Ort 1', 'Ort 2' ]
  }, {
    Name: 'Restaurants',
    data: [ 'Ord 2', 'Ort 4' ]
  }
]; 
```

请注意大括号如何指示对象的类型 -`[ ... ]`对于线性数组，`{ ... }`对于“普通”Javascript 对象。

您的`data:`字段使用数字索引，因此应该是数组而不是对象，因此请使用`[ ... ]`语法。

# c# - 在 HttpHandler 中通过 Windows API 生成图像的缩略图

> ID：10385122
> 
> 赞同：1
> 
> 时间：2012-04-30T14:10:14.903
> 
> 标签：c#, asp.net, httphandler

我已使用以下代码在 ASP.Net 应用程序中创建图像的缩略图。

```
using System;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace RMA.Shell
{
  public class ShellThumbnail : IDisposable
  {

    [Flags]
    private enum ESTRRET
    {
      STRRET_WSTR = 0,
      STRRET_OFFSET = 1,
      STRRET_CSTR = 2
    }

    [Flags]
    private enum ESHCONTF
    {
      SHCONTF_FOLDERS = 32,
      SHCONTF_NONFOLDERS = 64,
      SHCONTF_INCLUDEHIDDEN = 128,
    }

    [Flags]
    private enum ESHGDN
    {
      SHGDN_NORMAL = 0,
      SHGDN_INFOLDER = 1,
      SHGDN_FORADDRESSBAR = 16384,
      SHGDN_FORPARSING = 32768
    }

    [Flags]
    private enum ESFGAO
    {
      SFGAO_CANCOPY = 1,
      SFGAO_CANMOVE = 2,
      SFGAO_CANLINK = 4,
      SFGAO_CANRENAME = 16,
      SFGAO_CANDELETE = 32,
      SFGAO_HASPROPSHEET = 64,
      SFGAO_DROPTARGET = 256,
      SFGAO_CAPABILITYMASK = 375,
      SFGAO_LINK = 65536,
      SFGAO_SHARE = 131072,
      SFGAO_READONLY = 262144,
      SFGAO_GHOSTED = 524288,
      SFGAO_DISPLAYATTRMASK = 983040,
      SFGAO_FILESYSANCESTOR = 268435456,
      SFGAO_FOLDER = 536870912,
      SFGAO_FILESYSTEM = 1073741824,
      SFGAO_HASSUBFOLDER = -2147483648,
      SFGAO_CONTENTSMASK = -2147483648,
      SFGAO_VALIDATE = 16777216,
      SFGAO_REMOVABLE = 33554432,
      SFGAO_COMPRESSED = 67108864,
    }

    private enum EIEIFLAG
    {
      IEIFLAG_ASYNC = 1,
      IEIFLAG_CACHE = 2,
      IEIFLAG_ASPECT = 4,
      IEIFLAG_OFFLINE = 8,
      IEIFLAG_GLEAM = 16,
      IEIFLAG_SCREEN = 32,
      IEIFLAG_ORIGSIZE = 64,
      IEIFLAG_NOSTAMP = 128,
      IEIFLAG_NOBORDER = 256,
      IEIFLAG_QUALITY = 512
    }

    [StructLayout(LayoutKind.Sequential, Pack = 4, Size = 0, CharSet = CharSet.Auto)]
    private struct STRRET_CSTR
    {
      public ESTRRET uType;
      [MarshalAs(UnmanagedType.ByValArray, SizeConst = 520)]
      public byte[] cStr;
    }

    [StructLayout(LayoutKind.Explicit, CharSet = CharSet.Auto)]
    private struct STRRET_ANY
    {
      [FieldOffset(0)]
      public ESTRRET uType;
      [FieldOffset(4)]
      public IntPtr pOLEString;
    }
    [StructLayoutAttribute(LayoutKind.Sequential)]
    private struct SIZE
    {
      public int cx;
      public int cy;
    }

    [ComImport(), Guid("00000000-0000-0000-C000-000000000046")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IUnknown
    {

      [PreserveSig()]
      IntPtr QueryInterface(ref Guid riid, ref IntPtr pVoid);

      [PreserveSig()]
      IntPtr AddRef();

      [PreserveSig()]
      IntPtr Release();
    }

    [ComImportAttribute()]
    [GuidAttribute("00000002-0000-0000-C000-000000000046")]
    [InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IMalloc
    {

      [PreserveSig()]
      IntPtr Alloc(int cb);

      [PreserveSig()]
      IntPtr Realloc(IntPtr pv, int cb);

      [PreserveSig()]
      void Free(IntPtr pv);

      [PreserveSig()]
      int GetSize(IntPtr pv);

      [PreserveSig()]
      int DidAlloc(IntPtr pv);

      [PreserveSig()]
      void HeapMinimize();
    }

    [ComImportAttribute()]
    [GuidAttribute("000214F2-0000-0000-C000-000000000046")]
    [InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IEnumIDList
    {

      [PreserveSig()]
      int Next(int celt, ref IntPtr rgelt, ref int pceltFetched);

      void Skip(int celt);

      void Reset();

      void Clone(ref IEnumIDList ppenum);
    }

    [ComImportAttribute()]
    [GuidAttribute("000214E6-0000-0000-C000-000000000046")]
    [InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IShellFolder
    {

      void ParseDisplayName(IntPtr hwndOwner, IntPtr pbcReserved,
        [MarshalAs(UnmanagedType.LPWStr)]string lpszDisplayName,
        ref int pchEaten, ref IntPtr ppidl, ref int pdwAttributes);

      void EnumObjects(IntPtr hwndOwner,
        [MarshalAs(UnmanagedType.U4)]ESHCONTF grfFlags,
        ref IEnumIDList ppenumIDList);

      void BindToObject(IntPtr pidl, IntPtr pbcReserved, ref Guid riid,
        ref IShellFolder ppvOut);

      void BindToStorage(IntPtr pidl, IntPtr pbcReserved, ref Guid riid, IntPtr ppvObj);

      [PreserveSig()]
      int CompareIDs(IntPtr lParam, IntPtr pidl1, IntPtr pidl2);

      void CreateViewObject(IntPtr hwndOwner, ref Guid riid,
        IntPtr ppvOut);

      void GetAttributesOf(int cidl, IntPtr apidl,
        [MarshalAs(UnmanagedType.U4)]ref ESFGAO rgfInOut);

      void GetUIObjectOf(IntPtr hwndOwner, int cidl, ref IntPtr apidl, ref Guid riid, ref int prgfInOut, ref IUnknown ppvOut);

      void GetDisplayNameOf(IntPtr pidl,
        [MarshalAs(UnmanagedType.U4)]ESHGDN uFlags,
        ref STRRET_CSTR lpName);

      void SetNameOf(IntPtr hwndOwner, IntPtr pidl,
        [MarshalAs(UnmanagedType.LPWStr)]string lpszName,
        [MarshalAs(UnmanagedType.U4)] ESHCONTF uFlags,
        ref IntPtr ppidlOut);
    }
    [ComImportAttribute(), GuidAttribute("BB2E617C-0920-11d1-9A0B-00C04FC2D6C1"), InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IExtractImage
    {
      void GetLocation([Out(), MarshalAs(UnmanagedType.LPWStr)]
        StringBuilder pszPathBuffer, int cch, ref int pdwPriority, ref SIZE prgSize, int dwRecClrDepth, ref int pdwFlags);

      void Extract(ref IntPtr phBmpThumbnail);
    }

    private class UnmanagedMethods
    {

      [DllImport("shell32", CharSet = CharSet.Auto)]
      internal extern static int SHGetMalloc(ref IMalloc ppMalloc);

      [DllImport("shell32", CharSet = CharSet.Auto)]
      internal extern static int SHGetDesktopFolder(ref IShellFolder ppshf);

      [DllImport("shell32", CharSet = CharSet.Auto)]
      internal extern static int SHGetPathFromIDList(IntPtr pidl, StringBuilder pszPath);

      [DllImport("gdi32", CharSet = CharSet.Auto)]
      internal extern static int DeleteObject(IntPtr hObject);

    }

    ~ShellThumbnail()
    {
      Dispose();
    }

    private IMalloc alloc = null;
    private bool disposed = false;
    private Size _desiredSize = new Size(100, 100);
    private Bitmap _thumbNail;

    public Bitmap ThumbNail
    {
      get
      {
        return _thumbNail;
      }
    }

    public Size DesiredSize
    {
      get { return _desiredSize; }
      set { _desiredSize = value; }
    }
    private IMalloc Allocator
    {
      get
      {
        if (!disposed)
        {
          if (alloc == null)
          {
            UnmanagedMethods.SHGetMalloc(ref alloc);
          }
        }
        else
        {
          Debug.Assert(false, "Object has been disposed.");
        }
        return alloc;
      }
    }

    public Bitmap GetThumbnail(string fileName)
    {
      if (string.IsNullOrEmpty(fileName))
        return null;

      if (!File.Exists(fileName) && !Directory.Exists(fileName))
      {
        throw new FileNotFoundException(string.Format("The file '{0}' does not exist", fileName), fileName);
      }
      if (_thumbNail != null)
      {
        _thumbNail.Dispose();
        _thumbNail = null;
      }
      IShellFolder folder = null;
      try
      {
        folder = getDesktopFolder;
      }
      catch (Exception ex)
      {
        throw ex;
      }
      if (folder != null)
      {
        IntPtr pidlMain = IntPtr.Zero;
        try
        {
          int cParsed = 0;
          int pdwAttrib = 0;
          string filePath = Path.GetDirectoryName(fileName);
          folder.ParseDisplayName(IntPtr.Zero, IntPtr.Zero, filePath, ref cParsed, ref pidlMain, ref pdwAttrib);
        }
        catch (Exception ex)
        {
          Marshal.ReleaseComObject(folder);
          throw ex;
        }
        if (pidlMain != IntPtr.Zero)
        {
          Guid iidShellFolder = new Guid("000214E6-0000-0000-C000-000000000046");
          IShellFolder item = null;
          try
          {
            folder.BindToObject(pidlMain, IntPtr.Zero, ref iidShellFolder, ref item);
          }
          catch (Exception ex)
          {
            Marshal.ReleaseComObject(folder);
            Allocator.Free(pidlMain);
            throw ex;
          }
          if (item != null)
          {
            IEnumIDList idEnum = null;
            try
            {
              item.EnumObjects(IntPtr.Zero, (ESHCONTF.SHCONTF_FOLDERS | ESHCONTF.SHCONTF_NONFOLDERS), ref idEnum);
            }
            catch (Exception ex)
            {
              Marshal.ReleaseComObject(folder);
              Allocator.Free(pidlMain);
              throw ex;
            }
            if (idEnum != null)
            {
              int hRes = 0;
              IntPtr pidl = IntPtr.Zero;
              int fetched = 0;
              bool complete = false;
              while (!complete)
              {
                hRes = idEnum.Next(1, ref pidl, ref fetched);
                if (hRes != 0)
                {
                  pidl = IntPtr.Zero;
                  complete = true;
                }
                else
                {
                  if (_getThumbNail(fileName, pidl, item))
                  {
                    complete = true;
                  }
                }
                if (pidl != IntPtr.Zero)
                {
                  Allocator.Free(pidl);
                }
              }
              Marshal.ReleaseComObject(idEnum);
            }
            Marshal.ReleaseComObject(item);
          }
          Allocator.Free(pidlMain);
        }
        Marshal.ReleaseComObject(folder);
      }
      return ThumbNail;
    }

    private bool _getThumbNail(string file, IntPtr pidl, IShellFolder item)
    {
      IntPtr hBmp = IntPtr.Zero;
      IExtractImage extractImage = null;
      try
      {
        string pidlPath = PathFromPidl(pidl);
        if (Path.GetFileName(pidlPath).ToUpper().Equals(Path.GetFileName(file).ToUpper()))
        {
          IUnknown iunk = null;
          int prgf = 0;
          Guid iidExtractImage = new Guid("BB2E617C-0920-11d1-9A0B-00C04FC2D6C1");
          item.GetUIObjectOf(IntPtr.Zero, 1, ref pidl, ref iidExtractImage, ref prgf, ref iunk);
          extractImage = (IExtractImage)iunk;
          if (extractImage != null)
          {
            Console.WriteLine("Got an IExtractImage object!");
            SIZE sz = new SIZE();
            sz.cx = DesiredSize.Width;
            sz.cy = DesiredSize.Height;
            StringBuilder location = new StringBuilder(260, 260);
            int priority = 0;
            int requestedColourDepth = 32;
            EIEIFLAG flags = EIEIFLAG.IEIFLAG_ASPECT | EIEIFLAG.IEIFLAG_SCREEN;
            int uFlags = (int)flags;
            try
            {
              extractImage.GetLocation(location, location.Capacity, ref priority, ref sz, requestedColourDepth, ref uFlags);
              extractImage.Extract(ref hBmp);
            }
            catch (System.Runtime.InteropServices.COMException ex)
            {

            }
            if (hBmp != IntPtr.Zero)
            {
              _thumbNail = Bitmap.FromHbitmap(hBmp);
            }
            Marshal.ReleaseComObject(extractImage);
            extractImage = null;
          }
          return true;
        }
        else
        {
          return false;
        }
      }
      catch (Exception ex)
      {
        if (hBmp != IntPtr.Zero)
        {
          UnmanagedMethods.DeleteObject(hBmp);
        }
        if (extractImage != null)
        {
          Marshal.ReleaseComObject(extractImage);
        }
        throw ex;
      }
    }

    private string PathFromPidl(IntPtr pidl)
    {
      StringBuilder path = new StringBuilder(260, 260);
      int result = UnmanagedMethods.SHGetPathFromIDList(pidl, path);
      if (result == 0)
      {
        return string.Empty;
      }
      else
      {
        return path.ToString();
      }
    }

    private IShellFolder getDesktopFolder
    {
      get
      {
        IShellFolder ppshf = null;
        int r = UnmanagedMethods.SHGetDesktopFolder(ref ppshf);
        return ppshf;
      }
    }

    public void Dispose()
    {
      if (!disposed)
      {
        if (alloc != null)
        {
          Marshal.ReleaseComObject(alloc);
        }
        alloc = null;
        if (_thumbNail != null)
        {
          _thumbNail.Dispose();
        }
        disposed = true;
      }
    }
  }
} 
```

我创建了一个 http 处理程序，从那里我像这样调用 GetThumbnail() 方法

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Drawing;
using System.IO;
using RMA.Shell;
using System.Drawing.Imaging;
namespace DemoApp
{
    /// <summary>
    /// Summary description for ImageHandler
    /// </summary>
    public class ImageHandler : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            byte[] buffer = null;
            string imgUrl = context.Request.Params["url"].ToString();             
            if (!string.IsNullOrEmpty(imgUrl))
            {
                ShellThumbnail thumb = new ShellThumbnail();
                Bitmap bmp = thumb.GetThumbnail(context.Server.MapPath(imgUrl));                
                using (MemoryStream stram = new MemoryStream())
                {
                    bmp.Save(stram, ImageFormat.Jpeg);                    
                    buffer = stram.ToArray();
                    bmp.Dispose();
                    thumb.Dispose();
                }
                HttpCachePolicy cachePilicy = context.Response.Cache;
                cachePilicy.SetAllowResponseInBrowserHistory(false);
                cachePilicy.SetCacheability(HttpCacheability.NoCache);
                cachePilicy.SetExpires(DateTime.Now.AddDays(-1));
                context.Response.Clear();
                context.Response.ContentType = "Image/jpeg";
                context.Response.OutputStream.Write(buffer, 0, buffer.Length);
                buffer = null;
                context.Response.OutputStream.Close();
                context.Response.End();
            }
        }
        public bool IsReusable
        {
            get
            {
                return true;
            }
        }
    }
} 
```

我对此代码有一些疑问

1.  这个 GetThumbnail() 方法是如何工作的？是否使用 Windows 缩略图缓存 ie.thumb.db ？或者它为每个呼叫生成缩略图？
2.  使用此 COM API 时有任何性能问题吗？它适用于多个并发 http 请求吗？

3.这与Windows API代码Pack Shell实现有什么区别，例如

```
ShellFile shellFile = ShellFile.FromFilePath(pathToYourFile);
Bitmap shellThumb = shellFile.Thumbnail.ExtraLargeBitmap; 
```

哪一个是更好的选择？

4.内部实现是什么？是否使用 GDI+ 或任何其他方法（如 IPP）？

请说清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:23:29.553

当有用于调整图像大小的简单而干净的托管解决方案时，不明白为什么你会做所有这些 COM 混乱：

1.  [Image.GetThumbnailImage](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx) - 此方法的缺点是调整大小的图像质量低

2.  [ImageResizer](http://imageresizing.net/) - 开源图像大小调整组件，非常好的缩略图质量

# maven - 如何通过maven从命令行输入动态运行testng xml文件列表？

> ID：10385128
> 
> 赞同：2
> 
> 时间：2012-04-30T14:10:26.857
> 
> 标签：maven, maven-plugin, testng

如何通过Maven从命令行输入动态运行testng xml文件列表？

我有 TestNG XML 的列表，这些列表列在通过 Maven(POM.xml) 顺序执行的下面

在这里，我想根据命令行输入运行 TestNG Xml 文件。让我用下面的例子来解释一下，

```
<build>
   <plugins>
      <plugin>
          <artifactId>maven-surefire-plugin</artifactId>
              <configuration>
                 <suiteXmlFiles>
                      <suiteXmlFile>TestNG1.xml</suiteXmlFile>
                      <suiteXmlFile>TestNG2.xml</suiteXmlFile>
                      <suiteXmlFile>TestNG3.xml</suiteXmlFile>
                 </suiteXmlFiles>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

我有 3 个 testNG XML 文件。我有两个条件要执行。1\. 如果我将命令行输入作为TestNG2.xml 传递，它应该单独执行TestNG2.xml。不是其他两个被处决。

1.  如果我将参数作为“全部”传递，那么它应该一个一个地执行所有三个文件。

我尝试了各种方法，但都没有奏效。

所以帮我解决这个问题。提前致谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:34:40.763

您可以创建两个不同的配置文件，其中包含 maven-surefire-plugin 配置和适当的 testng 文件。可以通过命令行上的 -Pprofile 激活适当的配置文件。

# python - 使用 Python 和 PIL 进行慢速图像处理

> ID：10385130
> 
> 赞同：0
> 
> 时间：2012-04-30T14:10:28.763
> 
> 标签：python, image-processing, python-imaging-library

我正在尝试按 RGB 值的顺序对图像的像素进行排序。作为 Python 新手，我试过这个：

```
from PIL import Image

source = Image.open("source.jpg")
colors = source.getcolors(source.size[0] * source.size[1]) #maxcolor value =256, get   all colors with source.size[0] * source.size[1]
pixels = []
for i, color in colors:
    pixels.extend(i * [color])
    pixels.sort()
    new = Image.new('RGB', source.size)
    new.putdata(pixels) 
    new.save("new.png") 
```

它适用于 40x40 像素左右的小文件。但目标是在分辨率高达 3000x2000 的照片上使用它，我尝试运行它，但两个小时后仍然看不到尽头。代码可以优化吗，我做错了什么还是 Python 根本不适合那种任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:12:53.173

Python 中的缩进是关键，否则您可以运行每次迭代都不会运行的代码。

每次循环时，您都在此处保存文件，因为您的图像生成是缩进的。相反，请尝试：

```
from PIL import Image

source = Image.open("source.jpg")
colors = source.getcolors(source.size[0] * source.size[1]) #maxcolor value =256, get   all colors with source.size[0] * source.size[1]
pixels = []
for i, color in colors:
    pixels.extend(i * [color])
pixels.sort()
new = Image.new('RGB', source.size)
new.putdata(pixels) 
new.save("new.png") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:17:39.820

您返回的列表`getcolors`可以直接排序，然后您所要做的就是从中重建图像。

```
colors = source.getcolors(source.size[0] * source.size[1])
colors.sort(key=lambda pair: pair[1]) 
```

此外，正如[Boud 提到](https://stackoverflow.com/users/624829/boud)的，注意循环内的内容。

# postgresql - heroku doc 和 pg:ingress 命令之间的不一致

> ID：10385132
> 
> 赞同：0
> 
> 时间：2012-04-30T14:10:32.830
> 
> 标签：postgresql, heroku

根据有关 Heroku Shared Postgresql 插件的 heroku 文档，我可以使用 pg:ingress 了解与特定数据库相关的连接字符串详细信息。下方链接

[https://devcenter.heroku.com/articles/heroku-shared-postgresql](https://devcenter.heroku.com/articles/heroku-shared-postgresql)

```
$ heroku pg:ingress <DATABASE_NAME> 
```

但是当我运行这个命令时，我得到：

```
$heroku pg:ingress HEROKU_SHARED_POSTGRESQL_PURPLE
 !    `pg:ingress` is not a heroku command.
 !    See `heroku help` for additional details. 
```

对此有什么想法吗？

**更新**：

**使用平台**：windows

**项目类型**：django项目

**Heroku 客户端版本**：

```
$heroku --version
2.24.1 
```

**已安装 Heroku 插件**

```
$heroku addons
heroku-shared-postgresql:basic => HEROKU_SHARED_POSTGRESQL_PURPLE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:02:33.087

新命令是`heroku pg:credentials`. 我已经更新了文章，谢谢。

# javascript - 在单独的站点上提供 Facebook 对象上的 Facebook 评论

> ID：10385135
> 
> 赞同：1
> 
> 时间：2012-04-30T14:10:48.460
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-php-sdk, facebook-social-plugins

我有一个网站显示按活动分组的图片以及一些额外的数据。它是 Facebook 数据和其他一些数据的混搭。

我想让用户对活动和照片发表评论，然后让这些评论出现在 Facebook 以及活动和评论下。然而，评论的社交插件似乎不支持 Facebook 对象——仅支持 URL。

编辑：更清楚地说，Facebook 弃用了 FBML，并告诉我们使用 HTML 和 JavaScript。但是 JavaScript 的评论没有明显的 UI (https://developers.facebook.com/docs/reference/fbml/comments_(XFBML)/)

我错过了什么吗？我是否必须为照片和活动评论编写自己的 UI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:17:56.463

比尔，您将需要使用图形 api 和 sdk 之一，我使用 php sdk 来实现完全相同的功能。

参考帖子对象[https://developers.facebook.com/docs/reference/api/post/#comments](https://developers.facebook.com/docs/reference/api/post/#comments)

> **创造**
> 
> 您可以通过发出具有 publish_stream 权限和以下参数的 HTTP POST 请求写入 POST_ID/comments 连接以向帖子发布评论。

参考 php-sdk [https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

我使用 REQUEST 方法逐页捕获帖子，并使用 api 推送到图表。我的示例如下。注意：这假设您在服务器上安装了 Facebook php sdk 3.1.1。

* * *

```
$postid = $_REQUEST['postid']; // id of the post
$message = $_REQUEST['msg'];  // users message for comment
$params = array(
'access_token' => ''.$access_token.'', // user access token and read_stream perms needed
'method' => 'post',
'message' => ''.$message.'',
);
try {
$sendComment = $facebook->api('/'.$postid.'/comments', 'post', $params);
  } catch (FacebookApiException $e) {
  echo 'AF error: '.$e.'';
  }
}else{

} 
```

# c#-4.0 - 将端点（特定 IP）绑定到 MSXML 请求？

> ID：10385136
> 
> 赞同：0
> 
> 时间：2012-04-30T14:10:49.800
> 
> 标签：c#-4.0, webdav, msxml, endpoint, xmlhttprequest

嗨，我将 IPEndpoint 绑定到我的 WebRequest，如下所示

```
 if (!ipAddress.Equals(myLocalIP))
            {
                request.ServicePoint.BindIPEndPointDelegate =
                   delegate(ServicePoint servicePoint, IPEndPoint remoteEndPoint, int retryCount)
                   {
                       return new IPEndPoint(IPAddress.Parse(ConfigurationManager.AppSettings["SS_Outbound_IP"]), 0);
                   };
            } 
```

我需要对 MSXML 请求做同样的事情。这是我的 MSXML 请求。

```
 var xmlHttp_ = new XMLHTTP();
        Console.WriteLine("My IP is: "+FindMyPublicIPAddress());
        // Build the query.
        string requestString =
            "<?xml version=\"1.0\" encoding=\"utf-8\" ?>" +
            "<a:propfind xmlns:a=\"DAV:\">" +
            "<a:prop>" +
            "<a:displayname/>" +
            "<a:iscollection/>" +
            "<a:getlastmodified/>" +
            "</a:prop>" +
                "</a:propfind>";

            // Open a connection to the server.
            xmlHttp_.open("PROPFIND", Uri, false, "UserName","Password");

            // Send the request.
            xmlHttp_.setRequestHeader("PROPFIND", requestString);
            xmlHttp_.send(null);

        // Get the response.
        string folderList = xmlHttp_.responseText; 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:00:13.463

我意识到，我们无法使用 MSXML 进行端点绑定

# javascript - 使用 Javascript 为每个第三个元素添加类

> ID：10385140
> 
> 赞同：5
> 
> 时间：2012-04-30T14:11:05.720
> 
> 标签：javascript, selector, nodes

我正在尝试使用 javascript 选择父级的每三个元素并向其添加一个 css 类。对我来说听起来很简单，但我无法让它工作。我发现[这个](https://stackoverflow.com/questions/4274673/javascript-loop-through-every-third-child-node?s=773e8b37-d89e-4c60-8512-9279e30cb5dd)线程对我来说看起来很不错，但是我对 javascript 非常不满意，以至于我的尝试没有成功：

```
var nodes = document.getElementsByClassName("ParentsClassName").childNodes;
for(i=0; i<nodes.length; i+=3) {
  this.className += ' newClassName';
}​ 
```

当我加载这个时，什么都没有发生。
任何修复，大开眼界和提示表示赞赏。
问候，玛丽安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T14:13:46.530

```
var parents = document.getElementsByClassName("someClass"),
    forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach),
    filter = Array.prototype.filter.call.bind(Array.prototype.filter)

forEach(parents, addClassToEveryThirdChild)

function addClassToEveryThirdChild(parent) {
    filter(parent.children, selectEveryThirdChild)
        .forEach(addSomeClass)
}

function selectEveryThirdChild(elem, i) {
    return i % 3 === 0
}

function addSomeClass(elem) {
    elem.classList.add("newClassName")
} 
```

或带循环

```
var parents = document.getElementsByClassName("someClass")

for (var i = 0, ii = parents.length; i < ii; i++) {
    var parent = parents[i],
        children = parent.children

    for (var j = 0, jj = children.length; j < jj; j++) {
        var elem = children[j]
        if (j % 3 === 0) {
            elem.classList.add("newClassName")
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-25T20:33:42.933

我发现确定每*三分之一*的最直接方法是在计算模数时将索引加 1：

```
var nodes = //get nodes

for(var i = 0; i < nodes.length; i++) {
  var isThirdIteration = (i + 1) % 3 === 0;

  if (isThirdIteration) {
    this.className += ' newClassName';
  }
}​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-25T11:12:17.493

你可以用纯 CSS 来做到这一点。不需要 Javascript ;)

例子：`.parent .child:nth-of-type(3n+3)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:16:06.997

这将返回一个元素列表：

```
document.getElementsByClassName("ParentsClassName") 
```

您可以遍历列表，或选择一个索引：

```
document.getElementsByClassName("ParentsClassName")[0].childNodes; 
```

# php - php脚本调试，语法错误

> ID：10385142
> 
> 赞同：-1
> 
> 时间：2012-04-30T14:11:23.783
> 
> 标签：php

在获得一些经验后，我第一次开始我的 php 开发。并根据我朋友的要求编写了一个脚本。

这是脚本但我无法在我的服务器上运行它。

```
<?php

  include("geoip.inc");
$ip=$_SERVER['REMOTE_ADDR'];
$gi = geoip_open("GeoIP.dat",GEOIP_STANDARD);

$country_code = geoip_country_code_by_addr($gi, "$ip");

// Country name is not used so commented
// Get Country Name based on source IP
//$country = geoip_country_name_by_addr($gi, "$ip");
$real=false;
geoip_close($gi);

{if ($_SERVER[’HTTP_USER_AGENT’]!= “Googlebot”)
{if ($_COOKIE['iwashere'] != "yes") 
  {setcookie("iwashere", "yes", time()+315360000); 
  if ($country_code="US")
{
    if(preg_match("/google\.com(.+?)sa=(.+?)/", $_SERVER['HTTP_REFERER']))
    include_once("Biggenius.htm");
    else
    $real=True;
};
else
$real=True;

};

}
else
$real=True;};

if ($real==True)
 include_once(Biggenius1.htm);
?php> 
```

这个脚本没有运行，我也想学习。如何以更简单的方式对其进行编码。任何替代和有效的编码方式？

有人指出错误，但我仍然无法解决。请张贴完整的代码没有错误。而不是只发布错误。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:17:16.477

您的条件块应该喜欢`{ //code }`而不是`{ //code };` 结束标记`?php>`也无效。如果它`?>`是一个纯 php 文件，则可以省略结束标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:17:20.550

您的代码充满了语法错误！这是清理后的版本。

```
<?php

  include("geoip.inc");
$ip=$_SERVER['REMOTE_ADDR'];
$gi = geoip_open("GeoIP.dat",GEOIP_STANDARD);

$country_code = geoip_country_code_by_addr($gi, "$ip");

// Country name is not used so commented
// Get Country Name based on source IP
//$country = geoip_country_name_by_addr($gi, "$ip");
$real=false;
geoip_close($gi);

if ($_SERVER['HTTP_USER_AGENT']!= 'Googlebot') {
    if ($_COOKIE['iwashere'] != "yes")  {
        setcookie("iwashere", "yes", time()+315360000); 
        if ($country_code="US") {
            if(preg_match("/google\.com(.+?)sa=(.+?)/", $_SERVER['HTTP_REFERER'])) {
                include_once("Biggenius.htm");
            } else {
                $real = true;
            }
        } else {
            $real = true;
        }
    }
} else {
    $real = true;
}

if ($real) {
    include_once('Biggenius1.htm');
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:14:05.527

您有以下三种情况：

```
}; 
```

您需要更改为：

```
} 
```

并且您的脚本中可能存在更多错误，错误消息可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:14:16.870

您需要移动括号：

```
if ($_SERVER[’HTTP_USER_AGENT’] !=  “Googlebot”) { 
    //Do stuff
} 
```

括号在`if`条件之后，所以`if (condition) { code }`. 您在许多地方都正确执行了此操作，但并非在所有地方都正确。查看特定行号的错误 PHP 输出。

# xml - 从 XML 创建 RDF

> ID：10385143
> 
> 赞同：1
> 
> 时间：2012-04-30T14:11:24.327
> 
> 标签：xml, rdf, semantic-web

我有这个 xml 文件，如何在 java 中使用 xpath 和 ModelFactory 从它创建 RDF 三元组？

```
<xml>
<person>
<name>Joe</name>
<website url="www.example1.com">contact1</website >
<vote>20</vote>
</person>
<person>
<name>Anna</name>
<website url="www.example2.com">contact2</website>
<vote>80</vote>
</person>
</xml> 
```

感谢帮助

* * *

感谢重播，我想获得以下RDF

```
 <rdf:Description rdf:about="http://www.example.com/xml">
<j.0:hasCritic>Joe</j.0:hasCritic>
     <rdf:Description rdf:about=Joe >
     <j.0:haswebsite>"www.example1.com"</j.0:haswebsite>
      <j.0:hascontact>contact1</j.0:hascontact>
      <j.0:hasvote>80</j.0:hasvote>
  </rdf:Description>
  <j.0:hasCritic>Anna</j.0:hasCritic>
     <rdf:Description rdf:about=Anna>
     <j.0:haswebsite>"www.example2.com"</j.0:haswebsite>
      <j.0:hascontact>contact2</j.0:hascontact>
      <j.0:hasvote>20</j.0:hasvote>
</rdf:Description> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:40:34.047

```
You can use jena api for creating RDf model. Just parse xml file using dom parser and create Resourse , Property or Literal using Jena API. After creating this simply add into model.

Example:-
Model rdfModel = ModelFactory.createDefaultModel();
Resource resourse = rdfModel.createResource(Resourse Text);
Property property = rdfModel.createProperty(Property Text);
Literal literal = rdfModel.createLiteral(Literal Text);
resourse.addLiteral(property,literal); 
```

使用 Jena API，您可以将此模型存储到 rdf 数据库（三重）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T18:13:32.720

[Grddl](http://www.w3.org/2004/01/rdxh/spec)可能是一种可行的方法，Jena 有一个非常易于使用的[实现](http://jena.sourceforge.net/grddl/)。否则，只需一个基本的 XSLT 脚本就可以很容易地将该片段转换为 RDF。天哪，您甚至可以只编写一个基本的 SAX 侦听器并在那里进行转换。没有什么神奇的东西可以为你做这件事，你将不得不做一些工作，但有可用的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T13:14:40.187

```
package tutorial;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.rdf.model.Property;
import com.hp.hpl.jena.rdf.model.Resource;

public class Test01 {
public static void main(String[] args) {
Model m = ModelFactory.createDefaultModel();
String NS = "<http://www.example.com/>";

Resource r1 = m.createResource( NS+"xml" );
Resource r2 = m.createResource( NS+"Joe" );
Resource r3 = m.createResource( NS+"Anna" );            
Property p1 = m.createProperty( NS+"hasCritic1" );
Property p2 = m.createProperty( NS+"hasCritic2" ); 
Property p3 = m.createProperty( NS+"hasWebsite" );
Property p4 = m.createProperty( NS+"hasContact" );
Property p5 = m.createProperty( NS+"hasVote" );

r1.addProperty(p1,r2);
r1.addProperty(p2,r3);
r2.addProperty(p3,"<http://www.example1.com>");
r2.addProperty(p4,"contact1");
r2.addProperty(p5,"80");
r3.addProperty(p3,"<http://www.example2.com>");
r3.addProperty(p4,"contact2");
r3.addProperty(p5,"20");
m.write( System.out );
} 
} 
```

# android - Android 相机预览旋转

> ID：10385147
> 
> 赞同：9
> 
> 时间：2012-04-30T14:11:37.743
> 
> 标签：android, orientation, android-camera

根据 Android 开发者网站：

android 2.2之后有这个功能

“设置显示方向”

调整相机预览旋转。

并且根据 Android Developer Site ，我们可以找到以下源代码。

```
android.hardware.Camera.CameraInfo info =
            new android.hardware.Camera.CameraInfo();
    android.hardware.Camera.getCameraInfo(cameraId, info);
    int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
    int degrees = 0 ;
    switch ( rotation ) {
        case Surface.ROTATION_0 : degrees = 0 ; break ;
        case Surface.ROTATION_90 : degrees = 90 ; break ;
        case Surface.ROTATION_180 : degrees = 180 ; break ;
        case Surface.ROTATION_270 : degrees = 270 ; break ;
    }
    int result ;
    if ( info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
        result = ( info.orientation + degrees ) % 360 ;
         result = ( 360 - result ) % 360 ;   // compensate the mirror
    } else {   // back-facing

        result = ( info.orientation - degrees + 360 ) % 360 ;

    } 
```

但是，我不能使用某种设备。像三星 Galaxy Y S5360、S5660、YP-G1、YP-G70 等

只是机器的一部分不工作，Galaxy Nexus、SII 或一些高端设备，它工作正常。

setDisplayOrientation 不支持，或者设备固件没有准备好？

PS。所有设备均为 Android 2.3.1 或更高版本。

帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:30:27.687

设置相机方向显示的问题不适用于这些设备的操作系统版本，基本上是（姜饼），但对于上面的设备，它可以正常工作。

我在这些设备上也试过这个，横向模式工作正常，但纵向模式有问题。如果要强制纵向，只需通过此方法将相机方向强制为 90 度

```
public void surfaceChanged(SurfaceHolder holder, int format, int width,
    int height) {

camera.setDisplayOrientation(90);

} 
```

以及在显示或保存图片之前发布旋转图片

```
 PictureCallback myPictureCallback_JPG = new PictureCallback(){

     public void onPictureTaken(byte[] arg0, Camera arg1) {

    Bitmap bitmapPicture= BitmapFactory.decodeByteArray(arg0, 0, arg0.length);
      Matrix matrix = new Matrix();
     matrix.postRotate(90);
     int height=bitmapPicture.getHeight();
     int width=bitmapPicture.getWidth();
     Bitmap scaledBitmap = Bitmap.createScaledBitmap(bitmapPicture,height,width, true);
      Bitmap rotatedBitmap = Bitmap.createBitmap(scaledBitmap , 0, 0, scaledBitmap.getWidth(), scaledBitmap.getHeight(), matrix, true);
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-05T12:25:29.610

尝试将相机视图的 xml 的方向设置为横向。

# java - 从命令行运行时将 jar 添加到类路径

> ID：10385148
> 
> 赞同：12
> 
> 时间：2012-04-30T14:11:54.547
> 
> 标签：java, classpath

好的，我知道这个问题之前已经被问过很多次了，但是我已经用谷歌搜索了它并查看了过去一个月的示例并查看了关于 SO 的问题，但我真的无法让它发挥作用。我认为问题在于我希望能够从 Eclipse 和命令行运行该程序。我也在使用 OSX，我认为我正在阅读的很多示例都是针对 Windows/Linux 的。

如果我有一个在 Eclipse 中编译的简单程序，我想从命令行运行，我会这样做：

```
java -cp bin MyProgram 
```

我有另一个在 Eclipse 中编译和运行的程序，它引用了存储在同一目录中的 MySQL JDBC 连接器 (mysql-connector-java-5.1.19-bin.jar)。这在 Eclipse 中运行良好，但我无法从命令行运行它。

我已经尝试了所有的组合...

```
java -classpath "bin;mysql-connector-java-5.1.19-bin.jar" MyProgram
java -cp bin\;mysql-connector-java-5.1.19-bin.jar MyProgram 
```

并得到各种类未找到错误...

```
Exception in thread "main" java.lang.NoClassDefFoundError: MyProgram
Caused by: java.lang.ClassNotFoundException: MyProgram
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T14:15:43.957

您的问题是您正在使用的最小分隔符。分隔符`;`适用于窗户。在 Unix 系统上，您应该`:`改用：

java -classpath "bin:mysql-connector-java-5.1.19-bin.jar" MyProgram

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T14:15:38.510

在 Unix 系统上使用 ':' 分隔您的条目：

```
java -classpath "bin:mysql-connector-java-5.1.19-bin.jar" MyProgram
java -cp bin:mysql-connector-java-5.1.19-bin.jar MyProgram 
```

Eclipse 会自动转换它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:17:53.827

看：

```
String pathSeparator = System.getProperty("path.separator"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:15:21.673

你没有在classpaht中设置你的主类，尝试添加`./`-cp

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-30T14:16:58.620

我强烈建议您尝试--jar 或-jar。我不记得是哪个，但那些应该解决你。另外，如果你有苹果的开发工具，他们有一个 jar 打包器。

# c# - Http post方法响应出现错误

> ID：10385154
> 
> 赞同：0
> 
> 时间：2012-04-30T14:12:23.077
> 
> 标签：c#, visual-studio-2010, post, soap, http-post

我正在 C# 中执行 http post 方法，但响应正常，除了关闭标签。

我得到正确的所有节点，但结束前的最后一个节点我得到一个错误..最后响应的代码就像那个错误一样：

```
<GENERATEDDATE null="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:nil="true"/></APPLICATIONS></old></tuple></GetApplicationsByUserIdRespThe program 
 '[5372] CsharpToCPF.exe: Managed (v4.0.30319)' has exited with code 0 (0x0).onse>
 </SOAP:Body></SOAP:Envelope> 
```

它应该像

```
<GENERATEDDATE null="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
      </APPLICATIONS>
     </old>
   </tuple>
</GetApplicationsByUserIdResponse> 
```

为什么**“程序 '[5372] CsharpToCPF.exe: Managed (v4.0.30319)' 以代码 0 (0x0) 退出。”** 被附加在结束标记中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:03:05.030

刚刚搜索了错误，我发现 **程序“[5372] CsharpToCPF.exe: Managed (v4.0.30319)”已经退出，代码为 0 (0x0)。**不是错误，它表明程序执行没有任何问题。

只有当我在控制台中显示时它才会出现。

我能够解析来自服务器的响应的 XML。

谢谢

# ruby-on-rails - application.js/application.css 不需要 rails 资产

> ID：10385159
> 
> 赞同：0
> 
> 时间：2012-04-30T14:12:55.763
> 
> 标签：ruby-on-rails, asset-pipeline

由于某种原因，application.js/css 文件中不再需要资产文件。我在这两行中都有：

```
 *= require_self
 *= require_tree . 
```

`stylesheets`以及文件夹中的大量资产文件`javascripts`。

应用日志（开发模式）：

```
Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2012-04-30 17:03:44 +0300
Served asset /application.css - 304 Not Modified (7ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2012-04-30 17:03:45 +0300
Served asset /application.js - 304 Not Modified (2ms) 
```

当我从浏览器中检查加载的 application.js/css 文件的内容时，它有这两行（注释掉）：

```
 *= require_self
 *= require_tree . 
```

所以它实际上看起来像应用程序资产文件没有被评估。您能否建议可能的原因是什么？

ubuntu 12.04，rvm，ruby 1.9.3-p194，nodejs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:22:50.907

一些技巧：

那些神奇的注释必须是文件中第一条注释的一部分，什么都没有，甚至白线都不能在它前面。

的完整内容`application.css`必须至少为：

```
/*
 *= require_self
 *= require_tree .
 */ 
```

和`application.js`：

```
//= require_self
//= require_tree . 
```

另外，一定要硬刷新你的应用程序，这样你的浏览器就不会使用缓存的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:22:54.573

好的，所以这只是我是个白痴：

```
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD GO AFTER THE REQUIRES BELOW. 
```

所以我在两个文件中都添加了空行，现在一切正常。

不知道它以前是如何工作的

# c# - Sharepoint 项目文件替换

> ID：10385162
> 
> 赞同：2
> 
> 时间：2012-04-30T14:12:58.590
> 
> 标签：c#, sharepoint

嗨，我一直在玩与 Sharepoint 列表中的项目有关的文件。此项目是我对其进行更改然后转换为 PDF 的文档。我目前上传此 PDF 并用它替换原始文档。到目前为止，一切似乎都运行良好。但是，当我用新文件替换文件时，当它是文档文件时，我看不到该文件的旧版本。如果这是不可能的，我已经获得了在用新文件替换旧文件之前复制项目的灵活性。这样就有一个可用的原始文档文件和新版本。

我目前一直在玩 item.CopyTo() 试图复制该项目但没有成功。下面是我用来替换 teh 文件的代码（以及我正在处理的复制项目的代码）：

```
string newFileName = Path.GetFileNameWithoutExtension(file.Name) + ".old.docx";
string url = item.Web.Url + "/" + Path.GetDirectoryName(item.Url) + "\\" + newFileName;
item.CopyTo(url); //This is where my code crashes...

using (BinaryReader binReader = new BinaryReader(File.Open(tempSavePath, FileMode.Open)))
{
    byte[] fBin;
    string fileName = Path.GetFileNameWithoutExtension(file.Name) + ".pdf";

    file.CheckOut();

    fBin = binReader.ReadBytes((int)binReader.BaseStream.Length);
    item["Title"] = fileName;
    file.SaveBinary(fBin);
    file.MoveTo(Path.GetDirectoryName(item.Url) + "\\" + fileName, true);
    file.Item["Nombre"] = fileName;
    file.Update();

    file.CheckIn("");
} 
```

我得到的错误是：无法在指定的目的地创建元素。请确保该目录存在并且您具有所需的权限。*（我得到的实际错误是西班牙语，所以我翻译了它，可能不是英文显示的确切消息）*

显示的实际信息*（西班牙语）*：No se puede crear un elemento en el destino solicitado。Compruebe que la Caribbeanexiste y que tiene permiso para editarla。

就我而言，权限不是问题，并且该目录显然存在，因为那是当前的项目目录...如果有任何其他方法可以解决这个问题，请随时发布，因为这可能不是最好的解决方案...提前致谢！

**编辑**

似乎该文件已作为文档进行版本控制，但扩展名仍为 PDF 有什么想法可以使版本控制保留原始文件的扩展名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:47:57.650

就 CopyTo 方法而言，Path.GetDirectoryName 返回反斜杠，并且 CopyTo 函数似乎没有正确解释这一点，因此 String.Replace 将“\”替换为“/”修复了错误......

扩展问题我找不到解决方案，如果有人知道解决方案，请贡献谢谢！

# asp.net - 在 VS Express 版本中发布网站

> ID：10385167
> 
> 赞同：0
> 
> 时间：2012-04-30T14:13:22.860
> 
> 标签：asp.net, visual-studio-2010, web, publish, visual-studio-express

我正在尝试使用 vs2010 速成版发布我的网站和 dll。我试过 aspnet_compiler -v /-p 命令。但它没有工作。！

那么我怎样才能免费发布我的项目呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:40:08.967

检查一下...[在 Visual Developer 2008 速成版中预编译或发布网站](http://swami-k.blogspot.com/2008/12/precompile-or-publish-websites-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:45:34.407

当你有一个很好的向导可以做同样的事情时，为什么要尝试在命令行中发布？只需点击几下即可。

例如：

[http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx)

# iphone - 禁用 UITableViewController 的第二行

> ID：10385169
> 
> 赞同：0
> 
> 时间：2012-04-30T14:13:30.023
> 
> 标签：iphone, xcode, uitableview

目前，我有一个`UITableView`和 2 行。如图所示。它由 中的数组设置`ViewDidLoad`。

![在此处输入图像描述](../Images/4b3a2fab6df3295aca083efc1c2758db.png)

**ViewDidLoad**

```
- (void)viewDidLoad {

 [super viewDidLoad];
self.title = NSLocalizedString(@"Analysis", @"Badminton Analysis Tool");
NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:@"Statistical Analysis", @"Graphical Analysis", nil];
self.booksArray = array;
} 
```

**didSelectRowAtIndexPath**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {    
NSInteger row = [indexPath row];

if (self.statViewController == nil) {
    StatViewController *statDetail = [[StatViewController alloc] initWithNibName:@"StatViewController" bundle:nil];
    self.statViewController = statDetail;
}
statViewController.title = [NSString stringWithFormat:@"%@", [booksArray objectAtIndex:row]];

[self.navigationController pushViewController:statViewController animated:YES];
} 
```

目前，当我单击任一行时，它会推送到我只打算用于“统计分析”的同一视图。我想禁用点击图形分析。如何禁用“图形分析”的选择？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:19:42.137

`nil`从您的表视图委托的`-tableView:willSelectRowAtIndexPath`方法返回。

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 1)
        return nil;
    else
        return indexPath;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:19:30.880

实现 tableView:willSelectRowAtIndexPath: （请参阅文档）并在路径与您想要禁用的路径匹配时返回 nil。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:24:44.117

您可以使用以下方法取消选择索引处的行：- [self.tableView deselectRowAtIndexPath:indexPath animated:YES];

投票我的答案并通过向上投票箭头来提高我的声誉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T15:42:34.037

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {  
      if(indexPath.row == 1) {
         [tableView deselectRowAtIndexPath:indexPath animated:YES];
         return;
       }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T16:23:10.883

要禁用蓝色闪光，请执行以下操作：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  if (cell == nil)     {
     //usually this is the place where we decide the selection style blue/none 
```

}
if(indexPath.row == 1) {
cell.setUserInteractionEnabled = NO;//这样不会调用didSelectrow委托方法。
否则 {
cell.setUserInteractionEnabled = YES;
}
返回单元格；
}
希望它会帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T05:14:03.393

# 语用标记 -

# 杂注标记表视图委托

*   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == 0) {

    ```
    iHadAppDelegate *delegate =  [[UIApplication sharedApplication] delegate];
    delegate.flag = 0;
    delegate.mytag = 0;

    TableSelectMealViewController *detail = 
    [[TableSelectMealViewController alloc] initWithStyle:UITableViewStyleGrouped];
    detail.rows = 6;   
    [self.navigationController pushViewController:detail animated:YES];
    SelectMealViewController.contentSizeForViewInPopover = CGSizeMake(285, 400);

    [detail release];
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES]; 
    ```

    }

    if (indexPath.row == 1) { iHadAppDelegate *delegate = [[UIApplication sharedApplication] delegate]; 委托标志 = 1;

    ```
    DatePickerViewController *controller = [[DatePickerViewController alloc]init];
    [self.navigationController pushViewController:controller animated:YES];
    controller.contentSizeForViewInPopover = CGSizeMake(285, 400);

    [controller release]; 
    ```

    }

    if (indexPath.row == 2) { iHadAppDelegate *delegate = [[UIApplication sharedApplication] delegate]; 委托标志 = 2;

    }

    if (indexPath.row == 3) { iHadAppDelegate *delegate = [[UIApplication sharedApplication] delegate]; 委托标志 = 3;

    ```
    TableSelectMealViewController *detail = 
    [[TableSelectMealViewController alloc] initWithStyle:UITableViewStyleGrouped];
    //detail.rows = 10;
    [self.navigationController pushViewController:detail animated:YES];

    SelectMealViewController.contentSizeForViewInPopover = CGSizeMake(285, 400);

    [detail release];
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES]; 
    ```

    }

}

@k.Honda 从我的代码中观察。

```
 [self.tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

用于——我想取消选择行的地方[不是每一行——只有我想取消选择的那一行]。

# entity-framework - EntityFramework 数据初始化

> ID：10385175
> 
> 赞同：2
> 
> 时间：2012-04-30T14:13:54.953
> 
> 标签：entity-framework, ef-code-first

我首先使用实体​​框架代码。数据库初始化非常适合创建数据库和表。

我想知道是否有一种方法可以减少该过程的破坏性......而不是在架构更改时发出 DROP / CREATE 语句，有没有办法（通过现成的初始化程序或其他方式）发出 ALTER 语句更新我的架构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:18:56.340

您应该研究 Code First Data Migrations，我自己没有使用过它，但我相信它就是您正在寻找的。

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-released.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-released.aspx)

为了帮助那些后来出现的人，您应该能够按照这些说明进行所有设置：http: [//blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-基于代码的迁移演练.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T07:34:54.017

我认为这可能会有所帮助： [http](http://www.entityframeworktutorial.net/code-first/database-initialization-strategy-in-code-first.aspx) ://www.entityframeworktutorial.net/code-first/database-initialization-strategy-in-code-first.aspx 有一个使用自定义方法初始化数据的示例。

# android - 如何开始在 Android 上学习低级编码

> ID：10385176
> 
> 赞同：5
> 
> 时间：2012-04-30T14:13:55.530
> 
> 标签：android, performance, android-traceview

我主要从事 C 方面的工作，我需要与底层硬件和操作系统进行交互现在我正在转向 Android 应用程序。我将编写时间紧迫的应用程序，并涉及对 Android 操作系统和硬件的深刻理解。

有人可以将我引导到将帮助我开发成功的应用程序的资源（文章、视频）：基本上我正在寻找有关 Android 操作系统及其与硬件交互的资源。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T02:47:04.027

首先你需要了解Android的底层架构。你可以在这里找到它 [http://source.android.com/devices/](http://source.android.com/devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:19:59.117

你可以从[这里开始](http://developer.android.com/guide/index.html)

非常适合初学者的指南

# android - MediaMetadataRetriever extractMetadata 方法返回 null

> ID：10385178
> 
> 赞同：6
> 
> 时间：2012-04-30T14:13:58.323
> 
> 标签：android

我正在使用 MediaMetadataRetriever 类来获取有关视频的元数据，但是在获取有关高度的信息时，它返回 null，而对于宽度，它返回零。这是我的代码：

```
MediaMetadataRetriever metaRetriever = new MediaMetadataRetriever();
String width =  metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_WIDTH);
String height = metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_HEIGHT); 
```

有没有其他方法可以获取视频的宽度和高度？

# iphone - 查找由字符串分隔的 NSString 内的范围

> ID：10385196
> 
> 赞同：2
> 
> 时间：2012-04-30T14:15:29.770
> 
> 标签：iphone, ios, string, substring

尽管 iOS 提供了很多有用的字符串方法，但我找不到一个好的解决方案来获取由给定字符分隔的字符串范围。

**原始字符串：**

> |你| 将|实现| 你想要的一切| 如果你 |工作| 难的

分离字符是`|`.

单独的字符串 1：你（范围：3、3）

单独的string2：实现（范围：12、7）

单独的 string3: want (范围: 37, 4)

单独的 string4：工作（范围：51、4）

NSString 方法`substringFromIndex:`使得使用 NSString 找到这些范围成为可能，但这似乎效率低下。

请让我知道解决此问题的更好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:31:25.237

您应该使用[NSRegularExpression](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)的[matchesInString:options:range:](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009708-CH1-SW6)方法。

> **返回值**
> 
> 一组[NSTextCheckingResult](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSTextCheckingResult_Class/Reference/Reference.html)对象。每个结果 通过其 range 属性**给出整体匹配范围**，并通过其 rangeAtIndex: 方法给出每个单独捕获组的范围。如果捕获组之一未参与此特定匹配，则返回范围 {NSNotFound, 0}。

您可能有如下代码：

```
NSString *str = @"|You| will |achieve| everything you |want| if you |work| hard";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:
    @"[^|]*" options: 0 error:nil];
NSArray *results = [regex matchesInString:str 
                                  options:0 
                                    range:NSMakeRange(0, [str length])];
// ... do interesting code on results...
// Note that you should iterate through the array and use the 'range' property
// to get the range.

for (NSTextCheckingResult *textResult in results)
{
   if (textResult.range.length > 0)
   {
      NSString *substring = [myStr substringWithRange:textResult.range];
      NSLog(@"string at range %@ :: \"%@\"", 
            NSStringFromRange(textResult.range), 
            substring);
   }
} 
```

日志：

> {1, 3} :: "You" 范围内的字符串
> 
> {5, 6} 范围内的字符串 :: " will "
> 
> 范围 {12, 7} :: "achieve" 的字符串
> 
> {20, 16} 范围内的字符串 :: “你的一切”
> 
> {37, 4} :: "want" 范围内的字符串
> 
> 范围 {42, 8} :: " if you " 的字符串
> 
> {51, 4} :: "work" 范围内的字符串
> 
> {56, 5} :: "hard" 范围内的字符串

# java - 刷新 ArrayList Android 应用程序

> ID：10385197
> 
> 赞同：1
> 
> 时间：2012-04-30T14:15:32.453
> 
> 标签：java, android, arraylist

`notifyDataSetChanged();`当 myadapter 扩展 baseAdapter 时，我想在活动中刷新我的 arrylist 时，谁能告诉我如何使用函数！

多谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:19:02.127

当您的数组的数据发生更改时，您可以调用 `adapter.notifyDataSetChanged();` 将刷新您的**listview**的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:20:30.443

您需要添加

```
lviewAdapter.notifyDataSetChanged(); 
```

在这里您可以找到详细信息。

[检查这个](https://stackoverflow.com/questions/2345875/android-notifydatasetchanged)

# coldfusion - cf9 ORM - 更改和保存会话中存储的持久对象的属性

> ID：10385205
> 
> 赞同：1
> 
> 时间：2012-04-30T14:15:58.617
> 
> 标签：coldfusion, coldfusion-9

有可能我根本没有做对。

我正在初始化一个对象并将其存储到会话范围中，该对象包含当前登录用户的详细信息。

CFC 称为 Provider，当用户成功登录时，我调用：

```
session.Provider = New model.Provider().init(loginResult.ProviderID); 
```

我在 CFC 中有一个名为 resetValues 的方法，它将指定的值设置为空字符串，但是一旦我重置了值，我就无法弄清楚如何保存实体。

这是完整的 CFC。我正在尝试保存`entitySave( this );`，但不工作。关于我应该如何保存（持久）此更改的任何建议？还是我需要完全重新考虑我将如何改变这些价值观？

提前谢谢了。

```
component persistent="true" table="provider" {
property name="id" fieldtype="id" column="provider_id";
property name="title" ormtype="text";
property name="status" ormtype="integer";
property name="email" ormtype="text";

property name="ext_src" ormtype="text";
property name="ext_src_login1" ormtype="text";
property name="ext_src_login2" ormtype="text";
property name="ext_src_login3" ormtype="text";
property name="ext_src_login4" ormtype="text";

//property name="rooms" fieldtype="one-to-many" cfc="Room" fkcolumn="provider_id";

//init()
public function init(providerID="0"){
    variables.providerID = arguments.providerID;
    return this;
}

//get()
public function get(){
    return entityLoadByPK("Provider",variables.providerID);
}

//resetValues()
public function resetValues(){
    this.setExt_src_login1('');
    this.setExt_src_login2('');
    this.setExt_src_login3('');
    this.setExt_src_login4('');
    entitySave(this);
}

} 
```

我收到以下错误：`a different object with the same identifier value was already associated with the session`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:55:05.897

我认为这有几件事是错误的

1.  不建议将 ORM 实体存储在请求之间持续存在的范围内，您将遇到分离实体的问题（请参阅[带有 CF-ORM 的 ColdFusion 9 中要注意的事项](https://stackoverflow.com/questions/2480377/things-to-watch-out-for-in-coldfusion-9-with-cf-orm)）。ORM 实体附加到不跨越请求的休眠会话（不要与 cf 会话混淆），一旦请求结束，您分配给会话的实体将分离。将 providerid 存储在会话中，并在每个请求中拉取实体。如果这看起来开销太大，只需存储基本请求所需的内容，例如 id 和 name，然后仅在您实际执行需要它的操作时加载实体。

2.  您不应该修改类型为“id”的字段（除非您使用 provider="assigned"）。

在休眠会话中，只能存在具有给定标识符的实体的一个实例，因此通过设置实体的 ID，然后尝试在同一 ID 上执行 entityLoadByPK()，您会混淆休眠。

如果你想有一个 get() 方法通过 id 检索特定实体，最好将它放在服务或工厂中。使用通用方法创建抽象服务很容易，用于获取或查找实体，然后您可以使用方法扩展以满足您的特定需求。Coldspring 2 包含一个 AbstractGateway，这是一个很好的起点 - [http://sourceforge.net/apps/trac/coldspring/wiki/ORMAbstractGateway](http://sourceforge.net/apps/trac/coldspring/wiki/ORMAbstractGateway)

TLDR；修复是要做的

```
session.provider = entityLoadByPK("Provider", loginResult.ProviderID); 
```

# ruby - sass自动上传css文件

> ID：10385211
> 
> 赞同：2
> 
> 时间：2012-04-30T14:16:09.100
> 
> 标签：ruby, synchronization, aptana

我正在开发一个网络项目。这是我第一次使用 sass，我很喜欢它。但是我有一个与同步文件有关的问题。（我使用 Aptana Studio 作为 IDE）

当我对任何文件进行任何更改并保存时，AptanaStudio 会自动与远程服务器同步并上传它……这很棒。但是当我更改我的 .scss 文件时，.css 文件会更新，但不会与远程服务器同步。我必须手动上传该文件。

有什么办法可以自动完成这个过程？有剧本吗？有什么程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:31:13.667

我希望您不要将此上传内容用作部署过程。

我不知道 Aptana，但它应该是这样工作的（在 Rails >= 3.1 项目中）：

*   在开发模式下，默认生成资产（如 css 文件）。
*   在生产模式下，资产被捆绑并最小化到 1 个文件中。为此，您必须`rake assets:precompile`在您的服务器上运行。建议将这些生成的文件保留在您的 (GIT/SVN) 存储库之外。

这里有[官方指南](http://guides.rubyonrails.org/asset_pipeline.html)。这里还有一个[Railscasts 集](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)，还有一个关于这个主题的[专业集](http://railscasts.com/episodes/341-asset-pipeline-in-production)，但那一集要花你 9 美元。

# java - 为什么 JIT 编译器不能用于生成二进制文件？

> ID：10385218
> 
> 赞同：3
> 
> 时间：2012-04-30T14:16:49.087
> 
> 标签：java, jit

JIT 编译器用于将 java 字节码转换为本地机器语言。而且据我所知，没有任何程序可以直接将java字节码转换为.exe文件等二进制文件。那么为什么不能使用 JIT 编译器从字节码生成二进制文件呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:43:52.017

JIT 编译器动态编译代码。

*   它为不同风格的 CPU 生成不同的代码。
*   它为不同的内存模型生成不同的代码，例如对于 64 位 JVM，如果最大堆大小为 < 4 GB、< 24 GB、< 32 GB 或更多，您将在每种情况下生成不同的代码。
*   它将在加载和卸载类时重新编译代码。
*   它将根据代码的使用方式重新优化代码。例如，如果曾经关闭的标志未打开，反之亦然。

静态编译器不能做这些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:03:57.810

JIT = 及时。*.exe 是在执行之前编译的。`</nitpick>`;)

正如其他人所说，JVM 不仅仅是将字节码编译为本机机器码。但是，可以将 JVM 的这些部分放入本机库（“dll”）中。

至少有一个项目可以用 java 代码生成本地二进制文件：GCJ ( [http://en.wikipedia.org/wiki/Gcj](http://en.wikipedia.org/wiki/Gcj) )。我不知道它有多好，是否有可用的 windows 版本。那里可能还有其他 Java 到本机的编译器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T10:27:10.010

JIT 和编译器的目标通常不同，我认为这是主要原因。

也就是说，[Maxine VM](http://labs.oracle.com/projects/maxine/)包含一个用 Java 编写的 JIT，用于编译整个 VM 本身，并将输出写入所谓的引导映像，本质上是一个二进制文件。然而，即使这个二进制文件也需要一个名为 loader 的可执行文件才能启动。

因此，至少有一个用于生成二进制文件的 JIT 示例，但通常情况下，JIT 的目标不包括生成二进制文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:30:11.180

Jit 是一个重新编译器，因此对于任何特定的系统平台，它都会将字节码编译成特定的系统代码。所以我们不能直接使用 Jit 将 Java 字节码转换为二进制可执行文件。

当 jit 生成二进制代码时，其二进制格式将不支持其他平台。Jit 编译器的主要用途是快速编译，作为 Java 的第二个编译器。因此，Jit 不能从 Java 字节码生成二进制文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T09:00:32.927

IBM Java Runtime is capable of storing the results of dynamic bytecode to native code compilation in its shared data cache and sharing it between JVMs ([prooflink](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/index.jsp?topic=%2Fcom.ibm.java.lnx.70.doc%2Fdiag%2Funderstanding%2Faot.html)).

# silverlight - Silverlight 4 的 VS 2010 中的 SOS 调试器，启用非托管调试

> ID：10385219
> 
> 赞同：0
> 
> 时间：2012-04-30T14:16:49.787
> 
> 标签：silverlight, sos

如果我在 VS 2010 中调试时发出 .load SOS，我会得到“在仅托管调试时 SOS 不可用。要加载 SOS，请在项目属性中启用非托管调试。”

我接受我需要在项目设置中启用它...但是....选项在哪里？我到处检查过，类似的问题似乎是指一个不存在的选项.. :-/

项目设置页面的屏幕截图如下...... ![在此处输入图像描述](../Images/6e468ff1d186f1593d32610336b22ef3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:07:53.263

你在运行 VS 2010 Express 吗？

[http://msdn.microsoft.com/en-us/library/tdw0c6sf.aspx](http://msdn.microsoft.com/en-us/library/tdw0c6sf.aspx)

> 注意：Visual Studio Express 版本，例如 Visual C# Express，不支持调试非托管代码。这仅在完整的 Visual Studio 产品中受支持。

## 更新：

由于其严格的安全沙箱，Silverlight 本身根本不支持非托管代码。这意味着启用调试的选项在 Silverlight 项目中不可用。

# mysql - MYSQL 语法连接

> ID：10385220
> 
> 赞同：0
> 
> 时间：2012-04-30T14:16:50.750
> 
> 标签：mysql, join, syntax

我有两张桌子。一是物品。第二个是分类项目（catitems）。两个表都有一个用户字段。

我需要一个查询，按用户在第一个表（项目）中选择所有项目，但排除第二个表（catitem）中分配给给定类别的项目。换句话说，我从第一个表中获取用户的项目列表，但如果第二个表中有一行包含项目、猫和用户，我会排除该项目。

从原理上讲，这类似于 Select item FROM items where userid=1 but exclude item WHERE (in second table) (cat = "something" AND userid=1.)

我尝试了以下方法，但不排除表 2 中的项目。我做错了什么？

```
$sql = "SELECT i.*
FROM `items` i
LEFT JOIN `catitems` c
ON i.userid = c.userid
WHERE (c.userid = '$userid' && c.tcircle != '$cat')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:18:56.303

第一的：

```
$sql = "SELECT i.*
FROM `items` i
LEFT JOIN `catitems` c
ON i.userid = c.userid
WHERE c.userid = '$userid'
AND c.tcircle != '$cat'"; 
```

第二：[sql注入](/questions/tagged/sql-injection "显示标记为“sql-injection”的问题")。解决方案：[pdo](/questions/tagged/pdo "显示标记为“pdo”的问题")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:26:17.640

LEFT JOIN 表示全部来自左侧表（首先列出的表）与右侧所需的匹配。但是，一旦您在 WHERE 子句中应用右侧表，它在技术上将其强制为内部连接。因此，为了解决您的需求，您需要将与另一个表关联的“条件”移动到其相应的 ON 子句......

```
SELECT i.*
   FROM items i
           LEFT JOIN catitems c
              ON i.userid = c.userid
             AND c.tcircle != '$cat'
   WHERE 
      i.userid = '$userid' 
```

微小但微妙的差异。您总是希望为用户关联“项目”（通过 where i.userid 而不是 c.userid），但条件是，您只需要不是“$cat”的类别（在连接的 ON 子句中找到）

# c# - C# 中的 SqlConnection - 安全编程实践

> ID：10385235
> 
> 赞同：7
> 
> 时间：2012-04-30T14:17:40.360
> 
> 标签：c#, .net

我在 MSDN 网站上找到了这段代码[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.open.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.open.aspx)：

```
private static void OpenSqlConnection(string connectionString)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();
        Console.WriteLine("ServerVersion: {0}", connection.ServerVersion);
        Console.WriteLine("State: {0}", connection.State);
    }
} 
```

我的问题是......该网站还指出，`.Open()`可以抛出 InvalidOperationExceptions 和 SqlExceptions，但这个例子看起来不像它处理它们。

这仅仅是因为他们对代码很简短，还是因为他们不值得在这里处理？它们是否可能以某种方式由 using 构造处理？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T14:22:00.987

> 这仅仅是因为他们对代码很简短，还是因为他们不值得在这里处理？它们是否可能以某种方式由 using 构造处理？

`using`关键字是语法糖，`try/finally`即使您引用的代码不会处理可能的异常，SQL 连接也会被正确处理。他们可能没有明确地处理可能的异常，因为许多人更喜欢让异常冒泡到最高层并在那里处理异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T14:20:52.893

MSDN 示例旨在提供易于阅读的示例，而不是教授最佳实践。这就是人们不应该在不理解代码的情况下复制/粘贴代码的原因之一。

根据 MSDN

> using 语句以正确的方式调用对象的 Dispose 方法，并且（当您如前所示使用它时）它还会导致对象本身在调用 Dispose 时立即超出范围。

它将关闭打开的连接（通过使用 finally）。它不会捕获抛出的异常。它通过将随附的语句包装在 try/finally 中来实现。没有问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T14:20:43.203

这取决于在捕获这些异常时是否可以“做”任何事情。

如果不是 - 它通常被认为是让异常在堆栈中冒泡的最佳实践，直到它们达到可以以有意义的方式处理它们的地步（在网络应用程序的情况下，这可能只是记录 500 错误）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T14:21:09.600

这些案件正在处理中。

该`using`语句被转换为适当的处置模式，该模式还可以处理异常情况下的处置。

在这种情况下，即使抛出异常，连接也会被丢弃。

异常本身会冒泡。

有关详细信息，请参阅MSDN 上的[使用声明](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T14:34:57.920

```
using (SqlConnection connection = new SqlConnection(connectionString))
    {

    } 
```

相当于

```
try
{

    SqlConnection connection = new SqlConnection(connectionString)
}
finally
{
   connection.Dispose();
} 
```

“使用”只是为了确保调用对象上的 dispose() 方法（在这种情况下，确保连接返回到连接池）。“使用”从来都不是用来代替 catch 的。

在我从事过的项目中，通常我们最终都会进行很多尝试。Catch 仅在最高级别用于记录它。不应该使用 catch 来重新抛出错误（而不是记录错误）的原因之一是 catch 非常耗费资源。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T14:29:39.900

using 语句确保即使在调用对象上的方法时发生异常，也会调用 Dispose。Try/catch 的开销很大。try/catch 会影响编译器优化以及程序员会使用 try/catch 来做一些简单的事情，比如检查 null。这只是不好的做法。捕获异常总是比进行简单检查要慢。我并不是说要使用它们，而是不要使用它们来代替防御性编程。

此外，查看代码“打开”命令只有在存在有效连接时才会被调用..所以不用担心....

“使用”与将对象放在 try 块中，然后在 finally 块中调用 Dispose 相同。

如果您仍需要处理任何特定异常，请包含 try..catch..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T14:33:51.977

此示例令人困惑，但在技术上是正确的。在现实世界的应用程序中，此示例“按原样”没有任何价值。
他们甚至不将 SqlConnection 返回给调用代码。
因此，正如您所说，“他们对代码很简短”。

在现实世界的场景中，你可以有这样的方法

```
private static SqlConnection OpenSqlConnection(string connectionString) 
{ 
    SqlConnection connection = new SqlConnection(connectionString)
    connection.Open(); 
    return connection;    
} 
```

然后在你的代码中使用它（虽然没有什么收获）

```
using(SqlConnection cnn = OpenSqlConnection(connectionString))
{
    // Do your work here
    ....
} 
```

当然 using 语句隐藏了所有工作以捕获异常并关闭/处理所有内容，因此，从技术上讲，异常已被处理，实际上，如果出现故障，您不会得到任何线索。

# ruby-on-rails - Rails，将路径变量传递给部分

> ID：10385239
> 
> 赞同：4
> 
> 时间：2012-04-30T14:18:06.387
> 
> 标签：ruby-on-rails, partial-views

我正在构建一个可供不同视图（游戏和促销）使用的局部视图。我在视图/应用程序中创建了一个部分

```
<%= content_tag :article, class: ['article'] do %>
  <a href="#">
    <%= image_tag item.thumbnail %>
  </a>
  <h2><%= item.name %></h2>
  <p><%= item.description %></p>
  <p>
    <%= link_to 'Read more', "#" %>
  </p>
<% end %> 
```

我从视图游戏视图（或促销）中调用它：

```
<% @games.each do |item| %>
  <section> 
      <%= render 'application/item_synopsis_builder', item: item %>
  </section>
<% end %> 
```

它可以很好地填充和渲染部分，但我不知道如何将 view_path 传递给部分，以便它用 <%= the_right_path => 动态替换临时 #。

我试着做：

```
<%= render partial: 'application/item_synopsis_builder', locals: {item: item, path: game_path } %> 
```

但我只是收到一条错误消息：

```
No route matches {:action=>"show", :controller=>"games"} 
```

但是如果我用 href="#" 渲染部分，它会很好地渲染。

我也尝试了运气，`href="<%= "#{item}_path" %>"`但它只是打印出对象项的引用。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:31:43.463

我不知道这是你的错误，但在我看来，`game_path`需要一个游戏对象作为参数，这可能是你的错误。

编辑：

```
<% @games.each do |item| %>
  <section> 
    <%= render partial: 'application/item_synopsis_builder', locals:{item: item, path: game_path(item) %>
  </section>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:45:28.760

如果您要查找的 URL 以模型命名，您可以简单地执行以下操作：

```
<%= link_to "Read more", item %> 
```

这将根据项目自动生成`game_path`或为您生成。`promotion_path`

调用所有这些魔法的方法[`polymorphic_url`](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/polymorphic_routes.rb#L58)。

您当前示例不起作用的原因是因为您没有将对象提供给`game_path`. 现在它不知道要生成哪个 ID。没有匹配`{:action=>"show", :controller=>"games"}`的路由，但有匹配的路由`{:action=>"show", :controller=>"games", :id=>"something"}`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-20T20:35:18.630

您可以将其作为字符串发送，然后使用 send 调用它

像这样的东西：

```
render partial: 'partial', locals: { link: "products_path" } 
```

部分：

```
send(link, variable: 'hello', other: 'world') 
```

# facebook - 脸书评论社交插件+变量

> ID：10385240
> 
> 赞同：-1
> 
> 时间：2012-04-30T14:18:14.103
> 
> 标签：facebook, variables, plugins, comments, social

我正在尝试做这样的事情：

我有带有可变链接的 php 页面，例如： some.php?id=1

我想在这个页面中集成 facebook 评论插件，但是每个 ID 中的内容应该是不同的。

如何在此插件中提及变量链接

`<div class="fb-comments" data-href='http://comesite.com/some.php' data-num-posts='5' data-width='500'></div>`

我试过这个：

`$id=$_GET['id'];`

`<div class="fb-comments" data-href='http://comesite.com/some.php?id='".$id."' data-num-posts='5' data-width='500'></div>`

不工作..当我评论 some.php?id=1 也出现在 some.php?id=2 中

有什么建议么？？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T00:06:30.377

尝试这个

```
<div class="fb-comments" data-href='http://comesite.com/some.php?id=<?php echo "$_GET[id]";?>' data-num-posts='5' data-width='500'></div> 
```

# apache - OS X Lion - 网站分享，显示目录文件

> ID：10385241
> 
> 赞同：0
> 
> 时间：2012-04-30T14:18:17.900
> 
> 标签：apache, web, osx-lion

我需要一些帮助才能让 Mac 网站共享按我的意愿工作。

基本上我需要知道如何让它显示目录的文件。

我需要建立一个网站来显示我的目录文件还是有其他方法？

如果我确实需要建立一个网站来显示我的目录，我应该使用什么代码来做到这一点？

我根本不是 HTML 专家**。**

Allso，我一直在寻找这个，我找不到与我的问题相关的任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:39:34.677

您需要在 Apache 配置中打开索引。默认情况下可以打开。检查您的主目录中是否有名为 Sites 的文件夹。如果您确实重命名了 index.html 页面（如果有的话），然后导航到[http://localhost/~yourusernamehere](http://localhost/~yourusernamehere)。

如果我没记错的话，如果您使用的是位于 /Library/WebServer/Documents 中的默认 apache 目录（系统范围的目录），这同样适用。在这种情况下，您将导航到[http://localhost](http://localhost)。我刚刚检查了我的系统（OS X 10.7），默认情况下启用了索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:21:13.170

如果要在网页上显示“服务器”目录，则需要使用服务器端语言，例如 PHP、Java、ASP.NET。我会说，因为你是一个初学者使用 PHP，因为它很容易学习......

下载 MAMP/XAMPP。

研究 PHP 并先学习一些教程，然后实现目录搜索并将其输出为 HTML。 [http://php.net/manual/en/ref.dir.php](http://php.net/manual/en/ref.dir.php)

# 代码：

[http://css-tricks.com/snippets/php/display-styled-directory-contents/](http://css-tricks.com/snippets/php/display-styled-directory-contents/)

# html - 是否可以将 CSS 中的特定样式设置为“中断”浮动 DIV？

> ID：10385242
> 
> 赞同：0
> 
> 时间：2012-04-30T14:18:24.980
> 
> 标签：html, css, css-float, break

让我解释一下，我在父 div 中有几个浮点数，由于父级宽度限制，有可能会转到新行，是否可以在 CSS 中执行？

例如：设置所有 div 的样式，如 div3 和 div5 以及所有下一个可能中断的 div？（请注意，仅在我的示例中，宽度和高度并不是固定的）

[http://jsfiddle.net/frntz/aMzF7/1/](http://jsfiddle.net/frntz/aMzF7/1/)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:32:57.967

你不能只用 CSS 来做到这一点。您需要使用一些 JavaScript 来根据 div 的宽度计算容器的宽度。将被包装到下一行的 div 可以由超过包装器宽度的累积 div 宽度等确定。然后 JavaScript 可以轻松地重置宽度累积并应用类并继续子节点的迭代，直到所有 'wrapped ' div 被找到并设置样式。

这是一个使用 jQuery 的例子：

```
var maxWidth = $('#parent').width(),
    accWidth = 0;

$('#parent').children().each(function(){
    accWidth += $(this).width();
    if (accWidth > maxWidth) {
        $(this).addClass('newline');
        accWidth = $(this).width();
    }
});​ 
```

演示 1：http: [//jsfiddle.net/AlienWebguy/77NTw/](http://jsfiddle.net/AlienWebguy/77NTw/)

演示 2：http: [//jsfiddle.net/AlienWebguy/77NTw/1/](http://jsfiddle.net/AlienWebguy/77NTw/1/)

这是一个香草JS的例子：

```
var maxWidth = document.getElementById('parent').offsetWidth,
    accWidth = 0,
    nodes    = document.getElementById('parent').childNodes,
    i;

for (i in nodes) {
    if (nodes[i].hasOwnProperty('offsetWidth')) {
        accWidth += nodes[i].offsetWidth;
        if (accWidth > maxWidth) {
            nodes[i].className += ' newline';
            accWidth = nodes[i].offsetWidth;
        }   
    }
} 
```

演示 3：http: [//jsfiddle.net/AlienWebguy/77NTw/2/](http://jsfiddle.net/AlienWebguy/77NTw/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:32:55.117

是的。

如果父容器中没有空间，浮动将始终转到下一行。

# java - EJB：在 PostConstruct 方法中使用 EntityManager

> ID：10385246
> 
> 赞同：9
> 
> 时间：2012-04-30T14:18:36.637
> 
> 标签：java, ejb, entitymanager

构建 bean 后，我想使用 EntityManager 从数据库中检索数据。在构造函数中是不可能的，因为EntityManager是在构造函数被调用之后注入的。所以我尝试用@PostConstruct 注释的方法来做。根据 API，在所有注入完成后调用 PostConstruct 方法。执行查询有效，但它总是返回一个空列表。如果我在其他方法中使用相同的查询，它会返回正确的结果。有谁知道，为什么它在 PostConstruct 方法中不起作用？

```
@Stateful(mappedName = "price")
@Singleton
@Startup
public class PriceManagementBean implements PriceManagement {

    @PersistenceContext
    private EntityManager em;

    private List<PriceStep> priceSteps =  Collections.synchronizedList(new ArrayList<PriceStep>());

    public PriceManagementBean(){

    }

    @PostConstruct
    public void init(){
        javax.persistence.Query query = em.createQuery("SELECT ps FROM PriceStep ps");
        List<PriceStep> res = query.getResultList();
            .....
       }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T15:03:48.830

> 有谁知道，为什么它在 PostConstruct 方法中不起作用？

**原因 1** 你不能创建一个同时是 @Stateful 和 @Singleton 的 bean（你可以，但是因为 Singletons 也是有状态的，所以这没有意义），这是你遇到麻烦的原因之一。没有例外，但那里有冲突，你需要先解决这个问题。

只要记住：

*   Singleton bean 是一个保持其状态的 bean。应用程序中只有一个 Singleton 实例，它在应用程序的所有用户之间共享。此外，由于它是一个共享的（最好说是并发的）bean，因此需要使用 @Lock 注释来实现某种锁定机制。

*   有状态 bean 是在事务后维护每个状态的 bean。当使用
    有状态 bean 时，每个用户都会获得一个 bean 的副本，该副本将持续与会话一样长 - 持续或直到调用带有 @Remove 注释的方法

**原因 2** 即使它有效，您也无法访问结果，因为您将它们存储在一个名为 res 的对象中，该对象只能从方法**init()**内部访问。我想您想将该返回值分配给变量**priceSteps**。

无论如何，您的代码中有很多错误，因为没有说明一切。我不知道您的系统要求是什么，但在这里我会给您一个简单的解决方案，让您可以访问数据库：

**我想您正试图以某种方式在 bean 的生命周期中返回数据，因为如果 bean 是@Stateful**，您希望避免一次又一次地发送查询。问题是，您不必这样做，您仍然可以使您的 bean **@Stateless**并避免使用许多查询给您的数据库带来压力。您需要做的是创建一个**@NamedQuery**。

因此，使用**@NamedQuery**注释您的实体**PriceStep** ，然后输入您编写的查询字符串。在此链接中，您将找到有关如何使用**@NamedQueries**的信息：http : [//docs.oracle.com/cd/B31017_01/web.1013/b28221/ent30qry001.htm](http://docs.oracle.com/cd/B31017_01/web.1013/b28221/ent30qry001.htm)

 ****我建议您的下一件事是将您的类**PriceManagementBean**注释为*** *@Stateless* ***。如果在每个请求中都创建了一个新的 entityManager，请不要担心，这根本不会给数据库带来压力，因为它与域模型交互。您不需要@PostConstruct，您只需在需要时调用您的@NamedQuery，仅此而已。应用服务器将缓存它并将其返回给每个需要它的用户，而无需一直与数据库交互。

这是一个代码片段：

```
@Entity
@NamedQuery(
    name="allPriceSteps",
    queryString="SELECT ps FROM PriceStep ps"
)
public class PriceStep implements Serializable {
...
} 
```

现在豆：

```
@Stateless
public class PriceManagementBean implements PriceManagement {

    @PersistenceContext
    private EntityManager em;

    public List<PriceStep> getAllPriceSteps() {
         Query query =  em.createNamedQuery("allPriceSteps");
         return query.getResultList();
     }
} 
```

我希望这很有用。如果您提供有关系统要求的更多信息，我们可以为您提供最佳实践建议。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-28T09:21:13.567

根据您的要求，请尝试以下

*   **删除@Stateful** [不能同时使用两者]

*   @Startup 将在 APPLICATION INIT 期间初始化单例 bean [请注意应用程序未完全初始化]。这可能会导致加载 EntityManager 时出现一些问题，我假设 EntityManager 桥未完全初始化。尝试在应用程序启动完成后调用 init [ie,] **Remove @Startup******

# c# - 忽略 Entity Framework 4.1 Code First 中的类属性

> ID：10385248
> 
> 赞同：346
> 
> 时间：2012-04-30T14:18:48.160
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-4.1

我的理解是，该`[NotMapped]`属性在当前处于 CTP 的 EF 5 之前不可用，因此我们无法在生产中使用它。

如何将 EF 4.1 中的属性标记为被忽略？

**更新：**我注意到其他一些奇怪的事情。我使该`[NotMapped]`属性正常工作，但由于某种原因，EF 4.1 仍会在数据库中创建一个名为 Disposed 的列，即使它`public bool Disposed { get; private set; }`被标记为`[NotMapped]`. 该类`IDisposeable`当然实现了，但我不明白这有什么关系。有什么想法吗？

* * *

## 回答 #1

> 赞同：676
> 
> 时间：2012-04-30T14:53:56.990

您可以使用`NotMapped`属性数据注释来指示 Code-First 排除特定属性

```
public class Customer
{
    public int CustomerID { set; get; }
    public string FirstName { set; get; } 
    public string LastName{ set; get; } 
    [NotMapped]
    public int Age { set; get; }
} 
```

`[NotMapped]`属性包含在`System.ComponentModel.DataAnnotations` 命名空间中。

您也可以使用类中的`Fluent API`覆盖`OnModelCreating`函数来执行此操作`DBContext`：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
   modelBuilder.Entity<Customer>().Ignore(t => t.LastName);
   base.OnModelCreating(modelBuilder);
} 
```

[http://msdn.microsoft.com/en-us/library/hh295847(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh295847(v=vs.103).aspx)

我检查的版本是 `EF 4.3`，这是您使用 NuGet 时可用的最新稳定版本。

* * *

**编辑**：*2017 年 9 月*

### ASP.NET Core(2.0)

**数据标注**

如果您使用的是 asp.net core（*撰写本文时为 2.0*）， `[NotMapped]`则可以在属性级别使用该属性。

```
public class Customer
{
    public int Id { set; get; }
    public string FirstName { set; get; } 
    public string LastName { set; get; } 
    [NotMapped]
    public int FullName { set; get; }
} 
```

**流畅的 API**

```
public class SchoolContext : DbContext
{
    public SchoolContext(DbContextOptions<SchoolContext> options) : base(options)
    {
    }
    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Customer>().Ignore(t => t.FullName);
        base.OnModelCreating(modelBuilder);
    }
    public DbSet<Customer> Customers { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-06-27T16:53:48.313

从 EF 5.0 开始，您需要包含`System.ComponentModel.DataAnnotations.Schema`命名空间。

# php - 缓存大量 mysql 查询的最佳方法？

> ID：10385249
> 
> 赞同：1
> 
> 时间：2012-04-30T14:18:50.177
> 
> 标签：php, mysql, caching, memcached

目前我正在使用 Memcache 来存储我的 php pdo mysql 查询，它的工作方式与预期的一样。

但是，我想创建一个包含约 50,000 个网址的单页站点地图，并认为我可能需要一种不同的方式来缓存此查询。理想情况下，我只想每天执行一次查询，并认为在内存缓存中保留 50,000 个 ID 和标题这么长时间会完全浪费空间吗？

将文件压缩成某种临时 .txt 文件会更好吗？还是完全不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:26:39.560

我同意马克的评论。每天生成一次文件，可能使用 cron 作业。

我建议您参考有关[站点地图](http://en.wikipedia.org/wiki/Sitemaps)的声明，您应该考虑以下内容：

> 每个站点地图的站点地图文件限制为 50,000 个 URL 和 10 兆字节。可以使用 gzip 压缩站点地图，从而减少带宽消耗。

目前，我正在动态生成我的站点地图，但将其切换为 cron 作业在我的待办事项列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:25:59.620

正确配置“MySQL Query Cache”和“Apache Cache”，忘记在代码中做所有这些事情。

[http://dev.mysql.com/doc/refman/5.6/en/query-cache.html](http://dev.mysql.com/doc/refman/5.6/en/query-cache.html)

# ios - iOS 自定义框架、库和捆绑包

> ID：10385251
> 
> 赞同：1
> 
> 时间：2012-04-30T14:18:55.560
> 
> 标签：ios, frameworks, bundle

我有一个关于 iOS 上的包、库和自定义框架的一般性问题。我在 SO 上看到了很多关于此的主题，并在网上进行了广泛的搜索，但如果没有找到另一个网站或发布与我相矛盾或让我更困惑的帖子，我仍然无法找到答案。如果有人可以就以下关于 iOS 允许什么或什么会被拒绝的问题给我一个可靠的答案，我将不胜感激。

*   我看到帖子和网站说您无法在 iOS 上创建捆绑包。这是否也适用于仅包含图像的捆绑包？
*   是否可以创建一个包含 .xib 文件的库？如果不是，那么如果不允许自定义框架，将如何包含一个？
*   使用 xCode 动态库是否会将我的应用程序作为拒绝理由（例如 libxml2.dylib）？

抱歉，如果这太笼统或多次提及，但整个图书馆以及允许和不允许的内容对我来说似乎并不是很清楚。我正在尝试做的是创建一些应用程序，并且可能包含一些我经常在某种库或捆绑包中使用的控件，但我想在进一步移动之前了解我的局限性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:26:54.423

1.：不，您不能创建任何框架，即使它只包含图像，因为您不能写入 iOS 文件系统的根分区（/System/Library/Frameworks 所在的部分）。当然，如果越狱是一种选择，那么所有这些东西都会变得无效。你可以用越狱的手机做你想做的事，这样你就可以创建框架，将库添加到文件系统等。

2.: 是的，可以用它创建一个带有 XIB/NIB 文件的库，但是您需要共享源代码或从源代码和 XIB 文件构建的静态库，并指导其他开发人员这样做因此，为了让 iOS 正确处理您的库并能够从 InterfaceBuilder 文件构建 UI。

3.：不，因为这些库已经在 iPhone 上，你不必破解它来将它们放到文件系统上。允许使用 libxml2、libsqlite3 等，并且可以在任何 AppStore 应用程序中使用。

# ios - 如何在 iOS 3.1 中实例化我的 ViewController？（它已经在 iOS 4.2.1 中工作）

> ID：10385256
> 
> 赞同：0
> 
> 时间：2012-04-30T14:19:10.863
> 
> 标签：ios

使用 Xcode 4.2，我的应用程序在 iOS 5.0 模拟器中运行。它在装有 iOS 4.2.1 的 3G iPhone 上运行。它*不能*在装有 iOS 3.1.3 的 iPod 上运行。

这是我从许多教程中获得的样板代码，但在 iOS 3.1.3 设备上，显示我的 Default.png 后，此行失败：

```
self.window.rootViewController = self.viewController; 
```

在我的`ykAppDelegate.m`此处使用“发送到实例的无法识别的选择器”：

```
#import "ykAppDelegate.h"
#import "ykViewController.h"

@implementation ykAppDelegate

@synthesize window;
@synthesize viewController;

#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Set the view controller as the window's root view controller and display.
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

粗略地看一下代码，我注意到 viewController 显然没有被实例化（除了`@synthesize`）；它只是在我的声明中`ykAppDelegate.h`：

```
#import <UIKit/UIKit.h>

@class ykViewController;

@interface ykAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    ykViewController *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet ykViewController *viewController;

@end 
```

我可以进行一些小调整，以便在 iOS 3.1 中运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:29:07.417

在 iOS5 之前的操作系统中，UIWindow 没有名为“rootViewController”的属性。一个惯用的解决方案是简单地将视图控制器的视图作为子视图添加到应用程序的关键窗口中：

```
[window addSubview:self.myViewController.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:51:41.433

这对我有用

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Set the view controller as the window's root view controller and display.
    [window addSubview:self.viewController.view];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

# java - 为 Jersey 客户端配置代理

> ID：10385259
> 
> 赞同：7
> 
> 时间：2012-04-30T14:19:31.300
> 
> 标签：java, proxy, jersey

我想为我的 Jersey 客户端配置一个代理服务器。
我不想为整个应用程序配置代理（使用 JVM 参数，例如 http.proxyHost），我宁愿不使用 Apache 客户端。
我[在这里](http://jersey.576304.n2.nabble.com/How-to-use-a-proxy-with-jersey-td6407186.html)读到有一个选项可以通过 HttpUrlConnectionFactory 提供 HttpUrlConnection，但我找不到任何代码示例。
有谁知道我该怎么做？
谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T07:38:47.710

在卢卡的帮助下，我完成了：

1.  实现`HttpURLConnectionFactory`，并覆盖方法`getHttpURLConnection`，我的实现是（感谢卢卡）：

    ```
    Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("127.0.0.1", 3128));
    return new HttpURLConnection(url, proxy); 
    ```

2.  在实例化 Jersey 客户端之前，创建一个新的，并在其构造函数中`URLConnectionClientHandler`提供你的。`HttpURLConnectionFactory`然后创建一个新的，并在构造函数中`Client`提供你的。我的代码： `ClientHandler``Client`

    ```
    URLConnectionClientHandler urlConnectionClientHandler = new URLConnectionClientHandler(new MyHttpURLConnectionFactory());
    _client = new Client(urlConnectionClientHandler); 
    ```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-15T12:40:34.353

首先我创建了这个类

```
 import com.sun.jersey.client.urlconnection.HttpURLConnectionFactory;
    import java.io.IOException;
    import java.net.HttpURLConnection;
    import java.net.InetSocketAddress;
    import java.net.Proxy;
    import java.net.URL;
    import java.security.KeyManagementException;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;

/**
 *
 * @author Aimable
 */
public class ConnectionFactory implements HttpURLConnectionFactory {

    Proxy proxy;

    String proxyHost;

    Integer proxyPort;

    SSLContext sslContext;

    public ConnectionFactory() {
    }

    public ConnectionFactory(String proxyHost, Integer proxyPort) {
        this.proxyHost = proxyHost;
        this.proxyPort = proxyPort;
    }

    private void initializeProxy() {
        proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyHost, proxyPort));
    }

    @Override
    public HttpURLConnection getHttpURLConnection(URL url) throws IOException {
        initializeProxy();
        HttpURLConnection con = (HttpURLConnection) url.openConnection(proxy);
        if (con instanceof HttpsURLConnection) {
            System.out.println("The valus is....");
            HttpsURLConnection httpsCon = (HttpsURLConnection) url.openConnection(proxy);
            httpsCon.setHostnameVerifier(getHostnameVerifier());
            httpsCon.setSSLSocketFactory(getSslContext().getSocketFactory());
            return httpsCon;
        } else {
            return con;
        }

    }

    public SSLContext getSslContext() {
        try {
            sslContext = SSLContext.getInstance("SSL");
            sslContext.init(null, new TrustManager[]{new SecureTrustManager()}, new SecureRandom());
        } catch (NoSuchAlgorithmException ex) {
            Logger.getLogger(ConnectionFactory.class.getName()).log(Level.SEVERE, null, ex);
        } catch (KeyManagementException ex) {
            Logger.getLogger(ConnectionFactory.class.getName()).log(Level.SEVERE, null, ex);
        }
        return sslContext;
    }

    private HostnameVerifier getHostnameVerifier() {
        return new HostnameVerifier() {
            @Override
            public boolean verify(String hostname,
                    javax.net.ssl.SSLSession sslSession) {
                return true;
            }
        };
    }

} 
```

然后我还创建了另一个名为 SecureTrustManager 的类

```
 import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import javax.net.ssl.X509TrustManager;

/**
 *
 * @author Aimable
 */
public class SecureTrustManager implements X509TrustManager {

    @Override
    public void checkClientTrusted(X509Certificate[] arg0, String arg1)
            throws CertificateException {
    }

    @Override
    public void checkServerTrusted(X509Certificate[] arg0, String arg1)
            throws CertificateException {
    }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
        return new X509Certificate[0];
    }

    public boolean isClientTrusted(X509Certificate[] arg0) {
        return true;
    }

    public boolean isServerTrusted(X509Certificate[] arg0) {
        return true;
    }

} 
```

然后在创建这个类之后，我像这样调用客户端

```
URLConnectionClientHandler cc = new URLConnectionClientHandler(new ConnectionFactory(webProxy.getWebserviceProxyHost(), webProxy.getWebserviceProxyPort()));
    client = new Client(cc);
    client.setConnectTimeout(2000000); 
```

将 webProxy.getWeserviceHost 替换为您的 proxyHost，将 webProxy.getWebserviceProxyPort() 替换为代理端口。

这对我有用，它也应该对你有用。请注意，我使用的是 Jersey 1.8，但它也应该适用于 Jersey 2

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T14:28:11.263

尝试

```
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(host, port));
conn = new URL(url).openConnection(proxy); 
```

# jquery - 禁用 Mvc3 超链接

> ID：10385260
> 
> 赞同：0
> 
> 时间：2012-04-30T14:19:36.990
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试使用 jquery-1.5.1 禁用按钮操作链接，但似乎没有任何效果。我已经分别尝试了以下代码行。

```
$('#btnSave').fadeTo("fast", .5).removeAttr("href");
 $('#btnSave').bind('click', false) 
```

我的目标是在单击后禁用该按钮，以便用户在将页面发布到服务器时不会再次单击它。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:24:41.953

使用[`unbind()`](http://api.jquery.com/unbind/)代替`bind()`：

```
$('#btnSave').fadeTo("fast", .5).removeAttr("href");
$('#btnSave').unbind('click', false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:32:23.577

您可以在事件选择器对象中使用 JavaScript 来阻止超链接的默认操作：

```
$('#btnSave').click(function(e){
    e.preventDefault();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:33:14.040

使用[`one`](http://api.jquery.com/one/)而不是`.bind`

```
$("#btnSave").one("click",function(e){
 e.preventDefault();
 //your code
 location.href=$(this).attr("href");
 $(this).attr("href","");

}); 
```

# c# - 数据库操作（插入、更新、删除）后检查受影响的行数是否过大？

> ID：10385261
> 
> 赞同：8
> 
> 时间：2012-04-30T14:19:40.827
> 
> 标签：c#, asp.net, sql-server

最近在我一直在开发的应用程序中，我一直在检查受数据库插入、更新、删除影响的行数，并在数量意外时记录错误。例如，如果从 ExecuteNonQuery() 调用返回的行数不是 1 行，则对一行进行简单的插入、更新或删除，我将认为这是一个错误并记录它。此外，我现在在键入此内容时意识到，如果发生这种情况，我什至不会尝试回滚事务，这不是最佳实践，绝对应该解决。无论如何，这里的代码来说明我的意思：

我将有一个数据层函数来调用数据库：

```
public static int DLInsert(Person person)
{
    Database db = DatabaseFactory.CreateDatabase("dbConnString");

    using (DbCommand dbCommand = db.GetStoredProcCommand("dbo.Insert_Person"))
    {
        db.AddInParameter(dbCommand, "@FirstName", DbType.Byte, person.FirstName);
        db.AddInParameter(dbCommand, "@LastName", DbType.String, person.LastName);
        db.AddInParameter(dbCommand, "@Address", DbType.Boolean, person.Address);

        return db.ExecuteNonQuery(dbCommand);
    }
} 
```

然后是业务层调用数据层函数：

```
public static bool BLInsert(Person person)
{
    if (DLInsert(campusRating) != 1)
    {
        // log exception
        return false;
    }

    return true;
} 
```

在代码隐藏或视图中（我同时做 webforms 和 mvc 项目）：

```
if (BLInsert(person))
{
    // carry on as normal with whatever other code after successful insert
}
else
{
    // throw an exception that directs the user to one of my custom error pages
} 
```

我使用这种类型的代码越多，我就越觉得它是矫枉过正的。特别是在代码隐藏/视图中。是否有任何正当理由认为简单的插入、更新或删除实际上不会修改数据库中正确的行数？只担心捕获实际的 SqlException 然后处理它，而不是每次都对受影响的行进行单调检查是否更合理？

谢谢。希望大家能帮帮我。

* * *

**更新**

感谢大家花时间回答。我还没有 100% 决定今后将使用什么设置，但这是我从您的所有回复中得出的结论。

*   相信 DB 和 .Net 库可以处理查询并按照设计的方式完成工作。
*   在我的存储过程中使用事务来回滚任何错误的查询，并可能用于`raiseerror`将这些异常作为 SqlException 抛出回 .Net 代码，它可以通过 try/catch 处理这些错误。这种方法将取代有问题的返回码检查。

我遗漏的第二个要点会有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:28:54.517

我想问题变成了，“你为什么要检查这个？” 如果只是因为您不信任数据库来执行查询，那么这可能是矫枉过正。但是，*可能*存在执行此检查的逻辑原因。

例如，我曾经在一家公司工作，该公司使用这种方法来检查并发错误。当从数据库中获取要在应用程序中编辑的记录时，它会带有`LastModified`时间戳。然后数据访问层中的标准 CRUD 操作将`WHERE LastMotified=@LastModified`在执行时包含一个子句`UPDATE`并检查记录修改计数。如果没有更新记录，则假定发生了并发错误。

我觉得并发检查有点草率（尤其是关于假设错误性质的部分），但它为业务完成了工作。

在您的示例中，我更关心的是如何实现这一点的结构。从数据访问代码返回的`1`or`0`是一个“幻数”。应该避免这种情况。它将数据访问代码中的实现细节泄漏到业务逻辑代码中。如果您确实想继续使用此检查，我建议将检查移至数据访问代码中，如果失败则抛出异常。通常，应避免返回代码。

**编辑：**我刚刚注意到您的代码中还有一个潜在有害的错误，与我上面的最后一点有关。如果更改*了多个记录怎么办？*它*可能*不会发生在 上`INSERT`，但很容易发生在 上`UPDATE`。代码的其他部分可能假设这`!= 1`意味着没有更改记录。这可能会使调试变得非常有问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:28:45.670

一方面，大多数情况下，一切都应该按照您期望的方式运行，而在那些时候，额外的检查不会向您的应用程序添加任何内容。另一方面，如果确实出了问题，不知道它意味着问题可能会在你注意到它之前变得相当大。在我看来，一点点额外的保护是值得付出一点点额外努力的，特别是如果你实现了故障回滚。它有点像你车里的安全气囊……如果你从不撞车，它并没有真正的用途，但如果你这样做，它可以挽救你的生命。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:27:16.780

我一直更喜欢`raiserror`在我的存储过程中处理异常而不是计数。这样，如果您更新 sproc 以执行其他操作，例如日志记录/审计，您不必担心检查行数。

尽管如果您喜欢对代码进行第二次检查，或者不想处理 exceptions/ `raiserror`，我已经看到团队在数据库中的每个 sproc 成功执行 sproc 时返回 0 ，否则返回另一个数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:34:45.190

如果需要检查，为什么不在数据库本身内进行检查呢？您可以避免往返，并且它是在一个更“集中”的阶段完成的 - 如果您签入数据库，您可以确保它被任何访问该数据库的应用程序一致地应用。而如果您将逻辑放在 UI 中，那么您需要确保访问该特定数据库的任何 UI 应用程序都应用正确的逻辑并始终如一地执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T14:29:20.190

这绝对是矫枉过正。您应该相信您的核心平台（.Net 库、Sql Server）可以正常工作——您不必担心这一点。

现在，您可能想要测试一些相关的实例，例如事务是否正确回滚等。

# gwt - 需要可滚动（动态加载）、可排序、异步获取的表

> ID：10385265
> 
> 赞同：1
> 
> 时间：2012-04-30T14:19:51.817
> 
> 标签：gwt, scroll, widget

我想到了 DataGrid，使用了 AsyncDataProvider 并调整了 ScrollBar 的行为，但事实证明，访问 datagrid 滚动条并按照我想要的方式调整它是一件很痛苦的事情。

任何人都有其他想法，我可以使用一个小部件来满足这些要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:06:45.583

SmartGWT 库有一个叫做 LiveGrid 的东西。我认为这就是你要找的。查看 SmartGWT 网站上的展示：

[http://www.smartclient.com/smartgwt/showcase/#featured_grid_live](http://www.smartclient.com/smartgwt/showcase/#featured_grid_live)

# android - Android SQLite 数据库和日志权限

> ID：10385268
> 
> 赞同：1
> 
> 时间：2012-04-30T14:20:01.597
> 
> 标签：android, sqlite, journal

我在 android 市场上有一个 android 应用程序，这个应用程序是用具有世界可读和可写模式的 sqlite 数据库创建的。SQLite 数据库不存储任何用户特定信息。然而，在有根手机中，如果我打开 /data/data/packagename/databases/ 我可以看到这些文件是世界可读/可写的，几乎适用于所有应用程序。

现在我已将应用程序 SQLite 数据库更改为私有模式，之后该数据库文件权限更改为非世界可读/可写。但是“数据库日志”文件权限没有改变。

这是一个 android 问题吗，任何时候应用程序升级数据库日志权限都不会改变，即使是使用私有模式创建的主数据库。

我需要担心日志文件的权限吗，这个日志文件大部分时间都是空文件。有什么建议可以解决上述问题..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:40:00.820

如果您创建一个数据库[`MODE_WORLD_WRITEABLE`](http://developer.android.com/reference/android/content/Context.html#MODE_WORLD_WRITEABLE)，那么您设备上的*每个*应用程序都可以删除它、打开它并插入/读取数据、复制它等，即使该应用程序没有*权限*[`WRITE_EXTERNAL_STORAGE`](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)。

日志是由 sqlite 创建的，一旦文件存在，sqlite 没有理由更改文件的权限。删除数据库文件可能不会同时删除日志，这可能是您的问题的原因。

如果您在打开数据库之前删除日志文件，或者`chmod`/`File.setWritable()`根据您的需要删除该问题应该得到解决。

# c# - 使用反射和传递委托动态链接 dll

> ID：10385271
> 
> 赞同：0
> 
> 时间：2012-04-30T14:20:09.520
> 
> 标签：c#, reflection

我想动态加载一个dll并构造一个`MyDllClass`对象。我的代码大致如下（去掉了不相关的部分）：

**MyDllClass.cs**

```
namespace MyDllNameSpace
{
    public class MyDllClass
    {

        private EventCallBack m_DelegateCallBack = null;

        public MyDllClass(EventCallBack eventCallBack)
        {
            m_DelegateCallBack = eventCallBack;
        }

        public MyDllClass()
        {
        }
        ...
    }
} 
```

**MyDllCallBackNameSpace.cs**

```
namespace MyDllCallBackNameSpace
{
    public delegate void EventCallBack(string message);
} 
```

我设法使用空构造函数构造对象，但我无法让其他构造函数工作。我明白了`ArgumentException`

```
at System.Reflection.RuntimeConstructorInfo.InternalInvoke()  
at System.Reflection.RuntimeConstructorInfo.Invoke()  
at System.Reflection.ConstructorInfo.Invoke() at MyProgram.InitMyObject()  
at ... 
```

这是我的代码：

**我的程序.cs**

```
public void InitMyObject(EventCallBack callBack)
    System.Reflection.Assembly assembly = System.Reflection.Assembly.LoadFrom(DLL_PATH);
    Type type = assembly.GetType(CLASS_NAME);
    ConstructorInfo[] constructors = type.GetConstructors();
    if (type != null)
    {
        // empty constructor, works!!!
        //return constructors[1].Invoke(new object[0]); 
        // This one gives InvalidArgument exception
        return constructors[0].Invoke(new object[] {callBack});
    }
    return null;
} 
```

`MyDllCallBackNameSpace.cs`文件已添加到两个项目（.dll 和 .exe 项目）并引用我驱动器上的相同物理文件。但我怀疑它仍然被视为不同。任何想法为什么它不起作用，或任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:51:39.603

[ConstructorInfo.Invoke 方法 (Object[])](http://msdn.microsoft.com/en-us/library/h93ya84h.aspx)的 ArgumentException说：“参数数组不包含与此构造函数接受的类型匹配的值。” 你确定你得到了你期望的构造函数`constructors[0]`吗？尝试`ConstructorInfo constructor = type.GetConstructor(new Type[] { typeof(EventCallback) });`而不是 GetConstructors。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:27:10.063

我设法解决了这个购买转移`MyDllCallBackNameSpace.cs`到另一个 dll 的问题。然后我从两个项目中引用了那个 dll。

# google-docs-api - 文档列表 API 请求的配额是多少？

> ID：10385273
> 
> 赞同：3
> 
> 时间：2012-04-30T14:20:16.543
> 
> 标签：google-docs-api, google-drive-api

我们目前正在我们的移动应用程序中集成 Google Drive/Docs 访问权限，并为此目的使用 Google Document List API。单个 API 密钥允许的请求数量是否有任何限制？

我在 Google API 控制台中找不到任何信息，因为那里没有列出 Document List API。我只能激活 Google Drive API（它还不支持我们需要的功能）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:44:57.783

Documents List API 使用 API 密钥的方式与 Drive 等较新的 API 不同。我们（谷歌）没有给出这个 API 的确切配额细节，但总的来说这个值非常高。您可能会遇到[503 响应，表明您应该执行指数退避](https://developers.google.com/google-apps/documents-list/#implementing_exponential_backoff)。尽管如此，如果您达到了绝对上限，您应该联系我们，我们将进行调查，并寻求增加您的配额。

# compression - 测量霍夫曼算法的压缩

> ID：10385277
> 
> 赞同：1
> 
> 时间：2012-04-30T14:20:20.847
> 
> 标签：compression, huffman-code

我正在改进我的编程技能并实施 Huffman 算法。现在，我只考虑没有特殊字符的 [az]。az 的概率值已从维基百科中使用。

当我运行它时，我对随机段落进行了大约 2 倍的压缩。但是对于这个计算，我假设原始字母每个需要 8 位（ASCII）。

但如果我想一想，要表示 26 个项目，我只需要 5 位。如果我根据这个事实来计算，那么压缩系数下降到几乎 1.1

所以我的问题是，在实际应用中如何确定压缩系数？

第二个问题 - 如果我编写一个使用 5 位表示 az 的编码器/解码器（比如 a=0、b=1 等） - 这是否也被认为是一种有效的“压缩”算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T01:40:03.073

您基本上得到了正确的答案，即如果您正在使用的只是英语的字母频率，那么您就不能期望进行大量压缩。

计算字母频率知识所产生的增益的正确方法是考虑与英文字母熵相等概率的 26 个符号字母表的熵。

（我希望stackoverflow允许像math.stackexchange.com这样的TeX方程。然后我可以在这里写出体面的方程。哦，好吧。）

关键公式是 -p log(p)，其中 p 是该符号的概率，日志以 2 为底，以位为单位得到答案。您为每个符号计算此值，然后对所有符号求和。

然后在一个理想的算术编码方案中，一个等概率的 26 个符号集将被编码为每个符号 4.70 位。对于英语分布（使用[Wikipedia 文章](http://en.wikipedia.org/wiki/Letter_frequency#Relative_frequencies_of_letters_in_the_English_language)中的概率），我们得到每个符号 4.18 位。仅减少约11%。

这就是频率偏差本身可以买到的所有东西。（它在拼字游戏分数中为你买了更多，但我离题了。）

我们也可以在霍夫曼编码的近似空间中看同样的东西，其中每个编码都是整数位数。在这种情况下，您*不会*假设每个字母有 5 位（浪费了 6 个代码）。对等概率的 26 个符号应用霍夫曼编码得到 6 个长度为 4 位的代码和 20 个长度为 5 位的代码。这导致平均每个字母 4.77 位。使用英语中出现的字母频率的霍夫曼编码平均每个字母有 4.21 位。减少了 12%，和熵计算差不多。

真正的压缩机有很多方法比这做得更好。首先，他们对文件中的实际内容进行编码，使用那里的频率而不是它们在英语中的频率。这使得它独立于语言，针对实际内容进行了优化，甚至不对不存在的符号进行编码。其次，您可以将输入分解为多个部分，并为每个部分创建一个新代码。如果片段足够大，则传输新代码的开销很小，并且增益通常更大，可以在更小的块上进行优化。第三，您可以寻找更高阶的效果。代替单个字母的频率，您可以考虑前一个字母并查看下一个字母给定其前身的概率。现在您有 26^2 个概率（仅用于字母）要跟踪。这些也可以为手头的实际数据动态生成，但现在您需要更多数据才能获得收益、更多内存和更多时间。您可以以内存和时间为代价进行三阶、四阶等以获得更高的压缩性能。

还有其他方案来预处理数据，例如，进行行程编码、查找匹配字符串、应用块转换、标记 XML、对音频或图像进行增量编码等，以进一步暴露冗余然后利用熵编码器。我提到了算术编码，它可以用来代替 Huffman 在不到一位的时间内对非常可能的符号进行编码，并将所有符号编码为小数位精度，以便在熵步骤中获得更好的性能。

回到你关于什么构成压缩的问题，你可以从你喜欢的任何起点开始，例如每个字母一个八位字节，对你的输入进行断言，例如所有小写字母（接受如果断言为假，则方案失败），然后评估压缩效果。只要您在比较两种不同的压缩方案时使用所有相同的假设。您必须小心，任何与数据相关的内容也必须被视为压缩数据的一部分。例如，从数据块派生的自定义霍夫曼代码必须与该数据块一起发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:28:07.130

26 个字符不是 5 位，它是 log(26) / log(2) = 4,7 位。这是最大熵，但您需要知道具体的熵。对于德语，它是 4,0629。当您知道可以使用公式 R=Hmax - H 时。请看这里：[http](http://de.wikipedia.org/wiki/Entropie_(Informationstheorie) ://de.wikipedia.org/wiki/Entropie_(Informationstheorie ) [http://en.wikipedia.org/wiki/Information_theory#Entropy](http://en.wikipedia.org/wiki/Information_theory#Entropy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:29:49.937

如果您对同一文本运行不受限制的霍夫曼编码压缩，您将获得相同的结果，所以我认为可以合理地说您在同一文本的 ASCII 编码上获得 2 倍压缩。我更倾向于说您的程序正在获得预期的压缩，但目前有一个限制，即它无法处理任意输入，并且如果该限制存在，其他更简单的压缩方案也可以通过 ASCII 获得压缩。

为什么不扩展你的算法来处理任意字节值呢？这样更容易进行真正的单挑比较。

# jsf - JSF 中的条件渲染

> ID：10385278
> 
> 赞同：12
> 
> 时间：2012-04-30T14:20:23.063
> 
> 标签：jsf, jsf-2, rendering, page-refresh

您好，我有这段代码可以有条件地在我的页面中呈现组件：

```
<h:commandButton action="#{Bean.method()}"  value="Submit">
   <f:ajax execute="something" render="one two" />
</h:commandButton>

<p><h:outputFormat rendered="#{Bean.answer=='one'}" id="one" value="#{messages.one}"/></p>
<p><h:outputFormat rendered="#{Bean.answer=='two'}" id="two" value="#{messages.two}"/></p> 
```

它得到答案并呈现组件，但为了在我的页面上看到它，我需要刷新页面。我该如何解决这个问题？有什么建议么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-30T19:11:06.473

JSF 组件的`rendered`属性是一个服务器端设置，它控制 JSF 是否应该生成所需的 HTML。

`<f:ajax>`标记的属性`render`应该指向 JSF 生成的 HTML 元素的（相对）客户端 ID，JavaScript 可以`document.getElementById()`从 HTML DOM 树中获取该元素，以便在完成 ajax 请求时替换其内容。

但是，由于您指定的 HTML 元素的客户端 ID 永远不会由 JSF 呈现（由于`rendered`是`false`），因此 JavaScript 无法在 HTML DOM 树中找到它。

您需要将它包装在一个*始终*呈现的容器组件中，因此*始终*在 HTML DOM 树中可用。

```
<h:commandButton action="#{Bean.method()}"  value="Submit">
   <f:ajax execute="something" render="messages" />
</h:commandButton>

<p>
    <h:panelGroup id="messages">
        <h:outputFormat rendered="#{Bean.answer=='one'}" value="#{messages.one}"/>
        <h:outputFormat rendered="#{Bean.answer=='two'}" value="#{messages.two}"/>
    </h:panelGroup>
</p> 
```

* * *

**与具体问题无关**，您可能存在设计错误。为什么您不只是创建一个`#{Bean.message}`属性，而是在操作方法中使用所需的消息设置，这样您就可以使用：

```
<h:commandButton action="#{Bean.method()}"  value="Submit">
   <f:ajax execute="something" render="message" />
</h:commandButton>

<p>
    <h:outputFormat id="message" value="#{Bean.message}" />
</p> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-15T11:59:06.010

我知道这不是问题的中心点，但由于我过去曾多次遇到此问题，因此我只是将其发布在这里以帮助有需要的其他人。对于使用 PrimeFaces 的用户，PrimeFaces Extension 中有一个名为[Switch](http://primefaces.org/showcase-ext/sections/utils/switch.jsf)的组件。

> 有时您需要根据值显示不同的输出或组件。通常你可以通过使用`ui:fragment`标签来实现这一点。使用`pe:switch`util 标签，您将不再需要`ui:fragment`使用不同的检查来声明标签，例如`ui:fragment rendered="#{!empty someController.value}"`, 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T09:13:22.233

```
style="visibility: #{questionchoose.show==false ? 'hidden' : 'visible'}" 
```

# backbone.js - 无法使用backbone.js和下划线显示模板

> ID：10385293
> 
> 赞同：1
> 
> 时间：2012-04-30T14:21:13.883
> 
> 标签：backbone.js, underscore.js

我对 Backbone 真的很陌生，我到处寻找并试图解决这个问题。从根本上讲，我了解模型、视图、集合和模板如何协同工作，但由于某种原因，我无法让我的集合在模板中呈现。使用 Firebug，我得到一个“this.model is undefined”

这是我的代码：

```
(function($) {
window.Category = Backbone.Model.extend({});

window.Categories = Backbone.Collection.extend({
    url: "src/api/index.php/categories?accounts_id=1",
    model: Category
});

window.categories = new Categories();
categories.fetch();

window.CategoriesView = Backbone.View.extend({
    initialize:function () {
        _.bindAll(this,"render");
        this.model.bind("reset", this.render);
    },

    template:_.template($('#tpl-category').html()),

    render:function (eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }
});

var testTargetvar = new CategoriesView({ el: $("#collection") });

})(jQuery) ; 
```

这是我的 REST 服务生成的数据：

```
[
  {
    "name": "Web Design",
    "id": 0
  },
  {
    "name": "Web Development",
    "id": 0
  },
  {
    "name": "Waste Management Solutions",
    "id": 0
  }
] 
```

我正在使用的“获取”确实显示了 Firebug 中获取的数据。

最后，这是我的模板：

```
<div id="collection"></div>
<!-- Templates -->
<script type="text/template" id="tpl-category">
<span><%=name%></span>
</script> 
```

我已验证所有必要的脚本、jquery、主干、下划线等都已正确加载到页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:10:37.830

我看不到您在哪里设置`model`视图对象的属性。您的视图构造函数似乎也混淆了它是代表类别的集合（如`#collection`选择器所建议的那样）还是单个类别（如模板和`model`属性的使用所建议的那样）。这是一个可以帮助指导您找到完整解决方案的工作示例：

[http://jsfiddle.net/RAF9S/1/](http://jsfiddle.net/RAF9S/1/)

```
( function ( $ ) {

  var Category = Backbone.Model.extend( {} );

  var Categories = Backbone.Collection.extend( {

    url : "src/api/index.php/categories?accounts_id=1",

    model : Category

  } );

  var categories = new Categories( [

    { name : "One" },

    { name : "Two" },

    { name : "Three" }

  ] );

  var CategoryView = Backbone.View.extend( {

    initialize : function () {

      _.bindAll( this,"render" );

      this.model.bind( "reset", this.render );

    },

    template : _.template( $( '#tpl-category' ).html() ),

    render : function ( eventName ) {

      this.$el.empty().append(

        $( this.template( this.model.toJSON() ) ).html()

      );

      if ( ! this.el.parentNode ) {

        $( "#collection" ).append( this.el );

      }

      return this;

    }
    // render

  } );

  var view, views = {};

  categories.each( function ( category ) {

    view = new CategoryView( {

      tagName : 'span',

      model : category

    } );

    view.render();

    views[ category.id ] = view;

  } );

} )( jQuery ); 
```

在这种情况下，我只是用几个模型手动填充集合来代替您的`fetch`方法。如您所见，我为每个模型实例化一个视图并将模型对象作为`model`属性传递。

在该`render`方法中，我清空视图元素 ( `this.el`/ `this.$el`)，然后渲染模板并将其根元素的内容附加到`this.$el`. 这样我就可以在不清除元素本身的情况下获得新内容。然后，出于本示例的目的，我测试该元素是否已经在文档中，如果没有，我将其附加到`#container`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:36:23.900

我总是在我的函数中加载我的模板......这可能会有所帮助......

```
initialize: function(){
  _.bindAll(this, 'render');
  this.template = _.template($('#frame-template').html());
  this.collection.bind('reset', this.render);
},
render: function(){
  var $stages,
    collection = this.collection;
  this.template = _.template($('#frame-template').html()); 
```

# php - 单页维基

> ID：10385294
> 
> 赞同：1
> 
> 时间：2012-04-30T14:21:16.193
> 
> 标签：php, web, wiki

是否存在任何单页 wiki？即单个wiki.php，用户可以登录并编辑知道有修订历史的文本，回滚的能力，以及wiki 系统的所有其他好处，而无需整个系统的开销。如果它将数据存储在本地平面文件中，那很好。

tiddlywiki 和 wikionastick 不这样做，因为它们必须在本地编辑*并且*没有修订历史。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-28T16:48:04.323

我知道这是一个老问题，但我喜欢使用： http: [//lionwiki.0o.cz](http://lionwiki.0o.cz)

它过时了，可能是一个更好的系统，但我喜欢它。它很简单，SVN 可以处理这个:)

# c# - 使用 SmtpClient 发送时发送邮件异常失败

> ID：10385295
> 
> 赞同：0
> 
> 时间：2012-04-30T14:21:20.577
> 
> 标签：c#, .net

C# 我正在尝试使用以下代码发送邮件。操作系统是 windows 2008 服务器。已安装 SMTP。

```
 MailMessage message = new MailMessage();
            string[] recipientslist = recipients.Split(';');
            foreach (string recipient in recipientslist)
            {
                if (!String.IsNullOrEmpty(recipient))
                {
                    System.Net.Mail.MailAddress mailAddress = 
                        new System.Net.Mail.MailAddress(recipient);
                    message.To.Add(mailAddress.Address);
                }
            }
            message.From = new MailAddress(sender);
            message.Subject = subject;
            message.Body = body;
            SmtpClient smtpClient = new SmtpClient();
    smtpClient.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;
    smtpClient.UseDefaultCredentials = true;
    smtpClient.Send(message); 
```

在 web.config

```
 <system.net>
    <mailSettings>
      <smtp deliveryMethod="PickupDirectoryFromIis">
        <network host="localhost" port="25" defaultCredentials="true" />
      </smtp>
    </mailSettings>
  </system.net> 
```

即使安装了 smtp，我也会收到异常：发送邮件失败。堆栈跟踪：在 System.Net.Mail.SmtpClient.Send(MailMessage 消息)....

==================================================== =========================================

未安装 SMTP 的另一种情况，它给了我异常**无法获取 IIS 拾取目录**

任何帮助都是非常可观的。

谢谢**强文本**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:11:18.600

我得到了答案。。

默认 IIS 拾取目录需要权限。我刚刚添加了网络服务的权限并完成了。

以下是发送邮件前应验证的检查清单。 [http://torontoprogrammer.ca/2011/04/fixing-the-cannot-get-iis-pickup-directory-error-in-asp-net/](http://torontoprogrammer.ca/2011/04/fixing-the-cannot-get-iis-pickup-directory-error-in-asp-net/)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:03:20.590

这是一个防病毒程序 QH Exchange Protection，它会干扰从应用程序发送邮件。请与您的系统管理员联系。如果您是系统管理员，您需要了解如何告诉 Quick Heal 的产品不要这样做。

# gac - 如何从 GAC 获取 PublicKeyToken

> ID：10385296
> 
> 赞同：0
> 
> 时间：2012-04-30T14:21:20.720
> 
> 标签：gac, gacutil, publickeytoken

我一直在关注[本指南](http://msdn.microsoft.com/en-us/library/ms464040%28v=office.12%29.aspx)，其中介绍了使用 gacutil 将文件添加到 GAC。

我已完成此步骤，但似乎无法从文件中读取 Keytoken。

它说导航到您添加到 GAC 的程序集，右键单击并查看属性。但是，当我这样做时，属性页面上没有提到 PKT。

假设我在这里误解了一些东西，因为似乎没有其他人遇到这个问题，我哪里出错了？如何查看 PublickKeyToken？

## 编辑：已解决。

[这很容易。](http://blogs.msdn.com/b/wriju/archive/2008/07/01/how-to-find-public-key-token-for-a-net-dll-or-assembly.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:29:53.323

原来您可以使用 Visual Studio 命令提示符中的“sn.exe”。

[指南](http://blogs.msdn.com/b/wriju/archive/2008/07/01/how-to-find-public-key-token-for-a-net-dll-or-assembly.aspx)。

# .htaccess - 如何停止 htaccess 重定向替换 URL

> ID：10385299
> 
> 赞同：0
> 
> 时间：2012-04-30T14:21:33.173
> 
> 标签：.htaccess, redirect

我的 .htaccess 文件中有以下内容可以正常工作，除了当我点击时：

[http://bunkerbuster.com/profiles/1](http://bunkerbuster.com/profiles/1)

地址栏中的 URL 将替换为新 URL。我不希望这种情况发生，我希望 URL 仍然显示 bunkerbuster.com

谢谢你的帮助。

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteRule ^profiles/([0-9]+)$ http://projectzebra-bunkerbuster.herokuapp.com/profiles/$1 [R,L]
RewriteRule ^profiles/([0-9]+)/$ http://projectzebra-bunkerbuster.herokuapp.com/profiles/$1 [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:32:46.880

您似乎正在尝试使 Apache 充当代理。

这不能使用 htaccess 完成，但可以使用 mod_proxy 完成：

[http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxypass](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxypass)

# java - 在Java中将树数据结构从数据库转换为JSON

> ID：10385305
> 
> 赞同：2
> 
> 时间：2012-04-30T14:22:11.317
> 
> 标签：java

我们有一个数据库，其中包含数据库中树的每一行的 child_id、parent_id 和其他详细信息。我正在寻找一种最佳方法来递归地从数据库中读取数据并创建 JSON，但不知道子项在每个根节点下运行的深度。还有什么东西可以帮助创建 JSON 而无需在程序中手动编写 JSON 的语法？在此先感谢您的任何指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:28:23.450

我认为您找不到可以帮助您从数据库中读取应用程序级别数据并创建树状数据结构的工具。所以，这是你必须自己实现的。

我建议您一个接一个地阅读实体，并在阅读过程中将它们排列成树。

第二部分比较简单。有几个 Java 到 JSON 的工具。例如 GSON 来自 Google。看看这里：[http](http://code.google.com/p/google-gson/) ://code.google.com/p/google-gson/ 几行代码，你的树被序列化为 JSON。

顺便说一句要小心：它支持树，但根据我的经验，它不支持带循环的图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:29:38.020

从数据库中读取并创建一个 Tree 对象。你可以很容易地使用这样的东西：

```
public class Node<T> {
    public T content;
    public List<Node<T>> children;
} 
```

一旦您构建了该树，您可以将该对象发送到一个 JSON 序列化程序（如[Flexjson）](http://flexjson.sourceforge.net)，以将该 Java 对象转换为 JSON。Flexjson 有一个额外的好处，如果你在图中有循环，比如孩子知道他们的父节点，那么它不会像其他库那样序列化失败。

# sql-server - 无法将存储过程拖到 dbml 设计器上

> ID：10385307
> 
> 赞同：18
> 
> 时间：2012-04-30T14:22:16.253
> 
> 标签：sql-server, visual-studio-2010, linq-to-sql, stored-procedures

我正在尝试从 C# 应用程序对数据库存储过程进行简单调用。

我正在遵循一个指南，例如[这个](http://msdn.microsoft.com/en-us/library/bb918119.aspx)或[这个。](http://msdn.microsoft.com/en-us/library/bb384428.aspx)

这两个都有相同的基本步骤。

1.  将 LINQ to SQL .dbml 项添加到我的项目
2.  在服务器资源管理器中连接到数据库
3.  将存储过程从服务器资源管理器拖到我的 .dbml 设计器窗口中

但是第3步不起作用。我有我的存储过程和我的设计器窗口，但我不能拖动存储过程。我没有得到加号或“不允许”的符号。它只是一个不可拖动的对象。

我找不到另一种方法将我的 sproc 添加到 .dbml 文件中。而且我找不到其他遇到此问题的人。每个消息来源都只是说把它拖过来。

我在这里做错了什么？

截屏：

![在此处输入图像描述](../Images/24b9022e623088c5258c7e38704ab931.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-30T16:06:05.287

原来解决方案是我的 Visual Studio 的 .dll 版本错误。

我注意到在服务器资源管理器中执行操作时出现异常。谷歌搜索异常导致了[这个](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/d65c71f5-3887-4f2a-bbd3-e799a4ac6fdc)指向这个dll的问题

```
C:\Program Files (x86)\Common Files\microsoft shared\Visual Database Tools\dsref80.dll 
```

作为问题。

我用我的一位队友的相应副本替换了它，现在它可以正常工作了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T02:30:42.303

我还安装了 VS 11 Beta 并且设计器工作正常，直到我卸载它。我不得不在上述位置手动删除 DLL 并通过在程序和功能中找到 Visual Studio 2010 并选择卸载/更改然后修复来修复安装。安装程序会将删除的 DLL 文件替换为正确的版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-24T13:56:44.370

对于**可以**拖动 sproc 但看不到任何结果的任何人（sproc 根本不会显示在函数窗格中）：确保 sproc 仅返回 L2S 理解的数据类型。例如，您不能返回`geography`字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-28T04:31:45.973

使用设计器界面编辑 .dbml 文件需要 LINQ to SQL 工具，这些工具默认情况下不作为 Visual Studio 2017 的任何工作负载的一部分安装。它可以通过选择“代码”下的“LINQ to SQL 工具”项来安装Visual Studio 安装程序的“单个组件”选项卡中的“工具”类别。

# javascript - 用“thumbs_up”投票无效

> ID：10385309
> 
> 赞同：0
> 
> 时间：2012-04-30T14:22:24.180
> 
> 标签：javascript, ruby-on-rails

我想用宝石“Thumbs_up”为我的应用程序 RoR 添加投票，但是当我点击“vote_up”或“vote_down”时，什么也没有发生，我不知道我在 viex 中的问题是：

```
 = javascript_include_tag 'votecount'
        = t "idea.colaboration.accept.what_do_you_want_html", user: @collab.user.name
        .buttons[style="float:right"]
          button[type="submit"]
           = link_to image_tag('thumb_up.png'), vote_up_idea_path(@idea), data: {vote: "up"}, remote: true,:method => :post
          button[type="submit"]
           = link_to image_tag('thumb_down.png'), vote_down_idea_path(@idea), data: {vote: "down"}, remote: true,:method => :post 
```

在“votecount.js”中，我有：

```
$(function(){
    $(".ratelink").click(function(){
        var val = $(this).attr('updown');
        var theid = $(this).attr('theid');
        $("#votewrapper").block({ //blocks rate-rates while processing
            message: null,
            overlayCSS: {
                backgroundColor: '#FFF',
                opacity: 0.6,
                cursor: 'default'
            },
        });
    if (val == "up") {
    $.ajax({
            type: 'PUT',
            url: "/idea/vote_up?id="+theid,
            success: function(){
                        $("#votewrapper").unblock();
                        }   
               });
    } else {
         $.ajax({
            type: 'PUT',
            url: "/idea/vote_down?id="+theid,
            success: function(){
                        $("#votewrapper").unblock();
                        }   
               });
    }
}) 
```

（每个用户都可以为一个想法投票，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:04:14.823

检查您的日志。据我所知，Rails 在您之前捕获了请求，因此请求可能正在发生，但是您的自定义 javascript 为时已晚。

这是因为您已`remote: true`在链接中指定。这意味着 Rails（带有`jquery_ujs`，自动包含在内）会将此链接作为 AJAX 请求执行。

`remote: true`如果您想自己处理请求，请忽略；或者挂钩到 Rails 发出的 AJAX 请求。

只是一个想法（凭心而论，所以可能不对）：

```
$('a[data-vote]').bind('ajax:beforeSend', function() {
  // something
}); 
```

# ruby-on-rails - 具有多个 has_many 关系的 FactoryGirl 回调

> ID：10385310
> 
> 赞同：2
> 
> 时间：2012-04-30T14:22:37.303
> 
> 标签：ruby-on-rails, ruby, factory-bot, infinite-loop

我有三个模型：课程、级别和主题。一门课程有许多级别和科目。

如何使用回调在工厂女孩中创建课程对象而不会陷入无限循环？

## 工厂.rb

```
factory :subject do
  name "Arabic"
  after_build do |subject|
    subject.courses << FactoryGirl.build(
      :course,
      :subject => subject,
      )
  end
end

factory :level do
  name "Level 1"
  after_build do |level|
    level.courses << FactoryGirl.build(
      :course,
      :level => level
      )  
  end
end

factory :course do
  name        "Intermediate Arabic 4"
  subject
  level       
end 
```

使用此代码，FactoryGirl 将在从级别回调构建课程时尝试创建一个新主题，从而导致构建一个没有指定级别的新课程......等等。

我已经尝试了几件事，但我无处可去。

# asp.net-mvc - 从 js 日期开始，日期在 extjs 4.1 中没有绑定

> ID：10385311
> 
> 赞同：1
> 
> 时间：2012-04-30T14:22:44.497
> 
> 标签：asp.net-mvc, extjs4.1

我在 ext js 4.1 中绑定到日期选择器时遇到问题。

我正在使用 asp.net mvc 创建我的 json 提要。

我有以下 .net 属性

```
public DateTime? Created { get; set; } 
```

当这被序列化为json时，我得到以下信息

```
"Created":"\/Date(1346626800000)\/" 
```

在 extjs 4.1 模型上，我有以下类属性

```
 {
            mapping:'Created',
            name:'Created',
            type: 'date'
        }, 
```

在我的领域我有以下

```
 {
                            xtype:'datefield',
                            name:'Created',
                            fieldLabel:' Date',
                            format:'d/m/Y',
                            width: 350
                        }, 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:34:17.113

在 extjs4 中，您应该在商店中指定 dateFormat 以便 Ext 可以正确解析它，并且您将确保它可以正常读取。

```
 {name: 'Item1' , type : 'date', dateFormat :'MS'} 
```

您可以看到可用的格式字符串[。](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Date)

# iphone - 如果我只支持 iPhone 4+，我还需要标准分辨率资产吗

> ID：10385313
> 
> 赞同：2
> 
> 时间：2012-04-30T14:22:50.753
> 
> 标签：iphone, ios, assets, retina-display, artwork

我的应用程序将是 iOS5+ 并且仅支持 iPhone 4+，因此它需要工作的唯一屏幕将是 Retina 显示器。

我是否还需要使用两套艺术品，或者我可以坚持使用@2x 艺术品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:25:38.313

如果您的 App 仅适用于 iPhone 4 及以上版本，则只能使用 @2x 资源。但要考虑到 iPad 和 iPad 2 与 iOS 5 兼容并且不使用 @2x 图像。

# php - 如何使用 php imagick 库使图像看起来像画布或 toile

> ID：10385316
> 
> 赞同：2
> 
> 时间：2012-04-30T14:22:52.143
> 
> 标签：php, imagemagick, image-manipulation, imagick

我正在使用 php Imagick 库进行一些图像处理。我可以扭曲图像的视角，但不能让它们看起来像画布或马桶

![](../Images/adc5e7bb3a25054514a760db4b8c257c.png)>>![](../Images/d98cbc8e26cf84038c5cbd3aee3a749c.png)

如果有人能解释我该怎么做，那就太好了。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T12:40:01.540

我想我成功地做了我想做的事。

这是我的方法

```
$im = new Imagick('Desert.jpg');
$im->setImageFormat('png');

$d = $im->getImageGeometry();
$w = $d['width'];  
$h = $d['height']; 

$im3 = new Imagick();
$im3->newImage(1, $h, 'none','png');
$im3->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);

$im1 = $im->clone();;
$im1->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$im1->setImageMatte(true);
$im1->cropImage(($w-10), $h, 0, 0);
$controlPoints = array(
                    0,0, 15,15, 
                    ($w-10),0, ($w-10),0, 
                    0,$h, 25,($h-20), 
                    ($w-10),$h, ($w-10),$h 
                    );

$im1->distortImage(Imagick::DISTORTION_BILINEAR, $controlPoints, true);

$im2 = $im->clone();
$im2->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$im2->setImageMatte(true);

$im2->cropImage(10, $h, ($w-10), 0);

$controlPoints2 = array(
                    0,0, 0,0, 
                    10,0,10,10, 
                    0,$h, 0,$h,
                    10,$h, 10,($h-10) 
                    );

$im2->distortImage(Imagick::DISTORTION_BILINEAR, $controlPoints2, true); 

$image = new Imagick();

$image->addImage($im1);
$image->addImage($im3);
$image->addImage($im2);
$image->resetIterator();

$combined = $image->appendImages(false);

$shadow = $combined->clone(); 

$shadow->setImageBackgroundColor( new ImagickPixel( 'black' ) ); 

$shadow->shadowImage( 50, 3, 5, 5 ); 

$shadow->compositeImage( $combined, Imagick::COMPOSITE_OVER, 0, 0 ); 

$shadow->writeImage('Desert_Distorded.png'); 
```

最后的结果是

[![https://i.stack.imgur.com/DFj6R.png](../Images/cc8fdac9b1b3c87cf9c62d9ce0cd20ee.png)](https://i.stack.imgur.com/DFj6R.png)

# inno-setup - Inno 设置中序列号的自定义页面

> ID：10385319
> 
> 赞同：18
> 
> 时间：2012-04-30T14:22:58.827
> 
> 标签：inno-setup

如何使用序列号的编辑框在 Inno Setup 中创建 CustomPage？例如 6x5chars 还是 7x5chars？

脚本应在“下一步”按钮可用之前检查是否所有框都已填满。

如果剪贴板内容与序列号模式匹配，如果可以实现允许填充所有编辑框的复制/粘贴功能，那也是很好的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-01T00:12:37.863

这是一种使用创建单独编辑框的自定义页面的方法。您只需指定`SC_EDITCOUNT`定义编辑框数量的常量的值以及`SC_CHARCOUNT`可以输入这些编辑框的字符数。如果您在第一个编辑框中，您可以粘贴整个序列号，如果它的格式是由`-`char 分隔的模式（`TryPasteSerialNumber`这里的函数）。要从编辑框中获取序列号，只需调用`GetSerialNumber`您还可以为输出格式指定分隔符的位置（如果需要）。

```
[Setup]
AppName=Serial number project
AppVersion=1.0
DefaultDirName={pf}\Serial number project

[code]
function SetFocus(hWnd: HWND): HWND;
  external 'SetFocus@user32.dll stdcall';
function OpenClipboard(hWndNewOwner: HWND): BOOL;
  external 'OpenClipboard@user32.dll stdcall';
function GetClipboardData(uFormat: UINT): THandle;
  external 'GetClipboardData@user32.dll stdcall';
function CloseClipboard: BOOL;
  external 'CloseClipboard@user32.dll stdcall';
function GlobalLock(hMem: THandle): PAnsiChar;
  external 'GlobalLock@kernel32.dll stdcall';
function GlobalUnlock(hMem: THandle): BOOL;
  external 'GlobalUnlock@kernel32.dll stdcall';

var
  SerialPage: TWizardPage;
  SerialEdits: array of TEdit;

const
  CF_TEXT = 1;
  VK_BACK = 8;
  SC_EDITCOUNT = 6;
  SC_CHARCOUNT = 5;
  SC_DELIMITER = '-';

function IsValidInput: Boolean;
var
  I: Integer;
begin
  Result := True;
  for I := 0 to GetArrayLength(SerialEdits) - 1 do
    if Length(SerialEdits[I].Text) < SC_CHARCOUNT then
    begin
      Result := False;
      Break;
    end;
end;

function GetClipboardText: string;
var
  Data: THandle;
begin
  Result := '';
  if OpenClipboard(0) then
  try
    Data := GetClipboardData(CF_TEXT);
    if Data <> 0 then
      Result := String(GlobalLock(Data));
  finally
    if Data <> 0 then
      GlobalUnlock(Data);
    CloseClipboard;
  end;
end;

function GetSerialNumber(ADelimiter: Char): string;
var
  I: Integer;
begin
  Result := '';
  for I := 0 to GetArrayLength(SerialEdits) - 1 do
    Result := Result + SerialEdits[I].Text + ADelimiter;
  Delete(Result, Length(Result), 1);
end;

function TrySetSerialNumber(const ASerialNumber: string; ADelimiter: Char): Boolean;
var
  I: Integer;
  J: Integer;
begin
  Result := False;

  if Length(ASerialNumber) = ((SC_EDITCOUNT * SC_CHARCOUNT) + (SC_EDITCOUNT - 1)) then
  begin
    for I := 1 to SC_EDITCOUNT - 1 do
      if ASerialNumber[(I * SC_CHARCOUNT) + I] <> ADelimiter then
        Exit;

    for I := 0 to GetArrayLength(SerialEdits) - 1 do
    begin
      J := (I * SC_CHARCOUNT) + I + 1;
      SerialEdits[I].Text := Copy(ASerialNumber, J, SC_CHARCOUNT);
    end;

    Result := True;
  end;
end;

function TryPasteSerialNumber: Boolean;
begin
  Result := TrySetSerialNumber(GetClipboardText, SC_DELIMITER);
end;

procedure OnSerialEditChange(Sender: TObject);
begin
  WizardForm.NextButton.Enabled := IsValidInput;
end;

procedure OnSerialEditKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
var
  Edit: TEdit;
  EditIndex: Integer;
begin
  Edit := TEdit(Sender);
  EditIndex := Edit.TabOrder - SerialEdits[0].TabOrder;
  if (EditIndex = 0) and (Key = Ord('V')) and (Shift = [ssCtrl]) then
  begin
    if TryPasteSerialNumber then
      Key := 0;
  end
  else
  if (Key >= 32) and (Key <= 255) then
  begin
    if Length(Edit.Text) = SC_CHARCOUNT - 1 then
    begin
      if EditIndex < GetArrayLength(SerialEdits) - 1 then
        SetFocus(SerialEdits[EditIndex + 1].Handle)
      else
        SetFocus(WizardForm.NextButton.Handle);
    end;
  end
  else
  if Key = VK_BACK then
    if (EditIndex > 0) and (Edit.Text = '') and (Edit.SelStart = 0) then
      SetFocus(SerialEdits[EditIndex - 1].Handle);
end;

procedure CreateSerialNumberPage;
var
  I: Integer;
  Edit: TEdit;
  DescLabel: TLabel;
  EditWidth: Integer;
begin
  SerialPage := CreateCustomPage(wpWelcome, 'Serial number validation',
    'Enter the valid serial number');

  DescLabel := TLabel.Create(SerialPage);
  DescLabel.Top := 16;
  DescLabel.Left := 0;
  DescLabel.Parent := SerialPage.Surface;
  DescLabel.Caption := 'Enter valid serial number and continue the installation...';
  DescLabel.Font.Style := [fsBold];

  SetArrayLength(SerialEdits, SC_EDITCOUNT);
  EditWidth := (SerialPage.SurfaceWidth - ((SC_EDITCOUNT - 1) * 8)) div SC_EDITCOUNT;

  for I := 0 to SC_EDITCOUNT - 1 do
  begin
    Edit := TEdit.Create(SerialPage);
    Edit.Top := 40;
    Edit.Left := I * (EditWidth + 8);
    Edit.Width := EditWidth;
    Edit.CharCase := ecUpperCase;
    Edit.MaxLength := SC_CHARCOUNT;
    Edit.Parent := SerialPage.Surface;
    Edit.OnChange := @OnSerialEditChange;
    Edit.OnKeyDown := @OnSerialEditKeyDown;
    SerialEdits[I] := Edit;
  end;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  if CurPageID = SerialPage.ID then
    WizardForm.NextButton.Enabled := IsValidInput;  
end;

procedure InitializeWizard;
begin
  CreateSerialNumberPage;
end; 
```

这是它的样子：

![在此处输入图像描述](../Images/b8ce8a0303fc31292855d2c406215874.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T14:31:26.003

您可以通过添加[`CheckSerial()`](http://www.jrsoftware.org/ishelp/topic_scriptevents.htm#CheckSerial)事件函数使 Inno 提示用户输入序列号。

如果您想对页面进行更多控制，可以使用其中一个库存页面 ( [`CreateInput...Page`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptpages)) 或设置向导中的自定义页面，根据[`CreateCustomPage()`](http://www.jrsoftware.org/ishelp/topic_isxfunc_createcustompage.htm)需要使用和添加控件。

请参阅Inno 设置中包含的[codedlg.iss示例。](https://github.com/jrsoftware/issrc/blob/master/Examples/CodeDlg.iss)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-10T22:30:36.750

在名称和组织文本字段下方添加串行密钥框的最简单方法是将以下内容添加到您的 iss 文件中。

```
[Code]

  function CheckSerial(Serial: String): Boolean;
  begin
  // serial format is XXXX-XXXX-XXXX-XXXX
  Serial := Trim(Serial);
  if Length(Serial) = 19 then
    result := true;
 end; 
```

这可以有效地与

```
[Setup]
DefaultUserInfoSerial={param:Serial} 
```

如果之前为安装输入，它将填写序列号。

# jquery - jQuery按键冲突

> ID：10385320
> 
> 赞同：1
> 
> 时间：2012-04-30T14:23:02.207
> 
> 标签：jquery, keypress, conflict

我已经构建了一个小应用程序，它通过 div 的下拉将一些用户生成的文本粘贴到 textarea 中。这是通过 .click 函数和 .keypress 函数（使用 Enter 键）完成的。

有没有办法让 .keypress 函数仅在显示 div 时触发？

演示：http: [//jsfiddle.net/Mobius1/Sjyeh/2/](http://jsfiddle.net/Mobius1/Sjyeh/2/)

* * *

**编辑：**

**工作中！**

**更新了 Rory McCrossan 的输入：http: [//jsfiddle.net/Mobius1/Sjyeh/8/](http://jsfiddle.net/Mobius1/Sjyeh/8/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:26:33.687

如果我理解了您的问题，您可以检查`.slidebox`div 是否在`keypress()`处理程序中可见：

```
$(document).keypress(function(e) {
    if (e.keyCode == 13 && $(".slideBox").is(":visible")) {
        $("#dimBackgrnd").hide().fadeOut("slow");

        $("#slide").hide("drop", {
            direction: "down"
        }, 500);
    }
}); 
```

[**更新的小提琴**](http://jsfiddle.net/Sjyeh/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:25:24.243

您可以检查该元素是否在事件处理程序中可见：

```
if ($(this).is(':visible')) {
    doMyAction();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:28:24.260

可见性是您正在寻找的答案。我已经更新了您的[jsfiddle](http://jsfiddle.net/Sjyeh/3/)以显示一种可能性。这是代码：

```
$(document).keypress(function(e) {
    if ($("#slide:visible").size() > 0) {
        if (e.keyCode == 13) {

            $("#dimBackgrnd").hide().fadeOut("slow");

            $("#slide").hide("drop", {
                direction: "down"
            }, 500);
        }
    }
}); 
```

# python - 基本 Vim 安装，来自源代码

> ID：10385327
> 
> 赞同：1
> 
> 时间：2012-04-30T14:23:34.267
> 
> 标签：python, vim

尝试安装 Vim 7.3，所以我首先安装了 Mercurial，它允许我从 Googlecode 克隆 vim 源代码。这已成功完成。

问题从这里开始：

```
cd vim/src
./configure --enable-pythoninterp --with-features=huge -prefix=$HOME/opt/vim 
```

这从终端中得到了这个响应：

```
configure: loading cache auto/config.cache
checking whether make sets $(MAKE)... no
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/Users/JayEdge/vim/src':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details. 
```

尝试查看 config.log（在我的情况下是 auto/config.log），但我不确定要注意什么。

背景：我检查了 Xcode 是否安装正确，并且在路径 vim/runtime/compiler 中找到了 gcc.vim。我应该将这个（或复制这个）移动到另一个文件夹中吗？如果是这样，将其移动到哪个文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:27:37.203

> 在 $PATH 中找不到可接受的 C 编译器

这是一个非常明确的错误消息，如果您还没有安装编译器，则需要安装编译器。 [安装 gcc](http://google.com/search?q=mac%20install%20gcc)。

如果您已经安装`gcc`，则必须添加路径以便配置可以找到它，例如：

```
export PATH="$PATH:/usr/bin" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:35:01.857

就像卡罗利说的，你需要交流编译器。由于看起来您正在运行 OSX（根据您的 xcode 注释，我建议您在以下站点获取 OSX-GCC 安装程序：

```
https://github.com/kennethreitz/osx-gcc-installer 
```

我还会考虑使用[自制软件](https://brew.sh/)来安装 vim 之类的东西。

干杯，肖恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T03:43:29.670

问题已经解决，如果有同样的问题，在这里与任何人分享，特别是对于在 2012 年 3 月之后通过应用商店安装 xCode 的人。（感谢我的 Python Mentor，Martin）

应用商店的 Xcode 目前只允许您下载 IDE，这不是我们想要的。我们想要的是 Apple Developer Tools，您可以在注册为 Apple Developer 后通过[https://developer.apple.com/xcode/获得。](https://developer.apple.com/xcode/)搜索“命令行工具，2012 年 3 月下旬”，安装它，之前的配置命令应该可以正常工作。

否则，您可以参考 Sean 之前的回答。

仅供参考，我确实打算安装自制软件，但作为初学者，从源代码编译它是学习一些基础知识、与一些基本语法交互（或学习解析它们）的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T03:29:51.433

你可以试试看：

```
 yum install gcc 
```

# objective-c - uiview的无限x和y滚动

> ID：10385329
> 
> 赞同：2
> 
> 时间：2012-04-30T14:24:02.733
> 
> 标签：objective-c, scroll, infinite

我有一个 1500x1500 的 uiview，里面有一个 1500x1500 的 uiimageview，在我的 iPad 项目的主视图中居中。当您向任一方向倾斜 iPad 时，下面的代码将无限地左右滚动。我一直在尝试做的是让它也像左右一样无缝地上下滚动。不幸的是，它似乎跳来跳去并且不正确。有任何想法吗？

```
 - (void)accelerometer:(UIAccelerometer *)acel
didAccelerate:(UIAcceleration *)acceleration {

    accelX = acceleration.x;
    accelY = acceleration.y;
    accelZ = acceleration.z;

    int speed;
    speed = 1;

    imageView.center = CGPointMake(imageView.center.x+delta.x,imageView.center.y+delta.y);

    // allows infinite side-to-side scrolling
    if (imageView.center.x > 748){
        imageView.center = CGPointMake(512,384);
        NSLog(@"Greater than 780");
    }
    if (imageView.center.x < 284){
        imageView.center = CGPointMake(519,384);
        NSLog(@"Less than 284");
    }

    if (accelY > 0.01f) {delta.x = -speed;}
    else if (accelY < -0.01f) {delta.x = speed;}
    else if (0.01f < accelY > -0.01f){delta.x = 0;}

// should allow up/down infinite scrolling but does not - it is very jumpy when it resets
//  if (imageView.center.y > 748){imageView.center = CGPointMake(512,384);}
//  if (imageView.center.y < 284){imageView.center = CGPointMake(518,752);}

// this makes it run only with the angle of the iPad the way I want it
//  if (accelZ > -0.5f) {delta.y = speed;}
//  else if (accelZ < -0.1f) {delta.y = -speed;}
//  else if (0.3f < accelZ > -0.3f){delta.y = 0;}

} 
```

# objective-c - 为什么 iOS 框架依赖项在应用程序项目中不需要显式链接到静态库项目或框架项目？

> ID：10385331
> 
> 赞同：7
> 
> 时间：2012-04-30T14:24:40.137
> 
> 标签：objective-c, xcode, gcc, static-libraries, llvm

为什么当我**在**Xcode 中创建 iOS 静态库项目或框架项目时，我不需要将任何 iOS SDK 框架链接到项目以使用它们的标头和对象——例如，我可以`#import <AudioToolbox/AudioToolbox.h>`并将AudioToolbox代码放入静态库或框架中，而实际上没有在构建设置中的“Link Binary with Libraries”下添加AudioToolbox或将其显示在文件导航器中，并且项目将毫无问题地构建，这在应用程序项目——但是当开发人员随后在应用程序中使用静态库或框架产品时，他们是否必须链接到框架才能使用相同的标头和对象？

我对为什么会这样有一个模糊的想法，但我真的很想听听肯定知道的人的意见。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T14:29:22.337

静态库只是一堆`.o`文件。它们没有以任何有意义的方式“链接”；只是串联在一起。直到您执行真正的链接步骤才能解析符号。

`.a`将 a与可执行文件链接和将等效的源代码复制到可执行文件的项目中基本上没有区别。因此，在此之前无需链接任何其他框架或库。

* * *

以下练习可能具有教育意义：

创建以下内容`comptest.c`：

```
#include <stdio.h>

int main() {
   printf("Hello world.\n");
   return 0;
} 
```

看看预处理器做了什么：

```
gcc -E comptest.c > comptest-cpp.c 
```

这将删除`#include`并用引用文件的内容替换它。这个文件是编译器实际看到的。

现在看看编译器做了什么（我在`>`这里和下面使用语法，以便与 并行`-E`）：

```
gcc -S comptest.c > comptest.s 
```

这是经过预处理和编译后生成的汇编语言。现在我们把它变成一个.o：

```
gcc -c comptest.c > comptest.o 
```

现在让我们看看那个.o里面有什么：

```
$ nm comptest.o
0000000000000040 s EH_frame0
000000000000002d s L_.str
0000000000000000 T _main
0000000000000058 S _main.eh
                 U _puts 
```

这里重要的是`_main`和`_puts`。`_main`在此文件中的地址 0`_puts`处定义。未定义。所以我们链接的东西最好提供它。让我们尝试在没有任何内容的情况下进行链接：

```
$ gcc -nodefaultlibs comptest.o
Undefined symbols for architecture x86_64:
  "_exit", referenced from:
      start in crt1.10.6.o
  "_puts", referenced from:
      _main in comptest.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

（`_exit`在 C 运行时中是隐含的；它没有在 .o 中直接引用）

好的，所以现在我们准备好将它们放在一起了。我们将明确：

```
gcc -nodefaultlibs comptest.o /usr/lib/libc.dylib -o comptest 
```

`comptest.o`这说要和动态库链接在一起`libc`。它保证引用的每个符号都将由这些文件之一提供。它在生成的二进制文件中记下它应该动态加载符号`/usr/lib/libc.dylib`（这是 libSystem.B.dylib 的符号链接，它本身是一个“伞形框架”而不是一个适当的库，但这有点超出你的需要在大多数情况下要知道；您可以假装它`puts()`在 libSystem 中）：

```
$ otool -L comptest
comptest:
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

如果您使用静态库链接，则与在命令行中列出其中包含的所有 .o 文件相同。

请注意，在链接步骤中，我们只有 .o 和 .dylib 文件（.a 只是 .o 的一个包）。没有 .c 文件，没有 .h 文件，没有 .s 文件，没有源代码。只是需要解析符号的目标文件。这就是为什么头文件在这里无关紧要，但在编译时却很重要。

# java - JSF 状态最初保存到服务器和会话超时转移到客户端？

> ID：10385340
> 
> 赞同：5
> 
> 时间：2012-04-30T14:25:13.593
> 
> 标签：java, jsf, state-saving, jsf-stateless

是否有任何状态保存方法可以允许 JSF 应用程序在服务器上初始保存状态数据，但是在会话过期时间间隔之后，该状态被传输到客户端，这样即使服务器上的会话超时和内存更好，应用程序也始终响应在服务器上管理？

或者有什么方法可以实现？但我希望这应该成为 JSF 规范的一部分！

* * *

## 编辑

在 BalusC 的建议下，我对[**无状态 JSF**原则及其当前实现](https://web.archive.org/web/20140626062226/http://industrieit.com/blog/2011/11/stateless-jsf-high-performance-zero-per-request-memory-overhead/)印象深刻。如果这里的其他人也对将无状态 JSF 添加到 JSF 规范感兴趣，请考虑查看或投票[这个问题](https://github.com/javaee/javaserverfaces-spec/issues/1055)。

无状态 JSF 为某些收益提供了巨大的性能提升，例如无法动态创建视图（例如通过绑定、JSTL 标记等）或修改它。

* * *

> 无状态 JSF 操作模式对于高负载应用程序和架构非常有用：
> 
> [https://web.archive.org/web/20140626062226/http://industrieit.com/blog/2011/11/stateless-jsf-high-performance-zero-per-request-memory-overhead/#comment-4](https://web.archive.org/web/20140626062226/http://industrieit.com/blog/2011/11/stateless-jsf-high-performance-zero-per-request-memory-overhead/#comment-4)
> 
> 雅各布以前曾建议过： [http ://weblogs.java.net/blog/jhook/archive/2006/01/experiment_goin.html](http://weblogs.java.net/blog/jhook/archive/2006/01/experiment_goin.html)
> 
> 这将有助于 JSF 摆脱“速度慢且占用内存”的污名，并有助于跟上当前的技术趋势（无状态架构）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:35:08.430

这在技术上怎么可能？服务器永远无法事先可靠地预测下一个请求是否会创建新会话，因此当前请求的响应必须使用客户端状态保存而不是服务器端状态保存。如果您曾经成功地使用纯 JSP/Servlet 实现它，请随时发布 JSF 规范增强请求。

只需使用客户端状态保存并确保启用部分状态保存。与全状态保存相比，开销相对较小。

请注意，可以完全无状态地使用 JSF。另请参阅[此博客](https://web.archive.org/web/20140626062226/http://industrieit.com/blog/2011/11/stateless-jsf-high-performance-zero-per-request-memory-overhead/)。唯一的主要好处是您不能动态创建视图（例如，通过`binding`、JSTL 标记等），也不能在创建后对其进行操作（例如，通过添加/删除组件的子项）。

### 也可以看看：

*   [为什么 JSF 将 UI 组件的状态保存在服务器上？](https://stackoverflow.com/questions/5474316/why-does-jsf-need-to-save-the-state-of-ui-components-on-the-server-side/5475564#5475564)

# service - Windows Phone 后台服务

> ID：10385348
> 
> 赞同：4
> 
> 时间：2012-04-30T14:26:15.587
> 
> 标签：service, windows-phone-7.1

Windows Phone 中是否有类似于 Android 中的服务的东西？我已经阅读了有关后台代理（定期代理）的文档，但它们每 30 分钟只执行一次代码。

我需要一直运行服务..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:42:04.720

不幸的是，在 7.1 中这是不可能的。我希望在下一个版本中这会改变。

# c# - facebook 开放图 API 名称和命名空间属性

> ID：10385349
> 
> 赞同：4
> 
> 时间：2012-04-30T14:26:17.253
> 
> 标签：c#, asp.net, facebook, facebook-graph-api

我正在使用 facebook Graph API 来验证 Facebook APP，`canvas_name`Graph API 返回了一个属性，但 Facebook 将其替换为`namespace`，我开始使用`namespace`而不是`canvas_name`. 正如 Facebook API 文档所说，我们已经删除了带有命名空间的画布名称。问题是，当我调用 Graph API 时，它有时会返回`namespace`，有时只是`name`在决定使用哪个属性时令人困惑。

这是我通过 Graph API 验证并获得不同属性的两个不同的 Facebook 应用程序。

我应该使用哪个属性？`name`还是`namespace`？

**http://graph.facebook.com/173782752713273**

```
{
   "id": "173782752713273",
   "name": "fbfarooqtv",  
   "link": "http://www.facebook.com/apps/application.php?id=173782752713273",    
   "namespace": "fbfarooqtv",    
   "icon_url": "http://photos-g.ak.fbcdn.net/photos-ak-snc7/v85006/137/173782752713273/app_2_173782752713273_9103.gif",    
   "logo_url": "http://photos-g.ak.fbcdn.net/photos-ak-snc7/v85006/137/173782752713273/app_1_173782752713273_8525.gif",    
   "weekly_active_users": "1",    
   "monthly_active_users": "2"    
} 
```

和其他回报

**http://graph.facebook.com/342927909107736**

```
{  
   "id": "342927909107736",
   "name": "Ticketveri",
   "link": "http://www.facebook.com/apps/application.php?id=342927909107736",
   "icon_url": "http://static.ak.fbcdn.net/rsrc.php/v1/yT/r/4QVMqOjUhcd.gif?_fbgz=1",
   "logo_url": "http://static.ak.fbcdn.net/rsrc.php/v1/y_/r/9myDd8iyu0B.gif?_fbgz=1"
} 
```

**谢谢大家给出的答案**，我已经使用 appId 完成了我的上述任务，如果有人没有为 facebook 应用程序指定命名空间，他们可以使用 appId 像这样导航到那里的应用程序 `http://apps.facebook.com/173782752713273`

如果一个人指定了命名空间，那么你也可以使用 appId 和命名空间导航到那里的应用程序，如 `http://apps.facebook.com/342927909107736` 和`http://apps.facebook.com/fbfarooqtv`. 我正在从页面的引用者验证 facebook 应用程序，现在如果任何应用程序没有命名空间，我已经添加了命名空间的后备，然后我从引用者获取 appId 并通过调用图形 API 来验证它，该 API 返回有关应用程序的信息（如果存在） . 如下

```
http://graph.facebook.com/173782752713273 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:50:53.850

我认为您应该使用“名称”而不是“名称空间”。

原因是“name”对应于“App Display Name”，“namespace”对应于应用程序设置中的“App Namespace”属性。

由于“应用程序显示名称”属性是强制性的，因此可以保证您始终获得“名称”中的值，另一方面，“应用程序命名空间”属性是可选的，因此如果在 APP 中设置命名空间的值，您将只能获得该值设置。

![在此处输入图像描述](../Images/54763d3642780afc122e072192dc75af.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T12:03:29.157

您选择的值可能取决于您所说的“验证”应用程序的含义。在我工作的地方，我们有两个“应用程序”。一个是 Windows 桌面应用程序，它不需要命名空间，也没有。我们的另一个“应用程序”是一个“Facebook 应用程序”，它在网络浏览器的 Facebook 画布页面内运行，它确实需要一个命名空间，并且它有一个。

同样，根据您为“验证”所做的工作，应用程序可能会确定您需要哪些值。例如，如果您想将浏览器导航到在 Facebook 画布中运行的“应用程序”，您将需要构建一个 URL，例如：“apps.facebook.com/app_namespace_here”。

我不确定您将如何验证桌面应用程序（或移动应用程序）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T12:14:26.507

如果我理解你的问题是正确的，你想知道在什么条件下请求

```
https://graph.facebook.com/YOUR_APP_ID 
```

生成带有名为命名空间的字段的 JSON 响应，以及在什么情况下不包含命名空间字段。

所有应用程序都有一个名称，该名称在您创建应用程序时设置。当您发出上述请求时，将始终返回名称字段。

应用程序不必有命名空间。创建应用程序时不必指定它（虽然可以但不是强制性的）。如果您创建一个没有命名空间的应用程序，上面的请求将返回一个没有命名空间的 JSON 响应。

换句话说，您的示例中的应用程序二未返回命名空间的最可能原因是尚未在 Facebook 开发人员的应用程序设置页面上指定它。

因此，净，您可以使用名称或命名空间进行验证，但如果您使用命名空间，则必须检查它是否确实已添加到应用程序设置中。

# android - Android：如何在另一个任务中运行小部件？

> ID：10385353
> 
> 赞同：1
> 
> 时间：2012-04-30T14:26:25.967
> 
> 标签：android, widget, task

我实现了一些应用程序。除了我的应用程序有某种小部件。这个 Widget 只是启动 PlayStore。我的问题是，如果小部件已启动并且我按下 Home-Button 并打开我的应用程序（不是小部件），我看到的不是我的应用程序的第一个 Activity（主 Activity），而是我的小部件中的 Activity。我发现了一种可以使用的可能性。为此，我需要设置我的应用程序的主要活动：

```
android:launchMode="singleInstance" 
```

它有效，但我也用于启动 PlayStore `startActivityForResult()`。然后它不起作用，因为：

> 另一方面，“singleInstance”活动不允许其他活动成为其任务的一部分。这是任务中的唯一活动。如果它启动另一个活动，则该活动将分配给不同的任务。

有人知道我该如何解决？我将非常感谢。

# c# - 在 VSTO 项目中从 Excel 工作簿中读取 50 万条记录

> ID：10385354
> 
> 赞同：4
> 
> 时间：2012-04-30T14:26:26.243
> 
> 标签：c#, excel, vsto

我正在尝试使用 VSTO 并通过创建 Visual Studio 2010 Office 工作簿项目在 Excel 中构建模拟工具。此工作簿中的一个工作表将包含大约 50 万条记录。理想情况下，我想阅读在模拟中使用它们的所有记录，然后输出一些统计数据。到目前为止，`OutOfMemory`当我试图一次性获取整个范围然后将单元格从中取出时，我遇到了例外。有没有人对我如何阅读所有数据或建议有其他想法？

这是我的代码：

`Excel.Range range = Globals.shData.Range["A2:AX500000"];`

`Array values = (Array)range.Cells.Value;`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T15:01:15.287

批量获取，并在内存中组装一个内存稍微少一点的模型怎么样？

```
var firstRow = 2;
var lastRow = 500000;
var batchSize = 5000;
var batches = Enumerable
    .Range(0, (int)Math.Ceiling( (lastRow-firstRow) / (double)batchSize ))
    .Select(x => 
        string.Format(
            "A{0}:AX{1}",
            x * batchSize + firstRow,
            Math.Min((x+1) * batchSize + firstRow - 1, lastRow)))
    .Select(range => ((Array)Globals.shData.Range[range]).Cells.Value);

foreach(var batch in batches)
{
    foreach(var item in batch)
    {
        //reencode item into your own object collection.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:59:57.460

这不是 Excel 问题，而是一般 C# 问题。不是收集内存中的所有行，而是生成行并迭代计算统计信息。

例如

```
class Program
{
    static void Main(string[] args)
    {
        var totalOfAllAges = 0D;
        var rows = new ExcelRows();

        //calculate various statistics
        foreach (var item in rows.GetRow())
        {
            totalOfAllAges += item.Age;
        }

        Console.WriteLine("The total of all ages is {0}", totalOfAllAges);
    }
}

internal class ExcelRows
{
    private double rowCount = 1500000D;
    private double rowIndex = 0D;

    public IEnumerable<ExcelRow> GetRow()
    {
        while (rowIndex < rowCount)
        {
            rowIndex++;
            yield return new ExcelRow() { Age = rowIndex };
        }
    }
}
/// <summary>
/// represents the next read gathered by VSTO
/// </summary>

internal class ExcelRow
{
    public double Age { get; set; }
} 
```

# scheme - 编写一个什么都不做的延续

> ID：10385357
> 
> 赞同：4
> 
> 时间：2012-04-30T14:26:44.877
> 
> 标签：scheme, continuations, r6rs

也许我的问题有一个非常简单的答案，但我找不到。

在 Scheme R6RS 中，我如何构建一个什么都不做且需要任何参数的延续？

我的目标是继续，让我们`QUIT`这样命名，如果我有以下代码：

```
((lambda ()
  (display 1)
  (display 2)
  (QUIT)
  (displey "A"))) 
```

它预印了 1 和 2，但不是 "A"。+

你能帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:18:28.850

最直接的方法是使用简单的“返回”样式延续：

```
(call/cc (lambda (return) 
    (display 1) 
    ...
    (return) 
    (display "A"))) 
```

这些帮助有用？

# indexeddb - 你如何让 indexeddb 事务保持活跃？

> ID：10385364
> 
> 赞同：18
> 
> 时间：2012-04-30T14:27:12.903
> 
> 标签：indexeddb

只要您使用适当的 IDBTransaction，是否可以从单个事务中完成所有这些操作，而不是打开多个事务（读取表、写入表、写入另一个表等）？

Mozilla 说：“保持事务处于活动状态的唯一方法是对其发出请求。当请求完成时，您将收到一个 DOM 事件，并且假设请求成功，您将有另一个机会来扩展事务在那次回调期间。” 这有点模糊。这是否意味着如果我为 DOM 回调提供了一个事件处理程序，我可以在该回调的任何时候使用该事务，而不必担心事务被关闭？

[https://developer.mozilla.org/en/IndexedDB/Using_IndexedDB#Adding_data_to_the_database](https://developer.mozilla.org/en/IndexedDB/Using_IndexedDB#Adding_data_to_the_database)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-15T22:48:09.330

简短回答：如果您为“成功”或“错误”事件提供事件处理程序，您可以在该事件处理程序中放置一个新请求，而不必担心事务会自动关闭。

长答案：事务提交通常应该是完全透明的。唯一的规则是你不能在做非数据库“东西”时保持事务打开。即你不能开始一个事务，然后在做一些 XMLHttpRequests 或者等待用户点击一个按钮的时候让它保持打开状态。

一旦您停止对事务发出请求并且最后一个请求回调完成，事务就会自动关闭。

但是，您可以启动一个事务，使用该事务读取一些数据，然后写入一些结果。

因此，请确保在开始事务之前拥有所需的所有数据，然后在请求回调中执行您想要执行的所有读取和写入操作。完成后，交易将自动完成。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-01T22:19:16.310

IndexedDB 事务在最后一个回调被触发后立即提交，因此保持它们活动的方法是通过回调传递它们。

我从 Jonas Sicking 那里获取我的交易信息，Jonas Sicking 是一名 Mozilla 开发人员和 IndexedDB 的共同规范作者，他在[这篇出色的博客文章](http://blog.nparashuram.com/2011/11/indexeddb-apis-javascriptnext.html)中发表了以下评论：

> 以下句子不正确“当事务变量超出范围并且不能再针对它放置更多请求时，今天的事务会自动提交”。
> 
> 当变量超出范围时，事务永远不会自动提交。通常，它们仅在最后一个成功/错误回调触发并且该回调不再安排更多请求时提交。所以它与任何变量的范围无关。
> 
> 唯一的例外是，如果您创建了一个事务但没有对它提出任何请求。在这种情况下，只要您返回事件循环，事务就会“提交”（无论这对于没有请求的事务意味着什么）。在这种情况下，只要对事务的所有引用超出范围，您就可以在技术上“提交”事务，但这并不是一个特别有趣的优化用例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-27T07:31:19.107

简短的回答：不要保留。

为了防止竞争条件，IndexedDB 是为隐式提交而设计的，因此您不能显式地保持事务处于活动状态。如果需要，请更改您的算法，使其不需要保持活动状态。

重用事务以提高性能并执行有序请求。在这些情况下，事务将隐式保持活动状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-20T11:38:27.557

要保持事务处于活动状态，请从完成操作的回调中继续执行下一个操作。请参考以下示例代码。

```
function put_data(db,tableName,data_array)
{
    var objectStore=db.transaction([tableName],"readwrite").objectStore(tableName);
    put_record(data_array,objectStore,num_rows,0);
}

function put_record(data_array,objectStore,row_index)
{
    if(row_index<data_array.length)
    {
        var req=objectStore.put(data_array[row_index]);
        req.onsuccess=function(e)
        {
            row_index+=1;
            put_record(data_array,objectStore,row_index);
        };
        req.onerror = function()
        {
            console.error("error", this.error);
            row_index+=1;
            put_record(data_array,objectStore,row_index);
        };
    }
} 
```

# c# - 如何在文本文件中向上/向下移动项目

> ID：10385369
> 
> 赞同：5
> 
> 时间：2012-04-30T14:27:40.330
> 
> 标签：c#, .net, visual-studio

如何在文本文件中上下移动项目/值。在我的程序读取文本文件的那一刻，当没有更多的行要读取时，它会使用一段时间来确保它停止。我使用 if 语句来检查 counter 是否等于我要移动的值的行。我不知道如何从这里继续。

```
 _upORDown = 1; 

    using (StreamReader reader = new StreamReader("textfile.txt"))
    {
        string line = reader.ReadLine();
        int Counter = 1;
        while (line != null)
        {

            if (Counter == _upORDown)
            {
              //Remove item/replace position

            }
            Counter++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:34:16.083

您可以读取内存中的文件，将行移动到您需要的位置，然后将文件写回。您可以使用`ReadAllLines`和`WriteAllLines`。

此代码将 position 处的字符串`i`向上移动一行：

```
if (i == 0) return; // Cannot move up line 0
string path = "c:\\temp\\myfile.txt";
// get the lines
string[] lines = File.ReadAllLines(path);
if (lines.Length <= i) return; // You need at least i lines
// Move the line i up by one
string tmp = lines[i];
lines[i] = lines[i-1];
lines[i-1] = tmp;
// Write the file back
File.WriteAllLines(path, lines); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:49:04.897

@dasblinkenlight 的答案，使用 LINQ：

```
string path = "c:\\temp\\myfile.txt";
var lines = File.ReadAllLines(path);
File.WriteAllLines(
    path,
    lines.Take(i).Concat(
        lines.Skip(i+1)
    )
); 
```

这将删除位置处的行`i`（从零开始）并将其他行向上移动。

添加到新行：

```
string path = "c:\\temp\\myfile.txt";
var lines = File.ReadAllLines(path);
var newline = "New line here";
File.WriteAllLines(
    path,
    lines.Take(i).Concat(
        new [] {newline}
    ).Concat(
        lines.Skip(i+1)
    )
); 
```

# java - GWT：Log4j 问题

> ID：10385370
> 
> 赞同：0
> 
> 时间：2012-04-30T14:27:45.253
> 
> 标签：java, gwt, log4j

我一直在与这个问题作斗争超过 48 小时。所以我有一个我开发的 gwt 应用程序，然后我决定通过使用 GAE 数据存储（实体）为其添加持久性，一切都运行良好，所以我决定使用 JPA 来减少我使用实体编写的代码量。

我遇到了数据核的问题，很多！直到我什至无法启动我的应用程序。我已经尝试了很多新的配置，现在我陷入了困境。

我碰到了这个[pom](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/expenses/pom.xml)，所以我决定使用，我删除了我不需要的东西，因为它们在编译时被破坏了。

眼下。我可以毫无问题地编译和运行，但是当请求通过 GWT 时，我得到了这个奇怪的异常

```
2012-04-30 14:02:45.175:WARN::Error for /LottoShop/lottoService
java.lang.Error: Unresolved compilation problem: |?The import org.apache.log4j cannot be resolved|
        at co.za.cre8.web.lottoShop.server.LottoServiceImpl.<init>(LottoServiceImpl.java:11)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at java.lang.Class.newInstance0(Class.java:355)
        at java.lang.Class.newInstance(Class.java:308)
        at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
        at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
        at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
        at co.za.cre8.web.lottoShop.server.GWTCacheControlFilter.doFilter(GWTCacheControlFilter.java:49)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:58)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
        at com.google.apphosting.utils.jetty.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:70)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:351
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
2012-04-30 14:02:45.195:WARN::Error for /LottoShop/lottoService 
```

我**没有**一个单一的导入，`import org.apache.log4j`事实上该类 LottoService 中没有。

这就是我的依赖树的样子：

```
[INFO] Building GWT Maven Archetype
[INFO]    task-segment: [dependency:tree]
[INFO] ------------------------------------------------------------------------
[INFO] [dependency:tree {execution: default-cli}]
[INFO] co.za.cre8.web:lottoShop:war:0.0.1-SNAPSHOT
[INFO] +- net.sourceforge:rsslib4j:jar:0.2:compile
[INFO] +- org.jsoup:jsoup:jar:1.6.2:compile
[INFO] +- com.google.appengine:appengine-api-1.0-sdk:jar:1.5.3:compile
[INFO] +- com.allen-sauer.gwt.log:gwt-log:jar:3.1.6:compile
[INFO] |  \- com.google.gwt:gwt-user:jar:2.4.0:compile
[INFO] +- commons-lang:commons-lang:jar:2.6:compile
[INFO] +- org.apache.commons:commons-math:jar:2.2:compile
[INFO] +- junit:junit:jar:4.7:test
[INFO] +- javax.validation:validation-api:jar:1.0.0.GA:compile
[INFO] +- javax.validation:validation-api:jar:sources:1.0.0.GA:compile
[INFO] +- log4j:log4j:jar:1.2.16:compile
[INFO] +- org.scribe:scribe:jar:1.3.0:compile
[INFO] |  \- commons-codec:commons-codec:jar:1.4:compile
[INFO] +- com.google.appengine.orm:datanucleus-appengine:jar:1.0.8:compile
[INFO] +- org.datanucleus:datanucleus-core:jar:1.1.5:compile
[INFO] +- org.datanucleus:datanucleus-jpa:jar:1.1.5:compile
[INFO] |  \- org.apache.geronimo.specs:geronimo-jpa_3.0_spec:jar:1.1.1:compile
[INFO] +- org.datanucleus:datanucleus-rdbms:jar:1.1.5:compile
[INFO] |  \- javax.transaction:transaction-api:jar:1.1:compile
[INFO] +- org.datanucleus:datanucleus-enhancer:jar:1.1.4:compile
[INFO] |  \- asm:asm:jar:3.3.1:compile
[INFO] +- javax.jdo:jdo2-api:jar:2.3-eb:compile
[INFO] +- org.hibernate:hibernate-validator:jar:4.0.2.GA:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:1.5.6:compile
[INFO] +- cglib:cglib-nodep:jar:2.2:compile
[INFO] +- javax.transaction:jta:jar:1.1:compile
[INFO] +- org.springframework:spring-jdbc:jar:3.0.3.RELEASE:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.0.3.RELEASE:compile
[INFO] |  +- org.springframework:spring-core:jar:3.0.3.RELEASE:compile
[INFO] |  |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] |  \- org.springframework:spring-tx:jar:3.0.3.RELEASE:compile
[INFO] |     \- org.springframework:spring-aop:jar:3.0.3.RELEASE:compile
[INFO] +- org.springframework:spring-orm:jar:3.0.3.RELEASE:compile
[INFO] +- commons-pool:commons-pool:jar:1.5.4:compile
[INFO] +- commons-dbcp:commons-dbcp:jar:1.3:compile
[INFO] +- org.springframework:spring-web:jar:3.0.3.RELEASE:compile
[INFO] |  +- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  \- org.springframework:spring-context:jar:3.0.3.RELEASE:compile
[INFO] +- org.springframework:spring-webmvc:jar:3.0.3.RELEASE:compile
[INFO] |  +- org.springframework:spring-asm:jar:3.0.3.RELEASE:compile
[INFO] |  +- org.springframework:spring-context-support:jar:3.0.3.RELEASE:compile
[INFO] |  \- org.springframework:spring-expression:jar:3.0.3.RELEASE:compile
[INFO] +- org.springframework.webflow:spring-js:jar:2.0.8.RELEASE:compile
[INFO] +- commons-digester:commons-digester:jar:2.0:compile
[INFO] |  \- commons-beanutils:commons-beanutils:jar:1.8.0:compile
[INFO] +- commons-fileupload:commons-fileupload:jar:1.2.1:compile
[INFO] +- org.tuckey:urlrewritefilter:jar:3.1.0:compile
[INFO] +- javax.servlet:jstl:jar:1.2:compile
[INFO] +- javax.el:el-api:jar:1.0:provided
[INFO] \- joda-time:joda-time:jar:1.6:compile 
```

即使我通过删除依赖项中的 log4j 来使用 slf4j，我也添加了以下内容：Nothing works，同样的问题，当我查看 Eclipse mvn 依赖项时，日志库就在那里，甚至在

```
 <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.5.10</version>
</dependency>                
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>jcl-over-slf4j</artifactId>
    <version>1.5.10</version>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.5.10</version>
</dependency> 
```

添加了 slf4j 在 WEB-INF/lib 中的证明

![WEB-INF 库文件夹](../Images/36282143e35994326cea33c57288ef99.png)

您的帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:38:43.813

你在你的类路径中添加了 log4j 吗？Slf4j 只是一个 Facde 接口，从你使用的 jar 文件中，Slf4j 需要找到 log4j 来生成日志信息。

# wcf - WCF 不从群集 MSMQ 读取

> ID：10385372
> 
> 赞同：3
> 
> 时间：2012-04-30T14:27:59.830
> 
> 标签：wcf, msmq

我有一个集群 MSMQ 我还有一个 WCF 服务应用程序（在控制台中自行托管），它读取这些消息。

但是，该应用程序似乎根本没有读取放置在队列中的任何消息，但是如果您在集群环境中运行相同的应用程序，它读取队列没有问题。

有任何想法吗？

我的想法是：

```
ClusteredMSMQ (for failover reasons to ensure high availability)
Server 1 -> WCF service app
Server 2 -> WCF service app
Server 3 -> WCF service app 
```

WCF 服务应用程序的 3xservers 的原因是，如果一个崩溃，另一个仍然可以继续接管读取队列中的消息。它是事务性 MSMQ 并且服务绑定指向集群 MSMQ 并且设置了 ExactlyOnce=true。此外，如果服务应用程序有更新，那么我们需要将其删除并执行更新 - 同时其他服务应用程序可以接管。说得通？

任何想法发生了什么或我误解了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:01:46.147

解决方案是在集群中的所有服务器上也应该使用相同的设置配置 DTC。应用此之后，然后将 DTC 创建为集群应用程序/服务。

最后，应用程序能够读取消息

# java - 需要在 glassfish 3.1.2 域 lib 目录中复制外部 jar 文件

> ID：10385377
> 
> 赞同：1
> 
> 时间：2012-04-30T14:28:20.057
> 
> 标签：java, glassfish

我正在尝试部署一个耳朵应用程序 Glassfish 3.1.2 但是我不能，因为它抛出异常“找不到类”但是我能够在 Glassfish 2.1.1 上部署相同的耳朵应用程序。当我在 <>/lib 目录下复制所有相关的 jar 文件时，它就可以工作了。为什么我在 GF312 上部署 ear 时出错，而在 GF211 上部署相同的应用程序而不包括上述位置中提到的 jar 文件。我正在使用jdk7。

谁能帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:00:12.037

我认为问题是由于 galssfish/module 目录中存在 jaxb jar

# javascript - 在 Sencha touch 2 上设置布局

> ID：10385378
> 
> 赞同：1
> 
> 时间：2012-04-30T14:28:19.920
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

当方向改变时，我尝试设置布局，但我得到了这种类型的错误：

```
*Console.js:17Uncaught Error: [ERROR][Ext.Container#setLayout] Replacing a layout after one has already been initialized is not currently supported.* 
```

我无法得到，这里发生了什么。这是我的代码：

```
 onOrientationChange:function(viewport, orientation){  
        viewport.setLayout('vbox');
  } 
```

视口在哪里：

```
Ext.define("Q4.view.blg", {
    extend: 'Ext.Container',
    xtype:  'blg',
    config:{    
        title:"blg",
        iconCls:'star',
        cls:'blogList',
        disableSelection: true,
        layout: 'hbox',
        defaults:{
            scrollable:false
        },........ 
```

谢谢 ！！！！！！

# .net - 无法理解 .Net 代码

> ID：10385382
> 
> 赞同：0
> 
> 时间：2012-04-30T14:28:38.887
> 
> 标签：.net

是否知道他在下面的代码
“ `chartSeries.AddItem(new ChartSeriesItem(listData[i].x, listData[i].y));`” 行中正在做什么

我从一个论坛获取了这段代码。
[http://www.telerik.com/community/forums/aspnet-ajax/chart/performance-problem-on-line-chart.aspx](http://www.telerik.com/community/forums/aspnet-ajax/chart/performance-problem-on-line-chart.aspx)
我无法理解它是什么样的数据持有者？

我正在以数据集格式提取数据，如果我可以将我的数据集与 listdata 绑定，我将实现这一发展。但我并不明白我需要如何进行这种绑定。

我已经尝试如下，但没有成功并出现错误，请查找附件。

```
Dim listdata As new DataList 
listdata.DataSource = ds.Tables.Item(0)
listdata.DataBind() 
```

![在此处输入图像描述](../Images/c25e451ab76e091bcfa7224937f22072.png)

**原始代码取自论坛**

```
ChartSeries chartSeries = new ChartSeries("Altitude", ChartSeriesType.Line); 
chartSeries.Appearance.ShowLabels = false; 
incrementCount = 1; 

for (int i = 0; i < listData.Count; i = i + incrementCount) 
    {
        chartSeries.AddItem(new ChartSeriesItem(listData[i].x, listData[i].y)); 
    }

RadChart2.AddChartSeries(chartSeries);
RadChart2.PlotArea.XAxis.AxisLabel.TextBlock.Text = "Distance (Miles)"; 
RadChart2.PlotArea.YAxis.AxisLabel.TextBlock.Text = "Yaxislabel"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:34:49.420

我认为它就这么简单，错误是你不能使用New这个词，论坛上的代码说使用new，大写可以在.net中产生所有差异

# asp.net - gridview排序：每次都需要重读？

> ID：10385383
> 
> 赞同：0
> 
> 时间：2012-04-30T14:28:40.397
> 
> 标签：asp.net, gridview

我正在使用代码填充 GridView，将数据源设置为查询返回的数据集。所以显然排序和分页不仅仅像我使用datasourceid = some sqldatasource那样神奇地工作。

我在网上找到了许多如何执行此操作的示例，但它们似乎每次都重新执行查询。查询的内容不应该保存在视图状态吗？有什么方法可以只获取之前的查询结果并重新排序而无需返回数据库？（它是否将所有数据保存在视图状态？如果是，为什么我不能得到它？将它全部发送到用户的浏览器并全部发送回来似乎很愚蠢，浪费所有带宽，如果没有到达它的方法。）

此外，如果我尝试允许分页，似乎每次用户转到另一个页面时我都必须重新执行查询。如果用户先排序然后翻页，那么我必须记住隐藏字段中的排序顺序是什么，这样我就可以重新读取数据，重新排序，然后转到正确的页面。

鉴于当您使用数据源控件时，所有这些行为都是内置的，我想我在这里遗漏了一些东西。但是考虑到所有以这种缓慢而艰难的方式完成的示例，如果我遗漏了某些东西，那么很多其他程序员也会遗漏它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:05:47.893

如果每次通过数据集对列或页面进行排序时都使用 ASP.NET GridView 控件，那么您就是在进行服务器回发。使用这种特殊控件进行排序和分页从未“神奇”地工作过，并且长期以来一直是我的烦恼。

您可以通过将构建网格的数据源存储在内存中来加快速度，无论是作为会话还是通过 ViewState。两者都有优点和缺点，我建议你阅读。

如果可能的话，我建议忘记 ASP.NET GridView 并查看客户端解决方案，例如 jQuery jqGrid。它使用 AJAX 调用来排序和分页，而且速度快得多，而且不那么令人头疼。唯一的缺点是学习曲线，但相信我从长远来看这是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:30:37.207

是的，gridview 每次都重新执行查询。

如果查询时间过长，您可以手动将数据存储在会话或 ViewState 中。在填充网格的算法中，只需直接读取它们，而不是运行查询。

您可以在页面加载事件中，在没有回发时运行一次查询（您可以使用

```
if (!Page.IsPostBack){
    //Run the query and save it to the session
} 
```

填充网格的方法应该直接从会话中读取。无需再次运行查询

# jquery - JQuery - 未按预期提交表单

> ID：10385388
> 
> 赞同：0
> 
> 时间：2012-04-30T14:29:01.477
> 
> 标签：jquery, forms, submit, form-submit

我编写了一个简单的脚本来验证 jQuery 中的表单。这些是提交按钮：

```
<button type="submit" id="submitCrear"  name="submitCrear">Confirm</button> ---->Cancel button
<button type="submit" value="cancelar"  name="cancelar" id="btnCancelar">Cancel</button> ---->Confirm button 
```

当按下取消按钮时，应该发送表单而不进行任何验证。相反应该发生与确认按钮。

但这是我不明白的：当我按下确认按钮时，验证过程正常开始，但是然后我按下取消按钮并且在所有验证完成之前不会发送表单（isValidForm 变量变为'true'）。

```
<script type="text/javascript"> 
    var isValidForm;
    $(document).ready(function() {              
        $('#btnCancelar').click(function () {
            $('form').submit();
        });

        $('#submitCrear').click(function () {
            $('form').submit(function(){
                return validarForm();
            });
        });
    });

    function validarForm(){
        isValidForm = true;
        $("input:text").each(function(i) {
            if(this.value == ''){
                if (!$("#errorMessage"+i).length > 0)
                    addErrorMessage(this, i, '*REQUERIDO');
                isValidForm = false;
            }else{
                removeErrorMessage(this, i);
            }
        });
        $("input:password").each(function(i) {
            if(this.value == ''){
                if (!$("#errorMessage"+(i+999)).length > 0)
                    addErrorMessage(this, (i+999), '*REQUERIDO');
                isValidForm = false;
            }else{
                if(($(this).attr('id') == 'rePassword_r') && ($(this).val() != $("#password_r").val())){
                    if ($("#errorMessage"+(i+999)).length > 0){
                        removeErrorMessage(this, (i+999));
                        addErrorMessage(this, (i+999), 'The password doesn't match.');
                    }
                    isValidForm = false;
                }else{
                    removeErrorMessage(this, (i+999));
                }
            }
        });
        return isValidForm;
    }

    function addErrorMessage(element, indice, mensaje){
       ...

    }

    function removeErrorMessage(element, indice){
        ...
    }
</script> 
```

即使验证过程开始，我应该怎么做才能发送带有取消按钮的表单？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:38:40.963

您有两个按钮和以下 jQuery

```
 $(document).ready(function() {              
    $('#btnCancelar').click(function () {
        $('form').submit();
    });

    $('#submitCrear').click(function () {
        $('form').submit(function(){
            return validarForm();
        });
    });
}); 
```

jQuery 的后半部分意味着当提交表单时，它将被验证，因为您已将验证分配给表单提交，而不是按钮单击。这就是为什么它现在在两个按钮上触发。

按照设计，不要提交类型的按钮，无论如何都提交表单？所以你不应该把你的 jQuery 改成：

```
 $(document).ready(function() {              

    $('#submitCrear').click(function () {
            return validarForm();
    });
}); 
```

# javascript - 使用 CSS 转换或 javascript 来动态缩放元素以适应其父元素

> ID：10385393
> 
> 赞同：6
> 
> 时间：2012-04-30T14:29:28.703
> 
> 标签：javascript, css, css-transforms

我有一个页面，其中有一个`<div>`元素轮，当您单击一个按钮时，整个轮子会旋转。

我通过使用本质上是绝对的 CSS 变换来实现这种效果。但是轮子很大，在我的高清显示器上看起来不错，但较小的屏幕会被切掉边缘。我不能像使用普通布局那样使用 % 宽度，我需要以与大多数浏览器缩放功能相同的方式缩小整个页面。

对于我自己，我知道 ctr+mouseWheel 会缩小页面，这样我就可以看到整个页面，但是我不能指望其他人这样做。

我知道我可以`-browser-transform: scale(amt);`在包装 div 上使用来获得我想要的效果，但是我想不出一种动态的方法。如果我将比例设置为 0.5，无论屏幕如何，它都会是 0.5。我希望轮子的边缘距离任何屏幕上的屏幕边缘只有几个像素。我知道媒体查询可以用来解决问题，但它们要么让我得到不太理想的结果，要么需要太多不同的查询。必须有一种以`-browser-transform: scale(amt);`编程方式进行修改的方法，或者某种其他方式来进行有限控制。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:00:27.760

您是否尝试过在 css 中使用媒体查询来定位不同的屏幕。例如，在您的 css 文件中有一个媒体查询，指出在 320 - 480 像素的宽度处，包含此轮子的 div 被缩放到 50%。然后在 481-768 像素处，将 div 容器缩放到 75%。从 769 像素开始，div 被缩放到 100%。

这应该可以帮助您在不同的屏幕尺寸下实现所需的动态缩放。如果你想要一个演示，我很乐意制作一个 jsfiddle 来展示它。

# python - 带有控制字符的路径作为 Python 中 shell 的参数

> ID：10385399
> 
> 赞同：0
> 
> 时间：2012-04-30T14:29:48.760
> 
> 标签：python, shell, path, control-characters

我正在尝试使用某些应用程序打开文件*路径。*问题是路径包含各种控制字符，使文件难以打开。下面的代码显示了我最后一次尝试使用*\*前缀控制字符，但它奇怪地多次打开文件（如无限循环）。

```
path = path.replace("'", "\\'")
path = path.replace("(", "\\(")
path = path.replace(")", "\\)")
try:
  os.system("%s %s 2>/dev/null &" % (appForExtension[extension], path))
except:
  print "not opened" 
```

你知道如何用*os.system()*调用标准地打开文件，避免控制字符的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:39:34.003

`os.system`您可以使用该模块而不是使用该`subprocess`模块，并避免通过外壳传递您的命令。这意味着您不必担心转义引号或其他 shell 元字符……通常，您不必担心 shell（错误）解释路径的部分。

```
import subprocess
res = subprocess.call([appForExtension[extension], path]) 
```

文档`subprocess.call`说：

```
subprocess.call = call(*popenargs, **kwargs)
    Run command with arguments.  Wait for command to complete, then
    return the returncode attribute. 
```

...您会注意到它与 非常相似`os.system`，除了`subprocess.call`默认情况下避免使用外壳。

重定向`stderr`留给读者作为练习......

# objective-c - NSDictionay always returns nil

> ID：10385409
> 
> 赞同：0
> 
> 时间：2012-04-30T14:30:13.167
> 
> 标签：objective-c, ios, ios5

I have two separate dictionaries. First one has letter's equivalent icon names, and the second one has the number of frames for icon. The definition is as follows:

```
NSDictionary *alphabet = [[NSDictionary alloc] initWithObjectsAndKeys: @"A", @"A", @"B", @"B", @"C", @"C", @"Ç", @"CC", @"D", @"D", @"E", @"E", @"F", @"F", @"G", @"G", @"Ğ", @"GG", @"H", @"H", @"I", @"I", @"İ", @"II", @"J", @"J", @"K", @"K", @"L", @"L", @"M", @"M", @"N", @"N", @"O", @"O", @"Ö", @"OO", @"P", @"P", @"R", @"R", @"S", @"S", @"Ş", @"SS", @"Q", @"Q", @"T", @"T", @"U", @"U", @"Ü", @"UU", @"V", @"V", @"W", @"W", @"X", @"X", @"Y", @"Y", @"Z", @"Z", @" ", @"EMPTY", nil];
NSDictionary *icons = [[NSDictionary alloc] initWithObjectsAndKeys: @"A", @"4", @"B", @"3", @"C", @"1", @"CC", @"5", @"D", @"4", @"E", @"4", @"F", @"4", @"G", @"4", @"GG", @"7", @"H", @"4", @"I", @"1", @"II", @"6", @"J", @"6", @"K", @"4", @"L", @"1", @"M", @"4", @"N", @"4", @"O", @"1", @"OO", @"6", @"P", @"4", @"Q", @"1", @"R", @"4", @"S", @"4", @"SS", @"6", @"T", @"4", @"U", @"1", @"UU", @"6", @"V", @"1", @"W", @"1", @"X", @"1", @"Y", @"4", @"Z", @"4", @"EMPTY", @"0", nil]; 
```

I get a word, then for each letter try to get icon name from alphabet and number of frames from icons. However, icons always return nil. I tried NSNumber for icons, but it doesn't work.

```
for (int i = 0; i < textLength; i++) {
        NSString * iconLetter = [icons objectForKey: [heardText substringWithRange:NSMakeRange(i, 1)]];
        int iconFrame = [[alphabet objectForKey: iconLetter] intValue];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:35:47.640

Your value and key pairs for icon are in wrong position. It should be "value, forKey" pattern, or "1", "A", ....

# scorm - 即时创建 SCORM 内容

> ID：10385413
> 
> 赞同：0
> 
> 时间：2012-04-30T14:30:47.707
> 
> 标签：scorm, scorm2004

我希望在 ASP.NET 中以编程方式即时创建 SCORM 包，以便在我的 Web 上的一些兼容 SCORM 的播放器中动态运行 em。我是 SCORM 的新手，并且在 Google 上搜索过。SCORM 包中到底应该包含什么？我知道我必须压缩我正在考虑使用 System.IO.Packaging 命名空间类或其他用于压缩文件的外部库的文件。SCORM 包中究竟应该包含什么才能使其符合 SCORM 2.0 并在某些 SCORM 播放器中运行？

请帮忙..谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:55:14.213

SCORM 包应该是独立的，并且能够运行，只需将它们放在 LMS 的 Web 服务器的文件系统上。大多数 LMS 不允许您包含服务器端代码，因为它代表安全漏洞。

如果您的内容需要服务器端代码，则需要将其托管在您自己的服务器上，但您很快就会遇到跨域脚本问题，该问题会阻止一个域中的内容通过 JavaScript 与另一个域中的 LMS 进行通信。

SCORM 包中还有许多其他细节。开始了解它们的最佳方式是阅读[SCORM Explained](http://scorm.com/scorm-explained/)并通过[Technical SCORM](http://scorm.com/scorm-explained/technical-scorm/) track。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T20:24:11.743

创建 SCORM 包至少需要两件事： - 一个名为 imsmanifest.xml 的文件，其中包含包的描述。这应该符合 SCORM CAM 规范。但是，如果您只打算在您的播放器中动态创建和运行此 SCO 包，则可以跳过此步骤。- 一个 JavaScript API，可以发现您的 SCORM 播放器并至少调用其函数 LMSInitialize、LMSCommit 和 LMSFinish。

请记住，目前没有 SCORM 2.0。只有 1.2 和 2004 版本。我强烈建议您从更简单且广泛使用的 SCORM 1.2 开始。

# python - Python TypeError: expected a character buffer object，个人误解

> ID：10385419
> 
> 赞同：4
> 
> 时间：2012-04-30T14:31:25.743
> 
> 标签：python, unicode

我很长一段时间都被这个错误困住了：

```
 TypeError: expected a character buffer object 
```

我只是理解我误解了什么，这是关于 unicode 字符串和“简单”字符串之间的区别，我试图将上述代码与“普通”字符串一起使用，而我必须通过一个 unicode 字符串。所以在字符串中断执行之前忘记简单的“u”：/ !!!

顺便说一句，TypeError 对我来说非常不清楚，现在仍然如此。

拜托，有人可以解释一下我缺少什么以及为什么“简单”字符串不是“字符缓冲区对象”吗？

[您可以使用下面的代码进行复制（从此处](http://perso.limsi.fr/pointal/dev%3atreetaggerwrapper)提取和（c）：）

```
def maketransU(s1, s2, todel=u""):
    """Build translation table for use with unicode.translate().

    :param s1: string of characters to replace.
    :type s1: unicode
    :param s2: string of replacement characters (same order as in s1).
    :type s2: unicode
    :param todel: string of characters to remove.
    :type todel: unicode
    :return: translation table with character code -> character code.
    :rtype: dict
    """
    # We go unicode internally - ensure callers are ok with that.
    assert (isinstance(s1,unicode))
    assert (isinstance(s2,unicode))
    trans_tab = dict( zip( map(ord, s1), map(ord, s2) ) )
    trans_tab.update( (ord(c),None) for c in todel )
    return trans_tab

#BlankToSpace_table = string.maketrans (u"\r\n\t\v\f",u"     ")
BlankToSpace_table = maketransU (u"\r\n\t\v\f",u"     ")
def BlankToSpace(text) :
    """Replace blanks characters by realspaces.

    May be good to prepare for regular expressions & Co based on whitespaces.

    :param  text: the text to clean from blanks.
    :type  text: string
    :return: List of parts in their apparition order.
    :rtype: [ string ]
    """
    print text, type(text), len(text)
    try:
        out =  text.translate(BlankToSpace_table)
    except TypeError, e:
        raise
    return out

# for SO : the code below is just to reproduce what i did not understand
dummy = "Hello,\n, this is a \t dummy test!"
for s in (unicode(dummy), dummy):
    print repr(s)
    print repr(BlankToSpace(s)) 
```

生产：

```
u'Hello,\n, this is a \t dummy test!'
Hello,
, this is a      dummy test! <type 'unicode'> 32
u'Hello, , this is a   dummy test!'
'Hello,\n, this is a \t dummy test!'
Hello,
, this is a      dummy test! <type 'str'> 32

Traceback (most recent call last):
  File "C:/treetaggerwrapper.error.py", line 44, in <module>
    print repr(BlankToSpace(s))
  File "C:/treetaggerwrapper.error.py", line 36, in BlankToSpace
    out =  text.translate(BlankToSpace_table)
TypeError: expected a character buffer object 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T14:39:45.130

问题是`translate`字节字符串的`translate`方法与 unicode 字符串的方法不同。这是非 unicode 版本的文档字符串：

> S.translate(table [,deletechars]) -> 字符串
> 
> 返回字符串 S 的副本，其中删除可选参数 deletechars 中出现的所有字符，剩余的字符已通过给定的转换表映射，该转换表必须是长度为 256 的字符串。

这是 unicode 版本：

> S.translate(table) -> unicode
> 
> 返回字符串 S 的副本，其中所有字符都已通过给定的转换表进行映射，该转换表必须是 Unicode 序数到 Unicode 序数、Unicode 字符串或无的映射。未映射的字符保持不变。映射到 None 的字符被删除。

您可以看到非 unicode 版本需要“长度为 256 的字符串”，而非 unicode 版本需要“映射”（即 dict）。所以问题不在于您的 unicode 字符串是缓冲区对象而非 unicode 字符串不是 - 当然，两者都是缓冲区 - 而是一种`translate`方法期望这样的缓冲区对象而另一种方法不是。

# windows - Cygwin 的好替代品？- Cygwin 不支持原生支持 Win32 应用程序

> ID：10385424
> 
> 赞同：46
> 
> 时间：2012-04-30T14:31:47.027
> 
> 标签：windows, bash, cygwin

**2014 年 1 月 9 日更新：TL；DR 版本：** 转到这篇文章的底部以获取让 Cygwin 能够调用非 Cygwin 程序的方法。

在花时间制作了一些碰巧很大的 bash 脚本之后，较新版本的 Cygwin 已经破坏了它们。这些脚本调用不与 Cygwin 链接的本机 Win32 应用程序，这显然不受 Cygwin 的官方支持。

这让我感到惊讶，因为多年来我一直认为 Cygwin 可以在一个更加混合的环境中使用，该环境结合了本地非 Cygwin Win32 应用程序和使用 Cygwin 兼容层的 POSIX 程序。但显然只有 POSIX 兼容层真正得到支持，如果本机 Win32 非 Cygwin 应用程序工作，那么这被认为是一个快乐的巧合。

我从 Cygwin 中运行的针对 .NET Framework 编译的程序遇到的不兼容问题中发现了这一点。这曾经工作得很好，但几个月前就坏了。具体来说，通过管道传输到任何其他 Win32 程序标准输入的 .NET 程序的标准输出通常会导致接收 Win32 程序获得过早的文件结束信号，因为几个月前 Cygwin 最近从字节管道切换到消息管道- 并且消息管道似乎与任何使用 Visual C++ 或 .NET Framework 的接收应用程序不兼容。这是因为 .NET 向标准输出发出空写入，仅在使用消息管道时才将其传递给接收应用程序。接收应用程序成功读取零字节，因此认为它是文件结尾。项目负责人不

从邮件列表中的多封电子邮件中引用项目负责人 Christopher Faylor 的话：

> 您所看到的可能是因为 Cygwin 在几次修订前被更改为使用消息类型管道。这不会改变。采用该更改是为了解决 Cygwin 程序的问题，而这些显然是我们的第一要务。
> 
> 无论有多少人使用 Visual C++ 或 .NET，他们都不是我们的目标受众。对于不想使用 UNIX 工具但它们不是我们主要关注点的人来说，这很好。为想要使用非 Cygwin 东西的人解决问题并不是我认为的高优先级。
> 
> 来自 pipe.cc：请注意，管道的写入端以 PIPE_TYPE_MESSAGE 的形式打开。这*似乎*更接近于模拟 Linux 管道行为，并且对于 pty 处理肯定是必需的，因为 fhandler_pty_master 以块的形式写入管道，在指定 CANON 模式时由换行符终止。
> 
> 上面的评论在这里显示了“和”的关系。消息类型管道更接近地模仿 Linux (UNIX) 管道行为，并且绝对是 pty 所必需的。
> 
> > 我同意 James 的观点，即运行时可能有问题，但我也同意 cygwin 应该能够处理这些场景。
> 
> 你们之间的完全协议不会产生太大的影响。Cygwin 源代码不会因投票而改变。

即使这个问题最终以某种方式得到解决——谁知道呢——他们可能会在 3 个月内破坏其他东西，并且不关心修复回归。他们可能会考虑一个补丁，但我需要很长时间才能找出可行的方法。我认为我的时间最好花在其他地方，因为很明显他们非常愿意破坏与本机 Win32 应用程序的兼容性，并且不想浪费更多时间让 Win32 应用程序正常工作。所以我猜 Cygwin 不应该被认为是混合 Win32/Cygwin 环境的稳定平台——我的选择是什么？我应该从哪里开始以避免完全重写为 bash 以外的东西？我只使用基本 Cygwin 安装 + 一些基本 perl 脚本。

**更新：** 发布这个原始问题后，他们最终`pipe_byte`在环境变量中做了一个新标志`CYGWIN`：查看文档。如果设置了这个标志，它将解决上面讨论的问题。调用非 Cygwin Win32 程序时，请**始终**确保`pipe_byte`设置了标志。

但是，我后来发现与 .NET Framework 4.0 和 Cygwin 不兼容。.NET Framework 的早期版本没有此问题。我首先在 Cygwin 邮件列表中提到了这个问题：

[Cygwin 和 .NET Framework 4.0 之间的管道同步和不兼容](http://cygwin.com/ml/cygwin/2013-12/msg00345.html)

没有得到任何有效的回应，我进一步调查发现 Cygwin 正在创建重叠管道，这导致了问题。请注意，尝试对重叠管道使用非重叠 Win32 API 调用是未定义的，并且大多数（全部？）Win32 非 Cygwin 程序不使用标准文件句柄的重叠 I/O。我提交了一个补丁，该补丁在环境变量中创建了一个`pipe_nooverlap`标志，以`CYGWIN`防止这种情况发生：

[可选择禁用重叠管道的补丁](http://cygwin.com/ml/cygwin-patches/2013-q4/msg00020.html)

不幸的是，他们拒绝了这个补丁，所以你永远不会在主 Cygwin DLL 中看到这个：

[回复：补丁可选择禁用重叠管道](http://cygwin.com/ml/cygwin-patches/2014-q1/msg00006.html)

拒绝补丁的理由：

1.  暗示我破坏了 Cygwin 中的信号实现；我没有发现这种情况，因为信号仍然使用重叠的管道。
2.  他们不想添加环境变量标志，即使它显然是在解决问题。
3.  他们不想支持甚至可以选择使用非重叠管道的代码。

以这样的推理和态度，恐怕我想不出任何办法来更改补丁以适应他们的要求……他们似乎决心禁止使用非重叠管道。我已经使用该补丁一段时间了，并且没有遇到任何问题。另外，我想不出`pipe_nooverlap`标志会破坏的任何情况（请参阅我在他们的邮件列表上的后续电子邮件），但我将其作为标志留下以防万一出现麻烦。

因此，如果要从 Cygwin 调用非 Cygwin Win32 或 .NET Framework 程序，则需要执行以下操作：

1.  将我的补丁应用到您使用的任何 Cygwin 版本的源代码中。不要期望这个补丁会出现在未来的 Cygwin 版本中。
2.  在环境变量中设置`pipe_byte`和`pipe_nooverlap`标志。`CYGWIN`

这工作......现在！我发布这个以防它帮助其他仍然想在某些事情上使用 Cygwin 的人。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-30T14:34:36.220

我找到的最好的选择是[Gow (Gnu On Windows)](https://github.com/bmatzelle/gow/wiki)。

它是 Cygwin 的轻量级替代品，重量轻约 10 倍。据我所知，与 Gow 一起安装的 130 个工具是常规的 Win32 应用程序。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-02-27T02:53:08.563

## 2016年答案

* * *

我今年构建了[Cash ，这是一个在](https://github.com/dthree/cash)[Node.js](https://nodejs.org/en/download/)上运行的 Linux 命令的跨平台实现。

这既支持全局安装您的每个命令`path`，也支持完全支持类 bash 语法、命令管道、自动完成和历史记录的交互式 shell。

这还会在 shell 中运行 win32 应用程序。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-23T04:01:46.020

[MSYS](http://www.mingw.org/wiki/MSYS)

“受支持”的软件包可能较少，因为您必须手动安装，但不会有：

*   路径问题（`cygpath`不是解决方案，因为你不能总是把它塞进去）
*   被 cygwin 软件包混淆的程序将其操作系统报告为“cygwin”
*   .dll/.so/.lib/.a 混淆

并且与 Windows 应用程序有更好的互操作性。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-15T01:06:33.963

[Cygnal](http://www.kylheku.com/cygnal/)是我创建修改后的 Cygwin 的项目，它作为旨在作为本地 Windows 程序运行的应用程序的运行时支持库，遵循 Windows 用户熟悉的外部约定。

这个想法是您可以使用完整的 Cygwin 环境进行开发，使用其默认工具链：使 Cygwin 可执行文件的编译器相同。然后，您可以通过将您的程序与`cygwin1.dll`Cygnal 项目的修改捆绑在一起，将其部署为 Cygnal 程序。

这对于具有大量 POSIX 依赖项并且需要功能丰富、质量良好的 POSIX 实现的程序特别有用。

> *项目负责人似乎并不认为这是一个真正的问题，因为他们显然并不真正支持在 Cygwin 内运行非 Cygwin 程序（惊喜！）。*

相比之下，在 Cygnal 项目中，这种事情被认为是一个将合并合理解决方案的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-22T16:19:57.270

我曾经主要将 cygwin 用于 X11 服务器功能。在远程服务器上运行任何工具并将显示导出到本地 cygwin 很有用。我发现我可以使用轻得多的 Xming 服务器来实现相同的目标。

# javascript - 通过 javascript 函数预定义的 google 搜索

> ID：10385426
> 
> 赞同：0
> 
> 时间：2012-04-30T14:31:52.247
> 
> 标签：javascript

我需要通过页面中的按钮启动的 javascript 函数执行预定义的 Google 搜索。

所以我之前尝试过没有成功：

```
<html>
<head>
<script language="JavaScript">     
  function googleSearch(quest){
   var googlefind = "http://www.google.com/search?hl=en&q=" + quest + " buy Blu-Ray DVD";
   window.open(googlefind);
  }
</script>
</head>

<body>
 <INPUT type="button" value="Buy this Anime Now!" onclick="googleSearch("Fullmetal Alchemist Brotherhood");">
</body>
</html> 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:34:13.957

添加`escape()`到`googlefind`您的函数中，并将关键字更改为在您的`onclick`.

```
<html>
<head>
<script language="JavaScript">
 function googleSearch(quest){
  var googlefind = quest + " buy Blu-Ray DVD";
  window.open("http://www.google.com/search?hl=en&q=" + escape(googlefind));
 }
</script>
</head>

<body>
 <INPUT type="button" value="Buy this Anime Now!" onclick="googleSearch('Fullmetal Alchemist Brotherhood');">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:40:22.447

另外，请记住，某些浏览器不会像`script`当前定义的那样喜欢标签。我会改为`type='text/javascript`而不是`language='JavaScript'`像下面这样：

```
<html>
<head>
<script type="text/javascript">
 function googleSearch(quest){
  var googlefind = quest + " buy Blu-Ray DVD";
  window.open("http://www.google.com/search?hl=en&q=" + googlefind);
 }
</script>
</head>

<body>
 <INPUT type="button" value="Buy this Anime Now!" onclick="googleSearch('Fullmetal Alchemist Brotherhood');" />
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:43:36.083

将传递参数中的双引号替换为单引号 onclick="googleSearch('Fullmetal Alchemist Brotherhood')

# ember.js - 如何使用 ember 数据获取 parentRecord id

> ID：10385430
> 
> 赞同：0
> 
> 时间：2012-04-30T14:32:09.433
> 
> 标签：ember.js, ember-data

根据 ember-data 中实现的测试，当我们从 hasMany 关系中请求子记录时，store 对子资源 url 进行 get GET 并发送所需子资源的 id。

```
test("finding many people by a list of IDs", function() {
  store.load(Group, { id: 1, people: [ 1, 2, 3 ] });

  var group = store.find(Group, 1);

  equal(ajaxUrl, undefined, "no Ajax calls have been made yet");

  var people = get(group, 'people');

  equal(get(people, 'length'), 3, "there are three people in the association already");

  people.forEach(function(person) {
    equal(get(person, 'isLoaded'), false, "the person is being loaded");
  });

  expectUrl("/people");
  expectType("GET");
  expectData({ ids: [ 1, 2, 3 ] }); 
```

我怎样才能发送父记录（组）的 id ？我的服务器需要这个 id 来检索嵌入的记录。它需要类似的东西：

```
expectData({groud_id: the_group_id, ids: [1,2,3] }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:00:22.457

您无法传递其他参数，并且从今天开始，资源预计将位于“根目录”。这意味着，在你的`config/routes.rb`：

```
resources :organization
resources :groups
resources :people 
```

乍一看，您可能会感到害怕，“天啊，我正在失去数据隔离......”，但实际上这种隔离最终通常是由关系连接提供的，从拥有嵌套内容的祖先开始。无论如何，这些连接可以由 ORM 以（合理的）价格执行，以声明祖先中的任何叶子资源。

假设您使用的是 RoR，您可以在模型中添加关系快捷方式以确保像这样的嵌套资源隔离*（请注意* *哪些是重要的东西）*：**`has_many ... through ...`**

 *```
class Organization < ActiveRecord::Base
  has_many :groups
  has_many :people, through: groups
end

class Group < ActiveRecord::Base
  has_many :people
end 
```

然后在您的控制器中，直接使用快捷方式，在您的根持有人模型中展平*（此处* `Organization`*）*：

```
class GroupsController < ApplicationController
  def index
    render json: current_user.organization.groups.all, status: :ok
  end
end

class PeopleController < ApplicationController
  def index
    render json: current_user.organization.people.all, status: :ok
  end
end 
```

*（这里，为了更清楚起见，返回整个现有实例集。应根据请求的 id 过滤结果...）**

# c# - 实体框架 4.1 代码优先 EDMX 问题

> ID：10385432
> 
> 赞同：2
> 
> 时间：2012-04-30T14:32:19.350
> 
> 标签：c#, .net, entity-framework, ef-code-first, edmx

我使用 EF CF 处理大型项目的方式是执行以下操作：

*   创建数据模型 (EDMX)
*   通过清除自定义工具属性禁用该模型的模型优先代码生成功能
*   使用 Entity Framework POCO Generator 扩展将相关模板（t4）文件添加到项目中
*   自定义模板文件以遵循我们遵循的某些编码约定

这一切在概念上看起来都不错，但是当我们运行项目时，EF 似乎认为我们正在使用模型优先方法。情况并非如此，因为我们不希望 EDMX 模型映射到任何数据库。如果模型发生变化，我们希望在运行时创建数据库。

那么我们如何才能消除 EDMX 的数据库映射期望呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:46:08.780

通过不使用 EDMX。EDMX 是映射。使用 EDMX 后，您将使用模型优先或数据库优先。代码优先意味着没有 EDMX 和代码生成器。方法名称中的**代码**意味着您应该编写该代码。首先获取在代码中生成的实体和映射的唯一方法是当您拥有现有数据库并使用 EF Power Tools 但如果您没有数据库则没有任何此类支持。

# jquery - 手风琴调整背景/容器 div

> ID：10385436
> 
> 赞同：0
> 
> 时间：2012-04-30T14:32:41.637
> 
> 标签：jquery

我正在尝试调整容器 div 的高度增长或手风琴折叠时的高度。折叠工作但在收缩时不调整导致手风琴覆盖 div。有没有更简单的方法来自动调整容器高度？

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".acc_body").hide();

        $(".acc_head").click(function(){
            $(this).toggleClass("acc_head2").next(".acc_body").slideToggle(150);
        });

        $("div.mainBkgd").click(function(){
            var $this = $(this);
            if ($this.height() == 930) {
                // set height to auto in order to check how tall it is in current window size    
                $this.css("height","auto");
                var height = $this.height();

                // done checking height, set back to 30
                $this.css("height","930px");

                $this.animate({height: height + "px"},1500, function() {
                    // animation done, set height to auto to allow resizing with window resize
                    $this.css("height","auto");        
                }); 
            }
            else {
                $this.animate({height: "930px"},1500);
            }
        });
    });
</script> 
```

# .net - CLR 存储过程线程异常

> ID：10385438
> 
> 赞同：0
> 
> 时间：2012-04-30T14:32:51.153
> 
> 标签：.net, sql-server, clr, clrstoredprocedure, threadabortexception

我有以下代码可以在 exe 中工作，甚至可以在 CLR 中的小 xml 文件上工作，但是一旦它们大于 10mb，我就会收到线程中止错误。我需要在 SQL Server 中配置什么吗？

```
Try

    sStream = HttpRequest.GetRequestStream()
    sStream.Write(baByteArray, 0, baByteArray.Length)
    sStream.Close()
    wrWebResponse = HttpRequest.GetResponse()
    sStream = wrWebResponse.GetResponseStream()
    Dim readStream As New StreamReader(sStream, System.Text.Encoding.UTF8)
    strXmlResponse = readStream.ReadToEnd() ' Errors out here
    strXmlResponseDoc.LoadXml(strXmlResponse)
    wrWebResponse.Close()
    sStream.Close()
    readStream.Close()

Catch ex As Exception

    SqlContext.Pipe.Send(ex.ToString())
    clsE.LogError(ex.ToString())

End Try 
```

错误信息：

```
System.Threading.ThreadAbortException: Thread was being aborted.
 at System.Threading.Thread.AbortInternal()
 at System.Threading.Thread.Abort(Object stateInfo)
 at   System.Data.SqlServer.Internal.ClrLevelContext.CheckSqlAccessReturnCode(SqlAccessApiReturnCode eRc)
 at System.Data.SqlServer.Internal.ClrLevelContext.SendMessageToPipe(String message, SmiEventSink eventSink)
 at Microsoft.SqlServer.Server.SqlPipe.Send(String message)
 at MacCLR.MacClass.RequestXml(String strXmlToSend)
 at MacCLR.StoredProcedures.ProcessShippingXML_1(String iOrderNumb, String iXmlFilePath, String iXmlFileName, SqlInt32& iResult, SqlString& iResult_String) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:45:13.003

您创建的每个实现`IDisposable`接口的对象都需要在一个`Using`块中。这确保了对象被及时清理，无论是否有异常。这包括两个流，WebResponse 和 StreamReader。

这对于在 SQL Server 进程内运行的代码尤其重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:22:28.860

在为每个 IDisposable 接口放入 using 块后，我仍然遇到错误，但它让我意识到它是一个 32 位 SQL Server 安装，并且从我读到的内容来看，它处理 CLR 内存的方式与 64 位不同。使用 ;-g384 启动参数至少可以消除错误，直到我可以实施更强大的解决方案。谢谢您的帮助。

# android - 在Android中显示来自服务器的字节数组中的图像

> ID：10385442
> 
> 赞同：1
> 
> 时间：2012-04-30T14:33:02.053
> 
> 标签：android, android-imageview, out-of-memory, bitmapfactory

我的 Android 应用程序连接到服务以从我们的服务器请求文件。在请求时，文件类型未知，但服务器会回复一个包含文件扩展名和文件数据字节数组的 Hashmap。

然后，我的移动应用程序会获取这些数据，如果它是 jpg、png、txt 或 html 文件，它将在屏幕上显示该文件。如果它是不同的文件类型，则会创建一个文件并提示系统尝试在外部应用程序中打开该文件。

文本、html 和外部文件都可以正常工作。对于我加载的第一个图像，图像工作正常，但如果我再次调用服务器以加载列表中的下一个图像，我经常会收到此错误：

```
 E/AndroidRuntime(390): java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我正在使用相同的服务器调用，并将新信息存储在旧信息上。这是我实际加载图像数据的代码：

```
 imageView.setImageBitmap(BitmapFactory.decodeByteArray(bytes, 0, bytes.length)); 
```

有没有办法处理内存问题，所以我的应用程序不会崩溃？我已经尝试从服务器端缩小图像以使它们更小更易于管理（但这似乎是一个创可贴而不是适当的修复。）目前我只是使用原始字节和 BitmapFactory 来加载 imageView，但如果有另一种方式，我总是可以用实际的 png 或 jpg 创建一个临时文件，如果这有任何帮助的话。

有人可以就处理此问题的最佳方法提供一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:50:37.770

图像使用了您的应用程序拥有的大量几兆 RAM。应用程序需要在内存中保存的 1Megapixel = 4Megabyte 原始图像数据（至少 RGBA_8888 模式）。多个大图像会在任何设备上崩溃。

*   将图像下载到文件系统，从那里使用它们，如果它们比您需要的更大/您有内存，则以[> 1 的样本大小](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)对其进行解码。
*   [`recyle()`](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)如果您不需要它们，请立即图像。他们的本机缓冲区不能很好地与 GC 配合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:35:12.887

首先确保以适合屏幕的方式解码和缩放位图。在设置新位图之前，还要从 imageView 中回收位图。您要么需要保留对解码位图的引用，要么像这样访问旧位图。

```
 Drawable d = imageView.getDrawable();
    if (d!=null && d instanceof BitmapDrawable){
        BitmapDrawable bd = (BitmapDrawable)d;
        bd.getBitmap().recycle();
    } 
```

# c# - 通用接口继承（设计问题）

> ID：10385451
> 
> 赞同：3
> 
> 时间：2012-04-30T14:33:40.900
> 
> 标签：c#, inheritance, interface, new-operator

我有两个接口；`ISet`和`ISet<T>`

两者都实现了 Add、Remove 和 Clear，但参数类型不同；对象和 T。

现在我有两个选择。要么让`ISet<T>`继承自`ISet`，要么让它们彼此隔离。

`ISet<T>`继承 from的一大好处`ISet`当然是我总是可以`ISet<T>`在任何需要的地方使用`ISet`. 但是这样做我还必须为具有 T 参数的成员添加“新”修饰符。我不太喜欢“新”修饰符，但也许在这种情况下这是更好的选择？

感觉很奇怪有 a`ISet<T>`也不是 a `ISet`。这是合乎逻辑的假设。我真的不能说为什么我不喜欢“新”修饰符。就像使用“goto”关键字一样。我只是尽量不使用它。

你觉得我应该去这里做什么？继承与否？

* * *

在 .NET 中，我们拥有`ICollection<T>`并且`ICollection`不继承。也不做`IList<T>`和`IList`。但`IEnumerable<T>`继承自`IEnumerable`.

* * *

我知道已经存在的 ISet 接口（这只是一个例子）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:44:22.533

我在其他情况下也遇到过这个问题。我通常通过`ISet<T>`拥有自己的方法版本来解决它，并`ISet`拥有自己的异常对象。正如你所提到的。除此之外，我还创建了一个名为的抽象类`BaseSet<T>`，它实现了两者`ISet<T>`，`ISet`就像这样

```
public abstract class BaseSet<T> : ISet<T>, ISet {
  public abstract void Add<T>(T item);

  void ISet.Add(object item) {
     this.Add((T)item);
  } 
} 
```

然后只需要继承`BaseSet<T>`并实现`ISet<T>`最常见场景的接口，但如果便利类不符合他们的需要，他们仍然可以`ISet<T>`完全`ISet`实现`BaseSet<T>`。它还消除了使用`new`关键字的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:39:41.293

遵循一般的 .NET 范式可能是最好的，但您总是可以反过来看吗？

```
interface ISet : ISet<object>
{ }

interface ISet<T>
{
    void Add<T>(T item);
    void Clear();
    void Remove<T>(T item);
} 
```

如果它是您正在实施的集合，您可以使用 .NET 中的[替代集合吗？](http://msdn.microsoft.com/en-us/library/dd412081.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:40:13.050

如果您想将它与任何类型一起使用，为什么不直接使用 ISet 并将 Object 作为 T 提供呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T15:04:42.940

从非泛型形式继承真正能为您带来的唯一好处是能够在 a 上执行某些操作，`ISet<T>`而不必在编译时知道它`T`是什么。无法以类型安全的方式将项目添加到这样的集合中，并且读取效率可能有些低（因为必须将值类型装箱），但类似的方法或属性`Count`可能非常有用。

我的建议是您定义多个类似这样的接口（请注意，我正在添加一些您没有的成员，因为您的集合目前是只写的，因此不是很有用）

```
接口 ICountable { int Count {get;} }
接口 IClearable { int Count {get;} }
接口 IAppendable<in T> { void Add(T item); }
接口 ICountableEnumerable<out T> : IConvertableToEnumerable, ICountable
  {IEnumerable<T> CopyAsEnumerable();}
接口 IFetchable<out T> { T FetchAndRemove(ref bool wasNonEmpty); }
接口 ISet<T> ICountable, IClearable, IAppendable<T>, IFetchable<T>,
          IConvertableToEnumerable<T>;

```

这种界面分离使得在有意义的范围内使用协变和逆变成为可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T14:45:09.500

我认为，如果您的问题域需要通用，那么从非通用派生并不一定会给您带来任何好处。在您的类型安全版本中允许对象是否有潜在的副作用？如果是这样，在我看来，这至少是泛型旨在克服的问题的一部分......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T14:46:28.680

为什么你有一个非泛型`ISet`？.NET 支持泛型，几乎没有理由不使用它们。我相信所有 .NET 语言都完全支持泛型。

是的，.NET 库同时具有`IList`和`IList<T>`. 但是，我相信其原因是历史性的，在 .NET 有泛型之前。如果从一开始就实施了通用支持，我认为`IList`不会存在，只会存在`IList<T>`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T13:44:56.517

原因很简单，为什么`IEnumerable<T>`继承自`IEnumerable`. 它的名字是[foreach 语句](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)，它只适用于集合类型。任何集合类型都应该实现非泛型接口`IEnumerable`（甚至数组也实现它）。这是 foreach 场景背后发生的事情：

```
E enumerator = (collection).GetEnumerator(); // non-generic interface
try {
   while (enumerator.MoveNext()) { // enumerator also non-generic
      ElementType element = (ElementType)enumerator.Current;
      statement;
   }
}
finally {
   IDisposable disposable = enumerator as System.IDisposable;
   if (disposable != null) disposable.Dispose();
} 
```

所以我们有从非泛型继承的泛型接口，以允许在 foreach 语句中使用泛型集合。其他选择是更改编译器:)

没有依赖于`IList`接口的核心 .net 功能。所以，我们有两个独立的接口——泛型和非泛型。

在您的情况下，我看不到创建非通用接口的任何理由`ISet`。如果您想拥有一个接受`ISet<T>`具有不同类型参数的泛型的方法，那么只需创建接受泛型的泛型方法`ISet<T>`：

```
public void Foo<T>(ISet<T> set)
{
    set.Bar();
} 
```

# java - spring-context.xml 的位置

> ID：10385452
> 
> 赞同：21
> 
> 时间：2012-04-30T14:33:41.593
> 
> 标签：java, spring, junit

当我在 tomcat 上运行我的应用程序时，spring-context.xml 文件位于

> /WEB-inf/spring-context.xml

还行吧。但是运行 junit 测试我必须向它提供我的 spring-test-context.xml 的位置，如下所示：

```
@ContextConfiguration(locations={"classpath:/spring-test-context.xml"}) 
```

唯一可行的方法是文件位于

> /src/spring-context.xml

如何让我的应用程序在同一位置找到我的 spring-context 文件？这样它就可以与junit testes一起使用并部署在tomcat上？

我试过这个，它给了我很多关于找不到任何bean的错误，但它并没有说它找不到文件..

```
classpath:/WEB-INF/spring-test-context.xml 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-09T18:58:13.673

正如 duffymo 所暗示的，Spring TestContext Framework (TCF) 假定字符串位置默认位于类路径中。有关详细信息，请参阅[ContextConfiguration](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/test/context/ContextConfiguration.html)的 JavaDoc 。

但是请注意，您也可以使用 Spring 的资源抽象（即，通过使用“file:”前缀）在文件系统中指定资源的绝对路径或相对路径。[您可以在 Spring 的modifyLocations()](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/test/context/support/AbstractContextLoader.html#modifyLocations%28java.lang.Class,%20java.lang.String...%29)方法的 JavaDoc 中找到详细信息`AbstractContextLoader`。

例如，如果您的 XML 配置文件位于`"src/main/webapp/WEB-INF/spring-config.xml"`项目文件夹中，您可以将位置指定为相对文件系统路径，如下所示：

```
@ContextConfiguration("file:src/main/webapp/WEB-INF/spring-config.xml") 
```

作为替代方案，您可以将 Spring 配置文件存储在类路径中（例如，`src/main/resources`），然后通过 Spring MVC 配置中的类路径引用它们——例如：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:/spring-config.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

使用这种方法，您的测试配置将看起来像这样（注意表示资源位于类路径的根目录中的前导斜杠）：

```
@ContextConfiguration("/spring-config.xml") 
```

您可能还会发现参考手册中的[带有 XML 资源的上下文配置部分很有用。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#testcontext-ctx-management-xml)

问候，

山姆

*（Spring TestContext 框架的作者）*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-30T14:39:18.950

问题是 /WEB-INF 不在 Web 应用程序的 CLASSPATH 中。但是，/WEB-INF/classes 是。

您的测试问题是您没有在应用服务器中运行，因此默认情况下 WEB-INF/classes 不是 CLASSPATH 的一部分。我建议设置您的测试，以便 WEB-INF/classes 位于测试 CLASSPATH 中，或者使用相对或绝对文件路径来查找它们。

# android - Android中的跨版本（启动api 7（eclair））复制粘贴？

> ID：10385456
> 
> 赞同：1
> 
> 时间：2012-04-30T14:34:01.840
> 
> 标签：android, copy-paste

我想在 TextView 中启用复制粘贴。

我在 Android 文档中找到了这些非常好的解释：http: [//developer.android.com/guide/topics/clipboard/copy-paste.html](http://developer.android.com/guide/topics/clipboard/copy-paste.html)

但它仅从版本 11 开始有效 - 蜂窝！

我需要一些目前也适用于大多数用户的东西，这意味着它也必须适用于姜饼、froyo 和 eclair。

我用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:37:36.250

使用`ClipboardManager`在包中找到的`android.text`。他们将其移至不同的包，因为他们开始支持剪切文本以外的内容，但为了向后兼容，您仍然可以在旧名称下使用它。

你仍然会得到类似的东西：

```
 ClipboardManager cm=(ClipboardManager)getSystemService(CLIPBOARD_SERVICE);

    cm.setText("something"); 
```

这是一个演示这个[的示例项目。](https://github.com/commonsguy/cw-advandroid/blob/master/SystemServices/ClipIP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:48:48.037

这些是在 Android 中将纯文本**复制**到剪贴板并从剪贴板**粘贴纯文本的完全****跨平台**且**无异常的**方法：

 ****```
@SuppressLint("NewApi") @SuppressWarnings("deprecation")
public void copy(String plainText)
{
    if (android.os.Build.VERSION.SDK_INT < 11)
    {
        android.text.ClipboardManager clipboard = (android.text.ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
        if (clipboard != null)
        {
            clipboard.setText(plainText);
        }
    }
    else
    {
        android.content.ClipboardManager clipboard = (android.content.ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
        if (clipboard != null)
        {
            android.content.ClipData clip = android.content.ClipData.newPlainText("text", plainText);
            clipboard.setPrimaryClip(clip);
        }
    }
}

@SuppressLint("NewApi") @SuppressWarnings("deprecation")
public String paste()
{
    if (android.os.Build.VERSION.SDK_INT < 11)
    {
        android.text.ClipboardManager clipboard = (android.text.ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
        if (clipboard != null)
        {
            return (String) clipboard.getText();
        }
    }
    else
    {
        android.content.ClipboardManager clipboard = (android.content.ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
        if (clipboard != null && clipboard.getPrimaryClip() != null && clipboard.getPrimaryClip().getItemCount() > 0)
        {
            return (String) clipboard.getPrimaryClip().getItemAt(0).getText();
        }
    }
    return null;
} 
```****

# windows-phone-7 - 数据绑定列表框的问题

> ID：10385460
> 
> 赞同：0
> 
> 时间：2012-04-30T14:34:18.953
> 
> 标签：windows-phone-7, xaml, data-binding

突然之间，我以前没有的列表框绑定出现问题。

我有一个 ViewModel，其中有两个 observablecollection，其中包含一些数据。两个列表都正确填充。

在 MainPage() 构造函数中

```
DataContext = App.ViewModel;
InitializeComponent(); 
```

ViewModel 中的列表：

```
public ObservableCollection<Saloon> Saloons { get { return ... } set { ... } }
public ObservableCollection<TTSaloon> TTList { get { return ... } set { ... } } 
```

我将第一个列表绑定到地图控件，并且能够将图钉绑定到列表中的“位置”属性。

```
<my:Map DataContext="{Binding Saloons}"....> 
<my:Pushpin Location="{Binding Location}"/>...</my:Map> 
```

以上工作正常。但我也有一个列表框，应该像这样绑定到其他集合（TTList）：

```
<ListBox ItemsSource="{Binding TTList}" DataContext="{Binding}" Name="listBox1">
                  <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="{Binding Path=CustomerName}" Foreground="White" />
                             </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

但这根本不起作用。我尝试了很多不同的东西：

*   在代码隐藏中设置 ItemSource

*   从 ListBox 中删除 DataContext

*   将绑定路径更改为 Listname.Property

*   将元素上的 DataContexts 设置为代码隐藏中的特定列表。

*   在 InitializeComponent() 之后设置 DataContext

我没有想法，我在这里缺少什么，调试器也没有警告我。字段“CustomerName”确实存在并打印到控制台。

编辑：它是一个枢轴应用程序，如果可能产生影响，列表框位于第二个枢轴项中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:13:06.143

当 ObservableCollection 被“设置”一个值时，你是否提高了 OnPropertyChanged？

（ObservableCollection 仅在执行“添加”、“删除”或“清除”时自行引发更改）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:45:07.387

Yout 前景设置为白色。也许您只是因为白色背景上的白色字母而看不到这些项目？

# php - 使用 Doctrine 将文件另存为 BLOB

> ID：10385472
> 
> 赞同：0
> 
> 时间：2012-04-30T14:35:05.003
> 
> 标签：php, oracle, symfony, doctrine-orm

我将 Symfony2 与 Doctrine 2.2.2 和 Oracle 数据库一起使用。我想在 Oracle DB 中将文件另存为 BLOB。我为 Doctrine 编写了一个服装类型以具有 BLOB 类型。它看起来像这样：

```
class Blob extends Type
{
const BLOB = 'blob';

public function convertToPHPValue($value, AbstractPlatform $platform)
{
    return (is_resource($value)) ? stream_get_contents($value) : $value;
}

public function getSqlDeclaration(array $fieldDeclaration, AbstractPlatform $platform)
{
    return 'BLOB';
}

public function getBindingType() {
    return \PDO::PARAM_LOB;
}

public function getName()
{
    return self::BLOB;
}
} 
```

持有该文件的实体如下：

```
<?php

class Document
{
/**
 * @var integer $id
 */
private $id;

/**
 * @var file $file
 */
private $file;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set file
 *
 * @param blob $file
 */
public function setFile($file)
{
    $this->file = $file;
}

/**
 * Get file
 *
 * @return blob 
 */
public function getFile()
{
    return $this->file;
}
} 
```

当我想用我的控制器原则保存文件时，只保存上传文件时将创建的临时文件的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:35:02.307

似乎 $file 变量不是资源。

你可以试试这个：

```
public function convertToPHPValue($value, AbstractPlatform $platform)
{
    return is_file($value) ? file_get_contents($value) : $value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:43:11.383

似乎是学说 2.2 中的 blob 类型，此处 Doctrine\DBAL\Types\BlobType

# java - 解释浏览器端的 Java 对象和服务器端的 JavaScript 对象

> ID：10385473
> 
> 赞同：1
> 
> 时间：2012-04-30T14:35:05.973
> 
> 标签：java, javascript, ajax, marshalling, javascript-framework

我在问一个古老的问题。将 javascript 对象解组/编组为 Java 对象的最佳框架/技术是什么，反之亦然？

我知道传递 XML 是一个起点，但现在我们的应用程序已经用尽了这个选项。这些天我听到了很多关于 JSON 的消息，但不确定它在保持对象模型完整方面有多好。我不想再次陷入 XML 陷阱。

除了 JSON，我也在分析 DWR 框架。

是否有任何其他框架/技术可以解决这个问题？

# javascript - 奇怪的javascript正则表达式

> ID：10385474
> 
> 赞同：0
> 
> 时间：2012-04-30T14:35:18.310
> 
> 标签：javascript, regex, escaping

我找到了以下正则表达式

```
new RegExp("(^|\\s)hello(\\s|$)"); 
```

我参考[http://www.javascriptkit.com/jsref/escapesequence.shtml](http://www.javascriptkit.com/jsref/escapesequence.shtml)的正则表达式..但我看不到 \s 转义序列..我知道 \s 表示空白字符...但是前面的 \ 做什么..哪个字符被转义？[我在以下文档http://ejohn.org/blog/getelementsbyclassname-speed-comparison/](http://ejohn.org/blog/getelementsbyclassname-speed-comparison/)的 Treewalker 代码中发现了类似的正则表达式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:37:20.417

double`\\`是为了转义字符串内的反斜杠。换句话说，`\\`将被解释为`\`正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:38:11.977

在这种情况下，额外的 \ 是为了逃避 \s 中的 \。因为我们在一个字符串声明中，所以你必须加倍 \ 来转义它。一旦字符串被处理和保存，它就会被缩减为 (^|\s)hello(\s|$)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:39:53.773

紧跟在第一个字符之后的字符`\`被转义。通常`\s`转义`s`to 表示“空白”。在您的示例中，转义的字符是`\`.

你所拥有的是一个表达式，它构建了一个正则表达式（可能会传递到其他地方）`(^|\s)hello(\s|$)`——单词“hello”前面是空格或字符串的开头，后面是空格或字符串的结尾。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T14:46:13.707

本质上，reg ex 正在做的是寻找围绕单词 hello 的文本的开始和结束项，并同时将 '\s' 解释为字符串内容。

用外行的话来说，它正在寻找一个完全匹配的字符串：

|\你好\s|

正如其他人所说的那样，双 \ 是为了逃避单 \，以便 reg ex 引擎不是寻找空格，而是实际上寻找 '\s' 作为字符串。

^ 表示行首，$ 表示行尾，2 | 被解释为要查找的实际字符

最后，您的开始和结束标记用括号括起来 ()，这意味着它们将被提取并放置在匹配项中，对于使用 C# 的您来说，这意味着您可以使用以下方法获取它们：

```
myRegex.Matches.Group[1].Value
myRegex.Matches.Group[2].Value 
```

1 是开始分组，2 是结束。

# php - jQuery Table AddRow 插件将 ID 号添加到添加的行

> ID：10385484
> 
> 赞同：1
> 
> 时间：2012-04-30T14:36:18.970
> 
> 标签：php, jquery, ajax

我有一个表单，我正在使用 jQuery Table AddRow 插件动态地将行添加到表中，问题是当您选择一个菜单项时，我试图将菜单项放入左侧的文本框中. 它适用于第一行，但我不知道如何让它与通过插件添加的行一起工作。

你可以在这里看到我的代码：http: [//jsfiddle.net/VXNzd/](http://jsfiddle.net/VXNzd/)

这是jQuery代码：

```
// This moves the select box text to the input box
$('#mnu_names').change(function() {
    var mnuProduct = $("#mnu_names").find(':selected').text();
    var mnuCleanProduct = mnuProduct.split(' - ');
    $('#topping_name').attr('value', mnuCleanProduct[0]);
});
// This code is needed to add and delete rows with the plugin
$(".toppings_add").btnAddRow({ 
```

通过访问顶部的 jsfiddle 链接可能更容易了解我在说什么。当它加载使用选择框并选择某些东西时，它会将该信息放入没有价格信息的文本框中。添加新行并重试。不会工作，不知道如何使它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:02:32.810

正如tomhallam所说，问题是您的ID不是唯一的。`$.change()`也不适用于运行后添加的块。您应该改用`$.on('change',...)`.

我更新了您的代码并将其发布在[http://jsfiddle.net/PDPbn/5/](http://jsfiddle.net/PDPbn/5/)上。

修改后的 jquery 代码如下：

```
$(document).on('change','.mnu_names',function() {
    var mnuProduct = $(this).find(':selected').text();
    var mnuCleanProduct = mnuProduct.split(' - ');
    $(this).parentsUntil('tbody').find('.topping_name').attr('value', mnuCleanProduct[0]);
}); 
```

# maven-2 - Maven 中的可选过滤器文件

> ID：10385491
> 
> 赞同：4
> 
> 时间：2012-04-30T14:36:46.483
> 
> 标签：maven-2, build, build-process, jenkins

我在 pom.xml 中配置了以下过滤器：

```
<build>
...
    <filters>
        <filter>build.properties</filter>
        <filter>user.properties</filter>
    </filters>
...
</build> 
```

`build.properties`包含在为生产构建 webapp 时使用的过滤器。 `user.properties`是用户覆盖`build.properties`为本地部署和测试配置的过滤器的地方（例如`servername=localhost`，而不是`servername=productionserver.com`）。

`user.properties`不存储在源代码管理中，因为它对每个开发人员都是本地的。当我们使用 Jenkins 构建 webapp 时，它会因“加载属性文件时出错”而失败。

有没有办法将过滤器指定为可选，或者告诉 Maven 忽略丢失的过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:29:22.413

查看为服务器构建和开发人员工作站构建设置不同的 Maven 构建配置文件

*   [http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

# security - 如何让 LogonUser 不使用缓存的凭据？

> ID：10385496
> 
> 赞同：10
> 
> 时间：2012-04-30T14:37:05.567
> 
> 标签：security, winapi, active-directory, authentication

我正在使用[LogonUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)来验证用户的一组域凭据。

```
LogonUser(accountName, domain, password, 
      LOGON32_LOGON_NETWORK, LOGON32_PROVIDER_WINNT50, ref token); 
```

结果令人不安：

```
 LogonType    Current Password                Old password
 ===========  ==============================  ========================
 Network      Succeeds                        Succeeds
 Batch        Fails (0x00000569)              Fails (invalid password)
 Interactive  Succeeds                        Fails (invalid password) 
```

故障码：

*   `0x00000569`:*登录失败：用户在这台计算机上没有被授予请求的登录类型*
*   `0x0000052E`:*登录失败：未知的用户名或密码*

细节：

*   如果用户输入**有效**凭据，则函数返回`true`。 *（好的）*
*   如果用户输入**无效**凭据，则函数返回`false`。 *（好的）*

*   如果用户更改了密码，并输入了新的**有效**凭据，则函数返回`true`. *（好的）*

*   如果用户输入**无效**凭据，则函数返回`false`。 *（好的）*

*   如果用户输入他们的**旧**凭据，则函数返回**`true`**。 ***（坏的）***

> **注意：**如果用户移动到另一台机器（他们以前从未登录过的机器）并输入**旧**凭据，`LogonUser`则继续返回**true**。这意味着缓存不会发生在本地机器上——而是以某种方式“*在网络上*”发生。

*   **如果用户再次**更改密码并输入**新**的凭据，则函数返回`true`. *（好的）*
*   如果用户输入他们的**旧**凭据，则函数返回**`true`**。 *（坏的）*
*   如果用户输入他们**的旧*****凭据***，则函数返回`false`。 *（好的）*

如何，在调用`LogonUser`时我可以指示它指示域不使用*缓存的凭据*。

> **注意**：如果用户尝试使用其旧（或*旧*旧）密码登录 Windows，则会收到无效密码错误。

* * *

> **来自 MSDN：**
> 
> `LOGON32_LOGON_NETWORK`
> 此登录类型旨在供高性能服务器验证明文密码。LogonUser 函数**不缓存**此登录类型的凭据。
> 
> `LOGON32_LOGON_INTERACTIVE`
> 此登录类型适用于将以交互方式使用计算机的用户，例如通过[终端](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721627%28v=vs.85%29.aspx#_security_terminal_gly)服务器、远程 shell 或类似进程登录的用户。**这种登录类型需要为断开连接的操作缓存登录信息**的额外费用；因此，它**不适用于某些客户端/服务器应用程序**，例如邮件服务器。
> 
> `LOGON32_LOGON_BATCH` 此登录类型适用于批处理服务器，其中进程可以代表用户执行而无需他们的直接干预。此类型也适用于一次处理许多纯文本身份验证尝试的高性能服务器，例如邮件或 Web 服务器。

我**正在**验证纯文本密码，因此使用`LOGON32_LOGON_NETWORK`. **交互式**登录缓存凭据，此处不允许这样做。**Batch**虽然没有记录何时应该使用它，但它只是失败了。

* * *

**更新**：该域仅允许：

*   以前的密码（不再返回）
*   仅60分钟

对我来说很明显，它是 Active Directory 的一个“功能”，它提供 1 小时的宽限期。

除了我不想要宽限期，而且我不想更改域上的任何设置（因为我不知道域上的任何设置允许使用旧密码一小时的宽限期） .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T00:51:22.473

这是 NTLM 的一个功能。您可以更改默认的 60 分钟。通过在几分钟内添加一个`OldPasswordAllowedPeriod`DWORD 值来`HKLM\SYSTEM\CurrentControlSet\Control\Lsa`键入域控制器，或者您可以禁用“强制密码历史记录”策略。您也可以尝试使用其他登录提供程序，例如`LOGON32_PROVIDER_WINNT50`.

顺便说一句，如果您已经提供了 GUI，我认为使用`LOGON32_LOGON_INTERACTIVE`.

# javascript - UpdatePanel 部分回发丢失 CSS (IE8)

> ID：10385500
> 
> 赞同：0
> 
> 时间：2012-04-30T14:38:03.447
> 
> 标签：javascript, css, internet-explorer-8, updatepanel, postback

这是一个奇怪的问题，所以我会尽我所能解释它。我有一个 _dopostback 函数，用于更新更新面板中的内容。当回发发生时，jquery 用于隐藏一个 div 并显示另一个。

在 ie8 中，当触发 dopostback 时，我的页面在更新面板中丢失了大部分 CSS。我正在使用几个样式表，所以大多数不受影响。起初我认为这是一个 javascript 问题，但代码仍然有效，只是页面看起来没有样式。

有没有办法在使用 javascript 回发后重新添加样式表？

# c# - 调试时静态变量初始值设定项的运行时评估异常

> ID：10385504
> 
> 赞同：4
> 
> 时间：2012-04-30T14:38:32.337
> 
> 标签：c#, .net, debugging, runtime

当我从带有调试器 (F5) 的 Visual Studio 内部启动它时，我的应用程序运行良好。但是，当我在没有附加调试器（Ctrl-F5 或启动 .exe 文件）的情况下启动应用程序时，我确实总是得到一个`StackOverflowException`幸运地记录在 Windows 事件日志中的结果。

有问题的代码如下：

```
namespace Caliburn.Micro.Contrib
{
    public static class FrameworkExtensions
    {
        public static class ViewLocator
        {
            static readonly Func<string,object, IEnumerable<string>> _baseTransformName = Micro.ViewLocator.TransformName;

            public static void EnableContextFallback()
            {
                Caliburn.Micro.ViewLocator.TransformName = FallbackNameTransform;
            }    

            static IEnumerable<string> FallbackNameTransform(string typeName, object context)
            {
                var names = _baseTransformName(typeName, context);
                if (context != null)
                {
                    names = names.Union(_baseTransformName(typeName, null));
                }

                return names;
            }
        }
    }
} 
```

我`FrameworkExtensions.EnableContextFallack()`在 App 启动期间调用了该方法，并且在第一次调用`Caliburn.Micro.ViewLocator.TransformName`. 这意味着`_baseTransformName`变量在没有附加调试器时被调用*之后被初始化，而在调试器被附加时被调用* *之前*被初始化。`EnableContextFallback()` *`EnableContextFallback()`*

 *能够通过添加静态构造函数并在构造函数中分配变量来修复错误

```
namespace Caliburn.Micro.Contrib
{
    public static class FrameworkExtensions
    {
        public static class ViewLocator
        {
            static readonly Func<string, object, IEnumerable<string>> _baseTransformName;

            static ViewLocator()
            {
                 _baseTransformName = Micro.ViewLocator.TransformName;
            }

            public static void EnableContextFallback()
            {
                Caliburn.Micro.ViewLocator.TransformName = FallbackNameTransform;
            }    

            static IEnumerable<string> FallbackNameTransform(string typeName, object context)
            {
                var names = _baseTransformName(typeName, context);
                if (context != null)
                {
                    names = names.Union(_baseTransformName(typeName, null));
                }

                return names;
            }
        }
    }
} 
```

这确保变量`_baseTransformName`总是在第一次调用之前设置`EnableContextFallback()`。

所以问题是：为什么在附加调试器时静态变量有不同的初始化行为，有没有办法“禁用”不同的行为？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:45:25.873

> 所以问题是：为什么在附加调试器时静态变量有不同的初始化行为，有没有办法“禁用”不同的行为？

当没有静态构造函数时，很少能保证静态变量初始化器的行为。事实上，您甚至可以在不调用静态变量初始化器的情况下创建类的*实例！*当您使用调试器时，CLR 会以不同的方式执行各种操作（尤其是围绕 JITting）。

使用静态构造函数可能是为您提供更可预测的初始化行为的最佳方式。

有关更多信息，请参阅我[关于 .NET 4 中类型初始化更改的博文](https://msmvps.com/blogs/jon_skeet/archive/2010/01/26/type-initialization-changes-in-net-4-0.aspx)。*

# bioinformatics - Trim Illumina 读取 bam/sam 文件

> ID：10385509
> 
> 赞同：3
> 
> 时间：2012-04-30T14:38:47.843
> 
> 标签：bioinformatics, fastq

我找到了很多用于以 fastq 格式修剪读取的工具，但是是否有任何可用于修剪已经对齐的读取的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-06T03:32:10.180

我个人不鼓励在对齐读取后修剪读取，特别是如果您尝试修剪的序列是接头序列。

这些接头序列的存在将阻止您的读数与基因组正确对齐（根据我的经验，您应该得到的对齐百分比要低得多）。由于您的对齐已经不准确，因此在对齐后修剪序列（垃圾输入，垃圾输出）将毫无意义。

在对齐它们之前修剪 fastq 文件会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:31:34.363

Do you want the alignment to be informing the trimming protocol, or are you wanting to trim on things like quality values? One approach would be to simply convert back to FASTQ and then use any of the myriad of conventional trimming options available. You can do this with Picard:

[http://picard.sourceforge.net/command-line-overview.shtml#SamToFastq](http://picard.sourceforge.net/command-line-overview.shtml#SamToFastq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T14:19:18.347

一种可能性是使用 GATK 工具集，例如 ClipReads。如果要移除适配器，可以使用 ReadAdaptorTrimmer。无需转换为 fastq（文档：[http](http://www.broadinstitute.org/gatk/gatkdocs/) ://www.broadinstitute.org/gatk/gatkdocs/ ）。

当然，皮卡德是另一种可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-26T08:16:56.857

当您在执行大量比对工作后要将读取标准化为相同长度时，会遇到修剪 bam 文件中的读取的情况。修剪 fastq 读取后重新映射不是节能的。在站点读取中，从 bam 文件修剪将是一个首选的解决方案。

请尝试[bbmap](https://sourceforge.net/projects/bbmap/) /reformat.sh，它可以使用接受 bam 格式的输入文件修剪读取。

```
reformat.sh in=test.bam out=test_trim.bam  allowidenticalnames=t overwrite=true forcetrimright=74 sam=1.4
## the default output format of reformat is sam 1.4\. however, many tools only recognize 1.3 version. So the following step is to convert the 1.4 to version 1.3.
reformat.sh in=test_trim.bam out=test_trim_1.3.bam allowidenticalnames=t overwrite=true sam=1.3 
```

# javascript - 如何删除所有以前缀开头的类

> ID：10385510
> 
> 赞同：3
> 
> 时间：2012-04-30T14:38:54.867
> 
> 标签：javascript, jquery

> **可能重复：**
> [JQuery removeClass 通配符](https://stackoverflow.com/questions/2644299/jquery-removeclass-wildcard)
> [jQuery - 选择类开头的元素](https://stackoverflow.com/questions/6055355/jquery-select-an-element-that-the-class-starts-with)

我有一些属于区域的 div（一个 div 可能有类“zoneA”，另一个 div 可能有类“zoneB”等）。我希望能够选择多个此类 div，并为它们设置一个新类。

所以我想做类似的事情：

`$(".selected-divs").removeClass("zone*").addClass(".zone-new")`

如何以这种方式删除所有课程？

# html - 有没有办法使用 ASP.NET MVC 将 HTML URL 解析到子应用程序的根目录？

> ID：10385512
> 
> 赞同：1
> 
> 时间：2012-04-30T14:38:58.623
> 
> 标签：html, asp.net-mvc-3, url, iis, razor

将 ASP.NET MVC3 与 Razor 和 C# 一起使用。

假设我有一个应用程序设置为通过 IIS 作为普通网站运行，但现在我想将此应用程序作为另一个网站下的**子应用程序运行。**例如，子应用程序将存储在网站根目录下名为“SubApp”的文件夹中（例如 www.example.com/SubApp/）。

如果我在 SubApp 的 razor mark-up/code-behind 中引用诸如“~/Images/picture.gif”之类的 URL，它将解析为 SubApp 的根：`www.example.com/SubApp/Images/picture.gif`

但是，如果我通过常规 HTML（在 SubApp 中）引用“/Images/picture.gif”，它将解析为 SubApp 父网站的根：`www.example.com/Images/picture.gif`

是否有一种简单、可靠的方法可以将这些 HTML URL 解析到子应用程序的根目录，而无需重写它们以使用 Razor？在这些情况下处理 URL 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T01:01:57.173

如果您正在处理将由浏览器直接请求的纯 HTML 页面，您应该使用相对 URL。例如，如果您有：

```
/SubApp
    /Images
        foo.gif
    page.html 
```

你应该使用：

```
<img src="foo.gif" /> 
```

在 page.html 内。您可以使用“../”来上目录等。

不幸的是，如果您正在处理更复杂的服务器端路由场景，您将需要使用某种服务器端代码来处理它。

# sql - SSAS 一对多维度关系

> ID：10385513
> 
> 赞同：5
> 
> 时间：2012-04-30T14:39:12.400
> 
> 标签：sql, ssas, relationship, dimensions, primary-key-design

SSAS中的问题给大家。我试图在 OLAP SSAS 多维数据集环境中定义一对多关系。但是，我在定义主键时遇到了问题。示例表如下。前 3 个表之间的关系很容易定义（TradeDate、NYMEX Trades 和 NYMEX Contract）。但是，我的目标是在 NYMEX 合约和模型合约之间建立一对多的关系。换言之，来自 1 份 NYMEX 合约的数据将在模型合约数据集中多次使用。

**表：交易日期**

*   交易日 (PK)
*   年
*   月等...

**表：NYMEX 交易（无 PK）**

*   合同名称
*   交易日
*   价格

**表：纽约商品交易所合约**

*   合同名称 (PK)

**表：合同范本**

*   模型合同名称 (PK)
*   合同名称

我需要在 NYMEX 合同和模型合同之间创建一对多的关系......但是我的 PK 在模型合同中的错误列上。有任何想法吗？

为了帮助澄清 - 我正在尝试定义一个维度 - >维度关系。表“模型合同”是一个查找表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T19:17:15.423

您所拥有的是事实数据（交易）和维度数据（模型合同）之间多对多关系的示例。看看这个：[维度关系](http://msdn.microsoft.com/en-us/library/ms175669.aspx)。您的案例是一种罕见的案例，因为模型合同只能分配给一个合同名称，但它仍然属于多对多案例。这是使用维度建模中的桥接表来处理的，在 SSAS 中，他们称之为中间事实表。一旦你有这样的 DSV 设置： ![在此处输入图像描述](../Images/bbec9716b0437ba1d24342d7fbb4c78a.png)

然后，您将在项目中创建维度，然后为 ModelContract 创建一个度量值组，以便能够将其用作中间事实表。然后，您将为选择多对多关系的多维数据集设置维度使用：

![在此处输入图像描述](../Images/80acdbbf9e75e37c466df96778e56172.png) ![在此处输入图像描述](../Images/71379b7272ff0309623ab44fc434d6d7.png)

作为旁注，您应该始终为您的维度使用代理键。它们有几个优点，例如您的事实表中的存储空间、渐变维度、源系统解耦、...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:18:42.837

你需要在这里做二维。

首先，您不应将日期添加为整个维度的一部分。日期本身应该作为一个维度存在。

第二，如我所见，你应该加入NYMEX Contract 和Model Contract 并做一个维度。您可以使用命名查询将它们连接到 DSV 上或创建 SQL 视图，或者您可以在 DSV 上将两个表分开并在维度上连接它们。

第三，NYMEX Trades 是您的事实表。一旦您创建了先前的两个维度，您应该将它们添加到多维数据集并使用字段 ContractName 和 TradeDate 将它们与维度关系选项卡上的事实表连接起来

# php - 获取需要登录才能查看的 facebook 页面的数据

> ID：10385514
> 
> 赞同：0
> 
> 时间：2012-04-30T14:39:14.237
> 
> 标签：php, javascript, facebook, screen-scraping

我有一个 facebook 页面，其中包含我想每天复制到我的计算机的数据。

除非我手动连接到 facebook 帐户并转到该 URL，否则无法访问源代码。

如何使用 PHP 来完成它以连接到我的帐户？

（然后我可以保存源代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:29:01.897

这只能通过宏或 facebook API 来完成，我最终将宏与 autoHotKey 一起使用。

# c - 在linux内核中给task_struct添加一个复杂的列表

> ID：10385522
> 
> 赞同：0
> 
> 时间：2012-04-30T14:39:54.413
> 
> 标签：c, linux-kernel

如何在 sched.h 文件中的 struct task_struct 中添加一个字段，该字段由一个带有特殊非原始节点的链表组成？

说我有这个结构：

```
struct Node{
 int counter;
 char* buffer;
 int sum;
} 
```

等等，我想添加一个这样的节点列表？我不想重新实现列表

```
struct Node{
 int counter;
 char* buffer;
 int sum;
 Node* next;
} 
```

但我想将 struct list_head 与通用内核列表一起使用，而不是我的实现。但是将 struct list_head 添加到 task_struct 只是给了我另一个 task_struct 实例，而我想添加我的特殊列表和我的特定字段。

就 C++ 而言，我想将 List 添加到 struct_task 以便文件 scehd.h 看起来像

```
struct task_struct {
.
.
.
List<Node> myList;
.
.
} 
```

我该怎么做，然后如何在 INIT_TASK 宏中初始化我的节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:48:20.183

您说“将 struct list_head 添加到 task_struct 只是给了我另一个 task_struct 实例”。这不是真的，除非我误解了你。

将 a 添加`struct list_head`到`task_struct`just 中会为您提供 a ，仅`struct list_head`此`task_struct`而已。由您决定使用它`list_head`的目的。

要实现您的想法，您需要以下内容：

```
struct task_struct {
    ...
    struct list_head node_list;
};

struct your_node {
    struct list_head list;
    int counter;
    char* buffer;
    int sum;
}; 
```

创建时，`task_struct`您初始化`node_list`为一个空列表。当您创建一个实例时，`your_node`您也会这样做，然后将其添加到`node_list`with：

```
list_add_tail(&your_node->list, &your_task->node_list); 
```

有关真实示例，请参见`perf_event_list`中的`task_struct`，以及在 中对其进行迭代的代码`kernel/events/core.c`。

# javascript - 使用 javascript 序列化选择 (html)

> ID：10385524
> 
> 赞同：1
> 
> 时间：2012-04-30T14:39:56.580
> 
> 标签：javascript, webview

我如何序列化 webView（html 页面）中的文本选择（在 javascript 中）并在用户重新加载应用程序后恢复此选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:18:54.757

您可以使用我的[Rangy](http://code.google.com/p/rangy)库的[序列化程序模块。](http://code.google.com/p/rangy/wiki/SerializerModule)对于类似但更轻量级的解决方案，您可以使用Martin Honnen 的[此代码片段](http://home.arcor.de/martin.honnen/javascript/storingSelection1.html)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-30T14:49:31.403

在这个[小提琴中使用jquery Demo中的序列化函数](http://jsfiddle.net/tqGmP/)

# objective-c - 是否可以制作数组数组

> ID：10385525
> 
> 赞同：1
> 
> 时间：2012-04-30T14:39:58.873
> 
> 标签：objective-c, ios, nsarray

我需要创建一个数组，其中每个对象都是一个 NSArray：

```
 NSMutableArray *AberdeenStores=[NSMutableArray alloc];

AberdeenStores=[AberdeenStores initWithObjects:[[NSArray alloc]initWithObjects:@"Aberdeen Name Store 1",@"Aberdeen Adress Store 1",@"Aberdeen Telephone store 1","", nil],[NSArray arrayWithObjects:@"Aberdeen Name Store 2",@"Aberdeen Adress Store 2",@"Aberdeen Telephone store 2", nil],[[NSArray alloc ]initWithObjects:@"Aberdeen Name Store 3",@"Aberdeen Adress Store 3",@"Aberdeen Telephone store 3", nil], nil]; 
```

这似乎导致崩溃。请问有什么问题吗？提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:45:59.090

你只是那里有一个错字。将第一个子数组中的 "" 替换为 @""

```
NSMutableArray *AberdeenStores=[NSMutableArray alloc];

AberdeenStores=[AberdeenStores initWithObjects:[[NSArray alloc]initWithObjects:@"Aberdeen Name Store 1",@"Aberdeen Adress Store 1",@"Aberdeen Telephone store 1",@"", nil],[NSArray arrayWithObjects:@"Aberdeen Name Store 2",@"Aberdeen Adress Store 2",@"Aberdeen Telephone store 2", nil],[[NSArray alloc ]initWithObjects:@"Aberdeen Name Store 3",@"Aberdeen Adress Store 3",@"Aberdeen Telephone store 3", nil], nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:49:11.670

这是一个更具可扩展性的解决方案：

```
// Top Level Array
NSMutableArray *array = [[NSMutableArray alloc] init];
int size = 10;    

// Build sub level arrays
for(int i = 0; i < size; i++)
{
    NSMutableArray *subArray = [[NSMutableArray alloc] init];
    [array addObject:subArray];
}

// You can now use it like this:
[[array objectAtIndex:0] addObject:someObject];
NSObject *someObject = [[array objectAtIndex:0] objectAtIndex:0]; 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:43:53.180

您在这里使用了变量和对象，并且各种错误。这是做你想做的事情的最佳方式，并且会很好地布局并且更好的可维护性。

```
NSMutableArray *AberdeenStores = [[NSMutableArray alloc] init];
[AberdeenStores addObject:[NSArray arrayWithObjects:@"Aberdeen Name Store 1",@"Aberdeen Adress Store 1",@"Aberdeen Telephone store 1",@"", nil]];
[AberdeenStores addObject:[NSArray arrayWithObjects:@"Aberdeen Name Store 2",@"Aberdeen Adress Store 2",@"Aberdeen Telephone store 2",@"", nil]];
[AberdeenStores addObject:... keep adding objects as you please]; 
```

# c++ - 重新编译之前的 Visual Studio 2010 文件修改警告对话框

> ID：10385529
> 
> 赞同：3
> 
> 时间：2012-04-30T14:40:20.137
> 
> 标签：c++, visual-studio-2010, compilation, dialog

默认情况下，当我运行 c++ 应用程序时，VS 2010 最终会显示一个对话框，通知源文件是否已更改，然后再自动重新编译解决方案。

不幸的是，我使该对话框不再显示，不小心选中了“不再显示”复选框或类似的东西。

有谁知道我怎样才能恢复那个对话框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:52:19.703

`Tools/Options/Projects and Solutions/Build and Run`对话框中有几个控制这种行为的选项。我认为您正在寻找“在运行时，项目已过时”选项；选择“提示构建”。

# c# - 实体框架代码优先约定优于配置应该是相反的方式

> ID：10385533
> 
> 赞同：0
> 
> 时间：2012-04-30T14:40:48.797
> 
> 标签：c#, .net, entity-framework, convention-over-configur

为什么 MS 决定使用约定而不是配置。

我处理非常大的项目，并非所有项目都以数据为中心。事实上，即使是以数据为中心的项目，我的实体类也有很多需要与持久性无关的自定义功能。

使用当前的 MSM 方法，我最终不得不将属性应用于非持久性属性，而不是相反。这不应该是代码优先的重点吗？使用工作类层次结构并将其作为“附加”转变为持久性兼容？

我了解某些约定非常有用，例如身份或主键属性和外键的命名。但老实说，如果他们还没有类结构，告诉我有多少开发人员会使用代码优先而不是模型优先？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:09:32.027

您不需要在类中使用任何依赖于持久性的属性。EF 代码首先使用模型配置来定义映射 - 该配置要么直接在`OnModelCreating`派生 DbContext 的方法中定义，要么在每个实体和复杂类型的单独配置类中定义。属性只是转换为这些配置的快捷方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:48:44.667

如果您正在创建适当的抽象，那么这应该不是 IMO 的问题。听起来您将业务实体和逻辑与数据实体混合在一起。如果您遵循存储库模式并抽象持久性实体，那么您的大多数 POCO 应该遵循约定。我建议重新评估您的架构，因为它听起来与持久层非常耦合。如果您创建一个更松散耦合的架构，那么这些约定对您来说应该是有意义的。只是我的两分钱，虽然

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:25:52.920

我已经做了很多工作，首先将代码应用于预先存在的业务对象，以创建一个不了解持久性的架构。在这种情况下应用 EF 的方法不止一种——我同意用属性修饰业务对象并不理想。我们过去所做的是

1.  定义一个存储在由 DAL 实现的 BLL 程序集中的接口。这被上层用于 CRUD 操作
2.  在 DAL 中，使用[EntityTypeConfiguration(of T)映射业务对象](http://msdn.microsoft.com/en-us/library/gg696117%28v=vs.103%29.aspx)

它对我们来说效果很好，并且很好地将上层与 DAL 分离

# python - 如何在 Django 中描述 URL - 仍然需要一个答案

> ID：10385535
> 
> 赞同：4
> 
> 时间：2012-04-30T14:40:54.630
> 
> 标签：python, django, forms, url, get

我正在尝试进行简单的搜索并以分页的形式返回结果。每当我尝试转到第二页时，我的搜索词就会丢失，因此我的第二页没有结果。

我在 Djangoproject 教程中找到并遵循了[分页](https://docs.djangoproject.com/en/1.3/topics/pagination/)示例，但我还没有找到有关如何为搜索视图编写 URL 的示例。

我以前在我的表单中使用过方法，因为当我几乎没有数据要显示时（尽管现在，经过一些研究，我知道和`POST`之间的用法区别）。当我获得更多数据时，我不得不使用分页。因此，我已将表单方法更改为，但这是我的问题，我不知道如何描述我的，因此数据被发送到正确的视图。`GET``POST``GET``URL`

我试图让它工作，`POST`但没有成功。最后，我决定坚持使用`GET`示例，但偶然发现了这个让我退缩的 URL。

这是模板和 URL 文件中的代码：

**搜索.py：**

```
<form method="GET" id="searchForm" action="/search/?page=1">
    {% csrf_token %}
    <input type="text" id="billSearched" name="q_word">
    <input type="submit" value="{% trans "Look for" %}">
</form> 
```

**网址.py：**

```
urlpatterns = patterns('',
    url(r'^$','ps.views.bills',name="bills"),
    url(r'^i18n/', include('django.conf.urls.i18n')),
    url(r'^search/$','ps.views.search',name="search"),) 
```

我已经尝试了很多形式，`URL`但没有一个成功。

IE：

`url(r'^search/(?P<page>\d+)/$','ps.views.search',name="search")` `url(r'^search/','ps.views.search',name="search")` `url(r'^search/(?P<page>\d+)/(?P<searchTerm>\w*)','ps.views.search',name="search")`

任何解释/解决方案将不胜感激。先感谢您！

**更新：**

```
def search(request):
    searchTerm = ""
    page = 1
    import pdb
    pdb.set_trace()
    if 'q_word' in request:
        searchTerm = request.GET['q_word']
    if 'page' in request:
        page = request.GET['page']
    found_bills = Bill.objects.filter(name__icontains = searchTerm)
    paginator = Paginator(found_bills,25)
    try:
        current_page = paginator.page(page)
    except PageNotAnInteger:
        current_page = paginator.page(1)
    except (EmptyPage, InvalidPage):
        current_page = paginator.page(paginator.num_pages)
    bills_list = list(current_page.object_list)
    return render_to_response('results.html',{"bills_list":bills_list,"current_page":current_page,},context_instance=RequestContext(request)) 
```

**更新#2：**

如果我使用`pdb`，我可以看到没有数据从客户端传递到服务器。必须努力解决这个问题，但仍然非常感谢任何信息和/或提示，因为它们可以缩短我的搜索时间:)

`(Pdb) request.GET`

`<QueryDict: {u'page': [u'1']}>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:07:53.020

如果表单的方法是`GET`，则不能将查询字符串附加到操作，因为浏览器会覆盖它。只有当您的表单方法是`POST`.

将您的表单更改为：

```
<form method="GET" id="searchForm" action="/search/">
    <input type="text" id="billSearched" name="q_word">
    <input type="submit" value="{% trans "Look for" %}">
</form> 
```

在您看来：

```
from django.shortcuts import render

def search(request):
    if 'q_word' in request:
        searchTerm = request.GET['q_word']

    found_bills = Bill.objects.filter(name__icontains = searchTerm)
    page = request.GET.get('page')
    paginator = Paginator(found_bills,25)
    try:
        current_page = paginator.page(page)
    except PageNotAnInteger:
        current_page = paginator.page(1)
    except (EmptyPage, InvalidPage):
        current_page = paginator.page(paginator.num_pages)
    # bills_list = list(current_page.object_list) - not needed
    return render(request,
                  'results.html',{"results":current_page,"term": searchTerm}) 
```

在`results.html`：

```
{% for bill in results %}
     # .. display bill stuff
{% endfor %}

{% if results.has_previous %}
     <a href="{% url search %}?page={{ results.previous_page_number }}&q_word={{ term }}">previous</a>
{% endif %}

{% if results.has_next %}
      <a href="{% url search %}?page={{ result.next_page_number }}&q_word={{ term }}">next</a>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:54:32.717

“描述”您的网址是什么意思？你的 urls.py 看起来不错。您是否将调试器放入您的`ps.views.search()`函数以验证它是否正常运行？您是否查看了调试服务器日志以确保从浏览器请求正确的 url？

您可以拥有`r'^search/$'`并访问页面参数，`request.GET['page']`或者您可以将参数传递给您的视图函数`url(r'^search/(?P<page>\d+)/$`，这意味着搜索将需要 2 个参数请求然后页面。如果传入页面参数，您需要将表单 URL 更改为

```
<form method="GET" id="searchForm" action="/search/1"> 
```

而不是让页面成为 GET 参数

对于您列出的任何网址，我认为您的语法没有任何问题。

[https://docs.djangoproject.com/en/1.3/topics/pagination/#using-paginator-in-a-view](https://docs.djangoproject.com/en/1.3/topics/pagination/#using-paginator-in-a-view)

如果您正在使用，请`url(r'^search/(?P<page>\d+)/$'`确保搜索将名为 page 的变量作为第二个参数。学习如何使用调试器也很重要。

`import pdb; pdb.set_trace()`（甚至更好的 ipdb！），将其放在您的视图中以查看它是否命中，如果它没有命中，请检查开发服务器以查看实际请求的 url。

# sql-server - sql server 2008 - 从 XML 文件将数据导入现有表

> ID：10385536
> 
> 赞同：0
> 
> 时间：2012-04-30T14:40:58.107
> 
> 标签：sql-server, xml, sql-server-2008, import

在从 sql server 数据库中删除数据之前，将其导出并保存为 XML 文件，以备稍后恢复该数据时使用。我现在正试图将数据从 XML 文件中取回数据库，但找不到最佳方法。SQL Server 导入/导出向导似乎不支持 XML。我查看了 XML Bulk Load 组件，但这看起来不适用于我的问题。有人有什么建议吗？

XML 可能如下所示，我希望插入每一行：

```
<?xml version="1.0" encoding="UTF-8"?>
<products>
<product>
<prod_id>4235823</prod_id>
<productImageURL>image1.jpg</productImageURL>
<entryDate>Aug 30 2011 01:47:08:317PM</entryDate>
<category>859191</category>
<productDescription>product description 1</productDescription>
<productName>product name 1</productName>
<Price>9.99</Price>
</product>
<product>
<prod_id>8989595</prod_id>
<productImageURL>image2.jpg</productImageURL>
<entryDate>Aug 30 2011 01:47:08:317PM</entryDate>
<category>859191</category>
<productDescription>product description 2</productDescription>
<productName>product name 2</productName>
<Price>2.99</Price>
</product>
<product>
<prod_id>4575454</prod_id>
<productImageURL>image3.jpg</productImageURL>
<entryDate>Aug 30 2011 01:47:08:317PM</entryDate>
<category>859191</category>
<productDescription>product description 3</productDescription>
<productName>product name 3</productName>
<Price>5.99</Price>
</product>
</products> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:07:54.590

经过一番研究，我发现我需要以下内容：

```
DECLARE @xml xml
SET @xml = N'<Products>
<Product>
<id>4</id>
<name>Amy</name>
<age>25</age>
</Product>
<Product>
<id>7</id>
<name>Vicky</name>
<age>40</age>
</Product>
</Products>'

INSERT INTO dbo.leanne_test (id, name, age)

SELECT
 doc.col.value('id[1]', 'nvarchar(10)') id
,doc.col.value('name[1]', 'varchar(100)') name 
,doc.col.value('age[1]', 'nvarchar(10)') age 
FROM @xml.nodes('/Products/Product') doc(col) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:53:24.623

```
SELECT
    p.value('prod_id[1]','INT'),
    p.value('productImageURL[1]','VARCHAR(100)'),
    p.value('category[1]','VARCHAR(100)'),
    p.value('productDescription[1]','VARCHAR(1000)'),
    p.value('productName[1]','VARCHAR(100)'),
    p.value('Price[1]','money'),            
FROM @xmlfile.nodes('/Products/Product') as Product(p) 
```

# bash - 循环文件会导致无限循环

> ID：10385537
> 
> 赞同：0
> 
> 时间：2012-04-30T14:41:01.960
> 
> 标签：bash

```
for LIBNAME in $OGRE_BUILD_DIR/sdk/lib/$CONFIG-iphoneos/libOgre*
do
    BASELIBNAME=`basename $LIBNAME`
    echo lipo $BASELIBNAME
    lipo $SDK_DIR/lib/$CONFIG-iphoneos/$BASELIBNAME -arch i386 $SDK_DIR/lib/$CONFIG-iphonesimulator/$BASELIBNAME -create -output $SDK_DIR/lib/$CONFIG/$BASELIBNAME
done 
```

当我在脚本中运行它时，它会进入一个无限循环——搜索中的第一个文件会一遍又一遍地回显。如果我`echo`在调用之前，`lipo $SDK_DIR...`那么它会按预期循环遍历所有文件。

我不熟悉bash，怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:24:50.227

那么，这个脚本的名称是什么？你也叫它`lipo`吗？您的脚本很有可能递归地调用自己。当您抑制循环中的调用时它可以正常工作的事实`lipo`往往证实了这一假设。

# asp.net - 无法从 gridview 读取链接？

> ID：10385540
> 
> 赞同：0
> 
> 时间：2012-04-30T14:41:19.213
> 
> 标签：asp.net, gridview

我正在尝试使用来自所选 gridview 行的链接在我的网页上填充 hyperlink1 文本。我无法收回任何价值。有任何想法吗？

```
Private Sub GridView1_RowCommand(sender As Object, e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles GridView1.RowCommand

    If e.CommandName = "Select" Then
        Dim index As Integer = Convert.ToString(e.CommandArgument)
        Dim row As GridViewRow = GridView1.Rows(index)
        Me.NameTextBox.Text = Server.HtmlDecode(row.Cells(1).Text)
        Me.Product1DropDown.SelectedValue = Server.HtmlDecode(row.Cells(2).Text)
        Me.Product2DropDown.SelectedValue = Server.HtmlDecode(row.Cells(3).Text)
        Me.JobNumberTextBox.Text = Server.HtmlDecode(row.Cells(4).Text)
        Me.AdTextBox.Text = Server.HtmlDecode(row.Cells(5).Text)
        Me.MediaTypeDropDown.SelectedValue = Server.HtmlDecode(row.Cells(6).Text)
        Me.AuthorDropDown.SelectedValue = Server.HtmlDecode(row.Cells(7).Text)
        Me.PublicationDropDown.SelectedValue = Server.HtmlDecode(row.Cells(8).Text)
        Me.RunDatesTextBox.Text = Server.HtmlDecode(row.Cells(9).Text)
        Me.CostTextBox.Text = Server.HtmlDecode(row.Cells(10).Text)
        Me.CostCenterTextBox.Text = Server.HtmlDecode(row.Cells(11).Text)
        Me.CommentsTextBox.Text = Server.HtmlDecode(row.Cells(12).Text)
        Me.HyperLink1.Text = Server.HtmlDecode(row.Cells(13).Text)
        Me.HyperLink1.NavigateUrl = Server.HtmlDecode(row.Cells(13).Text)
        Me.TextBox1.Text = Server.HtmlDecode(row.Cells(14).Text)
        Label14.Text = "Update"
    End If

End Sub 
```

# c#-4.0 - c# 中的 a.Equals(b) 和 Equals(object a,object b) 有什么不同

> ID：10385541
> 
> 赞同：0
> 
> 时间：2012-04-30T14:41:27.930
> 
> 标签：c#-4.0, version

请解释一下这两种说法有什么不同。

第一条语句抛出异常，第二条语句返回布尔值

```
Version a = null;

if(a.Equals(null)) // throw the exception

if(Equals(a,null)) // return the bool value true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T14:49:10.713

`a.Equals`不初始化对象就不能调用`a`，否则会抛出异常`NullReferenceExcption`，但是`Equals`是一个静态方法，它会检查传递给它的两个引用是否相同，这些引用可以有空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:43:22.290

`a.Equals`是一个实例方法 - 如果`a`是`null`它会抛出 a`NullReferenceExcption`因为你正在调用一个`a`is的方法`null`。

另`Equals`一种是静态方法`Object`-它不会抛出。如果两个对象都被传入，`null`则返回`true`。

# asp.net - ASP.NET 成员角色

> ID：10385543
> 
> 赞同：0
> 
> 时间：2012-04-30T14:41:30.260
> 
> 标签：asp.net, mysql, asp.net-membership, sql-like

我正在尝试将用户添加到某个角色，我得到“用户已经在角色中。”，用户实际上没有任何角色，我跟踪了在 Roles.IsUserInRole(user_name) 后面运行的查询，如下所示：

```
SELECT COUNT(*) FROM my_aspnet_usersinroles uir 
JOIN my_aspnet_users u ON uir.userId=u.id
JOIN my_aspnet_roles r ON uir.roleId=r.id
WHERE u.applicationId=1 AND 
u.name LIKE 'user_name' AND r.name LIKE 'rolename' 
```

现在的问题是我有另一个用户（user.name）并且这个用户已经在那个角色中，但是由于（_）在类似的模式中我得到了这个结果。请注意，我正在使用 MySql 会员提供程序，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:57:34.663

您应该能够使用 [] 或 ESCAPE 子句转义下划线字符（更适合您的情况。）

[http://web.archive.org/web/20150519072547/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-search-for-special-characters-eg-in-sql-server。 html](http://web.archive.org/web/20150519072547/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-search-for-special-characters-e-g-in-sql-server.html)

请原谅 SQL2000 参考...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:46:40.020

LIKE 子句中的下划线充当通配符，因此该位置的任何字符都将匹配。

如果您正在寻找特定记录，为什么不这样做 WHERE u.name = 'user_name' ？

# xml - XSLT 转换日期格式

> ID：10385544
> 
> 赞同：2
> 
> 时间：2012-04-30T14:41:32.953
> 
> 标签：xml, xslt, xpath, biztalk, xslt-1.0

我在获取 XML 文件时遇到问题，从样本中我得到的日期格式是`mm/dd/yyyy`，有时是`m/d/yyyy`. 我的任务是将其转换为架构只接受的另一个 XML 文件`yyyy-mm-dd`。我仅限于使用 XSLT 1.0/XPATH 1.0。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T15:34:00.593

你的问题有点含糊。它需要一些样本输入和预期输出。但无论如何，这里有一个答案，可以最好地猜测你想要什么。

鉴于此输入：

```
<?xml version="1.0"?>
<dates>
  <date>11/12/2012</date>
  <date>3/4/2011</date>
</dates> 
```

...由此样式表转换...

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

      <xsl:template match="dates">
        <xsl:copy>
        <xsl:apply-templates select="*" />
        </xsl:copy>
      </xsl:template>

      <xsl:template match="date">
        <xsl:copy>
        <xsl:value-of select=" 
           concat(
           substring-after(substring-after(.,'/'),'/') , '-',
           format-number( number( substring-before(.,'/')), '00') , '-',
           format-number( substring-before(substring-after(.,'/'),'/'), '00') 
           )
          " />
        </xsl:copy>
      </xsl:template>

</xsl:stylesheet> 
```

...将产生所需的输出...

```
<dates>
 <date>2012-11-12</date>
 <date>2011-03-04</date>
</dates> 
```

如果正确，请在答案上打勾。[我在http://www.purplegene.com/static/transform.html](http://www.purplegene.com/static/transform.html)上验证了这个解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:26:59.943

下面显示的我的 XSLT 应该可以工作。它不使用硬编码的长度或索引，而是将日期字符串拆分为 '/' 以计算出日、月和年组件的位置。

**XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" />

    <xsl:template match="/">
        <xsl:apply-templates />
    </xsl:template>

        <!-- match the date and invoke formatDate to format it -->
    <xsl:template match="date">
        <xsl:element name="date">
            <xsl:call-template name="formatDate">
                <xsl:with-param name="dateParam" select="." />
            </xsl:call-template>
        </xsl:element>
    </xsl:template>

    <xsl:template name="formatDate">
        <xsl:param name="dateParam" />
        <!-- input format mm/dd/yyyy or m/d/yyyy -->
        <!-- output format yyyy-mm-dd -->

        <!-- parse out the day, month and year -->
        <xsl:variable name="month" select="substring-before($dateParam,'/')" />
        <xsl:variable name="day" select="substring-before(substring-after($dateParam,'/'),'/')" />
        <xsl:variable name="year" select="substring-after(substring-after($dateParam,'/'),'/')" />

        <!-- now print them out. Pad with 0 where necessary. -->
        <xsl:value-of select="$year" />
        <xsl:value-of select="'-'" />
        <xsl:if test="string-length($month) = 1">
            <xsl:value-of select="'0'" />
        </xsl:if>
        <xsl:value-of select="$month" />
        <xsl:value-of select="'-'" />
        <xsl:if test="string-length($day) = 1">
            <xsl:value-of select="'0'" />
        </xsl:if>
        <xsl:value-of select="$day" />
    </xsl:template>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**输入：**

```
<input>
    <date>04/30/2012</date>
    <date>4/1/2012</date>
</input> 
```

**输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<input>
    <date>2012-04-30</date>
    <date>2012-04-01</date>
</input> 
```

**演示**：[http ://www.xsltcake.com/slices/kBveVQ](http://www.xsltcake.com/slices/kBveVQ)

# wpf - 是否有 IMarkupExtension 对于 WPF？

> ID：10385546
> 
> 赞同：2
> 
> 时间：2012-04-30T14:41:40.323
> 
> 标签：wpf

`IMarkupExtension<T>`WPF有吗？如果没有，WPF 4.5 会有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:03:29.597

没有也没有。WPF 不是通用的友好型。

# php - .htaccess 通过 index.php 脚本过滤子目录

> ID：10385549
> 
> 赞同：0
> 
> 时间：2012-04-30T14:41:51.573
> 
> 标签：php, .htaccess, mod-rewrite, http-headers

我有上传文件的文件夹，我需要其中的一个子目录作为受保护的目录，并在每次调用其中一个文件时检查用户权限。.htaccess 将调用 upload_files 目录中的 index.php 文件，同时维护 URL，以便 index.php 可以根据数据库检查文件，以查看登录用户是否具有文件的访问权限，如果有， index.php 将提供文件，用户不知道权限检查。

我实际上已经在我的开发服务器上使用上传文件目录本身的 .htaccess 中的以下代码完成了这项工作，

```
RewriteEngine on
RewriteRule ^protected($|/) - [F]

ErrorDocument 404 /uploaded_files/index.php
ErrorDocument 403 /uploaded_files/index.php
ErrorDocument 405 /uploaded_files/index.php 
```

但是在实时服务器上，某些东西导致这些 php 标头被忽略：

```
header('Content-Type: some/mime'); 
```

和/或

```
header('Content-Disposition: attachment; filename="somefile.txt"'); 
```

我认为这可能是 RewriteRule 的强制 403，但我使用它是为了使 URL 不会更改并且 index.php 可以获得 $_SERVER['REQUEST_URI']

我还通过 index.php 过滤 404

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T21:11:50.317

这似乎有效。重定向到 /uploaded_files.index.php 和 RewriteRule 上的 L [Last] 标志而不是 F [403] 标志

RewriteRule上的 RewriteEngine
~~^protected($|/) - [F]~~
RewriteRule ^protected($|/) /upload_files/index.php [L]

ErrorDocument 404 /uploaded_files/index.php
ErrorDocument 403 /uploaded_files/index.php
ErrorDocument 405 /上传文件/index.php

# svm - svm-train 其他参数优化

> ID：10385550
> 
> 赞同：5
> 
> 时间：2012-04-30T14:42:02.973
> 
> 标签：svm, libsvm

libsvm 的“grid.py”尝试仅优化 svm-train 的两个参数“c”和“g”。我想通过为不同的参数一次又一次地运行“grid.py”来扩展“grid.py”以优化其他参数（例如“r”或“d”）。我有一些问题
1\. 是否已经有任何脚本可以优化除“c”和“g”以外的参数？
2\. 哪些参数更关键，最大/最小范围有哪些。有时更改/优化一个参数会自动优化其他参数。svm-train参数是这种情况吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T15:29:31.283

据我所知，没有脚本可以做到这一点，但是我不明白为什么 grid.py 不能轻易扩展来做到这一点。但是，我认为这不值得付出努力。

首先，您需要选择您的内核。这本身就是一个参数。每个内核都有一组不同的参数，并且会执行不同的操作，因此为了比较内核，您必须优化每个内核的参数。

C、代价参数是适用于SVM本身的整体参数。其他参数都是核函数的输入。C 控制宽边距和更多错误分类的训练点（但模型可以更好地泛化到未来数据）和窄边距之间的权衡，该窄边距更好地拟合训练点但可能过度拟合到训练数据。

通常，两个最广泛使用的内核是线性（不需要参数）和 RBF 内核。

RBF 内核采用 gamma 参数。这必须优化，它的值会显着影响性能。

如果您使用的是多项式内核，则 d 是主要参数，您可以对其进行优化。从默认值修改其他参数是没有意义的，除非您有一些数学上的理由说明这样做更适合您的数据。以我的经验，多项式内核可以提供很好的结果，但如果在 RBF 内核上有一个微小的增加，那么计算成本就会很高。

与 sigmoid 内核类似，gamma 是您的主要参数，优化它并将 coef0 保留为默认值，除非您很好地理解为什么这更适合您的数据。

所以 grid.py 不优化其他参数的原因是因为在大多数情况下它根本没有必要并且通常不会导致性能的提高。至于你的第二个问题：不，这不是优化一个会优化另一个的情况。这些参数的最佳值特定于您的数据集。更改内核参数的值会影响 C 的最优值。这就是为什么建议使用网格搜索的原因。将这些额外参数添加到搜索中会显着增加搜索时间，并且不太可能提高分类器性能。

# go - 获取退出代码 - Go

> ID：10385551
> 
> 赞同：84
> 
> 时间：2012-04-30T14:42:08.933
> 
> 标签：go

我正在使用包：os/exec [http://golang.org/pkg/os/exec/](http://golang.org/pkg/os/exec/)在操作系统中执行命令，但我似乎没有找到获取退出代码的方法。我可以读取输出

IE。

```
package main

import(
    "os/exec"
    "bytes"
    "fmt"
    "log"
    )

func main() {
    cmd := exec.Command("somecommand", "parameter")
    var out bytes.Buffer
    cmd.Stdout = &out
    if err := cmd.Run() ; err != nil {
        //log.Fatal( cmd.ProcessState.Success() )
        log.Fatal( err )
    }
    fmt.Printf("%q\n", out.String() )
} 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-04-30T15:02:48.957

很容易确定退出代码是 0 还是其他。在第一种情况下，`cmd.Wait()`将返回 nil（除非在设置管道时出现另一个错误）。

不幸的是，在错误情况下没有独立于平台的方法来获取退出代码。这也是它不属于 API 的原因。以下代码段适用于 Linux，但我尚未在其他平台上对其进行测试：

```
package main

import "os/exec"
import "log"
import "syscall"

func main() {
    cmd := exec.Command("git", "blub")

    if err := cmd.Start(); err != nil {
        log.Fatalf("cmd.Start: %v", err)
    }

    if err := cmd.Wait(); err != nil {
        if exiterr, ok := err.(*exec.ExitError); ok {
            // The program has exited with an exit code != 0

            // This works on both Unix and Windows. Although package
            // syscall is generally platform dependent, WaitStatus is
            // defined for both Unix and Windows and in both cases has
            // an ExitStatus() method with the same signature.
            if status, ok := exiterr.Sys().(syscall.WaitStatus); ok {
                log.Printf("Exit Status: %d", status.ExitStatus())
            }
        } else {
            log.Fatalf("cmd.Wait: %v", err)
        }
    }
} 
```

只需[按照](http://golang.org/pkg/os/exec/#Cmd.Wait) [api](http://golang.org/pkg/os/#ProcessState)[文档](http://golang.org/pkg/syscall/#WaitStatus)[了解](http://golang.org/pkg/os/exec/#ExitError) 更多信息 :)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2019-03-08T00:40:40.717

从 golang 版本 1.12 开始，退出代码以原生方式和跨平台方式可用。[请参阅 ExitError](https://golang.org/pkg/os/exec/#ExitError)和[ExitCode()](https://golang.org/pkg/os/#ProcessState.ExitCode)。

> ExitCode 返回已退出进程的退出代码，如果进程尚未退出或被信号终止，则返回 -1。

```
if err := cmd.Run() ; err != nil {
    if exitError, ok := err.(*exec.ExitError); ok {
        return exitError.ExitCode()
    }
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-11-23T16:47:00.873

这是我基于@tux21b 的回答的增强版

`utils/cmd.go`

```
package utils

import (
    "bytes"
    "log"
    "os/exec"
    "syscall"
)

const defaultFailedCode = 1

func RunCommand(name string, args ...string) (stdout string, stderr string, exitCode int) {
    log.Println("run command:", name, args)
    var outbuf, errbuf bytes.Buffer
    cmd := exec.Command(name, args...)
    cmd.Stdout = &outbuf
    cmd.Stderr = &errbuf

    err := cmd.Run()
    stdout = outbuf.String()
    stderr = errbuf.String()

    if err != nil {
        // try to get the exit code
        if exitError, ok := err.(*exec.ExitError); ok {
            ws := exitError.Sys().(syscall.WaitStatus)
            exitCode = ws.ExitStatus()
        } else {
            // This will happen (in OSX) if `name` is not available in $PATH,
            // in this situation, exit code could not be get, and stderr will be
            // empty string very likely, so we use the default fail code, and format err
            // to string and set to stderr
            log.Printf("Could not get exit code for failed program: %v, %v", name, args)
            exitCode = defaultFailedCode
            if stderr == "" {
                stderr = err.Error()
            }
        }
    } else {
        // success, exitCode should be 0 if go is ok
        ws := cmd.ProcessState.Sys().(syscall.WaitStatus)
        exitCode = ws.ExitStatus()
    }
    log.Printf("command result, stdout: %v, stderr: %v, exitCode: %v", stdout, stderr, exitCode)
    return
} 
```

我已经在 OSX 上对其进行了测试，如果它在其他平台上没有按预期工作，请告诉我，以便我们改进它。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-06-29T22:04:26.867

2019 年 9 月，Go [1.13](https://golang.org/doc/devel/release.html#go1.13)引入了[errors.As](https://golang.org/pkg/errors/#As)，它支持错误“解包”——方便在嵌套调用链中查找精确错误。

因此，在运行外部命令时提取和检查两个最常见的错误：

*   [os.PathError](https://golang.org/pkg/os/#PathError)
*   [exec.ExitError](https://golang.org/pkg/os/exec/#ExitError)

* * *

```
err := cmd.Run()

var (
    ee *exec.ExitError
    pe *os.PathError
)

if errors.As(err, &ee) {
    log.Println("exit code error:", ee.ExitCode()) // ran, but non-zero exit code

} else if errors.As(err, &pe) {
    log.Printf("os.PathError: %v", pe) // "no such file ...", "permission denied" etc.

} else if err != nil {
    log.Printf("general error: %v", err) // something really bad happened!

} else {
    log.Println("success!") // ran without error (exit code zero)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-26T18:47:50.173

新包 github.com/bitfield/script 使 exec 变得更容易，并且还具有一些非常棒的附加功能。看看这个。

在此示例中，我运行两个命令。一个会出错，一个不会。两者都有输出并且都显示退出值。

```
package main

import (
    "fmt"

    "github.com/bitfield/script"
)

func main() {
    for _, c := range []string{"git blub", "git version"} {
        fmt.Println("running", c)
        p := script.Exec(c)
        fmt.Println("Exit Status:", p.ExitStatus())
        if err := p.Error(); err != nil {
            p.SetError(nil)
            out,_:=p.Stdout()
            fmt.Println(out)
        } else {
            out,_:=p.Stdout()
            fmt.Println(out)
        }
        fmt.Println("--")
    }
} 
```

输出：

```
running git blub
Exit Status: 1
git: 'blub' is not a git command. See 'git --help'.

The most similar command is
    pull

--
running git version
Exit Status: 0
git version 2.24.3 (Apple Git-128)

-- 
```

# reporting-services - SSRS - 数据集字段的自动刷新

> ID：10385552
> 
> 赞同：2
> 
> 时间：2012-04-30T14:42:09.120
> 
> 标签：reporting-services, report, ssrs-2008, reportbuilder, reportbuilder3.0

我们有大约 90 个报告生成器报告，由高级用户构建。这些报告建立在 20 多个基本报告表之上。

有时我们会在这些报表中添加新字段。

这里的挑战是自动刷新报表生成器 (SSRS) 中的数据集，而无需通过每个报表手动刷新数据集上的数据。由于 SSRS 使用 FMTONLY ON 处理这些报告，因此有一种方法可以动态地自动执行此过程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:27:35.827

所以，我认为您应该使用[报表模型](http://technet.microsoft.com/en-us/library/cc678411.aspx) 报表模型由数据源视图制成，一旦 DSV 更新，它就会反映在报表模型上，从而反映在所有报表上。

当报告自动连接到数据库时，我认为没有办法做到这一点

# javascript - url包含锚点时如何调用js函数

> ID：10385553
> 
> 赞同：0
> 
> 时间：2012-04-30T14:42:12.493
> 
> 标签：javascript, jquery

我有一个网站 example.com。当我访问这个页面 example.com/#login 时，我想调用一个 js 警报函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:44:32.443

```
// example.com/#login
if (window.location.hash) {
    alert("URL has hash");
    var hash = window.location.hash; // = "#login"
    callMyFunction();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:49:34.607

如果您想要一个好的跨浏览器库来处理 url，我会查看 History.js

[https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

```
History.Adapter.bind(window,'statechange',function(){ 
    // Note: We are using statechange instead of popstate
    var State = History.getState(); 
    // Note: We are using History.getState() instead of event.state
    History.log(State.data, State.title, State.url);
}); 
```

还有 Backbone.js，它可能比你需要的要多，因为它是一个 MV* 框架，但是它有一个路由器的概念，这也很有帮助。

[http://backbonejs.org/#Router](http://backbonejs.org/#Router)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:52:46.693

我认为您可以检查是否`window.location.hash`不是虚假值来检查 URL 中是否存在哈希值。

例如：

```
function someAlert(message) {
    // This would be your alert function. This is just for example
    alert(message);
}
// The "if the URL has a hash":
if (window.location.hash) {
    someAlert("Hello URL with a hash visitor!"); // "Hello URL with a hash visitor!" can be whatever you want
} 
```

如果您想保存之后的任何内容（包括哈希），只需使用：

```
var hash = window.location.hash; // hash would be "#login" if the URL was http://example.com/#login 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:44:07.327

您可以检查#login 的URL。如果存在，请调用该函数。 [http://www.webmasterworld.com/forum91/216.htm](http://www.webmasterworld.com/forum91/216.htm)

我推荐 jQuery，这种方法：http: [//jquery-howto.blogspot.co.uk/2009/09/get-url-parameters-values-with-jquery.html](http://jquery-howto.blogspot.co.uk/2009/09/get-url-parameters-values-with-jquery.html)

# iphone - 实时进度条更新

> ID：10385554
> 
> 赞同：1
> 
> 时间：2012-04-30T14:42:30.100
> 
> 标签：iphone, objective-c

当实时更新进度条或其他进度指示器以反映应用程序处理中正在进行的活动时，如果不使用这个聪明的代码片段，我认为没有办法做到这一点：

`[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantPast]];`

否则，进度条会一直等到运行循环结束，在这种情况下，它会跳转到进度条的结尾。

如果您想在单个运行循环（或我认为是单个运行循环）期间更新进度，这是唯一的方法吗？

进度条*通常*如何编码以实时更新？

上面的代码*危险*吗？我真的不太了解直接操作运行循环，而且在我不理解的应用程序中做一些事情让我感到紧张。这段代码有效，但这是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:47:23.127

在后台线程/NSOperationQueue/GCD 上运行冗长的操作并定期更新 UI。UI 始终在主线程上运行，因此更新将很快生效。尝试这样的事情：

```
for (...) {
  // some process
  // ...

  dispatch_async(dispatch_get_main_queue(),^ {
    [self.progressIndicator setProgress:x animated:YES];
  });
} 
```

一般来说，您不想在主线程上运行长时间或复杂的操作，因为它会阻塞整个 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:59:46.617

我正在使用`NSTimer`这种需要。假设您要播放/流式传输音频文件，并且您需要显示进度条位置的持续时间，所以这是我的方式。

希望这可以帮助..

# .net - WCF 扩展身份验证

> ID：10385555
> 
> 赞同：6
> 
> 时间：2012-04-30T14:42:50.557
> 
> 标签：.net, wcf, wcf-security

我需要扩展内置 WCF 身份验证，因此我的新身份验证应该与内置身份验证并排工作。

例如，我想允许从注册 IP（自定义身份验证）或用户名+密码（内置身份验证）访问。

我已经成功实施`ServiceAuthenticationManager`和`ServiceAuthorizationManager`.

`ServiceAuthenticationManager.Authenticate`只需将`IPrincipal`实现添加到消息属性，从传入消息属性`ServiceAuthorizationManager.CheckAccessCore`复制到属性。`IPrincipal``AuthorizationContext`

但是，`ServiceAuthenticationManager.Authenticate`即使我返回`authPolicy`或`base.Authenticate`调用结果，对于标准机制也是完全破坏的。

也许我走错了方向？添加自定义 WCF 身份验证而不影响现有身份验证的正确方法是什么？如果自定义失败，如何回退到内置身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:42:40.200

正确做法：

在 OnOpening 覆盖中设置 ServiceHost

```
Authorization.PrincipalPermissionMode = PrincipalPermissionMode.Custom;
Authorization.ExternalAuthorizationPolicies = new ReadOnlyCollection<IAuthorizationPolicy>(new[] { new MyCustomAuthorizationPolicy() }); 
```

在自定义策略的 Evaluate 方法中，将评估上下文“PrimaryIdentity”的三个属性分配给 IIdentity，将“Identities”分配给身份集合，将“Principal”分配给 IPrincipal

```
evaluationContext.Properties["PrimaryIdentity"] = identity;
evaluationContext.Properties["Identities"] = new List<IIdentity>(new[] { identity });
evaluationContext.Properties["Principal"] = principal; 
```

# iphone - 启动 iOS 模拟器时 XCode 锁定

> ID：10385557
> 
> 赞同：3
> 
> 时间：2012-04-30T14:42:58.907
> 
> 标签：iphone, ios, xcode, ipad

最近，当我将任何 iOS 应用程序部署到模拟器（iPad 或 iPhone）时，XCode 锁定（无响应）并且模拟器只是显示黑屏。我必须强制退出两者。

**到目前为止，我为解决问题所采取的步骤：**

1.  干净的
2.  重置模拟器
3.  删除了模拟器文件夹
4.  从 App Store 重新安装 XCode
5.  从开发者中心重新安装 XCode

有人遇到过这种情况么？有什么解决方案的建议吗？

**其他信息：**

*   OSX 狮子 10.7.3
*   XCode 4.3.2
*   希博莱特

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T02:45:49.930

我遇到了这个问题，并且能够通过以下方式继续：

1）编辑运行方案，点击“停止”按钮右侧的App名称的第一部分，下拉方案列表，然后单击“编辑方案...”

2) 单击运行项并将调试器从 LLDB 更改为 GDB。

3) 运行

我认为问题在于我验证了设置，它提供了自动从 GDB 和 LLDB 更改调试器，我单击“确定”，因为顾问消息听起来非常自信。

享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:06:53.767

嗯，奇怪的模拟器，我曾经遇到的仪器问题在我来回使用命令选项卡时会起作用。尝试删除派生数据？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:47:24.393

在方案下，进入编辑方案，然后在信息选项卡下将启动从等待 App.app 启动更改为自动。

编辑：如果您升级了 Xcode，请确保已卸载旧的单独模拟器。

# excel - 我可以在同一个 Windows 进程中拥有 CLR 的 .NET 4.0 实例和 CLR 的 .NET 3.5 实例吗？

> ID：10385558
> 
> 赞同：4
> 
> 时间：2012-04-30T14:42:59.340
> 
> 标签：excel, clr, vsto

我有一个多程序集 C# Excel 插件，它跨程序集边界传递嵌入式互操作类型。当我在配置为使用 .NET 3.5 的 Excel 进程中运行它时，一切正常。当我在配置为使用 .NET 4.0 的 Excel 进程中运行此程序时，只会加载具有在插件程序集中定义的应用程序逻辑的控件。我想我明白为什么，因为嵌入式互操作类型的处理在 .NET 4.0 中发生了显着变化，因此它们不能跨越程序集边界。让我感到困惑的是，我认为在 .NET 4.0 中，CLR 的多个实例可以托管在单个 Windows 进程中。如果我的插件针对 .NET 3.5，为什么它不能在 Excel 拥有的 .NET 3.5 CLR 实例中运行？为什么 Excel 试图在 .NET 4.0 中运行我的插件？重写插件并不是一个真正的选择，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:09:52.323

您标题中问题的答案是“是”。.NET 运行时版本 2.0（它是 .NET Framework 2.0、3.0 和 3.5 使用的运行时版本）可以与 .NET 运行时版本 4.0（也将是由升级的 .NET Framework 4.5 使用）。

但是，VSTO 案例并不那么简单，因为 Excel 和 VSTO 运行时之间存在交互来决定加载什么。VSTO 4 基本上包括针对 .NET 3.5（在 .NET 2.0 运行时）和 .NET 4.0 的单独版本的 Office 扩展。根据您所针对的 VSTO 4 办公扩展版本，您使用类（与较旧的 VSTO 兼容）或主要使用接口，因此 VSTO API 设计和您的代码也有点不同，具体取决于 VSTO 4 办公扩展的版本你用。然后，VSTO 外接程序的部署和加载取决于您所针对的 VSTO Office 扩展版本。

因此，您的 VSTO 4 加载项加载的 .NET 运行时版本与您制作加载项的方式相关联。在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/bb608603](http://msdn.microsoft.com/en-us/library/bb608603(v=vs.100).aspx) (v=vs.100).aspx和[http://msdn.microsoft.com/en-us/library/ee712596.aspx](http://msdn.microsoft.com/en-us/library/ee712596.aspx) .

如果您有其他 COM 组件，则可能是 COM 组件在不同版本的运行时（例如在 2.0 运行时）中激活，然后无法从基于 4.0 运行时的加载项中访问。在 .NET 4.0 中更改 COM 互操作类型的方式通常会使事情*变得更好*，因为运行时现在可以根据 GUID 等正确地将从不同程序集定义的类型识别为“相同”。

为了让生活更轻松，我还可以推荐[Excel-DNA](http://exceldna.codeplex.com)（我开发的）。它是一个免费且简单的插件库，用于在 .NET 中制作功能齐全的 Excel 插件，而无需使用 VSTO。Excel-DNA 允许您以任何版本的 Excel 和任何 2.0+ 版本的 .NET 为目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:48:21.033

我不熟悉开发 excel 插件，但是你可以这样做。
但是，在同一进程中使用不同版本的 clr 是自动完成的。
您可以在[此处](http://msdn.microsoft.com/en-us/magazine/ee819091.aspx)阅读详细信息。

# javascript - Mootools 类变量范围

> ID：10385560
> 
> 赞同：2
> 
> 时间：2012-04-30T14:43:10.540
> 
> 标签：javascript, class, mootools, scope

上这堂课：

```
var MyClass = new Class({
    Implements: [Events, Options],
    initialize: function() {

        this.a = 1;

    },

    myMethod: function() {

        var mc = new differentClass({
            events: {
                onClick: function() {

                    console.log(this.a); // undefined (should be 1, 2, 3 etc)

                    this.a ++;

                }
            }
        });    

    }
}); 
```

我如何保持*this.a*的价值？我基本上是在尝试从最后一点到刚刚单击的坐标画一条线（使用画布）。

[编辑]

我不想绑定`this`，因为它显然很糟糕，它会覆盖`differentClass`选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:46:41.693

有几种模式可供选择。

装饰器通过`.bind()`

```
var mc = new differentClass({
    events: {
        click: function() {
             console.log(this.a);
             this.a ++;
        }.bind(this) // binds the scope of the function to the upper scope (myclass)
    }
}); 
```

保持参考。

```
var self = this; // reference parent instance of myClass
var mc = new differentClass({
    events: {
        click: function() {
             console.log(self.a); 
             self.a ++;
        }
    }
}); 
```

指向一个可以处理它的 myClass 方法：

```
handleClick: function() {
    this.a++;
},
myMethod: function() {
    var mc = new differentClass({
        events: {
            click: this.handleClick.bind(this)
        }
    });    
} 
```

第二个 - 通过存储引用是首选，因为占用空间更小且支持通用，`.bind`但并非在每个浏览器中都可用，并且需要填充以及额外的时间来在执行时对函数进行curry。

`self`如果可能，您会在 mootools-core 本身中找到它。

如果性能没有风险，方法 3 可能会提供最好的可读性和代码结构。该方法的参数将保留单击处理程序传递的内容，即`event`并且`event.target`将成为处理程序。

在模式 #2 中，带有`self`,`this`将指向匿名函数中的点击处理程序（或指向其他类，例如），这可能也很有用 - 重新绑定上下文可能会让人头疼

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:46:05.730

您可以像这样引用适当的上下文：

```
...
myMethod: function() {
    var _this = this;
    var mc = new differentClass({
        events: {
            onClick: function() {
                console.log(_this.a);
                _this.a ++;
            }
        }
    });    
}
... 
```

# python - 可以在 Makefile 文件中读写变量赋值的 Python 库？

> ID：10385564
> 
> 赞同：1
> 
> 时间：2012-04-30T14:43:31.893
> 
> 标签：python, makefile

我正在寻找一种允许我`Makefile`从 Python 内部修改文件的解决方案。

我不需要任何特殊功能，通常我只需要更改变量，例如：`SOMETHING := value`但我更愿意能够使用现有的库而不是实现我自己的、错误的、解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:58:26.690

如果您想在 Python 中做事，我建议您远离 Makefile。

使用`waf`或`scons`代替。它们是用 Python 编写的用于替换 Makefile 的构建工具。我宁愿使用`waf`then `scons`，因为它更快并且它适用于新`Python`版本（以及一些操作系统项目，比如`ardour`切换到它）。

[http://code.google.com/p/waf/](http://code.google.com/p/waf/)

[http://www.scons.org/](http://www.scons.org/)

以下是两者（以及 CMake、Ant 等其他）的比较： [http ://code.google.com/p/waf/wiki/WafAndOtherBuildSystems#II._comparison_between_various_build_tools](http://code.google.com/p/waf/wiki/WafAndOtherBuildSystems#II._comparison_between_various_build_tools)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:55:22.480

还没有听说过这种面向 Makefile 的 Python 库，但是如果您只需要简单的替换，例如`SOMETHING := [something_placeholder]`，那么您可以加载模板文件，将占位符替换为您的值并将其写回磁盘并将其提供给`make`.

或者您可以使用诸如[Jinja2](http://jinja.pocoo.org/)之类的模板引擎，但这将是您的应用程序的另一个依赖项。

# html - 将旧的 Html SIZE=+x 转换为 css

> ID：10385571
> 
> 赞同：3
> 
> 时间：2012-04-30T14:44:08.167
> 
> 标签：html, css, deprecated

我正在用 html 和 CSS 重新制作一个旧网站，从来没有用“旧样式”标记制作过一个网站我不知道 size=+x 在 CSS 中与什么有关，是像素还是什么？有没有办法在 css 中复制它，还是我必须准确指定大小？

简而言之，我如何将 x 像素添加到我不知道大小的东西上？

对于我的特定示例，这里是标记：

```
<H1 ALIGN=CENTER>
    <B><FONT color="red" SIZE=+4>PHONE BOOK</FONT></B>
</H1></CENTER> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T14:52:09.600

这个脏旧的值相当于这个 css

```
.item{
  font-size: xxx-large;
} 
```

那是如果您在 webkit 中查看它。在 Firefox 中，它大约是 48px。

[这是旧的加号和减号标签](http://www.ftls.org/en/tutorial/HTML/index4.shtml)

[这是 W3C 的现代等价物的详细信息](http://www.w3.org/TR/CSS2/fonts.html#font-size-props)

旧字体大小是相对于浏览器当前默认字体大小设置的。如果您希望您的网站看起来是如何设计的，这不是您想要留给机会的那种事情。

想要我的意见，转储它，并改用 em 或 px 的值。

为了你的理智，不要为了匹配这些糟糕的旧值而出汗太多，通过视觉来做，或者如果你真的很担心，做屏幕抓取的像素比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:53:51.263

简而言之，标签有 7 种文本大小：1-7。使用 size=+1 时默认始终为 3，这意味着使其大小大于 3（与 size=4 相同）。

使用它是为了让不同的网络浏览器正确显示页面（它们的大小显然不同，在资源管理器上大小为 3 在 Firefox 等上不一样）

在 css 中只需定义一个字体和一个合适的字母大小并完成它。

进一步阅读：[http ://www.jonstorm.com/html/font.htm](http://www.jonstorm.com/html/font.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:51:00.473

这在很大程度上取决于页面上使用的基本字体大小，以及这些字体大小在样式表中的定义方式。确定实际大小的最佳方法是使用 Firebug。检查元素并打开右侧的“计算”选项卡。它会告诉你以像素为单位的字体大小。

# c# - 带有 Spring 表达式的 ExpandoObject

> ID：10385572
> 
> 赞同：2
> 
> 时间：2012-04-30T14:44:19.303
> 
> 标签：c#, .net, dynamic, spring.net, expandoobject

我使用 ExpandoObject 类创建对象，我想对该对象执行 spring.net 表达式，但随后出现以下错误：

> 无法为指定的上下文 [System.Dynamic.ExpandoObject] 解析“名称”节点。

代码如下：

```
 dynamic expandObject = new ExpandoObject();
  expandObject.Name = "Los";
  var value = (string)ExpressionEvaluator.GetValue(expandObject, "Name"); 
```

我认为 spring 表达式不适用于动态对象，但也许你现在为什么会发生这种情况以及任何解决方法（我尝试在 IDictionary 列表上转换 ExpandoObject，然后执行 spring 表达式，但这不起作用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T19:51:09.740

我下载了 Spring.Net 源代码，我注意到的第一件事是 spring.net 核心库是在 .Net 框架 2.0 中制作的，因为当前版本（1.3.2）的 spring.net 不能与系统一起使用。 Dynamic.ExpandoObject（在 .net framework 4.0 中添加）。
正如我们现在的 System.Dynamic.ExpandoObject 是一个对象，其成员可以在运行时动态添加和删除，添加的属性和方法保存在 Dictionary 列表中。因此，我修改了 spring.net 核心的源代码以支持 System.Dynamic.ExpandoObject，现在一切正常。

我改变了什么？
1\. 我将 Spring.Net 库升级到 .NET framework 4.0
2\. 我修改了 Spring.Expressions.PropertyOrFieldNode 类中的 InitializeNode() 方法：

```
private void InitializeNode(object context)
    {
        Type contextType = (context == null || context is Type ? context as Type : context.GetType());

        if (accessor == null || accessor.RequiresRefresh(contextType))
        {
            memberName = this.getText();

            // clear cached member info if context type has changed (for example, when ASP.NET page is recompiled)
            if (accessor != null && accessor.RequiresRefresh(contextType))
            {
                accessor = null;
            }

            // initialize this node if necessary
            if (contextType != null && accessor == null)
            {//below is new IF;)
                if (contextType == typeof(System.Dynamic.ExpandoObject))
                {
                    accessor = new ExpandoObjectValueAccessor(memberName);
                }
                // try to initialize node as enum value first
                else if (contextType.IsEnum)
                {
                    try
                    {
                        accessor = new EnumValueAccessor(Enum.Parse(contextType, memberName, true));
                    }
                    catch (ArgumentException)
                    {
                        // ArgumentException will be thrown if specified member name is not a valid
                        // enum value for the context type. We should just ignore it and continue processing,
                        // because the specified member could be a property of a Type class (i.e. EnumType.FullName)
                    }
                }

                // then try to initialize node as property or field value
                if (accessor == null)
                {
                    // check the context type first
                    accessor = GetPropertyOrFieldAccessor(contextType, memberName, BINDING_FLAGS);

                    // if not found, probe the Type type
                    if (accessor == null && context is Type)
                    {
                        accessor = GetPropertyOrFieldAccessor(typeof(Type), memberName, BINDING_FLAGS);
                    }
                }
            }

            // if there is still no match, try to initialize node as type accessor
            if (accessor == null)
            {
                try
                {
                    accessor = new TypeValueAccessor(TypeResolutionUtils.ResolveType(memberName));
                }
                catch (TypeLoadException)
                {
                    if (context == null)
                    {
                        throw new NullValueInNestedPathException("Cannot initialize property or field node '" +
                                                                 memberName +
                                                                 "' because the specified context is null.");
                    }
                    else
                    {
                        throw new InvalidPropertyException(contextType, memberName,
                                                           "'" + memberName +
                                                           "' node cannot be resolved for the specified context [" +
                                                           context + "].");
                    }
                }
            }
        }
    } 
```

2\. 我添加了我的自定义 ExpandoObjectValueAccessor

```
private class ExpandoObjectValueAccessor : BaseValueAccessor
    {
        private string memberName;

        public ExpandoObjectValueAccessor(string memberName)
        {
            this.memberName = memberName;
        }

        public override object Get(object context)
        {
            var dictionary = context as IDictionary<string, object>;

            object value;
            if (dictionary.TryGetValue(memberName, out value))
            {
                return value;
            }
            throw new InvalidPropertyException(typeof(System.Dynamic.ExpandoObject), memberName,
                                               "'" + memberName +
                                               "' node cannot be resolved for the specified context [" +
                                               context + "].");
        }

        public override void Set(object context, object value)
        {
            throw new NotSupportedException("Cannot set the value of an expando object.");
        }
    } 
```

编辑：当然，您不必将 spring.net 核心库升级到 .net framework 4.0 - 我这样做是因为我不喜欢通过魔术字符串来组合对象类型，我更喜欢使用 typeof()

# ember.js - 当 Ember.js 完成加载所有内容时，有没有办法获得回调？

> ID：10385578
> 
> 赞同：7
> 
> 时间：2012-04-30T14:44:41.323
> 
> 标签：ember.js

我正在构建一个 Ember.js 应用程序，在渲染/加载所有内容后，我需要进行一些额外的设置。

有没有办法得到这样的回调？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T00:46:35.657

视图上还定义了几个可以重载的函数，这些函数将被自动调用。其中包括`willInsertElement()`, `didInsertElement()`,`afterRender()`等。

特别是，我发现`didInsertElement()`了一个有用的时间来运行在常规面向对象系统中将在构造函数中运行的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T16:01:31.243

您可以使用 的`ready`属性`Ember.Application`。

来自[http://awardwinningfjords.com/2011/12/27/emberjs-collections.html](http://awardwinningfjords.com/2011/12/27/emberjs-collections.html)的示例：

```
// Setup a global namespace for our code.
Twitter = Em.Application.create({

  // When everything is loaded.
  ready: function() {

    // Start polling Twitter
    setInterval(function() {
      Twitter.searchResults.refresh();
    }, 2000);

    // The default search is empty, let's find some cats.
    Twitter.searchResults.set("query", "cats");

    // Call the superclass's `ready` method.
    this._super();
  }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T16:44:57.360

LazyBoy 的答案是你想做的，但它的工作方式与你想象的不同。您问题的措辞突出了有关 Ember 的一个有趣点。

在您的问题中，您指定在呈现视图*后需要回调。*但是，为了获得良好的“Ember”风格，您应该使用在应用程序初始化后、**视图呈现*****之前*****触发的“就绪”回调。**

 *重要的概念点是，在回调更新数据模型之后，您应该**让 Ember 更新视图。**

让 ember 更新视图非常简单。在某些极端情况下，必须使用“didFoo”回调来避免视图中的状态转换闪烁。（例如，避免在 0.2 秒内显示“未找到任何项目”。）

如果这对您不起作用，您还可以调查“onLoad”回调。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-11T21:24:37.267

您可以为此使用[jQuery ajax 回调](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)：

```
$(document).ajaxStart(function(){ console.log("ajax started")})
$(document).ajaxStop(function(){ console.log("ajax stopped")}) 
```

这适用于所有 ajax 请求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-09T03:12:33.487

我只是将它放入 Application Route

```
actions: {
    loading: function(transition, route) {

        this.controllerFor('application').set('isLoading', true);

        this.router.on('didTransition', this, function(){
          this.controllerFor('application').set('isLoading', false);
        });
    }
} 
```

然后在我的模板中的任何地方，我都可以使用 {{#if isLoading}} 启用和禁用加载内容，或者我可以在实际加载操作中添加特殊的 jQuery 事件。

非常简单但有效。*

# jquery - jquery在不同情况下在url末尾添加一个String

> ID：10385581
> 
> 赞同：0
> 
> 时间：2012-04-30T14:45:03.660
> 
> 标签：jquery, string, url

我需要在当前 url 的末尾添加字符串`$order=ASC`或`$order=DES`C。

我的问题是我得到了这个：

```
www.url.com/?order=ASC 
```

我需要这个

```
www.url.com/search.php?order=ASC 
```

而且（使用相同的 search.php 脚本）我需要像这样使用 url

```
www.url.com/search.php?status=active&name=bill&order=ASC 
```

这意味着，我有一个链接`www.url.com/search.php?status=active&name=bill`，我需要在最后添加订单字符串。

我在这里查看了stackoverflow，但第一个示例没有任何作用：

```
www.url.com/search.php?order=ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:48:56.497

使用[**jQuery 的 myURL 插件，**](http://spyk3lc.blogspot.com/2012/03/jquery-myurl-extension-how-to-get-that.html)您可以使用以下内容轻松完成此操作：

```
var url = $.myURL("search.php", { order: 'ASC' }); 
```

更多数据：

```
var url = $.myURL("search.php", { status: 'active', name: 'bill', order: 'ASC' });
// will render
// http://www.yoursite.com/search.php?status=active&name=bill&order=ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:25:05.373

我完全不确定我是否明白这一点，但要在 JS 中获取查询字符串，您所要做的就是：

```
var qs = window.location.search; 
```

要设置新的查询字符串，请执行以下操作：

```
window.location.search = 'order=ASC'; 
```

请注意不要创建无休止的重定向循环。

> 这意味着，我有一个指向 www.url.com/search.php?status=active&name=bill 的链接，我需要在末尾添加订单字符串。

如果此链接类似于：

```
<a href="www.url.com/search.php?status=active&name=bill"></a> 
```

做：

```
var oldURL = $('a').attr('href');
var newURL = oldURL+'&order=ASC';

$('a').attr('href', newURL); 
```

如果由于某种原因您需要添加到当前 URL：

```
var URL = window.location:
window.location = URL+'search.php?status=active&name=bill&order=ASC 
```

要在添加新查询字符串之前删除旧查询字符串，请执行以下操作：

```
var URL = window.location.replace(window.location.search, ''); 
```

如果你确定有一个查询字符串，你也可以这样做：

```
var URL = window.location.split('?')[0]; 
```

要检查 URL 中的最后一个字符是斜杠，然后删除它，请执行以下操作：

```
var url = window.location;
var lastChar = url[url.length-1];

if (lastChar == '/') {
    url = url.substring(0, url.length-1);
} 
```

现在你肯定明白了，你几乎可以获取和设置任何 URL 和查询字符串。

# php - session_start 似乎很慢（但只是有时）

> ID：10385582
> 
> 赞同：30
> 
> 时间：2012-04-30T14:45:06.037
> 
> 标签：php, apache, session, debian, fastcgi

出于某种奇怪的原因，就在今天，我们的服务器决定在会话开始期间非常慢。对于每个 session_start，服务器要么在 30 秒后超时，要么需要大约 20 秒才能启动会话。这很奇怪，因为它已经很长时间没有这样做了（我们的服务器上一次这样做是在大约 7 个月前）。我尝试将会话更改为通过数据库运行，并且效果很好，但是，随着我们当前的网站的构建，每个页面都需要几天时间并更改会话的加载以包含新会话处理程序。因此我的问题仍然存在：

为什么它这么慢，为什么只是有时？

我们在具有 24GB 内存的专用 hetzner 服务器上运行，CPU 速度快到足以运行一个简单的网络服务器（我相信是 Xeon，但我不确定）。我们使用 apache+fastcgi+php5 设置在服务器上运行 debian。

服务器不会通过服务器状态和`top`命令报告太多负载。`Vnstat`报告我们的网络链接没有任何问题（同样，这不会导致本地会话处理缓慢）。`IOtop`报告进程接管整个硬盘驱动器没有问题。如果通过 vim 完成，写入会话文件所在的 tmp 文件夹会很快。

再说一次，为了清楚起见，我主要关心的不是我们是否应该切换到数据库或内存缓存版本的会话，只是想问为什么会发生这种情况，因为我所看到的一切似乎工作正常，除了 PHP 本身。

**编辑**：我们的 PHP tmp 目录中的最大文件是 2.9 MB，所以我相信没有什么会产生影响。

**更新**：我从来没有弄清楚出了什么问题和/或如何解决它，但是在我们切换到 memcached/db 会话后问题就消失了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-28T07:29:12.453

你试过`session_write_close();`吗？这将禁用会话变量中的可写能力，但您仍然可以从中读取数据。稍后当您需要编写会话变量时，重新打开它。

我也遇到过这个问题，但这件事就像一个魅力。这就是我所做的：

```
session_start(); //starts the session
$_SESSION['user']="Me";
session_write_close();   // close write capability
echo $_SESSION['user']; // you can still access it 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-22T11:16:58.697

我遇到了同样的问题：突然服务器花了 30 秒来执行一个请求。我注意到这是因为**session_start()**。第一个请求很快，但每个下一个请求需要大约**30 秒**才能执行。我发现 c:\wamp\tmp 中的会话文件被第一个请求锁定了大约 30 秒。在此期间，第二个请求正在等待文件被解锁。我发现它与**rewrite_mod**和**.htaccess**有关。我禁用了 rewrite_mod 并注释掉了 .htaccess 中的每一行，它再次像魅力一样工作。我不知道为什么会发生这种情况，因为我不记得在 wamp 上更改任何设置或配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T05:15:11.237

我也遇到了这个问题。在这里得到了回答：

[函数 session_start() 的问题（工作缓慢）](https://stackoverflow.com/questions/1914242/problem-with-function-session-start-works-slowly/1914266#1914266)

会话在一个脚本执行时被 PHP 锁定，因此如果脚本堆叠在同一个会话下，它们可能会导致这些令人惊讶的长时间延迟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:54:28.710

每个会话都由 apache 存储为一个文本文件。

当会话启动用于恢复现有会话时（例如通过 cookie 标识符），可能一个大的会话文件（一个内部有很多内容的会话）启动速度很慢？

如果是这种情况，您的应用程序可能会将大量数据放入会话中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T10:57:51.360

请检查您是否有正确的内存缓存设置，例如`/etc/php.d/memcached.ini`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-28T14:54:18.863

我知道这是一个老问题，但我刚刚在我的服务器上解决了这个问题。我所做的只是在 cpanel 的缓存管理器中为域打开旁路缓存。

我的会议需要很长时间才能开始和结束，现在它们是即时的。

# wordpress - 在 wordpress 管理员中将过滤器添加到“快速编辑菜单”

> ID：10385585
> 
> 赞同：0
> 
> 时间：2012-04-30T14:45:12.360
> 
> 标签：wordpress, post, transition, status

我目前正在开发一个 wordpress 插件。该插件包括一个数据库表，每次使用该帖子的数据创建、编辑或删除帖子时都会更新该表。此表中的一列是“post_status”，我需要在帖子更改时使用帖子状态对其进行更新。现在我正在使用这段代码：

```
function filter_transition_post_status( $new_status, $old_status, $post ) { 
    global $post;
    global $wpdb;
    $wpdb->query(" UPDATE my_table SET post_status='$new_status' WHERE post_id=$post->ID");
}
add_action('transition_post_status', 'filter_transition_post_status', 10, 3); 
```

当我在“编辑帖子”页面中更改帖子状态时，上面的代码工作正常。当我更改帖子的状态时，更改也会发生在我的表格中。但是，当我使用“快速编辑”模式更改帖子状态或批量更改多个帖子时，代码不起作用。我的桌子上没有发生变化。任何解决此问题的帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:08:41.670

我找到了解决方案。当使用“快速编辑”模式更新帖子时，无法像在“编辑帖子”页面中那样使用全局 $post 来检索帖子 ID，而是使用 $_GET['ID']。因此，为了涵盖“快速编辑”和“编辑帖子”这两个选项，我使用以下功能：

```
function filter_transition_post_status( $new_status, $old_status, $post ) { 
    global $wpdb;
    global $post;
    $my_id = get_post($_GET['ID']);
    is_array($my_id) ? $post_id = $my_id[ID] : $post_id = $post->ID;
    $wpdb->query(" UPDATE my_table SET post_status='$new_status' WHERE post_id=" .$post_id);
}
add_action('transition_post_status', 'filter_transition_post_status', 10, 3); 
```

该函数检查 $my_id 是否从 $_GET[ID]（在“快速编辑”页面中）得到任何东西，如果是，它将使用它，否则它将使用全局 $post 来获取 id。

更新：

[我得到了比斯蒂芬哈里斯](https://wordpress.stackexchange.com/questions/50651/add-filter-to-quick-edit-menu-in-wordpress-admin)更好的解决方案- “你不想引用全局 $post，但作为参数之一给你的帖子。你只需要删除全局 $post”

```
function wpse50651_filter_transition_post_status( $new_status, $old_status, $post ) { 

    global $wpdb;

    $wpdb->query( 
        $wpdb->prepare( 
          "UPDATE my_table SET post_status=%s WHERE post_id=%d", 
           $new_status,$post->ID
         ) 
     );
}
add_action('transition_post_status', 'wpse50651_filter_transition_post_status', 10, 3); 
```

# iphone - iOS5.1 更新后基于PhoneGap 的应用程序无法正常工作

> ID：10385593
> 
> 赞同：1
> 
> 时间：2012-04-30T14:45:50.737
> 
> 标签：iphone, ios, ipad, sqlite, cordova

我有一个基于 PhoneGap 的 iOS 应用程序，它使用 SQLite DB 进行离线存储。在 iOS 5.1 中更新应用程序后，该应用程序无法运行。相同的应用程序在低于 5.1 的版本中运行良好。

我探索了一些东西，我的分析是

1.  当我们安装一个应用程序时，iOS 会为此创建一个单独的沙箱，并且与该应用程序相关的所有数据都会进入其中。
2.  在 iOS5.1 中，当我们更新应用程序时，会创建新沙箱，并将旧沙箱中的内容移到此处。
3.  对于 WebSQL，即 iOS 5.1 中 PhoneGap 的 SQLite，数据库存储在缓存文件夹（易失性存储）下。但在以前的 iOS 版本中，SQLite DB 存储在 Sandbox 中的 Documents 文件夹下，该文件夹是持久存储。
4.  真正的问题是缓存/首选项中有一个名为“.preferences”的文件，该文件具有 websql DB 的路径。当我更新应用程序时，沙箱路径发生更改，但在此文件中，以前的沙箱路径仍然可用，因此应用程序无法正常工作，因为以前的路径已从设备中删除。

这是苹果的问题还是可以由开发人员解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:38:05.790

我已经解决了这个问题

iOS 用来查找 WEB DB(SQLite) 和本地存储的路径存储在 NSUserDefaults 中。因此，当我每次启动应用程序时，我都会检查路径信息并确保它与新的沙箱路径匹配，否则我会设置该键的值，现在应用程序可以正常工作。

NSUserDefault 引用 SQLite 路径的键是 WebDatabaseDirectory。

如果 Apple 在其下一个版本中发布了针对此问题的修复程序，则不需要此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:32:33.903

尝试使用 cordova-1.6.0 或更高版本。

当我更改为 cordova-1.6.0 时，我的问题得到了解决。

# bash - 如何使用 SED 更改多个文件中的第 n 行？

> ID：10385594
> 
> 赞同：4
> 
> 时间：2012-04-30T14:45:52.130
> 
> 标签：bash, sed

我有一系列要转换为降价的文本文件。我想删除任何前导空格并在每个文件的第一行添加一个井号。如果我运行这个：

```
sed -i.bak '1s/ *\(.*\)/\#\1/g' *.md 
```

它改变了第一个文件的第一行并处理了它们，其余的文件保持不变。

我缺少什么会在多个文件的第 n 行搜索和替换某些内容？

在 OSX 10.7 上使用 bash

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:49:45.777

问题是 sed 默认情况下将任意数量的文件视为单个流，因此行号偏移量是相对于第一个文件的开头的。

对于 GNU sed，您可以使用 -s ( `--separate`) 标志来修改此行为：

```
sed -s -i.bak '1s/^ */#/' *.md 
```

...或者，使用非 GNU sed（包括 Mac OS X 上的），您可以遍历文件并每个调用一次：

```
for f in *.md; do sed -i.bak '1s/^ */#/' "$f"; done 
```

请注意，这里的正则表达式有点简化 - 无需匹配您不会更改的部分行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:12:33.437

```
sed -rsi.bak '1s/^/#/;s/^[ \t]+//' *.md 
```

您不需要在命令末尾使用 g(lobally) ，因为您不想在行首替换某些内容，而不是多次替换。

您使用两个命令，一个用于修改第 1 行 (1s...)，第二个命令用于前导空格（和制表符？:=\t），用分号分隔。要删除第一行中的空白，请切换顺序：

```
sed -rsi.bak 's/^[ \t]+//;1s/^/#/' *.md 
```

如果不需要，请删除 \t。那么你也不需要一个组：

```
sed -rsi.bak 's/^ +//;1s/^/#/' *.md 
```

-r 是表示对正则表达式进行特殊处理的标志。在这种情况下，您不需要掩盖加号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:50:16.247

XARgs 将为您解决问题：

[http://en.wikipedia.org/wiki/Xargs](http://en.wikipedia.org/wiki/Xargs)

从 sed 命令末尾删除 *.md，然后使用 XArgs 一次收集一个文件并将它们作为一个实体发送到您的 sed 命令，抱歉，我没有时间为您解决问题，但是wikiPedia 文章应该向您展示您需要了解的内容。

# asp.net-mvc-3 - 将 Enterprise Validation Application Blcok 与 MVC 3 和 ObjectValidator 一起使用

> ID：10385595
> 
> 赞同：1
> 
> 时间：2012-04-30T14:45:55.957
> 
> 标签：asp.net-mvc-3, validation, enterprise-library

我正在尝试将企业应用程序块与 mvc 3 一起使用，但遇到了复杂对象的问题。我的情况我有一个如下示例：

```
public class MainClassType{
    [ObjectValidator]
    public SubClassType SubClass{ get; set; }
}

public class SubClassType{
    [Required]
    public string Name { get; set; }
} 
```

“MainClassType”类在我的视图模型中，但是每当我点击提交按钮时，模型绑定器就会启动一些验证，这会引发以下错误：

```
A validation attribute of type ObjectValidatorAttribute cannot be used to validate values 
```

有什么想法吗？

马特

# sql - SQL优化Case语句

> ID：10385597
> 
> 赞同：6
> 
> 时间：2012-04-30T14:46:02.920
> 
> 标签：sql, sybase, sql-optimization

我相信我可以通过使用左外连接的 case 语句来优化这个 sql 语句。

但是我一直很难设置案例，一个用于总结代码类型 AB、CD，另一个用于所有其余的。

感谢您对此提供的任何帮助或提示。

```
update billing set payments = isnull(bd1.amount, payments)
, payments = case 
       when payments is null then 0 
       else payments 
     end
, charges = case 
        when bd2.amount is not null then charges 
        when charges is null then 0 
        else charges 
      end
, balance = round(charges + isnull(bd1.amount, bi.payments), 2) 
from billing bi 

left outer join (select inv, round(sum(bd1.bal), 2) amount 
                from "bill" bd1 
                where code_type = 'AB'
                 or code_type = 'CD' 
                group by inv) bd1 
                on bd1.inv = bi.inv 
left outer join (select invoice, round(sum(bd2.bal), 2) amount 
                from "bill" bd2 
                where code_type <> 'AB'
                 and code_type <> 'CD' 
                group by inv) bd2 
                on bd2.inv = bi.inv; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:57:09.547

您可以将其简化为使用单个查询而不是两个。您仍然需要它，因为 UPDATE 中的 GROUP BY 不起作用。

```
UPDATE bi 
SET    payments = bd.payments, 
       charges= bd.charges, 
       balance = bd.balance 
FROM   billing bi 
       LEFT JOIN (SELECT bd.inv, 
                         payments = Round(Sum(CASE 
                                                WHEN code_type IN ( 'AB' , 'CD' ) THEN 
                                                bd.bal 
                                                ELSE 0 
                                              END), 2), 
                         charges = Round(Sum(CASE 
                                               WHEN code_type NOT IN ( 'AB' , 'CD' ) THEN 
                                               bd.bal 
                                               ELSE 0 
                                             END), 2), 
                         balance = Round(Sum(bd.bal), 2) 
                  FROM   bill bd 
                  GROUP  BY bd.inv) bd 
         ON bd.inv = bi.inv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:50:57.507

也许是这样的：

```
update billing set payments = isnull(bd1.amount, payments)
, payments = isnull(payments, 0)
, charges = isnull(bd2.amount, isnull(charges, 0))
, balance = round(charges + isnull(bd1.amount, bi.payments), 2)
from billing bi 

left outer join (select inv, round(sum(bd1.bal), 2) amount 
                from "bill" bd1 
                where code_type in ('AB', 'CD')
                group by inv) bd1 
                on bd1.inv = bi.inv 
left outer join (select invoice, round(sum(bd2.bal), 2) amount 
                from "bill" bd2 
                where code_type not in ('AB', 'CD')
                group by inv) bd2 
                on bd2.inv = bi.inv; 
```

两个左连接不是问题！

# iphone - 只设置一次目标控制器属性？

> ID：10385607
> 
> 赞同：0
> 
> 时间：2012-04-30T14:46:37.263
> 
> 标签：iphone, cocoa-touch, storyboard, segue

有没有办法使用 Storyboards 来识别第一次调用 segue 的时间。我正在使用`prepareForSegue:sender:`将指向我的模型的指针注入到 segue 目标控制器中，但我只想在首次创建控制器时执行此操作。

目前我正在检查目标控制器中的 dataModel 指针，只有在它返回时才设置它`null`。这工作得很好，但我想检查我是否没有错过另一种实现这一目标的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:56:30.097

使用您的 appdelegate 会有另一种解决方案

在函数中，`:didfinishlaunching`您可以为应用程序创建一个布尔值，然后检查它是否已被调用

希望这也有帮助..

# ipad - UIView 具有纵向模式的不同宽度值

> ID：10385608
> 
> 赞同：0
> 
> 时间：2012-04-30T14:46:38.330
> 
> 标签：ipad, uiview

UIView 的自动调整大小。在 Xcode 中显示值 (0,20,768,1024)，但是用户不能在 Xcode 中更改它，但如果尝试在代码中重新打印视图的宽度：

```
 NSLog(@"Board view w %f", self.view.size.width);
NSLog(@"Board view h %f", self.view .size.height); 
```

您获得的纵向宽度值是 1024 或 1004

我想知道在宽度为 1004 的情况下，剩下的 20 个像素会发生什么？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:57:01.763

您可能没有计算 top 的 20px `UIStatusBar`。

也可以`frame`手动设置。

```
-(void)willRotateToInterfaceOrientation: (UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration{
    NSLog(@"didRotateFromInterfaceOrientation");
    if( orientation == UIInterfaceOrientationPortrait || fromInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown){
        [moviePlayer.view setFrame:CGRectMake(0,0,768,1024)];
    } else {
        [moviePlayer.view setFrame:CGRectMake(0,0,1024,768)];
    }
} 
```

# javascript - getElementById id 不存在

> ID：10385615
> 
> 赞同：0
> 
> 时间：2012-04-30T14:47:14.470
> 
> 标签：javascript

我又遇到了 getElementById 的问题。我从来没有完全理解这种方法的行为，虽然它应该很简单，但它通常对我不起作用。

我现在拥有的是一个 HTML 页面，其中包含：

```
<div id="vraag">
    ha
</div>

<div id="antwoorden">

</div>
<div id="controls">
    <form name="controlform">
        <input type="button" name="back" disabled value="<" onClick="goBack();" />
        <input type="button" name="forth" value=">" onClick="goForth();" />
    </form>
</div> 
```

我附上了一个 javascript 文件，它做了几件（工作）的事情，其中​​包括：

```
document.getElementById['vraag'].innerHTML = 'ho'; 
```

但是，当我单击调用此按钮的按钮时，firefox 错误控制台会显示： `Error: document.getElementById.vraag is undefined`

可悲的是，我能想到的唯一想法是……它就是！我在非常相似的环境中使用过这种方法并且仍然有效，所以我一生都无法弄清楚为什么这不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:48:13.020

使用`( )`代替`[ ]`

```
document.getElementById("vraag").innerHTML = 'ho'; 
```

参见示例：

[http://jsfiddle.net/Curt/QKeHP/](http://jsfiddle.net/Curt/QKeHP/)

# c++ - 指向 boost::geometry 函数的函数指针

> ID：10385619
> 
> 赞同：2
> 
> 时间：2012-04-30T14:47:25.560
> 
> 标签：c++, function-pointers, boost-geometry

我正在尝试[将此处描述](http://www.boost.org/doc/libs/1_47_0/libs/geometry/doc/html/geometry/reference/access/get/get_2.html)`boost::geometry::get`的函数传递给另一个函数，但我似乎无法正确处理。

我有：

```
template<typename StorageType = double,
         std::size_t D = 3>
class Derivative : public DerivativeBase<StorageType, D> {
public:
typedef typename DerivativeBase<StorageType, D>::results_t results_t;

template<typename Iterator, typename Geometry>
results_t operator()(Iterator& objIterator, StorageType (*getter)(Geometry const&))
... 
```

并且编译器抛出：

```
error: no match for call to ‘(Derivative<double, 3ul>) (iterator&, <unresolved overloaded function type>)’ 
```

我尝试使用以下方法调用我的函数：

```
derivs = myDerivs(it, &boost::geometry::get<0>); 
```

我想问题的一部分是因为我没有将参数传递给`get`，所以编译器无法确定`Geometry`函数签名中应该是什么类型。

我该如何去传递这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:53:33.750

这完全不特定于`boost.geometry`. 如果函数重载或者需要显式传递所有模板参数，则需要`static_cast`将函数精确到其类型。第二个是这里的情况（例如`&get<0, GeometryType>`）。

# crc - 有没有使用自然数对 CRC 进行编码和解码的方法？

> ID：10385620
> 
> 赞同：1
> 
> 时间：2012-04-30T14:47:26.543
> 
> 标签：crc

我知道如何编码和解码 CRC。例如，假设要编码的二进制消息是 11010011101100，生成多项式是 1011
，那么结果是：

```
11010011101100 000 <--- input left padded by 3 bits
`1011`               <--- divisor
 01100011101100 000 <--- result
 1011              <--- divisor ...
  00111011101100 000
    1011
    ...
    -----------------
    00000000000000 100 <---remainder (3 bits) 
```

并对其进行解码，您使用相同的技术，但是用余数替换 3 个零（100）

但是，有没有一种方法可以使用相同的方法使用普通自然数对 crc 代码进行编码和解码，而不将它们转换为二进制？

我试图做一些研究，但是我找不到任何方法或例子来使用自然数我似乎只找到二进制例子。请问大家有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:52:59.673

这是完全相同的算法。您*正在*使用自然数。它们的书写方式无关紧要。“左移三位”相当于“乘以 8”。“右移一位”相当于“除以二，舍去余数”。“取最后三位”相当于“除以 8 取余数”。但是，用算术术语来描述两个数字的位异或并不是很容易。

# c++ - 我只能从一个文件访问静态 fstream

> ID：10385625
> 
> 赞同：2
> 
> 时间：2012-04-30T14:47:49.723
> 
> 标签：c++, static, fstream, extern

我需要`static fstream`在多个源文件中使用 a 。但是我只能从单个文件中使用它，而不能从其他文件中使用它。此外，它在其他文件中的使用不会产生任何错误，它什么也不做。

这是代码：

```
/// log.h
#ifndef LOG_H
#define LOG_H
#include <fstream>
static std::ofstream ofs;
#define LOG(level) ofs << level << ": "
#endif

/// test.cpp
#include "log.h"
#include "other.h"
int main()
{
   ofs.open("file.log");
   LOG(5) << "Test log 1" << std::endl;      // OK
   OtherFunc();
}

/// other.h
#ifndef OTHER_H
#define OTHER_H
extern int OtherFunc();
#endif

/// other.cpp
#include "other.h"
#include "log.h"
int OtherFunc()
{
   LOG(5) << "Test log 2" << std::endl;      // Nothing
} 
```

这是生成的文件：

```
5: Test log 1 
```

*谢谢！*

平台：
Linux
g++ 4.5.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:55:11.687

静态全局变量：在源文件的顶层（在任何函数定义之外）声明为静态的变量仅在整个文件中可见（“文件范围”，也称为“内部链接”）。全局变量的默认存储类是`extern`具有外部或整个程序链接的。所以如果你想在多个文件中使用全局变量，它必须是`extern.`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T14:54:09.597

> 我需要`static fstream`在多个源文件中使用 a 。

如果你需要从多个源文件中引用同一个变量，那不是`static`链接，那是`extern`链接。

把它放在你的标题中：

```
extern std::ofstream ofs; 
```

将其放入您的 CPP 文件之一中：

```
std::ofstream ofs; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T15:07:01.093

`static`这意味着您明确要求编译器提供文件范围变量`std::ofstream ofs` *static links*，这意味着它*仅*在当前文件中可见。

不同之处在于您在标头中执行此操作，这意味着`.cpp`包括标头在内的每个文件都有自己独特的`std::ofstream ofs`. 仅因为您已为其提供静态链接，它们才能具有具有相同名称的不同文件范围变量 - 否则会出现名称冲突。

因此，在 中`main.cpp`，您打开本地`ofs`并写入它。在`other.cpp`中，您有自己的本地副本`ofs`，但从不打开它......所以输出不会去任何地方，当然也不会去`file.log`.

* * *

其他答案是正确的，将标头声明更改为`extern std::ofstream ofs;`将允许所有`.cpp`文件共享一个名为 的对象`ofs`，然后您只需将实例放在一个位置（`main.cpp`就可以了）。

`LOG(level)`不过，进行离线函数调用可能更简单、更清晰；然后输出流可以`log.cpp`与函数定义一起存在，其他人*不需要*看到它。

# c# - 为什么我不能将一些程序集添加到我引用的程序集中

> ID：10385626
> 
> 赞同：0
> 
> 时间：2012-04-30T14:47:50.707
> 
> 标签：c#, assemblies

使用代码：

```
 CompilerParameters parameters = new CompilerParameters();
 parameters.ReferencedAssemblies.Add("System.dll");
 parameters.ReferencedAssemblies.Add("System.Windows.Forms.dll"); 
```

到目前为止，它很好并且可以运行，我可以运行我提供给它的代码，但是如果我添加这些程序集：

```
 //parameters.ReferencedAssemblies.Add("System.Text.dll");
    //parameters.ReferencedAssemblies.Add("System.Linq.dll"); 
```

在运行时它给我一个错误说：

> 找不到元数据文件“System.Text”。

那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T14:49:51.990

没有`System.Text`和`System.Linq` *程序集*。有*命名空间*叫它，但它完全是另一回事。

LINQ 在`System.Core.dll`; 您可以在以下文档中看到这一点[`System.Linq.Enumerable`](http://msdn.microsoft.com/en-us/library/System.Linq.Enumerable.aspx)：

> 命名空间：`System.Linq`
> 
> 组装：（`System.Core`在`System.Core.dll`）

To find out which assemblies you need to reference, just browse the documentation for the types you are interested in and see what assembly implements them. Since the .NET library developers value consistency you will find that namespaces are implemented in the same assembly in their entirety (at least *I* do not know of any exceptions).

# php - PHP Table - 每行都有不同的超链接

> ID：10385633
> 
> 赞同：1
> 
> 时间：2012-04-30T14:48:50.893
> 
> 标签：php, html, mysql, hyperlink, html-table

我想要做的是得到它，因此每行回显都有一个不同的超链接地址。代码如下：

```
 echo "<table border='1' cellpadding='10'>";
    echo "<tr>  <th>Product Name</th> <th>Product Description</th> <th>Product Price</th> <th>Product Image</th> <th>View Product Details</th></tr>";

    while($row = mysql_fetch_array( $result )) {

            echo "<tr>";
            echo '<td>' . $row['Product_Name'] . '</td>';
    echo '<td>' . $row['Product_Description'] . '</td>';
            echo '<td>' . $row['Product_Price'] . '</td>';
            echo '<td><a href="print_pic.php">Picture Enlarge</a></td>';
            echo '<td><a href="phone1.php?id=1">View Details</a></td>';
            echo "</tr>";

    } 
  echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:52:33.260

您可以像处理其他变量一样将 php 变量内联在 echo'ed 锚点中。

假设您正在使用`id`数据库中的字段，您可以这样做：

```
echo '<td><a href="phone1.php?id=' . $row['id'] . '">View Details</a></td>'; 
```

如果您`echo`是 php 变量（例如`$row['id']`），那么它将回显到 HTML（不一定是文本）。因此，由于这个包含在锚标记中（在 HTML 中），它会回显到锚标记并构建 id 部分。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:33:11.290

```
"<td align=\"center\" valign=\"top\"><a href=\"$prevMonth\">&lt;&lt;</a>")  . "</td>\n" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:54:32.643

```
<table border='1' cellpadding='10'>
<tr>  
    <th>Product Name</th> 
    <th>Product Description</th> 
    <th>Product Price</th>
    <th>Product Image</th>
    <th>View Product Details</th>
</tr>

    while($row = mysql_fetch_array( $result )) {

        <tr>
            <td> <?php echo $row['Product_Name']; ?></td>
            <td><?php echo $row['Product_Description']; ?></td>
            <td><?php $row['Product_Price']; ?></td>
            <td><a href="print_pic.php">Picture Enlarge</a></td>
            <td><a href="phone1.php?id="<?php echo $row['tableRowId']; ?>">View Details</a></td>
        </tr>

    } 
</table> 
```

我可能会去做类似的事情。这假设您的表从自动递增列之类的东西返回一个唯一的 id。

这不包括任何转义，因此可能容易受到利用。我也会研究模板。它可以帮助您进行演示，使阅读混合的 html 和 php 变得更容易一些。

# javascript - Facebook 开发者页面上的 Javascript 语法

> ID：10385634
> 
> 赞同：0
> 
> 时间：2012-04-30T14:48:52.667
> 
> 标签：javascript, facebook

我没有从 facebook 开发者网站获取这段代码中的一些语法。第一个变量“js”和“id”是否以某种方式绑定？第一个 if 语句中究竟返回了什么？

```
 (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document)); 
```

这是页面的链接：http: [//developers.facebook.com/docs/guides/web/#personalization](http://developers.facebook.com/docs/guides/web/#personalization)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:56:37.317

“绑定”是什么意思？

它们是功能本地的；`js`是在第 3 行和第 4 行设置的变量，`id`立即设置为字符串。

函数本身在定义后立即执行，并`d`设置为`document`函数内部。

第一个（也是唯一显式的）`return`语句不返回任何内容。如果这是唯一的代码，那么返回值将毫无意义，因为没有任何东西可以捕获返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:21:25.600

这里没有任何东西，只是被盗的空格:)

```
(function(d){
    var js,    // variable (empty)
        id = 'facebook-jssdk';    // variable with string 'facebook-jssdk'

    if (d.getElementById(id)) {    // is there an element with id 'facebook-jssdk'
        return;    // yes, so we have nothing to do and get out of here
    }

    js = d.createElement('script');    // create 'script' element
    js.id = id;    // assign id 'facebook-jssdk'
    js.async = true;    // load in "background" (if supported)
    js.src = "//connect.facebook.net/en_US/all.js";    // set source (with the appropriate protocol; https if called via https, http otherwise)
    d.getElementByTagNam('head')[0].appendChild(js);    // append to first head element on page
}(document))    // immediately call the anonymous function and hand in the 'document' 
```

# c++ - C++ PPL - lambda 表达式和数据共享

> ID：10385640
> 
> 赞同：0
> 
> 时间：2012-04-30T14:49:14.407
> 
> 标签：c++, parallel-processing, share, ppl

我的 PPL 程序崩溃了。我确实怀疑一些变量处理不当。如果我的 parallel_for 构造语法是

```
parallel_for(0,p,[&x1Pt,&x2Pt,&confciInput,&formula,&param,&method,&lowOneParam,&highOneParam](int i)
{   

                 // ...

      } 
```

，是否每个线程都有自己的 confciInput 和公式副本，例如，可以使用？还是 lambda 表达式的捕获子句仅提供对封闭范围局部变量的访问？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:04:32.833

当您在 lambda 表达式的捕获列表中通过引用捕获变量时，每个线程将对捕获的同一个变量进行操作，并且该变量的值在调用者的上下文中被修改。如果您需要每个线程都有自己的副本，请将调用修改为

```
parallel_for(0,p,
  [&x1Pt,&x2Pt,confciInput,formula,&param,&method,&lowOneParam,&highOneParam]
  (int i) mutable
{   
  // ...
} ); 
```

现在，每个线程都有自己的`confciInput`和`formula`变量副本，但是这些线程可能对这些本地副本进行的任何修改都不会对原始变量进行。

此外，默认情况下，lambda 通过 const 值捕获变量，因此如果您要修改 lamda 中的任一变量，则需要`mutable`规范。

# apache-flex - Flex Web 应用程序在编译之前工作正常

> ID：10385641
> 
> 赞同：0
> 
> 时间：2012-04-30T14:49:15.883
> 
> 标签：apache-flex, compilation

我在 Flex 中创建了一个组件，当用户输入一个条目时，它会自动完成几个文本输入。从 Flex 运行应用程序时，一切正常。但是，在我编译并加载应用程序后，自动完成功能不起作用。这是一些背景信息。

*   在 Adob​​e Flash Builder 4.5 中创建。
*   Web 应用程序在内部网络上运行。
*   自动完成使用的服务是外部服务。
*   托管 Web 应用程序的内部服务器可以很好地加载外部服务的 URL。

我不确定这是权限问题还是什么。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T22:24:37.790

我在从 Web 服务接收数据时遇到了类似的问题。如果跨域文件不在应有的位置 (webservice.domain.com/crossdomain.xml)，您将收到 404 错误。所以听起来这不是你的问题。但是，如果您的跨域文件不包含正确的标签，它不会引发 HTTP 错误，但它仍然无法正常工作。

如果您从 HTTP 服务器（您的应用程序所在的位置）转到 HTTPS 服务器（您的服务所在的位置），默认情况下它不会正常工作。这通常是一种不好的安全做法，但如果您认为它没问题，您可以将 secure="false" 用于 allow-access-from 标记。

此外，您可能需要同时包含 allow-access-from 标记和 allow-http-request-headers-from 标记以获取您要查找的数据。

这是 Adob​​e 的跨域策略文件规范，它是确定每个标签所需属性的好资源：http: [//www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html)。

祝你好运！

# image - 在 Windows Phone 7 上将图像转换为字节数组 No System.Drawing Dll 还有其他方式吗？

> ID：10385642
> 
> 赞同：1
> 
> 时间：2012-04-30T14:49:17.633
> 
> 标签：image, windows-phone-7, binary, system.drawing

```
Byte[] result = (Byte[])new ImageConverter().ConvertTo(img1, typeof(Byte[]));

//I cant use Image Converter add Image Class ? Drawing dll 

MemoryStream ms = new MemoryStream();

img1.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);

return ms.ToArray();

//Cannot see System.Drawing dll and there is no  sth like Drawing.Imaging... 
```

除了从外部源添加 dll 之外，还有其他选择吗（我的意思是我将复制它然后将其添加为外部 dll ）？我的项目在 Windows 7 手机应用程序中，看不到 Drwaing.dll stj

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:59:10.563

首先没有**system.drawing** in `WP7`。

你可以这样做：

```
MemoryStream ms = new MemoryStream();
WriteableBitmap wb = new WriteableBitmap(myimage);
wb.SaveJpeg(ms, myimage.PixelWidth, myimage.PixelHeight, 0, 100);
byte [] imageBytes = ms.ToArray(); 
```

# tomcat - 读取 Tomcat 部署目录中存在的文件时出错

> ID：10385643
> 
> 赞同：1
> 
> 时间：2012-04-30T14:49:18.410
> 
> 标签：tomcat

我是 java 新手（就像我们整个开发团队一样，长话短说，我们曾经是 .Net 和 Domino 开发人员，然后有一天我们被告知用 java 开发）

我已经创建了一个 java 开发的 war 文件，我已经将它部署到了我们的 Tomcat 服务器。应用程序部署并运行正常，但由于某种原因，表单上没有显示任何验证消息。

我已经检查了 Tomcat 中的日志文件，并且收到了消息`"g:\program files\apache software foundation\tomcat 7.0\webapps\griddemo\web-inf\classes\config\servicesvalidations.xml (the system cannot find the path specified)"`，但是当我检查目录时，文件确实存在。

任何想法为什么它没有被发现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:51:57.397

是权限问题吗？确保服务器对该特定文件/目录具有读/写权限。

# php - 使用 php 连接到 oracle 10g 时不会触发更新查询

> ID：10385644
> 
> 赞同：0
> 
> 时间：2012-04-30T14:49:21.737
> 
> 标签：php, oracle10g, wampserver

我正在使用`php_oci8`扩展程序连接到我的数据库`Oracle 10g`。虽然，我可以使用该`scott/tiger`帐户连接到我的数据库，但我无法对该数据库运行任何查询。我正在使用 Windows XP-32 位和 Oracle 10g。

我`WampServer 2.1`用于执行我的`PHP`脚本

这是我用于在表上执行更新查询的 php 脚本：

```
 <?php
   $conn = oci_connect('scott','tiger','');
   if(!$conn)
          echo "Not connected";
   else
     {
          $query = " UPDATE demo SET amount=4500 where id=1";
          $stmt = oci_parse($conn, $query);
          oci_execute($stmt, OCI_DEFAULT);
          echo "amount updated";
     }

    ?> 
```

执行此脚本时，我收到消息`amount updated`，但更新的值未反映在数据库表中。谁能告诉我为什么会这样？有什么解决办法吗？

提前致谢

# python - python中的列表匹配：获取更大列表中子列表的索引

> ID：10385647
> 
> 赞同：8
> 
> 时间：2012-04-30T14:49:24.623
> 
> 标签：python, list, set, match, indices

对于两个列表，

```
a = [1, 2, 9, 3, 8, ...]   (no duplicate values in a, but a is very big)
b = [1, 9, 1,...]          (set(b) is a subset of set(a), 1<<len(b)<<len(a)) 

indices = get_indices_of_a(a, b) 
```

如何让`get_indices_of_a`返回？有没有比 using 更快的方法，这需要太长时间？`indices = [0, 2, 0,...]``array(a)[indices] = b``a.index`

创建`b`一个集合是匹配列表和返回索引的快速方法（请参阅[比较python中的两个列表并返回匹配值](https://stackoverflow.com/q/10367020/1342516)的索引），但在这种情况下它将丢失第二个的索引`1`以及索引的序列。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T14:56:34.913

一种快速方法（何时`a`是一个大列表）将使用 dict 将值映射`a`到索引：

```
>>> index_dict = dict((value, idx) for idx,value in enumerate(a))
>>> [index_dict[x] for x in b]
[0, 2, 0] 
```

`a.index`与使用需要二次时间相比，这在平均情况下将花费线性时间。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T14:50:49.093

假设我们正在使用较小的列表，这很简单：

```
>>> a = [1, 2, 9, 3, 8] 
>>> b = [1, 9, 1] 
>>> [a.index(item) for item in b]
[0, 2, 0] 
```

在较大的列表中，这将变得非常昂贵。

（如果有重复，第一次出现将始终是结果列表中引用的那个，如果`not set(b) <= set(a)`，你会得到一个 ValueError）。

# java - MS ACCESS jdbc.odbc 连接。未找到数据源名称/未指定默认驱动程序？

> ID：10385648
> 
> 赞同：2
> 
> 时间：2012-04-30T14:49:27.787
> 
> 标签：java, sql, database, jdbc-odbc

我正在尝试在学校学习基本的 SQL 测试，但不幸的是，我将我们应该使用的课程复制到我的电脑上的项目中，我收到以下错误：

> java.sql.SQLException: [Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

```
package Question1;

// Your name, Q 1
import java.sql.*;
import java.io.*;
import javax.swing.*;

public class GreenWood
{
 // Set up database connection
   private static final String DATABASE_FILE_NAME = "WoodDB.mdb";
   private static final String DRIVER = "jdbc:odbc:DRIVER=" +
   "{Microsoft Access Driver (*.mdb)};" +
   "DBQ=" + new File (DATABASE_FILE_NAME).getAbsolutePath ();
  static
  {
     try
     {
        Class.forName ("sun.jdbc.odbc.JdbcOdbcDriver");
     }
         catch (ClassNotFoundException e)
        {
           System.out.println ("Class not found");
           e.printStackTrace ();
        }
  }

  private Connection dbcon;
  private BufferedReader keyb = new BufferedReader (new InputStreamReader (System.in));

   public GreenWood ()
  {
     System.out.println ("WoodDB Connection");
     try
     {
        dbcon = DriverManager.getConnection (DRIVER);
        Statement stmt = dbcon.createStatement ();
        System.out.println ("Connection successful\n");

        char choice = ' ';
        do
        {

         //Prints options for user input

           choice = keyb.readLine ().toUpperCase ().charAt (0);
           System.out.println (" ");
           switch (choice)
           {
             //calls query methods based on user input

           }
        }
        while (choice != 'X');
        dbcon.close ();
        System.out.println ("Done");
        Thread.sleep (1000);
        System.exit (0);
     } // try
         catch (Exception e)
        {
        // process exceptions here
           System.out.println ("Connection unsuccessful");
           e.printStackTrace ();
           System.out.println (e.toString ());
        }
  } // HoutSoorte constructor

  //Query Methods
  //Main creates new instance of GreenWood 
```

我的 WoodDB 数据库位于项目根目录中。

我已经做了一些故障排除，我认为问题是驱动程序位置的 URL；

```
dbcon = DriverManager.getConnection (DRIVER); 
```

司机是：

```
private static final String DRIVER = "jdbc:odbc:DRIVER=" +
   "{Microsoft Access Driver (*.mdb)};" +
   "DBQ=" + new File (DATABASE_FILE_NAME).getAbsolutePath (); 
```

经过大约一个小时的研究，我仍然和以前一样困惑。如果有人可以通过用简单的语言解释问题以及我如何解决它来帮助这个小程序程序员（我），那将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:19:15.990

尝试使用 32 位 JVM。尝试从 64 位 JVM 连接时收到相同的错误消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-29T15:13:26.577

如果有效，请尝试以下操作：

对于 64 位系统，转到：C:\windows\sysWOW64。对于 32 位系统，转到：C:\windows

有一个名为 odbcad32.exe 的可执行文件。

以管理员身份运行此 exe 以获得对 Microsoft Office 等附带的所有 ODBC 驱动程序的访问权限。

创建名为 my_data_source 的数据源并将连接字符串提及为：

连接 con = DriverManager.getConnection("jdbc:odbc:my_data_source");

上述解决方案适用于我的情况。

有关详细信息，请参阅：[使用 MS Access 的 Java 连接](http://lavraham.com/tutorials/java/java_connectivity.php) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:52:32.107

尝试使用 DATABASE_FILE 的完整路径名或将其复制到源目录中。

# git - 变基期间的冲突永远不会消失

> ID：10385653
> 
> 赞同：3
> 
> 时间：2012-04-30T14:49:45.120
> 
> 标签：git, git-rebase

`git rebase`当我不期望任何冲突时，我会看到冲突。我有

```
* - A   master
     \
      B - C - D - E   release 
```

现在我做

```
% git checkout release
% get rebase master release

[...]
CONFLICT (content): Merge conflict in webserver/app/api/model/Move.scala
Failed to merge in the changes.
Patch failed at 0015 work in progress
[...] 
```

但是既然`release`被分支了`master`，并且已经拥有了所有的提交（即提交`A`，为什么 rebase 会抱怨呢？我不希望`release`分支会改变。

我在这里错过了哪一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:53:09.800

你应该使用

```
git rebase master 
```

没有第二个参数。

# cakephp - 添加项目时自动设置一对多的id

> ID：10385657
> 
> 赞同：0
> 
> 时间：2012-04-30T14:50:01.637
> 
> 标签：cakephp

我有两个具有以下（简化）结构的表

*   person_availabilities (id, person_id)
*   人（身份证）

相关的（一个人可以有很多可用性）

我使用了烘焙功能来创建当前页面。

我想做的是转到一个人的个人资料并单击“新人可用性”。然后该页面将转到添加人员可用性页面并允许用户在那里输入数据。

用户不必在下拉列表中查找此人，这是选择我正在设置其可用性的人的身份的默认方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:03:26.903

当您转到某人的个人资料然后导航到添加页面时，尝试通过 url 将该人的 id 传递到该添加页面，然后尝试以下操作：

网址可能是：

```
http://example.com/person_availabilities/add/2 // here 2 is the person id 
```

在 person_availabilities 控制器的 add 函数中尝试如下操作：

```
function add($person_id = null) { // $person_id is the passed id. e.g $person_id = 2

   $this->set('person_id', $person_id); // set the id to view

} 
```

在视图文件中，如果选择字段名称为`person_id`ie ，则选择框应自动显示您正在使用其可用性的人

```
$this->Form->input('person_id'); 
```

如果没有，请尝试`selected`该选择框的属性：

```
$this->Form->input('FIELD_NAME', array('selected' => $person_id)); 
```

# facebook - 如何将应用标题/链接定向到网站？

> ID：10385659
> 
> 赞同：0
> 
> 时间：2012-04-30T14:50:13.390
> 
> 标签：facebook, facebook-graph-api

您知道 Facebook 上的发布应用程序：“Published via ***_* __ *_*** ”。

我见过几次，当您单击应用程序名称时，它会直接转到提供商的网站？（例如，如果我点击它，它会指向 www.mywebsite.com）

对于我的生活，我无法弄清楚他们是如何做到这一点的。在开发者应用中找不到设置。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:27:47.203

这只是通过 Facebook 页面或应用程序完成的。如果您创建 facebook 应用程序，并通过该应用程序发布内容，它将在底部自动显示“Published via ...”。

它所做的是将您重定向到应用程序页面（因此 FB 可以跟踪点击次数）然后它将自动重定向到应用程序设置中指定的网站 url 页面。

这是一个[教程](http://blog.mad4flash.com/2011/09/how-to-update-facebook-status-via-application/)

# sql-server - 在 SQL 查询中设计和登录

> ID：10385662
> 
> 赞同：0
> 
> 时间：2012-04-30T14:50:27.320
> 
> 标签：sql-server

我有一个新项目，只需要一些关于如何高效快速地完成它的建议。

我有一个大约 100,000 行的表格，大约有 50 到 60 个字段。它已编入索引并具有主键。在这种情况下，主键是条形码。

我必须创建一个遍历每一行的查询，并在每一步检查规则。

例如，第一条规则是检查主键的第 3 位是否为 0。所以代码明智的是`SUBSTRING(PkgBarcode, 3, 1) = 0`

如果此规则失败，我想打印一条消息。此外，无论这条规则是失败还是通过，我都想继续，因为规则不相互依赖，即它可能会失败规则 2，但通过规则 3 没关系。

我正在寻求最佳设计实践。仅使用带有打印消息或某种循环的 select 语句是否有效？你将如何快速有效地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:42:09.000

您不想“通过每一行”执行此操作，而是使用标准集合论。例如，您可以为需要运行的每个测试添加一个 BIT 列，然后运行查询以根据测试更新该位：

```
UPDATE tblMyTable
SET [IsThirdDigitZero] = 0
WHERE SUBSTRING(PkgBarcode, 3, 1) <> 0 
```

这使得在避免光标的同时拉出不符合特定测试的列表变得容易。

# android - 找不到 Google API 使用地图的 Maven 依赖项

> ID：10385664
> 
> 赞同：3
> 
> 时间：2012-04-30T14:50:35.903
> 
> 标签：android, google-maps, maven, dependencies, pom.xml

我正在尝试使用 maven 来管理我的依赖项和构建过程。我在查找 Google API 依赖项或地图依赖项时遇到问题。这很好用（没有地图 api）：

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>android</artifactId>
    <version>4.0.1.2</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T23:56:36.923

AFAIK，地图 jar 文件目前在任何在线 maven 存储库中都不可用。

使用 Android SDK Manager 下载所需的地图 jar 文件，然后手动将其安装到本地 maven 存储库：

```
mvn install:install-file -Dfile=your-artifact-1.0.jar \
    [-DgroupId=org.some.group] \
    [-DartifactId=your-artifact] \
    [-Dversion=1.0] \
    [-Dpackaging=jar] 
```

或者使用 Manfred 的[maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer)将所有 Android SDK jar 文件安装到本地 maven 存储库。

然后就可以在 pom.xml 中开始使用它了：

```
<dependency>
    <groupId>com.google.android.maps</groupId>
    <artifactId>maps</artifactId>
    <version>4_r2</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T21:51:30.947

您还可以使用此项目，它将 google api jar 安装到您的本地 maven 存储库中： [https ://github.com/mosabua/maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer)

要安装 4.0.3 版的 jar，您只需键入：

```
mvn install -P 4.0.3 
```

# vba - 通过 3rd 方软件（即 sas）通过 Outlook 2003 中的安全提示

> ID：10385667
> 
> 赞同：2
> 
> 时间：2012-04-30T14:50:45.110
> 
> 标签：vba, outlook, sas, outlook-2003

当我尝试通过第三方软件（即 SAS）发送电子邮件时，我正在尝试自动化 Outlook 中的安全提示。有哪些解决方案？我尝试了 VBA 解决方案，并将工具的安全性降低到低水平 - 宏设置但没有乐趣:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-28T18:41:52.053

见[http://www.outlookcode.com/article.aspx?id=52](http://www.outlookcode.com/article.aspx?id=52)

基本上你的选择是

1.  最新版本的 Outlook 以及最新的防病毒应用程序

2.  扩展 MAPI（C+ 或 Delphi）

3.  [救赎](http://www.dimastr.com/redemption/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T08:24:33.143

除了外部程序试图访问 Outlook 的第一条警告消息之外，您还可以毫不费力地保存消息草稿（至少使用 VBA）。我用它来生成我需要的任何电子邮件，然后在 Outlook 内部运行一个单独的宏来发送所有草稿。

或者，您可以使用 Outlook 宏与外部软件通信，并根据输出发送它自己的电子邮件。

# mysql - 使用两个（或更多）列的 COUNT

> ID：10385669
> 
> 赞同：1
> 
> 时间：2012-04-30T14:50:45.937
> 
> 标签：mysql, sql, count

是否可以根据两列的组合执行计数？

我有 3 张桌子：

学生： `Student id | Student name | Gender | Dob |`

班级登记：`Student id | Class id`

两列构成复合主键。

课程：`Class id | Class name | Class day`

我想计算每个班级中每种性别的学生人数。

到目前为止，我想出了这个查询：

```
SELECT class_name AS 'class Name',
  Child_gender AS 'Gender',
  COUNT(student_id) AS 'Count'
FROM student,classRegister,classes
WHERE student.student_id=classRegister.student_id AND
  classRegister.class_id=classes.class_id
GROUP BY class_name,student_gender
ORDER BY class_name; 
```

但它似乎给了我一些学生重复的结果。

那么，我可以修改此查询以计算 和 组合的实例数`student_id`吗`class_id`？

我对 MySQL 还是很陌生，所以如果这对每个人来说都是基本的，我很抱歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:00:48.537

试试这个：

```
SELECT c.class_name AS 'class Name', s.Child_gender AS 'Gender',
       COUNT(s.student_id) AS 'Count'
FROM student s
INNER JOIN classRegister cr ON s.student_id = cr.student_id 
INNER JOIN classes c ON cr.class_id = c.class_id
GROUP BY s.Child_gender, s.class_id, c.class_name
ORDER BY c.class_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:09:36.567

```
SELECT c.class_name AS 'class Name', s.Child_gender AS 'Gender',
       COUNT(DISTINCT s.student_id) AS 'Count'
FROM student s
INNER JOIN classRegister cr ON s.student_id = cr.student_id 
INNER JOIN classes c ON cr.class_id = c.class_id
GROUP BY c.class_name, s.Child_gender 
```

如果他们在 classRegister 中有多个注册，您可能会多次获得同一个学生。这听起来很恶心。COUNT 中的 DISTINCT 应​​确保每个班级只计算一次。

# jquery - 在 jQuery Mobile 中为任何带有图标的控件获取扩展字符

> ID：10385680
> 
> 赞同：3
> 
> 时间：2012-04-30T14:51:07.760
> 
> 标签：jquery, jquery-mobile

我曾经为这个应用程序处理过并修复过这个问题，但我不记得*究竟*是什么修复了它。我记得做的唯一一件事就是下载 jQuery、jQuery Mobile 等的新副本；但我又这样做了，但并没有解决问题。

![](../Images/ce52df308fa3e98999f669d0547e76f0.png)

这个字符“Â”出现在每个具有图标的控件上，例如带有“>”的列表视图，以及此处看到的按钮。

当 jQM 修改它时，该字符实际上被添加到页面的源代码中（参见 span 内容）：

```
<a data-icon="maps" id="maps-button" data-role="button" target="_blank" href="http://example.com/map/" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="a" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-icon-left ui-btn-up-a">
    <span class="ui-btn-inner ui-btn-corner-all">
        <span class="ui-btn-text">Maps</span>
        <span class="ui-icon ui-icon-maps ui-icon-shadow">Â </span>
    </span>
</a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T17:48:34.027

有关的：

*   [HTML 编码问题 - 显示“Â”字符而不是“ ”](https://stackoverflow.com/questions/1461907/html-encoding-issues-character-showing-up-instead-of-nbsp)

也许也添加这个元标记：`<meta charset="utf-8">`

# javascript - 检查数组中的值

> ID：10385681
> 
> 赞同：2
> 
> 时间：2012-04-30T14:51:11.793
> 
> 标签：javascript, arrays, for-loop, match

**我正在尝试使用PURE JAVASCRIPT**检查数组中的匹配项。我不知道该怎么做，我会感谢你的帮助。

```
var sites = new Array ("site1.com", "site2.com", "site3.com" ...);
// Sites array contains 100 values

var imgs = document.getElementsByTagName("img");
    for (var i = 0; i < imgs.length; i++) {
        img = imgs[i].src;

        // I'm trying to check if is in array, 
        // and don't waste a lot of size in code

        if(img.match(sites)){
            notHere(imgs[i]);
        }

        // This is the working way.
        // Even if location is a.site1.com/b/, it will match 
        if (img.match("site1.com")) {
            heReload(imgs[i]);
        }
        // Repeat this piece of code 100 times
    }
} 
```

**注意**：我不想检查确切的值。我想模拟这个`match()`函数，所以如果 img = "http://abc/d/" 并且在数组中是 "bc/"，它会执行`function()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:10:04.767

过滤器的好用例。

如果您想让它在“旧”浏览器上运行：

```
var nativeFilter = Array.prototype.filter;
_.filter = _.select = function(obj, iterator, context) {
    var results = [];
    if (obj == null) return results;
    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);
    each(obj, function(value, index, list) {
      if (iterator.call(context, value, index, list)) results[results.length] = value;
    });
    return results;
}; 
```

如果没有找到，它将返回一个空数组，否则，返回一个包含结果的数组

```
> [1,2,3,4].filter(function(item) { return item == 4 } );
[ 4 ] 
```

来源：[Underscore.js](http://documentcloud.github.com/underscore/docs/underscore.html)

所以现在您的代码将如下所示：

```
var sites = new Array ("site1.com", "site2.com", "site3.com" ...);
// Sites array contains 100 values

var imgs = document.getElementsByTagName( "img" );
for ( var i = 0; i < imgs.length; i++ ) {
    var img = imgs[ i ].src;
    var result = sites._filter( function( site ) {
        return img.match( site )
    });

    // result is an array of matching sites

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:14:00.310

您的“站点”变量应该是正则表达式而不是数组：

```
 var sites = /\b(site1\.com|site2\.com|etc|etc)\b/ 
```

之后：

```
 if (img.match(sites))
    ...... 
```

如果出于某种原因您更喜欢将“站点”保留在数组中，您还可以“即时”创建一个正则表达式：

```
var sites = ["site1.com", "site2.com", "site3.com"]
var sitesRegexp = new RegExp("\\b(" + sites.join("|").replace(".", "\\.") + ")\\b")

 ....

 if (img.match(sitesRegexp)
    ...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:18:14.303

您可以扩展 Array 原型，因此它支持所有浏览器...

尝试这个 ：

```
Array.prototype.myContains = function(obj) {
    var i = this.length;
    while (i--) {if (this[i] .indexOf(obj)>-1)  return true; }
    return false;
} 
```

用法 ：`var t=myArr.myContains(3);`

# jquery - ASMX Web 服务 - 客户端监听 CallBack url

> ID：10385683
> 
> 赞同：0
> 
> 时间：2012-04-30T14:51:15.340
> 
> 标签：jquery, web-services, callback, asmx, jquery-callback

我有一个 asmx Web 服务，我必须使用它，向他传递一个回调 url。Webservice 使用此 url 使一些 http 在查询字符串中传递一些参数以及我需要的一些信息（百分比、状态等）...

我可以使用网络服务，但我无法获得回调。

我正在使用 c# 来调用它，我想用 jQuery 收听服务回调......

# c# - 在 Windows 应用程序中实现 VLC 播放器：以编程方式注册 ActiveX 组件

> ID：10385686
> 
> 赞同：1
> 
> 时间：2012-04-30T14:51:30.813
> 
> 标签：c#, visual-studio-2010, registry, activex

我使用以下指南在我的 Windows 应用程序中实现 VLC 播放器：

[http://www.codeproject.com/Questions/163016/How-to-embed-VLC-control-in-c-net-windows-applic](http://www.codeproject.com/Questions/163016/How-to-embed-VLC-control-in-c-net-windows-applicat)

（查看评分最高的答案）

在指南的第 2 步中，它说我必须注册 ActiveX 组件：

```
regsvr32 "D:\Program Files\VideoLAN\VLC\axvlc.dll" 
```

我如何在软件中以编程方式执行此操作，以便用户不必这样做？我不确定如何在这里进行。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:16:03.487

请尝试此例程来注册您的 dll

```
 public static void RegisterDll(string filePath)
    {
        string fileinfo = String.Format(@"/s ""{0}""", filePath);
        Process process = new Process();
        process.StartInfo.FileName = "regsvr32.exe";
        process.StartInfo.Arguments = fileinfo;
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.CreateNoWindow = true;
        process.StartInfo.RedirectStandardOutput = true;
        process.Start();
        process.WaitForExit();
        process.Close();
    } 
```

# php - 具有大量复选框的表单不再适用于新服务器

> ID：10385687
> 
> 赞同：0
> 
> 时间：2012-04-30T14:51:33.353
> 
> 标签：php

我知道这个问题真的是开放式的。最近从一台服务器迁移到同一 Web 主机上的另一台服务器。旧服务器上的PHP版本是5.2.8，新服务器是5.2.17。一切正常，除了 2 页。它们在页面上都有大量的复选框来为产品选择不同的属性（200 个复选框+）。提交表单时，这些页面不再更新产品。没有错误，除了 mysql 数据库中的更新没有进行之外，一切似乎都正常工作。网站上的其他表格工作正常。

任何想法这可能是什么？我知道这里没什么可做的，但是任何从哪里开始的想法都会非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:25:01.493

错误是由于 PHP 中的 max_input_vars 设置为 1000 引起的。我不得不在 php.ini 中增加该数字，它解决了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:39:54.217

检查你`post_max_size`的 php.ini。可能是您超出了其中设置的限制。

[来自 php 手册](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)

> `post_max_size`
> 
> 设置允许的帖子数据的最大大小。此设置也会影响文件上传。要上传大文件，该值必须大于upload_max_filesize。如果您的配置脚本启用了内存限制，那么 memory_limit 也会影响文件上传。一般来说，memory_limit 应该大于 post_max_size。使用整数时，该值以字节为单位。也可以使用本常见问题解答中描述的速记符号。如果 post 数据的大小大于 post_max_size，则 $_POST 和 $_FILES 超全局变量为空。这可以通过多种方式进行跟踪，例如通过将$_GET 变量传递给处理数据的脚本，即，然后检查是否设置了$_GET['processed']。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:54:28.067

尝试在 php.ini 中增加 post_max_size 配置指令

# iphone - 如何从 Adob e Air 中 ApplicationStorageDirectory 中的 html 文件链接 IOS 主应用程序目录中的 javascript / css 文件

> ID：10385690
> 
> 赞同：1
> 
> 时间：2012-04-30T14:51:50.210
> 
> 标签：iphone, ios, ipad, air, adobe

我正在使用 Adob​​e Air for IOS 离线应用程序，我想从应用程序中实现下载更新（html 文件 + js、css）功能。这些文件将显示在 StageWebView 组件中。

由于 Apple 不允许将文件保存在安装目录中，因此我必须使用 ApplicationStorageDirectory 代替将文件下载到其中。

我希望那些下载的 html 文件链接到已经安装在主应用程序目录中的 .js / .css 文件（例如在 myApp.app 中）。

这样做的原因是我想尽可能减少下载（共享）文件的数量。这可能吗？

**编辑1：**

我需要的是以下内容：

在 ApplicationStorageDirectory (/Library/Application Support/) 内部：

```
 test.html 
```

我需要它链接到位于 ApplicationDirectory （安装目录）内的 css 文件，例如：

```
<link rel="stylesheet" href="**../../MyApp.app/**CSS/Templates.css" type="text/css" media="screen, mobile" title="main" charset="utf-8"> 
```

谢谢你。

**编辑2：**

我不得不将我需要的所有东西复制到另一个地方（应用程序存储目录）并从那里加载。

# c# - GDI+：计算与曲线的交点

> ID：10385691
> 
> 赞同：0
> 
> 时间：2012-04-30T14:51:54.340
> 
> 标签：c#, .net, gdi+

我有一个点对象数组并使用

```
graphics.Draw(pen, points); 
```

我知道需要以某种方式计算一条线与绘制曲线的交点。有没有办法用 GDI+ 做到这一点？我找不到函数或类。

谢谢，史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:57:54.467

GDI+ 不包含我知道的任何几何函数。它是一个纯渲染 API。您需要使用另一个库来处理所有几何处理，或者编写自己的此类函数。将一条线与另一条线相交相当简单。将一条线与多条线相交是一个微不足道的扩展（循环线）。如果您需要指向示例的指针，请告诉我。

# boolean - iTunes isRunning with NSTask

> ID：10385693
> 
> 赞同：0
> 
> 时间：2012-04-30T14:51:57.363
> 
> 标签：boolean, itunes, nstimer, nstask

所以我试图根据iTunes是否正在运行来做一个if。我需要这个，因为我的应用程序获取了曲目名称。这个曲目名称已经完成并且可以工作，但我不希望 iTunes 一直运行......

所以我决定尝试一个带有 setLaunchPath 实例的 NSTask 来检查 iTunes.app 是否正在运行。下面的代码是不言自明的，但由于某种原因，如果 iTunes 打开，它会一直打到我的 else。我每 5 秒通过一个 nstimer 在我的 awakeFromnib 中调用此方法。

```
-(IBAction)ifRunning:(id)pID; {
NSTask *task = [[NSTask alloc] init];
[task setLaunchPath:@"/Applications/iTunes.app/Contents/MacOS/iTunes"];
if ([task isRunning]==TRUE) {
    NSLog(@"iTunes is Running, hit if");
    NSString *track = ([self getCurrentTrack]);
    //getCurrentTrack another one of my methods

}

else if ([task isRunning] == FALSE) {
    NSLog(@"iTunes is not running, hit else if");\
    [trackName setTitle:(@"iTunes is Not Playing")];

}

else {
    NSLog(@"Hit else");
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T01:26:25.960

我用下面的代码弄清楚了。希望这篇文章有用！

```
-(IBAction)ifRunning:(id)pID; {
NSLog(@"Process check ");
NSWorkspace *ws = [NSWorkspace sharedWorkspace];
NSArray *runningAppDictionaries = [ws launchedApplications];
NSDictionary *aDictionary;

for (aDictionary in runningAppDictionaries)
{
    //  NSLog(@"Open App: %@", [aDictionary valueForKey:@"NSApplicationName"]);

    if ([[aDictionary valueForKey:@"NSApplicationName"] isEqualToString:@"iTunes"])
    {
        NSLog(@"iTunes is Is Running");
        [self getCurrentTrack:nil];
        break;
    }

    else {
        NSLog(@"iTunes is not running.");
    }
} 

} 
```

# file - 确定文件类型

> ID：10385695
> 
> 赞同：-1
> 
> 时间：2012-04-30T14:52:01.943
> 
> 标签：file

我设法从丢失的备份中恢复了一些文件，但没有扩展名。在“文本”编辑器中打开文件不会提供任何关于文件类型的提示。

我在[这里](http://cl.ly/1f3p241I2F1F363F2k3C)上传了一个文件。

如果有人可以帮助我，将不胜感激。

附言。我知道这不是一个真正的“编程问题”，但我想这是最好的提问地点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:59:56.893

`chardet`通过运行命令，这是一个没有信心的二进制文件：

```
$ chardet Recovered004
Recovered004: None (confidence: 0.00) 
```

`file`通过运行命令，这些不是标题中的魔术字符串：

```
$ file Recovered004
Recovered004: data 
```

它可以是任何未知的二进制格式数据。

# java - 在 Eclipse 上为我的 Chess 项目创建可运行的 jar 文件时出现奇怪的行为

> ID：10385696
> 
> 赞同：1
> 
> 时间：2012-04-30T14:52:07.353
> 
> 标签：java, eclipse, jar, export, nullpointerexception

正如主题所说，我已经创建了一个国际象棋游戏作为我的第一个 2D 游戏，但是当我尝试从中创建一个可运行的 jar 文件时，我得到了一个奇怪的行为，当我移动棋子时，游戏变得混乱并且没有任何效果。奇怪的是，在日食中，一切都运行良好。当它创建可运行的 jar 文件时，eclipse 给出了以下错误：

```
Resource is out of sync with the file system: '/Chess_Project/src/.DS_Store'. 
```

我什至不记得我的项目中有这样的文件，所以我猜它是隐藏文件或系统文件。然后我尝试使用 eclipse 将其导出为普通的 Jar 文件，然后通过终端（顺便说一下，我是 mac OSX lion 用户），但我在这两种方式上都失败了，并且遇到`NullPointerException`了更多错误。我已经阅读了一些关于清单文件的内容，并尝试自己编译我的代码，然后以我上面提到的每种方式导出。

我试图解决它一个星期左右，并在各种论坛上寻求帮助，但没有运气。

感谢 francis，我意识到问题可能来自我的代码本身。andrew 我的问题是**“为什么我在可运行的 jar 文件上得到一个奇怪的行为（这意味着事情没有像他们应该的那样工作），而当我在 eclipse 中运行它时，一切都很好？”** . 这是我的代码的主要类：

```
import java.awt.*;
import javax.swing.SwingUtilities;
import javax.swing.*;

public class MainWindowChess {

    /**
    *
    */
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                JFrame f = new JFrame("Chess");
                SwingUtilities.isEventDispatchThread();
                f.setLayout(new BorderLayout());
                f.setSize(40 * 8, 40 * 9 - 20);
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setResizable(false);
                Board b = new Board();
                f.add(b);
                f.setVisible(true);
                System.out.println("check");

            }
        });

    }
} 
```

顺便说一句，人们在这里回复如此之快真是令人惊讶，我很高兴看到这么多人希望帮助他人。

这是paintComponent方法：

```
protected void paintComponent(Graphics g) {
    super.paintComponents(g);

    if (boardDrawn == false) {
        for (int i = 0; i < 8; i++) {
            for (int j = 0; j < 8; j++) {
                g.drawImage(getRect(i, j), cors[i][j].getXCor(), cors[i][j].getYCor(), null);
            }
        }

        for (int i = 0; i < bp.length; i++) {
            bp[i].drawPiece(g, bp[i].getImage(), bp[i].getLocationX(), bp[i].getLocationY());
        }
        for (int i = 0; i < wp.length; i++) {
            wp[i].drawPiece(g, wp[i].getImage(), wp[i].getLocationX(), wp[i].getLocationY());
        }

        boardDrawn = true;
    } else if (boardDrawn == true) {

        if (tempPiece instanceof BlackPiece) {
            for (int i = 0; i < bp.length; i++) {

                //if the piece was found
                if (tempPiece == bp[i]) {

                    if (bp[i].isMoveAvailable(bp[i].getTypeID(), bp[i].getLocationX(), bp[i].getLocationY(), tempCor.
                            getXCor(), tempCor.getYCor())) {
                        killTime = true;
                        //if the rectangle which we want to draw the Piece on is not occupied by another Piece
                        if (isRectBlocked(bp[i].getTypeID(), oldCor.getXCor(), oldCor.getYCor(), tempCor.
                                getXCor(), tempCor.getYCor()) == false) {

                            g.drawImage(getCompatitableRect(oldCor.getXCor(), oldCor.getYCor()), oldCor.
                                    getXCor(), oldCor.getYCor(), null);
                            bp[i].drawPiece(g, bp[i].getImage(), tempCor.getXCor(), tempCor.getYCor());
                            bp[i].setX(tempCor.getXCor());
                            bp[i].setY(tempCor.getYCor());

                        } else if (canRectBeOccupied(bp[i], tempCor.getXCor(), tempCor.getYCor())
                                && isRectBlocked(bp[i].getTypeID(), oldCor.getXCor(), oldCor.getYCor(), tempCor.
                                getXCor(), tempCor.getYCor()) == false) {

                            g.drawImage(getCompatitableRect(oldCor.getXCor(), oldCor.getYCor()), oldCor.
                                    getXCor(), oldCor.getYCor(), null);
                            g.drawImage(getCompatitableRect(tempCor.getXCor(), tempCor.getYCor()), tempCor.
                                    getXCor(), tempCor.getYCor(), null);
                            bp[i].drawPiece(g, bp[i].getImage(), tempCor.getXCor(), tempCor.getYCor());
                            bp[i].setX(tempCor.getXCor());
                            bp[i].setY(tempCor.getYCor());
                        }
                    }
                }
            }
        }
        if (tempPiece instanceof WhitePiece) {
            for (int i = 0; i < wp.length; i++) {

                //if the piece was found
                if (tempPiece == wp[i]) {
                    if (wp[i].isMoveAvailable(wp[i].getTypeID(), wp[i].getLocationX(), wp[i].getLocationY(), tempCor.
                            getXCor(), tempCor.getYCor())) {
                        killTime = true;

                        if (isRectBlocked(wp[i].getTypeID(), oldCor.getXCor(), oldCor.getYCor(), tempCor.
                                getXCor(), tempCor.getYCor()) == false) {
                            System.out.println("");
                            g.drawImage(getCompatitableRect(oldCor.getXCor(), oldCor.getYCor()), oldCor.
                                    getXCor(), oldCor.getYCor(), null);
                            wp[i].drawPiece(g, wp[i].getImage(), tempCor.getXCor(), tempCor.getYCor());
                            wp[i].setX(tempCor.getXCor());
                            wp[i].setY(tempCor.getYCor());

                        } else if (canRectBeOccupied(wp[i], tempCor.getXCor(), tempCor.getYCor())
                                && isRectBlocked(wp[i].getTypeID(), oldCor.getXCor(), oldCor.getYCor(), tempCor.
                                getXCor(), tempCor.getYCor()) == false) {

                            g.drawImage(getCompatitableRect(oldCor.getXCor(), oldCor.getYCor()), oldCor.
                                    getXCor(), oldCor.getYCor(), null);
                            g.drawImage(getCompatitableRect(tempCor.getXCor(), tempCor.getYCor()), tempCor.
                                    getXCor(), tempCor.getYCor(), null);
                            wp[i].drawPiece(g, wp[i].getImage(), tempCor.getXCor(), tempCor.getYCor());
                            wp[i].setX(tempCor.getXCor());
                            wp[i].setY(tempCor.getYCor());
                        }
                    }
                }
            }
        }

        killTime = false;
        tempPiece = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T14:58:07.587

在包/项目资源管理器中，右键单击您的项目并选择“刷新”。在导出中，您应该能够将它从 Jar 文件中排除（因为它没有业务存在）。

这个 .DS_Store 文件是一个由 OS 自动创建的 Mac OS 文件，如果文件被删除，Eclipse 会报错，因此您需要确保您的工作空间已刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:57:28.743

.DS_Store（桌面服务商店）是由 Apple Inc. 的 Mac OS X 操作系统创建的隐藏文件，用于存储文件夹的自定义属性，例如图标的位置或背景图像的选择。

# html - 浏览器和应用程序中的颠倒文本

> ID：10385701
> 
> 赞同：-1
> 
> 时间：2012-04-30T14:52:25.680
> 
> 标签：html

看看[这个](https://serverfault.com/a/384423)问题的答案。反转文本是如何显示为文本的？换句话说，我期待它是一个图像。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T14:54:43.043

精心挑选的 Unicode 字符，注意碱基没有正确对齐

uɐɥʞ lǝǝɥɐɹ ollǝH

[http://www.upsidedowntext.com/](http://www.upsidedowntext.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:54:53.777

˙ʇuıodpuɐʇs ןɐɔıuɥɔǝʇ ɐ ɯoɹɟ ǝuop ʎןןɐnʇɔɐ sı sıɥʇ ʍoɥ ǝɹns ʇou ˙˙˙pǝsnɯ ɯ,ı

[http://www.fliptext.org/](http://www.fliptext.org/)

# web-services - Web 服务是按顺序处理还是并行处理？

> ID：10385703
> 
> 赞同：0
> 
> 时间：2012-04-30T14:52:30.537
> 
> 标签：web-services, lotus-notes, lotus-domino, lotusscript

我刚刚开始使用 Lotus Notes 进行 Web 服务。我想做的是创建一个生成序列号的 Web 服务。生成数字的代码基于我们在数据库中使用了一段时间的现有代码（只是直接的 Lotus 脚本，没有 Web 服务）。基本上有一个存储下一个号码的文档，下一个号码被返回并更新，以便检测到下一次调用保存冲突，如果保存号码时出现问题，则再次尝试该号码。

我想我可能会使用网络服务来生成号码。那么 Web 服务是顺序处理还是并行处理？因为如果他们是连续的，那么我就不需要处理两个试图同时保存号码的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:14:43.760

Web 服务是两个系统在没有共同语言的情况下相互通信的一种方式。

例如，连接到 .Net 服务器的 LotusScript 代理。

在 Domino 上创建 Web 服务提供者（服务器）时，您可以使用 LotusScript 或 Java 对其进行编码。然后，服务器为消费者（客户端）提供一个 WSDL 文件，以编写与该 Web 服务对话所需的代码。

本教程应该为您更好地解释它：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Creating_your_first_Web_Service_provider_and_consumer_in_LotusScript_and_Java。](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Creating_your_first_Web_Service_provider_and_consumer_in_LotusScript_and_Java.)

现在至于多米诺骨牌。Web 服务按照从服务器请求的顺序运行。但是，无法控制说“在 Web 服务 X 完成之前不要开始”。

您也可以将其编码到应用程序中，但除非您对此进行反击，否则其他用户会面临内存/性能问题死锁的严重风险。

Domino 服务器也可以设置为不并行运行 Web 服务/代理。但是你又冒着同样的问题的风险。

如果它是唯一 ID，那么您可以使用从 Web 服务创建的文档的 UNID。或者您可以通过评估使用@UNIQUE，但两者都只返回文本。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_UNIQUE.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_UNIQUE.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:33:13.953

来自 Lotus Designer 文档：

要在服务器上启用并发 Web 服务，您必须在该服务器上启用并发 Web 代理。打开要编辑的服务器文档。单击 Internet 协议 - Domino Web 引擎选项卡。启用同时运行 Web 代理。

并发 Web 服务调用的最大数量由“最大并发代理”设置确定。从 Lotus 管理文档：

最大并发代理数 指定允许同时运行的代理数。有效值为 1 到 10。默认值为 1（白天）和 2（夜间）。启用更多并发代理可以减轻负载很重的代理管理器，但也会减少可用于运行其他服务器任务的资源。

Lotus Notes Domino 版本 8.5.x

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:41:06.773

我原以为它们会默认按顺序运行，因为异步 Web 代理处于关闭状态，除非您将其打开。因此，尽管如果您只通过 Web 服务分配一个数字并且您没有更改异步设置，那么执行“安全”顺序编号是一个很好的设计模式，那么您会没事的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T13:37:16.877

我还要补充一点：

[使用文档锁定以确保顺序文档编号解决方案中的编号唯一性](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Employ_document_locking_to_assure_number_uniqueness)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T08:56:59.927

有一个简单的解决方案可以避免同步性考虑。

您应该使用 生成一个临时编号`@Unique`，然后使用计划代理按文档创建的顺序分配序列号，使用正确构成的视图仅选择未处理的文档。如果您不关心文档的创建顺序，而只关心所有编号都是唯一的，则不需要查看，您只需在未处理的文档上触发代理即可。

临时编号可以临时用作参考，直到分配了适当的序号。

当计划的代理运行时，它应该向作者发送带有正确参考号的确认。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T04:21:22.257

是的，Web 服务将并行运行。但是既然你写了你的代码处理保存冲突，你应该没有问题。
正如 2 个用户的标准注释调用一样：第一个获取文档，然后第二个获取文档并保存（快速两个），然后首先将获得保存冲突。总之，是的，它是并行的，但它不是问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-15T22:14:52.330

或者，您可以导出到 DXL 并获取标签的 sequence= 属性。不过，这仅在您访问数据库的单个实例时才有效。并且 DXL 导出/XML 导入是一个巨大的开销。

不幸的是，我看不到从 LotusScript NotesDocument 轻松获取注释序列号的方法。如果您有一个有效的支持合同，您可以为软件增强请求打开一个问题管理报告（IBM 的说法是“APAR”，尽管我不知道它的首字母缩写词扩展为什么）。

祝你好运！

# c++ - 第一次操作是否应该更快，如果是，那么为什么？

> ID：10385706
> 
> 赞同：4
> 
> 时间：2012-04-30T14:52:39.427
> 
> 标签：c++

第一个操作比第二个快吗？

```
 u+= (u << 3) + (u << 1) //first operation
  u+= u*10  //second operation 
```

基本上他们俩都做同样的事情，`u= u+(10*u)` 但我开始知道第一次操作比第二次快。操作 + 时的 cpu 时间是否与 * 不同。`Is multiplication by 10 actually equivalent to 10 addition operations being performed ?`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T14:54:31.830

这取决于底层 CPU 和编译器的能力。

任何体面的编译器都应该优化`u*10`到适当的位移操作，如果它认为它们会更快的话。它可能无法反其道而行之。`u*10`所以如果你的意思总是写`u*10`，除非你知道你正在使用一个糟糕的编译器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T14:54:44.510

使用***分析器***并观察生成的***机器代码***。

执行时间不太可能有任何差异，因为编译器可能会将两者优化为相同的机器代码。

我只是对 2 进行了快速配置文件测试，以断言我的主张。我制作了 2 个小型二进制文件（每个操作一个）并定时执行以处理 10e6 个整数值。两者都在我的机器上报告约 38 毫秒（使用 g++ 的 mac i7）。因此，可以安全地假设两者最终都以相同数量的操作结束。对于其他编译器/处理器组合，结果很可能是相同的。

. . . 如果两者都给出相同的性能使用：

```
u+= u*10  //second operation 
```

..只是因为它一目了然更容易理解。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T14:55:24.700

取决于编译器的翻译和处理器。一些处理器具有乘法单元，因此实际上乘法只需要一条指令。

到目前为止，第一个至少需要 3 条指令。

如有疑问，请提供个人资料。

# vb.net - 试图将数据从一个列表框复制到另一个表单上

> ID：10385711
> 
> 赞同：0
> 
> 时间：2012-04-30T14:52:49.127
> 
> 标签：vb.net

我在尝试使用多个表单将数据从一个列表框复制到另一个列表框时遇到问题，这是一个用于全局变量和数组的模块。此时它告诉我，当我选择并项目形成辅助列表框并尝试将其发送到我的主列表框时，它说我超出了数组的范围。我已经尝试过各种不同的方法，但还没有提出解决方案。我知道这可能是一些明显的事情，只是还没有击中我。

这就是我启动数组以填充辅助列表框的方式

```
Public mp3Albums() As String = {" Tres Hombres ZZ TOP ", " Fandango!   ZZ TOP ", " Soul Kiss Tom Duda ", " Instrumental Telepathy Tom Duda ", " Dark Side of the Moon  Pink Floyd ", " Seventh Sojourn  Moody Blues ", " In Search of the lost Chord  Moody Blues "} 
```

我的主窗体中的列表框称为 lstShoppingCart

这就是我填充和按钮单击操作以尝试将数据复制到我的主列表框的方式。忽略尝试复制第二组数据的调用，因为如果我不能只复制一个，那么我没有业务尝试复制 2 组的标题和价格。除非它比我想象的更简单

```
Dim frmMain As New MainForm
frmMain.lstShoppingCart.Items.Add("A" & lstVinylAlbum.SelectedIndex & ": " & lstVinylAlbum.SelectedItem.ToString) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:57:44.813

从一个代表列表框中项目的小类开始：

```
Public Class ListItem

    Private _key As String = String.Empty
    Private _value As String = String.Empty

    Public Sub New(ByVal key As String, ByVal value As String)

        _key = key
        _value = value

    End Sub

    Public ReadOnly Property Key() As String
        Get
            Return _key
        End Get
    End Property

    Public ReadOnly Property Value() As String
        Get
            Return _value
        End Get
    End Property

    ' Prevents the object type from displaying in the list box.
    Public Overrides Function ToString() As String

        Return _value

    End Function

End Class 
```

现在，让我们假设一个表单上有两个 ListBox 对象（lstLeft 和 lstRight），有两个按钮 - 一个用于向右移动项目，一个用于向左移动项目：

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        InitData()

    End Sub

    Private Sub InitData()

        With lstLeft.Items

            .Add(New ListItem("1", "Tres Hombres ZZ TOP"))
            .Add(New ListItem("2", "Fandango! ZZ TOP"))
            .Add(New ListItem("3", "Soul Kiss Tom Duda"))
            .Add(New ListItem("4", "Instrumental Telepathy Tom Duda"))

        End With

    End Sub

    Private Sub btnMoveRight_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnMoveRight.Click

        If lstLeft.SelectedItem IsNot Nothing Then

            Dim selectedItem As ListItem = DirectCast(lstLeft.SelectedItem, ListItem)

            lstRight.Items.Add(selectedItem)
            lstLeft.Items.Remove(selectedItem)

        End If

    End Sub

    Private Sub btnMoveLeft_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnMoveLeft.Click

        If lstRight.SelectedItem IsNot Nothing Then

            Dim selectedItem As ListItem = DirectCast(lstRight.SelectedItem, ListItem)

            lstLeft.Items.Add(selectedItem)
            lstRight.Items.Remove(selectedItem)

        End If

    End Sub

End Class 
```

这样做只是将所选 ListItem 对象的引用添加到“其他”ListBox，并从当前 ListBox 中删除对所选 ListItem 对象的引用。如果您想在两个单独的表单之间执行此操作，则每个表单都需要一个`Public Property AddToList(item As ListItem)`函数。首先，调用对面窗体上的函数以添加到该窗体的 ListBox，然后从当前窗体中删除 ListItem 对象。

# c# - 使用 XNA 访问 GPGPU 进行图像处理

> ID：10385716
> 
> 赞同：4
> 
> 时间：2012-04-30T14:53:01.457
> 
> 标签：c#, image-processing, xna, gpu, gpgpu

我正在用 C# 做一些实时图像处理项目，我想尽可能多地利用 GPU。

具体来说，我有几个`byte[]`包含原始位图数据，我需要对`byte[]`尽可能接近 30 fps 的那些（图像很小，不超过 640x480）

我知道还有其他 GPGPU 库（如[Cudafy](http://www.hybriddsp.com/Products/CUDAfyNET.aspx)、[GPU.net](http://www.tidepowerd.com/)和[Accelerator](http://research.microsoft.com/en-us/projects/Accelerator/)），但它们的 EULA 要么禁止“以盈利为目的”使用该库，要么您需要购买许可证。

目前没有用于许可证的资金，所以我正在尝试探索允许商业生产同时不花费任何成本的选项，而 XNA 似乎是我能找到的唯一符合这两个标准的选项。

有没有关于如何在非游戏环境中使用 XNA 访问 GPU 的资源？是否有任何其他选项可用于通过 C# 访问 GPU？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T19:09:19.233

作为这个库的作者，我是否可以建议[Brahma——它是](http://brahma.codeplex.com/)[CodePlex](http://brahma.codeplex.com/)上的一个开源、免费的商业用途库（在 Eclipse 公共许可下），并自动将 LINQ 翻译/运行为 OpenCL？

当然，如果您想使用 RAW OpenCL，我在 Codeplex 上还有一个 .NET 友好但原始 API 版本的 OpenCL [，](http://openclnet.codeplex.com/)并作为[Nuget 包](http://nuget.org/packages/OpenCL.Net)。

[在此处](http://brahma.codeplex.com/SourceControl/changeset/view/92609#1697260)查看Brahma 代码的示例（此代码用于 FFT）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:03:41.257

[我会通过Cloo](http://sourceforge.net/projects/cloo/)看看 OpenCL 。它是开源的，并在 MIT 许可下发布，这意味着您可以愉快地将其包含在专有包中。

OpenCL 比 CUDA 更灵活一点，因为内核可以在可用的系统上的 GPU、CPU 和（理论上）单元处理器上运行——想想运行 Mono+Linux+PS3，尽管我没有尝试过这种组合。

（GPU.NET 很好，因为它允许你用 C# 编写内核，但目前它们只能在 NVidia GPU 上运行。这对我来说是个大问题，因为我的开发笔记本电脑有 AMD 芯片组。）

OpenCL 内核是用 OpenCL 语言编写的，基本上是 C。它也受到 Intel、AMD 和 NVidia 的积极支持。

我将 Cloo/OpenCL+XNA 用于 FDTD（光学/波物理模拟）项目，效果很好。OpenCL 代码在 GPU 上的 3D 阵列上运行；我会定期将缓冲区复制回主机，以便在 XNA 代码中进行可视化。

可能有一种方法可以共享该数据而无需往返于 CPU，但我还没有找到它，并且出于可视化目的，至少在我的应用程序中，影响很小。

# django - 如何配置 django-auth-ldap 以使用多个 LDAP 服务器？

> ID：10385718
> 
> 赞同：3
> 
> 时间：2012-04-30T14:53:08.877
> 
> 标签：django, ldap, django-settings, django-auth-ldap

我一直在使用[django-auth-ldap](http://packages.python.org/django-auth-ldap/)对单个服务器进行身份验证（settings.py 中的 AUTH_LDAP_SERVER_URI）。最近我的组织发生了一些变化，我现在需要能够检查两个不同的 LDAP 服务器（实际上是：Active Directory，但我认为这不会在这里发挥作用）。不幸的是，没有一个位置可以包含我需要的所有用户信息。

有什么方法可以配置 django-auth-ldap 来检查超过 1 个服务器？该文档似乎假设一个服务器/URI。我也会接受 django-auth-ldap 之外的想法，但如果可能的话，我真的很想坚持下去，因为它让事情变得简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:31:59.753

您需要扩展自定义身份验证处理程序以获取服务器的可迭代项来检查并单步执行它们。

没有什么可以阻止您检查任意数量的目录以获取所需的信息 - 底层库没有限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T01:53:08.290

django-auth-ldap 1.1（刚刚发布）允许您轻松定义使用不同设置集合的身份验证后端的多个子类。请参阅[http://packages.python.org/django-auth-ldap/#multiple-ldap-configs](http://packages.python.org/django-auth-ldap/#multiple-ldap-configs)。

# c - 在头文件“未知类型”错误中使用结构

> ID：10385720
> 
> 赞同：15
> 
> 时间：2012-04-30T14:53:19.440
> 
> 标签：c, struct, header-files, kdevelop

我在 Kubuntu 中使用 Kdevelop。我在 datasetup.h 文件中声明了一个结构：

```
#ifndef A_H
#define A_H

struct georeg_val {

    int p;
    double h;
    double hfov;
    double vfov;
};

#endif 
```

现在当我在我的 main.c 文件中使用它时

```
int main()
{
    georeg_val gval;

    read_data(gval); //this is in a .cpp file

} 
```

我收到以下错误：

> georeg_chain.c:7:3：错误：未知类型名称“georeg_val”

（这是`georeg_val gval;`在行）

如果有人可以帮助我解决此错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-30T16:14:01.597

在 C 中，有两种声明结构的可能性：

```
struct STRUCT_NAME {} ; 
```

或者

```
typedef struct {} STRUCT_ALIAS; 
```

如果您使用第一种方法（给 struct 命名） - 您必须通过显式标记变量来定义变量`a struct`：

```
struct STRUCT_NAME myStruct; 
```

但是，如果您使用第二种方法（给 struct 一个别名），那么您可以省略`struct`标识符 - 编译器可以推断出变量的类型，只要它是`alias`：

```
STRUCT_ALIAS myStruct; 
```

加分项：您可以使用名称和别名声明结构：

```
typedef struct STRUCT_TAG {} STRUCT_TAG;
// here STRUCT_NAME == STRUCT_ALIAS 
```

然后在变量定义中，您可以使用第一种或第二种方法。为什么两个世界都好？结构别名使您可以使结构变量定义更短——这有时是一件好事。但是 struct name 让你制作`forward declarations`. 在某些情况下这是必不可少的工具 - 考虑您在结构之间有循环引用：

```
struct A {
  struct B * b;
}
struct B {
  struct A * a;
} 
```

除此之外，这种架构可能存在缺陷 - 当以第一种方式（使用名称）声明结构并且通过将结构指针标记为`struct`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T14:57:05.410

如果你必须定义一个新类型，你必须写：

```
typedef struct {

    int p;
    double h;
    double hfov;
    double vfov;
} georeg_val ; 
```

然后你可以使用 georeg_val 作为一个新类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-17T04:02:14.180

定义结构类型（在本例中为二叉搜索树结构）：

```
struct tree { 
  int info;
  struct tree *left;
  struct tree *right;
} 

typedef struct tree treeNode; 
```

声明一个函数，例如：

```
treeNode *insertElement(treeNode *treeA, int number); 
```

# asp.net-mvc - 现在完全不了解 MVC 的视图数据，需要一些认真的帮助和代码示例

> ID：10385723
> 
> 赞同：0
> 
> 时间：2012-04-30T14:53:26.710
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, telerik-mvc, viewdata

我真的需要在我的 MVC 应用程序中维护这个名为“filterParams”的字符串。用户输入一些搜索参数后，他单击提交，网格将重新绑定该参数。这很好用。我还将 filterParams 数据保存在 Javascript 变量中，因此当用户页面时，引发 OnDataBinding 事件时，过滤器也通过该 ajax 调用传递。这一切都很好，但是有一个大问题，因为当用户更新问题时，所有结果都会消失，因为它返回到视图并且那里没有任何数据。我使用 ViewData 的方式不起作用，我可以使用你的帮助，因为如果我可以将它存储在 ViewData 中并访问它，它将解决我的问题。**如何正确实现 ViewData 以在我的控制器中存储和检索字符串？**

以下是一些代码片段。

```
 [GridAction]
    public ActionResult GetAllQuestion(string filterParams)
    {
        var _filterParams = new List<string>();
        _filterParams.Add(filterParams);
        ViewData["filterParams"] = _filterParams;
            return View(new GridModel(QuestionManager.Instance.GetQuestion(filterParams)));
    }

 [GridAction]
    public ActionResult EditQuestion(int id, QuestionDTO pQuestion)
    {
        //   var _question = QuestionManager.Instance.GetQuestion(id,false).FirstOrDefault();
        // TryUpdateModel(_question);
        var _filterParams = (List<string>)ViewData["filterParams"];
        var filterParams = _filterParams[0]; 
        QuestionManager.Instance.UpdateQuestion(pQuestion);
       // return View(new GridModel(QuestionManager.Instance.GetQuestion(id, false)));
        return View(new GridModel(QuestionManager.Instance.GetQuestion(filterParams)));
    } 
```

在我的 aspx 页面中

```
Html.Telerik().Grid<QuestionDTO>()
.DataBinding(dataBinding => dataBinding.Ajax().Select("GetAllQuestion", "Question", new { filterParams = string.Empty }).Update("EditQuestion", "Question").Insert("CreateQuestion", "Question")) 
```

请问我怎样才能让它工作？帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:19:13.340

ViewBag/ViewData 仅适用于将数据从操作发送到视图。当对动作发出请求时，模型绑定器不会填充它，并且它的状态不会在请求之间保存，因为 ASP.net MVC 是完全无状态的。换句话说，ViewData 字典在请求开始时总是空的。

这意味着您的`EditQuestion`操作中的这一行将不起作用：

```
var _filterParams = (List<string>)ViewData["filterParams"]; 
```

`ViewData`为空，因此`_filterParams`将为空。

您必须像为操作所做的那样手动发送`filterParams`到操作。`EditQuestion``GetAllQuestions`

也许更好的选择只是`filterParams`在客户端使用临时 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:50:54.430

为什么不将数据存储在 Session 中？这是一个很好的解释示例 [http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T21:34:18.177

**因此，为了反驳我读过的关于该主题的所有错误信息，TempData 实际上确实通过控制器中的多个操作调用持续存在，并且能够用于实现我需要的功能。**

# c# - 如何获取android APK安装进度？

> ID：10385728
> 
> 赞同：0
> 
> 时间：2012-04-30T14:53:33.593
> 
> 标签：c#, android

我正在使用 Android 工具“adb.exe”将 apk 文件安装到 android 手机。代码是：`abd.exe install xxx.apk`

我想使用 C# progressBar 来显示安装进度。我怎样才能获得进展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:06:53.020

如果您从 C# 程序调用 adb.exe，您的选择是有限的，但您正在寻找的是可能的。如果您重定向流程的标准输出，您应该能够观察[Process.OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)事件并将 adb 的输出与进度条的值相关联。

# c# - 使用反射确定类关联

> ID：10385734
> 
> 赞同：0
> 
> 时间：2012-04-30T14:53:48.923
> 
> 标签：c#, uml, class-diagram, class-reference, class-relationship

我正在研究一种提取彼此之间的所有类关联的解决方案。如果我们在对象浏览器中单击一个类，我们可以看到该选项`Find All References`。我想要类似的东西来找到一个类与其他类的关联。我们如何使用 找到它们`Reflection`？

我有兴趣提取

1.  组成关系：
2.  聚合关系
3.  关联关系
4.  遗产

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:37:13.293

您可以使用`Reflection`来列出类的所有属性、字段和方法（以及更多）。您必须检查这些并确定它们的类型和参数列表。从命名空间中丢弃类型可能是个好主意`System`。

```
Type t = typeof(MyClass);

// Determine from which type a class inherits
Type baseType = t.BaseType;

// Determine which interfaces a class implements
Type[] interfaces = t.GetInterfaces();

// Get fields, properties and methods
const BindingFlags bindingFlags =
    BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic;
FieldInfo[] fields = t.GetFields(bindingFlags);
PropertyInfo[] properties = t.GetProperties(bindingFlags);
MethodInfo[] methods = t.GetMethods(bindingFlags);

foreach (var method in methods) {
    // Get method parameters
    ParameterInfo[] parameters = method.GetParameters();
} 
```

Intellisense 将（几乎）告诉您`FieldInfo`、`PropertyInfo`和`MethodInfo`的所有秘密`ParameterInfo`。您还可以考虑检查类、事件等的通用参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:49:06.157

您需要解析生成的 IL 代码，最好了解它们的工作原理。[您可以通过调用MethodBase.GetMethodBody](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getmethodbody.aspx)后跟[MethodBody.GetILAsByteArray](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody.getilasbytearray.aspx)来检索 IL 代码。

您需要根据[OpCodes](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.aspx)枚举解析每个字节。您还需要处理所有操作码数据，例如偏移量和令牌，因为您不应该将它们解析为实际操作码。以[OpCodes.Ldstr](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldstr.aspx)操作码为例；它由 0x72 后跟一个令牌组成。这个标记是四个字节，应该被解析为一个 Int32，并且可以使用 [Module.ResolveString](http://msdn.microsoft.com/en-us/library/system.reflection.module.resolvestring.aspx)来解析（因为你知道 ldstr 有一个字符串标记）。您可以从[Assembly.AssemblyManifestModule获取](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.manifestmodule.aspx)[Module](http://msdn.microsoft.com/en-us/library/system.reflection.module.aspx)实例。

# java - 具有优先级设置的线程

> ID：10385736
> 
> 赞同：3
> 
> 时间：2012-04-30T14:53:54.867
> 
> 标签：java, multithreading, thread-priority

我刚刚制作了一个包含主线程在内的三个线程的倒计时应用程序。我将 CountdownEven 设置为低，以便 countdownOdd 将首先显示，但在输出中没有发生任何事情。任何人都可以看到问题吗？

```
//Main
public class CountdownApp 
{

    public static void main(String[] args) 
    {
    new CountdownApp().start();

    }
    public void start()
    {
        Thread count1 = new CountdownEven();
        Thread count2 = new CountdownOdd();
        count1.setPriority(Thread.MIN_PRIORITY);
        count2.setPriority(Thread.MAX_PRIORITY);
        count1.start();
        count2.start();
    }

}

public class CountdownEven extends Thread
{
    public void run()
    {
        for(int i = 10; i > 0; i-=2)
        {
            System.out.println(this.getName()+ " Count: " +i);
            Thread.yield();//This is to allow the other thread to run.
    }
    }

}

public class CountdownOdd extends Thread
{
    public void run()
    {
        for(int i = 9; i > 0; i-=2)
        {
            System.out.println(this.getName()+ " Count: " +i);
            Thread.yield();//This is to allow the other thread to run.
    }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:02:00.323

我试过你的代码，它确实产生了一个输出。

```
Thread-0 Count: 10
Thread-0 Count: 8
Thread-0 Count: 6
Thread-0 Count: 4
Thread-0 Count: 2
Thread-1 Count: 9
Thread-1 Count: 7
Thread-1 Count: 5
Thread-1 Count: 3
Thread-1 Count: 1 
```

正是输出应该是......所以你的问题是什么？也许您只需要在 Eclipse 中打开一个新的控制台小部件/选项卡，或者您有任何活动过滤器？

但恕我直言，我不会为此目的使用 Threadpriorities，请参阅 [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html)

# opengl - 使用 VBO 的纹理绑定无法正常工作

> ID：10385739
> 
> 赞同：6
> 
> 时间：2012-04-30T14:54:02.207
> 
> 标签：opengl, binding, textures, vbo

我的程序的目的是显示 2 个具有 2 个不同纹理的四边形。问题是加载的最旧纹理设置在两个四边形（仅 texQuadB）上。我试图用 texQuadA 和 texQuadB 替换 buf[3] 的两个调用，但它不起作用。我找不到将纹理与特定 VBO 绑定的正确方法。

```
#define OFFSET_BUFFER(bytes) ((GLfloat *)NULL + bytes)

GLfloat verticesQuadA[12] =
{
    -1.0f, 0.0f, 1.0f,
    -1.0f, 1.0f, 1.0f,
    0.0f, 1.0f, 1.0f,
    0.0f, 0.0f, 1.0f,
};

GLfloat verticesQuadB[12] =
{
    0.0f, 0.0f, 1.0f,
    0.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 0.0f, 1.0f,
};

GLfloat colors[12] =
{
    1.0f, 0.0f, 0.0f,
    0.0f, 1.0f, 0.0f,
    0.0f, 0.0f, 1.0f,
    1.0f, 0.0f, 1.0f,
};

GLfloat texture[8] =
{
    0.0f, 0.0f,
    1.0f, 0.0f,
    1.0f, 1.0f,
    0.0f, 1.0f
};

int main(int argc, char *argv[])
{
    SDL_Init(SDL_INIT_VIDEO);
    SDL_WM_SetCaption("Texture Mapping",NULL);
    SDL_SetVideoMode(500, 500, 32, SDL_OPENGL);

    bool continuer = true;
    SDL_Event event;
    GLuint  buf[4];
    GLuint texQuadA, texQuadB;

    glClearDepth(1.0f);
    glClearColor(0.1f, 0.1f, 0.1f, 0.1f);
    glEnable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(70.0f, (float)500.0f / (float)500.0f, 1.0f, 3000.0f);
    glewInit();

    texQuadA = loadTexture("caisse.jpg");
    texQuadB = loadTexture("metal.jpg");

    //glBindTexture(GL_TEXTURE_2D, texQuadA);
    //glBindTexture(GL_TEXTURE_2D, texQuadB);

    glGenBuffers(4, buf);

    glBindBuffer(GL_ARRAY_BUFFER, buf[0]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(verticesQuadA), verticesQuadA, GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, buf[1]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(verticesQuadB), verticesQuadB, GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, buf[2]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(colors), colors, GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, buf[3]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(texture), texture, GL_STATIC_DRAW);

    while (continuer)
    {
        SDL_WaitEvent(&event);
        switch(event.type)
        {
            case SDL_QUIT:
                continuer = false;
        }

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glEnable(GL_TEXTURE_2D);

        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();

        gluLookAt(0.0f, 0.0f, 3.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f);

        //Draw Quad A ---------------------------------------

        glBindBuffer(GL_ARRAY_BUFFER, buf[0]);
        glVertexPointer(3, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glBindBuffer(GL_ARRAY_BUFFER, buf[2]);
        glColorPointer(3, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glBindBuffer(GL_ARRAY_BUFFER, buf[3]);
        glTexCoordPointer(2, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glEnableClientState(GL_VERTEX_ARRAY);
        glEnableClientState(GL_COLOR_ARRAY);
        glEnableClientState(GL_TEXTURE_COORD_ARRAY);

        glDrawArrays(GL_QUADS, 0, 4);

        glDisableClientState(GL_TEXTURE_COORD_ARRAY);   
        glDisableClientState(GL_COLOR_ARRAY);
        glDisableClientState(GL_VERTEX_ARRAY);

        //Draw Quad B ---------------------------------------

        glBindBuffer(GL_ARRAY_BUFFER, buf[1]);
        glVertexPointer(3, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glBindBuffer(GL_ARRAY_BUFFER, buf[2]);
        glColorPointer(3, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glBindBuffer(GL_ARRAY_BUFFER, buf[3]);
        glTexCoordPointer(2, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glEnableClientState(GL_VERTEX_ARRAY);
        glEnableClientState(GL_COLOR_ARRAY);
        glEnableClientState(GL_TEXTURE_COORD_ARRAY);

        glDrawArrays(GL_QUADS, 0, 4);

        glDisableClientState(GL_TEXTURE_COORD_ARRAY);   
        glDisableClientState(GL_COLOR_ARRAY);
        glDisableClientState(GL_VERTEX_ARRAY);

        //----------------------------------------------------

        glFlush();
        SDL_GL_SwapBuffers();
    }
    glDeleteBuffers(3, buf);
    glDisable(GL_TEXTURE_2D);
    SDL_Quit();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T15:05:12.567

OpenGL是一个状态机。绑定纹理是设置该状态的一部分。启用纹理后，OpenGL 将在绘制几何图形时使用当前纹理状态（您绑定的最后一个纹理）。在绘制 Quad A 之前，绑定 texQuadA。在绘制 Quad B 之前，绑定 texQuadB：

```
glBindTexture(GL_TEXTURE_2D, texQuadA);
// Draw Quad A

glBindTexture(GL_TEXTURE_2D, texQuadB);
// Draw Quad B 
```

在这种情况下，VBO 是不相关的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:07:02.403

VBO 与纹理对象没有交互。绑定 VBO 不会将其与纹理相关联。

要选择要用于绘图的纹理，请在使用它执行绘图命令之前调用 glBindTexture。

# c# - 将 pdf 页面转换为 1000 多个图像

> ID：10385742
> 
> 赞同：2
> 
> 时间：2012-04-30T14:54:15.690
> 
> 标签：c#, asp.net, multithreading, pdf

我可以将 pdf 页面转换为图像。如果它少于 50 页，它的工作速度很快……如果任何 pdf 大于 1000 页……它需要大量时间来完成。任何人都可以查看此代码并使其适用于大文件...我在 .NET3.5 中使用了 PdfLibNet dll（在 4.0 中不起作用）这是我的示例代码：

```
public void ConverIMG(string filename)
    {          
        PDFWrapper wrapper = new PDFWrapper();
        wrapper.RenderDPI = Dpi;
        wrapper.LoadPDF(filename);
        int count = wrapper.PageCount;
        for (int i = 1; i <= wrapper.PageCount; i++)
        {
            string fileName = AppDomain.CurrentDomain.BaseDirectory + @"IMG\" + i.ToString() + ".png";
            wrapper.ExportJpg(fileName, i, i, (double)100, 100);
            while (wrapper.IsJpgBusy)
            {
                Thread.Sleep(50);
            }
        }
        wrapper.Dispose();            
    } 
```

PS：我们需要拆分页面并并行转换为图像，我们需要获得完成状态。 ![页数和时间消耗](../Images/163eef386f7ea041bee727bd15157bc4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:16:54.800

如果`PDFWrapper`大于 50 页的文档性能下降，则表明它写得不是很好。为了克服这个问题，您可以在 50 页批次中进行转换，并`PDFWrapper`在每批次之后重新创建。假设`ExportJpg()`随着调用次数的增加而变慢，并且其初始速度不取决于 PDF 的大小。

这只是解决明显问题的一种解决方法，`PDFWrapper`正确的解决方案是使用固定库。另外，我建议`Thread.Sleep(1)`您是否真的需要等待屈服。

```
public void ConverIMG(string filename)
{
    PDFWrapper wrapper = new PDFWrapper();
    wrapper.RenderDPI = Dpi;
    wrapper.LoadPDF(filename);
    int count = wrapper.PageCount;
    for (int i = 1; i <= count; i++)
    {
        string fileName = AppDomain.CurrentDomain.BaseDirectory + @"IMG\" + i.ToString() + ".png";
        wrapper.ExportJpg(fileName, i, i, (double) 100, 100);
        while (wrapper.IsJpgBusy)
        {
            Thread.Sleep(1);
        }

        if (i % 50 == 0)
        {
            wrapper.Dispose();
            wrapper = new PDFWrapper();
            wrapper.RenderDPI = Dpi;
            wrapper.LoadPDF(filename);
        }
    }
    wrapper.Dispose();
} 
```

# xml - 在使用 Excel 创建的 XML 中创建打开的关闭分隔符

> ID：10385743
> 
> 赞同：2
> 
> 时间：2012-04-30T14:54:15.940
> 
> 标签：xml, excel

我正在从 excel 导出一个 XML 文件，对于空元素，excel 创建如下字段：

```
<my_empty_element/> 
```

但是，我的应用程序需要它是这样的：

```
<my_empty_element></my_empty_element> 
```

有没有办法让 excel 做到这一点，我试图避免在 XMl 文件上搜索/替换文本等变通方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:32:18.987

*为什么*您的应用程序需要这样？

与其修复 Excel 的正确行为，为什么不修复不理解唯一标签的应用程序呢？

# jquery-ui - 可拖动的容器滚动移动到左侧或顶部

> ID：10385745
> 
> 赞同：3
> 
> 时间：2012-04-30T14:54:23.200
> 
> 标签：jquery-ui, scroll, jquery-ui-draggable

当可拖动对象被拖动到其边界之外时，是否有一种使容器 div 向左和向上扩展的好方法？

当您向右或向下拖动时，容器 div 会正确扩展，并且会根据需要显示滚动条。然而，移动到左侧或顶部意味着可拖动项目的顶部/左侧位置为负，因此容器不会展开。

这是一个演示现有拖动行为的小提琴：http: [//jsfiddle.net/NPC42/Un23w/1/](http://jsfiddle.net/NPC42/Un23w/1/)，但这也可以在官方 jQueryUI 演示中看到（http://jqueryui.com/demos/draggable/ ＃默认）。

我也希望能够扩展到顶部/左侧:)

蛮力方法是：

1.  将容器 div 上的所有对象位置重置为不需要负的顶部/左侧（包括被拖动的对象）。
2.  更改滚动位置，使其看起来好像对象仍在其位置上。

但是对于容器中的许多对象，这可能会导致很多闪烁，甚至减速，所以我真的不想朝那个方向前进。欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:45:28.710

问题是每个 html 元素在左上角都有一个绝对 (0,0) 原点坐标。当您沿该方向拖动时，可拖动对象的坐标变为负数。但是滚动条不能变成负数，它们的大小只能向正方向增长。

我可以想象一个自定义滚动条小部件，当您拖动到 (0,0) 以下时，它可以向负方向调整。还可以尝试将一个容器放在另一个容器内，让内部的容器四处移动，这样就不必单独移动其中的所有对象。我不知道任何存在，因为有一个负滚动偏移会有点奇怪。

# z3 - 如果注释中间 `(check-sat)` 调用，为什么查询结果会发生变化？

> ID：10385746
> 
> 赞同：4
> 
> 时间：2012-04-30T14:54:27.337
> 
> 标签：z3, smt

在调试 UNSAT 查询时，我注意到查询状态有一个有趣的差异。查询结构为：

```
assert(...)
(push)      ; commenting any of these two calls
(check-sat) ; makes the whole query UNSAT, otherwise it is SAT

assert(...)
(check-sat) ; SAT or UNSAT depending on existence of previous call
(exit) 
```

查询中没有`pop`调用。触发此行为的查询[在此处](http://dl.dropbox.com/u/444947/blinking_query.smt2)。

想法为什么？

注意：我实际上并不需要增量，它仅用于调试目的。Z3版本是3.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:31:12.150

这是量词推理引擎之一中的错误。这个错误将被修复。同时，您可以通过使用数据类型而不是未解释的排序 + 基数约束来避免该错误。也就是说，您声明`Q`and`T`为：

> （声明数据类型（）（（Q q_accept_S13 q_T0_init q_accept_S7 q_accept_S6 q_accept_S5 q_accept_S4 q_T0_S3 q_accept_S12 q_accept_S10 q_accept_S9 q_accept_all）））
> 
> （声明数据类型（）（（T t_0 t_1 t_2 t_3 t_4 t_5 t_6 t_7）））

上面的声明本质上定义了两种“枚举”类型。通过这些声明，您将获得第二个查询的一致答案。

# ios - 像 UIPopoverController 中的方式一样关闭自定义 UIView

> ID：10385755
> 
> 赞同：0
> 
> 时间：2012-04-30T14:54:43.230
> 
> 标签：ios, uiview, uipopovercontroller

我正在构建一个类似于 UIPopover 视图的自定义 UIView，只需将 UIView 类子类化并在其中构建控件和事件的内容.. 为了显示这个视图，我通过这样的子类数据源分配 superView

```
 if ([dataSource respondsToSelector:@selector(containerView)]) 
        superView = [dataSource containerView]; 
```

为了展示它，我有一个这样的功能

```
- (void) showPopOverFromRect : (CGRect) rect
{
    CGSize popSize = self.frame.size;

    float yPoint;

    if(ntPopOverDirection == NTPopOverArrowDirectionUP)
        yPoint = rect.origin.y + 10;
    else
        yPoint = rect.origin.y - 10;

    self.frame = CGRectMake(rect.origin.x - popSize.width, yPoint , popSize.width, popSize.height);

    [superView addSubview:self];
} 
```

所以我的问题..如果用户像 UIPopOverController 一样点击 superView 上的 AnyWhere ，我怎么能关闭这个视图（删除它）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:16:22.420

我建议您创建自定义 UIView 以使用清晰的背景或径向渐变填充整个超级视图或整个屏幕。然后在其中放置另一个具有弹出框外观的 UIView。

这消除了尝试捕获点击和从其他视图发送通知的问题。它将是自包含的。

您可以轻松地在自定义视图中添加手势识别器，以在用户触摸空白区域时关闭视图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T15:06:10.667

您可以在新的 UIView 下方放置一个 UIButton ，这很清楚。当按下这个新按钮时，它会关闭您的视图并将自己从超级视图中移除。

就像是：

```
- (void) showPopOverFromRect : (CGRect) rect
{
    CGSize popSize = self.frame.size;

    float yPoint;

    if(ntPopOverDirection == NTPopOverArrowDirectionUP)
        yPoint = rect.origin.y + 10;
    else
        yPoint = rect.origin.y - 10;

    self.frame = CGRectMake(rect.origin.x - popSize.width, yPoint , popSize.width, popSize.height);

    UIButton *dismissButton = [UIButton buttonWithType:UIButtonTypeCustom];
    dismissButton.backgroundColor = [UIColor clearColor];
    dismissButton.frame = [[UIScreen mainScreen] bounds];
    [dismissButton addTarget:self.delegate action:@selector(dismissPopover) forControlEvents:UIControlEventTouchUpInside];
    [superview addSubview:dismissButton];

    [superView addSubview:self];
} 
```

不过，您必须设置视图以将其超级视图设置为接收消息以关闭弹出框的委托。

# regex - 未正确设置分组构造后的正则表达式？

> ID：10385759
> 
> 赞同：1
> 
> 时间：2012-04-30T14:54:56.087
> 
> 标签：regex, nant

基于[这个](https://stackoverflow.com/questions/6829412/how-to-change-one-line-in-a-file-using-nant)线程。我试图在我的 NAnt 脚本中替换设置我项目的当前版本。

这是我的替换片段

```
<target name="Replace">
    <loadfile file="${SetVersionCpp.File}" property="h.file.content" />
    <regex
      input="${h.file.content}"
      pattern="(?'BEFORE'[.\s]*)${LineBegining}\s*[\s\d,]*\r\n(?'AFTER'[.\s]*)" />
    <echo
      file="${SetVersionCpp.File}"
      message="${BEFORE}${LineBegining} ${ReplaceWith}
      ${AFTER}"
      append="false"
      verbose="true" />
</target> 
```

我在这个文件上调用

```
#define FILEVER 0, 2, 0, 3
#define PRODUCTVER 0, 2, 0, 3
#define STRFILEVER     "00.02.00.03\0"
#define STRPRODUCTVER  "00.02.00.03\0" 
```

具有以下参数

```
<property name="SetVersionCpp.File" value="${baseline.dir}\VersionNo.h" />
<property name="LineBegining" value="#define FILEVER" />
<property name="ReplaceWith" value="${FileVersion}" /> 
```

根据输出，AFTER 变量由于某种原因没有捕获文件的其余部分。这就是我得到的：

```
[#define FILEVER 0, 2, 0, 30

] 
```

*我把它放在括号中，这样空格的格式就正确了

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:28:46.000

我已经通过设置`options`来修复它，`Singleline`以便`.`匹配换行符并从组中删除类：

```
<regex
  input="${h.file.content}"
  options="Singleline"
  pattern="(?'BEFORE'.*)${LineBegining}\s*[\s\d,]*\r\n(?'AFTER'.*)" /> 
```

# javascript - 如何调整浏览器窗口的大小以使内部宽度为特定值

> ID：10385768
> 
> 赞同：22
> 
> 时间：2012-04-30T14:55:28.723
> 
> 标签：javascript, browser, popup, resize

如果你只是来告诉我为什么调整窗口大小是个坏主意、令人讨厌，并且在网络上相当于粉笔板上的钉子，那么请走开。我正在寻找解决方案而不是讲座。这仅用于 Intranet 设置。具体来说，调试并演示响应式设计的网站（使用媒体查询进行扩展的网站），以供客户通过网络会议进行审查。我想演示特定的断点。这不是向公众释放的。

**我已经知道的事情：**

1.  您只能调整通过 javascript 打开的窗口的大小和位置，而不能由用户调整。（除非他们调整他们的安全设置，这不是一个选项）
2.  当您使用窗口的 resizeTo() 方法时，浏览器会调整到指定的尺寸。视口通常要小得多（平均小 30 到 100 个像素）但是，我想将视口调整为特定大小。
3.  浏览器、浏览器版本、平台、一些插件以及各种菜单和工具栏将改变视口的尺寸。更多的菜单和工具栏意味着视口宽度更小。

**可能的解决方案：**

1.  查找浏览器的宽度和高度
2.  查找视口的宽度和高度
3.  确定两者的区别。
4.  相应地调整我对 resizeTo() 的调用中的值

我需要第 1 步的帮助。我能弄清楚的其他一切。如果有帮助的话，我也在使用 jQuery 和 Modernizer。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-08T14:41:50.103

这篇文章已经很老了，但这里有一个供未来读者使用的具体实现：

```
var resizeViewPort = function(width, height) {
    if (window.outerWidth) {
        window.resizeTo(
            width + (window.outerWidth - window.innerWidth),
            height + (window.outerHeight - window.innerHeight)
        );
    } else {
        window.resizeTo(500, 500);
        window.resizeTo(
            width + (500 - document.body.offsetWidth),
            height + (500 - document.body.offsetHeight)
        );
    }
}; 
```

如果你想考虑滚动条：

```
var resizeViewPort = function(width, height) {
    var tmp = document.documentElement.style.overflow;
    document.documentElement.style.overflow = "scroll";

    if (window.outerWidth) {
        window.resizeTo(
            width + (window.outerWidth - document.documentElement.clientWidth),
            height + (window.outerHeight - document.documentElement.clientHeight)
        );
    } else {
        window.resizeTo(500, 500);
        window.resizeTo(
            width + (500 - document.documentElement.clientWidth),
            height + (500 - document.documentElement.clientHeight)
        );
    }

    document.documentElement.style.overflow = tmp;
}; 
```

玩得开心...

# android - ASP.Net MVC HttpContext.User.Identity 迷路了

> ID：10385769
> 
> 赞同：1
> 
> 时间：2012-04-30T14:55:30.483
> 
> 标签：android, asp.net-mvc, authentication, google-chrome, forms-authentication

我有一个非常奇怪的场景，我被困住了。我有一个 ASP.Net MVC 4 应用程序，我在其中对用户进行身份验证并创建一个 authCookie 并将其添加到响应的 cookie 中，然后将它们重定向到目标页面：

```
 if (ModelState.IsValid)
            {
                var userAuthenticated = UserInfo.AuthenticateUser(model.UserName, model.Password);

                if (userAuthenticated)
                {
                    var userInfo = UserInfo.FindByUserName(model.UserName);

                    //SERIALIZE AUTHENTICATED USER
                    var serializer = new JavaScriptSerializer();
                    var serializedUser = serializer.Serialize(userInfo);
                    var ticket = new FormsAuthenticationTicket(1, model.UserName, DateTime.Now, DateTime.Now.AddMinutes(30), false, serializedUser);
                    var hash = FormsAuthentication.Encrypt(ticket);
                    var authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, hash) {Expires = ticket.Expiration};

                    Response.Cookies.Add(authCookie);

                    if (Url.IsLocalUrl(model.ReturnUrl) && model.ReturnUrl.Length > 1 && model.ReturnUrl.StartsWith("/") && !model.ReturnUrl.StartsWith("//") && !model.ReturnUrl.StartsWith("/\\"))
                    {
                        return Redirect(model.ReturnUrl);
                    }

                    var url = Url.Action("Index", "Course");
                    return Redirect(url);
                }

                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            } 
```

这在所有浏览器中都可以正常工作。我可以登录并访问我的应用程序中的安全页面。

我的客户正在请求此应用程序的 android 版本。所以，我想弄清楚如何将此应用程序转换为 APK 文件。我的第一次尝试是创建一个简单的 index.html 页面，其中包含一个以应用程序为目标的 iframe。这在 Firefox 和 IE 9 中运行良好。但是，当通过 Chrome 访问包含指向应用程序的 iframe 的 index.html 页面时，我通过了上面的登录代码，用户被重定向到安全控制器，但是安全控制器有一个自定义属性来确保用户通过身份验证：

```
public class RequiresAuthenticationAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (filterContext.HttpContext.User.Identity.IsAuthenticated) return;
            if (filterContext.HttpContext.Request.Url == null) return;

            var returnUrl = filterContext.HttpContext.Request.Url.AbsolutePath;

            if (!filterContext.HttpContext.Request.Browser.IsMobileDevice)
            {
                filterContext.HttpContext.Response.Redirect(FormsAuthentication.LoginUrl + string.Format("?ReturnUrl={0}", returnUrl), true);
            }
            else
            {
                filterContext.HttpContext.Response.Redirect("/Home/Home", true);
            }           
        }
    } 
```

我的应用程序失败：filterContext.HttpContext.User.Identity.IsAuthenticated。IsAuthenticated 始终为 false，即使用户已在上面的代码中进行了身份验证。

请记住，这只发生在通过 Chrome 中的 iframe 访问应用程序时。如果我直接访问应用程序而不是通过 iframe，那么一切正常。

有任何想法吗？

**更新：**

我的控制器扩展了 SecureController。在 SecureController 的构造函数中，我有反序列化用户的代码：

```
public SecureController()
        {
            var context = new HttpContextWrapper(System.Web.HttpContext.Current);

            if (context.Request.Cookies[FormsAuthentication.FormsCookieName] != null)
            {
                var serializer = new JavaScriptSerializer();
                var cookie = context.Request.Cookies[FormsAuthentication.FormsCookieName].Value;
                var ticket = FormsAuthentication.Decrypt(cookie);
                CurrentUser = serializer.Deserialize<UserInfo>(ticket.UserData);
            }
            else
            {
                CurrentUser = new UserInfo();
            }

            //if ajax request and session has expired, then force re-login
            if (context.Request.IsAjaxRequest() && context.Request.IsAuthenticated == false)
            {
                context.Response.Clear();
                context.Response.StatusCode = 401;
                context.Response.Flush();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:12:19.353

首先，您应该派生自 AuthorizeAttribute，而不是 ActionFilterAttribute。授权属性在管道的更高级别调用方法之前执行，而 ActionFilters 执行得更远，其他属性可以在您之前执行。

其次，您没有显示用于解密票证并设置 IPrincipal 和 IIdentity 的代码。既然这就是问题所在，奇怪的是你没有包括它。

# javascript - 如何使用正则表达式检查三个字符的长度

> ID：10385770
> 
> 赞同：-2
> 
> 时间：2012-04-30T14:55:31.813
> 
> 标签：javascript, regex

```
[RegularExpression(@"^.{3}$", ErrorMessage="Code should be Only three Chracter Length!")] 
```

代码需要支持所有字母字符。我需要检查我的字符串长度应该是三个字母字符，但这对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:57:28.087

对于恰好 3 个字母字符的 Javascript 正则表达式匹配，您需要：

```
var matchResult = myString.match(/^[a-zA-Z]{3}$/); 
```

# windows-mobile - 在 Windows Mobile 6 上隐藏 GPRS 连接失败通知似乎不起作用

> ID：10385774
> 
> 赞同：1
> 
> 时间：2012-04-30T14:55:40.920
> 
> 标签：windows-mobile, compact-framework

我正在向我的 .NET Compact Framework 3.5 应用程序添加 Windows Mobile Connection Manager 支持。

我需要向用户隐藏连接错误，我已经阅读了 MSDN 文档并遵循它（据我所知），但如果 GPRS 连接失败，它们仍然会不断弹出。

这是我的 C# 代码：

这是 ConnMgrConnectionInfo 结构的托管包装器：

```
[StructLayout(LayoutKind.Sequential)]
public sealed class ConnMgrConnectionInfo
{
    Int32 cbSize;                           // DWORD
    public ConnMgrParam dwParams = 0;       // DWORD
    public ConnMgrProxy dwFlags = 0;        // DWORD
    public ConnMgrPriority dwPriority = 0;  // DWORD
    public Int32 bExclusive = 0;            // BOOL
    public Int32 bDisabled = 0;             // BOOL
    public Guid guidDestNet = Guid.Empty;   // GUID
    public IntPtr hWnd = IntPtr.Zero;       // HWND
    public UInt32 uMsg = 0;                 // UINT
    public Int32 lParam = 0;                // LPARAM
    public UInt32 ulMaxCost = 0;            // ULONG
    public UInt32 ulMinRcvBw = 0;           // ULONG
    public UInt32 ulMaxConnLatency = 0;     // ULONG

    // Constructors
    public ConnMgrConnectionInfo()
    {
        cbSize = Marshal.SizeOf(typeof(ConnMgrConnectionInfo));
    }

    public ConnMgrConnectionInfo(Guid destination, ConnMgrPriority priority,  ConnMgrProxy proxy)
        : this()
    {
        guidDestNet = destination;
        dwParams = ConnMgrParam.GuidDestNet;
        dwPriority = priority;
        dwFlags = proxy;
    }

    public ConnMgrConnectionInfo(Guid destination, ConnMgrPriority priority)
        : this(destination, priority, ConnMgrProxy.NoProxy) { }

    public ConnMgrConnectionInfo(Guid destination)
        : this(destination, ConnMgrPriority.UserInteractive) { }
} 
```

与此一起的是定义来自 connmgr.h 的 C 标志的枚举

```
[Flags]
public enum ConnMgrParam : int
{
    GuidDestNet = 0x1,
    MaxCost = 0x2,
    MinRcvBw = 0x4,
    MaxConnLatency = 0x8
}

    [Flags]
public enum ConnMgrProxy : int
{
    NoProxy = 0x0,
    Http = 0x1,
    Wap = 0x2,
    Socks4 = 0x4,
    Socks5 = 0x8,
    SuspendAware = 0x10,
    Registered_Home = 0x20,
    No_Error_Msgs = 0x40,
    WakeOnIncoming = 0x80,
}

public enum ConnMgrPriority
{
    UserInteractive = 0x8000,
    HighPriorityBackground = 0x0200,
    LowPriorityBackground = 0x0008
} 
```

这是在连接管理器中“拨号”连接的相关 PInvoke：

```
[DllImport("CellCore.dll", EntryPoint = "ConnMgrEstablishConnectionSync", SetLastError = true)]
public static extern int ConnMgrEstablishConnectionSync(ConnMgrConnectionInfo connectionInfo, ref IntPtr connectionHandle, 
    uint dwTimeout, ref ConnMgrStatus dwStatus); 
```

最后，这是使用正确设置实例化 ConnMgrConnectionInfo 然后从连接管理器请求连接的代码：

```
const string scDefaultDestinationNetwork = "My ISP";
const uint dwTimeout = 60000;
ConnMgrStatus status = ConnMgrStatus.Unknown;
IntPtr pointerOut = IntPtr.Zero;
int retVal;

if (ConnectionEntry.DestinationNetwork == null)
{
    ConnectionEntry.DestinationNetwork = scDefaultDestinationNetwork;
}

Guid destinationNetworkGuid = LookupGUIDforNetwork(ConnectionEntry.DestinationNetwork);
ConnMgrConnectionInfo info = new ConnMgrConnectionInfo(destinationNetworkGuid, ConnMgrPriority.HighPriorityBackground, ConnMgrProxy.No_Error_Msgs);
retVal = Win32PInvokes.ConnMgrEstablishConnectionSync(info, ref pointerOut, dwTimeout, ref status);
if (retVal == 0)
{
    ConnectionEntry.Handle = pointerOut;
    ConnectionFailures = 0;
}
else
{
    ConnectionFailures++;
} 
```

此外，以下注册表设置设置为 0 以隐藏连接成功和断开连接消息：

```
HKEY_CURRENT_USER\ControlPanel\Notifications\{8ddf46e7-56ed-4750-9e58-afc6ce486d03}\Options (0)
HKEY_CURRENT_USER\ControlPanel\Notifications\{8ddf46e8-56ed-4750-9e58-afc6ce486d03}\Options (0) 
```

现在，当该代码触发时，我们的信息亭样式应用程序仍然会弹出连接错误，允许用户点击设置并访问底层操作系统及其设置。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:37:33.983

这是我的解决方案：

重新指向以下注册表设置您自己的自定义 exe：

`HKEY_LOCAL_MACHINE\Software\Microsoft\Shell\Rai\:MSREMNET\1`

它默认为 \Windows 中名为 RemNet.exe 的程序。

如果传递参数 -RASERROR 它会弹出一个气球。

我编写了自己的 exe，它选择性地忽略使用 -RASERROR 的调用，并将其余部分传递给原始 RemNet：

```
#if DEBUG
            string message = "OurRemNet called with:\r\n";

            foreach (string arg in args)
            {
                message += arg + "\r\n";
            }

            MessageBox.Show(message);

            string repeatparams = "";

            foreach (string arg in args)
            {
                repeatparams += arg + " ";
            }

            Process.Start(@"\Windows\RemNet.exe", repeatparams);
#else
                bool forwardToRemNet = true;

                foreach(string arg in args)
                {
                    if (arg == "-RASERROR")
                    {
                        forwardToRemNet = false;
                    }
                }

                if (forwardToRemNet)
                {
                    string repeatparams = "";

                    foreach (string arg in args)
                    {
                        repeatparams += arg + " ";
                    }
                    Process.Start(@"\Windows\RemNet.exe", repeatparams);
                }
#endif 
```

我使用 DEBUG 开关来构建一个告诉我发生了什么的 EXE (DEBUG) 或者只是掩盖 ras 错误 (RELEASE)

# c# - TreeView 绑定问题

> ID：10385777
> 
> 赞同：0
> 
> 时间：2012-04-30T14:55:54.353
> 
> 标签：c#, wpf, winforms, treeview

我正在尝试将我的表单代码移植到 WPF。

目前我想将 DNS Zonetransfer 发布到 Treeview。

MainWindow.cs 执行以下操作：

```
Response axfr = new Response();
axfr = dig.DigIt();
DataContext = axfr.Answers; 
```

Response 包含 Answers，其中包含 ResourceRecords。

```
 public class Response
    {
            public List<AnswerRR> Answers { get; set; } 
```

[...]

```
public class ResourceRecord
{
    public string NAME {get; set;}
}

public class AnswerRR : ResourceRecord
{

} 
```

并使用此 XAML：

```
 <HierarchicalDataTemplate DataType="{x:Type Model:Response}"
                              ItemsSource="{Binding AnswerRR }">
        <TextBlock Text="{Binding Name}" ToolTip="{Binding Name}" />
    </HierarchicalDataTemplate> 
```

但是，我总是将完整的 ResourceRecord 作为输出（my.test.com. 600 IN A 1.2.3.4）而不是名称！

我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:13:59.657

您的数据模板和绑定几乎没有错误。

首先，您为 Response 定义数据模板，并在其中将 ItemsSource 绑定到 AnswerRR。Response 类没有 AnswerRR 属性，它应该是 Answers。

此外，您还从 Response 数据模板绑定到 Name 属性。响应不包含 Name 属性。ResourceRecord 包含 NAME 属性，因此您还需要为 ResourceRecord 定义数据模板并从中绑定到 NAME 属性。还要注意区分大小写。绑定区分大小写。

这是所有数据模板的完整 XAML：

```
<HierarchicalDataTemplate DataType="{x:Type Model:Response}" ItemsSource="{Binding Answers}">
</HierarchicalDataTemplate>

<HierarchicalDataTemplate DataType="{x:Type Model:ResourceRecord}" ItemsSource="{Binding TestResults}">
    <TextBlock Text="{Binding NAME}" ToolTip="{Binding NAME}"/>
</HierarchicalDataTemplate >

<DataTemplate DataType="{x:Type Model:DNSTestResult}">
    <TextBlock Text="{Binding resultValue}" ToolTip="{Binding resultValue}"/>
</DataTemplate> 
```

DNSTestResult.resultValue 必须是属性，而不是字段！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:52:53.560

从我所看到的情况来看，您的绑定指向不正确。它应该是：

```
<TextBlock Text="{Binding NAME}" ToolTip="{Binding NAME}" /> 
```

# javascript - 在 HTML5 中，我可以同时多次播放相同的声音吗？

> ID：10385779
> 
> 赞同：10
> 
> 时间：2012-04-30T14:56:05.087
> 
> 标签：javascript, html, audio, html5-audio

我正在制作一个游戏，其中经常播放声音。我注意到声音在播放时不会再次播放。例如，玩家与墙壁发生碰撞，播放“砰”的一声。但是，如果玩家撞到一面墙，然后又快速撞到另一面墙，只会播放“砰”的一声，我相信这是因为第一个声音没有完成。真的吗？我应该如何避免这种情况？我想过预加载声音三遍，总是播放那个声音的不同副本，但这似乎很愚蠢......

**解决了：**

事实证明我是对的......您需要预加载多个版本的声音，然后循环播放它们。

**编码：**

```
var ns = 3; //The number of sounds to preload. This depends on how often the sounds need to be played, but if too big it will probably cause lond loading times.
var sounds = []; //This will be a matrix of all the sounds

for (i = 0; i < ns; i ++) //We need to have ns different copies of each sound, hence:
    sounds.push([]);

for (i = 0; i < soundSources.length; i ++)
    for (j = 0; j < ns; j ++)
        sounds[j].push(new Audio(sources[i])); //Assuming that you hold your sound sauces in a "sources" array, for example ["bla.wav", "smile.dog" "scream.wav"] 

var playing = []; //This will be our play index, so we know which version has been played the last.

for (i = 0; i < soundSources.length; i ++)
    playing[i] = 0; 

playSound = function(id, vol) //id in the sounds[i] array., vol is a real number in the [0, 1] interval
{
    if (vol <= 1 && vol >= 0)
        sounds[playing[id]][id].volume = vol;
    else
        sounds[playing[id]][id].volume = 1;

    sounds[playing[id]][id].play();
    ++ playing[id]; //Each time a sound is played, increment this so the next time that sound needs to be played, we play a different version of it,

    if (playing[id] >= ns)
        playing[id] = 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-16T01:02:53.760

您可以克隆音频元素。我不知道您是否可以同时播放多个声音，但这里是您可以多次播放声音而无需多次下载的方法。

```
var sound = document.getElementById("incomingMessageSound")
var sound2 = sound.cloneNode()
sound.play()
sound2.play() 
```

我知道这适用于 chrome，这是我唯一需要它的地方。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:58:34.713

多次加载声音以模拟复音。以循环方式播放它们。[在matthewtoledo.com](http://matthewtoledo.com)上查看我的演示。具体来说，函数 _initSoundBank()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:12:35.037

是的，一个`<audio>`对象一次只能播放一首曲目。考虑该`<audio>`对象有一个`currentTime`属性表示音轨的当前位置：如果一个`<audio>`对象可以同时播放多个音轨，那么会`currentTime`反映什么值？

请参阅我的解决方案以了解此问题的超集[是否在 Javascript 性能中播放声音重？](https://stackoverflow.com/questions/10078463/is-playing-sound-in-javascript-performance-heavy/10078734#10078734). （基本上，添加`<audio>`具有相同声音的重复标签。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-17T10:46:38.680

虽然它现在只在 FireFox 和 Chrome 中实现，但将来您应该使用**WebAudio API**，它是专为浏览器中的游戏和音频应用程序设计的。

在那里，您可以多次播放任何声音并用它做一些其他有趣的事情。

一个很好的教程在这里：[http ://www.html5rocks.com/en/tutorials/webaudio/games/](http://www.html5rocks.com/en/tutorials/webaudio/games/)

# jquery - jQuery 子导航交替可见性

> ID：10385781
> 
> 赞同：0
> 
> 时间：2012-04-30T14:56:12.267
> 
> 标签：jquery, drop-down-menu, slidedown

我正在开发一个站点，其中主导航中的某些链接具有单独的子菜单 - 没有什么不寻常的。

但是，我试图控制子菜单的可见性。当光标悬停在带有子菜单的链接上时，子菜单应该向下滑动。如果光标移动并悬停在另一个子菜单的不同链接上，应该会发生相同的效果，但我试图在向下滑动新请求的子菜单之前隐藏任何打开的子菜单。

我正在使用以下代码：

```
jQuery(document).ready(
    function(){
        jQuery('div#block-system-main-menu div.content ul li.leaf').mouseover(
            function(){
                //jQuery('div.view-referenced-product-categories').slideUp();
                jQuery(this).find('div.view h3').slideDown();
            }
        );
    }
); 
```

使用该代码，我的下拉菜单可以正常工作，但最终会打开多个子菜单。如果我在 mouseover 函数中取消注释第一行代码，我的滑动效果将不起作用。

*为了说明，该站点位于[http://hoffmann-koree.com/](http://hoffmann-koree.com/)。带有子菜单的 2 个链接是**浴室**和**固定**。*

谁能告诉我我做错了什么或者更好的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:02:04.110

为什么不只使用mouseleave？

```
jQuery('div#block-system-main-menu div.content ul li.leaf').mouseover(
    function(){
        jQuery(this).find('div.view h3').slideDown();
    }
);
jQuery('div#block-system-main-menu div.content ul li.leaf').mouseleave(
    function(){
        jQuery(this).find('div.view h3').slideUp();
    }
); 
```

我检查了你的源代码，如果你想添加它，只需编辑你的 hoffmannkoree.js 并将第 4-16 行替换为上面的代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:10:51.167

`slideDown()`尝试将`slideUp()`

```
var menu = this;
jQuery('div.view-referenced-product-categories').slideUp(500, function (){
    jQuery(menu).find('div.view h3').slideDown();
}); 
```

这样，`slideDown()`只会在`slideUp()`完成时调用。（我为速度设置了 500 毫秒，因为它是默认设置，但如果您设置更快的速度来隐藏菜单，可能会更好）

# enter - Bash：检查是否按下了输入

> ID：10385782
> 
> 赞同：6
> 
> 时间：2012-04-30T14:56:16.210
> 
> 标签：enter

**`Enter`**如果已按下该键，我如何检查 Bash ？我正在使用读取命令：

```
read -p "Please press ENTER" var 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T15:05:03.640

首先检查退出状态是否正常（`$?`应该为0）。

其次，检查`$var`等于`""`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-06T21:09:49.730

您还可以检查 $var 变量在 read 调用设置后的长度。如果为 0，用户只需按 Enter 键，无需输入任何其他内容：

```
read -p "Please press ENTER" var
if [ ${#var} -eq 0 ]; then
  echo "Enter was hit"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:03:55.990

试试这个：

```
read var

echo $REPLY|hexdump -C 
```

# windows - 如何获取 Windows 7 上所有服务的列表？

> ID：10385783
> 
> 赞同：2
> 
> 时间：2012-04-30T14:56:24.803
> 
> 标签：windows, api, list, service

有没有办法获得 Win 7 中所有服务的完整列表，而无需安装诸如 Net Framework 4 之类的 API？我想尽可能地获取列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:01:22.810

以管理员身份运行 cmd 控制台，然后运行“sc query type= service state= all”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:17:05.183

您可以使用 Win API [OpenSCManager](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684323%28v=vs.85%29.aspx)函数，然后使用[EnumServicesStatus枚举服务及其状态](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682637%28v=vs.85%29.aspx)

[在Dev Center](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685141%28v=vs.85%29.aspx)上有完整的 Services API 参考

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:17:30.887

下载工具[Wmi Code Creator](http://www.microsoft.com/en-us/download/details.aspx?id=8572)。它将帮助您在 C#、VB.Net 或 Visual Basic 脚本中制作 WMI 查询。

这是使用 VBScript 的解决方案

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2") 
Set colItems = objWMIService.ExecQuery( _
    "SELECT * FROM Win32_Service",,48) 
For Each objItem in colItems 
    Wscript.Echo "-----------------------------------"
    Wscript.Echo "Win32_Service instance"
    Wscript.Echo "-----------------------------------"
    Wscript.Echo "DisplayName: " & objItem.DisplayName
Next 
```

**什么是 WMI？**（来自[http://technet.microsoft.com/en-us/library/ee692772.aspx](http://technet.microsoft.com/en-us/library/ee692772.aspx)）

> Windows Management Instrumentation 是一项核心的 Windows 管理技术；您可以使用 WMI 来管理本地和远程计算机。WMI 提供了一种使用编程或脚本语言执行日常管理任务的一致方法。例如，您可以：
> 
> ```
> * Start a process on a remote computer.
> * Schedule a process to run at specific times on specific days.
> * Reboot a computer remotely.
> * Get a list of applications installed on a local or remote computer.
> * Query the Windows event logs on a local or remote computer. 
> ```
> 
> WMI 中的“仪表”一词指的是 WMI 可以获取有关计算机系统内部状态的信息，就像汽车的仪表板仪表可以检索和显示有关发动机状态的信息一样。WMI 通过对对象（如磁盘、进程或 Windows 系统中的其他对象）进行建模来“工具”。这些计算机系统对象使用 Win32_LogicalDisk 或 Win32_Process 等类建模；如您所料，Win32_LogicalDisk 类模拟安装在计算机上的逻辑磁盘，而 Win32_Process 类模拟当前在计算机上运行的任何进程。类基于称为通用信息模型 (CIM) 的可扩展模式。CIM 模式是分布式管理任务组 (http://www.dmtf.org) 的公共标准。
> 
> WMI 功能还包括事件、远程处理、查询、视图、模式的用户扩展、检测等。 [http://technet.microsoft.com/en-us/library/ee692772.aspx](http://technet.microsoft.com/en-us/library/ee692772.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T16:16:11.527

我不知道这是否对您有帮助，但您可以通过进入 cmd 行并输入 net start 查看正在运行的服务列表

这会给你一个很好的清单，列出正在运行的内容。

# c - 如何使用 ptrace 获取 char*

> ID：10385784
> 
> 赞同：0
> 
> 时间：2012-04-30T14:56:27.070
> 
> 标签：c, char, system-calls, ptrace

我目前正在开发一种工具，我必须在其中跟踪程序以了解他的系统调用。目前，我能够获取系统调用的数字参数，但无法正确获取字符串的地址。

这是我进行的方式：

```
 long addr = ptrace(PTRACE_PEEKDATA, pid, regs.ebx, NULL);
  printf("%s", (char *) &addr); 
```

使用那段代码，我可以获得字符串的开头（3 或 4 个第一个字符），但结尾已损坏，我不知道为什么。

你有什么解决办法吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:35:32.413

```
char *read_string (int child, unsigned long addr) {
    char *val = malloc(4096);
    if (!val)
        return NULL;

    int allocated = 4096, read = 0;
    unsigned long tmp =0;
    while(1) {
        if (read + sizeof (tmp) > allocated) {
            allocated *= 2;
            char *temp_val = realloc (val, allocated);
            if (!temp_val) {
                free(val);
                return NULL;
            }
            val = temp_val;
        }
        tmp = ptrace(PTRACE_PEEKDATA, child, addr + read);
        if(errno != 0) {
            val[read] = 0;
            break;
        }
        memcpy(val + read, &tmp, sizeof tmp);
        if (memchr(&tmp, 0, sizeof tmp) != NULL) break;
        read += sizeof tmp;
    }
    return val;
} // Don't forget to free the returned val. 
```

尝试使用以下函数，它是我在应用程序中编写的内容的一部分：

```
reg_val[1] = ptrace (PTRACE_PEEKUSER, child, 4 * EBX, NULL);
char *filepath = read_string(child, reg_val[1]); 
```

Child 是我正在跟踪的子进程的 pid。如果这不起作用，请告诉我？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:01:22.217

你确定你不想要这个吗？

`printf("%lX", addr);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T00:52:25.843

使用您发布的代码，您仅通过调用 ptrace 读取 4 个字节的数据（即 4 个字符）。您需要从调试进程中读取整个缓冲区，然后才能在父进程中打印出字符串。即，在你读完 addr 之后，你需要循环

```
 ptrace(PTRACE_PEEKTEXT, child, addr, NULL)
   addr+=4; 
```

直到您阅读完整的字符串。

然后你可以使用 printf() 打印出来

# ruby-on-rails - Ruby on Rails - 如何遍历对象和重置值

> ID：10385785
> 
> 赞同：0
> 
> 时间：2012-04-30T14:56:27.473
> 
> 标签：ruby-on-rails, ruby

我正在遍历一个对象列表并更改一些值。当我将值输出到记录器时，我看到了更改的值，但是当在结果页面上时，更改不会被保存。

这是我的循环：

```
@dis.each do |d|
  temp = d.notes.inspect

  #Now check the length of the temp variable
  temp.length > 25 ? temp = temp[0,25] :  nil

  d.notes = temp
end 
```

如何更改它以便将 temp 的新值保存在 @dis 对象中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:59:56.510

> 您可以使用 collect! 获得您想要的结果！或地图！就地修改数组：

[https://stackoverflow.com/a/5646754/643500](https://stackoverflow.com/a/5646754/643500)

```
x = %w(hello there world)
x.collect! { |element|
  (element == "hello") ? "hi" : element
}
puts x 
```

编辑：

因此，对于您的代码，它看起来像

```
@dis.collect! do |d|
  temp = d.notes.inspect

  #Now check the length of the temp variable
  temp.length > 25 ? temp = temp[0,25] : temp = nil

  d.notes = temp
end 
```

编辑：

在这里工作的完整代码。确保你有带有 getter 和 setter 的 :notes。阅读 cattr_accessor、attr_accessor 和 attr_accessible

```
class TestClass
  @note
  def initialize note
    @note = note
  end
  def get_note
    @note
  end
  def set_note note
    @note = note
  end
end

@dis = Array.new
@dis << TestClass.new("yo yo")
@dis << TestClass.new("1 2 3 4 5 6 7 8 9 10 6 7 8 9 10 6")
@dis << TestClass.new("a b c")

@dis.collect! do |d|
  temp = d.get_note.inspect

  #Now check the length of the temp variable
  d.get_note.inspect.length > 25 ? d.set_note(temp[0,25]) : d.set_note(nil)

end

puts "#{@dis}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:30:09.503

看起来您正在尝试截断 notes 属性。

这应该足够了：

```
@dis.each do |d|
  d.notes = d.notes.inspect[0,25]
end 
```

由于赋值，这将改变数组内的对象，但不会改变数组对象本身。`map!`和`collect!`（它们是别名），将改变数组本身，但不会改变其中的对象。`map`并将`collect`一起返回一个新数组。

如果您的问题是它没有保存到数据库中，那么您应该`d.save`在某个地方放一个。

如果只是为了呈现，为什么不在视图中呈现它们时截断值？

```
<%= truncate d.notes, :length => 25 %> 
```

# symfony-forms - Symfony 2 资产根本不生成 css 文件

> ID：10385790
> 
> 赞同：1
> 
> 时间：2012-04-30T14:57:03.697
> 
> 标签：symfony-forms

我遇到了css生成问题

我添加了这样的代码：

```
<? foreach ($asseticHelper->stylesheets(
        array('@AnglerCoreBundle/Resources/public/css/*')
) as $url
    ): ?>
    <link rel="stylesheet" href="<?= $view->escape($url) ?>" />
<? endforeach ?> 
```

在我的 layout.html.php 头部和：

```
<? foreach ($view['assetic']->javascripts(
    array(
        '@AnglerCoreBundle/Resources/public/js/framework/jquery.js',
        '@AnglerCoreBundle/Resources/public/js/framework/json2.js',
        '@AnglerBackendBundle/Resources/public/js/hashchange.js',
        '@AnglerBackendBundle/Resources/public/js/location.js',
        '@AnglerBackendBundle/Resources/public/js/interfaces/*',
        '@AnglerBackendBundle/Resources/public/js/page.js',
        '@AnglerBackendBundle/Resources/public/js/ui.js',
        '@AnglerBackendBundle/Resources/public/js/main.js',
        '@AnglerBackendBundle/Resources/public/js/fader.js',
        '@AnglerBackendBundle/Resources/public/js/modal.js',
        '@AnglerBackendBundle/Resources/public/js/pages/*',
    )
) as $url
): ?> 
```

以上结束正文标签。问题是当我调用命令时：

```
app/console clear:cache --env=dev[prod]
app/console assetic:dump 
app/console assetic:dump --env=prod --no-debug
app/console assets:install 
```

资产包只生成 javascript，我在两种环境中都可以在页面上看到它们，但 css 文件却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:43:42.923

您需要添加：

```
assetic:
    bundles: [AnglerCoreBundle, AnglerBackendBundle] 
```

在您的 config.yml 文件中。

# ios - UIWebview 内的 Youtube 视频自动播放

> ID：10385791
> 
> 赞同：5
> 
> 时间：2012-04-30T14:57:05.247
> 
> 标签：ios, uiwebview, youtube, embed, autoplay

我在这个论坛中发现了很多关于嵌入 youtube 视频和自动播放的问题，但没有一个能解决我所有的疑问。

我找到了两种在 UIWebView 中嵌入 youtube 视频的方法

1)

```
NSString *youTubeHTMLTemplate = @"<html><head><style type=\"text/css\">body { background-color: transparent;color: white;}</style></head><body style=\"margin:0\"><embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" width=\"%0.0f\" height=\"%0.0f\"></embed></body></html>"; 
finalHtml = [NSString stringWithFormat:youTubeHTMLTemplate, fullYopuTubeUrl, htmlFrameWidth, htmlFrameHeight]; 
```

2)

```
NSString *youTubeHTMLTemplate = @"<html><body style=\"margin:0;padding:0;\"><iframe class=\"youtube-player\" type=\"text/html\" width=\"%f\" height=\"%f\" src=\"http://www.youtube.com/embed/%@\" frameborder=\"0\" allowfullscreen></iframe></body></html>";
finalHtml = [NSString stringWithFormat:youTubeHTMLTemplate, htmlFrameWidth, htmlFrameHeight, videoID]; 
```

如果我使用 (1) 方法并按照[此处](https://stackoverflow.com/questions/3010708/youtube-video-autoplay-on-iphones-safari-or-uiwebview)给出的方法，我的视频会自动播放。想法是在 UIWebView 中找到按钮并向其发送修饰事件。

如果我使用 (2) 并遵循相同的方法，视频不会自动播放。

我认为建议使用 (2) 方法，因为 (1) 仅适用于 Flash 视频（对吗？）。

无论如何（2）是可能的吗？这个[链接](https://stackoverflow.com/questions/8141652/youtube-embeded-video-autoplay-feature-not-working-in-iphone)说不。

谁能确认

*   如果我是正确的，建议使用 (2)
*   无法使用 (2) 进行自动播放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-14T10:32:25.670

我通过添加以下代码解决了这个问题：

```
webview.mediaPlaybackRequiresUserAction=NO;
webview.allowsInlineMediaPlayback=YES; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T03:58:34.650

问：如果我是正确的，建议使用 (2)

A. 是 (2) 方法适用于不支持闪存的 i 设备。

Q. 无法使用 (2) 进行自动播放。

A. 目前无法进行自动播放。

更新：我可以使用 Youtube JS API 自动播放 youtube 视频，请参阅[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

只需从 onPlayerReady 调用 playVideo

```
function onPlayerReady(event) {
                event.target.playVideo();                    
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:21:13.127

通过发出以下命令可以实现自动播放：

```
webView.mediaPlaybackRequiresUserAction=FALSE; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T00:17:41.023

您还可以使用**Saurabh Wadhwa** [Answer](https://stackoverflow.com/questions/3010708/youtube-video-autoplay-on-iphones-safari-or-uiwebview)`endActionsForControlEvents:UIControlEventTouchUpInside`中的这个技巧，在 UIWebView 完成下载后触发

# asp.net-mvc - 在缓存中存储数据 30 分钟 MVC

> ID：10385794
> 
> 赞同：3
> 
> 时间：2012-04-30T14:57:14.807
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的 MVC 控制器中有一个动作，我想根据传递的参数作为键来缓存它的返回结果，这样下次调用这个动作时，它会首先在缓存中查找，如果没有找到它会在数据中查找贮存。

```
 public ActionResult GetSearchResult(string zipcode, int pageSize, int currentPage)
 {
     Cache[zipcode + page + currentpage] = somedata // but it should be cleared after 30 min
 } 
```

我怎样才能做到这一点？如上所述，我可以将数据存储在缓存对象中，但我想确保缓存对象在 30 分钟后被清除。我看不到如何在全局或每个缓存对象的基础上配置生命周期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:04:12.663

您可以使用该[`Cache.Insert()`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.insert.aspx)方法。

```
Cache.Insert("key", myTimeSensitiveData, null, 
  DateTime.Now.AddMinutes(30), TimeSpan.Zero); 
```

有关详细信息，请参阅[ASP.NET 缓存：技术和最佳实践](http://msdn.microsoft.com/en-us/library/aa478965.aspx#aspnet-cachingtechniquesbestpract_topic4)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:04:55.000

我强烈建议对您的操作使用 outputcache 过滤器，而不是自己手动操作

```
 [OutputCache(Duration=1800, VaryByParam="*")]
     public ActionResult GetSearchResult(string zipcode, int pageSize, int currentPage)
     {
  //       Cache[zipcode + page + currentpage] = somedata // but it should be cleared after 30 min
     } 
```

# mysql - MySql 使用 InnoDB 回收 blob 空间

> ID：10385799
> 
> 赞同：3
> 
> 时间：2012-04-30T14:57:34.190
> 
> 标签：mysql, innodb

我需要构建一个表，其中包含一个占行大小的 98% 的大 BLOB。但是，此 BLOB 只会暂时保留在行中，并将移动到另一个位置，然后 BLOB 列将设置为 NULL。MySQL 可以重用这个空间还是它总是行的一部分？如果它不能自动重用，是否有另一种方法（比如优化表）可以用来手动回收这个空间？如果没有，我可能需要找到另一种解决方案来处理这组特定的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:59:02.750

听起来你肯定会更好地使用 Redis，甚至只是将你的 blob 存储在文件系统上。这实际上是我推荐的；将数据保存在文件中并将文件名放在表中。异步上传到 s3 完成后，将其设置为 null。如果您使用为处理大型对象而优化的文件系统，这总是比插入数据库更快。

Blob 的存储方式不仅取决于数据的长度，还取决于您实际使用的 mysql 版本。删除的行总是可以重用，当后续插入不重用空间时，可以使用优化表恢复。但是优化表会锁定该表。所以你第二次减慢系统速度。

# visual-studio-2010 - Qt 4.8.1 for Visual Studio 奇怪的错误

> ID：10385802
> 
> 赞同：0
> 
> 时间：2012-04-30T14:57:36.217
> 
> 标签：visual-studio-2010, qt

我设法轻松地安装了 Qt for Visual Studio (2010) 但是当我编译一个简单的应用程序时，我收到一个关于**Microsoft.Cpp.Win32.Targets**的奇怪错误：

```
Error 1 error : Required file "" is missing.    C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets   147 6 
```

第 147 行是：

```
<CL Condition="'%(ClCompile.PrecompiledHeader)' != 'Create' and '%(ClCompile.ExcludedFromBuild)'!='true'" 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:36:59.057

我设法查明了问题所在。**出于某种原因，我将mspdb100.dll**复制到了我的 VisualStudio\VC\bin 文件夹中。删除它修复了所有错误

# css - 适用于 IE 9 及更早版本的 iWebkit CSS

> ID：10385804
> 
> 赞同：-1
> 
> 时间：2012-04-30T14:57:45.480
> 
> 标签：css, internet-explorer, iwebkit

据我所知，iWebkit 主要是为与 Chrome 和 Safari 一起工作而编写的。现在我在一个网站（用于桌面屏幕）中使用 iwebkit，我希望它与 Firefox 和 IE 9（及更早版本）兼容。

现在我找到了 Firefox 的 webkit 样式表，但我找不到 IE 的样式表，而且由于 IE CSS 样式与 chrome 和 firefox 有很大不同，编辑 IE 的 Firefox 样式表可能只需要花费大量时间和精力（而且，还有是firefox webkit css文件中有一些IE不支持的样式，比如border-image），所以也不是我偷懒。

所以我基本上想知道 IE 是否有这样的样式表，如果没有，为 IE 自定义每个 firefox/chrome/safari css 属性和样式可能是一项非常艰巨的任务，因为这些属性在 IE 之间差异很大和火狐，铬/野生动物园。

关于我应该怎么做才能让这个 iWebkit 样式表在 IE6-10 上工作的任何建议？

这是我正在谈论的 Firefox iWebkit 样式表的链接：http: [//svn.trynull.com/iwebkitmozilla/tags/](http://svn.trynull.com/iwebkitmozilla/tags/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:50:11.280

您可以访问[http://colorzilla.com/gradient-editor/](http://colorzilla.com/gradient-editor/)，只需将 iWebkit 或 Mozilla 样式插入编辑器，它就会输出 IE 等价物。至于其他样式，例如 -webkit-border-image，你可以只用 w3school 搜索它们，看看是否存在 IE 等价物。（在这种情况下，border-image 将是等效的......）来自 Mozilla 的一个例子：

```
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#cdd5df), color-stop
(0%,#6d84a2), color-stop(99%,#6d84a2)); 
```

IE

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cdd5df',   
endColorstr='#6d84a2',GradientType=0 ); /* IE6-8 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:21:18.687

您可能会使用 Chrome Frame。[https://developers.google.com/chrome/chrome-frame/](https://developers.google.com/chrome/chrome-frame/)

除此之外，iWebKit 适用于 chrome 和 safari，因为它们是*基于 WebKit*的浏览器。（因此得名）CSS 使用了很多供应商特定的前缀。

像这样的事情：

```
#leftnav a
{
    -webkit-border-image:url("../images/navlinkleft.png") 0 5px 0 13px;
    z-index:3;
    margin-left:-4px;
    padding-right:4px;
    -webkit-border-top-left-radius:16px;
    -webkit-border-bottom-left-radius:16px;
    -webkit-border-top-right-radius:6px;
    -webkit-border-bottom-right-radius:6px;
    float:left;
    border-width:0 5px 0 13px;
} 
```

永远不会在 IE 上本地运行。您可以大幅重写代码（甚至不仅仅是 css，同样，浏览器特定功能），但您为什么要从 IE 中的 iOS 界面开始呢？

# wordpress - Wordpress 3.3.2 中的 MediaElement.js 问题

> ID：10385805
> 
> 赞同：1
> 
> 时间：2012-04-30T14:57:51.120
> 
> 标签：wordpress, video, mediaelement.js

自从升级到 wordpress 3.3.2 后，我似乎无法使用 MediaElement.js 加载我的视频

我网站上带有视频的页面在[这里](http://www.strelitziamusic.co.uk/wedding-string-quartet/)和[这里](http://www.strelitziamusic.co.uk/string-quartet-promotional-video/)

当您单击播放时，它会尝试加载但实际上并没有这样做。文件确实存在。

更新后还有其他类似问题的吗？

网站上其他地方的音频工作正常。

# javascript - Dojo：如何使用回调方法在 jsonRest 存储上发出 PUT 请求

> ID：10385807
> 
> 赞同：1
> 
> 时间：2012-04-30T14:58:06.533
> 
> 标签：javascript, json, rest, dojo

我正在使用 Dojo JsonREST 存储与服务器上的 RESTful API 进行通信。GET 和 QUERY 方法与异步回调处理程序一起工作得很好。然而，在 JsonREST 存储上发布新对象的 PUT 请求似乎没有异步回调功能。只有当 PUT 请求完成并且成功时，才不可能触发事件。

从文档（http://dojotoolkit.org/reference-guide/1.7/dojo/store/JsonRest.html）：

```
 require(["dojo/store/JsonRest"], function(JsonRestStore){
     var store = new JsonRestStore({target: "/Table/" });

     store.get(3).then(function(object){
        // CALLBACK HERE :-)
     });

     store.query("foo=bar").then(function(results){
       // CALLBACK HERE :-)
     });

     store.put({ foo: "bar" }, { id: 3 }); // NO CALLBACK CAPABILITIES ???

     store.remove(3); // NO CALLBACK CAPABILITIES ???
}); 
```

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:44:01.153

您是否尝试过使用`store.put({ foo: "bar" }, { id: 3 }).then(function(){});`, `store.remove(3).then(function(){});`？检查[这些文档](http://dojotoolkit.org/reference-guide/1.7/dojo/Deferred.html)和[这篇文章](http://forums.arcgis.com/threads/32931-How-to-use-dojo.Deferred-dojo.DeferredList-and-.then)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:35:52.397

```
put: function(object, options){
    // summary:
    //      Stores an object. This will trigger a PUT request to the server
    //      if the object has an id, otherwise it will trigger a POST request.
    // object: Object
    //      The object to store.
    // options: dojo.store.api.Store.PutDirectives?
    //      Additional metadata for storing the data.  Includes an "id"
    //      property if a specific id is to be used.
    //  returns: Number
      ....
      return xhr( ....);
    } 
```

文档是错误的，return 实际上是一个 dojo.Deferred，正如刚才所说。

期望函数原型读取函数（responseText，ioArgs）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T01:09:52.317

dojo 文档指出，要添加新项目，您应该使用 POST，因为 PUT 用于更新商店。

# xmpp - openfire 外部用户身份验证

> ID：10385809
> 
> 赞同：0
> 
> 时间：2012-04-30T14:58:07.717
> 
> 标签：xmpp, openfire

我们公司需要将 openfire 用于 xmpp 聊天应用程序，我们希望使用已经存在的用户表进行身份验证，而不是使用 openfire 中的 ofUser 表。我已经在我们的服务器上安装了 openfire 并将其配置为使用我们的 mysql 数据库并创建了必要的表。我正在尝试遵循[此处找到的自定义数据库集成指南](http://www.igniterealtime.org/builds/openfire/docs/latest/documentation/db-integration-guide.html)

但我无法让它工作。我的配置文件如下（表名略有变化）：

```
<jdbcProvider>
<driver>com.mysql.jdbc.Driver</driver>
<connectionString>jdbc:mysql://localhost/fueledin_winkage?user=fueledin_winkage&amp;password=845Fulton</connectionString>
</jdbcProvider>
<provider>
  <auth>
    <className>org.jivesoftware.openfire.auth.JDBCAuthProvider</className>
  </auth>
  <user>
    <className>org.jivesoftware.openfire.user.JDBCUserProvider</className>
  </user>
</provider>
<jdbcAuthProvider>
    <passwordSQL>SELECT password FROM users WHERE email=?</passwordSQL>
    <passwordType>md5</passwordType>
</jdbcAuthProvider>
<jdbcUserProvider>
    <loadUserSQL>SELECT email,email FROM users WHERE email=?</loadUserSQL>
    <userCountSQL>SELECT COUNT(*) FROM users</userCountSQL>
    <allUsersSQL>SELECT email FROM users</allUsersSQL>
    <searchSQL>SELECT email FROM users WHERE</searchSQL>
    <usernameField>email</usernameField>
    <nameField>email</nameField>
    <emailField>email</emailField>
</jdbcUserProvider>
<setup>true</setup> 
```

这是一种奇怪的设置，因为用户可以在使用电子邮件登录时更改他们的用户名。有人可以解释我可能做错了什么吗，我尝试使用用户表中的用户登录服务器，但没有运气。另外，在浏览器中运行设置向导后，我将配置脚本编辑为如上所示，现在每次我进入浏览器工具时，它都会要求我再次运行设置向导，即使我再次运行它仍然会询问然后。任何帮助提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:41:04.467

您必须在 openfire 的管理界面中设置参数。这将为您完成工作。

如果您想在数据库中执行此操作，那就是表`ofProperty`；）

编辑：

像这样：

在系统属性（在服务器管理器中）中将所有 XML 节点更改为类似 node.subnode 的属性名称。

例如：

```
<provider>
  <auth>
    <className>org.jivesoftware.openfire.auth.JDBCAuthProvider</className>
  </auth>
  <user>
    <className>org.jivesoftware.openfire.user.JDBCUserProvider</className>
  </user>
</provider> 
```

将会

```
provider.auth.className
provider.user.className 
```

属性值是相同的，所以例如 value for `provider.auth.className`is `org.jivesoftware.openfire.auth.JDBCAuthProvider`和 value for `provider.user.className`is`org.jivesoftware.openfire.user.JDBCUserProvider`

# c++ - 返回原始子字符串的子字符串方法

> ID：10385819
> 
> 赞同：0
> 
> 时间：2012-04-30T14:58:36.873
> 
> 标签：c++, substring

我被要求创建一个`Substring()`返回原始字符串的子字符串的方法，该子字符串从位置开始，`start`只要`length`

以下是我尝试在 .cpp 文件中实现该功能的方式：

```
MyString sub;

sub = new char[length];

for(int i = start; i <length; i++)
{
    sub[i] = this[i];
}

return sub; 
```

我得到了这个错误：

> 错误：令牌 MyString.cpp:206 之前的预期 unqualified-id ：错误：与in`[`不匹配`operator[]``sub[i]`

注意：我不应该重载 []。MyString 是定义的类。

我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:02:54.513

它只是意味着 this.substr() 不是有效的 C++。这是指向当前对象的指针。所以除非 MyString::substr() 方法存在，否则你不能这样做。

从那开始，我不知道您的 MyString 类中有哪些成员。如果有 std::string，则可以对其使用 substr 方法。如果底层成员只是一个 char*，则必须对其使用简单的数组和 c 字符串操作来从中提取子字符串。

举个例子。如果你的课是这样的

```
class MyString
{
    private:
        std::string _str;

    public:
        // Constructor
        MyString(std::string str);
        // Your method
        MyString Substring(int start, int length) const;
}; 
```

然后你的 Substring 方法将是这样的：

```
MyString MyString::Substring(int start, int length) const
{
    return MyString(_str.substr(start, length));
} 
```

另一方面，如果您的 MyString 类是这样的：

```
class MyString
{
    private:
        char* _str;

    public:
        // Constructor
        MyString(char* str);
        // Your method
        MyString Substring(int start, int length) const;
}; 
```

那么你的方法将是这样的：

```
MyString MyString::Substring(int start, int length) const
{
    char* res_str = new char[length+1];
    memcpy(res_str, (char*) _str + start, length);
    res_str[length] = '\0';
    return MyString(res_str);
} 
```

编辑：如果我们查看您提供的代码（在最后一次编辑之后），您似乎实际上正在使用底层 char*。那我们来看看你写的吧^^

```
MyString sub;
sub = new char[length]; 
```

您要做的实际上是修改底层 char* 的字符。所以你应该做的是：

```
char* sub;
sub = new char[length]; 
```

因此，您将创建一个新的 char*，而不是创建一个新的 MyString。您不能直接将 char* 分配给 MyString （或者至少，这是我的想法）。现在，让我们看一下代码的另一部分：

```
for(int i = start; i <length; i++)
{

        sub[i] = this[i];
} 
```

这是一个指向 MyString 的指针。所以 this[i] 等价于 this.operator ，因为 this 是一个指针，所以它是 incalid 的。你不能在这个后面加上一个点。但是，如果您编写了 this->operator，它会搜索类似 char& MyString::operator[](int i) 的函数。由于您没有定义此函数，因此您仍然会遇到编译器错误（这也是您当前对 sub[i] 的错误，因为您将 sub 定义为 MyString。您应该编写：

```
for (int i = start; i < length; i++)
{
    sub[i] = _str[i];
} 
```

但它仍然提供 _str 是您班级中的 char* 。然后，您将能够通过以下方式完成您的功能：

```
return MyString(sub); 
```

But there, it's provided that your MyString class has a constructor that takes a char* as a parameter :)

# c# - 如何仅将 xmlns="http://url.com" 添加到 C# 中的 xml 文件？

> ID：10385820
> 
> 赞同：0
> 
> 时间：2012-04-30T14:58:37.060
> 
> 标签：c#, xml, validation, xsd, xml-namespaces

我很难让它发挥作用。我有一个现有的 XML 文件，我只需将 xmlns="http://url.com/path_v1_0" 添加到现有标签（url.com 是任意的，我需要在其中放入其他内容） . 这需要在 C# 中。文件的其余部分需要保持原样，只需要添加 xmlns 部分。

这是我所拥有的一个片段：

```
<?xml version="1.0" encoding="utf-8"?>
<content>
  <block id="root">
    <identification> 
```

这是我需要的一个片段：

```
<?xml version="1.0" encoding="utf-8"?>
<content xmlns="http://url.com/path_v1_0">
  <block id="root">
    <identification> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:37:29.503

好吧，冒着让 XML 狂热分子跳到我头上的风险，最简单的方法如下：

```
 TextReader myInputFile = new StreamReader("test.xml");
  TextWriter myOutputFile = new StreamWriter("newtest.xml");

  myOutputFile.WriteLine(myInputFile.ReadLine());
  myOutputFile.WriteLine("<content xmlns=\"http://url.com/path_v1_0\">");

  string line = myInputFile.ReadLine(); // Waste the original <content> line

  while ((line = myInputFile.ReadLine()) != null)
  {
    myOutputFile.WriteLine(line);
  }

  myInputFile.Close();
  myOutputFile.Close(); 
```

现在正如我所说，这绝对不是正确的 XML 标准方法，存在一些潜在的问题，其中至少是在添加新行时您很可能不会添加 UTF-8 格式的字符串。

然而，它可能是最快和最容易理解的，而不会被 .NET 现在提供的所有各种不同的 XML API 所束缚。

如果您想获得“正确”的方式，那么您需要查看 XDocument 和 XElement 的文档，使用一些 Linq to XML 和这些类中的各种方法，您可以非常轻松地将 XMLNS 标记添加到给定元素中然后保存 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:17:03.470

由于您正在处理由始终以某种格式输出 XML 的工具生成的 XML，因此您可能只需执行一些字符串操作即可：

```
var prefix = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<content>";

var xml = File.ReadAllText(pathToXmlFile);

if (!xml.StartsWith(prefix))
{
    throw new Exception("Wrong format");
}

xml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n" +
      "<content xmlns=\"http://url.com/path_v1_0\">" +
      xml.Substring(prefix.Length);

File.WriteAllText(pathToXmlFile, xml); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:08:08.037

如果你愿意尝试 Linq2XML，这里有一个小例子：

```
XDocument doc = XDocument.Load("path/to/file.xml");
doc.Root.Attribute("xmlns").Value = "http://url.com/path_v1_0"; 
```

你需要一个

```
using System.Xml.Linq; 
```

* * *

//编辑：我已经尝试使用已经具有 xmlns 属性的现有 XML 文件。所以 dtb 是对的。这是一个工作示例：

```
XDocument oldDoc = XDocument.Load(@"c:\logs\asd.xml");
XNamespace ns = "http://url.com/path_v1_0";
XElement newRoot = new XElement(ns + oldDoc.Root.Name.LocalName, oldDoc.Root.Descendants());
XDocument newDoc = new XDocument(newRoot); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T15:35:03.017

使用此例程将命名空间设置为您的 xml

```
 public static void SetDefaultXmlNamespace(XElement element, XNamespace xmlns)
    {
        if (element.Name.NamespaceName == string.Empty)
            element.Name = xmlns + element.Name.LocalName;

        foreach (var e in element.Elements())
            SetDefaultXmlNamespace(element, xmlns);
    } 
```

如下调用它

```
XDocument doc = XDocument.Load(xmlfilepath);
SetDefaultXmlNamespace(doc.Root, "http://url.com/path_v1_0"); 
```

# javascript - 变量的访问值

> ID：10385824
> 
> 赞同：2
> 
> 时间：2012-04-30T14:58:54.777
> 
> 标签：javascript

我们可以通过它们的名称来调用变量，如下所示：

```
var name="a";
var a=4;
eval("alert("+name+")");//this will alert 4 
```

但我听说不推荐使用 eval 。有没有办法在没有 eval 的情况下按名称调用变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:01:04.420

你是对的，`eval`绝对不推荐。一种常见的方法是使它们成为对象的属性，然后使用方括号表示法来访问它们：

```
var name = "a";
var myObj = {
    a: 4
};
alert(myObj[name]); 
```

这是一个[工作示例](http://jsfiddle.net/K9DmF/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:00:52.820

如果变量是全局的，你可以这样做`window[name]`，否则，你不能那样做。“变量”是 PHP 的东西。

如果您想这样做，请更改您的程序，以便您的变量存储在一个对象中。

```
var vars = {
    a: 4
};
var name = "a";

alert(vars[name]); 
```

# iphone - NSString 转换 utf8

> ID：10385829
> 
> 赞同：1
> 
> 时间：2012-04-30T14:59:11.433
> 
> 标签：iphone, objective-c, unicode, encoding

我有从网上下载的字符串，如下所示：

```
&#x5DE;&#x5E9;&#x5D4; &#x5E4;&#x5E8;&#x5E5; 
```

我怎样才能从这个字符串中得到真正的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:19:13.923

你可以试试谷歌开发的**GTMNSString+HTML**类。具体来说，方法：

```
/// Get a string where internal characters that are escaped for HTML are unescaped 
//
///  For example, '&amp;' becomes '&'
///  Handles &#32; and &#x32; cases as well
///
//  Returns:
//    Autoreleased NSString
//
- (NSString *)gtm_stringByUnescapingFromHTML; 
```

[Github](https://github.com/mwaterfall/MWFeedParser/tree/master/Classes) (Michael Waterfall) - 实际上来自[Google Toolbox for Mac](http://google-toolbox-for-mac.googlecode.com/svn/trunk/Foundation/GTMNSString+HTML.h) - 可能与 iOS 兼容，也可能不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:34:49.270

您从网络获取的字符串包含 HTML 实体（即：）`&#x5DE;`。您可以手动检测和捕获十六进制值（即：`0x5DE`在这种情况下）并将其提供给 NSMutableString。

这个其他问题可能对您有其他有用的选择：[Obj​​ective-C：如何替换 HTML 实体？](https://stackoverflow.com/questions/2364797)

# php - 验证器 - OOP

> ID：10385831
> 
> 赞同：1
> 
> 时间：2012-04-30T14:59:30.863
> 
> 标签：php, oop

我的代码有问题，不知道该怎么做。我用这个

`$validate = new OOP_Validate;`

`$validate->addValidator(new OOP_Validate_Int());`

`if($validate->isValid('test')) echo 'TRUE';`

并告诉我错误：

```
可捕获的致命错误：传递给 OOP_Validate::addValidator() 的参数 1 必须实现接口 OOP_Validate_Interface，给定 OOP_Validate_Int 的实例，在第 21 行的 C:\xampp\htdocs\GameV\index.php 中调用并在 C:\xampp\htdocs 中定义\GameV\library\OOP\Validate.php 在第 37 行

```

添加验证器：

```
公共函数 addValidator(OOP_Validate_Interface $validator, $breakChain = false){
    $this->_validators[] = 数组（
        '名称' => $验证器，
        '中断' => $breakChain,
    );
    返回$这个；   
}

```

界面：

```
接口 OOP_Validate_Interface {

    公共函数 isValid($value);
    公共函数 getMessage();

}

```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:20:09.723

正如错误消息所解释的，该`addValidator`方法要求传递给它的第一个参数实现名为`OOP_Validate_Interface`.

```
$validate->addValidator(new OOP_Validate_Int() /* <-- this argument must implement OOP_Validate_Interface */); 
```

检查您的代码并将类声明更改为`OOP_Validate_Int`：

```
class OOP_Validate_Int implements OOP_Validate_Interface
{

    /* 
       Then ensure that all the methods required by OOP_Validate_Interface
       are defined in this class.
    */

} 
```

有关更多信息，请查看 PHP 手册中的[对象接口](http://php.net/manual/en/language.oop5.interfaces.php)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:23:55.673

这里的问题是方法 addValidator 接受类型为 OOP_Validator_Interface 的第一个参数，但您在此处向其传递 OPP_Validate_Int() 的实例：`$validate->addValidator(new OOP_Validate_Int());`。

我建议不要显式地重新键入 addValidator() 的第一个参数（如果它不是某些框架的一部分），或者另一方面，类 OOP_Validate_Int 必须实现 OOP_Validator_Interface: `class OOP_Validate_Int implements OOP_Validator_Interface { .. }`。

# java - spring mvc，想要打包类（模型等）、拦截器、控制器以供重用

> ID：10385833
> 
> 赞同：1
> 
> 时间：2012-04-30T14:59:46.600
> 
> 标签：java, spring, spring-mvc

我有一些代码在 Spring MVC 应用程序中使用，我想在其他应用程序中重复使用。

代码包括：

```
controllers
model classes
interceptor
service classes 
```

还有一些 mysql 表，但我认为我无法将其打包，我可能会为此创建一个脚本。

是否可以将上述代码元素打包（在 .jar 中），然后以某种方式将其连接到 spring.xml 文件中？

我怎样才能做到这一点？

我想以模块方式连接它，而不是单独连接。

如果有不止一种方法可以做到这一点，我很想知道我的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:42:23.170

对的，这是可能的。每个模块创建单独的项目。创建构建脚本。如果您使用的是maven，则相对简单。至少你可以找到很多例子来开始。您的 spring 模块可以包含类和 XML 描述符。

当您开发应用程序时，为其创建项目并将您的“spring modele”添加为依赖项。现在，当您编写应用程序级别的 spring 描述符时，您可以使用模块的类和预定义的描述符。

实际上 spring 本身就是模块化的。在我们的术语中，它由核心和许多模块组成。应用程序程序员使用这些模块。这意味着他们还可以创建自己的可重用模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:54:02.447

像这样为所有已编译的模块创建一个 Jar..

```
first create a menifest file named menifest.MF and then execute command..

>jar cmf menifest.MF my_modules.jar *.class 
```

现在在你的另一个项目的类路径中使用 my_modules.jar 并像往常一样使用 bean

# jqgrid - jqGrid 4.3.2 inlineNav 添加选择el

> ID：10385838
> 
> 赞同：0
> 
> 时间：2012-04-30T15:00:05.517
> 
> 标签：jqgrid, inline-editing

当网格的添加功能启动时，我遇到了一个问题。我的 colModel 为选择元素定义了一些有效的选项。当面临向网格添加新行时，选择元素总是以未定义的值呈现，而不是 colModel 中的实际值之一。确保仅显示此元素的实际 colModel 值的技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:51:45.057

根据文档，您的语法错误`editoptions`配置中有语法错误：

```
Note the last element in the string - it should not end with ; 
```

因此你的`vendorOptions`价值应该是：

```
var vendorOptions = {value: "1:AAA;2:BBB;3:CCC;4:DDD;5:EEE;6:FFF"}; 
```

你可以在这里阅读完整的文档：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editable](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editable)

# c# - 在特定时间启动命令的 .NET 应用程序

> ID：10385841
> 
> 赞同：0
> 
> 时间：2012-04-30T15:00:34.167
> 
> 标签：c#, .net, scheduling

> **可能重复：**
> [使用 C# 在特定时间运行 Windows 服务任务](https://stackoverflow.com/questions/5793011/run-windows-service-task-at-a-specific-time-using-c-sharp)

我正在.NET (c#) 中构建一个应用程序。我试图找出如何在我指定的不同时间每天在特定时间写入日志。

我知道我可以通过计划任务轻松地做到这一点，但我想保持应用程序运行（最好是控制台应用程序）。并在指定时间启动命令。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:04:01.993

您可以查看[Quartz .NET](http://quartznet.sourceforge.net/)库。这对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:09:12.490

您想使用 3 个[.Net Timer 类](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)之一，很可能是[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)。您将设置 Timer 的 Interval 属性，并在 Timer 的 Elapsed 事件的事件处理程序中进行日志记录

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T15:03:53.870

如果您希望应用程序继续运行，请使用 Windows 服务，但就我个人而言，鉴于我对您的要求的了解，我可能只会执行计划任务。

Windows 服务：http: [//msdn.microsoft.com/en-us/library/zt39148a%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.80%29.aspx)

# html - 为什么这个 jpg 图像没有出现在 IE 7 和 8 中

> ID：10385845
> 
> 赞同：4
> 
> 时间：2012-04-30T15:00:41.080
> 
> 标签：html, css, wordpress, internet-explorer

由于某种原因，这张 jpg 图像没有出现在 IE7 或 8 中……这是 php：

```
<img src="<?php echo get_option('logo');?>" alt="logo" height="70px" width="405px" /> 
```

和输出（由于某种原因没有结束图像标签）：

```
<img src="http://guardianweb.edulence.com/fosterklima/wp-content/uploads/2012/04/guardian-4-color.jpg" alt="logo" height="70px" width="405px"> 
```

直播网址： http: [//guardianweb.edulence.com/fosterklima/](http://guardianweb.edulence.com/fosterklima/)

编辑***图像已调整为 400 x 70，但仍然无法正常工作...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T14:24:57.353

虽然这篇[文章](http://www.mattcutts.com/blog/jpeg-problems-in-firefox-and-ie/)比较老，但它可能有用。

如果 JPG 图像是使用 CMYK 而不是 RGB 保存的，则可能无法显示。看起来旧版本的 IE（和 Firefox）有这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:05:54.180

我看不出您所指的 HTML 标记有任何问题，并且`/`源代码中存在图像末尾的缺失。

但是，与图像元素的大小相比，此图像非常庞大，这将减慢加载时间。

我建议您调整图像的大小`405px * 70px`，使其适合`img`元素，而无需浏览器为您调整大小（这会导致失真）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:14:47.017

你的图太大了。IE 不会显示太大的图像。您应该制作一个副本并将其缩小到`405px * 70px`然后更改您的 HTML 以指向新图像。

* * *

HTML 没有任何问题。它出现在谷歌浏览器、火狐浏览器上。

![证明](../Images/626169158cc671bcef7215e5c7e75350.png)

# java - 在本地执行声纳运行器

> ID：10385857
> 
> 赞同：0
> 
> 时间：2012-04-30T15:01:43.263
> 
> 标签：java, sonarqube

是否可以在本地执行 sonar-runner 以进行调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:40:37.010

不仅是可能的，它实际上是运行声纳的“推荐”方式之一。在本地，我假设您希望在您的机器上同时拥有 Sonar 服务器和要分析的项目。安装 Sonar，使用 Maven 构建插件并将其复制到 sonar 插件目录，然后使用命令行启动运行程序，如此[处](http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Runner)和[此处](http://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Sonar+Runner)所述。

# ruby - 我如何抓取/与谷歌地图交互以制作 FloatingSheep 风格的地图（例如，人均酒吧数）？

> ID：10385860
> 
> 赞同：1
> 
> 时间：2012-04-30T15:01:53.920
> 
> 标签：ruby, maps, screen-scraping

我在 FloatingSheep.org 上查看了这张[美国各地酒吧与杂货店的地图](http://www.floatingsheep.org/2010/02/beer-belly-of-america.html)，并注意到他们使用了谷歌地图目录中的数据。

我的问题是：如何访问目录以查找类似信息（例如，每个城市的日托、每个城市的杂货店等）？

我知道一些 Ruby - 足以抓取某些网页。我从[Dan Nguyen 的 Bastards Book of Ruby](http://ruby.bastardsbook.com/)中了解到。

如果您需要我更具体或提供有关我要查找的内容的更多信息，请告诉我。

谢谢。

# iphone - 调用 UILocalNotification cancelAllLocalNotifications 是否仅取消正在调用它的应用程序或所有通知的通知？

> ID：10385862
> 
> 赞同：0
> 
> 时间：2012-04-30T15:02:14.680
> 
> 标签：iphone, objective-c, ios, ipad, uilocalnotification

如果我通过在我的应用程序中调用 UILocalNotification 的 cancelAllLocalNotifications 来取消通知，它是取消仅由我的应用程序设置的通知，还是取消所有应用程序的所有通知？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:50:25.567

它只是取消来自您的应用程序的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:30:12.057

@PixelCloudSt 在这里回答得很好： [iOS - 本地通知 - cancelAllLocalNotifications](https://stackoverflow.com/questions/8033690/ios-local-notifications-cancelalllocalnotifications)

# r - R %in% 运算符

> ID：10385863
> 
> 赞同：67
> 
> 时间：2012-04-30T15:02:16.647
> 
> 标签：r

在`R`中，我正在运行以下脚本：

```
> 1:6 %in% 0:36
[1] TRUE TRUE TRUE TRUE TRUE TRUE 
```

这显然是在产生一个逻辑向量。我已经阅读了文档，但似乎找不到一个可以根据结果返回标量的运算符，这样在有 return 时`1:6 %in% 0:36`会简单地返回。`TRUE``0:37 %in% 0:36``FALSE`

一个存在吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-30T15:04:58.553

您可以使用`all`

```
> all(1:6 %in% 0:36)
[1] TRUE
> all(1:60 %in% 0:36)
[1] FALSE 
```

在类似的注释中，如果您想检查任何元素是否为 TRUE，您可以使用`any`

```
> any(1:6 %in% 0:36)
[1] TRUE
> any(1:60 %in% 0:36)
[1] TRUE
> any(50:60 %in% 0:36)
[1] FALSE 
```

# html - 需要帮助衬一些按钮

> ID：10385864
> 
> 赞同：0
> 
> 时间：2012-04-30T15:02:22.990
> 
> 标签：html, css

我不能让这些按钮保持在同一行，我认为这与 css 中的“清除”有关，因为如果我停用按钮的几乎所有 css 属性（使用 chrome 的检查元素），它们最终会排成一行。

这是页面： http: [//framework.aluxian.com/login.php](http://framework.aluxian.com/login.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:18:41.760

只需覆盖and类中的`clear`属性，按钮将水平对齐。`.button``#loginbutton``#registerbutton`

```
#loginbutton,
#registerbutton {
    clear: none !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:11:54.683

~~用 a 包裹它们`<div>`并清除它。~~只需解开`clear`按钮。这是我刚刚在 Firebug 中尝试过的代码：

```
<form action="login.php" method="post" id="loginform">
<!-- ... -->
<button style="clear: none;" class="button_colour round_all" id="loginbutton" onclick="document.forms['loginform'].submit();"><!-- ... --></button>
<button style="clear: none;" class="button_colour round_all" id="registerbutton" onclick="location.href='register.php'"><!-- ... --></button>
<!-- ... -->
</form> 
```

`onclick`是的，我相信你不需要所有这些

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:15:07.110

这是因为main.css 样式表 中的`clear: both;`on `#loginbutton`（第 425 行）和（第 12 行）。`button`

删除两者的该属性或指定`clear:none;`on `#loginbutton`。这将取代该`button`属性。如果在 之后添加了另一个按钮`#registerbutton`，您也希望添加`clear:both;`到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T15:11:07.310

```
#registerbutton {
    clear: none;
    display: block;
    float: left;
    margin: 10px 30px 55px;
}

#loginbutton {
    clear: none;
    display: block;
    float: left;
    margin: 10px 30px 55px;
} 
```

# visual-c++ - 为什么一个指针不能存储另一个指针的地址？

> ID：10385868
> 
> 赞同：2
> 
> 时间：2012-04-30T15:02:48.973
> 
> 标签：visual-c++, pointers

我有一个指针如下：

```
int val2 = 90;

int *p = &val2; 
```

然后，我这样做：

```
int *pp = &p; // Line 3 
```

`Line 3`是非法的。我知道它应该写`int **pp = &p`，但我不明白为什么。那是普通变量的地址与指针的地址不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:05:52.600

`int *pp`定义`pp`为指向 an 的指针`int`，但您尝试使用指向 an 的指针的`int`地址而不是a 的地址对其进行初始化`int`。由于“int 的地址”和“int 指针的地址”的类型不同，编译器不会让你这样做（至少没有强制转换，尽管你几乎肯定*不想这样*做去做）。

是的，这两种类型的指针*可能*大小相同，因此 CPU 可以将数据从一个位置移动到另一个位置，而不会出现任何实际问题。然而，编译器会进行类型检查以帮助您避免误伤自己，这就是它在这里所做的。它可以让你用上面提到的演员表做你所要求的事情，但是由于你所做的事情几乎没有意义，如果你真的坚持这样做，你需要使用演员表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:04:05.743

对于[静态类型检查器](http://en.wikipedia.org/wiki/Type_system#Static_typing)，是的。从实施的角度来看没有。

由于类型检查必须确保您分配和传递的内容对于您声明它的方式是正确的，因此它必须拒绝

```
int *pp = &p; 
```

因为您`pp`在尝试将指向 int 的指针的指针存储在那里时声明为指向 int 的指针。即使指向某事物或指向其他事物的指针之间没有区别，如果您将其声明为特定类型，则检查的类型也会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:06:25.490

在绝大多数平台上，所有指针在内存中都是一样的：内存中其他地方的地址。问题主要在于尝试类型安全，以便计算机可以强制正确使用。

如果需要将它们存储为错误的类型，您始终可以在不同的指针类型之间进行类型转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T15:06:56.567

您正在创建一个指向整数的指针，因此编译器希望您分配一个整数的地址。相反，您分配的是指针的地址，而不是整数。为了让编译器知道在哪里寻找 int，您必须添加第二个星号，告诉编译器 pp 指向一个内存地址，而该内存地址又指向一个 int。

# php - 在 php $_SERVER['variable'] 中包含变量的语法

> ID：10385872
> 
> 赞同：-3
> 
> 时间：2012-04-30T15:03:10.730
> 
> 标签：php, syntax

我想在地址中包含一个 $profilepageuserid，我不确定正确的语法。

```
$page=$_SERVER['groups_page.php?view_profile_user_id=$profilepageuserid'];

header("Refresh: $sec; url=$page"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:08:09.670

这里似乎有些混乱。你想要做的似乎是将一个 URI 分配给一个页面变量，然后通过 header 函数发出这个：

```
$page = "groups_page?view_profile_user_id=" .$profilepageuserid . ".php";
header( "Refresh: $sec; url: $page" ); 
```

我不确定您为什么要尝试访问`$_SERVER`此处，但 PHP 解释器会感到困惑，因为您似乎正在调用数组本身中的键。当然，`$_SERVER`数组只有有限数量的键，没有一个类似于您尝试请求的：http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:05:31.017

任何一个：

```
$page=$_SERVER['groups_page?view_profile_user_id=' . $profilepageuserid . '.php']; 
```

或者：

```
$page=$_SERVER["groups_page?view_profile_user_id={$profilepageuserid}.php"]; 
```

如果字符串使用双引号，则只能在字符串中使用变量。否则，您必须拆分变量并将其连接到字符串。

编辑：不确定 .php 是否在正确的位置，但你明白了......

# apache2 - PHP Editing and displaying text from a .txt file

> ID：10385874
> 
> 赞同：3
> 
> 时间：2012-04-21T00:07:54.737
> 
> 标签：apache2, ubuntu, php, database

I have a file named 'views.txt' which contains '0'. When the user loads the page, I want the script to re-write the text document to one higher from the last.

Example;

```
<?php
$a = file_get_contents("views.txt")
$views = $a + 1;
file_put_contents("views.txt",$views);
echo $views;
?> 
```

It won't display anything.

I'm unable to use MySQL, so I'm using text files. :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T00:21:59.257

I would guess that the path to `views.txt` is not relative to the working directory of the file. For safety reasons, you should probably specify the full path to the file; i.e., `/path/to/views.txt`).

You can also use [getcwd](http://php.net/manual/en/function.getcwd.php) to display the current working directory, so the location of "views.txt" will likely be `getcwd() . "/views.txt"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:04:19.107

Your string might really be `0\n`, where `\n` is a newline. Try using:

```
<?php
$views_file = "views.txt";
$allviewfile = file($views_file, FILE_IGNORE_NEW_LINES);
$a = $allviewfile[0];
$views = $a + 1;
file_put_contents($views_file,$views);
echo $views;
?> 
```

# html - 在居中的图像上居中文本和表单（电子邮件输入和提交按钮）

> ID：10385881
> 
> 赞同：1
> 
> 时间：2012-04-30T15:03:37.600
> 
> 标签：html, css, web

我试图在已经居中的图像上居中一些文本和表单（文本输入和提交按钮）。

我的 HTML/CSS 将三个项目居中，但一个接一个，即图像居中，文本居中下方，我的输入表单位于下方。

你能告诉我如何让我的文本和表格在一个居中的图像上居中。如果浏览器窗口的大小发生变化，最终目标是让这三个项目保持居中。

注意：我在尝试居中的三个项目上方还有其他图像和文本

我的HTML如下：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
    <head>
    <title>test</title>
    <link rel="stylesheet" href="style.css" />
    </head>
    <body>
    <div class="banner">
        <img src="banner.png" alt="banner" height="250" width="900" />
    </div>

    <p class="textbox">
    some text. some text.some text.some text.some text.some text.some text.some text.some text.
    </p>

    <--Below is the HTML for the centering of the three items. They are centered sequentally NOT on top of the image.

    <div class="formoutline">
        <img src="formboxdark.png" alt="formbox" height="160" width="350" />
    </div>

    <div class="signupnote">
        </p>please sign up.please sign up.please sign up.please sign up.please sign up.please sign up.please sign up.please sign up.please sign up.</p>
    </div>

    <div class=formlocation>
        <form name="input" action="html_form_action.asp" method="get">
            <input type="text" name="user" class="emailfield" value="email@example.com" />
            <input type="submit" class="submitbutton" value="Submit" />
        </form>

</div>
</div>
</body>
</html> 
```

我的CSS如下：

```
 body
    {
    margin: 0;
    padding: 0;
    height: 100%;
    background:url(texture.jpg);
    }
    .banner
    {
    text-align:center;
    margin-top:15px;
    margin-bottom:0px;
    padding:0px;
    }
    .textbox
    {
    text-align: center;
    color:white;
    font-family: 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;
    font-size:15px;
    }

    /*This is where the CSS for the three items (image, text and form) begins*/

    .formoutline
    {
    text-align:center;
    top:330px;
    left:485px;
    }
    .signupnote
    {
    text-align: center;
    color:#225DCE;
    font-family: 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;
    font-size:13px;
    }
    .formlocation
    {
    text-align:center;
    }
    .emailfield
    {
    text-align:center;
    height:20px;
    width:200px;
    }
    .submitbutton
    {
    height:28px;
    width:70px;
    } 
```

如果您需要任何进一步的细节，请告诉我。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:24:54.540

你想要集中在一起的内容应该都在一个 div 标签中，而不是像你在那里的 3 个单独的标签：

```
<--Below is the HTML for the centering of the three items. They are centered 
sequentally NOT on top of the image.

<div class="style for single containing div">

</p>please sign up.please sign up.please sign up.please sign up.please sign up.please  
sign up.please sign up.please sign up.please sign up.</p>

<form name="input" action="html_form_action.asp" method="get">
        <input type="text" name="user" class="emailfield" value="email@example.com" />
        <input type="submit" class="submitbutton" value="Submit" />
</form>
</div> 
```

该 div 的样式：

```
.style for single containing div
{
margin: 0 auto; (this will center your div absolutely, even when resizing your window)
background-image: url('formboxdark.png');
background-repeat: no-repeat;
background-position: center;
height: 160px; 
width: 350px; 
text-align: center;
} 
```

试试看，让我知道

# xml - 如何在一个文件中加入多个 3 个 xml？

> ID：10385889
> 
> 赞同：2
> 
> 时间：2012-04-30T15:04:05.717
> 
> 标签：xml, xslt, asp-classic

如何在一个文件中加入多个 3 个 xml？

在 XML 文件中：01.xml

```
 <xmlResponse>
        <Person>
            <FirstName>FirstName_1</FirstName>
            <LastName>LastName_1</LastName>
        </Person>
        <Person>
            <FirstName>FirstName_2</FirstName>
            <LastName>LastName_2</LastName>
        </Person>
    </xmlResponse> 
```

在 XML 文件中：02.xml

```
<xmlResponse>
    <Person>
        <FirstName>FirstName_2</FirstName>
        <LastName>LastName_2</LastName>
    </Person>
    <Person>
        <FirstName>FirstName_3</FirstName>
        <LastName>LastName_3</LastName>
    </Person>
    <Person>
        <FirstName>FirstName_4</FirstName>
        <LastName>LastName_4</LastName>
    </Person>
</xmlResponse> 
```

在 XML 文件中：03.xml

```
<xmlResponse>
    <Person>
        <FirstName>FirstName_5</FirstName>
        <LastName>LastName_5</LastName>
    </Person>
</xmlResponse> 
```

我需要如下输出（01.xml + 02.xml + 03.XML）

```
<xmlResponse>
    <Person>
        <FirstName>FirstName_1</FirstName>
        <LastName>LastName_1</LastName>
    </Person>
    <Person>
        <FirstName>FirstName_2</FirstName>
        <LastName>LastName_2</LastName>
    </Person>
    <Person>
        <FirstName>FirstName_2</FirstName>
        <LastName>LastName_2</LastName>
    </Person>
    <Person>
        <FirstName>FirstName_3</FirstName>
        <LastName>LastName_3</LastName>
    </Person>
    <Person>
        <FirstName>FirstName_4</FirstName>
        <LastName>LastName_4</LastName>
    </Person>
    <Person>
        <FirstName>FirstName_5</FirstName>
        <LastName>LastName_5</LastName>
    </Person>
</xmlResponse> 
```

希望你的回应，tks...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:03:17.730

试试这个 XSLT 2.0 样式表...

```
<?xml version="1.0"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  version="2.0"
  exclude-result-prefixes="xsl xs fn">

<xsl:output indent="yes" encoding="UTF-8" />
<xsl:param name="doc2" /> <!-- File 02.xml -->
<xsl:param name="doc3" /> <!-- File 03.xml -->
<xsl:variable name="doc2-doc" select="document($doc2)" />
<xsl:variable name="doc3-doc" select="document($doc3)" />

<xsl:template  match="/">
 <xmlResponse>
    <xsl:apply-templates />
    <xsl:apply-templates select="$doc2-doc/*" />
    <xsl:apply-templates select="$doc3-doc/*" />
 </xmlResponse>
</xsl:template>

<!-- Identity transform follows. -->
<xsl:template match="element()">
  <xsl:copy>
    <xsl:apply-templates select="@*,node()"/>
   </xsl:copy>
</xsl:template>
<xsl:template match="attribute()|text()|comment()|processing-instruction()">
  <xsl:copy/>
</xsl:template>

</xsl:stylesheet> 
```

对于转换，输入文档将是您的第一个文档（文件 01.xml），另外两个将作为转换参数传入。

如果您仅限于 XSLT 1.0，则需要进行一些修改，但应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:11:10.070

您可以使用 XSLT，但在 ASP Classic（或实际上其他任何东西）下执行此任务时它会显得过大。

（假设您没有错误标记您的问题）

```
Function GetDom(pathToFile)
    Set GetDom = CreateObject("MSXML2.DOMDocument.3.0")
    GetDom.async = False
    GetDom.setProperty "SelectionLanguage", "XPath"
    GetDom.load pathToFile
End Function

Sub CopyElements(xmlPrimeRoot, xmlDonor)
    Dim elem
    For Each elem In xmlDonor.documentElement.selectNodes("*")
        xmlPrimeRoot.appendChild elem 
    Next  
End Sub

Dim xmlPrime: Set xmlPrime = GetDom(pathToFile1)

CopyElements xmlPrime.documentElement, GetDom(pathToFile2)
CopyElements xmlPrime.documentElement, GetDom(pathToFile3)

xmlPrime.save pathToDestinationFile 
```

如果目标输出是 ASP 响应，那么最后一行可以是

```
xmlPrime.save Response 
```

# mysql - 如何使用子查询将数据从视图中插入表中？

> ID：10385893
> 
> 赞同：0
> 
> 时间：2012-04-30T15:04:22.143
> 
> 标签：mysql, subquery

我在将数据插入我的表“事件”时遇到了小问题

```
 +-------+----------+------+-----+---------+----------------+
 | Field | Type     | Null | Key | Default | Extra          |
 +-------+----------+------+-----+---------+----------------+
 | id    | int(11)  | NO   | PRI | NULL    | auto_increment |
 | name  | longtext | YES  |     | NULL    |                |
 +-------+----------+------+-----+---------+----------------+ 
```

从我看来old_data：

```
+-------+------+------+-----+---------+-------+
| Field | Type | Null | Key | Default | Extra |
+-------+------+------+-----+---------+-------+
| event | text | YES  |     | NULL    |       |
+-------+------+------+-----+---------+-------+ 
```

我想将视图 old_data 中的字段“事件”中的数据插入到表“事件”中的“名称”字段中，我试图使用命令：

```
 insert into 'events' ('name') select 'event' from 'old_data'
 insert into 'events' ('name') select 'event' from 'old_data' group by 'event'; 
```

等等等等。每次都是语法错误。为什么？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:06:41.917

# templates - 如何在 html 模板中迭代 Hashmap

> ID：10385894
> 
> 赞同：2
> 
> 时间：2012-04-30T15:04:23.167
> 
> 标签：templates, playframework, hashmap, playframework-2.0

我是玩 2.0 的新手，我正在寻找一种在 html 模板中迭代哈希图的方法。我有一个绑定到模型（Java 端）的表单，该模型具有称为文章的 hashmap(Long, List(Article)) 属性。

在旧版本中，我有一个 arraylist 代替了 hashmap。在我的模板中，我使用了运行良好的 @repeat 助手。

```
@repeat(editBusinessForm("articles"), min = 0) { article =>
    @businessarticle(article)
} 
```

我尝试了几种方法来适应这个@repeat 或@for，但我找不到方法。

我需要根据类别过滤器仅显示部分文章。我选择了 hashmap 来做到这一点，但也许还有其他方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T19:12:19.387

```
@for((key, value) <- yourMap) {
  …
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T17:50:51.700

您可以执行以下操作：

```
@for(key <- yourHashMap.keySet()){
    //get you content
    yourHashMap.get(key)
    //do what you need with the list<articles>
    //example  
    @repeat(yourHashMap.get(key)) { article =>
           @businessarticle(article)
    }
} 
```

希望这可以帮助。

# node.js - 将数据异步附加到文件

> ID：10385897
> 
> 赞同：2
> 
> 时间：2012-04-30T15:04:32.170
> 
> 标签：node.js, file-io, recursion

我正在使用这个异步递归函数来遍历目录的文件和文件夹，当找到一个 .css 文件时，我将数据附加到一个名为“common.css”的文件中。

```
var walk = function(dir, done) {
 var results = [];

 fs.readdir(dir, function(err, list) {
      if (err) return done(err);
      var pending = list.length;
      if (!pending) return done(null);
      list.forEach(function(file) {
           file = dir + '/' + file;
           fs.stat(file, function(err, stat) {
                if (stat && stat.isDirectory()) {
                     minimizer(file, function(err, res) {
                          results = results.concat(res);
                          if (!--pending) done(null);
                     });
                } else if(file) {
                     fs.open('common.css', 'a', 666, function( err, id ) {
                         fs.write( id, 'hello', null, 'utf8', function(){
                             fs.close(id, function(){
                                  console.log('file closed');
                             });
                         });
                     });
                }
                if (!--pending) done(null);
           });  
      });
});   } 
```

问题是，由于是异步的，我感觉到有时函数的多个实例同时写入文件。有什么办法可以控制这种通量并将写入任务排队？

此代码的目的是合并在目录中找到的 .css 文件。我不能在这个项目中使用外部工具。

编辑答案：嗯，为此，我可以收集我想要合并的所有 .css 文件的路径，在我拥有它们之后，调用一个同步函数来编写它们。

这就是

> 变量结果 = []

是为了。我才意识到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:30:21.027

我认为我会考虑使用[async.js](https://github.com/caolan/async)库之类的东西，它具有确保事情以正确的顺序发生的能力，包括`async.forEachSeries(arr, eachFn, doneFn)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:10:04.027

我的建议是，如果您将其作为独立应用程序执行 - 不是某些更大应用程序的一部分，您可以将所有 css 文件写入 console.log 并通过“node combine.js > combine.cc”调用。从我使用 FileStreams 和 console.log 看到的情况来看，它不会乱写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:23:19.783

您可以`common.css`在开始时打开并保持文件描述符打开，然后`fs.write(id, ...)`在遇到 CSS 文件时调用。这不是您当前`common.css`每次重新打开的方法。

在您的代码中，看起来您正在写入`hello`文件。如果确实如此，或者如果您编写的内容相对较短（通常为 512 或 4096 字节，具体取决于平台），则所有附加都`common.css`将是原子的，因此同时写入的不同异步函数不会相互干扰.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:42:28.300

好吧，我最终出于同样的目的使用了串行递归函数。它解决了这个问题。在从[node.js fs.readdir 递归目录搜索中获取的用户“chjj”的答案中](https://stackoverflow.com/questions/5827612/node-js-fs-readdir-recursive-directory-search)

```
var fs = require('fs');
var walk = function(dir, done) {
  var results = [];
  fs.readdir(dir, function(err, list) {
    if (err) return done(err);
    var i = 0;
    (function next() {
      var file = list[i++];
      if (!file) return done(null, results);
      file = dir + '/' + file;
      fs.stat(file, function(err, stat) {
        if (stat && stat.isDirectory()) {
          walk(file, function(err, res) {
            results = results.concat(res);
            next();
          });
        } else {
          results.push(file);
          next();
        }
      });
    })();
  });
}; 
```

谢谢大家的建议 ：）

# python - 计算字符串中某个字符出现次数的首选方法是什么？

> ID：10385902
> 
> 赞同：4
> 
> 时间：2012-04-30T15:04:44.027
> 
> 标签：python, string

如果没有 ，我该如何执行此操作`string.count()`，因为它在 Python v2.7.3 文档中被列为已弃用？

我找不到我应该使用的东西。

编辑：该问题最初表示`str.count()`已弃用，但这是不正确且具有误导性的。有关说明，请参见[https://stackoverflow.com/a/10385996/966508](https://stackoverflow.com/a/10385996/966508)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T15:11:36.137

使用[`str.count()`](http://docs.python.org/py3k/library/stdtypes.html#str.count)- 它没有被列为已弃用。

（[Python 2.7.3](http://docs.python.org/library/stdtypes.html#str.count)，[Python 3.2.3](http://docs.python.org/library/stdtypes.html#str.count) - 两者都没有关于被弃用的说明）。

```
>>> "test".count("t")
2 
```

我假设你的意思是[`string.count()`](http://docs.python.org/library/string.html#string.count)- 它被贬低，有利于字符串对象的方法。

不同之处在于它`str.count()`是字符串对象的方法，而是模块`string.count()`中的函数。`string`

```
>>> "test".count("t")
2
>>> import string
>>> string.count("test", "t")
2 
```

很清楚为什么后者已被弃用（并在 3.x 中被删除）以支持前者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T15:05:52.800

使用[`len()`](http://docs.python.org/library/functions.html#len)：

```
>>> len('abcd')
4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T15:13:57.427

这在 2.7.3 中运行良好

```
>>> strs='aabbccddaa'
>>> strs.count('a')
4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T22:24:29.593

不使用 count 你可以这样做：

```
def my_count(my_string, key_char):
    return sum(c == key_char for c in my_string) 
```

结果：

```
>>> my_count('acavddgaaa','a')
5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T03:59:22.760

另一种方式可以是

`strs.__len__()`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-04-29T19:39:39.580

```
sentence = str(input("Write a Sentence: "))
count = 0
for word in sentence:
    if word == " ":
    count = count + 1
print(count+1) 
```

# jquery - rails3 应用程序使用 jquery 但不将其包含在 Gemfile 中，应该吗？

> ID：10385903
> 
> 赞同：1
> 
> 时间：2012-04-30T15:04:44.793
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, generator, gemfile

我继承了一个使用 jquery 的 rails 应用程序它在 assets/javascripts 中包含很多 javascript，application.js 需要所有其他文件，包括

```
//= require jquery
//= require jquery_ujs 
```

这很好，javascript 工作正常。

但是我也期待看到

```
gem "jquery-rails" 
```

在 Gemfile 中。

**问题：
gemfile 条目是否只需要初始生成器，如果*不*`rails g jquery:install`使用生成器可以*不*包含它- js 仍然可以工作吗？**

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:10:52.900

`jquery`和的实际来源`jquery_ujs`包含在 gem 中，因此您需要保留它。但是，如果您使用资产管道并预编译资产，则不需要在预编译后加载 gem。这意味着将 gem 放入`assets`Gemfile 中的组是安全的。

如果您的 Gemfile 中根本没有 jquery-rails，但它仍然可以工作，这意味着 jquery 的来源在您的加载路径中的其他位置。您可能想签出`app/assets`和。这没关系，但这不是必需的，这意味着您在进行捆绑更新时不会自动获得更新。`lib/assets``vendor/assets`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:06:15.953

只要在您的浏览器中加载了 JQuery JS，JQuery 仍然可以工作。*

# android - Android项目（IDEA）中的棕色文件和文件夹？

> ID：10385904
> 
> 赞同：4
> 
> 时间：2012-04-30T15:04:46.667
> 
> 标签：android, intellij-idea

我使用更新到最新版本的 IDEA 11。我在IDEA中打开了一个Eclipse项目，有些文件夹和文件的文字颜色是浅棕色，而有些则是正常的黑色。

看：

1)![一](../Images/93c05a4abf2ee94127bd199e42f9d104.png)

2)![二](../Images/26cef481848744fba5814bfd71286cbe.png)

我尝试重建项目，但没有帮助。不同的颜色代表什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T15:18:17.157

这些颜色代表文件状态

> 棕色 - 未知 - 文件在本地存在，但不在存储库中，并且未计划添加。
> 
> 黑色 - 最新

![在此处输入图像描述](../Images/87d9179a05a480d32f58beb7dfba8618.png)

文件状态亮点 - [http://www.jetbrains.com/idea/webhelp/file-status-highlights.html](http://www.jetbrains.com/idea/webhelp/file-status-highlights.html)

刷新状态 - [http://www.jetbrains.com/idea/webhelp/refreshing-status.html](http://www.jetbrains.com/idea/webhelp/refreshing-status.html)

# knockout.js - KnockoutJS 选项绑定

> ID：10385905
> 
> 赞同：0
> 
> 时间：2012-04-30T15:04:48.493
> 
> 标签：knockout.js

所以我在一个页面上说 5 个选择列表。我对它们中的每一个都有绑定选项，它们都绑定到同一个数据集，例如状态模型。

一旦有人更改其中一个选择的状态，我想对其采取行动。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:15:34.273

通常，当值更改时，您使用 a`ko.computed`来处理事情：http: [//knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)

但是如果你想观察一个特定的 observable 何时发生变化，你可以使用`subscribe`： http: [//knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

如果遇到问题，您可以分叉并更新此 jsfiddle 以向我发送代码示例：http: [//jsfiddle.net/JasonMore/p6Vcc/](http://jsfiddle.net/JasonMore/p6Vcc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:39:35.673

If I understood your question correctly, I imagine you have one ko.observable variable per select list that keeps track of the currently selected value. If you want to take action everytime one of these index changes, then you can use the subscribe function:

```
var viewModel = {
   firstSelectListIndex : ko.observable(), // bound to the first select list value
   secondSelectListIndex : ko.observable(),
   ...   
}; 
```

then if you are interested in taking action when the user changes the state of the first select list, you can do:

```
viewModel.firstSelectListIndex.subscribe(function(newValue) { 
    // your code
}); 
```

and you have the new value, associated to the new selected item in the list, passed as a parameter.

# ajax - GWT 相当于 Smart-GWT 的 Live Grid

> ID：10385910
> 
> 赞同：6
> 
> 时间：2012-04-30T15:05:06.337
> 
> 标签：ajax, gwt, grid, smartgwt

是否有与 SmartGWT 的 Live Grid 等效的 GWT 与滚动数据的异步加载？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T18:50:24.293

目前，GWT 中的丰富网格还没有足够的等价物，更不用说 Ajax 驱动的网格小部件了。

一个合适的替代方案是[GXT 的 live grid](http://www.sencha.com/examples/#ExamplePlace%3alivegrid)，但这只是从煎锅中进入火中，因为您必须使用 GXT 而不是 SmartGWT。

GWT 并不打算用作小部件库，提供大量的 UI 小部件选择，而只是为 Java 程序员提供一个牢固的基础架构，以便轻松开发丰富的 Ajax Web 应用程序。它可以（并且*应该*）通过补充小部件库进行扩展，以弥补其不足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:31:15.130

您可以使用单元格表、数据 Grid 。听到的展示具有简单的单元格列表示例，与您的要求相同，因此您可以对单元格表应用相同的逻辑，并且可以在 GWT 中创建实时网格。听到的是单元格列表[单元列表示例 GWT的链接](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellList)

# android - 针对 xsd 的 xml 架构转换问题在 android 应用程序中给出非法异常

> ID：10385914
> 
> 赞同：3
> 
> 时间：2012-04-30T15:05:42.497
> 
> 标签：android, xml, xsd

我已经编写了一个代码来验证给定的 xml 文件与我的 android 应用程序中给定的 xsd 文件。但它给出了非法异常错误。在一些帖子中，我看到它是因为 Java 版本低。但是我的 java 版本是 1.6.0_20。请检查以下代码、错误日志和建议。

代码：

```
 try {
        // parse an XML document into a DOM tree
        parserFactory = DocumentBuilderFactory.newInstance();
        parserFactory.setNamespaceAware(true);
    } catch (Exception e) {
        Log.e("Exception", "ERROR Last : " + e);
        e.printStackTrace();
    }

    DocumentBuilder parser = null;
    try {
        parser = parserFactory.newDocumentBuilder();
    } catch (ParserConfigurationException e1) {
        e1.printStackTrace();
        Log.e("Exception", "ERROR 1: " + e1);
    }
    Document document = null;
    try {
        document = parser.parse(getResources().openRawResource(
                R.raw.change_pin_request_xaml));
    } catch (SAXException e1) {
        e1.printStackTrace();
        Log.e("Exception", "ERROR 2 : " + e1);

    } catch (IOException e1) {
        e1.printStackTrace();
        Log.e("Exception", "ERROR 3 : " + e1);
    }

    try {
        // create a SchemaFactory capable of understanding WXS schemas
        factory = SchemaFactory
                .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        // W3C_XML_SCHEMA_INSTANCE_NS_URI 
        // W3C_XML_SCHEMA_NS_URI

        // load a WXS schema, represented by a Schema instance
        schemaFile = new StreamSource(getResources().openRawResource(
                R.raw.change_pin_request_xsd));
    } catch (Exception e) {
        e.printStackTrace();
        Log.e("Exception", "ERROR special " + e);
    }
    Schema schema = null;

    try {
        schema = factory.newSchema(schemaFile);
    } catch (SAXException e1) {
        Log.e("Exception", "ERROR 4 : " + e1);
        e1.printStackTrace();
    }

    // create a Validator instance, which can be used to validate an
    // instance document
    Validator validator = schema.newValidator();

    // validate the DOM tree
    try {
        try {
            validator.validate(new DOMSource(document));
        } catch (IOException e) {
            Log.e("Exception", "ERROR 5 : " + e);
            e.printStackTrace();
        }
    } catch (SAXException e) {
        Log.e("Exception", "ERROR 6 : " + e);

    } 
```

错误：

```
04-30 20:34:12.658: W/System.err(921): java.lang.IllegalArgumentException: http://www.w3.org/2001/XMLSchema
04-30 20:34:12.658: W/System.err(921):  at javax.xml.validation.SchemaFactory.newInstance(SchemaFactory.java:192)
04-30 20:34:12.658: W/System.err(921):  at com.xml.xsd.test.XmlXsdTestActivity.onCreate(XmlXsdTestActivity.java:64)
04-30 20:34:12.658: W/System.err(921):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-30 20:34:12.658: W/System.err(921):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-30 20:34:12.658: W/System.err(921):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-30 20:34:12.658: W/System.err(921):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-30 20:34:12.658: W/System.err(921):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-30 20:34:12.658: W/System.err(921):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-30 20:34:12.658: W/System.err(921):  at android.os.Looper.loop(Looper.java:123)
04-30 20:34:12.658: W/System.err(921):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-30 20:34:12.669: W/System.err(921):  at java.lang.reflect.Method.invokeNative(Native Method)
04-30 20:34:12.669: W/System.err(921):  at java.lang.reflect.Method.invoke(Method.java:507)
04-30 20:34:12.669: W/System.err(921):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-30 20:34:12.669: W/System.err(921):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-30 20:34:12.669: W/System.err(921):  at dalvik.system.NativeStart.main(Native Method)
04-30 20:34:12.669: E/Exception(921): ERROR special java.lang.IllegalArgumentException: http://www.w3.org/2001/XMLSchema 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:58:42.637

这应该是一条评论，但由于我无法发表评论，因此无法将其作为答案。

在 Package Explorer > Properties > Java Compiler 中右键单击您的项目

看看它是否使用 1.6 编译。我遇到了一个奇怪的问题，这是因为 eclipse 是在 1.5 中编译的。

# android - 当 ListView 有页脚时，CursorAdapter 的 getCursor() 上出现 ClassCastException

> ID：10385919
> 
> 赞同：0
> 
> 时间：2012-04-30T15:05:59.090
> 
> 标签：android

我有一个带有扩展 CursorAdapter 的自定义适配器的 ListView。ListView 也有一个页脚视图

当在 OnListItemClickListener 中单击列表项（不是页脚）时，我得到一个 ClassCastException

```
Cursor c = ((CursorAdapter)l.getAdapter()).getCursor();

E/AndroidRuntime( 8579): FATAL EXCEPTION: main
E/AndroidRuntime( 8579): java.lang.ClassCastException: android.widget.HeaderViewListAdapter
E/AndroidRuntime( 8579):        at com.gbenhaim.dealsapp.BrowsePostsActivity.onListItemClick(BrowsePostsActivity.java:277)
E/AndroidRuntime( 8579):        at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
E/AndroidRuntime( 8579):        at android.widget.AdapterView.performItemClick(AdapterView.java:284)
E/AndroidRuntime( 8579):        at android.widget.ListView.performItemClick(ListView.java:3513)
E/AndroidRuntime( 8579):        at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
E/AndroidRuntime( 8579):        at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime( 8579):        at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 8579):        at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 8579):        at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime( 8579):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 8579):        at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 8579):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime( 8579):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime( 8579):        at dalvik.system.NativeStart.main(Native Method) 
```

在设置适配器之前，页脚视图被膨胀并添加到列表视图中。

单击页脚工作正常，如果我不将页脚添加到列表视图单击列表项工作正常

有什么问题，我该如何解决？

编辑：我的自定义适配器扩展 CursorAdapter 并覆盖 BindView 和 NewView

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
if (v == footer) {
    ...
} else {
        Cursor c = ((CursorAdapter) l.getAdapter()).getCursor();
        c.moveToPosition(position); 
        ...
    }
}

class PostAdapter extends CursorAdapter {

    public PostAdapter(Context context, Cursor c) {
        super(context, c);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        // DISPLAY DATA in view
                    ...
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(context);
        return inflater.inflate(R.layout.postrow, parent, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T15:12:17.393

好吧，从错误的外观来看，它似乎不同意您的 HeaderViewListAdapter 可以强制转换为 CursorAdapter。

为什么不向我们展示一些 HeaderViewListAdapter 的代码？

**编辑**：似乎因为您的 ListView 中有页眉/页脚，所以您返回的适配器是 HeadListViewAdapter，它包装了您的原始适配器。

来自 Android 开发 API：

```
HeaderViewListAdapter

ListAdapter used when a ListView has header views. This ListAdapter wraps another one and also keeps track of the header views and their associated data objects. 
```

[http://developer.android.com/reference/android/widget/HeaderViewListAdapter.html](http://developer.android.com/reference/android/widget/HeaderViewListAdapter.html)

以下都是有根据的猜测，但请尝试一下：

1.  l.getAdapter <-- HeaderListViewAdapter

2.  ((HeaderListViewAdapter)l.getAdapter).getWrappedAdapter() <-- 您创建的自定义适配器。

所以代替这个：`Cursor c = ((CursorAdapter) l.getAdapter()).getCursor();`

试试这个：

```
HeaderViewListAdapter hlva = (HeaderViewListAdapter)l.getAdapter();
PostAdapter postAdapter = (PostAdapter)hlva.getWrappedAdapter();
Cursor cur = postAdapter.getCursor(); 
```

我把它分解了，这样如果它不起作用，你就会确切地知道哪个语句出错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:19:13.517

它显然不喜欢你的演员。没有看到代码，这几乎是猜测，但这里有。

尝试改变这个：

```
Cursor c = ((CursorAdapter)l.getAdapter()).getCursor(); 
```

对此：

```
Cursor c = ((CursorAdapter)((ListView)l).getAdapter()).getCursor(); 
```

或者，如果 HeaderViewListAdapter 不是 CursorAdapter 的扩展，请尝试：

```
Cursor c = ((HeaderViewListAdapter)((ListView)l).getAdapter()).getCursor(); 
```

# c# - 使用 install shield 部署后，应用程序在某个时间点崩溃

> ID：10385925
> 
> 赞同：0
> 
> 时间：2012-04-30T15:06:26.047
> 
> 标签：c#, database, ms-access, installshield

向大家问好！

这是我第二次遇到相当大的问题，希望溢出的社区来救援！

好吧，开始吧：我有这个程序，我在其中连接到一个 microsoft 数据库 (Access 2003)。当我调试它时，一切正常。我可以很好地访问它并恰到好处地向它添加数据。

```
 int val = 0;
        int ok = 1;
        do
        {

            try
            {

                OleDbCommand cmd = new OleDbCommand();
                {
                    cmd.Connection = Variables.con;
                    cmd.CommandText = "Select * from users";
                    using (OleDbDataReader dr = cmd.ExecuteReader())
                    {

                        while (dr.Read())
                        {
                            if (dr["us_name"].ToString() == usnT.Text)
                            {
                                ok = 0;
                                break;
                            }
                        }

                    }
                }
                if (ok == 0)
                {
                    MessageBox.Show("Username already taken");
                    break;
                }
                if (usnT.Text != "" && pswdT.Text != "" && ok == 1)
                {

                    pswdT.Text = pswdT.Text.ToLower();
                    string vsql = string.Format("insert into users values({0},'{1}',{2},'{3}','{4}')", id, usnT.Text, val, val, pswdT.Text);
                    OleDbCommand vcom = new OleDbCommand(vsql, Variables.con);
                    vcom.ExecuteNonQuery();
                    MessageBox.Show("success");
                    vcom.Dispose();
                }
                break;

            }
            catch
            {
                id++;
            }
        } while (true); 
```

但是，在我使用 InstallShield 部署它之后，除了上面的代码之外，该应用程序运行良好。每当我尝试向数据库添加新帐户时，它都会崩溃。

感谢您抽出宝贵时间，希望您能帮我解决这个问题。我个人认为这很困难，但我仍然是初学者......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:04:32.873

假设您可以将程序集安装在与 Visual Studio 相同的 PC 上：

将 PDB 文件复制到与生成的程序集相同的位置。使用 Visual Studio 附加到进程。设置断点。然后，您应该对问题出在哪里以及问题有一个更好的了解。

如果不能在同一台PC上安装，那么可以考虑远程调试（[http://msdn.microsoft.com/en-us/library/y7f5zaaa.aspx](http://msdn.microsoft.com/en-us/library/y7f5zaaa.aspx)）

远程调试非常棘手，因此您还可以显示引发的任何异常的所有内容。错误消息和堆栈跟踪可能会为您提供所需的所有信息。

# jdbc - 使用 Java 读取 FileMaker Pro fp7 文件

> ID：10385927
> 
> 赞同：1
> 
> 时间：2012-04-30T15:06:34.460
> 
> 标签：jdbc, filemaker

有人导出了 FileMaker Pro 9 表，我正在尝试用 Java 读取它们。我安装了 fmjdbc.jar 我可以注册驱动程序`Class.forName("com.filemaker.jdbc.Driver");`

导出的文件不在服务器上，因此

```
DriverManager.getConnection(“jdbc:filemaker://192.168.1.1/mydatabase”,”username”, “password”) 
```

示例不相关。

如何使用 JDBC 读取 Windows 驱动器上的独立 *.fp7 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:36:58.197

FileMaker 文件需要托管在 FileMaker Server 上，然后您可以使用 JDBC 连接到该服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T03:31:32.333

请注意，com.filemaker.jdbc.Driver 版本仅适用于 FileMaker 版本 11 及更高版本。在此之前，您需要使用 SEQUELink 驱动程序 - 您应该在您的 FileMaker 版本的安装程序包中找到它。

IIRC FileMaker Pro 可以用作 JDBC 主机，但是您需要确保您尝试访问的数据库文件具有允许的 ODBC/JDBC 扩展权限（在 FileMaker 中，打开文件然后选择定义->帐户并创建一个包括 fmxdbc 的权限集）。

# xml - xmllint 中的缩进级别

> ID：10385928
> 
> 赞同：10
> 
> 时间：2012-04-30T15:06:37.550
> 
> 标签：xml, xmllint

默认情况下 xmllint 似乎缩进 2 个空格，有没有办法在 Windows 上更改缩进级别？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-30T15:12:12.440

我认为您需要将环境变量设置为`$XMLLINT_INDENT`您需要的任何内容（例如，如果您想要 4 个空格，请使用四个空格“”）。从文档：

> $XMLLINT_INDENT 环境变量控制缩进（默认值为两个空格“”）

然后，您需要使用`--format`标志运行它。例如：

```
xmllint --format my_file_name.xml 
```

# mysql - 在 SQL Server 2008 中替换为

> ID：10385933
> 
> 赞同：3
> 
> 时间：2012-04-30T15:06:50.307
> 
> 标签：mysql, sql-server-2008, migration

我尝试进行迁移，但我对这个查询有疑问：

```
$DB->query("replace into periodetojour(idperiode,idjour,heure)
            values('".addslashes($idperiode)."','2','".addslashes($mardi)."')"); 
```

我看到`REPLACE INTO`不能在 SQL Server 2008 中使用，我必须使用`MERGE INTO`

我的问题是我没有找到任何正在使用的查询，`MERGE INTO`所以我可能没有很好地使用它。您知道如何使用 MERGE INTO 更改它吗？是否有义务在 SQL Server 2008 中更改它？

感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T15:18:18.233

在您的情况下，该[`MERGE`](http://msdn.microsoft.com/de-de/library/bb510625.aspx)语句将如下所示：

```
$DB->query("MERGE INTO periodetojour dst 
            USING ( 
              SELECT '".addslashes($idperiode)."' idperiode, 
                     '2' idjour, 
                     '".addslashes($mardi)."' heure 
            ) src  
            ON src.idperiode = dst.idperiode  
            WHEN MATCHED THEN UPDATE SET  
              dst.idjour = src.idjour, 
              dst.heure = src.heure  
            WHEN NOT MATCHED THEN INSERT (idperiode, idjour, heure)  
              VALUES(src.idperiode, src.idjour, src.heure)"); 
```

这是假设这`idperiode`是您的主键。如果主键由 组成，则`(idperiode, idjour)`必须相应地调整`ON`子句和`WHEN MATCHED THEN UPDATE SET`子句：

```
 -- [...]
            ON src.idperiode = dst.idperiode  
            AND src.idjour = dst.idjour
            WHEN MATCHED THEN UPDATE SET  
              dst.heure = src.heure
            -- [...] 
```

# c++ - 如何修复我的 C++ 大小写切换菜单？

> ID：10385937
> 
> 赞同：2
> 
> 时间：2012-04-30T15:06:58.617
> 
> 标签：c++, unix, switch-statement, cout, cin

我的学校项目有问题。我正在学校服务器上使用 UNIX 中的 VIM 编写它。当我在我的项目中插入记录时，姓氏被跳过。名字和姓氏同时提示，无需等待姓氏接收输入。见下文：

我的菜单是这样做的：

> MENU
> (I)nsert 新记录
> (L)ast name search
> (S)ave database to a file
> (R)ead database from a file
> (Q)uit
> 
> 输入选项：我
> 
> 选择插入新记录
> 
> 请输入员工的姓氏： 请输入员工的名字：

它在姓氏之前跳过！

我需要在某处添加 cout.flush() 吗？当我在姓氏部分下添加 cout.flush() 时，我收到此错误：

```
unixapps1:Lab1> make
g++ -o LSL lab1.cpp Employee.cpp
lab1.cpp: In function âEmployee createRecord()â:
lab1.cpp:41: error: âstruct std::istreamâ has no member named âflushâ 
```

我的菜单代码是这样的：

```
int main() {

  cout << "\n"
       << "************************************************************\n"
       << "Remember: Search for TODO's in VI before submitting project!\n"
       << "************************************************************\n\n";

  char menu_choice;
  string fileName;

  // Create a database
  LinkedSortedList<Employee> database;

  while (true) {
    // Display menu
    cout << "MENU\n"
     << "(I)nsert new record\n"
     << "(L)ast name search\n"
     << "(S)ave database to a file\n"
     << "(R)ead database from a file\n"
     << "(Q)uit\n\n";

    cout << "Enter choice: ";
    cin >> menu_choice;
    cout << endl;

    switch (toupper(menu_choice)) {

    case 'I':
      cout << "Insert new record selected\n\n";
      {database.insert(createRecord());}
      break;

    case 'L':
      cout << "Last name search selected\n\n";
      // TODO call function to search by last name
      // TODO call search for Last Name
      // TODO Print all matches found
      {string searchVal = "";
    database.find(searchVal);}
      break;

    case 'S':
      cout << "Save database to a file selected\n\n";
      // TODO call function to save database to file
      // File I/O Save to file
      cout << "Please enter a file name: " << endl;
      cin >> fileName;
      {char* file = (char*) fileName.c_str();
    writeFile(file, database);}
      break;

    case 'R':
      cout << "Read database from a file selected\n\n";
      // TODOOA call function to read database from file
      // File I/O Read file
      cout << "Please enter a file name: " << endl;
      cin >> fileName;
      {char* file = (char*) fileName.c_str();
    readFile(file, database);}
      break;

    case 'Q':
      exit(EXIT_SUCCESS);

      // default case:
    default:
      cout << "Invalid choice!\n\n"
       << "##### Please try again #####\n\n";
      break;

      cin >> menu_choice;
    }
  }
  return 0;
} 
```

这是我的`createRecord()`功能：

```
// Create the record to be inserted into the employee database
Employee createRecord() {
  // Temporary variables for getting input from user
  string stringInput = "";
  int intInput = 0;

  Employee newEmployee;

  cout << "Please enter employee's Last Name: " << endl;
  getline(cin, stringInput);
  newEmployee.setLastName(stringInput);

  cout << "Please enter employee's First Name: " << endl;
  getline(cin, stringInput);
  newEmployee.setFirstName(stringInput);

  cout << "Please enter employee's ID: ";
  getline(cin, stringInput);
  stringstream myStream(stringInput);
  myStream >> intInput;
  newEmployee.setId(intInput);

  cout << "Please enter employee's Salary: ";
  getline(cin, stringInput);
  myStream >> intInput;
  newEmployee.setSalary(intInput);

  cout << "Please enter employee's Department: ";
  getline(cin, stringInput);
  newEmployee.setDepartment(stringInput);

  cout << "Please enter employee's Phone Number: ";
  getline(cin, stringInput);
  newEmployee.setPhoneNumber(stringInput);

  cout << "Please enter employee's Address: ";
  getline(cin, stringInput);
  newEmployee.setAddress(stringInput);

  cout << "Please enter employee's Hire Date: ";
  getline(cin, stringInput);
  newEmployee.setHireDate(stringInput);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:10:36.380

看起来输入流中仍有换行符或其部分。

尝试使用`std::istream::ignore()`吃掉输入流中的剩余字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:12:19.820

您是否尝试过使用`cin.get()`而不是`cout.flush()`？

# performance - mongo 高效地从大集合中删除数据

> ID：10385941
> 
> 赞同：2
> 
> 时间：2012-04-30T15:07:12.600
> 
> 标签：performance, mongodb, mongodb-query

我收集了数百万个条目。我想有效地删除所有数据，但不删除集合。

最好的方法是什么？

```
db.some_coll.remove({}) 
```

需要很多时间！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:06:34.990

> What is the best way to do that?

You have found it. There are only two ways to clear out a collection:

1.  `db.some_coll.remove({})`: which deletes everything one at a time. It takes a long time because each deletion is as expensive as an insert.
2.  `db.some_coll.drop()`: simply clears the entire collection.

> I want to remove efficiently all the entire data, but without dropping the collection.

Why not drop the collection? You want to remove all of the data, all you need to do is re-create the indexes and possibly the settings on the collection (*capped collections only*).

Re-creating indexes is *very* easy. **So what's the hangup**?

# email - 为什么我发送电子邮件时也会显示我的 html 代码？

> ID：10385943
> 
> 赞同：0
> 
> 时间：2012-04-30T15:07:21.710
> 
> 标签：email, sendmail, send, sendmessage

嗨亲爱的这是我发送电子邮件的代码我的消息代码是这个

```
$to = $email;
$subject = "Activation";
$message = "Your activation key is this " .$key.'<br>'.' click here to activate your acount. <a href="activation.php?key='.$key.'">here</a>';
$from = "riaz_qadeer90@yahoo.com";
$headers = "From:" . $from;
if(mail($to,$subject,$message,$headers))
{
    echo "Check your email to activate your acount.";
} 
```

问题是当我发送电子邮件时，我的收件箱中显示的整个消息都带有代码。为什么它不显示“点击”作为锚点.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:13:16.117

默认情况下，邮件不是 HTML 格式，因此它以纯文本形式发送。有关发送 HTML 电子邮件的信息，请参见[PHP 页面上的示例 #4 。`mail()`](http://php.net/manual/en/function.mail.php)您需要指定消息头的内容类型：

```
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

请注意`.=`此处使用的运算符。您会将其*附加*到现有`$headers`值中。因此，您还需要确保您现有的标头已正确终止：

```
$headers = "From:" . $from . "\r\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T11:03:44.867

您必须检查以下事项：-

1>消息内容正确地包含在哪个引号中，'或“
。2>检查您的标题和其他标题信息是否与（。）运算符正确连接。大多数时间问题出现在第二种情况下。

**$headers .= '收件人：abc，bcd' 。"\r\n";** **$headers .= '来自：xyz' 。"\r\n";**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:14:31.747

因为您**必须**将电子邮件的标题定义为 HTML。

[http://www.w3schools.com/php/func_mail_mail.asp](http://www.w3schools.com/php/func_mail_mail.asp)

# ruby - 无法在 Ruby 1.9.3 IRB 中输入元音变音

> ID：10385944
> 
> 赞同：12
> 
> 时间：2012-04-30T15:07:25.520
> 
> 标签：ruby, macos, encoding, utf-8, irb

我在 Mac OS 10.7.3 的 Ruby 1.9.3 的 IRB 中遇到了非常奇怪的行为当我尝试输入变音符号时，它在提示符中转义，看起来像这样（我`"ü"`在键盘上输入）

```
irb(main):001:0> "\U+FFC3\U+FFBC" 
```

超级奇怪的是：

```
irb(main):001:0> "\U+FFC3\U+FFBC".length
=> 0 
```

当然，字符也不显示：

```
irb(main):001:0> "\U+FFC3\U+FFBC"
=> "" 
```

有谁知道这里发生了什么或如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T07:19:14.187

Victor Moroz 没有给出明确的答案，但他的链接让我找到了一个解决方案（谢谢！）：

我忘了提：

*   我正在运行自制软件
*   我使用 ruby​​-build 和[这个配方（1.9.3-p125-perf，带有猎鹰补丁）构建了 ruby](https://gist.github.com/1688857)

然后我为解决这个问题所做的就是重新编译，这次将 ruby​​ 指向我使用自制软件安装的更新版本的 readline（在我的情况下为 6.2.2）。

它采取的步骤是：

```
$ brew install readline
$ export CPPFLAGS=-I/usr/local/Cellar/readline/6.2.2/include
$ export LDFLAGS=-L/usr/local/Cellar/readline/6.2.2/lib/
$ curl https://raw.github.com/gist/1688857/rbenv.sh | sh && rbenv global 1.9.3-p125-perf 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T13:27:22.193

我也遇到了这个问题，但是我的 Ruby 是用 rvm 而不是 ruby​​-build 构建的。我之前也在 Mountain Lion 上使用 Homebrew 来运行其他软件包安装程序，其中有 Readline 6.2.5 或类似的东西。事实证明，这对我来说是这个问题的原因。所以这里是修复：

从[RVM 网站](https://rvm.io/packages/readline/)：

> 如果您在编译时遇到与 readline 有关的错误，您可能需要尝试使用下面定义的过程进行安装。
> 
> $ rvm pkg 安装 readline
> 
> $ rvm 重新安装 1.9.2 --with-readline-dir=$rvm_path/usr
> 
> 请注意，当您的系统上安装了 MacPorts、Fink 或 Homebrew 时，最常发生此错误。

希望这对其他人有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:50:47.210

这可能会有所帮助[http://henrik.nyh.se/2008/03/irb-readline](http://henrik.nyh.se/2008/03/irb-readline)

**更新**事实上，在我的 Mac 上，我对 Ruby 的移植版本没有任何问题，但原始 Mac OS 版本确实存在这个问题（从未使用过那个）。所以最简单的方法可能就是从端口安装 Ruby。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T09:17:16.380

这个命令为我解决了它：

```
brew install readline
RUBY_CONFIGURE_OPTS=--with-readline-dir="$(brew --prefix readline)" rbenv install 1.9.3-p286 
```

来源：[https ://github.com/rbenv/ruby-build/wiki](https://github.com/rbenv/ruby-build/wiki)

# javascript - Javascript 中的数字和有效范围

> ID：10385945
> 
> 赞同：5
> 
> 时间：2012-04-30T15:07:28.770
> 
> 标签：javascript

Javascript 中的所有数字都是 64 位（8 字节）浮点数，但为什么 JavaScript 的有效范围是 5e-324（负）到 1.7976931348623157e+308（正）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T15:11:59.270

因为这是[IEEE 754 规范所定义的](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)。

```
0x 0000 0000 0000 0001 = 2⁻¹⁰²²⁻⁵² ≈ 4.9406564584124654 x 10⁻³²⁴ (Min subnormal positive double)
0x 000f ffff ffff ffff = 2⁻¹⁰²² - 2⁻¹⁰²²⁻⁵² ≈ 2.2250738585072009 x 10⁻³⁰⁸ (Max subnormal positive double)
0x 0010 0000 0000 0000 = 2⁻¹⁰²² ≈ 2.2250738585072014 x 10⁻³⁰⁸ (Min normal positive double)
0x 7fef ffff ffff ffff = (1 + (1 - 2⁻⁵²)) x 2¹⁰²³ ≈ 1.7976931348623157 x 10³⁰⁸ (Max Double) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T15:12:57.537

因为非规范值；参见例如[http://en.wikipedia.org/wiki/Denormal_number](http://en.wikipedia.org/wiki/Denormal_number)。这些扩展了浮点值的范围，以允许值比其他情况更接近零。

建议您将这些视为实现细节，其目的是使具有非常小的中间结果的计算不会表现得过于病态；当您使用这些非常小的值时，会丢失一些精度。

# outlook - 如何使用 EWS 从 Outlook 联系人中读取扩展属性

> ID：10385948
> 
> 赞同：3
> 
> 时间：2012-04-30T15:07:42.510
> 
> 标签：outlook, exchangewebservices

我目前正在尝试通过 Microsoft 的 EWS 托管 API 从 Outlook 联系人对象中读取某些属性。我从`FindItems()`函数中检索这些联系人对象。其中一些字段是扩展属性，例如`Title`or`User1`字段，我很难阅读它们。目前，我有：

```
Guid propertySetId = new Guid("{00062004-0000-0000-C000-000000000046}");
ExtendedPropertyDefinition titleProp = new ExtendedPropertyDefinition(propertySetId, 0x3A45, MapiPropertyType.String);
ExtendedPropertyDefinition user1Prop = new ExtendedPropertyDefinition(propertySetId, 0x804F, MapiPropertyType.String);

string title, user1;
contact.TryGetProperty(titleProp, out title);
contact.TryGetProperty(user1Prop, out user1); 
```

运行它时，`TryGetProperty`总是返回 false。我已验证这些字段已在 Outlook 中为我正在搜索的联系人填充。

编辑：这就是我检索联系人对象的方式。

```
ExchangeService service = //...
Mailbox userMailbox = new Mailbox(emailAddress);
FolderId folderId = new FolderId(WellKnownFolderName.Contacts, userMailbox);
FindItemsResults<Item> results;
const string AQS = "Category:~>\"CategoryTag\"";
ItemView view = new ItemView(200);
results = service.FindItems(folderId, AQS, view);
foreach (var result in results)
{
    Contact contact = result as Contact;
    //...Try to read fields
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:06:53.200

您需要更改[`ItemView`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.itemview_members%28v=exchg.80%29.aspx)以包含您希望访问[的属性](http://msdn.microsoft.com/en-us/library/gg274394%28v=exchg.80%29.aspx#PropertyIdValues)( )。[`PropertySet`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.viewbase.propertyset%28v=exchg.80%29.aspx)

```
var user1Val = string.Empty;
var user1Prop = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.Address, 0x804F, MapiPropertyType.String);
ExtendedPropertyDefinition[] extendedFields = new ExtendedPropertyDefinition[] { user1Prop };
PropertySet extendedPropertySet = new PropertySet(BasePropertySet.FirstClassProperties, extendedFields);
ItemView view = new ItemView(200) { PropertySet = extendedPropertySet };
// ...
var title = contact.CompleteName.Title; // Title value
contact.TryGetProperty(user1Prop, out user1Val); // user field 1 value 
```

# jquery - 如何让 div 在页面中随机移动（使用 jQuery 或 CSS）

> ID：10385950
> 
> 赞同：28
> 
> 时间：2012-04-30T15:07:48.057
> 
> 标签：jquery, css, animation

我一直在做一些谷歌搜索来找到这个问题的答案，但我没有运气。这可能是因为我有点业余，我不知道要搜索的正确术语，但也许这里有人可以引导我朝着正确的方向前进或帮助我。

无论如何，我正在寻找一种让 div 随机、平滑地在页面上移动的方法。会有一个背景颜色，然后这个我想看似随机的图像，在页面上无限移动。很像 DVD 播放器主屏幕的背景，其中“DVD”只是漂浮在周围。

div 的起点无关紧要，终点也不重要。它只需要在用户在该页面上的持续时间内随机移动页面。

我有不错的 HTML 和 CSS 技能，非常基本的 JS 技能，以及一些实现 jQuery 的经验。理想情况下，我想要一些我可以自己实现的东西。

提前致谢！！！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-30T15:23:47.203

基本前提是生成位置值，使用jquery的animate()函数来移动div。下一个位置的计算很简单，你只需要一点数学。这是我刚刚敲出的一个非常基本的jsfiddle。它可能与延迟计时器有关，根据它移动的距离来动态计算速度，但我希望它给了你一个起点。

[http://jsfiddle.net/Xw29r/](http://jsfiddle.net/Xw29r/)

使用速度修饰符更新了示例代码：

[http://jsfiddle.net/Xw29r/15/](http://jsfiddle.net/Xw29r/15/)

* * *

出于某种原因，这仍然引起了一些关注，所以这里有一个更新的答案，它使用了应该更平滑的 CSS 过渡。

[http://jsfiddle.net/bf9nv1q6/](http://jsfiddle.net/bf9nv1q6/)

```
function RandomObjectMover(obj, container) {
	this.$object = obj;
  this.$container = container;
  this.container_is_window = container === window;
  this.pixels_per_second = 250;
  this.current_position = { x: 0, y: 0 };
  this.is_running = false;
}

// Set the speed of movement in Pixels per Second.
RandomObjectMover.prototype.setSpeed = function(pxPerSec) {
	this.pixels_per_second = pxPerSec;
}

RandomObjectMover.prototype._getContainerDimensions = function() {
   if (this.$container === window) {
       return { 'height' : this.$container.innerHeight, 'width' : this.$container.innerWidth };
   } else {
   	   return { 'height' : this.$container.clientHeight, 'width' : this.$container.clientWidth };
   }
}

RandomObjectMover.prototype._generateNewPosition = function() {

	// Get container dimensions minus div size
  var containerSize = this._getContainerDimensions();
	var availableHeight = containerSize.height - this.$object.clientHeight;
  var availableWidth = containerSize.width - this.$object.clientHeight;

  // Pick a random place in the space
  var y = Math.floor(Math.random() * availableHeight);
  var x = Math.floor(Math.random() * availableWidth);

  return { x: x, y: y };    
}

RandomObjectMover.prototype._calcDelta = function(a, b) {
	var dx   = a.x - b.x;         
  var dy   = a.y - b.y;         
  var dist = Math.sqrt( dx*dx + dy*dy ); 
  return dist;
}

RandomObjectMover.prototype._moveOnce = function() {
		// Pick a new spot on the page
    var next = this._generateNewPosition();

    // How far do we have to move?
    var delta = this._calcDelta(this.current_position, next);

		// Speed of this transition, rounded to 2DP
		var speed = Math.round((delta / this.pixels_per_second) * 100) / 100;

    //console.log(this.current_position, next, delta, speed);

    this.$object.style.transition='transform '+speed+'s linear';
    this.$object.style.transform='translate3d('+next.x+'px, '+next.y+'px, 0)';

    // Save this new position ready for the next call.
    this.current_position = next;

};

RandomObjectMover.prototype.start = function() {

	if (this.is_running) {
  	return;
  }

	// Make sure our object has the right css set
  this.$object.willChange = 'transform';
  this.$object.pointerEvents = 'auto';

  this.boundEvent = this._moveOnce.bind(this)

  // Bind callback to keep things moving
  this.$object.addEventListener('transitionend', this.boundEvent);

  // Start it moving
  this._moveOnce();

  this.is_running = true;
}

RandomObjectMover.prototype.stop = function() {

	if (!this.is_running) {
  	return;
  }

  this.$object.removeEventListener('transitionend', this.boundEvent);

	this.is_running = false;
}

// Init it
var x = new RandomObjectMover(document.getElementById('a'), window);

// Toolbar stuff
document.getElementById('start').addEventListener('click', function(){
	x.start();
});
document.getElementById('stop').addEventListener('click', function(){
	x.stop();
});
document.getElementById('speed').addEventListener('keyup', function(){
  if (parseInt(this.value) > 3000 ) {
 		alert('Don\'t be stupid, stupid');
    this.value = 250;
  }
	x.setSpeed(parseInt(this.value));
});

// Start it off

x.start();
```

```
div#toolbar {
  position:fixed;
  background:#20262F;
  width:100%;
  text-align:center;
  padding: 10px
}
div#a {
width: 50px;
height:50px;
background-color:red;
position:absolute;
}
```

```
<div id="toolbar">
<button id="start">Start</button>
<button id="stop">Stop</button>
<input type="number" value="250" id="speed" />
</div>
<div id='a'></div>
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T15:23:09.380

尝试这个：

```
function moveDiv() {
    var $span = $("#random");

    $span.fadeOut(1000, function() {
        var maxLeft = $(window).width() - $span.width();
        var maxTop = $(window).height() - $span.height();
        var leftPos = Math.floor(Math.random() * (maxLeft + 1))
        var topPos = Math.floor(Math.random() * (maxTop + 1))

        $span.css({ left: leftPos, top: topPos }).fadeIn(1000);
    });
};

moveDiv();
setInterval(moveDiv, 5000); 
```

[**示例小提琴**](http://jsfiddle.net/3Z7HE/3/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-30T15:13:45.037

好吧，您需要捕获`window`

那么你需要`generate random numbers` `<=`的`height`and `width`（`screen`减去`width`/`height`的`box`）

给盒子一个`absolute`位置，给盒子一个生成的`x`，`y` `coordinates`

然后设置一个计时器再次调用`this function`。

:)

```
$(document).ready(function() {
    randoBox = {
      width:$("body").width(),
      height:$("body").height(),
      x:0,
      y:0,
      el:null,
      time:1000,
      state:"active",
      init: function(){
        el = $(document.createElement('div'));
        el.attr("style","position:absolute;left:"+this.x+";top:"+this.y+";");
        el.html("DVD")            
        el.height(100);
        el.width(100);
        $("body").append(el);
      },
      move:function(){
        this.y = Math.random()*this.height+1;
        this.x = Math.random()*this.width+1;
        el.attr("style","position:absolute;left:"+this.x+";top:"+this.y+";");            
      },
      run:function(state){
        if (this.state == "active" || state){
          this.move();
          setTimeout(function(){this.run()},this.time);
        }
      }
    }
    randoBox.init();
    randoBox.run(true);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T15:16:43.550

**编辑**添加随机运动，如 DVD 空闲屏幕，但可以在任何地方反弹。

[http://jsfiddle.net/ryXBM/2/](http://jsfiddle.net/ryXBM/2/)

```
dirR = "+=2";
dirL = "+=2";

function moveDir() {
 if (Math.random() > 0.95) {
  swapDirL();
 }
 if (Math.random() < 0.05) {
  swapDirR();
 }
}

function swapDirL() {
    dirL == "+=2" ? dirL = "-=2" : dirL = "+=2"; 
}

function swapDirR() {
    dirR == "+=2" ? dirR = "-=2" : dirR = "+=2";   
}

setInterval (function() { $("#d").css("left", dirL); $("#d").css("top", dirR); moveDir(); } , 50)​ 
```

**CSS**

```
#d { position: absolute;
 left: 100px;
 top: 100px;
 width: 100px;
 height: 100px;
 background-color: #fce;   
}​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T15:13:04.963

您可以使用[jQuery Slide](http://docs.jquery.com/UI/Effects/Slide "jQuery 幻灯片")和[Math.random()](http://www.w3schools.com/jsref/jsref_random.asp "数学随机（）")，生成一个随机数作为移动距离，另一个随机数根据您的决定移动方向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T15:14:34.050

您需要指定动画的边界 -`top`和`left`属性的最大值是多少...之后您所需要的只是`.animate()`一次又一次调用的函数...

像这样的东西应该工作 -

```
var maxLeft = _left_border - $('#selectedElement').width(); // counter intuitively this is actually the right border
var maxTop = _top_border  - $('#selectedElement').height();
var animationDurration = _duration;

function randomAnimation(){
  var randomLeft = Math.floor(Math.random()*maxLeft);
  var randomTop = Math.floor(Math.random()*maxTop);

  $('#selectedElement').animate({
     left: randomLeft,
     top: randomTop
   }, animationDurration, function() {
     randomAnimation();
   });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-24T11:47:49.687

```
<html>
    <head>
        <link rel="stylesheet" href="sample1.css">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                    $('.btn').mouseover(function(){
                        $(this).css({
                            left:(Math.random()*$(window).width()-20),
                            top:(Math.random()*$(window).height()-20),      
                        });
                    });              
            });
        </script>
    </head> 
    <body>
        <div class="btn" style="position: absolute">button</div>
    </body>
</html> 
```

# c++ - 设计更好的 API 接口以将结构从一个类传递到另一个类

> ID：10385951
> 
> 赞同：5
> 
> 时间：2012-04-30T15:07:50.563
> 
> 标签：c++, api

我坚信以下设计理念：

1> 服务应该在尽可能靠近数据存储的地方实现。

2> Getter 和 Setter 是邪恶的，应该谨慎使用。

我宁愿不在这里争论以上两个论点，并假设它们有其优势。

这是我目前面临的挑战。我有两个类（即`AComputer`和`A`），其中 AComputer 为 A 提供一些服务，并且 A 包含所有基本数据成员。

事实：由于系统设计，我不允许在`AComputer`里面组合。`A`我知道，它打破了我的观点 1> 计算应该与数据保持一致。

`A`当从to传递数据时`AComputer`，我们必须传递 10（大约）个单独的参数，因此最好设计一个结构来做到这一点，否则构造函数列表会变得疯狂。大多数存储在中的数据是存储在中的数据`AComputer`的直接副本`A`。我们选择将这些数据存储在其中，`AComputer`因为其中的其他函数`AComputer`也需要这些变量。

这是问题（我要求考虑 API 维护和修改的最佳实践）：

1> 我们应该在哪里定义传递结构`PassData`？

2> 我们应该为 struct 提供 getter/setter`PassData`吗？

我提供了如下示例代码来详细说明我的问题。最好我能找到一个真正的开源 API 来解决同样的问题，这样我就可以从中学习。

如果您查看`PassData m_data;`在 class 中定义的private `AComputer`，我是故意这样做的。换句话说，如果我们更改 的底层实现`AComputer`，我们可以`PassData m_data;`用单个变量或其他东西替换，但不会破坏`PassData`. 所以在这个设计中，我没有为 struct 提供 getter/setter `PassData`。

谢谢

```
class AComputer
{
public:
    struct PassData
    {   // int type just used as an illustration. Real data has different types,
        // such as double, data, string, enum, etc.
        // Note: they are not exact copies of variables from A but derived from them
        int m_v1;
        // from m_v1 to m_v10
        //...
        int m_v10;
    };

    // it is better to store the passed-in data since other functions also need it.
    AComputer(const PassData& pd) : m_data(pd) {}

    int GetCombinedValue() const
    { /* This function returns a value based the passed-in struct of pd */ }

private:
    PassData m_data;    
};

class A
{
private:
    int m_i1;
    // from m_i1 to m_i10
    // ...
    int m_i10;
    // from m_i11 to m_i20
    // ...
    int m_i20;

    boost::shared_ptr<AComputer> m_pAComputer;

public:
    A()
    {
        AComputer::PassData aData;
        // populate aData ...
        m_pAComputer = boost::shared_ptr<AComputer>(new AComputer(aData));
    }

    int GetCombinedValue() const
    {
        return m_pAComputer->GetCombinedValue();
    }
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T11:42:01.963

我认为最好在开始之前澄清几点，你说：

> 如果您查看私有 PassData m_data; 在 AComputer 类中定义，我是故意这样做的。也就是说，如果我们改变AComputer的底层实现，就可以替换PassData m_data；使用单个变量或其他东西，但不会破坏 PassData 的接口。

这不是真的，PassData 是您界面的一部分！您无法在不破坏客户端代码的情况下替换 PassData，因为您需要在 AComputer 的构造函数中使用 PassData。PassData 不是实现细节，而是纯接口。

需要澄清的第二点：

> 2> Getter 和 Setter 是邪恶的，应该谨慎使用。

正确的！但是您应该知道 POD（Plain-Old-Data 结构）甚至更糟糕。使用 POD 代替带有 getter 和 setter 的类的唯一优点是可以省去编写函数的麻烦。但真正的问题还是悬而未决，你的类的接口太繁琐，维护起来会很困难。

设计始终是不同需求之间的权衡：

**一种虚假的灵活性**

您的库是分布式的，并且大量代码正在使用您的类。在这种情况下，PassData 的变化将是巨大的。如果您可以在运行时支付少量费用，则可以使您的界面灵活。例如 AComputer 的构造函数将是：

```
AComputer(const std::map<std::string,boost::any>& PassData); 
```

看看 boost::any [here](http://www.boost.org/doc/libs/1_49_0/doc/html/any.html)。您还可以为地图提供[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)，以帮助用户轻松创建地图。

*临*

*   如果您不再需要某个字段，则代码将保持不变。

*缺点*

*   运行时价格小。
*   失去编译器类型安全检查。
*   如果您的功能需要另一个必填字段，您仍然有麻烦。客户端代码将编译，但行为不正确。

总的来说，这个解决方案并不好，最后它只是原始版本的一个花哨版本。

**策略模式**

```
struct CalculateCombinedValueInterface
{
   int GetCombinedValue()=0;
   virtual ~CalculateCombinedValueInterface(){}
};

class CalculateCombinedValueFirst : CalculateCombinedValueInterface
{
   public:
       CalculateCombinedValueFirst(int first):first_(first){}
       int GetCombinedValue(); //your implementation here
   private:
       //I used one field but you get the idea
       int first_;
}; 
```

客户端代码将是：

```
CalculateCombinedValueFirst* values = new CalculateCombinedValueFirst(42);

boost::shared_ptr<CalculateCombinedValueInterface> data(values); 
```

现在，如果你要修改你的代码，你不应该接触已经部署的界面。面向对象的解决方案是提供一个继承自抽象类的新类。

```
class CalculateCombinedValueSecond : CalculateCombinedValueInterface
{
   public:
       CalculateCombinedValueFirst(int first,double second)
           :first_(first),second_(second){}
       int GetCombinedValue(); //your implementation here
   private:
       int first_;
       double second_;
}; 
```

客户将决定是升级到新类还是保留现有版本。

*临*

*   在不破坏客户端代码的情况下改进您的界面。
*   您没有触及现有代码，而是在新文件中引入了新功能。
*   如果您想要更小的粒度控制， 您可能想要使用[模板方法设计模式。](http://sourcemaking.com/design_patterns/template_method)

*缺点*

*   使用虚函数的开销（基本上是几皮秒！）
*   您不能破坏现有代码。您必须保持现有界面不变，并添加一个新类来模拟不同的行为。

**参数数量**

如果您在一个函数中输入了一组十个参数，那么这些值很可能在逻辑上是相关的。您可以在类中收集其中一些值。这些类可以组合在另一个类中，它将成为您的函数的输入。一个类中有 10 个（或更多！）数据成员的事实应该敲响警钟。

[单一责任原则](http://www.objectmentor.com/resources/articles/srp.pdf)说：

改变班级的理由不应该不止一个。

这个原则的推论是：你的班级必须很小。如果你的类有 20 个数据成员，你很可能会找到很多理由来改变它。

**结论**

向客户端提供接口（任何类型的接口）后，您将无法更改它（一个很好的例子是编译器需要多年实现的 C++ 中所有过时的特性）。注意你提供的接口，甚至是隐式接口。在您的示例中， PassData 不是实现细节，而是类接口的一部分。

参数的数量是您的设计需要审查的信号。换一个大班是很困难的。您的类应该很小并且仅通过接口（C++ 俚语中的抽象类）依赖于其他类。

如果您的班级是：

1) 小而且只有一个需要改变的理由

2) 派生自抽象类

3) 其他类使用指向抽象类的指针来引用它

您的代码可以轻松更改（但必须保留已经提供的接口）。

如果您不满足所有这些要求，您将遇到麻烦。

**注意：**如果设计使用静态多态而不是提供动态多态，则要求 2) 和 3) 可以改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:36:13.907

如果您可以完全控制所有 AComputer 客户端，则使用 PassData 而不是 10 个参数会很好。它有两个优点：当您添加另一条要传递的数据时，您需要做的更改更少，您可以使用分配给调用者站点上的结构成员来明确每个“参数”的含义。

但是，如果其他人要使用 AComputer，则使用 PassData 有一个严重的缺点。如果没有它，当您向 AComputer 构造函数添加第 11 个参数时，编译器将为未更新实际参数列表的用户检测错误。如果将第 11 个成员添加到 PassData，编译器将静默接受新成员为垃圾的结构，或者在最好的情况下为零。

在我看来，如果你使用 PassData，那么拥有 getter 和 setter 就有点过头了。Sutter 和 Alexandresku 的“C++ 编码标准”同意这一点。项目 #41 的标题是：“将数据成员设为私有，**除了无行为聚合（C 风格的结构）** ”（重点是我的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:44:34.490

在正常的类设计中，所有成员函数都将 this 指针作为隐式参数传递，以便它们可以访问数据成员：

```
// Regular class
class SomeClass
{
public:
    // will be name-mangled by the compiler as something like: 
    // void SomeClass_getValue(const SomeClass*) const;
    void getValue() const 
    {
        return value_; // actually: return this->value_;
    }

private:
    int value_;
}; 
```

你应该尽可能地模仿这个。如果由于某些原因不允许将 AComputer 和 A 类合并到一个干净的类中，那么下一个最好的方法是让 AComputer 将指向 A 的指针作为数据成员。在 AComputer 的每个成员函数中，您必须显式使用 A 的 getter/setter 函数来访问相关的数据成员。

```
class AComputer
{
public:
    AComputer(A* a): p_(a) {}

    // this will be mangled by the compiler to something like
    // AComputer_GetCombinedValue(const Acomputer*) const;
    int GetCombinedValue() const
    {
         // in a normal class it would be: return m_i1 + m_i2 + ...
         // which would actually be: return this->m_i1 + this->m_i12 + ...
         // the code below actually is: return this->p_->m_i1 + this->p_->m_i2 + ... 
         return p_->get_i1() + p_->get_i2() + ...       
    }

private:
    class A;
    A* p_;
};

class A
{
public:
   // setters and getters

private:
   // data only, NO pointer to AComputer object
} 
```

所以实际上，您已经创建了一个额外的间接级别，它给用户造成了 AComputer 和 A 是同一个抽象的一部分的错觉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:14:22.610

您可能会考虑重构以使用模式对象——该对象的唯一目的是包含方法调用的参数。更多细节：http: [//sourcemaking.com/refactoring/introduce-parameter-object](http://sourcemaking.com/refactoring/introduce-parameter-object)

# eclipse - 这段代码在 Activating/Deactivating IHandlerActivation of Command Eclipse Plugin Development 上有什么问题

> ID：10385959
> 
> 赞同：1
> 
> 时间：2012-04-30T15:08:25.073
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, jface

所以，我有 2 个命令，它们由`PLAY_COMMAND_ID`和标识`STOP_COMMAND_ID`。每个命令都有每个处理程序，分别`playHandler`和`stopHandler`（这些是扩展`AbstractHandler`类）。

这些命令以按钮样式贡献给我的视图工具栏。基本上我想要的是最初`PLAY_COMMAND`是活跃的，但`STOP_COMMAND`不是。单击时`PLAY_COMMAND`，它将激活`STOP_COMMAND`然后停用自身（`PLAY_COMMAND`）。点击时反之亦然`STOP_COMMAND`。

所以我的做法是这样的。起初它可以工作（我单击播放按钮，然后激活停止按钮并禁用播放按钮。我单击停止按钮，然后播放按钮处于活动状态并且停止按钮被禁用。但是当我单击播放按钮时同样，当停止按钮也处于活动状态时，播放按钮仍然处于活动状态）。那么我的代码有什么问题：

```
private AbstractHandler playHandler, stopHandler, pauseHandler, stepHandler;
private IHandlerActivation playActivation, stopActivation, pauseActivation, stepActivation;
private void createHandlers(){
  final IHandlerService handlerService = (IHandlerService)getSite().getService(IHandlerService.class);
    playHandler = new AbstractHandler() {

      @Override
      public Object execute(ExecutionEvent event) throws ExecutionException {
        handlerService.deactivateHandler(playActivation);
        if(stopActivation == null){
          stopActivation = handlerService.activateHandler(STOP_COMMAND_ID, stopHandler);
        } else {
          handlerService.activateHandler(stopActivation);
        }
        return null;
      }
    };

    stopHandler = new AbstractHandler() {

      @Override
      public Object execute(ExecutionEvent event) throws ExecutionException {
        handlerService.deactivateHandler(stopActivation);
        handlerService.activateHandler(playActivation);
        return null;
      }
    };  
    playActivation = handlerService.activateHandler(PLAY_COMMAND_ID, playHandler);
  }
} 
```

该方法在我的视图`createHandlers()`中的方法末尾调用。`createPartControl(Composite parent)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:51:15.243

好的，这就是我发现的。`IHandlerActivation`调用方法时返回的`activateHandler(IHandlerActivation)`, 当它被停用时，不能再次用于激活同一个处理程序。所以解决方案是尝试调用`handlerService.activateHandler(commandID, playHandler)`而不是调用`handlerService.activateHandler(playActivation)`。

# ios - 我可以在不将应用添加到报亭的情况下启用 iOS 报亭功能吗？

> ID：10385961
> 
> 赞同：0
> 
> 时间：2012-04-30T15:08:43.140
> 
> 标签：ios

我可以在不将我的应用程序图标添加到报刊亭的情况下启用报刊亭功能，例如自动续订订阅和自动下载等吗？从技术上讲，这样做没有问题，但我不知道苹果是否允许这样做。有人可以建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:25:29.660

后台下载只能使用 NKAssetDownload 完成。截至目前，如果您在不是报亭应用程序的应用程序中使用 NKAssetDownload，我很确定苹果会拒绝您的应用程序。

# shortcut - 在编辑 .lnk 文件时需要帮助？

> ID：10385966
> 
> 赞同：8
> 
> 时间：2012-04-30T15:09:23.560
> 
> 标签：shortcut

我一直在寻找问题的解决方案，遇到了 JasonMArcher 回答的帖子，我想知道我是否可以更具体地满足我的需求。

我们最近更改了一个新服务器，并且由于它的名称从 //sbcmaster 更改为 //sbcserver1 我有一个巨大的问题，我需要编辑数百个 .lnk 文件，以便快捷方式检索文档。

问题是 - 是否可以自动化这个过程？

提前欣赏！！

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T03:02:10.757

如果您使用 run/cmd，您可以编辑文件名（使用重命名）。然后像 Notepad++ 这样的友好编辑器将打开该文件。可以看到文字，也会有很多NULL。您可以编辑文本。然后你可以保存文件，然后用 rename 改回名称。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:41:23.480

Shell 链接的[Microsoft 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776891%28v=vs.85%29.aspx)指向[`IShellLink::GetPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774944%28v=vs.85%29.aspx)和[`IShellLink::SetPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761052%28v=vs.85%29.aspx)函数。

# css - 如何复制浮动：窗口高度的左侧效果？

> ID：10385973
> 
> 赞同：0
> 
> 时间：2012-04-30T15:10:00.463
> 
> 标签：css, jquery-ui

我正在尝试做类似于 float:left 的事情。对于float:left，如果你用这个style属性设置了一堆div，它会根据window的宽度来定位自己。当窗口太窄时，它会变成一列，当我们有大窗口时，它会扩展到多列，依此类推。

我想做类似的事情，但我希望它像垂直浮动一样工作。因此，如果我有 5 个项目并且浏览器的窗口高度在一列中只能包含 4 个，则额外的 div 应将自身定位到第二列。简单来说，如果我有一个很长的 div 列表，它们应该根据窗口的高度列在列中。

有没有办法用 div 和 css 或 jquery ui 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:16:05.370

仅使用 CSS 是不可能的。你最好的选择是砌体：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

（或用于时髦的过滤和填充同位素，由砖石驱动：http: [//isotope.metafizzy.co/](http://isotope.metafizzy.co/)）

希望有帮助:)

# dicom - 解析 dicomdir 以显示可用图像

> ID：10385976
> 
> 赞同：2
> 
> 时间：2012-04-30T15:10:06.433
> 
> 标签：dicom, dcm4che

我们正在考虑通过解析现有的**dicomdir**文件并以**树状结构显示内容来添加****图像管理**功能。现有应用程序使用**Java**和**Dcm4Che**。

 ******我的问题是如何**解析 dicomdir 文件**以获取足够的信息以在**Java 树**中显示其内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T10:01:54.383

更多参考这里 :: [DICOMDIR 阅读图像](http://jaypthakkar.blogspot.in/search?q=DICOMDIR)

```
public void getFilePath(DicomObject firstRecord) throws IOException { 
  int i = 1; 
    for (DicomObject rec = firstRecord; rec != null; rec = dicomDir 
      .findNextSiblingRecord(rec), ++i) {
         if (rec.get(Tag.ReferencedFileID) != null) {
               File f = dicomDir.toReferencedFile(rec);
              System.out.println(f.getAbsolutePath());
              }
         getFilePath(dicomDir.findFirstChildRecord(rec));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T11:27:24.690

[单击此处获取相同的代码](http://jaypthakkar.blogspot.in/2013/08/how-to-read-dicom-directory-dicomdir-in.html)

```
private DicomDirReader dirReader;

public ReadDicomDir(File file) throws IOException {
    dirReader = new DicomDirReader(file);
}

public List<File> getFiles() throws IOException {
    List<File> listDirFiles = new ArrayList<File>();
    getFilePath(dirReader.findFirstRootRecord(), listDirFiles);
    return listDirFiles;
}

/**
 * Get Filepath of Dicom File
 * 
 * @param firstRecord
 * @param listDirFiles
 * @throws IOException
 */
public void getFilePath(DicomObject firstRecord, List<File> listDirFiles)
        throws IOException {
    int i = 1;
    for (DicomObject rec = firstRecord; rec != null; rec = dirReader
            .findNextSiblingRecord(rec), ++i) {
        if (rec.contains(Tag.ReferencedFileID)) {
            File f = dirReader.toReferencedFile(rec);
            // System.out.println(f.getAbsolutePath());
            listDirFiles.add(f);
        }
        getFilePath(dirReader.findFirstChildRecord(rec), listDirFiles);
    } 
```******

# spring - 使用 Spring Security 的 HTTPS 登录重定向到 HTTP

> ID：10385977
> 
> 赞同：51
> 
> 时间：2012-04-30T15:10:15.287
> 
> 标签：spring, ssl, https, spring-security, tomcat6

我有一个 Spring Web 应用程序，由 Spring Security 保护，在 EC2 上运行。EC2 实例前面是一个带有 SSL 证书的弹性负载均衡器（https 终止于负载均衡器，即端口 443 -> 端口 80），因此从 Tomcat 的角度来看，入站请求是 HTTP。

我的登录表单提交到 https，但是随后的重定向转到 http（成功或失败）。认证成功，我可以回到https，我已经登录了。

我的登录配置如下所示：

```
<security:form-login
    default-target-url="/home"
    login-page="/"
    login-processing-url="/processlogin"
    authentication-failure-url="/?login_error=1"/> 
```

我需要更改什么才能使 default-target-url 和 authentication-failure-url 转到 https？

*   雄猫 6
*   Spring 安全 3.0.x

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-04T14:03:08.883

您的 spring 配置应该与使用的协议无关。如果您使用“requires-channel”之类的东西，迟早会遇到问题，特别是如果您想将相同的应用程序部署到没有 https 的开发环境中。

相反，请考虑正确配置您的 tomcat。您可以使用[RemoteIpValve](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/valves/RemoteIpValve.html)做到这一点。根据负载均衡器发送的标头，您的 server.xml 配置需要包含以下内容：

```
<Valve
   className="org.apache.catalina.valves.RemoteIpValve"
   internalProxies=".*"
   protocolHeader="X-Forwarded-Proto"
   httpsServerPort="443"
   /> 
```

Spring 将根据 ServletRequest 确定绝对重定向地址，因此如果您使用的不是 443，请更改 httpsServerPort：

> httpsServerPort是protocolHeader表示https协议时ServletRequest.getServerPort()返回的端口

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-05-08T14:58:53.967

如果是 Spring Boot 应用程序（我目前使用的是 2.0.0 版本），`application.properties`文件中的以下配置应该足够了：

```
server.tomcat.protocol-header=x-forwarded-proto 
```

这在 AWS 上对我有用，前面有一个负载均衡器。

对于 Spring Boot < 2.0.0 它也应该可以工作（未测试）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-12T20:50:31.760

我在使用 Google Kubernetes 背后的 Spring Boot 时遇到了同样的问题。将这两行添加到 application.properties 为我做了

```
server.tomcat.remote-ip-header=x-forwarded-for
server.tomcat.protocol-header=x-forwarded-proto 
```

来源：[https ://docs.spring.io/spring-boot/docs/current/reference/html/howto-security.html#howto-enable-https](https://docs.spring.io/spring-boot/docs/current/reference/html/howto-security.html#howto-enable-https)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-28T22:07:43.890

解决方案是两倍

(1) 应用程序.yml

```
server:
  use-forward-headers: true 
```

(2) 在服务器中`/etc/apache2/sites-enabled/oow.com-le-ssl.conf`

```
RequestHeader set X-Forwarded-Proto https
RequestHeader set X-Forwarded-Port 443 
```

（2.1）并启用了apache模块

```
sudo a2enmod headers 
```

[在这个](https://medium.com/@codebyamir/using-apache-as-a-reverse-proxy-for-spring-boot-embedded-tomcat-f704da73e7c8)和[这个](https://ycsoftware.net/invalid-command-requestheader-perhaps-misspelled-or-defined-by-a-module/)的帮助下把它放在一起

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-09T01:09:37.597

我得到这个工作的一种方法是添加以下配置

```
<http auto-config="true" use-expressions="true" entry-point-ref="authenticationEntryPoint" >
    <form-login login-page="/login.jsf" authentication-failure-url="/login.jsf?login_error=t" always-use-default-target="true" default-target-url="xxxxx" />
    <logout logout-url="/logout" logout-success-url="/logoutSuccess.jsf" />
    ...
</http> 
```

不得不添加`always-use-default-target="true"`和`default-target-url="https://...."`。这不是理想的方式，因为您需要在配置中对 url 进行硬编码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-13T11:59:24.053

在 web.xml 中使用以下代码行

```
<security-constraint>
  <web-resource-collection>
    <web-resource-name>Login and Restricted Space URLs</web-resource-name>
    <url-pattern>/j_security_check</url-pattern>
    <url-pattern>/loginpage.rose</url-pattern>
  </web-resource-collection>
  <user-data-constraint>
    <transport-guarantee>CONFIDENTIAL</transport-guarantee>
  </user-data-constraint>
</security-constraint> 
```

它被迫使用HTTPS。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-15T06:36:49.143

我也面临着完全相同的问题，直到我得到正确的解决方案，我才通过 AJP 而不是 HTTP 将我的请求从代理服务器重定向到 tomcat 服务器。下面是我的apache配置

```
ProxyPass /myproject ajp://localhost:8009/myproject
ProxyPassReverse /myproject ajp://localhost:8009/myproject 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-22T04:50:29.223

我在所有拦截 URL 上设置了 requires-channel="any"。这使它仍然可以在我不使用 SSL 的开发环境中工作。

```
<intercept-url pattern="/createUser" access="permitAll" requires-channel="any"/>
<intercept-url pattern="/admin/**" access="hasRole('ROLE_ADMIN')" requires-channel="any"/>
<intercept-url pattern="/**" access="isAuthenticated()" requires-channel="any"/> 
```

然后，创建一个 apache 虚拟主机，将所有流量重定向到 HTTPS 版本。

```
<VirtualHost *:80>
  ServerName www.mywebsite.com
  Redirect permanent / https://www.mywebsite.com/
</VirtualHost> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-06T21:45:54.853

就我而言，我必须删除该属性`server.use-forward-headers=true`。

这是我的设置：

Digital Ocean LB --> 带有 Ingress 的 Kubernetes 集群 --> Spring boot Application

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-28T04:57:28.143

为我的 k8 到 spring boot 应用程序尝试了上面提到的一切，问题是 k8 是安全的，并且 ssl 是由位于入口前面的 SSL 加速器处理的。应用只收到http请求，spring security也转发到http，一直没找到。对我有用的解决方案：

nginx.ingress.kubernetes.io/proxy-redirect-from：http://$http_host/ nginx.ingress.kubernetes.io/proxy-redirect-to：https://$http_host/$namespace/helloworld-service/

# r - 在 R 中开发包时清除以前版本的函数

> ID：10385984
> 
> 赞同：4
> 
> 时间：2012-04-30T15:10:50.200
> 
> 标签：r, package

我正在用 R 开发一个包。我们称之为`mypkg`.

因为某些函数在从包中运行时表现不同（我不确定为什么——但这不是问题），我正在编辑包中的函数，然后从命令行重新构建包。由于某种原因，给定的 R 实例保留旧版本的函数，即使源已更改并且包已重新构建和重新安装。我需要启动一个新实例来查看更改。

这是典型的工作流程。

1.  `myfunction()`对in 进行更改`mypkg.R`
2.  在 R 中： `detach(package:mypkg); remove.packages("mypkg")`
3.  命令行：`R CMD INSTALL --build c:\mypkg`
4.  通知我它已安装到默认库
5.  在 R 中：`library(mypkg)`
6.  在 R 中：`myfunction()`运行更改前的先前版本。

[接下来我要避免的三个步骤]

1.  启动一个新的 R 实例
2.  在 R 中：`library(mypkg)`
3.  `myfunction()`按预期工作

在 R.2.14.1 下运行。

我正在寻找有关如何改进此工作流程以避免启动新 R 实例的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:16:49.527

您需要尝试卸载包并将其分离。`?detach`拥有：

> 如果一个包有一个命名空间，默认情况下分离它不会卸载命名空间（甚至可能没有'unload = TRUE'），并且分离通常不会卸载任何动态加载的编译代码（DLL）。此外，不会删除命名空间中注册的 S3 方法。如果您在已加载命名空间的包上使用“库”，它会附加已加载命名空间的导出。因此，分离和重新附加包可能不会刷新包的部分或全部组件，并且是不可取的。

特别注意最后一句话。

尝试：

```
detach(package:mypkg, unload = TRUE) 
```

请注意，“如果包有命名空间”现在表示所有包，因为这在 R 2.14.0 中已更改（IIRC 版本号）

如果您要更改的代码是 R 代码，请考虑使用`assignInNamespace()`将全局工作区中的对象/函数（即 中的较新版本的函数`mypkg`）分配给`mypkg`. 例如，我们`foo()`在`mypkg`本地和本地都有函数，`newfoo()`这是较新版本的`foo()`：

```
assignInNamespace("foo", newfoo, "mypkg") 
```

如果更改与 C 代码有关，或者上述内容不起作用，那么也许您应该遵循 R Core 的建议并生成一个新的 R 实例，而不是尝试分离您的包。

另请参阅 Hadley Wickham 和 Emacs+ESS 的**devtools**包，如果您说 Emacs，可能会使开发过程更容易（产生新的 R 实例等）。

# sql - 如何在我的用户表中散列管理员密码？

> ID：10385988
> 
> 赞同：3
> 
> 时间：2012-04-30T15:11:07.603
> 
> 标签：sql, sql-server, sql-server-2008

如何在我的用户表中散列管理员密码？

使用 SQL Server 2008 R2

我知道 PHP 中内置了一个加密命令，但我不确定这是否可以使用 SQL 查询。

示例：名为 users 的表，输入为 admin，密码为`sha1('password')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:24:16.860

请注意，以上都不是存储密码哈希的好方法。使用 PBKDF2 (PKCS #5, RFC2898) 对*加盐*密码进行多次哈希处理（OWASP 建议在 2012 年 64,000 次，每 2 年翻一番）。理想情况下，散列它的次数可变，与每个用户的随机盐一起存储。

更好的是，将建议的密码与已知的错误密码列表进行对比，理想情况下，已经应用了基本的破解规则（1337 语音翻译），因此不允许使用“P@$$w0rd”。

请参阅 OWASP 密码存储备忘单：[https ://www.owasp.org/index.php?title=Password_Storage_Cheat_Sheet&setlang=es](https://www.owasp.org/index.php?title=Password_Storage_Cheat_Sheet&setlang=es)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:18:07.907

使用`HASHBYTES`并指定`SHA1`为算法。例子：

```
SELECT HASHBYTES('SHA1', @password); 
```

**编辑：**正如 Siva 在评论中所说，你真的应该以不同的方式存储你的密码，并且至少对它们加盐。

请参阅此处：[在数据库中存储密码的首选方法](https://stackoverflow.com/questions/615704/preferred-method-of-storing-passwords-in-database)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:27:38.513

加密和散列是有区别的。加密通常使用密码翻译纯文本，并且可以反转为原始输入，如果哈希不能反转为原始输入。

对于您的查询，您应该使用以下`HASHBYTES`功能：

```
DECLARE @YourInput nvarchar(4000);
SELECT @YourInput = CONVERT(nvarchar(4000),'dslfdkjLK85kldhnv$n000#knf');
SELECT HASHBYTES('SHA1', @YourInput); 
```

如果您使用的是 SQL Server 2012，则可以使用：

```
SELECT HASHBYTES('SHA_256', @YourInput); // SHA 256 or SHA_512 
```

[http://msdn.microsoft.com/en-us/library/ms174415.aspx](http://msdn.microsoft.com/en-us/library/ms174415.aspx)

# api - REQUEST_DENIED Google Maps API v3 Places 错误

> ID：10385990
> 
> 赞同：2
> 
> 时间：2012-04-30T15:11:12.720
> 
> 标签：api, windows-phone-7, google-maps-api-3, google-places-api

我正在尝试在 Google Maps API v3 中使用 Google Places，但出现以下错误：REQUEST_DENIED。我的 URI 是：[https ://maps.googleapis.com/maps/api/place/search/xml?location=47.1738409069289,27.574825862967&radius=1000&name=atm&sensor=false&key=AIzaSyA5aYxMm7RoYGwoha1oDHVRXbPxF0Ep0vk](https://maps.googleapis.com/maps/api/place/search/xml?location=47.1738409069289,27.574825862967&radius=1000&name=atm&sensor=false&key=AIzaSyA5aYxMm7RoYGwoha1oDHVRXbPxF0Ep0vk)

阅读此内容后：[使用 Google Places API 时的 REQUEST_DENIED](https://stackoverflow.com/questions/8427980/request-denied-when-using-the-google-places-api)和此：[Google Places API - REQUEST_DENIED](https://stackoverflow.com/questions/9060563/google-places-api-request-denied)后，我得到了另一个密钥，将传感器设置为 false 和 true，但我仍然收到相同的错误。

这个问题有解决方案吗？谢谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T06:38:04.393

您似乎尚未在您的 API 控制台中激活 Places API 服务，网址为[https://code.google.com/apis/console](https://code.google.com/apis/console)。

请按照此处的说明激活服务： [https ://developers.google.com/maps/documentation/places/#Authentication](https://developers.google.com/maps/documentation/places/#Authentication)

您可能需要考虑生成一个新的 API 密钥，因为您已将其发布在此处，以避免滥用您帐户下的服务。始终保持您的 API 密钥安全可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:25:22.647

删除您的旧应用程序并创建新应用程序并启用place api，然后您将在“Api Access”中获得api密钥。它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:54:33.247

前几天遇到同样的问题

请前往[https://code.google.com/apis/console](https://code.google.com/apis/console) 并创建新应用程序并启用 place api ，然后您将在“Api Access”中获得 api 密钥。

# c++ - C++ PPL - 初始化一个可组合的

> ID：10385991
> 
> 赞同：0
> 
> 时间：2012-04-30T15:11:15.443
> 
> 标签：c++, parallel-processing, ppl

假设在封闭范围内，我有一些变量，parallel_for 循环中的每个线程都应该访问这些变量。我有一个可以组合的想法，在每个线程中制作一个我的变量副本。但是，我不明白如何初始化我的可组合事物：

例如，我想使用 QString 公式的副本。我为每个线程中的复制内容创建了一个可组合的代表：

```
 combinable<QString> formulaRx; 
```

那我应该写：

```
parallel_for(0,p,[&formulaRx, formula](int i)
{
         formulaRx.local() = formula;

         // do things

 }); 
```

? 这会解决问题吗，还是仍然可以与线路并发访问

```
 formulaRx.local() = formula; 
```

处理这个问题的正确方法是什么？

如果不清楚请告诉我

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:57:07.127

你不需要分配`formulaRx.local()`. 这是可组合对象的本地副本的 getter。

```
parallel_for(0,p,(int i)
{
     QString f = formulaRx.local();

     // do things with f which is the local copy of formulaRx

}); 
```

# facebook - Facebook API - 查找个别帖子的详细信息

> ID：10385992
> 
> 赞同：0
> 
> 时间：2012-04-30T15:11:16.847
> 
> 标签：facebook, api

我正在寻找是否可以从单个帖子中提取数据；下面列出。我希望每天为业务页面提取这些数据。根据每日数据，我想制作一份每周报告，比较上周的一组数据。

我要获取的数据是：

*   活动/每个帖子被查看了多少次
*   导致订阅/喜欢的帖子
*   导致退订/不同的帖子
*   隐藏单个帖子的人数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:59:49.077

Facebook 提供对页面（或应用程序）的洞察力的 api 访问。

您有两种方法可以访问它：[Insights 对象](http://developers.facebook.com/docs/reference/api/insights/)或[Insights fql 表](https://developers.facebook.com/docs/reference/fql/insights)。使用它，您可以使用 fql 表文档中的特定指标加载有关您的页面的统计信息。你关心的那些（基于你的问题）从[*页面帖子*](https://developers.facebook.com/docs/reference/fql/insights/#page_postss)开始，然后你有*故事和人在谈论这个，印象和参与度*。

根据 fql 表文档：

> 要阅读您需要的见解
> 
> 当前会话用户拥有的所有应用程序、页面和域的 read_insights 权限

这意味着您将无法每天仅运行一次程序来收集此数据，因为您需要一个活动令牌来获取有权访问页面洞察数据并已授权您的应用并授予“read_insights”权限。

您可以确保用户在使用[服务器端身份验证流程](http://developers.facebook.com/docs/authentication/server-side/)对他进行身份验证时使用您的应用程序，这将产生 60 天的令牌，保存它，您可以在接下来的 60 天内每天运行该程序。当令牌过期时，用户将不得不再次使用您的应用程序进行身份验证并创建一个新的有效令牌。

# jquery - jquery a.now - IE8 错误

> ID：10385995
> 
> 赞同：1
> 
> 时间：2012-04-30T15:11:32.190
> 
> 标签：jquery, internet-explorer-8

我在使用 IE8 和 jQuery 时遇到问题。准确地说，脚本在这一行中断：

```
a.elem.style[a.prop]=a.now+a.unit 
```

我正在使用来自[http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js的 jQuery v1.7.2](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js)

您可以在此 URL 上看到错误/网站：[http ://www.melisayavas.com/gallery/](http://www.melisayavas.com/gallery/)

这个问题有解决办法吗？