# StackOverflow 问答 11377000-11377999

# android - 将数据从小部件传递到应用程序

> ID：11377003
> 
> 赞同：3
> 
> 时间：2012-07-07T17:05:50.123
> 
> 标签：android, android-widget, android-pendingintent

我正在为我的应用程序开发一个小部件，我想将特定数据从小部件传递到应用程序。用户可以添加多个版本的小部件，我需要检测它来自哪个小部件，以便我可以在应用程序中显示特定信息。

到目前为止我所做的工作，但前提是我完全退出我的应用程序（反复按下后退按钮），否则它似乎没有检测到正在传递的数据。

这是我必须将数据从小部件传递到应用程序的代码：

```
public class WidgetProvider extends AppWidgetProvider  {

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        final int N = appWidgetIds.length;

        for (int i=0; i<N; i++) 
            UpdateWidget(context, appWidgetManager, appWidgetIds[i]);
    }

    public static void UpdateWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId)
    {
        Intent intent = new Intent(context, Main.class);
        final Bundle bun = new Bundle();
        bun.putInt("widgetId", appWidgetId);
        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.putExtras(bun);

        PendingIntent pendingIntent = PendingIntent.getActivity(context, appWidgetId, intent, PendingIntent.FLAG_UPDATE_CURRENT);

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
        views.setOnClickPendingIntent(R.id.widgetText, pendingIntent);

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
} 
```

**更新**

多亏了 Tal Kanel，让这项工作接近完成。我`ActionBar`在我的应用程序中有一个并遵循 Google 的指南，我在以下代码中有此代码`onOptionsItemSelected`：

```
if (item.getItemId() == android.R.id.home) {
          final Intent intent = new Intent(activity, Main.class);
          intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
          startActivity(intent);
          return true;
    } 
```

如果我单击 中的“后退”按钮`ActionBar`，则最小化我的应用程序并单击小部件，此代码始终为空：

```
 if (getIntent().getExtras() != null)
    {

    } 
```

**更新 2**

实际上，只是回到我的应用程序中的主要活动会导致`getExtras()`为空。我的应用程序小部件中有此代码，它不会向应用程序传递任何额外内容：

```
 PendingIntent piMain = PendingIntent.getActivity(context, appWidgetId, new Intent(context, Main.class), PendingIntent.FLAG_UPDATE_CURRENT);

    rv.setOnClickPendingIntent(R.id.widgetTitle, piMain); 
```

如果我在我的小部件中单击该部分，然后返回并单击我的小部件中应该传递附加功能的部分，`getExtras()`则始终为空。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T05:59:50.577

首先 - 当您按下返回直到返回主屏幕时，您的应用程序并没有真正关闭。只是在此阶段不存在您的应用程序中的任何活动。
我认为知道这一点非常重要，以防你不...

关于您的问题：
您正在尝试使用它定义的 FLAG_ACTIVITY_CLEAR_TOP 从小部件启动活动：

> 如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。

这意味着如果您的 Main 活动已经在前台运行，那么当您从小部件启动活动时 - 此 Main 活动之上的所有其他活动都将从堆栈中删除，并且 Main 将恢复并进入**Activity.onNewIntent(intent )**回调。

这就是您看不到数据的原因 - 因为活动不会以新意图重新启动，而只会以您发送的新意图进入 onNewIntent(intent)。

我敢肯定，如果您在 onNewIntent(intent) 方法中设置一个断点 - 您会看到您发送的意图已传递到那里，以及所有额外的数据。

您的代码的另一个问题：检查 Intent.putExtras(boundle) 方法的定义：

> 向意图添加一组扩展数据。键必须包含包前缀，例如应用程序 com.android.contacts 将使用类似“com.android.contacts.ShowAll”的名称。

**似乎您没有按照规则调用您的密钥前缀**。这就是为什么它是空的。

希望它对你有所帮助。

# java - 如何从 Android 的 xml 字符串资源中检索二维数组？

> ID：11377004
> 
> 赞同：20
> 
> 时间：2012-07-07T17:06:16.907
> 
> 标签：java, android, xml, multidimensional-array, android-xml

假设我在 android 资源中存储了一个二维数组，如下所示。如何将它们放入像 Arraylist 这样的 Java 集合中？

```
<resources>
<string-array name="countries_array">   
<item>
    <name>Bahrain</name>
    <code>12345</code>
</item>
<item>
    <name>Bangladesh</name>
    <code>54545</code>
  </item>
<item>
    <name>India</name>
    <code>54455</code>
</item>

</string-array>
</resources> 
```

例如，在一维数组的情况下，我们可以使用

```
getResources().getStringArray(R.array.countries_array); 
```

当国家数组就像

```
<resources>
<string-array name="countries_array">   
  <item>Bahrain</item>
  <item>Bangladesh</item>
  <item>India</item>
</string-array>
</resources> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-07T17:26:52.400

资源文件的`<string-array>`元素只能用于一维数组。换句话说，介于`<item>`和之间的所有内容都`</item>`被视为单个字符串。

如果您想以您描述的方式存储数据（实际上是伪 XML），您需要将项目作为一个单一的`String[]`使用`getStringArray(...)`并自己解析`<name>`and`<codes>`元素。

就我个人而言，我可能会使用一种限制格式，例如......

```
<item>Bahrain,12345</item> 
```

...然后只需使用`split(...)`.

或者，将每个定义`<item>`为 JSONObject，例如...

```
<item>{"name":"Bahrain","code":"12345"}</item> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-27T20:13:54.897

我没有写多值条目，而是[写了另一种](http://basememara.com/storing-multidimensional-resource-arrays-in-android/)方法，您可以将复杂对象存储为数组，然后在名称后加上增量整数。如果需要，遍历它们并从那里创建一个强类型对象列表。

```
<resources>
    <array name="categories_0">
        <item>1</item>
        <item>Food</item>
    </array>
    <array name="categories_1">
        <item>2</item>
        <item>Health</item>
    </array>
    <array name="categories_2">
        <item>3</item>
        <item>Garden</item>
    </array>
<resources> 
```

然后您可以创建一个静态方法来检索它们：

```
public class ResourceHelper {

    public static List<TypedArray> getMultiTypedArray(Context context, String key) {
        List<TypedArray> array = new ArrayList<>();

        try {
            Class<R.array> res = R.array.class;
            Field field;
            int counter = 0;

            do {
                field = res.getField(key + "_" + counter);
                array.add(context.getResources().obtainTypedArray(field.getInt(null)));
                counter++;
            } while (field != null);
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            return array;
        }
    }
} 
```

现在可以这样消费：

```
for (TypedArray item : ResourceHelper.getMultiTypedArray(this, "categories")) {
    Category category = new Category();
    category.ID = item.getInt(0, 0);
    category.title = item.getString(1);
    mCategories.add(category);
} 
```

# python - 如何使用 BeautifulSoup 获取父值和嵌套值？

> ID：11377005
> 
> 赞同：0
> 
> 时间：2012-07-07T17:06:19.033
> 
> 标签：python, beautifulsoup

我正在使用 BeautifulSoup 从 HTML 页面中提取类别和子类别。html 看起来像这样：

```
<a class='menuitem submenuheader' href='#'>Beverages</a><div class='submenu'><ul><li><a href='productlist.aspx?parentid=053&catid=055'>Juice</a></li></ul></div><a class='menuitem submenuheader' href='#'>DIY</a><div class='submenu'><ul><li><a href='productlist.aspx?parentid=007&catid=052'>Miscellaneous</a></li><li><a href='productlist.aspx?parentid=007&catid=047'>Sockets</a></li><li><a href='productlist.aspx?parentid=007&catid=046'>Spanners</a></li><li><a href='productlist.aspx?parentid=007&catid=045'>Tool Boxes</a></li></ul></div><a class='menuitem submenuheader' href='#'>Electronics</a><div class='submenu'><ul><li><a href='productlist.aspx?parentid=003&catid=019'>Audio/Video</a></li><li><a href='productlist.aspx?parentid=003&catid=027'>Cameras</a></li><li><a href='productlist.aspx?parentid=003&catid=023'>Cookers</a></li><li><a href='productlist.aspx?parentid=003&catid=024'>Freezers</a></li><li><a href='productlist.aspx?parentid=003&catid=025'>Kitchen Appliances</a></li><li><a href='productlist.aspx?parentid=003&catid=048'>Measuring Instruments</a></li><li><a href='productlist.aspx?parentid=003&catid=020'>Microwaves</a></li><li><a href='productlist.aspx?parentid=003&catid=050'>Miscellaneous</a></li><li><a href='productlist.aspx?parentid=003&catid=026'>Personal Care</a></li><li><a href='productlist.aspx?parentid=003&catid=021'>Refrigerators</a></li><li><a href='productlist.aspx?parentid=003&catid=018'>TV</a></li><li><a href='productlist.aspx?parentid=003&catid=022'>Washers/Dryers/Vacuum Cleaners</a></li></ul></div> 
```

其中饮料是类别，果汁是子类别。

我有以下代码来提取类别：

```
from bs4 import BeautifulSoup
import re
import urllib2

url = "http://www.myprod.com"

def main():
  response = urllib2.urlopen(url)
  html = response.read()

  soup = BeautifulSoup(html)
  categories = soup.findAll("a", {"class" :'menuitem submenuheader'})
  for cat in categories:
    print cat.contents[0] 
```

我将如何获得这种格式的子类别？

```
[Beverages = Category]
 [Juice = Sub]
[DIY = Category]
 [Miscellaneous = Sub]
 [Spanners = Sub]
 [Sockets = Sub]
[Electronics]
 [Audio = Sub]
 [Cameras] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:27:05.200

从每个类别 html 中，您必须找到下一个元素，然后从那里找到它的 li 元素：

```
print cat.findNext().findAll('li') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:02:14.100

考虑到您的 html 始终具有这些*子菜单*div，最好以`cats[i]`对应于`subcats[i]`或根据您想要的方式返回字典的方式返回一个类别列表和另一个子类别列表。

在 Python 外壳中：

```
>>> from BeautifulSoup import BeautifulSoup
>>> html = '''<a class="menuitem submenuheader" href="#">Beverages</a>
... <div class="submenu">
...  <ul>
...   <li><a href="productlist.aspx?parentid=053&amp;catid=055">Juice</a></li>
...   <li><a href="productlist.aspx?parentid=053&amp;catid=055">Milk</a></li>
...  </ul>
... </div>
... <a class="menuitem submenuheader" href="#">DIY</a>
... <div class="submenu">
...  <ul>
...   <li><a href="productlist.aspx?parentid=053&amp;catid=055">Micellaneous</a></li>
...   <li><a href="productlist.aspx?parentid=053&amp;catid=055">Spanners</a></li>
...   <li><a href="productlist.aspx?parentid=053&amp;catid=055">Sockets</a></li>
...  </ul>
... </div>'''
>>> soup = BeautifulSoup(html)
>>> categories = soup.findAll("a", {"class": 'menuitem submenuheader'})
>>> cats = [cat.text for cat in categories]
>>> sub_menus = soup.findAll("div", {"class": "submenu"})
>>> subcats = []
>>> for menu in sub_menus:
...     subcat = [item.text for item in menu.findAll('li')]
...     subcats.append(subcat)
... 
>>> print cats
[u'Beverages', u'DIY']
>>> print subcats
[[u'Juice', u'Milk'], [u'Micellaneous', u'Spanners', u'Sockets']]
>>> cat_dict = dict(zip(cats,subcats))
>>> print cat_dict
{u'Beverages': [u'Juice', u'Milk'], u'DIY': [u'Micellaneous', u'Spanners', u'Sockets']} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-30T10:42:06.220

查看有问题的网页，看起来所有新闻都在`h3`带有 class 的标签中`item-heading`。您可以使用 BeautifulSoup 选择所有故事标题，然后向上访问`a href`它们所包含的内容：

```
In [54]: [i.parent.attrs["href"] for i in soup.select('a > h3.item-heading')]
Out[55]:
[{'href': '/news/us-news/civil-rights-groups-fight-trump-s-refugee-ban-uncertainty-continues-n713811'},
 {'href': '/news/us-news/protests-erupt-nationwide-second-day-over-trump-s-travel-ban-n713771'},
 {'href': '/politics/politics-news/some-republicans-criticize-trump-s-immigration-order-n713826'},
...  # trimmed for readability
] 
```

我使用了列表理解，但您可以拆分为复合步骤：

```
# select all `h3` tags with the matching class that are contained within an `a` link.
# This excludes any random links elsewhere on the page.
story_headers = soup.select('a > h3.item-heading')

# Iterate through all the matching `h3` items and access their parent `a` tag.
# Then, within the parent you have access to the `href` attribute.
list_of_links = [i.parent.attrs for i in story_headers]

# Finally, extract the links into a tidy list
links = [i["href"] for i in list_of_links] 
```

获得链接列表后，您可以遍历它以检查第一个字符是否为`/`仅匹配本地链接而不匹配外部链接的字符。

# asp.net-mvc-3 - 更改 asp.net-mvc-3 中不显眼的验证的行为

> ID：11377006
> 
> 赞同：4
> 
> 时间：2012-07-07T17:06:20.250
> 
> 标签：asp.net-mvc-3, jquery-validate, unobtrusive-validation

我想更改默认行为`jquery.validate.unobtrusive.js`

我希望能够在发生错误时更改错误消息位置或突出显示字段等选项

我可以`jquery.validate`单独使用插件做的所有事情。只需更改一些`validate`方法选项，例如`highlight`或`errorPlacement`

所以我想覆盖一些不显眼的验证功能，是否可以不更改`jquery.validate.unobtrusive.js`文件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T17:08:39.550

您可以从表单数据中获取本机验证器，然后订阅任何[标准选项](http://docs.jquery.com/Plugins/Validation/validate#options)。例如`errorPlacement`：

```
$(function() {
    var validator = $('form').data('validator');
    validator.settings.errorPlacement = function(error, element) {
        // do your custom error placement
    };

    validator.settings.highlight = function(element, errorClass) {
        // do your custom error highlight
    };
}); 
```

# json - firebase 中的 json 数据格式 - 是否支持数组？和/或者，如果只支持对象，字典可以用整数编号吗？

> ID：11377011
> 
> 赞同：8
> 
> 时间：2012-07-07T17:07:02.187
> 
> 标签：json, firebase

我正在修补 firebase 并对数据结构感到好奇。浏览我的数据库，firebase 允许我修改我的数据库中的结构和数据。但似乎 firebase 只支持对象（和列表的字典）。

我想知道是否支持数组。我还想知道字典项是否可以用整数命名——firebase 接口只插入字符串作为名称，这让我担心记录的排序。

以下是通过 firebase 接口创建的 json 示例：

```
{
 "dg":{
  "users":{
   "rein":{
    "searches":{
     "0":{
      "urls":"http://reinpetersen.com,http://www.reinpetersen.com",
      "keyphrases":"rein  petersen,reinsbrain,programmer turned kitesurfer"
     }
    }
   },
   "jacqui":{
    "searches":{
     "0":{
      "urls":"http://www.diving-fiji.com,http://diving-fiji.com",
      "keyphrases":"diving marine conservation, diving fiji"
     }
    }
   }
  },
  "crawl_list":{
   "1":{
    "urls":"http://www.diving-fiji.com,http://diving-fiji.com",
    "keyphrases":"diving marine conservation, diving fiji"
   },
   "0":{
    "urls":"http://reinpetersen.com,http://www.reinpetersen.com",
    "keyphrases":"rein  petersen,reinsbrain,programmer turned kitesurfer"
   }
  }
 }
} 
```

显然，对于我的列表，我希望字典项目名称是整数，这样我可以确保排序是正确的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T19:43:37.377

您可以将数组保存到 Firebase。例如：

```
var data = new Firebase(...);
data.set(['x', 'y', 'z']); 
```

Javascript 数组本质上只是带有数字键的对象。检索数据时，我们会自动检测 Firebase 对象何时只有数字键，如果是这种情况，我们会返回一个数组。

请注意，对于存储许多人可以追加的数据列表，数组不是一个好的选择，因为多个人写入数组中的同一索引可能会导致冲突。相反，我们有一个“推送”功能，可为您的数据创建按时间顺序排列的唯一 ID。

此外，如果您打算将数组用作排序数据的一种方式，那么使用我们的优先级可以更好地做到这一点。请参阅[文档](http://www.firebase.com/docs/ordered-data.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T18:44:50.440

Firebase 文档有一个关于如何排序数据的非常好的部分：[Ordered Data](http://www.firebase.com/docs/ordered-data.html)。

就像 JSON 字段一样，Firebase 字段只能用字符串命名。听起来您正在寻找的是`setWithPriority()`，它将可排序的优先级数据附加到您的字段，或者`push()`，保证为您的字段提供唯一的名称，按时间顺序排列。（更多关于列表和`push()` [这里](http://www.firebase.com/docs/managing-lists.html)。）

你也可以`push()`或`set()`数组。例如，

```
new Firebase("http://gamma.firebase.com/MyUser").push(["cakes","bulldozers"]); 
```

生成一棵您期望的树，MyUser 收到一个唯一命名的孩子，该孩子有孩子`"0":"cakes"`和`"1":"bulldozers"`.

# actionscript-3 - ActionScript 3 Public MovieClip

> ID：11377014
> 
> 赞同：0
> 
> 时间：2012-07-07T17:07:48.603
> 
> 标签：actionscript-3, function, movieclip, public, dynamically-generated

I've dynamically created a menu using MovieClips as menu items inside a public function, but I also need to access these MovieClips on the timeline, however using similar code as below works for initially creating them, but not accessing them on the timeline.

I'm attempting to access functions and child MovieClips inside each menu items.

```
public function createMenuFunction():void {
    var buttonMC:menuButtonMC;
        for (var i:uint = 1; i <= totalTopicsI; i++) {
            buttonMC = new menuButtonMC();
            menuMC.contentMC.addChild(buttonMC);
            buttonMC.name = 'button' + i + 'MC';
            menuMC.contentMC.getChildByName('button' + i + 'MC').UI();
            menuMC.contentMC.getChildByName('button' + i + 'MC').y = (i - 1) * 70;
            menuMC.contentMC.getChildByName('button' + i + 'MC').updateTextFunction(textO['Topic ' + i]);
            menuMC.contentMC.getChildByName('button' + i + 'MC').addEventListener(MouseEvent.CLICK, updateCurrentTopicFunction);
            trace('Menu ' + i + ': ' + textO['Topic ' + i]);
        }
    }
} 
```

For example, the following line of code works inside this function, but not on the timeline:

```
menuMC.contentMC.getChildByName('button' + i + 'MC').UI(); 
```

Any suggestions are welcome.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:31:29.433

尝试这个：

```
public var menuData:Array = new Array();
for (var i:uint = 1; i <= totalTopicsI; i++) {
  menuData[i] = new menuButtonMC();
  menuMC.contentMC.addChild(menuData[i]);
  menuData[i].name00 = 'button' + i + 'MC';
  menuMC.contentMC.getChildByName('button' + i + 'MC').UI(); 
  menuMC.contentMC.getChildByName('button' + i + 'MC').y = (i - 1) * 70; 
  menuMC.contentMC.getChildByName('button' + i + 'MC').updateTextFunction(textO['Topic ' + i]); 
  menuMC.contentMC.getChildByName('button' + i + 'MC').addEventListener(MouseEvent.CLICK, updateCurrentTopicFunction); 
  trace('Menu ' + i + ': ' + textO['Topic ' + i]); 
} 
```

这样，您将保存所有按钮和属性。（`name00`不使用`name`）

# javascript - How can I constantly check collision between page elements?

> ID：11377015
> 
> 赞同：0
> 
> 时间：2012-07-07T17:08:01.030
> 
> 标签：javascript, jquery

I have implemented the algorithm, but what I am facing is how can I check constantly whether the element has hit other elements.

Example:

div id='water' when hits div id='orange' should alert , should I use jQuery setInterval :s or is there any other way to keep the function live ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:42:09.143

您应该使用**setInterval()**。这是一个小样本。

```
$(document).ready(function() {
    // Checks collisions every second
    setInterval(function(){checkCollisions()},1000);
});

function checkCollisions() {
    // Do your checks
} 
```

# java - Tomcat error: java.sql.SQLException: No suitable driver found for jdbc:sqlserver://

> ID：11377018
> 
> 赞同：4
> 
> 时间：2012-07-07T17:08:38.300
> 
> 标签：java, tomcat, apache-commons-dbcp, jdbc-pool

I have a terrible problem with Tomcat, well terrible because of this problem I've thrown away the project for more than a month now... Yet I'll still need to solve it and to go on with the project...

So it's throwing me this error:

java.sql.SQLException: No suitable driver found for jdbc:sqlserver://isd.ktu.lt:1433;DatabaseName=LN2012_bakDB2 java.lang.NullPointerException

The thing is that the same application is working in the desktop version perfectlz, however when it comes to the version which is supposed to be running on the server (Tomcat 7.0.22.0 inside NetBeans 7.1.2) it just throws the Error. It seems it doesn't load the pooling driver or I don't even know...

Well here's the part responsible for that:

```
public DatabaseConnection(Parameters params) {                

    // parameters and the output                
    this.gui = params.getGui();

    // activate database pool
    connectionPool = new GenericObjectPool(null);
    connectionFactory = new DriverManagerConnectionFactory(params.getDbAdr(), params.getDbUser(), params.getDbPass());
    poolableConnectionFactory = new PoolableConnectionFactory(connectionFactory, connectionPool, null, null, false, true);
    driver = new PoolingDriver();
    driver.registerPool("GenTreeDatabase", connectionPool);
    //driver.registerPool("jdbc:apache:commons:dbcp:GenTreeDatabase", connectionPool);        

}

public void openConn() {
    if (allowOutput) gui.print("Getting connection to database");
    try {
        con = DriverManager.getConnection("jdbc:apache:commons:dbcp:GenTreeDatabase");
        if (con != null) {
            if (allowOutput) gui.print("Connection to database was successful");
        }
    } catch (SQLException ex) {
        gui.err(specificError + "Error getting connection to database - " + ex);
    }
} 
```

It happens at the point where it tries to get the connection, then it gets a null pointer exception, since the connection is not retrieved successfuly.

I'm not familiar with Tomcat and up until this moment, Netbeans handled tomcat fine... The thing is I hate errors like this... If you don't solve it in three days, you get so frustrated and don't wanna get back to that, you feel like hitting a wall... Now I tried googling a lot about it, but still it wasn't much of a help... So I'd be really glad if somebody could help me with this. Thanks. :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T10:20:19.613

您必须将 JDBC 驱动程序的 jar 复制到 $CATALINA_HOME/lib 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-14T08:03:45.527

This is probably too late to answer this question but in order to help with similar issues, Here's how I got around it.

**Quick Solution:**

Copy the `JDBC-driver JAR file` (*mine was `ojdbc6`*) into `$JAVA_HOME/jre/lib/ext` (*for me it was `C:\Program Files\Java\jdk1.7.0_80\jre\lib\ext`*).

**Details:**

According to [Apache Tomcat 7 documentations](http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html) When Tomcat is started, it creates a set of **class-loaders** that are organized into the following parent-child relationships:

```
 Bootstrap
         |
      System
         |
      Common
      /     \
 Webapp1    Webapp2 ... 
```

Each class loader, **searches for JAR files** inside a **certain directory**. The classes and resources that they make visible are explained below:

**Bootstrap** : This class loader contains the basic runtime classes provided by the JVM, plus any classes from JAR files present in the System Extensions directory **`$JAVA_HOME/jre/lib/ext`**.

**System** : This class loader is normally initialized from the contents of the **`CLASSPATH`** environment variable. All such classes are visible to both Tomcat internal classes, and to web applications. However, There are some exceptions for Tomcat.

**Common** : This class loader contains additional classes that are made visible to both Tomcat internal classes and to all web applications. This class loader looks (by default) in **`$CATALINA_BASE/lib`** and **`$CATALINA_Home/lib`** for jar files.

**Webapps** : A class loader is created for each web application that is deployed in a single Tomcat instance. All unpacked classes and resources in the **`/WEB-INF/classes`** directory of your web application, plus classes and resources in JAR files under the **`/WEB-INF/lib`** directory of your web application, are made visible to this web application, but not to other ones.

*   In conclusion, buy putting the `ojdbc` JAR file inside `$JAVA_HOME/jre/lib/ext` the JDBC driver, will get visible at the Bootstrap level.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-12T03:54:57.240

它帮助我将 mssql-jdbc-9.2.1.jre8.jar 文件复制到 C:\Java\jdk1.8.0_291\jre\lib\ext 文件夹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-05T10:55:09.350

我也遇到了同样的问题。这是因为你的 tomcat 服务器没有`jar`你的`JDBC`. 我通过将文件复制到tomcat服务器中的`JAR`文件夹来解决问题。`lib`

# java - How can I write a Timestamp in java so I can insert in mysql

> ID：11377022
> 
> 赞同：0
> 
> 时间：2012-07-07T17:08:59.260
> 
> 标签：java, model-view-controller

My table, `chat_users`, contains an attribute `last_activity` that is a `Timestamp`.

What is the Java code to write that value?

I tried `Timestamp last_activity ;` but i don't know how to pass parameter to it.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:12:28.073

In order to use [`Timestamp`](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html), you could use it like this:

```
Date dateObject = new Date(); // your date object
new Timestamp(dateObject.getTime()); 
```

Another possibility, depending on how you are implementing it: [`System.currentTimeMillis()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#currentTimeMillis%28%29).

Basically `System.currentTimeMillis()` returns the number of milliseconds since January 1, 1970, 00:00:00 GMT until current time. The same thing does `Date.getTime()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T17:16:14.240

只需使用：

```
java.sql.Timestamp timeStamp = new java.sql.Timestamp(new java.util.Date().getTime()); 
```

参考： [时间戳](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html)

# java - Issue Installing OpenNLP

> ID：11377024
> 
> 赞同：1
> 
> 时间：2012-07-07T17:09:07.817
> 
> 标签：java, apache, maven, opennlp

I'm having an issue installing OpenNLP. I am hoping that the brilliance of the hive-mind of Stack can help me out here. I admit I'm not very familiar with using Java extensions/plug-ins, so any help would be greatly appreciated.

I have installed Maven. When I run `mvn --version` I receive the following:

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 03:44:56-0500)
Maven home: /Users/[my_name]/apache-maven-3.0.4
Java version: 1.6.0_33, vendor: Apple Inc.
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x", version: "10.7.4", arch: "x86_64", family: "mac" 
```

When I go to the OpenNLP directory, `/Users/[my_name]/apache-opennlp-1.5.2`, and run `mvn clean install`, I receive this error:

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.151s
[INFO] Finished at: Sat Jul 07 12:53:54 EDT 2012
[INFO] Final Memory: 2M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] The goal you specified requires a project to execute but there is no POM in this directory (/Users/[my_name]/apache-opennlp-1.5.2). Please verify you invoked Maven from the correct directory. -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException 
```

I don't completely understand this error. If someone could explain what I need to do to fix it, I would really appreciate it.

Adam

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:06:20.207

`opennlp`从文件夹内执行命令： `/Users/[my_name]/apache-opennlp-1.5.2/opennlp`. 有关更多详细信息，请查看[构建文档](http://opennlp.apache.org/building.html)。

# php - phpinfo() is not working it shows blank page but other php working

> ID：11377026
> 
> 赞同：16
> 
> 时间：2012-07-07T17:09:19.683
> 
> 标签：php, phpinfo

I am completely lost as to why this is happening. I am on a server x10hosting. I have a PHP file named "phpinfo.php". Inside this file it says

```
<?php phpinfo(); ?> 
```

It doesn't say `<? phpinfo(); ?>`

For all I can tell it should be perfectly fine. If I try other PHP code they work.

For example

```
<?php
echo '<div>hello World</div'; 
?> 
```

works perfectly. What could possibly be the problem?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-07T17:21:25.270

`phpinfo()`对该特定托管服务提供商的免费帐户禁用。如果您想访问`phpinfo()`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-07T17:13:53.307

Use `error_reporting(E_ALL);` and `ini_set('display_errors', TRUE);` you might find an error saying that `phpinfo` is on the restricted functions list (x10hosting may not want anyone to find out their configurations/ weaknesses etc.).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-16T20:58:57.470

检查您的`php.ini`文件，然后用 grep 查找`disable_function`：

```
cat php.ini | grep -in "disable_function" 
```

如果输出`phpinfo`在这一行中有这样的：

> 386：disable_functions = show_source、系统、shell_exec、passthru、exec、phpinfo、popen、proc_open

`phpinfo`编辑文件并从此行中删除并保存。您可能需要重新启动 httpd

```
service httpd restart 
```

# python - 获取 numpy.ndarray 的索引

> ID：11377028
> 
> 赞同：6
> 
> 时间：2012-07-07T17:09:58.140
> 
> 标签：python

我有一个 numpy.ndarray 类型的一维数组，我想知道它的最大条目的索引。找到最大值后，我使用了

```
peakIndex = numpy.where(myArray==max) 
```

找到峰值的索引。但不是索引，而是我的脚本吐出

```
peakIndex = (array([1293]),) 
```

我希望我的代码只输出整数 1293。如何清理输出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T18:06:17.743

而不是使用`numpy.where`，您可以使用[`numpy.argmax`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argmax.html).

```
peakIndex = numpy.argmax(myArray) 
```

`numpy.argmax`返回单个数字，即第一次出现最大值的展平索引。如果`myArray`是多维的，您可能希望将展平索引转换为索引元组：

```
peakIndexTuple = numpy.unravel_index(numpy.argmax(myArray), myArray.shape) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T18:00:42.287

要查找数组的最大值，可以使用 array.max() 方法。这可能比另一个答案中描述的for循环更有效，除了不是pythonic之外，它实际上并不是用python编写的。（如果您想从数组中逐个取出项目进行比较，可以使用 ndenumerate，但您会牺牲数组的一些性能优势）

numpy.where() 将结果作为元组产生的原因是，不止一个位置可能等于最大值......而且正是这种边缘情况会使一些简单的事情（比如使用数组 [0]）容易出现错误。Per[是否有一个 Numpy 函数来返回数组中某物的第一个索引？](https://stackoverflow.com/questions/432112/python-numpy-array-help-is-there-a-function-to-return-the-index-of-something-i),

> “结果是一个元组，首先是所有行索引，然后是所有列索引”。

您的示例使用一维数组，因此您可以直接从提供的数组中获得所需的结果。它是一个具有一个元素（一个索引数组）的元组，尽管您可以直接迭代 ind_1d[0]，但我将其转换为一个列表只是为了便于阅读。

```
>>> peakIndex_1d
array([ 1\. ,  1.1,  1.6,  1\. ,  1.6,  0.8])
>>> ind_1d = numpy.where( peakIndex_1d == peakIndex_1d.max() )
(array([2, 4]),)
>>> list( ind_1d[0] )
[2, 4] 
```

对于 3 个值等于最大值的二维数组，您可以使用：

```
>>> peakIndex
array([[ 0\. ,  1.1,  1.5],
       [ 1.1,  1.5,  0.7],
       [ 0.2,  1.2,  1.5]])
>>> indices = numpy.where( peakIndex == peakIndex.max() )
>>> ind2d = zip(indices[0], indices[1])
[(0, 2), (1, 1), (2, 2)] 
```

# ios - Should I create an UIViewController every time I want to push it?

> ID：11377031
> 
> 赞同：0
> 
> 时间：2012-07-07T17:10:15.820
> 
> 标签：ios, memory-management, uiviewcontroller

this is probably a newbie question...

I'm trying to reduce the amount of memory usage in my iPhone app.

I have an UIViewController with a set of buttons. When the user taps any of them, the app takes him to a new screen (new UIViewController).

Should I create them on demand ([[MyUIViewController alloc] initWithNibName:@"MyUIViewController" bundle:nil];), or should I have all these UIViewControllers as `@property`s in the "main" controller, and create them only the first time? (check if they are `nil`).

I noticed (with `Instruments`) that, following the first approach, the used memory (Live bytes) increases on push but does not decrease when pulling the controller, and so on every time I press a button.

Furthermore, does that also applies to UITableViews, where I push another UIViewController in `tableView:didSelectRowAtIndexPath:` method?

Thank you in advance.

EDIT: I'm using ARC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:35:19.250

你说：

> 我注意到（使用 Instruments），按照第一种方法，使用的内存（实时字节）在推动时增加，但在拉动控制器时不会减少，等等每次我按下按钮时。

因此，当您从 VC1 转到 VC2 时，您是说内存使用量显着增加，但当您返回 VC1 时并没有下降？你检查过你的代码是否有泄漏吗？首先，通过静态分析器 ( `shift`++ `command`)运行它`B`，它可以识别一些最严重的错误。你应该有零警告。

其次，通过分析器通过 Instruments 运行您的代码以识别任何泄漏。[请参阅仪器用户指南](http://developer.apple.com/library/ios/DOCUMENTATION/DeveloperTools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html#//apple_ref/doc/uid/TP40004652-CH11-SW1)的“查找泄漏”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:20:28.997

保留它们并重用它们将使您的应用程序的基本内存保持在更高的水平，但可能会提高性能，因为这些不需要按需重新创建。

话虽如此，推送新视图控制器的性能一开始并不是很糟糕（除非你做错了什么），所以只需按需创建它们。

如果旧的 VC 内存在弹出时没有被释放，您可能在某处有一个保留周期。查找您可能编写的在关闭视图时未清除的任何委托代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T19:21:40.960

[在这里](https://chat.stackoverflow.com/rooms/13561/should-i-create-an-uiviewcontroller-every-time-i-want-to-push-it)与@RobertRyan 聊天后（我想链接会保留），他给了我解决方案：问题是我的 VC2 中有一个保留周期（请看一下聊天，所以我不会在这里重写所有内容） . 非常感谢@RobertRyan！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T17:27:23.610

通常， a`UIViewController`应该在内存上相当轻。这`UIView`是您可以节省最多内存的对象，方法是确保您熟悉视图生命周期并让视图得到清理（通过不在视图控制器`view`属性之外的任何地方保存对它们的引用并设置任何其他视图参考`nil`）`viewDidUnload`。这里有一个关于如何使用的[好答案](https://stackoverflow.com/a/2262005/461492)`viewDidUnload`。

话虽如此，只要创建视图控制器不是很重，最好在需要时重新创建它们。这不是出于记忆的原因，而是为了简单。因此，除非您出于其他原因需要在属性中保留对它们的引用，否则请保持简单并使用更少的代码 - 只需根据需要创建它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T17:27:55.763

这可能是一个新手答案，所以请持保留态度。

在这种情况下，我从不担心在代码中实现我的视图控制器。我使用情节提要创建初始视图控制器并将其嵌入到导航控制器中。然后，我创建后续视图控制器，并通过命名segue（通过控制拖动）将它们链接到初始控制器视图的适当部分。我认为通过使用这种技术，链中的视图控制器只有在其 segue 触发后才会被实例化。我确信 Apple 已经对此进行了优化，因此我相信通过使用情节提要，我将节省更多的内存，而不是试图在代码中摆弄东西。

# java - Junit EntityManager NullPointerException with App Engine 1.7 Upgrade

> ID：11377033
> 
> 赞同：0
> 
> 时间：2012-07-07T17:10:32.610
> 
> 标签：java, google-app-engine

I have a number of JUnit tests in my project that test my DataStore services. For the past two years, they've been working just fine and I've been able to successfully insert, query, and delete entities through unit tests. A couple of days ago I upgraded to App Engine 1.7 and all of a sudden all of my tests throw a NullPointerException because

Persistence.createEntityManagerFactory("transactions-optional") returns null. My persistence.xml file contains the following configuration which like I said, has worked perfectly up until the upgrade.

```
<persistence-unit name="transactions-optional">
    <provider>org.datanucleus.store.appengine.jpa.DatastorePersistenceProvider</provider> 
    <properties> 
        <property name="datanucleus.NontransactionalRead" value="true"/> 
        <property name="datanucleus.NontransactionalWrite" value="true"/> 
        <property name="datanucleus.ConnectionURL" value="appengine"/> 
    </properties> 
</persistence-unit> 
```

Also, I walked through the GAE testing setup article and I do have all of the required jar files on my class path. Any idea what could have changed in the upgrade?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:59:49.240

看起来这是一个 Eclipse 或 Google Eclipse 插件问题。在 Project > Properties 中检查了 GAE 设置。我什至检查并取消检查它以确保它已打开。事实上，运行和调试模式可以完美运行，但 JUnit 测试会失败。我只是试图再次解决这个问题，但我注意到 Java 路径中缺少 GWT 和 GAE 库，尽管 Google 设置中的复选框已被选中。很奇怪，但现在 Junit 测试工作了。

# java - a place for network connection checking

> ID：11377035
> 
> 赞同：0
> 
> 时间：2012-07-07T17:10:39.777
> 
> 标签：java, android

I've got a simple hiearachy of activities where: A is abstract and B,C, etc inherit from A. I need a place to handle network connection and it would be good to place it in the parent activity(A). However, I don't see how I can stop code in my child activities(B,C) from executing. Additionally, in each of the onResume methods of the child activities(B,C) I have extra network code which shouldn't be executed as well.

So, is there any way apart from "if" in parent onCreate + "if" in child onCreate + "if" in child onResume ? This approach should be more concise.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:29:43.330

尝试这个...

1.  即使 B 和 C 是从 A 继承的，我不认为处理网络的方法将在 B 和 C 中执行，直到您明确调用它们。

2.  如果你想在 A 类中处理网络连接，那么在 A 类中创建一个方法 as ，然后从 B 类和 C 类和as`public void handleConnection()`中进行调用 `onCreate()``onResume()``super.handleConnection();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:25:08.557

在抽象活动 A 中保留一个布尔值，例如 isNetworkAvliable。检查 A 的 Oncreate 或 A 的 onResume 中的网络是否存在（在所有工作之前必须在 B 和 C 中调用 super.onResume）并将网络放入 if(isNetworkAvliable) 中。

# css - How to stretch DIV's height to 100% of a table cell in IE and Firefox?

> ID：11377037
> 
> 赞同：0
> 
> 时间：2012-07-07T17:10:48.190
> 
> 标签：css

I know there are already similar question, but none of them could solve my problem for IE and Firefox:

The `<td>` tag has no height specification, it depends on its content (the `<div>`) This is what I have now but works for Chrome only:

```
display:inline-block;
height:100%; 
```

Thank you for your thoughts

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:19:22.563

你可以看看这个创建等高 div的[jquery 代码。](http://filamentgroup.com/lab/setting_equal_heights_with_jquery/)由于 jquery 是为跨浏览器友好而构建的，因此它应该适用于 IE 和 Firefox。您只需要查看在表中创建 div 是否符合您的要求。

提醒一下，用于布局的表格通常被认为是不好的，但这取决于您的要求——如果它真的是为了创建一个漂亮有序的信息表格而不是用于网站布局，那很好。

作为替代方案，您还可以查看这些[使用 CSS 创建表格的方法](http://coding.smashingmagazine.com/2008/08/13/top-10-css-table-designs/)

# android - Error in send_sms in my application

> ID：11377038
> 
> 赞同：1
> 
> 时间：2012-07-07T17:10:48.377
> 
> 标签：android, sms, send

my application having a page reply(send sms)....but i can't send message.....anyone help me the code...i think it is having an error in my code....how can i remove that error...

Reply.java

```
public class Reply extends Activity {

EditText replyText;
Button reply;
String replyString,name,phoneNo, message,nickname,body;
SQLiteDatabase messagedb,mydb;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reply);

    replyText=(EditText)findViewById(R.id.editTextReply);
    reply=(Button)findViewById(R.id.buttonReply);

    Bundle c = getIntent().getExtras();

    name= c.getString("nick");
    message=c.getString("body");

    System.out.println("nickname in reply : "+name);

    messagedb=this.openOrCreateDatabase("message",0, null);
    messagedb.execSQL(
            "CREATE TABLE IF NOT EXISTS tab2( nickname varchar,sender INT(13),body varchar)");

    Cursor  cur1=messagedb.rawQuery("select * from tab2 where nickname='"+name+"'", null);

    while(cur1.moveToNext())
    {
        phoneNo=cur1.getString(cur1.getColumnIndex("sender"));
        System.out.println("Number in cur1 : "+phoneNo);
    }

    TextView tv = (TextView)findViewById(R.id.textView2);  
    tv.setText(nickname);

    reply.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            message=replyText.getText().toString();

            sendSMS(phoneNo, message); 

        }

    });

}

private void sendSMS(String phoneNumber, String message)
{        
    PendingIntent pi = PendingIntent.getActivity(this, 0,
        new Intent(this, MessageViewPage.class), 0);                
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, pi, null);        
}    

} 
```

reply.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/editTextReply"
    android:layout_width="fill_parent"
    android:layout_height="300dp" 
    android:background="@drawable/reply_edit"
    android:paddingLeft="21dp"
    android:paddingRight="14dp"
    android:paddingTop="37dp"
    android:paddingBottom="37dp"
    android:layout_alignParentTop="true"
    android:layout_marginTop="50dp">
</EditText>

<Button
    android:id="@+id/buttonReply"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="50dp"
    android:layout_centerHorizontal="true"
    android:background="@drawable/white_bn"
    android:layout_marginTop="35dp"
    android:text="Reply" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="10dp"
    android:layout_alignParentTop="true"
    android:layout_marginTop="14dp"
    android:text="To : "
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_alignParentTop="true"
    android:layout_marginTop="17dp"
    android:layout_marginLeft="50dp"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

and i also uses permission

```
<uses-permission android:name="android.permission.SEND_SMS"/>

    07-06 22:42:35.515: W/dalvikvm(834): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
    07-06 22:42:35.554: E/AndroidRuntime(834): FATAL EXCEPTION: main
    07-06 22:42:35.554: E/AndroidRuntime(834): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dpn.pack/com.dpn.pack.MessageViewPage}: java.lang.NullPointerException
    07-06 22:42:35.554: E/AndroidRuntime(834):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at android.os.Handler.dispatchMessage(Handler.java:99)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at android.os.Looper.loop(Looper.java:123)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at android.app.ActivityThread.main(ActivityThread.java:4627)
   07-06 22:42:35.554: E/AndroidRuntime(834):   at java.lang.reflect.Method.invokeNative(Native Method)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at java.lang.reflect.Method.invoke(Method.java:521)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    07-06 22:42:35.554: E/AndroidRuntime(834):  at dalvik.system.NativeStart.main(Native Method)
    07-06 22:42:35.554: E/AndroidRuntime(834): Caused by: java.lang.NullPointerException
    07-06 22:42:35.554: E/AndroidRuntime(834):  at com.dpn.pack.MessageViewPage.onCreate(MessageViewPage.java:30)
   07-06 22:42:35.554: E/AndroidRuntime(834):   at      android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   07-06 22:42:35.554: E/AndroidRuntime(834):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
   07-06 22:42:35.554: E/AndroidRuntime(834):   ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T03:00:32.880

修复 MessageViewPage.java 第 30 行中的 NullPointerException

我认为您的问题早在您到达 sendSms() 行之前

# jquery - How to properly hash my links rel attr so that it stays when page refreshes

> ID：11377041
> 
> 赞同：0
> 
> 时间：2012-07-07T17:11:04.403
> 
> 标签：jquery, ajax, hash, hyperlink, rel

I would really appreicate any help on this matter. Here is the code that I have so far:

```
 $('.Ajax_links').click(function() {
  window.location.hash = $(this).attr("href");
  var href = $(this).attr('href');  
  $('#contaniner_div').load(href);

  $('data-target').click(function() {
  var data-target = $(this).attr('data-target');
  $('#contaniner_Div_Nav').load(this.data-target);
  }

 return false;
}); 
```

I would like that messed up code above to load contents into these two divs below when the link with the class set to (class="Ajax_links") is clicked:

```
<div id="contaniner_Div"></div>
<div id="contaniner_Div_Nav"></div> 
```

This is how the link looks:

```
<a href="files/content.html" class="Ajax_links" data-target="files/navigation.html"> 
```

The first method that I was working with with the rel instead of the data-target method loaded content into these two divs when the link is clicked but the rel part of that content was not included into the hash. Making it impossible for me to bookmark the rel part of link or if I wanted to go back/forward by using the browsers buttons. (I'm using the ben Alman plugin). So now I am searching for a different method, but my code doesn't work. Could someone please help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:32:36.837

正如 David Thomas 指出的那样，您似乎也承认，`$(this)`您的代码中的 jQuery 包装器是围绕文档对象的。该对象没有`rel`属性，`$(this).attr("rel")`value 也是如此`undefined`。在 JavaScript 中，`undefined != ""`, 表达式的计算结果为 true，然后您将其设置`window.location.hash`为**另一个**未定义的值：`$(this).attr("href")`. 这就是为什么您会看到类似`domain/#undefined`.

我还应该指出，您滥用[了`rel`](http://www.w3.org/TR/html401/struct/links.html#adef-rel)HTML 锚标记上的[属性。](http://www.w3.org/TR/html401/struct/links.html#adef-rel)

> 该属性描述了从当前文档到由 href 属性指定的锚点的关系。此属性的值是以空格分隔的链接类型列表。

这是[有效链接类型的列表](http://www.w3.org/TR/html401/types.html#type-links)。[`data-`使用属性](http://ejohn.org/blog/html-5-data-attributes/)存储有关 HTML 元素的任意元数据会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T17:38:39.837

我认为您将需要一个用于后退按钮和历史记录支持的插件。这一个通常被认为是相当不错的：

[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

# c - Why should I use "%d" instead "%i" as conversion specifier for integers in C?

> ID：11377045
> 
> 赞同：2
> 
> 时间：2012-07-07T17:11:27.690
> 
> 标签：c, integer

> **Possible Duplicate:**
> [Difference between format specifiers %i and %d in printf](https://stackoverflow.com/questions/1893490/difference-between-format-specifiers-i-and-d-in-printf)

This question is motivated by the fact I use to see this preference in all the C code I've read.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:17:24.743

```
%d and %i 
```

在 printf 中表示相同，即 int；有符号十进制表示法，但在 scanf 中

%d 表示十进制整数，int * 和 %i 表示整数；int * 整数可以是八进制（前导 0）或十六进制（前导 0x）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:14:06.493

`i`和`d`转换说明符对于 是等价的，`fprintf`但对于`fscanf`.

两者`i`都`d`存在于所有 C 标准（C89、C90、C11）中。

`d`比`i`我更喜欢使用`d`for更常见`fprintf`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T17:15:17.690

据我了解， %d 表示以 10 为底（d 表示 DECImal），而 i 是灵活的（您可以使用修饰符来表示八进制或十六进制）。所以，如果你不想考虑它，你应该使用 d，并且你总是想要 base-10

# java - 在异步任务的 onProgress() 方法中出错

> ID：11377048
> 
> 赞同：0
> 
> 时间：2012-07-07T17:11:38.363
> 
> 标签：java, android, android-asynctask

我已经实现了从 Internet 下载文件的代码，但是在使用进度值（进度百分比）更新我的 GUI 线程时出现空指针异常。

这是我的代码。

```
 public class CustomviewActivity extends Activity {
ProgressDialog mProgressDialog;
/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

 // instantiate it within the onCreate method
 mProgressDialog = new ProgressDialog(CustomviewActivity.this);
 mProgressDialog.setMessage("File Downloading Start....");
 mProgressDialog.setIndeterminate(false);
 mProgressDialog.setMax(100);
 mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

 // execute this when the downloader must be fired
 mProgressDialog.show();
 Asynctask downloadFile = new Asynctask();
 downloadFile.execute("http://sound21.mp3pk.com/indian/jodibreakers/jodi-breakers03(www.songs.pk).mp3");
} 
```

这是我的异步任务…………

```
public class Asynctask extends AsyncTask<String, Integer, String> {
       @Override
        protected String doInBackground(String... sUrl) {
            try {
                URL url = new URL(sUrl[0]);
                URLConnection connection = url.openConnection();
                connection.connect();
                // this will be useful so that you can show a typical 0-100% progress bar
                int fileLength = connection.getContentLength();

                // download the file
                InputStream input = new BufferedInputStream(url.openStream());
                OutputStream output = new FileOutputStream("/sdcard/file_name.mp3");

                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    publishProgress((int) (total * 100 / fileLength));
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
            } catch (Exception e) {

            }
            return null;
       }

@Override
protected void onProgressUpdate(Integer... values) {
    // TODO Auto-generated method stub
    super.onProgressUpdate(values);
     mProgressDialog.setProgress(values[0]);
}
@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
}

} 
```

出现错误后我进入 LogCat

```
07-07 22:30:38.496: ERROR/AndroidRuntime(22625): FATAL EXCEPTION: main
07-07 22:30:38.496: ERROR/AndroidRuntime(22625): java.lang.NullPointerException
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at com.custom.CustomviewActivity$Asynctask.onProgressUpdate(CustomviewActivity.java:103)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at com.custom.CustomviewActivity$Asynctask.onProgressUpdate(CustomviewActivity.java:1)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:432)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at android.os.Looper.loop(Looper.java:150)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at android.app.ActivityThread.main(ActivityThread.java:4389)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at java.lang.reflect.Method.invokeNative(Native Method)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at java.lang.reflect.Method.invoke(Method.java:507)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
07-07 22:30:38.496: ERROR/AndroidRuntime(22625):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:29:25.133

您应该开始显示`ProgressDialog`in `onPreExecute()`。看到这个[**帖子**](https://stackoverflow.com/q/4538338/844882)。

# jquery - Position div after another element which is in a form

> ID：11377049
> 
> 赞同：0
> 
> 时间：2012-07-07T17:11:45.803
> 
> 标签：jquery, css, position, css-position

Hello I would like to position absoulte a div after a filedset in a form but the form has another container element and the fieldst's height is not fixed it is changing by content inside it. I made this with jQuery but is doesn't work. Oh and I can't put the div inside the form because that div contains another form.

```
<script>
  $(function(){
  var heightOfform = document.getElementById("form").scrollHeight;
  var heightOffsomethingafter = document.getElementById("somethingafter").scrollHeight;
  document.getElementById("divtoposition").css('top', (heightOfform-heightOffsomethingafter)+'px');
  });
</script>
<style>
#all {position:relative;}
#divtoposition {position:absolute;}
</style>
<div id="all">
<div id="divtoposition"><form></form></div>
<div id="formcontainer">
  <form id="form">
    <fieldset id="afterthis"></fieldset>
    <div id="somethingafter"></div>
  </form>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:46:00.560

我认为有一个复杂的答案，但你能解释一下为什么你想要定位的 div 里面有一个表格吗？它有什么作用？可以用另一种方式完成吗？你不能把一个表格放在一个表格里，这样就出来了。您可以将 DivToPosition 的顶部设置为 100px，然后让 jquery 获取字段集的高度。如果字段集的高度为 150px，您可以让 Js 将 150 添加到 100，现在 DivToPosition 的高度为 250px；

```
 <script>
$(function(){
var divtopositionTop = 100,
fieldsetHeight = $('#afterthis').height();
   $('#divtoposition').css('top', divtopositionTop+fieldsetHeight+'px');
})
</script> 
```

只是一个可以做到的例子。必须在准备好文档时完成，以便设置高度。但是，这可能会导致位置快速变化，其中元素在应用样式时从一个位置移动到另一个位置。

# c - malloc 在这种情况下会做什么？

> ID：11377051
> 
> 赞同：4
> 
> 时间：2012-07-07T17:11:56.633
> 
> 标签：c, parsing

这行 C 代码有什么作用？

```
 be_node *ret = malloc(sizeof(*ret)); 
```

be_node的定义可以在这个文件中找到：http://funzix.git.sourceforge.net/git/gitweb.cgi?p=funzix/funzix;a=blob_plain;f=bencode/bencode.h;hb= [HEAD](http://funzix.git.sourceforge.net/git/gitweb.cgi?p=funzix/funzix;a=blob_plain;f=bencode/bencode.h;hb=HEAD)

上面的代码行是在这个文件中找到的：http: [//funzix.git.sourceforge.net/git/gitweb.cgi?p=funzix /funzix;a=blob_plain;f=bencode/bencode.c;hb=HEAD](http://funzix.git.sourceforge.net/git/gitweb.cgi?p=funzix/funzix;a=blob_plain;f=bencode/bencode.c;hb=HEAD)

我不明白如果 sizeof(*ret) 刚刚被声明会返回什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T17:16:32.037

它与 ; 的任何其他用途没有什么不同`sizeof`。它将评估其操作数的大小。 `sizeof`是基于编译时信息的，¹`ret`所以刚刚声明没关系。

这个成语是使用的首选方式`malloc`。如果您要使用，请考虑如果您在以后`be_node *ret = malloc(sizeof(be_node))`更改类型会发生什么。`ret`如果您忘记替换“ `be_node`”的两种用法，那么您将引入一个微妙的错误。

* * *

[1\. 可变长度数组的情况除外。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T17:16:45.933

`sizeof(*ret)`由编译器解析，仅查看 的类型`*ret`，而不查看其内容。在这种情况下，它是一个 be_node 的大小。它还在编译时解决，而不是在运行时解决，因此它本身不会“返回”，它只是被一个常量替换。

编译器将取出并替换为字节`sizeof(*ret)`大小的常数。`be_node`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T17:18:44.313

这是一个快捷方式，或者任何你可能想要调用的方式。

你可以写

```
be_node *ret = malloc(sizeof(be_node)); 
```

或者

```
be_node *ret = malloc(sizeof(*ret)); 
```

在第一种情况下，您基本上是在说“分配一个足够大的内存块来容纳一个 be_node”。在第二种情况下，您说的是“分配一个足够大的内存块以容纳 ret 指向的任何内容”。您更喜欢哪一个主要是偏好问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T17:19:40.130

sizeof 适用于数据类型和实际变量。在您的情况下，您使用变量作为参数调用它。当您调用 sizeof 时，变量已声明（未初始化但已声明），因此它将知道 var 的类型，并且能够以字节为单位计算内存需求，这些内存需求将由 malloc 返回和使用。

# ruby-on-rails - Rails: How to obtain entire user object via json

> ID：11377062
> 
> 赞同：0
> 
> 时间：2012-07-07T17:13:43.573
> 
> 标签：ruby-on-rails, json, request

I want to retrieve an entire user object via a get request. Currently, on of my methods looks like this:

```
 def user
    @user = User.find(current_user.id)
    render :json => @user 
  end 
```

This returns the following json:

```
"{\"annonymous_token\":null,\"email\":\"john1@doe.com\",\"name\":\"john1@doe.com\"}" 
```

My user object / schema has a many-to-many relationship with another model called pictures.

```
 has_many :picturization
  has_many :pictures, :through => :picturization 
```

How can I modify my code such that returning the user also returns the pictures the user has. If helpful, I am using devise for user authentication.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:17:39.850

您可以使用`.as_json`和传递参数，如下所示：[https ://stackoverflow.com/a/11336145/308701](https://stackoverflow.com/a/11336145/308701)

所以你可以这样做：

```
def user
  @user = User.find(current_user.id)
  render :json => @user.as_json(:include => :pictures)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:17:40.523

你试过 `@user.to_json`吗？

# api - accessing other users calendar in google apps by super admin

> ID：11377066
> 
> 赞同：1
> 
> 时间：2012-07-07T17:13:59.040
> 
> 标签：api, google-app-engine, gdata-api, google-apps

As we know Super administrators also have full access to all users' calendars and calendar event details.

I found these API's

[https://developers.google.com/google-apps/calendar/v3/reference/](https://developers.google.com/google-apps/calendar/v3/reference/) which can be used to retrieve calendar's related to a user.

i read google docs api

for getting information about a current user we use default [https://docs.google.com/feeds/default/](https://docs.google.com/feeds/default/)...

and for getting information about other user in the same domain [https://docs.google.com/feeds/user@yourdomain.com/](https://docs.google.com/feeds/user@yourdomain.com/)...

we have to replace default with user's email address.

but in calendar's api for accessing list of current user's calendar's list
we use this url [https://www.googleapis.com/calendar/v3/users/me/calendarList](https://www.googleapis.com/calendar/v3/users/me/calendarList)

if current user is an administrator and i have to retrieve list of calendar of other user in the same domain then how to retrieve that list i tried to call [https://www.googleapis.com/calendar/v3/users/rashmi@riteshmehandiratta.com/calendarList](https://www.googleapis.com/calendar/v3/users/rashmi@riteshmehandiratta.com/calendarList) response is Not Found.riteshmehandiratta.com is my domain and rashmi is a user so email address is rashmi@riteshmehandiratta.com i authorize my app by super administrator and successfully get access token and putting header Authorization with OAuth anonymous_access_token so there is no problem with authorization part of url.

can any one please help how to retrieve other user's calendar list in the same domain by super administrator via api call?plz.. plz.. help

# c# - 将日期时间转换为 PRTime C#

> ID：11377072
> 
> 赞同：1
> 
> 时间：2012-07-07T17:14:19.577
> 
> 标签：c#, firefox

我在 firefox 的 places.sqlite 工作，需要使用 C# 将本地 DateTime 转换为 PRTime。PRTime 是“一个 64 位整数，表示自 1970 年 1 月 1 日协调世界时 (UTC) 午夜 (00:00:00) 到日期时间的微秒数。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:17:18.827

这可以通过这里的这个小助手类来实现：

```
 public static class TimeHelper
    {
        // PRTime is Int64 count of microseconds from 1970-01-01-00-00-0000
        static Int64 ToPRTime(DateTime dateTime)
        {
            TimeSpan t = (dateTime - new DateTime(1970, 1, 1));
            return Convert.ToInt64(t.TotalMilliseconds * 1000);
        }

        static DateTime FromPrTime(Int64 prTime)
        {
            var someDate = new System.DateTime(1970, 1, 1, 0, 0, 0, 0);
            var milliSeconds = prTime / 1000;
           return someDate.AddMilliseconds(milliSeconds);
        }
    } 
```

# wpf - 将 ContentControl 放在自定义控件 XAML 中

> ID：11377078
> 
> 赞同：0
> 
> 时间：2012-07-07T17:16:03.900
> 
> 标签：wpf, xaml

我创建了一个自定义控件以及在该控件中使用 ContentControl 以使用 MVVM 设计模式，但是当我运行应用程序时，我的控件不喜欢这样。为了测试，我还尝试了其他标准控件，但它们都不能在自定义控件中工作......只是更多依赖于父自定义控件的自定义控件。

是否有人建议如何将标准控件（例如 ContentControl ）放置在自定义控件中？

干杯。

**编辑**

> XamlParseException -> '向'System.Collections.ObjectModel.ObservableCollection(Ribbon_Framework.RibbonTabItem)' 类型的集合添加值引发异常。' 行号“8”和行位置“14”。

```
 <Ribbon:Ribbon AutomaticStateManagement="True" x:Name="Ribbon">
        <ContentControl x:Name="SearchRibbon" Content="{Binding Path=SearchRibbon}" ContentTemplate="{DynamicResource SearchRibbonTemplate}" />
    </Ribbon:Ribbon> 
```

在内容控件内部->

```
<DataTemplate x:Key="SearchRibbonTemplate">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Ribbon:RibbonTabItem Header="Search">
                    <Ribbon:RibbonGroupBox Header="{Binding Path=DisplayName}" Width="100">
                        <Ribbon:Button Width="100" Icon="{Binding Path=TemplateResource}" LargeIcon="{Binding Path=TemplateResource}" Command="{Binding Path=Commands}" />
                    </Ribbon:RibbonGroupBox>
                </Ribbon:RibbonTabItem>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:55:26.083

您的 Ribbon 控件需要一个 RibbonTabItem 类型的对象（因为它包含一个

```
ObservableCollection<RibbonTabItem> 
```

所以您只能将 RibbonTabItem 类添加到其中 - 您需要确保您的控件允许其中的其他元素。一些第 3 方控件通过在其自定义控件的内部项中提供内容控件（即让 RibbonTabItem 在其中包含 ContentControl）或允许您自定义项模板来解决此问题

您需要更改 Ribbon 的实现或更改 RibbonTabItem 的功能才能使其正常工作。查看 ItemsControl.Items 属性，看看它是什么类型。您应该尝试为您的 ObservableCollection 使用该类型

# windows-phone-7 - 了解 Windows Phone 中 USB 网络共享接口的 IP 地址

> ID：11377079
> 
> 赞同：0
> 
> 时间：2012-07-07T17:16:12.183
> 
> 标签：windows-phone-7, networking, windows-phone-7.1, ip-address

通过 USB tethering 连接到 PC 时，是否可以知道 Windows Phone [Mango] 设备的 IP 地址。？

我问这个是因为当我将手机连接到电脑时，使用套接字它可以连接到任何 Ipaddress。换句话说，`SocketError`枚举总是返回 me `Success`。这很奇怪。

如果有人帮我澄清这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:36:16.597

电话本身可以通过环回接口（又名 127.0.0.1）访问 - 如果您尝试分析调试会话的网络流量，您会看到这一点。但是，访问级别仅限于调试器集成的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:01:19.060

当电话连接时，它会获得 IP 地址 192.168.55.101。计算机的网络接口（例如从电话连接到它）的地址为 192.168.55.100。

# javascript - 使用一堆 setTimeouts 还是 setInterval 刷新一堆对象效率更高

> ID：11377083
> 
> 赞同：3
> 
> 时间：2012-07-07T17:16:36.160
> 
> 标签：javascript, node.js, v8, spidermonkey

假设有一组`Watcher`s 需要定期刷新。它们各自可能具有不同的刷新间隔。`Watcher`在任何给定时刻可能有数百个这样的项目。刷新时间的`Watcher`范围可以从一秒到几分钟或几小时。

哪个更好？

*   `setTimeout`为每个使用一个单独的。

*   使用`setInterval`每秒运行一个函数的 a 。然后，这些函数会循环执行每次`Watcher`检查以查看是否需要刷新。

起初我认为原生代码实现`setTimeout`会比执行检查的 JS 函数更有效，但这实际上是一个问题，即如何`setTimeout`实现、每次超时需要多少开销以及数量如何超时规模。

我问的是 Node 应用程序，所以我指的特定引擎是 V8，但如果有人也知道其他引擎的详细信息，那就太酷了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:41:38.197

不管 setTimeout 或 setInterval 是如何实现的，这里有一个非常有效的想法。如果您在未来 N 个不同时间安排了 N 个事件，请创建一个对象数组，其中每个对象都有一个事件到期时间的属性和一个告诉您它是什么类型的事件的属性（回调或一些其他标识符）。最初按 time 属性对该数组进行排序，以便下一次在事件的前面，最远的时间在最后。

然后，查看数组的前面，计算直到该事件的时间并`setTimeout()`在该持续时间内执行。当`setTimeout()`火灾发生时，查看数组的开头并处理所有到达时间的事件。如果在处理一个事件之后，您需要安排它的下一次发生，请计算未来应该触发的时间，并从开始到结束遍历数组，直到找到它之后的事件并将其插入到该事件之前（以保持数组排序）。如果没有找到，将其插入到最后。在处理了到达时间的数组前面的所有事件后，计算数组前面的事件的增量时间，并`setTimeout()`为该间隔发出一个新的。

这是一些伪代码：

```
function orderedQueue() {
    this.list = [];
}

orderedQueue.prototype = {
    add: function(time, callback) {
        var item = {}, added = false;
        item.time = time;
        item.cb = callback;
        for (var i = this.list.length - 1; i >= 0; i--) {
            if (time > this.list[i].time) {
                // insert after the i item
                this.list.splice(i + 1, 0, item);
                added = true;
                break;
            }
        }
        // if no item was after this item, 
        // then put this on the front of the array
        if (!added) {
            this.list.unshift(item);
        }
    },
    addDelta(delta, callback) {
        var now = new Date().getTime();
        this.add(now + delta, callback);
    },
    waitNext: function() {
        // assumes this.list is properly sorted by time
        var now = new Date().getTime();
        var self = this;
        if (this.list.length > 0) {
            // set a timer for the first item in the list
            setTimeout(function() {
                self.process();
            }, this.list[0].time - now);
        }
    },
    process: function() {
        var now,item;
        // call all callbacks who's time has been reached
        while (this.list.length) {
            now = new Date().getTime();
            if (this.list[0].time <= now) {
                // remove front item from the list
                item = this.list.shift();
                // call the callback and pass it the queue
                item.cb(this);
            } else {
                break;
            }
        }
        // schedule the next item
        this.waitNext();
    }
} 
```

而且，这通常是您将如何使用它：

```
var q = new orderedQueue();
// put initial events in the queue
q.addDelta(100, f1);
q.addDelta(1000, f2);
q.addDelta(5000, f3);
q.addDelta(10000, f4);
q.addDelta(200, f5);
q.addDelta(100, f1);
q.addDelta(500, f1);
// start processing of queue events
q.waitNext(); 
```

# ruby - 我可以使用 capybara/rspec 来匹配范围吗？

> ID：11377087
> 
> 赞同：4
> 
> 时间：2012-07-07T17:17:18.237
> 
> 标签：ruby, ruby-on-rails-3, rspec, capybara

我正在测试一个 Rails 3.2.6 应用程序。

是否有可能做出表达的 Rspec/Capybara 断言，例如：

“如果我要 1970 年到 1990 年之间的电影，页面应该包含这些日期之间的电影：”

例如

```
it "should show films in the the chosen date range" do
  page.should have_selector '.year',  # then something like text: range(1970..1990)
end 
```

相反，我可以检查没有“.year”元素包含不在该范围内的日期吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T09:05:11.027

将块传递给 have_selector 不起作用，但`within`确实：

```
within('.year') do 
  text.to_i.should be_between(1970, 1990)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T21:30:29.010

尝试类似：

```
page.should have_selector('.year') do |year|
  range(1970..1990).should include(year.text.to_i)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T21:55:49.650

在我看来，`target.should be_between(x, y)`rspec 语法更具可读性：

```
page.should have_selector('.year') do |year|
  i_year = year.text.to_i
  i_year.should be_between(1970, 1990)
end 
```

# javascript - 按下按钮时动态注入脚本

> ID：11377092
> 
> 赞同：2
> 
> 时间：2012-07-07T17:17:29.743
> 
> 标签：javascript, html

单击时我的网页上的一个按钮执行以下操作，即将脚本注入页面

```
function InjectToolbar() {
    var script = document.createElement('script');
    scriptFarfalla.src = 'some_Path'
    document.getElementsByTagName('head')[0].appendChild(script);

} 
```

. . . . . .

它成功地执行了所需的操作。但是当我重新加载页面时，脚本丢失了

是否有任何方法/技术可以像切换按钮一样缓冲按钮的单击

切换.....>脚本注入

切换.....>脚本分离

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:22:54.720

您可以使用[cookie](http://en.wikipedia.org/wiki/HTTP_cookie)来存储您注入的脚本，然后在页面加载时重新注入它们。Cookie 和更新的[本地存储](http://www.w3.org/TR/webstorage/)是在客户端存储状态的常用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T17:32:19.673

当您离开页面（并返回）时，javascript 中发生的所有事情都会被重置。因此，您需要一种方法来存储是否加载了某些内容。这取决于您希望“保存”/“记住”多长时间。有几个选项可供您保存此信息 - Cookie、HTML5 localStorage、HTML5 sessionStorage 以及您可用的任何服务器会话使用情况（如果适用）。所以如果你想实现这样的东西，你现在需要页面的代码加载，检查特定的存储，看看你是否设置了它。如果是这样，请注入脚本。这就是我的意思：

```
window.onload = function () {
    if (checkIfInjected()) {
        scriptInjection(true);
    }
}

function toggleInjection() {
    if (checkIfInjected()) {
        scriptInjection(false);
    } else {
        scriptInjection(true);
    }
}

function scriptInjection(inject) {
    if (inject == true) {
        var script = document.createElement('script');
        script.src = 'some_Path';
        script.id = 'injected_script_id';
        document.getElementsByTagName('head')[0].appendChild(script);

        // Set the storage to say that script is injected
    } else {
        var the_script = document.getElementById("injected_script_id");
        the_script.parentNode.removeChild(the_script);
        the_script = null;

        // Set the storage to say that script has been removed (or remove from storage altogether)
    }
}

function checkIfInjected() {
    // The following syntax is wrong for anything - you need to use the correct getter for the storage type you use
    return storage.contains("script_injected");
}

<input type="button" id="button1" onclick="toggleInjection();" /> 
```

现在由您来确定您想要的存储类型，因为它们都做不同的事情，包括存储方式、存储内容以及存储时间。

# php - PHP elseif 或语句不起作用

> ID：11377095
> 
> 赞同：0
> 
> 时间：2012-07-07T17:18:08.397
> 
> 标签：php, regex, if-statement

我正在尝试根据提交的表单的内容定义一个变量，并针对 MySQL 数据库进行检查，但 preg_match 和 $variable 匹配不会一起工作。他们独立工作，但不一起工作。

我在每一步都打印出每个变量，并证明提交、比较和检索的数据始终存在，但是在比较 ifelse 语句中的两个变量时我无法定义变量： elseif ( !preg_match("/bt/i",$zip ) 或 $country !== '爱尔兰' )

过程是：表单提交->比较变量与数据库->输出变量取决于数据库比较。

示例表单提交（示例）：

联邦调查局 (12345678901)

城市（贝尔法斯特）

国家（英国）

邮编（BT1 1DS）

这是导致问题的（减少的）代码：

```
 $country = $location['country']; //good value: Ireland / bad value: Italy(or empty)
    $zip = $location['zip']; //good value: BT1 1DS / bad value: 00(or empty)

    if ($fbid == $id) { //this works
    $confirmpage = '<h3>Sorry, this page is already in the table.</h3>';
    } elseif ( !preg_match("/bt/i",$zip) or $country !== 'Ireland' ) { //confirm location
    $confirmpage = '<h3>This page is not in Northern or Southern Ireland</h3>';
    } else { //success, page can be submitted
    $confirmpage = '<h3>Confirm Page</h3>';
    } 
```

代码不起作用是：

```
 elseif ( !preg_match("/bt/i",$zip) or $country !== 'Ireland' ) 
```

当我删除此语句时，脚本的其余部分工作正常。如果选项 1 是否定的，在此声明到位的情况下，结果始终为选项 2，即使提交的表格在 zip 开头包含 BT 或将爱尔兰作为国家/地区：

```
 $confirmpage = '<h3>This page is not in Northern or Southern Ireland</h3>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:30:30.167

我创建了一个基本的 php 页面代码并复制到您的代码中 - 然后手动将 $country 和 $zip 设置为好或坏的值 - 它按预期工作，因此表明您的 preg_match 没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:50:56.797

通过更改检查的执行方式对其进行排序。而不是：如果“条件”或“条件2”，我使用 ifelse 来检查正数：

```
 $confirmpage = '<h3>This page is not in Northern or Southern Ireland</h3>';
    if ($fbid == $id) {
$confirmpage = '<h3>Sorry, this page is already in the table.</h3>';
} elseif ( preg_match("/bt/i",$zip) ) { //BT post code present
$confirmpage = $confirm;
} elseif ($country == 'Ireland') { // //Ireland present
$confirmpage = $confirm;
} else { //confirm page
$confirmpage = '<h3>This page is not in Northern or Southern Ireland</h3>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T17:24:45.723

尝试

```
elseif ( preg_match("/bt/i",$zip) == 1 || $country != 'Ireland' ) 
```

# javascript - 在单词数组中查找相似的单词

> ID：11377096
> 
> 赞同：2
> 
> 时间：2012-07-07T17:18:19.790
> 
> 标签：javascript, regex, arrays, search

这些天我用谷歌搜索，但没有任何帮助。我现在不确定它是否可能，所以我想我只是在 stackoverflow 上提问。

情况：用户可以输入一个单词或在一个输入框中。当他完成一个函数时，检查单词是否在单词数组中 - 很容易。现在我想写一个帮助，如果缺少一个字母或字母写错了，应该会弹出一条消息。

搜索的关键是什么？我试过：

*   javascript在数组中查找字符串
*   javascript在数组中查找相似的单词
*   javascript正则表达式相似词
*   ... 和更多

我希望你明白我的意思，并能给我一些提示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T21:30:57.233

Levenshtein 距离是用于计算相似词之间距离的度量。对于每个更改、改组或丢失的字母，距离都会增加。你可以在这里阅读更多： [http ://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

并在此处参考不同语言的实现：[http ://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Levenshtein_distance](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Levenshtein_distance)

我希望这会有所帮助，并感谢您的评论；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T21:40:26.607

请参阅[此处](http://ruby-snippets.heroku.com/string/levenshtein-distance)了解用于检查单词之间相似性的算法。

使用那里的代码，您可以使用`array.any?{|e| e.similar?(user_input)}`

您可以根据需要调整阈值。当然，这是 Ruby，所以你必须翻译成 javascript...

我从那里复制了代码：

```
class String

  def levenstein(other, ins=2, del=1, sub=1)

    return nil if self.nil? || other.nil?

    dm = []
    dm[0] = (0..self.length).collect { |i| i * ins}
    fill = [0] * (self.length - 1)

    for i in 1..other.length
      dm[i] = [i * del, fill.flatten] 
    end

    for i in 1..other.length
      for j in 1..self.length
        dm[i][j] = [
          dm[i-1][j-1] + (self[i-1] == other[i-1] ? 0 : sub),
          dm[i][j-1] + ins,
          dm[i-1][j] + del
          ].min
      end
    end

    dm[other.length][self.length]
  end

  def similar?(other, thresh = 2)
    self.levenstein(other) < thresh
  end

end

# Tryout
"Foobar".similar?("Fuubar", 3) # => true 
```

# ruby - Ruby Metaprogramming：检查是否被父类调用？

> ID：11377098
> 
> 赞同：0
> 
> 时间：2012-07-07T17:18:23.337
> 
> 标签：ruby, metaprogramming

给定以下课程

```
class Parent
  def hello
    puts "I am the parent class"
  end

  def call_parent_hello
    hello
  end
end

class Child < Parent
  def hello
    puts "I am the child class"
  end
end 
```

当我执行以下操作时：

```
c = Child.new
c.hello             # => Outputs: "I am the child class"
c.call_parent_hello # => Outputs: "I am the child class" 
```

是否可以`Child#call_parent_hello`访问`Parent#hello`，**但不改变`Parent`类？**

我正在寻找这样的某种`called_by_parent_class?`实现：

```
def hello
  if called_by_parent_class?
    super
  else
    puts "I am the child class"
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:16:49.790

我认为你正在寻找做这样的事情：

```
class Parent
  def hello( opts = '' )
    "Who's talking? The #{self.class} class is via the Parent class!"
  end
end

class Child < Parent

  def hello( opts = '' )
    if opts == 'super'
      super 
    else
      "I have a parent and an independent voice"
    end
  end

  def call_mom
    hello( 'super' )
  end

end

c1 = Child.new

puts c1.hello     => "I have a parent and an independent voice"
puts c1.call_mom  => "Who's talking? The Child class is via the Parent class!" 
```

但是（我不是在这里拖钓）我也认为你有点错过了子类化的意义。通常，您将子类化以获得这种方法的自动范围。如果你打破这一点，我想你会想要实例化一个 Parent 的实例。但每一个他自己。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T17:26:44.397

您可以使用以下`super`关键字：

```
class Child < Parent
  def hello
    super
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T19:25:43.460

重读你的问题后，我看到你真正的问题是：

> 是否可以让 Child#call_parent_hello 访问 Parent#hello，但不改变 Parent 类？

将您的孩子班级更改为：

```
class Child < Parent
  alias_method :call_parent_hello, :hello

  def hello
    puts "I am the child class"
  end
end 
```

正如你所问的那样解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T17:30:54.013

1.  使用`super`. `super`在父类中调用相同的方法

    ```
    class Child < Parent
      def call_parent_hello
        super
      end
    end 
    ```

2.  使用直接层次结构调用。Class#ancestors 为您提供继承的层次结构。

    ```
    class Child < Parent
      def call_parent_hello
        self.class.ancestors[1].new.hello
      end
    end 
    ```

# java - java.lang.NoClassDefFoundError

> ID：11377099
> 
> 赞同：0
> 
> 时间：2012-07-07T17:18:29.677
> 
> 标签：java, exception

当我想使用某个 jar 文件时出现“java.lang.NoClassDefFoundError”异常。

```
Exception in thread "main" java.lang.NoClassDefFoundError: .
org/apache/http/client/ClientProtocolException
    at ?uk.org.taverna.server.client.connection.ConnectionFactory.getConnection(ConnectionFactory.java:63)
    at uk.org.taverna.server.client.Server.<init>(Server.java:99)
    at uk.org.taverna.server.client.Server.<init>(Server.java:126)
    at uk.org.taverna.server.client.Server.connect(Server.java:293)
    at uk.org.taverna.server.usage.ServerUsage.Usage(ServerUsage.java:24)
    at Test.main(Test.java:23)
Caused by: java.lang.ClassNotFoundException: org.apache.http.client.ClientProtocolException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
```

我将此 jar 文件导入 jar 库，当我调用该 jar 文件中的方法时，我得到了这个异常。顺便说一句，这个jar文件是我自己写的，我可以正常运行。我不知道如何解决这个问题，我对java很陌生。

提前致谢。

沙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T17:22:44.220

您至少还需要 HttpClient jar-library。您可以在[Apache Commons](http://hc.apache.org/downloads.cgi)网站上获得它。

Jar 库可能并且经常引用另一个 jar 库。在您使用的案例库中，您使用的是 Apache Commons 框架中的 HttpClient 库。您需要将此库添加到您的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T17:42:34.197

您应该将您在应用程序中使用的所有 jar 文件放在`libs`应用程序目录的文件夹中。因此，如果您使用`apachecommons`jar 文件，请将 jar 文件复制并粘贴到`libs`应用程序中的文件夹中。

# mysql - MySQL查看外键可以为NULL的位置

> ID：11377102
> 
> 赞同：1
> 
> 时间：2012-07-07T17:18:46.917
> 
> 标签：mysql, view, foreign-keys

我想知道如何创建即使外键**为 NULL**也可以工作的视图。例如，我们有一个表**Person**，它有一个主键和两个外键：

*   身份
*   名称
*   Fk姓

两个外键**都可以是 NULL**。现在我们还有两个表，表**名**：

*   姓名
*   姓名

和表**姓**：

*   身份证号
*   姓

现在我们创建视图来显示每个人的姓名：

```
CREATE VIEW `Database`.`ViewPerson` AS 
SELECT `N`.`Name`, `S`.`Surname`
FROM `Person` `P`, `Name` `N`, `Surname` `S`
WHERE (`P`.`FkName` = `N`.`IdName`) AND (`P`.`FkSurname` = `S`.`IdSurname`) 
```

问题是，如果外键 FkSurname 为 NULL，那么即使定义了 FkName，也不会显示该行。我希望即使两个外键都是 NULL，它仍然返回两列都为 NULL 的行。现在我知道我可以通过添加表名称和表姓氏行来解决它，在名称/姓氏下具有 NULL ，然后在 FkName 和 FkSurname 中引用在这两列下具有 NULL 值的行。但我仍然想知道是否有外键为 NULL 并返回行的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T18:19:00.693

如果我正确理解您的问题，您希望为 Person 表中的每条记录的 Name 和 Surname 表中的 Name 和 Surname 字段获取相应的值（即使为 null）。

这似乎是一个简单的案例，其中 LEFT JOIN 可以正常工作。因此，根据您上面的查询，SQL 将是：

```
CREATE VIEW Database.ViewPerson AS
SELECT
  N.Name, S.Surname
FROM Person P
  LEFT JOIN Name N ON N.IdName = P.FkName
  LEFT JOIN Surname S ON N.IdSurname = S.FkSurname; 
```

（抱歉语法不是 100% 正确，我没有通过创建测试表来确认它）

# objective-c - iOS中的路径和目录

> ID：11377104
> 
> 赞同：0
> 
> 时间：2012-07-07T17:19:17.003
> 
> 标签：objective-c, ios

所以我有以下方法来获取路径：

```
- (NSString *)filePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *filePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"%@_json", self.identifier]];
    return filePath;
} 
```

此路径将用于钥匙串访问 kSecAttrAccount 和 kSecAttrGeneric。因此，我希望它具有相同的路径。然而事实证明，在我升级我的应用程序后，这条路径发生了变化。

之前是：

```
/var/mobile/Applications/CEE344F7-4FE1-4455-BD6D-A4D6EAA4F5FE/Documents 
```

之后是：

```
/var/mobile/Applications/A6429F46-972C-4BC1-A71B-2786312663E8/Documents/ 
```

什么会导致这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:21:34.527

这意味着 iOS 会在新文件夹中安装应用程序的更新版本。完成后，它将用户数据移动到新文件夹并删除旧文件夹。这可能已经完成，因此安装过程中的错误不会损坏现有应用程序。

# java - Java - 从缓冲阅读器打印行

> ID：11377113
> 
> 赞同：4
> 
> 时间：2012-07-07T17:20:33.163
> 
> 标签：java

我正在编写一个`InputStream`以恒定间隔从文件中提供行的方法。我以前用过`BufferedReader`，但遇到了缓冲问题（在读取整个文件之前没有得到任何东西），而且速度无论如何都不是问题（间隔是每秒或每半秒 - 沿着这些线）。除了无缓冲之外，是否有一个具有`readLine`类似 in 方法的类？`BufferedReader`

（编辑：我刚刚检查过 - 我的课似乎可以工作，显然问题出在输出上）

这是我使用流 ( `OnlineDataSimulator`) 的代码。我已经检查过了，流完全符合我的要求，所以显然我对输出做错了。（实际的问题是，我希望每 X 毫秒输出一次 - X 是 . 的第二个参数`OnlineDataSimulator`。当我运行此代码时会发生什么，我首先得到 X*lines 等待，然后立即输出整个输出。）

```
 System.out.println("Testing:");
        PrintStream fout = new PrintStream(new FileOutputStream("testfile"));
        for(int i=0; i<20; ++i) {
            fout.println(i);
        }
        fout.close();
        BufferedReader fin = new BufferedReader(new InputStreamReader(
                new OnlineDataSimulator("testfile",250)));
        String line;
        while((line=fin.readLine())!= null){
            System.out.println(line);
            System.out.flush();
        }
        fin.close();
        (new File("testfile")).delete(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T18:33:50.503

试试这种方式..这对我有用..

```
File f = new File("path");
FileReader fr = new FileReader(f);
BufferedReader br = new BufferedReader(fr);

String s = null;

while ((s=br.readLine())!=null)
    {

           System.out.println(s);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:29:28.517

不，没有其他非缓冲选项。一种解决方案是编写您自己的 Reader，它具有 InputStreamReader 作为底层流，并且在 readLine() 方法中，您应该调用底层输入流读取器的 read() 直到找到“\n”。聚合所有这些并将它们作为字符串返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T17:33:11.787

如果您不想拥有真正的缓冲区但想使用您的功能，`BufferedReader`可以使用缓冲区大小 1 对其进行初始化。正如您评论的那样，速度不是问题，也许是最可靠的解决方案。

```
new BufferedReader(reader, 1) 
```

[public BufferedReader(Reader in, int sz)](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#BufferedReader%28java.io.Reader,%20int%29)

如果你想实现自己的，你可以在[这里](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/BufferedReader.java#BufferedReader.readLine%28boolean%29)`readLine()`查看方法源代码。

# php - 如何抓取 SimpleHTMLDom 返回的网站？

> ID：11377115
> 
> 赞同：-4
> 
> 时间：2012-07-07T17:20:59.963
> 
> 标签：php, html, dom

我得到了简单的 HTML Dom 工作，但现在我希望它开始抓取它返回的 url，而不是抓取它已经抓取的 url。如何使用 PHP/MySQL/HTML 做到这一点？

```
<?php 
    include "/simple_html_dom.php";
    $target_url = "http://www.daparadise.com/";
    $html = new simple_html_dom();
    $html->load_file($target_url);
    foreach($html->find('a') as $link){
        echo $href->href."<br />";
    }
    $html -> clear();
?> 
```

我已经查过了，但我似乎找不到任何关于搜索它返回的结果的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:30:07.903

您是否列出特定页面的图像？你的代码就是这样做的。而且它不会爬行。对于爬网，您通常会寻找`<a>`标签，获取`src`属性，将其推送到堆栈或队列，然后进一步爬网。

* * *

总体思路：

*   队列 = 数组（$curPage）；//或使用堆栈进行深度优先搜索；你可以绕圈跑（循环）
*   虽然队列不为空：# 或任何更好的条件..
    *   弹出第一个元素。获取页面的 URL。
    *   检查此页面是否已存在于数据库中；如果是这样：
        *   （继续下一次迭代）//避免循环。
    *   使用你的 DOM 解析器来解析这个页面。
    *   从此页面中获取您想要的任何详细信息并将它们存储到您的数据库中
    *   查找所有`<a>`标签。对于每个`<a>`标签，请执行以下操作：
        *   获取`src`属性
        *   将`src`属性推送到队列中。
    *   （继续）

# r - R在csv中打破超过714列的行

> ID：11377116
> 
> 赞同：0
> 
> 时间：2012-07-07T17:21:04.880
> 
> 标签：r, dataframe, limits, intersect

我正在使用 R 处理 Twitter 数据。我拥有的是一个 .csv 文件，其中包含 365 个用户的关注者 ID。我正在尝试将此数据转换为边缘列表，最后使用 igraph 包导出 .graphml 或 Pajek 文件以进行网络分析。

.csv 文件包含 365 行。我查找的每个用户一行。每行的第一列包含用户 ID，以下列包含用户朋友（他/她关注的人）的 ID。我对这 365 个用户之间的网络感兴趣。为此，我必须过滤掉所有其他用户。

问题是 R 似乎破坏了所有大于 714 列的行（没有任何错误消息）。当我读入 csv 文件 (read.csv) 时，数据框包含 456 行（它应该包含 365）和 714 列（它应该包含超过 12500，因为一个用户有这么多朋友）。

我没有找到关于 R 中列限制的任何信息。我​​发现的所有信息都与内存限制有关。所以这是我的问题

有没有办法告诉 R 不要破坏列，或者允许这么多列？

哪种方式是格式化这些数据的最佳方式？我想这么多列不是最好的主意吗？

这是我的代码。它正在工作，但由于行数超过了应有的行数，因此节点数也超过了应有的数

```
friends=read.csv("friends.csv",header=FALSE,check.names=FALSE,sep=";")

dim(friends)

#node list
i <- 1#zähler für zeilen
from <- NULL #
to <- NULL
while(i<=nrow(friends)){#startet bei der ersten Zeile in friends datei
   a <- as.array(intersect(friends[i,2:ncol(friends)], friends[,1]))
   for(l in a){
   from <- c(from,friends[i,1])
   to <- c(to,l)    
   }
    i=i+1
}
raWnet=data.frame(from,to)

#PRODUCE GRAPH
library(igraph)
el=as.matrix(raWnet) # coerces the data into a two-column matrix format that igraph likes
el[,1]=as.character(el[,1])
el[,2]=as.character(el[,2])
net=graph.edgelist(el,directed=TRUE)

write.graph(net, file="atpoltwit.graphml", format="graphml")
write.graph(net, file="atpoltwit.NET", format="pajek") 
```

# math - 剪刀石头布。使用数学确定赢/输/平？

> ID：11377117
> 
> 赞同：7
> 
> 时间：2012-07-07T17:21:08.270
> 
> 标签：math, logic, puzzle

所以在写这个函数的时候，我正在写一个石头剪刀布游戏：

`a`是玩家一的举动，`b`是玩家二的举动。我只需要弄清楚一号选手是赢、输还是平局。

```
//rock=0, paper=1, scissors=2
processMove(a, b) {
    if(a == b) ties++;
    else {
             if(a==0 && b==2) wins++;
        else if(a==0 && b==1) losses++;
        else if(a==1 && b==2) losses++;
        else if(a==1 && b==0) wins++;
        else if(a==2 && b==1) wins++;
        else if(a==2 && b==0) losses++;
    }
} 
```

我的问题是：编写这个函数的最优雅的方式是什么？

编辑：我正在寻找单线。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-07T17:50:58.427

```
if (a == b) ties++;
else if ((a - b) % 3 == 1) wins++;
else losses++; 
```

我需要确切地知道您使用哪种语言将其变成严格的单行...

对于 JavaScript（或其他具有奇怪模数的语言），请使用：

```
if (a == b) ties++;
else if ((a - b + 3) % 3 == 1) wins++;
else losses++; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-07T17:29:28.327

我想，一个 3x3 矩阵会“更优雅”。

```
char result = "TWLLTWWLT".charAt(a * 3 + b); 
```

（编辑：忘记了，`a`已经`b`是零起源了。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T17:32:06.503

我想你可以像这样使用三元运算符 -

```
if (b==0) a==1? wins++ : loss++;

if (b==1) a==1? loss++ : wins++;

if (b==2) a==1? loss++ : wins++; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T18:13:27.317

你可以用一个简单的数学公式来得到结果，然后`if`像这样比较：

```
var moves = {
  'rock': 0, 
  'paper': 1,
  'scissors': 2
};
var result = {
  'wins': 0,
  'losses': 0,
  'ties': 0
};
var processMove = function (a, b) {
  var processResult = (3 + b - a) % 3;
  if (!processResult) {
    ++result['ties'];
  } else if(1 == processResult) {
    ++result['losses'];
  } else {
    ++result['wins'];
  }
  return result;
}; 
```

[jsFiddle 演示](http://jsfiddle.net/7a6RF/)

* * *

没有返回的一行`processMove`函数：

```
var processMove = function (a, b) {
  ((3 + b - a) % 3) ? 1 == ((3 + b - a) % 3) ? ++result.losses : ++result.wins : ++result.ties;
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-18T16:51:44.497

你怎么在java中做到这一点？

结果 = (comp - x) % 3 ;

```
System.out.println (result);
 if (result == 0 )// if the game is tie
 {
     System.out.println ("A Tie!") ;
 }

 else if (result == 1 || result == 2 )
 {
    //System.out.println (user + " " +   "beats" + " " + computer_choice + " you win" );
     System.out.println ("comp win");
 }

 else
 {
     System.out.println ("you win");
    //System.out.println (computer_choice  + " " +  "beats" + " " + user + "you lose");
 } 
```

# c# - 如何屏蔽未来的日期

> ID：11377120
> 
> 赞同：1
> 
> 时间：2012-07-07T17:21:18.710
> 
> 标签：c#, silverlight, windows-phone-7

我正在尝试从日期选择器中删除未来的日期。我正在将 Silverlight for Windows Phone Toolkit 用于 datepicker。

我正在尝试的代码是

```
DatePicker.DisplayDateEnd = DateTime.Now; 
```

它给出了一个`Microsoft.Phone.Controls.DatePicker`不包含定义的错误`DisplayDateEnd`。任何想法，如何停电或使未来日期无法选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:36:31.080

默认情况下这是不可能的：[限制 DatePicker 中的日期范围](https://stackoverflow.com/questions/9031509/limit-date-range-in-a-datepicker)

您必须下载代码并对其进行修改。如果/当您遇到任何问题时，您可以添加您想要的属性并寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:03:11.877

你试过这个吗？

```
datePicker1.BlackoutDates.Add(new CalendarDateRange(DateTime.Now.AddDays(1), DateTime.MaxValue)); 
```

干杯!

维诺德

# css - 为什么在 alignnleft 存在的情况下，wordpress 中的所有文本都不会环绕帖子图像？

> ID：11377121
> 
> 赞同：-1
> 
> 时间：2012-07-07T17:21:22.250
> 
> 标签：css, image, wordpress, css-float

下面是我的 wordpress 主题的 style.css。当我写一篇文章并插入一张图片时，只有几行文字环绕在图片周围，其余的则低于图片底部。文本的右侧有足够的空间。我在wordpress中插入图像时选择左对齐，但仍然有问题。这个css可能有问题吗？

```
body {
background:#000 url('images/bg.jpg') no-repeat center center fixed;
-webkit-background-size:cover;
-moz-background-size:cover;
-o-background-size:cover;
background-size:cover;
font-family:"proxima-nova-1", "proxima-nova-2", Helvetica, sans-serif !important;
font-size:15px;
}

.first {
margin-left:0 !important;
}

.last {
margin-right:0 !important;
}

.alpha {
margin-top:0 !important;
}

.first-pad {
padding-left:0 !important;
}

.last-pad {
padding-right:0 !important;
}

.alpha-pad {
padding-top:0 !important;
}

.omega-pad {
padding-bottom:0 !important;
}

.offset-top {
top:0;
}

.offset-bottom {
bottom:0;
}

.offset-left {
left:0;
}

.offset-right {
right:0;
}

.text-left {
text-align:left;
}

.text-center {
text-align:center;
}

.text-right {
text-align:right;
}

mark,.search-term {
background:#EBE16F;
}

.help,.info,.error,.success {
margin:10px;
padding:5px 18px;
border:1px solid #cecece;
}

.help {
border-color:#E0C618;
background:#EBE16F;
}

.info {
border-color:#92cae4;
background:#d5edf8;
}

.error,.dsq-kb24 {
border:none;
background:#FFF;
margin:0 0 70px;
padding:21px;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-o-border-radius:3px;
border-radius:3px;
}

.success {
border-color:#c6d880;
background:#e6efc2;
}

.relative {
position:relative;
}

.absolute {
position:absolute;
}

.nega {
z-index:-1;
}

a,a:visited {
color:#969696;
}

a: link {
-webkit-tap-highlight-color:rgba(0,0,0,0);
}

h1,.h1,h2,.h2,h3,.h3,h4,.h4,h5,.h5 {
font-weight:500;
}

h1 a,.h1 a,h2 a,.h2 a,h3 a,.h3 a,h4 a,.h4 a,h5 a,.h5 a {
text-decoration:none;
}

h1,.h1 {
font-size:2.5em;
line-height:1.333em;
margin:0.7em 0;
}

h2,.h2 {
font-size:24px;
line-height:1;
font-weight:700;
}

h3,.h3 {
font-size:1.125em;
}

h4,.h4 {
font-size:1.1em;
font-weight:700;
}

h5,.h5 {
font-size:0.846em;
line-height:2.09em;
text-transform:uppercase;
letter-spacing:2px;
}

#logo {
margin:1.1em 0;
}

#container {
margin:0 auto;
padding:28px 0 49px;
width:980px;
}

header hgroup h1 {
margin:0;
width:287px;
padding:15px 0;
float:left;
}

header hgroup h1 a {
background:url('images/logo.png') no-repeat 0 0;
display:block;
height:40px;
outline:none;
text-indent:-9999px;
}

header hgroup p {
width:224px;
margin:0;
float:right;
position:relative;
-webkit-border-radius:3px 3px 0 0;
-moz-border-radius:3px 3px 0 0;
-o-border-radius:3px 3px 0 0;
border-radius:3px 3px 0 0;
}

.translate-span {
text-decoration:none;
color:#666;
font-weight:normal;
}

header hgroup #search #searchform input {
height:42px;
padding:0 14px;
margin:0 42px 0 0;
border:none;
outline:none;
line-height:1;
background-color:#E1E1E1;
-webkit-border-radius:3px 0 0 0;
-moz-border-radius:3px 0 0;
-o-border-radius:3px 0 0 0;
border-radius:3px 0 0 0;
-webkit-transition:background-color 0.3s ease-in-out;
-moz-transition:background-color 0.3s ease-in-out;
-o-transition:background-color 0.3s ease-in-out;
transition:background-color 0.3s ease-in-out;
font-family:"proxima-nova-1", "proxima-nova-2", Helvetica, sans-serif !important;
}

header hgroup #search #searchform input:active,header hgroup #search #searchform input:hover,header hgroup #search #searchform input:focus {
background-color:#fff;
}

header hgroup #search #searchform #searchsubmit {
height:42px;
width:42px;
margin:0;
padding:0;
border:none;
outline:none;
text-indent:-999em;
background:transparent url('images/btnsearch.png') no-repeat;
}

header hgroup #search #searchform #searchsubmithover {
height:42px;
width:42px;
background:transparent url('images/btnsearch-hvr.png') no-repeat;
}

header hgroup .top-social {
float:left;
margin-top:35px;
margin-left:440px;
}

header hgroup .top-social a {
margin-left:16px;
float:left;
display:block;
height:20px;
}

header hgroup .top-social a.tw {
background:transparent url('images/kb-tw.png') no-repeat;
width:27px;
}

header hgroup .top-social a.fb {
background:transparent url('images/kb-fb.png') no-repeat;
width:11px;
}

nav {
width:100%;
background:#000;
float:left;
-webkit-border-radius:3px 0 0 0;
-moz-border-radius:3px 0 0;
-o-border-radius:3px 0 0 0;
border-radius:3px 0 0 0;
}

nav ul li a {
color:#0ff;
display:block;
float:left;
font-size:20px;
height:40px;
padding:16px 15px 0 26px;
text-decoration:none;
line-height:20px;
}

nav ul li a:hover,nav ul li a:active,nav ul li a:visited {
color:#0ff;
}

nav ul li a.kb-china {
background:transparent url('images/kb-china.gif') no-repeat 112px 23px;
padding:16px 44px 0 21px;
}

.china {
position:fixed;
right:110px;
top:0;
padding:1px 7px 0;
background:#000;
border-bottom:1px solid #444;
z-index:9999;
}

header section span {
float:left;
width:224px;
}

#main {
background:#e1e1e1;
}

.hero {
height:400px;
overflow:hidden;
width:980px;
}

.slides_container {
width:980px;
height:400px;
}

.slides_container div {
width:980px;
height:400px;
display:block;
}

.slide-bot {
width:53px;
height:53px;
top:50%;
margin-top:-26px;
z-index:999;
cursor:pointer;
}

.slide-prev {
background:url('images/arrow-left.png');
left:15px;
}

.slide-next {
background:url('images/arrow-right.png');
right:15px;
}

#single-banner {
width:980px;
background-color:#282828;
-webkit-background-size:cover;
-moz-background-size:cover;
-o-background-size:cover;
background-size:cover;
background-position:center center;
}

#single-banner hgroup {
margin:0;
padding:210px 0 0;
}

#single-banner hgroup h2 {
margin:0;
padding:21px 28px;
font-size:50px;
text-transform:uppercase;
font-weight:800;
color:#FFF;
background-color:rgba(56, 56, 56, 0.6);
}

#banner {
width:980px;
background:#eee url('images/bg-header.jpg') center center;
}

#banner h2 {
margin:0;
padding:21px 28px;
font-size:50px;
text-transform:uppercase;
font-weight:800;
color:#393939;
}

#banner h2 span {
font-weight:300;
}

#single-updates {
margin:0;
padding:28px;
background:#2f343a url('images/scale-bg.gif') repeat;
}

#updates {
margin:0;
padding:28px 28px 0;
background:transparent url('images/bg-\A \A bottom.png') bottom center no-repeat;
}

#updates-container {
background:#2f343a url ('images/scale-bg.gif') repeat;
}

#updates article,#single-updates article {
width:924px;
height:168px;
margin:0 0 28px;
background-color:#FFF;
-webkit-border-radius:0 3px 3px 0;
-moz-border-radius:0 3px 3px 0;
-o-border-radius:0 3px 3px 0;
border-radius:0 3px 3px 0;
-webkit-transition:background-color 0.3s ease-in-out;
-moz-transition:background-color 0.3s ease-in-out;
-o-transition:background-color 0.3s ease-in-out;
transition:background-color 0.3s ease-in-out;
}

#single-updates article {
-webkit-border-radius:3px;
-moz-border-radius:3px;
-o-border-radius:3px;
border-radius:3px;
height:auto;
padding:0;
margin:0 auto;
}

#single-updates article article.post_content {
height:auto;
padding:21px;
}

#updates article:hover {
background-color:#EDEDED;
}

#updates article figure {
width:294px;
height:100%;
background:#0a0a0a url('images/def-update.gif') no-repeat center center;
}

#updates article figure a {
width:294px;
height:100%;
display:block;
}

#updates article div {
width:630px;
height:100%;
position:relative;
}

#updates article div h2 {
margin:0;
padding:12px 21px;
background-color:#ededed;
-webkit-border-radius:0 3px 0 0;
-moz-border-radius:0 3px 0 0;
-o-border-radius:0 3px 0 0;
border-radius:0 3px 0 0;
-webkit-transition:background-color 0.3s ease-in- out;
-moz-transition:background-color 0.3s ease-in-out;
-o-transition:background- color 0.3s ease-in-out;
transition:background-color 0.3s ease-in-out;
}

#updates article div h2 a {
color:#5F7993;
-webkit-transition:color 0.3s ease-in-out;
-moz-transition:color 0.3s ease-in-out;
-o-transition:color 0.3s ease-in-out;
transition:color 0.3s ease-in-out;
}

#updates article:hover div h2 {
background-color:#C7CBCF;
}

#updates article div p {
margin:14px 21px;
font-size:13px;
}

#updates article div aside {
width:588px;
position:absolute;
bottom:0;
margin:0 21px;
padding:14px 0;
border-top:1px solid #ededed;
}

#single-updates article div aside {
width:882px;
bottom:0;
margin:0 21px;
padding:14px 0 12px;
border-bottom:1px solid #ededed;
}

#single-updates article div aside .left {
padding-top:5px;
}

#updates article:hover div aside {
border-top:1px solid #d8dbdf;
}

#updates article div aside a,#single-updates article div aside a {
float:left;
color:#969696;
padding-left:17px;
margin-right:21px;
font-size:13px;
line-height:1;
text-decoration:none;
background:transparent url('images/update-sprite.gif') no-repeat left top;
-webkit-transition:color 0.3s ease-in-out;
-moz-transition:color 0.3s ease-in-out;
-o-transition:color 0.3s ease-in-out;
transition:color 0.3s ease-in-out;
}

.calendar {
background-position:0 -1px !important;
}

.comment {
background-position:0 -14px !important;
}

#updates article div aside a:nth-child(3),#single-updates article div aside a:nth-child(3) {
background-position:0 -27px;
margin-right:0;
}

#updates article div aside a:nth-child(n+4),#single-updates article div aside a:nth-child(n+4) {
background:none;
padding-left:0;
margin-right:0;
}

#updates article div aside a:nth-child(n+4):before,#single-updates article div aside a:nth-child(n+4):before {
content:", ";
margin-right:7px;
}

#updates article div aside .post-edit-link,#single-updates article div aside .post-edit-link {
margin-left:21px;
background-position:0 -27px !important;
}

#updates aside,#media-updates aside {
margin:0 0 28px;
padding:0;
width:100%;
}

#updates aside div.navigation,#media-updates aside div.navigation {
margin:0;
padding:0;
font-size:21px;
font-weight:700;
display:block;
}

#updates aside div.navigation li *,#media-updates aside div.navigation li *,.btn,.button {
border:none;
padding:7px 14px;
color:#5F7993;
background-color:#EDEDED;
display:block !important;
float:left !important;
-webkit-transition:background-color 0.3s ease-in-out, color 0.3s ease-in-out;
-moz-transition:background-color 0.3s ease-in-out, color 0.3s ease-in- out;
-o-transition:background-color 0.3s ease-in-out, color 0.3s ease-in-out;
transition:background-color 0.3s ease-in-out, color 0.3s ease-in-out;
}

#updates aside div.navigation li .next,#updates aside div.navigation li .prev {
font-weight:300 !important;
}

#updates aside div.navigation li .prev {
-webkit-transform:rotate(-180deg);
-moz-transform:rotate(-180deg);
-ms-transform:rotate(-180deg);
-o-transform:rotate(-180deg);
filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);
}

.wp-paginate li {
float:left !important;
}

#single-updates article div aside ul {
margin:0;
width:265px;
}

ul.socialmedia li {
float:left;
display:inline;
height:23px;
width:80px;
}

ul.socialmedia li.t {
width:105px;
float:right;
}

ul.socialmedia li.g {
width:60px;
float:right;
}

#media-updates {
margin:0;
padding:28px 28px 0;
background:transparent url ('images/bg-bottom.png') bottom center no-repeat;
}

#media-updates .media-post {
width:294px;
margin:0 21px 28px 0;
}

#media-updates .media-post figure {
width:294px;
height:168px;
background:#EDEDED url('images/def-update.gif') no-repeat center center;
}

#media-updates .media-post figure h2 {
padding:12px;
margin:0;
}

#media-updates .media-post figure a {
width:294px;
height:168px;
display:block;
line-height:0;
color:#5F7993;
}

#media-updates .media-post figcaption {
width:294px;
background-color:#EDEDED;
}

#media-updates .media-post figcaption h3 {
margin:0;
padding:14px;
font-weight:700;
-webkit-transition:background-color 0.3s ease-in-out, color 0.3s ease-in-out;
-moz-transition:background-color 0.3s ease-in-out, color 0.3s ease-in-out;
-o-transition:background-color 0.3s ease-in-out, color 0.3s ease-in-out;
transition:background-color 0.3s ease-in-out, color 0.3s ease-in-out;
}

#media-updates .media-
post:hover figcaption h3 {
background-color:#C7CBCF;
color:#FFF;
}

#media-updates .media-post figcaption h3 a {
display:block;
color:#5F7993;
}

.jcarousel-prev,.jcarousel-next {
cursor:pointer;
height:53px;
width:53px;
top:210px;
position:absolute;
}

.banner-images {
height:112px;
}

.ads {
background:#fff;
margin:0;
padding:23px;
}

.ads li {
float:left;
list-style:none;
margin-right:11px;
width:304px;
}

.ads li:last-child {
margin-right:0;
}

.ads li a {
border:5px solid #fff;
-webkit-border-radius:5px;
-moz-border-radius:5px;
-o-border-radius:5px;
border-radius:5px;
display:block;
height:112px;
background-color:#393939;
}

footer {
background:#1b1b1b;
-webkit-border-radius:0 0 3px 3px;
-moz-border-radius:0 0 3px 3px;
-o-border-radius:0 0 3px 3px;
border-radius:0 0 3px 3px;
height:57px;
clear:both;
padding-top:0;
padding-right:30px;
padding-bottom:0;
padding-left:30px;
}

footer div {
width:920px;
float:left;
}

footer ul {
color:#707070;
float:left;
font-size:14px;
margin:0;
padding:20px 0 0;
list-style:none;
}

footer ul li:before {
content:"\00b7";
margin:0 5px;
}

footer ul li:first-child:before {
content:"";
margin:0;
}

footer ul li a {
color:#fff !important;
padding:0 3px;
text-decoration:none;
-moz-transition:all .3s ease-in-out;
-webkit-transition:all .3s ease-in-out;
-o-transition:all .3s ease-in-out;
transition:all .3s ease-in-out;
}

footer ul li a:hover {
color:#c7cbcf !important;
}

footer span {
color:#fff;
float:right;
font-size:14px;
padding:20px 0 0;
}

footer a.hs3 {
float:right;
margin-top:18px;
}

footer a img {
zoom:1px;
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
filter:alpha(opacity=40);
-moz-opacity:0.4px;
-khtml-opacity:0.4px;
opacity:0.4px;
-webkit-transition:all .3s ease-in-out;
-moz-transition:all .3s ease-in-out;
-o-transition:all .3s ease-in-out;
transition:all .3s ease-in-out;
}

footer a img:hover {
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
filter:alpha(opacity=100);
-moz-opacity:1px;
-khtml-opacity:1px;
opacity:1px;
}

.hentry {
padding:2.2em 20px 0;
}

.single-title,.page-title {
margin:0 0 0.375em;
}

.archive_title {
padding:0 20px;
margin:1.1em 0 0.75em;
}

.meta {
font-size:0.9em;
letter-spacing:0.05em;
line-height:1.75em;
color:#999;
margin:0.875em 0;
}

.post_content {
width:882px !important;
padding:14px;
}

.post_content p {
line-height:24px;
font-size:15px;
margin:0 auto 16px;
width:882px;
display:inline-block;
vertical-align:top;
zoom:1px;
}

.post_content h1 {
margin:0;
}

.post_content ul,.post_content ol,.post_content table,.post_content dl {
margin:1.5em 0;
}

.post_content ul,.post_content ol {
list-style-position:outside;
line-height:1.5;
margin-left:2.2em;
margin-right:2.2em;
}

.post_content li {
margin-bottom:0.75em;
}

.post_content ul li {
list-style-type:disc;
}

.post_content ol li {
list-style-type:decimal;
}

.post_content a {
color:#969696;
-moz-transition:all .3s ease-in-out;
-webkit-transition:all .3s ease-in-out;
-o-transition:all .3s ease-in-out;
transition:all .3s ease-in-out;
}

.post_content pre {
font-family:"proxima-nova-1", "proxima-nova-2";
font-size:13px;
text-align:center;
line-height:18px;
color:#969696;
background:#F5F5F5;
width:852px;
margin:7px 0 0;
padding:7px 14px;
border:1px solid #EDEDED;
-webkit-border-radius:4px;
-moz-border-radius:4px;
border-radius:4px;
display:inline-block;
vertical-align:top;
zoom:1px;
}

.post_content address,.post_content p.intro {
font-style:normal;
font-size:20px;
line-height:26px;
color:#999;
border-bottom:1px solid #EDEDED;
padding:0 0 21px;
margin-bottom:21px;
}

.post_content blockquote {
font-style:italic;
line-height:1.6em;
margin:1.5em 2.2em;
}

.post_content blockquote:before {
font-family:Georgia, serif;
content:"“";
font-size:2.75em;
text-indent:-0.8em;
margin-top:.1em;
float:left;
opacity:.3;
}

.post_content dl {
margin:1.75em 0;
}

.post_content dt {
margin-top:1.25em;
font-weight:700;
}

.post_content dd {
font-style:italic;
margin-top:0.5em;
line-height:1.6em;
}

.post_content img {
margin:0 0 1.5em;
max-width:100%;
}

.alignleft,img.alignleft {
margin-right:1.5em;
display:inline;
float:left;
}

.alignright,img.alignright {
margin-left:1.5em;
display:inline;
float:right;
}

.aligncenter,img.aligncenter {
margin-right:auto;
margin-left:auto;
display:block;
clear:both;
}

.post_content video {
margin:1.5em 0;
max-width:100%;
display:block;
}

.post_content object {
display:block;
margin:1.5em 0;
max-width:100%;
}

.post_content code {
font-size:0.9em;
line-height:1.7em;
background:#eee;
border:2px solid #cecece;
padding:1px;
}

.wp-caption {
margin-bottom:1.5em;
text-align:center;
padding-top:5px;
}

.wp-caption img {
border:0 none;
padding:0;
margin:0;
}

.wp-caption .wp-caption-text {
font-size:0.8em;
font-style:italic;
margin:.6em 0 -0.2em;
}

.hentry footer {
clear:both;
margin:1.5em 0 0;
padding-bottom:2.2em;
}

.gform_wrapper {
margin:0 !important;
float:left;
}

.gform_footer input.button,button,input[type="button"],input[type="reset"],input
[type="submit"] {
border:none;
outline-style:none;
padding:14px;
color:#5F7993;
background-color:#EDEDED;
font-weight:700;
font-family:"proxima-\A \A nova-1", "proxima-nova-2", Helvetica, sans-serif !important;
font-size:21px;
-moz-transition:all .3s ease-in-out;
-webkit-transition:all .3s ease-in-out;
-o-transition:all .3s ease-in-out;
transition:all .3s ease-in-out;
}

.gform_wrapper .ginput_complex .ginput_left label,.gform_wrapper .ginput_complex .ginput_right label {
text-transform:uppercase;
}

.gform_wrapper li,.gform_wrapper form li {
margin:0 0 14px;
}

.gform_wrapper form li input,.gform_wrapper form li textarea,#comment {
border:1px solid #DDD;
outline:none;
padding:7px;
background:#f5f5f5;
-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,.05);
-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.05);
-webkit-border-radius:4px;
-moz-border-radius:4px;
border-radius:4px;
-moz-transition:all .3s ease-in-out;
-webkit-transition:all .3s ease-in-out;
-o-transition:all .3s ease-in-out;
transition:all .3s ease-in-out;
font-family:"proxima-nova-1", "proxima-nova-2", Helvetica, sans-serif !important;
font-size:13px;
}

.gform_wrapper form li textarea {
width:516px !important;
max-width:516px;
}

.gform_wrapper form li input:focus,.gform_wrapper form li textarea:focus,#comment:focus {
border:1px solid #ccc;
background:#fff;
}

.gform_wrapper .gform_footer {
margin:0;
padding:0;
}

#gforms_confirmation_message {
margin-top:33px !important;
width:539px;
float:left;
}

#comment {
width:866px;
}

div#comments-form h2#comments-header {
margin-top:28px;
}

div#comments-form .commentsSmall {
font-size:13px;
}

#comments li {
padding:21px 21px 7px;
border:1px #ddd solid;
list-style:none;
background:#f5f5f5;
-webkit-border-radius:4px;
-moz-border-radius:4px;
border-radius:4px;
margin-top:14px;
margin-bottom:14px;
}

.commentText {
width:350px;
}

.dsq-kb24 ul,.dsq-kb24 ol {
list-style:none;
}

.omega,#disqus_thread,.dsq-trackback-url {
margin-bottom:0 !important;
}

.left,footer ul li,nav .nav-previous {
float:left;
}

.right,header hgroup #search #searchform,nav .nav-next {
float:right;
}

a:hover,a: focus,#updates article div aside a:hover,#single-updates article div aside a:hover,.post_content a:hover {
color:#5F7993;
}

::selection,::-moz-selection {
background:#e8b313;
color:#fff;
text-shadow:none;
}

header hgroup .top-social a.tw:hover,header hgroup .top-social a.fb:hover {
background-position:0 -20px;
}

#updates article div h2 a:hover,#updates article:hover div h2 a,#media-updates .media-
post:hover figcaption h3 a {
color:#FFF;
}

#updates aside div.navigation li a:hover,#updates aside div.navigation .current,#media-updates aside div.navigation li a:hover,#media-updates aside div.navigation .current,#updates aside div.navigation li .arrow:hover,.gform_footer input.button:hover,button:hover,input[type="button"]:hover,input[type="reset"]:hover,input[type="submit"]:hover {
color:#FFF;
background-color:#C7CBCF;
}

.post_content p:first-child,.comments-header {
margin-top:0;
}

.post_content p:last-child,.post_content h1:last-child,#commentform p.last-button,#comments-closed {
margin-bottom:0;
}

.gform_edit_link,#dsq-content #dsq-footer {
display:none !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:06:53.240

尝试用这个替换你的图像的css：

```
.aligncenter{
display: block;
margin: 5px auto;
}
.alignright{
float: right;
margin: 5px;
}
.alignleft{
float: left;
margin: 5px;
} 
```

这就是我在我的主题中使用的。您可以通过左/右对齐图像来使文本以不同的方式换行，或者有时最好使用 align none。

# java - 在android中使用Run方法的最佳方法是什么？

> ID：11377124
> 
> 赞同：0
> 
> 时间：2012-07-07T17:21:40.120
> 
> 标签：java, android, oop

我很困惑哪种方式使用 Run 方法

第一

```
new Thread(new Runnable() {
@Override
public void run() {
switch case //Here
}
}).start(); 
```

第二个

```
Switch(id){
case :
    new Thread(new Runnable() {
    @Override
    public void run() {

    }
    }).start();

break
} 
```

哪一个最适合在程序中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:27:41.373

这取决于你想要做什么。当您将某些内容发布到线程时，它将在将来的某个时间运行。

在您的第一种情况下，您的 switch case 语句在您的线程运行之前不会运行。

在第二种情况下，除非您的案例陈述为真，否则您的线程将不会运行。

它们只是不同的逻辑流程，我不确定哪一个可以被认为“更好”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:19:19.907

尝试这个...

**1**、Run是Runnable接口中唯一存在的方法，必须在实现Runnable的类中实现。

**2.**现在在您的代码中，您使用的是实现 Runnable 接口的匿名类。

**3.**在您的第一个示例中，您的线程必须运行才能使 switch 案例执行。

**4.**在您的第二个示例中，您的开关案例的特定案例必须执行才能让线程运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T17:28:58.903

我没有太大变化（如果每个案例都有一个 break 语句，至少）。

在每个解决方案中，只会在新线程中执行 switch 语句的一个 case。使用您认为最易读的内容。

在切换的每种情况下重复线程创建代码会添加更多样板代码。另一方面，如果您有一个必须什么都不做的默认情况，那么不值得创建和启动一个新线程来什么都不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T17:51:53.427

第二种情况是最好的，因为只有当你的情况条件为真时线程才会运行，并且它不会对你的应用程序内存产生很大影响。

android 应用程序中的线程过多会影响内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T19:40:47.107

**以上两者有什么区别？？**

**第一个问题：**线程运行，但是一个case下的编程逻辑可能会也可能不会根据case运行。

**第二个问题：** *如果 & 仅*当情况为真时，线程才会运行。

所以很明显，这两种情况是完全不同的。

**你会用哪一个？？**

这取决于您的要求，使用您需要的逻辑。它完全取决于你。

# maps - 我可以帮助实施 Viewpager 和 Google 地图吗

> ID：11377125
> 
> 赞同：0
> 
> 时间：2012-07-07T17:21:40.930
> 
> 标签：maps, android-viewpager

我的项目实施 viewpager 和谷歌地图，一般信息第一页和第二个视图显示谷歌地图。

你能帮我举个例子吗？因为这不是如何实施解决方案。

非常感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:58:06.947

这很难做到，因为您不能向后滑动，对吗？当你滑动时只有地图移动？

1.  要么使选项卡可单击，以便您可以单击返回，要么
2.  在用户可以拉动的地图旁边做一个小边缘，或者
3.  在底部有一个辅助操作栏，用户可以拉动以切换视图

# c++ - 指针所有权

> ID：11377126
> 
> 赞同：1
> 
> 时间：2012-07-07T17:22:02.193
> 
> 标签：c++, pointers

我有一个指针数组：`pArray[rows][columns]`，其中每个元素都可以包含一个指向对象的指针。有些对象是在`main()`堆上实例化的，有些对象本身也在堆上实例化：也就是说，我传递`pArray`给一个对象成员函数，该函数创建了一个新对象，并将指向它的指针放入`pArray`.

现在，当我想从中删除指向对象的指针时`pArray`，这里有所有权吗？意思是，如果一个对象创建了一个新对象并将指向它的指针放在 中`pArray`，那么只有创建者对象才能对该指针调用 delete 吗？或者我可以`main()`通过将数组传递给它们来从 , 和其他对象中做到这一点吗？

更多细节：

`pArray`该代码在网格 ( )上模拟捕食者猎物模型。所以我首先从一个文件中读取初始网格配置，然后实例化对象（捕食者和猎物），`pArray`从`main()`. 但是捕食者和猎物可以繁殖，所以对象会产生新的对象，并通过传递`pArray`给它们，实例化它们的子对象`pArray`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T17:37:33.233

对于原始指针，所有权纯粹是一个概念。只要您使用原始指针，您就可以将指向对象的所有权分配给任何人和任何事物。这是你的设计问题。没有这样的“规则”，即对象应该由创建它们的人删除。所有权可以保留或传递。所有权可以共享（如在引用计数所有权方案中）。同样，这取决于您的设计和意图。

各种智能指针类将帮助您表达您的意图并实现您的意图。使用原始指针，您必须记住谁拥有什么并手动执行所有操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T17:26:25.660

不，C++ 中的指针没有“所有权”，如果指针有效（包含对数据/对象的正确引用），您可以在任何发出`delete`命令的地方解除分配它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T17:29:27.390

C++ 中的指针没有所有权概念。据我了解您的问题，是的，在动态内存分配的情况下，您可以从 main() 中删除该对象。分配给该对象的内存只有在程序结束或对象数组超出范围并且调用该类的析构函数时才会被释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T17:28:53.707

对象的析构函数与其他所有方法一样受制于相同的公共/受保护/私有。因此，如果析构函数是公开的，那么任何人都可以在对象上调用 delete。

唯一重要的是它只发生一次，并且只有在没有人再使用该对象之后。

# android - 如何在不使用 key-up 事件的情况下从 Android 软键盘接收文本？

> ID：11377127
> 
> 赞同：3
> 
> 时间：2012-07-07T17:22:04.393
> 
> 标签：android, android-ndk, android-softkeyboard

我正在编写一个基于*hello-gl2*示例的 Android NDK 应用程序（针对 API 8），因此使用单个全屏 OpenGL2.0 视图。

我需要调出屏幕键盘，因此从本网站上可用的信息中，我现在可以调出键盘，将 keyup 事件发送到我的本机应用程序进行处理并关闭键盘。一切都很好，直到我切换到*Swype*或任何其他更先进的当时库存的键盘输入管理器并且它不起作用。

在阅读了[*KeyEvent*开发人员文档](http://developer.android.com/reference/android/view/KeyEvent.html%20*KeyEvent*%20developer%20doc)类概述后，我所看到的似乎是预期的行为：

> 您永远不应该依赖接收 KeyEvents 来获取软输入法上的任何键。

所以我一直在尝试找到一种方法来捕获 IME 的输出，然后我可以将其传递给我的本机应用程序。不幸的是，我对此一点也不了解。

我在扩展的*GLSurfaceView*类中有这段代码：

```
@Override
public InputConnection onCreateInputConnection(EditorInfo outAttrs)
{
    outAttrs.actionLabel = "";
    outAttrs.hintText = "";
    outAttrs.initialCapsMode = 0;
    outAttrs.initialSelEnd = outAttrs.initialSelStart = -1;
    outAttrs.label = "";
    outAttrs.imeOptions = EditorInfo.IME_ACTION_DONE | EditorInfo.IME_FLAG_NO_EXTRACT_UI;
    outAttrs.inputType = InputType.TYPE_NULL;

    return new BaseInputConnection(this, false);
}

@Override
public boolean onCheckIsTextEditor()
{
    return true;
} 
```

我打电话给：

```
public boolean showSoftInput(View view, int flags) 
```

传入从*getCurrentFocus*返回的视图，从本机代码显示键盘。

是否可以不使用 keyup 事件从屏幕软件键盘中提取文本？是否有可能更新我必须能够做到这一点，或者我应该寻找一种完全不同的方法？

如您所知，对这些问题表示歉意，Android 开发的非本地 Java 方面对我来说是全新的。

作为总结，我当前的实现基于这个[答案](https://stackoverflow.com/a/7425536/1184595%20this%20question)，它允许使用键事件捕获软键盘文本，但是我想不使用键事件来捕获文本..（可能是 TextWatcher .. 虽然我的视图不是t 可编辑？）。

非常感谢您提供的任何帮助或建议，

安迪

# button - ActionScript 3 按钮（如果是当前帧）

> ID：11377128
> 
> 赞同：1
> 
> 时间：2012-07-07T17:22:29.177
> 
> 标签：button, actionscript, if-statement, frame

我有一个简单的按钮，我想做一些转换。
如果当前帧为 1，我想播放第 2 帧。
如果当前帧为 2，我想播放第 3 帧。
如果当前帧为 3，我想播放第 1 帧。
为什么我的脚本在 ActionScript 3.0 中不起作用？谢谢。

```
buton1.addEventListener(MouseEvent.CLICK, buton1Click);

function buton1Click(event:MouseEvent):void{
    if(currentFrame == 1){
      gotoAndStop(2); 
    }
    if(currentFrame == 2){
      gotoAndStop(3); 
    }
    if(currentFrame == 3){
      gotoAndStop(1); 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T21:35:18.453

您的`if`块始终是正确的-您移动到下一帧，然后测试您是否在该帧上。

鉴于您的按钮跨越时间线，如下所示：

![时间线](../Images/4e841265669963012a341e6c55f57a0b.png)

您的代码将是：

```
stop();

button1.addEventListener(MouseEvent.CLICK, button1Click);

function button1Click(event:MouseEvent):void
{
    switch (currentFrame)
    {
        case 1:
            gotoAndStop(2);
            break;
        case 2:
            gotoAndStop(3);
            break;
        case 3:
            gotoAndStop(1);
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T23:43:11.050

```
stop();
stage.addEventListener(MouseEvent.CLICK, button1Click);

function button1Click(event:MouseEvent):void {
    this.gotoAndStop((this.currentFrame % this.totalFrames) + 1);
}

//this way you can change the timeline without changing code 
```

# php - Woocommerce：按类别过滤特色产品小部件

> ID：11377129
> 
> 赞同：1
> 
> 时间：2012-07-07T17:22:37.847
> 
> 标签：php, wordpress

嗨，我基本上是在尝试编辑特色产品小部件以按类别过滤结果。

通过 ID 或 Slug。

我认为这是提取特色产品的查询，但我找不到任何可以帮助我按类别过滤的文档。

```
<?php $query_args = array('posts_per_page' => $number, 'no_found_rows' => 1, 'post_status' => 'publish', 'post_type' => 'product' );

    $query_args['meta_query'] = array();

    $query_args['meta_query'][] = array(
        'key' => '_featured',
        'value' => 'yes'
    );
    $query_args['meta_query'][] = $woocommerce->query->stock_status_meta_query();
    $query_args['meta_query'][] = $woocommerce->query->visibility_meta_query();

    $r = new WP_Query($query_args);

    if ($r->have_posts()) : ?> 
```

任何帮助都会很棒，在此先感谢

# ios - 弹出到view2时如何恢复计时器

> ID：11377133
> 
> 赞同：0
> 
> 时间：2012-07-07T17:23:24.283
> 
> 标签：ios, xcode, nstimer

我的应用程序有 3 个视图

在 view1 中只有一个按钮（播放级别 1）推送到 veiw2 并更新 view2 中的标题标签

当 view2 加载并出现一个计时器开始倒计时并更新 view2 本身的另一个标签时，view2 也有暂停计时器并推送到 view3 的按钮

在 view3 中只有一个按钮弹回 view2 并恢复你的计时器

我的问题是，当我从 view3 弹出到 view2 时，计时器仍然暂停

请问有什么帮助吗？

谢谢和亲切的问候。

视图1.h

```
#import <UIKit/UIKit.h>

@interface view1 : UIViewController

-(IBAction)nextpage;

@end 
```

view1.m

```
#import "view1.h"
#import "view2.h"
@interface view1 ()

@end

@implementation view1

-(IBAction)nextpage{

    view2 *obj = [[view2 alloc] init];
    [self.navigationController pushViewController:obj animated:YES];
    [obj.leveltitle setText:@"Level"];
    obj.time=10;  

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [self.navigationController setNavigationBarHidden:YES];
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
     return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

视图2.h

```
#import <UIKit/UIKit.h>

@interface view2 : UIViewController

{
    int time;
    NSTimer *timer;
    BOOL paused;
}

@property (nonatomic, retain) NSTimer *timer;
@property (readwrite, nonatomic) int time;
@property (nonatomic) BOOL paused;

@property (readwrite, retain) IBOutlet UILabel *leveltitle;
@property (nonatomic, readwrite) IBOutlet UILabel *label;

-(IBAction)back;
-(IBAction)pause;

@end 
```

view2.m

```
#import "view2.h"
#import "view3.h"
@interface view2 ()

@end

@implementation view2

@synthesize leveltitle, label;
@synthesize time, timer;
@synthesize paused;

-(void)countDown2
{
    if (paused == NO && time>0) 
 {
        time = time -1 ;
     view3 *obj = [[view3 alloc] init];
     obj.sss = time;
    if (time == 0)
 {
            [timer invalidate];    

 }

        [label setText:[NSString stringWithFormat:@"%i",time]];
 }

}

-(IBAction)back{

    [self.navigationController popViewControllerAnimated:YES];

}

-(IBAction)pause{

     view3 *obj = [[view3 alloc] init];
    [self.navigationController pushViewController:obj animated:YES];
     paused = YES;   
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    paused = NO;
    timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self     selector:@selector(countDown2) userInfo:nil repeats:YES];

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

view3.h

```
#import <UIKit/UIKit.h>

@interface view3 : UIViewController

{

    int sss;
}

@property (nonatomic) int sss;
-(IBAction)back;

@end 
```

view3.m

```
#import "view3.h"
#import "view2.h"
@interface view3 ()

@end

@implementation view3
@synthesize sss;

-(IBAction)back{

    view2 *obj = [[view2 alloc] init];
    obj.paused=NO;
    obj.timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self     selector:@selector(cont) userInfo:nil repeats:YES];
     //[obj.timer fire];
    [self.navigationController popViewControllerAnimated:YES];

}

 -(void)cont{
     view2 *obj = [[view2 alloc] init];
     obj.time = sss;
     if (obj.paused == NO && time>0) 
     {
         obj.time = obj.time -1 ;

         if (obj.time == 0)
         {
             [obj.timer invalidate];    

         }

         [obj.label setText:[NSString stringWithFormat:@"%i",obj.time]];
     }

 }

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:42:35.110

这是因为在`view3`'s`back`方法中，您创建了`view2`name`obj`和 set的新瞬间`paused=NO`。但这`obj`与`view2`您弹回的那一刻不同。您需要做的是使用委托方法模式，这样`view3`就会有一个回调方法来`view2`设置.`paused``NO`

有关委托方法模式的示例，请查看此[SO](https://stackoverflow.com/questions/8606674/uimodaltransitionstylepartialcurl-doesnt-get-back-to-previous-state-not-dismi/8607949#8607949)中的示例。

编辑：示例回调代码：

对您的代码进行这些添加/更改：

在 view2.h 中：

```
#import "view3.h"

@interface view2 : UIViewController <view3Delegate> 
```

在 view2.m 中：

```
-(IBAction)pause{

    view3 *obj = [[view3 alloc] init];
    obj.delegate = self;  //adding this line
    [self.navigationController pushViewController:obj animated:YES];
    paused = YES;   
}

-(void)setPausedValue:(BOOL)value   //this is the new method callback from view3 to set paused value
{
    paused = value;
} 
```

在 view3.h 中：

```
#import <UIKit/UIKit.h>
@protocol view3Delegate <NSObject>
-(void) setPausedValue:(BOOL)value;
@end
@interface view3 : UIViewController
{
    int sss;
}
@property (assign) id <view3Delegate> delegate;
@property (nonatomic) int sss;
-(IBAction)back;
@end 
```

在 view3.m 中：

```
@implementation view3
@synthesize delegate;

-(IBAction)back{

//    view2 *obj = [[view2 alloc] init];  
//    obj.paused=NO;
    [self.delegate setPausedValue:NO];  //make callback and set value
    obj.timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self     selector:@selector(cont) userInfo:nil repeats:YES];
    //[obj.timer fire];
    [self.navigationController popViewControllerAnimated:YES];

} 
```

# sql - SQL CASE 语句返回错误

> ID：11377134
> 
> 赞同：0
> 
> 时间：2012-07-07T17:23:39.057
> 
> 标签：sql, case

您好我在 DB2 中有选择 CASE 语句：

```
case when actualfinish is not null then dec (( timestampdiff(
  4, 
  char(actualfinish - reportdate))/60.00),10,2)
else 'not'
 end 
```

它返回我错误。如果我删除 ELSE 部分没有错误并且计算完成。

```
 case when actualfinish is not null then dec (( timestampdiff(
      4, 
      char(actualfinish - reportdate))/60.00),10,2)
end 
```

如果我将 THEN 部分更改为类似

```
 case when actualfinish is not null then 'Yes'
    else 'not'
     end 
```

也没有错误。

但是对于我完整的 SQL 查询 - 找不到错误。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:31:56.530

这里的问题是该`dec`函数在您返回 VARCHAR 的 CASE 语句的 else 部分中返回十进制数据类型，因此出现了问题。

在你的第二个版本 `case when actualfinish is not null then 'Yes' else 'not' end`

`when`和都`else`返回相同的数据类型，因此查询运行良好。

更改您的 else 以发送十进制等效值，它应该可以正常执行。

更新：

如果您可以将十进制作为字符串返回，请使用此版本：

```
CASE 
    WHEN actualfinish IS NOT NULL THEN CHAR(DEC((TIMESTAMPDIFF(4, CHAR(actualfinish - reportdate))/60.00),10,2))
    ELSE 'not'
END 
```

# django - Django - 包含模板中的块标签不起作用 - 为什么？

> ID：11377135
> 
> 赞同：3
> 
> 时间：2012-07-07T17:23:43.003
> 
> 标签：django, include, block

这个问题有点类似于这个问题[，](https://stackoverflow.com/q/3796462/1209416)除了一个小变化 -

我在 parent.html 中有块标签，有些是在调用模板中填写的，有些是在包含的模板中。包含的不起作用。例如：

```
#parent.html
<head>{% block head %}Parent head {% endblock %} </head>
<body> {% block body %} Parent body {% endblock %} 
</body>

#include.html

{%block body %} Child body {% endblock %}

#child.html
{% extends 'parent.html' %}

{% block head %}
Child head 
{% endblock %}

{% include 'include.html' %} 
```

但这给出了输出：子头父体

所需的中间件：

儿童头部 儿童身体

任何解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:39:25.067

这个 ：

```
{% include 'include.html' %} 
```

不包含在任何块中，也不会被渲染，正如您在响应中看到的那样。

以这种方式修改您的 child.html：

```
#child.html
{% extends 'parent.html' %}

{% block head %}
Child head 
{% endblock %}

{% block body %}
    {% include 'include.html' %}
{% endblock %} 
```

如果你想在 child.html 和 include.html 中定义一些 html，那么你应该有：

```
#child.html
{% extends 'parent.html' %}

....

{% block body %}
    {% include 'include.html' %}
    some child html...
{% endblock %} 
```

并在 include.html 中：

```
{% block body %}
    {{ block.super }}
    some include html...
{% endblock %} 
```

这将呈现：

```
some child html
some include html 
```

# java - 程序地形生成

> ID：11377149
> 
> 赞同：0
> 
> 时间：2012-07-07T17:26:28.260
> 
> 标签：java, voxel

我正在尝试制作一个 3-d java lwjgl 游戏，它将数据存储在块中，并在玩家探索时一次生成一个块（无限）。地形如何在块之间混合以使其无缝？在研究了很长时间（几天，很多天）后，我感到很困惑。请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:30:46.463

尝试使用[基于框的地形生成器算法](http://en.wikipedia.org/wiki/Diamond-square_algorithm)。

要使框之间的过渡平滑，请在生成地形时使用小框。

应该有多少小盒子取决于您想要达到的平滑度。

较小的盒子会导致更平滑的地形。

# java - 使用paintComponent() 和继承在“层”中绘画

> ID：11377150
> 
> 赞同：1
> 
> 时间：2012-07-07T17:26:33.180
> 
> 标签：java, oop, inheritance, paintcomponent

我正在尝试创建两个组件，每个组件都有一个`paintComponent()`方法——目标是父对象将绘制默认艺术，然后子对象可以在它上面绘制。一个示例可能是创建扑克牌：您有一个`Card`绘制默认卡片的父类，然后是特定于套件的类，它们扩展`Card`并在其上绘制其细节。

这是我想要完成的图表： ![在此处输入图像描述](../Images/cde23f25a0802eb7d592278a773abe42.png)

这是我正在使用的代码。我的具体问题是：绘制组件时——如果子类没有`paintComponent`方法——绘制父级艺术。但是，如果我`paintComponent`在孩子上实现一个方法，则不会绘制父母，而只会绘制孩子。

这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;

abstract public class Tile extends JPanel {

    public static final int DEFAULT_WIDTH = 100;
    public static final int DEFAULT_HEIGHT = 100;

    @Override public void paintComponent(Graphics g){

        //Set Size
        setSize(DEFAULT_WIDTH,DEFAULT_HEIGHT);

        Graphics2D g2 = (Graphics2D)g;

        //Draw default art

    }
    @Override public Dimension getMinimumSize()
    { return new Dimension(DEFAULT_WIDTH,DEFAULT_HEIGHT); }

    @Override public Dimension getPreferredSize()
    { return getMinimumSize(); }

    //.....

} 
```

* * *

```
import javax.swing.*;
import java.awt.*;

public class CharacterTile extends Tile {

    protected char symbol;

    public CharacterTile(char symbol){
        this.symbol = symbol;
    }
    @Override public void paintComponent(Graphics g){
        super.paintComponents(g);
        Graphics2D g2 = (Graphics2D)g;
        //Draw details
    }

    //.....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:58:06.640

这不是很好地使用继承。你应该有类似的东西：

```
Card
{
    Art front;
    Art back;
    paintComponent()
    {
        back.paintComponent();
        front.paintComponent();
    }
} 
```

你甚至可以有一个列表层；并绘制您需要的所有图层。

子类化是为了将你的代码拆分成更小的问题。对于重用代码，您应该使用多态性 + 对象组合。

# user-interface - 为给定的背景颜色自动选择合适的灰色

> ID：11377151
> 
> 赞同：0
> 
> 时间：2012-07-07T17:26:35.843
> 
> 标签：user-interface, text, colors, background, foreground

我有一个表格，其中的单元格可能包含正常和变灰的文本。普通文本的颜色是根据[这篇文章](https://stackoverflow.com/questions/946544/good-text-foreground-color-for-a-given-background-color)动态选择的，以考虑到表格的背景颜色取决于主题。现在我想知道是否有任何好方法可以根据表格的背景确定合适的“灰色”颜色，以便：

*   当背景颜色为白色或黑色时，“灰色”是“真正的”灰色
*   所有可能的背景颜色都可以读取变灰的文本
*   如果可能，灰显的文本应该与普通文本区分开来，并且理想情况下看起来“更苍白”，就像灰色比黑色更苍白一样

注意：其他样式（例如删除线）在我的情况下不合适，因为灰色用于传达表格单元格比其他样式“不那么重要”的想法，而不是过时/不可用/等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:42:28.993

好吧，您的链接问题仅选择两种文本颜色中的一种：它将是黑色或白色。

您是否尝试在文本颜色为黑色时仅使用“深灰色”，而在文本颜色为白色时使用浅灰色？

# ruby-on-rails-3 - Ruby on Rails 如何从表单中获取单个参数？

> ID：11377153
> 
> 赞同：0
> 
> 时间：2012-07-07T17:26:44.593
> 
> 标签：ruby-on-rails-3, model-view-controller, controller

我有一个forms_for @conversation，当它被提交时，我可以通过params [：conversation]从控制器中的表单中获取所有字段。

假设我有一个名为 :message 的表单字段。我将如何在控制器中获取该字段？我试过： params[:conversation][:message] 但返回 nil。

# jquery - jquery - 如何将数组添加到表单提交？

> ID：11377155
> 
> 赞同：5
> 
> 时间：2012-07-07T17:26:54.890
> 
> 标签：jquery, ruby-on-rails

我正在尝试将一个数组添加到我的表单提交操作中。请注意，我不想使用 ajax.. 只是在添加此“uids”参数后进行常规提交。

```
$("#new_meeting").live("submit", function(){
  var uids = [];
  $("span.receiver-name").each(function(){
    var uid_name = $(this).attr("id");
    var uid = uid_name.split("--")[0];
    uids.push(uid);
  })
  $("#new_meeting").append("&uids=" + uids);
}); 
```

这不起作用，因为在服务器端我没有看到 uids 参数。还有另一件事我尝试查看 stackoverflow 上的其他帖子，但也无法使其正常工作..这就是..

```
 var input = $("<input>").attr("type", "hidden").attr("uids", "mydata").val(uids);
  $('#new_meeting').append($(input)); 
```

有人做过吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T18:08:57.250

我会在标记之前试一试，

改变这个

```
$("#new_meeting").append("&uids=" + uids); 
```

到

```
 var input = $("<input>").attr({"type":"hidden","name":"uids"}).val(uids);
 $('#new_meeting').append(input); 
```

# php - 我对这个 php 脚本做错了什么？

> ID：11377169
> 
> 赞同：-4
> 
> 时间：2012-07-07T17:28:02.430
> 
> 标签：php

对于我的一生，我无法弄清楚这个脚本哪里出了问题。它只是显示一个空白屏幕。我已经将它安装在 joomla 1.5 站点上，并在 Jumi 组件中使用此代码。是代码还是 Jumi/Joomla？任何帮助将不胜感激！谢谢。

```
 <html>
    <head>

    <?php

    // RETURN LIST OF DATA ROWS
    function getItems($query) {

        // Initialize variables
                $result = null;

        // Get a reference to the database
                $db = &JFactory::getDBO();
        // Get Current User
                $user = &JFactory::getUser();
            $user_email = $user->email;

        // Set the Query 
    $query ="SELECT *  FROM my_table WHERE owneremail = '$user_email'";

        $num=mysql_numrows($result);

    mysql_close();
    ?>

    </head>

    <body>
    // REPLACE TEMPLATE FIELDS WITH ACTUAL VALUES

    <?php
      $i=0;
      while ($i < $num){

            $f1=mysql_result($result,"firstname");   
            $f2=mysql_result($result,"lastname");
            $f3=mysql_result($result,"street_num");
            $f4=mysql_result($result,"street");
            $f5=mysql_result($result,"apt");
            $f6=mysql_result($result,"city");
            $f7=mysql_result($result,"postcode");
    }

    ?>

<div>
<div style="text-align: center; font-weight: bold; font-size: 14px; font-family: Arial, Helvetica, sans-serif;"><p><strong>Customer Welcome Letter</strong></p>
</div>
'<div style="line-height:15px;"><p><strong>Hello  <?php echo $f1; ?> <?php echo $f2; ?></strong> <br>
<br>
<strong>Here are your details: <span style="border: 1px dashed #CFF; padding-left: 6px; padding-bottom: 3px; padding-right: 3px; padding-top: 3px; background-color: #FFC;"><?php echo $f3; ?> <?php echo $f4; ?> <?php echo $f5; ?> <?php echo $f6; ?>, CO <?php echo $f7; ?></span></strong>(AKA..“&lt;strong>User</strong>”).  </p>

</div>

    <?php
    $i++;
    }
    ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:31:55.110

在函数中`getItems`，您永远不会真正执行 sql 语句`$query`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:29:47.630

这只是一个标准的 PHP 代码，它发送电子邮件，显然是发送给数据库中的用户。它与 Joomla 或任何框架无关，因为此脚本仅使用非常标准的基本元素。

# mysql - 我的 sql 获取数组和 json

> ID：11377170
> 
> 赞同：2
> 
> 时间：2012-07-07T17:28:07.213
> 
> 标签：mysql, mysql-error-1064

我有一个功能；如果函数正在运行 `url = "ambildata.php?akhir=0";`，则执行然后执行

```
$query = "SELECT id_hijau, judul, deskripsi, jenis, x, y FROM hijau ORDER BY id_hijau DESC LIMIT 1"; 
```

之后

```
$data = mysql_query($query);

$json = '{"wilayah": {';
$json .= '"petak":[ ';
while($x = mysql_fetch_array($data)){
    $json .= '{';
    $json .= '"id":"'.$x["id_hijau"].'",
        "judul":"'.htmlspecialchars($x["judul"]).'",
        "deskripsi":"'.htmlspecialchars($x["deskripsi"]).'",
        "x":"'.$x["x"].'",
        "y":"'.$x["y"].'",
        "jenis":"'.$x["jenis"].'"

    },';
}
$json = substr($json,0,strlen($json)-1);
$json .= ']';

$json .= '}}';

echo $json; 
```

但我有一个错误

警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在 C:\xampp\htdocs\ta\web\ambildata.php 第 13 行 {"wilayah": {"petak":[]}}

请帮我解决我的问题...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:33:30.690

查询产生了错误而不是结果。如[mysql_query 的文档](http://www.php.net/manual/en/function.mysql-query.php)中所述，如果出现错误，它将返回 BOOL false。使用[mysql_error](http://php.net/manual/en/function.mysql-error.php)查看发生了什么。

***编辑***：您的错误意味着您将 FALSE 的任何一个 TRUE 传递给 mysql_fetch_array，这表明您`$data`是 FALSE 的 TRUE，并且因为`$data = mysql_query($query);`，这意味着 mysql_query 返回 TRUE 或 FALSE，并且它唯一的时间是当执行查询时出错；它返回假。这意味着*真正的*问题不在于 mysql_fetch_array，而在于您的查询或数据库级别的其他地方。

# awk - 在多个字段中将科学记数法转换为十进制

> ID：11377172
> 
> 赞同：2
> 
> 时间：2012-07-07T17:28:13.877
> 
> 标签：awk

以下对我在第 12 列中的数据非常有效，但我有超过 70 列并不完全相同，我需要输出所有列，转换后的列替换科学值。

```
 awk -F',' '{printf "%.41f\n", $12}' $file 
```

谢谢

这是一条线。。

```
2012-07-01T21:59:50,2012-07-01T21:59:00,1817,22901,264,283,549,1,2012-06-24T13:20:00,2.600000000000000e+001,4.152327506554059e+001,-7.893523806678388e+001,5.447572631835938e+002,2.093000000000000e+003,5.295000000000000e+003,1,194733,1.647400093078613e+001,31047680,1152540,29895140,4738,1.586914062500000e+000,-1.150000000000000e+002,0.000000000000000e+000,0.000000000000000e+000,0.000000000000000e+000,0.000000000000000e+000,0.000000000000000e+000,0.000000000000000e+000,0.000000000000000e+000,3.606000000000000e+003,0.000000000000000e+000,0.000000000000000e+000,0.000000000000000e+000,4.557073364257813e+002,0.000000000000000e+000,0.000000000000000e+000,0.000000000000000e+000,11,0.000000000000000e+000,2.000000000000000e+000,0,0,0,0,4.466836981009692e-004,0.000000000000000e+000,0.000000000000000e+000,0.000000000000000e+000,8,0,840,1,600,1,6,1,1,1,5,2,2,2,1,1,1,1,4854347,0,- 
```

更新

这适用于未转换的输出。由于某种原因，我在插入 else if 语句时遇到了一些麻烦。一切似乎都在文件或 cli 上给我一个语法错误。

```
awk -F',' '{for (i=1;i<=NF;i++) {if (i <= 9||i == 16||i == 17||i == 19||i == 20||i == 21||i == 22|| i == 40|| i == 43||i == 44||i == 45||i == 46||i >= 51) printf ($i",")};}' $file 
```

我想在上面的代码中插入以下语句？？

```
else if (i == 10) printf ("%.41f", $i) 
```

解决了

搞定了 感谢所有伟大的想法。我似乎无法让它在带有 awk -f 的文件中工作，但在命令行上它工作得很好。我在我的程序中加入了这一行。

```
awk -F',' '{for (i=1;i<=NF;i++) {if (i <= 9||i == 16||i == 17||i >= 19&&i <= 22|| i == 40|| i >= 43&&i <= 46||i >= 51&&i <= 70) printf($i","); else if (i == 10||i == 18) printf("%.2f,", $i); else if (i == 11||i == 12) printf("%.41f,", $i); else if (i == 13) printf("%.1f,", $i); else if (i == 14||i == 15||i >= 24&&i <= 46) printf ("%d,", $i); else if (i == 23) printf("%.4f,", $i); else if (i >= 47&&i <= 50) printf("%.6f,", $i); if (i == 71) printf ($i"\n")};}' 
```

结果

```
2012-07-01T21:59:50,2012-07-01T21:59:00,1817,22901,264,283,549,1,2012-06-24T13:20:00,26.00,41.52327506554058800247730687260627746582031,-78.93523806678388154978165403008460998535156,544.8,2093,5295,1,194733,16.47,31047680,1152540,29895140,4738,1.5869,-115,0,0,0,0,0,0,0,3606,0,0,0,455,0,0,0,11,0,2,0,0,0,0,0.000447,0.000000,0.000000,0.000000,8,0,840,1,600,1,6,1,1,1,5,2,2,2,1,1,1,1,4854347,0,- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:28:55.473

您可以在循环中进行正则表达式匹配以选择每个字段的格式，因为数字也是 AWK 中的字符串：

```
#!/usr/bin/awk -f
BEGIN {
    d = "[[:digit:]]"
    OFS = FS = ","
}
{
    delim = ""
    for (i = 1; i <= NF; i++) {
        if ($i ~ d "e+" d d d "$") {
            printf "%s%.41f", delim, $i
        }
        else {
            printf "%s%s", delim, $i
        }
        delim = OFS
    }
    printf "\n"
} 
```

**编辑：**

我已经更改了上面的版本，因此您可以看到它在文件中作为 AWK 脚本的使用方式。保存它（我将它称为“scinote”）并将其设置为可执行文件`chmod u+x scinote`，然后您可以像这样运行它：`./scinote inputfile`

我还修改了您添加到问题中的最新版本，使其更简单一些，因此可以像上面那样进入脚本文件。

```
#!/usr/bin/awk -f
BEGIN {
    plainlist = "16 17 19 20 21 22 40 43 44 45 46"
    split(plainlist, arr)
    for (i in arr) {
        plainfmt[arr[i]] = "%s"
    }
    OFS = FS = ","
}
{
    delim = ""
    for (i = 1; i <= NF; i++) {
        printf "%s", delim
        if (i <= 9 || i in plainfmt || i >= 51) {
            printf plainfmt[i], $i
        }
        else if (i == 10) {
            printf "%.41f", $i
        }
        else if (i == 12) {
            printf "%.12f", $i
        }
        delim = OFS
    }
    printf "\n"
} 
```

如果您有更多具有其他格式的字段（而不仅仅是一个），您可以执行类似于`plainfmt`数组的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:33:56.077

您始终可以遍历所有数据字段并在`printf`. 对于仅用于测试机制的简单文件，您可以尝试以下操作：

```
 awk '{for (i=1; i<=NF; i++) printf("%d = %s\n", i, $i);}' data.txt 
```

请注意，`-F`此处未设置，因此字段将按空白分割。

`NF`是一行中字段数量的预定义变量，字段从 1 开始（例如，`$1`、`$2`等，直到`$NF`）。`$0`是整条线。

因此，对于您的示例，这可能有效：

```
 awk -F',' '{for (i=1; i<=NF; i++) printf "%.41f\n", $i}' $file 
```

***根据下面的评论更新***（不是系统测试语法）：

如果您有某些需要区别对待的字段，您可能不得不求助于[switch](http://www.gnu.org/software/gawk/manual/html_node/Switch-Statement.html)语句或[if 语句](http://www.gnu.org/software/gawk/manual/html_node/If-Statement.html#If-Statement)来区别对待不同的字段。如果您将脚本存储在文件中，这会更容易，让我们调用它`so.awk`并像这样调用它：

```
 awk -f so.awk $file 
```

您的脚本可能包含以下内容：

```
BEGIN{ FS=',' }
{ for (i=1; i<=NF; i++)
    {
      if (i == 20 || i == 22|| i == 30)
        printf( " .. ", $i)
      else if ( i == 13 || i == 24)
        printf( " ....", $i)
      etc.
    }
} 
```

如果可能，您当然也可以使用`if (i > 2) ...`或其他范围来避免列出每个字段。

作为这一系列 if 语句的替代方案，请参见上面提到的 switch 语句。

# sql - 连接三个没有匹配列的表

> ID：11377173
> 
> 赞同：0
> 
> 时间：2012-07-07T17:28:14.920
> 
> 标签：sql, join, ssis, dimension

我想使用 ssis 2008 创建一个地理维度。我有 3 个表源。

这是解释

```
Table 1 = Country: country code and country name 
Table 2 = Post code: post code and city name
Table 3 = Territory : Territory code and Territory name 
```

这是数据的外观

```
[Table 1= Country]

      code name  
     ------------------
       US | United states 
       CA | Canada 

[Table 2= post code] 

      Code    city  
     ---------------
       1000  |  Paris
       2000  |  Niece

[Table 3= Territory]

       Code    name
      ----------------
       N    |   North
       S    |   south 
```

如您所见，没有单个公共列，我想将这 3 个表分组在同一个地理维度中。

那么，我该怎么做呢？

另外，这个地理暗淡的使用将在另一个维度例如客户维度时使用。我们想根据客户的地理位置或某个城市的顶级销售人员来了解客户的收入。

在客户和销售人员表中，您都可以找到这 3 个作为外键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:36:25.830

您*不需要*所有三个表共享的“公共列”。

您*确实需要每**对*表之间的“列” 。你还要怎么链接它们？？？

问：有没有把“国家”和“城市”联系起来的栏目？您应该在“城市”中有一个“国家代码”列。

问：有没有办法将“领土”与“邮政编码”或“国家”*联系起来？*如果“是”：问题已解决。请列出字段。如果“否”......那么您需要更改您的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:47:57.813

根据您对 paulsm4 的评论，您然后希望使用包含链接信息的那些表来加入上述 3 个表中的每一个。

另一方面，如果您真的只想加入这三个表

select * from Country full external join [Post code] on 'a' = 'a' full external join Territory on 'b' = 'b'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:01:27.250

```
create table dim.geography (geoID int,citycode int, countrycode char(2),territorycode char(1))

insert into dim.geography (select city as citycode,country as countrycode, territory as territorycode from Customer union select city, country,territory from salesperson) 
```

在这里假设 Customer 和 salesperson 表包含代码而不是国家、地区和国家/地区的值。

上面的代码将为您想要的地理位置构建一个维度。当然，如果您将任何额外的唯一城市、国家/地区代码添加到客户/销售人员表中，您需要将其添加到您的维度中。这只是一个初始负载。您可能还需要修改代码以考虑三个限定符中的任何一个中的空值。

# jquery - 如何在 Nivo Slider 中获取要加载的下一个图像的 src

> ID：11377174
> 
> 赞同：1
> 
> 时间：2012-07-07T17:28:23.613
> 
> 标签：jquery, nivo-slider

我希望能够获得下一张要加载的图像的 src。所以我在想类似的东西

```
 $('#nivo_slider').nivoSlider({

      beforeChange: function(){

           //get src of next image
    }
}; 
```

我可以通过执行以下操作来获取当前图像源：

```
var currentImageSrc=$('#nivo_slider').data("nivo:vars").currentImage.attr('src');       
var index=currentImageSrc.lastIndexOf("/")+1;        
var imageName= currentImageSrc.substr(index); 
```

但我不确定如何加载下一个

我的HTML如下：

```
<div id="nivo_slider>
   <img src="img1" />
   <img src="img2" />
   <img src="img3" />
   <img src="img4" />

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T11:31:27.777

好吧，这是一种方法（而且，尽管花了一些时间尝试，但似乎并不是一种明显更容易的方法）：

```
/* Nivo seems to add images in order to implement its effects,
   so we need to grab a reference to the original images, or, at least, their `src` */

var images = $('#slider img').map(
    function() {
        return $(this).attr('src');
    });

$('#slider').nivoSlider({
    beforeChange: function() {
        var wrap = $('#slider'),
            // caching data because I'm accessing it twice:
            data = wrap.data('nivo:vars'),
            // the current src:
            current = data.currentImage.attr('src'),
            len = data.totalSlides,
            /* compares the current src against the srcs stored in the
               images variable, and returns the index at which it was
               found */
            arrayPos = $.inArray(current, images),
            nextSrc;

        if (arrayPos == (len - 1)) {
            /* if the array position of the src is equal to length-1
               (zero-based arrays in JS), then the next image to be
               shown will be the first in the array */
            nextSrc = images[0];
        }
        else {
            // otherwise get the next src from the next position in the array
            nextSrc = images[arrayPos + 1];
        }

        $('#output code.src').text(nextSrc);
    }
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Y6HhY/1/)。

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`$.inArray()`](http://api.jquery.com/jQuery.inArray/).
*   [`map()`](http://api.jquery.com/map/).

# jquery - 访问资源时 jQuery Ajax 失败 (Django Tastypie)

> ID：11377178
> 
> 赞同：1
> 
> 时间：2012-07-07T17:29:17.573
> 
> 标签：jquery, ajax, django, rest, tastypie

我创建了一个简单的资源，通过 GET 输出我的 json 对象。该 URL 可以`http://127.0.0.1:8000/api/v1/advert/?format=json`正常工作。现在，当我尝试使用 jQuery ajax 方法访问资源时，我得到了；

![在此处输入图像描述](../Images/50df59b9b52f1c3e7032a026304867bb.png)

![在此处输入图像描述](../Images/b7e6bcb9086adf81ba60cbc556371299.png)

这是我的 JavaScript；

```
$.ajax({
        url : 'http://127.0.0.1:8000/api/v1/advert/',
        dataType : 'json',
        type : 'GET',
        data : { format: 'json' },
        success : function(data) {
            console.log(data);
        }
    }); 
```

是什么导致了这种情况，更重要的是我该如何纠正它？当我尝试用一​​个简单的资源实现 Django Piston 时，也会发生同样的错误，所以我猜这个问题更多地与实际的 AJAX 请求有关？

编辑。

我稍微调整了 jQuery ajax 调用并包含了请求内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T19:48:06.640

经过多次挠头并尝试使用 curl 模拟错误后，我终于找到了问题的根源。我正在使用带有扩展 Adblock Plus (Adblock Plus (Beta) 1.2) 的 Google Chrome 浏览器。禁用此扩展后，ajax 请求工作正常！我不确定 ABP 究竟是如何影响它的，但它绝对是问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:44:17.050

我尝试了您的 ajax 代码，用于我自己的一个我知道正在工作的美味 API。

对于 jQuery ajax 命令最初发送的 OPTIONS 请求，我还得到一个“红色”结果行。如果我查看该请求的响应，我发现它实际上是 OK 200。

似乎 ajax 调用发出了 OPTIONS 请求，获得了 200 响应状态，然后取消了传输，因为它已经在“允许”响应标头中包含了所需的一切。

在您的情况下，它看起来实际上由于某种原因而失败（或者浏览器可能只是以不同的方式描述它？）。

你可以添加你得到的响应头吗？

（我会分享我的屏幕截图，但我仍在完善我的代表：-/）

# ms-access - Access 2010 Web 数据库 OpenForm 操作

> ID：11377181
> 
> 赞同：0
> 
> 时间：2012-07-07T17:29:28.263
> 
> 标签：ms-access, ms-access-2010

我正在使用 Access 2010 设计一个 Web 数据库

我放了一个使用 openform 动作的宏

此操作的窗口模式是“对话”。在下拉列表中，这是可用于此设置的唯一选项。

当表单打开时，我可以看到它非常小并且它的大小是固定的。

我想设置表单的初始大小，或者至少使其可调整大小，以便用户可以在新打开的表单中正确输入数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:44:25.967

我有同样的问题，但发现这个： http: [//books.google.co.uk/books ?id=G78tE7JjgDcC&pg=PA775&lpg=PA775&dq=access+2010+macro+set+window%2Bmode&source=bl&ots=bvmf2qN0fL&sig=gcAysal_0g1jJ3gOJP2c5WGVbKE&hl= en&sa=X&ei=yMkeUI-KJaWG0AXNu4GoAw&ved=0CE0Q6AEwADgK#v=onepage&q=access%202010%20macro%20set%20window%2Bmode&f=false](http://books.google.co.uk/books?id=G78tE7JjgDcC&pg=PA775&lpg=PA775&dq=access+2010+macro+set+window%2Bmode&source=bl&ots=bvmf2qN0fL&sig=gcAysal_0g1jJ3gOJP2c5WGVbKE&hl=en&sa=X&ei=yMkeUI-KJaWG0AXNu4GoAw&ved=0CE0Q6AEwADgK#v=onepage&q=access%202010%20macro%20set%20window%2Bmode&f=false) （第 775 页底部）

显示 Access 2010 宏是基于 Web 的，并且仅在对话模式下打开表单，而不是在访问中的选项卡模式。这并没有显示任何其他解决问题的方法！但我还在寻找。

# ios - iOS 多任务处理不工作

> ID：11377186
> 
> 赞同：1
> 
> 时间：2012-07-07T17:29:47.403
> 
> 标签：ios, ios5, multitasking, background-process

```
- (IBAction)buttonPressed:(id)sender
{
UIDevice *device = [UIDevice currentDevice];
device.batteryMonitoringEnabled = YES;
if ([[UIDevice currentDevice] isMultitaskingSupported]) {
    [self beingBackgroundUpdateTask];
}
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryLevelDidChangeNotification" object:device];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryStateDidChangeNotification" object:device];
[self currentBatteryState];

}

- (void) beingBackgroundUpdateTask
{
    self->backgroundUpdateTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        [self endBackgroundUpdateTask];
    }];
}

- (void) endBackgroundUpdateTask
{
    [[UIApplication sharedApplication] endBackgroundTask: self->backgroundUpdateTask];
    self->backgroundUpdateTask = UIBackgroundTaskInvalid;
} 
```

出于某种原因，未观察到通知。难道我做错了什么？我想在拔掉电源时观察 10 分钟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:45:36.083

您不应该调用`endBackgroundUpdateTask`您的`buttonPressed:`方法，因为这会取消您的后台任务。尝试删除此代码：

```
if ([[UIDevice currentDevice] isMultitaskingSupported]) {
    [self endBackgroundUpdateTask];
} 
```

此外，您应该将`UIDeviceBatteryLevelDidChangeNotification`常量传递给“name”参数，而不是字符串。它应该看起来像这样（注意缺少双引号）：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:UIDeviceBatteryLevelDidChangeNotification object:device]; 
```

（也有可能 UIDevice 根本不会在后台发送这些通知。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:35:27.833

您是否已将适用的后台代码添加到您的 AppDelegate？以下是iOS 编程指南中的背景[说明](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)

# javascript - 如何在注入代码中使用 GM_xmlhttpRequest？

> ID：11377191
> 
> 赞同：9
> 
> 时间：2012-07-07T17:30:15.507
> 
> 标签：javascript, google-chrome-extension, greasemonkey, userscripts

我正在编写一个注入网页的用户脚本。该脚本从 Web 服务器读取一些数据，我想将消息发送到侦听应用程序以对数据做出反应。

现在，我正在做的只是尝试向我的监听应用程序发送一个字符串命令，看看我是否可以阅读它。我的代码在注入之前工作，但之后我得到一个“未定义的引用错误”。

我怀疑这与[“Greasemonkey access violation”](http://wiki.greasespot.net/0.7.20080121.0_compatibility)有关。但是，我一直无法找到有效的解决方案。我正在使用 Chrome 进行开发。

这是我无法工作的代码部分。

```
GM_xmlhttpRequest({
   method: "POST", 
   url: "http://localhost:7777", 
   data: "testing123",
   headers:  {
         "Content-Type": "application/x-www-form-urlencoded"
             },
   onload: function(response) 
   {
      if (response.responseText.indexOf("TEST") > -1) 
      {
         console.log("Response confirmed..."); 
      }
   }
}); 
```

我对脚本很陌生，所以也许我遗漏了一些明显的东西。如何让它在注入的代码中工作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-07T22:37:41.807

`GM_`函数在注入代码中不起作用，因为注入代码在目标页面的范围内运行。如果他们*确实*在那里工作，那么不道德的网站也可以使用这些`GM_`功能 - 做无法形容的邪恶。

最可取的解决方案是：

1.  不要注入代码。很多时候，它真的没有必要，而且它总是使事情复杂化。仅在您绝对肯定需要使用目标页面加载的某些 javascript 时才注入代码。

    对于像 jQuery 这样的库，使用`@require`指令 (Firefox) 或粘贴库代码或使用[自定义***manifest.json***文件](https://stackoverflow.com/a/5259212/331508)包含它 (Chrome) 将获得更好的性能。

    通过不注入代码，您：

    1.  保持轻松使用`GM_`功能的能力
    2.  避免或减少对外部服务器交付库的依赖。
    3.  避免潜在的副作用和对页面 JS 的依赖。（您甚至可以使用*NoScript*之类的东西来完全禁用页面的 JS，而您的脚本仍在运行。）
    4.  防止恶意网站利用您的脚本来访问这些`GM_`功能。

2.  使用[Tampermonkey 扩展程序](https://chrome.google.com/extensions/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo)(Chrome)。这允许您通过提供更好的 Greasemonkey 仿真来避免脚本注入。您可以使用该`@require`指令和`unsafeWindow`比 Chrome 原生提供的更强大/更危险的版本。

3.  将您的用户脚本代码拆分为注入部分（不能使用`GM_`函数）和非注入部分。使用[消息传递](http://code.google.com/chrome/extensions/content_scripts.html#host-page-communication)、轮询和/或特定 DOM 节点在作用域之间进行通信。

* * *

* * *

如果你真的必须使用注入代码，这里有一个示例脚本，展示了如何做到这一点：

```
// ==UserScript==
// @name        _Fire GM_ function from injected code
// @include     https://stackoverflow.com/*
// @grant       GM_xmlhttpRequest
// ==/UserScript==
/* Warning:  Using @match versus @include can kill the Cross-domain ability of
    GM_xmlhttpRequest!  Bug?
*/

function InjectDemoCode ($) {
    $("body").prepend ('<button id="gmCommDemo">Open the console and then click me.</button>');

    $("#gmCommDemo").click ( function () {
        //--- This next value could be from the page's or the injected-code's JS.
        var fetchURL    = "http://www.google.com/";

        //--- Tag the message, in case there's more than one type flying about...
        var messageTxt  = JSON.stringify (["fetchURL", fetchURL])

        window.postMessage (messageTxt, "*");
        console.log ("Posting message");
    } );
}

withPages_jQuery (InjectDemoCode);

//--- This code listens for the right kind of message and calls GM_xmlhttpRequest.
window.addEventListener ("message", receiveMessage, false);

function receiveMessage (event) {
    var messageJSON;
    try {
        messageJSON     = JSON.parse (event.data);
    }
    catch (zError) {
        // Do nothing
    }
    console.log ("messageJSON:", messageJSON);

    if ( ! messageJSON) return; //-- Message is not for us.

    if (messageJSON[0] == "fetchURL") {
        var fetchURL    = messageJSON[1];

        GM_xmlhttpRequest ( {
            method:     'GET',
            url:        fetchURL,
            onload:     function (responseDetails) {
                            // DO ALL RESPONSE PROCESSING HERE...
                            console.log (
                                "GM_xmlhttpRequest() response is:\n",
                                responseDetails.responseText.substring (0, 80) + '...'
                            );
                        }
        } );
    }
}

function withPages_jQuery (NAMED_FunctionToRun) {
    //--- Use named functions for clarity and debugging...
    var funcText        = NAMED_FunctionToRun.toString ();
    var funcName        = funcText.replace (/^function\s+(\w+)\s*\((.|\n|\r)+$/, "$1");
    var script          = document.createElement ("script");
    script.textContent  = funcText + "\n\n";
    script.textContent += 'jQuery(document).ready( function () {' + funcName + '(jQuery);} );';
    document.body.appendChild (script);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T15:59:12.663

您正在发布到本地主机。如果您愿意，（不是每个人都会）设置 CORS 标头以允许在您的本地主机服务器上被篡改的站点访问，或者如果它不被其他人运行/已发布，则可以访问所有站点。

然后，您根本**不需要**使用 GM_XHR，只要将 XHR 正确配置为跨域，您可以通过将其包装在注入的脚本中来做到这一点。

# php - 如何在 Symfony 2 中设置表单字段名称？

> ID：11377192
> 
> 赞同：3
> 
> 时间：2012-07-07T17:30:22.553
> 
> 标签：php, symfony

我想为登录表单创建一个表单类。

```
class LoginForm extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('username','text');
        $builder->add('password','password');
    }

    public function getName()
    {
        return 'login';
    }
} 
```

此代码生成表单：

```
<form action="/app_dev.php/login_check" method="post">
    <div id="login"><input type="hidden" id="login__token" name="login[_token]" value="b7521243e04f79fb55c77c6ea8dc782578beab99" /><div><label for="login_username" class=" required">Username</label><input type="text" id="login_username" name="login[username]" required="required" /></div><div><label for="login_password" class=" required">Password</label><input type="password" id="login_password" name="login[password]" required="required" /></div></div>

    <input type="submit" name="login" />
</form> 
```

但是 symfony 要求字段是名称：用户名和密码。

在 security.yml 配置中：

```
 form_login:
        check_path: /login_check
        login_path: /login
        username_parameter: login[username]
        password_parameter: login[password] 
```

但它不起作用。

如何将它们的名称设置为字段，或者如何指定用于身份验证的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:59:27.310

可能对您有所帮助的链接[http://symfony.com/doc/current/cookbook/security/form_login.html](http://symfony.com/doc/current/cookbook/security/form_login.html)。

问题可能不在形式上。

# objective-c - iOS - 需要区分应用程序中的 UILocalNotification:didReceiveLocalNotification:

> ID：11377197
> 
> 赞同：4
> 
> 时间：2012-07-07T17:30:47.580
> 
> 标签：objective-c, ios, cocoa-touch, uilocalnotification

所以这是交易......我需要一种方法来区分我收到的应用程序状态`UILocalNotification`。

有一种情况对我来说我不明白。那就是当应用程序当前在前台运行并且用户拉下通知中心（iOS 5）时，应用程序将被调用`applicationWillResignActive:`，这是完全合乎逻辑的，因为当通知中心将显示在它上面时它不会处于活动状态。但我怀疑它也会`applicationDidEnterBackground:`在它退出活动后立即被调用，**但**它没有。因此，当我在通知中心收到 UILocalNotifications 时，我的应用程序将尝试处理它们`application:didReceiveLocalNotification:`但是当我点击通知中心列表中我的应用程序的通知时，我的应用程序将处理这个通知，就像我在通知中心收到它时一样。所以我只能以一种方式处理这些通知，但我需要以两种方式处理它们。

那么我该如何区分这两种情况：

*   当应用程序处于前台并且用户已拉下
    通知中心并且我在此期间收到通知时
    ( `UIApplicationState = UIApplicationStateInactive`)

*   当应用程序处于前台并且用户已拉下
    通知中心并主动
    从列表中选择我的应用程序的通知之一时 ( )`UIApplicationState =
    UIApplicationStateInactive`

**编辑：**

我用 00 秒的时间戳存储我的所有通知。所以在里面`application:didReceiveLocalNotification:`我可以检查当前时间`[NSDate date]`，看看秒是否大于 00？这意味着触发通知的不是 iOS，而是通知中心的用户。这当然取决于通知实际上将由 iOS 以这种及时的方式传递的事实。如果 iOS 将在 01 秒发送通知，我的逻辑就会中断。但为了它，我只是做了一些日志记录，以查看 iOS 何时发送我的通知，似乎从控制台的输出判断，通知实际上是以毫秒精度 (+/- 1) 准时发送的。当然，您无法将连接到计算机的开发设备与现实世界的场景进行比较。

```
2012-07-08 10:09:00.789 App[7535:707] -[AppDelegate application:didReceiveLocalNotification:] [Line 399] application:didReceiveLocalNotification: method running
2012-07-08 10:10:00.789 App[7535:707] -[AppDelegate application:didReceiveLocalNotification:] [Line 399] application:didReceiveLocalNotification: method running
2012-07-08 10:11:00.788 App[7535:707] -[AppDelegate application:didReceiveLocalNotification:] [Line 399] application:didReceiveLocalNotification: method running
2012-07-08 10:12:00.790 App[7535:707] -[AppDelegate application:didReceiveLocalNotification:] [Line 399] application:didReceiveLocalNotification: method running
2012-07-08 10:13:00.790 App[7535:707] -[AppDelegate application:didReceiveLocalNotification:] [Line 399] application:didReceiveLocalNotification: method running
2012-07-08 10:14:00.789 App[7535:707] -[AppDelegate application:didReceiveLocalNotification:] [Line 399] application:didReceiveLocalNotification: method running
2012-07-08 10:15:00.789 App[7535:707] -[AppDelegate application:didReceiveLocalNotification:] [Line 399] application:didReceiveLocalNotification: method running 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T21:05:56.020

您能否等着看您的状态是否会在不久之后变为活动状态？

当您在第二种情况下收到本地通知时，您的应用程序将在您收到回调后立即变为活动状态（因为用户选择返回您的应用程序）。那么，如何存储您的本地通知并在 50 毫秒后对其进行操作（例如）；如果您的应用程序状态此时处于活动状态，则用户从通知中心选择了您的应用程序。

# c# - 根据长度对单词进行分组c#

> ID：11377205
> 
> 赞同：2
> 
> 时间：2012-07-07T17:32:19.413
> 
> 标签：c#, linq, c#-4.0

是否可以根据长度将一串单词分组到数组中？我正在尝试以下代码，但它不起作用。谢谢你。

```
string [] groups =
      from word in words.split(' ')
      orderby word ascending
      group word by word.Length into lengthGroups
      orderby lengthGroups.Key descending
      select new { Length = lengthGroups.Key, Words = lengthGroups }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:37:40.750

由于查询返回匿名类型的列表，您应该使用`var`关键字：

```
var sentence = "Here are a few words in a sentence";
var words = sentence.Split(' ');

var groups =
  from word in words
  orderby word ascending
  group word by word.Length into lengthGroups
  orderby lengthGroups.Key descending
  select new { Length = lengthGroups.Key, Words = lengthGroups };

// Test the results
foreach (var lengthGroup in groups)
{
    Console.WriteLine(lengthGroup.Length);

    foreach(var word in lengthGroup.Words)
    {
        Console.WriteLine(word);
    }
} 
```

您还可以使用动态`IEnumerable`：

```
IEnumerable<dynamic> groups =
  from word in words
  orderby word ascending
  group word by word.Length into lengthGroups
  orderby lengthGroups.Key descending
  select new { Length = lengthGroups.Key, Words = lengthGroups }; 
```

由于您的结果不是字符串列表，而是匿名类型列表，因此您不能将其转换为字符串数组。如果您愿意，可以将其转换为动态类型数组：

```
dynamic[] myArray = groups.ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T17:54:15.403

```
//string[] words = new string[] { "as", "asdf", "asdf", "asdfsafasd" };
//string[] words = "as asdf asdf asdfsafasd".Split(' ');

var groups = "as asdf asdf asdfsafasd".Split(' ').GroupBy(x => x.Length);

foreach (var lengthgroup in groups)
{
    foreach (var word in lengthgroup)
    {
        Console.WriteLine(word.Length + " : " + word);
    }
} 
```

# php - 严重的 php get_template_part() Wordpress 问题 - 容易修复？

> ID：11377207
> 
> 赞同：0
> 
> 时间：2012-07-07T17:32:23.127
> 
> 标签：php, html, wordpress, function, methods

我需要其他人提供一些严肃的 Wordpress 专业知识。我正在构建自定义主题，阅读了该`get_template_part()`方法并决定这将有助于清理和组织我的代码。我更新了我的主题以在几个地方使用这种方法，现在该网站完全崩溃了......不会加载任何东西！:(*非常*感谢任何帮助！我将复制并粘贴下面的一些 php 文件。也许有更多使用此方法经验的人可以指出问题。谢谢！

**页面.php**

```
<?php get_header(); ?>
    <div id="content" class="content">
        <?php while ( have_posts() ) : the_post(); ?>

            <!-- About page -->
            <?php if (is_page('about')) ?>
            <?php get_template_part( 'page', 'about' ); ?>

            <!-- Media & Gallery page -->
            <?php if (is_page('media-gallery')) ?>
            <?php get_template_part( 'page', 'mediagallery' ); ?>

        <?php endwhile; // end of the loop. ?>
    </div> <!--/end content -->
<?php get_footer(); ?> 
```

**page-about.php**

```
<div id="about">
    <div class="text">
        <h2 class="about"><?php echo get_the_title(); ?></h2>
        <?php the_content(); ?>
    </div>
</div> 
```

**page-mediagallery.php**

```
<div id="pic-gallery">
    <?php include_once 'includes/pwaplusphp/albums.php'; ?>
</div> 
```

**索引.php**

```
<?php get_header(); ?>
    <div class="content">
        <?php if ( have_posts() ) : ?>
            <?php while ( have_posts() ) : the_post(); ?>

                <?php get_template_part( 'content', get_post_format() ); ?>

                <br class="clr"/>
            <?php endwhile; ?>

            <?php content_nav( 'nav-below' ); ?>

        <?php else : ?>

            <article id="post-0" class="post no-results not-found">
                <header class="entry-header">
                    <h3 class="blog"><?php _e( 'Nothing Found' ); ?></h3>
                </header> <!-- .entry-header -->

                <div class="entry-content">
                    <p><?php _e( 'Apologies, but no results were found for the requested archive. Perhaps searching will help find a related post.'); ?></p>
                </div> <!-- .entry-content -->
            </article> <!-- #post-0 -->

        <?php endif; ?>
    </div> <!--/end content -->
<?php get_footer(); ?> 
```

**内容-gallery.php**

```
<div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
    <div class="post-date"><?php the_time(get_option('date_format')); ?></div>
    <h3 class="blog"><?php the_title(); ?></h3>

    <div class="post-content"><?php the_content(); ?></div>
</div> 
```

有什么想法为什么这些可能不起作用？所有这些文件都在主题的根目录下，因此该`get_template_part()`方法应该是查找所有文件。奇怪的是，Wordpress 没有吐出任何代码。又名。自从我开始使用这种方法以来，当我检查源代码时，我的浏览器中没有任何一行代码被吐出。

我正在为我的浏览器使用最新版本的 Wordpress 和 Google Chrome。

我的每个*.php*文件的顶部也有这段代码，但这不应该搞砸任何事情，因为它的注释如下所示：

```
<?php
/**
 * I put a description of what the file does here.
 *
 * @package Keynote_WP_Themes
 * @subpackage Rhymz_Suhreal
 * @copyright Rhymz Suhreal, 2012
 * @author Kyle Affolder <myemail@example.com>
 */
 ?> 
```

我对自己做错了什么一无所知。:(

## 想法编码的朋友？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:12:13.673

以您的 page-about.php 为例，您应该在要放置的模板中这样调用它：

```
<?php get_template_part( "page-about" ); ?> 
```

该模板需要位于主题目录的根目录中，因此您可以`"page-about"`在没有 的情况下使用`.php`，并且不必指明文件所在的位置/目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:47:54.060

我之前也遇到过几次 - 我还不能解释为什么，因为我仍在研究文档，但是当你在 post 循环中时，你似乎不能以这种方式调用模板部分;)

每当您在循环中时，请尝试使用它：

`<?php include(get_query_template('page-about')); ?>`

# python - 用于展平嵌套列表的递归生成器

> ID：11377208
> 
> 赞同：10
> 
> 时间：2012-07-07T17:32:28.547
> 
> 标签：python, recursion

我是一名编程新手，在理解我的 Python 教科书（Magnus Lie Hetland 的“Beginning Python”）中的一个例子时遇到了一些麻烦。该示例用于递归生成器，旨在展平嵌套列表的元素（具有任意深度）：

```
def flatten(nested):
    try:
        for sublist in nested:
            for element in flatten(sublist):
                yield element
    except TypeError:
        yield nested 
```

然后，您将输入一个嵌套列表，如下所示：

```
>>> list(flatten([[[1],2],3,4,[5,[6,7]],8]))
[1,2,3,4,5,6,7,8] 
```

我了解 flatten() 中的递归如何帮助减少到此列表的最里面的元素“1”，但我不明白的是，当“1”实际上作为“嵌套”传递回 flatten() 时会发生什么'。我认为这会导致 TypeError （不能迭代一个数字），并且异常处理实际上会为生成输出做繁重的工作......但是使用 flatten() 的修改版本进行测试让我确信事实并非如此。相反，似乎“产量元素”线是负责任的。

也就是说，我的问题是……“屈服元素”如何真正执行？看起来“嵌套”要么是一个列表——在这种情况下会添加另一层递归——或者它是一个数字，你会得到一个 TypeError。

对此的任何帮助将不胜感激......特别是，我很想了解事件链，因为 flatten() 处理了一个简单的示例，例如：

```
list(flatten([[1,2],3])) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T17:47:06.747

我在函数中添加了一些工具：

```
def flatten(nested, depth=0):
    try:
        print("{}Iterate on {}".format('  '*depth, nested))
        for sublist in nested:
            for element in flatten(sublist, depth+1):
                print("{}got back {}".format('  '*depth, element))
                yield element
    except TypeError:
        print('{}not iterable - return {}'.format('  '*depth, nested))
        yield nested 
```

现在打电话

```
list(flatten([[1,2],3])) 
```

显示

```
Iterate on [[1, 2], 3]
  Iterate on [1, 2]
    Iterate on 1
    not iterable - return 1
  got back 1
got back 1
    Iterate on 2
    not iterable - return 2
  got back 2
got back 2
  Iterate on 3
  not iterable - return 3
got back 3 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-07T18:33:12.843

也许你的部分困惑是你正在考虑最后的`yield`陈述，好像它是一个`return`陈述。事实上，有几个人建议，当`TypeError`在这段代码中抛出 a 时，传递的项目是“返回”的。事实并非如此！

请记住，任何时间`yield`出现在函数中，结果都不是单个项目，而是一个*可迭代*的——即使序列中只出现一个项目。所以当你传递`1`给时`flatten`，结果是一个*单项生成器*。要从中取出项目，您仍然需要对其进行迭代。

`TypeError`由于这个单项生成器是可迭代的，因此当内部`for`循环尝试对其进行迭代时，它不会抛出 a ；但内`for`循环只执行一次。然后外`for`循环移动到嵌套列表中的下一个可迭代对象。

考虑这个问题的另一种方法是说，每次您将不可迭代的值传递给 时`flatten`，它都会将该值包装在一个可迭代的单项中并“返回”它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-07T17:51:53.327

分解您通常理解的函数的一种好方法是使用 python 调试器。这里添加了评论：

```
-> def flatten(nested):
(Pdb) l
  1  -> def flatten(nested):
  2         try:
  3             for sublist in nested:
  4                 for element in flatten(sublist):
  5                     yield element
  6         except TypeError:
  7             yield nested
  8     
  9     import pdb; pdb.set_trace()
 10     list(flatten([[1,2],3]))
 11     
(Pdb) a
nested = [[1, 2], 3] 
```

上面，我们刚刚输入了函数，参数是`[[1, 2], 3]`. 让我们使用 pdb 的*step*函数单步执行该函数，进入我们应该遇到的任何递归调用：

```
(Pdb) s
> /Users/michael/foo.py(2)flatten()
-> try:
(Pdb) s
> /Users/michael/foo.py(3)flatten()
-> for sublist in nested:
(Pdb) s
> /Users/michael/foo.py(4)flatten()
-> for element in flatten(sublist):
(Pdb) s
--Call--
> /Users/michael/foo.py(1)flatten()
-> def flatten(nested):
(Pdb) a
nested = [1, 2] 
```

我们已经进入了 的一个内部框架`flatten`，参数在哪里`[1, 2]`。

```
(Pdb) s
> /Users/michael/foo.py(2)flatten()
-> try:
(Pdb) s
> /Users/michael/foo.py(3)flatten()
-> for sublist in nested:
(Pdb) s
> /Users/michael/foo.py(4)flatten()
-> for element in flatten(sublist):
(Pdb) s
--Call--
> /Users/michael/foo.py(1)flatten()
-> def flatten(nested):
(Pdb) a
nested = 1 
```

两帧后，参数`1`不再是可迭代的。这应该很有趣……</p>

```
(Pdb) s
> /Users/michael/foo.py(2)flatten()
-> try:
(Pdb) s
> /Users/michael/foo.py(3)flatten()
-> for sublist in nested:
(Pdb) s
TypeError: "'int' object is not iterable"
> /Users/michael/foo.py(3)flatten()
-> for sublist in nested:
(Pdb) s
> /Users/michael/foo.py(6)flatten()
-> except TypeError:
(Pdb) s
> /Users/michael/foo.py(7)flatten()
-> yield nested
(Pdb) s
--Return--
> /Users/michael/foo.py(7)flatten()->1
-> yield nested 
```

好的，所以由于`except TypeError`，我们只是产生了论点本身。上一帧！

```
(Pdb) s
> /Users/michael/foo.py(5)flatten()
-> yield element
(Pdb) l
  1     def flatten(nested):
  2         try:
  3             for sublist in nested:
  4                 for element in flatten(sublist):
  5  ->                 yield element
  6         except TypeError:
  7             yield nested
  8     
  9     import pdb; pdb.set_trace()
 10     list(flatten([[1,2],3]))
 11 
```

`yield element`当然会产生`1`，所以一旦我们的最低帧命中 a `TypeError`，结果就会一直传播到堆栈的最外层帧`flatten`，这会在移动到外部可迭代的其他部分之前将其产生给外部世界。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T17:39:38.717

该`try` `except`构造为您捕获了异常并`nested`返回，这正是给出的论点`flatten()`。

所以flatten (1) 会出错，并`for sublist in nested:`继续处理.`except``nested``1`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T17:49:49.190

`yield element`可以执行 if`nested`是一个列表但`sublist`不是（即，如果`nested`是一个普通的“平面”列表）。在这种情况下，`for sublist in nested`可以正常工作。当下一行递归调用`flatten sublist`时，当递归调用尝试迭代“子列表”（不可迭代）时，将引发 typerror。这个 TypeError 被捕获，递归调用返回*整个输入列表*，因此它被`for element in flatten(sublist)`调用迭代。换句话说，如果`for element in flatten(sublist)`sublist`for element in sublist`已经平坦，则结束。

要认识到的关键是，即使是非嵌套列表也会导致递归调用。一个like 调用`flatten([1])`会产生*两个*yield：递归调用将yield`[1]`到外部调用，而外部调用立即重新yields `1`。

这个版本的函数可能有助于理解发生了什么：

```
 def flatten(nested, indent=""):
        try:
            print indent, "Going to iterate over", nested
            for sublist in nested:
                print indent, "Going to iterate over flattening of", sublist
                for element in flatten(sublist, indent+"  "):
                    print indent, "Yielding", element
                    yield element
        except TypeError:
            print indent, "Type Error!  Yielding", nested
            yield nested

    >>> list(flatten([[1,2],3]))
     Going to iterate over [[1, 2], 3]
     Going to iterate over flattening of [1, 2]
       Going to iterate over [1, 2]
       Going to iterate over flattening of 1
         Going to iterate over 1
         Type Error!  Yielding 1
       Yielding 1
     Yielding 1
       Going to iterate over flattening of 2
         Going to iterate over 2
         Type Error!  Yielding 2
       Yielding 2
     Yielding 2
     Going to iterate over flattening of 3
       Going to iterate over 3
       Type Error!  Yielding 3
     Yielding 3
    [1, 2, 3] 
```

# android - Corona SDK 物理游戏无法在 Android 设备上正常运行

> ID：11377209
> 
> 赞同：0
> 
> 时间：2012-07-07T17:32:42.160
> 
> 标签：android, ios, coronasdk

我是 Corona 和游戏开发的新手。我正在制作一个简单的物理游戏，以通过触摸移动物体。这是我的代码

```
local physics = require"physics";
local gameUI = require("gameUI")

physics.setDrawMode( "normal" )
physics.setScale( 40)
physics.setPositionIterations( 60 )

physics.start();

local _H=display.contentHeight;
local _W=display.contentWidth;

local crat1=display.newImageRect("crate1.png",40,40)
crat1.x=20;crat1.y=200;
physics.addBody(crat1,"dynamic",{density=-1000,bounce=0.1,friction=100});

local function dragBody_call(event)
--Calling drawBody() From gameUI
gameUI.dragBody(event);

end    

crat1:addEventListener( "touch", dragBody_call) -- make object draggable 
```

在模拟器中，移动和触摸事件运行良好，它也可以在 Android 设备上运行。物理效果很好，我也可以用 Touch 移动对象，但是移动对象非常滞后且非常困难。有时它不动。它不像模拟器那么流畅。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T10:50:59.107

我认为问题是你的

```
physics.setPositionIterations( 60 ) 
```

根据文档

> 默认值为 8，这意味着引擎将为每个对象在每帧迭代 8 个位置近似值。增加这个数字将导致更少的瞬时不准确（重叠对象等）**，但会增加计算开销**。对于大多数一般情况，默认值应该是好的。

见这里[http://docs.coronalabs.com/api/library/physics/setPositionIterations.html](http://docs.coronalabs.com/api/library/physics/setPositionIterations.html)

删除该行，或者如果您真的需要性能，请将其增加一个较小的值。对 12 或 16 说。

# javascript - 我可以在 emberjs 中给视图显示动画吗

> ID：11377215
> 
> 赞同：6
> 
> 时间：2012-07-07T17:33:37.060
> 
> 标签：javascript, view, ember.js, router

这是使用 emberjs 路由器[http://jsbin.com/agameq/edit](http://jsbin.com/agameq/edit)的示例。现在我想要一些显示动画，比如当路由改变时，fadeIn 或fadeOut。我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T19:11:12.400

每一个`View`ember 都有一个名为 的方法`didInsertElement`：

> 当视图的元素已插入 DOM 时调用。覆盖此函数以执行任何需要文档正文中的元素的设置。

所有 ember 视图也有一个`$`jQuery 引用，因此您可以用它在视图中包装一些元素并对其应用任何更改，例如：

```
// this will animate only the tag h2, which in your case is the title of the users view
App.UsersView = Ember.View.extend({
    templateName: 'users',
    didInsertElement: function() {
        this.$('h2').animate({ fontSize: "3em" }, 900 );
    }   
}); 
```

或者您可以不带参数（如`$()`）调用它以返回由 jQuery 包装的当前视图。

要在您进入该视图/路线时为视图设置动画，请在您的`App.UsersView`:

```
// this will animate the entire view
App.UsersView = Ember.View.extend({
    templateName: 'users',
    didInsertElement: function() {
        this.$().animate({ fontSize: "3em" }, 900 );
    }   
}); 
```

（**注意**：我的动画很蹩脚，但这只是为了显示调用方法的位置，做一个真正的动画）

[**这是您的 JSBin**](http://jsbin.com/ehafoh/2/edit#javascript,html)的修改版本[](http://jsbin.com/ehafoh/2/edit#javascript,html)

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T17:05:22.067

根据@MilkyWayJoe 的回答，您可能希望在插入视图之前隐藏视图，方法是将`isVisible`属性设置为`false`：

```
App.UsersView = Ember.View.extend({
    templateName: 'users',

    isVisible: false,

    didInsertElement: function() {
        var self = this;
        this.$().fadeIn(700, function(){
            self.set('isVisible', true);  //inform observers of `isVisible`
        });
    }   
}); 
```

或者使用[这个动画 Mixin](http://www.dynopia.com/en/blog/article/771/ember-js-animations-with-jquery-animate)，它允许您通过更改一组观察到的 CSS 属性来为视图设置动画：

```
App.UsersView = Ember.View.extend( JQ.Animate, {
    templateName: 'users',

    isVisible: false,

    // Observed CSS properties
    cssProperties: ['display'],

    // Optional animation properties
    duration: 700,
    easing: 'easeInOutCubic', 

    didInsertElement: function() {
        this.set('display', 'block'); 
    },

    afterAnimate: function() {
        this.set('isVisible', true);
    }   
}); 
```**

# forms - 两种几乎相同的形式，功能不同

> ID：11377222
> 
> 赞同：0
> 
> 时间：2012-07-07T17:35:16.307
> 
> 标签：forms, jquery, post, jquery-validate

我在两个不同的页面上有两个几乎相同的表格，其中包含用户的姓名和电子邮件地址。当我按下提交按钮时，它们都调用了一个验证器，它可以正常工作，然后它们都应该进行 Ajax 调用并显示结果。此时，其中一个调用成功，另一个简单地刷新页面。我不确定导致一个成功工作而另一个失败的区别是什么。使用有效的表格，我已经遇到过这个问题，这是由于我通过 javascript 生成表格造成的。我现在不知道是什么原因造成的。这是运行代码的内联代码：

```
<!--// MODAL: INVITE //-->
<div id="inviteModal" class="modal" style="display: none">
   <div class="response"></div>
   <form id="inviteForm" >
   <script type="text/javascript" src="/includes/js/jquery-1.7.2.min.js"></script>
   <script type="text/javascript">
     var invites = <?php echo $user->getInvitesLeft(); ?>;
   </script>
   </form>
</div> 
```

响应是显示来自 Ajax 调用的响应的位置。我必须稍后使用 Javascript 生成内容，因为我会根据邀请的值采取不同的操作。我最初是在生成整个东西，但我发现我必须将表单标签放在适当的位置以防止第一次出现刷新问题。这是生成用户看到的表单的代码：

```
if(invites < 1){
        $("#inviteModal").html("You have no invites left. You can get more by increasing your score.");
    }
    else{
        $("#inviteForm").html("<h2>Please enter the specified information for the friend you wish to invite. </h2>"+
       "<p>First: <input type=\"text\" name=\"first\"></p>"+
       "<p>Last: <input type=\"text\" name=\"last\"></p>"+
       "<p>Email: <input type=\"text\" name=\"email\"></p>"+
       "<p><input type=\"submit\" name=\"submit\" value=\"Invite\"></p>");
    }
    $("#inviteModal").css('display', "block");
    $("#overlay").css("display", "block"); 
```

这是验证器功能：

```
$("#inviteForm").validate({
//Rules for invite validation
rules: {
            first: "required",
            email: {
                required: true,
                email: true
            }
        },
//Messages to print if validation fails
messages: {
            first: "Please provide your friend's name.",
            email: "We cannot contact your friend without a valid email address.",
        },
//What to do when validation succeeds
submitHandler: function(form) {
            //Form is valid, make Ajax call
            $.ajax({
            type: "POST",
            url: '/invite/process',
            data: $("#inviteForm").serialize(),
            datatype: "html",
            success: function(data, textStatus ,XHR) {
                //alert(data);

                if(data.indexOf("Thank you") >= 0 ){
                    $("#inviteModal .response").text(data);
                    invites -=1;
                }
                else{
                    $("#inviteModal .response").text(data);
                }
            }
            }); //End ajax
        } //End submitHandler
}); //End validator 
```

正如我所说，这个工作非常好。这个和刷新的唯一区别在于，不起作用的页面位于您不必登录即可查看的页面上，并根据用户是否登录采取不同的操作。这是内联代码：

```
<!--// MODAL: INVITE //-->
<div id="inviteModal" class="modal" style="display: none">
<div class="response"></div>
<form id="inviteForm" >
<script type="text/javascript" src="/includes/js/jquery-1.7.2.min.js"></script>
<?php 
if(!$user || $user == null){ //No user logged in, display invite request form instead 
   $loggedin = false;
}
else{ //Allow user to invite friends
   $loggedin = true; 
}  
?>
</form> 
```

这是生成代码，除了一个额外的 if 层之外几乎相同：

```
if(!loggedin){
        $("#inviteForm").html("<h2>Please enter the specified information to request an invitation. </h2>"+
           "<p>First: <input type=\"text\" name=\"first\"></p>"+
           "<p>Last: <input type=\"text\" name=\"last\"></p>"+
           "<p>Email: <input type=\"text\" name=\"email\"></p>"+
           "<p><input type=\"submit\" name=\"submit\" value=\"Invite\"></p>");
    }
else{
        invites = <?php echo $user->getInvitesLeft(); ?>;
        if(invites < 1){
            $("#inviteModal").html("You have no invites left. You can get more by increasing your score.");
        }
        else{
            $("#inviteForm").html("<h2>Please enter the specified information for the friend you wish to invite. </h2>"+
           "<p>First: <input type=\"text\" name=\"first\"></p>"+
           "<p>Last: <input type=\"text\" name=\"last\"></p>"+
           "<p>Email: <input type=\"text\" name=\"email\"></p>"+
           "<p><input type=\"submit\" name=\"submit\" value=\"Invite\"></p>");
        }
    }
    $("#inviteModal").css('display', "block");
    $("#overlay").css("display", "block"); 
```

这是验证器：

```
$("#inviteForm").validate({
//Rules for invite validation
rules: {
            first: "required",
            email: {
                required: true,
                email: true
            }
        },
//Messages to print if validation fails
messages: {
            first: "Please provide your friend's name.",
            email: "We cannot contact your friend without a valid email address.",
        },
//What to do when validation succeeds
submitHandler: function(form) {
            //Form is valid, make Ajax call
            if(loggedIn){   //They are inviting a friend
                $.ajax({
                    type: "POST",
                    url: '/invite/process',
                    data: $("#inviteForm").serialize(),
                    datatype: "html",
                    success: function(data, textStatus ,XHR) {
                        //alert(data);

                        if(data.indexOf("Thank you") >= 0 ){
                            $("#inviteModal .response").text(data);
                            invites -=1;
                            //$("#overlay").css("display", "none");
                            //$("#inviteModal").fadeOut(5000);
                        }
                        else{
                            $("#inviteModal .response").text(data);
                        }
                        return false;
                    }
                }); //End Ajax
            }
            else{ //They are requesting an invite for theirself
                $.ajax({
                    type: "POST",
                    url: '/invite/request',
                    data: $("#inviteForm").serialize(),
                    datatype: "html",
                    success: function(data, textStatus ,XHR) {
                        //alert(data);

                        $("#inviteModal .response").text(data);

                        return false;
                    }
                }); //End ajax
            }
                            return false;
        } //End submitHandler
}); //End validate 
```

再次几乎相同，除了一层额外的 if。那么为什么底部的页面会刷新页面而不是进行 Ajax 调用，而第一个工作得非常好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:58:16.620

`return false`在第二个的ajax成功回调函数中注释掉这些语句怎么样？

# android - 输入在 Android 模拟器中不起作用

> ID：11377226
> 
> 赞同：5
> 
> 时间：2012-07-07T17:35:58.147
> 
> 标签：android, cordova, android-emulator

我在 Android 4.1 中使用 Phonegap 1.9.0 并带有以下简化`index.html`页面：

```
<html>
  <head>
    <script type="text/javascript" src="cordova-1.9.0.js"></script>                
  </head>
  <body>
    <input type="text" name="somethings"></input>
  </body>
</html> 
```

该应用程序运行良好，但是当我将焦点放在输入上并尝试为其输入文本时，没有输入任何内容。

操作系统就像我正在按下键（在虚拟键盘上），因为它建议拼写更正并且键盘 UI 响应......但没有任何东西进入输入字段。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:48:05.477

显然这是 PhoneGap 1.9.0 中的一个错误，并已在即将发布的 2.0 版本中修复

[https://groups.google.com/d/msg/phonegap/rEo8IjPY28Q/SOUWO7x6MfAJ](https://groups.google.com/d/msg/phonegap/rEo8IjPY28Q/SOUWO7x6MfAJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:53:43.723

在 html 文件中添加这两行脚本并尝试：

```
Ext.Loader.setConfig({ disableCaching: false });
    Ext.Ajax.setDisableCaching(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T09:19:42.703

是否为您的 Emulator AVD 显式启用了硬件键盘支持。有关详细信息，请参阅此问题：[Keyboard stop working on Intel x86 Android emulator after upgrade to ADT 20](https://stackoverflow.com/questions/11259888/keyboard-stoped-working-on-intel-x86-android-emulator-after-upgrading-to-adt-20/11259966#11259966)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T03:20:39.280

试试这个：在 AndroidManifest.xml 中。

```
android:hardwareAccelerated="true" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T05:47:22.983

请使用软键而不是模拟器键键入。它应该工作。

模拟器键有时可能不起作用。您可以尝试在创建模拟器时添加“键盘支持”。

AVD 管理器 --> 选择你的模拟器 -- 编辑 .. 硬件部分

```
 click New button select "Keyboard support' from property dropdown.
    double click on no to show yes/no drop down and set it to YES. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T07:10:54.427

我只是遇到了同样的问题-我使用 Titanium 。

我在 Ubutnu 上，所以这就是我修复它的方法：Titanium -> 窗口菜单 -> AVD 管理器 -> 突出显示我要修复的模拟器 -> 单击“编辑...”按钮 -> 在底部，那里是“硬件”部分->单击“新建..”->然后在下拉列表中找到“键盘支持”选项->再次点击“确定”->在“硬件”部分下，突出显示刚刚添加的“键盘支持”项并在“值”列中将其更改为“是”-> 单击关闭或单击“硬件”框中的另一个属性列表（这似乎应用了更改）-> 单击“编辑 AVD”按钮。

这似乎为我解决了这个问题。

# xml - 避免 XML 响应中不需要的 XML 结构

> ID：11377228
> 
> 赞同：1
> 
> 时间：2012-07-07T17:36:01.643
> 
> 标签：xml, http, xmlhttprequest, client-server

我正在开发一个 iPhone 应用程序，客户端使用 HTTP POST 向服务器发送消息。带有 xml 的服务器响应。

这是一款消息应用程序，因此用户可以互相发送短信。

现在如果用户发送一个看起来像 xml 结构的文本消息会发生什么？这可能会破坏服务器发送给客户端的 xml，我怎么能确定这不会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:42:17.753

您应该将用户定义的消息放入 XML 结构中的[CDATA](http://www.w3schools.com/xml/xml_cdata.asp)部分，这将阻止任何解析器评估这部分：

```
<message>
    <![CDATA[ my user content which won't be parsed ]]>
</message> 
```

只要用户有效负载不包含 ，您就不会遇到任何问题`]]>`，但是您可以轻松[解决此问题](http://en.wikipedia.org/wiki/CDATA#Nesting)。

# php - PHP将gif中的简单数字转换为文本？

> ID：11377233
> 
> 赞同：1
> 
> 时间：2012-07-07T17:36:32.480
> 
> 标签：php, ocr, gif

我正在尝试使目前手动完成的过程自动化。

我有几个 gif 图像，其中包含一个货币符号 + 一个数值，就像这个：

![数字的示例图像](../Images/af8e3257763a66b6376500b622206432.png)

我正在尝试直接从 GIF 图像中获取数值，但看起来我的策略无法正常工作（我尝试了几种有关 OCR 的解决方案）。

你对我如何做到这一点有什么建议吗？

我一直在考虑在某处保存一组可能的图像，这些图像可能是单个数字，例如 0 1 2 3 4 5 6 7 8 9 并在图像中搜索从左到右开始的这些数字的每次出现以创建一个数字字符串与解决方案，但我真的不知道从哪里开始。

更多信息：图像始终包含此类信息：

*   美元符号
*   数值
*   小数点
*   数字美分
*   图像始终具有相同的字体

可以看到，根据数字在数值中的位置，由于颜色不纯，数字本身会有不同的背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:43:30.803

裁剪`imagemagick`并扫描`tesseract`

# c++ - 抽象基类实现

> ID：11377237
> 
> 赞同：2
> 
> 时间：2012-07-07T17:37:46.750
> 
> 标签：c++, inheritance, abstract-class, virtual-functions

这是一个面试问题：

我们如何在不使用**纯虚函数的情况下实现****抽象基类**。我们可以做些什么来让我们不能创建一个类的任何**对象**，因为在这种情况下我们可以说我们的类是一个**抽象基类。**

 ******起初我想使用**虚拟析构函数**，但由于 virtual 关键字，我不确定这个解决方案。你能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T21:38:38.643

您提出两个问题，我们将依次回答：

> 我们如何在不使用纯虚函数的情况下实现抽象基类？

根据抽象类的定义，这是不可能的：“如果一个类至少有一个纯虚函数，那么它就是抽象的”（C++11 §10.4/2）。因此，为了抽象，一个类必须声明一个纯虚函数，或者它必须从它派生的另一个类继承一个纯虚函数。

> 我们可以做些什么来让我们不能创建一个类的任何对象？

这个问题可以用多种不同的方式来解释，每种方式都有不同的解决方案。

1.  从字面上看，这个问题要求一种不能创建实例的类型。无法构造没有定义构造函数的类。

    为此，应该为该类声明（但不定义）默认构造函数和复制构造函数。如果使用支持 C++11 的已删除特殊成员函数的编译器，则应将它们声明为已删除。

2.  在第一个问题的上下文中，似乎更可能的意图是定义一个只能作为另一个类的基类子对象实例化的类。

    这可以通过将所有构造函数声明为受保护，不提供任何创建类实例的静态工厂成员函数，以及不与任何其他类或函数成为朋友来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:17:29.723

虚拟破坏者不会完成所需的工作。您可以执行以下任一操作：

1.  用定义声明一个**纯虚析构函数**。
2.  使基类的构造函数受保护。

有关更清晰的解释，请参阅[使类抽象而不使用任何纯虚拟方法](https://stackoverflow.com/questions/4640985/making-a-class-abstract-without-any-pure-virtual-methods)。******

# android - 带有背景颜色的 Android 按钮图标

> ID：11377239
> 
> 赞同：2
> 
> 时间：2012-07-07T17:38:11.573
> 
> 标签：android, image, button

![我想创建一个这样的按钮](../Images/541f52decf7c525400568a75cca12cf8.png)

我想在按钮的中心添加一个图像（用户图像），并保持按钮的背景颜色（灰色）。

我尝试将**背景**属性与**填充**一起使用，但似乎没有效果。

谁能指导我怎么做？

我应该在我的 xml 中使用属性**drawableTop 吗**？？？

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T17:41:28.933

不要将图像设置为背景。相反，使用 ImageButton 并将您的图像指定为源（src 属性）。

这样您就可以指定诸如比例类型、填充等内容。请记住，使用填充有时在 Android 2.2 版上无法正常工作。

# ios - 重新连接时没有调用 didUpdateValueForCharacteristic

> ID：11377241
> 
> 赞同：1
> 
> 时间：2012-07-07T17:38:27.687
> 
> 标签：ios, core-bluetooth

使用 CoreBluetooth，我可以连接到新设备，获取服务和特性，并接收特性更新。

当我重新连接到已写入其客户端特征配置描述符的绑定设备时，我希望我的外设委托的 didUpdateValueForCharacteristic 在我连接到设备并设置我的外设委托后立即被调用。根据蓝牙标准，这应该发生，但没有发生。我错过了什么还是这是一个 iOS 错误？

请注意，如果我执行 setNotifyValue:forCharacteristic，它会被调用。

# python - Python 中的非阻塞、非并发任务

> ID：11377244
> 
> 赞同：4
> 
> 时间：2012-07-07T17:38:38.447
> 
> 标签：python, multithreading, events

我正在用 Python 实现一个非常小的库，它**必须是**非阻塞的。

在某些生产代码上，在某些时候，将完成对该库的调用，并且它需要完成自己的工作，以最简单的形式，它是一个需要将一些信息传递给服务的可调用对象。

这种“将信息传递给服务”是一项非密集型任务，可能会将一些数据发送到 HTTP 服务或类似的东西。它也不需要并发或共享信息，**但是**它确实需要在某个时候终止，可能会超时。

我以前使用过这个`threading`模块，它似乎是最合适的东西，但是使用这个库的应用程序太大了，我担心会达到线程限制。

在本地测试中，我能够在产生大约 2500 个线程时达到该限制。

很有可能（考虑到应用程序的大小）我可以轻松达到该限制。这也让我厌倦了使用队列，因为在其中高速放置任务会影响内存。

我也看过，`gevent`但我看不到一个能够产生一些可以做一些工作并在不加入的情况下终止的例子。我所经历的例子是调用`.join()`一个生成的`Greenlet`或一组greenlets。

我不需要知道正在完成的工作的结果！它只需要启动并尝试与 HTTP 服务对话，如果没有，它会在合理的超时下死掉。

我是否误解了指南/教程`gevent`？是否有任何其他可能性以完全非阻塞的方式产生一个不能达到 ~2500 限制的可调用对象？

这是 Threading 中的一个简单示例，它可以按我的预期工作：

```
from threading import Thread

class Synchronizer(Thread):

    def __init__(self, number):
        self.number = number
        Thread.__init__(self)

    def run(self):
        # Simulating some work
        import time
        time.sleep(5)
        print self.number

for i in range(4000): # totally doesn't get past 2,500
    sync = Synchronizer(i)
    sync.setDaemon(True)
    sync.start()
    print "spawned a thread, number %s" % i 
```

这就是我用 gevent 尝试过的，它显然会在最后阻塞以查看工人做了什么：

```
def task(pid):
    """
    Some non-deterministic task
    """
    gevent.sleep(1)
    print('Task', pid, 'done')

for i in range(100):
    gevent.spawn(task, i) 
```

*编辑：* 我的问题源于我对`gevent`. 虽然`Thread`代码确实产生了线程，但它也阻止了脚本在执行某些工作时终止。

`gevent`在上面的代码中并没有真正做到这一点，除非你添加一个`.join()`. 为了让`gevent`代码对生成的 greenlets 做一些工作，我所要做的就是让它成为一个长时间运行的过程。这绝对解决了我的问题，因为需要生成 greenlets 的代码是在一个本身就是一个长时间运行的过程的框架内完成的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T17:46:12.407

如果您希望您的主线程比您的任何工作线程持续更长的时间，那么没有什么需要您调用`join`gevent。

调用的唯一原因`join`是确保主线程的持续时间至少与所有工作线程一样长（这样程序就不会提前终止）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:08:51.120

为什么不使用连接的管道或类似的管道生成一个子进程，然后，而不是可调用的，只需将数据放在管道上，让子进程在带外完全处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T01:28:39.237

如[了解 Python 中的异步/多处理中](https://stackoverflow.com/a/11461527/1518559)所述，[asyncoro](http://asyncoro.sourceforge.net)框架支持异步并发进程。您可以运行数万或数十万个并发进程；作为参考，运行 100,000 个简单进程大约需要 200MB。如果您愿意，您可以将系统其余部分的线程和协程与 asyncoro 混合使用（前提是线程和协程不共享变量，但使用协程接口函数发送消息等）。

# java - Java 泛型方法的返回类型

> ID：11377248
> 
> 赞同：33
> 
> 时间：2012-07-07T17:39:10.563
> 
> 标签：java, generics, methods, return-value, enumeration

我想知道为什么`void`（或可以）以这种方式声明不返回任何内容的泛型方法：

```
 public static <E> void printArray( E[] inputArray ) {
     // Display array elements              
     for ( E element : inputArray ){        
        System.out.printf( "%s ", element );
     }
     System.out.println();
   } 
```

看起来像是`<E>`返回对象的类型，但该方法实际上什么也没返回。那么`<E>`在这种情况下具体和一般方法中的真正含义是什么？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-04-04T13:22:06.543

这个问题适合我的旧笔记之一。我希望这个插图有帮助：

![在此处输入图像描述](../Images/33d1143cb0898c20cff8a19e871f3214.png) ![在此处输入图像描述](../Images/bbb3795cff4a0986295806fae64d719b.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-07T17:41:57.170

是`<E>`泛型类型参数声明。它的意思是“这个方法有一个单一的类型参数，叫做`E`，它可以是任何类型”。

它不是返回类型——它出现*在*类型参数声明之后，就在方法名称之前。所以`printArray`你的问题中方法的返回类型仍然是`void`.

有关方法声明的更多详细信息，请参阅[JLS 的第 8.4 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-07T17:41:50.687

它不是返回对象的类型。它表明`E`，在方法签名中，是泛型类型而不是具体类型。没有它，编译器会寻找一个以`E`方法参数命名的类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-07T17:43:11.773

< E > 称为形式类型参数。它不是方法的返回类型。它基本上说该方法可以接受不同类型的参数数组（E [] inputArray）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-07T17:55:14.597

**E**用作在调用此函数时将传递给 Gen 函数的实际类型的占位符。

假设**E**可以用**整数代替**

# vim - 让 Vim 进入语法检查 boost 库

> ID：11377255
> 
> 赞同：3
> 
> 时间：2012-07-07T17:40:12.060
> 
> 标签：vim, boost

我是一个相当新手的程序员，最近开始使用 boost。在成功将库与 cmake 链接后，我注意到我的 vim（我认为是合成插件）在突出语法错误方面做得很好。但是自从我开始包含boost库以来，它就停止在#include语句（没有这样的文件/目录）并且无法在文件的其余部分显示任何语法错误。我到处搜索，但找不到一种解决方法，可以让我在编译阶段之前对错误代码进行语法检查。任何帮助将不胜感激。我无法发布屏幕截图（评分太低），但会发布任何有价值的代码

```
#include <iostream>
#include <boost/regex.hpp>     <--------------syntax error (though it compiles fine)
#include <algorithm>

using namespace std;

void testMatch(const boost::regex& ex,const string st){
  cout<<"Matching" <<st <<endl;
  if(boost::regex_match(ex,st)){
    cout<<"matches"<<endl
  }
  else cout<<"oops"; }

  void testSearch(const boost::regex& ex, const string st){
    cout<<"Searching"<<endl;

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:07:11.370

如果您使用的是 Syntastic 插件，请查看文件

```
syntastic/syntax_checkers/cpp.vim 
```

可以设置许多特定于语言的选项，我认为您想要的是

```
let g:syntastic_cpp_include_dirs=['path/to/boost/files'] 
```

这让语法检查器知道除了默认文件之外，还有其他地方可以查找包含的文件。

# c++ - 在 VS2008 中可视化树

> ID：11377256
> 
> 赞同：12
> 
> 时间：2012-07-07T17:40:29.027
> 
> 标签：c++, visual-studio-2008, tree, visualization

我一直在为我们的一些类型添加可视化工具到 autoexp.dat。即使有[那个每个人都提到的博客](http://www.virtualdub.org/blog/pivot/entry.php?id=120)（甚至是微软的人！），它有时也是一场斗争。

但我完全被#tree 可视化工具难住了。首先，该博客文章的描述似乎充满了漏洞（我没有找到其他材料可以找到地址 - 但其他人显然已经让它工作了）。特别是似乎有一些神奇的情况，它知道取消引用指针 - 但我不能确定我已经反向设计了意图。使用 $c 和 $e 之间似乎也存在一些歧义。AFAICS 它们似乎是可以互换的——也许两者都被允许作为可读性的帮助？或者它们真的意味着不同的东西（例如，那个博客使用 $e，而 VS2008 附带的 stl 可视化工具使用 $c）。

但真正缺少的是对它们如何组合在一起的解释。我会想象它会遵循这个过程：

1.  应用“头”规则以到达起始节点（通过指针）
2.  将 deref 规则（末尾的位）应用于*取消引用*的当前节点以获得可视化的值。
3.  将左右规则应用于*取消引用*的当前节点以分别到达左右节点（通过指针 - 以 null 作为终止符，除非指定了跳过规则）。
4.  转到（2），直到所有节点都被访问过。

显然，我已经忽略了一种用于向左/向右导航的算法。这不是太重要。更重要的是在每个阶段考虑哪些值以及何时取消引用。

这似乎是我能想象到的唯一适合我所见过的例子的过程。但我一直无法让它与我们的树实现一起工作。我只是得到（错误）应该显示#tree 子项的位置（我确实为每个节点得到一个（错误），所以我认为大小被正确捕获）。我已经尝试过我能想到的所有可能的变化 - 最多几次！

令我困惑的另一件事是我见过的许多示例，包括捆绑的 stl 示例，从头导航到父节点（或类似的），并跳过头节点。他们为什么这样做？

这是我正在使用的可视化工具（以我尝试过的一种形式 - 并且名称已更改以保护 ... 公司）：

```
MyTree<*,*,*>{
    children(
        #(
            [raw members]: [$c,!],
            #tree
            (
                head : $c.m_root.m_p,
                size : $c.m_size,
                left : left.m_p,
                right : right.m_p
            ) : $e.value
        )
    )
} 
```

这是我的树类的一些伪代码：

```
MyTree:
    Ptr<Note> m_root
    int m_size

Node:
    ValueT value
    Ptr<Node> left
    Ptr<Node> right 
```

... 其中 Ptr<> 是一个智能指针，将原始指针保存在 m_p 中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:29:34.430

我们开始真的*很*需要这个！所以我开了一个赏金，但我自己继续看。

看来我已经解决了！（就我而言）。我实际上非常接近：

```
MyTree<*,*,*>{
    children(
        #(
            [raw members]: [$c,!],
            #tree
            (
                head : $c.m_root.m_p,
                size : $c.m_size,
                left : left,
                right : right
            ) : $e.value
        )
    )
} 
```

诀窍是 head 规则需要完全指定如何在智能指针中获取原始指针，但 left/right 规则不需要（de-ref 规则也不需要）。

# php - 按下后退按钮时重新提交表单

> ID：11377259
> 
> 赞同：5
> 
> 时间：2012-07-07T17:41:16.577
> 
> 标签：php, html, server-side-scripting

我使用 HTML 和 PHP 制作的联系表格有问题。当用户单击`submit`它时，它会重定向到用户收到消息的另一个页面，“您的消息已发送”。然后它会自动重定向到主页。但是当用户单击`back`按钮时，消息再次出现并重新提交表单。因此，我收到两条相同的消息发送到我的电子邮件！

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T17:46:21.107

查看[防止表单重新提交](https://stackoverflow.com/questions/3923904/preventing-form-resubmission)和[防止返回按钮显示 POST 确认警报](https://stackoverflow.com/questions/660329/prevent-back-button-from-showing-post-confirmation-alert)，您将在其中找到有用的信息如何进行重定向，当单击返回按钮时不会触发重新提交表单。

# hadoop - Hadoop Map Reduce 和 Google Map Reduce 的区别

> ID：11377260
> 
> 赞同：19
> 
> 时间：2012-07-07T17:41:18.020
> 
> 标签：hadoop, mapreduce

Hadoop Map Reduce 和 Google Map Reduce 有什么区别？

仅仅是 Hadoop 为 map reduce 等提供了标准化吗？差异中还有什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-07T17:50:20.863

Google MapReduce 和 Hadoop 是 MapReduce 框架/概念的两个不同实现（实例）。Hadoop 是开源的，Google MapReduce 不是，实际上没有太多可用的细节。

由于它们处理大型数据集，因此它们必须依赖分布式文件系统。Hadoop 使用 HDFS（Hadoop 分布式文件系统）作为标准分布式文件系统，而 Google MapReduce 使用 GFS（Google 文件系统）

Hadoop 是用 java 实现的。Google MapReduce 似乎在 C++ 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T02:09:28.030

Google 通过其 BigQuery 网络服务公开了 Map Reduce 功能。它的工作方式类似于带有 Hive 的 Hadoop（即使用类似 SQL 的语言在后台生成 Map Reduce 作业）。下面显示了一个使用基于浏览器的 Big Query 查询工具的示例。与 Google 将其技术作为公开产品发布的典型做法一样，内部细节不会暴露，您也无法调整或调整设置。您只需使用 API 调用 Web 服务并使用 Google 的基础架构将结果返回给您的应用程序。

![在此处输入图像描述](../Images/fcdcbc8219f89ae9871459ad1d165843.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:18:16.593

您可以查看以下链接：

[http://www.linuxforu.com/2011/03/mapreduce-more-power-less-code-hadoop/](http://www.linuxforu.com/2011/03/mapreduce-more-power-less-code-hadoop/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T07:42:44.363

检查以下链接以了解 HDFS VS GFS

[https://sensaran.wordpress.com/2015/11/24/gfs-vs-hdfs/](https://sensaran.wordpress.com/2015/11/24/gfs-vs-hdfs/)

# ios - 在IOS中按顺序解析JSON

> ID：11377264
> 
> 赞同：2
> 
> 时间：2012-07-07T17:41:46.703
> 
> 标签：ios, json, ios5

我一直在尝试在 IOS5 中按顺序**解析我的 JSON。**它是从服务器按顺序来的，所以我知道不是那样的。这是我的代码：

```
NSArray *userData = [update JSONValue];
NSLog(@"USERDATA%@", userData);
NSEnumerator *enumerator = [userData objectEnumerator];
id key;
while (key = [enumerator nextObject]) {
    NSDictionary *value = key;
    NSString *comment = [value objectForKey:@"comment"];
    NSLog(@"USERCOMMENT %@", comment);
} 
```

第一个 NSLog，一切看起来都很漂亮。第二个 NSLog 让我一切都乱了套。我几乎无计可施。

第一个 NSLOG：

```
USERDATA{
    1 =     {
        comment = "Test 6";
        photoID = 1;
        postedDate = "2 days ago";
        userID = 17;
        userPic = "members/0/image01.png";
        username = kismet;
    };
    2 =     {
        comment = "Test 5";
        photoID = 1;
        postedDate = "2 days ago";
        userID = 17;
        userPic = "members/0/image01.png";
        username = kismet;
    };
    3 =     {
        comment = "Test 4";
        photoID = 1;
        postedDate = "2 days ago";
        userID = 17;
        userPic = "members/0/image01.png";
        username = kismet;
    };
    4 =     {
        comment = "Test 3";
        photoID = 1;
        postedDate = "2 days ago";
        userID = 17;
        userPic = "members/0/image01.png";
        username = kismet;
    };
    5 =     {
        comment = "Test 2";
        photoID = 1;
        postedDate = "2 days ago";
        userID = 17;
        userPic = "members/0/image01.png";
        username = kismet;
    };
    6 =     {
        comment = "Test 1";
        photoID = 1;
        postedDate = "2 days ago";
        userID = 17;
        userPic = "members/0/image01.png";
        username = kismet;
    };
} 
```

第二个NSLog：

```
USERCOMMENT Test 4
USERCOMMENT Test 6
USERCOMMENT Test 1
USERCOMMENT Test 3
USERCOMMENT Test 5
USERCOMMENT Test 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:00:04.253

问题是您的顶级对象不是 NSArray，而是 NSDictionary。如果你发回一个数组，那将正常工作。另一种方法是获取顶级字典的键并在迭代之前对其进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:58:43.863

字典的条目是无序的。当您遍历字典时，您可以按任何顺序获取键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:00:38.487

你不能这样做，除非你编写自己的 JSON 解析器。任何自尊的 JSON 库都不能保证你的顺序，如果它想符合 JSON 规范。

从 JSON 对象的定义来看：

> 键值对的无序集合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T21:26:19.750

对于那些仍然对解决方案感兴趣的人：

```
NSDictionary *userData = [update JSONValue];
NSArray *keys = [[userData allKeys] sortedArrayUsingSelector:@selector(compare:)];
NSMutableArray *array = [NSMutableArray arrayWithCapacity: [keys count]];

int i = 0;
for (NSString *key in keys) {
    [array addObject: [userData objectForKey: key]];
    i++;
}

for (NSDictionary *myDict in array) {
    NSString *comment = [myDict objectForKey:@"comment"];
    NSLog(@"USERCOMMENT %@", comment);
} 
```

按顺序返回 JSON：

```
USERCOMMENT Test 6
USERCOMMENT Test 5
USERCOMMENT Test 4
USERCOMMENT Test 3
USERCOMMENT Test 2
USERCOMMENT Test 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T18:42:45.447

这可能与您无关，但我总是在服务器上进行排序并发回有序的 JSON 字符串。

# c++ - 如何确定请求了哪个编译器

> ID：11377274
> 
> 赞同：5
> 
> 时间：2012-07-07T17:42:33.830
> 
> 标签：c++, python, scons

我的项目使用 SCons 来管理构建过程。我想支持多个编译器，所以我决定使用`AddOption`这样用户可以指定在命令行上使用哪个编译器（默认是他们当前的编译器）。

```
AddOption('--compiler', dest = 'compiler', type = 'string', action = 'store', default = DefaultEnvironment()['CXX'], help = 'Name of the compiler to use.') 
```

我希望能够为各种编译器提供内置编译器设置（包括该特定编译器的最大警告级别等内容）。这是我目前第一次尝试解决方案的样子：

```
if is_compiler('g++'):
    from build_scripts.gcc.std import cxx_std
    from build_scripts.gcc.warnings import warnings, warnings_debug, warnings_optimized
    from build_scripts.gcc.optimizations import optimizations, preprocessor_optimizations, linker_optimizations
elif is_compiler('clang++'):
    from build_scripts.clang.std import cxx_std
    from build_scripts.clang.warnings import warnings, warnings_debug, warnings_optimized
    from build_scripts.clang.optimizations import optimizations, preprocessor_optimizations, linker_optimizations 
```

但是，我不确定该`is_compiler()`功能是什么样的。我的第一个想法是直接将编译器名称（例如“clang++”）与用户传入的内容进行比较。但是，当我尝试使用`scons --compiler=~/data/llvm-3.1-obj/Release+Asserts/bin/clang++`.

所以我想我会变得更聪明一点并使用这个功能

```
cxx = GetOption('compiler')
def is_compiler (compiler):
    return cxx[-len(compiler):] == compiler 
```

这只会查看编译器字符串的末尾，因此它会忽略目录。不幸的是，“clang++”以“g++”结尾，所以我的编译器被认为是g++而不是clang++。

我的下一个想法是进行向后搜索并查找第一次出现的路径分隔符（'\' 或 '/'），但后来我意识到这不适用于拥有多个编译器版本的人。使用“g++-4.7”编译的人不会注册为 g++。

那么，是否有一些简单的方法可以确定请求了哪个编译器？

目前，由于它们对 c++11 的支持，仅支持 g++ 和 clang++（并且仅支持它们最近发布的版本），因此目前仅适用于这两者的解决方案就足够了。但是，我的最终目标是至少支持 g++、clang++、icc 和 msvc++（一旦它们支持所需的 c++11 特性），因此首选更通用的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:53:48.540

编译器只是构建过程的一部分。您还需要链接器工具，并且可能是其他附加程序。在 Scons 中，它被命名为 - Tool。`from box`您可以在[手册页](http://scons.org/doc/production/HTML/scons-man.html)中查看支持的工具列表，按语句搜索：`SCons supports the following tool specifications out of the box:`...工具集必要的 scons 环境变量，[在此处](http://scons.org/doc/production/HTML/scons-user/a8773.html)记录。

Scons 会自动检测操作系统中的编译器并优先选择其中之一，当然如果 PATH 变量设置为必要的目录，自动检测将正常工作。例如你在 windows 上有 msvc 和 mingw，scons 选择 msvc 工具。强制使用工具使用 Tool('name')(env)。例如：

```
env = Environment()
Tool('mingw')(env) 
```

现在`env`强制使用mingw。

因此，clang 是目前`from box`scons 不支持的工具之一。您需要实现它，或者设置环境变量，例如 CC、CXX，它们使用 scons 生成构建命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T20:41:13.193

您可以只使用[此处](http://docs.python.org/library/os.path.html)指定的 Python`os.path.basename()`或函数。`os.path.split()`

您可以通过将这个问题分成 2 个不同的问题来做人们在评论中建议的事情，但我认为能够使用编译器指定路径可能是个好主意，因为您可以安装 2 个版本的 g++，如果用户只指定 g++，他们可能得不到预期的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T04:41:44.083

这个问题导致了一个可以处理这个问题的 SCons 项目的开发：

[https://bitbucket.org/davidstone/scons-template/](https://bitbucket.org/davidstone/scons-template/)

相关代码在`build_scripts/compiler_settings.py`. SCons 选项在 SConstruct 文件中使用以下几行设置：

```
AddOption('--compiler', dest = 'compiler', type = 'string', action = 'store', help = 'Name of the compiler to use.')
AddOption('--compiler-command', dest = 'compiler_command', type = 'string', action = 'store', help = 'Command to launch the compiler.') 
```

用户可以指定 0、1 或 2 个命令行选项。

如果您不指定任何内容 ( `scons`)，那么它将使用来自 DefaultEnvironment 的编译器进行构建。

您可以选择指定编译器的名称 ( `scons --compiler=g++`)。然后我的脚本假定用于编译的命令与名称相同。

您还可以选择指定要编译的命令 ( `scons --compiler-command=~/llvm-3.1-obj/Release+Asserts/bin/clang++`)。然后我的脚本假定您正在使用的编译器的名称是可执行文件的名称（最终目录分隔符之后的所有内容，由 by 确定`os.path.basename`）。

您可以同时指定两者。这使您可以处理奇怪的情况：`scons --compiler-command=/path/to/executable/that/is/not/clang++ --compiler=g++`

它使用名称来确定要打开哪些警告/优化。我什至在名称上添加了一些规范化，因此就编译器名称而言，g++、gcc 和 GcC 都被视为同一事物。

它还有很多工作要做，比如支持更多编译器，更好地支持mingw编译器，以及检测编译器版本以便更好地处理只有xyz+版本才有的标志。如果我可以做类似的事情`scons --compiler-command=/path/to/gcc-4.7.1`并让它检测到编译器是 gcc 而我不必明确告诉它，那也很好。

但是，它解决了我打算解决的最初问题。这要归功于 Voo 在评论中让我走上正轨。

# c++ - 指向成员的指针，在类内

> ID：11377283
> 
> 赞同：1
> 
> 时间：2012-07-07T17:43:38.377
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, template-meta-programming

我正在尝试从类中为需要指向成员的指针的模板创建 typedef。描述它的最好方法是显示最小的示例代码：

```
template<typename T, int T::*MV>
struct Bar
{
    const int &value(const T &t) const
    {
         return (t.*MV);
    }
};

struct Foo
{
    int baz;

    typedef Bar<Foo, &Foo::baz> GetBaz; // Compiler error
};

typedef Bar<Foo, &Foo::baz> GetFooBaz; // Compiles just fine

int main(int argc, char* argv[])
{
    Foo f = { 42 };
    Foo::GetBaz b; // Fails to compile
    GetFooBaz b2; // Fine

    int val = b.value(f); // Fails to compile because of above
    int val2 = b2.value(f); // Fine
} 
```

我不一定要以这种方式访问​​成员指针，只要知道变量的偏移量并让 Bar::value 函数执行诡计就可以了。

作为最后的手段，我想我可以使用一个特征类，因为它会将定义移到类之外，但我希望能够在所使用的变量附近声明 typedef。

而且，为了回答“你为什么要这样做”的问题，这一切都是为了一个 IoC 容器，它紧密地代表了 MEF（C# 的工作方式）。

我正在使用的特定编译器是 VC12，但如果 VC11 也支持它会很好。

谢谢

编辑：

这是错误消息

1>----- 构建开始：项目：MemVarBug，配置：调试 Win32 ------ 1> MemvarBug.cpp 1>memvarbug.cpp(20): error C2327: 'Foo::baz' : is不是类型名称、静态或枚举数 1>memvarbug.cpp(20): error C2065: 'baz' : undeclared identifier 1>memvarbug.cpp(20): error C2975: 'MV' : 'Bar' 的模板参数无效, 预期的编译时常量表达式 1> memvarbug.cpp(7) : 见 'MV' 的声明 ========== 构建: 0 成功, 1 失败, 0 最新, 0 跳过 = =========

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:49:44.327

您可以执行以下技巧：将 baz 声明为 int[1]; 大小为 1 的数组，在这种情况下，调用 baz 将返回指针，调用 *baz 将返回值。

# xamarin.ios - MonoTouch.Dialog 双

> ID：11377284
> 
> 赞同：1
> 
> 时间：2012-07-07T17:43:48.080
> 
> 标签：xamarin.ios, monotouch.dialog

我经常使用 .net`propertyGrid`来编辑对象。

MonoTouch.Dialog 为 iOS 提供了许多相同的功能。但它需要一种方法来简单地允许显示和编辑双精度。Float 使用轨迹栏 - 有时很有用，但不适用于输入价格等数据。我错过了什么吗？

# javascript - jQuery日期差异

> ID：11377285
> 
> 赞同：-1
> 
> 时间：2012-07-07T17:44:04.017
> 
> 标签：javascript, jquery

我有这段代码用于计算两个输入字段之间的日期差异（不包括周末），并在第三个文本框中打印天数差异。日期格式为 yy-mm-dd（因为 mysql）。

```
<script type="text/javascript">

    $("#vazi_od, #vazi_do").change(function() {       

    var d1 = $("#vazi_od").val();
    var d2 = $("#vazi_do").val();

            var minutes = 1000*60;
            var hours = minutes*60;
            var day = hours*24;

            var vazi_od1 = getDateFromFormat(d1, "yy-mm-dd");
            var vazi_do1 = getDateFromFormat(d2, "yy-mm-dd");

            var newvazi_od=new Date();
            newvazi_od.setFullYear(vazi_od1.getYear(),vazi_od1.getMonth(),vazi_od1.getDay());
            var newvazi_do=new Date();
            newvazi_do.setFullYear(vazi_do1.getYear(),vazi_do1.getMonth(),vazi_do1.getDay());
            var days = calcBusinessDays(newvazi_od,newvazi_do);
      if(days>0)
    { $("#razlika").val(days);}
    else
    { $("#razlika").val(0);}
 });
 </script> 
```

但是，当我选择开始日期和结束日期时，该字段中没有发生任何应该显示天数差异的事情......有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:49:19.780

您正在使用`setFullYear`传递所有日期参数...

`setFullYear`仅用于设置日期的年份部分..

利用

```
var newvazi_od=new Date(vazi_od1.getYear(),vazi_od1.getMonth(),vazi_od1.getDay());
var var newvazi_do=new Date(vazi_do1.getYear(),vazi_do1.getMonth(),vazi_do1.getDay()); 
```

也可以使用`getDateFromFormat`，`calcBusinessDays`您需要包含[javascript 工具箱中的日期库](http://mattkruse.com/javascript/date/)

# mysql - 使用大型数据集和 ruby

> ID：11377289
> 
> 赞同：3
> 
> 时间：2012-07-07T17:44:26.473
> 
> 标签：mysql, ruby-on-rails-3

真的可以在这里使用一些帮助。难以显示包含大数据的仪表板。

使用@ 2k 记录时，平均@ 2 秒。

MySql Console 中的查询不到 3.5 秒即可返回 150k 行。Ruby 中的相同查询从执行查询到所有对象都准备好需要超过 4 分钟。

目标：在添加缓存服务器之前进一步优化数据。使用 Ruby 1.9.2、Rails 3.0 和 Mysql (Mysql2 gem)

问题：

*   使用哈希会损害性能吗？
*   我是否应该首先将所有内容放在一个主哈希中，然后再操作我需要的数据？
*   我还能做些什么来帮助提高性能吗？

数据库中的行：

*   GasStations 和美国人口普查有 @ 150,000 条记录
*   人有@ 100,000条记录
*   汽车有@ 200,000条记录
*   FillUps有@ 230万

仪表板必需（基于过去 24 小时、上周等时间段的查询）。JS 以 JSON 格式返回的所有数据。

*   加油站，带有加油站和美国人口普查数据（邮政编码、名称、城市、人口）
*   填满最多的前 20 个城市
*   加油量排名前 10 位的汽车
*   汽车按油箱加满次数分组

代码（6 个月的样本。返回 @ 100k + 记录）：

```
# for simplicity, removed the select clause I had, but removing data I don't need like updated_at, gas_station.created_at, etc. instead of returning all the columns for each table.
@primary_data = FillUp.includes([:car, :gas_staton, :gas_station => {:uscensus}]).where('fill_ups.created_at >= ?', 6.months.ago) # This would take @ 4 + minutes

# then tried

@primary_data = FillUp.find_by_sql('some long sql query...') # took longer than before.
# Note for others, sql query did some pre processing for me which added attributes to the return.  Query in DB Console took < 4 seconds.  Because of these extra attributes, query took longer as if Ruby was checking each row for mapping attributes

# then tried

MY_MAP = Hash[ActiveRecord::Base.connection.select_all('SELECT thingone, thingtwo from table').map{|one| [one['thingone'], one['thingtwo']]}] as seen http://stackoverflow.com/questions/4456834/ruby-on-rails-storing-and-accessing-large-data-sets
# that took 23 seconds and gained mapping of additional data that was processing later, so much faster

# currently using below which takes @ 10 seconds
# All though this is faster, query still only takes 3.5 seconds, but parsing it to the hashes does add overhead.
cars = {}
gasstations = {}
cities = {}
filled = {}

client = Mysql2::Client.new(:host => "localhost", :username => "root")
client.query("SELECT sum(fill_ups_grouped_by_car_id) as filled, fillups.car_id, cars.make as make, gasstations.name as name,  ....", :stream => true, :as => :json).each do |row|
  # this returns fill ups gouged by car ,fill_ups.car_id, car make, gas station name, gas station zip, gas station city, city population 
  if cities[row['city']]
    cities[row['city']]['fill_ups']  = (cities[row['city']]['fill_ups']  + row['filled'])
  else
    cities[row['city']] = {'fill_ups' => row['filled'], 'population' => row['population']}
  end
  if gasstations[row['name']]
    gasstations[row['name']]['fill_ups'] = (gasstations[row['name']]['fill_ups'] + row['filled'])
  else
    gasstations[row['name']] = {'city' => row['city'],'zip' => row['city'], 'fill_ups' => row['filled']}
  end
  if cars[row['make']]
    cars[row['make']] = (cars[row['make']] + row['filled'])
  else
    cars[row['make']] = row['filled']
  end
  if row['filled']
    filled[row['filled']] = (filled[row['filled']] + 1)
  else
    filled[row['filled']] = 1
  end
end 
```

有以下型号：

```
def Person
 has_many :cars 
end

def Car
  belongs_to :person
  belongs_to :uscensus, :foreign_key => :zipcode, :primary_key => :zipcode
  has_many :fill_ups
  has_many :gas_stations, :through => :fill_ups
end

def GasStation
  belongs_to :uscensus, :foreign_key => :zipcode, :primary_key => :zipcode
  has_many :fill_ups
  has_many :cars, :through => :fill_ups
end

def FillUp
  # log of every time a person fills up there gas
  belongs_to :car
  belongs_to :gas_station
end

def Uscensus
  # Basic data about area based on Zip code
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:42:05.857

我不使用 RoR，但是为仪表板返回 100k 行永远不会很快。我强烈建议构建或维护汇总表并`GROUP BY`在数据库中运行 s 以在演示之前汇总您的数据集。

# ruby-on-rails - 资产管道：在预编译时更改资产主机的值

> ID：11377291
> 
> 赞同：2
> 
> 时间：2012-07-07T17:45:28.003
> 
> 标签：ruby-on-rails, asset-pipeline

有没有办法在 Rails 3.2 的预编译（rake assets:precompile）期间覆盖 config.asset_host 的值？

# objective-c - 从屏幕外 NSView 生成缩放图像

> ID：11377293
> 
> 赞同：6
> 
> 时间：2012-07-07T17:45:42.283
> 
> 标签：objective-c, macos, cocoa, nsview

我在 Cocoa 应用程序中有一系列屏幕外 NSView，它们用于编写 PDF 以进行打印。视图不在 NSWindow 中，或以任何方式可见。

我希望能够生成该视图的缩略图，就像 PDF 看起来一样，但按比例缩小以适合某个像素大小（限制为宽度或高度）。这需要尽可能快，所以我想避免渲染为 PDF，然后转换为光栅和缩放 - 我想直接转到光栅。

目前我正在做：

```
NSBitmapImageRep *bitmapImageRep = [pageView bitmapImageRepForCachingDisplayInRect:pageView.bounds];
[pageView cacheDisplayInRect:pageView.bounds toBitmapImageRep:bitmapImageRep];
NSImage *image = [[NSImage alloc] initWithSize:bitmapImageRep.size];
[image addRepresentation:bitmapImageRep]; 
```

这种方法效果很好，但我不知道如何在渲染 bitmapImageRep 之前对 NSView 应用缩放。我想避免使用`scaleUnitSquareToSize`，因为据我了解，它只会改变边界，而不是 NSView 的框架。

关于这样做的最佳方法有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T15:48:48.760

这就是我最终做的，效果很好。我们直接绘制到 中，但事先`NSBitmapImageRep`显式地缩放上下文。为您提供.`CGContextScaleCTM``graphicsContext.graphicsPort``CGContextRef``NSGraphicsContext`

```
NSView *pageView = [self viewForPageIndex:pageIndex];

float scale = width / pageView.bounds.size.width;
float height = scale * pageView.bounds.size.height;

NSRect targetRect = NSMakeRect(0.0, 0.0, width, height);
NSBitmapImageRep *bitmapRep;

bitmapRep = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:nil
                                                    pixelsWide:targetRect.size.width
                                                    pixelsHigh:targetRect.size.height
                                                 bitsPerSample:8
                                               samplesPerPixel:4
                                                      hasAlpha:YES
                                                      isPlanar:NO
                                                colorSpaceName:NSCalibratedRGBColorSpace
                                                  bitmapFormat:0
                                                   bytesPerRow:(4 * targetRect.size.width)
                                                  bitsPerPixel:32];

[NSGraphicsContext saveGraphicsState];

NSGraphicsContext *graphicsContext = [NSGraphicsContext graphicsContextWithBitmapImageRep:bitmapRep];
[NSGraphicsContext setCurrentContext:graphicsContext];
CGContextScaleCTM(graphicsContext.graphicsPort, scale, scale);

[pageView displayRectIgnoringOpacity:pageView.bounds inContext:graphicsContext];

[NSGraphicsContext restoreGraphicsState];

NSImage *image = [[NSImage alloc] initWithSize:bitmapRep.size];
[image addRepresentation:bitmapRep];

return image; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:58:57.810

使用`scaleUnitSquareToSize:`然后将较小的矩形传递给`bitmapImageRepForCachingDisplayInRect:`and`cacheDisplayInRect:toBitmapImageRep:`怎么样？

因此，如果您将其缩小 2 倍，您将传递一个带有边界和高度的半边矩形。

# java - BoneCP 语句句柄不能转换为 JDBC

> ID：11377295
> 
> 赞同：0
> 
> 时间：2012-07-07T17:46:00.507
> 
> 标签：java, sql, jdbc, bonecp

我正在尝试设置 boneCP 连接，但收到以下错误消息：

线程“主”java.lang.ClassCastException 中的异常：com.jolbox.bonecp.StatementHandle 无法转换为 com.mysql.jdbc.Statement

连接似乎工作正常，但我在查询中被阻止了。

这是我的代码：

```
 BoneCP connectionPool = null;
    Connection connection = null;

    try {
        // load the database driver (make sure this is in your classpath!)
        Class.forName("com.mysql.jdbc.Driver");
    } catch (Exception e) {
        e.printStackTrace();
        return;
    }

    try {
        // setup the connection pool
        BoneCPConfig config = new BoneCPConfig();
        config.setJdbcUrl("jdbc:mysql://192.126.0.0:3306/"); // jdbc url specific to your database, eg jdbc:mysql://127.0.0.1/yourdb
        config.setUsername("root"); 
        config.setPassword("");
        config.setMinConnectionsPerPartition(5);
        config.setMaxConnectionsPerPartition(10);
        config.setPartitionCount(1);
        connectionPool = new BoneCP(config); // setup the connection pool

        connection = connectionPool.getConnection(); // fetch a connection

        if (connection != null){
            System.out.println("Connection successful!");
            Statement stmt = (Statement) connection.createStatement();
            ResultSet rs = stmt.executeQuery("SELECT 1 FROM table"); // do something with the connection.
            while(rs.next()){
                System.out.println(rs.getString(1)); // should print out "1"'
            }
        }
        connectionPool.shutdown(); // shutdown connection pool.
    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        if (connection != null) {
            try {
                connection.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:23:13.430

这很简单：如果您使用 BoneCP，则无法直接访问底层驱动程序的对象。这通常适用于连接池，因为它们通常使用对象代理来处理资源管理（例如，当连接返回池时，关闭语句、结果集等）。这尤其适用于语句，因为连接池可以（并且通常会）也提供语句缓存。

特别是对于 BoneCP，您应该能够使用包装的语句[`StatementHandle.getInternalStatement()`](http://jolbox.com/bonecp/downloads/site/apidocs/com/jolbox/bonecp/StatementHandle.html#getInternalStatement%28%29)（尽管我对此不是 100% 确定）。

尽管最大的问题是：为什么需要强制转换为`com.mysql.jdbc.Statement`，但`java.sql.Statement`界面对您来说还不够吗？

# android - SharedPreference 或 SQLite 数据库

> ID：11377301
> 
> 赞同：1
> 
> 时间：2012-07-07T17:46:32.753
> 
> 标签：android, storage, sharedpreferences

我正在尝试制作一个应用程序，用户可以在其中存储 x 个闹钟时间。

另一个用户下次打开时，会显示之前的所有时间序列……他可以选择一个序列，警报总数，并更改第一个警报时间。

我将最多保存 10 个这样的序列。哪个更适合存储这些数据......`SharedPreferences`还是`SQLite`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:59:55.313

如果记录仅限于 10 条，那么`SharedPreferences`它是最佳选择，因为它易于实施，快速且快速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T17:55:02.517

在此处使用`SQLite`您的要求教程：[SQLite 教程](http://www.vogella.com/articles/AndroidSQLite/article.html)和文档：[Android SQLite 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T18:22:24.380

**SharedPreferences**旨在存储**少量数据**，而**SQLite**用于存储**大量数据**。

因此，对于这种情况，如果您每次最多只有 10 个数据，那么您可以使用 SharedPreferences，但**如果您不知道数据的数量（可能取决于您的应用用户），那么 SQLite 是更好的选择**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T03:25:44.140

Shared Preferences 更适合这种情况（max=10 次）

# php - 选择带有月份和年份条件的查询

> ID：11377305
> 
> 赞同：1
> 
> 时间：2012-07-07T17:47:22.043
> 
> 标签：php, mysql

我这里有两个查询条件，我认为这些查询会产生相同的数据，但事实并非如此。

```
// 1st Condition:
WHERE month(jurnal.time) >= '01'
  AND month(jurnal.time) <= '06'
  AND year(jurnal.time)   = '2012'

// 2nd Condition:
WHERE jurnal.time  > '2012-01-01'
  AND jurnal.time <= '2012-06-30' 
```

我希望第一个条件产生与第二个条件相同的数据。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:24:46.523

1.  您的第一个版本包括`jurnal.time = '2012-01-01'`，而您的第二个条件不包括（由于使用`>`而不是`>=`）。

2.  从您的问题中不清楚该`jurnal.time`列的数据类型是什么：

    *   如果是`DATETIME`or `TIMESTAMP`，则您的第二个示例将不会`00:00:00`在 6 月 30 日之后的任何时间包含在内，因此必须改为仅采用日期部分：

        ```
        WHERE DATE(jurnal.time) BETWEEN '2012-01-01' AND '2012-06-30' 
        ```

        或者确保比较包括一天中的所有时间：

        ```
        WHERE jurnal.time BETWEEN '2012-01-01 00:00:00' AND '2012-06-30 23:59:59' 
        ```

    *   如果是`DATE`，这一点不会影响您的示例，但仍然可以将您的第二个示例简化为：

        ```
        WHERE jurnal.time BETWEEN '2012-01-01' AND '2012-06-30' 
        ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:01:06.653

我推荐使用 CAST 的 BETWEEN 比较运算符：

```
WHERE jurnal.time BETWEEN CAST('2012-01-01' AS DATE) AND CAST ('2012-06-30' AS DATE) 
```

确保将 stings 转换为与 jurnal.time 列相同的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:02:30.390

您在第一个查询中的条件试图比较它们是从日期解析函数返回的值的数字，但我认为它们只是字符串。'01' 和 '06' 被 sql 插入为纯字符串，而不是数字 1 和 6。

第二个是 sql 足够聪明，可以将完整的日期字符串表示形式转换为用于比较的日期。

# ruby-on-rails - rails 3.2 javascript_include_tag 带有'cache => true'选项

> ID：11377306
> 
> 赞同：1
> 
> 时间：2012-07-07T17:47:32.633
> 
> 标签：ruby-on-rails, asset-pipeline

我正在使用导轨 3.2.5。我使用 'cache => true' 选项来组合 javascript 文件。我写了以下代码。

```
<%= javascript_include_tag "a.js", "b.js", :cache => true %> 
```

尝试加载页面时出现以下错误。

```
No such file or directory - Asset file not found at '/home/MyProjectPath/public/javascripts/home/MyProjectPath/app/assets/javascripts/a.js' 
```

a.js 和 b.js 位于“app/assets/javascripts/”中。

如果我使用此代码，

```
<%= javascript_include_tag "a.js", "b.js" %> 
```

它工作正常。但它们仍然是单独的 javascript 文件。

如何使用 :cache 选项合并 javascript 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T13:45:49.243

我认为您正在寻找的是 :compress ，而不是 :cache 。您收到的错误消息是因为“：缓存”选项已被删除，请参阅以下注释： [http ://edgeguides.rubyonrails.org/asset_pipeline.html#in-production](http://edgeguides.rubyonrails.org/asset_pipeline.html#in-production)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:02:34.163

使您的资产在 application.rb 文件中启用 false

```
config.assets.enabled = false 
```

# android - 在 OS X 中开始 OpenGL 3.0+ 编程（再次），针对多个平台

> ID：11377308
> 
> 赞同：1
> 
> 时间：2012-07-07T17:48:13.407
> 
> 标签：android, ios, macos, graphics, opengl-3

如果这个主题是重复的，我很抱歉，但我在任何地方都找不到我要问的信息。

我开始学习 OpenGL，几年前我什至使用 OpenGL ES 1.1 为 iOS 制作了一个非常简单的游戏。但是，我已经放弃了它，转而支持其他项目。我检查的最后一个 OpenGL 版本是 2.1，坦率地说，我只是检查了它，并没有给它太多关注，然后就放弃了我的全职 iOS 工作。

现在，我想重新捡起它。不过我手上的书涵盖了OpenGL 2.5（红皮书）、OpenGL ES 2.0（我没机会打开）和OpenGL Shading language（记不清是哪一本了，但我同时买的）我买了红皮书）。我读过 OpenGL 3.0 及更高版本极大地改变了渲染管道，使其完全可编程，这就是为什么它放弃了对旧功能的支持，也摆脱了过时和臃肿的功能。

我有两台装有 OS X 10.7.4 的电脑，一台装有 GeForce 9400M 的 Macbook 和一台装有 ATI Radeon HD 6750 Mobility 的 iMac，我认为它们都符合 OpenGL 3.0（至少在大多数功能方面）。

给出所有这些信息，这是我的主要问题：

1.  OpenGL 3.0+ 有什么好的入门教程吗？
2.  OS X 的 OpenGL 3.0 + 中是否有任何好的启动教程？我能找到的只是固定管道的过时教程
3.  我已经拥有的书籍是否会对我有所帮助，或者由于 OpenGL 管道的转变，我是否需要购买它们的最新版本？
4.  有什么我误解或遗漏的吗？

我的目标主要是 OS X、iOS 和 Android，因此我对特定于平台的资源和信息不感兴趣。我知道每个平台都有自己的 OpenGL API 实现和扩展，但我希望尽可能独立于平台。我没有在我的问题中指定任何语言，因为我精通 C/C++/ObjC 并且 Android OpenGL Java 实现与我听到的没有什么不同。

时间不是问题，我的数学/编程技能也不是问题。而且我也不想在学习OpenGL的基础知识之前学习如何使用OpenGL周围的任何包装器/框架，然后再学习围绕它的抽象概念和框架。

提前感谢您可以就此事向我提供的所有信息和指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:00:29.117

对问题 3 的回答：

Aaftab Munshi的[OpenGL ES 2.0 Programming Guide](https://rads.stackoverflow.com/amzn/click/com/0321502795)是一本关于 OpenGL ES 2.0 的优秀书籍。由于 OpenGL ES 2.0 大致是 OpenGL 3.0+ 的一个子集，这本书可能对 OpenGL 3.0+ 开发人员也很有用。

没有关于 OpenGL 3.0+ 的真正好书。目前可用的 OpenGL 红皮书版本主要关注旧式不推荐使用的 OpenGL 编程，不推荐使用。[新版本](https://rads.stackoverflow.com/amzn/click/com/0321773039)的 OpenGL 红皮书将于 2013 年 1 月推出，其中包含 85% 的新材料并专注于现代 OpenGL 编程。等待红皮书，直到那时。

# c - strtoll/_strtoi64 参数问题

> ID：11377309
> 
> 赞同：1
> 
> 时间：2012-07-07T17:48:13.733
> 
> 标签：c, string, string-parsing

我无法理解这段代码：

```
static long long _be_decode_int(const char **data, long long *data_len)
{
    char *endp;
    long long ret = strtoll(*data, &endp, 10);
    *data_len -= (endp - *data);
    *data = endp;
    return ret;
} 
```

我已更改`strtoll`为，`_strtoi64`因为我在 Windows 上编程并相信它们执行相同的功能。

根据[_strtoi64 的 MSDN 页面](http://msdn.microsoft.com/en-us/library/h80404d3%28v=vs.80%29.aspx)，第二个参数应该是指向结束字符串的字符的指针。如果`endp`只是刚刚宣布，它指的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:51:46.340

它是一个“结果参数”——你不必在指针中放任何东西，函数返回后它会指向数字后面的字符。

编辑：这也是您传递 &endp 而不仅仅是 endp 的原因——该函数需要一个“指向指针的指针”，以便它可以填充指针值

# c++ - 内联汇编算法问题

> ID：11377310
> 
> 赞同：1
> 
> 时间：2012-07-07T17:48:19.867
> 
> 标签：c++, visual-studio-2010, assembly, io, x86

**编辑：** 符号扩展解决了我的除法和模数问题，一个愚蠢的错字修复了我的 or。我的阶乘确实显示了我想要的 0 和 0x0...0 但我仍然对如何在阶乘结果之前输出那句话感到困惑。我删除了大部分关于阶乘的不必要代码。基本上，如何在汇编中打印字符串？谷歌今天不是我的朋友

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char message[] = "Factorial input must be a positive integer >=1";

int calc (int op1, int op2, int opcode)
{
__asm
{
    mov eax, 0          ; zero out the result
    mov ebx, opcode     ; move opcode to ebx for comparison

    cmp ebx, 0x01       ; check for ADD
    jne sub_2           ;
    mov eax, op1        ;
    add eax, op2        ;
    jmp done            ;

sub_2:
cmp ebx, 0x02       ;check for subtract
jne mul_3           ;
mov eax, op1        ;
sub eax, op2        ;
jmp done            ; 

mul_3:
cmp ebx, 0x03       ;check for multiply
jne div_4           ;
mov eax, op1        ;
mul op2             ; 
jmp done            ;

div_4:
cmp ebx, 0x04       ;check for divide
jne mod_5
xor edx, edx        ; zero out the register
mov eax, op1
div op2
jmp done

mod_5:
cmp ebx, 0x05       ;check for modulus
jne and_6
xor edx, edx        ; zero out the register
mov eax, op1
div op2
mov eax, edx
jmp done

and_6:
cmp ebx, 0x06       ;check for &
jne or_7
xor edx, edx        ; zero out the register
mov eax, op1
and eax, op2
jmp done

or_7:
cmp ebx, 0x07        ;check for |
jne xor_8
xor edx, edx         ; zero out the register
mov eax, op1
xor eax, op2
jmp done

xor_8:
cmp ebx, 0x08       ;check for xor
jne fac_9
xor edx, edx        ; zero out the register
mov eax, op1
xor eax, op2
jmp done

fac_9:
cmp ebx, 0x09       ;check for !
jne done;
xor edx, edx        ; zero out the register
mov eax, op1
cmp eax, 0
jl error
wp1:
mov ecx, op1
DEC ecx
mov ebx, 1
L1:
mul ebx
INC ebx
LOOP L1
jmp done

error:
    mov eah, 9h            ;no clue how to
    lea eax, message       ;print a message in assembly
    jmp wp1

done:
};
} 
```

我在负输入方面遇到了一些问题。当我对 op1 有负阶乘时，当它应该打印出消息“阶乘输入...> = 1”时它只会崩溃和烧毁，然后只返回 0。此外，负输入我的除法、模数和或结果错了。

这是我应该得到的

```
Operand 1 = -10    Operand 2 = -5
Add:        -15   xfffffff1
Sub:         -5   xfffffffb
Mul:         50   x00000032
Div:          2   x00000002
Mod:          0   x00000000
And:        -14   xfffffff2
Or:          -1   xffffffff
Xor:         13   x0000000d
Error: Factorial input must be a positive integer >=1
Fac:          0   x00000000 
```

以及我得到的。

```
Operand 1 = -10    Operand 2 = -5
Add:        -15   xfffffff1
Sub:         -5   xfffffffb
Mul:         50   x00000032
Div:          0   x00000000
Mod:        -10   xfffffff6
And:        -14   xfffffff2
Or:          13   x0000000d
Xor:         13   x0000000d
**crashes** 
```

有什么帮助吗？我在 x86 中使用 Visual Studio c++

# android - BackupManager 不调用备份传输

> ID：11377313
> 
> 赞同：22
> 
> 时间：2012-07-07T17:49:03.790
> 
> 标签：android, backup, sharedpreferences, android-backup-service

好的，所以我正在尝试在我的应用程序中实现数据备份，并且一直在遵循[本指南](http://developer.android.com/guide/topics/data/backup.html#Testing)。我已经实现了我的`BackupAgentHelper`使用`SharedPreferencesBackupHelper`。我没有收到任何错误，并且我肯定会`dataChanged()`在所有首选项更改后调用，但是当我测试备份（`adb shell bmgr run）时，我在 LogCat 中获得了以下信息：

```
07-07 12:29:00.258: V/BackupManagerService(291): Scheduling immediate backup pass
07-07 12:29:00.258: V/BackupManagerService(291): Running a backup pass
07-07 12:29:00.258: V/BackupManagerService(291): clearing pending backups
07-07 12:29:00.258: V/PerformBackupTask(291): Beginning backup of 1 targets
07-07 12:29:00.289: V/BackupServiceBinder(291): doBackup() invoked
07-07 12:29:00.289: D/PerformBackupTask(291): invokeAgentForBackup on @pm@
07-07 12:29:00.297: I/PerformBackupTask(291): no backup data written; not calling transport 
```

因此，作为参考，我在清单中添加了：

```
<application
        android:allowBackup="true"
        android:backupAgent="com.kcoppock.sudoku.SudokuBackupAgent" 
```

也

```
<meta-data
        android:name="com.google.android.backup.api_key"
        android:value="my_key_goes_here" /> 
```

我的 BackupAgentHelper 是这样实现的：

```
public class SudokuBackupAgent extends BackupAgentHelper {
    static final String SCORES = "SCORES";
    static final String BACKUP_ID = "sudoku_backup";

    @Override
    public void onCreate() {
        SharedPreferencesBackupHelper backupHelper = 
                new SharedPreferencesBackupHelper(this, SCORES);
        addHelper(BACKUP_ID, backupHelper);
    }
} 
```

最后，在我的主要活动中，我要求像这样进行数据备份：

```
edit.putString(id + "_values", valueCache.toString());
edit.putString(id + "_hints", hintCache.toString());
edit.commit();
BackupManager backup = new BackupManager(this);
backup.dataChanged(); 
```

我试过调试，似乎我`onCreate()`的 in`SudokuBackupAgent`从来没有被调用过。或者至少它从未从调试器中得到。似乎没有找到任何更新的数据，我已经仔细检查以确保有数据要备份。我在这里缺少什么吗？

**编辑**：我应该补充一点，我正在设备（Galaxy Nexus）上进行测试，我什至尝试使用导出的版本 APK 进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:57:08.673

1) 将 Log.i() 放入你的 onCreate 中，看看它是否被调用。

2) Logcat 表明你的函数没有写任何东西。检查您的应用程序的私有文件夹中是否有 shared_prefs/SCORES 文件（假设在根设备上使用适当的文件管理器）。这是您尝试备份的文件。可能您的首选项文件不是此文件，在这种情况下，请修复您的字符串分数以反映真实的首选项文件。

3）我尝试在我的应用程序中调试BackupAgentHelper.onCreate，它可以在调用adb shell bmgt后进行调试......所以可以在调试器中单步执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T23:52:01.940

如果您不更改您的首选项数据，它只会备份一次，但不会随后备份。

[https://developer.android.com/reference/android/app/backup/SharedPreferencesBackupHelper.html](https://developer.android.com/reference/android/app/backup/SharedPreferencesBackupHelper.html)

“无论何时执行备份，它都会备份自上次备份操作以来已更改的所有命名共享首选项。”

正如其他海报所说，请确保在您的 onCreate 中有一个日志声明。

您可以通过以下方式强制备份：

```
// bmgr wipe TRANSPORT PACKAGE
bmgr wipe com.google.android.backup/.BackupTransportService com.kcoppock.sudoku

bmgr run 
```

默认是`com.google.android.backup/.BackupTransportService`，但最好自己检查一下`bmgr list transports`。

使用本地传输而不是默认的 Google 传输，您会更快乐。检查有关此的开发文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T14:01:57.623

我今天在使用 Android SDK 4.1 时遇到了同样的问题。然而，使用 2.3.3 版本有助于：

```
07-15 13:59:56.459: V/LocalTransport(61): performBackup() pkg=com........
07-15 13:59:56.469: V/LocalTransport(61): Got change set key=filehelper:../databases/database.db size=8208 key64=ZmlsZWhlbHBlcjouLi8kYXRhYmFzZXMvZXhwZW5zZXIuZGI=
07-15 13:59:56.469: V/LocalTransport(61):   data size 8208
07-15 13:59:56.469: V/LocalTransport(61): finishBackup() 
```

# python - 在 wxPython 中使用 time.sleep

> ID：11377316
> 
> 赞同：2
> 
> 时间：2012-07-07T17:49:25.390
> 
> 标签：python, user-interface, wxpython

在重新定位位图按钮后，在我的 wxPython 代码中使用 time.sleep 导致我的按钮完全空白。在按钮应该在的区域中只留下了一个空白。任何人都可以解释原因并提出任何解决方案吗？这是我的代码：

```
import wx
import time
class gui(wx.Frame):
  def __init__(self,parent,id):
    wx.Frame.__init__(self,parent,id,'New Window',pos=(0,0),size=wx.DisplaySize())
    panel=wx.Panel(self)
    self.SetBackGroundColour('green')
    self.pic=wx.BitmapButton(self,-1,wx.Image("Candle.jpg",wx.BITMAP_TYPE_ANY).ConvertToBitmap(),pos=(700,300))
    self.Bind(wx.EVT_BUTTON,self.position,self.pic)
  def positon(self,event):
    self.pic.Hide()
    self.pic=wx.BitmapButton(self,-1,wx.Image("Candle.jpg",wx.BITMAP_TYPE_ANY).ConvertToBitmap(),pos=(700,300))
    time.sleep(2)
    self.pic.Hide()
if __name__=='__main__':
  app=wx.PySimpleApp()
  frame=gui(None,-1)
  frame.Show()
  app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:26:40.217

好吧，难怪你的按钮会变成空白，你几乎已经对其进行了编程。

```
 self.pic.Hide() => hides the button
 self.pic=wx.BitmapButton(self,-1,wx.Image("Candle.jpg",wx.BITMAP_TYPE_ANY).ConvertToBitmap(),pos=(700,300)) => displays the button once again
    time.sleep(2) => takes a brake for 2 seconds
    self.pic.Hide() => hides the button again 
```

结论是，您的按钮不会出现。所以我看不出有什么问题，因为它完全按照您的编程方式执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:36:21.013

time.sleep() 会阻塞 wx 的主循环并使 GUI 在您告诉它休眠的时间长短都没有响应。有几种选择。您可以使用[wx.Timer](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)或使用[线程](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)（或类似的）。不过，我认为在您的用例中使用 Timer 更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:21:53.507

好吧，这取决于按钮事件中是否使用了时间睡眠？因为我相信是因为它。按钮等待它触发的事件结束，以便返回到初始状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T22:43:59.237

`sleep`是阻塞的，因此执行在您的位置方法中停留了两秒钟，并且无法返回 MainLoop 处理其他事件，例如将您的更改绘制到屏幕上。两秒钟后，图像被隐藏，但从未被绘制。

要获得您想要的效果，您必须启动一个计时器，并将计时器绑定到可以`StaticBitmap`再次显示的处理程序。

顺便说一句，您也可以`Show`再次调用而不是创建新控件，它的父级也应该是面板，而不是框架。

# php - 在php中将double转换为字符串

> ID：11377317
> 
> 赞同：6
> 
> 时间：2012-07-07T17:49:37.787
> 
> 标签：php

我有一个简单的问题。

我有这个`7310093341976450848`需要回显的号码。但是当我回显时，它给了我这个`7.3100933419765E+18`。

我试过

> 回声（字符串）$数据；

将其转换为字符串然后打印它，但它仍然给出相同的结果。

该数字最初是类型`double`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T18:02:55.067

> ```
> I've this 7310093341976450848 number which I needed to echo.
> The number is initially of type double. 
> ```

由于 PHP 中使用的[浮点表示](http://php.net/manual/en/language.types.float.php)，一旦它被存储为双精度，您就不能再打印出那个确切的数字了。

这是打印值的（许多）方法之一：

```
printf("%.0f", $data);
echo number_format($data, 0, '', ''); 
```

如果您不想丢失精度，请将其存储为字符串，或使用任意精度库之一：[BC Math](http://www.php.net/manual/en/book.bc.php) / [GMP](http://www.php.net/manual/en/book.gmp.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:58:16.357

使用[number_format()](http://php.net/manual/en/function.number-format.php)。就是这样：

```
echo number_format( $data, 0, '', '' ); 
```

# java - Java Applet JOptionPane 和 setSize 问题

> ID：11377318
> 
> 赞同：1
> 
> 时间：2012-07-07T17:49:39.333
> 
> 标签：java, swing, applet, awt, joptionpane

我首先要说我对java有点陌生，所以如果这是一个愚蠢的错误，那就是原因。

我在java中弄乱了小程序，在设置窗口大小和使用JOptionPane时遇到了问题，无论是只是显示一条消息，还是通过它获取输入，它都会显示三个或更多窗格，而不是只是一个。我在 Ubuntu 12.04(x64) 上，这是我仍然遇到问题的测试代码：

```
import javax.swing.JOptionPane;
import java.awt.Graphics;
import java.applet.Applet;

public class Main extends Applet{

    public void paint(Graphics g)
    {
        //setup screen size
        setSize((int)500,(int)500);
        //print test message
        JOptionPane.showMessageDialog(null, "There Should Be One Of Me!");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:07:49.843

这是意料之中的：选项窗格的数量与调用paint 方法的次数一样多：-) 后者在AWT 和Swing 中都不受应用程序代码的控制。

作为一般规则，永远不要在绘制周期中调用的方法中更改任何组件状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:14:57.390

1.  移除`setSize(..`和`JOptionPane.sh...`移除`public void paint(Graphics g)`

2.  [对于 Applet，我想念那里的方法 init()](http://docs.oracle.com/javase/tutorial/deployment/applet/getStarted.html)

3.  [(J)Applet教程](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)展示几个例子

4.  也许更好的是使用[Swing JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)而不是`(J)Applet`

# delphi - Synapse Delphi HTTPS SSL GET 请求

> ID：11377320
> 
> 赞同：4
> 
> 时间：2012-07-07T17:49:44.373
> 
> 标签：delphi, ssl, get, request, synapse

只有对 HTTP url 的 GET 请求有效。如果我尝试请求 HTTPS url，那么它不会返回任何内容。我几乎尝试了一切。感谢任何帮助。

这是我的代码：

```
 SynHttp.Sock.CreateWithSSL(TSSLOpenSSL);
 SynHttp.Sock.SSLDoConnect;
 SynHttp.HTTPMethod('GET', 'https://www.google.com/');
 Resp.LoadFromStream(SynHttp.Document);
 HtmlResponse := Resp.Text; 
```

SynHTTP 是一个 THTTPSend 对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T08:06:05.250

确保：

1.  您的 exe 应用程序可以访问`ssleay32.dll`-`libeay32.dll`最简单的方法是将它们复制到您的 exe 目录中。
2.  您添加`ssl_openssl.pas`到`ssl_openssl_lib.pas`您的项目中。

然后它应该立即工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-28T19:35:33.317

使用 HTTPSend 和标头，在 HTTPMethod 中使用 SSL。如果您在 URL 中使用“https:”而不是仅使用“http:”，则您的请求是通过 SSL/TLS 连接发出的：

```
aURL:='https://api.metadefender.com/v4/file/bzIwMDYxNi1TSW42NDBPVlprTWw3YjRBMQ';

with THTTPSend.create() do begin
  Headers.Add('apikey: 6b337c92c792174a54acd715ab1aae64');
  writeln(botostr(HTTPMethod('GET',aURl)));
  writeln('synapse get: '+StreamtoString3(document)) 
  writeln(itoa(ResultCode)+' '+ResultString);
  Clear;
  Free;
end; 
```

# ios - NSError 返回自我

> ID：11377322
> 
> 赞同：0
> 
> 时间：2012-07-07T17:49:51.743
> 
> 标签：ios, error-handling

我有一个奇怪的问题。

我声明一个 NSError ：

```
 NSError *error; 
```

在那之后，我正在检查错误并得到“自我”类。

```
 NSLog(@"Error: %@", error); 
```

结果：

> 2012-07-07 20:48:55.489 耶路撒冷圣经动物园 [54204:1e407] 错误：ParseHelper

有任何想法吗 ？

坦克

沙尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T17:51:33.337

说`NSError *error;`只是声明了一个指向错误对象的指针。除非你初始化它（比如用`NSError *error = nil`），否则它将是一个随机的垃圾值。（在这种情况下，它是自我。）

# eclipse - 查找当前 Eclipse 会话中的所有文本匹配项

> ID：11377323
> 
> 赞同：0
> 
> 时间：2012-07-07T17:50:04.623
> 
> 标签：eclipse

> **可能重复：**
> [如何在 Eclipse 中搜索所有打开的文件？](https://stackoverflow.com/questions/1940675/how-to-search-all-open-files-in-eclipse)

我想在当前 Eclipse 会话中搜索文本“条目存在”的所有匹配项。如何对所有打开的文件执行此操作（而不仅仅是使用 CTRL+F 搜索当前打开的源文件？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:53:27.090

搜索 - 文件...

但它不会在打开的文件中搜索。它将在整个工作区、当前项目、选择或工作集中搜索，具体取决于您选择的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:54:01.033

您不能只在打开的文件中搜索。您可以在整个项目、整个工作区中进行搜索。转到菜单 -> 搜索 -> 文件搜索选项卡 -> 包含文本字段 .. 并在那里写下您的文本。

# autohotkey - Autohotkey：带有 Alt 键的命令仅在不限于特定应用程序时才能正常工作

> ID：11377324
> 
> 赞同：0
> 
> 时间：2012-07-07T17:50:06.183
> 
> 标签：autohotkey

我正在尝试使用 Autohotkey 将自定义键盘命令添加到应用程序。在许多这些热键中，我想将该`alt`键与我选择的其他一些键（任何标准字母）结合使用。

只要我不以它们仅在目标应用程序中工作的方式限制它们的使用（通过 #IfWinActive 指令），一切都可以正常工作。如果我这样做，热键本身仍然有效，但是它们的行为很奇怪。

我发现他们要么被激活，要么

a）我按住 alt 键，然后按第二个键（在我的情况下是“b”键）两次或

b）我连续两次使用此热键，两次触发之间的延迟很短 - 上述两种情况实际上可能是 1 种情况。我不确定...

*   `Shift`用or做同样的事情时我没有问题`CTRL`。
*   'b' 键不是导致问题的原因 - no `alt`+ 'letter' 组合有效。
*   我已经尝试了所有的 SendModes，但到目前为止没有任何效果。

代码示例：

```
#IfWinActive, MyAppTitle ahk_class MyAppClass
!b::
click 367, 86
return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-09T19:54:42.127

AutoHotkey 中的 Alt+字母命令，例如`!b`正常工作。这篇文章发布时的版本可能包含某些错误或与当前版本相比已过时。

对于您的代码，可以这样做：

```
!b::
WinGetTitle, Title, A
if (RegExMatch(Title, "MyAppTitle"))
{
    MouseClick, left, 367, 86
}
return 
```

# html - HTML 流体列：25% + 25% +25% +25% != webkit/opera 中的 100%

> ID：11377327
> 
> 赞同：2
> 
> 时间：2012-07-07T17:50:27.603
> 
> 标签：html, css, cross-browser, liquid-layout

我正在尝试构建一个自适应的多列布局（流体，弹性，无论你想要什么），并构建了一个测试文档来尝试这个想法。

我做了一些计算，得出的数字可以让 x 列完全并排放置在页面中。2 很容易 (50%)，4 (25%) 和 10 (10%) 也是如此。如果您考虑边距以留下排水沟并减去它，那么您将获得所需的列宽百分比。

一切似乎都很顺利，我构建了 CSS 和 HTML（见下文）并在 Firefox 中进行了尝试，一切正常。但是，当我在 Opera、Chrome 和 Safari 中试用它时，我遇到了问题。当它们并排放置时，这些柱子的总和似乎没有达到 100%，它们似乎略微不足。列越多，问题就越严重。通过 10 列，问题非常明显。

为什么会这样？Firefox 的行为是正确的，还是其他浏览器中正在发生的事情意味着要发生的事情？更重要的是，我如何解决它以在所有浏览器中产生一致的结果？

我已经构建了以下代码的 JSFiddle，可[在此处](http://jsfiddle.net/kZcHz/)获得。完整的测试页面也可以[在这里找到](http://www.gordiansolution.co.uk/)。（JSfiddle 只是相关代码，而整个页面还有其他内容）

列的 CSS 如下：

```
.columnHolder {
    overflow: hidden;
    background: #EFE; /* For layout testing only! */
    margin: .5em 0;
    padding: 0;
}
.columnHolder h1 {
    background: #EFF; /* For layout testing only! */
}
.column {
    float: left;
    margin: .5%;
    background: #FFE; /* For layout testing only! */
    text-align: justify;
}
.column.half {
    width: 49%;
}
.column.third {
    width: 32.33333%
}
.column.quarter {
    width: 24%;
}
.column.fifth {
    width: 19%;
}
.column.sixth {
    width: 15.66666%;
}
.column.seventh {
    width: 13.28571%;
}
.column.eighth {
    width: 11.5%;
}
.column.ninth {
    width: 10.11111%;
}
.column.tenth {
    width: 9%;
} 
```

我正在测试的（缩减版）标记如下：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Gordian Solutions</title>
        <link rel="stylesheet" href="./css/core.css" media="all" />
    </head>
    <body>
        <article style="margin: 1em 10% 1em 10%;">
            <section class="columnHolder">
                <h1>2 Column Test</h1>
                <div class="column half">
                    <p> Nulla hendrerit; <a href="#">nunc quis mollis</a> cursus; lectus libero viverra turpis, ut ornare arcu mauris eu ipsum. Curabitur et dolor dui, nec sagittis felis. Nam elit purus, eleifend nec pulvinar et, commodo id nisl. Curabitur pharetra, quam porttitor aliquam volutpat, nunc ipsum semper quam, non imperdiet libero risus non diam. Praesent et dui arcu. Praesent lorem lorem, malesuada sit amet egestas eget, lacinia sed velit. In congue sagittis ipsum, sed venenatis ligula vulputate vel? </p>
                </div>
                <div class="column half">
                    <p> Proin ornare, nisl et vestibulum dignissim, purus odio scelerisque massa, in mollis dolor neque nec massa. Vestibulum neque ipsum, sodales sit amet dapibus a, viverra sit amet est. Mauris odio mi, semper vel ultricies ac, hendrerit eget tortor. Quisque eu mi tellus, nec iaculis lectus. Duis pellentesque, ipsum nec molestie aliquet, lorem urna scelerisque risus, quis venenatis nibh dolor ac elit. Duis vitae nisi ante. <a href="#">Morbi dictum ornare</a> justo in fermentum. </p>
                </div>
            </section>
            <section class="columnHolder">
                <h1>4 Column Test</h1>
                <div class="column quarter">
                    <p> Nulla hendrerit; <a href="#">nunc quis mollis</a> cursus; lectus libero viverra turpis, ut ornare arcu mauris eu ipsum. Curabitur et dolor dui, nec sagittis felis. Nam elit purus, eleifend nec pulvinar et, commodo id nisl. Curabitur pharetra, quam porttitor aliquam volutpat, nunc ipsum semper quam, non imperdiet libero risus non diam. Praesent et dui arcu. Praesent lorem lorem, malesuada sit amet egestas eget, lacinia sed velit. In congue sagittis ipsum, sed venenatis ligula vulputate vel? </p>
                </div>
                <div class="column quarter">
                    <p> Proin ornare, nisl et vestibulum dignissim, purus odio scelerisque massa, in mollis dolor neque nec massa. Vestibulum neque ipsum, sodales sit amet dapibus a, viverra sit amet est. Mauris odio mi, semper vel ultricies ac, hendrerit eget tortor. Quisque eu mi tellus, nec iaculis lectus. Duis pellentesque, ipsum nec molestie aliquet, lorem urna scelerisque risus, quis venenatis nibh dolor ac elit. Duis vitae nisi ante. <a href="#">Morbi dictum ornare</a> justo in fermentum. </p>
                </div>
                <div class="column quarter">
                    <p> Donec magna justo, semper nec pulvinar eu, faucibus eget neque. Nunc egestas porttitor orci, eget congue nisl rutrum in. Donec ut dignissim nunc. Sed a suscipit ante. Fusce in nunc id risus elementum molestie eget eget eros. Nunc eget dolor sit amet eros accumsan porta. Phasellus nibh ligula, ullamcorper sed adipiscing at, luctus ut justo. Mauris eleifend posuere laoreet. Integer odio leo, dapibus a pretium sit amet, ultricies id augue. Aliquam mollis ipsum id urna varius iaculis. Class aptent taciti sociosqu ad <a href="#">litora torquent per conubia</a> nostra, per inceptos himenaeos. Pellentesque leo arcu, rhoncus ut suscipit ut, posuere a sapien. Nullam a nisi nec nibh facilisis egestas dignissim quis magna. Nulla nec egestas elit. Nunc nibh est, porttitor at hendrerit a, iaculis vel est. Cras pulvinar dignissim neque, et ultrices massa tristique nec. </p>
                </div>
                <div class="column quarter">
                    <p> Nulla hendrerit; <a href="#">nunc quis mollis</a> cursus; lectus libero viverra turpis, ut ornare arcu mauris eu ipsum. Curabitur et dolor dui, nec sagittis felis. Nam elit purus, eleifend nec pulvinar et, commodo id nisl. Curabitur pharetra, quam porttitor aliquam volutpat, nunc ipsum semper quam, non imperdiet libero risus non diam. Praesent et dui arcu. Praesent lorem lorem, malesuada sit amet egestas eget, lacinia sed velit. In congue sagittis ipsum, sed venenatis ligula vulputate vel? </p>
                </div>
            </section>
            <section class="columnHolder">
                <h1>10 Column Test</h1>
                <div class="column tenth">
                    <p> Nulla hendrerit; <a href="#">nunc quis mollis</a> cursus; lectus libero viverra turpis, ut ornare arcu mauris eu ipsum. Curabitur et dolor dui, nec sagittis felis. Nam elit purus, eleifend nec pulvinar et, commodo id nisl. Curabitur pharetra, quam porttitor aliquam volutpat, nunc ipsum semper quam, non imperdiet libero risus non diam. Praesent et dui arcu. Praesent lorem lorem, malesuada sit amet egestas eget, lacinia sed velit. In congue sagittis ipsum, sed venenatis ligula vulputate vel? </p>
                </div>
                <div class="column tenth">
                    <p> Proin ornare, nisl et vestibulum dignissim, purus odio scelerisque massa, in mollis dolor neque nec massa. Vestibulum neque ipsum, sodales sit amet dapibus a, viverra sit amet est. Mauris odio mi, semper vel ultricies ac, hendrerit eget tortor. Quisque eu mi tellus, nec iaculis lectus. Duis pellentesque, ipsum nec molestie aliquet, lorem urna scelerisque risus, quis venenatis nibh dolor ac elit. Duis vitae nisi ante. <a href="#">Morbi dictum ornare</a> justo in fermentum. </p>
                </div>
                <div class="column tenth">
                    <p> Donec magna justo, semper nec pulvinar eu, faucibus eget neque. Nunc egestas porttitor orci, eget congue nisl rutrum in. Donec ut dignissim nunc. Sed a suscipit ante. Fusce in nunc id risus elementum molestie eget eget eros. Nunc eget dolor sit amet eros accumsan porta. Phasellus nibh ligula, ullamcorper sed adipiscing at, luctus ut justo. Mauris eleifend posuere laoreet. Integer odio leo, dapibus a pretium sit amet, ultricies id augue. Aliquam mollis ipsum id urna varius iaculis. Class aptent taciti sociosqu ad <a href="#">litora torquent per conubia</a> nostra, per inceptos himenaeos. Pellentesque leo arcu, rhoncus ut suscipit ut, posuere a sapien. Nullam a nisi nec nibh facilisis egestas dignissim quis magna. Nulla nec egestas elit. Nunc nibh est, porttitor at hendrerit a, iaculis vel est. Cras pulvinar dignissim neque, et ultrices massa tristique nec. </p>
                </div>
                <div class="column tenth">
                    <p> Nulla hendrerit; <a href="#">nunc quis mollis</a> cursus; lectus libero viverra turpis, ut ornare arcu mauris eu ipsum. Curabitur et dolor dui, nec sagittis felis. Nam elit purus, eleifend nec pulvinar et, commodo id nisl. Curabitur pharetra, quam porttitor aliquam volutpat, nunc ipsum semper quam, non imperdiet libero risus non diam. Praesent et dui arcu. Praesent lorem lorem, malesuada sit amet egestas eget, lacinia sed velit. In congue sagittis ipsum, sed venenatis ligula vulputate vel? </p>
                </div>
                <div class="column tenth">
                    <p> Proin ornare, nisl et vestibulum dignissim, purus odio scelerisque massa, in mollis dolor neque nec massa. Vestibulum neque ipsum, sodales sit amet dapibus a, viverra sit amet est. Mauris odio mi, semper vel ultricies ac, hendrerit eget tortor. Quisque eu mi tellus, nec iaculis lectus. Duis pellentesque, ipsum nec molestie aliquet, lorem urna scelerisque risus, quis venenatis nibh dolor ac elit. Duis vitae nisi ante. <a href="#">Morbi dictum ornare</a> justo in fermentum. </p>
                </div>
                <div class="column tenth">
                    <p> Donec magna justo, semper nec pulvinar eu, faucibus eget neque. Nunc egestas porttitor orci, eget congue nisl rutrum in. Donec ut dignissim nunc. Sed a suscipit ante. Fusce in nunc id risus elementum molestie eget eget eros. Nunc eget dolor sit amet eros accumsan porta. Phasellus nibh ligula, ullamcorper sed adipiscing at, luctus ut justo. Mauris eleifend posuere laoreet. Integer odio leo, dapibus a pretium sit amet, ultricies id augue. Aliquam mollis ipsum id urna varius iaculis. Class aptent taciti sociosqu ad <a href="#">litora torquent per conubia</a> nostra, per inceptos himenaeos. Pellentesque leo arcu, rhoncus ut suscipit ut, posuere a sapien. Nullam a nisi nec nibh facilisis egestas dignissim quis magna. Nulla nec egestas elit. Nunc nibh est, porttitor at hendrerit a, iaculis vel est. Cras pulvinar dignissim neque, et ultrices massa tristique nec. </p>
                </div>
                <div class="column tenth">
                    <p> Nulla hendrerit; <a href="#">nunc quis mollis</a> cursus; lectus libero viverra turpis, ut ornare arcu mauris eu ipsum. Curabitur et dolor dui, nec sagittis felis. Nam elit purus, eleifend nec pulvinar et, commodo id nisl. Curabitur pharetra, quam porttitor aliquam volutpat, nunc ipsum semper quam, non imperdiet libero risus non diam. Praesent et dui arcu. Praesent lorem lorem, malesuada sit amet egestas eget, lacinia sed velit. In congue sagittis ipsum, sed venenatis ligula vulputate vel? </p>
                </div>
                <div class="column tenth">
                    <p> Proin ornare, nisl et vestibulum dignissim, purus odio scelerisque massa, in mollis dolor neque nec massa. Vestibulum neque ipsum, sodales sit amet dapibus a, viverra sit amet est. Mauris odio mi, semper vel ultricies ac, hendrerit eget tortor. Quisque eu mi tellus, nec iaculis lectus. Duis pellentesque, ipsum nec molestie aliquet, lorem urna scelerisque risus, quis venenatis nibh dolor ac elit. Duis vitae nisi ante. <a href="#">Morbi dictum ornare</a> justo in fermentum. </p>
                </div>
                <div class="column tenth">
                    <p> Donec magna justo, semper nec pulvinar eu, faucibus eget neque. Nunc egestas porttitor orci, eget congue nisl rutrum in. Donec ut dignissim nunc. Sed a suscipit ante. Fusce in nunc id risus elementum molestie eget eget eros. Nunc eget dolor sit amet eros accumsan porta. Phasellus nibh ligula, ullamcorper sed adipiscing at, luctus ut justo. Mauris eleifend posuere laoreet. Integer odio leo, dapibus a pretium sit amet, ultricies id augue. Aliquam mollis ipsum id urna varius iaculis. Class aptent taciti sociosqu ad <a href="#">litora torquent per conubia</a> nostra, per inceptos himenaeos. Pellentesque leo arcu, rhoncus ut suscipit ut, posuere a sapien. Nullam a nisi nec nibh facilisis egestas dignissim quis magna. Nulla nec egestas elit. Nunc nibh est, porttitor at hendrerit a, iaculis vel est. Cras pulvinar dignissim neque, et ultrices massa tristique nec. </p>
                </div>
                <div class="column tenth">
                    <p> Nulla hendrerit; <a href="#">nunc quis mollis</a> cursus; lectus libero viverra turpis, ut ornare arcu mauris eu ipsum. Curabitur et dolor dui, nec sagittis felis. Nam elit purus, eleifend nec pulvinar et, commodo id nisl. Curabitur pharetra, quam porttitor aliquam volutpat, nunc ipsum semper quam, non imperdiet libero risus non diam. Praesent et dui arcu. Praesent lorem lorem, malesuada sit amet egestas eget, lacinia sed velit. In congue sagittis ipsum, sed venenatis ligula vulputate vel? </p>
                </div>
            </section>
        </article>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T18:12:18.693

问题与开始使用百分比宽度时的舍入差异有关 - 例如，如果原始容器是**205 像素**并且您有**4 x 25% 列**，则您将每列设置为**51.25px**的宽度。你不能有 1/4 像素，但是处理方式会因浏览器而异——有些可能会在每种情况下丢掉 1/4 像素；其他人可能会将 1px 标记到最后一列。

**编辑：**阅读[John Resig](http://ejohn.org/blog/sub-pixel-problems-in-css/)多年前关于此的一篇好文章，值得一读。他引用了 Mozilla 开发人员 David Baron 的话，很好地总结了这些问题：

> 1.  4 个宽度/高度为 25%（例如）的相邻对象从容器的一个边缘开始，应恰好在另一边缘结束；容器中不应该有额外的像素，并且它们不应该被包裹，因为它们是一个像素宽
> 2.  逻辑上相邻的对象应始终在视觉上接触；由于舍入误差，不应存在像素间隙或重叠像素
> 3.  给定相同宽度的对象应占用相同数量的像素
> 4.  对象边界应始终（在视觉上）与显示中的特定像素边界混叠（它们不应被模糊）

CSS 规范中没有关于如何实现上述 4 个要求的真正标准化，这就是为什么浏览器以不同的方式在这些方面妥协的原因。

**编辑：**顺便说一句，正如您所问的那样，如何最好地避免这个问题 - 在可能的情况下，将容器元素保持在其列中可均匀分割的宽度。（虽然这在流体布局中并不总是可行的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:06:42.623

通常有帮助的是从一列或两列中省略宽度设置。这允许浏览器自己计算它们的宽度。

例如，我网站的搜索结果概览目前采用 3 列布局，其中只有左右列具有指定的宽度。中间一栏的宽度（article#main）由浏览器计算得出：
[http ://www.omegajunior.net/found.html](http://www.omegajunior.net/found.html)

# c# - 在 C# 中用另一个对象实例替换对象实例

> ID：11377329
> 
> 赞同：16
> 
> 时间：2012-07-07T17:50:48.633
> 
> 标签：c#, memory, pointers, reference, unity3d

在这个问题中，我想知道这是否以及如何实现。这种技术似乎是非常糟糕的做法，但我正在使用的 API（UnityEditor）似乎正在做这样的事情，我只是好奇。

如果对同一个对象有多个引用，是否可以将一个新对象实例化到同一个内存槽中，以便所有以前的引用都指向新对象？

我发现唯一可行的方法是使用非托管 C++。基本上发生了以下情况：

```
// Original prefab
GameObject prefab = x;
prefab.tag = "Untagged";

// A copy of the original prefab
GameObject prefabCopy = PrefabUtility.InstantiatePrefab(prefab) as GameObject;
prefabCopy.tag = "EditorOnly";  // Change from initial value "Untagged"

Debug.Log(prefab.tag);     // "Untagged"   - expected
Debug.Log(prefabCopy.tag); // "EditorOnly" - expected

// Replace contents of prefab file with `prefabCopy`
PrefabUtility.ReplacePrefab(prefabCopy, prefab);

// Destroy the copy
DestroyImmediate(prefabCopy);

Debug.Log(prefab.tag);     // "EditorOnly"   - whoa? 
```

一些`prefab`现在如何指向不同的对象？

*注意：请记住，Unity 是在 Mono 风格的 .NET 之上构建的*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T18:32:16.700

如果您将对象嵌入到另一个用于访问该对象的对象中，则可以这样做。

```
class ObjectReference<T>
   where T : new()
{
    private T _obj = new T();

    public void CreateNewObject()
    {
        _obj = new T();
    }

    public T Value { get return _obj; }
} 
```

现在您可以创建对类型对象的多个引用，`ObjectReference`并且只更改本地对象。“真实”对象将通过`Value`属性访问

稍微不同的方法是创建一个包装器，它实现与“真实”对象相同的接口，从而使包装透明。

```
interface ISomeInterface
{
    string PropertyA { get; set }
    void MethodB (int x);
}

class TheRealObject : ISomeInterface
{
    public string PropertyA { get; set }

    public void MethodB (int x)
    {
        Console.WriteLine(x);
    }
}

class Wrapper : ISomeInterface
{
    TheRealObject _obj = new TheRealObject();

    public string PropertyA
    { 
        get { return _obj.PropertyA; }
        set { _obj.PropertyA = value; }
    }

    public void MethodB (int x)
    {
        _obj.MethodB(x);
    }

    public void CreateNewObject()
    {
        _obj = new TheRealObject();
    }
} 
```

现在包装器可以像“真实”对象一样使用。您还可以在包装器的构造函数中传递“真实”对象的初始实例，并删除`_obj`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-07T18:14:38.130

由于对象状态是由字段值定义的，因此您可以将包含字段值的内存从一个对象复制到另一个对象，从而有效地“替换”它：

```
public static void Replace<T>(T x, T y)
    where T : class
{
    // replaces 'x' with 'y'
    if(x == null) throw new ArgumentNullException("x");
    if(y == null) throw new ArgumentNullException("y");

    var size = Marshal.SizeOf(typeof(T));
    var ptr = Marshal.AllocHGlobal(size);
    Marshal.StructureToPtr(y, ptr, false);
    Marshal.PtrToStructure(ptr, x);
    Marshal.FreeHGlobal(ptr);
} 
```

请注意，此代码需要`[StructLayout(LayoutKind.Sequential)]`（或`LayoutKind.Explicit`）为类定义的属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-07T18:02:02.653

不，那是不可能的。

要真正更改对对象的所有引用，您必须冻结进程中的所有线程，并访问它们的寄存器集和堆栈。这就是垃圾收集器所做的，但对于常规代码是不可能的。

该方法最有可能做的是将一个对象深拷贝到另一个对象上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T18:31:18.643

如果它是您要引用的自定义类，我认为您可以让所有引用指向一个假引用...

1.  创建你的班级 (A)
2.  创建你的类接口 (IA)
3.  根据您的接口创建一个包装类，该类仅将所有调用传递给包含的对象（AC）

我添加了一个赋值运算符，因此我将所有 A 对象作为 AC。

```
class AC:IA  
{  
    IA ref;  
    AC(IA ref)  
    {  
        this.ref = ref;  
    }  

    public void ChangeReference(IA newRef) { ref = newRef;}  
    public static operator = (IA assignedObj)  
    {  
        return (assignedObject is AC) ? assignedObject : new AC(assignedObj);
    }

    // implementation of all methods in A
    public override string ToString() { return ref.ToString(); }  
        ...  
} 
```

现在，如果您愿意，可以使用 ChangeReference 方法将所有内容切换到新的 Reference..

在 C++ 中，您将使用 Reference to Reference

祝你好运

# ios5 - TouchesEnded 在 iOS5 中不工作，在 iOS4 中工作正常

> ID：11377333
> 
> 赞同：2
> 
> 时间：2012-07-07T17:51:06.877
> 
> 标签：ios5, ios4, scrollview, touches

我有一个自定义的滚动视图，实现了以下方法：

```
 - (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
 {
     //if not dragging send it on up the chain
     if(!self.dragging){
    [self.nextResponder touchesEnded:touches withEvent:event];
     }else {
        [super touchesEnded:touches withEvent:event];

     }
  } 
```

在我的视图控制器中，我有以下方法：

```
-(void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event {

NSLog(@"TOUCH");
//---get all touches on the screen---

NSSet *allTouches = [event allTouches];

//---compare the number of touches on the screen---

switch ([allTouches count])

{

        //---single touch---

    case 1: {

        //---get info of the touch---

        UITouch *touch = [[allTouches allObjects] objectAtIndex:0];

        //---compare the touches---

        switch ([touch tapCount])

        {

                //---single tap---

            case 1: {
                NSLog(@"Single");

                [self mySingleTapMethod];
            } break;

                //---double tap---

            case 2: {

                [self myDoubleTapMethod];
            } break;

        }

    }  break;

} 
```

}

在 iOS 4 下，这完美运行，滚动视图上的触摸被识别，并且 touchesEnded 在我的视图控制器中被调用，一切正常。然而，在 iOS 5x 下，touchesEnded 永远不会被触发。有谁知道到底发生了什么/错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:22:27.097

在这里找到了答案，基本上如果你想做我正在做的事情，你也需要将 touchesBegan 向上传递..因为如果 viewController 没有看到 touchesBegan 它就不会得到 TouchesEnded ......所以我修改了自定义 ScrollView 以抛出 touchesBegan，现在一切都在 5.0 中正常工作

参考：

[Xcode 4.2 更改了 UIView 触摸处理行为？](https://stackoverflow.com/questions/7786935/uiview-touch-handling-behavior-changed-with-xcode-4-2)

# android - 在活动开始时加载进度时出现 Seekbar 错误

> ID：11377338
> 
> 赞同：0
> 
> 时间：2012-07-07T17:51:41.863
> 
> 标签：android, seekbar, android-progressbar

在活动开始时，我将进度设置为 8 ；
所以拇指在 8 但背景不在 8 上，更改搜索栏后它工作正常，但在活动开始时它不是......

![无法加载图片](../Images/d6ee8262189961e3d2eb93ca9464551f.png)

提前致谢...

代码是： -

```
public static int time=8;

oncreate(){
SeekBar sb=(SeekBar)findViewById(R.id.SB);
TextView tv=(TextView)findViewById(R.id.tv);
sb.setMax(20);
sb.setProgress(time);
sb.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            // TODO Auto-generated method stub
            time=progress;
            tv.setText(time+"");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:55:23.927

尝试先设置最大值。然后尝试设置进度。

# objective-c - 在核心动画中移除或隐藏图层时移除不透明度和时间间隔

> ID：11377340
> 
> 赞同：0
> 
> 时间：2012-07-07T17:51:51.503
> 
> 标签：objective-c, ios, core-animation

似乎当我从 a 中删除动画`CALayer`或将其设置为隐藏时，图层在被删除之前会淡出大约半秒，而我希望它在我想要它的时候也停止。

它应该在`CALayer`被点击后立即停止，但是看起来像是淡出效果的东西被应用到了图层上。动画`CALayer`垂直移动，当它被点击移除时，你几乎可以看到它淡出。

我需要在点击它后立即将其删除的原因是 UIImageView 将其替换为它的位置并运行关键帧图像动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:23:51.090

[您可以通过禁用图层操作](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Transactions.html#//apple_ref/doc/uid/TP40006096-SW6)来控制此自动动画：

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue
                 forKey:kCATransactionDisableActions];
[aLayer removeFromSuperlayer];
[CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T20:41:29.570

现在没关系，我认为最好的方法是有效地取消`action`父层的属性。

```
parentLayer.actions = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                            [NSNull null], @"onOrderIn",
                            [NSNull null], @"onOrderOut",
                            [NSNull null], @"sublayers",
                            [NSNull null], @"contents",
                            [NSNull null], @"bounds",
                            nil];

[childLayer removeFromSuperlayer]; 
```

就我而言，我只需要以下中的“子层”数据`NSDict`：

```
parentLayer.actions = [[NSMutableDictionary alloc] initWithObjectsAndKeys: [NSNull null], @"sublayers",
                            nil];

[childLayer removeFromSuperlayer]; 
```

# c - Netbeans 无法编译 C

> ID：11377344
> 
> 赞同：0
> 
> 时间：2012-07-07T17:52:11.660
> 
> 标签：c, windows, gcc, netbeans

我无法在 netbeans 中用 C 语言编译任何东西，因为：

```
gcc    -c -g -MMD -MP -MF build/Debug/MinGW-Windows/main.o.d -o build/Debug/MinGW-Windows/main.o main.c
gcc: cannot specify -o with -c or -S and multiple compilations 
```

所有谷歌返回都是[http://netbeans.org/bugzilla/show_bug.cgi?id=40227](http://netbeans.org/bugzilla/show_bug.cgi?id=40227)。我应该怎么办？我可以在哪里更改传递给编译器的设置？网豆 7.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:52:57.320

在 mingw 之后安装 pascal 并将其添加到路径导致 netbeans 使用来自 pascal bin 而不是 msys 的 make。

# java - 如何知道演员是否空闲

> ID：11377346
> 
> 赞同：8
> 
> 时间：2012-07-07T17:52:38.477
> 
> 标签：java, actor, akka

我有未知数量的工作要由已知（当然）数量的演员执行。演员完成工作后，初始工作数量可能会增加。也就是说，参与者在完成其任务后，可能会添加要执行的新作业。

我处理这个问题的方法是让每个参与者在完成其工作时向主节点发送一条消息，不仅包含执行结果，还包含一个指示参与者现在空闲的“标志”。master 有一个作业队列和一个空闲 actor 队列，每当一个 actor 发送“作业完成消息”时，master 将检查该 actor 是否还有其他事情要做……依此类推，直到作业队列是空的，空闲队列已满……那时我关闭了系统。这里没有太多的监督，所以我觉得我做得不好......

我没有使用路由器，因为我找不到向路由器查询空闲演员的方法，所以我的问题是：

处理我上面在 Akka 中描述的情况的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T19:36:06.377

你应该看看[Akka 的路由功能。](http://doc.akka.io/docs/akka/snapshot/scala/routing.html) `SmallestMailboxRouter`可能是您正在寻找的。

作为替代方案，您可以按需创建角色，即对于每个任务，动态创建一个新角色。中心参与者跟踪当前活动的所有参与者。一旦一个工作角色完成，它会向自己发送一个 a`PoisonPill`并通知主节点它的关闭（主动地，或者通过`Terminate`Akka 将发送给监督角色的标准消息）。一旦没有更多的活动参与者，即不再有任务，控制参与者就会关闭系统。

**阅读评论后的补充：** 看看 的来源`SmallestMailboxLike`，一个 Scala trait 混合在`SmallestMailboxRouter`. 警告：您应该具备 Scala 的基本知识。但是如果你想使用 Akka，这通常是一个好主意......方法`isProcessingMessage(ActorRef)`可以理解为`isNotIdle(ActorRef)`

```
// Returns true if the actor is currently processing a message.
// It will always return false for remote actors.
// Method is exposed to subclasses to be able to implement custom
// routers based on mailbox and actor internal state.
protected def isProcessingMessage(a: ActorRef): Boolean = a match {
  case x: LocalActorRef ?
    val cell = x.underlying
    cell.mailbox.isScheduled && cell.currentMessage != null
  case _ ? false
}

// Returns true if the actor currently has any pending messages
// in the mailbox, i.e. the mailbox is not empty.
// It will always return false for remote actors.
// Method is exposed to subclasses to be able to implement custom
// routers based on mailbox and actor internal state.
protected def hasMessages(a: ActorRef): Boolean = a match {
  case x: LocalActorRef ? x.underlying.mailbox.hasMessages
  case _                ? false
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:14:00.983

另一种策略可以是使用 BalancingDispatcher 和 RoundRobinRouter（作为演员“池”）。来自 Akka 文档：

```
BalancingDispatcher
# This is an executor based event driven dispatcher that will try to redistribute work from busy actors to idle actors.

# All the actors share a single Mailbox that they get their messages from.

It is assumed that all actors using the same instance of this dispatcher can process all messages that have been sent to one of the actors; i.e. the actors belong to a pool of actors, and to the client there is no guarantee about which actor instance actually processes a given message.

# Sharability: Actors of the same type only

# Mailboxes: Any, creates one for all Actors

# Use cases: Work-sharing 
```

在 application.conf 中定义您的调度程序或在启动时以编程方式加载它。

```
private final static Config akkaConfig = ConfigFactory.parseString(

            "my-dispatcher.type = BalancingDispatcher \n" +
            "my-dispatcher.executor = fork-join-executor \n" +
            "my-dispatcher.fork-join-executor.parallelism-min = 8 \n" +
            "my-dispatcher.fork-join-executor.parallelism-factor = 3.0 \n" +
            "my-dispatcher.fork-join-executor.parallelism-max = 64 "
); 
```

然后为路由定义路由器和调度程序。

```
getContext().actorOf(new Props(MyActor.class).withRouter(new RoundRobinRouter(10)).withDispatcher("my-dispatcher"), "myActor"); 
```

所以路由器将简单地继续“分发”消息，调度程序将运行一个选定的参与者（它也实现了工作窃取）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-27T05:30:10.167

Balancing Dispatcher 将只为所有使用 BalancingDispatcher 创建的所有创建的 Actor 使用一个邮箱。所以它会让你的工作变得简单。

# c++ - c/c++ 中的文件压缩/检查数据损坏

> ID：11377348
> 
> 赞同：0
> 
> 时间：2012-07-07T17:53:20.200
> 
> 标签：c++, c

对于不一定是文本的大文件或其他文件，我如何压缩它们以及检查数据损坏的最有效方法是什么？任何有关此类算法的教程将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:22:39.897

对于压缩，LZO 应该会有所帮助。易于使用且易于使用的库。对于数据损坏检查，CRC ca [http://cppgm.blogspot.in/2008/10/calculation-of-crc.html](http://cppgm.blogspot.in/2008/10/calculation-of-crc.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T05:29:21.143

对于一般压缩，我建议使用 Huffman 编码。它非常容易学习，如果您理解它，可以在 <4 小时内编写一个功能齐全的（2-pass）编码器/解码器。它是 DEFLATE 的一部分，它是 .zip 格式的一部分。完成后，学习 LZ77，然后将它们组合在一起并制作自己的 DEFLATE 实现。

或者，使用 zlib，每个人都用于 zip 文件的库。

对于大文件，我不会像每个人都告诉你的那样推荐 CRC32。较大的文件很容易遭受生日损坏。我的意思是，随着文件变大，32 位校验和只能发现越来越有限的错误。散列的快速实现——比如说，MD5——会很好。是的 MD5 被密码破解，但我假设，考虑到你的问题，你没有解决安全意识问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T18:04:18.743

汉明码是一种可能性。这个想法是在每N位数据插入几个和位，并将它们中的每一个初始化为0或1，使得一些数据位和和位之和始终为1。在总和不是 1 的情况下，查看这些总和位的值，您可以看到丢失了哪些数据位。

正如上一篇文章所说，还有很多其他的可能性。

[http://en.wikipedia.org/wiki/Hamming_code#General_algorithm](http://en.wikipedia.org/wiki/Hamming_code#General_algorithm)

# scala - Scala/Java 互操作：类类型未转换？

> ID：11377350
> 
> 赞同：1
> 
> 时间：2012-07-07T17:53:33.833
> 
> 标签：scala, interop, typechecking

javafx api的定义如下：

```
void addListener(ChangeListener<? super java.lang.Boolean> listener) 
```

以下代码..

```
new TextArea().focusedProperty.addListener(new ChangeListener[Boolean]() {
  def changed(observable: ObservableValue[_ <: Boolean], oldValue: Boolean, newValue: Boolean) {
  }
}) 
```

..给出这个错误：

> 具有替代方法的重载方法值 addListener： (javafx.beans.value.ChangeListener[_ >: java.lang.Boolean])Unit (javafx.beans.InvalidationListener)Unit 不能应用于 (java.lang.Object with javafx.beans. value.ChangeListener[Boolean])

如果我使用`java.lang.Boolean`而不是`Boolean`，它可以工作，但不适用于 scala 的布尔值。这是为什么？是否可以使用此 api 而无需键入完全限定名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T18:08:23.780

问题是在 Scala 中，`Boolean <: AnyVal <: Any`, 而`java.lang.Boolean <: AnyRef <: Any`. 既然`<? super java.lang.Boolean>`手段`java.lang.Boolean`或它的*任何*超类，你必须落入`AnyRef`事物的一边。拆箱是不够的；`Boolean`即使您将`AnyVal`其装箱到`java.lang.Boolean`.

# ios - 如何在不完全下载的情况下为 PDF 文件生成缩略图？

> ID：11377358
> 
> 赞同：0
> 
> 时间：2012-07-07T17:54:36.817
> 
> 标签：ios, pdf, thumbnails

我必须使用允许浏览文档库的外部 rest API - 列出文档、获取单个文档的元数据以及完全或给定范围下载文档。目前我们显示所有文档的标准图标（服务器上的 PDF 文件）。我们想要改进和显示缩略图。有没有一种方法可以在不读取整个文件的情况下从 PDF 中提取封面的缩略图？可能类似于 EXIF 的东西？客户端在 iOS 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:48:44.810

不确定我是否完全了解您的环境和限制。

但是，如果您可以检索远程文档的“给定范围”，那么只需检索第 1 页就很容易。（您只能检索将成功呈现的部分 PDF 文档，如果它们是“网络优化”又名“线性化”。 )

但是，现在大多数 PDF 不再包含可以检索的缩略图。Adobe 软件（以及其他 PDF 查看器）确实可以即时创建页面预览。

所以你必须先检索第一页。

然后 Ghostscript 可以从此页面生成“缩略图”。适用于 Linux/Unix/MacOSX 的命令：

```
 gs \
   -o thumb.jpg \
   -sDEVICE=jpeg \
   -g80x120 \
   -dPDFFitPage \
    firstpage.pdf 
```

适用于 Windows 的命令：

```
 gswin32c.exe ^
   -o thumb.jpg ^
   -sDEVICE=jpeg ^
   -g80x120 ^
   -dPDFFitPage ^
    firstpage.pdf 
```

对于这个例子...

*   ...缩略图文件类型将为 JPEG。您可以将其更改为 PNG（`-sDEVICE=pngalpha`、 或`=png256`或`=png16m`）。
*   ...缩略图大小将是`80x120`像素；根据需要更改它。

# jquery - 如何在fancybox中为shopify页面获取iframe

> ID：11377359
> 
> 赞同：1
> 
> 时间：2012-07-07T17:54:42.167
> 
> 标签：jquery, fancybox, liquid, shopify

我正在尝试一个简单的代码，使用以下代码（我在 shopify 之外尝试过它的工作）使 floatbox 加载到 shopify 页面上，但如何在 shopify 上获取它是我的主要问题。

```
<!DOCTYPE html>
<html>
<head>
    <title>fancyBox - Fancy jQuery Lightbox Alternative | Demonstration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>

    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="../source/jquery.fancybox.js?v=2.0.6"></script>

    <link rel="stylesheet" type="text/css" href="../source/jquery.fancybox.css?v=2.0.6" media="screen" />

    <script type="text/javascript">
        $(document).ready(function() {
            $("#fancybox-manual-b").click(function() {
                $.fancybox.open({
                    href : 'http://2792.a.hostable.me/testing/instagram/loader.php?count=10',
                    type : 'iframe',
                    padding : 5
                });
            });

        });
    </script>
    <style type="text/css">
        .fancybox-custom .fancybox-skin {
            box-shadow: 0 0 50px #222;
        }
    </style>
</head>
<body>
<a id="fancybox-manual-b" href="javascript:;">iframe loader</a>
</body>
</html> 
```

我的另一个问题是如何在加载时将数据从父页面发送到此 iframe（此数据用于计算和显示 iframe 中的结果），完成后，如果 iframe 关闭，是否可以发送一些计算结果返回父页面，如果是，请告诉我如何？

对此的任何启示都非常感谢，我对此非常初学者。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T20:35:03.427

Fancybox v2.x 需要 jQuery v1.6 或更高版本才能正常工作。目前您有：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script> 
```

试试这个：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

# zend-framework - htaccess & Zend 框架直通

> ID：11377360
> 
> 赞同：0
> 
> 时间：2012-07-07T17:54:41.990
> 
> 标签：zend-framework, .htaccess

我的 ZF 项目有以下 htaccess 文件。

```
SetEnv APPLICATION_ENV production

# Redirect old site pages
redirect 301 /The_GAPS_Postal_Application_20110126.pdf /pdf/The_GAPS_Postal_Application_20110126.pdf
redirect 301 /The_GAPS_Constitution.pdf /pdf/The_GAPS_Constitution.pdf
redirect 301 /The_GAPS_EJ_Postal_Application_20110126.pdf /pdf/The_GAPS_EJ_Postal_Application_20110126.pdf
redirect 301 /The_GAPS_Fishery_Rules.pdf /pdf/The_GAPS_Fishery_Rules.pdf
redirect 301 "/Gipping Angling and Preservation Society Waters.pdf" /pdf/Gipping_Angling_Preservation_Society_Waters.pdf

redirect 301 /gaps_waters.php /waters
redirect 301 /alderson_lakes.php /waters/alderson-lakes
redirect 301 /barham_b_pit.php /waters/barham-b-pit
redirect 301 /causeway_lakes.php /waters/causeway-lakes
redirect 301 /perch_pit.php /waters/perch-pit
redirect 301 /river_gipping_barham.php /waters/river-gipping-barham
redirect 301 /river_gipping_bramford.php /waters/river-gipping-bramford
redirect 301 /river_gipping_elton_water_bank.php /waters/river-gipping-elton-water-bank
redirect 301 /river_gipping_lagoon.php /waters/river-gipping-shamford-lagoon
redirect 301 /river_gipping_shamford_lock.php /waters/river-gipping-shamford-lock
redirect 301 /river_gipping_sproughton.php /waters/river-gipping-sproughton
redirect 301 /gaps_maps.php /waters/maps
redirect 301 /gaps_rules.php /waters/rules

redirect 301 /joining_gaps.php /membership
redirect 301 /gaps_postal_applications.php /membership/postal-applications
redirect 301 /joining_gaps_early.php /membership/join-early
redirect 301 /joining_caps.php /membership/join-caps
redirect 301 /gaps_guest_permits.php /membership/guest-permits

redirect 301 /gaps_officers.php /officers
redirect 301 /gaps_match_fixtures.php /matches/fixtures
redirect 301 /downloads.php /downloads
redirect 301 /links.php /links
redirect 301 /gaps_work_parties.php /work-parties
redirect 301 /constitution.php /constitution
RewriteEngine On

# Cached files
RewriteCond %{REQUEST_METHOD} GET
RewriteCond %{DOCUMENT_ROOT}/cached/index.html -f
RewriteRule ^/*$ cached/index.html [L]

RewriteCond %{REQUEST_METHOD} GET
RewriteCond %{DOCUMENT_ROOT}/cached/%{REQUEST_URI}\.html -f
RewriteRule .* cached/%{REQUEST_URI}\.html [L]

# Route to index.php for ZF
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]

# Add compression
AddOutputFilterByType DEFLATE text/html 
```

在我的 public_html 文件夹中，我有一个名为 lists 的子文件夹，其中包含第三方时事通讯应用程序。然而，对该文件夹的调用只会被重定向到 ZF 应用程序。

我的问题是如何让列表文件夹中的文件直接通过而不是定向到 ZF 应用程序？

# c - 为什么当值按升序排列时链接列表函数会崩溃？

> ID：11377363
> 
> 赞同：0
> 
> 时间：2012-07-07T17:54:52.527
> 
> 标签：c, list, linked-list

我对我的程序在遍历链表时的行为感到困惑。

我正在编写一个函数，该函数应该检查整数的链表是否按升序排列，如果是则返回 1，否则返回 0。这是我到目前为止所拥有的：

```
int isasc(NodePtr top){

    NodePtr curr=top;

    if(top=NULL) return 0;

    while(curr!=NULL){

        if(curr->num > curr->next->num){ 
            return 0;
        }
        curr=curr->next;
    }
    return 1 ;
} 
```

它在列表不是按升序排列但在升序时崩溃时起作用。你有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:03:22.423

你还有：

```
if(top=NULL) return 0; 
```

那是分配`NULL`给`top`并且条件被视为FALSE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T18:07:13.093

这段代码有几处奇怪的地方。它崩溃的原因是因为您在`curr->next->num`没有检查的情况下访问`curr->next`是`NULL`.

还有一些没有意义的事情。指针`top`没有被使用，它也没有被比较，`NULL`而是被**设置**为`NULL`，并且该语句将始终评估为`NULL`，这是错误的。

而是这样做：

```
int isasc(NodePtr curr)
{
    if(curr == NULL) return 0;

    while(curr->next != NULL)
    {
        if(curr->num > curr->next->num) 
            return 0;

        curr = curr->next;
    }

    return 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T18:00:16.980

它崩溃了，因为在某些时候`curr->next`是`NULL`. 您的代码仅适用于无序情况，因为该函数在到达列表末尾之前仁慈地终止了。

要修复您的程序，请在取消引用之前检查它`curr->next`是否存在。`NULL`

# django - 如何从终端安装 Docutils 以便 Django admindocs 可以工作？

> ID：11377364
> 
> 赞同：12
> 
> 时间：2012-07-07T17:54:57.773
> 
> 标签：django, terminal, installation, docutils

Docutils 是一个很棒的软件包。如果您使用的是 Django，则 admindocs 包需要 docutils。提供了使用 Web 浏览器安装的说明，但如果您是远程用户并通过 SSH 使用终端登录怎么办？这种情况下怎么安装？如果您只是想要一个快速的方法来使用终端完成这项工作怎么办？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-10T06:15:19.723

我知道我回答这个问题已经很晚了，但是接受的答案并没有真正反映 Python 社区成员的常见[最佳实践](http://docs.python-guide.org/en/latest/)（更不用说 Django 社区成员了。）虽然概述的手动安装过程确实有效，但比以下更费力和容易出错：

你真的应该使用[Pip](http://www.pip-installer.org/en/latest/index.html)。使用 Pip 在系统范围内安装 docutils 非常简单：

```
$ sudo pip install docutils 
```

这不仅适用于 docutils，而且几乎适用于“ [Cheese Shop](http://pypi.python.org/pypi) ”以及许多其他代码存储库（Github、Bitbucket 等）上的任何包。

您可能还想研究其他常见的 Python 最佳实践工具，例如[virtualenv](http://www.virtualenv.org/en/latest/index.html)和[virtualenvwrapper](http://virtualenvwrapper.readthedocs.org/en/latest/index.html)，这样您就可以避免全局包安装。

要在 Ubuntu/Debain 上安装 Pip，我通常会执行以下操作：

```
$ sudo apt-get install python-pip 
```

*顺便说一句：对于 virtualenv 'sudo apt-get install python-virtualenv' 和对于 virtualenvwrapper 'sudo apt-get install virtualenvwrapper'。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T17:54:58.540

安装的关键是使用 curl 实用程序。以下将安装 docutils：

```
mkdir docutilsetup
cd docutilsetup
curl -o docutils-docutils.tar.gz http://docutils.svn.sourceforge.net/viewvc/docutils/trunk/docutils/?view=tar
gunzip docutils-docutils.tar.gz 
tar -xf docutils-docutils.tar 
cd docutils
sudo python setup.py install 
```

这将执行以下步骤： 创建一个目录以将 docutils 下载到其中。cd 进入刚刚创建的目录，然后使用 curl 下载 docutils 的压缩版本。解压缩创建子目录*docutils*的文件。cd 进入该目录并以 root 权限安装。

如果您使用的是 Django，则必须重新启动 Django 才能让 admindocs 开始工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-16T14:22:53.973

虽然这是一个旧线程，但我想分享我找到的答案。安装类型命令

```
sudo apt install python-docutils 
```

或者

```
sudo apt install python3-docutils 
```

这也将安装依赖项。昨天，我使用这个命令为 Geany 编辑器安装了 docutils，它工作正常。

# android - Android Widget 大小不正确

> ID：11377372
> 
> 赞同：3
> 
> 时间：2012-07-07T17:55:44.823
> 
> 标签：android, android-layout, android-widget

我有一个`4 x 1`小部件，显示为：

`4 x 1`小部件打开`Galaxy Nexus` 但显示为 小`3 x 1`部件打开`Motorola RAZR``ICS`

我遵循以下网址 [http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy_determining_size提供的指南](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy_determining_size)

```
android:minHeight="40dip"
android:minWidth="250dip" 
```

不确定是什么导致了这个问题。我可以通过将`minWidth`值更改为 270dp 来解决问题，但我不想在不了解问题的情况下这样做。另外一点，我没有为我的小部件使用任何预览图像。

感谢任何人对此提供的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:54:40.637

你的两部手机都运行 ICS 吗？他们将小部件单元格大小从 Gingerbread 更改为 ICS。我遇到了同样的问题，但由于 Google 为同一个应用程序提供了多个 .apk 支持，所以我将新尺寸放入应用程序的 targetSDK:16 版本中，而不必担心它。我确定您可以只使用 v-14 文件夹并复制小部件的 XML 文件并将新大小放入位于 v-14 文件夹中的 XML 文件中。如果两部手机都是 ICS，我不知道该告诉你什么。你总是可以让你的小部件也可以调整大小

# emacs - 细化 key-chord.el 触发

> ID：11377373
> 
> 赞同：4
> 
> 时间：2012-07-07T17:55:51.330
> 
> 标签：emacs, keyboard-shortcuts, elisp

我*真的很*喜欢`key-chord.el`，但我只需要在我没有做任何事情的短暂延迟*后开始按下击键时触发它。*我想知道是否容易修改`key-chord.el`来做到这一点。

为什么我想要这很简单，我会尽可能简单地解释它：

*   我确实希望将键弦分配给我的“强壮”手指（没有小指）和我的主行（我做触摸式）上的键。因此，我可能会创建相当多的键弦，这些键弦在我打字时可能会与常见的单词/代码发生冲突。

*   我意识到每次发生冲突（即键弦在我不想的时候开始）都是因为我正在疯狂地修改缓冲区。

这是一个例子......

我是一个快速打字员，所以如果我输入，比如说，“hold”，在我添加“held”的“e”和输入“l”之间**永远不会有很长的延迟。**所以在这种情况下，当我键入“ld”时，我不希望键和弦启动应该是“显而易见的”。但是，如果有停顿并且**如果**“ld”是指定的键和弦，然后我点击“ld”，那么我**不太**可能编写以“ld”开头的代码/文本。因此，在后一种情况下（并且因为我已将“ld”分配给键和弦），我确实希望它能够发挥作用。

现在不要误会我的意思：我*并不是*说这会消除每一种情况下的每一种可能的冲突。我要说的是，就我而言，这可能会消除 99.9% 的（已经很少见的）冲突。与键和弦使我获得收益的时间相比，在更改键和弦后仍然发生冲突时，“损失的时间”可以忽略不计。

代码`key-chord.el`非常小，所以也许这样的添加不会太难？

有没有人知道如何很容易修改`key-chord.el`以提供这样的功能？（我希望我正确解释了我想要做什么）

这是 key-chord.el 的代码，其中一半是注释：

[http://emacswiki.org/emacs/key-chord.el](http://emacswiki.org/emacs/key-chord.el)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T22:42:38.627

空闲计时器机制应该能够促进这一点。

`C-h``i``g` `(elisp) Idle Timers` `RET`

我会把它留给你（或其他人）来弄清楚细节。临时的想法是：

*   通过空闲计时器启用 Key Chord 功能
*   用于`post-command-hook`再次禁用它

这*可能*就是所有需要的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T00:57:23.437

我在这里看到两个时机

*   和弦前的时间（和弦前的字母和和弦之间。如果足够短，则没有和弦）
*   和弦后的时间（如果快速键入新字母，则没有和弦）

第二种**时机**可能更自然，也更容易习惯。如果键入和弦，则可以接受在执行之前的短暂超时。（这不是您所要求的，也不会解决“ld”示例。但它可能会解决可能出现在单词开头的字母组合的问题。）

第**一种**时间可能更难习惯。当一个人打完一个单词，接下来就是打一个和弦时，我怀疑短暂的停顿不是一种自然的本能。如果一个人经常使用和弦，一个人可能会很快输入它，如果它不被识别就会生气（并且两个字符被插入到文本中）。我想说的是，**我不确定和弦会在一个令人满意的程度上解决问题之前的时机**。

至于执行这么一个时机。key-chord-input-method 函数中状态机的当前结构方式，它会随着要考虑的计时器数量呈指数增长（如果我没记错的话）。即至少会有十多行新代码。

要试验该功能，请尝试其他答案中的**phils**建议：禁用和弦的发布命令，以及在几分之一秒后再次启用它们的空闲计时器。在不实际更改次要模式的情况下，禁用和启用和弦的一种快速而肮脏的方法是设置 input-method-function 变量。

**仅用于测试目的的代码**。它假定但不检查 key-chord-mode 版本 0.5 已加载并启用：

```
;; Helper functions to be used in timers and hooks
(defun my-enable-chords () (setq input-method-function 'key-chord-input-method))
(defun my-disable-chords () (setq input-method-function nil))

;; Start test
(add-hook 'post-command-hook 'my-disable-chords)
(setq my-timer (run-with-idle-timer 0.3 'repeat 'my-enable-chords))

;; Finish test
(remove-hook 'post-command-hook 'my-disable-chords)
(cancel-timer my-timer) 
```

# oop - Corona 中的 OOP，从外部类访问变量

> ID：11377374
> 
> 赞同：0
> 
> 时间：2012-07-07T17:55:59.217
> 
> 标签：oop, lua, coronasdk

寻求一些有关从 Corona OOP 类外部访问变量的帮助。这是基本代码：

```
module(..., package.seeall)

local widget = require "widget"

picker = {}
picker.__index = picker

function picker.new()
local picker_object = {}
setmetatable(picker_object,picker)

picker_object.theHour = 12
picker_object.theMin = 0
picker_object.am = true

return picker_object
end

function picker:getHour()
return self.theHour
end

function picker:getMin()
return self.theMin
end 
```

当我尝试从课堂外调用 getHour 和 getMin 时，self 以 nil 的形式返回。我应该使用什么语法来返回我的 theHour 和 theMin 变量？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:47:05.823

我试过你的代码，没有任何问题。问题可能出在您访问此模块的方式上。这是与您的代码一起使用的 main.lua（我猜您的文件名为 picker.lua）：

```
local picker = require "picker"
local picker_obj = picker.picker.new() 
                -- the first picker is the module (picker.lua)
                       -- the second is the picker class in the file
print("minute: " .. picker_obj:getMin())
print("hour: " .. picker_obj:getHour()) 
```

此外， module(..., package.seeall) 命令已被弃用，请参阅[此博客文章了解制作模块的更好方法。](http://www.coronalabs.com/blog/2011/09/05/a-better-approach-to-external-modules/)如果你使用这个方法来创建你的模块并且仍然调用你的文件 picker.lua，我的 main.lua 中的前两行会变成：

```
local picker = require "picker"
local picker_obj = picker.new() 
```

这是我修改代码以使用创建模块的新方法的最简单方法。只有开始和结束改变，其他一切都保持不变：

```
-- got rid of module(), made picker local
local picker = {}
picker.__index = picker

... -- all the functions stay the same

return picker 
```

# php - 如何根据用户登录详细信息制作可点击的链接

> ID：11377376
> 
> 赞同：0
> 
> 时间：2012-07-07T17:56:27.603
> 
> 标签：php

我创建了一个登录系统（在此站点上的人员的帮助下），该系统将登录的用户重定向到几个页面，只有他们才能根据他们的登录信息访问这些页面。在浏览网站时，他们还可以访问所有登录用户都可以访问的其他页面。

此信息位于 msql 数据库中并使用 php 重定向。系统有一个小区域来显示登录用户名和注销选项。使用会话，这会显示在用户查看的任何页面上，无论是他们的个人页面还是对任何登录用户开放的常规页面。我想做的是创建一个“返回个人页面”链接（在与注销和用户名相同的面板中），这样任何登录的人都可以快速链接回他们的个人页面。

我对 PHP 很陌生，我确信有一种非常简单的方法可以使用登录信息和重定向功能来创建可点击的文本链接来实现这一点，但我还没有找到一种方法来做到这一点。我将不胜感激任何可以为我指明正确方向的人的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:59:59.197

取决于个人页面的设置方式。但无论如何，您只需要一个 HTML 链接......

```
<a href="personal.php">Go back to personal page</a> 
```

`personal.php`要将用户发送到的文件的名称在哪里。现在，如果您使用用户 ID 进行操作，您可能会遇到类似

```
<a href="personal.php?userId=<?php echo $userid; ?>">Go back to personal page</a> 
```

其中`$userid`是包含用户 ID 的变量。

本质上，您当前如何查看用户的个人资料？将该链接放在`<a>`标签中。

# sql-server - 来自 JBoss 的这条神秘的失败消息是什么意思？

> ID：11377379
> 
> 赞同：2
> 
> 时间：2012-07-07T17:57:06.480
> 
> 标签：sql-server, rest, jboss

我正在将 REST Web 服务从 Glassfish 迁移到 JBoss。数据库是 SQLServer 2005。它在 Glassfish 下运行良好。当我在 JBoss AS 7.1.1 下部署 .war 文件时，它会显示此消息

```
JBAS015870: Deploy of deployment "meteor.rest.war" was rolled back with failure message JBAS014750: Operation handler failed to complete 
```

一个人在错误配置数据源时收到此消息。JBoss 管理控制台显示了我的数据源，所以显然没问题（尽管管理控制台无论如何都不会告诉我数据源是否工作）。

我也尝试过使用相同的 URL 字符串手动连接 JDBC 调用，它可以工作。

当 JBoss 启动时，它会给出与数据源相关的这些消息：

```
JBAS014775:    New missing/unsatisfied dependencies:
  service jboss.jdbc-driver.sqljdbc (missing) dependents: [service jboss.data-source.java:jboss/Meteor]

10:28:47,578 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015876: Starting deployment of "sqljdbc4.jar"
10:28:47,656 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-7) JBAS010403: Deploying JDBC-compliant driver class com.microsoft.sqlserver.jdbc.SQLServerDriver (version 3.0) 
```

有没有其他人看到这条消息（第一条），它是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:32:23.020

此错误是由于 JBoss 无法部署 SQLServer 类型 4 JDBC 驱动程序。[当我按照此处](https://stackoverflow.com/questions/8400332/jboss-7-as-datasource-for-sqlserver)所述将驱动程序部署为模块时，一切正常。

JBoss 也无法部署 Postgresql 类型 4 JDBC 驱动程序，尽管 JBoss 文档建议通过部署而不是作为模块安装 JDBC 类型 4 驱动程序。

我不知道更糟糕的是，JBoss 文档还是 JBoss 质量。如果他们无法修复 4 类驱动程序的部署，他们应该更改他们的文档以说明您不应该部署它们，而应该将它们作为模块安装。

# objective-c - 更改 Objects 属性的值不适用于使用 NSKeyedUnarchiver 创建的对象

> ID：11377380
> 
> 赞同：0
> 
> 时间：2012-07-07T17:57:11.210
> 
> 标签：objective-c, ios, object, properties, nskeyedarchiver

我正在尝试更改对象属性的值（从 .plist 未存档），但它似乎不起作用......我现在正试图找出问题所在，我非常感谢任何帮助。

编码：

```
NSArray * pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString * pathToSave = [[pathArray objectAtIndex:0] stringByAppendingPathComponent:@"ownProfileArchive"];
OwnProfileData * OwnProfile = [NSKeyedUnarchiver unarchiveObjectWithFile:pathToSave];
[OwnProfile setName:[NameField text]]; // at that point, even if I change the name to a string saying "Hello!", It would always be NULL! 
NSLog(@"Name = %@", [OwnProfile Name]); // Here I can see it is always null.
[NSKeyedArchiver archiveRootObject:OwnProfile toFile:pathToSave]; 
```

现在我第一次运行它，指定的路径可能没有文件，我认为应用程序“不会介意”，因为文档说 NSKeyedArchiver 将创建一个文件，如果没有一个存在的。问题是：如果没有文件，创建对象的代码 (NSKeyedUnarchiver) 将创建一个功能对象，因为它确实返回值 o 'NULL'，但我无法更改它...如果一个文件必须存在，检查文件是否存在并创建一个如果不存在的代码是什么？（我认为会涉及到 If-Else Conditional，但我不知道条件是什么以及如何创建新文件......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:05:10.753

我敢打赌，如果该文件不存在，那么我怀疑您没有获得 OwnProfileData 的实际实例，因此 OwnProfile 为零。检查 nil，并在这种情况下创建一个新实例（可以将其添加到您的存档中以供将来使用）。

Objective-C 允许向 nil 发送消息，所以很难看到这样的东西。试试 NSLogging OwnProfile 看看！

# c - 单生产者单消费者无锁队列 c

> ID：11377383
> 
> 赞同：0
> 
> 时间：2012-07-07T17:57:50.150
> 
> 标签：c, multithreading, pthreads, queue, lock-free

我想知道为什么以天真的方式实现这种队列是不正确的：

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <sys/time.h>

void *print_message_function( void *ptr );

void *reader( void *ptr );
void *writer( void *ptr );

int queue[500000];

int main(int argc, char **argv) 
{
   pthread_t thread1, thread2;

   char *message1 = "Thread 1";
   char *message2 = "Thread 2";
   int  iret1, iret2; 

   iret1 = pthread_create( &thread1, NULL, writer, (void*) message1);
   iret2 = pthread_create( &thread2, NULL, reader, (void*) message2);

   usleep(2000);

   void pthread_exit(void *iret1 );
   void pthread_exit(void *iret2 );

   exit(0);

}

void *writer( void *ptr )
{
  // make local copy of queue head
  register int *pos = queue; 

  //   struct thread_param *tp = arg;
  int counter = 0;

  while(1)
  {
    //Write to head of queue
    *pos = 5;

    pos++;

    print_message_function(  ptr);
  }
}

void *reader( void *ptr )
{
  int counter = 0;

  // make local copy of queue head
  register int *pos = queue; 

  while(1)
  {

    // Read from tail of queue - loop when nothing
    if ( *pos == 5 ) 
    { 
      print_message_function( ptr ); 
      pos++; 
    }
  }
}

void *print_message_function( void *ptr )
{
      char *message;
      message = (char *) ptr;
      printf("%s \n", message);
} 
```

我确实打算缓存对齐队列。

我不相信内存重新排序是一个问题，因为队列头的副本是在开始时制作的，并且只有一个读取器和写入器。

我想要这个的原因是它应该比互斥锁或 CAS 操作更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:48:44.603

使用 POSIX 线程，如果您使用互斥锁、锁等，则只有线程之间的数据一致性。并且一致性与您的编译器没有明确定义的接口。（`volatile`绝对不是）不要那样做，所有事情都可能发生，因为优化了变量的更新（这里`volatile`可以提供帮助）或部分读取或写入。

C11，新的 C 标准有一个线程模型，包括数据一致性模型、线程创建函数和原子操作。似乎没有编译器可以完全实现这一点，但是 POSIX 线程之上的 gcc 或 clang 实现了您需要的功能。如果您想尝试一下并在未来证明这一点，[P99](http://p99.gforge.inria.fr/p99-source/p99-html/group__C11.html)为这些平台实现了包装器，允许您使用新的 C11 接口。

C11 的`_Atomic`类型和操作将是实现线程之间操作的无锁队列的正确工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:11:00.530

在 C 中，该`volatile`关键字没有定义的语义适用于在多个线程中同时访问变量时（并且 pthreads 不添加任何内容）。因此，了解它是否安全的唯一方法是查看`volatile`对特定平台和编译器的影响，找出在这些特定硬件平台上可能出错的所有可能方式，并排除它们。

如果你有选择的话，这样做是一个非常糟糕的主意。可移植代码往往更可靠。两个大问题是：

1.  新平台确实出现了。当发布新的 CPU、编译器或库时，脆弱的代码可能会中断。

2.  很难想到这可能会出错的每一种方式，因为您并不真正知道自己在使用什么。互斥锁、原子操作等具有针对多个线程的精确定义的语义，因此您*确切地*知道您拥有什么保证——在任何平台、任何编译器、任何硬件上。

顺便说一句，您的阅读器代码很糟糕。例如，在超线程 CPU 上，像这样紧密旋转会使另一个虚拟内核饿死。更糟糕的是，您最终可能会以 FSB 速度旋转，从而使其他物理内核挨饿。当你退出自旋循环时——时间性能是最关键的——你基本上是在强制一个错误预测的分支！（确切的效果取决于 CPU 的具体情况，这是使用这种代码不好的另一个原因。您至少需要一个[rep nop](https://stackoverflow.com/a/7086289/721269)。）

# supervisord - supervisorctl ERROR（异常终止）

> ID：11377385
> 
> 赞同：23
> 
> 时间：2012-07-07T17:58:11.537
> 
> 标签：supervisord

当我跑步时`sudo supervisorctl start stage`，我得到`ERROR (abnormal termination)`. 请你看看好吗？

这是我的文件`/etc/supervisord.conf`。我错过了什么吗？谢谢

```
[unix_http_server]
file=/tmp/supervisor.sock   ; (the path to the socket file)
[supervisord]
logfile=/tmp/supervisord.log ; (main log file;default $CWD/supervisord.log)
logfile_maxbytes=50MB       ; (max main logfile bytes b4 rotation;default 50MB)
logfile_backups=10          ; (num of main logfile rotation backups;default 10)
loglevel=info               ; (log level;default info; others: debug,warn,trace)
pidfile=/tmp/supervisord.pid ; (supervisord pidfile;default supervisord.pid)
nodaemon=false              ; (start in foreground if true;default false)
minfds=1024                 ; (min. avail startup file descriptors;default 1024)
minprocs=200                ; (min. avail process descriptors;default 200)

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL  for a unix socket

[program:stage]
command=/home/me/envs/project/bin/python /home/me/webapps/project/manage.py run_gunicorn -b 127.0.0.1:8002 --log-file=/tmp/stage_gunicorn.log
directory=/home/me/webapps/project/
user=www-data
autostart=true
autorestart=true
stdout_logfile=/tmp/stage_supervisord.log
redirect_stderr=true 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-03T08:46:25.680

我遇到了和你一样的问题。正如 Martijn Pieters 所说，这并不意味着您的 supervisorctl 出现问题。它只是告诉您该程序不起作用。您可以在日志中找到一些错误详细信息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-25T06:08:17.917

它表示错误，因此请使用以下命令找到它：

```
supervisorctl tail <APP_NAME> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-29T07:32:16.380

由于底层阶段应用程序未正常运行而发生此错误。要修复错误，您只需转到控制台并运行您传递的命令。在你的情况下：

这是

```
    /home/me/envs/project/bin/python /home/me/webapps/project/manage.py run_gunicorn -b 127.0.0.1:8002 --log-file=/tmp/stage_gunicorn.log

```

它将向您显示需要修复的错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-19T03:40:06.097

说明你的APP有问题。去检查 [program:stage] 部分，路径或其他东西不是 c

# grails - 使用参数创建一个 url，并在其他 gsp 页面 grails groovy 中使用它们

> ID：11377389
> 
> 赞同：4
> 
> 时间：2012-07-07T17:58:49.183
> 
> 标签：grails

我想动态创建一个带有一些参数的链接，指向将使用这些值的页面：

```
<td><a href="${createLink(controller:'display', action="viewer", params: ['file' : '${stream.file}', 'media' : '${stream.media}'])}">${fieldValue(bean: streamInstance, field: "media")}</a></td> 
```

在我的`viewer.gsp`我想在显示视频流的链接中使用这些值：

```
<source src="path/to/my/videodir/${media}" type='video/mp4'></source> 
```

但到目前为止我还没有取得太大的成功:-(。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T19:32:38.120

我看到一些地方应该有分号而不是等号，单引号而不是双引号

```
${createLink(controller:'display', action:'viewer', params:'[file : "${stream.file}", media : "${stream.media}']")} 
```

我唯一的其他想法是，如果 stream.file 变量不显示它们的值，那么尝试转义双引号 /" 如果这不起作用，那么尝试删除 stream.file 和 stream.media 周围的 ${}它们已经在 EL 块内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T19:37:28.793

这对我有用...

```
<g:set var="myarray" value="[file: stream.file, media: stream.media]" />
<a href="${createLink(controller:'display', action:'viewer', params:myarray)}">
  ${fieldValue(bean: streamInstance, field: "media")}
</a> 
```

# javascript - JS 单元测试：对文件更改运行测试（如 nodemon）

> ID：11377392
> 
> 赞同：13
> 
> 时间：2012-07-07T17:58:59.413
> 
> 标签：javascript, unit-testing, node.js, testing

我有两个关于 JS 单元测试的问题：

1）是否有一些工具允许在某些文件更改时自动运行javascript单元测试（例如nodemon在js更改时重新启动node.js）。

2）这种策略是否适合（有效）运行单元测试的方式？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-31T07:19:20.157

对于那些致力于使用 nodemon 的人来说，`nodemon -x "npm test"`对我有用。

### 一点解释

`nodemon --help`说：

`-x, --exec app ........... execute script with "app", ie. -x "python -v".`

在我们的例子`npm test`中，通过配置我们的 package.json 来运行测试

例如：

```
"scripts": {
  "test": "mocha"
}, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-17T03:01:18.417

使用 jest 时，不需要 nodemon。只需在 package.json 中设置`test`脚本命令`jest --watchAll`如下：

```
"scripts": {
  "test": "jest --watchAll"
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T15:00:49.190

查看 grunt 构建系统和 watch 任务。您可以设置 grunt 以监视文件更改，然后运行您想要的任何任务（测试、lint、编译等）。

[https://github.com/cowboy/grunt](https://github.com/cowboy/grunt)

本教程涵盖了一些想法。[http://javascriptplayground.com/blog/2012/04/grunt-js-command-line-tutorial](http://javascriptplayground.com/blog/2012/04/grunt-js-command-line-tutorial)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-11T19:35:04.707

这是我的 package.json 的片段：

```
"scripts": {
  "develop": "nodemon ./src/server.js --watch src --watch __tests__ -x \"yarn run test\"",
  "test": "mocha ./__tests__/**/*.js --timeout 10000" } 
```

该`develop`脚本是我运行我的快速服务器（条目：）的命令行`./src/server.js`，观察`/src`包含我所有服务器/API 代码的`/__tests__`目录，观察作为我所有规范的目录，最后告诉 nodemon 在每次重新启动/运行之前执行随附的语句和`-x \"yarn run test\"`

`yarn run test`与 没有什么不同`npm run test`。我更喜欢 yarn 而不是 npm，所以这部分取决于你。重要的是`\"`JSON 值中的标签......没有它，它将失败，因为参数将被错误地标记。

此设置允许我从服务器/API 代码或编写/修复规范触发更改，并在通过 nodemon 重新启动服务器之前触发完整的测试运行。

干杯!

# database - 向 Access 数据库应用程序提供更新

> ID：11377393
> 
> 赞同：0
> 
> 时间：2012-07-07T17:59:03.030
> 
> 标签：database, ms-access

我正在 Microsoft Access 中创建一个应用程序。这是针对客户将在桌面上运行的小型数据库。不会涉及任何类型的网络。使用数据库所需的所有文件都必须位于一台台式计算机上。

我想分阶段将应用程序交付给我的客户。我很可能会将 .accdb 文件通过电子邮件发送给客户。我如何提供更新并维护客户已经输入的任何数据？更新可能包括对表格结构和表格的更改。

对我最初的问题给出的答案解决了更改表单和其他 UI 元素的问题。但是，如果我想在现有的表中添加表或添加列怎么办？如何无缝交付此类更改，同时在用户端保留尽可能多的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:08:13.670

将数据库和接口拆分为单独的文件。谷歌应该有大量的信息，因为这是典型的 MS Access 应用程序。

以下是一些帮助您入门的资源：

[如何在 Microsoft Access 中手动拆分 Access 数据库](http://support.microsoft.com/kb/304932)

[分步拆分 Access 数据库](http://databases.about.com/od/tutorials/ss/splitaccessdb.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T18:14:47.947

您绝对必须（！）将您的数据库分成两部分。存储表的后端部分（“数据库”）和包含表单、报告、查询和应用程序逻辑的前端（“应用程序”）。将表格从后端链接到前端。

前端可能还包含带有控制参数、报告字典等的表格，但没有您的客户输入的数据！

较新版本的 Access 具有数据库拆分向导。

您可能需要一个自动将后端链接到客户站点上的字体端的代码。

* * *

### 更新

您有两种方法可以更改客户 PC 上的数据库架构。

1）通过DAO（或ADOX）对象模型进行更新。例如

```
 Set tdf = db.CreateTableDef("tblNew")
    tdf.Fields.Append tdf.CreateField("fieldname", dbText)
    ...
    db.TableDefs.Append tdf 
```

2) 使用 DDL 查询

```
 CREATE TABLE MyNewTable (
      ID AUTOINCREMENT,
      Textfield    TEXT(50),
      LongField    LONG,
      ...,
      CONSTRAINT PK_MyNewTable PRIMARY KEY (ID)
    ) 
```

或者

```
 ALTER TABLE SomeExistingTable ADD COLUMN Newcolumn Text(50) 
```

# ruby-on-rails - 高条件 Rails 3 意见

> ID：11377395
> 
> 赞同：0
> 
> 时间：2012-07-07T17:59:17.030
> 
> 标签：ruby-on-rails, conditional

我有一个 Rails 3 应用程序，我在其中使用了很多条件语句来更改页面的设计。对于拥有如此大量的条件，将逻辑排除在视图之外的最佳实践是什么？

假设示例：

```
<% unless @ethos.blank? %>
 <%= unless @work.nil? do %>
  <%= link_to "Add Work", work_path %>
 <% end %>   
 <%= @ethos.tagline %>
<% end %> 
```

我在其他条件句中还有更多条件句。在一个视图中管理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T18:04:27.993

您应该避免在视图中使用复杂的条件（和大多数条件）。将它们提取到 Helper，或者更好的是，提取到某种“演示者”，以便您可以使用接收器而不是那些“全局外观/感觉的助手”

一些帮手

```
module SomeHelper
  def work_link
    (@ethos.present? && @work) ? link_to("Add Work", work_path) : nil
  end
end 
```

看法

```
<%= work_link %>
<%= @ethos.tagline if @ethos.present? %> 
```

如果`@ethos`可能与`nil`空`[]`数组相反，则可以改用：

```
<%= @ethos.try :tagline  %> 
```

另请注意，在您的原始视图中`<%= unless @work.nil? do %>`应该使用 a`-`而不是 a `=`。

哦，我鼓励你使用[HAML](http://haml.info/)而不是 ERB。使用 HAML，视图看起来像这样（更容易阅读，不是吗）：

```
= work_link %>
= @ethos. try :tagline 
```

您的原始视图在 HAML 中看起来像这样（请记住，尽可能避免在视图中使用条件！）

```
- unless @ethos.blank?
 - unless @work.nil? do
   = link_to "Add Work", work_path
 = @ethos.tagline 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:28:11.260

如果代码有效，您担心什么？是美学还是因为嵌套太多而难以推理代码在做什么？

最简单的解决方案可能只是移动条件内联。

```
<%= link_to("Add Work", work_path) if @ethos.present? && @work %>
<%= @ethos.tagline if @ethos.present? %> 
```

这将提高可读性（从而提高可维护性），尽管它可能不足以让 Rails 纯粹主义者满意。Zabba 的回答提出了几个很好的选择，可以进一步深入兔子洞。

# php - .htaccess 文件扩展名和 $_GET 重写

> ID：11377401
> 
> 赞同：0
> 
> 时间：2012-07-07T18:00:19.213
> 
> 标签：php, file, .htaccess, rewrite

我想在我的 .htacces 文件中重写这些：

```
/*.php -> /*(/) 
```

（例如，gallery.php 到 /gallery 或 /gallery/）

```
/snippets.php*?s= -> /snippets/* 
```

（例如，snippets.php*?s=test 到 /snippets/test 或 /snippets/test/）

到目前为止我的代码：

```
RewriteEngine on  
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php [L]
RewriteRule ^snippets/([^/\.]+)/?$ snippets.php?s=$1 [L] 
```

使用我的代码出现的错误：

/snippets/ 和 /snippets/test(/) 将警告 500 错误。/snippets 工作正常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T21:21:48.423

就像 Micheal 所说，您需要更改顺序，但是 Michael 没有移动 RewriteCond，这导致了意外行为。

```
RewriteEngine on  
RewriteBase /

RewriteRule ^snippets/([^/.]+)/?$ snippets.php?s=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L] 
```

我在我的测试服务器上验证了这个代码，只是为了确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:00:38.870

你几乎有这个正确的。要对 采取具体行动`/snippets`，它需要出现在包罗万象的规则之前。否则，第一条规则匹配和路由`snippets/test.php`不存在。

```
RewriteEngine on  
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Match snippets first...
RewriteRule ^snippets/([^/.]+)/?$ snippets.php?s=$1 [L]

# Then the catch-all for remaining matches
RewriteRule ^(.*)$ $1.php [L] 
```

# macos - Applescript + Microsoft Word——“另存为”的文件类型？

> ID：11377404
> 
> 赞同：0
> 
> 时间：2012-07-07T18:00:42.383
> 
> 标签：macos, ms-word, applescript

我正在尝试编写一个脚本以将 Word 文档保存为单文件网页 (.mht) 格式。我已经完成了编写实际“保存”命令的部分，但我被困在那里。这就是我想要做的：

```
# the_file is a variable which has been set here
tell application "Microsoft Word"
    activate
    open the_file
    save the_file as [type]
end tell 
```

开放部分工作得很好。但是我不知道要为保存类型输入什么。也许更重要的是，我不知道在哪里可以找到可用类型的列表。任何人都可以帮忙吗？

编辑：评论者建议使用字典；我在那里找到了以下内容，但不知道如何解释它[我是一个 AS 菜鸟]。

```
[file format format document97/‌format document97/‌format template97/‌format template97/‌format text/‌format text line breaks/‌format dostext/‌format dostext line breaks/‌format rtf/‌format Unicode text/‌format Unicode text/‌format HTML/‌format web archive/‌format stationery/‌format xml/‌format document/‌format documentME/‌format template/‌format templateME/‌format PDF/‌format flat document/‌format flat documentME/‌format flat template/‌format flat templateME/‌format custom dictionary/‌format exclude dictionary/‌format documentAuto/‌format templateAuto] : The format in which the document is saved. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:44:04.553

试试`format web archive`。在列出的所有格式中，这种格式看起来最有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:23:20.753

1-使用命令时必须指定文档`save`，而不是**文件路径**。为了更好地控制，使用`open`带有属性的命令`file name`，它返回文档对象。

使用 this :`open the_file`时，它不返回任何内容，在这种情况下您必须使用`front document`，但它不可靠，例如，如果另一个文档随后打开。

**2-在Applescript**`save`中使用命令时Word不会更改扩展名，脚本必须替换扩展名。另外，我建议该命令有更多选项，而不是.**`save as``save`**

 **答案已更新：**格式化 HTML**而不是**Web 存档**

```
set the_file to (choose file) 
   tell application "Microsoft Word"
        set thisDoc to open file name (the_file as string)
        set tName to my removeExtension(name of thisDoc)

        -- save in the same directory
    save as thisDoc file format format HTML file name (tName & ".htm") with HTML display only output
        close thisDoc saving no
    end tell

    on removeExtension(t)
        if t does not contain "." then return t
        set tid to text item delimiters
        set text item delimiters to "."
        set t to (text items 1 thru -2 of t) as string
        set text item delimiters to tid
        return t
    end removeExtension 
```

如果您不想要`HTML display only output`，请使用`without HTML display only output`**

# combobox - 网格中的 Telerik MVC ComboBox 未发布正确的值

> ID：11377414
> 
> 赞同：0
> 
> 时间：2012-07-07T18:03:32.567
> 
> 标签：combobox, telerik, grid, postback

我已经在网格中设置了一个 ComboBox。它显示一切正常，但是当我在 ComboBox 中选择任何内容时，它没有向服务器发布正确的值，我对其进行了调试，发现它总是发布值 0。知道为什么会这样以及如何修复它吗？这是重要的代码：

```
 **Controller**
    //lista za stvaratelje (ComboBox)
    var stvaratelji = newStvarateljiService.GetAllStvaratelje();
    //za combobox
    ViewBag.stvaratelji = stvaratelji;
    //za selectlist
    var listaStvaratelja = new SelectList(stvaratelji, "IdStvaratelj", "Naziv");
    ViewData["stvaratelji"] = listaStvaratelja;

**View**
columns.ForeignKey(b => b.StvarateljId, (SelectList)ViewData["stvaratelji"]).Title("Stvaratelji").EditorTemplateName("Stvaratelji").Width("30%");

**EditorTemplate**
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>

<%= Html.Telerik().ComboBoxFor(m => m)
    .Name("Stvaratelji")
    .Filterable(filtering =>
        filtering.FilterMode(AutoCompleteFilterMode.Contains)
    )
    .Encode(false)
    .AutoFill(true)
    .BindTo((SelectList)ViewData["stvaratelji"])
 %> 
```

我将 selectList 与 foreignKey 一起使用，因为当网格不处于编辑模式时，它会显示值（ID）而不是名称，但这是一个完全不同的问题，而且不是那么重要。不过，如果有人知道如何设置 ComboBox 以在网格未处于编辑模式时显示名称，那也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:42:11.273

我弄清楚了问题所在。我在“StvarateljId”中更改了 EditorTemplate 的 ComboBoxFor 的名称，因为 ComboBoxFor 未绑定到 Grid 中的 Title，而是“ForeignKey”部分中的属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:19:13.003

达里奥，
为了解决您回答的评论中的问题（“不使用 SelectList”）：您是否尝试过从 ForeignKey 更改为具有类似于 EditorTemplates 的 DisplayTemplates/StvarateljId 的简单绑定列？我在这个设置上取得了一些成功，而不是使用 ForeignKey。

这是Telerik[演示的链接，显示了这个确切的设置。](http://demos.telerik.com/aspnet-mvc/grid/serveredittemplates)

# ruby - Unix 域套接字“/var/pgsql_socket/.s.PGSQL.5432”上的 PostgreSQL 权限被拒绝错误 - Lion Server 10.7.3 或 Lion Server 10.7.4

> ID：11377416
> 
> 赞同：2
> 
> 时间：2012-07-07T18:03:34.763
> 
> 标签：ruby, osx-lion, ruby-on-rails-3.2, postgresql-9.0

我最近在使用 Lion Server 时遇到了重大权限问题，其中权限会随意更改文件夹。在此期间，我在尝试执行 rake db:migrate 命令时开始收到以下错误：

```
rake aborted!
could not connect to server: Permission denied
  Is the server running locally and accepting
  connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

当我在运行 10.7.2 时第一次创建 Rails 3.2.3 应用程序时，这一直有效。突然间，我开始出现这个错误。我阅读了许多有关此错误的博客并尝试将其删除，但没有成功。

我决定打电话给 Apple 企业支持，看看我能做些什么。我怀疑 Lion Server 已损坏，但想在清理我的服务器并重新开始之前与支持团队确认。他们确认这是我需要做的才能理顺它。我在星期五做了这个，只安装了重建我的 Rails 应用程序所需的东西。我仍然得到错误。我再次尝试了发布的其他一些解决方案，但仍然没有一个有效。我们继续寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:19:49.947

`which psql`很可能会显示 /bin/psql 我猜我们想调用 /usr/local/bin/psql

因此，要么我们将 $PATH 更改为在 /bin 之前包含 /local/bin，我认为这不是一个很好的解决方案（安全等），要么我们通过 rm-ing (或 mv-ing）文件，（并符号链接到 /usr/local/bin）或卸载 psql 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:03:36.497

在继续搜索博客文章后，我们找到了一篇涉及 Lion 10.7.4 的文章。当我开始编写 Rails 应用程序和现在使用 PostgreSQL 时，我不知道在 10.7.2 之间发生了一些变化。我们发现以下博客文章帮助我解决了我几天来遇到的问题。

[http://www.mactasia.co.uk/revisited-using-postgresql-in-lion-server](http://www.mactasia.co.uk/revisited-using-postgresql-in-lion-server)

我最终以 root 身份登录并执行以下操作：

在 /System/Library/LaunchDaemons/org.postgresql.postgres.plist 中进行了以下更改

```
listen_addresses=127.0.0.1
unix_socket_permissions=0777 
```

更改了 /var/psql_socket 的权限

```
sudo chmod 755 /private/var/pgsql_socket 
```

之后，我从 root 注销并像通常作为服务器管理员一样登录。我不再收到权限错误。

# css - CSS浮动窗口调整大小：行为破坏设计

> ID：11377418
> 
> 赞同：0
> 
> 时间：2012-07-07T18:03:59.070
> 
> 标签：css, css-float

我得到了这个 CSS 布局：[http ://www.cssdesk.com/Lgg4q](http://www.cssdesk.com/Lgg4q)

HTML

```
<div id="wrap">        
        <div class="img-wrap">
            <img src="http://unikatmag.de/wp-content/uploads/2010/11/team-dummy.jpg" />
        </div>
        <div class="info">
            <p>Lorem</p>
            <p>ipsum</p>
        </div>

        <div class="img-wrap">
            <img src="http://unikatmag.de/wp-content/uploads/2010/11/team-dummy.jpg" />
        </div>
        <div class="info">
            <p>Lorem</p>
            <p>ipsum</p>
        </div>

        <div class="img-wrap">
            <img src="http://unikatmag.de/wp-content/uploads/2010/11/team-dummy.jpg" />
        </div>
        <div class="info">
            <p>Lorem</p>
            <p>ipsum</p>
        </div>        
    </div> 
```

CSS

```
body {
    background-color: grey;
    font: 18px/ Times;
    color: black;
}

body, html {
    height: 100%;
    width: 100%;
}

p { text-align: justify; }

#wrap {
    width: 80%;
    margin-left: 10%;
    padding-top: 2%;
    position: absolute;
    font-size: 14px;
    background: yellow;
}

.info {
    margin-right: 5%;
    padding-top: 2%;
    float: left;
}

.img-wrap {
    position: relative;
    display: inline-block;
    max-width: 100%;

    float: left;
    margin-right: 1%;
    margin-top: 1%;
}​ 
```

当您调整浏览器窗口的大小（更小）时，您可以看到 div 的行为基本上破坏了设计。如何处理这个问题？

我的想法是给`#wrap`一个高度，但这不会像它应该的那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:27:53.090

这就是我的做法。[http://jsfiddle.net/joplomacedo/TYjd5/](http://jsfiddle.net/joplomacedo/TYjd5/)（我不知道如何在 cssdesk 中保存更改，所以我将其转移到 jsfiddle）

基本上，我添加了一个“包装器”，我在每个图像和信息块周围调用了块。我给了它们一个宽度并浮动它们。这样，当浏览器调整大小时，信息和图像总是一起出现。

这是您正在寻找的行为吗？您希望在浏览器调整大小时发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:18:06.417

`DIV`元素在与百分比一起使用时表现不佳，或者我可以说它们不适合这样使用。在这种情况下，您有两种选择：

1.  以这样的方式设计您的页面，使其看起来好像没有响应浏览器的窗口调整大小。以这个网站为例。

2.  调整浏览器窗口大小时相应地调整容器大小。为此，您需要使用[Media Css 类](http://thinkvitamin.com/design/getting-started-and-gotchas-of-css-media-queries/)或 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T18:19:48.197

您可以使用`min-width`on`#wrap`并设置一个像素值来防止它被破坏。

# java - 为什么 ImageIcon 不工作？

> ID：11377419
> 
> 赞同：2
> 
> 时间：2012-07-07T18:04:02.783
> 
> 标签：java, swing, jframe, imageicon, jmenuitem

我在将 ImageIcon 添加到 JMenuItem 时遇到问题。我添加了它，就像它在教程中写的一样，但它不起作用。我在谷歌上检查了有什么问题，但没有找到。这是代码：

```
File.add(new JMenuItem("New", new ImageIcon("images/new.gif"))); 
```

我认为问题可能是该图标与 .class 或 .java 文件不在同一个文件夹中，因此我已将其替换 - 但仍然无法正常工作。菜单只显示文本。我应该怎么做才能让我工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T21:58:46.363

您将相对文件名作为参数传递。此文件名与类无关。它相对于 JVM 的当前目录。以及当前目录（如果从其启动 java 的目录）。所以如果你启动程序`c:\foo`，它会寻找文件`c:\foo\images\new.gif`，即使类在 jar 文件`d:\Java\myApp.jar`或目录中`e:\projects\myApp\classes`。

用作 ImageIcon 的文件通常与类文件一起捆绑在应用程序的 jar 文件中，并由类加载器加载。如果您将文件存储在包下`com.foo.bar`，那么您应该使用

```
new ImageIcon(MyClass.class.getResource("/com/foo/bar/new.gif")); 
```

# python - django - 将字段添加到用户配置文件管理表单

> ID：11377424
> 
> 赞同：2
> 
> 时间：2012-07-07T18:04:30.537
> 
> 标签：python, django, admin, models

使用给定的屏幕截图，我想从系统上已经存在的另一个模型向用户添加页面添加一个选择下拉列表。我该怎么做呢？![django 管理员](../Images/a2dfa6399dc2dbe54073d4477c77cb1b.png)

这是我的帐户/models.py

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save
from entities.models import Company
from entities.models import Venue

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    company = models.ForeignKey(Company)
    venue = models.ForeignKey(Venue)

    def __unicode__(self):
        return 'Test' 
```

这是我的帐户/admin.py

```
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import User
from entities.models import Company
from entities.models import Venue

class CompanyInline(admin.StackedInline):
    model = Company

class VenueInline(admin.StackedInline):
    model = Venue

class MyUserAdmin(UserAdmin):
    inlines = [
        CompanyInline,
        VenueInline,
    ]

admin.site.unregister(User)
admin.site.register(User, MyUserAdmin) 
```

现在当我添加上面的代码并返回用户添加页面时，我有这个错误：

![管理员用户添加错误](../Images/a50ae84595c69f63a6b85266cd959214.png)

Company 和 Venue 模型都填充了数据。

任何帮助将不胜感激。

谢谢，马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:14:39.887

Arg，每次我发布内容时都会发生这种情况。我再看一遍代码并找出问题所在。

无论如何，对于遇到同样问题的其他不幸者，我只是将我的 account/admin.py 更改为以下

```
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import User
from account.models import UserProfile

class UserProfileInline(admin.TabularInline):
    model = UserProfile

class MyUserAdmin(UserAdmin):
    inlines = [
        UserProfileInline,
    ]

admin.site.unregister(User)
admin.site.register(User, MyUserAdmin) 
```

# sql - 带有 where 子句的 SQL 连接语句

> ID：11377425
> 
> 赞同：0
> 
> 时间：2012-07-07T18:04:36.557
> 
> 标签：sql, join, left-join, inner-join

我有这个问题，我正在努力解决。我一直在尝试这样做几个小时，如果有人能指出我们正确的方向，那就太好了。

这是德文，所以我要翻译成英文：

我们只有 (d) 部分有问题

(d) 编写一条 SQL 语句，给出餐厅的名称和不点任何 Salat 的餐厅的 Ort(Place)。

预期的结果是：

黑手党：哥廷根
威尼斯：卡塞尔

![在此处输入图像描述](../Images/b5a1122d08537f5a5e766dd09b3b2ec3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T20:12:29.787

它不适用于 LolCoder 的答案，但请记住当子查询有空值时要小心 NOT IN。

这是另一种主题变化的方法。即使它确实使用了内部连接，它也不完全是花哨的。你可能会在野外找到它们。

我的偏好是第一个。即使在技术上没有必要，我通常也会明确指出“else null”。

```
-- A
SELECT name, min(ort) as ort
FROM kunde as k INNER JOIN Liefervertrag as l on l.pizzeria = k.name
GROUP by name
HAVING count(case when l.product = 'salat' then 1 else null end) = 0

-- B
SELECT name, min(ort) as ort
FROM kunde as k INNER JOIN Liefervertrag as l on l.pizzeria = k.name
GROUP by name
HAVING sum(case when l.product = 'salat' then 1 else 0 end) = 0

-- C
SELECT name, ort
FROM kunde as k INNER JOIN Liefervertrag as l on l.pizzeria = k.name
GROUP by name, ort
HAVING count(case when l.product = 'salat' then 1 else null end) = 0

-- D
SELECT name, ort
FROM kunde as k INNER JOIN Liefervertrag as l on l.pizzeria = k.name
GROUP by name, ort
HAVING sum(case when l.product = 'salat' then 1 else 0 end) = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:12:35.013

你可以这样尝试：

```
 SELECT name,ort FROM kunde WHERE name NOT IN (SELECT DISTINCT(pizzeria) FROM Liefervertrag WHERE product='salat') 
```

# matlab - 以不同角度对 3D 图像数据集进行切片

> ID：11377428
> 
> 赞同：0
> 
> 时间：2012-07-07T18:04:59.350
> 
> 标签：matlab, image-processing

我正在处理一堆 3d 的 CT 数据。我有兴趣定义一个平面并用这个平面切片这个 3D 图像数据集。我正在使用 MATLAB 来执行此操作。我尝试了几种不同的方法，包括在切片之前旋转图像数据集，但是，imrotate() 仅在一个方向上旋转图像（我相信围绕 z 轴）。

我还尝试定义平面并将其与每个图像切片相交并通过插值定义数据点。我认为并且仍然认为这是解决问题的一种干净方法，但是我没有成功找出该方法不起作用的原因。我知道我的图像被定义为坐标，而当我尝试定义平面时，MATLAB 会通过尺寸来执行此操作。听起来很简单，我一直在努力寻找解决方案。

我感谢任何帮助指导我找到解决方案。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:47:25.060

我强烈建议使用 ITK (http://www.itk.org/Doxygen41/html/annotated.html) 处理医学图像。MATLAB 在处理大型医学图像时不是很有帮助。ITK 中有各种过滤器可以解决您的目的，例如 ExtractSliceImageFIlter...可能是您想要的简单裁剪...最初学习 ITK 有点痛苦，但完全值得...参考 ITK 文档和示例...您对使用任何功能等的所有疑问都可以通过查看已解决的示例来理解...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:25:03.317

[http://www.mathworks.com/products/demos/image/3d_mri/tform3.html](http://www.mathworks.com/products/demos/image/3d_mri/tform3.html)

我希望这有帮助，我也会接受 magarwal 的建议，matlab 的人通常使用 ITK 过滤器并在 Matlab 中实现它，所以如果你有 C++、java、python、c# 或上述任何技能，你可以使用 itk。相信我，在等待他们实现 ITK 中已有的过滤器时，你会比 Matlab 领先

# android - android的主页按钮到底在做什么？

> ID：11377429
> 
> 赞同：1
> 
> 时间：2012-07-07T18:05:00.480
> 
> 标签：android, activity-lifecycle, application-lifecycle

我所知道的是当前活动进入 onPause() 模式，并且主屏幕活动被带到前面。

我的困惑始于您可以从最近的任务菜单重新打开应用程序的情况。那么当我从最近的任务管理器中打开应用程序时到底发生了什么？

按下主页按钮时处于前台的活动是否仍在堆栈中的某个位置？

是否同时存在多个活动堆栈？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:23:19.737

据我了解，没有真正的（应用程序）堆栈。只是您`activity`有状态，所以每当您按下 HOME 按钮时，您当前应用程序中的活动只会“暂停”，就像它是待机状态一样，只要系统不需要内存，多个应用程序就可以处于此状态并杀死任务。因此，每当您`activity`从最近的任务中打开它时，它只是告诉应用程序唤醒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:34:34.417

首先，这里是您需要了解的有关“向上按钮”概念的所有信息： [带有 Back 和 Up 的导航](http://developer.android.com/design/patterns/navigation.html)以及一些实现细节：[提供祖先和时间导航](http://developer.android.com/training/design-navigation/ancestral-temporal.html)。

一般来说，向上按钮可以让您在应用程序层次结构中向上导航，而不仅仅是在应用程序的后台堆栈中导航。

例如，如果您使用某种应用程序并收到电子邮件通知，则可以通过按通知打开邮件客户端。然后，您可以通过按 Back 按钮 ( back-stack ) 返回到您正在使用的应用程序，或者您可以按 Up 按钮以转到邮件客户端的“父”活动（例如从一些 EmailMessageActivity 到 EmailHomeActivity ）使用邮件客户端应用程序而不是初始应用程序（通常会清除返回堆栈，因此您只能使用返回按钮返回到 Android 主屏幕）。

“最近的任务”因素无关紧要且具有误导性，它只是开始新活动的另一种方式。

# css - 加载具有不同背景的多个 HTML 页面

> ID：11377430
> 
> 赞同：0
> 
> 时间：2012-07-07T18:05:04.280
> 
> 标签：css, jquery-mobile

我正在尝试编写基于 TAB 的分页。

我的问题是每个选项卡包含不同的背景，所以当我点击超链接时，新背景不会加载，但内容会加载。

有任何想法吗？

代码在这里

[http://jsfiddle.net/rgarimella/AnBEc/1/](http://jsfiddle.net/rgarimella/AnBEc/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T21:38:58.463

测试了你的 jsfiddle，将 !important 添加到你的 CSS 规则中就可以了：http: [//jsfiddle.net/AnBEc/2/](http://jsfiddle.net/AnBEc/2/)

编辑：

根据您正在寻找的效果，您还可以删除每个规则的 .ui-content 部分（以便它只是#services），它将背景应用于整个页面而不仅仅是内容部分：[http://jsfiddle .net/AnBEc/3/](http://jsfiddle.net/AnBEc/3/)

# sql - SQL 中的 MIN() 函数

> ID：11377433
> 
> 赞同：1
> 
> 时间：2012-07-07T18:05:48.560
> 
> 标签：sql, min

需要有关 SQL 中的 Min 函数的帮助

我有一个如下所示的表格。

```
+------------+-------+--------+
| 日期_ | 姓名 | 分数 |
+------------+-------+--------+
| 2012/07/05 | 杰克 | 1 |
| 2012/07/05 | 琼斯 | 1 |
| 2012/07/06 | 吉尔 | 2 |
| 2012/07/06 | 詹姆斯 | 3 |
| 2012/07/07 | 雨果 | 1 |
| 2012/07/07 | 杰克 | 1 |
| 2012/07/07 | 吉姆 | 2 |
+------------+-------+--------+

```

我想得到如下输出

```
+------------+------+--------+
| 日期_ | 姓名 | 分数 |
+------------+------+--------+
| 2012/07/05 | 杰克 | 1 |
| 2012/07/06 | 吉尔 | 2 |
| 2012/07/07 | 雨果 | 1 |
+------------+------+--------+

```

当我只使用日期和分数列的 MIN() 函数时，我得到每个日期的最低分数，这就是我想要的。如果同一日期的分数相同，我不在乎返回哪一行。当我还想要输出中的名称列时，麻烦就开始了。我尝试了一些 SQL 变体（即 min 与相关子查询），但我没有运气得到如上所示的输出。任何人都可以帮忙吗:)

查询如下

```
SELECT DISTINCT 
A.USername, A.Date_, A.Score 
FROM TestTable AS A 
INNER JOIN (SELECT Date_,MIN(Score) AS MinScore 
FROM TestTable 
GROUP BY Date_) AS B 
ON (A.Score = B.MinScore) AND (A.Date_ = B.Date_); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T18:42:31.030

使用此解决方案：

```
SELECT a.date_, MIN(name) AS name, a.score
FROM tbl a
INNER JOIN
(
    SELECT date_, MIN(score) AS minscore
    FROM tbl
    GROUP BY date_
) b ON a.date_ = b.date_ AND a.score = b.minscore
GROUP BY a.date_, a.score 
```

[SQL-Fiddle 演示](http://sqlfiddle.com/#!3/ad890/2/0)

这将获得子选择中每个日期的最低分数`INNER JOIN`，我们用它来加入主表。一旦我们加入子选择，我们将只有名称得分最低的日期（显示平局）。

由于每个日期我们只想要一个名字，然后我们按`date`and分组`score`，选择任何一个名字：`MIN(name)`。

如果我们要显示`name`列，我们必须使用聚合函数 on`name`来方便`GROUP BY`on`date`和`score`列，否则它将不起作用（我们也可以`MAX()`在该列上使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:08:22.523

请了解`GROUP BY`RDBMS 的功能。

```
SELECT Date_,Name,MIN(Score)
FROM T
GROUP BY Name 
```

这假设每个名称和每个日期只出现一次，这仅适用于 MySQL。

要使其在其他 RDBMS 上工作，您需要在 Date 列上应用另一个组函数，例如 MAX。分钟。ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:35:26.130

```
SELECT T.Name, T.Date_, MIN(T.Score) as Score FROM T 
 GROUP BY T.Date_ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T18:57:52.883

编辑：正如JNK在评论中指出的那样，这个答案没有得到纠正

```
SELECT Date_,MAX(Name),MIN(Score)
FROM T
GROUP BY Date_ 
```

这里我使用 MAX(NAME)，如果发现两个名称具有相同的目标编号，它将选择一个名称。

这将找到每天的最低分数（没有重复），由任何玩家得分。以 Z 开头的名称将优先于以 A 开头的名称。

编辑：通过按名称删除组来修复

# c# - Frame.Navigate(Uri uri) 方法在哪里？

> ID：11377434
> 
> 赞同：1
> 
> 时间：2012-07-07T18:06:02.453
> 
> 标签：c#, xaml, windows-runtime

我正在尝试为我的 WinRT 应用程序创建自定义导航管理器。我想要的只是一个可以在 MVVM 中使用的简单类，它可以让我在 XAML 中创建导航逻辑。我的想法是这样的：

```
<Button Content="Details" Command="{Binding Navigate}" 
                          CommandParameters="Page2.xaml"/> 
```

为了做到这一点，我发现课堂上有`Navigate(Uri uri)`。`Frame`用这种方法，我的梦想就会成真。问题是没有这样的方法。我可以调用的唯一方法`Frame`是`Navigate(Type type)`.

有人知道，我如何在 WinRT 中调用[它？`Navigate(Uri uri)`](http://msdn.microsoft.com/en-us/library/system.windows.controls.frame.navigate%28v=vs.110%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:22:20.567

我相信你在正确的轨道上。而不是`Uri`你应该使用你试图导航到的页面类的类型。

尝试这样的事情：

```
Frame.Navigate(typeof(YourPageClass)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:24:41.847

此方法在 System.Windows.Controls.Frame 程序集中。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.frame.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.frame.aspx)

# hadoop - Map Reduce 如何处理搜索到的字符串

> ID：11377435
> 
> 赞同：1
> 
> 时间：2012-07-07T18:06:14.973
> 
> 标签：hadoop

像谷歌这样的搜索引擎是基于 Map Reduce 的。它实际上是如何发生的。假设我在搜索中给出一个字符串之后会发生什么进入映射器 映射器作为键值对输出什么进入减速器？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:16:21.680

一个相关的问题：[谷歌怎么可能这么快？](https://stackoverflow.com/questions/132359/how-can-google-be-so-fast)

我只知道我曾经和谷歌的一个人讨论过什么（我无法完全验证准确性），但他基本上告诉我他们使用 map reduce 来构建所有网页中出现的所有单词的所有索引。然后为了解决查询，他们使用了这样的东西：[http](http://en.wikipedia.org/wiki/Distributed_hash_table) ://en.wikipedia.org/wiki/Distributed_hash_table所以对于你给他们的每个单词，他们可以计算哈希值，并准确地知道他们网络中的哪台计算机有信息（索引）与该词的搜索有关。所以他们将请求转发到那台计算机（他们也使用了很多冗余），这可能会将大部分信息保存在内存中。

# php - isset 函数不能在与表单相同的页面上工作

> ID：11377436
> 
> 赞同：1
> 
> 时间：2012-07-07T18:06:17.057
> 
> 标签：php, forms, isset

当我`isset()`从另一个 PHP 页面发布数据时使用该函数时，它工作正常。但是当我`isset()`在同一页面中使用该功能来处理表单时，它不会发布数据。我在 url 中看到了数据，但`isset()`似乎不起作用。表格保持空白，没有任何反应。

这是我目前正在处理的表格：

```
<h3>Register</h3>

<?php 
   if(isset($_POST["register_email"],$_POST["register_name"],$_POST["register_password"]))      
   {
       $register_email=$_POST['register_email'];
       $register_name=$_POST['register_name'];
       $register_password=$_POST['register_password'];

       $errors=array();

       if(empty($register_email) || empty($register_name) || empty($register_password))
       {
           $errors[]='All fields required';
       } 

       if(!empty($errors))
       {
           foreach($errors as $error)
           {
               echo $error,'<br />';
           }
       } 
       else {
           echo 'ok';
       }
   }
?>

<form action="" method="">
    <p>Email: <br /><input type="email" name="register_email" size="35" maxlength="255"></p>
    <p>Full name: <br /><input type="text" name="register_name" maxlength="35"></p>
    <p>Password: <br /><input type="password" name="register_password" maxlength="35"></p>
    <p><input type="submit" value="Register"></p>
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T18:33:03.657

我认为您忘记将表单的方法设置为发布：

```
<form action="" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-07T19:59:55.757

在我的情况下，只设置一个，在这种情况下输入的名称注册和 isset 注册.isset 将引用输入的名称

`if(isset($_POST["register"]))` `input type="submit" value="Register" name="register">`

# vim - 使用类似 eval() 的函数在 Vim 中设置变量

> ID：11377442
> 
> 赞同：5
> 
> 时间：2012-07-07T18:07:09.843
> 
> 标签：vim

在脚本中，我有以下*不起作用*的代码：

```
set eval(rules[formatoption])=value 
```

where`rules`是字典，`formatoption`and`value`是变量。我想让 Vim 从中读取变量名`rules[formatoption]`并将其设置为`value`. 如何让 Vim 以这种方式设置变量？我认为应该有一个类似`setvar(name, value)`或类似的函数，将`name`(string) 设置为`value`. 那行代码将使我免于在 70 行脚本中编写大约 30 行代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T18:28:05.153

使用`:execute`：

```
execute 'set' rules[formatoption] . '=value' 
```

您也可以通过 更改 Vim 选项`:let &optionname = ...`，但这在这里没有帮助。还有 obsure `:help curly-braces-names`，但这在这里也行不通。

# python - 无法遵循 python git 教程

> ID：11377444
> 
> 赞同：2
> 
> 时间：2012-07-07T18:07:14.317
> 
> 标签：python, git, gitpython

我最近安装了 python-git 包，当尝试按照以下链接的教程进行操作时，我发现某些方法丢失了......

[http://packages.python.org/GitPython/0.3.2/tutorial.html#tutorial-label](http://packages.python.org/GitPython/0.3.2/tutorial.html#tutorial-label)

这是我的解释器的结果：

```
>>> from git import *
>>> repo = Repo.init('/home/deostroll/scripts/synchost')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: type object 'Repo' has no attribute 'init'
>>> repo = Repo('/home/deostroll/scripts/synchost')
>>> repo.is_dirty()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'bool' object is not callable
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:18:17.757

您似乎使用的是非常过时的`GitPython`. 在 0.3 版中，[`is_dirty`](https://github.com/gitpython-developers/GitPython/blob/0.3/git/repo/base.py#L486)是一种方法，并且[`init`](https://github.com/gitpython-developers/GitPython/blob/0.3/git/repo/base.py#L636)存在。

在 0.1 版中，`is_dirty`是一个[属性](https://github.com/gitpython-developers/GitPython/blob/0.1/lib/git/repo.py#L483)，并且[`init_bare`](https://github.com/gitpython-developers/GitPython/blob/0.1/lib/git/repo.py#L302)被定义，但不是`init`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T18:29:16.670

这些命令对我有用，所以我同意您可能使用过时版本的另一个答案。如果您在 linux 上并在命令行上安装了[PIP](http://pypi.python.org/pypi/pip/)，您可以执行以下操作：

```
pip install --upgrade GitPython 
```

升级到最新版本。（旁注：对于 Fedora 上的我来说，命令实际上是 pip-python，所以它取决于你的发行版）。

# asp.net-mvc - 使用 Code First MVC 4 EF4.1 左连接

> ID：11377445
> 
> 赞同：1
> 
> 时间：2012-07-07T18:07:27.960
> 
> 标签：asp.net-mvc, razor, ef-code-first, left-join

我正在创建一个系统，用户需要做一些设置来完成他们的帐户，见下文：

表：

## **设置类型**

1.  ID
2.  姓名

## **设置**

1.  ID
2.  FkSettingTypeId
3.  IsEmail 已激活
4.  是否已激活短信
5.  间隔通知

所以 SettingsType 表有这些值：

1.  如果时间快到了，请注意
2.  请注意我的类别中的优惠
3.  ...

回到我的 MVC4 应用程序，我需要创建一个控制器，该控制器将返回带有设置的每个 SettingsType，以获取一个 html 表，用户可以在其中选择是否要接收每个 SettingsType 的电子邮件和短信。

我将 Entity Framework 4.1 与 CodeFirst 一起使用，普通页面将返回如下表对象：

```
public ActionResult Index()
    {
        var settings = db.Settings.Include(s => s.SettingsType);
        return View(settings.ToList());
    } 
```

include 语句进行内部连接，并且不返回我需要与设置关联的所有设置类型。

如何编写代码来进行左连接或右连接并让正确的模型像这样传递到我的视图中：

```
@model IEnumerable<TenderSystem.Models.Setting>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.SettingsType.Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.IsEmailActivated)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.IsSMSActivated)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.IntervalNotification)
    </td>
</tr>} 
```

我尝试了很多类似这些链接的东西：

1.  [实体框架代码先左连接](https://stackoverflow.com/questions/5729280/entity-framework-code-first-left-join)
2.  [Fluent API 示例](http://blogs.msdn.com/b/adonet/archive/2010/12/06/ef-feature-ctp5-fluent-api-samples.aspx)

但我无法达到我的期望。

总而言之，我还使用 SQL 到 LINQ 转换器工具将我非常简单的 SQL 左连接转换为 LINQ，并且可能会将我可以使用的对象返回到我的视图中，但我得到了这个错误：在 LINQ 中只支持无参数构造函数和初始化器实体。

需要您的帮助来了解如何处理这种情况。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:49:38.833

我认为 Include 可以只是孩子的模型名称，作为一个构造函数下的字符串。这是 EF5 的链接。

[http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k) ("System.Data.Entity.Infrastructure.DbQuery`1.Include");k(Include);k( TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5);k(DevLang-csharp)&rd=true

或缩短... [http://bit.ly/SOEttF](http://bit.ly/SOEttF)

我正在使用 WebAPI，所以返回需要一个 IQueryable，这对我有用。

```
 [AcceptVerbs("GET")]
    public IQueryable<Run> Runs()
    {
        var rx  = _contextProvider.Context.Runs
            .Include("RunOutlineItems")
            .AsQueryable()
            .Where(r => r.RunStatusId < 4);

        return rx;
    } 
```

还要检查这个答案 [Join and Include in Entity Framework](https://stackoverflow.com/questions/416847/join-and-include-in-entity-framework)

# mysql - SQL - 计算具有特定值的行

> ID：11377446
> 
> 赞同：21
> 
> 时间：2012-07-07T18:08:09.380
> 
> 标签：mysql, sql

我有一个看起来有点像这样的表：

```
id  value
1   0
1   1
1   2
1   0
1   1
2   2
2   1
2   1
2   0
3   0
3   2
3   0 
```

现在对于 each `id`，我想计算 0 和 1 的出现次数以及该 ID 的出现次数（值可以是任何整数），所以最终结果应该如下所示：

```
id  n0  n1  total
1   2   2   5
2   1   2   4
3   2   0   3 
```

我设法用这个语句得到了第一行和最后一行：

```
SELECT id, COUNT(*) FROM mytable GROUP BY id; 
```

但我有点从这里迷路了。关于如何在没有大量声明的情况下实现这一目标的任何指示？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-07T18:12:24.007

使用 MySQL，您可以使用`SUM(condition)`：

```
SELECT   id, SUM(value=0) AS n0, SUM(value=1) AS n1, COUNT(*) AS total
FROM     mytable
GROUP BY id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/c2a5c/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:52:51.067

正如@Zane 上面评论的那样，典型的方法是使用 CASE 表达式来执行枢轴。

SQL Server 现在有一个您可能会看到的 PIVOT 运算符。DECODE() 和 IIF() 是 Oracle 和 Access 上的旧方法，您可能仍然会发现它们。

# php - 在 Textarea 和 MySQL 上保留换行符

> ID：11377447
> 
> 赞同：1
> 
> 时间：2012-07-07T18:08:13.047
> 
> 标签：php, mysql, line, break

我编写了一些表单来将文本发送到 MySql。我的问题之一是保持换行符。在 Google 上找到了一些代码，但我不知道如何使用它。有些尝试并没有真正成功。

我发现的代码是我不知道如何设置的代码。

```
 function my_nl2br($string){
    $string = str_replace("\n", "<br />", $string);
        if(preg_match_all('/\<pre\>(.*?)\<\/pre\>/', $string, $match)){
            foreach($match as $a){
            foreach($a as $b){
            $string = str_replace('<pre>'.$b.'</pre>', "<pre>".str_replace("<br />", "", $b)."</pre>", $string);
            }
        }
    }
return $string;
} 
```

我发现的另一个代码是这个，但如果我尝试从数据库中读取它，换行符将不起作用。

```
if (isset($_POST['submit'])) 
{ 
    $text = trim($_POST['text']); 
    $text = stripslashes($text); 
    $text = htmlspecialchars($text); 

    echo 'you entered:<br><br>' . nl2br($text); 
} 
```

这是我想要植入的代码。

```
 if(isset($_POST['title']))
      {
        $title = mysql_real_escape_string(htmlspecialchars($_POST['title']));
        $description = mysql_real_escape_string(htmlspecialchars($_POST['description']));
        $applepart = mysql_real_escape_string(htmlspecialchars($_POST['applepart']));
        $partnumber = mysql_real_escape_string(htmlspecialchars($_POST['partnumber']));
        $productcode = mysql_real_escape_string(htmlspecialchars($_POST['productcode']));
        $compatibility = mysql_real_escape_string(htmlspecialchars($_POST['compatibility']));
        $url_bild = mysql_real_escape_string(htmlspecialchars($_POST['url_bild']));
        $price = mysql_real_escape_string(htmlspecialchars($_POST['price']));
        $insert = mysql_query("INSERT INTO `adressbuch` (`title`,`description`,`applepart`,`partnumber`,`productcode`,`compatibility`,`url_bild`,`price`) VALUES ('$title','$description','$applepart','$partnumber','$productcode','$compatibility','$url_bild','$price')");
        if (!$insert)
        {
          die('Eintrag konnte nicht gespeichert werden: ' . mysql_error());
        }
      }

    ?>

    <form method="POST" action="?page= ">
      <span>Neuer Eintrag:</span> <br />
      <span>Title</span><input type="text" name="title" /> <br />
      <span>Description</span><textarea cols="16" rows="5"  name="description"></textarea> <br />
      <span>Apple Part</span><input type="text" name="applepart" /> <br />
      <span>Part Number</span><input type="text" name="partnumber" /> <br />
      <span>Product Code</span><input type="text" name="productcode" /> <br />
      <span>Compatibility</span><input type="text" name="compatibility" /> <br />
      <span>Image</span><input type="text" name="url_bild" /> <br />
      <span>Price</span><input type="text" name="price" /> <br />
      <input type="submit" value="Speichern"/> <br />
    </form> 
```

欢呼伙计们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:35:47.910

要将*标题*存储在数据库中，请尝试：

```
$title = real_escape_string(nl2br(htmlspecialchars($_POST['title']))); 
```

# c - 使用带有立即值指令的 GCC 内联汇编

> ID：11377453
> 
> 赞同：11
> 
> 时间：2012-07-07T18:08:56.173
> 
> 标签：c, gcc, assembly, arm, inline-assembly

## 问题

我正在为 ARM Cortex-M3 处理器开发自定义操作系统。要与我的内核交互，用户线程必须生成 SuperVisor Call (SVC) 指令（以前称为 SWI，用于软件中断）。该指令在ARM ARM中的定义是：

![在此处输入图像描述](../Images/17eb9c75878914cf1a235d86b5d22801.png)

这意味着该指令需要*立即*参数，而不是寄存器值。

这让我很难以可读的方式构建我的界面。它需要如下代码：

```
asm volatile( "svc #0"); 
```

当我更喜欢类似的东西时

```
svc(SVC_YIELD); 
```

但是，我无法构造这个函数，因为 SVC 指令需要一个立即参数，而当值通过寄存器传入时，我无法提供该参数。

## 内核：

作为后台，svc指令在内核中解码如下

```
#define SVC_YIELD   0
// Other SVC codes

// Called by the SVC interrupt handler (not shown)
void handleSVC(char code)
{
  switch (code) {

    case SVC_YIELD:
      svc_yield();
      break;
    // Other cases follow 
```

这个案例陈述正在迅速失控，但我认为没有办法解决这个问题。欢迎任何建议。

# 我试过的

## 带有寄存器参数的 SVC

我最初认为

```
__attribute__((naked)) svc(char code)
{
    asm volatile ("scv r0"); 
} 
```

但这当然不起作用，因为 SVC 需要一个寄存器参数。

## 蛮力

解决问题的蛮力尝试如下所示：

```
void svc(char code)
  switch (code) {
    case 0:
      asm volatile("svc #0");
      break;
    case 1:
      asm volatile("svc #1");
      break;
    /* 253 cases omitted */
    case 255:
      asm volatile("svc #255");
      break;
  }
} 
```

但这有一种令人讨厌的代码气味。当然，这可以做得更好。

## 动态生成指令编码

最后一次尝试是在 RAM 中生成指令（其余代码从只读闪存运行）然后运行它：

```
void svc(char code)
{
  asm volatile (
      "orr r0, 0xDF00  \n\t" // Bitwise-OR the code with the SVC encoding
      "push {r1, r0}   \n\t" // Store the instruction to RAM (on the stack)
      "mov r0, sp      \n\t" // Copy the stack pointer to an ordinary register
      "add r0, #1      \n\t" // Add 1 to the address to specify THUMB mode
      "bx r0           \n\t" // Branch to newly created instruction
      "pop {r1, r0}    \n\t" // Restore the stack
      "bx lr           \n\t" // Return to caller
      );
} 
```

但这也感觉不对。另外，它不起作用-我在这里做错了；也许我的指令没有正确对齐，或者我没有设置处理器以允许在这个位置从 RAM 运行代码。

# 我该怎么办？

我必须处理最后一个选项。但是，我仍然觉得我应该能够做类似的事情：

```
__attribute__((naked)) svc(char code)
{
    asm volatile ("scv %1"
         : /* No outputs */
         : "i" (code)    // Imaginary directive specifying an immediate argument
                         // as opposed to conventional "r"
          ); 
} 
```

但我在文档中没有找到任何这样的选项，我无法解释如何实现这样的功能，所以它可能不存在。我该怎么做？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-07T20:42:15.807

您想使用约束来强制将操作数分配为 8 位立即数。对于 ARM，这就是约束`I`。所以你要

```
#define SVC(code) asm volatile ("svc %0" : : "I" (code) ) 
```

有关所有约束的摘要，请参阅 GCC 文档——您需要查看特定于处理器的说明以查看特定平台的约束。在某些情况下，您可能需要查看`.md`gcc 源中架构的（机器描述）文件以获取完整信息。

[这里](http://www.ethernut.de/en/documents/arm-inline-asm.html)还有一些很好的 ARM 特定的 gcc 文档。在“输入和输出操作数”标题下的几页下，它提供了所有 ARM 约束的表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T18:15:49.433

使用宏怎么样：

```
#define SVC(i)  asm volatile("svc #"#i) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-06T10:53:20.430

正如 Chris Dodd 在宏的评论中所指出的那样，它并不完全有效，但这确实：

```
#define STRINGIFY0(v) #v
#define STRINGIFY(v) STRINGIFY0(v)
#define SVC(i)  asm volatile("svc #" STRINGIFY(i)) 
```

但是请注意，如果您将枚举值传递给它，它将不起作用，只有一个 #defined 。

因此，克里斯上面的答案是最好的，因为它使用立即值，这是至少对于拇指指令所必需的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-09T06:59:15.200

我的解决方案（“动态生成指令编码”）：

```
#define INSTR_CODE_SVC      (0xDF00)
#define INSTR_CODE_BX_LR    (0x4770)

void svc_call(uint32_t svc_num)
{
    uint16_t instrs[2];

    instrs[0] = (uint16_t)(INSTR_CODE_SVC | svc_num);
    instrs[1] = (uint16_t)(INSTR_CODE_BX_LR);

    // PC = instrs (or 1 -> thumb mode)
    ((void(*)(void))((uint32_t)instrs | 1))();
} 
```

它的工作原理比 switch-case 变体要好得多，后者需要 ~2kb ROM 来支持 256 个 svc。这个函数不必放在RAM部分，FLASH就可以了。如果 svc_num 应该是运行时变量，则可以使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-17T11:07:49.130

正如在[这个](https://stackoverflow.com/questions/15712894/using-c-headers-in-c-code-in-gnu-error-including-inline-assembly-impossible)问题中所讨论的， 的操作数`SVC`是固定的，即预处理器应该知道它，它与立即数据处理操作数不同。

gcc 手册中写道

> **'I' - 在数据处理指令**中作为立即操作数有效的整数。即，将 0 到 255 范围内的整数旋转 2 的倍数。

因此，此处使用宏的答案是首选，并且不保证 Chris Dodd 的答案有效，具体取决于 gcc 版本和优化级别。参见另一个问题的讨论。

# java - jQuery、jsp、valuems 上传 - 上传区域不可见

> ID：11377457
> 
> 赞同：0
> 
> 时间：2012-07-07T18:09:36.523
> 
> 标签：java, jquery, jsp

我正在尝试使用 valums 上传 (http://valums.com/ajax-upload/)，但上传区域不可见。我的代码是：

主.jsp

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<%@page contentType="text/html; charset=UTF-8"%>
<head>
  <title>NET Waiter By KiT</title>
<script type="text/javascript" src="/admin/JQuery/jquery-1.7.2.js"></script>
<script type="text/javascript" src="/admin/JQuery/jquery-ui-1.8.13.custom.min.js"></script>
<script type="text/javascript" src="/admin/JQuery/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="/admin/JQuery/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="/admin/JQuery/ui/jquery.ui.accordion.js"></script>
<script type="text/javascript" src="/admin/JQuery/ui/jquery.ui.button.js"></script>
<script type="text/javascript" src="/admin/JQuery/ui/jquery.ui.timepicker.js"></script>
<script type="text/javascript" src="/admin/JQuery/ui/jquery.ui.tabs.js"></script>
<script type="text/javascript" src="/admin/JQuery/jquery.jqGrid/js/jquery.jqGrid.js"></script>
<script type="text/javascript" src="/admin/JQuery/jquery.jqGrid/js/i18n/grid.locale-hu.js"></script>

<link rel="stylesheet" type="text/css" href="/admin/style/themes/base/jquery.ui.all.css">
<link rel="stylesheet" type="text/css" href="/admin/style/themes/base/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="/admin/style/themes/main.css">
<link rel="stylesheet" type="text/css" href="/admin/JQuery/jquery.jqGrid/css/ui.jqgrid.css">
<script type="text/javascript">
$(document).ready(function(){
  var ajax_load = "Betöltés...";
$("#hrefUnits").click(function() { 
      $("#content").html(ajax_load).load("/admin/JSP/BaseDates/units.jsp"); 
 });
 </script>
 </head>
  <body>
  <div id="container">
  <div id="navCol">
    <div id="mainmenu">
      <h3 id="administration"><a href="#">Adminisztráció</a></h3>
      <div>
        <p>Rendszer paraméterek, adatok menedzselése</p>
        <ul>
          <li>System params</li>
          <ul>
            <li><a href="#" id="hrefMeals">Meals</a></li>
            <li><a href="#" id="hrefUnits">Units</a></li>
          </ul>
          <br/>
            </ul>
      </div>
      <h3 id="other"><a href="#">Other</a></h3>
      <div>
        <p>Other Action</p>
        <ul>
          <li><script type="text/javascript" src="/admin/JQuery/ui/themeswitchertool.js"></script>
          <div id="switcher"></div></li>
          <li><a href="/admin/index.jsp">Exit</a></li>
        </ul>
      </div>
    </div> <!--  div mainmenu -->
  </div> <!-- div navCol -->
  <div id="content">
  </div> <!-- div content -->
</div> 
```

单元.jsp

```
<%@page language="java" contentType="text/html; charset=UTF-8"  pageEncoding="UTF-8"%>

<script type="text/javascript">
$(document).ready(function(){
    jQuery("#unitsTable").jqGrid({
        jsonReader:{
            repeatitems: false,
            root: 'rows',
            page: 'page',
            cell: 'cell',
            id: 'id'
        },
        url:'/admin/UnitsServlet',
        mtype: 'GET',
        datatype: 'json',
        loadonce:true,
        colNames:['Name', 'Shortname', 'Comment', 'Status'],
        colModel:[
            {name:'name', index:'name', editable: true},
            {name:'shortname', index:'shortname', align: 'right', editable: true},
            {name:'comment', index:'commnet', editable: true},
            {name:'status', index:'status', align:'center', width: 70, 
                editable:true, edittype:"select", editoptions:{value:
                    "ACTIVE:ACTIVE;INACTIVE:INACTIVE"
                },
             hidden: true
            },
        ],
        sortname: 'name',
        rowNum:25,
        rowList: [5, 10, 25],
        caption: "Mértékegység lista",
        hidegrid: false,
        height: 590,
        width: 690,
        pager: "#unitsTablePager",
        viewrecords: true,
        editurl: "/admin/UnitsServlet",
        // multiselect: true,
    }).navGrid('#unitsTablePager', {edit:true, add:true, del:true, search:true},
        { //edit options
            afterSubmit: function(){
               jQuery("#unitsTable").setGridParam({datatype: 'json', page: 1});
               return [true, ''];
            },
            reloadAfterSubmit: true,
        }, 
        { //add options
            afterSubmit: function(){
                $(this).setGridParam({datatype: 'json', page: 1});
                return [true, '', false];
            },
            reloadAfterSubmit: true,
            // closeAfterAdd: true
        }, 
        { //delete options
            afterSubmit: function(){
                   jQuery("#unitsTable").setGridParam({datatype: 'json', page: 1});
                   return [true, ''];
                },
            reloadAfterSubmit: true,
        }, 
        { //search options
        }  
    ).navSeparatorAdd('#unitsTablePager', {
    }).navButtonAdd('#unitsTablePager', {
        caption: 'XLS',
        buttonicon: 'none',
        onClickButton: function(){
            jQuery("#unitsTable").excelExport({
                url:'/admin/Export?listtype=listallnotdeletedunits&type=XLS'
            });
        },
        title: 'Lista mentés Excel-be',
    }).navSeparatorAdd('#unitsTablePager', {
    }).navButtonAdd('#unitsTablePager', {
        caption: 'PDF',
        buttonicon: 'none',
        onClickButton: function(){
            jQuery("#unitsTable").excelExport({
                url:'/admin/Export?listtype=listallnotdeletedunits&type=PDF'
            });
        },
        title: 'Lista mentés PDF-be',
    });
});
</script>

<body>
  <div id="units" style="outline-width: 0px; outline-style: initial; outline-color: initial; width:714px; position: relative; display: block; z-index: 1002; left: 0px; top: 0px; height: 759px; " class="ui-dialog ui-widget ui-widget-content ui-corner-all" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-dialog">
    <div id="unitsHeader"class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
      <table width="100%">
        <tr>
          <td width="30%">
            <span class="ui-dialog-title" id="ui-dialog-title-dialog">Mértékegységek</span>
          </td>
          <td width="70%" align="right">
            <div id="units">
            </div> 
          </td>
        </tr>    
      </table>
    </div>
    <div id="unitsEditorContent" class="ui-dialog-content ui-widget-content" style="width: auto; height: 670px; ">
      <table id="unitsTable"></table>
      <div id="unitsTablePager"></div>
    </div>
   <div id="fileUploader"></div>
   <link href="/admin/JQuery/jquery.Util/fileupoader.css" rel="stylesheet" type="text/css">
   <script type="text/javascript" src="/admin/JQuery/jquery.Util/fileupoader.js"></script>
    <script>        
    function createUploader(){            
        new qq.FileUploader({
            element: document.getElementById('fileUploader'),
            action: '/admin/Import',
            multiple: false,
            debug: true
        });           
    }
    window.onload = createUploader;     
    </script> 
    <div class="ui-resizable-handle ui-resizable-n"></div>
    <div class="ui-resizable-handle ui-resizable-e"></div>
    <div class="ui-resizable-handle ui-resizable-s"></div>
    <div class="ui-resizable-handle ui-resizable-w"></div> 
  </div> 
```

当我单击 main.jsp 上的 Unit 菜单时，unit.jsp 被加载到内容 div 中，但`<div id="fileUploader"></div>`丢失了。我检查了 Chrome - 工具 - 开发人员工具菜单，但它不在我的页面中。我能做些什么来解决这个问题？

THX 套件

我清理了 main.jsp 但什么也没发生....

```
<script type="text/javascript" src="/admin/JQuery/jquery-1.7.2.js"></script>
<script type="text/javascript" src="/admin/JQuery/jquery-ui-1.8.13.custom.min.js"></script>
<script type="text/javascript" src="/admin/JQuery/jquery.jqGrid/js/jquery.jqGrid.js"></script>
<script type="text/javascript" src="/admin/JQuery/jquery.jqGrid/js/i18n/grid.locale-hu.js"></script>

<link rel="stylesheet" type="text/css" href="/admin/style/themes/base/jquery.ui.all.css">
<link rel="stylesheet" type="text/css" href="/admin/style/themes/base/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="/admin/style/themes/main.css">
<link rel="stylesheet" type="text/css" href="/admin/JQuery/jquery.jqGrid/css/ui.jqgrid.css"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:46:46.783

我认为问题出在这里：

```
 <script type="text/javascript" src="/admin/JQuery/jquery-1.7.2.js"></script>
 <script type="text/javascript" src="/admin/JQuery/jquery-ui-1.8.13.custom.min.js"></script> 
<script type="text/javascript" src="/admin/JQuery/ui/jquery.ui.core.js"></script> 
```

我过去遇到过这个问题，因为您导入了具有相同功能的“.js”文件 - 我的意思是 jquery-1.7.2 和 jquery-ui.1.8.13 和 jquery.ui.core 可能是相同的，但是只有不同的版本。首先，删除 jquery.ui.core.js 或 jquery-ui-1.8.13.custom.min.js，如果不起作用，则将两者都删除并检查是否再次起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:02:21.727

我解决了...您必须以这种格式将其放在正文代码之前:)

```
<script>        
    $(document).ready(function createUploader(){
      var uploader = new qq.FileUploaderValums({
        element: document.getElementById('fileUploader'),
        action: '/admin/Import',            
      });           
    });
</script> 
```

# python - 重叠模式正则表达式

> ID：11377459
> 
> 赞同：0
> 
> 时间：2012-07-07T18:09:50.633
> 
> 标签：python, regex

使用 python 和正则表达式，我尝试匹配重复/重叠模式/块，例如

```
04/00127-48
U 05062012
A: SAKARK
T_ Par.: dsfsd 
```

在

```
04/00127-48
U 05062012
A: SAKARK
T_ Par.: dsfsd
04/00168-42
U 05062012
A: SAKARK
T_ Par.: fdfs
04/00168-43
U 05062012
A: SAKARK
T_ Par.: fdfs 
```

我试过了

```
'(?=(\d+\/.*))' 
```

这似乎有效

```
'((\d+\/.*?)=?\d+\/) 
```

但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:20:33.813

这回答了你的问题：

```
re.findall(r'.+?(?=\d\d\/|$)',s,re.DOTALL) 
```

`re.DOTALL`需要让`.`匹配行结束。

正则表达式的`r`前面使其成为原始字符串，因此带有反斜杠的转义符保持原样，因此正则表达式函数将处理它们。这里不需要它，但对于正则表达式来说仍然是一个好习惯。

你的问题不是很清楚。也许这更符合你想要的？

```
list(zip(*[iter(s.splitlines())]*4)) 
```

它给出了一个包含元组的列表。

# ruby-on-rails-3 - 使用 Spork 运行 RSpec 测试后，SimpleCov 报告未在 Rails 3 应用程序中生成

> ID：11377460
> 
> 赞同：8
> 
> 时间：2012-07-07T18:10:05.173
> 
> 标签：ruby-on-rails-3, rspec, code-coverage, ruby-on-rails-3.2, spork

我刚刚安装了[SimpleCov](https://github.com/colszowka/simplecov) gem 以在我的 Rails 3.2.6 应用程序上生成代码覆盖率报告，它与 RSpec 配合得很好，只是不适合 Spork。我可以通过运行来获得所需的正确报告`rspec --no-drb spec/`，但我也想通过运行 Spork 来获得它们`rspec spec/`。

鉴于有人在这方面取得了成功，看来我的设置可能有错误。我已经[阅读了设置说明](https://github.com/colszowka/simplecov/blob/master/README.md)以及声称为 Spork 用户提供修复的[GitHub 问题，但仍然没有运气。](https://github.com/colszowka/simplecov/issues/42)我想知道是否有人可以提供他们的工作**spec/spec_helper.rb**文件的完整示例，我可以用作参考，因为广泛的谷歌搜索只出现了片段。根据其他网站的建议，我尝试将`config.cache_classes`in **config/environments/test.rb**从默认的`true`to更改为`false`to `!(ENV['DRB'] == 'true')`，但没有成功。

作为参考，这是我的设置方式：

**宝石文件**

```
group :development, :test do
  # ...
  gem 'rspec-rails', '2.10.1'
end

group :test do
  # ...
  gem 'spork', '0.9.0'
  gem 'simplecov', '0.6.4', require: false
end 
```

**.spec**

```
--colour
--drb 
```

**spec/spec_helper.rb**（根据[GitHub 问题](https://github.com/colszowka/simplecov/issues/42)更改）

```
require 'simplecov'
SimpleCov.start 'rails'

require 'rubygems'
require 'spork'

Spork.prefork do
  unless ENV['DRB']
    require 'simplecov'
    SimpleCov.start 'rails'
  end

  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    config.mock_with :rspec
    config.fixture_path = "#{::Rails.root}/spec/fixtures"
    config.use_transactional_fixtures = true
    config.infer_base_class_for_anonymous_controllers = false
  end
end

Spork.each_run do
  if ENV['DRB']
    require 'simplecov'
    SimpleCov.start 'rails'
  end
end 
```

我已经尝试注释掉/更改`SimpleCov`此文件的前两个语句和`Spork`块内的 Simplecov 语句，但似乎找不到有效的组合。

我错过了什么？我还需要更改其他文件吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T13:03:21.023

由于对[Github 问题的评论](https://github.com/colszowka/simplecov/issues/42#issuecomment-7148628)将我发送[到此博客条目](http://rickyrobinson.id.au/2012/07/20/when-spork-puts-a-fork-in-your-cucumber-and-a-spanner-in-your-specs)及其[示例](http://rickyrobinson.id.au/2012/07/20/when-spork-puts-a-fork-in-your-cucumber-and-a-spanner-in-your-specs#spec_helper.rb)[**spec/spec_helper.rb**](http://rickyrobinson.id.au/2012/07/20/when-spork-puts-a-fork-in-your-cucumber-and-a-spanner-in-your-specs#spec_helper.rb) ，我设法获得了一个可以正确执行 SimpleCov的有效**spec/spec_helper.rb**配置。这个工作的所有原因*都*包含在（非常详细！）博客条目中。替换为您的应用程序的名称。`$ rspec spec/`[](http://rickyrobinson.id.au/2012/07/20/when-spork-puts-a-fork-in-your-cucumber-and-a-spanner-in-your-specs#spec_helper.rb)***`SampleApp`***

 *****规范/spec_helper.rb**

```
require 'rubygems'
require 'spork'

Spork.prefork do
  unless ENV['DRB']
    require 'simplecov'
    SimpleCov.start 'rails'
  end

  require 'rails/application'
  require Rails.root.join("config/application")

  ENV["RAILS_ENV"] ||= 'test'
  require 'rspec/rails'
  require 'rspec/autorun'

  RSpec.configure do |config|
    config.mock_with :rspec
    config.fixture_path = "#{::Rails.root}/spec/fixtures"
    config.use_transactional_fixtures = false

    config.before :each do
      if Capybara.current_driver == :rack_test
        DatabaseCleaner.strategy = :transaction
      else
        DatabaseCleaner.strategy = :truncation
      end
      DatabaseCleaner.start
    end

    config.after do
      DatabaseCleaner.clean
    end

    config.infer_base_class_for_anonymous_controllers = false
  end
end

Spork.each_run do
  if ENV['DRB']
    require 'simplecov'
    SimpleCov.start 'rails'
    SampleApp::Application.initialize!
    class SampleApp::Application
      def initialize!; end
    end
  end

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
end 
```

### 编辑

如果您使用[Travis-CI](http://travis-ci.org/)，请不要按原样使用此代码，因为您可能会收到`undefined method 'root' for Rails:Module (NoMethodError)`错误。如果您知道如何解决此问题，请分享。

### 编辑 2

我通过基本上将所有东西都放在`Spork.each_run`块中来让 Travis CI 工作，这似乎显着减慢了测试速度。必须有更好的方法来做到这一点，或者为了不必运行`$ rspec --no-drb spec/`一次即可获得 SimpleCov 报告，这似乎不值得......

**规范/spec_helper.rb**

```
require 'rubygems'
require 'spork'

Spork.prefork do
  unless ENV['DRB']
    require 'simplecov'
    SimpleCov.start 'rails'
  end

  require 'rails/application'
  ENV["RAILS_ENV"] ||= 'test'
end

Spork.each_run do
  if ENV['DRB']
    require 'simplecov'
    SimpleCov.start 'rails'
    require Rails.root.join("config/application")
    SampleApp::Application.initialize!
    class SampleApp::Application
      def initialize!; end
    end
  end

  unless ENV['DRB']
    require File.expand_path("../../config/environment", __FILE__)
  end

  require 'rspec/rails'
  require 'rspec/autorun'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    config.mock_with :rspec

    config.fixture_path = "#{::Rails.root}/spec/fixtures"
    config.use_transactional_fixtures = false
    config.before :each do
      if Capybara.current_driver == :rack_test
        DatabaseCleaner.strategy = :transaction
      else
        DatabaseCleaner.strategy = :truncation
      end
      DatabaseCleaner.start
    end

    config.after do
      DatabaseCleaner.clean
    end
    config.infer_base_class_for_anonymous_controllers = false
  end
end 
```

### 编辑 3

在使用这个配置几天后，它似乎并没有像我以前想象的那样减慢速度，所以除非发布更优雅的答案，否则我会认为这是公认的答案。

### 编辑 4

使用这个配置几个月后，我开始意识到它*比*我想象的要慢。部分原因是意识到 Spork 似乎可以减慢测试套件的速度，并且最适合快速迭代集中测试，而不是始终使用它运行整个测试套件。以下 SO 问题和博客文章将我带到了下面的**spec_helper.rb**文件，它可以在有或没有 Spork 的情况下运行 SimpleCov，运行速度比以前更快，并且可以与 Capybara 2.0 一起使用。

*   [使用 spork 的 Rails 项目 - 总是必须使用 spork？](https://stackoverflow.com/q/8192636/567863)
*   [如何使用 perftools 和 bundler 分析 RSpec？](https://stackoverflow.com/q/9680481/567863)
*   [Spork.trap_method 柔术](https://github.com/sporkrb/spork/wiki/Spork.trap_method-Jujitsu)
*   [当 Spork 在您的 Cucumber 中放入叉子并在您的规格中放入扳手时](http://rickyrobinson.id.au/2012/07/20/when-spork-puts-a-fork-in-your-cucumber-and-a-spanner-in-your-specs)
*   [调整你的规格](http://blog.carbonfive.com/2011/02/02/crank-your-specs/)
*   [分析 Spork 以加快启动时间](http://www.opinionatedprogrammer.com/2011/02/profiling-spork-for-faster-start-up-time/)
*   [Sane RSpec 配置用于干净且稍快的规范](http://highgroove.com/articles/2012/04/06/sane-rspec-config-for-clean,-and-slightly-faster,-specs.html)

**规范/spec_helper.rb**

```
require 'rubygems'
require 'spork'
require 'simplecov'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  unless ENV['DRB']
    SimpleCov.start 'rails'
    require File.expand_path("../../config/environment", __FILE__)
  end

  require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rails'
  require 'capybara/rspec'

  # files to preload based on results of Kernel override code below
  # ie they took more than 100 ms to load
  require "sprockets"
  require "sprockets/eco_template"
  require "sprockets/base"
  require "active_record/connection_adapters/postgresql_adapter"
  require "tzinfo"
  require "tilt"
  require "journey"
  require "journey/router"
  require "haml/template"

  RSpec.configure do |config|
    config.mock_with :rspec

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = false

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false

    config.include FactoryGirl::Syntax::Methods

    config.before :suite do
      # PerfTools::CpuProfiler.start("/tmp/rspec_profile")
      DatabaseCleaner.strategy = :transaction
      DatabaseCleaner.clean_with(:truncation)
    end

    # Request specs cannot use a transaction because Capybara runs in a
    # separate thread with a different database connection.
    config.before type: :request do
      DatabaseCleaner.strategy = :truncation
    end

    # Reset so other non-request specs don't have to deal with slow truncation.
    config.after type: :request  do
      DatabaseCleaner.strategy = :transaction
    end

    RESERVED_IVARS = %w(@loaded_fixtures)
    last_gc_run = Time.now

    config.before(:each) do
      GC.disable
    end

    config.before do
      DatabaseCleaner.start
    end

    config.after do
      DatabaseCleaner.clean
    end

    # Release instance variables and trigger garbage collection
    # manually every second to make tests faster
    # http://blog.carbonfive.com/2011/02/02/crank-your-specs/
    config.after(:each) do
      (instance_variables - RESERVED_IVARS).each do |ivar|
        instance_variable_set(ivar, nil)
      end
      if Time.now - last_gc_run > 1.0
        GC.enable
        GC.start
        last_gc_run = Time.now
      end
    end

    config.after :suite do
      # PerfTools::CpuProfiler.stop

      # REPL to query ObjectSpace
      # http://blog.carbonfive.com/2011/02/02/crank-your-specs/
      # while true
      #   '> '.display
      #   begin
      #     puts eval($stdin.gets)
      #   rescue Exception => e
      #     puts e.message
      #   end
      # end
    end
  end

  # Find files to put into preload
  # http://www.opinionatedprogrammer.com/2011/02/profiling-spork-for-faster-start-up-time/
  # module Kernel
  #   def require_with_trace(*args)
  #     start = Time.now.to_f
  #     @indent ||= 0
  #     @indent += 2
  #     require_without_trace(*args)
  #     @indent -= 2
  #     Kernel::puts "#{' '*@indent}#{((Time.now.to_f - start)*1000).to_i} #{args[0]}"
  #   end
  #   alias_method_chain :require, :trace
  # end
end

Spork.each_run do
  # This code will be run each time you run your specs.
  if ENV['DRB']
    SimpleCov.start 'rails'
    SampleApp::Application.initialize!
    class SampleApp::Application
      def initialize!; end
    end
  end

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
  FactoryGirl.reload
  I18n.backend.reload!
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T03:31:23.717

我在具有这些特定版本的 Rails 应用程序中工作：

*   `rails`(3.2.8)
*   `guard`(1.3.2)
*   `guard-spork`(1.1.0)
*   `spork`(0.9.2)
*   `simplecov`(0.6.4)
*   `rspec-rails`(2.11.0)

`spec/spec_helper.rb`看起来像这样：

```
require "spork"

Spork.prefork do

end

Spork.each_run do
  require "simplecov"
  SimpleCov.start "rails"

  ENV["RAILS_ENV"] ||= "test"
  require File.expand_path("../../config/environment", __FILE__)
  require "rspec/rails"
  require "capybara/rspec"

  Dir[Rails.root.join("spec/support/**/*.rb")].each { |f| require f }

  FactoryGirl.reload
end 
```

虽然从性能的角度来看，要求块中的所有内容可能不太理想`Spork.each_run`，但这会在每次测试调用时正确运行 SimpleCov，并且开销似乎相对较低。

我希望这会有所帮助。祝你好运！***

# android - 为什么 Eclipse 以只读模式打开一些文件？

> ID：11377461
> 
> 赞同：1
> 
> 时间：2012-07-07T18:10:09.957
> 
> 标签：android, eclipse

我刚开始使用 Eclipse（用于 Android 开发）——所以我对这个 IDE 很陌生，而且我不明白一些东西。有时（通常 - 在调试时或之后）我发现我的一些文件的代码处于只读模式 - 我无法编辑我的代码。我在状态栏中看到“只读”标签 - 但我不知道该文件何时以及为何变为只读。我对此文件无能为力，必须关闭它并在项目树中再次找到并打开 - 然后我可以编辑它。我被迫每隔几分钟做一次——所以我不喜欢这种行为。

为什么会发生这种情况？我能做些什么来避免它？如何使编辑器中的文件可从只读模式编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T06:22:06.430

当您使用像 ClearCase 这样的“悲观”源代码控制系统时，或者当文件本身在文件系统中被标记为只读时，也会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T14:18:48.220

通常在调试和跟踪代码时会发生这种情况。Eclipse会打开`.class`文件，大多数时候`.class`文件是你正在使用的库的来源，有时它们是`.class`你自己的代码生成的，这就是你不能编辑它们的原因。. 虽然这是你的代码；如果你想编辑它，你应该去你自己的源（`.java`）

# c - 从这个给定的例子中，TCP/UDP 连接发生在哪里？

> ID：11377463
> 
> 赞同：0
> 
> 时间：2012-07-07T18:10:43.873
> 
> 标签：c, pthreads

我有一个开源示例，它正在工作，但我无法理解 TCP/UDP 连接发生在哪里？`HHNET_LogonServer`

测试.c：

```
#include "HHNet.h"
#include "HHDecoder.h"

#include "stdio.h"
#include <unistd.h> 
#include <pthread.h>
#include <netinet/in.h>

...

int main(int argc, char **argv) {
    HHERR_CODE      errCode;
    unsigned long   dwTmp;
    unsigned int    nPort;

    errCode     = HHERR_FAILURE;

    if (argc < 4) {
        printf("Usage:<./SDKDemo> <IP> <Username> <Password> <Data port>\n");
        exit(0);
    } else {
        dwTmp = strlen(*(argv + 1));
        if ( (dwTmp > 7) && (dwTmp < 15 )) {
            g_pIPString = (*(argv + 1));
        } else {
            printf("Invalid IP !\n");
        }
        g_pUseName  = argv[2];
        g_pPASSWD   = argv[3];

        if ((nPort = atoi(argv[4])) > 0) {
            g_lPort = nPort;
        }
    }

    errCode = HHNET_Startup(5000, LogonNotifyCallback, CheckUserPswCallback, UpdateFileCallback, ServerMsgCmdCallback, StreamWriteCheckCallback, (ChannelStreamCallback)PreviewStreamCallback);
    printf(">HHNET_Startup: %s\n", errCode?"Failed!":"Successful!");

    HANDLE m_hLogonServer;  
    errCode = HHNET_LogonServer(g_pIPString, g_lPort, "admin", g_pUseName, g_pPASSWD, 0, &m_hLogonServer);
    printf(">HHNET_LogonServer: %s\n",errCode?"Failed!":"Successful!");

    errCode = HHNET_LogoffServer(m_hLogonServer);

    if (errCode) {
        printf("Error code:%d\n", errCode);
        printf(">HHNET_LogoffServer: Failed!\n");
    } else  {
        printf(">HHNET_LogoffServer: Successful!\n");
    }
     HHNET_Cleanup();
     return 0;
} 
```

HHNet.h：（[https://gist.github.com/3067481](https://gist.github.com/3067481)）

```
HHERR_CODE      HHNET_LogonServer(IN  CHAR *pServerIP,IN  UINT nServerPort,IN  CHAR *pDeviceName,IN  CHAR *pUserName,IN  CHAR *pUserPassword,IN UINT dwClientID,OUT  HANDLE *hLogonServer); 
```

HHDecoder.h：（[https://gist.github.com/3067481](https://gist.github.com/3067481)）

输出：

```
$ ./test 192.168.0.199 admin admin 5000
sh: /proc/sys/net/ipv4/tcp_keepalive_time: Permission denied
sh: /proc/sys/net/ipv4/tcp_keepalive_intvl: Permission denied
sh: /proc/sys/net/ipv4/tcp_keepalive_probes: Permission denied
>HHNET_Startup: Successful!
--->|   HHNET_LogonServer :192.168.0.199
>HHNET_LogonServer: Successful!
>HHNET_LogoffServer: Successful! 
```

但我不知道这个触发器发生在哪里`--->| HHNET_LogonServer :192.168.0.199`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:14:50.973

你在你的问题中说过

```
HHNET_LogonServer(IN  CHAR *pServerIP,IN  UINT nServerPort,IN  CHAR *pDeviceName,IN  CHAR *pUserName,IN  CHAR *pUserPassword,IN UINT dwClientID,OUT  HANDLE *hLogonServer); 
```

在这个函数内部，一个套接字被创建并连接到远程。

# php - 当 php 版本高于 5.2 时，网站运行缓慢

> ID：11377464
> 
> 赞同：0
> 
> 时间：2012-07-07T18:10:49.447
> 
> 标签：php, windows, php-5.2

我的网站一直运行良好，直到我将其 php 版本更新到 5.4.4（我也尝试了 5.3），我无法继续使用 php v5.2，因为我添加了一些 5.2 版本不支持的功能。

我在 Windows 服务器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:02:24.240

使用 xdebug 分析您的 PHP。

您可以看到[PROFILING PHP WITH XDEBUG AND WEBGRIND](http://www.chrisabernethy.com/php-profiling-xdebug-webgrind/)，xdebug 文件的主要解析器 (kcachegrind) 是 Linux 原生的。

另一种方法是[kcachegrind 的 windows 端口](http://precompiledbin.sourceforge.net/)，但我从未尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:45:52.490

XHProf 是另一个简单的 Profiling 工具，使用和配置非常简单。

# awk - 使用 awk 将一个字符串替换为另一个字符串（文件中包含的映射表）

> ID：11377470
> 
> 赞同：1
> 
> 时间：2012-07-07T18:11:08.753
> 
> 标签：awk

我想知道是否可以仅使用 awk 执行以下操作：我正在文件中搜索一些正则表达式 Fand 我想用另一个字符串 (S2) 替换与正则表达式匹配的字符串 (S1)。当然，使用 awk 很容易做到这一点。但是......我的问题是必须从将 S1 映射到 S2 的另一个文件中获取 S2 的值。

例子 ：

## 文件 F：

```
abcd 168.0.0.1 qsqsjsdfjsjdf
sdfsdffsd
168.0.0.2 sqqsfjqsfsdf 
```

## 我在另一个文件中的关联表

```
168.0.0.1 foo
168.0.0.2 bar 
```

我想得到：

## 这个结果：

```
abcd foo qsqsjsdfjsjdf
sdfsdffsd
bar sqqsfjqsfsdf 
```

感谢帮助 ！

**编辑**：如果我的输入文件有点不同，像这样（IP地址前没有空格）：

## 文件 F：

```
abcd168.0.0.1 qsqsjsdfjsjdf
sdfsdffsd
168.0.0.2 sqqsfjqsfsdf 
```

我不能在关联数组中使用 $1、$2 变量和搜索。我尝试了类似的方法（基于 birei 命题），但没有奏效：

```
FNR < NR {
    sub(/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/, assoc [ & ] );
    print
} 
```

有没有办法在关联数组中搜索匹配的字符串（assoc[ & ] 似乎无效）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T18:48:09.890

单程。这是不言自明的。将关联表中的数据保存在数组中，并在第二个文件中检查每个字段是否与数组的任何键匹配：

```
awk '
    FNR == NR {
        assoc[ $1 ] = $2;
        next;
    }
    FNR < NR {
        for ( i = 1; i <= NF; i++ ) {
            if ( $i in assoc ) {
                $i = assoc[ $i ]
            }
        }
        print
    }
' associative_file F 
```

输出：

```
bcd foo qsqsjsdfjsjdf                                                                                                                                                                                                                        
sdfsdffsd                                                                                                                                                                                                                                    
bar sqqsfjqsfsdf 
```

* * *

**编辑**：尝试以下`awk`脚本，用于没有空格的 IP 及其周围的单词。它与前一个类似，但现在它在数组中搜索并尝试在该行的任何位置找到一个 IP（默认`$0`为`gsub`）并替换它。

```
awk '
    FNR == NR {
        assoc[ $1 ] = $2;
        next;
    }
    FNR < NR {
        for ( key in assoc ) {
            gsub( key, assoc[ key ] )
        }
        print
    }
' associative_file F 
```

假设`infile`使用第二个 file 示例的内容`F`，输出将是：

```
abcdfoo qsqsjsdfjsjdf                                                                                                                                                                                                                        
sdfsdffsd                                                                                                                                                                                                                                    
bar sqqsfjqsfsdf 
```

# android - 导航抽屉（Google+ 与 YouTube）

> ID：11377472
> 
> 赞同：407
> 
> 时间：2012-07-07T18:11:44.263
> 
> 标签：android, android-layout, user-interface, navigation-drawer

有谁知道如何实现像当今一些顶级应用程序一样的滑动菜单？

其他 Stack Overflow[问题](https://stackoverflow.com/questions/11328895/facebook-lide-slideout-menu-not-using-that-library)还没有关于如何做到这一点的任何答案，所以我正在尝试收集尽可能多的信息来帮助其他人。我在下面提到的所有应用程序在实现滑动菜单方面做得很好。

## 1\. Google Plus（截至 2012 年 7 月 7 日）

![Google+ 滑出菜单截图](../Images/c30e5cd9be90b31061bae20b0e1bf0c5.png)

您只能通过单击左上角的 G+ 徽标从第一个屏幕转到第二个屏幕。请注意，整个屏幕从它的位置移动并被轻推到屏幕的右侧（包括操作栏）。要返回第一个屏幕，您可以将右侧滑回焦点，也可以再次单击 G+ 图标。

## 2\. YouTube（截至 2012 年 7 月 7 日）

![YouTube 滑出菜单截图](../Images/9faf10445171c228fc96b6c7e24b9de0.png)

您可以使用两种方法从第一个屏幕转到第二个屏幕。单击左上角的 YouTube 徽标，或者您可以使用滑动手势将其向右移动。这已经与 G+ 应用不同了。其次，您可以看到操作栏保持不变（与 G+ 不同）。最后，要恢复原始屏幕，它就像 G+ 一样工作。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-07-08T00:48:53.123

## 编辑＃3：

Navigation Drawer 模式在 Android 文档中有正式描述！

![在此处输入图像描述](../Images/e937b1e565ff2ef77e2cb4a0aa9e9843.png) 查看以下链接：

*   *设计文档*可以在**[这里](http://developer.android.com/design/patterns/navigation-drawer.html)**找到。
*   *开发者文档*可以在**[这里](http://developer.android.com/training/implementing-navigation/nav-drawer.html)**找到。

* * *

## 编辑#2：

Roman Nurik（Google 的一名 Android 设计工程师）已确认建议的行为是在打开抽屉（如 YouTube 应用程序）时不要移动操作栏。请参阅此[Google+ 帖子](https://plus.google.com/u/0/108238734975008671651/posts/6SPfDiML7MJ)。

* * *

## 编辑＃1：

我刚才回答了这个问题，但我回来再次强调**Prixing 拥有目前为止最好的弹出式菜单**。它绝对漂亮，完美流畅，让 Facebook、Google+ 和 YouTube 感到羞耻。EverNote 也很不错……但仍不如 Prixing 完美。查看有关如何实现弹出菜单的[**这一系列帖子**](http://android.cyrilmottier.com/?p=658)（来自 Prixing 的首席开发人员本人！）。

* * *

## 原答案：

Adam Powell 和 Richard Fulcher 在[49:47 - 52:50](http://youtu.be/XwGHJJYBs0Q?t=49m47s)在名为“Android 导航”的 Google I/O 演讲中讨论了这个问题。

总结他们的回答，截至本文发布之日，滑出式导航菜单*尚未*正式成为 Android 应用程序设计标准的一部分。正如您可能已经发现的那样，目前没有对此功能的本地支持，但有人谈论将其添加到即将发布的支持包修订版中。

关于 YouTube 和 G+ 应用程序，它们的行为不同似乎很奇怪。我最好的猜测是 YouTube 应用程序固定操作栏位置的原因是，

1.  对于使用 YouTube 应用程序的用户来说，最重要的导航选项之一是搜索，它`SearchView`在操作栏中执行。在这方面将操作栏设为静态是有意义的，因为它允许用户*始终*可以选择搜索新视频。

2.  G+ 应用程序使用 a`ViewPager`来显示其内容，因此使拉出菜单特定于布局内容（即操作栏下的所有内容）没有多大意义。滑动应该提供一种在页面之间导航的方法，而不是一种全局导航的方法。这可能就是他们决定在 G+ 应用中采用与在 YouTube 应用中不同的方式的原因。

    另一方面，请查看 Google Play 应用程序以获取另一个版本的“拉出菜单”（当您位于最左侧页面时，向左滑动并拉出，将出现“半页”菜单）。

你是对的，这不是非常一致的行为，但 Android 团队内部似乎还没有就如何实现这种行为达成 100% 的共识。如果将来更新应用程序以使两个应用程序中的导航相同，我不会感到惊讶（他们似乎非常热衷于在谈话中使所有 Google 制造的应用程序的导航保持一致）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-19T07:06:06.920

就在最近，我分叉了一个名为“RibbonMenu”的当前 Github 项目，并对其进行了编辑以满足我的需要：

[https://github.com/jaredsburrows/RibbonMenu](https://github.com/jaredsburrows/RibbonMenu)

### 目的是什么

*   易于访问：允许轻松访问滑入和滑出的菜单
*   易于实施：使用最少的代码更新同一屏幕
*   独立性：不需要ActionBarSherlock等支持库
*   定制：易于更改颜色和菜单

### 什么是新的

*   更改了滑动动画以匹配 Facebook 和 Google+ 应用
*   添加了标准的ActionBar（可以选择使用ActionBarSherlock）
*   使用 menuitem 打开菜单
*   添加了在主 Activity 上更新 ListView 的功能
*   在菜单中添加了 2 个列表视图，类似于 Facebook 和 Google+ 应用程序
*   添加了 AutoCompleteTextView 和 Button 以显示实现示例
*   添加了允许用户在打开菜单时点击“后退按钮”以隐藏菜单的方法
*   与 Facebook 和 Google+ 应用程序不同，允许用户同时与背景（主 ListView）和菜单进行交互！

带有菜单的操作栏

![带有菜单的操作栏](../Images/f1e2221b50d345294beb07c183ec2cf3.png)

选择了菜单和搜索的操作栏

![选择了菜单和搜索的操作栏](../Images/e2d636dff709e60c64a0471f11a9f74c.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-27T11:47:31.347

有一个很好的实现，`NavigationDrawer`它遵循 Google Material Design Guidelines（并且兼容到 API 10）- MaterialDrawer 库[（链接到 GitHub）](https://github.com/mikepenz/MaterialDrawer)。截至 2017 年 5 月撰写本文时，它得到了积极支持。

它在[Maven Central repo](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22materialdrawer%22 "Maven 中心")中可用。Gradle 依赖设置：

```
compile 'com.mikepenz:materialdrawer:5.9.1' 
```

Maven依赖设置：

```
<dependency>
    <groupId>com.mikepenz</groupId>
    <artifactId>materialdrawer</artifactId>
    <version>5.9.1</version>
</dependency> 
```

![在此处输入图像描述](../Images/91f1173f7cdb6e6bf8b9deaeba146d1e.png) ![在此处输入图像描述](../Images/708b724271ce28c4c6c560a32e645714.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-29T14:21:38.793

我个人喜欢`navigationDrawer`Google Drive 官方应用中的。它只是工作并且工作得很好。我同意导航抽屉不应该移动操作栏，因为它是打开和关闭导航抽屉的关键点。

如果您仍在尝试获得这种行为，我最近创建了一个名为 Called 的项目`SherlockNavigationDrawer`，正如您所料，Navigation Drawer 的实现与`ActionBarSherlock`预 Honeycomb 设备一起工作。核实：

[SherlockNavigationDrawer github](https://github.com/nicolasjafelle/SherlockNavigationDrawer)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-24T10:59:23.900

我知道这是一个老问题，但最新的答案是使用[Android 支持设计库](http://android-developers.blogspot.co.uk/2015/05/android-design-support-library.html)，这将使您的生活变得轻松。

# flash - 使用 svgweb 在 svg 上未触发加载事件

> ID：11377473
> 
> 赞同：0
> 
> 时间：2012-07-07T18:11:45.620
> 
> 标签：flash, internet-explorer, svg, onload, event-listener

我尝试在 SVG 之后做一些事情（由`<object>`:)

```
<!--[if !IE]>-->
<object data="file.svg" type="image/svg+xml" id="image-1" width="760" height="730" > <!--<![endif]-->
<!--[if lt IE 9]>
<object src="file.svg" classid="image/svg+xml" width="200" height="200" id="image-1" width="760" height="730"> <![endif]-->
<!--[if gte IE 9]>
<object data="file.svg" type="image/svg+xml" id="image-1" width="760" height="730">  
<![endif]-->
</object> 
```

已加载：

```
a = document.getElementById("image-1");
a.addEventListener("load",function(){
   //some stuff
},false); 
```

这在具有原生 SVG 支持的浏览器中运行良好。然而，当 SVG 提供 svgweb 的 flash 支持时，我无法触发加载事件。我是不是搞砸了，或者这是意料之中的事情？

当 flash fallback 准备好时，我可以做些什么来触发事件？我需要这个来动态隐藏/显示`<path>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:37:13.503

您是否尝试过收听“SVGLoad”事件？

有关如何操作，请参阅SVGWeb[的用户手册](http://svgweb.googlecode.com/svn/trunk/docs/UserManual.html#scripting)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:33:58.147

我无法让 SVGWeb 加载事件在具有嵌入式 SVG 文件的不同浏览器中持续触发。我发现这种方法在任何地方都可以使用，并且可以与 jQuery 一起使用：

在`</svg>`标签之前的 SVG 文件的末尾：

```
<script type="text/javascript"><![CDATA[
    window.parent.SVGInit();
]]></script> 
```

然后在 SVG 嵌入上方的 HTML 文件中：

```
<script>
    function SVGInit() {
        $(document).ready(function(){
            // SVG is loaded and ready.
        });             
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:26:56.690

您使用的是哪个版本的 svgWeb？尝试更新到 Lurker Above。以前的版本可能会覆盖 jquery 的负载处理程序。另外，请尝试使用以下语法：

```
mysvg.load = mysvg.onsvgload = function(){
    //Handler
} 
```

# c++ - 调整 Canny 边缘算法中的阈值

> ID：11377475
> 
> 赞同：5
> 
> 时间：2012-07-07T18:12:13.227
> 
> 标签：c++, algorithm, image-processing, opencv, edge-detection

我想尝试一下文本识别，所以我使用 opencv 来追踪边缘和 c++ 来查找斜率、曲线等，边缘算法在大而整洁的字符集上效果很好，但是当它遇到小的印刷文本时或具有大量背景噪音的文本，例如嵌入在验证码中的文本，它很难并且看起来不完整，我的猜测是我没有正确设置阈值并尝试了不同的值但没有成功。

![在此处输入图像描述](../Images/13b6f29987b298b4a7745b675ee30f59.png)

![在此处输入图像描述](../Images/529b3ee2607a4e7241492ee4c1db44c6.png)

这是我的代码：

```
#include "cv.h"
#include "highgui.h"
using namespace cv;
const int low_threshold  = 50;
const int high_threshold = 150;

int main()
{

    IplImage* newImg; 
    IplImage* grayImg; 
    IplImage* cannyImg; 

    newImg = cvLoadImage("ocv.bmp",1);

    grayImg = cvCreateImage( cvSize(newImg->width, newImg->height), IPL_DEPTH_8U, 1 );

    cvCvtColor( newImg, grayImg, CV_BGR2GRAY );
    cannyImg = cvCreateImage(cvGetSize(newImg), IPL_DEPTH_8U, 1);

    cvCanny(grayImg, cannyImg, low_threshold, high_threshold, 3);
    cvNamedWindow   ("Source", 1);
    cvNamedWindow   ("Destination",1);
    cvShowImage     ("Source", newImg );
    cvShowImage     ("Destination", cannyImg );
    cvWaitKey(0);
    cvDestroyWindow ("Source" );
    cvDestroyWindow ("Destination" );
    cvReleaseImage  (&newImg );
    cvReleaseImage  (&grayImg );
    cvReleaseImage  (&cannyImg );

return 0;

} 
```

我浏览了整个网络，并在此站点的此代码中看到了一些复杂的阈值条件：

```
% Set direction to either 0, 45, -45 or 90 depending on angle.
[x,y]=size(f1);
for i=1:x-1,
    for j=1:y-1,
        if ((gradAngle(i,j)>67.5 && gradAngle(i,j)<=90) || (gradAngle(i,j)>=-90 && gradAngle(i,j)<=-67.5)) 
            gradDirection(i,j)=0;
        elseif ((gradAngle(i,j)>22.5 && gradAngle(i,j)<=67.5))
            gradDirection(i,j)=45;
        elseif ((gradAngle(i,j)>-22.5 && gradAngle(i,j)<=22.5))
            gradDirection(i,j)=90;
        elseif ((gradAngle(i,j)>-67.5 && gradAngle(i,j)<=-22.5))
            gradDirection(i,j)=-45;
        end
    end
end 
```

如果这是解决方案，有人可以为我提供这个算法的 c++ 等价物，如果不是我还能做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T19:01:25.207

Canny 边缘检测器是一个多步检测器，使用滞后阈值（它使用两个阈值而不是一个阈值）和边缘跟踪（您的最后一个片段是此步骤的一部分）。我建议先阅读[维基百科](http://en.wikipedia.org/wiki/Canny_edge_detector)条目。一种可能的解决方案是选择高阈值，例如 70% 的图像像素将被分类为边缘（最初 - 您可以使用直方图快速完成此操作），而不是选择低阈值作为高阈值的 40%。尝试对图像块而不是整个图像执行边缘检测可能是一个好主意，因此您的算法可以为不同区域计算不同的阈值。

请注意，CAPTCHA-s 设计为难以分割，添加破坏边缘检测的噪声是实现此目的的一种技术（您可能需要先平滑图像）。

# java - 如何将在 windows-1250/Cp1250 中编码的字符串转换为 utf-8？

> ID：11377480
> 
> 赞同：5
> 
> 时间：2012-07-07T18:12:34.137
> 
> 标签：java, string

正如标题所说...我从 htto 响应中读取内容

```

    InputStream is = response.getEntity().getContent();
    String cw = IOUtils.toString(is);
    byte[] b = cw.getBytes("Cp1250");
    String x = StringUtils.newStringUtf8(b);
    String content = new String(b, "UTF-8");

    System.out.println(content);

```

我已经尝试了很多变化。我对用作字符串的正确编码常量有点困惑。windows-1250 或 Cp1250。UTF-8 还是 utf-8 还是 utf8？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T18:31:55.503

您似乎认为一个`String`对象具有编码。这是不正确的。编码用作从二进制数据（a`byte[]`或`InputStream`）到文本数据（a`String`或`char[]`等）的转换的一部分。

目前尚不清楚`IOUtils.toString`在做什么，但几乎可以肯定它会丢失数据或至少处理不当。如果您的数据最初位于 Windows-1250 中，那么您应该使用`InputStreamReader`包装，在构造函数调用`InputStream`中指定字符集。`InputStreamReader`

目前尚不清楚 UTF-8 的来源 - 之后您可能想用 UTF-8*写出*数据，但结果将是`byte[]`，而不是字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T18:24:28.327

你正在向后转换。您需要将输入数据作为`byte`数组获取，然后用于`String(byteArray, "Cp1250")`创建 String 对象。然后，如果您想要 UTF-8，请使用`String.getBytes("UTF-8")`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T19:08:43.823

编码具有规范（唯一）名称和其他不同的名称，并且不区分大小写。例如，“UTF-8”是规范名称，但有些 Java 版本支持它是“UTF8”；它被更多地写入了常用用法。“Windows-1250”也是如此，您可能还会在 HTML 页面中看到它。“Cp1250”（代码页）是一个 java 内部名称。

**在java byte[] 是二进制数据，String（内部Unicode）是文本。** 两者之间的转换需要编码，通常是可选的，采用操作系统默认值。

字节、输入流、输出流 <-> 字符串、字符、读取器、写入器

```
String cw = IOUtils.toString(is, "UTF-8"); // InputStream is binary gives byte[], hence give encoding
byte[] b = cw.getBytes("Cp1250");
String x = new String(b, "Cp1250");
String content = s;

System.out.println(content); 
```

为了允许这种通用（qua 编码）字符串，字符串在内部使用 char、UTF-16。字符串常量以 UTF-8（更紧凑）的形式存储在 .class 文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T18:53:11.357

假设 Apache Commons IO，使用[指定编码的方法之一](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.lang.String%29)：

```
String cw = IOUtils.toString(is, "windows-1250"); 
```

Java 中的所有字符串都是隐式的 UTF-16。其他编码通常使用字节数组表示。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-22T17:40:30.627

我认为最好使用 Scanner 阅读不同的字符集。

```
 FileInputStream is = new FileInputStream(fileOrPath);
    Scanner scanner = new Scanner(is, "cp1250");
    String out = scanner.next(); 
```

并且方法以应用程序的字符集`next()`返回`String`值。

测试从“cp1250”到“UTF-8”的“捷克语”。

# android - Android TextSwitcher 大小在显示设置中更改字体大小时增加

> ID：11377485
> 
> 赞同：0
> 
> 时间：2012-07-07T18:13:25.947
> 
> 标签：android, android-layout, font-size

在我的应用程序中，我为所有文本元素设置了固定字体大小。对于我正在使用的 TextSwitcher，我正在设置这样的字体大小。

```
altitudeSwitcher = (TextSwitcher) findViewById(R.id.altitude);
        altitudeSwitcher.setFactory(new ViewFactory() {

            @Override
            public View makeView() {
                GradientColor gd = Gradients.AllGradients().get(2);

                TextView t = new TextView(getApplicationContext());
                t.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL);
                t.setTextSize(50);
                t.setTextColor(gd.getTextColor());
                return t;
            }
        }); 
```

但是在显示设置中将字体大小更改为巨大时，它的大小会增加很多。如何设置固定字体大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:29:22.100

那是一个愚蠢的怀疑。发现了。我不得不像这样设置单位`setTextSize(TypedValue.COMPLEX_UNIT_DIP, 50);`

# javascript - 如何使用 XPath 表达式在 CasperJS 中检索元素的属性

> ID：11377487
> 
> 赞同：4
> 
> 时间：2012-07-07T18:13:32.400
> 
> 标签：javascript, xpath, phantomjs, casperjs

我在两行之间有一个网页：

```
<a href="http://foo.com/home.do?SID=3443132">... 
```

我需要使用 XPath 提取“href”属性。在 CasperJS 的 API 中写了关于此的信息：[clientutils.getElementByXPath](http://casperjs.org/api.html#clientutils.getElementByXPath)。

这是我的代码：

```
phantom.casperPath = '..n1k0-casperjs-5428865';
phantom.injectJs(phantom.casperPath + '\\bin\\bootstrap.js');

var casper = require('casper').create();

var url = "...";

casper.start(url, function() {
casper.echo("started");
});

var x = require('casper').selectXPath;           

casper.then(function() 
{
casper.echo("getsid");  
    this.test.assertExists(x('//a[contains(@href, "home.do?SID=")]'), 'the element exists');
var element = __utils__.getElementByXPath('//a[contains(@href, "home.do?SID=")]');    
}); 
```

但它失败了。它返回这个：

```
false
undefined
started
getsid
PASS the element exists  <== XPATH WORKS
FAIL ReferenceError: Can't find variable: __utils__
#    type: uncaughtError
#    error: "ReferenceError: Can't find variable: __utils__"
ReferenceError: Can't find variable: __utils__ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-05T17:20:21.357

正如评论中所指出的，您必须`__utils__`在回调内部使用`evaluate`，因为它被注入到页面中。既然你想要（ed）的`href`，你可以使用：

```
casper.then(function(){
    casper.echo("getsid");  
    this.test.assertExists(x('//a[contains(@href, "home.do?SID=")]'), 'the element exists');
    var href = this.evaluate(function(){
        var element = __utils__.getElementByXPath('//a[contains(@href, "home.do?SID=")]');
        return element.href;
    });
}); 
```

这可以通过使用来缩短[`casper.getElementAttribute`](http://docs.casperjs.org/en/latest/modules/casper.html#getelementattribute)：

```
casper.then(function(){
    casper.echo("getsid");  
    this.test.assertExists(x('//a[contains(@href, "home.do?SID=")]'), 'the element exists');
    var href = this.getElementAttribute(x('//a[contains(@href, "home.do?SID=")]'), "href");
}); 
```

您还可以使用[`casper.getElementInfo`](http://docs.casperjs.org/en/latest/modules/casper.html#getelementinfo)获取元素的完整信息，包括所有属性（但只有一些属性）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:13:25.033

尝试这个：

```
phantom.casperPath = '..n1k0-casperjs-5428865';
phantom.injectJs(phantom.casperPath + '\\bin\\bootstrap.js');

var url = "...";
var casper = require('casper').create();
var x = require('casper').selectXPath;

casper.start(url, function() {

 casper.echo("started");

});      

casper.then(function() {

 casper.echo("getsid");  

 var xpath = '//a[contains(@href, "home.do?SID=")]';
 var xpath_arr = { type: 'xpath', path: xpath};

 this.test.assertExists(xpath_arr, 'the element exists');

 var element = x(xpath);    
}); 
```

# android - 打开浏览器时出现ActivityNotFoundException

> ID：11377488
> 
> 赞同：1
> 
> 时间：2012-07-07T18:13:33.250
> 
> 标签：android, browser, android-intent

有时，当我尝试在应用程序中打开浏览器进行添加时，我的应用程序会崩溃，这是我的代码：

```
public void onBannerClick(final View view){  
Intent intent = new Intent(Intent.ACTION_VIEW);  
intent.setData(Uri.parse(mBannerURL));  
startActivity(intent); 
```

这是我得到的堆栈跟踪：

```
java.lang.IllegalStateException: Could not execute method of the activity
at android.view.View$1.onClick(View.java:2179)
at android.view.View.performClick(View.java:2535)
at android.view.View$PerformClick.run(View.java:9130)
at android.os.Handler.handleCallback(Handler.java:618)
at android.os.Handler.dispatchMessage(Handler.java:123)
at android.os.Looper.loop(SourceFile:351)
at android.app.ActivityThread.main(ActivityThread.java:3850)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:538)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:538)
at android.view.View$1.onClick(View.java:2174)
... 11 more
Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://xxxxxxxxx.xx }
at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1449)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1419)
at android.app.Activity.startActivityForResult(Activity.java:2878)
at android.app.Activity.startActivity(Activity.java:2984)
at com.XXXXXXXXX.XXXXXXXXXXXXX.MainActivity.onBannerClick(MainActivity.java:830)
... 14 more 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T22:39:24.030

检查您的方案是否拼写正确。我发现简单地使用“HTTP：”而不是“http：”导致了这个问题。本页底部的注意事项：

[http://developer.android.com/guide/topics/manifest/data-element.html](http://developer.android.com/guide/topics/manifest/data-element.html)

... Android 中的方案匹配区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:23:56.997

大概是您收到某种 HTTP 错误（例如，无效的 URL 和`404`响应），或者 HTTP 响应是在您的设备缺少应用程序的 MIME 类型下提供的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T08:34:05.320

经过大量尝试后，我遇到了同样的问题，我发现问题出在我的 URL 上。我将 URL 更改为 https，后来它的工作

# javascript - jquery ui按钮图像没有改变

> ID：11377489
> 
> 赞同：0
> 
> 时间：2012-07-07T18:13:42.753
> 
> 标签：javascript, jquery

我想根据我与元素一起存储的数据更改 jquery-ui 按钮图像，为此我尝试过：

```
 $(document).ready(function(){                                                               
     $("#ppbutton").button({ icons: { primary: 'ui-icon-play'} }); 
 });

 /* this code is from inside function(e) where e is eventobject */
 var state = $(e.currentTarget).attr("data-state");
 state == "pause" ? 
    $("#ppbutton").button("option", "icons", { primary: "ui-icon-play" }) :
    $("#ppbutton").button("option", "icons", { primary: "ui-icon-pause" }); 
```

但是上面的代码并没有改变按钮图像。我不能在这里使用toggleClass，因为没有必要，每次调用函数时，图像都会改变。请帮帮我好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:19:42.357

要更新图像属性，您需要运行该`$("#ppbutton").button( "refresh" )`方法

[http://jqueryui.com/demos/button/#method-refresh](http://jqueryui.com/demos/button/#method-refresh)

度过美好的一天

# c# - 将数据从列表写入数据网格

> ID：11377491
> 
> 赞同：1
> 
> 时间：2012-07-07T18:14:21.673
> 
> 标签：c#, wpf, datagrid, xceed-datagrid

我有带有字段`idsticker`的数据网格`volatility`，，，`rate of return`。我也有一个`container`带有字段的结构`idsticker`，，`volatility``rateofreturn`

```
 struct container
    {
        public container(string sticker, decimal volatility, decimal rateofreturn)
        {
            this.sticker = sticker;
            this.volatility = volatility;
            this.rateofreturn = rateofreturn;
        }
        string sticker;
        decimal volatility;
        decimal rateofreturn;
    }; 
```

我用结构创建列表并在那里添加值

```
container cnt = new container(x.Trim(), volatility, ror);
list.Add(cnt); 
```

但是如何将这些值从列表中写入数据网格？当我这样做时

```
dataGridControl1.ItemsSource = list; 
```

它创建的行数与列表的计数完全相同，但它们都是空的。

xaml 中的数据网格定义

```
<xcdg:DataGridControl Height="392" Margin="0,190,534,0" Name="dataGridControl1" VerticalAlignment="Top" AutoCreateColumns="False" ItemsSource="{Binding}" AllowDetailToggle="False">
        <xcdg:DataGridControl.Columns>
            <xcdg:Column Title="Sticker" ReadOnly="True" FieldName="Sticker"/>
            <xcdg:Column Title="Rate of return" ReadOnly="True" FieldName="Rate of return"/>
            <xcdg:Column Title="Volatility" FieldName="Volatility" ReadOnly="True"/>
        </xcdg:DataGridControl.Columns>
        <xcdg:DataGridControl.View>
            <xcdg:TableflowView>
                <xcdg:TableflowView.Theme>
                    <xcdg:LunaHomesteadTheme />
                </xcdg:TableflowView.Theme>
            </xcdg:TableflowView>
        </xcdg:DataGridControl.View>
    </xcdg:DataGridControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:47:49.557

您必须添加公共属性。

XAML 文件：

```
<Window x:Class="DataGrid.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid Name="dgData" AutoGenerateColumns="True" />

    </Grid>
</Window> 
```

代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace DataGrid
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            List<container> _source = new List<container>();

            for (int i = 0; i < 10; i++)
            {
                _source.Add(new container("test", 1 * 10, 1 * 10000));
            }

            dgData.ItemsSource = _source;
        }
    }

    public struct container
    {
        public container(string sticker, decimal volatility, decimal rateofreturn)
        {
            this.sticker = sticker;
            this.volatility = volatility;
            this.rateofreturn = rateofreturn;
        }
        string sticker;
        decimal volatility;
        decimal rateofreturn;

        public string Sticker { get { return sticker; } set { sticker = value; } }
        public decimal Volatility { get { return volatility; } set { volatility = value; } }
        public decimal Rateofreturn { get { return rateofreturn; } set { rateofreturn = value; } }
    };
} 
```

# drupal - Facebook og:image 标签无法从 Drupal 网站下载

> ID：11377492
> 
> 赞同：1
> 
> 时间：2012-07-07T18:14:30.207
> 
> 标签：drupal, image-processing, facebook-opengraph, plupload, panels

我有一个 Drupal 摄影网站。图片对我来说很重要，无论我怎么努力，怎么用谷歌搜索，我都无法让这些图片在 Facebook Open Graph 共享上工作。

1.  我正在使用 Drupal 7.14。

2.  用户使用 Plupload 插件上传照片。

3.  Plupload resize 功能会自动调整尺寸过大的照片。

4.  这些照片被上传到自定义目录中。例如。站点/默认/文件/产品/[用户：id]/

5.  这些照片根据 Drupal 核心样式进行缩略图和样式化。例如。网站/默认/文件/样式/大/

6.  这些照片显示在我使用面板自定义的覆盖节点页面中。

7.  Drupal 模块目前不支持面板的 Open Graph 标签，所以我自己使用`drupal_add_html_head`.

    // OG 图像标签
    $node = node_load(%node:nid);
    $user = $node->uid;
    $filename = $node->field_product_photos['und'][0]['filename'];
    $base_url = "http://www.[my-web-site].com/sites/default/files/styles/large/public/products";
    $image_url = $base_url 。“/”。$用户。“/”。$文件名；

    // 因此 $image_url 输出我的完整图像 url 地址。例如。http://www.[my-web-site].com/sites/default/files/styles/large/public/products/1/[IMAGE].JPG

    $element = array (
    '#tag' => 'meta ',
    '#attributes' => 数组(
    'property' => 'og:image',
    'content' => $image_url
    ),
    );
    要求一次'
    drupal_add_html_head($element, 'og_image');

8.  我使用[http://ogp.spypixel.com/Pogo/checker/index.php?url=http%3A%2F%2Fwww.feelsion.com%2Fproduct%2Fd700](http://ogp.spypixel.com/Pogo/checker/index.php?url=http%3A%2F%2Fwww.feelsion.com%2Fproduct%2Fd700)检查我的 OG 标签。og:title, og:image, og:url, og:description 就像一个没有问题的魅力。

9.  但是 Facebook 调试器[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.feelsion.com%2Fproduct%2Fd700](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.feelsion.com%2Fproduct%2Fd700)只返回**一个**问题。
    那是 -**无法下载 og:image：无法下载 og:image 标签的 url 引用的图像。**

10.  我可以确认 ogp.spypixel.com/Pogo/checker/ 可以显示我的 og:image 并且图像 url 是健康的。

11.  我正在使用 HTTP，因此 Facebook og:image 的 HTTPS 错误无关紧要。

12.  我的图片有 ALT-txt。

13.  我也加入`<link rel="image_src" href="[IMAGE_LINK]"`了`<HEAD>`.

14.  我的图片尺寸符合 Facebook 的标准。两个尺寸至少 200 像素，比例不超过 3:1。

15.  我在 page.tpl.php 文件中声明了 og:namespace。
    xmlns:og="http://ogp.me/ns#

16.  无论我多么努力地谷歌并修改代码并尝试新图像。Facebook 仍然从不显示我的照片并返回注释 #9 中的错误。

17.  我的网站徽标等图像可以显示在 Facebook 共享中。唯一未显示的图像来自自定义节点页面/面板。

18.  我试图修改图像的 FTP 权限，但仍然失败。

19.  我怀疑 Plupload 插件是其调整大小的图像无法被 Facebook OG 渲染的罪魁祸首。

20.  我还怀疑这可能是文件名或图像扩展名的区分大小写问题。

我在这个问题上工作了超过 24 小时，但希望正在消退。我仍然希望我能在这里找到我对这个问题的启示。如果您知道解决方案或遇到同样的问题，请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:50:10.057

上述问题是由于图像上的**HTTP 500 内部服务器错误**而发生的。该图像在互联网浏览器中显示良好，但搜索引擎机器人无法访问。

我通过禁用**/public_html/sites/default/files/**文件夹`Option FollowSymLinks`中的 .htaccess 文件解决了这个问题。

 **要永久禁用该选项，您必须删除 .htaccess 文件的内容，同时将文件本身保留在文件夹中。

希望有帮助，加油。**

# javascript - Ember.js - CRUD 场景 - 从路由中指定视图

> ID：11377498
> 
> 赞同：7
> 
> 时间：2012-07-07T18:15:13.317
> 
> 标签：javascript, ember.js, url-routing, ember-old-router

我之前问过一个问题，我想[将驻留在控制器中的集合绑定到列表场景视图](https://stackoverflow.com/questions/11301798/ember-js-how-to-properly-bind-a-collection-to-a-view-using-ember-router)，但是，我已经向我的结构添加了*详细信息*并*编辑*模板和视图，从而产生了几个额外的子路由：

`root.contacts.details -> /contacts/:contact_id`
`root.contacts.edit -> /contacts/:contact_id/edit`

在我的`details`场景中，我首先开始调用`connectOutlets`如下

```
[...]
connectOutlets: function (router, contact) {
    router.get('contactController').set('contact', contact);
    router.get('applicationController').connectOutlet('contacts');
},[...] 
```

这将更改浏览器导航栏中的路线，但它会加载相同的视图，然后我将`.connectOutlet`联系人***而*不是*联系人***更改为以下

```
[...]
connectOutlets: function (router, contact) {
    router.get('contactController').set('contact', contact);
    router.get('applicationController').connectOutlet('contact');
},[...] 
```

`contactController`正因为如此，我不得不创建`contactController`一个新的控制器，因为`contactsController`Ember找不到名为维护，同步可能出现的问题（编辑联系人时，我必须手动与 中的集合同步`contactsController`）。此外，当我导航到`/#/contacts/2/edit`它时会加载详细信息视图，因为我在`.connectOutlet('contact')`. 所以我在做什么不可能是正确的。我不想为每个场景创建控制器。我确定这不是它的做法。

我还尝试设置视图（在我的情况下`App.EditContactView`）而不是资源名称，`connectOutlets`但我得到一个错误，说我可以传递“*名称或视图类但不能同时*传递”，但我没有通过`viewClass`，而是作为`connectOutlet`.

我还尝试将视图或视图实例设置为路由本身，我会破坏我的 JavaScript，或者在某些情况下我会收到一条错误消息，指出“ *App.EditContactView 没有方法 CharAt* ”。

话又说回来，我有点失落。我在 SO 和其他地方看到过其他问题，但我发现的问题要么[`ember-routermanager`](https://github.com/ghempton/ember-routemanager)由 Gordon Hempton 使用（这看起来不错，但我现在只对使用内置感兴趣），`Ember.StateManager`或者不使用 state/route全部。文档还没有对这些事情进行太多解释。

**问题**：处理所有 CRUD 场景的理想方法是`Ember.Router`什么？我希望我`contactsController`能够列出所有、查找一个、编辑一个、添加一个和删除一个联系人。由于命名问题，现在我有一个`contactsController`和`findAll`一个`contactController`, `find`, 。`edit``remove``add`

我目前没有使用 ember-data，所以我会对没有引用 ember-data 的示例更感兴趣（我现在正在做没有任何插件的婴儿步骤）。

这是我的路由器的当前版本：

**JS**

```
App.Router = Ember.Router.extend({
    enableLogging: true,
    location: 'hash',

    root: Ember.Route.extend({
        // EVENTS
        gotoHome: Ember.Route.transitionTo('home'),
        gotoContacts: Ember.Route.transitionTo('contacts.index'),

        // STATES
        home: Ember.Route.extend({
            route: '/',
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('home');
            }
        }),
        contacts: Ember.Route.extend({
            route: '/contacts',
            index: Ember.Route.extend({
                route: '/',
                contactDetails: function (router, context) {
                    var contact = context.context;
                    router.transitionTo('details', contact);
                },
                contactEdit: function (router, context) {
                    var contact = context.context;
                    router.transitionTo('edit', contact);
                },
                connectOutlets: function (router, context) {
                    router.get('contactsController').findAll();
                    router.get('applicationController').connectOutlet('contacts', router.get('contactsController').content);
                }
            }),
            details: Ember.Route.extend({
                route: '/:contact_id',
                view: App.ContactView,
                connectOutlets: function (router, contact) {
                    router.get('contactController').set('contact', contact);
                    router.get('applicationController').connectOutlet('contact');
                },
                serialize: function (router, contact) {
                    return { "contact_id": contact.get('id') }
                },
                deserialize: function (router, params) {
                    return router.get('contactController').find(params["contact_id"]);
                }
            }),
            edit: Ember.Route.extend({
                route: '/:contact_id/edit',
                viewClass: App.EditContactView,
                connectOutlets: function (router, contact) {
                    router.get('contactController').set('contact', contact);
                    router.get('applicationController').connectOutlet('contact');
                },
                serialize: function (router, contact) {
                    return { "contact_id": contact.get('id') }
                },
                deserialize: function (router, params) {
                    return router.get('contactController').find(params["contact_id"]);
                }
            })
        })
    })
});
App.initialize(); 
```

**相关模板**

```
<script type="text/x-handlebars" data-template-name="contact-details">
    {{#if controller.isLoaded}} 
        <img {{bindAttr src="contact.imageUrl" alt="contact.fullName" title="contact.fullName"}} width="210" height="240" /><br />
        <strong>{{contact.fullName}}</strong><br />
        <strong>{{contact.alias}}</strong>
    {{else}}
        <img src="images/l.gif" alt="" /> Loading...
    {{/if}}
</script>

<script type="text/x-handlebars" data-template-name="contact-edit">
    <strong>Edit contact</strong><br />
    First Name: <input type="text" id="txtFirstName" {{bindAttr value="contact.firstName"}}<br />
    Lasst Name: <input type="text" id="txtLastName" {{bindAttr value="contact.lastName"}}<br />
    Email: <input type="text" id="txtEmail" {{bindAttr value="contact.email"}}<br />
</script>

<script type="text/x-handlebars" data-template-name="contact-table-row">
    <tr>
        <td>
            <img {{bindAttr src="contact.imageUrl" alt="contact.fullName" title="contact.fullName"}} width="50" height="50" /><br />{{contact.fullName}}
        </td>
        <td>
            Twitter: {{#if contact.twitter}}<a {{bindAttr href="contact.twitter"}} target='_blank'>Follow on Twitter</a>{{else}}-{{/if}}<br />
        </td>
        <td>
            <a href="#" {{action contactDetails context="contact"}}>Details</a> | 
            <a href="#" {{action contactEdit context="contact"}}>Edit</a> 
        </td>
    </tr>
</script> 
```

**注意**：如果有任何不清楚的地方，请在评论部分询问，我可以编辑更多细节

**编辑**：我已经将此项目添加到[GitHub](https://github.com/MilkyWayJoe/hello-ember-router)，即使它与我想作为学习示例公开的内容相去甚远。目标是在此基础上取得进展并在不久的将来创建一个 CRUD 模板。目前使用 MS Web API，但可能很快会添加 Rails 版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T12:20:23.653

这里发生了一些事情，我会尝试回答它们，但如果我错过了什么，请随时发表评论。你似乎在重新发明 Ember 已经为你做的很多东西。

首先，如果要将视图传递给`connectOutlet`方法，则需要传入哈希作为唯一的参数。

```
router.get('applicationController').connectOutlet({
  viewClass: App.EditContactView,
  controller: router.get('contactsController'),
  context: context
}) 
```

其次，拥有两个联系人控制器并不令人不悦，事实上我会推荐它。继承自的单数和继承`ContactController`自的单数，这意味着您可以轻松利用内置的内容代理。`ObjectController``ContactsController``ArrayController`

第三，如果你在你的模型中添加`find`和`findAll`类方法，你会让自己的生活变得更轻松。

*   您不需要定义已定义的序列化/反序列化方法，默认情况下，Ember 将查找名称从路由推导出的模型，因此 :contact_id 将自动查找 App.Contact.find(:contact_id)。

*   您还可以将索引 connectOutlets 更改为：`router.get('applicationController').connectOutlet('contacts', App.Contact.findAll())`

还有一个提示，目前您的详细信息和编辑路线几乎完全相同。我会创建一条名为的路线`company`，然后制作子细节并在其中编辑视图。

# iphone - 网站和 iPhone 之间的摄像头流式传输

> ID：11377500
> 
> 赞同：-6
> 
> 时间：2012-07-07T18:15:28.050
> 
> 标签：iphone

我想知道如何将视频从网站流式传输到我的 iPhone。我不知道如何将我的视频流式传输到 iPhone。由于 iphone 不支持闪存，因此最好的方法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:26:06.633

iOS 支持（作为客户端）HTTP Live Streaming（如[本 StackOverflow 问题](https://stackoverflow.com/questions/6592485/http-live-streaming)中所述）应该适合您的目的。

# java - synchronized(this) 和 synchronized(objectReference) 的区别

> ID：11377501
> 
> 赞同：0
> 
> 时间：2012-07-07T18:15:32.287
> 
> 标签：java, synchronized

我想更好地了解线程进入`synchronized(this)`块与`synchronized(someObjectReference)`块时实际发生的机制。

```
 synchronized (this) {
        // Statement 1
        // Statement 2
    }

    synchronized (someObjectReference) {
        // Statement 1
        // Statement 2
    } 
```

据我了解：（**我错过了什么吗？我错了吗？）**

*   在这两种情况下，一次只有 1 个线程可以访问同步块
*   当我们同步时`someObjectReference`：
    *   一次只有 1 个线程可以在此块中访问/修改它
    *   一次只能有 1 个线程进入该块

**请问还有什么其他机制？**

```
 synchronized (objectReference) {
        // Statement 1 dealing with someObjectReference
        // Statement 2 not dealing with someObjectReference
    } 
```

**`mutex`在上面的示例中，将不处理的语句添加到同步块中是否有意义？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:25:02.290

只有将两者混合在一起时才有区别。

唯一的基本规则是，在任何给定时间，同一块`synchronized(foo)`中只能有一个线程。就是*这样。* （唯一值得一提的是，一个线程可以在多个嵌套块中。）`synchronized(foo)``foo`*`synchronized(foo)``foo`*

 *如果一些代码在一个`synchronized(foo)`块内，而一些代码在一个`synchronized(bar)`块内，那么这些代码可以同时运行——但你不能让两个线程`synchronized(foo)`同时在块内运行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:25:06.930

> 在这两种情况下，一次只有 1 个线程可以访问同步块

并不真地。例如，在“this”上同步时，如果两个线程有​​相同类的 2 个不同实例，则它们可以访问同一个块。但是，是的，例如，只有一次访问该块。并且在此上的任何同步块也只有一个访问权限

“同步”意味着只有 1 个线程可以访问同一实例上的任何同步块。因此，如果您在 2 个不同的源文件中有 2 个同步块，但在同一个实例上，如果一个线程位于其中一个块内，则另一个线程无法访问这两个同步块

关于“在同步块中做什么”：只做处理同步对象的事情。任何其他不需要同步的指令都将锁定资源，这可能会造成瓶颈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:24:25.893

同步基本上意味着程序请求对指定对象进行锁定...如果线程无法进入任何同步块，则意味着任何其他线程已经对指定对象进行锁定..代码块在此内部指定如果成功获取锁，线程可以进入的区域..

```
 In both cases, only 1 thread can access synchronized block at a time 
```

--依赖对象被锁定的可用性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:43:36.043

`this`关于同步交易与可见性的一件重要事情。假设你有一堂课`A`，它在`this`. 任何使用`A`的代码都引用了`A`用于锁定的对象。这意味着如果用户也锁定了实例，则他们可能`A`会创建死锁。`A`

```
public class A implements Runnable {
  public void run() {
    synchronized (this) {
      // something that blocks waiting for a signal
    }
    //other code
  }
}

public class DeadLock {
  public void deadLock() {
    A a = new A();
    Thread t = new Thread(a);
    t.start();

    Thread.sleep(5000); //make sure other thread starts and enters synchronized block
    synchronized (a) {
      // THIS CODE BLOCK NEVER EXECUTES
      // signal a
    }
  }
} 
```

其中，如果您始终在私有成员变量上进行同步，那么您知道您是唯一使用该引用作为锁的人。*

# sql - SQL JOINING 主表与两个表返回记录数 - 其他两个表的最大值？

> ID：11377503
> 
> 赞同：-3
> 
> 时间：2012-07-07T18:16:07.913
> 
> 标签：sql, join, db2, left-join

我有我的主表 T1，我从中选择许多字段：

```
ID
1000 
```

我有表 T2：

```
ID      SERVICE
1000    IPTV
1000    VOIP 
```

我有表 T3：

```
ID      DEVICE
1000    MODEM
1000    ROUTER
1000    DVC 
```

我想将 T1 与 T2 或 T3 一起加入，它们可以但也可能根本没有值！！！！当它们具有我希望在 SELECT 中具有来自 T2 或 T3 的最大记录数的记录数时。所以在这种情况下，T3 有 3 条记录，这是最大的，我想要 SELECT 中的 3 条记录。（如果 T2 有 3 条记录，如果 T3 有 2 条记录，则为最大值）

但在我的 SELECT 语句中，我有 5 条我不想要的记录。正确的表达方式是什么？我下面的查询返回 5 条记录（我想要 3 条）

```
select t1.id,t2.service,t3.device
from t1
left outer join T2 on t1.id=t2.id
left outer join T3 on t1.id=t3.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:44:25.960

```
SELECT
    t1.id
  , t2.service
  , t3.device
FROM
        t1
    LEFT JOIN
            ( SELECT
                  ROW_NUMBER() OVER (PARTITION BY id ORDER BY service) AS rn
                , id
                , service
              FROM
                  t2
            ) AS t2
        FULL JOIN 
            ( SELECT
                  ROW_NUMBER() OVER (PARTITION BY id ORDER BY device) AS rn
                , id
                , device
              FROM
                  t3
            ) AS t3
          ON  t3.id = t2.id
          AND t3.rn = t2.rn
      ON COALESCE(t2.id, t3.id) = t1.id ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:29:29.497

这个要求听起来不正确，但以下应该有效

```
SELECT T1.*, z2.ID, z2.SERVICE FROM 
(
  SELECT ID, CASE WHEN SUM(INDICATOR) >=0 THEN 1 ELSE -1 END AS INDICATOR FROM
    (
    SELECT ID, SERVICE, 1 AS INDICATOR FROM t2
    UNION ALL
    SELECT ID , DEVICE AS SERVICE , -1 AS INDICATOR FROM t3
    ) z
  GROUP BY ID
) z1
INNER JOIN
(
  SELECT ID, SERVICE, 1 AS INDICATOR FROM t2
  UNION ALL
  SELECT ID , DEVICE AS SERVICE, -1 AS INDICATOR FROM t3
) z2
ON z1.ID = z2.ID AND z1.INDICATOR = z2.INDICATOR
RIGHT JOIN T1 ON T1.ID = Z2.ID 
```

# svn - TortoiseSVN 和 VisualSVN 的 SSL 握手错误

> ID：11377505
> 
> 赞同：2
> 
> 时间：2012-07-07T18:16:21.857
> 
> 标签：svn, tortoisesvn, visualsvn-server

我希望你能给我一些想法：

最近，我本地的 SVN 存储库停止工作。除了更新我的防病毒软件（ESET Smart Security）之外，我无法确定原因，但禁用它似乎不起作用。我已经启动并运行了 VisualSVN 2.5.5 和 TortoiseSVN 1.7.7 x64，并且我还设置了一个 Hamachi 网络，用于与一些伙伴共同开发的应用程序。但是，即使我现在也无法更新或提交更改，因为 Tortoise 给了我以下错误：

```
Unable to connect to a repository at URL
'https://myserver/svn/myrepo/trunk' OPTIONS of
'https://myserver/svn/myrepo/trunk': SSL handshake failed: An existing
connection was forcibly closed by the remote host. 
```

我看到了一些解决方案，例如启用 KeepAlive，或启用登录 Apache 服务器以查看发生了什么，以及检查事件查看器，但我没有发现任何异常。我什至尝试卸载 VisualSVN 和 Tortoise 并重新安装...

顺便说一句，我正在运行 Windows 7 x64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T19:17:40.357

我的解决方案是**ESET setup | 网页访问保护 | 配置 | 协议过滤 | 排除应用程序**，我检查了 TortoiseSVN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:56:55.123

尝试禁用 SSL 检查（在 Web 和电子邮件/协议过滤下）。这不是一个完整的解决方案，但至少是管理它的一种解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:03:27.957

正如科林艾伦在上面的评论中提到的：

> 在升级到 TortoiseSVN 1.7.7 后，我看到了完全相同的设置，设置稍微简单一些。回到 1.7.6 就可以了。就好像两者之间有一些重大的 SSL 变化。——科林·艾伦 7 月 9 日 17:25

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-22T10:24:18.010

您应该按照以下步骤创建自我证书：

1.  将以下注册表值添加到 Windows 注册表：

    *   对于 32 位系统：

    `[HKEY_LOCAL_MACHINE\SOFTWARE\VisualSVN\VisualSVN Server]` `"CreateGnuTLSCompatibleCertificate"=dword:00000001`

    *   对于 64 位系统：

    `[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\VisualSVN\VisualSVN Server]` `"CreateGnuTLSCompatibleCertificate"=dword:00000001`

2.  启动 VisualSVN 服务器管理器。

3.  去**行动 | 属性 | 证书**。
4.  单击**更改证书...**并按照向导说明生成新的自签名证书。

# android - 如何使用联系人 ID 检索联系人图片

> ID：11377509
> 
> 赞同：0
> 
> 时间：2012-07-07T18:17:25.720
> 
> 标签：android, android-contacts

我想要一个函数，它接受一个联系人 id(long) 并返回相应的联系人 pic(Bitmap 或 InputStream) 已经尝试了很多。但我无法做到这一点。

PS - 最低 API 级别 = 10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:18:28.087

试试下面的代码：

```
private void setContactInfo(long id){
Bitmap photoBitmap = null;
Uri contactUri = ContentUris.withAppendedId(
            ContactsContract.Contacts.CONTENT_URI, id);

Cursor cursor = managedQuery(contactUri, null, null, null, null);
    cursor.moveToFirst();
    contact_text.setText(cursor.getString(cursor
            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));//contact.text is a textView used to displays the contact name

    String id = getIntent().getData().getLastPathSegment();
    // Photo cursor

    String photoWhere = ContactsContract.Data.CONTACT_ID + " = ? AND "
            + ContactsContract.Data.MIMETYPE + " = ?";
    String[] photoWhereParams = new String[] { id,
            ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE };
    Cursor photoCur = managedQuery(ContactsContract.Data.CONTENT_URI, null,
            photoWhere, photoWhereParams, null);
    photoCur.moveToFirst();
    if (photoCur.moveToFirst() && photoCur != null) {

        byte[] photoBlob = photoCur.getBlob(photoCur
                .getColumnIndex(Photo.PHOTO));
        if (photoBlob != null) {
            photoBitmap = BitmapFactory.decodeByteArray(photoBlob, 0,
                    photoBlob.length);

            contact_image.setImageBitmap(photoBitmap);//contact_image is an ImageView
        } else {
            photoBitmap = BitmapFactory.decodeResource(getResources(),
                    android.R.drawable.ic_menu_report_image);//android.R.drawable.ic_menu_report_image is the default image if a Contact doesn't have any image stored
            contact_image.setImageBitmap(photoBitmap);
        }

    }
cursor.close;
photoCur.close;         

} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:33:26.997

在您的活动中，您需要下载图片的**url 。**使用以下方法（确保此代码必须在您要下载图片的那个活动中）：

```
private class DownloadProfilePicture extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {

            try {

                    InputStream in = null;
                    int response = -1;

                    URL url = "your image url";
                    URLConnection conn = null;
                    HttpURLConnection httpConn = null;

                    conn = url.openConnection();

                    if (!(conn instanceof HttpURLConnection))
                        throw new IOException("Not an HTTP connection");

                    httpConn = (HttpURLConnection) conn;
                    httpConn.setAllowUserInteraction(false);
                    httpConn.setInstanceFollowRedirects(true);
                    httpConn.setRequestMethod("GET");
                    httpConn.connect();

                    response = httpConn.getResponseCode();
                    if (response == HttpURLConnection.HTTP_OK) {
                        in = httpConn.getInputStream();
                    }

                    if (in != null && in.available() > 807) {
                        yourBitmaptype.setBitmap(
                                BitmapFactory.decodeStream(in));

                    } else {
                        users.get(screenName).setBitmap(
                                BitmapFactory.decodeResource(getResources(),
                                        R.drawable.default_profile_pic));

                    }
                    in.close();
                    in = null;

            } catch (Exception e) {
                users.get(temp).setBitmap(
                        BitmapFactory.decodeResource(getResources(),
                                R.drawable.default_profile_pic));
                Log.e(TAG, "Downloading Image Exception.. Using default");
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {

            // use post execute logic
            super.onPostExecute(result);
        }

        @Override
        protected void onPreExecute() {
        // use pre execute logic
            super.onPreExecute();
        }

    } 
```

`onCreate()`并从as 中调用它`new DownloadProfilePicture().execute();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T05:18:04.220

```
private ByteArrayInputStream getPhoto()
{

    Uri contactUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, id);     
    Uri photoUri = Uri.withAppendedPath(contactUri, Contacts.Photo.CONTENT_DIRECTORY);     
    Cursor cursor = getContentResolver().query(photoUri, new String[] {ContactsContract.CommonDataKinds.Photo.PHOTO}, null, null, null);     
    if (cursor == null) {         
        return null;     
    }     
    try 
    {         
        if (cursor.moveToFirst())
        {             
            byte[] data = cursor.getBlob(0);             
            if (data != null) 
            {                 
                return new ByteArrayInputStream(data);             
            }         
        }     
    } 
    finally 
    {        
        cursor.close();     
    }     
    return null;

} 
```

这是我的代码。这是工作。

# c# - 调试过程中如何禁用所有方法的[RequireHttps]？

> ID：11377510
> 
> 赞同：5
> 
> 时间：2012-07-07T18:17:52.543
> 
> 标签：c#, .net, asp.net-mvc-2

我有一些 MVC2 网站，其中有很多`[RequireHttps]`.

但是当我调试它时，我必须在不同的地方（控制器）评论它们中的许多。当代码准备好时，我必须删除所有评论。

所以这需要时间，有时我忘了取消评论`[RequireHttps]`:)

我的问题是解决这个问题的最佳实践是什么？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T18:26:53.787

如果您不想`#if`围绕每个用法键入语句，您可以创建一个新属性，该属性在调试版本中是无操作的，并且是`RequireHttps`发布版本中的简单子类：

```
#if DEBUG
public class ReleaseRequireHttpsAttribute : Attribute
{
    // no-op
}
#elif
public class ReleaseRequireHttpsAttribute : RequireHttpsAttribute
{
    // does the same thing as RequireHttpsAttribute
}
#endif 
```

然后简单地查找和替换每一个`[RequireHttps]`并将`[ReleaseRequireHttps]`其用于新方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T20:20:21.657

由于您询问了解决此问题的“最佳实践”，因此在这种情况下，最佳实践是保留属性并调试您部署的完全相同的代码。任何其他答案（所有这些都将起作用）将意味着您正在调试代码，然后在部署之前更改代码，这绝不是一个好主意。

在这种情况下，如果您使用 IIS Express，通过 SSL 调试 Web 项目就很容易了。这是 Visual Studio 2010 Web 服务器的直接替代品，但具有 IIS 的大部分功能，包括安全 HTTP 支持。更多信息可以在这里找到：

[http://learn.iis.net/page.aspx/901/iis-express-faq/](http://learn.iis.net/page.aspx/901/iis-express-faq/)

安装后，您可以将项目切换为使用 IIS Express，在 IIS Express 配置中设置 https 绑定，然后正常单步执行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T18:22:09.087

我会使用[#if (C# Reference)](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)并有一个 Debug 和 Release 配置：

那么你：

```
#if RELEASE
    [RequireHttps]
#endif
void methodHere()
{
...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T18:28:41.877

以下将允许您***干掉***功能并防止使用预处理器指令污染控制器的必要性：

```
public class CustomRequireHttpsAttribute : RequireHttpsAttribute
{
    /* override appropriate method with preprocessor directives */
}

[CustomRequireHttps]
public ActionResult Foo(string foo) { /* ... */ }

[CustomRequireHttps]
public ActionResult Bar(string bar) { /* ... */ } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T18:20:49.160

使用`#if RELEASE ... #endif`结构：

```
#if RELEASE
    [RequireHttps]
#endif
void YourMethod()
{
    ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-16T14:16:10.863

这是自定义属性的工作版本，除非在 Visual Studio 调试器下运行，否则需要 HTTPS 连接：

```
/// <summary>
/// Requires HTTPS connection unless running under Visual Studio debugger.
/// </summary>
public class RemoteRequireHttpsAttribute : RequireHttpsAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (filterContext != null 
            && filterContext.HttpContext != null 
            && filterContext.HttpContext.Request.IsLocal)
            return;

        base.OnAuthorization(filterContext);
    }
} 
```

# symfony - Symfony 2 - 根据另一个表中新插入的记录更新表

> ID：11377517
> 
> 赞同：0
> 
> 时间：2012-07-07T18:18:52.307
> 
> 标签：symfony, doctrine-orm

我正在尝试使用 Symfony 2 和 Doctrine 2 创建一个小型论坛应用程序。我的 ForumTopic 实体有一个 last_post 字段（oneToOne 映射）。现在，当我坚持我的新帖子时

```
$em->persist($post); 
```

我想更新我的 ForumTopic 实体，以便它的 last_post 字段引用这个新帖子。我刚刚意识到它不能用 Doctrine postPersist Listener 完成，所以我决定使用一个小技巧，并尝试：

```
$em->persist($post);
$em->flush();
$topic->setLastPost($post);
$em->persist($post);
$em->flush(); 
```

但它似乎没有更新我的主题表。

我还查看了[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/working-with-associations.html#transitive-persistence-cascade-operations](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/working-with-associations.html#transitive-persistence-cascade-operations)希望它能解决通过在我的 Topic.orm.yml 文件中添加 cascade: [ 'persist' ] 来解决问题，但它也没有帮助。

谁能指出我的解决方案或示例课程？

我的论坛主题是：

```
FrontBundle\Entity\ForumTopic:
        type: entity
        table: forum_topics
        id:
                id:
                        type: integer
                        generator:
                                strategy: AUTO
        fields:
                title:
                        type: string(100)
                        nullable: false
                slug:
                        type: string(100)
                        nullable: false
                created_at:
                        type: datetime
                        nullable: false
                updated_at:
                        type: datetime
                        nullable: true
                update_reason:
                        type: text
                        nullable: true
        oneToMany:
                posts:
                        targetEntity: ForumPost
                        mappedBy: topic
        manyToOne:
                created_by:
                        targetEntity: User
                        inversedBy: articles
                        nullable: false
                updated_by:
                        targetEntity: User
                        nullable: true
                        default: null
                topic_group:
                        targetEntity: ForumTopicGroup
                        inversedBy: topics
                        nullable: false
        oneToOne:
                last_post:
                        targetEntity: ForumPost
                        nullable: true
                        default: null
                        cascade: [ persist ]
        uniqueConstraint:
                uniqueSlugByGroup:
                        columns: [ topic_group, slug ] 
```

我的论坛帖子是：

```
FrontBundle\Entity\ForumPost:
        type: entity
        table: forum_posts
        id:
                id:
                        type: integer
                        generator:
                                strategy: AUTO
        fields:
                created_at:
                        type: datetime
                        nullable: false
                updated_at:
                        type: datetime
                        nullable: true
                update_reason:
                        type: string
                        nullable: true
                text:
                        type: text
                        nullable: false
        manyToOne:
                created_by:
                        targetEntity: User
                        inversedBy: forum_posts
                        nullable: false
                updated_by:
                        targetEntity: User
                        nullable: true
                        default: null
               topic:
                        targetEntity: ForumTopic
                        inversedBy: posts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:32:27.420

我相信您让这件事变得更加困难，因为您认为您必须先刷新您的帖子，然后才能将其设置为与您的主题相关的关联。

Doctrine 足够聪明，如果您持久化一个实体并将其设置为关联而不首先调用flush，它将确保当您调用flush 时，它首先保留该实体，以便它具有一个可以使用的ID该协会。

这意味着您真正需要做的就是：

```
// Assume that topic has been fetched from the DB, and post is completely new
$topic = $em->find('TopicModel', $topicId);
$post = new ForumPost();
// Fill in the post info
// Set up the association
$topic->setLastPost($post);
// And finally, persist and flush - no more effort needed
$em->persist($post);
$em->flush(); 
```

这样做的一个很好的副作用是您可以简单地使用 prePersist 事件侦听器来更新线程的最后一篇文章 - Doctrine 将为您处理其他所有事情。

或者，如果您想要一种在逻辑上更容易遵循的方法，您可以让您的 Post 模型自己在主题上调用 setLastPost - 例如，如果您在构造函数或 setTopic() 方法中设置帖子的主题，在那里添加 setLastPost 调用。

让关联的一方像这样照顾双方是相对常见的做法，以帮助保持良好的同步 - 请参阅[使用关联](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/working-with-associations.html#association-management-methods)。

# javascript - Google Maps API v3：缩放更改后是否有回调或事件侦听器？

> ID：11377522
> 
> 赞同：1
> 
> 时间：2012-07-07T18:19:14.673
> 
> 标签：javascript, google-maps, google-maps-api-3

Google maps API v3 在地图上有一个回调，`zoom_changed`但在缩放开始之前触发（当我单击放大/缩小按钮时）。回调函数里面的地图状态是缩放前的状态，我要的是缩放后的状态。

有这样的回调吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T18:24:27.167

编辑：链接已删除。

这似乎是 API 中的一个错误。

大多数人尝试做的基本上是以下几点：

```
google.maps.event.addListener(map,'zoom_changed',function (event) {
    // some handling code here
}); 
```

但这不起作用，因为事件在边界改变之前触发。在这种情况下建议执行以下操作：

```
zoomChangeListener = google.maps.event.addListener(map,'zoom_changed',function (event) {
    zoomChangeBoundsListener = google.maps.event.addListener(map,'bounds_changed',function (event) {  
      console.log(map.get_bounds());
      google.maps.event.removeListener(zoomChangeBoundsListener);
    });
}); 
```

所以现在，在`zoom_changed`事件触发之后，我们实际上设置了另一个监听器，这次是为`bounds_changed`事件，所以在这个事件触发的时候，我们确定边界已经改变了。

# javascript - 用谷歌图表 json 数据绘制简单的折线图，x 轴上有日期

> ID：11377525
> 
> 赞同：0
> 
> 时间：2012-07-07T18:19:20.537
> 
> 标签：javascript, jquery, google-visualization

我已经查看了 SO 的其他答案，但没有一个能满足我的需要。这是说明如何在图表上绘制日期的[文档。](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline#Example)以下是示例 json 对象之一：

```
datetime: "2012-07-07"
hours: "0.6"
shop: "WalMart"
name: "Andrew"
__proto__: Object 
```

我使用以下代码添加行和列：

```
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

function drawChart() {
  var data = google.visualization.arrayToDataTable();
  data.addColumn('date', 'Date');
  data.addColumn('number', 'Hours');  
  $.each(hour_logs, function(key, value){// hour_logs is the collection of json objects, the sample is shown above.
    ymd = value.datetime.split("-");
    var dt = new Date(parseInt(ymd[0]), parseInt(ymd[1]), parseInt(ymd[2]));         
    data.addRow(dt, parseInt(value.hours));
  }); 
  console.log(data);
  var options = {
    title: 'Daily Logs',
    displayAnnotations: true,  
  };
  var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
  chart.draw(data, options);
} 
```

**但我收到一个错误，未捕获的错误：不是数组。如何修复它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:01:50.953

添加行时，您没有提供数组。

应该：

```
data.addRow([dt, parseInt(value.hours)]); 
```

代替：

```
data.addRow(dt, parseInt(value.hours)); 
```

# django - Django-haystack 和 django-pagination 不能一起工作？

> ID：11377532
> 
> 赞同：0
> 
> 时间：2012-07-07T18:20:17.053
> 
> 标签：django, django-templates, django-haystack, django-pagination

我将 haystack 与 whoosh 和 django 1.3 一起使用。在我的网址中，我有：

```
url(r'^search/', include('haystack.urls')), 
```

我在应用程序中创建了自定义模板：search/seach.html：

```
{% if page.object_list %}                                                        

{% autopaginate page.object_list 3 %}
{% for arg in page.object_list %}
...
{% endfor%}
{% paginate %} 
```

我的搜索工作正常！渲染的分页（使用分页模板标签）也是正确的。但是当我尝试转到下一页时，我收到了这个错误：

```
Page not found (404)
Request Method:     GET
Request URL:    http://127.0.0.1:8000/search/?page=2&q=Aktualno%C5%9B%C4%87 
```

你能帮助我吗？怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-01T07:10:53.110

我使用扩展 django-haystack 的 SearchView 的自定义 SearchView 使 django-haystack 和 django-pagination 工作。只需注释掉或删除`(paginator, page) = self.build_page()`page 和 paginator 上下文变量。

下面是我的自定义 SearchView。

```
class SearchView(SearchView):

def create_response(self):
    """
    Generates the actual HttpResponse to send back to the user.
    """
    # (paginator, page) = self.build_page()

    context = {
        'query': self.query,
        'form': self.form,
        # 'page': page,
        # 'paginator': paginator,
        'suggestion': None,
        'results': self.results
    }

    if self.results and hasattr(self.results, 'query') and self.results.query.backend.include_spelling:
        context['suggestion'] = self.form.get_suggestion()

    context.update(self.extra_context())
    return render_to_response(self.template, context, context_instance=self.context_class(self.request)) 
```

并在模板中使用结果上下文变量进行分页：

```
 {% autopaginate results 2 %}
  {% for result in results %}
      {{ result.attribute }}
  {% endfor %}
  {% paginate %} 
```

而已 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-12T23:59:14.810

在 Django 1.8.4 中，您只需在模板中替换 page 为 page_obj 即可。

例子：

```
{% for arg in page_obj.object_list %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T06:29:40.343

默认的`haystack`SearchView`page`不支持`django-pagination`. 如果要使用`django-pagination`，可以继承 SearchView 并添加一个新的上下文变量来存储搜索结果。然后你可以使用这个上下文变量来分页。

```
def create_response(self):
    (paginator, page) = self.build_page()        
    context = {
        'query': self.query,
        'form': self.form,
        'page': page,
        'results': self.results,
        'paginator': paginator,
        'suggestion': None,
        } 
```

# c++ - 我是否以正确的方式插入 STL 地图？它不会泄漏内存吗？

> ID：11377536
> 
> 赞同：0
> 
> 时间：2012-07-07T18:21:01.673
> 
> 标签：c++, stl, map

以下代码 100% 正确吗？我正在编写游戏代码，`CItemElem`它是一个包含`Item`诸如电源等信息的类。我想将来自项目的指针存储到另一个名为`CChatLink`. 请看一看：

[。H]

```
#pragma once

class CChatLink
{
private:
    CChatLink(){}; //no new usage or global object allowed
    ~CChatLink(){}; 
public:
    BOOL InsertChatLink( TCHAR* szText, CItemElem *pItemElem );
    map<std::string,CItemElem*>m_mChatLink;
    static CChatLink* GetInstance( void )
    {
        static CChatLink pObj;
        return &pObj;

    }

}; 
```

[.cpp]

```
#include "StdAfx.h"
#include "Item.h"
#include "CChatLink.h"

BOOL CChatLink::InsertChatLink( TCHAR *szText, CItemElem* pItemElem )
{
    if( pItemElem && szText )
    {
        std::string szInsert( szText );
        CItemElem *pItem = new CItemElem; //as far as I know, it must be allocated on the heap to be inserted ^^
        pItem = pItemElem;
        m_mChatLink.insert( make_pair( szInsert, pItem ) );
        return TRUE;
    }
    return FALSE;
} 
```

我可以这样存储`std::string`吗`map`？

（我目前正在学习 C++，所以请放轻松。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T18:26:47.310

是的，您在这里有内存泄漏：

```
CItemElem *pItem = new CItemElem;
pItem = pItemElem; 
```

您刚刚丢失了分配对象的地址。如果要插入的项目作为参数传递，为什么还要这样做？从您的代码中不清楚。

这是你的意思吗？：

```
BOOL CChatLink::InsertChatLink( TCHAR *szText, CItemElem* pItemElem )
{
    if( pItemElem && szText )
    {
        std::string szInsert( szText );
        m_mChatLink.insert( make_pair( szInsert, pItemElem ) );
        return TRUE;
    }
    return FALSE;
} 
```

**编辑：**

这听起来像是`pItemElem`一个指向已在堆栈上分配的对象的指针。您可以更改`m_mChatLink`为`std::map<std::string, CItemElem>`( 不是`CItemElem*`) 或者这个：

```
CItemElem pItem = new CItemElem;
*pItem = *pItemElem;
m_mChatLink.insert(make_pair(szInsert, pItem)); 
```

您将需要在您的析构函数中使用`delete`所有这些`CItemElem`s。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T18:24:25.883

字符串很好，但在这里：

```
CItemElem *pItem = new CItemElem; 
```

您正在创建一个`CItemElem`永远不会被删除的动态分配。实际上，您在这里立即失去了对它的控制：

```
pItem = pItemElem; 
```

您必须确保插入到映射中的指针指向正确的对象，并且，如果该对象是动态分配的，那么您的类必须在必要时删除该元素，例如从映射中删除元素时，或者当`CChatLink`类本身被销毁时。

鉴于您的插入方法的签名是这样的：

```
BOOL InsertChatLink( TCHAR* szText, CItemElem *pItemElem ); 
```

那么有两种选择：

1.  调用者拥有指向的对象，所以你的类不需要担心删除它。但在这种情况下，指向的对象必须至少与您的`CChatLink`实例一样长。这必须有据可查。
2.  你的`CChatLink`班级拥有所有权。在这种情况下，它负责删除，调用者必须意识到这一点。这必须有据可查。

您应该看一下[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)，它为不同的所有权场景提供自动管理（唯一所有权，如上例所示，共享所有权，无所有权）。

另一种选择是完全忘记指针并存储`CItemElems`按值：

```
class CChatLink {
  std::map<std::string, CItemElem> m_mChatLink;
 public:
  BOOL InsertChatLink( TCHAR* szText, const CItemElem& item ) {
    ...
    m_mChatLink.insert( make_pair( szInsert, item ) );
    ...
  }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T18:28:48.687

字符串没有内存泄漏，因为 std::string 正确管理自己的内存。您确实有泄漏`CItemElem`：您正在创建它但从未删除它（至少在显示的代码中）。

有几个选项：

*   当您从聊天链接中删除 CItemElem 实例时，显式删除它们。
*   使用智能指针来管理 CItemElem 指针。一些流行的智能指针实现选择包括：
    *   [boost::shared_ptr](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/shared_ptr.htm)
    *   [C++11 的 std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)
    *   各种实现分散在网络上。

请注意，您不想使用它，`std::auto_ptr`因为它不能添加到 C++ 标准库容器中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T18:27:22.193

在类中分配动态内存时。您需要编写一个复制构造函数和赋值运算符。如果您不复制/分配指针，则内存在析构函数时被删除两次。

# mysql - 存储具有特定查看权限的用户之间的关系

> ID：11377537
> 
> 赞同：1
> 
> 时间：2012-07-07T18:21:15.100
> 
> 标签：mysql, sql, database-design

我正在为 MySQL 设计一个数据库，以在应用程序的两个用户之间创建关系。我不确定存储这种关系细节的最佳方式，尽管我目前打算在名为 RELATIONS 的链接表中为每个关系使用一条记录。每个用户都有他们的姓名和职业等基本数据存储在 USERS 表中，以及通过 FK 链接存储在其他表中的更具体的个人数据，我们将其称为 OTHER1、OTHER2 和 OTHER3，它们都将包含一些其他数据要共享，我们将在名为 [Data] 的字段中说每个，并用 ID 和 USER_ID 标识。

困难在于该应用程序允许用户指定他们向每个用户显示的基本数据和高级数据，反之亦然。RELATIONS 链接表需要有 FK 到 USERS 才能让两个用户建立关系，但我不知道如何最好地指定每个用户能够共享哪些数据，因为数据库存储的几乎所有数据都是可选存储，但可能需要对无权查看它的用户隐藏所有内容。但是，第二个用户应该能够查看那里是否有数据，以便他可以请求查看数据的权限。

此时我的关系模型如下所示：

关系

```
ID
USER_ID1
USER_ID2
USER1OTHER1_ID [(Value), Unshared, Null]
...
USER1OTHER100_ID [(Value), Unshared, Null]
USER2OTHER1_ID [(Value), Unshared, Null]
...
USER2OTHER100_ID [(Value), Unshared, Null] 
```

因此，如果 User1 已与 User2 共享，则 USER1OTHER1_ID 将包含 OTHER1 的 FK，如果存在但未共享，则为“未共享”，如果 User1 在 OTHER1 中没有数据，则为 Null。与用户 1 共享的 USER2OTHER1 相同。不过，我不喜欢拥有庞大的字段数组，而且如果 User1 稍后决定将数据添加到 OTHER1，我不喜欢我必须如何更新所有关系。有没有一种更简单、更规范的方式来表示这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:47:11.180

我相信规范化的方法是只存储 userA 是否有权查看 userB 的数据，而不是在关系表中添加对它的 FK 引用，因为您已经在其他地方引用了 userB 的数据。通过在关系表中存储额外的引用，您正在复制数据，并且必须确保它保持同步，如您在问题中描述的那样，这可能是一个持续的维护麻烦，而且您在重构代码时还必须记住一件事.

如果您只在关系表中存储权限（没有 fks），您将加入一个表（用户？）以获取用户的共享数据或根据权限查看它是否存在。

至于关系表上的列数过多，我认为您在查询表时不足以看到真正的降级（您可以对此进行纠正）。为了清楚起见数据库代码以及您的应用程序代码，我认为您最好为每个权限设置一个列，而不是尝试找到捷径，例如将它们组合成一个 clob 或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:00:28.087

> ..因为几乎所有数据库存储的数据都是可选存储的...

考虑到这一点，我建议对所有用户属性使用**6NF**。

*   该`User`表用作锚，理想情况下仅容纳`UserID`.

*   每个用户属性都有自己的表，只有`UserID`和属性值（**6NF**）；仅当指定了属性时才存在行（所有属性值都不是 NULL）。

*   每个属性也只有一个共享表`OwnerID, VisitorID`。仅当所有者与访问者共享属性时才存在行。

* * *

![在此处输入图像描述](../Images/042ac36ec2d7fde3237c4f0b4f8aba40.png)

* * *

*   在此模型中，用户只能共享确实存在的属性。如果您想允许共享未指定的属性，请将 也指向`OwnerID`表格`User`。

为了使事情更简单，您可以（应该）为用户数据创建一个视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:38:19.943

我能想到的最简洁的方法是存储一个带有关系的 INT，这是权限的按位表示；在代码中解释该 INT。INT 将需要与您拥有唯一权限一样多的位，然后为每个位定义常量。我不确定你用什么语言实现，但是有几种方法可以给这只猫剥皮......

因此，一些伪代码可能如下所示：

```
define RELATION_PERMISSION_SEE_MY_PHOTOS = 1;
define RELATION_PERMISSION_SEE_MY_FRIENDS = 1<<1;
define RELATION_PERMISSION_SEE_MY_EMAIL = 1<<2; 
```

然后构建一些支持信息的数组（如本地化字符串等）来构建你的界面，然后做这样的事情来修改它：

```
int new_permission = 0
foreach(user-selected-permissions as selected_permission) {
  new_permission |= selected_permission
}
my_relation_model.permissions_flags = new_permission 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T18:45:22.560

一种方法是使用本质上的键值对..

与此类似：

```
user_1_id
user_2_id
field
privilege 
```

# file - 批处理：如何制作包含文件夹中所有文件的 .txt 文件，没有扩展名

> ID：11377538
> 
> 赞同：0
> 
> 时间：2012-07-07T18:21:21.550
> 
> 标签：file, list, batch-file, file-extension, filelist

现在我有这个代码：

```
@echo off

dir Maps /A-D /b /o:gne >Maplist.txt

start notepad Maplist.txt 
```

但我使 Maplist.txt 像这样：

a.bsp

b.bsp

c.bsp

但我希望它没有“.bsp”

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T21:16:08.923

您需要阅读 FOR 命令 - 类型`HELP FOR`或`FOR /?`从命令窗口查看文档。

以下代码将完全符合您的要求。

```
@echo off
>Maplist.txt (
  for %%F in (Maps\*) do @echo %%~nF
)
start notepad Maplist.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:45:33.993

有令人讨厌的语音标记，我假设你也不想要那些？（虽然它确实摆脱了扩展）

```
forfiles /p files /c "cmd /c echo @FNAME >> maplist.txt" 
```

# c++ - 在 DLL GTA SA 中制作和使用热键

> ID：11377539
> 
> 赞同：1
> 
> 时间：2012-07-07T18:21:43.783
> 
> 标签：c++, dll

我用 C++ 制作了一个小 DLL，将其注入到 GTA San Andreas 游戏中。现在我想创建在游戏中工作的热键。就像我按 F10 时一样，它会将玩家的生命值设置为最大值。我已经知道如何设置健康，但我不知道如何制作热键。这是我找到的一些代码，但我认为它不适用于 DLL：

```
bool customKeyHook(HWND hWnd, UINT uMsg ,WPARAM wParam, LPARAM lParam)
{
    switch(wParam)
    {
    case VK_F10:
        *playerHP = 200;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:26:54.093

使用 CreateThread 创建一个线程，然后创建一个无限循环并等待按键：

```
if (GetAsyncKeyState(VK_F10) & 1)
{

} 
```

# windows - Windows 批处理文件错误

> ID：11377541
> 
> 赞同：0
> 
> 时间：2012-07-07T18:21:55.217
> 
> 标签：windows, batch-file, cmd

我制作了一个简单的 Windows 批处理文件来解码 JAR 和 APK，它可以正常工作：

```
@ECHO off
 SETLOCAL ENABLEDELAYEDEXPANSION
 SET listejar=:core.jar:core-junit.jar:bouncycastle.jar:ext.jar:framework.jar:framework2.jar:android.policy.jar:services.jar:apache-xml.jar:filterfw.jar:java.awt.jar:svc.jar:am.jar:android.test.runner.jar:bmgr.jar:bu.jar:com.android.future.usb.accessory.jar:com.android.location.provider.jar:com.google.android.maps.jar:com.google.android.media.effects.jar:com.google.widevine.software.drm.jar:com.samsung.device.jar:com.yamaha.android.media.jar:twframework.jar:send_bug.jar:GlobalConfig.jar:ime.jar:input.jar:javax.obex.jar:libvtmanagerjar.jar:minimode.jar:monkey.jar:pm.jar:seccamera.jar:secframework.jar:sechardware.jar:secmediarecorder.jar:sec_feature.jar
 SET baksmali=c:\DO\baksmali.jar
 SET smali=c:\do\smali.jar
 SET BTP1=c:\do
 SET BTP2=c:\do\framework

FOR %%F IN ("*.odex") DO (
        @echo.
        @echo.
        @echo.
        ECHO Decompiling %%F
        java -Xmx1024m -jar %baksmali% -a 15 -d %btp1% -d %btp2% -c %listejar% -x "%%F" -o "%%~nF"
        ECHO Compiling %%~nF classses.dex
        md "%%~dpnF"_o
        java -Xmx1024m -jar %smali% -a 15 %%~nF -o "%%~dpnF"_o\classes.dex
        RD /s/q "%%~dpnF"

        C:\DO\7z.exe u "%%~dpnF".jar %%~dpnF"_o\classes.dex >NUL
        RD /s/q %%~dpnF"_o
        DEL %%~dpnxF
        ECHO %%~nF is Deodexed
    )
cd..

CD app
FOR %%F IN ("*.odex") DO (
        @echo:
        @echo:
        @echo:
        ECHO Decompiling %%F
        java -Xmx1024m -jar %baksmali% -a 15 -d %btp1% -d %btp2% -c %listejar% -x "%%F" -o "%%~nF"
        ECHO Compiling %%~nF classses.dex
        md "%%~dpnF"_o
        java -Xmx1024m -jar %smali% -a 15 %%~nF -o "%%~dpnF"_o\classes.dex
        RD /s/q "%%~dpnF"
        C:\DO\7z.exe u "%%~dpnF".apk %%~dpnF"_o\classes.dex >NUL
        RD /s/q %%~dpnF"_o
        DEL %%~dpnxF
        ECHO %%~nF is Deodexed
    )
echo ALL DONE press any key to exit
pause >NUL
exit 
```

但后来我试着让它变得更好一点，我不知道我做错了什么。它现在立即退出。对此事的帮助将不胜感激。

这是我在修订版中尝试做的事情：

```
@ECHO off
 SETLOCAL ENABLEDELAYEDEXPANSION
 SET listejar=:core.jar:core-junit.jar:bouncycastle.jar:ext.jar:framework.jar:framework2.jar:android.policy.jar:services.jar:apache-xml.jar:filterfw.jar:java.awt.jar:svc.jar:am.jar:android.test.runner.jar:bmgr.jar:bu.jar:com.android.future.usb.accessory.jar:com.android.location.provider.jar:com.google.android.maps.jar:com.google.android.media.effects.jar:com.google.widevine.software.drm.jar:com.samsung.device.jar:com.yamaha.android.media.jar:twframework.jar:send_bug.jar:GlobalConfig.jar:ime.jar:input.jar:javax.obex.jar:libvtmanagerjar.jar:minimode.jar:monkey.jar:pm.jar:seccamera.jar:secframework.jar:sechardware.jar:secmediarecorder.jar:sec_feature.jar
 SET baksmali=c:\DO\baksmali.jar
 SET smali=c:\do\smali.jar
 SET BTP1=c:\do
 SET BTP2=c:\do\framework

CD framework
 IF EXIST *.odex ( GOTO STARTFW ) ELSE ( ECHO Odex Not Found && GOTO FINISHEDFW )

 :STARTFW
 FOR %%F IN ("*.odex") DO (
 @echo.
 @echo.
 @echo.
 ECHO Decompiling %%~nxF
 java -Xmx1024m -jar %baksmali% -a 15 -d %btp1% -d %btp2% -c %listejar% -x "%%F" -o "%%~nF"
 ECHO Compiling %%~nF classses.dex
 MD "%%~dpnF"_o
 java -Xmx1024m -jar %smali% -a 15 %%~nF -o "%%~dpnF"_o\classes.dex
 RD /s/q "%%~dpnF"
 IF EXIST "%%~dpnF"_o\classes.dex (GOTO CONTINIUEFW) ELSE (GOTO CHECKFW)

 :CHECKFFW
 IF NOT EXIST C:\DO\Framework\ERORR ( MD C:\Framework\Error )
 MOVE /Y "%%~dpnF".* C:\Framework\Error
 ECHO Error With %%~nxF & %%~nF.jar
 ECHO Moved To Error Folder
 GOTO SKIPFW

 :CONTINIUEFW
 ECHO Injecting classes.dex to "%%~nF".jar
 C:\DO\7z.exe u "%%~dpnF".jar %%~dpnF"_o\classes.dex >NUL
 RD /s/q %%~dpnF"_o
 DEL %%~dpnxF
 ECHO %%~nF.jar is Deodexed
 IF EXIST *.odex ( 
  GOTO STARTFW
  ) ELSE ( 
  ECHO Odex Not Found
  GOTO FINISHEDFW
  )

 :SKIPFW
 )

:FINISHEDFW
CD..
CD app

 IF EXIST *.odex ( 
  GOTO STARTAPP 
  ) ELSE ( 
   ECHO Odex Not Found
   GOTO FINISHEDAPP
 )
:STARTAPP
 FOR %%F IN ("*.odex") DO (
 @echo.
 @echo.
 @echo.
 ECHO Decompiling %%~nxF
 java -Xmx1024m -jar %baksmali% -a 15 -d %btp1% -d %btp2% -c %listejar% -x "%%F" -o "%%~nF"
 ECHO Compiling %%~nF classses.dex
 MD "%%~dpnF"_o
 java -Xmx1024m -jar %smali% -a 15 %%~nF -o "%%~dpnF"_o\classes.dex
 RD /s/q "%%~dpnF"
 IF EXIST "%%~dpnF"_o\classes.dex ( GOTO CONTINIUEAPP ) ELSE ( GOTO CHECKAPP )

 :CHECKFAPP
 IF NOT EXIST C:\DO\app\ERORR ( MD C:\app\Error )
 MOVE /Y "%%~dpnF".* C:\app\Error
 ECHO Error With %%~nxF & %%~nF.apk
 ECHO Moved To Error Folder
 GOTO SKIPAPP

 :CONTINIUEAPP
 ECHO Injecting classes.dex to "%%~nF".apk
 C:\DO\7z.exe u "%%~dpnF".apk %%~dpnF"_o\classes.dex >NUL
 RD /s/q %%~dpnF"_o
 DEL %%~dpnxF
 ECHO %%~nF.apk is Deodexed
 IF EXIST *.odex ( 
  GOTO STARTAPP
  ) ELSE ( 
  ECHO Odex Not Found
  GOTO FINISHEDAPP
 )

 :SKIPAPP

 )

echo ALL DONE press any key to exit
pause >NUL
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T21:08:24.950

我还没有跟踪您的代码以了解您收到语法错误的原因。但我看到了一个严重的问题 - 您试图在循环中使用 GOTO 并分支到同一循环中的标签。这根本不会按照您希望的方式工作。使用 GOTO 的那一刻，循环就被打破了。GOTO 发现标签 OK，但脚本不再知道有关循环的任何信息。除非您真的很聪明并且想要混淆您的代码，否则您的结果肯定会与您的预期不同。

通常，您永远不应该 GOTO 带括号的代码块中的标签。FOR 循环和 IF 语句都是如此。对于 IF/ELSE 块中的类似问题，请参阅[（Windows 批处理）Goto inside if 块的行为非常奇怪](https://stackoverflow.com/q/8481558/1012053)。

# javascript - 当用户将哈希添加到 URL 时使浏览器重新加载

> ID：11377549
> 
> 赞同：0
> 
> 时间：2012-07-07T18:22:58.650
> 
> 标签：javascript, html, http

假设你有一个这样的 URL：http: [//yoursite.com/#stackoverflow](http://yoursite.com/#stackoverflow)

如果我在地址栏中输入新的哈希值，它会尝试在页面上找到该 ID。有什么方法（可能使用 javascript？）来检测该浏览器活动，然后强制页面在该 URL 处重新加载？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:27:15.830

您需要绑定到[`hashchange`](https://developer.mozilla.org/en/DOM/window.onhashchange)事件：

```
window.onhashchange = function() {
    window.location.reload();
}; 
```

不过要小心：一些较旧的浏览器不支持此事件（[请参阅此](http://caniuse.com/hashchange)事件），因此您需要为这些事件添加 polyfill。

这是一个示例以及针对旧浏览器的轮询技术：

```
if ('onhashchange' in window) {
    window.onhashchange = function() {
        window.location.reload();
    };
} else {
    var hash = window.location.hash;
    setInterval(function() {
       if (window.location.hash !== hash) {
           window.location.reload();
       }
    }, 100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:26:04.993

在较新的浏览器上，您可以使用[`hashchange`event](https://developer.mozilla.org/en/DOM/window.onhashchange)。对它的支持是[相当不错的](http://caniuse.com/#feat=hashchange)，实际上。在较旧的浏览器上，您必须轮询[`location.hash`](https://developer.mozilla.org/en/DOM/window.location#Properties)（例如，使用`setInterval`或`setTimeout`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:30:39.493

值得一看，

这个小插件提供了跨浏览器支持的抽象。

[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

# .net - 使用多个 Silverlight 版本

> ID：11377559
> 
> 赞同：0
> 
> 时间：2012-07-07T18:24:23.197
> 
> 标签：.net, silverlight, multiple-versions

我安装了用于 VS2010 的 Silverlight 4 工具，用于使用 VS2010 开发 Prism 和 Silverlight 4 应用程序。我正在访问一个站点以观看需要 Silverlight 客户端版本 5 的视频。当我安装它时，我的 Silverlight 4 应用程序中断（XAML 设计器窗口显示异常和运行时错误，指出未找到匹配的运行时）。我知道的唯一解决方案是卸载 Silverlight 4 和 5，然后重新安装 4。有什么解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:27:23.443

如果您在 Visual Studio 中右键单击 Silverlight 项目并转到属性页面，则在 Silverlight 选项卡中有一个组合框可以选择目标 Silverlight 版本。从那里您应该能够选择 SL 4 或 5。

# java - 从服务中获取 SharedPreferences

> ID：11377564
> 
> 赞同：6
> 
> 时间：2012-07-07T18:24:34.883
> 
> 标签：java, android, eclipse, sharedpreferences, preferences

我正在尝试从服务访问共享首选项。我已经使用以下内容将文本的值保存到字符串...

```
SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPreferences.edit();
editor.putString("Ignore1_value", Example.getText().toString());
editor.commit(); 
```

但是，我将如何获得服务的价值？我尝试过的一切都一无所获。任何帮助将是完美的，非常感谢？

我也查看了其他一些问题，但没有解决方案。我想出了这个，但是就像我说的那样，它以无文本的形式返回。

```
Context ctx = getApplicationContext();
    SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(ctx);
    String example1string = sharedPreferences.getString("Ignore1_value","");
    Log.i("**GetSettings", example1string); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T18:26:05.910

我一直在使用`PreferenceManager.getDefaultSharedPreferences(context)`. 这对于`Context`您的应用程序中的所有 s 都是相同的。

A本身`Service`就是一个`Context`，所以这就足够了：

```
PreferenceManager.getDefaultSharedPreferences(this); 
```

# facebook - facebook离线访问令牌的替代品

> ID：11377575
> 
> 赞同：0
> 
> 时间：2012-07-07T18:26:09.363
> 
> 标签：facebook, facebook-graph-api

我正在制作一个 facebook 应用程序，它将每天扫描用户的新闻提要 - 但离线访问令牌已被弃用。

我知道访问令牌可以延长到 60 天。因此，如果用户 60 天没有使用我的应用程序，那之后我是否无法访问他们的信息？

我阅读了开发人员部分，但没有正确理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:39:28.663

这正是重点。如果访问令牌过期，您需要编写应用程序以通过身份验证流程运行。请记住，访问令牌可能因超时以外的其他（合法）原因而过期。如果您不要求新的权限，并且需要获取新的访问令牌，则该流程应该在不需要任何用户操作的情况下发生。

无论offline_access如何，您都需要为访问令牌失败编写代码 - 所以做对了！:)

# android - 使用应用程序图标访问屏幕

> ID：11377576
> 
> 赞同：0
> 
> 时间：2012-07-07T18:26:21.750
> 
> 标签：android

手机维修后，我丢失了所有应用程序，不得不根据屏幕截图重新排列“应用程序”屏幕 3 小时。那是浪费时间。

因此，我想编写一个 Android 应用程序来备份点击“应用程序”图标时出现的屏幕内容。（Samsung Kies 不提供此类功能）。

我想备份图标位置及其父文件夹。

有没有办法在无根电话上访问这些信息？

我在三星 Galaxy SII 上有 TouchWiz 4 shell。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:11:40.280

> 有没有办法在无根电话上访问这些信息？

假设“'应用程序'屏幕”是指主屏幕，那么不，除非您是主屏幕的作者，否则您无法在无根手机上访问此信息。

# sql - 关于 GWT Basics 的一些问题

> ID：11377582
> 
> 赞同：0
> 
> 时间：2012-07-07T18:26:48.207
> 
> 标签：sql, hibernate, google-app-engine, gwt, jpa

我是 Google Web Toolkit 的新手，我对该工具有一些疑问。

首先，我必须知道什么才能正确地为 GWT 编程？如果我使用 GWT Designer 制作 GUI 可以吗？

其次，我如何持久化我想要存储的所有数据？使用 JPA/Hibernate + SQL 数据库？还是使用 AppEngine 更好？我非常怀疑如何从数据库中获取数据以填充客户端的字段和表。

最后，我知道一点 Swing，所以，GWT 是一样的吗？（除了客户端 - 服务器概念） ?

那是我的问题。嗯，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T21:43:04.170

> 首先，我必须知道什么才能正确地为 GWT 编程？如果我使用 GWT Designer 制作 GUI 可以吗？

行。

> 其次，我如何持久化我想要存储的所有数据？使用 JPA/Hibernate + SQL 数据库？还是使用 AppEngine 更好？

这是你的选择。AppEngine 有它的局限性。例如，它可以扩展，但如果您需要经常快速更新数据，它可能不是多人游戏的最佳选择。这真的取决于你的需要/设计。

如果您确实使用 AppEngine，那么我在 JPA 方面的经验令人头疼。Objectify 要容易得多，也是我要走的路。

> 最后，我对 Swing 有点了解，所以，GWT 是一样的吗？（除了客户端 - 服务器概念） ?

我猜他们共享使用侦听器/处理程序来处理事件的概念。他们虽然不一样。

# ruby-on-rails - Rails 3 after_initialize 创建帖子

> ID：11377584
> 
> 赞同：0
> 
> 时间：2012-07-07T18:26:58.200
> 
> 标签：ruby-on-rails, rails-activerecord

我试图在 Rails 3 中使用 after_initialize 来自动构建某人的第一篇文章。我在模型中设置了默认值，但我希望一旦创建用户，它就会构建他们的第一个帖子。因此，他们将有一个 ID 为 1 的 Post 条目，而不只是 default_values。

模型：

```
class Etho < ActiveRecord::Base
belongs_to :user
attr_accessible :word_one, :word_two, :word_three, :word_four, :tagline
after_initialize :default_values

private
 def default_values
  self.word_one   ||= "Adventagious"
  self.word_two   ||= "Funny"
  self.word_three ||= "Multidisciplined"
  self.tagline    ||= "Shares the same visions as JFK. Wants to see the world fortune in prosperity."
 end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:30:37.803

弄清楚了。我忘了我可以在控制器内部构建。所以现在我在迁移中有一个 :default ，然后在用户创建方法上进行构建。

迁移内部：

```
add_column :ethos, :tagline, :text, :default => 'Shares a birthday with JFK. Believes in prosperty amongst humans.' 
```

在 User 的 create 方法中

```
ethos = @user.ethos.build 
```

感谢克里斯杜辛的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:59:09.377

> 只需使用回调方法“after_save”

class Etho < ActiveRecord::Base belongs_to :user attr_accessible :word_one, :word_two, :word_three, :word_four, :tagline after_save :default_values

```
private
 def default_values
  self.word_one   ||= "Adventagious"
  self.word_two   ||= "Funny"
  self.word_three ||= "Multidisciplined"
  self.tagline    ||= "Shares the same visions as JFK. Wants to see the world fortune in prosperity."
 end

end 
```

# scala - 谓词成立时重复调用函数

> ID：11377586
> 
> 赞同：11
> 
> 时间：2012-07-07T18:27:05.620
> 
> 标签：scala, functional-programming

我正在向远程服务器发出请求，有时由于网络不可靠而请求失败。如果失败，我希望请求重复，但`n`次数最多。如果我使用命令式语言，我会将请求发送代码放在一个 while 循环中，但我想以一种功能性的方式来做。

我为此目的编写了助手：

```
/** Repeatedly executes function `f` 
  * while predicate `p` holds
  * but no more than `nTries` times.
  */
def repeatWhile[A](f: => A)(p: A => Boolean)(nTries: Int): Option[A] =
  if (nTries == 0) {
    None
  } else {
    f match {
      case a if p(a) => repeatWhile(f)(p)(nTries - 1)
      case a         => Some(a)
    }
  } 
```

并像这样使用它：

```
// Emulating unreliable connection
var n = 0
def receive(): Option[String] =
  if (n < 4) {
    n += 1
    println("No result...")
    None
  } else {
    println("Result!")
    Some("Result")
  }

// Repeated call
val result = repeatWhile(receive)(!_.isDefined)(10) 
```

where`receive`是用于测试目的的愚蠢功能。`receive`此代码在最终成功之前进行了 4 次调用`Some(Result)`：

```
No result...
No result...
No result...
No result...
Result! 
```

我的`repeatWhile`作品很好，但我想重新发明轮子。我正在学习函数式编程，想知道我的问题是否有简单/标准的解决方案。

**Ps**我已经定义了更多的助手，也许他们已经在语言/标准库中了？

```
/** Repeatedly executes function `f` 
  * while predicated `p` not holds
  * but no more than `nTries` times.
  */
def repeatWhileNot[A](f: => A)(p: A => Boolean)(nTries:Int): Option[A] = 
  repeatWhile(f)(!p(_))(nTries)

/** Repeatedly executes function `f` 
  * while it returns None 
  * but no more than `nTries` times.
  */
def repeatWhileNone[A](f: => Option[A])(nTries:Int): Option[A] = 
  repeatWhileNot(f)(_.isDefined)(nTries).getOrElse(None) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-07T18:32:18.387

规范的方法是使用[`Iterator`](http://www.scala-lang.org/api/current/index.html#scala.collection.Iterator$@continually[A](elem:=>A):Iterator[A])：

```
Iterator.continually{f}.take(nTries).dropWhile(!p).take(1).toList 
```

这将为您提供一个空列表或单项列表，具体取决于它是否成功。`headOption`如果您愿意，可以将其转换为选项。稍作修改，这适用于您的所有用例。

正如您所做的那样编写小型递归方法也是非常明智的，尽管它们不在库中。一般来说，为你最常做的事情编写辅助方法是一个非常好的主意。这就是为什么 Scala 让编写方法变得如此容易的原因之一。

# c - 无法在 C 中传递二维字符数组（似乎只传递了第一个索引）

> ID：11377597
> 
> 赞同：0
> 
> 时间：2012-07-07T18:28:23.823
> 
> 标签：c, arrays, function, multidimensional-array

这是我编写的函数的一部分。File[120][80]，一个由行和字符组成的数组，被传入。

```
void Print(char File[120][80], int Lines, char* COMMAND) {
    //Print whole file.
    if (!spaces(COMMAND)) {
        int i = 0;
        for (i; i<Lines; i++) {
            printf("%i===%s", i+1, File[i]);
        }
    }
} 
```

运行它的结果（对于 4 行文件）是：

```
1===Line 1.
2===3===4=== 
```

所以似乎只有第一个索引实际上被传递了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:38:23.853

问题可能在于您如何调用`Print`或初始化您传递的数组 - 如果我添加以下内容，它对我来说很好：

```
int spaces(const char *s) { return 0; }

int main()
{
    char File[][80] = {
        "Line1\n", "Line2\n", "Line3\n", "Line4\n"
    };
    Print(File, 4, "test");
    return 0;
} 
```

# android - 无法比较用户名是否存在于数据库中

> ID：11377606
> 
> 赞同：-2
> 
> 时间：2012-07-07T18:29:32.203
> 
> 标签：android, database, sqlite

我是安卓新手。我想将数据库中的用户名与活动中输入的值进行比较，并获得 NullPointerException (NPE)。

这是我的 DBHelper 活动

```
public class DBHelper extends SQLiteOpenHelper 
{
    private SQLiteDatabase db;
    public static final String KEY_ROWID = "_id";
    public static final String KEY_ROWID1="_id";
    public static final String KEY_FNAME = "firstname";
    public static final String KEY_LNAME = "lastname";
    public static final String KEY_GENDER = "gender";
    public static final String KEY_USER = "username";
    public static final String KEY_EMAIL = "email";
    public static final String KEY_CNAME="Cname"; 
    public static final String KEY_CPOST="Cpost"; 
    public static final String KEY_CCRITERIA="Ccriteria"; 
    public static final String KEY_CUSER="Cusername"; 
    public static final String KEY_CEMAIL="Cemail"; 
    public static final String KEY_CCONTACT="Ccontact"; 
    public static final String KEY_CCUTOFF="Ccutoff"; 

    public static final String KEY_STATUS="status";
    public static final String KEY_USERNAME="username";

    DBHelper DB = null;
    private static final String DATABASE_NAME = "Sam2.db";
    private static final int DATABASE_VERSION = 3;
    public static final String DATABASE_TABLE_NAME = "JobSeeker";
    public static final String Company_Table = "Comp";
    public static final String Login_Table = "Login";
    private static final String DATABASE_TABLE_CREATE =
        "CREATE TABLE " + DATABASE_TABLE_NAME + "(" +
        "_id INTEGER PRIMARY KEY AUTOINCREMENT,"+
        "firstname TEXT NOT NULL, lastname TEXT NOT NULL, gender TEXT NOT NULL, username TEXT NOT NULL UNIQUE, password TEXT NOT NULL, email TEXT NOT NULL);";
    private static final String DATABASE_TABLE_CREATE2=
        " create table " + Company_Table +
        " (_id integer primary key autoincrement," +
        " Cname TEXT NOT NULL, Cpost TEXT NOT NULL,Ccriteria TEXT NOT NULL,Cusername TEXT NOT NULL, Cpassword TEXT NOT NULL, Cemail TEXT NOT NULL,Ccontact TEXT NOT NULL,Ccutoff TEXT NOT NULL);" ;
    private static final String DATABASE_TABLE_CREATE3=
        "CREATE TABLE " + Login_Table  + "(" +
        "_id INTEGER PRIMARY KEY AUTOINCREMENT,"+
        "username TEXT NOT NULL UNIQUE, password TEXT NOT NULL, status TEXT NOT NULL);";

    public DBHelper(Context context) {
      super(context, DATABASE_NAME, null, DATABASE_VERSION);
      System.out.println("In constructor");
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try{
            db.execSQL(DATABASE_TABLE_CREATE);
            db.execSQL(DATABASE_TABLE_CREATE2);
            db.execSQL(DATABASE_TABLE_CREATE3);
        }catch(Exception e){
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
    }

    public Cursor rawQuery(String string, String[] strings) {
        // TODO Auto-generated method stub
        return null;
    }

    public void open() {
        getWritableDatabase(); 
    }

    public Cursor getDetails(String text) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE_NAME, 
                  new String[]{KEY_ROWID, KEY_FNAME, KEY_LNAME, KEY_GENDER, KEY_USER, KEY_EMAIL}, 
                  KEY_USER + "=" + text, 
                  null, null, null, null, null);
        if (mCursor != null) 
        {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    public Cursor getCompDetails(String text) throws SQLException 
    {

        Cursor mCursor =
                db.query(true, Company_Table, 
                  new String[]{KEY_ROWID1, KEY_CNAME, KEY_CPOST, KEY_CCRITERIA, KEY_CUSER, KEY_EMAIL,KEY_CCONTACT,KEY_CCUTOFF}, 
                  KEY_CUSER + "=" + text, 
                  null, null, null, null, null);
        if (mCursor != null) 
        {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    public Cursor getLoginDetails(String text) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, Login_Table, 
                  new String[]{KEY_ROWID1, KEY_USERNAME, KEY_STATUS}, 
                  KEY_USERNAME + "=" + text, 
              null, null, null, null, null);
        if (mCursor != null) 
        {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    public Boolean checkusername(String name) throws SQLException {
        Cursor mCursor = db.query(
                  Login_Table, 
                  new String[] { KEY_ROWID, KEY_USERNAME }, 
                  KEY_USERNAME + "=?", 
                  new String[] {name}, 
                  null, 
                  null, 
                  null);
        if (mCursor!=null) {
            mCursor.moveToFirst();
            return true;
        }
        return false;
    }
} 
```

这是执行比较的活动。

```
DB.open();
if (DB.checkusername(uname)) {
    invalid = true;
    Toast.makeText(getApplicationContext(), 
          "username alredy in use enter another", 
          Toast.LENGTH_SHORT).show();
} 
```

它在这一行显示错误

```
 Cursor mCursor = db.query(
              Login_Table, 
              new String[] { KEY_ROWID, KEY_USERNAME }, 
              KEY_USERNAME + "=" + name, 
              null, 
              null, 
              null, 
              null); 
```

这是logcat

```
07-07 23:52:56.813: W/dalvikvm(536): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-07 23:52:56.823: E/AndroidRuntime(536): FATAL EXCEPTION: main
07-07 23:52:56.823: E/AndroidRuntime(536): java.lang.NullPointerException
07-07 23:52:56.823: E/AndroidRuntime(536):  at com.google.data.DBHelper.checkusername(DBHelper.java:164)
07-07 23:52:56.823: E/AndroidRuntime(536):  at com.google.data.Registration.onClick(Registration.java:211)
07-07 23:52:56.823: E/AndroidRuntime(536):  at android.view.View.performClick(View.java:2408)
07-07 23:52:56.823: E/AndroidRuntime(536):  at android.view.View$PerformClick.run(View.java:8816)
07-07 23:52:56.823: E/AndroidRuntime(536):  at android.os.Handler.handleCallback(Handler.java:587)
07-07 23:52:56.823: E/AndroidRuntime(536):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-07 23:52:56.823: E/AndroidRuntime(536):  at android.os.Looper.loop(Looper.java:123)
07-07 23:52:56.823: E/AndroidRuntime(536):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-07 23:52:56.823: E/AndroidRuntime(536):  at java.lang.reflect.Method.invokeNative(Native Method)
07-07 23:52:56.823: E/AndroidRuntime(536):  at java.lang.reflect.Method.invoke(Method.java:521)
07-07 23:52:56.823: E/AndroidRuntime(536):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-07 23:52:56.823: E/AndroidRuntime(536):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-07 23:52:56.823: E/AndroidRuntime(536):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:35:08.923

用户名是字符串类型，所以你需要像**' *name* '一样比较它**

尝试这个：

```
db.rawQuery("SELECT * FROM "+ Login_Table + " WHERE "+ 
KEY_USERNAME + "='" + name + "'"; 
```

**编辑：** 提供完整代码后。

rawQuery 应该可以工作，但是 db(SQLiteDatabase) 没有任何初始化，所以它将始终保持为 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:52:21.163

比较字符串时使用查询参数：

```
Cursor mCursor = db.query(
          Login_Table, 
          new String[] { KEY_ROWID, KEY_USERNAME }, 
          KEY_USERNAME + "=?", 
          new String[] {name}, 
          null, 
          null, 
          null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:40:59.100

试试这个，而不是使用`=`，使用`LIKE`

```
Cursor mCursor = db.query(
              Login_Table, 
              new String[] { KEY_ROWID, KEY_USERNAME }, 
              KEY_USERNAME + " LIKE '" + name + "'", 
              null, 
              null, 
              null, 
              null); 
```

**编辑：**实际上，从头开始，我的人类编译器让我失望了，是`db`在方法中实例化的`checkusername`吗？如果不是，`db`则为 null，因此在尝试调用时会发生 NPE `query`。

**编辑#2：**对，现在 OP 提供了更多信息，事实证明缺少变量的重要实例化，例如：

```
db = new DBHelper(getApplicationContext()); 
```

那么它应该可以在没有任何 NPE 错误的情况下工作。

# java - Java - Google App Engine - 排序 ArrayList without using Collections.sort() I need to sort an ArrayList and i can't use Collections.sort(), because Google App Engine's Java runtime environment doesn't support it. How can I do? Thank 问问题 问问题 2012-07-07T18:30:28.870 893 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I need to sort an ArrayList and i can't use Collections.sort(), because Google App Engine's Java runtime environment doesn't support it. How can I do? Thanks! ^^ Does Google App Engine support TreeSet? If so, assuming there are no duplicates and the elements are Comparable, use a TreeSet. List list = your ArrayList List sortedList = new ArrayList(new TreeSet(list)); You can also supply a Comparator to TreeSet if the elements aren't Comparable. I left generics left out for simplicity. javagoogle-app-enginesortingcollectionsarraylist 4 2 回答 2 This answer is useful 2 If your ArrayList has NO DUPLICATE VALUES..... and i am assuming even if it had, you didnt wanted to have redundant data..so its better to use TreeSet and Comparator together... Eg: ArrayList <myobject>arr = new ArrayList<myobject>(); TreeSet <myobject>t = new TreeSet<myobject>(Comparator c); t.addAll(arr); 于 2012-07-07T18:50:34.733 回答 This answer is useful 1 谷歌应用引擎支持TreeSet吗？如果是这样，假设没有重复并且元素是Comparable，请使用TreeSet. List list = your ArrayList List sortedList = new ArrayList(new TreeSet(list)); 如果元素不是，您也可以提供Comparatorto 。为简单起见，我忽略了泛型。TreeSetComparable 于 2012-07-07T18:43:18.233 回答 Related 1 sas - SAS 根据给定的字符元素创建多个表 2 c# - 掩码元素\属性值，使用Linq 1 matlab - 以 1 或其他值开始索引的优缺点是什么 1 r - 如何在ggplot中制作一个将不同年份的月份分组的条形图 1 php - 如何将变量从 php 加载到我的 flash 文件中？ 1 json - 来自 Wunderground API 的 hourly_forecast 3 c# - 在多个分隔符上分隔字符串时，我如何知道使用了哪个分隔符？（C＃） 1 c# - Windows Phone 8 中的格式错误的 XML 2 entity-framework - 实体框架对企业解决方案的担忧 2 qt - 从 QDropEvent 中检索所有文件路径 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</myobject></myobject></myobject></myobject>

> ID：11377612
> 
> 赞同：3
> 
> 时间：
> 
> 标签：java, google-app-engine, sorting, collections, arraylist

I need to sort an ArrayList and i can't use Collections.sort(), because Google App Engine's Java runtime environment doesn't support it. How can I do? Thanks! ^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:50:34.733

If your ArrayList has NO DUPLICATE VALUES..... and i am assuming even if it had, you didnt wanted to have redundant data..so its better to use TreeSet and Comparator together...

Eg:

```
ArrayList<MyObject> arr = new ArrayList<MyObject>();

TreeSet<MyObject> t = new TreeSet<MyObject>(Comparator c);

t.addAll(arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:43:18.233

谷歌应用引擎支持`TreeSet`吗？如果是这样，假设没有重复并且元素是`Comparable`，请使用`TreeSet`.

```
List list = your ArrayList
List sortedList = new ArrayList(new TreeSet(list)); 
```

如果元素不是，您也可以提供`Comparator`to 。为简单起见，我忽略了泛型。`TreeSet``Comparable`

# database - 本地数据库空结果

> ID：11377614
> 
> 赞同：0
> 
> 时间：2012-07-07T18:30:52.240
> 
> 标签：database, apache-flex, flash-builder

我正在尝试创建一个本地数据库。我做了一些插入，但是当我运行代码时，我得到“result = null”错误：

```
var selectStmt:SQLStatement = new SQLStatement();
selectStmt.addEventListener(SQLErrorEvent.ERROR, dbErrorHandler);
selectStmt.sqlConnection = conn;
selectStmt.text = "SELECT * FROM table1";
selectStmt.execute();

var result:SQLResult = selectStmt.getResult();
var numResults:int = result.data.length; 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:09:32.780

SQLStatement 是异步的，您只能在“flash.events.SQLEvent.RESULT”事件监听器中执行“getResult()”

# ruby - 可以在我的代码中包含 gem

> ID：11377615
> 
> 赞同：0
> 
> 时间：2012-07-07T18:30:53.237
> 
> 标签：ruby

我不明白为什么我的脚本找不到我刚刚安装的 gem。这是 main.rb 的代码

```
require 'exifr' 
```

此时我得到

```
LoadError: no such file to load — exifr 
```

错误信息

这是输出

```
gem environment

GEM PATHS:
     - /Users/me/.rvm/gems/ruby-1.9.3-p194 
```

当我做

```
ls /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/exifr-1.1.3/bin/exifr 
```

我明白了

```
/Users/me/.rvm/gems/ruby-1.9.3-p194/gems/exifr-1.1.3/bin/exifr 
```

所以宝石就在那个位置。我正在运行 Mac OS Lion。我做错了什么？

//编辑

```
gem list exifr

*** LOCAL GEMS ***

exifr (1.1.3)

1.9.3-p194 :001 > require 'exifr'
 => true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:48:33.913

运行 ruby​​ 1.9 时，您不再需要 ruby​​gems，所以这应该不是问题。

查看`bin`目录没有任何用处，因为宝石通常位于`lib`.

如果你做了一个`gem list exifr`你安装的 gem 应该像这样打印出来

```
*** LOCAL GEMS ***

exifr (1.1.3) 
```

下一步是通过 ruby​​ REPL 进行尝试

```
$ irb
1.9.3p125 :001 > require "exifr"
 => true 
1.9.3p125 :002 > exit 
```

这表明一切都安装得很好。

# objective-c - Objective C 如何制作一个从两分钟开始倒计时的计时器？

> ID：11377616
> 
> 赞同：0
> 
> 时间：2012-07-07T18:31:15.600
> 
> 标签：objective-c, ios, xcode, timer, nstimer

我在互联网上搜索了答案，但没有运气。我试过

```
- (void)viewDidLoad {

[super viewDidLoad];

twoMinTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timer) userInfo:nil repeats:YES]; }

- (void)timer {
for (int totalSeconds = 120; totalSeconds > 0; totalSeconds--){

timerLabel.text = [self timeFormatted:totalSeconds];

if ( totalSeconds == 0 ) {

   [twoMinTimer invalidate];

   } } } 
```

但它不起作用，当我进入那个视图时，标签从 2.00 变为 0.01，然后它就停止了。

任何建议将不胜感激 - 菲利普

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T18:37:27.153

您正在使用一次性 for 循环，而不是简单地减少总时间。试试这个：

```
- (void)viewDidLoad {

    [super viewDidLoad];
    totalSeconds = 120;
    twoMinTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                                   target:self
                                                 selector:@selector(timer)
                                                 userInfo:nil
                                                  repeats:YES];
}

- (void)timer {
    totalSeconds--;
    timerLabel.text = [self timeFormatted:totalSeconds];
    if ( totalSeconds == 0 ) {
        [twoMinTimer invalidate];
    } 
} 
```

声明`totalSeconds`为 int。

编辑：我非常感谢@JoshCaswell 和@MichaelDorst 分别提出的建议和代码格式。NSTimer 绝不是时间的准确表示，对于秒表或计数器来说绝对不够准确。相反，NSDate`+dateSinceNow`将是更准确的替代品，甚至是逐渐降低的级别`CFAbsoluteTimeGetCurrent()`， `mach_absolute_time()`并且精确到亚毫秒

# android - 找不到最近发布的应用

> ID：11377620
> 
> 赞同：0
> 
> 时间：2012-07-07T18:31:38.027
> 
> 标签：android, publish

我大约一个小时前发布了我的第一个应用程序，但我找不到它。我意识到它可能需要一段时间才能出现在搜索中，所以我尝试使用以下方法按名称链接到它：https: [//play.google.com/store/apps/details?id=ca.rcp.signals](https://play.google.com/store/apps/details?id=ca.rcp.signals)

没有它的迹象。有什么建议么？？它被称为“加拿大铁路信号”。

我意识到这个问题与已发布的其他问题相似，除了在其他情况下直接链接到他们的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:33:12.620

您提供的链接对我有用。你只需要再等几分钟。

从[发布清单](http://developer.android.com/distribute/googleplay/publish/preparing.html#final-checks)：

> 在几个小时内，您的应用将可供用户使用，并且您的产品页面将出现在 Google Play 中，供您浏览、搜索或链接您的促销活动。

# java - 从文本文件中读取阿拉伯字符

> ID：11377621
> 
> 赞同：3
> 
> 时间：2012-07-07T18:31:46.397
> 
> 标签：java

我已经完成了一个项目，其中我从一个用记事本编写的文本文件中读取。我的文本文件中的字符是阿拉伯语，文件编码类型是 UTF-8。在 Netbeans(7.0.1) 中启动我的项目时，一切似乎都很好，但是当我将项目构建为 (.jar) 文件时，字符以这种方式显示：ÇáãæÇÞÚááÊØæíÑ。请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:01:40.463

您很可能在某处使用 JVM 默认字符编码。如果您 100% 确定您的文件是使用 UTF-8 编码的，请确保在读取时也明确指定 UTF-8。例如这段代码被破坏了：

```
new FileReader("file.txt") 
```

因为它使用 JVM 默认字符编码 - 您可能无法控制它，而且显然 Netbeans 使用 UTF-8，而您的操作系统定义了不同的东西。请注意，[`FileReader`](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html)如果您希望代码可移植，这会使类完全无用。

而是使用以下代码片段：

```
new InputStreamReader(new FileInputStream("file.txt"), "UTF-8"); 
```

您没有提供代码，但这应该会给您一个应该如何实现的总体印象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T19:09:58.937

也许这个例子会有所帮助。我将尝试将 utf-8 文件的内容打印到以“Cp852”编码的 IDE 控制台和系统控制台。

我的`d:\data.txt`包含`ąźżćąś adsfasdf`

让我们检查一下这段代码

```
//I will read chars using utf-8 encoding
BufferedReader in = new BufferedReader(new InputStreamReader(
        new FileInputStream("d:\\data.txt"), "utf-8"));

//and write to console using Cp852 encoding (works for my windows7 console)
PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out,
        "Cp852"),true); // "Cp852" is coding used in
                    // my console in Win7

// ok, lets read data from file
String line;
while ((line = in.readLine()) != null) {
    // here I use IDE encoding
    System.out.println(line);
    // here I print data using Cp852 encoding
    out.println(line);
} 
```

当我在 Eclipse 中运行它时，输出将是

```
ąźżćąś adsfasdf
Ą«ľ†Ą? adsfasdf 
```

但系统控制台的输出将是

![在此处输入图像描述](../Images/5587b04d8f5dbe711f8f588c8ecc42f8.png)

# c++ - C++ 构造函数：为什么这个虚函数调用不安全？

> ID：11377629
> 
> 赞同：13
> 
> 时间：2012-07-07T18:32:40.153
> 
> 标签：c++, c++11, constructor, virtual-functions, virtual-inheritance

这是来自 C++11 标准 sec 12.7.4。这相当令人困惑。

1.  文中最后一句究竟是什么意思？
2.  为什么最后一个方法调用`B::B`未定义？它不应该只是打电话`a.A::f`吗？

> 4 成员函数，包括虚函数（10.3），可以在构造或销毁（12.6.2）期间调用。当从构造函数或从析构函数直接或间接调用虚函数时，包括在类的非静态数据成员的构造或销毁期间，并且调用适用的对象是正在构造的对象（称为 x）或破坏，调用的函数是构造函数或析构函数类中的最终覆盖者，而不是在派生更多的类中覆盖它。如果虚函数调用使用显式类成员访问 (5.2.5) 并且对象表达式引用 x 的完整对象或该对象的基类子对象之一，但不是 x 或其基类子对象之一，则行为未定义. [ 例子：
> 
> ```
> struct V {
>  virtual void f();
>  virtual void g();
> };
> 
> struct A : virtual V {
>  virtual void f();
> };
> 
> struct B : virtual V {
>  virtual void g();
>  B(V*, A*);
> };
> 
> struct D : A, B {
>  virtual void f();
>  virtual void g();
>  D() : B((A*)this, this) { }
> };
> 
> B::B(V* v, A* a) {
>  f(); // calls V::f, not A::f
>  g(); // calls B::g, not D::g
>  v->g(); // v is base of B, the call is well-defined, calls B::g
>  a->f(); // undefined behavior, a’s type not a base of B
> } 
> ```
> 
> —结束示例]

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-07T19:29:02.103

标准的那部分只是告诉您，当您构建一些`J`其基类层次结构包括多重继承的“大”对象时，并且您当前位于某个基本子对象的构造函数中`H`，那么您只能使用`H`和的多态性它的直接和间接基础子对象。不允许在该子层次结构之外使用任何多态性。

例如，考虑这个继承图（从派生类指向基类的箭头）

![在此处输入图像描述](../Images/b123de8b771ff073b0468335363538fe.png)

假设我们正在构建一个类型为“大”的对象`J`。我们目前正在执行 class 的构造函数`H`。在您的构造函数内部，`H`您可以享受红色椭圆内子层次结构的典型构造函数限制多态性。例如，您可以调用类型为 的基本子对象的虚函数，`B`多态行为将在圆圈子层次结构内按预期工作（“如预期”意味着多态行为将`H`与层次结构一样低，但不会更低）。您还可以调用位于红色椭圆内的 、 和其他子对象`A`的`E`虚函数。`X`

但是，如果您以某种方式访问​​椭圆*之外*的层次结构并尝试在那里使用多态性，则行为将变得未定义。例如，如果您以某种方式`G`从 of 的构造函数获得对子对象的访问权`H`并尝试调用 of 的虚函数`G`- 行为是未定义的。`D`关于调用 的构造函数和`I`从构造函数调用虚函数也是如此`H`。

获得对“外部”子层次结构的这种访问的唯一方法是，如果有人以某种方式将`G`子对象的指针/引用传递给`H`. 因此，标准文本中对“显式类成员访问”的引用（尽管似乎过度）。

该标准在示例中包含了*虚拟*继承，以展示该规则的包容性。在上图中，基本子对象`X`由椭圆形内部的子层次结构和椭圆形外部的子层次结构共享。标准说可以`X`从`H`.

`D`请注意，即使`G`和`I`子对象的构造在 的构造开始之前已经完成，此限制也适用`H`。

* * *

该规范的根源导致了实现多态机制的实际考虑。在实际实现中，VMT 指针作为数据字段被引入到层次结构中最基本的多态类的对象布局中。派生类不引入自己的 VMT 指针，它们只是为基类（可能还有更长的 VMT）引入的指针提供自己的特定*值。*

看看标准中的例子。类`A`派生自类`V`。这意味着`A`物理上的 VMT 指针属于`V`子对象。所有对 由 引入的虚函数的调用`V`都是通过由 引入的 VMT 指针调度的`V`。即每当你打电话

```
pointer_to_A->f(); 
```

它实际上被翻译成

```
V *v_subobject = (V *) pointer_to_A; // go to V
vmt = v_subobject->vmt_ptr;          // retrieve the table
vmt[index_for_f]();                  // call through the table 
```

但是，在标准的示例中，同样的`V`子对象也嵌入到`B`. 为了使构造函数限制的多态性正常工作，编译器会将指向`B`'s VMT 的指针放入存储在 VMT 指针中`V`（因为当`B`' 构造函数处于活动状态时`V`，子对象必须充当 的一部分`B`）。

如果此时您以某种方式尝试调用

```
a->f(); // as in the example 
```

上述算法将找到`B`存储在其子对象中的 VMT 指针，`V`并尝试`f()`通过该 VMT 进行调用。这显然毫无意义。`A`即通过 's VMT 调度的虚拟方法是`B`没有意义的。行为未定义。

通过实际实验验证这一点相当简单。让我们添加自己的`f`to版本`B`并执行此操作

```
#include <iostream>

struct V {
  virtual void f() { std::cout << "V" << std::endl; }
};

struct A : virtual V {
  virtual void f() { std::cout << "A" << std::endl; }
};

struct B : virtual V {
  virtual void f() { std::cout << "B" << std::endl; }
  B(V*, A*);
};

struct D : A, B {
  virtual void f() {}
  D() : B((A*)this, this) { }
};

B::B(V* v, A* a) {
  a->f(); // What `f()` is called here???
}

int main() {
  D d;
} 
```

你希望`A::f`被叫到这里吗？我尝试了几个编译器，所有编译器实际上都调用了`B::f`！同时，在这种调用中接收到的`this`指针值`B::f`是完全伪造的。

[http://ideone.com/Ua332](http://ideone.com/Ua332)

这正是由于我上面描述的原因（大多数编译器以我上面描述的方式实现多态性）。这就是语言将此类调用描述为未定义的原因。

有人可能会注意到，在这个特定的示例中，实际上是*虚拟*继承导致了这种不寻常的行为。是的，这正是因为子对象在`V`子对象之间共享`A`而发生的`B`。如果没有虚拟继承，行为很可能会更加可预测。但是，语言规范显然决定按照我的图表中绘制的方式画线：在构建时，无论使用什么继承类型，`H`都不允许走出 's 子层次结构的“沙箱” 。`H`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:51:33.890

您引用的规范性文本的最后一句话如下：

> 如果虚函数调用使用显式类成员访问并且对象表达式引用`x`该对象的基类子对象的完整对象或其中之一，但不是`x`其基类子对象或其基类子对象之一，则行为未定义。

诚然，这是相当复杂的。这句话的存在是为了限制在存在多重继承的情况下，在构造过程中可以调用哪些函数。

该示例包含多重继承： `D`派生自`A`and `B`（我们将忽略`V`，因为不需要演示为什么行为未定义）。在`D`对象的构造过程中，都会调用`A`和`B`构造函数来构造对象的基类子`D`对象。

`B`调用构造函数时*，完整对象的`x`*类型为`D`。在该构造函数中，`a`是一个指向 的`A`基类子对象的指针`x`。所以，我们可以说以下关于`a->f()`：

*   *正在构建*的`B`对象是一个对象的基类子`D`对象（因为这个基类子对象就是当前正在构建的对象，所以文中所指的就是`x`）。

*   它使用*显式的类成员访问*（在这种情况下通过`->`运算符）

*   *的完整对象的`x`*类型是`D`，因为这是正在构造的最派生类型

*   *对象表达式*( `a`) 指的是完整对象的一个​​基类*子*`x`对象（它指的是正在构造`A`的对象的基类子对象）`D`

*   *对象表达式*所引用的基类子对象不是也不`x`是 的基类子对象`x`： `A`不是也不`B`是`A`的基类`B`。

因此，根据我们从一开始就开始的规则，调用的行为是未定义的。

> 为什么最后一个方法调用`B::B`未定义？它不应该只是打电话`a.A::f`吗？

您引用的规则指出，在构造过程中调用构造函数时，“调用的函数是构造函数类中的最终覆盖者，而不是在派生更多的类中覆盖它的函数。”

在这种情况下，构造函数的类是`B`. 因为`B`不是从 派生的`A`，所以虚函数没有最终覆盖器。因此，进行虚拟调用的尝试表现出未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:46:57.433

我是这样理解的：在对象的构造过程中，每个子对象都构造了它的一部分。在示例中，这意味着`V::V()`初始化`V`的成员；`A`初始化`A`的成员，依此类推。由于在和`V`之前初始化，它们都可以依赖的成员来初始化。`A``B``V`

在示例中，`B`的构造函数接受两个指向自身的指针。它的`V`部分已经构建好了，所以可以安全地调用`v->g()`. 但是，此时`D`' 的`A`部分尚未初始化。因此，调用`a->f()`访问未初始化的内存，这是未定义的行为。

**编辑：**

`D`上面，是在`A`之前初始化的`B`，所以不会有任何访问`A`的未初始化内存。另一方面，一旦`A`完全构建，它的虚函数就会被那些虚函数覆盖`D`（实际上：它的 vtable`A`在构建过程中被设置为 's，`D`一旦构建结束就被设置为 's）。因此，调用`a->f()`will invoke `D::f()`, before`D`已经被初始化。因此，无论哪种方式 -`A`在之前或之后构造`B`- 您都将在未初始化的对象上调用方法。

虚函数部分已经在这里讨论过了，但为了完整起见：对`f()`uses的调用`V::f`因为`A`尚未初始化，就目前`B`而言，这是`f`. `g()`调用`B::g`，因为`B`覆盖`g`.

# jquery - jQuery绑定输入

> ID：11377630
> 
> 赞同：2
> 
> 时间：2012-07-07T18:32:43.757
> 
> 标签：jquery, input, bind

在 HTML5 之前，我们必须使用`onkeypress`事件（或类似事件）来检测用户何时调整输入字段中的文本。这通常会产生同步问题，并且对屏幕键盘根本不起作用，因此需要我们绑定多个事件。`oninput`HTML5 通过定义事件解决了这个问题。然而，由于 HTML5 尚未得到普遍支持，因此将事件与`oninput`事件*一起使用*以`onkeypress`实现向后兼容性通常更安全。

在编写验证脚本时，我最近发现以下在 jQuery 中有效：

```
$('input').bind('input', function() {...}); 
```

但是，这方面的文档（如果有的话）似乎很少。我的问题是：由于这是在 jQuery 中实现的（应该已经向后兼容），是否有必要包含“备份”事件，例如`onkeypress`？

我想在其中添加一些额外的绑定没有任何问题：

```
$('input').bind('input keydown mousedown', function() {...}); 
```

但很高兴知道是否需要额外的绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:46:02.840

我认为您应该考虑向后兼容性，因为并非所有浏览器都支持它，您可以[**在此处查看**](http://help.dottoro.com/ljhxklln.php)更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:44:40.207

您可以为跨浏览器事件签出[以下插件。](http://whattheheadsaid.com/projects/input-special-event)`oninput`

# c - C 语言中的正则表达式使用函数 regcomp 和 regexec 在第一次和第二次匹配之间切换

> ID：11377631
> 
> 赞同：1
> 
> 时间：2012-07-07T18:32:43.777
> 
> 标签：c, regex

我正在使用 Dev-c++ IDE 编译我的 C (WIN32 API) 程序。

我正在使用[http://gnuwin32.sourceforge.net/packages/regex.htm提供的正则表达式库](http://gnuwin32.sourceforge.net/packages/regex.htm)

我正在使用此文档作为参考，上述站点也提供了相同的文档... [http://pubs.opengroup.org/onlinepubs/009695399/functions/regcomp.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/regcomp.html)

以下是代码：

```
#include <cstdlib>
#include <iostream>
#include <sys/types.h>
#include <regex.h>
#include <conio.h>
#include <stdio.h>

using namespace std;

int main(int argc, char *argv[])
{
    int a;
    regex_t re;
    char str[128] = "onces sam lived with samle to win samile hehe sam hoho sam\0";
    regmatch_t pm;

    a = regcomp(&re,"sam", 0);
    if(a!=0)
    {
        puts("Invalid Regex");
        getch();
        return 0;
    }

    a = regexec(&re, &str[0], 1, &pm, REG_EXTENDED);    
    printf("\n first match at %d",pm.rm_eo);        

    int cnt = 0;

    while(a==0)
    {
        a = regexec(&re, &str[0] + pm.rm_eo, 1, &pm, 0);

        printf("\n next match %d",pm.rm_eo);        

        cnt++;        
        if(cnt>6)break;
    }

    getch();  
    return EXIT_SUCCESS;
} 
```

while 循环无限显示匹配字符串的第一个和第二个结束位置，而不是进一步。

我使用 cnt 变量检查了 6 圈，然后我打破循环以停止无限运行。

输出是：

> 9点第一场比赛
> 
> 下一场比赛 15
> 
> 下一场比赛 9
> 
> 下一场比赛 15
> 
> 下一场比赛 9
> 
> 下一场比赛 15

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:52:46.910

试试这个：

```
int cnt = 0;
int offset = 0;
a = regexec(&re, &str[0], 1, &pm, REG_EXTENDED);
while(a==0) {
    printf("\n %s match at %d", offset ? "next" : "first", offset+pm.rm_so);
    offset += pm.rm_eo;
    cnt++;
    a = regexec(&re, &str[0] + offset, 1, &pm, 0);
} 
```

您实际上并没有单步执行您的字符串，这就是导致无休止循环的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-19T01:16:02.570

我提出了这段代码，对@jxh 解决方案进行了一些改进（更紧凑），并避免使用额外的查找`&str[0]`

```
int cnt = 0;
int offset = 0;
while(!regexec(&re, str + offset, 1, &pm, REG_EXTENDED)) {
    printf("%s match at %d\n", offset ? "next" : "first", offset+pm.rm_so);
    offset += pm.rm_eo;
    cnt++;
} 
```

# ruby-on-rails - Ruby：通过索引与迭代器访问数组对象

> ID：11377633
> 
> 赞同：1
> 
> 时间：2012-07-07T18:32:53.870
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3.2

我对 Ruby 和 Rails 框架还很陌生。我的背景主要是 Java。无论如何，我面临着一个奇怪的情况。我的一个模型中有一个返回关联模型的方法。关联如下。A has_many Bs, B属于A（即一对多）

```
class ModelA < ActiveRecord::Base
  has_many :model_bs

  def get_bs
    ModelB.where(:a_id => id)
  end
end 

class ModelB < ActiveRecord::Base
  belongs_to :model_a
end 
```

在我看来，如果我尝试访问结果集中的记录（模型），我可以毫无问题地调用它的属性（图 A）。生活很好。

图一：

```
<% bs = a.get_bs %>
<% bs.each do |b| %> 
  <%= b.some_prop %> 
<% end %> 
```

但是，如果我尝试按索引访问模型，我会收到一条错误消息，指出我无法在 nil 对象上调用方法（图 B 和 C）。

图 B：

```
<% bs = a.get_bs %>
<%= bs[0].some_prop) %> 
```

甚至..

图C：

```
<% bs = a.get_bs %>
<%= bs[0].first %> 
```

不工作。我知道这是用户错误（我）。我查看了从集合中访问对象的文档（在这种情况下，我相信它是一个 Ruby 数组）。我也在 StackOverflow 上搜索过这里。我仍然摸不着头脑。我还没有完全找到类似的线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:37:14.603

你错了，它不是 Array，它是一个`ActiveRecord::Relation`类。`.to_a`如果你真的需要它，你可以将它转换为一个数组。我已经检查过了，您可以使用 [] 运算符通过 index: 访问项目`ModelA.where("created_at = created_at")[0].name`，所以我认为问题出在其他地方，可能在您的情况下。

检查[文档](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)。但无论如何，你不应该使用这样的关系。使用`has_many`和`belongs_to`表示模型之间的关系。像这样：

```
class ModelA < ActiveRecord::Base
  has_many :ModelB
end 

class ModelB < ActiveRecord::Base
  belongs_to :ModelA
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:48:33.740

我找到了解决方案。它不漂亮，但现在要到期了。在 LinkedIn 上某人的帮助下，我发现`.try`在尝试访问属性时使用模型上的方法，我能够在没有空指针异常的情况下检索值。

例子：

```
<% bs = a.get_bs.to_a%>
<%= bs[0].try(:some_attr) %> 
```

我不清楚为什么我需要使用该`.try`方法。我的意思是，我知道该方法的用途。这是检查 nil 值并允许页面呈现而不抛出异常的便捷方法。但很明显，我的模型不是空的，它有数据。那么为什么我只能通过`.try`方法访问它的属性呢？老实说，我认为这可能是 Rails 中的一个错误。

我想我最终要做的是创建一个利用该方法的辅助`.try`方法。这样一来，我就不会全神贯注`.try`了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T20:01:19.850

为什么不使用这个？

```
def get_bs
  ModelB.find_all_by_a_id(id)
end 
```

# vb.net - 时间戳和字符串对的最紧凑文件存储

> ID：11377635
> 
> 赞同：0
> 
> 时间：2012-07-07T18:33:11.110
> 
> 标签：vb.net, visual-studio-2010

我想以最紧凑的方式将时间戳和字符串对写入文件。我开始编写 Ticks 的字符串表示，然后是 ASCII 31 作为分隔符，然后是字符串，然后是 CR。

然后我意识到，由于刻度很长并且只能存储为 8 个字节，我应该将刻度转换为字节并将这些字节写入文件。这很好，除了那些时间戳字节可能包含一个值为 31 的字节，所以我的 ASCII 31 分隔符不再是唯一的。

将时间戳和字符串对存储到文件的最紧凑方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:30:35.940

由于*Ticks*具有固定的最大长度，您可以避免使用分隔符，读取*Ticks*数据的前 8 个字节，然后将剩余字节作为字符串读取。:)

# java - 如何在 JavaFX 中检测到已完成的调整大小操作？

> ID：11377639
> 
> 赞同：7
> 
> 时间：2012-07-07T18:33:22.523
> 
> 标签：java, javafx-2, resize, stage, scene

我有一个**舞台**、一个**场景**和一个**WebView**节点。当我将窗口扩大到更大的尺寸时 - 由于**WebView**事情变得非常缓慢。我想要做的是仅在窗口的大小调整完成*时才为***WebView** 填充新空间（这是我在窗口的可调整大小的控件/边缘上释放鼠标左键）。现在我可以设置最大值。该节点的大小到默认情况下 - 这将阻止它扩展。但是如何检测窗口上完成调整大小操作的实际事件？通过绑定，我可以验证是否发生了调整大小 - 但它是瞬时的（W & D 的属性会立即更改而不会释放 LMB），而我只需要在***LMB**已发布。建议？*

 ** * *

**我尝试在Event.ANY**的*舞台*上使用**addEventFilter**，只是为了查看此事件类型是否可识别 - 遗憾的是无济于事。

 ***我也偶然发现了[这个](http://www.java.net/forum/topic/openjfx/javafx-script-language-discussion/javafx-20-how-detect-window-resize-event)未答复的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:24:18.927

这不是您问题的直接答案。如果我正确理解了呆滞，那么您将面临某种奇怪的闪烁和效果图。为了减少延迟，可以手动更稀疏地更新 webView 的大小：

```
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.layout.Pane;
import javafx.scene.layout.PaneBuilder;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
import javafx.util.Duration;

public class KSO_Demo extends Application {

    @Override
    public void start(Stage primaryStage) {

        final WebView webView = new WebView();
        webView.getEngine().loadContent("<div style='background-color: gray; height: 100%'>Some content</div>");

        final Pane pane = PaneBuilder.create().children(webView).style("-fx-border-color: blue").build();

        final Timeline animation = new Timeline(
                new KeyFrame(Duration.seconds(.5),
                new EventHandler<ActionEvent>() {

                    @Override
                    public void handle(ActionEvent actionEvent) {
                        webView.setPrefSize(pane.getWidth(), pane.getHeight());
                    }
                }));
        animation.setCycleCount(1);

        primaryStage.setScene(new Scene(pane, 300, 250));

        primaryStage.widthProperty().addListener(new ChangeListener<Number>() {
            @Override
            public void changed(ObservableValue<? extends Number> arg0, Number arg1, Number arg2) {
                animation.play();
            }
        });

        primaryStage.heightProperty().addListener(new ChangeListener<Number>() {
            @Override
            public void changed(ObservableValue<? extends Number> arg0, Number arg1, Number arg2) {
                animation.play();
            }
        });
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

webView 位于`Pane`其中不会自动布局其子级。webView 的大小更新延迟 0.5 秒，忽略间隔更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T06:42:06.457

[只有当您能够为您的应用程序使用未装饰的阶段](http://docs.oracle.com/javafx/2/api/javafx/stage/StageStyle.html#UNDECORATED)时，此答案才适用。

使用未装饰的舞台，您可以自己处理调整大小的装饰和操作；允许访问正确的钩子以处理调整大小操作的完成。

[请参阅Ensemble 示例应用程序](http://www.oracle.com/technetwork/java/javafx/samples/index.html)源代码中的 WindowResizeButton 类，了解如何为未装饰的舞台实现调整大小句柄的演示。修改这个类以添加一个[setOnMouseReleased](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setOnMouseReleased%28javafx.event.EventHandler%29)处理程序并在其中实现您的 webView 大小修改。

我确实想知道为什么这是必要的，因为我在调整包含 WebView 的窗口大小时并没有任何迟缓 - 也许这是由于您的应用程序在 WebView 中的内容使用与我一直在使用的不同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-22T18:33:28.813

我正在制作一个应用程序，我必须定期获取卫星图像（相当密集），所以我必须找到一种方法来仅捕获最后一个事件。我决定在执行密集任务和重置计数的调整大小侦听器之前生成一个线程以倒计时一段时间。对我来说，这似乎比数百次安排和取消安排任务更有效率。

注意我在这里也有一些逻辑来捕捉第一个窗口大小的变化 System.currentTimeMillis();

```
import javafx.application.Platform;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;

public class ResizeListener implements ChangeListener {
    long lastdragtime = System.currentTimeMillis();
    double xi, yi, dx, dy, wid, hei;
    GuiModel model;
    TimerThread timebomb;

    public ResizeListener(GuiModel model) {
        this.model = model;
        timebomb = new TimerThread(350);
        timebomb.start();
    }

    public void changed(ObservableValue observable, Object oldValue, Object newValue) {
        if (System.currentTimeMillis() - lastdragtime > 350) { //new drag
            xi = model.stage.getWidth();
            yi = model.stage.getHeight();
            model.snapshot = model.canvas.snapshot(null, null);
        }

        timebomb.active = true;//start timer
        timebomb.ms = timebomb.starttime;//reset timer

        wid = model.stage.getWidth()-72;
        hei = model.stage.getHeight()-98;
        dx = model.stage.getWidth() - xi;
        dy = model.stage.getHeight() - yi;
        if (dx < 0 && dy < 0) {
            model.canvas.setWidth(wid);
            model.canvas.setHeight(hei);
            model.graphics.drawImage(model.snapshot, -dx/2, -dy/2, wid, hei, 0, 0, wid, hei);
        } else if (dx < 0 && dy >= 0) {
            model.canvas.setWidth(wid);
            model.graphics.drawImage(model.snapshot, -dx/2, 0, wid, hei, 0, 0, wid, hei);
        } else if (dx >= 0 && dy < 0) {
            model.canvas.setHeight(hei);
            model.graphics.drawImage(model.snapshot, 0, -dy/2, wid, hei, 0, 0, wid, hei);
        }
        lastdragtime = System.currentTimeMillis();
    }

    private class TimerThread extends Thread {
        public final int starttime;//multiple of 25
        public int ms = 0;
        public boolean active = false;

        public TimerThread(int starttime) {
            this.setDaemon(true);
            this.starttime = starttime;
        }

        public void run() {
            while (true) {
                try {
                    Thread.sleep(25);
                } catch (InterruptedException x) {
                    break;
                }

                if (active) {
                    ms -= 25;
                    if (ms <= 0) {
                        active = false;
                        Platform.runLater(() -> {
                            model.canvas.setWidth(wid);
                            model.canvas.setHeight(hei);
                            model.fetchSatelliteImagery();
                            model.refresh();
                        });
                    }
                }
            }
        }
    }//end TimerThread class
}//end listener class 
```****

# android - Android 对话框暗淡动画

> ID：11377645
> 
> 赞同：1
> 
> 时间：2012-07-07T18:34:45.837
> 
> 标签：android

长话短说：如何设置显示对话框时发生的暗淡动画的持续时间？

可以通过 控制暗淡不透明度`getWindow().getAttributes().dimAmount`，但我找不到与动画持续时间相关的任何内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T22:20:10.510

我得自己回答。我查看了 Android 资源，却发现这是不可能的。

在 Android < 3.0 上，动画持续时间是硬编码的，设置为 1200 毫秒。在 Android >= 3.0 上，动画持续时间等于窗口进入/退出动画的持续时间。

# ios - iOS 存储文件规则 - 在 iOS 应用上存储音频文件

> ID：11377648
> 
> 赞同：1
> 
> 时间：2012-07-07T18:35:13.003
> 
> 标签：ios, ios5, nsdocumentdirectory

我需要确保我在做正确的事情：

在我的应用程序中，用户可以从服务器下载音频文件。我不希望备份那些大文件，因为他可以在需要时重新下载它们。

我的应用程序适用于 iOS 4.0 及更高版本。

所以据我所知，我需要存储文件是文档目录并为该目录设置一个标志以不备份？

我对么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:26:20.013

与其将它们放入“Documents”目录（备份到云端），不如将您的音频文件放入“Cache”目录（特别是“ `/Library/Cache`”，不会备份）？

[这是 Stackoverflow 上的另一个问题](https://stackoverflow.com/questions/7762743/icloud-storage-of-media-in-iphone-documents-folder)，可能有助于进一步回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T07:42:31.163

您还可以阻止文件备份： [https ://developer.apple.com/library/ios/qa/qa1719/_index.html](https://developer.apple.com/library/ios/qa/qa1719/_index.html)

# apache - 在 xampp mac 上设置 SSL 证书

> ID：11377651
> 
> 赞同：2
> 
> 时间：2012-07-07T18:35:25.990
> 
> 标签：apache, ssl, xampp

我已经下载了 xampp for mac，安装了它并购买了 ssl 证书，但我很难

安装ssl的时间...

*   有计算机智能的人可以一步一步地向我解释一下，如何简单地设置它？请问我有

谷歌搜索，但无法理解他们的做法，请慢慢来

解释...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T21:40:51.053

您需要编辑以启用 SSL 的文件`httpd-ssl.conf`位于该`conf/extra`目录中。

更改以下指令：

*   `SSLCertificateFile`至`domain_com.crt`
*   `SSLCACertificateFile`至`PositiveSSLCA2.crt`
*   `SSLCertificateKeyFile`创建 CSR 时收到的私钥文件

    *   打开“**终端**”并输入： `sudo nano /private/etc/hosts`然后添加`127.0.0.1 your_domain.com`和`127.0.0.1 www.your_domain.com`，编辑完 hosts 文件后，按**control-o**保存文件。

然后调用`sudo /Applications/XAMPP/xamppfiles/xampp enablessl`在 httpd.conf 中启用 SSL 并重新启动 Apache。现在尝试访问`https://localhost`

# c++ - 链表实现中的错误

> ID：11377653
> 
> 赞同：2
> 
> 时间：2012-07-07T18:35:29.720
> 
> 标签：c++, linked-list

*以下是 Adam Drozdek的 C++ 中*的数据结构和算法（第 2 版）中的单链表实现的代码摘录，其中涉及删除具有给定值的节点。

```
IntNode *tmp = head->next;
head = head->next;
delete tmp; 
```

（*head*在其他地方定义为 IntNode*）此代码片段中是否有拼写错误，或者我的心理处理器是否不正确，在每次执行上述代码片段后，该*head将始终为空指针？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:50:49.873

当您写入时`delete tmp`，您正在删除 指向的对象`tmp`。但是，删除后`head`仍然会指向同一个地方。取消引用它 ( `*head`) 会导致问题，因为`head`指向的对象已被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:37:45.327

不，它将指向列表的第二个元素（现在是第一个元素）。

# c# - Windows phone 文本框输入为八进制数

> ID：11377655
> 
> 赞同：1
> 
> 时间：2012-07-07T18:35:53.253
> 
> 标签：c#, windows-phone-7, textbox

我可以在 windows phone 7 中将文本框输入捕获为八进制数字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:51:07.380

您可以将字符串转换为 int 使用：

```
int number = Convert.ToInt32("010", 8); 
```

如果抛出`FormatException`，则无法转换数字。

# ruby-on-rails - Ruby 1.9.x 和字符串编码

> ID：11377656
> 
> 赞同：0
> 
> 时间：2012-07-07T18:35:59.523
> 
> 标签：ruby-on-rails, ruby, encoding, utf-8

我刚从 Ruby 1.8.7 迁移到 Ruby 1.9.2，我一直在字符串编码问题上绊倒。我的 MySQL 数据库都是 utf8，但每次我从中查询并查找字符串编码时，我都会得到 ASCII-9BIT。

```
ruby-1.9.2-p180 :002 > Artist.find(1043).name.encoding
 => #<Encoding:ASCII-8BIT> 
```

所以像 Sigur Rós 这样的艺术家会打印出“Sigur R\xC3\xB3s”。事实证明这会导致一些问题，因为我的客户端应用程序希望我的服务器返回 UTF8 json（因为一直都是这样）。一个临时的解决方法似乎是`force_encoding("UTF-8")`在我的代码中添加，但感觉非常混乱，特别是因为 Ruby 1.8.7 不需要这些。

我尝试将编码魔术注释添加`Encoding.default_external`到我的 env 文件中，`encoding`将参数添加到我的 database.yml 文件中，但什么也没做。

我应该如何处理 Ruby 1.9.x 和字符串编码？

--

**编辑**：在我的其他 Rails 应用程序中（从一开始就是 Ruby 1.9.2），所有 MySQL 字符串似乎都以 UTF-8 编码。但是数据库/表编码/字符集**完全相同**？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:12:59.850

好吧，更新到 Rails 3.1.3 和 mysql2 0.3.10 似乎解决了我的问题（正在运行 Rails 3.0.3 和 mysql2 0.2.6）。不过对我来说似乎很奇怪，因为 Ruby 1.9 已经超过 3 年了，而且 Rails 3.0.3 在那之后发布了，所以我不明白为什么 Rails 3.0.x 不能很好地与 Ruby 的 1.9 新字符串编码配合使用。如果有人能补充这一点，我将不胜感激。

# jquery - jquery addClass 如果 div 宽度小于

> ID：11377659
> 
> 赞同：0
> 
> 时间：2012-07-07T18:36:12.250
> 
> 标签：jquery, width, addclass

```
var section = $('.section');
var width = section.width();
if (width < 960)
    section.addClass('.section-slim'); 
```

谁能看到这有什么问题？我没有得到额外的课程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T18:37:24.633

删除类名中的*点：*

```
section.addClass('section-slim'); 
```

* * *

更多关于[***CSS 语法***](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)

# actionscript-3 - Actionscript 3 - 同步点击事件

> ID：11377660
> 
> 赞同：0
> 
> 时间：2012-07-07T18:36:14.733
> 
> 标签：actionscript-3, flash, mouseevent, modal-dialog, synchronous

我正在尝试在 Flash 中构建一个自定义模式对话框。我选择的方法是创建一个带有 UI 的影片剪辑类，该类具有向其添加按钮的功能的对话框。添加完所有按钮后，我调整 ui 的大小并将其显示在屏幕上。

它工作到这一点。现在，我希望调用此对话框的任何内容都等到选择按钮后，用户才能执行其他任何操作。类似于以下内容：

```
var dialog:MyDialog = new MyDialog();
dialog.addButton(new MyButton("Foo"));
dialog.addButton(new MyButton("Bar"));
var result:String = dialog.show(); // we will wait here 
```

在 dialog.show 中，我希望显示影片剪辑，然后等待用户单击对话框上的按钮，然后返回。MouseEvent.CLICK 事件虽然是异步的，但我不知道如何等待它。

另一种方法是为添加到调用对话框的屏幕的对话框创建一个完整的自定义完成事件，我可以继续执行逻辑并有一个禁用其他输入的布尔值，但这是一个非常大的麻烦，我已经从来没有做过类似的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:52:51.127

您的描述是对同步和异步的误解。

当对话框出现时，您仍然希望用户能够点击对话框按钮。如果该过程是同步的，那么整个程序将冻结，因为鼠标点击动作的例程永远不会到达。请记住，flash 是**单线程**的。

具有弹出窗口的线程与底层应用程序共享相同的线程。

最简单的事情就是在按钮上设置一个事件，该事件会调度一些您可以在应用程序中监听的关闭事件。不需要自定义事件类。

```
dispatchEvent(new Event("close")) 
```

举个例子。

如果您担心用户与应用程序外部的部件进行交互，那么您可以简单地在弹出窗口后面绘制一个矩形，并将 mouseEnabled 设置为 true，或者使用 Flex 的模型对话框类进行检查。

# jquery - 使用 jquery 每个函数创建 iframe

> ID：11377661
> 
> 赞同：0
> 
> 时间：2012-07-07T18:36:55.303
> 
> 标签：jquery, iframe

我需要为页面上的每个输入创建一个 iframe，但它们都必须位于不同的变量中。因此，iframe 的变量必须是输入的名称。

我试过这个，但没有奏效：

```
$("input").each(function () {

         var name = $(this).attr("name");

name = document.createElement("iframe");name.src = "";name.name = "focus";document.body.appendChild(name);
    }); 
```

这是我原来的工作 iframe 创建代码：

```
var focus = document.createElement("iframe");focus.src = "";focus.style.display = "none";focus.name = "focus";document.body.appendChild(focus); 
```

我将输入名称与`attr()`. 我想根据该输入名称创建一个 iframe。之后，例如，我将能够通过`INPUTNAME.src`

如何根据输入名称创建特定的 iframe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:52:49.627

您得到了 的名称`<input>`，但随后您立即将其覆盖。此外，由于无论如何您都在使用 jQuery，因此使用它创建元素会更容易：

```
$('input').each(function() {
  $('body').append($('<iframe/>', {
    src: "",
    name: this.name
  });
}); 
```

# macos - 在 Macvim 中打开/安装 ctags（已安装 homebrew、oh-my-zsh、janus）

> ID：11377667
> 
> 赞同：2
> 
> 时间：2012-07-07T18:37:49.847
> 
> 标签：macos, vim, macvim, homebrew, ctags

我在我的 Mackbook Pro (lion) 上使用自制软件安装了 macvim。一旦安装好，我就安装了janus。我还安装了 oh-my-zsh（如果这有助于解决这个问题）。我似乎无法让 ctags 工作。在 MacVim 中，当我执行 Tools>Build Tags File 时，我得到：

```
:!ctags -R .
ctags: illegal option -- R
usage: ctags [-BFadtuwvx] [-f tagsfile] file ...

shell returned 1 
Press RETURN or type command to continue 
```

我如何让它工作？

以下是一些可能对您有所帮助的附加信息：

```
✗ ctags --version
Exuberant Ctags 5.8, Copyright (C) 1996-2009 Darren Hiebert
  Compiled: Jul  7 2012, 01:00:53
  Addresses: <dhiebert@users.sourceforge.net>, http://ctags.sourceforge.net
  Optional compiled features: +wildcards, +regex

✗ which ctags
/usr/local/bin/ctags 

✗ echo $path
/Users/adam/.rvm/gems/ruby-1.9.3-p194@gemset/bin /Users/adam/.rvm/gems/ruby-1.9.3-p194@global/bin /Users/adam/.rvm/rubies/ruby-1.9.3-p194/bin /Users/adam/.rvm/bin /usr/local/bin /usr/bin /bin /usr/sbin /sbin /usr/X11/bin /Users/adam/.rvm/bin 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T19:47:44.043

看起来 Vim 肯定会选择 /usr/bin/ctags，它无法识别`-R`，而不是 /usr/local/bin/ctags。如果将 /usr/local/bin 仅用于登录 shell 的路径中，就会发生这种情况。

您可能希望确保将 /usr/local/bin 添加到非登录、非交互式环境文件中的路径中。我自己不使用 zsh，但看起来应该是 .zshenv。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T18:05:03.620

在mac上，默认情况下vim使用的路径和终端（bash/zsh）使用的路径是不同的，所以即使你在终端中设置了正确的路径，它也不会正确转换为vim，以纠正这种情况，你需要运行

```
sudo chmod ugo-x /usr/libexec/path_helper 
```

有关更多信息，请参阅：[如何在 vim 中使用正确的 ruby​​？如何在 VIM 中修改 $PATH？](https://stackoverflow.com/questions/9853584/how-to-use-correct-ruby-in-vim-how-to-modify-path-in-vim).

# android - 偏好活动头脑风暴

> ID：11377668
> 
> 赞同：-1
> 
> 时间：2012-07-07T18:37:56.940
> 
> 标签：android, preferenceactivity

是否可以使用偏好活动来解决系统音量功能？

比如说我想向用户输出一条消息，如果音量设置得太大，它会弹出一个吐司说“嘿，音量太大了”

我现在知道如何祝酒，我正在考虑 pref 活动。只是在这里讨论想法。

```
import android.content.Context;
import android.media.AudioManager;
import android.os.Bundle;
import android.preference.DialogPreference;
import android.preference.Preference;
import android.preference.Preference.OnPreferenceChangeListener;
import android.preference.PreferenceActivity;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.Toast;

public class volman extends PreferenceActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dhd);

    DialogPreference dp = (DialogPreference) findPreference("mediavolume");
    dp.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

        public boolean onPreferenceChange(Preference preference,
                Object newValue) {
            SeekBar volumeBar = (SeekBar) findViewById(R.id.seekBar);
            final AudioManager manager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

            volumeBar.setMax(manager
                    .getStreamMaxVolume(AudioManager.STREAM_SYSTEM));
            volumeBar.setProgress(manager
                    .getStreamVolume(AudioManager.STREAM_SYSTEM));

            volumeBar
                    .setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
                        @Override
                        public void onStartTrackingTouch(SeekBar seekBar) {
                            Toast.makeText(volman.this, "Lift off.... StartSpark", Toast.LENGTH_LONG).show();

                        }

                        @Override
                        public void onStopTrackingTouch(SeekBar seekBar) {
                            Toast.makeText(volman.this, "Now Stopping", Toast.LENGTH_LONG).show();

                        }
                        public void onProgressChanged(SeekBar seekBar,
                                int progress, boolean fromUser) {
                            manager.setStreamVolume(
                                    AudioManager.STREAM_SYSTEM, progress,
                                    AudioManager.FLAG_SHOW_UI);
                            Toast.makeText(volman.this, "Now going quiet", Toast.LENGTH_LONG).show();
                        }
                    });

            return false;
        }
    });
}

private DialogPreference findPreference(String string) {
    return null;
}
} 
```

现在对于 logcat：

```
[2012-07-07 15:25:00 - volman4.0] Android Launch!
[2012-07-07 15:25:00 - volman4.0] adb is running normally.
[2012-07-07 15:25:00 - volman4.0] No Launcher activity found!
[2012-07-07 15:25:00 - volman4.0] The launch will only sync the application package on the device!
[2012-07-07 15:25:00 - volman4.0] Performing sync
[2012-07-07 15:25:00 - volman4.0] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'ICS'
[2012-07-07 15:25:00 - volman4.0] Uploading volman4.0.apk onto device 'emulator-5554'
[2012-07-07 15:25:00 - volman4.0] Installing volman4.0.apk...
[2012-07-07 15:25:10 - volman4.0] Success!
[2012-07-07 15:25:11 - volman4.0] /volman4.0/bin/volman4.0.apk installed on device
[2012-07-07 15:25:11 - volman4.0] Done! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:11:44.410

跟踪音量水平并不像看起来那么简单......有许多不同的流，当用户离开您的应用程序时，音量可能会改变，用户可能会通过自己的音量控制连接到扬声器等。

有一个选项可以定义音量按钮应该影响哪个流：[Activity.setVolumeControlStream()](http://developer.android.com/reference/android/app/Activity.html#setVolumeControlStream%28int%29)。

但我建议专注于[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)，它充满了有用的方法和意图，如[AudioManager.ACTION_AUDIO_BECOMING_NOISY](http://developer.android.com/reference/android/media/AudioManager.html#ACTION_AUDIO_BECOMING_NOISY)。

如果您需要具体帮助，请发布您编写的相关代码和任何 logcat 错误。希望有帮助！

# wordpress - wordpress 中 foreach 中的 foreach 正在从第一个 foreach 中获取值

> ID：11377670
> 
> 赞同：0
> 
> 时间：2012-07-07T18:38:04.623
> 
> 标签：wordpress, loops, foreach

对不起，令人困惑的标题。我在 wordpress 中显示帖子列表，并使用 foreach 显示每个帖子的图像、标题等。然后我需要的是每个帖子都有一个导航，该导航使用锚点提供指向同一页面内其他帖子的链接。

我在第一个 foreach 中创建了另一个 foreach，它再次抓取相同的帖子并生成导航。这一切都很好，除了每个导航链接的值对于每个帖子中的每个链接都是相同的。

例如，如果帖子被称为 post1 和 post2，则 post1 内的导航应该有一个指向 post1 和 post2 的链接，但两个链接都指向 post1。同样在 post2 中，导航应该有一个指向 post1 和 post2 的链接，但两个链接都指向 post2：

```
 //first foreach gets all the posts

 <?php
 $portfolioItems = array( 'numberposts' => 10, 'order'=> 'DESC', 'orderby' => 'title', 'category' => 4 );
 $postslist = get_posts( $portfolioItems );
 foreach ($postslist as $post) :  setup_postdata($post); ?> 

// navigation which grabs the same posts and creates a list out of them

<ol>
<?php $portfolioNav = array( 'numberposts' => 10, 'order'=> 'DESC', 'orderby' => 'title', 'category' => 4 );
 $postsnav = get_posts( $portfolioNav );
 foreach ($postsnav as $postnav) :  setup_postdata($postnav); ?>
 <li><a href="<?php the_field('portfolio_anchor'); ?>"><?php the_field('portfolio_anchor'); ?></a></li>
 <?php endforeach; ?>
 </ol>

// The data getting pulled from the first foreach 
 <div id="<?php the_field('portfolio_anchor'); ?>"></div>
 <h3><?php the_title(); ?></h3>
<img src="<?php the_field('main_image'); ?>" />

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T21:44:28.253

设法使用 query_posts 而不是 get_posts 来解决它：

```
 <?php query_posts('category_name=Portfolio&posts_per_page=10&orderby=title&order=DESC'); ?>
  <?php while (have_posts()) : the_post(); ?> 
```

然后对于嵌套查询，我做了同样的事情，但在它的末尾添加了 wp_reset_postdata ，因此它不会覆盖原始查询：

```
 <!-- navigation nested query -->
    <div class="row">
    <div class="span12 foliodivider" style="display: block;">   
    <ol>
    <?php $navNumber = 1; ?>
    <?php $my_query = new WP_Query('category_name=Portfolio&posts_per_page=10&orderby=title&order=DESC'); ?>
     <?php while ($my_query->have_posts()) : $my_query->the_post(); ?>
    <li><a href="#<?php the_field('portfolio_anchor'); ?>"><?php echo $navNumber; $navNumber++; ?></a></li>
    <?php endwhile; ?>
    <?php wp_reset_postdata(); ?>
   </ol>
  </div>
 </div>
 <!-- navigation nested query end--> 
```

然后在我使用第一个查询完成后，最后在最后添加了最后一个 endwhile：

```
 <div id="<?php the_field('portfolio_anchor'); ?>"></div>
  <h3><?php the_title(); ?></h3>
  <img src="<?php the_field('main_image'); ?>" />
  <?php endwhile; ?> 
```

# java - Java API 的工作原理

> ID：11377671
> 
> 赞同：-3
> 
> 时间：2012-07-07T18:38:07.227
> 
> 标签：java, android, api

API实际上是如何工作的！我用谷歌搜索了很多，但答案令人困惑。我知道这是一个接口。

例如在 Android 中，如果我在代码中扩展 Activity，我可以使用 API 文档来帮助我。什么创建了 Activity 对象，我从不调用 new Activity();

API 究竟与什么进行通信以达到预期的结果？API是类定义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:46:42.317

1.  **API 是主要根据其功能组合在一起的类和接口的集合。**

2.  它们是具有编写功能的类，可以进行排序、建立各种网络连接（如 Http、ftp 连接、文件处理等）。

3.  例子：

    java.net 将有网络类

    java.io 用于各种输入输出功能

4.  使用 API 类或接口时，要么需要编写整个路径，要么使用 import 语句。

**完整路径：**

```
java.util.ArrayList<String>  arr = new java.util.ArrayList<String>(); 
```

**进口**

导入 java.util.ArrayList ；

```
ArrayList<String>  arr = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:48:45.997

也许最好从 Java 的基础开始，而不是 Android。Android 只是一个使用 Java 的平台，尝试在任何 Java 教程之后使用“void main class”。

Activity 是一个在正确配置 AndroidManifest.xml 文件并具有明确定义的生命周期后由平台自动实例化的类。当您准备好并且 Java API 对您来说不再是个谜时，您可以访问该网站：http: [//developer.android.com/guide/components/fundamentals.html](http://developer.android.com/guide/components/fundamentals.html)并通过编写一些很棒的东西来开始 Android！

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:43:24.543

API 是应用程序编程接口，这意味着它是与实现所声明方法的 API 的类的合同，该类实现并工作。它也可以称为“标签”或“面具”，因为代表狗结构的某些实体可以具有“动物”和“可清洗”的 API，而汽车结构也可以是“可清洗”的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T18:45:30.573

您的活动由 android 在必要时创建。通常是传入意图的结果。阅读有关活动生命周期的 android 文档以获取详细说明

# javascript - AngularJS 中的多层深度链接

> ID：11377676
> 
> 赞同：2
> 
> 时间：2012-07-07T18:39:14.120
> 
> 标签：javascript, partials, angularjs, deep-linking, layered-navigation

我正在尝试使用 AngularJS 在我的模板部分中放置多个控制器 - 我遇到的问题是第一层的问题，直接链接到这些子控制器及其相关片段。

一个例子是用户帐户的管理页面，假设我在用户列表中并且想从列表的密码中更改用户，我单击他们的更改密码按钮，并希望将用户重定向到`#/ManageUsers/ChangePassword/?UserID=<uid here>`而不是`#/ManageUsers_ChangePassword/`或类似，但关于该主题的 Angular 文档（或缺少文档）表明这是不可能的，或者不是“角度方式”......

由于我的团队希望将这些单独的控制器保留为部分，有没有一种非 hacky 的方法可以用 Angular 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:02:02.033

最近发表了一篇关于使用 AngularJS 解决深度链接的可能方法的博客文章。它具有父/子实现风格，如果您只需要更改子的内容，则不需要更新父部分，这使得它非常整洁。

在这里：[http ://www.bennadel.com/blog/2441-Nested-Views-Routing-And-Deep-Linking-With-AngularJS.htm](http://www.bennadel.com/blog/2441-Nested-Views-Routing-And-Deep-Linking-With-AngularJS.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:10:15.763

为什么不直接到`#/ManageUsers/ChangePassword/:UserID`？您可以从 $routeParams 获取 UserID。[请参阅$route](http://docs.angularjs.org/api/ng.%24route)页面上的示例。

您甚至可以创建`#/ManageUsers/:OrganizationID/:SectorId/:UserID/ChangePassword/Confirmation`将由 url 使用的路由`#/ManageUsers/10/2/32/ChangePassword/Confirmation`

# r - R - 向量化条件替换

> ID：11377677
> 
> 赞同：2
> 
> 时间：2012-07-07T18:39:51.933
> 
> 标签：r, for-loop, logic, vectorization, conditional-statements

嗨，我正在尝试操作一个数字列表，我想在没有 for 循环的情况下使用 R 中的快速本机操作来操作。操作的伪代码是：

> 默认情况下，起始总数为 100（对于零内的每个块）
> 
> 从第一个零到下一个零，当累计总数下降超过 2% 时，将所有后续数字替换为零。
> 
> 做到这一点，所有零内的数字块
> 
> 累计总和每次重置为 100

例如，如果以下是我的数据：

```
d <- c(0,0,0,1,3,4,5,-1,2,3,-5,8,0,0,-2,-3,3,5,0,0,0,-1,-1,-1,-1); 
```

结果将是：

```
0 0 0 1 3 4 5 -1 2 3 -5 0 0 0 -2 -3 0 0 0 0 0 -1 -1 -1 0 
```

目前我有一个 for 循环的实现，但由于我的向量很长，所以性能很糟糕。

提前致谢。

这是一个正在运行的示例代码：

```
d <- c(0,0,0,1,3,4,5,-1,2,3,-5,8,0,0,-2,-3,3,5,0,0,0,-1,-1,-1,-1);
ans <- d;
running_total <- 100;
count <- 1;
max <- 100;
toggle <- FALSE;
processing <- FALSE;

for(i in d){
  if( i != 0 ){  
       processing <- TRUE; 
       if(toggle == TRUE){
          ans[count] = 0;  
       }
       else{
         running_total = running_total + i;

          if( running_total > max ){ max = running_total;}
          else if ( 0.98*max > running_total){
              toggle <- TRUE;  
          }
      }
   }

   if( i == 0 && processing == TRUE )
   { 
       running_total = 100; 
       max = 100;
       toggle <- FALSE;
   }
   count <- count + 1;
}
cat(ans) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T00:22:29.097

我不确定如何将您的循环转换为矢量化操作。但是，有两个相当简单的选项可以大幅提高性能。第一种是简单地将你的循环放入一个`R`函数中，并使用`compiler`包来预编译它。第二个稍微复杂的选项是将`R`循环转换为`c++`循环并使用`Rcpp`包将其链接到`R`函数。然后你调用一个`R`函数将它传递给`c++`快速的代码。我展示了这些选项和时间。我非常感谢来自 Rcpp listserv 的 Alexandre Bujard 的帮助，他帮助我解决了我不理解的指针问题。

首先，这是你的`R`循环作为一个函数，`foo.r`.

```
## Your R loop as a function
foo.r <- function(d) {
  ans <- d
  running_total <- 100
  count <- 1
  max <- 100
  toggle <- FALSE
  processing <- FALSE

  for(i in d){
    if(i != 0 ){
      processing <- TRUE
      if(toggle == TRUE){
        ans[count] <- 0
      } else {
        running_total = running_total + i;
        if (running_total > max) {
          max <- running_total
        } else if (0.98*max > running_total) {
          toggle <- TRUE
        }
      }
    }
    if(i == 0 && processing == TRUE) {
      running_total <- 100
      max <- 100
      toggle <- FALSE
    }
    count <- count + 1
  }
  return(ans)
} 
```

现在我们可以加载`compiler`包并编译函数并调用它`foo.rcomp`。

```
## load compiler package and compile your R loop
require(compiler)
foo.rcomp <- cmpfun(foo.r) 
```

这就是编译路径所需的全部内容。这一切都`R`非常容易。现在对于`c++`方法，我们使用`Rcpp`包以及`inline`允许我们“内联”`c++`代码的包。也就是说，我们不必制作源文件并编译它，我们只需将它包含在`R`代码中，编译就会为我们处理。

```
## load Rcpp package and inline for ease of linking
require(Rcpp)
require(inline)

## Rcpp version
src <- '
  const NumericVector xx(x);
  int n = xx.size();
  NumericVector res = clone(xx);
  int toggle = 0;
  int processing = 0;
  int tot = 100;
  int max = 100;

  typedef NumericVector::iterator vec_iterator;
  vec_iterator ixx = xx.begin();
  vec_iterator ires = res.begin();
  for (int i = 0; i < n; i++) {
    if (ixx[i] != 0) {
      processing = 1;
      if (toggle == 1) {
        ires[i] = 0;
      } else {
        tot += ixx[i];
        if (tot > max) {
          max = tot;
        } else if (.98 * max > tot) {
            toggle = 1;
          }
      }
    }

   if (ixx[i] == 0 && processing == 1) {
     tot = 100;
     max = 100;
     toggle = 0;
   }
  }
  return res;
'

foo.rcpp <- cxxfunction(signature(x = "numeric"), src, plugin = "Rcpp") 
```

现在我们可以测试我们得到了预期的结果：

```
## demonstrate equivalence
d <- c(0,0,0,1,3,4,5,-1,2,3,-5,8,0,0,-2,-3,3,5,0,0,0,-1,-1,-1,-1)
all.equal(foo.r(d), foo.rcpp(d)) 
```

`d`最后，通过重复 10e4 次来创建一个更大的版本。然后我们可以运行三个不同的函数，纯`R`代码、编译`R`代码和`R`链接`c++`代码的函数。

```
## make larger vector to test performance
dbig <- rep(d, 10^5)

system.time(res.r <- foo.r(dbig))
system.time(res.rcomp <- foo.rcomp(dbig))
system.time(res.rcpp <- foo.rcpp(dbig)) 
```

在我的系统上，给出：

```
> system.time(res.r <- foo.r(dbig))
   user  system elapsed 
  12.55    0.02   12.61 
> system.time(res.rcomp <- foo.rcomp(dbig))
   user  system elapsed 
   2.17    0.01    2.19 
> system.time(res.rcpp <- foo.rcpp(dbig))
   user  system elapsed 
   0.01    0.00    0.02 
```

编译后的代码对 250 万向量进行运算`R`所需时间约为未编译代码的 1/6 。即使编译后的代码只需要 0.02 秒即可完成，`R`该代码的速度也快了几个数量级。除了初始设置之外，基本循环的语法几乎相同，因此您甚至不会失去清晰度。我怀疑即使您的部分或全部循环可以在. 最后，只是为了证明：`c++``R``R``c++``R``R``c++`

```
> all.equal(res.r, res.rcomp)
[1] TRUE
> all.equal(res.r, res.rcpp)
[1] TRUE 
```

不同的函数返回相同的结果。

# objective-c - Objective C 中的星期几

> ID：11377678
> 
> 赞同：2
> 
> 时间：2012-07-07T18:39:55.590
> 
> 标签：objective-c, ios, date

> **可能重复：**
> [如何在 Objective-C 中获取星期几？](https://stackoverflow.com/questions/4269093/how-do-i-get-the-day-of-the-week-in-objective-c)

如何打印星期几？我应该使用什么对象？我需要日期（例如星期日、星期四），而不是月份中的日期。

更新：具体来说：我怎样才能找到一周中的天*数*（例如 1、5）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T18:45:39.943

创建一个 NSDate 实例（现在，使用`[NSDate date]`），然后使用 NSDateFormatter 和[此处](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)描述的格式字符串。

```
NSDate *today = [NSDate date];
NSDateFormatter *myFormatter = [[NSDateFormatter alloc] init];
[myFormatter setDateFormat:@"EEEE"]; // day, like "Saturday"
[myFormatter setDateFormat:@"c"]; // day number, like 7 for saturday

NSString *dayOfWeek = [myFormatter stringFromDate:today];
NSLog(@"Today is: %@", dayOfWeek); 
```

# javascript - jquery自动完成组合框错误：未捕获的TypeError：对象[对象对象]没有方法'按钮'

> ID：11377679
> 
> 赞同：1
> 
> 时间：2012-07-07T18:40:02.190
> 
> 标签：javascript, jquery, jquery-ui, jquery-autocomplete

**我正在尝试使用 jquery ui 插件实现自动完成组合框。**

使用下面提到的代码，我**能够实现自动完成部分，但不能实现下拉部分**（由于未捕获的类型错误，下拉箭头不可见）

```
$.widget( "ui.combobox", {
        _create: function() {
            var input,
                self = this,
                select = this.element.hide(),
                selected = select.children( ":selected" ),
                value = selected.val() ? selected.text() : "",
                wrapper = this.wrapper = $( "<span>" )
                    .addClass( "ui-combobox" )
                    .insertAfter( select );

            input = $( "<input>" )
                .appendTo( wrapper )
                .val( value )
                .addClass( "ui-state-default ui-combobox-input" )
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function( request, response ) {
                        var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                        response( select.children( "option" ).map(function() {
                            var text = $( this ).text();
                            if ( this.value && ( !request.term || matcher.test(text) ) )
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>" ),
                                    value: text,
                                    option: this
                                };
                        }) );
                    },
                    select: function( event, ui ) {
                        ui.item.option.selected = true;
                        self._trigger( "selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function( event, ui ) {
                        if ( !ui.item ) {
                            var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                                valid = false;
                            select.children( "option" ).each(function() {
                                if ( $( this ).text().match( matcher ) ) {
                                    this.selected = valid = true;
                                    return false;
                                }
                            });
                            if ( !valid ) {
                                // remove invalid value, as it didn't match anything
                                $( this ).val( "" );
                                select.val( "" );
                                input.data( "autocomplete" ).term = "";
                                return false;
                            }
                        }
                    }
                })
                .addClass( "ui-widget ui-widget-content ui-corner-left" );

            input.data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>" + item.label + "</a>" )
                    .appendTo( ul );
            };

            $( "<a>" )
                .attr( "tabIndex", -1 )
                .attr( "title", "Show All Items" )
                .appendTo( wrapper )
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass( "ui-corner-all" )
                .addClass( "ui-corner-right ui-combobox-toggle" )
                .click(function() {
                    // close if already visible
                    if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                        input.autocomplete( "close" );
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $( this ).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete( "search", "" );
                    input.focus();
                });
        },

        destroy: function() {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call( this );
        }
    });

    $( "#combobox" ).combobox(); 
```

**上面的代码在 document.ready 下。由于 '.button' 方法引发了错误。**

**的HTML：**

```
 <tr>
            <td><label>Country:</label></td>
            <td>

            <div class="ui-widget">

                    <select id="combobox">
                        <option value="">Select one...</option>
                          <option value="ActionScript">ActionScript</option>
                          <option value="AppleScript">AppleScript</option>
                          <option value="Asp">Asp</option>
                          <option value="BASIC">BASIC</option>
                          <option value="C">C</option>      
                    </select>

            </div>
            </td>
        </tr> 
```

**组合框CSS，**

```
.ui-combobox {
    position: relative;
    display: inline-block;
}
.ui-combobox-toggle {
    position: absolute;
    top: 0;
    bottom: 0;
    margin-left: -1px;
    padding: 0;
    /* adjust styles for IE 6/7 */
    *height: 1.7em;
    *top: 0.1em;
}
.ui-combobox-input {
    margin: 0;
    padding: 0.3em;
} 
```

**脚本顺序是，**

```
 <script type="text/javascript" src="<?php echo base_url('/assets/js/jquery.js'); ?>"></script>
    <script type="text/javascript" src="<?php echo base_url('/assets/js/validation.js'); ?>"></script>
    <script type="text/javascript" src="<?php echo base_url('/assets/autocomplete/js/jquery-ui-1.8.21.custom.min.js'); ?>"></script>

    <?= $_scripts ?> 
```

*   jquery 1.7.2 版，jquery ui 1.8.21 版
*   我尝试重新排列脚本的顺序
*   没有不同 jquery 版本的多个实例。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T10:42:39.170

您的代码看起来不错，所以问题几乎可以肯定是您没有包含`ui.button`在您的自定义 jQuery UI 构建中。

您可以通过运行来验证这一点`typeof $.ui.button`。如果您包含它，它将是`function`，如果您不包含它，它将是`undefined`。

[重新构建 jQuery UI](http://jqueryui.com/download)并确保选中该`Button`复选框。

# arrays - 循环队列算法问题

> ID：11377680
> 
> 赞同：2
> 
> 时间：2012-07-07T18:40:03.913
> 
> 标签：arrays, algorithm

我正在尝试执行以下操作，但无法弄清楚如何在不崩溃或无限循环的情况下做到这一点：

我必须创建一个队列，我必须在其中分配不同的任务不同的次数，或者使用这种信息：

*   **任务 X：[NextOne,LastOne]**

    *   任务 1：[30,32]
    *   任务 2：[76,81]
    *   任务 3：[2,2]
    *   任务 4：[5,8]

这意味着“Task X”将被“LastOne - NextOne”次，如果两者相等，则不会入队，它们按X顺序进入队列。在此示例中，队列应如下所示：

```
FIRST
Task1[30]
Task2[76]
Task4[5]
Task1[31]
Task2[77]
Task4[6]
Task1[32]
Task2[78]
Task4[7]
Task2[79]
Task4[8]
Task2[80]
Task2[81]
LAST 
```

这不是语言问题，更像是我这里的算法问题。使用 PHP 我做了以下事情：

```
$tasks = array(
'Task1' => array(30,32),
'Task2' => array(76,81),
'Task3' => array(2,2),
'Task4' => array(5,8)
);

$aux = array();
$i=0;
foreach($tasks as $s=>$n) {
    $aux[$i]['task'] = $s;
    $aux[$i]['times'] = $n[1]-$n[0];
    $aux[$i]['first'] = $n[0];
    $i++;
} 
```

但正如你想象的那样，这实际上什么也没做，只是改变了信息的形状。我真的被困在这里我不知道为什么，这实际上应该不难弄清楚。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:48:06.293

我想您可以将`$s`其用作散列（或等效数组）的键，并且**只要遇到具有相同键的元素就将值增加 1**。在这种情况下，默认值为 0。

例如，

任务1 => 数组（30,32）

会按顺序来的

```
Task1[30] (default value to 0)
...
...
Task1[31] (add 1 which becomes 1)
...
Task1[32] (add 1 which becomes 2) 
```

这意味着Task1总共出现了3次，最终的`times`值应该是2。

我认为您可以使用`array_key_exists`辅助功能来检查之前是否出现过某些任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:48:46.267

在 python 中（我可能误解了你的“这不是语言问题”的评论——请原谅我）：

```
tasks = [
    ("Task1", 30, 32),
    ("Task2", 76, 81),
    ("Task3", 2, 2),
    ("Task4", 5, 8) ]

while not tasks == []:
    # Pop first task off the current list
    (n, s, e) = tasks[0]
    tasks = tasks[1:]

    print n, s
    if s != e:
        tasks.append( (n, s+1, e) ) 
```

抱歉，它不在 php 中 - 这不是我的强项，但也许这会有所帮助？输出：

```
Task1 30
Task2 76
Task3 2
Task4 5
Task1 31
Task2 77
Task4 6
Task1 32
Task2 78
Task4 7
Task2 79
Task4 8
Task2 80
Task2 81 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T19:46:21.610

**在 C# 中**

结果如你所愿。

我添加了一个数字作为标志：1 = 不入队，2 = 任务的最后记录。

效率不高，但有效！

```
private static void Main()
{
    var tasks = new Dictionary<string, int[]>
                    {
                        {"Task1", new[] {30, 32, 0}},
                        {"Task2", new[] {76, 81, 0}},
                        {"Task3", new[] {2, 2, 0}},
                        {"Task4", new[] {5, 8, 0}}
                    };
    int loopCounter = 0;
    Console.WriteLine("FIRST");
    while (loopCounter < tasks.Count)
    {
        foreach (var task in tasks)
        {
            if (task.Value[0] == task.Value[1])
            {
                if (task.Value[2] == 2)
                {
                    loopCounter++;
                    Console.WriteLine(task.Key + "[" + task.Value[0] + "]");
                    task.Value[2] = 1;
                }
                else if (task.Value[2] == 0)
                {
                    loopCounter++;
                    task.Value[2] = 1;
                }
            }
            else
            {
                Console.WriteLine(task.Key + "[" + task.Value[0] + "]");
                task.Value[0]++;
                if (task.Value[0] == task.Value[1])
                    task.Value[2] = 2;
            }
        }
    }
    Console.WriteLine("LAST");
    Console.ReadLine();
} 
```

输出：

```
FIRST
Task1[30]
Task2[76]
Task4[5]
Task1[31]
Task2[77]
Task4[6]
Task1[32]
Task2[78]
Task4[7]
Task2[79]
Task4[8]
Task2[80]
Task2[81]
LAST 
```

希望这可以帮助。

# mysql - 一对多关系中的特征值，哪个表应该保存它？

> ID：11377695
> 
> 赞同：5
> 
> 时间：2012-07-07T18:42:46.790
> 
> 标签：mysql, sql

假设我有一个一对多的关系，其中有两个表，一个 Person 表和一个 Belonging 表。现在，每个人只有一个最喜欢的物品，一个特定的物品也不能属于另一个人。

我的问题是，这些信息最好保存在哪里？在 Person 表中作为 favorite_belonging_id 还是在 Belonging 表中作为 is_favorite 条目？在我看来，首选似乎是更好的版本，但我想听听懂sql的人对此有什么看法。

编辑：一个人有很多物品，但只有一件最喜欢的物品，每件物品只能属于一个人。这是一个一对多的关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:03:21.903

我很想采纳您的第一个建议（表`favourite_belonging_id`中的一列），因为然后可以在`Person`表中创建外键引用 from `(person_id, favourite_belonging_id)`to 。`(owner_id, belonging_id)``Belonging`

如果要走另一条`is_favourite`在表中创建标志的路线`Belonging`，则没有明显的方法可以确保个人最喜欢的所有物关系的 1:1 本质（当一个人拥有`UNIQUE`多个`(owner_id, is_favourite)`不属于他们的最爱）。

也就是说，感觉这些信息并不真正*属于*表格，`Person`因为它实际上不是个人的财产，而是`Belonging`. 如果您对此有强烈的感觉，您可以创建一个`Favourites`具有`UNIQUE`（或`PRIMARY`）索引的表`person_id`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T18:48:53.340

对我来说，它不属于 person 表，因为它与 base person 无关。

如果你只有归属表——我也假设其中有一个 person_id，那么这就是你表达归属与人之间关系的地方，也是限定符应该去的地方。

另一种选择是在中间放置第三张桌子连接两者 - 在这种情况下，最喜欢的标志放在那里。

**编辑**：我在设计中的偏好是第三个表格选项-在这里您可以输入开始日期和结束日期以及最喜欢的标志-理论上这将允许您在某个时间点交易属于另一个人的物品并且仍然知道发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T19:25:28.470

我看到几乎所有不同的选项都已经在不同的答案中列出，但是我不会对所有选项进行评论以让您对我认为您应该做什么的印象，而是自己创建一个答案。

只是为了清楚我如何理解系统的工作原理：所有用户都可以拥有多个物品，但任何物品只能由一个人帮助。

在这种情况下，最有意义的做法是在物品表中拥有一个 user_id，它可以将物品与一个人联系起来。一旦设置了 user_id，其他人就不能再声明它了。

现在，至于“最喜欢”的部分，您可以做几件事。真正做到这一点的最佳方法在很大程度上取决于您计划在其上运行的查询。有些人考虑添加一个 JOIN 表，但老实说，这是很多没有意义的额外数据；其中可能会有与用户表完全相同的行数，并且通过将其放在单独的表中，您无法做很多事情（例如，看看有多少人没有收藏夹） . 同样，JOIN 表对于 user_belonging 关系也没有意义，因为所有权和可以拥有它的人数之间存在 1:1 的关系。
所以我相信有两个可行的选择：要么在物品表中添加一个字段（/switch）以指示用户的物品是他/她的最爱，或者向用户表添加一个字段以指示用户最喜欢的物品。我个人认为后者最有价值，但根据您运行的查询，前者可能更有意义。总体而言，最大的区别在于您是要处理预插入还是后选择；例如，在后一种情况下，您将不得不运行一个独立的查询来确定用户是否已经收藏（在前一种情况下，这不是必需的，因为您将在用户表中的字段上放置一个唯一索引） ,

如果我清楚地解释了自己，或者您有任何其他问题，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T21:26:28.373

以下可能不是最佳选择，因为它提供了一种非常规的方法来标记最喜欢的物品。不过，这样做的好处是，您将只有两张没有循环引用的表，并且可以保证每个人都拥有不超过一个最喜欢的物品。

所以，这是两个表，`people`（或`persons`）和`belongings`。该`people`表具有以下结构：

```
person_id INT AUTO_INCREMENT,
*other columns as necessary*,

PRIMARY KEY (person_id) 
```

该`belongings`表是这样创建的：

```
belonging_id INT AUTO_INCREMENT,
person_id    INT NOT NULL,
is_favourite enum ('1'),
*other columns as necessary*,

PRIMARY KEY (belonging_id),
FOREIGN KEY (person_id) REFERENCING people (person_id),
UNIQUE (person_id, is_favourite) 
```

关键元素声明为具有单个可能值`is_favourite`的可空值。`enum`这样，当您在 的对上声明唯一约束时`(person_id, is_favourite)`，您可以拥有尽可能多的相同`person_id`且为空 (null)`is_favourite`的行，因为唯一约束忽略至少一个成员为空的行。而且您将无法创建多个`person_id`with `is_favourite = '1'`，因为*这*会违反唯一约束。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T21:38:58.800

两者都不。我的建议是添加另一个表`person_favourite_belonging`，如下所示：

```
CREATE TABLE person
( person_id INTEGER NOT NULL
--- various other columns about Persons
, PRIMARY KEY (person_id)
) ;

CREATE TABLE belonging
( belonging_id INTEGER NOT NULL 
, person_id INTEGER NOT NULL 
--- various other columns about Belongings
, PRIMARY KEY (belonging_id)
, UNIQUE KEY (person_id, belonging_id)       --- this Unique constraint is needed
, FOREIGN KEY (person_id)
    REFERENCES person (person_id)
) ;

CREATE TABLE person_favourite_belonging
( person_id INTEGER NOT NULL 
, belonging_id INTEGER NOT NULL
, PRIMARY KEY (person_id)
, FOREIGN KEY (person_id, belonging_id)      --- for this Foreign Key constraint
    REFERENCES belonging (person_id, belonging_id)
) ; 
```

* * *

这只是我的首选方式。有替代方案，并且都有其优点和缺点。这种方法的优点是：

*   外键约束中没有循环路径（因此）：
*   插入、删除或更新人员、物品或收藏物品时没有鸡和蛋问题。
*   所有外键列都可以定义为 NOT NULL。
*   可以在数据库级别强制执行完整性。
*   如果您的要求发生变化并且您希望每人拥有 2 个（或更多）收藏夹，您只需适当更改收藏夹表中的约束即可。

还要检查我在这个问题中的回答（有一个几乎相同的问题）：[在 SQL 中，两个表可以相互引用吗？](https://stackoverflow.com/questions/10446641/in-sql-is-it-ok-for-two-tables-to-refer-to-each-other/10458105#10458105)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-07T18:52:01.700

favourite_thing 是归属表的 FK（如果该表存在，否则它可能是域），但*在附加约束*中，您可以强制 person 表中的 belongs_id 是唯一的。

更新：

```
DROP table belonging;
CREATE table belonging
        ( id INTEGER PRIMARY KEY
        , description varchar
        );

DROP table person;
CREATE table person
        ( id INTEGER PRIMARY KEY
        , description varchar
        , favourite_thing INTEGER REFERENCES belonging (id)
        );

-- Now add the unique constraint
-- NOTE: favourite_thing can still be NULL
ALTER TABLE person
        ADD CONSTRAINT must_be_unique UNIQUE (favourite_thing)
        ; 
```

更新2：如果每件物品都属于*一个人*，您可以在物品中添加一个所有者字段：

```
CREATE table belonging
        ( id INTEGER PRIMARY KEY
        , owner_id INTEGER NOT NULL REFERENCES person(id)
        , description varchar
        );

DROP table person CASCADE;
CREATE table person
        ( id INTEGER PRIMARY KEY
        , description varchar
        , favourite_thing INTEGER REFERENCES belonging (id)
        );

ALTER TABLE person
        ADD CONSTRAINT must_be_unique UNIQUE (favourite_thing)
        ; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-07T18:47:47.600

实际上，您呈现的是一对一的关系。因此，您可以： 1\. 将其保存在 Person 表中。2\. 把它放在归属表中。3\. 把它放在两个里面。4\. 把它放在单独的桌子上。

# ruby-on-rails - Rails activerecord 查询比较同一记录的两个属性

> ID：11377696
> 
> 赞同：8
> 
> 时间：2012-07-07T18:43:07.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在寻找一种方法来构建一个比较同一记录的两个属性的查询，而无需先提取记录并比较后查询。我的具体案例可能有 10k 的记录，因此遍历每个记录不是一种选择。

示例：通过查询 .where updated_at == created_at 查找此记录

```
#<User id: 1, name: "xxx", created_at: "2012-07-01 12:00:00", updated_at: "2012-07-01 12:00:00"> 
```

Rails 3+，ActiveRecord，MySQL。

更新：正如评论员 Matzi 指出的那样，使用 sqlite 时以下内容有效，但**mysql**无效：

```
User.where("created_at == updated_at") 
```

**已解决**：简单的错误，ruby vs sql。

Sqlite 可以使用：

```
User.where("created_at == updated_at") 
```

但 MySQL 要求：

```
User.where("created_at = updated_at") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-08T13:47:08.387

如果您想以通用方式执行此操作，您应该使用 ARel 来摆脱特定的数据库实现。就像是

```
users = User.arel_table
User.where(users[:created_at].eq(users[:updated_at])) 
```

会工作

# ios - 视频在 iPad 上播放后抖动

> ID：11377701
> 
> 赞同：1
> 
> 时间：2012-07-07T18:43:34.540
> 
> 标签：ios, ipad, video, html5-video

我有一个 html5 视频标签，我正在使用 video.js。在我的桌面浏览器上，它运行良好。然而在 iPad 上...

当我在 iPad 上加载页面时，一切看起来都很棒。当我触摸播放按钮并且图像被播放器替换时，它开始来回抖动。即使播放完毕，它也会继续来回颤抖。

这是它发生的视频...

[http://youtu.be/4IaEBD0p2hw](http://youtu.be/4IaEBD0p2hw)

以前有人见过这种情况吗？有任何想法吗？

# asp.net-mvc-3 - Javascript 引用不能正常工作 ASP.NET 开发服务器？

> ID：11377702
> 
> 赞同：0
> 
> 时间：2012-07-07T18:43:53.950
> 
> 标签：asp.net-mvc-3, visual-studio-2010, asp.net-development-serv

我不确定这里发生了什么。我已经以我能想到的各种方式对链接进行了修改，以尝试引用我的脚本库，但似乎没有任何效果。

当我将它上传到我的网络主机时，它工作正常，在本地它根本不起作用。

最奇怪的部分是，它很好地引用了我的 CSS 文件，而且似乎没有其他任何问题。

```
//Works
<link href="@Url.Content("~/Content/main.css")" rel="stylesheet" type="text/css" />
//Doesn't work
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script> 
```

我不确定这里会发生什么，甚至不确定从这里调试的地方。我试过删除`@Url.Content(...)`并直接指向目录，但这根本没有做任何事情。希望其他人遇到了这个问题并找到了解决方案。

使用：ASP.NET MVC3 Razor、Visual Studio 2010 Professional

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:45:35.127

如果您使用的是默认目录设置，那么您的`Scripts`文件夹是该文件夹的子目录`Content`；在这种情况下：

```
<script src="@Url.Content("~/Content/Scripts/jquery-1.5.1.min.js")"></script> 
```

# google-docs - 查找 gdata 条目的内容元素

> ID：11377703
> 
> 赞同：0
> 
> 时间：2012-07-07T18:44:04.503
> 
> 标签：google-docs, gdata, gdata-api

Google Documents List API (v3) 多次引用“内容元素”。在内容元素中有一个用于导出文件的 URI 和文件的 mime 类型。

如何找到内容元素并提取该信息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:11:21.500

我使用 google oauth playground 提出了一个示例请求 - 在[pastebin](http://pastebin.com/jQv1gFri)上发布了响应...

在 'title' 元素之后，您可以看到您请求的 'content' 元素以及包含 node=export 的 URI。

```
"content":{
"type":"text/html",
"src":"https://docs.google.com/feeds/download/documents/export/Export?id\u003d1mCHy6rcaqFoyZaJ-3qwRBZyirxnmew1m4CfEtOWAhjw\u0026v\u003d3"
}, 
```

一旦我通过了操场的身份验证，我就在这个例子中使用了以下请求：

```
https://docs.google.com/feeds/default/private/full?v=3&alt=json&max-results=1 
```

[在](https://stackoverflow.com/questions/9935814/where-is-the-full-size-image-in-gdata-photos-query)我的回答中使用 Playground 和 json prettyprint 指令

# list - Haskell 递增元组的最后一个元素

> ID：11377706
> 
> 赞同：2
> 
> 时间：2012-07-07T18:44:55.027
> 
> 标签：list, haskell, tuples

嗨，您能否帮助我了解如何增加元组的最后一个元素。目前我有这个元组列表

```
items :: [Grocery]
items = [("Water", "Drink Section", 1),
         ("Squash", "Drink Section", 1),
         ("Apple", "Fruit Section", 1),
         ("Plates", "Disposable Section", 1),
         ("Plates", "Ceramic Section", 1)] 
```

我想做的是每次购买商品时将其增加 1 并输出数据库。目前我有这个

```
sales:: [database] -> String -> String-> [database]
sales db itemName sectionName = []
sales ((item, section, qty): xs) itemName sectionName 
     | item == itemName && section== sectionName = [(item, section, qty + 1)]
     | otherwise = [] 
```

我仍然在增加它并且我卡住了。请帮助我，我还是这门语言的新手。谢谢你！

*编辑*

现在一切正常，但你如何输出列表的其余部分？我试过`recordSale xs trackArtist trackTitle`了，但是当我测试它时，我增加的旧记录也会被打印而不是被修改？假设我增加了苹果它将打印的是这个

```
[("Apple", "Fruit Section", 2),("Water", "Drink Section", 1),("Squash", "Drink Section", 1), ("Apple", "Fruit Section", 1)] 
```

它复制记录而不是仅仅添加 1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T18:56:15.740

这还不错，但是让我们假设您正在尝试增加“Squash”，即示例项目列表中的第二个元素。做什么`sales`？它检查列表中的第一个项目 Water 是否等于 Squash。由于水不等于壁球，因此它会碰到`otherwise`箱子并返回`[]`。

所以所有这一切似乎都是正确的，直到我们得到`[]`支持 - 让我们更改代码。显然我们不想扔掉整个列表，那将是愚蠢的。您应该重写它以保留刚刚比较的项目并将其连接到`sales`应用于列表其余部分的结果 ( `xs`)。

在你`otherwise`修复了那个分支之后，你会在你增加的项目被扔掉之后注意到整个列表——我认为一旦你完成了这个问题，一个会突然出现在你身上。

PS 解雇将 Squash 放入饮水区的员工。

# apache - 500 错误未显示特定错误

> ID：11377708
> 
> 赞同：1
> 
> 时间：2012-07-07T18:45:12.297
> 
> 标签：apache, php

我已将`php.ini`文件更新为如下所示，但我的 500 页面仍未显示错误：

```
display_errors = On
error_reporting = E_ALL
display_startup_errors = On 
```

这是我的 VPS，我可以从 cPanel 保存一个 500.shtml 文件页面，我将其留空。这会妨碍显示错误吗？cPanel 中的日志文件没有显示错误。

# php - 在 Ubuntu 上安装 CakePHP 2 控制台

> ID：11377711
> 
> 赞同：2
> 
> 时间：2012-07-07T18:45:33.083
> 
> 标签：php, cakephp, cakephp-2.0

我已经在我的 Ubuntu 上安装了 AMP。我喜欢 CakePHP 并想使用它。

如何在 Ubuntu 上使用烘焙控制台？

**注意**：`apt-get install cakephp-scripts`将安装 cakephp 1.3 脚本。但我使用的是最新版本 2.2.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T19:14:34.283

您还可以通过提供 php 和 cake.php 路径来使用控制台。

```
/path/to/php /path/to/cake_2_2_0/app/Console/cake.php bake 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T11:29:06.997

一旦你的机器上有一个 CakePHP 应用程序，你只需要切换到应用程序中的 app 目录并运行

```
app/Console/cake bake 
```

# core-data - 如何比较 textfield.text 和 coredata 属性？

> ID：11377716
> 
> 赞同：0
> 
> 时间：2012-07-07T18:46:02.293
> 
> 标签：core-data, compare, textfield

这是我的代码..

NSLog(@"%@", [textField 文本]); NsLog(@"%@", entity.attribute);

日志显示了我的价值观

123 和 123 作为正确的值..

但是这段代码不起作用

if([textField text] == entity.attribute) NSLog(@"正确！");

日志“正确！” 没有显示。。

有什么问题？？帮助请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:50:48.363

您正在比较 NSString* 指针，而不是它们的值......它们是不同的对象。

如果两者都不是零（可能要检查），则以下将起作用：

```
If([[textField text] compare:entity.attribute]==NSOrderedSame) NSLog(@"Correct!"); 
```

# actionscript-3 - AS3 switch case语句中的多个变量和复杂表达式

> ID：11377721
> 
> 赞同：0
> 
> 时间：2012-07-07T18:46:38.690
> 
> 标签：actionscript-3, switch-statement

今天在清理一些AS3代码，想用switch语句替换一堆乱七八糟的if/else if/else语句。

```
private const myConstant:int = 3;
private var someNumber:int = 1000;
for(var i:int=0; i < someNumber; i++){
    switch(i, myConstant){
        case 0:
            function1();
            break;
        case (i % myConstant == 0):
            function2();
            break;
        default:
            function3();
    }
} 
```

我的程序有更多的 case 语句和变量，但是为了简洁起见，我将其删减了。在此示例中，我想`function2()`在循环的每第三次迭代中调用一次。现在，`myConstant`对于在其他地方使用的类来说，这是一个重要的设置，所以我不能只`3`在表达式中添加文字。

1.  我可以在一个开关中评估多个变量（和常量）吗？
2.  我可以评估示例中的第二个 case 语句之类的表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:54:06.463

关键字在`switch`括号内只接受一个表达式（上面的逗号分隔变量不会计算为一个表达式）。

该`case`关键字还期望评估一个表达式。

在您的示例中，没有必要将其中一个`i`或传递`myConstant`到 switch 语句中。这些 var 直接在 上面声明，`switch`并且可以被语句中的任何代码访问`switch`。

也许你想要这样的东西：

```
for (var i:int = 0, i < someNumber; i++)
{
    switch (true)
    {
        case i == 0:
            function1();
            break;
        case i % myConstant == 0:
            function2();
            break;
        default:
            function3();
    }
} 
```

# php - PHP 的邮件问题，无法发送

> ID：11377724
> 
> 赞同：0
> 
> 时间：2012-07-07T18:47:03.340
> 
> 标签：php, function, email

我目前正在我的网站上使用反馈表，我正在尝试将该反馈表发送到我的电子邮件，但不断收到通知，也许有人可以向我发送正确的编写方式，非常感谢这里是我所有的代码和错误..

形式

```
 <script type="text/javascript">
    function MM_validateForm() { //v4.0
      if (document.getElementById){
        var i,p,q,nm,test,num,min,max,errors='',args=MM_validateForm.arguments;
        for (i=0; i<(args.length-2); i+=3) { test=args[i+2]; val=document.getElementById(args[i]);
          if (val) { nm=val.name; if ((val=val.value)!="") {
            if (test.indexOf('isEmail')!=-1) { p=val.indexOf('@');
              if (p<1 || p==(val.length-1)) errors+='- '+nm+' must contain an e-mail address.\n';
            } else if (test!='R') { num = parseFloat(val);
              if (isNaN(val)) errors+='- '+nm+' must contain a number.\n';
              if (test.indexOf('inRange') != -1) { p=test.indexOf(':');
                min=test.substring(8,p); max=test.substring(p+1);
                if (num<min || max<num) errors+='- '+nm+' must contain a number between '+min+' and '+max+'.\n';
          } } } else if (test.charAt(0) == 'R') errors += '- '+nm+' is required.\n'; }
        } if (errors) alert('The following error(s) occurred:\n'+errors);
        document.MM_returnValue = (errors == '');
    } }
    </script>
            <div id="services">
              <h3><a href="services.php">Services</a></h3>
              <p>What we can do</p>
              <ul>
               <li>item</li>
               <li>item</li>
               <li>item</li>
               <li>item</li>
              </ul>
              </div>
            <div id="portfolio">
              <h3><a href="portfolio.php">Portfolio</a></h3>
                 <p>Some of our work</p>
            </div>
            <div id="hireus">
          <h3><a href="services.php">Request more info below!</a></h3>
          <form action="processor.php" method="post" name="myform" id="myform" onsubmit="MM_validateForm('fname','','R','lname','','R','email','','RisEmail','phone','','NisNum');return document.MM_returnValue">
        <label for="fname">First name</label>
        <input name="fname" type="text" id="fname" />
        <label for="lname">Last name</label>
        <input name="lname" type="text" id="lname" />
        <label for="email">Email Address</label>
        <input name="email" type="text" id="email" />
        <label for="phone">Phone Number</label>
        <input name="phone" type="text" id="phone" placeholder="800.867.5309" />
        <fieldset class="checkgroup">
        <legend>Services Interested In:</legend>
        <input name="services" type="checkbox" value="services_web" id="services_web" />
        <label for="services_web">Web Design</label>
         <input name="services" type="checkbox" value="services_design" id="services_design" />
        <label for="services_web">Video & 3D</label>
         <input name="services" type="checkbox" value="services_consultation" id="services_consultation" />
        <label for="services_web">Consulation</label>
        </fieldset>
        <textarea name="comments" id="comments" cols="35" rows="3"></textarea>
        <input name="submit" type="submit" value="Submit Info" />
        </form>

              </div>

 PROCESSOR 

<?php
/************************ 
```

*PHP 表单处理器 * ***** ** *** ** *** ** *** ***** /

```
//Trim removes white space after strip_tags gets rid of any html, javascript, etc tags from the input
$fname = trim(strip_tags($_POST['fname']));
$lname = trim(strip_tags($_POST['lname']));
$email = trim(strip_tags($_POST['email']));
$phone = trim(strip_tags($_POST['phone']));
$services = trim(strip_tags($_POST['services']));
$comments = trim(strip_tags($_POST['comments']));

//Creating a single variable to format and hold all the inputs
$body = "
Website Contact Form
First Name: $fname
Last Name: $lname
Email Address: $email
Phone: $phone
Services Interested In: $services
Comments: $comments";

mail ("spencer.schell87@gmail.com","Widget Box Contact Form","$body","$email");
mail ("$email","Widget Box Contact Form","$body","spencer.schell87@gmail.com");

?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="css/reset.css" />
<link rel="stylesheet" type="text/css" href="css/formatBlog.css" />
<title>Schell Shock Design's Portfolio</title>
</head>

<body class="tos">
  <div id="login">
   <?php include('login.php'); ?>
</div>
  </div>
  <div id="utilities">
   <?php include('utilities.php'); ?>
  </div>
<div id="container">
  <header>
    <?php include('header.php'); ?>
   </header>
 <div id="formsuccess">
            <h3>Thank You!</h3>
    <?php
//if the email was sent, show the success message
    echo '<div class="success">Thanks '.$fname.'. Your message was sent.</div>';
        echo '<div class="success">A copy of your form results were also mailed to '.$email.'.</div>';
    echo '<div class="success">We will get back to you at: '.$email.' or at: '.$phone.' within 24 hours.</div>';
?>

          </div>
  <div id="footer">
    <?php include('footer.php'); ?>
         </div>
</div>
</body>
</html> 
```

我的警告：

```
Warning: mail() [function.mail]: "sendmail_from" not set in php.ini or custom "From:" header missing in C:\xampp\htdocs\schellshockdesign.com\term5final\finalproject\processor.php on line 24

Warning: mail() [function.mail]: "sendmail_from" not set in php.ini or custom "From:" header missing in C:\xampp\htdocs\schellshockdesign.com\term5final\finalproject\processor.php on line 25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:49:46.323

尝试

```
mail ("spencer.schell87@gmail.com","Widget Box Contact Form","$body","From: $email");
mail ("$email","Widget Box Contact Form","$body","From: spencer.schell87@gmail.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:49:55.027

您想设置一个 FROM Header... 如错误所示

```
mail ("spencer.schell87@gmail.com","Widget Box Contact Form","$body","FROM: $email");
mail ("$email","Widget Box Contact Form","$body","FROM: spencer.schell87@gmail.com"); 
```

# android - Android 联系人弹出窗口的 XML 布局代码

> ID：11377726
> 
> 赞同：1
> 
> 时间：2012-07-07T18:47:41.313
> 
> 标签：android, android-4.0-ice-cream-sandwich

我正在寻找可在 Android 4.0 中生成人员联系详细信息弹出窗口外观的 XML 布局代码。这是一个屏幕截图来说明我在说什么：

![在此处输入图像描述](../Images/8bd855411e064ad8f16e6551bec37ff6.png)

我一直在看Grepcode，但运气不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:57:29.363

没有单个 XML 文件，但我想您想看看所有东西是如何在[platform_packages_apps_contacts / res / layout](https://github.com/android/platform_packages_apps_contacts/tree/master/res/layout)`quickcontact_`中捆绑在一起的。

# ruby-on-rails - 如何删除rails中的多个检查记录？

> ID：11377727
> 
> 赞同：1
> 
> 时间：2012-07-07T18:47:43.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, controller

我想出了如何为每一行显示复选框。问题是我不知道如何编写 form_tag 和提交标签，以便使用 detele 操作将选中的行参数传递给 messages_controller。以及在删除操作中写什么。

请帮帮我！

我的看法是

```
<table>
  <tr>
    <th>delete</th>
    <th>ID</th>
    <th>Read</th>
    <th>Date</th>
    <th>Sender</th>
    <th>Subject</th>
  </tr>

<% @messages.each do |m| %>
  <tr>
    <td><%= check_box_tag '', m.id, false, class: 'delete_multiple_checkbox', name: "conversations[]" %>
    <td><%= m.last_message.id %></td>
    <td><%= 'unread' if m.is_unread?(current_user) %></td>
    <td><%= m.last_message.created_at %></td>
    <td><%= m.last_sender.username %></td>
    <td><%= m.subject %></td>
 </tr>
<% end %>
</table> 
```

和控制器应该是这样的（根据这里[https://github.com/frodefi/rails-messaging/blob/master/app/controllers/messaging/messages_controller.rb](https://github.com/frodefi/rails-messaging/blob/master/app/controllers/messaging/messages_controller.rb)）

```
def trash
  conversation = Conversation.find_by_id(params[:id])
  if conversation
    current_user.trash(conversation)
    flash[:notice] = "Message sent to trash."
  else
    conversations = Conversation.find(params[:conversations])
    conversations.each { |c| current_user.trash(c) }
    flash[:notice] = "Messages sent to trash."
  end
  redirect_to messages_path(box: params[:current_box])
end 
```

路由.rb

```
Example::Application.routes.draw do

 root :to => "top#index" 
 devise_for :users, :controllers => { :registrations => "registrations" }

 get 'girls', :to => 'girls#index', :as => :user_root
 match '/girls/comment' => 'girls#comment', :via => :post
 get "girls/show"
 resources :girls
 resources :home

 devise_for :users do get 'logout' => 'devise/sessions#destroy' end

 resources :girls do 
   collection do
     get 'tag'
   end
 end

  resources :contacts
  resources :user_profiles

  match 'messages/new/:username', :to => 'messages#new'

  get "messages/sent"
  get "messages/trash"
  get "messages/received"
  get "messages/show"
  get "messages/trash"
  match '/messages/deliver' => 'messages#deliver', :via => :post

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-17T12:44:51.330

修改下面列出的语法以满足您的要求：

```
Model.where(:id => [1,2,3,4,5]).destroy_all 
```

或者

```
Model.where(id: params[:id]).destroy_all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T21:31:25.367

您所要做的就是用 form_tag 包装整个消息呈现块，并在您喜欢的任何地方添加 submit_tag。我假设您的控制器是空白命名空间下的 MessagesController 并且操作是垃圾。请注意，如果您的控制器在消息命名空间下，您可能需要将 :controller => :messages 更改为 :controller => 'messaging/messages'。

```
 <% form_tag :url => { :controller => :messages, :action => :trash}, :method => :delete do %>
      <% @messages.each do |m| %>
        <tr>
          <td><%= check_box_tag '', m.id, false, class: 'delete_multiple_checkbox', name: "conversations[]" %>
          <td><%= m.last_message.id %></td>
          <td><%= 'unread' if m.is_unread?(current_user) %></td>
          <td><%= m.last_message.created_at %></td>
          <td><%= m.last_sender.username %></td>
          <td><%= m.subject %></td>
       </tr>
      <% end %>
      <%= submit_tag "Trash All Checked" %>
    <% end %> 
```

我还假设您的 routes.rb 接受指定路由的 HTTP DELETE 方法。您可以检查`rake route | grep messages`并验证路线是否已设置。如果不是，您将不得不添加它：

```
resources :messages do
    collection do
         delete :trash
    end
end 
```

# android - Android短信设置唯一ID

> ID：11377730
> 
> 赞同：4
> 
> 时间：2012-07-07T18:47:51.670
> 
> 标签：android, android-intent, sms

我正在尝试开发一个发送和接收 SMS 消息的 Android 应用程序（除其他外）

我希望我的应用程序 SMS 消息易于识别。我不想为这个唯一标识符使用 SMS 消息正文，我认为必须有一个我可以使用的 SMS 消息属性。遗憾的是，我没有找到或追踪一般的 SMS 消息的技术规范。

有谁知道 SMS 消息标准是否有一个可以通过编程方式设置的 ID 字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:03:38.560

不，那里没有。[您可以在本文档](http://people.uncw.edu/vetterr/Computer-SMS.pdf)的第二页和[本页](http://www.dreamfabric.com/sms/)上查看标准 SMS 消息的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:09:41.057

我处理这个问题的方法是设置一个比系统 SMS 侦听器具有更高优先级的 SMS 侦听器，该侦听器在所有收到的文本中查找唯一的字符串。

如果 SMS 包含字符串，我会在应用程序中处理它并丢弃 SMS，这样我就不会乱扔用户收件箱。

用户消息提示音甚至没有响起。它工作得很好。

有关如何执行此操作的更多信息，请参阅此帖子：

[我们可以在 Android 中的 SMS 到达收件箱之前删除它吗？](https://stackoverflow.com/questions/1741628/can-we-delete-an-sms-in-android-before-it-reaches-the-inbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-10T12:19:31.727

我知道已经4年了。但万一有人通过这个问题。是的，SMS 有唯一的 id `_id`，您可以通过它识别 SMS。

有关更多信息，请参阅[此](https://stackoverflow.com/a/11076049/2968988)答案。

# cuda - 带有 optimus 的 cuda 只是为了访问 gpgpu

> ID：11377736
> 
> 赞同：4
> 
> 时间：2012-07-07T18:48:43.057
> 
> 标签：cuda, ubuntu-12.04

我有一台带有 Nvidia 525M 显卡的戴尔 XPS L502。我现在只对使用卡的 gpgpu 功能感兴趣。

我安装了 Ubuntu 12.04 作为与机器附带的 Windows 7 的双启动，并遵循了几个安装程序来安装来自 Nvidia 的 CUDA 驱动程序和开发工具包（许多重新安装 Ubuntu）。在所有情况下，显示器都降至 640x480 分辨率。最好我能确定这与 Optimus 技术和 Linux 有关。我试过大黄蜂无济于事。

我真的不在乎使用 NVidia 卡来驱动显示器。有什么方法可以让我只安装 NVidia 驱动程序，以便程序可以使用显卡的 CUDA 功能，而我仍然可以在显示器上获得全分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:10:34.700

随着新版 CUDA 5 的出现，安装指南中只有一个文件可以安装驱动程序、工具包和 sdk（甚至是 nvidia nsight）。引起我注意的一件事是，您在安装过程中也有**optimus**选项。

我也有 Alienware M14x，我理解你的问题，但我也希望驱动程序为我工作，所以我没有太努力。

也许您可以尝试一下并与我们其他人一起发表评论。

在这里您可以查找 CUDA 5 候选版本：[CUDA 5](http://developer.download.nvidia.com/compute/cuda/5_0/rc/docs/CUDA_Getting_Started_Guide_For_Linux.pdf)

这是安装指南（也许先读一读）：[CUDA 5 Starting Guide for Linux。](http://developer.download.nvidia.com/compute/cuda/5_0/rc/docs/CUDA_Getting_Started_Guide_For_Linux.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:13:01.530

我的 Alienware M11xR2 也遇到了类似的问题，并在 NVIDIA 论坛上发布了解决方案。不幸的是，论坛目前已关闭，但基本上过程如下：

1.  安装 Nvidia 驱动程序，但当提示修改 X11 配置时，选择“否”。这是因为 Nvidia 卡不能用作显示设备。
2.  安装 CUDA SDK 并**以 root 身份运行其中一个示例**。我发现这是一个必要的步骤。在此之后，您应该能够以普通用户的身份执行更多的 CUDA 程序。

希望有帮助。

# git - git push 导致致命：远程端意外挂断

> ID：11377755
> 
> 赞同：3
> 
> 时间：2012-07-07T18:51:32.220
> 
> 标签：git

我正在尝试在我的本地局域网上设置一个 git repo，并且到目前为止能够克隆、拉取、获取等。不幸的是，当我尝试推送时，它会导致

> 致命：远端意外挂断。

系统日志显示：

> git-daemon [10090]: 'receive-pack': 没有为'./www-dev/aptwebsite.git' 启用服务

经过一番研究，我认为我可以启用“receive-pack”，但我不知道如何。

当我尝试：

```
git daemon --reuseaddr --base-path=. --export-all --verbose --enable=receive-pack 
```

我得到：

> 致命：无法在主机（空）端口 9418 上分配任何侦听套接字。

当我尝试

```
git receive-pack <working directory> 
```

我得到：

> 0070000000000000000000000000000000000000000000 能力^{}报告状态删除参考边带64k ofs-delta 0000^C

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T03:15:29.687

如果人们使用 git-daemon 遇到“远程端意外挂断”，一些提示可能会有所帮助。

1) [git-daemon 上的 Git “How to”文档](https://git-htmldocs.googlecode.com/git/howto/use-git-daemon.html)说“remote end hang up”消息是通用消息。您应该查看服务器日志以获取有关可能出现问题的更多信息。对于最初的设置，我还建议将 --informative-errors 切换到 git-daemon，这将对 git push 命令产生更有用的错误。

2）第二个问题是“无法在主机（空）端口 9418 上分配任何侦听套接字”。这是来自实现 git-daemon 的代码，即[daemon.c](https://github.com/git/git/blob/master/daemon.c#L949)。此代码有一个函数 socksetup()，当它在设置套接字时遇到问题时会生成此错误。换句话说：这是一个网络管道问题。确保没有其他守护程序在端口 9418 上运行。

3) [git receive-pack](https://git-htmldocs.googlecode.com/git/git-receive-pack.html)并不意味着由最终用户运行。也就是说，如果“工作目录”是新初始化的 Git 存储库，则字符串“00700000000000000000000000000000000000000000 能力^{} report-status delete-refs side-band-64k ofs-delta”正是您会得到的。

简而言之：检查来自 git-daemon 的日志，并注意网络管道。

# mysql - 如何按总和排序

> ID：11377757
> 
> 赞同：0
> 
> 时间：2012-07-07T18:51:37.417
> 
> 标签：mysql, sql, sum

有没有办法通过 2 列或更多列的总和来对查询进行排序？我想根据一些行的总和来做一个顶部[数字]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T18:55:09.267

```
select num1, num2
from mytable
order by num1+num2 desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:58:16.643

```
SELECT Col1, Col2,...,Coln
FROM table
ORDER BY Col1+Col2+...+Coln DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T19:42:47.410

根据您的服务器，您可能无法在 ORDER BY 中使用表达式。您可能还需要在 SELECT 列表中包含该排序列。

# android - 将微调器添加到 ActionBar（不是导航

> ID：11377760
> 
> 赞同：12
> 
> 时间：2012-07-07T18:52:20.093
> 
> 标签：android, xml, layout, spinner, android-actionbar

[我使用此处](https://stackoverflow.com/questions/8312344/how-to-add-a-dropdown-item-on-the-action-bar)答案中的第二个选项向我的 ActionBar 添加了一个微调器。

如何向微调器添加微调器适配器？我尝试使用谷歌[在此处](http://developer.android.com/guide/topics/ui/controls/spinner.html)描述的 Spinner 对象，但得到一个空 Spinner 对象。

有人知道怎么做吗？我不希望微调器位于操作栏的导航区域中，而是与其他操作项一起（我正在使用拆分操作栏）。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-04-07T00:22:26.733

我知道这是一个老问题，但以防万一有人偶然发现它（就像我一样）并且仍然在寻找完整的答案，这里是如何使用兼容性库来做到这一点，以便它从 v7（Android 2.1 Eclair）到当前 v19（Android 4.4 KitKat）：

在 menu_layout.xml 中：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:yourapp="http://schemas.android.com/apk/res-auto" >

  <item android:id="@+id/spinner"
    yourapp:showAsAction="ifRoom"
    yourapp:actionViewClass="android.widget.Spinner" />
</menu> 
```

使用`http://schemas.android.com/apk/res-auto`命名空间别名 as`yourapp`使您能够使用旧版本 Android 上不存在的属性 showAsAction 和 actionViewClass。

然后在您的活动代码中：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_layout, menu);
    MenuItem item = menu.findItem(R.id.spinner);
    Spinner spinner = (Spinner) MenuItemCompat.getActionView(item);
    spinner.setAdapter(adapter); // set the adapter to provide layout of rows and content
    spinner.setOnItemSelectedListener(onItemSelectedListener); // set the listener, to perform actions based on item selection 
```

瞧！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-30T11:38:32.443

我知道你放弃了微调器，但我会在这里给出一些提示，以防其他人遇到同样的问题，或者你在不同的应用程序中开发相同的模式

*   如果你得到 null 是因为你没有正确指定 ID。仔细检查 ID。
*   在您通过指定只是一个微调器的 actionLayout 来显示复杂内容的链接中，您只需指定一个 actionViewClass="android.widget.Spinner" 就可以了。
*   然后在`OnCreateOptionsMenu`你做：

    ```
    inflater.inflate(R.menu.my_menu, menu); // inflate the menu
    Spinner s = (Spinner) menu.findItem(R.id.my_menu_spinner).getActionView(); // find the spinner
    SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(getActivity().getActionBar()
            .getThemedContext(), R.array.my_menu_spinner_list, android.R.layout.simple_spinner_dropdown_item); //  create the adapter from a StringArray
    s.setAdapter(mSpinnerAdapter); // set the adapter
    s.setOnItemSelectedListener(myChangeListener); // (optional) reference to a OnItemSelectedListener, that you can use to perform actions based on user selection 
    ```

快乐的编码...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-10T07:47:42.317

好吧，我放弃了使用子菜单的 Spinner 想法。我意识到微调器是用于选择保持选中状态的东西。子菜单接缝以更好地适应 UI。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-23T12:20:23.367

```
inflater.inflate(R.menu.my_menu, menu); // inflate the menu 

Spinner s = (Spinner) menu.findItem(R.id.my_menu_spinner).getActionView();     // find the spinner 
SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(getActivity().getActionBar() .getThemedContext(), R.array.my_menu_spinner_list, android.R.layout.simple_spinner_dropdown_item);    // create the adapter from a StringArray 
s.setAdapter(mSpinnerAdapter);   // set the adapter 
s.setOnItemSelectedListener(myChangeListener);    // (optional) reference to a OnItemSelectedListener, that you can use to perform actions based on user selection 
```

# ruby - 为什么 rake assets:precompile 需要永远？

> ID：11377762
> 
> 赞同：5
> 
> 时间：2012-07-07T18:52:25.597
> 
> 标签：ruby, rake, assets, precompile

我们的 RoR 应用程序使用了很多需要预编译的资产。通常需要几分钟`assets:precompile`才能运行。

然而最近发生了一件非常奇怪的事情：简单`rake assets:precompile`永无止境（等了几个小时）。

我找到了一种解决方法：

```
rake assets:precompile --trace 
```

但是无论如何，修复它会很棒。关于原因的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T13:29:09.450

在您的本地机器或生产服务器上需要永远吗？

当我将我的应用程序部署到 AWS 微实例时，我也遇到了类似的情况。它占用了很多 CPU，然后 AWS 限制了 CPU。请参阅[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html)

现在我在本地预编译我的资产，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T07:05:26.690

我遇到了同样的问题，并通过某个地方的要点遇到了这个很棒的宝石（史蒂夫·阿加洛科）。总之，很有魅力！

[https://github.com/spagalloco/capistrano-local-precompile](https://github.com/spagalloco/capistrano-local-precompile)

# android - 尝试为 android 示例构建 OpenCV 时运行构建器“CDT Builder”时出错

> ID：11377765
> 
> 赞同：15
> 
> 时间：2012-07-07T18:52:42.700
> 
> 标签：android, c++, opencv, android-ndk

大家好，我正在尝试了解 android 中的 openCV 我已经按照[此处给出的说明进行操作](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html#android-binary-package-with-ndk)

但是当我尝试编译时，我只会得到

> 01:50:14 **** 自动构建项目 org.opencv.samples.fd.FdActivity 的默认配置 **** "C:\Android\android-ndk-r8\ndk-build.cmd" 安装：libdetection_based_tracker.so =>库/armeabi-v7a/libdetection_based_tracker.so
> 
> 01:50:14 构建完成（耗时 184 毫秒）

在控制台中，我也得到一个错误

> 构建过程中发生错误。在项目“org.opencv.samples.fd.FdActivity”上运行构建器“CDT Builder”时出错。构建项目 org.opencv.samples.fd.FdActivity 配置内部错误 默认 java.lang.NullPointerException 构建项目 org.opencv.samples.fd.FdActivity 配置内部错误 默认 java.lang.NullPointerException

以前有人遇到过这个问题吗？请帮我解决这个问题

谢谢你

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-09T13:15:19.547

尝试

项目属性>C/C++ 构建>工具链编辑器

> 当前工具链：Android GCC
> 当前构建器：Android Builder

项目属性>C/C++ 构建

> （取消选中）使用默认构建命令
> 构建命令：ndk-build
> （取消选中）自动生成 Makefiles

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-18T03:47:56.697

您可能已经重命名了项目，而eclipse忘记重命名“刷新策略”。

**只需手动更新“项目属性-> C/C++ 构建-> 刷新策略”即可解决我的问题**。

顺便说一句，在这种情况下，ADT 有一些非常糟糕的错误描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T06:37:00.817

我可能有同样的问题，尝试 ndk-build -B 重建所有东西，看看你是否仍然有错误，如果没有错误仍然存​​在，那么你的 ndk-build 没有问题。尝试在没有安装 CDT 的情况下运行您的 android 应用程序，如果可行，至少我们可以使用命令行来构建代码的 c++ 部分。

但是 CDT 仍然无法正常工作，根据 opencv 文档安装 CDT 后，我遇到了很多错误，将 cygwin 和 gcc 的东西添加到路径中就可以解决大部分问题。但是最后一件奇怪的事情是，我在这里遇到了一个错误。

在人脸检测示例中，.cpp 部分

```
catch(cv::Exception e)
{
    LOGD("nativeCreateObject catched cv::Exception: %s", e.what()); 
```

它总是说符号“e”无法解决。

但是当我包含opencv的东西时没有错误。即使我尝试将 cv::Exception e 放在 catch() 之外

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-09T09:52:58.353

这些对我有用：

```
Build command: ndk-build
(uncheck) generate Makefiles automatically 
```

# javascript - 在javascript（jquery）函数中转义特殊字符

> ID：11377777
> 
> 赞同：2
> 
> 时间：2012-07-07T18:55:38.557
> 
> 标签：javascript, jquery, html

我在 jquery 中附加了这一行：

```
$('#league2').append("<input type=\"button\" id=\"2btn\" value=\"1.2\" class=\"butta\"  onmousedown=\"active('exam\'ple','awayteam')"); 
```

注意“exam\'ple”......我用\'转义了'，所以当点击按钮时，激活的功能应该可以工作。

这是激活的功能：

```
function active(hometeam,awayteam){
alert("if this is alerted, it works!");
} 
```

当我单击按钮时，它应该提醒“如果这被提醒，它可以工作！”，但它没有提醒它。它认为是因为当我使用该功能时，这是outpot：

```
function active(exam\'ple,awayteam){ 
```

当我用不包含“'”的单词附加相同的内容时，它正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:59:27.057

您需要在活动函数的参数中转义反斜杠，而不是撇号。

```
$('#league2').append("<input type=\"button\" id=\"2btn\" value=\"1.2\" class=\"butta\"  onmousedown=\"active('exam\\'ple','awayteam')"); 
```

要使用 php 转义字符串以将其附加到该代码，您可以使用正则表达式。以下将适用于您的情况。

```
// Replaces a backslash with four backslashes: The 'append' function will interpret it as two backslashes; the 'active' function, as only one.
$str = preg_replace("/\\\\/", "\\\\\\\\\\\\\\\\", $str);
// Replaces an apostrophe with two backslashes and an apostrophe, then javascript will append only one backslash and an apostrophe, escaping that way an apostrophe.
$str = preg_replace("/'/", "\\\\\\\\'", $str);
// Replaces quotations with a backslash and quotations: the quotations will be escaped inside the append function, so one quotations will be printed out on your HTML
$str = preg_replace("/\"/", "\\\\\"", $str); 
```

如果您不知道什么是正则表达式 (regex)，我建议您研究一下如何使用它们。他们会帮助你很多。

编辑：由于某种原因，最后一个程序需要双反斜杠才能工作。更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T18:59:25.090

当字符串是双引号时，您不需要转义单引号。最好将整个字符串用单引号括起来，这样您就可以使用双引号而无需转义。（或单引号全部用双引号括起来）。

例如：

```
$("#thing").append('<div id="foo" class="bar" style="color:black;" onclick="foobar()"></div>'); 
```

您的代码有点复杂，因为有多个级别（您是否考虑过[jQuery 的点击？](http://api.jquery.com/click/)）：

```
$('#league2').append('<input type="button" id="2btn" value="1.2" class="butta"  onmousedown="active('exam\'ple','awayteam')'); 
```

# javascript - 非常初级的jquery + ajax

> ID：11377778
> 
> 赞同：1
> 
> 时间：2012-07-07T18:55:41.003
> 
> 标签：javascript, ajax, json, jquery

单击一个按钮，我想捕获一个表单的数据并使用 ajax、json 将其发送到一个 php 页面。现在，只有当我注释掉我的 AJAX 部分时，单击按钮才会出现警报“hello hello”。当我通过取消注释来包含 ajax 部分时，我不仅没有收到任何错误，而且我的“hello hello”警报也没有出现。我觉得这很奇怪。为什么会这样？

### 这是我的ajax：

```
<script>
    $(document).ready(function () {
        $("#btn").click( function() {
        alert('hello hello');
        /* Coomenting starts here
        $.ajax({
            url: "connection.php",
            type: "POST",
            data: {
                id: $('#id').val(),
                name: $('#name').val(),
                Address: $('#Address').val()
            }
            datatype: "json",
            success: function (status)
            {
                if (status.success == false)
                {
                    alert("Failure!");
                }
                else 
                {
                    alert("Success!");
                }
            }
        });
        */
    //commenting ends here.
    //basically i just commented out the ajax portion 
    });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:58:33.180

检查数据参数后的逗号语法：

```
data: {
         id: $('#id').val(),
         name: $('#name').val(),
          Address: $('#Address').val()
      }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T18:58:56.120

您在“数据”后缺少逗号：

```
$.ajax({
    url: "connection.php",
    type: "POST",
    data: {
        id: $('#id').val(),
        name: $('#name').val(),
        Address: $('#Address').val()
    }, // Missing comma!
    datatype: "json",
    success: function (status)
    {
        if (status.success == false)
        {
            alert("Failure!");
        }
        else 
        {
            alert("Success!");
        }
    }
}); 
```

正如@dystroy 指出的那样，由于您的代码无法编译，因此这个格式错误的块可能会阻止其他代码（例如简单的警报）触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T18:59:41.793

您在该`data`部分后面缺少一个逗号：

```
<script>
    $(document).ready(function () {
        $("#btn").click( function() {
        alert('hello hello');
        /* Coomenting starts here
        $.ajax({
            url: "connection.php",
            type: "POST",
            data: {
                id: $('#id').val(),
                name: $('#name').val(),
                Address: $('#Address').val()
            },
            datatype: "json",
            success: function (status)
            {
                if (status.success == false)
                {
                    alert("Failure!");
                }
                else 
                {
                    alert("Success!");
                }
            }
        });
        */
    //commenting ends here.
    //basically i just commented out the ajax portion 
    });
    });
</script> 
```

# oracle - 甲骨文 11g。无法导入转储文件，即使创建了架构

> ID：11377779
> 
> 赞同：4
> 
> 时间：2012-07-07T18:55:47.213
> 
> 标签：oracle, oracle11g

我使用以下脚本在 Oracle 11gR2 中创建了一个用户

```
create user          cata
identified by        cata
default   tablespace tbs
temporary tablespace temp;

grant DBA to cata; 
```

尝试使用命令导入转储文件后

```
impdp system/password@ORCL11 schemas=cata dumpfile=cata.dmp logfile=log.txt 
```

我收到以下错误

**ORA-39002：无效操作 ORA-39165：未找到架构 ATGDB_CATA。**

令人惊讶的是，当我尝试从同一架构导出转储时，我能够做到这一点。所以，如果架构没有正确创建，那么我也不应该能够导出转储文件，对吧？

我还签入了 dba_users 并创建了架构。我还能做些什么来解决这个问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T20:37:36.803

在错误消息中，我猜原始模式名称是“atgdb_cata”。

当您现在尝试导入名为“cata”的模式时，您需要指定参数`remap_schema`

所以对于你的情况： `impdp system/password@ORCL11 schemas=atgdb_cata dumpfile=cata.dmp logfile=log.txt remap_schema=atgdb_cata:cata`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T10:32:14.650

将您创建的目录上的读写角色授予新用户：EX：

```
GRANT READ, WRITE ON DIRECTORY dir_name TO NEW_USER: 
```

还将以下角色授予新用户：

```
GRANT IMP_FULL_DATABASE TO NEW_USER; 
```

谢谢！数控

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T08:04:25.287

ORA-39002: 无效操作 ORA-39070: 无法打开日志文件。ORA-29283：无效的文件操作 ORA-06512：在“SYS.UTL_FILE”，第 536 行 ORA-29283：无效的文件操作

解决方案：创建或替换目录 test_dir 为 'FOLDER_NAME' ；

'FOLDER_NAME' 必须有那个转储文件

步骤： 1 在 orcle_installed_pa​​th/sql/SAMPLE 下创建文件夹 SAMPLE 将该转储文件放入该 SAMPLE 文件夹。

进入 bin 并执行 ./sqlplus 并登录 SQL>create or replace directory test_dir as 'SAMPLE' ;

SQL> SQL> GRANT READ, WRITE on directory test_dir to 'USER';

SQL> 将 IMP_FULL_DATABASE 授予“用户”；exit 然后 impdb 导入该转储

# meteor - Meteor live-ui 输入类型=数字

> ID：11377781
> 
> 赞同：0
> 
> 时间：2012-07-07T18:56:03.377
> 
> 标签：meteor

我在某个领域遇到了一些麻烦。我正在使用流星，并且正在使用值来自集合的`input type='number'`字段。`value="{{value}}"`

问题是`input type=number`我不会实时更新新值（我在不同的窗口中设置），但它**确实**适用于`input type=text`. 我将如何解决这个问题？有没有人有同样的问题？

不过，当我刷新页面时，它确实会显示新值。

我用不同的例子试过这个，它有时会起作用，但我不太确定如何诊断它。控制台中没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T13:53:07.923

将@Akshat 的评论复制到答案中，以便可以接受：

> 我认为这是旧版本的错误，现在已修复。

# django - Django TDD 测试指标

> ID：11377782
> 
> 赞同：1
> 
> 时间：2012-07-07T18:56:06.943
> 
> 标签：django, unit-testing, tdd, bdd

我想在我的项目中采用 TDD/BDD，作为一种学习体验，也因为我对这些实践有正当的兴趣。[到目前为止，我一直在先写代码，然后再写测试，因为到目前为止，有很多琐碎的代码更容易先写出来，然后再为它添加测试。一旦我完成了琐碎代码的工作，我将转向希望先编写测试，然后为它编写代码！但是现在……它不存在，或者我不存在，毕竟我是新手！]

我一直在将 coverage.py 与 django-nose 结合使用，以确保我始终拥有 100% 的代码覆盖率（我认为他们称之为分支覆盖率）。

我注意到尝试添加测试的两个问题：我正在测试可笑的不重要的代码——比如我的模型的 unicode() 方法，它没有在任何地方公开使用——只是为了保持 100% 的代码覆盖率，我觉得如此多的东西与 Django 交织在一起，我不能一次只测试一个单元，而是多个单元。

我可以使用更好的指标吗？我什么时候测试“太多”？我如何才能将我的测试更多地视为单元测试，而不仅仅是常规的旧马虎测试？我不敢说“好吧，我会忽略这些”，因为我会扩大我编写的每段代码的范围。

[编辑] 我看过 Django 的 TDD 指南，我很喜欢它——但它仍然给我留下了疑问。

# ruby-on-rails - ArgumentError 和 Internal Server Error 500 has_many 关联

> ID：11377784
> 
> 赞同：0
> 
> 时间：2012-07-07T18:56:10.483
> 
> 标签：ruby-on-rails, has-many, internal-server-error

我正在创建一个表单并希望实现多对多关联。第一个工作正常，但在我添加了两个之后，我得到了这个内部服务器错误。即使我删除了 has_many 代码片段，该站点仍然无法运行。我的错误在哪里？

```
Started GET "/clinics" for 127.0.0.1 at Sat Jul 07 20:25:32 +0200 2012

ArgumentError (wrong number of arguments (3 for 0)):

Error during failsafe response: wrong number of arguments (1 for 0)
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/actionpack-3.1.3/lib/action_view/base.rb:204:in `initialize'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/actionpack-3.1.3/lib/action_dispatch/middleware/show_exceptions.rb:81:in `rescue_action_locally
'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/actionpack-3.1.3/lib/action_dispatch/middleware/show_exceptions.rb:69:in `render_exception'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/actionpack-3.1.3/lib/action_dispatch/middleware/show_exceptions.rb:59:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/railties-3.1.3/lib/rails/rack/logger.rb:13:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/rack-1.3.6/lib/rack/methodoverride.rb:24:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/rack-1.3.6/lib/rack/runtime.rb:17:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/activesupport-3.1.3/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/rack-1.3.6/lib/rack/lock.rb:15:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/actionpack-3.1.3/lib/action_dispatch/middleware/static.rb:53:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/railties-3.1.3/lib/rails/engine.rb:456:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/rack-1.3.6/lib/rack/content_length.rb:14:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/railties-3.1.3/lib/rails/rack/log_tailer.rb:14:in `call'
  c:/jruby-1.6.5/lib/ruby/gems/1.8/gems/rack-1.3.6/lib/rack/handler/webrick.rb:59:in `service'
  c:/jruby-1.6.5/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  c:/jruby-1.6.5/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  c:/jruby-1.6.5/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  org/jruby/RubyProc.java:270:in `call'
  org/jruby/RubyProc.java:224:in `call'

Started GET "/clinics" for 127.0.0.1 at Sat Jul 07 20:51:56 +0200 2012

ArgumentError (wrong number of arguments (3 for 0)): 
```

我将发布我所有的模型：

```
class Clinic < ActiveRecord::Base
  attr_accessible :name, :born_on, :clinic, :menopause, :menodate, :pregnancies, :preg_nr, :hormones, :carcinomes, :who_carci, :digni, :size, :calci, :makro, :mikro, :preresult, :enr, :operation_ids, :mamma, :resection, :lkdissektion_ids, :other_diss, :faszie, :pectoralis, :localization_ids

  has_many :loca_hms
  has_many :localizations, :through => :loca_hms

  has_many :op_hms
  has_many :operations, :through => :op_hms

  has_many :lkdiss_hms
  has_many :lkdissektions, :through => :lkdiss_hms
end 
```

```
class Operation < ActiveRecord::Base
  attr_accessible :name

  has_many :op_hms
  has_many :clinics, :through => :op_hms
end 
```

```
class OpHm < ActiveRecord::Base
  attr_accessible :clinic_id, :operation_id

  belongs_to :clinic
  belongs_to :operation
end 
```

```
class Localization < ActiveRecord::Base
  attr_accessible :name

  has_many :loca_hms
  has_many :clinics, :through => :loca_hms
end 
```

```
class LocaHm < ActiveRecord::Base
  attr_accessible :clinic_id, :localization_id

  belongs_to :clinic
  belongs_to :localization
end 
```

```
class Lkdissektion < ActiveRecord::Base
  attr_accessible :name

  has_many :lkdiss_hms
  has_many :clinics, :through => :lkdiss_hms
end 
```

```
class LkdissHm < ActiveRecord::Base
  attr_accessible :clinic_id, :lkdissektion_id

  belongs_to :clinic
  belongs_to :lkdissektion
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T11:45:10.193

我发现了问题：rake db:migrate 命令搞砸了。我不得不再次删除我的整个数据库和 db:create / db:migrate。现在它就像一个魅力！

# scala - 斯卡拉 | 电梯 | 如何跨菜单制作

> ID：11377786
> 
> 赞同：1
> 
> 时间：2012-07-07T18:56:20.680
> 
> 标签：scala, menu, lift

使用

```
<div class="lift:Menu.builder"/> 
```

网站上的菜单是垂直的，有什么想法，因为我在任何地方都找不到，如何制作菜单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T19:51:59.437

这更像是一个 CSS 问题而不是 Lift 问题。为菜单生成的 HTML 如下所示：

```
<div class="column span-6 colborder sidebar">
  <hr class="space" />
  <ul>
    <li> <span>Home</span></li>
    <li> <a href="/user_mgt/login">Login</a></li>
    <li> <a href="/user_mgt/sign_up">Sign Up</a></li>
    <li> <a href="/user_mgt/lost_password">Lost Password</a></li>
    <li> <a href="/search">Search</a></li>
  </ul>
  ...
</div> 
```

即，尽可能简单，因此添加一些 CSS 以从列表中创建水平菜单非常容易——例如参见Listamatic 上[的“水平列表”示例](http://css.maxdesign.com.au/listamatic/)。

将 CSS 代码添加到 中的标头是最简单的`src/main/webapp/templates-hidden/default.html`，但您也可以使用自己的单独的 CSS 文件而不必大惊小怪。

# java - 窗口化 Java 应用程序中的垂直同步

> ID：11377789
> 
> 赞同：1
> 
> 时间：2012-07-07T18:57:08.393
> 
> 标签：java, awt, vsync

我一直在破解 Notch 的 Ludum Dare 22 条目[Minicraft](http://www.ludumdare.com/compo/ludum-dare-22/?action=preview&uid=398)。这是一款用 Java 编写的 2D 动作冒险游戏。虽然游戏在我的笔记本电脑上以 150-200 FPS 的速度运行，但画面撕裂非常明显。我想解决这个问题。

我有多年的编程经验，还有*一些*游戏编程经验，但我对 Java 完全陌生。根据我的阅读，（窗口）Java 应用程序中的 V-sync 过去一直是个问题。今天有可能吗？有实用的解决方法吗？

到目前为止，我已经尝试过[java.awt.Toolkit.sync()](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Toolkit.html#sync())，但它似乎没有帮助。我还确定 Minicraft 已经是三重缓冲的。

在我花太多时间在这之前，我想知道我是否走上了一条死胡同。如果需要，我很乐意提供更多技术信息。

编辑：对于它的价值，我在 Mac 上。我只是试图捕捉撕裂效果的屏幕录制，但显然在 QuickTime 录制时，游戏是垂直同步的！这有什么意义？这是操作系统问题而不是 Java 问题吗？

# c# - 在另一个程序集中查找所有嵌入资源

> ID：11377790
> 
> 赞同：13
> 
> 时间：2012-07-07T18:57:10.873
> 
> 标签：c#, resources, embedded-resource

我正在为我的项目进行本地化。为此，我有一个类应该从另一个程序集中加载嵌入式资源，然后读出字符串。

但我还需要知道这个程序集包含哪些资源文件。它们的数量和语言是未知的。

那么如何找出这个程序集中的“.resx”文件是如何命名的呢？它们都有相同的方案：“de-DE.resx”、“en-US.resx”等等。

我需要知道这些文件中有多少包含在这个程序集中，以及它们是哪些语言。

我知道 ResourceManager 可以访问它们，因此也应该可以通过编程方式访问这些信息......

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-07T19:04:35.977

您应该使用类（[msdn](http://msdn.microsoft.com/en-US/library/system.reflection.assembly.getmanifestresourcenames(v=vs.100).aspx)`GetManifestResourceNames` ）中的方法：`Assembly`

```
string[] resourceNames = this.GetType().Assembly.GetManifestResourceNames();
foreach(string resourceName in resourceNames)
{
    Console.WriteLine(resourceName);
} 
```

# c++ - 将它们（函数）保存在内存中的相同位置

> ID：11377791
> 
> 赞同：0
> 
> 时间：2012-07-07T18:57:10.973
> 
> 标签：c++, windows, memory, dll, assembly

我正在为 Windows 构建一个 C++ 应用程序，我将与一个 DLL（在汇编代码中）挂钩。但是我在对我制作的控制台应用程序进行逆向工程时遇到了问题。

我想将函数地址保留在同一个位置，但每次我编辑和重建 DLL 时它们都会在内存中移动。

有没有办法让它们保持在同一个地方？有没有办法将变量（例如`int`）的后备存储保持在同一个位置（内存地址）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:39:55.283

您不需要用汇编语言对地址进行硬编码。

您可以像往常一样链接 DLL。

如果这对您不起作用，请发布代码和确切的问题描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T07:20:48.537

简短的回答：没有。我从未听说过具有此功能的编译器/链接器。

# jquery - 如何通过脚本和 CSS 设置 jQuery 手风琴标题颜色

> ID：11377792
> 
> 赞同：7
> 
> 时间：2012-07-07T18:57:15.630
> 
> 标签：jquery, jquery-ui-accordion

我有简单的手风琴。这是我的 HTML 代码。

```
 <div id="accordion">
            <div>
                    <h3 id="a1"><a href="#">First</a></h3>
                    <div>Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</div>
            </div>
            <div>
                    <h3 id="a2"><a href="#">Second</a></h3>
                    <div>Phasellus mattis tincidunt nibh.</div>
            </div>
            <div>
                    <h3 id="a3"><a href="#">Third</a></h3>
                    <div>Nam dui erat, auctor a, dignissim quis.</div>
            </div>
    </div> 
```

我的问题是，当我的手风琴显示时，所有折叠的标题都将具有相同的颜色，除了活动标题或扩展标题，这将是唯一显示不同颜色的标题。然后，当我再次单击另一个标题时，该展开的标题将具有不同的颜色，并且所有折叠的标题都将使用相同的颜色设置样式。如何通过 jQuery & CSS 设置颜色？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T00:16:17.510

如果您使用的是 jquery ui 手风琴，也许这会有所帮助：

为任何标题着色：

```
.ui-accordion-header { background-color: blue; } 
```

为活动标题着色：

```
.ui-accordion-header.ui-state-active { background-color: yellow; } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-13T14:15:09.657

标题背景颜色

```
#accordion .ui-accordion-header { background: #fff; } 
```

活动标题背景颜色

```
#accordion .ui-accordion-header.ui-state-active { background: #0c8d11; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T12:32:13.780

因此，要将活动元素设置为灰色和橙色：

```
$(".ui-accordion-header").css("background","grey") ;

$(".ui-accordion-header.ui-state-active ").css("background","orange") ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-05T02:58:03.483

记得也设置背景图像，或者将其设置为无以仅使用颜色。

```
 .ui-state-default{
      background-color: #3173a5;
      background-image: none;
   } 
```

如果您只希望某些标题的颜色不同，您可以向它们添加一个类

```
<h3>Regular Header</h3>
<div>Regular Content</div>

<h3 class="special">Special Header</h3>
<div>Special Content</div> 
```

然后将样式仅附加到该类

```
 .special.ui-state-default{
      background-color: #3173a5;
      background-image: none;
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-18T15:45:50.100

在 jquery-ui-1.9.2.custom.min.css 中找到此部分并进行更改：

```
 .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default {
    border: 0px solid #d3d3d3;
    background: #e6e6e6 url("images/ui-bg_glass_75_e6e6e6_1x400.png") 50% 50% repeat-x;
    font-weight: normal;
    color: #555;
} 
```

# iphone - 游戏结束后cocos2d分数不重置

> ID：11377794
> 
> 赞同：0
> 
> 时间：2012-07-07T18:58:08.190
> 
> 标签：iphone, ios5, xcode4, cocos2d-iphone

分数根本没有重置，我正在尝试制作一个高分计数器，每次你通过以前的高分时它都会更新。但是，即使在比赛结束后分数也会继续上升而不重置我想要高分直到被超越。我尝试在游戏中重设分数，但似乎没有什么好处。

游戏结束.m

```
 CGSize winSize = [[CCDirector sharedDirector] winSize];    
     _score = [[NSUserDefaults standardUserDefaults] integerForKey:@"score"];           

 _oldScore = -1;
  self.scoreLabel = [CCLabelTTF labelWithString:@"" dimensions:CGSizeMake(100, 50)        alignment:UITextAlignmentRight fontName:@"Marker Felt" fontSize:32];
_scoreLabel.position = ccp(winSize.width - _scoreLabel.contentSize.width,    _scoreLabel.contentSize.height);
 _scoreLabel.color = ccc3(255,0,0);
  [self addChild:_scoreLabel z:1];         

   if (_score > _oldScore) {

_oldScore = _score;

[_scoreLabel setString:[NSString stringWithFormat:@"score%d", _score]];

[[NSUserDefaults standardUserDefaults] setInteger:_oldScore forKey:@"score"]; 
```

. m hello world 文件（游戏文件）

```
 CGSize winSize = [[CCDirector sharedDirector] winSize];    
     _score = [[NSUserDefaults standardUserDefaults] integerForKey:@"score"];           

 _oldScore = -1;
  self.scoreLabel = [CCLabelTTF labelWithString:@"" dimensions:CGSizeMake(100, 50)        alignment:UITextAlignmentRight fontName:@"Marker Felt" fontSize:32];
_scoreLabel.position = ccp(winSize.width - _scoreLabel.contentSize.width,    _scoreLabel.contentSize.height);
 _scoreLabel.color = ccc3(255,0,0);
  [self addChild:_scoreLabel z:1];         

   if (_score > _oldScore) {

_oldScore = _score;

[_scoreLabel setString:[NSString stringWithFormat:@"score%d", _score]];

[[NSUserDefaults standardUserDefaults] setInteger:_oldScore forKey:@"score"];

_score =0; 
```

然而，分数一直在上升。我希望高分一直保持到超过

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:14:54.867

```
// get the previous highscore
  _previousScore = [[NSUserDefaults standardUserDefaults] integerForKey:@"score"];         
// get the current score from wherever you want
  int _currentScore???   
// check, if the current score is higher than the old
  if (_currentScore > _previousScore) {
// save the _currentScore in the userdefaults 
    [[NSUserDefaults standardUserDefaults] setInteger:_currentScore forKey:@"score"];
// now update you label with _currentScore
  } 
```

# iphone - 在根视图中隐藏导航栏？

> ID：11377798
> 
> 赞同：1
> 
> 时间：2012-07-07T18:58:47.620
> 
> 标签：iphone, cocoa-touch

我有一个应用程序，我试图复制我看到的 Apple Store 应用程序所做的事情，其中​​第一个视图没有导航栏，但后续视图有。

我尝试了将 navigationBarHidden 设置为 YES 和 NO 的各种组合来管理它何时可见，但关键问题似乎是在过渡期间，它要么可见要么不可见，而在 Apple Store 应用程序中，导航栏不在主视图中，而是从右侧与子视图一起滑入。

我正在寻找的是一种让导航栏与子视图一起滑入的方法，而不是在转换之前或之后出现（动画或不显示）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:04:12.043

原来我只是没有找到隐藏和显示导航栏的正确位置。

[当我从导航控制器推送时，我使用了如何隐藏导航栏](https://stackoverflow.com/questions/1617565/how-to-hide-when-i-push-from-navigation-controller?rq=1)的答案？它现在对我很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:37:41.390

在您的主视图中，初始化 childViewController。然后在 childViewController 上设置导航栏，推送视图控制器。

```
ChildVC *childVC = [[ChildVC alloc] initWithNibName:@"ChildVC" bundle:nil];
[self setChildVC:childVC];
childVC.navigationController.navigationBarHidden = NO;
[self.navigationController pushViewController:childVC animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T21:19:30.173

如果您在第一个选项卡“精选”上谈论他们在做什么，如果您点击列表中带有披露指示符的项目之一。它似乎从右到左在另一个视图中滑动。我认为他们正在使用动画来交换两个视图控制器。滑入的是导航控制器，这就是 NavBar 似乎从右侧滑入的原因。

你会做这样的事情来获得这种效果：

```
// First set up a view controller with frame set off to the right of the screen.
// Then animate it sliding to the left by setting its frame x = 0;

frame.origin.x = 0;
[UIView animateWithDuration:.4 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut
    animations:^{
        vc.view.frame = frame;
    }
    completion:nil]; 
```

# asp.net-mvc-3 - MVC3 Razor 和浏览器 (IE9) 后退按钮问题

> ID：11377801
> 
> 赞同：1
> 
> 时间：2012-07-07T18:58:58.670
> 
> 标签：asp.net-mvc-3, browser, razor

我正在开发一个 MVC 3 Razor 应用程序，当我单击浏览器中的后退按钮时遇到问题。我的应用程序工作流程：

1.  从下拉列表中选择设施
2.  WebGrid 会填充设施建筑物的列表。
3.  单击图像以编辑建筑物
4.  单击浏览器的后退按钮，将出现步骤 1 中的下拉列表，但没有 CSS 格式。如果我单击 F5 进行刷新，那么一切都会重置并且 CSS 格式会恢复。

我正在使用 VS2010 和以 IE9 作为默认浏览器的 ASP.NET 开发服务器。我已将 OutputCache 属性添加到控制器中的每个 ActionResult。

```
 [OutputCache(NoStore = true, Duration = 0, VaryByParam = "None")] 
```

这是我在从 PartialView 构建的 WebGrid 中的链接

```
 grid.Column(header: "", 
            format: @<text><a href="@Url.Action("Edit", "BuildingModels", new { @id = item.FACInventoriesId })"><img src="@Url.Content("~/Content/images/edit.png")"
                alt='Edit' title='Edit'  border='0'/></a></text>) 
```

当从编辑建筑物（第 4 步）中单击后退按钮时，如何让浏览器显示 WebGrid（第 2 步）？还有什么想法为什么我单击后退按钮时缺少 CSS 格式？

这是控制器代码：

```
 [OutputCache(NoStore = true, Duration = 0, VaryByParam = "None")]
    public ViewResult Index()
    {
        ViewBag.Systems = buildingsVM.GetSystemsList();

        return View();
    }

    [HttpPost]
    [OutputCache(NoStore = true, Duration = 0, VaryByParam = "None")]
    public ActionResult GetFacilityDetails(int systemId, string facilityId)
    {
        try
        {
            ViewBag.Systems = buildingsVM.GetSystemsList();

            var facility = buildingsVM.GetFacilityDetails(systemId, facilityId);

            facility.Buildings = buildingsVM.GetFacilityBuildings(systemId, facilityId);

            var bldgsHtml = ViewsUtility.RenderPartialViewToString(this, "_Buildings", facility.Buildings);

            TempData["CurrentFacility"] = facility;
            return Json(new { ok = true, facdata = facility, bldgs = bldgsHtml, message = "ok" });
        }
        catch (Exception ex)
        {
            return Json(new { ok = false, message = ex.Message });
        }
    }

    [HttpPost]
    [OutputCache(NoStore = true, Duration = 0, VaryByParam = "None")]
    public ActionResult GetSystemFacilities(int systemId)
    {
        try
        {
            var facilities = buildingsVM.GetFacilitesBySystemId(systemId);
            return Json(new { ok = true, data = facilities, message = "ok" });
        }
        catch (Exception ex)
        {
            return Json(new { ok = false, message = ex.Message });
        }
    }

    [OutputCache(NoStore = true, Duration = 0, VaryByParam = "None")]
    public ActionResult Edit(int id)
    {
        var facility = TempData["CurrentFacility"] as FacilityModel;

        return View(buildingsVM.GetBuilding(id));
    } 
```

部分视图的代码：

```
 @model IEnumerable<COPSPlanningWeb.Models.BuildingModel>
    <!-- Current Buildings from partial view -->
    @{              
    if (Model != null && Model.Count() > 0)
    {
    var grid = new WebGrid(rowsPerPage: 50, defaultSort: "BuildingNumber");  //ajaxUpdateContainerId: "tabs-2", 

    grid.Bind(Model, rowCount: Model.Count(), autoSortAndPage: false);
    grid.Pager(WebGridPagerModes.All);

@grid.GetHtml(
        tableStyle: "webgridDisplay",
        alternatingRowStyle: "alt",
        columns: grid.Columns(
        //grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { EmployeeID = item.EmployeeID, ContactID = item.ContactID })), 
        grid.Column("BuildingNumber", header: "Building Number", style: "webgridDisplayCenter"),
        grid.Column("ConstructionDate", header: "Construction Date", format: @<text>@item.ConstructionDate.ToString("MM/dd/yyyy")</text>),
        grid.Column("ExtSquareFeet", header: "Exterior Sq. Ft.", format: (item) => string.Format("{0:n0}", item.ExtSquareFeet)),
        grid.Column("IntSquareFeet", header: "Interior Sq. Ft.", format: (item) => string.Format("{0:n0}", item.IntSquareFeet)),
        grid.Column("IU_Avail", header: "IU Available"),
        grid.Column("SpaceAvail", header: "Space Available"),
        grid.Column("FixedAssetValue", header: "Fixed Asset Value", format: (item) => string.Format("{0:C}", item.FixedAssetValue)),
        grid.Column("FixedEquipValue", header: "Fixed Equipment Value", format: (item) => string.Format("{0:C}", item.FixedEquipValue)),
        grid.Column(header: "", 
            format: @<text><a href="@Url.Action("Edit", "BuildingModels", new { @id = item.FACInventoriesId })"><img src="@Url.Content("~/Content/images/edit.png")"
                alt='Edit' title='Edit'  border='0'/></a></text>),
        grid.Column(header: "", 
            format: @<text><a href="@Url.Action("Delete", "BuildingModels", new { @id = item.FACInventoriesId })"><img src="@Url.Content("~/Content/images/trash.png")"
                alt='Delete' title='Delete'  border='0'/></a></text>)
   ))
   }
   } 
```

编辑视图中的代码：

```
 @model COPSPlanningWeb.Models.BuildingModel
    @{
      ViewBag.Title = "Add/Edit Inventory";
    }

    @using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <table style="width: 100%;" class="display">
    @Html.HiddenFor(model => model.FacilityId)
    @Html.HiddenFor(model => model.FACInventoriesId)
    <tr>
        <th colspan="2" style="text-align: left;">
            Building Information - Edit Inventory
        </th>
    </tr>
    <tr>
        <td class="fieldlabel">
            Facility Name
        </td>
        <td class="fielddata">

        </td>
    </tr>        
    <tr>
        <td class="fieldlabel">
            Building Number
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.BuildingNumber)
            @Html.ValidationMessageFor(model => model.BuildingNumber)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            Construction Date
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.ConstructionDate, "DateTime")
            @Html.ValidationMessageFor(model => model.ConstructionDate)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            Exterior Sq. Ft.
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.ExtSquareFeet)
            @Html.ValidationMessageFor(model => model.ExtSquareFeet)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            Interior Sq. Ft.
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.IntSquareFeet)
            @Html.ValidationMessageFor(model => model.IntSquareFeet)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            IU Available
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.IU_Avail)
            @Html.ValidationMessageFor(model => model.IU_Avail)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            Space Available
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.SpaceAvail)
            @Html.ValidationMessageFor(model => model.SpaceAvail)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            Fixed Asset Value
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.FixedAssetValue)
            @Html.ValidationMessageFor(model => model.FixedAssetValue)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            Fixed Equipment Value
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.FixedEquipValue)
            @Html.ValidationMessageFor(model => model.FixedEquipValue)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            Total Fixed Asset Value
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.TotalFixedAssetValue)
            @Html.ValidationMessageFor(model => model.TotalFixedAssetValue)
        </td>
    </tr>
    <tr>
        <td class="fieldlabel">
            Total Fixed Equipment Value
        </td>
        <td class="fielddata">
            @Html.EditorFor(model => model.TotalFixedEquipValue)
            @Html.ValidationMessageFor(model => model.TotalFixedEquipValue)
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <table class="display" style="text-align: center;">
                <tr>
                    <td>
                        @Html.ActionLink("Add/Edit Spaces", "Index")
                    </td>
                    <td>
                        <input type="submit" value="Save Changes" class="button" />
                    </td>
                    <td>
                        @Html.ActionLink("Back to Buildings List", "Index")
                    </td>
                </tr>
            </table>

        </td>
       </tr>

     </table>
    } 
```

当我从编辑视图单击后退按钮时，我希望再次看到 WebGrid（构建列表），但我得到的第一个视图没有任何 CSS 格式。

感谢 Luis，我能够解决 CSS 格式问题，但是当我单击后退按钮时，我仍然看不到 WebGrid。我正在使用 JSON 来填充 WebGrid 这可能是问题吗？选择下拉列表中的项目后，我应该使用表单帖子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T01:20:07.750

我为 Intranet 制作应用程序时发生了类似的事情......但是，嘿，振作起来，至少你的公司使用 IE9......我不得不创造奇迹，试图让带有 JQuery 的 MVC3 Razor 应用程序与 IE7 一起工作......

好的，现在重要的是，我在 IE 的缓存中遇到了类似的问题，看来这个浏览器的缓存与普通新时代浏览器的工作方式“不同”，你可以试试这个：

按 F12 并转到选项卡`Cache`并检查`Always refresh from server`

然后检查一切是否正常，如果是，请告诉您的网络管理员为所有将使用您正在制作的新应用程序的 IE 浏览器制定新策略。

还要检查这个[https://superuser.com/questions/81182/how-to-force-internet-explorer-ie-to-really-reload-the-page](https://superuser.com/questions/81182/how-to-force-internet-explorer-ie-to-really-reload-the-page)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T09:37:52.703

您需要将 Location 添加到属性以使其与 IE9 一起使用

```
[OutputCache(Location = OutputCacheLocation.ServerAndClient, NoStore = true, Duration = 0, VaryByParam = "None")] 
```

# python - UnicodeDecodeError：“ascii”编解码器无法解码位置 0 的字节 0xc3：序数不在范围内（128）

> ID：11377806
> 
> 赞同：5
> 
> 时间：2012-07-07T19:00:02.900
> 
> 标签：python, google-app-engine, unicode, decode

我正在使用谷歌 appengine python 2.5。

我在以下代码上遇到 unicodedecoderor，因为我的用户名具有以下值

```
userName     = unicode(userName).encode('utf-8') # äºï¼égãwmj is value in this variable  

userName     = unicode(userName).encode('utf-8')
strData = '{\"Sid\" :1, \"Oppid\" :%s, \"Aid\" :%s, \"EC\" :\"%s\", \"Name\" :\%s"' % (enemyID, userID, userEmpCode,userName)

   params = {'deviceToken'   : oDeviceToken,
              'message'       : strMessage,
              'CertificateId' : certificateId,
              'Data'          : strData
             }

result = urlfetch.fetch(url = url,
             payload = urllib.urlencode(params),
             method  = urlfetch.POST,
             headers = {"Authorization" : authString},
             deadline = 30
             ) 
```

我正在对用户名执行以下步骤以将其编码为 utf-8，以便我可以将其作为有效负载发送。

```
username = unicode(username).encode(utf-8) 
```

我相信我打电话时会发生错误`urllib.urlencode(params)`

请指导出了什么问题..或者你可以..

以及在appengine python上处理unicode字符串的最终策略应该是什么。

我尝试了不同的解决方案阅读不同的线程..但仍然没有用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T19:21:10.480

你的问题似乎是你在`unicode(userName)`没有编码的情况下调用你已经编码的字符串，所以它“默认为当前的默认字符串编码”，这似乎是`ascii`你的情况。

在任何情况下，您可能都不应该调用`unicode`，如果您知道它是一个 unicode 值，那么您已经很好了，如果没有，请`.decode`使用正确的编码进行调用。
如果您不确定，请测试使用，`isinstance`因为尝试解码 unicode 值将导致另一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-30T16:34:04.963

在将 Python 3 代码从 Ubuntu Linux 14.04 移植到 FreeBSD 10.3 时，我遇到了类似的问题。在使用 Python 3.4.4 打开文件时，后一种系统似乎默认使用 ASCII 而不是 UTF-8。

`encoding='utf-8'`使用 file命令指定`open`解决了我的问题：

```
open('filepath', encoding='utf-8') 
```

# coffeescript - Coffeescript & rightjs，Div Click

> ID：11377807
> 
> 赞同：0
> 
> 时间：2012-07-07T19:00:08.860
> 
> 标签：coffeescript, sinatra, rightjs

我在 sinatra 工作，使用 Coffeescript 和 rightjs。

在 html 的正文中，我有一个 div

```
<div id="loginimage">
<img src="/images/login.png">
</div> 
```

和一个页脚元素

```
<footer>
<div id="footer">
<form action="/login" class="login" method="post">
</form>
</div>
</footer> 
```

最后我的咖啡脚本看起来像：

```
$(document).onReady ->
  "#loginimage".onClick ->
    "#footer".toggle "fade" 
```

我希望能够单击 id 为 loginimage 的 div 并切换页脚元素，现在我让它切换 id 为页脚的 div，我如何选择像页脚这样的 html5 元素？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:10:35.043

我对 RightJS 不太熟悉，但我怀疑您只是`<footer>`在字符串中使用普通选择器：

```
$(document).onReady ->
  "#loginimage".onClick ->
    "footer".toggle "fade" 
```

没有哈希（`id`选择器），没有点（类选择器），只有元素名称。RightJS的[String 文档](http://rightjs.org/docs/string)甚至包括如下内容：

```
"div.something".addClass('marked');
"div#something".highlight(); 
```

所以大概你正在调用 RightJS 方法的字符串只是任何旧的选择器。

# c++ - C++ 对象构造函数通过 const 引用复制传递

> ID：11377811
> 
> 赞同：1
> 
> 时间：2012-07-07T19:00:22.953
> 
> 标签：c++, reference, constructor, copy, constants

当我将一个对象作为 const 引用传递给另一个对象时，是否制作了副本？我一直假设，因为我通过引用传入对象，所以成员对象本身实际上是我传入的对象，而不是副本。我制作了一个测试程序，导致传入的引用对象在作用域结束时被销毁，但它并没有像我预期的那样崩溃。这是一个等待发生的错误还是对象被复制？

```
#include <iostream>
#include <string>

class Something
{
public:
    Something(const std::string& str) : mStr(str) {}
    const std::string& str() const
    {
        return mStr;
    }
private:
    std::string mStr;
};

int main()
{
    Something* something;
    {
        std::string temp = "Testing.";
        something = new Something(temp);
    }

    std::cout<<something->str()<<"\n";
    delete something;
    return 0;
} 
```

那个 std::string 仍然有效还是被删除了？（在对象本身）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T19:04:49.183

数据成员`mStr`是类型`std::string`的（它是一个对象，而不是一个引用）。

因此，当您在构造函数的初始化列表（通过`: mStr(str)`）中对其进行初始化时，通过引用传递的参数将被*复制*。在您的示例中，只有初始化会导致制作副本：如果您删除了初始化，则不会制作任何副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T19:04:36.920

`temp`变量的内容被复制到`mStr`. 代码有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T19:04:59.093

你是对的，除了你错过了 mStr(str) 复制 str 的事实。该副本在 ~Somthing(); 中被销毁；

# twitter-bootstrap - Twitter bootstrap - IE 中的左右边距

> ID：11377813
> 
> 赞同：0
> 
> 时间：2012-07-07T19:00:55.683
> 
> 标签：twitter-bootstrap

我正在使用来自 twitter 的最新引导程序。我正处于设计网站的早期阶段。

问题是，当我在除 IE 7-8 之外的其他浏览器上查看网站时，它看起来还可以，但在 IE 7-8 上，正文的左右两侧都有额外的边距，因此所有内容都变得奇怪并相互重叠。

我不知道为什么会这样

请协助

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:42:41.593

我找到了一个方法！

在 IE 中，我通过添加填充和边距来移动跨度​​...不确定它是否正确，但它可以工作（跨度 7 是我的左列，跨度 5 是我的右列）！

```
<!--[if gte IE 5]> 
```

.span7 { margin-left:-150px } .span5 { padding-left:150px }

```
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:51:40.960

导致此布局问题的原因可能是 IE7 和 IE8 不支持媒体查询。

如果您在大型显示器上查看页面，并且它属于媒体查询@media (min-width: 1200px)，则 IE7/8 可能不会获取任何由它分配的宽度/边距/填充 CSS 值媒体查询。

查看这是否是问题的一个好方法是将[GitHub 上](https://github.com/scottjehl/Respond)的 Scott Jehl 的 respond.js 下载到您的 js 目录中。它曾经包含在 Modernizr 中，但我认为它现在是可选的添加。基本上它提供了有关媒体查询的 IE7/8 知识。

我从页面的头部调用它，在现有的条件注释中为 IE 加载 HTML5shim。

```
<script src="js/respond.min.js"></script> 
```

加载后，您将看到它产生的布局差异。

希望这可以帮助。

# jquery - 简单，JQUERY：如何在点击超链接时显示弹出窗口？

> ID：11377820
> 
> 赞同：1
> 
> 时间：2012-07-07T19:02:04.650
> 
> 标签：jquery

我的 aspx 标记为

```
<div class="sm08" id="dialog" title="Dialog Title"><asp:Literal ID="litTerms" runat="server"></asp:Literal></div> 
```

和

```
<asp:HyperLink ID="hp" runat="server" NavigateUrl="#">HyperLink</asp:HyperLink> 
```

如何在点击超链接时加载弹出窗口？目前，弹出窗口显示在页面加载时。

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#dialog").dialog({modal: true, buttons: { "Ok": function() { $(this).dialog("close"); } }});
    });
  </script> 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:17:04.007

将点击监听器添加到您的链接：

```
$('#hp').click(function(e){
   e.preventDefault();
   $('#dialog').dialog('open'); 
}); 
```

此外，您还需要将“autoOpen”设置为“false”：

```
$("#dialog").dialog({autoOpen: false, modal: true, buttons: { "Ok": function() { $(this).dialog("close"); } }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:05:13.503

尝试这个：

```
$(document).ready(function () {
    $('#hp').on('click', function(e){
       e.preventDefault() // prevents the default action of the anchor link
       $("#dialog").dialog({modal: true, buttons: { "Ok": function() { $(this).dialog("close"); } }});
    })
}); 
```

# php - 如何正确地将依赖项（服务）注入 Symfony2 中的非服务类？

> ID：11377823
> 
> 赞同：3
> 
> 时间：2012-07-07T19:02:17.623
> 
> 标签：php, symfony, dependency-injection

我已`Symfony2`多次阅读本书中的服务容器章节，并阅读了有关该主题的 SO 答案和其他资源，但我似乎仍然不明白。

到目前为止，我读到的所有内容都在我脑海中钻了一个主要事实：容器本身（实际上）不应该直接注入到依赖项中。这似乎可以很好地为其他服务提供依赖关系，但是如果我的模型中的实体想要检查当前的安全上下文怎么办？

我知道在这种情况下我可以实现`ContainerAwareInterface`然后`setContainer()`从容器感知上下文中调用以获取对容器本身的访问权限，但这与从服务配置中注入容器不同，这是完全要避免的费用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:27:18.867

你所描述的只是糟糕的设计。您的模型不应依赖于服务容器。如果您需要执行一些安全检查，那么您将创建一个注入了必要依赖项的服务，然后将您的模型对象传递给它。

通过您的示例，听起来您正在尝试进行此处描述的验证[http://symfony.com/doc/master/book/validation.html](http://symfony.com/doc/master/book/validation.html)并且就像我所说的那样工作。

# python - 将搜索条件传递给 imaplib 的解析错误

> ID：11377826
> 
> 赞同：0
> 
> 时间：2012-07-07T19:02:30.860
> 
> 标签：python, imaplib

这可能是一个新手问题，但我无法弄清楚为什么我不能成功地将参数化搜索条件传递给 imaplib。

设置代码是：

```
M = imaplib.IMAP4_SSL("imap.gmail.com", 993)
M.login("usrname", "passwd") 
typ, data = self.M.select()   # Select default mailbox 
```

以下作品：

```
typ, data = M.uid('search', None, '(SENTSINCE 01-Jan-2010)') 
```

但是，如果我尝试将搜索条件作为字符串传递，我会得到

```
imaplib.error: UID command error: BAD ['Could not parse command'] 
```

这是失败的代码：

```
f = "'(SENTSINCE 01-Jan-1994)'"
typ, data = M.uid('search', None, f) 
```

我尝试了很多语法，请阅读 RFC3501。这是字符集问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-02T10:09:02.003

您需要将日期放在引号内，您的代码将是：

```
typ, data = M.uid('search', None, '(SENTSINCE "01-Jan-2010")') 
```

# git - 在裸存储库上执行 git 命令

> ID：11377827
> 
> 赞同：8
> 
> 时间：2012-07-07T19:02:32.037
> 
> 标签：git, git-bare

在我的服务器上，我托管了一些我正在处理的裸 git 存储库。我想在我的网站上显示有关每个存储库的一些基本统计信息；现在，假设我想做一些简单的事情，比如列出存储库中的所有文件。在非裸 git 存储库上，这可以通过

```
git ls-files 
```

但是对于裸存储库，这个（以及大多数其他 git 命令）不起作用。我确信可能有一种简单的方法来执行这个特定的命令，但我可能想为不同的存储库显示一些复杂的/项目特定的统计信息，所以我真的在问是否有办法执行任何/所有 git裸存储库上的命令，而不必进行临时克隆或类似的复杂操作。我怀疑我需要设置一些命令参数，但我还没有弄清楚是哪一个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T07:27:35.417

你可以运行这个：

```
git ls-tree -r HEAD --name-only 
```

显然，您必须指定分支或引用，因为在裸存储库中没有工作树或索引。

我不知道其他命令，但实际上您可以在裸存储库中执行大部分命令，但那些需要工作树的命令。

# jquery - jquery如果宽度小于，改变这个attr

> ID：11377831
> 
> 赞同：1
> 
> 时间：2012-07-07T19:03:01.073
> 
> 标签：jquery, resize, width

```
 $(".section").each(function(i, el){
    var section = $('.section');
    var width = section.width();
    if (width < 960)
        section.attr('class', 'section-slim');
}); 
```

这似乎工作正常，在浏览器刷新时，我如何使它在调整大小时起作用？例如：如果有人把他们的浏览器窗口变小，它会添加这个类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T19:05:33.753

将事件绑定到 jQuery 的“resize”事件

```
$(window).on("resize load", function () {
    $(".section").each(function(i, el){
    var section = $('.section');
    var width = section.width();
    if (width <= 960) {
        section.attr('class', 'section-slim');
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:07:19.277

将您的代码放在一个通用函数中，而不是从 window.resize() 调用它

```
$(window).resize(function() { //you can call your function here
    // do something here
}); 
```

# mysql - Oracle MySQL 等效代码

> ID：11377835
> 
> 赞同：0
> 
> 时间：2012-07-07T19:03:19.950
> 
> 标签：mysql, database, oracle, pagination

执行以下操作的等效 Oracle(11g) 代码是什么：

> 对于 MySQL

```
ps = con.prepareStatement("select SQL_CALC_FOUND_ROWS from student_details where UPPER(name) like UPPER(?) limit " + offset + ", " + noOfRecords); 
```

和`rs = ps.executeQuery("SELECT FOUND_ROWS()");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:40:28.453

试试这样：

```
SELECT *
FROM (select t.*, rownum rn, count(*) over() as SQL_CALC_FOUND_ROWS
        from student_details t
       where UPPER(name) like UPPER(?))
WHERE rn <= offset 
```

“SQL_CALC_FOUND_ROWS”中返回的值将是如果没有该`WHERE rn <= offset`子句将被选择的记录数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:08:21.903

我在您的声明中看到的唯一两个特定于 RDBMS 的东西是“upper()”和“limit”。

这是使用 Oracle “rownum” 作为 “limit” 解决方法的链接：

*   [https://forums.oracle.com/forums/thread.jspa?threadID=415724](https://forums.oracle.com/forums/thread.jspa?threadID=415724)。

“Upper()”在 Oracle 中应该可以正常工作。

# javascript - javascript 代码在 IE 和 Chrome 中有效，但在 Firefox 中无效

> ID：11377841
> 
> 赞同：1
> 
> 时间：2012-07-07T19:03:47.787
> 
> 标签：javascript, internet-explorer, google-chrome, firefox

以下代码片段在 IE 和 Chrome 中有效，但在 Firefox 中无效，我不知道为什么。

对于此代码段，当在 IE 和 Chrome 中打开时，网页中会出现两个指向 Google 的链接，但在 Firefox 中什么也没有出现。它位于正文标记中的脚本标记中。

```
var varOne = document.createElement("a")
varOne.setAttribute("href", "http://www.google.com")
varOne.innerText = "Google"
document.body.appendChild(varOne) //attach the node to the body

var varOne = document.createElement("a")
varOne.setAttribute("href", "http://www.google.com")
varOne.textContent = "Google"
document.getElementById("bodyID").appendChild(varOne) //attach the node to the body 
```

对于这个，您单击按钮转到 yahoo.com。当您按下浏览器的后退按钮时，您会返回到先前的页面，但 javascript 将再次运行，迫使浏览器返回到 yahoo。一旦您离开了原始页面，您将无法返回并停留在那里而不会被重定向到 yahoo。这就是在 IE 和 Chrome 中发生的事情（我只是为了学习目的），但我不明白为什么它在 Firefox 中不起作用。当您从 Yahoo 返回原始页面时，Firefox 不会像其他两种浏览器那样强制浏览器前进。

```
<body>
<form>

    <input type="button" onclick="javascript: window.location='http://www.yahoo.com' "/>

</form>

<script type="text/javascript">

    alert("Problem?")
    window.history.forward()     
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:08:09.283

尝试传入`1`方法`forward`：

```
window.history.forward(1); 
```

如果它不起作用，那么您可能不走运，因为这似乎是浏览器制造商之间的***可用性灰色区域***。允许`JavaScript`（不是用户）在没有他/她直接参与的情况下更改当前页面是一个可用性问题——类似于不断触发*弹出/弹出*窗口。

# javascript - iPhone 的函数中断脚本（新手）

> ID：11377849
> 
> 赞同：1
> 
> 时间：2012-07-07T19:04:53.617
> 
> 标签：javascript, iphone, function

出于某种原因，以下代码破坏了我的整个 Javascript 页面。（适用于 iPhone）。

```
function validate(){
    var ablebuttoncheck = document.getElementById('ablebutton').innerHTML;
    var datebuttoncheck = document.getElementById('datebutton').innerHTML;

    if (ablebuttoncheck =! "Select Date" && datebuttoncheck =! "Select Action"){
        document.save.savebutton.disabled=false;
    }
} 
```

如果您需要完整代码，请参见此处： http: [//pastebin.com/R2rQa4s8](http://pastebin.com/R2rQa4s8)

在我的 iPhone 上，我单击按钮，但没有任何反应。我只想强制用户在提交表单之前同时按下两个按钮并选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:09:12.350

你可能的意思是：

```
if (ablebuttoncheck != "Select Date" && datebuttoncheck != "Select Action")
{
        document.save.savebutton.disabled=false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T20:01:13.617

你得到了相反的方式（我的意思是按钮文本）。试试这个：

```
if (ablebuttoncheck != "Select Action" && datebuttoncheck != "Select Date")
{
        document.save.savebutton.disabled=false;
} 
```

# ruby-on-rails - 导入 CSV 和编码

> ID：11377854
> 
> 赞同：1
> 
> 时间：2012-07-07T19:05:37.223
> 
> 标签：ruby-on-rails, ruby

我使用 Rails 3.2 和 CSV 库来导入 CSV 文件。我这样使用它：

```
CSV.foreach(open(csv_url), :headers => true) do |p| 
```

当我在本地计算机上运行它时，它工作正常，但由于某种原因，它在 Heroku 上的某些记录失败并出现错误：

```
incompatible character encodings: ASCII-8BIT and UTF-8 
```

它在我定义的仅附加两个字符串的方法中失败：

```
def name_and_brand
  "#{name} #{brand.name}"
end 
```

它只在某些记录上失败，而不是全部。

我已经阅读了很多关于此的信息，但我仍然没有弄清楚如何解决它。

如果我只是输出我正在解析的文本的编码，它会在我的本地计算机上说它是`UTF-8`，但在 Heroku 上它会说`ASCII-8BIT`。

如果我`"a".encoding`在控制台中运行，它也会输出`UTF-8`，Heroku`UTF-8`也会输出。

**到目前为止我尝试过的**

```
# in application.rb
config.encoding = "utf-8"

# in environment.rb
Encoding.default_external = Encoding::UTF_8
Encoding.default_internal = Encoding::UTF_8

# in other files
# encoding: UTF-8 
```

我发现的一个区别是 Heroku 使用 Ruby 1.9.2，而我在本地机器上使用 1.9.3。会是这样吗？

有什么想法我可以尝试更多吗？

**编辑**

我发现您可以通过添加`ruby "1.9.3"`gemfile 来明确选择 heroku 上的 ruby​​ 版本。似乎解决了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:58:29.587

我必须通过添加`ruby "1.9.3"`我的 Gemfile将 ruby​​ 版本显式更改为 1.9.3

# spring - Spring STS Maven 如何避免从公共存储库下载 jars

> ID：11377855
> 
> 赞同：0
> 
> 时间：2012-07-07T19:05:43.650
> 
> 标签：spring, maven, sts-springsourcetoolsuite, pom.xml, repository

我正在使用 Spring STS (sts-springsourcetoolsuite) 进行开发，在我的公司中，不允许从 Internet/公共存储库下载 jar。在我的 pom.xml 中，我没有指定像[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)这样的公共存储库，但是它会自动引用这个公共存储库。

我无法理解如何避免从未指定的存储库下载 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:18:54.717

我假设您的公司有内部 Maven 存储库，并且只允许使用那个？基于[排除中央存储库线程](http://maven.40175.n5.nabble.com/Exclude-central-repository-td107349.html)，您所要做的就是将您的内部存储库命名`central`为`settings.xml`.

# python - 如何在没有count（）的情况下计算查询集中的项目数

> ID：11377856
> 
> 赞同：13
> 
> 时间：2012-07-07T19:05:44.283
> 
> 标签：python, django

我想计算我的查询集中返回的项目数。例如

`userdesigns = Design.objects.filter (desadder = user.id)`

我想在**不**使用 count() 的情况下获取返回的对象数。

原因是我试图提高性能并减少我执行的数据库查询的数量，我注意到使用 count() 会 ping 数据库，这是我不想要的。考虑到我已经提取了完整的用户设计，不应该有一种方法来计算存储在返回的查询集中的项目数量吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-07T19:24:28.440

> *伦（）*。当您在其上调用 len() 时，将评估 QuerySet。如您所料，这将返回结果列表的长度。
> 
> 注意：如果您只想确定集合中的记录数，请不要在 QuerySets 上使用 len()。使用 SQL 的 SELECT COUNT(*) 在数据库级别处理计数要高效得多，而 Django 正是出于这个原因提供了一个 count() 方法。请参阅下面的 count()。

[来源](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)

因此，如果您调用`len(userdesigns)`而不是`userdesigns.count()`，django 将在单个查询中从表中请求所有相关数据。之后您可以访问所有`userdesigns`变量项，不会进行其他查询。

```
>>> m = Model1.objects.filter(desadder=1)
>>> len(m)
(0.000) SELECT "app1_model1"."id", "app1_model1"."desadder", "app1_model1"."test" FROM "app1_model1" WHERE "app1_model1"."desadder" = 1 ; args=(1,)
2
>>> m[0]
<Model1: Model1 object>
>>> m = Model1.objects.filter(desadder=1)
>>> len(m)
(0.000) SELECT "app1_model1"."id", "app1_model1"."desadder", "app1_model1"."test" FROM "app1_model1" WHERE "app1_model1"."desadder" = 1 ; args=(1,)
2
>>> m[0]
<Model1: Model1 object>
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T06:21:28.080

Riateche 回答了这个问题，但如果您不想直接在 QuerySet 上使用 len() 或 .count()，则可以返回 values_list 并在其上使用 len()。

Django 文档说：

[https://docs.djangoproject.com/en/dev/ref/models/querysets/](https://docs.djangoproject.com/en/dev/ref/models/querysets/)

> 当您知道只需要来自少数可用字段的值并且不需要模型实例对象的功能时，ValuesQuerySet 很有用。

我怀疑这是否更快，但是您总是可以计时并查看。如果您只想返回表中可用字段总数的子集，它可能会很有用。

# video - 从 UYVY422 到 YUV420P 的 FFmpeg 转换

> ID：11377857
> 
> 赞同：7
> 
> 时间：2012-07-07T19:06:07.723
> 
> 标签：video, ffmpeg, h.264, video-processing

我有 UYVY422 格式的原始视频，我想将其转换为 YUV420p。我正在执行该命令（）

```
ffmpeg -y -r 25.0 -f rawvideo -s 1920x1080 -pix_fmt uyvy422 -i input.avi -pix_fmt yuv420p -f avi -r 25 -s 1920x1080 output.avi 
```

我的输出视频似乎浮动（视频的右侧开始出现在左边缘，并且从左向右移动）

有没有人知道我做错了什么？我试图将输出视频设置为原始格式，但它不起作用...\

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-25T13:11:55.447

> ffmpeg -y -r 25.0 -f rawvideo -s 1920x1080 -pix_fmt uyvy422 -i input.avi -pix_fmt yuv420p -f avi -r 25 -s 1920x1080 output.avi

这里的问题是源是一个 AVI 文件。它可能包含原始 YUV 帧，但它不是原始 YUV 文件，它周围仍然有 AVI 标头等。您告诉它将其解析为原始 YUV 文件，这就是您看到滚动帧的原因。

我只需删除 -i 之前的所有选项，然后它应该可以正常工作：

```
ffmpeg -i input.avi -pix_fmt yuv420p -c:v rawvideo -an -s 1920x1080 -y output.avi 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T07:17:32.713

对于 ffmpeg，我认为您需要告诉它直接复制，否则它将尝试对输出进行编码。尝试添加`-vcodec copy`选项：

```
ffmpeg -y -r 25.0 -f rawvideo -s 1920x1080 -pix_fmt uyvy422 \
       -i input.avi **-vcodec copy** -pix_fmt yuv420p -f avi -r 25 \
       -s 1920x1080 output.avi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-24T18:17:58.643

我刚刚做了从 yuv420p 到 yuv444p 的转换。我不是 100% 确定这将适用于你的情况，但它可能会。值得一试：

windows中的命令行：

> > ffmpeg.exe -y -pix_fmt yuv420p -s 1920x1080 -r 30 -i ldr_420.yuv -f rawvideo -pix_fmt yuv444p -s 1920x1080 -r 30 ldr_444.yuv

Linux 中的命令行： $./ffmpeg -y -pix_fmt yuv420p -s 1920x1080 -r 30 -i ldr_420.yuv -f rawvideo -pix_fmt yuv444p -s 1920x1080 -r 30 ldr_444.yuv

在您的情况下，请将输入和输出 -pix_fmt 替换为所需的格式。

# android - 项目 apk 在现实世界的设备上崩溃

> ID：11377859
> 
> 赞同：0
> 
> 时间：2012-07-07T19:06:23.677
> 
> 标签：android, android-layout, android-intent, android-emulator

我的android项目有问题！我创建了一个偏好意图，它在模拟器中运行良好。但是当我通过手机的菜单键传输项目并启动首选项时，它停止工作并关闭！我想知道它是怎么回事！

我的设备是：Xperia Mini Pro --> Running Android ICS 4.0.4

代码是，

偏好类：

```
package com.sliit.droidman.main;

import com.sliit.droidman.R;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Prefs extends PreferenceActivity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs);
}
} 
```

偏好 xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
 <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
 <EditTextPreference
    android:title="Edit text"
    android:key="name"
    android:summary="enter your name"
 ></EditTextPreference>
 <CheckBoxPreference
    android:title="Music"
    android:defaultValue="true"
    android:key="checkbox"
    android:summary="check this box"
 ></CheckBoxPreference>
 <ListPreference
    android:title="list"
    android:key="list"
    android:summary="this is a list to choose from"
    android:entries="@array/list"
    android:entryValues="@array/lValues"
 ></ListPreference>
 </PreferenceScreen> 
```

偏好被调用的地方：

```
 SharedPreferences getprefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    boolean music = getprefs.getBoolean("checkbox", true);
    if (music == true) {
        splashmp3.start();
    } 
```

我在这里做错了什么！我对模拟器没有任何问题！但是设备存在问题！由于我以前有一个以相同方式开发的应用程序，所以我在设备中运行它，它在首选项上运行良好。但是这股力量关闭了。我是否必须授予任何权限！哦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:11:56.997

我发现是什么导致了错误。这是我在开关盒中创建首选项意图的错误。:) 我打错了类名。所以我纠正了它，现在它就像魔术一样工作！

```
 switch (item.getItemId()) {
    case R.id.about:
        startActivity(new Intent(this, About.class));
        break;
    case R.id.prefs:
        Intent prefs = new Intent("com.cdap.droidman.PREFS");
        startActivity(prefs);
        break;
    case R.id.exit:
        finish();
        break;
    } 
```

# php - 我应该在 htmlspecialchars 中使用哪些标志？

> ID：11377861
> 
> 赞同：0
> 
> 时间：2012-07-07T19:06:46.200
> 
> 标签：php, html, security, escaping

> **可能重复：**
> [html_entity_decode 上的 ENT_HTML5、ENT_HTML401、... 修饰符有什么作用？](https://stackoverflow.com/questions/13745353/what-do-the-ent-html5-ent-html401-modifiers-on-html-entity-decode-do)

当使用 htmlspecialchars 转义转到 html 属性的输出时，我想知道哪个标志是正确的。

这似乎`ENT_QUOTES`比`ENT_COMPAT`如果有人不小心添加了一些带有单引号属性的代码不会失败，那么它为什么会`ENT_COMPAT`存在呢？有缺点 `ENT_QUOTES`吗？

`ENT_HTML5`另外，使用`ENT_XHTML`或`ENT_HTML401`根本不设置有 什么安全隐患？

# css - IE7 CSS 悬停问题

> ID：11377863
> 
> 赞同：0
> 
> 时间：2012-07-07T19:07:07.577
> 
> 标签：css, internet-explorer-7

我创建了两个菜单，一个水平下拉菜单和一个垂直菜单，它们在 IE8、Chrome 和 Firefox 中都可以正常工作，但我在 IE7 中遇到了一个奇怪的问题。

您可以在此处查看 jsfiddle：http: [//jsfiddle.net/5y7vt/3/](http://jsfiddle.net/5y7vt/3/)

在水平菜单上的 IE7 中，将鼠标悬停在链接 2 上会出现下拉菜单，但是当您向下移动下拉菜单时，它会在下面的垂直导航上方消失。

此外，下拉链接仅悬停在文本上，而不是块的其余部分。

有没有人能够查看并了解为什么会发生这种情况？

**答：**去除位置：相对；来自 #nav ul li {} 修复了下拉问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T20:10:36.750

`position: relative;`从`#nav ul li {}`已修复的下拉问题中移除

# c - 为什么我的文件输出乱码？

> ID：11377865
> 
> 赞同：2
> 
> 时间：2012-07-07T19:07:23.410
> 
> 标签：c, file-io

当我读入一个文件然后输出到一个新文件时，输出是乱码，我试图找出原因。

我正在尝试运行以下代码

```
#include<stdio.h>
#include<stdlib.h>
int main(int argc ,char *argv[])
{
    int c;
    FILE *of;
    FILE *f;
    of=fopen(argv[2],"w");
    f=fopen(argv[1],"r");
    while(c=getc(f)!=EOF)
        putc(c,of);
    fclose(of);
    fclose(f);
    return 0;

 } 
```

但是当我按如下方式运行它时 `$./a.out temp new`

where`temp`是一个现有文件，其内容是： `this is a temp file`并且`new`在运行程序之前不存在

但是现在当我 cat 时，`new`它的内容都搞砸了，为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T19:08:39.390

```
while(c=getc(f)!=EOF) 
```

需要括号，

```
while( (c=getc(f)) != EOF) 
```

的优先级`!=`高于 assignment的优先级`=`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T20:05:15.673

```
 while(c=getc(f)!=EOF)
        putc(c,of); 
```

让我们看看你的代码在 while 循环中做了什么；在警卫中，您写道

```
c=getc(f) !=EOF 
```

的优先级`!=`高于`=`，所以真正发生的是

```
c=(getc(f) !=EOF) 
```

，这意味着您正在以`of`1 的序列写入，即`getc(f) != EOF`，直到找到 EOF。

如前所述，您要写的内容可能是

```
(c = getch(f)) != EOF 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-07T19:11:00.270

我不确定我是否正确，但您不认为 c 应该是**char**而不是**int**吗？

# iphone - iPhone iOs 5，根据内容高度动态更改滚动查看器的高度不起作用？

> ID：11377866
> 
> 赞同：0
> 
> 时间：2012-07-07T19:07:38.110
> 
> 标签：iphone, ios, ios5, uiscrollview

我正在做的是从数据库中获取数据。然后我想将该数据添加到文本视图中并将这些文本视图添加到滚动查看器中。

但是什么都没有出现。我知道有数据，但只是没有显示。很可能我错过了设置的东西。

```
- (void)viewDidLoad
{
    NSUInteger height = 0;

    for (NSUInteger i = 0; i < [data count]; i++){
        DBMiscData *row = (DBMiscData *) [data objectAtIndex:i];

        if (row.text != nil){
            UITextView *tv = [[UITextView alloc] init];
            [tv setFont:[UIFont boldSystemFontOfSize:12]];
            tv.text = row.text;
            [_scrollerView addSubview:tv];
            [tv sizeToFit];
            height+=(NSUInteger)tv.frame.size.height;
        }
    }

    [_scroller setScrollEnabled:YES];
    [_scrollerView setFrame:CGRectMake(0, 0, 320, height)];
    [_scroller setContentSize:CGSizeMake(320, height)];
    [_scroller addSubview:_scrollerView];

    [super viewDidLoad];
} 
```

**更新的代码和我所追求的**

我想要的和我在 android 中的一样简单。

android:layout_width="fill_parent" 和 android:layout_height="wrap_content"。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T20:14:08.697

`CGRectFromString(aString)`不会返回您适合该文本的矩形。如果您有一个类似 的字符串`{{5, 10}, {100, 130}}`，该方法将为您创建一个 CGRect ，它将具有 origin =`CGPointMake(5,10)`和 size = `CGSizeMake(100,130)`。如果你有一个像 'bananas' 这样的字符串。由此产生的 CGRect 将始终是`CGRectZero`（又名 CGRectMake(0,0,0,0) ）。

这就是为什么你的身高为零。

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T20:10:38.153

这可能听起来很傻，但如何使用

```
height+=(NSUInteger)tv.frame.size.height; 
```

代替

```
height+=(NSUInteger)tv.bounds.size.height; 
```

# javascript - 满足 javascript/jquery 条件时显示 DIV（包括 jsFiddle 链接）

> ID：11377869
> 
> 赞同：2
> 
> 时间：2012-07-07T19:08:05.107
> 
> 标签：javascript, jquery, css

当“休息”时间倒计时时钟达到 10 时，我希望“休息”div 显示并显示在“显示”div 上，导致“显示”div 被覆盖。当休息时间达到 5 时，我希望“休息” div 隐藏，使“显示” div 重新出现。

[http://jsfiddle.net/n2learning/9FPG8/2/](http://jsfiddle.net/n2learning/9FPG8/2/)

任何帮助都会很棒，DK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T20:25:39.533

我认为解决了

[http://jsfiddle.net/9FPG8/10/](http://jsfiddle.net/9FPG8/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T20:29:17.550

小提琴更新了。 [http://jsfiddle.net/9FPG8/11/](http://jsfiddle.net/9FPG8/11/)

```
CSS
    #rest.onTop {
        position:absolute;
        top:0;
        left:0;
    } 
```

JS

```
 if(time == 10){
              document.getElementById("rest").className="onTop";              
        } else if(time == 5){
             document.getElementById("rest").style.display="none";
        } else if(time == 0) {
            el.innerHTML = "Times up!";    
            clearInterval(interval);
            return;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T21:12:33.497

我也解决了这个问题。div 位置必须设置为绝对，'display' div 的位置也使用 javascript 计算。

这是[我更新的解决方案](http://jsfiddle.net/lalatino/9FPG8/14/)。我还使用 gaurang 的解决方案简化了代码：

```
function countdown(element, minutes, seconds) {
...
        var eld = document.getElementById('display');
        var eldp = getElementPosition(eld);
        if(time == 10){
            el.style.top = eldp.top+'px';
            el.style.left = eldp.left+'px';
            el.style.position = 'absolute';
        } else if (time == 5){
            el.style.display='none';
        }
...
    function getElementPosition(Elem) {
        var offsetLeft = 0, offsetTop = 0;
        do {
            if ( !isNaN( Elem.offsetLeft ) ) {
                offsetLeft += Elem.offsetLeft;
                offsetTop += Elem.offsetTop;
            }
        } while( Elem = Elem.offsetParent );
        return {top: offsetTop, left: offsetLeft };
    } 
```

元件位置的测量取自[这里](https://stackoverflow.com/a/5598797/1422309)。

# r - 如何让 R 的 lapply（和 mclapply）恢复随机数生成器的状态？

> ID：11377872
> 
> 赞同：12
> 
> 时间：2012-07-07T19:08:11.957
> 
> 标签：r, random, lapply, mclapply

R 忽略`.Random.seed`lapply 内部的设置。但是，使用`set.seed`效果很好。

一些代码：

```
# I can save the state of the RNG for a few seeds
seed.list <- lapply( 1:5, function(x) {
                        set.seed(x)
                        seed.state <- .Random.seed
                        print( rnorm(1) )
                        return( seed.state )}) 
#[1] -0.6264538
#[1] -0.8969145
#[1] -0.9619334

# But I get different numbers if I try to restore 
# the state of the RNG inside of an lapply
tmp.rest.state <-  lapply(1:5, function(x) { 
                        .Random.seed <- seed.list[[x]]
                        print(rnorm(1))})
# [1] -0.2925257
# [1] 0.2587882
# [1] -1.152132

# lapply is just ignoring the assignment of .Random.seed
.Random.seed <- seed.list[[3]]
print( rnorm(1) ) # The last printed value from seed.list
# [1] -0.9619334
print( rnorm(1) ) # The first value in tmp.rest.state
# [1] -0.2925257 
```

我的目标是检查点 MCMC 运行，以便它们可以准确地恢复。我可以轻松保存 RNG 的状态，只是无法让 R 在 lapply 循环中加载它！

有没有办法强制 R 注意到设置`.Random.seed`？或者有没有更简单的方法来实现这一点？

万一这很重要，我使用的是 64 位 R：

```
R version 2.15.1 (2012-06-22) -- "Roasted Marshmallows"
Platform: x86_64-pc-linux-gnu (64-bit) 
```

在 Ubuntu 12.04 LTS 上：

```
nathanvan@nathanvan-N61Jq:~$ uname -a
Linux nathanvan-N61Jq 3.2.0-26-generic #41-Ubuntu SMP Thu Jun 14 17:49:24 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T19:24:47.840

发生这种情况是因为`.Random.seed`在您的调用中被评估为本地对象`lapply`。

您需要`.Random.seed`在全局环境中分配 的值：

```
tmp.rest.state <- lapply(seed.list, function(x) {
    assign(".Random.seed", x, envir=globalenv())
    print(rnorm(1))
  }
)

[1] -0.6264538
[1] -0.8969145
[1] -0.9619334
[1] 0.2167549
[1] -0.8408555 
```

您的代码不起作用的原因是`.Random.seed`在匿名函数的环境中分配`lapply`，但在全局环境中`rnorm()`查找。`.Random.seed`

* * *

作为记录，这是我的第一次尝试，它只在某些情况下有效：

这是修复它的一种方法，使用`<<-`. （是的，我知道这是不赞成的，但可能是合理的。另一种方法是`eval()`在调用环境中使用和强制评估。

```
tmp.rest.state <- lapply(seed.list, function(x) {
    .Random.seed <<- x
    print(rnorm(1))
  }
)

[1] -0.6264538
[1] -0.8969145
[1] -0.9619334
[1] 0.2167549
[1] -0.8408555 
```

请注意，如果您`lapply()`嵌套在另一个函数中，则此解决方案将不起作用，因为`<<-`仅在父环境中评估，而不是在全局环境中评估。

# c# - 怎么能Func 返回函数 ?

> ID：11377881
> 
> 赞同：3
> 
> 时间：2012-07-07T19:09:16.357
> 
> 标签：c#, .net, generics

我正在玩一个 undo-redo 实现，我希望它的堆栈上的一个 undo 或 redo 项包含对某个`Func<out TResult>`地方的引用，`TResult`它本身就是一个`Func<TResult>`. 关键是当`Func`从撤消堆栈调用时，返回值然后存储在重做堆栈中（反之亦然）。

我不确定是否可以这样做，因此这个问题。

正如您在此处看到的那样，我能想到的最好的方法都行不通：

```
struct UndoRedoItem
{
    public Func<Func<Func<Func<Func<Func<......>>>>>> UndoOrRedoFunc;
    public string Description;
    ... 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:17:59.317

正如您所发现的，让 undo Func 直接返回 redo Func 是行不通的，因为所需的类型参数会无限增长。您需要做的是引入一个间接级别，例如，让 undo Func 返回 UndoRedoItem 以放置在重做堆栈上，而不仅仅是重做 Func：

```
struct UndoRedoItem
{
    public Func<UndoRedoItem> UndoOrRedoFunc;
    public string Description;
    ... 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T19:38:13.417

您应该研究命令模式以实现您想要的。

一个命令封装了执行某个任务的所有信息。因此很容易撤消或重做它（可能会产生一些保持未封装在 Command 对象中的状态的开销）

这里有一些链接：

[撤消/重做的命令模式](http://www.codeproject.com/Articles/8303/Using-the-Command-pattern-for-undo-functionality)

[C#中的多级撤消/重做](http://www.codeproject.com/Articles/33384/Multilevel-Undo-and-Redo-Implementation-in-C-Part)

# android - Web 服务 SOAP 到 JSON

> ID：11377883
> 
> 赞同：0
> 
> 时间：2012-07-07T19:09:27.510
> 
> 标签：android, json, web-services, soap

到目前为止，我可以在我的 Android 应用程序（使用 kSOAP2 库）中使用 SOAP 使用一些 WS，但是当我阅读 JSON 比 XML 更轻量级并且 Android 提供对 JSON Web 服务的本机支持时，我想知道它是否可以使用使用 JSON 的相同 WS？

还是应该在服务器端进行一些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:28:41.477

服务器端需要生成 JSON 输出——许多 REST 服务都会这样做。所以是的，服务器端需要改变。SOAP 是 XML - 没有办法解决这个问题。

# php - 登录脚本的主要支持

> ID：11377884
> 
> 赞同：-2
> 
> 时间：2012-07-07T19:09:37.033
> 
> 标签：php, session, cookies, login

每当我将页面更改为喜欢博客或论坛时，它就会失去会话。然后我点击登录，它有会话，所以它说你已经登录了。支持吗？---> [http://www.kdogisthebest.webege.com/](http://www.kdogisthebest.webege.com/)

用户名：demouser

密码：demouser

登录.php

```
<?php session_start();  require_once('connections/Main.php');

if($_SESSION['username']) {

    echo '<div class="error_message">Attention! You, '.$_SESSION['username'].' are already logged in.</div>';   echo "<br />";  echo "Go <a target='top' href='index.php'>back</a> to the page you were viewing before this.</li>";     
exit(); } 
```

.../// 跳过数据库检查 ///...

```
// Check that at least one row was returned 
    $rowCheck = mysql_num_rows($result); 

    if($rowCheck > 0) { 
    while($row = mysql_fetch_array($result)) { 

      // Start the session and register a variable 
      if(isset($_POST['remmemberme'])){
          setcookie(kitbusername, $uesr, time()*24);
      }
      $_SESSION['username'] = $user;
      //session_register('username'); 

      echo '<script> parent.document.location.href = "index.php"; </script>';

      } ?> 
```

注销.php

```
<?php 
session_start();
// unset cookies
if (isset($_SERVER['HTTP_COOKIE'])) {
    $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
    foreach($cookies as $cookie) {
        $parts = explode('=', $cookie);
        $name = trim($parts[0]);
        setcookie($name, '', time()-1000);
        setcookie($name, '', time()-1000, '/');
    }
}
if($_SESSION['username']) {
session_unset(); 
session_destroy(); 
header("Location: index.php"); } 
else { header("Location: index.php"); } ?> 
```

头文件.php

```
<div id="loginoutbox" class="ablack"> 
```

```
<div style="display: inline-block; font-size: 14px; padding-left: 20px;">Hello <?php  if($_COOKIE['kitbusername']) { echo $_COOKIE['kitbusername'];} else {echo $_SESSION['username'];} ?>! | </div>
<a id="register" href="http://www.kdogisthebest.webege.com/admin/" class="button">Dashboard</a> |
<a id="signin" href="#fallr-confirmlike" class="button">Logout</a>      
<?php }else{ ?>
<div style="display: inline-block; font-size: 14px; padding-left: 20px;">Hello Guest!</div>
<a id="register" href="#fallr-register" class="button">Register</a> |
<a id="signin" href="#fallr-signin" class="button">Login</a>
<?php } ?>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:35:32.907

我注意到变量 $user 在 setcookie 函数中被拼写为 $uesr。如果这不是您的意图，那可能就是问题所在。

# javascript - 在 Opera 扩展中监控 http 请求

> ID：11377886
> 
> 赞同：0
> 
> 时间：2012-07-07T19:09:42.287
> 
> 标签：javascript, jquery, opera

如何在 Opera 扩展中监控对特定网页的请求？例如，如果向我发送请求，`*://*.example.com/change.php*`我想更新一个变量。我也可以单独使用 javascript 监控对特定网页的请求吗？请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:38:33.330

[Opera URL 过滤器 API](http://dev.opera.com/articles/view/extensions-api-urlfilter/)会有所帮助。[您还可以阅读有关使用 Opera 的 URL 过滤器 API 阻止站点](http://dev.opera.com/articles/view/site-blocking-with-operas-url-filter-api/)的文章以及代码示例。

# python - python中变量的生命周期

> ID：11377888
> 
> 赞同：0
> 
> 时间：2012-07-07T19:09:43.017
> 
> 标签：python, variables, lifetime

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

考虑以下两个函数

```
def a(var=[0]):
    print (var)
    var = var + [4]

def b(var=[0]):
    print (var)
    var.append(4) 
```

它们的行为应该相同，但更重要的是，如果不带参数调用，两者都应该简单地打印“[0]”。行为非常不同，只有 a() 会一直打印 '[0]'。

```
>>> a()
[0]
>>> a()
[0]
>>> a()
[0]

>>> b()
[0]
>>> b()
[0, 4]
>>> b()
[0, 4, 4] 
```

为什么 a() 与 b() 的功能不同？

如果您希望在没有参数传递给函数的情况下使用默认值覆盖变量，那么您似乎无法使用列表 API。如果你这样做，该函数将“记住”变量以前是什么。

**我的代码中的情况出现在递归函数中，因此仅“删除”不需要的变量并不会真正起作用。每次调用不带参数的函数时，有没有办法覆盖变量？**

经过数小时的研究，我发现了这一点。它可能与上述问题有关，并可能导致答案。我们可以像这样定义一个生命周期类：

```
class lifetime:   # adapted from http://naml.us/blog/tag/variable-lifetime
    def __init__(self, name):
        self.name = name
        print ('creating: ' + name)
    def __del__(self):
        print ('destroying: ' + self.name)
    def __iadd__(self, a):
        self.append(a)
    def append(self, a):
        self.name += ' and ' + a.name
        print('appending: ' + a.name + ' to ' + self.name) 
```

然后定义2个函数：

```
def a(var=lifetime('a')):
    print (var)
    var += life('appendage')

def b(var=lifetime('b')):
    print (var)
    var.append(life('appendage'))

>>> a()
<__main__.lifetime object at 0x00000000031FFA90>
creating: appendage
appending: appendage to a and appendage
destroying: appendage
>>> a()
<__main__.lifetime object at 0x00000000031FFA90>
creating: appendage
appending: appendage to a and appendage and appendage
destroying: appendage
>>> b()
<__main__.lifetime object at 0x00000000031FFB38>
creating: appendage
appending: appendage to b and appendage
destroying: appendage
>>> b()
<__main__.lifetime object at 0x00000000031FFB38>
creating: appendage
appending: appendage to b and appendage and appendage
destroying: appendage 
```

似乎它只是对参数的默认值进行一次评估，然后使用该评估的任何值。它从不说“正在创建：a”或“正在创建：b”。所以也许如果每次都评估默认参数，它会导致对实际问题的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:14:35.903

正如您所说，这些默认值仅在声明函数时评估一次。这就是为什么将列表或散列文字分配为默认值绝不是一个好主意，因为您只会获得所有函数调用的一个实例。

[此处](http://www.deadlybloodyserious.com/2008/05/default-argument-blunders/)描述了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:15:50.260

这两个函数的行为不同，因为在第一个中，您将局部变量重新定义`var`为`[0] + [4]`（不附加到用 初始化的原始列表`[0]`），而在第二个中，您实际上是在附加到该原始初始化列表以将其从`[0]`to 中获取`[0, 4]`。正如您所提到的 - 默认值仅评估一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T19:16:22.447

因为这两个代码片段做了两个本质上不同的事情。`var + [4]`创建一个包含添加列表内容的新列表`var`，`4`然后我们将这个新列表分配给`var`. `var.append(4)`另一方面，将数字 4 附加到现有列表中。

您的问题是`var=[0]`只评估一次然后重用，因为您`append`更改了变量本身，您将在以后的调用中看到效果。其他代码仅将新对象分配给局部变量，以后不会产生影响。

通常你不使用可修改的默认值，而是写：

```
def foo(var=None):
    if var is None: var = [0] 
```

如果您需要记住早期调用的数据，请将整个函数放入一个类中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T19:18:05.243

如果你这样写，可能更容易想象正在发生的事情

```
t1 = [0]
def a(var=t1):
    print (var)
    var = var + [4]

t2 = [0]
def b(var=t2):
    print (var)
    var.append(4) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T19:17:50.760

这很简单。在第一个函数中`a()`，您正在将“名称”重新分配`var`给一个新列表，其中包含旧的`var`和的内容`[4]`。在第二个函数中`b()`，您正在访问实际`var`对象而不更改名称所指的内容。`b()`有关为什么以这种方式响应的解释，请参阅此问题： [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/q/1132941/1142167)

# ios - 使用文本字段时，我试图让键盘在 IOS 中消失

> ID：11377890
> 
> 赞同：0
> 
> 时间：2012-07-07T19:09:54.383
> 
> 标签：ios, uitextfield

我试图让数字键盘在 IOS 中消失。我已经添加了下面的代码来完成这个，它只是一种工作。我必须选择文本或双击才能让键盘消失。完成此操作后，我单击返回文本框，然后它就可以正常工作了。

```
- (IBAction)didBeginEditingPointsText:(id)sender
{
    self.tap = [[UITapGestureRecognizer alloc] initWithTarget:self

                                                       action:@selector(dismissKeyboard)];
    [self.view addGestureRecognizer:self.tap];
}

-(void)dismissKeyboard
{
    [self.pointsText resignFirstResponder];
    [self.view removeGestureRecognizer:self.tap];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:14:10.763

将此添加到您的 viewDidLoad

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self.nameTextField action:@selector(resignFirstResponder)];
gestureRecognizer.cancelsTouchesInView = NO;
[self.view addGestureRecognizer:gestureRecognizer]; 
```

# html - 需要修复站点的宽度以删除水平滚动条

> ID：11377892
> 
> 赞同：0
> 
> 时间：2012-07-07T19:10:08.197
> 
> 标签：html, css, width

我只是想删除单杠。我正在以 1280x800 分辨率浏览网站，所以无论如何都不应该有水平条。

它发生在 chrome、firefox 和 safari 中。

您可以访问该网站：http: [//ilmioforno.com](http://ilmioforno.com)

我的代码是，

```
 body {
background: #f1eee3;
color: #111;
margin: 0;
   }
 #page {
   border: solid black 4px;
   clear: both;
}

 #wrap { 
   clear: both; 

    }

 #content {
    margin: 0 auto;
    padding: 20px;
    border-radius: 10px;
    moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    background: #b63b3b;
    border: 3px solid #942a2a;
    color: #51301f;
    font-size: 13px;
    width: 65%;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:16:46.223

好吧，您可以使用 CSS 属性 overflow-x 例如：

```
#content
{
overflow-x:hidden;
} 
```

它将删除水平滚动条...

你可以在这个网站上试试 [http://www.w3schools.com/cssref/css3_pr_overflow-x.asp](http://www.w3schools.com/cssref/css3_pr_overflow-x.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T19:18:41.273

问题是`div#nav`它有一个`span-24`将宽度设置为 950px，而你也有 360px 的左边距。这有效地产生了 1310px 的总宽度，因为您没有隐藏任何包含元素的溢出。您需要调整导航的宽度。我假设你的整体听众/页面是 950，所以这意味着你的导航应该`950 - 360 = 590`最多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T19:14:50.933

`maring-left`从中删除`#nav`：

```
#nav {
   color: #51301F;
   /*maring-left: 360px;*/
   margin-top: -120px;
   font-weight: bold;
   font-size: 22px;
   text-transform: uppercase;
   background: none;
} 
```

并将其添加到`.menu`：

```
.menu{
   maring-left: 360px;
} 
```

# java - 如何在 Java 桌面应用程序中显示每分钟左右重新加载的内容？

> ID：11377894
> 
> 赞同：3
> 
> 时间：2012-07-07T19:10:18.610
> 
> 标签：java, swing, netbeans

创建 java swing 应用程序的屏幕部分的最佳策略是什么，它每分钟都会用来自网页的新信息重新绘制自己？（例如雅虎股票报价）谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T19:13:05.227

**1.**创建一个**与GUI线程分离的线程**（即Event Dispatcher Thread）。

**2.**让它**延迟60秒**调用给雅虎股票的服务，使用`Thread.sleep(60000);`

**3.**打电话`repaint();`

**编辑：**

```
new Thread(new Runnable(){

   public void run(){

    try{
          while (true){

        Thread.sleep(60000);
        yahoo() // CALL TO YAHOO SENSEX 

        repaint();
          }
       }catch(Exception ex){

         }
 }).start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:02:32.830

代替单独的线程 或`java.util.Timer`，用于调整数据模型的更新速度，如此[处](https://stackoverflow.com/a/5048863/230513)[`javax.swing.Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)所示。优点是“Swing 计时器的任务在事件调度线程中执行”。

![图片](../Images/8cf2da507d1e5e1f1ada86cd020dda43.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T19:38:52.663

您可以开始一个新的`Thread`，在这个线程执行中，您可以将事件放在事件堆栈上，如下面的示例所示。以这种方式实现更安全，因为将从事件调度线程调用 GUI 更新。更多信息[在这里](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFoQFjAB&url=http%3A%2F%2Fwww.javamex.com%2Ftutorials%2Fthreads%2Finvokelater.shtml&ei=3ov4T_OTMfPc4QSp1tj1Bg&usg=AFQjCNEL4l-AP_ri1sN9pAjhn0WNoCx9Cg&sig2=Z3QRVQkWmD9c3WgdZSxGSA)。

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class SpringcConc {

    final static JLabel label = new JLabel("INITIALIZED ...");

    public static void main(final String[] s) {

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame myJframe = new JFrame();
                myJframe.add(label);
                myJframe.pack();
                myJframe.setVisible(true);
                instituteThreads();
            }
        });

    }

    protected static void instituteThreads() {
        Thread queryThread1 = new Thread() {
            @Override
            public void run() {
                while (true) {
                    try {
                        sleep(500);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    SwingUtilities.invokeLater(new Runnable() {
                        public void run() {
                            label.setText("THREAD 1 UPD");
                        }
                    });
                }
            }
        };
        queryThread1.start();
        Thread queryThread2 = new Thread() {
            @Override
            public void run() {
                while (true) {
                    try {
                        sleep(750);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    SwingUtilities.invokeLater(new Runnable() {
                        public void run() {
                            label.setText("THREAD 2 UPD");
                        }
                    });
                }
            }
        };
        queryThread2.start();
    }

} 
```

另一种方法是使用[Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class SwingTimer {

    public static void main(final String[] args) {
        final JLabel label = new JLabel("INITIALIZED");
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame jFrame = new JFrame();
                jFrame.add(label);
                jFrame.pack();
                jFrame.setVisible(true);
                jFrame.setBounds(200, 200, 100, 50);
            }
        });
        new Timer(500, new ActionListener() {
            public void actionPerformed(final ActionEvent e) {
                label.setText("UPDATE 1");
            }
        }).start();
        new Timer(750, new ActionListener() {
            public void actionPerformed(final ActionEvent e) {
                label.setText("UPDATE 2");
            }
        }).start();
    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T19:13:15.250

`Timer`与类一起使用以`TimerTask`定期执行一些操作。并将“更新”事件发送到应用程序的视图组件（以 MVC 表示法）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T19:13:26.930

可能是使用新线程的最佳解决方案，下载信息并自行重新绘制..

# macos - Play 2.0(.2) IntelliJ Mac OS x play-specific 标记为错误（红色）

> ID：11377900
> 
> 赞同：2
> 
> 时间：2012-07-07T19:11:17.077
> 
> 标签：macos, intellij-idea, playframework-2.0

我正在使用当前的 IntelliJ-Version 11.1.x（并且（！）尝试使用当前的 EAP 12.0-Version！启动 32 位和 64 位），在 Mac OSx（版本 10.6.8）下运行并使用 Java 版本1.6.0_15（我将 IntelliJ 项目设置中的 SDK 版本设置为 1.6.0_15 Java 版本）。

我现在的问题是，所有特定于游戏的内容（注释、公共静态结果...）都被标记为错误（红色）。

在将它与 IntelliJ 一起使用之前，我从控制台做了一个“游戏创意”，并用 IntelliJ 打开了项目......所以它被记录在案。

我不知道 :-( 寻求帮助。谢谢！

# cakephp - CakePHP SUM 与 GROUP BY 的关联模型

> ID：11377902
> 
> 赞同：1
> 
> 时间：2012-07-07T19:11:32.567
> 
> 标签：cakephp, model, cakephp-2.2

我有一个收费的`Invoice`模型。`hasMany`每次我收到发票时，它都会返回所有相关费用（`Charge`是一个模型`belongsTo` `Invoice`）。我想要的是还退还`SUM`每张发票的所有费用。

我尝试使用以下虚拟字段，但它返回了所有费用的总和（不是发票）。

```
//In Charge model
public $virtualFields = array(
    'total_charges' => 'SUM(Charge.amount)'
); 
```

我的虚拟字段是否不正确（我认为它需要`GROUP BY`某个地方）？我的模型中有更好的选择吗？

我正在使用 CakePHP 2.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:33:16.160

我通过在模型中使用`afterFind`回调找到了答案。`Invoice`这是我正在使用的功能：

```
public function afterFind($results) {
    foreach ($results as $key => $val) {
        if (isset($val['Charge'])) {
            $total = 0;
            foreach ($val['Charge'] as $charge) {
                $total += $charge['amount'];
            }
            $results[$key]['Invoice']['total_charges'] = $total;
        }
    }
    return $results;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:47:21.163

这直接取自 CakePHP 书：

> # 虚拟字段的限制
> 
> 的实现`virtualFields`有一些限制。首先，您不能`virtualFields`在关联模型上使用条件、顺序或字段数组。这样做通常会导致 SQL 错误，因为字段不会被 ORM 替换。这是因为很难估计可以找到相关模型的深度。
> 
> 此实现问题的常见解决方法是 `virtualFields`在运行时在需要访问它们时从一个模型复制到另一个模型：
> 
> ```
> <?php
> $this->virtualFields['full_name'] = $this->Author->virtualFields['full_name']; 
> ```
> 
> 或者：：
> 
> ```
> <?php
> $this->virtualFields += $this->Author->virtualFields; 
> ```

相反，也许你可以用 php 而不是通过 sql 来计算费用？

# python - 在python多维关联数组中迭代一个键

> ID：11377908
> 
> 赞同：0
> 
> 时间：2012-07-07T19:11:57.357
> 
> 标签：python, loops, dictionary, iterator, associative-array

我正在动态创建一个二维关联数组（字典？）

我正在尝试遍历它的键 - 同时保持一个索引不变，例如，所有与“键”相关联的值都在其第一个括号中带有“约翰”：

```
myhash['john']['smith'] = "address 1"
myhash['john']['doe'] = "address 2" 
```

如何获取每个“键”的所有哈希键，将第一个索引保持为“约翰”（我想要所有姓氏）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T19:15:51.893

`myhash['john']`本身就是一本字典。（您不是在创建一个多维字典，而是一个字典字典。）

因此...

```
last_names = list(myhash['john']) 
```

或者如果你想在循环中做某事......

```
for last_name in myhash['john']:
    # do something with last_name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T20:30:43.033

[我在回答您之前的问题](https://stackoverflow.com/questions/11378048/iterate-over-a-single-dimension-in-python-dictionary)时已经提到过：看起来您正在尝试重新发明方轮。鉴于您声明的需求，您可能也希望查找姓氏部分，然后返回到第 1 步（按顺序浏览整个数据集测试“2nd-level”键）或维护“lastname”索引存储 lastname:[firstname1, firstname2, firstnameN] 减少（但不抑制）顺序浏览并且需要在任何插入或删除时更新。

IOW 您正在重新实现关系数据库可以做的大部分事情，而且您的实现不太可能比更便宜的 RDB 更快或更健壮。作为记录，有非常轻量级的基于文件的（不需要服务器进程等）RDB 引擎，如 SQLite3（[Python 绑定在 stdlib 中，](http://docs.python.org/library/sqlite3.html#module-sqlite3)因此您甚至不必安装任何特殊的东西）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T19:16:06.310

```
>>> for k in myhash['john']:
...     print(k)
... 
smith
doe 
```

# http - AFNetworking 连接丢失后恢复 HTTP 操作

> ID：11377910
> 
> 赞同：1
> 
> 时间：2012-07-07T19:12:52.777
> 
> 标签：http, connection, afnetworking

我想问一下 AFNetworking 库是否在由于连接丢失而无法完成 http 操作的自动恢复时提供某种支持。

举个例子，我想排队更多的http post操作，每一个都用来上传一张图片：如何管理连接丢失的情况（我想知道是否有任何代码会重新启动未完成连接可用时操作）？

```
 NSURL *remoteUrl = [NSURL URLWithString:UPLOAD_SERVER_URL];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:remoteUrl];
[httpClient setParameterEncoding: AFJSONParameterEncoding];
[httpClient setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) {
    NSLog(@"Conenction lost...");
}];
NSMutableURLRequest *afRequest = [httpClient multipartFormRequestWithMethod:@"POST" 
                                                                       path:@"/upload/" 
                                                                 parameters:[photoBean asDictWithoutImageData]
                                                  constructingBodyWithBlock:^(id <AFMultipartFormData>formData) 
                                  {                                    
                                      [[photoBean asDict] enumerateKeysAndObjectsUsingBlock:^(NSString *key, id obj, BOOL *stop) {
                                          if ([key isEqualToString:@"media"])
                                          {
                                              [formData appendPartWithFileData: obj name:@"media" fileName:photoBean._imageFile mimeType:@"image/jpeg"];
                                          }

                                      }];

                                  }
                                  ];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:afRequest];
[operation setCompletionBlock:^{
    NSLog(@"%@", operation.responseString); //Gives a very scary warning
}];

[operation start]; 
```

谢谢！

# c - 如何将打包在数组中的有序（LDR）二叉树转换回C +处理文件中的二叉树

> ID：11377913
> 
> 赞同：1
> 
> 时间：2012-07-07T19:13:13.843
> 
> 标签：c, text-files, binary-tree

考虑一下我已经有一个函数调用`int* binToArrayInOrder(TreeRoot* tr)`它创建一个排序的树值数组（因为它是有序的）。

无论如何从给定的数组中构造回树，**而没有**其他信息，例如前序数组中的相同树表示？

如何将数组写入 C 中的文本文件，请给我看代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:22:20.890

[1] 您可以再次将数组元素重新插入二叉树。但是，根据平衡算法，树可能看起来与您将它们提取到数组中时的样子并不完全相同。

[2] 这个怎么样？

```
void print_array (int *array, size_t sz, FILE *f) {
    if (!sz) return;
    fprintf(f, "%d\n", *array);
    print_array(array+1, sz-1, f);
} 
```

根据您的评论，您的实际问题是如何将二叉树保存到磁盘，然后将其恢复。这是一个数据结构序列化问题。对于这个问题，有序遍历可能不是您想要的。相反，序列化应该反映数据结构的布局方式。因此，您需要一个描述二进制节点的记录：

```
struct binary_node_file_data {
    char data_[MAX_BINARY_NODE_DATA_SIZE];
    int parent_;
}; 
```

现在，您可以执行二叉树的预遍历以填充您的节点。

```
struct binary_node_fila_data *bfd = malloc(sizeof(*bfd)*nodeCount);
int count = 0;
populate_binary_node_file(tree, bfd, &count, -1);

void populate_binary_node_file(binary_tree_t *tree,
                               struct binary_node_file_data *bfd,
                               int *count,
                               int parent) {
    if (tree) {
        int me = *count;
        *count += 1;
        export_binary_node_data(tree, &bfd[me], parent);
        populate_binary_node_file(tree->left_subtree, bfd, count, me);
        populate_binary_node_file(tree->right_subtree, bfd, count, me);
    }
} 
```

在这里，我希望`-1`被视为`NULL`指针。然后，将其转储`bfd`到文件中。我将把恢复树作为练习。再考虑一下这个问题，遍历是前序还是有序（或后序）并不重要。恢复步骤只需要能够让所有孩子找到父母，以便他们可以正确填充左右指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:22:34.423

对于第一个问题：不，节点的有序列表不允许您重建同一棵树。

例如，树

```
 3
 2
1 
```

产生中序遍历 1 2 3

那个树

```
 2
1 3 
```

也产生 1 2 3。因此，您无法分辨使用哪棵树来产生给定的 1 2 3。

对于第二个问题：对不起，我还没有使用过 STL 文件 I/O。

# ios - 我可以在视频中添加 UIImage 或 CGImageRef 吗？

> ID：11377917
> 
> 赞同：0
> 
> 时间：2012-07-07T19:13:31.410
> 
> 标签：ios, cocoa-touch, video, uiimage, avfoundation

我想在视频之间添加图像，就像笑脸或剪贴画一样。笑脸和剪贴画很可能有动画。

我提到了 [在库中查找资产 - 添加到 AVMutableComposition - export = crash](https://stackoverflow.com/questions/6579315/find-assets-in-library-add-to-a-avmutablecomposition-export-crash)以及 Apple 的`ALAssetLibrary`. 但无法获得任何想法来完成我的要求。

是否有任何功能可以将`UIImage`s 和`CGImageRef`s 添加到 a 中`AVMutableComposition`？

如何将图像添加到视频中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:13:28.810

it has been done with CALayer.

If anyone wants to add UIImage in video file than please add as a CALayer,

also add textlayer..

many thanks to this [Link](https://stackoverflow.com/questions/7205820/iphone-watermark-on-recorded-video#7205820)

Cheers..... :)

# javascript - Javascript 号码放置和如何，4 = 0.04, 14 = 0.14, 100 = 1.00

> ID：11377918
> 
> 赞同：-3
> 
> 时间：2012-07-07T19:13:44.047
> 
> 标签：javascript, html, math, numbers

我正在尝试编写一个自定义计算器，但我无法计算出一个数字，我希望能够在输入的数字之前添加小数点。

例如，如果用户输入 4，我希望字符串中的值看起来像 0.04，依此类推 14 = 0.14, 100 = 1.00。

我尝试使用内置函数
var num = 4; fig = num.toFixed(2);

但这不起作用，我能想到的唯一方法是使用 if(val.length >2){ do something; } 这将是一个很长的路要走。有没有人对此有任何想法？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:18:24.473

```
>>> [4, 14, 100].map(function(n) { return (n / 100).toFixed(2) })
["0.04", "0.14", "1.00"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:16:16.550

这个怎么样？

```
var num = 4; var fig = num * 0.01; 
```

# android - 以编程方式将组件添加到现有 xml 文件

> ID：11377920
> 
> 赞同：0
> 
> 时间：2012-07-07T19:14:05.810
> 
> 标签：android, xml, listview, layout

我有一个已经在 XML 中定义的布局。我想添加一个 ListView 来显示保存文件中的变量数据。

数据的大小不固定，现有数据可以由用户编辑，所以我不确定你是否可以将其存储在 res 中。

由于我缺乏知识，我觉得以编程方式创建布局组件更有利（listview），而其他组件最好通过 xml 文件完成。

有没有一种方法可以同时使用 xml 和 java 来创建布局？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:35:25.947

您实际上不需要动态创建 ListView。

您可以在 xml 文件中以静态方式定义 ListView。在您的 java 代码中，您需要将**适配器**附加到该 ListView 并且您的列表将自动包含与适配器中一样多的项目。

我认为您可能需要通过一些基本的 ListView 示例才能完全理解我要说的内容。

查看此链接以获取有关 ListView 的分步教程：[http ://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

由于您的问题实际上是关于向 xml 动态添加元素**（您不需要这样做来实现您想要对 ListView 执行的操作。我只是为了您的知识而回答）**，这就是您的方式这样做：

```
 TextView textView = new TextView(YourClass.this);

        textView.setLayoutParams(....); // specify the Layout Parameters

        textView.setPadding(60, 10, 0, 10);
        textView.setTextAppearance(getBaseContext(), R.style.TitleTextStyle); 
```

如果您想在任何布局中创建多个项目，请参阅以下示例代码，该代码在动态创建的 LinearLayout 中添加了一个 Image 和一个 TextView。

```
 LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(1);
    ImageView iv1 = new ImageView(this);
    iv1.setImageResource(R.drawable.control);
    TextView txtTab1 = new TextView(this);
    txtTab1.setText("BLah Blah BLAh");
    txtTab1.setPadding(8, 9, 8, 9);
    txtTab1.setTextColor(Color.parseColor("#8B4513"));
    txtTab1.setTextSize(30);
    txtTab1.setBackgroundResource(R.drawable.control);
    txtTab1.setGravity(Gravity.CENTER_HORIZONTAL);

    ll.addView(iv1,0);
    ll.addView(txtTab1,1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:23:49.913

您仍然应该将 ListView 放入您的 xml 文件中。您可以通过在 java 中定义一个 Adapter 并加载您想要的任何数据来使其动态化。

将 ListView 添加到 XML 不会删除您使用动态数据填充它的能力。

# java - 有没有其他方法可以从另一个班级重绘？

> ID：11377923
> 
> 赞同：0
> 
> 时间：2012-07-07T19:14:14.610
> 
> 标签：java, repaint

我正在尝试从另一个类中重新绘制（）。我知道一种方法：

```
//FromClass.java:
SomeClass whatever = new SomeClass(this);

    //SomeClass.java:
        FromClass f;
        public SomeClass(FromClass from){ //constructor
        f = from;
    }
    //after a long part of code
    f.repaint(); 
```

有没有其他方法可以做到这一点，在类构造函数中没有任何参数？对不起我的技术英语，还在学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:41:58.383

有许多方法可以在类之间共享信息。我相信你演示的方法是最有效的。以下是一些其他选项：

*   `SomeClass`创建一个 的子类，以便`FromClass`它继承 中定义的所有方法`FromClass`。然后创建一个实例`FromClass`并调用该变量的方法。您的类声明如下所示：

    ```
    class SomeClass extends FromClass {
        ...
        super.repaint();  
        .... 
    ```

*   制作`FromClass`一个接口并实现它：

    ```
    public interface FromClass {
        void repaint();
    }

    class SomeClass implements FromClass {
        repaint(); 
    ```

只是一些其他的选择。:)

# ruby-on-rails - Rails - 播种 HABTM 协会

> ID：11377929
> 
> 赞同：7
> 
> 时间：2012-07-07T19:14:59.800
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, has-and-belongs-to-many, seed

```
Equipment.create(name: "Room to run")
Equipment.create(name: "Pull-up bar")
Workout.create(
  description: "Do 100 pull-ups then run 5km",
  :equipment => Equipment.where(:name => 'Pull-up bar')) 
```

设备和锻炼具有 HABTM 关系。上面的种子代码有效，但我怎样才能在第一个设备关联的同时分配第二个设备关联？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T19:25:48.140

在 where 条件下，可以使用数组：

```
Equipment.create(name: "Room to run")
Equipment.create(name: "Pull-up bar")
Workout.create(
  description: "Do 100 pull-ups then run 5km",
  :equipment => Equipment.where(:name => ['Pull-up bar', 'Room to run'])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-14T18:18:34.100

在种子文件中，这个简单的列表适用于产品和类别（HABTM）关系。这是超级字面和有效的。

```
Product.find(1).categories << Category.find(4)
Product.find(1).categories << Category.find(5)
Product.find(2).categories << Category.find(5) 
```

# javascript - 使用 RegExp 增加文本区域中的数字

> ID：11377930
> 
> 赞同：0
> 
> 时间：2012-07-07T19:15:13.273
> 
> 标签：javascript, regex

我有一个文本区域（ID为'work'），方括号中有连续的数字，如下所示：

```
[6] [7] [8] [9] [10] 
```

我希望在按下按钮时，每个按钮都应该增加 1，如下所示：

```
[7] [8] [9] [10] [11] 
```

我如何在 Javascript 中执行此操作？我写了以下内容，但它不起作用：

```
addOne = function() {
    var work = document.getElementById('work');
    var re = /\[\d+\]/g
    var arr = re.match(work.value);
    var len = arr.length;
    var pat = /\d+/
    var begin = pat.exec(arr[0]); 
    var last = pat.exec(arr[len-1]);
    for (i=begin;i<=last;i++) {
        var re1 = new RegExp("[i]"); 
        var re2 = new RegExp("[i++]");
        var newval = work.value.replace(re1,re2);
        work.value = newval;
    }
} 
```

除了这些数字之外，文本区域还可能有其他文本。请在这里帮助我。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:19:09.530

我将[`.replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)与 RegExp 和回调函数结合使用（演示：http: [//jsfiddle.net/veYTt/](http://jsfiddle.net/veYTt/)）：

```
var work = document.getElementById('work');
work.value = work.value.replace(/\[(\d+)(?=\])/g, function(full_match, i) {
    return '[' + ++i;
}); 
```

我使用`++i`, 因为从字符串`++i`转换`i`为数字，并返回值`i + 1`。另一种选择是`(i + 1*1)`.

正则表达式的解释：

*   `\[`匹配`[`。
*   `(\d+)`匹配并捕获任何整数。该组作为第二个参数传递给回调函数，我将其命名为`i`.
*   `(?=\])`是前瞻。当先前匹配的字符后跟时，它会导致模式匹配`]`。

# java - RESTEasy - 如何为 ClientRequest 设置基本身份验证

> ID：11377932
> 
> 赞同：1
> 
> 时间：2012-07-07T19:15:45.857
> 
> 标签：java, jakarta-ee, httpclient, jax-rs, resteasy

我正在使用 RESTEasy（JAX-RS 的实现）。我找不到为 ClientRequest 设置基本、抢占式身份验证的方法。

```
ClientRequest request = new ClientRequest("<url>");
// -- here I want to add basic-preemptive authentication --
ClientResponse response = request.get();
System.out.println(response.getEntity(String.class)); 
```

正确的方法是什么？还有其他方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:24:02.197

如果您查看 中的构造函数`ClientRequest`，您会发现其中一个带有一个字符串和一个`ClientExecutor`.

所以你可以做这样的事情：

```
ApacheHttpClient4Executor executor = new ApacheHttpClient4Executor();
DefaultHttpClient client  = (DefaultHttpClient) executor.getHttpClient();
client.addRequestInterceptor(new MyPreemptiveAuthInterceptor(), 0);

ClientRequest request = new ClientRequest("http://my-url", executor); 
```

# ios - 在 AVCam 演示中延迟图片捕获

> ID：11377933
> 
> 赞同：0
> 
> 时间：2012-07-07T19:15:46.403
> 
> 标签：ios, nstimer, avcam

使用[AVCam 演示](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)，我试图通过在 AVCamViewController.m 中进行以下更改，在实际拍摄照片之前添加 5 秒的延迟：

```
- (IBAction)captureStillImage:(id)sender
{
    // Capture a still image
    [[self stillButton] setEnabled:NO];

    // delay picture capture by 5 seconds
myTimer = [NSTimer scheduledTimerWithTimeInterval: 5.0                                                
        target: self                                                  
        selector: @selector(pictureTimer:)                                          
        userInfo: nil                                                
        repeats: NO];
}

- (void) pictureTimer: (NSTimer *) timer {
    [[self captureManager] captureStillImage];
} 
```

但是，AVCamCaptureManager::captureStillImage 中的完成处理程序似乎从未被调用（我从未看到“captureStillImage 完成处理程序”日志消息）：

```
- (void) captureStillImage
{
    AVCaptureConnection *stillImageConnection = [AVCamUtilities connectionWithMediaType:AVMediaTypeVideo fromConnections:[[self stillImageOutput] connections]];
    if ([stillImageConnection isVideoOrientationSupported])
        [stillImageConnection setVideoOrientation:orientation];

    NSLog(@"captureStillImage");
    [[self stillImageOutput] captureStillImageAsynchronouslyFromConnection:stillImageConnection
         completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error) {
             NSLog(@"captureStillImage completion handler"); 
```

这不会使用 NSTimer 工作吗？

# c# - 如何获取与面板相关的鼠标坐标？

> ID：11377938
> 
> 赞同：2
> 
> 时间：2012-07-07T19:16:11.417
> 
> 标签：c#, winforms, events, click, mouse

我试图在 C# 中获取与我的表单中的面板相关的鼠标单击的坐标，但我不知道该怎么做。我是初学者，对活动没有任何经验。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-07T19:28:55.270

您必须订阅 Panel 控件的事件 - Click 事件。您可以在 Form 的构造函数中编写以下代码：

```
 System.Windows.Forms.Panel panel;

    public Form()
    {
        InitializeComponent();

        panel = new System.Windows.Forms.Panel();
        panel.Location = new System.Drawing.Point(82, 132);
        panel.Size = new System.Drawing.Size(200, 100);
        panel.Click += new System.EventHandler(this.panel_Click);
        this.Controls.Add(this.panel);
    }

    private void panel_Click(object sender, EventArgs e)
    {
        Point point = panel.PointToClient(Cursor.Position);
        MessageBox.Show(point.ToString());
    } 
```

有关活动的更多详细信息，请访问[此处](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:26:09.577

如果您使用的是 Windows 窗体，那么 Cursor.Position

```
private void panel1_MouseMove(object sender, MouseEventArgs e)
{
    textBox1.Text = string.Format("X: {0} , Y: {1}", Cursor.Position.X, Cursor.Position.Y);
} 
```

# java - 将十六进制字符串解析为整数会引发 NumberFormatException？

> ID：11377944
> 
> 赞同：47
> 
> 时间：2012-07-07T19:17:01.277
> 
> 标签：java, integer, parseint, hex

因此，在 Java 中，您知道如何声明整数，如下所示：

```
int hex = 0x00ff00; 
```

我认为你应该能够扭转这个过程。我有这个代码：

```
Integer.valueOf(primary.getFullHex()); 
```

其中 primary 是自定义 Color 类的对象。它的构造函数需要一个整数来表示不透明度（0-99）和一个十六进制字符串（例如`00ff00`）。

这是`getFullHex`方法：

```
public String getFullHex() {
    return ("0x" + hex);
} 
```

当我调用这个方法时，它给了我这个`NumberFormatException`：

```
java.lang.NumberFormatException: For input string: "0xff0000" 
```

我不明白发生了什么事。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-07-07T19:20:45.930

这会有帮助吗？

```
Integer.parseInt("00ff00", 16) 
```

`16`意味着您应该将字符串解释为基于 16 的（十六进制）。通过使用`2`你可以解析二进制数，`8`代表八进制。`10`是默认值并解析十进制数。

在你的情况下`Integer.parseInt(primary.getFullHex(), 16)`，由于`0x`前缀由`getFullHex()`- 前缀而无法工作，你会没事的。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-07T19:24:58.983

Integer.valueOf(string) 采用十进制表示。您必须指定数字是十六进制格式，例如

```
int value = Integer.valueOf("00ff0000", 16); 
```

注意[Integer.valueOf](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29) (string,16); 不接受前缀`0x`. 如果您的字符串包含`0x`前缀，您可以使用[Integer.decode](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#decode%28java.lang.String%29) ("0x00ff0000");

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-08-16T13:15:10.000

尝试使用解码方法：

```
Integer.decode("0x00ff00"); 
```

可解码字符串：

*   Signopt 十进制数字
*   Signopt 0x HexDigits
*   Signopt 0X HexDigits
*   Signopt #HexDigits
*   Signopt 0 八进制数字

你可以在这里阅读 [https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#decode(java.lang.String)](https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#decode(java.lang.String))

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-07T19:24:10.693

*parseInt*方法只接受数字部分，而不接受任何类型的“base”指示符，例如十六进制的“0x”或八进制的“0”。像这样使用它

```
int decimal = Integer.parseInt("1234", 10);
int octal = Integer.parseInt("1234", 8);
int hex = Integer.parseInt("1234", 16); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T19:23:45.203

这应该这样做：

```
String hex = "FA"; 
int intValue = Integer.parseInt(hex, 16); 
```

如果要生成整数的十六进制表示，请使用

```
String hex = Integer.toHexString(12); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-07T20:38:01.293

这行得通吗？

```
Long.parseUnsignedLong(value, 16); 
```

# excel - 强制使用 mutable 读取 Excel ThisWorkbook.Names？

> ID：11377946
> 
> 赞同：1
> 
> 时间：2012-07-07T19:17:27.467
> 
> 标签：excel, collections, f#, names

我正在尝试获取基于 F# 的加载项的 Excel 命名范围中的数据。我希望能够在工作簿的任何地方使用命名范围，而不仅仅是特定的工作表。

```
let xlRange (xl:Microsoft.Office.Interop.Excel.Application, name:string) =
    let name_list = xl.ThisWorkbook.Names:Microsoft.Office.Interop.Excel.Names
    let mutable result=null
    for n in name_list do
        let nn = n :?> Microsoft.Office.Interop.Excel.Name
        if nn.Name = name then
            let range=nn.RefersToRange
            result <- range.Value2 :?> obj[,]
    result 
```

上面的代码有效，但我不喜欢它，因为我必须使用可变和命令式的样式。问题是 Excel.Names 集合表现不佳。例如

```
let name_seq = Seq.toList name_list 
```

给

> 'Names' 类型与 'seq<'a>' 类型不兼容

有没有更 F# 惯用的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:43:34.983

您应该使用`Seq.cast`to`name_list`转换为类型化序列。

优势明显；[您与 F# 具有更好的互操作性，并且可以在Seq 模块](http://msdn.microsoft.com/en-us/library/ee353635)中使用高阶函数而不是命令式`for`循环。

```
let xlRange (xl: Microsoft.Office.Interop.Excel.Application, name: string) =
    xl.ThisWorkbook.Names
    |> Seq.cast<Microsoft.Office.Interop.Excel.Name> 
    |> Seq.tryPick (fun n -> if n.Name = name 
                             then Some (n.RefersToRange.Value2 :?> obj[,])
                             else None) 
```

现在的返回类型是`obj[,] option`免费为您提供类型安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:19:24.727

我无法使用 Seq。事情直接因为不兼容的类型。我制作了这个函数，旨在将集合转换为 F# 列表，然后我可以按上述方式处理该列表。它编译得很好，但我没有测试，因为......

```
let xlNamesToList names =
    let rec xlNameList_r (names:Microsoft.Office.Interop.Excel.Names) idx =
        if idx>names.Count then // should this be >= ?
            []
        else
            names.Item(idx)::xlNameList_r names (idx+1)
    xlNameList_r names 0 
```

...然后我找到了一种更简单的直接方法：

```
let xlRange (xl:Microsoft.Office.Interop.Excel.Application, name:string) =
    try
        let r=xl.ThisWorkbook.Names.Item(name :> obj).RefersToRange
        Some(r.Value2 :?> obj[,])
    with
        | _ -> None 
```

谢谢你们的帮助！

# javascript - 单击按钮时无法将值传递给事件处理程序

> ID：11377949
> 
> 赞同：1
> 
> 时间：2012-07-07T19:17:58.630
> 
> 标签：javascript, jquery, asp.net, html

我`eventhanlder`为我的按钮单击添加了一个简单的方法，并在单击它时传递了两个参数。嗨是未定义的错误正在抛出。如果我把“嗨”（用双引号引起来）事件处理程序根本不会触发。我可以知道需要解决什么问题。

`<%#(string)DataBinder.Eval(Container, "DataItem.Category")%>`我需要这个完全符合我的要求，我必须在单击中继器行时传递一些东西。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
    </head>
    <body>
    <script type ="text/javascript" language = "javascript">
        function OnClickeHandler(i, j) {
            debugger;
        }
    </script>
        <form id="form1" runat="server">
        <div>
        <input type ="button" id = "myButton" value = "Click" onclick = "OnClickeHandler(1,Hi)" />
        </div>
        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:20:54.897

使用单引号将 hi 作为字符串传递

Onclick="OnClickeHandler(1,'嗨')"

在 HTML 中，当您编写任何属性时，您会用双引号的单引号来覆盖它们

就像以下两者都是有效的。

```
onclick="abc()" 
onclick='abc()' 
```

JavaScript 可以通过单引号或双引号覆盖 sting，您还需要确保为什么传递字符串不会破坏 html。

以下所有内容均有效

```
onclick="abc('xyz')" 
onclick='abc("xyz")'
onclick="abc('x\'yz')"      ------ passing '  as string 
onclick='abc("xy\"z")'      ------ passing "  as string 
```

您只需要确保您用来覆盖 html 属性的任何引用都不会在函数调用或属性值中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:21:24.863

您需要将 Hi 放在单引号中：'Hi'，因为对该函数的调用已经在双引号中

# directsound - 偶尔新的 LPDIRECTSOUNDBUFFER8 bad_alloc

> ID：11377958
> 
> 赞同：0
> 
> 时间：2012-07-07T19:18:45.363
> 
> 标签：directsound, bad-alloc

我偶尔会收到带有以下代码的“C++ 异常：内存位置的 std::bad_alloc”。

```
LPDIRECTSOUNDBUFFER8* ppDirectSoundBuffer;
ppDirectSoundBuffer = new LPDIRECTSOUNDBUFFER8[1]; 
```

此代码在 boot/init 上调用。我可以运行应用程序 10 次，这个异常将被抛出大约 1 次。

随机性让我想到未初始化的变量。但正如您所见，代码非常简单。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:17:46.860

所以我想通了。我在这个新调用上方几行写了一个数组的边界。愚蠢的错误=/

# jquery - 使用jQuery切换回原始图像（删除前缀）onclick

> ID：11377962
> 
> 赞同：1
> 
> 时间：2012-07-07T19:19:16.010
> 
> 标签：jquery, image, onclick, preload, prefix

我有用户文森特提供的以下脚本 - 他真的帮助了我，但我只是没有理解自己完成它......

它在单击时为图像文件添加“_”前缀（例如，将“1.gif”交换为“_1.gif”）。

要完成，我需要某种方式交换回 onclick（如果存在，则删除该 '_' 前缀）。

```
<script type="text/javascript" src="jquery.js"></script>      
<script type="text/javascript">
var prefix = "_";
function showNextPic(imgelement)
{
    var src = imgelement.attr('src');
    if(src.indexOf(prefix) == -1) {
         src = prefix + src;
    }
    imgelement.attr('src', src);
}
</script> 
```

和

```
onClick="showNextPic($(this)) 
```

与每个图像。

如果它存在，任何人都可以帮我删除该前缀吗？

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:25:20.810

```
function showNextPic(imgelement)
{
    var src = imgelement.attr('src');
    if(src.indexOf(prefix) == -1) {
         src = prefix + src;
    }
    else if(src.indexOf(prefix) == 0) {
             src = src.substring(1);
    }
    imgelement.attr('src', src);
} 
```

# php - Google calendar api - 将日历设置为公开？

> ID：11377963
> 
> 赞同：5
> 
> 时间：2012-07-07T19:19:23.857
> 
> 标签：php, google-calendar-api

我可以成功添加日历，但不幸的是，我无法像我想要的那样将该日历嵌入到远程页面上，因为它没有设置为公开！

我找不到将日历的共享设置/权限设置为公开的任何参考。

编辑：找到更多信息： [https ://developers.google.com/google-apps/calendar/v3/reference/acl/insert](https://developers.google.com/google-apps/calendar/v3/reference/acl/insert)

好像这就是我需要的，我会报告具体如何做到这一点..

编辑#2：我越来越擅长这个了！

```
$rule = new AclRule();
$scope = new AclRuleScope();

$scope->setType("default");
$scope->setValue("");
$rule->setScope($scope);
$rule->setRole("reader");

$createdRule = $service->acl->insert($createdCalendar->id, $rule); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:57:38.587

更新后的答案！只需将默认查看器（公共）的“ACL”设置为阅读器！

# asp.net - 使用 Label.Text 更新表

> ID：11377965
> 
> 赞同：-2
> 
> 时间：2012-07-07T19:20:04.973
> 
> 标签：asp.net

一个简单的更新操作会引发错误，例如“'('”附近的语法不正确。我的代码如下。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
        con.Open();
        string insCmd = "update Reg set (DateOfBirth,Experience)=@DateOfBirth,@Experience where UserName='"+Label3.Text+"'";
        SqlCommand insertUser = new SqlCommand(insCmd, con);
        insertUser.Parameters.AddWithValue("@Experience",TextBoxex.Text);
        insertUser.Parameters.AddWithValue("@DateOfBirth",TextBoxdob.Text);
        try
        {
            insertUser.ExecuteNonQuery();
            con.Close();
            Response.Redirect("Admin.aspx");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:32:54.307

从列名中删除括号，`Set`如下所示：

```
string insCmd = "update Reg set DateOfBirth=@DateOfBirth where UserName='"+Label3.Text+"'"; 
```

# objective-c - 如何将UITabbar选定标签颜色的背景颜色更改为蓝色？

> ID：11377966
> 
> 赞同：7
> 
> 时间：2012-07-07T19:20:41.353
> 
> 标签：objective-c, ios5, uitabbarcontroller, uitabbar, uitabbaritem

![在此处输入图像描述](../Images/cc3a4b3ca6a49e593e25d7fa283f8eeb.png)

嗨，我想要这种选项卡选择效果。而不是黑色背景，它应该是蓝色的。是否有可能当我选择任何选项卡时它应该出现蓝色背景。请指导我该怎么做？我已经尝试了很多但没有得到任何合适的解决方案。请建议我我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T20:02:46.500

使用`tintColor:`UITabBar 的属性：

```
myTabBarController.tabBar.tintColor = [UIColor blueColor]; 
```

请注意，这仅适用于 iOS5。

**编辑：**

哎呀！对不起，我误解了你的问题。我以为你的意思是整个标签栏的背景颜色。

为此，您可以使用`selectionIndicatorImage`属性为选择的背景添加图像：

```
myTabBarController.tabBar.selectionIndicatorImage = [UIImage imageNamed:@"myImage.png"]; 
```

希望这可以帮助

# java - 服务器 Derby db 远程到客户端 Java

> ID：11377968
> 
> 赞同：0
> 
> 时间：2012-07-07T19:20:52.587
> 
> 标签：java, database-connection, derby, javadb

我无法清楚地了解数据库连接。

我们在 Linux 中有一个服务器。它也有一个 DerbyDB。我可以在里面有一个数据库。
我必须创建一个在多个客户端计算机（Windows）上运行的程序。

客户端程序将通过 LAN 对远程数据库中的记录执行添加-删除-更新操作。

如何连接到远程数据库？（他们不允许任何服务器端程序，因此套接字可能无法在这里工作）。

***我必须在登录之前手动提供服务器 IP（如果服务器 IP 更改）登录注销应该有一个数据库连接。***

我正在使用 Java Swing (NetBeans)

我想通过提供 IP 来测试连接，然后在 db 上运行一个简单的 SELECT。

怕是IP、Port的问题。 **除了在代码中手动分配 IP 之外，我只需要与 db 通信。**

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T08:56:52.080

您可以使用[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/basics/)来完成。

您需要提供主机、端口、用户名、密码，它应该可以工作。

您需要执行的步骤是：

1.  [下载](http://db.apache.org/derby/derby_downloads.html)derby JDBC 驱动程序
2.  将其添加到您的类路径
3.  [使用正确的 url 进行连接](http://db.apache.org/derby/docs/10.7/devguide/cdevdvlp17453.html)

# java - 如何将 Open GL ES 2.0 应用程序转换为动态壁纸？

> ID：11377973
> 
> 赞同：2
> 
> 时间：2012-07-07T19:21:29.423
> 
> 标签：java, android, opengl-es-2.0

我有一个实现 GLSurfaceView.Renderer 并使用 Open GL ES 2.0 的类，并且可以作为标准应用程序完美运行。

但是我想扩展它，使其成为动态壁纸。自然地，我有一个扩展 WallPaperservice 的服务类，以及一个扩展 WallpaperService.Engine 的引擎类。

在正常版本的代码中，我可以做到

```
mGLSView = new GLSurfaceView(this); // in the engine this becomes 'new GLSurfaceView(getBaseContext());'
mGLSView.setEGLContextClientVersion(2);
mGLSView.setRenderer(new myRenderer());
setContentView(mGLSView); 
```

但是在“引擎”中，您不能调用 setContentView。大概我需要以某种方式将表面传递到 GLSurfaceView 中，但我真的不知道如何。我发现的每个示例或教程都使用 OpenGL 1，因为我对此很陌生，所以我无法弄清楚如何将它们调整为 2.0。

那么有人知道使用 OpenGL ES 2.0 的动态壁纸的简单示例吗？或者是一个关于在哪里阅读的好指针？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:19:35.037

好的，我知道了！如果您使用来自[http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers](http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers)的源代码（*非常*感谢Robert Green 对此！！）

无论出于何种原因，我必须修复一些语法错误，我怀疑这是由于拥有更新版本的 Eclipse 或自原始版本编写以来的任何其他原因。

但是，要启用 OpenGL ES 2.0，您需要进行两项更改。在 ComponentSizeChooser 的构造函数中添加

```
EGL10.EGL_RENDERABLE_TYPE, 4, 
```

给超话。同样在 DefaultContextFactory 的 createContext 中，将 null 替换为

```
new int[] { 0x3098, 2, EGL10.EGL_NONE } 
```

这应该让您启用 GL ES 2.0。

另外，在他的网页上，他有“setRenderMode(RENDERMODE_WHEN_DIRTY);” 我怀疑大多数人会希望这是“setRenderMode(RENDERMODE_CONTINUOUSLY);”

完整代码可[在此处](http://pastebin.com/SCyDLy3c)获得。

# javascript - 间隔/setTimeout 起点

> ID：11377975
> 
> 赞同：1
> 
> 时间：2012-07-07T19:21:57.873
> 
> 标签：javascript, animation, loops, settimeout

我有几个循环动画（向上/向下），由以下函数定义。

循环间隔

```
function Cycler(f) {
    if (!(this instanceof Cycler)) {
        // Force new
        return new Cycler(arguments);
    }
    // Unbox args
    if (f instanceof Function) {
        this.fns = Array.prototype.slice.call(arguments);
    } else if (f && f.length) {
        this.fns = Array.prototype.slice.call(f);
    } else {
        throw new Error('Invalid arguments supplied to Cycler constructor.');
    }
    this.pos = 0;
}

Cycler.prototype.start = function (interval) {
    var that = this;
    interval = interval || 1000;
    this.intervalId = setInterval(function () {
        that.fns[that.pos++]();
        that.pos %= that.fns.length;
    }, interval);
} 
```

功能1（向上）

```
function unpeekTile() {

    var peekAnimation = WinJS.UI.Animation.createPeekAnimation([tile1, tile2]);
    tile1.style.top = "0px";
    tile2.style.top = "0px";

    peekAnimation.execute();
} 
```

功能2（向下）

```
function peekTile() {

    var peekAnimation = WinJS.UI.Animation.createPeekAnimation([tile1, tile2]);
    tile1.style.top = "-120px";
    tile2.style.top = "-120px";

    peekAnimation.execute();

} 
```

开始

```
 function c() { Cycler(peekTile, unpeekTile).start(); }
        setTimeout(c, 0);

        function c2() { Cycler(peekTile2, unpeekTile2).start(); }
        setTimeout(c2, 500);

        function c3() { Cycler(peekTile3, unpeekTile3).start(); }
        setTimeout(c3, 2000); 
```

动画现在从 1000（间隔时间）+ 0/500/2000（setTimeout）开始，但我希望它们以 0、500 和 2000 毫秒开始。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:04:36.213

如果我理解正确，您实际上是在说您不仅希望间隔回调绑定到间隔，而且还希望在超时结束和设置的间隔之间执行一次。

这意味着修改`Cycler.prototype.start`：

```
Cycler.prototype.start = function (interval) {
    var that = this, int_callback;  //<-- added var
    interval = interval || 1000;
    this.intervalId = setInterval(int_callback = function () {
        that.fns[that.pos++]();
        that.pos %= that.fns.length;
    }, interval);
    int_callback(); //<-- added line - call the func immediately, once
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:09:20.343

一种解决方案是：

```
Cycler.prototype.start = function (interval,executeImmediately) {
    var that = this;
    interval = interval || 1000;
    var driverFunction = function () {
        that.fns[that.pos++]();
        that.pos %= that.fns.length;
    }
    this.intervalId = setInterval(driverFunction , interval);
    if(executeImmediately) {
        driverFunction();
    }
} 
```

这使您的函数定义一次，您只需将其输入`setInterval`并直接调用它。

# c# - WPF 中的全局热键可从每个窗口工作

> ID：11377977
> 
> 赞同：17
> 
> 时间：2012-07-07T19:22:28.510
> 
> 标签：c#, wpf, hotkeys

我必须使用可以在每个窗口和讲坛上使用的热键。在我使用的winforms中：

```
RegisterHotKey(this.Handle, 9000, 0x0002, (int)Keys.F10); 
```

和

```
UnregisterHotKey(this.Handle, 9000); 
```

和

```
protected override void WndProc(ref Message m)
{
    base.WndProc(ref m);
    switch (m.Msg)
    {
        case 0x312:
        switch (m.WParam.ToInt32())
        {
            case 9000:
            //function to do
            break;
        }
        break;
    }
} 
```

在我的 WPF 应用程序中，我尝试过：

```
AddHandler(Keyboard.KeyDownEvent, (KeyEventHandler)HandleKeyDownEvent); 
```

和

```
private void HandleKeyDownEvent(object sender, KeyEventArgs e)
{
    if (e.Key == Key.F11 && (Keyboard.Modifiers & ModifierKeys.Control) == ModifierKeys.Control)
    {
        //function to do
    }
} 
```

但它仅在我的应用程序处于活动状态且位于顶部时才有效，但在应用程序最小化时不起作用（例如）。有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-07T19:59:20.103

您可以使用与 WinForms 中相同的方法，并进行一些调整：

*   用于`WindowInteropHelper`获取`HWND`（而不是`Handle`表单的属性）
*   用于`HwndSource`处理窗口消息（而不是覆盖`WndProc`表单）
*   不要使用`Key`枚举`WPF`——它的值不是你想要的

完整代码：

```
[DllImport("User32.dll")]
private static extern bool RegisterHotKey(
    [In] IntPtr hWnd,
    [In] int id,
    [In] uint fsModifiers,
    [In] uint vk);

[DllImport("User32.dll")]
private static extern bool UnregisterHotKey(
    [In] IntPtr hWnd,
    [In] int id);

private HwndSource _source;
private const int HOTKEY_ID = 9000;

protected override void OnSourceInitialized(EventArgs e)
{
    base.OnSourceInitialized(e);
    var helper = new WindowInteropHelper(this);
    _source = HwndSource.FromHwnd(helper.Handle);
    _source.AddHook(HwndHook);
    RegisterHotKey();
}

protected override void OnClosed(EventArgs e)
{
    _source.RemoveHook(HwndHook);
    _source = null;
    UnregisterHotKey();
    base.OnClosed(e);
}

private void RegisterHotKey()
{
    var helper = new WindowInteropHelper(this);
    const uint VK_F10 = 0x79;
    const uint MOD_CTRL = 0x0002;
    if(!RegisterHotKey(helper.Handle, HOTKEY_ID, MOD_CTRL, VK_F10))
    {
        // handle error
    }
}

private void UnregisterHotKey()
{
    var helper = new WindowInteropHelper(this);
    UnregisterHotKey(helper.Handle, HOTKEY_ID);
}

private IntPtr HwndHook(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
{
    const int WM_HOTKEY = 0x0312;
    switch(msg)
    {
        case WM_HOTKEY:
            switch(wParam.ToInt32())
            {
                case HOTKEY_ID:
                    OnHotKeyPressed();
                    handled = true;
                    break;
            }
            break;
    }
    return IntPtr.Zero;
}

private void OnHotKeyPressed()
{
    // do stuff
} 
```

# javascript - 使用 JS 以错误顺序填充 HTML 表格

> ID：11377980
> 
> 赞同：0
> 
> 时间：2012-07-07T19:22:50.947
> 
> 标签：javascript, jquery, html-table

我有一组通过迭代现有表收集的数据：

```
 ---------------
    Mon | Hot  | 12 
    ---------------
    Tue | Cold | -2 
    ---------------
    Wed | Warm | 3  
    ---------------
    Thu | Cold | -4 
    ---------------
    Fri | Cold | -3 
    --------------- 
```

数组中的数据存储如下：['Mon', 'Hot', '12', 'Tue', 'Cold', '-2' .. etc ..]

现在需要将数据显示在一个已经翻转了行和列的表格中，这样数据显示如下：

```
Mon | Tue  | Wed  | Thu  | Fri
-------------------------------
Hot | Cold | Warm | Cold | Cold
-------------------------------
12  | -2   | 2    | -4   | -3 
```

我正在努力寻找正确的循环语句来正确打印数据。

到目前为止，我有以下内容：

```
for (i = 0; i < weather_data.length; i++)
{                                                        
    if (i%5==0)
    {
        table.push('<tr><td>'+weather_data[i*3]+'</td>');
    }
    else if(i%4==0)
    {
        table.push('<td>'+weather_data[i*3]+'</td></tr>');
    }
    else
    {
        table.push('<td>'+weather_data[i*3]+'</td>');
    }
} 
```

哪个正确显示了顶行，但其余部分都未定义，因为调用的索引显然对于数组来说太大了。我已经计算出第二行需要调用以下索引：`((index-5)*3)+1`，但是第三行也需要不同的索引调用。必须有一个适用于所有行的方程。这一定是一个相当普遍的手术！

结果表需要按以下顺序显示索引：

```
0   3   6   9   12
1   4   7   10  13
2   5   8   11  14 
```

所以循环需要按从左到右的顺序生成这些，然后是下一行等。

~还需要分别添加必要的开始`<tr>`和`</tr>`标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:34:55.050

```
var data = ['Mon', 'Hot', '12', 'Tue', 'Cold', '-2', 
            'Wed', 'Warm', '3', 'Thu', 'Cold', '-4'];
var width = 3;
var height = data.length / width;
var r = "";
for(var i = 0; i < width; i++) {
  var row = [];
  for(var j = 0; j < height; j++) {
    row.push("<td>" + data[j * width + i] + "</td>");
  }
  r += "<tr>" + row.join("") + "</tr>";
}  

$("#container_id").html("<table>" + r + "</table>"); 
```

# c++ - c++ eclipse juno构建错误

> ID：11377981
> 
> 赞同：1
> 
> 时间：2012-07-07T19:22:53.430
> 
> 标签：c++, eclipse

我的 C++ Eclipse Juno 项目使用 Linux 64 位时出现以下错误：

```
Error:
  description:Error 127 occurred while running autoreconf
  resource: MyProject
  location: -1
  type: Configure Problem 
```

但是我的项目从命令行成功构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T19:40:05.500

要消除此错误，您需要安装（GNU Autotools - 包括 autoconf 和 automake）：

`sudo apt-get install automake`

如果你“只想写一些 C++”——在新的 C++ 项目（Hello World 或 Empty）菜单中选择“ **Executable** ”而不是 GNU AutoTools。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:23:28.090

这个[线程](http://www.eclipse.org/forums/index.php/t/366892/)可能会有所帮助。我认为您想创建可执行项目而不是 GNU Autotools 项目。

# tomcat - 允许在 mvc Web 应用程序中执行跨域脚本

> ID：11377994
> 
> 赞同：0
> 
> 时间：2012-07-07T19:24:45.827
> 
> 标签：tomcat, spring-mvc, cross-domain

我有一个 Web 应用程序，我正在使用 spring mvc。我需要允许跨域脚本（我需要我外部化的 Web 服务可以通过 javascript 访问）。我写了一个 crossdomain.xml 并将它放在 WEB-INF 文件夹下。这是我的 crossdomain.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<cross-domain-policy>
  <allow-access-from domain="*" />
</cross-domain-policy> 
```

我四处搜索，发现应该可以从以下 URL 访问 crossdomain.xml：“ *localhost:8080/crossdomain.xml* ”
问题是 mvc 正在将请求重新路由到主控制器（带有“/”的 RequestMapping 注释） . 我如何使用 spring mvc 克服这个问题？
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:41:36.507

crossdomain.xml*仅*由 flash 使用，因此这可能不是您真正想要的。

如果您想使用 javascript 完成跨域 xhr 请求，您应该使用 CORS 或 JSONP，请参阅此[相关问题](https://stackoverflow.com/questions/10047584/browser-doesnt-follow-redirect-from-an-ajax-response-php-generated-response-i/10048020#10048020)

CORS 示例：

```
access-control-allow-origin: http://api.example.com
access-control-allow-credentials: true 
```

JSONP 示例（使用 jQuery，需要服务器端支持）：

```
$.ajax({
    type: "GET",
    url: "https://domain.com/jsonp-service",
    dataType: "JSONP"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:45:36.890

jax rs jersey 实现和 spring 之间有一个特殊的集成。所有解释都在这个博客 [Jersey Spring 集成中](https://blogs.oracle.com/enterprisetechtips/entry/jersey_and_spring)