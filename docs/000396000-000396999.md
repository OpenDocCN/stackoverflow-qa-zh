# StackOverflow 问答 000396000-000396999

# algorithm - 对字谜词进行分组的算法

> ID：396005
> 
> 赞同：19
> 
> 时间：2008-12-28T09:11:06.957
> 
> 标签：algorithm, anagram, data-processing

给定一组单词，我们需要找到字谜单词并使用最佳算法单独显示每个类别。

输入：

```
man car kile arc none like 
```

输出：

```
man
car arc
kile like
none 
```

我现在正在开发的最佳解决方案是基于哈希表，但我正在考虑将字谜单词转换为整数值的方程。

示例： man => 'm'+'a'+'n' 但这不会给出唯一值。

有什么建议吗？

* * *

请参阅 C# 中的以下代码：

```
string line = Console.ReadLine();
string []words=line.Split(' ');
int[] numbers = GetUniqueInts(words);
for (int i = 0; i < words.Length; i++)
{
    if (table.ContainsKey(numbers[i]))
    {
        table[numbers[i]] = table[numbers[i]].Append(words[i]);
    }
    else
    {
        table.Add(numbers[i],new StringBuilder(words[i]));
    }

} 
```

问题是如何开发`GetUniqueInts(string [])`方法。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-12-28T09:38:04.190

根本不用担心自定义哈希函数。在您的平台上使用普通的字符串散列函数。重要的是让哈希表的键成为“排序词”的概念 - 单词按字母排序，因此“car”=>“acr”。所有字谜都将具有相同的“排序词”。

只需从“排序单词”到“该排序单词的单词列表”的哈希值。在 LINQ 中，这非常简单：

```
using System;
using System.Collections.Generic;
using System.Linq;

class FindAnagrams
{
    static void Main(string[] args)
    {
        var lookup = args.ToLookup(word => SortLetters(word));

        foreach (var entry in lookup)
        {
            foreach (var word in entry)
            {
                Console.Write(word);
                Console.Write(" ");
            }
            Console.WriteLine();
        }
    }

    static string SortLetters(string original)
    {
        char[] letters = original.ToCharArray();
        Array.Sort(letters);
        return new string(letters);
    }
} 
```

样品用途：

```
c:\Users\Jon\Test>FindAnagrams.exe man car kile arc none like
man
car arc
kile like
none 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-12-28T11:05:58.147

我使用了一个受哥德尔启发的方案：

将素数 P_1 到 P_26 分配给字母（以任何顺序，但要获得较小的散列值最好给普通字母小素数）。

建立单词中字母的直方图。

然后哈希值是每个字母的相关素数乘以它的频率的幂。这为每个字谜赋予了独特的价值。

Python代码：

```
primes = [2, 41, 37, 47, 3, 67, 71, 23, 5, 101, 61, 17, 19, 13, 31, 43, 97, 29, 11, 7, 73, 83, 79, 89, 59, 53]

def get_frequency_map(word):
    map = {}

    for letter in word:
        map[letter] = map.get(letter, 0) + 1

    return map

def hash(word):
    map = get_frequency_map(word)
    product = 1
    for letter in map.iterkeys():
        product = product * primes[ord(letter)-97] ** map.get(letter, 0)
    return product 
```

这巧妙地将寻找子字谜的棘手问题转化为分解大数的（也称为棘手的）问题......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-28T10:04:43.980

用于咯咯笑的 Python 版本：

```
from collections import defaultdict
res = defaultdict(list)
L = "car, acr, bat, tab, get, cat".split(", ")

for w in L:
    res["".join(sorted(w))].append(w)

print(res.values()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-28T09:16:01.347

我认为您不会找到比具有自定义散列函数的散列表更好的东西（在散列之前对单词的字母进行排序）。

字母的总和永远不会起作用，因为你不能真正使'ac'和'bb'不同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-28T09:35:09.623

您将需要大整数（或实际上是位向量），但以下可能有效

每个字母的第一次出现被分配该字母的位数，第二次出现获得该字母的位数+ 26。

例如

a #1 = 1 b #1 = 2 c #1 = 4 a #2 = 2^26 b #2 = 2 ^ 27

然后，您可以将这些加在一起，以根据单词的字母获得唯一的值。

您对单词值的存储要求将是：

n * 26 位

其中 n 是任何重复字母的最大出现次数。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-04-13T02:23:28.303

我不会使用散列，因为它增加了查找和添加的额外复杂性。散列、排序和乘法都将比具有跟踪唯一性的简单的基于数组的直方图解决方案慢。最坏的情况是 O(2n)：

```
// structured for clarity
static bool isAnagram(String s1, String s2)
{
    int[] histogram = new int[256];

    int uniques = 0;

    // scan first string
    foreach (int c in s1)
    {
        // count occurrence
        int count = ++histogram[c];

        // count uniques
        if (count == 1)
        {
            ++uniques;
        }
    }

    // scan second string
    foreach (int c in s2)
    {
        // reverse count occurrence
        int count = --histogram[c];

        // reverse count uniques
        if (count == 0)
        {
            --uniques;
        }
        else if (count < 0) // trivial reject of longer strings or more occurrences
        {
            return false;
        }
    }

    // final histogram unique count should be 0
    return (uniques == 0);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-28T10:06:45.380

我之前用一个简单的字母计数数组实现了这一点，例如：

```
unsigned char letter_frequency[26]; 
```

然后将其与每个单词一起存储在数据库表中。具有相同字母频率“签名”的单词是字谜，一个简单的 SQL 查询然后直接返回一个单词的所有字谜。

通过对一个非常大的字典进行一些实验，我发现没有任何单词超过任何字母的频率计数 9，因此“签名”可以表示为一串数字 0..9（通过打包可以很容易地将大小减半转换成十六进制的字节，并通过二进制编码进一步减少数字，但到目前为止我没有为此烦恼）。

这是一个 ruby​​ 函数，用于计算给定单词的签名并将其存储到哈希中，同时丢弃重复项。我后来从哈希中构建了一个 SQL 表：

```
def processword(word, downcase)
  word.chomp!
  word.squeeze!(" ") 
  word.chomp!(" ")
  if (downcase)
    word.downcase!
  end
  if ($dict[word]==nil) 
    stdword=word.downcase
    signature=$letters.collect {|letter| stdword.count(letter)}
    signature.each do |cnt|
      if (cnt>9)
        puts "Signature overflow:#{word}|#{signature}|#{cnt}"
      end
    end
    $dict[word]=[$wordid,signature]
    $wordid=$wordid+1
  end
end 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-28T21:45:34.720

为字母 az 分配一个唯一的素数

迭代您的单词数组，根据每个单词中的字母创建质数乘积。
将该产品与相应的单词一起存储在您的单词列表中。

对数组进行排序，按产品升序。

迭代数组，在每次产品更改时进行[控制中断。](http://en.wikipedia.org/wiki/Control_break)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-08-12T14:29:26.863

在 C 中，我刚刚实现了以下散列，它基本上对字典中的单词是否包含特定字母进行 26 位位掩码。因此，所有字谜都具有相同的哈希值。哈希不考虑重复的字母，所以会有一些额外的重载，但它仍然比我的 perl 实现更快。

```
#define BUCKETS 49999

struct bucket {
    char *word;
    struct bucket *next;
};

static struct bucket hash_table[BUCKETS];

static unsigned int hash_word(char *word)
{
    char *p = word;
    unsigned int hash = 0;

    while (*p) {
        if (*p < 97 || *p > 122) {
            return 0;
        }
        hash |= 2 << (*p - 97);
        *p++;
    }

    return hash % BUCKETS;
} 
```

重载的桶创建并添加为链表等。然后只需编写一个函数，确保与哈希值匹配的单词长度相同，并且每个单词中的字母是 1 到 1 并将其作为匹配返回。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-03-19T23:23:05.187

我将根据示例单词和其他我不关心的字母生成 hasmap。

例如，如果单词是“汽车”，我的哈希表将是这样的： a,0 b,MAX c,1 d,MAX e,MAX ... .. r,2 。因此，任何大于 3 的都将视为不匹配

（更多调整...）我的比较方法将比较哈希计算本身中的哈希总数。一旦它可以识别出单词不相等，它就不会继续。

```
public static HashMap<String, Integer> getHashMap(String word) {
        HashMap<String, Integer> map = new HashMap<String, Integer>();
        String[] chars = word.split("");
        int index = 0;
        for (String c : chars) {
            map.put(c, index);
            index++;
        }
        return map;
    }

    public static int alphaHash(String word, int base,
            HashMap<String, Integer> map) {
        String[] chars = word.split("");
        int result = 0;
        for (String c : chars) {
            if (c.length() <= 0 || c.equals(null)) {
                continue;
            }
            int index = 0;
            if (map.containsKey(c)) {
                index = map.get(c);
            } else {
                index = Integer.MAX_VALUE;
            }
            result += index;
            if (result > base) {
                return result;
            }
        }
        return result;
    } 
```

主要方法

```
 HashMap<String, Integer> map = getHashMap(sample);
        int sampleHash = alphaHash(sample, Integer.MAX_VALUE, map);
        for (String s : args) {
                if (sampleHash == alphaHash(s, sampleHash, map)) {
                    System.out.print(s + " ");
                }
            } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-02-27T17:23:10.320

字谜可以通过以下方式找到：

1.  单词的长度应该匹配。
2.  根据整数值执行每个字符的加法。如果您对 anagram 执行相同的操作，此总和将匹配。
3.  根据整数值执行每个字符的乘法。如果您对 anagram 执行相同的操作，则评估值将匹配。

所以我想通过以上三个验证，我们可以找到字谜。如我错了请纠正我。

* * *

示例：abc cba

两个单词的长度都是 3。

两个单词的单个字符之和为 294。

这两个词的单个字符的产品是 941094。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-03T11:47:51.957

除了其他有用的答案之外，只想添加简单的 python 解决方案：

```
def check_permutation_group(word_list):
    result = {}

    for word in word_list:
        hash_arr_for_word = [0] * 128  # assuming standard ascii

        for char in word:
            char_int = ord(char)
            hash_arr_for_word[char_int] += 1

        hash_for_word = ''.join(str(item) for item in hash_arr_for_word)

        if not result.get(hash_for_word, None):
            result[str(hash_for_word)] = [word]
        else:
            result[str(hash_for_word)] += [word]

return list(result.values()) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-02-21T04:32:30.453

蟒蛇代码：

```
line = "man car kile arc none like"
hmap = {}
for w in line.split():
  ws = ''.join(sorted(w))
  try:
    hmap[ws].append(w)
  except KeyError:
    hmap[ws] = [w]

for i in hmap:
   print hmap[i] 
```

输出：

```
['car', 'arc']
['kile', 'like']
['none']
['man'] 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-09-02T22:09:19.440

JavaScript 版本。使用散列。

时间复杂度： 0(nm) ，其中 n 是字数，m 是字长

```
var words = 'cat act mac tac ten cam net'.split(' '),
    hashMap = {};

words.forEach(function(w){
    w = w.split('').sort().join('');
    hashMap[w] = (hashMap[w]|0) + 1;
});

function print(obj,key){ 
    console.log(key, obj[key]);
}

Object.keys(hashMap).forEach(print.bind(null,hashMap)) 
```

# c - gedit如何在文件加载完成之前编辑和保存一个大文件？

> ID：396009
> 
> 赞同：0
> 
> 时间：2008-12-28T09:17:20.050
> 
> 标签：c, file

我只想编辑 4 MB 文件的第一行。当我在 gedit 中打开这么大的文件时，加载文件需要一两分钟，但会显示并允许您编辑到目前为止已加载的部分。所以我打开了文件，快速编辑了第一行，保存了文件，然后在文件加载完成之前关闭了 gedit。

在完全加载之前如何保存文件？我知道编辑文件的唯一方法是将其加载到内存中，在内存中编辑副本，然后将整个内容写回文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-28T09:21:23.740

4MB 不是特别大。加载它真的不需要一两分钟。它可能会将其全部加载到内存中，但需要一段时间才能显示全部 - UI 小部件可能需要一段时间才能填充。（我希望 4MB 文件不是一分钟，但是......）

也许这就是它让您编辑开始并快速保存它的方式 - 它已完成*加载*文件，但尚未完成*显示*它。

# entity-framework - 实体框架模型设计器和 SQL_Variant 数据类型的问题

> ID：396019
> 
> 赞同：2
> 
> 时间：2008-12-28T09:31:07.027
> 
> 标签：entity-framework, sql-variant

我有一个表，其中有一个 SQL_Variant 类型的列和一些其他类型的列，如 int、bigint、... 当我将此表添加到 edmx 文件时，它会添加除 SQL_Variant 类型列之外的所有列。是否有错误或者我必须做一些事情来添加该列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T10:02:04.297

实体框架不支持 sql_variant。如果您必须在代码中使用该类型，则必须使用另一个 o/r 映射器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-12-19T12:29:12.747

有一个[只读访问的解决方案](http://www.codeproject.com/KB/database/sql_variant_in_ef.aspx)。

# asp.net - 带有 AD 身份验证的 ASP.NET wiki

> ID：396047
> 
> 赞同：2
> 
> 时间：2008-12-28T10:07:26.703
> 
> 标签：asp.net, active-directory, wiki-engine

我正在探索为我公司的一百多个开发人员部门建立一个 wiki 站点的选项。我们是一家纯 Microsoft（认证合作伙伴）商店，因此很自然地基于 ASP.NET 和 IIS 进行实施，以便熟悉和扩展学习机会。

看起来，Screwturn wiki 没有提供可以连接到 Active Directory 的用户提供程序。是否有原生支持 AD 的 wiki 引擎？当我们希望控制访问时，管理两个用户群并不是最有效的活动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-30T04:04:57.683

更新：看起来ScrewTurn 现在有一个官方的广告提供商

[http://www.screwturn.eu/blog/?p=255](http://www.screwturn.eu/blog/?p=255)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-28T10:11:38.443

你看过 Sharepoint Wiki 吗？如果您是 Microsoft 商店，它可能是最容易设置的。

正如预期的那样，它与 Active Directory 集成在一起，开箱即用。由于它是 Sharepoint Server 的一部分，因此并没有真正写太多。[这](http://technet.microsoft.com/en-us/magazine/2007.01.wiki.aspx)是微软页面

老实说，它并不是最伟大的 Wiki。标记是基于 HTML 的，它来自 MediaWiki，很笨重，但它非常适合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T12:07:38.177

*[N2](http://n2cms.com/) Open Source ASP.NET CMS*是一个轻量级的CMS 框架，可帮助您构建任何人都可以更新的出色网站。它包含一个功能模板包，包括新闻、维基、图片库、常见问题解答、RSS、数据输入、民意调查等。此外，N2 还利用了 ASP.NET 功能，例如现有的 Web 控件站点地图和成员资格提供程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T11:34:57.650

我们一直在使用[Perspective Wiki](http://www.high-beyond.com/perspective.aspx?action=view&page=perspective:Welcome) - 它与 Windows AD 很好地集成，并且具有您期望的 wiki 的大部分功能 - 这比 SP Wiki 可以说的要多 - 我们还没有迁移到 MOSS wiki但主要是因为缺少功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-08-11T23:55:59.007

[MindTouch](http://www.mindtouch.com)是基于开源和 .Net 的。Ohloh 将其评为 5。源代码非常紧凑，并且有用于 SqlServer 的连接器以及脚本语言。最后它支持 LDAP 和 ActiveDirectory。

MindTouch 通常被认为是 SharePoint 的一个很好的开源替代品，因为您可以使用它的工具包快速创建自定义并与 MS Office 集成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-29T15:33:36.937

根据他们的网站，[LiteWiki](http://www.andrewfaust.com/)支持 ASP.NET 会员提供程序并且非常轻量级。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-29T22:16:23.377

它可能不是您想要的，但我的公司在 Linux/Apache 上有 MediaWiki，运行集成的 AD 安全性。它被锁定到特定 AD 组中的用户，我们使用我们的 AD 凭据登录。

MediaWiki 似乎也是一个非常好的 wiki。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-01-08T07:49:28.020

您可以使用几行代码添加 AD 支持。查看Screwturn wiki论坛以获取各种示例

# html - Onselect 事件不会在 div 上触发

> ID：396053
> 
> 赞同：4
> 
> 时间：2008-12-28T10:19:01.173
> 
> 标签：html, onselect

我无法触发附加到**<div>**元素的**onselect事件处理程序。**是否可以强制**<div>**发出**选择**事件？

 ******* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-28T10:46:52.037

根据[w3schools](http://www.w3schools.com/jsref/jsref_onselect.asp)， onSelect 仅在 input 和 textarea 对象上定义。

但是，您可以尝试捕获[MouseUp 事件](http://www.quirksmode.org/js/events_mouse.html)并在当前窗口/文档中[检索选定的文本。](http://www.codetoad.com/javascript_get_selected_text.asp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-02-15T15:09:38.197

`onMouseUp`你可以通过使用事件来实现你想要的。见下文...

```
<html>
    <body>
        <div id="container" style="border: 1px solid #333" contentEditable="true" onMouseUp="checkMe()">Type text    here</div>

    </body>
    <script language="javascript">
    function checkMe() {
        var txt = "";

        if (window.getSelection) {
                txt = window.getSelection();
        }
        else if (document.getSelection) {
            txt = document.getSelection();
        } else if (document.selection) {
            txt = document.selection.createRange().text;
        }

        alert("Selected text is " + txt);
    }
    </script>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T11:00:55.737

使用`OnClick`.

`:select`仅适用于某些表单元素。

# c# - C# - 使用自动实现的属性和命名约定

> ID：396064
> 
> 赞同：1
> 
> 时间：2008-12-28T10:44:59.063
> 
> 标签：c#

使用自动实现的属性时，例如

公共字符串 MyProperty { 获取；放; }

在您了解命名约定之前，这很好。

我对类级别字段使用下划线，即

字符串_MyProperty；

所以自动实现意味着变量是什么及其范围并不明显。

如果你明白我的意思，有什么想法吗？？

马尔科姆

编辑：由于该属性是公开的，因此您也不想使用下划线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T10:48:54.263

PascalCasing 告诉你它的类级别和公共。（查看[这篇关于 .NET 命名约定的文章](http://www.irritatedvowel.com/Programming/Standards.aspx)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T11:10:21.053

当您使用自动属性和现代 IDE（如 Visual Studio）时，您根本不需要 _。如果您使用自动属性和不同的可见性，智能感知将正常工作。编译器也会检查它。

```
 public string SomeString { private set; get; }

    private string some2string;

    public string Some3string { set; get; } 
```

这意味着 SomeString 只能在内部写入。你不会在课堂之外获得财产。所以没有魔法_等。

如果你有一个真正的类属性，那么就不需要创建属性，只创建一个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T11:11:19.460

该物业本身是公共的。编译器为您的属性生成私有字段。由于 MSIL 本身不支持自动实现的属性。但是因为私有字段是由编译器生成的，所以您不必直接处理它们。

Brad Abrams 的《Framework Design Guidelines 2nd edition》是一本关于命名约定的好书。[关联](https://rads.stackoverflow.com/amzn/click/com/0321545613)

[Stylecop](http://code.msdn.microsoft.com/sourceanalysis)是一个执行命名约定的好工具

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T11:11:44.717

字段/属性：

如果您只是在我的示例中使用“get,set”，那么您是对的，应该有什么区别，但是，如果有人调用该属性或设置该属性，您可能会执行一些额外的任务。也许您会检查设置属性或更新对象的某些内部状态。

# c# - AC# / .NET (VS 2008) 到 Outlook (2007) 问题

> ID：396069
> 
> 赞同：1
> 
> 时间：2008-12-28T10:48:31.927
> 
> 标签：c#, .net, outlook, outlook-2007, email

我需要 .NET (C#) 和 MS Outlook 方面的帮助。我正在构建一个简单的桌面应用程序，并希望使用 Outlook 发送电子邮件。

1.  如果我的桌面应用程序生成一条消息，它应该能够通过 Outlook 将其作为电子邮件发送（我们可以假设 Outlook 在同一台 PC 上运行）——这是一个非常简单的操作。

2.  如果我能做到1，那就太好了。如果可能的话，我希望能够将项目插入到 Outlook 日历中。

我正在使用 VS 2008 专业版和 C#，目标是 .NET 3.5

非常感谢任何帮助，示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-29T00:23:36.710

此代码直接来自[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)：

```
using System.Net;
using System.Net.Mime;
using System.Net.Mail;

...
...

public static void CreateMessageWithAttachment(string server)
{
    // Specify the file to be attached and sent
    string file = @"C:\Temp\data.xls";

    // Create a message and set up the recipients.
    MailMessage message = new MailMessage(
           "from@gmail.com",
           "to@gmail.com",
           "Subject: Email message with attachment.",
           "Body: See the attached spreadsheet.");

    // Create the file attachment for this e-mail message.
    Attachment data = new Attachment(file, MediaTypeNames.Application.Octet);

    // Add time stamp information for the file.
    ContentDisposition disposition = data.ContentDisposition;
    disposition.CreationDate = System.IO.File.GetCreationTime(file);
    disposition.ModificationDate = System.IO.File.GetLastWriteTime(file);
    disposition.ReadDate = System.IO.File.GetLastAccessTime(file);

    // Add the file attachment...
    message.Attachments.Add(data);

    SmtpClient client = new SmtpClient(server);

    // Add credentials if the SMTP server requires them.
    client.Credentials = CredentialCache.DefaultNetworkCredentials;

    try
    {
        client.Send(message);
    }
    catch (Exception ex)
    {
        Console.WriteLine("CreateMessageWithAttachment() Exception: {0}",
              ex.ToString());
        throw;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T11:26:39.790

使用 MAPI，ap/invoke 接口使得在 C# 中使用类似[MailItem.Send 方法](http://msdn.microsoft.com/en-us/library/bb175286.aspx)成为可能。mapi32.MAPISendMail页面提供了设置接口的示例[：](http://www.pinvoke.net/default.aspx/mapi32.MAPISendMail)

```
/// <summary>
/// The MAPISendMail function sends a message.
///
/// This function differs from the MAPISendDocuments function in that it allows greater
/// flexibility in message generation.
/// </summary>
[DllImport("MAPI32.DLL", CharSet=CharSet.Ansi)]
public static extern uint MAPISendMail(IntPtr lhSession, IntPtr ulUIParam,
MapiMessage lpMessage, uint flFlags, uint ulReserved); 
```

相同的*p/invoke*页面还提供了一个警告：*注意！托管代码不支持 MAPI32。*

您应该考虑使用本机[System.Net.Mail.SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)类通过 SMTP 而不是 Outlook 发送邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T23:39:43.257

我强烈推荐使用 Redemption。它有一个非常易于使用、易于学习的 API，它可以做的不仅仅是发送电子邮件。

# c++ - 工具，Visual Studio 设置来检查未初始化的类成员

> ID：396074
> 
> 赞同：4
> 
> 时间：2008-12-28T10:56:18.603
> 
> 标签：c++, visual-studio

我正在将一个大型而复杂的 c++ 服务器从 Solaris 移植到 Windows。由于未初始化的成员变量，我面临很多麻烦。在 Solaris 上，它们默认设置为 0 值，因此一切正常。但是，在 Windows 上，这些成员变量获得分配的垃圾值，从而在系统中造成混乱。

代码库太大，无法手动检查每个类。如果成员变量未在构造函数中初始化，您是否知道任何工具或 Visual Studio 设置会发出警告？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-28T15:40:21.057

[cppcheck](http://cppcheck.wiki.sourceforge.net/)在查找未初始化的变量方面做得非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T14:23:14.410

您还可以使用外部工具来完成此类任务，例如[PCLint](http://www.gimpel.com/html/pcl.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T11:17:38.200

您可以在 Visual Studio（C++ 项目）中启用代码分析：项目属性 --> C/C++ --> 在构建时启用 C/C++ 的代码分析

# sql-server-2005 - Windows 安装程序 4.5 和 Sql Server 2005？

> ID：396083
> 
> 赞同：0
> 
> 时间：2008-12-28T11:12:57.897
> 
> 标签：sql-server-2005, windows-installer

`SQL server 2005`前段时间我在安装express时卸载了express `SQL server 2008`。

这样做需要安装 Windows 安装程序 4.5。

现在我又找到了一个理由来`SQL server 2005`表达。

（重新连接到要求它连接到默认 MSSQL\MSSMLBIZ 数据库的 Outlook Business Contact Manager）

但是，当我安装任何版本的`SQL server 2005`.

我将其解释为`SQL 2005`安装程序遇到故障并假定这是因为安装程序版本不正确，并且假定版本太旧。

但我怀疑这个版本太晚了。

有什么办法摆脱这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-28T11:34:05.250

由基于 MSI 的安装程序产生的错误消息是出了名的具有误导性（大多数安装程序会默默地吞下很多错误情况并呈现一个单一的通用错误消息。）您可以做的最好的事情是筛选 SQL Server 2005 创建的日志文件安装程序（IIRC，它们被转储到 %TMP% 目录中。）这肯定会提供更多信息。

您可以尝试卸载 KB942288 软件包（添加/删除程序，确保选中显示更新复选框，然后找到相应的条目。）这[也是相应的 Microsoft 知识库文章](http://support.microsoft.com/kb/942288)。但是，不能保证这会对您的系统产生什么影响，尤其是自从您安装 4.5 以来，您肯定已经执行了很多安装操作。

[您还可以尝试KB 555175](http://support.microsoft.com/kb/555175)中描述的一种或多种通用 MSI 调试技术。

# c++ - Headers Including Each Other in C++

> ID：396084
> 
> 赞同：58
> 
> 时间：2008-12-28T11:13:39.347
> 
> 标签：c++, recursion, header, include

I'm a C++ newbie, but I wasn't able to find the answer to this (most likely trivial) question online. I am having some trouble compiling some code where two classes include each other. To begin, should my #include statements go inside or outside of my macros? In practice, this hasn't seemed to matter. However, in this particular case, I am having trouble. Putting the #include statements outside of the macros causes the compiler to recurse and gives me "#include nested too deeply" errors. This seems to makes sense to me since neither class has been fully defined before #include has been invoked. However, strangely, when I try to put them inside, I am unable to declare a type of one of the classes, for it is not recognized. Here is, in essence, what I'm trying to compile:

A.h

```
#ifndef A_H_
#define A_H_

#include "B.h"

class A
{
    private:
        B b;

    public:
        A() : b(*this) {}
};

#endif /*A_H_*/ 
```

B.h

```
#ifndef B_H_
#define B_H_

#include "A.h"

class B
{
    private:
            A& a;

    public:
        B(A& a) : a(a) {}
 };

#endif /*B_H_*/ 
```

main.cpp

```
#include "A.h"

int main()
{
    A a;
} 
```

If it makes a difference, I am using g++ 4.3.2.

And just to be clear, in general, where should #include statements go? I have always seen them go outside of the macros, but the scenario I described clearly seems to break this principle. Thanks to any helpers in advance! Please allow me to clarify my intent if I have made any silly mistakes!

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2008-12-28T11:24:42.680

By "the macros" I assume you mean the #ifndef include guards? If so, #includes should definitely go inside. This is one of the major reasons why include guards exists, because otherwise you easily end up with an infinite recursion as you noticed.

Anyway, the problem is that at the time you use the A and B classes (inside the other class), they have not yet been declared. Look at what the code looks like after the #includes have been processed:

```
//#include "A.h" start
#ifndef A_H_
#define A_H_

//#include "B.h" start
#ifndef B_H_
#define B_H_

//#include "A.h" start
#ifndef A_H_ // A_H_ is already defined, so the contents of the file are skipped at this point
#endif /*A_H_*/

//#include "A.h" end

class B
{
    private:
            A& a;

    public:
            B(A& a) : a(a) {}
 };

#endif /*B_H_*/

//#include "B.h" end

class A
{
    private:
            B b;

    public:
            A() : b(*this) {}
};

#endif /*A_H_*/
//#include "A.h" end

int main()
{
    A a;
} 
```

Now read the code. B is the first class the compiler encounters, and it includes an `A&` member. What is `A`? The compiler hasn't encountered any definition of `A` yet, so it issues an error.

The solution is to make a forward declaration of A. At some point before the definition of B, add a line `class A;`

This gives the compiler the necessary information, that A is a class. We don't know anything else about it yet, but since B only needs to include a reference to it, this is good enough. In the definition of A, we need a member of type B (not a reference), so here the entire definition of B has to be visible. Which it is, luckily.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-28T11:20:08.210

> And just to be clear, in general, where should #include statements go?

Inside the include guards, for the reason you mentioned.

For your other problem: you need to forward-declare at least one of the classes, e.g. like this:

```
#ifndef B_H_
#define B_H_

// Instead of this:
//#include "A.h"

class A;

class B
{
    private:
            A& a;

    public:
            B(A& a) : a(a) {}
 };

#endif /*B_H_*/ 
```

This only works for declarations though: as soon as you really *use* an instance of `A`, you need to have defined it as well.

By the way, what Nathan says is true: you can't put class instances into each other recursively. This only works with *pointers* (or, in your case, references) to instances.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-30T21:03:46.580

In such situations, i create a common header to be included in all sources with forward declarations:

```
#ifndef common_hpp
#define common_hpp

class A;
class B;

#endif 
```

Then the individual class header files typically don't need any #includes to reference other classes, if all that's needed are pointers or references to those classes. Half the time though there are other goodies in those headers, but at least any problem with circular references are solved with common.hpp

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-28T11:23:27.753

Oops! I think I found a solution that involves putting the #include statements inside the class and using a forward declaration. So, the code looks like:

```
#ifndef A_H_
#define A_H_

class B;

#include "B.h"

class A
{
    private:
            B b;

    public:
            A() : b(*this) {}
};

#endif /*A_H_*/ 
```

And similarly for class B. It compiles, but is this the best approach?

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-18T03:24:45.717

Dependency between two classes in a good software design can be drawn as a tree.

For this reason C++ won't let two .h files #include each other.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T11:18:41.223

I doubt that this can be done. You're not talking about calling two *functions* from inside each other recursively, but rather of putting two *objects* one inside the other recursively. Think about putting a house with a picture of a house with a picture of a house etc... This will take up an infinite amount of space because you'll have an infinite number of houses and pictures.

What you *can* do is have each of `A` and `B` include either pointers or references to each other.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T12:20:55.343

Some compilers (inc. gcc) also support *#pragma once* however the 'include guards' idiom in your question is the usual practice.

# windows - 如何通过命令行启动 Windows 调度程序？

> ID：396099
> 
> 赞同：75
> 
> 时间：2008-12-28T11:27:06.543
> 
> 标签：windows, command-line, scheduler

我的意思是从命令行打开内置的 Windows GUI——而不是由 Schtasks 启动

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-03-12T04:52:47.253

**`taskschd.msc`在 Windows Vista 及更高版本中可用。**

[http://technet.microsoft.com/en-us/library/cc721871.aspx](http://technet.microsoft.com/en-us/library/cc721871.aspx)

我本可以发誓我在 Vista 之前看到过一个小任务计划程序 GUI，就像您在谈论的那样，但也许我正在考虑“添加计划任务”向导。

您可能不得不满足于使用以下命令打开计划任务资源管理器：

```
control schedtasks 
```

不幸的是，我找不到从命令行启动“添加计划任务”向导的任何方法（必须有一种方法！）

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-02-29T08:58:40.963

我在服务器上使用 Windows 2003。我正在使用“SCHTASKS.EXE”

```
 SCHTASKS /parameter [arguments]

    Description:
        Enables an administrator to create, delete, query, change, run and
        end scheduled tasks on a local or remote system. Replaces AT.exe.

    Parameter List:
        /Create         Creates a new scheduled task.

        /Delete         Deletes the scheduled task(s).

        /Query          Displays all scheduled tasks.

        /Change         Changes the properties of scheduled task.

        /Run            Runs the scheduled task immediately.

        /End            Stops the currently running scheduled task.

        /?              Displays this help message.

    Examples:
        SCHTASKS
        SCHTASKS /?
        SCHTASKS /Run /?
        SCHTASKS /End /?
        SCHTASKS /Create /?
        SCHTASKS /Delete /?
        SCHTASKS /Query  /?
        SCHTASKS /Change /?

    ┌─────────────────────────────────────┐
    │ Executed Wed 02/29/2012 10:48:36.65 │
    └─────────────────────────────────────┘ 
```

这很有趣，让我感觉如此强大。:)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-12-28T12:36:37.153

这将启动计划任务 MMC 控制面板：

```
%SystemRoot%\system32\taskschd.msc /s 
```

旧版本的 Windows 有一个用于 MMC 控制面板的启动屏幕，并且 /s 开关会抑制它。这不是必需的，但也没有伤害。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2010-02-25T14:36:12.647

是的，GUI 在 XP 中可用。我可以使用以下命令获取要打开的计划任务列表（但不是 GUI），

```
control.exe  schedtasks 
```

然后，您可以使用向导添加新的计划任务，例如。

在 XP 中，如果您搜索“计划任务”，然后单击“逐步说明”并打开计划程序 GUI，则可以从 Windows 帮助中找到计划程序 GUI。单击最后一个链接会执行以下命令，该命令可能会被翻译成可以从命令行打开调度程序 GUI 的内容。有谁知道怎么做？

```
ms-its:C:\WINDOWS\Help\mstask.chm::/EXEC=,control.exe, schedtasks CHM=ntshared.chm FILE=alt_url_windows_component.htm 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-21T17:16:52.897

这是我刚刚使用的示例：

```
at 8am /EVERY:M,T,W,Th,F,S,Su cmd /c c:\myapp.exe 
```

结果是：

```
Added a new job with job ID = 1 
```

然后，检查我的工作：

```
at 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-02-06T13:45:37.820

您可以创建一个新的快捷方式：

```
control schedtasks 
```

将其命名为“tsks.lnk”之类的简单名称，然后将其保存在 c:\windows\system32 中。

您现在可以按`Windows Key`+ `R`，然后输入“tsks”并按`Enter`并瞧。那时不需要鼠标。
或者在 Windows Vista/7/2008 中，只需按`Windows Key`，然后键入“tsks”并按`Enter`。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-12-28T12:07:31.547

你可能想看看简单的命令行调度程序“at”：

* * *

```
C:\Documents and Settings\mahendra.patil>at/? 
```

AT 命令安排命令和程序在指定的时间和日期在计算机上运行。必须运行计划服务才能使用 AT 命令。

```
AT [\\computername] [ [id] [/DELETE] | /DELETE [/YES]]
AT [\\computername] time [/INTERACTIVE]
    [ /EVERY:date[,...] | /NEXT:date[,...]] "command" 
```

\computername 指定远程计算机。如果省略此参数，则在本地计算机上安排命令。

id 是分配给预定命令的标识号。

/delete 取消预定的命令。如果省略 id，则取消计算机上所有已调度的命令。

/yes 在不需要进一步确认时与取消所有作业命令一起使用。

time 指定命令运行的时间。

/interactive 允许作业与在作业运行时登录的用户的桌面进行交互。

/every:date[,...] 在一周或一个月的每个指定日期运行命令。如果省略日期，则假定为当前日期。

/next:date[,...] 在当天的下一次出现（例如，下周四）运行指定的命令。如果省略日期，则假定为当前日期。

“command” 是要运行的 Windows NT 命令或批处理程序。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-07-19T12:51:46.323

您可以使用`TASKSCHD.MSC`或`CONTROL SCHEDTASKS`

[这里](http://am-techzone.blogspot.com/2011/07/windows-shortcuts.html)还有一些这样的命令。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-05-10T15:51:45.077

我也在运行 XP SP2，而且效果很好（从命令行...）：

```
start control schedtasks 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-05-25T20:30:50.423

如果你问我认为你在问什么，你可以通过执行以下命令打开它：

```
explorer.exe "C:\WINDOWS\Tasks\" 
```

# c++ - 在 C++ 中检查内存泄漏的最佳方法是什么？

> ID：396100
> 
> 赞同：8
> 
> 时间：2008-12-28T11:27:19.040
> 
> 标签：c++, memory-leaks

我正在用链表实现一个稀疏矩阵，手动检查泄漏并不好玩，有什么想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-28T11:33:33.753

Unix的[`valgrind`](http://valgrind.org/)分析器提供了不错的泄漏检测。

然而，这只是成功方法的一部分。另一部分是防止（即最小化）显式内存处理。智能指针和分配器可以极大地帮助防止内存泄漏。此外，*请*务必使用 STL 类：. 已提供无泄漏链表实现`std::list`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-28T13:54:20.023

**在 Windows 上：**

Compuware BoundChecker（有点贵但非常好）

视觉泄漏检测器（免费，谷歌它）

**在 Linux/Unix 上：**

净化

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T14:08:41.117

Unix 上的 Purify 原始版本非常出色。但是 Rational 买了之后生产的 Windows 版本就很糟糕了。像地狱一样的弗拉基。不惜一切代价避免。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T13:35:33.740

如果你使用 Anjuta，你可以使用 valgrind 模块。

# c# - Visual Studio (VS2008) 中的远程调试，Windows 窗体应用程序

> ID：396101
> 
> 赞同：32
> 
> 时间：2008-12-28T11:27:22.627
> 
> 标签：c#, .net, visual-studio-2008, debugging, remote-debugging

我正在尝试远程调试 Windows 窗体应用程序 (C#)，但我总是收到此错误：

> *无法连接到名为“XXX”的 Microsoft Visual Studio 远程调试监视器。目标计算机上的 Visual Studio 远程调试器无法连接回此计算机。身份验证失败。请参阅帮助以获得帮助。*

我尝试根据 MSDN 指南进行配置，但我无法使其工作。

## 我的设置：

*   **开发计算机**- 连接到域的 XP (x86)。
*   **测试计算机-****未** 连接到域的Vista (x86) 。
*   我的机器之间有网络连接。
*   **我在测试计算机**(user1) 中使用我运行 Visual Studio (mydomain\user1) 的域用户的名称创建了一个本地用户。设置相同的密码。
*   在测试计算机上，我将**“msvsmon.exe”**作为应用程序（而不是服务）运行，我使用**“runas”**命令与我创建的用户一起运行它。（用户1）：

    runas /u:user1 msvsmon.exe

有人能帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-01T07:43:47.647

我遇到的问题是我有 2 个用户：

```
mydomain\user1
mytestmachine\user1 
```

这是不正确的（根据 Gregg Miskely 的说法）我需要在我的开发计算机中定义一个本地用户，例如：

```
mydevcomputer\debug
mytestmachine\debug 
```

使用相同的密码并使用此用户运行 VS2008 和调试监视器：

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-02-04T22:25:54.630

这就是它对我的工作方式：

远程计算机：Microsoft Virtual PC，“IHS\RDM”附加到我的公司域，以管理员帐户 jdoe 身份登录。

本地计算机：附加到本地域，以 jdoe 身份登录，管理员帐户。

1）远程计算机：安装 rdbgsetup.exe（来自 Visual Studio 2005\Disk 2\Remote Debugger\x86）

2）远程计算机：RUNAS /user MYDOMAIN\jdoe /netonly msvsmon

3）远程电脑：msvsmon->Tools->permissions add user "MYDOMAIN\jdoe"（我每次重启都要这样做）

4) 本地计算机：运行 msvsmon。

5）本地计算机，msvsmon->Tools->permissions，添加对象类型：“computers”，“IHS\RDM”

6）本地电脑，vs2005->debug->attach to process。传输：默认，限定符：jdoe@RDM

7）刷新，瞧；一个进程列表！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T17:47:27.820

Gregg Miskely 有[一篇](http://blogs.msdn.com/greggm/archive/2008/05/15/visual-studio-remote-debugger-service-user-account-requirements.aspx)关于为什么服务帐户需要具有管理员权限的博客文章（当以这种方式设置时）。其中一点是用户帐户，在您的情况下是测试机器上的用户，必须具有连接回另一台计算机的权限。听起来您遇到了帐户 mydomain\user1 没有足够权限连接到您的开发计算机的情况。

如果这对阅读 Gregg 的博客文章没有帮助，那么向他发送邮件可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T12:24:07.537

`TESTCOMPUTER\user1`有相同的密码吗`mydomain\user1`？

您也可以尝试`msvsmon.exe`在目标计算机上运行而不是远程调试服务。您可以使用“运行方式...”在各种凭据下运行它。一旦你得到工作，`msvsmon,exe`你应该能够安装（或重新启用）远程调试器服务，让它在这些凭据下运行。

编辑：

您应该能够使用 Permissions 属性页`msvsmon.exe`为目标计算机上的域用户设置适当的调试权限：

[http://msdn.microsoft.com/en-us/library/ms164722.aspx](http://msdn.microsoft.com/en-us/library/ms164722.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-13T20:24:35.457

因此，您是一名开发人员，您的一个用户遇到了异常，您想在不关闭异常窗口的情况下远程调试它，但他们以不同的用户帐户登录。事实证明，您可以调试他们的应用程序，但这会变得很棘手。

0）您仍然需要在远程应用程序机器和本地Visual Studio机器上匹配本地帐户，这意味着将帐户添加到用户的计算机。

1) 您需要使用带有 /netonly 选项的 runas。打开命令提示符到 msvsmon 所在的文件夹并键入

```
runas /user:[user] /netonly msvsmon 
```

这会导致 msvsmon 仅在访问网络时使用用户的凭据（例如，当 msvsmon 连接回本地 VS 机器时）。如果您使用 runas 调用它而不使用 /netonly，msvsmon 会感到不安。

2）您需要通过远程调试监视器的工具->权限菜单为本地Visual Studio机器添加权限以连接远程应用程序机器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-14T04:03:22.483

所以没有账号我不能回复，只能回复我自己的评论，但是我的注册账号和我发帖的匿名账号是分开的，所以这必须是一个“新答案”。对不起。

baget - 当我今天早些时候完成这项工作时，我在 Remote Debug Monitor PC 和 Visual Studio PC 上都创建了一个本地帐户。RDM 不在域上，VS 在。两个本地帐户都是管理员，其凭据与我的域帐户相同。从另一个帐户（也是管理员），我使用 netonly 开关从提升的提示符中调用 runas。您可能需要也可能不需要为您的域提供用户名，但由于密码应该全部匹配，我认为这并不重要。

不要忘记在 RDM 中调整您的权限，以允许运行 VS 的用户帐户以调试权限连接。它允许您添加到列表中的人非常挑剔，因此如果您不首先创建本地帐户，您会感到非常沮丧。如果您在不同的用户帐户名下运行 RDM，则在尝试连接到远程计算机时必须使用完整的服务器名称；如果您从同一个用户帐户同时运行 RDM 和 VS，那么您只需使用计算机名称即可。

# vba - VBA 中的类（静态）方法

> ID：396117
> 
> 赞同：48
> 
> 时间：2008-12-28T12:03:38.577
> 
> 标签：vba, static

我想知道是否可以在 VBA 中创建类方法。类方法是指可以在没有类对象的情况下调用的方法。'static' 关键字在 C++ 和 Java 中可以做到这一点。

在下面的示例中，我尝试创建一个静态工厂方法。

例子：

```
'Classmodule Person'
Option Explicit
Private m_name As String
Public Property Let name(name As String)
    m_name = name
End Property
Public Function sayHello() As String
    Debug.Print "Hi, I am " & m_name & "!"
End Function

'---How to make the following method static?---'
Public Function Create(name As String) As Person
    Dim p As New Person
    p.m_name = name
    Set Create = p
End Function

'Using Person'
Dim p As New Person
p.name = "Bob"
p.sayHello 'Works as expected'
Set p2 = Person.Create("Bob") 'Yields an error' 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2010-11-16T17:19:00.553

**1.**创建一个普通类，其中包含您需要“静态”的公共方法

**2.**包含一个公共方法[在这个'静态'类中]，它初始化类中的[私有]'静态字段'（如果你愿意，它可以带参数）

**3.**创建模块充当工厂

```
Public Function CreateStaticClass(parameters for 'constructor') As StaticClass

    Dim static As StaticClass
    Set static = New StaticClass
    Call StaticClass.Constructor(pass in parameters)
    Set CreateStaticClass = static

End Function 
```

**4.**您现在可以通过调用 CreateStaticClass('parameters').MethodName('parameters') 来使用“静态”类，不需要初始化实例，因为这是通过工厂方法完成的

**5.（可选）**如果您想强制执行单例实例，您可以创建一个充当单例容器的模块 - 包括一个私有实例变量和一个公共访问器属性。可选地，您可以使用 'let' setter 来允许用新的 [static] 类“替换”单例（使用不同的构造函数参数 - 参见 #2,3）。使用 'Let' 作为设置器，因此您可以在不使用 'set' ala OO 语言的情况下分配单例

```
Private curStaticClass as StaticClass

Public Property Get CurrentStaticClass() As StaticClass 

    If curStaticClass Is Nothing Then Set curStaticClass = CreateStaticClass

    Set CurrentStaticClass = curStaticClass  

End Property

Public Property Let CurrentStaticClass(value As StaticClass)

    If Not (curStaticClass Is Nothing) Then Set curStaticClass = Nothing

    Set curStaticClass = value 

End Property 
```

**6.**分配单例：

```
CurrentStaticClass = CreateStaticClass(parameters) 
```

**7.**使用单例：

```
[value = ] CurrentStaticClass.MethodName(parameters) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-12-28T12:36:48.323

那（“公共共享”）只能在 VB.Net 中工作。

没有办法在 VBA（或 VB）中定义类方法。我建议在模块中创建一个公共函数。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-07-04T12:45:44.690

您可以尝试将`VB_PredeclaredId`您希望为静态的类的属性设置为`True`. 这将创建类的默认实例，其方式与 VBA 中的表单工作方式非常相似（请注意，您可以直接引用它们而无需创建实例。我知道这不是最佳实践，但它是可能的）。

这意味着您将拥有更多的单例类，但它可以满足您的要求......

您不能直接从 VBA IDE 本身进行设置，但是，您可以执行以下步骤：

**1.**将您希望设为静态的类导出到文件夹。

**2.**在您喜欢的文本编辑器中打开`.cls`您导出的文件并更改条目`VB_PredeclaredId`，使其显示为`VB_PredeclaredId = True`.

**3.**保存文件并重新导入 VBA。

然后，您应该能够在类上调用您的公共方法，而无需实例化该类。请记住，`Initialize`仅在第一次执行类方法/访问类属性时才调用该方法，并且`Terminate`永远不会调用该方法。因此，您可能希望编写自己的构造函数，并确保在需要时显式调用析构函数。

参考：[UtterAccess.com 单例示例](https://web.archive.org/web/20160418020100/http://www.utteraccess.com/wiki/Index.php/Singleton "UtterAccess 单例示例")

参考：http: [//msdn.microsoft.com/en-us/library/ee199159.aspx](http://msdn.microsoft.com/en-us/library/ee199159.aspx)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-08-27T05:15:16.943

有点晚了，但到底是什么

VB6/VBA 中没有类或静态方法。但是您可以明确说明模块的名称。您不能拥有同名的模块和类，但您可以将其称为类似的名称。

所以我可以有一个名为 Employee 的类和一个名为 EmployeeUtil 的模块，然后我可以编写：

```
 Dim emp As Employee
  Dim code As String
  Set emp = EmployeeUtil.Create( "Smith", "John", 21-Feb-1988)
  code = "123XY"
  If EmployeeUtil.IsCodeValid( code) Then
    emp.Code = code
  Else
    emp.Code = EmployeeUtil.DefaultCode
  EndIf 
```

是的，这些值是硬编码的，代码处理可能应该在属性设置器下，但这不是我想要说明的重点。EmployeeUtil 本质上是非实例成员的占位符。

您会注意到 Create 方法以这种方式为我们提供了 Employee 类的伪构造函数。该函数所做的只是创建一个 Employee 实例，通过属性设置器分配参数，然后返回该实例。如果你在很多地方构造对象的实例，那么这可以节省很多代码。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-28T16:29:23.483

AFAIK，你能得到的最接近（而且不是那么接近）是使用“匿名”实例，所以像这样：

```
With New NotReallyStaticClass
    .PerformNotReallyStatic Method, OnSome, Values
End With 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-09-08T03:59:41.367

虽然这并不是对问题本身的严格回答，但我想指出应该避免使用 Mike Woodhouse 的解决方案。每次创建一个对象的新实例都会影响性能，而且它实际上并没有解决原来的问题——它不创建静态对象，也不提供静态方法。

由于 VBA 没有类函数的概念，因此最接近的方法是在模块中使用函数。

至于工厂方法，我建议创建一个模块，并在模块正在创建的类的名称后附加工厂一词。就像是：

```
'Module PersonFactory
Option Explicit

Public Function Create(ByVal sName As String) As Person

    'Code here

End Function 
```

这与其他语言的静态方法概念相去甚远，但至少它提供了一种可以在项目中使用的模式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-12-07T01:28:34.073

类似类的实例化属性可用于静态类。必须指定它的实例化属性“GlobalMultUse”。

静态类示例：

```
' Error Class in ClassInstancing ActiveDLL project
Option Explicit

Private m_errorID As Integer
Private m_Description As String

Public Property Get ErrorID() As Integer
ErrorID = m_errorID
End Property

Public Property Let ErrorID(ByVal vNewValue As Integer)
m_errorID = vNewValue
End Property

Public Property Get Description() As string
    Description = m_Description
End Property

Public Property Let Description(ByVal vNewValue As string)
    m_Description = vNewValue
End Property

Public Function Error() As Error
    Dim errorInstance As New ClassInstancing.Error

    With errorInstance
        .ErrorID = Me.ErrorID
        .Description = Me.Description
    End With

    Set Error = errorInstance
End Function

Public Sub RaiseError(ByVal pErrorID As Integer, ByVal errorSource As String, ByVal errorDesc As String)
Err.Raise pErrorID, errorSource, errorDesc
End Sub

Public Sub ShowError()
   MsgBox "Error ID: " & CStr(Me.ErrorID) & vbCrLf & _
    "Desc: " & Me.Description
End Sub 
```

GlobalMultiUse Instancing 属性将类指定为一组...

在其他标准 EXE 项目中使用此全局（静态！）类的示例：

```
Private Sub Command1_Click()

    ClassInstancing.Description = "Sample-1 error using !"
    ClassInstancing.ErrorID = 9990

    'Dim multiuseClass As ClassInstancing.Error
    'Set multiuseClass = ClassInstancing.Error

    MsgBox ClassInstancing.Error.ErrorID & vbCrLf & ClassInstancing.Error.Description, vbInformation, "Sample Usage 1"

    ClassInstancing.Description = "Sample-2 error using !"
    ClassInstancing.ErrorID = 1110

    ClassInstancing.ShowError
End Sub 
```

最后，MSDN 中的注释（（MSDN Library Visual Studio 6.0，'Instancing Property'））：

> 全球多用途。与 MultiUse 类似，但增加了一点：类的属性和方法可以像简单的全局函数一样被调用。没有必要首先显式创建类的实例，因为会自动创建一个。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2009-02-19T12:12:45.947

您必须先声明 p2 才能使用 Set ，如下所示：

将 p2 调暗为 Person

完成此操作后，您必须使用标准赋值替换 Set 语句： p2 = Person.Create("Bob")

在功能中：删除“设置”关键字......这也可能是错误的根源。

我瞎了眼，但从逻辑上讲，这似乎应该可行。我是在 VBA 中使用类模块的新手，但它们与使用 VB.Net 属性并没有太大区别。

# posix - 在 Winsock 中混合文件句柄和套接字

> ID：396118
> 
> 赞同：6
> 
> 时间：2008-12-28T12:07:11.143
> 
> 标签：posix, winsock, sockets

我正在将一些代码从 BSD 套接字移植到 Winsock，但我不确定如何处理下面的情况。

我的原始应用程序在标准输入和网络套接字上运行一个选择：

```
FD_SET(sock, &fd);
FD_SET(0, &fd);
...
if (select(..., &fd, ... )...) 
```

尝试在 Winsock 中运行它会出现错误 10038 (WSAENOTSOCK)，这是有道理的，因为 Linux 中的文件句柄 0 (stdin) 不是 Windows 中的套接字（更准确地说：SOCKET 类型）。

有没有一种简单的方法可以将此测试移植到 Windows 套接字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T15:08:53.820

我很想得到纠正，但据我所知，Winsock 并没有超出套接字的范围。也就是说，Unix 的 select()、read()、write() 等系统调用的“一切都是文件”理念在 Winsock 中不存在。

我确信你可以只使用处理套接字和控制台句柄的 Win32 API 来做类似的事情，但它看起来不再像 Winsock（或 BSD）了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T02:20:59.967

Winsock 的 select() 仅适用于套接字。一个更“Windows-y”的替代方案是在两个句柄上使用[异步 I/O](http://msdn.microsoft.com/en-us/library/aa365683.aspx)，然后在[WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/ms687025.aspx)上使用。

# vb.net - 获取 VB.NET 中最常用的应用程序

> ID：396128
> 
> 赞同：4
> 
> 时间：2008-12-28T12:22:29.163
> 
> 标签：vb.net

有没有一种方法可以让我通过 VB.NET 获得最常用的应用程序？我正在开发一种爱好项目作为快速启动器之类的东西，并认为这将完美地放在主窗体上。

如果可能的话，有人可以向我解释添加/删除应用程序如何设法获得使用应用程序的频率吗？如果我也能在 XP/Vista 开始菜单之类的列表中找到它，那就太好了。

任何指导将不胜感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-07T12:53:14.247

看起来您可以在注册表项中找到有关程序运行频率的信息：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\UserAssist\ 
```

[这里](http://personal-computer-tutor.com/abc3/v29/vic29.htm)有更多解释和一个 .NET 程序[，](http://blog.didierstevens.com/programs/userassist/)您可以使用 VB.Net 进行逆向工程以获取计数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T18:28:37.177

这可能是一个不错的起点。似乎 Windows 在确定应用程序使用频率方面做得很糟糕。

[http://blogs.msdn.com/oldnewthing/archive/2004/07/09/178342.aspx](http://blogs.msdn.com/oldnewthing/archive/2004/07/09/178342.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-07T11:15:36.613

根据此贴文，信息存储在 SlowInfoCache 注册表值的前 28 个字节中，可在以下键中找到[：](http://www.experts-exchange.com/Programming/Languages/Q_21602796.html)

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Management\ARPCache 
```

值的格式是（在 VB.Net 中）：

```
Structure SlowInfoCache
        Dim cLen As Integer         ' size of the SlowInfoCache (552 bytes)
        Dim Flag As Boolean         ' has a name
        Dim Size As Long            ' program size in bytes
        Dim LastUsed As Long        ' API-style FILETIME
        Dim Frequency As Integer    ' 0-2 = rarely; 3-9 = occassionaly; 10+ = frequently
        Dim Path As String          ' remaining 524 bytes (max path of 260 + null) in unicode
End Structure 
```

如果您对“控制面板”->“添加或删除程序”中显示的其他信息感兴趣，您会发现它在以下注册表项下为每个产品列出：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-07T15:13:09.893

您应该问自己的一个问题是您将如何确定频率？

您是要基于应用程序运行的次数，还是基于应用程序运行的时间长度？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-07T13:07:06.310

或者当然这些解决方案只跟踪​​shell（explorer.exe）何时通过快捷方式启动程序（所有开始菜单项都是快捷方式）。这就是为什么它如此不准确。

FWIW 我不知道有任何微型计算机操作系统可以跟踪程序映像的执行频率。

我建议您的启动器工具最初使用快速启动栏中的快捷方式填充它，并让用户真正轻松地进行配置，而不是尝试自动执行任何操作 - 无法按照用户期望的方式工作的自动操作是用户界面设计中最烦人的方面之一。

# winforms - 能够在 WinForms 中显示富文本的 gridview 控件

> ID：396130
> 
> 赞同：0
> 
> 时间：2008-12-28T12:28:05.377
> 
> 标签：winforms, controls, grid

我正在寻找一个 WinForms 控件，它允许我以类似表格的方式显示数据，但具有一些丰富的内容，例如不同的字体颜色、图像。我不需要数据绑定等，只需要一个“RichTextBox 控件表”。我想自己建立这样的控件并不难，但我想我会先问...

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-29T00:10:49.123

您始终可以选择创建自己的 DataGridView 列类型。我最近做了几次，发现效果很好。只需很少的代码和 GDI 知识就可以组合出非常棒的东西。

你想在你的网格中显示什么信息？

# .net - 多核使用、线程、线程池

> ID：396137
> 
> 赞同：9
> 
> 时间：2008-12-28T12:36:52.783
> 
> 标签：.net, multithreading, multicore

我有一些关于多线程编程和多核使用的问题。

特别是我想知道操作系统和/或框架（这是.NET）如何处理大量使用的核心。

这是我关于线程的问题：

*   当产生一个新线程时，将线程分配给特定核心的算法是什么？
    1.  循环算法类型
    2.  随机的
    3.  目前使用最少的核心
*   如果不是当前使用最少的核心，那么确定这种类型的代码是否会使线程的典型使用相形见绌，从而使事情变得更糟？
*   线程在其生命周期内是否从一个核心移动到另一个核心？如果是这样，这是为了处理由于某种原因被“过度使用”的内核，因此操作系统会尝试将线程转移到使用较少的内核以帮助系统？如果不是，再次，为什么不呢？

我的最后一个问题，基本上是对上述内容的重用，是关于 .NET ThreadPool 类的，它处理诸如 .BeginInvoke 之类的事情。这门课做这些事情吗？如果不是，为什么不，或者应该这样做？

有什么办法可以调整这种处理方式，在操作系统中暗示这个特定线程，当你给它分配一个内核时请多加注意，因为我知道它会使用很多 cpu。这有意义吗？或者“很多cpu”只是相对的，因此还不够好？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-28T13:14:01.227

> 当产生一个新线程时，将线程分配给特定核心的算法是什么？

这完全取决于操作系统。答案通常是经过大量修改的循环方案。每 x 毫秒，一个核心被中断，并在其上放置一个新线程（因此没有“最少使用的核心”。只要有线程准备好运行，每个核心都会有事可做）。

*在 Windows 中，我相信总是*选择优先级最高的线程/进程来执行。（因此，如果您有一个进程在单核系统上以高优先级运行，该进程可能会在 100% 的时间内运行，从而使所有其他进程都处于饥饿状态。当然，这仅适用于该进程永不阻塞的情况，这在现实中。

当然，因为像 Windows 这样的现代操作系统很复杂，所以它还有很多其他功能。某些进程有时会得到优先处理，但根据经验，Windows 总是会选择高优先级进程（这就是为什么你可以通过在单核时代给予进程“实时”优先级来几乎冻结你的计算机)

在 Linux 下，优先级较低的进程也会定期调度，只是不那么频繁。

但是你能做的最好的通常是假设操作系统会制定一个公平的方案，然后尝试与系统的其余部分配合得很好。（当你无事可做时让/阻塞/睡眠，允许其他线程运行）。

> 线程在其生命周期内是否从一个核心移动到另一个核心？

当然。假设您在双核系统上运行三个线程。向我展示一个不涉及在内核之间定期移动线程的公平时间表。

> 我的最后一个问题，基本上是对上述内容的重用，是关于 .NET ThreadPool 类的，它处理诸如 .BeginInvoke 之类的事情。这门课做这些事情吗？如果不是，为什么不，或者应该这样做？什么东西？线程调度和选择要运行的内核？不，线程池只是一种将线程重用于多个任务的机制，而不是必须为每个任务创建一个新线程，然后再关闭它。
> 
> 有什么方法可以调整这种处理方式，在操作系统中暗示这个特定线程

这就是线程/进程优先级的用途。如果您的线程必须获得大量 CPU 时间，即使有其他 CPU 密集型线程正在运行，请提高线程的优先级。但要小心处理。通常，运行的 CPU 密集型线程并不多，这意味着即使在正常优先级下，您也将获得 99.9% 的 CPU 时间。正如我所说，Windows 会非常积极地调度优先级更高的线程，所以只有在你*真的认真*时才提高优先级。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-28T13:25:06.930

除了 jalf 出色而全面的答案，请记住，“并行扩展”（应该被纳入 .NET 4.0）有*很多*代码专门用于将工作（从队列）均匀地分配给核心，包括工作窃取，以及潜在的掘金喜欢关心哪个核心与工作所在的内存“最接近”。

因此，使用 .NET 4.0，使用诸如此类的东西`Parallel.For`，您应该可以免费获得很多。总的来说，操作系统足够聪明，*只能*从局外人的角度来看。jalf 给出了很多关于幕后发生的事情的细节，但*大多数*时候你不需要这个级别的细节，除非你正在用高线程代码解决一些性能问题。

# c# - 在 xml 中创建自己的设置

> ID：396139
> 
> 赞同：4
> 
> 时间：2008-12-28T12:41:13.633
> 
> 标签：c#, asp.net, configuration-files

我在一个 ASP.NET 项目中，我需要向要安装网站的管理员提供几个参数，例如：

```
AllowUserToChangePanelLayout
AllowUserToDeleteCompany 
```

ETC...

我的问题是，使用我自己的 configSession 或添加为配置文件变量将其添加到 web.config 文件中会是一件好事吗？还是我应该为此创建一个 XML 文件？

你做什么，有什么缺点和最喜欢的？

我最初考虑的是 web.config，但后来我意识到我应该搞乱网站配置和我自己的 Web 应用程序配置，我应该创建一个不同的文件，我读[了这篇文章](http://www.aspcode.net/Your-own-configuration-setting-section-in-webconfig.aspx)，现在我在这个地方......我应该这样做还是那样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-28T12:56:52.680

我通常使用设置 - 可通过项目属性 - 设置。这些可以编辑并保存在代码中，我编写了一个表单/网页来编辑它们。

如果你想使用 XML 配置，有一个名为 file 的属性可以读取外部文件。你可以有一个 web.config 文件和一个 someothername.config 文件。someothername.config 将具有如下设置：

```
<appSettings>
    <add key="ConnString" value="my conn string" />
    <add key="MaxUsers" value="50" />
</appSettings> 
```

而 web.config 会有

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings file="ExternalWeb.config">
        <add key="MyKey" value="MyValue" />
    </appSettings>
</configuration> 
```

有关我窃取的示例，请参见[DevX](http://www.devx.com/vb2themax/Tip/18880)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T14:13:55.943

只是为了让你们知道我做了[配置](https://stackoverflow.com/users/9536/configurator)器推荐的东西，但有一点不同。

而不是一直要求（我需要）

```
System.Configuration.ConfigurationManager.AppSettings["myKey"]; 
```

我刚刚创建了一个静态类，它将使用我们称为强类型值的内容提取这些值（因此您无需记住所有值）

**mySettings**类_

```
public static class mySettings
{
    public enum SettingsType
    { UserPermitions, WebService, Alerts }
    public enum SectionType
    { AllowChangeLayout, AllowUserDelete, MaximumReturnsFromSearch, MaximumOnBatch, SendTo }

    public static String GetSettings(SettingsType type, SectionType section)
    {
        return
            ConfigurationManager.AppSettings[
                String.Format("{0}_{1}",
                    Enum.Parse(typeof(SettingsType), type.ToString()).ToString(),
                    Enum.Parse(typeof(SectionType), section.ToString()).ToString())
            ];
    }
} 
```

**web.config** appSettings部分

```
<configuration>
  <appSettings file="myApp.config">
    <add key="UserPermitions_AllowChangeLayout" value="" />
    <add key="UserPermitions_AllowUserDelete" value="" />    

    <add key="WebService_MaximumReturnsFromSearch" value="" /> 

    <add key="Alerts_SendTo" value="" />
    <add key="Alerts_MaximumOnBatch" value="" />
  </appSettings>
</configuration> 
```

整个**myApp.config**文件

```
<?xml version="1.0" encoding="utf-8" ?>
<!--
###
### This file serves the propose of a quick configuration.
### Administrator can either change this values directly or use the 
###   Settings tab in the application.
###
-->
<appSettings>

  <!-- *** User Access Configuration *** -->
  <!-- Allow user to change the panels layout {1: Yes} {0: No} -->
  <add key="UserPermitions_AllowChangeLayout" value="1" />
  <!-- Allow user to delete a company fro monitoring -->
  <add key="UserPermitions_AllowUserDelete" value="1" />

  <!-- *** Web Service configuration *** -->
  <!-- Maximum responses from the search service -->
  <add key="WebService_MaximumReturnsFromSearch" value="10" />

  <!-- *** Allerts configuration *** -->
  <!-- Send the alerts to the email writeen below -->
  <add key="Alerts_SendTo" value="bruno.in.dk@gmail.com" />
  <!-- Send an alert when user import more than the number bellow -->
  <add key="Alerts_MaximumOnBatch" value="10" />

</appSettings> 
```

所以，现在我这样称呼：

```
p.value = mySettings.GetSettings(
             mySettings.SettingsType.WebService, 
             mySettings.SectionType.MaximumReturnsFromSearch); 
```

希望能帮助有同样问题的人:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T09:21:32.777

您也可以将配置放在设置文件中。在您的项目中，打开属性并转到设置， [如下所示](http://i.stack.imgur.com/HX8XB.gif)

要访问代码中的值，请使用`Properties.Settings.YourSettingName;`

用于`Properties.Settings.Default.Reload();`在运行时刷新您的设置

# visual-studio - VSTS 单元测试的问题。无法提供 C++ DLL

> ID：396142
> 
> 赞同：0
> 
> 时间：2008-12-28T12:49:49.433
> 
> 标签：visual-studio, unit-testing

我正在使用 VSTS Unitesting 平台。我正在尝试测试一种方法，该方法获取对程序集的引用，这些程序集又包含 DllImport 到 C++ DLL。

为了让它工作，我需要复制 C++ DLL 以驻留在 EXE 和 DLL 正在运行的同一目录中。

当然，当我在 Unittest 中使用相同的代码时，我还需要提供这些 DLL。我发现 Unittest 框架我们使用 $(Solution)\TestResults[WorkSpace] [DateTime]\Out 作为工作目录。

如果我手动将 C++ DLL 复制到此目录，则单元测试的工作就像一个魅力。

问题是每次运行 Unitest 时都会创建一个新目录。

有人遇到过吗？你有解决方案吗？

谢谢，爱丽儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-28T14:57:04.420

您可以尝试使用 [DeploymentItem] 属性。它允许您从解决方案文件中指定一个相对路径，该文件将被复制到测试输出目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T19:18:34.663

正如史蒂夫 D 提到的，部署项目是这里的答案。您可以将它们放在类上，或者使用属性测试方法，或者使用测试运行配置来添加它们，以便当从该解决方案运行任何测试时，它们将被部署。

另一种选择是确保它们位于某个路径中，以便应用标准窗口查找 DLL 规则，并且运行时将能够找到它们。

为什么这是个问题？因为从项目到 Native DLL 几乎没有元数据——我们不知道如何获取它。唯一的选择是深入部署的托管 dll 中的所有类型，寻找 DllImport 属性。但是，如果您在托管代码中执行显式 DLLLoads，这将失败。

# .net - .NET 开源项目和强命名程序集？

> ID：396143
> 
> 赞同：27
> 
> 时间：2008-12-28T12:51:30.647
> 
> 标签：.net, open-source, strongname

我目前正在考虑开源我的一个项目，并且正在准备要向公众发布的源代码和项目结构。现在我有一个问题：我应该如何处理我的程序集的签名密钥？我应该为开源版本创建一个新密钥并将其与其他文件一起发布到 SVN 存储库吗？我应该把密钥放在外面，每个想要编译代码的人都应该生成自己的密钥吗？

你怎么处理这个？我对向公众发布签名密钥感到有点不舒服。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-28T13:23:43.517

对于[Protocol Buffers](https://github.com/google/protobuf)，我释放密钥。是的，这意味着人们实际上不能相信它是原始的二进制文件——但对于任何想要稍微修改代码、重建它并且仍然能够从另一个签名程序集中使用它的人来说，它让生活变得更加轻松。

如果有人真的想要一个协议缓冲区版本，他们可以相信它绝对是用 GitHub 的代码构建的合法版本，他们可以轻松地从他们信任的源代码自己构建它。

我当然可以从双方看到它。*我想如果我正在编写一个围绕安全性*的开源项目，那可能是另一回事。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-20T03:34:45.880

不要松开钥匙。

您应该对向公众发布签名密钥感到不舒服。它不是*项目的签名*。这是**你的签名**。仅当您将密钥保密时，才能维护二进制文件签名的完整性。释放密钥颠覆了已签名程序集和强命名的含义和意图，从而引入了新的错误可能性，从而使每个系统的可靠性降低。*不要松开钥匙*。

对于[DotNetZip](http://dotnetzip.codeplex.com)，我不释放密钥。但这里有一个关键点：关键不属于项目；这是**我的钥匙**。许多人要求提供密钥，以便他们可以重新构建签名的二进制文件，但这没有任何意义。我使用密钥签署的不仅仅是 DotNetZip。根据定义，使用该密钥签名的任何二进制文件都由我签名。使用我的密钥具有相同强名称的任何两个二进制文件都保证是相同的。释放密钥会消除这些保证，并破坏强名称的整个目的以及围绕它们的安全性。

想象一下开发人员选择他们自己的版本号，并用我的密钥重新签署修改后的二进制文件。现在世界将有 2 个具有相同强名称但内容不同的程序集。

想象一下，如果我能够使用您的密钥签署*任何程序集。*如果你释放了你的密钥，我可以添加我喜欢的任何代码——甚至是恶意代码——然后对其进行签名，然后偷偷地将你的任何“好的”签名二进制文件替换为“坏”的二进制文件。没有人能够分辨出其中的区别。

这已破了。自由共享密钥完全消除了使用签名程序集的任何优势。

如果人们想修改项目中的代码，然后在强名称程序集中重新使用修改后的版本，他们可以使用自己的密钥对修改后的版本进行签名。这并不难。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-12-28T12:59:32.097

我不会公开发布密钥。拥有签名程序集的全部意义在于人们可以相信您是唯一接触二进制文件的人，因此如果添加了任何非法代码，则签名将被关闭，人们知道不信任该程序集。

签署程序集可以保护您免受其他人将“坏”代码添加到您的二进制文件并假装它是合法版本的影响。

# css - 如何使用 CSS 为所有浏览器垂直居中 div 元素？

> ID：396145
> 
> 赞同：1551
> 
> 时间：2008-12-28T12:57:16.377
> 
> 标签：css, cross-browser, alignment, vertical-alignment, centering

我想`div`用 CSS 垂直居中。我不想要表格或 JavaScript，而只想要纯 CSS。我找到了一些解决方案，但它们都缺少 Internet Explorer 6 支持。

```
<body>
    <div>Div to be aligned vertically</div>
</body> 
```

如何`div`在所有主流浏览器（包括 Internet Explorer 6）中垂直居中？

* * *

## 回答 #1

> 赞同：1488
> 
> 时间：2011-05-31T03:13:13.010

下面是我可以构建的最好的全方位解决方案，用于垂直和水平居中固定宽度、**灵活高度**的内容框。它已经过测试并适用于最新版本的 Firefox、Opera、Chrome 和 Safari。

```
.outer {
  display: table;
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
}

.middle {
  display: table-cell;
  vertical-align: middle;
}

.inner {
  margin-left: auto;
  margin-right: auto;
  width: 400px;
  /* Whatever width you want */
}
```

```
<div class="outer">
  <div class="middle">
    <div class="inner">
      <h1>The Content</h1>
      <p>Once upon a midnight dreary...</p>
    </div>
  </div>
</div>
```

[查看具有动态内容的工作示例](http://emergentweb.com/test/valign.html)

我内置了一些动态内容来测试灵活性，并且很想知道是否有人发现它有任何问题。它也应该适用于居中的叠加层——灯箱、弹出窗口等。

* * *

## 回答 #2

> 赞同：313
> 
> 时间：2014-12-17T18:30:23.173

最简单的方法是以下**三行**CSS：

**1）位置：相对；**

**2) 最高：50%；**

**3) 变换：translateY(-50%)；**

以下是一个**例子**：

```
div.outer-div {
  height: 170px;
  width: 300px;
  background-color: lightgray;
}

div.middle-div {
  position: relative;
  top: 50%;
  -webkit-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);
}
```

```
<div class='outer-div'>
  <div class='middle-div'>
    Test text
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：304
> 
> 时间：2013-08-13T03:08:30.350

还有一个我在列表中看不到的：

```
.Center-Container {
  position: relative;
  height: 100%;
}

.Absolute-Center {
  width: 50%;
  height: 50%;
  overflow: auto;
  margin: auto;
  position: absolute;
  top: 0; left: 0; bottom: 0; right: 0;
  border: solid black;
} 
```

*   跨浏览器（包括 Internet Explorer 8 - 没有 hack 的 Internet Explorer 10！）
*   响应百分比和最小值/最大值
*   居中而不考虑填充（没有盒子大小！）
*   `height`必须声明（参见[可变高度](https://www.smashingmagazine.com/2013/08/absolute-horizontal-vertical-centering-css/#Height)）
*   `overflow: auto`防止内容溢出的推荐设置（请参阅溢出）

[来源：[CSS 中的绝对水平和垂直居中](https://www.smashingmagazine.com/2013/08/absolute-horizontal-vertical-centering-css)]

* * *

## 回答 #4

> 赞同：175
> 
> 时间：2016-12-15T13:08:17.490

现在[Flexbox](https://en.wikipedia.org/wiki/CSS_Flexible_Box_Layout)解决方案对于现代浏览器来说是一种非常简单的方法，所以我向您推荐这个：

```
.container {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  background: green;
}

body,
html {
  height: 100%;
}
```

```
<div class="container">
  <div>Div to be aligned vertically</div>
</div>
```

* * *

## 回答 #5

> 赞同：140
> 
> 时间：2008-12-28T15:15:06.723

实际上，您需要两个 div 用于垂直居中。包含内容的 div 必须具有宽度和高度。

```
#container {
  position: absolute;
  top: 50%;
  margin-top: -200px;
  /* Half of #content height */
  left: 0;
  width: 100%;
}

#content {
  width: 624px;
  margin-left: auto;
  margin-right: auto;
  height: 395px;
  border: 1px solid #000000;
}
```

```
<div id="container">
  <div id="content">
    <h1>Centered div</h1>
  </div>
</div>
```

这是[结果](http://jsfiddle.net/ssPDD/)。

* * *

## 回答 #6

> 赞同：80
> 
> 时间：2014-02-20T21:05:30.537

2020 年编辑：仅当您需要支持[Internet Explorer 8](https://en.wikipedia.org/wiki/Internet_Explorer_8)等旧浏览器时才使用此功能（您应该拒绝这样做）。如果没有，请使用[Flexbox](https://en.wikipedia.org/wiki/CSS_Flexible_Box_Layout)。

* * *

这是我找到的最简单的方法，我一直在使用它（[此处为 jsFiddle 演示](http://jsfiddle.net/Nhs6j/)）。

感谢 CSS Tricks 的 Chris Coyier[撰写本文](http://css-tricks.com/centering-in-the-unknown/)。

```
html, body{
  height: 100%;
  margin: 0;
}
.v-wrap{
    height: 100%;
    white-space: nowrap;
    text-align: center;
}
.v-wrap:before{
    content: "";
    display: inline-block;
    vertical-align: middle;
    width: 0;
    /* adjust for white space between pseudo element and next sibling */
    margin-right: -.25em;
    /* stretch line height */
    height: 100%;
}
.v-box{
    display: inline-block;
    vertical-align: middle;
    white-space: normal;
}
```

```
<div class="v-wrap">
    <article class="v-box">
        <p>This is how I've been doing it for some time</p>
    </article>
</div>
```

支持从 Internet Explorer 8 开始。

* * *

## 回答 #7

> 赞同：76
> 
> 时间：2015-05-19T12:04:16.877

经过大量研究，我终于找到了最终的解决方案。它甚至适用于浮动元素。[查看源代码](http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css)

```
.element {
    position: relative;
    top: 50%;
    transform: translateY(-50%); /* or try 50% */
} 
```

* * *

## 回答 #8

> 赞同：58
> 
> 时间：2016-03-30T01:30:13.590

使用[CSS Flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox) `align-items`属性来实现这一点。

```
html, body {
    height: 100%;
}

body {
  display: flex;
  align-items: center;
}
```

```
<div>This is centered vertically</div>
```

* * *

## 回答 #9

> 赞同：37
> 
> 时间：2013-08-13T04:06:03.797

要将 div 在页面上居中，[请检查 fiddle link](http://jsfiddle.net/xKH7w/)。

```
#vh {
    margin: auto;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
}
.box{
    border-radius: 15px;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.4);
    padding: 25px;
    width: 100px;
    height: 100px;
    background: white;
}
```

```
<div id="vh" class="box">Div to be aligned vertically</div>
```

另一种选择是使用弹性框，[检查小提琴链接](http://jsfiddle.net/abbasmhd/56mc4e2u/)。

```
.vh {
    background-color: #ddd;
    height: 400px;
    align-items: center;
    display: flex;
}
.vh > div {
    width: 100%;
    text-align: center;
    vertical-align: middle;
}
```

```
<div class="vh">
    <div>Div to be aligned vertically</div>
</div>
```

另一种选择是使用 CSS 3 转换：

```
#vh {
    position: absolute;
    top: 50%;
    left: 50%;
    /*transform: translateX(-50%) translateY(-50%);*/
    transform: translate(-50%, -50%);
}
.box{
    border-radius: 15px;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.4);
    padding: 25px;
    width: 100px;
    height: 100px;
    background: white;
}
```

```
<div id="vh" class="box">Div to be aligned vertically</div>
```

* * *

## 回答 #10

> 赞同：23
> 
> 时间：2018-03-07T06:11:27.430

最简单的解决方案如下：

```
.outer-div{
  width: 100%;
  height: 200px;
  display: flex;
  border:1px solid #000;
}
.inner-div{
  margin: auto;
  text-align: center;
  border: 1px solid red;
}
```

```
<div class="outer-div">
  <div class="inner-div">
    Hey there!
  </div>
</div>
```

* * *

## 回答 #11

> 赞同：22
> 
> 时间：2008-12-28T17:09:26.650

不幸的是——但并不奇怪——解决方案比人们希望的要复杂。同样不幸的是，您需要在要垂直居中的 div 周围使用其他 div。

对于 Mozilla、Opera、Safari 等符合标准的浏览器，您需要将外部 div 设置为显示为*表格*，将内部 div 设置为显示为*表格单元格*——然后可以垂直居中。对于 Internet Explorer，您需要将内部 div*绝对**定位*在外部 div 内，然后将*顶部*指定为*50%*。以下页面很好地解释了这种技术并提供了一些代码示例：

 ****   [CSS中的垂直居中](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)
*   [未知高度的 CSS 中的垂直居中（与 Internet Explorer 7 兼容）](http://web.archive.org/web/20101107022613/http://www.laboratoriocaffeina.it/design/2007/05/11/vertical-centering-in-css-with-unknown-height-ie7-compatible.html)（存档文章由 Wayback Machine 提供）

还有一种使用 JavaScript 进行垂直居中的技术。[内容与 JavaScript 和 CSS 的垂直对齐](http://www.alistapart.com/d/footers/footer_variation1.html)证明了这一点。

* * *

## 回答 #12

> 赞同：20
> 
> 时间：2014-05-15T15:25:42.873

如果有人只关心 Internet Explorer 10（及更高版本），请使用[Flexbox](https://en.wikipedia.org/wiki/CSS_Flexible_Box_Layout)：

```
.parent {
    width: 500px;
    height: 500px;
    background: yellow;

    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;

    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;

    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
}

.centered {
    width: 100px;
    height: 100px;
    background: blue;
}
```

```
<div class="parent">
    <div class="centered"></div>
</div>
```

Flexbox 支持：[http ://caniuse.com/flexbox](http://caniuse.com/flexbox)

* * *

## 回答 #13

> 赞同：17
> 
> 时间：2014-10-20T13:37:54.740

将元素垂直居中的现代方法是使用[`flexbox`](http://css-tricks.com/snippets/css/a-guide-to-flexbox/).

你需要一个父母来决定身高和一个孩子来居中。

下面的示例将 div 居中到浏览器的中心。重要的是（在我的示例中）设置`height: 100%`为`body`，`html`然后设置`min-height: 100%`为您的容器。

```
body, html {
  background: #F5F5F5;
  box-sizing: border-box;
  height: 100%;
  margin: 0;
}

#center_container {
  align-items: center;
  display: flex;
  min-height: 100%;
}

#center {
  background: white;
  margin: 0 auto;
  padding: 10px;
  text-align: center;
  width: 200px;
}
```

```
<div id='center_container'>
  <div id='center'>I am center.</div>
</div>
```

* * *

## 回答 #14

> 赞同：14
> 
> 时间：2016-01-21T02:11:42.850

# 仅垂直居中

如果您不关心 Internet Explorer 6 和 7，则可以使用涉及两个容器的技术。

## 外容器：

*   应该有`display: table;`

## 内部容器：

*   应该有`display: table-cell;`
*   应该有`vertical-align: middle;`

## 内容框：

*   应该有`display: inline-block;`

您可以将任何您想要的内容添加到内容框中，而无需关心它的宽度或高度！

## **演示：**

```
body {
    margin: 0;
}

.outer-container {
    position: absolute;
    display: table;
    width: 100%; /* This could be ANY width */
    height: 100%; /* This could be ANY height */
    background: #ccc;
}

.inner-container {
    display: table-cell;
    vertical-align: middle;
}

.centered-content {
    display: inline-block;
    background: #fff;
    padding: 20px;
    border: 1px solid #000;
}
```

```
<div class="outer-container">
   <div class="inner-container">
     <div class="centered-content">
        Malcolm in the Middle
     </div>
   </div>
</div>
```

另见[**这个小提琴**](https://jsfiddle.net/Lr4eay5e/1/)！

* * *

# 水平和垂直居中

如果要水平和垂直居中，还需要以下内容。

## 内部容器：

*   应该有`text-align: center;`

## 内容框：

*   应该将水平文本对齐重新调整为例如`text-align: left;`或`text-align: right;`，除非您希望文本居中

## **演示：**

```
body {
    margin: 0;
}

.outer-container {
    position: absolute;
    display: table;
    width: 100%; /* This could be ANY width */
    height: 100%; /* This could be ANY height */
    background: #ccc;
}

.inner-container {
    display: table-cell;
    vertical-align: middle;
    text-align: center;
}

.centered-content {
    display: inline-block;
    text-align: left;
    background: #fff;
    padding: 20px;
    border: 1px solid #000;
}
```

```
<div class="outer-container">
   <div class="inner-container">
     <div class="centered-content">
         Malcolm in the Middle
     </div>
   </div>
</div>
```

另见[**这个小提琴**](https://jsfiddle.net/Lr4eay5e/4/)！

* * *

## 回答 #15

> 赞同：13
> 
> 时间：2017-09-22T14:48:32.270

```
.center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%); /* (x, y)  => position */
  -ms-transform: translate(-50%, -50%); /* IE 9 */
  -webkit-transform: translate(-50%, -50%); /* Chrome, Safari, Opera */    
}

.vertical {
  position: absolute;
  top: 50%;
  //left: 0;
  transform: translate(0, -50%); /* (x, y) => position */
}

.horizontal {
  position: absolute;
  //top: 0;
  left: 50%;
  transform: translate(-50%, 0); /* (x, y)  => position */
}

div {
  padding: 1em;
  background-color: grey; 
  color: white;
} 
```

```
<body>
  <div class="vertical">Vertically left</div>
  <div class="horizontal">Horizontal top</div>
  <div class="center">Vertically Horizontal</div>  
</body>
```

相关：[将图像居中](https://stackoverflow.com/questions/16702881/center-image-vertical-and-horizontal/46375063#46375063)

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2019-06-28T10:11:51.297

**使用 CSS 的 flex 属性。**

```
.parent {
    width: 400px;
    height:200px;
    background: blue;
    display: flex;
    align-items: center;
    justify-content:center;
}

.child {
    width: 75px;
    height: 75px;
    background: yellow;
}
```

```
<div class="parent">
    <div class="child"></div>
</div>
```

或通过**使用`display: flex;`和`margin: auto;`**

```
.parent {
    width: 400px;
    height:200px;
    background: blue;
    display: flex;
}

.child {
    width: 75px;
    height: 75px;
    background: yellow;
    margin:auto;
}
```

```
<div class="parent">
    <div class="child"></div>
</div>
```

**显示文本中心**

```
.parent {
    width: 400px;
    height: 200px;
    background: yellow;
    display: flex;
    align-items: center;
    justify-content:center;
}
```

```
<div class="parent">Center</div>
```

**使用百分比（%）高度和宽度。**

```
.parent {
    position: absolute;
    height:100%;
    width:100%;
    background: blue;
    display: flex;
    align-items: center;
    justify-content:center;
}

.child {
    width: 75px;
    height: 75px;
    background: yellow;
}
```

```
<div class="parent">
    <div class="child"></div>
</div> 
```

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2011-07-22T05:55:13.163

当我不得不回到[这个问题](http://phrogz.net/css/vertical-align/index.html)时，这总是我要去的地方。

对于那些不想跳的人：

1.  将父容器指定为`position:relative`或`position:absolute`。
2.  在子容器上指定一个固定高度。
3.  在子容器上设置`position:absolute`和`top:50%`以将顶部向下移动到父容器的中间。
4.  设置 margin-top:-yy ，其中 yy 是子容器高度的一半以向上偏移项目。

代码中的一个示例：

```
<style type="text/css">
    #myoutercontainer {position:relative}
    #myinnercontainer {position:absolute; top:50%; height:10em; margin-top:-5em}
</style>
...
<div id="myoutercontainer">
    <div id="myinnercontainer">
        <p>Hey look! I'm vertically centered!</p>
        <p>How sweet is this?!</p>
    </div>
</div> 
```

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2016-09-27T05:53:55.803

我刚刚写了这个 CSS，要了解更多信息，请阅读：[这篇文章用 3 行 CSS 垂直对齐任何东西](http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/)。

```
.element {
    position: relative;
    top: 50%;
    transform: perspective(1px) translateY(-50%);
} 
```

* * *

## 回答 #19

> 赞同：8
> 
> 时间：2021-06-15T04:21:33.347

它可以通过两种方式完成

```
body{
left: 50%; 
top:50%; 
transform: translate(-50%, -50%); 
height: 100%; 
width: 100%; 
} 
```

或者

使用弹性

```
body {
    height:100%
    width:100%
    display: flex;
    justify-content: center;
    align-items: center;
} 
```

`align-items:center;`使内容垂直居中

`justify-content: center;`使内容水平居中

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2019-06-20T06:25:09.517

对于新手，请尝试：

```
display: flex;
align-items: center;
justify-content: center; 
```

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2015-09-18T09:08:52.833

这三行代码`transform`在现代浏览器和 Internet Explorer 上几乎可以使用：

```
.element{
     position: relative;
     top: 50%;
     transform: translateY(-50%);
     -moz-transform: translateY(-50%);
     -webkit-transform: translateY(-50%);
     -ms-transform: translateY(-50%);
} 
```

我添加了这个答案，因为我在这个答案的先前版本中发现了一些不完整（并且 Stack Overflow 不允许我简单地发表评论）。

1.  如果当前 div 在 body 中并且没有容器 div，则 'position' relative 会破坏样式。然而“固定”似乎有效，但它显然修复了视口中心的内容 ![位置：相对](https://i.imgur.com/mY9GPYA.png)

2.  此外，我使用这种样式来使一些覆盖 div 居中，并发现在 Mozilla 中，这个转换后的 div 内的所有元素都失去了它们的底部边框。可能是渲染问题。但是仅向其中一些添加最小的填充就可以正确呈现它。Chrome 和 Internet Explorer（出人意料地）无需任何填充即可渲染这些框 ![没有内部填充的 Mozilla](https://i.imgur.com/Ac2HSUM.png) ![带有填充物的 Mozilla](https://i.imgur.com/wVrNn64.png)

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2019-02-10T08:40:47.537

## CSS 网格

```
body, html { margin: 0; }

body {
  display: grid;
  min-height: 100vh;
  align-items: center;
}
```

```
<div>Div to be aligned vertically</div>
```

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2014-07-04T09:03:27.453

Billbad 的答案仅适用于固定宽度的`.inner`div。此解决方案通过将属性添加`text-align: center`到`.outer`div 来实现动态宽度。

```
.outer {
  position: absolute;
  display: table;
  width: 100%;
  height: 100%;
  text-align: center;
}
.middle {
  display: table-cell;
  vertical-align: middle;
}
.inner {
  text-align: center;
  display: inline-block;
  width: auto;
}
```

```
<div class="outer">
  <div class="middle">
    <div class="inner">
      Content
    </div>
  </div>
</div>
```

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2015-03-17T06:20:45.027

就这样做：在你的添加类`div`：

```
.modal {
  margin: auto;
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  height: 240px;
} 
```

并阅读[这篇文章](http://www.smashingmagazine.com/2013/08/09/absolute-horizontal-vertical-centering-css/)以获得解释。注：`Height`是必须的。

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2013-01-26T18:02:21.700

我是这样做的（相应地更改宽度、高度、上边距和左边距）：

```
.wrapper {
    width: 960px;
    height: 590px;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -295px;
    margin-left: -480px;
} 
```

```
<div class="wrapper"> -- Content -- </div> 
```

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2017-11-20T15:02:19.727

不回答浏览器兼容性问题，但也提到新的 Grid 和不太新的 Flexbox 功能。

**网格**

来自：[Mozilla - 网格文档 - 垂直对齐 Div](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Box_Alignment_in_CSS_Grid_Layout#Center_an_item_in_the_area "Mozilla 网格文档")

浏览器支持：[网格浏览器支持](https://caniuse.com/#search=grid)

CSS：

```
.wrapper {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-gap: 10px;
  grid-auto-rows: 200px;
  grid-template-areas: 
    ". a a ."
    ". a a .";
}
.item1 {
  grid-area: a;
  align-self: center;
  justify-self: center;
} 
```

HTML：

```
<div class="wrapper">
 <div class="item1">Item 1</div>
</div> 
```

**弹性盒**

浏览器支持：[Flexbox 浏览器支持](https://caniuse.com/#search=flexbox)

CSS：

```
display: -webkit-box;
display: -moz-box;
display: -ms-flexbox;
display: -webkit-flex;
display: flex;
align-items: center;
justify-content: center; 
```

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2018-01-23T11:57:07.617

我认为不使用 Flexbox 的所有浏览器的可靠解决方案 - “align-items: center;” 是 display: table 和 vertical-align: middle; 的组合。

### CSS

```
.vertically-center
{
    display: table;

    width: 100%;  /* Optional */
    height: 100%; /* Optional */
}

.vertically-center > div
{
    display: table-cell;
    vertical-align: middle;
} 
```

### HTML

```
<div class="vertically-center">
    <div>
        <div style="border: 1px solid black;">some text</div>
    </div>
</div> 
```

‣演示：[https ://jsfiddle.net/6m640rpp/](https://jsfiddle.net/6m640rpp/)

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2021-04-01T22:31:11.883

```
.center{
    display: grid;
    place-items: center;
} 
```

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2014-11-20T09:28:36.507

特别是对于具有相对（未知）高度的父 div，[未知解决方案中的居中](http://css-tricks.com/centering-in-the-unknown/)对我来说非常有用。文章中有一些非常好的代码示例。

它在 Chrome、Firefox、Opera 和 Internet Explorer 中进行了测试。

```
/* This parent can be any width and height */
.block {
  text-align: center;
}

/* The ghost, nudged to maintain perfect centering */
.block:before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

/* The element to be centered, can
   also be of any width and height */ 
.centered {
  display: inline-block;
  vertical-align: middle;
  width: 300px;
}
```

```
<div style="width: 400px; height: 200px;">
   <div class="block" style="height: 90%; width: 100%">
  <div class="centered">
	 <h1>Some text</h1>
	 <p>Any other text..."</p>
  </div> 
   </div>
</div>
```

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2017-08-29T05:49:21.057

使用 Flexbox 可以轻松地将内容居中。以下代码显示了内容需要居中的容器的 CSS：

```
.absolute-center {
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;

    -ms-flex-align: center;
    -webkit-align-items: center;
    -webkit-box-align: center;

    align-items: center;
} 
```

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2019-04-09T08:12:11.437

我最近发现了一个技巧：你需要使用`top 50%`，然后你做一个`translateY(-50%)`.

```
.outer-div {
  position: relative;
  height: 150px;
  width: 150px;
  background-color: red;
}

.centered-div {
  position: absolute;
  top: 50%;
  -webkit-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);
  background-color: white;
}
```

```
<div class='outer-div'>
  <div class='centered-div'>
    Test text
  </div>
</div>
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2013-08-11T18:35:13.573

我发现这个最有用...它提供了最准确的“H”布局，并且非常易于理解。

这个标记的好处是你可以在一个地方定义你的内容大小 -> “PageContent”。

页面背景的颜色及其水平边距在其相应的 div 中定义。

```
<div id="PageLayoutConfiguration"
     style="display: table;
     position:absolute; top: 0px; right: 0px; bottom: 0px; left: 0px;
     width: 100%; height: 100%;">

    <div id="PageBackground"
         style="display: table-cell; vertical-align: middle;
         background-color: purple;">

        <div id="PageHorizontalMargins"
             style="width: 100%;
             background-color: seashell;">

            <div id="PageContent"
                 style="width: 1200px; height: 620px; margin: 0 auto;
                 background-color: grey;">

                 My content goes here...

            </div>
        </div>
    </div>
</div> 
```

在这里用 CSS 分隔：

```
<div id="PageLayoutConfiguration">
     <div id="PageBackground">
          <div id="PageHorizontalMargins">
               <div id="PageContent">
                     my content goes here...
               </div>
          </div>
     </div>
</div> 
```

```
#PageLayoutConfiguration{
   display: table;
   width: 100%;
   height: 100%;
   position: absolute;
   top: 0px;
   right: 0px;
   bottom: 0px;
   left: 0px;
}

#PageBackground{
   display: table-cell;
   vertical-align: middle;
   background-color: purple;
}

#PageHorizontalMargins{
   style="width: 100%;
   background-color: seashell;
}
#PageContent{
   width: 1200px;
   height: 620px;
   margin: 0 auto;
   background-color: grey;
} 
```

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2014-07-21T09:00:17.423

我用这个。它适用于 Internet Explorer 8 及更高版本：

`height:268px`- 对于`display:table`像最小高度这样的行为。

CSS：

```
* {
  padding: 0;
  margin: 0;
}
body {
  background: #cc9999;
}
p {
  background: #f0ad4e;
}
#all {
  margin: 200px auto;
}
.ff-valign-wrap {
  display: table;
  width: 100%;
  height: 268px;
  background: #ff00ff;
}
.ff-valign {
  display: table-cell;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  background: #ffff00;
} 
```

HTML：

```
<body>

  <div id="all">
    <div class="ff-valign-wrap">
      <div class="ff-valign">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet, animi autem doloribus earum expedita, ipsum laboriosam nostrum nulla officiis optio quam quis quod sunt tempora tenetur veritatis vero voluptatem voluptates?</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet, animi autem doloribus earum expedita, ipsum laboriosam nostrum nulla officiis optio quam quis quod sunt tempora tenetur veritatis vero voluptatem voluptates?</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet, animi autem doloribus earum expedita, ipsum laboriosam nostrum nulla officiis optio quam quis quod sunt tempora tenetur veritatis vero voluptatem voluptates?</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet, animi autem doloribus earum expedita, ipsum laboriosam nostrum nulla officiis optio quam quis quod sunt tempora tenetur veritatis vero voluptatem voluptates?</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet, animi autem doloribus earum expedita, ipsum laboriosam nostrum nulla officiis optio quam quis quod sunt tempora tenetur veritatis vero voluptatem voluptates?</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet, animi autem doloribus earum expedita, ipsum laboriosam nostrum nulla officiis optio quam quis quod sunt tempora tenetur veritatis vero voluptatem voluptates?</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet, animi autem doloribus earum expedita, ipsum laboriosam nostrum nulla officiis optio quam quis quod sunt tempora tenetur veritatis vero voluptatem voluptates?</p>
      </div>
    </div>
  </div>

</body> 
```

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2015-12-23T17:09:11.713

以下内容适用于我的情况，并在 Firefox 中进行了测试。

```
#element {
    display: block;
    transform: translateY(50%);
    -moz-transform: translateY(50%);
    -webkit-transform: translateY(50%);
    -ms-transform: translateY(50%);
} 
```

div 的高度和父级的高度是动态的。当同一个父元素上存在高于目标元素的其他元素时，我会使用它，其中两者都水平内联定位。

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2017-08-31T13:23:02.840

这个解决方案对我来说适用于块元素（例如，<div>）。我使用颜色使解决方案更清晰。

**HTML：**

```
<main class="skin_orange">
    <p>As you can the the element/box is vertically centered</p>
    <div class="bigBox skin_blue">Blue Box</div>
</main> 
```

**CSS：**

```
main {
    position: relative;
    width: 400px;
    height: 400px;
}

.skin_orange {
    outline: thin dotted red;
    background: orange;
}

.bigBox {
    width: 150px;
    height: 150px;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
}

.skin_blue {
    background-color: blue;
} 
```

[JSFiddle 代码演示](https://jsfiddle.net/efebirol/26zLrys3/)

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2014-12-16T05:07:12.027

我刚刚找到了另一种对我有用的方法：

```
<div class="container">
  <div class="vertical">
     <h1>Welcome</h1>
     <h2>Aligned Vertically</h2>
     <a href="#">Click ME</a>
   </div>
</div> 
```

### CSS

```
.vertical{
  top: 50%;
  -webkit-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);
} 
```

[更多信息](http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/)

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2015-02-07T11:45:02.767

垂直和水平**中心**

HTML

```
<div id="dialog">Centered Dialog</div> 
```

CSS

```
#dialog {
    position:fixed; top:50%; left:50%; z-index:99991;
    width:300px; height:60px;
    margin-top:-150px;  /* half of the width */
    margin-left:-30px; /* half of the height */} 
```

享受！

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2015-02-10T09:59:38.260

通过使用该`transform`属性，我们可以轻松地做一个垂直居中的 div。

```
.main-div {
    background: none repeat scroll 0 0 #999;
    font-size: 18px;
    height: 450px;
    max-width: 850px;
    padding: 15px;
}

.vertical-center {
    background: none repeat scroll 0 0 #1FA67A;
    color: #FFFFFF;
    padding: 15px;
    position: relative;
    top: 50%;
    transform: translateY(-50%);
    -moz-transform: translateY(-50%);
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -o-transform: translateY(-50%);
}
```

```
<div class="main-div">
    <div class="vertical-center">
        <span>"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."</span>
    </div>
</div>
```

[全文见这里](http://code.ciphertrick.com/2015/02/10/vertically-center-div-using-css3/)

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2015-08-26T03:17:28.983

最好的办法是：

```
#vertalign{
  height: 300px;
  width: 300px;
  position: absolute;
  top: calc(50vh - 150px); 
} 
```

150 像素，因为在这种情况下这是 div 高度的一半。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2015-10-27T17:01:16.270

声明这个 Mixin：

```
@mixin vertical-align($position: relative) {
  position: $position;
  top: 50%;
  -webkit-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);
} 
```

然后将其包含在您的元素中：

```
.element{
    @include vertical-align();
} 
```

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2016-04-05T17:36:54.553

这是迄今为止最简单的方法，也适用于非阻塞元素。唯一的缺点是它是 Flexbox，因此，较旧的浏览器将不支持此功能。

```
<div class="sweet-overlay">
    <img class="centered" src="http://jimpunk.com/Loading/loading83.gif" />
</div> 
```

CodePen 链接：

[http://codepen.io/damianocel/pen/LNOdRp](http://codepen.io/damianocel/pen/LNOdRp)

这里重要的一点是，对于垂直居中，我们需要定义一个父元素（容器），并且 img 的高度必须小于父元素。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2016-07-02T11:15:23.670

此方法不使用任何转换。所以输出变得模糊没有问题。

```
position: absolute;
width: 100vw;
top: 25%;
bottom: 25%;
text-align: center; 
```

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2019-11-24T20:27:03.520

因为每次我需要将 div 垂直居中时，我都会一遍又一遍地搜索它，而这个答案总是首先出现，我会把它留给未来的我（因为所提供的解决方案都不能很好地满足我的需要）：

因此，如果已经在使用引导程序，则可以按以下方式完成：

```
<div style="min-height: 100vh;" class="align-items-center row">
    <div class="col" style="margin: auto; max-width: 750px;"> //optional style to center horizontally as well

    //content goes here

    </div>
</div> 
```

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2021-07-07T06:38:25.843

我为想要的人分享了简短版本。

```
.firstDivision {
  display: table;
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
}

.firstDivision .verticalCenter {
  text-align: center;
  display: table-cell;
  vertical-align: middle;
}
```

```
<div class="firstDivision">
  <div class="verticalCenter">
    Text was centered for Vertical.
  </div>
</div>
```

* * *

## 回答 #45

> 赞同：-1
> 
> 时间：2015-03-13T19:42:58.093

要垂直对齐网页中的框，包括 Internet Explorer 6，您可以使用：

1.  有条件的评论
2.  该`haslayout`物业
3.  `display: table-value`为其他人（现在灵活）

[小提琴](https://jsfiddle.net/h8z24s5v/embedded/result/)

```
/* Internet Explorer 8 and others */
.main {
  width: 500px;
  margin: auto;
  border: solid;
}
html {
  height: 100%;
  width: 100%;
  display: table;
}
body {
  display: table-cell;
  vertical-align: middle;
}
```

```
<!-- [if lte IE 7]>
<style> /* Should be in the <head> */
    html, body , .ie {
        height: 100%;
        text-align: center;
        white-space: nowrap;
    }
    .ie , .main{
        display: inline; /* Used with zoom in case you take a block element instead an inline element */
        zoom: 1;
        vertical-align: middle;
        text-align: left;
        white-space: normal;
    }
</style>
<b class="ie"></b>
<!--[endif]-->
<div class="main">
  <p>Fill it up with your content </p>
  <p><a href="https://jsfiddle.net/h8z24s5v/embedded/result/">JsFiddle versie</a></p>
</div>
```

实际上，Internet Explorer 7 会带来一些麻烦，因为它是唯一严格适用`height: 100%`于 HTML/body 元素的。

* * *

**但是，*这是过去和今天，谁仍然介意旧版本的 Internet Explorer，`table/table-cell`很好，`display: flex`很有希望，并且`display: grid`总有一天会出现。***

* * *

另一个现在通过 flex 的例子

```
html {
  display: flex;
  min-height: 100vh;/* or height */
}

body {
  margin: auto;
}
```

```
<div>Div to be aligned vertically</div>
```

* * *

## 回答 #46

> 赞同：-3
> 
> 时间：2015-03-26T01:25:59.757

这是一个简单的方法，几乎​​没有代码：

CSS 代码：

```
.main{
    height: 100%;
}

.center{
    top: 50%;
    margin-top: 50%;
} 
```

HTML 代码：

```
<div class="main">
    <div class="center">
        Hi, I am centered!
    </div>
</div> 
```

您的文字将在页面中间！

* * *

## 回答 #47

> 赞同：-4
> 
> 时间：2016-09-06T15:48:35.493

这在我的情况下有效（仅在现代浏览器中测试）：

```
.textthatneedstobecentered {
  margin: auto;
  top: 0; bottom: 0;
} 
```

# iphone - 从 iPhone 应用程序准备 SMS 消息

> ID：396149
> 
> 赞同：5
> 
> 时间：2008-12-28T13:03:24.213
> 
> 标签：iphone, sms

是否可以？开发人员可以使用 SMS URL 来填充电话号码，但我还没有找到填充消息正文的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-28T22:39:45.937

在 NDA 被取消之前对这个话题的另一种看法：

[如何以编程方式在 iPhone 上发送短信？](https://stackoverflow.com/questions/10848/how-to-programmatically-send-sms-on-the-iphone)

无法找到解决方案。“sms:” URL 有效，但不尊重“body”标签。作为建议，向 Apple 发送功能请求。您不会是第一个请求此功能的人，但尽管他们似乎保持沉默，但 Apple 确实阅读了每个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T21:52:53.847

这目前无法通过 iPhone SDK 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T14:29:57.267

我不认为这是可能的。

# java - 在 JFrame 中自动调整 JPanel 的大小

> ID：396156
> 
> 赞同：11
> 
> 时间：2008-12-28T13:17:19.287
> 
> 标签：java, swing, size, jframe, jpanel

我有一个`JPanel`子类，我在其上添加按钮、标签、表格等。为了在屏幕上显示它，我使用`JFrame`：

```
MainPanel mainPanel = new MainPanel(); //JPanel subclass

JFrame mainFrame = new JFrame();
mainFrame.setTitle("main window title");
mainFrame.getContentPane().add(mainPanel);
mainFrame.setLocation(100, 100);
mainFrame.pack();
mainFrame.setVisible(true);
mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

但是当我调整窗口大小时，面板的大小不会改变。即使调整大小，如何使面板的大小与窗口的大小相同？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-28T15:10:23.847

你可以设置一个像 BorderLayout 这样的布局管理器，然后更具体地定义你的面板应该去哪里：

```
MainPanel mainPanel = new MainPanel();
JFrame mainFrame = new JFrame();
mainFrame.setLayout(new BorderLayout());
mainFrame.add(mainPanel, BorderLayout.CENTER);
mainFrame.pack();
mainFrame.setVisible(true); 
```

这会将面板置于框架的中心区域，并在调整框架大小时使其自动增长。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-28T14:18:12.843

您需要为要使用的 JFrame 设置一个布局管理器 - 这涉及如何定位组件。一个有用的是 BorderLayout 管理器。

只需添加以下代码行即可解决您的问题：

```
mainFrame.setLayout(new BorderLayout()); 
```

（在将组件添加到 JFrame 之前执行此操作）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-03T10:04:00.503

如果我们朋友提供的BorderLayout选项不起作用，请尝试在JFrame中添加ComponentListerner并实现componentResized(event)方法。当 JFrame 对象将被调整大小时，将调用此方法。因此，如果您在此方法中编写代码来设置 JPanel 的大小，您将达到预期的效果。

是的，我知道这个“解决方案”不好，但将其用作安全网。;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-24T06:27:55.897

根据我的经验，我使用了 GridLayout。

```
 thePanel.setLayout(new GridLayout(a,b,c,d)); 
```

a = 行号，b = 列号，c = 水平间距，d = 垂直间距。

例如，如果我想创建面板：

*   无限行（设置 a = 0）
*   1 列（设置 b = 1）
*   垂直间隙 = 3（设置 d = 3）

代码如下：

```
 thePanel.setLayout(new GridLayout(0,1,0,3)); 
```

当您想将 JScrollPane 添加到您的 JPanel 时，此方法很有用。JScrollPane 里面的 JPanel 的大小会在你添加一些组件时自动改变，所以 JScrollPane 会自动重置滚动条。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-07T10:48:27.447

正如其他海报所说，您需要更改正在使用的 LayoutManager。我总是更喜欢使用 GridLayout，这样你的代码就会变成：

```
MainPanel mainPanel = new MainPanel();
JFrame mainFrame = new JFrame();
mainFrame.setLayout(new GridLayout());
mainFrame.pack();
mainFrame.setVisible(true); 
```

当您希望面板占据整个屏幕时，GridLayout 在概念上对我来说似乎更正确。

# database - 暴露数据库 ID - 安全风险？

> ID：396164
> 
> 赞同：163
> 
> 时间：2008-12-28T13:42:46.643
> 
> 标签：database, security

我听说公开数据库 ID（例如在 URL 中）是一种安全风险，但我无法理解为什么。

关于为什么它是风险的任何意见或链接，或者为什么它不是？

编辑：当然访问是有范围的，例如，如果你看不到资源`foo?id=123`，你会得到一个错误页面。否则 URL 本身应该是保密的。

编辑：如果 URL 是秘密的，它可能会包含一个生成的令牌，该令牌具有有限的生命周期，例如有效期为 1 小时并且只能使用一次。

编辑（几个月后）：我目前的首选做法是使用 UUIDS 作为 ID 并公开它们。如果我使用序列号（通常用于某些数据库的性能）作为 ID，我喜欢为每个条目生成一个 UUID 令牌作为备用键，并公开它。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2008-12-28T19:45:43.400

暴露数据库标识符存在风险。另一方面，在完全不暴露它们的情况下设计 Web 应用程序将是非常繁重的。因此，重要的是要了解风险并小心应对。

第一个危险是 OWASP 所说的[“不安全的直接对象引用”。](https://wiki.owasp.org/index.php/Top_10_2013-A4-Insecure_Direct_Object_References)如果有人发现了一个实体的 id，而您的应用程序缺乏足够的授权控制来阻止它，他们可能会做您不打算做的事情。

这里有一些好的规则可以遵循：

1.  使用基于角色的安全性来控制对操作的访问。如何做到这一点取决于您选择的平台和框架，但许多支持声明式安全模型，当操作需要某些权限时，该模型会自动将浏览器重定向到身份验证步骤。
2.  使用编程安全性来控制对对象的访问。这在框架级别更难做到。更常见的是，您必须将其写入代码，因此更容易出错。这种检查超越了基于角色的检查，它不仅确保用户具有操作权限，而且还确保对正在修改的特定对象具有必要的权限。在基于角色的系统中，很容易检查只有经理可以加薪，但除此之外，您需要确保员工属于特定经理的部门。

有一些方案可以对最终用户隐藏真实标识符（例如，真实标识符与服务器上临时的、用户特定的标识符之间的映射），但我认为这是一种默默无闻的安全形式。我想专注于保持真正的加密秘密，而不是试图隐藏应用程序数据。在 Web 上下文中，它也与广泛使用的 REST 设计背道而驰，其中标识符通常出现在 URL 中以寻址受访问控制的资源。

另一个挑战是标识符的预测或发现。攻击者发现未经授权对象的最简单方法是从编号序列中猜测它。以下指南可以帮助减轻这种情况：

3.  仅公开不可预测的标识符。出于性能考虑，您可以在数据库内的外键关系中使用序列号，但您希望从 Web 应用程序引用的任何实体也应该具有不可预测的代理标识符。这是唯一应该向客户公开的内容。为这些使用随机 UUID 是分配这些代理密钥的实用解决方案，即使它们在密码学上并不安全。

4.  然而，在密码学上不可预测的标识符是必要的一个地方是在会话 ID 或其他身份验证令牌中，其中 ID 本身对请求进行身份验证。这些应该由加密 RNG 生成。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2017-06-26T23:18:40.307

虽然不是***数据安全***风险，但这绝对是***商业智能安全***风险，因为它暴露了数据大小和速度。我已经看到企业因此受到伤害，并且深入地撰写了有关这种反模式的文章。除非你只是在做一个实验而不是做生意，否则我强烈建议你不要公开你的私人身份。[https://medium.com/lightrail/prevent-business-intelligence-leaks-by-using-uuids-instead-of-database-ids-on-urls-and-in-apis-17f15669fd2e](https://medium.com/lightrail/prevent-business-intelligence-leaks-by-using-uuids-instead-of-database-ids-on-urls-and-in-apis-17f15669fd2e)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2008-12-28T14:01:43.063

这取决于 ID 代表什么。

考虑一个出于竞争原因不想公开他们拥有多少成员但通过使用顺序 ID 在 URL 中显示它的网站：[http ://some.domain.name/user?id=3933](http://some.domain.name/user?id=3933)

另一方面，如果他们改用用户的登录名：[http](http://some.domain.name/user?id=some) ://some.domain.name/user?id=some ，他们没有透露用户不知道的任何内容。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2008-12-28T13:59:06.220

一般的想法是这样的：“尽可能少地向任何人透露有关您的应用程序内部运作的信息。”

公开数据库 ID 算作泄露一些信息。

原因是黑客可以使用有关您的应用程序内部工作的任何信息来攻击您，或者用户可以更改 URL 以进入他/她不应该看到的数据库？

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2008-12-28T19:53:05.790

我们使用 GUID 作为数据库 ID。泄漏它们的危险性要小得多。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-28T13:55:59.160

如果您在数据库中使用整数 ID，您可以通过更改 qs 变量让用户轻松查看他们不应该看到的数据。

例如，用户可以轻松更改此 qs 中的 id 参数并查看/修改他们不应该[http://someurl?id=1的数据](http://someurl?id=1)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-28T19:34:18.760

当您将数据库 ID 发送给您的客户端时，您必须在这两种*情况*下检查安全性。如果您将 id 保留在您的网络会话中，您可以选择是否想要/需要这样做，这意味着可能会减少处理。

您一直在尝试将事情委派给您的访问控制；）您的应用程序*可能*就是这种情况，但在我的整个职业生涯中，我从未见过如此一致的后端系统。他们中的大多数都有为非 Web 使用而设计的安全模型，有些在死后添加了额外的角色，其中一些已经被固定在核心安全模型之外（因为角色是在不同的操作环境中添加的，比如说在网络之前）。

所以我们使用合成会话本地 ID，因为它隐藏了我们可以逃脱的尽可能多的东西。

还有非整数键字段的问题，枚举值和类似情况可能就是这种情况。您可以尝试清理这些数据，但很可能您最终会像[小鲍比掉落表](http://xkcd.com/327)一样。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2020-11-29T00:20:40.423

从代码设计的角度来看，数据库 ID 应该被认为是持久化技术的私有实现细节，以跟踪一行。如果可能，您应该在设计应用程序时绝对不以任何方式引用此 ID。相反，您应该考虑一般如何识别实体。一个人的社会安全号码是否被识别？一个人是否通过他们的电子邮件来识别？如果是这样，您的帐户模型应该只引用这些属性。如果没有真正的方法来识别具有此类字段的用户，那么您应该在访问数据库之前生成 UUID。

Doing so has a lot of advantages as it would allow you to divorce your domain models from persistence technologies. That would mean that you can substitute database technologies without worrying about primary key compatibility. Leaking your primary key to your data model is not necessarily a security issue if you write the appropriate authorization code but its indicative of less than optimal code design.

# php - 在 PHP 中只允许某些字符

> ID：396166
> 
> 赞同：5
> 
> 时间：2008-12-28T13:48:16.197
> 
> 标签：php, regex

我需要检查变量是否包含除 az AZ 0-9 和“。”之外的任何内容。字符（句号）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-28T14:52:31.357

有两种方法可以做到这一点。

判断变量是否包含任何*不在*允许范围内的字符。这是通过使用负字符类 [^...] 来实现的：

```
preg_match('/[^a-zA-Z0-9\.]/', $your_variable); 
```

另一种选择是确保字符串中的每个字符*都*在允许的范围内：

```
!preg_match('/^[a-zA-Z0-9\.]*$/', $your_variable); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-28T13:53:13.737

```
if (preg_match("/[^A-Za-z0-9.]/", $myVar)) {
   // make something
} 
```

这里的关键点是在 [] 组中使用“^” - 它匹配除括号内的字符之外的每个字符。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-28T14:09:02.800

```
if (preg_match('/[^A-Z\d.]/i', $var))
  print $var; 
```

# ruby - Ruby 中的循环依赖

> ID：396168
> 
> 赞同：12
> 
> 时间：2008-12-28T13:49:04.680
> 
> 标签：ruby, require, circular-dependency

假设我们有两个类，Foo 和 Foo Sub，每个类分别位于不同的文件 foo.rb 和 foo_sub.rb 中。

foo.rb：

```
require "foo_sub"
class Foo
    def foo
        FooSub.SOME_CONSTANT
    end
end 
```

foo_sub.rb：

```
require "foo"
class FooSub < Foo
    SOME_CONSTANT = 1
end 
```

由于循环依赖，这不会起作用——我们不能在没有另一个的情况下定义任何一个类。我见过各种解决方案。我想避免其中两个——即将它们放在同一个文件中并删除循环依赖。因此，我发现的唯一其他解决方案是前向声明：

foo.rb：

```
class Foo
end
require "foo_sub"
class Foo
    def foo
        FooSub.SOME_CONSTANT
    end
end 
```

foo_sub.rb

```
require "foo"
class FooSub < Foo
    SOME_CONSTANT = 1
end 
```

不幸的是，如果我有三个文件，我将无法完成相同的工作：

foo.rb：

```
class Foo
end
require "foo_sub_sub"
class Foo
    def foo
        FooSubSub.SOME_CONSTANT
    end
end 
```

foo_sub.rb：

```
require "foo"
class FooSub < Foo
end 
```

foo_sub_sub.rb：

```
require "foo_sub"
class FooSubSub < FooSub
    SOME_CONSTANT = 1
end 
```

如果我需要 foo_sub.rb，那么 FooSub 是 foo_sub_sub.rb 中未初始化的常量。任何想法如何在不将它们放在同一个文件中或删除循环依赖的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-28T14:04:09.767

如果您需要从超类访问子类，那么您的模型很可能会损坏（即它应该是一个类）。

也就是说，有几个明显的解决方案：

1）只需创建一个需要 foo 文件的文件：

all_foos.rb：

```
require "foo.rb"
require "foo_sub.rb" 
```

并从 foo.rb 和 foo_sub.rb 中删除需求。

2) 从 foo.rb 中删除 require

3）从 foo_sub.rb 中删除 require 并将 require 放在类定义之后的 foo.rb 中。

Ruby 不是 C++，它不会抱怨 FooSub.SOME_CONSTANT 直到你调用 Foo#foo() ;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-10-10T02:25:02.503

另一个不错的选择是使用 Ruby 的自动加载功能。

它是这样工作的：

```
 module MyModule
      autoload :Class1, File.join(File.dirname(__FILE__), *%w[my_module class1.rb])
      autoload :Class2, File.join(File.dirname(__FILE__), *%w[my_module class2.rb])
      # Code for MyModule here
 end 
```

并在这里很好地描述：

[http://talklikeaduck.denhaven2.com/2009/04/06/all-that-you-might-require](http://talklikeaduck.denhaven2.com/2009/04/06/all-that-you-might-require)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-28T13:21:25.133

Sandi Metz 在她的 Practical Object-Oriented Design in Ruby (POODR) 一书中解释了这个问题的一个解决方案以及如何很好地解决这个问题。

她的建议（我倾向于同意，因为到目前为止它对我来说效果最好）是将子类`FooSub`注入到大师类`Foo`中。

这将在 foo.rb 中完成：

```
1   class Foo
2     def initialize(foo_sub:)
3     end
4   end 
```

为了保持干净的代码并使其易于更改，然后将其包装`foo_sub`在包装器方法中，因此您的类现在看起来像这样：

```
1   class Foo
2
3     attr_reader :foo_sub
4
5     def initialize(foo_sub:)
6       @foo_sub = foo_sub
7     end
8   end 
```

（这里，`attr_reader`设置了一个方法调用`foo_sub`，然后传入初始化哈希值的任何内容都是 foo_sub 的一个实例，因此`@foo_sub`（第 6 行）可以设置为方法的值`foo_sub`）。

您现在可以`FooSub`无需任何要求就可以拥有您的课程，使其独立于任何东西：

```
1   class FooSub
2     SOME_CONSTANT = 1
3   end 
```

你可以向你的`Foo`类添加一个可以访问#SOME_CONSTANT的方法：

```
1   class Foo
2
3     attr_reader :foo_sub
4
5     def initialize(foo_sub:)
6       @foo_sub = foo_sub
7     end
8     
9     def foo
10      foo_sub.SOME_CONSTANT
11    end
12  end 
```

实际上，通过这个，您正在设置一个返回 foo_sub 实例`@foo_sub`（在初始化时注入）的方法，并在其上附加了方法 #SOME_CONSTANT。您的班级只希望在初始化时注入的任何内容都响应#SOME_CONSTANT。所以要让它工作，你必须在 REPL（例如 IRB 或 PRY）中`FooSub`设置时注入你的类：`Foo`

```
PRY
[1]>   require 'foo'
[2]>   => true
[3]>   require 'foo_sub'
[4]>   => true
[5]>   foo_sub = FooSub.new
[6]>   => #<FooSub:0x007feb91157140>
[7]>   foo = Foo.new(foo_sub: foo_sub)
[8]>   => #<Foo:0x007feb91157735 @foo_sub=FooSub:0x007feb91157140>
[9]>   foo.foo
[10]>  => 1 
```

但是，如果您注入了其他东西，您最终会得到：

```
PRY
[1]>   require 'foo'
[2]>   => true
[3]>   require 'foo_sub'
[4]>   => true
[5]>   foo_sub = FooSub.new
[6]>   => #<FooSub:0x007feb91157140>
[7]>   foo = Foo.new(foo_sub: 'something else as a string')
[8]>   => #<Foo:0x007feb91157735 @foo_sub='something else as a string'>
[9]>   foo.foo
[10]>  => UNDEFINED CONSTANT #SOME_CONSTANT ERROR MESSAGE 
```

我不知道第 10 行的实际错误信息是什么，但按照这些思路思考。之所以会发生此错误，是因为您已经有效地尝试在字符串“其他字符串”上运行方法#SOME_CONSTANT，或者`'something else as a string'.SOME_CONSTANT`显然不起作用。

# c# - 共享一个 PrintDocument 实例

> ID：396169
> 
> 赞同：1
> 
> 时间：2008-12-28T13:49:49.173
> 
> 标签：c#, printdocument

在我的 WinForms 应用程序中，可以在许多位置打印数据。每次用户想要打印时，我都会创建一个新的 PrintDocument 实例，该实例用于当前的打印作业，然后进行处理。一切正常，但“打印”对话框始终设置回默认打印机及其默认参数。如果选择了另一台打印机，用户必须一次又一次地选择它。

创建一个全局 PrintDocument 实例并为整个应用程序的所有打印作业共享它是一种常见的方法吗？像这样将始终使用最后选择的打印机。或者还有其他方法吗？

谢谢你，彼得

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T14:04:39.923

您为什么不创建一个`PrinterSettings`实例并将其传递给`PrintDocument`您创建的每个实例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T22:45:43.240

您可以使用单例模式来定义 PrinterSettings 实例或 PrintDocument 实例，这样您就不必传递引用。

请参阅[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)

# javascript - IE7 中不显示 jQuery UI 对话框

> ID：396171
> 
> 赞同：0
> 
> 时间：2008-12-28T13:52:31.790
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui, xhtml

我终于`datepicker`可以在我的`MVC`演示站点和对话框上工作了。

我仍然有一些问题：对话框没有显示，`IE7`所以当我单击应该出现确认对话框的链接时，它只是删除了该行而不显示对话框。

`Firefox3`它在和中效果很好`Safari`。

[请在我的演示网站](http://www.tarsius.se)上亲自尝试。

单击菜单上的“Boka plats”链接。然后登录：

> 电子邮件：test@test.nu
> 
> 密码：测试员

登录时尝试单击“avboka”链接之一（这是在 Firefox 和 Safari 中显示对话框的位置）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T14:00:53.800

即由于页面中的第 113 行而出现问题：

```
$("#dialog").css("display", "inherit"); 
```

我尝试不使用此行或将其更改为阻止，它可以正常工作而没有错误。

# svn - 为什么 svn diff 有时会将工作文件复制到临时文件？

> ID：396176
> 
> 赞同：10
> 
> 时间：2008-12-28T13:57:07.613
> 
> 标签：svn, diff

我使用带有 Subversion 的外部 diff 工具（超越比较规则！），其中一个很棒的功能是能够使用 diff 程序对文件进行一些小的编辑，因为我正在查看我所做的更改。

但`svn diff`在我的不同项目上工作方式不同。总之，左边的文件是一个临时文件，包含存储在 Subversion（头）中的最新版本。但在某些情况下，右侧文件是实际的工作文件，而在其他情况下，它是工作文件的临时文件副本。在第一种情况下，我可以在 diff 程序中进行更改，它们会影响工作副本。在第二种情况下，我正在编辑一个临时文件，因此更改会丢失。

为什么 Subversion 有时会与工作文件比较，但有时会与工作文件的临时副本比较？如何让它始终使用工作文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-28T15:37:10.487

您是否在这些文件上设置了任何 svn:keywords ？如果是，那么 Subversion 将首先创建一个临时文件，其中包含所有扩展关键字“未扩展”。这是为了避免所有关键字行显示为不同，即使它们没有更改。

例如，如果您将工作副本中的文件与 BASE 进行比较，则 BASE 文件没有扩展关键字（并且也使用 LF 行尾存储），而工作副本中的文件具有扩展的所有关键字（并且可能使用 CRLF 存储线尾）。如果您没有在本地修改该文件，“svn diff”会将所有行显示为不同（如果行尾不匹配），或者至少所有带有关键字的行都将显示为不同 - 这不是您想要的预计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T14:01:56.653

也许有一些访问问题。尝试将文件设置为只读，如果 svn 现在打开一个临时文件，这是您问题的一个可能答案。在这种情况下，您使用的某些编辑器/IDE 可能会对文件进行写保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-12T11:58:00.423

[这封电子邮件谈到了替代解决方案。](https://svn.haxx.se/users/archive-2010-12/0394.shtml) 使用 $5 而不是 $7 来避免为 $svn diff 创建临时文件。通过 $5 后，在使用 --diff-cmd 执行 $svn diff 时，它使用本地文件而不是 tmp 文件。

我尝试过这个。它确实将本地文件与 svn repo 中的远程文件进行比较。在更改为 5 美元（从 7 美元）之前。Meld 总是比较两个临时文件。

**示例**：

**来自**：

```
$svn diff --diff-cmd=svn-diff-meld  -r 12345 ./dirToCompare

$ cat /usr/local/bin/svn-diff-meld
#!/bin/sh
# SVN Diff Wrapper for Meld

left="$6"
right="$7"
meld "$left" "$right" 
```

**至**：

```
$svn diff --diff-cmd=svn-diff-meld  -r 12345 ./dirToCompare

$ cat /usr/local/bin/svn-diff-meld
#!/bin/sh
# SVN Diff Wrapper for Meld

left="$6"
right="$5"
meld "$left" "$right" 
```

# macos - 如何在 Unix 中处理名称中包含空格的文件列表？

> ID：396181
> 
> 赞同：4
> 
> 时间：2008-12-28T14:01:56.513
> 
> 标签：macos, unix, list, shell, file

我正在尝试列出目录中的文件并在 Mac OS X 提示符下对它们执行某些操作。

它应该是这样的： for f in $(ls -1); 回声 $f; 完毕

如果我的文件名中没有空格（fileA.txt、fileB.txt），则回显可以正常工作。如果文件的名称中包含空格（“file A.txt”、“file B.txt”），我会得到 4 个字符串（file、A.txt、file、B.txt）。

我试过引用列表命令，但它只改变了问题。

如果我这样做： for f in $(ls -1); 回声 $f; 完成我得到：文件 A.txt\n文件 B.txt

（它显示正确，但它是一个字符串，我需要将 2 行分开。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-28T14:15:17.950

尽可能远离 ls 。使用 findutils 包中的 find 。

`find /target/path -type f -print0 | xargs -0 your_command_here`

`-print0`将导致 find 输出由 NUL 字符（ASCII 零）分隔的名称。xargs的`-0`参数告诉它也期望由 NUL 字符分隔的参数，所以一切都会正常工作。

替换`/target/path`为文件所在的路径。

`-type f`只会定位文件。用于`-type d`目录，或完全省略以获得两者。

替换`your_command_here`为您将用于处理文件名的命令。（注意：如果您从 shell 中使用 echo for your_command_here 运行它，您将在一行上得到所有内容 - 不要被那个 shell 工件弄糊涂，xargs 无论如何都会做预期的正确事情。）

编辑：或者（或者如果你没有 xargs），你可以使用效率低得多的

`find /target/path -type f -exec your_command_here \{\} \;`

`\{\} \;``{} ;`是当前处理文件的占位符的转义。然后 find 将调用`your_command_here`替换`{} ;`为文件名，并且由于`your_command_here`将由 find 而不是由 shell 启动，因此空格无关紧要。

第二个版本效率较低，因为 find 将为找到的每个文件启动一个新进程。如果 xargs 认为这样做是安全的，那么它足够聪明，可以将命令传递给新启动的进程。如果可以选择，请首选 xargs 版本。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-28T14:05:26.287

```
for f in *; do echo "$f"; done 
```

应该做你想做的。你为什么使用`ls`而不是`*`？

一般来说，在 shell 中处理空格是一个 PITA。看一下`$IFS`变量，或者更好的是 Perl、Ruby、Python 等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T14:13:49.030

**这是derobert** [http://www.cyberciti.biz/tips/handling-filenames-with-spaces-in-bash.html](http://www.cyberciti.biz/tips/handling-filenames-with-spaces-in-bash.html)讨论的使用 $IFS 的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T14:35:38.550

您可以将参数通过管道传输到`read`. 例如，对`cat`目录中的所有文件：

```
ls -1 | while read FILENAME; do cat "$FILENAME"; done 
```

这意味着您仍然可以使用`ls`，就像您在问题中所遇到的那样，或者任何其他产生`$IFS`分隔输出的命令。

在我看来，`while`循环使得对参数做几件事变得更容易，并使复杂的处理更具可读性。一个人为的例子：

```
ls -1 | while read FILE
do
    echo 1: "$FILE"
    echo 2: "$FILE"
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-06T01:04:56.690

看看 --quoting-style 选项。例如， --quoting-style=c 会产生：

> $ ls --quoting-style=c
> 
> “文件 1” “文件 2” “目录一”

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-12-28T14:12:23.263

查看 xargs 的手册页：

它是这样工作的：

ls -1 /tmp/*.jpeg | xargs rm

# c++ - 如何在 Visual Studio 2008 Express 中获得一个最小的 SDL 程序来编译和链接？

> ID：396183
> 
> 赞同：7
> 
> 时间：2008-12-28T14:03:48.333
> 
> 标签：c++, visual-studio, sdl

我正在尝试通过 Visual Studio 2008 Express 在 C++ 中使用 SDL。以下程序编译但不链接：

```
#include <SDL.h>

int main(int argc, char *argv[])
{
    return 0;
} 
```

链接错误是：

```
LINK : fatal error LNK1561: entry point must be defined 
```

无论我如何或是否与 SDL.lib 和 SDLmain.lib 链接，我都会得到这个。定义`main`为`main()`或`SDL_main()`给出相同的错误，有或没有`extern "C"`.

编辑：我通过在 main.cpp 中不包含 SDL.h 解决了这个问题——我做了一个独立于问题的重构。一个类似的解决方案是`#undef main`在定义函数之前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T15:53:55.617

我目前没有可用的 VC++，但我已经多次看到这个问题。

您需要创建一个 Win32 项目而不是控制台项目。Win32 项目需要一个[WinMain](http://msdn.microsoft.com/en-us/library/ms633559(VS.85).aspx)函数作为程序入口点。SDLmain.lib 包含此入口点，并且 SDL_main.h 头文件有一个宏，可将您的 main 函数重新映射到 SDL_main。此函数由 SDLmain 库中的入口点调用。

主函数必须具有以下签名：

```
int main(int argc, char *argv[]) 
```

还需要在声明主函数之前包含 SDL.h，并且需要链接到 SDL.lib 和 SDLmain.lib。

It looks like you are doing this. **So, my guess is that you have a console project setup.** Therefore, **the linker is looking for a main function to call, but it is getting remapped to SDL_main by the macro SDL_main.h**. So, the linker can't find an entry point and gives up!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T17:19:41.930

To me it helped to add the following lines before main():

```
#ifdef _WIN32
#undef main
#endif 
```

[German Wikipedia](http://de.wikibooks.org/wiki/SDL:_Die_erste_SDL-Anwendung) also suggests to add these lines instead:

```
#ifdef _WIN32
#pragma comment(lib, "SDL.lib")
#pragma comment(lib, "SDLmain.lib")
#endif 
```

Though I still had link errors when I tried second solution.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T15:31:49.780

链接器找不到入口点。这意味着您的 main() 函数不被识别为入口点。

如果您有 .def 文件，请将其删除。

此外，如果您已将项目设置为使用 unicode 而不是 mbcs 进行编译，则必须使用 wmain() 而不是 main()。

# coding-style - 将尽可能多的逻辑放在最少（单行）代码中的优点和缺点是什么？

> ID：396191
> 
> 赞同：4
> 
> 时间：2008-12-28T14:11:02.547
> 
> 标签：coding-style

酷吗？

IMO 单行代码降低了可读性并使调试/理解更加困难。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-28T14:21:11.870

最大限度地提高代码的可理解性。

有时这意味着将（简单、易于理解的）表达式放在一行中，以便在给定数量的屏幕空间（即源代码编辑器）中获得更多代码。

其他时候，这意味着采取一些小步骤来明确代码的含义。

单行应该是副作用，而不是目标（也不是要避免的事情）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-28T14:18:27.167

如果有一种简单的方法可以在一行代码中表达某些东西，那就太好了。如果只是将大量表达式填充到一行中，那就不太好了。

为了解释我的意思 - LINQ 允许您以相对简单的方式表达相当复杂的转换。这很好——但我不会尝试将一个巨大的 LINQ 表达式放在一行上。例如：

```
var query = from person in employees
            where person.Salary > 10000m
            orderby person.Name
            select new { person.Name, person.Deparment }; 
```

比以下更具可读性：

```
var query = from person in employees where person.Salary > 10000m orderby person.Name select new { person.Name, person.Deparment }; 
```

它*也*比手动进行所有过滤、排序和投影更易读。这是一个不错的甜蜜点。

试图变得“聪明”很少是一个好主意——但如果你能简单而简洁地表达一些东西，那就太好了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-28T14:40:48.010

如果使用得当，单行代码可以清楚地传达您的意图，并使您的代码结构更容易掌握。

一个 python 示例是列表推导：

```
new_lst = [i for i in lst if some_condition] 
```

代替：

```
new_lst = []
for i in lst:
    if some_condition:
        new_lst.append(i) 
```

这是一个常用的习惯用法，可以使您的代码更具可读性和紧凑性。因此，在某些情况下可以实现两全其美。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-28T14:27:21.407

根据定义，这是主观的，并且由于问题的模糊性，您可能会在整个地图上得到答案。您指的是单个物理线路还是逻辑线路？EG，你在说：

```
int x = BigHonkinClassName.GetInstance().MyObjectProperty.PropertyX.IntValue.This.That.TheOther; 
```

或者

```
int x = BigHonkinClassName.GetInstance().
        MyObjectProperty.PropertyX.IntValue.
        This.That.TheOther; 
```

对我来说，单线是“感觉正确”的问题。在上述情况下，我可能会将其分解为物理和逻辑行，获取 BigHonkinClassName 的实例，然后将完整路径拉到 .TheOther。但这只是我。其他人会不同意。（而且还有空间。就像我说的，主观的。）

关于可读性，请记住，对于许多语言，即使是“单行”也可以分成多行。`? :`例如，如果条件三元运算符（

```
int x = (/* some long condition */) ?
        /* some long method/property name returning an int */ :
        /* some long method/property name returning an int */ ; 
```

归根结底，答案总是：“视情况而定”。一些框架（例如许多 DAL 生成器、EG SubSonic）几乎需要非常长的单行代码才能完成任何实际工作。其他时候，将其分成多行是非常可取的。

给出具体的例子，社区可以提供更好、更实用的建议。

一般来说，我绝对不认为你应该将一堆代码“挤”到一条物理线上。这不仅会损害易读性，而且还带有完全鄙视维护程序员的人的味道。正如我曾经教给我的学生的那样：*总是*为维护程序员编写代码，因为通常是*你。*

:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-28T14:15:29.793

Oneliners 在某些情况下可能很有用

```
int value = bool ? 1 : 0; 
```

但在大多数情况下，它们使代码更难遵循。我认为你应该只在易于理解、意图明确且不影响调试的情况下将内容放在一行中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-28T15:01:55.750

单线应根据具体情况进行处理。有时它确实会损害可读性，应该使用更详细（阅读：易于理解）的版本。

然而，有时单线似乎更自然。采取以下措施：

```
int Total = (Something ? 1 : 2)
          + (SomethingElse ? (AnotherThing ? x : y) : z); 
```

或等价物（可读性稍差？）：

```
int Total = Something ? 1 : 2;
Total += SomethingElse ? (AnotherThing ? x : y) : z; 
```

恕我直言，我更喜欢上述任何一种：

```
int Total;

if (Something)
  Total = 1;
else
  Total = 2;

if (SomethingElse)
  if (AnotherThing)
    Total += x;
  else
    Total += y;
else
  Total += z 
```

使用嵌套的 if 语句，我很难在不跟踪它的情况下找出最终结果。单线感觉更像是它打算成为的数学公式，因此更容易遵循。

至于炫酷的因素，“看马，我一行写了一个完整的程序！”有一定的成就感/炫耀因素。但除了玩之外，我不会在任何情况下使用它；我当然不想回去*调试*它！

最终，对于真正的（生产）项目，最容易理解的就是最好的。因为总有一天您或其他人*会*再次查看代码。他们说的是真的：时间很宝贵。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-28T17:06:22.537

更重要的是发展和坚持一致的风格。

你会更快地发现错误，能够更好地与他人共享代码，如果你只是开发并坚持一种模式，甚至可以更快地编写代码。

这方面的一个方面是对单线做出决定。这是我店里的一个例子（我经营一个小型编码部门）——我们如何处理 IF：

*   如果超出可见行长度，包括任何缩进，则 if 永远不会全部在一行上。
*   即使 if 符合行长规则，你也不应该在同一行有 else 子句。

开发你自己的风格并坚持下去（或者，如果你改变风格，重构同一个项目中的所有代码）。

.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-28T14:16:26.263

在大多数情况下确实如此，但在某些情况下，单行是常见的成语，那么它是可以接受的。? : 可能是一个例子。关闭可能是另一个。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-28T14:20:24.073

不，这很烦人。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-28T14:23:09.543

一个衬里可以更具可读性，也可以不那么可读。你必须逐案判断。

而且，当然，在即时单线规则。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-29T08:12:42.037

在我看来，“one liners”的主要缺点是它很难打破代码和调试。例如，假设您有以下代码：

```
a().b().c(d() + e()) 
```

如果这不起作用，则很难检查中间值。但是，在下面使用 gdb（或您可能正在使用的任何其他工具）中断并检查每个单独的变量并准确查看失败的原因是微不足道的：

```
A = a();
B = A.b();
D = d();
E = e(); // here i can query A B D and E

B.C(d + e); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-28T16:48:05.333

对于整个结构的最终目标是决定设置单个变量的值的代码构造，通过适当的格式，将多个条件放入单个语句中几乎总是更清晰。使用多个嵌套的 if end if elses，总体目标是设置变量...

`" variableName =`"

必须在每个嵌套子句中重复，并且眼睛必须阅读所有这些子句才能看到这一点。使用 singlr 语句，它更清晰，并且使用适当的格式，复杂性也更容易管理......

```
decimal cost =
      usePriority?        PriorityRate * weight:
      useAirFreight?      AirRate * weight:
      crossMultRegions?   MultRegionRate:
                          SingleRegionRate; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-28T19:23:44.553

***散文***是一种易于理解的行之有效的衬里。

***缺点***是将混淆的乱码串联在一行上。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-28T14:30:21.383

一个经验法则是，如果你能用很短的句子用通俗易懂的语言表达一行的概念。“如果是真的，就设置成这个，否则就设置成那个”

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-03-20T05:53:44.840

一般来说，我认为这是一个坏主意（尽管我有时自己会这样做）——它让我印象深刻，因为它更多地是为了给人留下深刻印象，而不是为了编写好的代码。那种“聪明的把戏”通常是非常糟糕的。

也就是说，我个人的目标是每行代码都有一个“想法”；如果这种逻辑爆发很容易被封装在一个单一的想法中，那就继续吧。如果您必须停下来并对其进行一些迷惑，最好将其分解。

# version-control - 数字代理中设计师的版本控制

> ID：396193
> 
> 赞同：2
> 
> 时间：2008-12-28T14:11:17.210
> 
> 标签：version-control

我正在尝试实现一个版本控制系统，但正如我们大多数人所知，设计师对版本控制系统感到不舒服。我正在为我们的设计师使用 Photoshop、Flash 和其他设计工具寻找解决方案。

将版本控制系统（如 VSS 2005）与我们的前端和后端编码器一起使用并不是什么大问题，但我们的设计师遇到了一些严重的问题。他们大多拒绝使用版本控制系统，而且他们在某些方面是正确的，主要是在生产力水平上。他们主要处理多个文件，以及多个应用程序，例如 Photoshop 和 Flash。

我不知道版本控制是否是正确的答案。也许我们必须实施一个备份系统，但我认为必须有一个版本控制系统。我和我们的设计师非常厌倦做同样的事情或一遍又一遍地回到以前的设计。

很高兴知道数字机构如何克服这个问题。如果版本控制是答案，请分享关于如何让设计师适应版本控制的技巧。

**编辑 1：也许拥有像**[Dropbox](http://www.getdropbox.com)这样的解决方案会很棒，因为它不会打扰您的签入/签出。您所要做的就是打开一个文件，处理它并保存它，其余的由 Dropbox 处理。

**编辑2：**我们在Windows上，所以除了Windows支持之外没有机会实现任何东西:(

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-28T14:25:04.703

我实际上从来没有和平面设计师做过这个，但是 Subversion 的 WebDAV 支持可能对他们有用吗？我相信，您可以在 Mac OS X 和 Windows XP 和 Vista 下将 WebDAV 共享挂载为驱动器。每次保存都会成为存储库中的新修订。

至于您的第二个隐藏问题：是的，您确实需要实施备份系统。至少如果你重视你的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T14:20:21.187

Adobe 版本提示可能吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T14:32:28.290

您可能想尝试颠覆，因为有适用于 windows explorer 和 max OS X finder 的插件。在非开发人员必须使用源代码控制的项目中，与文件系统的集成对我有很大帮助。这包括有设计师的项目。另一个有帮助的关键是设计人员和其他非开发人员使用的文件具有良好的目录结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T15:20:40.253

Adobe 有自己的版本控制，*Version Cue*，它与 Creative Suite 包捆绑在一起。[http://www.adobe.com/products/creativesuite/versioncue/sdk_overview/](http://www.adobe.com/products/creativesuite/versioncue/sdk_overview/)显然，Eclipse 可以插入这个。我没有广泛尝试过，但我知道它可以很好地集成到 Creative Suite 中的文件对话框中。

注意：在 CS5 发布后，Adobe 已停止使用 Version Cue：http: [//www.adobe.com/products/adobedrive/](http://www.adobe.com/products/adobedrive/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-09-20T21:31:39.623

我刚接触到 ConceptShare，它非常棒……它不是自动版本控制，但你可以使用它，它是收集和记录反馈的好方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-05-20T17:04:38.473

您可以尝试[Subversion](http://subversion.tigris.org/)（安装在本地或远程服务器上）以及面向设计师的 Adob​​e Creative Suite 插件 - [Pixelnovel Timeline](http://pixelnovel.com/timeline/)

它结构紧凑，具有所有版本的预览（通过插件提交），适用于 Photoshop、Illustrator 和 InDesign。

如果开发人员也使用 Subversion，则所有内容（代码和设计）都可以保存在一个地方。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T15:07:44.087

与其尝试将版本控制系统与不同操作系统上的大量应用程序集成，不如查看诸如[http://en.wikipedia.org/wiki/Ext3cow](http://en.wikipedia.org/wiki/Ext3cow)之类的写时复制文件系统。这样你的设计师甚至不会注意到差异；他们所要做的就是使用 ext3cow 将他们的工作保存到 linux/samba 服务器上的网络共享中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-28T15:09:41.743

我既是设计师又是编码员。我通常使用 git 对代码（文本数据）进行版本控制，并简单地使用“另存为”和图形（二进制数据）的版本名称。为了安全起见，我还运行 Apple 的 Time Machine。

对我来说，图形文件的版本控制只是一个负担。我必须回滚才能看到更改，而您甚至无法获得版本控制的一项重要功能：仅通过查看差异即可查看您在特定提交中所做的更改。日志功能虽然很好，可以查看您的进度和注释，但对我个人而言，这不值得。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-02T08:35:02.037

看看[Perforc](http://perforce.com) e - 它有一个[插件和工具](http://www.perforce.com/perforce/products/plugins-p4gt.html)，允许您在 Photoshop 等设计器工具中使用它，它也超级快并且与 Visual Studio 很好地集成 - 在 Windows 和 Linux 上运行

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-02T09:02:23.133

我曾经做过的是在桌面上创建一个“快照”快捷方式，它添加并提交了来自特定目录的所有内容。

如果每个设计师都致力于他们自己的分支（对于 DVCS 来说很简单，但对于 SVN 来说也很容易），就不会有冲突，并且跨分支合并可以由不害怕的人每隔一段时间完成。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-02T09:26:02.917

一段时间以来，我一直在关注[GridIron 的 Flow](http://www.gridironsoftware.com/Flow/)。它看起来像是一个称职的版本控制套件，具有一些简洁的资产管理功能，例如版本之间的图形可视化以及不同资产之间的关系。Flow 支持处理 adobe photoshop、illustrator、flash 等文件。但截至目前（1 月初），GridIron 尚未发布 Flow，只是不得不宣布 beta 程序。

我所知道的大多数主要从事 Web 开发的数字机构都使用[Subversion](http://subversion.tigris.org/)进行版本控制。为避免图像文件发生冲突，艺术家将锁定他或她将处理的文件。这样，另一位艺术家就不会犯覆盖更改的错误。这需要艺术家和开发人员之间进行一些协调，以便没有人踩到任何人的鞋子。此外，如果有人忘记解锁，则有可能打破锁。

如果你喜欢分布式版本控制，你可能想看看[Mercurial](http://www.selenic.com/mercurial/wiki/)，因为它对 Windows 有很好的支持，并且有一些[简洁的备忘单](http://www.selenic.com/mercurial/wiki/index.cgi/QuickReferenceCardsAndCheatSheets)。Ruby 的孩子们正在使用[git](http://git.or.cz/)，但在 Windows 中却相当缺乏。

在与艺术家一起使用版本控制之前，至少要确保他们了解版本控制的基础知识，并让他们在沙箱中玩弄它。还要确保他们在相互协作和通过版本控制进行交互时建立了一些基本的行为规则（即确保他们不会破坏彼此的作品或踩到对方脚趾的方法）。

# ant - 工作流自动化：Makefile 与 Ant

> ID：396216
> 
> 赞同：4
> 
> 时间：2008-12-28T14:32:17.027
> 
> 标签：ant, automation, makefile

每当我注意到工作流程中的某些内容是**重复任务**时，我都会尝试将其自动化。

例如，在服务器上部署某些东西所需的步骤。它通常是一个构建，然后是一个**scp**，最后是一些远程设置脚本：

1.  mvn包
2.  scp 目标/foobar.jar 服务器：
3.  ssh 服务器安装-foobar
4.  ssh 服务器 './bin/foobar 重启'

在这种情况下，我倾向于编写一个小的 Makefile，它看起来像

```
 deploy:
      mvn package
      scp target/foobar.jar server:
      ssh server install-foobar
      ssh server './bin/foobar restart' 
```

*您*如何自动化您的工作流程？
Ant 是首选工具吗？有什么优点/缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T14:58:04.573

对于 Java 开发，我会说 Ant 是默认选择。

**临：**

*   好的文档，
*   良好的 IDE 集成
*   许多第三方扩展和工具

**缺点：**

*   有点冗长（嗯，它还是另一种 XML 格式）
*   有些事情应该很简单（例如任何类型的循环）

我真的没有任何使用makefile的经验，所以我不能说它们是如何比较的。也许您应该简单地使用您的开发人员更有经验的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T14:58:45.447

[SCons](http://www.scons.org/)是另一个不错的选择。[Capistrano](http://www.capify.org/)似乎很受好评，尽管我没有尝试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T15:03:05.983

我使用 shell 和 perl 脚本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T15:04:47.010

考虑 Gant（[http://gant.codehaus.org/](http://gant.codehaus.org/)）。使用 Groovy 的构建器，它比 Ant 构建脚本更简洁

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-06T13:02:07.347

对于python，我倾向于将[fabric](http://www.nongnu.org/fab/) 用于部署步骤，并将[setuptools](http://pypi.python.org/pypi/setuptools/)用于任何需要的构建（对我来说并不常见:-)

Fabric 了解如何将文件复制到服务器，在远程服务器上运行命令（作为标准用户和 root 用户）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-05-05T05:41:14.700

大多数构建系统如此复杂的原因之一是人们试图在其中做很多事情。有时用处理非编译/链接任务的驱动程序脚本来补充构建系统是一个不错的方法。没有单一的方法。如果没有看到项目源代码结构和所有需要完成的任务，很难回答这个问题。但是您可能想看看 Rake，因为它可以补充 Make、Ant 和 Maven

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T14:34:46.243

瑞克是我的选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-28T14:58:37.817

我发现 Ant 和它的 XML 配置语法有点笨拙，有些东西应该是微不足道的，但在 Ant 中很难得到。我更喜欢那种自动化[SCons](http://www.scons.org/)。

还有一个专门用来部署东西的工具，我用了一段时间，很酷，但我忘记了它的名字，也许其他人记得它:)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-16T18:54:39.430

我使用脚本（shell、perl、python）或 makefile。我不喜欢 Ant 和 SCons

# .net - .NET System.Net.CookieContainer 线程安全吗？

> ID：396222
> 
> 赞同：12
> 
> 时间：2008-12-28T14:39:32.287
> 
> 标签：.net, multithreading, asynchronous, thread-safety, cookiecontainer

1.  .NET 类 System.Net.CookieContainer 线程安全吗？--**更新：**交钥匙回答--
2.  有什么方法可以确保在异步请求期间修改的变量（即 HttpWebRequest.CookieContainer）的线程安全性？
3.  是否有任何属性可以突出线程安全类？--**更新：**如果 MSDN 上描述了线程安全，那么他们可能没有这个属性 --
4.  所有 .NET 类都是线程安全的吗？--**更新：**马克回答了--

我问这些问题是因为我在多线程代码的异步请求中使用了 CookieContainer。而且我不能将异步请求放入锁中。也许我必须像在 F# 中那样使用只读“变量”（或不可变类型），对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T15:07:46.207

不，并非所有 .NET 类都是线程安全的。事实上，很少有人需要。一般来说，静态成员应该是线程安全的，但仅此而已。

不可变/半不可变对象是自动线程安全的（这包括 XslTransform 等） - 在少数可变情况下（例如线程容器），您可以期望事情是线程安全的。MSDN 声明每个类的线程安全。

我不希望 cookie 容器是线程安全的，因此您可能必须自己同步它。

（更新）

再说你的第二点；您到底在考虑哪些变量？您自己的本地状态变量不会在异步请求期间直接更新，因此您只需在准备请求和处理响应时同步访问即可。最常见的是，通过 a `Monitor`- ie

```
lock(syncLock) {
    // prepare request from (synchronized) state
    req.Begin{...}
} 
```

然后在回调中

```
lock(syncLock) {
    // ...read values from request...
    // ...update local state...
} 
```

哪里`syncLock`只是一个锁定对象（可能针对一个实例持有）：

```
private readonly object syncLock = new object(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-28T14:51:36.600

从[马嘴里](http://msdn.microsoft.com/en-us/library/system.net.cookiecontainer.aspx)：

**线程安全**

此类型的任何公共静态（在 Visual Basic 中为 Shared）成员都是线程安全的。不保证任何实例成员都是线程安全的。

编辑：

您可以锁定修改实例成员的操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-02T13:45:24.333

正如我所看到的（在反射器的帮助下），CookieContainer 在内部使用锁来访问其成员，因此尽管有文档，它应该是线程安全的。

顺便说一句，它根本没有*公共静态成员*。所以在我看来，文档只提供了一个标准通知。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-31T17:47:54.293

请注意，网页会发送修改后的 cookie 列表作为其 HTTP 回复的一部分。在发送回复后修改 CookieContainer 不会完成任何事情——您只需修改不再存在的页面请求的 cookie 集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T16:35:30.460

Microsoft 保证 .NET 框架中的所有静态类都是线程安全的。

您可以使用 Reflector 来验证这一点。

# c# - WPF/C#：我应该在哪里保存用户首选项文件？

> ID：396229
> 
> 赞同：56
> 
> 时间：2008-12-28T14:51:36.630
> 
> 标签：c#, wpf, file

保存用户首选项文件的推荐位置是什么？是否有处理用户偏好的推荐方法？

目前，我使用从返回的路径`typeof(MyLibrary).Assembly.Location`作为默认位置来存储应用程序生成或需要的文件。

编辑：我发现了两个相关/有趣的问题：

*   [保存 Windows XP 和 Vista 应用程序用户信息的最佳位置](https://stackoverflow.com/questions/147533/best-place-to-save-user-information-xp-and-vista)
*   [实现保存/加载功能的方法是什么？](https://stackoverflow.com/questions/348022/whats-the-way-to-implement-save-load-functionality)

编辑#2：对于像我这样以前从未使用过设置的人来说，这只是一个说明。设置非常有用，但我必须进行大量挖掘才能弄清楚发生了什么（来自 Python 世界，而不是我也使用过的东西）。事情变得复杂，因为我想保存字典，显然它们不能被序列化。根据您的操作，设置似乎也存储在 3 个不同的文件中。有一个`app.config`,`user.config`和一个`settings.setting`文件。所以这里还有两个我发现有用的链接：

*   [http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/ddeaca86-a093-4997-82c9-01bc0c630138](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/ddeaca86-a093-4997-82c9-01bc0c630138)
*   [http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/efe370dc-f933-4e55-adf7-3cd8063949b0/](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/efe370dc-f933-4e55-adf7-3cd8063949b0/)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2008-12-28T15:04:06.090

您可以轻松地使用应用程序设置。

如果您还没有这样做，只需右键单击项目并选择属性。选择设置选项卡。确保您为范围选择了“用户”（否则该设置是只读的）。

访问它的代码很简单：

```
forms.Width = Application1.Properties.Settings.Default.Width; 
```

如果需要保存：

```
Application1.Properties.Settings.Default.Width = forms.Width;
Application1.Properties.Settings.Default.Save(); 
```

在上面的示例中，Width 是您在 Settings 选项卡中定义的自定义设置名称，Application1 是您的应用程序的命名空间。

**编辑：回答更多问题**

你提到你想在设置中存储字典对象。正如您所发现的，您不能直接执行此操作，因为 Dictionary 对象不可序列化。但是，您可以很容易地创建自己的可序列化字典。Paul Welzer[在他的博客上](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)有一个很好的例子。

你有几个链接有点混乱。您最初的问题是在哪里保存“用户首选项文件”。我很确定微软对设置功能的意图正是……存储用户皮肤偏好、布局选择等。它并不意味着作为应用程序数据的通用存储库，尽管它很容易被滥用。

数据存储在不同的地方是有充分理由的。一些设置是应用程序设置并且是只读的。这些是应用程序需要运行但不特定于用户的设置（例如，应用程序资源的 URI 或税率）。这些存储在 app.config 中。

用户设置存储在用户文档/设置文件夹深处的一个模糊目录中。默认值存储在 app.config 中（我想，我想不起来了），但任何用户更改都存储在他们的个人文件夹中。这适用于因用户而异的数据。（“用户”是指 Windows 用户，而不是您应用的用户。）

希望这对您有所澄清。该系统实际上非常简单。起初它可能看起来有点陌生，但使用它几天后，你将永远不必再想它......它只是工作。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-12-28T15:55:48.497

当以非管理员身份运行或在 Vista 上运行时，您无法写入“程序文件”文件夹（或其任何子文件夹）。

存储用户首选项的正确位置是（显然，用正确的名称替换 MyCompanyName 和 MyApplicationName）

在磁盘上：

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\MyCompanyName\\MyApplicationName" 
```

或者在注册表项下：

```
 HKEY_CURRENT_USER\Software\MyCompanyName\MyApplicationName 
```

这些位置是每个用户的，它们与非管理员用户、使用同一台计算机的多个用户、快速用户切换、终端服务以及人们可以与您的软件交互的所有其他方式一起工作。

如果您需要所有用户的公共位置，那么：

1.  仅当用户以管理员身份运行时才有效
2.  它不能在 Vista 上可靠地工作
3.  您必须自己处理所有事情（例如两个用户通过快速用户切换同时在同一台计算机上运行应用程序）。

地点是：

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationCommonData) + "\\MyCompanyName\\MyApplicationName" 
```

或者在注册表项下：

```
 HKEY_LOCAL_MACHINE\Software\MyCompanyName\MyApplicationName 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-29T23:39:48.140

您可以使用隔离存储。您可以按用户、程序集和/或域进行隔离。

隔离存储简介
[http://msdn.microsoft.com/en-us/library/3ak841sy(VS.80).aspx](http://msdn.microsoft.com/en-us/library/3ak841sy(VS.80).aspx)

隔离类型
[http://msdn.microsoft.com/en-us/library/eh5d60e1(VS.80).aspx](http://msdn.microsoft.com/en-us/library/eh5d60e1(VS.80).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-02T06:16:19.697

以下似乎是最好的选择：

```
Application.UserAppDataPath 
```

# java - 在 Maven 中添加依赖项

> ID：396245
> 
> 赞同：137
> 
> 时间：2008-12-28T15:06:39.703
> 
> 标签：java, macos, maven-2, dependencies

如何获取我拥有的 jar 文件并将其添加到 maven 2 中的依赖系统中？我将成为此依赖项的维护者，并且我的代码在类路径中需要此 jar，以便它能够编译。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2008-12-28T22:25:38.367

您必须分两步执行此操作：

### 1\. 为您的 JAR 提供 groupId、artifactId 和版本，并将其添加到您的存储库。

如果您没有内部存储库，而您只是尝试将 JAR 添加到本地存储库，则可以使用任意 groupId/artifactIds 按如下方式安装它：

```
mvn install:install-file -DgroupId=com.stackoverflow... -DartifactId=yourartifactid... -Dversion=1.0 -Dpackaging=jar -Dfile=/path/to/jarfile 
```

如果您有一个内部存储库，并且希望将其提供给组织中的其他开发人员，您也可以将其部署到您的内部存储库中。我只是使用我的存储库的基于 Web 的界面来添加工件，但是您应该能够使用`mvn deploy:deploy-file ...`.

### 2\. 更新依赖项目以引用此 JAR。

然后通过将以下内容添加到元素来更新使用 JAR 的项目的 pom.xml 中的依赖项：

```
<dependencies>
    ...
    <dependency>
        <groupId>com.stackoverflow...</groupId>
        <artifactId>artifactId...</artifactId>
        <version>1.0</version>
    </dependency>
    ...
</dependencies> 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2009-04-19T07:49:42.623

您还可以指定不在 Maven 存储库中的依赖项。当您的团队不存在中央 maven 存储库或如果您有[CI](http://en.wikipedia.org/wiki/Continuous_integration)服务器时可能会很有用

```
 <dependency>
        <groupId>com.stackoverflow</groupId>
        <artifactId>commons-utils</artifactId>
        <version>1.3</version>
        <scope>system</scope>
        <systemPath>${basedir}/lib/commons-utils.jar</systemPath>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2009-01-12T15:08:32.310

实际上，在对此进行调查时，我认为所有这些答案都是不正确的。您的问题具有误导性，因为我们对`maven`. 我说我们的，因为我刚刚被介绍给`maven`.

中`Eclipse`，当你想在你的项目中添加一个 jar 文件时，通常你手动下载这个 jar，然后把它放到**lib**目录中。使用 maven，您不会这样做。这是你要做的：

*   转到[mvn 存储库](http://mvnrepository.com)
*   搜索您要添加的库
*   将`dependency`声明复制到您的`pom.xml`
*   通过重建`mvn`

现在，`maven`将连接并下载`jar`依赖项列表，并自动解决`jar`可能具有的任何其他依赖项。因此，如果`jar`还需要公共日志记录，也将被下载。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-12-29T12:53:57.383

我会这样做：

1.  在你的 pom 中添加你喜欢的依赖项：

    ```
    <dependency>
            <groupId>com.stackoverflow...</groupId>
            <artifactId>artifactId...</artifactId>
            <version>1.0</version>
    </dependency> 
    ```

2.  运行`mvn install`它将尝试下载 jar 并失败。在此过程中，它将为您提供安装 jar 的完整命令以及错误消息。复制该命令并运行它！容易吧？！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-28T15:32:50.090

我假设您询问如何将依赖项推送到“知名存储库”，而不是简单地询问如何更新您的 POM。

如果是，那么[这](http://maven.apache.org/guides/mini/guide-central-repository-upload.html)就是您要阅读的内容。

对于希望建立内部存储库服务器的任何人，请看[这里](http://maven.apache.org/guides/introduction/introduction-to-repositories.html)（使用 Maven 2 的一半问题是查找文档）

# jquery - Lazy binding functions to multiple events with jQuery

> ID：396260
> 
> 赞同：3
> 
> 时间：2008-12-28T15:21:03.403
> 
> 标签：jquery, events, dynamic, bind

Here's the scenario: I have a set of buttons that I want to bind to corresponding functions when clicked. The ids of these buttons are the same as the names of their corresponding functions. I could do this:

```
$("#kick").click(kick);
$("#push").click(push);
$("#shove").click(shove); 
```

But I'm lazy and would like to do this more lazily (as is my nature). As the buttons are all contained in a block element, I'd like to do something like this:

```
$("#button_holder > span").each(function () {
    var doThis = this.id;
    $(this).click(doThis);
}); 
```

Except that doesn't work. Any suggestions?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-28T15:56:16.640

Like the other answerers, I'm not sure that this is "true" laziness (as in the programmer's virtue), but only you know your implementation details.

If you really want to do something like this, you can use an object to store your particular functions and then use the string to look them up:

```
var myFunction = {
     kick:  kick,
     push:  push,
     shove: shove
};

$("#button_holder > span").each(function () {
    var doThis = this.id;
    $(this).click(myFunction[doThis]);
}); 
```

Or as anonymous functions:

```
var myFunction = {
     kick:  function() { /*do kick  */ },
     push:  function() { /*do push  */ },
     shove: function() { /*do shove */ }
};

$("#button_holder > span").each(function () {
    var doThis = this.id;
    $(this).click(myFunction[doThis]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T15:24:56.313

```
$("#button_holder > span").each(function () {
    var doThis = this.id;
    $(this).click(function(doThis){
      alert(doThis);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T15:31:47.500

```
<input type="submit" id="kick" value="Kick Me">
<input type="submit" id="push" value="Push Me">

<script type="text/javascript>
$(function() {
    $("input[type=submit]").each(function () {
        var doThis = this.id;
        $(this).click(doThis);
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T15:35:51.610

I guess I don't see the point of this. You need to create each function individually anyway and this sort of programming is difficult for others to grok usually. Maybe if you have dozens of buttons and it's throw-away code, I could understand but .. probably not...

Why not just bind all to a single function and make the determination based on this.id at event time??

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T15:46:02.947

its very simple ! you try to pass none-function to the click method.

```
var doThis = this.id;
$(this).click(doThis); 
```

you need to pass a function :

```
 $(this).click(function(doThis){
      alert(doThis); 
```

});

or :

```
function myFunc(){};
$(this).click(myFunc); 
```

# .net - 使用 .NET 检测 Internet 连接的最佳方法是什么？

> ID：396272
> 
> 赞同：4
> 
> 时间：2008-12-28T15:34:34.233
> 
> 标签：.net, winforms, connection

我有一个 Windows 窗体应用程序。当用户为我的应用程序导入许可证时，我想“打电话回家”（点击网络上的 aspx 页面）并注册许可证信息。

问题是用户当时可能没有互联网连接。我想先测试一下。检测用户是否有可用的互联网连接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-28T15:58:14.857

在 PPOE 上，至少在这个问题上花费了十万美元。主要难点：

1.  很多时候，HTTP 连接会断开，然后返回“200 OK”消息。只是它不是您的网站；它是酒店/咖啡厅/任何提供连接您的路由器。

2.  API 将以有趣和创造性的方式存在。例如，如果您以前有调制解调器，但后来升级到 DSL，但没有运行向导，则某些 Windows 网络 API 会返回错误的连接数据。

3.  在某些（非常重要的）地方，尝试连接会启动连接——在拨号时——按分钟收费。同样，在 PPOE，他们在凌晨 3:00 发布了一款相当受欢迎的软件。专为一些脾气暴躁的客户制作。

4.  一些主要的 ISP 在宽带上运行时拥有“独特”的软件，但它们不够聪明，无法仅使用提供的良好以太网和 TCP/IP。相反，他们使用以太网来模拟调制解调器（反过来设置为模拟以太网 +tcp/ip 设置）。它被称为 PPPOE，很难分辨您尝试使用的适配器

5.  越来越多的家庭正在使用 DSL 和电缆调制解调器，其中计算机“连接”，但仅限于本地盒子；本地盒子可能已失去连接，您永远不会知道。

唯一的解决方案是尝试连接并验证返回。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-28T15:57:07.887

检查[WebRequest.GetResponse](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getresponse.aspx)方法

```
// Create a new WebRequest Object to the mentioned URL.
WebRequest myWebRequest=WebRequest.Create("http://www.contoso.com");
Console.WriteLine("\nThe Timeout time of the request before setting is : {0} milliseconds",myWebRequest.Timeout);

// Set the 'Timeout' property in Milliseconds.
myWebRequest.Timeout=10000;

// This request will throw a WebException if it reaches the timeout limit before it is able to fetch the resource.
WebResponse myWebResponse=myWebRequest.GetResponse(); 
```

或者您可以调用 InternetGetConnectedState API

```
[DllImport("wininet.dll")]
private extern static bool InternetGetConnectedState(out int Description, int ReservedValue ) ;

public static bool IsConnectedToInternet()
{
    int Desc ;
    return InternetGetConnectedState(out Desc, 0);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-28T15:55:48.543

在执行请求之前测试连接是否可用，我看不到任何优势。在您检查后连接仍可能断开，并且在您尝试之前没有可靠的方法来判断您的请求是否有效。我也看不到对用户有任何好处。

我会看到的唯一合法测试是是否有任何可用的网络接口，以避免在他/她仍在拨号连接的情况下使用拨号提示惹恼用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T15:36:39.753

您可以向“家庭”主机发送 ping 指令，查看它是否返回回复。

[网::平](http://search.cpan.org/~smpeters/Net-Ping-2.35/lib/Net/Ping.pm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T15:39:13.540

定义“互联网连接”。对我来说，没有“互联网连接”。只有 tcp/ip 连接、dns 服务器和 web 服务器等。你能做的最好的就是尝试加载网页，看看它是否有效。正如建议的那样，您可以尝试 ping 自己，但这并不意味着 Web 服务器正在运行，也不意味着可以加载页面。只有在实际加载页面时才能确定这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T16:12:29.477

我使用的一种方法是使用始终返回“true”的布尔方法创建 Web 服务。从您的应用程序中调用它，如果您遇到任何异常或“错误”，则表示您没有连接。

```
 [WebMethod]
    public bool IsAvailable()
    {
        return true;
    } 
```

并称之为：

```
 private bool IsOnline()
        {
            Cursor = Cursors.WaitCursor;
            var proxy = new WS();
            bool IsOnline = false;
            try
            {
                IsOnline = proxy.IsAvailable();
            }
            catch (System.Net.WebException WebEx)
            {
                NameValueCollection nvc = new NameValueCollection();
                nvc.Add("WebException Status", WebEx.Status.ToString());
                if (WebEx.Status == System.Net.WebExceptionStatus.ProtocolError)
                {
                    nvc.Add("Status Code", ((System.Net.HttpWebResponse)WebEx.Response).StatusCode.ToString());
                    nvc.Add("Status Description", ((System.Net.HttpWebResponse)WebEx.Response).StatusDescription);
                }
                ExceptionManager.Publish(WebEx, nvc);
            }
            catch (Exception)
            {
                IsOnline = false;
            }
            Cursor = Cursors.Default;
            return IsOnline;
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T16:05:39.913

当我总是需要在我的应用程序中检查互联网连接时，我只会 ping google.com，因为它永远不会关闭。

# sharepoint - 允许移动访问表单服务器/共享点实例上的 InfoPath 表单

> ID：396274
> 
> 赞同：1
> 
> 时间：2008-12-28T15:35:54.280
> 
> 标签：sharepoint, windows-mobile, infopath, virtual-pc

在我开始问这个问题之前，我必须警告你，我对 SharePoint 几乎一无所知，而且我基本上是在学习的过程中。

这是我现在的位置：

*   我有一台虚拟电脑，上面运行着 SharePoint 和 windows server 2003 的实例
*   我设法设置了一个网络适配器，因此我可以通过主机中的 Web 浏览器访问 SharePoint 实例。
*   我创建了一个 InfoPath 表单并将其发布到 SharePoint 实例，我可以从我的主机在浏览器中查看该表单。

到目前为止一切都很好，唯一的问题是，为了在浏览器中查看 SharePoint 实例或 InfoPaths 表单，我必须首先以虚拟 PC 管理员身份登录。现在我想做的是在移动设备中查看相同的 InfoPath 表单。

这是我接下来所做的：

*   在我的主机上，我创建了一个 Windows CE 3.5 应用程序
*   我在其中添加了一个 Web 浏览器控件并将其指向 SharePoint 实例上托管的 InfoPath 表单。

现在，当我在移动模拟器中运行应用程序时，出现连接错误，但如果我将控件指向谷歌或其他网站，我不会收到此错误。

我现在有一种独特的感觉，原因是正如我提到的访问我需要使用 Windows 身份验证登录的表单。我尝试更改 IIS 中的 Web 应用程序以允许匿名访问并且不需要 Windows 身份验证。虽然这有效，但 SharePoint 网站声明“未授权”，所以现在我认为 SharePoint 建立在 Windows 身份验证之上，以控制对其功能的访问。

所以最后，毕竟这是我的实际问题：

*   如何在 SharePoint 中为特定 Windows 用户授予对特定功能位的访问权限？
*   对于不是与 SharePoint 实例在同一网络上的用户的移动设备，如何授予它查看 InfoPath 表单的权限？

我知道我的问题有点漫无边际，但我对这一切的一个小问题是我真的不知道该问什么，或者如何措辞。希望有人掌握了我想要做的事情并提供帮助。

总结一下：我基本上想让一个模拟的移动设备（在主机上）访问一个由 SharePoint/Forms Server 在虚拟 PC 映像上提供的 InfoPath 表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-10-06T12:01:03.633

当您想将身份验证更改为 SharePoint 时，切勿直接更改 IIS 中的设置，而是转到管理中心、应用程序管理、身份验证提供程序。在那里，您可以将其设置为使用基本身份验证、Forms Auth 或匿名访问.. 任何适合您的方式。

Forms Services 可能会面临更多挑战，但这至少应该让您登录。

# inheritance - 自定义版本化用户界面的最佳实践？

> ID：396275
> 
> 赞同：0
> 
> 时间：2008-12-28T15:36:24.760
> 
> 标签：inheritance, configuration, user-interface, customizing

如何最好地实施以下方案：

1.0 版中的应用程序有一个标准化的用户界面，例如订单。此应用程序经过定制以适应不同客户的需求。这可能是客户 A 的额外字段“期望的交货时间”，客户 B 的字段“电话号码”的省略，客户 C 显示附近仓库的额外地图插件以及客户 D 的这些组合。

现在，开发人员发布了新版本的标准化订单，2.0 版。设计这个以最少的努力（如果有的话）以确保为客户完成的所有定制可以保持活力的最佳方式是什么？

我可以想象以下解决方案：

*   配置：所有选项都是可配置的。这实际上不可能是一个解决方案，因为无法预见所有可能的客户需求。
*   继承：通过继承标准化版本进行定制。但是，如何确保新版本不会导致“蹩脚”的定制版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T17:26:24.290

想到的直接选项是存在于应用程序之外的 UI 规范。当应用程序运行时，UI 会在运行时生成。虽然这比静态的编译 UI 需要更多的工作，但从长远来看，考虑到您特定的软件生命周期，它也更加灵活。

有专门为此目的而存在的框架： [XUL](http://www.mozilla.org/projects/xul/)就是一个众所周知的例子。

但是，您可以自己动手卷。最终，这使您能够将客户的用户界面分开。

# c# - 移动设备的 Web - ASP.NET 的最佳实践

> ID：396280
> 
> 赞同：2
> 
> 时间：2008-12-28T15:37:38.567
> 
> 标签：c#, mobile, windows-phone-7, windows-phone

开始为移动设备（任何手机）构建 Web 应用程序。
使用 ASP.NET 3.5/ASP.NET 4.0 和 C# 的最佳方法是什么？

更新（2010 年 2 月）
有任何使用 windows mobile 7 的消息吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-28T16:36:26.700

这取决于您是否真的想**支持每部手机**或只支持高端或新手机，如 iPhone，它们在呈现网页时没有太多限制。如果您可以要求**在手机上要求真正的 HTML 渲染、Javascript 和 cookie 支持**，那么真正的限制是**屏幕尺寸的限制**。您应该在 ASP.NET 中进行“正常”的 Web 开发，注意页面的大小。

如果是这种情况，*您可以在此处停止阅读。*

如果您**真的想支持每部手机**，尤其是旧手机，您应该知道有不同类型的手机。其中许多有显示网页的**限制和约束。**其中一些可以使用 JavaScript，但其中许多不能。其中一些可以显示 HTML 内容，但许多其他不能。他们必须依靠“无线标记语言”标准来访问网络。因此，建立一个支持所有这些不同设备的网站并不容易。

以下是一些一般内容的链接（不是特定于 ASP.NET 的），可以帮助您了解整体情况：

*   [移动网络最佳实践 1.0 (W3C)](http://www.w3.org/TR/mobile-bp/)
*   [移动 Web 开发人员指南 (dotMobi)](http://mobiforge.com/starting/story/dotmobi-mobile-web-developers-guide)

然而，正如我已经提到的，它们的主要限制是比普通 PC 的屏幕更小。而且很多手机不支持JavaScript、Cookies，有的甚至不显示图片。

手机有特殊的标记标准。**例如， WML 页面**是广泛采用的手机标准。WML 代表基于 XML 的“无线标记语言”。[您可以在 w3schools.com 上](http://www.w3schools.com/WAP/wml_reference.asp)找到 WML 的描述和参考。

下面的代码显示了一个示例 WML 页面：

```
<?xml version="1.0"?>
<!DOCTYPE wml PUBLIC "-//WAPFORUM//DTD WML 1.1//EN"
   "http://www.wapforum.org/DTD/wml_1.1.xml">

<wml>
   <card id="card1" title="Stackoverflow">
      <do type="accept" label="Menu">
         <go href="#card2"/>
      </do>
      <p>
         <select name="name"> 
            <option value="Questions">Questions</option>
            <option value="MyAccount">My account</option>
            <option value="FAQ">FAQ</option>
         </select>
      </p>
   </card>
   <card id="card2" title="Menu">
      <p>
           You selected: $(name)
      </p>
   </card>
</wml> 
```

好消息是，ASP.NET 自动呈现 WML（和其他移动标记标准）内容。您不必自己编写 WML 文件。内置机制检测 Web 请求的设备（手机）类型。但是，对于某些（较新的）设备，ASP.NET 上的移动设备检测无法正常工作。查看[WURFL](http://wurfl.sourceforge.net/)，这是一个 XML 配置文件，其中包含有关许多移动设备的功能和特性的信息。

您可以在标准的 Web 浏览器中测试您在 ASP.NET 中开发的页面，但它不会给出您所开发内容的正确图片。有一些模拟器可以解决这个问题，它们可以在您的台式计算机上模拟手机。有一篇[Microsoft 支持文章](http://support.microsoft.com/?scid=kb%3Ben-us%3B320977&x=6&y=14)解释了您可以在哪里下载它们。

## ASP.NET 移动控件

ASP.NET 移动控件（以前称为“Microsoft 移动 Internet 工具包”）扩展了 .NET Framework 和 Visual Studio，通过使 ASP.NET 能够向各种移动设备提供标记来构建移动 Web 应用程序。

ASP.NET 移动控件在处理不同的屏幕尺寸、方向和设备功能时呈现适当的标记（HTML 3.2、WML 1.1、cHTML、XHTML）。

[在官方网站上](http://www.asp.net/mobile/)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-02T05:44:15.343

自从我在加拿大从事无线网络工作以来，我应该提到几件事。尝试将任何图像保持小（甚至不存在）以增加加载时间并减少数据费用。在我们的网络上，如果用户未订阅计划，我们的网络将收取 15 美元/mb。手机尝试下载的一些未经优化的图像很容易让用户付出代价，而且这些大图像无论如何都不会好看。

我知道这不会影响您，但如果您使用任何其他协议，例如流式传输或任何基于 UDP 的协议，请将最大数据包大小设置为至少 1300 字节或更低。仅仅因为移动设备在网络中移动时的工作方式，额外的标头信息就会被添加。对于 TCP/IP，我们使用 MSS-clamping 来防止大数据包问题，但这不能应用于任何 UDP 传输，或任何使用身份验证标头的安全协议。如果您定位的手机是由 RIM 提供的，则可以完全忽略这一点。

某些手机​​在与您的服务器通信时可能会使用 WAP 代理，如果是这种情况，请尝试避免使用任何需要保持活动 TCP/IP 的连接。一些代理被设置为不允许任何保持活动会话通过它们，即使我相信大多数新的都很好。

我敢肯定还有更多，你应该记住的最重要的事情是，与移动设备的 IP 连接比打开网络浏览器的人要复杂得多。这种传输可能非常棘手，所以如果你尝试做一些真正花哨的事情，即使它现在可以工作，它也可能并不总是有效。最后一点，延迟和数据包丢失可能会大幅波动，因此如果您实时执行任何操作，延迟可能会达到 200 毫秒以上，而且我已经看到数据包丢失率短暂飙升至 20-30% 的水平次。

祝你好运，如果您有任何具体问题，请务必提出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-30T11:59:08.927

更多信息在这里：[windows-mobile-development-where-to-begin](https://stackoverflow.com/questions/377604/windows-mobile-development-where-to-begin)

# c# - 新 C# 程序员 - 将两个 numericUpDown 值加在一起？

> ID：396281
> 
> 赞同：2
> 
> 时间：2008-12-28T15:38:35.490
> 
> 标签：c#, numericupdown

我对 C# 编程相当陌生。

我正在制作一个有趣的程序，将两个数字相加，而不是在消息框中显示总和。我的表单上有两个 numericUpDowns 和一个按钮。当按下按钮时，我希望它显示一个带有答案的消息框。

问题是，我不确定如何将 numericUpDowns 中的 twp 值相加。

到目前为止，我的按钮事件处理程序中有这个：

```
private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(this.numericUpDown1.Value + this.numericUpDown2.Value);
    } 
```

但显然，它不起作用。它给了我 2 个编译器错误：1\. 'System.Windows.Forms.MessageBox.Show(string) 的最佳重载方法匹配有一些无效参数 2\. 参数 '1'：无法将十进制转换为 'string'

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-28T15:43:54.590

`this.numericUpDown1.Value + this.numericUpDown2.Value`实际上正在正确评估一个数字，所以你实际上非常接近。问题是该`MessageBox.Show()`函数需要一个字符串作为参数，而您要给它一个数字。

要将结果转换为字符串，请将`.ToString()`其添加。像：

```
private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show((this.numericUpDown1.Value + this.numericUpDown2.Value).ToString());
    } 
```

作为参考，如果你想做更高级的格式化，你会想使用`String.Format()`而不是`ToString()`. 有关如何使用的更多信息，请参阅[此页面](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx)`String.Format()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T15:55:35.423

这行得通。

```
 decimal total = this.numericUpDown1.Value + this.numericUpDown2.Value;
    MessageBox.Show(total.ToString()); 
```

MessageBox.Show 需要一个字符串作为参数（这是第一条错误消息）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T15:44:42.997

试试这个：

```
private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show((this.numericUpDown1.Value + this.numericUpDown2.Value).ToString());
    } 
```

它从 numericUpDown 组件中获取值并将它们相加以获取 type 的对象`Decimal`。然后将其转换为 MessageBox 采用的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T15:46:12.793

现在这很容易。[NumericUpDown.Value](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.value.aspx)的类型为 Decimal。`Messagebox.Show()`需要一个字符串。你需要做的就是

```
MessageBox.Show((this.numericUpDown1.Value + this.numericUpDown2.Value).ToString()); 
```

将加法的结果转换为字符串。

# java - 选择哪一个：Java 游戏的 2D 或 3D

> ID：396287
> 
> 赞同：6
> 
> 时间：2008-12-28T15:41:14.377
> 
> 标签：java, 3d, 2d

小团队的第一场比赛应该选择什么，当他们的时间不多但有很大的野心时？我是一位经验丰富的程序员，但在此之前没有做过任何游戏编程。我的设计师非常有才华和艺术性，他大约一年前就开始使用 3D，但从那以后就没有做过了，所以他可能需要一些时间来重新学习它，我不确定他是否能够做到尽管他的平面设计技能非常出色，但他还是做得很好。

我们主要关心的是尽快完成游戏，并且要轻松完成，因为这是我的第一个游戏编程项目。同时，我们不希望有任何限制可能会阻碍我们以后的进步，或者以其他方式使游戏在某些方面变得不好玩。

例如，我了解到某些动画在 2D 中是不可能的，例如旋转等。我希望能够让玩家的角色能够变形为动物，并且必须能够射击怪物，（比如射击一支箭，看到它飞过并击中了另一个人）。这些东西在二维中可能吗？

未来，如果我们想从 3D 转到 2D，是否可以不完全重写游戏？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-28T15:53:56.893

您不必使用 3D 来实现“3D 外观”。旋转、运动或变换之类的东西可以预先录制或渲染为动画或图像序列，并无缝集成到 2D 游戏中。在 2D 中唯一不可能的事情是在您的“游戏空间”内自由导航（如自由行走或飞行、任意转动等）。

然而，在决定 2D 或 3D 时，主要关注点应该是游戏玩法。有些游戏绝对需要 3D（射击、模拟），而其他游戏则完全不需要（冒险、谜题……）。因此，您实际上不必做出决定，只需选择更适合您的游戏创意的选项即可。

就个人而言，如果可能的话，我会避免在您的第一次游戏尝试中使用 3D，以消除随之而来的所有限制和麻烦。

使用 3D 时，您通常必须决定一个 3D 框架，这将严重影响您的软件设计、游戏外观和整体性能。例如，Java3D 带来了一个您必须适应的复杂类结构。为了让这些 3D 东西能够正常工作，我们付出了很多努力。像旋转正方形这样简单的事情会演变成包含四元数的矩阵运算。每个效果都必须在复杂的 3D 世界中完成，并且其 2D 投影外观与您的预期一致。更不用说 3D 应用程序经常遭受难以克服的非常刻板的外观。

在 2D 中，您从字面上避免了一维复杂性。您可以按照应有的方式进行所有操作，您可以使用标准图形应用程序和打开的文件格式来简化设计人员和开发人员之间的工作流程。许多伪 3D 效果，如视差运动、景深和预渲染图稿，都可以在 2D 世界中呈现惊人的外观。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-28T16:00:50.563

你应该去二维。您已经说明了采用这种方法的几个原因：

*   你是一个小团队，3D 需要更多的工作。
*   这是你的第一个游戏，所以你需要让它尽可能简单，否则项目可能会失败（你会面临很多风险！）
*   3D 艺术家需要重新学习工艺！
*   你有一个（似乎是自己设定的）截止日期。
*   等等。

3D 需要很多时间，最好将其投资于改进游戏的其余部分。想想 3D 时代之前存在的所有精彩游戏。

不要害怕接受限制：虽然 3D 可能会给您带来很多可能性，但 2D 可能会带来更多创造性的工作！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-29T00:00:50.063

我会考虑几个因素：

1.  是手机游戏还是小程序游戏？如果是这样，我会选择2D版本。在这种情况下很难获得正确的 3D。
2.  你的设计师更喜欢什么？他能否更快地为角色建模、纹理和动画，而不是创建 2D 角色所需的所有精灵？
3.  工具支持。您的设计师可以在 2D 和 3D 中生成哪些输出格式？中间件是什么格式，你要使用，能够处理吗？您的 3D 引擎能否加载或至少转换 .obj 文件（只是一个示例，可以使用任何其他模型格式。）？

即使你想走 3D 的路，你仍然可以制作 2D 游戏（有时称为 2.5D 或伪 3D）。此外，还有一些不错的第三方框架可用于 Java 中的 2D 和 3D 内容。您不必使用 java2D/java3D。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-28T15:56:53.660

鉴于您的要求，我会选择 2D 。您有更多工具可供选择。有更多可用的人才来承包艺术品……而且资产管道更简单。最终，一切都将取决于游戏本身的优点。3D 有时对普通用户来说更难理解。

根据您的概念化，旋转和变形在 2D 中应该是完全可能的。您甚至可以考虑使用伪 3d 方法 ala Paper Mario ..

如果您在设计代码结构时考虑到这一点，那么从 2D 迁移到 3D 应该不是主要问题。..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-28T16:03:10.980

我也推荐2D。3D 游戏对用户计算机的图形要求更高，而碰撞检测等许多事情在 2D 中要简单得多。您甚至可以制作 3D 角色模型，然后将它们投影到 2D 以制作实际游戏的精灵。Puzzle Pirates ( [http://www.puzzlepirates.com/](http://www.puzzlepirates.com/) ) 采用了这种方法，它在一致的照明等方面效果很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T16:00:07.770

我认为编写 2D 或完整的 3D 游戏需要一种完全不同的设计方法，以后无法轻易修改：SUN 为这两个开发决策提供了[Java 2D API](http://java.sun.com/products/java-media/2D/index.jsp)和[Java 3D API](http://java.sun.com/javase/technologies/desktop/java3d/)。对于第一款时间紧迫的游戏，我会投票支持 2D 版本。如果游戏玩法有趣且设计精美，那么 3D 不是必须的。

# .net - 创建与版本无关的 Outlook 插件

> ID：396289
> 
> 赞同：0
> 
> 时间：2008-12-28T15:42:16.840
> 
> 标签：.net, outlook, add-in

在 Visual Studio 2008 中使用 Outlook 插件的插件向导时，我可以选择为 Outlook 2003 和 Outlook 2007（都使用 .NET）创建插件。但是，如果我选择其中之一，则加载项不会在其他版本中运行。

创建在两个版本中运行的加载项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T15:46:58.563

应用“DRY”（不要重复自己）原则并将逻辑移出依赖版本的项目。听起来您必须创建两个项目并将每个项目定位到一个版本。只需编写代码，以便公共类和行为可以包含在一个独立的库中，从而被两者引用。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T19:10:25.703

Outlook 2003 加载项应该可以在 Outlook 2007 中使用。我正在使用 VS 2005 编写一个可以在两者中使用的加载项。确保您使用的是 2003 版的 PIA。如果您创建自己的互操作程序集，则会遇到问题。

我还使用仅安装了 Outlook 2003 和 Visual Studio 的特殊开发机器。我有其他装有 Outlook 2007 的机器进行测试。

尝试在 Outlook 2007 上安装 2003 插件时遇到什么错误？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-31T02:22:52.263

一些开源项目在线使用office，用于版本独立。

[http://netoffice.codeplex.com/](http://netoffice.codeplex.com/)

# c# - 通过有向图查找路径的递归 lambda 表达式？

> ID：396296
> 
> 赞同：4
> 
> 时间：2008-12-28T15:46:13.150
> 
> 标签：c#, recursion, directed-graph

我需要在复杂的图形结构中找到一条或多条路径。该图是使用与此类似的东西构建的：

```
class Node
{
    public string Value { get; set;}
    public List<Node> Nodes { get; set;}

    public Node()
    {
        Nodes = new List<Node>();
    }
} 
```

使这变得复杂的是节点可以引用回更早的节点。例如，

> A -> C -> E -> A

我需要做的是获取一个堆栈列表，这些堆栈代表通过节点的路径，直到我到达具有特定值的节点。由于可能有一些非常大的路径可用，我们可以尝试最多的节点。

```
List<Stack<Node>> paths = FindPaths(string ValueToFind, int MaxNumberNodes); 
```

有没有人有办法构建这个（或类似的东西）？我过去做过递归，但出于某种原因，我脑子里全是放屁。我的问题指定了一个 lambda 表达式，但不一定需要使用 lambda。我将不胜感激任何解决方案。

旁注：我从 aku 对[这个递归问题](https://stackoverflow.com/questions/61143/recursive-lambda-expression-to-traverse-a-tree-in-c)的出色回答中提升了课程。虽然下面显示的他优雅的解决方案遍历了树结构，但它似乎没有足够的灵活性来做我需要的事情（例如，关闭圆形路径并跟踪成功的路径）。

```
Action<Node> traverse = null;
traverse = (n) => { Console.WriteLine(n.Value); n.Nodes.ForEach(traverse);};
traverse(root);  // where root is the tree structure 
```

**编辑**：

根据下面评论和答案的输入，我在 CodeProject 中找到了一个很好的解决方案。它使用 A* 路径查找算法。 [链接在这里。](http://www.codeproject.com/KB/recipes/graphs_astar.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T20:48:40.873

如果您的问题与寻路有关，您可能需要在 Google 上搜索“A 星”或“A*”。它是一种通用且高效的寻路算法。有关与您的问题直接相关的示例，请参阅[本文。](http://www.gamedev.net/reference/articles/article2003.asp)

您可能还想查看[Dijsktra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T20:50:59.043

我不确定您的预期输出是通向目标的*所有*路径、通向目标的*最佳*路径（通过某些度量，例如路径长度），还是通向目标的*任何*路径。

假设是后者，我将从递归策略开始，包括跟踪 Brann 概述的访问节点，并进行以下更改：

1.  添加参数以表示正在寻找的目标、成功路径的集合以及从一开始的当前路径。

2.  输入与目标匹配的节点时，将当前路径（加上当前节点）添加到成功路径列表中。

3.  用当前节点扩展当前路径以创建在任何递归调用上传递的路径。

4.  `ExploreGraph`使用空路径和成功路径的空列表调用初始调用。

完成后，您的算法将遍历整个图，并且将捕获到目标的不同路径。

这只是一个速写，但您应该能够根据您的特定需求对其进行充实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T17:19:53.803

我不确切知道你想要实现什么，但是这个循环引用问题通常是通过标记已经访问过的节点来解决的。只需使用字典来跟踪已经访问过的节点，这样您就不会循环。

例子 ：

```
 public void ExploreGraph(TreeNode tn, Dictionary<TreeNode, bool> visitednodes)
        {

            foreach (Treenode childnode in tn.Nodes)
            {
                if (!visitedNodes.ContainsKey(childnode))
                {
                    visitednodes.Add(childnode);
                    ExploreGraph(childnode, visitednodes);
                }
            }
        } 
```

# javascript - 如何遍历 DLL 中包含的方法及其属性？

> ID：396300
> 
> 赞同：0
> 
> 时间：2008-12-28T15:48:40.103
> 
> 标签：javascript, dll, vbscript

最好使用 JScript，但 VBscript 也可以，如何通过 DLL 获取其中包含的属性及其属性？为什么？因为最好在运行时确定某些对象的属性，例如它们的数据类型，而不是事先对它们进行硬编码。它们使用的一个示例是将字段初始化为其默认值，例如，字符串的空格、二进制文件的零和日期的当前日期。

干杯，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-02T16:13:02.833

[当您在脚本中创建该类型的对象时， VBSEdit](http://www.vbsedit.com)至少会向您显示用于 VBScript 的 DLL 的方法和属性。

# sql-server - 非常慢的数据库服务器的模式

> ID：396303
> 
> 赞同：1
> 
> 时间：2008-12-28T15:51:01.767
> 
> 标签：sql-server, asp.net-mvc, design-patterns, architecture, caching

我正在构建一个 Asp.net MVC 站点，其中我有一个用于 Web 应用程序的快速专用服务器，但数据库存储在许多其他应用程序使用的非常繁忙的 Ms Sql Server 中。

此外，如果 Web 服务器非常快，则应用程序响应时间很慢，主要是因为 db 服务器的响应慢。

我无法更改数据库服务器，因为在 Web 应用程序中输入的所有数据最终都需要到达那里（出于备份原因）。

该数据库仅从 webapp 使用，我想找到一种缓存机制，其中所有数据都缓存在 Web 服务器上，并且更新异步发送到数据库。

对我来说，读取的数据库数据和插入的数据之间的直接对应并不重要：就像阅读 StackOverflow 上的问题和插入后不需要立即显示的新插入问题一样）。

我想在 WCF 服务之间构建一个中间层，该服务将在慢速数据库服务器和本地服务器（可能是 Sqllite 或 SqlExpress ）之间交换和同步数据。

这个问题的最佳模式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T16:11:33.910

你的瓶颈是什么？读数据还是写数据？

如果您担心读取数据，那么使用像[memcached](http://www.danga.com/memcached/)这样的基于内存的数据缓存机制会提高性能，大多数主流和最大的网站都这样做。[使用 memcached 扩展 facebook hi5](http://www.skrenta.com/2007/05/scaling_facebook_hi5_with_memc.html)是一本不错的读物。此外，实现应用程序端页面缓存将丢弃由应用程序进行的查询，从而触发较低的数据库负载和更好的响应时间。但这不会对数据库服务器负载产生太大影响，因为您的数据库还有其他一些重度用户。

如果写入数据是瓶颈，那么实现某种异步中间件存储服务似乎是必要的。如果您在前端服务器上有快速和慢速响应定时数据存储，那么使用轻量级数据库存储，如 mysql 或 postgresql（可能不是那么轻量级；））并使用您的真实数据库作为您站点的从属复制服务器是一个不错的选择为你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T15:55:46.797

我会做你已经在考虑的事情。为应用程序使用另一个数据库，并且仅将当前数据库用于备份目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T22:50:52.653

我曾经遇到过这个问题，我们决定结合使用数据仓库（即每隔一段时间从数据库中提取数据并将其存储在单独的只读数据库中）和通过 Windows 服务进行消息队列（对于更新。）

这工作得非常好，因为 MSMQ 确保可靠的消息传递（更新不会丢失），并且数据仓库确保数据在本地数据库中可用。

不过，它仍然取决于几个因素。如果您有大量数据要传输到您的 Web 应用程序，则可能需要一些时间来重建仓库，并且您可能需要考虑数据复制或事务日志传送。此外，在重建仓库并处理消息之前，更改是不可见的。

另一方面，该解决方案具有可扩展性，并且相对容易实施。（例如，您可以使用集成服务将数据拉入仓库，并使用 BL 层来处理更改。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T17:23:58.430

有许多复制技术可以为您提供正确的结果。通过在配置的“Web”端安装 SQL Server 实例，您可以选择：

*   从 Web 端（发布者）到数据库服务器端（订阅者）进行快照复制。您需要在 Web 服务器上安装付费版本的 SQLServer。我从未使用过这种配置，但它可能会在预定的同步时间使用大量的 Web 服务器资源
*   在数据库服务器端（发布者）和 Web 端（订阅者）之间进行合并（或事务，如果需要）复制。然后，您可以使用免费版本的 MS-SQL Server，并根据您在 Web 服务器出现故障时对潜在数据丢失的容忍度来安排同步过程的运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T17:29:48.747

我想知道你是否可以改进它，在你的 Web 端添加一个 MDF 文件，而不是处理其他 IP 中的服务器......

只需添加一个[SQL 2008 Server Express Edition](http://www.microsoft.com/express/sql/default.aspx)文件并尝试，只要您不传递 4Gb 的数据就可以了，当然还有更多限制，但只是为了速度，为什么不尝试呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T18:51:44.947

您还应该考虑所涉及的网络交换机。如果数据库服务器正在与多个 Web 服务器通信，那么它可能会受到网络连接速度的限制。如果它们仅通过 100mb 网络交换机连接，那么您可能也需要考虑升级它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T19:10:56.793

WCF 服务对于这个问题将是一个非常糟糕的工程解决方案 - 当您可以使用标准 SQLServer 连接机制来确保正确传输数据时，为什么要自己制作。日志传送将以选定的时间间隔发送数据。

这样，你就得到了快速的本地 sql server，并且数据正确地保存在了慢速的备份服务器中。

不过，您应该调查缓慢的 sql 服务器，性能问题可能与它的负载无关，而更多地与您要求它使用的查询和索引有关。

# php - PHP：我想创建一个从论坛线程中提取图像的页面，可行吗？代码点火器？

> ID：396319
> 
> 赞同：0
> 
> 时间：2008-12-28T15:56:36.407
> 
> 标签：php

您有一个包含一堆图像的论坛（vbulletin） - 拥有一个访问线程的页面，逐步浏览每个页面并将图像转发给用户（通过 ajax 或其他方式）是多么容易。我不是在问过滤（这当然很容易）。

一天内可行吗？:)

我也有一个使用 codeigniter 的网站 - 使用它会更简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T16:02:28.767

假设这是在服务器上执行的，curl + regexp 是你的朋友.. 是的.. 一天就可以完成......

还有一些[开源的 HTML 解析器](http://www.onderstekop.nl/articles/114/)可能会使这个更干净

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T17:44:49.103

是的 一天内可以

由于您已经有一个有效的 CI 设置，我会使用它。

我会使用以下方法：

1) 在 CI 中创建一个模型，能够：

*   登录到 vbulletin（图像通常作为附件添加，您需要先登录才能下载它们）。使用类似[snoopy](http://sourceforge.net/projects/snoopy/)的东西。
*   使用 preg_match() 收集“最后一个按钮”的 url，使用 parse_url() / 和 parse_str() 解析 url 并生成从第 1 页到最后一页的链接
*   从所有生成的链接中收集 html。还在用史努比。
*   使用 preg_match_all() 查找 html 中的所有图像
*   下载所有图像。还在用史努比。
*   将下载的图像从 tmp 目录移动到另一个目录，将其重命名为 imagename_01、imagename_02 等，如果相同的图像名已经存在。
*   将图像名称和精确的字节大小保存在 db 表中。然后，您可以避免多次下载同一个图像。

2）在控制器中创建一个收集所有图像的方法

3）设置一个定期收集图像的cronjob。wget -o /tmp/useless.html [http://localhost/imageminer/collect](http://localhost/imageminer/collect)应该做得很好

4) 编写代码，使用 db 表为最终用户输出漂亮的 html 以获取图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T16:07:52.577

这取决于您的抓取脚本运行的位置。

如果它与论坛软件在同一台服务器上运行，您可能希望直接访问数据库并检查那里的图像链接。我不熟悉 vbulletin，但可能它提供了一个插件 api，允许高级数据库访问。这将简化查询线程中的所有帖子。

但是，如果您的脚本在不同的机器上运行（或者，换句话说，与论坛软件无关），则它必须充当 http 客户端。它可以获取线程的所有页面（通过在页面中搜索 NEXT 链接自动或通过将所有页面指定为参数来手动获取）并在 html 源代码中搜索图像标签 ( `<img .../>`)。然后可以使用正则表达式来提取图像 url。最后，脚本可以使用这些图像 url 来构建显示所有这些图像的另一个页面，或者它可以下载它们并创建一个包。

在第二种情况下，脚本实际上充当“蜘蛛”，因此它应该尊重 robots.txt 或元标记等内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T16:35:38.417

执行此操作时，请确保对获取进行速率限制。您不想通过每秒请求许多页面来使论坛服务器超载。最简单的方法可能是在每次获取之间休眠 X 秒。

# c# - 从 AntiXSS v3 输出中清理 html 编码文本（#decimal 表示法）

> ID：396324
> 
> 赞同：2
> 
> 时间：2008-12-28T15:57:08.090
> 
> 标签：c#, html, regex, xss

我想在博客引擎 XSS 安全中发表评论。尝试了很多不同的方法，但发现非常困难。

当我显示评论时，我首先使用[Microsoft AntiXss 3.0](http://www.codeplex.com/AntiXSS)对整个内容进行 html 编码。然后我尝试使用白名单方法对安全标签进行 html 解码。

在 refactormycode 的 Atwood 的“Sanitize HTML”线程中查看[Steve Downing 的示例](http://refactormycode.com/codes/333-sanitize-html#refactor_44440)。

我的问题是 AntiXss 库将值编码为 &#DECIMAL; 符号，我不知道如何重写史蒂夫的例子​​，因为我的正则表达式知识有限。

我尝试了以下代码，我只是将实体替换为十进制形式，但它不能正常工作。

```
&lt; with &#60;
&gt; with &#62; 
```

我的重写：

```
class HtmlSanitizer
{
    /// <summary>
    /// A regex that matches things that look like a HTML tag after HtmlEncoding.  Splits the input so we can get discrete
    /// chunks that start with &lt; and ends with either end of line or &gt;
    /// </summary>
    private static Regex _tags = new Regex("&#60;(?!&#62;).+?(&#62;|$)", RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled);

    /// <summary>
    /// A regex that will match tags on the whitelist, so we can run them through 
    /// HttpUtility.HtmlDecode
    /// FIXME - Could be improved, since this might decode &gt; etc in the middle of
    /// an a/link tag (i.e. in the text in between the opening and closing tag)
    /// </summary>
    private static Regex _whitelist = new Regex(@"
^&#60;/?(a|b(lockquote)?|code|em|h(1|2|3)|i|li|ol|p(re)?|s(ub|up|trong|trike)?|ul)&#62;$
|^&#60;(b|h)r\s?/?&#62;$
|^&#60;a(?!&#62;).+?&#62;$
|^&#60;img(?!&#62;).+?/?&#62;$",

      RegexOptions.Singleline | RegexOptions.IgnorePatternWhitespace |
      RegexOptions.ExplicitCapture | RegexOptions.Compiled);

    /// <summary>
    /// HtmlDecode any potentially safe HTML tags from the provided HtmlEncoded HTML input using 
    /// a whitelist based approach, leaving the dangerous tags Encoded HTML tags
    /// </summary>
    public static string Sanitize(string html)
    {

        string tagname = "";
        Match tag;
        MatchCollection tags = _tags.Matches(html);
        string safeHtml = "";

        // iterate through all HTML tags in the input
        for (int i = tags.Count - 1; i > -1; i--)
        {
            tag = tags[i];
            tagname = tag.Value.ToLowerInvariant();

            if (_whitelist.IsMatch(tagname))
            {
                // If we find a tag on the whitelist, run it through 
                // HtmlDecode, and re-insert it into the text
                safeHtml = HttpUtility.HtmlDecode(tag.Value);
                html = html.Remove(tag.Index, tag.Length);
                html = html.Insert(tag.Index, safeHtml);
            }

        }

        return html;
    }

} 
```

我的输入测试html是：

```
<p><script language="javascript">alert('XSS')</script><b>bold should work</b></p> 
```

AntiXss 之后变成：

```
&#60;p&#62;&#60;script language&#61;&#34;javascript&#34;&#62;alert&#40;&#39;XSS&#39;&#41;&#60;&#47;script&#62;&#60;b&#62;bold should work&#60;&#47;b&#62;&#60;&#47;p&#62; 
```

当我运行上面的 Sanitize(string html) 版本时，它给了我：

```
<p><script language="javascript">alert&#40;&#39;XSS&#39;&#41;</script><b>bold should work</b></p> 
```

正则表达式匹配我不想要的白名单中的脚本。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T16:13:06.623

您是否考虑过使用 Markdown 或 VBCode 或一些类似的方法让用户标记他们的评论？然后您可以禁止所有 HTML。

如果您必须允许 HTML，那么我会考虑使用 HTML 解析器（本着 HTMLTidy 的精神）并在那里进行白名单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T16:30:17.820

是的，我正在使用带有 Markdown 的 WMD 编辑器，但我希望用户能够像在 Stack Overflow 上一样发布 HTML 和代码示例，所以我不想完全禁止 HTML。

我一直在看[HTML Tidy](http://tidy.sourceforge.net/)，但还没有尝试过。然而，我使用[Html Agility Pack](http://www.codeplex.com/htmlagilitypack)来确保 HTML 是正确的（没有孤立标签）。这是在我运行 AntiXss 之前完成的。

如果我不能让我当前的解决方案按我喜欢的方式工作，我会尝试 HTML Tidy，谢谢你的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T17:13:06.097

您的问题是 C# 错误地解释了您的正则表达式。您需要转义#-符号。没有逃逸它匹配太多。

```
private static Regex _whitelist = new Regex(@"
    ^&\#60;(&\#47;)? (a|b(lockquote)?|code|em|h(1|2|3)|i|li|ol|p(re)?|s(ub|up|trong|trike)?|ul)&\#62;$
    |^&\#60;(b|h)r\s?(&\#47;)?&\#62;$
    |^&\#60;a(?!&\#62;).+?&\#62;$
    |^&\#60;img(?!&\#62;).+?(&\#47;)?&\#62;$",

    RegexOptions.Singleline |
    RegexOptions.IgnorePatternWhitespace |
    RegexOptions.ExplicitCapture 
    RegexOptions.Compiled
 ); 
```

更新 2：您可能对此[xss](http://ha.ckers.org/xss.html)和[regexp](http://regexpal.com/)站点感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T16:51:06.937

我在 Mac 上，所以我无法测试你的 C# 代码。但对我来说，您似乎应该使 _whitelist 正则表达式仅适用于标签名称。这可能意味着您必须进行两次通过，一次用于打开标签，一次用于关闭标签。但这会使它变得简单得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T18:17:37.307

如果有人有兴趣使用它，我将在这里再次发布完整的代码（稍微重构并更新评论）。

我还决定从白名单中删除 img 标签，因为@Pez 和@some 指出允许这样做可能很危险。

还必须指出，我还没有针对可能的 XSS 攻击进行适当的测试。这只是我了解这种方法的效果如何的一个说明点。

```
class HtmlSanitizer
{
    /// <summary>
    /// A regex that matches things that look like a HTML tag after HtmlEncoding to &#DECIMAL; notation. Microsoft AntiXSS 3.0 can be used to preform this. Splits the input so we can get discrete
    /// chunks that start with &#60; and ends with either end of line or &#62;
    /// </summary>
    private static readonly Regex _tags = new Regex(@"&\#60;(?!&\#62;).+?(&\#62;|$)", RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled);

    /// <summary>
    /// A regex that will match tags on the whitelist, so we can run them through 
    /// HttpUtility.HtmlDecode
    /// FIXME - Could be improved, since this might decode &#60; etc in the middle of
    /// an a/link tag (i.e. in the text in between the opening and closing tag)
    /// </summary>

    private static readonly Regex _whitelist = new Regex(@"
^&\#60;(&\#47;)? (a|b(lockquote)?|code|em|h(1|2|3)|i|li|ol|p(re)?|s(ub|up|trong|trike)?|ul)&\#62;$
|^&\#60;(b|h)r\s?(&\#47;)?&\#62;$
|^&\#60;a(?!&\#62;).+?&\#62;$",

      RegexOptions.Singleline | RegexOptions.IgnorePatternWhitespace |
      RegexOptions.ExplicitCapture | RegexOptions.Compiled);

    /// <summary>
    /// HtmlDecode any potentially safe HTML tags from the provided HtmlEncoded HTML input using 
    /// a whitelist based approach, leaving the dangerous tags Encoded HTML tags
    /// </summary>
    public static string Sanitize(string html)
    {
        Match tag;
        MatchCollection tags = _tags.Matches(html);

        // iterate through all HTML tags in the input
        for (int i = tags.Count - 1; i > -1; i--)
        {
            tag = tags[i];
            string tagname = tag.Value.ToLowerInvariant();

            if (_whitelist.IsMatch(tagname))
            {
                // If we find a tag on the whitelist, run it through 
                // HtmlDecode, and re-insert it into the text
                string safeHtml = HttpUtility.HtmlDecode(tag.Value);
                html = html.Remove(tag.Index, tag.Length);
                html = html.Insert(tag.Index, safeHtml);
            }
        }
        return html;
    }
} 
```

# c++ - 关于 C++ 中的多重继承、虚拟基类和对象大小的问题

> ID：396327
> 
> 赞同：12
> 
> 时间：2008-12-28T15:59:55.837
> 
> 标签：c++, multiple-inheritance, sizeof

以下代码打印 20，即 sizeof(z) 为 20。

```
#include <iostream.h>
class Base
{
      public:
            int a;
};

class X:virtual public Base
{
      public:
            int x;
};

class Y:virtual public Base
{
      public:
            int y;
};

class Z:public X,public Y
{
};

int main()
{
Z z;
cout << sizeof(z) <<endl;
} 
```

而如果我在这里不使用虚拟基类，即以下代码：sizeof(z) 为 16。

```
#include <iostream.h>
class Base
{
      public:
            int a;
};

class X:public Base
{
      public:
            int x;
};

class Y:public Base
{
      public:
            int y;
};

class Z:public X,public Y
{
};

int main()
{
Z z;
cout << sizeof(z) <<endl;
} 
```

为什么在第一种情况下 sizeof(z) more(20) ？不应该是 12，因为 Base 在 Z 中只包含一次？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-28T16:24:33.540

我们来看看这两种情况的类布局。

没有虚拟，你有两个基类（“X”和“Y”），每个基类都有一个整数，每个类都集成了一个“基”基类，它也有一个整数。那是 4 个整数，每个 32 位，总共 16 个字节。

```
Offset  Size  Type  Scope  Name
     0     4   int   Base     a
     4     4   int      X     x
     8     4   int   Base     a
    12     4   int      Y     y
    16 size (Z members would come at the end) 
```

（编辑：我在 DJGPP 中编写了一个程序来获取布局并调整表格以解决它。）

现在让我们谈谈虚拟基类：它们用指向共享实例的指针替换类的实际实例。您的“Z”类只有一个“Base”类，“X”和“Y”的两个实例都指向它。因此，您在 X、Y 和 Z 中有整数，但只有一个 Z。这意味着您有三个整数，即 12 个字节。但是 X 和 Y 也有一个指向共享 Z 的指针（否则他们不知道在哪里找到它）。在 32 位机器上，两个指针将额外增加 8 个字节。这总计您看到的 20 个。内存布局可能看起来像这样（我还没有验证过...... ARM 有一个示例，其中顺序是 X、Y、Z，然后是 Base）：

```
Offset  Size        Type  Scope  Name  Value (sort of)
     0     4 Base offset      X     ?  16 (or ptr to vtable)
     4     4         int      X     x
     8     4 Base offset      Y     ?  16 (or ptr to vtable)
    12     4         int      Y     y
    16     4         int   Base     a
    20 size (Z members would come before the Base) 
```

所以内存差异是两件事的结合：少一个整数和多两个指针。与另一个答案相反，我不相信 vtables 支付任何（编辑）直接（/编辑）滚动，因为没有虚拟功能。

编辑：ppinsider 提供了有关 gcc 案例的更多信息，其中他演示了 gcc 通过使用否则为空的 vtable（即，没有虚拟函数）来实现指向虚拟基类的指针。这样，如果有虚函数，它就不需要类实例中的额外指针，需要更多内存。我怀疑缺点是获得基类的额外间接。

我们可能期望所有编译器都这样做，但也许不是。[ARM](http://www.research.att.com/~bs/arm.html)第225 页讨论了虚拟基类，但未提及 vtable。第 235 页专门针对“具有虚拟函数的虚拟基类”，并有一个图表指示内存布局，其中 X 和 Y 部分的指针与指向 vtable 的指针是分开的。我建议任何人不要想当然地认为指向 Base 的指针将以表格的形式实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-28T18:24:54.577

Mark Santesson 的回答几乎是在金钱上，但没有 vtables 的断言是不正确的。您可以使用 g++ -fdump-class-hierarchy 来显示正在发生的事情。这是没有虚拟的情况：

```
Class Base
   size=4 align=4
   base size=4 base align=4
Base (0x19a8400) 0

Class X
   size=8 align=4
   base size=8 base align=4
X (0x19a8440) 0
  Base (0x19a8480) 0

Class Y
   size=8 align=4
   base size=8 base align=4
Y (0x19a84c0) 0
  Base (0x19a8500) 0

Class Z
   size=16 align=4
   base size=16 base align=4
Z (0x19b1800) 0
  X (0x19a8540) 0
    Base (0x19a8580) 0
  Y (0x19a85c0) 8
    Base (0x19a8600) 8 
```

特别注意“基本尺寸”参数。现在是虚拟案例，仅显示 Z：

```
Class Z
   size=20 align=4
   base size=16 base align=4
Z (0x19b3000) 0
    vptridx=0u vptr=((& Z::_ZTV1Z) + 12u)
  X (0x19a8840) 0
      primary-for Z (0x19b3000)
      subvttidx=4u
    Base (0x19a8880) 16 virtual
        vbaseoffset=-0x0000000000000000c
  Y (0x19a88c0) 8
      subvttidx=8u vptridx=12u vptr=((& Z::_ZTV1Z) + 24u)
    Base (0x19a8880) alternative-path 
```

注意“base size”是一样的，但是“size”多了一个指针，注意现在多了一个vtable指针！这又包含父类的构造 vtable，以及所有类间魔法（构造 vtable 和虚拟表表 (VTT)），如下所述：

[http://www.cse.wustl.edu/~mdeters/seminar/fall2005/mi.html](http://www.cse.wustl.edu/~mdeters/seminar/fall2005/mi.html)

请注意，实际的函数调度 vtable 将为空。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-28T16:01:43.620

额外的大小可能是因为虚拟类和多重继承分配了额外的 VTables ( [http://en.wikipedia.org/wiki/Vtable )。](http://en.wikipedia.org/wiki/Vtable)

# java - 自动创建单元测试（半）？

> ID：396337
> 
> 赞同：6
> 
> 时间：2008-12-28T16:04:14.940
> 
> 标签：java, unit-testing, automation, code-generation, annotations

是否有支持从注释生成一些标准单元测试的框架？我想到的一个例子是：

```
@HasPublicDefaultConstructor
public class Foo {

} 
```

这显然会用于自动生成一个单元测试来检查 Foo 是否具有默认构造函数。我是唯一一个想到过这种事情的人吗？;) 虽然我对 Java 最感兴趣，但其他语言的解决方案肯定也会很有趣。

编辑：针对 S.Lott 的回答，让我澄清一下：

我正在尝试测试该类是否具有默认构造函数。（当然这只是一个例子。）我可以通过编写一个测试来做到这一点，但我觉得这很乏味。所以我正在寻找一种工具，可以在编译时（通过 APT）处理注释并为我生成测试。存在这样的东西吗？如果不是，你认为这是个好主意吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-28T19:18:56.950

问题是使用单元测试信息以附加注释的形式“污染”生产代码是否真的是一个好主意。我个人会投反对票。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-29T21:27:53.647

听起来您正在寻找一种比标准 Java 更具声明性表达能力的编程语言。您假设的测试填补了空白，直到编译器可以检查声明的语义。

我不知道有任何工具可以将您建议的注释类型转换为自动化测试。不过，这听起来像是一个不错的 TDD 练习，尤其是使用最近的（-ish）编译器 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T13:27:01.740

**tl;dr：**改用代码检查工具。他们可以做你想做的事，不会污染你的代码，并且可以很容易地构建到自动构建过程中。

这听起来不像应该通过单元测试来处理。如果您坚持每个类都必须定义一个默认构造函数，那么静态代码分析器可能是更好的选择。 [PMD](http://pmd.sourceforge.net/rules/index.html)肯定有这种检测器。[您还可以使用Checkstyle](http://checkstyle.sourceforge.net/)强制使用这种检测器。

两者都可以轻松定制，并且可以与单元测试一起成为持续集成过程的一部分。

**最关键的一点：**这将允许您实现您想要的功能，而不会用额外的注释污染代码库。当我看到这个想法时，这对我来说是一个主要的绊脚石：你创造了一个巨大的软件管理问题。

想象一下使用默认构造函数将类修改为不可变的情况（因此要求在构造过程中完全设置对象）。您还记得更新该课程中的所有这些注释吗？您是否记得更改了调用此方法的其他类中的相关注释？等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T19:04:02.753

Agitar 有一个 [商业]**产品**[AgitarOne](http://www.agitar.com/solutions/products/agitarone.html)，它可以生成 JUnit 测试。我不确定它目前是否支持注释，它[在 2005 年不](http://forums.agitar.com/agitar/board/message?board.id=Products&thread.id=2248)支持。

[Jtest](http://www.parasoft.com/jsp/products/home.jsp?product=Jtest)是另一个面向 Java 的单元测试器生成器，Parasoft 还提供[C++Test](http://www.parasoft.com/jsp/products/home.jsp?product=CppTest&itemId=47)来生成 C++ 单元测试。

我从未测试过它们中的任何一个；几年前我读过 C++Test 论文，但并不相信。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-29T17:24:59.207

“处理注释......并为我生成测试”

对于有限数量的情况，这可能会起作用。然而，一般来说，它是行不通的。

```
@StandardTestForClassHierarchy1
@StandardTestForClassHierarchy2
@StandardTestForClassHierarchy3
@StandardTestForSomeOtherFeature4
@AspectFeature5
@AspectFeature6
@HasPublicDefaultConstructor
@AspectX
@AspectY
class SomeClass extends SomeClassHierarchy implements SomeOtherFeature {
} 
```

我无法区分我的单元测试注释和我的真实注释。

测试注释是否描述了我的应用程序的运行时行为？

*   如果它们*确实*描述了运行时行为，那么它们就是真正的 AOP 注释，而不是测试描述，而是真正生成运行时代码的真实注释。并且注释对模拟类有自己的测试。

*   如果注释*没有*描述运行时行为，那么我现在就会遇到这种奇怪的杂乱无章的非功能性和功能性注释。我没有看到非功能注释中的价值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T21:08:37.353

有点类似于您为测试默认构造函数的存在所描述的内容，我使用[TestUtil](http://sourceforge.net/projects/testutil/)来自动测试 getter 和 setter。您可以使用 XML 文件或 JavaDoc 标记来调整测试选项。遗憾的是，目前似乎没有注释选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T17:05:11.713

对于您的具体示例，最好在编译时更早地使用 java APT（编译时注释处理）来检测此类问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-18T18:52:01.350

我认为您不太可能自救。但是你会增加复杂性。

如果我想确定有一个默认构造函数，我会将以下内容添加到我的单元测试中。

```
Foo foo = new Foo(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-30T17:40:22.403

您可以在编译时使用 APT 检测到这一点。

[http://www.javaspecialists.eu/archive/Issue167.html](http://www.javaspecialists.eu/archive/Issue167.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-28T16:25:36.487

这可能是您正在寻找的：http: [//developer.spikesource.com/wiki/index.php/Projects](http://developer.spikesource.com/wiki/index.php/Projects:testgen4j) :testgen4j 。其他可能有用的链接：[http](http://www.opensourcetesting.org/unit_java.php) ://www.opensourcetesting.org/unit_java.php 。这是一篇当前的论文：[http ://www.alexquinn.org/papers/Generating%20Java%20unit%20tests%20with%20AI%20planning%20(2007).pdf](http://www.alexquinn.org/papers/Generating%20Java%20unit%20tests%20with%20AI%20planning%20(2007).pdf)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-28T16:41:15.287

EiffelStudio CDD 有一个有趣的方法。在调试模式下运行时，IDE 会收集有关被调用方法的信息，并将上下文和调用放入单元测试中。使用按合同设计来检测故障。我知道在 Java 之上有一些按合同扩展的设计，所以这可能是一个不错的方法。

# biztalk - BizTalk 中的负载平衡

> ID：396339
> 
> 赞同：0
> 
> 时间：2008-12-28T16:05:13.643
> 
> 标签：biztalk, load-balancing

在我们的客户站点之一，我们在生产环境中具有以下 BizTalk 2006 拓扑：

*   2 个 BizTalk 运行时服务器
*   1 个带有 MsgBox 和 TrackingDB 的 SQL Server。

其中一台运行时服务器是专用物理服务器，另一台是虚拟服务器，尽管两者都有 4 个 CPU 和 8Gb 内存。物理服务器 CPU 几乎没有使用，而虚拟服务器始终使用 50% - 60% 的 CPU 使用率。

有什么方法可以配置 BizTalk 负载平衡算法，使其在一台服务器上的负载比在另一台服务器上多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T16:43:12.613

是和否是准确的答案:-)

给定一台主机，每台服务器上都有一个实例，BizTalk 将采用简单的循环方法来实现负载平衡；由于服务（编排或管道）与主机相关联，答案将是对于单个服务，不可能为特定服务器分配更多“权重” - 负载将在实例之间均匀分布。

但是，如果您有多个服务，并且这是有意义的，您可以将其中一些专门分配给物理盒子，而将一些分配给两者；这意味着物理盒子将比虚拟盒子承担更多的负载。

显然 - 在两台服务器配置上 - 这确实意味着你失去了冗余，我不会轻易做出这个决定，所以我建议不要这样做。

（话虽如此 - 你说你有一个 SQL 框，所以冗余可能不是主要问题？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-02T13:44:20.090

此外，如果您正在进行 HTTP 接收，请检查您的 Web 负载均衡器的配置。根据其配置，它可能更喜欢一台服务器而不是另一台服务器。

另一个建议是禁用 VM 上的主机实例并主要在物理盒之外运行。如果物理框出现故障，请设置 MOM 警报等以启动脚本以启动 VM 主机实例。我们对集群中的 FTP 接收执行类似的操作。

# excel - 如何在 Excel 工作表中获取 Google 页面排名和搜索次数？

> ID：396355
> 
> 赞同：1
> 
> 时间：2008-12-28T16:28:28.027
> 
> 标签：excel, pagerank

我在一列中有一个链接，基于它，我想要

1.  第 2 列中的 Google 搜索次数
2.  第 3 列中第一个结果的页面排名

我知道这是可以做到的，因为我看到一个朋友直接在 Excel 中提取谷歌搜索结果。如果有人知道，请分享我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T17:03:40.203

如果我正确地解释了您的问题，那么您必须做的一项任务是

**如何以编程方式获取 URL 列表的 Google 页面排名？**

您可以在此 CodeProject 文章中找到执行此操作的代码： [Request Google´s Pagerank programmatically](http://www.codeproject.com/KB/aspnet/Google_Pagerank.aspx)

关于 Excel 部分：这取决于您可以使用哪种编程框架或平台。您可以使用 Microsoft Visual Studio Tools for Office 为 Excel 创建 .NET 扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T16:55:32.963

你有两个选择，不幸的是，这两个选项都没有很好的记录。

如果您熟悉 C/C++，您可以编写一个称为“XLL”的特殊 DLL，您可以在 Excel 运行时调用它。有一些稀疏的[文档](http://msdn.microsoft.com/en-us/library/bb687894.aspx)可用。请注意，这些东西用起来不是很有趣。

[如果您更喜欢 .NET，则此处](http://msdn.microsoft.com/en-us/office/aa905533.aspx)概述的整个 Office 套件的绑定允许您编写可以从 Office 调用的基于 COM 的方法。它旨在实现自动化，但您可以编写任何您想要的托管代码并让 Excel 调用它。

还有刚才Remou建议的；我实际上并没有 Excel 的副本来测试它，但这可能是最简单的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T16:40:19.593

在 Excel 中有数据->获取外部数据->新建 Web 查询。这是你想要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T17:19:48.330

通过链接，我的意思是关键字而不是 URL。我想将关键字放在一个单元格中，并在相邻单元格中提取搜索次数和页面排名。

我尝试在 excel 中对网络查询执行相同的操作，但我只能达到搜索次数。那也不是在正确的单元格中（试图弄清楚）。但我不知道如何获得页面排名。

我不是那种为自己编写活页夹或插件的技术。虽然我正在通过 splattne 检查链接。请更多地关注它。如果我尝试做这个会很耗时吗..？

问候 Thinkjayant

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-27T22:35:22.380

GitHub上有一些很好的插件（各种语言）：

[http://github.com/search?langOverride=&language=&q=pagerank&repo=&start_value=1&type=Repositories&x=0&y=0](http://github.com/search?langOverride=&language=&q=pagerank&repo=&start_value=1&type=Repositories&x=0&y=0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-02-06T09:44:44.013

我的 Excel 插件“SeoTools”中有一个 PR 检查器功能。

[http://nielsbosma.se/projects/seotools/](http://nielsbosma.se/projects/seotools/)

# c++ - 有没有适用于 Mac OS X 的好的（最好是免费的）OO 建模应用程序？

> ID：396368
> 
> 赞同：1
> 
> 时间：2008-12-28T16:38:01.393
> 
> 标签：c++, oop, macos

我正在寻找一些相对简单的东西来指定 C++ 的类层次结构。可以花费$，但最好是免费的，或者至少是简单的，而且不会过度加载和$$$。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T16:49:40.697

一旦 KDE4 在 Mac 上运行得非常好，您应该能够使用出色的 Umbrello 工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T16:46:22.327

你的意思是免费的UML工具吗？如果是这样，我真的很喜欢 JUDE 社区版。UML 当然与语言无关，但导入/导出功能假定为 Java。

[Wikipedia](http://en.wikipedia.org/wiki/List_of_UML_tools)实际上有一个 UML 工具列表，其中一些应该可以在 OSX 上使用。

谷歌找到了[VP UML](http://www.visual-paradigm.com/VPGallery/crossplatform/MacOSX.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T19:11:32.143

OmniGraffle 做得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T19:25:18.230

我可以推荐另一个答案中提到的 Umbrello。我也用过[ArgoUML](http://argouml.tigris.org/)，也很不错。

# windows - 如何禁用 Windows Vista 上的“调试/关闭应用程序”对话框？

> ID：396369
> 
> 赞同：89
> 
> 时间：2008-12-28T16:39:28.487
> 
> 标签：windows, testing, windows-vista, crash-reports, windows-error-reporting

当应用程序在 Windows 上崩溃并安装了诸如 Visual Studio 之类的调试器时，会出现以下模式对话框：

> [标题：微软视窗]
> 
> X 已停止工作
> 
> 一个问题导致程序停止正常工作。如果有可用的解决方案，Windows 将关闭该程序并通知您。
> 
> [调试][关闭应用程序]

有没有办法禁用这个对话框？也就是说，程序是否只是默默地崩溃和烧毁？

我的场景是我想运行几个自动化测试，其中一些会由于被测应用程序中的错误而崩溃。我不希望这些对话框停止自动化运行。

环顾四周，我想我已经找到了在 Windows XP 上禁用此功能的解决方案，该解决方案正在破坏此 reg 密钥：

> HKLM\Software\Microsoft\Windows NT\CurrentVersion\AeDebug\Debugger

但是，这在 Windows Vista 上不起作用。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-12-28T18:47:00.697

要强制 Windows 错误报告 (WER) 进行故障转储并关闭应用程序，而不是提示您调试程序，您可以设置以下注册表项：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting]
"ForceQueue"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\Consent]
"DefaultConsent"=dword:00000001 
```

设置后，当您的应用程序崩溃时，您应该会在以下位置看到 *.hdmp 和 *.mdmp 文件：

```
%ALLUSERSPROFILE%\Microsoft\Windows\WER\ 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2009-02-16T21:18:19.237

看这里：

[http://msdn.microsoft.com/en-us/library/bb513638.aspx](http://msdn.microsoft.com/en-us/library/bb513638.aspx)

注册表编辑器

DWORD HKLM 或 HKCU\Software\Microsoft\Windows\Windows 错误报告\DontShowUI = "1"

会让WER静默报告。然后你可以设置

DWORD HKLM 或 HKCU\Software\Microsoft\Windows\Windows 错误报告\禁用 = "1"

阻止它与 MS 交谈。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2009-01-22T00:34:20.110

我不确定这是否指的是完全相同的对话，但这是[Raymond Chen](http://blogs.msdn.com/oldnewthing/archive/2004/07/27/198410.aspx)的另一种方法：

```
DWORD dwMode = SetErrorMode(SEM_NOGPFAULTERRORBOX);
SetErrorMode(dwMode | SEM_NOGPFAULTERRORBOX); 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2011-03-16T18:52:58.573

我必须禁用此功能才能在 Firefox 的 64 位 Windows 上进行发布自动化工作，并且我执行了以下操作：

*   gpedit.msc
*   计算机配置 -> 管理模板
*   Windows 组件 -> Windows 错误报告
*   将“防止显示严重错误的用户界面”设置为启用

客户体验报告的完成情况类似：http: [//www.blogsdna.com/2137/fix-windows-installer-explorer-update-has-stopped-working-in-windows-7.htm](http://www.blogsdna.com/2137/fix-windows-installer-explorer-update-has-stopped-working-in-windows-7.htm)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-03-27T14:01:36.007

在我的上下文中，我只想为我的单元测试而不是整个系统抑制弹出窗口。我发现需要组合功能来抑制这些错误，例如捕获未处理的异常、抑制运行时检查（例如堆栈指针的有效性）和错误模式标志。这是我成功使用的方法：

```
#include <windows.h>
#include <rtcapi.h>
int exception_handler(LPEXCEPTION_POINTERS p)
{
    printf("Exception detected during the unit tests!\n");
    exit(1);
}
int runtime_check_handler(int errorType, const char *filename, int linenumber, const char *moduleName, const char *format, ...)
{
    printf("Error type %d at %s line %d in %s", errorType, filename, linenumber, moduleName);
    exit(1);
}

int main()
{
    DWORD dwMode = SetErrorMode(SEM_NOGPFAULTERRORBOX);
    SetErrorMode(dwMode | SEM_NOGPFAULTERRORBOX);
    SetUnhandledExceptionFilter((LPTOP_LEVEL_EXCEPTION_FILTER)&exception_handler); 
    _RTC_SetErrorFunc(&runtime_check_handler);

    // Run your tests here

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-05-29T09:48:30.993

在 WPF 应用程序中

```
[DllImport("kernel32.dll", SetLastError = true)]
static extern int SetErrorMode(int wMode);

[DllImport("kernel32.dll")]
static extern FilterDelegate SetUnhandledExceptionFilter(FilterDelegate lpTopLevelExceptionFilter);
public delegate bool FilterDelegate(Exception ex);

public static void DisableChashReport()
{
 FilterDelegate fd = delegate(Exception ex)
 {
  return true;
 };
 SetUnhandledExceptionFilter(fd);
 SetErrorMode(SetErrorMode(0) | 0x0002 );
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-12-28T16:56:50.137

您必须实现一个未处理的异常过滤器，它只是退出您的应用程序，然后使用[SetUnhandledExceptionFilter()](http://msdn.microsoft.com/en-us/library/ms680634.aspx)设置该过滤器函数。

如果您使用的是安全 CRT，您还必须提供自己的无效参数处理程序并使用[_set_invalid_parameter_handler](http://msdn.microsoft.com/en-us/library/a9yf33zb(VS.80).aspx) () 进行设置。

这篇博文也有一些信息： [http ://blog.kalmbachnet.de/?postid=75](http://blog.kalmbachnet.de/?postid=75)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-12-28T17:36:01.713

在测试期间，您可以使用[附加的“调试器”（如 ADPlus）](http://msdn.microsoft.com/en-us/magazine/cc163833.aspx)运行，它可以通过许多有用的方式进行配置，以收集有关错误的数据（小型转储），同时防止您在上面陈述的模式对话框问题。

如果您想在应用程序在生产中崩溃时获得一些有用的信息，您可以配置[Microsoft 错误报告](http://msdn.microsoft.com/en-us/library/bb219076.aspx)以获取类似于 ADPlus 数据的内容。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-08-20T21:41:15.117

这不是问题的直接答案，因为这是一种解决方法，问题是关于如何禁用该功能，但在我的情况下，我是服务器上的用户，权限有限，无法使用以下功能之一禁用该功能其他答案。所以，我需要一个解决方法。这可能至少适用于最终解决这个问题的其他一些人。

我使用了[autohotkey 便携式](http://www.autohotkey.com)并创建了一个宏，它每分钟检查一次弹出框是否存在，如果存在，则单击按钮关闭程序。在我的情况下，这就足够了，并且为其他用户保留了该功能。它要求我在运行有风险的程序时启动脚本，但它可以满足我的需要。

脚本如下：

```
sleep_duration = 60000 ; how often to check, in milliseconds.
                       ; 60000 is a full minute

Loop
{
    IfWinExist, ahk_class #32770 ; use autohotkey's window spy to confirm that
                ; ahk_class #32770 is it for you. This seemed to be consistent
                ; across all errors like this on Windows Server 2008
    {
        ControlClick, Button2, ahk_class #32770 ; sends the click.
                ; Button2 is the control name and then the following
                ; is that window name again
    }
    Sleep, sleep_duration ; wait for the time set above
} 
```

**编辑：**快速标志。当其他事情发生时，这似乎试图激活前台窗口中的控件 - 它应该将其发送到后台程序。如果我找到修复程序，我将编辑此答案以反映它，但现在，请谨慎使用它并尝试同时在机器上执行其他工作。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2010-07-13T00:39:16.913

在尝试了互联网上的所有其他方法以摆脱及时调试器之后，我找到了一种实际可行的简单方法，希望对其他人有所帮助。

转到控制面板转到管理工具转到服务查看机器调试管理器的列表右键单击它并单击常规选项卡下的属性，查找启动类型单击禁用。单击应用和确定。

从那以后我就再也没有看到调试器消息，并且我的计算机运行良好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-10-27T19:55:57.840

您可以完全禁用 Windows Server 2008 R2、Windows Server 2012 和 Windows 8 上的错误报告，而不是更改注册表中的值：`serverWerOptin /disable`

[https://technet.microsoft.com/en-us/library/hh875648(v=ws.11).aspx](https://technet.microsoft.com/en-us/library/hh875648(v=ws.11).aspx)

# c# - 为什么 readonly 和 volatile 修饰符是互斥的？

> ID：396385
> 
> 赞同：9
> 
> 时间：2008-12-28T16:55:16.990
> 
> 标签：c#, .net, multithreading, readonly, volatile

我有一个引用类型变量`readonly`，因为引用永远不会改变，只会改变它的属性。当我尝试将`volatile`修饰符添加到它时，编译器警告我它不会让两个修饰符都应用于同一个变量。但我认为我需要它是 volatile 的，因为我不想在读取它的属性时遇到缓存问题。我错过了什么吗？还是编译器错了？

**更新**正如 Martin 在以下评论之一中所述：对于引用类型的对象，readonly 和 volatile 修饰符都仅适用于引用，而不适用于对象的属性。这就是我所缺少的，所以编译器是正确的。

```
class C
{
    readonly volatile string s;  // error CS0678: 'C.s': a field cannot be both volatile and readonly
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-28T17:22:47.323

`readonly`和`volatile`修饰符都不是穿透性的。它们适用于引用本身，而不是对象的属性。

`readonly`关键字断言（并强制）变量*在*初始化后不能更改。变量是存储引用的一小块内存。

该`volatile`关键字告诉编译器变量的内容可能会被多个线程更改。这可以防止编译器使用可能导致并发访问问题的优化（例如将变量的值读入寄存器并在多个指令中使用该值）。同样，这只影响存储引用的小块内存。

以这种方式应用，您可以看到它们确实是互斥的。如果某些东西是只读的（只能在初始化或构造时写入一次），那么它也不能是易失的（可以随时由多个线程写入）。

* * *

至于您对缓存问题的关注，IIRC，关于编译器何时可以缓存属性调用的结果有非常严格的规则。请记住，它**是**一个方法调用，并且它是一个非常重的优化（从编译器的角度来看）来缓存它的值并跳过再次调用它。我认为这不是您需要过多关注的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T17:02:36.257

只有在第一次构造对象时才能写入只读字段。因此，CPU 上不会有任何缓存问题，因为该字段是不可变的并且不可能更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T17:08:46.337

虽然引用本身可能是线程安全的，但它的属性可能不是。想想如果两个线程试图同时遍历引用对象中包含*的List 会发生什么。*

# java - Hibernate: Mapping User-Friends relation in Social Networks

> ID：396391
> 
> 赞同：3
> 
> 时间：2008-12-28T17:05:08.187
> 
> 标签：java, hibernate, annotations, hibernate-mapping

It's quite some time that I'm trying to figure out this problem and from googling around many people have similar problems.

I'm trying to model a User in a Social Network, using Hibernate, and what is more basic to a social network than to map a friendship relation? Every user in the system should have a list of it's friends and I thought that this might be an incredibly easy task (just use a ManyToMany relation, right?). So I went on to try the following:

```
@Entity
@Table(name="users")
public class User {
   @Id
   @GeneratedValue(strategy=GenerationType.AUTO)
   @Column(name="userid")
   protected Long id = null;
   @ManyToMany
   protected List<User> friends = null
} 
```

The problem now is that it tells me I use ManyToMany wrongly by having no clear distinction between friend and befriended. So far so good, I get the error, but how can I do what I want?

Any idea? I've reached the end of my wisdom.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T17:13:36.483

The `ManyToMany` annotation has a mappedBy parameter. I guess something like

```
@ManyToMany(mappedBy = "friends") 
```

might work. In any case, see the [docs](http://www.hibernate.org/hib_docs/annotations/reference/en/html_single/#eentity-mapping-association-collection-manytomany).

Edit:

It seems as if a many to many relationship needs to be accessible from both ends. Currently yours is only accessible from one end. Maybe you should add the other relation as well:

```
@Entity
@Table(name="users")
public class User {
   @Id
   @GeneratedValue(strategy=GenerationType.AUTO)
   @Column(name="userid")
   protected Long id = null;
   @ManyToMany
   protected List<User> friends = null;
   @ManyToMany(mappedBy = "friends")
   protected List<User> befriended = null;
} 
```

If that doesn't work you can always introduce a separate class representing the relation between two users, and let every user have a collection of instances of this class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T15:24:37.407

The fact about Many to Many is that it needs a little more configuration, because its imperative that Hibernate generates a relation table. Try this:

```
 @Entity
@Table(name="users")
public class User {
   @Id
   @GeneratedValue(strategy=GenerationType.AUTO)
   @Column(name="userid")
   protected Long id = null;
   @ManyToMany
   @JoinTable(name = "user_friends", 
       joinColumns = @JoinColumn(name = "user_id"), 
       inverseJoinColumns = @JoinColumn(name = "friend_id"))
   protected List friends = null;
   @ManyToMany(mappedBy = "friends")
   protected List befriended = null;
} 

```

Hope it works =)

EDIT: Also, be very careful with fetch types... you can enter an user fetching out-of-control loop and get all the DB.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T17:20:23.023

Good point, and in fact I tried that. Problem is that I then get a complaint about the mappedBy attribute being set on both sides of the relationship, which is true, but invalid. I was wondering wether a simple `@ManyToMany` with some clever custom query to fetch the friends might be a solution: The `ManyToMany` would generate a join table with `user_id` and `friend_id,` but the query would match either of the fields, returning all users where that match either the `friend_id` or the `user_id` that is. Any ideas?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T17:51:59.760

That of course would be a good fix, yet I'm not yet completely sold. Basically to get the friends I'd have to merge the two collections, which is quite unsatisfactory.

Is there absolutely no way to create an idempotent, reflexive relation in hibernate?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-25T12:06:50.330

I had the same problem today as well.

```
@Entity
@Table(name="users")
public class User {
   @Id
   @GeneratedValue(strategy=GenerationType.AUTO)
   @Column(name="userid")
   protected Long id = null;
   @ManyToMany
   protected List<User> friends = null
} 
```

Should be ok, I used a similar structure. However I got lazy loading exceptions and when setting the fetchType to EAGER, I got complaints about recursive initialisation of bags.

How I fixed my problem: In the query you use to fetch the 'user', do something like:

```
from User as u left join fetch u.friends 
```

This will initialise the list of friends for that entity. Be warned though that it doesn't initialise any friends from those friends. That is a good thing actually.

# ruby-on-rails - [] Ruby 字符串的方法

> ID：396394
> 
> 赞同：6
> 
> 时间：2008-12-28T17:07:00.960
> 
> 标签：ruby-on-rails, ruby, string, monkeypatching

当我阅读 Beast 的源代码时，我发现很多这样的代码：

```
<%= 'Password'[:password_title] %> 
```

对我来说，这似乎是对 [] 方法的调用，其中 Symbol 作为 String 的输入参数，但我在 ruby​​ API 中没有找到 String [] 方法的这种类型的参数。这是什么意思？提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-28T18:00:18.387

这是Beast使用的“Gibberish”插件添加的一种方法，用于国际化。请记住，Ruby 中的类是开放的，因此在这种情况下您不能总是依赖标准 API！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-28T17:59:19.450

在野兽源代码中，查看正在修改 String 类以接受括号函数中的符号的乱码插件。

String 类本身并没有通过应用`str[symbol]`方法做任何合理的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T17:24:24.140

```
str[fixnum] => fixnum or nil
str[fixnum, fixnum] => new_str or nil
str[range] => new_str or nil
str[regexp] => new_str or nil
str[regexp, fixnum] => new_str or nil
str[other_str] => new_str or nil 
```

这些是我发现的。如果这里的符号等于String，我还是没看懂代码的意思。为什么不简单地使用：

```
<%= 'password' %> 
```

甚至：

```
password 
```

# cocoa - 如何让 NSPanel 上的控件看起来正确？

> ID：396411
> 
> 赞同：1
> 
> 时间：2008-12-28T17:20:31.947
> 
> 标签：cocoa

如果我有一个黑色/透明的 HUD NSPanel，我会向它添加一些控件。如何让控件看起来正确？即是黑色/透明而不是白色/不透明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T17:46:57.477

不幸的是，你必须自己动手，Apple 只提供窗口。

但是，有许多具有许多标准控件的第三方框架：

*   [BGHUDAppKit](https://github.com/binarygod/BGHUDAppKit)
*   [BWToolkit](http://www.brandonwalkin.com/blog/2008/11/13/introducing-bwtoolkit/)（注意：[BWToolkit 不再适用于 Xcode 4](https://stackoverflow.com/questions/5368878/xcode-4-and-bwtoolkit)）

# flash - 我的 Flash 应用程序如何确定自己的 URL？

> ID：396412
> 
> 赞同：6
> 
> 时间：2008-12-28T17:22:20.790
> 
> 标签：flash, actionscript-3

我的 Flash 应用程序需要知道自己的 URL，以便它可以使用相对路径加载一些（非嵌入）内容。

（我不能对完整路径进行硬编码，因为会有多个安装——登台、生产等。我也不能使用简单的相对路径，因为有一个旧版安装使用不同的相对路径（呃）。而且我不能只嵌入内容，因为它是共享的。我需要获取完整的 URL，然后用它做一些 if 语句。）

（请注意，嵌入 .SWF 文件的页面的 URL 将不起作用。该应用程序包含在 CMS 中，因此页面 URL 可能与内容 URL 完全不同。我需要 .SWF 文件的实际 URL。 SWF 文件。）

这可以通过编程方式完成，还是我坚持将 URL 作为参数传递？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-29T15:44:45.587

在 AS3 中，当前 swf 文件的 URL 可以通过 LoaderInfo 类实例找到。因此，在您的主文档类（或主阶段框架脚本）中，这应该为您提供 swf 文件的 URL：

this.loaderInfo.url

每个 MovieClip 都有一个 loaderInfo 成员，它将为您提供其信息。

[LoaderInfo 实时文档。](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/display/LoaderInfo.html#url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T18:05:46.113

mx.managers.BrowserManager

[Adobe Flex LiveDocs](http://livedocs.adobe.com/flex/3/langref/index.html)

[访问有关当前 URL 的信息](http://livedocs.adobe.com/flex/3/html/help.html?content=deep_linking_7.html)

# algorithm - 在 Python 中检查两个字符串是否是彼此的排列

> ID：396421
> 
> 赞同：21
> 
> 时间：2008-12-28T17:25:17.553
> 
> 标签：algorithm, python

我正在检查两个字符串是否`a`相互`b`排列，我想知道在 Python 中执行此操作的理想方法是什么。来自 Python 之禅，“应该有一种——最好只有一种——显而易见的方法”，但我认为至少有两种方法：

```
sorted(a) == sorted(b) 
```

和

```
all(a.count(char) == b.count(char) for char in a) 
```

但是当（例如）第一个字符在`a`中无处时`b`，第一个较慢，而当它们实际上是排列时，第二个较慢。

有没有更好的方法（无论是更 Pythonic 的意义上，还是平均更快的意义上）？或者我应该根据我期望最常见的情况从这两个中进行选择？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-12-28T17:40:03.373

这是一种 O(n) 的方法，渐近优于您建议的两种方法。

```
import collections

def same_permutation(a, b):
    d = collections.defaultdict(int)
    for x in a:
        d[x] += 1
    for x in b:
        d[x] -= 1
    return not any(d.itervalues())

## same_permutation([1,2,3],[2,3,1])
#. True

## same_permutation([1,2,3],[2,3,1,1])
#. False 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-28T18:55:35.513

“但是当（例如）a 的第一个字符不在 b 中时，第一个字符会变慢”。

这种退化案例性能分析不是一个好主意。这是一个浪费时间思考各种晦涩的特殊情况的老鼠洞。

只做**O**风格的“整体”分析。

总的来说，排序是**O** ( *n* log( *n* ) )。

`a.count(char) for char in a`解决方案是**O** ( *n* ² ) 。每个计数通过都是对字符串的全面检查。

如果某些晦涩的特殊情况恰好更快——或更慢，那可能很有趣。但只有当你知道你晦涩的特殊情况的频率时，它才重要。在分析排序算法时，重要的是要注意，相当多的排序涉及已经按正确顺序排列的数据（幸运或聪明的设计），因此对预排序数据的排序性能很重要。

在您晦涩难懂的特殊情况下（“a 的第一个字符在 b 中无处”），这是否足够频繁？如果这只是你想到的一个特例，就把它放在一边。如果这是关于您的数据的事实，请考虑一下。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-28T19:36:38.660

启发式地，您可能最好根据字符串大小将它们分开。

伪代码：

```
returnvalue = false
if len(a) == len(b)
   if len(a) < threshold
      returnvalue = (sorted(a) == sorted(b))
   else
       returnvalue = naminsmethod(a, b)
return returnvalue 
```

如果性能至关重要，并且字符串大小可以大或小，那么这就是我要做的。

根据输入大小或类型拆分此类内容是很常见的。算法有不同的优点或缺点，在另一个更好的地方使用一个是愚蠢的......在这种情况下，Namin 的方法是 O(n)，但具有比 O(n log n) 排序方法更大的常数因子。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-28T17:33:11.017

我认为第一个是“明显”的方式。它更短、更清晰，并且在许多情况下可能更快，因为 Python 的内置排序是高度优化的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-12-28T17:39:08.447

您的第二个示例实际上不起作用：

```
all(a.count(char) == b.count(char) for char in a) 
```

仅当 b 不包含不在 a 中的额外字符时才有效。如果字符串中的字符重复，它也会重复工作。

如果您想知道两个字符串是否是相同*唯一*字符的排列，只需执行以下操作：

```
set(a) == set(b) 
```

要更正您的第二个示例：

```
all(str1.count(char) == str2.count(char) for char in set(a) | set(b)) 
```

set() 对象重载按位 OR 运算符，以便它将计算为两个集合的并集。这将确保您仅为每个字符循环遍历两个字符串的所有字符一次。

也就是说，sorted() 方法更简单、更直观，并且是我将使用的方法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-28T17:54:00.193

以下是对非常小的字符串的一些定时执行，使用两种不同的方法：
1\. 排序
2\. 计数（特别是 @namin 的原始方法）。

```
a, b, c = 'confused', 'unfocused', 'foncused'

sort_method = lambda x,y: sorted(x) == sorted(y)

def count_method(a, b):
    d = {}
    for x in a:
        d[x] = d.get(x, 0) + 1
    for x in b:
        d[x] = d.get(x, 0) - 1
    for v in d.itervalues():
        if v != 0:
            return False
    return True 
```

超过 100,000 次循环的 2 种方法的平均运行时间为：

不匹配（字符串 a 和 b）

```
$ python -m timeit -s 'import temp' 'temp.sort_method(temp.a, temp.b)'
100000 loops, best of 3: 9.72 usec per loop
$ python -m timeit -s 'import temp' 'temp.count_method(temp.a, temp.b)'
10000 loops, best of 3: 28.1 usec per loop 
```

匹配（字符串 a 和 c）

```
$ python -m timeit -s 'import temp' 'temp.sort_method(temp.a, temp.c)'
100000 loops, best of 3: 9.47 usec per loop
$ python -m timeit -s 'import temp' 'temp.count_method(temp.a, temp.c)'
100000 loops, best of 3: 24.6 usec per loop 
```

请记住，使用的字符串非常小。方法的时间复杂度不同，因此您会看到非常大的字符串的不同结果。根据您的数据进行选择，您甚至可以将两者结合使用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-02T22:11:40.973

抱歉，我的代码不在 Python 中，我从未使用过它，但我确信这可以很容易地翻译成 python。我相信这比已经发布的所有其他示例都快。它也是 O(n)，但会尽快停止：

```
public boolean isPermutation(String a, String b) {
    if (a.length() != b.length()) {
        return false;
    }

    int[] charCount = new int[256];
    for (int i = 0; i < a.length(); ++i) {
        ++charCount[a.charAt(i)];
    }

    for (int i = 0; i < b.length(); ++i) {
        if (--charCount[b.charAt(i)] < 0) {
            return false;
        }
    }
    return true;
} 
```

首先，我不使用字典，而是为所有字符使用大小为 256 的数组。访问索引应该快得多。然后当迭代第二个字符串时，当计数低于0时我立即返回false。当第二个循环结束时，您可以确定字符串是一个排列，因为字符串的长度相等，并且没有更频繁地使用字符在 b 中与 a 相比。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-02T22:17:38.963

这是python中的martinus代码。它仅适用于 ascii 字符串：

```
def is_permutation(a, b):
    if len(a) != len(b):
        return False

    char_count = [0] * 256
    for c in a:
        char_count[ord(c)] += 1

    for c in b:
        char_count[ord(c)] -= 1
        if char_count[ord(c)] < 0:
            return False

    return True 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-01-09T00:26:04.880

我在 Java 中与我拥有的书中的所有单词进行了非常彻底的比较。计数方法在各个方面都优于排序方法。结果：

```
Testing against 9227 words.

Permutation testing by sorting ... done.        18.582 s
Permutation testing by counting ... done.       14.949 s 
```

如果有人想要算法和测试数据集，请发表评论。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-12-25T04:15:15.983

首先，为了解决此类问题，例如字符串 1 和字符串 2 是否完全相同，您可以很容易地使用“if”，因为它是 O(1)。其次，重要的是要考虑它们是否只是数值，或者它们也可以是字符串中的单词。如果后者为真（单词和数值同时在字符串中），您的第一个解决方案将不起作用。您可以通过使用“ord()”函数使其成为 ASCII 数值来增强它。但是，最后，您使用的是 sort；因此，在最坏的情况下，您的时间复杂度将是 O(NlogN)。这个时间复杂度还不错。但是，你可以做得更好。你可以使它成为 O(N)。我的“建议”是使用 Array(list) 并同时设置。请注意，在 Array 中找到一个值需要迭代，因此它的时间复杂度是 O(N)，

```
def Permutation2(Str1, Str2):

ArrStr1 = list(Str1) #convert Str1 to array
SetStr2 = set(Str2) #convert Str2 to set

ArrExtra = []

if len(Str1) != len(Str2): #check their length
    return False

elif Str1 == Str2: #check their values
    return True

for x in xrange(len(ArrStr1)):
    ArrExtra.append(ArrStr1[x])

for x in xrange(len(ArrExtra)): #of course len(ArrExtra) == len(ArrStr1) ==len(ArrStr2)
    if ArrExtra[x] in SetStr2: #checking in set is O(1)
        continue
    else:
        return False

return True 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-28T17:43:14.710

使用第一个 - 它更简单，更容易理解。如果您实际上正在处理非常大的字符串并且性能是一个真正的问题，那么不要使用 Python，使用 C 之类的东西。

就 Python 之禅而言，应该只有一种明显的做事方式是指小而简单的事情。显然，对于任何足够复杂的任务，在完成它的方法上总会有无数的小变化。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-01-07T16:23:02.503

在 Python 3.1/2.7 中，您可以只使用`collections.Counter(a) == collections.Counter(b)`.

但`sorted(a) == sorted(b)`仍然是最明显的恕我直言。您正在谈论排列 - 改变顺序 - 所以排序是消除这种差异的明显操作。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-11-10T23:24:08.717

这源自[@patros 的回答](https://stackoverflow.com/a/396570/72321)。

```
from collections import Counter

def is_anagram(a, b, threshold=1000000):
    """Returns true if one sequence is a permutation of the other.

    Ignores whitespace and character case.
    Compares sorted sequences if the length is below the threshold,
    otherwise compares dictionaries that contain the frequency of the
    elements.
    """
    a, b = a.strip().lower(), b.strip().lower()
    length_a, length_b = len(a), len(b)
    if length_a != length_b:
        return False
    if length_a < threshold:
        return sorted(a) == sorted(b)
    return Counter(a) == Counter(b)  # Or use @namin's method if you don't want to create two dictionaries and don't mind the extra typing. 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-05-04T20:37:46.613

这是`O(n)`Python 中使用字典散列的解决方案。请注意，我不使用默认字典，因为如果我们在检查第二个字母后确定这两个字符串不是排列，则代码可能会以这种方式停止。

```
def if_two_words_are_permutations(s1, s2):
    if len(s1) != len(s2):
        return False
    dic = {}
for ch in s1:
    if ch in dic.keys():
        dic[ch] += 1
    else:
        dic[ch] = 1
for ch in s2:
    if not ch in dic.keys():
        return False
    elif dic[ch] == 0:
        return False
    else:
        dic[ch] -= 1
return True 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-29T03:02:50.600

这是我大约一周前写的一个 PHP 函数，它检查两个单词是否是字谜。这将如何与建议的其他方法进行比较（如果在 python 中实现相同）？评论？

```
public function is_anagram($word1, $word2) {
    $letters1 = str_split($word1);
    $letters2 = str_split($word2);
    if (count($letters1) == count($letters2)) {
        foreach ($letters1 as $letter) {
            $index = array_search($letter, $letters2);
            if ($index !== false) {
                unset($letters2[$index]);
            }
            else { return false; }
        }
        return true;
    }
    return false;        
} 
```

* * *

这是PHP 版本（由 JFS 提供）对 Python 的*直译：*

```
def is_anagram(word1, word2):
    letters2 = list(word2)
    if len(word1) == len(word2):
       for letter in word1:
           try:
               del letters2[letters2.index(letter)]
           except ValueError:
               return False               
       return True
    return False 
```

评论：

```
    1.算法是O(N**2)。将其与@namin 的版本进行比较（它是 O(N)）。
    2\. 函数中的多次返回看起来很可怕。

```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-29T08:34:26.173

这个版本比目前提供的任何例子都快，除了它比`sorted(x) == sorted(y)`短字符串慢 20%。这取决于用例，但通常 20% 的性能提升不足以证明通过对短字符串和长字符串使用不同版本来证明代码的复杂性（如@patros 的答案）。

它不使用`len`，因此它接受任何可迭代的，因此它甚至适用于不适合内存的数据，例如，给定两个包含许多重复行的大文本文件，它会回答文件是否具有相同的行（行可以按任何顺序排列） .

```
def isanagram(iterable1, iterable2):
    d = {}
    get = d.get
    for c in iterable1:
        d[c] = get(c, 0) + 1
    try:
        for c in iterable2:
            d[c] -= 1
        return not any(d.itervalues())
    except KeyError:
        return False 
```

目前尚不清楚为什么这个版本比`defaultdict`（@namin's）更快`iterable1`（在 25MB 同义词库上测试）。

如果我们`get`在循环中替换，`try: ... except KeyError`那么对于短字符串，即当重复项很少时，它的执行速度会慢 2 倍。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-04T16:07:49.457

在 Swift（或其他语言实现）中，您可以查看编码值（在本例中为 Unicode）并查看它们是否匹配。

就像是：

```
let string1EncodedValues = "Hello".unicodeScalars.map() {
//each encoded value
$0
//Now add the values
}.reduce(0){ total, value in
    total + value.value
}

let string2EncodedValues = "oellH".unicodeScalars.map() {
    $0
    }.reduce(0) { total, value in
    total + value.value
}

let equalStrings = string1EncodedValues == string2EncodedValues ? true : false 
```

您将需要根据需要处理空间和案例。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-03-14T20:05:47.670

```
def matchPermutation(s1, s2):
  a = []
  b = []

  if len(s1) != len(s2):
    print 'length should be the same'
  return

  for i in range(len(s1)):
    a.append(s1[i])

  for i in range(len(s2)):
    b.append(s2[i])

  if set(a) == set(b):
    print 'Permutation of each other'
  else:
    print 'Not a permutation of each other'
  return

#matchPermutaion('rav', 'var') #returns True
matchPermutaion('rav', 'abc') #returns False 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-05-31T21:42:31.787

# 在 Python 中检查两个字符串是否是彼此的排列

```
# First method
def permutation(s1,s2):
 if len(s1) != len(s2):return False;
 return ' '.join(sorted(s1)) == ' '.join(sorted(s2))

# second method
def permutation1(s1,s2):
 if len(s1) != len(s2):return False;
 array = [0]*128;
 for c in s1:
 array[ord(c)] +=1
 for c in s2:
   array[ord(c)] -=1
   if (array[ord(c)]) < 0:
     return False
 return True 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-03-19T07:29:16.030

这样的事情怎么样。非常简单易读。这适用于字符串，因为根据 OP。

**鉴于 sorted() 的复杂度为 O(n log n)。**

```
def checkPermutation(a,b):
    # input: strings a and b
    # return: boolean true if a is Permutation of b

    if len(a) != len(b):
        return False
    else:
        s_a = ''.join(sorted(a))
        s_b = ''.join(sorted(b))
        if s_a == s_b:
            return True
        else:
            return False

# test inputs
a = 'sRF7w0qbGp4fdgEyNlscUFyouETaPHAiQ2WIxzohiafEGJLw03N8ALvqMw6reLN1kHRjDeDausQBEuIWkIBfqUtsaZcPGoqAIkLlugTxjxLhkRvq5d6i55l4oBH1QoaMXHIZC5nA0K5KPBD9uIwa789sP0ZKV4X6'
b = 'Vq3EeiLGfsAOH2PW6skMN8mEmUAtUKRDIY1kow9t1vIEhe81318wSMICGwf7Rv2qrLrpbeh8bh4hlRLZXDSMyZJYWfejLND4u9EhnNI51DXcQKrceKl9arWqOl7sWIw3EBkeu7Fw4TmyfYwPqCf6oUR0UIdsAVNwbyyiajtQHKh2EKLM1KlY6NdvQTTA7JKn6bLInhFvwZ4yKKbzkgGhF3Oogtnmzl29fW6Q2p0GPuFoueZ74aqlveGTYc0zcXUJkMzltzohoRdMUKP4r5XhbsGBED8ReDbL3ouPhsFchERvvNuaIWLUCY4gl8OW06SMuvceZrCg7EkSFxxprYurHz7VQ2muxzQHj7RG2k3khxbz2ZAhWIlBBtPtg4oXIQ7cbcwgmBXaTXSBgBe3Y8ywYBjinjEjRJjVAiZkWoPrt8JtZv249XiN0MTVYj0ZW6zmcvjZtRn32U3KLMOdjLnRFUP2I3HJtp99uVlM9ghIpae0EfC0v2g78LkZE1YAKsuqCiiy7DVOhyAZUbOrRwXOEDHxUyXwCmo1zfVkPVhwysx8HhH7Iy0yHAMr0Tb97BqcpmmyBsrSgsV1aT3sjY0ctDLibrxbRXBAOexncqB4BBKWJoWkQwUZkFfPXemZkWYmE72w5CFlI6kuwBQp27dCDZ39kRG7Txs1MbsUnRnNHBy1hSOZvTQRYZPX0VmU8SVGUqzwm1ECBHZakQK4RUquk3txKCqbDfbrNmnsEcjFaiMFWkY3Esg6p3Mm41KWysTpzN6287iXjgGSBw6CBv0hH635WiZ0u47IpUD5mY9rkraDDl5sDgd3f586EWJdKAaou3jR7eYU7YuJT3RQVRI0MuS0ec0xYID3WTUI0ckImz2ck7lrtfnkewzRMZSE2ANBkEmg2XAmwrCv0gy4ExW5DayGRXoqUv06ZLGCcBEiaF0fRMlinhElZTVrGPqqhT03WSq4P97JbXA90zUxiHCnsPjuRTthYl7ZaiVZwNt3RtYT4Ff1VQ5KXRwRzdzkRMsubBX7YEhhtl0ZGVlYiP4N4t00Jr7fB4687eabUqK6jcUVpXEpTvKDbj0JLcLYsneM9fsievUz193f6aMQ5o5fm4Ilx3TUZiX4AUsoyd8CD2SK3NkiLuR255BDIA0Zbgnj2XLyQPiJ1T4fjStpjxKOTzsQsZxpThY9Fvjvoxcs3HAiXjLtZ0TSOX6n4ZLjV3TdJMc4PonwqIb3lAndlTMnuzEPof2dXnpexoVm5c37XQ7fBkoMBJ4ydnW25XKYJbkrueRDSwtJGHjY37dob4jPg0axM5uWbqGocXQ4DyiVm5GhvuYX32RQaOtXXXw8cWK6JcSUnlP1gGLMNZEGeDXOuGWiy4AJ7SH93ZQ4iPgoxdfCuW0qbsLKT2HopcY9dtBIRzr91wnES9lDL49tpuW77LSt5dGA0YLSeWAaZt9bDrduE0gDZQ2yX4SDvAOn4PMcbFRfTqzdZXONmO7ruBHHb1tVFlBFNc4xkoetDO2s7mpiVG6YR4EYMFIG1hBPh7Evhttb34AQzqImSQm1gyL3O7n3p98Kqb9qqIPbN1kuhtW5mIbIioWW2n7MHY7E5mt0'

print(checkPermutation(a, b)) #optional 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-06-17T17:13:22.817

```
def permute(str1,str2):
    if sorted(str1) == sorted(str2):
        return True
    else:
        return False

str1="hello"
str2='olehl'
a=permute(str1,str2)
print(a 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-06-29T16:03:44.303

```
from collections import defaultdict
def permutation(s1,s2):
    h = defaultdict(int)
    for ch in s1:
        h[ch]+=1
    for ch in s2:
        h[ch]-=1
    for key in h.keys():
        if h[key]!=0 or len(s1)!= len(s2):
            return False
        return True
print(permutation("tictac","tactic")) 
```

# wcf - WCF DataContract 复杂类型的反序列化

> ID：396425
> 
> 赞同：0
> 
> 时间：2008-12-28T17:27:32.807
> 
> 标签：wcf, serialization

我有一个返回 MyClass 对象集合的服务。如果 MyClass2Reference 中的所有 MyClass 实例都为 null，那么一切正常。否则，我会在客户端收到“连接重置”错误。我究竟做错了什么？

```
[DataContract]
public MyClass
{
[DataMember]
int ID;
[DataMember]
MyClass2 MyClass2Reference;
}

[DataContract]
public MyClass2
{
[DataMember]
int ID;
[DataMember]
string Name;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-19T16:34:18.130

我认为向您的 WCF 配置添加一些跟踪，然后通过服务跟踪查看器运行结果，如此处[所述](http://msdn.microsoft.com/en-us/library/ms732023.aspx "这里")

会给出一个很好的错误描述。我发现在处理奇怪的 WCF 错误时，这始终是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-17T05:52:48.730

已解决 - 这是[NHibernate 惰性代理对象](http://timvasil.com/blog14/post/2008/02/WCF-serialization-with-NHibernate.aspx)的问题。

# version - 你怎么知道要使用什么版本号？

> ID：396429
> 
> 赞同：47
> 
> 时间：2008-12-28T17:32:41.610
> 
> 标签：version

这是我一直想知道的...

请原谅我的天真，但是 - 你如何决定用什么版本号来命名你的软件？

我假设，当有人创建应用程序/程序的“最终”版本时，它是 1.0 版吗？- 然后，当你更新它时会发生什么，你如何决定将它称为 1.1 或 1.03 等等等等。

这主要是为开发人员准备的吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2008-12-28T17:37:09.540

我最近听说了一种更简洁的版本控制策略，这是我在[Eric Elliot 的 Medium 帐户中](https://medium.com/javascript-scene/software-versions-are-broken-3d2dc0da0783)第一次遇到的。它更侧重于面向客户的版本号的库版本控制，但它具有简单的优势。使用由三部分组成的版本号，其中每个数字表示：

**打破.feature.fix**

*   **打破**：发生了一些变化，这意味着代码/期望必须改变
*   **功能**：添加了一些新内容，但旧代码/期望仍然可以正常工作。
*   **修复**：没有什么新东西，但一个错误已被修复。

我将旧答案留在下面，因为它仍然与面向客户的版本相关。

* * *

我倾向于按如下方式对有效数字进行加权....

wxyz（或 w.xyz）

*   w - 主要版本，具有许多新功能。付费升级。软件的第一个公开版本是 1.X（预发布版本是 0.X）
*   x - 重要版本，但没有开创性的新功能。
*   y - 修正版本
*   z - Patchlevel 版本（修复紧急错误，可能只针对一个客户端）。

如果选择使用 w.xyz 格式，在溢出前只能得到 9 位数字。但是，如果您经常发布，您可能会遇到更大的问题。

让我们用我的新产品 FooApp 来说明一下吧！

*   0.9 - 第一个公开测试版
*   0.91 - 第二个公开测试版
*   0.911 - 修复摩托罗拉 68010 崩溃的紧急测试版
*   1.0 - 第一次公开发布
*   1.1 - 添加了新的 BlahBaz 功能
*   1.11 - 错误修正
*   2.0 - 完全重新开发的界面。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-12-28T17:45:47.667

Jeff Atwood 有一篇关于此的[博客文章](https://blog.codinghorror.com/whats-in-a-version-number-anyway/)，他主张只使用日期，而不是将用户与版本号混淆。但是，他确实讨论了 Microsoft 采用的方法：使用日期确定版本号。他在他的帖子中有相当多的深度，所以我不会在这里重复他的工作。至于版本控制：

版本（至少在 .NET 中，类似这样）：

1.2.3.4 其中：

1 是**主要版本**
2 是**次要版本**
3 是内部**版本**号
4 是**修订版本**号

**主要版本**- 表示一个“完整”的系统，具有该版本应具有的任何功能。通常，任何后续的“主要”版本都是重写、架构更改或（请原谅冗余）对软件的重大更改。

**次要版本**- 表示不太重要的版本，可能包含错误修复、添加的小功能或任何数量的其他“次要”事件。这可能包括界面更改和添加。通常，应用程序在它们的“主要版本”树中应该有点兼容，因此同一主要版本的次要版本在架构上应该是相同的。

**内部版本号**- 通常仅表示错误修复、小修复，并且在其范围内有些微不足道。它可以像改变应用程序的前景和背景之间的对比度一样简单。通常，构建是内部名称，例如夜间构建，因此您总是有一个地方可以恢复到稳定的状态。

**修订号**- 表示何时发布错误修复或进行非常小的改进。这些通常仅用于错误修复——**不包括主要功能增强作为修订**。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-28T17:52:49.243

我们为任何应用程序的每个构建分配唯一的四部分版本号，定义为**Major.Minor.Maintenance.Build**。

**主要**- 主要编号与应用程序的重大更改相关联。这个数字还决定了与同一“套件”中其他应用程序的兼容性。当发布新版本时，此数字会增加。这通常意味着发生了重大的架构变化。

**次要**- 次要编号与新功能和重大错误修复相关联。每当引入新功能或应用重大错误修复时，此数字将被提前，并且维护编号将设置为零。

**维护**- 维护编号与非破坏性错误修复相关联。每当发布仅包含非中断错误修复的版本时，此数字将被提前。

**内部版本 - 内部版本号与编译**应用程序的 subversion 变更集*（修订号）*相关联。这将提供一种简单的方法来将版本号与 subversion 中的一组精确代码进行匹配。

开发人员对此方案真正感兴趣的唯一数字是**Build**。数字。通过将**内部**版本号与 subversion 修订号联系起来，我们可以保证使用什么代码来创建发布的应用程序。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-28T17:39:08.040

我认为 Linux 内核是一个很好的参考：

> Linux 内核的版本号目前由四个数字组成，这是在最近更改了长期以来的三数字版本控制策略之后。为了说明起见，假设版本号是这样组成的：ABC[.D]（例如 2.2.1、2.4.13 或 2.6.12.3）。
> 
> ```
> * The A number denotes the kernel version. It is rarely changed, and 
> ```
> 
> 只有当代码和内核概念发生重大变化时。它在内核的历史上已经改变了两次：1994 年（1.0 版）和 1996 年（2.0 版）。
> 
> ```
> * The B number denotes the major revision of the kernel.
>       o Prior to the Linux 2.6.x series, even numbers indicate a stable 
> ```
> 
> 发布，即认为适合生产使用的版本，例如 1.2、2.4 或 2.6。奇数历史上一直是开发版本，例如 1.1 或 2.5。它们用于测试新功能和驱动程序，直到它们变得足够稳定以包含在稳定版本中。这是一个偶数/奇数版本号方案。o 从 Linux 2.6.x 系列开始，偶数或奇数没有意义，新功能开发在同一个内核系列中进行。Linus Torvalds 曾表示，这将是可预见的未来的模式。
> 
> ```
> * The C number indicates the minor revision of the kernel. In the old 
> ```
> 
> 三号版本控制方案，当在内核中实现安全补丁、错误修复、新功能或驱动程序时，这会发生变化。但是，对于新政策，只有在引入新的驱动程序或功能时才会更改；次要修复由 D 号处理。
> 
> ```
> * A D number first occurred when a grave error, which required immediate 
> ```
> 
> 修复，在 2.6.8 的 NFS 代码中遇到。但是，没有足够的其他更改来使新的次要版本（本来应该是 2.6.9）的发布合法化。因此，发布了 2.6.8.1，唯一的变化是修复了该错误。在 2.6.11 中，这被采用为新的官方版本控制策略。错误修复和安全补丁现在由第四个数字管理，而更大的更改仅在较小的修订更改（C 编号）中实现。D 编号还与编译器构建内核的次数相关联，因此称为“构建编号”。
> 
> 另外，有时版本之后会有一些更多的字母，例如'rc1'或'mm2'。'rc' 指的是候选版本，表示非官方版本。其他字母通常（但不总是）是一个人的首字母。这表明该人的内核开发分支。例如，ck 代表 Con Kolivas，ac 代表 Alan Cox，而 mm 代表 Andrew Morton。有时，这些字母与构建内核的分支的主要开发区域相关，例如，wl 表示无线网络测试构建。

来自[http://en.wikipedia.org/wiki/Linux_kernel#Version_numbering](http://en.wikipedia.org/wiki/Linux_kernel#Version_numbering)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-28T18:10:28.320

无论您选择哪种编号方案，当新版本与**旧客户端代码兼容****时，以及新版本何时需要对现有客户端进行更改时，**向用户说明这一点至关重要。当客户端代码必须更改时，我知道的大多数项目都会碰到第一个数字。

除了兼容性之外，我也认为使用日期还有很多话要说。尽管像我一样，如果您的发布时间表是每两年一次（但这是针对 1989 年首次发布的工具），这会很尴尬。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-28T17:38:02.207

销售或营销人员很可能会决定他们需要一些嗡嗡声。这将确定下一个版本是 1.01 还是 1.1 还是 2.0。在开源中的工作方式是一样的，但它往往与团队引以为豪的一个新奇的功能联系在一起。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-28T17:43:56.843

A B C D

*   A：测试版时为 0，首次发布时为 1，几乎整个重写时大于 1。
*   B：新增功能
*   C：错误修复完成
*   版本控制存储库的修订号

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-28T17:47:44.310

这是我在嵌入式 C 项目中用于模块的：

**1.00 - 初始版本**

**1.01 - 次要版本** 模块没有接口更改（即头文件没有更改）。任何使用我的模块的人都可以升级而不必害怕破坏代码。我可能已经做了一些重构或代码清理。

**2.00 - 主要修订** 模块接口更改（即添加、删除功能或更改某些功能的功能）。对此版本的升级很可能会破坏现有代码，并且需要使用此模块重构代码。

我应该补充一点，这是指开发阶段，即模块的内部发布到项目中。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-12-28T18:27:44.073

为了补充上述所有解释，我建议使用版本控制方案，这将使您的客户容易记住并且您可以轻松地为您的软件版本设置基线和管理。此外，如果您支持不同的框架，例如 .Net 1.0、.Net1.1 等，那么请确保您的版本控制方案也能解决这个问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-28T18:14:13.103

[这里](https://stackoverflow.com/questions/199823/best-practices-for-assembly-naming-and-versioning)也有一些很好的信息..

[何时更改文件/程序集版本](http://blogs.msdn.com/suzcook/archive/2003/05/29/57148.aspx)

何时更改文件/程序集版本 首先，文件版本和程序集版本不必相互一致。我建议文件版本随着每次构建而改变。但是，不要在每次构建时更改程序集版本，以便您可以分辨同一文件的两个版本之间的区别；为此使用文件版本。决定何时更改程序集版本需要对要考虑的构建类型进行一些讨论：运输和非运输。

非发货版本 一般来说，我建议在发货版本之间保持非发货组件版本相同。这避免了由于版本不匹配而导致的强命名程序集加载问题。有些人更喜欢使用发布者策略为每个构建重定向新的程序集版本。但是，我建议不要将其用于非运输版本：它并不能避免所有加载问题。例如，如果合作伙伴 x 复制您的应用，他们可能不知道安装发布者政策。然后，您的应用程序将被他们破坏，即使它在您的机器上运行良好。

但是，如果同一台机器上的不同应用程序需要绑定到程序集的不同版本，我建议为这些构建提供不同的程序集版本，以便可以为每个应用程序使用正确的程序集版本，而无需使用 LoadFrom/etc。

发布版本 至于为发布版本更改该版本是否是一个好主意，这取决于您希望绑定如何为最终用户工作。您希望这些构建是并排的还是就地的？两个版本之间有很多变化吗？他们会破坏一些客户吗？您是否关心它会破坏它们（或者您是否想强制用户使用您的重要更新）？如果是，您应该考虑增加程序集版本。但是，再一次，请考虑这样做太多次可能会在用户的磁盘上乱扔过时的程序集。

当您更改您的程序集版本时要将硬编码版本更改为新版本，我建议在头文件中为版本设置一个变量，并将源代码中的硬编码替换为该变量。然后，在构建期间运行预处理器以放入正确的版本。我建议在发货后立即更改版本，而不是之前，以便有更多时间来发现由于更改而导致的错误。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-11-28T17:35:07.897

在库的情况下，版本号告诉您两个版本之间**的兼容性级别**，以及升级的难度。

错误修复版本需要保留二进制、源代码和序列化兼容性。

次要版本对不同的项目意味着不同的东西，但通常它们不需要保持源代码兼容性。

主要版本号可以打破所有三种形式。

[我在这里](http://motlin.com/2010/how-to-do-version-numbers/)写了更多关于基本原理的文章。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-11-30T19:21:27.520

这取决于项目。下面是 haskell 的包版本控制政策。

```
-- The package version.  See the Haskell package versioning policy (PVP) 
-- for standards guiding when and how versions should be incremented.
-- http://www.haskell.org/haskellwiki/Package_versioning_policy
-- PVP summary:      +-+------- breaking API changes
--                   | | +----- non-breaking API additions
--                   | | | +--- code changes with no API change
version:             0.1.0.0 
```

# html - HTML/CSS 中的单选/复选框对齐

> ID：396439
> 
> 赞同：79
> 
> 时间：2008-12-28T17:40:07.320
> 
> 标签：html, css, checkbox, radio-button

将单选按钮/复选框与文本正确对齐的最简洁方法是什么？到目前为止，我一直在使用的唯一可靠的解决方案是基于表格的：

```
<table>
<tr>
    <td><input type="radio" name="opt"></td>
    <td>Option 1</td>
</tr>
<tr>
    <td><input type="radio" name="opt"></td>
    <td>Option 2</td>
</tr>
</table> 
```

这可能会遭到一些人的反对。我刚刚花了一些时间（再次）调查无表解决方案但失败了。我尝试过各种浮动组合、绝对/相对定位和类似方法。不仅它们主要依赖于单选按钮/复选框的估计高度，而且它们在不同浏览器中的行为也不同。理想情况下，我想找到一个不假设任何大小或特殊浏览器怪癖的解决方案。我可以使用表格，但我想知道还有其他解决方案。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2009-05-20T21:55:12.630

我想我终于解决了这个问题。一种通常推荐的解决方案是使用垂直对齐：中间：

```
<input type="radio" style="vertical-align: middle"> Label 
```

然而，问题是这仍然会产生明显的错位，即使它理论上应该有效。CSS2 规范说：

> **vertical-align: middle：**将框的垂直中点与父框的基线加上父框的一半x高度对齐。

所以它应该在完美的中心（x 高度是字符 x 的高度）。但是，问题似乎是由于浏览器通常会为单选按钮和复选框添加一些随机不均匀的边距。可以检查，例如在 Firefox 中使用 Firebug，Firefox 中的默认复选框边距是`3px 3px 0px 5px`. 我不确定它来自哪里，但其他浏览器似乎也有类似的边距。因此，要获得完美的对齐，需要摆脱这些边距：

```
<input type="radio" style="vertical-align: middle; margin: 0px;"> Label 
```

值得注意的是，在基于表格的解决方案中，边距以某种方式被吃掉并且一切都很好地对齐。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2008-12-28T18:35:43.760

以下适用于 Firefox 和 Opera（抱歉，我目前无法访问其他浏览器）：

```
<div class="form-field">
    <input id="option1" type="radio" name="opt"/>
    <label for="option1">Option 1</label>
</div> 
```

CSS：

```
.form-field * {
    vertical-align: middle;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2010-10-28T15:02:15.243

我发现最好和最简单的方法就是这个，因为你不需要添加标签、div 或任何东西。

`input { vertical-align: middle; margin-top: -1px;}`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-28T18:07:00.497

我根本不会为此使用表格。CSS 可以轻松做到这一点。

我会做这样的事情：

```
 <p class="clearfix">
      <input id="option1" type="radio" name="opt" />
      <label for="option1">Option 1</label>
   </p>

p { margin: 0px 0px 10px 0px; }
input { float: left; width: 50px; }
label { margin: 0px 0px 0px 10px; float: left; } 
```

注意：我使用了来自[http://www.positioniseverything.net/easyclearing.html的 clearfix 类](http://www.positioniseverything.net/easyclearing.html)

```
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}

.clearfix {display: inline-block;}

/* Hides from IE-mac \*/
* html .clearfix {height: 1%;}
.clearfix {display: block;}
/* End hide from IE-mac */ 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-07-08T22:34:08.853

这有点小技巧，但这个 CSS 似乎让它在所有浏览器中都能很好地工作，就像使用表格一样（除了 chrome）

```
input[type=radio] { vertical-align: middle; margin: 0; *margin-top: -2px; }
label { vertical-align: middle; }
@media screen and (-webkit-min-device-pixel-ratio:0) {
 input[type=radio] { margin-top: -2px; }
} 
```

确保在收音机上使用标签以使其正常工作。IE

```
<option> <label>My Radio</label> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-01-09T13:07:07.710

如果您的标签很长并且多行设置宽度和 display:inline-block 会有所帮助。

```
.form-field * {
  vertical-align: middle;
}
.form-field input {
  clear:left;
}
.form-field label { 
  width:200px;
  display:inline-block;
}

<div class="form-field">
    <input id="option1" type="radio" name="opt" value="1"/>
    <label for="option1">Option 1 is very long and is likely to go on two lines.</label>
    <input id="option2" type="radio" name="opt" value="2"/>
    <label for="option2">Option 2 might fit into one line.</label>
</div> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-10-21T23:38:46.727

我发现最好的解决方法是给输入一个与标签匹配的高度。至少这解决了我在 Firefox 和 IE 中不一致的问题。

```
input { height: 18px; margin: 0; float: left; }
label { height: 18px; float: left; }

<li>
  <input id="option1" type="radio" name="opt" />
  <label for="option1">Option 1</label>
</li> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-04-19T19:20:46.187

以下代码应该可以工作:)

问候，

* * *

```
<style type="text/css">
输入[类型=复选框] {
    边距底部：4px；
    垂直对齐：中间；
}

标签 {
    垂直对齐：中间；
}
</style>

<input id="checkBox1" type="checkbox" /><label for="checkBox1">显示资产</label><br />
<input id="checkBox2" type="checkbox" /><label for="checkBox2">显示检测器</label><br />

```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-06-21T08:27:19.893

这是一个简单的解决方案，为我解决了这个问题：

```
label 
{

/* for firefox */
vertical-align:middle; 

/*for internet explorer */
*bottom:3px;
*position:relative; 

padding-bottom:7px; 

} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-11-29T21:25:35.920

有几种实现方式：

1.  对于 ASP.NET 标准复选框：

    ```
    .tdInputCheckBox
    { 
    position:relative;
    top:-2px;
    }
    <table>
            <tr>
                <td class="tdInputCheckBox">                  
                    <asp:CheckBox ID="chkMale" runat="server" Text="Male" />
                    <asp:CheckBox ID="chkFemale" runat="server" Text="Female" />
                </td>
            </tr>
    </table> 
    ```

2.  对于 DevExpress 复选框：

    ```
    <dx:ASPxCheckBox ID="chkAccept" runat="server" Text="Yes" Layout="Flow"/>
    <dx:ASPxCheckBox ID="chkAccept" runat="server" Text="No" Layout="Flow"/> 
    ```

3.  对于单选按钮列表：

    ```
    <asp:RadioButtonList ID="rdoAccept" runat="server" RepeatDirection="Horizontal">
       <asp:ListItem>Yes</asp:ListItem>
       <asp:ListItem>No</asp:ListItem>
    </asp:RadioButtonList> 
    ```

4.  对于必填字段验证器：

    ```
    <asp:TextBox ID="txtEmailId" runat="server"></asp:TextBox>
    <asp:RequiredFieldValidator ID="reqEmailId" runat="server" ErrorMessage="Email id is required." Display="Dynamic" ControlToValidate="txtEmailId"></asp:RequiredFieldValidator>
    <asp:RegularExpressionValidator ID="regexEmailId" runat="server" ErrorMessage="Invalid Email Id." ControlToValidate="txtEmailId" Text="*"></asp:RegularExpressionValidator>` 
    ```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-01-06T07:21:33.757

**下面我将动态插入一个复选框。包含样式以对齐复选框，最重要的是确保自动换行。这里最重要的是 display: table-cell; 用于对齐**

视觉基本代码。

**'动态插入复选框的代码**

```
Dim tbl As Table = New Table()
Dim tc1 As TableCell = New TableCell()
tc1.CssClass = "tdCheckTablecell"

'get the data for this checkbox
Dim ds As DataSet
Dim Company As ina.VullenCheckbox
Company = New ina.VullenCheckbox
Company.IDVeldenperScherm = HETid
Company.IDLoginBedrijf = HttpContext.Current.Session("welkbedrijf")
ds = Company.GetsDataVullenCheckbox("K_GetS_VullenCheckboxMasterDDLOmschrijvingVC") 'ds6 
```

'创建复选框

```
Dim radio As CheckBoxList = New CheckBoxList
radio.DataSource = ds
radio.ID = HETid
radio.CssClass = "tdCheck"
radio.DataTextField = "OmschrijvingVC"
radio.DataValueField = "IDVullenCheckbox"
radio.Attributes.Add("onclick", "documentChanged();")
radio.DataBind() 
```

'连接复选框

```
tc1.Controls.Add(radio)
tr.Cells.Add(tc1)
tbl.Rows.Add(tr) 
```

**'复选框的样式**

```
input[type="checkbox"] {float: left;   width: 5%; height:20px; border: 1px solid black; }

.tdCheck label {     width: 90%;display: table-cell;    align:right;}

.tdCheck {width:100%;} 
```

**和 HTML 输出**

```
<head id="HEAD1">
    <title>
        name
    </title>
    <meta content="Microsoft Visual Studio .NET 7.1" name="GENERATOR" /><meta content="Visual Basic .NET 7.1" name="CODE_LANGUAGE" />
</head>
<style type='text/css'>
input[type="checkbox"] {float: left;   width: 20px; height:20px;  }
.tdCheck label {     width: 90%;display: table-cell;    align:right;}
.tdCheck {width:100%;}
.tdLabel {width:100px;}
.tdCheckTableCell {width:400px;}
TABLE
{

vertical-align:top;
border:1;border-style:solid;margin:0;padding:0;border-spacing:0;
border-color:red;
}
TD
{
vertical-align:top; /*labels ed en de items in het datagrid*/
border: 1;  border-style:solid;
border-color:green;
    font-size:30px  }
</style>
<body id="bodyInternet"  > 
    <form name="Form2" method="post" action="main.aspx?B" id="Form2">
        <table border="0">
            <tr>
                <td class="tdLabel">
                    <span id="ctl16_ID{A}" class="DynamicLabel">
                        TITLE
                    </span>
                </td>
                <td class="tdCheckTablecell">
                    <table id="ctl16_{A}" class="tdCheck" onclick="documentChanged();" border="0">
                        <tr>
                            <td>
                                <input id="ctl16_{A}_0" type="checkbox" name="ctl16${A}$0" />
                                <label for="ctl16_{A}_0">
                                    this is just dummy text to show the text will warp this is just dummy text to show the text will warp this is just dummy text to show the text will warp this is just dummy text to show the text will warp this is just dummy text to show the text will warp this is just dummy text to show the text will warp  
                                </label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input id="ctl16_{A}_1" type="checkbox" name="ctl16${A}$1" />
                                <label for="ctl16_{A}_1">
                                    ITEM2
                                </label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input id="ctl16_{A}_2" type="checkbox" name="ctl16${A}$2" />
                                <label for="ctl16_{A}_2">
                                    ITEM3
                                </label>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
</form>
</body> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-08-22T10:42:23.990

@sfjedi

我创建了一个类并为其分配了 css 值。

```
.radioA{
   vertical-align: middle;
} 
```

它正在工作，您可以在下面的链接中检查它。 [http://jsfiddle.net/gNVsC/](http://jsfiddle.net/gNVsC/) 希望它有用。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-06-22T10:31:43.013

```
input[type="radio"], input[type="checkbox"] {
    vertical-align: middle;
    margin-top: -1;
}
```

# php - 迁移到 Symfony 1.1/1.2 有意义吗？

> ID：396441
> 
> 赞同：1
> 
> 时间：2008-12-28T17:40:49.627
> 
> 标签：php, frameworks, symfony1

我在 Symfony 1.0 上构建了一个按需 Web 应用程序。除了残酷的内存消耗之外，我对此感到满意。我应该升级到 1.1/1.2 吗？*升级后您*最享受的主要*实际*好处是什么？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-02T12:23:59.940

主要好处在于新的表单框架。对象层因此可以很容易地链接到数据输入层，并且更加强大和可重用。您有一组小部件和验证器，每个表单都可以像当前模型层一样进行扩展，您可以开发自己的小部件并通过插件等在其他项目中重用它们。1.2 更多的是关于 REST 架构。如果你想要一个 RESTful 应用程序，你应该考虑它，因为它实现了一个全新的路由框架，全部面向对象。

我使用 1.2 的原因也是关于 Doctrine 完全集成。Doctrine 是一个真正的宝石，它肯定会改变你在 symfony 上构建东西的方式。不能以任何代价回去。

# unit-testing - 单元测试 DAO 时使用 Mock 对象的策略

> ID：396442
> 
> 赞同：2
> 
> 时间：2008-12-28T17:41:06.867
> 
> 标签：unit-testing, testing, tdd, mocking

我很好奇人们发现了哪些策略来对不涉及为每种测试方法加载（并且可能卸载）真实数据库的数据访问类进行单元测试？您是否使用模拟对象来表示数据库连接？如果是这样，您是否需要将模拟对象传递给每个被测方法，从而强制 API 需要一个真正的数据库连接作为每个方法的参数？或者，您是否在 setup() 处将模拟对象传递给构造函数？

我有一个类正在实现我认为是数据映射器（或者可能是网关）模式。它是负责封装 SQL 并返回（或保存）“业务对象”的类。其余代码可以与这个映射层和业务对象交互，完全不考虑持久性模型。此代码需要拥有/维护或只知道真实系统中的实时数据库连接。在测试中模拟这个是很棘手的。

问题是如何对这些映射器类之一进行单元测试。我最常看到的在 xUnit 下创建单元测试的做法是使用测试的 setup() 方法来实例化 SUT（被测系统），通常是您正在测试的对象，并将其存储在本地测试类中的变量。然后，您的每个测试方法都与该 SUT 的唯一实例进行交互。

但假设是，您在 setup() 方法中所做的任何事情都可能会在您的真实代码中的某处被复制。因此，您必须将设置过程视为“每次我需要在现实世界中使用此对象时，我都希望重复重现此内容”。如果我在设置中将一个数据库连接传递给映射器的构造函数，那很好，但这是否意味着每次我想真正使用一个时，我都必须将一个实时数据库连接传递给映射器对象的构造函数？想象一下，您将有各种需要检索或存储业务对象的地方，并且要使用数据映射器对象，您每次都需要传入数据库连接？

就我而言，我正在尝试为这些数据映射器对象建立测试，以实现以下目标：

1.  不需要实例化数据库连接对象并将其传递给映射器类的每个方法。
2.  不要求测试用例连接到真实数据库或为每个测试方法动态创建真实但“测试”的数据库。

我基本上已经看到了两个建议，将连接对象作为参数传递（我已经解决过）或扩展 SUT 类仅用于测试并覆盖您在现实世界中使用的任何数据库连接设置过程以使用模拟系统。

我很好奇是否还有其他人面临这些问题，使用任何语言，以及您为解决这些问题做了什么？也许我缺少一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T17:56:00.470

以我的经验，连接到数据库的责任是数据访问的痛点。我通过让 DAO 根据配置文件（app.config 等）来解决这个问题。这样我在编写测试时就不必担心这一点。DAL 保留一个或多个数据库连接配置文件，并在每次数据访问时连接/断开连接，因为最终连接池将负责物理连接/断开连接。

帮助我的另一件事是在运行测试之前使用 dbUnit 加载基线数据。我发现直接进入数据库而不是使用模拟对象更容易。此外，通过连接到一个真实的数据库，我可以（在某一点上）通过在不同的线程中发出命令来测试并发性——模拟对象不会给我真正的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T18:08:54.767

您可以使用 DbUnit 来测试 SQL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T19:23:24.057

这取决于您真正要测试的内容。如果您想测试您的 SQL 是否符合您的预期，那就真的进入了**集成测试**领域。假设您使用的是 Java，那么您可以使用几个纯 Java RDBMS 解决方案（Apache Derby、HSQLDB、H2）。

另一方面，如果您真的只是在测试您的**Java <-> JDBC 代码**（即从 ResultSets 中读取），那么您可以模拟 JDBC 的几乎所有相关部分，因为它们主要是接口。 [JMock](http://www.jmock.org/)非常适合这个。只需将一个`setConnection()`方法添加到您的待测类中，然后传入模拟对象即可`java.sql.Connection`。这对于保持测试简短而有趣非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:54:07.543

根据您的数据库设置的复杂程度，使用内存存储可能是一个不错的选择。

通常我使用内存中的 SQLite 会话进行单元测试。这是内存中 100% 的完整数据库，无需文件，无需配置。就一行。

现在这并不总是一种选择。SQLite 不支持成熟的服务器数据库的所有 sql 功能。通常我会使用一个层来使我的代码数据库独立。在这些情况下，我只需切换到内存数据库实例，在每次设置/拆卸期间，我都会在内存中快速创建/销毁该实例。

您是否使用任何中间层来访问您的数据库？在大多数情况下，使用这种中间件的最大好处不是数据库可移植性，而是简化的测试工具。

# java - Java 连接到/在 Microsoft Windows Office Suite 之间？

> ID：396448
> 
> 赞同：2
> 
> 时间：2008-12-28T17:45:16.513
> 
> 标签：java, windows, interop, ms-office, binding

[我在别处读到（此处](https://stackoverflow.com/questions/396355/how-to-get-google-page-rank-and-number-of-searches-in-excel-sheet)“hazzen”的回应），.NET 具有“此处概述的整个 Office 套件的绑定，允许您编写可以从 Office 调用的基于 COM 的方法。它旨在实现自动化，但您可以编写任何您想要的托管代码并让 Excel 调用它。”

我对 Java 也有同样的兴趣。我目前的解决方案运行一个启动 Java 的标准 Windows 程序，然后任何结果基本上都发送到标准输出，中间程序捕获这些并将结果反馈到 Excel - 也使用相当于标准输出的结果。

一定有更好的方法！

Java有这样的“绑定”吗？

我也会很高兴看到任何指向网络文章或你有什么关于这种集成问题的教导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T17:59:29.527

[JCOB](http://sourceforge.net/projects/jacob-project/)、[j-Interop](http://sourceforge.net/projects/j-interop/)和[J-Integra](http://j-integra.intrinsyc.com/products/com/)可能会做类似的事情。[奥卡姆手电筒：Java/COM、Java/Win32集成资源](http://staff.develop.com/halloway/JavaWin32.html)有更多链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T18:31:33.020

[Apache POI](http://poi.apache.org)具有与 Excel 的 Java 绑定，效果非常好。它也可以处理 Word/Outlook/PPT，但我记得 Excel 集成是它的强项。

# matlab - MATLAB 设置 - 出错时停止

> ID：396449
> 
> 赞同：11
> 
> 时间：2008-12-28T17:45:19.573
> 
> 标签：matlab, settings

当我调试 MATLAB 代码时，我发现“总是在错误时停止（dbstop if error）”非常有用。
但是，关闭 matlab 也会将其重置为“如果出错则永不停止”

如何使此设置持续存在？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-28T18:10:51.313

这确实是解决方案 - 在 Mathworks 中的进一步挖掘带来了确切的细节：

在默认文件夹中键入

```
edit startup.m 
```

然后写

```
dbstop if error 
```

谢谢施罗德！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-28T17:59:17.827

您可以使用*startup.m*文件在启动时重新创建设置。有关更多详细信息，请参见[此处](http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/ref/startup.html)。

# python - Python-PostgreSQL psycopg2 接口 --> executemany

> ID：396455
> 
> 赞同：6
> 
> 时间：2008-12-28T17:51:48.967
> 
> 标签：python, postgresql, database, psycopg

我目前正在分析一个维基百科转储文件；我正在使用 python 从中提取一堆数据并将其保存到 PostgreSQL 数据库中。我一直在努力让事情变得更快，因为这个文件很大（18GB）。为了与 PostgreSQL 交互，我使用 psycopg2，但这个模块似乎模仿了许多其他这样的 DBAPI。

无论如何，我有一个关于 cursor.executemany(command, values); 的问题。在我看来，每 1000 个值左右执行一次 executemany 比为这 500 万个值中的每一个调用 cursor.execute(command % value) 更好（请确认或纠正我！）。

但是，你看，我正在使用 executemany 将 1000 行插入到具有唯一完整性约束的表中；这个约束事先没有在 python 中验证，因为这要么需要我一直选择（这似乎适得其反），要么需要我获得超过 3 GB 的 RAM。所有这一切都说明当我的脚本试图通过捕获 psycopg2.DatabaseError 来插入已经存在的行时，我依靠 Postgres 来警告我。

当我的脚本检测到这样的非唯一插入时，它 connection.rollback() （每次最多可生成 1000 行，并且有点使 executemany 毫无价值），然后一一插入所有值。

由于 psycopg2 的文档记录很差（许多很棒的模块也是如此......），我找不到有效的解决方法。我已将每个 executemany 插入的值的数量从 1000 减少到 100，以减少每个 executemany 的非唯一插入的可能性，但我很确定它们是一种告诉 psycopg2 忽略这些异常或告诉光标继续执行。

基本上，这似乎是一种解决方案如此简单和流行的问题，我所能做的就是询问以了解它。

再次感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-15T13:13:40.237

只需使用 psql \copy 命令将所有数据复制到临时表中，或使用 psycopg cursor.copy_in() 方法。然后：

```
insert into mytable
select * from (
    select distinct * 
    from scratch
) uniq
where not exists (
    select 1 
    from mytable 
    where mytable.mykey = uniq.mykey
); 
```

这将比任何插入组合更快地进行重复数据删除和运行。

-dg

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T23:24:35.633

我遇到了同样的问题，在这里搜索了很多天，收集了很多提示，形成了一个完整的解决方案。即使问题已过时，我希望这对其他人有用。

1）忘记删除索引/约束并在以后重新创建它们的事情，好处是微不足道的或更糟。

2) executemany 比 execute 更好，因为它为您提供了准备语句。您可以使用以下命令自己获得相同的结果，以获得 300% 的速度：

```
# To run only once:
sqlCmd = """PREPARE myInsert (int, timestamp, real, text) AS
   INSERT INTO myBigTable (idNumber, date_obs, result, user)
     SELECT $1, $2, $3, $4 WHERE NOT EXISTS
     (SELECT 1 FROM myBigTable WHERE (idNumber, date_obs, user)=($1, $2, $4));"""
curPG.execute(sqlCmd)
cptInsert = 0   # To let you commit from time to time

#... inside the big loop:
curPG.execute("EXECUTE myInsert(%s,%s,%s,%s);", myNewRecord)
allreadyExists = (curPG.rowcount < 1)
if not allreadyExists:
   cptInsert += 1
   if cptInsert % 10000 == 0:
      conPG.commit() 
```

此虚拟表示例对 (idNumber, date_obs, user) 具有唯一约束。

3) 最好的解决方案是使用 COPY_FROM 和 TRIGGER 来管理插入前的唯一键。这让我的速度提高了 36 倍。我开始以 500 条记录/秒的速度正常插入。通过“复制”，我每秒获得了超过 18,000 条记录。带有 Psycopg2 的 Python 示例代码：

```
ioResult = StringIO.StringIO() #To use a virtual file as a buffer
cptInsert = 0 # To let you commit from time to time - Memory has limitations
#... inside the big loop:
   print >> ioResult, "\t".join(map(str, myNewRecord))
   cptInsert += 1
   if cptInsert % 10000 == 0:
      ioResult = flushCopyBuffer(ioResult, curPG)
#... after the loop:
ioResult = flushCopyBuffer(ioResult, curPG)

def flushCopyBuffer(bufferFile, cursorObj):
   bufferFile.seek(0)   # Little detail where lures the deamon...
   cursorObj.copy_from(bufferFile, 'myBigTable',
      columns=('idNumber', 'date_obs', 'value', 'user'))
   cursorObj.connection.commit()
   bufferFile.close()
   bufferFile = StringIO.StringIO()
   return bufferFile 
```

这就是 Python 部分的内容。现在 Postgresql 触发器没有异常 psycopg2.IntegrityError 然后所有 COPY 命令的记录被拒绝：

```
CREATE OR REPLACE FUNCTION chk_exists()
  RETURNS trigger AS $BODY$
DECLARE
    curRec RECORD;
BEGIN
   -- Check if record's key already exists or is empty (file's last line is)
   IF NEW.idNumber IS NULL THEN
      RETURN NULL;
   END IF;
   SELECT INTO curRec * FROM myBigTable
      WHERE (idNumber, date_obs, user) = (NEW.idNumber, NEW.date_obs, NEW.user);
   IF NOT FOUND THEN -- OK keep it
      RETURN NEW;
   ELSE    
      RETURN NULL; -- Oups throw it or update the current record
   END IF;
END;
$BODY$ LANGUAGE plpgsql; 
```

现在将此函数链接到表的触发器：

```
CREATE TRIGGER chk_exists_before_insert
   BEFORE INSERT ON myBigTable FOR EACH ROW EXECUTE PROCEDURE chk_exists(); 
```

这似乎需要做很多工作，但是当 Postgresql 不必一遍又一遍地解释 SQL 时，它是一个非常快速的野兽。玩得开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T23:06:15.400

“当我的脚本检测到这样一个非唯一的插入时，它 connection.rollback() （每次最多可包含 1000 行，并且有点使 executemany 毫无价值），然后一个一个地插入所有值。”

这个问题真的没有多大意义。

1,000 行的每个块是否由于非唯一行而失败？

1,000 行中的 1 个块是否失败（5,000 个这样的块）？如果是这样，那么执行许多有助于 5,000 中的 4,999 并且远非“毫无价值”。

您是否担心这种非独特的插入？或者你有关于这种情况发生次数的实际统计数据吗？

如果您已经从 1,000 行块切换到 100 行块，那么您显然可以确定 1,000 行块、100 行块和 1 行块是否具有性能优势。

请使用实际数据库和不同大小的块实际运行实际程序并发布数字。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-24T01:32:07.117

使用 MERGE 语句而不是 INSERT 语句可以解决您的问题。

# apache - 您如何使用 mod_rewrite 将站点移至子目录下？

> ID：396463
> 
> 赞同：2
> 
> 时间：2008-12-28T17:58:33.477
> 
> 标签：apache, mod-rewrite

我有一个带有这样 URL 的网站：

```
http://domain.co.uk/subdir/page.php 
```

我重新设计了网站，所以 URL 现在是这样的：

```
http://domain.co.uk/page.php 
```

如何使用 Apache 的 mod_rewrite 将所有页面 301 重定向到新位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-28T18:17:10.913

这应该可以解决问题：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^subdir/(.*)$ http://domain.co.uk/$1 [R=301,L]
</IfModule> 
```

更新：经过测试，它可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-28T18:07:30.620

我相信这样的事情应该可以解决问题：

```
RewriteRule ^subdir/(.*)$ http://domain.co.uk/$1 [R=301,QSA,L] 
```

# cocoa-touch - 当用户在 Cocoa Touch 中输入文本字段时，如何显示实时建议（例如具有相同初始字符的现有条目）？

> ID：396480
> 
> 赞同：0
> 
> 时间：2008-12-28T18:09:08.870
> 
> 标签：cocoa-touch

我想知道 Cocoa Touch 中是否存在一个现有的类或库代码，它在用户输入文本输入时向用户显示实时建议列表，这些建议基于他们已经输入的内容与以前的条目之间的相似性。

例如，看看 iPod Touch 上的 Safari 如何在您开始输入 URL 时根据之前访问过的网站显示实时建议。

如果有这样做的标准方法，我很想知道！如果没有，建议以合理的方式实现这一点 - 子类 UITextField 并从那里开始？——会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T21:51:32.430

您需要查看 UITextFieldTextDidChangeNotification 以查看 UITextField 何时更改。查看 NSNotificationCenter 以了解如何注册观察者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T03:04:57.307

我建议查看委托方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

您必须滚动自己的自动完成视图，类似于 Apple 用于其提示性自动完成功能的视图。

# sockets - WSAStartup 和 WSACleanup 的成本是多少？

> ID：396484
> 
> 赞同：9
> 
> 时间：2008-12-28T18:12:05.040
> 
> 标签：sockets, winapi, tcp, wsastartup, wsacleanup

我有一个 c++ win32 程序，它使用套接字从服务器下载一些数据。

在 Windows 上使用套接字之前，必须调用 WSAStartup。MSDN 说：“每次成功调用 WSAStartup 都必须调用 WSACleanup。只有最终的 WSACleanup 函数调用执行实际的清理。”

对我来说最简单的方法是每次从服务器下载数据时调用 WSAStartup/WSACleanup。大多数情况下，一次只有一个连接，因此 WSACleanup 将执行实际的清理。

这就是为什么我想知道 WSAStartup 和 WSACleanup 的成本是多少？我的意思是执行实际的清理。如果与整个套接字连接相比，对 WSAStartup 和 WSACleanup 的调用只持续很短的时间，那么我可以使用简单的方法。如果没有，我应该注意仅在退出程序时调用 WSACleanup。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-28T18:37:54.490

WSAStartup() 加载必要的 dll。但如果 dll 已经加载，WSAStartup() 只会增加一个计数器。WSACleanup() 减少计数器并在计数器达到零时释放 dll。

您应该在应用程序的 init 函数中调用 WSAStartup()，并在退出应用程序之前调用 WSACleanup()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-16T11:00:51.297

使用[RAII](http://en.wikipedia.org/wiki/Resource_acquisition_is_initialization)仅在应用程序启动时加载它们一次，然后在退出时释放它们...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-29T01:17:22.437

只需调用 WSAStartup 一次，从不清理。说真的，这是 Win3.1 和 Win32s 遗留下来的架构。

# directx - 头像 SDK（如 Wii、XBOX 360 头像）

> ID：396492
> 
> 赞同：0
> 
> 时间：2008-12-28T18:23:21.197
> 
> 标签：directx, 3d, direct3d

有哪些软件包可以为我的游戏提供 90% 的头像功能？我最喜欢的是 Xbox 的 Avatar 系统（但我希望在我的 PC 游戏中使用它）。

我需要能够自定义一个人的外观（身体、衣服等......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T18:44:22.230

十一月 XDK（Xbox 开发工具包）包含一个头像 API，但据我了解，它的使用受到限制。使用它的游戏必须带有 E 等级。访问 XDK 并不是一个容易或便宜的方向。

您的另一个选择是在 XNA 平台上开发，但头像功能尚不可用。它已作为建议提交，但目前尚无关于是否或何时可用的任何信息。

[XNA头像建议](https://connect.microsoft.com/feedback/ViewFeedback.aspx?FeedbackID=356893&SiteID=226)

编辑：只需重新阅读您的帖子并意识到您正在寻找替代方案。我不知道有任何预构建的包，很可能需要你自己动手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T19:40:16.487

看起来[lile miieditor.com](http://miieditor.com/)被任天堂关闭了..

[这里](http://aj.heypoorplayer.org/mii/)有一些关于 Mii 编辑器的信息 .. 一些源代码可用 .. 没什么好兴奋的 ..

然后是开源的[MakeHuman](http://www.makehuman.org/blog/index.php)项目 .. 这完全是另一面 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T18:30:21.150

它们都是自定义系统，因此我怀疑是否存在用于此目的的单个 SDK。当然，如果你想制作一个使用 XBox 化身的游戏，微软提供了一个 SDK/API，但据我所知，没有一个现成的包存在。

# vim - Emacs、Vim 和 JEdit 中的哪些编辑器支持多个同时文本插入点？

> ID：396495
> 
> 赞同：21
> 
> 时间：2008-12-28T18:26:54.637
> 
> 标签：vim, emacs, comparison, text-editor

**背景：** JEdit（以及其他一些文本编辑器）支持称为[多个同时文本插入点](http://groups.csail.mit.edu/uid/projects/simuledit/usenix01.html)的功能。（至少这就是我在这里所说的）。

要了解这意味着什么，请查看链接。

在现代文本编辑器中使用的所有功能中，初步研究似乎表明这是 Emacs 和 Vim 实际上不支持的一个*功能*。如果正确，这将是非常特殊的，因为很难找到至少没有进入这两个老式编辑器*之一的文本编辑器功能。*

**问题：**有没有人在 Emacs、Vim 或两者中看到或实现过这个特性？如果是这样，请指向我解释详细信息的链接、脚本、参考或摘要。

如果您知道做相同（或类似）事情的另一种方法，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T18:47:27.793

执行此操作的 vim 方法是 . 重复上次更改的命令。因此，例如，如果我更改指向引用的指针并且我有一堆 obj->func 我想更改为 obj.func 然后我搜索 obj->，执行 2cw 将 obj-> 更改为 obj .，然后执行 nnn 直到所有实例都被更改。

也许不像您所说的那样灵活，但它经常工作，并且在工作时非常直观和快速。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-29T23:59:37.070

`moccur-edit.el`几乎做你想要的。显示与正则表达式匹配的所有位置，并且编辑匹配项会在相应的源中进行更改。但是，编辑是在事件的单个实例上完成的。

我想扩展它以允许您同时编辑它们是直截了当的（至少在简单的情况下）。

这里有一个演示[。](http://www.bookshelf.jp/soft/flash/moccuredit.html)

事实证明，最新版本的 mocurr-edit 不会实时应用更改 - 您必须应用更改。这些更改现在也可以撤消（很好的胜利）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-28T19:10:30.273

在 EMACS 中，您可以/将`M-x find-grep`使用宏来完成。如果您真的坚持它是全自动的，那么您将`find-next`在宏中包含 。

但老实说，这让我觉得这是微软的一种功能：是的，它添加到了功能列表中，但为什么要麻烦呢？当你想再次使用它时，你会记得它在六个月后就存在了吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-24T12:57:06.783

对于 emacs，[多游标](https://github.com/magnars/multiple-cursors.el)正是这样做的。

看看模块作者的[emacsrocks 第 13 集。](http://emacsrocks.com/e13.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-28T18:51:50.700

我认为这个特性在 Emacs 或 Vim 中都没有直接的类似物，这并不是说用这个特性实现的所有东西都不能以某种方式用两个“老派”编辑器来实现。和大多数 Emacs 和 Vim 一样，高级用户可能能够非常快速地完成这样的任务，即使像我这样的普通人可以花五分钟找出正确的 grep 搜索并替换为适当的反向引用，例如。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-05T22:09:48.650

[Emacs 的YASnippet](http://code.google.com/p/yasnippet/)包使用它。[请参阅截屏视频](http://www.youtube.com/watch?v=vOj7btx3ATg)中的 2:13 和 2:44 。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-08-04T23:54:54.423

另一个细微的相似之处：在 Emacs 中，由`cua-selection-mode`(or `cua-mode`) 提供的矩形编辑功能会自动在标记矩形的左边缘或右边缘为您提供多个插入点，以便您可以为所有这些行键入一个公共前缀或后缀。

例如：（
`M-x` `cua-selection-mode` `RET`启用全局次要模式，如果您尚未使用此或 cua 模式）
`C-RET` `down` `down` `down`（标记 1x3 字符矩形）
*在此处键入前缀*
`C-RET`（取消标记矩形以返回正常编辑）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-05T21:32:25.387

在 vim 中应该是这样的：

```
%s/paint.\((.*),/\1.paint(/ 
```

或者类似的东西，我真的不擅长“模拟”正则表达式。

这个想法是替代模式：

```
/paint(object,/ 
```

和

```
/object.paint(/ 
```

所以，是的，它是“支持”的

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-08-04T15:21:29.213

在 Emacs lisp 中做一个基本版本似乎很简单。这适用于您只想在两个地方并行插入文本的情况：

```
(defun cjw-multi-insert (text)
  "insert text at both point and mark"
  (interactive "sText:")
  (insert-before-markers text)
  (save-excursion
    (exchange-point-and-mark)
    (insert-before-markers text))) 
```

当您运行它时，它会提示输入文本并将其插入到点（当前位置）和标记处。您可以使用 设置标记`C-SPC`。这可以很容易地扩展到 N 个不同的位置。像这样的函数`set-insert-point`会将当前位置（存储为 Emacs[标记](http://www.gnu.org/s/emacs/manual/html_node/elisp/Overview-of-Markers.html#Overview-of-Markers)）记录到列表中，然后当您运行 multi-insert 命令时，它只是遍历列表，在每个位置添加文本。

我不确定处理更通用的“多重编辑”功能的简单方法是什么。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-05T22:10:15.513

没有。对于主要基于控制台的 UI，这将是相当困难的。

也就是说，vim（和 emacs，虽然我几乎没有使用它）有类似的功能 - 正如人们所说的那样，搜索和替换，更类似的是，列插入模式： http: [//pivotallabs.com/用户/brian/blog/articles/350-column-edit-mode-in-vi](http://pivotallabs.com/users/brian/blog/articles/350-column-edit-mode-in-vi)

# silverlight - 将 Silverlight 文本转换为路径

> ID：396500
> 
> 赞同：0
> 
> 时间：2008-12-28T18:31:02.710
> 
> 标签：silverlight

有没有办法**在运行时**将 Silverlight 文本渲染到路径或图形对象？我知道这可以使用设计工具来完成，但我希望能够即时完成。

我见过一个[调用 web 服务的示例，该服务使用 WPF 构造将 WPF FormattedText 对象转换为 PathGeometry](http://blogs.msdn.com/webnext/archive/2007/05/22/silverlight-convert-text-to-path.aspx)，但这些对象在 Silverlight 中不可用。

我很确定这在 Silverlight 中不受支持，但认为值得一问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T19:33:40.290

正如您所怀疑的，您必须在服务器端将文本转换为 Silverlight 支持的**PathGeometry**。你想达到什么目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-20T10:27:57.017

这是动态创建 SilverLight 路径几何的代码。或从字符串创建 SilverLight 路径。只需将以下方法粘贴到新类或现有类中，即可使用。您可以在方法的底部找到使用此功能的示例代码。

```
/// Method tested with SilverLight 2.0

// this method will generates path with the data string

public PathGeometry getPathGeometry(string data)
{
    PathGeometry pg = new PathGeometry();
    PathSegmentCollection psc = new PathSegmentCollection();
    PathFigure pf = new PathFigure();
    PathFigureCollection pfc = new PathFigureCollection();
    data= data.Replace("M "," M").Replace("C "," C").Replace("L "," L");
    string[] str = data.Split(' ');
    for (int i = 0; i < str.Length; i++)
    {
        if (str[i].StartsWith("C") || str[i].StartsWith("c"))
        {
            string[] item = str[i].Split(',');
            string[] item1 = str[i + 1].Split(',');
            string[] item2 = str[i + 2].Split(',');
            BezierSegment bs = new BezierSegment();
            bs.Point1 = new Point(double.Parse(item[0].Substring(1)), double.Parse(item[1]));
            bs.Point2 = new Point(double.Parse(item1[0]), double.Parse(item1[1]));
            bs.Point3 = new Point(double.Parse(item2[0]), double.Parse(item2[1]));
            i += 2;
            psc.Add(bs);
        }
        else if (str[i].StartsWith("L") || str[i].StartsWith("l"))
        {
            string[] item = str[i].Split(',');
            LineSegment ls = new LineSegment();
            ls.Point = new Point(double.Parse(item[0].Substring(1)), double.Parse(item[1]));
            psc.Add(ls);
        }
        else if (str[i].StartsWith("M") || str[i].StartsWith("m"))
        {
            string[] item = str[i].Split(',');
            pf.StartPoint = new Point(double.Parse(item[0].Substring(1)), double.Parse(item[1]));
        }
        else if (str[i].StartsWith("z") || str[i].StartsWith("Z"))
        {
            pf.IsClosed = true;
        }
    }
    pf.Segments = psc;
    pfc.Add(pf);
    pg.Figures = pfc;
    return pg;
}

///// End of Method 
```

调用方法的示例代码

```
Path path = new Path();
string str = " F1 M 933.291,430.505C 924.367,415.673 923.007,387.822 922.503,370.604C 921.343,331.31 944.994,317.76 975.999,296.994L 949.334,299.957C 938.729,302.545 930.572,309.925 920.255,313.368C 901.85,319.521 886.504,313.062 870.896,303.53C 850.12,290.842 831.457,270.65 815.107,251.462C 806.279,241.101 798.257,221.598 781.986,226.017C 767.327,229.99 760.199,246.869 743.058,244.012C 737.559,227.262 741.368,204.78 739.591,187.029C 738.108,172.136 733.986,158.933 733.996,143.736C 734.003,128.417 734.091,113.088 733.996,97.7689C 733.909,83.5475 730.302,82.6582 716.114,86.0475C 687.558,92.8796 663.68,115.232 634.418,119.337C 622.391,121.028 598.323,121.184 603.745,103.642C 603.745,103.642 547.667,116.478 522.623,101.969L 397.73,43.1915C 374.54,33.5875 352.799,21.5236 330.186,10.7568C 315.067,3.55951 298.84,3.50623 282.684,6.54358C 268.628,9.18353 252.14,8.36884 238.73,13.0222C 227.932,16.7648 225.711,27.0569 220.839,35.6369C 204.622,64.1582 184.474,89.9609 163.49,115.642C 143.3,140.356 124.747,161.949 100.268,182.977C 76.4618,203.437 58.0045,230.722 39.6698,256.062C 27.9845,272.228 10.5298,295.73 5.62447,315.546C 1.21381,333.368 7.65381,345.95 16.7778,360.225C 30.9738,382.42 52.4365,394.917 74.4578,408.658C 108.356,429.826 144.964,432.43 182.619,439.202C 194.226,441.284 201.93,444.466 212.456,450.234C 228.9,459.261 246.18,466.181 262.031,476.002C 277.378,485.518 288.175,498.328 306.771,498.502C 331.423,498.729 342.159,498.364 359.554,517.221C 368.632,527.06 372.859,537.585 380.38,548.114C 395.159,568.82 409.076,590.689 426.295,609.442C 440.326,624.728 467.967,633.601 487.652,636.902C 505.622,639.908 521.979,632.736 535.859,620.806C 545.402,612.606 552.478,602.246 557.978,591.161C 561.915,583.213 564.966,568.085 572.399,564.296C 578.046,561.41 595.117,563.91 601.338,564.312C 612.171,565.009 621.722,568.994 632.552,569.976C 651.071,571.65 654.679,567.992 668.187,558.989C 681.275,550.254 697.746,547.268 711.451,538.109C 733.726,523.208 751.861,501.273 773.035,484.254C 795.099,466.53 815.65,437.337 845.207,434.924C 871.813,432.754 933.291,430.505 933.291,430.505 Z";
path.Data = getPathGeometry(str); 
```

# c# - 用于 C# 的 ERB 类库

> ID：396506
> 
> 赞同：1
> 
> 时间：2008-12-28T18:40:07.730
> 
> 标签：c#, ruby, templates, erb

我正在寻找一个模拟 Ruby 的 ERB 库的部分功能的库。即用文本替换<% 和%> 之间的变量。我不需要 ERB 提供的代码执行部分，但如果你知道有这个的东西，我会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T20:29:36.167

我修改了一个我前一段时间用来测试一些东西的类。它甚至不如 ERB 好，但它可以代替文本完成工作。它只适用于属性，所以你可能想要修复它。

**用法：**

```
Substitutioner sub = new Substitutioner(
    "Hello world <%=Wow%>! My name is <%=Name%>");

MyClass myClass = new MyClass();
myClass.Wow = 42;
myClass.Name = "Patrik";

string result = sub.GetResults(myClass); 
```

**代码：**

```
public class Substitutioner
{
    private string Template { get; set; }

    public Substitutioner(string template)
    {
        this.Template = template;
    }

    public string GetResults(object obj)
    {
        // Create the value map and the match list.
        Dictionary<string, object> valueMap = new Dictionary<string, object>();
        List<string> matches = new List<string>();

        // Get all matches.
        matches = this.GetMatches(this.Template);

        // Iterate through all the matches.
        foreach (string match in matches)
        {
            if (valueMap.ContainsKey(match))
                continue;

            // Get the tag's value (i.e. Test for <%=Test%>.
            string value = this.GetTagValue(match);

            // Get the corresponding property in the provided object.
            PropertyInfo property = obj.GetType().GetProperty(value);
            if (property == null)
                continue;

            // Get the property value.
            object propertyValue = property.GetValue(obj, null);

            // Add the match and the property value to the value map.
            valueMap.Add(match, propertyValue);
        }

        // Iterate through all values in the value map.
        string result = this.Template;
        foreach (KeyValuePair<string, object> pair in valueMap)
        {
            // Replace the tag with the corresponding value.
            result = result.Replace(pair.Key, pair.Value.ToString());
        }

        return result;
    }

    private List<string> GetMatches(string subjectString)
    {
        try
        {
            List<string> matches = new List<string>();
            Regex regexObj = new Regex("<%=(.*?)%>");
            Match match = regexObj.Match(subjectString);
            while (match.Success)
            {
                if (!matches.Contains(match.Value))
                    matches.Add(match.Value);
                match = match.NextMatch();
            }
            return matches;
        }
        catch (ArgumentException)
        {
            return new List<string>();
        }
    }

    public string GetTagValue(string tag)
    {
        string result = tag.Replace("<%=", string.Empty);
        result = result.Replace("%>", string.Empty);
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T20:16:58.253

看看[TemplateMachine](http://www.stefansarstedt.com/templatemaschine.html)，我没有测试过，但它似乎有点像 ERB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T20:28:34.827

### 更新了帖子

有帮助的链接不再可用。我已经留下了标题，所以你可以用谷歌搜索它们。

还要寻找“C# Razor”（这是 MS 与 MVC 一起使用的模板引擎）

* * *

还有几个。

Visual Studio 附带 T4，它是一个模板引擎（即 vs 2008、2005 需要免费插件）

免费 T4 编辑器 - 死链接

T4 Screen Cast-死链接

有一个开源项目叫 Nvolicity，被 Castle Project 接管

Nvolictiy Castle 项目升级 - 死链接

HTH 骨头

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T10:00:29.277

我刚刚发布了一个*非常*简单的库，用于稍微像 ERB 一样进行替换。

您不能在`<%%>`大括号中进行评估，您只能使用这些大括号：`<%= key_value %>`. `key_value`将是您作为替代参数传递的 Hashtable 的键，并且大括号将替换为 Hashtable 中的值。就这样。

[https://github.com/Joern/C-Sharp-Substituting](https://github.com/Joern/C-Sharp-Substituting)

你的，

乔恩

# .net - 集合的参数/返回是否应为 IEnumerable 还是 T[]？

> ID：396513
> 
> 赞同：12
> 
> 时间：2008-12-28T18:49:48.053
> 
> 标签：.net, linq

由于我一直在融入 Linq 思维方式，我越来越倾向于通过`IEnumerable<T>`泛型类型传递集合，这似乎构成了大多数 Linq 操作的基础。

`IEnumerable<T>`但是我想知道，如果这是一个好主意，那么对泛型类型的后期评估。`T[]`使用泛型类型 更有意义吗？`IList<T>`? 或者是其他东西？

**编辑：** 下面的评论很有趣。似乎还没有解决的一件事是线程安全问题。例如，如果您将一个`IEnumerable<T>`参数传递给一个方法，并且它在不同的线程中被枚举，那么当该线程尝试访问它时，结果可能与原本要传入的结果不同。更糟糕的是，尝试枚举`IEnumerable<T>`两次 - 我相信会引发异常。我们不应该努力使我们的方法线程安全吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-28T21:18:36.333

我经历了一个路过的阶段，`T[]`长话短说，这是一个痛苦的背后。`IEnumerable<T>`好多了

> *但是我想知道，如果这是一个好主意，那么对 IEnumerable 泛型类型的后期评估。使用 T[] 泛型类型更有意义吗？列表？或者是其他东西*

迟到的评价正是为什么`IEnumerable`这么好。这是一个示例工作流程：

```
IEnumerable<string> files = FindFileNames();
IEnumerable<string> matched = files.Where( f => f.EndsWith(".txt") );
IEnumerable<string> contents = matched.Select( f => File.ReadAllText(f) );
bool foundContents = contents.Any( s => s.Contains("orion") ); 
```

对于不耐烦的人，这会获取文件名列表，过滤掉`.txt`文件，然后`foundContents`如果任何文本文件包含单词 ，则将 设置为 true `orion`。

如果您使用`IEnumerable`上述代码编写代码，您将只根据需要逐个加载每个文件。您的内存使用量将非常低，如果您匹配第一个文件，则无需查看任何后续文件。这很棒。

如果您使用数组编写了完全相同的代码，您最终会预先加载所有文件内容，然后（如果您还有剩余的 RAM）会扫描其中的任何内容。希望这能说明为什么惰性列表如此出色。

> *似乎还没有解决的一件事是线程安全问题。例如，如果您将一个`IEnumerable<T>`参数传递给一个方法，并且它在不同的线程中被枚举，那么当该线程尝试访问它时，结果可能与原本要传入的结果不同。更糟糕的是，尝试枚举`IEnumerable<T>`两次 - 我相信会引发异常。我们不应该努力使我们的方法线程安全吗？*

线程安全在这里是一个巨大的红鲱鱼。

如果您使用数组而不是可枚举，它*看起来*应该更安全，但事实并非如此。大多数时候，当人们返回对象数组时，他们会创建一个新数组，然后将旧对象放入其中。如果您返回该数组，则可以修改这些原始对象，并且最终会遇到您试图避免的那种线程问题。

*部分*解决方案是不返回原始对象的数组，而是返回新对象或克隆对象的数组，因此其他线程无法访问原始对象。这很有用，但是没有理由`IEnumerable`解决方案也不能做到这一点。一个不比另一个线程安全。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-28T19:14:49.033

在大多数情况下，您不应该在接口上传递数组 ( `T[]`) 。`public`有关详细信息，请参阅 Eric Lippert 的博客文章“[数组被认为有些有害](http://blogs.msdn.com/ericlippert/archive/2008/09/22/arrays-considered-somewhat-harmful.aspx)”。

接受数组的方法是个例外`params`，因为它必须是数组。（希望未来的版本将允许`params IList<s> foo`在方法签名中使用“”。）

为`internal`会员，为所欲为；您可以控制界面的两侧。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-28T19:13:03.997

输出类型应尽可能具体，输入类型应尽可能松散。

所以 return `T[]`，但`IEnumerable<T>`作为输入。

您应该返回对该方法有意义的内容。如果它必须做额外的工作才能转换为另一种类型，请考虑删除它并返回您内部拥有的任何内容，只要您不返回对不应在您自己的代码之外修改的内部数据结构的引用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-28T20:56:16.287

“我们不应该努力使我们的方法线程安全吗？”

我们应该**慎重**考虑代码的[能力](http://blogs.msdn.com/larryosterman/archive/2006/09/29/777022.aspx)。

仅仅因为一个方法不是线程安全的并不意味着它是一个失败，只是在你尝试在多线程程序中使用它之前你需要知道这个事实。您是否努力使`Main()`线程安全？线程安全在单线程程序中重要吗？

无论如何，我认为说“Foo 是线程安全的”真的没有意义，只是说“Foo 具有以下在多线程上下文中很重要的特性”。

“尝试枚举 IEnumerable 两次 - 我相信会引发异常。”

那会很糟糕。幸运的是，您可以对其进行测试，而不是扩展 FUD。

我认为您要问的是“我不应该返回我的集合的副本，而不是对内部成员集合的引用，以便调用者不会修改我的数据”？答案是一个不合格的“**也许**”。有很多方法可以解决这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-29T18:38:27.093

> 但是我想知道，如果这是一个好主意，那么对 IEnumerable 泛型类型的后期评估。使用 T[] 泛型类型更有意义吗？列表？或者是其他东西？

您需要小心使用的术语。*请注意引用*类型和*实例类型*之间的区别。

T 的 IEnumerable 只说：“我可以通过调用 GetEnumerator 来遍历这个集合。当我这样做时，每个元素都可以称为 T。” T 的 IEnumerable 没有说明惰性求值。

考虑这三个声明：

```
//someInts will be evaluated lazily
IEnumerable<int> someInts = Enumerable.Range(0, 100);

//oddInts will be evaluated lazily
IEnumerable<int> oddInts = someInts.Where(i => i % 2 == 1);

//evenInts will be evaluated eagerly
IEnumerable<int> evenInts = someInts.Except(oddInts).ToList(); 
```

尽管这三个的引用类型都是 int 的 IEnumerable，但只有 eventInts 被急切地求值（因为 ToList 枚举它的目标并返回一个 List 实例）。

至于手头的问题，我通常做的是将我的调用者视为期待一个热切评估的 Enumerable，所以我这样做：

```
public IEnumerable<int> GetInts()
{
  ...
  return someInts.ToList()
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T19:56:40.993

我会在 IList 和 IEnumerable 之间进行选择，根本不会考虑数组。

请注意，IEnumerable 除了作为扩展方法之外没有 Count 或 Length 属性，而 array 和 IList 则有。所以，我会根据我的决定：

如果返回值具有已知数量的元素-> IList 或数组（如果必须），否则为 IEnumberable

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-28T21:43:01.107

实现一种用 C# 编写的解释性编程语言，我还需要在 object[] 类型的返回值和 List 之间进行选择，用于类似于映射和过滤器的 Linq 函数。最后我选择了类 Lisp 列表的惰性变体。有一个具有 IEnumerable 参数的列表构造函数：z = new LazyList(...)。每当程序引用 LazyList 的属性之一（head、tail 或 isempty）时，枚举值仅被评估一步（head 和 isempty 变为确定，tail 变为另一个惰性列表）。惰性列表相对于 IEnumerable 的优势在于前者允许递归算法并且不会（必须）遭受多次评估。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-01T03:54:56.330

您始终可以为线程安全执行此操作，它在很多情况下可能会表现得更好，因为没有锁定集合（它的副本）。请注意，这意味着您不是在集合上而是在成员上执行 LINQ 或 foreach。

```
 public IEnumerable<ISubscription> this[string topic] {
            get  { 
                rwlock.EnterReadLock();
                try {
                    return subscriptionsByTopic[GetTopic(topic)].ToArray<ISubscription>();              
                    //thread safe
                }
                finally {
                    rwlock.ExitReadLock();
                }
            }
        } 
```

也不要将 IEnumerable 用于 SOA/多层应用程序，因为您无法序列化接口（不会引入很多痛苦）。WCF 与 List 一起工作得更好。

# grails - 在 grails clean 之后我无法运行应用程序

> ID：396514
> 
> 赞同：1
> 
> 时间：2008-12-28T18:51:22.513
> 
> 标签：grails, groovy

我做了一个`grails clean`，然后当我通过`grails run-app`应用程序运行时从未启动并且重复显示以下内容（永远持续，陷入某种循环）。

我在 Windows XP 上运行 Grails 1.0.4、Java 1.6。

Grails 不知何故陷入了无效的配置。知道如何恢复吗？

```
 [groovyc] Compiling 3 source files to C:\Documents and Settings\Steve\.grails\1.0.4\projects\myproject\classes
    [javac] Compiling 3 source files to C:\Documents and Settings\Steve\.grails\1.0.4\projects\myproject\classes
2008-12-28 10:40:27.549:/myproject:INFO:  Destroying Spring FrameworkServlet 'grails'
[6688] spring.GrailsWebApplicationContext Closing org.codehaus.groovy.grails.commons.spring.GrailsWebApplicationContext@1c3c6d8: display name [org.codehaus.groovy.grails.commons.spring.GrailsWebApplicationContext@1c3c6d8]; startup date [Sun Dec 28 10:40:23 PST 2008]; parent: org.springframework.web.context.support.XmlWebApplicationContext@93912f
2008-12-28 10:40:27.549:/myproject:INFO:  Shutting down log4j
  [groovyc] Compiling 3 source files to C:\Documents and Settings\Steve\.grails\1.0.4\projects\myproject\classes
    [javac] Compiling 3 source files to C:\Documents and Settings\Steve\.grails\1.0.4\projects\myproject\classes
2008-12-28 10:40:27.877::INFO:  jetty-6.1.12
2008-12-28 10:40:27.892::INFO:  No Transaction manager found - if your webapp requires one, please configure one.
2008-12-28 10:40:27.970:/myproject:INFO:  Set web app root system property: 'myproject-development-0.1' = [C:\dev\myproject\web-app]
2008-12-28 10:40:27.970:/myproject:INFO:  Initializing log4j from [file:C:\Documents and Settings\Steve/.grails/1.0.4/projects/myproject/resources/log4j.properties]
2008-12-28 10:40:27.970:/myproject:INFO:  Initializing Spring root WebApplicationContext
[7297] spring.GrailsWebApplicationContext Refreshing org.codehaus.groovy.grails.commons.spring.GrailsWebApplicationContext@1ada1e0: display name [org.codehaus.groovy.grails.commons.spring.GrailsWebApplicationContext@1ada1e0]; startup date [Sun Dec 28 10:40:27 PST 2008]; parent: org.springframework.web.context.support.XmlWebApplicationContext@18b24cb
[7297] spring.GrailsWebApplicationContext Bean factory for application context [org.codehaus.groovy.grails.commons.spring.GrailsWebApplicationContext@1ada1e0]: org.springframework.beans.factory.support.DefaultListableBeanFactory@1cf6930
2008-12-28 10:40:27.299:/myproject:INFO:  Initializing Spring FrameworkServlet 'grails'
2008-12-28 10:40:27.314::INFO:  Started SelectChannelConnector@0.0.0.0:8080 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T19:39:46.953

好的，我追踪到了。我有一个完全被注释掉的 .java 文件。就 Java 而言，这是 100% 合法的，但显然 Grails 无法处理它。Grails 必须假设任何 .java 都将具有相应的 .class 文件。由于该文件不包含 Java 代码，因此它没有生成相应的类文件。

**后续**：这已在 2.0-M2 中修复，请参阅[GRAILS-3763](http://jira.grails.org/browse/GRAILS-3763)

# php - 使用函数访问 PHP 数组元素？

> ID：396519
> 
> 赞同：15
> 
> 时间：2008-12-28T18:54:30.570
> 
> 标签：php, arrays

我正在开发一个程序，该程序使用 PHP 的内部数组指针沿多维数组进行迭代。我需要从当前行中获取一个元素，我一直在这样做：

```
$arr[key($arr)]['item'] 
```

但是，我更喜欢使用类似的东西：

```
current($arr)['item'] // invalid syntax 
```

我希望有一个我在扫描文档时遗漏的功能，可以让我像这样访问元素：

```
getvalue(current($arr), 'item') 
```

或者

```
current($arr)->getvalue('item') 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-28T19:05:13.623

我很怀疑有没有这样的功能，但是写起来很简单

```
function getvalue($array, $key)
{
  return $array[$key];
} 
```

编辑：从 PHP 5.4 开始，您可以直接从函数表达式索引数组元素，`current($arr)['item']`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T19:13:11.440

您是否尝试过使用其中一个[迭代器类](http://php.net/manual/en/spl.iterators.php)？那里可能有一些东西可以完全满足您的要求。如果没有，您可能会通过扩展 ArrayObject 类来获得所需的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-29T04:32:12.923

这个函数可能有点长，但我一直都在使用它，特别是在以下场景中：

```
if (array_key_exists('user', $_SESSION) === true)
{
    if (array_key_exists('level', $_SESSION['user']) === true)
    {
        $value = $_SESSION['user']['level'];
    }

    else
    {
        $value = 'DEFAULT VALUE IF NOT EXISTS';
    }
}

else
{
    $value = 'DEFAULT VALUE IF NOT EXISTS';
} 
```

转向这个：

```
Value($_SESSION, array('user', 'level'), 'DEFAULT VALUE IF NOT EXISTS'); 
```

这是功能：

```
function Value($array, $key = 0, $default = false)
{
    if (is_array($array) === true)
    {
        if (is_array($key) === true)
        {
            foreach ($key as $value)
            {
                if (array_key_exists($value, $array) === true)
                {
                    $array = $array[$value];
                }

                else
                {
                    return $default;
                }
            }

            return $array;
        }

        else if (array_key_exists($key, $array) === true)
        {
            return $array[$key];
        }
    }

    return $default;
} 
```

PS：你也可以使用一维数组，像这样：

```
Value($_SERVER, 'REQUEST_METHOD', 'DEFAULT VALUE IF NOT EXISTS'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-29T16:59:48.367

如果这不起作用，您的多维数组是如何组成的？var_dump() 可能会有所帮助。

```
$subkey = 'B';
$arr = array(
    $subkey => array(
        'AB' => 'A1',
        'AC' => 'A2'
    )
);

echo current($arr[$subkey]);
next($arr[$subkey]);
echo current($arr[$subkey]); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-29T17:13:45.097

我经常用

```
foreach ($arr as $key=>$val) {
   $val['item'] /*$val is the value of the array*/
   $key         /*$key is the key used */
} 
```

代替

下一个（$arr）/当前（$arr）

# c# - 是否有更简洁的语法将操作应用于序列的每个元素？

> ID：396521
> 
> 赞同：2
> 
> 时间：2008-12-28T18:55:13.580
> 
> 标签：c#, c#-3.0

```
int z = 1;
double result = Math.Log(z);            //works 
```

然而，试图用一组数字做同样的事情是行不通的：

```
int[] z = new [] {1,2,3,4};
double[] result = Math.Log(z);            //Syntax 1 - error CS1503: Argument '1': cannot convert from 'int[]' to 'double'
double[] result = z.Select(p => Log(p)).ToArray();  //Syntax 2 - OK 
```

如何使语法 #1 起作用？语法 #2 对我来说似乎很脏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-28T19:31:01.417

不，没有更清洁的方法。**语法 2**的使用`Select()`和应用于`Math.Log()`每个元素的 lambda 表达式是在 C# 中执行此操作的惯用方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T21:25:28.800

为了完整起见，还应该注意的是，Linq 的最大优势之一是能够扩展它。

如果这个操作是你经常做的事情，那么它很可能是使用 Log 函数扩展你的 IEnumerable 的候选者，这将非常简单

```
 static class LogExtension
  {
    public static IEnumerable<Double> Log(this IEnumerable<int> list)
    {
      foreach (int i in list)
      {
        yield return Math.Log(i);
      }
    }
  } 
```

然后简单地称它为...

```
IEnumerable<Double> logValues = myInts.AsEnumerable().Log(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T19:47:24.833

```
int[] z = new [] {1,2,3,4};
double[] result = Array.ConvertAll(z, p => Log(p)); 
```

或者

```
double Log(int i) { return Math.Log(i); }

int[] z = new[] { 1, 2, 3, 4 };
double[] result = Array.ConvertAll(z, Log); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T19:24:36.203

您可以将丑陋封装到一个函数中：

```
private static double[] getLogForIntArray(int[] z)
{
    double[] q = (double[])z.Select(p => Math.Log(p)).ToArray();
    return q;
} 
```

并为语法 3 调用它（并将其返回到某个东西）：

```
double[] q = getLogForIntArray(z); // Syntax 3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T22:01:36.293

在这段代码中：

```
int[] z = new [] {1,2,3,4};
double[] result = z.Select(p => Log(p)).ToArray(); 
```

您看到的大多数（如果不是全部）“杂乱无章”是由于使用了数组，当问题标题显示为“是否有更简洁的语法可以将操作应用于**序列**的每个元素？”

在 .NET 3.0 中，“序列”与`IEnumerable<>`接口一起封装。

使用它，您最终会得到更清晰的代码：

```
IEnumerable<int> z = new[] {1, 2, 3, 4};
IEnumerable<double> result = z.Select(i => Math.Log(i)); 
```

**通过var**键使用隐式类型，事情确实非常清楚：

```
var z = new[] {1, 2, 3, 4};
var result = z.Select(i => Math.Log(i)); 
```

通常，当您使用 List<> 而不是 Arrays 时，您会发现 C# 3.0（尤其是 LINQ）的新功能发挥得最好。

如果您的代码已经是基于数组的，我建议向您的 API 添加接受 IEnumerable 而不是 int[] 的重载，从而允许消费代码使用现代语言功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T20:04:27.200

这对我来说是最干净的解决方案：-

```
double[] x = Array.ConvertAll(z, p => Math.Log(p)); 
```

它应该是比 select 更好的解决方案，因为 ConvertAll 预先知道返回的数组中有多少元素。我不确定选择是否如此，如果还有其他编译器魔法正在发生，可能是这样。然而，上面的内容更清晰，因为转换意图更清晰。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-12-28T19:07:47.673

不太清楚你在问什么，但是...

您可以提供数组的索引。

```
 for (int i = 0; i < z.Length; i++)
{
  Math.Log(z[i]);
} 
```

虽然我认为不保留计算值没有意义？

**编辑**

您可能必须使用 double 数据类型，因为这是 math.log 返回的

```
 static void Process()
        {
            double[] test = { 1, 2, 3, 4 };
            double[] answer = new double[test.Length];
            for (int i = 0; i < test.Length; i++)
            {
                answer[i] = Math.Log(test[i]);
            }

        } 
```

# java - 使用 j2ee 容器身份验证时，如何基于“记住我”cookie 以编程方式“登录”用户？

> ID：396543
> 
> 赞同：2
> 
> 时间：2008-12-28T19:13:55.320
> 
> 标签：java, authentication, servlets, cookies

我在我的 WAR 中使用基于表单的身份验证。我想实现一个“记住我”cookie，所以：1）如何在用户被重定向到表单之前拦截身份验证？2）说我检查了cookie并且它很好，我如何实际登录用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-05T21:38:32.013

最好的方法是使用[`Filter`](http://www.oracle.com/technetwork/java/filters-137243.html)cookie 检查 cookie 并使用您的登录系统记录用户。

# vim - 流行的 Vim 替代品？

> ID：396545
> 
> 赞同：7
> 
> 时间：2008-12-28T19:18:30.040
> 
> 标签：vim, vi

除了 Vim 之外，是否有今天仍在广泛使用的 Vi 克隆（除了 Emacs 中的 Viper 模式；））？如果是这样，使用它而不是 Vim 的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T19:39:26.627

[Kate（KDE 高级文本编辑器？）](http://kate-editor.org/)具有 Vi 编辑模式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-28T19:21:50.360

它不是严格意义上的克隆，但真正的[直播 vi](http://ex-vi.sourceforge.net/)现已开源。[vi-lovers 页面](http://thomer.com/vi/vi.html)上还有很多来源和指向许多版本的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T19:26:25.513

来自 Vi Lovers 主页 - [http://tomer.com/vi/vi.html#versions](http://thomer.com/vi/vi.html#versions)

我不知道您的要求或期望是什么，但 Wikipedia 有一个很棒的比较页面[，](http://en.wikipedia.org/wiki/Comparison_of_text_editors)可以帮助您找出最适合您的版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-10-09T10:58:00.837

ActiveState Komodo has a vi mode too.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-08-04T22:29:07.147

[VILE](http://invisible-island.net/vile/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T20:20:10.977

我使用 Vim 进行所有编辑，除非我使用 Visual Studio。幸运的是，Visual Studio 有 [ViEmu](http://www.viemu.com)插件。不幸的是，它不是免费的，也不是完整的 Vim 实现，但它也不昂贵，而且足够满足我的需要。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-28T20:32:06.677

Visual Slickedit ($$$) 有一个非常好的 VI 仿真模式。Vslick 有其他特性使它作为程序员的编辑器非常好（例如，动态标签生成而不是必须重新运行 ctags）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-11T17:11:43.247

Sublime text 具有“Vintage”模式，可以复制许多 vi/m 命令。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-10-09T10:48:28.387

QT Creator 具有“假 vim”模式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-28T19:26:12.160

我在Eclipse中使用了一段时间的vi-plugin，它非常好。但是由于我的同事对 vi 不了解，他们在尝试在我的工作站上编辑时遇到了问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-04T14:51:20.547

我曾经使用它`elvis`来满足我的增强型 vi 需求，但无法真正提供比较（除了两者都非常好），因为我切换到`vim`几年前是为了使用更容易找到支持的东西（如果只是因为它是其他人使用的）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-04T15:05:20.223

当我想要一个精简版的 vi 时，我经常使用 nvi。
使用它而不是 vim 没有任何真正的优点。更轻量级并且不会加载我使用 vim 拥有的所有插件。

Vim 仍然有更多的功能（选项卡、插件、更好的多缓冲区支持......）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-03-14T19:59:11.313

伊兹

主网站[http://www.yzis.org/](http://www.yzis.org/)不再可用。不过，源代码仍然可以在 GitHub 上找到：[https ://github.com/chrizel/Yzis](https://github.com/chrizel/Yzis)

# javascript - NS_ERROR_XPC_BAD_CONVERT_JS

> ID：396547
> 
> 赞同：3
> 
> 时间：2008-12-28T19:20:15.700
> 
> 标签：javascript, dom

在尝试将“附加子项”添加到刚刚创建的元素（在 for 循环中）后，我收到了这个错误。
这个错误是什么意思？
我想不可能附加某事。到一个在 DOM 中并不真正存在的元素。
我如何解决它？
“innerHTML”有效，但我认为这不是真正干净和正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-28T21:16:58.320

如果您不需要向新元素添加事件，则使用 innerHTML 没有任何问题。
无论如何，您以后都可以使用标准方法添加事件

# delphi - Delphi对象持久化，最好的方法是什么

> ID：396550
> 
> 赞同：8
> 
> 时间：2008-12-28T19:22:11.997
> 
> 标签：delphi, object, persistence

我已经开发了用于绘制一些形状（主要是线条）的应用程序，现在我需要能够将草图存储到文件中，我知道 delphi 已经内置了用于对象持久性的例程，但我从未使用过它。

有人可以告诉我，如果我必须持久化还引用其他对象（将被存储到）的对象，我可以使用对象持久性，我有可以连接到其他 TLine 对象等的 TLine 对象。

使用此功能或编写自定义过程来将对象存储/读取到/从文件中更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T20:37:14.560

内置对象持久性主要设计用于将组件流式传输到 dfm，您需要做的持久化草图的工作不会从该机制中受益匪浅。

我认为您最好提出一个自定义方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-29T03:15:15.897

我过去使用的一种方法是将我的对象属性存储在一个 XML 文件中，编写一个自定义“保存”例程，该例程添加到传递的 IXMLNode，以及一个从传递的 IXMLNode 读取的新构造函数。我将组件存储为节点，将属性存储为属性（除非属性是另一个对象，否则它将是子节点）。

我相信 Delphi Jedi 项目中有一些例程可以为您处理组件流，但我没有直接使用它们，因为我的大部分 XML 流是手工完成的，因为我的对象非常简单并且可以只用一个少数属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-29T04:19:41.007

我使用 TI 对象持久性框架 (tiopf.com)。[我在http://tiopf.sourceforge.net/Doc/overview/index.shtml](http://tiopf.sourceforge.net/Doc/overview/index.shtml)上写了概述。

它可以让您将对象和列表保存到 xml、csv、数据库等。它会自动处理子对象。

如果您有兴趣，请使用 svn 版本，而不是 sourceforge 下载，因为它具有更多功能（包括部分 D 2009 支持）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-03T00:32:12.357

你也可以使用 java 中著名的 hibernate。

您可以在这里找到的 delphi 端口： [dHibernate](http://www.cnpack.org/showdetail.php?id=556)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-21T18:28:48.417

[JSON](http://json.org/)是一种新的、非常紧凑的对象存储方式。Delphi 有两个库：[SuperObject](https://github.com/hgourvest/superobject)和[lkJSON](http://sourceforge.net/projects/lkjson/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-15T20:25:29.477

[使用来自http://www.simdesign.nl/xml.html](http://www.simdesign.nl/xml.html)的NativeXML，我完成了从 XML 代码读取/写入 delphi 内存对象的工作。非常好，非常简单，这里包含演示：[http ://www.simdesign.nl/forum/download/file.php?id=236](http://www.simdesign.nl/forum/download/file.php?id=236)

# php - preg_match_all() [function.preg-match-all]: 未知修饰符 ']'

> ID：396557
> 
> 赞同：7
> 
> 时间：2008-12-28T19:26:18.963
> 
> 标签：php, regex, pcre

使用了几种不同的模式，但它们都出现了这个错误——那么有什么问题呢？

我最短的诊断是：

```
$pattern = "<img([^>]*[^/])>";
preg_match_all($pattern, $subject, $matches); 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-28T19:31:11.060

您缺少正则表达式分隔符。尝试：

```
$pattern = "#<img([^>]*[^/])>#i"; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-28T19:37:03.763

单斜杠是默认分隔符，这就是为什么原始正则表达式中它后面的字符出现在错误消息中的原因。使用传统的斜杠作为分隔符并转义不是分隔符的斜杠将如下所示：

```
$pattern = "/<img([^>]*[^\\/])>/"; 
```

# openid - Google 朋友群 - 登录的用户个人资料信息

> ID：396560
> 
> 赞同：2
> 
> 时间：2008-12-28T19:29:35.743
> 
> 标签：openid, opensocial, google-friend-connect

我正在尝试实施 Google 朋友群。是否可以获取登录用户的电子邮件地址？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-20T00:00:46.207

没有。Google 不允许您获取此信息，原因很明显，他们不希望您向他们的用户发送垃圾邮件。如果你需要它，你必须明确地要求它。

应该通过 GFC 获得的东西：

*   opensocial.Person.Field.ID
*   opensocial.Person.Field.NAME
*   opensocial.Person.Field.NICKNAME
*   opensocial.Person.Field.THUMBNAIL_URL
*   opensocial.Person.Field.PROFILE_URL

# performance - 好的*免费*马尔可夫建模工具？

> ID：396561
> 
> 赞同：1
> 
> 时间：2008-12-28T19:30:14.853
> 
> 标签：performance, markov-chains

我想使用马尔可夫模型进行一些架构模拟，但没有预算购买诸如 SHARPE 之类的东西。有谁知道免费软件工具，独立于平台或可用于 Mac OS/X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T20:40:41.777

也许你可以用[GNU Octave试试](http://www.gnu.org/software/octave/)[这个](http://www.tsi.enst.fr/~cappe/h2m/)

# c - 有没有一种标准的方法来使用 Unicode 字符串文件路径进行 fopen？

> ID：396567
> 
> 赞同：19
> 
> 时间：2008-12-28T19:34:35.733
> 
> 标签：c, unicode, fopen

有没有标准的方法来`fopen`处理 Unicode 字符串文件路径？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-01-28T15:12:19.210

不，没有标准的方法。操作系统之间存在一些差异。以下是不同操作系统处理非 ASCII 文件名的方式。

### Linux

在 Linux 下，文件名只是一个二进制字符串。大多数现代发行版的约定是对非 ASCII 文件名使用 UTF-8。但在一开始，将文件名编码为 ISO-8859-1 是很常见的。基本上由每个应用程序来选择编码，因此您甚至可以在同一个文件系统上使用不同的编码。`LANG`环境变量可以提示您首选的编码是什么。但是现在，您可能到处都可以假设 UTF-8。

但是，这并非没有问题，因为包含无效 UTF-8 序列的文件名在大多数 Linux 文件系统上完全有效。如果您只支持 UTF-8，您将如何指定这样的文件名？理想情况下，您应该同时支持 UTF-8 和二进制文件名。

### 操作系统

OS X 上的 HFS 文件系统在内部使用 Unicode (UTF-16) 文件名。大多数 C（和 POSIX）库函数都`fopen`接受 UTF-8 字符串（因为它们是 8 位兼容的）并在内部进行转换。

### 视窗

Windows API 使用 UTF-16 作为文件名，但`fopen`使用当前代码页，不管是什么（UTF-8 刚刚成为一个选项）。`wchar_t`许多 C 库函数具有接受 UTF-16（在 Windows 上）的非标准等效项。例如，[`_wfopen`](//docs.microsoft.com/en-us/cpp/c-runtime-library/reference/fopen-wfopen)代替`fopen`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-28T19:59:00.847

在 *nix 中，您只需使用标准 fopen（请参阅 TokeMacGuy 的回复或在此[论坛](http://www.linuxquestions.org/questions/programming-9/wfopen-does-not-work-on-linux-692380/#post3388227)中的更多信息）在 windows 中，您可以使用 _wfopen，然后传递一个 unicode 字符串（有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/yeby3zcb(VS.80).aspx)）。

由于没有真正的通用方法，我会将此调用与所有其他系统相关函数一起包装在一个宏中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-28T19:50:31.287

这是您当前语言环境的问题。在我启用了 unicode 的系统上，文件路径将使用 unicode。我可以通过 locale 命令检测到这一点：

```
$ locale
LANG=en_US.UTF-8
LC_CTYPE="en_US.UTF-8" 
```

文件路径的编码通常在系统范围内设置，因此如果您的文件路径不在系统的区域设置中，您可能需要通过[iconv](http://www.gnu.org/software/libiconv/)库对其进行转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-25T05:14:00.880

现在几乎所有的 POSIX 平台都使用 UTF-8。而且现代 Windows 也[支持 UTF-8 作为语言环境](https://stackoverflow.com/a/63454192/995714)，您可以在任何地方使用 UTF-8 并打开任何文件，而无需在 Windows 上使用宽字符串。`fopen`只是便携式工作

```
setlocale(LC_ALL, "en_us.utf8"); // need some setup before calling this
fopen(R"(C:\filê\wíth\Ünicode\name.txt)", "w+"); 
```

> 从 Windows 10 build 17134（2018 年 4 月更新）开始，通用 C 运行时支持使用 UTF-8 代码页。这意味着`char`传递给 C 运行时函数的字符串将需要 UTF-8 编码的字符串。要启用 UTF-8 模式，`".UTF8"`请在使用`setlocale`. 例如，`setlocale(LC_ALL, ".UTF8")`将使用当前默认的 Windows ANSI 代码页 (ACP) 作为语言环境，使用 UTF-8 作为代码页。
> 
> ...
> 
> 要在 Windows 10 之前的操作系统（例如 Windows 7）上使用此功能，您必须使用应用程序本地部署或使用 Windows SDK 版本 17134 或更高版本进行静态链接。对于 17134 之前的 Windows 10 操作系统，仅支持静态链接。
> 
> [UTF-8 支持](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/setlocale-wsetlocale?view=msvc-160&viewFallbackFrom=vs-2019#utf-8-support)

# sql - 电子邮件应用程序中的 SQL

> ID：396568
> 
> 赞同：1
> 
> 时间：2008-12-28T19:35:29.723
> 
> 标签：sql, ms-access, email, outlook, thunderbird

我希望能够在我的电子邮件收件箱上执行 SQL 查询。例如，通过输出，我可以制作关于我发送或接收多少电子邮件的图表。我想分析我的表现以及让我忙碌的原因。我的邮箱似乎是一个不错的起点。

我正在使用 Gmail 在线，以及 Thunderbird、Outlook 2007 和 Mail.app 槽 IMAP。有没有一种简单的方法可以将其中一个应用程序与我可以使用 SQL 的东西连接起来？

已经尝试过：

*   Thunderbird 没有这个插件（或者我找不到）。
*   我怀疑 Outlook 能够与 MS Access 一起做一些事情，但我不知道如何做。
*   我的客户似乎都无法将所有内容导出到有用的东西，例如 CVS 或 Excel 的 .xls。从那里开始，我可以导入 Access 并完成。

更新：Access 2007 确实有一个连接到 Outlook 的向导。但是当我运行它时，Office 无缘无故地启动并抱怨找不到 Outlook 2007 (?)。更新 2：您可以通过将 Outlook 设置为默认电子邮件客户端、关闭 Outlook 并重新启动来解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-30T23:54:07.207

您可以通过 Access 向导或代码 ( [http://support.microsoft.com/kb/209946/en-us](http://support.microsoft.com/kb/209946/en-us) )简单地将 Outlook 连接到 Access

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-30T13:32:05.260

您可以使用任意数量的脚本解析 mbox 文件（Thunderbird 用于存储其消息），然后对您喜欢[的](http://blog.devayd.com/2008/07/copy-messages-from-a-thunderbird-mbox-file-to-a-mysql-table-using-php/)消息执行任何 sql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-30T13:23:12.750

我同意 stalepretzel，如果你找不到任何现成的包装，你可能应该自己做。

我要做的是：

1.  使用 IMAP 下载邮件。
2.  解析它们并插入到您的数据库中

您可以充分利用[mess822](http://cr.yp.to/mess822.html)软件包来解析邮件标头，然后使用它来填充数据库。

我认为很多脚本语言（perl、python）都有类似的库（可能也适用于 IMAP）并且应该很容易组合在一起。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-12-28T20:05:15.390

我建议制作自己的插件。我对 Thunderbird 插件不熟悉（而且我只涉足 FF 插件），但我认为它们就像 FF 插件一样，如果你在途中熟悉 Javascript。我会研究 Thunderbird 插件，并创建一个在收到消息时运行 AJAX 脚本的插件。该 AJAX 可以联系 PHP 脚本（您需要在 Apache 之类的东西上运行，可能只是在您的家用计算机上）。反过来，这个 PHP 脚本会解释 Thunderbird 的 Javascript 发送的数据，并将其输入数据库。

# java - 通过容器会话管理在 Java 中使用 POJO RPC 比 JBoss 更简单

> ID：396569
> 
> 赞同：1
> 
> 时间：2008-12-28T19:36:35.777
> 
> 标签：java, serialization, jboss, distributed, rmi

目前，我只知道一种在 Java 中为 POJO 执行 RPC 的方法，并且是使用非常复杂的 EJB/JBoss 解决方案。

有没有更好的方法来提供具有更薄层（在 Java EE 容器内或没有 Java EE 容器内）的类似功能，使用 RMI 或可以通过网络序列化和发送完整对象的东西？

我目前对 HTTP/JSON 序列化 BTW 不感兴趣。

*编辑*：澄清：我正在尝试用更易于在容器级别管理的东西替换旧的 EJB 2.1/JBoss 4 解决方案。我需要完全控制数据库（计划使用 iBATIS，这将允许我非常轻松地使用相当复杂的 SQL），但我想要保留的唯一内容是：

*   调用查找/数据修改方法（此处为自动序列化）。
*   透明的会话控制（认证/授权）。我仍然需要看看如何做到这一点。

当然，这两个项目都必须作为一个整体工作。不应授予没有凭据的用户访问权限。

因为我不太喜欢编写 webapps，所以我计划构建一个 GUI（Swing 或 SWT），它只管理 POJO、做一些报告并从容器调用方法。我希望序列化尽可能简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T22:28:24.540

几乎总是这样，[春天](http://www.springsource.org/)来救援。从[参考文档](http://static.springframework.org/spring/docs/2.5.x/reference/index.html)中，您将需要阅读[第 17 章。使用 Spring 的远程处理和 Web 服务](http://static.springframework.org/spring/docs/2.5.x/reference/remoting.html)。

有几种方法可供选择。Spring 的美妙之处在于您的所有接口和实现都是普通的 POJO。连接到 RMI 或 Spring 处理的任何东西。你可以：

1.  [使用 RMI 导出服务](http://static.springframework.org/spring/docs/2.5.x/reference/remoting.html#remoting-rmi)：可能是最简单的方法；
2.  [使用 HTTP 调用](http://static.springframework.org/spring/docs/2.5.x/reference/remoting.html#remoting-httpinvoker)程序：如果远程访问是一个问题，这对于防火墙等可能比纯 RMI 更好；或者
3.  [使用 Web Services](http://static.springframework.org/spring/docs/2.5.x/reference/remoting.html#remoting-web-services)，在这种情况下，我更喜欢[JAX-WS 而不是 JAX-RPC](http://www.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc.html)。

Spring 的另一个好处是它可以轻松透明地为服务器和客户端进行连接。

我个人会选择（2）或（3）。HTTP 是网络友好的。在 Web 容器中部署很容易。 [Jetty](http://www.mortbay.org/jetty/)的长期连接让您可以选择通过 HTTP （有效地）进行服务器推送。

所有这些方法都允许通过网络发送复杂的对象，但它们在这方面略有不同。您需要考虑您的服务器和客户端是否要分开分发，以及如果您更改需要重新分发类文件的接口是否会成为问题。或者您可以使用定制的序列化解决方案（甚至是 XML）来避免这种情况。但这也有问题。

使用 Web 容器将允许您轻松插入[Spring Security](http://static.springframework.org/spring-security/site/)，刚开始可能会因为有很多选项而感到有些畏惧。此外，`HttpSession`可用于提供请求之间的状态信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T19:58:12.393

简单 RPC 正是 RMI 的构建目的。如果你制作了一个可序列化的接口，你可以从另一个应用程序调用一个应用程序上的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T19:52:27.927

您可以通过 REST尝试 XStream ( [http://x-stream.github.io/ )。](http://x-stream.github.io/)易于应用于 e 预先存在的一组 pojo。

由于您对 rest/json 不感兴趣，您能否提供一些有关您要实现的目标的更多信息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T20:16:52.497

如果您只需要值对象，那么只需确保 POJO 实现 Serializable 并跨套接字写入对象（使用 ObjectOutputStream）。在接收端使用 ObjectInputStream 读取对象。接收端必须具有兼容版本的 POJO（请参阅 serialVersionUID）。Hessian/Burlap 'protocol-ize this: [http://hessian.caucho.com/](http://hessian.caucho.com/)和[http://www.caucho.com/resin-3.0/protocols/burlap.xtp](http://www.caucho.com/resin-3.0/protocols/burlap.xtp)

# c++ - 如何在 C++ 中为随机迷宫创建单元格或网格？

> ID：396579
> 
> 赞同：4
> 
> 时间：2008-12-28T19:44:44.557
> 
> 标签：c++, algorithm, data-structures, maze

我正在尝试在 C++ 中创建一个随机迷宫，但我无法开始，因为我不知道如何创建网格或单元格。我怎么能创造它？而且我还想使用 ASCII 字符来创建它。我怎样才能将它存储在数组中？（任何人都可以提供示例代码和一些解释，以便我更好地理解它）

另一个问题：我需要学习和使用哪些数据结构？我打算使用 Eller 算法或 Kruskal 算法。

谢谢你们帮助我！我是一个初学者程序员，我想了解这个，因为这是我项目的一部分，谢谢你变化很大！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-28T19:56:16.610

您在寻找[迷宫生成算法](http://en.wikipedia.org/wiki/Maze_generation_algorithm)（[更多](http://www.astrolog.org/labyrnth/algrithm.htm)）吗？你的问题是算法还是图形？

典型算法的工作原理是将迷宫中的每个“单元”视为图形的一个顶点，从所有“墙”开始，然后删除与生成树相对应的一组墙。（所以为了使其随机化，它们中的许多都从随机权重开始并找到最小生成树。）至少对于小型迷宫，您不需要任何特殊的数据结构来表示单元；您可以将每个单元格视为一对`(x,y)`（其坐标）。而且您也不需要任何数据结构（邻接矩阵/邻接列表）来存储图形的边缘，因为 的邻居`(x,y)`只是`(x,y±1)`和`(x±1,y)`（忽略那些落在边界之外的）。

无论如何，一旦你有了生成树，你就会确切地知道哪些墙“存在”，哪些不存在，所以你对迷宫有完整的描述。如果你要画迷宫，你知道要画哪些。

要使用 ASCII 字符绘制，您只需逐行遍历：绘制“上墙”（`--`如果墙存在于`(x,y)`和之间，则放置一个“” `(x,y+1)`），然后绘制实际行（`|`如果墙在`(x,y)`和之间，则放置一个“”）`(x+1,y)`存在）。最后画出底部边界。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T22:51:54.150

您可能希望将迷宫存储在二维字符数组中。您可以声明一个数组，无论是否在 C++ 中对其进行初始化。

```
char a[30][10];  // declares a char array of 30 rows and 10 columns.

// declare an array with 3 rows and 3 columns, and provide initial values
char ticTacToeBoard[3][3] = {{'x', 'x', 'o'},
                             {'o', 'o', 'x'},
                             {'x', 'o', ' '}
                            }; 
```

您可以将迷宫中墙壁的初始值更改为`'|'`和，并为通道`'-'`使用空格字符 , 。`' '`任何一种初始化方法都有效，但您始终以相同的方式使用元素。这是清除上面初始化数组中的板的方法。

```
// clear the board
for (int row=0; row<3; row++) {
    for (int col=0; col<3; col++) {
        ticTacToeBoard[row][col] = ' ';
    }
} 
```

如果您想读取一个元素的值（在您尝试导航迷宫时很有用），您可以使用与设置其值时相同的下标表示法。

```
char y = a[2][2]; // reads the character in row 2, column 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T20:01:30.077

垂直墙：| 水平。墙： _

如果您使用的是固定宽度字体：

```
 _____
| |  _
|_  | |
 __ | |
|_____| 
```

我不确定该怎么做，但这是我要开始的地方。

确定网格上起点和终点的位置。然后，使用您想要的任何曲线创建一条路径。基本上，它应该是随机移动，每次检查这条路径是否还有办法到达终点。然后，从这条路径上移除一定数量的墙壁，并从这些洞中创建其他路径。继续此操作，直到您的空白空间用完。然后，也许，确保没有创建更短的路径。如果有，请阻止它们。

# firefox - 如何在导航栏中自动安装 Firefox 扩展？

> ID：396580
> 
> 赞同：4
> 
> 时间：2008-12-28T19:45:26.630
> 
> 标签：firefox, firefox-addon, xul

我正在开发一个 Firefox 扩展。当用户安装它时，我想让它自动安装在导航栏的最右边位置。就目前而言，用户必须转到查看 > 工具栏 > 自定义...，并在安装后将扩展拖到导航栏。我想消除这一步。

扩展在这里： http: [//madan.org/tickertool](http://madan.org/tickertool)

我的扩展的 XUL 看起来基本上是这样的，它覆盖了 browser.xul：

```
<overlay id="my-ext-overlay" ... >
    <toolbarpalette id="BrowserToolbarPalette">
        <toolbaritem id="my-ext-container" ... >
            <toolbarbutton id="my-ext-customize-image" ... />
            <textbox id="my-ext-textbox" ... />
            <hbox id="my-ext-buttons">
                <image id="my-ext-button1" ... />
                <image id="my-ext-button2" ... />
                <image id="my-ext-button3" ... />
            </hbox>
        </toolbaritem>
    </toolbarpalette>
</overlay> 
```

我在这里看到了代码（[https://developer.mozilla.org/en/Code_snippets/Toolbar](https://developer.mozilla.org/en/Code_snippets/Toolbar)），据说可以满足我的要求，但是如果您的扩展程序只是一个按钮而我不能让它为我工作。我的问题的答案可能是对这段代码的一些修改，但我还没有弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-29T03:50:24.093

I think I got it. It's basically spelled out in the link I mentioned in the original post. I'm not sure why I thought there was more to it than that.

# xml - 返回 XML 不变的 XSL

> ID：396586
> 
> 赞同：28
> 
> 时间：2008-12-28T19:49:49.430
> 
> 标签：xml, xslt

我正在寻找一个简单地返回未更改的 XML 的 XSL 片段。这听起来微不足道，但我似乎无法在网络上的任何地方找到示例。有什么帮助吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-12-28T21:25:06.023

为了复制完整的 XML 文档，必须有一个与根匹配的模板。这可能是：

     **`<xsl:template match="/">`**

或者

     **`<xsl:template match="node()">`**

那么当前节点（根节点）的单个副本就足够了：

     **`<xsl:copy-of`选择=“。”/>**

所以，这样一个完整的转变是：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
      <xsl:copy-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

虽然这可能是最简单的这种转换，但**XSLT 程序员使用另一种转换，即广为人知的 the`identity transformation`或 the[`identity rule`](http://www.w3.org/TR/xslt#copying)**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="node()|@*">
      <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

身份转换被认为是最基本的 XSLT 设计模式之一并且被如此广泛使用的原因在于，通过用其他更具体的模板覆盖此模板规则，可以非常轻松地执行各种操作，否则将难的。示例是删除具有特定名称或满足某些其他条件的特定（一组）元素，重命名特定元素，更改特定元素的命名空间，创建特定元素的新子元素或兄弟元素，......等。

有关使用身份转换的更多信息和代码片段，请查看[**此处**](http://dpawson.co.uk/xsl/sect2/identity.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-28T21:15:53.843

这是一个常见问题，答案称为[身份转换](http://en.wikipedia.org/wiki/Identity_transform)。以下模板将正确复制现有 XML。然后您添加额外的模板来修改行为（例如删除某些元素、重命名元素或属性等）。

```
<xsl:template match="@*|node()">
   <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T19:54:19.703

怎么样：

```
<xsl:template match ="/">
  <xsl:copy-of select="."/>
</xsl:template> 
```

也许还有更简单的方法？

# .net - IBM.Data.DB2

> ID：396589
> 
> 赞同：0
> 
> 时间：2008-12-28T19:51:59.037
> 
> 标签：.net, database, db2, zos

我可以使用 .NET 框架和 IBM.Data.DB2 提供程序开发 Windows 应用程序来访问在 OS/390 上运行的 DB2 数据库吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T23:39:04.413

IBM 非常密切地保护（或者更准确地说，允许他们的客户保护）他们的大型机 DB2 访问。我怀疑这与确保仅受企业支持的应用程序甚至尝试连接有关（没有正确许可证文件的 JDBC 客户端甚至不会让他们的请求出现在大型机 TCP 端口上，它们在客户端） - 大型机通常是业务关键型，大多数桌面/服务器应用程序只是梦想成为:-)。

使用 JDBC 驱动程序，一个单一的 type-4 驱动程序用于访问所有 DB2 平台（LUW、iSeries、System z 等），但实际上您必须在特定平台的 CLASSPATH 中安装许可证文件，否则您将获得一个例外。

该许可证文件的格式为“ `db2jcc_cisuz.jar`”，其中 cisuz 指定允许访问哪些平台（cu 是最常见的，但它不提供对 iSeries 或 System z 的访问权限）。

您通常必须从 IBM 购买 DB2 Connect 才能获得这些文件，我怀疑 .NET 框架也会出现类似情况。您可能会发现 DB2 Connect 产品具有 .NET 客户端驱动程序以及 JDBC（我没有查看）。寻找该产品的“企业”版，因为标准版不太可能拥有 System z 许可证。

只是一个小问题，它不再是 OS/390（除非您是少数日本客户之一，专门为支持恐龙而付费）。它是 z/OS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T22:19:14.657

I used MS Host Integration Server to connect a .Net application written in C# with DB2 before, may not be what you are looking for but I know it works. Here is a [link](http://www.microsoft.com/HIServer/default.mspx) for more information about MS HIS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T21:44:57.107

我不确定 OS/390，但在工作中我共同开发了连接到 Solaris DB2 实例的 .Net 应用程序。我们使用标准的 IBM.Data.DB2，所以我相信 OS/390 也应该可以工作。

# mysql - MySQL .Net Provider 5.2 未显示在 VS 2008 Express 的数据源对话框中

> ID：396593
> 
> 赞同：0
> 
> 时间：2008-12-28T19:53:39.017
> 
> 标签：mysql, visual-studio-2008, .net-3.5, visual-studio-express

我已经安装了 MySQL .NET 数据提供程序 5.2（通过它的安装程序），但在数据库资源管理器的数据源对话框中看不到 MySQL 数据提供程序。

我正在使用 VS 2008 Express 版本。你有什么线索吗？

问候， 贾坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-29T19:37:52.153

VS 2008 Express（以及 VS 2005 Express）不允许您通过数据源对话框使用 MySQL .Net Provider。非 Express 版本允许您执行相同操作。

要在 VS Express 中使用 MySQL，您必须在安装 Provider 的位置（很可能是 C:\Program Files\MySQL\MySQL Connector Net xxx）中包含对 MySQL DLL 的引用。或者将 DLL 从同一位置复制到项目的 Bin 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T19:56:06.173

我不认为你可以在 .NET 中以这种方式使用 MySQL，它是作为 MySQL 的本机 .NET 库，所以你必须在代码方面做事。

# php - 强制 PHP 在未声明的变量上出错？在对象中？

> ID：396594
> 
> 赞同：7
> 
> 时间：2008-12-28T19:54:08.797
> 
> 标签：php, typechecking

如果我拼错变量名，有什么方法可以强制 PHP 崩溃（错误，无论如何）？如果我使用一个类的实例并且我拼错了一个变量的名称怎么办？

[我知道我应该习惯它，但也许有一种方法可以强制执行名称检查？]

谢谢！

**编辑：**对不起，这不是很具体。这是代码，我想得到**两个**错误。现在我只得到一个（最后一行）。

```
error_reporting(E_ALL|E_STRICT);
class Joe {
    public $lastName;
}

$joe = new Joe();
$joe->lastNombre = "Smith";
echo "And here it is " . $jose; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-28T20:55:40.997

下面是我快速整理的内容，以展示在发生此类情况时如何触发错误：

```
<?php

error_reporting( E_ALL | E_STRICT );

class Joe {
    public $lastName;

    public function __set( $name, $value ) {
        if ( !property_exists( $this, $name ) ) {
            trigger_error( 'Undefined property via __set(): ' . $name, E_USER_NOTICE );
            return null;
        }
        $this->$name = $value;
    }

    public function __get( $name ) {
        if ( !property_exists( $this, $name ) ) {
            trigger_error( 'Undefined property via __get(): ' . $name, E_USER_NOTICE );
            return null;
        }
        return $this->$name;
    }
}

$joe = new Joe();
$joe->lastNom = "Smith";
echo $joe->lastNom , "\n";

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T19:58:45.467

你可以试试：

```
error_reporting(E_ALL|E_STRICT); 
```

编辑：好的，我现在已经阅读了更新的问题。我觉得你运气不好。这在 PHP 中是有效的。有人说这是一个特点。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T20:44:50.943

来自 PHP 文档[`error_reporting`](http://www.php.net/error_reporting)：

```
// Reporting E_NOTICE can be good too (to report uninitialized
// variables or catch variable name misspellings ...)
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T19:58:33.093

您可以在代码中使用它：

```
error_reporting(E_ALL); 
```

或者这个在 php.ini

```
php_error_reporting=5 
```

[http://us2.php.net/error_reporting](http://us2.php.net/error_reporting)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T19:59:12.173

将 error_reporting 设置为包含 E_NOTICE 可能会有所帮助。每当您使用未定义的变量时，它都会显示通知/错误（请注意，它不会停止执行）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-08-13T08:07:29.597

知道这是一篇旧帖子 - 但偶然发现它正在寻找解决方案。

这是我的最终解决方案：

**我有一个我的类扩展的抽象类，它在魔术 __get 和 __set 上引发错误。**

这很讨厌 - 但它确实是一种享受！

它类似于上面的建议 - 但还在方法声明中添加了“final”以阻止人们覆盖它。

我们还使用代码嗅探器来捕获这些 - 但我想在我编码时让我的错误消息“实时”，而不是等待嗅探器的报告。（人们也可以忽略嗅探报告！）

**下面的示例代码**

```
 <?php
/**
 * Abstract
 * Some default Abstract functions that everything should extend
 *
 * @package    example
 * @subpackage lib
 */

/**
 * Class mh_abstract
 * Some default MH Abstract functions that everything should extend
 *
 * @package    example
 * @subpackage lib
 */
abstract class lib_abstract
{
    /**
     * Throws an error if php magic set is called
     *
     * @param string        $key
     * @param string|object $value
     *
     * @throws Exception When trying to set a new class property
     */
    final public function __set($key, $value)
    {
        // get if the thing we are trying to set is a object
        if(is_object($value))
        {
            // if so let's just report it's name, not the full object
            $value = 'object:'.get_class($value);
        }

        // throw the error!
        throw new mh_lib_error_dev_unknownClassProperty('Tried to set new property '.$key.' with value '.$value);
    }

    /**
     * Throws an error if php magic get is called
     *
     * @param string $key
     *
     * @throws Exception When trying to set a new class property
     */
    final public function __get($key)
    {

        // throw the error!
        throw new mh_lib_error_dev_unknownClassProperty('Tried to get new property '.$key);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-31T09:33:35.040

要捕获未声明的属性，您可以设置 _ _Set() 魔术方法来捕获它们

```
function __set($sKey, $sValue)
{
   // any setter data should be *returned* here

   // NOTE: this function will only get called if the property is not
   // publicly accessible.
   trigger_error("Non-existing property name ".$sKey, E_USER_WARNING);
} 
```

# visual-studio - Visual Studio Shell（隔离模式）可再发行组件

> ID：396597
> 
> 赞同：1
> 
> 时间：2008-12-28T19:55:43.037
> 
> 标签：visual-studio, vsx

我想使用独立外壳作为自定义调试器的前端。

如果我理解正确的话，Visual Studio 调试包实现了 Visual Studio 调试器系统的“用户界面部分”，也就是说，除其他外，所有调试器窗口（堆栈、监视、断点等）。

VS 调试包是隔离模式可再分发的一部分吗？换句话说，我可以在我的独立外壳应用程序中重用现有的与 Visual Studio 调试相关的窗口吗？

SIS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-28T20:35:34.797

模板中的默认配置选项中可能会禁用某些窗口，但可以使用与调试相关的窗口。

# flash - 免费或廉价的基于浏览器的开源 Flash (flv) 视频播放器

> ID：396598
> 
> 赞同：2
> 
> 时间：2008-12-28T19:55:58.107
> 
> 标签：flash, browser, asp.net-3.5, flvplayback, flash-video

有没有人知道任何免费或便宜的基于 OSS 浏览器的 Flash 视频播放器？它将嵌入到 ASP.NET 3.5 中，一个 web 控件会很方便，但不是必需的。

我一直在环顾四周，有很多选择。我的客户想在他们的网站上托管一个视频，就像在 YouTube 这样的播放器中。

以下是我发现但没有时间审查的一些：

*   [流播放器](http://flowplayer.org/)
*   [咖啡杯](http://www.coffeecup.com/video-player/)

非常感谢任何帮助和其他选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T20:38:18.583

我直接在 HTML 中使用它，但我会推荐 flowplayer。这一切都是第一次工作，支持 youtube 视频，我相信它是开源的（尽管当前站点在明显的地方没有关于此的信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-17T22:53:10.043

我在 jwplayer 上取得了巨大的成功。它非常容易设置，对非商业用途是免费的，而且商业许可证很便宜。

# php - 将 PHP DateTime 对象转换为 MYSQL 日期的字符串表示形式

> ID：396610
> 
> 赞同：3
> 
> 时间：2008-12-28T20:01:12.513
> 
> 标签：php, mysql

我有一个 DateTime，我想将它存储在 Date MySQL 列中。我正在使用 MySQLi 和准备好的语句。

绑定参数时，我不能将日期指定为类型，只能指定字符串和整数。

如何将 DateTime 转换为 MySQL 日期字符串表示形式？关于 DateTime 类的文档很少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T20:20:50.413

[我几乎把它作为Convert from MySQL datetime to another format with PHP](https://stackoverflow.com/questions/136782/format-mysql-datetime-with-php)的副本关闭了，但我认为这实际上是相反的问题。该问题询问如何格式化从 MySQL 获取的日期，而您询问如何格式化日期以输入查询。

**选项1：**

```
SELECT * FROM MyTable WHERE DateTimeCol = ? 
```

您可以将值格式化为`YYYY-MM-DD HH:MM`MySQL 想要的格式：

```
<?php $mysql_date = date('Y-m-d H:i:s', $timestamp); ?> 
```

然后将其作为字符串参数提交给查询。

**选项 2：**

```
SELECT * FROM MyTable WHERE DateTimeCol = FROM_UNIXTIME(?) 
```

然后您可以将时间戳值作为数字参数提交给查询。

**选项 3：**

```
SELECT * FROM MyTable WHERE DateTimeCol = STR_TO_DATE(?, '%m/%d/%y') 
```

[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)如果您为 MySQL 的函数指定格式，您可以提交日期/时间的各种字符串表示形式。有关格式代码，请参见[`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T20:49:49.183

因为 PHP5 引入的 DateTime 类的文档记录很差，所以我不建议使用它。我发现常规时间戳更容易使用！

但是，如果您仍想使用 DateTime 对象，一种解决方案是将对象转换为（unix）时间戳，然后再将它们存储在数据库中。从数据库中读取信息后，将时间戳转换回 DateTime 对象。

要从时间戳创建 DateTime 对象，请使用[date_create()](http://no2.php.net/manual/en/function.date-create.php)并将时间戳作为参数。要让您的对象表示自 Unix 纪元以来的秒数，请使用[date_format($object, 'U')](http://no2.php.net/manual/en/function.date-format.php)（大写 U）。

# php - PHP 到 ASP.NET - call_user_func() 等效？

> ID：396620
> 
> 赞同：2
> 
> 时间：2008-12-28T20:13:10.867
> 
> 标签：php, asp.net, web-applications

我想知道`call_user_func()`ASP.NET 应用程序中是否有与 PHP 等效的函数。我正在寻找从 PHP 应用程序到 ASP.NET 的转换，作为一种自学语言的方法，方法是采用我专业构建的 CMS 并尝试用另一种语言重新创建它。

我需要一个与此类似的函数的原因是因为我的 PHP CMS 的当前结构涉及插件架构，并且 CMS 的特定部分为插件公开自己，然后它将返回的信息作为数组处理。这与 Drupal 使用的系统几乎相同。

我可能是在错误的轨道上吗？

我想为了澄清起见，我应该提供一个例子来说明这在我当前的系统中是如何工作的：

```
<?php
class Test {

    function TestMessage() {
        // set up array
        $arrTest = array("Hello", "World");
        // get extra values from all available plugins
        $arrExtras = CMS::InvokeHook("HelloTest");
        // now contains Hello, World, Foo, Bar
        $arrTests = array_merge($arrTest, $arrExtras);
    }

}

class CMS {
    InvokeHook($function) {
        // now contains a couple plugins
        $plugins = CMS::GetPlugins();
        // empty array of values
        $values = array();
        foreach($plugins as $plugin) {
            // if this plugin has the called method...
            if(method_exists($plugin, $function)) {
                // call the function and merge in the results
                $values[] = call_user_func(array($plugin, $function));
            }
        }
        // return results as an array
        return $values;
    }
}

class FooTest {
    function HelloTest() {
        return "Foo";
    }
}

class BarTest {
    function HelloTest() {
        return "Bar";
    }
}

?> 
```

注意： InvokeHook() 调用被简化，因为我是从内存中编写的，但这就是它的要点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T21:35:11.870

在 .NET 中，我可能会创建一些事件并处理它们。这是一种方法：

```
public class CMS

    public Event DoSomethingHook(byval sender as Object, byval e as DoSomethingEventArgs)

    public function DoSomething()
        dim data() as Integer = {} 
        Dim e as new DoSomethingEventArgs();
        e.data = data
        RaiseEvent DoSomethingHook(Me, e)
        data = e.data
    end function
end class

' Let's say Plugin base class contains a reference to CMS
public class CMSPlugin
    Inherits Plugin 

    public sub New()
        ' Register for a hook
        AddHandler CMS.DoSomethingHook, AddressOf DoSomething
    end sub

    public function DoSomething(byval sender as Object, byval e as DoSomethingEventArgs)
        ' Do something with e.data
    end function
end class

public class DoSomethingEventArgs : Inherits EventArgs
    public data() as Integer
end class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T20:39:44.133

对于 .NET 开发人员来说，这基本上是一种从给定名称（作为字符串）调用方法的方法。

对 OP：（我认为）你必须使用反射。它远没有那么漂亮而且相当昂贵（IIRC），所以最好不要过度使用。

```
System.Reflection.MethodInfo method = this.GetType().GetMethod(myMethodName);
// method.Invoke(args, null); 
```

我认为如果你不得不求助于这个来完成事情，你可能会以“错误”的方式做事。可能有一种更清洁的模式会更好地工作。

我制作插件架构的方式是通过全局共享接口*，因此插件可以实现“插件”接口*，然后我知道会有一个可用的 .DoSomething() (etc) 方法。无需反思 =)

*或抽象类..真的，最合适的！

# c# - LINQ-组合多个列表 并按值排序（.Net 3.5）

> ID：396621
> 
> 赞同：21
> 
> 时间：2008-12-28T20:13:32.877
> 
> 标签：c#, .net, linq, generics

我试图结合一些`List<T> where T:IGetTime`（即`T`总是有方法`getTime()`）。

然后我正在尝试按返回的顺序订购`DateTime`物品`getTime()`。

我的 LINQ 看起来像这样：

```
public static List<T> Combine(List<T> one, List<T> two, List<T> three)
    {
        var result = from IGetTime item in one
                     from IGetTime item2 in two
                     from IGetTime item3 in three
                     select new{ item, item2, item3 };

        return result.ToList();
    } 
```

我还没有添加一个`orderby`. 这应该看起来像这样：

```
var thestream = from T item in this
                orderby item.getTime() descending
                select item; 
```

反正有没有合并和订购最终名单？？？？

提前致谢，

罗伯托

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-12-28T20:21:13.360

你这里有三个列表——你*到底*想按什么排序？

您的演员阵容也不正确 - 结果将是`IEnumerable<X>`where`X`是一个带有三个`T`s 的匿名类型。

如果这个想法真的是*连接*三个列表然后排序，你想要：

```
return one.Concat(two)
          .Concat(three)
          .OrderByDescending(x => x.GetTime())
          .ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-29T15:26:46.793

这是我的做法：

```
public static List<T> Combine<T, TKey>
(
  Func<T, TKey> orderingFunction,
  params IEnumerable<T>[] theParams
)
  where TKey : IComparable
{
  return theParams
    .SelectMany(x => x)
    .OrderBy(orderingFunction)
    .ToList();
} 
```

下面是一些测试代码：

```
 public static void Test1()
    {
        List<int> a = new List<int>() { 1, 2, 3 };
        List<int> b = new List<int>() { 3, 2, 1 };
        List<int> c = CombineLists.Combine(i => i, a, b);
        c.ForEach(i => Console.WriteLine(i));
    } 
```

这是故事：

```
public static List<T> Combine<T, TKey>
(
  Func<T, TKey> orderingFunction,
  params IEnumerable<T>[] theParams
)
  where TKey : IComparable 
```

这个签名声明了一个方法，它接受两个类型参数、一些排序函数和一堆集合。请注意，类型 T 和 TKey 没有在测试调用中明确指定。编译器有一个小难题来弄清楚这些类型是什么。首先，它检查给定的 IEnumerable（a 和 b）并发现它们是 int 的 IEnumerable。啊哈，T 必须是整数。然后它检查排序函数并查看它返回的类型与传递的相同。啊哈，TKey 必须是 int。

*哪里*有点好笑。OrderBy 应该（在编译时）检查 TKey 是否为 IComparable。它只在运行时检查，所以我们可以在我们的代码中进行编译时检查。

[params](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)接受任意数量的参数，并引用它们来创建数组。谁愿意被限制在三个列表中？

```
 return theParams
            .SelectMany(x => x)
            .OrderBy(orderingFunction)
            .ToList(); 
```

[SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)解包集合的集合。这是一种扁平化层次结构的方法。 [OrderBy](http://msdn.microsoft.com/en-us/library/bb534966.aspx)采用一些函数，将每个元素投影到一个可排序的值，并根据这些值对元素进行排序。 [ToList](http://msdn.microsoft.com/en-us/library/bb342261.aspx)枚举查询并返回列表。那里没有惊喜。

# c# - DirectShow：图形在 GraphEdit 中工作，而不是在代码中

> ID：396622
> 
> 赞同：3
> 
> 时间：2008-12-28T20:14:35.573
> 
> 标签：c#, c++, winapi, directshow

我在 GraphEdit 中构建了以下图表：Logitech Webcam -> Infinite Tee Pin Filter -> VideoRenderer。这很好用（GraphEdit 会在 TEe 过滤器和 VideoRenderer 过滤器之间自动插入一些中间过滤器）。

我尝试在代码中做同样的事情，但在尝试将 Tee 过滤器连接到 VideoRenderer 时失败。我首先将网络摄像头连接到 tee 过滤器，它可以工作（网络摄像头打开并且我得到 S_OK），然后我尝试将 tee 过滤器的单个输出引脚连接到第一个，但失败了（错误是它可以找不到一组中间过滤器来连接它们）。我尝试将它们与 IGraphBuilder::Connect 以及 ICaptureGraphBuilder2::RenderStream 连接起来，效果相同。要枚举引脚，我使用 hr = _CaptureGraphBuilder.FindPin(theFilter, PinDirection.Input, null, null, true, 0, out thePin); 对于视频渲染器，除了 PinDirection.Output 用于 Tee 过滤器（这是在 C# 中，但构造完全映射到 C++）之外，其他相同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-29T05:34:58.000

发现了问题。显然，网络摄像头过滤器在图表启动之前不会正确更新其输出媒体类型。因此，启动图表，然后在一切完成后重新启动图表就可以了。

# groovy - 无法在 NetBeans 6.5 中运行 Groovy 单元测试

> ID：396623
> 
> 赞同：3
> 
> 时间：2008-12-28T20:15:31.780
> 
> 标签：groovy, junit

NetBeans 中没有内置新的 Groovy 单元测试。如果我手动创建一个，我无法让它在 NetBeans 中运行。

是没有实现，还是我的安装有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-04T00:54:05.177

我有同样的问题。在我研究之后，通过自定义 ant-target 为 groovy-testcases 添加单元测试相当容易。不需要额外的 java 代码或任何东西。我在我的博客上写的[软件太疯狂了](http://software-is-insane.blogspot.com/2009/03/how-unit-test-groovy-netbeans.html)

希望有帮助。- 菲利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T07:41:31.393

如果您使用 Maven 构建项目，Groovy 测试用例将在您构建时自动在 NetBeans 中运行。也可以只运行单元测试 (ALT+F6) 并在 JUnit 的面板中检查结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T15:59:54.873

它似乎没有被实现——我在 Mac OS X 上遇到了同样的事情，并且没有找到任何解决方法。我一直在尝试尝试使用 NetBeans，但我似乎总是遇到一些问题并退回到 Eclipse。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-02T16:11:08.657

它肯定应该通过快速的 Google 来实现，并发现这篇[NetBeans testing with Groovy](http://www.troymaxventures.com/2007/03/netbeans-testing-with-groovy.html)这篇文章已经很老了，所以你会认为现在已经解决了问题。但是，netbeans 中有两个用于常规测试的突出错误[152937](http://www.netbeans.org/issues/show_bug.cgi?id=152937) 和[151052](http://www.netbeans.org/issues/show_bug.cgi?id=151052)。

# objective-c - C 预处理器的替代品

> ID：396644
> 
> 赞同：43
> 
> 时间：2008-12-28T20:32:10.203
> 
> 标签：objective-c, c, c-preprocessor

我有兴趣使用**C**预处理器以外的东西来预处理我的**C**和 Objective-C 源代码。有没有好的选择？

一个例子是允许一个人在**C**代码中间逃逸到 python 或 perl 片段中，并且片段吐出**C**，然后按正常方式编译。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-27T19:28:03.723

您可以将**PHP**用作 C 预处理器。优点是：

*   非常相似的语法，所以语法高亮有效。
*   `<?`并且`?>`不在标准 C 中使用（对于非标准 C，唯一被破坏的是返回 min/max 的旧 GCC 扩展运算符）
*   它有丰富的图书馆。
*   图灵完成了。
*   宏的使用非常明确。（与偷偷摸摸的 C 预处理器宏相比）

但是，如果要认真使用，则需要让 PHP 打印 #line 指令来调试预处理代码。

```
<?php include_once "stdio.h"; ?>

int main()
{
    <?php
        for($i = 0; $i < 20; $i++)
            echo 'printf("%d\n", '.$i.');';
    ?>
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-28T20:34:16.907

您可能需要考虑 m4。
[http://www.gnu.org/software/m4/](http://www.gnu.org/software/m4/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-28T20:55:03.573

[Cog](http://nedbatchelder.com/code/cog/)并不完全是一个预处理器，但它确实在代码中嵌入并动态生成内容。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-12-29T02:23:01.540

**运行代码，然后拼接其结果的**想法称为**quasiquotation**。您运行的代码是**反引用**的。

我知道如何使用 Lua 解决这个问题。我已经使用`string.gsub`了**我自己编写的反引号函数**。我使用 shell 语法进行反引号。与在 shell 中一样，**反引号代码返回一个字符串**，然后将其拼接到代码中。

下面`prog`是带有反引号文本的 C 代码，`antiquote`是反引号函数。我充分利用了 Lua 的特殊字符串引用双方括号。 *在实践中你不会这样做*；你会放在`prog`一个单独的文件中。

```
names = { 'John', 'Paul', 'George', 'Ringo' }

local prog = [===[
#include <stdio.h>

main() {
  $(local out = { }
    for _, n in ipairs(names) do
      table.insert(out, string.format([[  printf("The name is %%s\n", %q);]], n))
    end
    return table.concat(out, '\n  ')
   )
}
]===]

local function antiquote(s)
  local body = s:match '^%$%((.*)%)$'
  return assert(loadstring(body))()
end

prog = prog:gsub('%$%b()', antiquote)
io.stdout:write(prog) 
```

在使用中，程序如下所示：

```
: nr@curlycoat 1181 ; lua /home/nr/tmp/emit-c.lua
#include <stdio.h>

main() {
    printf("The name is %s\n", "John");
    printf("The name is %s\n", "Paul");
    printf("The name is %s\n", "George");
    printf("The name is %s\n", "Ringo");
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-22T15:24:26.853

当然，标准的 C 预处理器非常有限。
我最近做过这样的工具：[https ://github.com/d-ash/perlpp](https://github.com/d-ash/perlpp)

例如这个

```
<?
    my @types = ('char', 'int', 'long'); 
    foreach (@types) {
?>
        <?= $_ ?> read_<?= uc($_) ?>(<?= $_ ?>* v);
<?  } ?> 
```

变成这个

```
char read_CHAR(char* v);
int read_INT(int* v);
long read_LONG(long* v); 
```

语法类似于 PHP，但它使用 Perl 代替，并且可以将文本捕获到 Perl 字符串中。

**由[cxw](https://stackoverflow.com/users/2877364/cxw)**编辑**— 经@d-ash 批准，我也是 perlpp 的维护者。如果您有任何问题，请随时给我留言！**

 *** * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-07-28T16:50:06.067

如果您稍微抽象一下您的问题，那么您实际上是在为您的代码寻找模板引擎。正如大多数网站在静态模板中插入动态生成的内容一样，您也希望将动态生成的代码插入到您的程序中。

我目前使用*Jinja2* (Python) 进行大多数模板工作——我发现它在各个方面都*非常*可配置。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-28T20:58:54.453

如果你准备好用一些 C++ 弄脏你的手，Boost 中有 Wave 解析器，它是使用 Spirit 递归下降解析器构建的。它是一个完整的 C 预处理器，符合所有最新的 C 和 C++ 规范（以及扩展的 Objective C、AFAICS）。

它是高度模块化的，因此您可以切换您自己的驱动程序，以实现您想要的额外功能。

[http://www.boost.org/libs/wave/doc/introduction.html](http://www.boost.org/libs/wave/doc/introduction.html)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-12-29T15:20:26.463

CPP does many important things for C code that you probably don't need re-implemented. What you seem to be looking for instead may be a templating process that emits C code.

[Cheetah](http://www.cheetahtemplate.org/) is just one of many that allows you to use python. There are others that use python and still more in other languages, but Cheetah is known for being output-agnostic where some templating engines are very heavily geared towards HTML/XML. Do your research.

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-28T20:53:56.650

我过去曾考虑过同样的问题。确保您对任何想要编译您的代码的人都需要新的预处理工具这一事实感到满意。如果你是唯一一个会使用它的人，那没问题，但是如果你想让其他人可以使用代码，那么你可能需要考虑添加工具需求是否是一个好主意。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-12-28T20:56:20.200

最简洁的答案是不。” 预处理器与 C 的语义密切相关，以至于您无法真正删除它，事实上，在某些编译器中，它甚至不像过去那样是一个单独的阶段 --- 在Mac 只解析 Objective C 语法。因此，虽然您当然可以使用另一个宏处理器，如 m4，在将源文本传递给 C 之前对其进行处理，但您不会*取消*C 预处理器，而是*添加*另一个预处理步骤。

但这里还有一个更深层次的问题：你想通过取消 CPP 阶段*获得什么？*

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-28T21:14:44.610

您可以使用自己喜欢的编程语言来构建脚本/工具来生成源文件（.c/.cpp 或 .h 或其他文件）。只需`#include`将它们或将它们编译到您的项目中。在 附近添加评论可能有助于`#include`确定工具的位置/位置以及生成的内容。

这可能不像使用“真正的”预处理器那样方便（或干净），但它会起作用。再说一次，这真的取决于你的情况。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-28T20:36:16.217

我看到一篇 2001 年的论文介绍了类似 python 的预处理器[http://ray.cg.tuwien.ac.at/rft/Papers/PYM/pym.html](http://ray.cg.tuwien.ac.at/rft/Papers/PYM/pym.html)。不清楚有没有人在用。。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-29T06:28:43.790

我很想看看人们想出了什么。我倾向于用 Perl 编写的预处理器来做一些小的自定义事情。装配一个调用预处理器的 Makefile 很容易。例如，这里有一条规则，调用名为“meta”的程序从“file.c.meta”生成“file.c”。

```
% :: %.meta
    meta $< > $@ 
```

我正在用“元”做一些有趣的事情，比如生成自定义拟合 C 数据结构。这绝对是我建议探索的方向。我希望最终能提出一个与 C++ 模板大致平行的元库。

# dom - 检索 DOM 文本节点位置

> ID：396649
> 
> 赞同：19
> 
> 时间：2008-12-28T20:36:44.483
> 
> 标签：dom, textnode

是否可以检索文本节点的几何位置（即从父元素、页面等的顶部/左侧偏移量）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-29T01:16:17.493

不是直接的。TextNode 没有用于测量视口定位的原始 IE 偏移*（和类似的）扩展。

仅在 IE 上，您可以创建一个 TextRange 对象，费力地尝试将其与 TextNode 的边界对齐，然后测量 TextRange 的 boundingLeft/boundingTop，并将其添加到父元素的位置（通过常规方式获得） . 然而，对于一个可能不稳定的单浏览器解决方案来说，这是一堆工作。

您可能能够摆脱的另一种方法是将文本包装在 span 元素中（在文档中，或通过脚本动态和/或临时），并使用 span 来测量定位，假设它没有拾取任何额外的可能影响位置的样式。但是请注意，包裹的跨度可能不会给出预期的右/底部值；根据你想用它做什么，你最终可能会包装第一个和最后一个字符或其他一些排列。

总结：呃，没什么好说的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-04-04T04:40:10.347

**今天你可以**通过`Range.getBoundingClientRect()`. IE9+

```
// Get your text node
const el = document.querySelector('strong')
const textNode = el.firstChild;

// Get coordinates via Range
const range = document.createRange();
range.selectNode(textNode);
const coordinates = range.getBoundingClientRect()

console.log(coordinates);
```

```
/* Demo CSS, ignore, highlights box coordinates */ body{max-width:300px}strong{position:relative}strong,strong:before{border:solid 1px red}strong:before{content:'';position:absolute;right:100%;bottom:100%;width:100vw;height:100vh;pointer-events:none}
```

```
The red lines will show you the coordinates bounding box of the <strong>selected textnode</strong>.
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-30T04:55:28.543

**相对于视口的文本节点**

```
function getBoundingClientRectText(textNode) {
  const range = document.createRange()
  range.selectNode(textNode)
  return range.getBoundingClientRect()
}
```

**相对于元素的文本节点**

```
function getTextOffsetRelativeToElement(element, textNode) {
  const elementRect = element.getBoundingClientRect()
  const range = document.createRange()
  range.selectNode(textNode)
  const textRect = range.getBoundingClientRect()
  return {
    top: textRect.top - elementRect.top,
    left: textRect.left - elementRect.left
  }
}
```

**相对于文本节点的父元素的字符偏移**

```
function getCharOffset(textNode, offset) {
  const parentRect = textNode.parentElement.getBoundingClientRect()
  const range = document.createRange()
  range.setStart(textNode, offset)
  range.setEnd(textNode, offset + 1)
  const charRect = range.getBoundingClientRect()
  return {
    top: charRect.top - parentRect.top,
    left: charRect.left - parentRect.left
  }
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-28T20:42:14.067

看看[这篇文章](http://www.quirksmode.org/js/findpos.html)- 它使用 offsetParent 属性递归地计算出偏移量。

我总是推荐 jquery 来滚动你自己的方法来处理像这样的浏览器变化的东西。[jquery CSS 函数](http://docs.jquery.com/CSS)似乎有你需要的方法！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T23:30:06.130

没有任何内置的跨浏览器方法可以做到这一点。我会将 jQuery 与Dimensions 插件一起使用：http: [//brandonaaron.net/docs/dimensions/](http://brandonaaron.net/docs/dimensions/)

它是跨浏览器的，会为您提供高度、宽度和 x & y 偏移量等。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-25T23:36:13.820

这些天有办法。一种方式：getBoundingRectangle：[https ://developer.mozilla.org/en-US/docs/Web/API/Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element.getBoundingClientRect)

# abap - 如何让abap程序暂停？

> ID：396663
> 
> 赞同：10
> 
> 时间：2008-12-28T20:51:00.743
> 
> 标签：abap

出于测试目的，我需要我的 ABAP 程序等待几秒钟。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-12-29T00:29:16.417

2个解决方案：

1）要么使用[WAIT UP TO ... SECONDS](https://help.sap.com/doc/abapdocu_753_index_htm/7.53/en-US/index.htm?file=abapwait_up_to.htm)。

```
WAIT UP TO 42 SECONDS.
WAIT UP TO '0.5' SECONDS. " decimals are possible since ABAP 7.40 SP 8 
```

*   进行部署并将工作流程发布给侦听器
*   是否隐式数据库提交

当 CPU 进程非常宝贵并且隐式提交不会损坏您的数据或由于打开的数据库游标而导致短暂转储时，请使用它。

2）或使用功能模块`ENQUE_SLEEP`：

```
 CALL FUNCTION 'ENQUE_SLEEP'
      EXPORTING
        seconds = 42. 
```

*   不发布工作流程
*   不会导致隐式数据库提交

当您负担不起隐式提交时使用它，并且系统可以处理在 SLEEP 命令期间被占用的工作进程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-06T16:30:08.133

[ABAP 等待 SAP 文档](http://help.sap.com/abapdocu_702/en/abapwait_up_to.htm)

WAIT 语句有一个隐含的 COMMIT，这是应该避免的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T19:51:21.540

你真的需要暂停吗？您可以通过在执行程序之前在事务字段中输入 /h 或在代码中设置断点来跟踪它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-02-22T08:16:36.103

最好的方法是使用等待：WAIT UP TO x SECONDS。其中 x 是秒数。

如果你使用 API 或 bapi，你可以使用它直到你得到响应

# grails - 在 Grails 中，需要为一对多关系定义一个 Set 吗？

> ID：396667
> 
> 赞同：2
> 
> 时间：2008-12-28T20:52:55.420
> 
> 标签：grails

我有 Grails 域类 Child 和 Toy。一个孩子可以有很多玩具。

```
class Child {
    static hasMany = [ toys : Toy ]
    String name
}

class Toy {
    static belongsTo = [ owner : Child ]
    String name
} 
```

据我了解，Child 上会有一个玩具财产。也就是说，会有 Child 方法：

```
public Set getToys() 
```

但这不起作用。我无法`child.getToys()`从 Java 类中引用。我在 Child 中明确定义了玩具：

```
class Child {
    static hasMany = [ toys : Toy ]
    String name
    Set toys
} 
```

这个对吗？我是否需要为一对多关系明确定义一个集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T22:45:50.900

是的，如果您想从 Java 中引用它，您必须明确定义该属性。这与 groovy 编译器 (groovyc) 为 groovy bean 创建存根类的方式有关。

# php - php上的超链接

> ID：396674
> 
> 赞同：2
> 
> 时间：2008-12-28T20:56:50.980
> 
> 标签：php, wordpress, href

我正在开发一个 wordpress 模板，需要在页面顶部添加一个指向卡通气泡的超链接。据我所知，泡沫是 php。我在哪里插入href？

```
<h1><a href="<?php bloginfo('url'); ?>/"><?php bloginfo('name'); ?></a></h1> 
```

href 应指向 www.ojaivalleynews.com

如果您想在气泡上看到视觉效果，博客网址是 www.ovnblog.com。我用萤火虫来观察，但可惜我对 php 的了解还不够，无法理解它。

谢谢

更新...

我错过了关于上述问题的第二行代码，并且根据这里的建议，对这一行进行了更正并且它有效。

```
<h1><a href="<?php bloginfo('url'); ?>/"><?php bloginfo('name'); ?></a></h1>
<div id="bubble"><p><a href="http://www.ojaivalleynews.com/" target="_blank"><?php bloginfo('description'); ?></p></div> 
```

感谢大家的帮助。为大家点赞！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-28T21:15:22.860

只需更换

```
<?php bloginfo('url'); ?>/ 
```

和

```
http://www.ojaivalleynews.com 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T21:11:10.170

```
<h1><a href="http://www.ojaivalleynews.com/"><?php bloginfo('name'); ?></a></h1> 
```

我想这就是你想要的，但我不能确定......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T21:12:20.933

如果你想用另一个 -static- 链接替换它，它应该是：

```
<h1><a href="http://www.ojaivalleynews.com"><?php bloginfo('name'); ?></a></h1> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-28T21:36:43.130

在 WordPress 中， bloginfo('url') 为您提供博客主页的 url。“bloginfo”与“echo get_bloginfo”相同。

如果您博客的主页是[http://www.ojaivalleynews.com](http://www.ojaivalleynews.com)，那么它将输出。否则，如果[http://www.ojaivalleynews.com](http://www.ojaivalleynews.com)与您的博客无关，只需像其他人推荐的那样替换为静态 url。

如果您是 WordPress 的新手并且您会经常使用它，请参阅[http://codex.wordpress.org/](http://codex.wordpress.org/)

** 更新 **

更新您的更新， bloginfo('description') 为您提供博客的描述/标题（通常在您的博客标题下）。如果您的博客是[http://www.ojaivalleynews.com](http://www.ojaivalleynews.com)，那么您在第一个链接中动态输出 url，在第二个链接中静态输出。如果没有，您将在[http://www.ojaivalleynews.com](http://www.ojaivalleynews.com)的链接上将您的博客描述作为文本提供。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-28T21:41:09.813

rashneon，查找以下 HTML（在 header.php 中搜索“bubble”）

```
<div id="bubble">
  <p>Click for OVN Homepage!</p>
</div> 
```

将其替换为

```
<div id="bubble">
  <p><a href="http://www.ojaivalleynews.com/">Click for OVN Homepage!</a></p>
</div> 
```

@Endlessdeath - 不，令人愉快的是，WordPress 将一堆打印的函数与一堆返回值的函数混合在一起。所以是的，它确实应该是`<?php bloginfo('url'); ?>`- 查看[默认主题文件](http://trac.wordpress.org/browser/trunk/wp-content/themes/default/header.php#L43)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-28T21:03:59.420

您不必回显函数的返回值吗？

```
<h1><a href="<?php echo bloginfo('url'); ?>/"><?php echo bloginfo('name'); ?></a></h1> 
```

# spring - Grails 文件下载

> ID：396677
> 
> 赞同：22
> 
> 时间：2008-12-28T20:59:07.480
> 
> 标签：spring, grails, download, http-headers, attachment

我正在尝试创建一个允许用户上传他们喜欢的任何文件类型的站点。我已经很好地实现了这个功能，并且文件保存在服务器上。稍后他们可以下载文件以查看，但我无法让它工作。

我使用了我能掌握的任何示例，但它们都倾向于使用文本文件作为示例。我的问题是 pdf 和许多其他文件类型无法正确下载。他们似乎下载得很好，但没有一个文件可以成功打开。比较文件，似乎大部分文件内容是正确的，但某些部分不是。

这是我的常规代码：

```
def file = new File(params.fileDir)    
response.setContentType("application/octet-stream")
response.setHeader("Content-disposition", "filename=${file.getName()}")
response.outputStream << file.text
return 
```

此代码保存在由下载链接调用的控制器中。我尝试过使用不同的 contentTypes，但我不知道我可以将哪个用于任何类型 - 有吗？我尝试的任何事情都不能解决问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-12-28T22:32:43.657

问题是您使用“file.text”将文件的内容读入字符串。即使内容是二进制而不是文本（例如 PDF 文件是二进制），文件的内容也会使用系统字符编码进行转换，并使用响应编码发送到客户端，从而修改二进制内容。您应该使用这样的不同方法：

```
def file = new File(params.fileDir)    
response.setContentType("application/octet-stream")
response.setHeader("Content-disposition", "attachment;filename=${file.getName()}")

response.outputStream << file.newInputStream() // Performing a binary stream copy 
```

# linux - 如何在多线程环境中实现垃圾回收？

> ID：396684
> 
> 赞同：3
> 
> 时间：2008-12-28T21:08:00.380
> 
> 标签：linux, multithreading, memory-management, garbage-collection, x86

我应该如何在由多个线程或进程组成的程序中执行垃圾收集？

如何从每个线程和进程中扫描堆栈？

每个进程都需要自己的垃圾收集例程吗？在与实际程序不同的线程/进程中运行垃圾收集器是个好主意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T22:54:07.140

您必须为每个地址空间收集一次。多个线程在同一个地址空间中运行，因此需要一个 GC 来处理。对于通过产生不同进程工作的程序，每个进程都在自己的地址空间中运行，每个进程可以有一个 GC。

在多线程的情况下，将 GC 作为另一个线程运行是有意义的。这样，您可以调整该线程的优先级，以确保整个程序的运行最顺利。对于单线程进程，最简单的方法是让 GC 挂钩到“正常”内存管理例程（特别是分配），但您可以有两个线程 - 一个用于原始进程的线程和一个 GC 线程 - ，再次确保半流畅的性能。

stop-the-world-collectors 是最简单的——mark-and-sweep、mark-and-compact、stop-and-copy，应有尽有。挂钩到单线程程序中的内存管理例程的 GC 本质上是 stop-the-world。在多线程的情况下，GC 线程可以被线程调度程序赋予特殊的权限（使它一旦决定运行就不会被中断），这允许你从这样一个特权线程运行一个 stop-the-world GC。

如果 GC 可以被 mutator（即程序的其余部分）中断，特别是因为它只是另一个根本没有得到特殊处理的线程，那么您将需要一个可以处理 mutator 干扰的 GC。在这种情况下，您正在查看增量 GC。IGC 可用于单线程、挂钩到内存管理例程设置中，它可能会被中断，即通过超时来确保整个系统的运行平稳；它也可以在多线程系统中使用，它只是与其他线程竞争运行时间。

我不能告诉你如何找到程序的堆栈或程序的所有线程的堆栈，但是应该为每个操作系统记录这些结构的布局。抓住 Boehm GC 并扫描源代码以获取提示可能是有意义的。

在将 Jones/Lins 运送给您的同时，请花一些时间在[http://www.memorymanagement.org/](http://www.memorymanagement.org/)上。更多信息，正如 Charly Martin 上面所说的，Sun 的人们在垃圾收集领域做了一些惊人的研究和开发，就像 IBM Jikes RVM 团队的成员和同事一样。

**编辑：** 阅读您对查理·马丁的评论后，让我给您一个更简洁的建议：将 Boem GC 连接到您的系统并*完成它*。编写垃圾收集器很容易。几乎不可能编写一个正确、高效、快速、行为良好、调优和健壮的垃圾收集器。使用现有的 GC 并继续进行项目中有趣的部分。不要被 GC 卡住，或者更糟糕的是，有一个糟糕的 GC 实现会让你烦恼不已。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-28T21:21:55.797

大多数 GC 被称为“stop the world” GC - 在某些预定义的点（“Gc 点” - 例如调用点、跳转、返回），每个线程将检查是否存在其他想要执行 GC 循环的线程. 一旦所有线程都停止，GC 循环就会运行。

当然，还有其他可能性——实时的、增量的、并发的（以及更多）GC 也存在——搜索网络（你会找到已发表的论文）或者干脆[买一本关于 GC 的书](https://rads.stackoverflow.com/amzn/click/com/0471941484)

至于堆栈扫描，有几种方法：

*   精准扫描：

    *   标记堆栈 - 你基本上保留 2 个堆栈 - 一个带有值，一个带有“标签”。什么标签取决于您的需要，但它主要是“是参考”/“不是参考”标记

    *   没有标签的堆栈 - 基本上，如果您有一种具有严格类型的语言，那么您可以在每个时间点（但更常见的是在每个“GC 点”）都知道堆栈上的类型是什么。我会给你一个使用简单解释器的例子（我只是编造的）：

> ```
> no-return function XY (int):
>  load_param 1 
>  ipush 1
>  iadd
>  call Z (assume: int function Z (int, int))
>  new some_object
>  call Y 
> ```

如果我们将 GC 点定义为 call/new，那么可能有 3 个点我们可能需要知道我们的堆栈类型（在 XY 函数入口处，堆栈被认为是“空的”）：

*   调用 Z - load_param 加载一个 int 参数，ipush 将一个 int - 2 个 int 压入堆栈，我们的 GC 在这里什么也不做
*   new - 调用 Z 使用堆栈中的 2 个整数并放置一个 int
*   调用 Y - new 放置了一个引用，所以现在我们有一个 int 和一个引用，GC 必须知道那个引用

请注意，我说函数入口时堆栈是“空的” - 确实不是，但您可以单独分析每个函数，然后向上移动“调用堆栈”（您在某处有一个返回指针，因此您知道您在哪里必须返回 - return-1 是一些调用，您还可以获得堆栈的图像。重复直到到达顶部）。

有两种方法可以记住此信息（对于未标记的堆栈）：

*   为每个 GC 点生成一个表
*   为每个 GC 点生成一个代码片段（代码片段本身会标记引用的对象）

至于你什么时候收集这些信息，它可以是预编译的，也可以是及时的。

这也可以应用于机器堆栈，但事情会变得有点复杂，因为您可能还必须跟踪寄存器。

您也应该能够在网上找到一些关于无标签堆栈的好论文。

在添加例如的位置还有进一步的修改。数据的“活跃度”信息（好的，堆栈上有一个引用，但是如果在使用它的指令流中没有代码，我现在可以将其视为无法访问）

*   保守的收集（与精确扫描相反） - 你问自己“这个值在堆栈上，解释为指针，引用”，如果是，那么它是“活着的”。如果有例如，这当然会泄漏。一个看起来像指针的整数（如果整数发生变化，内存将被释放，但也可能永远泄漏）。大多数 c/c++ 收集器都是以这种方式实现的，因此如果您好奇，请朝那个方向搜索。

> 每个进程都需要自己的垃圾收集例程吗？

没有什么需要这样做，但我想说这很常见——为简单起见，我的每个进程都有一个不同的 GC 实例（但所有线程只有一个）。我想进程之间可能存在共享内存分配器 - 我看到的唯一好处可能是更好地管理内存碎片（因为你控制更多内存）但复杂性（进程间通信/同步 - 糟糕），共享数据量缺乏独立性成为问题。我在这里猜测，我对这种类型的 GC（或者即使它们存在）没有真正的经验——这对我来说似乎是常识。

> 在与实际程序不同的线程/进程中运行垃圾收集器是个好主意吗？

这要看情况。将它保存在另一个线程中应该是一个好主意，但是你得到什么取决于 - 你想让你的 GC 简单（“停止世界” - 所有其他线程都被暂停，所以它在我们在哪个线程执行我们的 GC，但如果它有自己的线程更好），或者您有特殊要求（例如，您的线程是实时的，不应该长时间停止，那么您将有不同的 GC线程并使用实时/增量 GC 算法）。

这一切都取决于您需要什么，**但无论您做什么，请记住 - 使其尽可能简单。**

而且我几乎忘记了，有一些很好的替代方法可以从头开始编写自己的 GC - 例如。请参阅[LLVM](http://llvm.org/docs/GarbageCollection.html)，他们声称“利用这些工具，只需大约 100 行 C++ 代码，就可以直接为您的运行时发出类型准确的堆栈映射。” （仅预编译代码，从 jet 开始不支持代码 JIT 生成）。此外，您可能会查看一些 java VM 的代码（例如，phoneME Advanced VM (CVM)，据我所知，kaffe 的可读性很好）。

免责声明：我曾经（作为一个学生项目）实现了一个精确的、停止世界、无标记、标记和扫描 GC - 这里写的所有内容都是我从经验中记忆的结果，应该是正确的，但它可能不是“最佳实践”。欢迎指正。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T22:00:25.703

为什么要*自己*做GC？还是您只是想了解一般的 GC？Hrvoje 推荐的 Jones and Lin 书相当不错，[维基百科](http://en.wikipedia.org/wiki/Garbage_collection_(computer_science))的文章看起来也不错。

1.4.2 之后的 Java 提供了增量混合 GC，不会强制“stop the world”停止；我们需要这样做来处理面向设备的 Java，例如 Java ME 世界。Sun java 网站上有一篇很好的[扩展论文。](http://java.sun.com/docs/hotspot/gc1.4.2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T21:12:07.657

大多数 GC 环境，例如 Java 和 .NET，都会在垃圾收集期间停止所有线程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T22:12:31.700

这是[Maoni Stephens 的博客](http://blogs.msdn.com/maoni/)。她是 .Net GC 的当前主要开发人员。

这是一篇[关于并发 GC](http://www.julmar.com/blog/mark/PermaLink,guid,3670d081-0276-48e6-b97d-1b644093b52e.aspx)的帖子，其中讨论了 .Net GC 在这种情况下是如何工作的。

# c# - AutoCompleteExtender 有时有效

> ID：396699
> 
> 赞同：-4
> 
> 时间：2008-12-28T21:20:25.487
> 
> 标签：c#, javascript, .net-3.5, textboxextender

```
 [System.Web.Services.WebMethod]
    [System.Web.Script.Services.ScriptMethod]
    public string[] GetRowsByFilter(string prefixText, int count)
    //public static List<string> GetRowsByFilter(string prefixText)
    {
        DataTable table = ds.Tables[0];
        string filter = "stShortName LIKE '" + prefixText.Replace("'", "''") + "%'";
        DataRow[] foundRows;
        List<string> items = new List<string>(count);

        foundRows = table.Select(filter);
        if (foundRows.Length > 0)
        {
             for (int i = 0; i < foundRows.Length; i++)
            {
                items.Add((string)foundRows[i]["stShortName"]);
            }
            return items.ToArray();
        }
        else
        {
            items.Add("No '" + prefixText + "' items found");
            return items.ToArray();
        }
    } 
```

和

```
<ajaxToolkit:AutoCompleteExtender 
    id="AutoCompleteExtenderTxtSite" 
    BehaviorID="AutoCompleteEx"
    Runat="server" 
    Targetcontrolid="txtSiteASP"
    ServiceMethod="GetRowsByFilter"
    MinimumPrefixLength="1" 
    CompletionInterval="1000"
    EnableCaching="false"
    CompletionSetCount="10" 
    CompletionListCssClass="autocomplete_completionListElement" 
    CompletionListItemCssClass="autocomplete_listItem" 
    CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem"
    DelimiterCharacters=";, :"
    ShowOnlyCurrentWordInCompletionListItem="true" 
  >
    <Animations>
        <OnShow>
            <Sequence>
                <OpacityAction Opacity="0" />
                <HideAction Visible="true" />
                <ScriptAction Script="
                    // Cache the size and setup the initial size
                    var behavior = $find('AutoCompleteEx');
                    if (!behavior._height) {
                        var target = behavior.get_completionList();
                        behavior._height = target.offsetHeight - 2;
                        target.style.height = '0px';
                    }" />
                <Parallel Duration=".4">
                    <FadeIn />
                    <Length PropertyKey="height" StartValue="0" EndValueScript="$find('AutoCompleteEx')._height" />
                </Parallel>
            </Sequence>
        </OnShow>
        <OnHide>
            <Parallel Duration=".4">
                <FadeOut />
                <Length PropertyKey="height" StartValueScript="$find('AutoCompleteEx')._height" EndValue="0" />
            </Parallel>
        </OnHide>
    </Animations>
</ajaxToolkit:AutoCompleteExtender> 
```

其中大部分内容直接来自 Toolkit 示例网站。除了从数据库中填充数组外，我也完全按照示例中的方式使用 Web 服务完成了它。两者都完美地填充了数组，并且有时都可以工作。缺乏性能方面，它们似乎是相同的。

我在另一个页面上使用了几个日历控件，它们完美地工作，但浪费了太多时间试图使这项工作始终如一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T11:11:42.577

我发现如果服务器端代码需要很长时间才能执行，客户端 AJAX 请求似乎会超时。

我没有试图证明这一点，因为当我可以调整服务器端代码以提高性能时，这种努力似乎非常值得。

检查您的数据集是否被缓存，如果没有，检索它需要多长时间？检查数据库索引。Sql LIKE 查询在 SQL Server 2005 中得到了更好的优化。

如果它不是超时并且实际上是服务器端错误，请通过浏览器访问它并在“自动完成”文本框中键入您将使用的查询来在本地测试 Web 服务。或者，在没有结果后检查服务器事件日志并查找 ASP.NET 警告事件。

# hibernate - 如何从 Grails 控制器和视图外部引用 Grails 域类字段？

> ID：396703
> 
> 赞同：3
> 
> 时间：2008-12-28T21:23:47.977
> 
> 标签：hibernate, grails

我有域类：

```
class Child {
    static hasMany = [ toys : Toy ]
    String name
    Set  toys
}
class Toy {
    static belongsTo = [ owner : Child ]
    String name
} 
```

在我的 JSP 中，我通过以下方式引用了一个孩子：

```
child = Child.findByName("Joe") 
```

或者

```
child = Child.findById(123) 
```

但是当我尝试访问它的字段时：

```
child.getToys() 
```

我得到错误：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: Child.toys, no session or session was closed 
```

我需要手动启动 Hibernate 会话吗？如果是这样，我会怎么做？

**2012 年 2 月跟进**：从 Grails 控制台 (Grails 2.0.0) 运行时也会出现此行为

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-28T22:52:57.923

这与 Grails 1.0.4 中有关 Hibernates 延迟初始化的缺陷有关。作为一种解决方法，您可以强制急切获取这些属性：

```
child = Child.findByName("Joe", [ fetch: [ toys: 'eager' ] ] ) 
```

除此之外，遵循 MVC 原则，您应该考虑在控制器内部执行这些查询，并使结果成为模型的一部分。

顺便提一句。你真的在 JSP 中这样做吗？还是普惠制？

干杯

# c# - 将匿名类型传递给 MVC ViewData.Model 是否安全？

> ID：396706
> 
> 赞同：1
> 
> 时间：2008-12-28T21:25:27.240
> 
> 标签：c#, asp.net-mvc, model-view-controller

是否可以执行以下操作：

```
View(new {Object A, Object B}) 
```

还是应该在新类型中显式声明对象 A 和对象 B？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-29T23:22:29.907

是的，这样做很好。要获取这些值，您可以使用 ViewData.Eval("PropertyName") 并且现有的 Html 助手可以很好地使用它们。您唯一不能做的就是使用 <%= ViewData.Model.PropertyName %> 对属性进行强类型访问

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T21:35:10.997

尽管匿名类型可用于许多 MVC 用途，但在这种情况下，我将使用常规命名类，或者推送字典（或内置字典）。否则，您将不得不使用反射 /`TypeDescriptor`再次获取值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T21:36:12.413

通过传递匿名类型，您不能拥有强类型视图。您还需要在单元测试中使用反射。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T21:36:39.293

我相信您至少想给他们起名字：

```
var model = new 
{
    ObjectA = new A(),
    ObjectB = new B(),
};

view(model); 
```

# html - 您如何确定网站建立在什么技术之上？

> ID：396739
> 
> 赞同：157
> 
> 时间：2008-12-28T22:01:00.227
> 
> 标签：html, frameworks, reverse-engineering

我经常遇到一个外观漂亮或功能强大的网站，并想知道使用什么技术来创建它。有哪些技术可以用来确定特定网站是用什么构建的？

似乎很少有框架像 Web 编辑器那样包含任何类型的生成器元标记。是否有任何特定语言和/或框架的迹象？

* * *

***答案摘要***

站点 URL 可能会背叛框架和/或编程语言，但不能依赖（例如，.asp 等文件扩展名）。HTTP 响应标头、cookie、样式表和源注释也可能提供线索。

一些用于查询站点详细信息的好工具（毫无疑问还有更多）：

*   [内置](http://builtwith.com/)
*   [域工具](http://www.domaintools.com/)
*   [网络工艺](http://news.netcraft.com/)
*   [W3技术](http://w3techs.com/sites)
*   [类似技术](http://www.similartech.com)

火狐插件：

*   [Wappalyzer](http://wappalyzer.com/) - CMS、框架/库、电子商务、留言板等。
*   [域详细信息](https://addons.mozilla.org/en-US/firefox/addon/2166)- IP、国家和网络服务器详细信息
*   [Library Detector](https://addons.mozilla.org/en-US/firefox/addon/10083) - 使用中的 Javascript 库

Chrome 扩展程序：

*   [分析仪](http://wappalyzer.com/)
*   [类似技术](https://chrome.google.com/webstore/detail/similartech-site-technolo/jiabgmelnfhgjkfdaoiccfcbaedjfcnm)
*   [PageXray](https://chrome.google.com/webstore/detail/pagexray/aedmpdookgbneegaeajpoldpnpfbpmlb)

书签：

*   [WTFramework](http://blog.olicio.us/2008/11/08/wtframework-bookmarklet/) - 显示使用中的 Javascript 框架

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-12-28T22:15:19.713

您可以使用[http://builtwith.com](http://builtwith.com)来确定使用了哪种服务器和编程语言。例如，它告诉我 SO 使用 IIS7、谷歌分析、html4 和 utf8。

如果您想了解框架……那么仅通过查看该站点可能是不可能的。你为什么不给他们写一封电子邮件？;)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-12-28T22:13:53.213

您可以寻找各种各样的东西，但它并不能真正让您确定网站背后的技术。一般来说，这样的信息是人们想要隐藏的东西，因为暴露的信息越多，恶意方就越容易识别安全漏洞或拒绝服务漏洞。

如果我有兴趣，我可能会看，没有特别的顺序，在：

*   网址和文件扩展名。
*   HTTP 响应标头
*   注释源代码，或标准 JS 库

顺便说一句，其他答案中提到的工具只是为您查看网站的上述一些属性，尽管是自动的，而且速度稍快一些。:)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-28T22:31:49.073

我为 Firefox 使用了 1 个插件，它为我提供了托管网站的 IP 和国家/地区，它的 Web 服务器名称称为[Domain Details](https://addons.mozilla.org/en-US/firefox/addon/2166)，对于 javascript 框架，我使用[WTFramework](http://blog.olicio.us/2008/11/08/wtframework-bookmarklet/)

我仍然想知道它是用什么脚本编写的，但这是一个开始:)

希望能帮助到你。

PS输出将是这样的：

[替代文字 http://img88.imageshack.us/img88/2505/200812282328ha0.png](http://img88.imageshack.us/img88/2505/200812282328ha0.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-12-28T22:07:33.177

URL 可以提供很多线索，尤其是内容管理系统。

例如“ [http://abcxyz.com/node/46](http://abcxyz.com/) ”看起来很像 Drupal **。**

许多框架也有他们使用的标准 JavaScript 和 CSS 文件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-29T02:32:59.773

有些人甚至可能故意掩盖他们使用的技术。毕竟，我很快就可以调整 apache 以便“.asp”实际上运行 perl 脚本并将“由 Microsoft IIS 提供支持”放入我的页脚，尽管我使用了 MySQL。

这样一来，您将花费所有时间尝试使用它实际上没有的漏洞来入侵我的网站。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-06-28T02:29:26.640

查看[Chrome Sniffer](https://chrome.google.com/extensions/detail/homgcnaoacgigpkkljjjekpignblkeae)，这是一个很棒的轻量级解决方案。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-29T02:57:13.203

检查网站提供的 cookie 可以揭示底层框架。例如，CodeIgniter 默认为一个告密的 ci_sessions cookie。使用 PEAR Auth 的站点会做类似的事情。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-06-26T00:57:20.153

我使用允许确定网站使用的 CMS 的WebParser ( [http://www.cybermake.com )。](http://www.cybermake.com)它允许确定多个网站的 CMS，也可以从搜索引擎中提取给定关键字列表的网站列表。功能强大的工具。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-02-04T12:49:08.813

[http://guess.scritch.org/](http://guess.scritch.org/)为 CMS 做这件事。

只需弹出 URL，它就会尝试猜测 CMS。在这种情况下，它告诉我我的博客正在运行 wordpress 3.4.2（这是正确的，我刚刚检查过！）

![在此处输入图像描述](https://i.stack.imgur.com/CHUmK.png)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-12-28T22:28:08.363

大多数 ASP.NET 站点都可以通过 URL 中的 .aspx 轻松识别。HTML 源代码中也有一些迹象，例如名为的隐藏表单字段`__VIEWSTATE`或 WebResource.axd JavaScript。HTML 元素通常具有以 . 开头的 id 属性`_ctl0`。

Rails 站点通常会包含来自 /stylesheets 的样式表和来自 /javascripts 的 JavaScript 文件，并且每个 URL 通常会有一个包含时间戳的查询字符串以阻止缓存。表单字段通常遵循`model_name[attribute_name]`.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-03-22T10:38:12.827

您可以使用[http://builtbased.com/](http://builtbased.com/)来确定使用了哪种服务器、框架和编程语言。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-02-01T10:18:56.237

[http://www.similartech.com](http://www.similartech.com)是我们制作的一个新工具，它可以做到这一点并且非常漂亮地呈现它。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-28T22:15:27.203

您可以使用 domaintools.com 来查找网站的服务器信息，并确定它是否是开源/微软：

[http://whois.domaintools.com/stackoverflow.com](http://whois.domaintools.com/stackoverflow.com)

然后在页脚中查找诸如“由 WordPress 提供支持”或“vBulletin”等提示的问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-12-28T22:15:47.623

是的，对于常见的 CMS，如 Drupal、Joomla、Pligg 和 RoR 等，有一些明显的迹象 .. .. ASP.NET 的东西也很容易发现 .. 但随着框架变得越来越晦涩难懂 ..

我通常将我正在窥探的网站与我知道是使用特定技术构建的另一个网站进行比较。这有时有效..

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-12-28T22:42:08.023

转到[Netcraft](http://news.netcraft.com/)并使用“该站点正在运行什么？” 左上角的搜索框。单击此处查看有关[Stack Overflow](http://toolbar.netcraft.com/site_report?url=http://www.stackoverflow.com)的报告。它不一定是正确的（例如，可能会有缓存或负载平衡），但它通常会为您提供所需的线索。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2011-01-25T09:05:44.000

还有[W3Techs](http://w3techs.com/sites)，它向您展示了大部分信息。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-09-24T16:02:38.137

在 Linux/OSX 中我经常使用简单的命令`curl -sI www.site.com`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-06-03T13:26:18.783

[http://www.quarkbase.com/](http://www.quarkbase.com/)是一个非常不错的工具和信息网站

# windows - USB 驱动器和 Windows 驱动器限制

> ID：396746
> 
> 赞同：0
> 
> 时间：2008-12-28T22:07:49.153
> 
> 标签：windows, usb-drive

一旦您添加了超出 AZ 驱动器号的驱动器，Windows 机器上会发生什么。我知道 mountvol 命令，但我的解决方案需要在不使用 NTFS 的 Win98/XP 系统上工作。有没有办法提供对这些驱动器的访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T22:55:42.067

如果物理驱动器数量过多，可以考虑使用硬件解决方案 (RAID) 将多个物理驱动器组合成逻辑较少的驱动器。此解决方案应该在 Win98 中工作。

如果将驱动器映射到 Windows 服务器，请考虑使用服务器上的连接点将多个驱动器组合成一个树结构。

或者使用 DFS 链接；不必打开复制。这将创建跨多个服务器的逻辑层次结构，您可以将一个驱动器号映射到 DFS 根目录。

# mysql - 按 SQL IN() 子句中的值顺序排序

> ID：396748
> 
> 赞同：167
> 
> 时间：2008-12-28T22:09:50.223
> 
> 标签：mysql, sql, sql-order-by

我想知道是否有可能（可能是更好的方法）按 IN() 子句中的值顺序进行排序。

问题是我有 2 个查询，一个获取所有 ID，第二个获取所有信息。第一个创建我希望第二个排序的 ID 的顺序。ID 以正确的顺序放在 IN() 子句中。

所以它会是这样的（非常简化）：

```
SELECT id FROM table1 WHERE ... ORDER BY display_order, name

SELECT name, description, ... WHERE id IN ([id's from first]) 
```

问题是第二个查询返回的结果与将 ID 放入 IN() 子句的顺序不同。

我发现的一种解决方案是将所有 ID 放入带有自动递增字段的临时表中，然后将其加入到第二个查询中。

有更好的选择吗？

**注意：**由于第一个查询是“由用户”运行的，而第二个查询是在后台进程中运行的，因此无法使用子查询将 2 合为 1 查询。

我正在使用 MySQL，但我认为让它注意其他数据库的选项可能会很有用。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2008-12-28T22:25:38.367

使用 MySQL 的[`FIELD()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)功能：

```
SELECT name, description, ...
FROM ...
WHERE id IN([ids, any order])
ORDER BY FIELD(id, [ids in order]) 
```

`FIELD()`将返回等于第一个参数（除了第一个参数本身）的第一个参数的索引。

`FIELD('a', 'a', 'b', 'c')`

将返回 1

`FIELD('a', 'c', 'b', 'a')`

将返回 3

`IN()`如果您以相同的顺序将 id 粘贴到子句和`FIELD()`函数中，这将完全符合您的要求。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2011-12-01T09:31:06.603

请参阅以下如何获取排序数据。

```
SELECT ...
  FROM ...
 WHERE zip IN (91709,92886,92807,...,91356)
   AND user.status=1
ORDER 
    BY provider.package_id DESC 
     , FIELD(zip,91709,92886,92807,...,91356)
LIMIT 10 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-12-28T23:19:39.117

想到的两个解决方案：

1.  `order by case id when 123 then 1 when 456 then 2 else null end asc`

2.  `order by instr(','||id||',',',123,456,') asc`

（`instr()`来自甲骨文；也许你有`locate()`或`charindex()`类似的东西）

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-12-07T15:42:04.057

如果您想使用**MS SQL Server 2008+**中的查询输入的值对查询进行任意排序，可以通过动态创建表并像这样进行连接（使用 OP 的命名法）来完成。

```
SELECT table1.name, table1.description ... 
FROM (VALUES (id1,1), (id2,2), (id3,3) ...) AS orderTbl(orderKey, orderIdx) 
LEFT JOIN table1 ON orderTbl.orderKey=table1.id
ORDER BY orderTbl.orderIdx 
```

如果您将 VALUES 语句替换为执行相同操作但在 ANSI SQL 中的其他语句，那么这应该适用于任何 SQL 数据库。

**注意：** 创建的表中的第二列（orderTbl.orderIdx）在查询大于100左右的记录集时是必需的。我最初没有 orderIdx 列，但发现结果集大于 100 时，我必须按该列显式排序；无论如何，在 SQL Server Express 2014 中。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-05T08:56:14.097

```
SELECT ORDER_NO, DELIVERY_ADDRESS 
from IFSAPP.PURCHASE_ORDER_TAB 
where ORDER_NO in ('52000077','52000079','52000167','52000297','52000204','52000409','52000126') 
ORDER BY instr('52000077,52000079,52000167,52000297,52000204,52000409,52000126',ORDER_NO) 
```

工作得很好

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-01-30T08:38:33.540

Ans 获取已排序的数据。

```
SELECT ...
FROM ...
ORDER  BY FIELD(user_id,5,3,2,...,50)  LIMIT 10 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-12-29T07:02:59.417

IN 子句描述一组值，并且集合没有顺序。

您的连接然后在`display_order`列上排序的解决方案是最接近正确的解决方案；其他任何东西都可能是特定于 DBMS 的 hack（或者正在使用标准 SQL 中的 OLAP 函数做一些事情）。当然，连接是最接近可移植的解决方案（尽管使用`display_order`值生成数据可能会出现问题）。请注意，您可能需要选择排序列；这曾经是标准 SQL 中的一个要求，尽管我相信它在不久前作为一项规则被放宽了（可能早在 SQL-92 之前）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-11-24T07:10:15.323

使用 MySQL [FIND_IN_SET](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_find-in-set)函数：

```
 SELECT * 
    FROM table_name 
   WHERE id IN (..,..,..,..) 
ORDER BY FIND_IN_SET (coloumn_name, .., .., ..); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-31T23:54:19.700

对于 Oracle，John 使用 instr() 函数的解决方案有效。这是有效的解决方案略有不同 - `SELECT id FROM table1 WHERE id IN (1, 20, 45, 60) ORDER BY instr('1, 20, 45, 60', id)`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-08-16T10:13:33.047

我只是尝试这样做是我们没有 FIELD() 的 MS SQL Server：

```
SELECT table1.id
... 
INNER JOIN
    (VALUES (10,1),(3,2),(4,3),(5,4),(7,5),(8,6),(9,7),(2,8),(6,9),(5,10)
    ) AS X(id,sortorder)
        ON X.id = table1.id
    ORDER BY X.sortorder 
```

请注意，我也允许重复。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-28T23:50:39.787

我的第一个想法是编写一个查询，但您说这是不可能的，因为一个由用户运行，另一个在后台运行。您如何存储要从用户传递到后台进程的 ID 列表？为什么不把它们放在一个临时表中，用一列来表示顺序。

那么这个怎么样：

1.  用户界面位运行并将值插入到您创建的新表中。它将插入 id、位置和某种工作编号标识符）
2.  作业号被传递给后台进程（而不是所有的id）
3.  后台进程在步骤 1 中从表中进行选择，然后您加入以获取所需的其他信息。它使用 WHERE 子句中的作业编号并按位置列排序。
4.  后台进程完成后，会根据作业标识符从表中删除。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-10-23T18:30:36.810

我认为您应该设法以一种您只需进行联接的方式存储您的数据，这将是完美的，所以没有黑客和复杂的事情发生。

例如，我有一个“最近播放”的曲目 ID 列表，在 SQLite 上我只是这样做：

```
SELECT * FROM recently NATURAL JOIN tracks; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-28T22:17:27.683

试一试：

```
SELECT name, description, ...
WHERE id IN
    (SELECT id FROM table1 WHERE...)
ORDER BY
    (SELECT display_order FROM table1 WHERE...),
    (SELECT name FROM table1 WHERE...) 
```

WHERE 可能需要稍作调整才能使相关子查询正常工作，但基本原则应该是合理的。

# java - 我是否应该为我在 Java 中的所有数据库插入使用 PreparedStatements？

> ID：396749
> 
> 赞同：5
> 
> 时间：2008-12-28T22:11:22.530
> 
> 标签：java, mysql, connection, prepared-statement

在 Java 中将变量插入数据库之前转义变量的推荐方法是什么？

据我了解，我可以使用 PreparedStatement.setString() 来转义数据，但是如果我不打算再次运行相同的查询，PreparedStatement 似乎有些不切实际。有没有更好的方法可以在不准备每个查询的情况下做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-12-28T22:21:58.030

是的，对所有事情都使用准备好的语句。

1.  它们被解析一次。

2.  它们不受 SQL 注入攻击的影响。

3.  它们是更好的设计，因为您必须考虑您的 SQL 及其使用方式。

如果您认为它们只使用一次，那么您就没有看到大局。总有一天，您的数据或您的应用程序会发生变化。

* * *

**编辑。**

为什么准备好的语句会让你想到你的 SQL？

*   当你组装一个字符串（或简单地执行一个文本块）时，你并没有创建一个新`PreparedStatement`对象。您只是在执行 SQL——它可以非常随意地完成。

*   当您必须创建（和保存） a`PreparedStatement`时，您必须稍微考虑一下封装和责任分配。语句的准备是在进行任何 SQL 处理之前的有状态事件。

额外的工作很小，但并非微不足道。这就是人们开始考虑 ORM 和数据缓存层的原因，以及类似的东西来优化他们的数据库访问。

使用准备好的语句，数据库访问不那么随意，更有意。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-28T22:37:03.930

您永远不应该使用字符串连接自己构造 SQL 查询。在构建 SQL 查询时，您永远不应该手动转义变量/用户数据。所需的实际转义取决于您的底层数据库，并且在某些时候有人会忘记转义。

关键是：使用准备好的语句，*不可能*创建 SQL 可注入语句。通过自定义转义，这是可能的。选择是显而易见的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-28T22:21:06.833

准备一份声明并不那么昂贵。它比大多数替代品更安全。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-29T02:04:11.017

我听说 PreparedStatement 比普通的 Statement 花费了一些额外的开销，如果我没有将用户输入连接到我的查询中，它应该是安全的。这可能是真的，但额外的成本并没有那么多，而且 SQL 查询会随着时间而变化。如果您今天开始使用 Statement 是因为您已经向自己证明了您的查询是防注入的，那么您将在维护程序员更改 SQL 以接受用户输入但不接受用户输入的那一天为失败做好准备考虑将该语句更改为 PreparedStatement。我的建议是始终使用 PreparedStatement 来避免麻烦，然后才能找到您。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-29T03:33:10.197

Even better, don't use the JDBC API directly, because it's so error-prone (e.g. failing to properly clean up all resources in all cases). Use a JDBC helper object such as Spring's JdbcOperations interface, which considerably reduces the size and bugginess of your code. If you only use Spring for this one feature, you've still done yourself a massive favour compared to using the JDBC API directly.

# network-programming - UDP广播还是IP多播？

> ID：396753
> 
> 赞同：10
> 
> 时间：2008-12-28T22:15:12.397
> 
> 标签：network-programming, broadcast

如果必须实现网络广播，您会在新应用程序中使用 UDP 广播还是 IP 多播？为什么？

您使用这两种方法遇到的优点和缺点是什么？（尤其是与 VPN、不同子网、各种路由器等有关的问题。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-28T22:27:48.800

组播的缺点是路由器和 NAT 不能很好地支持它。如果您的所有客户端都在同一个网络上，并且只有简单的网桥，那么多播效果很好，并且可以避免不属于该组的机器的广播寻址开销。如果路由器支持 IGMP 并正确传播 TTL，它可以在本地网络上工作。已经尝试在 Internet 上进行多播，例如[Mbone](http://en.wikipedia.org/wiki/Mbone)，并取得了不同程度的成功。他们中的大多数使用某种隧道绕过网桥和不兼容的路由器。

然而，对多播数据包的一个警告是，如果有任何 WiFi 连接[，接入点将对多播数据包使用尽可能低的比特率](http://www.wi-fiplanet.com/tutorials/article.php/3433451)，并且需要来自所有客户端的确认，即使是那些不属于多播组的客户端。不参与的客户和电池寿命也有缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T22:22:59.760

选择哪个最合适取决于应用程序的性质和运行它的网络的配置——没有硬性或快速的规则。

因此，我也不会强制执行 - 我会允许配置广播地址。

如果用户在 224.0.0.0/4 范围内配置了一些东西，那么它就是多播，否则就是广播。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T23:41:50.803

多播的行为方式几乎但不完全不同于其他所有类型的网络流量。您的系统和网络管理员不会感谢您强迫他们这样做。这通常是巫术，如果可以的话，最好避免 IMO。

# c# - 何时在方法上使用复数与集合词

> ID：396756
> 
> 赞同：3
> 
> 时间：2008-12-28T22:15:27.717
> 
> 标签：c#, naming-conventions, design-patterns

我正在为一个模块创建一个 API，在我的类中创建了几个方法之后，我问了自己这个问题。

现在，作为一个例子，我正在这样做：

```
public Company GetMonitoredCompany( String companyName ) { ... }
public List<Company> GetMonitoredCompanies( ) { ... } 
```

但我意识到，有好几次我使用其他 API/服务，有时他们的名称中有**Collection**，可能像：

```
public List<Company> GetMonitoredCompanyCollection( ) { ... } 
```

有这个规则吗？一种模式？或者任何一种方式都可以？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-28T22:21:54.117

使用最短、最简单的名称，清楚地表明方法的目的。并在您的项目中保持一致。

在这个例子中，如果没有其他考虑，我会使用这个名字：

> 获取监控公司

因为它更短更清晰。

（我也会返回一个只读的 ICollection 或 IEnumerable ，除非你有特定的理由不这样做。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T22:21:47.597

由你决定。但我建议您对整个项目采用相同的约定......我更喜欢第一种方式（GetMonitoredCompanies）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T22:37:11.650

如果它可能返回多个值（集合、数组等），请使用复数 (GetMonitoredCompanies)，否则使用单数。不要在名称中包含返回的数据类型。这只是在寻找您更改返回数据类型并忘记重命名方法的麻烦，从而造成疯狂的混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T23:14:05.120

当仅使用复数来区分集合时，我发现它非常令人困惑。我通常在返回集合时使用 List 而不是 Get，所以示例是

```
ListMonitoredCompanies 
```

这使得使用智能感知变得非常容易，因为添加、更新、删除、列出和获取函数都有自己的起始字母。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-28T22:27:23.060

永远不要做收藏的事情——除非你觉得它增加了重要的意义。现代工具能够轻松一目了然地告诉您期望的返回类型。更改返回类型时会发生什么？您要么留下错误的函数名称，要么必须在整个代码中更改它（尽管您可能无论如何都需要这样做，但如果您是子类等，您可能不需要这样做）。

出于同样的原因，匈牙利符号（有争议地）在高级语言中不再特别有用。

在所有情况下，在您的代码中保持一致。

哦，别傻了。我有一个同事（我认为是在烦恼的时刻）按照*FunctionThatLoadsTheTotalFromFileNumberCount*调用他的函数，试图传达函数返回类型（*Number*），意思是（*Count*），它是一个函数（*Function*）以及它是什么确实做到了，相当冗长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T22:29:17.813

对于这种情况，我将复制 .NET Framework 命名。例如[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)和[Type.GetMembers](http://msdn.microsoft.com/en-us/library/k2w5ey1e.aspx)并使用复数形式。除非这样做会使代码不清楚，显然。

# windows - MOUNTVOL.EXE 的编程接口

> ID：396766
> 
> 赞同：1
> 
> 时间：2008-12-28T22:22:11.230
> 
> 标签：windows, usb

Windows 中的 MOUNTVOL 命令是否有任何编程接口？我想要做的是从 mountvol 获取输出（即使我必须从命令行解析它），这给了我驱动器列表及其类似 GUID 的路径 (\\?\Volume{...} ) 并根据该路径获取设备信息（是 USB 驱动器、VENDOR_ID 等）。任何有关获取该方法或替代方法（在 Win98+ 中有效）的信息将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T22:30:05.520

您应该能够在 MSDN Library 的“Volume Management Functions”部分找到所需的 API 调用：

[http://msdn.microsoft.com/en-us/library/aa365730(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa365730(VS.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-29T15:17:47.700

您可以在 Adv 上询问。Win32 api新闻组（经典问题）：news://comp.os.ms-windows.programmer.win32（Mountvol源码等）

# java - GWT 的最佳数据绑定解决方案

> ID：396786
> 
> 赞同：24
> 
> 时间：2008-12-28T22:37:38.810
> 
> 标签：java, data-binding, gwt

您是否曾经为 GWT 使用过许多半生不熟的数据绑定解决方案之一？如果是这样，它的效果如何？

我想停止为 GWT 滚动我自己的绑定，但在数据绑定领域没有明显的赢家。

我更喜欢使用未来的东西，例如 GWT Incubator，但那里还没有。

我使用 GWTDesigner 并且喜欢它，但它似乎也没有解决方案。

它是一个非常基本的缺失功能。您知道 GWT 团队是否计划为此添加支持？在那种情况下，也许我会等。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-02-28T12:02:15.520

如果现在对此有任何疑问，您应该使用 GWT 编辑器：

[http://www.gwtproject.org/doc/latest/DevGuideUiEditors.html](http://www.gwtproject.org/doc/latest/DevGuideUiEditors.html)

将来某个时候也会支持 jsr 303 验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-11-04T12:10:34.310

您可以查看[http://code.google.com/p/gwt-pectin/](http://code.google.com/p/gwt-pectin/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-10T05:56:18.633

SmartGWT ( [http://www.jroller.com/sjivan/entry/smartgwt_1_0_released](http://www.jroller.com/sjivan/entry/smartgwt_1_0_released) ) 是产品 smartclient 的 GWT API。他们有一个很好的数据绑定解决方案，因为它在构建时考虑到了服务器端集成。但缺点是它不是一个纯原生的 GWT 框架。它是另一个产品（智能客户端框架）的 JSNI 包装器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-03T10:30:49.080

如果它的 UI 数据绑定到模型（即文本框绑定到某个模型对象的属性），那么 GWT 有一个称为 UIBinder 的库功能。它显然还没有完全准备好用于生产（因此未发布），但 google wave 团队正在使用它（并且看起来它工作得很好）。查看此页面以获取一些信息[http://code.google.com/p/google-web-toolkit-incubator/wiki/UiBinder](http://code.google.com/p/google-web-toolkit-incubator/wiki/UiBinder)

如果您谈论的是 GWT RPC 从服务器返回模型对象（例如休眠对象），那么其他地方提到的[Gilead](http://gilead.sourceforge.net)可能值得一看——尽管我从未有过任何个人经验。

还有另一种方法，即使用 Javascript Object Overlays 将 json 转换为在 GWT 中使用的等效类模型（适用于像 grails 这样可以轻松生成 json 的框架，但它们的域模型与 RPC 不兼容）。查看这些博客文章，了解有关[http://raibledesigns.com/rd/entry/json_parsing_with_javascript_overlay](http://raibledesigns.com/rd/entry/json_parsing_with_javascript_overlay)的一些提示（以及[http://googlewebtoolkit.blogspot.com/2008/08/getting-to-really-know-gwt-part -2.html](http://googlewebtoolkit.blogspot.com/2008/08/getting-to-really-know-gwt-part-2.html) )

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-17T07:58:41.270

我建议你试试 HexaBinding，它是非侵入性的，只专注于 dara 绑定。这是链接：[https ://github.com/learno/hexa.tools/blob/master/hexa.binding/README.md](https://github.com/ltearno/hexa.tools/blob/master/hexa.binding/README.md)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-17T06:16:26.893

查看[gwt 的 eclipse 数据绑定 3.5](http://tomsondev.bestsolution.at/2009/06/27/eclipse-databinding-3-5-for-gwt/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-03T11:10:35.783

几分钟前，我刚刚在一个邮件列表中读到它，所谓的[GWTEventService 1.0](http://code.google.com/p/gwteventservice/)已经发布。我不完全确定，如果那是你想要的，但这对我来说听起来很有希望。

让我引用该网站：

> GWTEventService 是一个基于事件的客户端-服务器通信框架。它使用 GWT-RPC 和 Comet / server-push 技术。**客户端提供了一个高级 API，可以将侦听器注册到服务器，就像注册到 GUI 组件一样**。事件可以添加到服务器端的上下文/域中，客户端的侦听器会收到有关传入事件的通知。服务器端完全独立于客户端实现并且是高度可配置的。可以定义域来决定哪些事件对不同的上下文很重要。

也许这对你来说是一个解决方案。我会试一试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-14T23:35:00.660

[Gilead](http://noon.gilead.free.fr/gilead/index.php?page=gwt)，前身为 Hibernate4GWT，“定义了一个 PersistentRemoteService 类，继承自 RemoteServiceServlet 以处理无缝持久的实体管理。” 几年来，它一直在积极开发中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-03-01T01:09:30.523

[在http://www.gdevelop.com/w/gwtxp/](http://www.gdevelop.com/w/gwtxp/)查看 gwtXP 。

gwtXP 允许您在 XML 中声明 UI 元素、数据绑定和操作处理程序。例子：

*   声明 UI 元素：<g:label text="User Name:"/>
*   声明数据绑定（使用 Eclipse 数据绑定）：<g:textBox text="${user.userName}"/>
*   支持值绑定和列表绑定。
*   声明动作处理程序：<g:button text="Save" onClick="#{saveUser}"/>

20010 年 3 月 6 日更新：参见[http://www.gdevelop.com/w/blog/2010/03/06/data-binding-in-gwt/上的帖子](http://www.gdevelop.com/w/blog/2010/03/06/data-binding-in-gwt/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-08-11T19:55:30.393

使用 google-web-toolkit-incubator [http://code.google.com/p/google-web-toolkit-incubator/wiki/Downloads?tm=2](http://code.google.com/p/google-web-toolkit-incubator/wiki/Downloads?tm=2)进行数据绑定。uface 没有编译版本，他们的源代码不会按照他们的指示编译。（此条目上方的条目是指 uface）。

# browser - Web浏览器“歧视”好吗？

> ID：396789
> 
> 赞同：16
> 
> 时间：2008-12-28T22:39:04.753
> 
> 标签：browser

根据用户的网络浏览器添加“特殊”但不必要的内容是否可以接受？例如，是否可以显示以下内容：

![******.com 与 Firefox 等现代浏览器配合得更好](https://farm4.static.flickr.com/3207/3145519128_af9b4ed2f7.jpg)

在所有 IE 用户的网页顶部？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-28T22:42:15.527

谁可以接受？我个人认为这是一个相当蹩脚的网站的标志——它就在那里，上面有 1998 年的那个小建筑人标志（还记得那个吗？）。

如果您愿意，您当然可以，但最好使您的网站尽可能兼容，并使用[YUI](http://developer.yahoo.com/yui/)和[jQuery](http://www.jquery.org)等工具使您的网站与浏览器更加无关。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-28T22:42:00.113

这是两个不同的东西。几乎每个专业的 Web 应用程序都在一定程度上了解用户的浏览器，并适应它们，因此体验几乎相同。显示“效果更好”的免责声明是一种承认，您无法使您的网站与大多数浏览器一起工作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-28T22:43:58.033

在为某些浏览器添加“特殊内容”方面，我建议使用一种称为渐进增强的方法（[http://en.wikipedia.org/wiki/Progressive_Enhancement](http://en.wikipedia.org/wiki/Progressive_Enhancement)）。基本原则是，只要核心内容在较旧或功能较弱的浏览器上可供其他用户使用，就可以为更现代的 Web 浏览器构建特定功能。

雅虎创造了一种浏览器支持理念，称为浏览器支持等级 ( [http://developer.yahoo.com/yui/articles/gbs/](http://developer.yahoo.com/yui/articles/gbs/) )，它源自渐进增强原则。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-28T22:42:17.553

它肯定会激怒游客。他们可能不会理解 Firefox 是什么以及如何使用它。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-12-28T22:45:46.627

这取决于“歧视”的类型和这样做的原因。

[Paypal 阻止旧浏览器作为一种安全措施](http://www.infoworld.com/article/08/02/28/PayPal-warns-Steer-clear-of-Apple-Safari-browser_1.html)。对我来说，这是完全有效的——尤其是在处理金融交易时。

另一方面，我曾使用 IE 访问过网站，但经常出现侵入性弹出窗口，上面写着“我们认为您应该升级到 Firefox，它是一个更好的浏览器”。没有理由。只是势利。那个网站很快就关闭了。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-29T00:03:20.777

不，这是不恰当的、自以为是的和傲慢的。尤其让我印象深刻的是，当我使用 IE 访问 Firefox 时，这些网站展示了一个比你更神圣的广告，赞美自由软件运动的奇迹，同时诋毁任何敢于发布专有软件的人。它让我发疯。我不会继续访问此类网站。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-12-29T00:25:39.607

建议您的用户下载替代浏览器是一个坏主意，他们在您的网站上阅读网站主题，而不是被要求获得替代浏览器。当他们对该浏览器的体验不佳时，这将是您的网站提出的错误，您可能会失去这些客户。（此外，每个外部链接都会将访问者从您的网站吸引走）

例如：我讨厌看到“获得更好的浏览器！下载 Firefox”。消息，无论我使用的是 IE8 Partner Build、Firefox 3.1 Beta 2 还是其他浏览器，如 Opera、Safari。这些浏览器都很好，没有理由在它们之间切换。你最终会激怒人们，将他们发送给他们完全没有经验的链接。

请注意，有一些精通计算机的人，下载 Firefox/Linux/... 没有任何好处；-)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-12-29T05:29:02.663

歧视主流浏览器是不必要的，也是完全不可接受的。我什至不确定这是一个问题，除非你*想*惹恼用户。不使用您选择的浏览器的人可能会访问您的网站。这是你必须忍受的事情。除非您的网站是世界上最伟大的网站（tm），否则人们不会更改浏览器来适应您。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-12-28T22:43:57.677

这取决于网站是什么，以及目标受众是谁。

如果是为了生意，那我肯定会说不，这看起来很业余。无论用户浏览器的功能如何，专业网站都无法正常运行也很糟糕，特别是当其中一些用户可能正在使用屏幕阅读器来帮助视障用户时。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-12-28T22:46:01.977

这取决于您的网站的设计目的以及您为什么要针对某些浏览器进行定位。

如果您正在构建类似内部 Web 应用程序的东西，那么用户很可能无论如何都会使用受限浏览器，因此针对特定浏览器进行设计并不是真正的问题。

但是，如果您正在做一个公共网站，这不是一个好主意。FireFox 仍然没有足够大的市场份额成为*目标*浏览器。

您的网站在每个浏览器中都 100% 完美是不现实的，但应该始终针对大型网站：

*   IE6+
*   火狐 2+
*   野生动物园 3

任何好的 JavaScript 库都应该可以在三种主要浏览器上运行（或者至少可以很好地降级）。

作为一个 Opera 用户，我发现没有什么比访问一个网站并发现它完全失败而我不得不拿出另一个网站更烦人的了。一般来说，我不会，那个网站会失去我的流量。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-28T22:45:07.347

这不一定是错的。但这样的事情是旧世界的产物，浏览器日夜相互之间。

没有理由不努力完全符合 IE6 及更高版本。

如果你想要这样的信息，请善待你的话。向用户介绍 Firefox，而不是告诉他他的浏览方法低劣。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-28T23:14:10.047

首先，应该非常小心地处理用户歧视。您可能更喜欢 Firefox/Opera/Safari，因为它更安全、技术更优越或其他什么，但您可能会因此失去几个用户（请记住，Firefox 直到最近才达到 20% 的使用份额）。

但假设您意识到这一点，这取决于您正在考虑的用户歧视类型。如果页面仍然适用于 Internet Explorer 用户，“**.com 与 Firefox 等现代浏览器配合得更好”应该没问题（但提供 Firefox 的下载链接）。

此外，您可能需要考虑将用户限制为最新版本。由于您不想支持 IE，因此您可以仅添加对 IE7 的支持，然后在 IE8 发布后仅支持它，从而迫使用户更新其浏览器版本或切换到 Firefox。这也可能是 Internet Explorer 歧视风险较小的模型。

这一切都归结为：

1.  有多少用户会受到歧视？
2.  这种歧视会阻止他们使用您的服务吗？

尝试区分尽可能少的用户，并尝试为这些用户提供替代服务，以便他们无论如何都会使用您的网站。毕竟，您希望用户使用您的网站，对吗？在这种情况下，Web 浏览器歧视与其造成的用户流失一样是可以接受的。如果没有用户丢失，那很好。如果没有，看看这个数字是否大到足以伤害你。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-28T23:51:32.127

虽然我是 Firefox（或 Chrome）的狂热用户并且对潜在的情绪表示同情，但我认为您应该谨慎描述问题的方式。“现代浏览器”术语已加载。我会考虑使用一个短语，例如

> 由于您使用的网络浏览器，本网站的某些功能不可用。点击这里查看更多信息。
> 
> 本网站的某些功能不适用于您的网络浏览器。点击这里查看更多信息。

为他们提供获取更多信息的地方至关重要。该页面可以为他们提供有关在何处下载替代浏览器等信息。重要的是不要贬低他们的浏览器。许多人不允许更改他们的浏览器。（我很幸运：我不必在一个月内运行 MSIE 超过一次，也许两次。其余时间，我使用 Firefox - 或 SO 的 Chrome。）

理想情况下，该网站对每个人都一样。如果有些位根本无法用于 MSIE 或 Netscape Navigator 或其他任何旧版本的版本，那么请使用谨慎的中性措辞和解释来源。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-28T22:43:07.647

恕我直言 - 是的，但要小心你的措辞，只有在它是真实的时候才说出来，并首先尽力确保它*不是*真实的，即你的网站应该是 x-browser 安全的

而且您可能不能说选择在任何专业编写的内容上执行此操作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-29T05:19:19.453

当然是的。它是您的网站。如果人们不喜欢它，他们就不会回来。

您可能希望他们回来或正确使用您的网站，因此您可能想考虑如何支持它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-08-17T21:07:50.807

我认为任何想要获得 Firefox 的人都已经拥有了。可悲的是，由于许多工厂制造的计算机运行 Windows，IE 更名为“Internet”，许多没有运行 Firefox、Chrome、Safari（或任何其他我忽略提及的现代浏览器）的人不明白什么是浏览*器*。因此，将“在 Firefox 中运行得更好”会打勾，因为他们不知道 Firefox 是什么。我认为开源运动已经变得有点宗教化了，鼓吹不同的浏览器等等。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-03-03T16:54:02.007

浏览器歧视，IMO 是疯子，适当处理浏览器**版本**，尤其是。如果用户使用的是真正旧版本的浏览器，则可能有用/有建设性。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-01-15T15:53:08.700

我正在以另一种方式看待歧视。我有一个网上银行帐户，他们最近在任何浏览器上通过检查我的 IP 地址来歧视我，如果它与上次不同，他们声称他们不“识别我的电脑“并强迫我通过一个复杂的计划来获取一个识别码以继续进行。我有动态 IP 地址分配，它每天都在变化。该银行可以检查 IP 地址的前两个字节，以查看它始终是定义我的 ISP 的相同“签名”。但是不，他们检查了整个 IP 地址，所以我被“歧视”了，因为我将 DHCP 与动态 IP 地址一起使用。对我来说，这是另一种形式的歧视。

# python - 桌面图形 - 或“皮肤”窗口

> ID：396791
> 
> 赞同：3
> 
> 时间：2008-12-28T22:41:47.680
> 
> 标签：python, graphics, desktop, skinning, shaped-window

我正在寻找一种在桌面上绘制动画的方法。没有窗框和透明背景。

我在 Windows XP 中使用 Python，但它不必是跨平台的，尽管它会是一个不错的奖励。

有谁知道可以做到这一点的python库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-29T00:25:56.517

如果你想要一个无框窗口，有几个选择。例如，pygame 可以使用以下标志初始化：

```
pygame.init()
screen = pygame.display.set_mode(size=(640,480), pygame.NOFRAME) 
```

但是，如果您正在寻找透明表面，您的问题并不清楚。

# asp.net - JavaScript 包含声明找不到文件

> ID：396806
> 
> 赞同：0
> 
> 时间：2008-12-28T22:47:14.143
> 
> 标签：asp.net, javascript

我必须在这里忽略一些非常简单的东西，但是对于我的生活，我无法从我的母版页中正确包含 JavaScript 文件。我在`<head>`元素中的声明看起来很正常：

```
<head runat="server">
    <title>Untitled Page</title>
    <script type="text/javascript" src="/_private/scripts/jquery-1.2.6.min.js"></script>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

但是当页面加载时，js文件根本就不见了。相反，当我们尝试扩展该脚本元素时，我们在 Firebug 中得到的只是页面的 HTML。

我之前已经无数次成功地包含过这样的 js 文件，据我所知，我再次以完全相同的方式完成了它。这几乎不是火箭科学，所以我一定忽略了一些显而易见的东西，但如果我能弄清楚它是什么，那该死的。

无奈之下，我转向你。有任何想法吗？

最后一点：查看页面的源代码显示了一个非常不可能的表单操作。即使直接浏览到默认页面，表单操作中也会包含一个 ReturnUrl，并且该 ReturnUrl 是缺少脚本的位置：

```
<form name="aspnetForm" method="post" action="default.aspx?ReturnUrl=%2f_private%2fscripts%2fjquery-1.2.6.min.js" onsubmit="javascript:return WebForm_OnSubmit();" id="aspnetForm"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-28T22:55:15.470

如果您在 Visual Studio 中运行它，则链接可能不起作用。默认情况下，VS 将站点提供为类似[http://localhost:3456/projectname/](http://localhost:3456/projectname/) ... 所以 /_private 实际上不会位于根目录。

您可以在项目/解决方案的属性中更改它，或使用其他一些方法来动态重写脚本路径。

至于关于表单操作的第二点，您的 js 文件是否有可能位于受保护的目录中？看起来像登录/返回路径 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-28T22:59:54.180

该表单 URL 确实很奇怪，但是您是否尝试过使用“~/”根结构引导您的路径？

# macos - 为什么我安装的 MacFUSE NTFS vol 是只读的？

> ID：396810
> 
> 赞同：1
> 
> 时间：2008-12-28T22:53:25.830
> 
> 标签：macos, ntfs, volume, macfuse

我从[MacFUSE](http://code.google.com/p/macfuse/)网站得到的印象是，当您安装它并连接一个 NTFS 卷时，它将是可写的。但是，我安装的卷是只读的。这是`mount`...的一些输出

我正在谈论的 NTFS 外部 USB 驱动器：

```
/dev/disk1s1 on /Volumes/SATA160 (local, nodev, nosuid, read-only) 
```

OS X 格式的外部 USB 驱动器（用于比较）：

```
/dev/disk3s3 on /Volumes/USB_ext_drive_40_GB (local, nodev, nosuid, journaled) 
```

我需要在某处设置一些东西吗？编辑配置文件？

我在 OS 10.4 (Tiger) 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-28T23:02:50.820

您是否还安装了[NTFS-3G](http://macntfs-3g.blogspot.com/)驱动程序？

# screen-scraping - 防止屏幕刮擦

> ID：396817
> 
> 赞同：31
> 
> 时间：2008-12-28T22:59:01.013
> 
> 标签：screen-scraping

继我关于*[屏幕抓取合法性的](https://stackoverflow.com/questions/396778/legalities-of-screen-scraping)*问题之后，即使它是非法的，人们仍然会尝试，所以：

**可以采用哪些技术机制来*防止*或至少抑制屏幕刮擦？**

哦，只是为了笑容和让生活变得困难，保留搜索引擎的访问权限可能会很好。我很可能在这里扮演魔鬼的拥护者，但有一个严重的潜在问题。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2008-12-28T23:04:14.640

你无法阻止它。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-08-27T17:11:43.477

我在这里写了一篇关于这个的博客文章：http: [//blog.screen-scraper.com/2009/08/17/further-thoughts-on-hindering-screen-scraping/](http://blog.screen-scraper.com/2009/08/17/further-thoughts-on-hindering-screen-scraping/)

转述：

如果您在互联网上发布信息有人可以得到它，这只是他们想要投入多少资源的问题。提高所需资源的一些方法是：

**图灵测试**

Turning Test 最常见的实现是旧的 CAPTCHA，它试图确保人类阅读图像中的文本，并将其输入到表单中。

我们发现大量网站实施了非常弱的验证码，只需几分钟即可完成。另一方面，有一些非常好的图灵测试实现，我们会选择不处理，但复杂的 OCR 有时可以克服这些，或者许多公告板垃圾邮件发送者有一些巧妙的技巧来克服这些。

**数据作为图像**

有时您知道数据的哪些部分是有价值的。在这种情况下，将此类文本替换为图像是合理的。与图灵测试一样，有可以读取它的 OCR 软件，我们没有理由不能保存图像并让其他人稍后读取。

然而，通常情况下，将数据列为没有文本替代的图像违反了美国残疾人法案 (ADA)，并且可以通过拨打公司法律部门的几个电话来解决。

**代码混淆**

使用 JavaScript 函数之类的东西在页面上显示数据，尽管它不在 HTML 源代码中的任何位置，这是一个很好的技巧。其他示例包括通过页面放置多产的、无关的评论或拥有以不可预知的方式排序的交互式页面（以及我认为使用 CSS 使显示相同的示例，无论代码的排列方式如何。）

**CSS 精灵**

最近我们遇到了一些情况，其中一个页面有一个包含数字和字母的图像，并且使用 CSS 只显示他们想要的字符。这实际上是前两种方法的组合。首先，我们必须获取主图像并读取那里的字符，然后我们需要读取站点中的 CSS 并确定每个标签指向的字符。

虽然这非常聪明，但我怀疑这也会与 ADA 发生冲突，尽管我还没有测试过。

**限制搜索结果**

我们想要获取的大部分数据都以某种形式存在。有些很容易，提交空白表格将产生所有结果。有些需要在表格中加上星号或百分比。最难的是那些每次查询只会给你这么多结果的那些。有时我们只是创建一个循环，将字母表中的字母提交到表单，但如果这太笼统，我们必须创建一个循环来提交所有 2 或 3 个字母的组合——即 17,576 个页面请求。

**IP过滤**

有时，勤奋的网站管理员会注意到来自特定 IP 地址的大量页面请求，并阻止来自该域的请求。但是，有许多方法可以通过备用域传递请求，因此这种方法通常不是很有效。

**网站修修补补**

抓取总是在 HTML 中删除某些内容。一些网站拥有不断调整其 HTML 的资源，以便任何刮擦都不断过时。因此，为不断变化的条件不断更新刮擦变得不划算。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-12-29T13:05:53.910

因此，一种方法是混淆代码（rot13 或其他东西），然后在页面中添加一些 javascript 来执行类似 document.write(unobfuscate(obfuscated_pa​​ge)) 的操作。但这完全摧毁了搜索引擎（可能！）。

当然，这实际上也不能阻止想要窃取您数据的人，但它确实使事情变得更加困难。

一旦客户端有了数据，游戏就结束了，所以你需要在服务器端查看一些东西。

鉴于搜索引擎基本上是屏幕抓取工具，事情很困难。*你需要看看好的*屏幕刮板和*坏*的屏幕刮板有什么区别。当然，您也只有普通的人类用户。所以这归结为一个问题，你如何在服务器上有效地将请求分类为来自*人类*、*好的*屏幕抓取工具或*坏*的屏幕抓取工具。

所以，开始的地方是查看你的日志文件，看看是否有一些模式可以让你有效地对请求进行分类，然后在确定模式后，看看是否有某种方式导致屏幕刮板*坏*了。分类，可以伪装*成人类*或*良好的*屏幕刮板。

一些想法：

*   您可能能够通过 IP 地址确定*好的*屏幕抓取工具..
*   您可以通过并发连接数、每个时间段的连接总数、访问模式等来确定爬虫与人工。

显然，这些都不是理想的或万无一失的。另一种策略是确定您可以采取哪些对人类不显眼的措施，但（*可能*）对爬虫来说很烦人。一个例子可能是减慢请求的数量。（取决于请求的时间紧迫性。如果他们实时抓取，这将影响他们的最终用户）。

另一方面是着眼于更好地为这些用户服务。显然，他们正在抓取，因为他们想要数据。如果您为他们提供一种简单的方法，可以直接以有用的格式获取数据，那么他们将更容易做到这一点，而不是屏幕抓取。如果有一种简单的方法，那么可以规范对数据的访问。例如：给请求者一个唯一的key，然后限制每个key的请求数以避免服务器过载，或者每1000个请求收费等。

当然，仍然有人想要敲诈你，然后可能还有其他方法可以抑制，但他们可能开始变得非技术性，并且需要说服法律途径。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-12-28T23:54:35.567

防止屏幕抓取非常困难，但如果您真的非常想要，您可以经常更改您的 HTML 或经常更改 HTML 标记名称。大多数屏幕抓取工具通过使用与标签名称的字符串比较或搜索特定字符串等的正则表达式来工作。如果您正在更改底层 HTML，它将使他们需要更改他们的软件。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-12-28T23:07:24.133

这将是非常难以预防的。问题是网页是*由*程序（您的浏览器）解析的，因此它们非常容易被抓取。您能做的最好的事情就是保持警惕，如果您发现您的网站被抓取，请阻止违规程序的 IP。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-12-28T23:48:16.093

根据定义，搜索引擎是屏幕抓取工具。因此，您所做的大多数使屏幕抓取变得更加困难的事情也会使索引您的内容变得更加困难。

表现良好的机器人会尊重您的 robots.txt 文件。您还可以阻止已知罪犯的 IP，或者在内容未发送给已知良好的机器人时将混淆的 HTML 标记添加到您的内容中。虽然这是一场失败的战斗。我推荐已知罪犯的诉讼途径。

您还可以在内容中隐藏识别数据，以便更轻松地追踪犯罪者。众所周知，百科全书会添加[虚构条目](http://en.wikipedia.org/wiki/Fictitious_entry)以帮助检测和起诉版权侵权者。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-08-21T09:43:23.377

不要阻止它，发现它并报复那些尝试的人。

例如，让您的网站保持开放以供下载，但传播一些理智的用户不会关注的链接。如果有人点击该链接，对于人类或其他可疑行为来说点击太快，请立即做出反应以阻止用户尝试。如果有登录系统，请阻止用户并就不可接受的行为与他联系。这应该确保他们不会再试一次。如果没有登录系统，而不是实际页面，则返回带有指向同一警告的虚假链接的大警告。

这确实适用于 Safari Bookshelf 之类的东西，其中用户复制粘贴一段代码或一章以邮寄给同事是可以的，而完全下载书籍是不可接受的。我很确定他们会检测到一些人何时尝试下载他们的书籍，阻止帐户并向罪魁祸首表明如果他再次尝试，他可能会遇到真正的麻烦。

打个非 IT 类比，如果机场安检只是让武器难以带上飞机，恐怖分子会想方设法偷偷溜过安检。但是，仅仅尝试就会让你陷入深深的麻烦，因此没有人会尝试并找到偷偷摸摸的方法。被抓到并受到惩罚的风险太高了。做同样的事情。如果可能的话。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-12-28T23:21:14.450

*防止？*——不可能，但你可以让它变得更难。

*抑制？*-- 可能，但您不会喜欢答案：为感兴趣的各方提供批量数据导出。

从长远来看，如果您发布它，您所有的竞争对手都会拥有相同的数据，因此您需要其他方式来使您的网站多样化（例如更频繁地更新它，使其更快或更易于使用）。如今，即使是谷歌也在使用用户评论等抓取信息，你认为你能做些什么呢？起诉他们并从他们的索引中启动？

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-22T18:22:44.143

最好的投资回报可能是添加随机换行符和多个空格，因为大多数屏幕抓取工具从 HTML 作为文本而不是作为 XML 工作（因为大多数页面不解析为有效的 XML）。

浏览器会忽略空格，因此您的用户不会注意到

```
 Price : 1
  Price :    2
  Price\n:\n3 
```

是不同的。（这来自我使用 AWK 抓取政府网站的经验）。

下一步是在随机元素周围添加标签以破坏 DOM。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-12-28T23:55:57.030

一种方法是创建一个获取文本和位置的函数，然后服务器端为文本中的每个字符生成 x, y pos，以随机顺序生成包含字符的 div。生成一个 javascript，然后将每个 div 定位在屏幕上的正确位置。在屏幕上看起来不错，但在后面的代码中，如果您不通过 javascript 进行抓取，则没有真正的顺序来获取文本（可以在每个请求中动态更改）

工作量太大，可能会有很多怪癖，这取决于您在网站上的文字数量和用户界面的复杂程度以及其他内容。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-28T23:07:54.960

鉴于任何网站的意图是发布（即公开）信息，我认为很少有人这样做。

*   当然，您可以在登录后隐藏您的数据，但这是一个非常适合情境的解决方案。

*   我见过的应用程序只会提供请求标头指示网络浏览器的内容（而不是说匿名或“雅加达”），但这很容易被欺骗，你会失去一些真正的人。

*   然后，您可能会接受一些报废，但如果请求以过高的速率来自同一个 IP，则不提供内容会使他们的生活变得难以克服。这受制于没有完全覆盖，但更重要的是存在“AOL 问题”，即一个 IP 可以覆盖*许多*独特的人类用户。

最后两种技术还严重依赖于流量拦截技术，这是不可避免的性能和/或财务支出。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-28T23:19:25.077

鉴于大多数网站都希望获得良好的搜索引擎排名，而搜索引擎是爬虫机器人，因此您可以做的事情并不多，这不会损害您的 SEO。

您可以创建一个完全加载 ajax 的网站或基于 Flash 的网站，这会使机器人更难，或者将所有内容隐藏在登录后面，这会使其更难，但是这些方法中的任何一种都会损害您的搜索排名并可能会惹恼你的用户，如果有人真的想要它，他们会找到方法的。

拥有无法被抓取的内容的唯一保证方法是不在网络上发布它。网络的本质是，当你把它放在那里时，它就在那里。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-28T23:59:23.297

如果您想要保护的信息不多，您可以即时将其转换为图片。然后他们必须使用 OCR，这样可以更容易地抓取另一个站点而不是你的站点。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-28T23:08:53.287

您可以检查访问您网站的客户的用户代理。一些第三方屏幕抓取程序有自己的用户代理，所以你可以阻止它。好的屏幕抓取工具会欺骗他们的用户代理，因此您将无法检测到它。如果您因为不想阻止合法用户而尝试阻止任何人，请小心:)

您可以期望的最好的结果是阻止人们使用不够聪明的屏幕抓取工具来更改他们的用户代理。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-28T23:12:36.043

我曾尝试“筛选”一些 PDF 文件，却发现它们实际上是以半随机顺序将字符放入 PDF 中的。我猜 PDF 格式允许您为每个文本块指定一个位置，并且它们使用了非常小的块（小于一个单词）。我怀疑有问题的 PDF 并没有试图阻止屏幕刮擦，而是他们使用渲染引擎做了一些奇怪的事情。

我想知道你是否可以做这样的事情。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-28T23:13:17.727

您可以将所有内容放在闪存中，但在大多数情况下，这会惹恼许多合法用户，包括我自己。它可以用于某些信息，例如股票价格或图表。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-12-29T21:50:42.277

我怀疑没有*好的*方法可以做到这一点。

我想您可以通过一种机制运行您的所有内容，将文本转换为使用 CAPTCHA 样式字体和布局呈现的图像，但这会破坏 SEO 并惹恼您的用户。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-07-12T04:06:48.967

好吧，在将内容从服务器推送到客户端之前，请删除所有 \r\n、\n、\t 并将所有内容替换为一个空格。现在您的 html 页面中有 1 行长。谷歌这样做。这将使其他人难以阅读您的 html 或 JavaScript。
然后您可以创建空标签并随机插入它们。遗嘱没有任何影响。
然后，您可以记录所有 IP 以及它们访问您网站的频率。如果您每次都看到一个准时到达，则将其标记为机器人并阻止它。
如果您希望搜索引擎进入，请确保不要理会它们。
希望这会有所帮助

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-01-15T18:55:55.973

使用[iText 库](http://itextpdf.com/)从您的数据库信息中创建 PDF 怎么样？与 Flash 一样，它不会使抓取变得不可能，但可能会使它变得更加困难。

内尔斯

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-07-09T20:24:51.773

老问题，但是 - 添加交互性会使屏幕抓取变得更加困难。如果数据不在原始响应中——比如说，你在页面加载后发出了一个 AJAX 请求来填充一个 div——大多数抓取工具都不会看到它。

For example- I use the mechanize library to do my scraping. Mechanize doesn't execute Javascript- it isn't a modern browser- it just parses HTML, let's me follow links and extract text, etc. Whenever I run into a page that makes heavy use of Javascript, I choke- without a fully scripted browser (that supports the full gamut of Javascript) I'm stuck.

This is the same issue that makes automated testing of highly interactive web applications so difficult.

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2010-08-25T11:54:53.737

I never thought that preventing print screen would be possible... well what do you know, checkout the new tech - sivizion.com. With their video buffer technology there is no way to do a print screen, cool, really cool, though hard to use ... I think they license the tech also, check it out. (If I am wrong please post here how it can be hacked.) Found it here: [How do I prevent print screen](https://stackoverflow.com/questions/448106/how-do-i-prevent-print-screen)

# google-maps - 对多个地址进行地理编码

> ID：396819
> 
> 赞同：19
> 
> 时间：2008-12-28T23:02:27.543
> 
> 标签：google-maps, geocoding, yahoo-maps

每个请求我需要对大约 200 个地址进行地理编码，并且每天执行大约 3,000 个请求。我将使用 PHP 做这个服务器端。我看过[如何将地址转换为纬度/经度？](https://stackoverflow.com/questions/98449/how-to-convert-an-address-to-a-latlon)，但找不到 Google Maps HTTP Request API 或 Yahoo Geocoding REST API（不能使用 JavaScript，因为这是服务器端）发送多个地址的方法。

我将主要使用它来根据坐标对地址进行排序，如果 API 支持，则为每个地址填写任何缺失的数据。这些地址将仅在美国。地理编码的地址将来自用户输入，因此可以是自由格式，例如“街道地址、邮政编码”或“城市、州”等。对于坐标而言，精度并不重要，比如在五百英尺左右。

是否有免费的 API 来处理这个问题？有没有办法让雅虎或谷歌在一个请求中做多个位置？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-28T23:36:41.017

我查看了 Google Maps API、Yahoo Maps Api、MapQuest API 和 Microsoft Virtual Earth API。这些免费服务都不允许批量地理编码。

但是，Google Maps api 每天允许 15,000 个 goecode。但是他们不喜欢你一次发送太多。他们建议在请求之间等待 200 毫秒。顺便说一句，他们通过 IP 地址跟踪您。

雅虎每天允许 5,000 个，也是一个易于使用的 api。Microsoft Virtual Earth 每天允许 5,000 个，但 api 文档令人头疼。

MapQuest 很奇怪，而且似乎没有给出好的结果（我所见过的最不准确的）。

我实际上已经设置了我的代码以在多个服务之间交替，因此我可以一次发出多个请求。这 - 有点 - 模拟批量编码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-28T23:10:41.630

[geocoder.us](http://geocoder.us/)会做你想做的事，但你可能在批量查找时遇到同样的问题。不过，他们会收费进行批量查找。

[GeoNames](http://www.geonames.org/)是否会通过大量原始数据或通过其[网络服务](http://www.geonames.org/export/web-services.html)提供足够的信息？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-08T20:06:54.627

[USC WebGIS Geocoder](https://webgis.usc.edu)提供了几个可以执行此操作的[地理编码 API 。](https://webgis.usc.edu/Services/Geocode/WebService/GeocoderWebService.aspx)它是免费的，允许从您的代码中进行批量查找，或者您可以上传数据库进行批量处理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-28T23:30:54.163

Mapquest 有一个允许批量地理编码的 API。但是，他们没有直接为 PHP 提供一个。但是您可以查看他们的协议文档[http://developer.mapquest.com/Library/SDK_Documentation/Protocols](http://developer.mapquest.com/Library/SDK_Documentation/Protocols)来自己实现它。他们可能将批量地理编码称为文档中的位置集合。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-29T00:28:35.263

这可能听起来很奇怪，但我不久前做了一个网站，客户希望用户只输入一个 zip，我们将提供剩余的数据。我使用了 yahoo 天气 api，当时它返回了一个包含所有天气数据的 xml 文件，而 ciy、state、zip 对美国的地址很有效

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T14:26:33.653

查看[http://www.torchproducts.com/tools/geocode](http://www.torchproducts.com/tools/geocode)以快速对地址列表进行地理编码

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T06:01:40.787

使用[GDirections](http://code.google.com/apis/maps/documentation/reference.html#GDirections.load)。它一次最多允许 25 个航路点，并为每个航路点返回一个地理编码位置。

# php - 将开发团队从 FTP 转换为版本控制系统

> ID：396830
> 
> 赞同：6
> 
> 时间：2008-12-28T23:09:04.693
> 
> 标签：php, version-control, development-environment

我在一个小型 LAMP 开发工作室工作，我的想法是完成代码并继续执行列表中的下一项。

该团队在 Zend Studio 5.5 中工作，通过 FTP 或 SFTP 连接到 Live 服务器。他们喜欢这一点的是他们部署代码的速度（因为它只是修改实时代码）。

但是，由于许多明显的原因，这当然不好。

我想将它们转移到版本控制系统（CVS、SVN 或任何其他工具），但问题是，我不是他们的资深人士，所以我需要一个胡萝卜让他们开始使用它。

我需要在他们的机器上构建什么样的设置，以便他们可以像往常一样编码？

我要做的是在我的机器上创建这个设置，然后展示它们。

我知道这有点不寻常，但它变成了我的热情，将他们的思维方式从通常的代码黑客行为转变为结构和优雅。谢谢。

更新（对于乔纳森莱弗勒的回答）：

1.  是的
2.  不
3.  是的，他们确实如此

还有一个问题，工作室制作了一个托管在数百个站点上的集中式 CMS 系统，他们需要修改各个站点，这些站点应该在主合成器中还是在他们自己的合成器中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-28T23:23:45.987

问题：

1.  您（他们）是否从未遇到过灾难，您（他们）需要恢复到网站的先前版本，但因为他们破坏了它而无法恢复？

2.  他们是否使用登台 Web 服务器来测试更改？

3.  如果没有在某处进行一些测试，他们肯定不会修改生产服务器中的代码吗？

我怀疑第一个的答案是“是的（他们经历过灾难）”，第二个的答案是“否”，我犹豫着猜测第三个的答案（但是，从它的声音来看，答案可能是“是的，他们真的这样做了”）。如果那是正确的，我钦佩他们的虚张声势，并对他们从不犯错感到惊讶。我绝不会冒险直接在实时网站上进行更改。

我建议您自己使用版本控制系统或 VCS（任何 VCS）。解决您所关心的代码的问题，并开发出能够轻松（可能仍在使用 SFTP）将 VCS 代码分发到网站的流畅分发。但也表明保留以前的版本有其优点——因为你可以恢复谁在什么时候做了什么。首先，您可能会发现您需要下载您需要处理的任何页面（文件）的当前版本，并将最新版本放入 VCS，然后再开始修改页面，因为其他人可能已经修改了它上次在您的主存储库中更新。您可能还想每天对文件进行“刮擦”以获取当前版本 - 并跟踪更改。你不会有“谁”，也没有“何时”

* * *

在回答问题中的评论时，Ólafur Waage 澄清说，由于缺乏 VCS，他们遇到了灾难。

这通常会使生活更轻松。他们搞砸了；他们无法解决这个问题——他们可能惹恼了客户，他们应该对自己感到非常恼火。VCS 可以更容易地从此类错误中恢复。显然，对于任何给定的自定义站点，您都需要 VCS 中可用的该站点的“正确”或“官方”版本的（中央）备份。我可能会为所有客户选择一个单一的存储库，使用对分支和合并有良好支持的 VCS。起初这可能更难处理（当人们习惯使用 VCS 时），但从长远来看可能会带来更好的结果。我会认真考虑使用现代分布式 VCS（例如[git](http://git.kernel.org/)），

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-28T23:33:10.603

您可以使用 tortoise svn 客户端在本地计算机上的其他文件路径上创建和使用存储库，然后您的工作路径是....

也许尝试为自己设置和使用它，并在一段时间后向他们展示它可以为你做什么。另一个很酷的事情可能是在您的服务器上安装 trac ( [http://trac.edgewall.org/](http://trac.edgewall.org/) )，如果您有访问权限和权限，或者可能在您自己的开发机器上的某个虚拟机中安装。您可以将 trac 映射到您的 svn 并在 Web 界面中获取 svn 更改，您可以将其显示给项目经理。也许他会因为他能够通过 Web 界面轻松查看代码更改而爱上它。当然，您可以仅使用 apache + svn 模块来做到这一点，但这更好，因为它提供了票务和路线图的路径（里程碑和经理可能挖掘的东西：o））..

无论如何祝你好运:)。至少，将它用于您在本地计算机上的工作，因为这样做只会让您受益。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-28T23:37:17.647

您可以在本地系统上安装 SVN 以进行演示。有一些工具可以将 Zend 和 Eclipse 集成到 SVN。我认为除了做一个 SVN 的演示之外，您可能应该向他们介绍它会带来的一些好处（可能在演示期间）。

转到此链接以获取一些想法：[我真的需要版本控制吗？](https://stackoverflow.com/questions/250984/do-i-really-need-version-control)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-29T13:01:30.860

这是每个人都会喜欢的一个技巧：

我在我的大多数生产站点中都包含了这个“插件”：当然，您需要首先为此创建一个有限权限的机器人 svn 帐户，并且必须在服务器上安装 svn。

```
 echo(' updating from svn<br>' );
    $username = Settings::Load()->Get('svn','username');
    $password = Settings::Load()->Get('svn','password');
    echo(" <pre>" );
    $repos = Settings::Load()->Get('svn' , 'repository');
    echo system ("svn export --username={$username} --password {$password} {$repos}includes/ ".dirname(__FILE__)."/../includes --force");
    echo system("svn export --username={$username} --password {$password} {$repos}plugins/ ".dirname(__FILE__)."/../plugins --force");

    die(); 
```

当然，请确保将其放在 .htpasswded 站点后面，并确保不要从 SVN 更新“生产设置”。等等，你用一个 HTTP 查询更新你的完整代码库到你的站点 :) SVN 自动覆盖文件，没有隐藏文件或文件夹留下，它很容易适应更新或恢复到特定版本。现在您的团队需要做的就是提交到他们的 SVN 存储库，在测试环境中运行这段代码，确保一切正常，然后在生产环境中运行它 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T23:43:43.717

Ólafur，您提到“工作室制作了一个托管在数百个站点上的 CMS 系统”。这本身可能就是你需要的胡萝卜。如果团队经常为这数百个站点部署更新，那么在版本控制系统中使用分支可能会使这个过程对每个人来说都更容易。这可能会节省大量时间，从而激励人们学习版本控制系统。

听起来这些网站都是相关的——同一个 CMS 的定制版本。在这种情况下，除了未定制的 CMS 产品之外，您应该将所有站点放在同一个存储库中。然后，您可以将它们全部配置为同一中心产品的分支。如果您使用单独的存储库，则没有简单的方法来创建分支以将定制与主产品相关联。（我认为你*可以*用 Subversion 来做这件事，很可能还有其他人，但如果所有开发人员都为同一个组织工作，那就很复杂而且没有必要。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-28T23:46:01.730

VisualSVNServer 和 TurtoiseSVN 是我使用的两个程序，它们都有很好的文档记录，并且与 Windows Explorer 和 Visual Studio 集成得非常好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-29T05:15:27.057

使部署成为自动化“构建”过程的一部分，因此开发人员不必担心它。使用“流”将工作保持在开发区域、质量保证区域和发布区域，然后拥有部署最新开发、质量保证和发布环境的自动化流程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-04T20:30:18.787

只需将 ie SVN 放在中间即可。

开发团队将新内容放入 subversion，然后您有一个脚本可以从 svn 导出内容并将其发送到网络服务器。

这与他们今天的工作方式非常接近，但每一个微小的变化都已记录在颠覆中，因此如果雷击，可以非常快速地及时恢复所有内容。

/约翰

# ms-access - 字符串在 MSAccess 的 VBA 代码中的 For Each 循环中行为异常

> ID：396848
> 
> 赞同：-2
> 
> 时间：2008-12-28T23:26:32.923
> 
> 标签：ms-access, vba

好的，所以我从[一个问题](https://stackoverflow.com/questions/391991/for-each-not-working-properly-in-vba-code)开始，并根据该站点和其他站点的建议对代码进行了很多更改，因此我认为我应该创建一个新问题。

即使我的代码更短、更高效，同样的问题仍然存在；我正在使用一个名为 strSQL 的字符串，其中包含我想要执行的 INSERT 语句。我有一个 FOR EACH 循环，它遍历我的 MSAcess 表单上的每个控件（确保它们是文本框、下拉列表或复选框）并确定该字段是否已更改。如果有，它会生成一个查询字符串来记录更改——并将其存储在 strSQL 中。

问题是同一个查询一次又一次地执行。我在执行查询字符串的行之前和之后添加了一个 DEBUG.PRINT 语句，调试器显示该字符串已更改！是的，你没看错，这似乎是不可能的，但我已经截图了。

首先我的代码：

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
    Dim C As Control
    For Each C In Controls
        Select Case C.ControlType
            Case acTextBox, acComboBox, acCheckBox
                Dim strOriginalValue, strCurrentValue, strSQL As String

                strOriginalValue = IIf(IsNull(C.OldValue), "", IIf(C.OldValue = vbTrue Or C.OldValue = vbFalse, IIf(C.OldValue = vbTrue, "Yes", "No"), C.OldValue))
                strCurrentValue = IIf(IsNull(C.Value), "", IIf(C.Value = vbTrue Or C.Value = vbFalse, IIf(C.Value = vbTrue, "Yes", "No"), C.Value))

                If strOriginalValue <> strCurrentValue Then
                    strSQL = "INSERT INTO fringefestival_changes (change_time,change_admin,action_taken,user_affected,year_affected,field_affected,type_affected,old_value,new_value) VALUES (NOW(),'" & ThisUserName() & "','Edit'," & [id] & ",0,'" & C.ControlSource & "','Administrator','" & Replace(strOriginalValue, "'", "") & "','" & Replace(strCurrentValue, "'", "") & "')"
                    Debug.Print "Before: " & strSQL
                    CurrentDb.Execute strSQL, dbFailOnError
                    Debug.Print "After: " & strSQL
                End If
        End Select
    Next
End Sub 
```

这是调试器的结果：

```
Before: INSERT INTO fringefestival_changes (change_time,change_admin,action_taken,user_affected,year_affected,field_affected,type_affected,old_value,new_value) VALUES (NOW(),'ajohnson','Edit',3,0,'indoor_performers_tab','Administrator','No','Yes')
After: INSERT INTO fringefestival_changes (change_time,change_admin,action_taken,user_affected,year_affected,field_affected,type_affected,old_value,new_value) VALUES (NOW(),'ajohnson','Edit',3,0,'indoor_performers_tab','Administrator','No','Yes')
Before: INSERT INTO fringefestival_changes (change_time,change_admin,action_taken,user_affected,year_affected,field_affected,type_affected,old_value,new_value) VALUES (NOW(),'ajohnson','Edit',3,0,'volunteers_tab','Administrator','No','Yes')
After: INSERT INTO fringefestival_changes (change_time,change_admin,action_taken,user_affected,year_affected,field_affected,type_affected,old_value,new_value) VALUES (NOW(),'ajohnson','Edit',3,0,'volunteers_tab','Administrator','No','Yes') 
```

其次是我的截图...首先是调试器：[1](http://www.andrew-g-johnson.com/access1.jpg) & [2](http://www.andrew-g-johnson.com/access2.jpg)，其次是结果：[这里](http://www.andrew-g-johnson.com/access3.jpg)——注意调试器太宽了，所以我截取了两张截图，结果有一行被涂上了颜色，因为它与这个问题无关.

请注意，我给出的示例中唯一应该不同的列应该是“field_affected”列。

我完全不知所措，我不知道为什么它会向调试器输出正确的字符串并执行其他操作。

**编辑：在使用 CurrentDb.Execute 之前，我使用的是 DoCmd.RunSQL 但这需要我禁用然后重新启用警告。由于两者的结果相同（相同的错误），我使用单行解决方案而不是三行解决方案。**

**更新：[感谢 shahkalpesh](https://stackoverflow.com/questions/396848/string-acting-abnormally-in-a-for-each-loop-in-vba-code-in-msaccess#396989)帮助我意识到数据确实被正确插入，我可以在 SQL Server 的管理工作室中看到它，但 MS Access 仍然显示不正确......问题是为什么？**

**最后编辑：通过在表中添加一个标识/自动增量整数列来修复，我怀疑缺少不同的字段值会混淆 MSAccess（尽管它确实没有理由）——这里的士气是 M$ 是愚蠢的**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-29T00:12:06.267

有问题的表单是否绑定到数据源？这是使用 Access 的最常见方式，如果是这样，您可能不需要通过 SQL 进行更新。

Form_BeforeUpdate() 通常在表单绑定到数据源时使用。您通常不会使用此事件来确定控件的值是否已更改并需要写回数据库...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T02:13:23.477

如果您可以转到特定的 SQL Server 表（使用 Query Analyzer 或 Enterprise Mgr）并查看它是否按预期工作。我怀疑 VBA 中的链接表可能会显示不正确的图片。

编辑：如果您有 SQL Profiler，请查看那里正在执行的内容，以确认您对执行相同查询的怀疑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-29T00:20:26.513

您对 currentdb 运行这些查询（我假设是 access-db），但实际上使用的是 SQL 服务器数据库，您希望在其中发生更改？

sql server 中的这些表是否链接到 access-db 中的表或您使用的是什么方法？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-29T00:32:37.817

您是否检查过表中是否有损坏的触发器？这是一个很长的镜头，但之前有一些非常非常奇怪的问题是由坏/坏的触发器引起的，在你注意到触发器之前很难理解它们......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-29T02:51:39.127

通过向更改表添加自动递增整数主键列来修复。

愚蠢的访问...

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-01-02T02:51:17.253

我不得不说围绕这个问题的讨论让我发疯。使用 ODBC 链接表，您可以从绑定表单开始。根本没有理由使用池连接。如果你对如何执行这些事情的 Access 抱有敌意，请停止使用 ACCESS。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-12-29T02:38:58.607

啊，你也在使用 SQL Server。我在使用触发器审核 Access 背后的数据更改方面非常幸运。有一些怪癖，但使用可信身份验证通过 ODBC 链接表非常容易。

好的，所以您不能或不想使用触发器。当使用 Access 前端 SQL 时，我通常在我的 VBA 代码中使用 ADO 对象来处理这类事情。使用 ODBC 的链接表非常适合绑定表单，但没有什么比 ADO 更适合直接访问 SQL Server 的了。

您想了解有关使用受信任的身份验证链接表的更多信息，还是想获得有关使用 ADO 与 SQL Server 一起工作的帮助？

# c# - .NET/COM 事件互操作性

> ID：396849
> 
> 赞同：0
> 
> 时间：2008-12-28T23:27:09.290
> 
> 标签：c#, .net, com, interop, com-interop

我有一个由 TlbImp.exe 生成的互操作程序集，生成的类事件很多，性能非常重要。

但是有一个问题，事件似乎以这样的方式注册/取消注册/调用，即使是空的事件处理程序也被计算在内。给定一组**1..N**事件，当您将处理程序注册到事件 3 时，它看起来像这：

```
{dummy1, dummy2, eventHandler3, dummy4 ... dummyN} 
```

当有很多经常引发的事件时，这会产生很大的开销。

所以问题是，有没有更好的方法来处理 .NET 中的 COM 事件？任何工具或其他东西，或者我是否必须从头开始重写互操作程序集的事件代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-30T02:16:43.843

为什么不只允许 .NET 通过执行 Using 语句来构建互操作？

除非您明确设置它们，否则不应调用任何事件。

例子：

[http://code.msdn.microsoft.com/SEHE](http://code.msdn.microsoft.com/SEHE)

如您所见，上面的示例设置了许多事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T14:08:27.570

通过使用自定义`Advise`/ `Unadvise`callbakcs 解决。

# python - 在 Python 中调用类方法会引发 TypeError

> ID：396856
> 
> 赞同：71
> 
> 时间：2008-12-28T23:36:46.523
> 
> 标签：python, python-3.x, class, methods

我不明白如何使用类。当我尝试使用该类时，以下代码给了我一个错误。

```
class MyStuff:
    def average(a, b, c): # Get the average of three numbers
        result = a + b + c
        result = result / 3
        return result

# Now use the function `average` from the `MyStuff` class
print(MyStuff.average(9, 18, 27)) 
```

错误：

```
File "class.py", line 7, in <module>
    print(MyStuff.average(9, 18, 27))
TypeError: unbound method average() must be called with MyStuff instance as first argument (got int instance instead) 
```

怎么了？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2008-12-28T23:48:05.033

您可以通过声明一个变量并像调用函数一样调用该类来实例化该类：

```
x = mystuff()
print x.average(9,18,27) 
```

但是，这不适用于您提供给我们的代码。当您在给定对象 (x) 上调用类方法时，它总是在调用函数时将指向该对象的指针作为第一个参数传递。因此，如果您现在运行代码，您将看到以下错误消息：

```
TypeError: average() takes exactly 3 arguments (4 given) 
```

要解决此问题，您需要修改平均方法的定义以采用四个参数。第一个参数是对象引用，其余 3 个参数用于 3 个数字。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-12-28T23:51:21.457

从您的示例中，在我看来您想使用静态方法。

```
class mystuff:
  @staticmethod
  def average(a,b,c): #get the average of three numbers
    result=a+b+c
    result=result/3
    return result

print mystuff.average(9,18,27) 
```

请注意，在 python 中大量使用静态方法通常是一些难闻的症状 - 如果你真的需要函数，那么直接在模块级别声明它们。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-05-24T02:51:04.540

为了最小化修改您的示例，您可以将代码修改为：

```
class myclass(object):
        def __init__(self): # this method creates the class object.
                pass

        def average(self,a,b,c): #get the average of three numbers
                result=a+b+c
                result=result/3
                return result

mystuff=myclass()  # by default the __init__ method is then called.      
print mystuff.average(a,b,c) 
```

或者更充分地扩展它，允许您添加其他方法。

```
class myclass(object):
        def __init__(self,a,b,c):
                self.a=a
                self.b=b
                self.c=c
        def average(self): #get the average of three numbers
                result=self.a+self.b+self.c
                result=result/3
                return result

a=9
b=18
c=27
mystuff=myclass(a, b, c)        
print mystuff.average() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-29T03:23:37.220

类中的每个函数，以及每个类变量都必须采用指向的*self参数。*

```
class mystuff:
    def average(a,b,c): #get the average of three numbers
            result=a+b+c
            result=result/3
            return result
    def sum(self,a,b):
            return a+b

print mystuff.average(9,18,27) # should raise error
print mystuff.sum(18,27) # should be ok 
```

如果涉及类变量：

```
 class mystuff:
    def setVariables(self,a,b):
            self.x = a
            self.y = b
            return a+b
    def mult(self):
            return x * y  # This line will raise an error
    def sum(self):
            return self.x + self.y

 print mystuff.setVariables(9,18) # Setting mystuff.x and mystuff.y
 print mystuff.mult() # should raise error
 print mystuff.sum()  # should be ok 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-28T23:50:42.953

在类的python成员函数中需要显式`self`参数。`this`与C++中的隐式指针相同。有关更多详细信息，请查看[此](http://diveintopython.net/object_oriented_framework/defining_classes.html)页面。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-29T01:46:17.323

您需要在面向对象编程的一些基础知识上多花一点时间。

这听起来很苛刻，但很重要。

*   您的类定义不正确——尽管语法恰好是可以接受的。定义是完全错误的。

*   您完全没有使用该类来创建对象。

*   您使用类进行计算是不合适的。这种事情是可以做的，但是需要a的高级概念`@staticmehod`。

由于您的示例代码在很多方面都是错误的，因此您无法得到一个整洁的“修复这个”答案。有太多的事情要解决。

您需要查看更好的类定义示例。目前尚不清楚您使用什么源材料来学习，但无论您阅读的书是错误的还是不完整的。

请丢弃您正在使用的任何书籍或资源并找到更好的书籍。严重地。他们在类定义的外观和使用方式上误导了您。

您可能想查看[http://homepage.mac.com/s_lott/books/nonprog/htmlchunks/pt11.html](http://homepage.mac.com/s_lott/books/nonprog/htmlchunks/pt11.html)以更好地介绍类、对象和 Python。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-23T11:35:16.347

试试这个：

```
class mystuff:
    def average(_,a,b,c): #get the average of three numbers
            result=a+b+c
            result=result/3
            return result

#now use the function average from the mystuff class
print mystuff.average(9,18,27) 
```

或这个：

```
class mystuff:
    def average(self,a,b,c): #get the average of three numbers
            result=a+b+c
            result=result/3
            return result

#now use the function average from the mystuff class
print mystuff.average(9,18,27) 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2008-12-29T00:03:20.433

您从未创建过实例。

您已将平均定义为实例方法，因此，为了使用平均，您需要先创建一个实例。

# java - 更改 JComboBox 的内容

> ID：396896
> 
> 赞同：13
> 
> 时间：2008-12-29T00:22:01.300
> 
> 标签：java, swing, jcombobox

我想更改一个列表的内容`JComboBox`（比如添加另一个列表来代替旧列表）。有什么办法我可以做到吗？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-29T00:35:02.927

如果您希望能够在运行时从现有组合框中添加和删除项目，则组合框的底层数据模型需要是 MutableComboBoxModel

谷歌该类的接口信息以及如何使用它的示例。

请注意，如果您希望用户输入新值，您还需要使该框可编辑。

[您可以在此处](http://www.javadocexamples.com/javax/swing/javax.swing.MutableComboBoxModel.html)找到一些示例链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-12-05T14:04:39.183

我找到了这个线程并想出了一个快速（而且可能很脏）的解决方案：

```
oldComboBox.setModel(new JComboBox<>(new_items).getModel()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-29T00:37:54.543

当然可以。有几种方法可以使用默认列表模型来操作 JComboBoxes。看看 remove* 方法和 add* 方法：

[http://java.sun.com/javase/6/docs/api/javax/swing/JComboBox.html](http://java.sun.com/javase/6/docs/api/javax/swing/JComboBox.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-29T01:41:48.830

您还可以使用 setModel() 替换整个模型。

但是在编写了越来越多的用户界面之后，我发现编写一个自定义的 ComboBoxModel 来包装 ComboBox 呈现的数据结构更有用。恕我直言，这是更可单元测试和更清洁的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-29T14:25:37.243

当您想将任何类型的可变列表连接到 GUI 控件时， [Glazed Lists库非常有用。](http://publicobject.com/glazedlists/)这是一个大型库，可能不适合您的项目，但请查看他们的截屏视频并自行判断。它支持很多相关的东西，比如过滤和自动完成，可以为你节省大量的手动工作。

# iis - 为什么我无法使用新创建的 teamsystem 用户连接到我的项目门户？

> ID：396901
> 
> 赞同：1
> 
> 时间：2008-12-29T00:26:15.317
> 
> 标签：iis, visual-studio-2008, tfs

我已按照此[演练](http://msdn.microsoft.com/en-us/library/ms243134(VS.80).aspx)在 TFS 中创建一个新用户并将其添加到管理员组

当我尝试连接到我的项目门户（直接从 tfs 计算机）时，它会询问我的凭据：

*   如果我输入新用户的凭据，IIS 会显示“拒绝访问”
*   如果我尝试使用 Windows 管理员帐户登录，它工作正常。

我在这里有点困惑。我是否需要在其他地方授予对我的用户帐户的访问权限？（例如在 IIS 中？）

附加信息：我在 windows server 2008 + sql server 2008 上使用 TFS sp1。我的用户帐户已在服务器上创建为标准用户（我已尝试将其升级为管理员用户以防万一，但这也不起作用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-29T15:25:48.277

我假设“项目门户”是指 Sharepoint 服务器？此 TFS 是否处于“工作组模式”（意味着 5 用户限制版？）如果是这样，您需要将用户添加到 TFS 中的许可用户组。

如果没有，我会检查用户在 Sharepoint 中是否具有正确的权限：http: [//msdn.microsoft.com/en-us/library/ms252449 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms252449(VS.80).aspx)

# delphi - 在 Delphi 中检测磁盘活动

> ID：396905
> 
> 赞同：6
> 
> 时间：2008-12-29T00:32:18.067
> 
> 标签：delphi, delphi-2007, disk, activity-monitor

我正在使用德尔福 2007。

我正在将文件复制到远程驱动器。复制结束后，我关闭/待机机器。可能会发生某些文件没有从缓冲区复制到磁盘，并且远程磁盘断开连接，因此备份未完成的情况。我需要检测该磁盘上的磁盘活动才能正确地在机器上采取关闭操作。

在这种情况下有没有办法检测磁盘活动？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-29T02:02:18.507

我不记得这是从哪里来的，但它确实有效。不幸的是，我不知道如何在这里附加东西，所以我无法添加带有图标的 dcr。

更新：在 torry.net 上找到它，以及许多其他具有相同功能的组件： [http ://www.torry.net/pages.php?id=252](http://www.torry.net/pages.php?id=252)

* * *

```
// ==================== DISC DRIVE MONITOR =====================================
//
// Class and Component to encapsulate the FindXXXXChangeNotification API calls
//
// The FindXXXXChangeNotification API calls set up a disc contents change
// notification handle.  You can set a filter to control which change types
// are notified, the directory which is monitored and set whether subdirectories
// from the monitored directory are monitored as well.
//
//------------------------------------------------------------------------------
// This file contains a class derived from TThread which undertakes the disc
// monitoring and a simple component which encapsulates the thread to make
// a non-visual VCL component.  This component works at design time, monitoring
// and notifying changes live if required.
//
// Version 1.00 - Grahame Marsh 14 January 1997
// Version 1.01 - Grahame Marsh 30 December 1997
//      Bug fix - really a Win 95 bug but only surfaces in D3, not D2
//              - see notes in execute method
// Version 1.02 - Grahame Marsh 30 January 1998
//              - adapted to work with version 2.30 TBrowseDirectoryDlg
//
// Freeware - you get it for free, I take nothing, I make no promises!
//
// Please feel free to contact me: grahame.s.marsh@courtaulds.com

unit DiscMon;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls,
  Forms, Dialogs, ShlObj;//, BrowseDr, DsgnIntf;

//=== DISC MONITORING THREAD ===================================================
// This thread will monitor a given directory and subdirectories (if required)
// for defined filtered changes.  When a change occurs the OnChange event will
// be fired, if an invalid condition is found (eg non-existent path) then
// the OnInvalid event is fired. Each event is called via the Sychronize method
// and so are VCL thread safe.
//
// The thread is created suspended, so after setting the required properties
// you must call the Resume method.

type
  TDiscMonitorThread = class(TThread)
  private
    FOnChange : TNotifyEvent;
    FOnInvalid : TNotifyEvent;
    FDirectory : string;
    FFilters : integer;
    FDestroyEvent,
    FChangeEvent : THandle;
    FMultipleChanges : boolean;
    FSubTree : boolean;
    procedure InformChange;
    procedure InformInvalid;
    procedure SetDirectory (const Value : string);
    procedure SetFilters (Value : integer);
    procedure SetMultipleChanges (Value : boolean);
    procedure SetSubTree (Value : boolean);
  protected
    procedure Execute; override;
    procedure Update;
  public
    constructor Create;
    destructor Destroy; override;
// The directory to monitor
    property Directory : string read FDirectory write SetDirectory;
// Filter condition, may be any of the FILE_NOTIFY_CHANGE_XXXXXXX constants
// ORed together.  Zero is invalid.
    property Filters : integer read FFilters write SetFilters;
// Event called when change noted in directory
    property OnChange : TNotifyEvent read FOnChange write FOnChange;
// Event called for invalid parameters
    property OnInvalid : TNotifyEvent read FOnInvalid write FOnInvalid;
// Flag multiple times per change, for instance if the Size of a file changes
// then the Time willl change as well; MultipleChanges=true will fire two events
    property MultipleChanges : boolean read FMultipleChanges write SetMultipleChanges;
// Include subdirectories below specified directory.
    property SubTree : boolean read FSubTree write SetSubTree;
  end;

//===================== DISC MONITORING COMPONENT ==============================

// specify directory string as type string so we can have our own property editor
  TDiscMonitorDirStr = type string;

// enumerated type for filter conditions (not directly usable in thread class)
// see the SetFilters procedure for the translation of these filter conditions
// into FILE_NOTIFY_CHANGE_XXXXXX constants.
  TMonitorFilter = (moFilename, moDirName, moAttributes, moSize,
                    moLastWrite, moSecurity);
// set of filter conditions
  TMonitorFilters = set of TMonitorFilter;

  TDiscMonitor = class(TComponent)
  private
    FActive : boolean;
    FMonitor : TDiscMonitorThread;
    FFilters : TMonitorFilters;
    FOnChange : TNotifyEvent;
    FOnInvalid : TNotifyEvent;
    FShowMsg : boolean;
    function GetDirectory : TDiscMonitorDirStr;
    function GetMultipleChanges : boolean;
    function GetSubTree : boolean;
    procedure SetActive (Value : boolean);
    procedure SetDirectory (Value : TDiscMonitorDirStr);
    procedure SetFilters (Value : TMonitorFilters);
    procedure SetMultipleChanges (Value : boolean);
    procedure SetSubTree (Value : boolean);
  protected
    procedure Change (Sender : TObject);
    procedure Invalid (Sender : TObject);
  public
    constructor Create (AOwner : TComponent); override;
    destructor Destroy; override;
// stop the monitoring thread running
    procedure Close;
// start the monitoring thread running
    procedure Open;
// read-only property to access the thread directly
    property Thread : TDiscMonitorThread read FMonitor;
  published
// the directory to monitor
    property Directory : TDiscMonitorDirStr read GetDirectory write SetDirectory;
// control the appearance of information messages at design time (only)
    property ShowDesignMsg : boolean read FShowMsg write FShowMsg default false;
// event called when a change is notified
    property OnChange : TNotifyEvent read FOnChange write FOnChange;
// event called if an invalid condition is found
    property OnInvalid : TNotifyEvent read FOnInvalid write FOnInvalid;
// notification filter conditions
    property Filters : TMonitorFilters read FFilters write SetFilters default [moFilename];
// Flag multiple times per change, for instance if the Size of a file changes
// then the Time willl change as well; MultipleChanges=true will fire two events
    property MultipleChanges : boolean read GetMultipleChanges write SetMultipleChanges;
// include subdirectories below the specified directory
    property SubTree : boolean read GetSubTree write SetSubTree default true;
// specify if the monitoring thread is active
    property Active : boolean read FActive write SetActive default false;
  end;

procedure Register;

implementation

//=== MONITOR THREAD ===========================================================

// Create the thread suspended.  Create two events, each are created using
// standard security, in the non-signalled state, with auto-reset and without
// names.  The FDestroyEvent will be used to signal the thread that it is to close
// down.  The FChangeEvent will be used to signal the thread when the monitoring
// conditions (directory, filters or sub-directory search) have changed.
// OnTerminate is left as false, so the user must Free the thread.

constructor TDiscMonitorThread.Create;
begin
  inherited Create (true);
  FDestroyEvent := CreateEvent (nil, false, false, nil);
  FChangeEvent := CreateEvent (nil, false, false, nil)
end;

// close OnXXXXX links, signal the thread that it is to close down
destructor TDiscMonitorThread.Destroy;
begin
  FOnChange := nil;
  FOnInvalid := nil;
  SetEvent (FDestroyEvent);
  FDirectory := '';
  inherited Destroy
end;

// called by the Execute procedure via Synchronize.  So this is VCL thread safe
procedure TDiscMonitorThread.InformChange;
begin
  if Assigned(FOnChange) then
    FOnChange(Self)
end;

// called by the Execute procedure via Synchronize.  So this is VCL thread safe
procedure TDiscMonitorThread.InformInvalid;
begin
  if Assigned (FOnInvalid) then
    FOnInvalid (Self)
end;

// Change the current directory
procedure TDiscMonitorThread.SetDirectory (const Value : string);
begin
  if Value <> FDirectory then
  begin
    FDirectory := Value;
    Update
  end
end;

// Change the current filters
procedure TDiscMonitorThread.SetFilters (Value : integer);
begin
  if Value <> FFilters then
  begin
    FFilters := Value;
    Update
  end
end;

// Change the current MultipleChanges condition
procedure TDiscMonitorThread.SetMultipleChanges (Value : boolean);
begin
  if Value <> FMultipleChanges then
    FMultipleChanges := Value;
end;

// Change the current sub-tree condition
procedure TDiscMonitorThread.SetSubTree (Value : boolean);
begin
  if Value <> FSubTree then
  begin
    FSubtree := Value;
    Update
  end
end;

// On any of the above three changes, if the thread is running then
// signal it that a change has occurred.
procedure TDiscMonitorThread.Update;
begin
  if not Suspended then
    SetEvent (FChangeEvent)
end;

// The EXECUTE procedure
//     -------
// Execute needs to:
// 1\. Call FindFirstChangeNotification and use the Handle in a WaitFor...
//    to wait until the thread become signalled that a notification has occurred.
//    The OnChange event is called and then the FindNextChangeNotification is
//    the called and Execute loops back to the WaitFor
// 2\. If an invalid handle is obtained from the above call, the the OnInvalid
//    event is called and then Execute waits until valid conditions are set.
// 3\. If a ChangeEvent is signalled then FindCloseChangeNotification is called,
//    followed by a new FindFirstChangeNotification to use the altered
//    conditions.
// 4\. If a DestroyEvent is signalled then FindCloseChangeNotification is
//    called and the two events are closed and the thread terminates.
//
// In practice WaitForMultipleObjects is used to wait for any of the conditions
// to be signalled, and the returned value used to determine which event occurred.

procedure TDiscMonitorThread.Execute;
// There appears to be a bug in win 95 where the bWatchSubTree parameter
// of FindFirstChangeNotification which is a BOOL only accepts values of
// 0 and 1 as valid, rather than 0 and any non-0 value as it should.  In D2
// BOOL was defined as 0..1 so the code worked, in D3 it is 0..-1 so
// fails. The result is FindF... produces and error message.  This fix (bodge) is
// needed to produce a 0,1 bool pair, rather that 0,-1 as declared in D3
const
  R : array [false..true] of BOOL = (BOOL (0), BOOL (1));
var
  A : array [0..2] of THandle; // used to give the handles to WaitFor...
  B : boolean;                 // set to true when the thread is to terminate
begin
  B := false;
  A [0] := FDestroyEvent;      // put DestroyEvent handle in slot 0
  A [1] := FChangeEvent;       // put ChangeEvent handle in slot 1
// make the first call to the change notification system and put the returned
// handle in slot 2.
  A [2] := FindFirstChangeNotification (PChar(FDirectory),R[fSubTree],FFilters);
  repeat

// if the change notification handle is invalid then:
    if A [2] = INVALID_HANDLE_VALUE then
    begin
  // call the OnInvalid event
      Synchronize (InformInvalid);
  // wait until either DestroyEvent or the ChangeEvents are signalled
      case WaitForMultipleObjects(2,PWOHandleArray(@A),false,INFINITE)-WAIT_OBJECT_0 of
  // DestroyEvent - close down by setting B to true
        0 : B := true;
  // try new conditions and loop back to the invalid handle test
        1 : A [2] := FindFirstChangeNotification (PChar(FDirectory),
                                                  R[fSubTree],FFilters)
      end
    end else
// handle is valid so wait for any of the change notification, destroy or
// change events to be signalled
      case WaitForMultipleObjects(3,PWOHandleArray(@A),false,INFINITE)-WAIT_OBJECT_0 of
        0 : begin
  // DestroyEvent signalled so use FindClose... and close down by setting B to true
              FindCloseChangeNotification (A [2]);
              B := true
            end;
        1 : begin
  // ChangeEvent signalled so close old conditions by FindClose... and start
  // off new conditions.  Loop back to invalid test in case new conditions are
  // invalid
              FindCloseChangeNotification (A [2]);
              A [2] := FindFirstChangeNotification (PChar(FDirectory),
                                                    R[fSubTree],FFilters)
            end;
        2 : begin
  // Notification signalled, so fire the OnChange event and then FindNext..
  // loop back to re-WaitFor... the thread
              Synchronize(InformChange);
// changed to prevent multiple notifications for the same change
// old line
              if FMultipleChanges then
                FindNextChangeNotification (A [2])
              else
                begin
                  FindCloseChangeNotification (A [2]);
                  A [2] := FindFirstChangeNotification (PChar(FDirectory),
                                                        R[fSubTree],FFilters);
                end
            end;
      end
  until B;

// closing down so chuck the two events
  CloseHandle (FChangeEvent);
  CloseHandle (FDestroyEvent)
end;

//=== MONITOR COMPONENT ========================================================

// This component encapsulates the above thread.  It has properties for
// directory, sub-directory conditions, filters, whether information messages
// should be given at design time and if the thread is active.
constructor TDiscMonitor.Create (AOwner : TComponent);
begin
  inherited Create (AOwner);
  FMonitor:=TDiscMonitorThread.Create;  // create a monitor thread
  FMonitor.OnChange:=Change;            // hook into its event handlers
  FMonitor.OnInvalid:=Invalid;
  Filters:=[moFilename];                // default filters to moFilename
  MultipleChanges:=false;               // default one event per change
  SubTree:=false                        // default no sub-tree search to on
end;

destructor TDiscMonitor.Destroy;
begin
  FMonitor.Free;                          // chuck the thread
  inherited Destroy
end;

// Change notification from the thread has occurred. Call the component's event
// handler and then, if in design mode, and if desired, put up a simple
// notification message
procedure TDiscMonitor.Change;
begin
  if Assigned (FOnChange) then
    FOnChange (Self)
  else
    if (csDesigning in ComponentState) and FShowMsg then
      ShowMessage ('Change signalled')
end;

// Invalid notification from the thread has occurred. Call the component's event
// handler and then, if in design mode, and if desired, put up a simple
// notification message
procedure TDiscMonitor.Invalid;
begin
  if Assigned (FOnInvalid) then
    FOnInvalid (Self)
  else
    if (csDesigning in ComponentState) and FShowMsg then
      ShowMessage ('Invalid parameter signalled')
end;

// Stop the monitor running
procedure TDiscMonitor.Close;
begin
  Active := false
end;

// Run the monitor
procedure TDiscMonitor.Open;
begin
  Active := true
end;

// Control the thread by using it's resume and suspend methods
procedure TDiscMonitor.SetActive (Value : boolean);
begin
  if Value <> FActive then
  begin
    FActive := Value;
    if Active then
    begin
      FMonitor.Resume;
      FMonitor.Update
    end else
      FMonitor.Suspend
  end
end;

// get the current directory from the thread
function TDiscMonitor.GetDirectory : TDiscMonitorDirStr;
begin
  Result := FMonitor.Directory
end;

// get the current MultipleChanges status from the thread
function TDiscMonitor.GetMultipleChanges : boolean;
begin
  Result := FMonitor.MultipleChanges
end;

// get the current sub-tree status from the thread
function TDiscMonitor.GetSubTree : boolean;
begin
  Result := FMonitor.SubTree
end;

// set the directory to monitor
procedure TDiscMonitor.SetDirectory (Value : TDiscMonitorDirStr);
begin
  FMonitor.Directory := Value
end;

// Change the filter conditions.  The thread uses the raw windows constants
// (FILE_NOTIFY_CHANGE_XXXX) but the components uses a set of enumurated type.
// It is therefore necessary to translate from the component format into
// an integer value for the thread.
procedure TDiscMonitor.SetFilters (Value : TMonitorFilters);
const
  XlatFileNotify : array [moFilename..moSecurity] of integer =
    (FILE_NOTIFY_CHANGE_FILE_NAME,  FILE_NOTIFY_CHANGE_DIR_NAME,
     FILE_NOTIFY_CHANGE_ATTRIBUTES, FILE_NOTIFY_CHANGE_SIZE,
     FILE_NOTIFY_CHANGE_LAST_WRITE, FILE_NOTIFY_CHANGE_SECURITY);
var
  L : TMonitorFilter;
  I : integer;
begin
  if Value <> FFilters then
    if Value = [] then
      ShowMessage ('Some filter condition must be set.')
    else begin
      FFilters := Value;
      I := 0;
      for L := moFilename to moSecurity do
        if L in Value then
          I := I or XlatFileNotify [L];
      FMonitor.Filters := I;
    end
end;

// set the MultipleChanges status in the thread
procedure TDiscMonitor.SetMultipleChanges (Value : boolean);
begin
  FMonitor.MultipleChanges:=Value
end;

// set the sub-tree status in the thread
procedure TDiscMonitor.SetSubTree (Value : boolean);
begin
  FMonitor.SubTree:=Value
end;

procedure Register;
begin
  RegisterComponents ('Samples', [TDiscMonitor]);
end;

end. 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-29T01:36:18.840

这取决于您要检测的磁盘活动类型。

语言“Delphi”本身可能没有库可以帮助您解决这个问题。

*   使用 Win32 API 调用，您可以获得[目录更改通知](http://msdn.microsoft.com/en-us/library/aa365261(VS.85).aspx)。
*   在 .NET 中，您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)来监视目录。

如果这些不适合您，那么您需要下降到[挂钩](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx)操作系统调用或更可能是硬件级别，这通常涉及编写挂钩 IDT（中断描述符表）的设备驱动程序。我推荐这本书[Rootkits](https://rads.stackoverflow.com/amzn/click/com/0321294319)以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-29T15:35:05.153

（请将评论中的附加信息移至您的问题。）AFAIK 没有 Windows API 来判断是否所有数据都已写入磁盘。

您正在寻找的是[Unix 同步命令的 Windows 等效项](http://technet.microsoft.com/en-us/sysinternals/bb897438.aspx)。您可以从您的程序中运行此工具。请阅读链接页面上的信息，这需要管理权限，即使这样也可能不足以确定 - 某些磁盘驱动器具有告诉操作系统所有写入已完成的固件，而实际上它们还没有完成，并且未写入的数据仍在磁盘缓存中。为了安全起见，您最好在复制操作完成后添加延迟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-27T04:14:20.340

[另请参阅JCL](http://sourceforge.net/projects/jcl/)中的 JvChangeNotify.TJvChangeNotify 类。

# python - 在 Python 中，如何找到给定一周的第一个星期一的日期？

> ID：396913
> 
> 赞同：28
> 
> 时间：2008-12-29T00:42:56.907
> 
> 标签：python, datetime

如果我有一个特定的周数（例如 51）和给定的年份（例如 2008），我如何找到同一周的第一个星期一的日期？

非常感谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-12-29T01:05:22.087

```
>>> import time
>>> time.asctime(time.strptime('2008 50 1', '%Y %W %w'))
'Mon Dec 15 00:00:00 2008' 
```

假设您一周的第一天是星期一，如果您一周的第一天是星期日，请使用`%U`而不是`%W`。有关详细信息，请参阅[strptime](http://docs.python.org/library/time.html#time.strptime)的文档。

**更新：**固定周数。该`%W`指令是基于 0 的，因此第 51 周将输入为 50，而不是 51。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-08-17T13:07:00.480

PEZ 和 Gerald Kaszuba 的解决方案假设 1 月 1 日总是在给定年份的第一周。此假设不适用于 ISO 日历，请参阅[Python 的文档](http://docs.python.org/library/datetime.html#datetime.date.isocalendar)以供参考。例如，在 ISO 日历中，2010 年的第 1 周实际上是从 1 月 4 日开始的，而 2010 年 1 月 1 日是 2009 年的第 53 周。与 ISO 日历兼容的解决方案：

```
from datetime import date, timedelta

def week_start_date(year, week):
    d = date(year, 1, 1)    
    delta_days = d.isoweekday() - 1
    delta_weeks = week
    if year == d.isocalendar()[0]:
        delta_weeks -= 1
    delta = timedelta(days=-delta_days, weeks=delta_weeks)
    return d + delta 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2010-07-22T23:36:23.040

```
from datetime import date, timedelta

def first_monday(year, week):
    d = date(year, 1, 4)  # The Jan 4th must be in week 1  according to ISO
    return d + timedelta(weeks=(week-1), days=-d.weekday()) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-29T01:05:54.503

这似乎有效，假设第一周可以有一个星期一在去年的某一天。

```
from datetime import date, timedelta

def get_first_dow(year, week):
    d = date(year, 1, 1)
    d = d - timedelta(d.weekday())
    dlt = timedelta(days = (week - 1) * 7)
    return d + dlt 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-12-31T04:10:29.940

我稍微修改了 Vaidas K. 的脚本，使其返回一周的开始和一周的结束日期。

```
from datetime import datetime, date, timedelta

def weekbegend(year, week):
    """
    Calcul du premier et du dernier jour de la semaine ISO
    """
    d = date(year, 1, 1)    
    delta_days = d.isoweekday() - 1
    delta_weeks = week
    if year == d.isocalendar()[0]:
        delta_weeks -= 1
    # delta for the beginning of the week
    delta = timedelta(days=-delta_days, weeks=delta_weeks)
    weekbeg = d + delta
    # delta2 for the end of the week
    delta2 = timedelta(days=6-delta_days, weeks=delta_weeks)
    weekend = d + delta2
    return weekbeg, weekend 
```

所以你可以这样使用它。

```
weekbeg, weekend = weekbegend(2009, 1)
begweek = weekbeg.strftime("%A %d %B %Y")
endweek = weekend.strftime("%A %d %B %Y") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-29T01:06:16.030

使用时间模块中的字符串格式。[使用格式的详细说明](http://www.python.org/doc/current/library/time.html#time.strftime)

```
>>> import time
>>> time.strptime("51 08 1","%U %y %w")
(2008, 12, 22, 0, 0, 0, 0, 357, -1) 
```

根据我计算机上的日历，返回的日期偏离了一周，可能是因为周数从 0 开始索引？

# mysql - 设置 Windows MySQL 客户端默认脚本文件夹

> ID：396917
> 
> 赞同：0
> 
> 时间：2008-12-29T00:53:26.867
> 
> 标签：mysql, windows

从 Windows 上的 MySQL 客户端开始，如何将其设置为指向特定的 Windows 文件夹，以便 SOURCE 语句中的文件不必包含路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-29T03:15:19.983

A partial workaround I've been using is to change the data directory so it is not so deeply buried (ie. D:\MySQL_Data). This makes it far easier to enter the path.

Documentation: [http://dev.mysql.com/doc/refman/5.1/en/server-options.html#option_mysqld_datadir](http://dev.mysql.com/doc/refman/5.1/en/server-options.html#option_mysqld_datadir)

The downside is that all your data files will now need to live here also. I'm interested also to see if somebody has a more elegant solution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T13:07:19.780

我建议创建到客户端的链接（快捷方式）并将工作目录（初始目录）定义到您想要的这个特定文件夹。我做到了并且工作得很好。

# language-agnostic - 为您的新员工提供绝对最低限度的培训计划

> ID：396921
> 
> 赞同：4
> 
> 时间：2008-12-29T00:57:34.770
> 
> 标签：language-agnostic

假设您正在经营一家软件公司。您的新开发人员培训计划（您不会让开发人员在未完成代码的情况下接触您的代码）将包含哪些元素？

答案可以包括书籍、文章、演示文稿、博客文章、视频或其他资源。更好的在线可用和可链接。请每个答案一个资源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-29T03:58:43.063

没有培训计划。

工作产品/代码/设计评审。

在我看来，正式的灌输似乎是个坏主意。正确进行招聘并设置指导并拥有良好的流程。正式的培训计划是个好主意，但很可能会退化为无用和蹩脚的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-29T01:00:56.573

我会确保他们阅读的一本明确的书是 Code Complete 第 2 版。

Scot Hanselman 列出了 6 本书 [http://www.hanselman.com/blog/SixEssentialLanguageAgnosticProgrammingBooks.aspx](http://www.hanselman.com/blog/SixEssentialLanguageAgnosticProgrammingBooks.aspx)

帖木儿

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-29T01:07:14.580

我肯定会包含谷歌编写可测试代码的指南：

[http://googletesting.blogspot.com/2008/11/guide-to-writing-testable-code.html](http://googletesting.blogspot.com/2008/11/guide-to-writing-testable-code.html)

和伟大的干净代码会谈视频：

[http://googletesting.blogspot.com/2008/11/clean-code-talks-unit-testing.html](http://googletesting.blogspot.com/2008/11/clean-code-talks-unit-testing.html) [http://googletesting.blogspot.com/2008/11/clean-code-talks-dependency-injection.html](http://googletesting.blogspot.com/2008/11/clean-code-talks-dependency-injection.html) [http://googletesting.blogspot.com/2008/11/clean-code-talks-global-state-and.html](http://googletesting.blogspot.com/2008/11/clean-code-talks-global-state-and.html) [http://googletesting.blogspot.com/2008/12/by-miko-hevery-google-tech -talks.html](http://googletesting.blogspot.com/2008/12/by-miko-hevery-google-tech-talks.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-29T12:44:06.077

至少*我*会确保他们了解团队使用的软件开发过程。

我通常通过让新员工做一个小功能来完成整个开发过程，以亲力亲为的方式做到这一点，但这对我们的内部流程非常具体，不一定适用，具体取决于所使用的实际流程.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-29T13:00:37.103

**针对我们最新开发人员的实际、完整的技术培训计划：**

1.  源代码控制系统的地址和凭据。
2.  错误跟踪系统的地址和凭据。
3.  用于检索开发工具的地址和凭据。
4.  与开发团队共进午餐。
5.  最后期限。

公平地说，她非常聪明、有才华、外向且经验丰富。我不会向普通学员推荐这种方法……但这绝对是我团队中想要的那种人！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-29T03:37:10.640

"[How Open Source Projects Survive Poisonous People](http://video.google.com/videoplay?docid=-4216011961522818645)" by the core Subversion guys. I'd also point them to whatever you read that made you start using the methodology trend you are currently using. e.g. if you're company is big on automated unit+coverage testing (which you should be), what experiences made you that way, and what were you reading that made you realize how awesome they were.

The obvious expectation is that the people you're hiring are familiar with the language you're using, and know how and why you want to use SCM and dev/test/prod at a bare minimum.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-29T02:40:54.780

我同意不雇用符合工作所需资格的人，这意味着他们应该正式教授的唯一知识是内部特定技术或架构等。一旦他们知道内部知识让他们继续工作在他们自己的开发分支中修复错误，以便他们可以在学习代码库的同时提高工作效率并为工作量做出贡献。

如果您正在寻找其他领域来检查它们，您可以专注于 OO 代码设计、安全性（因应用程序类型而异）、unicode 和国际化、可用性设计。您可能可以检查其他领域，但所有这些都应在面试中处理。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-29T04:41:06.300

除了 Timur 提到的 Scott Hanselman 的书籍清单之外，我还推荐 Karl Seguin 的“编程基础”电子书：

[http://codebetter.com/files/folders/codebetter_downloads/entry179694.aspx](http://codebetter.com/files/folders/codebetter_downloads/entry179694.aspx)

比起继续教育，这里有一些霍华德推荐的书：

[http://blogs.conchango.com/howardvanrooijen/archive/2008/03/05/continuous-education.aspx](http://blogs.conchango.com/howardvanrooijen/archive/2008/03/05/continuous-education.aspx)

约米特

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2008-12-29T01:03:26.630

我是否正确理解您是在向新雇用的软件开发人员“教授”非内部知识？（与与您的特定公司相关的事情相反）如果您认为他们没有受过足够的培训或胜任，您为什么要首先雇用他们？

我的意思是，你为什么要雇佣一个没有读过 Code Complete 或类似的东西的人呢？

# c++ - FastCGI 请求处理

> ID：396923
> 
> 赞同：3
> 
> 时间：2008-12-29T01:02:11.047
> 
> 标签：c++, fastcgi

www.fastcgi.com 上的文档对此（对我来说）不清楚，所以我希望有人能给我一个明确的答案。

我已经用 C++ 编写了一个 FastCGI 应用程序来执行一些繁重的数字运算。当应用程序第一次加载时（当 apache 启动时），它会将 MySQL 数据缓存到一个向量中，这需要大约一分钟（因此使用 FastCGI 而不是 CGI ;-)）。然后它等待请求开始计算数字。

通常，用户发出请求，FastCGI 应用程序运行没有问题，并返回正确的数据。但是，我不确定当大约同时发起多个请求时会发生什么。FastCGI 是否对这些请求进行排队，并在响应下一个请求之前等待上一次运行完成？或者 FastCGI 是否并行处理请求？这可以配置吗，您是在应用程序中还是在 apache 配置中配置它？默认是什么？

我的应用程序只实现

```
while(FCGX_Accept( &in, &out, &err, &envp)>=0){} 
```

并在 while 循环内执行数字运算。

感谢任何帮助，干杯兄弟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-29T01:13:29.637

查看我的 Web 服务器，无论有多少 Apache 实例正在运行，我在任何时候都只有一个 FastCGI 进程在运行。所以我不得不假设它正在排队。

# chm - 帮助文件格式的未来方向

> ID：396930
> 
> 赞同：22
> 
> 时间：2008-12-29T01:08:20.550
> 
> 标签：chm, winhelp

看起来 CHM 帮助文件不再是首选的帮助文件格式。

WinHelp
- 已过时

HtmlHelp (CHM)
- 默认情况下在 Vista 上不支持
- 在网络共享上无法正常工作

帮助 2 (HXS)
- 我知道这在 VS2005+ 中用于显示帮助

基于网络
- 可能难以管理多个版本

您将在提供来自同一代码库的多个版本的新 (C#) 应用程序中使用哪种帮助文件格式？

我们想使用 CHM 帮助，但这似乎不是微软希望我们前进的方向。

有没有人为他们的帮助文件使用 HXS？

反馈赞赏

* * *

根据 lassevk 评论进行更新；

看起来 HXS 帮助不打算用于正常的帮助项目。

* * *

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-11-11T17:51:09.407

究竟是什么让您认为 windows Vista 上没有默认的 .chm 查看器？（我的电脑上肯定有一个，我的 Win7 盒子上也有）

您可能会将 .chm 与 .hlp 混淆（微软确实在 vista 中放弃了 .hlp 支持，然后最终在 Windows 更新中恢复了它）

底线：所有 Windows 版本似乎仍然支持 .chm 文件，我所知道的 .chm 文件的唯一真正替代品是 .html

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-09T06:25:11.003

对我来说，CHM 仍然是答案。我使用 Codeplex 上提供的[Sandcastle Help File Builder 工具](http://www.codeplex.com/SHFB)构建 CHM 文件。

对 CHM 可访问性的担忧是有道理的。为了解决这个问题，我非常轻松地制作了一个 CHM 到 Web 的转换器，其中包含一些 IStorage hacking、文本搜索和替换以及 XSL 转换。 [这个页面](http://cheeso.members.winisp.net/DotNetZipHelp)是一个大约8秒自动生成的网站。它在左侧导航中有一个展开/折叠树视图。基于框架（不是非常友好的 URL），但它工作得很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-29T01:17:19.520

```
this.Mode = Modes.Rant; 
```

几乎所有的帮助文件格式都存在巨大的问题，因为制造商（通常是微软对他们中的很多人来说）似乎不想做的工作不仅仅是*稍微*好一点以供他们自己使用。

当第 3 方集成时，我无法告诉您有多少次新的 HXS 格式完全破坏了我的 Visual Studio 帮助。你可以说这是第三方安装工具的错，但是很长一段时间*没有*关于如何做到这一点的文档，所以他们不得不在逆向工程（有时会出错）或不集成全部。我仍然不知道集成是否有效，但这些天我只是切换 Visual Studio 以使用在线帮助。它只是工作，主要是，而内置帮助总是下降到那个只会锁定 Visual Studio 直到它重建帮助文件的进度条，除了它没有因为文件现在已损坏，所以任何时候我点击F1，除非我多次终止 DEXPLORE 程序，否则 Visual Studio 只会锁定。

这最终是如何解决任何问题的，我仍然不知道。

其次，工具需要存在。CHM查看器出现在pre-vista上，而不是在Vista上，但是显示HXS所需的工具在pre-vista上不存在，但我认为它们在Vista上。很好，所以现在我可以选择使用一种需要在用户计算机上自定义安装的格式，或者......错误，另一种需要在其他用户计算机上自定义安装的格式。正确的。

```
this.Mode = Modes.JustTicked; 
```

在我工作的地方，我们发布 CHM 文件，以及基于文件的 html 版本，供那些通过网络共享部署应用程序的人使用。至于 Vista，我们还没有看到太多，但 html 版本也可以在那里工作。

不过，我宁愿有一个闪亮的帮助*文件*。

html 版本的一个很好的结果是我们可以链接到我们产品后面的 web 模块中的相同文件。这样，客户只需要一个版本。

我们正在考虑升级我们在工作中使用的工具，因此在我本周的日程安排中，工作时既安静又舒适，我将研究它可以产生的各种类型的输出，以及 HXS 等。

* * *

**编辑**：嗯，快速浏览一下帮助和手册的帮助页面，我们使用的产品，[对 HXS 有这样的说法](http://www.helpandmanual.com/help/index.html?hm_working_configoutput_hxs.htm)：

> Visual Studio 帮助也称为 MS 帮助 2.0。最初，此帮助格式旨在成为 HTML 帮助的继承者。然而，微软随后无限期地推迟了它的发布，现在很明显，它永远不会作为普通用户应用程序的帮助格式发布。
> 
> 请注意，这是一种特殊的帮助格式，仅用于记录为集成到 Visual Studio .NET 中而设计的第三方编程组件。不适合任何其他用途，不能用于应用程序的正常帮助项目！

我想 HXS 完全不在讨论范围内。

* * *

**注意**：基于 Web 并不一定意味着您需要一个 Web*服务器*，只是您需要一个 Web*浏览器*。无论您是使用 Web 浏览器组件将其集成到您的应用程序中，还是只是启动用户的默认浏览器，这都是您必须做出的选择，但我见过的大多数基于 Web 的帮助输出不需要任何服务器设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-09T06:33:28.190

我见过的唯一有用的帮助文档是纯 HTML。我见过的大多数（如果不是全部）开源项目都有 HTML 帮助页面（用于 API 和参考文档）。使用专有格式或需要专有阅读器的任何内容都存在过时 (CHM) 或存在兼容性或膨胀问题 (PDF) 的风险。

出于某种原因，微软在帮助文件方面表现不佳。Visual Studio/SQL Studio/Office 的在线帮助很糟糕，MSDN 很乱，CHM 很笨拙，而且 Microsoft 搜索永远不会返回您真正想要的结果。（只是我的观点 ：）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-11-11T17:59:35.703

对于仍在阅读此问题的任何人的一些更新想法...

根据 Wikipedia 的说法，微软在放弃 Help 2 后决定使用[Microsoft Assistance Markup Language 。](http://en.wikipedia.org/wiki/Microsoft_Assistance_Markup_Language)

还有[Microsoft 帮助系统](http://en.wikipedia.org/wiki/Microsoft_Help_System)，这是 Visual Studio 2010 附带的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-01T22:19:42.780

[Adobe RoboHelp](http://www.adobe.com/products/robohelp/productinfo/features/)可用于创作具有内容/索引/搜索/词汇表并在浏览器中工作的帮助内容，就像 HTML 生成的一样。支持 35 种语言。

我们有一个基于 Flex 的 Web 应用程序，它使用它来管理应用程序的帮助内容。Flex 应用程序及其帮助系统适用于 Windows/MacOSX/Linux 上的大多数浏览器。

# c# - 在 Vista 64 位上使用来自 C# 或 VBS 的 32 位 COM 对象并收到错误 80004005

> ID：396933
> 
> 赞同：4
> 
> 时间：2008-12-29T01:12:13.803
> 
> 标签：c#, .net, com, 64-bit, wsh

我在这里需要一些读心术，因为我正在尝试做我不完全理解的事情。

有一个 32 位应用程序（称为 CQG 的电子交易应用程序）为外部访问提供 COM API。我有从 Excel、.NET（C++、VB 和 C#）和 shell VBScript 访问此 API 的示例程序和脚本。我将这些 .NET 应用程序作为源代码和编译后的可执行文件（32 位，在 Windows XP 上编译）。

现在我有了 Windows Vista Home 64 位，这让我头晕目眩。Excel 示例工作得很好（在 Excel 2003 中）。编译的 .NET 示例可执行文件也可以工作。

但是，当我尝试运行转换为 Visual Studio C# 表达式并由其编译的 .NET C# 示例或运行 VBScript 脚本时，尝试创建对象时出现错误 80004005。最初 .NET 应用程序也给了我 80040154 但后来我想出了如何让它生成 32 位代码而不是 64 位代码，所以现在 C# 和 VBScript 应用程序中的错误是相同的。这就是我目前取得的所有进展。

是的，我尝试从我的 VBS 上的 SysWOW64 文件夹运行 32 位版本的 cscript.exe/WScript，但结果仍然相同 (80004005)。

如何解决这个问题呢？我几乎已经准备好相信这实际上是不可能的，但是 Excel VBA 可以工作并且在 Windows XP 上编译的 .NET 可执行文件运行得很好，这让我很生气。应该有办法打败这个东西（一些可能只有 Windows Vista 开发人员知道的秘密）！我将不胜感激任何帮助！

PS：我相信代码示例在这里没有多大意义，但这是失败的 VBScript 行：

```
Set CEL = WScript.CreateObject("CQG.CQGCEL.4.0", "CEL_") 
```

这是 C#：

```
CQGCEL CEL = new CQGCEL(); 
```

更新：当然，忘了说[UAC](http://en.wikipedia.org/wiki/User_Account_Control)已关闭。我正在使用具有管理员权限的帐户工作。

我还尝试查看使用 Process Monitor 读取了哪些注册表项，但对于该对象的 GUID，一切看起来都正常。我无法识别其他一些 GUID，所以我不确定它们是否重要。

这个 COM 对象是否有可能使用 Internet Explorer 并得到错误的对象（例如 Internet Explorer 7 而不是 Internet Explorer 6 引擎或其他东西）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-29T07:12:43.013

对于 64 位机器，您必须记住许多事情。这些是过去让我感到困惑的一些事情。

1.  [为.NET](http://en.wikipedia.org/wiki/.NET_Framework)中的任何 CPU 构建意味着它将在 64 位机器上以 64 位运行。
2.  许多 COM 组件似乎只是 32 位的（我知道这是一个概括，但通常是这样）。为了使用它们，您需要将应用程序构建为 32 位 (x86)。
3.  64 位 Windows 具有不同的 32 位和 64 位注册表节点。例如，如果您以 64 位运行 regedit，您将看到 HKLM\Software\Wow6432Node 和 HKCU\Software\Wow6432Node。这包含 32 位应用程序的所有信息。

我的建议是构建一个 32 位应用程序，看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-20T02:14:14.123

问题可能是 DEP。

我遇到了和你完全相同的问题，并从 CQG 的技术支持那里得到了一些帮助。Windows Vista 和 Windows 7 默认开启数据执行保护。您可以使用具有管理员权限的命令提示符将其关闭

```
bcdedit.exe /set {current} nx AlwaysOff 
```

稍后，如果需要，可以使用

```
bcdedit.exe /set {current} nx AlwaysOn 
```

不会提示重新启动，但这是必要的。您可以使用检查您的 DEP 策略

```
wmic OS Get DataExecutionPrevention_SupportPolicy 
```

其中`0`is `Always off`, `1`is `Always On`, `2`is `Opt in`(和默认值), `3`is `Opt Out`.

将我的更改为 Always Off 并重新启动后，我能够编译而不会抛出 80004005 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-29T02:21:58.017

您可以尝试一些有用的事情：

1.  运行[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，并将输出过滤到失败的进程。查看是否报告了任何奇怪的错误。

2.  同样，尝试在非托管调试器下运行并查看是否抛出任何其他第一次机会异常。这也可以让您确认是否正在将 inproc COM dll 加载到进程中。

3.  尝试关闭 UAC 并查看会发生什么。

# visual-studio - Visual Studio 附加到进程

> ID：396935
> 
> 赞同：1
> 
> 时间：2008-12-29T01:13:03.957
> 
> 标签：visual-studio, hook

这个工具是如何使用的？不是调试器，我的意思是工具 > 附加到进程。

这是否意味着我能够将 DLL 动态链接到另一个应用程序，或者我的想法远不止于此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-29T01:17:28.567

它与“调试”>“附加到进程”相同。它使您能够调试正在运行的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-29T23:43:07.837

它非常适合调试在您的机器上运行的 Web 应用程序。我们经常使用它来调试 webpart 和 SharePoint。

# sql - 如何使用纯 SQL 选择 N 个随机行？

> ID：396943
> 
> 赞同：11
> 
> 时间：2008-12-29T01:20:27.843
> 
> 标签：sql, random

我们如何结合[如何在 SQL 中请求随机行？](https://stackoverflow.com/questions/19412/how-to-request-a-random-row-in-sql)和[SQL Server 2005](https://stackoverflow.com/questions/183124/multiple-random-values-in-sql-server-2005)中的多个随机值以使用单个纯 SQL 查询选择 N 个随机行？理想情况下，如果可能，我想避免使用存储过程。这甚至可能吗？

**澄清**：

1.  纯 SQL 是指尽可能接近 ANSI/ISO 标准。
2.  解决方案应该“足够有效”。授予 ORDER BY RAND() 可能有效，但正如其他人指出的那样，这对于中型表是不可行的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-29T01:25:09.143

您的问题的答案在第二个链接中：

```
SELECT * FROM table ORDER BY RAND() LIMIT 1 
```

只需更改限制，和/或重写 SQL Server：

```
SELECT TOP 1 * FROM table ORDER BY newid() 
```

现在，这*严格*回答了你的问题，但你真的不应该使用这个解决方案。只要在一张大桌子上试一试，你就会明白我的意思。

如果您的键空间是连续的，要么没有孔，要么只有很少的孔，并且如果孔很少，您不太担心某些行被选中的机会比其他行略高，那么您可以使用一种变体，您计算要随机检索的键，范围从 1 到表中的最高键，然后检索键等于或大于您计算的数字的第一行。如果您的键空间有孔，您只需要“高于”部分。

该 SQL 留给读者作为练习。

* * *

**编辑**：注意，这里对另一个答案的评论提到，*纯 SQL*可能意味着 ANSI 标准 SQL。如果是这样，那就没有办法了，因为没有标准化的随机函数，也不是每个数据库引擎都以相同的方式对待随机数函数。我见过的至少一个引擎通过调用一次并重复所有行的计算值来“优化”调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-30T18:56:39.240

我不了解纯 ANSI，这并不简单，但您可以在此处查看我对类似问题的回答： [来自 Sql 数据库的简单随机样本](https://stackoverflow.com/questions/249301/simple-random-samples-from-a-mysql-database)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:50:35.733

这是一个潜在的解决方案，它可以让您平衡获得少于 N 行的风险与来自表“前面”的抽样偏差。这假设 N 与表的大小相比很小：

```
select * from table where random() < (N / (select count(1) from table)) limit N; 
```

这通常会对表的大部分进行采样，但可以返回少于 N 行。如果有一些偏差是可以接受的，那么分子可以从 N 更改为 1.5*N 或 2*N 以使返回 N 行的可能性很大。此外，如果需要随机化行顺序，而不仅仅是选择一个随机子集：

```
select * from (select * from table
                where random() < (N / (select count(1) from table)) limit N)
 order by mod(tableid,1111); 
```

这个解决方案的缺点是，至少在 PostgreSQL 中，它使用表的顺序扫描。较大的分子将加快查询速度。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T19:18:12.950

这可能会帮助你：

```
SELECT TOP 3 * FROM TABLE ORDER BY NEWID() 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-04-11T09:16:58.610

使用下面的代码，您可以实现您正在寻找的相同..

```
select top 1 * from student1 order by newid() 
```

更改前 1 的 N 值，这样您将收到该数量的随机记录。

# php - 检测当前标签

> ID：396947
> 
> 赞同：0
> 
> 时间：2008-12-29T01:26:19.533
> 
> 标签：php, javascript, html

是否可以检测页面是否在 2 个不同的浏览器中打开？

我已经构建了一个小型应用程序，将一些数据存储在 $_SESSION 中，问题是当打开多个选项卡时，会话变量会被覆盖（搜索表单中的搜索过滤器），因此选项卡显然可能显示相同的结果不同的搜索。

这个应用程序使用的主要浏览器是 IE，所以花了一段时间才解决这个问题，应用程序变得越来越大，更难修改。

在我修复对此搜索的所有引用之前，我想做一个“快速和肮脏的修复”并拒绝打开具有相同页面的两个选项卡，或者至少显示一个警告..

编辑：@arjun：是的，我知道，但是当用户返回搜索页面时我必须恢复搜索过滤器:) 所以 $SESSION 是解决这个问题的方法。此外，过滤器由 AJAX 发送，当您有很多过滤器时很难调试（GET 大小有限，所以我使用 POST）

@tomhaigh：谢谢..但这是我现在想要做的，但这需要一段时间，因为这个选项卡“东西”会影响整个应用程序，我必须更改所有模块中的过滤器......我现在正在寻找快速而肮脏的东西。提示：我不想使用 time() 和 rand()，因为这些函数可以（并且最终会）生成重复的数字。在新的“重写”中，我使用 PHP 中的 microtime 和 JS 中的 Date.getTime() 并连接 theese 2 以生成真正唯一的 id。另外，我编写了一个函数来不时解析 SESSION 并清理超过 2 小时的存储过滤器，这样它就不会变得太大。

@Gortok：我知道..但是设计时考虑到了 IE6，大多数用户（大约 90%）在登录这个应用程序时仍然使用 IE6 ......所以我从来没有看到需要考虑多个打开的标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-29T02:19:00.707

我建议避免使用 $_SESSION 来存储搜索过滤器，而是将它们编码到搜索查询字符串中（即 /search.php?filter1=val&filter2=val 等）。这样，每个窗口都有一个唯一的 URL，并避免破坏另一个窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T01:58:56.033

这是一个设计问题，应该尽快解决。但是，一种快速且肯定是肮脏的处理方法是将客户端的 IP 地址存储在 $_SESSION ( `$ip=$_SERVER['REMOTE_ADDR'];`) 中，然后检查并且不创建新会话或在从该地址发出多个请求时显示警告。这会给通过 LAN 共享相同 IP 地址的访问者带来问题。我想不出更多了..快（或脏）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-29T10:33:24.543

我同意 arjun 的回答，但如果您必须为此使用会话，那么您可以创建一个数组，其中包含 PHP 会话中每个搜索的信息。

例如每次提交表单时

```
$key = md5(rand(time(), 1));
if (!isset($_SESSION['search_filters'])) {
   $_SESSION['search_filters'] = array();
}

$filters = & $_SESSION['search_filters'][$key];

//store stuff
$filters = array( 'something' => true ); 
```

然后你可以构造一个像 results.php?key=$key 这样的 url，然后通过

```
$filters = &$_SESSION['search_filters'][$_GET['key']];
if (!isset($filters)) die('cannot find search');

//do stuff with data
print_r($filters); 
```

您将遇到的一个问题是，随着用户执行更多搜索，会话将变得越来越大，我再次选择 arjun 的答案，但我想我会添加另一种可能的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-29T01:28:06.830

永远不要拒绝用户的基本可用性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-29T01:48:19.143

我看到的两个问题：

1.  您拒绝用户在多个选项卡中打开网页的能力——这几乎是网络应用程序的要求。
2.  这个问题带来了一个设计问题。

您可能需要考虑将`$_SESSION`变量更改为[单例](http://www.developertutorials.com/tutorials/php/php-singleton-design-pattern-050729/page1.html)，并且不允许它被多个页面视图覆盖。

# .net - 生成 4x4x4 数独板的更好/好方法？

> ID：396955
> 
> 赞同：2
> 
> 时间：2008-12-29T01:32:47.740
> 
> 标签：.net, algorithm, optimization

当我有时间的时候，为了好玩，我喜欢编写游戏代码来看看它有多难，或者只是因为我想从内部了解它是如何工作的，或者只是为了个人挑战。我只是喜欢编码。现在，我做了[这些](http://pages.videotron.com/spirch/FredGames)。

所以我做了一个数独板。首先它是普通的 3x3x3 板，但后来有人让我做一个 4x4x4 板。我成功了，但我的算法很慢。

问题是，**您将如何为 4x4x4（或更多）数独板进行快速算法**？

我当前的算法是这样工作的：我将用一个随机数填充网格 1，确保我不会放回相同的数字，然后切换到网格 2。当我处于 0.0 或网格中的任何其他位置时我从网格 1 中删除任何可能的数字。对于网格中的每一行/列，我都会这样做。（现在你可以看到英语不是我的第一语言，所以如果很难理解，我很抱歉。）

* * *

**更新：**
几个月后的一点跟进。

我目前的解决方案可以在[这里找到](http://www.codeproject.com/KB/vb/CodeBehindSudoku.aspx)

所以当我开始这个问题时，它每 30-50 秒做 1 个网格，现在每秒超过 300 个

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-29T05:06:47.450

考虑以下网格：

```
 1  2  3  4 |  5  6  7  8 |  9 10 11 12 | 13 14 15 16
 5  6  7  8 |  9 10 11 12 | 13 14 15 16 |  1  2  3  4
 9 10 11 12 | 13 14 15 16 |  1  2  3  4 |  5  6  7  8
13 14 15 16 |  1  2  3  4 |  5  6  7  8 |  9 10 11 12
------------+-------------+-------------+------------
 2  3  4  1 |  6  7  8  5 | 10 11 12  9 | 14 15 16 13
 6  7  8  5 | 10 11 12  9 | 14 15 16 13 |  2  3  4  1
10 11 12  9 | 14 15 16 13 |  2  3  4  1 |  6  7  8  5
14 15 16 13 |  2  3  4  1 |  6  7  8  5 | 10 11 12  9
------------+-------------+-------------+------------
 3  4  1  2 |  7  8  5  6 | 11 12  9 10 | 15 16 13 14
 7  8  5  6 | 11 12  9 10 | 15 16 13 14 |  3  4  1  2
11 12  9 10 | 15 16 13 14 |  3  4  1  2 |  7  8  5  6
15 16 13 14 |  3  4  1  2 |  7  8  5  6 | 11 12  9 10
------------+-------------+-------------+------------
 4  1  2  3 |  8  5  6  7 | 12  9 10 11 | 16 13 14 15
 8  5  6  7 | 12  9 10 11 | 16 13 14 15 |  4  1  2  3
12  9 10 11 | 16 13 14 15 |  4  1  2  3 |  8  5  6  7
16 13 14 15 |  4  1  2  3 |  8  5  6  7 | 12  9 10 11 
```

假设我没有打错字，很明显（从它的构造模式来看）这符合数独布局的要求（每个值 1..16 在每行、每列和 4x4 子网格中恰好出现一次）。

此外，很明显，以下每个更改都满足了要求（假设 1-origin 索引）：

1.  *列交换*：交换位于同一子网格内的任意两列的全部内容（例如交换列 1 和 3，交换列 10 和 11，但**不**交换列 6 和 13）。

2.  *行交换*：交换位于同一子网格内的任意两列的全部内容（类似于#1 的索引）。

3.  *子网格列交换*：交换两列子网格的对应列（例如交换子网格第 2 列和第 4 列，即交换第 5 列和第 13 列、第 6 列和第 14 列、第 7 列和第 15 列、第 8 列和第 16 列）。

4.  *子网格行交换*：交换两行子网格的对应行（类似于#3的索引）。

因此，基于上述事实，策略是从上面显示的网格开始，然后进行一些合适的迭代次数（您可以通过实验确定），随机选择四种变换之一，并将其​​应用于随机选择的满足转换要求的索引。

> 例如，要应用变换#1，在范围 (1..4) 中随机选择一个子网格列号，然后`sgcn`在范围 (1..4) 中随机选择两个不同的列号。交换列和中的所有值。`cn1``cn2``(sgcn - 1) * 4 + cn1``(sgcn - 1) * 4 + cn2`

通过从（任何）合法网格开始，并执行保持合法性的转换，可以保证结果是合法的。然而，随着应用的变换数量的增加，人类观察者越来越难以区分模式和随机性。

用空白替换“加扰”网格中的值以获得所需的难度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-29T01:39:11.767

你目前的算法是什么？

[我想维基百科的数独算法](http://en.wikipedia.org/wiki/Algorithmics_of_sudoku)页面上讨论的算法可以扩展到 4x4x4。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-29T04:02:36.627

可以使用用 Python 编写的[数独生成器。](http://davidbau.com/archives/2006/09/04/sudoku_generator.html)关于作者如何生成数独板的解释（算法）在该页面上，并提供了源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-31T17:53:17.323

这是 joel.neely 建议的代码

为 3x3x3 传递 3，为 4x4x4 传递 4 等

```
Public Class Class1

Private aSquare(,,) As Integer
Private iSquare As Integer

Sub New(ByVal squareSize As Integer)

    iSquare = squareSize
    ReDim aSquare(iSquare - 1, iSquare - 1, CInt(iSquare ^ 2 - 1))

    createSquare()
    rndSquare()

End Sub

Private Sub createSquare()
    Dim i As Integer, j As Integer, k As Integer

    For i = 0 To aSquare.GetUpperBound(0)
        For j = 0 To aSquare.GetUpperBound(1)
            For k = 0 To aSquare.GetUpperBound(2)
                If i = 0 And j = 0 Then
                    aSquare(i, j, k) = k + 1
                ElseIf j = 0 And i > 0 Then
                    If (k + i) Mod (iSquare) = 0 Then
                        aSquare(i, j, k) = aSquare(i - 1, j, k) - (iSquare - 1)

                    Else
                        aSquare(i, j, k) = aSquare(i - 1, j, k) + 1
                    End If
                Else
                    aSquare(i, j, k) = aSquare(i, j - 1, k) + iSquare
                End If

                If aSquare(i, j, k) > iSquare ^ 2 Then
                    aSquare(i, j, k) = aSquare(i, j, k) - CInt(iSquare ^ 2)
                End If
            Next
        Next
    Next
End Sub

Private Sub rndSquare()
    Dim i As Integer

    Randomize()

    For i = 0 To CInt(iSquare ^ 2)

        Select Case CInt(Rnd() * 3)
            Case 0
                rndBigCol()
            Case 1
                rndBigRow()
            Case 2
                rndLittleCol()
            Case 3
                rndlittleRow()
        End Select

    Next

End Sub

Private Sub rndBigCol()
    Dim square As Integer
    Dim rnd1, rnd2 As Integer
    Dim i As Integer, j As Integer, k As Integer

    Randomize()

    For k = 0 To iSquare
        Do
            rnd1 = CInt(Rnd() * aSquare.GetUpperBound(1))
            rnd2 = CInt(Rnd() * aSquare.GetUpperBound(1))
        Loop Until rnd1 <> rnd2

        For i = 0 To aSquare.GetUpperBound(0)
            For j = 0 To aSquare.GetUpperBound(2)
                square = aSquare(i, rnd1, j)
                aSquare(i, rnd1, j) = aSquare(i, rnd2, j)
                aSquare(i, rnd2, j) = square
            Next
        Next
    Next
End Sub

Private Sub rndBigRow()
    Dim square As Integer
    Dim rnd1, rnd2 As Integer
    Dim i As Integer, j As Integer, k As Integer

    Randomize()

    For k = 0 To iSquare
        Do
            rnd1 = CInt(Rnd() * aSquare.GetUpperBound(0))
            rnd2 = CInt(Rnd() * aSquare.GetUpperBound(0))
        Loop Until rnd1 <> rnd2

        For i = 0 To aSquare.GetUpperBound(1)
            For j = 0 To aSquare.GetUpperBound(2)
                square = aSquare(rnd1, i, j)
                aSquare(rnd1, i, j) = aSquare(rnd2, i, j)
                aSquare(rnd2, i, j) = square
            Next
        Next
    Next
End Sub

Private Sub rndLittleCol()
    Dim square As Integer
    Dim rnd1, rnd2, rnd3 As Integer
    Dim i As Integer, k As Integer, l As Integer

    Randomize()

    For k = 0 To iSquare * 2
        Do
            rnd1 = CInt(Rnd() * aSquare.GetUpperBound(1))
            rnd2 = CInt(Rnd() * (iSquare - 1))
            rnd3 = CInt(Rnd() * (iSquare - 1))
        Loop Until rnd2 <> rnd3

        For i = 0 To aSquare.GetUpperBound(0)
            For l = 0 To (iSquare - 1)
                square = aSquare(i, rnd1, rnd2 + (l * iSquare))
                aSquare(i, rnd1, rnd2 + (l * iSquare)) = aSquare(i, rnd1, rnd3 + (l * iSquare))
                aSquare(i, rnd1, rnd3 + (l * iSquare)) = square
            Next
        Next
    Next
End Sub

Private Sub rndlittleRow()
    Dim square As Integer
    Dim rnd1, rnd2, rnd3 As Integer
    Dim j As Integer, k As Integer, l As Integer

    Randomize()

    For k = 0 To iSquare * 2
        Do
            rnd1 = CInt(Rnd() * aSquare.GetUpperBound(0))
            rnd2 = CInt(Rnd() * (iSquare - 1))
            rnd3 = CInt(Rnd() * (iSquare - 1))
        Loop Until rnd2 <> rnd3

        rnd2 *= iSquare
        rnd3 *= iSquare

        For j = 0 To aSquare.GetUpperBound(1)
            For l = 0 To (iSquare - 1)
                square = aSquare(rnd1, j, rnd2 + l)
                aSquare(rnd1, j, rnd2 + l) = aSquare(rnd1, j, rnd3 + l)
                aSquare(rnd1, j, rnd3 + l) = square
            Next
        Next
    Next
End Sub
End Class 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-01T00:06:24.107

好的，我发现了为什么 3x3x3 的速度如此之快，但 4x4x4 的速度却很慢

这是我的回溯逻辑，非常糟糕，现在最多需要 20 秒（至少在我的电脑上），其中大部分时间不到 5 秒

# sharepoint - 共享点密码更改

> ID：396963
> 
> 赞同：0
> 
> 时间：2008-12-29T01:42:01.357
> 
> 标签：sharepoint, sharepoint-2007

我是 Sharepoint 新手，但具有讽刺意味的是，我现在是 Sharepoint 管理员。在我的公司，我们有大约 200 名员工。我为他们所有人创建了帐户，但我需要帮助他们更改密码，因为他们更喜欢使用自己喜欢的密码。我只是想知道：他们有什么办法可以自己更改密码？

也许这只是一个愚蠢的问题，但我需要你们的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-29T11:57:17.013

看看[SharePoint 用户更改密码](http://www.codeplex.com/userchangepassword)：

> **项目描述**：
> 
> *   用于更改密码用户的 Web 部件
> 
> **系统要求**：
> 
> *   框架 3.5
> *   MOSS 2007 或 WSS 3.0
> 
> **特性**：
> 
> *   用户可以更改域密码
> *   写入域策略，当新密码错误时
> *   在文本框中显示/隐藏文本
> *   功能 用户必须在下次登录时更改密码

我希望这有帮助

# database - 在服务器上存储多维数组的最佳方法？

> ID：396973
> 
> 赞同：2
> 
> 时间：2008-12-29T01:53:18.790
> 
> 标签：database, arrays

我正在开发一个基于网络的回合制策略游戏，它发生在一个 10x10 的棋盘上。

每个图块代表一块土地，并有自己的一组统计数据（例如，收入、人口、生育率、自然资源）。

每次客户端加载时，它都会下载游戏的所有信息（即，不需要只加载一个图块的统计数据）。棋盘大小是静态的，即总是正好有 100 个棋子。

在服务器上存储这些数据的最佳选择是什么？（忽略键等）

*   在数据库中：包含（每个图块的统计数量）字段和每个游戏 100 条记录的表。
*   在数据库中：每场比赛有一条记录和 100*(num stats/tile) 字段的表
*   在一个平面文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-29T05:39:54.230

使用数据库，每个图块一行。由于每个游戏回合可能不会修改很多棋盘图块，因此最好将它们分开。同样，如果您需要

```
Tiles (
    tile_id bigint autoincrement;
    game_id bigint; // foreign key to game table
    x tinyint;
    y tinyint;
    fertility type;
    // etc.
    primary key (tile_id)
    unique key (game_id, x, y)
);

Games (
   game_id bigint autoincrement;
   status enum(pendingplayers, started, finished, pendingdeleteorarchive)
   turn_number int;
   date_started date;
   date_ended date;
); 
```

将这些东西放在数据库中的好处之一是它可以在更新东西时为您节省一些精力。例如，如果您的土地的一个特征每回合都发生变化，您可以只更新数据库，而不是循环遍历图块：

```
Update tiles set fertility = fertility * 0.99 where game_id = :x and land_type = 'forest'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T02:32:50.600

不久前在#django IRC 频道上提出了这个确切的问题，尽管提问者想要一个用于不同屏幕的可变大小的游戏板。

总体建议是首先使用一个漂亮、干净、规范化的方法，如果遇到性能问题，则优化到非规范化状态。首先走规范化路线的主要原因是，数据库被构建为相当容易地处理大量关系，并且如果它们不经常更改，可以轻松缓存它获得的结果。

我所说的规范化设置是（伪代码）：

```
Table Board
{
    BigInt id;
    String name;
    Date date_played;
    etc...
}

Table Tile
{
    BigInt id;
    ForeignKey board;  // what board the tile belongs to
    ManyToMany items;  // items on this tile
    ManyToMany players;   // players on this tile
    etc...
}

Table Item
{
    BigInt id;
    String name;
}

Table Player
{
    BigInt id;
    String name;
}

// many-to-many link table
Table TileItem
{
    BigInt id;
    BigInt tile; // tile id
    BigInt item;  // item id
}

// do the same thing for players
Table TilePlayer
{
    BigInt id;
    BigInt tile;
    BigInt player;
} 
```

您将在每块板上存储 100 条记录，但如果您问我，这是值得的。这使得查找所有游戏板图块变得容易。写入单个磁贴可以只使用其 ID，没有困难的行解释或任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-29T05:13:52.070

如果玩家在单个“回合”上的操作只能影响单个单元格（或一小组相邻单元格），那么您希望以允许部分更新而无需将整个棋盘重写到磁盘的方式存储数据（并阅读整个董事会）每次。

鉴于每场比赛的单元格数量较少，我倾向于使用 {game ID, x 坐标, y 坐标} 键的数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-29T01:58:33.883

我会创建一个表格，其中每一行代表游戏中的单个图块。

然后，我将有一列用于 X（从 1 到 10）和 Y（从 1 到 10）。根据您的要求，您还可以存储它是哪个游戏（如果您想一次保留多个游戏）以及它是哪个回合（如果您想保留游戏的历史）。

所以你会有：

Tile: GameID
Turn int X int Y int Income Population Fertility etc

主键是前 4 列。GameID 可能最终会成为 Game 表的外键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-29T02:00:16.610

从实体之间的实体关系图开始。从你的简短描述中我可以看到一些：

每个游戏一个棋盘游戏有一个时间戳，显示它何时启动棋盘有很多瓷砖 - 现在 10x10，可能是任意的 一个瓷砖有很多统计数据

还有一些你似乎忽略了。转牌意味着不止一名玩家。一个游戏会有很多玩家。

您可能希望对统计信息加时间戳并保留更新历史记录。

这是一个面向对象的系统吗？你有没有想出一个对象模型？我会先从那个开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-29T02:00:57.373

如果您不打算搜索或订购板上的数据或其他类似的数据，我会说平面文件可以工作。但是您的用户可能“想要”住在数据库中？然后董事会数据也适合那里。也许只需将板以最适合您的格式存储在一个 varchar 字段中，XML 或序列化或其他格式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-29T02:04:16.617

你的问题不完整。

数据库用于（1）查询和（2）更新。您没有提到对数据的查询或更新。

存储数据对于数据库来说并不是一个特别好的用途。如果要存储数据，通常使用简单文件。数据库定期备份到简单文件，以便长期存储、备份和恢复。

如果没有查询也没有更新，那么一个简单的文件就可以了。

但是，如果有查询或更新，那么数据库可能是有意义的。当然，具体结构将取决于查询或更新的性质。

# python - 通过 Poplib 模块在 Python 中发送消息的命令？

> ID：396991
> 
> 赞同：1
> 
> 时间：2008-12-29T02:14:17.580
> 
> 标签：python, email, poplib

我在网上找到了许多涉及通过 Poplib 下载消息的教程，但找不到任何解释如何创建新消息的内容。这存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-29T02:24:51.223

正如 S.Lott 正确所说，您将需要一些 smtp，但要创建实际的电子邮件，请使用标准库中的[电子邮件](http://docs.python.org/library/email)包，然后使用消息的 as_string 方法发送它。

[多部分 MIME 的示例（这太酷了！）](http://code.activestate.com/recipes/52243/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-29T02:17:35.093

向自己发送电子邮件以创建消息。

SMTP 是电子邮件用于发送的协议。在 Python 中，您可以在[smtplib](http://docs.python.org/library/smtplib.html)中找到它。

有许多电子邮件 RFC。这里有几个。

SMTP - [RFC 821](http://www.faqs.org/rfcs/rfc821.html)

POP - [RFC 1939](http://www.faqs.org/rfcs/rfc1939.html)

IMAP - [RFC 1730](http://www.faqs.org/rfcs/rfc1730.html)************