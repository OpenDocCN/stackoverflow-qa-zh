# StackOverflow 问答 10103000-10103999

# android - 浏览器启动时在我的浏览器应用程序中设置 Cookies

> ID：10103005
> 
> 赞同：1
> 
> 时间：2012-04-11T09:10:25.147
> 
> 标签：android, session-cookies, android-browser

我正在开发一个应用程序来了解 android 浏览器和 cookie。

我正在为此使用 webview。当用户离开应用程序时，我将 cookie 存储在文件中，并且我想在下次用户启动我的浏览器时设置它们，他将被导航到他的上一个会话，因为我尝试使用 cookie 管理器中的 setcookie 方法，但有些 cookie 没有设置适当地。

这只是一个用于了解行为的测试应用程序。所以我还没有考虑会话安全。

这是正确的方法还是任何人都可以提出更好的方法来实现这一目标。

# include - 基于变量的条件编译到makefile

> ID：10103006
> 
> 赞同：0
> 
> 时间：2012-04-11T09:10:41.997
> 
> 标签：include, makefile, conditional-compilation

在我的 C/C++ 代码中，我想根据不同的编译包含或不包含文件。

目前我使用这个：

```
#ifndef __x86_64__
    #include <myLib.h>
#endif 
```

这给了我做平台是否是 32/64 位的可能性，但没有给我足够的自由。

我想将一个变量传递给我的makefile

```
make includeMyLib=1 
```

并取决于此具有以下内容：

```
#ifndef includeMyLib
    #include <myLib.h>
#endif 
```

你知道这样的事情是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:29:12.840

如果你使用 GNU make，你可以在`Makefile`:

```
ifdef includeMyLib
CFLAGS += -DincludeMyLib
endif 
```

这将更改编译器用来添加`#define` `includeMyLib`.

# build - 为我的 linux 系统启用 USB 主机功能

> ID：10103007
> 
> 赞同：0
> 
> 时间：2012-04-11T09:10:43.400
> 
> 标签：build, linux-kernel

我最近下载了新的 linux 内核源代码并在 ubuntu 上编译。在我的系统无法识别任何 USB 设备之后。**为了启用 USB 主机，是否需要对编译程序或制作文件进行任何更改？**

请帮助我摆脱这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:47:00.857

尽管配置不正确或不完整，可能会禁用 USB 支持。你没有提到你是如何配置内核的。

一个好的起点是默认 Ubuntu 内核的现有配置。引导中应该有一个配置文件，例如`/boot/config-3.1.0-1-amd64`.

将该文件作为 复制到您的内核目录`.config`，然后用于`make oldconfig`更新配置。安装内核时也要注意创建相应的 initrd。

# php - 直接 HTML 或 PHP 生成的 html

> ID：10103012
> 
> 赞同：1
> 
> 时间：2012-04-11T09:11:00.507
> 
> 标签：php, html

什么更好/更快：

例如：

**静态/直接 HTML：**

```
<?php
for($i=0;$i<$sth;$i++) {
?>
<tr>
<td>
<?php echo $content;  ?>
</td>
</tr>
<?php
}
?> 
```

或者

**PHP 生成的 HTML：**

```
<?php

for($i=0;$i<$sth;$i++) {

echo "<tr><td>".$content."</td></tr>";

}

?> 
```

我选择哪个选项有关系吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:14:14.867

这不是速度问题，它可能会因用例而异，而是使代码干净且可维护。实际上，这两个示例都生成了难以维护和阅读的代码。我建议使用简单轻量级的模板引擎将所有逻辑与表示分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:13:29.967

我认为两者之间没有实质性区别，问题应该是“哪个更具可读性”恕我直言，我认为使用 php 和 html 内联比回显 php 可读性差得多。但这只是我的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T09:19:23.070

更好：生成的html。使用 php 生成的 html 更容易维护和阅读。

更快：没有明显的速度差异。然而，在从数据库等加载内容的大型动态网站上，输出可能需要几分之一秒的时间。但是，您花在更新静态 html 文件上的时间远比编辑动态内容要多得多。

动态：]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T09:19:28.610

在这种情况下，“PHP 生成的 HTML”会更快，因为您只执行一个回显，而在“静态/直接 HTML”中，您正在执行 $sth 回显。如果 $sth 为零，那么“静态/直接 HTML”会更快。

但说真的，页面被解析和优化/规范化，所以它没有任何区别。使用更少的解析可能会更快，因为上下文切换更少，但这是最小的部分（与运行它相比），因此它的差异可以忽略不计。

只要选择你觉得舒服的风格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T09:25:04.247

两个代码代表同一个东西，在速度上没有区别，但是第二个代码可能会快一点，因为代码不包含多个入口和出口标志。

```
<?php ?> 
```

这将进行得更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T09:13:07.173

第一种方法应该更快，因为它不涉及大量字符串连接。它在代码可读性方面也更好。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-11T09:14:23.437

我认为第一个解决方案：

它更清晰，不需要使用字符串的 php 详细说明来显示简单的静态内容

# iphone - 当服务器发生更改时立即获取更改

> ID：10103015
> 
> 赞同：1
> 
> 时间：2012-04-11T09:11:09.907
> 
> 标签：iphone, asynchronous, client-server

我想知道用户在服务器中输入或修改数据后立即在 iPhone 中获取数据的最佳方法是什么。我可以向服务器发送一个小时间间隔的请求，以检查服务器中所做的任何修改（如轮询）。我知道这很尴尬。请推荐一个最好的！

**编辑**

我不是在谈论推送通知。我需要一些数据，比如在进行板球比赛时，每次服务器中的分数更新时，我都需要在我的 iPhone 中获取该数据（通过 XML、JSON 或任何其他介质）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:13:49.690

您在谈论推送通知：http: [//developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

这些让您可以将特定消息从您的服务器发送到选择接收来自您的应用程序的推送通知的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:16:02.713

您正在寻找的东西被称为[“推送技术”](http://en.wikipedia.org/wiki/Push_technology)（同一想法有几种变体）。就您而言，我认为最适合的是“长轮询”。简而言之：

1.  你轮询指定一个很长的超时时间；
2.  服务器在收到一些新数据之前不会回复，因此只要超时允许，您的请求就会保持打开状态；
3.  一旦服务器得到新数据，它就会回复，你会立即得到更改；
4.  当超时到期时，您发送一个新请求。

进行长轮询的事实将减少您担心“短”轮询的开销。事实上，通过短轮询的想法是发送频繁的请求，并且循环时间非常短。这将使您不断发送请求以检查新数据。通过长轮询，您仅在获得新数据或超时触发（可能是几分钟）时才发送请求。

在[这篇 SO post](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)中，您将找到实现它的方法。

# .net - .NET 中的大浮点数（单个）

> ID：10103017
> 
> 赞同：4
> 
> 时间：2012-04-11T09:11:19.773
> 
> 标签：.net, floating-point

当我尝试将大量数字存储到浮点数`float varr = 123456789;`中时，变量`varr`的值`123456792.0`不像`123456789.0`我预期的那样。为什么？

有什么解决办法吗？

我不能使用双精度或十进制，因为我在内存中被限制为 4 个字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:14:19.580

这是因为浮点变量的精度有限。改用双精度。

正如您在此处看到的，float 的精度仅为 7 位，而 double 的精度为 13：http: [//msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.80%29.aspx)

使用四个字节的内存，您可以表达大约。40 亿个不同的值，即一个 9 位的十进制数。您必须问自己要显示的数字是否适合该范围。例如，如果您要存储从 0 到 999 999 999 的数字，则四个字节就足够了。如果您有从 1 000 000 000 到 1 999 999 999 的号码，那么它也足够了。在这种情况下，您需要通过减去 1 000 000 000 将输入数字（双精度数）转换为整数。读取值时，您可以执行逆运算。

可以将此原理扩展到显示其他数字范围或精度较低的更大范围。但是您必须自己编写转换代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:14:56.873

如果您需要更高的精度，您可以使用[double](http://msdn.microsoft.com/it-it/library/678hzkk9%28v=vs.100%29.aspx)或[decimal](http://msdn.microsoft.com/it-it/library/364x0z75%28v=vs.100%29.aspx)。
无论如何请记住，浮点数总是近似的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:26:29.800

如果您可以使用整数 ( `int`)，以及 32 位整数（4 个字节），您可以存储该数字，并且不会遇到任何精度问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:32:41.940

类型的精度`float`意味着这种限制。您可以改用`double`类型。

`float`C# 中的 type 符合[IEEE 754-2008](http://en.wikipedia.org/wiki/IEEE_754-2008) [binary32 格式（单精度浮点格式）](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)

来自[维基百科](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)：

> IEEE 754 标准将 binary32 指定为：
> 
> *   符号位：1位
> *   指数宽度：8位
> *   有效精度：24（23 显式存储）
> 
> 这给出了 6 到 9 位有效小数位的精度（如果将具有最多 6 个有效小数位的十进制字符串转换为 IEEE 754 单精度，然后转换回相同的有效小数位数，则最终字符串应与原始字符串匹配；和如果将 IEEE 754 单精度转换为具有至少 9 位有效小数的十进制字符串，然后再转换回单精度，则最终数字必须与原始数字匹配）。
> 
> 符号位决定数字的符号，也是有效数的符号。Exponent 是从 −128 到 127（2 的补码）的 8 位有符号整数或从 0 到 255 的 8 位无符号整数，这是 IEEE 754 binary32 定义中公认的有偏形式。在这种情况下，指数值 127 表示实际为零。真有效位包括二进制点右侧的 23 个小数位和一个值为 1 的隐式前导位（二进制点左侧），除非指数以全零存储。因此，只有 23 位有效数位出现在内存格式中，但总精度为 24 位（相当于 log10(224) ≈ 7.225 个十进制数字）。

顺便说一句，我没有得到你的结果。我运行这段代码：

```
float varr = 123456789;
Console.WriteLine(varr.ToString("#")); 
```

我的输出是`123456800`。

# c++ - 具有限制指针的 OpenMP 因 ICC 失败而 GCC/G++ 成功

> ID：10103038
> 
> 赞同：0
> 
> 时间：2012-04-11T09:13:04.133
> 
> 标签：c++, g++, openmp, icc, restrict-qualifier

我使用乘法循环中的隐式 openMP 指令为[CRS](http://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_row_.28CSR_or_CRS.29)中的稀疏矩阵实现了一个简单的矩阵向量乘法。

完整的代码在 GitHub 中：[https](https://github.com/torbjoernk/openMP-Examples/blob/icc_gcc_problem/matxvec_sparse/matxvec_sparse.cpp)
://github.com/torbjoernk/openMP-Examples/blob/icc_gcc_problem/matxvec_sparse/matxvec_sparse.cpp 注意：很丑;-)

为了控制私有和共享内存，我使用了限制指针。`%u`在 64 位 Linux 上使用 GCC 4.6.3 编译它可以正常工作（除了两个关于命令和命令`unsigned int`的警告`printf`，但这不是重点）。

但是，在 64 位 Linux 上使用 ICC 12.1.0 编译它失败并出现以下错误：

```
matxvec_sparse.cpp(79): error: "default_n_row" must be specified in a variable list at enclosing OpenMP parallel pragma
    #pragma omp parallel \
    ^ 
```

有问题的变量和指针的定义

```
int default_n_row = 4;
int *n_row = &default_n_row; 
```

和 openMP 指令定义为

```
#pragma omp parallel \
  default(none) \
  shared(n_row, aval, acolind, arowpt, vval, yval) \
  private(x, y)
{
  #pragma omp for \
    schedule(static)
  for ( x = 0; x < *n_row; x++ ) {
    yval[x] = 0;
    for ( y = arowpt[x]; y < arowpt[x+1]; y++ ) {
      yval[x] += aval[y] * vval[ acolind[y] ];
    }
  }
} /* end PARALLEL */ 
```

用 g++ 编译：

```
c++ -fopenmp -O0 -g -std=c++0x -Wall -o matxvec_sparse matxvec_sparse.cpp 
```

用icc编译：

```
icc -openmp -O0 -g -std=c++0x -Wall -restrict -o matxvec_sparse matxvec_sparse.cpp 
```

* * *

*   使用 GCC/ICC 是否有错误？
*   这是我的代码中的设计问题导致*未定义的行为*吗？
    如果是这样，哪条线路是/正在导致它？
*   只是ICC和GCC之间的不一致吗？
    如果是这样，实现编译器独立性和兼容性的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:37:04.063

嗯。查看代码，很清楚 icpc 认为问题出在哪里，但如果不仔细阅读规范，我不确定哪个编译器在这里做正确的事情，g++ 还是 icpc。

问题不在于`restrict`关键字；如果您将所有这些都排除在外并失去了`-restrict`icpc的选择权，那么问题仍然存在。问题是你已经在那个并行部分`default(none) shared(n_row...)`中，但是`n_row`在程序开始时，它是一个指向`default_n_row`. icpc 要求在该 omp 并行部分中`default_n_row`也共享（或至少是*某些东西）。*

# c++ - 与模板类链接错误

> ID：10103040
> 
> 赞同：0
> 
> 时间：2012-04-11T09:13:10.123
> 
> 标签：c++, templates, g++, function-pointers, functor

我有一个类需要在各种不同的上下文中调用外部函数。我想让事情变得灵活，所以我使用了一个接口（受第三版数字食谱的启发），它应该与仿函数、函数指针等一起使用。一个简化的示例如下所示：

```
class MyClass {
  public:
    template <class T>
    MyClass(T &f_) { f = f_; }
  private:
    int (*f)(int);
};

int myFn(int i) {
  return i % 100;
}

int main() {
  MyClass test(myFn);
  return 0;
} 
```

到目前为止，一切都很好; g++ 编译它没有任何抱怨。在我的实际应用程序中，有更多的代码，所以我把事情分成了多个文件。例如，

测试2.h：

```
#ifndef __test2__
#define __test2__

class MyClass {
  public:
    template <class T>
    MyClass(T &f_);    
 private:
    int (*f)(int);
};

#endif 
```

测试2.cpp：

```
#include "test2.h"

template <class T>
MyClass::MyClass(T &f_) {
  f = f_;
} 
```

主.cpp：

```
#include "test2.h"

int myFn(int i) {
  return i % 100;
}

int main() {
  MyClass test(myFn);
  return 0;
} 
```

当我尝试使用 编译它`g++ test2.cpp main.cpp`时，我收到以下链接错误：

```
/tmp/ccX02soo.o: In function 'main':
main.cpp:(.text+0x43): undefined reference to `MyClass::MyClass<int ()(int)>(int (&)(int))'
collect2: ld returned 1 exit status 
```

g++ 似乎没有意识到我也在尝试编译 test2.cpp。关于这里可能发生的事情有什么想法吗？

谢谢，

——克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:18:38.767

模板类的实现必须对所有使用它们的翻译单元可见，除非它们是完全专用的。

这意味着您必须在标头中移动实现：

```
//test2.h
#ifndef __test2__
#define __test2__

class MyClass {
  public:
    template <class T>
    MyClass(T &f_);    
 private:
    int (*f)(int);
};

template <class T>
MyClass::MyClass(T &f_) {
  f = f_;
}

#endif 
```

# sql - 如何检查合并复制是否真的完成

> ID：10103042
> 
> 赞同：1
> 
> 时间：2012-04-11T09:13:11.153
> 
> 标签：sql, replication

希望一些 SQL 复制天才可以帮助解决这个问题。

我们有一些手持设备在我们的 SQL 2008 R2 数据库上使用合并复制来保持本地数据库同步。

这在大多数情况下都有效，但客户端正在请求一份报告，该报告显示同步进行时的状态。

现在我正在查看合并期间的 msmerge_history 和 msmerge_session 表，我注意到它们在设备本身完成之前很久就声明完成了。

因此，客户端看到同步已成功，但由于某种原因，它在 5 分钟后失败。

如何查看客户端何时完成合并？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:05:54.673

@Gavin Mannion - 尝试使用[sp_replmonitorhelpmergesession](http://msdn.microsoft.com/en-us/library/ms187726.aspx)。请记住，您还需要在监视时检查结果集中的**Status**、**ErrorMessages**和**ErrorID**列值，以及**PercentageDone/Duration**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:38:31.123

这并不完全是一个答案，但 Microsoft 已向我们确认，我们无法从服务器实时监控订阅者进度。它只能从订阅者那里监控。

所以我们将不得不改变我们的订阅者的工作方式来通知服务器它的进度。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-11T10:11:40.930

这是代理配置不好的问题，因为他需要与服务器一起自动启动。最常见的情况是您在创建报告时看到*警告状态。*

所以需要重新配置代理：

```
sp_configure 'show advanced options',1 
reconfigure with override 
go 
sp_configure 'xp_cmdshell',1 
reconfigure with override 
go 
sp_configure 'Agent XPs',1 
reconfigure with override 
go 
```

然后检查是否正常：

```
net start sqlserveragent 
```

或从管理文件夹*“启动”*代理。

# actionscript-3 - 从桌面自动加载图像 (AS3)

> ID：10103043
> 
> 赞同：0
> 
> 时间：2012-04-11T09:13:17.863
> 
> 标签：actionscript-3, flash-cs5

我需要使用以下方法将外部图像从桌面加载到剪辑中：

> ```
> var myimage:File = File.desktopDirectory.resolvePath 
> ```

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:03:23.737

```
var imageClip:MovieClip = new MovieClip();
var imageLoader:Loader = new Loader();

function loadImage():void
{
    var file:File = File.desktopDirectory.resolvePath( "Your Image Path" );
    imageLoader.contentLoaderInfo.addEventListener( Event.COMPLETE, handleImageLoad );
    imageLoader.load( new URLRequest(file.url) );
}

function handleImageLoad( e:Event ):void
{
    trace('Complete')
    imageClip.addChild( imageLoader );
}

loadImage(); 
```

# model-view-controller - 将耦合域模型的逻辑放在哪里最好？

> ID：10103044
> 
> 赞同：0
> 
> 时间：2012-04-11T09:13:19.513
> 
> 标签：model-view-controller, software-design, domain-model

用户请求最新消息，消息从多个来源（帖子、用户、照片、评论）获取数据。你会如何为新闻建模？

拥有一个将这些表耦合起来的网关+一个从耦合的网关获取数据并将数据作为响应处理的服务是否很好？或者耦合其他模型的域模型（这意味着在其中一个网关中添加一个连接的长查询，在我看来需要一个单独的网关）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:41:49.870

我将创建一个 NewsService，因为它将协调新闻的创建，但会将任何特定责任推迟到适当的模型。如果它是一个新闻提要，比如在 facebook 中，我会创建另一个模型，NewsItem，它是在输入新帖子、照片等时创建的。这样，构建新闻的责任将更多地落入您的域模型和您的 NewsService实际上只是在编排列表的构建。根据您的应用程序，您甚至可以只使用 NewsRepository。

# php - php中的显式接口实现

> ID：10103052
> 
> 赞同：3
> 
> 时间：2012-04-11T09:14:01.483
> 
> 标签：php, interface

由于我是 C#-/.NET-guy，我习惯于*显式接口实现*- 就像这样：

```
public interface IBar
{
    bool Bacon();
}

public class Foo : IBar
{
    bool IBar.Bacon() {}
} 
```

**问题：**
这可以在 php 中完成吗？

**编辑：**
为了澄清，这是*隐含*的（而我想要的以及上面示例中的内容是*明确*的）：

```
public class Foo : IBar
{
    bool Bacon() {}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T09:15:42.667

PHP 支持接口，所以可以： http: [//php.net/manual/en/language.oop5.interfaces.php](http://php.net/manual/en/language.oop5.interfaces.php)

PHP 不区分隐式和显式实现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-06-01T21:56:23.460

鉴于下面的代码，我非常坚持与代码一起执行的任务：

> 当一个 ReptileEgg 孵化时，一个新的爬行动物将与产卵的物种相同。

当 Reptile 是一个接口时，如何在 ->hatch 内部创建一个新的爬虫？这是一个家庭作业，我没能及时弄清楚。它会让我发疯，直到我回去弄清楚。

```
<?php
interface Reptile
{
    public function layEgg() : ReptileEgg;
}

class FireDragon implements Reptile
{
    public function layEgg() : ReptileEgg {

    }
}

class ReptileEgg
{
    public function __construct(string $reptileType)
    {

    }

    public function hatch() : ? Reptile
    {
        return null;
    }
} 
```

# python - google app engine-python 的简单滑块验证码实现

> ID：10103053
> 
> 赞同：0
> 
> 时间：2012-04-11T09:14:02.967
> 
> 标签：python, google-app-engine, captcha

我创建了一个简单的 Web 应用程序，其中包含 recaptcha 身份验证。但是，我觉得这对我的用户群来说太难了。我想要一个简单且相当安全的解决方案，我可以毫不费力地与 GAE-py 一起使用，它使用类似滑块/拖放方法的东西。

像 Qaptcha 之类的东西。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:26:48.720

虽然 Qaptcha 是基于 PHP 的，但它实际上只是在用户滑动解锁后向服务器发送 AJAX 请求。

因此，您可以像这样指定自己的请求 url。

```
$('#QapTcha').QapTcha({
    ...
    PHPfile: '/your/server-side/qaptcha-handler'
}); 
```

然后只需响应 json 结果，`{"error":false}`它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:55:10.123

Qaptcha 看到使用 cookie。要在 appengine 上操作 cookie，请使用以下伪代码： `if response.cookies['iQaptcha'] is None:`

# php - 在准备好的语句中使用 htmlspecialchars() 或 htmlentities()

> ID：10103055
> 
> 赞同：1
> 
> 时间：2012-04-11T09:14:12.837
> 
> 标签：php, xss, htmlspecialchars

我正在使用准备好的语句来存储、检索和更新数据库中的数据或从数据库中更新数据。如果我使用准备好的语句，是否需要使用 htmlspecialchars() 或 htmlentities()？

据我了解，插入数据时不需要使用 htmlspecialchars() ，它只涉及输出的 html ......

我有一种情况，我正在使用准备好的语句来存储来自注册表单的用户输入，如下所示：

```
$stmt = $conn2->prepare("INSERT INTO users (username, email, password) VALUES (?, ?, ?)");
$stmt->bind_param('sss', $username, $email, $password);
$stmt->execute(); 
```

我有另一个脚本在登录并在屏幕上显示他们的用户名时检索用户名和密码，如下所示：

```
$stmt = $conn2->prepare("SELECT username FROM users WHERE username = ? AND password = ?");
$stmt->bind_param("ss", $username, $password);
$stmt->execute();
$stmt->store_result();

if ($stmt->num_rows == 1) {

$stmt->bind_result($name);
$stmt->fetch(); 
```

我还将用户名放入 SESSION 并像这样回显会话：

```
echo $_SESSION['user']['username'] 
```

在这个例子中，显示用户名时是否需要使用 htmlspecialchars() 或 htmlentities() ？这是输出HTML的意思吗？

如果是这样，我将在哪里实现 htmlspecialchars() 或 htmlentities()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:18:22.347

数据库不关心 HTML。

如果您要将数据插入 HTML 文档，请使用其中之一，并在插入 HTML 文档之前立即执行此操作（而不是在插入数据库之前，您可能出于其他目的再次需要原始数据）。

# android - 列表视图第一个元素不可点击

> ID：10103056
> 
> 赞同：1
> 
> 时间：2012-04-11T09:14:13.653
> 
> 标签：android, listview

我有一个片段中的元素列表。我想禁用列表的标题

[http://bugs.haploid.fr/file_download.php?file_id=856&type=bug](http://bugs.haploid.fr/file_download.php?file_id=856&type=bug)

这是我列表中单元格的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/stations_listView_layout">
    <com.infrabel.railtime.views.RobotoMediumTextView
        android:id="@+id/header_textview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="10dip"
        android:paddingBottom="5dip"
        android:layout_marginTop="29dip"
        android:text="A"
        style="@style/FragmentTitleSecondary">
    </com.infrabel.railtime.views.RobotoMediumTextView>

    <View
        android:id="@+id/header_bar"
        android:layout_width="match_parent"
        android:layout_height="2dip"
        android:background="@color/fragment_title_color">
    </View>

    <RelativeLayout
        style="@style/stations_listView_inner_layout"
        android:layout_width="fill_parent"
        android:layout_height="60dip">

        <com.infrabel.railtime.views.RobotoMediumTextView
            android:id="@+id/name"
            android:layout_width="fill_parent"
            android:layout_height="30dip"
            android:layout_gravity="center_vertical"
            android:textSize="@dimen/menu_list_item_primary_text_size"
            android:textColor="@color/grey_normal">
        </com.infrabel.railtime.views.RobotoMediumTextView>

        <com.infrabel.railtime.views.RobotoMediumTextView
            android:id="@+id/details"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginTop="25dip"
            android:textSize="@dimen/fragment_title_text_size"
            android:textColor="@color/grey_light">
        </com.infrabel.railtime.views.RobotoMediumTextView>
    </RelativeLayout>
</LinearLayout> 
```

我试图设置 android:clickable = false 或 android:focusable="false" 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:18:48.880

使某些 ListView 项目不可点击的一种方法是：

```
list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
        if(position == 0) {
                    // FIRST ITEM - DO NOTHING
        } else {
                    // DO SOMETHING IF YOU WISH...
        }

    }
}); 
```

另一种方法是修改您的自定义适配器：

```
list.setAdapter(new ArrayAdapter<String>(this, R.layout.item,
        listItems) {

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final TextView v = (TextView) super.getView(position,
                convertView, parent);
        if(position == 0) {
                v.setClickable(false);
                // havent tested this thou...
        }
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:13:59.540

知道了，我的 cell.xml 中有

所以每次我添加单元格时都会绘制文本。我们必须在主 xml 中声明它，而不是从我们的适配器更改文本：

```
String firstLetter = station.getTitle().substring(0, 1);
if (position == _alphaIndexer.get(firstLetter)) {
    TextView header = (TextView) activity.findViewById(R.id.header_textview);
    header.setText(firstLetter);
} 
```

# java - Spring MVC 控制器中的处理模型

> ID：10103058
> 
> 赞同：2
> 
> 时间：2012-04-11T09:14:16.503
> 
> 标签：java, spring, spring-mvc

我正在尝试实现我的第一个 Spring MVC 控制器，遵循 Spring 文档、一些教程和“Spring in Action”一书。

现在我有一个疑问：实现控制器方法我发现处理模型的差异。有时他们使用 a `Map<String, Object>`、一个`Model`对象或一个`ModelAndView`对象。

使用对象或其他对象有什么区别？选择一个而不是另一个的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:19:48.470

ModelAndView，包含模型和视图的名称。简而言之，ModelMap 仅包含有关模型的信息。

因此，使用模型和视图，您可以明确设置视图名称。

如果您只是设置模型并在控制器中返回一个字符串，则视图名称是从请求 uri 中推断出来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:15:05.967

Spring docs：“在正常情况下，ModelAndView 实例由视图名称和模型 Map 组成，其中包含 bean 名称和相应的对象（如命令或表单，包含参考数据）。” - 如果您必须从表单中收集条目、显示某些东西（dao 对象）等，它可以将对象传输到视图（或返回）。

---- 示例 ModelAndView 模型 = new ModelAndView(); 模型.addObject（路径）；
model.addObject("user",user);
model.addObject("问候",service.getMessage());

返回模型；

// ViewName, User Bean, MSG Bean

// 春季文档

公共接口控制器{

```
/**
 * Process the request and return a ModelAndView object which the DispatcherServlet
 * will render.
 */
ModelAndView handleRequest(
    HttpServletRequest request,
    HttpServletResponse response) throws Exception; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:57:50.623

ModelAndView 是 Web MVC 框架中模型和视图的持有者。请注意，这些是完全不同的。此类仅包含两者以使控制器可以在单个返回值中返回模型和视图。

它表示由处理程序返回的模型和视图，由 Dispatcher 解析。视图可以采用需要由 ViewResolver 对象解析的 String 视图名称的形式；

或者，可以直接指定视图对象。该模型是一个 Map，允许使用按名称键入的多个对象。

# android - 绘制图形多平台（IOS、WindowsPhone、Android）库

> ID：10103064
> 
> 赞同：5
> 
> 时间：2012-04-11T09:14:35.590
> 
> 标签：android, iphone, silverlight, windows-phone-7, graph

我正在为 windowsphone、iphone 和 android 开发一个多平台应用程序。我使用带有monoplugin的visualstudio（phone sdk）（其他两个平台的android的monotouch和mono）来做到这一点。您编写代码的 c# 被编译为所有三个平台的本机代码。

我的问题：

1.  我正在寻找一个基于 .net (silverlight) 框架的绘图库。因为如果我让库在 windowsphone 上运行，它应该能够在其他两个平台上运行（在 mono 的帮助下）。那么，有人知道（或推荐）图形库吗？

2.  这里有没有人做过类似的事情，如果有的话？你用的是什么库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:22:31.633

您可能找不到这样的库 - 除非您在所有平台上使用带有 Javascript 绘图库的 HTML 视图。我会坚持从您的视图模型中公开相关数据，并在您的平台特定视图中使用一些代码隐藏来调整您为每个平台选择的图形库，以处理您的视图模型公开的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:19:58.413

我发现了一个库，它至少实现了三个单声道 sdk 的基本绘图功能。

在这里能找到它：

[https://github.com/praeclarum/CrossGraphics](https://github.com/praeclarum/CrossGraphics)

# c# - 在服务器上发布 ASP.net 项目 - 失败

> ID：10103066
> 
> 赞同：1
> 
> 时间：2012-04-11T09:14:45.443
> 
> 标签：c#, asp.net-mvc-2, publish

***我的项目是用 C# 在 ASP.net 上开发的。我想在我们公司的服务器上发布我的项目。我已经在服务器上成功发布了我的项目。但是当我打开任何 aspx 页面时，它给了我这样的错误。任何想法？***所有页面在我的本地主机上都运行得很好。

**“/”应用程序中的服务器错误。** 配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：每个配置文件中的部分只能出现一次。有关例外情况，请参阅帮助主题。

源错误：

第 27 行： 第 28 行： 第 29 行： 第 30 行： 第 31 行：

源文件：C:\Documents and Settings\TaxSmart\Desktop\khushubu_ASP\AAS_Application\AAS_Application\web.config 行：29

版本信息：Microsoft .NET

**网络配置：**

```
<?xml version="1.0"?> 
```

!--> 部分启用 ASP.NET 用来识别传入用户的安全身份验证模式的配置。--> 部分可以配置如果/当在执行请求期间发生未处理的错误时要做什么。具体来说，它使开发人员能够配置要显示的 html 错误页面来代替错误堆栈跟踪。

```
 <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
        <error statusCode="403" redirect="NoAccess.htm" />
        <error statusCode="404" redirect="FileNotFound.htm" />
    </customErrors>
    -->
    <pages>
        <controls>
            <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </controls>
    </pages>
    <httpHandlers>
        <remove verb="*" path="*.asmx"/>
        <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
        <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
</system.web>
<system.codedom>
    <compilers>
        <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="v3.5"/>
            <providerOption name="WarnAsError" value="false"/>
        </compiler>
    </compilers>
</system.codedom>
<!-- 
    The system.webServer section is required for running ASP.NET AJAX under Internet
    Information Services 7.0\.  It is not necessary for previous version of IIS.
-->
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
        <remove name="ScriptModule"/>
        <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
        <remove name="WebServiceHandlerFactory-Integrated"/>
        <remove name="ScriptHandlerFactory"/>
        <remove name="ScriptHandlerFactoryAppServices"/>
        <remove name="ScriptResource"/>
        <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
</system.webServer>
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
            <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
            <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
        </dependentAssembly>
    </assemblyBinding>
</runtime>
<connectionStrings>
    <add name="AASProject" connectionString="Data Source=182.50.133.145;Database=taxsmartapp;User ID=taxsmartapp ;Password=Admin123! "/>
</connectionStrings> 
```

</connectionStrings>-->

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:16:48.727

这意味着您在 web.config/app.config 中多次定义了一个部分，检查它是否存在重复部分（可能是 IIS 在配置站点时为您插入的部分）

# postgresql - 如何使用 pgFouine 按用户过滤日志？

> ID：10103071
> 
> 赞同：1
> 
> 时间：2012-04-11T09:15:10.897
> 
> 标签：postgresql, monitoring

我正在使用[pgFouine](http://pgfouine.projects.postgresql.org/index.html)作为我的 postgreSQL 数据库的日志分析器。日志通过 syslog 存储。我不想看到每个数据库用户的日志，而只是我的一个应用程序。

怎么做？过滤器必须应用于 syslog 还是 pgFouine ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:31:58.587

*如果*您记录正确的信息，pgFouine 可以对此进行过滤。

[http://pgfouine.projects.postgresql.org/tutorial.html](http://pgfouine.projects.postgresql.org/tutorial.html)

# c# - 使用 BlockingCollection 好用吗 作为单生产者、单消费者的 FIFO 查询？

> ID：10103072
> 
> 赞同：7
> 
> 时间：2012-04-11T09:15:12.500
> 
> 标签：c#, .net, multithreading, .net-4.0, producer-consumer

我需要单生产者、单消费者 FIFO 查询，因为

*   我需要按收到的顺序处理消息。
*   我需要异步执行此操作，因为调用者在我处理消息时不应等待。
*   只有在前一个消息处理完成时才应该开始下一个消息处理。有时“接收”消息的频率高于“处理”消息的频率。但平均而言，我应该能够处理所有消息，只是有时我必须将它们“排队”包。

所以我认为这很像 TCP/IP，你有一个生产者和一个消费者，有时你接收消息的速度比你处理的快，所以你必须查询它们。订单在哪里很重要，而呼叫者对你用这些东西做什么完全不感兴趣。

这听起来很简单，我可能可以使用 general `Queue`，但我想使用`BlockingCollection`它，因为我不想用`ManualResetEvent`etc编写任何代码。

有多适合`BlockingCollection`我的任务，您可能还可以提出其他建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T09:36:33.190

`BlockingCollection`类实现[了 IProducerConsumerCollection](http://msdn.microsoft.com/en-us/library/dd287147.aspx)接口，非常适合您的要求。

您可以创建两个任务，一个用于异步生产者，另一个作为消费者工作者。前者将添加项目，`BlockingCollection`而后者只是在新的以 FIFO 顺序可用时立即消耗。

# [使用TPL 任务](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)和[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)的生产者-消费者示例应用程序：

```
class ProducerConsumer
{
    private static BlockingCollection<string> queue = new BlockingCollection<string>();

    static void Main(string[] args)
    {
        Start();
    }

    public static void Start()
    {
        var producerWorker = Task.Factory.StartNew(() => RunProducer());
        var consumerWorker = Task.Factory.StartNew(() => RunConsumer());

        Task.WaitAll(producerWorker, consumerWorker);
    }

    private static void RunProducer()
    {
        int itemsCount = 100;

        while (itemsCount-- > 0)
        {
            queue.Add(itemsCount + " - " + Guid.NewGuid().ToString());
            Thread.Sleep(250);
        }
    }

    private static void RunConsumer()
    {
        foreach (var item in queue.GetConsumingEnumerable())
        {
           Console.WriteLine(DateTime.Now.ToString("HH:mm:ss.ffff") + " | " + item);
        }
    }
} 
```

[IProducerConsumerCollection](http://msdn.microsoft.com/en-us/library/dd287147.aspx)：

> 定义用于操作用于生产者/消费者使用的线程安全集合的方法。该接口为生产者/消费者集合提供了统一的表示，以便更高级别的抽象如 System.Collections.Concurrent.BlockingCollection(Of T) 可以将集合用作底层存储机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:17:57.140

既然是你需要的队列，为什么不坚持一个队列呢？您可以使用[同步队列](http://msdn.microsoft.com/en-us/library/system.collections.queue.synchronized.aspx)。

# php - 用户下订单时，Magento 可以向管理员发送电子邮件吗？

> ID：10103074
> 
> 赞同：0
> 
> 时间：2012-04-11T09:15:23.337
> 
> 标签：php, magento

用户下订单时，Magento 可以向管理员发送电子邮件吗？

有必要将有关已下订单的信息发送到管理员的电子邮件管理员通知应该有另一个模板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:20:52.393

是的，您可以将所有订单设置为 bcc -d from

`system > configuration > sales > sales emails`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T15:59:07.467

crm4ecommerce 扩展已加密，无法进行安全审核。

另一个免费选项是 Inchoo Admin Order Notifier。

“Magento 扩展，可在客户下订单时启用针对各种电子邮件的电子邮件通知。当您希望您的人员通知某个客户刚刚下订单时很有用。支持交易电子邮件。”

来自：[https ://github.com/ajzele/Inchoo_AdminOrderNotifier](https://github.com/ajzele/Inchoo_AdminOrderNotifier)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:16:49.913

我在我的 Magento 安装中破解了核心代码来执行此操作。正确编辑核心文件的第一级是在 app/code/local 某处覆盖它们...

制作您的 admin_order_notify_email 模板，保存它，并记下它的 ID。我的是 8 岁。哦，要访问客户的电子邮件地址，请在模板中使用以下代码：`{{var order.getCustomerEmail()}}`. 这让我烦恼了几个月。:P 我的下一个技巧是在管理员订单通知电子邮件中对订单号进行条形码化。

现在，打开文件`app/code/core/Mage/Sales/Model/Order.php`

```
<?
    $mailTemplate = Mage::getModel('core/email_template');
    /* @var $mailTemplate Mage_Core_Model_Email_Template */
//chris  near line 854:      $copyTo = $this->_getEmails(self::XML_PATH_EMAIL_COPY_TO);
    $copyMethod = Mage::getStoreConfig(self::XML_PATH_EMAIL_COPY_METHOD, $this->getStoreId());
    if ($copyTo && $copyMethod == 'bcc') {
        foreach ($copyTo as $email) {
//chris                $mailTemplate->addBcc($email);
        }
    }

//chris near line 900: added this to use admin email template for new orders. Note it is hard coded to template 8, which I added
        $mailTemplate->setDesignConfig(array('area'=>'frontend', 'store'=>$this->getStoreId()))
            ->sendTransactional(
                8,
                Mage::getStoreConfig(self::XML_PATH_EMAIL_IDENTITY, $this->getStoreId()),
                $this->_getEmails(self::XML_PATH_EMAIL_COPY_TO),
                "MyBusinessName Orders",
                array(
                    'order'         => $this,
                    'billing'       => $this->getBillingAddress(),
                    'payment_html'  => $paymentBlock->toHtml(),
                )
            );        
?> 
```

# javascript - 选择选项上的 jQuery 单击事件不适用于 jQuery Mobile 框架

> ID：10103076
> 
> 赞同：1
> 
> 时间：2012-04-11T09:15:29.707
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在尝试在我的选择选项上触发点击事件。

如果选择列表是这样的普通多选框，这在 FF/Safari 中可以正常工作：

[http://jsfiddle.net/YZUBs/47/](http://jsfiddle.net/YZUBs/47/)

但是，如果我包含 jQuery Mobile 框架，则单击事件不再触发：

[http://jsfiddle.net/YZUBs/48/](http://jsfiddle.net/YZUBs/48/)

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:17:56.753

`click`on 事件`<option>`不是标准的，因此并非所有浏览器都支持。
您应该使用`onchange`事件而不是`onclick`.

[您可以阅读此搜索](https://stackoverflow.com/search?q=click%20event%20option%20%5Bjavascript%5D)中的所有问答，这是所有人的主题...

[**更新的小提琴**](http://jsfiddle.net/YZUBs/51/)

# java - 覆盖父类和接口中存在的方法（具有相同的签名）

> ID：10103078
> 
> 赞同：4
> 
> 时间：2012-04-11T09:15:38.540
> 
> 标签：java, overriding

我们有一个`Class`(say `Animal`)，我们有一个`Interface`(say `Behave`)。两者都有一个具有相同签名的方法（比如`Animal`）。`Behave``public void eat()`

当我们尝试`eat()`在`Class`（比如`Dog`） which`extends Animal`和中为方法编写主体时，实际引用了`implements Behave`哪个方法？或`eat()`中的那个。无论发生什么情况，为什么会这样？`Animal``Behave`

**编辑：**

`Eclipse`在发布此问题之前，我尝试了这种情况。

这里一个有趣的部分是，即使我正在实现`Behave`，如果我没有在里面创建一个`eat()`方法（即如果我没有实现`Behave's`继承的抽象方法）`Dog`，没有错误，因为我已经从`Animal`其中扩展了一个`eat()`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:11:24.600

`which eat() method is actually referred to?`两个都。

试试这个：如果你根本不重写方法，当你用接口调用时，你会从父级那里得到一个。

```
Behave b = new Dog();
System.out.println(b.eat());//this will call eat from Animal if Dog did not override. 
```

如果你覆盖，你总是从孩子那里得到一个：

```
Behavior b = new Dog();
Animal a = new Dog();

a.eat() and b.eat() will both refer to the eat inside of Dog class. 
```

* * *

使用这些类：

```
public class BClass {
public int add(int a, int b){
    return a*b;
}
}

public interface BInterface {
public int add(int a, int b);
}

public class BChild extends BClass implements BInterface{
public static void main(String... args){
    BInterface bi = new BChild();
    BClass bc = new BChild();
    System.out.println(bi.add(3, 5));
    System.out.println(bi.add(3, 5));
}

@Override
public int add(int a, int b){
    return a+b;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:34:34.033

接口只能包含方法的主体定义，一旦实现，它必须具有所有已定义方法的实现。在你的例子中

```
class Dog extends Animal implements Behave
{
    @Override
    public void eat() {...}
 }

 abstract class Animal{
    public abstract void eat();
 }
 interface Behave{
    void eat();
 } 
```

在这里，它需要一个抽象方法体，就像在 Main 方法中一样。以其他方式

```
class DOG extends Animal implements Behave{
    ...
}

class Animal{
   public  void eat(){
        ...
   }
}

interface Behave{
    void eat();
} 
```

这里的 Dog 类在其超类 Animal 中具有吃方法体。所以它不会要求在 Animal 中再次实现 body，因为它已经实现了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:43:35.807

只有一种`eat()`方法，因为语言的设计者认为方法签名由其名称和参数类型组成的简单性比能够指定您提供接口实现的复杂性更有用。

在 Java 中，如果两者具有不同的语义，请提供一个返回 Behave 实例的方法，该实例执行其他操作：

```
class Animal { 
    public void eat () { }
}

interface Behave { 
    void eat (); 
}

class Dog extends Animal { 
    public void eat () { 
        // override of Animal.eat()
    } 

    public Behave getBehave() { 
        return new Behave { 
            public void eat() { 
                BehaveEat(); 
            } 
        };
    }

    private void BehaveEat() {
        // effectively the implementation Behave.eat()
    }
} 
```

在其他语言中，您可以显式声明方法从接口实现方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:35:26.213

接口只是定义了一个类必须提供的方法。如果我们有

```
public class Animal{
    public void eat(){
        System.out.println("Om nom nom");
    }
}
public class Dog extends Animal{

} 
```

Dog 现在提供了eat 方法并且可以这样实现`Behave`。

# c - 使用数组将数字解码为字母

> ID：10103080
> 
> 赞同：0
> 
> 时间：2012-04-11T09:15:51.147
> 
> 标签：c

对于我的任务，我必须在屏幕上打印数字并将它们解码为特定的字母。我在这段代码中只使用字母 al 只是为了保持简单，以便我能理解它。

我遇到的问题是，例如，当我输入与数组 a 的第一个条目相对应的数字 0 时，它将取出 a 并打印 bl。

如果我输入数字 0，我该如何做到这一点，代码只会在屏幕上打印一个？

```
#include <stdio.h>

int main()
{
char code[] = "abcdefghijkl";
int i, j, k;
printf("how many letters does your code contain?: ");
scanf("%d", &j);
for(i=0; i<j; ++i){
    printf("enter a number between 0 and 11\n");
    scanf("%d", &k);
    printf("%s\n", &code[k]);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:17:38.390

你只打印那个位置的字符，所以改变

```
printf("%s\n", &code[k]); 
```

至

```
printf("%c\n", code[k]); 
```

您还应该检查您读入的值是否`k`>= 0 && < 11 ，否则您将访问超出其边界的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:22:52.930

`printf("%c\n", code[k]);` 代替`printf("%s\n", &code[k]);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:18:54.850

`%s`格式说明符用于打印字符串，您需要使用`%c`将字符打印到屏幕的说明符。

# mysql - 使用按月分组对 1 月到 12 月进行排序

> ID：10103083
> 
> 赞同：2
> 
> 时间：2012-04-11T09:16:11.807
> 
> 标签：mysql, sql, group-by

我已经写了查询

```
SELECT 
    MONTHNAME( create_date ) AS MONTH, 
    COUNT( dollar_value_awarded ) AS monthly_sales_count 
FROM claims 
WHERE spiffid='$id' 
AND create_date BETWEEN '$sdate' AND '$edate' 
GROUP BY MONTH 
```

它显示

```
MONTH     monthly_sales_count
April       285
February    134
March       958 
```

我希望它像这样显示：

```
MONTH     monthly_sales_count
February    134
March       958
April       285 
```

这意味着结果应该从一月到十二月排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:21:39.143

```
SELECT MONTHNAME( create_date ) AS month_name,             --- change this alias
       COUNT( dollar_value_awarded ) AS monthly_sales_count 
FROM claims 
WHERE spiffid = '$id' 
  AND create_date BETWEEN '$sdate' AND '$edate' 
GROUP BY MONTH(create_date)                         --- use the MONTH() function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:48:39.977

`MONTH(create_date)`我认为您可以作为`ORDER BY`参数传入：

```
SELECT MONTHNAME( create_date ) AS MONTH , COUNT( dollar_value_awarded ) AS monthly_sales_count 
FROM claims WHERE spiffid='$id' and create_date 
BETWEEN '$sdate' AND '$edate' 
GROUP BY MONTH
ORDER BY MONTH(create_date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:18:16.413

你可以做

```
SELECT MONTHNAME( create_date ) AS MONTH, 
       COUNT( dollar_value_awarded ) AS monthly_sales_count 
  FROM claims 
 WHERE spiffid='$id' and create_date BETWEEN '$sdate' AND '$edate' 
 GROUP BY MONTH, MONTH(create_date)
 ORDER BY MONTH(create_date) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T10:27:47.810

Sinmply 添加一个 ORDER BY 子句：

```
SELECT MONTHNAME( create_date ) AS MONTH , COUNT( dollar_value_awarded ) AS monthly_sales_count      
FROM claims 
WHERE   spiffid='$id' and create_date BETWEEN '$sdate' AND '$edate' 
GROUP BY MONTH 
ORDER BY MONTH(create_date) 
```

# java - Floyd-warshall 算法

> ID：10103086
> 
> 赞同：2
> 
> 时间：2012-04-11T09:16:23.607
> 
> 标签：java, algorithm, path-finding, floyd-warshall

我目前正在使用 Java 开发一个小型的塔防项目，但我被寻路所困。我读了很多关于 A* dijkstra 之类的东西，但我认为使用 Floyd-Warshall 进行寻路可能是最好的（至少在我看来，它解决了所有对最短路径问题）。

无论如何，我试图自己实现它，但它并不能完全按应有的方式工作。我使用维基百科上的代码作为开始[http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)

所以这是我的代码：

```
public class MyMap {
public class MyMapNode {
    // list of neighbour nodes
    public List<MyMapNode> neighbours;
    // Currently no need for this :)
    public int cellX, cellY;
    // NodeIndex for pathreconstruction
    public int index;
    // this value is checked by units on map to decide wether path needs
    // reconstruction
    public boolean isFree = true;

    public MyMapNode(int cellX, int cellY, int index) {
        this.cellX = cellX;
        this.cellY = cellY;
        this.index = index;
        neighbours = new ArrayList<MyMapNode>();
    }

    public void addNeighbour(MyMapNode neighbour) {
        neighbours.add(neighbour);
    }

    public void removeNeighbour(MyMapNode neighbour) {
        neighbours.remove(neighbour);
    }

    public boolean isNeighbour(MyMapNode node) {
        return neighbours.contains(node);
    }
}
//MapSize
public static final int CELLS_X = 10;
public static final int CELLS_Y = 10;

public MyMapNode[][] map;

public MyMap() {
    //Fill Map with Nodes
    map = new MyMapNode[CELLS_X][CELLS_Y];
    for (int i = 0; i < CELLS_X; i++) {
        for (int j = 0; j < CELLS_Y; j++) {
            map[i][j] = new MyMapNode(i, j, j + i * CELLS_Y);
        }
    }
    //-------------------------------------------------
    initNeighbours();
    recalculatePath();
}

public void initNeighbours() {
    //init neighbourhood without diagonals
    for (int i = 0; i < CELLS_X; i++) {
        for (int j = 0; j < CELLS_Y; j++) {
            int x, y;// untere Grenze
            if (j == 0)
                y = 0;
            else
                y = -1;
            if (i == 0)
                x = 0;
            else
                x = -1;
            int v, w;// obere Grenze
            if (j == CELLS_Y - 1)
                w = 0;
            else
                w = 1;
            if (i == CELLS_X - 1)
                v = 0;
            else
                v = 1;
            for (int h = x; h <= v; h++) {
                if (h != 0)
                    map[i][j].addNeighbour(map[i + h][j]);
            }
            for (int g = y; g <= w; g++) {
                if (g != 0)
                    map[i][j].addNeighbour(map[i][j + g]);
            }

        }
    }
}
//AdjacencyMatrix
public int[][] path = new int[CELLS_X * CELLS_Y][CELLS_X * CELLS_Y];
//for pathreconstruction
public MyMapNode[][] next = new MyMapNode[CELLS_X * CELLS_Y][CELLS_X
        * CELLS_Y];

public void initAdjacency() {
    for (int i = 0; i < map.length; i++) {
        for (int j = 0; j < map[0].length; j++) {
            path[i][j] = 1000;
            List<MyMapNode> tmp = map[i][j].neighbours;
            for (MyMapNode m : tmp) {
                path[m.index][map[i][j].index] = 1;
                path[map[i][j].index][m.index] = 1;
            }
        }
    }
}

public void floydWarshall() {
    int n = CELLS_X * CELLS_Y;
    for (int k = 0; k < n; k++) {
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (path[i][k] + path[k][j] < path[i][j]) {
                    path[i][j] = path[i][k] + path[k][j];
                    next[i][j] = getNodeWithIndex(k);
                }
            }
        }
    }
}

public void recalculatePath() {
    initAdjacency();
    floydWarshall();
}

public MyMapNode getNextWayPoint(MyMapNode i, MyMapNode j) {
    if (path[i.index][j.index] >=1000)
        return null;
    MyMapNode intermediate = next[i.index][j.index];
    if (intermediate == null)
        return j; /* there is an edge from i to j, with no vertices between */
    else
        return getNextWayPoint(i, intermediate);
}

public MyMapNode getNodeWithIndex(int k) {
    //for testing purpose,this can be done faster
    for (int i = 0; i < map.length; i++) {
        for (int j = 0; j < map[0].length; j++) {
            if (map[i][j].index == k)
                return map[i][j];
        }
    }
    return null;
}

public void removeMapNode(MyMapNode m) {
    //for testing purpose,this can be done faster
    m.isFree = false;
    for (int i = 0; i < map.length; i++) {
        for (int j = 0; j < map[0].length; j++) {
            if (map[i][j].neighbours.contains(m)) {
                map[i][j].neighbours.remove(m);
            }
        }
    }
} 
```

}

Floyd-Warshall 算法设计用于处理图，因此我创建了一个图，其中每个节点都知道其邻居（即它所连接的节点）。

实际上，我现在不知道哪里出了问题，但不知何故。但至少看起来邻接矩阵的初始化是有效的。

在 floydwarshall 函数中，我希望在 next[][] 中获取下一个节点的索引，但我只得到 null 或 10/11；

所以我的问题是我做错了什么还是我的方法完全错误？我希望有一个人可以帮助我。如果您需要任何进一步的信息，请询问

PS对不起我的英语不好;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:21:55.840

我没有可用的 Java，但您的 initAdjacency() 函数似乎有缺陷。path[][] 的维度为 [CELL_X * CELLS_Y][CELLS_X * CELLS_Y] ，而您正在迭代地图的维度 [CELL_X][CELL_Y] 因此您没有将所有没有边的元素设置为默认值值为 1000，它们最终为 0。

尝试添加

```
for (int i = 0; i < CELLS_X * CELLS_Y; i++)
    for (int j = 0; j < CELLS_X * CELLS_Y; j++)
        path[i][j] = 1000; 
```

到 initAdjacency() 函数的开头，在你的循环之前，正确初始化它。

你可能还想做

```
for (int i = 0; i < CELLS_X * CELLS_Y) path[i][i] = 0; 
```

在那之后以防万一，我不确定这会影响算法。

# php - RegEx - 提取前缀为 @ 或 # 的单词

> ID：10103087
> 
> 赞同：-1
> 
> 时间：2012-04-11T09:16:27.597
> 
> 标签：php, regex

如果我有一个字符串

```
This is a @really nice#day. 
```

在**第一次通过**时，我应该得到一个输出/结果单词`really`和`day`（结果不应该包含点或任何其他标点符号，你也不应该只匹配 AZ、az 和其他所有内容，因为字符串可能包含国际字符，所以请记住这一点） .

在**第二遍**时，除了这两个单词和 ex 的标点符号之外，我应该把所有东西都写出来。

```
This is a nice 
```

RegEx 是通过`PHP`.

**编辑：** @hochl 的问题`([@#]\w+)`是它不能像`šđžćč`这样捕获国际字符，因此`#dayš`只能识别为`#day`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:42:33.397

要捕捉国际字符，您可以使用以下内容：

```
[@#]\p{L}+ 
```

您需要使用 unicode 修饰符`/u`才能在 php 中工作。

笔记：

*   `\p{L}`告诉它匹配 unicode “字母”
*   您不需要将整个内容括在括号中`()`，因为整个匹配始终是第一组

# ruby-on-rails - Ruby on rails 中的 HTTPS 实现

> ID：10103091
> 
> 赞同：1
> 
> 时间：2012-04-11T09:16:36.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, https, passenger

我试图在子域上实现 https。我已经包含[了 SSL_requriment](https://github.com/rails/ssl_requirement)插件

我的应用程序控制器有两个语句：

```
 include SslRequirement
  ssl_required if ENV["RAILS_ENV"] == "production" 
```

我已经生成了密钥、csr 和 crt 并在 apache 配置文件中指定了这个：

```
 <VirtualHost *:80>
    ServerName app.my_app.com
    DocumentRoot /home/me/my_app/production/current/public
    </VirtualHost>
    <VirtualHost *:443>
    ServerName app.my_app.com
    DocumentRoot /home/me/my_app/production/current/public
    SSLEngine on
    SSLCertificateFile /home/me/my_app/production/shared/plusrev.crt
    SSLCertificateKeyFile /home/me/my_app/production/shared/plusrev.key
    </VirtualHost> 
```

我的子域仍然没有重定向到 https。我缺少的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:27:38.800

查看这篇文章： [http ://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:27:50.227

没有传递给 ssl_required 的操作。但是我想你想添加

```
def ssl_required?
  true
end 
```

到您的控制器，因此默认情况下所有操作都需要 https。

插件 API 并不明显，因此请查看代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:40:50.377

这是解决方案。

采用

```
 gem 'grosser-ssl_requirement', :require => 'ssl_requirement' 
```

在你的 gemFile 中。这是[宝石指南](https://github.com/grosser/ssl_requirement)

在您的应用程序控制器中：

```
 include SslRequirement
 ssl_required :all if ENV["RAILS_ENV"] == "production" 
```

# c# - 使用 C# 从列表中返回超出列表范围的索引的值

> ID：10103093
> 
> 赞同：0
> 
> 时间：2012-04-11T09:16:41.583
> 
> 标签：c#, list, sorting

我有一个清单。如果您输入的值在该列表中 - 结果将被返回。即使值超出了结果的范围 - 由于 mod % 将返回结果。**真的很难用语言来解释我的问题，所以让我们看一下代码**：

```
 List<int> list1 = new List<int>(){ 0, 1, 2, 3, 4, 5, 6 };
        int value = 3; // what's this number to us?
        string result = "";
        int starting_number = 3;

        if (value == list1[(list1.IndexOf(starting_number) + 2) % list1.Count()])
        { result = "yeah"; }
        else if (value == list1[(list1.IndexOf(starting_number) + 1) % list1.Count()])
        { result = "cool"; }
        else if (value == list1[(list1.IndexOf(starting_number) + 0) % list1.Count()])
        { result = "one"; }
        else if (value == list1[(list1.IndexOf(starting_number) - 1) % list1.Count()])
        { result = "noo"; }
        else {result = "oops cant find it"; } 
```

*   起始号码。这个数字是恒定的。所有的测量都与这个数字有关。
*   value - 我们输入的值。我们需要得到这个值的结果
*   结果 - 只是一个字符串

**这就是它的工作原理：**

起始编号 = 3，值 = 2 => 结果 = “noo”（因为 2 = IndexOf（起始编号）- 1）

起始编号 = 6，值 = 0 => 结果 = “酷” **(6 + 1 = 0)**

起始编号 = 0，值 = 6 =>**将发生错误。(0 - 1 = 6)**

**任何想法如何改进代码以消除此错误？基本上我可以抓取值是它们“在”starting_number 之后，但我不能在“starting_number 之前”抓取它们。**

*   在**(6 + 1 = 0)**的情况下：列表看起来像这样 6,0,1,2,3...

*   在**(0 - 1 = 6)**的情况下：列表应该是这个 ...4,5,6,0

如果您有任何问题，请询问.. 用文字来解释问题真的很难，但我想例子可以更清楚地说明问题。

你如何获取低于starting_number的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:31:01.053

如果我理解正确，您希望将所有整数映射到 0 到 Count-1 的范围内，并且您当前的公式`x % count`仅在`x > 0`. 然后，如果您希望它适用于所有值，请`x`尝试这个`(x % count + count) % count`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:28:52.417

尝试使用此代码

```
list1[Math.Sign((list1.IndexOf(starting_number) - 1))*(list1.IndexOf(starting_number) - 1) % list1.Count()] 
```

# objective-c - UIBarButtonItem 没有从 UIView 继承的原因是什么？

> ID：10103096
> 
> 赞同：4
> 
> 时间：2012-04-11T09:16:46.810
> 
> 标签：objective-c, cocoa-touch, uibarbuttonitem

UIBarButtonItem 继承自 UIBarItem，它是 NSObject 的直接后代。

UIBarItem 只不过是一种特殊的 UIButton，您可以将其添加到 Bar 中。

来自苹果文档：

> 栏上的项目的行为方式类似于按钮（UIButton 的实例）。它们有标题、图像、动作和目标。您还可以启用和禁用栏上的项目。

那么谁能解释一下为什么要“特殊”对待？

只是出于好奇。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:58:35.423

我相信 Apple 不希望人们在 UIToolbar 或 UINavigationBar 之外使用 UIBarItem。您不能将 UIBarItem 作为子视图添加到任何其他视图，因为它不继承自 UIView。我只是猜测，所以可能有一些更好的解释......

# php - 基于 URL GET 显示图像

> ID：10103098
> 
> 赞同：0
> 
> 时间：2012-04-11T09:16:52.217
> 
> 标签：php, image, get

我确定这很简单，但这里是新手。

我有 5 个网址

```
cards.php&type=one
cards.php&type=two
cards.php&type=three
cards.php&type=four 
```

问题。

**如何根据 URL 显示图像**

```
Image Directory = images/cards/one.jpg,two.jpg etc... 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:21:34.647

```
$type = $_REQUEST['type'];
    if($type == "one")
    {
      $imag = "images/cards/one.jpg";
    }
    else if($type == "two")
    {
      $imag = "images/cards/two.jpg";
    }...... 
```

或使用

```
switch ($type)
{
case one:
  $imag = "images/cards/one.jpg";
  break;
case two:
  $imag = "images/cards/two.jpg";
  break;
case three:
  $imag = "images/cards/three.jpg";
  break;
default:
  $imag = "images/cards/default.jpg";
} 
```

试试这个，我想它可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:19:40.653

尝试这个：

```
echo "<img src='{$_GET['type']}.jpg' />"; 
```

并检查：

```
if (isset($_GET['type']) && (trim($_GET['type']) != "")) {
   echo "<img src='". $_GET['type'] .".jpg";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:23:07.733

首先，“hier-part”和查询字符串之间的分隔符是`?`, not `&`, cf。[RFC 3986 - 统一资源标识符 (URI)：通用语法](https://www.rfc-editor.org/rfc/rfc3986#section-3)。因此，您的 URL 应如下所示：

```
cards.php?type=one
cards.php?type=two
cards.php?type=three
cards.php?type=four 
```

`$_GET`现在，使用 eg检查全局数组的内容`print_r($_GET)`。`type`您应该找到与查询字符串参数对应的键的条目。

接下来，使用`type`( `$_GET['type']`) 的值来编写图像标签。请注意，用户可以轻松地操纵查询字符串，因此应该执行一些输入清理。

# android - 安卓NDK开发

> ID：10103101
> 
> 赞同：5
> 
> 时间：2012-04-11T09:17:01.130
> 
> 标签：android, sdk, android-ndk

我计划着眼于为 android 开发游戏，但我不确定我应该从哪里开始。我在 C++ 和 OpenGL 方面做了很多工作，我更愿意继续在 C++ 中工作，即使是在 android 上。观看关于 NDK 和 c/c++ 编程的 google i/o 2011，我感觉它可以相对容易地完成。但是我一直在阅读有关这将是多么困难的文章，并且如果我没有中继的充分理由，我应该坚持使用 sdk，但我不确定这是否是旧信息并且不相关。

我应该仅仅因为我喜欢 c++ 而不是 java 就使用 ndk，还是应该从 sdk 开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:26:50.093

NDK 仅提供 SDK 提供的内容的一个子集。当然它更麻烦，更难调试。它存在的原因是因为你更接近基本性能，这对游戏尤其是 3D 很重要。

因此，如果您需要 100% 的功率，或者您正在移植用 C++ 编写的游戏引擎，请考虑 NDK 如果不需要，请坚持使用 SDK

# python - Python - 如果源是文件，则 Sum 在列表理解语法中不起作用

> ID：10103107
> 
> 赞同：2
> 
> 时间：2012-04-11T09:17:17.030
> 
> 标签：python, sum, list-comprehension

我是 Python 的新手，我正在研究列表理解。

我想要做的是将以下代码转换为列表理解：

```
def words_without_e():
    count = 0

    words = open('words.txt')
    for word in words:
        if word.find('e') == -1:
            count += 1
    words.close()

    return count 
```

这是我微弱的尝试：

```
words = open('words.txt')
print sum([1 for word in words if word.find('e') == -1]) 
```

但不幸的是，它不起作用。我期望得到的答案是 37641，但我得到的是 0。:(

我尝试创建另一个代码做同样的事情，但我没有使用文件作为源代码，而是使用了一个列表：

```
def test():
    words = ['hello', 'world', 'ciao']
    return sum([1 for word in words if word.find('e') == -1]) 
```

它有效。

我看到了这个“非常”类似的 SO[帖子](https://stackoverflow.com/questions/4083098/list-comprehension-and-len-vs-simple-for-loop)，并尝试了那里发布的代码`return len([word for word in words if len(word) >= 2 and word[0] == word[-1]])`。如果源是硬编码列表，它可以工作，但如果源是外部文件，它会失败。

现在，我的问题是，**仅`sum`适用于列表和元组吗？**如果我正确理解了[文档](http://docs.python.org/library/functions.html#sum)，则可以总结任何可迭代的内容。

任何启蒙将不胜感激。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T09:22:42.230

最简单的解决方案是这样的：

```
with open("words.txt") as words:
  sum(1 for word in words if "e" not in word) 
```

如您所见，`sum`它适用于任何迭代器——这里我使用的是生成器表达式。

`word.find('e') == -1`我们可以做的不是这样做`"e" not in word`，而是更好地阅读和工作，因为字符串本身是可迭代的并支持`__contains__`.

我还使用该`with`语句来打开文件 - 这比手动打开和关闭它们更好，因为它会为您处理这些事情，并且也可以正确处理异常。

但是，我想指出，您的示例对我有用。我的猜测是您的文件是空格或逗号分隔的，但循环文件会返回行。

我的测试文件：

```
bob
bill
james
test
something
no 
```

例如，这将不起作用：

```
bob bill james test something no 
```

因为我们将得到一个包含整个内容的字符串。在这种情况下，我们可以使用`str.split()`将行拆分为单词。

例如：

```
with open("words.txt") as lines:
    sum(1 for line in lines for word in line.split() if "e" not in word) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:26:08.350

我刚刚尝试过这个，并且有效，因此它可能与您的文件格式有关：

```
me@pc:~/Desktop$ cat > words.txt
app
noot
mies
wim
zus
jet
me@ps:~/Desktop$ python
Python 2.6.6 (r266:84292, Dec 26 2010, 22:31:48) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> sum(1 for word in open('words.txt') if 'e' not in word)
4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:50:28.933

好的。我尝试了@Lattyware 编写的代码，它运行良好。我想我已经找到了罪魁祸首，尽管我不明白为什么它会这样。我想这将是另一个问题。:)

```
def count_words():
    with open("words.txt") as words:
        print sum(1 for word in words)
        print sum(1 for word in words if "e" not in word)

>>> count_words()
113809
0 
```

但是当我注释掉第一个打印语句时，它正确地显示了答案。

```
>>> count_words()
37641 
```

* * *

**更新：**

我发布了我想出的解决方案，以防其他人遇到同样的问题。

```
def count_words():
    total = 0
    wordsWithoutE = 0

    with open("words.txt") as words:
        for word in words:
            if 'e' not in word:
                wordsWithoutE += 1

            total += 1

    return (total, wordsWithoutE)

    >>> print count_words()
    (113809, 37641) 
```

# android - 从Android中的谷歌地图检索位置

> ID：10103109
> 
> 赞同：0
> 
> 时间：2012-04-11T09:17:35.073
> 
> 标签：android

我想从我当前的位置检索附近的位置我该怎么做......例如，如果我在艾哈迈达巴德市而不是给出艾哈迈达巴德市所有酒店的列表，我该怎么做请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:26:51.187

为此使用[**Google-Place-Api**](https://developers.google.com/maps/documentation/places/) 。

关于如何在 android 中使用这个 api 有很好的教程。

[第 1 部分：使用 Google 的 Places API 开发引人注目的基于位置的移动应用程序](http://blog.brianbuikema.com/2010/08/android-development-part-1-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)

[第 2 部分：使用 Google 的 Places API 开发引人注目的基于位置的移动应用程序](http://blog.brianbuikema.com/2010/08/android-development-part-2-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)

还有问题：

[在 Android 中使用 Google Places API](https://stackoverflow.com/questions/3830149/using-google-places-api-in-android)

[使用 Google 地方信息 API](https://stackoverflow.com/questions/5551028/using-google-places-api)

博客：

[介绍 Google Places API](http://ddewaele.blogspot.in/2011/05/introducing-google-places-api.html)

# c++ - 在头文件与 .cpp 文件中编码 C++（主要是）

> ID：10103111
> 
> 赞同：18
> 
> 时间：2012-04-11T09:17:40.727
> 
> 标签：c++, build

多年来，我一直以标准方式编写 C++，在头文件 .hpp 中使用类声明，在源文件 .cpp 文件中使用函数定义。最近我搬到了一家新公司，那里的代码（似乎受 boost 编码风格的影响）完全编码在 .hpp 文件中，其中包含一个简短的 .cpp 文件来包含头文件并创建对象/程序二进制文件。

这让我开始思考 - 在头文件中编写代码而不是为每个对象编写 .hpp 和 .cpp 文件有哪些优势/劣势？这假设我们的项目没有创建*公共*库然后链接到程序二进制文件，而是每个程序二进制文件都是从头文件（和一个源 .cpp 文件）的总和构建的。这是 C++ 的新趋势吗？

例如，模板对象只需要是头文件，但将非模板类放入头文件中，然后简单地将这些常见的项目类包含在您的二进制文件中似乎是个好主意。假设您正在从头开始创建新的代码库，这是否意味着更少的链接，这可能意味着更少的链接错误和更快的构建速度。预编译的头文件设施是否也意味着使用头文件可以加快构建时间？还是因为我们现在需要在创建二进制文件而不是链接公共共享库对象时编译所有代码，所以构建时间更长？

另请注意，我们不是在这里编写 API（在这种情况下，像 pimpl idiom 之类的东西会通过隐藏实现为我们提供更大的灵活性），我们正在编写在客户站点上运行的程序。

提前致谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T09:27:57.683

在我的头顶上：

### 优势：

*   实现可见（更多的弱点，但取决于具体情况）
*   无需导出到库
*   编译器有更好的机会优化一些代码

### 缺点：

*   实现可见
*   较慢的构建时间
*   臃肿的头文件
*   实现的更改需要完全重建，在实现文件中实现不需要（仅编译该特定文件或库）
*   在循环依赖的情况下，您使用前向声明并且只在实现文件中包含完整类型。如果你只有一个标题，那就不可能了。

我确定还有其他人，如果我能想到更多，我会编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:35:07.697

仅标头库往往使构建系统更容易，通常您不需要关心依赖关系。

另一方面，将代码移动到实现文件可以更容易地控制模块边界并创建可交换的二进制模块，这可以改进增量构建。成本更多的是“管家”。我的直觉是更喜欢实现文件，并且有一些数据点支持我，比如 来自提议的 Boost Networking Library 的作者的[这篇博文。](http://www.cplusplus-soup.com/2011/08/minus-header-only-dogma.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:28:56.693

公共库是一回事，代码的一般可重用性是另一回事。如果您想使用您在另一个项目中编写的一些代码，您可能必须复制“n”粘贴大量代码，然后维护单独的代码库。编译时间会变长，因为程序将是一个很大的编译单元，而不是许多 cpp/h 文件，其中只有包含修改过的头文件的这些文件将被重新编译。例如，我目前正在处理的应用程序的完整构建需要 7 分钟。如果更改不严重，重新编译大约需要 15 秒。最后，代码的可读性可能会降低。头文件让您快速了解创建类的目的以及如何使用它。如果类是就地编写的，您将不得不不必要地挖掘源代码。

# jquery - 使用 jquery 的 Metro 风格幻灯片 UI

> ID：10103112
> 
> 赞同：0
> 
> 时间：2012-04-11T09:17:43.667
> 
> 标签：jquery, jquery-animate, microsoft-metro

我正在尝试使用 jquery 实现一个 Metro 风格的幻灯片 UI，其中幻灯片以循环方式一个接一个地显示，这里是代码链接：

[http://jsfiddle.net/cgTqV/9/](http://jsfiddle.net/cgTqV/9/)

问题是在一轮显示幻灯片后，幻灯片过渡不再正常工作。它的速度非常快，并且与第一次运行时的工作方式不同。我无法找到错误。请找到错误并告诉我出了什么问题。

**您的浏览器可能会在第一次完成转换后崩溃，请使用 alert("foo"); 防止它。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:07:33.087

正如马可建议的那样替换代码片段......下面给出的那个

```
setInterval(function() {........  }, tiledelay); 
```

有了这个

```
 interval = window.clearInterval(interval);   //only these two lines are the important ones
        interval = window.setInterval(function() {   //and this
            if (count <= (items.length - 1)) {       //below this is the same old code...
                count++; //Increment count
                previouscount = count - 1; //Set previous
                showtile();
            }
            if (count == items.length - 1) {
                count = 0;
                for (var i = 0; i < items.length; i++) {
                    $(items[i]).animate({
                        top: "200px"
                    }, tilespeed);
                }
                showtile();
            }
        }, tiledelay); 
```

之后

```
var previouscount=-1;//Count to check prvious <li> element/tile 
```

添加这个

```
var interval; 
```

我只是添加了代码以在每次调用中重新启动计时器。

请告诉我这是否有帮助..也许您正在寻找其他东西..

# asp.net-mvc - 仅在电子邮件无效时显示错误消息

> ID：10103114
> 
> 赞同：0
> 
> 时间：2012-04-11T09:17:45.720
> 
> 标签：asp.net-mvc, asp.net-mvc-3, data-annotations, email-validation, asp.net-mvc-validation

我在 ASP MVC3 中工作。我有一个输入客户联系信息的模型。该信息是必需的。当 viewstat 无效时，文本框必须有一个红色边框（这有效）en no errormessage。但是当 emailinput 无效时，错误必须在视图上可见。因此，只有电子邮件注释的错误消息必须可见，而不是必需的注释。我不知道该怎么做。

模型：

```
 [Required]
    public string FirstName { get; set; }
    [Required]
    public string Name { get; set; }
    [Required]
    public string Address { get; set; }
    [Required]
    public string PostalCode { get; set; }
    [Required]
    public string City { get; set; }
    [Required]
    public string Country { get; set; }
    [Required]
    public string PhoneNumber { get; set; }
    public string Fax { get; set; }
    [Required]
    [Email]
    public string Email { get; set; } 
```

看法：

```
<div class="row-fluid">
    <div class="span6">
                <div data-role="fieldcontain" class="ui-hide-label">
                    <label for=@Lingo.language.Obj_Telefoon>@Lingo.language.Obj_Telefoon</label>
                    <span>@Html.TextBoxFor(m => m.PhoneNumber, new { style = "width:90%!important;", placeholder = @Lingo.language.Obj_Telefoon })</span>
                </div>               
    </div>
    <div class="span6">
        <div data-role="fieldcontain" class="ui-hide-label">
            <label for=@Lingo.language.Obj_Fax>@Lingo.language.Obj_Fax</label>
            <span>@Html.TextBoxFor(m => m.Fax, new { placeholder = @Lingo.language.Obj_Fax })</span>
        </div>  
    </div>
 </div>
 <div class="row-fluid">
    <div class="span12">
        <div data-role="fieldcontain" class="ui-hide-label">
            <label for=@Lingo.language.Obj_Email>@Lingo.language.Obj_Email</label>
            <span>@Html.TextBoxFor(m => m.Email, new { style = "width:98%!important;", placeholder = @Lingo.language.Obj_Email })</span>
            <span>@Html.ValidationMessageFor(m => m.Email)</span>
        </div>  
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:38:51.037

写下所需的消息，如下所示：

```
[Required( ErrorMessage = "The first name is required" )]
public string FirstName { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:57:41.093

如果您希望它是必需的，但不想显示“必需”错误消息，您可以将消息设置为单个空格（以避免运行时错误“必须设置 ErrorMessageString 或 ErrorMessageResourceName，但不是都。”）

```
[Required(ErrorMessage = " ")]
[Email(ErrorMessage = "Must be a valid email address.")]
public string Email { get; set; } 
```

如果您还没有该`Email`属性，您可以创建一个类文件（例如 EmailAttribute.cs），其中包含：

```
using System.ComponentModel.DataAnnotations;

public class EmailAttribute: RegularExpressionAttribute {
    public EmailAttribute()
      : base(@"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$") { }
  } 
```

# android - 未正确获取 Google 地方信息结果

> ID：10103117
> 
> 赞同：0
> 
> 时间：2012-04-11T09:17:56.413
> 
> 标签：android, json, url, google-places

我正在尝试在 json 中获取 Google 位置的结果。但每次我得到结果状态为请求被拒绝..

```
 package com.json.trial;

public class GetMethodEx {
    String API_KEY = "My Places Key";

    String baseUrl="https://maps.googleapis.com/maps/api/place/search/json?";
    key="AIzaSyCQ6m78y0CLClpvldSwY-aI2JbbZGoFx68";
    double latitude,longitude;

    public String getInternetData()throws Exception{

        latitude=-33.8670522;
        longitude=151.1957362;

        GenericUrl reqUrl = new GenericUrl(baseUrl);

         reqUrl.put("location", Double.toString(latitude) + "," + Double.toString(longitude));
        reqUrl.put("radius", 500);
        reqUrl.put("types", "");
        reqUrl.put("sensor", "false");
        reqUrl.put("key", API_KEY);

        BufferedReader in = null;
        String data = null;
        try{
            HttpClient client = new DefaultHttpClient();
            URI website = new URI (baseUrl);
            HttpGet request = new HttpGet();
            request.setURI(website);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l="";
            String nl = System.getProperty("line.separator");

            while((l=in.readLine())!= null){
                sb.append(l + nl);
            }
            in.close();
            data = sb.toString();
            return data;
        }finally{
            if(in!=null){
                try{
                    in.close();
                    return data;
                }catch(Exception e){
                    e.printStackTrace();
                }
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:27:50.557

你没有`reqUrl`通过

```
URI website = new URI (baseUrl); 
```

尝试这个：

```
URI website = new URI (reqUrl); 
```

# jquery - 在另一个事件中触发事件

> ID：10103119
> 
> 赞同：0
> 
> 时间：2012-04-11T09:18:02.080
> 
> 标签：jquery

我一直致力于 jPlayer 的小型定制。我定义了事件 A 和事件 B。这两个事件分别触发。但是，我在从事件 B 内部触发事件 A 时遇到问题。事件 A：

```
$("jquery_jplayer_1").bind($.jPlayer.event.timeupdate,function(event,param1)
...
)} 
```

事件-B：

```
$(".jp-waveform-container").click(function(e))
...
$("jquery_jplayer_1").trigger($.jPlayer.event.timeupdate,[randomVar]);
...
)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:21:33.483

在您的第一个函数中添加`$(".jp-waveform-container").trigger('click');`（假设`.jp-waveform-container`是唯一的）。或者将事件 B 中的函数设为命名函数，然后从事件 A 中调用它？

# c - 在我的情况下，为什么多线程比顺序编程慢？

> ID：10103127
> 
> 赞同：6
> 
> 时间：2012-04-11T09:18:22.790
> 
> 标签：c, multithreading, performance, gcc, pthreads

我是多线程的新手，并尝试通过一个简单的程序来学习它，它将 1 添加到 n 并返回总和。在顺序情况下，对于 n = 1e5 和 2e5`main`调用该函数两次；`sumFrom1`在多线程情况下，使用创建两个线程`pthread_create`并在单独的线程中计算两个总和。多线程版本比顺序版本慢得多（见下面的结果）。我在 12-CPU 平台上运行它，线程之间没有通信。

多线程：

```
Thread 1 returns: 0 
Thread 2 returns: 0 
sum of 1..10000: 50005000
sum of 1..20000: 200010000
time: 156 seconds 
```

顺序：

```
sum of 1..10000: 50005000
sum of 1..20000: 200010000
time: 56 seconds 
```

当我在编译中添加**-O2**时，多线程版本（9s）的时间少于顺序版本（11s）的时间，但没有我期望的那么多。我总是可以打开**-O2**标志，但我很好奇在未优化的情况下多线程的低速度。它应该比顺序版本慢吗？如果没有，我该怎么做才能让它更快？

编码：

```
#include <stdio.h>
#include <pthread.h>
#include <time.h>

typedef struct my_struct
{
  int n;                                                                                                                                                              
  int sum;                                                                                                                                                            
}my_struct_t;                                                                                                                                                         

void *sumFrom1(void* sit)                                                                                                                                              
{                                                                                                                                                                     
  my_struct_t* local_sit = (my_struct_t*) sit;                                                                                                                          
  int i;                                                                                                                                                              
  int nsim = 500000;  // Loops for consuming time                                                                                                                                                
  int j;                                                                                                                                                              

  for(j = 0; j < nsim; j++)                                                                                                                                           
  {                                                                                                                                                                   
    local_sit->sum = 0;                                                                                                                                                
    for(i = 0; i <= local_sit->n; i++)                                                                                                                                 
      local_sit->sum += i;                                                                                                                                             
  }    
}

int main(int argc, char *argv[])                                                                                                                                      
{                                                                                                                                                                     
  pthread_t    thread1;                                                                                                                                               
  pthread_t    thread2;                                                                                                                                               
  my_struct_t  si1;                                                                                                                                                   
  my_struct_t  si2;                                                                                                                                                   
  int          iret1;                                                                                                                                                 
  int          iret2;                                                                                                                                                 
  time_t       t1;                                                                                                                                                    
  time_t       t2;                                                                                                                                                    

  si1.n = 10000;                                                                                                                                                      
  si2.n = 20000;                                                                                                                                                      

  if(argc == 2 && atoi(argv[1]) == 1) // Use "./prog 1" to test the time of multithreaded version                                                                                                                                
  {                                                                                                                                                                   
    t1 = time(0);                                                                                                                                                     
    iret1 = pthread_create(&thread1, NULL, sumFrom1, (void*)&si1);      
    iret2 = pthread_create(&thread2, NULL, sumFrom1, (void*)&si2);                                                                                                     
    pthread_join(thread1, NULL);                                                                                                                                      
    pthread_join(thread2, NULL);                                                                                                                                      
    t2 = time(0);                                                                                                                                                     

    printf("Thread 1 returns: %d\n",iret1);                                                                                                                           
    printf("Thread 2 returns: %d\n",iret2);                                                                                                                           
    printf("sum of 1..%d: %d\n", si1.n, si1.sum);                                                                                                                     
    printf("sum of 1..%d: %d\n", si2.n, si2.sum);                                                                                                                     
    printf("time: %d seconds", t2 - t1);                                                                                                                              

  }                                                                                                                                                                   
  else     // Use "./prog" to test the time of sequential version                                                                                                                                                           
  {                                                                                                                                                                   
    t1 = time(0);                                                                                                                                                     
    sumFrom1((void*)&si1);                                                                                                                                            
    sumFrom1((void*)&si2);                                                                                                                                            
    t2 = time(0);                                                                                                                                                     

    printf("sum of 1..%d: %d\n", si1.n, si1.sum);                                                                                                                     
    printf("sum of 1..%d: %d\n", si2.n, si2.sum);                                                                                                                     
    printf("time: %d seconds", t2 - t1); 
  }                                                                                             
  return 0;                                                                                         
} 
```

**更新1：**

在“虚假分享”上搜索了一下（谢谢@Martin James！），我认为这是主要原因。有（至少）两种方法可以解决它：

第一种方法是在两个结构之间插入一个缓冲区（谢谢，@dasblinkenlight）：

```
my_struct_t  si1;
char         memHolder[4096];
my_struct_t  si2; 
```

如果没有**-O2**，耗时从 ~156s 减少到 ~38s。

第二种方法是避免频繁更新`sit->sum`，这可以使用临时变量来实现`sumFrom1`（正如@Jens Gustedt 回答的那样）：

```
for(int sum = 0, j = 0; j < nsim; j++)              
{
  sum = 0;
  for(i = 0; i <= local_sit->n; i++)
    sum += i;
}
local_sit->sum = sum; 
```

如果没有**-O2**，耗时从 ~156s 减少到 ~35s 或 ~109s （它有两个峰值！我不知道为什么。）。使用**-O2**，耗时约 8 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:26:33.827

通过将您的代码修改为

```
typedef struct my_struct
{
  size_t n;
  size_t sum;
}my_struct_t;

void *sumFrom1(void* sit)
{
  my_struct_t* local_sit = sit;
  size_t nsim = 500000;  // Loops for consuming time
  size_t n = local_sit->n;
  size_t sum = 0;
  for(size_t j = 0; j < nsim; j++)
  {
    for(size_t i = 0; i <= n; i++)
      sum += i;
  }
  local_sit->sum = sum;
  return 0;
} 
```

现象消失。你遇到的问题：

*   对于这样的测试，使用`int`作为数据类型是完全错误的。你的数字使总和溢出。有符号类型的溢出是未定义的行为。你很幸运它没有吃你的午餐。
*   具有间接的边界和求和变量会为您购买额外的负载和存储，如果`-O0`真的这样做的话，就会产生虚假共享和类似东西的所有影响。

您的代码还观察到其他错误：

*   缺少的包括`atoi`
*   多余的演员往返`void*`
*   `time_t`as的打印`int`

`-Wall`请在发布之前编译您的代码。

# c# - JQuery Table Sorter 插件样式

> ID：10103133
> 
> 赞同：0
> 
> 时间：2012-04-11T09:18:47.773
> 
> 标签：c#, tablesorter

我昨天实现了表格排序器，如果某个时间小于当前时间，我在尝试更改单元格的颜色时遇到问题，如果它们失败，我想将单元格更改为红色这是我的 C# 代码，我们最初只有一个 gridView工作得很好，但我们想改变它，使它更快地排序继承人的 c# 代码

 `````
 protected void gvResult_rowDataBound(Object sender, GridViewRowEventArgs e)
        {
            DateTime AppointmentTime = DateTime.Now;

            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                AppointmentTime = Convert.ToDateTime(DataBinder.Eval(e.Row.DataItem, "AppointmentTime"));

                if (AppointmentTime < DateTime.Now)
                {

                    e.Row.CssClass = "gvRowRed";
                    e.Row.Cells[0].CssClass = "white";
                    e.Row.Cells[1].CssClass = "white";
                    e.Row.Cells[2].CssClass = "white";
                    e.Row.Cells[3].CssClass = "white";
                    e.Row.Cells[4].CssClass = "white";
                    e.Row.Cells[5].CssClass = "white";
                    e.Row.Cells[6].CssClass = "white";
                    e.Row.Cells[7].CssClass = "white";
                }
                else if (AppointmentTime > DateTime.Now && AppointmentTime < DateTime.Now.AddHours(1))
                {
                    e.Row.CssClass = "gvRowGreen";
                    e.Row.Cells[0].CssClass = "white";
                    e.Row.Cells[1].CssClass = "white";
                    e.Row.Cells[2].CssClass = "white";
                    e.Row.Cells[3].CssClass = "white";
                    e.Row.Cells[4].CssClass = "white";
                    e.Row.Cells[5].CssClass = "white";
                    e.Row.Cells[6].CssClass = "white";
                    e.Row.Cells[7].CssClass = "white";
                }
            }

       } 
````  `它的第一部分我现在专注于所以如果约会时间小于日期时间。现在我需要将单元格背景颜色为红色，字体颜色为白色，但由于某种原因背景颜色不会改变，只有字体的颜色会任何帮助，将不胜感激。

这是CSS

 `````
table.tablesorter {
    font-family:arial;
    background-color: #CDCDCD;
    margin:10px 0pt 15px;
    width: 100%;
    text-align: left;
}
table.tablesorter thead tr th, table.tablesorter tfoot tr th {
    background-color: #336699;
    border: 1px solid black;
    padding: 10px 15px;
    vertical-align:middle;
    font:verdana;
    color:White;
}
table.tablesorter thead tr .header {
    background-image: url('/img/bg/bg.gif');
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
}
table.tablesorter tbody td {
    color: #3D3D3D;
    padding: 4px;
    background-color: #FFF;
    vertical-align: top;
}
table.tablesorter tbody tr.odd td {
    background-color:#F0F0F6;
}
table.tablesorter thead tr .headerSortUp {
    background-image: url('/img/bg/asc.gif') ;
    background-repeat: no-repeat;
    background-position: center right;
}
table.tablesorter thead tr .headerSortDown {
    background-image: url('/img/bg/desc.gif');
    background-repeat: no-repeat;
    background-position: center right;
}
table.tablesorter thead tr .headerSortDown, table.tablesorter thead tr .headerSortUp {
background-color: #8dbdd8;
}

.gvRowRed
{
    background-color:Red !important;
}

.white
{
color:#ffffff !important;
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:32:15.847

尝试改变

```
.gvRowRed
{
    background-color:Red !important;
} 
```

到

```
.gvRowRed td
{
    background-color:Red !important;
} 
```

和 gvRowGreen 一样 - 它将类应用于行而不是单元格。````

# java - Liferay 弹簧集成

> ID：10103134
> 
> 赞同：2
> 
> 时间：2012-04-11T09:18:49.390
> 
> 标签：java, spring, liferay

我尝试使用 Spring 开发 liferay portlet（版本 6.0.6），我可以使用 ServiceBuilder 生成的模型和服务作为 spring bean 吗？我尝试自己导入生成的 spring 上下文，但在 tomcat 日志中出现了很多错误。例如，最好的方法是使用休眠创建自己的层模型和服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:23:04.317

我建议您继续创建自己的服务和持久性类。这些与 UI 无关，因此无论您是否使用门户网站，您都可以使用它们。

如果您已经在使用 Spring，并且打算继续使用门户，那么您应该考虑使用[Spring portal](http://books.dzone.com/articles/hello-world-portlet-using-Spring-3-portlet-MVC)。现在它和 Spring web MVC 一样，只是控制器不同。

# delphi - Delphi 在哪里存储设计时设置的属性信息？

> ID：10103136
> 
> 赞同：8
> 
> 时间：2012-04-11T09:18:55.993
> 
> 标签：delphi

每当您在 Object Inspector 中设置一个属性时，它一定是在编写一些代码或以某种方式将信息保存在某处，但是在哪里呢？我想知道，所以我可以从代码中设置属性和事件，但问题是上面的问题。代码在哪里？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-11T09:21:21.013

它在 Delphi 表单文件中。`*.pas`此文件与您的单元源代码文件同名，但具有`*.dfm`扩展名。

`ALT`如果您在表单设计器中并按+ ，您还将获得表单的当前源代码`F12`。在那里您可以修改您需要的内容，并使用相同的按键返回给设计器。

您还可以检查 Delphi 可能为您的项目生成的其他文件[`here`](http://docwiki.embarcadero.com/RADStudio/en/File_Extensions_of_Files_Generated_by_RAD_Studio)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T09:21:09.723

对象检查器不会编写太多“代码”，而只是将您的选择保存在表单数据中。

如果要修改代码中的任何属性，只需编写

```
SomeObject.property = "sdfsdfsdf"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T09:01:34.380

所有属性的值存储到各自的 .dfm 文件中。右键单击 DFM 设计时表单并选择以文本形式查看，也可以直接在记事本中打开 dfm 文件

# dynamic - 在 extjs 中创建一个动态网格

> ID：10103140
> 
> 赞同：1
> 
> 时间：2012-04-11T09:19:10.573
> 
> 标签：dynamic, extjs, grid

我需要`gridpanel`在 ExtJS 中创建一个动态。我`actioncolumn`为此使用一个：

```
handler: function(view, rowIndex, colIndex, item, e) {
    var tabs = Ext.getCmp('northPanel');
    var rec = view.getStore().getAt(rowIndex);

    modelFactory(rec.get('Reference'), rec.get('ResultFields'));

    console.log(rec.get('ResultFields'));
    console.log('start adding tab');
    tabs.add({
        title: 'Report: ' + rec.get('Reference'),
        closable: true,
        dockedItems: [{
            xtype: 'toolbar',
            dock: 'top',
            items: [{
                xtype: 'tbfill'
            }, {
                xtype: 'button',
                text: 'Export report'
            }, {
                xtype: 'button',
                text: 'Refresh data'
            }]
        }],
        xtype: 'tabpanel',
        items: [{
            xtype: 'gridpanel',
            title: 'Gridview',
            forceFit: true,
            store: ND.store,
            columns: []
        }]
    });

    console.log('tab created');
}, 
```

现在我需要为这个网格创建列。我需要制作的列在`rec.get('ResultFields')`. 当我使用时，`console.log()`我在萤火虫中看到了这个：

```
[Object {
    name = "currentSimAllocationByCcu", type = "textfield", format = null
}, Object {
    name = "wanNumber", type = "textfield", format = null
}, Object {
    name = "carrierName", type = "textfield", format = null
}, Object {
    name = "dataPackageName", type = "textfield", format = null
}, Object {
    name = "simIccid", type = "textfield", format = null
}, Object {
    name = "expiryTime", type = "textfield", format = null
}, Object {
    name = "bytesRx", type = "textfield", format = null
}, Object {
    name = "bytesTx", type = "textfield", format = null
}] 
```

我怎样才能用这个创建列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:31:57.207

似乎有什么问题？

如果您在创建网格之前获得有关列的信息 - 然后根据您的字段数组创建一个或多个列。像这样的东西：

```
var _cols = [],
    _flds = rec.get('ResultFields');

Ext.Array.each(_flds, function(f) {
   _cols.push(Ext.create('Ext.grid.column.Column', {
      text: f.get('name'),
      dataIndex: f.get('name')
   }));
}); 
```

然后`_cols`在创建网格时使用它。

# javascript - 如何只访问数组中的一对元素一次？

> ID：10103147
> 
> 赞同：1
> 
> 时间：2012-04-11T09:19:53.453
> 
> 标签：javascript, arrays, performance, algorithm, matrix

我正在为一个小型 2D 游戏编写物理程序，我需要检查屏幕上的每个对象与屏幕上的所有其他对象。那是`O(N^2)`，我真的不喜欢那样。

我的想法是：

```
for (var i = 0; i < objects.length; i ++)
    for (var j = 0; j < objects.length; j ++)
        if (collide(objects[i], objects[j])) doStuff(objects[i], objects[j]); 
```

这是不必要的，我将多次检查相同的对象。我怎样才能避免这种情况？我想有一个矩阵，这将是`n*n`（假设 n 是对象的数量），然后每次我访问一对对象时，我都会这样做：

```
visited[i][j] = 1;
visited[j][i] = 1; 
```

然后，我总是会知道我访问了哪对对象。

这会起作用，但是，我需要再次设置所有这些单元格，`n*n`时间，只是为了`0`在开始时将它们全部设置为！也许，我可以将所有内容设置为`[]`，但这对我来说似乎仍然不是一个可行的解决方案。有更好的吗？

显然，我选择的语言是 Javascript，但我对 C、C++ 和 Python 的了解比较流利，所以你可以用它们来回答（虽然 Javascript、C 和 C++ 的语法几乎相同）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:23:06.337

您不会避免 O(n^2)，但可以将其减少一半：

```
for (var i = 0; i < objects.length; i ++)
    for (var j = i; j < objects.length; j ++)
        if (collide(objects[i], objects[j])) doStuff(objects[i], objects[j]); 
```

假设碰撞是对称的。如果它也是自反的，并且碰撞测试很昂贵，您可以移出`doStuff(object[i], object[i])`内部循环以避免测试碰撞并从`i+1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:28:28.437

如果你的精灵有一个最大尺寸，你可以对你的数组进行排序并跳过比较屏幕上 vert+maxsize 较低的东西......

# javascript - 动态设置 li 的宽度以匹配父 ul 的宽度

> ID：10103149
> 
> 赞同：0
> 
> 时间：2012-04-11T09:20:12.307
> 
> 标签：javascript, html, css

我正在使用嵌套在 ul 中的 li 进行下拉，但无法将 li 的宽度设置为动态匹配 ul 的宽度。

请注意，li 元素被限制在下拉列表中。

下面的css看起来太多了，但本质上它只是关于ul和li。

**CSS**

```
<style type="text/css" media="screen, tv, projection">

/* - - - ADxMenu: BASIC styles - - - */

/* remove all list stylings
.menu, .menu ul {
    margin: 0;
    padding: 0;
    border: 0;
    list-style-type: none;
    display: block;
}
*/
.menu li {
    margin: 0;
    padding: 0;
    border: 0;
    display: block;
    float: left;    /* move all main list items into one row, by floating them */
    position: relative; /* position each LI, thus creating potential IE.win overlap problem */
    z-index: 5;     /* thus we need to apply explicit z-index here... */
}

.menu li:hover {
    z-index: 10000; /* ...and here. this makes sure active item is always above anything else in the menu */
    white-space: normal;/* required to resolve IE7 :hover bug (z-index above is ignored if this is not present)
                            see http://www.tanfa.co.uk/css/articles/pure-css-popups-bug.asp for other stuff that work */
}

.menu li li {
    float: none;/* items of the nested menus are kept on separate lines */
}

.menu ul {
    visibility: hidden; /* initially hide all submenus. */
    position: absolute;
    z-index: 10;
    left: 0;    /* while hidden, always keep them at the bottom left corner, */
    bottom: 0;      /*      to avoid scrollbars as much as possible */

}

.menu li:hover>ul {
    visibility: visible;    /* display submenu them on hover */
    bottom: 100%;   /* 1st level go above their parent item */
}

.menu li li:hover>ul {  /* 2nd+ levels go on the right side of the parent item */
    bottom: 0;
    left: 100%;
}

/* -- float.clear --
    force containment of floated LIs inside of UL */
.menu:after, .menu ul:after {
    content: ".";
    height: 0;
    display: block;
    visibility: hidden;
    overflow: hidden;
    clear: both;
}
.menu, .menu ul {   /* IE7 float clear: */
    min-height: 0;
}

.menu ul ul {
    padding: 30px 30px 30px 10px;
    margin: 0 0 -30px -10px;

}

/* - - - ADxMenu: DESIGN styles - - - */

.menu, .menu ul li {
    color: #eee;
    background: #000;
}

.menu ul {
    background: #000;
    width: 11em;
}

.menu a {
    text-decoration: none;
    padding: .4em 1em;
    display: block;
    position: relative;
        font-family:BlairMdITCTTMedium;
        color:#848484;
        font-size:11px;
}

.menu a:hover, .menu li:hover>a {
    color: #ccc;
}

.menu li li {   /* create borders around each item */
    border: 1px solid #000;
}

.menu ul>li + li {  /* and remove the top border on all but first item in the list */
    border-top: 0;
}

.menu li li:hover>ul {  /* inset 2nd+ submenus, to show off overlapping */
    bottom: 5px;
    left: 90%;
}

/* Fix for IE5/Mac \*//*/
.menu a {
    float: left;
}
/* End Fix */

/*]]>*/
</style>

**THE HTML CODE**

    <ul class="menu">
        <li style="width:80px;">
        <a id="menu1" title="View all posts filed under Accessories" href="http://monique-relander.be/objects/accessories/">Accessories</a>
            <ul>
                <li><a href="http://www.aplus.co.yu/">Home</a></li>
                <li><a href="http://www.aplus.co.yu/feeds/">Feeds</a></li>
                <li><a href="http://www.aplus.co.yu/archive/">Archive</a></li>
            </ul>
        </li>
        <li style="width:80px;">
        <a title="View all posts filed under Furniture" href="http://monique-relander.be/objects/furniture/">Furniture</a>
                    <ul>
                        <li><a href="http://www.aplus.co.yu/">Home</a></li>
                        <li><a href="http://www.aplus.co.yu/feeds/">Feeds</a></li>
                        <li><a href="http://www.aplus.co.yu/archive/">Archive</a></li>
            </ul>
        </li>
        <li style="width:80px;">
        <a title="View all posts filed under Lighting" href="http://monique-relander.be/objects/lighting/">Lighting</a>
                    <ul>
                        <li><a href="http://www.aplus.co.yu/">Home</a></li>
                        <li><a href="http://www.aplus.co.yu/feeds/">Feeds</a></li>
                        <li><a href="http://www.aplus.co.yu/archive/">Archive</a></li>
            </ul>
        </li>
        <li style="width:80px;">
        <a title="View all posts filed under Mirrors" href="http://monique-relander.be/objects/mirrors/">Mirrors</a>
                    <ul>
                        <li><a href="http://www.aplus.co.yu/">Home</a></li>
                        <li><a href="http://www.aplus.co.yu/feeds/">Feeds</a></li>
                        <li><a href="http://www.aplus.co.yu/archive/">Archive</a></li>
            </ul>
        </li>
        <li class="none" style="width:140px;">
        <a title="View all posts filed under NEW ARRIVALS" href="http://monique-relander.be/objects/new-arrivals/">New Arrivals</a></li>
        <li style="width:130px;">
        <a title="View all posts filed under Sold Gallery" href="http://monique-relander.be/objects/sold-gallery/">Sold Gallery</a></li>
        <li class="cat-item right">
        <a href="/contact">Contact</a></li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:04:07.510

默认情况下，li 的宽度似乎与 ul 相同。

至少基于我在这里的实验[http://jsfiddle.net/dwCsW/](http://jsfiddle.net/dwCsW/)

如果您删除 ul 宽度，它将是 100%，并且通过设置 ul 宽度，li 将跟随。因此，您的代码中必须有其他内容将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:25:55.693

您可以在 css 中给 li 的百分比宽度......其中有 7 个，对吗？所以也许让每个 10% 宽，在每个 4% 和开始和结束的 3% 之间放置 4%？或者，您可以使用 JavaScript 并检测页面调整大小事件，然后获取页面/ul 宽度并使用一些好的老式数字运算设置每个 li 项目的宽度！

# javascript - 从 emberjs 车把应用程序中获取干净的 HTML

> ID：10103150
> 
> 赞同：2
> 
> 时间：2012-04-11T09:20:17.407
> 
> 标签：javascript, ember.js, handlebars.js

我一直在 Ember.js 中构建一个 HTML（电子邮件/页面）组合工具，作为一种了解它的方式，我想这是一种所见即所得的方式。

用户添加具有不同值（链接、文本等）的各种对象，这些对象可以具有不同的模板并使用反馈给控制器的 jQuery UI 进行排列。用户在屏幕上看到的内容实际上是正确的，我目前正在从本地存储中保存和重新加载干净的 JSON 作为持久性方法。

不过，我真正想做的是能够生成用户所见内容的干净 HTML 版本。要么来自写入前端应用程序的内容，要么通过处理我在服务器端导出的 JSON。

我想尽可能多地保留在 JS、Ember 和 Handlebars 中，理想情况下不要在不同的地方重新实现太多我的模板/代码。

下面是我渲染输出中的“行”示例。

.row-controls 由全局编辑器切换打开和关闭。

```
<script id="metamorph-11-start" type="text/x-placeholder"></script>
  <div id="ember507" class="ember-view template-row ui-droppable">
    <ul id="ember524" class="ember-view row-controls">
      <li class="dragger"><a href="#">drag</a></li>
      <li class="type"><a href="#" data-ember-action="19">type</a></li>
      <li class="edit"><a href="#" data-ember-action="20">edit</a></li>
      <li class="delete"><a href="#" data-ember-action="21">delete</a></li>
    </ul>
    <script id="metamorph-12-start" type="text/x-placeholder"></script>
    <script id="metamorph-13-start" type="text/x-placeholder"></script>
      <h2><a href="http://foo.com/bar" data-bindattr-34="34">
        <script id="metamorph-19-start" type="text/x-placeholder"></script>
          Link title text
        <script id="metamorph-19-end" type="text/x-placeholder"></script>
      </a></h2>
      <img src="http://foo.com/image.png" data-bindattr-35="35">
      <script id="metamorph-20-start" type="text/x-placeholder"></script>
        Teaser/synopsis
      <script id="metamorph-20-end" type="text/x-placeholder"></script>
      <a href="http://foo.com/bar" data-bindattr-36="36">Read more</a>
    <script id="metamorph-13-end" type="text/x-placeholder"></script>
    <script id="metamorph-12-end" type="text/x-placeholder"></script>
  </div>
<script id="metamorph-11-end" type="text/x-placeholder"></script> 
```

我想这似乎是一件奇怪的事情，实际应用有限，但我想现在我已经开始了:)另外，我认为任何答案中涉及的原则可能有不同的应用，我只是还没想好

谢谢！感谢这里的其他人回答了我之前关于 Ember 的几个问题。

**编辑**

请明确一点，我说的是获得这样的输出

```
<h2><a href="http://foo.com/bar">Link title text</a></h2>
<img src="http://foo.com/image.png">
Teaser/synopsis
<a href="http://foo.com/bar">Read more</a> 
```

**解决方案编辑**

万一有人找到这个链接 - 我已经添加（到我的标准 JS 版本）属性循环中的 attr 检查。

```
<script>
// ...
return $.each($this[0].attributes, function(index, attr) {
  // this bit added
  if(!attr) {
    return;
  }
  if (attr.name.indexOf('data-bindattr') === -1) {
    return;
  }
  // ...
</script> 
```

这可能是我正在编写的其他代码中的错误，但 jQuery 在循环中将“未定义”作为 attr 传递。jQuery 似乎想要解决整个每个函数，所以我无法准确调试这是什么。不过，该支票目前似乎对我有用。恐怕不知道如何考虑到特定的原始咖啡脚本文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:11:58.973

来自 CodeBrief 的 ghempton 在这篇很棒的帖子中谈了一点：http: [//codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/)

检查提示 7\. 也阅读所有这些，这是值得的。

顺便说一句，它在coffeescript 上，如果您需要获取JS 版本，请访问Try Coffeescript 选项卡上的[http://coffeescript.org/并转换它！](http://coffeescript.org/)

# ios - 通过打开 iCalendar (.ics) 文件在 iOS5 日历中创建新事件

> ID：10103151
> 
> 赞同：6
> 
> 时间：2012-04-11T09:20:22.307
> 
> 标签：ios, ipad, calendar

根据[Apple 的 iOS 4.2 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-4_2/_index.html)：

> 日历现在可以直接导入 .ics 文件作为添加事件的一种方式。如果您的应用可以访问 .ics 文件，您应该使用 UIDocumentInteractionController API 测试导入它们。

我正在`.ics`使用打开一个示例文件`UIDocumentInteractionController`并出现 iOS 日历应用程序，但它没有创建新约会 - 它只显示上次使用日历应用程序时显示的任何内容。有没有人有幸以这种方式创建新事件？

我的`UIDocumentInteractionController`使用代码是：

```
- (void)openDocumentIn {    
    NSString * filePath = 
    [[NSBundle mainBundle] 
     pathForResource:@"testevent" ofType:@"ics"];    

    self.documentController = 
        [UIDocumentInteractionController 
         interactionControllerWithURL:[NSURL fileURLWithPath:filePath]];

    self.documentController.delegate = self;

    [self.documentController presentOpenInMenuFromRect:CGRectZero
                                           inView:self.view 
                                         animated:YES];
} 
```

还有我的示例`.ics`文件：

```
BEGIN:VCALENDAR
VERSION:1.0
BEGIN:VEVENT
DTSTART:20120411T090000
DTEND:20120411T100000
SUMMARY:Crazy party
LOCATION:Windsor Bouncy Castle
DESCRIPTION:Lots of good stuff will happen.
PRIORITY:3
END:VEVENT
END:VCALENDAR 
```

我在原始 iPad 上运行 iOS 5.1。

**更新**

我已经尝试在我的日历中预先创建一个与事件的时间/数据匹配的`.ical`事件，看看在这种情况下日历应用程序是否至少会显示已经存在的匹配事件，但同样没有运气 - 日历应用程序只是打开显示上次显示的内容。

# visual-studio-2010 - 在WPF设计器中拖放控件时VS2010在哪里获取默认属性值

> ID：10103153
> 
> 赞同：2
> 
> 时间：2012-04-11T09:20:29.467
> 
> 标签：visual-studio-2010, wpf-controls, designer

当您在 WPF 设计器中拖放控件时，Visual Studio 2010 会创建默认属性值。

```
<UserControl x:Class="TestPanel.UserControl1"
    <Grid>
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
    </Grid>
</UserControl> 
```

Height=23 和 Width=75 由设计者自动生成。

有谁知道设计师从哪里获得这些值，是否可以在自定义应用程序中运行它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T15:31:11.383

两者都是，`Height`并且当您为控件注册依赖属性时，您可以设置or可以使用的依赖属性的默认值。`Width``Dependency Properties``Visual Studio``XAML designer`

默认值在`FrameworkPropertyMatadata`类构造函数中设置，如下代码所示：

```
//Default value is set to Top
Control.VerticalContentAlignmentProperty = DependencyProperty.Register("VerticalContentAlignment", typeof(VerticalAlignment), typeof(Control), new FrameworkPropertyMetadata(VerticalAlignment.Top), new ValidateValueCallback(FrameworkElement.ValidateVerticalAlignmentValue));

//Default value is set to Left
Control.HorizontalContentAlignmentProperty = DependencyProperty.Register("HorizontalContentAlignment", typeof(HorizontalAlignment), typeof(Control), new FrameworkPropertyMetadata(HorizontalAlignment.Left), new ValidateValueCallback(FrameworkElement.ValidateHorizontalAlignmentValue)); 
```

# amazon-ec2 - 如何使用 AWS CloudFormation 创建 Amazon VPC？

> ID：10103154
> 
> 赞同：8
> 
> 时间：2012-04-11T09:20:29.823
> 
> 标签：amazon-ec2, amazon-web-services, scalability, vpc, amazon-cloudformation

我目前正在为我的应用程序使用[AWS CloudFormation](http://aws.amazon.com/cloudformation/)。现在我能够自动缩放实例。现在，我想把所有东西都放在一个[Amazon VPC](http://aws.amazon.com/vpc/)上。我们可以使用 CloudFormation 创建 VPC 吗？当我们在模板中有 ELB 时，我们如何通过 CloudFormation 管理弹性 IP 地址？我在[AWS CloudFormation Sample Templates](http://aws.amazon.com/cloudformation/aws-cloudformation-templates/)上找到了一个与 VPC 相关的示例，但它仅将资源预置到现有 VPC 中，而不会在模板中创建新的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:22:12.897

## 更新

正如[Jeff 已经 (+1) 指出的那样](https://stackoverflow.com/a/10326412/45773)，AWS 刚刚于 2012 年 4 月 25 日宣布[AWS CloudFormation 支持创建 VPC 资源](https://forums.aws.amazon.com/ann.jspa?annID=1449)，涵盖了其初始 VPC 支持中缺失的部分：

> 我们很高兴地宣布 AWS CloudFormation 现在支持创建 Amazon Virtual Private Cloud (VPC) 资源。[...]
> 
> 现在，您可以使用 CloudFormation 模板创建新的虚拟私有云 (VPC)、子网、网关、网络 ACL、路由和路由表。[...]
> 
> [...] CloudFormation 现在可以完全代表您的 VPC 配置以及在 VPC 中运行您的应用程序所需的所有资源。

有关更多详细信息和示例，请参阅 Jeff Barr 的介绍性文章[AWS CloudFormation 现在可以创建虚拟私有云](http://aws.typepad.com/aws/2012/04/aws-cloudformation-can-now-create-virtual-private-clouds.html)。特别是，[AWS CloudFormation 示例模板](http://aws.amazon.com/cloudformation/aws-cloudformation-templates/)具有*两个新的示例模板 [...] 以帮助您入门*：

*   [具有单个 EC2 实例的 VPC](https://s3.amazonaws.com/cloudformation-templates-us-east-1/vpc_single_instance_in_subnet.template) -*示例模板，展示了如何创建 VPC 并添加具有弹性 IP 地址和安全组的 EC2 实例。*
*   [具有公有和私有子网、弹性负载均衡器和 EC2 实例](https://s3.amazonaws.com/cloudformation-templates-us-east-1/vpc_multiple_subnets.template)的 VPC -*示例模板，展示了如何创建具有多个子网的 VPC。第一个子网是公有的，包含负载均衡器，第二个子网是私有的，在负载均衡器后面包含一个 EC2 实例。*

* * *

## 初步答案

我不认为已经支持使用[AWS CloudFormation创建](http://aws.amazon.com/cloudformation/)[Amazon VPC 。](http://aws.amazon.com/vpc/)

虽然 AWS 刚刚在2012 年 2 月 12 日宣布了[对 VPC 的 AWS CloudFormation 支持，但这仅涵盖现有资源类型：](https://forums.aws.amazon.com/ann.jspa?annID=1348)

> 所有资源类型，例如 Amazon EC2 实例、安全组和弹性 IP 地址、弹性负载均衡器、Auto Scaling 组和 Amazon RDS 数据库实例，现在都可以使用 CloudFormation 模板部署到任何现有的 Amazon VPC 中。这些模板允许您在专用网络中运行多层 Web 应用程序和企业应用程序。借助 Amazon VPC 和 CloudFormation，您可以轻松控制要公开公开哪些资源以及哪些资源应该是私有的。

Amazon VPC 明显不在此列表中，这与它也未在受支持的[AWS 资源类型参考](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html)中列出的事实相符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T02:24:54.073

现在受支持：有关详细信息，请参阅[AWS CloudFormation 支持创建 VPC 资源](http://aws.amazon.com/about-aws/whats-new/2012/04/25/aws-cloudformation-support-for-creating-vpc-resources/)。

# c++ - 内联关键字与标题定义

> ID：10103161
> 
> 赞同：26
> 
> 时间：2012-04-11T09:20:54.390
> 
> 标签：c++, optimization, inline

在函数之前使用 inline 关键字和在头文件中声明整个函数有什么区别？

所以...

```
int whatever() { return 4; } 
```

对比

。H：

```
inline int whatever(); 
```

.cpp：

```
inline int myClass::whatever()
{
    return 4;
} 
```

就此而言，这是做什么的：

```
inline int whatever() { return 4; } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-11T09:51:45.787

有几个方面：

**语**

*   当一个函数用`inline`关键字标记时，它的定义应该在 TU 中可用，否则程序格式错误。
*   在类定义中正确定义的任何函数都被隐式标记`inline`。
*   标记`inline`（隐式或显式）的功能可以在多个 TU 中定义（尊重 ODR），而常规功能则不是这种情况。
*   模板函数（不完全专业化）得到与模板函数相同`inline`的处理。

**编译器行为**

*   标记的函数`inline`将在每个需要的目标文件中作为弱符号发出，这可能会增加它们的大小（查找模板膨胀）。
*   而编译器实际上内联调用（即，在使用点复制/粘贴代码而不是执行常规函数调用）完全由编译器自行决定。关键字的存在可能会或不会影响决策，但它充其量只是一个*提示*。

**链接器行为**

*   弱符号合并在一起以在最终库中出现一次。一个好的链接器可以检查多个定义是否一致，但这不是必需的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-11T10:34:29.543

的目的`inline`是允许在多个翻译单元中定义一个函数，这对于某些编译器能够在任何使用它的地方内联它是必要的。每当您在头文件中定义函数时都应该使用它，尽管您可以在定义模板或类定义中的函数时省略它。

在没有标题的情况下定义它`inline`是一个非常糟糕的主意。如果您包含来自多个翻译单元的标题，则您违反了一个定义规则；您的代码可能不会链接，并且如果链接可能会表现出未定义的行为。

在头文件中声明它`inline`但在源文件中定义它也是一个非常糟糕的主意。该定义必须在任何使用它的翻译单元中可用，但通过在源文件中定义它只能在一个翻译单元中使用。如果另一个源文件包含头文件并尝试调用该函数，则您的程序无效。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-11T09:25:32.713

*没有，* *如果函数是在命名空间或全局范围内声明的*（导致链接器错误）`inline`，您可能最终会得到多个导出的符号。

 *但是，对于一个类（如您的示例中所示），大多数编译器隐式将该方法声明为内联（`-fno-default-inline`将在 GCC 上禁用该默认值）。

如果您将函数声明为内联，编译器可能希望在翻译中看到它的定义。因此，您应该在定义可见时保留它。

在更高级别：类声明中的定义通常对更多翻译可见。这可以带来更好的优化，并且可以增加编译时间。

除非手动优化和快速编译都很重要，否则现在在类声明中使用关键字是不寻常的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T09:26:54.073

这个问题解释了很多关于内联函数的内容[__inline__ 是什么意思？](https://stackoverflow.com/questions/2082551/what-does-inline-mean)（即使它是关于**inline**关键字。）

基本上，它与标题无关。在头文件中声明整个函数只会更改函数源所在的源文件。 inline 关键字修改*生成的编译函数*的放置位置 - 在它自己的位置，以便每个调用都会去那里或就地每次通话（更好的性能）。然而，编译器有时会选择为自己内联的函数或方法，而关键字只是对编译器的*建议*。即使没有指定内联的函数也可以由编译器选择为内联，如果这样可以提供更好的性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T09:28:57.340

如果您将多个对象链接到一个可执行文件中，通常应该只有一个对象包含函数的定义。For `int whatever() { return 4; }`- 任何用于生成对象的翻译单元都将包含`whatever`函数的定义（即可执行代码）。链接器不知道将调用者定向到哪一个。如果`inline`提供，则可执行代码可能会或可能不会在调用站点内联，但如果不是，则允许链接器假定所有定义都是相同的，并任意选择一个来引导调用者。如果不知何故定义不一样，那么它被认为是你的错，你会得到未定义的行为。使用`inline`，在编译调用时必须知道定义，因此您将内联声明放在头文件中并将内联定义放在 .cpp 文件中的想法只有在所有调用者碰巧稍后在同一个 .cpp 文件中时才有效 - 在一般它已损坏，并且您希望（名义上）内联函数的定义出现在声明它的标头中（或者没有事先声明的单个定义）。*

# awk - 使用 AWK 在特定范围内找到 Max 和 Min

> ID：10103173
> 
> 赞同：3
> 
> 时间：2012-04-11T09:21:36.050
> 
> 标签：awk, max, min

我有一个包含三列的文件，我想获得最大值`$3`和最小值，`$2`但在特定范围`$1`内`awk`：

```
Col1 Col2 Col3
==============
X    1    2
X    3    4
Y    5    6
Y    7    8 
```

例如，我想获得 的最小值和while`Col2`的最大值。`Col3``Col1=X`

我可以处理最大值和最小值，但我不知道如何在特定范围内找到它这是我的代码：

```
awk ' min=="" || $2 < min {min=$2; minline=$0} $3 > max {max=$3; maxline=$0};END {print $1,min,max}' 
```

我尝试添加`{If ($1==X)}`，但效果不佳。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:51:40.797

```
kent$  echo "X    1    2
X    3    4
Y    5    6
Y    7    8
"|awk '$1=="X"{min=$2<min||min==""?$2:min;max=$3>max||max==""?$3:max}END{print min,max}'
1 4 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T09:50:41.497

关于什么：

```
awk 'BEGIN { c=1 }
     $1 == "X" { if (c==1) { mmin=$2; mmax=$3 ;c++ }
                 if ($2<mmin) { mmin=$2 }
                 if ($3>mmax) { mmax=$3 }
     } 
     END { print "X min: " mmin ", max: " mmax }' INPUTFILE 
```

[在行动中看到它@Ideone](http://ideone.com/dpvwL)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T10:35:59.837

如果要收集所有最小值和最大值：

```
awk '
  $2 < min[$1] {min[$1] = $2}
  $3 > max[$1] {max[$1] = $3}
  {col1[$1] = 1}
  END {for (c in col1) {print c, min[c], max[c]}}
' file 
```

# sql - SQL，只有匹配所有外键值才能返回记录？

> ID：10103174
> 
> 赞同：2
> 
> 时间：2012-04-11T09:21:44.503
> 
> 标签：sql, sql-server, sql-match-all, relational-division

我有两张桌子

```
Table A
type_uid, allowed_type_uid
9,1
9,2
9,4
1,1
1,2
24,1
25,3

Table B
type_uid
1
2 
```

从表 AI 需要返回

```
9
1 
```

使用`WHERE IN`我可以返回的子句

```
9
1
24 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:30:10.607

```
SELECT
  TableA.type_uid
FROM
  TableA
INNER JOIN
  TableB
    ON TableA.allowed_type_uid = TableB.type_uid
GROUP BY
  TableA.type_uid
HAVING
  COUNT(distinct TableB.type_uid) = (SELECT COUNT(distinct type_uid) FROM TableB) 
```

将两个表连接在一起，这样您就只有与您感兴趣的类型匹配的记录。

按 对结果集进行分组`TableA.type_uid`。

检查每个组是否具有与`allowed_type_uid`中存在的相同数量的值`TableB.type_uid`。

`distinct`***仅***当任一表中可能存在重复记录时才需要。如果知道***两个***表都只有唯一值，则`distinct`可以删除。

还应该注意的是，随着 TableA 大小的增长，这种类型的查询会迅速降低性能。这是因为索引在这里实际上并没有太大帮助。

它仍然是一种有用的结构，但不是我建议实时运行查询的结构。而是使用它来创建另一个持久化/缓存的结果集，并仅在需要时使用它来刷新这些结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:03:13.440

或者稍微便宜一点的版本（资源方面）：

```
SELECT 
    Data.type_uid
FROM 
    A AS Data
    CROSS JOIN
    B
    LEFT JOIN
    A
    ON Data.type_uid = A.type_uid AND B.type_uid = A.allowed_type_uid
GROUP BY 
    Data.type_uid
HAVING 
    MIN(ISNULL(A.allowed_type_uid,-999)) != -999 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:46:26.790

你的解释不是很清楚。我认为您想从表 A 中获取那些 type_uid，其中表 B 中的所有记录都有一个匹配的 A.Allowed_type_uid。

```
SELECT T2.type_uid
FROM (SELECT COUNT(*) as AllAllowedTypes FROM #B) as T1,
    (SELECT #A.type_uid, COUNT(*) as AllowedTypes
    FROM #A
        INNER JOIN #B ON
            #A.allowed_type_uid = #B.type_uid
    GROUP BY #A.type_uid
    ) as T2
WHERE T1.AllAllowedTypes = T2.AllowedTypes 
```

（Dems，你比我快:)）

# android - 使用 sso 在 facebook 墙上发帖

> ID：10103175
> 
> 赞同：0
> 
> 时间：2012-04-11T09:21:48.053
> 
> 标签：android, facebook

我正在制作一个需要使用单点登录进行 facebook 集成的应用程序。我已经成功整合并获得了我的朋友列表。但无法在墙上发布消息。在发布消息时给我错误：

**单点登录发生错误。请稍后再试。API 错误代码：11 API 错误说明：不推荐使用此方法错误消息：不推荐使用 Display=wap 对话框。您可以通过禁用“july_2012”迁移来临时启用它们。他们将于 2012 年 7 月 1 日永久停止工作。**

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:15:37.750

您要实际临时启用更改吗？

如果是这样...

*   当您登录 Facebook 时，转到您应用的 Facebook 页面[https://developers.facebook.com/apps](https://developers.facebook.com/apps)
*   点击“Ëdit App”（靠近右上角），
*   在设置（左栏）下单击“高级”，
*   向下滚动到“迁移设置”部分。
*   启用“2012 年 7 月重大更改”（迁移设置部分倒数第二个）

执行上述操作只会暂时解决您的问题（从外观上看，直到 2012 年 7 月 1 日）。我建议查看 facebook-android-sdk [（可在 Git Hub 上获得）](https://github.com/facebook/facebook-android-sdk)中的示例。虽然[我](https://stackoverflow.com/questions/10073426/is-it-possible-to-extend-facebook-tokens-with-extendaccesstokenifneeded-in-an-an)在 Hackbook 示例的某些方面遇到了问题，但我发现墙上贴出的代码运行良好。

# javascript - 单击事件未在 iOS 的主干中触发

> ID：10103176
> 
> 赞同：0
> 
> 时间：2012-04-11T09:22:05.993
> 
> 标签：javascript, jquery-mobile, cordova, backbone.js, requirejs

我将此项目与骨干网、require.js 下划线、jquerymobile 捆绑到 cordova 或 phonegap 中以部署在 iOS 中。但点击事件不起作用。我有这个。

```
events:{
    "click #log" : "Login"
    },

<a data-role="button" id="log">Log In</a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:19:22.470

你确定你的锚在你的视图元素内吗？

# android - Android Webview如何在加载时删除元素的聚焦/悬停状态？

> ID：10103178
> 
> 赞同：2
> 
> 时间：2012-04-11T09:22:16.540
> 
> 标签：android, webview, focus, hover

我有一个使用 webview 加载和显示 html 页面的 Android 应用程序。但是当一个新页面刚刚加载到 webview 中时，有时会有一个元素已经悬停。例如，id 为“imhovered”的元素已经悬停并且具有 div 的蓝色背景（请参见下面的代码）。这取决于当前页面的元素结构和用户在前一页面中的触摸位置，这是随机发生的。

html代码：

```
<body>
<a href="link1" class="menu">
    <div  class="qlink">here is div1</div>
</a>
<a href="link2" class="menu">
    <div  class="qlink"> here is div2 </div>
</a>
<a  id="imhovered" href="link3" class="menu">
    <div class="qlink">here is div3</div>
</a>            
</body> 
```

和风格：

```
.menu {
    color: red;
    text-decoration:none;
    font-family:sans-serif;
    font-size: 28px;
}
.menu:hover {
    color: red;
    background-color: green;
}

.qlink {
    padding-left: 84px;
    padding-top: 24px;
    padding-bottom: 20px;
    background: url(aaa.png) no-repeat scroll 28px 0px;
}
.qlink:hover {
    background-color:blue;
} 
```

我的问题是如何删除元素的这种错误的悬停状态？我试图通过研究和自己的实验找到解决方案一段时间，但仍然没有成功。以下是我在实验中发现的：

webview.clearFocus() -> 不工作

dom 准备好时的 javascript/jquery：

```
$(document).ready(function () {
    alert($("*:hover").attr("id"));--> result:undefined
    alert($("*:active").attr("id")); --> result:undefined
    alert($("*:focus").attr("id")); --> result:undefined
}); 
```

这意味着当 dom 准备好时，没有焦点或悬停的元素。

正文 onload 中的 javascript/jquery（加载页面时）：

```
alert($("*:hover").attr("id")); --> result:imhovered
alert($("*:active").attr("id")); --> result:undefined
alert($("*:focus").attr("id")); --> result:undefined 
```

这意味着当页面刚刚加载时，悬停状态刚刚出现。现在做任何样式修改是否为时已晚，因为已经显示了错误的悬停背景？它是webkit / android的错误吗？我希望你们能给我任何建议来解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:56:48.513

我终于发现当加载过程足够快时，用户将看不到样式修改，所以我进行了以下样式修改，它解决了我的问题：

```
window.onload = 
    function() {
        var imhovered = $("*:hover");
        var children = imhovered.children();
        children.removeClass("qlink").addClass("qlinkNoHover");
        imhovered.bind('touchstart touchend', function() {
        $(this).children().toggleClass('qlinkFixHovered');
    });
}

.qlinkNoHover {
    background-color:transparent;
    padding-left: 84px;
    padding-top: 24px;
    padding-bottom: 20px;
    background: url(aaa.png) no-repeat scroll 28px 0px;
}

.qlinkFixHovered {
    background-color:blue !important;
} 
```

我希望这可以帮助有同样问题的人。

# c# - Datagridview.SelectedCells 顺序

> ID：10103187
> 
> 赞同：7
> 
> 时间：2012-04-11T09:23:07.457
> 
> 标签：c#, excel, datagridview, clipboard, copy-paste

我正在开发一个 C# 应用程序，其中包含很多空的 DataGridViews。用户必须用 excel 中的复制/粘贴数据填充它们。我要做的是：

```
int i = 0;
string s = Clipboard.GetText();

// Separate lines
string[] lines = Regex.Split(s, "\r\n");
foreach (string line in lines)
{
    // Separate each cell
    string[] cells = line.Split('\t');
    foreach (string cell in cells)
    {
        // If we selected as many cells as copied
        if (dataGridView.SelectedCells.Count == (lines.Length-1)*(cells.Length))
        {
            dataGridView.SelectedCells[i].Value = cell;
            i++;
        }
    }
} 
```

问题是，如果我复制这样的内容（在 excel 上）：

```
1   2   3
4   5   6 
```

我的数据网格视图将如下所示：

```
6   4   2
5   3   1 
```

我真的不知道该怎么做才能解决这个问题...在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:08:09.520

1.  将剪贴板数据转换为二维数组。记住每个维度的长度。
2.  遍历选定的单元格并找到左上角和右下角的单元格。从中您可以确定它的尺寸是否合适。
3.  使用双循环，将剪贴板数据从数组位置直接映射到单元格坐标（不使用选定的单元格），使用左上角单元格坐标作为偏移量。

或者，您可以创建一个包含属性 Row、Col 和 Value 的小类/结构的列表，而不是二维数组。然后只需迭代它而不是双循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:39:32.153

代替

`dataGridView.SelectedCells[i].Value = cell;`

和

`dataGridView.SelectedCells[(dataGridView.SelectedCells.Count-1) - i].Value = cell;`

# android - 滚动处于活动状态时更改 scrollbarThumbVertical 的可绘制对象

> ID：10103190
> 
> 赞同：3
> 
> 时间：2012-04-11T09:23:11.563
> 
> 标签：android, listview, scrollbar, scrollview

我尝试使用选择器（state_pressed，state_focus，...）更改滚动条的可绘制对象，但我没有工作。

滚动视图

```
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scroll" 
android:layout_width="fill_parent"     
android:layout_height="wrap_content"
android:scrollbarSize="5dp"
android:scrollbarThumbVertical="@drawable/custom_scrollbar" > 
```

选择器

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" > 
     <item      
         android:state_pressed="true"     
         android:drawable="@drawable/scrollbar_pressed" /> 

     <item      
         android:state_focused="true"     
         android:drawable="@drawable/scrollbar_pressed" /> 

     <item android:drawable="@drawable/scrollbar" />
</selector> 
```

两个可绘制对象之一。唯一的区别是颜色

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">    
    <gradient
        android:startColor="@color/grey" 
        android:endColor="@color/dark_grey"            
        android:angle="0" />
    <stroke 
        android:width="1dp"
        android:color="@color/white"/> 
    <corners android:radius="6dp" />
</shape> 
```

任何其他解决方案？

# cakephp - 关于递归查找条件的问题 = 2

> ID：10103191
> 
> 赞同：1
> 
> 时间：2012-04-11T09:23:15.057
> 
> 标签：cakephp, cakephp-2.0

这是我的调试 $this->Subjob->find('all')

```
(int) 0 => array(
    'Subjob' => array(
        'id' => '1',
        'job_id' => '2',
        'subjob_title' => 'mastersubsjob',
    ),
    'Job' => array(
        'id' => '2',
        'content_id' => '2',
        'Content' => array(
            'id' => '2',
            'content_type_id' => '2',
            'content_title' => 'masterdata' // 
```

我设置了 recursive = 2 并且我想通过 content_title 搜索 Subjob，这是我的控制器

```
 $conditions[] = array('Content.content_title LIKE'=>'%'.$this->data['Subjob']['content_title'].'%'); 
```

$this->set('subjobs', $this->paginate($conditions));

但我在'where子句'中得到“数据库错误未知列'Content.content_title'”。

对不起，我的英语不好。

# javascript - Javascript - Jquery on the fly id 检索

> ID：10103192
> 
> 赞同：0
> 
> 时间：2012-04-11T09:23:27.430
> 
> 标签：javascript, jquery

我用 jQuery 制作了一个 JS 实用程序，它为`div`元素和链接提供 ID，它们是协调的。

例子：

```
div id="container"
div id="1"
div id="2"

div id="links"
a name="1"
a name="2" 
```

因此，一旦页面加载完毕，当我点击第一个链接 (name="1") 时，它应该显示第一个 div (id="1")。

但似乎我的 ID 是动态创建的，该函数似乎没有找到正确的 div。

这是我的功能：

```
$("#video_grid .grid_item a").each(
        function(i) {

            /* FINDING 'A' AND GIVING THEM NAME */

            $(this).addClass("item" + (i + 1));
            $(this).attr("name", "#" + (i + 1));

            /* BACKGROUND */

            $(this).css("background-image",
                    "url(images/visu_" + (i + 1) + ".jpg");
            $(this).hover(
                    function() {
                        $(this).css("background-image",
                                "url(images/visu_hover_" + (i + 1) + ".jpg")
                    },
                    function() {
                        $(this).css("background-image",
                                "url(images/visu_" + (i + 1) + ".jpg");
                    });
        });

/* FINDING DIV GIVING THEM IDS */

$("#capsule_player > div").each(function(i) {
    $(this).addClass("item#" + (i + 1));
});

/* HERE'S THE PROBLEM */

$("#capsule_player div:first-child").css("display", "block");
/* appel la div correspondante avec la video */
$(".grid_item a").live("click", function() {
    var divname = $(this).attr("name");
    alert(divname);
    /* WORK FINE TIL HERE */

    /* THIS IS THE REAL PROBLEM */

    $(".item" + divname).show("slow").siblings().hide("slow");

    /* ALERT IF YOU FIND THE DIV WITH THE ID, DOES NOT WORK */

    if ($(".item" + divname)[0]) {
        alert('tonton');
    }

}); 
```

我正在使用 jQuery、基本的 HTML 和 CSS，并且不允许使用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:31:44.373

您应该为 div 提供其 ID 的函数正在为它们提供一个类。你应该把它改成这样：

```
$("#capsule_player > div").each(function(i){
    $(this).attr("id", 'item' + (i+1));
}); 
```

那*应该*可以，但是其余的代码可以使用 tidyup 来完成，因为有更好/更语义化的方式来做你想做的事情（我不忙的时候可能会这样做）。

**编辑：**

这样的事情会更好（基于 Armatus 的评论）：

```
// give each div a data-index attribute
$("div.item").each(function(i){
    $(this).attr("data-index", i);
});

// give each anchor a data-index attribute
$("#video_grid .grid_item a").each(function(i) {
    $(this).attr("data-index", i);
});

$(".grid_item a").live("click",function () {
    var index = $(this).attr("data-index");

    $('div.item[data-index="' + index + '"]').show();
}); 
```

`.live()`已弃用，但我会留下它，因为我不知道您使用的是哪个版本的 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:07:44.033

虽然从长远来看，Christian 向您展示的路线可能会更好，而且肯定更具学习性，但您最初的问题可以通过更改两行轻松解决：

```
 $(this).attr('name', '#' + (i + 1));
    [...]
    $(this).addClass('item#' + (i + 1)); 
```

进入

```
 $(this).attr('name', 'Q' + (i + 1));
    [...]
    $(this).addClass('itemQ' + (i + 1)); 
```

直接的问题是你给你的 div 一个包含“#”符号的类名。这实际上将成为您班级名称的一部分。但是，在选择期间，此“#”符号将被解释为“ID”选择器。所以这行不通。

# php - 使用 unlink() 删除文件

> ID：10103193
> 
> 赞同：2
> 
> 时间：2012-04-11T09:23:34.027
> 
> 标签：php, encoding

我有一个 Apache 服务器 (CentOS)，我在其中托管一个页面。在此页面上，我可以上传文件并删除它们。上传和显示文件名工作正常。困扰我的事情是删除包含以下字符的文件：ČŠŽ（我猜是编码问题）。

č Č ž Ž š Š.txt 在上传文件夹中显示为 ÄŤ ÄŚ Ĺľ Ĺ˝ Ĺˇ Ĺ .txt。

有谁知道可能出了什么问题？

预先感谢您的回复。

这是上传代码：

```
<?php 

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];

    // Generate timestamp
    date_default_timezone_set('UTC');
    $timeStamp = strtotime("now"); 
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';

    $targetFile =  str_replace('//','/',$targetPath) . $timeStamp . "_" . $_FILES['Filedata']['name']; 

    if( move_uploaded_file($tempFile,$targetFile)){ //source, destination
        echo true;
    }else{
        echo false;
    }

}
?> 
```

我决定替换文件名中的特殊字符：

```
 $subject = $_FILES['Filedata']['name'];
    $search  = array('č', 'Č', 'ž', 'Ž', 'š', 'Š', 'ć', 'Ć', 'đ', 'Đ');
    $replace = array('c', 'C', 'z', 'Z', 's', 'S', 'c', 'C', 'd', 'D');    
    $subject = str_replace($search, $replace, $subject); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:42:36.573

你甚至可以扩展你的替换功能：

```
function remove_accent($str) 
{ 
  $a = array('À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'ß', 'à', 'á', 'â', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'ÿ', 'Ā', 'ā', 'Ă', 'ă', 'Ą', 'ą', 'Ć', 'ć', 'Ĉ', 'ĉ', 'Ċ', 'ċ', 'Č', 'č', 'Ď', 'ď', 'Đ', 'đ', 'Ē', 'ē', 'Ĕ', 'ĕ', 'Ė', 'ė', 'Ę', 'ę', 'Ě', 'ě', 'Ĝ', 'ĝ', 'Ğ', 'ğ', 'Ġ', 'ġ', 'Ģ', 'ģ', 'Ĥ', 'ĥ', 'Ħ', 'ħ', 'Ĩ', 'ĩ', 'Ī', 'ī', 'Ĭ', 'ĭ', 'Į', 'į', 'İ', 'ı', 'Ĳ', 'ĳ', 'Ĵ', 'ĵ', 'Ķ', 'ķ', 'Ĺ', 'ĺ', 'Ļ', 'ļ', 'Ľ', 'ľ', 'Ŀ', 'ŀ', 'Ł', 'ł', 'Ń', 'ń', 'Ņ', 'ņ', 'Ň', 'ň', 'ŉ', 'Ō', 'ō', 'Ŏ', 'ŏ', 'Ő', 'ő', 'Œ', 'œ', 'Ŕ', 'ŕ', 'Ŗ', 'ŗ', 'Ř', 'ř', 'Ś', 'ś', 'Ŝ', 'ŝ', 'Ş', 'ş', 'Š', 'š', 'Ţ', 'ţ', 'Ť', 'ť', 'Ŧ', 'ŧ', 'Ũ', 'ũ', 'Ū', 'ū', 'Ŭ', 'ŭ', 'Ů', 'ů', 'Ű', 'ű', 'Ų', 'ų', 'Ŵ', 'ŵ', 'Ŷ', 'ŷ', 'Ÿ', 'Ź', 'ź', 'Ż', 'ż', 'Ž', 'ž', 'ſ', 'ƒ', 'Ơ', 'ơ', 'Ư', 'ư', 'Ǎ', 'ǎ', 'Ǐ', 'ǐ', 'Ǒ', 'ǒ', 'Ǔ', 'ǔ', 'Ǖ', 'ǖ', 'Ǘ', 'ǘ', 'Ǚ', 'ǚ', 'Ǜ', 'ǜ', 'Ǻ', 'ǻ', 'Ǽ', 'ǽ', 'Ǿ', 'ǿ'); 
  $b = array('A', 'A', 'A', 'A', 'A', 'A', 'AE', 'C', 'E', 'E', 'E', 'E', 'I', 'I', 'I', 'I', 'D', 'N', 'O', 'O', 'O', 'O', 'O', 'O', 'U', 'U', 'U', 'U', 'Y', 's', 'a', 'a', 'a', 'a', 'a', 'a', 'ae', 'c', 'e', 'e', 'e', 'e', 'i', 'i', 'i', 'i', 'n', 'o', 'o', 'o', 'o', 'o', 'o', 'u', 'u', 'u', 'u', 'y', 'y', 'A', 'a', 'A', 'a', 'A', 'a', 'C', 'c', 'C', 'c', 'C', 'c', 'C', 'c', 'D', 'd', 'D', 'd', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'G', 'g', 'G', 'g', 'G', 'g', 'G', 'g', 'H', 'h', 'H', 'h', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', 'IJ', 'ij', 'J', 'j', 'K', 'k', 'L', 'l', 'L', 'l', 'L', 'l', 'L', 'l', 'l', 'l', 'N', 'n', 'N', 'n', 'N', 'n', 'n', 'O', 'o', 'O', 'o', 'O', 'o', 'OE', 'oe', 'R', 'r', 'R', 'r', 'R', 'r', 'S', 's', 'S', 's', 'S', 's', 'S', 's', 'T', 't', 'T', 't', 'T', 't', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'W', 'w', 'Y', 'y', 'Y', 'Z', 'z', 'Z', 'z', 'Z', 'z', 's', 'f', 'O', 'o', 'U', 'u', 'A', 'a', 'I', 'i', 'O', 'o', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'A', 'a', 'AE', 'ae', 'O', 'o'); 
  return str_replace($a, $b, $str); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:29:03.693

发布您的上传文件代码。但是，最好不要使用上传文件的 neam 并直接使用它。删除奇怪的字符或对文件名执行 utf8 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:32:23.657

我也鼓励扁平化特殊字符（Š => S 等等）。我在访问具有此类名称的文件/文件夹时遇到了很多问题。但理想的解决方案是完全重新生成文件名......

# google-app-engine - url-fetching 大文档时避免超出软私有内存限制

> ID：10103195
> 
> 赞同：0
> 
> 时间：2012-04-11T09:23:42.730
> 
> 标签：google-app-engine

我需要定期运行获取相对较大的 xml 文档 (5Mb) 并处理它们的计划任务。

我目前遇到的一个问题是我达到了应用程序实例的内存限制，并且*在*我的任务运行时实例被终止。

我做了一些粗略的测量：

1.  任务通常安排到已经使用 40-50 Mb 内存的实例中
2.  5 MB 文本文件的 URL 提取将实例内存使用量增加到 65-75 Mb。
3.  将提取的文本解码为 Unicode 会将内存使用量增加到 95-105 Mb。
4.  将 unicode 字符串传递给 lxml 解析器并访问其根节点会将实例内存使用量增加到大约 120-150 Mb。
5.  在文档的实际处理过程中（将 xml 节点转换为数据存储模型等），实例被终止。

我可以通过将编码文本直接传递给 lxml 解析器来避免第三步并节省一些内存，但是[为 lxml 解析器指定编码对](https://stackoverflow.com/q/10071831/347735)我来说在 GAE 上有一些问题。

我可能可以使用 MapReduce 库来完成这项工作，但是对于 5mb 的文件真的值得吗？

另一种选择可能是将任务拆分为多个任务。

我也可以将文件保存到blobstore，然后通过从blobstore逐行读取来处理它？作为旁注，如果 UrlFetch 服务允许“按需”读取响应以简化大型文档的处理，那将很方便。

那么一般来说，执行此类工作最方便的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:38:43.407

这是在前端还是后端实例上？对我来说，这看起来像是后端实例的工作。

您是否考虑过使用不同的实例类型？

*   [前端类型](https://developers.google.com/appengine/docs/adminconsole/performancesettings)
*   [后端类型](https://developers.google.com/appengine/docs/python/backends/overview#Billing_Quotas_and_Limits)

# eclipse - BPEL Designer for Eclipse：如何调试 BPEL 流程

> ID：10103198
> 
> 赞同：2
> 
> 时间：2012-04-11T09:24:01.220
> 
> 标签：eclipse, debugging, bpel, apache-ode

我正在尝试调试 BPEL 流程。我使用 BPEL Designer for Eclipse (3.7.2) 制作它，我使用 Ode 1.3 作为引擎。

我不知道如何调试我的进程。我可以在调试会话中将它部署在 ode 上，但我真的不明白在那之后我能做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T05:12:17.640

[您可以在WSO2 BPS 服务器](http://wso2.com/products/business-process-server)上部署以 WS-BPEL 2.0 标准开发的 BPEL 流程。在 WSO2 Business Process Server 上部署 BPEL 流程后，您可以使用以下机制来调试/排除故障。

1.使用消息跟踪器。这使您可以查看进出 BPS 服务器的入站和出站消息。为 BPEL 流程启用消息跟踪日志；

将以下条目添加到 $CARBON-HOME/lib/log4j.properties

log4j.logger.org.apache.ode.bpel.messagetrace=跟踪 log4j.logger.org.wso2.carbon.bpel.messagetrace=跟踪

应配置首选 log4j 附加程序，使其具有 TRACE 级别的阈值。如果 CARBON_LOGFILE 是 log4j appender，则应按如下方式更改。默认情况下，这设置为调试。

例如 - log4j.appender.CARBON_LOGFILE.threshold=TRACE

重新启动服务器。

2.使用“实例信息”页面中的事件表（图 1）。成功执行后，每个活动都应该有 3 个事件。如果一个活动只有 2 个事件，或者它有一个“ActivityFailureEvent”，那么该特定活动中一定有问题。您可能需要参考 WSO2 BPS 服务器的日志文件，以便进一步调查该问题。

![在此处输入图像描述](../Images/a41053171e26482de2d2563b86417b99.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:29:43.627

不幸的是，用于 BPEL 调试的开源工具非常有限。尽管 ODE 提供了在断点处暂停和恢复进程的 API，但当前的工具并未使用它。我建议[启用 DebugBpelEventListener](https://github.com/apache/ode/blob/trunk/axis2-war/src/main/webapp/WEB-INF/conf/ode-axis2.properties#L95)，它将执行事件输出到配置的记录器。这通常有助于了解正在发生的事情。

# c++ - c++多继承构造函数调用

> ID：10103199
> 
> 赞同：0
> 
> 时间：2012-04-11T09:24:01.263
> 
> 标签：c++, inheritance

在下面几行中，类 A 是基类，由类 B 和 C 继承。类 D 继承自 B 和 C。此外，D 中的构造函数调用 B、C 和 A 的构造函数。因为当 B 和 C 继承 A 时virtual，它们没有资格直接调用 A 的构造函数（因为必须通过第 3 代调用相同的构造函数）。

我的问题是，如果我想创建一个 B 类的对象，那么由于 A 是虚拟继承的，是否有调用 A 的构造函数（传递 v1 和 v2，用于初始化的变量）？

```
class A {
   int a1,a2;
   A() {
   }

   A(int v1,v2) {
      a1 = v1;
      a2 = v2;
   }
};

class B:virtual public A {
   int b1,b2;
   B() {
   }

   B(int v1,v2) {
      b1 = v1;
      b2 = v2;
   }
};

class C:virtual public A {
   int c1,c2;
   C() {
   }

   C(int v1,v2) {
      c1 = v1;
      c2 = v2;
   }
};

class D:public B,public C {
   int d1,d2;
   D() {
   }

   D(int v1,v2):B(v1,v2),C(v1,v2),A(v1,v2)
   {
      d1 = v1;
      d2 = v2;
   }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:28:52.837

也可以`B`为`A`. 虚拟继承意味着，**如果**你有一个更派生的对象，那么虚拟基是由最派生的对象构造的。但是，如果您只构建 的实例`B`，则该实例*是*最派生的对象。所以就这样写吧：

```
 class B : public virtual A
 {
 public:
     B() : A(1, 2) {  }
     // ...
 }; 
```

只有当您*从中派生时`B`*，才会忽略基本初始化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:30:17.857

您可以做的是使 B 类和 C 类从 A 正常继承（没有关键字“virtual”），但使 D 类虚拟地从 B 和 C 继承。这将允许您通过以下方式创建 B 类（或 C）的对象为 A 类构造函数传递值>

# meta-tags - 为什么网络开发人员仍然使用元关键字和元描述标签？

> ID：10103202
> 
> 赞同：1
> 
> 时间：2012-04-11T09:24:13.810
> 
> 标签：meta-tags

**谷歌根本没有使用元关键字标签，**因为关键字主要用于垃圾搜索引擎。

**谷歌没有使用元描述标签进行排名。**如果部分内容不适合，有时元描述标签会用于搜索结果中的站点片段。但大多数元描述是从页面内容自动生成的，元描述与页面内容的开头相同。

谷歌已经放弃了对搜索排名的元关键字和元描述标签的支持。谷歌处理了世界上大约 92% 的搜索查询。所以现在网络开发者可以停止使用元关键字和元描述元标签，因为花时间在它们上面是不值得的。

使用元关键字和元描述标签有什么真正的好处吗？

链接：

*   [谷歌网站管理员博客关于谷歌对元标签的支持](http://googlewebmastercentral.blogspot.com/2009/09/google-does-not-use-keywords-meta-tag.html)；
*   与[Matt Cutts 合作的关于 Google 支持元标签的](http://www.youtube.com/watch?v=jK7IPbnmvVU)视频；
*   [StatCounter 搜索引擎统计使用情况](http://gs.statcounter.com/#search_engine-ww-monthly-201103-201203)- 谷歌处理世界上大约 92% 的搜索查询；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T03:05:52.093

如果 google SEO 是您唯一关心的问题，那么元关键字完全是浪费时间，但如果您针对的是其他搜索引擎，则可能值得研究。

我相信百度仍然使用元关键字，而搜索引擎是中国市场的主导者，因此如果您希望您的网站在中国流行，那么添加元关键字是值得的。

无论如何，我不会在其中塞入过多不相关的关键字，因为您所针对的任何搜索引擎都有可能对您造成不利影响。总结您的页面内容的 5-7 个字是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:35:42.453

不，我们应该继续使用元标签，因为我们不，也不应该，只是支持谷歌。方法应该是：使用与搜索引擎无关的方法使文档尽可能可索引，然后对一两个顶级引擎进行特殊处理——例如使用谷歌的在线工具来提高搜索排名。

谷歌目前在搜索领域占据主导地位，但不能保证他们会一直处于领先地位。未来可能是 Facebook，或者 Yahoo/Bing 等可能会大幅提高搜索质量，人们会切换回来。

旁注：对于搜索，我现在真的很喜欢[DuckDuckGo](https://duckduckgo.com/)。许多不错的搜索快捷方式（请参阅 bang 运算符）和有意义的隐私政策。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:26:37.357

`keywords`：

*   谷歌不是唯一的搜索引擎。谷歌的市场份额取决于许多因素（国家、年龄、技术诀窍……）。大数字中的一小部分也是大数字。
*   有一些特殊用途的搜索引擎（针对利基市场；仅抓取手动选择的网站等）可能仍会考虑它。
*   本地搜索引擎可能会使用它。（本地）*全文*搜索引擎无论如何。
*   一些 CMS 将其用于站点搜索。
*   除了搜索引擎，还有其他消费用户代理，例如解析器/提取器。

`description`：

*   它甚至对谷歌也很有用，例如，当有人只搜索您网站的标题/域时，谷歌通常会显示“登录/注册……返回顶部……请插入验证码……”等片段。如果提供了描述，它可以用来代替。
*   （下面提到的点`keywords`也与 相关`description`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:40:32.320

我们应该使用它们，因为它们就在那里。谁知道 - 也许它们将来会再次有用？

当 W3C 放弃它们时，我们可以停止使用它们。

只是我的意见...

# javascript - 在 ClientSideValidation 之后执行 javascript

> ID：10103203
> 
> 赞同：0
> 
> 时间：2012-04-11T09:24:15.713
> 
> 标签：javascript, vb.net

我在 vb.net Web 应用程序中使用了一堆标准的 aspRequiredFieldValidars。我想做的是在每次尝试执行客户端验证结束时执行一个 Javascript 函数。该函数需要在所有验证器都运行并显示页面验证摘要后执行。

有人可以告诉我这是否可能并请指出我正确的方向吗？

```
function ValidationComplete() {
 // Run me after validation has been performed
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:44:41.513

我已经解决了。对于其他有此问题的人，我做了以下操作：

将提交按钮的 CausesValidation 属性设置为 False，将 onclientclick 属性设置为代理 Javascript 函数。

```
<asp:LinkButton ID="btnSubmit" runat="server" Text="Submit" CausesValidation="False" onclientclick="return DetailsValidation()" /> 
```

在您的 Javascript 文件中的页面上添加调用 .net 验证 Javascript 并根据结果执行操作的代理函数。返回 false 到首页提交并返回 true 以允许它。

```
function DetailsValidation() {
    Page_ClientValidate();
    if (Page_IsValid) {
        return true;
    }
    else {
        CustomAfterValidation();
        return false;
    }
} 
```

在这种情况下，在执行 .Net 验证并且页面无效时调用 CustomAfterValidation。

# java - 关于 Fork-Join 框架的详细信息

> ID：10103204
> 
> 赞同：3
> 
> 时间：2012-04-11T09:24:18.560
> 
> 标签：java, fork-join

在 Doug Lea 的论文“A Java Fork/Join Framework”中：

[http://gee.cs.oswego.edu/dl/papers/fj.pdf](http://gee.cs.oswego.edu/dl/papers/fj.pdf)

在 2.1 Work-Stealing 中，他说：

> 当工作线程遇到连接操作时，**它会处理其他任务**（如果可用），直到发现目标任务已完成（通过 isDone）。否则，所有任务都会在没有阻塞的情况下运行完成。

那么谁能具​​体告诉我这些**“其他任务”**来自哪里？它们来自其他工作线程的任务队列吗？这是否意味着每当工作线程遇到连接调用时，它会继续“从其他线程窃取任务”而不是“跳到自己队列中的其他任务”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:27:53.060

当有挂起的任务时，“其他任务”可能来自它自己的双端队列，其他线程的双端队列，或者来自新请求的提交队列。

join() 是一个相当困难的过程。它涉及到任务控制，即当任务处于活动处理和暂停等待某事时控制任务的能力。在应用程序中执行此操作通常不起作用。（操作系统在这方面做得很好，Cilk、JCilk 通过使用编译器/运行时来做到这一点。）Doug Lea 在连接工作线程时使用“延续线程”。

# api - 创建 MySpace API -（验证您的电子邮件错误）

> ID：10103205
> 
> 赞同：4
> 
> 时间：2012-04-11T09:24:22.583
> 
> 标签：api, myspace, social-media

我正在尝试创建一个 MySpace API，以便我的用户可以使用 MySpace 连接到我的站点。

所有的教程都说“去[http://developer.myspace.com/](http://developer.myspace.com/)并创建一个开发者帐户......”

我注册了一个新的 MySpace 帐户，验证了我的电子邮件，允许他们访问我的 gmail 以便他们可以搜索朋友，邀请了几个朋友，基本上完成了他们作为新用户要求你的所有步骤......

但是每当我转到[http://developer.myspace.com/](http://developer.myspace.com/)并单击“**开发者注册**”或“**开始构建！** ”时，我都会收到一条错误消息，上面写着：

> 很抱歉，您必须先验证您的电子邮件地址！在完成此步骤之前，您无法访问许多 MySpace 功能。请返回您的 MySpace 个人资料并单击“验证您的电子邮件地址”链接。此步骤完成后，您可以重新向开发者平台申请。

我已经使用他们发送给我的电子邮件中的链接验证了我的帐户 3 次，并等待 24 小时以应用任何更改。您的个人资料页面上没有“验证您的电子邮件地址”链接，因此这似乎是一条已弃用的错误消息。

一点点挖掘表明这个问题至少存在 2 年： http: [//developer.myspace.com/community/forums/t/9579.aspx](http://developer.myspace.com/community/forums/t/9579.aspx?PageIndex=1) ?PageIndex=1 ... 甚至已经发布在这里，没有解决方案：[Myspace 开发者 api：无法访问/验证电子邮件](https://stackoverflow.com/questions/9510719/myspace-developer-api-no-access-verify-email)

任何想法如何访问我的 API 密钥？

我是否只需要等待我的帐户显示为已验证...？（已经24小时了）

# android - android中的Asynctask和线程有什么区别？

> ID：10103206
> 
> 赞同：0
> 
> 时间：2012-04-11T09:24:29.643
> 
> 标签：android, multithreading, exception

我目前正在开发一个 android 应用程序，当我使用 AsyncTask 或 Thread 时总是会弹出意外的异常。有人告诉我它们之间有什么区别以及如何使用它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:37:17.137

```
"there is always unexpected exception popup when I use AsyncTask or Thread." 
```

这取决于如何使用它们，以及其中的代码。大多数情况下，当您在此（其他）线程或异步任务中正确使用**主 UI 线程时。**

对于 AsyncTask 和 Thread 之间的区别，您必须在 SO 和网络上进行搜索。你可以很容易地找到它。

无论如何，我建议你浏览这个博客[**Android Thread Constructs(Part 4): Comparisons**](http://techtej.blogspot.in/2011/03/android-thread-constructspart-4.html)

这个SO问题[**Service, Async Task & Thread之间的区别？**](https://stackoverflow.com/questions/3264383/difference-between-service-async-task-thread)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:28:02.350

你真的需要正确地阅读这个。

[http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:28:12.047

主要使用 AsyncTask - 它是一个经过修饰的线程，它允许您在开始和结束时与 GUI 交互并以受控方式报告进度。如果您真的想使用 Thread，请改用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:39:51.383

这是一个非常好的问题，在开始使用其中一个之前必须考虑，请仔细阅读 [Service, Async Task & Thread 之间的差异？](https://stackoverflow.com/questions/3264383/difference-between-service-async-task-thread)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T20:33:45.793

AsyncTask和Thread有很大的区别，即

线程可以从任何线程、主/UI 或后台触发；但 AsyncTask 必须从主线程触发。

Also on lower api of android(not sure, may be api level < 11), one instance of AsyncTask can be executed only once.

# com - 为什么 Regasm 将 ProgId 放入 HKEY_CURRENT_USER？

> ID：10103209
> 
> 赞同：4
> 
> 时间：2012-04-11T09:24:52.593
> 
> 标签：com, wix, regasm

我有两个我希望（Wix）安装我的软件的虚拟机。一个是 Windows XP SP2，另一个是 Windows XP SP1。他们都不使用域，并且他们都拥有具有管理员权限的本地用户 Administrator。

运行 RegAsm.exe 以在装有 SP3 的机器上注册 MyApp.dll 将我的 ProgId 放入文件夹中：

> HKEY_CLASSES_ROOT\MyAppProgId
> 
> HKEY_LOCAL_MACHINE\Software\Classes\MyAppProgId

而在 SP2 机器上运行它会将它放在文件夹中：

> HKEY_CLASSES_ROOT\MyAppProgId
> 
> HKEY_CURRENT_USER\Software\Classes\MyAppProgId

我在尝试从服务加载 MyApp.dll 时发现了这一点。从 RegAsm.exe 和 Heat.exe 生成的注册表文件似乎都在更新 HKEY_CLASSES_ROOT。

有谁知道这可能是什么原因？

编辑：我最终通过直接写入 HKEY_LOCAL_MACHINE 而不是 HKCR 来解决这个问题 - 这涉及手动编辑生成的 .reg 文件或 .wxs 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:50:33.440

在较旧的设置`HKEY_LOCAL_MACHINE`上对于普通用户是可写的，在较新的 Windows（例如 Windows 7）上则不是。可能取决于配置、用户帐户类型等。

注册的类要么去`HKEY_LOCAL_MACHINE\SOFTWARE\Classes`（有时是可写的，如前所述）要么`HKEY_CURRENT_USER\Software\Classes`（总是可写的）。两者都有效。第一种情况是压倒性的违约。

`HKEY_CLASSES_ROOT`实际上只是一个**视图**，它合并了上述分支的内容。这就是为什么您在两个不同的位置看到它的原因。

RegAsm 似乎足够聪明，可以检测到 HKLM 的只读条件，并自动选择 HKCU。或者您的虚拟机之间存在一些不同的配置设置。

主要区别在于，在第二种情况下，**该 dll 只能在您注册它的用户帐户下使用**。您的服务可能在另一个帐户下运行，因此它无法在第二台机器上加载 dll。

# ios - 在 iPhone、iPad 上显示内嵌图像

> ID：10103210
> 
> 赞同：8
> 
> 时间：2012-04-11T09:24:54.277
> 
> 标签：ios, django, email

我正在尝试使用内联图像在 Django 中创建电子邮件。

```
msg = EmailMultiAlternatives(...)
image_file = open('file_path', 'rb') 
img = MIMEImage(img_data)
image_file.close()
img.add_header('Content-ID', '<image1>') 
img.add_header('Content-Disposition', 'inline')
msg.attach(img)
msg.send() 
```

在模板中我会这样引用它：

```
<img src="cid:image1" /> 
```

这在 Web 浏览器、Outlook、Thunderbird 中运行良好……除了 OSX、iPad 和 iPhone 上的苹果邮件客户端。图像显示两次。它们被正确地内联放置，但它们也附加到电子邮件的底部。我的问题是，我如何摆脱底部的图像？或者我应该以不同的方式处理电子邮件中的图像。

参考：
[http ://djangosnippets.org/snippets/1507/](http://djangosnippets.org/snippets/1507/)
[Django：如何发送带有嵌入图像的 HTML 电子邮件](https://stackoverflow.com/questions/3787755/django-how-to-send-html-emails-with-embedded-images)
[创建一个带有图像的 MIME 电子邮件模板，以便使用 python / django 发送](https://stackoverflow.com/questions/1633109/creating-a-mime-email-template-with-images-to-send-with-python-django)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T04:12:32.863

不同的电子邮件客户端选择以`multipart/mixed`不同的方式呈现消息。

大多数客户选择内联渲染每个部分（在“多部分”消息中）——按照它们添加到电子邮件中的顺序。*但是*，如果某个图像在某个`text/html`部件中被引用，大多数客户端*稍后不会*在“内联所有部件”过程中再次显示该图像。

OSX 和 iOS 上的 Apple Mail 是不同的，因为它们*将*按照包含的顺序显示消息中的每个部分`multipart/mixed`，而不管 HTML 和图像之间的任何内部引用。这会导致您的图像在 HTML 中显示一次，然后在自动内联的消息末尾再次显示。

解决方案是将您的 HTML 和图像资产组合成一个`related`部分。IE：

```
from django.core.mail import EmailMultiAlternatives
from email.mime.image import MIMEImage
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

# HTML + image container 
related = MIMEMultipart("related")

# Add the HTML
html = MIMEText('an image: <img src="cid:some_image"/>', "html")
related.attach(html)

# Add an image
with open("icon.png", "rb") as handle:
    image = MIMEImage(handle.read())
image.add_header("Content-ID", "<some_image>")
image.add_header("Content-Disposition", "inline")
related.attach(image)

# top level container, defines plain text version
email = EmailMultiAlternatives(subject="demo", body="plain text body",
                               from_email="foo@example.com",
                               to=["bar@example.com"])
# add the HTML version
email.attach(related)

# Indicate that only one of the two types (text vs html) should be rendered
email.mixed_subtype = "alternative"
email.send() 
```

# c++ - QImage 似乎根本没有加载任何图像（总是返回 null）？

> ID：10103211
> 
> 赞同：0
> 
> 时间：2012-04-11T09:24:57.797
> 
> 标签：c++, windows, qt

我在 Windows7 上并使用 Qt SDK 4.8。尝试使用 QImage 读取文件，但它似乎没有加载。也就是说，QImage(filename) 或 QImage(filename, "PNG") 或 QImage.load(filename) 总是返回 NULL。

这是我的代码：

```
void MainWindow::on_actionOpen_triggered()
{
    QString fileName = QFileDialog::getOpenFileName(this,
                                                    tr("Open Image"),
                                                    QDir::homePath(),
                                                    tr("Image Files (*.png *.tga *.bmp)"));

    if (!fileName.isEmpty())
    {
        targetImage = new QImage(fileName, "PNG");
        if(targetImage->isNull())
        {
            QMessageBox::information(this,
                                     tr("PhotoChop"),
                                     tr("Cannot load %1.").arg(fileName));
            return;
        }

        onScreenImage.setBackgroundRole(QPalette::Base);
        onScreenImage.setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);
        onScreenImage.setScaledContents(true);
        onScreenImage.setPixmap(QPixmap::fromImage(*targetImage));
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:47:04.417

它与 QImage 如何加载“插件”以读取文件有关。一种选择是启用这些插件（针对不同的文件格式）然后链接它们。

虽然我只是使用 Gdiplus::Bitmap （来自 Windows）来加载文件，然后从中创建 QPixmap 可以使用的 HBITMAP。

# session - vnc 服务器“服务”如何绕过 Windows 7 中的会话 0 隔离（无桌面交互）？

> ID：10103213
> 
> 赞同：1
> 
> 时间：2012-04-11T09:25:08.480
> 
> 标签：session, windows-7, service, desktop, vnc

我想知道是否有一个被调用的 Windows API 或者开发人员只是向导？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T15:17:05.623

我知道这个问题有点老了，但我想我会回复以防万一有人仍然感兴趣。我按照与此非常相似的方法让服务在桌面上启动应用程序。[http://www.developerfusion.com/community/blog-entry/8389765/creating-a-process-in-another-user-session/](http://www.developerfusion.com/community/blog-entry/8389765/creating-a-process-in-another-user-session/)

您可能还想在启动进程之前调用 LoadUserProfile。

# javascript - 如何将乱序字符串与 Javascript 正则表达式匹配

> ID：10103214
> 
> 赞同：1
> 
> 时间：2012-04-11T09:25:09.073
> 
> 标签：javascript, regex

我用 javascript 编写了一个实时过滤器，它从字段中获取一个值并隐藏表中不匹配的行。

我使用的正则表达式非常简单：/inputValue/i

虽然这很好用，但它只匹配有序的字符。例如：

```
inputValue = test
string to match = this is a test sentence 
```

这个例子会匹配，但如果我尝试：

```
inputValue = this sentence
string to match = this is a test sentence 
```

这将不匹配，因为输入值乱序。

我将如何编写一个有序但可以跳过单词的 RegEx？

这是我目前使用的循环：

```
for (var i=0; i < liveFilterDataArray.length; i++) {

  var comparisonString = liveFilterDataArray[i],
    comparisonString = comparisonString.replace(/['";:,.\/?\\-]/g, '');

  RE = eval("/" + liveFilterValue + "/i");

  if (comparisonString.match(RE)) {
    rowsToShow.push(currentRow);
  }
  if(currentRow < liveFilterGridRows.length - 1) {
    currentRow++;
  } else {
    currentRow = 0;
  }
} 
```

非常感谢您的时间。

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:39:52.867

建议使用[RegExp](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/RegExp)而不是 eval。

[演示](http://jsfiddle.net/mplungjan/3uhcQ/)

```
var words = liveFilterValue.split(" ");
var searchArg = (words.length==1)?words:words.join(".*")+'|'+words.reverse().join(".*")
var RE = new RegExp(searchArg,"i"); 
```

它将创建`this.*sentence|sentence.*this/i`

`+'|'+words.reverse().join(".*")`如果您只想查找`this.....sentence`而不是，请删除`sentence....this`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:30:27.920

您可以将输入字符串拆分为空格，然后为每个单词按顺序运行过滤器。

# ios - iOS 上的用户身份验证 - 如何？

> ID：10103215
> 
> 赞同：2
> 
> 时间：2012-04-11T09:25:26.657
> 
> 标签：ios, authentication, passwords

我想知道是否有人可以帮助我吗？我一直在尝试找到一篇文章，它可以通过 iOS 中的用户名/密码身份验证运行我，但成功率有限。我从[http://www.raywenderlich.com/6475/basic-security-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6475/basic-security-in-ios-5-tutorial-part-1)找到了一篇好文章，我认为这会回答我的问题。不幸的是，我在按照这封信的教程进行操作后遇到了障碍，我只是看到了一个空白屏幕。虽然我已经联系了 Chris Lowe（完成本教程的小伙子），但我没有得到回复，而且我遇到了一些问题。

我想知道是否有人可以指出我可以学习如何做到这一点的正确方向以及是否有任何可以使用的代码片段等？

理想情况下，我试图让我的应用程序提示用户输入用户名/电子邮件和密码，以便我可以使用名为 parse.com 的公司的 Web 服务连接对他们进行身份验证。这对我来说都是非常新的，我正在努力，但任何帮助将不胜感激。

提前致谢，

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:17:06.440

我意识到这是一篇较旧的帖子，但您尝试实施哪种类型的身份验证？用户输入服务特定电子邮件/密码的自定义系统？脸书认证？推特授权？谷歌账户认证？MSFT 帐户身份验证？

如果您正在寻找后四个中的任何一个，您可能需要查看 WA Mobile Services 和这两个教程：

- 身份验证入门：https://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-ios/

- 使用服务器端脚本授权用户：https://www.windowsazure.com/en-us/develop/mobile/tutorials/authorize-users-in-scripts-ios/

本质上，一旦您从相关服务获得客户端 ID 和客户端密码，您就可以编写一个方法来检查用户是否已经登录。如果没有，您将显示相关的登录选项（第一个教程显示了 Facebook 身份验证演练）。

如果您正在寻找允许用户创建服务/应用程序特定帐户的自定义身份验证系统，那么您可能会发现这篇文章很有帮助：[http ://thejoyofcode.com/Exploring_custom_identity_in_Mobile_Services_Day_12_.aspx](http://thejoyofcode.com/Exploring_custom_identity_in_Mobile_Services_Day_12_.aspx)

希望这可以帮助，

米兰达

# c# - 来自文本的正则表达式特定标签？

> ID：10103220
> 
> 赞同：0
> 
> 时间：2012-04-11T09:26:01.943
> 
> 标签：c#, regex, string-matching

我有以下文字

```
<fieldset>
 <ul id="ContentPlaceHolder2_1g" class="profList column ui-sortable">
<legend class="group">المجموعه 1</legend>
<li id="ContentPlaceHolder2_8">محمود حسن ابراهيم عبد الصمد</li>
 /ul></fieldset>
  <fieldset>
 <ul id="ContentPlaceHolder2_2g" class="profList column ui-sortable">
 <legend class="group">المجموعه 2</legend>
 <li id="ContentPlaceHolder2_9">محمود فتحى ابراهيم عبد الصمد</li>
  <li id="ContentPlaceHolder2_10">احمد محسن احمد على</li>
   <li class="" style="" id="ContentPlaceHolder2_3">احمد درويش محمود عباس</li>
 </ul>
 </fieldset>

 <fieldset>
  <ul id="ContentPlaceHolder2_3g" class="profList column ui-sortable">
   <legend class="group">المجموعه 3</legend>
 <li id="ContentPlaceHolder2_11">محمد سيد محمد سيد</li>
  </ul>

 </fieldset> 
```

我想循环遍历它以获取每个 ul 标记和其中的 il 插入 ul 标记中的所有元素和数组中的每个 ul 标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:30:52.480

用 RegEx 解析 html 是个坏主意。可能您应该考虑 DOM 解析器，例如[Html Agility Pack](http://htmlagilitypack.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:47:15.453

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);
var list = doc.DocumentNode.Descendants("ul")
    .Select(n => n.Descendants("li").Select(li => new {id=li.Id,text=li.InnerText }).ToList())
    .ToList();

foreach (var ul in list)
{
    foreach(var li in ul)
    {
        Console.WriteLine(li.id + " " +  li.text);
    }
    Console.WriteLine();
} 
```

# java - ListView 项目作为布局

> ID：10103221
> 
> 赞同：1
> 
> 时间：2012-04-11T09:26:06.177
> 
> 标签：java, android, xml, android-layout, android-listview

我有一个布局，它在顶部包含一个`textview`和，然后在一个和底部之后我有。`editText``listView``4 buttons`

我希望我的列表视图项目包含一个`imageView`和`4 textViews`。

我的主布局包含第一条语句中的所有视图和一个单独的`list_item.xml`（线性布局），其中包含每个列表视图项必须包含的所有元素（图像视图和 4 个文本视图）。

如何使用 list_item.xml 布局在我的主布局中填充列表视图。

1.  我使用仅包含 TextView 标记（不是线性或相对布局）的 list_item.xml 填充了列表视图。

2.  我还使用自定义数组适配器填充了其他一些列表视图，但这里的主布局仅包含列表视图项布局，但不包含顶部文本视图和编辑视图以及底部 4 个按钮。

我认为我的问题是point1和point2的组合。谁能解释如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:45:58.253

您需要实现这样的自定义适配器...

```
 private class myAdapter extends ArrayAdapter<yourclass> {

    private ArrayList<yourclass> items;

    public myAdapter(Context context, int textViewResourceId, ArrayList<yourclass> items) {
            super(context, textViewResourceId, items);
            this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.list_item, null);
            }
            yourclass o = items.get(position);
            if (o != null) {
                    TextView tt = (TextView) v.findViewById(R.id.txt1);
                    TextView bt = (TextView) v.findViewById(R.id.txt2);
        //similarly for 2 more textviews and a imageview
                    if (tt != null) {
                          tt.setText("Name: "+o.getitemName());                            }
                    if(bt != null){
                          bt.setText("Status: "+ o.getitemStatus());
             //similarly...and getitemName ,getitemStatus are functions of your class.. to get the values..
                    }
            }
            return v;
    } 
```

}

# c# - 从快速启动中删除所有链接？

> ID：10103225
> 
> 赞同：4
> 
> 时间：2012-04-11T09:26:18.767
> 
> 标签：c#, .net, sharepoint, sharepoint-2010

我想用 C# 删除 SP2010 中快速启动中的所有链接。我认为这会做到，但不知何故他们不会被删除：

```
 SPNavigationNodeCollection n = subSite.Navigation.QuickLaunch;

        foreach (SPNavigationNode node in n)
        {
            node.Delete();
        } 
```

我可以添加链接，但不能删除它们：/有什么想法吗？谢谢

编辑：啊得到了修复:)

我不能写只是`node.Delete()`我需要写`n.Delete(node)`

Edit2：嗯，不知何故，我没有删除所有链接。如果我运行代码 2-3 次，那么它们都会被删除，很奇怪

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T13:39:26.043

试试这个代码：

```
 SPNavigationNodeCollection nodes = web.Navigation.QuickLaunch;
 for(int i = nodes.Count - 1; i >= 0; i--)
            {
                nodes[i].Delete();
            } 
```

另见此链接：[http ://www.mtelligent.com/journal/2007/10/7/customizing-the-quick-launch-menu-with-spnavigationnode-spna.html](http://www.mtelligent.com/journal/2007/10/7/customizing-the-quick-launch-menu-with-spnavigationnode-spna.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T14:00:11.090

我自己也遇到过同样的问题。

我可以通过从下往上删除快速启动时的链接。我的理论是，在快速启动时删除链接后集合会向上移动，因此当链接 [0] 被删除时，链接 [1] 变为链接 [0]。然后当试图删除链接 [1] 时，链接 [2] 实际上被删除了。

您的问题是，在某些时候 link[i] 不存在并抛出错误“无法完成此操作”，但您尚未删除所有链接。

```
//Iterate from the bottom of the links to the top

for (i = numLinks-1; i >=0 ; i--)
{
    links[i].Delete();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T18:23:38.543

您必须从最后一个到第一个处理集合，因为如果您像使用 foreach 一样从头到尾进行处理，则在从中删除项目时会更改集合，从而弄乱了迭代

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-24T14:55:43.253

这也应该有效

```
 SPNavigationNodeCollection nodes = web.Navigation.QuickLaunch;
 while (nodes.Count > 0)
 {
    nodes[0].Delete();
 } 
```

# android - android 的 jml 库

> ID：10103226
> 
> 赞同：1
> 
> 时间：2012-04-11T09:26:29.073
> 
> 标签：android, eclipse, android-ndk

我正在尝试使用 msn 开发一个 android 应用程序，但在使用 jml 库时仍然存在同样的问题，我做了很多研究。我试图从这里 [http://sourceforge.net/projects/java-jml/files/java-jml/jml-1.0b4/](http://sourceforge.net/projects/java-jml/files/java-jml/jml-1.0b4/)安装 jml 我如何使用这个库，例如我可以像 eclipse 中的任何库一样导入吗？然后修改代码？我应该解压缩这个库并将他们的文件像java文件一样导入另一个项目吗？

你能伸出你的手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:37:26.890

经过大量研究后，我找到了使用 msn API 所需的所有内容：在这里您可以找到所有详细帮助的站点：http: [//msdn.microsoft.com/en-us/library/live/hh875196.aspx](http://msdn.microsoft.com/en-us/library/live/hh875196.aspx) 我希望对于希望基于 msn 构建相同的 android 应用程序以从中受益的您

# version-control - 如何从 mercurial 的历史记录中删除大文件？

> ID：10103227
> 
> 赞同：34
> 
> 时间：2012-04-11T09:26:29.073
> 
> 标签：version-control, mercurial, dvcs

我刚刚创建了一个从其他 repos 的异构生态系统创建的 mercurial repo。在我将它发布给我的同事之前，我想尽可能地清理它。为此，我想从历史中完全删除一些大的旧文件（假装它们从未存在过），所以 repo 会更小。

这可能与水银？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-11T12:58:54.283

查看`convert`扩展程序，尤其是`--filemap`选项。

通过将以下内容添加到启用`mercurial.ini`：

```
[extensions]
convert = 
```

创建要排除的文件映射：

```
exclude path/to/file1
exclude path/to/file2 
```

然后转换回购：

```
hg convert srcrepo destrepo --filemap <map> 
```

请注意，Mercurial 2.1.1 中有一个错误导致上述命令出错：

```
initializing destination destrepo repository
abort: invalid mode ('r') or filename 
```

只需添加`--splicemap <nonexistent file>`选项来解决问题。

# android - Android 位置管理器 getbestlocation 返回 null

> ID：10103228
> 
> 赞同：0
> 
> 时间：2012-04-11T09:26:29.463
> 
> 标签：android, locationmanager, android-location

我需要一些关于`LocationManager`Android 的信息/帮助的帮助。我正在使用此代码根据用户的位置获取用户的特定信息，但在某些情况下我得到了`provider=null`（我不太确定何时，因为该异常已上传到我们的服务器并且我无法重现它）。

这是示例代码：

```
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
Criteria crta = new Criteria(); 
crta.setAccuracy(Criteria.ACCURACY_FINE); 
crta.setAltitudeRequired(false); 
crta.setBearingRequired(false); 
crta.setCostAllowed(true); 
crta.setPowerRequirement(Criteria.POWER_LOW); 
String provider = locationManager.getBestProvider(crta, true);
Log.d("","provider : "+provider);
// String provider = LocationManager.GPS_PROVIDER; 
Location location = locationManager.getLastKnownLocation(provider); 
updateWithNewLocation(location); 
locationManager.requestLocationUpdates(provider, 1000, 0, locationListener); 
```

当我的提供者为空并且有办法获取当前位置并使用它时，我该怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:59:06.773

试试这段代码，不要忘记至少应该启用您的一个提供商

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Criteria crta = new Criteria();
crta.setAccuracy(Criteria.ACCURACY_FINE);
crta.setAltitudeRequired(true);
crta.setBearingRequired(true);
crta.setCostAllowed(true);
crta.setPowerRequirement(Criteria.POWER_LOW); 
String provider = locationManager.getBestProvider(crta, true);
Log.d("","provider : "+provider);
// String provider = LocationManager.GPS_PROVIDER; 
locationManager.requestLocationUpdates(provider, 1000, 0, locationListener);
Location location = locationManager.getLastKnownLocation(provider); 
//updateWithNewLocation(location); 
```

# jsf - JSF 2.0 ViewScoped Bean 什么时候死掉？

> ID：10103229
> 
> 赞同：0
> 
> 时间：2012-04-11T09:26:33.523
> 
> 标签：jsf, jsf-2

我想在我的网站上有一个基于 Ajax 的选项卡式界面。

我还想为每个选项卡设置一个 bean。
这些 bean 预计在进入选项卡时“*出生*”，而在离开选项卡时“*死亡”。*

**重要**- 选项卡之间的切换必须是 AJAX 事件，而不是整页重绘。

我认为`@ViewScoped`这是这种行为的适当范围，但我被困在离开标签时杀死 bean 的问题上。据我所知，`@ViewScoped`bean 只会在重定向/导航事件中死亡。

有没有合适的方法让`@ViewScoped`豆子死掉？我应该使用不同的范围吗？

谢谢！

**更新**

阅读 BalusC 对[这个](https://stackoverflow.com/questions/4831888/does-view-scope-bean-survive-navigation-jsf)问题的回答是很好的指示：

> 只要您与同一个视图交互（即您在 bean 操作方法中返回 void 或 null），视图范围的 bean 就会存在。当您导航到另一个视图时，例如通过单击链接或返回不同的操作结果，则视图范围的 bean 将在渲染响应结束时被丢弃，并且在下一个请求中不可用。

因此，据此，我可以从动作方法返回不同的结果并使`@ViewScoped`bean 死亡。
但要做到这一点，我必须在动作方法（JSF 2隐式导航）的结果后禁用导航，我不知道该怎么做（或者这是否是实现我目标的正确方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:07:54.110

我将只使用一个 ViewScoped bean，将数据显示为一个简单的 POJO 属性。页面将被延迟初始化。

```
@ManagedBean
@ViewScoped
public class BackingBean {

    private WizardData wizardData;

    public WizardData getWizardData() {
        if (wizardData == null) {
            wizardData = new WizardData();
        }
        return wizardData;
    }

    public void setWizardData(WizardData wizardData) {
        this.wizardData = wizardData;
    }
}

public class WizardData {
    private WizardPage1 page1;
    private WizardPage2 page2;

    public WizardPage1 getPage1() {
        if (page1 == null) {
            page1 = new WizardPage1();
        }
        return page1;
    }

    public void setPage1(WizardPage1 page1) {
        this.page1 = page1;
    }

    public WizardPage2 getPage2() {
        if (page2 == null) {
            page2 = new WizardPage2();
        }
        return page2;
    }

    public void setPage2(WizardPage2 page2) {
        this.page2 = page2;
    }
} 
```

因此，在您使用它们时会在页面上创建 pojo，例如

```
<h:outputText value="#{backingBean.wizardData.page1.someTextToShow}"/> 
```

# php - Singleplatform & Foursquare API

> ID：10103231
> 
> 赞同：0
> 
> 时间：2012-04-11T09:26:45.983
> 
> 标签：php

我有餐厅详细信息列表以及从单一平台获得的菜单。现在我想从 Foursquare 获取评论和签到详细信息。但我注意到foursquare 上有一些样本，它使用VENUE-ID 来获取签到。是否可以使用我从单一平台获得的 ID 作为 VENUE ID？或者有什么方法可以集成两个 API 来获取餐厅名称、各个餐厅的菜单列表、评论和签到？

注意：我是新手 PHP 开发人员。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:11:03.170

为了从 Foursquare 获取评论和签到详细信息，您需要在他们的场地平台中调用他们的场地 ID。

为了将 SinglePlatform ID 映射到 Foursquare Venue ID，您需要使用他们的场地协调工具。您可以在这里了解更多信息：[https ://developer.foursquare.com/overview/mapping](https://developer.foursquare.com/overview/mapping)

希望这可以帮助。

# java - Java中的Trimmean？

> ID：10103242
> 
> 赞同：0
> 
> 时间：2012-04-11T09:27:46.993
> 
> 标签：java, matlab, maven

我需要一个像Java 中[的 Matlab 的 trimmean()](http://www.mathworks.com/help/toolbox/stats/trimmean.html)这样的函数，我不想重新发明轮子。

有人知道为此准备好实现吗？（*是的，我知道我很快就能做到，但如果有人已经为社区做出了贡献，我不会在这上面浪费时间。*）

我搜索了一些替代方案，但我只找到了部分和占位符实现（如[this](http://www.koders.com/java/fid2F8A2E9D978AC5567EC09F08E6D1D746B8462A02.aspx)或[this](http://www.koders.com/java/fidD9CCF80371013DA3A512BC3CB121AA8BDB5EC7A5.aspx)）。

任何建议都值得赞赏，最好是我可以使用的 Maven 依赖项。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-20T06:25:49.837

这也将起作用。

```
public static void trimmean(ArrayList<Double> numbers, final double percentage) 
{
    if (percentage < 0 || percentage > 1) {
        throw new IllegalArgumentException();
    }

    int size = numbers.size();
    int removeOutlierPer = (int) (size * percentage);
    int removeOutlierCount = removeOutlierPer / 2;
    removeOutlierCount = (int) Math.floor(removeOutlierCount);
    System.out.println("Remove outliers count :: " + removeOutlierCount);

    Collections.sort(numbers);
    System.out.println("Sorted list :: " + numbers);

    for (int i = 0; i < removeOutlierCount; i++) {
        numbers.remove(i);
        numbers.remove(numbers.size() - 1);
    }

    System.out.println("After outliers removal :: " + numbers);

    double sum = 0;

    for (int k = 0; k < numbers.size(); k++) {
        sum = sum + numbers.get(k);

    }

    System.out.println("Sum of outliers array :: " + sum);
    double avg = sum / numbers.size();
    DecimalFormat dec = new DecimalFormat("#0.000");
    System.out.println("After Trim Mean :: " + dec.format(avg));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:16:28.073

只是为了档案，我找到了一个可以接受的解决方案[Colt](https://dst.lbl.gov/ACSSoftware/colt/api/index.html)：

```
public static void trimmean(final double[] arr, final int percent) {
    if ( percent < 0 || 100 < percent ) {
        throw new IllegalArgumentException("Unexpected value: " + percent);
    }

    if ( 0 == arr.length ) {
        return Double.NaN;
    }

    final int n = arr.length;
    final int k = Math.round(n * ( percent / 100.0 ) / 2.0); // Check overflow
    final DoubleArrayList list = new DoubleArrayList( arr );
    list.sort();

    return Descriptive.winsorizedMean( list, Descriptive.mean( list ), k, k );
} 
```

# php - 如何向 70k 订阅者发送一次性邮件，避免垃圾邮件过滤器

> ID：10103244
> 
> 赞同：0
> 
> 时间：2012-04-11T09:27:48.030
> 
> 标签：php, email, phpmailer

一年来，我一直在我的一个网站上通过选择加入邮件列表收集电子邮件，并获得了大约 7 万封电子邮件。

我现在想向他们发送一次性邮件，所有这些人都在宣传一种新产品。我过去曾使用`PHPMailer`过发送邮件，但它们通常最终进入垃圾文件夹。我怎样才能最好地发送这些电子邮件而不 [a] 破坏我的服务器和 [b] 最终进入垃圾邮件过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:43:16.303

首先，不进入垃圾邮件过滤器并非 100% 安全。

避免列入黑名单的措施：

1.  使用像“SendBlaster”这样的程序（好的功能是退回邮件报告、导入联系人列表、每封邮件的单独主题和文本） - 邮件内容并非 100% 完全相同总是好的。
2.  不要在您发送的邮件中使用外部链接、图片或其他外部内容。
3.  为了安全起见，请发送纯文本电子邮件。
4.  设置 SPF 记录，这会给您发送的邮件一些信任（http://en.wikipedia.org/wiki/Sender_Policy_Framework）
5.  混合 70k 邮件，以便发送到同一域的邮件之间的时间尽可能长

所有 5 分均来自我自己对 2 到 5k 的批量列表的经验

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:31:51.287

使用第三方服务将是您最安全/最简单的选择。

您的服务器可能已经被列入垃圾邮件黑名单，至少您必须编写某种形式的循环 cronjob 来发送电子邮件并设置所有正确的标题 - 有很多问题可以通过专用服务克服小成本。

# java - 如何将网页嵌入到小程序中

> ID：10103248
> 
> 赞同：0
> 
> 时间：2012-04-11T09:27:59.327
> 
> 标签：java, html, applet

只是理论问题的一半。是否可以将网页从 URL 嵌入到 Java 小程序中？

Applet`applet1`已开启`page1.html`，我`server1`想嵌入`applet1`到`page1.html`. `server1`并且 in`applet1`将嵌入`page2.html`。`server2`如果有可能怎么办？例如，我需要使用小程序进行嵌入`page2.html`，而不是`iframe`因为鼠标跟踪`page2.html`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:44:38.270

您可以将 html 从站点添加到小程序面板，但它不是 iframe 的模拟。该解决方案在显示带有 css 的 html 和其他问题方面存在问题。

也许这会有所帮助：[link1](https://stackoverflow.com/questions/6360744/how-to-render-basic-html-markup-inside-a-jpanel-in-java-swing) [link2](https://stackoverflow.com/questions/1790500/render-html-in-swing-application)

# java - spring 如何在 bean 的属性值中包含 < 或 > 字符？

> ID：10103251
> 
> 赞同：1
> 
> 时间：2012-04-11T09:28:02.513
> 
> 标签：java, spring, escaping, character

我有豆类：

```
<bean id="test">

...........
<property name="myQuery" value="select a,b,c from table1 where rownum < 10;" /> 
```

不接受字符`<`。`rownum < 10`我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T09:29:57.227

使用[XML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)：`&lt;`for`<`和`&gt;`for`>`

# java - 页面。使用 Java

> ID：10103254
> 
> 赞同：0
> 
> 时间：2012-04-11T09:28:18.923
> 
> 标签：java, xpages

如果我的问题听起来不是很具体，我想道歉，但我确实相信（我已经从答案中看到了）这里有人能够帮助我解决我相当普遍的问题.
此外，我有一种感觉，这不仅是我的问题，而且对于许多 Domino 开发人员来说，获得以下问题的答案将大有裨益。

话虽如此，问题/问题是-> 我想在 XPages 中使用 Java。我不是 Java 专家，但我知道基础知识，并且对 OOP 和 OOD 有很好的理解。

因此，一般性问题是 -> 作为 Java 开发人员，我应该如何以及从哪里开始在 Domino XPages 世界中发展新技能？

更具体的一个 - >我是对的，认为起点可以开始以 JavaBeans 的形式使用 Java 来描述 MVC 架构中的 M（模型）层？

我将非常感谢一些简单的 Java 代码和如何使用它们的简短说明。也将接受一些好的链接作为帮助:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T10:36:19.243

我在[http://xpages.tv](http://xpages.tv)上有一系列关于开始在 xpages 中使用 java 的视频，其中讨论了为 java 开发人员设置 NSF 以及如何编写和实现托管 bean 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T04:31:55.763

David 的[http://XPages.tv](http://XPages.tv)是开始的地方。然后，您想前往[http://xpages.info](http://xpages.info)并查看我的[摘要页面](http://www.wissel.net/blog/d6plinks/Learning-XPages)以了解更多信息（这不是教程，而是将您带到所有正确的地方）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:40:38.187

我发现 ：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Master_Table_of_Contents_for_XPages_Extensibility_APIs_Developer_Guide](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Master_Table_of_Contents_for_XPages_Extensibility_APIs_Developer_Guide)

对于学习在java中创建控件的基础知识非常有用

# hadoop - Hadoop map 任务初始化耗时过长

> ID：10103255
> 
> 赞同：3
> 
> 时间：2012-04-11T09:28:24.870
> 
> 标签：hadoop

好吧，最近，在我正在运行的任何 Hadoop 流程中，我遇到某个地图节点（主节点作为从节点工作）的 3 分钟 10 秒延迟。在初始化延迟之后，它恢复正常并立即执行。

例如，在运行 QuasiMonteCarlo 示例时：

```
Task Id                                 Start Time  Finish Time <br>
attempt_201204101957_0006_m_000003_0    10/04 20:14:54  10/04 20:18:05 (3mins, 10sec)   /default-rack/master

2012-04-10 20:18:04,470 INFO org.apache.hadoop.util.NativeCodeLoader: Loaded the native-hadoop library<br>2012-04-10 20:18:04,646 INFO org.apache.hadoop.metrics.jvm.JvmMetrics: Initializing JVM Metrics with processName=MAP, sessionId=<br>
2012-04-10 20:18:04,647 WARN org.apache.hadoop.conf.Configuration: user.name is deprecated. Instead, use mapreduce.job.user.name<br>
2012-04-10 20:18:04,751 INFO org.apache.hadoop.mapreduce.util.ProcessTree: setsid exited with exit code 0<br>
2012-04-10 20:18:04,754 INFO org.apache.hadoop.mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.mapreduce.util.LinuxResourceCalculatorPlugin@79ee2c2c<br>
2012-04-10 20:18:04,912 INFO org.apache.hadoop.mapred.MapTask: (EQUATOR) 0 kvi 26214396(104857584)<br>
2012-04-10 20:18:04,912 INFO org.apache.hadoop.mapred.MapTask: mapreduce.task.io.sort.mb: 100<br>
2012-04-10 20:18:04,912 INFO org.apache.hadoop.mapred.MapTask: soft limit at 83886080<br>
2012-04-10 20:18:04,912 INFO org.apache.hadoop.mapred.MapTask: bufstart = 0; bufvoid = 104857600<br>
2012-04-10 20:18<br>:04,912 INFO org.apache.hadoop.mapred.MapTask: kvstart = 26214396; length = 6553600
2012-04-10 20:18:04,939 INFO org.apache.hadoop.mapred.MapTask: Starting flush of map output<br>
2012-04-10 20:18:04,940 INFO org.apache.hadoop.mapred.MapTask: Spilling map output<br>
2012-04-10 20:18:04,940 INFO org.apache.hadoop.mapred.MapTask: bufstart = 0; bufend = 18; bufvoid = 104857600<br>
2012-04-10 20:18:04,940 INFO org.apache.hadoop.mapred.MapTask: kvstart = 26214396(104857584); kvend = 26214392(104857568); length = 5/6553600<br>
2012-04-10 20:18:04,972 INFO org.apache.hadoop.mapred.MapTask: Finished spill 0<br>
2012-04-10 20:18:04,975 INFO org.apache.hadoop.mapred.Task: Task:attempt_201204101957_0006_m_000003_0 is done. And is in the process of commiting<br>
2012-04-10 20:18:05,058 INFO org.apache.hadoop.mapred.Task: Task 'attempt_201204101957_0006_m_000003_0' done.<br> 
```

任务跟踪器日志更能说明问题：

```
2012-04-10 **20:14:54,615** INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 1 and trying to launch attempt_201204101957_0006_m_000003_0 which needs 1 slots<br>
2012-04-10 20:14:54,685 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201204101957_0006_m_377512887 spawned.<br>
2012-04-10 20:16:34,041 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 1<br>
2012-04-10 **20:18:04,433** INFO org.apache.hadoop.mapred.TaskTracker: JVM with ID: jvm_201204101957_0006_m_377512887 given task: attempt_201204101957_0006_m_000003_0<br>
2012-04-10 20:18:04,938 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201204101957_0006_m_000003_0 0.0% <br>
2012-04-10 20:18:05,056 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201204101957_0006_m_000003_0 0.667% Generated 1000 samples. <br> 
```

> 排序
> 2012-04-10 20:18:05,058 INFO org.apache.hadoop.mapred.TaskTracker：任务尝试_201204101957_0006_m_000003_0 已完成。
> 2012-04-10 20:18:05,058 INFO org.apache.hadoop.mapred.TaskTracker：报告的尝试_201204101957_0006_m_000003_0 的输出大小为 28
> 2012-04-10 20:18:05,058 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot ：当前可用插槽：2
> 2012-04-10 20:18:05,213 INFO org.apache.hadoop.mapreduce.util.ProcessTree：向进程组的所有成员发送信号 -23030：SIGTERM。退出代码 1
> 2012-04-10 20:18:08,478 INFO org.apache.hadoop.mapred.TaskTracker：发送 28 个字节以从地图中减少 0：给定 28/24 的尝试_201204101957_0006_m_000003_0
> 2012-04-10 20:18:08,478 INFO org.apache.hadoop.mapred.TaskTracker：洗牌 1maps (mapIds=attempt_201204101957_0006_m_000003_0) 在 29 秒内减少 0
> 2012-04-10 20:18:08,478 INFO org.apache.hadoop. mapred.TaskTracker.clienttrace: src: 147.102.7.173:50060, dest: 147.102.7.175:57289, maps: 1, op: MAPRED_SHUFFLE, reduceID: 0, duration: 29
> 2012-04-10 20:18:10,217 INFO org. apache.hadoop.mapred.JvmManager：JVM：jvm_201204101957_0006_m_377512887 退出，退出代码为 0。它运行的任务数：1

我怀疑这里有网络问题，但我可以毫无问题地 ping 和 ssh。

# php - PHP函数乍一看可以返回不同的&多值，但它不能

> ID：10103263
> 
> 赞同：0
> 
> 时间：2012-04-11T09:28:53.270
> 
> 标签：php

```
<?php

function some_func(){

 return 'some_str_type' && 'another_str_type';
}

function another_func(){

 return '123' || '456';
}

print some_func(); //1 - the same as true

print another_func(); //again prints 1, as true 
```

任何语言的简洁编码风格都要求将非小函数放入小函数中——因为一个函数应该返回单个值。

**但是**，我在一些流行的 php-template langs (smarty, dwoo) 的源代码中看到了这种方法。那是什么？什么时候用这种方式编码？（意味着任何现实世界的情况）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:30:50.613

PHP 将返回 1 个值。您在上面所做的是键入一个表达式，该表达式被评估，并返回结果布尔值。

```
return 'some_str_type' && 'another_str_type'; 
```

变成

```
return true && true; 
```

变成

```
return true; 
```

什么时候在现实生活中使用：

```
function some_func(){
   $success1 = doStuff1();
   $success2 = dostuff2();
   return $success1 && $success2;
} 
```

如果两个被调用的函数都返回 true，它将返回 true。

# php - Symfony2：在每个新控制器中重复代码的解决方案

> ID：10103267
> 
> 赞同：2
> 
> 时间：2012-04-11T09:29:01.223
> 
> 标签：php, symfony, controller

我有一段代码在每个控制器中重复，`DefaultController.php`这让我很恼火。我可以把它放在某个地方而不是在我添加的每个新控制器中复制粘贴它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:38:32.943

如果代码应该在每个控制器操作的开头运行，我建议为 [KernelEvent](http://symfony.com/doc/current/book/internals.html#events) `kernel.controller`事件编写一个处理程序，该事件在代码分派到控制器之前触发。

如果代码应该在动作代码中的某处运行，您可以[创建自己的事件](http://symfony.com/doc/current/components/event_dispatcher.html)并为其创建处理程序。您可以将控制器和所有需要的数据附加到您的自定义事件对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:17:53.443

我有完全一样的东西。

为了管理控制器的每个操作的权限，我正在调用服务

```
$this->permissions =$this->get('vendor.permissions')->checkPermission('BundleName','Profil','select',$this); 
```

# performance - MongoDB：频繁的子文档更新或数据库重新设计？

> ID：10103269
> 
> 赞同：1
> 
> 时间：2012-04-11T09:29:04.613
> 
> 标签：performance, mongodb, indexing

我正在寻找有关如何在以下情况下提高数据库性能的提示。（或者也许我应该考虑重新设计数据库）。

我有 50 多个不同视频插槽的视频插槽社交应用程序。问题是每次用户旋转时，我都必须将插槽信息保存到 DB。

目前我有以下数据库结构： 1 个包含用户配置文件的集合和插槽数组中的许多插槽子文档。

```
{
  _id: 1,
  firstName: John,
  lastName: Smoth,
  money: 1000,
  aLotOfOtherUserInfo: true,

  slots:
  [
    {
      slotId: 1,
      bet: 1,
      lines: 25,
      payout: 100,
      reels: [...]
      winnings: [...]
      freeSpins: [...]
    }
  ]
} 
```

在任何插槽中的每个用户旋转时，我都必须完全更新插槽数组中的插槽信息。插槽由**slotId**找到。

```
update(
  { 
    "_id": 1, 
    "slots.slotId": 1
  },
  { 
    $set: {"slots.$": 
    {
      "slotId":1,
      aLotOfUpdatedSlotInfo: true
    }}
  }
) 
```

*   我是否需要在“slots.slotId”上创建索引以改进所需的插槽搜索？
*   或者也许我应该考虑重新设计数据库并将每个用户插槽存储在单独的集合中？但是，例如，在用户登录时，我将不得不循环浏览所有集合并加载当前用户的所有插槽信息。所以这不是我认为在每个用户登录时进行 50 多个查询的好选择。

非常感谢您的帮助。我是 NoSQL 的新手，有时很难以 NoSQL 的方式思考。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:17:17.573

如果您的插槽数据在每次“用户旋转”时总是无效并且您每次都必须完全设置它，那么它可能在用户文档中工作得很好。为您节省了必须从用户文档中查找“插槽”ID 引用，然后更新“插槽”文档的查询。

是的，您绝对应该不仅在 . 上有一个索引`slots.slotId`，而且在那个和 _id 上都有一个复合索引来匹配您的实际查询：

```
db.user_profile.ensureIndex({_id:1, "slots.slotId":1}) 
```

这应该使查找您的文档变得非常容易，并且再次很容易设置整个插槽数组值。

# ios - 如何在 NSString 中使用千位分隔符

> ID：10103270
> 
> 赞同：14
> 
> 时间：2012-04-11T09:29:07.433
> 
> 标签：ios, nsstring

NSString 就像 "1000.00" 和 "1008977.72",

如何将它们格式化为“1,000.00”和“1,008,977.00”

这是我的问题，请帮助我，提前谢谢你。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-11T09:38:31.260

我做的时间不长。这是代码：

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setGroupingSeparator:@","];
[numberFormatter setGroupingSize:3];
[numberFormatter setUsesGroupingSeparator:YES];
[numberFormatter setDecimalSeparator:@"."];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setMaximumFractionDigits:2];
NSString *theString = [numberFormatter stringFromNumber:[NSNumber numberWithDouble:1008977.72]]; 
```

希望能帮助到你

* * *

**编辑**

正如*[Olie](https://stackoverflow.com/users/34820/olie)*要求的那样，我将发布一个代码，该代码将使用当前的语言环境设置来设置分组/小数分隔符本身。

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setLocale:[NSLocale currentLocale]];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setMaximumFractionDigits:2];
NSString *theString = [numberFormatter stringFromNumber:[NSNumber numberWithDouble:1008977.72]];
NSLog(@"The string: %@", theString); 
```

使用`[NSLocale localeWithLocaleIdentifier:]`而不是`[NSLocale currentLocale]`给了我以下结果：

```
[NSLocale localeWithLocaleIdentifier:@"be_NL"]
The string: 1 008 977,72
[NSLocale localeWithLocaleIdentifier:@"en_GB"]
The string: 1,008,977.72
[NSLocale localeWithLocaleIdentifier:@"DE"]
The string: 1.008.977,72
[NSLocale localeWithLocaleIdentifier:@"en_US"]
The string: 1,008,977.72 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-01T13:04:15.660

刚刚用 Swift 翻译：

```
 let formatter = NumberFormatter()
    formatter.groupingSeparator = ","
    formatter.groupingSize = 3
    formatter.usesGroupingSeparator = true
    formatter.decimalSeparator = "."
    formatter.numberStyle = .decimal
    formatter.maximumFractionDigits = 2
    formatter.minimumFractionDigits = 2
    formatter.minimumIntegerDigits = 1
    let result = formatter.string(from: NSNumber(value: value)) ?? "0.00" 
```

# php - 由于 Windows 7 对权限更改的限制，无法在本地主机上使用 php 上传文件夹中的文件

> ID：10103271
> 
> 赞同：1
> 
> 时间：2012-04-11T09:29:11.090
> 
> 标签：php, windows-7, file-upload, permissions, localhost

我正在使用 PHP 进行文件上传，文件无法上传，因为文件夹设置为只读。我已经安装了**XAMPP**，并且在我的*htdocs*文件夹中有一个文件夹，我想制作我的上传文件夹。

找了好久，终于到了微软支持论坛，说不能更改文件夹权限。

看看这个@微软[http://support.microsoft.com/kb/326549](http://support.microsoft.com/kb/326549)

如果有人有任何解决方案...

`chmod("upload/", 0777);`我在文件上传过程之前尝试了上传文件夹，但它仍然无法正常工作......

我也在添加我的脚本，以便你们可以为我找到通行证。

```
$exten = explode( "." , $_FILES['complaint_file']['name']);
    $exten = $exten[1];
    if ( ($exten == "jpg") || ($exten == "JPG") || ($exten == "jpeg") || ($exten == "JPEG") || ($exten == "png") || ($exten == "PNG") || ($exten == "gif") || ($exten == "GIF") )
    {
        chmod("upload/", 0777);
        if(@move_uploaded_file($_FILES['complaint_file']['temp_name'], "upload/".time().".".$exten))
        {
            $filename = time().".".$exten;
            $insertSQL = sprintf("UPDATE complaints SET complaint_status='CLOSED', complaint_solved_date=NOW(), complaint_remark=%s complaint_filename=%s WHERE complaint_number=%s",
                   GetSQLValueString($_POST['complaint_remark'], "text"),
                   GetSQLValueString($_POST['confirm_close_complaint'], "text"),
                   GetSQLValueString($filename, "text"));
            $Result1 = mysql_query($insertSQL, $dacreint) or die(mysql_error());  
            header('Location: complaint-register.php?ComplaintClose=Successful');
            exit();
        }
        else {
            header('Location: complaint-register.php?FileUploadError=1');
            exit();
        }
    }
    else {
        header('Location: complaint-register.php?ExtensionError=1');
        exit();
    } 
```

当我进行文件上传时，它会跳过 if 条件并从顶部运行以下代码：-

```
else {
        header('Location: complaint-register.php?FileUploadError=1');
        exit();
    } 
```

# 3d - 谷歌地球没有显示正确的多边形方向

> ID：10103273
> 
> 赞同：2
> 
> 时间：2012-04-11T09:29:20.207
> 
> 标签：3d, kml, google-earth, kmz

我创建了一个示例 kml，其中有两个方向相同的多边形。但是在谷歌地球中，一个比另一个更暗，它显示了错误的方向。

这是一个示例 kml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
<name>KmlFile</name>
<Placemark>
<name>Shell Polygons</name>
<MultiGeometry>
<Polygon>
<altitudeMode>relativeToGround</altitudeMode>
<outerBoundaryIs>
<LinearRing>
<coordinates>
-1.46794286722133,53.38399869052405,0.9 -1.46794286722724,53.38399869050928,6.720900000000001 -1.46802203110511,53.38399869049681,3 -1.46794286722133,53.38399869052405,0.9
</coordinates>
</LinearRing>
</outerBoundaryIs>
</Polygon>
<Polygon>
<altitudeMode>relativeToGround</altitudeMode>
<outerBoundaryIs>
<LinearRing>
<coordinates>
-1.46802203110511,53.38399869049681,3 -1.46794286722724,53.38399869050928,6.720900000000001 -1.46802203106645,53.38399869048823,6.392399999999999 -1.46802203110511,53.38399869049681,3
</coordinates>
</LinearRing>
</outerBoundaryIs>
</Polygon>
</MultiGeometry>
</Placemark>
</Document>
</kml> 
```

根据坐标，我们可以得到它们的法线（通过叉积）， 1.27245E-10,-0.000460805,-1.17167E-15 和 7.40792E-11,-0.000268555,-6.81175E-16 ，然后点积它们，得到 1.23752E-07 > 0。但是 kml 被渲染为一个比另一个更暗。

我的 kml 文件有问题吗？或者这真的是谷歌地球的问题吗？

任何回复将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:06:51.847

尝试更改绕组，使坐标位于其他方向。

# java - Java中的四舍五入

> ID：10103276
> 
> 赞同：-4
> 
> 时间：2012-04-11T09:29:28.707
> 
> 标签：java, apache-commons

我想你在购物中心看到过，他们会在你的总购买金额中扣除或增加一些金额，例如，

*   如果您的总购买量为 30.01，则四舍五入为 30.00
*   如果您的总购买量为 30.03，则四舍五入为 30.05。
*   如果您的总购买量为 30.07，则四舍五入为 30.05。
*   如果您的总购买量为 30.08，则四舍五入为 30.10。

我知道 Java 中的舍入、地板和 ceil 函数。但是我怎样才能实现上述目标呢？是否有任何默认功能或实用程序可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:58:53.643

首先，当您在零售环境（如商场）中操纵价格时，您应该使用整数或长整数，而不是浮点数或双精度数，因为该数字始终为 2 位小数，而在零售中处理总计的最佳方法是使用整数值。

例如：

```
30.01f ---> 3001
30.03f ---> 3003 
```

等等......这样做我们已经简化了很多处理价格值的方式。之后，您可以轻松创建自己的**价格舍入算法**。

这是一个示例圆形价格函数，应该完全符合您的要求：

```
public static int roundPrice(int price) {
        String strPrice = String.valueOf(price);
        int len = strPrice.length();
        int lastDigit = Integer.valueOf( strPrice.substring(len -1) );
        int toAdd = -lastDigit;

        if(lastDigit > 7)
            toAdd = 10 - lastDigit;
        else if(lastDigit > 2)
            toAdd = 5 - lastDigit;

        return price + toAdd;
    } 
```

这是一个如何使用它的示例：

```
public static void main(String[] ars) {

        int[] nums = { 3001, 3003, 3007, 3008 };

        for(int n : nums) {
            System.out.println(roundPrice(n));
        }
    } 
```

我不知道为什么有些用户评论了你的问题，因为这是一个微不足道的问题，好像在这个论坛上还有其他几个回答可以解释你想要什么......我什至无法弄清楚你为什么得到 -5这个问题... StackOverflow之谜！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:36:13.223

看看[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)。[这里](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:37:33.873

我认为这就是您要查找的内容：[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/index.html?java/text/DecimalFormat.html)查找`RoundingMode`

# asp.net - 组合框选择索引已更改将其放入母版页的会话中

> ID：10103279
> 
> 赞同：0
> 
> 时间：2012-04-11T09:29:46.237
> 
> 标签：asp.net

你能解释一下我能用母版页的组合框做什么吗？我在组合框中设置数据库名称，我通过子页面调用代码如下尝试

```
 sqlConn = New SqlConnection(strConn)
        sqlConn.Open()
        Dim sqlda1 As SqlClient.SqlDataAdapter
        Dim sqlds1 As New DataSet

        sqlQry = "EXEC sp_databases"
        sqlda1 = New SqlDataAdapter(sqlQry, sqlConn)
        sqlda1.Fill(sqlds1, "DataBaseList")
        sqlConn.Close()
        Session.Add("dscb", " ")
        Session.Add("dscb", sqlds1.Tables("DataBaseList"))

        Dim IntPCount As Integer

        IntPCount = sqlds1.Tables("DataBaseList").Rows.Count
        'IntPCount = Session("dscb")
        Dim PCol As String
        ' cbDataBaseList.Items.Clear()
        cbDataBaseList.Items.Clear()
        cbDataBaseList.Text = "Select"

        For p = 0 To IntPCount - 1
            PCol = sqlds1.Tables("DataBaseList").Rows(p).Item("DATABASE_NAME").ToString
            If PCol.Length > 5 Then
                If PCol <> "master" Or PCol <> "msdb" Or PCol <> "tempdb" Then
                    Dim strDataBaseName As String = PCol
                    strDataBaseName = strDataBaseName.Remove(4)
                    '*** Add only "Customer's" which got the prefix "CLT_ " ***
                    If strDataBaseName = "CLT_" Then
                        NewPCol = PCol.Replace("CLT_", "")
                        NewPCol.Trim()
                        'cbDataBaseList.Items.Add(NewPCol)
                        cbDataBaseList.Items.Add(NewPCol)
                    End If
                End If
            End If
        Next
                Session.Add("CMBID", "")

        'cbDataBaseList.Text = NewPCol.ToString

        sqlds1.Dispose()
    Catch ex As Exception
        strex = ex.Message
        'MessageBox.Show(strex, "General form exception message 5.", MessageBoxButtons.OK, MessageBoxIcon.Error)
            End Try
        End If 
```

选择索引更改事件

会话（“CMBID”）= cbDataBaseList.Text

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:17:47.550

上面提到的代码是母版页的Page_Load()函数吗？如果是，那么您必须先检查

```
// Check if it has already been set.
if(Session("CMBID") != null) 
{
// Now if it is set, get the value
 String cmbid = (String) Session("CMBID");
//Get the post back value of the combo box  also
String cmbval = Request["<your control name>"];
// Make the above code of setting the combo box value as a separate function
FillComboBoxFromDB();
etif(!cmbval.Equals(cmbid))
{
   // set the session value with the new selected value
   Session("CMBID") = cmbval
 }

} 
```

现在在会话中执行相同的检查并在子页面中回发值。我猜这是在母版页中执行代码的微小时间差中，子页面在设置会话变量之前尝试访问它。因此，只需检查会话并发回以确保双重确定。

# python - 在 python 中使用 lxml 的 iterparse 有条件地针对多个 DTD 进行验证

> ID：10103281
> 
> 赞同：3
> 
> 时间：2012-04-11T09:29:47.887
> 
> 标签：python, lxml, dtd, iterparse

我正在根据 docinfo 有条件地针对多个 DTD 解析和验证相当大的 XML（>100MB）：

```
parser = etree.XMLParser(recover=True)
xmlfile = etree.parse(file,parser)
if "aaa.dtd" in xmlfile.docinfo.doctype.lower():
    dtdfile= "dtds/aaa.dtd"
elif "bbb.dtd" in xmlfile.docinfo.doctype.lower():
    dtdfile= "dtds/bbb.dtd"
elif "ccc.dtd" in xmlfile.docinfo.doctype.lower():
    dtdfile= "dtds/ccc.dtd"
dtd = etree.DTD(dtdfile)
if dtd.validate(xmlfile)==True:
    do sth 
```

我的问题是内存消耗，所以我想我应该改用 iterparse 但我找不到一种方法来做同样的验证。

提前致谢。

# iphone - iPhone模拟器5.1如何获取数据存储路径？

> ID：10103287
> 
> 赞同：0
> 
> 时间：2012-04-11T09:30:01.287
> 
> 标签：iphone, xcode, macos, osx-lion

我从其他答案中读到它可以在这条路径中找到`~/Library/Application Support/iPhone Simulator/User/Media/DCIM/100APPLE`但是当我签入我的mac时，里面`iPhone Simulator`没有`Application Support`..

我正在使用 mac lion，xcode 4.3 和 iphone sim 5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:43:19.627

有一些问题。实际上，您的文件夹可能是隐藏的，因此您需要先使其可见。

如果您打开`Terminal`（应用程序 > 实用程序）并输入以下内容：

```
defaults write com.apple.finder AppleShowAllFiles TRUE 
```

然后转到文件夹和用户/您的用户名/库/应用程序支持“

像这样 ： `/Users/nirav/Library/Application Support`

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:23:19.873

您可以找到@Anshul Jain 告诉的数据，或者在将文件保存在应用程序中的同时在 iPhone 应用程序中执行 NSLog 路径，然后您可以获得完整路径，然后复制该路径并粘贴到 gotofolder 选项中希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:50:23.633

你可以在这里找到它......

```
 /Users/"your main directory"/Library/Application Support/iPhone Simulator 
```

# javascript - javascript替换法语字符

> ID：10103289
> 
> 赞同：0
> 
> 时间：2012-04-11T09:30:05.627
> 
> 标签：javascript, regex

这是我在表单中使用的将法语转换为英语的java脚本方法

```
 function checkgsm(s){

        var str = s.charAt(s.length-1);
        s=s.replace(/\300/gi, "A");
        s=s.replace(/\301/gi, "A");
        s=s.replace(/\302/gi, "A");
        s=s.replace(/\303/gi, "A");
        s=s.replace(/\304/gi, "A");     
        s=s.replace(/\352/gi, "a");
        s=s.replace(/\347/gi, "C");
        s=s.replace(/\307/gi, "c");

        return s;

     } 
```

如果我输入Ç（大写），它将更改为C（大写）。然后我输入ç，结果将是cc（小）..旧的大写C也被小c替换。替换方法不关心它是大写还是小写。如果大写（Ç）来了，它将更改为C。如果小写（ç）来了，它将是c。还有其他方法可以进行精确替换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:37:29.193

尝试不使用`i`正则表达式的模式。

`s=s.replace(/\307/g, "c");`

# python - 在 Python 中处理异常堆栈跟踪的正确方法

> ID：10103296
> 
> 赞同：6
> 
> 时间：2012-04-11T09:30:21.400
> 
> 标签：python, exception, error-handling, stack-trace, printstacktrace

我正在编写一些可以在堆栈深处生成异常的代码，并且我有一个更靠近顶部的层，它捕获这些异常并将它们发送给错误处理模块进行处理。我想要的是错误处理模块能够将堆栈跟踪打印到其错误日志中，但我发现很难弄清楚这样做的方法是什么。

关于背景的一些说明：

*   代码是多线程的，所以我不确定 sys.last_traceback 的行为

*   我尝试在异常本身的构造函数中捕获堆栈。sys.last_traceback 在这种情况下有时是 None （因为它只存在于未处理的异常的情况下），并不总是正确的。我目前正在玩弄使用

    self.stack = traceback.format_stack()[:-2]

在异常的构造函数中，虽然这在信息方面看起来很有希望，但感觉不是“正确”的方法

*   我能够找到的所有如何执行此操作的示例都显示了如何在 except 块中打印堆栈跟踪，而不是在以后的一些错误处理模块中，这似乎与我想要的行为不同。（例如，请参阅[从 Python 代码中的方法打印当前调用堆栈](https://stackoverflow.com/questions/1156023/print-current-call-stack-in-python)）

*   我已经在 python 文档（[http://docs.python.org/library/traceback.html](http://docs.python.org/library/traceback.html)）中挖掘了追溯模块，并且无法弄清楚这是否符合我的要求。它似乎主要关注格式化回溯，因为您可能从 sys.last_traceback 检索。它有一些使用示例，但没有一个与我正在尝试做的事情一致。

我不相信我是第一个想要这样做的人，所以我一定错过了一些东西。任何指向正确方向的指针都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:46:11.930

您处理异常的第一行可能是：

```
exc_type, exc_value, exc_traceback = sys.exc_info() 
```

您可以存储这些变量或以任何您喜欢的方式传递它们，然后使用 traceback 模块显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:38:06.147

如果我理解正确，您想在保留堆栈跟踪的同时重新引发异常吗？所以你有一个这样的调用层次结构：

```
error_handling_module # you want to print the stacktrace here
|
something_else
|
module_excepting_and_rethrowing
|
something_else
|
module_raising_an_error 
```

在你 module_excepting_and_rethrowing 你可以这样做：

```
except Exception:
   exc_type, exc_value, exc_traceback = sys.exc_info()
   raise NewException, exc_value, exc_traceback 
```

在 Python3 中，您还可以执行以下操作：

```
 except Exception as e:
     raise NewException from e 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:23:59.963

在要保护的函数中添加一些装饰器怎么样？例如：

```
@onerrorignore
def foo(a, b, c):
    ... 
```

装饰器看起来像：

```
def onerrorignore(f):
    def _f(*args, **kwargs):
        try:
            ret = f()
        except:
            error_handler.handle(sys.exc_info())
        else:
            return ret
    return _f 
```

# javascript - 在 javascript 或 jquery 中检测鼠标的当前状态，即无论是向下还是向上

> ID：10103298
> 
> 赞同：8
> 
> 时间：2012-04-11T09:30:26.473
> 
> 标签：javascript, jquery, drag-and-drop

我正在构建一个 Web 应用程序，该应用程序涉及从网页内和其他应用程序（例如 word 和 pdf 文档）中拖放大量文本。如果鼠标向下（单击）或向上（释放），我需要获取鼠标的当前状态。目前，如果我在网页中拖动文本，我可以获取鼠标的当前状态，但如果鼠标来自另一个应用程序说单词并拖动一些文本，则无法获取鼠标状态。任何获得鼠标向下或向上状态的指针都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T23:18:02.930

据我了解，问题是如果在窗口外按下鼠标左键（用于拖动操作），您需要确定是否按下鼠标左键。

有很多问题：

*   在拖动操作期间没有触发 mousemove 事件
*   当前按钮状态的数据因浏览器而异

我想出了这个解决方案：

```
/**
 * keeps track of the current active mouse button.
 * @param notifier {Function} called when the active button is updated.
 * @param oneCallPerStateChange {Boolean} (defaults to false) if true the notifier will be called only when the active button changes.
 */
function initActiveButtonWatcher(notifier, oneCallPerStateChange) {

    // create variable to store button states.
    var _activeButton = -1, activeButton = 0

    // function to set the current active button.
    function updateMouseState(e) {

        // update active button.
        activeButton = typeof e.buttons === "number" ? e.buttons : e.which

        // notify if the active button is different.
        if ( oneCallPerStateChange? (_activeButton !== activeButton && typeof notifier === "function") : (typeof notifier === "function")) {
            notifier(activeButton)
        }

        // store the last state in order to be able to tell if the state has changed.
        _activeButton = activeButton
    }

    // function to get the current active button.
    function getButtonState() { return activeButton }

    // update the button state when the mouse is moved
    // or an item is dragged into the window.
    window.addEventListener("mousemove", updateMouseState, false)
    window.addEventListener("dragover", function() { updateMouseState({which: 1}) }, false)
    window.addEventListener("dragleave", function() { updateMouseState({which: 0}) }, false)

    // expose the getter on the global object.
    window.getButtonState = getButtonState
} 
```

上述解决方案绑定到 mousemove 事件和 dragover 事件。Chrome 在 dragover 事件中获得了具有正确按钮值的有效事件对象，但是我发现 FireFox 没有。我想鼠标左键的状态在拖动操作时很明显，它会被*按下*，对吧？不点击和移动就无法拖动。所以我只是在拖动时将状态设置为 1（左下）。同样，在拖动离开时，该值设置为零。

您将执行所有正常的 dragover、dragstart、end、drop 等处理以防止默认浏览器操作，并且 window.getButtonState() 返回的值应该始终是当前活动鼠标按钮的值。

下面是一些示例用法，将页面中第一个 h1 标记的值设置为当前按下的按钮：

```
;(function() {

    var active = document.getElementsByTagName("h1")[0]

    function translate(n) {
        switch (n) {

            case 0:
                return "none"
                break;
            case 1:
                return "left"
                break;
            case 2: case 4: // Firefox calls it 4, the values differ between browsers I find.
                return "middle"
                break;
            case 3:
                return "right"
        }
    }

    initActiveButtonWatcher(
        function(currentActive) {
            active.innerHTML = "Active button: " + translate(currentActive)
        }
    )

})() 
```

您必须对跨浏览器进行一些调整以处理不同的值（FF 报告中间按钮为 4 等），但您应该能够使用此方法相当好地获得当前按钮。

试试看：http: [//jsfiddle.net/6BUA4/](http://jsfiddle.net/6BUA4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-21T21:40:51.793

当您在外部程序（如 Word）中选择文本并将其拖到网页上时，页面上的元素将生成`dragenter`鼠标事件。我在 Chrome 中对此进行了测试，它对我有用。例如，我可以将`dragenter`侦听器绑定到 document.body 并接收事件，即使没有触发正常的鼠标事件：

```
function logEvent(e) {
    console.log(e);
}

document.body.addEventListener('dragenter', logEvent);

// MouseEvent {dataTransfer: Clipboard, toElement: body, ..., button: 0, ...} 
```

也许您可以利用它来发挥自己的优势，因为该`dragenter`事件意味着鼠标正在拖动并且必须按下按钮。另外，您可以通过从事件中获取数据来获取被拖动的文本：

```
e.dataTransfer.getData('text/plain'); 
```

您需要在`getData`调用中使用正确的数据类型。我在 Word 中输入了一些文本，并且能够使用`text/plain`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:43:35.627

有一个带有状态的变量：[Demo](http://jsbin.com/ubawek/) - [Code](http://jsbin.com/ubawek/edit)

```
var _isMouseDown = false;

$(document).on("mousedown", function(event) {
    _isMouseDown = true;
});
$(document).on("mouseup", function(event) {
    _isMouseDown = false;
}); 
```

然后您可以检查`_isMouseDown`鼠标是否已关闭。

或更简洁：[Demo](http://jsbin.com/ubawek/2/) - [Code](http://jsbin.com/ubawek/2/edit)

```
$(document).on("mousedown mouseup", function(event) {
    _isMouseDown = event.type == "mousedown";
}); 
```

如果你不想要全局变量，你可以保存`_isMouseDown`throw jQuery 的`data`方法： [Demo](http://jsbin.com/ubawek/3/) - [Code](http://jsbin.com/ubawek/3/edit)

```
$(document).on("mousedown mouseup", function(event) {
    $(this).data( "_isMouseDown", (event.type == "mousedown") );
}); 
```

并检查抛出：`$(document).data("_isMouseDown")`

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T07:31:37.483

您正在寻找新的强大的 HTML5 拖放 [http://www.w3schools.com/html/html5_draganddrop.asp](http://www.w3schools.com/html/html5_draganddrop.asp)

您要查找的事件是“drop”

```
<div id="droppable" 
 ondragover="event.preventDefault()" 
 ondrop="event.preventDefault(); 
  console.log(event); 
  console.log(event.dataTransfer.getData('text/plain'))"> 
```

当然，您应该将此代码移动到 js 文件中，但这会为您提供已完成的示例。您可能想阅读该外部下拉菜单中的内容，甚至将其用于上传。

这是有关 event.dataTransfer 的详细信息 [http://www.tutorialspoint.com/html5/html5_drag_drop.htm](http://www.tutorialspoint.com/html5/html5_drag_drop.htm)

# c# - 如何将图像的工具提示绑定到 XAML 中的异常错误消息？

> ID：10103302
> 
> 赞同：1
> 
> 时间：2012-04-11T09:30:36.440
> 
> 标签：c#, wpf, xaml

这是我的代码，它应该为 WPF 模仿 WinForm 的 ErrorProvider：

```
 <Window.Resources>
    <Style TargetType="{x:Type TextBox}">
        <Setter Property="Validation.ErrorTemplate">
            <Setter.Value>
                <ControlTemplate>
                    <DockPanel LastChildFill="True">
                        <Border BorderBrush="Red" BorderThickness="1" DockPanel.Dock="Left">
                            <AdornedElementPlaceholder />
                        </Border>
                        <Image Source="Images/dialog_error.png" Width="30" ToolTip="{Binding ElementName=adornedElement, 
                     Path=AdornedElement.(Validation.Errors), 
                     Converter={k:ValidationErrorsToStringConverter}}"/>
                    </DockPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip"
                    Value="{Binding RelativeSource={RelativeSource Self}, 
                           Path=(Validation.Errors)[0].ErrorContent}"/>
            </Trigger>
        </Style.Triggers>
    </Style>    
</Window.Resources> 
```

我希望它显示一个带有工具提示的错误图标，解释出了什么问题。

正在显示错误图标，但缺少工具提示。

我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:25:56.557

看起来你忘记设置名称了`<AdornedElementPlaceholder />`。应该是`<AdornedElementPlaceholder x:Name="adornedElement" />`否则你`Binding ElementName=adornedElement`将无法工作

# php - PHP - 错误报告不起作用

> ID：10103307
> 
> 赞同：4
> 
> 时间：2012-04-11T09:30:52.210
> 
> 标签：php

我的虚拟主机提供商不提供启用错误报告的选项。所以尝试了 error_reporting(E_ALL); 但这也行不通。我尝试了以下脚本：

```
 <?php
 error_reporting(E_ALL);
 echo $test;
 ?> 
```

如果我正确阅读了手册，那么这应该会生成错误通知。但这也行不通。我做错了什么还是获得新的虚拟主机提供商的唯一解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T09:32:13.530

`error_reporting`只是告诉 PHP 错误报告应该有多详细，但您还需要通过设置告诉它实际向浏览器显示错误

```
ini_set('display_errors', 1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T09:33:07.437

您可能想要对触发的错误做一些事情，例如记录它：

```
ini_set('error_log', '/path/to/php-error.log'); 
```

...和/或显示它：

```
ini_set('display_errors', true); 
```

[请在错误处理](http://es2.php.net/manual/en/book.errorfunc.php)和[运行时配置](http://es2.php.net/manual/en/errorfunc.configuration.php)中找到其他文档。

* * *

附录：该指令曾经被记录为布尔值，但现在不再如此。此外，由于[display_errors](https://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)指令和[ini_set()](https://php.net/ini_set)的第二个参数都是`string`类型，因此在使用[严格类型](https://www.php.net/manual/en/control-structures.declare.php)时，您将无法传递布尔值：

```
<?php
declare(strict_types=1);
ini_set('display_errors', true); 
```

> 致命错误：未捕获的 TypeError：ini_set() 期望参数 2 为字符串，bool 给定

因此，您需要传递一个 eval 为 true 的字符串，例如`'true'`or `'1'`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T09:32:20.757

您还需要：

```
ini_set('display_errors', true); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T09:38:40.397

如果它是共享主机，那么出于安全原因，他们可能会禁用错误报告，但他们仍然应该能够为您的特定域提供错误日志，如果他们不想内联显示它，请尝试与他们交谈 - 获取访问日志文件或者可能是一些可以安全读取它的管理面板。

# entity-framework - 添加和删 除时DbContext很慢

> ID：10103310
> 
> 赞同：47
> 
> 时间：2012-04-11T09:30:55.623
> 
> 标签：entity-framework, dbcontext

在数据库优先的场景中使用 DbContext 时，我发现添加和删除实体与 ObjectContext 相比非常慢。如果添加 2000 个实体并在最后保存更改，则 DbContext 比 ObjectContext 慢 3 到 5 倍（顺便说一句：我知道使用 SqlBulkCopy 添加大量实体会更好，但这不是重点）。如果在每次添加 DbContext 后保存更改仍然慢了近两倍。当涉及到删除时，情况会变得更糟：在所有实体删除结束时保存时，DbContext 比 ObjectContext 慢大约 18 倍。

我使用了我用来比较数据库访问技术的高度开发的测试应用程序和一个小型控制台应用程序来仔细检查。两者都显示了使用 DbContext 添加和删除实体的不良结果。以下是控制台应用程序的结果：

```
Inserting 2000 entities via DbContext saving changes at the end: 2164ms
Inserting 2000 entities via ObjectContext saving changes at the end: 457ms
Inserting 2000 entities via DbContext saving changes after each object addition: 8420ms
Inserting 2000 entities via ObjectContext saving changes after each object adding: 4857ms
Inserting 2000 entities via DbContext using a new DbContext for each object addition: 4018ms
Deleting 2000 entities via DbContext saving changes at the end: 4794ms
Deleting 2000 entities via ObjectContext saving changes at the end: 261ms
Deleting 2000 entities via DbContext saving changes after each object deletion: 25536ms
Deleting 2000 entities via ObjectContext saving changes after each object deletion: 2110ms 
```

我尝试在 VC 2010 中使用 EF 4.3，在 VS 11 中使用 EF 5.0 Beta 2，结果几乎相同。我使用了“EF 4.x POCO Entity Generator for C#”、“EF 4.x DbContext Generator for C#”和“EF 5.x DbContext Generator for C#”提供的 T4 模板。

有什么问题？根据测试结果，我永远不会在必须添加或删除实体的应用程序中使用 DbContext（不幸的是，这使得 DbContext 对我来说无法使用）。

我将控制台测试应用程序放在我的 Web 服务器上：[EF 4.3 DbContext Test](http://www.juergen-bayer.net/downloads/ef4.3DbContextTest.zip)，[EF 5.0 DbContext Test](http://www.juergen-bayer.net/downloads/ef5.0DbContextTest.zip)

任何想法/更正表示赞赏。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-11T09:58:49.513

尝试将此添加到您的 DbContext 测试中：

```
dbContext.Configuration.AutoDetectChangesEnabled = false;

// Now do all your changes

dbContext.ChangeTracker.DetectChanges();
dbContext.SaveChanges(); 
```

并尝试再次运行您的测试。

DbContext API 中有一些架构更改，每次您检查实体的更改`Add`或`Attach`上下文`Delete`中的任何内容。在 ObjectContext API 中，此检测仅在您触发`SaveChanges`. 它是大多数常见场景的更好解决方案，但它需要对海量数据处理进行特殊处理。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-10-31T09:10:01.410

在 EF6 中，您现在可以在[DbSet](http://msdn.microsoft.com/en-us/library/gg696460(v=vs.113).aspx)上使用[AddRange](http://msdn.microsoft.com/en-us/library/dn220168(v=vs.113).aspx)和[RemoveRange](http://msdn.microsoft.com/en-us/library/dn220170(v=vs.113).aspx)。

从链接到文档：

> 请注意，如果 AutoDetectChangesEnabled 设置为 true（这是默认设置），则 DetectChanges 将在 {adding,deleting} 任何实体之前调用一次，并且不会再次调用。这意味着在某些情况下，{Add,Remove}Range 的性能可能比多次调用 {Add,Remove} 的性能要好得多。

# css - 在同一个 div 标签中叠加背景图片

> ID：10103313
> 
> 赞同：2
> 
> 时间：2012-04-11T09:31:17.227
> 
> 标签：css, image, html, background

有没有办法仅使用一个 div 覆盖/重叠两个或多个图像？我想要在我的 css 中这样的东西：

```
#nice_container {
    background: url('nice_background.jpg') repeat-y z(0);
    background: url('nice_logo.jpg') top left no-repeat z(1);
} 
```

其中 z(#) 将是 z-index，然后我会使用一个不错的`<div id="nice_container">...</div>`

## 编辑

感谢您的快速回答！[这是解决方案](https://stackoverflow.com/a/10115887/1326147)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:32:50.863

使用 css3，您可以在 css 中使用多个背景

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

但不是每个浏览器都能处理它！Firefox 从 3.6 版（Gecko 1.9.2）开始支持多种背景，从 1.3 版开始支持 Safari，从 10 版开始支持 Chrome，从 10.50 版（Presto 2.5）开始支持 Opera，从 9.0 版开始支持 Internet Explorer。

例子 ：

```
#exampleA {
width: 500px;
height: 250px;
background-image: url(decoration.png), url(ribbon.png), url(old_paper.jpg);
background-repeat: no-repeat;
background-position: left top, right bottom, left top;
} 
```

或者：

```
#exampleA {
width: 500px;
height: 250px;
background: url(decoration.png) left top no-repeat, url(ribbon.png) right bottom no-   repeat, url(old_paper.jpg) left top no-repeat;
} 
```

我想您定义背景图像的顺序是堆栈的顺序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:33:29.493

您可以像这样使用**CSS3**多重背景编写：

```
background: url('nice_background.jpg') repeat-y , background: url('nice_logo.jpg') top left no-repeat; 
```

但它不适用于 IE8 及以下版本。

检查这个[http://www.sitepoint.com/mastering-css3-multiple-backgrounds/#fbid=Mg9Q6GSmvXB](http://www.sitepoint.com/mastering-css3-multiple-backgrounds/#fbid=Mg9Q6GSmvXB)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T09:34:28.070

只有 css3 支持多种背景 - 所以取决于您需要的浏览器支持

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

Firefox 从 3.6 版（Gecko 1.9.2）开始支持多种背景，从 1.3 版开始支持 Safari，从 10 版开始支持 Chrome，从 10.50 版（Presto 2.5）开始支持 Opera，从 9.0 版开始支持 Internet Explorer。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T00:34:14.960

所以谢谢大家的快速回答！它是这样工作的：

```
 #nice_container {
     background: url('nice_logo.jpg') top left no-repeat,
                 url('nice_background.jpg') repeat-y
 } 
```

请注意，您必须先编写较小或透明的背景图像（最终背景位于行尾）。感谢您帮助达成解决方案！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T09:35:08.340

这可能会指明方向

```
div.test {
    background-image: url(../pix/logo_quirksmode.gif), url(../pix/logo_quirksmode_inverted.gif);
    background-repeat: repeat-y;
    background-position: top left, top right;
    width: 385px;
    height: 100px;
    border: 1px solid #000000;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T09:35:16.560

如果你想覆盖两个图像，并且你想让它在每个浏览器中工作，你可以做这样的事情（但它不再是一个 div）：

```
<img src="img1.png" style="background-image: url(img2.png)"/> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T11:51:15.883

CSS3 允许我们在一个 div 中指定多个背景图像，只使用一个简单的逗号分隔列表。

```
#example1 {
width: 500px;
height: 250px;
background-image: url(sheep.png), url(betweengrassandsky.png);
background-position: center bottom, left top;
background-repeat: no-repeat;
} 
```

**有关更多详细信息，您可以在此处阅读：** * *[CSS3 的多个背景](http://www.css3.info/preview/multiple-backgrounds/)**

# rdlc - 当所有数据点为 0% 时，RDLC 饼图不显示有用的错误消息

> ID：10103315
> 
> 赞同：1
> 
> 时间：2012-04-11T09:31:23.310
> 
> 标签：rdlc

有没有办法设置 RDLC 饼图在所有数据点为 0% 时显示有用的错误消息。

目前我在 RDLC 查看器中收到此错误消息，我无法通过代码处理该错误消息，因为它没有作为错误引发。

```
An error occurred during local report processing.
An error occurred during rendering of the report.
An error occurred during rendering of the report.
An error has occurred during rendering of chart chart1\. Details: Parameter is not valid.
Parameter is not valid. 
```

# apache - Apache mod 仅针对特定 URL 将 https 重写为 http

> ID：10103321
> 
> 赞同：1
> 
> 时间：2012-04-11T09:32:04.450
> 
> 标签：apache, http, .htaccess, exception, https

我正在运行 Apache 网络服务器，并且在我的网站上我有会员区的 https。

https://www.domain.com/members/*

但我不希望 https 用于普通网站。所以如果有人去 https://www.domain.com/example.html 被踢回 http://www.domain.com/example.html，我真的很喜欢

所以只有带有子页面 https://www.domain.com/members/* 的 URL 应该是 https。

知道我将如何配置它吗？

谢谢！

有了这段代码，我确实得到了 http://www.domain.com/members 被踢到 httpw: //www.domain.com/members

```
RewriteCond %{SERVER_PORT} 80 
RewriteCond %{REQUEST_URI} members 
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI}  [R,L] 
```

现在我需要将 https://www.domain.com/* 更改为 http://www.domain.com/* （当然除了/members）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:50:21.967

在 DOCUMENT_ROOT 下的 .htaccess 中使用此代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTPS}s on
RewriteRule ^(?!members/).*$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R,NC] 
```

这将强制除以to`https://`开头的所有 URI`/members/``http://`

# c# - WindowsAPICodePack 的 CommonSaveFileDialog 中的 InvalidOperationException

> ID：10103324
> 
> 赞同：2
> 
> 时间：2012-04-11T09:32:14.290
> 
> 标签：c#, wpf, windows-api-code-pack

我在 WPF 中使用 WindowsAPICodePack 的 CommonSaveFileDialog 向用户询问文件名。为了在对话框关闭之前检查文件名，我有一个 FileOk 处理程序。但是，如果我尝试获取 FileName 属性，则会引发 InvalidOperationException，说明在关闭对话框之前该属性不可用。

那么如何在 FileOk 处理程序中检索用户选择或输入的完整文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-01T11:46:36.293

Hans Passant 建议的一种可能的解决方法，无需修改源代码：

```
dialog.FileOk += (sender, e) =>
{
    var filenames = new Collection<string>();
    typeof(CommonFileDialog)
        .GetMethod("PopulateWithFileNames", BindingFlags.Instance | BindingFlags.NonPublic)
        .Invoke(dialog, new[] { filenames });

    // use filenames
} 
```

# php - 如何使用 SQL UNION

> ID：10103327
> 
> 赞同：-2
> 
> 时间：2012-04-11T09:32:21.413
> 
> 标签：php, sql

好吧，我不知道如何正确使用 sql union。我有两个带有域（url）的表我想将表 1 与表 2 进行比较，以便我从表 2 中获得唯一域，该域不在表 1 中。

例子

**表格1**

```
id   domain
1    google.com
2    facebook
3    stackoverflow.com 
```

**表2**

```
id   domain
1    youtube.com
2    facebook
3    stackoverflow.com 
```

所以我希望我比较两个表并获取 youtube.com，因为它不在 table1 中，我使用了这样的 sql union

```
$query="SELECT table1.domain, table2.domain "."FROM table1, table2 "."WHERE table1.domain != table2.domain";
$result = mysql_query($query) or die(mysql_error());
while ($rec = mysql_fetch_array($result))
{
$new_url=$rec["domain"];
} 
```

现在我得到像 youtube.com youtube.com 这样的双重结果，所以请帮助我的 sql 语句有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:34:53.487

你应该使用

```
SELECT t2.domain FROM
table2 t2 LEFT JOIN table1 t1
    ON t2.domain = t1.domain
WHERE t1.domain IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:35:49.193

这是您要查找的 SQL

```
SELECT DISTINCT t1.domain FROM t1
WHERE domain not in (SELECT t2.domain FROM t2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:47:40.890

您需要的关系运算符是差异（联合类似于加法）。在标准 SQL 中，关键字是`EXCEPT`（在 Oracle 中是`MINUS`，这在 IMO 中更直观一点）：

```
SELECT domain
  FROM table2
EXCEPT 
SELECT domain
  FROM table1 
```

'php' 标签是否暗示 MySQL？MySQL 缺少显式的关系差异运算符，因此您需要使用[反连接](https://stackoverflow.com/questions/7494586/get-non-existing-data-from-another-table-join/7496263#7496263)构造。

# python - 从函数返回（） - 我做错了吗？

> ID：10103328
> 
> 赞同：0
> 
> 时间：2012-04-11T09:32:21.710
> 
> 标签：python, return-value

我正在尝试遍历一个目录，检索该目录中以某个扩展名结尾的所有文件，然后将该文件写入一个列表。这个列表应该在函数完成其工作后返回。

```
def grabFiles(source,ext):
    import fnmatch
    import os

    matches = [] #tmp var which is used to return the files matching the search mask.
    for root, dirnames, filenames in os.walk(source):   #for each folder & subfolder do:
        for filename in fnmatch.filter(filenames, ext): #and for each file found like that do:
            matches.append(os.path.join(root, filename))#append the file name&directory to the "matches" variable.
    return(matches) #return the content of matches 
```

现在，当我使用以下命令运行它时：

```
ext=[".caf", ".lmg", ".chr", ".cdf", ".dds", ".tif", ".mtl", ".cgf", ".cga"]

for filetype in ext:
     files= nPy.grabFiles("D:\\01_SVN\\01_DE\\trunk\\Game",filetype)
     print files 
```

我相信它应该返回一个列表，其中包含我的 ext 列表中每个扩展名的文件，对吗？相反，它为 ext 列表中的每个项目返回一个 [ ]。

如果我在不使用定义的情况下触发这个东西，它就可以正常工作：/

```
import fnmatch
import os
source ="D:\\01_SVN\\01_DE\\trunk\\Game"  
extension = ["*.mtl","*.tif","*.chr"] 
matches = []
for filetype in extension:
    for root, dirnames, filenames in os.walk("%s" % (source)):
        for filename in fnmatch.filter(filenames, "%s" % (filetype)):
            matches.append(os.path.join(root, filename))
print matches 
```

我已经盯着这个看了一个多小时，恐怕我现在几乎对自己的剧本视而不见：<我要么无法返回一个 dang 列表，要么我误解了返回的工作原理 - 但它应该从匹配一个新的变量没有问题，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:38:26.923

我相信您正在匹配`.ext`而不是`*.ext`. 尝试添加星号以匹配名称，它应该可以工作。

```
def grabFiles(source,ext):
    import fnmatch
    import os

    matches = []
    for root, dirnames, filenames in os.walk(source):
        for filename in fnmatch.filter(filenames, '*' + ext):
            matches.append(os.path.join(root, filename))
    return matches 
```

关于你的编程风格：

*   避免在评论中重复你正在做的事情。没用
*   return 是类似 print 的关键字，而不是函数
*   我宁愿使用`endswith`fnmatch.filter
*   避免导入函数
*   而不是`source ="D:\\01_SVN\\01_DE\\trunk\\Game"`使用`source=r"D:\01_SVN\01_DE\trunk\Game"`

# ios - IOS有后台服务提供类似androidaidl服务的功能吗？

> ID：10103331
> 
> 赞同：1
> 
> 时间：2012-04-11T09:32:36.480
> 
> 标签：ios, cocoa-touch

我为android开发了一个后台服务，它通过AIDL提供一些接口，所以如果另一个应用程序想要使用这些功能，它只是绑定到我的服务。现在我想在 IOS 中做同样的事情，我不知道在 IOS 中做这些。

我想知道它是否适用于像android这样的IOS。如果是，可以使用哪个模块？或者有另一种方法在IOS中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:58:15.427

不，我认为，这是简短的答案。iOS 的进程间通信设施非常有限，只有有限的应用程序能够执行多任务。

最接近的等价物——而且不是非常接近——将是 URL 方案。你的应用会“宣传”它的服务，而其他应用会切换到你的应用来执行它们。

# node.js - 如何使用 node-orm 导出模型？

> ID：10103338
> 
> 赞同：4
> 
> 时间：2012-04-11T09:33:11.057
> 
> 标签：node.js, orm, models

我正在测试[node-orm](https://github.com/dresende/node-orm)，但找不到导出模型的正确方法。这是模型定义（./models/user.js）：

```
var orm = require('orm');

var db = orm.connect('pg://user@localhost/accounts', function(success, db) {
  if (!success) {
    console.log('Could not connect to database.');
    return;
  }

  var User = db.define('user', {
    ... // Model schema
  });

  module.exports = User;
}); 
```

当我尝试在其他地方使用它时（例如 ./app.js）：

```
var User = require('./models/user');
...

app.get('/test', function(req, res) {
  var user = new User({
    ...
  });
  user.save(function(err, user) {
    ...
  });

  ...
}); 
```

原来 User 是一个空对象，所以节点不能调用模型构造函数。使用 node-orm 导出模型的正确方法是什么？这可能很简单，但我可以在文档中找到任何内容……</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:29:35.607

您的问题是您正在设置`module.exports`回调函数。Node 的[模块加载系统](http://nodejs.org/docs/latest/api/modules.html#modules_module_exports)明确指出你不能这样做。

该`orm-node`模块使用您为模型指定的名称将您的模型存储在其模块导出中。如果您更改`app.js`为阅读，您的示例应该可以工作：

```
require('./models/user');
var orm = require('orm');
...

app.get('/test', function(req, res) {
  var user = new orm.user({
    ...
  });
  user.save(function(err, user) {
    ...
  });

  ...
}); 
```

另请注意，由于您的模型是在回调中初始化的，因此在您`require()`的模型模块之后不会立即可用。在您需要处理`/user`.

处理这一切的最安全的方法可能是确保您的应用程序初始化并`listen()`作为`orm.connect()`回调的一部分完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T22:26:44.403

这就是我使用[light-orm 的方式](https://npmjs.org/package/light-orm)：

```
var ORM = require('light-orm');

var AdsCollection = new ORM.Collection({
    connector: ORM.driver,
    tableName: 'ads'
});

module.exports = AdsCollection; 
```

应该与您的 ORM 非常相似。由于魔术问题和复杂性，我已经从[node-orm](https://npmjs.org/package/orm)迁移到[light-orm 。](https://npmjs.org/package/light-orm)您也可以查看 light-orm： [https ://npmjs.org/package/light-orm](https://npmjs.org/package/light-orm)

# python - 在 Python 中通过 Unicode 脚本分割文本

> ID：10103343
> 
> 赞同：0
> 
> 时间：2012-04-11T09:33:36.890
> 
> 标签：python, regex, unicode

我有一些这样的文字：

এর জন্য বুদ্ধির (原因) প্রয়োজন নেই, প্রয়োজন নিজের

语言是孟加拉语（当然除了一个英语单词）。

我想获得文本中的孟加拉语单词列表（即单词标记化问题）。孟加拉语的 Unicode 范围是 0980 到 09FF。还有一个\p{Bengali} 脚本（不知道怎么用）。这是我所拥有的：

```
import re
Pattern = re.compile(r'\[\u0980-\u09FF]+')
Words = split(Pattern, Text) 
```

这是行不通的。我怎样才能让它工作？如果可能的话，我也更喜欢使用 \p{Bengali}，而不是明确的 Unicode 范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:37:35.683

Python 还不理解 Unicode 脚本属性，例如`\p{...}`.

在您删除转义括号的反斜杠并且不使用`split()`but `findall()`（您甚至没有使用`re.split()`但我猜这只是一个错字）之后，您的版本应该可以工作。

此外，由于您没有像您在最近的评论中所说的那样使用 Python 3，因此您可能需要使用该`re.UNICODE`选项并确保它`text`实际上是一个`Unicode`字符串。

```
import re
pattern = re.compile(ur'[\u0980-\u09FF]+', re.UNICODE)
words = re.findall(pattern, text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-24T21:57:24.727

您可以使用 pip 安装备用`regex`库：

```
pip3 install regex 
```

并使用该`\p{ScriptName}`模式查找您要查找的脚本：

```
import regex
t = "এর জন্য বুদ্ধির (Reason) প্রয়োজন নেই, প্রয়োজন নিজের&quot;
t = regex.findall(r"[\p{Bengali}]+", t)
print(t) 
```

更多关于正则表达式模块的[信息](https://bitbucket.org/mrabarnett/mrab-regex/src/hg/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T09:37:02.423

你可以只用空格分割：

```
>>> import re
>>> x = 'এর জন্য বুদ্ধির (Reason) প্রয়োজন নেই, প্রয়োজন নিজের'
>>> re.split('\s', x)
['\xe0\xa6\x8f\xe0\xa6\xb0', '\xe0\xa6\x9c\xe0\xa6\xa8\xe0\xa7\x8d\xe0\xa6\xaf', '\xe0\xa6\xac\xe0\xa7\x81\xe0\xa6\xa6\xe0\xa7\x8d\xe0\xa6\xa7\xe0\xa6\xbf\xe0\xa6\xb0', '(Reason)', '\xe0\xa6\xaa\xe0\xa7\x8d\xe0\xa6\xb0\xe0\xa6\xaf\xe0\xa6\xbc\xe0\xa7\x8b\xe0\xa6\x9c\xe0\xa6\xa8', '\xe0\xa6\xa8\xe0\xa7\x87\xe0\xa6\x87,', '\xe0\xa6\xaa\xe0\xa7\x8d\xe0\xa6\xb0\xe0\xa6\xaf\xe0\xa6\xbc\xe0\xa7\x8b\xe0\xa6\x9c\xe0\xa6\xa8', '\xe0\xa6\xa8\xe0\xa6\xbf\xe0\xa6\x9c\xe0\xa7\x87\xe0\xa6\xb0'] 
```

# php - 在 Zend_Controller_Plugin 中获取路由控制器

> ID：10103345
> 
> 赞同：0
> 
> 时间：2012-04-11T09:33:45.283
> 
> 标签：php, zend-framework

我必须在调用视图脚本*之前*检测路由哪个控制器（因此 postDispatch() 不合适）。

```
class PerchProvider extends Zend_Controller_Plugin_Abstract
{
public function routeShutdown(Zend_Controller_Request_Abstract $request)
{
    //if (--CONTROLLERNAME-- != "Error") {

    include APPLICATION_PATH . '/../public/perch/runtime.php';

    // }
}
} 
```

如何访问控制器的名称？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:36:38.367

有趣的是，您正在将 perch 与 Zend 集成！

根据文档 getControllerName 是 Zend_Controller_Request_Abstract 上的一个方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:58:43.617

您需要注册一个优先级高于视图渲染器的操作助手。

1.  在您的 Bootstrap.php 中：

    ```
    class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
    {
        protected function _initPerch()
        {
            require APPLICATION_PATH . '/controllers/helpers/Perch.php';
            Zend_Controller_Action_HelperBroker::getStack()->offsetSet(2,
                    new Application_Controller_Helper_Perch());
        }
    } 
    ```

2.  在 application/controllers/helpers/Perch.php 中：

    ```
    <?php

    class Application_Controller_Helper_Perch 
            extends Zend_Controller_Action_Helper_Abstract
    {
        public function postDispatch()
        {
            $request = $this->getActionController()->getRequest();
            $controller = $request->getControllerName();
            if ($controller != 'error') {
                include APPLICATION_PATH . '/../public/perch/runtime.php';
            }
        }
    } 
    ```

# javascript - 寻找实现 AJAX TreeGrid 的最佳解决方案

> ID：10103348
> 
> 赞同：3
> 
> 时间：2012-04-11T09:34:01.630
> 
> 标签：javascript, ajax, treeview, dhtml

我正在寻找 Ajax/TreeGrid（具有多列的树）实现。

它必须：

1.  支持服务器端排序
2.  支持按需叶加载 - 仅加载开放节点的子节点
3.  支持分页 - 节点必须以块的形式加载，仅从服务器请求可见记录
4.  可以在商业项目中免费使用

我尝试了 Dojo (dojox.grid.LazyTreeGrid)，它似乎有分页问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T12:07:29.827

我会尝试[http://dhtmlx.com/docs/products/dhtmlxTreeGrid/index.shtml](http://dhtmlx.com/docs/products/dhtmlxTreeGrid/index.shtml)

它不是免费的，但它只有 299 美元，这对于商业项目来说并不算多。您可能有更好的支持和更有保证的更新。对这样一个组件的良好支持将很快得到回报。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T12:12:01.227

[ExtJS 的 TreeGrid](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tree.Panel)满足您的所有标准，除了最后一个。我们的实现在客户端使用服务器端排序和按需加载/创建/删除/移动子节点，然后我们将这些数据推送回服务器以进行持久化。

Ext 是一个巨大的框架，但您可以利用它们的动态加载来缩短页面加载时间。

您可以免费下载它，看看它是否合适，或许可以决定它是否值得许可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T12:05:40.540

你可以试试这个[dhtmlx 树](http://www.dhtmlx.com/docs/products/dhtmlxTreeGrid/index.shtml)。不确定它是否提供服务器端排序功能。

# c++ - 容器中对象的继承层次结构如何保持开闭原则？

> ID：10103349
> 
> 赞同：1
> 
> 时间：2012-04-11T09:34:07.743
> 
> 标签：c++

当我想在不改变它的情况下向这个结构添加功能时：

```
class MemberBase
{
public:
    virtual MemberBase* clone() const; 
    virtual void action1(); 
    ... 
}

class Container
{
public:
    virtual void functionUsingAction1();
    ...
private:
    std::vector<MemberBase*> members_
} 
```

我可以继承 MemberBase 和

```
class MemberType1 : public MemberBase
{
public:
    MemberBase* clone() const;// Reimplementation
    void action1();           // Reimplementation
    virtual void action2();   // New functionality
} 
```

我可以使用所需类型的数据填充容器

```
MemberBase* MemberBase::clone() const; 
```

方法。但是我该怎么打电话

```
void MemberType1::action2(); 
```

来自 Container 类的方法？我可以使用 dynamic_cast，但这被认为是设计缺陷。有什么解决方法吗？或者更好的是，我可以遵循任何模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:27:22.837

老实说，我看的越多，它对我来说就像一个典型的[访客](http://www.vincehuston.org/dp/visitor.html)应用程序。

我建议避免在您的`Container`班级中实施任何智能，而是将操作委托给特定`Visitor`班级。`Visitor`可以为基础提供某种方式来安全地与底层容器结构交互（擦除/插入）。

```
// MemberBase.hpp
class Visitor;

class MemberBase {
public:
  virtual MemberBase* clone() const = 0;

  virtual void accept(Visitor&) = 0;
  virtual void accept(Visitor&) const = 0;
}; // class MemberBase

// Visitor.hpp
class Member1;
class Member2;

class Visitor {
public:
  virtual void visit(Member1&) = 0;
  virtual void visit(Member1 const&) = 0;

  virtual void visit(Member2&) = 0;
  virtual void visit(Member2 const&) = 0;
};

// Container.hpp
#include <MemberBase.hpp>

class Container {
public:
  void accept(Visitor& v) {
    BOOST_FOREACH(MemberBase& mb, _members) {
      mb.accept(v);
    }
  }

  void accept(Visitor& v) const {
    BOOST_FOREACH(MemberBase const& mb, _members) {
      mb.accept(v);
    }
  }

private:
  boost::ptr_vector<MemberBase> _members;
}; 
```

然后你需要实现成员的`accept`方法。它是纯机械的。

```
// Member1.hpp
#include <MemberBase.hpp>

class Member1: public MemberBase {
public:
  virtual Member1* clone() const { return new Member1(*this); }

  virtual void accept(Visitor& v);
  virtual void accept(Visitor& v) const;
};

// Member1.cpp
#include <Member1.hpp>
#include <Visitor.hpp>

void Member1::accept(Visitor& v) { v.visit(*this); }
void Member1::accept(Visitor& v) const { v.visit(*this); } 
```

最后你可以实现一个访问者：

```
// CountVisitor.hpp
#include <Visitor.hpp>

class CountVisitor: public Visitor {
public:
  CountVisitor(): _count(0) {}

  size_t count() const { return _count; }

  virtual void visit(Member1&);
  virtual void visit(Member1 const&);

  virtual void visit(Member2&);
  virtual void visit(Member2 const&);

private:
  size_t _count;
};

// CountVisitor.cpp
#include <CountVisitor.hpp>
//#include <Member1.hpp> // where you would include, but unnecessary here

void CountVisitor::visit(Member1&) { ++_count; }
void CountVisitor::visit(Member1 const&) { ++_count; }

void CountVisitor::visit(Member2&) { ++_count; }
void CountVisitor::visit(Member2 const&) { ++_count; } 
```

您将其用作：

```
// main.cpp
#include <iostream>

#include <Container.hpp>
#include <CountVisitor.hpp>

int main() {
  Container const c = /* something */;

  CountVisitor cv;
  c.accept(cv);

  std::cout << cv.count() << " items in the container\n";
} 
```

这种设计的缺点是`visit`需要为每个直接派生自 的新类实现一个新方法`MemberBase`，因此`MemberBase`层次结构不是那么开放。这可以使用[Acyclic Visitor](http://www.objectmentor.com/resources/articles/acv.pdf)来缓解；但是，我很少需要它。

要“扩展”能力，您可以拥有`Visitor::visit`并`MemberBase::accept`返回要执行的“动作”（擦除、克隆等），并在您实际拥有的**两个**循环中处理此问题。*可以使用一些技巧将其简化为一个循环...*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:04:40.123

如果您知道每个成员将发布不同的函数，您可能总是会创建 EnumerateActions()、CallAction(std::string action) 等方法 - 这会更安全，但可能与用火箭筒射击麻雀相比.

另一种选择是制作接口：IAction1、IAction2 并在成员派生类中实现它们。然后你只需检查一个成员是否实现了一个接口并使用它。Container 不会知道特定的成员类，但您仍然可以访问它们的特定功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:53:35.130

我能想到的一个选项是检查每个对象是否为 MemberType1 对象，如果条件为真，则可以调用 action2()。这是一个非常幼稚的解决方案，但我相信其他人很快就会想出一个聪明的解决方案:)

# html - Gmail / Chrome HTML 电子邮件中的额外行空间

> ID：10103355
> 
> 赞同：1
> 
> 时间：2012-04-11T09:34:35.777
> 
> 标签：html, email, google-chrome, gmail

我多年来一直在创建 HTML 电子邮件，但从未遇到过这个问题。

在下面的代码中，我在有 7 列的行的末尾得到了一个 3 像素的空间。我做错了什么还是gmail为表格中的每一行添加了一个像素的列宽。

我只是在使用 Chrome 时在 gmail 中遇到这种情况。它不会发生在任何其他电子邮件客户端或浏览器中（即使使用 Gmail）

小样

```
 <tr>
        <td width="588">
            <table border="0" cellpadding="0" cellspacing="0" width="588" align="center">
                <tr>
                    <td colspan="7" width="588"><img src="imgs/header2.gif" alt="View Our Latest Newsletter" width="588" height="48" border="0" style="display: block;"></td>
                </tr>
                        <tr width="588">
                            <td width="85"><a href="http://www.#.com"><img src="imgs/racing_menu_racing.gif" alt="" width="85" height="18" border="0" style="display: block;"></a></td>
                            <td width="64"><a href="http://www.#.com/news.html"><img src="imgs/racing_menu_news.gif" alt="# Racing News" width="64" height="18" border="0" style="display: block;"></a></td>
                            <td width="76"><a href="http://www.#.com/events.html"><img src="imgs/racing_menu_events.gif" alt="Media" width="76" height="18" border="0" style="display: block;"></a></td>
                            <td width="58"><a href="http://www.#.com/cars.html"><img src="imgs/racing_menu_cars.gif" alt="Team Gear" width="58" height="18" border="0" style="display: block;"></a></td>
                            <td width="82"><a href="http://#.com/drivers.html"><img src="imgs/racing_menu_drivers.gif" alt="#.com" width="82" height="18" border="0" style="display: block;"></a></td>
                            <td width="66"><a href="http://#.com/media.html"><img src="imgs/racing_menu_media.gif" alt="# Racing News" width="66" height="18" border="0" style="display: block;"></a></td>
                            <td width="157"><a href="http://www.#.com"><img src="imgs/racing_menu_bwcom.gif" alt="Media" width="157" height="18" border="0" style="display: block;"></a></td>
                        </tr>
                        <tr>
                            <td colspan="7" width="588"><a href="http://www.#.com"><img src="imgs/Top-ImageRace.jpg" width="588" height="93" border="0" style="display: block;"></a></td>
                        </tr>                       
            </table>

        </td>
    </tr>   
    <tr>
        <td width="588">

            <table style="font-family: Arial,Helvetica,sans-serif; font-size:14px; color:#444;" align="center" border="0" cellpadding="5" cellspacing="0" width="588">
                <tr>
                    <td width="588" colspan="2" style="color:#3F3F3D; font-weight: bold;font-size:18px; border-left: #FFC325; border-left-style:solid; border-left-width: 4px;" valign="top">&nbsp;&nbsp;Heading 1</td>

                </tr>
                <tr height="5">
                    <td height="5"></td>
                    <td height="5"></td>
                </tr> 
                <tr height="10">
                    <td height="10" colspan="2"><img src="imgs/dottedline.gif" border="0" style="display: block;" width="578" height="10"></td>

                </tr>
                <tr>
                    <td rowspan="2" width="226"><a href="http://store.#.com/#-racing-2012-t-shirt-p1822.aspx"><img src="imgs/1.jpg" alt="shirt" width="220" height="166" style="border-width:3; border-color:#ffc425; border-style:solid;"></a></td>
                    <td valign="top" style="color:#333795; font-weight: bold;font-size:16px;">Sub Heading 1a</td>    
                </tr>
                <tr>
                    <td valign="top">Body Text 1- Ex. Drivers tend to get all of the credit when they win a race, but as the BMW experts at # reminded...<br /><br />
                    <a href="http://www.#.com/#-returns-to-grand-am-victory-lane-at-barber-motorsports-park.html"><strong>READ MORE 1a</strong></a> *|FACEBOOK:LIKE:http://www.#.com|*</a>
                    </td>
                </tr>
                <tr height="10">
                    <td height="10"></td>
                    <td height="10"></td>
                </tr>

                <tr>
                    <td width="588" colspan="2" style="color:#3F3F3D; font-weight: bold;font-size:18px; border-left: #FFC325; border-left-style:solid; border-left-width: 4px;" valign="top">&nbsp;&nbsp;Heading 2</td>

                </tr>
                <tr height="5">
                    <td height="5"></td>
                    <td height="5"></td>
                </tr> 
                <tr height="10">
                    <td height="10" colspan="2"><img src="imgs/dottedline.gif" border="0" style="display: block;" width="578" height="10"></td>

                </tr>
                <tr>
                    <td rowspan="2"><a href="http://store.#.com/#-racing-2012-t-shirt-p1822.aspx"><img src="imgs/1.jpg" alt="shirt" width="220" height="166" style="border-width:3; border-color:#ffc425; border-style:solid;"></a></td>
                    <td valign="top" style="color:#333795; font-weight: bold;font-size:16px;">Sub Heading 1b</td>    
                </tr>
                <tr>
                    <td valign="top">Body Text 1 - Ex, Celebrate our 3-car assault with this comfortable, distinctive, and and classy T-shirt...<br /><br />
                    <a href="http://store.#.com/#-racing-2012-t-shirt-p1822.aspx"><strong>READ MORE 1b</strong></a> *|FACEBOOK:LIKE:http://store.#.com.aspx|*
                    </td>
                </tr>
                <tr height="5">
                    <td height="5"></td>
                    <td height="5"></td>
                </tr>
                <tr>    
                    <td rowspan="2"><a href="http://store.#.com/#-v2-stainless-steel-brake-line-kits-p1529.aspx"><img src="imgs/2.jpg" alt="brake lines" width="220" height="166" style="border-width:3; border-color:#ffc425; border-style:solid;"></a></td>
                    <td valign="top" style="color:#333795; font-weight: bold;font-size:16px;">Sub Heading 2c</td>

                </tr>
                <tr>
                    <td valign="top">Body Text 2 - Ex. As in any performance application, replacing squishy rubber parts with a performance piece will increase response...<br /><br />
                    <a href="http://store.#.com/#-v2-stainless-steel-brake-line-kits-p1529.aspx"><strong>READ MORE 2c</strong></a> *|FACEBOOK:LIKE:http://store.#.com.aspx|*
                    </td>
                </tr>
                <tr height="10">
                    <td height="10"></td>
                    <td height="10"></td>
                </tr>

                <tr>
                    <td width="588" colspan="2" style="color:#3F3F3D; font-weight: bold;font-size:18px; border-left: #FFC325; border-left-style:solid; border-left-width: 4px;" valign="top">&nbsp;&nbsp;Heading 3</td>

                </tr>
                <tr height="5">
                    <td height="5"></td>
                    <td height="5"></td>
                </tr> 
                <tr height="10">
                    <td height="10" colspan="2"><img src="imgs/dottedline.gif" border="0" style="display: block;" width="578" height="10"></td>

                </tr>
                <tr>
                    <td rowspan="2"><a href="http://store.#.com/#-racing-2012-t-shirt-p1822.aspx"><img src="imgs/1.jpg" alt="shirt" width="220" height="166" style="border-width:3; border-color:#ffc425; border-style:solid;"></a></td>
                    <td valign="top" style="color:#333795; font-weight: bold;font-size:16px;">Sub Heading 1d</td>    
                </tr>
                <tr>
                    <td valign="top">Body Text 1 - Ex. Get a sneak peek at our new # Racing website. Jam-packed with all the media...<br /><br />
                    <a href="http://www.#.com/"><strong>READ MORE 1d</strong></a>*|FACEBOOK:LIKE:http://www.#.com|* </td>
                </tr>
                <tr height="5">
                    <td height="5"></td>
                    <td height="5"></td>
                </tr>
                <tr>    
                    <td rowspan="2"><a href="http://store.#.com/#-v2-stainless-steel-brake-line-kits-p1529.aspx"><img src="imgs/2.jpg" alt="brake lines" width="220" height="166" style="border-width:3; border-color:#ffc425; border-style:solid;"></a></td>
                    <td valign="top" style="color:#333795; font-weight: bold;font-size:16px;">Sub Heading 2e</td>

                </tr>
                <tr>
                    <td valign="top"> Body Text 2 - Ex. Grassroots features James Clay's ultimate wagon, a '95 M50 turbo hauler.  said "The car...<br /><br />
                    <a href="http://grassrootsmotorsports.com/articles/war-wagons/"><strong>READ MORE 2e</strong></a>*|FACEBOOK:LIKE:http://#.com/articles/war-wagons/|*
                    </td>
                </tr>
                <tr height="10">
                    <td height="10"></td>
                    <td height="10"></td>
                </tr>
            </table>  
        </td>
    </tr>  

    <tr>
        <td width="588"><a href="http://www.#.com/sponsor.html"><img src="imgs/sponsors12.jpg" width="588" height="440" border="0" style="display: block;"></a>
        </td>
    </tr>  
    <tr>
        <td width="588">

        <table style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif;font-size:11px;color:#656565;" align="center" border="0" cellpadding="0" cellspacing="0" width="588">
            <tr>
                            <td><a href="http://www.#.com/"><img src="imgs/racing_menu_racing.gif" alt="# Racing" width="85" height="18" border="0" style="display: block;"></a></td>
                            <td><a href="http://www.#.com/news.html"><img src="imgs/racing_menu_news.gif" alt="# Racing News" width="64" height="18" border="0" style="display: block;"></a></td>
                            <td><a href="http://www.#.com/events.html"><img src="imgs/racing_menu_events.gif" alt="Media" width="76" height="18" border="0" style="display: block;"></a></td>
                            <td><a href="http://www.#.com/cars.html"><img src="imgs/racing_menu_cars.gif" alt="Team Gear" width="58" height="18" border="0" style="display: block;"></a></td>
                            <td><a href="http://www.#.com/drivers.html"><img src="imgs/racing_menu_drivers.gif" alt="#.com" width="82" height="18" border="0" style="display: block;"></a></td>
                            <td><a href="http://www.#.com/media.html"><img src="imgs/racing_menu_media.gif" alt="#.com" width="66" height="18" border="0" style="display: block;"></a></td>
                            <td><a href="http://#.com/"><img src="imgs/racing_menu_bwcom.gif" alt="#.com" width="157" height="18" border="0" style="display: block;"></a></td>
                        </tr>
            <tr>
                <td colspan="7">&nbsp;</td>
            </tr>
            <tr>
                <td colspan="7" style="font-size:10px;text-align:center;"><p>&copy; 2012 <a href="http://www.#.com/"><font color="#333795">#</font></a> | | <a href="mailto:info@#.com"><font color="#333795"><u>info@#.com</u></font></a></p></td>
            </tr>
            <tr>
                <td colspan="7" style="font-size:10px;text-align:center;">If you are no longer interested click <a href="*|UNSUB|*">HERE</a>. Click <a href="*|ARCHIVE|*">HERE</a> to view this email in your browser.</td>
            </tr>
        </table>

        </td>
    </tr>
</tbody>
</table>
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-18T17:57:40.713

它通常在图像标签下发生在我身上。添加“显示：块；” 到图像，这应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:44:40.457

我实际上只是修复了一个类似的错误，但涉及段落标签，尽管该错误也出现在 Opera 中。

我的猜测是这些表格从 Gmail 的默认样式中继承了额外的空间。查看元素检查器（我最喜欢歌剧的蜻蜓），看看是否有任何东西似乎继承了奇怪的属性，比如继承的 1 em 或继承的 2 px。如果您看到这种情况发生，您将不得不使用内联属性覆盖它。请记住，受影响的元素可能并不明显，因为我必须为段落标签设置 margin-top 和 margin-bottom，因为 Opera 的检查元素出现了继承问题，而 Chrome 仅显示表格继承了单元格间距，即使我的表格有就像您一样，单元格间距设置为 0。

希望对某人有所帮助

# python - python脚本临时文件中的Vim编辑器

> ID：10103359
> 
> 赞同：5
> 
> 时间：2012-04-11T09:34:46.000
> 
> 标签：python, file, vim, temporary-files

我已经成功地找到了生成 vim 编辑器并从 python 脚本创建临时文件的代码。代码在这里，我在这里找到了：[call up an EDITOR (vim) from a python script](https://stackoverflow.com/questions/6309587/call-up-an-editor-vim-from-a-python-script)

```
import sys, tempfile, os
from subprocess import call

EDITOR = os.environ.get('EDITOR','vim') 

initial_message = "" 

with tempfile.NamedTemporaryFile(suffix=".tmp") as tempfile:
  tempfile.write(initial_message)
  tempfile.flush()
  call([EDITOR, tempfile.name]) 
```

我遇到的问题是退出编辑器后无法访问临时文件的内容。

```
tempfile
<closed file '<fdopen>', mode 'w+b' at 0x87c47b0>

tempfile.readline() 
```

我明白了

```
ValueError: I/O operation on closed file 
```

我做了：

```
myfile = open(tempfile.name)
IOError: [Errno 2] No such file or directory: '/tmp/tmp7VKzfl.tmp' 
```

使用编辑器编辑文件后，如何在 python 脚本中访问该文件？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T09:38:35.900

块内的所有内容都是`with`有范围的。如果使用`with`语句创建临时文件，则在块结束后它将不可用。

您需要读取`with`块内的临时文件内容，或使用另一种语法来创建临时文件，例如：

```
tempfile = NamedTemporaryFile(suffix=".tmp")
# do stuff
tempfile.close() 
```

如果您确实想在块之后自动关闭文件，但仍然能够重新打开它，请传递`delete=False`给`NamedTemporaryFile`构造函数（否则它将在关闭后被删除）：

```
with tempfile.NamedTemporaryFile(suffix=".tmp", delete=False) as tempfile: 
```

顺便说一句，您可能想使用[特使](https://github.com/kennethreitz/envoy)来运行子进程，不错的库:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-07T15:03:56.640

我遇到了同样的问题并且有同样的问题。

只是不删除临时文件以便读取它，这感觉不是最佳实践。我找到了以下方法来读取 vim 编辑后写入 NamedTempFile 实例的内容，读取它，并保留删除临时文件的优势。（如果不是自己删掉就不是暂时的吧？！）

必须倒回临时文件然后读取它。我在以下位置找到了答案： http: [//pymotw.com/2/tempfile/](http://pymotw.com/2/tempfile/)

```
import os
import tempfile
from subprocess import call

temp = tempfile.TemporaryFile()
try:
    temp.write('Some data')
    temp.seek(0)

    print temp.read()
finally:
    temp.close() 
```

这是我在脚本中使用的实际代码： import tempfile import os from subprocess import call

```
EDITOR = os.environ.get('EDITOR', 'vim')
initial_message = "Please edit the file:"

with tempfile.NamedTemporaryFile(suffix=".tmp") as tmp:
    tmp.write(initial_message)
    tmp.flush()
    call([EDITOR, tmp.name])
    #file editing in vim happens here
    #file saved, vim closes
    #do the parsing with `tempfile` using regular File operations
    tmp.seek(0)
    print tmp.read() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T09:42:53.917

`NamedTemporaryFile`创建一个文件，该文件在关闭后被删除（[docs](http://docs.python.org/library/tempfile.html#tempfile.TemporaryFile)）。因此，它不适合当您需要向临时文件写入内容并在文件关闭后读取内容时。

改为使用`mkstemp`（[文档](http://docs.python.org/library/tempfile.html#tempfile.mkstemp)）：

```
f, fname = mkstemp(suffix=".tmp")
f.write("...")
f.close()
call([EDITOR, fname]) 
```

# jquery - 在jQuery中的每个函数之外使用变量值

> ID：10103360
> 
> 赞同：-1
> 
> 时间：2012-04-11T09:34:48.023
> 
> 标签：jquery, function, each

```
jQuery('ol.productList li.product input[name*="cart.pAsin."]').load().each(function(){   // each function 
    var asinId = jQuery(this).val();
    var pUrl    = jQuery(this).siblings("a").attr('href');
    var imgPath = jQuery(this).siblings("a").children('img').attr('src');
    var productTitle = jQuery(this).siblings("div.productDetails").children('h4.title').text();
    var descUrl = '/api/product/asin/' + asinId;
    var productDesc = '';
        jQuery.getJSON(descUrl, function(data) {
            var attr = data.attributes[1];
            productDesc = attr.productDescription;
            var allinfo = [];
            allinfo.push(asinId,productTitle,productDesc,pUrl,imgPath);
            alert(allinfo[0]);

        });
    });

alert('Asin id :'+ asinId + ' Product Url : '+ pUrl + ' Image Path : ' +imgPath + ' Product Titl : '+productTitle+ ' Product Discription : ' +productDesc ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:41:55.920

您无法访问`asinId`,等，因为它们是在您传递给方法`pUrl`的匿名函数范围内定义的。`each()`

更令人困惑的`productDesc`是，即使您尝试在所述匿名中访问它，并且是异步的，也可能不是您要查找的值`function`，这意味着调用后的值不能保证在处理程序完成后分配。`getJSON``AJAX``productDesc``.getJSON``.getJSON`

您可以在方法之外定义 asinId 等`each()`，然后它将在 anon 函数范围之外可用：

```
var asinId = jQuery(this).val();
var pUrl    = jQuery(this).siblings("a").attr('href');
var imgPath = jQuery(this).siblings("a").children('img').attr('src');
var productTitle = jQuery(this).siblings("div.productDetails").children('h4.title').text();
var descUrl = '/api/product/asin/' + asinId;
var productDesc = '';

jQuery('ol.productList li.product input[name*="cart.pAsin."]').load().each(function(){   // each function 
   asinId = jQuery(this).val(); // notice this is without var keyword
   // rest of your code
});

alert('Asin id :'+ asinId + ' Product Url : '+ pUrl + ' Image Path : ' +imgPath + ' Product Titl : '+productTitle+ ' Product Discription : ' +productDesc ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:57:50.390

只需在 each() 的匿名函数范围之外定义它们，如下所示：

```
var asinId = null;
var pUrl = null;
...
jQuery('ol.productList li.product input[name*="cart.pAsin."]').load().each(function(){   // each function 
    asinId = jQuery(this).val();
    pUrl    = jQuery(this).siblings("a").attr('href');
... 
```

您现在可以从外部访问它们，因为它们现在属于全局范围。

# sencha-touch-2 - 如何在 SenchaTouch2 上隐藏 urlbar

> ID：10103369
> 
> 赞同：2
> 
> 时间：2012-04-11T09:35:13.093
> 
> 标签：sencha-touch-2

Javascript函数

```
window.scrollTo(0,1); 
```

好像对 SenchaTouch2 没有任何影响 不知道在哪里但是可能被库屏蔽了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:32:08.103

基本上，您的 Sencha Touch 应用程序最外面的组件会占用您设备屏幕的所有可用空间（宽度和高度）。滚动实际上意味着在您的**元素**中向上和向下滚动，而不是在窗口中。

这就是为什么`window.scrollTo(x,y)`没有被阻止但没有可见的效果。

# php - 想知道 date() 是如何工作的

> ID：10103372
> 
> 赞同：0
> 
> 时间：2012-04-11T09:35:22.423
> 
> 标签：php

嗨，我正在尝试一段代码，其中我需要确切的时间。

```
<?php

date_default_timezone_set('Asia/Kolkata');
echo date("y:d:m:H:i:s");

?> 
```

`12:11:04:12:31:24`它显示为比确切时间晚近 2:30 小时的 o/p 。我在孟买，我想要确切的当前时间。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:59:37.937

正如上面的 RayMoonDay 所说：

> 尝试
> 
> date_default_timezone_set('亚洲/加尔各答');
> 
> 检查[php.net/manual/en/timezones.asia.php](http://php.net/manual/en/timezones.asia.php)

我没有测试它 - 我只是把它放在答案的形式。如果 RayMoonDay 将此作为答案发布，我将对其进行编辑以删除该信息。

但是，我不得不建议您不要使用`date()`并熟悉该`DateTime`课程。`date()`可能适合您的应用程序。但它有一些已知问题，尤其是未来日期。

日期时间：http: [//php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

```
date_default_timezone_set('Asia/Calcutta');

$d = new DateTime();
echo $d->format("y:d:m:H:i:s"); 
```

# ios - 在 UITabBar 视图之间“滑动”segue

> ID：10103376
> 
> 赞同：2
> 
> 时间：2012-04-11T09:35:30.880
> 
> 标签：ios, ios5, uitabbarcontroller, uistoryboard

我的 iOS 5 应用程序使用带有`UITabBarController`. 有三个“选项卡”，每个选项卡都显示一个视图控制器，该控制器已使用关系链接回`UITabBarController`. 正如预期的那样，当您点击相关选项卡时，每个视图控制器都会出现。然而，为了更优雅的过渡，我想在屏幕上和屏幕外滑动视图控制器。

例如，如果我当前在 Tab 0 上然后选择 Tab 1，则屏幕上的视图控制器（对于 Tab 0）应该滑到屏幕的左侧，并且新的视图控制器（对于 Tab 1）应该从屏幕的右侧滑动。

我已经能够使用自定义`UIView`作为标签栏来实现这种行为，但想知道这是否可以通过故事板中的自定义 segue 实现，因为这肯定会节省大量编码（并且也会让事情变得更加整洁在项目中）？

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:25:07.477

我正在尝试做同样的事情。

不幸的是，我认为关系 segue 不允许任何自定义，因为它只是将标签栏和标签栏项目连接在一起，而不是过渡。

我的猜测是当视图出现时我们必须自己进行转换。

# jquery - jquery mouseleave ajax请求

> ID：10103380
> 
> 赞同：0
> 
> 时间：2012-04-11T09:35:41.847
> 
> 标签：jquery, ajax

我想知道是否可以从 mouseleave 函数触发 ajax 请求？我希望在鼠标离开时发送字符串“Y”，`li`以便可以在数据库中更新它。

这有可能吗？

```
(function(){
  $('li#myId').mouseenter(function(){
    var y = 'Y';
  }).mouseleave(function(){

    $.ajax({
      type: 'POST',
      url: 'update.php',
      data: 'y='+y,
      success: function(response){
        $('li.#myId').html(response);
      }

    });
  }); 
```

})();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:42:59.227

当然，只是存储`y`为数据。

```
(function(){
    var postY = function (y) {
        $.ajax({
          type: 'POST',
          url: 'update.php',
          data: 'y='+y,
          success: function(response){
              $('#myId').html(response);
          }
        });
    };

    // li#myId using both a tag and id is unnecessary since id is unique
    $('#myId').mouseenter(function(e){
        $(this).data('y', 'Y');
    }).mouseleave(function(e){
        postY($(this).data('y'));
    });
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:43:25.057

如果您在函数内声明“y”变量，它将仅适用于该函数。您应该在 $(document).ready 函数之后声明它并在事件中更改它。当 mouseleave 事件被触发时，你可以通过 ajax 发送它。

```
$(document).ready(function(){
  var y = 'Y'
  $('li#myId').mouseenter(function(){
     // whatever you want to do here with "y"
  });

  $('li#myId').mouseleave(function(){
     // ajax
  });
}); 
```

# android - android 应用程序切换到新屏幕时 GPS 连接丢失

> ID：10103383
> 
> 赞同：1
> 
> 时间：2012-04-11T09:35:49.853
> 
> 标签：android, gps

我正在开发一个处理谷歌地图和 GPS 的安卓应用程序。它是一个显示地图的接近警报应用程序，接受用户的触摸并为该位置设置警报。我添加了一个 EditText 来接受用户希望收到通知的距离有多远。但无论用户输入什么，该应用程序都将该值视为 2 公里。是因为它使用手机信号塔信息而不是 GPS 吗？如果有任何教程可以帮助我开发应用程序，请分享。当用户在地图上选择一个位置时，将显示一个新屏幕，让用户输入通知距离。但是当应用程序从地图屏幕转到用户输入屏幕时，GPS 图标会消失。可能是什么问题呢？这是处理设置警报的部分。

```
 mSetAlarm.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // Get the distance from the shared preferences
            SharedPreferences preferences = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext());

            String distanceStr = preferences.getString("distance", "0");
            double distance = Double.parseDouble(distanceStr);

            LocationManager locationManager = (LocationManager) getBaseContext()
                .getSystemService(Context.LOCATION_SERVICE);

            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
            Intent intent = new Intent(LocationInfoActivity.this,
                MyBroadcastReceiver.class);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(
                getBaseContext().getApplicationContext(), 234324243,
                intent, PendingIntent.FLAG_UPDATE_CURRENT);

            MyLocationListener locationListener = new MyLocationListener(
                locationManager, preferences, alarmManager,
                pendingIntent);

            if (distance < Double.parseDouble(i)) {
                alarmManager.set(AlarmManager.RTC_WAKEUP, System
                        .currentTimeMillis(), pendingIntent);
                locationManager.removeUpdates(locationListener);
            } else if (distance < 4.0) {
                WakeMeUtill.requestLocationUpdates(locationManager, 0, 0,
                        locationListener);
            } else {
                double quaterDistance = (distance * 3) / 4;
                WakeMeUtill.requestLocationUpdates(locationManager, 0,
                        (float) quaterDistance * 1000, locationListener);
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:46:14.567

可能在您的代码中，您在 onPause() 方法中编写了这一行

```
onPause()
{
   gpsLocationManager.removeupdates() 
} 
```

请检查您的代码。

如果这不是问题，请分享更多细节。

# grails - 在控制器中使用 g 标签

> ID：10103384
> 
> 赞同：0
> 
> 时间：2012-04-11T09:36:03.330
> 
> 标签：grails, filter, tags

我在过滤器中使用以下语句

> 如果（g.cookie（名称：'abc'））

它提示错误：*

> groovy.lang.MissingPropertyException: No such property: g for class: com.AFilters 可能的解决方案： 登录 com.AFilters$_closure1_closure4_closure10.doCall(AFilters.groovy:77) at java.lang.Thread.run(Thread.java:679 )

*

我是否必须导入一些类才能使用该语句？我在控制器中使用了它，它没有产生任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:50:38.703

您必须注入`grailsApplication`并获取相应的bean。

请参阅[我可以在 GSP 之外使用 grails 标记吗？](https://stackoverflow.com/a/5516040/1230366)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:57:30.560

你可以随时注入 grailsApplication 等。

但是对于目前的情况，我没有看到任何使用 taglib 的理由，因为控制器可以访问请求和 cookie。尝试：

```
if (request.cookies.find { it.name == 'abc' }) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:02:25.427

在控制器中，您应该能够直接使用 tagLib 代码，而无需使用`.g`前缀。

```
if(cookie(name:'abc')) 
```

# sql - 获取oracle中的记录数

> ID：10103387
> 
> 赞同：2
> 
> 时间：2012-04-11T09:36:06.840
> 
> 标签：sql, oracle

我正在尝试使用 Count(*) 以及我的查询条件
Sample Table is
Table: STUD_NAME 获取 表中的记录数

```
标识名称  
1史蒂文  
2 史密斯  
2 本  
1 威利

```

我的查询是

```
 select std.name 
 from STUD_Name where id='2' 
```

为此，它会将输出显示为“Smith”和“Ben”，同时我需要 STUD_NAME 表中的记录总数。

右边应该显示总记录为“4”，请帮我解决这个问题以及在这种情况下如何形成查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:42:37.277

```
SELECT name, 
       cnt as total_count
FROM (
    SELECT id
           name,
           count(*) over () as cnt
    FROM stud_name
) t
WHERE id = 2 
```

假设这是一个数字列，则不需要`id`值周围的单引号（并且由于在后台发生的隐式数据类型转换实际上是有害的）`2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:41:44.807

关于什么：

```
select 
       std.name 
      ,(select count(1) from STUD_Name) nrofstds  
from   STUD_Name std where std.id='2' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:45:43.043

```
select STUD_NAME.name, CNT.count
from STUD_NAME
   , (select count(*) COUNT from STUD_NAME) CNT
where id='2' 
```

# zend-framework - Zend_Navigation - 导航菜单生成不适当的导航链接

> ID：10103390
> 
> 赞同：0
> 
> 时间：2012-04-11T09:36:18.523
> 
> 标签：zend-framework, zend-navigation

我有问题使用`Zend_Navigation`这里是我的`navigation.xml`文件

```
<?xml version="1.0" encoding="UTF-8"?>
<configdata>
    <admin>
        <dashboard>
            <label>Dashboard</label>
            <module>admin</module>
            <controller>dashboard</controller>
            <action>index</action>
        </dashboard>
    </admin>
</configdata> 
```

这是我的引导方法。

```
public function _initNavigation()
{
    $this->bootstrap('layout');
    $layout = $this->getResource('layout');
    $view = $layout->getView();
    $config = new Zend_Config_Xml(APPLICATION_PATH.'/configs/navigation.xml', 'admin');
    $navigation = new Zend_Navigation($config);
    $view->navigation($navigation);
} 
```

我的管理布局`admin.phtml`包含

```
<?php echo $this->navigation()->menu(); ?> 
```

问题是导航菜单仪表板会随着当前的`module/controller/action`

例如。

```
if:
current page: admin/dashboard/index
generates `<a href="/admin/dashboard">Dashboard</a>`

if:
current page: admin/item/index
generates `<a href="/admin/item">Dashboard</a>` 
```

而第二个我希望网址不会改变。第二种方法应该生成

```
current page: admin/item/index
generates `<a href="/admin/dashboard">Dashboard</a>` 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:19:09.487

您是否定义了多条路线？如果是这样，`<route>`请向您`<dashboard>`的 navigation.xml 文件部分添加一个具有正确路由名称的键。

# tsql - 在 sql server 2008 中拆分列

> ID：10103391
> 
> 赞同：0
> 
> 时间：2012-04-11T09:36:18.467
> 
> 标签：tsql, sql-server-2008-r2

我有一张桌子：

```
servername  description                                                                    ObjectState
VM1 SP LA -  W IN  S V R S #P19 99 9999 999999 999  QTY 1                     0
VM2 S PL A - V R STD #P29-9 9 99 QTY 2 : SPLVRENT #P3 999999 9 QTY 3    1
VM3 S PL A - WI NS V R S TD #P39-9 999 QTY 3    0
VM4 SPLA - WI NS V R STD #P59- 9 9 99 QTY 2 : S P LA - W IN SV RENT #P39-9999 QTY 3 :      SPL A - WIN S VR SMB # P 3 9- 999 99 QTY 5   1
VM6 SPLA - W I NS VRSQ LSE R VE RS TD #P 6 9-9 9 9 9 QTY 6  0
VM5 SPLA - W IN S VRS TD #P59-9999 QTY 5 : SPLA - SQLSERVER-08 #P59-9999 QTY 5  0
VM7 SPLA - W I NSV R ST D #P79-9999 QTY 6   0
VM8 SPLA - W INS VR STD #P8 9-9 9 99 QTY 1  1 
```

我写了这样的查询

拆分描述列，如

```
SELECT
    T.servername,
    A.x.value('(/e/text())[1]', 'varchar(MAX)') [description],
    A.x.value('(/e/text())[2]', 'varchar(25)') [ponumber],
    A.x.value('(/e/text())[3]', 'varchar(2)') [qty],
    A.x.value('(/e/text())[4]', 'char(1)') [ObjectState]
FROM
    T1 AS T
    CROSS APPLY
    (SELECT T.[description] AS [text()] FOR XML PATH('')) AS R(s)
    CROSS APPLY
    (SELECT T.[ObjectState] as [text()] FOR XML PATH('')) AS B(t)
    CROSS APPLY
    (SELECT CAST('<e>' + REPLACE(R.s,':', '</e><e>') + '</e>' AS xml)) AS S(x)
    CROSS APPLY
    S.x.nodes('/e') AS N1(e)
    CROSS APPLY
    (SELECT CAST('<e>' + REPLACE(REPLACE(N1.e.value('text()[1]','varchar(MAX)'), '#', '</e><e>'), 'QTY', '</e><e>') + '</e>' AS xml)) AS A(x) 
```

我得到这样的输出

```
servername description           ponumber                  qty      ObjectStat             
VM1   SP LA -  W IN  S V R S    P19 99 9999 999999 999    1       NULL
VM2   S PL A - V R STD  P29-9 9 99          2                                                                NULL
VM2   SPLVRENT           P3 999999 9            3                                                                NULL 
```

我想要列 Objectstate 中的输出

```
vm1 SP LA -  W IN  S V R S P19 99 9999 999999 999 1   0
vm2 S PL A - V R STD       P29-9 9 99             2   1
vm2  SPLVRENT              P3 999999 9            3   1 
```

像这样 - 我将如何修改上面的代码以获得我需要的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:55:05.643

在您的查询中，它看起来像是`ObjectState`一个自己的字段。所以...

```
SELECT
    T.servername,
    A.x.value('(/e/text())[1]', 'varchar(MAX)') [description],
    A.x.value('(/e/text())[2]', 'varchar(25)') [ponumber],
    A.x.value('(/e/text())[3]', 'varchar(2)') [qty],
    T.ObjectState
FROM
    @T AS T
    CROSS APPLY
    (SELECT T.[description] AS [text()] FOR XML PATH('')) AS R(s)
    CROSS APPLY
    (SELECT CAST('<e>' + REPLACE(R.s,':', '</e><e>') + '</e>' AS xml)) AS S(x)
    CROSS APPLY
    S.x.nodes('/e') AS N1(e)
    CROSS APPLY
    (SELECT CAST('<e>' + REPLACE(REPLACE(N1.e.value('text()[1]','varchar(MAX)'), '#', '</e><e>'), 'QTY', '</e><e>') + '</e>' AS xml)) AS A(x) 
```

# java - SHA256Digest 返回一个奇怪的哈希

> ID：10103394
> 
> 赞同：0
> 
> 时间：2012-04-11T09:36:26.947
> 
> 标签：java, blackberry, sha256

在**BlackBerry**应用程序中，我使用此代码从密码中获取哈希：

```
 SHA256Digest sha256d = new SHA256Digest();
        byte[] passwordData = null;

        try {
            passwordData = password.getBytes("UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }

        DigestOutputStream outputStream = new DigestOutputStream(sha256d, null);
        try {
            outputStream.write(passwordData);
        } catch (IOException e) {
            e.printStackTrace();
        }

        byte[] hashedValue = sha256d.getDigest();
        tempSHA256Password = new String(hashedValue);
        System.out.println(tempSHA256Password); 
```

在这个代码块的末尾，`tempSHA256Password`将会是这样的：`ëÇ#ÎiGê8óq =ßÝ÷<rê¨_FR»ã`......所以绝不是我所期待的。我期待一个看起来像这样的字符串：`ebc723ce6947ea38f371a03d0cdfddf73c840f7215eaa85f031446529bbb16e3`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T09:41:49.237

尝试`tempSHA256Password = new String(hashedValue);` 以下代码：

```
StringBuffer buffer = new StringBuffer();
for(byte b : hashedValue)
{
    buffer.append(String.format("%02x",b<0 ? b+256 : b));
}
tempSHA256Password = buffer.toString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T09:38:44.750

这就是问题：

```
tempSHA256Password = new String(hashedValue); 
```

它试图从任意二进制数据创建一个字符串，就好像它是使用平台默认编码的文本编码一样。听起来您正在寻找十六进制。Java 中有许多不同的十六进制编码实用程序库——例如，您可能想查看[Apache Commons Codec](http://commons.apache.org/codec/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T09:40:39.693

您不能直接打印二进制值：

```
tempSHA256Password = new String(hashedValue);
System.out.println(tempSHA256Password); 
```

因此，如果要将其转换为十六进制，可以使用此方法：

```
static final String HEXES = "0123456789ABCDEF";
public static String getHex( byte [] raw ) {
  if ( raw == null ) {
    return null;
  }
  final StringBuffer hex = new StringBuffer( 2 * raw.length );
  for ( final byte b : raw ) {
    hex.append(HEXES.charAt((b & 0xF0) >> 4))
     .append(HEXES.charAt((b & 0x0F)));
  }
  return hex.toString();
} 
```

这个方法来自[这里](http://www.rgagnon.com/javadetails/java-0596.html)，如果你有兴趣，你还有其他的例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T09:38:31.303

你看到的是哈希的二进制形式。您必须将其转换为十六进制。

# sql - 这个数字是什么意思？在与远程数据库的 sqldbx 连接中

> ID：10103410
> 
> 赞同：1
> 
> 时间：2012-04-11T09:37:19.903
> 
> 标签：sql, sql-server

![在此处输入图像描述](../Images/17db156e2de3414a40b2d3632f98c401.png)

请告诉我每次连接到我的数据库时 sqldbx 标题栏上显示的这个数字是什么，这会随着连接而改变

但它显示`(58)`每次我每次连接到本地数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:00:43.570

这是 SPID

@@SPID 可用于在 sp_who 的输出中标识当前用户进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:36:17.650

它的蜘蛛。此 id 由服务器控制，用于连接由 sp_who 检查

# ldap - 阻止不需要的 LDAP 用户与 Jira 同步

> ID：10103413
> 
> 赞同：0
> 
> 时间：2012-04-11T09:37:25.497
> 
> 标签：ldap, jira

我想阻止一组特定用户与 Jira 同步，即基于**gidNumber**和**AccountType**等 LDAP 字段值。我可以将这些特定用户排除在与 Jira 同步之外吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:02:04.300

谢谢马特！最后，我想出了根据**gidNumber**和**AccounType**限制某些 LDAP 用户。

在 UserObjectFilter 中使用以下查询对我有用-

```
(&(&(objectclass=person)(!(XYZgidnumber=2500)))(!(XYZAccountType=80))) 
```

# ios - 为什么应用程序升级时保存在应用程序文档目录中的图像（png 格式）会被删除，而其他 db 文件在 iOS 设备上保持不变？

> ID：10103415
> 
> 赞同：1
> 
> 时间：2012-04-11T09:37:32.150
> 
> 标签：ios

我将应用程序的横幅（png 图像）保存在应用程序的 Document 目录中，该目录在将应用程序升级到下一个版本时被删除，根据 Apple 指南，它应该保持不变。谁能说出为什么会这样？
每个文件或所有文件的数据大小是否有限制，所有横幅的总大小为500MB？

# facebook - Facebook 应用中的历史推送状态

> ID：10103417
> 
> 赞同：1
> 
> 时间：2012-04-11T09:37:35.183
> 
> 标签：facebook, sandbox, browser-history, history.js

我在我的网络应用程序中使用 History.js 进行历史管理。当应用程序直接在我的网站上使用时，所有现代浏览器都运行良好。当从 Facebook 框架（作为 Facebook 应用程序）加载应用程序时，除 IE9 之外的所有这些浏览器也可以正常工作。对于 IE9，pushstate 方法似乎无法将状态添加到历史记录中。我想这与 Facebook 沙盒应用有关。由于 IE9 本身不支持 HTML5 历史记录方法，因此它使用 URL 主题标签。是否有任何特殊原因导致这在 Facebook 应用程序中不起作用。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:27:44.293

IE9 不支持 PushState。看看这个[http://www.quora.com/Does-Internet-Explorer-9-support-pushState](http://www.quora.com/Does-Internet-Explorer-9-support-pushState)

# android - 连接外部数据库

> ID：10103419
> 
> 赞同：-2
> 
> 时间：2012-04-11T09:37:40.353
> 
> 标签：android

有人告诉我如何在 android 中构建一个应用程序，以便我们在 android 中输入值，但该值应该存储在 mysql 等外部数据库中。我是新手，所以任何人都可以为此提供完整的编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:43:40.233

通过 Web API（搜索 RESTful）公开您的数据库并通过 HTTP 访问它，或者使用 JDBC 直接访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:21:46.430

无法直接通过android使用外部数据库。可以使用Web服务或Java服务器应用程序（意味着servlet）

我们可以将值从 android 发送到 servlet，然后使用 servlet 我们可以根据您的要求插入数据或检索数据

请按照上面的方式进行搜索，绝对可以满足您的要求...

问候库马尔拉贾

# jquery - jquery prettyPhoto 冲突

> ID：10103421
> 
> 赞同：0
> 
> 时间：2012-04-11T09:37:50.817
> 
> 标签：jquery, jquery-ui, prettyphoto

如果我没有用正确的术语解释这一点，我会提前道歉，我主要是在学习 C# 知识。我有 3 组 jQuery 代码 prettyPhoto、Nivo Image 滑块和 jQuery UI 选项卡。我对同一页面上的图像和视频都使用了 prettyPhoto。

我的 Nivo Image Slider 和我的 UI 选项卡都可以正常工作，但我一辈子都无法让 prettyPhoto 正常工作。我搜索了论坛等，并尝试过，

1）这可能是因为我使用了多个库，因此我转而只使用 jquery 库（我现在所在的位置）。

2）我也尝试过使用 jquery.noConflict(); 以几种不同的方式编码，但没有运气。

目前我认为这可能是由于使用了多个版本的 jquery，但老实说，我对如何解决它有点过头了。我的代码如下，

在我的主页 Master 的 head 标签中，

```
<%--PretyBox (media viewer)--%>
<script src="Scripts/jquery-1.6.1.min.js" type="text/javascript"></script>
<script type="text/javascript">var $jq161 = jQuery.noConflict();</script>
<link href="Styles/prettyPhoto.css" rel="stylesheet" type="text/css" media="screen" />
<script src="Scripts/jquery.prettyPhoto.js" type="text/javascript"></script>

<script type="text/javascript">
    $jq161(document).ready(function () {
        $("a[rel^='prettyPhoto']").prettyPhoto(); // Select all links that contain prettyPhoto in the attribute rel
        //$('a.prettyPhoto').prettyPhoto(); // Select all links with prettyPhoto class
        //$('a').prettyPhoto(); // Select all links in the page
        //$('#gallerythumbnails a').prettyPhoto(); // Select all links in object with gallery ID
        //$('#gallerythumbnails a').width(400);
    });
</script>

<%--Nivo Image Slider--%>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">var $jq142 = jQuery.noConflict();</script>
<link href="Styles/nivo-slider.css" rel="stylesheet" type="text/css" media="screen" />
<script src="Scripts/jquery.nivo.slider.pack.js" type="text/javascript"></script>

<script type="text/javascript">
    $jq142(window).load(function () {
        $('#slider').nivoSlider({
            pauseTime: 6000, // How long each slide will show
            directionNav: false, // Next & Prev navigation
            controlNav: false, // 1,2,3... navigation
            effect: 'fold' // Specify sets like: 'fold,fade,sliceDown'
        });
    });
</script> 
```

我的 Content Master 页面的 head 标签中的代码，

```
 <%--PretyPhoto (media viewer)--%>
    <script src="Scripts/jquery-1.6.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">var $jq161 = jQuery.noConflict();</script>
    <link href="Styles/prettyPhoto.css" rel="stylesheet" type="text/css" media="screen" />
    <script src="Scripts/jquery.prettyPhoto.js" type="text/javascript"></script>

    <script type="text/javascript">
        $jq161(document).ready(function () {
            $("a[rel^='prettyPhoto']").prettyPhoto(); // Select all links that contain prettyPhoto in the attribute rel
            //$('a.prettyPhoto').prettyPhoto(); // Select all links with prettyPhoto class
            //$('a').prettyPhoto(); // Select all links in the page
            //$('#gallerythumbnails a').prettyPhoto(); // Select all links in object with gallery ID
            //$('#gallerythumbnails a').width(400);
        });
    </script>

    <%--UI Tabs--%>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">var $jq142 = jQuery.noConflict();</script>
    <script src="Scripts/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
    <link href="Styles/jquery-ui-1.8.18.custom.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">
        $jq142(function () {
            $("#tabs").tabs();
            $("#subtabs-1").tabs();
            $("#subtabs-2").tabs();
            $("#subtabs-3").tabs();
            $("#subtabs-4").tabs();

            var $tabs = $('#tabs').tabs();

            $('.to-stonetab').click(function () {
                $tabs.tabs('select', 0);
                return false;
            });

            $('.to-quarrytab').click(function () {
                $tabs.tabs('select', 1);
                return false;
            });

            $('.to-valuetab').click(function () {
                $tabs.tabs('select', 2);
                return false;
            });

            $('.to-faqtab').click(function () {
                $tabs.tabs('select', 3);
                return false;
            });
        });
    </script> 
```

还有一个 HTML 参考的例子，

```
<a href='<%#DataBinder.Eval(Container.DataItem, "PageLink") %>' rel="prettyPhoto">
                            <img src='Images/<%#DataBinder.Eval(Container.DataItem, "Image") %>' alt='<%#DataBinder.Eval(Container.DataItem, "AltTag") %>' />
</a> 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:20:38.140

更新：通过删除 jquery 的多个版本并替换为当前版本 (jquery-1.7.2.min.js) 解决了该问题。

对于那些遇到上述问题并不能解决您的问题的人，请注意我之前使用的是 LightBox 和 VideoBox，因为它们使用了不同的库，所以它们不会一起运行。

我用使用 jquery 的漂亮照片替换了 LightBox 和 VideoBox [（](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)与我使用的其他库相同）。一旦文档中只使用了 1 个库并应用了上述内容，它就可以工作了。

# .net - 配置系统初始化失败，c#，vs2010

> ID：10103427
> 
> 赞同：0
> 
> 时间：2012-04-11T09:38:13.607
> 
> 标签：.net, visual-studio-2010, c#-4.0, app-config

我有一个 WPF 应用程序，我需要使用 app.config 文件。当我尝试通过向我的项目添加一个新的 app.config 然后向文件添加一个 appSettings 来构建一个时，我无法从 app.config 读取定义的键，我总是得到一个空值。然后通过转到我的项目的属性、设置生成 app.config 文件，在那里我定义了我需要在我的应用程序中使用的值，一切正常。但是当我需要将一些值保存到配置文件时，我遇到了问题：当我尝试添加新设置并将其定义为用户范围（用于在应用程序中编辑它）时它不起作用 - 它只是不会t 将值保存在配置文件中。当我在配置文件中手动添加 appSettings 部分并第一次运行应用程序时，它确实保存了值，但下次我想使用这些值时，应用程序抛出异常 - “配置系统无法初始化”。我从写在内部异常中的 c:Users\myuser\AppData\Local\companyName\filename.vshost 路径中删除了一些 .vshost 文件，然后我的应用程序再次工作。

我按照这篇文章中的建议工作 -[读写 app.config 文件](http://www.codeproject.com/Articles/14744/Read-Write-App-Config-File-with-NET-2-0)

但我的问题是如何保存 app.config 中的值以及如何稍后读取它们，互联网上的所有解决方案都不起作用 - 应用程序只是不保存值......我不知道该怎么做...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:22:53.060

我发现一旦使用了 User Scope 变量，尝试删除所有这些变量会导致这种崩溃。在尝试将所有用户范围设置更改为应用程序范围后，我最终放置了一个虚拟用户范围设置来解决此异常。

# javascript - 获取包含特定文本的 div 的数量

> ID：10103429
> 
> 赞同：0
> 
> 时间：2012-04-11T09:38:25.840
> 
> 标签：javascript, html, css

我正在编写一些需要访问包含特定文本的 div 的代码，以下是我正在处理的一小部分代码：

```
var txtElem = txtdiv.getElementsByTagName("div");
txtElem[9].style.border = "2px solid blue"; 
```

如上所示，我正在使用索引号访问特定的 div，但现在我想添加更多代码，这些代码可以从 txtElem 返回我的 div 索引，其中包含页面中选定的文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:44:28.713

您需要遍历 div 并使用 innerHTML 检查内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:49:28.170

试试下面的代码

```
 var txtElem = txtdiv.getElementsByTagName("div");

 for ( var i = 0; i < txtElem.length; i++) {
    if(txtElem[i].innerHTML === "The text in the div") {
       //i is the index of the div that contains the text you searched on
       alert(i);
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:47:01.310

循环遍历 div 并使用[JQuery](http://jquery.com) `.html()`检查 div 元素的 html 内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:48:36.550

为了便于使用，您可能需要使用 jquery，请参阅[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

# mysql - 将7个这样的SQL查询变成单个查询，有可能吗？

> ID：10103431
> 
> 赞同：3
> 
> 时间：2012-04-11T09:38:28.780
> 
> 标签：mysql, sql

我有 7 个 SQL 查询来完成这样的任务：

```
1\. UPDATE Customer SET CustomerService = 'perta' WHERE FirstName = 'john';
2\. UPDATE Customer SET Flag = 1 WHERE OrderNum BETWEEN 2 AND 29;
3\. UPDATE Customer SET PurchaseNum = PurchaseNum + 60 WHERE OrderNum BETWEEN 2 AND 29;
4\. UPDATE Customer SET OrderNum = OrderNum + 60 WHERE OrderNum BETWEEN 2 AND 29;
5\. UPDATE Customer SET PurchaseNum = PurchaseNum - 28 WHERE (PurchaseNum > 29 AND PurchaseNum <= 89) AND (Flag <> 1);
6\. UPDATE Customer SET OrderNum = OrderNum - 28 WHERE (OrderNum > 29 AND OrderNum <= 89) AND (Flag <> 1);
7\. UPDATE Customer SET Flag = 0 WHERE OrderNum BETWEEN 62 AND 89; 
```

是否可以将这些 SQL 查询“压缩”为 1 个查询？

因为我担心用户通过按 ESC 按钮（在他/她按 SUBMIT 按钮后）取消该过程，这些序列会在中间被破坏，我的桌子也会很乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:13:18.413

如果您使用的是 MySQL，请查看此链接，它向您展示了如何在 MySQL 中实现事务。

[http://dev.mysql.com/doc/refman/5.5/en/commit.html](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

事务在许多情况下都可以帮助我们，并且您正在处理其中一个要更新多个数据库表的情况。

# android - 在android中搜索狮身人面像

> ID：10103449
> 
> 赞同：2
> 
> 时间：2012-04-11T09:39:17.943
> 
> 标签：android, sphinx

是否可以在 Android 中创建 Sphinx 搜索？不要与 PocketSphinx 混淆。狮身人面像搜索 - [http://sphinxsearch.com/](http://sphinxsearch.com/)。

如果不可能，有什么替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:30:35.043

理论上应该是可以的。Android 设备只是一个 linux 设备——只要 sphinx 可以针对基于 ARM 的处理器进行编译。

但安装二进制文件几乎肯定需要对设备的 root 访问权限，因此超出了在用户可以从 Market 下载的应用程序中捆绑 sphinx 的范围。

也许像 compass[ [http://compass-project.org/](http://compass-project.org/) ] 这样的东西可以让你嵌入全文搜索。

另一种选择可能只是使用托管解决方案[http://www.houndsleuth.com/](http://www.houndsleuth.com/)

# c++ - 函数体内的 typedef 是一种不好的编程习惯吗？

> ID：10103453
> 
> 赞同：38
> 
> 时间：2012-04-11T09:40:02.487
> 
> 标签：c++, typedef

我有一些类`C`，想将其实例和方法的地址传递给测试函数中的某个仿函数`Test_C_Foo1()`。Functor 是一个模板类，我必须提供类方法 ( `MEMFN1`) 的类型作为其模板参数之一。我必须在`MEMFN1`某处定义类型，但不想更改`C.h`并且不想用它污染全局命名空间。我决定尽可能本地化*typedef*，所以把它放在一个测试函数中——在`MEMFN1`实际使用的范围内。**在函数体内使用 typedef 是一个好习惯吗？**

标准允许在函数体内使用*typedef ，仅在以下特定情况下限制它：*

> typedef 说明符不得在 decl-specifier-seq 中与除类型说明符外的任何其他类型的说明符组合，并且不得用于参数声明 (8.3.5) 的 decl-specifier-seq 或在函数定义 (8.4) 的 decl-specifier-seq 中。

这是代码片段：

**频道：**

```
...
#include <string>
...

class C
{
public:
    int foo1(const std::string&);       
}; 
```

**主.cpp：**

```
...
#include "C.h"
...

void Test_C_Foo1()
{
   typedef int(C::*MEMFN1)(const std::string&);

   C c;   
   Functor1<C, MEMFN1,...> f1(&c, &C1::foo1,...);
   ...
}

...

int main()
{
    Test_C_Foo1();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-11T09:46:33.950

这*很好*。它是合法的和本地化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:48:36.647

恕我直言，如果`typedef`只是为了避免键入或使指向成员函数的指针不那么麻烦，如您的示例所示，那么它很好。

但是如果它`typedef`揭示了一些特定的概念，那么它应该在函数之外是可见的。

检查它的快速测试是`typedef`：

```
typedef int(C::*MEMFN1)(const std::string&); //OK: as local typedef, just an abbreviation

typedef int(C::*ACTION)(const std::string&); //Not so OK: Action is a new concept 
```

# sqlite - SQLCipher Windows 构建

> ID：10103455
> 
> 赞同：0
> 
> 时间：2012-04-11T09:40:22.093
> 
> 标签：sqlite, sqlcipher

我无法按照这些[步骤](https://groups.google.com/forum/?fromgroups#!topic/sqlcipher/VcYpa1a_RTM)在 Windows 上构建 sqlcipher 。

```
install Win32 OpenSSL v0.9.8m
install TclTk
rename MINGWPATH/bin/tclsh84.exe  to  tclsh.exe

cd sqlcipher
$ ./configure --disable-tcl --disable-amalgamation 

CFLAGS="-DSQLITE_HAS_CODEC -I../OpenSSL/include /c/Windows/System32/libeay32.dll"
$ make
$ make dll
$ make install 
```

在链接阶段，gcc 给出了这个错误：

```
libtool: link: gcc -g -O2 -DSQLITE_OS_WIN=1 -I. -I./src -I./ext/rtree -D_HAVE_SQ
LITE_CONFIG_H -DBUILD_sqlite -DNDEBUG -DSQLITE_THREADSAFE=1 -DSQLITE_OMIT_LOAD_E
XTENSION=1 -DHAVE_READLINE=0 -o .libs/sqlite3.exe ./src/shell.c  ./.libs/libsqli
te3.a -lpthread -L/usr/local/lib
./.libs/libsqlite3.a(func.o): In function `sqlite3RegisterBuiltinFunctions':
c:\sqlcipher/./src/func.c:1439: **undefined reference to `sqlcipher_exportFunc**'
collect2: ld çıkış durumu 1 ile döndü
make: *** [sqlite3.exe] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:27:35.680

您忘记定义`SQLITE_TEMP_STORE`为文档已指定。

我可以确认它在 Ubuntu 12.04 LTS 上运行顺利，最新的源代码在 github：

![在此处输入图像描述](../Images/62d43d3d0f981c944433b3a3ba03deb0.png)

简而言之，动态链接：

`./configure --enable-tempstore=yes CFLAGS="-DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2" LDFLAGS="-lcrypto"`

# java - 我需要同步 writeObject() 吗？

> ID：10103456
> 
> 赞同：0
> 
> 时间：2012-04-11T09:40:27.430
> 
> 标签：java, serialization

我有一些由 RMI 序列化同时访问的对象。最近我写了自定义序列化方法：

```
/** This method is made to omit serialization of this.order */
private void writeObject(java.io.ObjectOutputStream out)
  throws java.io.IOException
{
    Order tmpOrder = this.order;
    this.order = null;
    out.defaultWriteObject();
    this.order = tmpOrder;
}

private void readObject(java.io.ObjectInputStream in)
  throws java.io.IOException, ClassNotFoundException
{
    in.defaultReadObject();
} 
```

我不想允许并发 RMI 线程破坏 this.order。

1.  我需要使 writeObject 同步吗？或者
2.  RMI 框架是否尽最大努力同步对对象的访问？

在第二种情况下，我的同步甚至可能导致 RMI 中的死锁。JAVA API 的一般约定是一个方法由一个线程调用，除非特别注明。因此，如果我应该遵守规则，我应该离开`writeObject`没有任何同步。这个对吗 ？

在不回答问题的情况下解决我的问题的另一种方法当然是声明`private static final ObjectStreamField[] serialPersistentFields`. （我不能使字段瞬态，因为该对象不仅是 DTO，而且也是 JPA 实体）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:48:49.077

> 我有一些通过 RMI 序列化同时访问的对象

不，你没有。您有一些对象序列化同时访问的*对象。*

> RMI 框架是否尽最大努力同步对对象的访问？

否。对象序列化框架可能会，但未指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:53:06.927

尝试序列化同时使用的对象会导致混乱。当然，要读取一致的状态甚至是格式良好的状态，您通常需要排他锁定。如果`writeObject`是同步的，那么您在确保锁定顺序良好时会遇到极端问题。

添加`serialPersistentFields`（拼写正确：）应该具有与制作字段相同的行为`transient`。制作`order` `transient`将阻止它被写出，这似乎是您在问题代码中尝试的内容。使用`ObjectOutputStream.putFields`也可以达到类似的效果。

# playframework - Playframework 1.x 指向静态文件：模板中的路由

> ID：10103461
> 
> 赞同：1
> 
> 时间：2012-04-11T09:40:36.823
> 
> 标签：playframework

给定

```
GET /termsofservice   staticFile:/public/tos.txt
GET /public/          staticDir:public 
```

**如何在模板中指向第一条路线？**

@{'public/tos.txt'} 以 .../public/tos.txt 网址结束，而不是 .../termsofservice

我现在正在使用

```
${play.Play.configuration.getProperty("application.baseUrl")}/termsofservice 
```

但应该有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:42:24.113

这并不理想，但我们拥有的是一个“Docs”控制器：

```
public class Docs extends Controller {
    public static void termsOfUse() { render(); } 
```

很可能您无论如何都不希望 TOS 成为 txt 文件，因此您可以为它创建模板，在其中包含页眉/页脚并在其中添加 TOS，获取 /docs/termsofservice URL 或类似内容。

# python - 使用 webapp2 在 url 中有 slug

> ID：10103462
> 
> 赞同：-1
> 
> 时间：2012-04-11T09:40:37.120
> 
> 标签：python, google-app-engine, webapp2

**问题：**我从 jQuery 向服务器发送一个 post 请求，我调用的 url 是这样的：`/get_post_data/my-custom-slug`意思是我向`localhost:8080/get_post_data/my-custom-slug`. 但这可能会`/my-custom-slug-two`根据用户在模板中单击的位置而改变。我希望 url 路由器捕获 slug 和该 url 的处理函数以获取 slug 并基于 slug，我会在我的数据库中调用一些模型来获取一些数据并将其发回。

**解决方案策略：** 考虑到上述内容，这是我设计 url 路由器的方式：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               ('/get_post_data/<my_slug:[-\w]+>', PostData)
                               ],
                              debug=True) 
```

以下是 url 处理函数：

```
class PostData(webapp2.RequestHandler):
  def post(self, my_slug):
    self.response.out.write(my_slug) 
```

问题是：理想情况下输出应该是`my-custom-slug` ，但问题是我没有在处理函数中得到 my_slug 变量。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:30:41.610

你快到了，就这样说吧：`('/get_post_data/([-\w]+)', TeamRates)` 确保你把`()`和放在上面描述的视图中，事情应该可以工作。

# c++ - Eclipse CDT 抱怨未解决的功能，但仍然可以成功构建

> ID：10103465
> 
> 赞同：6
> 
> 时间：2012-04-11T09:40:48.930
> 
> 标签：c++, eclipse, eclipse-cdt

以下 C++ 应用程序在 Eclipse CDT 中成功编译并运行，但 IDE 仍报告错误说明：

```
Could not resolve function wprintf 
```

```
#include <stdio.h>
#include <wchar.h>

int main()
{
  wprintf(L"Hello world");
  return 0;
} 
```

目录`/usr/include`（`wchar.h`所在的位置）肯定列在包含路径中，否则应用程序将无法编译。`wprintf`在报告中按 F3 ：

```
Could not find symbol 'wprintf' in index 
```

这是我的设置：

*   openSUSE 11.4
*   面向 Java 开发人员的 Eclipse IDE（Indigo Service Release 2 - Build 20120216-1857）
*   Eclipse CDT v8.0.2.201202111925

有谁知道我怎样才能让 Eclipse CDT 正确解决这个功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T09:41:42.217

我的 Juno 版本遇到了同样的问题，在 Fedora 14 上构建 id：20120510-1218。要解决索引问题：导航到首选项 -> c/c++ -> 编辑器 -> 索引器 -> 取消选中“允许包含的启发式解析”

-一切顺利

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T21:04:13.117

在首选项 -> c/c++ -> 编辑器 -> 索引器禁用索引器，应用，返回首选项，然后再次启用索引。这使得 Eclipse 重新索引工作区。之后，我在编辑器右侧的假红色标志就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:00:04.503

> 目录 /usr/include（wchar.h 所在的位置）肯定列在包含路径中，否则应用程序将无法编译

我猜这个目录只在*编译器*包含路径中列出。该目录也必须在*Eclipse C++ 解析器* [包含路径](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/reference/cdt_u_prop_general_pns_inc.htm)中列出，才能正确解析函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T12:29:51.380

好的，如果 /usr/include 列出正确，然后转到`preferences -> c/c++ -> Editor -> Indexer -> select Indexer`

有时将它从快速 c/c++ 索引器更改为完整的索引器可以解决问题。

希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T13:37:12.720

对我有帮助的是在 jni 文件夹上按鼠标右键属性 > c/c++ 常规 > 路径和符号添加与项目 > 属性 c/c++ 常规 > 路径和符号中相同的路径

希望能帮助到你

# sql - Sql 查询以选择单个不同客户 ID 的记录

> ID：10103468
> 
> 赞同：0
> 
> 时间：2012-04-11T09:41:07.630
> 
> 标签：sql

我写了一个分组客户销售的查询，如下所示：

```
SELECT customerid,
SUM (salestax1)As total_salestax1,
SUM(total_payment_received) As total_payment_recieved,
COUNT (orderid)as order_qty,
SUM(paymentamount)As paymentamount
 FROM Orders_74V94W6D22$
WHERE orderdate between '7/6/2011 16:35' and '2/3/2012 11:53'    
GROUP BY customerid 
```

但此查询仅显示 5 个字段，但我需要显示以下字段：

```
orderid    billingcompanyname    billingfirstname    billinglastname    
billingcountry    shipcountry    paymentamount creditcardtransactionid    
orderdate    creditcardauthorizationdate    orderstatus    
total_payment_received    tax1_title salestax1 
```

那么如何处理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:45:49.603

要选择有关客户的更多信息，您需要将查询用作子查询，例如：

```
Select distinct c.[column1], c.[column2], c.[column3], tbl.*
From Orders_74V94W6D22$ c inner join (
 SELECT customerid,
SUM (salestax1)As total_salestax1,
SUM(total_payment_received) As total_payment_recieved,
COUNT (orderid)as order_qty,
SUM(paymentamount)As paymentamount
 FROM Orders_74V94W6D22$
WHERE orderdate between '7/6/2011 16:35' and '2/3/2012 11:53'    
GROUP BY customerid 
) as tbl on tbl.customerid = c.customerid 
```

但是你不能在逻辑上选择关于 1 个订单的东西，因为你已经对多个订单进行了分组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:11:25.403

您需要了解 GROUP BY 的含义。如果您按 customerId 分组，您将只有一个客户，因为所有数据都`grouped`在其中。

你想如何分组`orderid`并`orderid`在你的结果集上显示？如果您有 10 个订单 ID，您希望结果中有 10 行吗？如果是，很好，按它分组，但我认为这不是你想要的

编辑：

好吧，这不是一个好主意，你的表结构是错误的，我认为你不完全理解一个组的方式，但我认为这个查询会得到你的结果：

```
 SELECT customerid, 
 (select top 1  [column1] from Orders_74V94W6D22$ where customerid = ORD.customerid),
 (select top 1  [column2] from Orders_74V94W6D22$ where customerid = ORD.customerid),
 (select top 1  [column3] from Orders_74V94W6D22$ where customerid = ORD.customerid),
 SUM (salestax1)As total_salestax1, 
 SUM(total_payment_received) As total_payment_recieved, 
 COUNT (orderid)as order_qty, 
 SUM(paymentamount)As paymentamount
 FROM Orders_74V94W6D22$  ORD
 WHERE orderdate between '7/6/2011 16:35' and '2/3/2012 11:53' 
 GROUP BY customerid 
```

# xpath - 在 selenium.get.Text 和 selenium.click 中使用 xpath

> ID：10103469
> 
> 赞同：2
> 
> 时间：2012-04-11T09:41:19.097
> 
> 标签：xpath, selenium, selenium-rc

我`<a href="/address_shops/">Адреса магазинов</a>`在页面上并想存储文本，然后单击此链接并验证我要访问的页面是否在标题中包含此文本。所以我尝试通过 xpath 查找元素，并且 selenium.getText 得到了正确的结果，但是 selenium.click 转到另一个链接。我在哪里犯了错误？提前致谢！

```
 String m_1 = selenium.getText("xpath=html/body/div[3]/div[2]/div[1]/h4[1]");
    selenium.click("xpath=html/body/div[3]/div[2]/div[1]/h4[1]");
    selenium.waitForPageToLoad("30000");
    assertTrue(selenium.getText("css=h3").contains(m_1)); 
```

页面：http://www.svyaznoy.ru/map/

* * *

简历：使用`xpath=//descendant::a[@href='/address_shops/'][2]`或`css=div.deff_one_column a[href='/address_shops/']`获得正确的结果

使用`xpath=//a[@href='/address_shops/']`- 元素当前不可见 `xpath=//a[@href='/address_shops/'][2]`- 未找到元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:04:52.800

表达式开头缺少斜杠。我有点惊讶这完全通过 - 第一个斜杠意味着“从根节点开始”。

此外，最好选择`<a>`元素而不是`<h>`. 有时它有效，有时是错误点击，有时点击根本没有做任何事情。尽量做到具体。

试试这个。

```
String m1 = selenium.getText("xpath=/html/body/div[3]/div[2]/div/h4/a");
selenium.click("xpath=/html/body/div[3]/div[2]/div/h4/a");
selenium.waitForPageToLoad("30000");
// your variable is named m1, but m_1 was used here
assertTrue(selenium.getText("css=h3").contains(m1)); 
```

顺便说一句，您可以使用更好的 XPath 表达式。请参阅[文档](http://www.w3.org/TR/xpath/)，它*确实*很有帮助。只是一个例子，这也可以工作，并且更容易编写和阅读：

```
String m1 = selenium.getText("xpath=//a[@href='/address_shops/']");
selenium.click("xpath=//a[@href='/address_shops/']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:30:50.403

抱歉，没有注意到页面链接。第二个链接的CSS可以是这样的`css=div.deff_one_column a[href='/address_shops/']`

# meteor - 流星如何更新浏览器？

> ID：10103470
> 
> 赞同：12
> 
> 时间：2012-04-11T09:41:21.360
> 
> 标签：meteor

看过 Meteor Framework的[截屏视频](http://www.meteor.com/screencast)。我注意到更改数据库会无缝更改浏览器中的数据。通常 AJAX，只是每隔几秒钟重新加载页面的一部分，但在这里我没有注意到浏览器重新加载。他们是如何在 Meteor 中做到这一点的？它是否依赖于 Node.js？

更新：托比卡特林提出了另一个有趣的问题。Meteor 如何处理不同的浏览器？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-11T14:11:53.400

他们同时使用`Session`和`Meteor.autosubscribe`（来自 Meteor API）来确保更改反映在客户端上。

这些 Meteor API 使用 SockJS 的 XHR (XMLHttpRequest)。SockJS 是 WebSocket 仿真实用程序。因此，当服务器发生变化时，SockJS 会确保发送 XHR，并且变化的数据在 JSON 响应中。

是的，Meteor 完全依赖于 Node.js。来自 Meteor 文档：

> Meteor 应用程序是在客户端 Web 浏览器中运行的 JavaScript、在 Node.js 容器内的 Meteor 服务器上运行的 JavaScript 以及所有支持的 HTML 片段、CSS 规则和静态资产的混合体。Meteor 使这些不同组件的包装和传输自动化。而且，您可以非常灵活地选择如何在文件树中构建这些组件。
> 
> 唯一的服务器资产是 JavaScript。Meteor 收集所有 JavaScript 文件，不包括客户端和公共子目录下的任何内容，并将它们加载到纤程内的 Node.js 服务器实例中。在 Meteor 中，您的服务器代码在每个请求中运行在一个线程中，而不是以 Node.js 典型的异步回调样式。我们发现线性执行模型更适合 Meteor 应用程序中的典型服务器代码。

来源：[http](http://docs.meteor.com/) ://docs.meteor.com/和[https://github.com/meteor/meteor](https://github.com/meteor/meteor)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T14:05:34.387

有一些技术可以让服务器在浏览器不需要请求的情况下将数据推送到浏览器中。这种技术的术语是[Comet [wikipedia.org]](http://en.wikipedia.org/wiki/Comet_%28programming%29)，大多数技术都与 AJAX 相关（有一种叫做 Comet 的漂白剂和一种叫做 Ajax 的清洁产品）。有许多连接类型：长轮询、流式 XHR、永远帧、服务器发送事件和 websocket。Socket.IO 是一个很好的库，它为流服务器提供连接类型。

您确实需要支持 Comet 连接的服务器。你可以用谷歌搜索当前的，但我不知道：node.js、tornado、cometd、orbited、Jetty streaming

我猜 Metor 会根据浏览器的功能使用不同的连接类型，例如 Chrome 的 websocket 和 IE 的长轮询。如果有人可以给出更具体的答案，我会感兴趣

# android - 如何在 Android 应用程序中接受蓝牙接收的文件？

> ID：10103472
> 
> 赞同：20
> 
> 时间：2012-04-11T09:41:30.797
> 
> 标签：android, file, bluetooth

我想实现一个应用程序来*从蓝牙设备接收文件*。

在接收之前，将发出通知以接受传入的文件请求。

从那里，我想激活“接受”并在用户从另一个蓝牙配对设备收到第二个文件时自动下载文件而不引发接受对话框，而当用户启动应用程序时不会出现通知干扰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:57:13.593

您可以尝试使用[蓝牙套接字](http://developer.android.com/reference/android/bluetooth/BluetoothServerSocket.html)连接来设置客户端服务器 TCP 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:02:40.117

我开发了一个包含此类任务的应用程序，您可以使用[BluetoothChat](http://developer.android.com/resources/samples/BluetoothChat/src/com/example/android/BluetoothChat/BluetoothChatService.html)示例。您必须将安全标志设置为 false：` boolean secure = false;

```
 try {
            if (secure) {
                tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE,
                    MY_UUID_SECURE);
            } else {
                tmp = mAdapter.listenUsingInsecureRfcommWithServiceRecord(
                        NAME_INSECURE, MY_UUID_INSECURE);
            }
        } catch (IOException e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "listen() failed", e);

        mmServerSocket = tmp;
    }` 
```

然后从您可以在 ConnectedThread 中找到的 InputStream 中读取缓冲区：

```
while (true) {
            try {

                bytes = mmInStream.read(buffer);
                 /*write bytes in a file*/

            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();

                BluetoothChatService.this.start();
                break;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-10T05:20:51.420

**在有根设备**上，您只需在手机上安装两个应用程序即可实现您的目标。

1.  XPosed 安装程序
2.  自动接受

这样你就可以钩住系统服务。

```
import android.util.*;
import de.robv.android.xposed.*;
import de.robv.android.xposed.callbacks.XC_LoadPackage.*;

import static de.robv.android.xposed.XposedHelpers.findAndHookMethod;

public class Tutorial implements IXposedHookLoadPackage
{

    private String TAG="TUTORIAL";
    public void handleLoadPackage(final LoadPackageParam lpparam) throws Throwable {
        if (!lpparam.packageName.equals("com.android.bluetooth"))
        {
            Log.i(TAG,"Not: "+lpparam.packageName);
            return;
        }
        Log.i(TAG,"Yes "+lpparam.packageName);  

        findAndHookMethod("com.android.bluetooth.opp.BluetoothOppManager", lpparam.classLoader, "isWhitelisted", String.class,new XC_MethodHook() {
                @Override
                protected void beforeHookedMethod(MethodHookParam param) throws Throwable {
                    Log.v(TAG,"HOOK DONE");
                    param.setResult(true); /* you can compare the sender address(String) with your computer and determine if you return true or just allow the original method to be called after this returns.*/

                }
            });

    }
} 
```

有关更多信息，请访问我在 SO 中[的回答。](https://stackoverflow.com/a/49379762/8614565)

我将在这里发布一些直接链接。

**链接**

[自动接受应用的 Dropbox 链接](https://www.dropbox.com/s/9fuviv2seahf8jf/app.apk?dl=0)

[项目文件的 Dropbox 链接 (zip)](https://www.dropbox.com/s/ttl2uqcnoysdwge/auto-accept.zip?dl=0)

[Xposed apk 网站](http://repo.xposed.info/module/de.robv.android.xposed.installer)

[Towelroot 网站根您的手机](https://towelroot.com)

[自动接受 github 存储库](https://github.com/KYHSGeekCode/Auto-Accept)

# ruby-on-rails - 请求完成时间大于 ActiveRecord 和查看时间的总和

> ID：10103476
> 
> 赞同：7
> 
> 时间：2012-04-11T09:41:49.743
> 
> 标签：ruby-on-rails, time

以下是一些示例请求完成时间：

```
Completed 200 OK in 1054ms (Views: 10.8ms | ActiveRecord: 455.6ms)

Completed 200 OK in 1410ms (Views: 11.6ms | ActiveRecord: 764.3ms)

Completed 200 OK in 1403ms (Views: 11.0ms | ActiveRecord: 776.1ms)

Completed 200 OK in 1068ms (Views: 12.1ms | ActiveRecord: 438.6ms)

Completed 200 OK in 854ms (Views: 10.9ms | ActiveRecord: 306.8ms) 
```

为什么总时间与 Views 和 ActiveRecord 时间之和不同？我怎样才能减少这个差距？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T11:19:30.177

不同之处在于控制器中处理的请求部分。如果你想减少这个时间，只要确保你在控制器中尽可能高效地做事。

# java - Java Applet 中的缓存

> ID：10103477
> 
> 赞同：2
> 
> 时间：2012-04-11T09:41:52.547
> 
> 标签：java, http, caching, applet, lwjgl

哪些方法可用于在 Java 小程序中进行缓存？

我认为组成小程序的 .jar 将被大多数浏览器缓存。

*   小程序使用的任何依赖 .jar 都会出现这种情况吗？
*   如果小程序在运行时从远程 URL 加载资源，假设浏览器不会缓存这些资源是否正确？如果它没有被浏览器缓存，是否可以通过写入本地存储来实现缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:56:53.430

> 小程序使用的任何依赖 .jar 都会出现这种情况吗？

是的，假设依赖的 JAR 是可缓存的。

> 如果小程序在运行时从远程 URL 加载资源，假设浏览器不会缓存这些资源是否正确？

大概是。JVM 可能会直接连接到远程服务器，而浏览器将看不到 HTTP 请求。此外，JVM 可能不知道浏览器的缓存组织或位置。但是，这完全取决于平台。

JVM 也有可能实现自己的 HTTP 缓存。AFAIK，当前一代的 Oracle JVM 没有，但未来的可能并非不可想象。

> 如果它没有被浏览器缓存，是否可以通过写入本地存储来实现缓存？

仅当小程序已签名且用户已接受签名时。小程序通常无法读取或写入本地存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T19:56:33.777

为了更好地控制资源缓存，请使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署小程序，它提供：

> ..自动更新（包括延迟下载和更新的**编程控制**）..

请注意，JWS 应用程序。[调用JNLP API](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/index.html)的编程更新部分不需要被信任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:51:09.513

根据[如何在小程序中禁用 http 缓存](https://stackoverflow.com/questions/6747956/how-to-disable-http-caching-in-applet)和[URLConnection JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#setUseCaches%28boolean%29)缓存将在以编程方式请求资源时启用。

# c# - C# 异步套接字客户端阻塞主接口线程

> ID：10103481
> 
> 赞同：3
> 
> 时间：2012-04-11T09:42:26.837
> 
> 标签：c#, sockets, networking, asynchronous, timeout

这次的另一个网络问题与至少在这个初始版本中基于 MSDN 示例的 Async Socket Client 有关。当前，当用户单击界面上的按钮时，会尝试异步连接以连接到联网设备，代码如下所示 -

```
//Mouse Event handler for main thread
private void btn_Read_MouseDown(object sender, MouseEventArgs e)
{
    Stopwatch sw = Stopwatch.StartNew();
    if (!networkDev.Connected)
        networkDev.Connect("192.168.1.176", 1025);

    if(networkDev.Connected)
       networkDev.getReading();
    sw.Stop();//Time time taken...
} 
```

如果端点已打开并存在于网络上，则此代码可以正常工作（整个操作不到一秒）。但是，如果联网设备被关闭或不可用，AsyncSocket Connect 函数会阻止主窗体线程。目前，如果设备不可用，整个界面会锁定大约 20 秒（使用秒表）。我认为我正在锁定，因为主线程正在等待连接请求的返回，这是否意味着我需要将该连接请求放在另一个线程上？

我已经包含了我正在使用的异步套接字客户端的代码 -

```
 public bool Connect(String ip_address, UInt16 port)
    {
        bool success = false;

        try
        {
            IPAddress ip;
            success = IPAddress.TryParse(ip_address, out ip);
            if (success)
                success = Connect(ip, port);
        }
        catch (Exception ex)
        {
            Console.Out.WriteLine(ex.Message);
        }
        return success;
    }     

    public bool Connect(IPAddress ip_address, UInt16 port)
    {
        mSocket.BeginConnect(ip_address, port, 
           new AsyncCallback(ConnectCallback), mSocket);
        connectDone.WaitOne();//Blocks until the connect operation completes, 
                              //(time taken?) timeout?
        return mSocket.Connected;
    }

    private void ConnectCallback(IAsyncResult ar)
    {
        //Retreive the socket from thestate object
        try
        {
            Socket mSocket = (Socket)ar.AsyncState;
            //Set signal for Connect done so that thread will come out of 
            //WaitOne state and continue
            connectDone.Set();

        }
        catch (Exception ex)
        {
            Console.Out.WriteLine(ex.Message);
        }       
    } 
```

我希望通过使用具有自己线程的异步客户端，如果主机不存在，这将停止冻结接口，但情况似乎并非如此。在 20 秒的初始连接失败后，所有后续连接尝试都会立即返回（不到一毫秒）。还有一点我觉得很奇怪，如果初始连接尝试成功，任何稍后连接到不存在的主机的调用都会立即返回。对正在发生的事情感到有些困惑，但想知道这是否与我使用的 Socket 存储在我的 AsyncSocket 类中这一事实有关。非常感谢任何帮助，如果需要更多客户端代码，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:45:06.447

您声称它是异步的，但您的 Connect 方法显然不是：

```
mSocket.BeginConnect(ip_address, port, ...);
connectDone.WaitOne(); // Blocks until the connect operation completes [...] 
```

你一直阻塞直到它完成，这是异步行为的对立面。`BeginConnect`如果您要在连接之前阻塞，那么使用有什么意义？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:45:13.903

你在这里阻塞了你的 UI 线程：

```
connectDone.WaitOne();  //Blocks until the connect operation completes, (time taken?) timeout? 
```

# asp.net - 可以在asp.net会员中使用用户名作为外键吗

> ID：10103488
> 
> 赞同：0
> 
> 时间：2012-04-11T09:43:14.003
> 
> 标签：asp.net, sql-server, database, database-design, asp.net-membership

我在应用程序中使用 asp 会员资格。
我添加了表，它具有（asp 成员资格）的`UserProfile`外键。 我使用外键是因为用户名是电子邮件并且是唯一的。 在我需要引用用户的任何地方，我都将其用作外键。 例如，当我需要获取配置文件时，我从应用程序传递给存储过程以获取数据。 我只是想知道这是否是做到这一点的好方法。这里有一些潜在的安全问题吗？`Users`
`Username`
`Username`
`Username`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T10:42:07.180

我在这里看到的主要问题是**您为外键花费了大量“数据空间”**，这将使其变慢并占用表的数据库空间。此外，您的数据库表将连接进行字符串比较 - 数据库注意并为这些字符串进行哈希处理，然后进行数字比较，但有一点点小开销。

只需使 UserName 唯一并使用数字外键将其与其余表连接。

这里的第二个问题是**当用户需要更改他们的电子邮件**，或者出于任何原因给它错误。在这种情况下，您需要更新数据库上的所有连接并确保没有其他类似的电子邮件。

还有一个问题是电子邮件和外键可以区分大小写或不区分大小写。如果出于任何原因你让它区分大小写，那么你就会弄得一团糟。

关于安全问题，您总是需要使用参数打开并询问您的数据库。这对于数字键或字符串键是相同的，因此在这种情况下没有什么不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T11:15:16.210

我会因为一个简单的原因说不：许多系统允许用户更改他们的用户名。在您的情况下，您将其链接到一个电子邮件地址，应该允许用户更改该地址。

如果将其用作外键，则必须运行更新以保持数据同步，这很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:11:31.860

这是一个古老的自然与替代关键讨论。这两种方法都有“粉丝”，但简单的事实是，两者都有利有弊，您必须做出最适合您特定情况的决定。

对于电子邮件作为 PK 的具体情况，您可能想看看[这个讨论](https://stackoverflow.com/questions/3804108/is-email-address-a-bad-primary-key)。

# java - 保存 Java 配置信息的最佳位置

> ID：10103490
> 
> 赞同：2
> 
> 时间：2012-04-11T09:43:20.533
> 
> 标签：java

我正在编写一个使用一些配置的库。这些配置不会经常更改，但将来可能会更改。因此我不想在代码中硬编码它们。

对 Java 库执行此操作的最佳方法是什么？一种可能的解决方案是注入它并将它们硬编码在我假设的 DI 配置文件中。但这也需要更改代码。

这样做的最典型方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:52:33.593

你可以这样做：

*   将默认配置作为嵌入式资源文件添加到库 jar
*   然后用户可以覆盖文件，将具有相同路径的资源添加到类路径

作为文件格式，您可以使用[Java Properties File](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)。

你可以通过这种方式加载它

```
Properties props = new Properties();
props.load(YourClass.class.getResourceAsStream("name-of-your-prop-file.properties")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:53:55.457

Java Util [Properties](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)是一个很好的配置工具。如果需要，您可以将文件嵌入到 jar 中，并使用[`getResourceAsStream()`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)方法加载它。

# reflection - 在 Groovy 中查找方法的名称

> ID：10103495
> 
> 赞同：4
> 
> 时间：2012-04-11T09:43:52.090
> 
> 标签：reflection, groovy, introspection

Groovy 中有没有办法找出被调用方法的名称？

```
def myMethod() {
    println "This method is called method " + methodName
} 
```

这与鸭子类型相结合将允许非常简洁（并且可能难以阅读）的代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T20:12:26.070

Groovy 支持通过`invokeMethod`GroovyObject 的机制拦截所有方法的能力。

您可以重写`invokeMethod`which 将实质上拦截所有方法调用（要拦截对现有方法的调用，该类还必须实现`GroovyInterceptable`接口）。

```
class MyClass implements GroovyInterceptable {
    def invokeMethod(String name, args) {
        System.out.println("This method is called method $name")
        def metaMethod = metaClass.getMetaMethod(name, args)
        metaMethod.invoke(this, args)
    }

    def myMethod() {
        "Hi!"
    }
}

def instance = new MyClass()
instance.myMethod() 
```

此外，您可以将此功能添加到现有类：

```
Integer.metaClass.invokeMethod = { String name, args ->
    println("This method is called method $name")
    def metaMethod = delegate.metaClass.getMetaMethod(name, args)
    metaMethod.invoke(delegate, args)
}

1.toString() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T10:00:16.800

不，与 Java 一样，没有本地方法可以做到这一点。

您可以编写一个 AST 转换，以便您可以注释该方法，这可以在该方法内设置一个局部变量。

或者，您可以使用生成 stackTrace 并找到正确的 StackTraceElement 的良好旧 Java 方法来执行此操作，例如：

```
import static org.codehaus.groovy.runtime.StackTraceUtils.sanitize

def myMethod() {
  def name = sanitize( new Exception().fillInStackTrace() ).stackTrace.find {
    !( it.className ==~ /^java_.*|^org.codehaus.*/ )
  }?.methodName

  println "In method $name"
}

myMethod() 
```

# sharethis - sharethis 正在停止页面在 IE 8 中加载

> ID：10103497
> 
> 赞同：0
> 
> 时间：2012-04-11T09:43:58.743
> 
> 标签：sharethis

我的网站上有一个 sharethis 链接，其中包含以下提到的代码...

```
 <script type="text/javascript">
       addthis_url = location.href;
       addthis_title = document.title;
   </script>
  <script type="text/javascript" src="http://s7.addthis.com/js/addthis_widget.php?v=12"></script> 
```

但这不起作用，因为页面在 addthis_widget.php 之后停止加载。我什至将代码更改为较新的版本，即

```
<!-- AddThis Button BEGIN --> <a class="addthis_button"></a> <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js?pub=ogmios"></script> <!-- AddThis Button END --> 
```

但是这段代码在 IE8 中也停止了页面加载。

任何帮助将不胜感激。

谢谢下巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:47:16.853

下巴，

看起来您使用的是 AddThis 而不是 ShareThis..

你为什么不尝试使用 ShareThis 来代替[http://sharethis.com/publishers/get-sharing-tools](http://sharethis.com/publishers/get-sharing-tools)

-马努

# javascript - 限制第三方 javascript 的内存量

> ID：10103502
> 
> 赞同：1
> 
> 时间：2012-04-11T09:44:22.623
> 
> 标签：javascript, memory-management

是否可以限制第三方 javascript 代码可以分配的内存量？

**更新：**理想的情况是有一个“沙箱”，其中：

*   一些用户添加了一段 javascript 代码。
*   这段代码正在执行。
*   如果它分配超过 5 mb - 用户会得到一个异常

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:50:47.257

我认为它取决于浏览器内部实现并由浏览器处理，浏览器的最终用户不允许配置它。

# jquery - IE9的问题

> ID：10103503
> 
> 赞同：1
> 
> 时间：2012-04-11T09:44:24.190
> 
> 标签：jquery, html, css, canvas

链接： http: [//new.floorbase.nl](http://new.floorbase.nl)

问题：在 IE9 中首次加载时，画布位置不正确。但是打开控制台或更改模式后，它的位置是正确的。

# 第一个开始画面

[![](../Images/bf0e77914b4c2721286174d5814036af.png)](https://i.stack.imgur.com/55SSV.jpg)

# 打开控制台或更改模式后

[![](../Images/01ed44e3fb7224eaa6aa1b50e016e130.png)](https://i.stack.imgur.com/fYYfm.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:54:19.397

您的 js 文件中有一个`console.log`语句。IE 本身不理解`console.log`，因为它没有控制台，因此 javascript 中断。但是当控制台被调用（我猜是开发者工具）时，console.log 语句就会运行。

您所要做的就是删除或注释掉这些`console.log`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:54:09.933

我认为，这是因为 IE 默认情况下以怪癖模式呈现页面。

```
quirks mode refers to a technique used by some web browsers for the sake of 
maintaining backward compatibility with web pages designed for older browsers, 
instead of strictly complying with W3C and IETF standards in standards mode. 
```

如果您想使用更高版本的 IE，则将以下行添加到您的`<head>`标签中

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# cakephp - Cakephp：在控制器中将值设置为 $this->data

> ID：10103505
> 
> 赞同：1
> 
> 时间：2012-04-11T09:44:29.117
> 
> 标签：cakephp, cakephp-1.3

是否可以在控制器中从视图接收到的 $this->data 中设置值。

我们可以使用 if($this->data['id']) 但为什么我们不能在其中设置值？

这行得通吗`$this->data['id']=$userid;`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T12:46:12.093

你有几个选择

首先是创建自己的变量并修改它：

```
$myData = $this->data;
$myData['id'] = $userid;
$this->Post->save($myData); 
```

第二种是使用$this->request->data。它包含与 $this->data 相同的信息，但可以修改。

```
$this->request->data['id'] = $userid;
$this->Post->save($this->request->data); 
```

# asp.net - 使用共享的 ASP.NET 应用程序减少 IIS 设置中的内存开销

> ID：10103506
> 
> 赞同：0
> 
> 时间：2012-04-11T09:44:35.693
> 
> 标签：asp.net, performance, iis-7.5, windows-server-2008-r2

我有三个需要运行的核心 ASP.NET 应用程序。我正在设置两台具有镜像 IIS 7.5 配置的 Windows Server 2008 R2 服务器，然后设置一个负载平衡器来引导流量，另一台服务器作为状态服务器。这就是所有设置和工作（尚未投入生产）。

我们有大约 120 个客户端（并且还在增长），我现在的设置是每个客户端从 IIS 根目录中获取自己的虚拟目录（作为 .NET 应用程序）。虚拟目录应用程序指向磁盘上的一个目录，它们自己的 web.config 所在的目录用于存储连接字符串和一些核心应用程序参数等内容。然后在每个客户端的应用程序之外，三个核心 ASP.NET 应用程序中的每一个都有一个虚拟目录应用程序。所以是这样的：

```
/ (IIS root)
    /client1    => c:\inetpub\clients\client1
        /app1   => c:\inetpub\applications\app1\current
        /app2   => c:\inetpub\applications\app2\current
        /app3   => c:\inetpub\applications\app3\current
    /client2    => c:\inetpub\clients\client2
        /app1   => c:\inetpub\applications\app1\current
        /app2   => c:\inetpub\applications\app2\current
        /app3   => c:\inetpub\applications\app3\current 
```

“当前”目录是当前使用的版本的符号链接。

这种设置有一些优点

*   .NET 会话、应用程序和身份验证信息的自动隔离。任何跨应用程序污染或安全问题的可能性为零（例如，客户端 1 更改 URL 以查看客户端 2）。
*   自动 web.config 继承，因此无需在磁盘上搜索每个客户端的配置文件。设置“正常工作”。
*   每个客户端都可以（并且被）配置为拥有自己的应用程序池，因此一个客户端不会在性能方面给其他任何人造成问题。

缺点：

*   每个客户端拥有一个应用程序池会产生大量内存开销
*   每个应用程序实例（例如 /client1/app1、/client1/app2、/client2/app1、...）都由 ASP.NET 单独编译，即使只有三个“真实”应用程序
*   有应用程序池预热时间开销。如果一个客户端有一段时间没有访问服务器，第一次命中必须等待他们的工作进程启动。我通过在 32 位模式下运行所有​​池来缓解这种情况。

我最大的问题是内存消耗。如果我使用 curl 循环访问每个客户端的每个应用程序，则每个工作进程都使用大约 100 MB 的 RAM。这意味着我需要 16 GB 的服务器 RAM 才能安全运行。考虑到应用程序本身并没有那么大或非常复杂，这太疯狂了。每个工作进程的内存细分大致为：私有字节 70 MB，工作集 85 MB，WS 共享：32 MB。内存是一个问题，因为这些是云服务器，其成本与 RAM 的使用直接相关。即使不是成本，让内存被这样浪费似乎仍然很疯狂。

我的第一个问题是：我能做些什么来配置 IIS 或 ASP.NET，使其不单独编译每个应用程序实例，而是意识到这三个应用程序实际上是完全相同的代码，从而有望减少启动时间，甚至可能减少内存使用? 如果我做客户端 * 应用程序 * 两台服务器，那就是在磁盘上编译的 720 个“应用程序”。

第二个问题是最佳实践之一。我的设置是否正确（因为没有更好的词）？为了代码的简单性和安全性，RAM 浪费值得吗？有没有另一种方法来实现 web.config 继承和 session/application/forms auth 的好处，而无需以这种方式单独的应用程序？

考虑更改设置所需的代码更改，因此只有三个应用程序，并且这些应用程序要成为客户端感知是相当令人生畏和粗暴的。

1.  将 {client} 添加到每个 MVC 路由的根目录（一个应用程序不是 MVC，所以会有所不同）
2.  使用 {client} 搜索和加载存储在磁盘其他位置的配置文件。也许是 json 格式之类的。
3.  在每个请求上，确保 {client} 没有更改，如果有，请清除所有会话和应用程序变量。取消用户身份验证以防止出现安全问题。

我不是在寻找任何人为我下定决心，但如果有人以前遇到过类似的问题，很高兴听到他们的消息。或者也许会达成共识，我完全走错了路，需要更改我的代码和设置。我认为关于这些问题的任何形式的反馈都会很有用，当然也值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:50:00.033

感谢@airmanx86 为我指明了多租户[的正确方向。](https://stackoverflow.com/questions/10103506/reducing-memory-overhead-in-iis-setup-with-shared-asp-net-applications#comment12943554_10103506)

我发现 Ben Foster 的以下两篇博客文章在此过程中非常有用：

*   [ASP.NET MVC 中多租户的简单方法](https://web.archive.org/web/20150426120616/http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Simple-approach-to-multi-tenancy-in-ASPNET-MVC.aspx)（第 1 部分）
*   [ASP.NET MVC 中多租户的简单方法](https://web.archive.org/web/20150508143009/http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Simple-approach-to-multi-tenancy-in-ASPNET-MVC-Part-2.aspx)（第 2 部分）

花了几天的努力才真正理解这一点，并对其进行设置并重构我的代码以使其更加灵活，但结果令人惊叹。之前，如果我使用`curl`循环为每个客户端点击一个非常简单的“调试”页面，则启动时间只有几秒钟，大约 100 MB 的内存使用量，当我点击所有客户端时，第一个加载的客户端被换出内存。

现在，我运行相同的`curl`循环，几乎可以瞬间达到 100 多个应用程序，并且我的工作进程 RAM 使用量约为 150 MB。我喜出望外！

是时候让我跑步而不是走路了，将我的其他应用程序转换为真正的多租户。

# php - Codeigniter，安全搜索的最佳实践

> ID：10103509
> 
> 赞同：1
> 
> 时间：2012-04-11T09:44:45.727
> 
> 标签：php, mysql, codeigniter

我正在使用codeigniter，目前我正在进行全身搜索，我想知道这样做的最佳做法是什么。现在我有这个：

```
$keyword = $this->db->escape_like_str(trim($_POST['keyword'])); 
```

之后，执行搜索。这是安全的还是我需要做更多的事情（XSS 过滤已打开）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T10:00:03.277

因为您直接访问 _POST 变量，所以您绕过了 CI 的所有 XSS/转义和安全功能。你应该得到的是：

```
$this->input->post('keyword'); 
```

这会[被 CI 自动转义，](http://codeigniter.com/user_guide/libraries/input.html)您可以在将其扔到数据库之前执行其他验证。此外，如果您使用[活动记录](http://codeigniter.com/user_guide/database/active_record.html)，则所有值也会根据需要自动转义。

# sql - 将 sql 转换为 linq 查询以进行身份 验证

> ID：10103510
> 
> 赞同：1
> 
> 时间：2012-04-11T09:44:50.670
> 
> 标签：sql, linq

有人可以将此代码转换为linq吗？

```
SELECT PWDCOMPARE('1', Password) FROM dbo.Users WHERE Username = 'Admin' 
```

我想使用 linq 语句对用户进行身份验证。

用户密码是使用 sql[`pwdencrypt`](http://msdn.microsoft.com/en-us/library/dd822791.aspx)函数生成的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:58:53.363

您需要做的是`PWDCOMPARE`在您的数据库中包装一个 UDF，然后通过您的`DataContext`.

[http://msdn.microsoft.com/en-us/library/bb399416.aspx](http://msdn.microsoft.com/en-us/library/bb399416.aspx)

所以在你的数据库上运行它：

```
CREATE FUNCTION fn_PWDCOMPARE (@pwd NVARCHAR(MAX),@pwdhash NVARCHAR(MAX))
RETURNS BIT
BEGIN
  RETURN PWDCOMPARE(@pwd, @pwdhash)
END 
```

然后将它添加到你`DataContext`在 Visual Studio 中并像这样调用它

```
var query =
  from user in db.Users
  where user.Username = "Admin"
  select db.fn_PWDCOMPARE("1", user.Password); 
```

# sql - 如何删除列中的非字母数字字符？

> ID：10103511
> 
> 赞同：2
> 
> 时间：2012-04-11T09:44:50.890
> 
> 标签：sql, sqlite

使用*sqlite3*，我有一个像这样的简单表：

```
ArtistID Name             
---------------------------------
0        andres segovia      
1        andres|segovia|       
2        ?andres-segovia        
3        andres segovia and john 
4        anya marina          
5        aphex twin          
6        aphex-twin 
```

为了看到这样的结果，选择会是什么样子：

```
ArtistID Name             
---------------------------------
0        andressegovia      
1        andressegovia       
2        andressegovia        
3        andressegoviaandjohn 
4        anyamarina          
5        aphextwin          
6        aphextwin 
```

我尝试通过将“.load /usr/lib/sqlite3/pcre.so”行包含到我的 ~/.sqliterc 文件中来使用正则表达式功能，但是在查询中使用 REGEXP 会返回以“错误：无字符串”结尾的奇怪结果所以也许有更清晰的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:49:05.707

你可以试试这样的

```
SELECT DISTINCT 
  replace(replace(replace(replace(name, 
    ' ', ''),
    '|', ''),
    '?', ''),
    '-', '') FROM your_table 
```

# android - 如何从选项卡下的组活动下的活动中为结果启动活动？

> ID：10103518
> 
> 赞同：2
> 
> 时间：2012-04-11T09:45:43.420
> 
> 标签：android, android-activity, android-tabactivity

我正在开发一个应用程序，其中我在 Tab Activity 下使用多个 Activity。我正在使用[本教程](http://united-coders.com/nico-heid/use-android-activitygroup-within-tabhost-to-show-different-activity)。

我想从 next 得到 Result `Activity`。我该怎么做。我找不到它。我已经阅读了两三个示例，例如[this](http://pastebin.com/D4fvkGBx)和[this](https://stackoverflow.com/questions/4850404/how-to-get-result-of-child-activities-in-a-parent-tab-activity/4850455#comment12942477_4850455)。但我无法找出如何获得结果。我也试过

```
 View view = getLocalActivityManager().startActivityForResult("Search", 
new Intent(this, WhatMenu.class).
addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();    
But it only Supports `startActivity()` 
```

. 任何帮助都将是可观的。
提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:01:53.293

我已经通过`ViewFlipper`感谢大家的帮助解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:52:33.043

您还需要传递请求代码才能使用`startActivityForResult()`. 如果你不知道它是什么，就传 0。and的
语法不同。[`startActivity()`](http://developer.android.com/reference/android/app/Activity.html#startActivity%28android.content.Intent%29)[`startActivityForResult()`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:15:26.600

活动 1
创建一个类变量以供参考。

```
private final int REQUEST_CODE = 0;

...
//Somewhere in your code you have to call startActivityForResult
Intent intent = new Intent(Activity1.this, Activity2.class);
startActivityForResult(intent); 
```

活动二

在结束 Activity2 之前，您必须将结果设置为 OK 并将要带回 Activity1 的数据 likeso

```
Intent data = new Intent();
data.putExtra("name", "Mark");
data.putExtra("number", 1);
data.putExtra("areYouHappy", true);

setResult(RESULT_OK, data);
finish(); //closes Activity2 and goes back to Activity1 
```

现在回到 Activity1，您应该重写 onActivityResult 方法并从 Activity2 中检索值。
为此，首先检查 Activity2 的结果是否正常，然后检查您传递的参考 REQUEST_CODE。由于之前我们创建了 private final int `REQUEST_CODE = 0`，然后我们检查 requestCode 是否等于变量 REQUEST_CODE。如果是，则从活动 2 中提取数据。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==RESULT_OK) {
        if(requestCode==REQUEST_CODE) {
            if(data.getExtras()!=null) {
                String name = data.getStringExtra("name");
                int number = data.getIntExtra("number",0); //2nd parameter is the default value in case "number" does not exist 
                boolean areYouHappy = data.getBooleanExtra("areYouHappy", false); //2nd parameter is the default value in case "areYouHappy" does not exist
            }
        }
    }
} 
```

# rabbitmq - rabbitmq的兑换次数有限制吗？

> ID：10103519
> 
> 赞同：4
> 
> 时间：2012-04-11T09:45:46.920
> 
> 标签：rabbitmq, rabbitmq-exchange

在文档或谷歌上找不到任何关于此的内容，除了它应该绑定到服务器的可用资源。

有没有人有过在工作环境中一次进行大量交流的经验？仅仅创建交换不应该是问题（直到达到内存限制），而是在具有高消息吞吐量和主要动态交换创建/删除的工作项目中使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T14:30:01.847

鉴于 RabbitMQ 中的其他所有内容是如何构建的（并且知道它是用 Erlang 编写的并且在内部使用 Mnesia 之类的服务），可能没有任何硬编码限制。在其他任何事情之前，您可能会在您的代理机器上达到资源限制。

如果您计划使用非持久性交换（即无法在代理重新启动后幸存的交换），您可能会创建大量的它们。为什么不使用[HTTP 管理 API](http://www.rabbitmq.com/management.html)编写一个脚本，使用[curl](http://curl.haxx.se/)不断创建交换，看看你能走多远？

# javascript - 如何让页面加载感觉更快？

> ID：10103521
> 
> 赞同：1
> 
> 时间：2012-04-11T09:45:50.890
> 
> 标签：javascript, html, css, web

我想减少我的页面加载和显示所花费的时间，假设我从一个空的浏览器缓存开始，并且页面在 html 文件中可能有也可能没有内联 css 和 javascript。更改文件发送到浏览器的顺序是否会减少显示时间，从而使页面加载速度更快？

例如，如果一个页面有一些 .css、.js、.png 文件等，是否会先加载 css，从而更快地显示内容？

是否有加载文件类型的标准/特定顺序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T09:50:22.463

以下是可以优化网页性能的几个步骤。

*   把css放在最上面。

*   把javascript放在底部。

*   缓存一切。

*   设置远期过期标头。

*   适当时返回 304。

*   使用 css 和 js 的唯一 url 来传播更改。

*   除了在需要的`ajax`地方使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T10:01:15.867

注意过多的 HTTP 连接。建立 HTTP 连接需要时间，如果您的 HTML 文件中链接了许多元素，它很容易占用加载时间。

如果您有许多小图标、字形等，请将它们组合成一个精灵，以便只加载一个图像。例如，Facebook 使用了 sprite 技术——如果你检查它加载的图像，你可以看到这一点。

您还可以将 CSS 文件合并到一个文件中 - 与 Javascript 文件相同。

此外，如果您的 JavaScript 在加载时会影响页面内容，请确保使用在 DOM 准备好时通知您的事件，而不是等待`load`直到所有资源都不会触发的 body 事件，例如图像、CSS 文件、JavaScript 等已加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T09:50:39.250

js 文件会阻止页面加载，直到它们被执行。如果可能的话，包括那些在关闭正文之前

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:48:44.040

首先确保您的虚拟主机没有慢速服务器。这可能发生在非常便宜的共享网站虚拟主机上。比你应该检查你是否从你的 html 输出中删除了所有不必要的东西。您可以检查您的内容是动态的还是静态的。如果它是动态的，请尝试将其转换为静态内容。

在某些情况下，您可以简单地激活 CMS 的缓存功能，这也有助于更快地发送网站内容。只是在慢速连接上，使用 gzip 压缩输出流可能会更好。但这需要时间。服务器和客户端必须压缩/解压缩。你也必须检查一下。

如果您使用 javascript 并且执行被延迟，您还可以使用[ready](http://api.jquery.com/ready/)事件在加载 html 文档（而不是所有图像等）后执行您的 javascript，就像使用 document.onload 事件一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:27:10.870

您可以节省页面加载时间以使用一些技巧，例如：- **CSS**图像精灵，而不是为每个目的调用每个图像，这将最小化您网站的 HTTP 请求，从您的**HTML 标记**和**CSS中删除不必要的 div 标签或不必要的代码**

我们可以通过**CSS**获得好的结果，所以我们不应该在那里使用**Jscripts**。应该始终保持干净的 HTML 标记，没有任何不敬的代码。

**组合文件**是一种减少 HTTP 请求数量的方法，方法是将所有脚本组合成一个脚本，类似地将所有 CSS 组合成一个样式表。当脚本和样式表因页面而异时，组合文件更具挑战性，但将这部分作为发布过程的一部分可以提高响应时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T10:57:29.660

解决方案很简单，将所有不同的文件组合成一个大文件并使用 zip 压缩该文件。不幸的是，如果您手动执行此操作，您将遇到维护问题。该单个压缩文件不再可编辑。因此，在编辑了其中一个原始源文件后，您必须将其与其他文件重新组合并重新压缩。

# c# - 如何在 .net 2.0 中使用 HTTP POST 使用 RESTFul Web 服务

> ID：10103522
> 
> 赞同：2
> 
> 时间：2012-04-11T09:45:55.797
> 
> 标签：c#, .net

我需要使用 .net 2.0 框架而不是使用 WCF 来使用宁静的 web 服务。RESTFul 服务是在 java 中构建的，仅用于 POST 操作。为了在 .net 中使用 winforms 中的 web 服务，我使用了一个`WebClient`对象。

下面是示例代码

```
string data="some data";

string url="some uri";

WebClient request = new WebClient();

//Application throws internal server error 500 at runtime when it hits this line.
string results = request.UploadString(url, "POST", data); 
```

我在这里做错了什么吗？非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:52:25.957

您确定所讨论的服务方法接受纯文本数据而不是 JSON 或 XML/SOAP 等结构化数据吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:35:42.757

“**内部服务器错误**”表示服务器在处理您上传的字符串时遇到了困难。**“内部服务器错误**”可能有多种原因。您是否有权访问服务器端代码进行调试？我能想到的一件事是您上传的字符串的编码。您可能可以尝试将WebClient的[Encoding属性设置为其他值。](http://msdn.microsoft.com/en-us/library/system.net.webclient.encoding%28v=vs.90%29.aspx)

# ruby-on-rails-3 - 在 Heroku 上运行 Yard 服务器

> ID：10103525
> 
> 赞同：4
> 
> 时间：2012-04-11T09:46:01.093
> 
> 标签：ruby-on-rails-3, heroku, yard

有没有办法在 heroku 上安装 Yard (http://yardoc.org/guides/index.html) 服务器？我在文档中没有找到任何解释如何做的东西。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T13:07:39.923

这可能有我尚未发现的陷阱（例如，Yard 将其输出文件缓存在某处，因为 Heroku 可能经常擦除文件系统并重新加载它，您将丢失缓存文件并且必须重新生成），但它通常可以工作并且很简单。

1.  在硬盘上的某个地方创建一个新文件夹（我使用了 ~/Sites/yard-on-heroku）
2.  在其中创建一个新的 Gemfile，列出您希望可用的 gem（如果它们不在标准 Heroku 安装中）。我使用了以下内容：

    ```
    source 'https://rubygems.org'
    gem 'sinatra'
    gem 'rails'
    gem 'yard' 
    ```

3.  运行`bundle install`以安装 gem。

4.  创建一个名为 Procfile 的文件并将以下内容放入其中：

    ```
    web: yard server -p $PORT -g 
    ```

5.  创建一个新的 git 存储库`git init`

6.  将您的文件提交给它（Gemfile*、Procfile）
7.  创建一个 Heroku 应用程序`heroku create`
8.  将你的 repo 推送到 Heroku`git push heroku master`

就是这样。如果您转到在第 7 步中创建站点时提供的 Heroku URL，您会看到 Yard 正在运行所有可用的 gem。如果您希望仅显示 Gemfile 中列出的 gem，而不是默认情况下所有可用的 Gem，包括 Gemfile 中的 Gem，那么您可以使用`-G`而不是`-g`Procfile 中的 Gem。

（我第一次在 StackOverflow 上回答，所以希望没问题 - 任何关于改进的建议，感激不尽）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-27T18:46:15.883

我在这里写了一个很好的教程来解决这个问题：http: [//benradler.com/blog/2014/05/27/deploy-yard-documentation-server-to-heroku/](http://benradler.com/blog/2014/05/27/deploy-yard-documentation-server-to-heroku/)

# jquery - jquery fadein() 在它支持的 css 或 html elem 方面是否有任何先决条件/约束

> ID：10103526
> 
> 赞同：0
> 
> 时间：2012-04-11T09:46:13.910
> 
> 标签：jquery, css

我在用

```
$("#somedivid").click( function() {
    $("#somedivid").fadeIn('slow');
}); 

// CSS Class
.niceclass {
    width:10px;
    height:40px;
    background: #EDE9E3;
    border:1px solid grey;
    margin-left:2px;
    float:left;
    display:none;
} 
```

它不起作用，我添加了 display:none; 根据文档评论。我正在淡入的 div 是否有任何先决条件。如果是，请列出所有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:52:52.987

无法点击隐藏元素！

```
$("#button").click(function() {
    $("#anotherElement").fadeIn('slow');
});  

#anotherElement {
   display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:02:52.603

不，如果你想从一开始就隐藏元素，那么 set `display:none;`。这是一个简单的测试。

[http://jsfiddle.net/HPknG/](http://jsfiddle.net/HPknG/)

# function - 他们有什么方法可以调用内部函数

> ID：10103529
> 
> 赞同：1
> 
> 时间：2012-04-11T09:46:35.593
> 
> 标签：function

我创建了一个函数，以便在通过按钮调用该函数时加载该函数。但它仅在我刷新页面时有效，但在我点击交换按钮时无效。

这是链接[http://www.onlinedemowebsite.com/design/swatch/drag-and-drop/try3.html](http://www.onlinedemowebsite.com/design/swatch/drag-and-drop/try3.html)

谁能帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:52:44.083

您在交换按钮上有 onclick="shuffle()" 并且该函数未在将触发事件的全局范围内定义。将函数移动到窗口范围，或者创建 DOM 节点并将真实事件附加到它而不是使用 document.writeln

此外，shuffle 函数使用 document.writeln，一个示例是修改它并改为执行以下操作：

```
function shuffle(){
    //organize and sort your letters here
    var letters = ....
    //query for all elements with class = 'letters' use a library if you want full browser support.
    var letter_nodes = document.querySelectorAll("div.letters"); 

    for ( var i = 0, n = letter_nodes.length; i<n; ++i ) {
        letter_nodes[i].innerHTML = letters[i]; // letters and letter_nodes array should have the same length.
    }
} 
```

编辑：

将您的随机播放功能更改为如下所示：

```
var letters=['A','B','E','F','O','M','I','T']; //to access letters.length in the other function
function shuffle(){
    letters.sort(function(){return 0.5 - Math.random();});

    var letter_nodes = document.getElementById('lettersContainer');
    letter_nodes = letter_nodes.getElementsByTagName('div');        

    for ( var i = 0, n = letter_nodes.length; i<n; ++i ) {
        letter_nodes[i].innerHTML = letters[i];
    }

    return false;
} 
```

然后更改创建容器的部分（在 print_2d_string_array 中）

```
 document.writeln ("<a href='#' onclick='return shuffle()' class='swap'>Swap</a>");
    document.writeln ("<div id='lettersContainer'>");

    for ( var i = 0; i < letters.length; ++i ) {
    document.writeln ("<div class='letters'></div>");
    }

    shuffle();
    document.writeln ("</div>"); /* lettersContainer end */ 
```

# php - PHP - ASCII 特殊字符（没有 MySQL）

> ID：10103532
> 
> 赞同：0
> 
> 时间：2012-04-11T09:46:47.830
> 
> 标签：php, character-encoding

我正在做这个 PHP 页面，它可以访问一个谷歌帐户，而不是显示所有电子邮件。我也定义了一个 header = UTF-8 和 meta，我使用了很多 PHP 函数将输出转换为 UTF，但我不断收到奇怪的图标而不是 ASCII 特殊字符。比如`ç`，`é`或`ã`。

```
 header("Content-Type: text/html; charset: UTF-8");
    $message = imap_fetchbody($inbox,$email_number,2);
    echo $message; 
```

应该是什么输出：

```
çççç 
```

我得到什么：

```
=E7=E7=E7=E7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:50:32.833

使用[`imap_qprint`](http://us.php.net/manual/en/function.imap-qprint.php)（有关替代解决方案，请参阅该页面上的第一条评论）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:54:03.853

[关于imap_fetchbody PHP doc page](http://php.net/manual/fr/function.imap-fetchbody.php)上的第一条评论，这似乎是一个已知问题。

使用[imap_qprint](http://us.php.net/manual/en/function.imap-qprint.php)或使用评论者解决方案：

```
<?php
function ReplaceImap($txt) {
  $carimap = array("=C3=A9", "=C3=A8", "=C3=AA", "=C3=AB", "=C3=A7", "=C3=A0", "=20", "=C3=80", "=C3=89");
  $carhtml = array("é", "è", "ê", "ë", "ç", "à", "&nbsp;", "À", "É");
  $txt = str_replace($carimap, $carhtml, $txt);

  return $txt;
}

$mbox = imap_open("{imap.gmail.com:993/imap/ssl}INBOX", "login", "pass");
$no = 5; // Mail to show (mail number)

$text = imap_fetchbody($mbox, $no, 1);
$text = imap_utf8($text);
$text = ReplaceImap($text);
$text = nl2br($text);

echo $text;
?> 
```

# c# - datagridview 中附加列的后台工作人员和进度条实现？

> ID：10103533
> 
> 赞同：0
> 
> 时间：2012-04-11T09:46:48.073
> 
> 标签：c#, visual-studio-2010, datagridview, progress-bar, backgroundworker

对于 C# 来说仍然相对较新，我试图让我的头脑围绕适合我的应用程序的后台工作人员和进度条，以下代码显示我正在向 datagridview 添加一个新列，然后用零填充新列的所有单元格(0)。为此实现后台工作人员和进度条的最佳方法是什么。整个过程大约需要 15 秒，因此需要一个进度条来向用户显示正在发生的事情。

添加和填充新列的代码如下：

```
//Creates new column in the datagridview
        DataGridViewColumn newCol = new DataGridViewColumn();
        newCol.CellTemplate = new DataGridViewTextBoxCell();
        newCol.HeaderText = tbAddSupp.Text.ToUpper();
        newCol.Name = tbAddSupp.Text.ToUpper();
        newCol.Visible = true;
        dgvStock.Columns.Add(newCol);

        cbSuppList.Items.Clear();
        cbSuppList2.Items.Clear();

        //Adds the default 0 value to all the cells in the new column
        //ITS TOO SLOW THOUGH....!!!!!
        int cellVal = 0;
        foreach (DataGridViewRow row in dgvStock.Rows)
        {
            for (int r = 0; r < dgvStock.Rows.Count - 1; r++)
            {
                dgvStock.Rows[r].Cells[newCol.Name.ToString()].Value = cellVal;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:03:58.390

这很慢，因为您要执行两次相同的循环。我认为这就足够了：

```
int cellVal = 0;
foreach (DataGridViewRow row in dgvStock.Rows)
{
    row.Cells[newCol.Name.ToString()].Value = cellVal;
} 
```

事实上，如果你只有 100 行，你的循环运行了 100 * 100 = 10000 次！

# java - 有没有比 jdb 更好的 Java CLI 调试器工具？

> ID：10103534
> 
> 赞同：4
> 
> 时间：2012-04-11T09:46:56.147
> 
> 标签：java, android, debugging, command-line, jdb

我今天用*jdb成功调试了一个 Android 应用。*但我发现*jdb*对我来说不如*gdb方便：* *jdb*提供的便利性和功能性远远不如*gdb*提供的那些。

有没有更好**的可以在命令行模式下使用的**Java 调试器可供选择？最好这将像*gdb*对于常规程序但对于 Java 一样强大、方便和实用。

同样，我对某些 IDE 中的任何内容**都不感兴趣。**这需要像*gdb*这样的命令行工具。我使用*vim*来编辑我的代码，而不是 IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-24T16:12:32.600

[rlwrap-jdb](https://github.com/pimlott/rlwrap-jdb)，正如[这篇相关文章](https://stackoverflow.com/a/21194360/3780389)中提到的，它只是 jdb 的一个包装器，但它更接近于 gdb 体验。从 rlwrap-jdb README.md：

> rlwrap-jdb 是使 jdb 几乎可用的一项后卫工作。它使用 rlwrap 不仅可以添加命令行编辑和历史记录，还可以（使用 rlwrap 的漂亮过滤机制）方便的别名、命令重复以及断点和变量的完成。

要使用，只需`rlwrap-jdb`在您的 jdb 命令前添加：`rlwrap-jdb jdb ...`.

# node.js - Meteor 如何接收对 MongoDB 查询结果的更新？

> ID：10103541
> 
> 赞同：17
> 
> 时间：2012-04-11T09:47:35.000
> 
> 标签：node.js, mongodb, meteor, nosql

几个月前我问了一个问题，Meteor 似乎有答案。

[哪些 NoSQL 数据库（如果有）可以为查询结果集提供 *changes* 流？](https://stackoverflow.com/questions/5257177/which-if-any-of-the-nosql-databases-can-provide-stream-of-changes-to-a-query)

Meteor 如何接收对 MongoDB 查询结果的更新？

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-11T18:32:39.840

你想要`query.observe()`这个。假设您有一个`Posts`带有标签字段的集合，并且您希望在添加带有标签的帖子时得到通知`important`。

[http://docs.meteor.com/#observe](http://docs.meteor.com/#observe)

```
// collection of posts that includes array of tags
var Posts = new Meteor.Collection('posts');

// DB cursor to find all posts with 'important' in the tags array.
var cursor = Posts.find({tags: 'important'});

// watch the cursor for changes
var handle = cursor.observe({
  added: function (post) { ... }, // run when post is added
  changed: function (post) { ... } // run when post is changed
  removed: function (post) { ... } // run when post is removed
}); 
```

如果您想在帖子更改时在每个浏览器中执行某些操作，您可以在客户端上运行此代码。或者，如果您想说在添加重要帖子时向团队发送电子邮件，您可以在服务器上运行它。

请注意`added`并`removed`参考查询，而不是文档。如果您有一个现有的过帐文档并运行

```
Posts.update(my_post_id, {$addToSet: {tags: 'important'}}); 
```

这将触发“添加”回调，因为帖子被添加到查询结果中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T09:10:41.127

目前，Meteor 确实适用于一个实例/进程。在这种情况下，所有查询都通过此实例，它可以将其广播回其他客户端。此外，它每 10 秒轮询一次 MongoDB，以查找由外部查询完成的数据库更改。它们是 1.0 的计划，以提高可扩展性，并希望允许多个实例通知每个实例有关更改。

另一方面，DerbyJS 正在使用 Redis PubSub。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T15:21:43.320

从文档：

> *   在服务器上，在后端 Mongo 服务器上创建具有该名称的集合。当您在服务器上调用该集合上的方法时，它们会直接转换为正常的 Mongo 操作。
>     
>     
> *   在客户端上，创建了一个 Minimongo 实例。Minimongo 本质上是纯 JavaScript 中 Mongo 的内存中非持久实现。它用作本地缓存，仅存储此客户端正在使用的数据库的子集。客户端上的查询（查找）直接从此缓存中提供服务，无需与服务器对话。
>     
>     
> 
> 当您在客户端上写入数据库（插入、更新、删除）时，该命令会立即在客户端上执行，同时它会被传送到服务器并在那里执行。livedata 包对此负责。

这解释了客户端到服务器

从我可以收集到的服务器到客户端是 livedata 和 mongo-livedata 包。

[https://github.com/meteor/meteor/tree/master/packages/mongo-livedata](https://github.com/meteor/meteor/tree/master/packages/mongo-livedata)

[https://github.com/meteor/meteor/tree/master/packages/livedata](https://github.com/meteor/meteor/tree/master/packages/livedata)

希望有帮助。

# xcode4 - cocos2d 可以在 Ipad3 上支持 4096x4096 纹理吗？

> ID：10103542
> 
> 赞同：5
> 
> 时间：2012-04-11T09:47:39.800
> 
> 标签：xcode4, cocos2d-iphone, ipad-3

Ipad1 只能支持 2048x2048，所以我想知道 ipad 视网膜支持更大尺寸的纹理。我用 cocos2d v1.01

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T15:22:23.130

最大纹理尺寸。

iPad 1
iPad 2 < iOS 5.1
**2048 * 2048**

iPad 2 >= iOS 5.1
iPad 3
**4096 * 4096**

通过@LearnCocos2D

# jquery - SlimPicker 不适用于 jQuery 插件

> ID：10103544
> 
> 赞同：0
> 
> 时间：2012-04-11T09:47:57.860
> 
> 标签：jquery, html, mootools

我希望 jQuery 和 slimpicker 一起工作，我应该怎么做？：
[来自 http://jsfiddle.net 的示例](http://jsfiddle.net/MyNameIsCode/ZRGAd/2/)

```
<html>
<head>
    <link rel="stylesheet" href="http://www.styledisplay.com/scripts/slimpicker/pagestyle.css" media="screen, projection" />
    <link rel="stylesheet" href="http://www.styledisplay.com/scripts/slimpicker/slimpicker.css" media="screen, projection" />
    <script src="http://www.styledisplay.com/scripts/slimpicker/mootools-1.2.4-core-yc.js"></script>
    <script src="http://www.styledisplay.com/scripts/slimpicker/mootools-1.2.4.4-more-yc.js"></script>
    <script src="http://www.styledisplay.com/scripts/slimpicker/slimpicker.js"></script>

    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#button").click(function () {
                alert("I'm inside jQuery function!");
            });
        });
    </script>
</head>
<body>
    <div class="container">
    <h1>SlimPicker</h1>
    <div class="intro">
        <p>Date Picker that works in IFrames. Also allows for keyboard navigation.</p>
    </div>
    <p>
        <label for="new_day">default calendar</label>
        <input id="new_day" name="new_day" type="text" class="slimpicker" autocomplete="off" value="" />
    </p>
    <p>
        <label for="birthday">calendar with options</label>
        <input id="birthday" name="birthday" type="text" class="slimpicker" autocomplete="off" alt="{
            dayChars:3,
            dayNames:['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
            daysInMonth:[31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
            format:'yyyy-mm-dd',
            monthNames:['Januar', 'Februar', 'M&auml;rz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
            startDay:1,
            yearOrder:'desc',
            yearRange:90,
            yearStart:2007
        }" value="1980-03-13" />
    </p>
    <p>
        This button uses <strong>jquery-1.7.2.min.js plugin</strong>
        <input type="button" id="button" value="Click me" style="{text-align:center}"/>
        <br />
        To activate calendar, remove this reference from the code <br />
            <strong>http://code.jquery.com/jquery-1.7.2.min.js</strong>

    </p>
</div>
<script>
    $$('input.slimpicker').each( function(el){
        var picker = new SlimPicker(el);
    });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:07:45.360

你可以让它轻松工作。这里的问题是 SlimPicker 是旧的并且不遵守 mootools 法典 - 即它仍然使用 $ 而不是`document.id`.

你可以通过在类周围创建一个闭包来修复它：http: [//jsfiddle.net/dimitar/ZRGAd/9/](http://jsfiddle.net/dimitar/ZRGAd/9/)

在代码中是这样的：

```
(function($) {
var SlimPicker = this.SlimPicker = new Class({
    method: function() {
        console.log($ == jQuery); // false
    }
});
}(document.id));
console.log($ == jQuery); // true 
```

或者，搜索并替换`$()`类中的所有引用`document.id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:55:08.873

如果我没错的话。mootools 和 jQuery 都使用`$`它们的主要功能的简写。因此，您会发生碰撞。

我会研究[jQuery noConflict](http://api.jquery.com/jQuery.noConflict/)。

我还尝试从您的 jsFiddle 中删除所有 jQuery 代码，但它仍然会引发很多错误。不知道 mootools，但尝试修复错误，然后添加带有 noConflict 的 jQuery。

# wpf - url 共享点列表 camlquery

> ID：10103545
> 
> 赞同：1
> 
> 时间：2012-04-11T09:47:58.693
> 
> 标签：wpf, list, sharepoint, url

我正在尝试从 sharepoint 收集我的 url 和存储在列表列中的 url 描述，但我不知道如何收集 URL 值。

这是我的代码：

```
 var queryResultSaleListItems = clientContext.LoadQuery(listData);

            clientContext.ExecuteQuery();

            //Read the Data into the Object
            var TipsList = from Tips in queryResultSaleListItems
                            select Tips;
            ObservableCollection<Tips> colTips = new ObservableCollection<Tips>();
            //Read Every List Item and Display Data into the DataGrid
            foreach (SPSClient.ListItem item in TipsList)
            {

                var tips = new Tips();
                tips.TitleTip = item.FieldValues.Values.ElementAt(1).ToString();
                tips.App = item.FieldValues.Values.ElementAt(4).ToString();
                //should collect the url 
                tips.URL = item.FieldValues.Values.ElementAt(5).ToString();
                //should collect the description of the url
                tips.URLdesc = item.FieldValues.Values.ElementAt(5).ToString();

                colTips.Add(tips);
            }
            ListboxTips.DataContext = colTips; 
```

在我的表达中 >

((Microsoft.SharePoint.Client.FieldUrlValue)(item.FieldValues.Values.ElementAt(5))).Url

((Microsoft.SharePoint.Client.FieldUrlValue)(item.FieldValues.Values.ElementAt(5))).Description

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:43:20.670

用于`FieldUrlValue`获取`hyperlink`字段`Client Object Model`。

使用以下代码：

```
 string server = "siteURL";
        var ctx = new ClientContext(server);
        var web = ctx.Web;
        var list = web.Lists.GetByTitle("CustomList");
        var listItemCollection = list.GetItems(CamlQuery.CreateAllItemsQuery());  

        ctx.Load(listItemCollection);                      

        ctx.ExecuteQuery();

        foreach (Microsoft.SharePoint.Client.ListItem listItem in listItemCollection)
        {                
            string acturlURL =  ((FieldUrlValue)(listItem["URL"])).Url.ToString(); // get the Hyperlink field URL value
            string actdesc = ((FieldUrlValue)(listItem["URL"])).Description.ToString(); // get the Hyperlink field Description value
        } 
```

# python - 将数据传递给 subprocess.check_output

> ID：10103551
> 
> 赞同：36
> 
> 时间：2012-04-11T09:48:36.613
> 
> 标签：python

我想调用一个脚本，将字符串的内容传送到它的标准输入并检索它的标准输出。

我不想接触真正的文件系统，所以我不能为它创建真正的临时文件。

使用`subprocess.check_output`我可以获得脚本所写的任何内容；我怎样才能将输入字符串输入到它的标准输入中呢？

```
subprocess.check_output([script_name,"-"],stdin="this is some input")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 537, in check_output
    process = Popen(stdout=PIPE, *popenargs, **kwargs)
  File "/usr/lib/python2.7/subprocess.py", line 672, in __init__
    errread, errwrite) = self._get_handles(stdin, stdout, stderr)
  File "/usr/lib/python2.7/subprocess.py", line 1043, in _get_handles
    p2cread = stdin.fileno()
AttributeError: 'str' object has no attribute 'fileno' 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-11T09:58:08.170

使用`Popen.communicate`而不是`subprocess.check_output`.

```
from subprocess import Popen, PIPE

p = Popen([script_name, "-"], stdin=PIPE, stdout=PIPE, stderr=PIPE)
stdout, stderr = p.communicate("this is some input") 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-08-28T05:54:25.433

在 Python 3.4 及更高版本中，您可以在使用时使用*input*关键字参数通过 STDIN 发送输入`subprocess.check_output()`

引用[标准库文档`subprocess.check_output()`](https://docs.python.org/3.4/library/subprocess.html#subprocess.check_output)：

> *输入*参数被传递给`Popen.communicate()`子进程的标准输入。如果使用它必须是一个字节序列，或者一个字符串 if `universal_newlines=True`。使用时，内部`Popen`对象会自动创建`stdin=PIPE`，而*stdin*参数也可能不使用。

例子：

```
>>> subprocess.check_output(["sed", "-e", "s/foo/bar/"],
...                         input=b"when in the course of fooman events\n")
b'when in the course of barman events\n'
>>> 
>>> # To send and receive strings instead of bytes,
>>> # pass in universal_newlines=True
>>> subprocess.check_output(["sed", "-e", "s/foo/bar/"],
...                         universal_newlines=True,
...                         input="when in the course of fooman events\n")
'when in the course of barman events\n' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-05T23:25:23.620

这是带有输入的 python 2.7 的 check_output 反向移植版本。

```
from subprocess import (PIPE, Popen, CalledProcessError)

def check_output_input(*popenargs, **kwargs):
    """Run command with arguments and return its output as a byte string.

    If the exit code was non-zero it raises a CalledProcessError.  The
    CalledProcessError object will have the return code in the returncode
    attribute and output in the output attribute.

    The arguments are the same as for the Popen constructor.  Example:

    >>> check_output(["ls", "-l", "/dev/null"])
    'crw-rw-rw- 1 root root 1, 3 Oct 18  2007 /dev/null\n'

    The stdout argument is not allowed as it is used internally.
    To capture standard error in the result, use stderr=STDOUT.

    >>> check_output(["/bin/sh", "-c",
    ...               "ls -l non_existent_file ; exit 0"],
    ...              stderr=STDOUT)
    'ls: non_existent_file: No such file or directory\n'

    There is an additional optional argument, "input", allowing you to
    pass a string to the subprocess's stdin.  If you use this argument
    you may not also use the Popen constructor's "stdin" argument, as
    it too will be used internally.  Example:

    >>> check_output(["sed", "-e", "s/foo/bar/"],
    ...              input=b"when in the course of fooman events\n")
    b'when in the course of barman events\n'

    If universal_newlines=True is passed, the return value will be a
    string rather than bytes.

    """
    if 'stdout' in kwargs:
        raise ValueError('stdout argument not allowed, it will be overridden.')
    if 'input' in kwargs:
        if 'stdin' in kwargs:
            raise ValueError('stdin and input arguments may not both be used.')
        inputdata = kwargs['input']
        del kwargs['input']
        kwargs['stdin'] = PIPE
    else:
        inputdata = None
    process = Popen(*popenargs, stdout=PIPE, **kwargs)
    try:
        output, unused_err = process.communicate(inputdata)
    except:
        process.kill()
        process.wait()
        raise
    retcode = process.poll()
    if retcode:
        cmd = kwargs.get("args")
        if cmd is None:
            cmd = popenargs[0]
        raise CalledProcessError(retcode, cmd, output=output)
    return output 
```

# backbone.js - Backbone JS 过滤器表单

> ID：10103562
> 
> 赞同：1
> 
> 时间：2012-04-11T09:49:10.307
> 
> 标签：backbone.js

我有一个带有下拉列表和复选框的 UI，以便过滤从服务器返回的结果。

我想知道我是否必须创建一个模型以保持当前设置可用，或者只使用 jquery 获取 val 并将它们传递给 Collections fetch。

什么会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:20:38.047

*这取决于您想在设计*上投入多少，或者您可以采用更务实的方法。

如果您选择*设计*解决方案，我们可以说这里没有`Collection`我们正在玩的结果。它是一个`FilterSearch`模型，每次我们将*过滤器参数*发送到服务器时，我们所做的就是**创建**一个`FilterSearch`. 比方说：

```
POST http://myapp.com/filter_searchs?field1=value1&field2=value2 
```

服务器将接受此请求并将返回结果数组。比方说：

```
{
  "field1": "value1",
  "field2": "value2",
  "results": [ "result1", "result2" ]
} 
```

Backbone`FilterSearch`模型将使用服务器响应的信息进行*更新：*

```
var myFilterSearch = App.FilterSearch.new({ field1: "value1", field2: "value2" });
myFilterSearch.save({ wait:true }); 
```

从那里我们可以创建我们的结果`Collection`：

```
var myResults = App.Results.new( myFilterSearch.get( "results" ) ); 
```

*（所有代码均已简化，未经测试）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:29:10.850

另一种解决方案是将*过滤器字段*存储到`Collection`它自身中。

```
App.Results = Backbone.Collection.extend({
  url: function() {
    return "/results?field1=" + this.field1 + "&field2=" + this.field2 );
  }
});

var myResults = App.Results.new({ field1: "value1", field2: "value2" });
myResults.fetch(); 
```

这种方法很有趣，因为您只需修改 Collection 中的*过滤器字段*并调用即可更新结果，对 Collection`.fetch()`的所有引用都将保留。

*（所有代码均已简化，未经测试）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T14:25:39.243

对于使用主干过滤集合，最好的方法是获取集合并返回一个子集过滤集合，这也将使您的代码更具可重用性

要制作过滤器，您应该具有过滤功能

```
var yourCollection = Backbone.Collection.extend ({
    filtered : function () { 
```

我建议使用 UnderScore 过滤器，它将为有效返回 true，为无效返回 false，其中 true 是您要查找的内容。使用 this.models 获取当前集合模型 使用 model.get( '' ) 获取您要检查的元素，例如，您可能有一个显示特定类别的复选框

```
var results = _.filter( this.models, function ( model ) {
    if ( item.get('category') === 'y' ) 
         return true ; 
    return false ;
}); 
```

您可以使用所有下拉列表和复选框继续过滤结果然后使用下划线映射您的结果并将其转换为 JSON

```
results = _.map( results, function( model ) { return model.toJSON()  } ); 
```

最后返回一个只有结果的新主干集合

```
return new Backbone.Collection( results ) ; 
```

或者，如果您不想保留集合中的所有数据，而只想保留已过滤的数据，则可以重置集合并跳过上面的返回，例如

```
this.reset( results ) ; 
```

**查看**：*在这里您的 ui 数据请求您应该在使用 jquery 为值传递 ui 后调用过滤函数*

# regex - RegExp 如何检查文本是否与所有单词键匹配或匹配任意两个键

> ID：10103563
> 
> 赞同：0
> 
> 时间：2012-04-11T09:49:10.670
> 
> 标签：regex

我希望在某些条件下测试字符串匹配

条件：所有键都必须存在。

正则表达式：`^(?=.*key1)(?=.*key3)(?=.*key2)`

文本：`rer key1 werjk key2 and key2 and key3 and end`

文字匹配！

现在我的问题：

*   如何测试字符串以匹配三个键中的任意两个键？
*   如何测试字符串以匹配三个键中的任何一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:30:38.017

在单个正则表达式中解决这个问题并非易事。好吧，对于您展示的简单示例来说，这*是* 微不足道的，但它不会扩展，因为您需要自己进行可能的排列。

三分之二（以“可读性”的详细模式编写：

```
^
(?:
 (?=.*key1)(?=.*key2)(?!.*key3)
 |
 (?=.*key1)(?=.*key3)(?!.*key2)
 |
 (?=.*key3)(?=.*key2)(?!.*key1)
) 
```

三选一：

```
^
(?:
 (?=.*key1)(?!.*key2)(?!.*key3)
 |
 (?=.*key2)(?!.*key1)(?!.*key3)
 |
 (?=.*key3)(?!.*key2)(?!.*key1)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:42:41.517

如果键是纯字符串，那么在这种情况下，不使用正则表达式可能更有效、更清晰。`True == 1`例如在 Python 中（使用and的事实`False == 0`）：

```
def matchExactlyN(text, keys, n):
   return sum(key in text for key in keys) == n 
```

```
>>> text = "rer key1 werjk" 
>>> matchExactlyN(text, ["key1","key2","key3"], 1) # 1 of 3
True
>>> matchExactlyN(text, ["key1","key2","key3"], 2) # 2 of 3
False 
```

# cordova - 使用 OAuth2 联系 Google API 时的 Redirect_uri_mismatch

> ID：10103569
> 
> 赞同：6
> 
> 时间：2012-04-11T09:49:31.910
> 
> 标签：cordova, google-api, oauth-2.0, sencha-touch-2

我正在使用 Sencha Touch 和 PhoneGap 创建一个移动应用程序。我希望能够允许用户使用他们的 Google 凭据登录到应用程序，但是在初始请求中遇到了以下错误：

请求中的重定向 URI：[http://localhost](http://localhost)与注册的 URI 不匹配。

我的 Google API 帐户注册了默认的 2 个 URI（[http://localhost](http://localhost)和 urn:ietf:wg:oauth:2.0:oob）。

我已经尝试了这两种方法，但都没有成功。

我发送的请求包含以下查询字符串参数：

*   response_type: '代码'
*   client_id: <客户端 ID>
*   redirect_uri: ' [http://localhost](http://localhost) '
*   范围：' [https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me) '

基本流程是：

*   如上构建网址
*   打开新的浏览器窗口（使用 ChildBrowser PhoneGap 插件）
*   导航到 URL
*   此时谷歌登录页面显示并允许我输入凭据
*   登录点击后，我被带到包含上述错误的错误页面。

我正在 iPhone 模拟器和我的 iPhone 上对此进行测试，两者的结果相同。该应用程序似乎无法在[http://localhost](http://localhost) url 上运行，而是在 file:///var/mobile/Applications/<guid>/<app name>/www/index.html 上运行，但没有添加选项这在谷歌控制台中（..或者有吗？:)）

有人对为什么这不起作用有任何建议吗？我几乎没有使用 OAuth 和 Google 的 API 的经验，所以任何小提示都非常受欢迎！

提前致谢

斯图尔特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T20:18:30.020

[我建议您将此作为使用 OAuth2 的 Google API](https://developers.google.com/accounts/docs/OAuth2InstalledApp)的最佳起点，在您的情况下，您需要：[OAuth2 for Devices](https://developers.google.com/accounts/docs/OAuth2ForDevices)。

可能您使用了错误的端点，要请求**用户代码**，您需要使用以下端点：

```
https://accounts.google.com/o/oauth2/device/code 
```

这是一个使用 curl 的示例（在您的情况下授权访问*Google+ API*）：

```
curl https://accounts.google.com/o/oauth2/device/code -d "client_id=**your_client_id**" -d "scope=https://www.googleapis.com/auth/plus.me" -d "redirect_uri=urn:ietf:wg:oauth:2.0:oob" 
```

你会得到这样的答案：

```
{
  "device_code" : "4/AToZcyQ7U1BTV-xu4LAqpw02SgIW",
  "user_code" : "bqsj67hb",
  "verification_url" : "http://www.google.com/device",
  "expires_in" : 1800,
  "interval" : 5
} 
```

然后您需要请求授权，向用户显示**user_code**和**verify_url**以将您的应用与用户的用户帐户“配对”。[这里有一个很好的例子](http://www.tekgazet.com/android-phone-youtube-remote-control-computer/net/2272.html)或来自[文档](https://developers.google.com/accounts/docs/OAuth2ForDevices#obtainingacode)：

> 在您的应用程序向用户显示**user_code**和**verify_url后，您的应用程序可能会开始使用与****user_code**和**verify_url**返回的**device_code**轮询 Google 端点。要轮询的端点的 URL 是[https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token)，请求之间的间隔指定为以秒为单位的间隔。

 ****最后一步，使用 curl 请求 access_token：

```
curl https://accounts.google.com/o/oauth2/token -d "client_id=**your_client_id**&client_secret=**your_client_secret**&code=**the _device_code_obtained_before**&grant_type=http://oauth.net/grant_type/device/1.0" 
```

你会得到这样的回应：

```
{
  "access_token" : "y23r9.AHES6ZT78qJl14pTueruthfh5676TYDF234-Eme33iQ",
  "token_type" : "Bearer",
  "expires_in" : 3600,
  "id_token" :  "eyJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXVkIjoiNzgyMTM3OTUzMjkwLmFwcHMuZ29vZ2iLCJ0b2tlbl9oYXNoIjoiUUt0YmxTZUdsRUdNOVdPcUliRGR2QSIsImlhdCI6MTMzNDE3MDI1NywiZXhwIjoxMzM0MTc0MTU3fQ.Iz_Sv9X2fCydj4VfEdDxwWVH70DEK-rSzA5pWV9bvBdYB5VwgwFd8CSnotesDzJxq5pSKGwnAgvBfxSUbuGVmdET3E2sbrLODKymO9FoBzenfVooCwRXurzxvjKWF1EL3007lOPzTx9UGjqwShjjKQRoNjLFs-OmGCJsZGTHTGE",
  "refresh_token" : "1/gjgpKUyppp223s43HMerTX-zS_2JUxQOCk"
} 
```

**最后，您可以使用获取的access_token**访问您授予的服务（不要忘记从 API 控制台配置访问权限，在您的情况下是 Google+ API）。

```
curl https://www.googleapis.com/plus/v1/people/me?access_token=y23r9.AHES6ZT78qJl14pTueruthfh5676TYDF234-Eme33iQ 
```

* * *

关于问题

> “应用程序似乎无法在[http://localhost](http://localhost) url 上运行”。

答案是**肯定的，这是预期的行为**。此**redirect_uri**告诉您在成功授予应用程序权限后*回调的位置。*在您的情况下是移动设备。

在*"urn:ietf:wg:oauth:2.0:oob"*的情况下，不完全是重定向。你需要“抓住”或“钩住”这个，以简单地继续你的过程，也许[这可以帮助你](https://stackoverflow.com/q/4188581/431841)或[这个](http://code.google.com/p/gtm-oauth2/wiki/Introduction)。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T06:26:13.590

我的回答不是关于移动应用程序，但可能对其他人有帮助。我有一个 redirect_url_mismatch，我通过在 [Google Cloud Console](https://cloud.google.com/console#/project)中编辑重定向 url 解决了这个问题。**url 必须完全**匹配，所以这`http://localhost:8080`与`http://localhost:8080/`.

[我可以通过在浏览器中打开这个链接](https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=xxxxxxxxxxxx.apps.googleusercontent.com&redirect_uri=http://localhost:8080/&scope=https://www.google%5C%20apis.com/auth/analytics.readonly&access_type=offline)来测试它（替换你的`client_id`）。如果`redirect_uri`错误，它会抱怨；如果正确或您已经授权访问，它将重定向到`localhost:8080`. 此外，如果您已经授权访问，可以在[此处](https://accounts.google.com/IssuedAuthSubTokens)撤销它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:42:53.823

我遇到了类似的问题，我做了以下事情：在 API 控制台中将我的应用程序注册为 Web 应用程序，而不是已安装的应用程序。因此，我可以注册一个 http:// URL 作为重定向 uri。我在 Apache 服务器上的重定向 URL 的页面正文是：

```
<? header("Location:myapp://authorize?code=".$_GET['code']); ?> 
```

有了这个，应用程序的行为实际上与其他 OAuth 授权服务相同，例如 facebook...****

# php - CURLOPT_FOLLOWLOCATION

> ID：10103571
> 
> 赞同：10
> 
> 时间：2012-04-11T09:49:40.330
> 
> 标签：php

我查找了谷歌以获取更多信息。但我读得越多，我就越困惑或好奇

我知道`CURLOPT_FOLLOWLOCATION()`后面是“位置”，但是位置是什么？是初始化的url吗？

```
 curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, false); 
```

我只需要将数据发布到 icontact 邮件列表中 - 那么上面的这段代码会阻止数据进入邮件列表吗？

我打印`$result`并看到数据进入了正确的邮件列表，尽管我看不到数据是否来自表单的正确数据。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T10:04:23.147

引用[文档](http://es.php.net/curl_setopt)：

> **CURLOPT_FOLLOWLOCATION** `TRUE`跟在服务器作为 HTTP 标头的一部分发送的任何“Location:”标头之后（注意这是递归的，PHP 将跟在它发送的尽可能多的“Location:”标头之后，除非 `CURLOPT_MAXREDIRS`已设置）。

当您请求一个 URL 时，有时可能会被重定向到某个其他 URL。在 PHP 中，它会完成：

```
header('Location: http://example.com/'); 
```

该指令指示 CURL 加载该 URL 而不是原始 URL，如 HTTP 要求的那样。通常没有充分的理由禁用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T09:52:27.313

它告诉 CURL 是否忽略 30x HTTP 重定向标头。如果设置为 true，`"Location: <someurl>"`响应中的 HTTP 标头将导致 CURL 向此标头中指定的位置发出另一个请求。

# iphone - 我们可以对 UITextView 执行哪些 addTarget 操作？

> ID：10103572
> 
> 赞同：7
> 
> 时间：2012-04-11T09:49:44.530
> 
> 标签：iphone, objective-c, ios, uitextview

我想在 UITextView 上使用 addTarget:action，就像在（UITextField 或 UIButton）上一样。

我想在 UITextView 上调用一个方法。

请给出一些可能的解决方案...

谢谢你...

```
UITextView  *TXT_First_Tag = [[UITextView alloc] initWithFrame:CGRectMake(5, textPosY, 350, 65)];
TXT_First_Tag.backgroundColor = [UIColor whiteColor];
TXT_First_Tag.font = [UIFont fontWithName:@"Arial-BoldMT" size:30.0];
TXT_First_Tag.editable =YES;
TXT_First_Tag.tag = i; 
TXT_First_Tag.textColor = [UIColor blackColor];

[TXT_First_Tag addTarget:self action:@selector(C6Loop) forControlEvents:UIControlEventEditingDidEnd]; //  This Line I want to use, it's working fine on textfield...
[scrollview addSubview:TXT_First_Tag]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T11:27:27.377

为此，我们使用 UITextView 委托方法。

把它放在你的代码中。

```
UITextView  *TXT_First_Tag = [[UITextView alloc] initWithFrame:CGRectMake(5, textPosY, 350, 65)];
TXT_First_Tag.backgroundColor = [UIColor whiteColor];
TXT_First_Tag.font = [UIFont fontWithName:@"Arial-BoldMT" size:30.0];
TXT_First_Tag.editable =YES;
TXT_First_Tag.delegate  =   self;
TXT_First_Tag.tag = i; 
TXT_First_Tag.textColor = [UIColor blackColor];
[scrollview addSubview:TXT_First_Tag];

- (void)textViewDidBeginEditing:(UITextView *)textView{
    NSLog(@"Begin editing");
}

- (void)textViewDidEndEditing:(UITextView *)textView{
    NSLog(@"DidEndEditing");
}

- (BOOL)textViewShouldBeginEditing:(UITextView *)textView{
    NSLog(@"ShouldBeginEditing");
    return TRUE;
}

- (BOOL)textViewShouldEndEditing:(UITextView *)textView{
    NSLog(@"ShouldEndEditing");
    return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T10:33:23.240

如果你的控制器实现了`UITextViewDelegate`协议，那么你可以在控制器的实例方法中将控制器设置为**文本视图的**委托，`viewDidLoad()`：

```
yourTextView.delegate = self; 
```

然后，如果您想在编辑**文本视图**之前执行任务，请使用：

```
-(void)textViewDidBeginEditing:(UITextView *)textView {} 
```

而且，如果您想在编辑**文本视图**后执行任务，请使用：

```
-(void)textViewDidEndEditing:(UITextView *)textView {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T01:30:01.170

伙计们，尽管您的回答没有直接解决我的问题，但它帮助我缩小了范围。

我在每个单元格中都有文本视图，并且需要传递正在编辑的文本视图，以便我可以更新数据库。

简而言之，我将每个单元格中的每个 textview 标签设置为 indexpath.row。然后我通过 textview.tag 在委托中引用该单元格

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {  

    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil)
    {
    [[NSBundle mainBundle] loadNibNamed:@"frontCell" owner:self options:nil];
    cell = mainPageCell;
    self.mainPageCell = nil;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }    

    UITextView *trackDetails;
    trackDetails = (UITextView *)[cell viewWithTag:22];
    trackDetails.text = [[myArray objectAtIndex:indexPath.row] objectAtIndex:0];
    trackDetails.delegate = self;
    trackDetails.tag = indexPath.row;

    }

    - (void)textViewDidEndEditing:(UITextView *)textView
    {
    NSLog(@"%d",textView.tag);
    UPDATE DATABASE WITH CHANGED TEXT
    [textView resignFirstResponder];
    [self.tableView reloadData];
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:55:24.603

当然，获得“编辑结束”消息的更好方法是实现`UITextViewDelegate`？

```
TXT_First_Tag.delegate = self;

... 

- (void)textViewDidEndEditing:(UITextView *)textView {
  // stuff you'd put in C6Loop 
```

# cakephp - Saveall 不工作

> ID：10103573
> 
> 赞同：0
> 
> 时间：2012-04-11T09:49:54.847
> 
> 标签：cakephp, cakephp-2.0

我正在使用 cake 2.0.6 并尝试保存多个记录，这些记录是我从表单输出的数据的产品，如下所示；

我无法保存两条记录，我的表单中的字段设置为；0 是它应该保存的第一条记录。由于某种原因，它不会保存 2 条记录。我已经关闭了产品模型的所有验证并且没有 beforesave 方法

有什么想法有什么问题吗？

```
<input name="data[Product][0][product_code]"/>
<input name="data[Product][0][colour]"/>
<input name="data[Product][0][lead_time_weeks]"/>
<input name="data[Product][0][description]"/>
<input name="data[Product][0][height]" />
<input name="data[Product][0][width]" />
<input name="data[Product][0][depth]" />
<input name="data[Product][0][price]" />
<input name="data[Product][0][discount]" />
<input name="data[Product][0][discounted_price]" />
<input name="data[Product][0][quantity]"/>

<input name="data[Product][1][product_code]"/>
<input name="data[Product][1][colour]"/>
<input name="data[Product][1][lead_time_weeks]"/>
<input name="data[Product][1][description]"/>
<input name="data[Product][1][height]" />
<input name="data[Product][1][width]" />
<input name="data[Product][1][depth]" />
<input name="data[Product][1][price]" />
<input name="data[Product][1][discount]" />
<input name="data[Product][1][discounted_price]" />
<input name="data[Product][1][quantity]"/>

Array
(
    [Product] => Array
        (
            [0] => Array
                (
                    [product_code] => fgfgf
                    [colour] => 
                    [lead_time_weeks] => 
                    [description] => 
                    [height] => 11111
                    [width] => 22222
                    [depth] => 
                    [price] => 
                    [discount] => 50
                    [discounted_price] => 
                    [quantity] => 
                )

            [1] => Array
                (
                    [product_code] => fgfgf
                    [colour] => 
                    [lead_time_weeks] => 
                    [description] => 
                    [height] => 123
                    [width] => 123
                    [depth] => 
                    [price] => 
                    [discount] => 50
                    [discounted_price] => 
                    [quantity] => 
                )

        )

) 
```

编辑：供将来参考的解决方案；像这样调用保存方法；

$this->Product->saveAll($this->request->data['Product']

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T09:54:26.050

你怎么叫`saveAll`？常见的错误是将其称为

```
$this->Product->saveAll($data); 
```

当你应该这样做的时候

```
$this->Product->saveAll($data['Product']); 
```

它必须在没有模型键的情况下进行数字索引

根据文档： [https ://book.cakephp.org/2.0/en/models/saving-your-data.html](https://book.cakephp.org/2.0/en/models/saving-your-data.html)

> 请注意，我们传递的是 $data['Article'] 而不是通常的 $data。当保存同一模型的多条记录时，记录数组应该只是在没有模型键的情况下进行数字索引。

# php - 使用 PHP cURL 检查 url 是否存在

> ID：10103578
> 
> 赞同：1
> 
> 时间：2012-04-11T09:50:12.007
> 
> 标签：php, curl

目前我正在使用以下功能

```
function urlExist($url)
{
                $handle   = curl_init($url);
                if (false === $handle)
                {
                        return false;
                }
                curl_setopt($handle, CURLOPT_HEADER, false);
                curl_setopt($handle, CURLOPT_FAILONERROR, true);  // this works
                curl_setopt($handle, CURLOPT_HTTPHEADER, Array("User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15") ); // request as if Firefox
                curl_setopt($handle, CURLOPT_NOBODY, true);
                curl_setopt($handle, CURLOPT_RETURNTRANSFER, false);
                $connectable = curl_exec($handle);
                ##print $connectable;
                curl_close($handle);
                return $connectable;
} 
```

它适用于简单的 url，但不适用于重定向到另一个域的 url

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T09:52:37.047

您需要设置`FOLLOWLOCATION`：

```
curl_setopt($handle, CURLOPT_FOLLOWLOCATION, true); 
```

*但是*，在这里发出 GET 请求是没有意义的。一个简单的 HEAD 更轻，因为只传输标题。为此，请设置`NOBODY`为 true：

```
curl_setopt($handle, CURLOPT_NOBODY, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-11T09:12:29.240

我正在使用相同的功能，但我没有遇到域 trieuvieclam.com 重定向到新域的问题。我正在使用 CHROME 浏览器

```
function url_exists($url) {
    $handle   = curl_init($url);
    if (false === $handle)
    {
            return false;
    }

    curl_setopt($handle, CURLOPT_HEADER, false);
    curl_setopt($handle, CURLOPT_FAILONERROR, true);  // this works
    curl_setopt($handle, CURLOPT_HTTPHEADER, Array("User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15") ); // request as if Firefox
    curl_setopt($handle, CURLOPT_NOBODY, true);
    curl_setopt($handle, CURLOPT_RETURNTRANSFER, false);
    curl_setopt($handle, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($handle, CURLOPT_CONNECTTIMEOUT, 3);
    $connectable = curl_exec($handle);
    ##print $connectable;
    curl_close($handle);
    if($connectable){
        return true;
    }
    return false;
} 
```

我尝试将这一行 : 更改`curl_setopt($handle, CURLOPT_FOLLOWLOCATION, true);`为`false`，但结果仍然相同（现有域）。

```
if (false === $handle)
        {
                return false;
        } 
```

这个条件永远不会满足任何字符串，甚至不是 url，也许它只在服务器不支持 curl 时才匹配。

# jakarta-ee - 在 textArea 中显示 logslf4J 和 tomcat 的日志跟踪

> ID：10103579
> 
> 赞同：0
> 
> 时间：2012-04-11T09:50:14.383
> 
> 标签：jakarta-ee, logging, log4j, tomcat7

我正在使用 Java EE，我想在 textArea 中显示 logslf4J 和 Tomcat 的日志跟踪。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:50:08.427

看看这个开源项目如何使 Tomcat 日志可访问。

[http://code.google.com/p/psi-probe/](http://code.google.com/p/psi-probe/)

# android - 滑动抽屉无返回点

> ID：10103583
> 
> 赞同：0
> 
> 时间：2012-04-11T09:50:25.237
> 
> 标签：android, slidingdrawer

我正在使用 SlidingDrawer 作为锁定屏幕。我的问题是当我拖动到滑动抽屉的中间时处理程序关闭。我希望它只在我拖动关闭时保持关闭。在所有其他情况下，处理程序必须是动画才能打开。我正在尝试处理：

```
public void onScrollEnded() {
    if (!slide.isOpened())
        slide.open();
} 
```

它打开，但在此之后，它继续正常运动。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:04:17.220

你有没有看过

```
setOnDrawerScrollListener(SlidingDrawer.OnDrawerScrollListener onDrawerScrollListener) 
```

[SlidingDrawer 的 API 参考。](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

# ruby-on-rails - 如何在rails中获取linkedin个人资料信息？

> ID：10103585
> 
> 赞同：1
> 
> 时间：2012-04-11T09:50:31.087
> 
> 标签：ruby-on-rails, linkedin

嗨，我正在使用linkedin gem 与rails 中的linkedin 连接。这是我的控制器。

```
class LoginsController < ApplicationController
  helper_method :current_user

  def show
  end

  def create
    request_token = consumer.get_request_token(:oauth_callback => callback_login_url)
    Rails.cache.write(request_token.token, request_token.secret)
    redirect_to request_token.authorize_url
  end

  def callback
    request_token = OAuth::RequestToken.new(consumer, params[:oauth_token], Rails.cache.read(params[:oauth_token]))
    access_token = request_token.get_access_token(:oauth_verifier => params[:oauth_verifier])
    session[:access_token] = access_token.token
    session[:access_token_secret] = access_token.secret
    redirect_to :action => :show
  end

  def logout
    reset_session
    redirect_to :action => :show
  end

  private
  CONSUMER_KEY = {
    :key => "ddddd",
    :secret => "eeeeeeeeee"
  }
  CONSUMER_OPTIONS = { :site => 'https://api.linkedin.com',
                     :authorize_path => '/uas/oauth/authorize',
                     :request_token_path => '/uas/oauth/requestToken',
                     :access_token_path => '/uas/oauth/accessToken' }

  def consumer
    @consumer ||= OAuth::Consumer.new( CONSUMER_KEY[:key], CONSUMER_KEY[:secret], CONSUMER_OPTIONS)
  end

  def access_token
    if session[:access_token]
      @access_token ||= OAuth::AccessToken.new(consumer, session[:access_token], session[:access_token_secret])
    end
  end

  def current_user
    if access_token
      @current_user ||= JSON.parse(access_token.get('http://api.linkedin.com/v1/people/~', 'x-li-format' => 'json').body)
    end
    @current_user
  end

end 
```

**这就是我的观点：**

```
<% if current_user %>
  Welcome to Lovelinked , <%=link_to current_user['firstName'], current_user['siteStandardProfileRequest']['url'] %>
  <%=link_to current_user['lastName'], current_user['siteStandardProfileRequest']['url'] %>
  <%=button_to "Sign Out", logout_login_path, :method => :get %>
<% else %>
  Sign in with LinkedIn
  <%=button_to "Sign In", login_path, :method => :post %>
<% end %> 
```

我能够获取 firstName 和 lastName 并传递了诸如 images_url 和 location 之类的参数，但它不起作用，如何获取这些信息以及教育 currentcompanyname 等。

请帮助我，我用谷歌搜索但无法获得正确的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T11:32:11.900

试试 gem `linkedin-scraper` [https://github.com/yatishmehta27/linkedin-scraper](https://github.com/yatishmehta27/linkedin-scraper)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:42:44.263

使用“linkedin”gem，您可以执行以下操作来获取您正在寻找的信息作为字符串数组返回。

```
user = client.profile(:fields => %w(positions))
companies = user.positions.all.map{|t| t.company}
# And if you want the most recent company it can be accessed via companies[0] 
```

所有这些信息都可以在[https://github.com/pengwynn/linkedin/blob/master/examples/profile.rb找到](https://github.com/pengwynn/linkedin/blob/master/examples/profile.rb)

# c# - 在第一个方法完成后使用线程功能c#启动第二个方法

> ID：10103591
> 
> 赞同：0
> 
> 时间：2012-04-11T09:50:57.287
> 
> 标签：c#, multithreading, methods, status

我有一种方法是重建网上商店的产品目录。在我更改一些产品信息后，这是必要的。在重建方法之后，我想开始第二种方法来生成网店的全文索引。我可以查看第一种方法（RebuildCatalog）的状态。如果状态是“RebuildFinished”，那么我想开始第二种方法（GenerateFullTextIndex）。我想使用线程功能。有人可以创建一个如何实现此场景的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:53:52.247

> 我想使用线程功能。

听起来真的不像你。一个又一个完成后开始一个方法很简单：

```
var status = RebuildCatalog();
if (status == Status.RebuildFinished)
{
    GenerateFullTextIndex();
} 
```

无需穿线。如果你*真的*认为你需要多个线程，你应该解释*为什么*你认为它们会有所帮助。什么时候需要同时执行多个任务？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:03:10.973

好吧，如果您想使用多个线程并在*链*中组织您的调用，以便它们在另一个线程上按顺序执行，并且您正在使用`.NET Framework 4.0>`，您可以使用[Task Parallelism](http://msdn.microsoft.com/en-us/library/dd537609.aspx)，例如使用[Task::ContinueWith](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.continuewith.aspx)方法。

示例（来自 MSDN 的 preudocode）：

```
Task<byte[]> getData = new Task<byte[]>(() => GetFileData());
Task<double[]> analyzeData = getData.ContinueWith(x => Analyze(x.Result));
Task<string> reportData = analyzeData.ContinueWith(y => Summarize(y.Result));
getData.Start();

            //or...
Task<string> reportData2 = Task.Factory.StartNew(() => GetFileData())
              .ContinueWith((x) => Analyze(x.Result))
              .ContinueWith((y) => Summarize(y.Result)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:03:13.220

使用事件似乎比查看状态更简单。

在您的重建目录代码中，在完成时触发“完成”事件：

```
public event EventHandler<EventArgs> RebuildFinished;

private void Rebuild(...)
{
    // Rebuild the catalog

    this.RebuildFinished(this, new EventArgs(...));
} 
```

然后处理它：

```
this.catalog.RebuildFinished += this.RebuildFinished;

private void RebuildFinished(object sender, EventArgs e)
{
    // Rebuild the index
} 
```

现在这两个都可以（并且可能应该）使用线程来确保应用程序的 UI 保持响应：

```
this.catalogThread = new Thread(new ThreadStart(this.catalog.Rebuild)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T21:16:58.397

```
BackgroundWorker bw1 = new BackgroundWorker();//To rebuild catalog.
BackgroundWorker bw2 = new BackgroundWorker();//To generate text.

public Form1()
{
    InitializeComponent();

    bw1.DoWork += bw1_DoWork;
    bw1.RunWorkerCompleted += bw1_RunWorkerCompleted;
    bw2.DoWork += bw2_DoWork;
    bw2.RunWorkerCompleted += bw2_RunWorkerCompleted;

    bw1.RunWorkerAsync();//Start new thread. - Rebuild catalog.
}

void bw1_DoWork(object sender, DoWorkEventArgs e)
{
    //Rebuild catalog.
}

void bw1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    bw2.RunWorkerAsync();//Generate text.
}

void bw2_DoWork(object sender, DoWorkEventArgs e)
{
    //Generate text.
}

void bw2_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    //Whatever...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:03:06.230

正如我可以从您的问题中假设的那样，您的重建方法可能会占用大量时间，这就是您想要在单独的线程中运行的原因。因此我建议实现[基于事件的异步模式](http://msdn.microsoft.com/en-us/library/e7a34yad.aspx)。当您的重建（异步）方法完成时，它将使用 AsyncCompletedEventArgs 抛出完成的事件（您可以将其子类化以传递结果状态），然后您将开始您的第二个方法。

# sql - 连接多个表和视图

> ID：10103592
> 
> 赞同：0
> 
> 时间：2012-04-11T09:51:01.273
> 
> 标签：sql, sql-server, database, view

```
 SELECT  dbo.Monitor_Request.WorkDesc
          , dbo.Monitor_Request.Request_ID
          , dbo.Monitor_Request.Due_Dt
          , dbo.Monitor_Request.Attempts
          , dbo.Monitor_Request.Status_Ind
          , dbo.Monitor_Request.Create_Dt
          , dbo.Monitor_Request.Monitor_ID
          , dbo.Monitor_Request.ByCustomer_ID
          , dbo.Monitor_Request.ByCompanyID
          , dbo.CompanyShim.Company_Name
          , dbo.PostalAddressShim.HouseName
          , dbo.PostalAddressShim.Street
          , dbo.PostalAddressShim.Town
          , dbo.PostalAddressShim.City
          , dbo.PostalAddressShim.County
          , dbo.PostalAddressShim.Postcode
    FROM  dbo.PostalAddressShim 
          RIGHT OUTER JOIN dbo.CompanyShim ON dbo.PostalAddressShim.Address_ID = dbo.CompanyShim.Company_Address_ID 
          RIGHT OUTER JOIN dbo.CUSTOMER ON dbo.PostalAddressShim.Address_ID = dbo.CUSTOMER.Address_ID 
          RIGHT OUTER JOIN dbo.Monitor_Request ON dbo.CUSTOMER.Customer_ID = dbo.Monitor_Request.ByCustomer_ID 
                                                  AND dbo.CompanyShim.Company_ID = dbo.Monitor_Request.ByCompanyID 
```

我创建了一个视图来显示客户详细信息及其地址。客户可以是个人或公司。它们存储在不同的表中。对于个人，详细信息存储在名为 Customer 的表中，公司详细信息存储在 Company 表中。我正在尝试创建数据库中所有客户的视图以显示他们的地址。当我分别加入表格时，我得到了地址详细信息，但如果我同时加入两个表（客户和公司），我没有得到地址详细信息列的空值。

如何从数据库中获取客户（个人或公司）的所有地址详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:08:35.910

乍一看，尝试将您`RIGHT OUTER JOIN`的 s 更改为`LEFT OUTER JOIN`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:11:17.477

我很少发现需要使用`RIGHT OUTER JOIN`它，每次遇到它，它都会迫使我从右到左思考复杂的事情。

如果我没有搞砸，下面的连接应该和你写的一样

**SQL 语句**

```
dbo.Monitor_Request mr 
LEFT OUTER JOIN dbo.Customer c ON c.Customer_ID = mr.ByCustomerID
LEFT OUTER JOIN dbo.CompanyShim cs ON cs.Company_ID = mr.ByCompanyID
LEFT OUTER JOIN dbo.PostalAddressShim pas ON pas.Address_ID = c.Address_ID
                                             AND pas.Address_ID = cs.Company_Address_ID 
```

现在这是我**可以**阅读和理论化的东西。从该声明中显而易见的是，`AND`将地址与客户和公司有效地相互否定并且根本不返回地址的条款。

我的猜测是你应该简单地

*   替换你`RIGHT JOINS`的`LEFT JOINS`
*   使用`OR`而不是`AND`

**SQL 语句**

```
dbo.Monitor_Request mr 
LEFT OUTER JOIN dbo.Customer c ON c.Customer_ID = mr.ByCustomerID
LEFT OUTER JOIN dbo.CompanyShim cs ON cs.Company_ID = mr.ByCompanyID
LEFT OUTER JOIN dbo.PostalAddressShim pas ON pas.Address_ID = c.Address_ID
                                             OR pas.Address_ID = cs.Company_Address_ID 
```

# facebook-graph-api - 删除所有相册？

> ID：10103598
> 
> 赞同：0
> 
> 时间：2012-04-11T09:51:41.260
> 
> 标签：facebook-graph-api, photos

由于我们的一个应用程序中存在“错误”，我们现在在 Facebook 页面上有超过 1000 个（！）专辑。问题是如何自动删除所有相册？可以在这里联系facebook并要求删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:08:40.760

Facebook 不提供通过 API 删除相册的方法，因此您可能需要手动执行此操作。

# magento-1.5 - 最近查看的产品块位于产品列表页面的底部 -magento

> ID：10103600
> 
> 赞同：0
> 
> 时间：2012-04-11T09:51:41.883
> 
> 标签：magento-1.5

我想在产品列表页面的页面底部显示最近查看的产品块（在左侧、内容和右侧块之外）。它必须从页面的左到右显示，我在许多论坛中搜索，但我没有得到正确的答案，谁能帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:27:18.440

您想在“产品视图页面”上显示它吗，如果是，那么您可以像这样更改 xml 文件，注释掉右侧显示它的位并写下这个（假设您使用 Magento 的最新 1.6.x 版本，）

```
 <catalog_product_view translate="label">
    <reference name="content">
        <block type="reports/product_viewed" name="right.reports.product.viewed" as="recently_viewed" template="reports/product_viewed.phtml" />
    </reference>
</catalog_product_view> 
```

这应该会在主要内容区域的产品页面上显示“最近查看的产品”。

# meteor - Meteor 应用程序的可扩展性

> ID：10103603
> 
> 赞同：30
> 
> 时间：2012-04-11T09:51:51.207
> 
> 标签：meteor

假设您的应用程序被足够多的用户击中以停止运行，它会启动另一个实例吗？你打算在未来如何解决这个问题？

伊恩

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-11T18:49:22.687

不确定您是指使用“meteor bundle”构建的应用程序还是使用“meteor deploy”在免费主机上部署的应用程序。

使用“meteor deploy”部署到托管服务器的应用程序还没有任何关于扩展的保证或 SLA。但是，服务器可以处理相当多的负载。meteor.com 托管在meteor deploy 上，它在 Meteor 发布后幸存下来。

使用“meteor bundle”生成的服务器包基本上是一个单进程应用程序。这取决于您将其连接到多个实例，或者您想要实现自动缩放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T03:26:28.740

我对你的问题不太清楚。不是询问流星框架的可伸缩性或流星应用程序托管环境的可伸缩性。没关系，就这样吧

随着 Meteor 框架生态系统的发展，您的可扩展性问题将得到解答，目前您可以通过 Packages 调用尽可能多的小代码模块。

Meteor`meteor bundle`需要[更多](http://docs.meteor.com/#deploying)的东西，最终让您可以在全球任何地方部署您的应用程序，然后您可以拥有自己的基础设施设置来运行您的应用程序（类似于网络负载均衡器托管 NodeJS 服务器和可扩展的多个 MongoDB 实例）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T18:28:54.633

一般来说，Meteor 可以通过捆绑和使用您自己的基础设施（如 mongo、应用程序服务器）来扩展使用。就像@n1mmy 所说，当应用程序被捆绑时，您可以指定一个特定的 mongo 端点，您可以从该端点扩展数据存储。此外，当 bundle 运行时，它实际上是在 nodejs 上运行的，这意味着您可以像 nodejs 应用程序一样扩展您的 Web 应用程序。如果您的应用程序有太多用户，我认为这两种方式都可以缓解您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T13:58:18.807

理论上 Meteor 的缩放比例很好，但在实践中它是否真的适合你，这一切都取决于你如何处理数据。这是一篇关于 Meteor 可扩展性的优秀文章： [https ://www.discovermeteor.com/blog/scaling-meteor-the-challenges-of-realtime-apps/](https://www.discovermeteor.com/blog/scaling-meteor-the-challenges-of-realtime-apps/)

# linux - linux命令行：du ---如何让它只显示每个目录的总数

> ID：10103604
> 
> 赞同：88
> 
> 时间：2012-04-11T09:51:53.803
> 
> 标签：linux, command-line

我这样做是通过（使用 coreutils_8.5-1ubuntu6_amd64）：

```
du -sch `find ./ -maxdepth 1 -type d` 
```

我正在寻找一种简单的方法（更短的 cmd）来查找**子目录的大小**。谢谢你。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-04-11T09:58:20.763

这适用于 coreutils 5.97：

`du -cksh *`

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-04-11T09:55:12.487

在我的 du 版本（来自 coreutils 8.14）上，这有效：

```
du -h -d 1 
```

-h 用于人类可读的大小。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-09-26T22:29:28.853

以下为我完成了这项工作：

`du -hs */`

如果没有尾部斜杠，则输出不限于目录。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-04-07T07:00:32.557

嗨，我认为这个命令是你的答案

杜 -sh *

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-05T04:09:08.973

其实你可以试试：

```
du -kh | cut -f1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-28T15:44:13.757

不确定 coreutils，但我喜欢`df -h <directory>`or `df -h`。-h 用于人类可读。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T09:57:22.013

创建别名：

```
alias subs="du -sch `find ./ -maxdepth 1 -type d`" 
```

而且我认为“潜艇”要短得多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-03T04:39:29.560

所有这些答案都对我不起作用，我认为某些参数取决于环境。

所以我这样做了：

```
du -csh /home/pi/walala/* | grep total | sed 's/ *\stotal* *\(.*\)/\1/' 
```

或字节

```
du -csb /home/pi/walala/* | grep total | sed 's/ *\stotal* *\(.*\)/\1/' 
```

# c# - 影响 ListView 标头的 Windows 主题

> ID：10103609
> 
> 赞同：10
> 
> 时间：2012-04-11T09:52:24.423
> 
> 标签：c#, winforms, visual-c++, listview, windows-xp

我用一个包含 ListView 的简单表单创建了新的 Windows 窗体应用程序 (C#)。然后我将[View 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.view.aspx)更改为 Details 并增加了此 ListView 中使用的字体大小，结果如下：

这是它在带有 Windows Classic 主题的 Windows XP 上的外观：
![在此处输入图像描述](../Images/9fe55d2371aae53600abf615010327eb.png)

这是 Windows XP 主题的结果：
![在此处输入图像描述](../Images/2dd5760d675ecc93eca1664bf1de5321.png)

[`Application.EnableVisualStyles()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.enablevisualstyles.aspx)我可以通过删除调用或更改 来防止我的应用程序的外观受到视觉样式的影响[`Application.VisualStyleState`](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstylestate.aspx)： ![在此处输入图像描述](../Images/51a3a8ef63acbcc76c97d54ee471e770.png)
尽管此更改使 ListView 具有所需的外观，但它也会影响其他控件的外观。我希望我的 ListView 是**唯一不受 Visual Styles 影响的控件**。

我还发现了类似的问题试图解决它：
[你能关闭一个单一的窗口控件的视觉样式/主题吗？](https://stackoverflow.com/q/544203/1168156)
[如何仅禁用一个控件而不是其子控件的视觉样式？](https://stackoverflow.com/q/298486/1168156)

不幸的是，没有一个提到的解决方案有效。**看起来标题本身将由一些受视觉样式影响的控件组成，即使 ListView 控件的视觉样式被禁用也是如此。**

**任何可以防止视觉样式影响 ListView 标头外观的 C# 解决方案都将受到赞赏。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:13:28.620

看起来这是一个[已知的错误](http://www.pcreview.co.uk/forums/listview-columnheader-cutting-off-font-not-big-enough-t1325223.html)，没有简单的解决方法。根据那里的答案：

> 在对这个问题进行了大量研究后，我们发现这是一个 Windows 操作系统的错误，ComCtl6.0 标头控件忘记将字体信息应用于绘图 DC。

但是，您可以自己绘制列标题。有关如何执行此操作的详细信息，请参阅[***MSDN 上的这篇文章，***](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.ownerdraw.aspx)并查看`listView1_DrawColumnHeader`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:01:57.790

禁用视觉样式怎么样？

使用此代码，您可以禁用一个控件的样式（只需使用 ListViewConstrol 而不是 ListView）：

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

public class ListViewControl : ListView {
  [DllImportAttribute("uxtheme.dll")]
  private static extern int SetWindowTheme(IntPtr hWnd, string appname, string idlist);

  protected override void OnHandleCreated(EventArgs e) {
    SetWindowTheme(this.Handle, "", "");
    base.OnHandleCreated(e);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T14:02:08.960

经过艰苦的研究，我发现了它。问题是当你打电话时

```
SetWindowTheme(this.Handle, "", ""); 
```

在自定义`ListView`类中，它可以防止视觉样式影响`ListView`控件的外观，但不会影响`ListView`标题控件（`SysHeader32`窗口），它是`ListView`. **所以在调用`SetWindowTheme`函数的时候，我们需要提供头部窗口的句柄，而不是ListView的句柄：**

```
[DllImportAttribute("uxtheme.dll")]
private static extern int SetWindowTheme(IntPtr hWnd, string appname, string idlist);

[DllImport("user32")]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool EnumChildWindows(IntPtr window, EnumWindowProc callback, IntPtr i);

// Callback method to be used when enumerating windows:
private static bool EnumWindow(IntPtr handle, IntPtr pointer)
{
    GCHandle gch = GCHandle.FromIntPtr(pointer);
    List<IntPtr> list = gch.Target as List<IntPtr>;
    if (list == null)
        throw new InvalidCastException("GCHandle Target could not be cast as List<IntPtr>");
    list.Add(handle);
    return true;
}

// delegate for the EnumChildWindows method:
private delegate bool EnumWindowProc(IntPtr hWnd, IntPtr parameter);

// get first child:
private static void DisableVisualStylesForFirstChild(IntPtr parent)
{
    List<IntPtr> children = new List<IntPtr>();
    GCHandle listHandle = GCHandle.Alloc(children);
    try
    {
        EnumWindowProc childProc = new EnumWindowProc(EnumWindow);
        EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));
        if (children.Count > 0)
            SetWindowTheme(children[0], "", "");
    }
    finally
    {
        if (listHandle.IsAllocated)
            listHandle.Free();
    }
}

protected override void OnHandleCreated(EventArgs e)
{
    DisableVisualStylesForFirstChild(this.Handle);
    base.OnHandleCreated(e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:39:55.273

以下是如何使 ListView 标题具有您想要的高度：

[C# - Listview 列标题高度（Windows 窗体）](https://stackoverflow.com/questions/3904572/c-sharp-listview-colum-header-height-windows-form)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T11:58:51.963

正如[Botz3000](https://stackoverflow.com/users/93652/botz3000)`ListView`在他的回答中提到的那样，它在 Windows XP 中是一个众所周知的问题。另一种解决方法是注册`ListView.DrawColumnHeader`事件并重置其中的标题字体。您必须将`ListView.OwnerDraw`属性设置为`true`。MSDN代码如下；

```
// Draws column headers.
private void listView1_DrawColumnHeader(object sender,
    DrawListViewColumnHeaderEventArgs e)
{
    using (StringFormat sf = new StringFormat())
    {
        // Store the column text alignment, letting it default
        // to Left if it has not been set to Center or Right.
        switch (e.Header.TextAlign)
        {
            case HorizontalAlignment.Center:
                sf.Alignment = StringAlignment.Center;
                break;
            case HorizontalAlignment.Right:
                sf.Alignment = StringAlignment.Far;
                break;
        }

        // Draw the standard header background.
        e.DrawBackground();

        // Draw the header text.
        using (Font headerFont =
                    new Font("Helvetica", 10, FontStyle.Bold))
        {
            e.Graphics.DrawString(e.Header.Text, headerFont,
                Brushes.Black, e.Bounds, sf);
        }
    }
    return;
} 
```

在这种情况下，标题字体将始终`"Helvetica", 10, FontStyle.Bold`不受列表视图字体的影响。[查看 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.drawcolumnheader.aspx)以获取更多详细信息。

# c# - 尽管命令正确，但表未更新

> ID：10103611
> 
> 赞同：0
> 
> 时间：2012-04-11T09:52:26.900
> 
> 标签：c#, asp.net, linq

我使用存储过程来插入、更新和删除记录，并使用 LINQ 来执行或调用这些过程。点击提交按钮后，更新程序已执行，但表中没有任何变化！如果我传递像“Jack”这样的值而不是 fname_txt.text，它会起作用并被更新。我不知道文本框对象和引号中的值有什么区别？！这是代码：

```
 protected void submit_Click(object sender, EventArgs e)
    {

        try
        {
            ZobLinqDataContext db = new ZobLinqDataContext();
            string pasword = CryptorEngine.Encrypt(pass_txt.Text, true);
            long uid = Convert.ToInt64(Request["uid"]);
            db.pUpZDBUser(uid,
                uname_txt.Text,
                pasword,
                fname_txt.Text.Trim(),
                lname_txt.Text.Trim(),
                modir.Checked,
                voting.Checked,
                Convert.ToInt32(Zarib_txt.Text),
                false
                );
            db.SubmitChanges();
            Response.Write(uname_txt);
        }
        finally
        {
            Session["sub"] = "1";
        }

    } 
```

这是更新过程：

```
 USE [ZOBDB]
GO
/****** Object:  StoredProcedure [dbo].[pUpZDBUser]    Script Date: 04/11/2012 15:17:41 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[pUpZDBUser] 
    @UID bigint,
    @Uname  nvarchar(100),
    @Pass   nvarchar(100),
    @fname  nvarchar(50),
    @lname  nvarchar(50),
    @KU bit,
    @KV bit,
    @ZribV  int,
    @del bit
As
BEGIN TRANSACTION UpUser    
    Set NOCOUNT ON

    UPDATE Users SET 
        Uname=@Uname, 
        Pass=@Pass, 
        fname=@fname, 
        lname=@lname, 
        KU=@KU, 
        KV=@KV, 
        ZribV=@ZribV,
        del=@del
    where (UID=@UID)

    --RollBack if Err
    IF @@ERROR != 0 and @@ROWCOUNT != 1
    BEGIN
        declare @msg nvarchar(30)
        set @msg = ' error '+@Uname
        ROLLBACK
        RAISERROR(@msg,16,1)
        RETURN
    END
COMMIT TRANSACTION UpUser
RETURN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:37:53.957

我认为如果您将 SPROC 更改为

```
--RollBack if Err     
IF @@ERROR != 0 **OR** @@ROWCOUNT != 1 
```

这样，您应该会收到引发的错误，并且您可以看到问题所在。可能UID不存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:33:40.243

最好的猜测是你的 proc 抛出了一个你没有捕捉到的异常，可能是因为列上有一个长度限制，并且你的`fname_txt.Text.Trim()`值是零长度，而“Jack”当然不是。

在您的代码中添加一个 catch 块，以证明您的 proc 中没有发生任何不愉快的事情。您的问题中的更多细节也会有所帮助。

# ruby-on-rails - 如何加快处理大量数据的 rake 任务？

> ID：10103613
> 
> 赞同：0
> 
> 时间：2012-04-11T09:52:27.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, mapreduce

我在我的 Rails 应用程序中使用 rake 任务，在处理“少量数据”时很好，但如果需要检索/计算数十万条记录，则任务可能需要很长时间。

Rake 任务很容易理解和开发，我真的很想继续使用它们，但是当涉及到大量数据时有什么建议吗？

例如，我在考虑 map/reduce 算法。这是要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:32:03.703

慢的不是耙子。Rake 只是启动您的应用程序的一个实例并运行您发送给它的任何内容。

您可以尝试重构您的代码，看看是否有一些您以前没有看到的快捷方式。

如果可以同时完成的工作，您可以尝试线程化或分叉任务。如果你打算在你的 Rails 应用程序中尝试这个，我会推荐使用[Spawn 。](https://github.com/rfc2822/spawn)

有时你的工作只需要很长时间。大数据 = 大时代。

此外，如果您全天定期运行您的 rake 任务，我建议您使用类似 Delayed_Job 来处理此问题，这样您就不会在每次需要运行任务时启动和退出 rails 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:00:31.777

我推荐[threach](https://github.com/billdueber/threach)和[jruby](http://jruby.org/)。

# bash - Unix：合并许多文件，同时删除所有文件的第一行

> ID：10103619
> 
> 赞同：34
> 
> 时间：2012-04-11T09:52:38.513
> 
> 标签：bash, merge

我有超过 100 个需要合并的文件，但是对于每个文件，必须删除第一行。在 Unix 下最有效的方法是什么？我怀疑这可能是使用*cat*和*sed '1d'*的命令。所有文件都具有相同的扩展名并且位于同一个文件夹中，因此我们可能可以使用 *.extension 来指向这些文件。非常感谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-11T10:00:53.633

假设您的文件名按您希望附加文件的顺序排序，您可以使用：

```
ls *.extension | xargs -n 1 tail -n +2 
```

编辑：在 Sorin 和 Gilles 评论管道**ls**输出可能存在的危险之后，您可以使用：

```
find . -name "*.extension" | xargs -n 1 tail -n +2 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-11T12:00:06.303

每个人都必须是复杂的。这真的很容易：

```
tail -q -n +2 file1 file2 file3 
```

等等。如果您有大量文件，您可以先将它们加载到数组中：

```
list=(file1 file2 file3)
tail -q -n +2 "${list[@]}" 
```

当前目录中具有给定扩展名的所有文件？

```
list=(*.extension)
tail -q -n +2 "${list[@]}" 
```

要不就

```
tail -q -n +2 *.extension 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T09:55:57.707

只需在删除第一行后附加每个文件。

```
#!/bin/bash

DEST=/tmp/out
FILES=space separated list of files

echo "" >$DEST
for FILE in $FILES
do
    sed -e'1d' $FILE >>$DEST
done 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T11:27:06.147

`tail`输出文件的最后几行。您可以告诉它要打印多少行，或者在开头省略多少行（`-n +N`其中 N 是要打印的第一行的编号，从 1 开始计数 - 因此`+2`省略一行）。使用 GNU 实用程序（即在 Linux 或 Cygwin 下）、FreeBSD 或其他具有以下`-q`选项的系统：

```
tail -q -n +2 *.extension 
```

`tail`在每个文件之前打印一个标题，并且`-q`不是标准的。如果您的实现没有它，或者是可移植的，您需要遍历文件。

```
for x in *.extension; do tail -n +2 <"$x"; done 
```

或者，您可以调用 Awk，它可以识别每个文件的第一行。如果您有很多小文件，这可能会更快，如果您有很多大文件，这可能会更慢。

```
awk 'FNR != 1' *.extension 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T11:36:42.523

```
ls -1 file*.txt | xargs nawk 'FNR!=1' 
```

# sql - 每天分组

> ID：10103623
> 
> 赞同：-1
> 
> 时间：2012-04-11T09:52:46.550
> 
> 标签：sql

我想要一个选择结果，我可以在其中获得每天的结果。我计算错误，并有以下非工作声明：

```
SELECT message, time, personid, count(*)
FROM errorlog
WHERE time BETWEEN TO_DATE(todays date - 10 days) AND TO_DATE(todays date) AND SUBSTR(message,0,3) = 'ERR'
GROUP BY DAY(time), personid, message
ORDER BY 4 
```

当我运行它时，它显示“DAY”：无效标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:00:19.887

它应该是 GROUP BY 之后的列名。

尝试：

```
SELECT message, DAY(time) dayTime, personid, count(*)
FROM errorlog
WHERE time BETWEEN TO_DATE(todays date - 10 days) AND TO_DATE(todays date) AND SUBSTR(message,0,3) = 'ERR'
GROUP BY dayTime, personid, message
ORDER BY 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:55:27.227

您中的任何项目`GROUP BY`也必须在您的`SELECT`.

如果您按天分组，并且显示`time`（我怀疑它是日期时间数据类型），并且您在哪一天有 2 条记录，那么您的结果集将如何显示这两个不同的时间？本来就不行。

以下查询使用和 的`CONVERT(VARCHAR(10), time, 103)`含义，即在您的结果集中显示一个格式，并且您的记录将按此分组。`SELECT``GROUP BY``dd/MM/yyyy`

```
SELECT message, CONVERT(VARCHAR(10), time, 103), personid, count(*)
FROM errorlog
WHERE time BETWEEN TO_DATE(todays date - 10 days) AND TO_DATE(todays date) AND SUBSTR(message,0,3) = 'ERR'
GROUP BY CONVERT(VARCHAR(10), time, 103), personid, message
ORDER BY 4 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T09:57:30.073

SQL 服务器？

纠正这个：

```
SELECT message, DAY(time) AS [DAY], personid, count(*) 
```

# geometry - 如何在地理字段（不是几何）上使用 Geodjango snap_to_grid

> ID：10103624
> 
> 赞同：2
> 
> 时间：2012-04-11T09:52:50.917
> 
> 标签：geometry, postgis, geodjango, geography

我使用 geodjango 创建了一个表，列位置 = models.PointField(geography=True)。

```
class Point(models.Model):
    location = models.PointField(geography=True) 
```

稍后我想使用 ST_snapToGrid 方法对这些位置进行聚类。但是如果我使用

```
Point.objects.snap_to_grid(0.001) 
```

我收到一个错误：

```
function st_snaptogrid(geography, numeric) does not exist
LINE 1: SELECT (ST_SnapToGrid("app_point"."location",000.1)) AS... 
```

这可能是由地理和几何之间的差异引起的。那么如何才能使用 snap_to_grid 这个方法呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:19:48.223

您不能将 Field.geography=True 与 snap_to_grid 一起使用。

例如：

```
class Point(models.Model):
    location = models.PointField(dim=2) 
```

# java - Oracle + dbunit 获取 AmbiguousTableNameException

> ID：10103629
> 
> 赞同：9
> 
> 时间：2012-04-11T09:53:29.217
> 
> 标签：java, sql, database, oracle, dbunit

我正在使用 dbunit 创建可以导入和导出的数据库备份。我的应用程序可以使用多种数据库引擎：MySQL、PostgreSQL、SQLServer、H2 和 Oracle。

以上所有内容都可以使用以下代码正常工作：

```
 // Connect to the database 
        conn =BackupManager.getInstance().getConnection();
        IDatabaseConnection connection = new DatabaseConnection(conn);
        InputSource xmlSource = new InputSource(new FileInputStream(new File(nameXML)));
        FlatXmlProducer flatXmlProducer = new FlatXmlProducer(xmlSource);
        flatXmlProducer.setColumnSensing(true);

        DatabaseOperation.CLEAN_INSERT.execute(connection,new FlatXmlDataSet(flatXmlProducer)); 
```

但在甲骨文我得到这个例外：

```
!ENTRY es.giro.girlabel.backup 1 0 2012-04-11 11:51:40.542
!MESSAGE Start import backup
org.dbunit.database.AmbiguousTableNameException: AQ$_SCHEDULES
    at org.dbunit.dataset.OrderedTableNameMap.add(OrderedTableNameMap.java:198)
    at org.dbunit.database.DatabaseDataSet.initialize(DatabaseDataSet.java:231)
    at org.dbunit.database.DatabaseDataSet.getTableMetaData(DatabaseDataSet.java:281)
    at org.dbunit.operation.DeleteAllOperation.execute(DeleteAllOperation.java:109)
    at org.dbunit.operation.CompositeOperation.execute(CompositeOperation.java:79)
    at es.giro.girlabel.backup.ImportBackup.createData(ImportBackup.java:39)
    at es.giro.girlabel.backup.handlers.Import.execute(Import.java:45) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T14:36:09.407

从[文档](http://www.dbunit.org/apidocs/org/dbunit/database/AmbiguousTableNameException.html)：

> `public class AmbiguousTableNameException extends DataSetException`
> 
> `IDataSet`当具有相同名称的多个表可以访问时，会引发此异常。这通常发生在数据库连接可以访问包含相同表名的多个模式时。
> 
> 可能的解决方案：
> 
> 1) 使用只能访问一个数据库模式的数据库连接凭据。
> 
> `DatabaseConnection`2) 为or`DatabaseDataSourceConnection`构造函数指定模式名称 。
> 
> 3) 启用限定表名支持（参见操作指南文档）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-02T22:12:42.110

为谁使用 SpringDBUnit。我一直在努力解决这个非常烦人的问题。我最终通过添加和的配置解决了这个`com.github.springtestdbunit.bean.DatabaseConfigBean`问题`com.github.springtestdbunit.bean.DatabaseDataSourceConnectionFactoryBean`。

这是我对 SpringDBUnit 的完整春季上下文

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
        <property name="url" value="jdbc:oracle:thin:@localhost:1521/XE" />
        <property name="username" value="xxxx" />
        <property name="password" value="xxxx" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
        <property name="annotatedClasses">
            <list>
                <value>xxx.example.domain.Person</value>
            </list>
        </property>
    </bean>

    <bean id="dbUnitDatabaseConfig" class="com.github.springtestdbunit.bean.DatabaseConfigBean">
        <property name="skipOracleRecyclebinTables" value="true" />
        <property name="qualifiedTableNames" value="true" />
        <!-- <property name="caseSensitiveTableNames" value="true"/> -->
    </bean>
    <bean id="dbUnitDatabaseConnection"
        class="com.github.springtestdbunit.bean.DatabaseDataSourceConnectionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="databaseConfig" ref="dbUnitDatabaseConfig" />
        <property name="schema" value="<your_schema_name>"/>
    </bean> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-20T10:36:53.507

设置数据库模式为我修复了它：

```
@Bean
public DatabaseDataSourceConnectionFactoryBean dbUnitDatabaseConnection(final DataSource dataSource){
    final DatabaseDataSourceConnectionFactoryBean connectionFactory = new DatabaseDataSourceConnectionFactoryBean();
    connectionFactory.setDataSource(dataSource);
    connectionFactory.setSchema(DB_SCHEMA);
    return connectionFactory;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T10:08:30.133

在执行 Dbunits aginst Oracle DB 时，我遇到了相同的 AmbiguousTableNameException。它工作正常，有一天开始抛出错误。

根本原因：在调用存储过程时，错误地将其修改为小写。当更改为大写时，它开始工作。

我也可以通过将 shema 名称设置为 IDatabaseTester 来解决这个问题，例如 iDatabaseTester.setSchema("SCHEMANAMEINCAPS")

另外请确保您的连接不仅仅访问具有相同表名的许多模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-17T11:12:44.380

在 DBUnit 运行之前从 Hibernate 导入数据时，您可能会遇到问题。根据您使用的数据库，表名和列名的大小写可能很重要。

例如，在 HSQL 中，数据库名称必须以大写形式声明。如果您通过 Hibernate 的 import.sql 导入数据，请确保那里的表名也是大写的，否则您将遇到以下问题：

*   Hibernate 以小写形式创建表
*   DBUnit 从小写的 DB 中读取表名
*   DBUnit 尝试使用大写表名导入其数据集
*   您最终会陷入混乱，名称不明确。

请记住还要检查在上一次运行期间是否创建了多个表（大写和小写），在这种情况下，您也需要清理它。

# ruby-on-rails - Rails 服务器内存泄漏/膨胀问题

> ID：10103632
> 
> 赞同：1
> 
> 时间：2012-04-11T09:53:37.023
> 
> 标签：ruby-on-rails, ruby, memory-leaks

我们在具有 4GB 内存的服务器上运行 2 个 rails 应用程序。两台服务器都使用 Rails 3.2.1，在开发或生产模式下运行时，服务器以惊人的速度吃掉内存，每天消耗高达 1.07GB 内存。保持服务器运行仅 4 天会触发监控中的所有内存警报，而我们只有 98MB 的可用内存。

我们尝试了与膨胀相关的活动记录优化，但仍然没有效果。请帮助我们弄清楚我们如何追踪哪个控制器出现故障的问题。

使用mysql数据库和webrick服务器。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:47:51.050

如果不研究项目细节本身，这很难回答。虽然我很确定您不会在目标生产构建中使用 Webrick（对吗？），但请检查它在乘客下的行为是否相同或您选择的任何内容。

同样在不知道项目细节的情况下，我建议查看生成 pdf、csv 解析等功能。看到一个案例，生成 pdf 文件一直以类似的方式消耗资源，为每个留下 5mb 的非垃圾收集内存跑。

祝你好运。

# browser - 哪些浏览器是最后一个仅支持 SSLv2 的？

> ID：10103635
> 
> 赞同：1
> 
> 时间：2012-04-11T09:53:46.740
> 
> 标签：browser, ssl

我正在尝试查找或编译**仅**支持SSLv2 的最常见浏览器（即 IE、Firefox、Chrome、Safari、Opera）的最新版本列表。

请注意，我已经看到[了这个问题](https://stackoverflow.com/questions/881563/what-browsers-only-support-sslv2)，但我也发现了一个[Microsoft Answer](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/ie6-sslv3/f942e818-ffe0-4624-88d6-58dfcdd1ddc9)另有说明，所以我不认为它是可靠的

到目前为止的清单：

*   Internet Explorer：IE6（无服务包）
    （IE7 默认使用 SSLv3，*更新*后的IE6 也将使用 SSLv3 [[来源](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/ie6-sslv3/f942e818-ffe0-4624-88d6-58dfcdd1ddc9)]）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:07:23.473

[您链接到的 Microsoft 答案与您链接到的问题](https://stackoverflow.com/questions/881563/what-browsers-only-support-sslv2)的答案并不矛盾。它只是说 IE7 是第一个*默认使用 SSLv3 的*。IE7 是否是第一个默认执行此操作的 IE 版本并不重要。

您的问题具体是关于哪个浏览器根本不支持 SSLv2 以上的任何内容。

这个[Apache Httpd/mod_ssl FAQ](http://httpd.apache.org/docs/2.0/ssl/ssl_faq.html#msie)表明 IE 5.x 已经支持 SSLv3（尽管在用于某些版本的 OpenSSL 时被破坏）：

> 下一个问题是 56 位导出版本的 MSIE 5.x 浏览器有一个损坏的 SSLv3 实现，它与大于 0.9.4 的 OpenSSL 版本交互很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T02:37:25.050

SSLv3 是随 Netscape 3 引入的，也在 IE3 中。

# mysql - 缺少Mysql-优化

> ID：10103636
> 
> 赞同：0
> 
> 时间：2012-04-11T09:53:48.650
> 
> 标签：mysql, optimization, status

我已经预先计算了一些相似性（大约 7000 万个），并希望找到一首曲目与所有其他曲目的相似之处。我只需要相似度最高的前 100 首曲目。对于我的计算，我使用不同的轨道作为输入进行了大约 15'000 次此查询。机器启动后，所有 15k 查询的计算需要超过 600 秒。经过几次运行，mysql 已经 - 我认为 - 缓存了索引，因此完整的运行需要大约 15 秒。我唯一担心的是：我有一个非常高的“Handler_read_rnd_nextDokumentation”值。

我有一个具有这种结构的 MySQL 表：

```
CREATE TABLE `similarity` (
  `similarityID` int(11) NOT NULL AUTO_INCREMENT,
  `trackID1` int(11) NOT NULL,
  `trackID2` int(11) NOT NULL,
  `tracksim` double DEFAULT NULL,
  `timesim` double DEFAULT NULL,
  `tagsim` double DEFAULT NULL,
  `simsum` double DEFAULT NULL,
  PRIMARY KEY (`similarityID`),
  UNIQUE KEY `trackID1` (`trackID1`,`trackID2`),
  KEY `trackID1sum` (`trackID1`,`simsum`),
  KEY `trackID2sum` (`trackID2`,`simsum`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

我想对此做很多查询。查询如下所示：

```
// simsum is a sum over tracksim, timesim, tagsim
(
     SELECT similarityID, trackID2, tracksim, timesim, tagsim, simsum
     FROM similarity
     WHERE trackID1 = 512
     ORDER BY simsum DESC
     LIMIT 0,100
 )
 UNION
(
     SELECT similarityID, trackID1, tracksim, timesim, tagsim, simsum
     FROM similarity
     WHERE trackID2 = 512
     ORDER BY simsum DESC
     LIMIT 0,100
 )
 ORDER BY simsum DESC
 LIMIT 0,100 
```

查询速度非常快，不到 0.1 秒（[上一个问题](https://stackoverflow.com/questions/9927272/mysql-simple-select-query-is-slow/9930271#9930271)），但我担心状态页面中的数字非常大。我以为我已经设置了我在查询中使用的每个索引。

```
Handler_read_rndDokumentation   88,0 M
Handler_read_rnd_nextDokumentation  20,0 G 
```

有什么问题吗”？我可以更快地得到查询吗？我需要担心20G吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:13:43.267

这里明显错误的第一件事是您似乎正在计算元组之间的方向关系 - 如果 f(a,b)===f(b,a) 那么您可以通过交换 track1 和track2 其中 track1 大于 track2 但保留现有主键（并忽略冲突）。

您只是将数据量减半 - 因此不会有巨大的性能提升。

可能还有进一步提高性能的空间，但这在很大程度上取决于数据更改的频率，更具体地说，您应该修剪相似性不在前 100 名的记录。

# python - Django EmailMultiAlternatives 发送到多个“收件人”地址

> ID：10103639
> 
> 赞同：2
> 
> 时间：2012-04-11T09:53:54.597
> 
> 标签：python, django, email, django-email

Django EmailMultiAlternatives 中有没有一种方法可以发送到多个“收件人”地址，而无需再次发送？

尝试用逗号分隔元组中的电子邮件，但只有第一个收件人收到电子邮件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T10:01:21.390

[如Django 文档中的示例](https://docs.djangoproject.com/en/dev/topics/email/?from=olddocs#sending-alternative-content-types)所示，电子邮件地址列表应该有效。

```
to_emails = ['alice@example.com', 'bob@example.com']
msg = EmailMultiAlternatives(subject, text_content, from_email, to_emails) 
```

您可能希望使用`bcc`而不是`to_emails`阻止用户看到电子邮件的其他收件人。

```
msg = EmailMultiAlternatives(subject, text_content, from_email, bcc=to_emails) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-15T11:01:40.773

我正在使用 for 循环。我还使用它来过滤发送电子邮件的用户。

```
for user in users:
    if user.is_active and user != request.user and user.last_login != None:
        message = EmailMultiAlternatives(
        subject = "your subject here",
            from_email = settings.EMAIL_HOST_USER,
            to = [user.email],
            )
        context = {'request':request, 'user':user, 'event':event}
        html_template = get_template("notifications/new_event_email.html").render(context)
        message.attach_alternative(html_template, "text/html")
        message.send() 
```

这可能不是最好的方法，但它对我有用。

# c++ - 可以抛出具有私有复制构造函数的对象吗？

> ID：10103645
> 
> 赞同：11
> 
> 时间：2012-04-11T09:54:06.030
> 
> 标签：c++, visual-studio-2010, exception, private, copy-constructor

我遇到了一些我不清楚的异常问题。在 C++ 中，当一个对象被抛出时，它首先被复制到一个临时对象，然后这个临时对象被传递给捕获代码。复制涉及使用对象的类复制构造函数。AFAIK，这意味着如果一个类具有私有复制构造函数，则不能将其用作异常。但是，在 VS2010 中，以下代码编译并运行：

```
class Except
{
    Except(const Except& other) { i = 2; }
public:
    int i;
    Except() : i(1) {}
};

int main()
{
    try
    {
        Except ex1;
        throw ex1;          // private copy constructor is invoked
    }
    catch (Except& ex2)
    {
        assert(ex2.i == 2); // assert doesn't yell - ex2.i is indeed 2
    }
    return 0;
} 
```

这合法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T10:05:29.023

这不合法。标准 15.1/5

> 如果除了执行与使用临时对象相关的构造函数和析构函数（12.2）之外，可以在不改变程序含义的情况下消除临时对象的使用，则可以直接使用参数初始化处理程序中的异常的 throw 表达式。**当抛出的对象是一个类对象，并且用于初始化临时副本的复制构造函数不可访问时，程序是非良构的**（即使临时对象可以被消除）。类似地，如果该对象的析构函数不可访问，则程序格式错误（即使临时对象可以被消除）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:06:07.160

不，这不对。

> 15.1.5 当抛出的对象是类对象时，复制/移动构造函数和析构函数应该是可访问的，即使复制/移动操作被省略

# jquery - 更新一个选项卡的内容时更新 jQuery UI 选项卡

> ID：10103646
> 
> 赞同：0
> 
> 时间：2012-04-11T09:54:06.093
> 
> 标签：jquery, asp.net, jquery-ui, drop-down-menu, jquery-tabs

我有一个带有 2 个选项卡的 jQuery UI 选项卡。当我更新我的第一个选项卡然后单击第二个选项卡时，我希望它显示更新的信息，即第一个选项卡已更新。第一个选项卡上有`dropDownlist`一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:01:54.407

您必须捕获选项卡的更改事件，为此请参阅[此](http://docs.jquery.com/UI/Tabs#Events)jquery 选项卡文档，并且在更改选项卡时，您必须从源获取新记录

# ios - iOS 日期格式

> ID：10103654
> 
> 赞同：2
> 
> 时间：2012-04-11T09:54:55.527
> 
> 标签：ios, localization, nsdateformatter, date-format

在美国地区使用应用程序时，我需要格式化以下日期：1 月 1 日、7 月 2 日、11 月 28 日

我该怎么做？

用 搜索`NSDateFormatter`，但我无法设置适当的格式，并且默认格式太长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:11:33.047

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"MMMM dd'st'"];

NSDate *now = [[NSDate alloc] init];

NSString *dateString = [format stringFromDate:now];
NSLog(@"%@",dateString); 
```

这将为您提供所需的格式，但您需要添加一些条件来添加正确的 'st'、'nd'、'rd' 等， [像这样](https://stackoverflow.com/questions/1283045/ordinal-month-day-suffix-option-for-nsdateformatter-setdateformat)

这可能对你有帮助吗

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"MMMM dd"];

NSDate *now = [[NSDate alloc] init];

NSString *dateString = [format stringFromDate:[now dateByAddingTimeInterval:(-60*60*24*10)]];
NSMutableString *tempDate = [[NSMutableString alloc]initWithString:dateString];
int day = [[tempDate substringFromIndex:[tempDate length]-2] intValue];
switch (day) {
    case 1:
    **case 21:
    case 31:**
        [tempDate appendString:@"st"];
        break;
    case 2:
    **case 22:**
        [tempDate appendString:@"nd"];
        break;
    case 3:
    **case 23:**
        [tempDate appendString:@"rd"];
        break;
    default:
        [tempDate appendString:@"th"];
        break;
}
NSLog(@"%@",tempDate); 
```

# java - 如何使用 keytool 打印证书的公钥？

> ID：10103657
> 
> 赞同：40
> 
> 时间：2012-04-11T09:55:00.493
> 
> 标签：java, certificate, keytool

keytool 有没有办法打印证书的公钥？我试过：

```
keytool -printcert -file client.crt 
```

但它只提供以下信息：

```
Owner: CN=client, OU=as, O=as, L=as, ST=as, C=as
Issuer: EMAILADDRESS=as, CN=ca, OU=as, O=as, L=as, ST=as, C=as
Serial number: 3
Valid from: Tue Apr 10 12:18:47 GMT+05:30 2012 until: Wed Apr 10 12:18:47 GMT+05
:30 2013
Certificate fingerprints:
         MD5:  26:C0:29:E9:8C:AB:C3:9E:95:38:74:8A:87:D3:86:8D
         SHA1: 5C:5A:BA:47:44:83:7E:CB:48:BE:DD:E5:39:51:24:42:C6:C5:60:8B
         SHA256: DA:26:B8:C8:F4:04:3E:62:F3:7F:3B:EC:1D:9F:85:66:28:00:45:55:66:
15:FF:BB:37:77:97:59:F0:EC:0B:B6
         Signature algorithm name: SHA1withRSA
         Version: 1 
```

这里面没有公钥。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-04-25T20:57:26.393

你可以这样做：

```
keytool -list -rfc -keystore mykeystore.jks -alias certificate_alias -storepass password 
```

示例运行：

```
PS c:\sample> keytool -list -rfc -keystore mykeystore.jks -alias cert_alias -storepass password
Alias name: cert_alias
Creation date: Apr 25, 2014
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
-----BEGIN CERTIFICATE-----
MIIB4zCCAUygAwIBAgIIRzI14w7rL20wDQYJKoZIhvcNAQENBQAwMzELMAkGA1UEBhMCVVMxDTAL
BgNVBAoTBE5vbmUxFTATBgNVBAMTDE5vbmUgb3U9Tm9uZTAgFw0xNDA0MjQxNzQ0NDJaGA8yMTE0
MDQyNTE3NDQ0MlowMzELMAkGA1UEBhMCVVMxDTALBgNVBAoTBE5vbmUxFTATBgNVBAMTDE5vbmUg
b3U9Tm9uZTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAivXBBtFnJTm1NbHysv3Mnpn/lCg6
1onJDxr/jkvI8+1Bljs1jktyYOeKDWxJwpDU7QyIqttgtDvRT4Yaew5WiQyADIyY0cBTvp3S7uKx
M5C3zxZdG6WTflU7xcYnGk3/d0VhwA6BL9YPsRaS/K+ww1yvxWKIOPW68wDe0ccvGWcCAwEAATAN
BgkqhkiG9w0BAQ0FAAOBgQB/5qDMA9fmlCWlOD9aHjBD6I8zAOSshMCFK8XcZJHowag8WtZyL3DR
insx2HoDlBewIJAEtAplo2NpeFyNtK93PS7zV+vwEYHCu46Db3klMksp3MmSXD39QPlmwfsGZlja
K8Ww0TsR5GtccFMH41KKa+PlvVZNEdZumdrca59olQ==
-----END CERTIFICATE----- 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-11T10:00:38.480

你可以用`openssl`.

如果此证书是 DER 编码（二进制），请使用：

```
openssl x509 -inform der -in client.crt -pubkey -noout 
```

用于 PEM 编码的使用`-inform pem`选项（或根本没有`-inform`）。

要查看公钥的详细信息，请使用：

```
openssl x509 -inform der -in client.crt -pubkey -noout | openssl rsa -pubin -text -noout 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-08-16T13:12:00.373

您可以将证书打印为 pem 格式，然后使用 openssl 从 pem 格式打印公钥。

1.  `-rfc`向 -printcert添加选项

    keytool -printcert -rfc -file client.crt

2.  将如下所示的输出保存到文件 client.pem

    -----开始证书----- MIIB4zCCAUygAwIBAgIIRzI14w7rL20wDQYJKoZIhvcNAQENBQAwMzELMAkGA1UEBhMCVVMxDTAL

    ……

    -----结束证书-----

3.  然后使用 openssl

    openssl x509 -inform pem -text -in client.pem

所以你得到了公钥

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-11T18:32:19.867

*Keytool list rfc*只打印整个证书的*base64 编码*版本，而不是*public key*。Keytool 不支持打印证书的公钥。为此，我们可以使用*openssl 。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-28T12:37:56.710

```
keytool -export -alias myalias -keystore mystore.jks  | openssl x509 -inform der -pubkey -noout 
```

# php - 函数简化参数列表

> ID：10103658
> 
> 赞同：0
> 
> 时间：2012-04-11T09:55:02.363
> 
> 标签：php

调用函数时有没有办法简化参数列表？而不是使用`$blank`.

```
$subscribe=1;
    $database->information($blank,$blank,$blank,$blank,$blank,$blank,$subscribe,$blank,$blank,$blank,$blank,$blank);

    function information ($search,$id,$blank,$category,$recent,$comment,$subscribe,$pages,$pending,$profile,$deleted,$reported) {
    //code
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:57:44.650

是的，改为传递一个数组，或者重构。长长的论据列表通常是难闻的。

```
function information(array $params) {....

information(array('search'=>'..... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T09:58:13.617

对于一个函数来说，十二个参数通常太多了。通过重构`function information`看起来很可能是一个怪物，您的代码可能会被简化（包括参数列表变得更短）。

您可以在此期间使用的权宜之计是

*   添加默认参数值
*   使函数接受其所有参数作为数组

以上两项都需要您访问*所有*调用站点以查看和修改该功能。

恕我直言，在这里添加默认参数是一个糟糕的选择，因为通过查看示例调用，您似乎需要将*所有*参数设为默认值，这反过来意味着如果您错误地调用了该函数，编译器将永远不会警告您。

转换为数组需要更多的工作，但它会迫使您以一种不易出现意外错误的方式重写调用。函数签名将更改为

```
function information(array $params) 
```

或者可能

```
function information(array $params = array()) 
```

如果您希望*所有*参数都是可选的。您可以为参数提供默认值

```
function information(array $params) {
    $defaults = array('foo' => 'bar', /* ... */);
    $params += $defaults; // adds missing values that have defaults to $params;
                          // does not overwrite existing values 
```

为了避免重写函数体，您可以使用`export`将这些值从数组中拉出到本地范围：

```
 export($params); // creates local vars
    echo $foo; // will print "bar" unless you have given another value 
```

**[看到所有这一切的行动](http://codepad.viper-7.com/m4tP9c)**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T09:59:15.643

您可以传入具有指定键的数组，并将其与默认值数组合并

所以而不是

```
function foo($arg1 = 3, $arg2 = 5, $arg3 = 7) { } 
```

你会有

```
function foo($args) {
   $defaults = array(
      'arg1' => '',
      'arg2' => null,
      'arg3' => 7
   );

   // merge passed in array with defaults
   $args = array_merge($defaults, $args);

   // set variables within local scope
   foreach($args as $key => $arg) { 
       // this is to make sure that only intended arguments are passed
       if(isset($defaults[$key])) ${$key} = $arg; 
   }

    // rest of your code
} 
```

然后将其称为

```
foo(array('arg3' => 2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:58:01.960

你可以这样做，这样函数就会自动用给定的值填充变量，比如空字符串：

```
function information ($subscribe, $search="", $id="", $blank="", $category="", $recent="", $comment="", $pages="", $pending="", $profile="", $deleted="", $reported="") {
    //code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:00:10.700

是的，有几种方法：

*   接受关联数组作为单个参数，并将您需要的内容传递给它。如果缺少关键参数，则抛出异常。
*   将关键参数放在函数定义的开头，将可选参数放在末尾。给它们一个默认值，这样您就不必声明它们。
*   重新考虑你的功能。12 个参数对于一个函数来说太多了。考虑使用类/对象，或在不同功能之间划分工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T10:00:49.917

几种方式：

```
function test($input = "some default value") {
    return $input; // returns "some default value"
}

function test($input) {
    return $input;
}

test(NULL); // returns NULL

function test() {
   foreach(func_get_args() as $arg) {
       echo $arg;
   }
}

test("one", "two", "three"); // echos: onetwothree 
```

# maven - 为什么（以及赞成什么）maven-bundle-plugin 的 wrap/bundleall 目标被弃用？

> ID：10103666
> 
> 赞同：10
> 
> 时间：2012-04-11T09:55:14.037
> 
> 标签：maven, osgi, maven-bundle-plugin

[http://svn.apache.org/repos/asf/felix/releases/maven-bundle-plugin-2.3.7/doc/site/wrap-mojo.html](http://svn.apache.org/repos/asf/felix/releases/maven-bundle-plugin-2.3.7/doc/site/wrap-mojo.html)说`bundle:wrap`已弃用，与`bundle:bundleall`. 我目前使用`wrap`从非 OSGi 依赖项创建 OSGi 包，如[http://www.lucamasini.net/Home/osgi-with-felix/creating-osgi-bundles-of-your-maven-dependencies](http://www.lucamasini.net/Home/osgi-with-felix/creating-osgi-bundles-of-your-maven-dependencies)中所述。应该用什么替换它们以及弃用的原因是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T23:31:12.237

另一种方法是只使用 bundle:bundle 目标，然后在您的 pom.xml 中配置类似于以下内容的插件：

```
<plugin>
   <groupId>org.apache.felix</groupId>
   <artifactId>maven-bundle-plugin</artifactId>
   <configuration>
      <instructions>
         <Embed-Dependency>*;scope=compile;inline=true</Embed-Dependency>
         <_exportcontents>*</_exportcontents>
      </instructions>
   </configuration>
 </plugin> 
```

您可以通过更改通配符“*”、范围等属性来控制嵌入和导出的依赖项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T21:15:56.177

我想知道同样的问题，在这里找到了一些线索：

[http://www.mail-archive.com/dev@felix.apache.org/msg22221.html](http://www.mail-archive.com/dev@felix.apache.org/msg22221.html)

“相反，将添加新的功能/目标来解决常见的用例，例如创建大型捆绑包等。”

我猜他们会重新制定当前的目标，因为当前的代码库不支持他们想要在插件中实现的所有内容。

# windows - SIMATIC ET200 + Windows CE

> ID：10103667
> 
> 赞同：1
> 
> 时间：2012-04-11T09:55:18.747
> 
> 标签：windows, windows-ce, plc

我从未使用过西门子的[SIMATIC 工业自动化系统](http://www.automation.siemens.com/mcms/automation/en/automation-systems/industrial-automation/Pages/Default.aspx)，但我需要执行以下操作：

我们有一台带有 Windows CE 的工业计算机（例如 x86 Siemens TP700 comfort）。

有没有办法创建一个能够与 SIMATIC ET200 一起使用的 .NET 应用程序？

还是我总是需要“SIMATIC NET”或 Step7？有人告诉我，SIMATIC NET 不能在 Windows CE 上运行。或者我可以使用一些不需要 SIMATIC NET 的 OPC 服务器吗？

还是在 Windows CE 下无法使用 SIMATIC 模块？也可以是结论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:11:41.977

尝试在您的 CE 平台上启动 \Windows\cgacutil.exe。如果它在那里，它会告诉你“.Net compact”框架的版本。如果安装了一个，您可以编写针对该特定版本的应用程序。“.Net compact”只是桌面上完整 .Net 的一个子集。

# matlab - Matlab：在给定参考日期时间的情况下将时间戳转换为可读格式

> ID：10103670
> 
> 赞同：1
> 
> 时间：2012-04-11T09:55:33.037
> 
> 标签：matlab, datetime, datetime-format, timestamp

我有一个文本文件，其中包含每秒捕获 50 帧的相机的时间戳。数据如下：

```
1 20931160389   
2 20931180407
3 20931200603   
4 20931220273   
5 20931240360
.
.
50 20932139319 
```

... 等等。

它还给出了捕获的开始时间

```
Date: **02.03.2012 17:57:01** 
```

时间戳以**微秒**而不是毫秒为单位，MATLAB 只能支持直到毫秒，但对我来说还可以。

现在我需要知道每一行的这些时间戳的人类格式......就像

```
1   20931160389     02.03.2012 17:57:01.045  % just an example
2   20931180407     02.03.2012 17:57:01.066
3   20931200603     02.03.2012 17:57:01.083
4   20931220273     02.03.2012 17:57:01.105
5   20931240360     02.03.2012 17:57:01.124 
```

等等

我试过这个：

```
%Refernce Data
clc; format longg
refTime = [2012,03,02,17,57,01];
refNum = datenum(refTime);
refStr = datestr(refNum,'yyyy-mm-dd HH:MM:SS.FFF');

% Processing data
dn = 24*60*60*1000*1000; % Microseconds! I have changed this equation to many options but nothing was helpful
for i = 1 : size(Data,1)
  gzTm = double(Data{i,2}); %timestamps are uint64
  gzTm2 = gzTm / dn;
  gzTm2 = refNum + gzTm2;
  gzNum = datenum(gzTm2);
  gzStr = datestr(gzNum,'yyyy-mm-dd HH:MM:SS.FFF'); % I can't use 'SS.FFFFFF'
  fprintf('i = %d\t Timestamp = %f\t TimeStr = %s\n', i, gzTm, gzStr); 
end; 
```

但我总是得到奇怪的输出，比如

```
i = 1    Timestamp = 20931160389.000000  TimeStr = **2012-03-08 13:29:28.849**
i = 2    Timestamp = 20931180407.000000  TimeStr = **2012-03-08 13:29:29.330**
i = 3    Timestamp = 20931200603.000000  TimeStr = **2012-03-08 13:29:29.815** 
```

输出时间比参考时间晚/早几个小时。日子不一样了。

数组中每个条目之间的时间间隔应该接近 20 秒..因为我每秒有 50 帧（1000 毫秒 / 50 = 20）..并且年、月、日、小时、分钟和秒也应该指示初始时间作为参考时间给出，因为它大约早了几秒钟。

我期待类似的东西：

```
% just an example
1 20931160389 02.03.2012 **17:57:01.045** 
2 20931180407 02.03.2012 **17:57:01.066** 
```

有人可以帮我吗..！我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:45:49.083

看起来您可以计算出一条记录和第一条记录之间的微秒数：

```
usecs = double(Data{i,2}) - double(Data{1,2}); 
```

将其转换为秒：

```
secsDiff = usecs / 1e6; 
```

然后将其添加到您计算的初始日期时间：

```
matDateTime = refNum + secsDiff / (24*60*60); 
```

# jquery - Jquery 自动制作幻灯片

> ID：10103671
> 
> 赞同：0
> 
> 时间：2012-04-11T09:55:33.443
> 
> 标签：jquery, slideshow

我做了一个小幻灯片，我正在尝试使其自动化。html元素是这样的：

```
<ul>
    <li>
    <h3 class="active-item" data-bg="background-image url">Title 1</h3>
    <div class="news-excerpt"><p>The excerpt</p></div>
    </li>   

    <li>
    <h3 class="" data-bg="background-image url">Title 2</h3>
    <div class="news-excerpt"><p>The excerpt</p></div>
    </li>

    <li>
    <h3 class="" data-bg="background-image url">Title 3</h3>
    <div class="news-excerpt"><p>The excerpt</p></div>
    </li>
</ul> 
```

这是我的幻灯片：

```
$("#alternative-navigation div#last-posts-fadeshow h3").click(function(){
    // Get url of the background image to show.
    var bgvar = $(this).attr("data-bg");

    // Set the right post excerpt to show
    $('.active-excerpt').removeClass('active-excerpt');
    $(this).next('.news-excerpt').addClass('active-excerpt');
    $('.active-item').removeClass('active-item');
    $(this).addClass('active-item');
    Cufon.refresh();
    //alert (bgvar);

    // Switch to right background image
    $("#background-image-container").fadeTo('medium', 0.1, function()
    {
        $("#background-image-container").css("background-image", "url(" + bgvar + ")" );
    }).fadeTo('medium', 1);  
    return false;
}); 
```

现在我希望它每 4 秒自动进行一次。我怎样才能使它工作：

```
$('html').addClass('js');

$(function() {

    var timer = setInterval( showDiv, 3000);

    function showDiv() {

        // Select the next post to show
        $(this) = $('#alternative-navigation div#last-posts-fadeshow h3.active-item').parent().next().find('h3');

        // Get url of the background image to show.
        var bgvar = $(this).attr("data-bg");

        // Set the right post excerpt to show
        $('.active-excerpt').removeClass('active-excerpt');
        $(this).next('.news-excerpt').addClass('active-excerpt');
        $('.active-item').removeClass('active-item');
        $(this).addClass('active-item');
        Cufon.refresh();
        //alert (bgvar);

        // Switch to right background image
        $("#background-image-container").fadeTo('medium', 0.1, function()
        {
            $("#background-image-container").css("background-image", "url(" + bgvar + ")" );
        }).fadeTo('medium', 1);  
        return false;       
    }

}); 
```

第一部分似乎选择了正确的标题，但没有任何反应。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:04:02.947

`$()`or`jQuery()`不是变量，您不能使用`$(this) = '...';`. `$()`是一个返回由选择器过滤的一组元素的函数。参见：[.jQuery()](http://api.jquery.com/jQuery/)

而不是试图覆盖`$(this)`，只需创建一个新变量，例如：

```
function showDiv() {

    // Select the next post to show
    var el = $('#alternative-navigation div#last-posts-fadeshow h3.active-item').parent().next().find('h3');

    // Get url of the background image to show.
    var bgvar = el.attr("data-bg");

    // Set the right post excerpt to show
    $('.active-excerpt').removeClass('active-excerpt');
    el.next('.news-excerpt').addClass('active-excerpt');
    $('.active-item').removeClass('active-item');
    el.addClass('active-item');
    Cufon.refresh();
    //alert (bgvar);

    // Switch to right background image
    $("#background-image-container").fadeTo('medium', 0.1, function()
    {
        $("#background-image-container").css("background-image", "url(" + bgvar + ")" );
    }).fadeTo('medium', 1);  
    return false;       
} 
```

并循环回到开头，这取决于您的 HTML 结构，但这样的事情应该可以工作

```
var el = $('#alternative-navigation div#last-posts-fadeshow h3.active-item').parent().next().find('h3');
if ( el.length == 0 )
    el = $('#alternative-navigation div#last-posts-fadeshow').first().find('h3'); 
```

# iphone - 在 .app 文件中创建一个文件夹

> ID：10103672
> 
> 赞同：0
> 
> 时间：2012-04-11T09:55:43.793
> 
> 标签：iphone, objective-c, ios, xcode

我需要为一些图像创建一个文件夹，我现在正在使用“新组”在我的 Xcode 项目的项目导航器中进行操作。

当我看到`.app`包的内容时问题就来了，里面的图像和所有其他文件一起（不在我的文件夹中）

我怎样才能创建一个文件夹，将在里面`.app`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:02:44.570

**1.**创建一个包含图像的文件夹。

**2.**添加到 Xcode 中时，您拖放文件夹并选择“为任何添加的文件夹创建文件夹引用”选项。

该文件夹将为**蓝色**，而不是黄色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:58:53.787

在您的项目文件夹中创建一个文件夹，将图像添加到该文件夹​​，然后将它们添加到 Xcode。

# iphone - 如何进行日期转换？

> ID：10103676
> 
> 赞同：0
> 
> 时间：2012-04-11T09:56:13.037
> 
> 标签：iphone, nsdateformatter

我在字符串格式广告“2012-04-11T07:51:10+0000”中获取日期，我想将其转换为 NSDate 作为“11-04-2012”。我不明白如何为此使用“setDateFormat”。

这就是我正在做的——[dateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'+'zzzz"];

请帮忙。

无论我会得到什么 NSDate，我都想再次转换为字符串，即。仅 2012 年 11 月 4 日。我在ggl上搜索过。但没有令人满意的结果:(

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:01:20.357

以下是如何解析字符串以生成日期：

```
NSString *dateString = @"2012-04-11T07:51:10+0000";
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"yyy-MM-dd'T'HH:mm:ssZ";
NSDate *date = [formatter dateFromString:dateString];
NSLog(@"Date: %@", date); 
```

现在您可以生成日期的新字符串表示形式，如下所示：

```
formatter.dateFormat = @"dd-MM-yyyy";
NSString *newDateString = [formatter stringFromDate:date];
NSLog(@"New string: %@", newDateString);
// 11-04-2012 
```

* * *

您使用的问题`dateFormat`是您不必转义所有符号，例如`'MM'`and`zzzz`不是解析 type 时区的正确符号`+0000`。

查看此[文档](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:07:19.780

试试这个代码。

```
NSString *dateStr = @"Wed, 22 Jun 2011 12:36:00 +0100"; // change value base on your requirement.

    // Convert string to date object
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"EEE, d MMM yyyy HH:mm:ss ZZZ"]; // Change format base on dareStr.
    NSDate *date = [dateFormat dateFromString:dateStr];  

    // Convert date object to desired output format
    [dateFormat setDateFormat:@"EEE, MMM d YYYY"]; // Change format base on your output requirement
    dateStr = [dateFormat stringFromDate:date];
    NSLog(@"Date -- %@",dateStr);
    [dateFormat release]; 
```

# html - CSS多背景问题

> ID：10103678
> 
> 赞同：0
> 
> 时间：2012-04-11T09:56:16.443
> 
> 标签：html, css

我的页面正文上有多个背景时遇到问题。这是CSS：

```
html, body {
    margin: 0px;
    padding: 0px;
    width: 100%;
    background-image: url(../img/top-left.png), url(../img/top-right.png);
    background-position: top-left, top-right;
    background-repeat: no-repeat;
} 
```

但是，这不起作用。有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T09:58:27.983

不是`top-left, top-right`但是`top left, top right`。

# iphone - CustomCell 参考丢失

> ID：10103680
> 
> 赞同：0
> 
> 时间：2012-04-11T09:56:22.243
> 
> 标签：iphone, ios4, iphone-sdk-3.0

我在一个支持两个方向的 tableView 中工作。让我解释一下整个场景我遇到了什么问题。

1.  当 iPhone 处于纵向视图时，我使用 customCell 在 tableView 行中显示了一个封面图像、一个进度条、按钮和几个标签。
2.  我已经展示了两个图像，两个进度条和按钮和标签，简而言之，我在横向视图中连续显示了两条记录

**问题**

*   当我开始以纵向视图下载并更改其方向时，特定索引处的自定义单元格的引用将丢失。
*   如果我点击 5 行下载一些文件，在这种情况下数组索引为 4，indexPath.row 也是 4，但在横向模式下，数组索引仍为 4，但 indexPath.row 为 [array count]/2 if [array count]%2==0 否则为 [array count]/2 +1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:17:40.970

对于横向模式，请像这样检查.....如果您的数组计数= 5，那么检查它就像

```
 if ([array count]%2 != 0) 
  {
     indexpath.row = ([array count] - 1)/2 + 1 
   } 
```

因此，例如，如果计数为 5，那么您将得到 (5-1)/2+1 = 3

当您下载任何东西时，然后将该引用添加到数组和 viewwillApper() 方法中，只需检查一个条件，如果您的引用数组计数大于零，则从数组中获取该引用并将其放在您的视图中的相应位置……

# php - 在 codeigniter 中显示创建的图像

> ID：10103683
> 
> 赞同：0
> 
> 时间：2012-04-11T09:56:32.600
> 
> 标签：php, codeigniter, image-processing

我必须使用 php（codeigniter）创建一个图像，并且需要在浏览器中显示它。我有一个像下面这样的课程

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

// class Welcome extends CI_Controller {

    class Get_captcha extends CI_Controller {

 function __construct()
{
    parent::__construct();
    $this->load->library('session');
    $this->load->library('form_validation');
    $this->load->helper(array('form', 'url'));

}

function index()
{

// header('Content-Type: image/png');
Header("Content-type: image/png");
// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = 'Testing...';
// Replace path by your own font path
$font = 'verdana.ttf';

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im);

}

    } 
```

当我调用[http://localhost/tvc/index.php/get_captcha](http://localhost/tvc/index.php/get_captcha) 它显示错误..

请任何人帮助我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:01:17.687

最有可能的错误与未找到verdana.ttf有关...

# javascript - 动态 iframe 高度

> ID：10103686
> 
> 赞同：2
> 
> 时间：2012-04-11T09:56:51.283
> 
> 标签：javascript, html, dynamic, iframe

我有个问题。我正在开发一个由中央 div 和内部 iframe 组成的模板。div 应根据 iframe 的内容动态调整大小。我尝试了此处找到的其他解决方案，但没有结果。我正在使用以下 HTML 代码：

```
<div id="site_content" style="position:relative; width:445px; height:500px;">

    <iframe id="mainframe" name="mainframe" onload="parent.adjustIFrameHeight();" FRAMEBORDER="0" scrolling="no" style="overflow:hidden; border:none;" src="http://www.letsapp.it/alecianetti/" width="445" height="600"></iframe>

</div> 
```

我希望 div (#site_content) 在 iframe 内容更改时动态调整大小。我试过这个功能，但我不是很擅长使用 js 和类似的东西（我现在正在研究它们；））所以我不知道它是否有用或正确

```
onload="parent.adjustIFrameHeight();" 
```

为了让您了解结果，我为您链接了[ThemeForest Wave CV](http://themeforest.net/item/wave-cv-first-impression/full_screen_preview/300441)的演示站点，这是我正在复制的模板。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:59:58.250

刚刚试了一下！

```
 <script type="text/javascript">
        function setIframeHeight(iframeName) {
          //var iframeWin = window.frames[iframeName];
          var iframeEl = document.getElementById? document.getElementById(iframeName): document.all? document.all[iframeName]: null;
          if (iframeEl) {
          iframeEl.style.height = "auto"; // helps resize (for some) if new doc shorter than previous
          //var docHt = getDocHeight(iframeWin.document);
          // need to add to height to be sure it will all show
          var h = alertSize();
          var new_h = (h-148);
          iframeEl.style.height = new_h + "px";
          //alertSize();
          }
        }

        function alertSize() {
          var myHeight = 0;
          if( typeof( window.innerWidth ) == 'number' ) {
            //Non-IE
            myHeight = window.innerHeight;
          } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
            //IE 6+ in 'standards compliant mode'
            myHeight = document.documentElement.clientHeight;
          } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
            //IE 4 compatible
            myHeight = document.body.clientHeight;
          }
          //window.alert( 'Height = ' + myHeight );
          return myHeight;
        }
    </script>

</head>
<body onload="setIframeHeight('ifr');">
<center>
    <iframe id="ifr" src="yourdomain!" onload="parent.adjustIFrameHeight();" width="850px" scrolling="no" ></iframe>
</center>
</body>
</html> 
```

# jpeg - 压缩域中的运动检测（JPEG/Mpeg4/H264）

> ID：10103687
> 
> 赞同：4
> 
> 时间：2012-04-11T09:56:52.210
> 
> 标签：jpeg, motion-detection, mpeg-4

每个人！

我处理来自 IP 摄像机的视频，并编写了基于解压缩视频分析的运动检测算法。但我真的更快。我找到了几篇关于压缩域分析的论文，但没有找到任何实现。谁能给我推荐一些代码？

找到的材料：
[http :](http://www.ist-live.org/intranet/school-of-informatics-university-of-bradford001-7/41410206.pdf/view)
[//www.ist-live.org/intranet/school-of-informatics-university-of-bradford001-7/41410206.pdf/view http://doc.rero.ch/lm.php? url=1000,43,4,20061128120121-NA/Bracamonte_Javier_-_A_Low_Complexity_Change_Detection_Algorithm_20061128.pdf](http://doc.rero.ch/lm.php?url=1000,43,4,20061128120121-NA/Bracamonte_Javier_-_A_Low_Complexity_Change_Detection_Algorithm_20061128.pdf)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-09T07:15:31.587

我必须检测 H.264 视频中的运动，对我来说，帧大小是一个非常好的指标。

我使用 ffprobe（来自 ffmpeg 项目）来导出帧大小，如下所示：

`./ffprobe -show_frames -pretty video.mp4 | grep 'size' | grep -o '[0-9]*' > sizes.txt`

在我的情况下，**没有移动**意味着**更大的 I 帧**（对我来说，每 30 帧是一个 I 帧）和中间一些帧的更小尺寸。

我是视频编码的新手，所以我猜这些东西可能非常依赖于视频信号的编码和类型，但值得一看，因为它的试用速度非常快。导出帧大小并在例如 Matlab 中查看。

* * *

**编辑：** 最后我重新编码了视频，使每一秒帧都是一个 I 帧，因为这提供了更好的时间分辨率。我没有测试的一个想法是反转视频并做同样的事情，这应该可以更准确地估计运动开始/结束的时间，类似于通过前向后向滤波消除相位延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-14T20:51:49.437

[https://github.com/Breakthrough/DVR-Scan](https://github.com/Breakthrough/DVR-Scan)

> DVR-Scan 是一个跨平台命令行 (CLI) 应用程序，可自动检测视频文件（例如安全摄像机镜头）中的运动事件。除了定位每个运动事件的时间和持续时间之外，DVR-Scan 还将每个运动事件的镜头保存到一个新的、单独的视频剪辑中。DVR-Scan 不仅是免费的开源软件 (FOSS)，用 Python 编写，并且基于 Numpy 和 OpenCV，而且是可扩展和可破解的。

我可以确认它与 MPEG4 (H264) AVI 文件完美配合。对于 1200x900 视频，我的笔记本电脑配备 i5 4300U CPU 的扫描速度约为 30 fps。

您可以检查所使用算法的来源。

以下是来自同一作者的一些解释性教程链接： [https ://github.com/Breakthrough/python-scene-detection-tutorial](https://github.com/Breakthrough/python-scene-detection-tutorial)

另请参阅[Python 场景变化检测](https://stackoverflow.com/questions/3273196/python-scene-change-detection)。

# asp.net-mvc - 单击提交按钮后，自动完成文本框在 MVC3 中不应为空

> ID：10103688
> 
> 赞同：0
> 
> 时间：2012-04-11T09:56:58.413
> 
> 标签：asp.net-mvc

单击按钮后保留 mvc3 文本框。我的视图代码。

```
<div style="float: left">

States Filter :

</div>

<div style="float: left; padding-left: 10px">
   @Html.TextBox("Statestxt")
</div>

<div style="padding-left: 10px; float: left">
   <input type="image" value="submit" src="../../Images/FilterBrowse.gif" 
          alt="submit Button" />    
</div> 
```

**我的控制器：**

```
public ActionResult AutocompleteAsync(string term)
{  
    var suggestions = from s in Adm.states
    select s.state_name;
    var namelist = suggestions.Where(n => n.ToLower().StartsWith(term.ToLower()));

    return Json(namelist, JsonRequestBehavior.AllowGet);
}

[AcceptVerbs(HttpVerbs.Post)]   
public ActionResult States(state stateModel, string _stateName, 
    FormCollection formvalues)
{  
   AdmDataContext Adm  = new AdmDataContext;

   if (Request.Form["Statestxt"] == null)
   {
      ViewBag.Error = "Enter State Name.";   
      ViewData["name"] = false;

      return View();
    }
    else
    {
        _stateName = Request.Form["Statestxt"].ToString();
        var record = (from state in Adm.states
                      where state.state_name == _stateName
                      select state).Count();

        if (record == 0)
        {
           ViewBag.Error = "Enter Valid State Name.";

           return View();

        }

        var _Stateid = from state in Adm.states
                       where state.state_name == _stateName
                       select state;

        int StateId = (int)_Stateid.First().state_id;
        var state1 = am.FindUpcomingStates2(StateId).ToList();

        if (state1 != null)
        {
            ViewData["name"] = true;
            return View("States", state1);
        }

     }

} 
```

点击提交按钮后，这里的文本框应该是空的。如何为不为空的文本框编写代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:46:10.730

为什么不使用视图模型：

```
public class StateViewModel{

public string StateTxt { get; set; }

} 
```

然后在视图上（剃刀视图）

```
@model StateViewModel

@html.TextBox("StateTxt", Model.StateTxt) 
```

然后在控制器上

```
[HttpPost]
public ActionResult States(StateViewModel model)
{
//Do here what you want

//Then put the text box empty

model.StateTxt =string.empty;

return View(model);

} 
```

希望这可以帮助

# postgresql - 如何在 pgScript 中编写存储过程？

> ID：10103691
> 
> 赞同：1
> 
> 时间：2012-04-11T09:57:06.143
> 
> 标签：postgresql, stored-procedures, pgadmin

`pgScript`是否可以在其主体中创建存储过程？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:56:21.323

不，`pgScript`仅在 pgAdmin3 中可用。

# css - 水平居中对齐缩略图

> ID：10103692
> 
> 赞同：5
> 
> 时间：2012-04-11T09:57:08.367
> 
> 标签：css, twitter-bootstrap, thumbnails, alignment

以下是我在 html 中使用 twitter-bootstrap 的代码。我正在尝试使输出居中对齐，但无论我做什么，图像都是左对齐的。

```
<ul class="thumbnails"> 
   <li class="span5">
    <a href="#" class="thumbnail"><img src="img.jpg" /></a>
   </li>
</ul> 
```

有什么简单的解决办法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T12:50:05.697

Twitter 引导缩略图默认浮动到左侧，您必须在自己的样式表上覆盖该行为，以使其容器与`text-align:center`和`display:inline-block`属性居中对齐。试试这个：

**CSS**

```
.thumbnails {
    text-align:center;
}

.thumbnails > li {
    display: inline-block;
    *display:inline; /* ie7 fix */
    float: none; /* this is the part that makes it work */
} 
```

这样缩略图图像将在`.thumbnails`容器内居中。将`.thumbnail`类替换为您想要将图像居中的容器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T10:37:45.077

如果你使用`text-align: center;`并给你`img` `display: inline-block;`它应该成为中心对齐。

见：http: [//jsfiddle.net/HWMZg/](http://jsfiddle.net/HWMZg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T06:57:27.547

这很简单，只需添加：

```
<div class="thumbnail" style="margin:0px auto;">whatever image tag here ...</div> 
```

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T22:12:46.767

我发现这对 Bootstrap 最有效：

```
.thumbnails > li {
  float: right;
  margin-bottom: 18px;
  margin-left: 20px;
} 
```

我只是将“浮动”从“左”更改为“右”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T05:38:54.630

为图像创建一个新行。根据图像的大小使用适当的偏移量，例如：

```
<div class="span8 offset2" > 
```

# java - PriorityQueue 轮询

> ID：10103694
> 
> 赞同：0
> 
> 时间：2012-04-11T09:57:20.360
> 
> 标签：java, data-structures, priority-queue

看起来 PriorityQueue 是一个 LIFO 结构（如果其中的所有元素都具有相同的优先级），对吗？

```
 public E poll() {
    if (size == 0)
        return null;
    modCount++;

    E result = (E) queue[1];
    queue[1] = queue[size];
    queue[size--] = null;  // Drop extra ref to prevent memory leak
    if (size > 1)
        fixDown(1);

    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:04:07.573

Javadoc 中“关系被任意破坏”的声明意味着您的问题的答案是“不”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:02:56.487

从文档中：

> 基于优先级堆的无界优先级队列。优先级队列的元素根据它们的自然顺序进行排序，或者由队列构建时提供的 Comparator 排序，具体取决于使用的构造函数。优先级队列不允许空元素。依赖于自然排序的优先级队列也不允许插入不可比较的对象（这样做可能会导致 ClassCastException）。
> 
> 此队列的头部是相对于指定排序的最小元素。如果多个元素以最低值绑定，则头部是这些元素之一——绑定被任意打破。队列检索操作 poll、remove、peek 和 element 访问队列头部的元素。

[http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)

基本上，总是有一个“优先级”，默认情况下，它是元素的自然顺序。

# php - 用php对多维数组进行排序

> ID：10103696
> 
> 赞同：0
> 
> 时间：2012-04-11T09:57:26.500
> 
> 标签：php, arrays, sorting

> **可能重复：在 PHP 中对**
> [关联数组进行](https://stackoverflow.com/questions/777597/sorting-an-associative-array-in-php)
> [排序 在 PHP 中对多维数组进行排序？](https://stackoverflow.com/questions/1795244/sorting-a-multidimensional-array-in-php)

我在对数组进行排序时遇到了一些困难......我有一个包含（子）类别和项目的数组，但我无法对它们进行排序......

该数组通常如下所示：

```
array
  'Professional Services Applications' => 
    array
      'Specialized Technologies' => 
        array
          'Test Michiel, part 2' => 
            array
              0 => string '2071' (length=4)
      'JAVA' => 
        array
          'Senior Apple Engineer' => 
            array
              0 => string '2067' (length=4)
          'Junior Apple Engineer' => 
            array
              0 => string '2069' (length=4)
      'Microsoft' => 
        array
          'Senior ECM Consultant' => 
            array
              0 => string '2059' (length=4)
          'Junior ECM Consultant' => 
            array
              0 => string '2082' (length=4)
  'Business Applications' => 
    array
      '' => 
        array
          'Business Analyst' => 
            array
              0 => string '2053' (length=4)
          'Test business dingen ' => 
            array
              0 => string '2062' (length=4)
  'acADDemICT' => 
    array
      '' => 
        array
          'Test Michiel 
```

为了清楚起见，
这些类别是：**专业服务应用程序**、**业务应用程序**和**acADDemICT**。
子类别是：**Specialized**、**Technologies**、**JAVA**和**Microsoft** （有些没有子类别！）

我用这个 PHP 代码遍历这个数组：

```
foreach ($job_list as $category => $subcategory) {
    $page .=  '<h2>' . $category .'</h2>';

    foreach ($subcategory as $name => $values) {
        if (!empty($name)) {
        $page .= '<h3>' . $name . '</h3>';
        }

        foreach ($values as $vacancy => $link) {
        $page .= '<li>' . l("$vacancy", "node/$link[0]") . '</li>';
        }   
    }
} 
```

我尝试了所有不同类型的排序函数（`sort()`, `asort()`, `ksort()`,...），但我没有得到正确的结果。

我的目标是按字母顺序排列类别、子类别和项目...

所以我的理想结果是这样的：

```
**aCCademICT:**  
    - Test Michiel  
**Business Applications:**  
    - Business Analyst  
    - Test business  
**Professional Services Applications:**  
   *JAVA*  
    - Junior Apple Engineer  
    - Senior Apple Enineer  
   *Microsoft*  
    - Junior ECM Consultant  
    - Senior ECM Consultant     
   *Specialize Technologies*  
    - Test Michiel, part 2 
```

**更新：**
这是我的`print_r`：

```
Array ([Professional Services Applications] => Array ( [Specialized Technologies] => Array ( [Test van Michiel, part 2 ] => Array ( [0] => 2071 ) ) [JAVA] => Array ( [Senior Apple Engineer ] => Array ( [0] => 2067 ) ) [Microsoft] => Array ( [Junior ECM Consultant ] => Array ( [0] => 2059 ) [Senior ECM Consultant] => Array ( [0] => 2087 )) ) [acADDemICT] => Array ( [] => Array ( [Test van Michiel ] => Array ( [0] => 2063 ) ) ) [Business Applications] => Array ( [] => Array ( [Business Analyst ] => Array ( [0] => 2053 ) [Test business dingen ] => Array ( [0] => 2062 ) ) ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:59:44.883

您应该编写一个遍历每个数组的递归函数，如果元素本身是一个数组，则对其进行排序，然后对原始数组进行排序。

伪代码：

```
function mysort($array) {
  foreach ($array as $key=>$value) {
    if (is_array($value)) $array[$key] = mysort($value);
  }
  sort($array);
  return $array;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:04:26.497

由于要对三个级别的键进行排序，因此您必须在某种程度上应用`ksort`到多维数组的所有 2d 级别：

```
$array = array(
    'Category Z' => array(
        'Category Z - Z' => array(
            'Category Z - Z - Z' => array('2701'),
            'Category Z - Z - X' => array('2601'),
        )
    ),
    'Category A' => array(
        'Category A - A' => array(
            'Category A - A - A' => array('2200'),
        )
    ),
);

$ksort = function($array) use (&$ksort) {
    if (!is_array($array)) return $array;
    ksort($array);
    return array_map($ksort, $array);
};

$array = $ksort($array);

print_r($array); 
```

输出：

```
Array
(
    [Category A] => Array
        (
            [Category A - A] => Array
                (
                    [Category A - A - A] => Array
                        (
                            [0] => 2200
                        )

                )

        )

    [Category Z] => Array
        (
            [Category Z - Z] => Array
                (
                    [Category Z - Z - X] => Array
                        (
                            [0] => 2601
                        )

                    [Category Z - Z - Z] => Array
                        (
                            [0] => 2701
                        )

                )

        )

) 
```

# jquery - 触发 OnSuccessForm() 之前的 Ajax.BeginForm 确认对话框 onBeginForm()

> ID：10103702
> 
> 赞同：0
> 
> 时间：2012-04-11T09:57:58.000
> 
> 标签：jquery, ajax, asp.net-mvc-3

在确认对话框上单击“是”或“否”后，不会触发 OnSuccessForm() 函数。关于如何在继续之前停止 onBeginForm() 的任何想法？

我的 MVC3 表单

```
@using (Ajax.BeginForm("Edit", @ViewContext.Controller.ValueProvider.GetValue("controller").RawValue, new AjaxOptions
{
  UpdateTargetId = Model.Title.Replace(" ", "") + "Form",
  InsertionMode = InsertionMode.Replace,
  OnBegin = "onBeginForm",
  OnSuccess = "OnSuccessForm",
  OnFailure = "showFaliure"
}))
{
  @Html.ValidationSummary(true)
  @Html.RenderStandardEditor("Edit " + Model.Title)
} 
```

这是我的 JavaScript 示例代码

```
<script type="text/javascript">
  var confirmation = false;
  function onBeginForm(ajaxContext)
  {
    $.confirm({
    'title': 'Confirmation',
    'message': 'Confirm?',
    'buttons': {
      'Yes': {
        'class': 'cyan',
        'action': function ()
        {
          confirmation = true;
        }
      },
      'No': {
        'class': 'gray',
        'action': function ()
        {
          confirmation = false;
        }
      }
    }
  });
}

function OnSuccessForm(ajaxContext)
{
  if (confirmation == true)
  {
    //DO SOMETHING        
  } 
}

function showFaliure(ajaxContext)
{
  //THROW ERROR
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:13:36.960

我相信您错误地使用了 onSuccess 函数。只有在您的数据成功发布后才会调用该函数。因此，无论您在确认框中选择了什么，数据都会以任何一种方式发布，然后您的确认框仅确定在发布后是否对这些数据进行了任何处理。这真的是你想要的吗？

至于为什么你的 onSuccessForm 没有被击中，我能提供的只是尝试调试它的方法。是否会调用 showFaliure？使用萤火虫控制台是否会发布数据？如果您注释掉 onBeginForm 函数中的所有内容，那么会调用 onSuccessForm 吗？

# macos - 使用 htaccess 在 OS X 上使用 MAMP 清理 URL

> ID：10103707
> 
> 赞同：0
> 
> 时间：2012-04-11T09:58:14.133
> 
> 标签：macos, .htaccess, mod-rewrite, mamp

上周末，我在家里建立了一个新的 Windows 站点（使用 xampp）。一切正常，我得到了干净的 URL（如[http://mysite.com/page/about](http://mysite.com/page/about)）。今天我不得不把文件带到我的办公室，在那里我使用带有 MAMP 的 Mac，但没有任何效果。我更改`AllowOverride`为`All`/Applications/MAMP/conf/apache/httpd.conf 文件，并启用`LoadModule rewrite_module modules/mod_rewrite.so`，但没有运气。（当然，我重新启动了 MAMP）但是什么也没发生。我所有的网络浏览器都没有告诉我这个错误。刚刚在标题中获得了“localhost:8888/”。

我在 .htaccess 文件中使用这些行：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule ^([A-Za-z0-9_-]+)(/)?$ index.php?page=$1 [QSA]
   RewriteRule ^page/([A-Za-z0-9_-]+)(/)?$ index.php?page=page&uri=$1
   RewriteRule ^work/([A-Za-z0-9_-]+)(/)?$ index.php?page=work&uri=$1
</IfModule> 
```

我还能做些什么来使它正常工作？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:09:00.553

这使我能够响应请求路径 /about 来提供 about.php 文件：

```
RewriteRule ^([A-Za-z0-9_-]+)(/)?$ /$1.php [L] 
```

请注意，在 MAMP 上，您必须将其放在 .htaccess 中：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule ^([A-Za-z0-9_-]+)(/)?$ /$1.php [L]
</IfModule> 
```

在 MAMP 上将相同的块放在 httpd.conf 中对我不起作用。

# javascript - 使用 Javascript 邀请朋友，但在画布应用程序的特定页面内

> ID：10103713
> 
> 赞同：0
> 
> 时间：2012-04-11T09:58:29.543
> 
> 标签：javascript, facebook, canvas, invite

我需要做的是在我的 facebook 应用程序的各个页面上放置一个按钮，它将邀请用户的朋友到应用程序的特定页面。

我使用 facebook 的 JS SDK 并创建了以下函数：

```
<script>
function sendRequestViaMultiFriendSelector() {
    FB.ui({method: 'apprequests',
        title: 'Share message title',
        message: 'Share message'
    }, requestCallback);
}
function requestCallback(response) {
}
</script> 
```

我在想我可能需要添加“redirect_uri”，但无论我做什么都没有用。该应用程序使用干净的网址。

我必须告诉你，我的应用程序仍处于沙盒模式，并且我还为用户设置了基本的 Authenticated Referrals。此外，迁移设置如下：

```
Stream post URL security: Disabled
Deprecate offline access: Enabled
Timezone-less events: Enabled
Forces use of login secret for auth.login: Disabled
Enhanced Auth Dialog: Enabled
Page Hours Format: Enabled
Batch API Exceptions Format: Enabled
July 2012 Breaking Changes: Disabled
Include Checkins with Statuses: Enabled 
```

您是否需要更多信息，以便您可以帮助我找到解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:23:07.940

我以前从未尝试过，但[Requests Dialog 文档](http://developers.facebook.com/docs/reference/dialogs/requests/)中有一些关于 data 参数的信息，它是可选的：

> 您可以传递用于跟踪的可选附加数据。这将作为创建的请求对象的一部分存储。最大长度为 255 个字符。

此外，您可以在这个官方 facebook 博客文章中看到它是如何使用的：[升级到 Requests 2.0](http://developers.facebook.com/blog/post/464/)

希望这对您有所帮助。

# c - 如何将图像转换为 WORD (uint16) 数组？

> ID：10103716
> 
> 赞同：1
> 
> 时间：2012-04-11T09:58:40.137
> 
> 标签：c, image

我的目录中有一些图像（.bmp、.png、.jpg）。我想将此图像转换为 WORD 数组，以便以 565 格式（16 位像素）在 LCD 中显示此图像。如何将图像转换为 WORD 数组？请帮忙。是否有任何实用程序可以将图像转换为二进制？或者请在 Windows C/CPP 中提供一些代码以将其转换为二进制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:02:38.623

这在很大程度上取决于输入图像的确切格式。

只是将“转换为文字”并不能真正表达您想要做什么，这可能更像是“将位图图像转换为以行为主格式的 RGB565 像素数组”。

您应该查看允许您加载位图图像并读出每个像素值的图像处理库。

您可能可以直接转换为 RGB565，从任何其他位图格式都不会太难。

请注意，有索引和“真彩色”位图格式，听起来您需要同时处理这两种格式。如果幸运的话，每种格式的库都会将其抽象出来并具有例如`uint32 read_pixel_as_rgb888()` 功能。

另请注意，许多位图图像格式非常注重压缩，这就是为什么仅读取文件的位是不够的，您需要根据格式对数据进行解压缩。这是相当复杂的，这就是为什么预写库是唯一明智的选择。

对于 PNG，请查看[libpng](http://www.libpng.org/pub/png/libpng.html)，对于 JPEG，请查看[libjpeg](http://www.ijg.org/)。再想一想，这些库可能有点太低级了，也许你应该看看像[SDL_Image](http://www.libsdl.org/projects/SDL_image/)这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:11:57.017

您可以尝试使用 CImg 打开图像文件 - [http://cimg.sourceforge.net/](http://cimg.sourceforge.net/)

# php - jquery 和 ajax 页面问题

> ID：10103717
> 
> 赞同：0
> 
> 时间：2012-04-11T09:58:43.583
> 
> 标签：php, jquery, mysql, ajax

我正在通过 ajax jquery 实现搜索功能，尽管我是新手。我已经通过使用 keyup 事件来做到这一点。每当输入一些东西，根据那个字母，我的搜索列表就来了。但事情是，刷新页面时我没有得到任何记录。如果我搜索某些内容，那么只有我得到记录，如果在那个位置我删除了在搜索字段中键入的所有文本，那么正确的记录列表就会出现，但最初不是。

```
 $("#search_term").keyup(function(e){ 
                e.preventDefault(); 
                ajax_search(); 
        }); 

    function ajax_search(){ 
      $("#search_results").show(); 
      var search_val=$("#search_term").val(); 
      $.post("user-account-other.php", {search_term : search_val}, function(data){
       if (data.length>0){ 
         $("#search_results").html(data); 
       } 
      }) 
    } 

 <div id="search_results"></div> 
```

现在请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:08:51.273

我不是 100% 确定你在问什么。一旦我能理解问题，我很乐意用更多信息更新这个答案。但是，我确实想向您展示如何更好地简化您的代码。

见：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

```
$("#search_term").keyup(function(e){ 
    e.preventDefault(); 
    ajax_search(); 
}); 

function ajax_search(){ 
    var url = "user-account-other.php?search_term=" + $("#search_term").val();
    $("#search_results").load(url, function(){
         //Ajax Load is Done
    }).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:15:10.890

Put ajax_search() funcion in on onload of document and also on blur of a text box element then it will work perfectly

# jquery - 选择不同'ul'的'li' - jQuery

> ID：10103721
> 
> 赞同：-1
> 
> 时间：2012-04-11T09:58:48.423
> 
> 标签：jquery

我的html如下

```
<ul id="ul1">
  <li>
   content1
  </li>
</ul>
<ul id="ul2">
  <li>
   content2
  </li>
</ul>
<ul id="ul3">
  <li>
   content3
  </li>
</ul> 
```

**编辑**

我需要数组中这些 li 的内容我如何在 jQuery 中做到这一点

```
array['ul1']='content1'
array['ul2']='content3' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T10:00:59.360

这是给你的单线。它会给你一个这样的数组`["content1", "content2", "content3"]`

```
$('li').map(function () { return $(this).text(); }).get(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T10:00:22.280

你只需要在jQuery中编写如下

```
var myarray=new Array();
$("li").each(function() 
            {      
       var text = $(this).text();//you can also write html() function also...    
       var parentUI = $(this).parent('ul').attr("id"); 
       myarray.push(parentUI  + ',' + text ); 
  }); 
```

这意味着您只需要为所讨论的结构写出[元素选择器（“元素”）](http://api.jquery.com/element-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:04:15.023

就像是：

```
var arr = [];
$('li').each(function(index) {
  arr.push($(this).text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T10:09:20.170

试试这个：

```
textArray = [];
i = 0

$("li").each(function() {
   textArray[i] = $(this).text();
   i++;
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:23:11.950

可能此代码是您要查找的代码：

```
var result = {};
$("li").each(function() {
  result[$(this).parent().attr('id')] = $(this).text();
}) 
```

# perl - 如何在 SOAP::Lite 中破坏命名空间生成？

> ID：10103723
> 
> 赞同：4
> 
> 时间：2012-04-11T09:58:50.540
> 
> 标签：perl, wsdl, cxf, xml-namespaces, soaplite

设想：

*   [客户端是一个使用SOAP::Lite](http://p3rl.org/SOAP%3a%3aLite)的 Perl 脚本。
*   服务器是使用 Spring 和 CXF 的基于 Java 的应用程序。

我的客户端基于 WSDL 生成以下 SOAP 请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <createFolder xmlns="http://xyz.com/">
            <parentId xsi:type="xsd:string">1</parentId>
            <folderName xsi:type="xsd:string">Test</folderName>
        </createFolder>
    </soap:Body>
</soap:Envelope> 
```

此请求将针对 CXF 失败。经过几次调查，我发现以下手动生成的请求可以工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xyz="http://xyz.com/">
    <soap:Body>
        <xyz:createFolder>
            <parentId xsi:type="xsd:string">1</parentId>
            <folderName xsi:type="xsd:string">Test</folderName>
        </xyz:createFolder>
    </soap:Body>
</soap:Envelope> 
```

不同之处在于元素的命名空间定义`createFolder`。

我的问题是：**如何配置 SOAPLite 来创建有效的 SOAP 请求？**

反之亦然：**如何将 CXF 配置为接受 SOAP::Lite 请求样式？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:11:31.633

看下[`ns`](http://search.cpan.org/perldoc?SOAP%3a%3aLite#ns%28%24uri,%24prefix=undef%29)。如果为片段的根元素提供类似的限定名称

使用以下内容：

```
SOAP::Lite->new->proxy( 'http://somewhere.com' )
    ->ns( 'http://xyz.com/', 'xyz' )->createFolder( 
      SOAP::Data->new( name => 'parentId',   value => 1, type => 'xsd:string' )
    , SOAP::Data->new( name => 'folderName', value => 'Test' ) 
    ); 
```

我得到以下信息：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:xyz="http://xyz.com/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
>
  <soap:Body>
    <xyz:createFolder>
      <parentId   xsi:type="xsd:string">1</parentId>
      <folderName xsi:type="xsd:string">Test</folderName>
    </xyz:createFolder>
  </soap:Body>
</soap:Envelope> 
```

我认为这就是你想要的。

# javascript - javascript window.print 在手机上不起作用

> ID：10103726
> 
> 赞同：2
> 
> 时间：2012-04-11T09:59:01.193
> 
> 标签：javascript, mobile, printing

javascript print 在手机上不起作用，有没有办法使用手机打印网页内容？

# regex - 正则表达式，找到“]”

> ID：10103733
> 
> 赞同：-3
> 
> 时间：2012-04-11T09:59:23.207
> 
> 标签：regex

我使用正则表达式。如何找到“]”符号？

我试过`[\]]`，但这不起作用，因为它搜索“ `\`”而不是....

**PS。**
我使用 EditPlus 作为文本编辑器，并使用该软件中的“正则表达式”选项来查找出现，而不是编程语言，所以可能是一个错误，但正确的查询应该是什么？...

**聚苯乙烯。**
我需要用空字符“”替换所有`[`或字符。`]`所以我使用`[\\]]|[\\]]`，但这不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:06:44.137

如果您只寻找一个字符，则不需要字符类。试试这个：

```
Pattern regex = Pattern.compile("\\]"); 
```

编辑：哦，所以你没有使用 Java，你使用的是编辑器。那么，尝试`\]`或简单地`]`（应该编译为，`\]`因为在这种情况下它只能表示文字括号）。

编辑2：所以现在你的问题是“我如何匹配左括号或右括号？”。好的，这确实需要一个字符类。

许多正则表达式引擎允许`[][]`表示“列表中存在的任何字符 `],[`”。如果您的编辑器没有，请尝试`[\]\[]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:22:46.933

你试过正则表达式吗`\[|\]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:02:36.350

在java中你必须写`"[\\]]"`

例如这个测试返回`true`.

```
String s = "]val";
Pattern p = Pattern.compile("[\\]]val");
System.out.println("match: " + p.matcher(s).matches()); 
```

如果您需要用空字符“”替换所有`[`或字符`]`

```
s = s.replaceAll("\\[|\\]", ""); 
```

# ios5 - 将 UISwitch 设置为存储的 NSUserDefaults 值时遇到问题

> ID：10103736
> 
> 赞同：0
> 
> 时间：2012-04-11T09:59:33.900
> 
> 标签：ios5, uiswitch

我遇到了一个问题，我无法在我的应用程序中保留 UISwitch 的状态。我认为问题在于我一直在尝试来自不同教程和代码源的许多不同示例以使其正常工作，而我只是没有看到完整的画面。

我已经设置了一个用户偏好屏幕，相关代码是：

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Trying here to check whether user has run app previously, and if not set default switch value (as defined in IB)
NSString *firstRunValue = [[NSUserDefaults standardUserDefaults] stringForKey:@"testSwitch"];
if (!firstRunValue) {
    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"testSwitch"];
    [[NSUserDefaults standardUserDefaults] synchronize];
}

return YES;
} 
```

选项视图控制器.h

```
@property (weak, nonatomic) IBOutlet UISwitch *testSwitch; 
```

选项视图控制器.m

```
@synthesize testSwitch;

.
.
.

- (void)viewDidLoad
{

[super viewDidLoad];
// Here's the issue - following line does NOT set switch as expected from defaults...
[testSwitch setOn:[[NSUserDefaults standardUserDefaults] boolForKey:@"testSwitch"] animated:NO];

}

.
.
.

- (IBAction)updateTest:(id)sender {
// Action called when switch is clicked to save new state, Log shows 0 or 1 as expected
[[NSUserDefaults standardUserDefaults] setBool:[sender isOn] forKey:@"testSwitch"];
NSLog(@"%@", [[NSUserDefaults standardUserDefaults]valueForKey:@"testSwitch"]);
}

.
.
.

- (IBAction)saveOptions:(id)sender {

// When user clicks "Save" and exits, I synch defaults and dump them, again output is as expected
[[NSUserDefaults standardUserDefaults] synchronize];
NSLog(@"%@", [[NSUserDefaults standardUserDefaults] dictionaryRepresentation]);
[self dismissModalViewControllerAnimated:YES];
} 
```

如果有人能让我知道我哪里出错了（用英语而不是 Objective-C！）我会很感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:21:57.340

试试这个：

```
NSString *firstRunValue = [[NSUserDefaults standardUserDefaults] stringForKey:@"firstRun"];

if (!firstRunValue) {
    [[NSUserDefaults standardUserDefaults] setObject: @"BlaBla" forKey:@"firstRun"];
    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"testSwitch"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

# iphone - 在 Xcode 中更改按钮的背景图像（按钮在超类中）

> ID：10103737
> 
> 赞同：0
> 
> 时间：2012-04-11T09:59:34.307
> 
> 标签：iphone, ios, xcode

我在我的项目中继承了我的自定义类。也就是说，我继承了我的自定义类，而不是使用 UIViewController。那个自定义类有按钮。当我在 firstViewController 中时，我必须更改该按钮的背景图像。为此我已经写了

```
 [super.button setBackgroundImage:[UIImage imageNamed:@"whiteButton.png"] forState: UIControlStateNormal]; 
```

但它不会改变背景图像。

请帮助我。我在这里粉刷过。如果完成了，那么我的项目将完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:06:42.230

“super”调用一个类，而不是一个实例，你可能想调用一个实例。

如果 button 是在您的超类中定义的属性并且您在子类中，那么您可以直接访问该属性，就好像它是在子类中定义的一样，所以只需尝试：

```
[self.button setBackgroundImage:[UIImage imageNamed:@"whiteButton.png"] forState: UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:09:59.717

而不是直接将图像名称分配给`setBackgroundImage`......试试这个......

```
UIImageView *imgView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"whiteButton.png"]];
[self.button setBackgroundImage:imgView]; 
```

这对你来说会很有成果.... :)

# maven - 将 maven 依赖回退到更通用的分类器

> ID：10103744
> 
> 赞同：1
> 
> 时间：2012-04-11T10:00:02.867
> 
> 标签：maven, dependency-management, classification, maven-dependency-plugin

Maven 的设计主要是为了支持 Java。但是，我想在 Maven 存储库中存储一些依赖于平台的工件。

为此，我有 2 个分类器：

*   linux- **x86**
*   linux- **x64**

是否可以以这样一种方式定义依赖关系，即如果找不到 linux - **x64**工件，那么 Maven 会尝试找到 linux- **x86**？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:51:12.027

恐怕没有办法做到这一点。事实上，这确实违背了 Maven 对依赖关系严格而直接的哲学。想象一下编译器应该如何处理这样的依赖声明？`linux-x86`应该使用工件还是工件进行编译`linux-x64`？我假设这个模块的 API/SPI 是一样的，但只有你知道。编译器需要特定的类路径。而且很难说在 Maven 中找不到工件是什么意思，因为人们可以使用不同的存储库并且在本地存储库中有不同的东西，所以构建不再是可重复的。由于构建不可重复性，Maven 团队目前认为已弃用并建议不要使用版本范围，与您的想法相比，这确实是“软”的事情。

我的建议是始终释放这两个工件（`linux-x86`和`linux-x64`），并使用这两个分类器释放依赖于它们的工件。这就是Maven的方式。

# ruby-on-rails - Rails + tinymce-rails 奇怪的错误

> ID：10103754
> 
> 赞同：2
> 
> 时间：2012-04-11T10:00:40.430
> 
> 标签：ruby-on-rails, ruby, tinymce

我正在使用 tinymce-rails 作为表单......直到昨晚一切正常......今天早上当我进来并尝试运行表单时，我收到了这个错误

`undefined local variable or method 'tinymce'`

奇怪的是，如果我在 vim 中使用 :w 保存控制器而不对文件进行任何更改......错误消失了，一切正常......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:16:23.037

我有类似的问题（rails 3.1），可能是因为我使用的是高级主题。然后将其添加到 application.js

//= 需要 tinymce //= 需要 tinymce-jquery

以及从 tinymce 到 assets 文件夹的主题文件夹

为我工作......不确定它是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:32:26.760

我通过在控制器中添加 helper(TinyMCE::Rails::Helper) 来修复它，但我仍然不知道发生了什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T22:55:54.073

```
gem update tinymce-rails
bundle update 
```

你应该更新你的宝石

# ruby-on-rails - 在活动管理员中创建自定义表单

> ID：10103755
> 
> 赞同：1
> 
> 时间：2012-04-11T10:00:46.280
> 
> 标签：ruby-on-rails, activeadmin

我需要一个简单的表格来添加一系列电话号码。

```
ActiveAdmin.register Did do
    # ..
    collection_action :add_range, :method => :get do
    end
    collection_action :add_range, :method => :post do
    end
end

<%= semantic_form_for [:admin, :dids, :add_range] do |f| %>
    <%= f.inputs :start, :end %>
    <%= f.buttons :commit %>
<% end %> 
```

以上以“符号：类的未定义方法`model_name'”失败。

如何定义这样的不直接使用对象的表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:34:08.943

刚刚试过，这将工作：

```
<%= semantic_form_for :range, :url => add_range_admin_dids_path do |f| %>
    <%= f.inputs :start, :end %>
    <%= f.buttons :commit %>
<% end %> 
```

然后在 params[:range] 中找到发布的参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-14T23:14:29.467

我有类似的情况，我需要自定义表单操作属性。因此，我发现实现此目的的最佳方法是在相应视图的文件夹中创建部分表单。

首先告诉您的资源您将使用自定义表单，因此将此行添加到您的资源文件中：

```
# app/admin/organizations.rb

form partial: "form" 
```

现在您可以使用[Arbre Components](https://activeadmin.info/12-arbre-components.html)创建您的部分，如下例所示：

```
# app/views/admin/organizations/_form.html.arb

active_admin_form_for [:admin, resource] do |f|
  tabs do
    tab 'General Configuration' do
      f.inputs 'Organization Details' do
        admin_accounts = User.with_role(:admin).order('email ASC')
        site_collection = Site.where("subdomain <> ''").map { |site| ["#{site.subdomain}", site.id ]}
        f.input :name
        f.input :kind, :as => :enum
        f.input :carereceiver_kind, :as => :enum
        f.input :account_manager, :as => :select ,:collection => admin_accounts
        f.input :site_id, as: :select ,collection: site_collection
        f.input :office_phone
        f.input :office_fax
        f.input :office_address
        f.input :company_logo, :as => :file
        f.input :letterhead
        f.input :base_url, label: 'BASE URL'
        f.input :dynamics_url, label: 'DYNAMICS URL'
        f.input :genoa_site_id, label: 'GENOA SITE ID'
      end

      f.inputs 'Organization Settings' do
        f.input :demo_account
        f.input :appointment_not_started_notifications_enabled
        f.input :erx_enabled
        f.input :patients_can_book_appointments
        f.input :new_providers_can_manage_their_own_availability_by_default
        f.input :clarity_enabled
        f.input :whitelist_enabled
        f.input :bed_form_enabled
        f.input :patient_email_required, label: 'Require patient email addresses'
        f.input :patient_credit_card_required, label: 'Require patient credit card information'
        f.input :enable_patient_survey, label: 'Enable patient survey'
        f.input :enable_provider_survey, label: 'Enable provider survey'
        f.input :rcopia4_enabled, label: 'Rcopia 4 enabled'
        f.input :share_notes_across_providers_enabled
        f.input :d2c_mode
        f.input :sso_login_only
        f.input :allow_invited_patients_to_complete_profile
        f.input :allow_overlapping_appointments, as: :select
        f.input :media_mode, :as => :enum
      end

      f.inputs('Organization Contacts', { class: 'organization_contacts_section' }) do
        saved_contacts = f.object.organization_contacts.count
        n = 5 - saved_contacts.to_i
        n.times do
          f.object.organization_contacts.build
        end
        contact_counter = 0
        f.fields_for :organization_contacts do |m|
          contact_counter = contact_counter +  1
          m.inputs "Contact #{contact_counter}" do
            m.input :name, placeholder: 'Name'
            m.input :title, placeholder: 'Title'
            m.input :email, placeholder: 'Email'
            m.input :phone_number, placeholder: 'Phone Number'
          end
        end
      end
    end

    tab 'Appointment Parser Configuration' do
      f.inputs 'Appointment Parser Configuration' do
        f.input :appointment_parsers, as: :select, input_html: { multiple: true }
      end
    end

    tab 'EMR Settings' do
      f.inputs 'Settings' do
        f.input :emr_integrated, label: 'Enable EMR integration'
        f.input :emr_processor_type, as: :select, collection: Organization::AVAILABLE_EMR_PROCESSORS
        f.input :send_to_emr, label: 'Enable integration from 1DW to EMR'
        f.input :receive_from_emr, label: 'Enable integration from EMR to 1DW'
      end
    end

    tab 'Athena EMR Settings' do
      f.inputs 'Settings' do
        f.input :athena_practice_id, label: 'Athena Practice ID', input_html: { disabled: !f.object.has_athena_processor? }
        f.input :athena_department_number, label: 'Athena Department ID', input_html: { disabled: !f.object.has_athena_processor? }
      end
    end
  end

  f.actions
end 
```

正如您所看到的，`admin_organization_path`您可以将 URL 指向您想要的任何其他 URL，但您也可以自定义`method`发送表单。

> 还要确保你使用`resource`了`active_admin_form_for`块，因为如果你尝试使用类似`@organization`.
> 
> 每当您配置了相应的模型关系时，该表单包含一种将**嵌套资源**添加到主体资源的可能方式。

有了这个，它应该可以正常工作。我希望它对其他人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:45:46.127

我很确定您需要在调用`semantic_form_for`. 由于您的操作是一个集合操作，它不会作用于特定的 DID，那么您要创建什么模型？范围模型？如果是这种情况，你应该有类似的东西：

```
<%= semantic_form_for [:admin, @range] do |f| %>
  <% ... %>
  <%= f.buttons :commit
<% end %> 
```

当然`@range`应该像`Range.new`在控制器中那样初始化。

编辑：意识到你不想使用一个对象有点晚。在[文档](http://rdoc.info/github/justinfrench/formtastic/Formtastic/Helpers/FormHelper#semantic_form_for-instance_method "文件")中它表明您可以使用`semantic_form_for :login`，但它可能不适用于嵌套/命名空间的表单。您可能必须指定`url`with`:url => admin_add_range_dids_path`或类似的东西。只需检查`rake routes`以找到正确的命名。不确定模型是由 ActiveAdmin 还是 Formtastic 调用，所以这仍然可能不起作用，但值得一试。

# stored-procedures - 是否可以在使用 SQL 语言的 PostgreSQL 存储过程中使用变量？

> ID：10103756
> 
> 赞同：0
> 
> 时间：2012-04-11T10:00:47.873
> 
> 标签：stored-procedures, postgresql-9.1

是否可以在使用 SQL 语言的 PostgreSQL 存储过程中使用变量？

如果可能，如何为它们分配来自选择的结果并在以后使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:47:15.453

不，SQL 语言函数可以返回一个标量值，如果这是您选择的值，但 SQL 函数中没有变量。（我能想到的最接近的是使用 CTE。）

如果您使用语言 plpgsql，那么您可以声明变量。

# php - 在构造 ImagickPixel 时设置 alpha 通道

> ID：10103763
> 
> 赞同：3
> 
> 时间：2012-04-11T10:01:07.870
> 
> 标签：php, imagemagick, alpha, imagick

我是使用 ImageMagick 的新手。我正在使用最新的 imagick 扩展（3.1.0rc1）和 PHP。但是，imagick 的文档似乎有些稀疏。

我想创建一个带有 alpha 通道的[ImagickPixel对象。](http://php.net/manual/en/class.imagickpixel.php)[文档](http://php.net/manual/en/imagickpixel.setcolor.php)指出，这些是要传递给构造函数的一些有效颜色值：`"blue", "#0000ff", "rgb(0,0,255)", "cmyk(100,100,100,10)", etc`.

我知道可以使用`getColorValue(imagick::COLOR_ALPHA);`.

那么，如何在对象初始化期间通过传递给构造函数来设置带有 alpha 通道的 rgb 颜色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T10:52:45.973

看起来这样做的方法就是使用 rgba：

```
$myImagickPixel = new ImagickPixel("rgba(250,15,150,0)"); //Where the last digit is the alpha and 0 is transparent and 1 is fully opaque. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T02:14:18.037

我找到了一些关于允许格式的文档：

[http://www.imagemagick.org/script/color.php](http://www.imagemagick.org/script/color.php)

你想要的格式是“#rrggbbaa”，所以半透明红色是“#FF00007F”。

# database - Zend_Db 不删除表行

> ID：10103766
> 
> 赞同：0
> 
> 时间：2012-04-11T10:01:13.890
> 
> 标签：database, zend-framework, frameworks, adapter

有谁知道，删除操作中的 CRUD 是否存在错误。数据库适配器：

```
$this->_db = Zend_Registry::get("db"); 
```

我喜欢这样：

```
$sql = "DELETE FROM premium_items WHERE id = '$id'";
                    $stmt = new Zend_Db_Statement_Pdo($this->_db, $sql); 
                    return $stmt->execute(); 
```

和

```
$sql = "DELETE FROM premium_items WHERE id = ?";
                $stmt = new Zend_Db_Statement_Pdo($this->_db, $sql); 
                return $stmt->execute(array($id)); 
```

和

```
$this->_db->delete('premium_items', "id = '$id'"); 
```

每个变体都可以正常工作，但不会做它必须做的事情。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:05:02.463

使用`Zend_Db_Adapter`，尝试：

```
$this->_db->delete('premium_items', array("id = ?" => $id)); 
```

或者，在这种特殊情况下，您可以执行以下操作：

```
$this->_db->delete('premium_items', 'id = ' . (int)$id); 
```

（但仅当您使用整数并强制转换时才执行此操作！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:07:49.390

在您的模型中（Zend_Db_Table_Abstract）：

```
$row = $this->find($id)->current();
$row->delete(); 
```

或者

```
$db = $this->getAdapter();
$db->delete($table, $db->quoteInto("id = ?", $id)); 
```

# asp.net-mvc - 未调用 Ajax 成功函数（返回数据）

> ID：10103769
> 
> 赞同：0
> 
> 时间：2012-04-11T10:01:19.713
> 
> 标签：asp.net-mvc, jquery

我有一个简单的 $.ajax 调用，我之前做过一百万次

```
$.ajax({
  type: "POST",
  url: url,
  data: data,              
  sucess: function (data) {
          alert(data);
          }
}); 
```

和一个控制器可以毫无问题地接受我的数据，但我似乎无法将数据返回给`sucess`函数。

```
[HttpPost]
public ActionResult MyAction(MyClass data)
{
   //do something
   return Content("blabla");           

} 
```

似乎是什么问题？

编辑：一切都很好，但我写`sucess`的不是`success`.

```
 $.ajax({
      type: "POST",
      url: url,
      data: data,              
      success: function (data) {
              alert(data);
              }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:14:10.193

可能是您需要返回一个 json-p 样式的响应......如果 javascript 和服务器端代码在不同的域上运行，那么几乎可以肯定是这种情况。查看[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)了解更多详细信息。

我建议你试试：

```
 $.ajax({
  type: "POST",
  datatype: "text",
  async: false,
  url: url,
  data: data,              
  sucess: function (data) {
          alert(data);
          }
}); 
```

这个想法是，如果您要求同步调用和请求文本类型，那么它应该解决 jsonp / 回调问题。

希望值得一试:)

# javascript - 在特定出现后删除字符串中的字符

> ID：10103773
> 
> 赞同：0
> 
> 时间：2012-04-11T10:01:28.813
> 
> 标签：javascript, jquery

希望大家能帮帮我。

我有一个动态 url，我需要一些 javascript 在特定出现字符后基本上修剪字符串。

**例子：**

我有这个网址

> 评估/testdir2/TestDIR3/讲座幻灯片 1as.pdf

我需要在第二个斜杠之后删除所有内容`2nd slash`，包括第二个斜杠。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:07:07.637

一个非常基本的 JS 解决方案：

```
function removeAfterSlash(word, numberOfElements) {
    var splitWord = word.split('/');
    var newWord = '';
    for(var i = 0; i < numberOfElements; i++) {
        if(i != (numberOfElements - 1)) {
            newWord += splitWord[i] + '/';
        } else {
            newWord += splitWord[i];
        }   
    }
    document.write(newWord);
}
removeAfterSlash('Assessment/testdir2/TestDIR3/lecture slides 1as.pdf', 1); 
```

只需通过查找 a 将单词拆分为一个数组`/`，然后您可以将需要的元素重新组合在一起。该函数获取单词以及您想要重新连接多少个“段”。

[在jsfiddle](http://jsfiddle.net/UptHG/)上看到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:13:00.977

试试这个：

```
var url= "Assessment/testdir2/TestDIR3/lecture slides 1as.pdf"
var locs = myString.split('/');
var newUrl = "";
for (var i = 2; i < locs.length; i ++) {
    newUrl += "/" + locs[i];
} 
```

然后，此方法将忽略前两个文件夹，并且无论您在 url 中有多少其他文件夹都将起作用。

# sql-server - 使用以下 c# 代码将日期 n 时间存储到 sql server 中的 pblm 是什么？

> ID：10103774
> 
> 赞同：0
> 
> 时间：2012-04-11T10:01:34.953
> 
> 标签：sql-server, c#-4.0

我正在尝试将日期和时间存储到 sql server 中，但出现错误。

```
 private void button1_Click(object sender, EventArgs e)
    {
        string d = DateTime.Now.ToShortDateString();
        string t = DateTime.Now.ToShortTimeString();
        cmd.CommandText = "insert into transaction values("+label9.Text+",'"+d+"','"+t+"');";
        cmd.Connection = con;
        con.Open();
        int x= cmd.ExecuteNonQuery();
        MessageBox.Show("Attendance recorded succesfully");   
    } 
```

**注意**：我为 sql server 中的日期和时间字段提供了数据类型为 varchar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:27:35.527

使用 [交易] 而不是交易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:29:43.553

```
private void button1_Click(object sender, EventArgs e)
    {
        string d = DateTime.Now.ToString("dd/MM/yyyy");
        string t = DateTime.Now.ToString("hh:mm:ss tt");
        cmd.CommandText = "insert into transaction values("+label9.Text+",'"+d+"','"+t+"');";
        cmd.Connection = con;
        con.Open();
        int x= cmd.ExecuteNonQuery();
        MessageBox.Show("Attendance recorded succesfully");   
    } 
```

其次，您也可以尝试使用 SQL 的 GetDate() 函数来插入日期和时间而不会出错。

对于仅日期部分，您有：

```
 SELECT DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) 
```

日期部分的优点：

*   不需要 varchar<->datetime 转换

*   无需考虑语言环境

时间部分：

```
SELECT LTRIM(RIGHT(CONVERT(VARCHAR(20), GETDATE(), 100), 7)) 
```

如果有人可以使用 Convert 和 Locale 帮助获取 TimePart，我会很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:54:02.563

```
private void button1_Click(object sender, EventArgs e)
    {
        string timeString = "11/12/2009 13:30:00.000";
        IFormatProvider culture = new CultureInfo("en-US", true);
        DateTime dateVal = DateTime.ParseExact(timeString, "dd/MM/yyyy HH:mm:ss.fff", culture);
        cmd.CommandText = "insert into transaction values(" + label9.Text + ",'" + dateVal + "');";
        cmd.Connection = con;
        con.Open();
        int x = cmd.ExecuteNonQuery();
        MessageBox.Show("Attendance recorded successfully");
    } 
```

# c# - 使用 ExecuteNonQuery 的并发问题

> ID：10103775
> 
> 赞同：2
> 
> 时间：2012-04-11T10:01:38.470
> 
> 标签：c#, sql, logging, time-precision

我正在将简单的文本日志条目写入 SQL 表，如下所示：

```
private SqlConnection sqlcon;

// ...

try {
    sqlcon.Open();

    SqlCommand cmd = sqlcon.CreateCommand();
    cmd.CommandText = this.logString;

    cmd.ExecuteNonQuery();
} 
/* catch SqlException, InvalidOperationException, Exception */ 
/* finally sqlcon.Close() */ 
```

异步处理设置为false，所以我认为日志条目会按执行顺序出现在表中。但情况并非如此，如果在不到 5 毫秒的时间内触发了 2 个或更多日志条目。

所以我的猜测是 ExecuteNonQuery 在不同的线程上运行，并且不同的事件以某种方式混合在一起。我已经尝试过将异步处理与 BeginExecuteNonQuery 和 EndExecuteNonQuery 一起使用，但它会弄乱我的代码并且无论如何都无法正常工作。

所以我的问题是：有什么方法可以*确保*非查询按照它们被触发的顺序执行？

编辑：也许这很重要，我正在使用这样的时间戳

```
cmd.Parameters.Add("timestamp", SqlDbType.DateTime ).Value = System.DateTime.Now; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:17:26.303

## 异步？

如果您每次都无法确定是否**打开/关闭连接，那么调用它在***某种程度上是等效*的（请原谅我，我知道这不是很准确）`BeginExecuteNonQuery`（这是 MARS 之前使用的方法）。实际上，每个请求都是同步的，但是，如果您以 5 毫秒的间隔记录一些内容，您无法确定 SQL Server 将服务该请求的顺序（这里的数据库人员会考虑IDENTITY 列的*旧问题）。*

## 时间戳

那么解决方案应该是使用 TimeStamp 列并根据该列对结果进行排序（写入顺序无关紧要）。这是完美的解决方案（正如其他答案所指出的那样，不要忘记使用正确的数据类型来存储数据）。

如何获得实际时间？您可以在客户端（如您的示例中）使用`DateTime.Now` *函数*或在服务器端使用`SYSDATETIME`（如@PetrAbdulin 指出的那样）。**如果您不需要高分辨率**，这是一个完美的解决方案。

**精确**

这两个函数都依赖于 Windows 系统计时器，并且它的分辨率不超过 10 毫秒（那么，如果你真的需要 5 毫秒的粒度，你应该避免它们）。

在 MSDN 上，您可以读到Windows NT 上的[DateTime.Now](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)的分辨率为 10 毫秒，[SYSDATETIME](http://msdn.microsoft.com/en-us/library/bb630353.aspx)调用[GetSystemTimeAsFileTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724397%28v=vs.85%29.aspx)，该`FILETIME`结构的精度为 100 毫秒，但**计时器本身没有被授予实现该结果**！！！在某些情况下，您甚至可能会得到 1 毫秒的滴答声，但它**根本不可靠**。在有关秒表计时器的文档中，您可以阅读：

> 秒表类使用的计时器取决于系统硬件和操作系统。如果秒表计时器基于高分辨率性能计数器，则 IsHighResolution 为真。否则，IsHighResolution 为 false，表示秒表计时器是基于系统计时器的。

这是什么意思？系统计时器永远不会被授予高分辨率（不要被用于存储时间的结构的精度混淆）。

这可能是一个问题，**这取决于你将使用你的日志**。如果您必须在备份期间记录从一个文件夹复制到另一个文件夹的文件列表，那么您可能不需要这种精确度。如果您的日志可能用于合法的东西（是的，我知道它们*不应该*具有任何合法价值）或调试一个微妙的线程问题，那么您将需要它。

**解决方案**

如果您需要一个高分辨率计时器（并且，在 Windows 上，您可以将任何小于 10 毫秒的时间视为高分辨率），您必须处理性能计数器。看看[这篇关于时间的好文章](http://msdn.microsoft.com/en-us/magazine/cc163996.aspx)。当然，您不需要所有这些东西，但它指出了问题所在。

在 .NET 中，您可以使用`DateTime.Now`a `StopWatch`（检查`IsHighResolution`属性）。[在 SO 上](https://stackoverflow.com/questions/1416139/how-to-get-timestamp-of-tick-precision-in-net-c)阅读这篇关于使用`StopWatch`提高`DateTime.Now`.

**常见错误**

首先不要将用于存储时间的数据类型的精度与定时器的分辨率混淆。如果您将该值存储在低分辨率字段中，那么您的计时器有多精确并不重要，但使用高分辨率字段不会将您的粗略计时器转换为高分辨率计时器。

此外，您不应该使用本地时间作为时间戳，当系统时间因夏令时而改变时，您会混淆您的日志。想一想：

```
               00:00 02:00 02:01 03:00 02:00
日志 #1 #2 #3 #4
系统时间-1

```

现在你什么时候阅读你的日志，你会得到这个顺序：1、2、4、3。出于这个原因，你**永远不**应该使用`DateTime.Now`and`SYSDATETIME`对于你的日志，你应该总是更喜欢`DateTime.UtcNow`and`SYSUTCDATETIME`函数（而且性能`DateTime.UtcNow`有点更好的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:26:01.090

如果您使用 SQL Server [SYSDATETIME](http://msdn.microsoft.com/en-us/library/bb630353.aspx)插入时间戳会怎样？我认为这`ExecuteNonQuery`是同步的，但您的时间戳可能有问题。

[Windows 中有一个关于时间分辨率](http://download.microsoft.com/download/3/0/2/3027D574-C433-412A-A8B6-5E0A75D5B237/Timer-Resolution.docx)的好文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:27:12.003

SQL Server 的日期时间精度为 3 毫秒。那些乱序列出的条目是否具有相同的时间戳？（毫秒以 0、3 或 7 结尾）。

您需要一个精度更高的字段，例如[datetime2](http://msdn.microsoft.com/en-us/library/bb677335.aspx)数据类型（可从 SQL Server 2008 获得），或用于正确排序项目的增量计数器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T10:31:26.247

你为什么不使用交易？如果数据很重要，那么您应该使用 SqlTransaction。

为什么需要订购？你桌上有pk吗？它是如何插入的，或者是你的pk的时间戳？

顺便说一句，请不要缓存连接。.net 为您做得更好。在这个 msdn[示例](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)中使用 using like 。

# android - 如何刷新谷歌地图中的坐标？

> ID：10103780
> 
> 赞同：5
> 
> 时间：2012-04-11T10:01:57.597
> 
> 标签：android, android-maps

我可以在刷新按钮单击时刷新谷歌地图，但它显示的是旧坐标。在某些区域，它会显示带有十字图像的矩形图像。错误在哪里或我必须在其中进行哪些修改？

这是我的代码：

```
public class GmapActivity extends MapActivity {Mapview map;Button btnrefresh;Button btnbacktolist; int chargenumber=0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gmapactivity);

    final Bundle bundle = this.getIntent().getExtras();
    chargenumber = bundle.getInt("ChargeNumber");
    int latitude = bundle.getInt("latitude");
    int longitude = bundle.getInt("longitute");
    CreateMap(latitude, longitude);

    btnrefresh = (Button) findViewById(R.id.btnReload);
    btnrefresh.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            RefreshMap();
        }
    });

    btnbacktolist = (Button) findViewById(R.id.btnBack);
    btnbacktolist.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            BacktoScheduleList(bundle);
        }
    });

}

protected void BacktoScheduleList(Bundle bundle) {

    ProgressDialog progressDialog = ProgressDialog.show(this, "",
            "Please wait...", true);
    bundle = this.getIntent().getExtras();
    Bundle Newbundle = new Bundle();
    Newbundle.putString("userid", bundle.getString("userid").trim());
    Newbundle.putString("username", bundle.getString("username").trim());
    Intent intent = new Intent(this, Ok.class);
    intent.putExtras(bundle);
    startActivityForResult(intent, 0);
    progressDialog.dismiss();
    finish();

}

private void CreateMap(int latitude, int longitude) {

    map = (MapView) findViewById(R.id.mvView);
    map.setBuiltInZoomControls(true);
    map.setStreetView(true);
    List<Overlay> mapOverlays = map.getOverlays();
    Drawable drawable = this.getResources().getDrawable(
            R.drawable.school_bus);
    MOverlayItems itemizedOverlay = new MOverlayItems(drawable, this);
    GeoPoint point = null;
    point = new GeoPoint(latitude, longitude);
    OverlayItem overlayitem = new OverlayItem(point, null, null);
    itemizedOverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedOverlay);
    MapController mapController = map.getController();
    mapController.animateTo(point);
    mapController.setZoom(12);

}

protected void RefreshMap() {
    map.getOverlays().clear();
    map.clearAnimation();
    WebServiceCaller webservicecaller = new WebServiceCaller();
    String result = webservicecaller.GetLatLong(chargenumber);

    if (result.toString().equalsIgnoreCase("false")) {

    } else {
        StringTokenizer tokens = new StringTokenizer(result, ",");
        int latitude = Integer.parseInt(tokens.nextToken());
        int longitude = Integer.parseInt(tokens.nextToken());
        ProgressDialog progressDialog = ProgressDialog.show(this, "",
                "Refreshing. Please wait...", true);
        CreateMap(latitude, longitude);
        progressDialog.dismiss();
    }
}

protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:11:01.767

我按以下方式使用它，它对我来说工作正常。可能你还需要一个`map.invalidate()`电话。

```
protected void RefreshMap() {
  map.getOverlays().clear();
  map.invalidate();

  ... create itemizedOverlay

  map.getOverlays().add(itemizedOverlay);
  map.invalidate();
  map.getController().animateTo(point);
} 
```

# java - 弹簧：顺序 tag

> ID：10103781
> 
> 赞同：8
> 
> 时间：2012-04-11T10:02:22.353
> 
> 标签：java, spring, map

我需要将 Map 注入到 bean 属性中，当遍历映射条目时，它应该按插入顺序返回它们。在 Java 中，这类似于 LinkedHashMap。但是由于我在 spring 文档中找不到与标签排序相关的任何内容，因此我不确定是否可以在这种情况下使用它。

有人可以让我知道我是否可以用于此目的。

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T10:09:18.930

使用此构造：

```
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

...
<util:map id="mymap" map-class="java.util.LinkedHashMap">
    <entry key="a" value="b" />
    <entry key="c" value="d" />
</util:map>

...
</beans> 
```

用有序键声明地图。然后，您可以使用此映射 using`<ref id="mymap" />`或者您可以在声明 Map 属性的值时直接使用此构造。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-11T10:18:17.163

默认**值为** `LinkedHashMap`-[`MapFactoryBean`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/MapFactoryBean.html)用于创建`Map`. 根据文档：

> 共享 Map 实例的简单工厂。允许通过 XML bean 定义中的“map”元素集中设置 Maps。

及其[setTargetMapClass](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/MapFactoryBean.html#setTargetMapClass%28java.lang.Class%29)方法：

> 设置用于目标地图的类。在 Spring 应用程序上下文中定义时，可以使用完全限定的类名填充。
> **默认是一个链接的HashMap，保持注册顺序。**
> 
> 另请参阅：LinkedHashMap

所以这里不需要使用`<util:map>`。

# xcode4.2 - 如何在表格视图中选择一个单元格来打开一个新的视图控制器？

> ID：10103782
> 
> 赞同：1
> 
> 时间：2012-04-11T10:02:23.597
> 
> 标签：xcode4.2

我使用带有故事板的 Xcode 4.3.2，因为我是新手，所以代码知识不是很好。到目前为止，我已经由主视图控制器创建，它链接到包含数据的表视图。但是我不知道如何将它链接到一个新的视图控制器，即如果我将一个新的视图控制器拖到情节提要页面上，我希望能够选择表格视图中的单元格，然后打开一个包含详细信息的新页面。到目前为止，在教程的帮助下我的代码是：-

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UITabBarDelegate, UITableViewDataSource, UISearchBarDelegate>
    {
    IBOutlet UITableView * tableView;
    IBOutlet UISearchBar * searchBar;

        NSArray * allItems;
        NSMutableArray * displayItems;
}

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    allItems = [[NSArray alloc] initWithObjects:@"K12", @"K14", @"K16", @"K18", @"K42", @"K43", @"K46", @"K53", @"K60", @"K68", @"K81", @"K83", nil];
    displayItems = [[NSMutableArray alloc] initWithArray:allItems];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return  1;    
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [displayItems count];
}

- (UITableViewCell *)tableView:(UITableView *)atableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }
    cell.textLabel.text = [displayItems objectAtIndex:indexPath.row];
    return cell;
}

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
    if ([searchText length] == 0) {
        [displayItems removeAllObjects];
        [displayItems addObjectsFromArray:allItems];
    } else {
        //here
        [displayItems removeAllObjects];
        for (NSString * string in allItems) {
            NSRange r = [string rangeOfString:searchText options:NSCaseInsensitiveSearch];
            if (r.location != NSNotFound) {
                [displayItems addObject:string];
        }
    }
}

    [tableView reloadData];
}

- (void)searchBarSearchButtonClicked:(UISearchBar *)aSearchBar {
    [searchBar resignFirstResponder];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

我觉得解决应用程序的其余部分只是停留在这一点上并搜索教程查看了各种代码但因为我的知识非常有限我只需要一个傻瓜指南或者更好的是如果有人可以告诉我要添加什么代码将是伟大的。

谢谢伙计们，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:45:12.270

好的，我假设您将使用相同的 nib 来显示信息，而不管选择了哪一行。首先，右键单击或按住 ctrl 单击“视图”文件夹，然后选择“新建文件”。使用 .xib 创建一个新的 UIViewController 类。我的视图控制器将有一个标签（用于汽车的名称）、一个 UIImageView（汽车的，由与汽车同名的图像填充，带有 .jpg 附录）和一个由字典填充的 textView . textView 将显示有关汽车的信息，我已经预先加载了包含该信息的字典，并键入了汽车的名称，如下所示：

```
[dictionary setObject:@"This is a car." forKey:@"Ford Taurus"]; 
```

该字典是一个单例，因此每个类都可以访问它（有关如何实现它，请参见[https://stackoverflow.com/a/10093449/542400 ）。](https://stackoverflow.com/a/10093449/542400)现在我有了新的 viewController（我们称之为“NewVC”），带有一个合成字符串（所以我的第一个 viewController 可以访问它），我将确保我的第一个 viewController 在选择一行时响应：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    NewVC *new = [[NewVC alloc] init];
    //assuming you have no array from which you populated your table
    new.myString = [[[myTable cellForRowAtIndexPath:indexPath] textLabel] text];

    //assuming you have a navigationController
    [self.navigationController pushViewController:new animated:YES]; 
} 
```

现在在我的 NewVC`-viewWillAppear`方法中，我实现了以下内容：

```
-(void)viewWillAppear:(BOOL)animated{
    [myLabel setText:myString];
    NSString *string = [NSString stringWithFormat:@"%@.jpg", myString];
    UIImage *image = [UIImage imageNamed:string];
    [myImageView setImage:image];
    //see above for sharedDictionary info
    [myTextView setText: [[MainDictionary sharedDictionary]getStringForKey:myString]];
    [super viewWillAppear:YES];
} 
```

这是一个非常基本的实现，但我希望它能使过程清晰。通过为字典键和图像名称建立一个简单的命名约定，您的工作将变得更加轻松。

# javascript - jquery自动完成，多个值，minLength被忽略

> ID：10103790
> 
> 赞同：1
> 
> 时间：2012-04-11T10:02:39.243
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试做到这一点：http: [//jsfiddle.net/F9tMx/](http://jsfiddle.net/F9tMx/)以一种我可以向从 availableTags 数组中输入单独建议的用户建议的方式工作。

基本上，当有人向问题添加评论并键入“@”字符时，我想添加此处存在的相同功能（如果第一个字符[s]与进行活动的人匹配，则会出现用户列表在页面上）。

无论如何，我已经看到 minLength 参数被忽略了。虽然插件确实能够分隔单词并匹配最后一个输入的单词，但一旦最后一个单词实际上是空的（last == ''），插件将建议 availableTags 数组中的所有元素，即使 minLength 设置为大于 1 的数字。

有什么办法可以根据您的意见解决这个问题吗？

这是我希望它的行为方式，但它当然会引发错误 [http://jsfiddle.net/F9tMx/3/](http://jsfiddle.net/F9tMx/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:27:15.493

嗨酷在这里**使用@**工作演示：http: [//jsfiddle.net/67dxH/](http://jsfiddle.net/67dxH/)

所以：这是我回答并帮助其他人的答案：[jquery autocomplete @mention](https://stackoverflow.com/questions/10060536/jquery-autocomplete-mention/10060665#10060665)

**代码段**

这个语句会做的伎俩`if (request.term.indexOf("@") >= 0) {`其余代码在 jdfiddle

```
.autocomplete({
        source: function(request, response) {
            if (request.term.indexOf("@") >= 0) {
                $("#loading").show();
                getTags(extractLast(request.term), function(data) {
                    response($.map(data.tags, function(el) {
                        return {
                            value: el.name,
                            count: el.count
                        }
                    }));
                    $("#loading").hide();                    
                });
            }
        }, 
```

有一个美好的！

干杯！

# visual-studio - 在 C 中使用 Visual Studio 异常

> ID：10103792
> 
> 赞同：0
> 
> 时间：2012-04-11T10:02:47.793
> 
> 标签：visual-studio, exception, try-catch

我在项目中使用С语言。最终，我开始注意到大部分代码都是检查。在项目中函数 bool 的返回类型。因为我们正在使用媒体，如果函数读取或写入返回 false 我们必须中断程序，前段时间我了解到在 Visual Studio 中有内置异常（使用 Visual Studio 2008）

```
__try
__finally 
```

在项目中，我们使用日志。所有函数都使用日志。我们决定将日志和异常结合起来。使用预处理器

```
#define try             do                                                     \
                        {                                                      \
                        Int32_T __FUNCTION__##ReturnValue = -1;                \
                        LOG_BEGIN();                                           \
                        __try                                                  \
                        {

#define finally         }                                                      \
                        __finally                                              \
                        {

#define end_try         }                                                      \
                        if( __FUNCTION__##ReturnValue != -1 )                  \
                        {                                                      \
                        return LOG_END_WITH(__FUNCTION__##ReturnValue);    \
                        }                                                      \
                        else                                                   \
                        {                                                      \
                        LOG_END();                                         \
                        return;                                            \
                        }                                                      \
                        }while(0)   
#define raise(e)        RaiseException( e, EXCEPTION_NONCONTINUABLE, 0, NULL )

#define return_false    __FUNCTION__##ReturnValue = 0;                         \
                        __leave

#define return_true     ##__FUNCTION__##ReturnValue = 1;                       \
                        __leave

#define return_void     ##__FUNCTION__##ReturnValue = -1;                      \
                        __leave 
```

使用示例。函数返回布尔值

```
Bool_T Node_Insert( IN OUT Tree_T * tree, IN Text_T fullPath, ... )
{
   Text_T  itemName     = NULL;
   int   * delimiterPos = NULL;

   try
   {
          // if tree is empty we should add ROOT_PATH
          //
      if( Tree_IsEmpty( IN *tree ) )
      {
         if( failed Tree_CreateRoot( IN OUT *tree, IN datafield ) )
         {
            LOG_ERROR( "Node_Insert FAILURE -->  Tree_CreateRoot failed" );
            return_false;
         }
       }

      if( Text_Length( IN fullPath ) > 1 )
      {
        ...
        // Allocate memory for Text
        //
        item = Text_New();

        // Allocate for delimeterPos array
        //
        delimiterPos = NEW(n, sizeof(elem));
        ...

        while( i < nDelimiter )
        {
            ...
            ...
            ...
        }

      }
      else if ( Text_Length( IN fullPath ) == 1  ) 
      {
        // we have already added ROOT
        //
        return_true;

      }else{

       LOG_ERROR( "Node_Insert FAILURE --> Path length is not correct" );
       return_false;
      }
    }

    // In the end we need free allocated memory
    //
    finally
    {
    Text_Delete( IN OUT &itemName );
         free( delimiterPos );
    }
    // in end_try preprocessor we write log and return true or false
    //
    end_try;
} 
```

使用示例。不返回值的方法

```
void Ifo_ReadBufferHeader( IN Uint8_T * buffer, ... IN OUT Int32_T * position )
{
   Text_T fullPath = NULL;

   try
   {
     // getting buffer size
     //
     Uint32_T size = Buffer_GetSize( IN buffer );

     // getting mode
     //
     Uint8_T writeMode = Buffer_GetWritingMode( IN buffer );

     if( Ifo_IsAddMode( IN static_cast(DataIfoMode_T, writeMode) ) )
     {
         Uint32_T pos = 1 + Ifo_GetLabelLength() + 23;

        // getting path length
        //
        fullPath = Text_New( IN "", IN mp );
        Buffer_GetNameField( IN buffer, OUT &fullPath, IN OUT &pos );

        *parentFolderPath = fullPath;
        *position = pos;
     } else if( Ifo_IsRenameMode( IN static_cast(DataIfoMode_T, writeMode ) ) 
           {
              *position = 1 + Ifo_GetLabelLength() + 23;
           }

         *bufferSize = size;
         *mode       = static_cast(DataIfoMode_T, writeMode);

         // return_void preprocessor that use
         //
         return_void;

    }
    finally
    {
        // After run the main code you must free allocated memory
        //
        Text_Delete( IN OUT &fullPath );
    }
    end_try;
} 
```

我的问题是。我如何设计它将返回一个值？也就是函数会返回一个值，比如计算缓冲区CRC作为一个值返回。我如何通过使用这些宏来做到这一点。

```
int GetCrcBuffer( IN Uint32_T buffer, IN Tree_T tree )
{
    Text_T itemName = NULL;
    int    crc      = 0;

    try
    {
        ...
        ...
        itemName = Text_New();

        if( crc != 12 )
        {
         return_value(crc); // ???? return value of crc and delete text??? how???
        }
        ...
        ...
    }
    finally
    {
        Text_Delete( IN OUT itemName );
    }
    end_try; 
} 
```

如何让它运行 finally 块并返回值 crc？如何编写预处理器 return_value() ???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:33:13.427

您的 finally 块将正确删除`itemname`，因此您不必担心那部分。唯一的技巧是您的返回值不能为 -1（即：-1 不能是合法的返回值），因为这表示`end_try`. 然后就像 with 一样`raise(e)`，您可以为宏指定一个参数：

```
#define return_value(v) ##__FUNCTION__##ReturnValue = (v);                       \
                        __leave 
```

如果你想编写一个可以返回非整数类型的函数，你可以这样做：让函数实际返回一个 int，表示成功/失败，在成功的情况下，传递实际的“返回值”（非整数类型一）通过指针参数返回：

```
#define return_value2(v) *ret_val=(v);                                          \
                         ##__FUNCTION__##ReturnValue = 1;                       \
                         __leave

int GetMyType( IN Uint32_T buffer, IN Tree_T tree, MyType* ret_val )
{
  ...
} 
```

注意：`ret_val`指向的值只有在函数没有返回 -1 时才有效

# javascript - 没有对具有相同 URL 的新图像的新请求

> ID：10103793
> 
> 赞同：1
> 
> 时间：2012-04-11T10:02:49.630
> 
> 标签：javascript, http, http-headers

我想刷新服务器上定期更新的图像，所以我像这样加载它：

```
var img = new Image();
img.onload = myCallback;
img.src = imageUrl; 
```

imageUrl 总是相同的，我设置了这些 HTTP 标头以强制浏览器在每次尝试加载图像时发出新请求：

```
Cache-Control: public,max-age=0
Expires: -1
Last-modified: Mon, 21 Nov 2008 01:03:33 GMT
ETag: 1234 
```

但它只适用于 Chrome；Firefox、Opera、IE 和 Safari 只在第一次向服务器发送请求，然后我总是得到缓存的图像。

如果我将 img.src = '' 添加到 myCallback，它适用于 Opera 和 IE，但仍然不适用于 Firefox 和 Safari（我只尝试过 Firefox 11）。

我可以在我的 URL 中添加一个随机查询字符串，但它会消耗更多的带宽，因为大多数时候服务器会回复 304 Not modified。

有没有办法让它在 Firefox 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:30:17.050

您可以将其分为两步，而不是依赖于不一致的浏览器和服务器行为：

1.  对 URL 进行 AJAX 调用，客户端可以使用该 URL 来确定图像是否已更新（强制没有缓存）
2.  如果已更新，请`image.src`使用新 URL（附加到基本 URL 的新字符串）更新

您可以使用图像最后一次更新的 UNIX 时间戳作为附加到 URL 的随机字符串。

使用 JQuery 样式的伪代码的示例（可能按原样工作，也可能不按原样工作）：

```
function updateImage() {
    $.get('/HasImageBeenUpdated?', function(answer) {
       // answer could be JSON: {wasUpdated: true, newImageUrl: 'url'} 
       if (answer.wasUpdated === true) {
            $('#theImage').attr('src', answer.newImageUrl);
        }
    });
}
setInterval(updateImage, 1000); // update every second 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:06:56.217

要每次覆盖缓存，请在 URL 末尾附加一个随机数作为参数。

# javascript - Ajax 调用在 chrome/safari 中有效，但在 ff 和 ie 中失败

> ID：10103798
> 
> 赞同：1
> 
> 时间：2012-04-11T10:02:57.663
> 
> 标签：javascript, ajax, internet-explorer, firefox, compatibility

我正在使用 jQuery，但调用失败了……这没什么特别的……只是在 beforeSend 中有一些 base64 授权标头的请求

```
function GetProjects(full){
var query = "/Projects";
$.ajax({
     type: "GET",
     url: url+query,
     contentType: "application/json; charset=utf-8",
     beforeSend: function (req) {
        req.setRequestHeader("Authorization", AuthBuilder(username,password));
     },
     success: function (results) {
        $.each(results, function (i, item) {
            Projects[i] = item;
        });

        reloadui(full);
     },
     error: function (xhr, ajaxOptions, thrownError) {}
 });
} 
```

这是通过 https 发送到在同一台机器上运行的服务，但我没有在任何地方使用 localhost。URL 看起来像这样：[https://www.MYNAMEHERE.be:port/Route](https://www.MYNAMEHERE.be:port/Route)。

一切都在 chrome / safari 中运行，但在 Firefox 和 Internet Explorer 中失败。

谢谢阅读

编辑：将接受标头设置为 JSON 也不起作用 :) 尝试使用 FF 上的实时 HTTP 标头进行调试，但根本没有得到任何标头...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:49:09.993

忘记在 jquery ajax 请求中添加**dataType: "json" 。**现在一切正常:)

# stored-procedures - 存储过程应接收的最大参数数

> ID：10103799
> 
> 赞同：0
> 
> 时间：2012-04-11T10:02:59.530
> 
> 标签：stored-procedures, parameters

我有一个 Web 表单，我可以从其中将数据插入 Oracle。表格上至少有 20 个文件。对于 INSERT，我想使用存储过程。但是在这种情况下，对于 INSERT 语句的 VALUES 部分，我需要发送那么多——在这种情况下是 20 个参数。一个程序接收 20 个参数是否正常？如果不是，那么我应该按照什么方式执行此操作？我知道技术上没有问题，但这是正常的编程还是数据库管理？我认为这是所有 Web 开发人员一直在做的基本事情。

# java - 登录成功后如何填写表格

> ID：10103801
> 
> 赞同：1
> 
> 时间：2012-04-11T10:03:06.630
> 
> 标签：java, php, curl, apache-httpcomponents, way2sms

我正在尝试使用 HttpComponents 通过 way2sms 发送短信。到目前为止，该站点的登录尝试是成功的，因为该网站的登录历史清楚地显示了它，并且我能够从 cookie 中成功获取 JSESSIONID。然而，代码以某种方式无法发送短信本身。相反，对最终 POST 请求的响应是 HTML 页面，其中显示了 msg 和接收者号码的空白文本字段。请让我知道我哪里出错了？这是我的代码，由于明显的原因省略了用户名和密码：

```
import java.io.*;
import java.util.ArrayList;
import java.util.List;
//import java.util.regex.*;
//import java.net.*;
//import java.util.Vector;
import org.apache.http.*;
import org.apache.http.client.*;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.*;
import org.apache.http.impl.client.*;
import org.apache.http.params.CoreProtocolPNames;
import org.apache.http.util.EntityUtils;
import org.apache.http.client.entity.GzipDecompressingEntity;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.*;
import org.apache.http.client.params.ClientPNames;
import org.apache.http.client.params.CookiePolicy;
import org.apache.http.client.protocol.ClientContext;
/*import org.apache.http.client.entity.*;
import org.apache.http.client.utils.*;*/
import org.apache.http.cookie.ClientCookie;
import org.apache.http.cookie.Cookie;
import org.apache.http.impl.cookie.*;
import org.apache.http.cookie.params.*;

public class way2
{
    public static void main(String args[]) throws IOException {

    System.out.println("1");
    String url;
    String temp;
    String msg="If you get this msg plz fwd to Harsh";
    CookieStore MycookieStore;
    String cookiename=null;String cookievalue=null;

    DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.getParams().setParameter(CoreProtocolPNames.HTTP_CONTENT_CHARSET,"UTF-8");
    httpclient.getParams().setParameter(CoreProtocolPNames.USER_AGENT,"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:10.0.1) Gecko/20100101 Firefox/10.0.1");
    httpclient.getParams().setParameter(ClientPNames.COOKIE_POLICY,CookiePolicy.BROWSER_COMPATIBILITY );
    httpclient.getParams().setParameter(ClientPNames.HANDLE_REDIRECTS,false);
    // Prepare a request object for getting session id
    url="http://site5.way2sms.com/content/index.html";
    httpclient.addRequestInterceptor(new HttpRequestInterceptor() {

        public void process(final HttpRequest request,final HttpContext context) throws HttpException, IOException 
        {

        if (!request.containsHeader("Accept")) {
            request.addHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
        }
        if (!request.containsHeader("Accept-Encoding")) {
            request.addHeader("Accept-Encoding", "gzip, deflate");
        }
        if (!request.containsHeader("DNT")) {
            request.addHeader("DNT", "1");
        }
        if (!request.containsHeader("Connection")) {
            request.addHeader("Connection", "keep-alive");
        }
        }

    });
    httpclient.addResponseInterceptor(new HttpResponseInterceptor() {

        public void process(
            final HttpResponse response, 
            final HttpContext context) throws HttpException, IOException {
        HttpEntity entity = response.getEntity();
        Header ceheader = entity.getContentEncoding();
        if (ceheader != null) {
            HeaderElement[] codecs = ceheader.getElements();
            for (int i = 0; i < codecs.length; i++) {
            if (codecs[i].getName().equalsIgnoreCase("gzip")) {
                response.setEntity(
                    new GzipDecompressingEntity(response.getEntity())); 
                return;
            }
            }
        }
        }

    });

    HttpGet httpget = new HttpGet(url);
    System.out.println(httpget.getAllHeaders());
    System.out.println("1.2");

    // Execute the request
    HttpResponse response = httpclient.execute(httpget);
    System.out.println("2");

    // Examine the response status
    System.out.println(response.getStatusLine());

    // Get hold of the response entity
    HttpEntity entity = response.getEntity();
    System.out.println("3");
    if (entity != null) {

        try {

        BufferedReader reader = new BufferedReader(
            new InputStreamReader(entity.getContent()));

        } catch (IOException ex) {

        throw ex;

        } catch (RuntimeException ex) {

        httpget.abort();
        throw ex;

        }
        EntityUtils.consume(entity);
    }
    //GET request over

    //START OF Code for automatic login and storing cookies
    List<NameValuePair> nvps = new ArrayList<NameValuePair>();
    nvps.add(new BasicNameValuePair("username", "********"));
    nvps.add(new BasicNameValuePair("password","********"));
    nvps.add(new BasicNameValuePair("button","Login"));

    url = "http://site5.way2sms.com/Login1.action";
    HttpPost httppost= new HttpPost(url);
    httppost.addHeader("Content-Type", "application/x-www-form-urlencoded");
    httppost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.ISO_8859_1));

    response = httpclient.execute(httppost);
    entity = response.getEntity();

    BufferedReader in = new BufferedReader(new InputStreamReader(entity.getContent()));

    String inputLine;

    while ((inputLine = in.readLine()) != null) {
        System.out.println(inputLine);
    }

    EntityUtils.consume(entity);
    MycookieStore = httpclient.getCookieStore();
    List<Cookie> Mycookies = MycookieStore.getCookies();
    ClientCookie ck=null; 
    httpclient.setCookieStore(MycookieStore);
    if (Mycookies.isEmpty()) {
        System.out.println("None");
    } else {
        for (int i = 0; i < Mycookies.size(); i++) {
        ck=(ClientCookie) Mycookies.get(i);
        System.out.println("-hola " + ck.toString());
        System.out.println("-hola " + ck.getComment());
        System.out.println("-hola " + ck.getCommentURL());
        System.out.println("-hola " + ck.getDomain());
        System.out.println("-hola " + ck.getName());
        cookiename = ck.getName();
        cookievalue = ck.getValue();
        System.out.println("-hola " + ck.getPath());
        System.out.println("-hola " + ck.getValue());
        }
    }

    //END OF Code for automatic login  and storing cookies
    //WAY2SMS lets you login till this point
    //get unique id now

    url = "http://site5.way2sms.com/quicksms.action";
    List<NameValuePair> nvps1 = new ArrayList<NameValuePair>();
    nvps1.add(new BasicNameValuePair("HiddenAction", "instantsms"));             
    nvps1.add(new BasicNameValuePair("catnamedis","Birthday"));
    nvps1.add(new BasicNameValuePair("Action","sa65sdf656fdfd"));
    nvps1.add(new BasicNameValuePair("chkall","on"));
    nvps1.add(new BasicNameValuePair("MobNo","*********"));
    nvps1.add(new BasicNameValuePair("textArea",msg));
    nvps1.add(new BasicNameValuePair("bulidguid","username"));
    nvps1.add(new BasicNameValuePair("bulidgpwd","*******"));
    nvps1.add(new BasicNameValuePair("bulidyuid","username"));
    nvps1.add(new BasicNameValuePair("bulidypwd","*******"));
    nvps1.add(new BasicNameValuePair("guid1","username"));
    nvps1.add(new BasicNameValuePair("gpwd1","*******"));
    nvps1.add(new BasicNameValuePair("yuid1","username"));
    nvps1.add(new BasicNameValuePair("ypwd1","*******"));
    nvps1.add(new BasicNameValuePair("button","Send SMS"));

    url = "http://site5.way2sms.com/quicksms.action";
    //url="http://site5.way2sms.com/jsp/InstantSMS.jsp";
    HttpGet sendsms= new HttpGet(url);
    sendsms.addHeader("Content-Type", "application/x-www-form-urlencoded");
    sendsms.addHeader("Referer", "http://site5.way2sms.com/jsp/InstantSMS.jsp");
//  sendsms.setEntity(new UrlEncodedFormEntity(nvps1, HTTP.ISO_8859_1));
    sendsms.setHeader("Cookie", ck.getName()+"="+ck.getValue());
    HttpContext localContext = new BasicHttpContext();

    localContext.setAttribute(ClientContext.COOKIE_STORE, MycookieStore);

    response = httpclient.execute(sendsms, localContext);

    entity = response.getEntity();
    BufferedReader reader = new BufferedReader(new InputStreamReader(entity.getContent()));
    EntityUtils.consume(entity);

    httpclient.getConnectionManager().shutdown();
    System.out.println("1");

    }

} 
```

我使用以下 PHP 代码作为参考。此代码完美运行：

```
<html> 
<body>
<?php 
 function send_sms($userID,$userPWD,$recerverNO,$message)
{
     if(strlen($message)>140) // check for message length
     {echo "message length exceeds 140 characters" ; exit(); }

     $message_urlencode=rawurlencode($message); // message converted into URL encoded form
     $cookie_file_path ="/var/www/cookie.txt";
    // Cookie file location in your machine with full read and write permission

//START OF Code for getting sessionid
    $url="http://site5.way2sms.com/content/index.html";
    $header_array[0] = "GET /content/index.html HTTP/1.1";
    $header_array[1]= "Host: site5.way2sms.com";
    $header_array[2]= "User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:10.0.1) Gecko/20100101 Firefox/10.0.1";
    $header_array[3]= "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
    $header_array[4]= "Accept-Language: en-us,en;q=0.5";
    $header_array[5]= "Accept-Encoding: gzip,deflate";
    $header_array[6]= "DNT: 1";
    $header_array[7] = "Connection: keep-alive";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header_array);
    curl_setopt($ch, CURLOPT_REFERER, $reffer);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
    $result = curl_exec ($ch);
    curl_close ($ch);
//END OF Code for getting sessionid

//START OF Code for automatic login and storing cookies
    $post_data = "username=".$userID."&password=".$userPWD."&button=Login";
    $url = "http://site5.way2sms.com/Login1.action";
    $header_array[0]="POST /Login1.action HTTP/1.1";
    $header_array[1]="Host: site5.way2sms.com";
    $header_array[2]="User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:10.0.1) Gecko/20100101 Firefox/10.0.1";
    $header_array[3]="Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
    $header_array[4]="Accept-Language: en-us,en;q=0.5";
    $header_array[5]="Accept-Encoding: gzip, deflate";
    $header_array[6]="DNT: 1";
    $header_array[7]="Connection: keep-alive";
    $header_array[8]="Content-Type: application/x-www-form-urlencoded";
    $ch = curl_init();
    curl_setopt( $ch, CURLOPT_URL, $url );
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header_array);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
    curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
    curl_setopt( $ch, CURLOPT_AUTOREFERER, true );
    curl_setopt($ch,CURLOPT_REFERER,"http://site5.way2sms.com/content/index.html");
    $content = curl_exec( $ch );
    $response = curl_getinfo( $ch );
    curl_close ($ch);
//END OF Code for automatic login  and storing cookies

// START OF Code is  getting way2sms unique user ID
    $url = "http://site5.way2sms.com/jsp/InstantSMS.jsp";
    $ch = curl_init();
    curl_setopt( $ch, CURLOPT_URL, $url );
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
    $content = curl_exec($ch);
    curl_close ($ch);
    $regex = '/input type="hidden" name="Action" id="Action" value="(.*)"/';
    preg_match($regex,$content,$match);
    $userID = $match[1];
    echo $userID ;
// END OF Code for getting way2sms unique user ID

// START OF Code for sending SMS to Recever
    $post_data = "HiddenAction=instantsms&catnamedis=Birthday&Action=".$userID."&chkall=on&MobNo=".$recerverNO."&textArea=".$message_urlencode."&bulidguid=username&bulidgpwd=*******&bulidyuid=username&bulidypwd=*******&guid1=username&gpwd1=*******&yuid1=username&ypwd1=*******";
    $url = "http://site5.way2sms.com/quicksms.action";
    $header_array[0]="POST /quicksms.action HTTP/1.1";
    $header_array[1]="Host: site5.way2sms.com";
    $header_array[2]="User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:10.0.1) Gecko/20100101 Firefox/10.0.1";
    $header_array[3]="Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
    $header_array[4]="Accept-Language: en-us,en;q=0.5";
    $header_array[5]="Accept-Encoding: gzip, deflate";
    $header_array[6]="DNT: 1";
    $header_array[7]="Connection: keep-alive";
    $header_array[8]="Content-Type: application/x-www-form-urlencoded";
    $ch = curl_init();
    curl_setopt( $ch, CURLOPT_URL, $url );
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header_array);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
    curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
    curl_setopt( $ch, CURLOPT_AUTOREFERER, true );
   curl_setopt($ch,CURLOPT_REFERER,"Referer: http://site5.way2sms.com/jsp/InstantSMS.jsp");
    $content = curl_exec( $ch );
    $response = curl_getinfo( $ch );
    curl_close ($ch);
// END OF Code for sending SMS to Recever

}// end function send_sms

send_sms("uname","psswd","target mobile no","message");
 ?> 
</body>
</html> 
```

# android - 如何在单个框架布局中将图像从线性布局拖动到表面视图

> ID：10103803
> 
> 赞同：3
> 
> 时间：2012-04-11T10:03:12.230
> 
> 标签：android

当图像放置在表面视图上时，下面的代码正在工作。但是当我将图像从线性布局拖到表面视图时，它不起作用。请给我解决方案，将图像从线性布局拖到实时馈送相机中。

```
public class PreviewDemo extends Activity 
{
 private View selected_item = null;
 private int offset_x = 0;
 private int offset_y = 0;
 private SurfaceView preview=null;
 private SurfaceHolder previewHolder=null;
 private Camera camera=null;
 private boolean inPreview=false;
 private boolean cameraConfigured=false;
 public void onCreate(Bundle savedInstanceState)
 {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);
 ViewGroup vg = (ViewGroup)findViewById(R.id.overlay);
  vg.setOnTouchListener(new View.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction())
            {
                    case MotionEvent.ACTION_MOVE:
                            int x = (int)event.getX() - offset_x;
                            int y = (int)event.getY() - offset_y;

    int w = getWindowManager().getDefaultDisplay().getWidth() - 100;
    int h = getWindowManager().getDefaultDisplay().getHeight() - 100;
    if(x > w)
        x = w;
    if(y > h)
        y = h;
                     LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                    new ViewGroup.MarginLayoutParams(
                                    LinearLayout.LayoutParams.WRAP_CONTENT,
                                    LinearLayout.LayoutParams.WRAP_CONTENT));
                     lp.setMargins(x, y, 0, 0);

                            selected_item.setLayoutParams(lp);
                            break;
                    default:
                            break;
            }
            return true;
            }
     });
       ImageView image= (ImageView)findViewById(R.id.icon);
    image.setOnTouchListener(new View.OnTouchListener() {

      public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction())
            {
                    case MotionEvent.ACTION_DOWN:
                            offset_x = (int)event.getX();
                            offset_y = (int)event.getY();
                            selected_item = v;
                            break;
                    default:
                            break;
            }

            return false;
          }
           });
            preview=(SurfaceView)findViewById(R.id.preview);
           previewHolder=preview.getHolder();
             previewHolder.setFormat(PixelFormat.TRANSPARENT);
               previewHolder.addCallback(surfaceCallback);
           previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
                }

              public void onResume()
      {
     super.onResume();
      camera=Camera.open();
        startPreview();
        }

      public void onPause() 
          {
         if (inPreview) 
          {
        camera.stopPreview();
        }
        camera.release();
         camera=null;
          inPreview=false;
        super.onPause();
        }
        private Camera.Size getBestPreviewSize(int width, int height,Camera.Parameters                               parameters)
     {
         Camera.Size result=null;
         for (Camera.Size size : parameters.getSupportedPreviewSizes()) 
         {
  if (size.width<=width && size.height<=height)
  {
    if (result==null) 
    {
      result=size;
    }
    else 
    {
      int resultArea=result.width*result.height;
      int newArea=size.width*size.height;
      if (newArea>resultArea) 
      {
        result=size;
      }
    }
  }
}
return(result);
      }
    private void initPreview(int width, int height) 
      {
      if (camera!=null && previewHolder.getSurface()!=null) 
      {
  try 
  {
    camera.setPreviewDisplay(previewHolder);
  }
  catch (Throwable t)
  {
    Log.e("PreviewDemo-surfaceCallback",
          "Exception in setPreviewDisplay()", t);
    Toast
      .makeText(PreviewDemo.this, t.getMessage(), Toast.LENGTH_LONG)
      .show();
  }

  if (!cameraConfigured) {
    Camera.Parameters parameters=camera.getParameters();
    Camera.Size size=getBestPreviewSize(width, height,
                                        parameters);

    if (size!=null) {
      parameters.setPreviewSize(size.width, size.height);
      camera.setParameters(parameters);
      cameraConfigured=true;
       }
     }
   }
  }

      private void startPreview() {
      if (cameraConfigured && camera!=null) {
       camera.startPreview();
        inPreview=true;
         }
        }

        SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
        public void surfaceCreated(SurfaceHolder holder) {
         // no-op -- wait until surfaceChanged()
         }

            public void surfaceChanged(SurfaceHolder holder,
                           int format, int width,
                           int height) {
              initPreview(width, height);
                  startPreview();
            }

             public void surfaceDestroyed(SurfaceHolder holder) {
           // no-op
           }
           };
      } 
```

布局

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<android.view.SurfaceView
    android:id="@+id/preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >
</android.view.SurfaceView>

<LinearLayout
    android:id="@+id/overlay"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#80000000"
        android:src="@drawable/cw" >
    </ImageView>
</LinearLayout>
</FrameLayout> 
```

# c# - javascript无法访问背景

> ID：10103806
> 
> 赞同：0
> 
> 时间：2012-04-11T10:03:16.083
> 
> 标签：c#, javascript, asp.net, asp.net-mvc

1.  我想让网页的整个背景无法点击，后面有一些灰色
2.  在前面弹出一些是/否决定对话框
3.  如果单击是，则重定向到其他页面（与否相同）

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:12:10.800

尝试谷歌搜索“jQuery UI 对话框”。这方面有很多教程。

这是一个类似的堆栈溢出问题：[https://stackoverflow.com/questions/...](https://stackoverflow.com/questions/4228114/with-jquery-how-can-i-gray-out-and-disable-a-webpage-and-then-show-some-kind-of)

我不确定如何使背景变灰（它甚至可能使用 jQuery UI 自动发生）但要创建一个新对话框，您需要在 HTML 页面中包含 jQuery UI 库，也包含样式表，这是一个案例选择一个 DOM 元素并在其上调用 jQuery“对话框”功能。它看起来像这样（注意这不是工作代码）：

```
<div id="dialog" title="my dialog">
    <p>Hello from the dialog</p>
</div>

<script>
    $("#dialog").dialog({
        // set  dialog properties here
    });
</script> 
```

这是 jQuery 对话框文档的链接：http: [//jqueryui.com/demos/dialog/](https://jqueryui.com/dialog/)

这是一个显示对话框的快速 jsFiddle：http: [//jsfiddle.net/wxKq5/7/](https://jsfiddle.net/wxKq5/7/)

我刚刚检查过，jQuery UI 模态对话框会为您显示灰色的屏幕。我已经为您更改了我的 jsFiddle 代码，以向您展示如何实例化一个。

# xml - Powershell：将文件保存到常设目录

> ID：10103808
> 
> 赞同：0
> 
> 时间：2012-04-11T10:03:22.917
> 
> 标签：xml, powershell, directory

我正在尝试将 XML 文件从 powershell 脚本保存到常设目录，但经过一些在线阅读后，似乎可能性有限。任何人都知道一些保存到“常设目录”的代码，而不是保存到“完整路径”的代码：

- 此代码在生成 XML 并将一些变量保存到 XML 后运行。

```
$template | out-File C:\Scripts\XML\info.xml
$systemroot = [System.Environment]::SystemDirectory
$xml = New-Object xml
$xml.Load("C:\Scripts\XML\info.xml") 
```

- 此代码在脚本的最后运行，在 XML 之后以及在向 XML 添加信息的一些命令之后。

```
$xml.Save("/info.xml")
Get-Content /info.xml 
```

感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:23:41.207

您可以通过以下方式找到脚本的路径：

```
$ScriptPath = Split-Path -parent $MyInvocation.MyCommand.Definition 
```

然后您可以`$ScriptPath`在脚本中用作路径来加载或保存 xml 文件：

```
$template | out-File $ScriptPath\info.xml 
```

# javascript - 如何使用 Sencha Touch 和 javascript 自动滑动 html 页面？

> ID：10103816
> 
> 赞同：0
> 
> 时间：2012-04-11T10:04:12.523
> 
> 标签：javascript, html, sencha-touch

我正在使用 Sencha Touch、JavaScript 和 HTML 5 在该应用程序中创建简单的应用程序我想自动滑动 html 页面怎么做？

我使用以下代码显示带有图像的 html 页面。

`main.js`文件：

```
Ext.create('Ext.Carousel', {
    fullscreen: true,

    defaults: {
        styleHtmlContent: true
    },

    config: {
        ui : 'light'
    },

    items: [
        {
            html : '<img src="resources/images/Picture1.png" width="100%" height = "100%" align="middle" /> <audio autoplay loop><source src="resources/audio/music1.mp3"></audio>',
            style: 'backgroundImage: url(resources/images/bg.png);backgroundRepeat: repeat;backgroundPosition: center'
        },
        {
            html : '<img src="resources/images/Picture2.png" width="100%" height = "100%" margin=0 align="middle" />',
            style: 'backgroundImage: url(resources/images/bg.png);backgroundRepeat: repeat;backgroundPosition: center'
        },
        {
            html : '<img src="resources/images/Picture3.png" width="100%" height = "100%" margin=0 align="middle" />',
            style: 'backgroundImage: url(resources/images/bg.png);backgroundRepeat: repeat;backgroundPosition: center'
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T10:11:57.163

您需要使用 Ext JS [Task Runner](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.util.TaskRunner)。在函数中，您需要编写用于移动不同项目的逻辑。您可能必须将项目放在面板中，然后在屏幕上滑动面板。

# mysql - 如何获取尚未在数据库列中的最小整数

> ID：10103821
> 
> 赞同：0
> 
> 时间：2012-04-11T10:04:24.620
> 
> 标签：mysql

我在 MySQL DB 中有一个带有 UNIQUE INT(10) 列的表。该表非常填充，并且该行包含该列中整数的非连续条目。我想做一个查询，得到不在任何行中的最小数字（或 n 个最小数字）。

示例：该表包含具有列值`(1, 2, 3, 5, 7, 8, 10, 12, 15)`的行。sql 语句应该返回即五个最低的非包含值，`4, 6, 9, 11, 13`在这种情况下是。

这对 MySQL 可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:09:13.670

您可以使用“数字”表（对各种操作都很方便）：

```
CREATE TABLE num
( i UNSIGNED INT NOT NULL
, PRIMARY KEY (i)
) ;

INSERT INTO num (i)
VALUES
  (1), (2), ..., (1000000) ; 
```

然后：

```
SELECT 
    num.i
FROM 
        num
    LEFT JOIN
        tableX AS t
            ON num.i = t.columnX
WHERE 
    t.columnX IS NULL
ORDER BY
    num.i
LIMIT 5 
```

或者：

```
SELECT 
    num.i
FROM 
    num
WHERE 
    NOT EXISTS 
    ( SELECT *
      FROM tableX AS t
      WHERE num.i = t.columnX
    )
ORDER BY
    num.i
LIMIT 5 
```

* * *

另一种不使用辅助表的方法是使用 MySQL 变量。您可以在[SQL-Fiddle test-2](http://sqlfiddle.com/#!2/871dc/11)中对其进行测试。输出和前面不一样（只是为了说明可以做到）：

```
SELECT start_id, end_id
FROM 
  ( SELECT 
        IF( t.columnX <> @id, @id, NULL)       AS start_id
      , IF( t.columnX <> @id, t.columnX-1, NULL) AS end_id
      , @rows := @rows + (t.columnX - @id)     AS r
      , @id := t.columnX + 1                   AS running_id
    FROM 
            tableX AS t
        CROSS JOIN  
            ( SELECT @rows := 0
                   , @id := 1
            ) AS dummy
    WHERE
        @rows < 5
    ORDER BY
        t.columnX
    ) AS tmp
WHERE
    start_id IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:33:56.997

这会起作用，但我认为它的效率很低。不过，您不需要额外的表（一个`(2^31-1)*4/1024^3 = 8GB`用于 INT 中所有正数的表）。另外我建议你看看你为什么需要这个，因为它可能不是必需的。

它还将返回一个范围的开始和结束，但不是该范围内的所有数字。（例如，如果您有数字 1 和 5，它将返回 {0,2,4,6}）

```
SELECT (t.num-1) AS bound FROM t
    WHERE t.num-1 NOT IN (SELECT t.num FROM t)
UNION
SELECT (t.num+1) AS bound FROM t
    WHERE t.num+1 NOT IN (SELECT t.num FROM t) 
```

正如我所说，这将非常低效，JOIN 可能会更快，但您需要对其进行基准测试。

```
SELECT (t.num-1) AS bound FROM t
    LEFT JOIN t AS u ON t.num-1 = u.num
    WHERE u.num IS NULL
UNION
SELECT (t.num+1) AS bound FROM t
    LEFT JOIN t AS u ON t.num+1 = u.num
    WHERE u.num IS NULL 
```

# linux - 用户更改密码时发送电子邮件

> ID：10103824
> 
> 赞同：0
> 
> 时间：2012-04-11T10:04:32.583
> 
> 标签：linux, bash, sendmail, passwd

我有一个使用 ssh 登录的远程服务器。当有人使用 passwd 更改用户密码（包括新密码）时，有没有办法通过电子邮件（使用 bash 脚本）通知？

我猜它与 /etc/pam/passwd 有关，但不完全确定触发器和标志应该是什么。

例如，如果我将访问权限授予“朋友”并且他们决定将我锁定在我的帐户之外，这将很有用。当然，我可以为他们创建一个新帐户等，但这更像是一项“应该有可能”的任务，而不是一项实际的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:29:22.327

# 首先，一巴掌

这个问题让我想起了一条规则……它是什么？哦耶...

### 切勿与任何人分享您的密码！

这也符合规则。

### 永远不要通过电子邮件发送任何秘密！

对不起，大喊大叫。安全方面有一条规则，一个秘密泄露出去的可能性是知道它的人数的平方。我的推论是：

```
if ( people_who_know_secret > 1 ) {
     It ain't a secret any more
} 
```

在 Unix 中，即使是系统管理员，即全能的 root，也不知道您的密码。

更糟糕的是，您想通过电子邮件发送您的密码。电子邮件远非安全。它通常只是通过 Aether 发送的纯文本，任何有点好奇的人都可以偷看它。

# 方法一：允许用户在不知道密码的情况下使用 SSH

由于您使用的是 SSH，因此您应该知道 SSH 具有用于验证用户的替代机制，称为私钥/公钥。它因系统而异，但您要做的是创建一个公钥/私钥对。您与要登录的系统共享您的公钥，但将您的私钥保密。

一旦远程机器有了你的公钥，你就可以在`ssh`不知道该系统密码的情况下登录该系统。

确切的机制因机器而异，并且存在两种不同的 ssh 协议也无济于事，因此使其工作会因系统而异。[在 Linux 和 Mac 上，您可以通过ssh-keygen](http://linux.die.net/man/1/ssh-keygen)命令生成公钥/私钥对。

默认情况下，`ssh-keygen`将生成一个名为`$HOME/.ssh/id_rsa.pub`and的文件`$HOME/.ssh/id_rsa`。第一个是您的公钥。你`ssh-keygen`在你的机器和你想登录的机器上运行。

在您登录的机器上，创建一个名为 的文件`$HOME/.ssh/authorized_keys`，然后将您的公钥复制并粘贴到该文件中。让您的朋友也将他的公钥发送给您，并将其也粘贴到文件中。每个公钥将占用文件中的一行。

如果一切正常，您和您的朋友都可以使用`ssh`登录该远程计算机而无需输入密码。这是非常安全的，因为您的公钥必须与您相应的私钥匹配。如果没有，您将无法登录。这意味着即使其他 popel 找到您的公钥，他们也无法登录该远程系统。

您和您的朋友都可以登录该系统，而不必担心共享密码。

# 方法二：更好的解决方案：使用 SUDO

另一种方法是使用[sudo](http://linux.die.net/man/8/sudo)让您的朋友在某些方面扮演您的角色。与实际共享帐户相比，Sudo 有一些优势：

*   SUDO 的所有使用都被记录下来，因此您具有可追溯性。如果出了问题，你知道该怪谁。
*   您可以限制人们作为 SUDO 可以做的事情。例如，你的朋友必须像你一样运行一个特定的命令，而不是别的。在这种情况下，您可以在`/etc/sudoers`文件中指定您的朋友只能运行该特定命令。您甚至可以指定您的朋友是否可以简单地运行该命令，或者要求您的朋友输入他们的密码才能运行该命令。

在 Ubuntu Linux 和 Macintoshes 上，root 密码被锁定，因此您无法以 root 身份登录。如果您需要以 root 身份执行某些操作，请将自己设置为管理员（我相信通过将自己置于`wheel`组中），然后使用`sudo`来运行所需的管理员功能。

Sudo 的一大缺点是设置起来更复杂，并且需要机器上的管理员访问权限。

* * *

尝试使用 SSH 设置公钥/私钥。可能需要进行一些调整才能使其工作，但一旦工作，它就会很漂亮。更好的是，您可以运行远程命令`sep`并将文件从一台机器复制到另一台机器——所有这些都不需要密码提示。这意味着您可以编写 shell 脚本来为您完成工作。

By the way, a sneaky trick is to set your remote shell to `/bin/false`. That way, you can't log into that system -- even using `ssh`, but you can run remote commands using `ssh` and use `sep` to copy files back and forth between systems.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:23:29.023

个人密码只能由用户自己知道。甚至 root 用户都不应该知道它们，这就是它们被加密存储的原因。当然，root用户有足够的权限来解密它们，但原理是一样的。

如果您授予您的“朋友”访问权限，他们会为他们分配适当的权限！不要让他们成为 root 用户，你*也不*应该成为 root 用户。那么你的“朋友”将无权更改你的密码，更不用说在他们不应该在的地方乱搞了。

如果您**绝对必须监视**passwd 和 shadow 文件，请安装[iwatch](http://iwatch.sourceforge.net/index.html)。然后将其设置为监视 /etc/passwd 和 /etc/shadow 文件。如果它们发生变化，它会运行一个脚本来解密文件并向某人发送电子邮件。如果您保留一份副本以进行比较，您甚至会知道谁更改了。您可能还应该 gpg 电子邮件，这样它就不会以纯文本形式通过 Internet，因为它包含*每个人的*密码。请注意，系统上的任何其他用户都会对他们所处的反乌托邦世界感到不安。

仅仅因为根是土地的法律并不意味着我们想要生活在 1984 年。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T16:31:33.000

尝试某种：

```
alias passwd='passwd && echo 'Alert! Alert! Alert!' | mail -s 'pass change' alert@example.com' 
```

对你来说应该足够了:)

对于那些认为`alias`太主流的人来说，另一种可能的解决方案））：

1) 你可以做一个 cron 作业，`/etc/shadow`例如每隔一分钟检查你的文件，当文件发生变化时，它会向你发送一封警报电子邮件。我认为这里最简单的方法是制作 md5 校验和

2）您可以将 /usr/bin/passwd 移动到 /usr/bin/passwd.sys 并`/usr/bin/passwd.sys && echo 'Alert! Alert! Alert!' | mail -s 'pass change'`在其位置上制作一个脚本。是的，这种方式也可以被用户发现并擦洗:)

# c# - 分配某种类型的变量进行强制转换

> ID：10103826
> 
> 赞同：1
> 
> 时间：2012-04-11T10:04:41.847
> 
> 标签：c#, asp.net, ext.net

我想要做的是将我的控件添加到`Ext.Net.Panel`.

这是我的代码示例：

```
 Ext.Net.Panel panel = new Ext.Net.Panel();
   Control control = (Control) null;//here can be any Ext.Net type as well as NumeticField for example Ext.Net.TextArea and so on
  switch (infoAttribute.Type)
                                {
                                        case PropertyTypeAttrib.Text:
                                            control = (Control)new Ext.Net.TextField();
                                            ((TextField)control).FieldLabel = infoAttribute.HeadLine;
                                            control.ID = propertyHelper.Name;
                                            //panel.Items.Add((TextField)control);
                                        typeToCast = typeof (TextField);
                                        break;
                                    case PropertyTypeAttrib.FileUrl:
                                        control = (Control) new Ext.Net.HyperLink();
                                        control.ID = propertyHelper.Name;
                                        ((Ext.Net.Label) control).FieldLabel = infoAttribute.HeadLine;

                                        //panel.Items.Add((Ext.Net.HyperLink) control);
                                        typeToCast = typeof (Ext.Net.HyperLink);
                                        break;
                                    case PropertyTypeAttrib.Enum:
                                        control = (Control) new MMPControls.Web.ComboBoxEnumExt();
                                        ((MMPControls.Web.ComboBoxEnumExt) control).EnumerationTypeName =
                                            propertyHelper.PropertyType.Name;
                                        control.ID = propertyHelper.Name;
                                        ((MMPControls.Web.ComboBoxEnumExt) control).FieldLabel = infoAttribute.HeadLine;
                                        //panel.Items.Add((MMPControls.Web.ComboBoxEnumExt) control);
                                        typeToCast = typeof (MMPControls.Web.ComboBoxEnumExt);
                                        break;
                                    case PropertyTypeAttrib.Date:
                                        control = new MMPControls.Web.DateSelect();
                                        control.ID = propertyHelper.Name;
                                        //panel.Items.Add(
                                            //(MMPControls.Web.DateSelect) control);
                                        //panel.Items.Add((MMPControls.Web.DateSelect)control);
                                        typeToCast = typeof (MMPControls.Web.DateSelect);
                                        break;
                                    case PropertyTypeAttrib.DateTime:
                                        control = new MMPControls.Web.DateSelect();
                                        control.ID = propertyHelper.Name;
                                        //panel.Items.Add(
                                            //(MMPControls.Web.DateSelect)control);
                                        typeToCast = typeof (MMPControls.Web.DateSelect);
                                        break;
                                    case PropertyTypeAttrib.TextInteger:
                                        control = (Control)new Ext.Net.NumberField();
                                        ((NumberField)control).AllowDecimals = false;
                                        ((NumberField)control).MinValue = 0;
                                        ((Ext.Net.NumberField)control).FieldLabel = infoAttribute.HeadLine;
                                        control.ID = propertyHelper.Name;
                                        //panel.Items.Add(
                                            //(Ext.Net.NumberField) control);
                                        typeToCast = typeof (Ext.Net.NumberField);
                                        break;
                                    case PropertyTypeAttrib.IList:
                                        //TODO: 
                                        break;
                                    case PropertyTypeAttrib.ImageUrl:
                                        control = (Control)new Ext.Net.Image();
                                        control.ID = propertyHelper.Name;
                                        ((Ext.Net.Image)control).FieldLabel = infoAttribute.HeadLine;
                                        //panel.Items.Add((Ext.Net.Image) control);
                                        typeToCast = typeof (Ext.Net.Image);
                                        break;
                                    case PropertyTypeAttrib.TextFractional:
                                        control = (Control)new Ext.Net.NumberField();
                                        ((NumberField)control).AllowDecimals = true;
                                        ((NumberField)control).DecimalPrecision = infoAttribute.Fractional;
                                        ((NumberField)control).MinValue = 0;
                                        ((Ext.Net.NumberField)control).FieldLabel = infoAttribute.HeadLine;
                                        control.ID = propertyHelper.Name;
                                       //panel.Items.Add(
                                            //(Ext.Net.NumberField) control);
                                        typeToCast = typeof (Ext.Net.NumberField);
                                        break;
                                    case PropertyTypeAttrib.TextLarge:
                                        control = (Control)new Ext.Net.TextArea();
                                        ((TextArea)control).FieldLabel = infoAttribute.HeadLine;
                                        control.ID = propertyHelper.Name;
                                        //panel.Items.Add((TextArea)control);
                                        typeToCast = typeof (TextArea);
                                        break;
   }
   panel.Items.Add((typeToCast)control);//that's what i need to do. 
```

行中出现错误`panel.Items.....`无法解析此符号 typeToCast

以前有人做过类似的事情吗？

感谢提前:)

**解决 ：**

我所做的是投射我准备好的`Component`类型控制。 `panel.Items.Add((Component)control);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:06:30.587

那么错误是因为强制转换表达式的类型部分必须是类型（或类型参数）的名称 - 而不是表达式的值。

为什么你觉得你*需要*演员？为什么不只是：

```
panel.Items.Add(new Ext.Net.NumericField()); 
```

为什么你有演员表`Control`呢？不是`NumericField`已经派生自? `Control`你为什么用`typeof`？基本上，我看不到您提供的代码中需要任何强制转换。如果您认为他们有充分的理由，请在问题中添加更多上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:18:47.277

通过一些重构，您应该能够构建相同的结果，而无需使用太多的 Casting。以下示例演示了一种非常简化的方法。

**例子**

```
<%@ Page Language="C#" %>

<%@ Import Namespace="Panel=Ext.Net.Panel" %>
<%@ Import Namespace="Button=Ext.Net.Button" %>

<%@ Register assembly="Ext.Net" namespace="Ext.Net" tagprefix="ext" %>

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!X.IsAjaxRequest)
        {
            this.Form.Controls.Add(this.BuildForm());
        }
    }

    private Component BuildForm()
    {
        var panel = new FormPanel {
            Title = "Example",
            Width = 350,
            Height = 215,
            Padding = 5,
            DefaultAnchor = "100%",
            Buttons = { new Button { Text = "Submit" }}
        };

        panel.Items.Add(this.BuildWidget(new Widget {
            Name = "text",
            ID = "TextField1",
            Label = "My TextField"
        }));

        panel.Items.Add(this.BuildWidget(new Widget {
            Name = "date",
            ID = "DateField1",
            Label = "My DateField"
        }));

        return panel;
    }

    private Field BuildWidget(Widget widget)
    {
        Field field = null;

        switch(widget.Name)
        {
            case "text":
                field = new TextField(); 
                break;
            case "date":
                field = new DateField();
                break;
        }

        field.ID = widget.ID;
        field.FieldLabel = widget.Label;

        return field;
    }

    public class Widget
    {
        public string Name { get; set; }

        public string ID { get; set; }
        public string Label { get; set; }
    }
</script>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
    <form runat="server">
        <ext:ResourceManager runat="server" />

    </form>
</body>
</html> 
```

# mongodb - 在 Meteor 中运行示例的问题

> ID：10103830
> 
> 赞同：34
> 
> 时间：2012-04-11T10:05:21.263
> 
> 标签：mongodb, meteor

我正在测试 Meteor 示例，这是我在运行`meteor`todos 示例时看到的：

```
Unexpected mongo exit code 100\. Restarting.
Unexpected mongo exit code 100\. Restarting.
Unexpected mongo exit code 100\. Restarting.
Can't start mongod. Check for other processes listening on port 3002 or other meteors running in the same project. 
```

如果我`mongod`在命令行中运行，就会发生这种情况：

```
Thu Apr 12 19:27:39 Mongo DB : starting : pid = 2686 port = 27017 dbpath = /data/db/ master = 0 slave = 0  32-bit 

** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
**       see http://blog.mongodb.org/post/137788967/32-bit-limitations for more

Thu Apr 12 19:27:39 db version v1.4.4, pdfile version 4.5
Thu Apr 12 19:27:39 git version: nogitversion
Thu Apr 12 19:27:39 sys info: Linux murphy 2.6.32.14-dsa-ia32 #1 SMP Thu May 27 16:19:20 CEST 2010 i686 BOOST_LIB_VERSION=1_42
Thu Apr 12 19:27:39 waiting for connections on port 27017
Thu Apr 12 19:27:39 listen(): bind() failed errno:98 Address already in use for port: 27017
Thu Apr 12 19:27:39 MiniWebServer: bind() failed port:28017 errno:98 Address already in use
Thu Apr 12 19:27:39   addr already in use
Thu Apr 12 19:27:39 warning: web admin interface failed to initialize on port 28017 
```

有人帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-12T16:16:20.573

我有同样的问题。固定：

**警告：这会清除您的本地数据库：**

> 流星重置

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-29T08:24:56.180

我有同样的问题。只需`.meteor/local/db/mongod.lock`在您的流星项目文件夹中删除。并且流星应该正常运行。

希望它有所帮助！:)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-18T16:02:32.640

正如 mKriss 提到的，尝试

```
meteor reset 
```

如果您收到此错误：

```
reset: Meteor is running.

This command does not work while Meteor is running your application.
Exit the running meteor development server. 
```

然后在你的运行进程中寻找流星：

```
ps -x | grep meteor 
```

这给了我以下输出：

```
14877 pts/0    Sl     0:02 /usr/lib/meteor/mongodb/bin/mongod --bind_ip 127.0.0.1 --port 3005 --dbpath /home/sam/proto/.meteor/local/db
15022 pts/0    S+     0:00 grep --color=auto meteor 
```

所以我做了：

```
kill -s KILL 14877
meteor reset
meteor 
```

现在一切正常！

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-04-19T15:41:28.793

不确定这是否与您的问题有关，但我收到此错误并最终发现这是因为我的应用程序目录位于 mongodb 不喜欢的 NFS 共享中（我在 VirtualBox 中的 Ubuntu 上运行）。将我的应用程序放在我的主目录中可以解决问题。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-04-01T22:05:04.233

有几种方法可以解决这个问题，这个问题没有显示如何使用`mongod`，所以我将介绍如何获得有关错误的更多细节。`meteor reset` *可能*有效，但并非总是如此，如果有效，它将清除您的应用程序数据。

核心问题是流星在显示数据时非常难以描述，因此我建议您获得有关该错误的更多详细信息，因为它实际上可能存在任何 mongodb 错误。下面的步骤应该更详细地重现错误，以帮助诊断根本问题是什么

**查找 Meteor 安装 mongodb 的位置**

如果您有该`mongod`工具（可从[http://mongodb.com](http://mongodb.com)下载），否则使用安装了流星的工具。只是要小心你不要升级旧数据库的版本太新，然后流星的旧 mongodb 将无法理解它。

通常（但不总是）在

> /usr/local/meteor/mongodb/bin/mongod（**OS X**）
> 
> /usr/lib/meteor/mongodb/bin/mongod（**红帽/Debian**）
> 
> C:\Program Files\Meteor\mongodb\bin\mongod.exe（**Windows 通过 Tom Wijsman 的端口**）

**使用 mongodb 手动运行 Meteor 的数据库**

因此，我们将使用它在您的应用程序 mongodb 数据库上手动运行 mongodb：

在您的项目目录中使用您的终端应用程序/命令提示符

```
cd .meteor
cd local
/usr/local/meteor/mongodb/bin/mongod --dbpath ./ 
```

如果您的`mongod`路径是其他路径，请改用它，上面的方法适用于 OS X。

**分析输出以找到问题的根本原因**

现在 mongodb 应该可以运行并很好地描述问题所在，或者运行顺利：

```
Mon Apr  1 23:59:55 [initandlisten] MongoDB starting : pid=84640 port=27017 dbpath=./ 64-bit  host=MacBook-Pro.local
Mon Apr  1 23:59:55 [initandlisten] 
Mon Apr  1 23:59:55 [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
Mon Apr  1 23:59:55 [initandlisten] db version v2.2.1, pdfile version 4.5
Mon Apr  1 23:59:55 [initandlisten] git version: d6764bf8dfe0685521b8bc7b98fd1fab8cfeb5ae
Mon Apr  1 23:59:55 [initandlisten] waiting for connections on port 27017 
```

查看错误可能是什么，然后解决显示的问题。它可能是众多之一。

**示例问题**

如果有：

```
exception in initAndListen: 10310 Unable to lock file: ./mongod.lock. Is a mongod instance already running?, terminating 
```

然后重新启动您的计算机以终止任何可能正在使用该文件的进程，如果它仍然无法帮助`meteor reset`您清除目录，`.meteor/local/db`那么您的应用程序将使用新的数据库。

这些错误非常有用，例如磁盘空间不足（清理垃圾`;-)`或无法写入磁盘（权限问题 - 使用 chmod/sudo）。

**非常晦涩的问题**

如果你发现一些非常令人困惑的东西，它可能是一个 mongodb 问题而不是流星问题，看看你在 stackoverflow 上遇到的错误，如果你找不到它，提出一个问题，希望有一群乐于助人的人准备好帮助 ：）

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-04-15T17:17:33.107

我有非常简单的解决方案：

`export LC_ALL="en_US.UTF-8"`

并运行`meteor`

如果没问题，您可以将此行添加到

`sudo vim /usr/local/bin/meteor`

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-11-28T16:33:51.297

如果流星重置对您不起作用，请检查您的磁盘空间使用情况。

如果您没有任何可用磁盘空间，您将收到此错误。MongoDB 占用大约 450MB，因此创建几个项目可以很快填满一个分区。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-08-02T03:22:02.323

如果您的流星项目位于 DropBox 文件夹中，请检查包含项目文件夹中单词的文件名`conflicted copy`并将`.meteor/local/db/`其删除。这应该可以让 Mongod 自由运行。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-08-11T22:23:33.067

这就是帮助我`meteor`在 Google Compute Engine 上运行的原因：

```
export LC_ALL=C 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-07-01T18:48:35.120

注意项目路径中的重音。

..\Système\MyMeteorProject 将不起作用，..\System\MyMeteorProject 将起作用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-12-21T02:39:35.580

我知道这个问题已经很老了，但是我也遇到了这个问题，并认为这可能对某人有用。对我来说有效的是运行“sudo meteor”

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-02-22T18:49:17.967

我收到此错误消息：

```
MongoDB had an unspecified uncaught exception.
This can be caused by MongoDB being unable to write to a local database.
Check that you have permissions to write to .meteor/local. MongoDB does
not support filesystems like NFS that do not allow file locking. 
```

...事实证明，我在不同的端口上运行了同一个应用程序的一个实例，因此将“确保您没有在备用端口上运行的应用程序的任何其他实例”添加到事物列表中可能导致此错误。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-04-11T13:12:47.557

原谅显而易见的，但确实`netstat -antep | grep 3002`表明了什么？（假设你在 *nix 上）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-04-11T23:44:07.223

对于那些使用 vagrant 并且不想使用的人`meteor reset`，清除流星本地目录的 db 可以解决冲突。从终端：

```
rm -rf .meteor/local/db/ 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-02-04T18:47:10.990

我可以解决 Meteor 1.2.1 下的问题，并通过删除锁定文件、将 .meteor/local/db/ 的剩余内容复制到临时位置（您可以称之为备份）、发出`meteor reset`并复制备份数据来恢复我的数据回到 .meteor/local/db/。一切都像以前一样工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-04-03T23:53:19.410

我从同步中发现了同样的冲突问题。我使用的是 Ubuntu One，在 .meteor/local/db/ 中创建了一堆新文件，并附加了“u1_conflicted”。我删除了那些，以及 .meteor/local/db/journal 中的那些，并且已备份并运行。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-02-13T19:15:22.270

我可以通过删除本地 Mogo 数据库锁来恢复错误。

**删除数据库锁的步骤：**

1.  导航到你的应用程序目录（你有 Meteor 应用程序文件的地方）
2.  删除文件 $ **rm .meteor/local/db/mongod.lock**

*注意*：**$ 流星重置**

**警告：** meteor reset 会清除本地数据库中的所有内容。

如果 Meteor 应用程序仍在后台运行，则会发生错误。正在运行的应用程序或由于不正确的系统/应用程序关闭以及同一应用程序的第二个实例无法释放数据库锁。

所以每次都要小心退出应用程序。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-04-12T20:58:27.103

```
Thu Apr 12 19:27:39 listen(): bind() failed errno:98 Address already in use for port: 27017 
```

其他东西已经在使用端口 27017，所以 mongo 启动失败。在不同的端口上启动 mongo 或首先杀死正在使用 27017 的任何进程。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-07-13T05:06:28.730

`Meteor reset`命令在 DOS 中对我不起作用

我删除了所有文件和文件夹`<projectfolder>/.meteor/local/db to Recycle Bin`

```
**DOS Log below:**

D:\Meteor\todos>meteor reset
Project reset.

D:\Meteor\todos> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-03-17T13:25:06.013

当我尝试在链接到主机文件夹的 VMWare 共享文件夹中创建我的项目时，同样的问题......

> cd /mnt/hgfs/Folder_in_C_host_drive
> 
> 流星创建myapp
> 
> cd myapp
> 
> 流星
> 
> **意外的 mongo 退出代码 100。重新启动。**
> 
> ...

**通过将项目移动到我的文件系统中的标准文件夹来**解决...** **VMWare 共享文件夹无法处理文件安全性**，并且任何文件都是 root:root 拥有的...这就是它以那些 MongoDB 错误结束的原因**

 *** * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-06-22T18:24:13.853

如果您使用 Vagrant，MongoDb 将不会在 Vagrant 共享目录中运行：[https ://gist.github.com/gabrielhpugliese/5855677](https://gist.github.com/gabrielhpugliese/5855677)

如果您使用 Windows 进行开发工作，Meteor 现在有一个 Windows 安装程序： [http ://win.meteor.com/](http://win.meteor.com/)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-01-04T12:01:52.877

`meteor reset`在`sudo`用户上运行命令。它应该适合你..

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-01-20T02:57:08.157

成为超级用户：

`# meteor --allow-superuser`

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-01-19T14:14:04.147

您可以尝试使用以下命令停止运行您的流星应用程序：[kill -9`ps ax | grep node | grep meteor | awk '{print $1}'`](https://stackoverflow.com/questions/12238382/how-to-stop-meteor)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-12-28T13:08:41.147

我有同样的问题。固定：

固定：

1.  你的项目目录
2.  重定向到 .meteor 目录 > .local > .db
3.  在 .db 文件夹中从这里删除所有文件
4.  运行命令“流星”

它对我来说很好。试试这个，它真的很有帮助。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-06-13T12:57:31.300

不久前我遇到了`Unexpected mongo exit code 100\. Restarting.`错误。我最终在[这里](https://stackoverflow.com/questions/31617615/meteor-unexpected-mongo-exit-code-100-restarting-cant-start-mongo-server)回答了我自己的问题，这似乎已经为许多面临同样问题的人解决了问题。最重要的是它不需要`meteor reset`擦除数据库。这是一个简单且非常快速的方法三步修复，所以我建议在一些更复杂的建议之前尝试它。**

# java - Java - 使用链表指针进行合并排序

> ID：10103834
> 
> 赞同：2
> 
> 时间：2012-04-11T10:05:32.867
> 
> 标签：java, sorting

我在为链表实现合并排序时遇到问题，特别是合并部分。我正在尝试对包含字符串的链接列表进行排序并按字母顺序对其进行排序。但是，我的合并代码有时会由于某些原因跳过指针，具体取决于原始列表的顺序。目前我有：

```
public node merge(node left, node right){
        node result = null;

        if(left == null){
            return right;
        }else if(right == null){
            return left;
        }   

        // The data in the node are stored as strings.
        // Compare if the string in the left node is less that 
        // the string in the right.
        if(left.info.compareTo(right.info) < 0){
            result = left;
            result.next = merge(left.next, right);
        }else{
            result = right;
            result.next = merge(left, right.next);
        }

        return result;
    } 
```

如果我有一个包含例如 f->t->c->t->h 的列表，我的合并将返回 h->t->t，其中缺少指针。但是，如果我的列表由 b->a->t->t->c 组成，那么它会按字母顺序正确显示，a->b->c->t->t，并且不会丢失任何指针。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:43:23.513

我认为这是因为您持有指向左右的旧指针，这可能不再是子列表的头。

改变

```
 mergeSort(left);
 mergeSort(right); 
```

到

```
 left = mergeSort(left);
 right = mergeSort(right); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:45:11.010

这可能不值得回答，但在这里。

弄清楚那里发生了什么有点困难，我没有注意到实现中的任何明显错误（尽管我不会在合并部分使用递归，但“迭代地”实现它更简单）。

在我看来，您需要逐步弄清楚发生了什么。如果您知道几个有效的示例和无效的示例（看起来像您这样做），请使用预期的输入直接调用每个方法。

例如，要确定您的拆分是否有效，请创建一个列表并将其传递给拆分，然后打印结果。然后在 split 创建的两个列表上调用 split 等等，以确保发生了什么。（现在是使用 JUnit 的好时机，但如果您愿意，可以“手动”完成）。

如果 split 在您能想到的几种情况下都可以正常工作，则使用两个列表调用合并例程，并以相同的方式分析结果。如果一切正常，则将一些调试输出添加到您的合并中。

基本上，独立地测试你算法的每个部分，我会更快地找出问题然后将其作为一个整体来看待。

很抱歉写了一堵文字墙但仍然没有回答问题，但这就是我尝试解决问题的方法。

# jquery - 合并jqgrid中的两个字段

> ID：10103835
> 
> 赞同：1
> 
> 时间：2012-04-11T10:05:41.323
> 
> 标签：jquery, jqgrid, struts2

我有一个包含用户属性的 jqgrid。这些属性是名字、中间名、姓氏、年龄、性别等。我想显示全名而不是分别显示名字、中间名和姓氏。所以这个填充名称列将连接名字、中间名和姓氏。请问我该怎么做。谢谢

更新：我正在使用 struts 2 web 框架

```
 <s:url id="studentTableURL" namespace="/student" action="loadStudentsTable"/>
        <tr>
            <td>
                <sjg:grid id="studentGrid" caption="%{getText('studentsearch.title')}" dataType="json" href="%{studentTableURL}" pager="true"
                          gridModel="studentList"
                          rowList="10,15,20"
                          rowNum="15"
                          rownumbers="true"
                          onSelectRowTopics="rowselect"
                          >
                    <sjg:gridColumn name="id" align='left' index="id" title='Id' hidden="true"/>
                    <sjg:gridColumn name="studentNumber" width="100" align='left' index="studentNumber" title='%{getText("studentaction.studentnumber")}' sortable="true"/>
                    <sjg:gridColumn name="firstName" align='left' index="firstName" title='%{getText("studentaction.firstname")}' sortable="true"/>
                    <sjg:gridColumn name="lastName" align='left' index="lastName" title='%{getText("studentaction.lastname")}' sortable="true"/>
                    <sjg:gridColumn name="gender" align='left' width="80" index="gender" title='%{getText("studentaction.gender")}' sortable="true"/>
                    <sjg:gridColumn name="phoneNumber" align='left' width="100" index="phoneNumber" title='%{getText("studentaction.phonenumber")}' sortable="true"/>
                </sjg:grid>
            </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:49:16.907

隐藏：对于您不想要的列，即名字，姓氏

为具有 name="id" 的额外列实现格式化程序，如下所示

```
function myFormatter(cellvalue, options, rowObject){
    return rowObject.firstName + " " + rowObject.lastName;
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:59:48.533

您的问题与我刚刚回答的[另一个](https://stackoverflow.com/q/10110393/315935)问题非常接近。我有点难以理解网格定义，因为您没有发布将在客户端运行的 JavaScript 代码。

我建议您将新的组合列添加`fullName`到网格定义中，并用`beforeProcessing`. jqGrid 只会看到`fullName`输入中的数据。因此，一切都应该不用付出很大的努力就可以工作。如果您不需要单独显示`firstName`，`lastName`您可以从网格定义中删除列。

自定义格式化程序的工作方式也取决于您使用的其他设置。要编写自定义格式化程序，了解服务器响应中数据的确切格式很重要。例如，重要的是要知道您是否使用`repeatitems: false`属性`jsonReader`。编写正确的实现时需要知道的相同信息`beforeProcessing`。如果您将使用选项并使用数据的本地排序或过滤，`beforeProcessing`您将看到该方法的最大优势。`loadonce: true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:34:42.230

最简单的解决方案是修改数据源（例如：XML/JSON Web 服务）以在其中添加新列。

或者，您可以使用`full_name`带有自定义格式化程序的新列来实现此目的，但是从格式化程序中访问行中的其他列有点棘手，因此需要一个辅助函数：

```
function getRowObjectFromFormatter (key, rowObject){
    var searchHTML = function(){
        return jQuery(rowObject).find('td[aria-describedby*="' + key + '"]').text();
    }, tmp;

    if (rowObject.constructor != undefined){
        if (rowObject.constructor == Object){
            return rowObject[key];
        } else if (rowObject.constructor == HTMLTableRowElement){
            return searchHTML();
        }
    } else if (jQuery.browser.msie && jQuery.browser.version == "7.0"){
        // Hack to correctly extract data from an HTML table in IE7
        tmp = searchHTML();
        if (tmp != null && tmp.length > 1){
            return tmp;
        }
    }

    return jQuery(rowObject).find(key).text();
}

function myFormatter(cellvalue, options, rowObject){
    var otherColumn = getRowObjectFromFormatter('otherColumn', rowObject);
    ...
} 
```

# ruby-on-rails - 静态页面 >> sh.exe"; subl: 找不到命令

> ID：10103836
> 
> 赞同：0
> 
> 时间：2012-04-11T10:05:49.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, static-pages, sublimetext2

我正在阅读 RoR 指南，但我遇到了**“静态页面”**主题中的一个问题，目前我正在使用文本编辑器**Sublime Text 2**，每当我按照说明进行操作时：

```
$subl . 
```

或尝试

```
$subl public/hello.html 
```

它输出：

```
sh.exe" subl: command not found 
```

任何帮助将不胜感激..
-Marc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T05:04:35.843

如果使用 ruby​​ 版本管理器（我只是假设因为我遇到了这个问题），那么必须在用户路径中修改符号链接的建议命令：

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/.rvm/bin/subl 
```

请注意 .rvm 目录已添加到路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T09:05:21.020

我遇到了类似的问题，$PATH 中的路径是正确的，当我浏览到本地 bin 文件夹时：

```
cd /usr/local/bin/ 
```

我可以看到 subl 文件/快捷方式。

在查找器中打开此文件夹后：

```
open . 
```

我可以看到图标看起来不正确（白色），可能是以前的版本。双击它也会出错，所以我在扩展 Sublime Text 2.app 的内容后手动复制了 subl 文件。

如果将文件拖过来，它将创建一个快捷方式，如果这不起作用，则首先将 subl 文件复制到其原始位置，然后将其拖到副本上并正确重命名。或者只是给它正确的权限。

希望这可以帮助

# c# - 在实体框架中验证 POCO 对象

> ID：10103837
> 
> 赞同：0
> 
> 时间：2012-04-11T10:05:56.253
> 
> 标签：c#, entity-framework

我正在使用实体框架制作应用程序。我有以下代码：

```
public class Entity : IValidatableObject
{
    public int EntityId { get; set; }

    [MaxLength(10)]
    public string Name { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext = null)
    {
        if (Name == "John")
            yield return new ValidationResult("Not allowed.", new[] { "Name" });
    }

    public bool IsValid(ValidationContext validationContext = null)
    {
        return !Validate(validationContext).GetEnumerator().MoveNext();
    }
} 
```

实体框架类在进行自己的验证时会使用此验证器：

```
using (var dt = new DatabaseContext()) {
    Entity en = new Entity();
    en.Name = "John";
    dt.Entities.Add(en);
    String err = dt.GetValidationErrors().First().ValidationErrors.First().ErrorMessage;
    // err == "Not Allowed."
} 
```

但是，它们也使用了 'MaxLength' 属性：

```
using (var dt = new DatabaseContext()) {
    Entity en = new Entity();
    en.Name = "01234567890";
    dt.Entities.Add(en);
    String err = dt.GetValidationErrors().First().ValidationErrors.First().ErrorMessage;
    // err == "The field Name must be a string or array type with a maximum length of '10'."
} 
```

我写的 IsValid 方法不知道 MaxLength 属性：

```
using (var dt = new DatabaseContext()) {
    Entity en = new Entity();
    en.Name = "John";
    en.IsValid; // false
    en.Name = "01234567890";
    en.IsValid = // true;
} 
```

如何让我的`IsValid`方法了解实体框架验证器使用的数据注释属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:54:53.560

[您可以尝试实施此处](https://stackoverflow.com/questions/3400542/how-do-i-use-ivalidatableobject/3400627#3400627)接受的答案中显示的示例。它基本上只是手动强制调用数据注释检查，但我找不到更好的方法。

# c++ - 错误 LNK2019：未解析的外部符号 _Direct3DCreate9Ex@8 在函数“受保护：XYX()”中引用

> ID：10103839
> 
> 赞同：0
> 
> 时间：2012-04-11T10:06:12.260
> 
> 标签：c++, visual-studio-2008, visual-c++, linker, winapi

编译 C++ 解决方案时出现以下 LINK 错误：

> 错误 LNK2019：未解析的外部符号 _Direct3DCreate9Ex@8 在函数“受保护：XYX()

符号“Direct3DCreate9Ex”在“C:\Program Files\Microsoft SDKs\Windows\v7.0\Include”中的“ddraw.h”头文件中定义。并验证头文件“ddraw.h”存在于这个位置。我还在VS设置“工具-->选项-->VC++目录->包含”中包含了这个路径。

但是我仍然收到链接错误为“**错误LNK2019：未解析的外部符号_Direct3DCreate9Ex@8在函数“受保护：XYX（）** ”中引用。

任何人都可以在编译我的 C++ 解决方案时帮助我摆脱这个链接错误。我在 64 位 Win7 上使用 VS 2008。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:09:01.793

根据[Direct3DCreate9Ex](http://msdn.microsoft.com/en-us/library/windows/desktop/bb219676%28v=vs.85%29.aspx)的参考页面，您需要链接`D3D9.lib`.

# objective-c - 使用图像的按钮动画

> ID：10103841
> 
> 赞同：3
> 
> 时间：2012-04-11T10:06:17.603
> 
> 标签：objective-c, cocoa-touch, core-animation

我有一个 UIButton 有箭头类型的蓝色图像设置为

```
 UIImage *arrowImage = [UIImage imageNamed:@"bluearrow.png"];
    [self.prevbutton setBackgroundImage:arrowImage forState:UIControlStateNormal]; 
```

现在我有另一个图像黄色.png，我想在这个按钮图像上叠加并连续制作一个闪烁的动画。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T10:18:06.580

这应该可以帮助你。

```
myButton.imageView.animationImages =
[NSArray arrayWithObjects:[UIImage imageNamed:@"image1.png"],
                          [UIImage imageNamed:@"image2.png"],
                          nil];
myButton.imageView.animationDuration = 0.5; //whatever you want (in seconds)
[myButton.imageView startAnimating]; 
```

引用自 [https://stackoverflow.com/a/7490535/716216](https://stackoverflow.com/a/7490535/716216)

# php - 带有本机 mysql 驱动程序 ( mysqlnd ) 的 php pdo - 获取保留本机列类型的数据

> ID：10103846
> 
> 赞同：0
> 
> 时间：2012-04-11T10:06:38.960
> 
> 标签：php, mysql, pdo, types

如何从保留 mysql 的本机类型列的 pdo-mysql 中获取数据？

示例：我从表中检索一些数据。此表包含 id 列，它是一个整数列。从该表中获取数据时，php 结果数组具有像字符串一样的 id 字段，而不是整数。

```
array(3) { ["id"]=> string(2) "11" 
           ["name"]=> string(24) "test name"           
           ["surname"]=> string(2) "test suname"
          } 
```

我知道使用 mysqlnd 驱动程序我可以在 php 中将其作为默认类型。

我使用 php 5.3 并且启用了 mysqlnd：

```
shell$ php -i | grep -i mysql     

MySQL Support => enabled
Client API version => mysqlnd 5.0.8-dev - 20102224 - $Revision: 308673 $
mysql.allow_local_infile => On => On
mysql.allow_persistent => On => On
mysql.connect_timeout => 60 => 60
mysql.default_host => no value => no value
mysql.default_password => no value => no value
mysql.default_port => 3306 => 3306
mysql.default_socket => /var/mysql/mysql.sock => /var/mysql/mysql.sock
mysql.default_user => no value => no value
mysql.max_links => Unlimited => Unlimited
mysql.max_persistent => Unlimited => Unlimited
mysql.trace_mode => Off => Off
mysqli
MysqlI Support => enabled
Client API library version => mysqlnd 5.0.8-dev - 20102224 - $Revision: 308673 $
mysqli.allow_local_infile => On => On
mysqli.allow_persistent => On => On
mysqli.default_host => no value => no value
mysqli.default_port => 3306 => 3306
mysqli.default_pw => no value => no value
mysqli.default_socket => /var/mysql/mysql.sock => /var/mysql/mysql.sock
mysqli.default_user => no value => no value
mysqli.max_links => Unlimited => Unlimited
mysqli.max_persistent => Unlimited => Unlimited
mysqli.reconnect => Off => Off
mysqlnd
mysqlnd => enabled
Version => mysqlnd 5.0.8-dev - 20102224 - $Revision: 308673 $
PDO drivers => mysql, sqlite, sqlite2
pdo_mysql
PDO Driver for MySQL => enabled
Client API version => mysqlnd 5.0.8-dev - 20102224 - $Revision: 308673 $
pdo_mysql.default_socket => /var/mysql/mysql.sock => /var/mysql/mysql.sock 
```

如何获取具有本机类型的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:15:43.483

有一个`PDO::ATTR_STRINGIFY_FETCHES`参数，它在理论上控制这个数字（据我所知，没有办法使用任何 MySQL 驱动程序获取带有日期的本机对象）：

> PDO::ATTR_STRINGIFY_FETCHES：获取时将数值转换为字符串。需要布尔值。

您可以使用[PDO::setAttribute()](http://es.php.net/manual/en/pdo.setattribute.php)更改它。但是，驱动程序总是可以自由地实现特定的 PDO 功能，而 MySQL 似乎不支持这一点。

话虽如此，一些用户报告说字符串化提取是在模拟参数模式下运行查询的副作用，因此您始终可以禁用它：

```
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

请注意，启用/禁用此类模式会产生额外的副作用，包括：

*   不能多次使用命名参数
*   获取引用的数字参数（特别是，这会破坏`LIMIT`子句）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:11:24.930

PHP 是弱类型的，所有来自数据库或请求的输入都是字符串。只需`(int)`在需要时使用 using 或 PHP 函数进行转换，尽管类型杂耍应该避免这种需要。

# sql - 合并 SQL 中的常用行

> ID：10103849
> 
> 赞同：-1
> 
> 时间：2012-04-11T10:06:54.687
> 
> 标签：sql, oracle

我得到以下输出

```
Code  Manager    Employee
1      A          Emp1
1      A          Emp2   
1      A          Emp3  
2      B          Emp4
2      B          Emp5 
```

但我希望结果为

```
Code   Manager    Employee
1       A          Emp1
                   Emp2
                   Emp3
2       B          Emp4
                   Emp5 
```

代码和管理器列不应重复。它应该是空白的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:39:05.403

```
select case when Code = lag(Code) over(order by Code, Manager, Employee)
         then null
         else Code
       end as Code,
       case when Manager = lag(Manager) over(order by Code, Manager, Employee)
         then null
         else Manager
       end as Manager,
       Employee
from YourTable Y
order by Y.Code, Y.Manager, Y.Employee 
```

试试[SQL Fiddle](http://sqlfiddle.com/#!4/97b48/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:17:24.560

您需要 Access 或 Crystal Reports 之类的东西来执行这种格式设置。在纯 SQL 中是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:11:05.257

SQL 无法做到这一点。从数据库接收数据后，您应该在代码中手动循环数据。

**编辑**

在 Vashh 和 Lieven 发表评论后，我意识到这是可能的。因此，如果他需要用于显示目的，他可以使用 Func（由 Vaassh 建议）、使用 null 加入（由 Lieven 提供）或者可能是循环并添加到 datagridview 或 table 或任何他想使用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T10:24:14.663

为了它的乐趣，以下是一种方法，但最后，最好在最终用户应用程序中完成

```
;WITH YourTable (Code, Manager, Employee) AS(
    SELECT * FROM (VALUES 
        (1, 'A', 'Emp1')
        , (1, 'A', 'Emp2')
        , (1, 'A', 'Emp3')
        , (2, 'B', 'Emp4')
        , (2, 'B', 'Emp5')
    ) a (b, c, d)       
)
, q AS (
    SELECT  rn = ROW_NUMBER() OVER (ORDER BY Code, Manager, Employee), *
    FROM    YourTable
)
SELECT  Code = CASE WHEN q1.Code = q2.Code THEN NULL ELSE q1.Code END
        , Manager = CASE WHEN q1.Code = q2.Code THEN NULL ELSE q1.Manager END
        , q1.Employee
FROM    q q1
        LEFT OUTER JOIN q q2 ON q1.rn = q2.rn + 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:26:23.857

我知道您在 Oracle 中寻求答案，但也许这个 SQL Server 示例会对您有所帮助（如果您真的非常需要这样做，而不是在报告环境中）：

```
DECLARE @TBL TABLE(
  Code     INT,
  Manager  CHAR(1),
  Employee VARCHAR(4))

INSERT @TBL VALUES (1,'A','Emp1')
INSERT @TBL VALUES (1,'A','Emp2')
INSERT @TBL VALUES (1,'A','Emp3')
INSERT @TBL VALUES (2,'B','Emp4')
INSERT @TBL VALUES (2,'B','Emp5')

;WITH cte
     AS (SELECT Code
                ,Manager
                ,Employee
                ,ROW_NUMBER() OVER(ORDER BY Code) rownum
         FROM   @TBL)
SELECT CASE curr.Code
         WHEN prev.Code THEN ''
         ELSE CAST(curr.Code AS VARCHAR(20))
       END AS _Code
       ,CASE curr.Manager
          WHEN prev.Manager THEN ''
          ELSE curr.Manager
        END AS _Manager
       ,curr.Employee
FROM   cte curr
       LEFT JOIN cte prev
         ON curr.rownum = prev.rownum + 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T10:27:25.190

如果您只是使用 SQL Server 2005/2008，则可以通过以下方式实现此目的。

```
declare @table table (
Code int,
Manager Varchar(1),
Employee varchar(10)
)

insert into @table values
(1,'A','Emp1'),
(1,'A','Emp2'),
(1,'A','Emp3'),
(2,'A','Emp4'),
(2,'A','Emp5')

select * from @table
select
case when number=1 then Code else null end as Code,
case when number=1 then Manager else null end as Manager,
employee
from (
select *,
row_number() over (partition by code, manager order by code,manager) as number
from @table
) x 
```

这会给你：

```
(5 row(s) affected)
Code        Manager Employee
----------- ------- ----------
1           A       Emp1
1           A       Emp2
1           A       Emp3
2           A       Emp4
2           A       Emp5

(5 row(s) affected)

Code        Manager employee
----------- ------- ----------
1           A       Emp1
NULL        NULL    Emp2
NULL        NULL    Emp3
2           A       Emp4
NULL        NULL    Emp5

(5 row(s) affected) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T10:32:20.553

完毕：）

如果您愿意，可以将 NULL 值更改为 ''。

```
WITH 
CTE1 AS (
SELECT DISTINCT [Code], [Manager], 
(   SELECT TOP 1 Employee 
    FROM [dbo].[table] t2 
    WHERE t1.Code = t2.Code AND t1.Manager = t2.Manager 
    ORDER BY Employee) AS [Employee]
FROM [dbo].[table] t1)
,
CTE2 AS (
        SELECT * FROM [dbo].[table]
        EXCEPT
        SELECT * FROM CTE1)

SELECT * FROM CTE1
UNION
SELECT NULL as Code, NULL as Manager, Employee
FROM CTE2
ORDER BY Employee 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-11T15:24:00.087

我的 SQL*Plus 有点生疏，但如果这是您正在使用的工具，那么它应该相当简单，但使用`BREAK`命令。

正如其中一条评论中提到的那样，最好将这留给您的报告工具，而不是在实际的 SQL 中执行，因为没有所有值的单个行在结果集的上下文之外没有任何意义。

```
BREAK on code on manager

SELECT code, manager, employee
FROM yourTable y
order by code, manager; 
```

请不要说我的 SQL*Plus 有点生锈，所以这可能无法完全正常工作，但`BREAK`可以[在 Oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch6.htm#sthref1252)中找到该命令的详细信息。

# android - 为什么 java.lang.IllegalStateException: no transaction pending 以及如何解决

> ID：10103856
> 
> 赞同：3
> 
> 时间：2012-04-11T10:07:22.697
> 
> 标签：android

我开发了一个 android 应用程序。它适用于我们的设备和大多数设备。但是一些用户发送了错误报告。

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:200)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019)
Caused by: java.lang.IllegalStateException: no transaction pending
at android.database.sqlite.SQLiteDatabase.endTransaction(SQLiteDatabase.java:610)
at com.footy.fixture.FixtureActivity$ProgressTask.doInBackground(FixtureActivity.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:185)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 
```

为什么某些设备会发生这种情况。这是哪种类型的错误？...我该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:10:23.620

你`SQLiteDatabase.endTransaction()`没有先打电话就打电话了`SQLiteDatabase.beginTransaction()`。所以你试图关闭一个不存在的交易。检查您的代码，或者如果您看不出有什么问题，请在此处发布相关代码段。

# java - 将文件添加到 ZIP 文件

> ID：10103861
> 
> 赞同：1
> 
> 时间：2012-04-11T10:07:32.287
> 
> 标签：java, zip, directory, fileinputstream, zipoutputstream

我正在尝试将一些文件添加到 ZIP 文件中，它会创建文件但不会向其中添加任何内容。代码 1：

```
String fulldate = year + "-" + month + "-" + day + "-" + min;

File dateFolder = new File("F:\\" + compname + "\\" + fulldate);
dateFolder.mkdir();

String zipName = "F:\\" + compname + "\\" + fulldate + "\\" + fulldate + ".zip";

zipFolder(tobackup, zipName); 
```

我的功能：

```
public static void zipFolder(File folder, String name) throws Exception {
    byte[] buffer = new byte[18024];

    ZipOutputStream out = new ZipOutputStream(new FileOutputStream(name));
    FileInputStream in = new FileInputStream(folder);

    out.putNextEntry(new ZipEntry(name));

    int len;

    while((len = in.read(buffer)) > 0) {
        out.write(buffer, 0, len);
    }

    out.closeEntry();
    in.close();
    out.close();
} 
```

**编辑：**我发现了问题，只是无法将文件从 C:\ 驱动器写入 F:\ 驱动器中的 ZIP

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T10:14:47.193

您不能压缩文件夹，只能压缩文件。要压缩文件夹，您必须手动添加所有子文件。我写了这个类来完成这项工作。你可以免费拥有它:)

用法是这样的：

```
List<File> sources = new ArrayList<File>();
sources.add(tobackup);
Packager.packZip(new File(zipName), sources); 
```

这是课程：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.List;
import java.util.zip.Deflater;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class Packager
{
    public static void packZip(File output, List<File> sources) throws IOException
    {
        System.out.println("Packaging to " + output.getName());
        ZipOutputStream zipOut = new ZipOutputStream(new FileOutputStream(output));
        zipOut.setLevel(Deflater.DEFAULT_COMPRESSION);

        for (File source : sources)
        {
            if (source.isDirectory())
            {
                zipDir(zipOut, "", source);
            } else
            {
                zipFile(zipOut, "", source);
            }
        }
        zipOut.flush();
        zipOut.close();
        System.out.println("Done");
    }

    private static String buildPath(String path, String file)
    {
        if (path == null || path.isEmpty())
        {
            return file;
        } else
        {
            return path + "/" + file;
        }
    }

    private static void zipDir(ZipOutputStream zos, String path, File dir) throws IOException
    {
        if (!dir.canRead())
        {
            System.out.println("Cannot read " + dir.getCanonicalPath() + " (maybe because of permissions)");
            return;
        }

        File[] files = dir.listFiles();
        path = buildPath(path, dir.getName());
        System.out.println("Adding Directory " + path);

        for (File source : files)
        {
            if (source.isDirectory())
            {
                zipDir(zos, path, source);
            } else
            {
                zipFile(zos, path, source);
            }
        }

        System.out.println("Leaving Directory " + path);
    }

    private static void zipFile(ZipOutputStream zos, String path, File file) throws IOException
    {
        if (!file.canRead())
        {
            System.out.println("Cannot read " + file.getCanonicalPath() + " (maybe because of permissions)");
            return;
        }

        System.out.println("Compressing " + file.getName());
        zos.putNextEntry(new ZipEntry(buildPath(path, file.getName())));

        FileInputStream fis = new FileInputStream(file);

        byte[] buffer = new byte[4092];
        int byteCount = 0;
        while ((byteCount = fis.read(buffer)) != -1)
        {
            zos.write(buffer, 0, byteCount);
            System.out.print('.');
            System.out.flush();
        }
        System.out.println();

        fis.close();
        zos.closeEntry();
    }
} 
```

享受！

**编辑**：要检查程序是否仍然忙，您可以添加我用 (*) 标记的三行

**编辑 2**：尝试新代码。在我的平台上，它运行正确（OS X）。我不确定，但是，AppData 中 Windows 中的文件可能存在一些有限的读取权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:22:30.560

另请参阅[ZeroTurnaround 的 Zip 库](http://zeroturnaround.com/blog/zeroturnaround-releases-yazlj-yet-another-zip-library-for-java/)。它具有以下特点（引文）：

*   递归地打包和解包目录
*   遍历 ZIP 条目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-28T13:20:55.420

我将使用 Java 7 NIO [FileSystem](https://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html)添加另一种方式。它使用了 JAR 文件实际上是 ZIP 的事实：

```
static public void addToZip(Path zip, Path file) throws IOException {
    Map<String,String> env = new HashMap<>();
    env.put("create", "false"); // We don't create the file but modify it

    URI uri = URI.create("jar:file:"+zip.toString());
    try (FileSystem zipfs = FileSystems.newFileSystem(uri, env)) {
        Path f = zipfs.getPath(file.getFileName().toString());
        Files.copy(file, f, StandardCopyOption.REPLACE_EXISTING);
    }
} 
```

# html - 如何判断表单提交将/已发送什么请求？

> ID：10103863
> 
> 赞同：1
> 
> 时间：2012-04-11T10:07:44.123
> 
> 标签：html, google-chrome

在 Chrome 中，当我提交一个简单的 HTML 表单时，我想确切地查看（或最好将）发送的内容。即使表单使用 POST，我仍然可以通过将这些参数编码为 URL 来重现提交吗？

例如

```
<form action="profile.php?userid=123" method="post">
  <input type="submit" class="button" value="Yes" name="confirm">
  <input type="submit" class="button" value="No" name="deny">
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:10:16.610

按 Ctrl + Shift + J 或 Ctrl + Shift + C 打开 Chrome 开发者工具，然后切换到网络选项卡。它准确地显示了您想要的内容。

为此的屏幕截图：

![网络选项卡](../Images/f7db2d12ae29198c4e3b8066c1bdc227.png)

# c++ - 如何在 linux 上获取正在运行的应用程序路径？

> ID：10103867
> 
> 赞同：1
> 
> 时间：2012-04-11T10:08:11.663
> 
> 标签：c++, linux

要获取我发现的当前目录：

```
 if (!getcwd(cCurrentPath, sizeof(cCurrentPath) / sizeof(char))) {
    lililog.log(LILILog::error,"Error getting current directory path");
  } 
```

但我需要获取正在运行的应用程序的目录。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:12:59.017

非常不便携的解决方案：阅读 symlink `/proc/self/exe`。

# windows-phone-7 - Windows Phone 7 - 我想通过编程获得夏令时偏移

> ID：10103868
> 
> 赞同：0
> 
> 时间：2012-04-11T10:08:14.693
> 
> 标签：windows-phone-7

我想在我的 Windows Phone 应用程序中有一个功能，我需要查看时区的日光设置当前是打开还是关闭。我可以获取手机中设置的时区的详细信息，但我想要的是我可以获取我通过或设置的任何时区的详细信息。

例如，如果我通过时区“南极洲/帕尔默”，我应该能够找到当前日光设置是打开还是关闭。我尝试了几件事，但找不到任何东西。我不想使用任何 web api 来给我这个。

是否有任何设施可以通过代码设置时区以获取结果，然后将其恢复为原始或其他解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:17:43.517

[`IsDaylightSavingTime`方法](http://msdn.microsoft.com/en-us/library/bb460642%28v=vs.95%29.aspx)有：

> `TimeZoneInfo`指示指定的日期和时间是否在当前对象所在时区的夏令时范围内。

它要求您拥有一个`TimeZoneInfo`对象，但您表明您已经拥有该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:12:24.017

> 例如，如果我通过时区“南极洲/帕尔默”，我应该能够找到当前日光设置是打开还是关闭。

对我来说，这看起来像是 zoneinfo/tzdb/Olsen 时区 ID，而不是 Windows 通常使用的。我的[Noda Time](http://noda-time.googlecode.com)项目使用 tzdb 并且能够为您获取该信息，但我们目前没有构建 Silverlight 版本 - 我们可能*需要*做一些工作，但这并非易事。补丁是受欢迎的，当然......

您确定要使用 tzdb ID，还是合适的 Windows ID 适合您？不幸[`TimeZoneInfo.FindSystemTimeZoneById`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.findsystemtimezonebyid.aspx)的是，Silverlight 似乎不支持 :(

# php - 函数中的引用参数（&$a），好还是坏？

> ID：10103878
> 
> 赞同：0
> 
> 时间：2012-04-11T10:08:58.093
> 
> 标签：php, function, parameter-passing, pass-by-reference

我们编写了两个验证函数，一个如下所示（它一次获取所有字段）：

```
function check_fields(&$arr,&$msg,$types,$lens,$captions,$requireds) {} 
```

另一个函数如下所示：

```
function is_valid($field=NULL,$type=0 ,$length=0,$required=true) {} 
```

第一个函数有几行代码，并且大大减少了代码行（大约 30-35 行甚至更多），另一方面，没有引用的第二个函数增加了代码行（大约 30-35 行甚至更多）。

我们必须为要验证的每个字段调用第二个函数，但第一个函数 ( `check_fields`) 反之亦然。我很久以前在一篇文章中读到，从性能的角度来看，具有引用参数的函数很糟糕。

现在我们不知道该使用哪个函数。从性能的角度来看，哪个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:33:40.063

使用更易于使用且更易于维护的解决方案。您在谈论微优化，这几乎没有用。

* * *

使用引用，因为在您的情况下，它是更简单的解决方案并且需要更少的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:16:36.750

好吧，我想在一些网络搜索后我自己得到了答案：

[不要使用 PHP 引用](http://schlueters.de/blog/archives/125-Do-not-use-PHP-references.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T17:10:58.000

当你打电话时，你只记得这一点：

```
 <?php 
    $a = 1 ;
    echo "As initial, the real 'a' is..".$a."<br/>";
    $b = &$a ; // it's meaning $b has the same value as $a, $b = $a AND SO $a = $b (must be)
    $b += 5;
    echo "b is equal to: ".$b." and a equal to: ".$a."<br/>";
    echo " Now we back as initial, when a=1... (see the source code) <br/>";
    $a = 1 ;
    echo "After we back : b is equal to: ".$b." and a equal to: ".$a."<br/>";
    echo "Wait, why b must follow a? ... <br/> ..what about if we change b alone? (see the source code)<br/>";
    $b = 23; 
    echo "After we change b alone, b equal to: ".$b." and a equal to: ".$a."<br/>";
    echo " WHAT ?? a ALSO CHANGED ?? a and b STICK TOGETHER?!! </br>" ;
    echo "to 'clear this, we use 'unset' function on a (see the source code)<br/> ";
    unset($a);
    $b = 66;
    $a = 1;
    echo "Now, after unset,b is equal to: ".$b." and a equal to: ".$a."<br/>"; 
    ?> 
```

输出将是：

```
As initial, the real 'a' is..1
After the Reference operator...(see the source code)
b is equal to: 11 and a equal to: 11
Now we back as initial... (see the source code) 
After we back : b is equal to: 1 and a equal to: 1
Wait, why b must follow a? ... 
..what about if we change b alone? (see the source code)
After we change b alone, b equal to: 23 and a equal to: 23
WHAT ?? a ALSO CHANGED ?? a and b STICK TOGETHER?!! 
to 'clear this, we use 'unset' function on a (see the source code)
Now, after unset,b is equal to: 66 and a equal to: 1 
```

审查：

为什么发生了`$a`变化？那是因为`&`（与号运算符）`&`作为参考变量，因此它存储在“临时内存”中。当您初始化时`$b= &$a`，请参阅我的评论`$b = $a` *，* `$a = $b`这意味着每当您修改时`$b`，`$a`也被修改，反之亦然。*他们被锁链了*！这就是引用运算符的简单含义。

刚开始可能会觉得很困惑，但是一旦你成为这方面的专家，你就可以处理这个操作符来做一个这样的“切换”功能：

```
<?php

function bulbswitch(&$switch)
{
    $switch = !$switch;    

}

function lightbulb($a)
{
    if ($a == true) { echo 'a is On <br/>';}
    else { echo 'a is Off <br/>';}
}

$a = true ;
echo 'At the begining, a is On, then.... <br/>';

bulbswitch($a);
lightbulb($a);
bulbswitch($a);
lightbulb($a);
bulbswitch($a);
lightbulb($a);
bulbswitch($a);
lightbulb($a);
bulbswitch($a);
lightbulb($a);
bulbswitch($a);
lightbulb($a);
?> 
```

输出将是：

```
At the begining, a is On, then.... 
a is Off 
a is On 
a is Off 
a is On 
a is Off 
a is On 
```

# javascript - 在加载时停止显示 Google 地图上的 InfoWindow

> ID：10103880
> 
> 赞同：2
> 
> 时间：2012-04-11T10:09:07.460
> 
> 标签：javascript, google-maps

嗨，我正在尝试将 gmap 与我的网站集成。但默认情况下，信息窗口是打开的。我想在单击标记后打开信息窗口。如何在页面加载时关闭信息窗口？

```
function initialize() {
    if (GBrowserIsCompatible()) {
        var map = new GMap2(document.getElementById("map_canvas"));
        map.setCenter(new GLatLng(22.4642600, 70.0690540), 6);
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());
        map.addMapType(G_SATELLITE_3D_MAP);
        for (var i = 0; i < newpoints.length; i++) {
            var point = new GPoint(newpoints[i][1], newpoints[i][0]);
            var popuphtml = newpoints[i][4];
            var post_url = newpoints[i][5];
            var addr = newpoints[i][6];
            var marker = createMarker(point, newpoints[i][2], popuphtml, post_url, addr);
            map.addOverlay(marker);
        }
    }
}

function createMarker(point, icon, popuphtml, post_url, addr) {
    var popuphtml = '<div id="popup">' + popuphtml + '<div><a href=' + post_url + '>Link</a></div></div>';
    var marker = new GMarker(point);
    marker.openInfoWindowHtml(popuphtml);
    GEvent.addListener(marker, "click", function () {
        marker.openInfoWindowHtml(popuphtml);
    });
    return marker;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:17:11.083

删除此行

```
marker.openInfoWindowHtml(popuphtml); 
```

所以它变成了

```
function createMarker(point, icon, popuphtml, post_url, addr) {
    var popuphtml = '<div id="popup">' + popuphtml + '<div><a href=' + post_url + '>Link</a></div></div>';
    var marker = new GMarker(point);
    GEvent.addListener(marker, "click", function () {
        marker.openInfoWindowHtml(popuphtml);
    });
    return marker;
} 
```

您正在`openInfoWindowHtml`立即调用该方法......现在它仅`click`在标记事件发生时调用

## 笔记

您正在使用 Google Maps V2 ...这是来自 google 的与 V2 相关的消息

> 注意：Google Maps Javascript API 第 2 版已于 2010 年 5 月 19 日正式弃用。根据我们的弃用政策，V2 API 将继续工作，但我们鼓励您将代码迁移到 Maps Javascript API 的第 3 版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:16:46.417

删除`marker.openInfoWindowHtml(popuphtml);`之后`var marker = new GMarker(point);`

# android - 从 Android 执行 Windows 运行命令或某些 Windows 批处理

> ID：10103881
> 
> 赞同：1
> 
> 时间：2012-04-11T10:09:12.423
> 
> 标签：android, windows, batch-processing, remote-desktop

我想要一些信息。我们可以从 android 设备执行 windows 运行命令吗？例如，我想使用我的 android 设备在 PC 中打开一个文件，例如 Run>C:\abc.exe。

或者您可以说我想从我的 android 设备运行放置在 PC 中的批处理（Exe 文件）。

提前致谢。

# git - 混帐日志 显示所有日志而不是指定的

> ID：10103882
> 
> 赞同：3
> 
> 时间：2012-04-11T10:09:13.120
> 
> 标签：git

git-log 手册页说：

> git log [options] [since..until] [[--] path...]
> 
> 因为..until 仅显示指定的两个提交之间的提交。当省略或省略时，默认为 HEAD，即当前分支的尖端。有关拼写 and 的更完整列表，请参阅 gitrevisions(7)。

当我为 repo 的一些参考做 git-log 时，我得到了漏洞日志：

```
$ git log HEAD^ HEAD
commit 1e939a4f7097efd03b8a66607b561c5f698b3082
Author: Vasiliy <dixel@unen.(none)>
Date:   Wed Apr 11 13:58:03 2012 +0400

    3 commit

commit 1da7dcfc1920130f3de9a7c6b8f02d68923d12b7
Author: Vasiliy <dixel@unen.(none)>
Date:   Wed Apr 11 13:57:50 2012 +0400

    second commit

commit ee8d884f5fb364f667f8dcbf27b23afb3a4eeb85
Author: Vasiliy <dixel@unen.(none)>
Date:   Wed Apr 11 13:57:31 2012 +0400

    first commit

$ git branch
* master 
```

我应该怎么做才能显示自某些修订以来和直到某些修订的日志？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T10:12:43.963

你刚才不是错过了`..`吗？

```
git log HEAD^..HEAD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:40:16.433

如果你使用`git log HEAD~ HEAD`显示来自 HEAD 和 HEAD 的所有内容~

`git log HEAD~..HEAD`表示 git log 包括 HEAD~ 并最多提交 HEAD

# javascript - 使用 JS/jQuery 从 JsonArray 中提取数据

> ID：10103886
> 
> 赞同：3
> 
> 时间：2012-04-11T10:09:20.937
> 
> 标签：javascript, jquery, json, arrays

我有一个类似这样的 JsonArray。

```
var json_array = [{ "text": "id", "size": 4}, { "text": "manifesto", "size": 4}, { "text": "also", "size": 4}, { "text": "leasing", "size": 4}, { "text": "23", "size": 4}]; 
```

有没有办法让我使用 Javascript/jQuery 在另一个数组中获取这个 json_array 的所有“文本”属性？

喜欢：

```
var t_array = ["id","manifesto","also"....] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T10:13:40.003

您可以使用[$.map()](http://api.jquery.com/jQuery.map/)将现有数组中的相关信息投影到新数组中：

```
var t_array = $.map(json_array, function(item) {
    return item.text;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:11:43.720

```
var t_array = [];

for (var i=0; i< json_array.length; i++)
    t_array.push(json_array[i].text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:12:15.217

我认为你需要`t_array`通过循环来构建`json_array`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T10:13:20.410

就像是：

```
var t_array = [];
$.each(json_array,function(i,o) {
  t_array.push(o.text);
}) 
```

[http://jsfiddle.net/bouillard/2c66t/](http://jsfiddle.net/bouillard/2c66t/)

# c++ - 仅获取日志文件的主要名称部分

> ID：10103888
> 
> 赞同：1
> 
> 时间：2012-04-11T10:09:52.510
> 
> 标签：c++, file, substr

我有一个存储在字符串中的文件名作为 logfileName，假设我传递了名称，`"james.log"`那么我只需要获取`"james"`我尝试使用的部分，例如：-

```
int length = logfileName.size(); //calculates the size 
```

现在我需要一些代码，只将`"james"`部分存储在字符串中以供以后使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:12:35.673

```
std::string name = logfileName.substr(0, logfileName.find('.')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:32:19.727

如果您的平台是 Windows 并且可移植性对您来说不是问题，那么您可以考虑使用[splitpath](http://msdn.microsoft.com/en-us/library/e737s6tf%28v=vs.71%29.aspx)功能。

# c# - 有什么方法可以在监视窗口中显示/比较对象引用？

> ID：10103891
> 
> 赞同：7
> 
> 时间：2012-04-11T10:10:02.183
> 
> 标签：c#, reference, visual-studio-debugging

在调试时，我有时会发现需要在监视窗口中比较对象引用，以查看两个变量是否实际上引用了同一个对象。

使用 C++ 和指针这很容易，但是有没有办法使用 C# 引用来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T10:21:03.703

在 Watch 窗口中实际上有一个用于比较对象的内置功能，不需要您直接调用任何函数。它在右键菜单中为“制作对象ID”

![制作对象 ID](../Images/910cb999b8f854f3f2ed8b2cd9f295e3.png)

它将用 ID 标记对象，然后您可以添加第二个对象并用 id 标记它。如果这些对象是相同的引用，那么它们将具有相同的 ID。这使您可以在调试时查看它们是否/何时更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T10:11:20.697

```
object.ReferenceEquals(objA, objB) 
```

# iphone - 如何一起构建 RestKit 和 facebook-ios-sdk？

> ID：10103892
> 
> 赞同：1
> 
> 时间：2012-04-11T10:10:08.727
> 
> 标签：iphone, ios, xcode4.2, restkit, facebook-ios-sdk

我的项目与[RestKit](http://restkit.org/)和 facebook-ios-sdk 链接，Xcode 给出错误：

```
Duplicate symbol _OBJC_CLASS_$_SBJSON in .../facebook-ios-sdk/libfacebook_ios_sdk.a(SBJSON.o) and  .../Debug-iphonesimulator/MyProject.build/Objects-normal/i386/SBJSON.o for architecture i386 
```

我该如何解决？

# silverlight - 使用 WP7 XNA 项目中的 Silverlight 控件

> ID：10103898
> 
> 赞同：0
> 
> 时间：2012-04-11T10:10:23.487
> 
> 标签：silverlight, windows-phone-7, xna

我在 WP7 上有一个 XNA 项目。我想使用 PhotoCamera 类访问相机原始数据。我想获得它的唯一方法是使用名为 VideoBrush 的 Silverlight 控件。有什么方法可以在不创建 xna-silverlight 混合项目的情况下使用它？

我不想使用 Silverright 的屏幕导航系统。

我尝试以编程方式创建 PhotoCamera、VideoBrush 和 UIElementRenderer 类，但问题是当我创建新的 UIElementRenderer 时出现 NullReferenceException 错误。我执行以下操作：

```
UIElementRenderer slRender;
Grid element;

element = new Grid();

slRender = new UIElementRenderer(element, 800, 480); 
```

关于如何解决它的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:18:28.827

您必须使用 Silverlight 互操作层来访问实时摄像机源。XNA 不直接支持它。

# java - 如何使用图像的现有像素制作正确的直方图？

> ID：10103899
> 
> 赞同：0
> 
> 时间：2012-04-11T10:10:28.430
> 
> 标签：java, image-processing, histogram

我使用 java swing 在 netbeans 平台上制作应用程序。我创建特定图像的直方图。但它与 ImageJ 软件中该图像的直方图并不完全相同。那么，我怎样才能获得正确的直方图，或者有人可以向我建议我使用哪种方法来获取图像的精确像素并绘制直方图？

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.media.jai.JAI;
import javax.media.jai.PlanarImage;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class FinalHistogram extends JPanel {

    int[] bins = new int[256];

    FinalHistogram(int[] pbins) {
        bins = pbins;
        repaint();
}

@Override
protected void paintComponent(Graphics g) {

        for (int i = 0; i < 256; i++) {

            System.out.println("bin[" + i + "]===" + bins[i]);
            g.drawLine(200 + i, 300, 200 + i, 300 - (bins[i]) / 70);
        }

}

public static void main(String[] args) throws IOException {
        JFrame frame = new JFrame();
        frame.setSize(500, 500);
        int[] pbins = new int[256];
        int[] sbins = new int[256];

        PlanarImage image = JAI.create("fileload", "C:\\aimages\\11309.jpg");

        BufferedImage bi = image.getAsBufferedImage();
        System.out.println("tipe is          " + bi.getType());
        int[] pixel = new int[3];

        int k = 0;
        Color c = new Color(k);
        Double d = 0.0;
        Double d1;
        for (int x = 0; x < bi.getWidth(); x++) {
            for (int y = 0; y < bi.getHeight(); y++) {
                pixel = bi.getRaster().getPixel(x, y, new int[3]);
                k = (int) ((pixel[0]) + ( pixel[1]) + (pixel[2]));
                k=k/3;
                sbins[k]++;

            }

        }
        System.out.println("copleted" + d + "--" + k);
        frame.add(new FinalHistogram(sbins));
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:40:35.893

用于创建直方图的黑白图像的伪代码：

```
lookup_table[256]  //integers. 

for i in 256 do
  lookup_table[i] = 0

for i in image.size
    lookup_table[ pixel.value ] = lookup_table[ pixel.value ] + 1; 
```

通常要可视化直方图，您必须使用一种称为“分箱”的技术，因为在大图像中，您有很多带有灰色阴影的像素，并且屏幕上无法显示 1:1 的表示。

# android - 如何在Android中获得圆形

> ID：10103900
> 
> 赞同：57
> 
> 时间：2012-04-11T10:10:37.460
> 
> 标签：android, drawable, shape

我将如何在 Android 中实现圆形，如下所示，通过 Android 形状可绘制：

![在此处输入图像描述](../Images/22c03b6bb9aaa753648e616bcfe868b5.png)

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-04-11T10:19:20.423

您需要`drawable`在可绘制文件夹中创建一个形状，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval" >
    <gradient android:startColor="#FFFF0000" android:endColor="#80FF00FF"
        android:angle="270"/>
</shape> 
```

（对于这个例子，我将drawable保存为circle.xml，它会有一个渐变填充）

然后在您的布局中，您需要定义一个视图并将形状设置为背景：

```
<View android:layout_width="50dp"
    android:layout_height="50dp"
    android:background="@drawable/circle"/> 
```

视图定义了形状的大小和尺寸。

编辑 - 代码结果的屏幕截图

![图形视图](../Images/898cb60d3f9827dfa2e4db3937da4eb3.png)

![代码图像](../Images/2ffa51301818df429ffe051330271713.png)

# jquery - 使用jQuery遍历html文件的目录？

> ID：10103904
> 
> 赞同：1
> 
> 时间：2012-04-11T10:10:56.647
> 
> 标签：jquery

我正在建立一个简单的投资组合网站，我想动态加载它；我为此使用了 jQuery 插件[pagify.js](http://cmpolis.github.com/Pagify/)。该插件的设置非常简单，如下所示：

```
$('#page_holder').pagify({ 
    pages: ['home', 'about', 'contact'], 
    default: 'home'  
}); 
```

唯一的问题是您要加载的每个页面都必须手动添加到数组中。

有没有办法遍历一个目录，并将其中的每个页面添加到数组中？因此，如果我有一个目录 /posts，包含文件 foo.html 和 bar.html，它会返回 'foo'、'bar'。

编辑：应该添加，“后端系统”（只要你可以这么称呼它）是 Jekyll，所以它只是服务器上的一堆 html 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:18:19.990

如果你使用 PHP 作为你的服务器端语言，你可以很容易地做到这一点，并将结果添加到你的 javascript 中：

```
$fileList = '';
$folder = 'posts';
$files = scandir($folder);
foreach ($files as $currentFile) {
    if (strpos($currentFile, '.html') !== FALSE) {
        $filename = str_ireplace('.html', '', $currentFile);
        $fileList .= (empty($fileList) ? '' : ', ') . "'$filename'";
    }
} 
```

现在 $fileLIst 有你的逗号分隔列表。只需在您的 JS 中使用它：

```
$('#page_holder').pagify({ 
    pages: [<?= $fileList; ?>], 
    default: 'home'  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:18:17.727

您将需要使用您的后端代码构建此 JS。这是一个PHP示例..

```
$arr = glob('slide_*.html'); //Get all files like 'slide_home.html'

//You'll need to get the array to a usable format to contain the terms 
//"home", "about", "contact", etc...    
//once its correct, and you have the default page in slot 0,
//echo the dynamic JS Code in the right place.

<?php
    echo "$('#page_holder').pagify({  ";
    echo "    pages: ['". implode("', '", $arr) ."'], ";
    echo "    default: '".$arr[0]."'  ";
    echo "});  ";
?> 
```

或者，您可以让您的 PHP 页面像下面提到的 @Blowsie 一样提供数组。底线是您要么需要在某处手动添加一些东西，要么需要使用后端编码平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:12:38.447

您不能使用 javascript 访问文件夹中的目录或列出文件。这是出于安全原因。

但是，可以使用 php、asp.net 等框架列出文件

* * *

为了使 JavaScript 中的事情变得更容易，您可以在 json 文件中包含一组页面，您可以调用每个页面。

```
$.getJSON('test.json', function(data) {
   $('#page_holder').pagify({ 
       pages: data, 
       default: 'home'  
   }); 
}); 
```

json文件：

```
['home', 'about', 'contact'] 
```

# backbone.js - 如果参数传递给 fetch，BackboneJS 使用 jasmine 测试

> ID：10103907
> 
> 赞同：0
> 
> 时间：2012-04-11T10:11:17.070
> 
> 标签：backbone.js, jasmine

我有一个主干集合，我需要将一些参数传递给 .fetch({data : {gender : 'male'}})。有没有办法用茉莉花测试参数是否通过？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:22:28.130

您可能可以通过使用下面示例中的方法来实现这一点。 **请注意**，以下代码将拦截 fetch-call 并返回，调用不会到达服务器。如果您想拥有服务器端仿真，则需要使用 Sinon 或其他类似的方法。

```
 describe("People collection" function() {
        var people = Backbone.Collection.extend({
            // ...
        });

        function searchPeople(people, data ) {
            people.fetch(data);
        }

        it("must verify the fetch parameters!", function(){
            var param = {data : {gender : 'male'}};
            // Set up the spy.
            spyOn(people, 'fetch').andReturn(); // Warning: this makes the call synchronous, Fetch actually won't go through!

            // Now perform the operation that would invoke Collection.fetch.
            searchPeople(people, param);

            expect(people.fetch).toHaveBeenCalled();            // Verifies the fetch was actually called.
            expect(people.fetch).toHaveBeenCalledWith(param);   // Verifies that the fetch was called with specified param.

        });
    }); 
```

# session - Symfony2 & PdoSessionStorage：如何在数据库会话表中添加字段？

> ID：10103910
> 
> 赞同：1
> 
> 时间：2012-04-11T10:11:20.020
> 
> 标签：session, symfony, pdo

我正在使用 FOSUserBundle 来管理用户，并且会话保存在数据库中，这要归功于 PdoSessionStorage。

我想在我的会话表中添加字段：

*   user_id ：这是一个引用登录用户 ID 的外键
*   ip : 登录用户的IP地址
*   end_time ：用户退出的时间

这是我的 app/config/config.yml 文件：

```
framework:
    session:
        default_locale: %locale%
        auto_start: true
        lifetime: 72000
        storage_id: session.storage.pdo

parameters:
    pdo.db_options:
        db_table: session
        db_id_col: session_id
        db_data_col: value
        db_time_col: time

services:
    doctrine.dbal.default.wrapped_connection:
        factory_service: doctrine.dbal.default_connection
        factory_method: getWrappedConnection
        class: PDO
    session.storage.pdo:
        class:     Symfony\Component\HttpFoundation\SessionStorage\PdoSessionStorage
        arguments: [@doctrine.dbal.default.wrapped_connection, %session.storage.options%, %pdo.db_options%] 
```

我怎样才能做到这一点 ？

我需要扩展 PdoSessionStorage 类吗？

如果是这样，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:15:03.420

只需扩展`PdoSessionStorage`以添加您的信息。您可以自由地将任何依赖项添加到 `session.storage.pdo`.

关于用户 ID，您不必这样做，它已经在会话数据中（您必须对其进行解码）。

# php - Symfony 2.0 中的独立安全组件

> ID：10103912
> 
> 赞同：12
> 
> 时间：2012-04-11T10:11:24.087
> 
> 标签：php, security, symfony, acl

我正在尝试将 Symfony 2.0 ACL 添加到我的无框架 PHP 应用程序中。由于缺乏关于如何将安全组件作为独立组件使用的文档，我完全感到困惑，并且遇到了一些问题：首先要包含什么类？要实例化哪个对象？是否可以在没有模型和控制器的情况下使用？

关于如何开始或任何好的链接的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T20:56:10.000

Silex的[SecurityServiceProvider](https://github.com/fabpot/Silex/blob/master/src/Silex/Provider/SecurityServiceProvider.php)可能是一个不错的起点，因为它将所有基本组件服务集成在一个文件中。虽然很大，但您可能会发现它比 Symfony2 的 SecurityBundle 更容易理解。

为了保持理智，您应该考虑使用服务容器来组织所有这些对象。在前面提到的提供程序类中，Silex Application 类是一个[Pimple](https://github.com/fabpot/pimple)实例，因此您应该能够通过适度的努力将其移植为独立的 Pimple。我看到这一点是因为将 Pimple 服务容器集成到您的应用程序中应该比采用 Silex 框架更具侵入性。

一旦您使基本的安全组件类工作，您应该能够遵循[ACL 文档](http://symfony.com/doc/current/cookbook/security/acl.html)并根据需要向您的容器添加其他服务。此时，SecurityBundle 的 ACL 特定部分可能会有所帮助，因为您可以专注于相关位。请记住，文档中有多个ACL[手册条目](http://symfony.com/doc/current/cookbook/security/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:21:18.757

**首先要包括什么类？**

如果不是全部，您很可能需要至少包含部分安全核心，然后是您想要使用的 ACL 实现。您可以查看 ACL 实现开头列出的依赖项并了解它们扩展了什么。例如，`ACL/DBAL`在标头中调用了以下依赖项：

```
namespace Symfony\Component\Security\Acl\Dbal;

use Doctrine\DBAL\Driver\Connection;
use Doctrine\DBAL\Driver\Statement;
use Symfony\Component\Security\Acl\Model\AclInterface;
use Symfony\Component\Security\Acl\Domain\Acl;
use Symfony\Component\Security\Acl\Domain\Entry;
use Symfony\Component\Security\Acl\Domain\FieldEntry;
use Symfony\Component\Security\Acl\Domain\ObjectIdentity;
use Symfony\Component\Security\Acl\Domain\RoleSecurityIdentity;
use Symfony\Component\Security\Acl\Domain\UserSecurityIdentity;
use Symfony\Component\Security\Acl\Exception\AclNotFoundException;
use Symfony\Component\Security\Acl\Exception\NotAllAclsFoundException;
use Symfony\Component\Security\Acl\Model\AclCacheInterface;
use Symfony\Component\Security\Acl\Model\AclProviderInterface;
use Symfony\Component\Security\Acl\Model\ObjectIdentityInterface;
use Symfony\Component\Security\Acl\Model\PermissionGrantingStrategyInterface; 
```

但是您可能需要检查每个列出的依赖项，并加载它们。

我会回溯依赖关系，并跟踪需要什么。将这些类剔除到一个单独的位置，以便您只拥有所需的内容，并使用一些错误捕获来确定您拥有一切。

**要实例化哪个对象？**

您的 ACL。如果所有依赖项都已确定并加载，那么您应该能够实例化 ACL 类对象。

**是否可以在没有模型和控制器的情况下使用？**

老实说，我不确定在没有大量工作的情况下在 S2 之外使用 ACL 是否可行，但如果你可以用它需要的一切来实例化它，那么你应该能够在没有 MVC 模型的情况下使用该对象。

不幸的是，根据我对 S2 的理解，它是一个完整的堆栈框架，并且意味着要么全有，要么全无。但如果我要尝试让它发挥作用，这就是我要做的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:25:55.150

如果您想了解如何使用 symfony2 组件以及如何将其集成到您的项目中，请阅读[Fabien Potencier 博客“创建您自己的框架”](http://fabien.potencier.org/article/50/create-your-own-framework-on-top-of-the-symfony2-components-part-1) 帖子，这肯定会帮助您了解框架的核心以及如何在您的项目中引导 symfony2 组件项目

symfony 网站上 也有很好的[ACL文档](http://symfony.com/doc/current/cookbook/security/acl.html)

# c++ - C++ Win32窗口背景不重绘

> ID：10103918
> 
> 赞同：1
> 
> 时间：2012-04-11T10:11:33.713
> 
> 标签：c++, winapi

在我尝试创建自己的 win32 包装器时，我遇到了这个问题。每当我调整窗口大小时，背景都不会重绘（[http://i44.tinypic.com/23k855.png](http://i44.tinypic.com/23k855.png)白色应该是背景，但是当我缩小窗口时它会变黑）

我的部分课程：

```
void Register(  tstring _className,
                    tstring _menuName,
                    WNDPROC w32proc,
                    tstring hIcon,
                    HICON hIconSmall,
                    LPCTSTR hCursor,
                    HBRUSH hBrush=(HBRUSH)GetStockObject(WHITE_BRUSH),
                    UINT windowStyle = CS_HREDRAW | CS_VREDRAW,
                    int classExtraBytes=NULL,
                    int windowExtraBytes=NULL
                    )
    {
        className = _className; 
        menuName = _menuName;

        wcex.cbSize         = sizeof(WNDCLASSEX);
        wcex.style          = windowStyle;
        wcex.lpfnWndProc    = w32proc;
        wcex.cbClsExtra     = classExtraBytes;
        wcex.cbWndExtra     = windowExtraBytes;
        wcex.hInstance      = this->hInst;
        wcex.hIcon          = LoadIcon(this->hInst,hIcon.c_str());
        wcex.hCursor        = LoadCursor(NULL,hCursor);
        wcex.hbrBackground  = hBrush;
        wcex.lpszMenuName   = this->menuName.c_str();
        wcex.lpszClassName  = this->className.c_str();
        wcex.hIconSm        = hIconSmall;

        RegisterClassEx(&wcex);
    }

    bool Create(tstring _windowTitle,
                DWORD windowStyle,
                int width=CW_USEDEFAULT,
                int height=CW_USEDEFAULT,
                int xPos=CW_USEDEFAULT,
                int yPos=CW_USEDEFAULT,
                HWND parent=NULL,
                LPVOID lpParam=NULL,
                HMENU menu=NULL
                )
        {
        windowTitle = _windowTitle;

        handle = CreateWindow(this->className.c_str(), this->windowTitle.c_str(), windowStyle,
                             xPos, yPos, width, height, parent, menu, this->hInst, lpParam);
        if (!this->handle)
            return false;

        Show();
        return true;
    }

    bool Show(int cmd=SW_SHOWNORMAL)
    {
        if( !ShowWindow(this->handle, cmd) || !UpdateWindow(this->handle) )
            return false;
        return true;
    } 
```

我的窗口过程：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    PAINTSTRUCT ps;
    HDC hdc;

    switch (message)
    {
    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        EndPaint(hWnd, &ps);
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
} 
```

以及我如何使用一切：

```
mainwin = new Window(hInstance);
mainwin->Register(TEXT("test"),TEXT("test"),WndProc,TEXT("small.ico"),NULL,IDC_ARROW,NULL,NULL,NULL);
mainwin->Create(TEXT("test window"),WS_OVERLAPPEDWINDOW );
mainwin->Show(nCmdShow);
while(mainwin->GetMsg() > 0)
    mainwin->TranslateDispatchMsg(); 
```

一些帮助将不胜感激:)

ps：我也尝试处理 WM_PAIN,WM_SIZE,WM_SIZING 消息来调用 UpdateWindow 和/或 ShowWindow 但没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:30:22.377

您正在传递`NULL`给. 这就是调整大小时不重绘背景的原因。`hBrush``Register`

我怀疑您打算使用您的可选参数并像这样调用它：

```
mainwin->Register(TEXT("test"), TEXT("test"), WndProc, TEXT("small.ico"),
    NULL, IDC_ARROW); 
```

# gnome - Gnome 3 总是显示 ALT+x 键盘快捷键

> ID：10103922
> 
> 赞同：4
> 
> 时间：2012-04-11T10:11:50.173
> 
> 标签：gnome, shortcuts, underline

我发现`"gtk-auto-mnemonic = 0"`应该重新打开带下划线的键盘快捷键，但在每个主题文件的末尾都`"gtk-auto-mnemonic = 0"`没有任何区别。`"gtk-auto-mnemonic = 1"`

这个建议只对 Gnome 2 有效吗？

**如何使快捷方式始终可见，而不仅仅是在按 ALT 时？**

我做到了

```
locate gtkrc | grep themes | xargs -I @ echo "echo \"gtk-auto-mnemonics = 0\" >> @" | sudo sh 
```

并验证（都用零和一，因为我都试过了）：

```
~$ locate gtkrc | grep themes | xargs grep auto
/usr/share/gimp/2.0/themes/Default/gtkrc:gtk-auto-mnemonics = 1
/usr/share/gimp/2.0/themes/Small/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Adwaita/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Adwaita/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Clearlooks/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Crux/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Default/gtk-2.0-key/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Emacs/gtk-2.0-key/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/HighContrast/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/HighContrastInverse/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Industrial/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/LowContrast/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Mist/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Raleigh/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/Redmond/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/ThinIce/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1
/usr/share/themes/bubble/gtk-2.0/gtkrc:gtk-auto-mnemonics = 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T23:37:25.827

尝试：

```
$ dconf write /org/gnome/desktop/interface/automatic-mnemonics false 
```

根据其架构：*仅在按下 Alt 键时显示助记符。用户按下 Alt 键时是否应自动显示和隐藏助记符。*.

或者，您可以使用*dconf-editor*更改该值。

您需要重新启动应用程序才能使更改生效。

# php - 静态资源被错误地重写到前端控制器 index.php

> ID：10103924
> 
> 赞同：4
> 
> 时间：2012-04-11T10:11:52.477
> 
> 标签：php, html, .htaccess, mod-rewrite, redirect

我在重写 url 时遇到了问题。以下情况正在发生：

```
http://www.example.com/scores
http://www.example.com/registreren
http://www.example.com/login 
```

这些 url 将被重定向到`index.php?route=scores`etc

这一切都很好。但是现在我在一个子目录中有模板文件，比如`images`and `stylesheet`。这些文件在

*   `template/css/style.css`
*   `images/images.png`ETC

现在所有这些文件也被重定向到`index.php?route`. 我知道前导斜杠和文件的所有链接都是绝对路径。

文件中使用了以下代码`.htaccess`：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/?$ index.php?route=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:21:22.887

尝试使用以下代码添加 RewriteBase：

```
RewriteBase / 
```

根据服务器配置，可能会`%{REQUEST_FILENAME}`在开头包含斜杠，这将产生绝对路径而不是相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-17T03:14:45.010

> ```
> RewriteCond %{REQUEST_FILENAME} !-d
> RewriteCond %{REQUEST_FILENAME} !-f 
> ```

如果静态资源被 HTML 源代码中的根相对（或绝对）URL 正确引用（并且没有冲突`BASE`元素），那么这些条件应该已经排除了静态资源被重写。

您可以向您的前端控制器添加一个条件，排除对特定文件扩展名的请求（假设您需要重写的 URL 也不共享这些文件扩展名）。

这也是任何前端控制器的推荐优化，因为它可以防止对静态资源进行不必要的文件系统检查——如果没有找到（而不是通过框架路由），它将简单地默认为 404。

例如：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|png|gif)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/?$ index.php?route=$1 [L,QSA] 
```

只有当请求的 URL 不以所述文件扩展名之一结尾时，它才会执行文件系统检查并可能将 URL 重写到`index.php`（前端控制器）。

# jquery - jQuery 分页...这是否意味着整个页面不会一次加载？

> ID：10103925
> 
> 赞同：0
> 
> 时间：2012-04-11T10:11:53.370
> 
> 标签：jquery, pagination

我有大量数据正在使用 wordpress 的页面中显示，所以我想我会搜索某种 jQuery 分页系统来拆分数据，以便仅加载可查看页面上的数据，而不是整个页面超过 1000 个帖子（这使我的浏览器崩溃：/）

但是......我只是想知道这是否真的会有所作为？我在这里找到了一个关于我想要的教程[http://web.enavu.com/tutorials/making-a-jquery-pagination-system/](http://web.enavu.com/tutorials/making-a-jquery-pagination-system/)。

这会做我想要的吗？或者只是允许一种更方便的方式来拆分数据而不解决我的页面加载问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:18:54.000

该示例无法解决您的问题，因为它仍然依赖于首先加载到页面中的所有数据（在您的情况下为 1000 个帖子），然后隐藏/显示其中的一部分。

您需要创建一种从服务器检索数据子集（例如每页 20 个）并显示它们的方法。然后，当用户请求下一页时，您需要通过 AJAX 发出新请求以从数据库中获取接下来的 20 个帖子。

这样浏览器一次只能获得 20 个帖子，不会给您带来任何问题。我不确定您是如何使用 Wordpress 实现这一点的，因为我从未使用过它。

或者，您可以为每个帖子页面发出一个全新的 HTTP 请求。我确信 Wordpress 已经具备该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:18:42.807

> 或者只是允许一种更方便的方式来拆分数据而不解决我的页面加载问题？

确切地。它仍然会从数据库中查询所有项目并将它们放入您的页面中，然后简单地隐藏它们。

您需要实现一个分页系统，该系统仅实际下载您希望为每个“页面”显示的内容。

# objective-c - 如何在 ObjectiveC 中检测图像方向和倾斜

> ID：10103930
> 
> 赞同：0
> 
> 时间：2012-04-11T10:12:11.503
> 
> 标签：objective-c, ios, opencv

我想检测图像方向和倾斜并旋转图像以准备使用 OCR 进行扫描。如何在ObjectiveC中做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:46:12.413

您可以使用支持所需操作的 openCV 以外的其他库。

首先使用腐蚀，然后使用休变换来找到与 x 轴的角度，如此处所示[OpenCV - Detect skew angle](http://felix.abecassis.me/category/opencv/page/2/)以旋转图像。

可以通过检查 OCR 库的宽度/高度（旋转 90°）和测试运行来估计方向。如果检测率较低，您可以旋转 (180°) 并再次运行 OCR。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-11T11:30:10.703

您可以使用任何可以检测文本方向的 OCR，然后您可以找到正确的图像方向...

# security - 部署在客户服务器上时如何保护 Java EE Web 应用程序代码？

> ID：10103940
> 
> 赞同：1
> 
> 时间：2012-04-11T10:12:36.790
> 
> 标签：security, jakarta-ee, deployment, obfuscation, proguard

该公司创建了一个云解决方案，但一些客户要求将应用程序托管在他们的基础设施上，这可能会导致一些严重的安全威胁，例如反编译代码。Web 应用程序使用动态框架，例如 spring、JPA、struts、DWR，这使得混淆变得非常困难（我尝试使用 Proguard）。

混淆是唯一的解决方案吗？它甚至值得吗？任何意见都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:20:31.673

最简单（也是相当标准）的事情是使其成为许可协议的一部分，他们可能不会进行逆向工程或以其他方式弄乱您的软件。这假设您信任您的业务合作伙伴会遵守合同（有人可能会争辩说这是与他们开展业务的先决条件）。

> 混淆是唯一的解决方案吗？它甚至值得吗？

如果您不能信任他们，您可以拒绝将代码部署给客户。

如果有必要以这种方式对待您的客户，则由您决定。我会假设他们有比试图扯掉你更好的事情要做。但是，如果您对此非常担心，那么纯 ASP 模型（代码永远不会离开您的服务器）似乎是您唯一的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:46:19.927

作为替代方案，您可以按照[在虚拟机文件中部署应用程序有哪些问题中的建议，以封闭虚拟设备的形式部署您的服务？](https://stackoverflow.com/questions/9928727/what-are-the-problems-of-deploying-an-application-in-a-virtual-machine-file/9929410#9929410)

# asp.net - 检测设备访问网页，ASP.net

> ID：10103943
> 
> 赞同：1
> 
> 时间：2012-04-11T10:12:47.663
> 
> 标签：asp.net, user-agent, 51degrees, device-detection

是否有任何好的库/包来检测有关访问我页面的设备的信息。例如，如果用户访问我的页面，我想检测平台、平台版本、屏幕尺寸、制造商和型号..

我已经尝试过 51Degress.mobi 但是一旦我检查了 Request.Browser.Platform 的值，该值就是“Uknown”......那是我使用我的 android-phone 的时候......这些天这不是一个不常见的平台......所以我有点失去了对它的信任……或者我做错了什么？我所做的只是使用 nuGet 安装它。

哦，是的，我想做这个服务器端..只是为了说清楚:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:21:47.777

我目前在 51Degrees.mobi 工作。

该属性返回“未知”的原因是我假设您使用的是免费的 Lite 数据集，与 Premium 数据相对应？由于您尝试访问的属性仅在我们的高级版本中可用。有关 Premium 和 Lite 版本中可用属性的列表，请参见[此处](http://51degrees.mobi/Products/DeviceData/PropertyDictionary.aspx?CATReferrer=1758)。

根据您提到的您有兴趣了解的数据，Lite 版本可以告诉您它是否是移动设备以及屏幕高度和宽度（以像素为单位）。其他信息仅在您购买高级版本时可用。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:16:43.667

使用 http 类获取请求标头并解析用户代理值。

# scrum - Scrum - 如何在燃尽图中可视化兼职开发人员的进度

> ID：10103950
> 
> 赞同：0
> 
> 时间：2012-04-11T10:13:32.813
> 
> 标签：scrum, burndowncharts

我们最多有几个团队成员不能 100% 地在我们的团队中工作。您可能会争辩说这首先是一个坏主意，但假设我们对此无能为力。我与其他团队成员之一进行了讨论，我的论点是燃尽图对我们“撒谎”。让我给你举个例子。

假设我们有一个 sprint，持续 2 周。我们有 6 名成员，其中 2 人只工作 50%。如果两个兼职成员第一周工作 100%，第二周工作 0%，我的论点是 1 周后，燃尽看起来会比实际情况好很多。Scrum 说现在是为 sprint 添加功能的时候了。

我已经看到了另一种方法来做到这一点，你事先输入你有空的日子，然后有一个非线性的理想线。我的第一个建议是即使你不在，也要让占位符被烧掉，但这很快就被击落了。

所以我想知道；我们应该对燃尽图做些什么吗？图表还有用吗？还有其他好的做法可以克服这种障碍吗？

我们目前正在使用 Urban Turtle

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:27:17.107

关于兼职开发人员 - 显然，这不是一个理想的情况，但实际上并没有太大问题。如果您的一名团队成员想请一天假，并且一周内 40 小时中只有 32 小时有空，Scrum 会失败吗？如果圣诞节期间没有人工作，Scrum 会失败吗？不 - 在两个帐户上。

这是处理您的情况的最简单（也是我认为最好的）方法：您只需将所有团队成员在该 Sprint 中可用于工作的时间加起来，例如，如果您有一个*3*人的团队，其中一名成员在100%，两个 50%，sprint 是**一周**，加起来是 40 + 40/2 + 40/2 = 80。这就是**团队**必须承诺的工作时间。这与您有两个全职成员没有什么不同。

关于燃尽图——我认为绘制一个非线性的“理想”燃尽图既是浪费精力，也是误导。**它被称为理想**是有原因的。这*不是*因为你必须努力在这条线上工作，而是为了展示如果你（可以）以恒定的速度工作，燃烧会是什么样子。

请记住该图的功能 - 它用于指示开发中**可能**存在的问题。并非每一次偏离理想都是坏事。生活并不理想，如果你为差异而烦恼，你就是在自欺欺人（并伤害自己）。事实上，**试图解释每一个偏差正是瀑布式著名的失败预测方法，而敏捷方法试图摆脱这种预测方法**。

您可能想要做的是记录您所拥有的每一个主要偏差，*了解*它们并查看您是否可以对它们做些什么，然后调整您的流程。这比尝试对当前状态进行建模要好。

所以要回答最后一个问题——是否有其他好的做法来克服障碍——答案是它**不是**障碍。通过接受你的现实来克服它，忽略那些是浪费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T01:29:35.697

您的情况非常适合在数小时内使用故事点。完成一个故事的相对综合努力对于您的团队随着时间的推移交付价值的能力更有意义，无论历史上在类似故事上花费了多少时间。

关于这种情况，有一个众所周知的轶事使情况发生了翻天覆地的变化。想象一下，您有一个全职团队，并且您确切地知道他们可以工作的时间。想象一下，您的团队拥有最好的 scrum 实践，并且您达到了每个人都同意他们满意的速度。他们现在是否永远受限于这种速度？是否可以想象，如果您为同一团队设定在更短的时间内提供相同速度的目标，并提供简单的提早回家的激励，是否可以实现？

答案是肯定的。事实上，像这样的现实生活场景发生在美国一家主要的软件公司，该团队实际上将他们的工作时间缩短到 16 小时！！是的，16小时！！他们通过不断微调他们对努力的看法来做到这一点。毕竟，如果你花几个小时来比较故事而不是比较复杂性，你如何考虑诸如可重用组件之类的因素或应对从一个功能到下一个功能的意外需求变化？

切换到故事点，你永远不会回头:0)

# string - 如何查找所有 3 个字符或更长的公共子字符串

> ID：10103953
> 
> 赞同：1
> 
> 时间：2012-04-11T10:13:51.423
> 
> 标签：string, substring, text-comparison

是否有一种有效的算法来搜索和转储 2 个字符串之间的所有常见子字符串（长度为 3 或更长）？

示例输入：

```
Length   : 0    5    10   15   20   25   30

String 1 : ABC-DEF-GHI-JKL-ABC-ABC-STU-MWX-Y
String 2 : ABC-JKL-MNO-ABC-DEF-PQR-DEF-ZWX-Y 
```

示例输出：

```
In string 1           2
---------------------------
ABC-DEF   0           12
ABC-DE    0           12
BC-DEF    1           13
:
-ABC-     15,19       11
-JKL-     11          3
-DEF-     3           15
-JKL      11          3
JKL-      12          4
-DEF      3           15,23
DEF-      4           16
WX-Y      29          29
ABC-      0,16,20     0,12
-ABC      15,19       11
DEF-      4           16,24
DEF       4           16,24
ABC       0,16,20     0,12
JKL       12          4
WX-       29          29
X-Y       30          30
-AB       15,19       11
BC-       1,17,21     1,13
-DE       3           15,23
EF-       5           17,25
-JK       11          3
KL-       13          5
: 
```

在示例中，“-D”、“-M”也是一个常见的子字符串，但不是必需的，因为它的长度只有 2。（示例中可能缺少一些输出，因为它们太多了......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:52:52.193

您可以使用称为[通用后缀树的数据结构找到所有常见的子字符串](http://en.wikipedia.org/wiki/Generalized_suffix_tree%20/)

[Libstree](http://www.icir.org/christian/libstree/)包含一些用于查找最长公共子字符串的示例代码。可以修改该示例代码以获取所有常见的子字符串。

# c# - 如何更改 WPF 中单个选项卡项标题的背景？

> ID：10103954
> 
> 赞同：2
> 
> 时间：2012-04-11T10:13:53.497
> 
> 标签：c#, .net, wpf, tabcontrol, tabitem

我一直在 WPF XAML (.NET 4) 中对 TabControl 进行样式化，我所能做的就是根据触发器设置选项卡的样式或将它们全部设置为相同的样式。有什么方法可以使只有第一个选项卡的样式不同，而其他选项卡的样式与第一个选项卡不同但彼此相同（也就是使用选项卡索引来样式化 TabItem）。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T11:10:00.983

您可以使用 AlternationCount 和 AlternationIndex：

```
<TabControl AlternationCount="{Binding Path=Items.Count,RelativeSource={RelativeSource Self}}">
    <TabControl.ItemContainerStyle>
        <Style TargetType="TabItem">
            <Style.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex"
                            Value="0"> <!-- First item -->
                    <Setter Property="FontWeight"
                            Value="Bold"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </TabControl.ItemContainerStyle>
    <TabItem Header="First"/>
    <TabItem Header="Second"/>
    <TabItem Header="Third"/>
    <TabItem Header="Fourth"/>
</TabControl> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T11:47:03.190

如果要更改刚刚选定的选项卡项的背景颜色，请使用那种样式并将该样式应用于选项卡项。

```
<Style TargetType="{x:Type TabItem}" x:Key="TabItemStyle">
    <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid>
                        <Border Name="Border" Background="Red" BorderBrush="#FF1467AF"
                                    BorderThickness="1" 
                                    Margin="0,0,5,0" CornerRadius="8,8,0,0" SnapsToDevicePixels="True">
                            <TextBlock FontFamily="Arial" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center" Name="TextBlock" Foreground="White">
                      <ContentPresenter VerticalAlignment="Center"  HorizontalAlignment="Center" ContentSource="Header" Margin="12,2,12,2"/>
                            </TextBlock>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Border" Property="Background" Value="Yellow"/>

                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
 </Style> 
```

但是，如果您只想更改第一个选项卡项的背景颜色，则定义两种样式并将一个应用于第一个选项卡项，将第二个应用于其他

**选项卡项目 1 的样式：**

```
<Style TargetType="{x:Type TabItem}" x:Key="TabItemStyleForFirst">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid>
                        <Border Name="Border" Background="Red" BorderBrush="#FF1467AF"
                                    BorderThickness="1" 
                                    Margin="0,0,5,0" CornerRadius="8,8,0,0" SnapsToDevicePixels="True">
                            <TextBlock FontFamily="Arial" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center" Name="TextBlock" Foreground="White">
                      <ContentPresenter VerticalAlignment="Center"  HorizontalAlignment="Center" ContentSource="Header" Margin="12,2,12,2"/>
                            </TextBlock>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
 </Style> 
```

**其他选项卡项目的样式：**

```
<Style TargetType="{x:Type TabItem}" x:Key="TabItemStyleForOther">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid>
                        <Border Name="Border" Background="Yellow" BorderBrush="#FF1467AF"
                                    BorderThickness="1" 
                                    Margin="0,0,5,0" CornerRadius="8,8,0,0" SnapsToDevicePixels="True">
                            <TextBlock FontFamily="Arial" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center" Name="TextBlock" Foreground="White">
                      <ContentPresenter VerticalAlignment="Center"  HorizontalAlignment="Center" ContentSource="Header" Margin="12,2,12,2"/>
                            </TextBlock>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
 </Style> 
```

# .htaccess - .htaccess 将主页重定向到桌面用户的“关于”页面

> ID：10103955
> 
> 赞同：2
> 
> 时间：2012-04-11T10:14:05.180
> 
> 标签：.htaccess, mobile, redirect, desktop, user-agent

在 wordpress 网站上，我们使用 wptouch pro 插件来提供网站的移动版本（因此没有单独的移动网站）。我们通过指向我们首页（例如 www.example.net）的二维码获得移动流量。但是，我们希望将桌面用户重定向到 www.example.net/about/ 页面。是否可以通过使用 .htaccess 或其他方式更好地做到这一点？

例如，添加：

```
RewriteEngine On

RewriteRule ^$ /about/ [R=301,L] 
```

在 Wordpress .htaccess 数据之前

将所有流量从 www.example.net 重定向到 www.example.net/about/

是否可以设置一个条件，即此重定向应该只有访问者不在指定的（移动）用户代理中？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:20:02.440

像这样的东西应该工作：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_USER_AGENT} ^.*(MSIE.*Windows\ NT|Lynx|Safari|Opera|Firefox|Konqueror) [NC]
RewriteRule ^$ about/ [L,R] 
```

# javascript - FB 自动墙柱

> ID：10103958
> 
> 赞同：0
> 
> 时间：2012-04-11T10:14:26.960
> 
> 标签：javascript, asp.net-mvc-3, facebook-graph-api, facebook-javascript-sdk

我已经使用 Graph API 在登录用户上实现了 Wall 帖子，如果用户单击我网站上的任何按钮（例如，如果他购买任何东西），我希望它可以正常工作，这将发布在他的墙上，下面是我的代码，但在这个代码它正在打开“发布”对话框，我想自动发布（只有当他用 fb 登录并且已经授权时才可以）

```
FB.ui(
{
method: 'feed',
name: 'Transaction succeeded',
link: 'http://abc.com/', 
description: 'Success'
},
function(response) {
if (response && response.post_id) { 
} else { 
}
}
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:58:50.153

[`FB.api`](http://developers.facebook.com/docs/reference/javascript/FB.api/)一旦用户获得授权并授予您的应用程序权限，用于发布提要故事`publish_stream`：

```
FB.api('/me/feed', 'post', {
  name: 'Transaction succeeded',
  link: 'http://abc.com/', 
  description: 'Success'
}, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:14:59.693

您可以通过使用访问令牌向适当的连接 URL 发出 HTTP POST 请求来发布到 Facebook 图表。例如，您可以通过向[https://graph.facebook.com/XYZ/feed](https://graph.facebook.com/XYZ/feed)发出 POST 请求，在 XYZ 的墙上发布新的墙帖：

```
curl -F 'access_token=...'  -F 'message=Hello, XYZ. I like this new API.' 
  https://graph.facebook.com/XYZ/feed 
```

您可以在 .net 中使用 curl 请求

# python - 防止socket.getaddrinfo“解析”不存在的数字主机名？

> ID：10103961
> 
> 赞同：2
> 
> 时间：2012-04-11T10:14:44.190
> 
> 标签：python, networking

我`socket.getaddrinfo`用来检查主机名是否可解析，`socket.gaierror`以检测错误的主机名。这很好用，除了在某些系统上，诸如“12345”之类的字符串被“解析”为垃圾地址。

这里到底发生了什么，我该如何防止它发生？

## Python 2.6.6 + CentOS 6.2 上的奇怪行为

```
Python 2.6.6 (r266:84292, Dec  7 2011, 20:48:22) 
[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import socket
>>> hostname = "12345"
>>> socket.getaddrinfo(hostname, "22", socket.AF_INET, socket.SOCK_STREAM, socket.SOL_TCP)
[(2, 1, 6, '', ('0.0.48.57', 22))] 
```

## Python 2.7.2 + OS X 10.6 上的预期行为

```
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> hostname = "12345"
>>> socket.getaddrinfo(hostname, "22", socket.AF_INET, socket.SOCK_STREAM, socket.SOL_TCP)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
socket.gaierror: [Errno 8] nodename nor servname provided, or not known 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:33:42.677

您的字符串被解析为 IP 地址。尝试一下`hostname="1"`，您会看到它解析为 0.0.0.1。这确实是一种奇怪的行为，手册说：

`inet_aton() also accepts strings with less than three dots; see the Unix manual page inet(3) for details.`

手册页说这样的字符串是`interpreted as a 32-bit value that is stored directly into the binary address without any byte rearrangement.`

# c - C：指向指定长度类型的指针

> ID：10103964
> 
> 赞同：1
> 
> 时间：2012-04-11T10:14:48.413
> 
> 标签：c, pointers, casting

我正在用 C 编写一些代码，并处理能够说“将其转换为指向具有与此数字相同字节数的数据类型的指针”的情况。

一个例子会让它更清楚 - 我`size_t`用来获取系统上指针的大小。现在我想可移植`void *`地转换一个指向该大小数据类型的指针的指针。我知道我可以将它转换为任何指针类型并且它的长度相同，但是指针算术根据变量指向的数据类型而有所不同。此外，在我的情况下`size_t`恰好是 8 个字节， 也是如此`double`，所以我可以将 my`void *`转换为 a `double *`，但我想要一个可移植的解决方案。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:24:22.917

如果您想要一个指向与指针大小相同的类型的指针，为什么不使用`void **`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:25:58.077

有什么问题`size_t*`（假设我理解你的问题）

在一般情况下，您需要指向带有`n`字节的类型的指针，您可以执行以下操作：

```
void *voidptr=... //assign whatever you want.
char (*myptr)[n]=voidptr; //a pointer to char[n] 
```

# concurrency - 关于 tbb 任务

> ID：10103965
> 
> 赞同：1
> 
> 时间：2012-04-11T10:14:49.240
> 
> 标签：concurrency, tbb

处理任务时，例如：

```
class MyTask: public tbb::task {
  private:
    int x;
  private:
    void DoSomething(...){...} // Invoked only inside execute
    void DoMore(...){...}  // Invoked only inside execute
  public:
    MyTasks(...){...}
    tbb::task* execute(){...}
}; 
```

一旦任务运行，是否可以同时执行 DoSomething() 或 DoMore() 或者这些方法只能由开始执行任务的线程调用？

我读到 TBB 允许偷工作，但它偷了什么？它是否窃取了一条数据，对其进行计算并将结果返回给主线程，或者窃取是否有可能执行私有方法？

对不起，如果我的问题不清楚！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:56:21.543

TBB 窃取任务，即从`tbb::task`. 然后调用任务的方法`execute()`。该方法由单个线程执行，但它可以产生新的任务放入线程的本地任务池中，并且可以被其他线程窃取。

在您的情况下，仅由调用的私有方法`execute()`不会同时运行。

# html - CSS下拉菜单在悬停时不起作用

> ID：10103967
> 
> 赞同：0
> 
> 时间：2012-04-11T10:15:05.853
> 
> 标签：html, css

我正在尝试在悬停时实现纯 CSS 菜单。一切正常，除了隐藏菜单并尝试在悬停时显示它......它不会发生。

这是我的 HTML：

```
 <ul id="nav-menu">
            <li><a href="#" class="first" id="p-menu">A</a></li>
                <ul class="submenu">
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                </ul>
            <li><a href="#">B</a></li>
            <li><a href="#">C</a></li>
            <li><a href="#">D</a></li>
            <li><a href="#">E</a></li>
            <li><a href="#">F</a></li>
            <li><a href="#">G</a></li>
            <li><a href="#" class="last">H</a></li>
        </ul> 
```

还有我的 CSS：

```
 #nav-menu {
   position: relative;
     }

       #header .submenu {
        width: 158px;
            height: 133px;
background: url(../images/submenu-bg.png) no-repeat;
position: absolute;
top: 49px; left: -11px;
display: none; 
```

}

```
 #header .submenu li a {
display: block;
margin: 10px 66px 5px 20px;
border: 0 none; 
```

}

```
 #header .submenu li a:hover {
display: block;
margin: 10px 66px 3px 20px;
border: 0 none; 
```

}

```
 #nav-menu #p-menu:hover ul.submenu {
display: block!important; 
```

}

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:19:01.810

像这样写：

```
<li id="p-menu">
 <a href="#" class="first">A</a>
   <ul class="submenu">
    <li><a href="#">1</a></li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
   </ul>
</li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:19:55.297

您的子菜单`ul`应该嵌套在您的`li`中，而不是在它之后。否则这是无效的 HTML。你也应该把你`p-menu` `id`的`li`而不是`a`.

改变：

```
<li><a href="#" class="first" id="p-menu">A</a></li>
<ul class="submenu">
   <li><a href="#">1</a></li>
   <li><a href="#">2</a></li>
   <li><a href="#">3</a></li>
   <li><a href="#">4</a></li>
</ul> 
```

到：

```
<li id="p-menu"><a href="#" class="first">A</a>
   <ul class="submenu">
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
   </ul>
</li> 
```

[**-- 见示例 --**](http://jsfiddle.net/Curt/JEmuU/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:20:19.360

您的`<ul>`子菜单在`<li>`标签之外

# android - HTML5 Offline 在 Opera Mobile 中不工作（Turbo ON）和 Web SQL 在 Turbo OFF 时不工作

> ID：10103968
> 
> 赞同：1
> 
> 时间：2012-04-11T10:15:06.243
> 
> 标签：android, asp.net-mvc-3, html, jquery-mobile, opera-mobile

我正在为我的 html5 + jQuery 移动应用程序使用 MVC 架构。当我尝试执行应用程序缓存（清单）以保存页面以供离线使用时，我在 opera mobile 12（Turbo ON 时）中遇到问题。但是当我关闭 turbo 时，离线缓存工作正常，但 HTLM5 存储（LocalStorage 和 Web SQL）却不行。我需要离线缓存和存储才能在我的应用程序中运行。我在 Safari、Chrome 和 Android 的默认浏览器中测试了我的应用程序，它运行正常。

有人可以帮我解决这个问题吗？我真的很感激这方面的任何帮助。

# php - 如何使用 silex 应用程序中的 Symfony 2 验证组件显示 Symfony 2 表单错误？

> ID：10103971
> 
> 赞同：2
> 
> 时间：2012-04-11T10:15:16.897
> 
> 标签：php, symfony, symfony-forms, silex

**背景**：我正在使用 Symfony Forms 和 Symfony Validation 组件在我的 Silex 应用程序的应用程序注册页面中呈现表单。

我让表单正常工作、呈现、客户端验证并将数据绑定到我的实体。我已向实体添加了一种验证方法，该方法可以正确验证实体并产生预期的错误。

**问题**：我现在想将错误从返回的 ConstraintValidationList 中取出并返回到表单中，以便使用 twig {{ form_errors }} 视图助手将它们显示在前端。

我在以下网址查阅了 API 文档：[http](http://api.symfony.com/2.0/Symfony/Component/Form/Form.html) ://api.symfony.com/2.0/Symfony/Component/Form/Form.html并且看不到执行此操作的正确方法。有谁知道如何实现我正在寻找的东西？

这是我的 Silex 控制器闭包中的代码：

```
$app->post('/register-handler', function(Request $request) use($app)
{
    // Empty domain object 
    $user = new MppInt\Entity\User();

    // Create the form, passing in a new form object and the empty domain object
    $form = $app['form.factory']->create(new MppInt\Form\Type\RegisterType(), $user);

    // Bind the request data to the form which puts it into the underlying domain object
    $form->bindRequest($request);   

    // Validate the domain object using a set of validators.
    // $violations is a ConstraintValidationList
    $violations = $app['validator']->validate($user);

    // Missing step - How do I get a ConstraintValidationList back into the 
    // form to render the errors in the twig template using the {{ form_errors() }}
    // Helper. 

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:00:55.273

在绑定请求阶段，验证器应该在数据上运行，因此您不需要自己使用验证服务。（来自 Sf2 而不是 Silex，验证器服务与 Form 我不知道您是否必须为 Silex 手动执行此操作）

除非在每个字段上启用错误冒泡，否则错误将保存在表单的字段（子项）中，以便使用 {{ form_errors() }} 显示错误

虽然如果你真的需要将 constraintViolationList 转化为表单错误，你可以将它们转换为 Symfony\Component\Form\FormError 对象并使用 $form->addError(FormError $formError); 将它们添加到表单中。

# ios - UISplitViewController iOS 5.1 导致弹出箭头方向错误

> ID：10103972
> 
> 赞同：10
> 
> 时间：2012-04-11T10:15:20.037
> 
> 标签：ios, uisplitviewcontroller, uipopovercontroller

我的应用在 iOS 5.1 之前运行良好。它在左侧窗格中`UISplitviewController`带有 a ，并根据在其中所做的选择更新详细信息窗格。`UINavigationController``UINavigationController`

iOS 5.1 特有的从左侧滑入替换弹出框的新功能；它看起来不太好，但它有效。

似乎被破坏的是纵向条形按钮中“弹出框”的显示。它会导致异常 -`'NSInternalInconsistencyException', reason: 'Unknown direction passed to _popoverViewSizeForContentSize:arrowDirection:'`

我试图覆盖显示弹出框的方法，如下所示：

`-(void)splitViewController:(UISplitViewController *)svc popoverController:(UIPopoverController *)pc willPresentViewController:(UIViewController *)aViewController { [self.popoverController presentPopoverFromBarButtonItem:self.masterPopoverButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; }`

但我仍然得到同样的错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T06:50:36.847

使用以下代表从详细信息页面显示母版页

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:

    (UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
    {
        barButtonItem.title = NSLocalizedString(@"Master", @"Master");
        [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
        self.masterPopoverController = popoverController;
    }

    - (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
    {
        // Called when the view is shown again in the split view, invalidating the button and popover controller.
        [self.navigationItem setLeftBarButtonItem:nil animated:YES];
        self.masterPopoverController = nil;
    } 
```

# php - 通过引用访问 foreach 循环中的值是否也适用于自定义迭代器？

> ID：10103976
> 
> 赞同：3
> 
> 时间：2012-04-11T10:15:22.413
> 
> 标签：php

如果我编写一个实现[Iterator的类，那么](http://de2.php.net/manual/en/class.iterator.php)[foreach](http://de2.php.net/manual/en/control-structures.foreach.php)的这个功能是否仍然有效？

> 为了能够直接修改循环内的数组元素，在 $value 之前加上 &。在这种情况下，该值将通过引用分配。

也许更重要的是，我是否必须在我`Iterator`的声明中加上“&” `current()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:45:22.787

你不能。在 PHP 5.3.2 上，我得到

> *致命错误：第[N]*行[ *file]*中的引用无法与 foreach 一起使用迭代器

# audio - 操作 MFCC 文件

> ID：10103977
> 
> 赞同：2
> 
> 时间：2012-04-11T10:15:26.013
> 
> 标签：audio, signal-processing, data-processing

我有 HTK 从 .wav 文件生成的 MFCC（梅尔频率倒谱系数）文件。我需要的是从 MFCC 中提取一个时间跨度。当 MFCC 文件代表 90 分钟长度的音频时，我想获得例如 MFCC 音频的第三分钟。

HTK 书说 MFCC 文件由一个标题和一个连续的样本序列组成。但是以字节为单位确定样本的确切大小似乎并不容易。

是否有文件解析器？*（当然有，在 HTK 中，但我没有设法弄清楚如何使用二进制文件来完成这项任务。）*

或者是否有一种简单的方法来确定样本和标题的大小，以便能够简单地将文件分开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:16:30.490

弄清楚了。HTK 有一个工具。HCopy 可以将 MFCC 转换为 MFCC，并接受 start 和 end 的参数。

```
HCopy -C config0 -s 10e7 -e 11e7 source.mfcc target.mfcc 
```

从源头截断 00:10 .. 00:11。

config0 应该包含用于从 wav 创建原始 mfcc 的相同配置，除了 sourcekind 设置为 wav。

# search - 使用搜索 API 时 Marklogic 中的分页

> ID：10103978
> 
> 赞同：1
> 
> 时间：2012-04-11T10:15:27.677
> 
> 标签：search, pagination, marklogic

我在 MarkLogic 服务器中有大约 53,00,000 个文档，我正在构建一个简单的搜索应用程序。用户输入一个搜索词，MarkLogic 服务器在所有文档的所有节点中搜索该词并返回匹配的文档作为结果。我已经实现了一个自定义分页来显示每页的结果。我每页显示 10 个结果。

我为此使用搜索api：-

```
import module namespace search="http://marklogic.com/appservices/search" at "/Marklogic/appservices/search/search.xqy";

declare variable $options:=

<options xmlns="http://marklogic.com/appservices/search">

    <transform-results apply="raw"/>

</options>;

search:search($p, $options, $noRecFrom, 10)/search:result 
```

其中 $p 是来自用户的输入 $noRecFrom 是指示我们必须从哪里显示记录的数字。例如，第 1 页 $noRecFrom 将为 1，第 2 页 $noRecFrom 将为 11，第 3 页 $noRecFrom 将为 21，依此类推。对于分页，有超链接可以转到第一页、下一页、上一页和最后一页。

要计算返回的记录总数，我正在使用：-

```
for $x in search:search($p, $options)

return $x//@total; 
```

虽然 First、Next 和 Prev 超链接完美运行，但如果有人单击 Last，应用程序将停止响应并且查询不会显示任何输出。是由于数据库中的大量文档还是我错误地实现了它。

MarkLogic 中是否有任何有效的分页方法（用于搜索：搜索），以便用户可以在如此大的数据库的查询结果中不延迟地转到最后一页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:45:09.903

您实现它的方式是在 for 循环中重复运行搜索。这确实会很慢。

相反，您应该根据@total 和每页文档数计算 $start 参数，并将其作为参数（我认为是第三个）传递给 search:search。

我还建议确保您可以在未过滤模式下运行。开发者网站上有关于优化快速分页（索引等）的好信息；这个想法是解决索引中的查询，以提供非常好的、准确的未过滤性能。

如果你这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:29:16.250

[在http://developer.marklogic.com/learn/2006-09-paginated-search](http://developer.marklogic.com/learn/2006-09-paginated-search)有一个关于分页搜索的教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:59:13.827

一旦你解决了上面 cwhit 提到的问题，如果你仍然想以更快的方式到达最后一页数据，你可以让你的代码足够聪明，以反转排序顺序并拉取正确的记录偏移量。

这是另一个提示：为了更好地了解 MarkLogic 对 search:search 所做的事情，请致电

搜索：获取默认选项（）

查看常见搜索应用程序的起点。

# xslt - XSLT（XML 到 XML）输出包含来自源的不匹配数据

> ID：10103979
> 
> 赞同：2
> 
> 时间：2012-04-11T10:15:38.043
> 
> 标签：xslt

在开发过程中使用 Visual Studio 执行转换，生成的 xml 包含来自目标中源 xml 的文本，该文本包含在与我的模板条件不匹配的标记中

我期待我在第一个模板中选择*Group*来找到任何名为*Group的元素，它们是**CrystalReport*的直接子级，并在应用模板调用中传递它们。我知道我的第二个模板上的匹配过滤器只会接收具有*Level=1属性的**Group*并将它们写出来。我希望**其他一切都**被忽略。

 ***为什么“不是这个”出现在我的输出中？

资源

```
<?xml version="1.0" encoding="utf-8" ?>
<!--
 UPDATE: Note that adding the xmlns attribute causes all output
 to disappear unless you use Chris's second solution.
 -->
<CrystalReport xmlns="urn:crystal-reports:schemas:report-detail" >
  <Group Level="1">
    <GroupHeader>
      <Section>
        <Field FieldName="apple" />
      </Section>
    </GroupHeader>
    <Group Level="2">
      not this
    </Group>
  </Group>
</CrystalReport> 
```

转换

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/CrystalReport">
    <root>
        <xsl:apply-templates select="Group"/>
    </root>
  </xsl:template>

  <xsl:template match="Group[@Level='1']/GroupHeader">
    <tag1><xsl:value-of select="Section/Field/@FieldName"/></tag1>
  </xsl:template>
</xsl:stylesheet> 
```

输出

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <tag1>apple</tag1>
      not this
    </root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:25:51.877

您正面临 XML 解析器的内置模板发挥作用的问题。您将模板应用于所有`Group`元素，但仅使用您自己的模板捕获其中一个。另一个由输出所有节点值的默认模板处理。我建议你改变

```
 <xsl:template match="/CrystalReport"> 
```

进入

```
 <xsl:template match="/"> 
```

这将覆盖产生额外输出的根默认模板。[您可以在http://www.w3.org/TR/xslt#built-in-rule](http://www.w3.org/TR/xslt#built-in-rule)找到有关内置模板规则的更多信息

然后覆盖基本的 text() 模板，使最终的 XSLT 看起来有点像这样

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:template match="/">
    <root>
        <xsl:apply-templates select="CrystalReport/Group"/>
    </root>
</xsl:template>
<xsl:template match="Group[@Level='1']/GroupHeader">
    <tag1>
        <xsl:value-of select="Section/Field/@FieldName"/>
    </tag1>
</xsl:template>
<xsl:template match="text()"/> 
```

**更新**

或者更简单，您可以匹配所需的元素并使用类似的东西

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:template match="/CrystalReport">
    <root>
        <xsl:apply-templates select="Group[@Level='1']/GroupHeader"/>
    </root>
</xsl:template>
<xsl:template match="GroupHeader">
    <tag1>
        <xsl:value-of select="Section/Field/@FieldName"/>
    </tag1>
</xsl:template> 
```

这将保留默认的 text() 模板，非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:27:58.713

尝试

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:crystal="urn:crystal-reports:schemas:report-detail">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:template match="/crystal:CrystalReport">
    <root>
        <xsl:apply-templates select="crystal:Group[@Level='1']/crystal:GroupHeader"/>
    </root>
</xsl:template>
<xsl:template match="crystal:GroupHeader">
    <tag1>
        <xsl:value-of select="crystal:Section/crystal:Field/@FieldName"/>
    </tag1>
</xsl:template> 
```***

# objective-c - 处理持久存储加载失败的策略

> ID：10103981
> 
> 赞同：1
> 
> 时间：2012-04-11T10:15:41.413
> 
> 标签：objective-c, ios, core-data, nspersistentstore

Apple 示例代码中处理加载持久性存储中的任何错误的默认策略是记录错误并保释。总是有一个解释（在评论中）你应该做一些对用户更友好的事情：

```
NSError *error = nil;
persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc]
        initWithManagedObjectModel:[self managedObjectModel]];
if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                              configuration:nil
                                                        URL:storeURL
                                                    options:nil
                                                      error:&error]) {
// Replace this implementation with code to handle the error appropriately.
NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
abort();
} 
```

是否有任何示例代码可以更好地处理无法加载持久存储的问题？有没有人建议比仅仅记录错误更好的策略？

将旧存储存档，然后给用户一个新存储会更好吗（带有消息说明发生了什么）

# c# - 我的 C# 应用程序总是从 SQL 数据库中查询数据，现在突然它不再返回数据了

> ID：10103982
> 
> 赞同：-3
> 
> 时间：2012-04-11T10:15:42.310
> 
> 标签：c#, sql

我有一个在服务器上查询 SQL 数据库的 C# 应用程序，我已经对其进行了多次测试，但是今天查询没有返回任何数据，应用程序和数据库仍然相同。没有变化。

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:22:15.723

必须有所改变。查询更改或数据更改。或者也许安全性发生了变化。我会说从运行 SQL Server Profiler 开始。这将让您看到所有访问数据库服务器的查询以及谁在运行它们。这是调试此类问题的好方法。如果查询看起来正确，请尝试使用与 C# 应用相同的凭据登录到 SQL Server Management Studio，并手动运行您在 SQL Server Profiler 中看到的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:22:11.263

我的建议是从基础开始。调试并单步执行您的代码，直接从 SSMS 查询数据库以查看是否获得相同的结果集。你有没有尝试...抓住你的 sql 连接、sql 查询等？

您需要提供更多信息，而不是它不起作用。复制并粘贴您尝试使用的代码以及一些示例数据库内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:30:48.293

有很多小的更改可能会导致代码停止工作。例如，如果服务器上的文化设置发生了变化，它可能会以不同的方式解析日期字符串并且无法识别您使用的格式。

有一些方法可以使应用程序对这些小变化不那么敏感，例如在解析依赖于文化的数据时指定文化。

通常，您会得到正确的结果或错误消息。检查以确保您没有任何`try...catch`正在吞咽的错误消息，而没有给出任何表明出现问题的迹象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T10:18:52.343

检查您的 sql server 是否在配置管理器中工作。

# joomla - Joomla 中带有图像的菜单

> ID：10103984
> 
> 赞同：-1
> 
> 时间：2012-04-11T10:15:45.513
> 
> 标签：joomla

喂！！

我是 joomla 的新手。我必须为学校重建[http://www.bern.ch/weiche_de 。](http://www.bern.ch/weiche_de)

我想像这样构建菜单：

![在此处输入图像描述](../Images/2618c21ff379ea80851a20a05533295d.png)

我的实际菜单看起来像：

![在此处输入图像描述](../Images/29835735151ff1d27c0edf6014850975.png)

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:29:05.637

在你做**任何事情****之前**，先去阅读[常见问题](https://stackoverflow.com/faq)，然后阅读你可以在[w3schools找到的](http://w3schools.com)**所有内容**。最后但**并非**最不重要的一点是，学习使用正确的拼写和标点符号。

 **话虽如此，这里有一些东西可能无法按您的意愿工作：

```
<div id="container">
    <div class="logo">
        <img src="127.0.0.1/myimage.image" alt="Nothing." />
    </div>
    <div class="menu">
        <ul>
            <li><a href="#">Stadtverwaltung</a></li>
            <li><a href="#">Gemeinderat</a></li>
            <!-- Fill in the rest here -->
        </ul>
    </div>
</div> 
```

然后，在您的 *.css 文件中，执行以下操作：

```
.logo {
    float: left;
}
.menu {
    float: right;
} 
```**

# qt - 子类化 Q(Double)SpinBox：重新实现 valueFormText() 和 validate()

> ID：10103986
> 
> 赞同：1
> 
> 时间：2012-04-11T10:15:54.780
> 
> 标签：qt, validation, qt4, range, qspinbox

抱歉标题含糊。

目前，如果在 Q(Double)SpinBox 中输入超出其范围的值（例如，当最大值为 90 时输入“100”），则该值将被拒绝，而是将最后一个有效值放回 SpinBox。

我想更改此行为以允许键入将自动更正的超出范围的值（最小或最大值），否则用户将很难猜测值范围。在研究了 QT 的文档和源代码后，我决定将 QSpinBox（稍后将处理 Double 变体）子类化为“QSpinBoxFS”，并重新实现标题中提到的两种方法。但不知何故，这根本没有效果，行为仍然是一样的。

这些是我的方法：

```
QValidator::State QSpinBoxFS::validate(QString &input,
                                       int &pos)
{
    QIntValidator *validator = new QIntValidator();
    return validator->validate(input, pos);
}

int QSpinBoxFS::valueFromText(const QString &text)
{
    const int max = maximum();
    const int min = minimum();

    QString copy = text;
    int dummy = 0;

    QValidator::State state = validate(copy, dummy);

    if (state == QValidator::Acceptable)
    {
        bool ok;
        int num = locale().toInt(text, &ok, 10);
        if (!ok) { goto bad_text; }

        if (num < min) { return min; }
        if (num > max) { return max; }

        return num;
    }
    else
    {
        bad_text:
        return (max > 0) ? min : max;
    }
} 
```

当然，这对于在 QSpinBoxPrivate::validateAndInterpret 中进行的迂腐检查来说还不够，但我只想让基本概念暂时起作用。我尝试将 validate() 更改为始终返回 Acceptable，但奇怪的是，生成的 spinbox 仍会以旧方式运行。

欢迎更正我自己的方法或解决此问题的不同方法！感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:23:11.947

您尝试重新实现的方法的签名是：

```
QValidator::State validate(QString & input,int & pos) const # <- const!
int valueFromText(const QString & text) const # <- const! 
```

您的两个方法都缺少 const，因此它们是不同的方法，因此从未从基类中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:26:58.910

换一种说法，

```
QAbstractSpinButton::setCorrectionMode(QAbstractSpinBox::CorrectToNearestValue) 
```

可以达到类似的结果（输入小于 min 的值将被更正为 min），尽管由于验证器，您仍然无法输入大于 max 的值。（因此它不足以满足我的需要，只是留在这里供参考。）

# sql - 如何将大量 SQL 查询转换为使用变量的单个存储过程？

> ID：10103987
> 
> 赞同：0
> 
> 时间：2012-04-11T10:16:00.877
> 
> 标签：sql, postgresql, stored-procedures, postgresql-9.1

我正在尝试将大量 SQL 语句转换为使用变量的 PostgreSQL 存储过程，该变量应该从一个 SELECT 的结果中填充。

如果您想查看必须运行的内容，可以[在此处查看](https://gist.github.com/2352960)

据我所知，PostgreSQL 不允许在使用`SQL`语言的存储过程中使用变量，所以我正在寻找需要最少更改的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:29:48.110

代码似乎非常重复。会有`EXECUTE`帮助吗？[（关于执行的手册）](http://www.postgresql.org/docs/9.1/interactive/sql-execute.html) [（示例和更多信息）](http://www.network-theory.co.uk/docs/postgresql/vol2/ExecutingDynamicCommands.html)它允许您运行预定义的查询并动态创建新的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:31:25.907

找到正确的语法后会容易得多：

这是语言的`definition`过程`plpgsql`：

```
DECLARE myvar integer;
BEGIN
SELECT INTO myvar FROM ...;
-- use myvar
END; 
```

# mysql - 只在 MySQL 中复制 DDL

> ID：10103990
> 
> 赞同：1
> 
> 时间：2012-04-11T10:16:33.323
> 
> 标签：mysql, replication

我想知道是否有任何简单的方法可以使方案在两个不同的 MySQL 集群中保持一致。除了经典复制之外，我还想要一个特殊的“复制”，它可以在另一个集群（即该集群的主节点）上重现所有 DDL 查询（CREATE、ALTER、DROP、...）。

我不需要复制实际数据。

有没有人做过或尝试过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:37:27.823

您可以根据执行查询的数据库过滤 MySQL 中的复制。但是，这并不妨碍您在其他数据库中进行更改！所以你可以这样做；

```
USE ddl_repl_db;

ALTER TABLE other_db.foo ADD COLUMN <etc> 
```

这取决于您正确配置服务器。我已经有一段时间没有设置 MySQL 复制了，但是 IIRC 你既可以过滤从主服务器发送的用于复制的内容，也可以过滤你在从服务器上接受的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T15:50:38.437

老了，但搜索量仍然很高。
因此，在您的 DDL 副本上，将所有表引擎设置为[BLACKHOLE](https://dev.mysql.com/doc/refman/5.6/en/blackhole-storage-engine.html)

# intellij-idea - 在intellij idea中为aspectj weaver设置编译级别

> ID：10103994
> 
> 赞同：0
> 
> 时间：2012-04-11T10:17:07.910
> 
> 标签：intellij-idea, aspectj, openjdk

我在项目中添加了简单的注释驱动方面，而 IntelliJ 无法编译它：

```
annotation type patterns are only supported at Java 5 compliance level or above 
```

请告知，应该在哪里配置编译级别（在项目设置中，整个项目和所有模块都设置为 Java 6），在 settings->aspectj weaver 中只能启用 weaver 并查看方面列表。

*UPD*问题与 OpenJDK 有关，因为 aspectJ weaver 插件无法正确识别它的版本。补丁已提交给维护者。

```
--- src/common/se/expertsystem/intellij/PluginUtils.java.orig   2012-04-11 14:03:35.000000000 +0300
+++ src/common/se/expertsystem/intellij/PluginUtils.java    2012-04-11 14:47:11.000000000 +0300
@@ -31,32 +31,34 @@
  */
 package se.expertsystem.intellij;

+import com.intellij.openapi.application.ApplicationInfo;
+import com.intellij.openapi.application.ApplicationManager;
+import com.intellij.openapi.diagnostic.Logger;
 import com.intellij.openapi.module.Module;
 import com.intellij.openapi.module.ModuleManager;
-import com.intellij.openapi.roots.ModuleRootManager;
-import com.intellij.openapi.roots.OrderRootType;
-import com.intellij.openapi.util.io.FileUtil;
-import com.intellij.openapi.diagnostic.Logger;
 import com.intellij.openapi.progress.ProgressIndicator;
 import com.intellij.openapi.progress.ProgressManager;
 import com.intellij.openapi.project.Project;
-import com.intellij.openapi.application.ApplicationInfo;
-import com.intellij.openapi.application.ApplicationManager;
-import com.intellij.openapi.vfs.VirtualFile;
+import com.intellij.openapi.roots.ModuleRootManager;
+import com.intellij.openapi.roots.OrderRootType;
+import com.intellij.openapi.util.io.FileUtil;
 import com.intellij.openapi.vfs.VfsUtil;
+import com.intellij.openapi.vfs.VirtualFile;
 import com.intellij.util.ActionRunner;

-import java.util.List;
-import java.util.ArrayList;
-import java.util.Iterator;
-import java.io.IOException;
 import java.io.File;
-import java.lang.reflect.Method;
+import java.io.IOException;
 import java.lang.reflect.InvocationTargetException;
-import java.net.URL;
+import java.lang.reflect.Method;
+import java.net.MalformedURLException;
 import java.net.URI;
 import java.net.URISyntaxException;
-import java.net.MalformedURLException;
+import java.net.URL;
+import java.util.ArrayList;
+import java.util.Iterator;
+import java.util.List;
+import java.util.regex.Matcher;
+import java.util.regex.Pattern;

 /**
  * Class containing useful utility methods for IntelliJ IDEA plugins.
@@ -68,6 +70,8 @@

   private static final Class[] NO_PARAMETERS = new Class[] {};

+  private static final Pattern jdkVersionResolver = Pattern.compile("(java|openjdk)\\s+version\\s+\"(\\d+)\\.(\\d+)");
+
   /**
    * Find classpath for module. Returns list of <code>File</code>s.
    * @param project Project to get classpath for.
@@ -296,13 +300,21 @@
    */
   public static boolean isJava5(Module module) {
     final String versionString = getJdkVersionString(module);  // Example: java version "1.5.0_07"
-    if(versionString.startsWith("java version \"1.") && versionString.length() > "java version \"1.".length())
-      return versionString.charAt("java version \"1.".length()) >= '5';
-    LOG.error("Unparsable version string: " + versionString);
-    return false;
+    final Matcher versionMatcher = jdkVersionResolver.matcher(versionString);
+    if (!versionMatcher.find()) {
+      LOG.error("Unparsable version string (regex failed): " + versionString);
+      return false;
+    } else if (!("1".equals(versionMatcher.group(2)) 
+                && versionMatcher.group(3).charAt(0) >= '5')) {
+      LOG.error("Version invalid: major "+versionMatcher.group(2)+
+        " , minor "+versionMatcher.group(3));
+      return false;
+    }
+    LOG.info("Detected JDK: "+versionString);
+    return true;
   }

-  /////////////////////////////////////////////////////////////////////////////
+    /////////////////////////////////////////////////////////////////////////////
   // Methods for progress indication
   /////////////////////////////////////////////////////////////////////////////

@@ -382,4 +394,4 @@
       return modules;
     }
   }
-}
\ No newline at end of file
+} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:12:17.137

尝试

```
source="1.5" 
```

插入到 build.xml 中的 iajc 任务中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T06:34:58.140

我通过升级 aspectjweaver jar 解决了现有的合规级别。利用`aspectjweaver-1.7.3.jar`

# java - 将导航按钮添加到 AbstractCell

> ID：10103998
> 
> 赞同：1
> 
> 时间：2012-04-11T10:17:16.883
> 
> 标签：java, css, gwt

我创建了一个`AbstractCell<String>`用于创建标题为“欢迎使用您的手机...”的标题，我想在其中添加两个按钮`AbstractCell`：第一个按钮返回上一页，第二个按钮返回欢迎页面。我曾经使用以下代码创建一个类扩展的标题元素`AbstractCell<String>`：

```
public class HeaderCell extends AbstractCell<String> {

    interface Templates extends SafeHtmlTemplates {

        String style = "HeaderPanel";

        @SafeHtmlTemplates.Template("<div class=\""+style+"\">{0}</div>")
        SafeHtml cell(SafeHtml value);
    }

    private Templates templates = GWT.create(Templates.class);

    interface templateWithButton extends SafeHtmlTemplates {

    }
    @Override
    public void render(com.google.gwt.cell.client.Cell.Context context,
            String value, SafeHtmlBuilder sb) {
        SafeHtml safeValue = SafeHtmlUtils.fromString(value);

        SafeHtml rendered = templates.cell(safeValue);

        sb.append(rendered);
    }

} 
```

有没有办法添加这两个按钮？请注意标题单元格是黑色的。PS：要设置如下图所示的标题元素，我使用了这个 CSS：

```
.HeaderPanel {
    -moz-box-shadow: inset -1px -1px 15px 1px #ffffff;
    -webkit-box-shadow: inset -1px -1px 15px 1px #ffffff;
    box-shadow: inset -1px -1px 15px 1px #ffffff;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0.05, #242524
        ), color-stop(1, #242524) );
    background: -moz-linear-gradient(center top, #242524 5%, #242524 100%);
    background-color: #242524;
    -moz-border-radius: 7px;
    -webkit-border-radius: 7px;
    border-radius: 7px;
    border: 1px solid #dcdcdc;
    color: #ffffff;
    font-family: arial;
    font-size: 17px;
    font-weight: bold;
    padding: 8px 36px;
    text-decoration: none;
    text-shadow: 1px 1px 29px #ffffff;
    text-align: center;
} 
```

![http://hpics.li/5e81f65](../Images/7b499b4b2308062ebd730b99dd66ef21.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:51:56.347

我不确定这是否是最好的实现，但它对我有用。-- 首先，将其添加到您的构造函数中：

```
public HeaderCell() {
   super("click", "keydown");
} 
```

-- 然后，覆盖 onBrowserEvent：

```
@Override
    public void onBrowserEvent(Context context, Element parent, String value, NativeEvent event, ValueUpdater<String> valueUpdater) {
      // Let AbstractCell handle the keydown event.
      super.onBrowserEvent(context, parent, value, event, valueUpdater);   
      // Handle the click event.
      if ("click".equals(event.getType())) {
        EventTarget eventTarget = event.getEventTarget();
       // in here we check whether the cell that was being clicked is an image, not the entire cell
        if(eventTarget.toString().contains("img src") && !eventTarget.toString().contains("<div class")){
            // do something if it's indeed the image that was clicked
        }
      }
    } 
```

干杯，林

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:35:32.317

为您的按钮使用 CompositeCell 和 ActionCells 怎么样？

[http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/CompositeCell.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/CompositeCell.html)

```
new CompositeCell<C>(Arrays.<HasCell<C, ?>>asList(
    new IdentityColumn<C>(new ActionCell<C>("<", new Delegate<C>() { ... })),
    new Column<C, String>(new HeaderCell()) { ... },
    new IdentityColumn<C>(new ActionCell<C>(">", new Delegate<C>() { ... }))
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:49:16.620

```
// create the button element 
Element button = DOM.createButton(); 

// here you can alter the html based on your needs
button.setInnerHTML(<"button type="button">Click Me! <"/button>");

// add it to the safehtmlbuilder
sb.appendHtmlConstant(button.getInnerHTML()); 
```