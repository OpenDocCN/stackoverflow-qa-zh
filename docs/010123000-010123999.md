# StackOverflow 问答 10123000-10123999

# jquery - 关闭 Android 应用 Jquery - Phonegap

> ID：10123005
> 
> 赞同：1
> 
> 时间：2012-04-12T11:51:22.353
> 
> 标签：jquery, android, cordova

我正在尝试使用以下代码关闭我的 Phonegap Android 应用程序：

```
document.addEventListener("backbutton", function () { 
    if ($('.screenshot').is(":visible")) {
        if (confirm('Afsluiten?')){
            setTimeout( function() { navigator.app.exitApp(); });
        }
        else {
            '';
        }
    }
    else {
        $(".items , .screenshot").show();
        $(".content , .openbrowser , .html5vid , .introtekst_gal" ).hide();
        $(".terug").hide();
    }
}, true); 
```

它工作一次：按后退按钮，然后按“确定”关闭应用程序，如预期的那样。

但是当我这样做时，应用程序不再关闭：

*   按返回按钮（弹出显示）
*   按“取消”（弹出消失）
*   按返回按钮（弹出显示）
*   按“确定”（弹出窗口消失，应用程序应该关闭，但不关闭）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T02:26:18.920

你可以试试这段代码：

```
 document.addEventListener("backbutton", function () { 
         navigator.notification.confirm(
             'Do you want to quit', 
             onConfirmQuit, 
             'QUIT TITLE', 
             'OK,Cancel'  
         );
     }, true); 

    function onConfirmQuit(button){
        if(button == "1"){
            navigator.app.exitApp(); 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:26:00.610

我不得不删除一些代码来测试，所以我最终使用了：

```
 document.addEventListener("backbutton", function () { 
            if (confirm('Afsluiten?')){
                setTimeout( function() { navigator.app.exitApp(); });
            }
            else {
                '';
            }
        }, true); 
```

这似乎工作得很好。您应该执行一些 console.logs 来查看确认对话框是否将您返回到正确的位置。另外，当您运行应用程序时，您在“adb logcat”中看到了什么？

# lookup-tables - 图像查找表

> ID：10123010
> 
> 赞同：0
> 
> 时间：2012-04-12T11:51:45.663
> 
> 标签：lookup-tables

当用于图像中的参考时，查找表可能位于何处？

我了解 LUT 如何处理图像背后的理论 - 即 8 位彩色图像存储字节集而不是颜色，并在相关 LUT 中查找颜色值以生成彩色图像 - 但我从未被告知 LUT 可能在哪里存储/定位。

例如，它们可能存储在服务器上的其他位置并以与`CSS`样式表可能存储在网站旁边的 Web 目录中相同的方式引用，或者是否有其他存储方式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:59:06.153

LUT 或“调色板”通常存储在图像文件头中。

查看[PCX 文件格式](http://en.wikipedia.org/wiki/PCX)以获得一个简单的示例。它通常只是一个 256x3 字节的列表，即红色分量一个字节，绿色分量一个字节，蓝色分量一个字节，对每个 256 色索引重复。

# nhibernate - NHibernate QueryOver 存在的地方

> ID：10123015
> 
> 赞同：1
> 
> 时间：2012-04-12T11:51:59.277
> 
> 标签：nhibernate, fluent-nhibernate, queryover

CUSTOMER、COMPANY 和一个关系表 CUSTOMER_COMPANY，它保持公司和客户之间的关系。

我有一个电子邮件列表

列出电子邮件列表

我想搜索属于特定公司的客户，并且他/她的电子邮件（这是一个字段）在此电子邮件列表中。如何使用 QueryOver？

```
public class CustomerMap : ClassMap<Customer>
{
    public CustomerMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        Map(x => x.Email);
        //... Other Fields

        HasMany(x => x.CompanyCustomers);
    }
}

public class CompanyMap : ClassMap<Company>
{
    public CompanyMap()
    {
        Id(x => x.Id);
        Map(x => x.Title);
            //... Other Fields

        HasMany(x => x.CompanyCustomers);
    }
}

public class CompanyCustomerMap : ClassMap<CompanyCustomer>
{
    public CompanyCustomerMap()
    {
        Id(x => x.Id);
        Map(x => x.IsActive);
        Map(x => x.CustomerType);
        ...

        References(x => x.Customer);
        References(x => x.Company);
    }
} 
```

我想获取属于电子邮件列表中存在的公司的客户...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:02:47.130

你可以这样尝试：

```
Company company = null;
session.QueryOver<Customer>
  .JoinAlias(customer => customer.Company, () => company)
  .WhereRestrictionOn(() => company.Email).IsIn(new[] { "email_1", "email_2", ... })
  .TransformUsing(Transformers.DistinctRootEntity)
  .List(); 
```

# clojure - 有没有办法控制 Leiningen 默认搜索哪些存储库？

> ID：10123025
> 
> 赞同：8
> 
> 时间：2012-04-12T11:52:47.393
> 
> 标签：clojure, repository, leiningen

当您在没有项目的情况下运行 Leiningen 搜索时，它会尝试从[http://repo1.maven.org](http://repo1.maven.org)和 clojars.org 下载存储库索引。有什么方法可以传入环境变量以从存储库管理器而不是这些中央存储库下载此索引？

我已经将 Maven 用于多个构建，并且我有一个 settings.xml 文件，它将我的存储库定义为全局镜像。我看到 Leiningen 在尝试获取代理配置时使用了 Maven 设置，但它没有使用相同的配置来下载索引文件。

我想从我的存储库管理器下载存储库索引，因为它只需要几秒钟。（从 Central 下载索引需要很长时间。）我是否遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:55:56.450

这计划用于 Leiningen 的 2.0.0 版本：[https ://github.com/technomancy/leiningen/issues/281](https://github.com/technomancy/leiningen/issues/281)

您可以通过将 :omit-default-repositories 设置为 true 并在 :repositories 中指定您的镜像（当它在项目中时 lein search 检查 :repositories ），在每个项目的基础上执行类似的操作，但没有办法在全局范围内执行此操作然而。绝对想让这个工作，因为这是一个常见的抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:20:03.590

检查[https://github.com/technomancy/leiningen/blob/preview/doc/DEPLOY.md](https://github.com/technomancy/leiningen/blob/preview/doc/DEPLOY.md)

从私有存储库开始

那是你要的吗？

# perl - 带有纯文本部分、html 部分和附件的电子邮件

> ID：10123027
> 
> 赞同：1
> 
> 时间：2012-04-12T11:52:56.473
> 
> 标签：perl, email, mime, html-email, email-attachments

我正在尝试编写一个小 Perl 脚本来发送带有附件的纯文本/html 电子邮件：

```
 use Encode();
      use MIME::Entity();
      my $msg = MIME::Entity->build(
        From        => '"' . Encode::encode( 'MIME-Header', 'Any User' ) . '" <any.user@example.test>',
        To      => '"' . Encode::encode( 'MIME-Header', 'Some User' ) . '" <some.user@example.test>',
        Subject     => Encode::encode( 'MIME-Header', 'Multipart alternative with attachments' ),
        Type        => 'multipart/alternative',
      );
      my $plain = $msg->attach(
        Type            => 'text/plain; charset=UTF-8',
        Data            => [ "*Multipart alternative with attachments*\n\nHere comes the plain text." ],
      );
      my $fancy = $msg->attach( Type => 'multipart/related' );
      $fancy->attach(
        Type            => 'text/html; charset=UTF-8',
        Data            => [ "<html>\n\t<body>\n\t\t<h1>Multipart alternative with attachments</h1>\n\t\t<p>Here comes the fancy text.</p>\n\t</body>\n</html>" ],
      );
      $fancy->attach(
        Type            => 'text/plain; charset=UTF-8',
        Disposition     => 'attachment',
        Filename        => 'test.txt',
        Data            => [ "*Multipart alternative with attachments*\n\nHere comes the attachment." ],
      ); 
```

我得到以下 MIME 源代码：

```
 Content-Type: multipart/alternative; boundary="----------=_1334231022-8218-0"
      Content-Transfer-Encoding: binary
      MIME-Version: 1.0
      X-Mailer: MIME-tools 5.502 (Entity 5.502)
      From: "Any User" <any.user@example.test>
      To: "Some User" <some.user@example.test>
      Subject: Multipart alternative with attachments

      This is a multi-part message in MIME format...

      ------------=_1334231022-8218-0
      Content-Type: text/plain; charset=UTF-8
      Content-Disposition: inline
      Content-Transfer-Encoding: binary

      *Multipart alternative with attachments*

      Here comes the plain text.
      ------------=_1334231022-8218-0
      Content-Type: multipart/related; boundary="----------=_1334231022-8218-1"
      Content-Transfer-Encoding: binary

      This is a multi-part message in MIME format...

      ------------=_1334231022-8218-1
      Content-Type: text/html; charset=UTF-8
      Content-Disposition: inline
      Content-Transfer-Encoding: binary

      <html>
              <body>
                      <h1>Multipart alternative with attachments</h1>
                      <p>Here comes the fancy text.</p>
              </body>
      </html>
      ------------=_1334231022-8218-1
      Content-Type: text/plain; charset=UTF-8; name="test.txt"
      Content-Disposition: attachment; filename="test.txt"
      Content-Transfer-Encoding: binary

      *Multipart alternative with attachments*

      Here comes the attachment.
      ------------=_1334231022-8218-1--

      ------------=_1334231022-8218-0-- 
```

[如果我在The Bat](http://www.ritlabs.com/en/products/thebat/)中查看电子邮件，则可以正确显示纯文本和 html 版本。在 Mozilla Thunderbird 11.0.1 中，不会显示普通版本，而是显示简化的 html 版本。

我的逻辑有错误还是 Thunderbird 失败了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:31:42.440

您不需要`$fancy`，将所有内容添加到`$msg`.

[Content-Transfer-Encoding](https://www.rfc-editor.org/rfc/rfc2045#section-6)标头更好`base64`或`quoted-printable`. 它更加万无一失。

```
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64

Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable 
```

# r - 在 lme 固定效应公式中指定分组因子

> ID：10123030
> 
> 赞同：2
> 
> 时间：2012-04-12T11:53:00.110
> 
> 标签：r, formula

我的数据集包括对 70 个人的治疗开始和结束时的数字分数（“参与”）的两次观察。个人之间的时间不是恒定的，但对这些时间的目视检查表明，在此期间大多数人都在上升

```
sfa <- read.csv("SFAFinalData.csv", header = TRUE)
groupingFormula <- as.formula(paste(columnName,"~ TIME|ID")) 
dataSubset <- na.omit(sfa[,seq(1:6)])
inputData <- groupedData(groupingFormula, data=dataSubset, labels = list("Weeks post injury", columnName))
m1 <- lme(inputData) 
```

按预期工作

```
> m1
Linear mixed-effects model fit by REML
Data: inputData 
Log-restricted-likelihood: -631.7963
Fixed: Participation ~ TIME 
(Intercept)        TIME 
18.7616485   0.4220891 

Random effects:
Formula: ~TIME | ID
Structure: General positive-definite
        StdDev     Corr  
(Intercept) 15.4985010 (Intr)
TIME         0.2192035 1     
Residual    13.2272350       

Number of Observations: 140
Number of Groups: 70 
```

我现在正在尝试比较三个子组中每个子组的分析（即参与作为时间的函数）（“类型”：具有三个级别的因子，分别为 10、29 和 31 个人）但是

```
m2 <- update(m1, fixed = .~.*TYPE) 
```

导致错误

```
Warning message:
In lme.formula(fixed = Participation ~ TYPE, data = inputData) :
Fewer observations than random effects in all level 1 groups 
```

努力看看我在这里做错了什么：据我所知，我有足够的观察结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:24:50.433

尽量不要使用 groupedData。我知道，书中的示例经常使用它，但我发现它是 lme 中最令人困惑的部分。并避免。在公式中，它可能非常贪婪可能导致错误消息的类型。

有很多猜测（请至少发布 str(sfa)），我假设你想要类似的东西：

```
sfa <- read.csv("SFAFinalData.csv", header = TRUE)
# No grouped Data!
lme(Participation~TIME*TYPE,random=~1|ID,data=sfa) 
```

# tcp - Netty messageReceived() 在长时间连接后不会被调用

> ID：10123035
> 
> 赞同：0
> 
> 时间：2012-04-12T11:53:15.633
> 
> 标签：tcp, netty, gprs

***最终编辑/结论***

这是一个与netty无关的问题，仍然很难调试。messageReceived 中的工作线程有时会被阻塞，因此一段时间后池中没有可用的线程。

***原来的问题***

在我的公司，我们使用 netty 来监听来自 GPS 跟踪设备的连接。跟踪器通过 GPRS 进行通信。

我们经历了 netty 3.2.4-final 的非常奇怪的行为。

一段时间后（我无法准确说出多少，但接近一天），我们没有收到来自追踪器的任何消息。这意味着我们的 SimpleCahnnelUpstreamHandler 实现的 messageReceived 方法不会被调用！但是，如果我使用 tcpdump 捕获所有数据包，我可以看到所有消息进入！

这是一个已知问题，已经在更高版本的 netty 中修复了吗？

我们的通道管道如下所示：

```
...
final TcpListenerChannelHandler tcpChannelHandler;

@Inject
public TcpListenerPipeline(TcpListenerChannelHandler tcpChannelHandler) {
     this.tcpChannelHandler = tcpChannelHandler;
}

@Override
public ChannelPipeline getPipeline() throws Exception {
        ChannelPipeline p = Channels.pipeline();
        p.addLast("frameDecoder", new DelimiterBasedFrameDecoder(2048, Delimiters.lineDelimiter()));
        p.addLast("encoder", new ByteArrayWrapperEncoder());
        p.addLast("handler", tcpChannelHandler);
        return p;
}
... 
```

我们通过以下方式实例化监听：

```
public void startListen() {
        ChannelFactory channelFactory = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(), Executors.newCachedThreadPool(),20);
        bootstrap = new ServerBootstrap(channelFactory);
        bootstrap.setPipelineFactory(pipeline);
        bootstrap.setOption("child.tcpNoDelay", true);
        bootstrap.setOption("child.keepAlive", true);
        lazyLogger.getLogger().info("Binding Tcp listener to 0.0.0.0 on port '{}'", listenPort);
        serverChannel = bootstrap.bind(new InetSocketAddress("0.0.0.0", listenPort));
} 
```

有人知道有什么问题吗？还是我们应该每隔一个小时左右手动断开所有频道？

***编辑：***

**我有更多关于这个问题的信息**

当没有消息被处理时，也会发生在成功的远程连接上没有调用 channelConnected 的情况。我远程调试了这个问题，发现：

*   在 NioServerSocketPipelineSink.java 行 #246 registerAcceptedChannel(acceptedSocket, currentThread); 发生
*   软件执行一直到具有不同事件的 DefaultChannelPipeline 第 781 行，但我的 TcpListenerChannelHandler 永远不在上下文中。

最奇怪的是，有时 netty 会注意到某个通道已连接，有时却没有。

**编辑2：**

TcpListenerCahnnelHandler 是 SimpleChannelUpstreamHandler 的简单实现

它的亮点：

```
public class TcpListenerChannelHandler extends SimpleChannelUpstreamHandler {
...
@Override
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
    super.channelConnected(ctx, e);
    _logger.info("{} device connected from: {}", deviceProtocol.getName(),  ctx.getChannel().getRemoteAddress());
    deviceConnectionRegistry.channelConnected(ctx.getChannel());
}

@Override
public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
    super.channelDisconnected(ctx, e);
    _logger.info("{} device from endpoint '{}' disconnected.", deviceProtocol.getName(), ctx.getChannel().getRemoteAddress());
    deviceConnectionRegistry.channelDisconnected(ctx.getChannel());
}

@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent messageEvent) throws Exception  {
    super.messageReceived(ctx, messageEvent);

    ...
    NOTE: here we process the meassage, I do not think it can cause any problem
}

@Override
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) throws Exception {
        if(_logger.isWarnEnabled())
            _logger.warn(deviceProtocol.getName()+ " device"
                    +e.getChannel().getRemoteAddress()+" channel", e.getCause());

        if (!(e.getCause() instanceof ConnectException))
            e.getChannel().close();
} 
```

同时我已经升级到 3.3.1-final。如果问题再次发生，我知道在哪里继续调试。

***编辑 3：***

我已经升级到3.3.1 final，两天后同样的问题再次出现。

我不知道这是否相关，但我们在同一个物理接口上有更多的 IP 地址。我们应该尝试只听一个接口吗？更多 eth 接口是否存在任何已知问题？

但同样：tcpdump 识别跟踪器的消息，但 netty 没有在我的自定义处理程序中调用 messageReceived。

***编辑4：***

我进一步调试了代​​码。问题出现在 NioWorker.java 第 131 行 (boolean offer = registerTaskQueue.offer(registerTask);) 运行正常，但随后将永远不会处理该任务。这意味着第 748 行的 RegisterTask.run() 永远不会被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:41:20.683

No idea, did you try to add a LoggingHandler to watch everything? I use to use a custom handler:

```
/**
 *
 * Adapted from the original LoggingHandler in Netty.
 */
public class LoggingHandler implements ChannelUpstreamHandler, ChannelDownstreamHandler {

    String name;
    boolean hexDump;

    public LoggingHandler(String name, boolean hexDump) {
        this.name = name;
        this.hexDump = hexDump;
    }

    /**
     * Logs the specified event to the {@link InternalLogger} returned by
     * {@link #getLogger()}. If hex dump has been enabled for this handler,
     * the hex dump of the {@link ChannelBuffer} in a {@link MessageEvent} will
     * be logged together.
     */
    public void log(ChannelEvent e) {

        String msg = name + " >> " + e.toString();

        // Append hex dump if necessary.
        if (hexDump && e instanceof MessageEvent) {
            MessageEvent me = (MessageEvent) e;
            if (me.getMessage() instanceof ChannelBuffer) {
                ChannelBuffer buf = (ChannelBuffer) me.getMessage();
                msg = msg + " - (HEXDUMP: " + ChannelBuffers.hexDump(buf) + ')';
            }
        }

        // Log the message (and exception if available.)
        if (e instanceof ExceptionEvent) {
            Logger.debug(this, msg, ((ExceptionEvent) e).getCause());
        } else {
            Logger.debug(this, msg);
        }

    }

    public void handleUpstream(ChannelHandlerContext ctx, ChannelEvent e)
            throws Exception {
        log(e);
        ctx.sendUpstream(e);
    }

    public void handleDownstream(ChannelHandlerContext ctx, ChannelEvent e)
            throws Exception {
        log(e);
        ctx.sendDownstream(e);
    } 
```

wich is inserted in both client and server side. On the server side, I use to add it to both child and parent:

```
ChannelFactory factory = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(),
                Executors.newCachedThreadPool());
        ServerBootstrap bootstrap = new ServerBootstrap(factory);
        bootstrap.setOption("child.tcpNoDelay", true);
        bootstrap.setOption("child.keepAlive", true);

        bootstrap.setPipelineFactory(new ChannelPipelineFactory() {

            public ChannelPipeline getPipeline() throws Exception {
                ChannelPipeline pipeline = Channels.pipeline();
                pipeline.addLast("LOGGER", new LoggingHandler("SERVER", true));
                pipeline.addLast("LAUNCHER", handler.new OnChannelConnectedPlugger());
                return pipeline;
            }
        });
        bootstrap.setParentHandler(new LoggingHandler("SERVER-PARENT", true)); 
```

# haskell - GHCi 不适用于 FFI 出口声明/共享库

> ID：10123040
> 
> 赞同：7
> 
> 时间：2012-04-12T11:53:50.487
> 
> 标签：haskell, ffi, ghci

我对 Haskell 中的 FFI 和 GHC 的交互模式有疑问。

（来源也可以通过[gist](https://gist.github.com/2366554)获得）：

FFISo.hs：

```
{-# LANGUAGE OverloadedStrings #-}
{-# LANGUAGE ForeignFunctionInterface #-}
module Main where

import qualified Data.ByteString.Char8 as B

foreign import ccall "callMeFromHaskell"
  callMeFromHaskell :: IO ()

foreign export ccall callMeFromC :: IO ()
callMeFromC :: IO ()
callMeFromC = B.putStrLn "callMeFromC"

main :: IO ()
main = do
  B.putStrLn "main"
  callMeFromHaskell
  return () 
```

抄送：

```
#include <stdio.h>

void callMeFromC(void);

void callMeFromHaskell(void)
{   
    printf("callMeFromHaskell\n");
    callMeFromC();
} 
```

生成文件：

```
GHC_OPT := -Wall -O2 -fno-warn-unused-do-bind

all: ffiso

test: ffiso
    ./$<

ffiso: FFISo.hs c.c
    ghc --make $(GHC_OPT) $^ -o $@

clean:
    rm -rf *.hi *.o ffiso *_stub.*

ghci0: ffiso
    echo main | ghci FFISo.hs

ghci1: ffiso
    echo main | ghci FFISo.hs c.o

ghci2: ffiso
    echo main | ghci FFISo.hs c.o FFISo.o 
```

编译和链接工作正常：

```
$ make test
ghc --make -Wall -O2 -fno-warn-unused-do-bind FFISo.hs c.c -o ffiso
[1 of 1] Compiling Main             ( FFISo.hs, FFISo.o )
Linking ffiso ...
./ffiso
main
callMeFromHaskell
callMeFromC 
```

但是，如果我想使用 GHCi，它会失败并显示以下消息：

```
$ make ghci0
echo main | ghci FFISo.hs
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Ok, modules loaded: Main.
Prelude Main> Loading package bytestring-0.9.2.1 ... linking ... done.
<interactive>: FFISo.o: unknown symbol `callMeFromHaskell'

Prelude Main> Leaving GHCi. 
```

好吧，让我们尝试给 GHCi`c.o`对象文件。

```
$ make ghci1
echo main | ghci FFISo.hs c.o
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading object (static) c.o ... done
ghc: c.o: unknown symbol `callMeFromC'
linking extra libraries/objects failed
make: *** [ghci1] Error 1
final link ... 
```

哦，好吧...让我们尝试使用 FFISo.o：

```
$ make ghci2
echo main | ghci FFISo.hs c.o FFISo.o
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading object (static) c.o ... done
Loading object (static) FFISo.o ... done
ghc: FFISo.o: unknown symbol `bytestringzm0zi9zi2zi1_DataziByteStringziInternal_PS_con_info'
linking extra libraries/objects failed
make: *** [ghci2] Error 1
final link ... 
```

这就是我卡住的地方。

我用两种不同的环境对其进行了测试，结果相同：

```
$ # system 1
$ ghc --version
The Glorious Glasgow Haskell Compilation System, version 7.4.1
$ uname -a
Linux phenom 3.2.13-1-ARCH #1 SMP PREEMPT Sat Mar 24 09:10:39 CET 2012 x86_64 AMD Phenom(tm) II X6 1055T Processor AuthenticAMD GNU/Linux

$ # system 2
$ ghc --version
The Glorious Glasgow Haskell Compilation System, version 6.12.1
$ uname -a
Linux hermann 2.6.32-22-generic-pae #36-Ubuntu SMP Thu Jun 3 23:14:23 UTC 2010 i686 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T12:56:17.467

调用 GHCi 时需要指定更多要链接的对象，因为 C 对象`c.o`在链接顺序方面特别挑剔。

首先，您需要添加`bytestring`包的目标文件。这是通过添加`-package bytestring`到 GHCi 命令行来完成的。

然后，您需要添加定义`callMeFromC`. 编译时`FFISo.hs`，它不会生成导出的目标文件`callMeFromC`。它改为使用 GHC 命名约定和 exports `Main_zdfcallMeFromCzuak4_closure`，它实际上是一个静态全局变量，指向包含实际函数定义和环境的闭包/“thunk”。这样你就不能写这样的东西：

```
foregin export ccall foo :: IO ()
foo = undefined 
```

...并在程序启动后立即崩溃，因为`foo`无法评估的“函数值”。仅在实际使用该函数时才检查该函数定义。

GHC 生成一个存根文件，其中包含用于从 C 调用 Haskell 函数的 C 代码。该文件称为`FFISo_stub.c`，并为您编译成`FFISo_stub.o`。`callMeFromC`这个目标文件导出了可以直接调用的“C 版本” 。随意检查生成的代码，这很有趣。

总而言之，调用 GHCi 时需要使用这个命令行：

```
ghci -package bytestring FFISo.o c.o FFISo_stub.o FFISo.hs 
```

# c# - 如何在 C# 中更新字典中键的值？

> ID：10123043
> 
> 赞同：23
> 
> 时间：2012-04-12T11:54:05.540
> 
> 标签：c#, c#-4.0, dictionary, key-value

我在 c# 中有以下代码，基本上它是一个简单的字典，其中包含一些键及其值。

```
Dictionary<string, int> dictionary =
    new Dictionary<string, int>();
dictionary.Add("cat", 2);
dictionary.Add("dog", 1);
dictionary.Add("llama", 0);
dictionary.Add("iguana", -1); 
```

我想用新值**5**更新键 'cat' 。
我怎么能这样做？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-12T11:55:43.570

你试过吗

```
dictionary["cat"] = 5; 
```

:)

**更新**

```
dictionary["cat"] = 5+2;
dictionary["cat"] = dictionary["cat"]+2;
dictionary["cat"] += 2; 
```

*当心不存在的键*:)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-12T12:07:20.110

试试这个简单的函数来添加一个字典项，如果它不存在，或者在它存在时更新：

```
 public void AddOrUpdateDictionaryEntry(string key, int value)
    {
        if (dict.ContainsKey(key))
        {
            dict[key] = value;
        }
        else
        {
            dict.Add(key, value);
        }
    } 
```

这与 dict[key] = value 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:13:07.560

字典是一个键值对。抓住钥匙

```
dic["cat"] 
```

并为其赋值

```
dic["cat"] = 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T11:55:52.153

只需使用索引器并直接更新：

```
dictionary["cat"] = 3 
```

# objective-c - （可可）单窗口可可应用程序中的 UIViewController 子类的等价物是什么？

> ID：10123045
> 
> 赞同：8
> 
> 时间：2012-04-12T11:54:06.030
> 
> 标签：objective-c, cocoa, nswindowcontroller

在弄乱了 iOS 应用程序之后，我想我应该试一试 Cocoa 应用程序，假设事情会非常相似。所以我有一个带有拆分视图和一些`NSTableView`s（想想 iTunes）的单窗口应用程序，我正在寻找一个放置我的代码的地方，该代码将从网络获取数据以填充表格。

在 iOS 中，我会将其放在`viewDidLoad`相应`UIViewController`子类的方法中。然后`UITableViewDataSource`将访问此数据以填充其单元格。

现在我有一个`NSWindow`我可以为它做类似的事情但我如何为它做一个`NSWindowController`？这甚至是我想要的吗？我可以把它放进去，`AppDelegate`但似乎不对。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T17:00:04.220

iOS 和 OS X 之间的区别在于 iOS 中只有一个窗口，但 OS X 中可以有多个窗口`NSViewControllers`。iOS 知识）似乎可以处理多个视图并在视图之间提供更多的粘合剂。`UIViewControllers``NSViewController``UIViewControllers`

甚至[Apple 文档](http://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/CoreAppDesign/CoreAppDesign.html)也这样写道：

> 在 Mac OS X 中，AppKit 视图控制器是窗口控制器的助手，它最终负责窗口中的所有内容。

因此，`UIViewController`OS X 中的对应物不是`NSViewController`，而是`NSWindowController`，它`UIViewController`通过管理单个窗口的整体以及其中视图的布局/内容/交互，为 OS X 提供了许多为 iOS 提供的功能。

在你的情况下，我会使用`NSWindowController`- 虽然如果应用程序非常简单，那么`App Delegate`也可以；如果应用程序非常复杂，那么使用 a`NSViewController`来拆分代码不会是一个坏主意。

使用 an 的最佳方法是以`NSWindowController`编程方式将其加载到 App Delegate 中，使用`[[CustomWindowController alloc] init]`and

```
@implementation CustomWindowController
- (id)init
{
    self=[super initWithWindowNibName:@"CustomWindowNibName"];
    if(self)
    {
        //perform any initializations
    }
    return self;
}
@end 
```

或者打电话

```
[[CustomWindowController alloc] initWithWindowNibName:@"CustomWindowNibName"]; 
```

如果您希望它可重用，则直接（并覆盖 initWithWindowNibName）。

您可以删除 MainMenu.xib 中的默认窗口。

* * *

从根本上说，一个 NSWindowController 管理一个在它自己的 nib 文件中实例化的窗口。NSWindowController 通常拥有那个 nib 文件。（虽然可以让它管理一个以编程方式创建的窗口，但这通常不是这样做的。）

因此，为了能够使用 custom `NSWindowController`，您需要在单独的 nib/xib 文件中创建要管理的窗口。（使用默认的 xib 文件意味着您允许 Cocoa 自动实例化一个 NSWindowController 而没有机会进行子类化；您不能使用`NSWindowController`带有默认 NSMainNibFile 的自定义。对于一个简单的应用程序，只需将所有控制器代码放在 NSApplication/App Delegate 中）

至少在 Xcode 4 中，该过程涉及使用窗口模板和自定义类创建一个 xib，在 -init 或任何地方基于该 nib`NSWindowController`实例化该类，然后调用（或者如果这不起作用，）来获取窗口实际展示（可能是一个不错的地方）。`CustomWindowController``[CustomWindowController showWindow:self];``-makeKeyAndOrderFront:``- (void)applicationDid/WillFinishLaunching:(NSNotification *)aNotification`

要停止显示默认窗口，我只需将其删除。可能有更好的方法，但我不知道。

# c# - 为什么尝试更新文本框文本时静态会出错

> ID：10123047
> 
> 赞同：0
> 
> 时间：2012-04-12T11:54:07.547
> 
> 标签：c#, winforms

我有以下代码。这是一个带有单个文本框的表单。如果我`myTimer_Tick`不是静态的，那么它工作正常 - 为什么？

```
namespace Ariport_Parking
{
  public partial class AirportParking : Form
  {

    //instance variables of the form
    static Timer myTimer;

    public AirportParking()
    {
        InitializeComponent();
        keepingTime(5000);
        txtMessage.Text = "hello";
    }

    //method for keeping time
    public void keepingTime(int howlong) {

        myTimer = new Timer();
        myTimer.Enabled = true;
        myTimer.Tick += new EventHandler(myTimer_Tick);
        myTimer.Interval = howlong;

        myTimer.Start();

    }

    static void myTimer_Tick(Object myObject,EventArgs myEventArgs){
        myTimer.Stop();
        txtMessage.Text = "hello world";
    }

  }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T12:03:42.320

我认为错误是它无法访问 txtMessage。txtMessage 是在表单上声明的实例变量，静态方法无法访问表单的实例数据。你可以谷歌知道为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:10:14.360

因为 txtMessage 不是静态的，所以它需要类的实例才能被访问。您无需将 myTimer_Tick 和计时器设为静态。或者为了更好地使用 lambda 而不是 myTimer_Tick。

代替：

```
myTimer.Tick += new EventHandler(myTimer_Tick); 
```

采用

```
myTimer.Tick += (sender, e) => { 
    myTimer.Stop();
    txtMessage.Text = "hello world";
}; 
```

# java - Java - 使用 LinkedLists 从 AbstractTableModel 向 JTable 添加数据

> ID：10123049
> 
> 赞同：-1
> 
> 时间：2012-04-12T11:54:18.703
> 
> 标签：java, user-interface, linked-list, jtable, abstracttablemodel

我有一个 GUI，其中有一个名为“listTable”的 JTable 容器。我想使用 AbstractTableModel 使用存储在链接列表中的数据填充 JTable。

基本上，我有一个 LinkedList 存储在 Processing.java 中。它包含从文本文件中检索到的所有数据。我创建了一个 AbstractTableModel 来告诉 JTable 如何填充。我现在要做的是用“链接列表的内容”填充 GUI_g 中的 JTable。

谁能告诉我该怎么做？

这是代码：

GUI_g：

```
import java.awt.*; 
import javax.swing.*;
import javax.swing.JTable;

public class GUI_g extends JFrame {

    public void buildGui() {

        JFrame frame = new JFrame("Hotel TV Scheduler");

                JPanel mainPanel = new JPanel();
        mainPanel.setLayout(new BorderLayout(0,0));

                JPanel chPanel = new JPanel();
                chPanel.setLayout(new GridLayout(3,1));

                JPanel listPanel = new JPanel();
                listPanel.setLayout(new GridLayout(3,2,1,0));

                JPanel infoPanel = new JPanel();
        infoPanel.setLayout(new GridLayout(0,3, 1, 0));

                JPanel addPanel = new JPanel();
        addPanel.setLayout(new GridLayout(0,3));

                JPanel chlblPanel = new JPanel();
                chlblPanel.setLayout(new GridLayout(1,2));

                JPanel tablePanel = new JPanel();
                tablePanel.setLayout(new GridLayout(1,2));

                JPanel rmvbtnPanel = new JPanel();
                rmvbtnPanel.setLayout(new GridLayout(1,2));

                JPanel centrePanel = new JPanel();
                centrePanel.setLayout(new GridLayout(0,3));

             //   mainPanel.add(chPanel, BorderLayout.WEST);
            //    mainPanel.add(listPanel, BorderLayout.EAST);
                mainPanel.add(centrePanel, BorderLayout.CENTER);

                JTable chOneTable = new JTable();
                JTable chTwoTable = new JTable();

                JTable listTable = new JTable(new ProgramTableMode());

                JLabel ch1Label = new JLabel("Channel 1");
                JLabel ch2Label = new JLabel("Channel 2");
                JLabel listLabel = new JLabel("List");

                JButton rmvChOneButton = new JButton("Remove Channel");
                JButton rmvChTwoButton = new JButton("Remove Channel");

                chlblPanel.add(ch1Label);
                chlblPanel.add(ch2Label);

                tablePanel.add(chOneTable);
                tablePanel.add(chTwoTable);

                rmvbtnPanel.add(rmvChOneButton);
                rmvbtnPanel.add(rmvChTwoButton);            

                chPanel.add(chlblPanel);
                chPanel.add(tablePanel);
                chPanel.add(rmvbtnPanel);

                listPanel.add(listLabel);
                listPanel.add(listTable);                

                JLabel titleLabel = new JLabel("Title");
                JLabel genreLabel = new JLabel("Genre");
                JLabel durationLabel = new JLabel("Duration");
                JLabel actorLabel = new JLabel("Actor");
                JLabel directorLabel = new JLabel("Director");
                JLabel rentableLabel = new JLabel("Rentable");
                JLabel synLabel = new JLabel("Synopsis");

                JTextField txtTitle = new JTextField();          
                JTextField txtGenre = new JTextField();
                JTextField txtDuration = new JTextField();
                JTextField txtActor = new JTextField();
                JTextField txtDirector = new JTextField();
                JTextField txtSynopsis = new JTextField();

                JCheckBox rentCB = new JCheckBox();

                JButton btnAddProg = new JButton("Add Program");

                JList channelList = new JList();
                JList timeList = new JList();

                infoPanel.add(titleLabel);
                infoPanel.add(txtTitle);
                infoPanel.add(new JLabel(" "));
                infoPanel.add(genreLabel);
                infoPanel.add(txtGenre);
                infoPanel.add(new JLabel(" "));
                infoPanel.add(durationLabel);
                infoPanel.add(txtDuration);
                infoPanel.add(new JLabel(" "));
                infoPanel.add(actorLabel);
                infoPanel.add(txtActor);
                infoPanel.add(new JLabel(" "));
                infoPanel.add(directorLabel);
                infoPanel.add(txtDirector);
                infoPanel.add(new JLabel(" "));
                infoPanel.add(rentableLabel);
                infoPanel.add(rentCB);
                infoPanel.add(new JLabel(" "));
                infoPanel.add(synLabel);
                infoPanel.add(txtSynopsis);
                infoPanel.add(new JLabel(" "));
                infoPanel.add(btnAddProg);
                infoPanel.add(channelList);
                infoPanel.add(timeList);

                centrePanel.add(chPanel);
                centrePanel.add(infoPanel);
                centrePanel.add(listPanel);

                frame.add(mainPanel);
                frame.setVisible(true);

    }

} 
```

程序表模型：

```
import java.util.List;

import javax.swing.table.AbstractTableModel;

public class ProgramTableModel extends AbstractTableModel{

    protected String[] columnNames = {"Type","Title","Length"};

    private List<Program> data;

    public ProgramTableModel (List<Program> data){
        this.data = data;
    }

    public int getColumnCount() {
        return 3;
    }

    public int getRowCount() {
        return data.size();
    }

     public String getColumnName(int column) {
         return columnNames[column];
     }

    public Object getValueAt(int row, int column) {

            switch (column){
            case 0: return data.get(row).getCategory();
            case 1: return data.get(row).getTitle();
            case 2: return data.get(row).getDuration();
            default: return "N/A";
            }

    }
} 
```

加工：

```
import java.io.*;
import java.util.*;

public class Processing
{
    List<Program> schedule = new LinkedList<Program>();

    public void readAllData() {

        try{
            FileInputStream fstream = new FileInputStream("file.txt");

            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String tempString = null;

            while ((tempString = br.readLine()) != null)   {

                String[] row = tempString.split("-");

                if(row[0].compareTo("COMEDY") == 0) {

                    Comedy comedy = new Comedy(row[0], row[1], Integer.parseInt(row[2]), row[3], row[4], Boolean.parseBoolean(row[5]));
                    schedule.add(comedy);

                } 

                else if(row[0].compareTo("DRAMA") == 0) {

                    Drama drama = new Drama(row[0], row[1], Integer.parseInt(row[2]), row[3], row[4], Boolean.parseBoolean(row[5]));
                    schedule.add(drama);

                }

                else if(row[0].compareTo("MUSIC") == 0) {

                    MusicVideo music = new MusicVideo(row[0], row[1], Integer.parseInt(row[2]));
                    schedule.add(music);

                }

                else if(row[0].compareTo("HOTEL") == 0) {

                    HotelInfo hotel = new HotelInfo(row[0], row[1], Integer.parseInt(row[2]));
                    schedule.add(hotel);

                }

            }
            in.close();

        }

        catch (Exception e){
            System.err.println("Error: " + e.getMessage());
        }
    }

    public void getAll()
    {
        for (Program p: schedule)
        {
            System.out.println(p.getTitle() + p.getDuration() + p.getCategory() + p);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:00:05.590

您可以添加一个重置方法来`ProgramTableModel`重置内部列表：

```
public reset (List<Program> data){ 
    this.data = data; 
} 
```

然后只需调用`reset()`与关联的模型对象`listTable`。这意味着，您需要从 GUI 存储和公开该对象

注意：您可以按照自己喜欢的方式操作模型列表：添加、删除、替换元素，只需添加能够实现所需行为的适当方法

# android - Android“使用信使”示例中的“sayHello(View v)”方法

> ID：10123050
> 
> 赞同：1
> 
> 时间：2012-04-12T11:54:21.977
> 
> 标签：android, android-service

我试图了解Android 文档中[绑定服务示例中的“使用信使”。](http://developer.android.com/guide/topics/fundamentals/bound-services.html)该示例有一个名为**sayHello(View v)**的方法。我不太明白该方法是如何被调用的，以及为什么它需要一个视图作为参数。

我希望这个问题对其他人有用，并且社区会积极地接受这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:59:16.297

您可以在 layout.xml 中定义一个 'android:onClick="method"'

这将调用您活动的参数“View”的方法

您也可以查看此 QA

[android:onClick XML 属性与 setOnClickListener 究竟有何不同？](https://stackoverflow.com/questions/4153517/how-exactly-does-the-androidonclick-xml-attribute-differ-from-setonclicklistene)

# asp.net - 输入字符串的格式不正确

> ID：10123054
> 
> 赞同：1
> 
> 时间：2012-04-12T11:54:31.543
> 
> 标签：asp.net, .net, vb.net, visual-studio, asp.net-controls

下午所有，

我有一个下拉列表，它从我的 SQL 数据库中提取数据并为用户提供两个选项（每周/每月）。数据库中的每一个都有一个 ID。Weekly 设置为 1，Monthly 设置为 2。此下拉列表链接到 gridview，它根据所选项目提取/显示数据。所有这一切都很好。

我遇到的这个问题是我想在我的 Page_ 加载事件中添加一些代码来填充带有所选项目的文本框。当用户访问该页面时，我还想将下拉列表默认设置为每周一次。我认为以下两位代码可以工作，但我得到消息“输入字符串的格式不正确”。

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    'This works fine
    lblTodaysDate.Text = GetDate()

    'I thought i could complete an If Statement to get the text box to work.
    If DropDownList1.SelectedValue = 1 Then
        txtMeeting.Text = "SMC Weekly Meeting"
    Else
        txtMeeting.Text = "SMC Monthly Meeting"
    End If

End Sub 
```

我是 .net 的新手，但已经读到我可能需要将我的 int 转换为字符串？

任何提前的帮助都会非常受欢迎。

问候贝蒂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:58:31.337

只需尝试将所需的值括在引号中，如下所示：

```
If DropDownList1.SelectedValue = "1" Then
    txtMeeting.Text = "SMC Weekly Meeting"
Else
    txtMeeting.Text = "SMC Monthly Meeting"
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:57:43.197

首先检查您的值是否为数字，如果是，则将其转换为整数，并将其与`1`：

```
If IsNumeric(DropDownList1.SelectedValue) AndAlso CInt(DropDownList1.SelectedValue)=1
    txtMeeting.Text = "SMC Weekly Meeting"
Else
    txtMeeting.Text = "SMC Monthly Meeting"
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:04:43.317

您需要检查`IsPostBack`否则 ddl SelectValue 将被重置

注意：我的 Vb.Net 有点生疏

IE

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Me.IsPostBack Then

        'This works fine
        lblTodaysDate.Text = GetDate()

        'I thought i could complete an If Statement to get the text box to work.
        If DropDownList1.SelectedValue = "1" Then
            txtMeeting.Text = "SMC Weekly Meeting"
        Else
            txtMeeting.Text = "SMC Monthly Meeting"
        End If
    Else
        ' Put your code to populate the ddl here

    End If
End Sub 
```

# android - 使用 ORDER BY 从 SQLite 对 ListView 进行排序

> ID：10123055
> 
> 赞同：1
> 
> 时间：2012-04-12T11:54:31.463
> 
> 标签：android

我有一个由 SQLite 数据库中的一系列数据填充的 ListView。现在我想根据“project_title”列对列表进行排序。据我所知，我们需要使用 ORDER BY。

所以我把它放在这样的查询中：

```
ListView listView = (ListView) findViewById(R.id.lstText);
        listView.setOnItemClickListener(this);
        listView.setAdapter(new MySimpleCursorAdapter(this, R.layout.listitems,
                managedQuery(Uri.withAppendedPath(Provider.CONTENT_URI,
                        Database.Project.NAME), new String[] { BaseColumns._ID,
                        Database.Project.C_PROJECTTITLE,
                        Database.Project.C_SMALLIMAGE, Database.Project.C_PROJECTDESCRIPTION, Database.Project.C_BIGIMAGE}, "SELECT " + "project_title" 
                       +" FROM "+"Project"+" ORDER BY "+"project_title"+" COLLATE NOCASE ASC", null, null),
                new String[] { Database.Project.C_PROJECTTITLE,
                        Database.Project.C_SMALLIMAGE, Database.Project.C_PROJECTDESCRIPTION}, new int[] {
                        R.id.txt_title, R.id.image, R.id.txt_list_desc})); 
```

但随后 ListView 上没有显示任何内容。我应该如何更正我的 ORDER BY 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:05:38.933

尝试这样的事情......

```
String[] all_columns = new String[] { BaseColumns._ID,
                            Database.Project.C_PROJECTTITLE,
                            Database.Project.C_SMALLIMAGE,
                            Database.Project.C_PROJECTDESCRIPTION,
                            Database.Project.C_BIGIMAGE};

 Cursor c = database.query(DatabaseHelper.TABLE, all_columns , whereClause, null, null, null, "project_title asc",null); 
```

# iphone - 展开 UITextView

> ID：10123056
> 
> 赞同：1
> 
> 时间：2012-04-12T11:54:32.900
> 
> 标签：iphone, ios, uikit, uitextview

我在文本视图中遇到角落按钮问题。

当我单击角按钮时，应该扩展文本视图取决于特定的按钮。让我们拿一个左下角的按钮，它应该在左下角展开。

同样，它应该适用于其他三个角落。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:37:47.650

您是否尝试在 UITextView 上设置新框架？！问题是什么？

下扩展示例：

```
UITextView* yourTextView;
CGRect currentFrame = yourTextView.frame;
currentFrame.size.height += 50;  // extension to the bottom with 50 points
yourTextView.frame = currentFrame; 
```

如果要向顶部延伸，还要调整 y 位置：
`currentFrame.origin.y -= 50; // move 50 points towards the top`

# java - 将 Hashmap 访问到 XSL 时出现问题

> ID：10123058
> 
> 赞同：4
> 
> 时间：2012-04-12T11:54:43.867
> 
> 标签：java, xslt

假设，我有一段代码：

```
 Map mappingId = new HashMap();
 mappingId.put("1", "1000");
 transformer.setParameter("mappingId", mappingId);

 transformer.transform(...); 
```

我有一个简单的 XSLT 试图从中获取密钥

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform";
xmlns:map="xalan://java.util.Map"
extension-element-prefixes="map">

<xsl:param name="mappingId" />

<xsl:template match="/">
<xsl:variable name="id" select="map:get($mappingId, '1')" />
<MappedId><xsl:value-of select="id"/></MappedId>

</xsl:template>
</xsl:stylesheet> 
```

我收到以下错误：

错误：'找不到方法 java.util.Map.get([ExpressionContext,] #STRING, #STRING) 致命错误：'无法编译样式表'。

有人可以帮我解决如何将java映射访问到XSL吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T13:19:26.750

“id”参数必须通过附加 $ 来访问。以下 XSL 似乎为我提供了预期的输出（java 1.6）。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:map="xalan://java.util.Map" extension-element-prefixes="map">

    <xsl:param name="mappingId" />

    <xsl:template match="/">
        <xsl:variable name="id" select="map:get($mappingId, '1')" />
        <MappedId>
            <xsl:value-of select="$id" />
        </MappedId>

    </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<MappedId>1000</MappedId> 
```

# android - 安装后如何自动创建快捷方式？

> ID：10123062
> 
> 赞同：0
> 
> 时间：2012-04-12T11:55:09.873
> 
> 标签：android, shortcut

安装后如何自动创建快捷方式？下面的代码不起作用！

```
 private void createShortCut() {
     Intent intent = new Intent(ACTION_INSTALL_SHORTCUT);
     intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
     intent.putExtra("duplicate", false); 
     Parcelable icon = Intent.ShortcutIconResource.fromContext(getApplicationContext(), R.drawable.icon);
     intent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, icon);//icon
     intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(getApplicationContext() , MainActivity.class));

     setResult(RESULT_OK, intent);
     sendBroadcast(intent);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:12:11.710

您无法在安装后自动创建快捷方式，因为您的代码在安装后不会自动运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T05:53:37.660

是的，无论是您的应用程序还是任何第三方应用程序或系统应用程序，都可以创建快捷方式。请遵循此示例代码。

```
 try
        {
            for (int i = 0; i < packageNameArray.length; i++)
            {
                Intent shortcutIntent = Util.makeIntent(MyPreference.getAction(context), MyPreference.getCategory(context), packageNameArray[i], ActivityNameArray[i]);
                Bitmap shortcutIcon2 = Util.confleteBitmap((UtilityClass.StringToBitMap(IconArray[i])), BitmapFactory.decodeResource(context.getResources(), R.drawable.shortcut_mark));
                data.putExtra("android.intent.extra.shortcut.INTENT", shortcutIntent);
                data.putExtra("android.intent.extra.shortcut.ICON", shortcutIcon2);
                data.putExtra("android.intent.extra.shortcut.NAME", AppNameArray[i]);
                //uninstalling shortcut to remove duplicacy
                Intent intent = new Intent("com.android.launcher.action.UNINSTALL_SHORTCUT");
                intent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
                intent.putExtra("duplicate", false);
                intent.putExtras(data);
                context.sendBroadcast(intent);
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        } 
```

这里**packagenamearray**是您选择创建快捷方式的所有应用程序，如果您只有要创建的应用程序快捷方式，则在此处 传递您的应用程序**包名称****activitynamearray**是所选应用程序的**活动名称。**

# slider - LWUIT 中的滑块控件

> ID：10123065
> 
> 赞同：0
> 
> 时间：2012-04-12T11:55:19.090
> 
> 标签：slider, lwuit

我可以在 LWUIT 中制作一个滑块控件，这意味着一个可以让用户移动以控制某些值的栏吗？

如果有人可以通过示例或教程提供帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:12:43.677

我只使用了无限模式。但是你有一个教程

[http://lwuit.blogspot.com.es/search?q=slider](http://lwuit.blogspot.com.es/search?q=slider)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:59:49.420

在 LWUIT 1.5 中有这个`Slider`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:28:51.627

我已经用运动组件完成了这个，我会为你提供

```
public MotionComponent(final Image background, final Image button,
            final int x, final int minX, final int maxX, final boolean
            useStops, final int numStops, final int time) {
        this.background = background;
        this.button = button;
        this.minX = minX;
        this.maxX = maxX;
        this.useStops = useStops;
        this.numStops = numStops;
        this.time = time;
        positionX = (maxX - minX) / 2;
        this.moveToPoint = this.minX;

        this.getStyle().setBgTransparency(0);

        if (this.maxX < this.minX) {
            int tmp = this.minX;
            this.minX = this.maxX;
            this.maxX = tmp;
        }

        if (button != null) {
            this.maxX += (button.getWidth() / 2);
            this.minX += (button.getWidth() / 2);
        }
    }

    public void setStepSize(int step) {
        this.stepSize = step;
    }

    public int getStepSize() {
        return stepSize;
    }

    protected Dimension calcPreferredSize() {
        //Style style = getStyle();
        Dimension dimension = null;
        dimension = new Dimension(background.getWidth(), 36);

        return dimension;
    }

    public void initComponent() {
        getComponentForm().registerAnimated(this);
    }

    public void paint(Graphics g) {

        if (background != null) {
            g.drawImage(background, getX(), 
                    (getHeight() - background.getHeight()) / 2);
        }
        if (button != null) {
            g.drawImage(button, positionX + button.getWidth()/2,
                    (getHeight() - button.getHeight()) / 2);
        }

    }

    public void keyPressed(int keyCode) {
        super.keyPressed(keyCode);
        switch (Display.getInstance().getGameAction(keyCode)) {
        case Display.GAME_DOWN:
        case Display.GAME_UP:
            break;
        case Display.GAME_LEFT:
        case Display.GAME_RIGHT:
            if (useStops && motionX == null) {
                System.out.println("key pressed motion");
                motionX = Motion.createSplineMotion(positionX,
                        getDestPoint(positionX, numStops, minX, maxX,
                                Display.getInstance().getGameAction(keyCode)), time);
                motionX.start();
            } else {
                if (motionX == null) {
                    motionX = Motion.createSplineMotion(positionX,
                            moveStep(positionX, stepSize,
                                    Display.getInstance().getGameAction(keyCode), minX, maxX), time);
                    motionX.start();
                }
            }
            System.out.println("key pressed");
            break;
        default:
            System.out.println("key default");
            return;
        }
    }

    public void keyRepeated(int keyCode) {
        super.keyRepeated(keyCode);
        switch (Display.getInstance().getGameAction(keyCode)) {
        case Display.GAME_DOWN:
        case Display.GAME_UP:
            break;
        case Display.GAME_LEFT:
        case Display.GAME_RIGHT:
            if (useStops && motionX == null) {
                motionX = Motion.createSplineMotion(positionX,
                        getDestPoint(positionX, numStops, minX, maxX,
                                Display.getInstance().getGameAction(keyCode)), time);
                motionX.start();
            }
            System.out.println("key Repeated");
            break;
        default:
            return;
        }
    }

    private int moveStep(int x, int stepSize, int keyCode, int min, int
            max) {
        if (keyCode == Display.GAME_LEFT) {
            if (x > min) {
                if (x - stepSize < min) {
                    return min;
                } else {
                    return x - stepSize;
                }
            } else {
                return min;
            }
        } else {
            if (x < max) {
                if (x + stepSize > max) {
                    return max;
                } else {
                    return x + stepSize;
                }
            } else {
                return max;
            }
        }
    }

    /**
     * returns a normalized value
     * @return
     */
     public float getValue() {
        return ((positionX - minX) / (maxX - minX));
    }

    public void pointerPressed(int x, int y) {
        Rectangle absoluteBounds  = new Rectangle(getAbsoluteX(), getAbsoluteY(), getBounds().getSize());
        if (absoluteBounds.contains(x, y)) {
            System.out.println("pointerPressed " + x + " y " + y);
            if (x != positionX) {
                if (motionX == null) {
                    if (x < minX) {
                        motionX = Motion.createSplineMotion(positionX,
                                minX, time);
                    } else if (x > maxX) {
                        motionX = Motion.createSplineMotion(positionX,
                                maxX, time);
                    } else {
                        motionX = Motion.createSplineMotion(positionX, x,
                                time);
                    }
                    motionX.start();
                } else {
                    // do what?
                }
            }
        }else{
            System.out.println("pointerPressed pointerPressed else " + x + " y " + y);
            System.out.println("getBounds() x " + getBounds().getX() + ", y " + getBounds().getY() + ", w " + getBounds().getSize().getWidth() + ", h " + getBounds().getSize().getHeight());
        }
    }
    int draggedX, draggedY;

    public void pointerDragged(int x, int y) {
        Rectangle absoluteBounds  = new Rectangle(getAbsoluteX(), getAbsoluteY(), getBounds().getSize());
        if (absoluteBounds.contains(x, y)) {
            System.out.println("pointerDragged " + x + " y " + y);
            draggedX = x;
            draggedY = y;
            if (motionX != null) {
                //motionX.getValue()
            } else {
                positionX = x;

                if (positionX < minX) {
                    positionX = minX;
                }

                if (positionX > maxX) {
                    positionX = maxX;
                }
            }
        } else {
            System.out.println("pointerDragged " + x + " y " + y);
            System.out.println("pointerReleased ");
            //when it exits bounds, call pointerReleased with the last
            pointerReleased(draggedX, draggedY);
        }
    }

    private int getDestPoint(int x, int numStops, int min, int max, int
            direction) {
        if (numStops < 2) {
            if (direction == Display.GAME_LEFT) {
                return min;
            } else {
                return max;
            }
        }
        int distance = (max - min) / (numStops - 1);

        if (direction == Display.GAME_LEFT) {
            return moveToStopPoint(x - distance, numStops, min, max);
        } else {
            return moveToStopPoint(x + distance, numStops, min, max);
        }
    }

    private int moveToStopPoint(int x, int numStops, int min, int max) {
        int distance = max - min;

        // will either go to min or max.
        if (numStops < 2) {
            if (x > min + (distance / 2)) {
                return max;
            } else {
                return min;
            }
        }
        float averageDistance = distance / (numStops - 1); // 5 stops,

        if (x > max) {
            return max;
        }

        if (x > min && x <= (min + (int) (averageDistance / 2))) {
            return min;
        } else if (x < max && x >= (max - (int) (averageDistance / 2))) {
            return max;
        } else {
            for (int i = 0; i < numStops; i++) {
                int currentMin = min + (int) (i * averageDistance);
                if (x >= currentMin && x < currentMin + (int)
                        averageDistance / 2) {
                    return currentMin;
                } else if (x >= currentMin + (int) averageDistance / 2 &&
                        x < currentMin + (int) averageDistance) {
                    return currentMin + (int) averageDistance;
                }
            }
        }
        return min;
    }

    public void pointerReleased(int x, int y) {
        Rectangle absoluteBounds  = new Rectangle(getAbsoluteX(), getAbsoluteY(), getBounds().getSize());
        if (absoluteBounds.contains(x, y)) {
            System.out.println("pointerReleased " + x + " y " + y);
            if (useStops) {
                if (x > maxX) {
                    x = maxX;
                }
                if (x < minX) {
                    x = minX;
                }

                if (motionX != null) {
                    motionX =
                        Motion.createSplineMotion(motionX.getValue(),
                                moveToStopPoint(motionX.getValue(), numStops, minX, maxX), time);
                } else {
                    motionX = Motion.createSplineMotion(x,
                            moveToStopPoint(x, numStops, minX, maxX), time);
                }
                motionX.start();
            }
        } else {
            // outside bounds. Should be caught previously with
        }
    }

    public boolean animate() {
        boolean val = false;
        if (motionX != null) {
            positionX = motionX.getValue();
            if (motionX.isFinished()) {
                motionX = null;
            }
            val = true;
        }
        return val;
    }
} 
```

![上面代码的输出是这个，我认为这是你正在搜索的。 用户可以左右移动按钮](../Images/b357e5cacddd5cb131b8d69582a38dc6.png) 普拉纳夫

# html - 修复了 HTML 表格中带有 CSS 的行标题

> ID：10123073
> 
> 赞同：1
> 
> 时间：2012-04-12T11:55:52.960
> 
> 标签：html, css

我用谷歌搜索过这个问题，我似乎看到了除了我需要的所有变体。我需要一个带有固定 ROW 标题的 HTML 表。有没有办法只用 HTML 和 CSS 来做到这一点？如果不是，那么最好的 JQuery 插件是什么？

我觉得我在问别人必须做的事情。但我看到的一切似乎完全是另外一回事。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:18:29.557

你有没有尝试过：

```
table { table-layout:fixed; width:100px; } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T12:03:10.777

添加以下 CSS 样式应该会有所帮助：

```
table tr
{
    height:100px;
} 
```

# c++ - 加载、裁剪和保存 jpg C++

> ID：10123074
> 
> 赞同：2
> 
> 时间：2012-04-12T11:55:59.310
> 
> 标签：c++, macos, image-processing

我想在 C++ 中创建一个函数，它将接收一个 jpg 文件和一个坐标数组。然后使用坐标裁剪它，将新图像保存为新的 jpg。尝试使用 imagemagick 但无法在 macosx 上编译它。请需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:06:46.900

使用 OpenCV，它是最强大且易于理解的工具，具有出色的文档。它已经实现并准备好使用大量算法。

[http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:02:53.893

我会使用库 FreeImage：

[http://freeimage.sourceforge.net/intro.html](http://freeimage.sourceforge.net/intro.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:04:17.827

很久以前我用过： http: [//www.catenary.com/howto/crop.html#C_source](http://www.catenary.com/howto/crop.html#C_source)，但我不知道它是否可以在 OS X 中编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:09:33.920

有两种方法可以做到：

使用 libaray 为您完成，尝试[JUCE C++ Library](http://www.rawmaterialsoftware.com/wiki/index.php/Main_Page)。它有特定的类来为你做这件事。无需编译，链接即可。

另一种方法是自己做。您需要首先将 JPEG 转换为原始数据 - 这是一项非常艰巨的任务 - 将其加载到您的结构中，然后进行处理。

如果是出于商业目的，我不会推荐第二种方法，但如果您想这样做，请尝试使用 BMP 文件的第二种方法。这将是超级有趣的！

# jquery - jQuery 插件：使用 setInterval 定期更新 jQuery 元素数组

> ID：10123075
> 
> 赞同：3
> 
> 时间：2012-04-12T11:56:00.207
> 
> 标签：jquery, plugins

我正在编写一个 jQuery 插件，它引入了一个新方法，它在调用它的 DOM 对象`foo()`中创建一些元素。`<img>`我将指向这些图像的指针存储在一个数组`images`中。在方法结束时，我调用`setInterval("someFunction(images)", 1000)`它应该定期对图像执行一些操作（例如更改`src`）。

这是我的代码的一个非常简短的版本：

```
(function($) { 
$.fn.foo = function () {
return this.each (function () {
    $box = $("#"+this.id);

    images = new Array();
    for (i = 0; i<4; i++) {
        images[i] = $("<img>");
        $box.prepend(images[i]);
    }

    setInterval("someFunction(images)", 1000);
});
}
function someFunction(images) {
    for (i = 0; i<images.length; i++) {
        images[i].attr("src", "foo"+(parseInt(Math.random()*5)));
    }
}
})(jQuery); 
```

`foo()`如果我将其应用于单个元素，则一切正常，但如果将其应用于多个元素，则所有定期更新都将应用于最后一个元素。我认为这是因为数组作为对 的引用传递`someFunction`，然后被覆盖。

我试图`slice()`在数组上使用来创建一个副本，但这没有用，虽然我不明白为什么。我认为我正在寻找的是以某种方式将指向我的图像的指针存储在它们的父容器中。

任何帮助将不胜感激我需要更改的内容，以便更新所有图像，而不仅仅是最后一个容器中的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:22:04.370

那么这个怎么样：

```
(function ($) {
    $.fn.foo = function () {
        return this.each(function () {
            $box = $(this); // Changed to "this"

            var images = new Array();
            for (i = 0; i < 4; i++) {
                images[i] = $("<img>");
                $box.prepend(images[i]);
            }

            // Added the function inline.
            setInterval(function () {
                for (i = 0; i < images.length; i++) {
                    images[i].attr("src", "foo" + (parseInt(Math.random() * 5)));
                }
            }, 1000);
        });
    };
})(jQuery); 
```

编辑：

如果您想重用，也可以这样尝试`someFunction`：

```
(function ($) {
    $.fn.foo = function () {
       ...
            setInterval(function () {
                someFunction(images);
            }, 1000);
       ...
    };
})(jQuery);

function someFunction(images) {
    for (i = 0; i<images.length; i++) {
        images[i].attr("src", "foo"+(parseInt(Math.random()*5)));
    }
} 
```

# java - 使 JRuby On Rails 应用程序适用于 Rails 和 Java 开发人员的模式

> ID：10123083
> 
> 赞同：0
> 
> 时间：2012-04-12T11:56:36.137
> 
> 标签：java, ruby-on-rails, jruby

我的团队由 Rails 和 Java 开发人员组成，他们一起开发 JRuby On Rails 应用程序。Rails 人更喜欢使用纯 Ruby 解释器来开发前端应用程序。Java 人员将应用程序部署到 Tomcat 并将其与 Spring 和核心 Java 后端服务集成。

我们知道哪个版本的 Ruby 正在执行该项目，以允许 Rails 研究员使用纯 Ruby 解释器来开发它。

比如我们调整数据库配置：

```
module MyWebApp
  class Application < Rails::Application
    def config.database_configuration
      config = super
      if defined? JRUBY_VERSION
        config["development"]["adapter"]="jdbcsqlite3"  
      end
      config
    end
  end
end 
```

Gemfile 也是如此：

```
gem 'sqlite3'
if defined? JRUBY_VERSION
  gem 'jdbc-sqlite3'
  gem 'activerecord-jdbcsqlite3-adapter' 
end 
```

我们还模拟了核心 Java 服务：

```
class DocumentServiceFactory
  def build
    if defined? JRUBY_VERSION
      spring_context :document_service
    else
      mock :document_service
    end
  end 
end 
```

这个解决方案对我们有用，但我很好奇是否有任何通用模式（或插件、gem、库等）可以使 Rails 应用程序对 Ruby 和 JRuby 都友好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:50:31.560

这里有3件事要回答：

1.  暂时不需要更改*database.yml*适配器配置。只需将其保留为`adapter: sqlite3`mysql 等并使用最近的*activerecord-jdbc-adapter*例如*activerecord-jdbcsqlite3-adapter*

2.  这当然不是在*Gemfile*中处理 jruby 特定依赖项的正确方法。如果你使用说明符会更好，`:platform`这样 Gemfile.lock 是一致的，并且不需要在 ruby​​ 开关之间重新生成，例如：

    `gem 'activerecord-jdbcsqlite3-adapter' :platform -> :jruby`

3.  对于服务模拟，可能没有“更好”的方式，但是由于您提到并非所有 ruby​​ist 都使用 jruby，所以我会考虑将服务层公开为 REST/Web 服务，这样您就不必模拟获得的每个服务即使使用 jruby 运行，introduced 和 ruby​​ist 也不会遇到他们不理解的 java 问题（因为它们不适用于 spring 部分）。

除此之外，我对 MRI 上的开发/测试以及在生产中使用 JRuby 感到非常满意，对于您的 ruby​​ 人员来说，唯一真正的忙是了解他们编写“真正的”`threadsafe!`代码（jruby 风格）并在添加新 gem 时要小心以确保它们在双方都能工作或有一个 jruby 替代品......我几乎没有与在 MRI 上运行良好但在 JRuby 上出现问题的宝石不兼容（我记得可能有 3 个）。我当然推荐 CI（例如 Jenkins）使用 JRuby 运行您的测试，以便尽可能早地捕获这些测试。

# glassfish - 可以将 JMeter perfMon 连接到 Glassfish 的端口 8686 以进行 JMX 监控吗？

> ID：10123086
> 
> 赞同：0
> 
> 时间：2012-04-12T11:56:45.967
> 
> 标签：glassfish, jmeter, perfmon, jmeter-plugins

我有一台服务器要监控，使用JMeter 的[perfMon 插件](http://code.google.com/p/jmeter-plugins/wiki/PerfMon)。我已经启动并运行 Glassfish，它可以在端口 8686 上为我提供 JMX 详细信息，但我无法将我的 JMeter 连接到此信息。我已经读到我可以使用一些参数启动 JVM，但是由于 Glassfish 也可以这样做，所以不可能在那里获得读数吗？

稍微进一步解释一下。我在我想要监控的服务器上启动了一个 serverAgent。我的机器上有 JMeter，我使用本地的 URL，所以没有防火墙问题。在我使用 JMeter 的机器上，我以这种方式设置了 jp@gc - PerfMon Metrics Collector：

```
Host:IP = the ip pointing to my serverAgent server, listening on 4444 default.  
Metric to collect = JMX  
Metric parameters: ? 
```

根据 Oracle 的说法，GF JMX 值的 url 应该有一个如下所示的链接：

```
URL = service:jmx:rmi://localhost:8686/jndi/rmi://localhost:8686/jmxrmi|#] 
```

我已经以各种方式尝试了这个 url，希望让它工作，但到目前为止还没有。我的 serverAgent 在尖叫，没有 SIGAR 对象用于度量类型 jmx，所以它似乎有可能在端口 8686 上从 GF 获得一些东西，但它没有 SIGAR 对象。

但是 SIGAR 可以连接到这个 GF 端口，为 JMeter 检索信息不是吗？Hyperic 使用 SIGAR iirc，根据他们的说法它连接得很好:)

有什么建议或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:24:11.943

问题是您使用的版本低于 0.5.2

解决办法是升级到0.5.2

# javascript - 如何动态设置select的选项？

> ID：10123087
> 
> 赞同：0
> 
> 时间：2012-04-12T11:56:47.907
> 
> 标签：javascript

我有一个组合框，可用作列的过滤器。在更改列中的任何值时，我想更新组合框中的选项。obj.default 为我提供了列中已更改字段的旧值。

```
function valueChange(obj) {
        var optionsArray = document.getElementById('filter').options;
        for (var index = 0; index < optionsArray.length; index++) {
            if (optionsArray[index].value == obj.defaultValue) {
                optionsArray[index].value = new Option(obj.value, obj.value);
            }
        }
    } 
```

`optionsArray`正在正确填充。如何设置回`optionsArray`元素的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:08:49.470

假设我们在 html 中有选择

```
<select id="example-select"></select> 
```

这就是我们可以添加选项的方式

```
var selectexample = document.getElementById("example-select");
selectexample.options[select.options.length] = new Option('Text 1', 'Value1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:21:18.360

采用

```
document.getElementById('filter').add(new Option(obj.value, obj.value),null); 
```

要删除，请说出第 i 个选项

```
document.getElementById('filter').remove(i); 
```

# algorithm - 自定义聚类算法

> ID：10123089
> 
> 赞同：1
> 
> 时间：2012-04-12T11:56:53.607
> 
> 标签：algorithm, math, optimization, machine-learning

我有一组向量。向量分为三个不同的类别，即。A、B 和 C。现在，我需要根据以下标准对它们进行聚类：

1.  每个集群中应该有最少 1 个和最多 3 个向量。
2.  每个集群中的所有向量都应该属于不同的类型。.ie，一个簇不应包含 2 个或多个相同类型 A、B 或 C 的向量。
3.  如果这里是一个包含一组向量的簇，那么任何两个向量之间的距离（比如说欧几里德距离）都小于预定义的阈值 T。
4.  如果有一个包含 2 个或更多向量的簇（当然最多 3 个），那么这些向量中的一个必须是 A 类型。

是否有任何现有的算法来执行这种类型的聚类？假设我需要从头开始，那么根据上述条件对向量进行聚类需要遵循哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:46:43.483

您可以使用约束引擎解决此类问题。像[choco](http://www.emn.fr/z-info/choco-solver/)这样的东西包括对您列出的所有约束的支持（以及优化，因为我猜如果您有歧义，您想要最少数量的集群？）。

我不是 choco 方面的专家，但如果对我有帮助的话，我在学习它时做了[笔记](http://isti.bitbucket.org/)（这些都是关于约束解决的，但我昨晚进行了优化工作，很快就会添加更多内容）。有一个明确的学习曲线，但是对于如此复杂的事情，我认为你不需要花更多的时间来学习而不是自己编写一个解决方案（然后在未来你有一个新的通用工具，而不是一堆非常具体的代码)

并且 choco 并不是独一无二的——还有很多这样的——[谷歌最近打包了一些](http://code.google.com/p/or-tools/)。

# meteor - 测试 Meteor 示例的问题

> ID：10123091
> 
> 赞同：0
> 
> 时间：2012-04-12T11:56:59.100
> 
> 标签：meteor

我已经按照网站上的说明进行了安装，但是当我尝试排行榜示例时，我得到的只是：

来自 Chrome 的“此网页有一个重定向循环”页面 url 已更改为 localhost:3000/Users/myname/

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:27:22.423

我的用户名中的空格可能是一个问题，当我将项目移出用户文件夹时，它就像一个魅力。

# ios - iOS 通过宏重新设计 UITableView

> ID：10123096
> 
> 赞同：0
> 
> 时间：2012-04-12T11:57:11.347
> 
> 标签：ios, uitableview, custom-cell

我通过定义一个宏来自定义绘制我的 TableView 单元格`#define DRAW_SET 1`

在应用程序的整个生命周期中的某个地方，我想更改单元格的外观，所以我实现了一个 IBAction 方法，然后`#undef DRAW_SET`是宏并将其定义为 2 `#define DRAW_SET 2`。

我遇到的问题是宏没有被未定义和/或重新定义。这可能是由于公共/私人电话造成的吗？

谢谢，克林顿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:21:19.620

宏是编译器指令。编译后，每个宏都替换为相应的值/语句。 `#undef`允许您取消定义宏，但同样，作为编译逻辑的一部分，而不是运行时逻辑。

通常，宏用于在开发周期中静态添加调试代码，然后在部署应用程序时将其删除（以减小大小）。例如：

```
#ifdef DEBUG

// regular logic you don't want in your final app

#endif 
```

我使用宏的另一个地方是针对不同的操作系统时：

```
#ifdef WINDOWS

// something windows specific

#endif

#ifdef AIX

// something AIX specific

#endif 
```

这些宏可以在不同的地方定义——你的编译器会给你很多免费的，你可以将它们设置为你的构建过程的一部分。

但这里的关键是，**它们在运行时是不可更改的。**

您可能想要做的是在某处定义一个变量，可能在您的应用程序委托上作为一个属性，这很容易从您应用程序的任何地方访问：

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

然后在您的代码中查看已设置的变量：

```
if (appDelegate.myFlag == 1) {
    // render my cell in one way
} else {
    // render my cell in another way
} 
```

# firefox - 如何使用 Javascript 打开面板？

> ID：10123100
> 
> 赞同：0
> 
> 时间：2012-04-12T11:57:36.980
> 
> 标签：firefox, firefox-addon, xul

我有这个代码：

```
<?xul-overlay href="chrome://myextention/popup.xul"?>

<toolbarbutton id="button" type="menu">
    <panel id="popup" />
</toolbarbutton> 
```

当我单击`button`它时，它会打开`popup`面板。现在，当我单击另一个窗口中的元素时，我想打开同一个面板。我正在使用当前浏览器`navigator:browser`，找到面板（例如`panel.state`工作）并尝试打开它，但它不起作用。

我试过了`openPopup`，`open = true`而且`openPopupAtScreen`- 这些都不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:46:28.893

openPopup 绝对是打开面板的正确方式。

我相信问题在于您已将面板设置为工具栏按钮的子项。

我建议将面板作为 XUL 中的一个单独项目（mainPopupSet 的子项）。

然后在这两种情况下都使用 openPopup。

# java - 在类路径资源 [spring/database/DataSource.xml] 中定义的名称为“dataSource”的无效 bean 定义

> ID：10123103
> 
> 赞同：8
> 
> 时间：2012-04-12T11:58:07.780
> 
> 标签：java, sql-server, spring, hibernate

我试图创建一个使用 Spring、Maven 和 Hibernate 访问 sql server 数据库的应用程序。当我尝试运行应用程序时，我收到以下错误：

```
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [spring/database/DataSource.xml]: Could not resolve placeholder 'jdbc.driverClassName' 
```

这是我的课

数据源.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean 
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location">
    <value>/properties/database.properties</value>
</property>
</bean>

<bean id="dataSource" 
     class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="${jdbc.driverClassName}" />
<property name="url" value="${jdbc.url}" />
<property name="username" value="${jdbc.username}" />
<property name="password" value="${jdbc.password}" />
</bean>

</beans> 
```

休眠.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<!-- Hibernate session factory -->
<bean id="sessionFactory" 
class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
<property name="dataSource">
  <ref bean="dataSource"/>
</property>

<property name="hibernateProperties">
   <props>
     <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
     <prop key="hibernate.show_sql">true</prop>
   </props>
</property>

<property name="annotatedClasses">
<list>
    <value>com.fexco.helloworld.web.model.Customer</value>
</list>
</property>

</bean>
</beans> 
```

和 database.properties

```
database.driverClassName=net.sourceforge.jtds.jdbc.Driver
database.url=jdbc:jtds:sqlserver://localhost:1433;databaseName=Customer
database.username=*****
database.password=***** 
```

（我已经在这里阻止了用户名和密码），我也有一个 BeanLocation.xml，但不应该真的需要发布它。

有谁知道如何解决这个问题，这让我发疯！谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T12:17:39.057

而不是`${jdbc.driverClassName}`在您的 XML 中，使用`${database.driverClassName}`，即在您的`database.properties`文件中使用的属性的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-13T15:36:47.167

首先，您需要确保在类路径下可以访问配置文件的根位置，然后添加属性文件的相对路径，例如。类路径：属性/database.properties

就我而言，一个额外的问题是错误地出现了一个额外的'"'，导致了这个错误。希望这会有所帮助。

# python - 未知命令：抓取错误

> ID：10123104
> 
> 赞同：34
> 
> 时间：2012-04-12T11:58:08.543
> 
> 标签：python, scrapy, web-crawler

我是python的新手。我在 64 位操作系统上运行 python 2.7.3 32 位版本。（我尝试了 64 位，但它没有锻炼）。

我按照教程在我的机器上安装了scrapy。我创建了一个项目，demoz。但是当我输入时`scrapy crawl demoz`它显示错误。当我在 (C:\python27\scripts) 下点击 scrapy 命令时，我遇到了这个东西，它显示：

```
C:\Python27\Scripts>scrapy
Scrapy 0.14.2 - no active project

Usage:
  scrapy <command> [options] [args]

Available commands:
  fetch         Fetch a URL using the Scrapy downloader
  runspider     Run a self-contained spider (without creating a project)
  settings      Get settings values
  shell         Interactive scraping console
  startproject  Create new project
  version       Print Scrapy version
  view          Open URL in browser, as seen by Scrapy

Use "scrapy <command> -h" to see more info about a command

C:\Python27\Scripts> 
```

我想他们在安装中缺少一些东西可以帮助请..提前谢谢..

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-04-12T12:30:58.703

您应该在文件所在`scrapy crawl spider_name`的scrapy项目文件夹中运行命令`scrapy.cfg`。

从[文档](http://doc.scrapy.org/en/latest/intro/tutorial.html#crawling)：

> 爬行
> 
> 要让我们的爬虫工作，请转到项目的顶级目录并运行：
> 
> `scrapy crawl dmoz`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-20T08:18:14.840

`scrapy crawl demoz`您可以从使用以下命令创建的 scrapy 项目文件夹中运行代码

```
scrapy startproject tutorials 
```

例如，如果您已经启动了 name 的 scrapy 项目`tutorials`，则首先转到 tutorials 文件夹并`crawl`从那里运行命令

```
scrapy crawl demoz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-17T04:07:13.670

如果您已经有一个现有项目并且突然出现此错误“Scrapy 1.3.3 - 没有活动项目”，在我的情况下，当我打开我的项目时，我看不到 scrapy.cfg 文件。我所做的是，我只是对我的项目进行了一些小改动，比如删除了一些额外的行并将其从 github 部署到实例，并且成功了！

# symfony - Doctrine2 不会在一对一双向上延迟加载

> ID：10123105
> 
> 赞同：1
> 
> 时间：2012-04-12T11:58:09.370
> 
> 标签：symfony, doctrine-orm, twig

我在教义 2 中遇到了一些烦人的问题。

我有一个文档实体和一个会议实体。

```
/**
 *
 * @author klauss
 *
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class Document
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    public $id;

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     */
    public $path;

    /**
     * @ORM\OneToOne(targetEntity = "Conference", mappedBy = "image")
     */
    protected $conference;

    /**
     * @Assert\File(
     *      maxSize="4M",
     *      maxSizeMessage="Allowed maximum size is {{ limit }}"
     * )
     */
    public $file;

    // ..... 
```

和会议实体

```
// .........

    /**
     * Uploaded image.
     *
     * @ORM\OneToOne(targetEntity = "Document", inversedBy = "conference")
     * @ORM\JoinColumn(name = "image", nullable = true, referencedColumnName = "id")
     */
    protected $image;

// ............ 
```

因此，在 Twig 模板中，我想执行以下操作：

```
{{ conference.image.path }} 
```

但它只是不加载图像，我总是需要调用

```
$conference->getImage()->getPath(); 
```

在 PHP 中获取 Twig 中的正确路径。但不应该是一样的吗？如果我不在 PHP 中调用它，Twig 调用只会返回一个空字符串

我怎样才能实现 Doctrine 自动知道 Document 关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:08:55.080

将您的实体类变量设为私有或受保护。Doctrine 2 依赖于它的延迟加载魔法。

[http://docs.doctrine-project.org/en/latest/reference/architecture.html](http://docs.doctrine-project.org/en/latest/reference/architecture.html)

# mysql - 如何在mysql表中选择，平均和排序

> ID：10123110
> 
> 赞同：-1
> 
> 时间：2012-04-12T11:58:30.513
> 
> 标签：mysql, select, average

我在 mySql 中有一个表，就像这张图片一样
![在此处输入图像描述](../Images/3f79b315f59a3e9c4a57c4ffbda7fa85.png)

我想编写一个查询，其结果将按 LESSON 列分组，并添加新行，即 LESSON 列的平均值和 CNT 列值的总和....
对于这个查询，我使用这个

![在此处输入图像描述](../Images/75f0067bda29f8e6b7cff3fd03d8ce7a.png)

我使用这个查询，但它给出的结果如图 3 所示，在这种情况下我无法按 PERC 排序

```
select no, STUD_ID,CLASS,LESSON, AVG(PERC) as PERC,SUM(CNT) as CNT from t_lesson where LESSON='CHEM' group by CLASS
union all
select no,STUD_ID,CLASS,'AVERAGE' as LESSON, AVG(PERC) as PERC, SUM(CNT) as CNT from t_lesson where LESSON='CHEM' group by LESSON 
```

![在此处输入图像描述](../Images/1e23b0485b4a024a92cfdc0280bea34a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:02:07.600

看起来您正在选择`lesson`is的所有行`CHEM`，然后您想要一个具有平均百分比的额外行。怎么样：

```
select *
from (
  -- this part gets all the "CHEM" rows
  select * 
  from <your_table_name>
  where lesson = "CHEM"
  union
  -- this parts selects the aggregate row
  select 
    NULL            as `no`, 
    NULL            as `stud_id`, 
    NULL            as `class`,
    "average"       as `lesson`,
    avg(percentage) as `perc`, 
    sum(count)      as `cnt`
  from <your_table_name>
  where lesson = "CHEM"
) q
order by `perc` desc; 
```

请注意，排序是由外部查询执行的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T12:03:12.253

不知道你是否正在寻找这样的东西：

```
SELECT fields_list, (field_to_modify + (SELECT AVG(average_field) FROM table2)) AS order_field 
  FROM table1
WHERE your_conditions
  ORDER BY order_field; 
```

# android - 在android中删除简单的ListView元素

> ID：10123112
> 
> 赞同：2
> 
> 时间：2012-04-12T11:58:33.663
> 
> 标签：android

我正在显示简单的列表视图。在长按事件时，会显示 Dialog 以从 ListView 中删除该项目。这是我的代码：

```
myList = (ListView) findViewById(R.id.listSendEmailFinal);

myList.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
@Override
public boolean onItemLongClick(AdapterView<?> av, View v, int pos, long id) {
        return onLongListItemClick(v,pos,id);
}
protected boolean onLongListItemClick(View v, final int pos, long id) {
        final String str=myList.getItemAtPosition(pos).toString();
        Log.i("ListView", "onLongListItemClick stirng=" + str);
        AlertDialog.Builder builder = new  
                AlertDialog.Builder(EmailReceiversActivity.this);
            builder.setMessage("Are you sure you want to exit?")
            .setCancelable(false)
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {

                       }
                   })
                   .setNegativeButton("No", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                       }
                   });
            AlertDialog alert = builder.create();
            alert.show();
            return true;
        }

    }); 
```

当我按下“是”按钮时，该项目应该从列表视图中删除。我使用了 ArrayAdapter。'listItems' 是一个字符串数组

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,listItems);
 myList.setAdapter(adapter); 
```

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T12:03:29.843

在单击是按钮的事件中只需从“listItems”中删除该项目并调用 adapter.notifyDataSetChanged();

就是这样..！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T12:01:33.020

只需在 YES 按钮内尝试此操作，单击：

```
listItems.remove(pos);
adapter.notifyDataSetChanged(); 
```

# java - 升级 Android SDK 导致 java.lang.VerifyError 崩溃

> ID：10123118
> 
> 赞同：10
> 
> 时间：2012-04-12T11:58:42.893
> 
> 标签：java, android, android-support-library, verifyerror

自从升级我的 Android SDK 后，我在`java.lang.VerifyError`启动我以前工作的应用程序时遇到了崩溃。

查看日志，有一些导致崩溃的新问题是以前没有的：

```
Could not find method android.support.v4.content.LocalBroadcastManager.getInstance, referenced from method com.myapp.android.App.setOAuthLoginState
04-12 19:43:10.249: W/dalvikvm(9508): VFY: unable to resolve static method 251: Landroid/support/v4/content/LocalBroadcastManager;.getInstance (Landroid/content/Context;)Landroid/support/v4/content/LocalBroadcastManager;
04-12 19:43:10.249: D/dalvikvm(9508): VFY: replacing opcode 0x71 at 0x0014 
```

`android.support.v4.content.LocalBroadcastManager.getInstance`似乎仍在 Android 兼容性库的源代码中。在我的 App.onCreate() 被称为 BTW 之前记录此警告。

我已经尝试使用`android-support-v4.jar`以前与我的应用程序一起使用的旧版本，以及`android-support-v4.jar`包含在最新 SDK 中的新版本，但两种情况下的结果是相同的（这看起来很有趣吧？）。

同样奇怪的是这样的警告流：

```
W/dalvikvm(12455): VFY: unable to find class referenced in signature (Ltwitter4j/User;) 
```

此处引用的 twitter4j 库似乎已正确包含在我的项目中。

我还在学习 Java，所以不确定是什么导致了这个问题。任何帮助将不胜感激。

仅供参考，完整的日志如下：

```
04-12 19:43:07.585: W/ActivityThread(9508): Application com.myapp.android is waiting for the debugger on port 8100...
04-12 19:43:07.593: I/System.out(9508): Sending WAIT chunk
04-12 19:43:07.601: I/dalvikvm(9508): Debugger is active
04-12 19:43:07.796: I/System.out(9508): Debugger has connected
04-12 19:43:07.796: I/System.out(9508): waiting for debugger to settle...
04-12 19:43:10.007: I/System.out(9508): debugger has settled (1403)
04-12 19:43:10.249: I/dalvikvm(9508): Could not find method android.support.v4.content.LocalBroadcastManager.getInstance, referenced from method com.myapp.android.App.setOAuthLoginState
04-12 19:43:10.249: W/dalvikvm(9508): VFY: unable to resolve static method 251: Landroid/support/v4/content/LocalBroadcastManager;.getInstance (Landroid/content/Context;)Landroid/support/v4/content/LocalBroadcastManager;
04-12 19:43:10.249: D/dalvikvm(9508): VFY: replacing opcode 0x71 at 0x0014
04-12 19:43:10.265: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/Twitter;)
04-12 19:43:10.265: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/Twitter;)
04-12 19:43:10.272: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/User;)
04-12 19:43:10.272: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/User;)
04-12 19:43:10.272: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/User;)
04-12 19:43:10.272: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/User;)
04-12 19:43:10.272: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/User;)
04-12 19:43:10.272: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/User;)
04-12 19:43:10.272: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/Twitter;)
04-12 19:43:10.280: E/dalvikvm(9508): Could not find class 'twitter4j.conf.ConfigurationBuilder', referenced from method org.tweetalib.twitter.TwitterManager.getAndConfigureTwitterInstance
04-12 19:43:10.280: W/dalvikvm(9508): VFY: unable to resolve new-instance 528 (Ltwitter4j/conf/ConfigurationBuilder;) in Lorg/tweetalib/twitter/TwitterManager;
04-12 19:43:10.280: D/dalvikvm(9508): VFY: replacing opcode 0x22 at 0x0013
04-12 19:43:10.288: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/auth/RequestToken;)
04-12 19:43:10.288: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/auth/RequestToken;)
04-12 19:43:10.296: W/dalvikvm(9508): VFY: unable to find class referenced in signature (Ltwitter4j/Twitter;)
04-12 19:43:10.296: I/dalvikvm(9508): Could not find method twitter4j.Twitter.getAccountSettings, referenced from method org.tweetalib.twitter.TwitterManager.isAuthenticated
04-12 19:43:10.296: W/dalvikvm(9508): VFY: unable to resolve interface method 2419: Ltwitter4j/Twitter;.getAccountSettings ()Ltwitter4j/AccountSettings;
04-12 19:43:10.296: D/dalvikvm(9508): VFY: replacing opcode 0x72 at 0x0008
04-12 19:43:10.296: W/dalvikvm(9508): VFY: unable to resolve exception class 519 (Ltwitter4j/TwitterException;)
04-12 19:43:10.296: W/dalvikvm(9508): VFY: unable to find exception handler at addr 0xd
04-12 19:43:10.296: W/dalvikvm(9508): VFY:  rejected Lorg/tweetalib/twitter/TwitterManager;.isAuthenticated ()Z
04-12 19:43:10.296: W/dalvikvm(9508): VFY:  rejecting opcode 0x0d at 0x000d
04-12 19:43:10.296: W/dalvikvm(9508): VFY:  rejected Lorg/tweetalib/twitter/TwitterManager;.isAuthenticated ()Z
04-12 19:43:10.296: W/dalvikvm(9508): Verifier rejected class Lorg/tweetalib/twitter/TwitterManager;
04-12 19:43:10.538: D/dalvikvm(9508): threadid=1: still suspended after undo (sc=1 dc=1)
04-12 19:43:16.780: D/AndroidRuntime(9508): Shutting down VM
04-12 19:43:16.780: W/dalvikvm(9508): threadid=1: thread exiting with uncaught exception (group=0x40a5a1f8)
04-12 19:43:16.804: E/AndroidRuntime(9508): FATAL EXCEPTION: main
04-12 19:43:16.804: E/AndroidRuntime(9508): java.lang.VerifyError: org/tweetalib/twitter/TwitterManager
04-12 19:43:16.804: E/AndroidRuntime(9508):     at com.myapp.android.App.onCreate(App.java:308)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3925)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at android.app.ActivityThread.access$1300(ActivityThread.java:122)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1184)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at android.os.Looper.loop(Looper.java:137)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at android.app.ActivityThread.main(ActivityThread.java:4340)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at java.lang.reflect.Method.invoke(Method.java:511)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-12 19:43:16.804: E/AndroidRuntime(9508):     at dalvik.system.NativeStart.main(Native Method)
04-12 19:43:20.585: W/jdwp(9508): Debugger is telling the VM to exit with code=1
04-12 19:43:20.585: I/dalvikvm(9508): GC lifetime allocation: 10536 bytes 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T22:30:02.517

库必须放在 /libs 文件夹中（注意：不是 /lib）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:35:10.677

该库必须放在`/libs`文件夹中，**而不是 /lib**！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:00:33.077

这个问题的两种可能的解决方案

1.  将所有 jar 文件从 lib 移动到 libs
2.  如果您使用 Ant 使用 pro-guard 构建，则在 proguard 文件中添加以下内容

    ```
     -keep class android.support.** { *; }
          -dontnote android.support.**
          -dontwarn android.support.** 
    ```

# asp.net-mvc-3 - 基本控制器的命名约定

> ID：10123119
> 
> 赞同：1
> 
> 时间：2012-04-12T11:58:45.423
> 
> 标签：asp.net-mvc-3, naming-conventions

在 MVC-3 我的应用程序中，一些控制器做类似的事情（CRUD 和索引）。因此，我创建了一个抽象的基本控制器，其中实现了类似的任务。另一个控制器只是扩展基本控制器。

现在，一切正常。但我对基本控制器的命名感到困惑。所有控制器类名都必须以“Controller”结尾才能使 MVC 正常工作。但是，我的基本控制器永远不会被直接使用。因此，它不需要以“控制器”结尾。此外，由于它不执行控制器的实际任务，我认为它听起来不应该像控制器。

那么，我的基本控制器的名称应该是什么？哪个更好： `MyBaseController`or `MyControllerBase`or `JustLikeOtherAbstractClasses`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:47:59.513

在我们的项目中，我们使用`MyControllerBase`命名约定。因为没有指南/约定`Controller`应该如何命名基类，所以您可以使用任何您喜欢的名称，只要保持一致即可。

基本上你想在这里命名一个抽象基类，它有一些选项：

*   [C# 类命名约定：是 BaseClass 还是 ClassBase 还是 AbstractClass](https://stackoverflow.com/questions/826821/c-sharp-class-naming-convention-is-it-baseclass-or-classbase-or-abstractclass)
*   [抽象类的命名约定](https://stackoverflow.com/questions/429470/naming-conventions-for-abstract-classes/429494#429494)
*   [我不喜欢“Base”后缀](http://blogs.msdn.com/b/kcwalina/archive/2005/12/16/basesuffix.aspx)

# perl - 从 SQLite 文件中提取原始数据

> ID：10123124
> 
> 赞同：1
> 
> 时间：2012-04-12T11:59:07.313
> 
> 标签：perl, sqlite, hex

你可能知道也可能不知道，当从 SQLite 文件中删除数据时，它仍然保留在文件中。它可以使用十六进制编辑器查看，但不会显示在 SQLite 或任何 SQLite 查看器中。

如何提取这些数据以使其仍然清晰易读？我正在考虑某种 perl 脚本，但如果 SQLite 看不到数据并且我只能在十六进制编辑器中看到它，我不知道该怎么做。

有任何想法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:21:03.580

如果 sqlite 看不到这些行，那么您需要自己解析原始文件格式。这并不容易。

有一个商业工具可以做到[Epilog](http://www.ccl-forensics.com/Software/epilog-from-ccl-forensics.html) - 不知道它有多好或它工作得如何。对你来说可能是值得的。

否则，您需要自己解析文件格式。[这里](http://antiforensics.net/Computer-Forensics/an-analysis-of-the-record-structure-within-sqlite-databases.html)有一些提示，或者您可能想破解 sqlite 代码本身，看看您是否可以让它忽略任何已删除的标记。

哦 - 如果你清理 db 文件，它实际上会删除已删除的行，所以不要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:00:34.567

你可以使用 Perl 的**[HexDump](http://search.cpan.org/~ftassin/Data-HexDump-0.02/lib/Data/HexDump.pm)**包

以下代码会将十六进制打印到屏幕上，其中*FooFile*是您的 sqllite 文件的路径：

```
use Data::HexDump;

my $f = new Data::HexDump;
$f->file("FooFile");
$f->block_size(1024);
print while $_ = $f->dump; 
```

# asp.net - 什么是跟踪侦听器？

> ID：10123125
> 
> 赞同：1
> 
> 时间：2012-04-12T11:59:15.287
> 
> 标签：asp.net, .net, asp.net-3.5

跟踪监听器的概念到底是什么？我试图在谷歌上搜索很多，但没有找到任何接近它的东西？有人可以给我任何链接吗？真的会很开心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:01:49.467

“Tracelistener”是从跟踪类获取跟踪信息并将数据输出到某种介质的对象。例如，您可以从图中“TraceListener”中看到它如何侦听跟踪对象并将其输出到 UI、文件或 Windows 事件日志。有三种不同类型的“tracelistener”，第一种是“defaulttracelistener”（将数据输出到 UI），第二种是“textwritertracelistener”（输出到文件），最后一种是“Eventlogtracelistener”，它输出相同的内容到窗口事件日志。

![在此处输入图像描述](../Images/cad8dd62861a0cd36c2bce22be8be04c.png) 图 7.12 : - TraceListener

下面是“textwritertracelistener”和“eventlogtracelistener”的代码片段。使用“textwritertracelistener”，我们将跟踪转发到“ErrorLog.txt”文件，在第二个片段中，我们使用“Eventlogtracelistener”将跟踪转发到 Windows 事件日志。

![在此处输入图像描述](../Images/973645c7866cc6cde13867f3f23ddd17.png) 图 7.13 :- 正在运行的 Tracelistener

这是参考。[ [http://www.dotnetspark.com/kb/254-asp-net-interview-questions---part-2.aspx](http://www.dotnetspark.com/kb/254-asp-net-interview-questions---part-2.aspx) ]

# macos - Mac OS X 中可运行的 JavaCV 项目

> ID：10123127
> 
> 赞同：0
> 
> 时间：2012-04-12T11:59:24.720
> 
> 标签：macos, opencv, executable-jar, javacv

我正在开发一个简单的应用程序，它使用 OpenCV 包装器 JavaCV 通过网络摄像头捕获图像。

我尝试在 Windows 7 OS 中的 Netbeans IDE 7.0.1 中运行 JavaCV 的基本源代码，它可以工作，但是当我在 Windows 7 和 Mac OS 中运行可执行的 .jar 文件或编译/构建文件时，网络摄像头馈送是不工作或显示。你能给我一步一步的过程来解决这个问题吗？我只是一个业余的 Java 程序员，所以很容易理解说明/答案将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:27:39.717

[为了获得跨平台工作的独立 JAR，我们还需要以与 FaceApplet 示例](http://code.google.com/p/javacv/wiki/HowToMakeAnApplet)类似的方式捆绑 OpenCV 的本机库。

# perl - 使用具有 NTLM 身份验证的 LWP 时子例程条目中的宽字符

> ID：10123128
> 
> 赞同：3
> 
> 时间：2012-04-12T11:59:30.807
> 
> 标签：perl, ntlm, lwp, lwp-useragent

我试图让 LWP 与配置了 NTLM 身份验证的 IIS 服务器一起工作。当服务器上的 NTLM 身份验证关闭时，代码工作正常，所以我认为这里唯一的问题是 NTLM 身份验证。

到目前为止，我有以下内容：

```
my $ua = LWP::UserAgent->new(agent => "whatever",
                            timeout => $timeout, keep_alive => 1);
$ua->credentials('hostname:80', '', $username, $password);

my $hdr = HTTP::Headers->new("Content-Type" => "text/xml; charset=UTF-8",
                             "SOAPAction" => "\"whatever\"");

my $req = HTTP::Request->new("POST" => $url, $hdr, encode_utf8($post));
$res = $ua->request($req); 
```

如果我打开调试，我会收到以下消息：

```
LWP::UserAgent::new: ()
LWP::UserAgent::request: ()
LWP::UserAgent::send_request: POST http://hostname
LWP::UserAgent::_need_proxy: Not proxied
LWP::Protocol::http::request: ()
LWP::Protocol::http::request: Keep the http connection to hostname:80
LWP::UserAgent::request: Simple response: Unauthorized
LWP::Authen::Ntlm::authenticate: authenticate() has been called
Use of uninitialized value in exists at /usr/lib/perl5/vendor_perl/5.8.5/LWP/UserAgent.pm line 560.
Use of uninitialized value in hash element at /usr/lib/perl5/vendor_perl/5.8.5/LWP/UserAgent.pm line 561.
LWP::Authen::Ntlm::authenticate: In first phase of NTLM authentication
[Thu Apr 12 13:55:28 2012] [error] Wide character in subroutine entry at /usr/lib/perl5/site_perl/5.8.5/Authen/NTLM.pm line 346.\n
LWP::Protocol::collect: read 625 bytes
LWP::UserAgent::request: Simple response: Internal Server Error 
```

尝试访问相同的 URL 可以`wget`正常工作。的文档[`MIME::Base64`](https://metacpan.org/module/MIME%3a%3aBase64)说，`Wide character in subroutine entry`如果 $bytes 包含代码高于 255 的字符，则编码函数将发出嘶嘶声。

我是否在这里遗漏了一些重要的东西，或者这可能是一个错误[`Authen::NTLM`](https://metacpan.org/module/Authen%3a%3aNTLM)？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T12:24:56.930

$post 中有什么？也许是包含错误数据。

尝试这个：

```
my $post_encoded = encode_utf8($post);
print Dumper($post,$post_encoded);
my $req = HTTP::Request->new("POST" => $url, $hdr, $post_encoded); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-12T18:18:44.307

只需使用卷曲

```
curl --ntlm -u 'username:password' url 
```

# java - 在 JME 中拆分文本并在数组中分配值

> ID：10123129
> 
> 赞同：3
> 
> 时间：2012-04-12T11:59:33.000
> 
> 标签：java, java-me, lwuit, stringtokenizer

我正在尝试在 j2me 中创建一个带有拆分文本的数组。我正在尝试使用 ostermiller.org 的 StringTokenizer 类。但是我不知道如何将令牌分配到数组中。这段代码可能有什么问题？

```
String[] myToken;
StringTokenizer tokenObject;
tokenObject = new StringTokenizer("one-two-three","-");
myToken= tokenObject.nextToken(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:06:07.150

您必须使用一个循环来检查是否有更多令牌，并在循环中获取下一个令牌。

尝试这个：

```
StringTokenizer tokenizer = new StringTokenizer("one-two-three", "-");
while (tokenizer.hasMoreTokens()) {
    String token = tokenizer.nextToken();
    // Do something with variable "token"
} 
```

# objective-c - NSXMLParser：存储值在哪里？

> ID：10123132
> 
> 赞同：0
> 
> 时间：2012-04-12T11:59:37.097
> 
> 标签：objective-c, ios, nsxmlparser

我希望我的应用程序将`XML`文件作为某种预初始化程序使用。我想分析 xml 文件，然后绘制屏幕。因此，例如，我在 struct 中有一个 xml 文件：

```
<app>
   <screens>        
    <screen name="myscreen1">
            <font fontsize="32" fontcolor="#000000" fontface="font.ttf"/>

            <button tmpl="bk"/>

            <list area="0px 74px 100% 100%">
                <item tmpl="myitem1" target="myitemelsewhere">
                    <image tmpl="myitem1" img="myimg1.png"/>
                    <text tmpl="myitem1">Test</text>
                </item>
                <item tmpl="myitem2" target="myitemelsewhere">
                    <image tmpl="myitem2" img="myimg2.png"/>
                    <text tmpl="myitem2">Test</text>
                </item>
             </list>
    </screen>
<!--screen 2 the same way -->
</screens>
</app> 
```

我实现`NSXMLparser`了，我可以简单地读取属性和标签。那**不是**问题。我的问题是。当我得到第一个元素（例如 myscreen1）时，最好的办法是把它放在哪里，然后再获取所有的屏幕声明标签和属性？`NSSet`? `NSDictionary`? `NSArray`? 例如：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 
{
    element = [NSMutableString string];

    if([elementName isEqualToString:@"screen"])
    {
        //What should i do here to tell my app to store all attributes? Where to put this?
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:19:14.883

您通常有一个变量来保存流入的数据，还有一个变量来存储您正在处理的 XML 标记。您在上面给出的位置是用于设置您当前正在处理的 XML 标记。这是一个很好的示例代码，可以帮助您入门：

[http://weblog.bignerdranch.com/?p=48](http://weblog.bignerdranch.com/?p=48)

# linux - 我应该如何应用这种类型的补丁？

> ID：10123133
> 
> 赞同：1
> 
> 时间：2012-04-12T11:59:38.060
> 
> 标签：linux, bash, patch

一些补丁只是提供

```
317c317
<                global $wgScript, $wgUser, $wgParser, $wgTitle, $wgOut;
---
>                global $wgScript, $wgUser, $wgParser, $wgTitle, $wgOut, $wgLocalTZoffset;
370c370,371
<                               $output .= "<div class='news-bulletin-time'>" . date("M j, Y g:i a",strtotime($row->cl_timestamp)) . "</div>";
---
>                               //Patched to display correct time in current time zone
>                               $output .= "<div class='news-bulletin-time'>" . date("M j, Y g:i a",strtotime($row->cl_timestamp) + ($wgLocalTZoffset * 60)) . "</div>"; 
```

我如何申请诸如补丁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:03:51.690

只需使用该[`patch`](http://linux.die.net/man/1/patch)工具和您的文件。

```
patch original.txt diffs.patch 
```

这成立，如果`diffs.patch`是一个`diff`没有额外参数（你的例子似乎是）生成的补丁。例如，如果您有一个统一的差异 ( `diff -u`)，您必须`patch`通过传递适当的标志（`-u`用于统一差异）来说明这一点。

# iphone - 是否有可能找到是否点击了 Twitter 的记住我按钮？

> ID：10123134
> 
> 赞同：0
> 
> 时间：2012-04-12T11:59:44.787
> 
> 标签：iphone, twitter

我们是否有可能从我们的 iphone 应用程序中找到是否点击了 twitter**记住我**按钮？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:16:30.527

如果您指的是 Twitter 应用程序中的“记住我”按钮，那么**不**，您不能。应用程序通信的唯一方式是通过 URL 方案（或者如果它们共享一个钥匙串）。他们无法读取彼此的首选项文件。

# java - 为什么要使用空的抽象类而不是接口？

> ID：10123139
> 
> 赞同：6
> 
> 时间：2012-04-12T11:59:54.270
> 
> 标签：java, gwt, interface, abstract-class

我使用 GWT 和 Place & Activity 机制。

很遗憾 Place 是一个类，因为我的自定义位置不能扩展另一个类。

当我查看地方代码时，我看到以下内容：

```
public abstract class Place {

  /**
   * The null place.
   */
  public static final Place NOWHERE = new Place() {
  };

} 
```

看到这一点，Place 可以是一个界面。GWT 团队选择将 Place 设为抽象类而不是接口是否有充分的理由？

概括地说：创建真正空的抽象类与接口是否有充分的理由？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T12:03:22.580

一般来说，我不会定义一个空的抽象类

但是，当我期望将来有一些成员时，我可能会决定使用抽象类而不是接口

“类”的意思是：这是一个

“界面”的意思是：这个支持

对于“地方”，我真的可以看到两者都有一点直观的类偏好

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T12:07:06.387

> GWT 团队选择将 Place 设为抽象类而不是接口是否有充分的理由？

我想不出一个。但实际上，在 SO 上抱怨它并不会取得任何成果。

> 概括地说：创建真正空的抽象类与接口是否有充分的理由？

假设您这样做是为了确保为未来的预期需求提供一个通用基类......或出于其他原因。

但总的来说，这是一个坏主意……IMO。

（当然，由于历史原因，这样的事情经常发生；例如，`abstract`该类过去可能有更多成员已被删除。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T16:36:49.553

我真的不能说`Place`（虽然我有一些想法，见下文），但它被讨论过`Activity`：[https ://groups.google.com/d/topic/google-web-toolkit-contributors/V8rhZHiXFRk /讨论](https://groups.google.com/d/topic/google-web-toolkit-contributors/V8rhZHiXFRk/discussion)

就历史而言，`Place`它[一直是](http://code.google.com/p/google-web-toolkit/source/browse/trunk/bikeshed/src/com/google/gwt/app/place/Place.java?r=7743)GWT 中的一个抽象类（和 FWIW，这个`NOWHERE`地方是在[很久之后](http://code.google.com/p/google-web-toolkit/source/detail?r=8549)添加的；请注意，这个提交引用了一个 Wave——很快就会从互联网上消失——我们可以看到`interface Place`它是在他们设计 API 时的某个时间点的接口）。

鉴于`PlaceHistoryGenerator`（在您使用`GWT.create()`a时使用`PlaceHistoryMapper`）查看位置层次结构，拥有一个抽象类可以减少很多边缘情况！
想象一下你的`PlaceHistoryMapper`引用 a`PlaceTokenizers<Foo>`和`PlaceTokenizer<Bar>`你有​​一个`class FooBar implements Foo, Bar { }`，应该使用哪个分词器？如果您没有`FooBar`在您的`PlaceHistoryMapper`，生成器不会看到它（或者更确切地说不会看到它），那么它应该生成哪种代码呢？请记住，我们都想要确定性，因此生成的代码应该始终相同。使用一个类，生成器可以通过它们的继承树（从最具体的——最衍生的——到最不具体的）对它们进行排序，并且可以安全地假设类没有特定继承关系的 2 个地方是完全不同的，所以它们可以是以任何顺序检查（`instanceof`在生成的代码中）并且仍然提供稳定的结果⇒确定性。

*免责声明：我是[报告](https://jira.springsource.org/browse/ROO-1296)订购问题然后[提供补丁的](http://code.google.com/p/google-web-toolkit/source/detail?r=8817)人，但`Place`已经是一个班级。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:25:15.560

我不能代表 GWT 团队，但似乎这个抽象类的唯一原因是强制定义 NOWHERE。

正如您所发现的，以这种方式使用抽象类会迫使您进入一个可能不适合您的业务模型的类层次结构。*因此，一般来说，如果抽象类真的完全是空的，那根本就没有目的。*

这个例子特别奇怪，因为接口是一个契约。GWT`Place`没有接口，因此没有合约。他们的 javadoc 指出：

> “代表应用程序中的可收藏位置”

我本来希望定义一些合同来处理这种情况。可添加书签的位置需要哪些方法？如果这只是一个标记，比如`Serializable`，我肯定希望它是一个接口而不是一个抽象类。

# c# - ASP.NET MVC 3 - 处理会话变量

> ID：10123143
> 
> 赞同：7
> 
> 时间：2012-04-12T12:00:37.920
> 
> 标签：c#, asp.net-mvc-3, forms-authentication, asp.net-session

我有一个使用表单身份验证的应用程序，当用户登录时，我检索用户的实际名称并将其分配给会话变量，如下所示：

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            Session["Name"] = client.GetName(model.UserName);
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            return RedirectToAction("Index", "Home"); 
        }
    }
} 
```

然后它会显示在我的索引视图上，如下所示：

```
<h3>Welcome, @Session["Name"]</h3> 
```

因此，如果我的名字是 Bob，它会在我的视图上输出“Welcome, Bob”，这很好用。但是一旦我离开页面或关闭浏览器并在几分钟后返回，似乎这些 Session 变量已被破坏，因为它只是输出“欢迎”，但我仍然登录，所以我的会话没有被破坏？我在 web.config 中将会话设置为 60 分钟后销毁：

```
<sessionState regenerateExpiredSessionId="true" timeout="60" /> 
```

## 编辑

仅当我在登录时选中“记住我”框时才会发生这种情况，因为我猜这会保留一个 cookie 客户端，所以当我重新打开浏览器时，我仍然登录，但创建了一个新的会话 ID，就像我`Response.Write(Session.SessionID)`在我的关闭浏览器之前的索引页面和 ID 与我重新打开浏览器时的不同。如果我没有选中“记住我”框，那么我将在重新打开浏览器时被迫再次登录

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:28:45.080

我的会话变量也有同样的问题。如果在登录时选择了记住我选项，它将绕过我的代码来设置我下次用户访问该站点时需要的会话变​​量。

如果 IsAuthenticated 为真，我可以通过重新填充会话变量来解决我的问题。

```
protected void Session_Start(object sender, EventArgs e)
{
    if (User.Identity.IsAuthenticated)
    {
        Session["Name"] = client.GetName(User.Identity.Name);   
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T21:45:14.560

无需将名称添加到会话变量中，只需更改以下内容

```
FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); 
```

至

```
FormsAuthentication.SetAuthCookie(client.GetName(model.UserName), model.RememberMe); 
```

然后，您可以只使用 User.Identity.Name 而不是 @Session["Name"]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:05:26.903

也许首先检查以确保没有以某种方式启动新会话。`Session_Start`在文件中放置断点`global.asax.cs`：

```
protected void Session_Start(object sender, EventArgs e)
{
    var sessionId = Session.SessionID; // break here
} 
```

这可能看起来很愚蠢，但实际上有几件事可能会导致新的会话。消除这些将使您更接近解决方案。

关闭浏览器并再次打开它可能会导致一个新会话。对站点中文件夹结构的更改和对 web.config 的更改将导致一个新会话（应用程序池将被回收）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:10:33.580

你遇到的问题是线路

```
FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); 
```

这是一个 cookie，持续时间比会话长（取决于您设置表单超时的时间）

如果您只需要显示用户名，则可以使用并完全删除会话

```
<h3>Welcome, @User.Identity.Name</h3> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T12:17:21.337

```
FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); 
```

此代码应该可以正常工作，您应该能够看到`"Welcome USERNAME"`，尝试查看是否 检查了`tools-->internet options-->General`选项卡等 IE 设置`delete my browsing history`。（在同一个选项卡上，您单击删除按钮，您也会看到它正在清除 cookie，这可能是个问题）。

如果您关闭浏览器而不是 session(inproc) 变量，则将保留 Cookie 值。

# c# - 字符串未被识别为有效的日期时间？

> ID：10123145
> 
> 赞同：3
> 
> 时间：2012-04-12T12:00:50.557
> 
> 标签：c#, asp.net, string, datetime, cultureinfo

我尝试将字符串转换为，`datetime`但每次我得到：

> 字符串未被识别为有效的日期时间。

代码是：

```
string format = "dd/MM/yyyy";

obj.TransDate = DateTime.ParseExact(lbl_TransDate.Text.Split('/')[0] + "/" + lbl_TransDate.Text.Split('/')[1] + "/" + lbl_TransDate.Text.Split('/')[2], format, CultureInfo.InvariantCulture); 
```

当我调试我尝试解析的日期时：`12/4/2012`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T12:02:35.673

所需的格式是

```
string format = "dd/M/yyyy"; 
```

不过我不明白，为什么要拆分连接字符串，因为你会得到同样的东西？

如果输入是*12/4/2012 ，在被**'/'*分割后，你会得到 12, 4, 2012 然后将它们连接起来得到“12/4/2012”。为什么这个？

此外，如果您真的需要拆分，您可以存储到一个数组中，这样您就不需要拆分 3 次：

```
var splits = lbl_TransDate.Text.Split('/');
DateTime.ParseExact(splits[0] + "/" + splits[1] + "/" + splits[2], ...); 
```

如果您不信任输入，则拆分数组可能不是 Length = 3，并且更多，您可以使用*DateTime.TryParseExact*

**编辑**您可以使用多种格式的重载因此，如果输入可能是*12/4/2012 或 12/04/2012*，您可以同时提供两种格式

```
var formats = new[] {"dd/M/yyyy","dd/MM/yyyy"};
var date = DateTime.ParseExact("12/4/2012", formats, 
                                        System.Globalization.CultureInfo.InvariantCulture,
                                        System.Globalization.DateTimeStyles.AssumeLocal); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:18:51.817

我同意其他答案，看起来您为解决应该是一个简单的问题做了很多工作。我会使用文化信息中的英国日期格式。

```
var convertedDay = DateTime.Parse("12/04/2010", new CultureInfo("en-GB").DateTimeFormat); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T12:06:38.913

您正在指定`MM`何时只有一个数字。要么只使用一个，要么使用该函数`M`在左边填充零。`PadLeft`

以下代码演示了这两者`dd`并`MM`根据需要填充

```
string format = "dd/MM/yyyy";
string mydate = "12/4/2012";
DateTime t = DateTime.ParseExact(mydate.Split('/')[0].PadLeft(2,'0') + "/" + 
                                 mydate.Split('/')[1].PadLeft(2,'0') + "/" + 
                                mydate.Split('/')[2], format, CultureInfo.InvariantCulture); 
```

输出是：

```
12/04/2012 00:00:00 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T06:28:20.320

确保在您的网络配置中添加以下内容

```
<system.web>
<globalization culture="en-AU"/>... 
```

有关正确的文化国家/地区代码，请参阅以下内容

[http://sharpertutorials.com/list-of-culture-codes/](http://sharpertutorials.com/list-of-culture-codes/)

# jquery - 来自函数参数的jquery当前元素

> ID：10123146
> 
> 赞同：1
> 
> 时间：2012-04-12T12:00:51.180
> 
> 标签：jquery

我正在使用 jquery-imagetool 插件来裁剪图像。我的 jquery 代码如下所示：

```
$('div.image img').imagetool({
    viewportWidth: 171,
    viewportHeight: 267
}) 
```

我想从 div.image 元素的 css 中获取 viewportWidth 参数，所以我需要获取当前元素（img）并调用 parent() 给它。

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T12:04:22.137

使用 each 单独处理图像，然后您可以获得 div 的宽度。

```
$('div.image img').each(function() {
    var width = $(this).closest('div.image').width();
    $(this).imagetool({
        viewportWidth: width,
        viewportHeight: 267
    });
}); 
```

# java - java - 如何从Java中的pdf获取指定的页面范围？

> ID：10123152
> 
> 赞同：0
> 
> 时间：2012-04-12T12:01:18.637
> 
> 标签：java, pdf

我有很大的（大约 1000 页）pdf 文件。是否有一些 Java API/库可以从该 pdf 中提取例如 6-10 页（作为新的 pdf 文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:10:02.083

我已经用[iText做到了](http://itextpdf.com/itext.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:03:04.767

您可以使用 PDFBox 。

[http://pdfbox.apache.org/](http://pdfbox.apache.org/)

# wcf - 如何从 WCF 中的 SOAP 请求中删除 VsDebuggerCausalityData 标头部分

> ID：10123153
> 
> 赞同：2
> 
> 时间：2012-04-12T12:01:22.767
> 
> 标签：wcf, soap, .net-3.5, wcf-security

我已经添加

```
 <system.diagnostics>
   <switches>
     <add name="Remote.Disable" value="1" />
   </switches>
 </system.diagnostics> 
```

到我的 app.config，但 SOAP 客户端仍会生成标头。

我正在使用带有 messageversion Soap11 和 httpstransport 集的自定义绑定。

有没有简单的去除方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T21:18:39.463

我通过手动删除负责放入 vscasualitydata 的行为解决了这个问题。

```
 var vs = srv.Endpoint.Behaviors.Where((i) => i.GetType().Namespace.Contains("VisualStudio"));
        srv.Endpoint.Behaviors.Remove((System.ServiceModel.Description.IEndpointBehavior)vs.Single()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T05:55:59.123

尝试在 Visual Studio 中禁用对 WCF 的调试器支持

运行这个卸载 - vsdiag_regwcf.exe -u

它位于`C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\`

您可以使用 -i 参数重新安装调试器支持，并且可以使用 -s 参数检查是否启用了调试器支持。

有关更多详细信息，请查看[此](http://aspdotnetdevelopment.wordpress.com/2011/04/11/how-to-remove-vsdebuggercausalitydata-from-a-soap-request/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-25T14:26:26.067

根据我提出的“工作”答案，`@Luiz Felipe`我想出了这个更强大的解决方案：

```
var vs = client.Endpoint.EndpointBehaviors.FirstOrDefault((i) => i.GetType().Namespace == "Microsoft.VisualStudio.Diagnostics.ServiceModelSink");
if (vs != null)
{
    client.Endpoint.Behaviors.Remove(vs);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:00:26.970

当您的配置打开 wcf 跟踪或日志记录时，将添加标头。关闭它们，这将不会被发送。

# macos - OSX Apache 从不同的目录运行？

> ID：10123157
> 
> 赞同：1
> 
> 时间：2012-04-12T12:01:37.980
> 
> 标签：macos, apache

我正在运行 apache，但它似乎使用的是另一个目录而不是`/opt/local/apache2`：

*   我已将`/opt/local/apache2/conf/httpd.conf`DocumentRoot 设置为我想要的位置（/Users/jasons/Sites/localmirror/htdocs），但我的文档不可见（这曾经有效）
*   我从“它有效！”编辑了 /opt/local/apache2/htdocs/index.html 到“它工作kkks！” 但尽管重新启动 Apache 并清除了我的浏览器缓存，它仍然显示“它可以工作！” 当我浏览[http://localhost](http://localhost)

这让我相信 httpd 正在使用另一个目录运行，但我不知道在哪里。谁能帮我弄清楚在哪里？`ps -ax`没有说明任何事情。

* * *

更新：在 /Library/WebServer/Documents/index.html.en 中找到 index.html 文档，但我不知道它为什么指向这里。

* * *

ARGH：我似乎无法摆脱这个错误：

> httpd：/opt/local/apache2/conf/httpd.conf 第 115 行的语法错误：无法将 /opt/local/apache2/modules/libphp5.so 加载到服务器中：dlopen(/opt/local/apache2/modules/libphp5 .so, 10): 没有找到合适的图片。确实找到了：\n\t/opt/local/apache2/modules/libphp5.so: mach-o，但是架构错误

我不知道从哪里获得正确的 libphp5.so

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:07:43.433

尝试点击一个不存在的页面，然后查看 error_log 文件。它应该给你一个错误消息：

```
[Thu Apr 12 13:06:51 2012] [error] [client 127.0.0.1] File does not exist: /usr/local/apache2/htdocs/asdasd 
```

该绝对路径是您的文档根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-26T15:06:14.617

我想您使用 MacPorts 来安装 apache。使用下一个命令：

```
sudo port install php56 php56-apache2handler
sudo port select php php56

cd /opt/local/apache2/modules
sudo /opt/local/apache2/bin/apxs -a -e -n php5 mod_php56.so

sudo nano /opt/local/apache2/conf/httpd.conf
    Check that only mod_php56 is enabled, comment the rest:
        LoadModule php5_module modules/mod_php56.so
        #LoadModule php5_module modules/mod_php55.so
    and add at the end of file:
        Include conf/extra/mod_php56.conf 
```

暗示：

```
sudo port install php56-exif php56-xdebug etc 
```

有关更多信息，请查看[此链接](https://gist.github.com/raphaelstolt/2721719)。

# android - 如何在 Android 中从 XML 膨胀视图？

> ID：10123159
> 
> 赞同：14
> 
> 时间：2012-04-12T12:01:55.177
> 
> 标签：android, user-interface, view, android-tablelayout, android-inflate

我正在创建一个 tableLayout [以 XML 给出]

添加表行 [在 XML 中创建并在 Java 中膨胀]

还将 2 textview 添加到 table Row [在 XML 中创建并在 JAVA 中膨胀]

我只能获取背景和文本颜色，但不能获取宽度、高度和边距等布局属性来获取表格视图。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-10-01T07:35:25.340

1.  首先声明你的充气机。

    ```
    LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService
      (Context.LAYOUT_INFLATER_SERVICE); 
    ```

2.  识别并扩展您寻求在当前视图上投影的新视图。

    ```
    View view = inflater.inflate(R.layout.new_layout,null); 
    ```

3.  您可能希望将新的膨胀视图添加到布局中。

    ```
    main.addView(view); 
    ```

您可以在此处参考其他信息：http: [//developer.android.com/reference/android/view/LayoutInflater.html](http://developer.android.com/reference/android/view/LayoutInflater.html)

**2019 年 5 月更新（Kotlin）：** 这是您在 Kotlin 中从 XML 中扩充视图的方式。这是指一项活动。

```
val view = this.layoutInflater.inflate(R.layout.dialog_upgrade, null)
mainLayout.addView(view) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-12T12:11:21.257

```
LayoutInflater li = LayoutInflater.from(getApplicationContext());
View cv = li.inflate(R.layout.your_layout, null);

mainlayout.addView(cv); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T12:34:36.717

```
LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService      (Context.LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.your_layout,null);
mainlayout.addView(view; 
```

按照上面的膨胀视图。

# android - 在 WebView 上以编程方式双击

> ID：10123166
> 
> 赞同：0
> 
> 时间：2012-04-12T12:02:46.250
> 
> 标签：android, android-layout

我有一个通用活动，其中包含一个 webview 来显示不同的基于 html 的内容。

每个 html 内容都有这样的元标记。

```
<meta name="viewport" content="width=device-width,height=device-height, minimum-scale=0.4, maximum-scale=3,initial-scale=0.5"> 
```

并且 WebView 以编程方式配置为使用这些代码适应屏幕中的内容。

```
WebView webView = (WebView) findViewById(R.id.webview1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setLoadWithOverviewMode(true);        
        webView.getSettings().setUseWideViewPort(true);     
        webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        webView.setScrollbarFadingEnabled(true);
        webView.getSettings().setBuiltInZoomControls(true);    
        webView.getSettings().setLoadsImagesAutomatically(true);
        webView.getSettings().setLightTouchEnabled(true);
        webView.getSettings().setDomStorageEnabled(true);

        webView.setBackgroundColor(0); 
```

不幸的是，元代码和 webview 配置都不适合屏幕中的内容；但双击适合内容非常好。所以我想知道我可以以编程方式模拟对 webview 的双击吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:06:30.803

```
/**
 * 
 */
package com.y2cf.hoppr.utils.viewutils;

import android.content.Context;
import android.os.SystemClock;
import android.util.AttributeSet;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.webkit.WebView;

/**
 * @author rajesh
 *
 */
public class MyWebView extends WebView {

    private GestureDetector gestureDetector;

    /**
     * @param context
     */
    public MyWebView(Context context) {
        super(context);
        gestureDetector = new GestureDetector(context, new GestureListener());
        // TODO Auto-generated constructor stub
    }

    /**
     * @param context
     * @param attrs
     */
    public MyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
        gestureDetector = new GestureDetector(context, new GestureListener());
        // TODO Auto-generated constructor stub
    }

    /**
     * @param context
     * @param attrs
     * @param defStyle
     */
    public MyWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        gestureDetector = new GestureDetector(context, new GestureListener());
        // TODO Auto-generated constructor stub
    }

    public void simulateDoubleTap()
    {

        simulateDoubleTapEvent(0);
        simulateDoubleTapEvent(2);
        simulateDoubleTapEvent(2);
        simulateDoubleTapEvent(1);
        simulateDoubleTapEvent(0);
    }

    private void simulateDoubleTapEvent(int action)
    {
        long downTime = SystemClock.uptimeMillis();
        long eventTime = SystemClock.uptimeMillis() + 100;
        float x = 0.0f;
        float y = 0.0f;
        // List of meta states found here: developer.android.com/reference/android/view/KeyEvent.html#getMetaState()
        int metaState = 0;
        MotionEvent me = MotionEvent.obtain(
            downTime, 
            eventTime, 
            action, 
            x, 
            y, 
            metaState
        );
        dispatchTouchEvent(me);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub
        return gestureDetector.onTouchEvent(event);
    }

    private class GestureListener extends GestureDetector.SimpleOnGestureListener {

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }
        // event when double tap occurs
        @Override
        public boolean onDoubleTap(MotionEvent e) {
            float x = e.getX();
            float y = e.getY();

            Log.d("Double Tap", "Tapped at: (" + x + "," + y + ")");

            return true;
        }
    }

} 
```

创建一个这样的类并调用simulateDoubleTap() 方法。希望这会有所帮助，并且您的 webview 应该是此类的一个实例。

# asp.net-mvc - 表单提交后将 HttpGet 中的模型项获取到 HttpPost - ASP.NET MVC 3

> ID：10123167
> 
> 赞同：1
> 
> 时间：2012-04-12T12:02:48.810
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, http-post, http-get

我遇到了点小麻烦。

我有一个这样的 HttpGet 方法：

```
[HttpGet]
public ActionResult Form()
{
    MyModel model = new MyModel();
    model.something = "hi";
    return View(model);
} 
```

在我的模型中：

```
public string something { get; set; }

[Display(Name="Something Else:")]
public string somethingelse { get; set; } 
```

在我看来，我有一个表格：

```
@model Path.To.Models.MyModel

@Html.TextBoxFor(model => model.somethingelse)

<input type="submit" value="Submit" /> 
```

问题是在提交表单后，model.something 返回为 null 而不是我所期望的，即“hi”

这是我的 HttpPost

```
[HttpPost]
public ActionResult Form(MyModel model)
{
    // model.somethingelse equals the form value, which is right
    // model.something is null, instead of what I expect - "hi"

    return View(model);
} 
```

谁能帮我这个？表单提交后，我需要从 GET 获取数据到 POST，但它返回 null。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:06:00.273

您必须将“未更改的值”放在视图中的隐藏字段中

```
@Html.HiddenFor(m => m.something) 
```

否则不会通过！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:05:49.370

您需要将 的值`something`与表单一起提交，您可以使用隐藏输入来执行此操作：

```
@model Path.To.Models.MyModel

@Html.HiddenFor(model => model.something)
@Html.TextBoxFor(model => model.somethingelse)

<input type="submit" value="Submit" /> 
```

# cakephp - CakePHP 2.1 --> CustomAuthorization 类不能正常工作

> ID：10123171
> 
> 赞同：0
> 
> 时间：2012-04-12T12:03:05.590
> 
> 标签：cakephp, cakephp-2.0

我使用说明书使用以下代码创建了我自己的自定义身份验证：

```
// Controller/Auth/CustomAuthenticate.php

App::uses('BaseAuthenticate', 'Controller/Component/Auth');

class CustomAuthenticate extends BaseAuthenticate {

    public function authenticate(CakeRequest $request, CakeResponse $response) {
        return false;
    }
} 

// Controller/UserController.php

class UserController extends AppController {
   var $components = array('Auth' => array('authenticate' => array('Custom')));

   public function login() {
      // some code that includes:
      $this->Auth->login($this->request->data);
   }
} 
```

不知何故，使用正确的凭据，登录似乎可以工作，尽管我的 CustomAuthentication 类中的 authenticate 方法返回 false。

我正在使用 CakePHP 2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:20:20.787

你不能指望这能正常工作，因为你不应该传递`$this->request->data`登录表单。

这只是

```
$this->Auth->login(); 
```

否则，您将跳过身份验证，并且传递的数据将始终登录该用户。无论它是垃圾还是正确的凭据。永远不要用登录表单这样做。

# visual-c++ - 关闭主对话框并显示另一个作为主对话框，MFC

> ID：10123177
> 
> 赞同：0
> 
> 时间：2012-04-12T12:03:16.283
> 
> 标签：visual-c++, mfc

我的应用程序（基于 MFC 对话框的应用程序）有两个对话框。第一个对话框就像一个登录页面，应该隐藏，一旦登录成功，就会显示另一个对话框。我正在使用以下代码隐藏主对话框并显示主窗口

```
 CDialog:: OnOK();// to hide the login dialog
            mainwindow.DoModal() ;// show the new dialog box 
```

我的问题在于我的任务栏：一旦我这样做，应用程序就会从我的任务栏中消失，但它存在于 CRL+TAB 选项中。如何使第二个对话窗口在任务栏中可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:02:00.887

[管理任务栏按钮](http://msdn.microsoft.com/en-us/library/bb776822%28v=VS.85%29.aspx#Managing_Taskbar_But)说：

> 要确保窗口按钮位于任务栏上，请使用 WS_EX_APPWINDOW 扩展样式创建一个无主窗口。

# android - adb 无法正确查看设备

> ID：10123179
> 
> 赞同：1
> 
> 时间：2012-04-12T12:03:17.467
> 
> 标签：android, eclipse, adb

三星galaxy tab 7.0
Ubuntu 11.04
udev 规则没问题。
启用设备上的调试。

问题：命令“adb devices”将设备序列号打印为“???????????” （很多问题标志）和设备状态“离线”，有时会变成“设备”。
无论如何，从 eclis 运行 android 项目是不可能的，因为它认为设备是“??????????”。有时重启后一切都会好起来，但现在它完全坏了，重启也无济于事。

我不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:41:50.010

问题出在坏电缆上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:22:14.693

您需要创建新文件`/etc/udev/rules.d/51-android.rules`

首先使用成为 root，然后使用在我在这里使用的供应商 ID 中写入一行来`sudo -s`编辑新文件，对于 G1，您必须使用三星 Galaxy Tab 7.0 供应商 ID。重启。`gedit /etc/udev/rules.d/51-android.rules``SUBSYSTEM=="usb", SYSFS{idVendor}=="0bb4", MODE="0666"``adb`

# jquery - 在单击 prev 按钮时使用 django 视图更新 jquery fullcalendar 中的事件

> ID：10123192
> 
> 赞同：2
> 
> 时间：2012-04-12T12:04:02.877
> 
> 标签：jquery, python, ajax, django, fullcalendar

根据@demalexx 的[回复](https://stackoverflow.com/questions/10069997/using-jquery-fullcalendar-in-django-app/10089534#10089534)，我在jquery fullcalendar 中创建了代码来显示我的django 应用程序的用户创建的帖子数。我将日历放在index.html 中并创建了django 视图来填充事件数据。

索引.html

```
...
$(document).ready(function() {
   $('#calendar').fullCalendar({
       events: {{posts_counts|safe}}
});
... 
```

django视图

```
 def index(request){
      now=datetime.datetime.now()
      cday=now.day
      cmonth=now.month
      cyear=now.year
      for i in range(1,cday+1):
        posts_count.append({'title':str(Post.objects.filter(postauthor=request,user,posteddate__year=current_year,posteddate__month=current_month,posteddate__day=i).count()),'start':now.strftime("%Y-%m-"+str(i)),'end':now.strftime("%Y-%m-"+str(i))})}
      return render(request, 'index.html',{'posts_counts':simplejson.dumps(posts_counts)}) 
```

在 urls.py 中，我将 url 设置为

```
url(r'^$', 'myapp.views.index',{}, name = 'home'), 
```

现在，一切正常。当我进入主页时（`http://127.0.0.1:8000/myapp/`），当月的每一天显示当天创建的帖子数

**问题::单击上一个，下一个按钮时如何做同样的事情？**

我想在单击`prev`和按钮时做同样的事情。所以`next`，我决定调用另一个 django 视图，传递方法返回的月份和年份`fullCalendar('getDate')`。我这样编码。

索引.html

```
...
    $(document).ready(function() {
            $('#calendar').fullCalendar({
                events: {{entry_count|safe}}
            });

            $('.fc-button-prev').click(function(){

                var d=$('#calendar').fullCalendar('getDate');
                var month=d.getMonth()+1;
                var year=d.getFullYear();              
                    //need to call django view with these values...        
            $.ajax({
         url:'/myapp/monthly_posts/'+year+'/'+month,
             type:"GET",
             success:function(){
             alert("done");                         
            },
          }
        );
        });

            $('.fc-button-next').click(function(){
                   //alert('next is clicked, do something');
                       //blank for now
                });

        }); 
```

最后，我编写了 django 视图来处理这个 get 请求——它是在单击 prev 按钮时发送的

```
def monthly_posts(request,year,month):
    print 'monthly_posts::year=',year,' month=',month    
    posts_counts=[]
    #find number of days in month and feed to forloop
    days_in_month=calendar.monthrange(int(year), int(month))[1]
    for i in range(1,days_in_month+1):
        cdate=datetime.datetime(int(year),int(month),i)
        posts_counts.append({
                              'title':str(Post.objects.filter(postauthor=request.user,posteddate__year=year,posteddate__month=month,posteddate__day=i).count()),
                              'start':cdate.strftime("%Y-%m-%d"),
                              'end':cdate.strftime("%Y-%m-%d")
                              })
    dumped=simplejson.dumps(posts_counts)
    print 'dumped posts=',dumped
    return render(request, 'index.html',{'posts_counts':dumped}) 
```

同样在 urls.py

```
url(r'^monthly_posts/(?P<year>\d{4})/(?P<month>\d{1,2})/$','myapp.views.monthly_posts',{}) 
```

这是事情不能完全正常工作的时候。当单击上一个按钮时，警报框按预期弹出，然后执行 django 视图，打印语句中`monthly_posts()`的值得到正确的值（假设今天是`april 11`，我点击`prev`按钮，打印语句打印

monthly_posts::year= 2012 月= 3

这是正确的..即 2012 年 3 月，因为我的 javascript 代码将 1 添加到月份编号（否则 2 代表 3 月，因为基于 0 `javascript date.getMonth()`）

它还在视图中的最后一个打印语句中正确输出了 json 转储。我检查了那个月的帖子。那里没有问题。

但是，三月份的日历视图不显示任何事件！

当我手动输入网址时

```
http://127.0.0.1:8000/myapp/monthly_posts/2012/3/ 
```

django 视图中的打印语句正确执行

```
month_summary::year= 2012  month= 3 
```

但是，月份视图仍然是当前月份的视图，即四月..我想这是可以预料的..当我点击上一个按钮时，惊喜来了，警报框正确弹出，

并且三月的月视图正确显示了所有事件的所有日子..！

我对此有点困惑..如何才能在单击 prev 按钮时正确显示事件？我想我在这里遗漏了一些关于 ajax 和 django 工作方式的基本知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:33:25.030

在 Django 视图中使用 Ajax：

```
def index(request):
    if request.is_ajax():
        return get_monthly_posts(request.GET['start'], request.GET['end'])
    return TemplateResponse(request, 'index.html', {}) 
```

准备回复：

```
def get_monthly_posts(start, end):
    #prepare data_list using start nad end variables
    #remember that start/end variables are in timestamp

    return HttpResponse(simplejson.dumps(data_list), mimetype='application/javascript') 
```

网址.py：

```
url(r'^index/', 'myapp.views.index', name='index') 
```

索引.html：

```
$('#calendar').fullCalendar({
    events: '/index/'
}); 
```

# prolog - Prolog 列表存储

> ID：10123201
> 
> 赞同：1
> 
> 时间：2012-04-12T12:04:23.563
> 
> 标签：prolog

我有一个生成列表的程序，并在不同阶段从中删除某些元素。有 4 个删除阶段，调用第 4 个将首先调用 1,2,3 然后 4。谓词称为 s4(Q,100)，还有 s1,s2,s3 具有相同的谓词样式，(Q,100 ）。

在阶段 s1，我根据元素的数量来删除元素，因此我通过调用将 Q 传递给另一个谓词

```
removePrimes(Q,L). 
```

现在，列表 Q 减去了不需要的元素。但是，Q 没有改变，仍然具有所有原始元素。

我的问题是，有没有办法给 Q 的结果 L 所以它的值可以传递给 s2 再次被改变？

这是我的其余代码，因此您可以更好地了解我的意思

```
s4(Q,X):-
    s3(Q,X).

s3(Q,X):-
    s2(Q,X).

s2(Q,X):-
    s1(Q,X).

    %Further alter the list here
    %Q is not passed back, since it is unchanged in s1

s1(Q,X):-
    s0(Q,X),
    %remove the undesired elements
    removePrimes(Q,L).

    %L now contains the list we need, but Q is unchanged!!!

s0(Q, N) :-
    %generate the list
    validPair(Q). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:31:15.857

```
sTotal(L) :-
    validPair(Q),
    s1(Q, Q2),
    s2(Q2, Q3),
    s3(Q3, Q4),
    ...
    sN(QN, L). 
```

应该做的伎俩。

编辑，从您的代码开始：

```
s4(X, N):-
    s3(Q),
    dostuff(Q, X, N).

s3(L):-
    s2(Q),
    doblah(Q, L).

s2(L):-
    s1(Q),
    dosomethingwithalist(Q, L).

s1(L):-
    s0(Q),
    removePrimes(Q,L).
s0(Q) :-
    validPair(Q). 
```

请注意，这个等效且过于冗长的版本：

```
s4(X, N) :-
    validPair(Q),
    removePrimes(Q, Q2),
    dosomethingwithalist(Q2, Q3),
    doblah(Q3, Q4),
    dostuff(Q4, X, N). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:16:44.863

不，序言使用单一分配；您应该传递新列表而不是原始列表。

好吧，一些实现（例如 swi-prolog）支持可以更新（或者您可以断言/撤回）的全局变量，但实际上并不建议使用它，尤其是在这种情况下

# sql - 如何在 PL/SQL 中按每天分组？

> ID：10123202
> 
> 赞同：9
> 
> 时间：2012-04-12T12:04:32.030
> 
> 标签：sql, oracle, plsql

我试图用 PL/SQL 获取每天的统计数据。

每天都有几个条目，大量错误:-) 我想按天对它们进行分组。

我目前在做什么：

```
SELECT TO_CHAR(dateTime, 'DD') DAY, TO_CHAR(dateTime, 'MM') MONTH, errormessage
FROM log
WHERE (...)
GROUP BY MONTH, DAY, errormessage 
```

这会导致 ORA-00904：“DAY”：无效标识符（在 group by 上停止）。

有什么帮助吗？:D

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T12:07:14.287

```
SELECT TO_CHAR(dateTime, 'DD') DAY, TO_CHAR(dateTime, 'MM') MONTH, errormessage
FROM log
WHERE (...)
GROUP BY TO_CHAR(dateTime, 'DD'), TO_CHAR(dateTime, 'MM'), errormessage 
```

列别名对 没有好处`GROUP BY`，您需要完整的表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T12:07:01.160

您的问题是范围问题。该`GROUP BY`子句是语句的表表达式的一部分，因此在`SELECT`子句之前进行评估，即投影。这意味着您的投影别名在分组时不可用。这是一种解决方案

```
SELECT DAY, MONTH, errormessage
FROM (
  SELECT TO_CHAR(dateTime, 'DD') DAY, TO_CHAR(dateTime, 'MM') MONTH, errormessage
  FROM log
  WHERE (...)
)
GROUP BY MONTH, DAY, errormessage 
```

这是另一个：

```
SELECT TO_CHAR(dateTime, 'DD') DAY, TO_CHAR(dateTime, 'MM') MONTH, errormessage
FROM log
WHERE (...)
GROUP BY TO_CHAR(dateTime, 'MM'), TO_CHAR(dateTime, 'DD'), errormessage 
```

### 非标准行为

请注意，某些数据库（包括 MySQL、PostgreSQL 和其他数据库）确实允许从`GROUP BY`子句中的投影中引用列别名。但是，在更严格的 SQL 方言（例如 Oracle）中，这是不可能的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T12:07:10.603

```
SELECT TO_CHAR(dateTime, 'DD') DAY, TO_CHAR(dateTime, 'MM') MONTH, errormessage
FROM log
WHERE (...)
GROUP by TO_CHAR(dateTime, 'DD'), TO_CHAR(dateTime, 'MM'), errormessage 
```

您不能在 group by 中使用别名

# html - IE8 和 IE7 有问题

> ID：10123205
> 
> 赞同：0
> 
> 时间：2012-04-12T12:04:42.580
> 
> 标签：html, css

我正在尝试解决这个问题，但我搞砸了。我不是垃圾邮件我真的需要帮助。

```
<!--[if IE 7 ]>
    <link href="http://www.mulberrydesignerkitchens.com/wp-content/themes/MBK/ie7.css" rel="stylesheet" type="text/css">
<![endif]-->

<!--[if IE 8 ]>
    <link href="http://www.mulberrydesignerkitchens.com/wp-content/themes/MBK/ie8.css" rel="stylesheet" type="text/css">
<![endif]--> 
```

**IE7**

```
#site header #telephone {
    float: right:
    width: 600px;
}

#site header #telephone p {
    color: #fff;
} 
```

在**IE8中**

```
header #telephone {
    float: right:
    width: 600px;
} 
```

请预览此图片以获取更多信息：

![在此处输入图像描述](../Images/e3291838d204ab9e12763f8655e7d235.png)

但是当我尝试在 IE7 或 IE8 中打开该站点时，什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:12:51.450

你必须决定你想要什么，要么使用链接标签来链接外部样式表，要么使用样式标签。但不是样式标签中的链接标签。

# javascript - 加载网站主页时如何加载模态对话框？

> ID：10123207
> 
> 赞同：0
> 
> 时间：2012-04-12T12:04:52.720
> 
> 标签：javascript, magento

如何在我的网站主页加载时显示模式对话框，在对话框中有两个字段，一个用于电子邮件地址，另一个用于密码，还有用于注册和忘记密码的选项，我正在使用 magento 应用程序，我正在尝试编写 onLoad( ) 在我的第一页的正文标记下加载但在浏览器上看不到更改的事件。我想要的只是当我的网站主页加载时，对话框应该立即出现，这样只有注册用户才能看到我网站中的内容。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:08:27.277

这就是你需要的[演示](http://jsfiddle.net/He9Lc/1/)

在这里你可以找到如何使用它[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

只需添加 div

```
<div id="example" class="xyz" title="This is my title">
    I'm in a dialog!
</div> 
```

脚本：

```
$(document).ready(function(){
        $("#example").dialog({modal: true});
});​ 
```

# c# - TCP 服务器中的 C# System.OutOfMemoryException

> ID：10123209
> 
> 赞同：0
> 
> 时间：2012-04-12T12:04:57.057
> 
> 标签：c#, out-of-memory, tcpserver

我有一个用 C# 编写的多线程 TCP 服务器。客户端被服务器接受，并且在连接时不会离开服务器。在大约 1300 个活动连接之后，我的软件给出了 System.OutOfMemmoryException 错误。这个问题是否与 32 位系统架构和内存有关？我有 32 位 Windows 7 Professional 和 4 GB 的 RAM。当我的服务器上存在大约 1300 个活动连接时，我的内存使用量约为 2.1GB，CPU 使用率为 30%。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T12:08:01.177

`System.OutOfMemmoryException`在您的进程中创建约 1300 个线程时抛出（在 32 位操作系统上）。问题是您正在为每个连接创建全新的线程。那是不好的做法。

相反，您应该只使用一个线程来管理发送数据，使用同一个线程（或者可能是第二个）来发送数据，并且只使用一个线程来**接受**连接。

接受所有客户端的线程池的代码示例：

```
TcpListener tcpListener = new TcpListener(IPAddress.Any, 90);

public void BeginAccept()
{
    try { tcpListener.BeginAcceptTcpClient(AcceptClient, null); }
    catch { /* Swallowing is bad */ }
}

private void AcceptClient(IAsyncResult ar)
{
    TcpClient tcpClient;

    try { tcpClient = tcpListener.EndAcceptTcpClient(ar); }
    catch { /* Swallowing is bad */ }
    finally { BeginAccept(); }

    // TODO: Add your brand new tcpClient to some sort of collection, may be.
} 
```

一个线程接受所有客户端的代码示例：

```
TcpListener tcpListener = new TcpListener(IPAddress.Any, 90);
bool isListening;

public void BeginAccept()
{
    while (isListening)
    {
        TcpClient tcpClient;

        try { tcpClient = tcpListener.AcceptTcpClient(); }
        catch { /* Swallowing is bad */ }

        // TODO: Add your brand new tcpClient to some sort of collection, may be.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:20:27.123

你应该看看实现[异步服务器套接字](http://msdn.microsoft.com/en-us/library/5w7b7x5f.aspx)。
我仍然建议在不同的线程中发送响应以避免队列/TCP 重新发送。
您可以使用任务或将接收到的具有相关连接的消息添加到并发队列中，由工作人员处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:21:26.003

您的计算机/操作系统不是限制因素。它可以为每个进程分配近 4GB（如果您总共使用超过 4GB，它将开始交换/写入磁盘：这比普通内存慢得多，但它仍然可以工作）。但是，C# 编译器限制了你。C# 默认编译为 32 位，这意味着每个进程只能使用大约 2GB 的内存。这就是为什么您的服务器一旦达到 2GB 就会崩溃。您可以为 64 位操作系统编译它，这将允许您使用几乎无限的内存，但您没有 64 位操作系统，因此它不会在您的机器上运行。

最好为每个客户端连接创建一个新进程，而不是一个线程。您的主进程将侦听并接受连接，并且当建立新连接时，它应该生成一个专门用于处理与该客户端的连接的新进程。因为每个连接都有自己的进程，所以您不会再达到 2GB 的限制，并且还有更多优点：一旦连接关闭，回收内存就容易得多，并且一个连接中的任何错误都不太可能导致整个程序崩溃。当然，多进程架构的编程比多线程架构的编程要困难一些，因为没有共享内存，但这是更好的方法。

# ruby-on-rails - 使用 mongoid search 搜索标签数组

> ID：10123210
> 
> 赞同：0
> 
> 时间：2012-04-12T12:05:14.070
> 
> 标签：ruby-on-rails, ruby, search, mongodb, mongoid

我正在使用 mongoid 搜索来搜索人们上传的图像的标题和描述。我还想搜索一系列标签，因为人们给这些图像标签。我正在使用 gem mongoid_taggable 创建标签，这些标签存储在一个数组中，我正在使用 mongoid_search 搜索数组。

mongoid_search 索引了除标签之外的所有内容，我不知道如何让它索引标签数组。

```
search_in :title, :tags, :description, :designer => :name, :designer => :username

field :width
field :height
field :description, :type => String
field :title, :type => String
field :tags, type: Array 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:52:18.373

我发现了。mongoid_taggable 在数据库中创建了一个 tags_array，所以我需要做 search_in :tags_array 而不是 search_in :tags。

# css - 在 JQuery Mobile 的列表分隔符中使用按钮

> ID：10123211
> 
> 赞同：1
> 
> 时间：2012-04-12T12:05:21.940
> 
> 标签：css, jquery-mobile

我正在使用 JQuery 移动。我有一个如下所示的页面：

```
<div id="myPage" data-role="page">
    <div data-role="header">
        <h1>My App</h1>
    </div>

    <div data-role="content">
        <ul data-role="listview"> 
            <li data-role="list-divider">
                <div data-type='horizontal'>Hello&nbsp;
                <a href='#' id='moreOptions' data-role='button' data-icon='arrow-d' data-inline="true" data-mini="true" data-iconpos='notext'>more</a>
            </div></li>            
        </ul><br /><br />

        My App Content
    </div>
</div> 
```

我有一些 JavaScript 可以确定是否显示“moreOptions”按钮。我的问题是，当显示“更多选项”按钮时，列表分隔区的高度超出了正常大小。有没有办法可以使用 CSS 将列表分隔符区域保持在标准高度？或者，我可以在家里缩小按钮大小吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:36:40.900

隔离列表分隔符的 CSS 类（我认为是 .ui-li-divider）并添加 max-height 属性。它应该如下所示：

```
.ui-li-divider{
max-height: 20px;
} 
```

# ruby-on-rails - Postmark::InvalidMessageError 尝试发送邮件时

> ID：10123214
> 
> 赞同：3
> 
> 时间：2012-04-12T12:05:30.670
> 
> 标签：ruby-on-rails, postmark

我使用 Rails 3 + Postmark-Rails。

起初，我在 postmarkapp.com 上创建了帐户来获取我的 api 密钥。

我通过电子邮件链接激活了我的签名 [例如，“vitalyp@dot.com”]

-- 之后，我将它添加到 application.rb

```
config.action_mailer.delivery_method   = :postmark
config.action_mailer.postmark_settings = { :api_key => "fdcb..." } 
```

我使用这种方法发送电子邮件：

```
class UserMailer < ActionMailer::Base
  default :from => "vitalyp@dot.com"

  def do_my_mail(to, subj)
    mail(:to => to, :subject => subj)
  end 
```

我收到此错误：

```
Postmark::InvalidMessageError
Sender signature not defined for From address. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:23:41.147

建议使用 SPF 和 DKIM，但不是必需的。但是，需要发件人签名（如文档中所述）。

您确定您使用的发件人地址与用于创建发件人签名的发件人地址相同吗？如果您使用不同的电子邮件，可能会发生这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T12:23:16.113

Postmark 使用发件人签名来确保您不会将他们的服务用于垃圾邮件目的：

来自[http://developer.postmarkapp.com](http://developer.postmarkapp.com)：“需要发件人签名来验证您确实拥有邮箱，并且您不是垃圾邮件发送者（是的，我们也讨厌垃圾邮件）。**您必须拥有**应用程序中使用的每个发件人地址**的****发件人签名。”**

# python - 在python中重新读取父进程的环境

> ID：10123215
> 
> 赞同：0
> 
> 时间：2012-04-12T12:05:30.990
> 
> 标签：python, bash, environment-variables, python-2.7

我编写了一个小的 Python (2.7.2+) 模块（称为`TWProcessing`），它可以被描述为一个临时的批处理管理器。它的工作方式是我向它传递一长串命令，然后它将并行运行，但限制了同时处理的总数。这样，如果我有 500 个要运行的命令，它将遍历所有命令，但一次只运行 X 个命令，以免压倒机器。声明此批处理管理器的实例时可以轻松设置 X 的值（该类称为`TWBatchManager`）：

```
batch = TWProcessing.TWBatchManager(MaxJobs=X) 
```

然后，我以非常直接的方式向该对象添加作业列表：

```
batch.Queue.append(/CMD goes here/) 
```

`Queue`批处理管理器将运行的命令列表在哪里。当队列被填满时，我然后调用`Run()`which 循环遍历所有命令，一次只运行 X ：

```
batch.Run() 
```

到目前为止，一切正常。现在我想做的是能够动态地更改 X 的值（即一次运行的最大进程数），即在进程仍在运行时。我这样做的旧方法相当简单。我有一个名为 MAXJOBS 的文件，该类会知道要查看它，并且如果它存在，它会定期检查它以查看所需的值是否已更改。现在我想尝试一些更优雅的东西。我希望能够`export MAXJOBS=newX`在启动包含批处理管理器的脚本的 bash shell 中编写一些东西，并让批处理管理器意识到这是它现在应该使用的 X 的值。显然`os.environ['MAXJOBS']`不是我要找的，因为这是一本在启动时加载的字典。`os.getenv('MAXJOBS')`也不会削减它，因为它`export`只会影响 shell 从那时起产生的子进程。所以我需要一种方法来回到启动我的 python 脚本的父进程的环境。我知道`os.ppid`会给我父 pid，但我不知道如何从那里到达父环境。我在 interwebz 上四处寻找，看看是否有一种方法可以让父 shell 修改子进程环境，我发现人们倾向于坚持我不要尝试这样的事情，以免我准备做一些电脑可以做的最丑陋的事情之一。

关于如何解决这个问题的任何想法？当然，我的“从标准文本文件读取”的想法并不那么难看，但我是 Python 新手，因此我试图挑战自己以优雅和干净的方式做事，尽可能多地学习。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:29:40.780

对我来说，您似乎要求在 bash 脚本和 python 程序之间进行进程间通信。

我不完全确定您的所有要求，但它可能是 FIFO（命名管道）的候选者：

1）制作先进先出：

```
mkfifo batch_control 
```

2）启动python-server，它从fifo读取。（注意：以下只是一个简单的例子；你必须适应一些东西：

```
while True:
    fd = file("batch_control", "r")
    for cmd in fd:
        print("New command [%s]" % cmd[:-1])
    fd.close() 
```

3) 从 bash 脚本中，您可以通过`echo`-ing 字符串到 fifo 中将内容“发送”到 python 服务器：

```
$ echo "newsize 800" >batch_control
$ echo "newjob /bin/ps" >batch_control 
```

python服务器的输出是：

```
New command [newsize 800]
New command [newjob /bin/ps] 
```

希望这可以帮助。

# java - 使用命令设计模式将命令行参数转换为对象

> ID：10123224
> 
> 赞同：0
> 
> 时间：2012-04-12T12:06:10.550
> 
> 标签：java, command, design-patterns

[我有一个使用命令设计模式](http://en.wikipedia.org/wiki/Command_pattern)的对象集合，即它们实现了一个抽象`Command`类并有一个`execute()`方法。

当从命令行调用（例如）时，你可以做这样的事情，但它非常笨重，你将如何实现它：

```
public void main(String[] arg) {
    Command c = null;

    if(arg[0].equals("FirstCommand") {
        c = new FirstCommand(arg[1]);
    }
    if(arg[0].equals("SecondCommand") {
        c = new SecondCommand(arg[1], arg[2]);
    }
    if(arg[0].equals("ThirdCommand") {
        c = new ThirdCommand(arg[1], Long.parseLong(arg[2]));
    }
    //.....etc....
    c.execute();
} 
```

显然，随着可用命令列表的增加，这将成为相当乏味的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:21:46.617

反思很容易。从这个开始：

```
final Class[] argTypes = new Class[args.length - 1];
final String[] cmdArgs = new String[args.length - 1];
for (int i = 0; i < argTypes.length; i++) {
  argTypes[i] = String.class;
  cmdArgs[i] = args[i+1];
}
final Command c = (Command) Class.forName(MY_PACKAGE + args[0]).getConstructor(argTypes)
   .newInstance(cmdArgs); 
```

现在，唯一要解决的问题是您将不得不将解析和验证推送到您的`Command`构造函数中。或者，如果你想变得花哨，你可以找到一个仅基于 arg count 的构造函数，查看它接受的 arg 类型，并适当地解析 cmdline args。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:25:11.140

不需要您跟踪可用命令的通用解决方案是使用反射来实例化命令。您要么有一个带有参数列表的构造函数，要么像 McDowell 建议的那样定义执行方法。这取决于您是否要使用相同的参数多次重新执行相同的命令，以及命令是否可以从缓存的结果中受益（无状态与有状态）。

命令名称将是类的简单名称。您只需添加包以创建一个完全限定的名称，然后 class.getConstructor(Class[] params) 并调用该构造函数（或者如果您选择将参数传递给执行方法，则使用默认构造函数）。

# programming-languages - 由于 Java 可以使用 JVM 在客户端运行，我的教授说它也是一种客户端编程语言。有人可以解释他是否正确吗？

> ID：10123225
> 
> 赞同：1
> 
> 时间：2012-04-12T12:06:11.133
> 
> 标签：programming-languages, web

JavaScript 和 VBScript 从最初的设计开始都是为了在客户端浏览器上运行而设计的，它们长期以来一直被认为是“客户端脚本语言”（直到 NodeJS 出现）。

但是，我的教授认为*Java*也是一种客户端编程语言，因为 Java Applet 直接在带有附加组件的浏览器上运行。我的论点是 Java 不是一种客户端编程语言，因为它不是为它设计的。此外，它需要 JVM，它不是可以直接在浏览器上运行的本机应用程序语言。尽管可以更改不同的语言以适应相似的功能，但这并不意味着它们适合这些目的。

我们总是听到诸如“客户端编程语言”之类的术语，但真的有办法定义它吗？有人可以向我解释谁是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:09:06.850

（编辑：这是原始未编辑问题的答案，该问题询问哪些语言不是客户端语言。在这些编辑之后，答案似乎不太相关）

[爪哇](http://en.wikipedia.org/wiki/Java_%28programming_language%29)

JavaScript 和 VBScript 都是通常（并非总是）在客户端 Web 浏览器中运行的脚本语言。

只需谷歌他们，你就会找到原因。

回复您的评论：

Java Applet 允许 Java 程序在 Web 浏览器中运行，但这不算作客户端技术，因为要运行 Java Applet，客户端系统必须安装 Java 虚拟机。这很像从网站下载已编译的 java 程序并在客户端上运行它。JavaScript 和 VBScript 都由浏览器运行。这两种语言是为客户端创建的（但它们在其他环境中有新的用途）。Java Applet 并非如此。

# sql - where 子句中的子查询似乎什么都不返回，只是自行运行查询返回数据

> ID：10123226
> 
> 赞同：1
> 
> 时间：2012-04-12T12:06:14.033
> 
> 标签：sql, oracle

我有一个 SQL 查询，在 where 子句中有一个嵌套选择。如果我自己运行该子查询，我会返回一行。但是，如果我将它作为嵌套查询运行，则不会返回任何内容。如果我用我知道返回的实际数据替换嵌套查询，则查询成功。

```
select * from customers where id in (select people.id from people) 
```

我不明白的是，如果我跑

```
select people.id from people 
```

我得到数据，比如说ABC。如果我跑

```
select * from customers where id in ('ABC') 
```

我得到数据。我们在 Oracle 数据库上，不确定这是否相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:23:13.060

所以可能是您的 id 是带有尾随空格的字符串。试试这个：

```
select a.id, a.other_relevant_fields from customers a, people b 
where TRIM(a.id)=TRIM(b.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:16:57.400

在人员表上运行它（当然在开发环境中测试）：

```
update people set ID = regexp_replace(ID, '[[:cntrl:]]','');
commit; 
```

然后再次尝试您的查询（并尝试使用连接）。

这应该适用于 11g，不确定早期版本。

# android - 打开并显示本地存储的 pdf 文件

> ID：10123227
> 
> 赞同：1
> 
> 时间：2012-04-12T12:06:15.503
> 
> 标签：android, pdf, local-storage, file-management

在阅读了几个 Q/A 之后，我仍然找不到适合我当前问题的答案。

我有一个 pdf 文件（在编译时已知），它存储在我的 /res/raw 文件夹中。

我尝试使用以下方法加载文件：

```
InputStream is = getResources().openRawResource(R.raw.mypdf); 
```

然后我想使用设备上的首选 pdf 阅读器显示 pdf（有意）：

```
Intent i;
i = new Intent(Intent.ACTION_VIEW);
i.setDataAndType(file,"application/pdf");
startActivity(i); 
```

问题是意图采用“文件”类型，而我的 pdf 被读取为“输入流”。

问题是：如何显示 pdf 文件？即我怎样才能显示一个InputStream？或者如何存储 pdf 文件以允许使用 new File() 打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:17:46.453

TRY this..
//将pdf放在资产文件夹中只是为了尝试

```
Uri file= Uri.parse("file:///android_asset/mypdf.pdf");
  String mimeType =  MimeTypeMap.getSingleton().getMimeTypeFromExtension(MimeTypeMap.getFileExtensionFromUrl(file.toString()));

try{
     Intent i;
     i = new Intent(Intent.ACTION_VIEW);
     i.setDataAndType(file,mimeType);
     startActivity(i);

}catch (ActivityNotFoundException e) {
                    Toast.makeText(this, 
                        "No Application Available to fiew this file type", 
                        Toast.LENGTH_SHORT).show();
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T08:11:55.563

*你可以使用外部库[joanzapata.pdfview](https://github.com/JoanZapata/android-pdfview)*

*此代码将在您的布局中显示您想要的任何位置的 pdf*

```
 private PDFView pdfview;
    pdfview = (PDFView) findViewById(R.id.pdfview);
    File file = new File(filepath);
    pdfview.fromFile(file)
                    .defaultPage(1)
                    .showMinimap(false)
                    .enableSwipe(true)
                    .onLoad(this)
                    .onPageChange(this)
                    .load(); 
```

*或者如果该文件在编译时已知并且您在资产文件夹中有 pdf：*

```
 private PDFView pdfview;
    pdfview = (PDFView) findViewById(R.id.pdfview);
    pdfview.fromAsset(pdfName)
                    .defaultPage(1)
                    .showMinimap(false)
                    .enableSwipe(true)
                    .onLoad(this)
                    .onPageChange(this)
                    .load(); 
```

*在你的布局中添加这个*

```
<com.joanzapata.pdfview.PDFView
                android:id="@+id/pdfview"
                android:layout_width="match_parent"
                android:layout_height="match_parent"/> 
```

# django - 在 Django 中扩展模型

> ID：10123233
> 
> 赞同：1
> 
> 时间：2012-04-12T12:06:41.677
> 
> 标签：django, django-models

我有一个这样的模型：

```
class Model1(models.Model):
    .
    .
    . 
```

和扩展模型：

```
 class Model2(Model1):
    .
    .
    . 
```

使用此查询：

```
model1 = Model1.objects.all() 
```

如何使用上述查询找到属于继承模型 (Model2) 的项目？

编辑：我想从 Model1 访问这个查询：

```
class Model1(models.Model):
      def is_model2(self):
         m2 = self.objects.filter(model2__isnull=False)
             if m2.count() > 0:
                if self in m2:
                    return True
                else:
                    return False 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:07:34.303

您也可以使用`InheritanceManager`django [-model-utils](https://github.com/jazzband/django-model-utils)。即使在查询基本模型时，它也会返回正确的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:17:06.877

假设`Model1`没有`class Meta: abstract = True`，这是[多表继承。](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)

你可以使用：

```
model2 = Model2.objects.all() 
```

因为所有`Model2`对象都是`Model1`，或者您可以一次完成一个查询：

```
for m in model1:
    try:
        m.model2 # Try to use the Model2 object
    except Model2.DoesNotExist:
        pass 
```

或过滤查询：

```
q = model1.filter(id__in=Model2.objects.all()) 
```

很难从您给我们的少量信息中判断哪个选项是最好的。

**编辑：**如果你只是想要一个函数来告诉你 a`Model1`是否是 a `Model2`，那么你只需要：

```
class Model1(models.Model):
    def is_model2(self):
        try:
            self.model2
        except Model2.DoesNotExist:
            return False
        return True 
```

# objective-c - 将 CIVector 的组件与 NSSlider 绑定

> ID：10123244
> 
> 赞同：0
> 
> 时间：2012-04-12T12:07:13.917
> 
> 标签：objective-c, cocoa-bindings, core-image

我正在尝试将 CIVector 的组件与多个 NSSlider 绑定，每个都与 CIVector 的不同组件绑定。

更具体地说，我正在尝试使用以下代码将 CITemperatureAndTint.inputTargetNeutral.X 与 NSSlider 绑定：

```
 NSMutableDictionary *bindingOptions = [NSMutableDictionary dictionary];
 [bindingOptions setObject:[NSNumber numberWithBool:YES]
                 forKey:NSValidatesImmediatelyBindingOption];
 [bindingOptions setObject:[NSNumber numberWithBool:YES]
                 forKey:NSContinuouslyUpdatesValueBindingOption];

 [temp_slider bind: @"value" 
       toObject: filter
    withKeyPath: @"inputTargetNeutral.X" 
        options: bindingOptions]; 
```

但我收到此错误消息：

> [ setValue:forUndefinedKey:]：此类对于键 X 不符合键值编码。

解决这个问题的最干净的方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:35:56.983

A`CIVector`是不可变的。创建后您无法更改其组件。当滑块的值发生变化时，绑定会尝试这样做。您显然希望发生的事情是`inputTargetNeutral`将过滤器的属性设置为`CIVector`具有更改的 X 组件的新属性。这并不简单。

我在想你可能会实现一个可逆`NSValueTransformer`的取 a`CIVector`并给出它的 X 组件。但是，反向操作需要从某个地方获取一个 Y 组件，并且它无法访问原始的`CIVector`.

因此，您可能需要过滤器的包装类。它会有一个属性`inputTargetNeutralX`。getter 将返回包装过滤器的`inputTargetNeutral.X`. 设置器将读取它的`inputTargetNeutral.Y`，将其与传入的新 X 值结合以创建一个新的`CIVector`，并设置过滤器的`inputTargetNeutral`. 为了符合 KVO，您将实现`+keyPathsForValuesAffectingInputTargetNeutralX`返回一个`NSSet`包含`@"filter.inputTargetNeutral"`（假设包装过滤器保存在名为“过滤器”的属性中）。请参阅[`+keyPathsForValuesAffectingValueForKey:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/doc/uid/20002299-SW4).

你会为 Y 组件做同样的事情。

您实际上可以使用类别`CIFilter`而不是包装类来执行此操作。当然，这会将这些属性添加到`CIFilter`应用程序中的每个，而不仅仅是`CITemperatureAndTint`s. 在我之前的描述中，您将使用`self`“包装过滤器”而不是“过滤器”，而只需留下“过滤器”。从`+keyPathsForValuesAffectingInputTargetNeutralX`结果中得出它是基于隐式`self`的。

编辑：我忘了指出显而易见的：在你创建了这些新的`inputTargetNeutralX`和`inputTargetNeutralY`属性之后，这就是你要绑定的。

# asp.net - Use System.Web.Mvc in non MVC ASP.NET Web Forms Application

> ID：10123246
> 
> 赞同：0
> 
> 时间：2012-04-12T12:07:15.123
> 
> 标签：asp.net, asp.net-mvc, routes, webforms, ignoreroute

We are developing an ASP.NET Web Forms application with REST modelled URL, for which we are using Route tables in global.asax. However, recently we came over a problem where the WebResource.axd and ScriptResource.axd files were getting routed as well. We wanted to use the RouteCollection.IgnoreRoute function. However, since it in System.Web.Mvc, it would mean that we would need to reference that dll in a non MVC Web Forms application.

Is it safe for us to continue with the approach. If anyone has a better way to ignore routes from within the Web Forms application please do share. Please also note that the application has been extensively developed in Web Forms and moving to MVC at the current stage is not feasible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:13:52.900

For web forms you need to use System.Web.Routing

Put this is Global.asax

```
void RegisterRoutes(System.Web.Routing.RouteCollection routes)
{
    routes.Ignore("{resource}.axd/{*pathInfo}");

    routes.MapPageRoute(
       "Home",      // Route name
       "WWWWWW",      // Route URL
       "~/Default.aspx" // Web page to handle route
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:15:47.210

Did you know you could safely run an ASP.NET Web Forms and MVC application combined? Here are some links:

*   [http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)
*   [http://www.packtpub.com/article/mixing-aspnet-webforms-and-aspnet-mvc](http://www.packtpub.com/article/mixing-aspnet-webforms-and-aspnet-mvc)

Also, you can just use URL routing in ASP.NET 4 applications, as Registered User pointed out above. Read more about it here: [http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

# vba - 制作包含日期的文件名（VBA）

> ID：10123250
> 
> 赞同：1
> 
> 时间：2012-04-12T12:07:40.333
> 
> 标签：vba, excel

我想将文件保存在目录中，文件名应具有以下格式：

```
iTerm Metrics Report Apr 12 
```

即根文件名“iTerm Metrics Report”，后跟今天的日期，格式为三个字母的月份，然后是月份中的某天。

如何制作这样的文件名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:11:39.493

> > > sFile = "iTerm metrics Report" & "" & Format(Date) & ".xls" ActiveWorkbook.SaveAs Filename:="C:\Documents and Settings\706849\My Documents\Metric Report\" & sFile – Arul Servin 5 secs前

这是你正在尝试的吗？

```
sFile = "iTerm metrics Report " & Format(Date,"mmm yy") & ".xls" 
```

**跟进**

> > > 谢谢...但我正在尝试日期（4 月 12 日）12 不是一年的日期...请相应地建议我...谢谢 – Arul Servin 55 秒前

在这种情况下，将代码更改为

```
sFile = "iTerm metrics Report " & Format(Date,"mmm dd") & ".xls" 
```

# php - 将 html 模板与 php 代码混合：php html 模板

> ID：10123251
> 
> 赞同：1
> 
> 时间：2012-04-12T12:07:40.977
> 
> 标签：php, mysql

我使用 php/mysql 创建了一个动态网站。我使用纯 php 代码 + html 打印数据的模板。现在，*更好、优化、更快*的混合 php + html*结构的方法？*（没有模板引擎）

对于我拥有的***每个***页面：ex.1（包装器之前的php代码）

```
<?PHP include ( DEFINE_SITE . '/templates/header.php' );

// isset : post : get : SELECT : INSERT ... Or ANY CODE OF PHP
 ?>

<div id="wrapper">
<div id="leftsidebar"><?PHP // Left DATA ?></div>
<div id="centercontent">

<?PHP // while {} Print result of php  ANY LOOPS ..... ?>

</div>
<div id="rightsidebar"><?PHP // Right DATA ?></div>
</div>
<?PHP include ( DEFINE_SITE . '/templates/footer.php' ); ?> 
```

对于我拥有的***每个***页面：ex.2（在侧栏之后和中心内容之前）

```
<?PHP include ( DEFINE_SITE . '/templates/header.php' );

<div id="wrapper">
<div id="leftsidebar"><?PHP // Left DATA ?></div>
<?PHP // isset : post : get : SELECT : INSERT ... Or ANY CODE OF PHP ?>
<div id="centercontent">

<?PHP // while {} Print result of php  ANY LOOPS ..... ?>

</div>
<div id="rightsidebar"><?PHP // Right DATA ?></div>
</div>

<?PHP include ( DEFINE_SITE . '/templates/footer.php' );?> 
```

哪个更好？前 1 或前 2 ？你的意见 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:35:05.797

我建议您将 HTML 和 PHP 分开。如果您不想使用模板系统，为什么不这样做呢？

制作一个 HTML 模板：

```
<div id="wrapper">
    <div id="leftsidebar">{LEFT}</div>
    <div id="centercontent">{CONTENT}</div>
    <div id="rightsidebar">{RIGHT}</div>
</div> 
```

在不同的 php 文件中：

```
$content = file_get_contents('template.html');
$templateVars = array();

startVar('CONTENT');
echo '<p>This is the content.</p>'; // New template vars are also allowed
endVar('CONTENT');

echo replaceTemplateVars($content);

/**
 * Replace template variables recursively with the key-value pairs that are in the $templateVars queue
 * @param string $content (default NULL) is code to convert.
 * @return the string that is replaced
 */
function replaceTemplateVars($content = NULL)
{
    global $templateVars;
    $matches = array();
    preg_match_all("/{[A-Z0-9_:]*}/", $content, $matches); // $matches = All vars found in your template
    foreach($matches[0] as $key)
    {
        if(isset($templateVars[substr($key, 1, -1)]))
        {
            $content = str_replace($key, $templateVars[substr($key, 1, -1)], $content); // Substitute template var with contents
        }
        else
        {
            $content = str_replace($key, "", $content); // Remove empty template var from template
        }
    }

    // Check if the replacement has entered any new template variables, if so go recursive and replace these too
    if(preg_match_all("/{[A-Z0-9_:]*}/", $content, $matches))
    {
        $content = replaceTemplateVars($content);
    }

    return $content;
}

/**
 * Start output buffer for a template key
 * @param string $key is not used. Only for overview purposes
 */
function startVar($key)
{
    ob_start();
}

/**
 * End output buffer for a template key and store the contents of the output buffer in the template key
 * @param string $key
 */
function endVar($key)
{
    setVar($key, ob_get_contents());
    ob_end_clean();
}

/**
 * @param string $key to store value in
 * @param mixed $value to be stored
 */
function setVar($key, $value)
{
    global $templateVars;
    $templateVars[$key] = $value;
} 
```

这就是您在屏幕上看到的内容：

```
<div id="wrapper">
    <div id="leftsidebar"></div>
    <div id="centercontent"><p>This is the content.</p></div>
    <div id="rightsidebar"></div>
</div> 
```

所以先做预处理，最后输出所有的html代码。

当然，您可以添加和之类的函数`startPrependVar()`并将`startAppendVar()`所有内容包装到 Template 类中以摆脱全局范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:18:22.257

为什么厌恶模板引擎？实际上，PHP 是一个模板引擎，但也许如果你检查了一些（比如 Twig），它可能会帮助你在没有模板引擎的情况下设计更灵活、更快速和响应更快的东西......或者你可能会开始喜欢它，像我这样的 ;-）

# php - Linkedin Oauth 问题 - oauth_verifier

> ID：10123254
> 
> 赞同：1
> 
> 时间：2012-04-12T12:07:51.280
> 
> 标签：php, oauth, linkedin

尝试将我的 JSAPI 令牌交换为 REST Oauth 令牌时遇到一些问题（[https://developer.linkedin.com/documents/exchange-jsapi-tokens-rest-api-oauth-tokens](https://developer.linkedin.com/documents/exchange-jsapi-tokens-rest-api-oauth-tokens)）

我正在使用这个库 - [http://code.google.com/p/oauth-php/](http://code.google.com/p/oauth-php/) - 与 PECL 扩展相反，因为我无法将扩展安装到服务器上。

似乎有很多类似的问题，但没有一个能真正回答这个问题 - 如何使用上述库向 Linkedin 进行身份验证。

我的代码如下：

```
 $cookie_name        = "linkedin_oauth_" . $this->_c->linkedin_api_key;
    $credentials_json   = stripslashes($_COOKIE[$cookie_name]);
    $credentials        = json_decode($credentials_json);

    // Get the Access Token + Secret
    $access_token_url = 'https://api.linkedin.com/uas/oauth/accessToken';

    OAuthStore::instance("2Leg", array(
        'consumer_key'      => $this->_c->linkedin_api_key,
        'consumer_secret'   => $this->_c->linkedin_api_secret
    ));

    try {

        $request = new OAuthRequester($access_token_url, 'POST', array(
            'xoauth_oauth2_access_token' => $credentials->access_token
        ));

        $result = $request->doRequest();

    } catch(OAuthException2 $e) {

        print_r($e->getMessage());

    } 
```

catch 语句输出：

`Request failed with code 400: oauth_problem=parameter_absent&oauth_parameters_absent=oauth_verifier`

我如何获得这个 oauth_verifier？我的理解是，如果我已经通过了 xoauth_oauth2_access_token，我就不应该需要它？

我检查了所有变量 IE $credentials 和 $this->_c 并且所有变量都正确传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:11:37.303

这实际上是 oauth-php 库中的一个错误。该库错误地处理以 xoauth_* 为前缀的参数，并以与处理 oauth_* 参数相同的方式处理它们。这违反了 OAuth 规范，大多数（全部？）其他 OAuth 库都没有这个问题。解决方法是执行以下操作：

在文件 OAuthRequestSigner.php 中，找到以下内容：

1) 在 getAuthorizationHeader 函数中，找到如下行：

```
if (strncmp($name, 'oauth_', 6) == 0 || strncmp($name, 'xoauth_', 7) == 0) 
```

并将其更改为：

```
if (strncmp($name, 'oauth_', 6) == 0) 
```

2) 在函数 getQueryString 中，找到如下行：

```
||  (strncmp($name, 'oauth_', 6) != 0 && strncmp($name, 'xoauth_', 7) != 0)) 
```

并将其更改为：

```
||  (strncmp($name, 'oauth_', 6) != 0) 
```

在那之后，你需要做的基本上和你已经做的一样，如下：

```
try {

    $request = new OAuthRequester($access_token_url, "POST", array('xoauth_oauth2_access_token' => $access_token));

    $result = $request->doRequest();

    var_dump($result);

} catch(OAuthException2 $e) {

    print_r($e->getMessage());

} 
```

你应该准备好了。如果您还有其他问题，请随时联系我们的[开发者论坛](https://developer.linkedin.com/forums/rest)，我本人或团队中的其他人将很乐意为您提供帮助。

享受！

-杰里米

# c# - Windows XP 中的 ValueChanged 事件

> ID：10123256
> 
> 赞同：2
> 
> 时间：2012-04-12T12:07:54.283
> 
> 标签：c#

我有一个 ValueChanged 事件，我正在检查日期并向用户显示一条消息，并将 DateTimePicker 的值设置为另一个值。这是事件：

```
private void dtpStartDate_ValueChanged(object sender, EventArgs e)
{
    if (frmDate.Value < this.minDate)
    {
        MessageBox.Show("Date not found");
        frmDate.Value = previousValue;
        return;
    }
} 
```

这在 Windows 7 中运行良好，但在 Windows XP 中会显示两次消息框。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:53:50.540

你以错误的方式解决这个问题。DateTimePicker 类具有处理该问题的 MaxDate 和 MinDate 属性。只需在您的设计器中或在表单加载时或任何有意义的时候在运行时设置它们，那么您根本不必担心事件，没有人能够选择无效的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:22:14.527

如果您不想花费太多精力，那就很脏:)

```
private DateTime _lastDate;
private void dtpStartDate_ValueChanged(object sender, EventArgs e)
{
    if (_lastDate != frmDate.Value) {
        _lastDate = frmDate.Value;
        if (_lastDate < this.minDate)
        {
            MessageBox.Show("Date not found");
            frmDate.Value = previousValue;
            return;
        }
    }
} 
```

# android - 从对应的类tabhost开始

> ID：10123257
> 
> 赞同：0
> 
> 时间：2012-04-12T12:07:58.677
> 
> 标签：android, class, android-intent, android-tabhost

我的代码：

*   主.java
*   TabHost.java
*   Tab1.java
*   Tab2.java
*   Tab3.java
*   主要的.xml
*   菜单选项卡.xml

在 main.xml 中有三个按钮，它们是：btnTab1、btnTab2、btnTab3。

在 menutab.xml 中有一个 id = th 的 tabhost，每个选项卡的布局是 id = tab1、tab2 = id、id = tab3。

我需要为每个按钮单击那个人 main.xml 来验证哪个是按钮，然后在 menutab.xml 中打开它的活动

简而言之：当用户单击按钮时，例如 Tab1 将绘制布局 menutab.xml 并打开相应的类活动。每个选项卡都是一个班级活动

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:59:08.027

在 Main.java 的 onCreate 中（为每个按钮添加类似的代码）：

```
 Button btnTab1 = (Button) getActivity().findViewById(R.id.btnTab1);
    btnTab1.setOnClickListener(tab1handler); 
```

在 Main.java 中的 onCreate 之后（再次，为每个按钮添加类似的代码，将 TabHost.TAB# 更改为每个按钮的相应代码）：

```
View.OnClickListener tab1handler = new View.OnClickListener() {
    public void onClick(View v) {
        Intent myIntent = new Intent(Main.this, TabHost.class);
        myIntent.putExtra("StartTab", Tabhost.TAB1);
        Main.this.startActivity(myIntent);
    }
}; 
```

在您的 TabHost.java 中添加：

```
public final int TAB1 = 0;
public final int TAB2 = 1;
public final int TAB3 = 2;
private int StartTab; 
```

在 TabHost 的 onCreate 中添加：

```
Bundle extras = getIntent().getExtras();
StartTab = extras.getInt("StartTab"); 
```

设置 tabhost 后：

```
th.setCurrentTab(StartTab); 
```

希望这可以帮助！

# c# - 强制重定向到 mvc3 中的操作 url

> ID：10123259
> 
> 赞同：0
> 
> 时间：2012-04-12T12:08:01.273
> 
> 标签：c#, asp.net-mvc-3, redirect

在 ASP.NET MVC3 Web 应用程序中，如何强制重定向到操作 url？

我想要这样的东西：

```
if(i==0)
{
    RedirectToAction("Index", "Home");
} 
```

编辑：我需要从普通类而不是控制器中调用它

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:09:16.717

这是完全正确的。只需添加退货

```
if(i==0)
{
   return RedirectToAction("Index", "Home");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:18:26.207

这是一个控制器操作，因此您不应**从**依赖类中的方法返回它。让您的依赖类返回一个值，控制器可以决定流程应该在哪里以及如何进行。

# java - Hibernate 单表数据库的可行性

> ID：10123263
> 
> 赞同：1
> 
> 时间：2012-04-12T12:08:20.383
> 
> 标签：java, hibernate, jdbc

我必须设计一个 Web 应用程序来从一个巨大的单个表中检索数据，该表有 40 列和数千行用于选择查询和几行/列用于更新。

您能否建议我为了更快的性能，使用 Hibernate 是否可行，因为我只有一个表并且没有任何连接？或者我应该使用 jdbc dao 吗？

数据库：sql server 2008 java 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:01:40.027

如果你正确使用 Hibernate，那么获取任意大的结果集是没有问题的。只需避免`from`查询（使用`select ... from ...`查询）并使用`ScrollableResults`. 如果您使用纯 JDBC，您将能够更快地开始，因为需要先配置 Hibernate，您需要编写映射文件等，但稍后可能会有所回报，因为您编写的代码会简单得多。Hibernate 非常擅长从客户端代码中提取样板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:37:10.353

如果您想检索数千条记录并且无法进行分页，则可能是性能问题。因为hibernate会针对每个人创建一个对象并将其存储在其持久化上下文中。如果创建太多对象，则会占用大量内存。对于这些类型的操作，JDBC 更好。对于类似的讨论，请参阅[使用大型数据库的 Hibernate 性能问题](http://www.coderanch.com/t/218235/ORM/java/Hibernate-performance-issues-huge-databases)

# android - 如何提高最大音频输出功率

> ID：10123264
> 
> 赞同：3
> 
> 时间：2012-04-12T12:08:23.907
> 
> 标签：android, audio, volume

一旦我深入研究了 Android 编程并找到了`AudioTrack.setStereoVolume(lv,rv)`设置输出音频功率的接口。但问题是它只是在手机供应商在其系统中指定的范围内调整音量。

如何使用 NDK 或其他方式在 Android 系统中更改该范围？我想让我的手机能够输出更大的功率，以帮助听力较弱的人捕捉音乐或铃声。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:41:13.923

我认为只有当您对设备具有 root 访问权限时，才有可能将设备的音量增加到供应商指定的范围之外并获得良好的声音。但是您必须小心将音量增加到供应商指定的范围之外，以免损坏扬声器。或者这样做也会缩短扬声器和设备的使用寿命。所以，我认为这样做并不是一个好主意。

但是，如果您在设备上具有 root 访问权限，我已经找到了如何将音量增加到指定范围之外（未经我自己测试）的方法： [http ://androidadvices.com/increase-volume-android -手机/](http://androidadvices.com/increase-volume-android-mobile-phones/)

祝你好运！

氪

# php - 带有播放列表的视频数据库的数据库设计

> ID：10123267
> 
> 赞同：0
> 
> 时间：2012-04-12T12:08:27.393
> 
> 标签：php, mysql, database, database-design, relational-database

自从我上一次数据库课程以来已经有一段时间了，我对 PHP/MySQL 应用程序的以下基本数据库设计有一些疑问，该应用程序是一个**带有播放列表的视频数据库**：

```
t_playlists
p_id (PK) | name | description

t_videos
v_id (PK) | name | description | playcount

t_mapping
v_id (FK) | p_id (FK) 
```

**我要执行的查询如下：**

*   获取所有播放列表 - 包括每个播放列表中的视频数量，但不包括视频本身
*   给定 a `p_id`，获取该播放列表中的所有视频
*   给定 a `v_id`，获取该视频所属的播放列表

目前，一个视频只能属于一个播放列表。

**现在我的问题：**

1.  你能提醒我为什么我们在这种情况下使用映射表吗？我记得这是“好习惯”，但我不记得确切的原因。使用单独的映射表比在中包含`p_id`作为另一列（FK） “更好”如何`t_videos`？这不会让我的查询更简单吗？
2.  有没有更有效的设计可以达到同样的效果？
3.  我描述的三种情况的 SQL 查询是什么？（我正在使用 MySQL）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:38:23.237

1.  如果您当前在视频和播放列表之间存在一对多关系，则无需映射表，只需在 t_videos 中包含 p_id (FK)。如果您要拥有多对多关系，那么您将需要映射表。你是对的，因为在你的情况下你有一个一对多，在 t_videos 表中有 p_id 会使查询更简单。

2.  就像我说的，除非你有多对多，否则不需要映射表。至于更高效的设计，你的概念很简单，设计也很简单。不确定它是否能比这更有效。

3.第一个需要一个嵌套语句来获取视频的数量，所以它会像这样。

```
SELECT "name", description, (SELECT COUNT(*) FROM t_videos WHERE fk_p_id = p_id) AS VideoCount FROM t_playlists 
```

这将在名为 VideoCount 的列中显示每个播放列表的计数

```
SELECT * FROM t_videos WHERE fk_p_id = given_p_id 
```

（这是如果您要删除映射表并将 p_id 包含在视频表中

```
SELECT * FROM t_playlists 
INNER JOIN t_videos
ON t_playlists.p_id = t_videos.fk_p_id 
WHERE v_id = given_v_id 
```

请注意，为了简单起见，我用 * 代替了列名，但您应该包含您只想显示的列名。

**编辑：**这一切都假设你有一个一对多，这就是你所说的。在我看来，这种关系应该是多对多的。

# perl - 在 Perl 中组合来自 STDIN 和文件的输入

> ID：10123269
> 
> 赞同：0
> 
> 时间：2012-04-12T12:08:39.453
> 
> 标签：perl, file, file-handling

我想让我的 Perl 脚本能够做到这一点

```
./code1 param1 param2 param3 | perl myperlscript.pl param1 param2 
```

所以 Perl 脚本应该接受 3 个输入：

1.  参数1
2.  参数2
3.  的输出 `./code1 param1 param2 param3`

我的 Perl 代码中有这个，但它出错了：

```
my $param1 = $ARGV[0] || "control.fst";
my $param2  = $ARGV[1] || "target.fst";

my @control_header = `grep ">" $param1`;
my @target_header = `grep ">" $param2`;
# Later to do something with those arrays

while (<>) {
 # do something again
} 
```

我知道我可以为`./code1`. 但由于输出非常大，我更喜欢用管道传输。请建议什么是正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:54:49.423

虽然`@ARGV`不是空的，但`<>`操作员将从那里指定的文件中读取。阅读从`STDIN`一次`@ARGV`用尽。

如果您`@ARGV`在读取`@control_header`和`@target_header`数组后显式清空，则程序应该按预期工作。或者，您可以`STDIN`使用`<STDIN>`.

但我相信最好使用 Perl 从文件参数中读取你需要的信息。这个程序展示了这个想法

```
use strict;
use warnings;

my $param1 = shift || 'control.fst';
my @control_header = do {
  open my $fh, '<', $param1 or die qq(Unable to open file "$param1": $!);
  grep />/, <$fh>;
};

my $param2 = shift || 'target.fst';
my @target_header = do {
  open my $fh, '<', $param2 or die qq(Unable to open file "$param2": $!);
  grep />/, <$fh>;
};

while (<STDIN>) {
  # do something again
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:14:27.327

在您的情况下`param1`，`param2`从`@ARGV`.

```
my $param1 = shift;
my $param2 = shift; 
```

`code1`现在您可以处理使用的管道输出

```
while (<>) {
  ...;
} 
```

更通用的解决方案是使用[bash 进程替换](http://www.gnu.org/software/bash/manual/html_node/Process-Substitution.html)，如

```
perl myperlscript.pl <(./other param1 param2) <(./code1 param1 param2 param3) 
```

这使得命名管道的输出`other`和`code1`出现

```
while (<>) {
  ...;
} 
```

将愉快地处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:16:31.207

更多***perlish***代码将是：

```
#!/usr/bin/perl

use strict;
use warnings;

my $param1 = $ARGV[0] || "control.fst";
my $param2 = $ARGV[1] || "target.fst";

my @control_header;
my @target_header;

open FH, "<$param1" or die;
map { push @control_header, $1 if /^(.*?>.*?)[\n\r]*$/ } (<FH>);
close FH;

open FH, "<$param2" or die;
map { push @target_header,  $1 if /^(.*?>.*?)[\n\r]*$/ } (<FH>);
close FH;

...                                                                              

while (<STDIN>) {                                                                
  ...                                                                            
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-12T12:21:13.553

您有两种选择。

1) 读取标准输入

```
while (<STDIN>) {
chomp();  
# do something again

} 
```

2) 从 Perl 脚本中调用第一个程序并处理其输出。请参阅[Perl Cookbook 中的配方 16.05](http://books.perl.org/book/203)。

```
open(PRG,"./code1 param1 param2 param3|") or die $!;
while (<PRG>) {
chomp();  
# do something again

} 
```

# git - Git（在 Windows 上使用 msysgit）-“复合”命令

> ID：10123272
> 
> 赞同：1
> 
> 时间：2012-04-12T12:08:55.220
> 
> 标签：git, bash, git-alias

我需要经常在 Git 中执行几个“两步”或“三步”命令，这需要我还指定一个分支名称作为参数 - 例如：

```
git checkout (branch name)
git pull origin (branch name) 
```

或类似的东西。我想把它“自动化”成一个别名——但是一个简单的 Git 别名是不行的——对吧？

那么如何在 Bash shell 脚本中做到这一点呢？我精通 MS-DOS/Windows 批处理脚本——但我完全是 Bash 新手。

到目前为止我看到的所有带有多个 Git 命令的 Bash 别名示例似乎都*没有*任何参数……但是我在各个分支之间来回跳跃，所以我肯定需要定义**哪个**分支从中央仓库签出并更新...

有什么帮助吗？*nix 新手可以理解的任何博客文章或文章？非常欢迎任何指针！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:18:56.680

您可以像这样定义别名：

```
[alias]
  chepull = !git checkout $1 && git pull origin 
```

你可以做：

```
git chepull branch_name 
```

注意：`$1`有意未在 中指定`git pull origin`，但应按预期工作。

# maven - 如何正确地将 Nexus 和 Maven/Jenkins 用于第 3 方库（不在 Maven 存储库中）和必要的 p2 存储库

> ID：10123273
> 
> 赞同：3
> 
> 时间：2012-04-12T12:08:57.980
> 
> 标签：maven, jenkins, nexus, p2, tycho

我们使用 Jenkins/Maven 进行构建管理和持续集成。管理第三方库应该由我们设置的 Nexus 服务器来处理。

*   有问题的第 3 方库是 org.eclipse.bpmn2 0.7.0
    *   据我们所知，这个库不托管在远程 Maven 存储库中
*   我们已将 3rd 方库上传到托管的 Nexus 3rd 方存储库
*   我们有一些指向网络的代理 Nexus 存储库（有效）

现在到（也许）问题部分：

*   我们的项目由 Eclipse 插件组成
    *   因此，我们需要访问 eclipse p2 存储库
*   Manifest.MF 中描述了对第 3 方库的依赖项
*   Nexus 开源不支持 p2 存储库
    *   因此，我们必须将 Eclipse p2 存储库添加到项目 POM

首先，（可能）来自 Jenkins 使用的 Maven 的 settings.xml 中的相关设置：

```
<localRepository>/var/lib/jenkins/local_repo</localRepository> 
```

我们有一个本地 Maven 存储库。

**也许很重要：本地 Maven 存储库和 Nexus 如何协同工作？本地存储库是多余的吗？它会与 Nexus 库冲突吗？还是 Maven 仅从 Nexus 加载依赖项并存储在本地存储库中？我们应该在安装 Nexus 后清空它吗？**

```
<mirrors>
  <mirror>
  <!--This sends everything else to /public -->
  <id>nexus</id>
  <mirrorOf>*</mirrorOf>
  <url>http://localhost:8082/nexus/content/groups/public</url>
  </mirror>
</mirrors>

<profile>
    <id>nexus</id>
<!--Enable snapshots for the built central repo to direct
    all requests to nexus via the mirror -->
    <repositories>
        <repository>
            <id>central</id>
            <url>http://central</url>
            <releases><enabled>true</enabled></releases>
            <snapshots><enabled>true</enabled></snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>central</id>
            <url>http://central</url>
            <releases><enabled>true</enabled></releases>
            <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
    </pluginRepositories>
</profile>

<activeProfiles>
    <activeProfile>nexus</activeProfile>
</activeProfiles> 
```

正如您可能看到的，我们现在使用默认的 nexus 配置。现在到相关项目POM内容：

```
<repositories>
<!--
    <repository>
        <id>UML2</id>
        <layout>p2</layout>
        <url>http://download.eclipse.org/modeling/mdt/updates/releases/</url>
    </repository>
-->
    <repository>
        <id>indigo</id>
        <layout>p2</layout>
        <url>http://download.eclipse.org/releases/indigo</url>
    </repository>
</repositories> 
```

我们尝试将 p2 存储库合并到 Nexus 中，但随后发现开源版本无法处理 p2 存储库。所以我们需要把它们放在项目的 POM 中，作为 Nexus 之外的存储库。MDT 存储库被注释掉，因为它似乎没有它也能工作。

对 org.eclipse.bpmn2 的依赖位于使用它的相应插件的 manifest.MF 中：

```
Require-Bundle: 
 org.eclipse.bpmn2;bundle-version="0.7.0";visibility:=reexport 
```

该库已上传到 Nexus（使用 GAV 参数）：

*   GroupID：org.eclipse
*   ArtifactID：org.eclipse.bpmn2
*   版本：0.7.0.201111021300
*   包装：罐子

**可能很重要：分类器留空。这里应该输入什么？**

使用 -e -X 启动 Jenkins 作业和 Maven 时，输出如下：

```
[DEBUG] P2resolver.addMavenProject de.some.tool:pom:2.0
[INFO] Adding repository (cached) http://download.eclipse.org/releases/indigo
[DEBUG] Added p2 repository indigo (http://download.eclipse.org/releases/indigo)
[INFO] Cannot complete the request.  Generating details.
[INFO] Cannot complete the request.  Generating details.
[INFO] {org.osgi.framework.executionenvironment=OSGi/Minimum-1.0,OSGi/Minimum-1.1, osgi.ws=gtk, osgi.arch=x86, osgi.os=linux, org.eclipse.update.install.features=true, org.osgi.framework.system.packages=}
[ERROR] Cannot resolve project dependencies:
[ERROR]   Software being installed: de.modeltype.bpmn2 1.0.0.qualifier
[ERROR]   Missing requirement: de.modeltype.bpmn2 1.0.0.qualifier requires 'bundle org.eclipse.bpmn2 0.7.0' but it could not be found
[ERROR] 
mavenExecutionResult exceptions not empty
message : Internal error: java.lang.RuntimeException: "No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from de.modeltype.bpmn2 1.0.0.qualifier to bundle org.eclipse.bpmn2 0.7.0.", "No solution found because the problem is unsatisfiable."]
cause : "No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from de.modeltype.bpmn2 1.0.0.qualifier to bundle org.eclipse.bpmn2 0.7.0.", "No solution found because the problem is unsatisfiable."]
Stack trace : 
org.apache.maven.InternalErrorException: Internal error: java.lang.RuntimeException: "No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from de.modeltype.bpmn2 1.0.0.qualifier to bundle org.eclipse.bpmn2 0.7.0.", "No solution found because the problem is unsatisfiable."]
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:168)
    at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:104)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:70)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:287)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.RuntimeException: "No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from de.modeltype.bpmn2 1.0.0.qualifier to bundle org.eclipse.bpmn2 0.7.0.", "No solution found because the problem is unsatisfiable."]
    at org.eclipse.tycho.p2.impl.resolver.ProjectorResolutionStrategy.resolve(ProjectorResolutionStrategy.java:106)
    at org.eclipse.tycho.p2.impl.resolver.P2ResolverImpl.resolveProject(P2ResolverImpl.java:102)
    at org.eclipse.tycho.p2.impl.resolver.P2ResolverImpl.resolveProject(P2ResolverImpl.java:69)
    at org.eclipse.tycho.p2.resolver.P2TargetPlatformResolver.doResolvePlatform(P2TargetPlatformResolver.java:342)
    at org.eclipse.tycho.p2.resolver.P2TargetPlatformResolver.resolvePlatform(P2TargetPlatformResolver.java:162)
    at org.eclipse.tycho.core.resolver.DefaultTychoDependencyResolver.resolveProject(DefaultTychoDependencyResolver.java:85)
    at org.eclipse.tycho.core.maven.TychoMavenLifecycleParticipant.afterProjectsRead(TychoMavenLifecycleParticipant.java:91)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:273)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    ... 19 more
channel stopped
Finished: FAILURE 
```

我们做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:58:11.217

你有一些事情发生在这里：

> 也许很重要：本地 Maven 存储库和 Nexus 如何协同工作？本地存储库是多余的吗？它会与 Nexus 库冲突吗？还是 Maven 仅从 Nexus 加载依赖项并存储在本地存储库中？我们应该在安装 Nexus 后清空它吗？

Maven 从远程存储库发出对本地存储库中未找到的工件的请求。Nexus 是一个远程存储库，即使它在同一台机器上。因此，为了让请求通过新的 Nexus 设置运行，您需要先清空本地存储库。然后东西将被 Maven 缓存在 Nexus 和本地仓库中。

接下来是你有这个：

```
<mirrorOf>*</mirrorOf> 
```

它告诉 Maven 向 Nexus 请求所有存储库。这将包括您在设置中较低定义的 P2 存储库。为了告诉 Maven 绕过镜像，你想这样做：

```
<mirrorOf>*,!indigo</mirrorOf> 
```

此外，Nexus 的 p2 插件可用于开源，它们只是默认不包含在捆绑包中，但您可以手动下载和安装它们。

最后，我们这里有 IRC 房间、邮件列表和知识库，可能对您有所帮助：http: [//www.sonatype.org/nexus/participate](http://www.sonatype.org/nexus/participate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:51:03.520

默认情况下，Tycho 不会在 Maven 存储库中搜索解决依赖关系。（背景：搜索完整的 Maven 存储库是不可能的，因为 Maven 存储库的索引不包含足够的信息让 Tycho 进行依赖解析，因此 Tycho 将被迫下载和分析所有 Maven 人工制品。）

然而，可以将一些 Maven 人工制品添加到 Tycho 的搜索空间（所谓的“[目标平台](http://wiki.eclipse.org/Tycho/Target_Platform)”）：

1.  在插件上设置`pomDependencies`= （有关示例 POM，请参见[此处）](http://git.eclipse.org/c/tycho/org.eclipse.tycho-demo.git/tree/itp02/build02)`consider``target-platform-configuration`
2.  通过 POM 中的 GAV 将依赖项添加到 org.eclipse.bpmn2 包。

如果您随后`Require-Bundle: org.eclipse.bpmn2`在清单中有 a，那么 Tycho 将能够解决该依赖关系，因为该捆绑包存在于目标平台中。

请注意，您需要在所有需要 org.eclipse.bpmn2 包的模块中具有上述配置和依赖项，因此您可能希望将其放入父 POM 中。

# javascript - 将中文表格数据转换为英文？

> ID：10123274
> 
> 赞同：0
> 
> 时间：2012-04-12T12:09:02.047
> 
> 标签：javascript, translation, google-translate

我们一直在合作的一位客户打算制作一个活动预订网站的中文/英文版本。虽然我们可以使用[Google 的翻译工具](http://translate.google.com/translate_tools)来做到这一点，但我想知道是否可以**将表单数据**（可能是中文的）转换为英文。

因此，中国游客可以使用表格进行预订，脚本会检测中文字符，然后翻译成英文，这样他们的预订就可以在澳大利亚处理。

这可能吗？任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:32:11.933

从理论上讲，您可以检测汉字的使用（字符页面/范围会起作用）并在您的表单处理脚本中集成自动翻译服务。但是，我真的不建议这样做，因为从/到中文的自动翻译仍处于起步阶段，您可能甚至不会了解中国访客写给您的内容的要点。如果你把中文原文发到澳大利亚，人们至少可以使用几个自动翻译器和词典来弄清楚可能是什么意思。

这家公司希望如何回应中国客户？机器翻译在那里肯定是不可接受的，因为中国客户不会理解它，或者如果他们理解了，他们不会信任依赖机器翻译的公司。要拥有中国客户，一定要雇佣至少一名会说中文的工作人员，他们可以阅读中文预订请求并做出适当的回应。在澳大利亚找到这样的员工应该不会太难，也不会太贵。

# javascript - 为什么在 Javascript 中设置的这个 onclick 事件不会触发？

> ID：10123277
> 
> 赞同：0
> 
> 时间：2012-04-12T12:09:11.107
> 
> 标签：javascript, html

代码很简单：

```
var td1 = document.createElement("td");
td1.id="td_radio_"+nr_int+"_"+nr_var2;
td1.style.border = "0";
td1.style.width = "5%";
td1.onclick="adaugare_varianta_simplu(\'"+nr_int+"\',\'"+nr_var2+"\');"; 
```

但是当我单击单元格时该功能不会触发；我究竟做错了什么？我没有使用绑定，因为稍后会有一个 removeAttr 处理它，所以我希望它设置为一个属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:10:21.333

认为你需要这个：

```
td1.onclick="function(){adaugare_varianta_simplu(\'"+nr_int+"\',\'"+nr_var2+"\');}"; 
```

您必须将事件包装在一个函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:13:19.040

您正在分配一个字符串作为事件处理程序，因此它无法执行，下面是我认为的更多内容。

```
var td1 = document.createElement("td");
td1.id="td_radio_"+nr_int+"_"+nr_var2;
td1.style.border = "0";
td1.style.width = "5%";
td1.onclick = function() {
    adaugare_varianta_simplu(nr_int,nr_var2);
}; 
```

# javascript - javascript: before a method 是什么意思？

> ID：10123278
> 
> 赞同：0
> 
> 时间：2012-04-12T12:09:16.617
> 
> 标签：javascript, syntax

javascript: before a method 是什么意思？

我知道它在调用一个函数，但是在什么情况下我们应该使用它呢？

javascript:method() 和 method() 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:07:11.807

内联' **JavaScript:** '（例如*onclick="JavaScript:alert('test');"*）用于指定以下脚本片段的语言。现在它已被弃用，您不应该使用它。当前的[HTML 语言规范](http://dev.w3.org/html5/html-author/)根本没有说明这一点。

# asp.net-mvc-3 - Asp.net mvc 3 - 动作控制器返回部分视图另一个动作控制器

> ID：10123282
> 
> 赞同：1
> 
> 时间：2012-04-12T12:09:31.287
> 
> 标签：asp.net-mvc-3, actioncontroller, asp.net-mvc-partialview

我想要一个动作控制器，它返回另一个动作控制器的部分视图。

```
public ActionResult Method1 (string s)
{
return PartialView (_PartialViewMethod1, object1);
}

public ActionResult Method2 ()
{
return PartialViewOfMethod1;
} 
```

我在 method2 上试过这个：return PartialView (Method1(s)) 但它不起作用，我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:14:00.757

尝试这个：

```
public ActionResult Method2()
{
    string s = "someDefinedString";

    // instead of return PartialView(Method1(s));
    return Method1(s);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:13:31.740

```
public ActionResult Method2 ()
{
return PartialView ("Method1", object1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:17:44.760

这应该会给你你正在寻找的结果

```
public ActionResult Method2 ()
{
   return PartialView (_PartialViewMethod1, object1);
} 
```

我猜你有一些代码，你有两个动作方法的共同点，这就是你想要调用另一个动作的原因，然后你可能把它移到一个通用方法并从你想要的任何地方调用它。一些反应！

```
public YourViewModel GetData(srting s="")
{
  YourViewModel obj1=new YourVieWModel()
  // set some property values or do some operations to get data
  //your custom code
  return obj1; 
}

public ActionResult Method1 (string s)
{
  return PartialView (_PartialViewMethod1,  GetData(s));
}

public ActionResult Method2 ()
{
   return PartialView (_PartialViewMethod1, GetData());
} 
```

# c++ - 如何知道析构函数中的堆栈损坏来自哪里？

> ID：10123284
> 
> 赞同：1
> 
> 时间：2012-04-12T12:09:41.827
> 
> 标签：c++, memory, gcc, c++11, memory-corruption

从现在开始，我一直面临一个问题，但我没有找到解决方案:(

我有一堂这样的课：

```
template<typename Node, unsigned int Threads, unsigned int Size = 2, unsigned int Prefill = 50>
class HazardManager {
    public:
        HazardManager();

        HazardManager(const HazardManager& rhs) = delete;

        /* Some methods */

    private:
        Node* Pointers[Threads][Size];

        std::list<Node*> LocalQueues[Threads];
        std::list<Node*> FreeQueues[Threads];

        /* Some private methods */
}; 
```

这个类在另一个类中使用：

```
template<typename T, int Threads>
class AVLTree {
    public:
        AVLTree();
        ~AVLTree();

    private:
        Node* rootHolder;

        HazardManager<Node, Threads, 3> hazard;

        unsigned int Curren[Threads];
}; 
```

并且 AVLTree 类是在堆栈上分配的。当 AVLTree 被破坏时，我在 std::list 析构函数中遇到了分段错误。这是 valgrind 的输出：

```
==9336== Invalid read of size 8
==9336==    at 0x419F69: std::_List_base<avltree::Node*, std::allocator<avltree::Node*> >::_M_clear() (list.tcc:74)
==9336==    by 0x419645: std::_List_base<avltree::Node*, std::allocator<avltree::Node*> >::~_List_base() (stl_list.h:401)
==9336==    by 0x418DF9: std::list<avltree::Node*, std::allocator<avltree::Node*> >::~list() (stl_list.h:458)
==9336==    by 0x418E66: HazardManager<avltree::Node, 1u, 3u, 1u>::~HazardManager() (in /home/wichtounet/dev/btrees/bin/btrees)
==9336==    by 0x418F19: avltree::AVLTree<int, 1>::~AVLTree() (AVLTree.hpp:154)
==9336==    by 0x418D9A: void testST<avltree::AVLTree<int, 1> >(std::string const&) (test.cpp:110)
==9336==    by 0x41831D: test() (test.cpp:180)
==9336==    by 0x41CFF8: main (main.cpp:19)
==9336==  Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

在我看来，这是堆栈损坏的情况，但我不知道它可能来自哪里......在使用类本身的过程中没有错误，只有当它被破坏时。

是否有工具可以帮助查找此错误或提示可以帮助查找这种损坏何时可能来自？

我正在使用 GCC 4.7 来编译我的应用程序，其中包含调试符号并且没有优化。

提前感谢您的任何帮助或想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:15:42.587

您可能会过度索引`HazardManager::Pointers`破坏列表，只有当它的析构函数试图访问无效的内存时（因为指针出现乱码），您才会意识到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:06:34.653

切换到`boost::array`/`std::array`并使用`at`，你会得到一个`out_of_range`例外。

# c# - 自定义会员提供商未登录

> ID：10123285
> 
> 赞同：0
> 
> 时间：2012-04-12T12:09:52.493
> 
> 标签：c#, asp.net, asp.net-membership

我在编写自己的成员资格和角色提供者时遇到了问题。在我的 MySQL 数据库中，用户存储在一个由四列组成的表中：用户名 | 密码 | 特权等级 | 日志日期

现在，我想要实现的是使登录机制起作用。我创建了一个扩展 MembershiProvider 的类，但只有方法 ValidateUser （工作正常）。我还应该覆盖什么？我的 RoleProvider 运行良好，为给定用户提供正确的权限级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:18:21.410

您只需要覆盖您要使用的方法。[`MembershipProvider`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)公开您通常希望在授权引擎中看到的所有操作，因此，例如，如果您需要允许用户更改他们的密码然后覆盖`ChangePassword`等。

幸运的是，内置 Membership Providers 的源代码[已经发布](http://weblogs.asp.net/scottgu/archive/2006/04/13/442772.aspx)，应该为您自己的实现提供一个很好的指南。

# agile - 敏捷开发工具应该具备哪些特性？

> ID：10123290
> 
> 赞同：1
> 
> 时间：2012-04-12T12:10:00.397
> 
> 标签：agile, jira, agile-project-management

我决定我在大学的最后一个项目将是一个简约的敏捷项目管理工具。我需要找到一组功能来开发。我查看了 JIRA，但它有很多功能。我应该选择将哪个添加到我的应用程序中？在您看来，敏捷开发工具中最需要的功能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:41:26.317

敏捷工具是指 Scrum 工具还是看板工具？

对于 Scrum，最小的功能集是：

1.  将故事添加到待办事项
2.  优先处理待办事项中的故事
3.  创建冲刺
4.  将故事分配给 sprint
5.  将故事分解为任务并估计它们
6.  编辑任务
7.  生成冲刺燃尽图

对于看板，最小的功能集是：

1.  创建一个板
2.  自定义板上的列
3.  将卡片添加到板上
4.  在列之间移动卡片
5.  移除/存档板上的卡片

# css - css定位和对象的顺序

> ID：10123294
> 
> 赞同：1
> 
> 时间：2012-04-12T12:10:17.520
> 
> 标签：css, css-position, clearfix

我正在尝试调整我的网站，并且在电脑前坐了太久，因此我不知道我的错误在哪里。希望有人可以帮助具有基本css知识的人。

这是我的CSS：

```
#body {float: left; width: 100%; min-height:100%;}

#header-wrap, 
#slider-wrap, 
#content-wrap, 
#footer-wrap {
       float: left;
       clear: both;
       width: 100%;
       }

#header-wrap  {
       float: left;
       width: 100%;
       }

#header {height: 100px;}
#slider {height: 500px;}  
#content {padding: 0; text-align: left;} 
```

我想添加

```
position: absolute; top: 0px 
```

到#slider-wrap 以便它从标题下方的右上角开始，但是当我这样做时，#content 都会向上移动并直接放在滑块下方？

这些对象的正确定位是什么，以便它们按以下顺序显示：1\. 标题 2\. 滑块（部分位于标题下方） 3\. 内容

在没有滑块的页面上，内容应该跟在标题后面？？？

这个菜鸟的任何线索将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:18:32.707

这个：

```
#header-wrap, 
#slider-wrap, 
#content-wrap, 
#footer-wrap {
   float: left;
   clear: both;
   width: 100%;
   } 
```

意味着所有三个规则都适用于所有四个指定元素。如果您`position`也在那里添加您的规则，它将适用于所有这些元素。

相反，请尝试添加：

`#slider-wrap { position: absolute; top: 0px }`

# python - 在 IronPython 中使用编解码器读取 UTF-8 文件

> ID：10123296
> 
> 赞同：10
> 
> 时间：2012-04-12T12:10:27.313
> 
> 标签：python, encoding, csv, utf-8, ironpython

我有一个以 UTF-8 编码的 .csv 文件，其中包含拉丁文和西里尔文符号。

```
;F1;F2;abcdefg3;F200
;ABSOLUTE;NOMINAL;NOMINAL;NOMINAL
o1;1;USA;Новосибирск;1223 
```

我正在尝试在 IronPython 2.7.1 中执行以下脚本：

```
import codecs

f = codecs.open(r"file.csv", "rb", "utf-8")
f.next() 
```

在 f.next() 执行期间发生异常：

```
Traceback (most recent call last):
  File "c:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft\Python Tools for Visual Studio\1.1\visualstudio_py_repl.py", line 492, in run_file_as_main
    code.Execute(self.exec_mod)
  File "<string>", line 4, in <module>
  File "C:\Program Files\IronPython 2.7.1\Lib\codecs.py", line 684, in next
    return self.reader.next()
  File "C:\Program Files\IronPython 2.7.1\Lib\codecs.py", line 615, in next
    line = self.readline()
  File "C:\Program Files\IronPython 2.7.1\Lib\codecs.py", line 530, in readline
    data = self.read(readsize, firstline=True)
  File "C:\Program Files\IronPython 2.7.1\Lib\codecs.py", line 477, in read
    newchars, decodedbytes = self.decode(data, self.errors)
UnicodeEncodeError: ('unknown', '\x00', 0, 1, '') 
```

同时在 CPython 2.7 中，脚本可以正常工作。同样在 IronPython 2.7.1 以下脚本工作正常：

```
import codecs

f = codecs.open(r"file.csv", "rb", "utf-8")
f.readlines() 
```

有谁知道什么可能导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:14:45.287

看起来这可能是`next()`处理编解码器的错误。你能[打开一个问题](http://ironpython.codeplex.com/WorkItem/Create)来复制附件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:10:03.653

“rb”参数可能有问题，尝试使用“r”

```
f = codecs.open(r"file.csv", "r", "utf-8") 
```

# lotus-notes - 代理转发的邮件无法在 Lotus Notes 的邮箱中打开

> ID：10123297
> 
> 赞同：0
> 
> 时间：2012-04-12T12:10:28.493
> 
> 标签：lotus-notes

我写了一个像这样工作的代理-

每当我的下属收到带有附件的邮件时；代理运行并将该邮件转发给我们的 HR，后者可以跟踪所有邮件。

一切正常，但是当 HR 尝试打开邮件时会出现问题。他收到一条注释错误 - ***“您无权访问该数据库”*** ，即使他在 ACL 中有“人员”“经理”访问权限。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:01:59.620

右键单击文档链接并选择属性。检查以查看您实际链接到的内容。我见过这样的常见错误，用户正在创建指向他们自己的邮件文件的文档链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:08:19.050

试试 Mail Journalling，看看它能为您做什么。在 Domino 服务器上设置它，并添加一个记录所需邮件的规则。

# java - 在 Play Framework 中将文件传递给 POST 请求

> ID：10123299
> 
> 赞同：0
> 
> 时间：2012-04-12T12:10:38.750
> 
> 标签：java, rest, playframework

我们正在使用 Play Framework 2.0。服务 REST 请求。我们希望能够将文件传递给 POST 请求，并能够在我们的 Contoller 中处理它。

我最终得到以下结果：

```
GET /customer/:id/photos    controllers.PhotosController.addPhoto(id: Integer, page: String) 
```

我试图在控制器代码中获取文件的内容，但没有运气。

我通过以下方式发送 POST 请求：

```
curl.exe -X GET localhost:9000/customer/23/photos?page=Sun.jpg 
```

任何想法如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:19:58.763

在 Play 2.0 中，您可以这样做：

**控制器**（只是一个例子）：

```
public static Result addPhoto(Integer id){
    MultipartFormData body = request().body().asMultipartFormData();
    FilePart file = body.getFile("page");
    System.out.println(file.getFilename());
    System.out.println(file.getFile().getAbsoluteFile());
    return ok();
} 
```

**路线**：

```
POST    /addphoto/:id   controllers.PhotosController.addPhoto(id: java.lang.Integer) 
```

**卷曲命令**：

```
curl --header "enctype -> multipart/form-data" -F page=@/path/to/file localhost:9000/addphoto/23 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:29:26.247

我相信你的控制器应该看起来像：

```
public static void addPhoto(Integer id, File page){} 
```

路线：

```
POST /customer/:id/photos controllers.PhotosController.addPhoto(id: Integer, page: File) 
```

您的测试请求应该类似于：

```
curl.exe -F page=@Sun.jpg localhost:9000/customer/23/photos 
```

（在游戏 1.2.3 中测试）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:28:36.473

```
//add this line in you controller

static play.data.Form<Model> modelForm = form(Model.class);

public static Result addPostSave(){
    try{
      MultipartFormData body = request().body().asMultipartFormData();
      FilePart picture = body.getFile("picture");
      File pic = picture.getFile();
if(filledForm.hasErrors()){
              return ok(addPost.render(postForm));
          }else{              
              Post post = new Post();
              post.picture = pic;
              post.save();
              return ok(index.render("The image is created"));
          }  
    }catch(IOException e){
       return ok(e.to_string)
    }    
} 
```

# objective-c - 单击uitableview单元格后获取相同的数据

> ID：10123302
> 
> 赞同：0
> 
> 时间：2012-04-12T12:10:47.167
> 
> 标签：objective-c, ios, cocoa-touch, ipad, uitableview

我有一个字符串数组，它显示在 uitableview 中。当用户点击排序按钮时，数组被排序，然后我使用 [tableview reloaddata]。以便新排序的内容显示在表格中。但是当我选择特定单元格时，该单元格显示两个相互重叠的文本，新排序的文本和先前存在于该单元格中的文本。为什么会这样。

这是我显示单元格的代码。

```
-  (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

static NSString *CellIdentifier  =  @"Cell";

UITableViewCell *cell  =  [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell ==   nil) {

    cell  =  [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;

} 

UILabel * timeLabel = [[UILabel alloc]initWithFrame:CGRectMake(190, 0, 120, tableView.rowHeight)];
timeLabel.text = [[dataArray objectAtIndex:indexPath.row] time];
[cell.contentView addSubview:timeLabel];

return cell ;
} 
```

这是我的排序代码。

```
-(void)sortByTime{

NSSortDescriptor *sortDescriptor;
sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"time"
                                             ascending:NO] ;
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSArray *sortedArray;

dataArray =  [sql getTableData];  // get data from sql file

sortedArray = [dataArray sortedArrayUsingDescriptors:sortDescriptors];

dataArray = [[NSMutableArray alloc]initWithArray:sortedArray];

[dataTableView reloadData];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:33:18.097

你的代码有问题。您正在使用可重复使用的单元格，问题是您没有重新使用单元格内的视图。特别是时间标签。每次使用单元格时，您都在创建一个新的 timeLabel，当您重用一个单元格时，您会在单元格中添加一个 adicional 标签，这可能是文本重叠的原因。

为了重复使用标签，您应该为 UILabel 设置一个 TAG 编号，并在创建新的 uilabel 之前检查单元格是否已经有一个。

我会替换代码：

```
UILabel * timeLabel = [[UILabel alloc]initWithFrame:CGRectMake(190, 0, 120, tableView.rowHeight)];
timeLabel.text = [[dataArray objectAtIndex:indexPath.row] time];
[cell.contentView addSubview:timeLabel]; 
```

和：

```
UILabel * timeLabel = [cell viewWithTag:55]
if(!timeLabel) {
    timeLabel = [[UILabel alloc]initWithFrame:CGRectMake(190, 0, 120, tableView.rowHeight)];
    timeLabel.tag = 55;
    [cell.contentView addSubview:timeLabel];
}

timeLabel.text = [[dataArray objectAtIndex:indexPath.row] time]; 
```

标签号的值由您决定，我仅以 55 为例。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:18:09.233

因为您想要一个自定义单元格，并且每次发生这种情况时您只需将新的子视图放入单元格中，您必须使用在不同 nib 中创建的自定义单元格并使用它来显示您的数据

只需制作新笔尖并从新笔尖加载它，这样您就可以获得正确的数据

或者可以检查单元格的 contentView 中是否有任何子视图，然后先删除它们，然后添加新创建的子视图

# android - 如何在 Android 中将 HTML 标签设置为普通视图？

> ID：10123303
> 
> 赞同：0
> 
> 时间：2012-04-12T12:10:48.353
> 
> 标签：android, html

我喜欢这个 html 博客

```
<head>
<style>
<!--.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
font-size: 10pt;
font-family:Tahoma
}
--></style></head>
<body class='hmmessage'><div dir='ltr'>
text<div>write</div>
</div></body>
</html> 
```

text 和 write 是结果。此 Html 标签必须显示为

```
-----------
text write |
----------- 
```

我怎样才能在 Android 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:13:10.210

在我看来，这应该很容易从 css 中实现：

```
div.ltr div
{
 display:inline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:16:41.867

使用[TextView](http://developer.android.com/reference/android/widget/TextView.html)在您的应用中显示文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:25:58.710

`textview`在或`button`如下使用html

```
String htmltext = "<html><body>/*... html body here...*/</body></html>";

textview.setText(Html.fromHtml(htmltext)); 
```

如果你想使用 css 样式或 javascript 使用`webview`like

`webview.loadDataWithBaseURL(null, htmltext, "text/html", "UTF-8", null);`

# api - 通过 Magento API 将产品添加到购物车会导致 0 价格

> ID：10123304
> 
> 赞同：3
> 
> 时间：2012-04-12T12:10:58.617
> 
> 标签：api, magento

我正在尝试以编程方式在 Magento 中创建订单和发票，但是每当我将产品添加到购物车时，每个产品的价格都设置为 0，从而导致总计为 NULL。

我也尝试了 moveToCustomerQuote 方法，但它会抛出一个 Magento 错误，说客户报价（购物车 ID）不存在。

这是我的代码

```
$cart           = $magi->execute("cart.create");
$add_customer   = $magi->execute("cart_customer.set",array($cart,$customer));

$products   = array(array(
                "product_id"    => 167,
                "qty"           => 50
              ));

$add_product    = $magi->execute("cart_product.add",array($cart,$products)); 
```

是我做错了什么还是我应该采取其他步骤让产品正确列出价格？

# java - 将 InputString 转换为 String，就好像程序没有挂起一样

> ID：10123315
> 
> 赞同：1
> 
> 时间：2012-04-12T12:11:54.050
> 
> 标签：java, serial-port, inputstream

我的程序可以运行，`inputStream.toString();`但如您所知，这不是转换`inputStream`为`String`. 因此，当我尝试正确转换时，它会挂起。我的方法是：

```
 private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         

    if(initialized && connected){
        try{
            sms.findOperator();
            jTextArea2.append(sms.logString);
            sms.logString = "";
        }
        catch(Exception e){
            JOptionPane.showMessageDialog(null, "Failed to find operator!", "ERROR", JOptionPane.ERROR_MESSAGE);
        }
    }
    else JOptionPane.showMessageDialog(null, "Cannot connect to the port specified!", "ERROR", JOptionPane.ERROR_MESSAGE);
    // TODO add your handling code here:
} 
```

这是`findOperator()`方法：

```
 public void findOperator(){  
        send("AT+COPS?\r\n");
} 
```

这是`send()`方法：

```
 public void send(String cmd) {
    try {
        //Thread.sleep(200);
        outputStream.flush();
        outputStream.write(cmd.getBytes());
        inputStream = serialPort.getInputStream();
        //System.out.println(" Input Stream... " + inputStream.toString());
        Thread.sleep(300);

        logString += inputStreamtoString(inputStream);
    }
    catch(Exception e){
        e.printStackTrace();            
    }
    finally{

        //logString += inputStream.toString()+ '\n';
//            if(infoType == "msg") return "Input Stream... " + inputStream.toString()+     '\n';
//            else return inputStream.toString();    
        //return logString;
        //logString += inputStreamtoString(inputStream);
    }

} 
```

这是`inputStreamtoString()`方法：

```
 public String inputStreamtoString(InputStream is) throws IOException{
//        try {
//            return new java.util.Scanner(is).useDelimiter("\\A").next();
//        } catch (java.util.NoSuchElementException e) {
//            return "";
//        }        

    BufferedReader reader = new BufferedReader(new InputStreamReader(is)); 
    StringBuilder sb = new StringBuilder(); 

    String line = null; 

    try { 
        while ((line = reader.readLine()) != null) { 
        sb.append(line + "\n"); 
        } 
    } catch (IOException e) { 
        e.printStackTrace(); 
    } finally { 
        try { 
        is.close(); 
        } catch (IOException e) { 
        e.printStackTrace(); 
        } 
    }

    return sb.toString(); 
} 
```

如果我不使用`inputStreamtoString()`方法并使用`inputStream.toString()`我的程序运行良好，但我没有得到正确的字符串。有什么建议吗？提前致谢...

**更新：**`COM3`我的调制解调器使用带有 GSM SIM 卡的端口。我得到一个包含巨大空间的字符串，例如：

```
+COPS:                  <...500 spaces...>                    0,0,"Banglalink" 
```

所以我讨厌那些空间。我需要一个字符串：`+COPS: 0,0,"Banglalink"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:23:24.940

您正在尝试从连接到串行端口的流中彻底读取（即直到读取所有数据）。如果端口上没有可用数据（等待数据到来），这将挂起。即使有数据，你也会有一个无限循环。

更新：您可以尝试这样的事情（改编自[此处](http://www.java2s.com/Code/JavaAPI/javax.comm/CommPortgetInputStream.htm)列出的代码）：

```
 byte[] readBuffer = new byte[200];

 try {
   while (is.available() > 0) {
     int numBytes = is.read(readBuffer);
     sb.append(new String(readBuffer, "US-ASCII"));
   }
 } catch (IOException e) {
   // handle exception
 } 
```

更新：更改字符串创建以使用指定的字符集（而不是系统默认值）

# objective-c - GNUStep 制造问题

> ID：10123318
> 
> 赞同：0
> 
> 时间：2012-04-12T12:11:57.340
> 
> 标签：objective-c, makefile, gnustep

我已经在我的 WinXp 机器上安装了 GNUStep gnustep-msys-system-0.29.0-setup.exe 和 gnustep-core-0.29.1-setup.exe

我能够编译问题。文档说 gnustep-core 带有 make 实用程序，但我无法找到或使用它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:25:51.180

```
cd gnustep/core/make
./configure
make
make install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:38:57.817

假设一切都正确安装，`jacekmigacz`'的答案可能有效。

但是，更简单的方法可能是简单地安装 Linux。这将使您能够轻松安装 GNUStep 和 LLVM。

或者，获取 GNUStep Live CD ( [http://wiki.gnustep.org/index.php/GNUstep_Live_CD](http://wiki.gnustep.org/index.php/GNUstep_Live_CD) )。

# java - 为什么equals可能不会返回true

> ID：10123319
> 
> 赞同：0
> 
> 时间：2012-04-12T12:11:58.640
> 
> 标签：java, equals

我有这个字符串：`"no_questions_by_user"`在一个名为 result 的变量中。

比我做这个检查：

```
if ( result != null && result.equals( "no_user_id" ) )
{
        Log.d( "Post execute: " , "NOOOT  OKKKK - no user id" );    
}
else
if ( result != null && result.equals( "database_error" ) )
{
        Log.d( "Post execute: " , "NOOOT  OKKKK - database error" );    
}
else
if ( result != null && result.equals( "no_questions_by_user" ) )
{           
        Log.d( "Post execute: " , "NOOOT  OKKKK - no questions by user so far" );   
}
else
{
  Log.d( "MyQuestionsActivity" , "In JSON parsing area.." );                
} 
```

它总是到最后一个。但据我了解，它应该真正进入检查的块`result.equals( "no_questions_by_user" )`

知道为什么该块没有被执行吗？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T12:15:27.237

代码看起来不错。您的变量`result`必须有另一个值。

我的猜测是结果字符串的末尾或开头有一些空格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T12:27:50.240

就个人而言，我认为这段代码是一团糟。

我会编写一种方法来获取结果并在地图中查找消息。所有那些如果测试让我的眼睛流血：

```
private static final Map<String, String> LOG_MESSAGE_MAP;

static {
    LOG_MESSAGE_MAP = new HashMap<String, String>();
    // put all your result, message pairs in here
}

public void logResultDependentMessage(String result) {
    log.debug(LOG_MESSAGE_MAP.get(result));
} 
```

现在添加新结果，消息对仅意味着插入到地图中。如果您使用的是 Spring 之类的东西，您可以在配置中进行配置，而无需触及代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T12:16:42.113

尝试：

```
result.trim().equals( "no_questions_by_user" ) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T12:15:52.093

您在调试器中看到“no_questions_by_user”了吗？

您可以尝试在测试之前对其进行修剪，因为在调试器中很难检测到空格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T12:25:09.703

确保“结果”变量的值中没有空格。在输入 if 语句之前，您可以像这样打印一行。

```
System.out.println("The Value of result variable is=\"" + result + "\""); 
```

你不妨这样做

```
if ( result != null && result.trim().equals( "no_questions_by_user" ) )
{           
        Log.d( "Post execute: " , "NOOOT  OKKKK - no questions by user so far" );   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T12:20:04.677

我建议你使用一些静态变量来存储你的字符串，这样你就可以避免输入错误。

# jquery - JQuery :last-child 封装嵌套元素的父级

> ID：10123320
> 
> 赞同：0
> 
> 时间：2012-04-12T12:12:00.857
> 
> 标签：jquery, jquery-selectors

我有以下 HTML：

```
//'[popup]' hook nested at random depths, using <ul> or <ol>, no classes or id's
<ol>
    <li>Blah</li>
    <li>Blah</li>
    <li>Foo
        <ol>
            <li>[popup]Bar</li>
        </ol>
    </li>
</ol> 
```

我希望以`[popup]`钩子为目标，并给出它`<li>`的弹出类，pop/n。然后我希望给它的父母`(Foo)<li>`不同类别的箭头，arr/n。

这是代码：

```
var num = 0;

//Find [popup] instances, increment the number
$("li:contains('[popup]') li:last-child").each(function() {
    var nextnumber = num++;

    //add a general and a unique class to the list item containing the hook
    $(this).addClass('popup' + ' ' + 'pop' + nextnumber);

    //Get the parent list item, and give it general and unique classes also.
    $thisArrow = $(this).parent().parent();
    $thisArrow.addClass('arrow' + ' ' + 'arr' + nextnumber);

}); 
```

这对于嵌套一层深的目标没有问题，但不止于此。当出现目标嵌套两层深的列表时，会发生以下情况：

```
<ol>
    <li>Blah</li>
    <li class="popup pop1 arrow arr1">Blah
        <ol>
            <li class="arrow arr0">Foo
                <ol>
                    <li class="popup pop0">[popup]Bar</li>
                </ol>
            </li>
            <li class="arrow arr2">Foo
                <ol>
                    <li class="popup pop2">[popup]Bar</li>
                </ol>
            </li>
        </ol>
    </li>
</ol> 
```

您可以看到，一旦到达最后一个（总是列表中的最后一次出现） :last-child 元素，不知何故，它的父级的父级被赋予了目标和父级的类，*然后*这些类被添加到它本身。

如果有人能指出我的错误，我将不胜感激。

（我尝试过`.parents().eq(1);`而不是`.parent().parent()`相同的结果。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:29:51.413

不是 100% 确定箭头的事情，但我认为你的主要问题是嵌套的 li 内容也会成为 :contains 的目标

对“以 [popup] 开头”的文本内容进行测试可能会有所帮助。

```
var num = 0;

//Find [popup] instances, increment the number
$("li:contains('[popup]')").each(function() {    
    if($(this).text().indexOf("[popup]")==0){
    var nextnumber = num++;
    $(this).addClass('popup' + ' ' + 'pop' + nextnumber);
}

});​ 
```

见这里：http: [//jsfiddle.net/r3wK4/](http://jsfiddle.net/r3wK4/)

如果我不明白这个问题，请告诉我:-)

# python - Python 装饰器的典型应用和用例

> ID：10123321
> 
> 赞同：4
> 
> 时间：2012-04-12T12:12:03.520
> 
> 标签：python, python-3.x, python-2.7

在最近阅读[这篇](http://www.thumbtack.com/engineering/a-primer-on-python-decorators/)关于 Python 装饰器的文章时，它举例说明了作为 Python 装饰器应用程序的[记忆技术。](http://en.wikipedia.org/wiki/Memoization)虽然我对 Python 装饰器有一定的了解，但我希望了解更多这样有效的装饰器用例，以及您通常如何在日常代码中使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:18:32.587

有许多可用的内置装饰器，例如`classmethod`、`property`、`staticmethod`和`functools.wrap`。编写一个装饰器来记录函数的使用情况以进行调试通常很方便。[这个 Python wiki 页面](http://wiki.python.org/moin/PythonDecoratorLibrary)上有很多示例装饰器，尽管我认为至少其中一些更旨在展示 Python 的灵活性，而不是实际提供有用的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:27:46.377

由于 Python 3 支持类型注释，因此可以使用装饰器作为检查的一种方式。

```
def check(f):
    def _f(x):
        if type(x) != f.__annotations__['x']:
            raise TypeError(type(x))
        val = f(x)
        if 'return' in f.__annotations__ and f.__annotations__['return'] != type(val):
            raise TypeError(type(val))
        return val
    return _f

@check
def f(x: int) -> int:
    return x * 2

>>> f(2)
4

>>> f('x')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in _f
TypeError: <class 'str'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:14:23.423

`auth` [您可以在 Django Web 框架文档](https://docs.djangoproject.com/en/dev/topics/auth/)中查看 Python 装饰器的有效用例。明显的例子（我个人每天都在使用）包括使用装饰器来[限制经过身份验证的用户的视图](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)，[根据特定的用户权限限制访问](https://docs.djangoproject.com/en/dev/topics/auth/#the-permission-required-decorator)等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:17:25.017

这是一个实际的例子。看看有没有备忘录的斐波那契数列总和。

```
from functools import wraps
def memo(func): 
    cache = {}
    @wraps(func)
    def wrap(*args):
        if args not in cache: 
            cache[args] = func(*args)
        return cache[args] 
    return wrap

def fib(i):
    if i < 2: return 1
    return fib(i-1) + fib(i-2)

@memo
def fib_memo(i):
    if i < 2: return 1
    return fib_memo(i-1) + fib_memo(i-2) 
```

现在测试速度差异！

```
>>> print fib(200)
...
>>> print fib_memo(200)
... 
```

# blackberry-playbook - Blackberry Playbook App 调试安装错误

> ID：10123322
> 
> 赞同：5
> 
> 时间：2012-04-12T12:12:07.107
> 
> 标签：blackberry-playbook

我正在尝试使用 USB 电缆和终端线命令将 Blackberry Webworks 应用程序从我的 MAC 安装到剧本上 blackberry-deploy -installApp ...

我收到一个错误，指的是应用程序和调试令牌之间的作者不匹配

result::failure 881 应用程序作者与调试令牌作者不匹配

有没有人有同样的问题？

谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:30:34.147

“我有类似的问题。检查 blackbery-tablet.xml 和字段是否正确。

要为这些字段获取正确的值，只需将打包的 .bar 文件重命名为 .zip，然后将其解压缩。META-INF 文件夹中会有 manifest.mf 文件。用记事本打开它。从那里获取价值并重建您的应用程序。如果这没有帮助，则重建调试令牌并确保将其安装在设备上。调试令牌需要有正确的设备引脚。

如果此评论对您有所帮助，请单击“竖起大拇指”图标！如果您的问题得到解决，请单击解决方案上的解决方案按钮！” - 来源：http: [//supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Failure-881-Application-Author-does-not -match-debug-token-author/mp/2055935#M32567](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Failure-881-Application-Author-does-not-match-debug-token-author/m-p/2055935#M32567)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:52:01.980

尝试在 bar-descriptor.xml 文件中设置以下属性

```
 <!--  Name of author which is used for signing. 
         Must match the developer name of your development certificate -->
   <author>**</author>

   <!--  Unique author ID assigned by signing authority. Required if using debug tokens -->
   <authorId>**</authorId> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T10:16:50.967

用文本编辑器打开文件`blackberry-tablet.xml`，文件在你的`<BlackBerry WebWorks SDK Tablet install folder>\bbwp\AirAppTemplates\src\`.

您应该会看到类似以下内容的部分：

```
<publisher>Sample Inc.</publisher>
<category>core.internet</category> 
```

在本节之后，您必须添加

```
<author>*replace with your author name info*</author>
<authorId>*replace with your author id info*</authorId> 
```

您必须从上传到 PlayBook 的调试令牌中获取作者和作者 ID 信息。您应该在您的计算机上拥有调试令牌，将 .bar 重命名为 .zip 并解压缩。使用文本编辑器在 MANIFEST.MF 文件的 META-INF 文件夹中查找实际字符串值的值，`Package-Author:`然后`Package-Author-Id:`是实际字符串值。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T21:02:51.810

使用 WinRar 打开 bar 文件，但不要提取。这样做会损坏 META 文件。在 WinRar 应用程序中找到 META.INF 文件并双击打开。（如果文件类型未设置为使用记事本打开，则自动选择它作为首选应用程序。）

在带有 META 信息的打开记事本中，将作者姓名和作者 ID 更改为现有调试令牌的。（这可以通过同一进程从调试令牌访问，以定位所需应用程序的 META.INF）。

关闭记事本并选择退出时保存。WinRar 应该询问您是否要将其保存到存档中。只需选择是，然后退出并使用新编辑的应用程序栏文件再次尝试安装。

我观察到使用这种方法，原始打包文件的大小没有变化，并且应该不会损坏其原始内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-02T07:52:25.040

我有类似的问题。这不是“作者”问题：我试图在调试模式下部署，但设备上没有安装 debugToken。

debugToken 必须在设备上，这样部署才能工作。您可以使用以下方式上传 debugToken：

```
blackberry-deploy -installDebugToken debugtoken.bar -device 169.254.0.1 -password 
```

希望这可以帮助 ：）

# mysql - mysql SELECT JOIN 和 GROUP BY

> ID：10123323
> 
> 赞同：0
> 
> 时间：2012-04-12T12:12:10.400
> 
> 标签：mysql

这是我的查询：

```
SELECT v2.mac, v2.userag_hash, v2.area, count(*), count(distinct v2.video_id) 
FROM video v2 JOIN (
  SELECT distinct v.mac, v.userag_hash 
  from video v 
  WHERE v.date_pl >= '2012-01-30 00:00' AND 
    v.date_pl <= '2012-02-05 23:55' 
  ORDER BY rand() LIMIT 50
) table2 
ON v2.mac = table2.mac AND 
  v2.userag_hash = table2.userag_hash AND 
  v2.date_pl >= '2012-01-30 00:00' AND 
  v2.date_pl <= '2012-02-05 23:55' 
GROUP BY v2.mac, v2.userag_hash 
```

我在数据库中有一个表“视频”，它包含几千个用户的数据，现在我想随机选择 50 个用户并根据选择的行计算，（每个用户由唯一的组合标识），这个查询的结果是：

```
 usermac1, userag_hash1, area1, 10, 5
 usermac2, userag_hash2, area2, 20, 8
  ... 
```

但是如果我在查询末尾不使用“GROUP BY”，那么它只会返回一行：usermac, userag_hash, areax, 1500, 700（不知道这一行代表什么）

我想知道“1500, 700”是否是先前结果的最后两列的总和。比如 1500 = 10+20+... 700 = 5+8+...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:24:23.323

基于您只有一个聚合函数（计数）并用于 2 列的事实，并且您可以在没有 GROUP BY 的情况下运行它，您必须使用不符合标准的 MySQL。

```
SELECT v2.mac, v2.userag_hash, v2.area, count(*), count(distinct v2.video_id) 
... 
```

无论您的数据是什么，当您使用聚合函数时，MySQL 都会返回一行，即：

```
<undefined value>, <undefined value>, count of all rows, count of rows where v2.video_id is distinct (and probably non null). 
```

所以我认为你有 1500 行和 700 个不同的 v2.video_id 值，或 700 个非空的不同值。要测试这个空想法，请尝试：

```
count(distinct IFNULL(v2.video_id,'nullvaluehere')) 
```

这会将空值转换为非空值，因此它们将被包含在内。

“未定义的值”可以是第一行、最后一行、非空值的第一个、索引中的第一个、某个缓存中的第一个等。当您编写无效查询时，没有定义应该发生什么。

我知道的除 MySQL 之外的每个 SQL 数据库都会给您一条错误消息，甚至不会运行查询。要使查询有效，它必须具有 group by 中的所有非聚合列。例如。mac 和 userag_hash 必须都在 group by 中。

# orbeon - 哪里可以更改 xforms:select pdf 的元素行为？

> ID：10123325
> 
> 赞同：0
> 
> 时间：2012-04-12T12:12:13.660
> 
> 标签：orbeon, xforms

我正在使用 orbeon 3.8，当我尝试打印填充表单时遇到下一个问题（使用 oxf:pdf-template），所有数据都按预期显示，但 xforms:select 元素以小写形式显示文本。

仅当为表单定义 pdf 模板时才会发生这种情况。

关于在哪里可以更改此行为的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:29:06.500

该文件可能是[print-pdf-template.xsl](https://github.com/orbeon/orbeon-forms/blob/master/src/resources/apps/fr/print/print-pdf-template.xsl)。从 3.8 开始，这曾经嵌入在[print-pdf-template.xpl](https://github.com/orbeon/orbeon-forms/commits/e1e44590bb41ceaa6480a1156c8904d1b4a06341/src/resources/apps/fr/print/print-pdf-template.xpl)中。

# mysql - Servlets/JSP - 无法访问 SOAP Web 服务上的数据库

> ID：10123328
> 
> 赞同：0
> 
> 时间：2012-04-12T12:12:35.423
> 
> 标签：mysql, web-services, soap

我正在尝试在我的 netbeans 上的 mysql 服务器支持的 glassfish 服务器上创建一个简单的小 web 服务

它被设计成一个非常简单的货币兑换服务

这是它应该做的

它需要一定数量的钱（始终以 GBp 为单位）作为 INT 和货币以将其转换为字符串。

然后，该服务从我的数据库表中查找该货币，以通过如下查询获取转换率

```
select * from exchange.rates where currency = string 
```

然后它执行简单的计算将钱转换为货币并返回金额

问题是我不知道如何从我的 mysql 服务器调用该转换率，我尝试并尝试但没有任何反应，我只是不断获得与输入相同的金额。

我尝试输入欧元和 10 我在我的数据库中设置了汇率但是当我测试 web 服务时我只得到了 10

```
 /**
     * Web service operation
     */
    @WebMethod(operationName = "convert")
    public int convert(@WebParam(name = "currency") String currency, @WebParam(name = "amount") int amount) {
        int newamount = 0;
        try {

            Class.forName("com.mysql.jdbc.Driver");
            Connection con =
                    DriverManager.getConnection("jdbc:mysql://localhost:3306/exhange",
                    "root", "25587");
            PreparedStatement st =
                    con.prepareStatement("select * from rates where currency = '" + currency+"'");

            ResultSet rs = null;
            rs = st.executeQuery();
 rs.first();
            newamount =rs.getInt("conversion") * amount;

 return newamount;
        } catch (Exception e) {
            System.out.println("error");
        }

        return amount;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:41:33.377

当您使用准备好的语句时，您需要显式传递参数：

```
PreparedStatement st = con.prepareStatement("select * from rates where currency = ?");
st.setString(1,currency) //Check this
ResultSet rs = st.executeQuery();

// If you are sure that is only one row then you nee to do
String columnX = null;
if (rs.next() != null) {
   columnX = rs.getString(1); //Where 1 is the first column
} 
```

# xcode - 无法设置标签文本 Xcode tableview

> ID：10123339
> 
> 赞同：0
> 
> 时间：2012-04-12T12:13:19.370
> 
> 标签：xcode, label, tableview, settext

我正在尝试使用从表格视图中选择的文本设置标签文本。这是我的代码

```
- (void)viewDidLoad
{
//  Location *l = [[Location alloc]init];
// [l view];

[super viewDidLoad];
// Do any additional setup after loading the view.
[pLabel setText:[self selectedText]];

NSLog(@"%@1", [self selectedText]);

}

-(id) initWithTextSelected:(NSString *) text {
self.selectedText = text;
[pLabel setText:selectedText];

NSLog(@"%@2", [self selectedText]);
return self;
} 
```

我似乎无法设置我的标签。此外，NSLog 1 打印出 null 而 NSLog 2 显示我选择的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:27:23.813

我认为 viewDidLoad 处的 selectedText 为空，因为它没有保留，而不是使用`setText:`use`pLabel.text = selectedText;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:47:58.303

在 NSLog 2 中，您正在设置 self.selected 文本。

但是在 viewDidLoad 中有任何代码可以设置 selectedText。确保您正在设置“selectedText”。

# vb.net - 用于领带的井字游戏编码

> ID：10123342
> 
> 赞同：1
> 
> 时间：2012-04-12T12:13:39.167
> 
> 标签：vb.net

我有一个井字游戏程序，我已经让一切都按照它应该的方式工作。但是，我在使用这种编码时遇到的最后一个问题是，我似乎无法弄清楚何时有一个平局如何编码。这是我到目前为止所拥有的。

```
Public Class Form1

Private turn As Integer = 1
Private play() As String = {"O", "X"}
Private board(2, 2) As String

Private Structure arrayIndex
    Dim x As Integer
    Dim y As Integer
End Structure

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    For x As Integer = 1 To 9
        Dim b As New Button With { _
            .Width = 80, _
            .Height = 80, _
            .Text = "", _
            .Location = New Point(60 + (((x - 1) Mod 3) * 80), 60 + (((x - 1) \ 3) * 80)), _
            .Tag = New arrayIndex With {.x = (x - 1) Mod 3, .y = (x - 1) \ 3}}
        Me.Controls.Add(b)
        AddHandler b.Click, AddressOf buttons_click

    Next
    Me.SetClientSizeCore(360, 360)

End Sub

Private Sub buttons_click(ByVal sender As System.Object, ByVal e As System.EventArgs)
    If DirectCast(sender, Button).Text <> "" Then Return
    DirectCast(sender, Button).Text = play(turn Mod 2)
    Dim index As arrayIndex = DirectCast(DirectCast(sender, Button).Tag, arrayIndex)
    board(index.x, index.y) = play(turn Mod 2)
    turn += 1
    winner()
End Sub

Private Sub winner()
    Dim rows(7) As String
    rows(0) = board(0, 0) & board(1, 0) & board(2, 0)
    rows(1) = board(0, 1) & board(1, 1) & board(2, 1)
    rows(2) = board(0, 2) & board(1, 2) & board(2, 2)
    rows(3) = board(0, 0) & board(0, 1) & board(0, 2)
    rows(4) = board(1, 0) & board(1, 1) & board(1, 2)
    rows(5) = board(2, 0) & board(2, 1) & board(2, 2)
    rows(6) = board(0, 0) & board(1, 1) & board(2, 2)
    rows(7) = board(2, 0) & board(1, 1) & board(0, 2)

    For x As Integer = 0 To 7
        If rows(x).Length = 3 AndAlso (rows(x)(0) = rows(x)(1) AndAlso rows(x)(0) = rows(x)(2)) Then
            If MessageBox.Show(rows(x)(0) & "'s winsssss!", "We have a winner!", MessageBoxButtons.OKCancel, MessageBoxIcon.Information) = DialogResult.OK Then
                turn = 1
                ReDim board(2, 2)
                For Each ctrl As Control In Controls
                    ctrl.Text = ""
                Next
                Return
            Else
                Me.Close()

            End If

        End If
    Next

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:18:46.630

一种方法是，如果所有空间都已满且没有赢家，则为平局。

# backbone.js - 如何在backbone.js fetch() 中定义接收到的数据类型？

> ID：10123343
> 
> 赞同：3
> 
> 时间：2012-04-12T12:13:41.217
> 
> 标签：backbone.js, json, backbone-events

从服务器获取数据将 json 数据作为**字符串**数据类型返回给我，而不是作为**application/json**数据类型，因此集合不会被刷新。

我尝试将 jquery.ajax 选项**contentType:"application/json"**提供给 fetch 选项，但仍然不起作用。

我怎样才能让它工作？我要从服务器发送 mimetype 吗？如果是这样，如何？

我在发送的数据上使用 json_encode。

```
preloader.fetch({
        contentType:'application/json'
    }); 
```

preloader 是我收藏的一个实例。

**编辑：** 我的子视图模板没有被检测到，因为我将它保留在 masterview 的**$el**元素之外，更正它，现在我收到 underscore.js 错误，即

**str 为空**

```
str.replace(/\\/g, '\\\\')     //at line 913 
```

这是因为主干应用程序没有将其作为 json 对象吗？

**请求标头**

```
Connection  close
Content-Type    text/html
Date    Thu, 12 Apr 2012 13:00:58 GMT
Server  Apache
Transfer-Encoding   chunked
Vary    Accept-Encoding 
```

**响应标头** 有一行

```
Accept  application/json, text/javascript, */*; q=0.01 
```

意味着它是一个json，那么有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T12:43:24.103

我认为[contentType 选项](http://api.jquery.com/jQuery.ajax/)适用于请求（您的请求）。

试试`dataType:"json"`。

# c++ - 0xC0000005：本地写入访问冲突

> ID：10123344
> 
> 赞同：1
> 
> 时间：2012-04-12T12:13:46.230
> 
> 标签：c++, c, visual-studio-2008

如果我不包含 HeapAlloc，我的程序会出错。我无法理解到底发生了什么。

```
int iIndex=0;

enum EDataType
{
    kINT,
    kFLOAT,
    kUINT
};
typedef  struct logstr
{
    EDataType sData_Type;
    string    sComment;
    bool      bStatus;
    float     fDump_Value;
    int       iDump_Value;
    UINT32    uDump_Value;
}slog,*StrLog;

Str_Dump[iIndex]->sData_Type=EDataType(0);//i get a error on this line exception0xC0000005: Access violation writing in location0X00000; 
```

但是当我包括这条线时

```
Str_Dump[iIndex]=(StrLog)HeapAlloc(GetProcessHeap(),HEAP_ZERO_MEMORY,sizeof(slog)); 
```

然后再次运行程序运行成功。

那条线到底在做什么？我无法理解。

我已宣布 strdump 为

```
StrLog Str_Dump[100]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:16:24.500

第二行为`Str_Dump[iIndex]`. `HeapAlloc`并且`GetProcessHeap`是 WinApi 方法，您可以在 MSDN 网站上找到它们的文档。

第一行崩溃是因为您正在访问未分配的指针 - `Str_Dump[iIndex]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:17:40.180

好吧，根据我们所看到的，它看起来像是一个指向对象`Str_Dump`的指针数组。`slog`自然，如果您不`slog`为那些指向的指针创建对象（这就是`HeapAlloc`调用的作用），就会发生不好的事情。有什么不明白的？

# xslt - xsl：模板匹配模式中的全局变量？

> ID：10123345
> 
> 赞同：1
> 
> 时间：2012-04-12T12:13:51.730
> 
> 标签：xslt, xslt-2.0

在 XSLT 2.0 中是否可以在 xsl:template 匹配模式中使用存储在全局变量中的节点集？

例如：

```
<!-- GLOBAL PARAMETERS -->
<xsl:param name="tktDocRS" />

<xsl:variable name="tktDoc" select="saxon:parse($tktDocRS)" />

...

<xsl:template match="$tktDoc//someNodeInTktDoc">

...

</xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:31:46.417

> 在 XSLT 2.0 中是否可以使用存储在 xsl:template 匹配模式中的全局变量中的节点集。

**是的，但是变量引用只能出现在谓词中**。

根据**[W3C XSLT 2.0 规范](http://www.w3.org/TR/xslt20/#patterns)**中的八个语法规则，

*模式*是*relativePathPattern*s 的联合（最终可以由 '/' 或 '//' 前置），每个*relativePathPattern*由 *patternStep*s 组成，每个都具有以下语法：

```
[4]   PatternStep   ::=   PatternAxis? NodeTest PredicateList 
```

*PatternAxis*和*NodeTest*都不能包含该`$`字符，这意味着变量引用只允许在谓词中。

**这是一个非常简单的例子**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vOdds" select="/*/*[. mod 2 = 1]"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="num[. = count($vOdds)]">
   <num special="yes"><xsl:value-of select="."/></num>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生了想要的正确结果：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num special="yes">05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:53:04.727

XSLT 3.0（未发布！）使以下内容合法：

```
<xsl:template match="$x//a"> 
```

这将匹配任何以 $x 作为祖先的元素。

在 XSLT 2.0 中，您必须将其编写为：

```
<xsl:template match="a[ancestor::node() intersect $x]"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T12:35:54.877

我认为[您不能将变量引用作为模式中的一个步骤](http://www.w3.org/TR/xslt20/#pattern-syntax)。而且你不必，它应该足以使用

```
<xsl:template match="someNodeInTktDoc">...</xsl:template> 
```

那么你只需要确保你在`$tktDoc`.

# c++ - 成功执行 boost::filesystem::last_write_time 需要哪些权限？

> ID：10123346
> 
> 赞同：1
> 
> 时间：2012-04-12T12:13:52.270
> 
> 标签：c++, linux, file-permissions, boost-filesystem

这个简单的代码：

```
std::time_t tm = boost::filesystem::last_write_time( filename );
boost::filesystem::last_write_time( directory, tm ); 
```

`directory`如果用户拥有的路径不是执行代码的用户，则抛出“不允许操作”异常。

我对此感到有些困惑，因为我正在处理具有`777`或`rwxrwxrwx`权限的目录，并且我可以通过`touch`在 shell 中使用轻松更改它们的修改时间。

我错过了什么吗？Boost 是否要求比它需要的更多权限？有没有办法解决这个问题？

这是Boost中的相关代码：

```
handle_wrapper hw(
  create_file( ph.c_str(), FILE_WRITE_ATTRIBUTES,
    FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE, 0,
    OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS, 0 ) );
if ( hw.handle == INVALID_HANDLE_VALUE )
  return error_code( ::GetLastError(), system_category );
return error_code( ::SetFileTime( hw.handle, 0, 0, &last_write_time ) != 0
  ? 0 : ::GetLastError(), system_category ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:45:41.413

我打赌`touch -r file directory`也失败了。这将使用时间戳`file`而不是当前时间。

我找不到有关该行为的明确文档，但是如果您既设置了明确的时间并且不拥有您正在触摸的文件，则基础调用 ( `utime`or ) 将失败。`utimensat`

```
$ touch foo
$ touch bar
$ sudo chmod a+rw bar
$ sudo chown root.root bar
$ touch bar
# success
$ touch -r foo bar
touch: setting times of `bar': Operation not permitted 
```

如果您考虑一下，这是有道理的。如果您对文件/目录具有写入权限，则可以手动编辑以将修改时间更改为现在。但是将修改时间设置为其他时间需要所有权。

# facebook - Facebook API 重新显示用户资料

> ID：10123350
> 
> 赞同：0
> 
> 时间：2012-04-12T12:14:04.197
> 
> 标签：facebook, facebook-graph-api, privacy

假设用户授予我的站点访问其个人资料数据的权限。

如果我的网站存储这些数据然后重新显示它以供我网站上的其他用户查看，是否可以？

请注意，我的网站会向原始用户明确表明会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:41:59.147

您可以提供公开或您允许显示的个人资料的所有部分，我正在与页面个人资料@http: [//AnotherFeed.com](http://AnotherFeed.com)做类似的事情，到目前为止没有 TOS 或隐私问题。

# java - Android：使用全局对象而不是创建新对象

> ID：10123351
> 
> 赞同：1
> 
> 时间：2012-04-12T12:14:08.180
> 
> 标签：java, android, global

我的 Android 应用程序中有一个 A 类，其中有一些方法。这些方法是公共的，并在其他类（B、C、D、E、F ...）中使用。

是否有可能只创建一次来自 A 类的对象，然后在其他类中使用它，或者我必须在每个类中创建新对象。

实际上我必须在每个班级（B，C，D，E，F ...）

```
A a = new A();
a.xxxx; 
```

如果我只能创建一次对象 a 然后在我的其他类中调用它，那就太好了。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T12:20:14.793

使用单例模式。它允许您跨类使用相同的实例：

[http://www.javabeginner.com/learn-java/java-singleton-design-pattern](http://www.javabeginner.com/learn-java/java-singleton-design-pattern)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:21:05.923

```
class A{
    static A a;
    static{
          a = new A();
    }
} 
```

在所有其他类中使用

```
A.a to get the object and call respective methods as
A.a.xxxx() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T12:19:56.653

使用静态方法的类比来做到这一点。

例如：

```
public class Helper{
    public static void doSomething(){
        //do something here
    }
} 
```

现在在您的其他类中，使用上述方法，如下所示：

```
Helper.doSomething(); 
```

或者[单例](http://www.javapractices.com/topic/TopicAction.do?Id=46)模式也将是另一种选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T12:15:35.520

相反，如果不涉及任何状态，为什么不将这些方法设为静态或考虑单实例模式..

[如何使用静态方法](http://www.roseindia.net/java/beginners/howtoaccessstaticmethod.shtml)和[单例模式](http://www.roseindia.net/java/beginners/SingletonPattern.shtml)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T12:51:01.807

我看到以下 3 种可能性：

**1.**如果这些只是“正常”的帮助方法，你也可以这样做

> **B 类扩展 A**

并将 A 的方法继承到 B,C,D,E,....

**2.**但是，如果您需要对所有其他类或其 B、C、D 实例全局的 A 类内部存储器，则可以使用静态模式，例如

```
class A{

static int myGlobalIntVariable; //which is accessible from everywhere 
static void myHelperMethod1() {

} 
```

**或 3.**你也可以使用上面提到的单例，它创建一个你在任何地方都可以使用的实例。

就像备注一样，您可以使用单例或静态模式，具体取决于您在访问方法时喜欢什么。

对于静态模式，您必须将它们称为：

```
A.myHelperMethod(); 
```

对于单身人士，您必须这样做：

```
A.getSingleton().myHelperMethod1();  or A.singleton.myHelperMethod1() 
```

如果您定义了`singleton`在 A 类中调用的变量

使用哪一个真的取决于您的需求和品味:-)

# python - Python PyQT 手势

> ID：10123352
> 
> 赞同：2
> 
> 时间：2012-04-12T12:14:19.340
> 
> 标签：python, qt, pyqt, gesture

我想在我的应用程序中启用 PyQT 手势。有人有示例或一些短代码可以演示在 PyQT 应用程序中使用手势控制吗？

我尝试谷歌搜索，但只能找到一篇关于自定义手势的帖子......我还没有那么远，我只想看看如何在 Python QT 应用程序中绑定手势和回调。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:05:11.100

我正在解决同样的问题。通过简单地翻译一些 C++ 示例，它没有理由不工作，但它的前沿。

例如，如果没有 Qt 5 或大量工作，将无法在 Linux 桌面（仅 Windows）上工作。请参阅[http://qt-project.org/forums/viewthread/12664](http://qt-project.org/forums/viewthread/12664)。如果我安装了 Qt 5，我希望发布一个 Python 示例。

我正在使用 PySide 和 QtGraphicsFramework 并且有一个小型测试程序。自定义手势的另一个更复杂的测试是崩溃，而不仅仅是抛出异常，我怀疑 Python 绑定。

有很多细微差别。如果有什么平台适合学习，那应该是Qt和Python。去弄清楚为什么还没有例子。

# javascript - Rails 3.2.3 中的 Twitter-Bootstrap

> ID：10123354
> 
> 赞同：2
> 
> 时间：2012-04-12T12:14:26.047
> 
> 标签：javascript, ruby-on-rails-3, twitter-bootstrap

有人在生产中使用过 twitter 引导程序和部署的应用程序吗？你能指导我一些资源吗？我看了 railscasts 但如果有任何博客给出详细解释。除了 twitter bootstrap 之外，还有其他的前端选项吗？另外，有没有javascript选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:25:45.490

我喜欢阅读 Ruby Source 的这篇文章：

[http://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/](http://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/)

[http://rubysource.com/how-to-customize-twitter-bootstrap%E2%80%99s-design-in-a-rails-app/](http://rubysource.com/how-to-customize-twitter-bootstrap%E2%80%99s-design-in-a-rails-app/)

另外，如果您只想自定义 TB 的外观，请查看[http://stylebootstrap.info/](http://stylebootstrap.info/)

这是一个巨大的引导扩展/插件列表：http: [//www.bootstraphero.com/the-big-badass-list-of-twitter-bootstrap-resources](http://www.bootstraphero.com/the-big-badass-list-of-twitter-bootstrap-resources)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:40:16.323

事情是这样的：Bootstrap 不是前端。这是一种通过创建一个看起来不错的起点来开始您的网站设计的方法。它主要是 CSS（嗯，LESS）以及一些可选的 JavaScript 添加以添加额外的 UI 功能。

如果您真的对构建 Rails 应用程序的前端感兴趣，您可能会对[Backbone.js](http://documentcloud.github.com/backbone/)感兴趣。Backbone 是一种将您的 HTML DOM 与您的数据（来自 Rails）链接起来的方法，非常适合在您每次执行任何操作时都不需要刷新页面的单页应用程序。学习 Backbone 的一个很好的起点是 Code School 的[Anatomy of Backbone](http://backbone.codeschool.com/)教程。巧合的是，Code School 还提供许多您可能喜欢的其他课程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:01:25.233

要将 CSS 和 JavaScript 链接到您的视图，您可以使用[Asset Tag Helpers](http://guides.rubyonrails.org/layouts_and_rendering.html#asset-tag-helpers)。

举个例子：

```
<%= javascript_include_tag "bootstrap" %>
<%= stylesheet_link_tag "bootstrap" %> 
```

`bootstrap.js`将生成链接到和的标签`bootstrap.css`，如果这些是文件的名称。

`javascript_include_tag`拉取脚本相对于`app/assets/javascripts`
`stylesheet_link_tag`拉取样式表相对于`app/assets/stylesheets`

如果您想引用目录结构中的文件（即资产不在上述文件夹的根目录中），您可以相对于这些根文件夹进行链接：

```
<%= javascript_include_tag "/bootstrap/bootstrap-min" %>
<%= stylesheet_link_tag "/bootstrap/bootstrap" %> 
```

这些标签将引用`app/assets/javascripts/bootstrap/bootstrap-min.js`和`app/assets/stylesheets/bootstrap/bootstrap.css`。

要应用样式，您将使用 bootstrap.css 中的样式表类和 ID。例如，用于分叉 Twitter 引导程序的按钮看起来像

```
<a href="https://github.com/twitter/bootstrap/" 
   class="btn btn-primary btn-large">View project on GitHub</a> 
```

您将使用[URL Helper](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)：

```
<%= link_to "View project on GitHub", 
             "https://github.com/twitter/bootstrap/", 
             :class => "btn btn-primary btn-large" %> 
```

编辑：

如果您正在查看 Github 上的代码并对`.less`扩展感到困惑，那是因为 Bootstrap 使用了一个名为 Less 的 CSS 生成框架。您需要运行`make bootstrap`并确保已`lessc`安装。[或者，您可以在这里](http://twitter.github.com/bootstrap/assets/bootstrap.zip)下载已经编译好的框架。

# git - GIT vs SVN：在提交方面（在 GIT 中）有何不同，只需将更改本地保存在文件中（在 SVN 中）

> ID：10123355
> 
> 赞同：4
> 
> 时间：2012-04-12T12:14:27.573
> 
> 标签：git, git-svn

我想知道 GIT 在进行本地提交（*提交命令）时与***在离线工作（未连接到服务器）时**仅将更改保存在 SVN 中的工作目录中相比有什么区别（或者说优势）

 **我读过 GIT 具有离线工作的优势，即用户可以在本地执行任意多次提交，然后当用户连接到服务器时，他可以将更改推送到远程服务器。我想知道为什么如果所有*提交*命令都只是提交到本地磁盘，这再次与将更改保存到 SVN 中的磁盘（未与服务器连接时）而不提交到项目分支相同。

我喜欢 GIT，但我无法理解这种差异。请帮忙 ！！

谢谢，纳扬

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T12:35:42.943

**场景：**您在离线之前将存储库中的最新代码下载到您的笔记本电脑上（比如长途飞行）。

在飞行中你做了一些改变——你运行单元测试，运行代码，一切似乎都在工作。您进行了更多更改 - 测试它们，事情仍然有效。您会变得非常热情，并通过一些重度重构进行更多更改。您测试更改 - 一切都被破坏了（例如，因为您在某处做出了错误的假设）。

**使用 SVN：**将代码恢复到工作状态会很棘手，因为在开始所有繁重的重构之前，您不记得它的样子。每当您再次获得网络访问权限时，您的笔记本电脑上的代码和主服务器之间的代码可能会出现很多繁琐的差异。与此同时，你被困住了。

**使用 Git：**假设您是明智的，并且每次您知道本地存储库处于工作状态时都将更改提交到本地存储库，那么在您开始重构工作之前回滚到提交是很容易的。您保留了宝贵的工作，并可以立即开始走上正确的道路。当您再次获得网络访问权限时，您可以一次性将这些更改推送到主分支，一切都会好起来的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T12:16:48.123

提交不会将文件保存到磁盘，您不需要任何版本控制软件。

在版本控制中提交意味着在文件历史记录中保存一个新增量，以便您可以记录和恢复不同的状态。然后 Git 和 SVN 不同，因为这一步是在本地执行的，没有任何远程服务器通信，与 SVN 不同。

在离线模式下使用 SVN 时，您无法发出任何提交，因此您的工作历史不会被记录，尽管它会保存到本地磁盘。Git 并非如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T12:22:40.563

通过提交，您将代码存储在版本控制中，而不仅仅是保存到磁盘。这使您可以真正管理您的代码和项目，因为它的增长。

Git 还允许在整个项目生命周期中创建任务分支，使您能够保持一个始终工作的主代码库（在服务器上）、一个在本地工作的主代码库，然后您可以在实施时分支此主代码新功能和所有这些之间的交换。无需像在 SVN 中那样将代码“提交”到服务器以确保其安全。

通过在本地提交和分支，这使您能够有效且安全地离线工作。SVN 要求您将这些更改提交到服务器，以确保它们是安全的。Git 是去中心化的。

我相信当您研究 Git 的功能并更多地使用它时，您会回答自己的问题。然后如果你回到 SVN，你会希望你在 Git 上；）

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:56:10.797

在我的头顶上：

1.  离线版本控制（无需与远程存储库通信以保存工作进度）。
2.  任务切换更容易分支和合并。
3.  更复杂的合并......减少了合并的痛苦。
4.  跟踪工作进度，而不会强迫团队的其他成员接受不完整的状态。**

# php - 桌面和移动站点的 CDN 缓存

> ID：10123357
> 
> 赞同：1
> 
> 时间：2012-04-12T12:14:30.200
> 
> 标签：php, caching, mobile, cdn

我有一个基于 PHP 的 Web 应用程序，并希望能够为移动用户提供通过一组专用的“移动友好”页面查看我的网站内容的选项。移动网站的 URL 结构与桌面网站不同。

这个想法是，当移动用户第一次点击索引页面时，正则表达式会检查用户代理，如果他们是移动设备，他们可以选择查看桌面版或移动版网站。

问题是我正在使用我的 CDN 提供商 (Cotendo) 缓存静态 HTML。这意味着当缓存被填充时，移动用户可能会看到桌面站点的缓存版本并绕过移动/桌面选项页面。这也意味着，如果缓存为空，移动用户可以强制 CDN 存储移动/桌面选项页面的缓存版本！

一种选择是在 CDN 级别检查用户代理并绕过移动用户的缓存检索。但是，该网站的很大一部分流量是由移动用户驱动的，目前还不能选择向移动用户提供非缓存内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:44:12.733

在 CDN 级别，您能否为移动设备添加 ?mobileoption 查询字符串。然后仅在存在该查询字符串时显示移动/桌面选项页面。

# nunit - Visual NUnit 中的命名空间和夹具为空

> ID：10123358
> 
> 赞同：2
> 
> 时间：2012-04-12T12:14:30.337
> 
> 标签：nunit, visual-studio-extensions

我是 NUnit 的新手。当我使用 NUnit GUI 运行测试用例时，它工作得很好，但是当我从 View->Other Windows->Visual NUnit 使用 Visual NUnit 时，只加载了项目。Namespace 和其中的 Fixture 是空的。这是一个屏幕截图：

![未填充 Visual NUnit](../Images/2015599dcb50b0be5d3880bfeb4f0aae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:34:13.480

我遇到了同样的问题并设法解决如下：

1.  将 NUnit 测试项目设置为我的启动项目。
2.  构建整个解决方案。
3.  单击“运行”按钮而不输入命名空间或夹具字段。
4.  现在应该填充这些字段。
5.  再次点击“运行”以启动所有测试。

# java - 如何获取黑白图像的像素值？

> ID：10123366
> 
> 赞同：4
> 
> 时间：2012-04-12T12:15:10.620
> 
> 标签：java, image-processing, getpixel

我使用 java Swing 和 JAI 在 netbeans 平台上制作 App。在这我想做图像处理。我使用 X 射线枪捕获 .tiff 黑白图像。之后，我想绘制该黑白图像的直方图。因此，对于直方图的绘图，首先我们必须获得灰色或黑白图像像素值。然后我们可以使用这个像素值绘制直方图。那么，我怎样才能得到这个黑白图像的像素值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:29:25.957

如果您使用 java.awt.image.BufferedImage，这应该可以工作。

由于您要创建直方图，我想您将遍历所有像素。有返回单个像素值的方法。

```
int getRGB(int x, int y) 
```

但是，由于循环会发生，我想你会想使用这个：

```
int[] getRGB(int startX, int startY, int w, int h, int[] rgbArray, int offset, int scansize) 
```

当你得到数组时，使用：

```
int alpha = (pixels[i] >> 24) & 0x000000FF;
int red = (pixels[i] >> 16) & 0x000000FF;
int green = (pixels[i] >>8 ) & 0x000000FF;
int blue = pixels[i] & 0x000000FF; 
```

提取通道数据。不确定变量是否可以声明为字节（我们只使用数组中整数的一个字节，尽管字节是有符号的并且发生了不同的算术 - 二进制补码形式），但您可以将它们声明为短。

然后对这些值进行一些数学运算，例如：

```
int average = (red + green + blue) / 3; 
```

这将返回像素的平均值，为您提供一个可以在简单光度直方图中使用的点。

**编辑：**

关于直方图的创建，我使用过这个类。它将您想要直方图的图像作为其`setImage(BufferedImage image)`方法的参数。用于`updateHistogram()`数组填充。绘图数据在`paintComponent(Graphics g)`. 我必须承认，它很草率，尤其是在计算偏移量时，但它可以很容易地简化。

这是整个班级：

```
class HistogramCtrl extends JComponent
{
    BufferedImage m_image;
    int[] m_histogramArray = new int[256];  //What drives our histogram
    int m_maximumPixels;
    public HistogramCtrl(){
        m_maximumPixels = 0;
        for(short i = 0; i<256; i++){
            m_histogramArray[i] = 0;
        }
    }

    void setImage(BufferedImage image){
        m_image = image;
        updateHistogram();
        repaint();
    }

    void updateHistogram(){
        if(m_image == null) return;

        int[] pixels = m_image.getRGB(0, 0, m_image.getWidth(), m_image.getHeight(), null, 0, m_image.getWidth());
        short currentValue = 0;
        int red,green,blue;
        for(int i = 0; i<pixels.length; i++){           
                red = (pixels[i] >> 16) & 0x000000FF;
                green = (pixels[i] >>8 ) & 0x000000FF;
                blue = pixels[i] & 0x000000FF;
                currentValue = (short)((red + green + blue) / 3); //Current value gives the average //Disregard the alpha
                assert(currentValue >= 0 && currentValue <= 255);   //Something is awfully wrong if this goes off...
                m_histogramArray[currentValue] += 1;    //Increment the specific value of the array
        }

        m_maximumPixels = 0;    //We need to have their number in order to scale the histogram properly
        for(int i = 0; i < m_histogramArray.length;i++){    //Loop through the elements
            if(m_histogramArray[i] > m_maximumPixels){  //And find the bigges value
                m_maximumPixels = m_histogramArray[i];
            }
        }
    }

    protected void paintComponent(Graphics g){
        assert(m_maximumPixels != 0);

        Rectangle rect = g.getClipBounds();

        Color oldColor = g.getColor();
        g.setColor(new Color(210,210,210));
        g.fillRect((int)rect.getX(), (int)rect.getY(), (int)rect.getWidth(), (int)rect.getHeight());
        g.setColor(oldColor);

        String zero = "0";
        String thff = "255";

        final short ctrlWidth = (short)rect.getWidth();
        final short ctrlHeight = (short)rect.getHeight();

        final short activeWidth = 256;
        final short activeHeight = 200;

        final short widthSpacing = (short)((ctrlWidth - activeWidth)/2);
        final short heightSpacing = (short)((ctrlHeight - activeHeight)/2);

        Point startingPoint = new Point();
        final int substraction = -1;
        startingPoint.x = widthSpacing-substraction;
        startingPoint.y = heightSpacing+activeHeight-substraction;

        g.drawString(zero,widthSpacing-substraction - 2,heightSpacing+activeHeight-substraction + 15);
        g.drawString(thff,widthSpacing+activeWidth-substraction-12,heightSpacing+activeHeight-substraction + 15);

        g.drawLine(startingPoint.x, startingPoint.y, widthSpacing+activeWidth-substraction, heightSpacing+activeHeight-substraction);
        g.drawLine(startingPoint.x,startingPoint.y,startingPoint.x,heightSpacing-substraction);

        double factorHeight = (double)activeHeight / m_maximumPixels;   //The height divided by the number of pixels is the factor of multiplication for the other dots

        Point usingPoint = new Point(startingPoint.x,startingPoint.y);

        usingPoint.x+=2;    //I want to move this two points in order to be able to draw the pixels with value 0 a bit away from the limit
        Point tempPoint = new Point();
        for(short i = 0; i<256; i++){
            tempPoint.x = usingPoint.x;
            tempPoint.y = (int)((heightSpacing+activeHeight-substraction) - (m_histogramArray[i] * factorHeight));
            if((i!=0 && (i % 20 == 0)) || i == 255){
                oldColor = g.getColor();
                g.setColor(oldColor.brighter());
                //Draw horizontal ruler sections
                tempPoint.x = widthSpacing + i;
                tempPoint.y = heightSpacing+activeHeight-substraction+4;
                g.drawLine(tempPoint.x,tempPoint.y,widthSpacing + i,heightSpacing+activeHeight-substraction-4);

                if(i <= 200){
                    //Draw vertical ruler sections
                    tempPoint.x = widthSpacing - substraction - 3;
                    tempPoint.y = heightSpacing+activeHeight-substraction-i;
                    g.drawLine(tempPoint.x,tempPoint.y,widthSpacing - substraction + 4, heightSpacing+activeHeight-substraction-i);
                }
                tempPoint.x = usingPoint.x;
                tempPoint.y = usingPoint.y;

                g.setColor(oldColor);
            }
            g.drawLine(usingPoint.x, usingPoint.y, tempPoint.x, tempPoint.y);
            usingPoint.x++; //Set this to the next point
        }
    }
} 
```

# c# - 使用 Web API 返回匿名类型

> ID：10123371
> 
> 赞同：79
> 
> 时间：2012-04-12T12:15:29.833
> 
> 标签：c#, json, asp.net-web-api, json.net

使用 MVC 时，返回 adhoc Json 很容易。

```
return Json(new { Message = "Hello"}); 
```

我正在使用新的 Web API 寻找这个功能。

```
public HttpResponseMessage<object> Test()
{    
   return new HttpResponseMessage<object>(new { Message = "Hello" }, HttpStatusCode.OK);
} 
```

这会引发异常，因为`DataContractJsonSerializer`无法处理匿名类型。

我已经用这个基于[Json.Net的](https://github.com/WebApiContrib/WebAPIContrib/blob/master/src/WebApiContrib.Formatting.JsonNet/JsonNetFormatter.cs)*JsonNetFormatter*替换了它。如果我使用，这有效

```
 public object Test()
 {
    return new { Message = "Hello" };
 } 
```

但是如果我不返回`HttpResponseMessage`，我看不到使用 Web API 的意义，我最好还是坚持使用 vanilla MVC。如果我尝试使用：

```
public HttpResponseMessage<object> Test()
{
   return new HttpResponseMessage<object>(new { Message = "Hello" }, HttpStatusCode.OK);
} 
```

它序列化整个`HttpResponseMessage`.

任何人都可以指导我找到一个可以在其中返回匿名类型的解决方案`HttpResponseMessage`吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-12T14:31:19.157

这在 Beta 版本中不起作用，但在最新版本（从[http://aspnetwebstack.codeplex.com](http://aspnetwebstack.codeplex.com)构建）中起作用，因此它可能是 RC 的方式。你可以做

```
public HttpResponseMessage Get()
{
    return this.Request.CreateResponse(
        HttpStatusCode.OK,
        new { Message = "Hello", Value = 123 });
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-06-03T20:00:21.607

这个答案可能来得有点晚，但截至今天`WebApi 2`已经出来了，现在做你想做的事情更容易，你只需要做：

```
public object Message()
{
    return new { Message = "hello" };
} 
```

并且沿着管道，它将被序列化为`xml`或`json`根据客户的偏好（`Accept`标题）。希望这可以帮助任何偶然发现这个问题的人

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-10-26T05:38:22.267

在 web API 2 中，您可以使用新的 IHttpActionResult 替代 HttpResponseMessage，然后返回一个简单的 Json 对象：（类似于 MVC）

```
public IHttpActionResult GetJson()
    {
       return Json(new { Message = "Hello"});
    } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-22T10:53:42.850

您可以为此使用 JsonObject：

```
dynamic json = new JsonObject();
json.Message = "Hello";
json.Value = 123;

return new HttpResponseMessage<JsonObject>(json); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-02-06T17:38:52.323

您可以使用[ExpandoObject](https://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject%28v=vs.110%29.aspx)。*（添加`using System.Dynamic;`）*

```
[Route("api/message")]
[HttpGet]
public object Message()
{
    dynamic expando = new ExpandoObject();
    expando.message = "Hello";
    expando.message2 = "World";
    return expando;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-17T15:47:05.090

您也可以尝试：

```
var request = new HttpRequestMessage(HttpMethod.Post, "http://leojh.com");
var requestModel = new {User = "User", Password = "Password"};
request.Content = new ObjectContent(typeof(object), requestModel, new JsonMediaTypeFormatter()); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-03-12T15:17:19.093

在 ASP.NET Web API 2.1 中，您可以以更简单的方式进行操作：

```
public dynamic Get(int id) 
{
     return new 
     { 
         Id = id,
         Name = "X"
     };
} 
```

[您可以在https://www.strathweb.com/2014/02/dynamic-action-return-web-api-2-1/](https://www.strathweb.com/2014/02/dynamic-action-return-web-api-2-1/)上阅读更多相关信息

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-12T13:50:48.837

如果你使用泛型，你应该能够让它工作，因为它会给你一个匿名类型的“类型”。然后，您可以将序列化程序绑定到它。

```
public HttpResponseMessage<T> MakeResponse(T object, HttpStatusCode code)
{
    return new HttpResponseMessage<T>(object, code);
} 
```

如果您的类上没有`DataContract`或`DataMebmer`属性，它将依赖于序列化所有公共属性，这应该完全符合您的要求。

（直到今天晚些时候我才有机会对此进行测试，如果出现问题，请告诉我。）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-04T04:54:33.397

```
public IEnumerable<object> GetList()
{
    using (var context = new  DBContext())
    {
        return context.SPersonal.Select(m =>
            new  
            {
                FirstName= m.FirstName ,
                LastName = m.LastName
            }).Take(5).ToList();               
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-04T10:36:35.267

您可以将动态对象封装在返回对象中，例如

```
public class GenericResponse : BaseResponse
{
    public dynamic Data { get; set; }
} 
```

然后在 WebAPI 中；做类似的事情：

```
[Route("api/MethodReturingDynamicData")]
[HttpPost]
public HttpResponseMessage MethodReturingDynamicData(RequestDTO request)
{
    HttpResponseMessage response;
    try
    {
        GenericResponse result = new GenericResponse();
        dynamic data = new ExpandoObject();
        data.Name = "Subodh";

        result.Data = data;// OR assign any dynamic data here;// 

        response = Request.CreateResponse<dynamic>(HttpStatusCode.OK, result);
    }
    catch (Exception ex)
    {
        ApplicationLogger.LogCompleteException(ex, "GetAllListMetadataForApp", "Post");
        HttpError myCustomError = new HttpError(ex.Message) { { "IsSuccess", false } };
        return Request.CreateErrorResponse(HttpStatusCode.OK, myCustomError);
    }
    return response;
} 
```

# jqgrid - 让 jqGrid 填充父级而不丢失其水平滚动条？

> ID：10123372
> 
> 赞同：1
> 
> 时间：2012-04-12T12:15:33.587
> 
> 标签：jqgrid, scrollbar

我怎样才能让我的（第一个）jqGrid 填充它的父容器**而不**丢失它的水平滚动条，因为它放得太远了？（滚动条是由`scroll: 1`选项创建的，例如“虚拟滚动”。）它似乎使用了我给它的高度*而*不允许滚动条，因此滚动条最终超出了我正在尝试的区域的底部保持它。我已经看到这[两个](https://stackoverflow.com/questions/2919723/make-jqgrid-fill-its-container) [关于](https://stackoverflow.com/questions/875225/resize-jqgrid-when-browser-is-resized)调整网格大小的问题（以及他们的答案），但是虽然有用（他们让我走到了这一步），但他们并没有解决滚动条问题。

页面的布局看起来像这样（它不是我的；我*也许*可以改变它，但如果我能避免这种情况最好——除了我可以做任何我想做的事情`gridWrapper`）：

HTML：

```
<body>
  <div id="pageHeader">Header section</div>
  <div id="pageBody">
    <div id="gridWrapper" style="height: 100%">
    </div>
  </div>
  <div id="pageFooter">Footer section</div>
</body> 
```

CSS：

```
body {
  margin: 0;
  padding: 0;
  font-family: verdana, sans-serif;
}
#pageHeader {
  width: 100%;
  height: 99px;
  border-bottom: solid 1px #ccc;
}
#pageBody {
  background-color: #fff;
  position: fixed;
  top: 100px;
  bottom: 45px;
  left: 0;
  right: 0;
}
#pageFooter {
  background-color: #eee;
  position: fixed;
  left: 0; 
  right: 0;
  bottom: 0;
  height: 44px;
  border-top: solid 1px #ccc;
} 
```

我的网格创建/调整代码看起来像这样（你可以说它是测试/原型代码）：

```
function createGrid(data) {
  var colNames, colModel, index, grid, gridParent, theFudge, heightFudge = 0;

  colNames = [
    "One", "Two", "Three", "Four", "Five",
    "Six", "Seven", "Eight", "Nine", "Ten",
    "Eleven", "Twelve", "Thirteen", "teen", "Fifteen",
    "Sixteen", "Seventeen", "Eightteen", "Nineteen", "Twenty",
    "Twenty One", "Twenty Two", "Twenty Three", "Twenty Four",
    "Twenty Five"
  ];
  colModel = [];
  for (index = 0; index < colNames.length; ++index) {
    colModel.push({
      name:   "col" + index,
      id:     "col" + index,
      width:  75
    });
  }

  gridParent = $("#gridWrapper");
  grid = $('<table id="theTable"></table>').appendTo(gridParent);
  grid.jqGrid({
    datatype:    'local',
    data:        data,
    height:      gridParent.height() - heightFudge,
    width:       gridParent.width(),
    shrinkToFit: false,
    colNames:    colNames,
    colModel:    colModel,
    rownumbers:  true,
    rownumWidth: 75,
    scroll:      1
  });

  $(window).resize(resizeGrid);

  function resizeGrid() {
    grid.jqGrid('setGridWidth', gridParent.width());
    grid.jqGrid('setGridHeight', gridParent.height() - heightFudge);
    grid.trigger('reloadGrid');
  }
} 
```

您会看到该`heightFudge`值（在上面只是`0`）。如果我不捏造高度，滚动条就会超出底部`pageBody`，侵入（并被隐藏）`pageFooter`。在带有我的字体和窗口装饰等的浏览器上，软糖因子（滚动条的高度）为 24 像素。但当然这会有所不同。

如何让网格填充网格包装并将其水平滚动条保持在我给它的高度内？（或者我怎样才能在运行时可靠地确定软糖因素，但这对我来说似乎很笨拙。）

[这是上述内容的实时副本](http://jsbin.com/oworex)（[源链接](http://jsbin.com/oworex/edit#javascript,html)），其中包含表格数据和用于试验软糖等的控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:09:24.300

jqGrid的`height`参数可以用来指定网格*内部*的高度（body 的高度）。在我看来，您可以通过修改`resizeGrid`以下内容来解决问题

```
function resizeGrid() {
  var $grid = $("#theTable"),
      $gbox = $grid.closest(".ui-jqgrid"), // or $("gbox_theTable");
      outerHeight = $gbox.height() - $grid.jqGrid('getGridParam', 'height');
  $grid.jqGrid('setGridWidth', gridParent.width());
  $grid.jqGrid('setGridHeight', gridParent.height() - heightFudge - outerHeight);
  $grid.trigger('reloadGrid');
} 
```

创建网格后，您必须立即调用`resizeGrid`以修复其高度。[你可以在这里](http://www.ok-soft-gmbh.com/jqGrid/T.J.Crowder.htm)看到固定的演示。

# dynamics-crm-2011 - 无法使用插件在 CRM 2011 Online 中创建联系人

> ID：10123374
> 
> 赞同：1
> 
> 时间：2012-04-12T12:15:37.510
> 
> 标签：dynamics-crm-2011, crm

下面是我用来在 CRM 2011 在线创建联系人的代码。它没有抛出任何错误，但也没有创建任何联系。我已经在电子邮件实体的操作后创建事件上注册了插件。我不知道我是否遗漏了什么。任何帮助将不胜感激。

```
public class RegistrationPlugin : IPlugin
{
    private OrganizationServiceContext oContext;

    public void Execute(IServiceProvider serviceProvider)
    {
        Microsoft.Xrm.Sdk.IPluginExecutionContext context = (Microsoft.Xrm.Sdk.IPluginExecutionContext)
       serviceProvider.GetService(typeof(Microsoft.Xrm.Sdk.IPluginExecutionContext));

        IOrganizationServiceFactory factory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
        IOrganizationService service = factory.CreateOrganizationService(context.UserId);

        oContext = new OrganizationServiceContext(service);

        //service.EnableProxyTypes();

        if (context.InputParameters.Contains("Target") &&
              context.InputParameters["Target"] is Entity)
        {
            try
            {
                Entity entity = (Entity)context.InputParameters["Target"];

                if (entity.LogicalName == "email")
                {
                    Guid _contactId;
                    var contact = new Contact()
                    {
                        FirstName = "Mary Kay",
                        LastName = "Andersen",
                        Address1_Line1 = "23 Market St.",
                        Address1_City = "Sammamish",
                        Address1_StateOrProvince = "MT",
                        Address1_PostalCode = "99999",
                        Telephone1 = "12345678",
                        EMailAddress1 = "marykay@contoso.com",
                        Id = Guid.NewGuid()
                    };
                    _contactId = contact.Id;

                    oContext.AddObject(contact);

                }
            }
            catch (Exception x)
            {
                throw new Exception(x.ToString() + "\n" + x.InnerException.ToString());
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:24:37.923

我可以看到您缺少一个声明，即：

```
oContext.AddObject(contact);
oContext.SaveChanges(); // <= Saves the changes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:04:11.597

它确实解决了问题，但现在又抛出了另一个错误：

未处理的异常：System.ServiceModel.FaultException`1 [[Microsoft.Xrm.Sdk.OrganizationServiceFault，Microsoft.Xrm.Sdk，版本=5.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35]]：插件出现意外异常（执行）：Microsoft.Crm.Sdk.Samples.RegistrationPlugin：System.Exception：Microsoft.Xrm.Sdk.SaveChangesException：处理此请求时发生错误。---> System.TypeLoadException：覆盖成员时违反了继承安全规则：“Microsoft.Crm.Services.Utility.DeviceRegistrationFailedException.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)”。重写方法的安全可访问性必须与被重写方法的安全可访问性相匹配。在 System.Reflection.RuntimeAssembly。

在我看来，这是一个权利问题。你能建议我现在缺少什么吗？

**更新：**我通过添加 OwnerID = new EntityReference("systemuser", context.UserId) 解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T14:58:06.223

嗯，我认为您不需要填写 ID 字段，因为当您创建它时，CRM 会向您发送 ID。

不知道它是否可以帮助您，因为我没有创建联系人而是创建事件。但我认为过程是一样的。所以我让你看看。

私人 Guid createCase（IOrganizationService CrmService，实体电子邮件）

```
 {
        ITracingService tracingService = (ITracingService)serviceProvider.GetService(typeof(ITracingService));
        tracingService.Trace("Just to tracing my plugin"); 
```

/* CREATE AN ENTITY: 事件在这里，但可以是联系人，帐户，... */

```
 Entity incident = new Entity("incident");
        incident["title"] = email.Attributes["subject"].ToString();
        incident["caseorigincode"] = new OptionSetValue(2);

        EntityCollection ec = email.Attributes["from"] as EntityCollection;
        Entity from = ec.Entities.FirstOrDefault();
        incident["customerid"] = (EntityReference)from.Attributes["partyid"]; 
```

/* 结尾 */

```
 tracingService.Trace("tracing 2."); 
```

/* 在这里您可以在 CRM 中创建记录 */

```
 Guid caseid = CrmService.Create(incident); 
```

/* 结尾 */

```
 tracingService.Trace("tracing 3\. ID: "+ caseid.ToString());

        return caseid;
    } 
```

# icefaces - 启用 ICEfaces compat 会导致无法识别 h:head 和 h:body

> ID：10123379
> 
> 赞同：2
> 
> 时间：2012-04-12T12:15:51.320
> 
> 标签：icefaces

我正在开发一个 ICEfaces 3 应用程序，并且我有以下 XHTML 文件：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:icecore="http://www.icefaces.org/icefaces/core"
    xmlns:ace="http://www.icefaces.org/icefaces/components"
    >
<h:head></h:head>
<h:body>
    <ui:composition template="template/main-template.xhtml"> ... </ui:composition>
</h:body>
</html> 
```

使用这个没有包含在 WAR 中的 icefaces-compat 的模板效果很好（只要我显然只使用 ACE 组件）。但是现在我喜欢使用一些冰：组件，因此需要-compat JAR。但是当将此 JAR 添加到 WAR 时，会发生以下错误：

```
12.04.2012 13:56:32 org.icefaces.impl.event.BridgeSetup isListenerForSource
WARNING: ICEfaces configured for view /configuration.xhtml but h:head and h:body components are required 
```

当我从侧面完全移除`ui:composition`标签时也会发生此错误，即`<h:body>`标签为空。

我很乐意提供更多信息，但现在我不确定什么是重要的，因为我所做的唯一区别是将 -compat 库添加到 WAR。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:23:48.223

我终于想出了一个非常简单的解决方案：我忘了添加 WEB-INF/faces-config.xml 文件。只要使用 ACE 等，这似乎就可以了，但是一旦使用了 -compat jar，这似乎是必要的。文件本身只需要包括：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                              http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
          version="2.0">
</faces-config> 
```

# javascript - 为什么我的按钮不会隐藏？（JavaScript 函数/CSS 可见性）

> ID：10123381
> 
> 赞同：0
> 
> 时间：2012-04-12T12:15:53.837
> 
> 标签：javascript, html, css

我真的不明白这一点。在我的 JavaScript 示例中，我试图用 CSS 隐藏三个按钮，但什么也没发生！为什么李二和李三不躲？我想让 li.two 和 li.three 在单击它们的按钮之前不可见。（Yahoo 仅在单击 Google 时可见，Facebook 仅在单击 Yahoo 时可见）这是代码：

```
<html>
<head>
<script type="text/javascript">
function show_prompt()
{
var name=prompt("Your Name");
if (name!=null && name!="")
  {
  alert("Thanks for clicking " + name + "!");
  window.open("http://www.google.com/};
}
</script>
<script type="text/javascript">
function show_alert()
{
alert("Thanks for clicking me!");
window.open("http://www.yahoo.com/");
}
</script>
<script type="text/javascript">
function show_alert1()
{
alert("Have fun on Facebook!");
window.open("http://www.facebook.com/");
}
</script>
<script type="css/text">
li.two, li.three {display:none};
</script>
</head>
<body>
<ul>
<li class="one"><input type="button" onclick="show_prompt();showNext('Yahoo')" value="Google" />
<li class="two"><input type="button" id="Yahoo" onclick="show_alert();showNext('Facebook')" value="Yahoo" />
<li class="three"><input type="button" id="Facebook" onclick="show_alert1()"value="Facebook" />
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:17:17.197

您没有结束标签`<li>`

```
<li class="one"><input type="button" onclick="show_prompt();showNext('Yahoo')" value="Google" /></li>
<li class="two"><input type="button" id="Yahoo" onclick="show_alert();showNext('Facebook')" value="Yahoo" /></li>
<li class="three"><input type="button" id="Facebook" onclick="show_alert1()"value="Facebook" /></li> 
```

你的CSS是错误的，`;`在外面`{}`

`li.two, li.three {display:none;}`

你的css在一个`<script>`标签中，需要在里面：

`<style type="text/css">li.two, li.three {display:none;}</style>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:39:48.853

你需要使用这个

```
<li class="one"><input type="button" onclick="show_prompt();showNext('Yahoo')" value="Google" />
<li class="two"><input type="hidden" type="button" id="Yahoo" onclick="show_alert();showNext('Facebook')" value="Yahoo" />
<li class="three"><input type="hidden" type="button" id="Facebook" onclick="show_alert1()"value="Facebook" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:36:14.240

你没有关闭 li 标签，你的 showNext() 函数只调用，没有写那个函数

尝试这个

```
 <html>
        <head>
        <style type="text/css">
        .two,.three{
        display:none;
        }
        </style>

        <script type="text/javascript">
        function show_prompt()
        {
        var name=prompt("Your Name");
        if (name!=null && name!="")
          {
          alert("Thanks for clicking " + name + "!");
          window.open("http://www.google.com/")

          };
        }
        </script>
        <script type="text/javascript">
        function showNext(value){

        document.getElementById(value).style.display="block";

        }
        </script>
        <script type="text/javascript">
        function show_alert()
        {
        alert("Thanks for clicking me!");
        window.open("http://www.yahoo.com/");
        }
        </script>
        <script type="text/javascript">
        function show_alert1()
        {
        alert("Have fun on Facebook!");
        window.open("http://www.facebook.com/");
        }
        </script>

        </head>
        <body>
        <ul>
        <li class="one"><input type="button" onclick="show_prompt();showNext('Yahoo')" value="Google" /></li>
        <li class="two" id="Yahoo" ><input type="button" id="Yahoo" onclick="show_alert();showNext('Facebook')" value="Yahoo" /></li>
        <li class="three" id="Facebook"><input type="button" id="Facebook" onclick="show_alert1()"value="Facebook" /></li>
        </ul>
        </body>
        </html> 
```

# codeigniter - CodeIgniter 外部的 CodeIgniter 输入类

> ID：10123383
> 
> 赞同：0
> 
> 时间：2012-04-12T12:15:57.467
> 
> 标签：codeigniter, input, integration

我正在将一个应用程序从平面文件 php 移动到 codeigniter，我想在完全移动之前尽可能多地集成这两者。我希望专门使用 codeigniter 之外的输入类，但看起来我还需要使用控制器逻辑（以访问输入段）。任何人都可以引导我在平面文件 php 中使用输入库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:50:26.570

我认为您尝试这样做会造成过多的工作和潜在的问题。如果你直接去CI，你会更好。将标准 PHP 文件中的任何独立函数移动到 Helper 函数中。

如果你真的想这样做，你可以使用 CI 并为你的所有文件创建控制器/函数，然后在控制器函数中，只是`include()`你的 PHP 文件，暂时忽略模型和视图。这样您就可以访问所有 CI 变量，包括`$this->input`数据。

# php - #34; 而不是“在网站上显示

> ID：10123385
> 
> 赞同：1
> 
> 时间：2012-04-12T12:16:11.260
> 
> 标签：php, mysql, apache

我将 Apache 2.2.22 和 PHP 5.4.0 与 MySQL 5.5.22 一起使用。

在我的两台服务器和一台服务器上安装了相同的页面，而不是“有 #34; 显示。

Apache、PHP 和 MySQL 配置是相同的。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:03:48.343

使用以下命令查看您的 MYSQL 变量：

```
SHOW VARIABLES LIKE 'character_set%'; 
```

如果您的两台服务器之间存在差异，请修改您的 my.cnf 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:21:45.917

这是 libxml2 的问题。我已经从默认的 CentOS 存储库中恢复了它，现在可以了 :)

# ios - UISplitViewController 的替代品？

> ID：10123387
> 
> 赞同：0
> 
> 时间：2012-04-12T12:16:23.860
> 
> 标签：ios, ipad, uisplitviewcontroller

我必须为 iPad 制作一个需要`UISplitViewController`类似视图但顶部有额外导航栏的应用程序。不幸的是，本机`UISplitViewController`不支持此功能。作为我想要的一个例子，考虑一下苹果文档网站，它看起来像：

![我想要的是](../Images/5445e03a8155c2b17145d9c3f687f184.png)

但`UISplitViewController`提供的只是其中的一部分（仅限 Master-Detail 控制器）：

![我们得到了什么](../Images/9effca3eecc14e69f853703937ce1f15.png)

所以我的问题是：最好的方法是什么？我应该继承`UISplitViewController`（我不太自信）还是应该使用`loadNibNamed:`或者是否有一些开源项目？

**编辑**我需要在额外的顶部栏中放置图像、按钮和搜索栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:14:52.147

你需要什么[`MGSplitViewController`](https://github.com/mattgemmell/MGSplitViewController/)。它允许您将拆分视图控制器推送到导航控制器中。您还可以通过在视图层次结构中挖掘并在那里种植您的视图来完成您所需要的，但`MGSplitViewController`会更优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-11T09:22:09.420

我最近为 iPhone 和 iPad 的 IOS 设备开发了一个库并在 gitHub 上发布。它的作用类似于 UISplitViewController，但您可以使用更多自定义选项。[https://github.com/ytur/USController](https://github.com/ytur/USController)

# sql-server-2008 - 从 SQL Server 加载 SSIS 会影响数据库缓存吗？

> ID：10123413
> 
> 赞同：2
> 
> 时间：2012-04-12T12:17:38.003
> 
> 标签：sql-server-2008, ssis, etl

我没有太多的 ETL 经验，但我也没有找到我的问题的答案，尽管我想如果你已经使用它可能是不费吹灰之力的。我们目前正在研究创建一个简单的数据仓库（就像“从大多数表中复制大多数列”而不是 OLAP 样式一样简单），而且出于几个原因，我们似乎倾向于 SQL Server (2008)。

当涉及到 SQL Server 时，SSIS 似乎是此类任务的工具，但我找不到任何关于它如何影响源数据库缓存的信息，如果有的话，在加载数据时。当涉及到使用风格的缓存时，我们的一些安装在性能方面非常敏感。

但是如果 SSIS 运行“select *”-ish 查询并且缓存被更改，那么用户的性能可能会降低到不可接受的水平，直到它再次从这些查询中重建。

所以我的问题是，从 SQL Server 数据库加载数据时，SSIS（或有没有办法避免）会影响数据库缓存吗？

部分问题还在于源数据库可能是 Oracle 或 SQL Server 数据库，因此如果有办法避免 Oracle 的缓存影响部分，那也是很好的输入。（我猜 Attunity 连接器是要走的路？）

（一些附加信息：我们也考虑过普通文件，但是导出导入可能比 SSIS 传输花费更长的时间？我还猜想更改数据捕获是我们也会研究的内容，所以如果这与这个问题有关，请随意包括可能的问题/好处。）

也欢迎任何其他相关建议！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:09:32.080

处理 SQL Server 端：

首先，SSIS 没有做任何特别的事情来避免缓冲池或计划缓存。
简单测试（在非生产实例上！）：

1.  使用单个连接管理器和包含一个 OLE DB 源的单个数据流创建一个新的 SSIS 包，指向一个表，类似于： ![包裹](../Images/f83037adcea19745068efa299e44f5a9.png)

2.  从 SSMS 清除缓冲池：`DBCC DROPCLEANBUFFERS`

3.  [使用此页面](http://blog.sqlauthority.com/2010/06/17/sql-server-data-pages-in-buffer-pool-data-stored-in-memory-cache/)顶部的美化 dm_os_buffer_descriptors 查询验证是否已清除缓存：我明白了： ![结果 1](../Images/9495bc49dad92f1f34398f741fdc293d.png)

4.  运行包

5.  重新运行步骤 (2) 中的查询，并注意表的数据页（在我的示例中为 BOM_PIECE）已加载到缓存中： ![结果 2](../Images/3fec042bcc87fa8218f8528baab25bff.png)

请注意，大多数 SSIS 组件都允许您提供自己的查询，因此如果您有办法避免使用缓冲池（我不知道这是可能的 - 我会听从对此了解更多的人），您可以将其插入查询。因此，在上面的示例`Table or view`中，您可以选择`SQL command`，或者`SQL command from variable`如果您的命令需要动态文本，而不是在 OLE DB 源中进行选择。

最后，我可以想象您为什么要消除缓存负载 - 但您*确定*要这样做吗？SQL Server 相当擅长管理内存，而您正在做的是将内存负载换成磁盘 I/O 负载，这（取决于您的用例）可能会对其他用户产生负面影响。 [这个问题](https://stackoverflow.com/questions/1714622/sql-server-2005-caches-and-all-that-jazz)讨论了 SQL Server 缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:32:46.250

阅读[这篇](http://blogs.msdn.com/b/sqlperf/archive/2009/08/14/using-ssis-to-get-data-out-of-oracle-a-big-surprise.aspx)关于 Attunity 的关于从 oracle 读取数据的文章

您是什么意思“从 SQL Server 数据库加载数据时影响数据库缓存”。SQL Server 不缓存数据，它缓存执行计划。您使用 SSIS 的事实不会影响您的服务器（当然除了读取数据的开销）。只需使用适当的事务隔离级别。

另外，阅读有关SSIS 组件的[快速加载属性](http://msdn.microsoft.com/en-us/library/ms141237%28v=sql.100%29.aspx)

关于变更数据捕获，我看不出它如何取代 SSIS。您可以使用 CDC 选择将要加载的行，但它不会为您执行加载。

# javascript - 阻止我的工具提示闪烁

> ID：10123418
> 
> 赞同：1
> 
> 时间：2012-04-12T12:17:49.043
> 
> 标签：javascript, tooltip, jquery-tooltip

让我的 javascript 正常工作时遇到问题。对于单个工具提示，它工作得很好。但是当我翻转多个提示时，我会得到闪烁的效果。似乎鼠标悬停，事件正在“排队”或其他东西。

我创建了一个小提琴，您可以在其中看到我在说什么
[http://jsfiddle.net/eco_bach/dpFBQ/2/](http://jsfiddle.net/eco_bach/dpFBQ/2/)

任何其他优化建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:31:56.003

您只需要在or方法`.stop(true, true)`之前添加即可结束任何当前动画。这将阻止它闪烁，如此[处所示](http://jsfiddle.net/dpFBQ/4/)`fadeIn()``fadeOut()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:26:20.030

每次将鼠标悬停在元素上时，您的代码都会创建工具提示并为其设置动画，因此闪烁是预期的。我怀疑你想打开它一次，然后在悬停其他人时更新它的位置和内容。

在这种情况下，您将需要跟踪工具提示是否已经打开，如果它正在更新其内容和位置但跳过动画。如果没有，做动画。

# php - Jquery/Ajax 联系表不发送电子邮件

> ID：10123421
> 
> 赞同：0
> 
> 时间：2012-04-12T12:17:58.270
> 
> 标签：php, jquery, ajax, forms, validation

我确信这是一个已被多次回答的问题，但在我花了数小时试图找出问题后，我的联系表仍然存在问题。

当我提交表单时，我会被重定向到带有谢谢消息的 submit.php 页面，但是没有电子邮件发送到我的 $email_to 地址。

可能值得注意的是，此代码位于 Wordpress 主题中，并且当前正在我的本地计算机上运行（但这会影响任何事情吗？）

谁能告诉我我在这里做错了什么？我有一种感觉我使用的插件不正确，这个 ajax 游戏很新！

**我正在使用以下插件：**

*   Jquery 表单插件 (http://pastebin.com/cC5899ns)
*   Jquery 验证 (http://pastebin.com/GyYuVwAH)

**这是我的 HTML：**

```
<div id="footer">
                <h3>Contact</h3>
                <div id="preview"></div>
                <form name="form" id="form" action="<?php bloginfo('template_directory'); ?>/_/inc/submit.php" method="post">
                    <input type="text" value="Your name" name="name" />
                    <input type="tel" value="Your contact number" name="email" />
                    <textarea name="message">Quick Note</textarea>
                    <button>Submit</button>
                </form>
            </div> 
```

我的 JS：

```
$(document).ready(function (){

$('#form').validate(
{
rules:
{
"name":{
required:true,
maxlength:40
},
"email":{
required:true,
email:true,
maxlength:100
},
"message":{
required:true
}},

messages:
{
"name":{
required:"This field is required"
},
"email":{
required:"This field is required",
email:"Please enter a valid email address"
},
"message":{
required:"This field is required"
}},

submitHandler: function(form){
$(form).ajaxSubmit({
target: '#preview',
success: function() {
alert('hello');
$('#foooter').slideUp('fast');
}
});
}

})
}); 
```

**我的提交.php**

```
<?php
include("db.php");

if($_SERVER["REQUEST_METHOD"] == "POST")
{
    $name=mysql_real_escape_string($_POST['name']);
    $email=mysql_real_escape_string($_POST['email']);
    $message=mysql_real_escape_string($_POST['message']);
    if(strlen($name)>0 && strlen($email)>0 && strlen($message)>0)
        {
            $email_to = "*********";
            $email_from = $email;
            $email_subject = "Contact Form";
            $email_message = stripslashes($message);

            $headers = 'From: '.$email_from."\r\n" .
            'Reply-To: '.$email_from."\r\n";

            mail($email_to, $email_subject, $email_message, $headers);

            $time=time();
            mysql_query("INSERT INTO contact (name,email,message,created_date) VALUES('$name','$email','$message','$time')");
            echo "<h1>Thank You !</h1>";
        }
}
?> 
```

**我的 db.php**

```
<?php
$mysql_hostname = "localhost";
$mysql_user = "root";
$mysql_password = "*****";
$mysql_database = "******";
$prefix = "";
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) or die("Opps some thing went wrong");
mysql_select_db($mysql_database, $bd) or die("Opps some thing went wrong");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:32:36.497

您的`contact`表格是否正在更新记录？如果是这样，那么我怀疑有两件事会出错。

1）来自[mail](http://www.php.net/manual/en/function.mail.php)的文档：`Lines should not be larger than 70 characters.`

2) 此外，如果您的本地主机尚未设置为发送电子邮件，那么您不应该期望收到它们。

如果您的`contact`表格正在更新，那么我会假设＃2 是您的问题。

其他有此问题的 stackoverflow 用户：

[从本地主机发送电子邮件](https://stackoverflow.com/questions/4595730/sending-email-from-localhost)

[从 localhost 发送邮件的选项](https://stackoverflow.com/questions/5342822/php-mail-function-on-localhost)

更新：绝对删除或注释掉电子邮件部分，直到您可以放心该功能正在运行。设置 localhost 邮件服务器需要做很多工作，所以在您确定可以发送电子邮件之前，我不会担心这些部分。在不涉及 AJAX 的测试文件中尝试此过程。您将收到大量警告和错误消息，以查看邮件是否正常工作。

在您知道可以在普通的 GET 页面中完成之前，不要尝试在 AJAX 中使用诸如电子邮件之类的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:35:58.170

它确实添加到数据库中吗？所以唯一的问题是没有发送电子邮件？

在这种情况下，您的问题是您使用 localhost 发送 mail()，我假设它在 Windows 机器上。您不能发送 localhost，因为 Windows（通常）在 localhost 上没有邮件服务器。您需要为此使用一个实际的电子邮件服务器并将服务器地址分配给您的 php.ini。

这些设置：

```
SMTP = smtp.example.com
smtp_port = 25 
```

更多信息[在这里](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)。

# python - CPython 和 IronPython 关于 zip 文件读取的奇怪不一致

> ID：10123422
> 
> 赞同：1
> 
> 时间：2012-04-12T12:18:02.283
> 
> 标签：python, ironpython

请注意：

**CPython：**

```
PS Z:\dev\poc\SDR> python
Python 2.7.1 (r271:86832, Nov 27 2010, 17:19:03) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from zipfile import ZipFile
>>> z=ZipFile('d:/aaa.zip')
>>> input=z.open(z.namelist()[0])
>>> next(input)
'aaa,bbb\n'
>>> next(input)
'123,456\n'
>>> 
```

**铁蟒：**

```
PS Z:\dev\poc\SDR> ipy64
IronPython 2.7.1 (2.7.0.40) on .NET 4.0.30319.225
Type "help", "copyright", "credits" or "license" for more information.
>>> from zipfile import ZipFile
>>> z=ZipFile('d:/aaa.zip')
>>> input=z.open(z.namelist()[0])
>>> next(input)
b'aaa,bbb\n'
>>> next(input)
'123,456\n'
>>> 
```

请注意 IronPython 显示第一行，`b'aaa,bbb\n'`而 CPython显示`'aaa,bbb\n'`. 这种差异非常重要，因为前者只是字节，而后者是字符串。

如何让 IronPython 也将第一行视为字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:07:15.670

这看起来确实很奇怪，但在 python 2.7 中，常规字符串*是*字节字符串。实际上，`byte()`是 的同义词`str`。如果你打印`repr(bytes("hello"))`你会看到`'hello'`，不是`b'hello'`。在 python 3 中，这当然是另一回事了。

In short, you *are* getting a byte string in CPython already, so I believe there's no actual problem. (I'd certainly check if something is broken before spending more time trying to "fix" it). I don't use IronPython, but I have read that it uses unicode as the default type for strings (like Python 3). I'm concluding that `b'string'` in IronPython means the same thing as `'string'` in CPython 2 (and `'string'` means the same thing as CPython's `u'string'`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:13:03.260

Short answer:

```
str(next(input)) 
```

Longer answer: It's pretty weird that the first in is bytes but the second is a string. It's probably just a bug. Can you please [open an issue](http://ironpython.codeplex.com/WorkItem/Create) with a self-contained reproduction?

# c# - 如何将 24 小时格式的 TimeSpan 转换为 12 小时格式的 TimeSpan？

> ID：10123426
> 
> 赞同：15
> 
> 时间：2012-04-12T12:18:18.507
> 
> 标签：c#

我有 TimeSpan 数据表示为 24 小时格式，例如 14:00:00，我想将其转换为 12 小时格式，下午 2:00，我用谷歌搜索并在 stackoverflow 和 msdn 中找到了相关的内容，但没有解决这个问题，谁能帮帮我？提前致谢。

**更新** 似乎可以将 24 小时格式的 TimeSpan 转换为字符串，但无法将字符串转换为 12 小时格式的 TimeSpan :(

但是我仍然得到了很多好的答案，谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-12T14:46:01.513

（在一个答案中总结我分散的评论。）

首先，您需要了解它`TimeSpan`代表一个时间间隔。此时间间隔在内部表示为滴答计数，不是字符串`14:00:00`也不是字符串`2:00 PM`。只有当您将 转换`TimeSpan`为字符串时，谈论两种不同的字符串表示形式才有意义。从一种表示切换到另一种表示不会改变或转换存储在`TimeSpan`.

写时间`2:00 PM`而不是`14:00:00`关于日期/时间格式和文化。这一切都由`DateTime`班级处理。

但是，即使`TimeSpan`表示时间间隔，它也非常适合表示一天中的时间（`DateTime.TimeOfDay`返回 a `TimeSpan`）。因此，将其用于此目的并非不合理。

要执行所描述的格式化，您需要依赖格式化逻辑`DateTime`或简单地创建自己的格式化代码。

*   使用`DateTime`：

    ```
    var dateTime = new DateTime(timeSpan.Ticks); // Date part is 01-01-0001
    var formattedTime = dateTime.ToString("h:mm tt", CultureInfo.InvariantCulture); 
    ```

    使用 in 的格式说明符`ToString`记录在 MSDN 上的[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)页面上。`CultureInfo`指定使用所需 AM/PM 指示符的a 很重要。否则，`tt`格式说明符可能会被空字符串替换。

*   使用自定义格式：

    ```
    var hours = timeSpan.Hours;
    var minutes = timeSpan.Minutes;
    var amPmDesignator = "AM";
    if (hours == 0)
      hours = 12;
    else if (hours == 12)
      amPmDesignator = "PM";
    else if (hours > 12) {
      hours -= 12;
      amPmDesignator = "PM";
    }
    var formattedTime =
      String.Format("{0}:{1:00} {2}", hours, minutes, amPmDesignator); 
    ```

    诚然，这种解决方案比第一种方法复杂得多。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T12:21:57.393

[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)表示时间*间隔*而不是一天中的时间。该[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)结构更有可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-12T12:25:49.633

您需要先将 TimeSpan 转换为 DateTime 对象，然后使用您需要的任何[DateTime 格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)：

```
var t = DateTime.Now.TimeOfDay;

Console.WriteLine(new DateTime(t.Ticks).ToString("hh:mm:ss tt")); 
```

`ToShortTimeString()`也可以，但它取决于区域设置，因此它不会在非美国系统上正确显示（或正确显示，取决于你如何看待它）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-12T12:25:20.523

`TimeSpan`表示时间间隔（时间之间的差异），而不是日期或时间，因此以 24 小时或 12 小时格式定义它几乎没有意义。我假设您实际上想要一个`DateTime`.

例如今天下午 2 点：

```
TimeSpan ts = TimeSpan.FromHours(14);
DateTime dt = DateTime.Today.Add(ts); 
```

然后，您可以根据需要格式化该日期：

```
String formatted = String.Format("{0:d/M/yyyy hh:mm:ss}", dt); // "12.4.1012 02:00:00" - german (de-DE) 
```

[http://msdn.microsoft.com/en-us/library/az4se3k1%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1%28v=vs.100%29.aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-12T12:57:43.730

试试这个代码：

```
int timezone = 0; 
```

此字符串给出 12 小时格式

```
string time = DateTime.Now.AddHours(-timezone).ToString("hh:mm:ss tt"); 
```

此字符串提供 24 小时格式

```
string time = DateTime.Now.AddHours(-timezone).ToString("HH:mm:ss tt"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T12:22:32.683

`TimeSpan`假设您停留在 24 小时范围内，您可以通过从今天`DateTime`（或任何日期）中减去负数来实现您想要的结果，然后去掉日期部分：

```
DateTime dt = DateTime.Today;
dt.Subtract(-TimeSpan.FromHours(14)).ToShortTimeString(); 
```

产量：

下午 2:00

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-12T12:29:25.653

```
String formatted = yourDateTimeValue.ToString("hh:mm:ss tt"); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-13T17:21:11.390

这很简单，假设我们有一个 TimesSpan 的对象***ts***： `TimeSpan ts = new TimeSpan();` 并假设它包含一些值，例如 14:00:00 现在首先将其转换为字符串，然后在 DateTime 中如下所示：

```
TimeSpan ts = new TimeSpan(); // this is object of TimeSpan and Suppose it contains
                              // value 14:00:00
string tIme = ts.ToString(); // here we convert ts into String and Store in Temprary
                             // String variable.
 DateTime TheTime = new DateTime(); // Creating the object of DateTime;
 TheTime = Convert.ToDateTime(tIme); // now converting our temporary string into DateTime;
 Console.WriteLine(TheTime.ToString(hh:mm:ss tt)); 
```

这将显示结果为： 02:00: **00 PM**

# android - 在android中使用二进制数据？

> ID：10123434
> 
> 赞同：2
> 
> 时间：2012-04-12T12:18:47.500
> 
> 标签：android, eclipse, binary

我的 android 应用程序接收二进制数据作为 UDP 数据包，我应该如何在 android 中将其转换为 ASCII？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:31:18.713

尝试以下操作：

```
byte [] data = (however you extract data from your source);
String result = new String(data, "iso-8859-1"); 
```

# java - JPA 2 继承了 @Id 属性

> ID：10123442
> 
> 赞同：0
> 
> 时间：2012-04-12T12:19:01.867
> 
> 标签：java, jpa, jpa-2.0

> [尤其是在使用 JPA v1.0 时，尽量不要使用 id 继承。](http://damelines.wordpress.com/2010/02/22/jpa-best-practice-1-do-not-inherit-id-property/)

与 JPA 2 有什么区别？特别是，它是否更好地工作，即示例中的a`Stapler`和a`Chair`在使用时可以具有相同的id`strategy=GenerationType.IDENTITY`吗？还是它依赖于 JPA 实现和/或数据库驱动程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:41:25.517

我认为那篇博文没有多大意义。

我什至不确定是否可以不在超类中定义 Id，除非它是 @MappedSuperclass。

它似乎担心用完Ids。如果您可以用完具有 n 个子类的 Id，那么您也会用完一个类，只需花费您 n 倍的时间，这不会更长。但是，只要你使用 long not 和 int，用完 id 就不是问题。

一个 int id 每秒插入一次可以持续大约 100 年。仍然不是“很快”，但更高的吞吐量可能会用完。

以每毫秒一次的速度，长将持续约 3 亿年。不是很“很快”。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Running_Out_of_Numbers](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Running_Out_of_Numbers)

# c# - 如何通过电子邮件获取 ASP.NET MembershipUser

> ID：10123443
> 
> 赞同：5
> 
> 时间：2012-04-12T12:19:05.657
> 
> 标签：c#, asp.net, asp.net-membership

我如何通过提供电子邮件地址来检索 ASP.NET MembershipUser，而不是`Membership.GetUser()`接收电子邮件地址的重载。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T12:32:44.440

```
string thisUser= Membership.GetUserNameByEmail("email") 
```

应该做的伎俩，然后你可以使用

```
 MembershipUser mu = Membership.GetUser(thisUser); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:07:50.237

使用“GetUserNameByEmail”方法。这是一个示例：[MSDN 帮助](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getusernamebyemail.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:27:03.940

有一个[Membership.GetUserNameByEmail 方法](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getusernamebyemail.aspx)。希望这就是你要找的。

# java - 哪个 Socket API 使用 android.net 或 java.net 在 Android 中进行 UDP 通信？

> ID：10123448
> 
> 赞同：0
> 
> 时间：2012-04-12T12:19:22.333
> 
> 标签：java, android, network-programming, udp

我需要在我的设备和/或另一个 android 设备/iPhone/服务器等之间进行 UDP 通信。

在探索 android 开发者网站时，我发现它们是两个包 java.net（普通 Java 类）和 android.net（看起来它们是 android 特定的实现）。我应该使用哪组类，以便在连接到其他设备时不会遇到任何问题。这是在 Android 中提供 UDP 套接字通信的最有效方式。我看到了[Android UDP 通信](https://stackoverflow.com/questions/5904820/android-udp-communication)，但这看起来也不完整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:07:48.047

对于 UDP，Android 依赖于它自己的 java.net 包。你应该使用Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:06:11.533

您可以使用标准`java.net.UserDatagramSocket/Packet`. 这是[官方文档](http://developer.android.com/reference/java/net/DatagramSocket.html)和[示例](http://systembash.com/content/a-simple-java-udp-server-and-udp-client/)。

# controller - 视图之间的 ST2 导航

> ID：10123451
> 
> 赞同：0
> 
> 时间：2012-04-12T12:19:27.047
> 
> 标签：controller, navigation, sencha-touch-2

我是 Sencha Touch 2 的新手，对视图之间的导航有一些疑问。在不同视图之间导航的最佳方式是什么？我尝试使用提供的 NavigationView 类，但它没有提供我想要的全部功能。

目前我正在为我的应用程序使用一个简单`Ext.Container`的`Viewport`。我声明`refs`了视图，当我更改为我的新视图时，我`controller`目前这样做：

```
var oldView = this.getOldView();
Ext.destroy(oldView);

var newView = Ext.create('MyApp.view.MyView');
Ext.Viewport.add(newView); 
```

但我不确定这是否是正确的方法，也找不到合适的文档。目前，在我看来，当我手动销毁视图时`controller`会丢失。`refs`那么在视图之间来回导航的最佳方式是什么（类似于 NavigationView`push()`和`pop()`）？我必须销毁旧视图并添加新视图吗？还是我只是隐藏旧视图并添加新视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:57:03.370

如果您想随意自定义视图，不推荐使用**Ext.NavigationView 。**请改用基本类型，例如：Ext.Container（推荐）、Ext.Panel 等。

****只要您的组件可用**，每次您再次销毁或添加视图时，**refs**仍然有效。**

 **但作为一个新手，我可以建议您创建所有需要的组件，并在需要时简单地激活/停用它们，这是一种简单的方法（但不是性能最佳）。

如果要激活视图，首先必须找到该视图的父视图。例如，您有一个**Ext.Container**，其中包含三个面板。然后，如果您想激活该容器的第二个面板，请使用`setActiveItem(yourContainerRef, 1)`（无动画）或`animateActiveItem(yourContainerRef, 1, {type: 'slide'})`**

# c# - 我必须在 WCF 客户端和服务器上设置相同的 SecurityMode 吗？

> ID：10123454
> 
> 赞同：0
> 
> 时间：2012-04-12T12:19:36.597
> 
> 标签：c#, wcf, wcf-client

根据用户设置的值，我在 wcf 客户端更改 NetTcpBinding SecurityMode 属性。

我必须在服务器上设置相同的吗？所以例如在双方绑定都有安全模式“传输”。

如果服务器设置了 SecurityMode.None 怎么办，那么响应是否会未加密？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:44:33.007

双方的安全设置必须相同。否则客户端将无法连接到服务器，或者根本不会使用安全性。如果`NetTcpBinding`我希望第一种情况发生。

# delphi - 为菜单项设置“仅查看”快捷方式？

> ID：10123455
> 
> 赞同：5
> 
> 时间：2012-04-12T12:19:36.733
> 
> 标签：delphi

我们知道，如果我们给一个 TMenuItem 设置一个快捷方式（例如**Ctrl + F2** ），一旦指定的快捷方式被按下，菜单项就会**自动**执行，并且在菜单显示时也会显示**快捷方式的描述。**

但是有没有办法让菜单项上的快捷方式描述可见但使菜单不自动响应快捷方式？

你可能会问我为什么要这个，情况如下：

在一个多文档（如火狐的多个选项卡）程序中，有多个 TPopupMenu 实例，因此多个 TMenuItem 对象具有相同的快捷方式，但我只希望活动文档窗口中的菜单项响应快捷方式。

* * *

**编辑 1**：对不起，我想简化我的问题，但我错误地描述了它 - 实际上，我使用 TActionList 并将操作链接到菜单项。

* * *

**编辑2**：刚刚发现：我想我可以使用[TApplicationEvents.OnShortCut 事件](http://docs.embarcadero.com/products/rad_studio/radstudio2007/RS2007_helpupdates/HUpdate4/EN/html/delphivclwin32/AppEvnts_TApplicationEvents_OnShortCut.html)在快捷方式被分派到菜单/操作之前拦截它们......我会尝试并在得到结果时更新我的​​问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T21:32:49.187

使用制表符 (#9) 字符指示标准菜单中文本的快捷部分。您可以`Caption`通过编辑“dfm”或在运行时包含制表符来设置菜单项或菜单项绑定到的操作组件的属性：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  Action1.Caption :=
      Action1.Caption + #9 + ShortCutToText(ShortCut(VK_F2, [ssCtrl])); 
```

除非您还分配给`ShortCut`菜单项或操作的属性本身，否则不会触发单击/执行事件。

# php - PHP & MySQL 将数据从 MySQL 保存到 php 中的 SESSIONS

> ID：10123457
> 
> 赞同：0
> 
> 时间：2012-04-12T12:19:48.403
> 
> 标签：php, mysql

我有一点问题，请相信你们中的一位专家可以提供帮助：-p。

我在数据库中有以下表：

b_admins：

```
id
username
password
email
locationid 
```

b_locations

```
id
name
description 
```

登录脚本：

```
<?php

    // Inialize session
    session_start();

    // Connection to MySQL Database.
    include ('_includes/_dbconnection.php');
    include ('_includes/_dbopen.php');

    // Retrieve username and password from database according to user's input
    $login = mysql_query("SELECT * FROM b_admins WHERE (ausername = '" . mysql_real_escape_string($_POST['username']) . "') and (apassword = '" .           mysql_real_escape_string($_POST['password']) . "')");

    // Check username and password match
    if (mysql_num_rows($login) == 1) {

    // Set username session variable
    $_SESSION['username'] = $_POST['username'];

    // Set locationid session varaible //// Modified 12 April 2012.
    $_SESSION['locationid'] = $row_Recordset1["locationid"];

    $locationid = $_SESSION['locationid'];

    // Jump to secured page
    header('Location: _home.php');
    }

    else {

    // Jump to login page
    header('Location: index.php');
    }

    // Script Source: http://frozenade.wordpress.com/2007/11/24/how-to-create-login-page-in-php-and-mysql-with-session/

?> 
```

我的主页脚本：

```
 // Check, if user is already login, if login proceed to _home.php
    if (isset($_SESSION['username'])) {
    header('Location: _home.php');
    }

    // Load Header file.
    include ('_includes/_header.php');

    // Template Construction.

    // Create Homepage Layout after $home01.
    $home01 = '<div id="imglogo"></div>
                <div id="container">
                <div class="top"> 
                <div id="logo">
                </div>
                <ul class="socialicons">
                </ul>
                </div>
                <div id="content" >
                <div id="home"> 
                <div class="latest">';

    // MySQL Load Location Name from MySQL database after $home02.
    $home02 = '<h3>';

    // Create Notification Area for the Administrator after $home03.
    $home03 = '&nbsp; Administrator Panel</h3><p>You are logged in to make changes to your Branch, only your Branch details can be changed  within this Administration Panel. You may proceed to make any changes using the menu at the bottom.</p></div>
                <!-- /Latest section -->

                <!-- News info section -->
                <ul class="news-info">
                <li><label>Users Registered</label>';

    //MySQL Load User count from MySQL database after $home04.
    $home04 = '<span>';

    // Close Template.
    $home05 = '</span></li>
                </ul>
                <!-- /News info section -->
                </div>        
                <!-- /Home --> 

                <!-- Menu -->
                <div class="menu">
                <ul class="tabs">
                <li><a href="_home.php" class="tab-home"></a></li>
                <li><a href="_events.php" class="tab-events"></a></li>
                <li><a href="_gallery.php" class="tab-portfolio"></a></li>
                <li><a href="_template_edit.php" class="tab-contact"></a></li>
                </ul>
                </div>
                </div>';

    ////////////////////////////////////////////////////////////////////////// Combining Template with MySQL Data.

    /// Build Home Page from MySQL database.

     $SQL = "SELECT * FROM b_admins, b_locations WHERE locationid ='$locationid'  LIMIT 0, 1";
            $result = mysql_query($SQL);

            while ($db_field = mysql_fetch_assoc($result)) {

                echo $home01;
                echo $home02;
                print $db_field['lcity'];
                echo $home03;
            }

    /// Build Home Page News Section from MySQL database.
                echo $home04;
    $SQL = "SELECT count( * ) as total_record  FROM `b_users` WHERE locationid = '$locationid'";
                echo $home05;

    /// Load Footer and Database close file.
    include ('_includes/_footer.php');
    include ('_includes/_dbclose.php');

?> 
```

我想从 b_admins 中保存值“locationsid”，以便能够使用 SQL 从数据库中检索数据，其中“locationsid”与数据库 b_locations 中的表相同。

我还收到以下错误，我不知道如何通过登录脚本登录时修复：“ [http://localhost/xxxxx/_home.php](http://localhost/xxxxx/_home.php)上的网页导致重定向过多。”

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:48:33.870

好像你需要先获取记录你需要获取 Mysql 结果才能获取记录

```
$row_Recordset1 = mysql_fetch_array($login, MYSQL_ASSOC);
$_SESSION['locationid'] = $row_Recordset1["locationid"]; 
```

主页也需要一个 session_start(); 或者它永远不会有效，因为仅在函数调用后加载页面时不存在会话

如果您仍然以标题重定向结束，您可以使用 html 元刷新还注意您不要将重定向指向同一页面

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:34:08.947

当你说“主页脚本”时，这个文件是 index.php 还是 _home.php？

如果是_home.php，则不需要以下几行：

```
// Check, if user is already login, if login proceed to _home.php
if (isset($_SESSION['username'])) {
header('Location: _home.php');
} 
```

这可能是导致重定向循环的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:44:48.940

我认为您的查询也是错误的。

```
// Retrieve username and password from database according to user's input
$login = mysql_query("SELECT * FROM b_admins WHERE (ausername = '" .mysql_real_escape_string($_POST['username']) . "') and (apassword = '" .          mysql_real_escape_string($_POST['password']) . "')"); 
```

你的代码有错别字。

**ausername**应该是**`username`** * *apassword* * 应该是**`passsword`**

# mysql - 多线程事务的 MySQL 配置

> ID：10123460
> 
> 赞同：2
> 
> 时间：2012-04-12T12:20:02.240
> 
> 标签：mysql, multithreading, transactions, deadlock, isolation-level

我有 6 个脚本/任务。他们每个人都启动一个 MySQL 事务，然后执行它的工作，这意味着从 MySQL 数据库中选择/更新/插入/删除，然后回滚。

因此，如果数据库处于给定状态 S，我启动一个任务，当任务终止时，数据库又回到状态 S。

当我按顺序启动脚本时，一切正常：

*   状态 S 的 DB
*   任务1
*   状态 S 的 DB
*   任务 2
*   状态 S 的 DB
*   ...
*   ...
*   任务 6
*   状态 S 的 DB

但我想通过多线程和并行启动脚本来加速这个过程。

*   状态 S 的 DB
*   6个任务同时进行
*   状态 S 的 DB

有些任务随机失败，我有时会收到此错误：

```
SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction 
```

我不明白，我认为交易是为此而生的。有什么我想念的吗？欢迎任何经验，建议，线索。

MySQL的配置是：

```
innodb_lock_wait_timeout = 500
transaction-isolation = SERIALIZABLE 
```

我在每个会话开始时添加 AUTOCOMMIT = 0 。

PS：数据库是在我之后更改的 REPEATABLE READ 隔离级别下构建和使用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:24:38.760

您可以通过确保每个事务/进程在所有情况下使用相同的 ORDER BY 以及表本身的相同顺序（至少具有可重复的读取隔离级别）对所有必需的数据/表执行 SELECT...FOR UPDATE 来防止死锁在 MySQL 中）。

除此之外，隔离级别和事务*并不*意味着处理死锁，反之亦然，它们是死锁存在的原因。如果您遇到死锁，很有可能您的数据集状态会不一致（这可能会更严重 - 如果不是，您可能根本不需要事务）。

# ruby-on-rails - 如何向检索到的 ActiveRecord 集合添加“.order”调用？

> ID：10123465
> 
> 赞同：2
> 
> 时间：2012-04-12T12:20:16.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-3.1

我是这个 Rails 世界的新手。我无法解决这个问题。如何获取@microposts 按创建微帖子的日期排序。

这是行

```
 @microposts = current_user.followeds.map(&:microposts).flatten 
```

我只设法按日期订购了“关注者”，但这不是我想要的。我所做的所有尝试都给了我错误，所以我想我不知道某些语法。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:30:10.640

通常，您会添加一个`order`子句，如下所示：

```
Micropost.where(:written_by => current_user.followeds).order(:created_at) 
```

但是，您当前具有此行结构的方式不允许这样做，因为`order`仅在 ActiveRecord::Relations 上可用，并且一旦这样做，`map`您就不再有可用于链接的 Relation。

如果是这种情况，你会想要类似的东西：

```
current_user.followeds.map(&:microposts).flatten.sort_by { |m| m.created_at } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:30:21.390

我认为你应该尝试从另一个角度来解决这个问题。

像这样的东西怎么样：

```
@microposts = Micropost.where(author_id: current_user.followed_ids).order(:created_at).all 
```

您当然可能必须交换`author_id`任何外键来识别用户 a`Micropost`是由哪个用户编写的。

如果您想反转帖子（最新的优先），您只需编写即可`order("created_at desc")`。

# wordpress - Wordpress wp_get_archives 功能不起作用

> ID：10123466
> 
> 赞同：0
> 
> 时间：2012-04-12T12:20:19.273
> 
> 标签：wordpress

我正在尝试使用 Wordpress 功能：

```
<?php  wp_get_archives(); ?> 
```

但它没有给出任何结果。它昨天工作，但我可能不小心做了什么，现在它不再工作了。不，我没有删除所有帖子，我没有删除archive.php 页面。我能做什么？也许管理面板中有一些“存档 - 关闭”选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:33:56.950

尝试一些参数，看看你是否能让它们工作：[http ://codex.wordpress.org/Function_Reference/wp_get_archives](http://codex.wordpress.org/Function_Reference/wp_get_archives)

# javascript - 从jquery每个遍历xml节点

> ID：10123468
> 
> 赞同：1
> 
> 时间：2012-04-12T12:20:26.170
> 
> 标签：javascript, jquery, xml

我的 html 代码是这样的

```
 <script type="text/javascript" src="js/jquery.js"></script>
 <script type="text/javascript">
 if (window.XMLHttpRequest)
 {
     xmlhttp=new XMLHttpRequest();
 } else {
     xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }

 xmlhttp.open("GET","brands.xml",false);
 xmlhttp.send();
 theXmlDoc=xmlhttp.responseXML; 
 function fillForm(){
     $(theXmlDoc).find('table[name=brands]').each(function(){
         alert($(this));//doesn't fire when brands.xml contains more than one entry of <table name="brands"> else shows Object object
     }); 
```

我的brands.xml是

```
 <table name="brands">
        <column name="BrandID">1</column>
        <column name="BrandName">AX</column>
        <column name="CompanyInfo">FDC</column>
        <column name="Composition">Cap</column>
 </table>
 <table name="brands">
        <column name="BrandID">2</column>
        <column name="BrandName">UP</column>
        <column name="CompanyInfo">Tor</column>
        <column name="Composition">Asp</column>
 </table> 
```

当`brands.xml`包含单个`<table name="brands">`警报条目时显示对象对象，但是当我包含多个表名时，如上所示，每个表名都没有被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:22:43.067

您的 XML 将需要由单个节点包装：

```
<tables>
    <table name="brands">
        <column name="BrandID">1</column>
        <column name="BrandName">AX</column>
        <column name="CompanyInfo">FDC</column>
        <column name="Composition">Cap</column>
    </table>
    <table name="brands">
        <column name="BrandID">2</column>
        <column name="BrandName">UP</column>
        <column name="CompanyInfo">Tor</column>
        <column name="Composition">Asp</column>
    </table>
</tables> 
```

您需要相应地调整您的 JavaScript，以便在此包装节点内选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:24:41.050

您需要在表节点上方指定一个根节点。

像

```
<root-node>
 <table name="brands">
        <column name="BrandID">1</column>
        <column name="BrandName">AX</column>
        <column name="CompanyInfo">FDC</column>
        <column name="Composition">Cap</column>
    </table>
    <table name="brands">
        <column name="BrandID">2</column>
        <column name="BrandName">UP</column>
        <column name="CompanyInfo">Tor</column>
        <column name="Composition">Asp</column>
    </table>
</root-node> 
```

请参阅教程[http://webhole.net/2009/12/16/how-to-read-xml-with-javascript/](http://webhole.net/2009/12/16/how-to-read-xml-with-javascript/)

# android - GPS定位所依赖的因素

> ID：10123479
> 
> 赞同：1
> 
> 时间：2012-04-12T12:21:10.683
> 
> 标签：android, gps

我们正在创建用于查找位置的 Android 应用程序。

该程序正常运行。我们正在获取位置。我们正在使用三星 Galaxy ACE 来运行该应用程序。

我们的要求是，我们希望定位时间最长为 25 秒，精度为 10m（我们还没有达到），我们在 25 - 40 秒内获得 30 米的精度。

根据我们的观察，我们了解到：GPS 定位取决于以下因素。

1）我们正在使用的设备。（三星galaxy ace硬件质量很差）

2）我们正在搜索位置的地方。

3）时间也很重要（无论是白天还是晚上）。

任何一种帮助意味着可以获得**最大 25sec 的时间和 10m 的精度**。准确的 GPS 位置取决于哪些其他因素。

提前致谢。

# algorithm - 有组织点云的水密面重建算法

> ID：10123488
> 
> 赞同：6
> 
> 时间：2012-04-12T12:21:37.197
> 
> 标签：algorithm, 3d, polygon, point-clouds

我有一个 3D 笛卡尔立方体。对于这个立方体中的每个点，都有一个相应的密度值。当密度突然变化时，意味着有一个空腔。现在为了找到空腔，我计算了立方体中每个点的梯度。这给了我一个空腔表面的点云。我现在想在给定点云的情况下对空腔表面进行网格划分。

不幸的是，我对表面重建没有任何经验，想知道是否有人可以推荐一种合适的算法来产生空腔的封闭表面？

立方体非常大，因此空腔表面的点云很容易达到 500.000 点或更多。我读过这篇文章：[从 3D 点云进行表面重建的鲁棒算法？](https://stackoverflow.com/questions/838761/robust-algorithm-for-surface-reconstruction-from-3d-point-cloud)我觉得这很有用。但是，鉴于以下情况，我面临的问题似乎更简单：

1.  点的坐标总是整数
2.  点分布均匀
3.  从一个点到其最近邻居的距离是 1、sqrt(2) 或 sqrt(3)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:05:26.883

You probably want the [marching cubes](http://en.wikipedia.org/wiki/Marching_cubes) algorithm.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T20:06:18.370

Marching Cubes 算法将完全满足您的需求。对于工作实现（使用 Three.js 渲染图形），请查看：

[http://stemkoski.github.com/Three.js/Marching-Cubes.html](http://stemkoski.github.com/Three.js/Marching-Cubes.html)

有关该理论的更多详细信息，我认为最好的文章是网站：

[http://paulbourke.net/geometry/polygonise/](http://paulbourke.net/geometry/polygonise/)

# php - 处理时如何保留数组“键”顺序

> ID：10123494
> 
> 赞同：-1
> 
> 时间：2012-04-12T12:22:12.787
> 
> 标签：php, arrays, foreach

我正在 PHP 中动态构建一个简单的数组。

当我构建数组时，关键顺序是这样的（例如）：

*   A6
*   A1
*   C7
*   “”（或 NULL）
*   B3

然而，当我通过 引用数组时`foreach()`，数组是有序的（“”，“A1”，“A6”，“B3”，“C7”）。

通过处理时如何保留数组的原始顺序`foreach()`？

我假设关键顺序将是它的构建方式，但似乎要么`foreach()`索引顺序，要么在途中的某个地方排序。

感谢您的帮助。

**代码片段**

```
 // loop through 3rd set of query results
echo '<pre>'; /*this is here for my debugging*/
    while ($row3 = mysql_fetch_array($result)) {

        if (empty($teamName[$row3['team']])) {
            $teamName[$row3['team']] = $row3['name'];
echo '&gt;'.$row3['team'].'&lt;<br />'; /*this is here for my debugging*/
        }

        if ($row3['id'] == $_SESSION['authenticated']['id']) $cssStyle =  ' myPick';
        else $cssStyle = NULL;

        $html[$row3['team']] .= '<li class="bcPicks' . $cssStyle . '">';
        $html[$row3['team']] .= '<span class="bcPicks_displayName">' . $row3['displayName'] . '</span>';

        if (!empty($row3['team'])) {
            $html[$row3['team']] .= ' in ';
            $html[$row3['team']] .= '<span class="bcPicks_paddingA">' . $row3['games'] . '</span>';
        }
        else {
            $html[$row3['team']] .= '<span class="bcPicks_paddingB"></span>';
        }

        if ($row3['points'] < 0) $cssStyle = 'negative';
        else $cssStyle = 'positive';

        $html[$row3['team']] .= '(<span class="bcPicks_' . $cssStyle . '">' . signedNumber($row3['points']) . ' points</span>)';
        $html[$row3['team']] .= '</li>';

    } // end while() loop through 3rd set of query results

    // free-up memory
    mysql_free_result($result);

print_r($html);echo '</pre>';var_dump($html);exit; /*this is here for my debugging*/
    foreach ($html as $key => $value) {...} 
```

我可以告诉你，我的`print_r()`和`var_dump()`两者都表明，产生的顺序`foreach()`不是它的构建方式。

**这是数组的转储**

```
>E5<
>E4<
><
Array
(
    [] => 
name1(0 points)

    [E4] => 
name2 in 5(-2 points)
name3 in 6(-2 points)
name4 in 7(-2 points)
name5 in 7(-2 points)
name6 in 7(-2 points)
name7 in 7(-2 points)
name7 in 7(-2 points)

    [E5] => 
name9 in 4(+8 points)
name10 in 7(+8 points)
name11 in 7(+8 points)

)

array(3) { [""]=> string(158) "
name1(0 points)
" ["E4"]=> string(1156) "
name2 in 5(-2 points)
name3 in 6(-2 points)
name4 in 7(-2 points)
name5 in 7(-2 points)
name6 in 7(-2 points)
name7 in 7(-2 points)
name8 in 7(-2 points)
" ["E5"]=> string(495) "
name9 in 4(+8 points)
name10 in 7(+8 points)
name11 in 7(+8 points)
" } 
```

上面你可以看到它是 'E5'、'E4' 和 NULL 构建的，但是数组转储以 NULL、'E4' 和 'E5' 的顺序显示它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:55:00.210

正如其他人所说，这不能由`foreach`.

但我注意到您从 mysql_query 结果中获取数据。很可能您的 SQL 查询会订购该结果。

即使你没有`ORDER BY`在你的 SQL 语句中手动加入，MySQL 也会根据一些标准对结果进行排序，尤其是请求表的主键。因此，如果您的数组键`$row3['team']`是数据库表中的主键，这是最可能的解释。

编辑：刚刚看到脚本输出的更新。嗯......确实很奇怪......两个观察结果：

*   一个空字符串作为索引是丑陋的地狱，我很惊讶 php 允许它
*   您只在某些情况下打印调试索引，可能是查询结果有多行具有相同的`team`值？如果数组中的某些索引的值被多次覆盖，我不确定 php 将使用哪个索引作为最新的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:28:44.173

我可能错了，但我相信 PHP 中的关联数组是作为字典实现的，其中键的顺序不能保证。您可以使用这样的数据结构，使用索引数组：

```
$array = array(
    array("A6", "bar"),
    array("A1", "foo"),
); 
```

然后像这样使用它：

```
foreach($array as $v)
    $v[0] // this contains the key
    $v[1] // this contains the value 
```

# sql - SQLite数据库中日期的操作之间

> ID：10123497
> 
> 赞同：-2
> 
> 时间：2012-04-12T12:22:20.573
> 
> 标签：sql, database, sqlite

我有一个`student`包含以下列的表格：

```
no - integer
name - string 
startdate - date 
enddate - date. 
```

日期格式为`MM/DD/YYYY`.

我会给出一个日期作为输入。现在我需要一个`inputdate`在开始日期和结束日期之间找到的查询。

例如，我将给出一个示例`04/14/2012`，那么查询应该返回如图所示的第一条记录。

（因为输入日期 ( `04/14/2012`) 位于`04/10/2012`to之间`04/20/2012`）

请帮我。

![在此处输入图像描述](../Images/a6f3f911b8ced84d8fd6c58905338aa8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:29:08.347

您遇到的问题是由于您假设 sqlite 具有日期/日期时间类型，而实际上它没有。

我建议您阅读以下[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)以更好地了解 sqlite 类型。

格式中的日期`MM/DD/YYYY`由 sqlite 作为 TEXT 处理，因此这些日期作为字符串进行比较。例如，如果直接比较，`02/01/2012`则认为比`01/02/2012`sqlite 大。

您需要将这些日期转换为可以进行字符串比较的格式。这是一个例子：

```
sqlite> create table foo (d TEXT);
sqlite> insert into foo values ('02/01/2012');
sqlite> select substr(d, 7, 4) || substr(d, 1, 2) || substr(d, 4, 2) from foo;
20120201 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:25:17.083

您应该发布到目前为止您已经尝试过的内容。

应该有一个`between`子句可以使用：

```
select * from table
where inputdate between startdate and enddate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T21:51:14.513

日期作为 SQLite 中的日期类型不存在。有许多处理日期的方法 - 将它们存储为自 1970 年 1 月 1 日（unixepoch）以来的整数秒或将它们存储为字符串，但如果你这样做，那么你真的需要将它们存储为 'YYYY-MM-DD' 格式因为这是日期函数需要作为输入的内容。

假设您以我建议的格式使用字符串格式，那么您的查询将类似于

```
SELECT * FROM Table WHERE Date(Inputdate) BETWEEEN Date(startDate) AND Date(EndDate); 
```

（尽管您可能希望将日期列的输出格式化为美国日期格式

```
SELECT Strftime("%m/%d/%Y",startDate) As StartDate ... 
```

如果您使用 1970 年以来的秒数，它会更容易一些，因为秒数只是比较而不需要将它们转换为日期，尽管您仍然可能希望以美国日期格式输出，所以...

```
SELECT Strftime("%m/%d/%Y",startDate) As StartDate ... FROM Table WHERE inputDate BETWEEN startDate and EndDate; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T07:16:08.717

`sqlite> select *from tbl_node where mydate between '2014-02-02' and '2014-02-06';`

它显示输出：-

```
1|1|123|456|12eb-ab|1|1|254|123|19|2014-02-03 16:00:44
2|1|123|456|12eb-ab|1|1|254|123|19|2014-02-03 16:01:03
3|1|123|456|12eb-ab|1|1|254|123|19|2014-02-03 16:00:57
4|1|123|456|12eb-ab|1|1|254|123|19|2014-02-03 16:00:34 
```

这里 mydate 是 tbl_node 中的列名；我们也可以从当前时间使用，现在使用。

`sqlite> select *from tbl_node where mydate between '2014-02-02' and 'now';`

# android - 将视频输入流转换为 RTMP

> ID：10123498
> 
> 赞同：37
> 
> 时间：2012-04-12T12:22:21.673
> 
> 标签：android, video, streaming, rtp, rtmp

我想将视频录制从我的 android 手机流式传输到网络媒体服务器。

第一个问题是，在将`MediaRecorder`输出设置为套接字时，流缺少一些`mdat`大小的标头。这可以通过在本地预处理该流并将丢失的数据添加到流中以生成有效的输出流来解决。

问题是如何从那里着手。

如何将该流输出为 RTMP 流？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-20T19:27:05.060

首先，让我们解开你的问题。如您所料，Android 目前不支持[RTMP 。](https://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol)您可以使用[一些侧库](http://www.aftek.com/afteklab/aftek-RTMP-library.shtml)来添加支持，但这些可能不是完整的实现，或者具有其他不良副作用和错误，导致它们无法满足您的需求。

[在这种情况下，常见的替代方法](https://stackoverflow.com/questions/3186950/video-streaming-using-rtsp-android)是使用[RTSP](https://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)。它提供了一种[具有自己的 RFC](https://www.rfc-editor.org/rfc/rfc2326)的可比较的会话格式，并且它与 RTP 结合时的数据包结构与您所需的协议非常相似（没有一些细节）。您可以在此处执行必要的修复以将 RTP/RTSP 转换为 RTMP，但如前所述，此类工作目前超出了您的应用程序的开发范围。

因此，假设您想使用 RTMP（[使该线程无效](https://stackoverflow.com/questions/3186950/video-streaming-using-rtsp-android)）并且[上面链接的库](http://www.aftek.com/afteklab/aftek-RTMP-library.shtml)不能满足您的需求。

例如，您可以[按照本教程](http://www.wowza.com/forums/content.php?273-Livu-app-Live-Streaming-with-Wowza-Server)使用 Livu、Wowza 和 Adob​​e Flash Player 进行录制和播放，并与[Livu 开发人员](http://mailto:support@stevemcfarlin.com)讨论他们的客户端许可问题。或者，您可以使用[此客户端库](https://code.google.com/p/android-rtmp-client/)及其完整的[Android 记录器示例](https://code.google.com/p/android-recorder/)来构建您的客户端。

总结一下：

## RTSP

*   [此线程](https://stackoverflow.com/questions/3186950/video-streaming-using-rtsp-android)，使用[Darwin Media Server](https://en.wikipedia.org/wiki/Darwin_Streaming_Server)、[Windows Media Services](https://en.wikipedia.org/wiki/Windows_Media_Services)或[VLC](https://en.wikipedia.org/wiki/VLC_media_player)

## 实时多播

*   [这个图书馆](http://www.aftek.com/afteklab/aftek-RTMP-library.shtml)，
*   [此线程](http://www.wowza.com/forums/showthread.php?13087-Android-RTMP-Live-Streaming)和[本教程](http://www.wowza.com/forums/content.php?273-Livu-app-Live-Streaming-with-Wowza-Server)，使用[Livu](http://stevemcfarlin.com/livu/index.html)、[Wowza](https://en.wikipedia.org/wiki/Wowza_Media_Server)和[Adob​​e Flash Player](https://en.wikipedia.org/wiki/Adobe_Flash_Player)
*   [这个客户端库](https://code.google.com/p/android-rtmp-client/)和[这个示例记录器](https://code.google.com/p/android-recorder/)

祝你的申请好运。我承认我对所有这些库的理解不够全面，但在撰写本文时，这些似乎是该领域的标准解决方案。

## 编辑：

根据OP，走RTMP库集：

*   [这个库](http://www.aftek.com/afteklab/aftek-RTMP-library.shtml)：他无法让库演示工作。更重要的是，RTMP 功能不完整。
*   [This thread](http://www.wowza.com/forums/showthread.php?13087-Android-RTMP-Live-Streaming) and [this tutorial](http://www.wowza.com/forums/content.php?273-Livu-app-Live-Streaming-with-Wowza-Server) , using [Livu](http://stevemcfarlin.com/livu/index.html) , [Wowza](https://en.wikipedia.org/wiki/Wowza_Media_Server) , and Adob​​e Flash Player : This thread and this tutorial , using Livu , Wowza , and [Adob​​e Flash Player](https://en.wikipedia.org/wiki/Adobe_Flash_Player) : 这有一个关于如何消费视频的很长的教程，但是它的发布教程可能很简洁而且不够。
*   [此客户端库](https://code.google.com/p/android-rtmp-client/)和[此示例记录器](https://code.google.com/p/android-recorder/)：给定示例仅涵盖音频发布。需要做更多的工作才能完成这项工作。

简而言之：需要做更多的工作。其他答案以及对这些示例的改进是这里需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T09:10:48.127

如果您在 Android 设备上使用网络浏览器，则可以使用 WebRTC 进行视频捕获和服务器端录制，即使用[Web Call Server 4](http://flashphoner.com/wcs4)

因此完整路径将是：

Android Chrome [WebRTC] > WCS4 > 录制

所以这里不需要 RTMP 协议。

如果您使用的是独立的 RTMP 应用程序，则可以使用任何 RTMP 服务器进行视频录制。据我所知，Wowza 支持 H.264+Speex 录制。

# nhibernate - Nhibernate Flush 导致不应存在的更新

> ID：10123503
> 
> 赞同：1
> 
> 时间：2012-04-12T12:22:39.867
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我正在使用 Repo 模式，并且我已经设置了测试来复制传入的 HTTP 请求，然后在测试完成后导致对工作单元的处置。

似乎在执行 HQL 语句，然后调用 displose（又调用 flush）之后，它正在导致跨各种元素的更新。

非常奇怪 - 有没有人遇到过这个？

这是我的 HQL 语句，它正在执行：

```
_session.CreateQuery("select distinct t from TaskEntity as t").List<T>() 
```

我已将其恢复为最简单的形式 - 请注意 HQL 语句并不直接在 CreateQuery 中。

这是我得到的堆栈跟踪：

一世

```
BM.Data.Informix.IfxParameterCollection.b(Int32 A_0)
IBM.Data.Informix.IfxParameterCollection.GetParameter(Int32 index)
System.Data.Common.DbParameterCollection.System.Collections.IList.get_Item(Int32 index)
NHibernate.Type.Int32Type.Set(IDbCommand rs, Object value, Int32 index)
NHibernate.Type.NullableType.NullSafeSet(IDbCommand cmd, Object value, Int32 index)
NHibernate.Type.NullableType.NullSafeSet(IDbCommand st, Object value, Int32 index, ISessionImplementor session)
NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index)
NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session)
NHibernate.Persister.Entity.AbstractEntityPersister.UpdateOrInsert(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session)
NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Int32[] dirtyFields, Boolean hasDirtyCollection, Object[] oldFields, Object oldVersion, Object obj, Object rowId, ISessionImplementor session)
NHibernate.Action.EntityUpdateAction.Execute()
NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
NHibernate.Engine.ActionQueue.ExecuteActions()
NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
NHibernate.Impl.SessionImpl.Flush()
Case.Data.SQL.NHibernateUnitOfWork.Dispose() in C:\Projects\Case System\Dev\WorkingBranch\Src\Case.Data.SQL\NHibernateUnitOfWork.cs: line 46
Case.Domain.Tests.TaskServicesTests.TakeDown() in C:\Projects\Case System\Dev\WorkingBranch\Src\Case.Domain.Tests\TaskServicesTests.cs: line 40 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T05:27:20.967

我遇到了类似的问题。我先告诉你这是什么原因造成的。当从它`NHibernate`获取一个实体时，`DB`它会将值分配给它的道具。很少有 props 在类定义中具有空值`DB`但不是`Nullable`类型定义。所以`NHibernate`给他们一个默认值，例如。`0`for `int`，`DateTime.MinValue`for`datetime`等。当您在事务上调用 commit 时，`NHibernate`使用值重新检查属性的`DB`值，并且由于应该具有`Null`值的道具现在具有默认值，`NHibernate`因此认为值已更改并导致更新。

**解决方案：**

1.  通过`nullable datatypes`发布修复它们用于您的班级道具， `?`但对我来说这会导致其他问题。
2.  将您的属性映射为`Not Null`类型，但在大多数情况下这并不可取。
3.  我正在使用的解决方案：我在实体的构造函数中为道具分配默认值，因此不是在保存`Null`值中`Db` `Nhibernate`保存一些默认值，这会停止对不必要更新的调用。

您可以进一步 google`NHibernate ghostbuster`以获取有关此问题的更多研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:26:16.083

NHibernate 通常在它具有不确定的瞬态或分离实体时运行更新。也就是说，它不知道它是否有管理它的父实体或者它不确定实体是否脏的实体。这通常是某处映射错误的症状（某些父项上缺少 Inverse），或者您的实体上没有 Version 或 Date 列。

# ruby-on-rails - 导轨。视图中的错误

> ID：10123510
> 
> 赞同：0
> 
> 时间：2012-04-12T12:23:11.870
> 
> 标签：ruby-on-rails, devise

我有 PostController，我使用了体面的曝光 gem。

```
#posts_controller.rb
class PostsController < ApplicationController
  expose(:posts) { Post.all }
  expose(:post) do 
   Post.find(params[:id]) || Post.new
  end

  def create
    post = current_user.posts.new(params[:post])
    if post.save
      redirect_to post, notice: 'Post was successfully created.' 
    else
      render action: :new 
    end
  end

  def update
   if post.update_attributes(params[:post])
    redirect_to post, notice: 'Post was successfully updated.' 
   else
    render action: "edit" 
   end
  end

  def destroy
   post.destroy
   redirect_to posts_url, notice: "Post was deleted." 
  end
end 
```

模型帖子。

```
class Post < ActiveRecord::Base
  extend FriendlyId 
  friendly_id :title, use: :slugged

  acts_as_taggable_on :tags

  belongs_to :user
  has_many :comments, :dependent => :destroy  

  attr_accessible :title, :content, :tag_list 
  validates :title, :content, :user_id, :presence => true 
  validates :tag_list, :length => {:minimum => 1 ,:maximum => 6 } 
end 
```

和_form.html.erb

```
<%= form_for(post) do |f| %>
 <% if post.errors.any? %>
  <div id="error_explanation">
   <h2><%= pluralize(post.errors.count, "error") %> prohibited this post from being saved:</h2>

  <ul>
  <% post.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
</div>
<% end %>
#Fields.
<div class="actions">
  <%= f.submit %>
</div> 
```

但是为什么当我尝试创建一个新帖子时，我得到一个错误？

```
Couldn't find Post without an ID 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:47:13.993

尝试替换：

```
Post.find(params[:id]) || Post.new 
```

和：

```
Post.find_by_id(params[:id]) || Post.new 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:03:45.587

一种常见的模式是检查是否提供了 ID。

您通常还应该使用`posts.find`and`posts.build`而不是`Post.find`and `Post.new`。

```
expose(:post) { (id = params[:id]) ? posts.find(id) : posts.build } 
```

# ruby - 某些网络事实的 Puppet facter 速度较慢

> ID：10123517
> 
> 赞同：1
> 
> 时间：2012-04-12T12:23:50.520
> 
> 标签：ruby, performance, puppet, vagrant, facter

我正在学习[vagrant](http://vagrantup.com/)和[puppet](http://puppetlabs.com/puppet/puppet-enterprise/)。当我使用 vagrant lucid32 (Ubuntu 10.04) 时，puppet 似乎很慢。我已经修复了 fqdn 问题[（问题 7780322）](https://stackoverflow.com/questions/7780322/puppet-facter-could-not-retrieve-fact-fqdn-how-to-fix-or-circumvent)，但它仍然很慢。

我已经将问题（部分）追溯到因素。请求 ipaddress 非常快，但 ipaddress_eth0 需要 20 秒：

```
root@a:/# time facter ipaddress
10.0.2.15

real    0m0.031s
user    0m0.024s
sys     0m0.004s
root@a:/# time facter ipaddress_eth0
10.0.2.15

real    0m20.126s
user    0m0.080s
sys     0m0.020s
root@a:/# 
```

寻找 ipaddress_lo 也很慢。

任何人都可以帮助我提供解决方案或有关如何调试的建议吗？我是 Ruby 新手，但愿意学习。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:21:10.110

我刚刚在 /etc/hosts 中定义了未知主机（？）：

```
10.0.2.3 电脑1
10.0.2.2 电脑2

```

在此之后，arp -a 非常快，因此提高了 facter -p 的响应，进而提高了 puppet agent --test 的性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:09:28.403

问题是`arp -a`运行非常缓慢。

```
vagrant@lucid32:~$ time arp -a
? (10.0.2.3) at 52:54:00:12:35:03 [ether] on eth0
? (10.0.2.2) at 52:54:00:12:35:02 [ether] on eth0

real    0m20.022s
user    0m0.004s
sys     0m0.000s
vagrant@lucid32:~$ 
```

我认为这是 virtualbox (4.1.12_77245)、仅主机网络、ubuntu 10.04 和 windows 7 主机操作系统的某种组合的问题。

作为一种解决方法，假设我可以在不知道我的 mac 地址的情况下了解 puppet 的一些知识，我将第 7 行替换`/opt/ruby/lib/ruby/gems/1.8/gems/facter-1.6.0/lib/facter/arp.rb`为如下：

```
require 'facter/util/ip'

Facter.add(:arp) do
  confine :kernel => :linux
  setcode do
    ### output = Facter::Util::Resolution.exec('arp -a') # disable for slow arp
    output = "" ### return a blank, rather than the real (but slow) arp
    if not output.nil?
      arp = ""
      output.each_line do |s|
        if s =~ /^\S+\s\S+\s\S+\s(\S+)\s\S+\s\S+\s\S+$/
          arp = $1.downcase
          break # stops on the first match
        end
      end
    end
    "fe:ff:ff:ff:ff:ff" == arp ? arp : nil
  end
end

Facter::Util::IP.get_interfaces.each do |interface|
  Facter.add("arp_" + Facter::Util::IP.alphafy(interface)) do
    confine :kernel => :linux
    setcode do
      arp = Facter::Util::IP.get_arp_value(interface)
      "fe:ff:ff:ff:ff:ff" == arp ? arp : nil
    end
  end
end 
```

# mysql - 无法更改 mysql 中的例程

> ID：10123518
> 
> 赞同：2
> 
> 时间：2012-04-12T12:23:57.370
> 
> 标签：mysql

问题：无法更改例程。

我正在使用 mysql 5.1.47。我创建了一个名为“testuser”的用户和一个名为“abc1，abc2，abc3”的数据库。

一开始我试过

```
GRANT ALL ON *.* TO 'testuser'@'%';(also::> GRANT ALL PRIVILEGES ON *.* TO 'testuser'@'%';) 
```

同花顺特权；

也试过这个

```
GRANT ALL ON *.* TO 'testuser'@'%' IDENTIFIED BY 'passwd';
FLUSH PRIVILEGES; 
```

这工作正常，用户 testuser 能够创建、更改例程。

然后我撤销了所有权限，甚至删除了用户 testuser 并再次创建了 testuser。然后我尝试了：

```
GRANT ALL ON abc1.* TO 'testuser'@'%'; 
```

也试过这个

```
GRANT ALL ON abc1.* TO 'testuser'@'%' IDENTIFIED BY 'passwd';
GRANT ALTER ROUTINE ON abc1.* TO 'testuser'@'%';
FLUSH PRIVILEGES; 
```

通过使用上述方法（特别是 Db），我无法更改例程。我尝试了所有主机，如 localhost、%、127.0.0.1、本地 ip。我尝试使用工作台更改例程，它是空白的，没有任何错误。

但是 testuser 能够创建例程并能够编辑由 testuser 创建的例程。但是由其他一些用户创建的其他例程无法由 testuser 编辑（两个例程都在同一个数据库中）。

但是当我允许访问所有数据库时：

```
GRANT ALL ON *.* TO 'testuser'@'%'; 
FLUSH PRIVILEGES; 
```

然后 testuser 能够编辑所有例程。请帮我解决这个问题。

谢谢。维杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:34:36.003

您可能需要刷新权限：

```
flush privileges; 
```

或者你可能需要'%'以外的东西（我认为这可能意味着'localhost以外的任何东西'）

我不会在我的工作中创建任何复杂的授权......但在测试系统中，我总是添加 3 个授权（第三个是配置错误的 /etc/hosts 文件，这些文件在某些​​配置不正确的系统上将“localhost”映射到第一个 NIC IP） ：

```
grant all privileges on dbnamehere.* to username@'%' identified by 'passwordhere';
grant all privileges on dbnamehere.* to username@'localhost' identified by 'passwordhere';
grant all privileges on dbnamehere.* to username@'127.0.0.1' identified by 'passwordhere';
update mysql.user set password=OLD_PASSWORD('passwordhere') where user='username';
flush privileges; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-15T15:18:23.200

我遇到了类似的问题，我通过 SQL Workbench 为初级开发人员创建了一个新帐户，在特定模式上具有以下权限： *Alter、Alter Routine、Create、Create Routine、Delete、Execute、Insert、Select、Show View、更新*。

我还从工作台执行了刷新权限以确保应用了最新的权限，但每次他右键单击存储过程并选择**“发送到 Sql 编辑器”-> 过程调用**什么都不会显示。我们尝试更改各种选项，但仍然无法显示。

他能够创建新程序，然后编辑这些程序，但除了调用其他用户编写的现有程序外，他无法编辑或做任何事情。仅供参考，我要补充一点，他没有分配任何数据库管理角色。

在摆弄和研究之后，我有了尝试在 mysql 模式上提供权限的想法，因为该模式具有 proc 表中存储过程的定义。我从赋予所有权限开始并将其缩减为仅对该模式的“选择”权限，之后，开发人员能够右键单击过程和**“发送到 Sql 编辑器”-> 过程调用**以及改变程序。

我不能 100% 确定这是否能完全解决您的问题，但它确实解决了几个问题。

我还要补充一点，我们的安全策略是为用户提供尽可能少的权限以有效地完成他们的工作，因此减少提供的权限数量是需要仔细考虑的事情。

# c - 64位机器上的结构对齐

> ID：10123519
> 
> 赞同：3
> 
> 时间：2012-04-12T12:24:04.310
> 
> 标签：c, 64-bit, alignment

我在 64 位 Linux 机器上有以下结构。

```
struct __wait_queue_head {
          spinlock_t lock;
          struct list_head task_list;
  };

where

typedef struct {
          raw_spinlock_t raw_lock;
  } spinlock_t;

and

struct list_head {
          struct list_head *next, *prev;
  };

raw_spinlock_t is defined as:

typedef struct {
          volatile unsigned int slock;
  } raw_spinlock_t; 
```

现在我想了解 struct __wait_queue_head 在遵循 LP64 标准的 64 位 Linux 机器上的对齐方式。据我所知，自从这个结构的第一个字段即。

```
spinlock_t lock 
```

是一个无符号整数，在 64 位机器上占用 4 个字节，这个结构应该从一个 4 字节对齐的地址开始。但是，我已经看到在真实系统上并非如此。相反，该结构从 8 字节对齐的地址开始，尽管第一个字段的对齐要求将通过 4 字节对齐的地址来满足。基本上，什么控制结构的对齐？请注意，我很清楚结构中字段的填充概念。我发现结构本身的对齐要求令人困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T12:30:41.747

结构的对齐要求是其任何成员的最大对齐要求。在这种情况下，由于`struct list_head`包含指针，所以对齐`struct list_head`为 8 个字节。由于`struct __wait_queue_head`包含 a `struct list_head`，它的对齐方式也是 8 个字节。这是必需的，因为如果结构具有更宽松的对齐要求，那么结构填充将不足以保证成员正确对齐。

# javascript - 制作一个没有图像的光弓之类的东西

> ID：10123521
> 
> 赞同：1
> 
> 时间：2012-04-12T12:24:19.840
> 
> 标签：javascript, html, css

有没有办法制作像灯箱这样的东西，但里面没有图片，只做文字之类的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:27:28.253

存在大量提供该功能的“灯箱”。

例如：[http ://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

您可以在此处查看其中一种样式的一些示例：[http](http://www.jacklmoore.com/colorbox/example1/) ://www.jacklmoore.com/colorbox/example1/ （内联 HTML、AJAX）

# php - 如何使用 fpdf 在单元格内打印单元格

> ID：10123529
> 
> 赞同：3
> 
> 时间：2012-04-12T12:24:55.277
> 
> 标签：php, pdf, fpdf

我正在使用 fpdf 库从 php 代码制作一些 pdf 文档。在那个文档中，我创建了两个这样的单元格

> ```
>  $pdf->Cell(100,100,"Text inside first column",1,0,'L');
>     $pdf->Cell(35,35,'Text inside second column ',1,0,'C'); 
> ```

上面的代码运行良好，输出有两个单元格，第一个单元格的大小为 100x100 ，第二个单元格的大小为 35x35 ，第二个单元格正好位于第一个单元格。

但我需要在第一个单元格内打印第二个卖点 fpdf 有什么办法吗？谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:13:20.223

我不确定你到底想要什么，但也许这个插件可以帮助你做到这一点：

[http://www.interpid.eu/fpdf-table](http://www.interpid.eu/fpdf-table)

另一种方法是移动指针，如下所示：

```
$pdf->Cell(100,100,"Text inside first column",1,0,'L');
$pdf->SetX($pdf->GetX() - 35);
$pdf->Cell(35,35,'Text inside second column ',1,0,'C'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-28T05:13:39.453

在嵌套单元格 X 轴和 Y 轴中，我已经实现了这样

```
`$pdf->Cell(190,20,"",1,0,'L');
$pdf->SetX($pdf->GetX() - 189);
$pdf->Cell(100,10,'First ',2,0,'L');

$pdf->Cell(90,10,'March/2020 ',2,0,'R');
$pdf->SetY($pdf->GetY() +5);
$pdf->Cell(100,10,'MCB,UBl Omni, HBL Konnect, Alfalah , Mobi Cash ',2,0,'L');
$pdf->SetY($pdf->GetY() +5);`enter code here`
$pdf->Cell(139,10,'third text he`enter code here`re ',2,0,'L');
$pdf->Cell(50,10,'Lahore',2,0,'R');` 
```

# struts2 - 选择哪个框架

> ID：10123535
> 
> 赞同：1
> 
> 时间：2012-04-12T12:25:10.527
> 
> 标签：struts2, struts1

我要开发一个网络应用程序。我应该选择哪个框架（struts1 或 struts2）？哪一个更容易理解和编码。在 struts2 中应用 CSS/HTML 困难吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:39:58.247

我已经广泛使用了 Struts1 和 Struts 2。Struts2 比 Struts 1 好得多。Struts 2 是前进的方向。Struts 2 有很多改进。

1.  拦截器的使用。
2.  Pojo 喜欢的动作
3.  没有行动形式。
4.  轻松与其他框架集成，如 spring、dwt 等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:31:35.800

[我删除了关于这是一个过于笼统的问题的部分，因为我误读了最初的问题，对不起...] 使用 struts2，因为他们显然从 Struts1 的缺陷中吸取了教训。他们引入了接口，以便您可以扩展自己的类并使用 Dynaforms 进行表单数据绑定（在 struts 1 中，您必须为应用程序中的每个 f* *** * 表单编写这样的 FormBean）。如果你使用支柱，你也应该使用瓷砖。

另一个绝对值得一看的框架是 Wicket。到目前为止，一切都很好。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:33:12.477

使用struts 2，你也可以将它与spring集成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:31:19.357

我认为struts2更好。请阅读以下文章 [http://www.java-samples.com/showtutorial.php?tutorialid=200](http://www.java-samples.com/showtutorial.php?tutorialid=200)

# redbean - 带有 CI 2.1.0 HMVC 的 RedBeanPhp 熔断器

> ID：10123540
> 
> 赞同：0
> 
> 时间：2012-04-12T12:25:20.087
> 
> 标签：redbean

控制器

```
class User extends MX_Controller{
    function __construct() {
        parent::__construct();
    }
    function index(){
         $r=R::dispense('group');
         $r->GroupName="hh";
         $i=R::store($r);
         echo $i;
         $r->hello();
    }
} 
```

该模型

```
class Model_Group extends RedBean_SimpleModel{
    function __construct() {
        parent::__construct;
    }
    function open(){
        echo "model";
    }
    function update(){
        echo "update";
    }
    function hello() {
        echo "hello";
    }
} 
```

输出它只返回 id 既不是钩子函数（open -update - 等等......）也不是红豆文档中提到的自定义函数（hello）

所以我问出了什么问题或者我应该怎么做才能正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:30:42.920

根据你的代码，我认为你应该加载一个模型来解决这个问题。

例如：

```
 $this->load->model("module_name/model_name") 
```

# php - 无法使用 ipad 下载 pdf

> ID：10123543
> 
> 赞同：1
> 
> 时间：2012-04-12T12:25:35.217
> 
> 标签：php, ipad, codeigniter

我正在使用以下功能下载 pdf 文件，当我从 PC 或笔记本电脑下载它时它工作正常，但是当我使用 ipad 单击下载链接时，它会打开一个包含许多特殊字符的页面，我无法下载该文件。

我的下载功能是

```
public function download() {
    $download_path = $_SERVER['DOCUMENT_ROOT'] . "/import";
$filename = $_GET['file'];
    $file = str_replace("..", "", $filename);
    $file = "$download_path/$file";
if (!file_exists($file))
        die("Sorry, the file doesn't seem to exist.");
    $type = filetype($file);
    header("Content-type: $type");
    header("Content-Disposition: attachment;filename=$filename");
    header('Pragma: no-cache');
    header('Expires: 0');
    readfile($file);
} 
```

关于这个错误的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:36:54.887

大概是这个问题：

```
$type = filetype($file);
header("Content-type: $type"); 
```

从[手册](http://php.net/manual/en/function.filetype.php)

> 可能的值是 fifo、char、dir、block、link、file、socket 和 unknown。

您不想在标题中看到哪些内容。您可能正在寻找：

```
header('Content-type: application/pdf'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:40:35.273

你可能想要**[`finfo_file()`](http://il.php.net/manual/en/function.finfo-file.php)**而不是`filetype()`.

# c++ - 我如何解析 H264 文件和帧

> ID：10123544
> 
> 赞同：7
> 
> 时间：2012-04-12T12:25:36.033
> 
> 标签：c++, c, visual-c++, h.264

H264 文件是 NAL（网络抽象层）单元的流，每个单元编码一个帧（I、B 或 P）。解析此文件并提取大小和检测文件中每个 NAL 单元的结尾以及检测 NAL 单元包含的帧类型的最佳方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-12T12:50:53.570

如果您实际上并未尝试解码帧，则可以通过读取 h.264 字节流并查找 NAL 单元签名来编写一个简单的“解析器”。

以下是您需要了解的内容：

*   NAL 单位起始代码：00 00 01 XY
*   X = IDR 图片 NAL 单位（例如 25、45、65）
*   Y = 非 IDR 图片 NAL 单元（例如 01、21、41、61）

因此，如果您依次找到 3 个字节 [00 00 01]，则很可能它是 NAL 单元的开头。然后您将需要解析接下来的两个字节 [XY] 以找出帧的类型。有关详细信息，请参阅[规范。](http://www-ee.uta.edu/dip/courses/ee5356/H264systems.pdf)

# eclipse - Eclipse 上的 MSSQL JDBC 驱动程序，classnotfound 异常：

> ID：10123545
> 
> 赞同：0
> 
> 时间：2012-04-12T12:25:41.350
> 
> 标签：eclipse, sql-server-2005, jdbc

尝试使用以下代码建立 sql 连接：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
String connectionString = "jdbc:sqlserver://192.168.0.155;user=user;password=****";
Connection conn= DriverManager.getConnection(connectionString);

Statement stmt = conn.createStatement();

ResultSet rs = stmt.executeQuery("select xx from TBL_Test where ID = 1");

String aa = rs.getString("xx");

txtgir.setText(aa); 
```

问题是我一直得到 classnotfound 异常，并且驱动程序被添加到构建路径中...... :( 问候。

# javascript - 在显示表中隐藏列

> ID：10123546
> 
> 赞同：1
> 
> 时间：2012-04-12T12:25:43.467
> 
> 标签：javascript, jsp, struts-1

有什么方法可以隐藏显示表的列，我们有 media="none" 隐藏列。我尝试使用

```
document.getElementById(display_column_name).media="none"; 
```

但它不起作用，我在 javascript 中设置显示列的属性时被卡住了，有什么办法吗。在按钮选择列上是隐藏/显示显示表。

我在列标题上有复选框。我必须隐藏显示表的列。选定的列在按钮单击时被隐藏。

我也尝试过使用 div 标签显示列

```
<div id= "col1" style="display:block">
            <display:column paramId="date_disp" paramName="date_disp"  property="date_disp" title="Date" sortable="true" headerClass="sortable" decorator="com.commons.ColDateDecorator" style="font-family:Arial, Helvetica, sans-serif;font-size: 12px;height: 25;"/>
</div> 
```

和 document.getElementById('col1').style.display="none"; 但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:35:10.137

是要隐藏一个元素还是多个元素？document.getElementsByName 将返回一个元素数组，因此您需要像这样访问它：

> document.getElementsByName(display_column_name)[0].media="none"

如果它只是一个元素并且这个元素有一个 id 考虑使用这个可能：

```
getElementById() 
```

我还假设 display_column_name 是以前定义的变量，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:35:10.743

最好的方法是将 css 显示样式设置为无。

```
document.getElementById("id _of_the_component").style.display = 'none'; 
```

或者您可以使用 jquery 库，但您必须从 jquery.com 下载 jquery 库。使用 script 标签将脚本导入您的页面并执行以下操作

```
$("#id _of_the_component).hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:51:49.380

尝试以下操作：

**HTML：**

```
<html>
    <table>
        <tr>
            <td id="td1">TD1</td>
            <td id="td2">TD2</td>
            <td id="td3">TD3</td>
        </tr>        
    </table>
</html> 
```

**JavaScript：**

```
document.getElementById("td2").style.display = "none"; 
```

演示：http: [//jsfiddle.net/Vishal_Suthar3/kDb8Z/](http://jsfiddle.net/Vishal_Suthar3/kDb8Z/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:25:37.373

Uchenna 是对的，你可以使用 jquery 库

使用脚本标签将脚本导入您的页面

将属性“id”或“class”添加到要隐藏的列

并使用该类或 id 可以隐藏该元素。

例如。如果你有 mantioned id 属性并且 valuse 是“abc”

然后你可以写：

```
$(document).ready(function() 
{
$("#abc").hide();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T09:27:43.240

修改您的显示列，如：

```
<display:column class="abc" paramId="date_disp" paramName="date_disp"  property="date_disp" title="Date" sortable="true" headerClass="sortable" decorator="com.commons.ColDateDecorator" style="font-family:Arial, Helvetica, sans-serif;font-size: 12px;height: 25;"/> 
```

在按钮点击上你可以写：假设你正在使用按钮

```
<input type="submit" value="Submit" id="success" />
then you can use it like :

    $('#success').click(function(){
    $(".abc").hide();   
     }); 
```

# hibernate - JPA javax.activation.DataHandler MappingType

> ID：10123549
> 
> 赞同：1
> 
> 时间：2012-04-12T12:25:57.333
> 
> 标签：hibernate, jpa, orm, mapping, datahandler

我必须将“javax.activation.DataHandler-object”保存在数据库中。

我必须使用哪个 JPA 2.0 注释来保存对象？

这个类的映射文件是什么？

```
 /**
 * <pre>
 * <complexType name="TXLKAORG_SL_DATA_Type">
 *  <complexContent>
 *     <restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       <sequence>
 *         <element name="daten" type="{http://www.w3.org/2001/XMLSchema}base64Binary"/>
 *       </sequence>
 *     </restriction>
 *   </complexContent>
 * </complexType>
 * </pre>     
 */

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "TXLKAORG_SL_DATA_Type", propOrder = { "erstellungsDatum", "daten" })
@Embeddable
public class TXLKAORGSLDATAType implements Serializable
{

@XmlElement(required = true)
@XmlMimeType("application/vnd.vdv.ah.txlkaorglist.sl.zip")
protected DataHandler daten;

 ...
 ...
 } 
```

# ruby-on-rails - 使用两个模型的永久链接进行路由？

> ID：10123552
> 
> 赞同：0
> 
> 时间：2012-04-12T12:26:09.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我有 2 个模型，看起来像这样：

```
Category:
id
name
permalink 
```

例如 1 "Foo Bar" foo-bar

```
Item: 
id
title
permalink
category_id 
```

所以这两个模型之间存在关联。现在我想实现以下路线：

```
http://www.bla.com/Category_permalink/Item_ID/Item_permalink 
```

我现在拥有的是以下内容，这是不正确的：

```
match ':category_name/:item_id/:item_permalink' => 'items#show', :as => :item 
```

这条线没有按预期工作。这里有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:32:56.457

这听起来更像是您尝试访问路由的方式而不是路由本身的问题。您可以运行 rake 路线并在此处发布响应吗？相关的控制器和视图代码也可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:35:36.520

我不太确定你想要实现什么，但我认为你总是可以`item_path(:category_name => item.category.name, :item_id => item.id, :item_permalink => item.permalink)`用来获取该链接。

# html - 在 HTML5 中显示单个投资组合项目的最语义化方式是什么？

> ID：10123553
> 
> 赞同：5
> 
> 时间：2012-04-12T12:26:14.640
> 
> 标签：html

当然有几个关于正确使用 html5 <figure> 元素的讨论和问题，但没有一个对我的问题有具体的答案。

这更像是一个关于显示投资组合项目的一般问题。当然，你可以这样做：

```
<ul>
  <li>
    <h1>Project Title</h1>
    <img src="#"/>
    <p>a short description</p>
  </li>
</ul> 
```

或者

```
<div class="portfolio-item">
  <h1>Project Title</h1>
  <img src="#"/>
  <p>a short description</p>
</div> 
```

当然有十几种其他方式来描述单个项目，但我想知道它是否是**有效**的和**语义**的 HTML5，如果你将整个项目包装到一个 <article> 元素中并将图片包装到一个 <figure> 元素中。考虑以下示例

```
<article class="portfolio-item">
  <h1>Project Title</h1>
  <figure>
    <img src="#">
    <figcaption>a short description</figcaption>
  </figure>
  <a href="#"> View details</a>
</article> 
```

如果不是，那么显示它们的最语义化方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:02:11.717

我*个人*认为使用图形对描述/图像来说不是一个好主意。虽然我会说您以有效的方式使用它，但我不一定将其定义为带有标题的图形，因此我发现调用 so 并不是特别语义化。我觉得 figure/figcaption 标签最好保留用于图表之类的东西。在您的情况下，我认为您最好将图像单独放置，并将简短描述放在`<p>`标签中（就像您在第二个示例中所做的那样）。

我还将标题放在`<header>`标签内。

这就是我的做法，作为文章列表：

```
<ul>
  <li>
    <article class="portfolio-item">
      <header>
        <h1>Project Title</h1>
      </header>
      <img src="#">
      <p>a short description</p>
      <a href="#"> View details</a>
    </article>
  </li>
  <li>
    etc...
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:42:47.247

您的 figure 和 figcaption 元素的布局是正确的（[http://html5doctor.com/the-figure-figcaption-elements/](http://html5doctor.com/the-figure-figcaption-elements/)）并将其包装在文章元素中是正确的。这是一个独立的部分，可以从页面中取出并且仍然有意义（[http://html5doctor.com/the-article-element/](http://html5doctor.com/the-article-element/)）

# node.js - 关于更新我的 node.js 游戏的问题

> ID：10123555
> 
> 赞同：7
> 
> 时间：2012-04-12T12:26:15.743
> 
> 标签：node.js, multiplayer, lag

我正在为服务器使用 node.js 和为客户端嵌入 HTML5 画布中的 .js 文件制作一个小游戏。每个玩家都拥有和对象，他们可以用箭头键移动。

现在我做了两种不同的更新游戏的方式，一种是在玩家每次改变时发送新的位置。它有效，但我的服务器必须每秒处理大约 60 个 x/y 对（客户端的更新速率为 30/秒，并且有 2 个玩家不停地移动）。第二种方法是只在玩家对象改变方向速度时发送新的位置和速度/方向，所以基本上在其他客户端上，玩家的移动是使用上次更新的方向/速度插值的。我的服务器只需要处理很少的 x/y7speed/direction 数据包，但是当数据包到达时，我的客户经历了一点延迟，因为插值位置通常与数据包中写入的实际位置有一点距离。

现在我的问题是：你会推荐哪种方法？我应该如何对这两种方法进行延迟补偿？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:06:42.547

如果您的延迟较低，请从绘制对象的位置向上插入新位置。在低延迟情况下，它并没有太大的区别。

如果你有高延迟，你可以实现一种 EPIC。 [http://www.mindcontrol.org/~hplus/epic/](http://www.mindcontrol.org/~hplus/epic/)

您还可以检查它是如何在 Browser-Quest 中完成的。 [https://github.com/mozilla/BrowserQuest](https://github.com/mozilla/BrowserQuest)

祝你好运！

# ios - 如何集成ELCImagePickerController？

> ID：10123560
> 
> 赞同：2
> 
> 时间：2012-04-12T12:26:28.027
> 
> 标签：ios, ios4, alassetslibrary

我在我的应用程序中使用 ELCImagePickerController。根据从 Github 下载的演示，我使用的代码是

```
ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc]    initWithNibName:@"ELCAlbumPickerController" bundle:[NSBundle mainBundle]];    

ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];

[albumController setParent:elcPicker];

[elcPicker setDelegate:self];

ELCImagePickerDemoAppDelegate *app = (ELCImagePickerDemoAppDelegate *)[[UIApplication sharedApplication] delegate];

[app.viewController presentModalViewController:elcPicker animated:YES];

[elcPicker release];
[albumController release]; 
```

现在它不会工作，因为 ELCImagePickerDemoAppDelegate 不是我的应用程序的 AppDelegate。那么将这个图像选择器集成到我的应用程序的正确代码应该是什么。我还尝试将 UIViewController 子类添加到我的应用程序并调用

```
[self presentModalViewController:elcPicker animated:YES]; 
```

但这不会显示选择器并记录一条消息

```
deallocing ELCImagePickerController 
```

谁能指导我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:34:40.177

只需按照以下操作

在 .h 文件中添加这个

```
#import "ELCImagePickerController.h" 
```

并且符合`ELCImagePickerControllerDelegate`协议

并在 .m 文件中将其添加到顶部

```
#import "ELCImagePickerController.h"
#import "ELCAlbumPickerController.h" 
```

并在要显示选择器的位置添加以下代码

```
ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc] initWithNibName:@"ELCAlbumPickerController" bundle:[NSBundle mainBundle]];    
    ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];
    [albumController setParent:elcPicker];
    [elcPicker setDelegate:self];
    [self presentModalViewController:elcPicker animated:YES]; 
```

并且还包括所需的协议方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:33:22.933

尝试不使用 initWithNibName ...

```
#import "ELCImagePickerController.h"
#import "ELCAlbumPickerController.h"

ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc] init];
    ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];
[albumController setParent:elcPicker];
    [elcPicker setDelegate:self];
    [self presentModalViewController:elcPicker animated:YES]; 
```

# magento - Magento Paypal 和 CCAvenue 集成

> ID：10123565
> 
> 赞同：0
> 
> 时间：2012-04-12T12:26:58.243
> 
> 标签：magento, paypal, ccavenue

在我的 magento 中，当我将美元作为基础货币时，paypal 可以正常工作，但只需 500 卢比。产品 CCavenue 只需支付 10 卢比（我认为它需要美元 Amt. 500Rs=10USD）。

我还尝试将基础货币作为 INR，在这种情况下 CCAvenue 工作正常，但 Paypal 显示货币不支持错误。

主要的是，我想要 Paypal 和 CCavnue... 希望有人帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:19:53.890

我也遇到过类似的情况。

由于印度不支持 paypal 付款，因此将货币设置为 INR 将禁用 paypal 付款方式！你是对的，它以美元计价。

您需要做的是仅以美元添加产品价格，保持基础货币为美元，但显示货币为 INR。这样，网站将仅以 INR 显示价格，并且两种付款方式都可以使用

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T21:36:29.523

你可以看看这个。

[http://www.magentocommerce.com/wiki/3__-_store_setup_and_management/payment/tweak_paypal_standard_for_non-supported_base_currency](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/payment/tweak_paypal_standard_for_non-supported_base_currency)

您可以为 INR 启用 paypal :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T23:53:17.267

如果 USD CC Avenue 不起作用并且基础货币为 INR，则这将不能用作基础货币，PayPal 将显示错误。如果可以为每个商店视图/语言（更高的计划）更改基本货币，那么它会起作用。

# oracle - 在包中使用用户定义的聚合函数

> ID：10123569
> 
> 赞同：0
> 
> 时间：2012-04-12T12:27:29.590
> 
> 标签：oracle, package, aggregate-functions

我的甲骨文版本是 10.2。我有一个用户定义的聚合函数，它使用这样的对象：

```
create type strcat_type as object ( 
cat_string varchar2(4000), 
static function ODCIAggregateInitialize(cs_ctx In Out strcat_type) return number, 
member function ODCIAggregateIterate(self In Out strcat_type,value in varchar2) return           
number, 
member function ODCIAggregateMerge(self In Out strcat_type,ctx2 In Out strcat_type)       
return number, 
member function ODCIAggregateTerminate(self In Out strcat_type,returnValue Out   
varchar2,flags in number) return number 
) 
```

但是当我试图把这个对象放在一个包里时，

```
create or replace package common is
type strcat_type as object ( 
cat_string varchar2(4000), 
static function ODCIAggregateInitialize(cs_ctx In Out strcat_type) return number, 
member function ODCIAggregateIterate(self In Out strcat_type,value in varchar2) return           
number, 
member function ODCIAggregateMerge(self In Out strcat_type,ctx2 In Out strcat_type)       
return number, 
member function ODCIAggregateTerminate(self In Out strcat_type,returnValue Out   
varchar2,flags in number) return number 
)
end common; 
```

它导致 pls-00540，pls-00707，我如何使用这个对象创建一个包？以及如何将我的类型体和所有这些静态和成员函数放在包体中？

我的类型是这样的：

```
create type body strcat_type is 
static function ODCIAggregateInitialize(cs_ctx IN OUT strcat_type) return number 
is 
begin 
  cs_ctx := strcat_type( null ); 
  return ODCIConst.Success; 
end; 

member function ODCIAggregateIterate(self IN OUT strcat_type, 
                                   value IN varchar2 ) 
return number 
is 
begin 
   self.cat_string := self.cat_string || ','|| value; 
   return ODCIConst.Success; 
end; 

member function ODCIAggregateTerminate(self IN Out strcat_type, 
                                     returnValue OUT varchar2, 
                                     flags IN number) 
return number 
is 
begin 
  returnValue := ltrim(rtrim(self.cat_string,','),','); 
  return ODCIConst.Success; 
end; 

member function ODCIAggregateMerge(self IN OUT strcat_type, 
                                 ctx2 IN Out strcat_type) 
return number 
is 
begin 
  self.cat_string := self.cat_string || ',' || ctx2.cat_string; 
  return ODCIConst.Success; 
end;
end; 
```

我的功能是这样的：

```
CREATE or replace 
FUNCTION strcat(input varchar2 ) 
RETURN varchar2 
PARALLEL_ENABLE AGGREGATE USING strcat_type; 
```

如何将所有这些打包到一个包中，当我需要聚合时，我只需输入“common.strcat(colName)”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:43:39.237

OBJECT 类型是**SQL**对象（如表、索引...），它们不能在包中定义（就像您不会在包中定义索引或视图一样）。

请参阅相关的 SO 问题：[可能在 PL/SQL 中创建 Oracle 数据库对象类型？](https://stackoverflow.com/questions/1069176/possible-to-create-oracle-database-object-types-inside-of-pl-sql)

# android - APV pdf 阅读器。安装、解压和原生库问题

> ID：10123570
> 
> 赞同：3
> 
> 时间：2012-04-12T12:27:37.540
> 
> 标签：android, shell, pdf, cygwin, mupdf

好的，所以我已经安装了 APV 和/或 MuPDF 工作所需的一切，但它仍然崩溃。我不太擅长使用 shell 安装程序和所有这些，但我确实尽可能地遵循了自述文件中包含的说明。

当我现在尝试运行程序时（APV）它工作正常，直到我尝试打开一个 pdf 文件，我得到错误：

```
FATAL EXCEPTION: main
java.lang.ExceptionInInitializerError
cx.hell.android.pdfview.OpenFileActivity.getPDF(OpenFileActivity.java:442)
cx.hell.android.pdfview.OpenFileActivity.startPDF(OpenFileActivity.java:403)
cx.hell.android.pdfview.OpenFileActivity.onCreate(OpenFileActivity.java:169)
android.app.Activity.performCreate(Activity.java:4465)
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
android.app.ActivityThread.access$600(ActivityThread.java:123)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
android.os.Handler.dispatchMessage(Handler.java:99)
android.app.ActivityThread.main(ActivityThread.java:4424)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:511)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.UnsatisfiedLinkError: Couldn't load pdfview2: findLibrary returned null
java.lang.Runtime.loadLibrary(Runtime.java:365)
java.lang.System.loadLibrary(System.java:535) at cx.hell.android.pdfview.PDF.<clinit>(PDF.java:15) 
```

我已经在 D:\Android 中安装了所有内容，其中有以下子文件夹： apa​​che-ant-1.8.3 android-ndk-r7c android-sdk Cygwin apv（包含：pdfview\jni\ 库，如 freetype、mupdf、jpeg、 openjpg 等也是另一个版本的 android-ndk-r7c)

我已经尝试运行脚本文档中包含的所有构建文件，例如：build-native、scale-images、ndk-build！[在此处输入图像描述][2] 这是 build-native 完成之前的屏幕转储.

```
succesfull stuff happening

cp: cannot create regular file '../jni/freetype/include/freetype/config/ftoption.h': Permission denied
cp: cannot create regular file '../jni/freetype/include/freetype/config/sed008052': Permission denied
cp: cannot create regular file '../jni/freetype/include/freetype/config/sed007576': Permission denied
D:\Android\apv\pdfview\scripts\build-native.sh: line 31: gcc: command not found
D:\Android\apv\pdfview\scripts\build-native.sh: line 34: ../../scripts/fontdumpt: No such file or directory 
```

老实说，我不知道如何攻击这个和教程：[http](http://mupdf.com/repos/mupdf/android/ReadMe.txt) ://mupdf.com/repos/mupdf/android/ReadMe.txt对我没有多大帮助。如果其他人有任何使用此功能的经验，那么我将非常感谢您提供的任何帮助。

我正在制作的应用程序将是开源的，因此通过帮助我，您以后可以对我的代码大笑！:)

另外，对于糟糕的文字感到抱歉，但在我获得 10 名声望之前无法发布图片

谢谢，安德斯

# vb.net - 在 asp.Net MVC3 中上传文件

> ID：10123572
> 
> 赞同：0
> 
> 时间：2012-04-12T12:27:42.580
> 
> 标签：vb.net, asp.net-mvc-3, linq, razor

我正在尝试实现文件上传系统，但我真的不知道该怎么做。

我正在寻找最简单的方法来做到这一点。经过长时间的研究，我找到了这些解释。

[forums.asp.net/t/1678157.aspx/2/10](http://forums.asp.net/t/1678157.aspx/2/10)

所以，这是我在视图中所做的事情：

```
 @Code
     Dim fileName As String = ""
     If (IsPost) Then
         Dim uploadedFile = Request.Files(0)
         fileName = Path.GetFileName(uploadedFile.FileName)
         fileSavePath = Server.MapPath("~/Content/Uploads/" + fileName)
         uploadedFile.SaveAs(fileSavePath)
     End If
 End Code

 <form action="" method="post">
    @FileUpload.GetHtml(
         initialNumberOfFiles := 1,
         allowMoreFilesToBeAdded := False,
         includeFormTag := True,
         uploadText := "Upload")
 </form> 
```

问题：GetHtml 不是“System.Web.UI.WebControls.FileUpload”的成员 我该怎么做才能解决这个问题？这是处理文件上传的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:58:29.297

一个问题可能是，因为您忘记了`enctype="multipart/form-data"`表单中的帖子。

那么也许你的上传插件没有正确安装。我假设您正在使用 WebMatrix，所以[这篇文章](http://evonet.com.au/webmatrix-uploading-images-with-the-fileupload-helper/)可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:29:45.740

Scott Hanselman 有一篇很棒的文章在[这里实现这个](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)

代码在 C# 中，但它应该让你开始

# linux - unix - 字符出现次数的细分

> ID：10123576
> 
> 赞同：1
> 
> 时间：2012-04-12T12:28:12.730
> 
> 标签：linux, perl, bash, shell, unix

是否有内置命令可以执行此操作，或者是否有人对执行此操作的脚本有任何运气？

我正在寻找有多少行有多少特定字符出现的计数。（按出现次数降序排列）

例如，使用此示例文件：

```
gkdjpgfdpgdp
fdkj
pgdppp
ppp
gfjkl 
```

建议输入（用于“p”字符）

bash/perl some_script_name "p" 示例文件

期望的输出：

```
occs     count
4          1
3          2
0          2 
```

更新：您将如何编写一个解决方案来处理诸如“gd”之类的 2 个字符的字符串，而不仅仅是诸如 p 之类的特定字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:34:07.260

```
$ sed 's/[^p]//g' input.txt | awk '{print length}' | sort -nr | uniq -c | awk 'BEGIN{print "occs", "count"}{print $2,$1}' | column -t
occs  count
4     1
3     2
0     2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:38:19.600

您可以将所需的字符作为 awk 的字段分隔符，然后执行以下操作：

```
awk -F 'p' '{ print NF-1 }' | 
  sort -k1nr | 
    uniq -c | 
      awk -v OFS="\t" 'BEGIN { print "occs", "count" } { print $2, $1 }' 
```

对于您的示例数据，它会产生：

```
occs    count
4       1
3       2
0       2 
```

如果要计算多字符串的出现次数，只需将所需的字符串作为分隔符，例如，`awk -F 'gd' ...`或`awk -F 'pp' ...`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T13:01:42.207

```
#!/usr/bin/env perl

use strict; use warnings;

my $seq = shift @ARGV;
die unless defined $seq;

my %freq;

while ( my $line = <> ) {
    last unless $line =~ /\S/;        
    my $occurances = () = $line =~ /(\Q$seq\E)/g;
    $freq{ $occurances } += 1;
}

for my $occurances ( sort { $b <=> $a} keys %freq ) {
    print "$occurances:\t$freq{$occurances}\n";
} 
```

如果你想要简短，你可以随时使用：

```
#!/usr/bin/env perl
$x=shift;/\S/&&++$f{$a=()=/(\Q$x\E)/g}while<>
;print"$_:\t$f{$_}\n"for sort{$b<=>$a}keys%f; 
```

或者，，`perl -e '$x=shift;/\S/&&++$f{$a=()=/(\Q$x\E)/g}while<>;print"$_:\t$f{$_}\n"for sort{$b<=>$a}keys%f' inputfile`但现在我越来越傻了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T13:17:00.223

纯重击：

```
declare -a count

while read ; do
  cnt=${REPLY//[^p]/}               # remove non-p characters
  ((count[${#cnt}]++))              # use length as array index
done < "$infile"

for idx in ${!count[*]}             # iterate over existing indices
do echo -e "$idx ${count[idx]}"
done | sort -nr 
```

根据需要输出：

```
4 1
3 2
0 2 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T13:34:12.870

可以在一个 gawk 进程中完成（好吧，使用排序协进程）

```
gawk -F p -v OFS='\t' '
    { count[NF-1]++ }
    END {
        print "occs", "count"
        coproc = "sort -rn"
        for (n in count)
            print n, count[n] |& coproc
        close(coproc, "to")
        while ((coproc |& getline) > 0)
            print
        close(coproc)
    }
' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-12T15:38:01.953

迄今为止最短的解决方案：

```
perl -nE'say tr/p//' | sort -nr | uniq -c |
   awk 'BEGIN{print "occs","count"}{print $2,$1}' |
      column -t 
```

对于多个字符，使用正则表达式模式：

```
perl -ple'$_ = () = /pg/g' | sort -nr | uniq -c |
   awk 'BEGIN{print "occs","count"}{print $2,$1}' |
      column -t 
```

这个处理重叠匹配（例如，它在“pppp”中找到 3 个“pp”而不是 2 个）：

```
perl -ple'$_ = () = /(?=pp)/g' | sort -nr | uniq -c |
   awk 'BEGIN{print "occs","count"}{print $2,$1}' |
      column -t 
```

* * *

原始的神秘但简短的纯 Perl 版本：

```
perl -nE'
   ++$c{ () = /pg/g };
}{
   say "occs\tcount";
   say "$_\t$c{$_}" for sort { $b <=> $a } keys %c;
' 
```

* * *

# vbscript - ResGen.exe 的 VBscript 日志响应

> ID：10123577
> 
> 赞同：0
> 
> 时间：2012-04-12T12:28:14.070
> 
> 标签：vbscript, logfile, resgen

我正在使用 VBScript 来使用 ResGen.exe 生成资源文件，需要收集 ResGen 的错误消息并将其写入文件中，控制了文件写入的部分（在此处显示的脚本中不存在，但我知道怎么做）

```
'' Folder that contains the files 
folderpath = "C:\Users\Administrator\Desktop\Author\author\"
'Destination folder from generated files
destfolder = "C:\Users\Administrator\Desktop\Author\author\"
'Folder contains the text file with list of files names
listfolder = "C:\Users\Administrator\Desktop\Author\"
listfile = listfolder + "list.txt"
logfile = listfolder + "log.txt"

resgen = "ResGen.exe /compile"

Set objShell = CreateObject("WScript.Shell")

Const ForReading = 1
Set objFSO = CreateObject("Scripting.FileSystemObject")
Wscript.echo listfile
Set objFile = objFSO.OpenTextFile(listfile, ForReading)
Wscript.echo "Reading file"
Do While objFile.AtEndOfStream = False
    strLine = objFile.ReadLine
    cmdexec = Chr(34) + folderpath + strLine + "resx" + Chr(34) + " " + Chr(34) + destfolder + strLine + "resources" + Chr(34)
    execommand = resgen + " " + cmdexec 
    objShell.Run execommand,1,TRUE   
Loop
objFSO.Close 
```

在 objShell.Run 行之后，我需要放置什么来保存该命令的响应？我尝试在命令后添加“>>”C:\log.txt“”，但不会生成资源文件，仅将响应保存在 txt 文件中。

希望我已经正确解释。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:03:32.997

您可以使用“ **Exec** ”方法获取**WshScriptExec**对象，并使用它的 StdOut 来获取命令的响应，如下所示：

```
'' Folder that contains the files 
folderpath = "C:\Users\Administrator\Desktop\Author\author\"
'Destination folder from generated files
destfolder = "C:\Users\Administrator\Desktop\Author\author\"
'Folder contains the text file with list of files names
listfolder = "C:\Users\Administrator\Desktop\Author\"
listfile = listfolder + "list.txt"
logfile = listfolder + "log.txt"

resgen = "ResGen.exe /compile"

Set objShell = CreateObject("WScript.Shell")

Const ForReading = 1
Set objFSO = CreateObject("Scripting.FileSystemObject")
Wscript.echo listfile
Set objFile = objFSO.OpenTextFile(listfile, ForReading)
Wscript.echo "Reading file"
Do While objFile.AtEndOfStream = False
    strLine = objFile.ReadLine
    cmdexec = Chr(34) + folderpath + strLine + "resx" + Chr(34) + " " + Chr(34) + destfolder + strLine + "resources" + Chr(34)
    execommand = resgen + " " + cmdexec 
    '***************************************
    Set oExec = objShell.Exec(execommand)
    Do While oExec.Status = 0
        WScript.Sleep 1000
    Loop
    WScript.Echo oExec.StdOut.ReadLine
    '***************************************
Loop
objFSO.Close 
```

# mysql - 如何防止重复记录进入mysql？

> ID：10123578
> 
> 赞同：-1
> 
> 时间：2012-04-12T12:28:19.977
> 
> 标签：mysql, unique, duplicate-data

我有一个名称和一个日期条目。

如果名称相同，我如何创建一个唯一的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:00:35.990

您可以在（名称，日期）上创建唯一索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:54:22.590

检查数据库中是否存在可用的名称_日期组合......在数据库中插入新记录之前......

如果条目存在，则显示警报框，否则输入记录

# netty - 向 netty telnet 示例添加身份验证

> ID：10123588
> 
> 赞同：2
> 
> 时间：2012-04-12T12:29:14.070
> 
> 标签：netty

我对 Netty 和 Java 完全陌生，但是今天下午我设法创建了一个基于 Netty telnet 示例的聊天服务器。它工作得很好，我有'/'斜杠命令工作，所以人们可以做一些事情，比如设置他们的名字，我目前存储在 ctx->setAttachment(name) 中。

我有一个后端数据库服务器，我想将它们连接起来，这样我就可以通过这种方式获取它们的名称，但我需要先为每个用户添加身份验证。我知道我可以用更多的斜杠命令来做到这一点。但我想看看是否可以使用事件链中的处理程序来做到这一点。有一个处理程序来检查用户是否经过身份验证，如果没有，则执行验证他们的逻辑。然后以某种方式存储它们经过身份验证。如果他们通过了身份验证，它会让我当前的聊天处理程序代替它工作。

谁能提供一些这样做的链接或提示？我现在对 Netty 的了解非常基础。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:07:26.160

这真的取决于.. 例如，您可以有一个自定义的 SimpleChannelUpstreamHandler 来处理身份验证并在完成后将其删除。

像这样的东西：

```
public class AuthHandler extends SimpleChannelUpstreamHandler {

    @Override
    public void messageReceived( ChannelHandlerContext ctx, MessageEvent e) throws Exception {
        if (auth(e)) {
            // remove handler after auth was done
            ctx.getPipeline().remove(this);
        }
    }

    // Returns true if auth was successfully
    private boolean auth(MessageEvent e) {
        ....
    }
} 
```

# c++ - 编译时的单例初始化

> ID：10123592
> 
> 赞同：3
> 
> 时间：2012-04-12T12:29:21.980
> 
> 标签：c++, c++11

我只是在想新的 C++11 类内成员初始化器是否可用于在编译时初始化单例，这可能是我应用程序中某些管理器类的加速：

```
class CSingleton
{
public:
    CSingleton(void) {}
    ~CSingleton(void) {}
    static const CSingleton* GetInstance(void)
    {
        return Instance;
    }

    bool Foo1(int x);
    bool Foo2(int y);
private:
    static constexpr CSingleton *Instance = new CSingleton();
} 
```

问题是这会导致以下错误：

```
Line of Instance declaration:    error: invalid use of incomplete type 'class test::CSingleton'
First Line of class declaration: error: forward declaration of 'class test::CSingleton' 
```

有没有办法在编译时用这种或另一种方法初始化单例？

[我在 MacOSX10.7（和 Ubuntu）上使用 GCC4.7 并设置了 -std=c++0x 标志]

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T12:33:36.643

在类的 .h 文件成员中：

```
static CSingleton s_Instance; 
```

在 .cpp 文件中，在 include 之后的开头

```
CSingleton::s_Instance = CSingleton(); 
```

这是编译时的初始化。使用 new - 这是运行时的初始化。正式地，它们都在编译时初始化。

# sql - 日期操作作为文本字段

> ID：10123593
> 
> 赞同：2
> 
> 时间：2012-04-12T12:29:23.017
> 
> 标签：sql, ms-access

我使用 Access 2010 作为 SQL Server 2008 上数据库的前端。我有一个存储为 nvarchar(50) 的日期字段。我在文本字段 DateHr 中有以下值`12/04/11 16:49:23`，它应该转换为`April 11, 2012 4:49 PM`（与创建记录的日期和时间一样。）。

我无法将字段的数据类型更改为 DateTime，因为它更加混乱了日期（`Ex. 12/4/2011 4:49:23 PM`）。我无法更改输入记录的方式。

我需要以“mm/dd/yy”格式显示此字段，并且能够以这种格式执行 where 子句。

我尝试了以下只是为了查看它是否正确显示，但 dtDate 正在显示`11/12/04`：

`Select (Format(CDate([DateHr]),"yy/mm/dd")) as dtDate`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:05:10.170

如果您需要在 access 中进行转换，那么您可以尝试以下任一方法：

```
Select Mid([DateHr],4,2) & "/" & Mid([DateHr],1,2) & "/" & Mid([DateHr],7,2) as dtDate 
```

我认为这将为您提供字符串格式的日期，否则您可以尝试以下操作以获取有效的日期格式：

```
Select Format(DateSerial(Mid([DateHr],7,2),Mid([DateHr],4,2),Mid([DateHr],1,2)),"MM/DD/YYYY") as dtDate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:43:39.083

创建一个 SQL Server 视图以将日期文本的年份部分扩展为 4 位数字。然后`SELECT CDate([DateHr]) AS dtDate FROM YourView`应该从访问端工作。但是，让视图将日期文本转换为实际日期类型可能会更好......然后您可以直接从 Access 使用它，而无需`CDate()`.

# android - textview中的数字计数动画

> ID：10123599
> 
> 赞同：2
> 
> 时间：2012-04-12T12:29:45.810
> 
> 标签：android

我正在android中开发一个游戏应用程序。我对记分卡的实施感到震惊。我想在文本视图中显示分数，因为数字不断计算移动。例如：假设用户越过一个障碍并且该障碍的得分是200。那么记分卡中的数字应该从0到200平稳地计数，然后将停止在200。我在papiJump的记分卡中看到了这种类型的动画。

请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-26T10:17:51.623

```
ValueAnimator animator   = ValueAnimator.ofInt(int start, int end);
              animator.setDuration(2000);
              animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
                    public void onAnimationUpdate(ValueAnimator animation) {
                        textView.setText(animation.getAnimatedValue().toString());
                    }
                });

                animator.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-22T12:08:56.553

```
public void animateTextView(int initialValue, int finalValue, final TextView textview)
 {
  DecelerateInterpolator decelerateInterpolator = new DecelerateInterpolator(0.8f);
        int start = Math.min(initialValue, finalValue);
        int end = Math.max(initialValue, finalValue);
        int difference = Math.abs(finalValue - initialValue);
        Handler handler = new Handler();
        for (int count = start; count <= end; count++) {
            int time = Math.round(decelerateInterpolator.getInterpolation((((float) count) / difference)) * 100) * count;
            final int finalCount = ((initialValue > finalValue) ? initialValue - count : count);
            handler.postDelayed(new Runnable() {
                @Override
                public void run() {
                    textview.setText(finalCount + "");
                }
            }, time);
        }
    } 
```

# opengl - OpenGL：从 FrameBuffer 读取像素以取整到 255 (0xFF)

> ID：10123601
> 
> 赞同：1
> 
> 时间：2012-04-12T12:29:50.713
> 
> 标签：opengl, framebuffer, picking

我正在尝试通过将 vao id 打包到 RGBA 并将其渲染到屏幕外缓冲区来实现对象拾取，然后我尝试使用缓冲区对象读取该缓冲区。

我通过创建纹理和 z-buffer RenderBuffer 对象然后将它们附加到 FrameBuffer 对象来渲染到屏幕外缓冲区：

```
/* create a framebuffer object */ 
glGenFramebuffers(1, &fbo);     
/* attach the texture and the render buffer to the frame buffer */ 
glBindFramebuffer(GL_FRAMEBUFFER, fbo); 

/* generate a texture id */ 
glGenTextures(1, &tex); 
/* bind the texture */ 
glBindTexture(GL_TEXTURE_2D, tex); 
/* create the texture in the GPU */ 
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, WINDOW_SIZE_X, WINDOW_SIZE_Y 
    , 0, GL_RGBA, GL_UNSIGNED_BYTE, nullptr); 

/* set texture parameters */ 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 

/* unbind the texture */ 
glBindTexture(GL_TEXTURE_2D, 0); 

/* create a renderbuffer object for the depth buffer */ 
glGenRenderbuffers(1, &rbo); 
/* bind the texture */ 
glBindRenderbuffer(GL_RENDERBUFFER, rbo); 
/* create the render buffer in the GPU */ 
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT 
    , WINDOW_SIZE_X, WINDOW_SIZE_Y); 

/* unbind the render buffer */ 
glBindRenderbuffer(GL_RENDERBUFFER, 0);

/* attach the texture and the render buffer to the frame buffer */ 
glFramebufferTexture(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, tex, 0); 
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT 
    , GL_RENDERBUFFER, rbo); 

// check the frame buffer 
if (glCheckFramebufferStatus( 
    GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
        std::cout << "Framebuffer status not complete" << '\n';
}
/* handle an error : frame buffer incomplete */ 
/* return to the default frame buffer */ 
glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

我还生成了一个像素缓冲区对象，以便在渲染完成后从 FrameBuffer 中读取：

```
 /* generate the pixel buffer object */ 
glGenBuffers(1,&pbo);     
glBindBuffer(GL_PIXEL_PACK_BUFFER, pbo); 
glBufferData(GL_PIXEL_PACK_BUFFER, WINDOW_SIZE_X * WINDOW_SIZE_Y * 4, nullptr, GL_STREAM_READ); 
/* to avoid weird behaviour the first frame the data is loaded */ 
glReadPixels(0, 0, WINDOW_SIZE_X, WINDOW_SIZE_Y, GL_BGRA, GL_UNSIGNED_BYTE, 0); 
```

然后在我的渲染循环中绑定它并渲染到屏幕外的FrameBuffer：

```
 GLubyte red, green, blue, alpha; 

/* bind the frame buffer */ 
glBindFramebuffer(GL_FRAMEBUFFER, fbo); 

/* clear the frame buffer */ 
glClearColor(0,0,0,0); 
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 

/* select the shader program */ 
glUseProgram(pickProgram); 
/* set the object color */ 

/*alpha = house.vaoId & 0xFF; 
blue = (house.vaoId >> 8) & 0xFF; 
green = (house.vaoId >> 16) & 0xFF; 
red = (house.vaoId >> 24) & 0xFF; */

GLuint objectId = 5;
alpha = objectId & 0xFF; 
blue  = (objectId >> 8) & 0xFF; 
green = (objectId >> 16) & 0xFF; 
red   = (objectId >> 24) & 0xFF; 

//Upload the packed RGBA values to the shader   
glUniform4f(baseColorUniformLocation, red, green ,blue, alpha);     

    //prepare to draw the object
pvm = projectionMatrix*viewMatrix*house.modelMatrix;
glUniformMatrix4fv(offScreenMatrixUniformLocation, 1, GL_FALSE, glm::value_ptr(pvm));

/* draw the object*/ 
glBindVertexArray(house.getVaoId());
glDrawRangeElements(GL_TRIANGLES,0,42,42,GL_UNSIGNED_SHORT,NULL);
glBindVertexArray(0);

//check that our framebuffer is ok
if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
std::cout << "Framebuffer Error" << '\n';
}

GLuint temp;
    //get the object id from the read pixels
temp = get_object_id(); <--- this function is explained later

/* return to the default frame buffer */
glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

渲染到屏幕外缓冲区的片段着色器非常简单：

```
#version 420
uniform vec4 BaseColor; 
layout(location=0) out vec4 fragColor;

void main() 
{ 
 fragColor = BaseColor; 
} 
```

这是在离屏渲染期间调用的函数，用于从帧缓冲区中提取打包的 RGBA：

```
GLuint Engine::get_object_id() 
{ 
static int frame_event = 0; 
GLuint object_id; 
int x, y; 
GLuint red, green, blue, alpha, pixel_index; 
//GLuint read_pbo, map_pbo;
GLubyte* ptr; 

/* read one pixel buffer */ 
glBindBuffer(GL_PIXEL_PACK_BUFFER, pbo_a); 
/* map the other pixel buffer */  
    ///////////////////// NOTE :5th argument, BGRA or RGBA, doesn't make a difference right?
glReadPixels(0, 0, WINDOW_SIZE_X, WINDOW_SIZE_Y, GL_BGRA, GL_UNSIGNED_BYTE, 0);
ptr = (GLubyte*)glMapBuffer(GL_PIXEL_PACK_BUFFER, GL_READ_WRITE); 
/* get the mouse coordinates */ 
/* OpenGL has the {0,0} at the down-left corner of the screen */ 
glfwGetMousePos(&x, &y); 
y = WINDOW_SIZE_Y - y; 
object_id = -1; 
if (x >= 0 && x < WINDOW_SIZE_X && y >= 0 && y < WINDOW_SIZE_Y){ 
//////////////////////////////////////////
    //I have to admit I don't understand what he does here
///////////////////////////////////////////
    pixel_index = (x + y * WINDOW_SIZE_X) * 4; 
    blue = ptr[pixel_index]; 
    green = ptr[pixel_index + 1]; 
    red = ptr[pixel_index + 2]; 
    alpha = ptr[pixel_index + 3]; 

object_id = alpha +(red << 24) + (green << 16) + (blue << 8);
} 
glUnmapBuffer(GL_PIXEL_PACK_BUFFER); 
glBindBuffer(GL_PIXEL_PACK_BUFFER, 0); 
return object_id; 
} 
```

问题在于，应该从屏幕外帧缓冲区读取像素并给我 vao_id 的最后一段代码具有以下奇怪的行为：

如果打包到 RGBA 中的 4 个字节中的任何一个（通过着色器发送）不是 0，则该字节在另一端显示为 0xFF。

所以如果我发送

```
00000000 00000000 00000000 00000001 
```

我会得到

```
00000000 00000000 00000000 11111111 
```

或者如果我发送

```
00000000 00010000 00000000 00000000 
```

我会得到

```
00000000 11111111 00000000 00000000 
```

...当我用 get_object_id() 读取像素时。

如果我绑定纹理并将其渲染到我的普通 FrameBuffer 上的四边形，则我传递给屏幕外渲染的颜色在四边形上是正确的。但是 get_object_id() 读取的像素会使发送的每个字节四舍五入到 255 (0xFF)。所以我的猜测是最终功能有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:35:06.323

片段着色器输出 [0, 1] 范围内的值，当写入帧缓冲区时，这些值会重新映射到 [0, 255]。`glUniform4f`接受浮点值，您需要将您的 id 作为 [0, 1] 值而不是 [0, 255] 值发送：

```
glUniform4f(baseColorUniformLocation, red / 255.0f, green / 255.0f...); 
```

# php - 来自字符串的多维数组

> ID：10123604
> 
> 赞同：4
> 
> 时间：2012-04-12T12:30:02.357
> 
> 标签：php, arrays, multidimensional-array

假设我有这个字符串，我想把它放在一个多维数组中。

编辑：字符串中的子文件夹数量是动态的..从零子文件夹到 10

```
<?php
       $string ="Folder1/Folder2/Folder3/filename1\n";
       $string .=" Folder1/Folder2/Folder3/filename2\n";
       $string .=" Folder4/Folder2/Folder3/filename3\n";
?> 
```

我想要返回以下数组

```
<?php
 Array
(
    [Folder1] => Array
        (
            [Folder2] => Array
                (
                    [Folder3] => Array
                        (
                            [0] => filename1
                            [1] => filename2
                        )

                )

        )

    [Folder4] => Array
        (
            [Folder2] => Array
                (
                    [Folder3] => Array
                        (
                            [0] => filename3
                        )

                )

        )

)
?> 
```

实现这一目标的最有效方法是什么？

为了好玩，假设这个数组将被发送到世界的另一端，它想返回一个字符串。我们将如何做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T12:39:02.700

你可以借用一些代码~~这个类（链接不再可用）~~，具体`_processContentEntry`方法。

这是完成这项工作的方法的修改版本：

```
function stringToArray($path)
{
    $separator = '/';
    $pos = strpos($path, $separator);

    if ($pos === false) {
        return array($path);
    }

    $key = substr($path, 0, $pos);
    $path = substr($path, $pos + 1);

    $result = array(
        $key => stringToArray($path),
    );

    return $result;
} 
```

的输出

```
var_dump(stringToArray('a/b/c/d')); 
```

将会

```
array(1) {
  ["a"]=>
  array(1) {
    ["b"]=>
    array(1) {
      ["c"]=>
      array(1) {
        [0]=>
        string(1) "d"
      }
    }
  }
} 
```

我想这就是你需要的:)

* * *

**更新**

根据您的评论，以下是处理由换行符分隔的字符串的方法：

```
$string = "Folder1/Folder2/Folder3/filename1\n";
$string .= " Folder1/Folder2/Folder3/filename2\n";
$string .= " Folder4/Folder2/Folder3/filename3\n";

// split string into lines
$lines = explode(PHP_EOL, $string);

// trim all entries
$lines = array_map('trim', $lines);

// remove all empty entries
$lines = array_filter($lines);

$output = array();

// process each path
foreach ($lines as $line) {
    // split each line by /
    $struct = stringToArray($line);

    // merge new path into the output array
    $output = array_merge_recursive($output, $struct);
}

print_r($output); 
```

PS要将此数组转换为字符串，只需调用[json_encode](https://www.php.net/manual/en/function.json-encode.php)，但是我认为没有理由将其转换为数组然后再转换回原来的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-19T17:08:13.320

这可以通过从数组的开头获取项目并在到达最后一个项目时返回它以另一种方式递归解决。

```
function make_tree( $arr ){
   if( count($arr) === 1){
      return array_pop( $arr );
   }else{
      $result[ array_shift( $arr )] = make_tree( $arr ) ; 
   }
   return $result;
}

$string  = "Folder1/Folder2/Folder3/filename1\n";
$string .= "Folder1/Folder2/Folder3/filename2\n";
$string .= "Folder4/Folder2/Folder3/filename3\n";

$string = trim( $string );

$files_paths = explode( PHP_EOL, $string);

$result = [];

foreach ($files_paths as $key => $value) {
   $parted = explode( '/', $value );
   $tree = make_tree( $parted );
   $result = array_merge_recursive( $result, $tree );

}
var_dump( $result ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T12:54:48.560

我想这是你想要的，

```
$string ="Folder1/Folder2/Folder3/filename1\n";
$string .="Folder1/Folder2/Folder3/filename2\n";
$string .="Folder4/Folder2/Folder3/filename3\n";

$string_array_1 = explode("\n", $string);

$array_need = array();

foreach($string_array_1 as $array_values)
{
        if($array_values)
        {
            $folders =  explode("/", $array_values);
            $array_need[$folders[0]][$folders[1]][$folders[2]][] = $folders[3];
        }
    }

print_r($array_need); 
```

# core-data - 初始化 NSManagedObject 子类

> ID：10123610
> 
> 赞同：0
> 
> 时间：2012-04-12T12:30:29.973
> 
> 标签：core-data, nsmanagedobject, init

我想知道是否可以初始化 NSManagedObject 的子类？我有一个类“Actualite”，它是 NSManagedObject 的子类，当我想初始化这个类时，我收到这个错误：“CoreData：错误：无法在 NSManagedObject 类 Actualite 上调用指定的初始化程序”，并且应用程序在此消息后崩溃“-[Actualite setTitre:]: 无法识别的选择器发送到实例 0x8433be0”

这是我的代码：

```
-(void) recupererActualites {
listeNouvellesActualites = [[NSMutableArray alloc] init];

// Convert the supplied URL string into a usable URL object
NSURL *url = [NSURL URLWithString:FACE06_RSS];

// Create a new rssParser object based on the TouchXML "CXMLDocument" class, this is the
// object that actually grabs and processes the RSS data
CXMLDocument *rssParser = [[CXMLDocument alloc] initWithContentsOfURL:url encoding:NSUTF8StringEncoding options:0 error:nil];

// Create a new Array object to be used with the looping of the results from the rssParser
NSArray *resultNodes = NULL;

// Set the resultNodes Array to contain an object for every instance of an  node in our RSS feed
resultNodes = [rssParser nodesForXPath:@"//item" error:nil];

NSMutableArray* tmp = [[NSMutableArray alloc] init];
for (CXMLElement* resultElement in resultNodes) {
    // Create a temporary MutableDictionary to store the items fields in, which will eventually end up in blogEntries
    NSMutableDictionary *blogItem = [[NSMutableDictionary alloc] init];
    NSMutableArray* categories = [[NSMutableArray alloc] init];

    // Create a counter variable as type "int"
    int counter;

    // Loop through the children of the current  node
    for(counter = 0; counter < [resultElement childCount]; counter++) {
        // Add each field to the blogItem Dictionary with the node name as key and node value as the value
        if([[[resultElement childAtIndex:counter] name] isEqual:@"category"])
            [categories addObject:[[resultElement childAtIndex:counter] stringValue]];
        else {
            if ([[resultElement childAtIndex:counter] stringValue] != nil)
                [blogItem setObject:[[resultElement childAtIndex:counter] stringValue] forKey:[[resultElement childAtIndex:counter] name]];
            else
                [blogItem setObject:@"" forKey:[[resultElement childAtIndex:counter] name]];
        }
    }

    Actualite* actu = [[Actualite alloc] init];
    [blogItem setObject:categories forKey:@"categories"];
    [actu initWithDictionnary:blogItem];
    [tmp addObject:actu];
    //[actu release];

    [categories release];
    [blogItem release];
}
listeNouvellesActualites = tmp;

[rssParser release];
resultNodes = nil;

// Stockage des actualités en local
[self stockerActualites];
} 
```

而 initWithDictionary 方法设置了 Actualite 类的所有属性。

我也试过

```
Actualite* actu = [[Actualite alloc] initWithEntity:[NSEntityDescription entityForName:@"Actualite" inManagedObjectContext:managedObjectContext] insertIntoManagedObjectContext:managedObjectContext]; 
```

和

```
Actualite* actu = (Actualite*)[NSEntityDescription entityForName:@"Actualite" inManagedObjectContext:managedObjectContext]; 
```

代替

```
Actualite* actu = [[Actualite alloc] init]; 
```

错误消失，但应用程序此时停止。我不知道我能做什么...

有人已经有这个问题了吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:08:40.657

这个想法是您要求在上下文中创建一个新对象，然后使用它：

```
Actualite* actu = [NSEntityDescription insertNewObjectForEntityForName:@"Actualite" inManagedObjectContext:managedObjectContext]; 
```

# java - Java原教旨主义者的Web客户端开发技术

> ID：10123616
> 
> 赞同：1
> 
> 时间：2012-04-12T12:31:08.460
> 
> 标签：java, applet, web, client, rich-client-platform

我是一名 java 开发人员，我想为 web 开发富客户端。我的问题是我讨厌 javascript、flash 等以及大多数通常用于 Web 客户端的编程语言。我很乐意继续使用 Java 开发 Web 客户端，这些客户端可以在常见的 Web 浏览器上使用，为什么不可以在新的时尚移动设备上使用。我正在寻找一些建议/警告来做出一个好的选择。

Java 小程序似乎非常适合我的情况，但根据一些传闻，它并不是一个真正可持续的解决方案。我应该看看JavaFX吗？GWT？还有其他一些可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T21:20:33.940

你想让我做什么？Vaadin 基于 GWT，因此使用比 Java Applet 慢得多的 HTML5 + JavaScript。我已经尝试过船和带有 Swing 的 Applets 比 Vaadin 快很多。

使用 Java Applets、Swing 和 Hessian，您可以在业务应用程序中获得无与伦比的性能。Hessian 是一个非常快速的二进制 Web 服务协议。使用 JavaScript，您通常仅限于文本编码的 Web 服务协议，如 Json 和各种基于 XML 的协议。与二进制协议相比，基于文本的协议会消耗大量 CPU、内存和带宽——它们并没有真正为您提供任何优势。

Applets 的弱点是硬件加速图形，如 OpenGL 和多媒体。如果您正在开发游戏或电影播放器​​，Applet 就不是那么好。

JavaFX 承诺修复硬件加速图形性能和视频编解码器。根据您的描述，尚不清楚您是否需要等待。

但是，如果您真的需要比标准小程序所能提供的更多的东西，那么 web start 可能是一个解决方案。它有点像带有签名或未签名应用程序的旧 ActiveX，它可以通过 sun 签名或询问用户来获得额外权限。这将允许您使用 JOGL 或 3d 场景图引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:39:53.370

您非常适合 JavaServer Faces (JSF)。是的，试穿一下。看，你穿它们看起来很棒。JSF 的吸引力在于 1。它是一种标准化技术，是 Java EE 2 的一部分。它在很大程度上依赖于 Java 编程而不是任何 JavaScript 编码（根本没有完成）。3\. JSF 已经出现了一段时间，并且运行良好。此外，JSF 与 Ajax 一起工作，开箱即用（额外的好处），无需编写 JavaScript 的单个音节。唯一的缺点是您必须编写一些 html 代码，而“facelets”基本上是 html 页面，其中包含一些您需要学习的额外标签。但是绝大多数真正的处理是在Java中完成的。JSF 也可以在没有 Java EE 额外包袱的情况下工作，它是为与普通的 Tomcat 服务器（或 Glassfish 或 JBoss 等）和浏览器一起工作而构建的，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T12:47:34.513

我认为 JavaFX 作为一种基于 Java 的 RIA 技术看起来很有前途。虽然它是最前沿的。Mac OS X 和 Linux 版本目前仅作为预览版提供。已宣布支持移动和其他设备，但尚未发布，AFAIK。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T12:58:47.753

[Vaadin](http://vaadin.com/)也很合适，根本不需要 Javascript 或 HTML，即使是新组件开发。页面布局是使用布局管理器（如 Swing）完成的。新组件可以由现有组件组成（同样，如 Swing），或者使用 GWT（相当简单，纯 Java）从头开始编写。

有合理的附加组件选择，涵盖了核心框架中没有的一些功能。

对于具有 Swing 经验的 Java 开发人员来说，该框架非常易于使用，并且具有开箱即用的精美外观。然而，布局管理器确实使使用 CSS 更改外观和感觉变得困难 - 像添加边框这样的简单任务很难。

布局也相当“沉重”，这意味着 Vaadin 网站可能会感到略微呆滞。以我的经验，感觉还是比一些较重的 JSF 框架好。

它与所有主流浏览器兼容。

演示者： http: [//demo.vaadin.com/sampler/](http://demo.vaadin.com/sampler/)

您也可以考虑[Wicket](http://wicket.apache.org/)。这有一个类似的基于组件的方法，但组件是使用简单的 HTML 片段定义的，这导致更轻的 DOM（因此更好的浏览器性能）和更好的外观控制。然而，Wicket 的学习曲线更陡峭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-13T16:00:06.060

在尝试了 GWT 并在其所谓的“超级开发模式”中挣扎之后，我发现 JavaScript 编程并没有那么痛苦。我强迫自己学习和实践，最终我完全接受了它。JavaScript 中有很多好东西和大量的库。在我的情况下，我对人们的建议只是坚持使用例如[w3schools 教程](http://www.w3schools.com/js/default.asp)来学习 JavaScript 。

# android - 在选项卡导航和列表导航之间切换

> ID：10123622
> 
> 赞同：3
> 
> 时间：2012-04-12T12:31:26.013
> 
> 标签：android, tabs, android-fragments, actionbarsherlock, android-actionbar

我正在使用[ActionBarSherlock](http://actionbarsherlock.com/)并将[此模式](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentTabs.html)应用于我在 android 开发人员网站上找到的选项卡导航。它工作得很好，但我也希望能够在选项卡和片段之间切换`NAVIGATION_MODE_TABS`并`NAVIGATION_MODE_LIST`保留它们之间的关联。

我上面提到的模式非常适合保留通用代码。因此，我将侦听器添加到我的选项卡并将它们与特定片段相关联，如下所示：

```
bar.addTab(bar.newTab()
.setText("MyFragment")
.setTabListener(new TabListener<SomeFragment>(this, "myfargment", SomeFragment.class))); 
```

并在泛型的帮助下单击关联的选项卡时实例化片段：

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if (mFragment == null) {
        mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);
        ft.add(android.R.id.content, mFragment, mTag);
    } else {
        ft.attach(mFragment);
    }
} 
```

**我的问题是**如何在使用**列表导航模式****在我的片段之间导航**时实现类似的方式。我找不到类似的方法，因为ActionBar 上的列表适用于**整个列表**，而不是像 tablistener 那样以**每个项目为基础。****`OnNavigationListener`**

 ******还是我必须做这样的事情：

```
@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    switch (itemPosition) {
    case 0:
    //Replace the current fragment with FragmentA
        break;
    case 1:
    //Replace the current fragment with FragmentB
        break;
    case 2:
    //Replace the current fragment with FragmentC
        break;
    default:
        break;
    }
    return true;
} 
```

**编辑：**

我注意到一个有趣的行为：虽然**导航模式**设置为`NAVIGATION_MODE_TABS`如果我将手机置于**横向**模式，它会将选项卡转换为列表并**保留**片段和列表项之间的关联（**之前是选项卡项**）我怎么能**根据需求**而不是**方向改变**来实现这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:45:54.980

如果您在选项卡模式下手动设置为列表导航，我认为这是不可能的。当我的一个应用程序低于“大”存储桶时，我为它设置了列表导航。这就是我使用导航监听器的方式：

```
OnNavigationListener mNavigationListener = new OnNavigationListener()
{
int mLastPosition = -1;

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId)
{
    String selectedTag = mFragmentNames.get(itemPosition);

    FragmentManager fm = getSupportFragmentManager();
    Fragment fragment = fm.findFragmentByTag(selectedTag);
    FragmentTransaction ft = fm.beginTransaction();

    /** Used to avoid the same fragment being reattached. */
    if(mLastPosition != itemPosition)
    {
    /** Means there was a previous fragment attached. */
    if(mLastPosition != -1)
    {
        Fragment lastFragment = fm.findFragmentByTag(mFragmentNames.get(mLastPosition));
        if(lastFragment != null)
        ft.remove(lastFragment);
    }

    if(fragment == null)
    {
        /** The fragment is being added for the first time. */
        fragment = Fragment.instantiate(HomeActivity.this, selectedTag);
        ft.add(R.id.rootLayout, fragment, selectedTag);
        ft.commit();
    } else
    {
        ft.attach(fragment);
        ft.commit();
    }
    }
    /**
     * The newly attached fragment will be the last position if changed.
     */
    mLastPosition = itemPosition;

    return true;
}
}; 
```

变量 mFragmentNames 是一个 HashMap，它将整数位置映射到片段名称 ex。“com.android.myproject.MyFragment”

我希望这有帮助。******

# asp.net - Quartz.net 保持单个调度程序运行 asp.net

> ID：10123623
> 
> 赞同：0
> 
> 时间：2012-04-12T12:31:30.200
> 
> 标签：asp.net, quartz.net

我是否正确理解这一点？

```
ISchedulerFactory sf = new StdSchedulerFactory();
IScheduler sched = sf.GetScheduler();
    sched.Start(); 
```

StdSchedulerFactory 是单例吗？

我想要实现的是在我的全局，asax on Application_Start 启动石英调度程序，然后在我的一个类中创建作业，触发器，再次获得调度程序的句柄，并安排作业/触发器

但事实证明，我需要重新启动调度程序，我以为它已经启动了？

或者现在有超过 1 个调度程序在运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:02:52.820

在 ASP.Net 中嵌入调度程序的典型场景是：

1.  将您的调度程序创建为单例，然后使用 Scheduler.Instance 之类的东西访问它。
2.  如果您使用 DI，请让容器为您提供对（单例且已启动的）调度程序的引用。
3.  使用全局变量并让它引用启动的调度程序。

# android - 关于创建菜单的建议（附图片）

> ID：10123628
> 
> 赞同：0
> 
> 时间：2012-04-12T12:31:41.503
> 
> 标签：android, layout, menu

下面是 GPS Essentials 应用程序的图像，我猜它经常使用。

我有兴趣制作类似的菜单。这样的菜单（或任何名称）是如何创建的。

我的第一个想法是使用 ListView，其元素包含垂直方向的图像和文本视图。但后来我想知道是否有更好的方法，最好是更简单的方法。

如果您能与我分享您的经验，我将非常感激。谢谢你。

![GPS Essentials 应用程序菜单](../Images/213694fd570a9cd8f0b8887d1a56a442.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:15:46.023

[GridView](http://developer.android.com/resources/tutorials/views/hello-gridview.html)正是解决方案。您必须实际为 GridView 定义一个**自定义适配器**。

为什么要定制适配器？因为您必须将自定义行（具有 ImageView 和 TextView）膨胀到 GridView 中的每个项目。

**提示：**搜索带有单词“Android Gridview example”的示例，您将获得许多文章/教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:40:34.110

使用网格视图。你可以在这里找到文档[http://developer.android.com/resources/tutorials/views/hello-gridview.html](http://developer.android.com/resources/tutorials/views/hello-gridview.html)

# meteor - 如何在不同的 IP 地址上运行流星服务器？

> ID：10123633
> 
> 赞同：19
> 
> 时间：2012-04-12T12:31:56.700
> 
> 标签：meteor

如何在不同的 IP 地址上启动流星服务器？目前在示例中只能在 localhost:3000 地址上运行。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-09-06T11:12:42.400

导出 BIND_IP 不再有效，绑定 IP 使用 --port（或 -p 或 --app-port）选项定义：

```
$ meteor run --port 127.0.0.1:3000 
```

参考：[https ://github.com/meteor/meteor/commit/9b8bd31a7b6c857e5d8fc0393982e6e6b2973eb0](https://github.com/meteor/meteor/commit/9b8bd31a7b6c857e5d8fc0393982e6e6b2973eb0)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-12T20:31:42.870

如果您希望在另一个 IP 地址上运行某些东西（但仍然有本地文件），您需要考虑编辑您的 vhosts 文件。如果您使用的是 Mac，请查看[Virtual Host X](http://clickontyler.com/virtualhostx/)

使用流星更改端口的正确方法是：

```
meteorapp : meteor --port 5000 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-08T17:52:26.317

根据[此更改](https://github.com/meteor/meteor/commit/ae965f1aa15cc6befb2ba07c116f9844d679d0ce)，您应该能够通过配置`BIND_IP`环境变量将您的应用程序配置为绑定到特定的 IP 地址。

```
export BIND_IP=127.0.0.1 
```

您可能需要将您的应用程序更新到较新版本的 Meteor 才能正常工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-10T13:44:28.050

使用 Meteor 1.3.2.4，如果你的 IP 是 192.168.0.13，在终端上，输入：

```
meteor --mobile-server 192.168.0.13 
```

或者

```
meteor --port 192.168.0.13:3000 
```

您将通过键入看到 Meteor 欢迎页面

```
http://192.168.0.13:3000 
```

在您的浏览器上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T12:19:09.423

目前，你不能——meteor 绑定到所有 IP 地址，但是有一个[问题](https://github.com/meteor/meteor/issues/159#issuecomment-5937698)可以添加对绑定到特定 IP 的支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T15:46:08.550

部署在另一台服务器上，从内网外连接到服务器的internet-ip，或者从局域网连接到服务器的local-ip。

如何部署在另一台服务器上？

'流星包'

并阅读自述文件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-18T12:30:43.643

这还不可能，但是有一个开放的拉取请求。他们正在等待作者签署流星贡献者协议，然后才能被接受。

[https://github.com/meteor/meteor/pull/469/](https://github.com/meteor/meteor/pull/469/)

如果您在正式发布之前需要它，您可以自己应用补丁（或者可能只是将 127.0.0.1 替换为您要在补丁引用的相同文件中绑定的 IP 地址（app/lib/mongo_runner.js 和 app/meteor /run.js）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-30T18:42:00.090

实际上，Meteor 在生产和开发环境中的行为是不同的。

## 生产

使用环境变量`BIND_IP`

## 发展

使用`--port`参数，如`meteor run --port 192.168.1.1:port`

文档[在这里](https://docs.meteor.com/environment-variables.html#BIND-IP)

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2012-04-12T17:15:10.433

根据`netstat -tapn`Meteor/Node.js 监听机器上所有可用的 IP 地址：

```
tcp        0      0 0.0.0.0:3000            0.0.0.0:*               LISTEN      9098/node 
```

你有类似 iptables 的东西在运行吗？

# python - 在 Python 中从十六进制转换为十进制

> ID：10123639
> 
> 赞同：-6
> 
> 时间：2012-04-12T12:32:22.210
> 
> 标签：python

我该怎么做呢？我不知道从哪里开始。我假设您会将位的值乘以其位值，但不确定如何为此创建代码。我已经将十六进制转换为二进制，但没有将二进制转换为拒绝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:46:21.357

[http://docs.python.org/library/functions.html#int](http://docs.python.org/library/functions.html#int)

Python 的`int`函数创建以 10 为基数的数字，并让您提供要输入的变量的基数。

`x = int('FF', 16)` 是相同的`x = 255`

# css - Z-index 和多个下拉菜单

> ID：10123641
> 
> 赞同：0
> 
> 时间：2012-04-12T12:32:34.007
> 
> 标签：css, drop-down-menu, z-index

我正在使用它自己的下拉菜单向现有的 WordPress 主题添加一个新的下拉 div。

新的下拉菜单被激活并从菜单上方的区域“下拉”。

菜单设置为 z-index:99，但无论我给出“我的下拉菜单”的值是什么，菜单仍然出现在它的顶部。

唯一的例外是如果我给菜单z-index：0，那么除了菜单的下拉菜单当然不会与页面下方的项目重叠之外，一切正常：/

帮助表示赞赏！

更新：我尝试了不同的位置值，菜单需要“相对”才能工作。

下拉列表现在是绝对的，但相对的给出相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:21:32.357

您在`styles.css`样式表中声明了以下内容`line: 316`：

```
#section-tophat, #section-footer, #section-sub-footer { position: relative;  z-index: 1;  } /* Setup for :after double bgs below */ 
```

您将`#section-tophat`to设置`z-index:1`为低于菜单的级别，因此只需`#section-tophat`从该行中删除您的 id ，您的下拉菜单就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:38:42.437

**z-index**仅适用于 position `relative`，`absolute`& `fixed`。所以，给`position:relative`你的`dropdown`DIV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:45:48.647

你有我们可以检查的示例页面吗？您还可能遇到堆叠上下文问题。

检查[我关于如何`z-index`工作](https://stackoverflow.com/questions/10030386/hiding-div-behind-its-parent/10030479#10030479)的答案。

# php - PHP $_POST 关联数组返回 null

> ID：10123652
> 
> 赞同：1
> 
> 时间：2012-04-12T12:33:15.123
> 
> 标签：php, forms, associative-array

输入值

```
 <input type="hidden" name="service_row[1]['row']" value="1" />
    <input type="checkbox" name="service_row[1]['check']" />
    <input type="text" name="service_row[1]['observation']" />
    <input type="text" name="service_row[1]['parts']" /> 
```

处理程序代码

```
 foreach ($_POST['service_row'] as $data) {
        $row_num = $data['row'];
        if (isset($data['check'])) {
            $checked = 1;
        } else {
            $checked = 0;
        }
        $observation = database::escape($data['observation']);
        $parts = database::escape($data['parts']);
    } 
```

我在 $data 上的 var 转储显示

```
 array
       ''row'' => string '1' (length=1)
       ''observation'' => string 'Test' (length=4)
       ''parts'' => string 'Test' (length=4) 
```

因此，据我所知，$data 数组存在并显示了我输入的值，但由于某种原因，当我尝试将数据放入变量时，它返回 null。

谁能看到我在这里看不到的东西？非常感谢任何帮助，这个让我现在很难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:38:00.430

我认为您必须使用索引`'row'`而不是`row`或从您的 html 中删除引号。

# android - 更新后联系人 ID 递增（android API 级别 7 及更高版本）

> ID：10123654
> 
> 赞同：1
> 
> 时间：2012-04-12T12:33:15.660
> 
> 标签：android, android-contacts

我正在编写一个将 android 联系人信息与服务器信息同步的应用程序。服务器信息更改后，我正在更新所有原始联系人，每个人都很高兴。但我发现在用几个原始联系人更新联系人后，联系人 ID 的值增加了 1。如果我从设备联系人 ID 更新联系人仍然是相同的。

假设您与下一个数据有联系：

```
contact_id : 42
raw_contact_ids : { 43, 44, 45 } 
```

(1) 更新后您将拥有：

```
contact_id : 43
raw_contact_ids : { 43, 44, 45 } 
```

(2) 但是，如果您使用用户界面更新相同的联系人，您将获得：

```
contact_id : 42
raw_contact_ids : { 43, 44, 45 } 
```

我不理解这样的行为。我认为这可能是因为联系人聚合，但我不明白为什么（2）中的结果与（1）中的结果不同。我正在使用下一个代码来更新原始联系人中的电话号码数据：

```
字符串 selectPhone = Data.RAW_CONTACT_ID + "=? AND " + Data.MIMETYPE + "='" +
    Phone.CONTENT_ITEM_TYPE + "'" + " AND " + Phone.TYPE + "=? AND " + Phone._ID + "=?";
String[] selectArgs = new String[] { String.valueOf(rawContactId), String.valueOf(from.getType()), String.valueOf(id) };
ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI)
    .withSelection（选择电话，选择参数）
    .withValue(Phone.NUMBER, newNumber)
    。建造（））;

```

有人可以解释一下我做错了什么吗？我真的需要那些联系人 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:56:10.983

根据我了解到的情况，您在存储或使用联系人时最好使用 LOOKUP_KEY，由于聚合，使用联系人 ID 不会保持静态。

# javascript - 使用 Jquery 为 IE7+ 和 Mozilla 进行 XML 解析

> ID：10123656
> 
> 赞同：2
> 
> 时间：2012-04-12T12:33:28.203
> 
> 标签：javascript, jquery, xml, internet-explorer, jquery-xml

我一直在开发一个需要在 jquery 中解析我的 xml 的 Web 应用程序。我正在构建我的网络应用程序以在 IE7 到 IE10 和 mozilla 上工作。我想迭代到我的 xml，所以我写了下面的代码。

```
<script type='text/javascript' src="jquery/jquery-1.7.1.min.js"></script>

    <script type="text/javascript" language="javascript">
        var xml = '<root><cell id="1"> </cell><cell id="2"> </cell></root>';       
        //works in ie7
        $(xml).filter("cell").each(function () {
            alert('ie'+$(this).attr('id'));
        });
       //works in mozilla
        $(xml).find('cell').each(function () {
            alert('mozilla'+$(this).attr('id'));
        });
    </script> 
```

但我发现我需要为不同的浏览器编写不同的循环机制来从 xml 中获取。这有点奇怪，因为我使用的是 Jquery，所以它应该是所有浏览器兼容的。

那么有没有更好的从 xml 读取的方法，它适用于所有浏览器，这样我就不必编写浏览器检查代码了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:02:54.810

不要使用 jQuery 的 main`$()`函数来解析 XML。它尝试使用 HTML 元素的内置`innerHTML`属性将 XML 解析为 HTML，该属性不能正常工作，但足够接近以使人们陷入一种错误的安全感。改用[`parseXML()`](http://api.jquery.com/jQuery.parseXML/)：

```
var xmlDoc = $.parseXML(xml);

$(xmlDoc).find("cell").each(function () {
    alert( $(this).attr('id') );
}); 
```

# ios - 使用 iOS XMPPFramework 和 OpenFire 服务器的 TURN 连接

> ID：10123663
> 
> 赞同：0
> 
> 时间：2012-04-12T12:34:01.820
> 
> 标签：ios, cocoa-touch, xmpp, openfire, xmppframework

**问题**：如何使用 iOS XMPPFramework 和 OpenFire 服务器获得成功的 TURN 连接。我希望能够发送和接收文件。

**注意**：我的代码基础来自以下教程：http: [//mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)

**2012 年 4 月 13 日更新**：经过更多研究，我认为我需要在这个问题中显示的真正相关代码是这个......

这是 TURNSocket 尝试连接的地方

```
XMPPJID *jid = [XMPPJID jidWithString:@"myFriendsUsername@beta.myCompany.co.uk"];

NSLog(@"Attempting TURN connection to %@", jid);

TURNSocket *turnSocket = [[TURNSocket alloc] initWithStream:[self xmppStream] toJID:jid];

[turnSockets addObject:turnSocket];

[turnSocket startWithDelegate:self delegateQueue:dispatch_get_main_queue()];
[turnSocket release]; 
```

但是，当我通过代码进行调试时，在 TURNSocket 中我得到一条评论，指出“我们无法从我们的列表中找到单个代理服务器”。这是因为数组“streamhosts”永远不会被填充。可能是什么问题？是否有一些 XML 可以告诉我这个问题？问题可能出在 OpenFire 上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:42:03.693

如果没有向 TurnSocket.m 提供带有资源的完整 jID，则会导致问题！这是在 SMChatViewController 的 viewDidLoad 中传入的

例如使用

> 朋友用户名@beta.myCompany.co.uk/spark

而不是

> 朋友用户名@beta.myCompany.co.uk

我在这个项目上的进展可以在[这里关注](https://stackoverflow.com/questions/10205758/openfire-xmpp-503-service-unavailable-error-xep-0065-using-ios-xmppframework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:01:01.930

这是您调用以填充 TURNSocket 流主机的代理候选者的 TURNSocket 类方法。因此，您应该将流主机恢复为流主机之前的状态。

```
+ (void)setProxyCandidates:(NSArray *)candidates;

[TURNSocket setProxyCandidates:@["host1.somedomain.com", @"host2.someotherdomain.com"]]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T08:29:01.963

在 TurnSocket 的 processRequestResponse.m 中，streamhost 元素的名称不是 OpenFire 给我的。我已经从这里改变了它

```
NSXMLElement *streamhostUsed = [query elementForName:@"streamhost-used"]; 
```

对此

```
NSXMLElement *streamhostUsed = [query elementForName:@"streamhost"]; 
```

但是，我现在有一个新错误，我正在开始一个新问题... [OpenFire/XMPP 503 service-unavailable error (XEP-0065 using iOS XMPPFramework)](https://stackoverflow.com/questions/10205758/openfire-503-service-unavailable-error-using-ios-xmppframework)

**2012 年 4 月 20 日更新**：我现在相信这个答案是*错误*的！如果它工作正常，`streamhostUsed`就会出现，而不是`streamhost`出现错误！

# javascript - 如何将 jQuery 嵌入/导入到另一个 JavaScript 库中，而不会与网站上部署的 jQuery/其他库发生潜在冲突？

> ID：10123672
> 
> 赞同：2
> 
> 时间：2012-04-12T12:34:30.027
> 
> 标签：javascript, jquery, coffeescript

我正在开发一个内部使用 jQuery 的 JavaScript 库。但是，到了部署它的时候，我宁愿简化一些事情（wrt 部署），而不用担心环境中是否已经包含（或没有）jQuery `<head>`。

我应该提到我的库是作为 Coffescript 中的一个类实现的，并且生成的 .js 文件具有用于隔离作用域的默认函数包装器。

我可以想到几个解决这个问题的方法：

1.  询问网站管理员他们是否已经存在 jQuery。如果是，只需包含库本身。如果没有，则包含 jQuery + 库，可能在单个文件中并连接起来。部署更难，但问题可能已经解决。

2.  创建一个连接 jQuery 和我的 lib 代码的文件，并且总是让网站管理员只包含这个文件。为防止冲突，请`var myJ = jQuery.noConflict()`在 jQuery 代码之后执行。

3.  像上面的（2）那样做，但是调用`var myJ = jQuery.noConflict()`封装好的 Coffeescript 类里面。

总之，这项挑战的目标是：

1.  绝对避免在部署的网站上出现任何损坏，无论他们可能使用什么
2.  使部署尽可能简单
3.  尽可能避免不必要的 jQuery 转移

我的担忧是：

*   如果站点已经有 jQuery，但需要旧/新版本怎么办？
*   如果我的`noConflict()`电话打断了他们的某些东西怎么办？

解决这种情况的最佳方法是什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:17:58.810

CoffeeScript 有一个 -b 选项可以在没有顶级函数包装器的情况下进行编译。使用此方法，您可以改用您自己的顶级函数包装器。

IE

```
(($) ->
    # ...
    # your code
    # ...
)(jQuery.noConflict()) 
```

然后，作为构建过程的一部分，将 jQuery 连接到编译输出的前面。适当的 Linux/Mac shell 命令是：

```
(cat jQuery.js; coffee -pb yourSource.coffee) > yourCompiledFileWithjQuery.js 
```

CoffeeScript的`p`选项将编译后的输出打印到标准输出，以便您可以将其与 合并`cat jQuery.js`并将该输出重定向到*yourCompiledFileWithjQuery.js*

This would ensure that, immediately before your code is executed, jQuery would be included. jQuery keeps a reference to the old owner of $, so if some library or another version of jQuery is already using it it will be returned to them with the `jQuery.noConflict()` call.

`jQuery.noConflict()` also returns a reference to that jQuery, so that is how it would be passed to the `$` of your code.

I hope that's clear.

Extra:

As of CoffeeScript 1.3, released a few days ago, you could use this instead for your top-level function wrapper, which is somewhat clearer:

```
do ($ = jQuery.noConflict()) ->
    # ...
    # your code
    # ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:45:08.243

如果您的结束脚本作为闭包，您可以简单地将 jQuery 作为参数传递并检查它是否未定义。

```
(function($) {

  if (!$) {
    // load jQuery
  } else {
    // check jQuery version if needed or just use jQuery
    if ($.fn.jquery !== '1.7.2') {
        // load 1.7.2
    };
  };

})(window.jQuery || false); 
```

必须使用 window.jQuery，因为 jQuery 只有在未声明 jQuery 时才会产生错误

# optimization - CUDA：while循环索引正确性

> ID：10123675
> 
> 赞同：4
> 
> 时间：2012-04-12T12:34:38.233
> 
> 标签：optimization, cuda, while-loop

这个内核正在做正确的事情，给了我正确的结果。如果我想提高性能，我的问题更多在于 while 循环的正确性。我尝试了几种块和线程的配置，但如果我要更改它们，while 循环不会给我正确的结果。我在更改内核配置时获得的结果是 firstArray 和 secondArray 不会被完全填充（它们在单元格内将有 0）。两个数组都必须用从*if 循环*中获得的 curValue 填充。

欢迎任何建议:)

先感谢您

```
#define N 65536

__global__ void whileLoop(int* firstArray_device, int* secondArray_device)
{   
    int curValue = 0;
    int curIndex = 1;

    int i = (threadIdx.x)+2;

    while(i < N) {
        if (i % curIndex == 0) {
            curValue = curValue + curIndex;
            curIndex *= 2;
        }
        firstArray_device[i] = curValue;
        secondArray_device[i] = curValue;
        i += blockDim.x * gridDim.x;
    }
}

int main(){

  firstArray_host[0] = 0;
  firstArray_host[1] = 1;

  secondArray_host[0] = 0;
  secondArray_host[1] = 1;

  // memory allocation + copy on GPU

  // definition number of blocks and threads
  dim3 dimBlock(1, 1);
  dim3 dimGrid(1, 1);

  whileLoop<<<dimGrid, dimBlock>>>(firstArray_device, secondArray_device);

  // copy back to CPU + free memory
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:56:02.840

您在这里遇到了数据依赖性问题，这会阻碍您进行一些有意义的优化。变量 curValue 和 curIndex 在 while 循环中被更改并前馈到下一次运行。一旦您尝试优化循环，您会发现您处于此变量具有不同状态并且结果发生更改的情况。

我真的不知道你试图实现什么，但尝试使 while 循环独立于循环之前运行的值以避免依赖关系。尝试将数据分成线程和数据块，以便根据 threadIdx、blockDim、gridDim 等环境状态计算 indizes 和值。

还要尽量避免条件循环。最好使用具有恒定运行次数的 for 循环。这也更容易优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:54:43.833

一些东西：

1.  您遗漏了用于在设备上声明全局数组的代码。拥有这些信息会很有帮助。
2.  当使用多个块时，您的算法不是线程安全的。换句话说，如果您正在运行多个块，它们不仅会做冗余工作（因此不会给您带来任何收益），而且它们还可能在某些时候尝试写入相同的全局内存位置，从而产生错误。
3.  因此，当仅使用一个块时，您的代码是正确的，但这使得它变得毫无意义......您正在并行设备上运行串行或轻线程操作。您不能在所有可用资源上运行（多个 SMP 上的多个块而没有内存冲突（见下文）...

目前，从并行的角度来看，此代码存在两个主要问题：

1.  `int i = (threadIdx.x)+2;`...产生`2`单个线程的起始索引；`2`以及**单个**`3`块中的两个线程，依此类推。我怀疑这是您想要的，因为前两个位置（, ）永远不会得到解决。（请记住，数组从C 中的索引开始。） **`0``1``0`**

***   此外，如果您包含**多个**块（例如 2 个块，每个块有一个线程），那么您将有多个重复的索引（例如，对于 2 bx 1 t --> 索引 b1t1: `2`， b1t2: `2`），当您使用索引写入时全局内存会产生冲突和错误。做类似的事情`int i = threadIdx.x + blockDim.x * blockIdx.x;`将是正确计算索引以避免此问题的典型方法。

    *   您的最终表达式`i += blockDim.x * gridDim.x;`没问题，因为它向 i 添加了一个等于线程总数的数字，因此不会产生额外的冲突或重叠。

    *   为什么要使用 GPU 洗牌内存并进行微不足道的计算？当您考虑将阵列进出设备的时间时，与快速 CPU 相比，您可能看不到多少加速。**

 **如果您愿意，可以解决问题 1 和 2，但除此之外，请考虑您的总体目标以及您正在尝试优化的究竟是哪种算法，并提出一个对并行更友好的解决方案——或者考虑 GPU 计算是否真的对您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T18:13:29.130

要并行化此算法，您需要提出一个公式，该公式可以直接计算数组中给定索引的值。因此，在数组范围内选择一个随机索引，然后考虑确定该位置的值的因素是什么。找到公式后，通过将随机索引的输出值与串行算法的计算值进行比较来测试它。如果正确，则创建一个内核，该内核首先根据其线程和块索引选择唯一索引。然后计算该索引的值并将其存储在数组中的相应索引中。

一个简单的例子：

序列号：

```
__global__ void serial(int* array)
{
  int j(0);
  for (int i(0); i < 1024; ++i) {
    array[i] = j;
    j += 5;
}

int main() {
  dim3 dimBlock(1);
  dim3 dimGrid(1);
  serial<<<dimGrid, dimBlock>>>(array);
} 
```

平行：

```
__global__ void parallel(int* array)
{
  int i(threadIdx.x + blockDim.x * blockIdx.x);
  int j(i * 5);
  array[i] = j;
}

int main(){
  dim3 dimBlock(256);
  dim3 dimGrid(1024 / 256);
  parallel<<<dimGrid, dimBlock>>>(array);
} 
```**

# objective-c - 理解指针的正确用法

> ID：10123677
> 
> 赞同：1
> 
> 时间：2012-04-12T12:34:42.707
> 
> 标签：objective-c, pointers, cocos2d-iphone

我在我的界面中声明了两个属性，它们都应该是指针，但是 xcode 给了我两个不同的错误..

```
// myClass.h

#import <Foundation/Foundation.h>

@class CCNode;

@interface myClass : NSObject
{
    NSMutableArray myArray;
    CCNode myNode;
} 
```

对于 NSMutableArray：

```
Interface type cannot be statically allocated 
```

对于 CCNode：

```
Field has incomplete type 'CCNode' 
```

在这两种情况下，使用指针都可以解决问题，但它们之间有什么区别？

通过尝试错误的方法，我发现如果我更改`@class CCNode`为`#import "CCNode.h"`then 它会给我与第一行相同的错误，但我肯定会错过一些正确理解的东西....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:53:34.540

> 他们之间有什么区别？

编译器知道完整的定义，`NSMutableArray`因为它的头文件是通过头文件包含的`Foundation.h`。它所知道`CCNode`的只是它是一个 Objective-C 类（感谢`@class`），而不是它有多大或其他任何东西。

这就是为什么包含`CCNode.h`具有改变错误的效果的原因，因为编译器现在知道它有多大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:40:07.397

指针需要用 a`*`声明，因此您的声明应如下所示：

```
@class CCNode;

@interface myClass : NSObject
{
    NSMutableArray *myArray;
    CCNode *myNode;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T12:41:06.727

@class 是您的班级的前向声明。它具有不完整的类型，因为编译器不知道它有多大，是结构、对象还是内置类型等。当您导入标头时，编译器拥有它需要的所有信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:38:08.623

在 Objective-C 中，你不能在栈上分配一个对象，所以这一点是没有实际意义的。Objective-C 要求所有对象都是动态分配的（即在堆上）。您收到的错误表明您正在尝试在堆栈上创建 CCNode 对象。所有Objective Class 对象都是指针类型。

静态分配的变量用于原始 C 类型，如 int 或 double

整数标记=100；

# orbeon - 在 Java 应用程序中使用 Form-Builder-Generated-Form

> ID：10123680
> 
> 赞同：0
> 
> 时间：2012-04-12T12:34:53.720
> 
> 标签：orbeon, xforms

我尝试了在此处建议的 Java 应用程序中使用 Form-Builder-Generated-Form 的方法 < 使用 Java 应用程序[运行 Orbeon-Form-Builder-Generated-Form](https://stackoverflow.com/questions/8945099/running-orbeon-form-builder-generated-form-with-java-application) >：下载 Orbeon nightly build，使用 Form Builder 创建示例表单并复制和粘贴它进入我的应用程序的 JSP 页面。但是，当我尝试访问此 JSP 时，它会将我重定向到： /myapp/fr/unauthorized 。你能告诉我我可能做错了什么吗？或者在 Java 应用程序中让 Orbeon 处理 Form Builder 生成内容的正确方法是什么？

对于我的部署，我遵循 Orbeon 文档中指定的单独部署和配置。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:21:01.293

您没有做错任何事情，但 Orbeon Forms 不支持这种类型的表单部署。

分离[部署](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-with-java-applications#TOC-Separate-deployment)模式直接通过 XForms 引擎运行 JSP 的输出。

Form Builder 生成的表单 OTOH 期望通过 Form Runner 运行时进行预处理，特别是通过[`components.xsl`](https://github.com/orbeon/orbeon-forms/blob/master/src/resources/apps/fr/components/components.xsl)XSLT 转换。这是支持所有 Form Runner 功能所必需的，包括内置持久性、错误摘要、国际化等。

目前，将此类表单与您自己的应用程序集成的最简洁方法是并排运行它们（Orbeon WAR + 您自己的 WAR）并通过链接和 POST 在彼此之间导航。

您也可以使用 iframe，尽管这通常是不受欢迎的解决方案。

您还可以将 Form Builder 生成的表单转换为不使用 Form Runner 的普通 XForms。这不会太难做，但会超出这个 StackOverflow 问题的范围。

# javascript - 在每个星期五的特定时间重定向网页？

> ID：10123684
> 
> 赞同：1
> 
> 时间：2012-04-12T12:35:03.297
> 
> 标签：javascript, html

这是我的代码，

```
<script type="text/javascript">
function today(hour, minute) {
var now = new Date();
now.setHours(hour);
now.setMinutes(minute);
now.setSeconds(0);
now.setMilliseconds(0);
return now.getTime();
}

var now = new Date();
now = now.getTime();

if(
(now > today(11, 45) && now < today(14, 00)) ||
(now > friday(19, 00) && now < saturday(0, 00))
) {
alert("Lunchtime Specials!");
window.location = "http://google.ie";
}</script> 
```

它适用于“今天”，但不适用于周五或周六等有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:38:41.627

您只想检查今天是哪一天，然后是什么时间，以获取星期五的星期几：

```
var d = new Date();
var day = d.getDay();

if(day == 5){
alert("It's Friday!");
} 
```

> **getDay()**返回星期几（从 0-星期日到 6-星期六）

如果要检查一小时或一分钟，请执行以下操作（从顶部代码开始）：

```
var hour = d.getHours();

if(hour == 11){
alert("It's 11 AM! Woo");
} 
```

有关**日期对象**的完整文档，请参见此处：
[http ://www.tizag.com/javascriptT/javascriptdate.php](http://www.tizag.com/javascriptT/javascriptdate.php)

# linq-to-entities - RadFilter 中的 RadTreeList

> ID：10123689
> 
> 赞同：0
> 
> 时间：2012-04-12T12:35:09.327
> 
> 标签：linq-to-entities, radtreelist

我有一个从 Linq 返回到 Entity Framework 的对象，我可以在 RadTreeList 中列出它的数据，**但是**当我尝试在**RadFilter**过滤它的数据时，没有办法将过滤器的结果集成到我刚刚得到的对象中Linq 到实体。

你有什么方法可以过滤 RadTreeList 中的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:09:56.147

我的朋友向我推荐了那个

1.  我需要另一个 SqlClient 数据源，以便我可以将 RadFilter 的结果注入此数据源并将其应用于 RadTreeList。但是 RadTreeList 仍然存在另一个问题，因为 Result 没有按照我的预期正确显示（某些记录具有 parentID，但在过滤器中找不到此 parentID 的记录，因此它什么也不显示）。

我的另一个解决方案：

1.  我只允许按 RadTreeList 中最后一个子项的名称进行过滤。
2.  我创建了一个递归存储过程来搜索子项的所有父项。
3.  递归 SQL 语句链接 [http://msdn.microsoft.com/en-us/library/ms175972.aspx](http://msdn.microsoft.com/en-us/library/ms175972.aspx)
4.  我的结果将按我想要的那样分层显示。

# android - 如何让 ListView 内的 Spinner 在 Android 中工作？

> ID：10123695
> 
> 赞同：0
> 
> 时间：2012-04-12T12:35:27.890
> 
> 标签：android, listview, spinner

我正在开发一个应用程序，其中我需要一个 ListView，其行有一个 TextView、2 个 CheckBox 和一个 Spinner。

但是，我遇到`onItemSelected()`了 Spinner 的问题，因为每次显示每一行时都会调用它。在这种方法中，我使用选定的选项更新数据库记录，但是当 Android 自动调用它时，每次项目都会重置，因为 Android 用位置 0 调用它，这是数据库中更新的值。

我已经阅读了很多关于这个问题的链接`onItemSelected()`和一些黑客，但所有这些链接都是在没有 ListView 的情况下使用的。这里有什么要点吗？

我试图在列表中跟踪实际显示哪些位置以使其工作，但它没有。我认为这是因为 Android 中的回收导致调用了已显示的 Spinners 的故障排除方法！

所以重点是：在显示 Spinner 时，**我如何区分真正的呼叫，`onItemSelected()`因为用户选择与 Android 呼叫？**

这是扩展 SimpleCursorAdapter 的适配器的代码。

非常感谢你。

```
public ParticipationAdapter(Context context, int layout, Cursor c, String[] from, int[] to) {
    super(context, layout, c, from, to);
    mActivity = (Activity)context;
    ParticipationComment.ParticipationCommentManager commentManager = new ParticipationComment.ParticipationCommentManager(mActivity);
    mParticipationCommentsCursor = commentManager.get();
    mActivity.startManagingCursor(mParticipationCommentsCursor);
    commentManager.detach();
    mPositionsOfCursorIds = getPositionsOfCursorIds(mParticipationCommentsCursor);
    mSpinnerPositionsDisplayed = new ArrayList<Integer>();
}

@Override
public View getView(final int participationPosition, View convertView, ViewGroup parent) {
    final Cursor participationsCursor = getCursor();
    mActivity.startManagingCursor(participationsCursor);
    participationsCursor.moveToPosition(participationPosition);
    View participationRow;
    if (convertView == null) {
        participationRow = LayoutInflater.from(mActivity).inflate(R.layout.participation_row_student, null);
    } else {
        mSpinnerPositionsDisplayed.remove((Integer)convertView.getTag());
        participationRow = convertView;
    }
    participationRow.setTag(participationPosition);
    Spinner commentSpinner = (Spinner)participationRow.findViewById(R.id.participation_comment_id_spinner);
    SimpleCursorAdapter commentSpinnerAdapter = new SimpleCursorAdapter(
            mActivity,
            android.R.layout.simple_spinner_item,
            mParticipationCommentsCursor,
            new String[] {DatabaseManager.NAME},
            new int[] {android.R.id.text1}
    );
    commentSpinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    commentSpinner.setAdapter(commentSpinnerAdapter);
    long participationCommentId = participationsCursor.getLong(participationsCursor.getColumnIndex(DatabaseManager.PARTICIPATION_COMMENT_ID));
    if (participationCommentId != 0) {
        commentSpinner.setSelection(mPositionsOfCursorIds.get(participationCommentId));
    }
    commentSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            participationsCursor.moveToPosition(participationPosition);
            if (!mSpinnerPositionsDisplayed.contains(participationPosition)) {
                // Android calls this method the first time a Spinner is displayed,
                // to differentiate from a real user click we check if the current Spinner's position
                // in the ListView is being shown
                mSpinnerPositionsDisplayed.add(participationPosition);
            } else {
                ParticipationComment participationComment = new ParticipationComment((Cursor)parent.getItemAtPosition(position));
                Participation.ParticipationManager participationManager = new Participation.ParticipationManager(mActivity);
                Participation participation = new Participation(participationsCursor);
                participation.setConnectionProfileParticipationCommentId(participationComment.getConnectionProfileId());
                participation.setParticipationCommentId(participationComment.getIdOpenErp());
                participation.setChanged(true);
                participationManager.update(participation);
                participationManager.detach();
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {
            // Not used
        }
    });
    TextView studentName = (TextView)participationRow.findViewById(R.id.participation_student_name);
    studentName.setText(participationsCursor.getString(participationsCursor.getColumnIndex(DatabaseManager.NAME)));
    CheckBox expectedPresent = (CheckBox)participationRow.findViewById(R.id.participation_expected_present_value);
    expectedPresent.setChecked(participationsCursor.getInt(participationsCursor.getColumnIndex(DatabaseManager.EXPECTED_PRESENT)) == 1);
    CheckBox present = (CheckBox)participationRow.findViewById(R.id.participation_present_value);
    present.setChecked(participationsCursor.getInt(participationsCursor.getColumnIndex(DatabaseManager.PRESENT)) == 1);
    return participationRow;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:51:49.373

更好的方法是使用 AlertDialog Variant .. 像[这样](http://developer.android.com/guide/topics/ui/dialogs.html).. 并创建一个按钮，该按钮最初将第一个选择作为其 Text 并根据 AlertDialog 选择进行更改..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:44:09.577

使用一个小标志来丢弃第一次调用 ItemSelected 怎么样？

# c# - 如何将 DirectSound 的 MaxSampleRate 配置在 20000 以上

> ID：10123697
> 
> 赞同：-1
> 
> 时间：2012-04-12T12:35:29.917
> 
> 标签：c#, .net, directsound

我正在编写小程序来输出生成的声音。

我的声卡能够达到 48000 甚至 192000 的采样率。它是 Realtek ALC883 7.1+2 声道高清音频，规格[可在此处找到](http://www.realtek.com.tw/products/productsView.aspx?Langid=1&PFid=28&Level=5&Conn=4&ProdID=44)。

但是，DirectSound 的 MaxSampleRate 的最大值是 20000？

我知道我可以从我的声卡中获得比最大值更好的效果，但是如何配置 DirectSound 以利用这一点？当我尝试以下操作时：

```
DirectSound ds = new DirectSound(DirectSound.GetDevices().First().DriverGuid);
MessageBox.Show(ds.Capabilities
                  .MaxSecondarySampleRate
                  .ToString(CultureInfo.InvariantCulture)); 
```

在消息框中显示的数字是“20000”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:14:15.350

可能是您的声卡不是设备列表中的第一个设备（例如，带有电视输出的视频卡会出现在列表中）。你应该看看`DeviceInformation.Description`房产。否则，可能是驱动程序有问题？

# powershell - `if (Test-Path...)` 是如何工作的？

> ID：10123698
> 
> 赞同：7
> 
> 时间：2012-04-12T12:35:31.633
> 
> 标签：powershell, syntax

在 PowerShell 中，**for 的语法`if`**如下：

```
if (<test1>)
    {<statement list 1>}
[elseif (<test2>)
    {<statement list 2>}]
[else
    {<statement list 3>}] 
```

另一个语法规则是，**对于子表达式，您需要**像这样使用括号：

```
 write-output (get-date) 
```

因此，结合这两个规则，我希望某些路径的测试需要用两组括号编写，如下所示：

```
if ((Test-Path ...)) {
    # do something
} 
```

但是，这也有效：

```
if (Test-Path ...) {
    # do something
} 
```

并且只是为了完整起见，这**是行不通**的：

```
if (!Test-Path ...) {
    # do something
} 
```

（在这里，您需要像往常一样将子表达式括在括号中）。

谁能解释这里适用的语法规则，以及我为什么只能使用一个括号来使用 IF 测试？是某种 PowerShell 魔法还是我误解了基本语法规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T21:21:39.830

参考[附录 C 中的 C.2.2：](http://www.manning.com/payette/AppCexcerpt.pdf) *Bruce Payette 的[Windows PowerShell in Action中](http://www.manning.com/payette/)[*的 PowerShell 语法*](http://www.manning.com/payette/AppCexcerpt.pdf)，我们有：*

 *```
<ifStatementRule> =
  'if' '(' <pipelineRule> ')' <statementBlockRule>
  [ 'elseif' '(' <pipelineRule> ')' <statementBlockRule> ]*
  [ 'else' <statementBlockRule> ]{0|1} 
```

这表明`(`and`)`标记是用于识别`if`语句的文字语法的一部分，并且文档中的`<test>`the[`about_If`](http://go.microsoft.com/fwlink/?LinkID=113234)指的是将被解析为布尔值的管道。

遵循管道规则，我们发现：

*   `Test-Path ...`解析`<cmdletCall>`为`<name> <parameterArgumentToken>`,
*   `!Test-Path ...`导致`<expressionRule>`of `<UnaryOperatorToken> <propertyOrArrayReferenceRule>`，当 cmdlet 调用无法匹配简单属性或数组规则时，它会失败，而
*   `!(Test-Path ...)`能够将带括号的 cmdlet 调用匹配为子表达式。

* * *

**编辑：**另请参阅[PowerShell 2.0 语言规范](http://www.microsoft.com/en-us/download/details.aspx?id=9706)（感谢[Roman 对另一个问题的回答](https://stackoverflow.com/a/10442985/2495)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T13:35:11.853

`if`定义子表达式之后的括号（如果`Test-Path`需要括号，那么我们需要括号`$num -eq 5`和所有其他表达式）.. not 运算符之后的附加括号是必需的，因为`Test-Path`需要在它被否定之前进行评估。您可以在没有 if 语句的情况下尝试此操作。

这不起作用：

```
PS> !Test-Path NonExistent.file 
```

这确实有效：

```
PS> !(Test-Path NonExistent.file) 
```*

# javascript - 如何让图片连续旋转？

> ID：10123700
> 
> 赞同：9
> 
> 时间：2012-04-12T12:35:35.297
> 
> 标签：javascript, jquery, html, css

) 我的屏幕左上角有一个星形图像想要连续旋转。所以谁能告诉我我们怎样才能让图片连续旋转浏览器Mozilla Firefox，Google chrome！？[Css 位置类型为“绝对”，图像分辨率：25*25 ]

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T12:41:45.420

```
@-webkit-keyframes rotate {
  from {
    -webkit-transform: rotate(0deg);
  }
  to { 
    -webkit-transform: rotate(360deg);
  }
}

img.star {
    -webkit-animation-name:            rotate; 
    -webkit-animation-duration:        0.5s; 
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
} 
```

添加`-moz-transform/animation`, `-ms-transform/animation`, 等规则以支持其他浏览器。

您还可以制作动画 GIF :)。

## 更新

大多数当前浏览器都提供动画支持，这意味着可以删除前缀：

*（对于反向旋转翻转“从”和“到”）*

```
@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to { 
    transform: rotate(360deg);
  }
}

img.star {
    animation-name:            rotate; 
    animation-duration:        0.5s; 
    animation-iteration-count: infinite;
    animation-timing-function: linear;
} 
```

速记：

```
img.star {
    animation: rotate 0.5s infinite linear;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T12:41:35.063

# 你可以用 CSS 做到这一点：（利用你的 GPU 核心）：

```
img{ 
    animation:2s rotate infinite linear; 
}

@keyframes rotate{
    100%{ transform:rotate(1turn) } // or 360deg
}
```

```
<img src="https://ih0.redbubble.net/image.364229144.1663/flat,200x200,075,t.jpg">
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T12:49:17.367

您可以使用 RaphaelJS，因为它是跨浏览器兼容的。例如，这段代码应该可以工作：

`<div id="paper" style="width:300px; height:200px"></div>`

`<script type="text/javascript" src="(link to downloaded copy of raphaeljs)"></script>`

```
<script type="text/javascript">
var paper = Raphael("paper");
var good_cat = paper.image( "http://pp19dd.com/_old/lily.png",40,20,96, 145);
var evil_cat = paper.image( "http://pp19dd.com/_old/cookie.png",160,20,96, 145);
var angle = 0;

setInterval( function() {
    angle += 45;       
    good_cat.stop().animate( { "transform": "R" + angle }, 300, "<>" );
}, 500 );

setInterval( function() {
    r = parseInt(Math.random() * 359);
    evil_cat.stop().animate( { "transform": "R" + r }, 300, "<>" );
}, 1000 );
</script> 
```

有关示例，请参见[http://jsfiddle.net/AJgrU/ 。](http://jsfiddle.net/AJgrU/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T12:50:22.873

一个带有 CSS3 动画和变换的 jsFiddle 工作示例：http: ~~[//jsfiddle.net/GcjKZ/1/](http://jsfiddle.net/GcjKZ/1/)~~ [http://jsfiddle.net/GcjKZ/3/](http://jsfiddle.net/GcjKZ/3/)

```
img { position: absolute; width: 25px; height: 25px; 
  -moz-animation: 3s rotate infinite linear  ;
  -moz-transform-origin: 50% 50%; 
  -webkit-animation: 3s rotate infinite linear  ;
  -webkit-transform-origin: 50% 50%;  
}

@-moz-keyframes rotate {
    0    { -moz-transform: rotate(0); } 
    100% { -moz-transform: rotate(360deg); }  
}

@-webkit-keyframes rotate {
    0%    { -webkit-transform: rotate(0); }
    100% { -webkit-transform: rotate(360deg); } 
} 
```

（对不起，我的星星不是很好居中）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T12:38:26.840

试试这个[http://code.google.com/p/jquery-rotate/](http://code.google.com/p/jquery-rotate/)

你可以这样做：

```
 var angle = 1;
  $(document).ready(function() {
        setInterval(function() {
                $("#pic").rotate(angle);
             }, 100);
 }); 
```

# cakephp - 多个授权组件的问题

> ID：10123701
> 
> 赞同：0
> 
> 时间：2012-04-12T12:35:37.093
> 
> 标签：cakephp, authorization, cakephp-2.0

我真的很喜欢使用 CakePHP 的身份验证和授权组件，并创建了自定义组件来适应我所处的情况。

我的问题源于我现在想要两个级别的授权。

在我的 AppController 中，我的授权配置如下

```
public $components = array(
    "Auth" => array(
        'authorize' => array('controller','App'),
    )
); 
```

“App”链接到自定义 AppAuthorize 组件，“控制器”调用 ControllerAuthorize 组件。

虽然这些组件中的每一个都可以很好地单独工作，但它们的交互会导致问题。

问题是，如果控制器授权（通过 isAuthorized()）返回 true，则不会检查第二个组件。相反，如果控制器授权返回 false，则检查 AppAuthorize。

我想要做的是让他们两个都被检查；返回两个响应的逻辑 AND 而不是当前返回的逻辑 OR。

有没有人有任何想法解决这个问题，或者这是否可以通过 cake 的授权组件实现？

谢谢

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:43:44.750

为什么不简单地用 AppAuthorize 扩展 ControllerAuthorize 类并添加您需要的条件并检查类中的 AND 条件。

当 Authorize 对象之一返回 true 时，Cake 本身将始终授予访问权限。

# android - android小部件-重启后并不总是注册待处理的意图

> ID：10123703
> 
> 赞同：0
> 
> 时间：2012-04-12T12:35:40.790
> 
> 标签：android, android-widget, broadcastreceiver

我正在编写一个包含 2 个按钮的小部件。问题是 - 有时，当小部件被删除/添加到屏幕时，按钮不起作用，似乎它们没有附加任何监听器。我在 BroadcastReceiver 中使用以下代码：

```
@Override
public void onUpdate(final Context context, final AppWidgetManager aAppWidgetManager,
                     final int[] appWidgetIds) {
    super.onUpdate(context, aAppWidgetManager, appWidgetIds);
    Log.d("Widget_On_update", "Total widgets : " + appWidgetIds.length);
    for (final int widgetId : appWidgetIds) {
        Log.d("Widget_On_update", "Updating widget : " + widgetId);
        final RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        updateActionListener(true, context, appWidgetIds, remoteViews, UPDATE_DATA_ACTION, id.button_data_update);
        updateActionListener(true, context, appWidgetIds, remoteViews, UPDATE_WIFI_ACTION, id.button_wifi_update);
        aAppWidgetManager.updateAppWidget(widgetId, remoteViews);
    }
    updateStatus(context);
}

private void updateActionListener(final boolean add, final Context context, final int[] appWidgetIds,
                                  final RemoteViews aRemoteViews, final String aAction, final int aViewId) {
    // Register an onClickListener
    final Intent intent = new Intent(context, DataToggleWidgetProvider.class);
    intent.setAction(aAction);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
    final PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    if (add) {
        aRemoteViews.setOnClickPendingIntent(aViewId, pendingIntent);
    } else {
        pendingIntent.cancel();
    }
} 
```

我为PendingIntent.getBroadcast的第二个参数尝试了不同的值，比如Math.random，一个静态计数器等等。这些方法都不起作用。谁能帮我 ？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:54:39.270

您是否检查过`onUpdate()`重启后正在您的小部件上执行的操作？您可能需要考虑通过`onEnabled()`. 请参阅相关问题的[此答案。](https://stackoverflow.com/a/2032105/154306)

# java - EJB 3.x 在测试 apsect 方面比 EJB 2.1 有什么优势

> ID：10123707
> 
> 赞同：0
> 
> 时间：2012-04-12T12:35:45.200
> 
> 标签：java, ejb, ejb-3.0

我知道与 EJB 2.1 相比，EJB3.x 有很多优点。
我需要的是测试方面。

EJB3.x 在测试方面的优势是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:42:16.107

例如，EJB 3.1 指定了一个可以在单元测试中使用的可嵌入 EJBContainer：

[http://docs.oracle.com/javaee/6/api/javax/ejb/embeddable/EJBContainer.html](http://docs.oracle.com/javaee/6/api/javax/ejb/embeddable/EJBContainer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:56:14.533

注意 OpenEJB 支持使用 EJB 3.1 Embedded EJBContainer API 测试 EJB 2.x 组件。

此示例显示了一个 EJB 3.0 bean，它具有 EJB 2.x 接口并使用 JUnit 和 javax.ejb.embeddable.EJBContainer API 进行了单元测试：

*   [http://openejb.apache.org/examples-trunk/component-interfaces](http://openejb.apache.org/examples-trunk/component-interfaces)

如果使用了所有 EJB 2.x 特性，那么基本设置仍然有效。该示例的好处在于，它可以向您展示如何在仍然拥有 EJB 3 样式 bean 的同时维护 EJB 2.x 视图。

这可能很好，因为听起来您可能正在从 EJB 2.x 迁移到 3.x，通常最困难的事情不是删除 xml 并转换为注释，而是维护所有使用 EJBHome/EJBObject 接口的代码（或本地版本）。

# android - 带和不带国际前缀的电话号码

> ID：10123709
> 
> 赞同：0
> 
> 时间：2012-04-12T12:35:49.417
> 
> 标签：android

假设我收到一个联系人的短信。如果我然后从 SMS 中提取他们的电话号码，这个电话号码也会有国际前缀。现在假设我想向这个联系人发送短信，但我避免写国际前缀。开箱即用的两条消息不会出现在同一个线程中。当它们仅在前缀上有所不同时，如何显示来自联系人和发送给联系人的所有消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:38:58.057

定义一个常数 M ，在其中放置最小匹配长度，然后比较两个数字的最后 M 位。

# osgi - 集成 Guice 和 OSGi 服务

> ID：10123710
> 
> 赞同：5
> 
> 时间：2012-04-12T12:35:52.067
> 
> 标签：osgi, guice, peaberry

整合 Guice 和 OSGi 的现状如何？即从 Guice 暴露 OSGi 服务，注入它们等。

[Peaberry 的主页](http://code.google.com/p/peaberry/)提到“Guice trunk（将成为 2.0）”，但 1.2 似乎是最新的，因为它修复了[http://code.google.com/p/peaberry/issues/detail?id=58](http://code.google.com/p/peaberry/issues/detail?id=58)。它的作者已经切换了[Sisu](http://www.eclipse.org/sisu/)，但它似乎还没有发布。还有其他人吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:35:34.360

Guice 3.0 和 Peaberry 1.2 的集成目前正在按预期工作。只是页面似乎有点过时，上面提到的片段指的是已被取代的 Guice 2.0 主干。

[当您在此处](http://code.google.com/p/peaberry/source/list)查看存储库历史时，您引用的 Bug 已针对 1.2 Peaberry 版本进行了修复。

确实，Sisu 当前已开发并且它解决了（至少我如何解释它）Guice + Peaberry + OSGi 目前存在的一些额外问题（例如自动组件扫描和发现），但它还没有准备好。

在我看来，Peaberry 解决了同样由[Spring Dynamic Modules](http://www.springsource.org/osgi)（现在的[Eclipse Gemini Blueprint](http://www.eclipse.org/gemini/blueprint/)）解决的 DI 和 OSGi 集成案例，因此非常有用。此外，我认为 Peaberry 项目不一定会被 sisu 放弃。

如果你坚持 OSGi 的想法，即开发通过服务连接的独立包，但你想在其中使用 DI，Peaberry 目前提供了你需要的一切。

`HttpService`我目前在使用这种组合时面临的唯一问题是官方的 guice-servlet 模块默认情况下似乎无法与 OSGi 一起使用。

# c# - c#中的定时器滴答

> ID：10123712
> 
> 赞同：2
> 
> 时间：2012-04-12T12:35:55.527
> 
> 标签：c#

如何将计时器设置为以秒为单位？当我使用工具箱中的计时器时，它没有任何更改就开始使用另一个时间单位。
如果您能给我提供任何帮助，我将不胜感激。

我有这样的事情：

```
t = 0; 
timer1.Start(); 
if (t == 600) 
    timer1.Stop(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:40:17.287

[Timer.Interval](http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx)属性以毫秒为单位。您应该将值乘以 1000 以将间隔设置为秒。

```
aTimer.Interval = 1*1000; // 1 second interval
aTimer.Interval = 2*1000; // 2 seconds interval 
```

**编辑：**

如果我理解正确，您应该像这样注册[Timer.Tick 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.tick.aspx)

```
aTimer.Tick += new EventHandler(TimerEventProcessor); 
```

并检查`t`其事件处理程序中的值。如果`t == 600`那时你可以停止计时器

```
private static void TimerEventProcessor(Object myObject, EventArgs myEventArgs)
{
    ...
    t++;
    if(t == 600)
       aTimer.Stop();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:37:48.493

**编辑** 使用`timer.interval = 1000 * n;`其中 n 是刻度之间的秒数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T12:36:52.143

将您希望的秒数乘以 1000，它使用开箱即用的毫秒数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T12:42:04.760

计时器使用毫秒作为时间单位，您可以根据需要进行计算。在这种情况下，您想延迟几秒钟，您可以执行以下操作：

```
int secondsInterval = 5;
timer.Interval = secondsInterval * 1000; 
```

希望这可以帮助。

# jasper-reports - 未能读取架构文档

> ID：10123715
> 
> 赞同：1
> 
> 时间：2012-04-12T12:36:17.007
> 
> 标签：jasper-reports, jasperserver

我制作了一个 Web 应用程序，以便执行托管在`JasperServer`. 一些报告与“ReportExecution”类型的超链接和报告参数链接为_report。超链接放在我的报告字段上。在 java 中编译该 jrxml 文件时，我收到如下错误

```
org.xml.sax.SAXParseException: schema_reference.4: 
Failed to read schema document 'http://jaspersoft.com/schema/fusion.xsd', because 
1) could not find the document; 
2) the document could not be read;
3) the root element of the document is not <xsd:schema>. 
```

任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:10:46.370

添加 jasperreports-fusion.jar 来解决这个问题。您可以在以下位置找到 jar ireport 安装目录\ireportpro\modules\ext

# android - Android Camera Intent 设置分辨率

> ID：10123717
> 
> 赞同：2
> 
> 时间：2012-04-12T12:36:25.717
> 
> 标签：android, android-intent, camera, android-camera-intent

我正在使用 Android Camera Intent 在我的应用程序中启动摄像头捕获

这是我的问题...我需要强制相机使用它的最低分辨率我已经列出了所有可能的分辨率

但是当我做这样的事情时：

```
Camera c = Camera.open();
Parameters cp = c.getParameters();
List<Size> ls = cp.getSupportedPictureSizes();
cp.setPictureSize(ls.get(0).width, ls.get(0).height);
cp.setPreviewSize(ls.get(0).width, ls.get(0).height); 
```

相机意图打开一个错误对话框，说明相机不能使用。

有什么帮助吗？

除了使用相机之外，我还需要更多权限吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:59:37.063

尝试将其添加到您的清单中

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

并且由于您操纵相机参数，因此您应该将操纵的参数设置为相机，如下所示：

```
c.setParameters(cp); 
```

还要确保所有相机对象都调用 release() 方法。

# objective-c - 使用 Apple LLVM 编译器时出现双重释放错误

> ID：10123720
> 
> 赞同：0
> 
> 时间：2012-04-12T12:36:35.887
> 
> 标签：objective-c, ios, free, llvm, nslocalizedstring

我有一个为 iOS 4.x 编写的项目。最近我使用 XCode 4.3.2 将它更新到 iOS5。奇怪的是，在使用 Apple LLVM 编译器时，应用程序每次都停止并出现双重释放错误。在我改回 LLVM GCC 后，它工作正常。这两者有什么区别吗？代码如下所示：

```
- (NSArray *)readCourselist {

    NSString *path = [[self currentUserPathString] stringByAppendingPathComponent:kUserCourseListFilename];

    return [NSArray arrayWithContentsOfFile:path];

}

- (NSArray *)getCourselist {

    NSArray *courseRawArray = [self readCourselist];

    for (NSDictionary *courseDic in courseRawArray) {

        CourseModel *courseModel = [[CourseModel alloc] init];

        courseModel.courseID = [[courseDic objectForKey:kKeyID] intValue];

        courseModel.courseNameString = [courseDic objectForKey:kKeyTitle];

        NSArray *lectureArray = [courseDic objectForKey:kKeyLecture];

        for (NSDictionary *lectureDic in lectureArray) {

            LectureModel *lectureModel = [[LectureModel alloc] init];

            NSString *startString = [lectureDic objectForKey:kKeyStart];

            if ([startString isEqualToString:@"8:00"]) {

                lectureModel.lectureNumber = 1;

            }

            else if ([startString isEqualToString:@"9:50"]) {

                lectureModel.lectureNumber = 2;

            }

            lectureModel.location = [lectureDic objectForKey:kKeyWhere];  //@property of location is retain

            [courseModel.lectureArray addObject:lectureModel];

            [lectureModel release];

        }

        [courseArray addObject:courseModel];

        [courseModel release];

    }

} 
```

随着更多的追踪，我发现它是

```
lectureModel.location = [lectureDic objectForKey:kKeyWhere]; 
```

这真的很重要。在我的 LectureModel 中，位置声明如下

```
@property (nonatomic, retain) NSString *location;

@synthesize location;

- (id)init {
    location = NSLocalizedString(@"未知", nil);
} 
```

删除 NSLocalizedString 一切正常。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:22:38.213

通常与`NSDictionary`您一起工作时要使用`valueForKey:`而不是`objectForKey:`，但我认为这不是问题所在。如果您将其转回 LLVM，并使用“Zombies”运行 Instruments，它应该会指出每个免费（嗯，发布）发生的确切位置。

# c++ - 覆盖 delete[] 运算符？

> ID：10123721
> 
> 赞同：0
> 
> 时间：2012-04-12T12:36:36.103
> 
> 标签：c++, memory-management, garbage-collection, overriding

我目前正在实现一个基本的*垃圾收集器*，其目的是在程序结束时删除所有左侧动态分配的对象。我希望类文档更清楚：

```
/**
 * This basic garbage collector provides easy memory leak prevention.
 * Just derive your class from utils::Object and the collector will
 * care about freeing dynamically allocated objects. This basic
 * implementation will just free all internal cached objects at the end
 * of program. So allocated memory which was not freed manually will
 * stay blocked up to this point.
 */
class GarbageCollector {
private:
    // All object collector should care about (true means array)
    std::map< Object*, bool > objects;

    GarbageCollector();
    /**
     * Free left allocated memory.
     */
    ~GarbageCollector() {
        std::map< Object*, bool >::iterator it = objects.begin();
        int counter = 0;
        while( it != objects.end() ) {
            // save pointer and iterate to next because
            // delete will remove obj from object set
            Object* obj = it->first;
            bool array = it->second;
            ++it;
            ++counter;
            if( array ) {
                delete[] obj;
            }
            else
                delete obj;
        }
        if( counter )
            std::cout << "GC: " << counter << " object(s) freed\n";
    }
public:
    /**
     * @return Static collector instance.
     */
    static GarbageCollector& getCollector();

    void addObject( Object* obj );
    void addArray( Object* obj );
    void remove( Object* obj );
}; 
```

`Object`其他类将从中继承的这个基类会将分配内存的指针添加到这个 gc：

```
class Object {
public:
    void* operator new( std::size_t size ) {
        void* ptr = malloc( size );
        if( !ptr )
            throw std::bad_alloc();
        GarbageCollector::getCollector().addObject( static_cast<Object*>(ptr) );
        return ptr;
    }
    void operator delete( void* ptr ) {
        GarbageCollector::getCollector().remove( static_cast<Object*>(ptr) );
        free( ptr );
    }
    void* operator new[]( std::size_t size ) {
        void* ptr = malloc( size );
        if( !ptr )
            throw std::bad_alloc();
        GarbageCollector::getCollector().addArray( static_cast<Object*>(ptr) );
        return ptr;
    }
    void operator delete[]( void* ptr ) {
        GarbageCollector::getCollector().remove( static_cast<Object*>(ptr) );
        free( ptr );
    }
}; 
```

这适用于新语句。但是如果尝试通过 new[] 分配一个数组，程序就会崩溃。*Valgrind --leak-check=yes*给出以下输出：

```
==3030== Invalid read of size 8
==3030==    at 0x408305: utils::GarbageCollector::~GarbageCollector() (garbageCollector.cpp:40)
==3030==    by 0x55A4820: __run_exit_handlers (exit.c:78)
==3030==    by 0x55A48A4: exit (exit.c:100)
==3030==    by 0x558A313: (below main) (libc-start.c:258)
==3030==  Address 0x5b8e038 is 8 bytes before a block of size 144 alloc'd
==3030==    at 0x4C28F9F: malloc (vg_replace_malloc.c:236)
==3030==    by 0x409A59: utils::Object::operator new[](unsigned long) (object.cpp:45)
==3030==    by 0x409B58: start() (main.cpp:49)
==3030==    by 0x409C30: main (main.cpp:54)
==3030== 
==3030== Invalid free() / delete / delete[]
==3030==    at 0x4C282E0: free (vg_replace_malloc.c:366)
==3030==    by 0x409AE8: utils::Object::operator delete[](void*) (object.cpp:54)
==3030==    by 0x408339: utils::GarbageCollector::~GarbageCollector() (garbageCollector.cpp:40)
==3030==    by 0x55A4820: __run_exit_handlers (exit.c:78)
==3030==    by 0x55A48A4: exit (exit.c:100)
==3030==    by 0x558A313: (below main) (libc-start.c:258)
==3030==  Address 0x5b8e038 is 8 bytes before a block of size 144 alloc'd
==3030==    at 0x4C28F9F: malloc (vg_replace_malloc.c:236)
==3030==    by 0x409A59: utils::Object::operator new[](unsigned long) (object.cpp:45)
==3030==    by 0x409B58: start() (main.cpp:49)
==3030==    by 0x409C30: main (main.cpp:54)
==3030== 
GC: 1 object(s) freed
==3030== 
==3030== HEAP SUMMARY:
==3030==     in use at exit: 144 bytes in 1 blocks
==3030==   total heap usage: 8 allocs, 8 frees, 896 bytes allocated
==3030== 
==3030== 144 bytes in 1 blocks are definitely lost in loss record 1 of 1
==3030==    at 0x4C28F9F: malloc (vg_replace_malloc.c:236)
==3030==    by 0x409A59: utils::Object::operator new[](unsigned long) (object.cpp:45)
==3030==    by 0x409B58: start() (main.cpp:49)
==3030==    by 0x409C30: main (main.cpp:54)
==3030== 
==3030== LEAK SUMMARY:
==3030==    definitely lost: 144 bytes in 1 blocks
==3030==    indirectly lost: 0 bytes in 0 blocks
==3030==      possibly lost: 0 bytes in 0 blocks
==3030==    still reachable: 0 bytes in 0 blocks
==3030==         suppressed: 0 bytes in 0 blocks
==3030== 
==3030== For counts of detected and suppressed errors, rerun with: -v
==3030== ERROR SUMMARY: 3 errors from 3 contexts (suppressed: 4 from 4) 
```

我调试了程序，gc 正试图删除 new[] 返回的地址处的内存。你能告诉我我的错在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:56:22.220

您不能将`delete[]`表达式与从返回的指针一起使用`operator new[]`。您必须`operator delete[]`直接使用。

这是因为`new[]`expression 有时会调整 的结果`operator new[]`，而`delete[]`expression 会向相反方向调整参数所以：

*   如果您有一个`new[]`表达式返回的指针，请使用表达式释放它`delete[]`。
*   如果您有一个由对 的调用返回的指针，请通过对 的调用来`operator new[]`释放它`operator delete[]`。

一般来说，对于`new`expression/ `operator new`/ `delete`expression/也是如此`operator delete`，但 GCC 可以让您摆脱这一点。

这是一个技术答案，仅涉及崩溃。注释中讨论了代码作为内存泄漏预防工具的有用性。

**更新**可以在[http://ideone.com/0atp5找到一个快速的论文示例](http://ideone.com/0atp5)

请注意，如果您调用`operator delete[]`而不是`delete[]`,

*   不会调用析构函数（但如果您自动释放所有对象，则无论如何都不需要析构函数）
*   您不需要将指针转换为`Object*`和返回，只需将所有内容存储为`void*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:40:14.157

`GarbageCollector::~GarbageCollector()`调用`Object::operator[] delete`and `Object::operator delete`，它会`GarbageCollector::objects`在迭代地图时更改地图。尝试先复制：

```
...
std::map< Object*, bool > objectsCopy = objects;
std::map< Object*, bool >::iterator it = objectsCopy.begin();
int counter = 0;
while( it != objectsCopy.end() ) {
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:40:17.070

如果您仅在程序结束时执行此操作，请禁止 remove() 调用以根本不删除它。该对象将在稍后立即销毁，无论如何地图将为空。

# batch-file - 将子批处理文件输出写入为父批处理文件创建的日志文件

> ID：10123731
> 
> 赞同：0
> 
> 时间：2012-04-12T12:37:08.810
> 
> 标签：batch-file

我有一个批处理文件 b1.bat，它在内部启动另外两个批处理文件 b2.bat 和 b3.bat，b2.bat 内部调用 b4.bat 和根批处理文件 b1.bat，等到这三个（b2，b3 b4) 完成。总之，这样的场景：
b1.bat -> b2.bat -> b4.bat
           -> b3.bat

我想将所有 4 个批处理文件（b1.bat、b2.bat、b3.bat 和 b4.bat）的输出写入单个日志文件 my_log.txt。我想以最小的努力做到这一点，即，改变少不。批处理文件，因为我有很多这样的批处理文件而没有记录。所以我想为他们提供日志记录。I) 是否可以控制父批处理文件即b1.bat 的日志文件输出？II）我是否需要使用将输出写入日志文件的重定向运算符更改所有批处理文件？我找不到合适的解决方案。请在这方面给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:22:31.173

假设您没有使用 START 进行任何异步处理，您应该能够简单地使用：

```
b1.bat >my_log.txt 
```

您可能还希望通过附加`2>&1`到命令来捕获错误消息。

# php - 将文本表单行分解为数组

> ID：10123733
> 
> 赞同：0
> 
> 时间：2012-04-12T12:37:10.043
> 
> 标签：php

我有一个脚本可以为输入的 URL 提取 Google Pagerank。

我尝试编辑脚本，以便您可以粘贴一个 URL 列表，而不是只能放入 3 个 URL。

不幸的是，当我在其中添加一些 URL 时，它们只是将它们彼此相邻，并且不显示 Pagerank。

如果你想测试它并看到你可以在这里找到它：http: [//php-playground.co.cc/testdir/pagerank.php](http://php-playground.co.cc/testdir/pagerank.php)

（人们一直在报告该 URL 上的病毒，但这只是因为它是一个 co.cc 域，如果您担心，请不要点击 :)

这是代码：

```
<?php
//If the form was submitted
if(isset($_GET['url[]'])){
    //Put every new line as a new entry in the array
    $url = explode("\n",trim($_POST["url[]"]));
        }

        echo "$url";
?>
<?php
function fetch_google_page_rank($url) {
$url = strstr($url,"http://")? $url:"http://".$url;
$fp = fsockopen("toolbarqueries.google.com", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
    } else {
    $out = "GET /tbr?client=navclient-    auto&ch=".CheckHash(HashURL($url))."&features=Rank&q=info:".$url."&num=100&filter=0   HTTP/1.1\r\n";
    $out .= "Host: toolbarqueries.google.com\r\n";
    $out .= "User-Agent: Mozilla/4.0 (compatible; GoogleToolbar 2.0.114-big; Windows XP   5.1)\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);

    while (!feof($fp)) {
        $data = fgets($fp, 128);
        $pos = strpos($data, "Rank_");
    if($pos === false){} else{
            $pagerank = substr($data, $pos + 9);
        }
    }
    fclose($fp);
    return (int)$pagerank;
}
}

function StrToNum($Str, $Check, $Magic) {
$Int32Unit = 4294967296; // 2^32
$length = strlen($Str);
for ($i = 0; $i < $length; $i++) {
    $Check *= $Magic;
    if ($Check >= $Int32Unit) {
        $Check = ($Check - $Int32Unit * (int) ($Check / $Int32Unit));
        $Check = ($Check < -2147483648)? ($Check + $Int32Unit) : $Check;
    }
    $Check += ord($Str{$i});
}
return $Check;
}

function HashURL($String) {
$Check1 = StrToNum($String, 0x1505, 0x21);
$Check2 = StrToNum($String, 0, 0x1003F);
$Check1 >>= 2;
$Check1 = (($Check1 >> 4) & 0x3FFFFC0 ) | ($Check1 & 0x3F);
$Check1 = (($Check1 >> 4) & 0x3FFC00 ) | ($Check1 & 0x3FF);
$Check1 = (($Check1 >> 4) & 0x3C000 ) | ($Check1 & 0x3FFF);
$T1 = (((($Check1 & 0x3C0) << 4) | ($Check1 & 0x3C)) << 2 ) | ($Check2 & 0xF0F );
$T2 = (((($Check1 & 0xFFFFC000) << 4) | ($Check1 & 0x3C00)) << 0xA) | ($Check2 &    0xF0F0000 );
return ($T1 | $T2);
}

function CheckHash($Hashnum) {
$CheckByte = 0;
$Flag = 0;
$HashStr = sprintf('%u', $Hashnum) ;
$length = strlen($HashStr);
for ($i = $length - 1; $i >= 0; $i --) {
    $Re = $HashStr{$i};
    if (1 === ($Flag % 2)) {
        $Re += $Re;
        $Re = (int)($Re / 10) + ($Re % 10);
    }
    $CheckByte += $Re;
    $Flag ++;
}
$CheckByte %= 10;
if (0!== $CheckByte) {
    $CheckByte = 10 - $CheckByte;
    if (1 === ($Flag % 2) ) {
        if (1 === ($CheckByte % 2)) {
            $CheckByte += 9;
        }
        $CheckByte >>= 1;
    }
}
return '7'.$CheckByte.$HashStr;
}
// Google PR Finder END

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>GET Google PR</title>

<style type="text/css">
<!--
body,td,th {
font-family: Verdana, Geneva, sans-serif;
font-size: 11px;
color: #333;
}
body {
margin-left: 20px;
margin-top: 20px;
}
pre{ font-size:15px;}
-->
</style></head>
<body>

<h2>Google PR</h2>
<p>Enter your URLs </p>
<form action="" method="POST">
<p>
<textarea name="url[]" rows="10" cols="50"></textarea>
<!--<input name="url[]" type="text" id="url[]" value="http://" size="80" /><br />
<input name="url[]" type="text" id="url[]" value="http://" size="80" /><br />
<input name="url[]" type="text" id="url[]" value="http://" size="80" /><br />-->
</p>
<p><input name="findpr" type="submit" value="Find Google PageRank" />
<br />
<br />
</p>
</form>
<table>
<pre>
<?php
if(isset($_POST['findpr']))
{
foreach($_POST['url'] as $key => $url)
{
    if( $_POST['url'][$key]!="http://")
    echo "<td><b>PR:</td><td>" .  fetch_google_page_rank($_POST['url'][$key]) .     " </td><td></b>&raquo;</td><td>" . $_POST['url'][$key]."</td></tr><br />";
}
}
?>
</pre>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:45:48.207

固定代码：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
function fetch_google_page_rank($url) {
$url = strstr($url,"http://")? $url:"http://".$url;
$fp = fsockopen("toolbarqueries.google.com", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
    } else {
    $out = "GET /tbr?client=navclient-auto&ch=".CheckHash(HashURL($url))."&features=Rank&q=info:".$url."&num=100&filter=0   HTTP/1.1\r\n";
    $out .= "Host: toolbarqueries.google.com\r\n";
    $out .= "User-Agent: Mozilla/4.0 (compatible; GoogleToolbar 2.0.114-big; Windows XP   5.1)\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);

    while (!feof($fp)) {
        $data = fgets($fp, 128);
        $pos = strpos($data, "Rank_");
    if($pos === false){} else{
            $pagerank = substr($data, $pos + 9);
        }
    }
    fclose($fp);
    return (int)$pagerank;
}
}

function StrToNum($Str, $Check, $Magic) {
$Int32Unit = 4294967296; // 2^32
$length = strlen($Str);
for ($i = 0; $i < $length; $i++) {
    $Check *= $Magic;
    if ($Check >= $Int32Unit) {
        $Check = ($Check - $Int32Unit * (int) ($Check / $Int32Unit));
        $Check = ($Check < -2147483648)? ($Check + $Int32Unit) : $Check;
    }
    $Check += ord($Str{$i});
}
return $Check;
}

function HashURL($String) {
$Check1 = StrToNum($String, 0x1505, 0x21);
$Check2 = StrToNum($String, 0, 0x1003F);
$Check1 >>= 2;
$Check1 = (($Check1 >> 4) & 0x3FFFFC0 ) | ($Check1 & 0x3F);
$Check1 = (($Check1 >> 4) & 0x3FFC00 ) | ($Check1 & 0x3FF);
$Check1 = (($Check1 >> 4) & 0x3C000 ) | ($Check1 & 0x3FFF);
$T1 = (((($Check1 & 0x3C0) << 4) | ($Check1 & 0x3C)) << 2 ) | ($Check2 & 0xF0F );
$T2 = (((($Check1 & 0xFFFFC000) << 4) | ($Check1 & 0x3C00)) << 0xA) | ($Check2 &    0xF0F0000 );
return ($T1 | $T2);
}

function CheckHash($Hashnum) {
$CheckByte = 0;
$Flag = 0;
$HashStr = sprintf('%u', $Hashnum) ;
$length = strlen($HashStr);
for ($i = $length - 1; $i >= 0; $i --) {
    $Re = $HashStr{$i};
    if (1 === ($Flag % 2)) {
        $Re += $Re;
        $Re = (int)($Re / 10) + ($Re % 10);
    }
    $CheckByte += $Re;
    $Flag ++;
}
$CheckByte %= 10;
if (0!== $CheckByte) {
    $CheckByte = 10 - $CheckByte;
    if (1 === ($Flag % 2) ) {
        if (1 === ($CheckByte % 2)) {
            $CheckByte += 9;
        }
        $CheckByte >>= 1;
    }
}
return '7'.$CheckByte.$HashStr;
}
// Google PR Finder END

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>GET Google PR</title>

<style type="text/css">
<!--
body,td,th {
font-family: Verdana, Geneva, sans-serif;
font-size: 11px;
color: #333;
}
body {
margin-left: 20px;
margin-top: 20px;
}
pre{ font-size:15px;}
-->
</style></head>
<body>

<h2>Google PR</h2>
<p>Enter your URLs </p>
<form action="" method="POST">
<p>
<textarea name="url" rows="10" cols="50"></textarea>
<!--<input name="url[]" type="text" id="url[]" value="http://" size="80" /><br />
<input name="url[]" type="text" id="url[]" value="http://" size="80" /><br />
<input name="url[]" type="text" id="url[]" value="http://" size="80" /><br />-->
</p>
<p><input name="findpr" type="submit" value="Find Google PageRank" />
<br />
<br />
</p>
</form>
<table>
<pre>
<?php

if(isset($_POST['findpr']))
{
$url = explode("\n",$_POST["url"]);
foreach($url as $key => $url_l)
{
$url_l=trim($url_l);
    if( $url_l!="http://")
    echo "<td><b>PR:</td><td>" .  fetch_google_page_rank($url_l) .     " </td><td></b>&raquo;</td><td>" . $url_l."</td></tr><br />";
}
}
?>
</pre>
</table>
</body>
</html> 
```

# java - 从 Java 中获取有效的屏幕尺寸

> ID：10123735
> 
> 赞同：28
> 
> 时间：2012-04-12T12:37:11.533
> 
> 标签：java, swing, awt

我想获得有效的屏幕尺寸。即：没有任务栏的屏幕大小（或 Linux/Mac 上的等价物）。

我目前正在使用...

```
component.getGraphicsConfiguration().getBounds() 
```

...并根据操作系统减去默认任务栏大小，但我想要一种即使用户调整/移动任务栏也能工作的方法。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-12T15:10:24.507

GraphicsEnvironment 有一个方法，它返回最大可用大小，计算所有任务栏等，无论它们在哪里对齐：

```
GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds() 
```

注意：在多显示器系统上，`getMaximumWindowBounds()`返回整个显示区域的边界。要获得单个显示器的可用边界，请使用`GraphicsConfiguration.getBounds()`和`Toolkit.getScreenInsets()`，如其他答案所示。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-04-12T12:50:10.067

这可以确定没有任务栏的屏幕大小（以像素为单位）

```
//size of the screen
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();

//height of the task bar
Insets scnMax = Toolkit.getDefaultToolkit().getScreenInsets(getGraphicsConfiguration());
int taskBarSize = scnMax.bottom;

//available size of the screen 
setLocation(screenSize.width - getWidth(), screenSize.height - taskBarSize - getHeight()); 
```

编辑

有人可以在 Xx_nix 和 Mac OSX 上运行此代码并检查 JDialog 是否真的放在右下角？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;

public class NotificationPopup {

    private static final long serialVersionUID = 1L;
    private LinearGradientPaint lpg;
    private JDialog dialog = new JDialog();
    private BackgroundPanel panel = new BackgroundPanel();

    public NotificationPopup() {
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        Insets scnMax = Toolkit.getDefaultToolkit().
                getScreenInsets(dialog.getGraphicsConfiguration());
        int taskBarSize = scnMax.bottom;
        panel.setLayout(new GridBagLayout());
        GridBagConstraints constraints = new GridBagConstraints();
        constraints.gridx = 0;
        constraints.gridy = 0;
        constraints.weightx = 1.0f;
        constraints.weighty = 1.0f;
        constraints.insets = new Insets(5, 5, 5, 5);
        constraints.fill = GridBagConstraints.BOTH;
        JLabel l = new JLabel("You have got 2 new Messages.");
        panel.add(l, constraints);
        constraints.gridx++;
        constraints.weightx = 0f;
        constraints.weighty = 0f;
        constraints.fill = GridBagConstraints.NONE;
        constraints.anchor = GridBagConstraints.NORTH;
        JButton b = new JButton(new AbstractAction("x") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(final ActionEvent e) {
                dialog.dispose();
            }
        });
        b.setOpaque(false);
        b.setMargin(new Insets(1, 4, 1, 4));
        b.setFocusable(false);
        panel.add(b, constraints);
        dialog.setUndecorated(true);
        dialog.setSize(300, 100);
        dialog.setLocation(screenSize.width - dialog.getWidth(),
                screenSize.height - taskBarSize - dialog.getHeight());
        lpg = new LinearGradientPaint(0, 0, 0, dialog.getHeight() / 2,
                new float[]{0f, 0.3f, 1f}, new Color[]{new Color(0.8f, 0.8f, 1f),
                    new Color(0.7f, 0.7f, 1f), new Color(0.6f, 0.6f, 1f)});
        dialog.setContentPane(panel);
        dialog.setVisible(true);
    }

    private class BackgroundPanel extends JPanel {

        private static final long serialVersionUID = 1L;

        BackgroundPanel() {
            setOpaque(true);
        }

        @Override
        protected void paintComponent(final Graphics g) {
            final Graphics2D g2d = (Graphics2D) g;
            g2d.setPaint(lpg);
            g2d.fillRect(1, 1, getWidth() - 2, getHeight() - 2);
            g2d.setColor(Color.BLACK);
            g2d.drawRect(0, 0, getWidth() - 1, getHeight() - 1);
        }
    }

    public static void main(final String[] args) {
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                System.out.println(info.getName());
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (UnsupportedLookAndFeelException e) {
        } catch (ClassNotFoundException e) {
        } catch (InstantiationException e) {
        } catch (IllegalAccessException e) {
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {

                NotificationPopup notificationPopup = new NotificationPopup();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-13T10:24:30.327

这是我最终使用的代码：

```
GraphicsConfiguration gc = // ...

Rectangle bounds = gc.getBounds();

Insets screenInsets = Toolkit.getDefaultToolkit().getScreenInsets(gc);

Rectangle effectiveScreenArea = new Rectangle();

effectiveScreenArea.x = bounds.x + screenInsets.left;
effectiveScreenArea.y = bounds.y + screenInsets.top;
effectiveScreenArea.height = bounds.height - screenInsets.top - screenInsets.bottom;        
effectiveScreenArea.width = bounds.width - screenInsets.left - screenInsets.right; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-20T22:58:41.187

这是我编写的一种方法，它通过减去边距并将其在屏幕中居中来快速进行计算。

```
public void setToEffectiveScreenSize() {
    double width, height, x, y;

    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
    Insets bounds = Toolkit.getDefaultToolkit().getScreenInsets(frmMain.getGraphicsConfiguration());

    // Calculate the height/length by subtracting the margins
    // (x,y) = ( (screenHeight-windowHeight)/2, (screenWidth - windowWidth)/2 )

    width = screenSize.getWidth() - bounds.left - bounds.right;
    height = screenSize.getHeight() - bounds.top - bounds.bottom;

    // Now center the new rectangle inside the screen
    x = (screenSize.getHeight() - height) / 2.0;
    y = (screenSize.getWidth() - width) / 2.0;

    frmMain.setBounds((int)x,(int)y,(int)width,(int)height);
} 
```

# select - 是否可以在 select 语句 Cassandra 中的 where 子句之后传递任何其他列

> ID：10123736
> 
> 赞同：5
> 
> 时间：2012-04-12T12:37:17.247
> 
> 标签：select, primary-key, cassandra, where, cql

我一直在尝试使用以下命令从 Cassandra 数据库中检索数据：

```
 select A_NO from Activity where CALL_TYPE IN ('MOC');//here CALL_TYPE is not the row id 
```

但它的显示：

```
Expected key 'KEY' to be present in where clause for 'Activity' 
```

在 cassandra 中是否不可能在非主键的帮助下过滤数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T16:18:10.493

您不能直接在 vanilla 列族上执行此操作。Cassandra 默认情况下只让您查询键或键范围。您可以通过在列上创建二级索引来完成此操作

您将像这样运行 CQL 查询来创建两个索引：

```
cqlsh> CREATE INDEX state_key ON users (state);
cqlsh> CREATE INDEX birth_year_key ON users (birth_year); 
```

然后像这样查询：

```
cqlsh> SELECT * FROM users
 ... WHERE gender='f' AND
 ...  state='TX' AND
...  birth_year='1968'; 
```

[这是关于二级索引的更多信息。](http://www.datastax.com/docs/1.0/ddl/indexes#about-secondary-indexes)

[这是有关为此使用 CQL 的文档。](http://www.datastax.com/docs/0.8/dml/using_cql#indexing-a-column)

# jquery-mobile - jquery mobile中所有页面的导航栏remian常量

> ID：10123738
> 
> 赞同：2
> 
> 时间：2012-04-12T12:37:38.060
> 
> 标签：jquery-mobile

我是 jquery mobile 的新手，需要一些帮助才能在我的应用程序中进一步移动

我使用带有两个按钮视图的 NAVBAR，两个按钮可以正常导航并显示不同的列表视图，当我单击列表视图项时，页面正在导航到另一个 HTML 页面并显示相关数据，但问题是我无法查看导航栏在下一页...

我希望导航栏对于所有页面都保持不变，例如 android 中的标签组活动。任何人都请帮助我提供良好的示例和应用程序，或者向我展示一些好的链接来实现这一目标......

```
<body>
<div data-role="page" id="page1">
    <div data-role="content">
        <div data-role="navbar" id="nav1">
            <ul>
                <li><a href="#" data-href="dashboard" class="ui-btn-active" datafld="list">Dashboard</a></li>
                <li><a href="#" data-href="deals" datafld="list1">Deals</a></li>
            </ul>
        </div>
        <div class="ui-grid-but" id="list">
            <div class="ui-block-a">
                <a  href="#lv1" data-role="button" id="button1" >
                    <img src="task.png" alt="Tasks" /></a>
            </div>
            <div class="ui-block-b">
                <a  href="#lv2" data-role="button" id="button2">
                    <img src="reminder.png" alt="Reminders" /></a>
            </div>
          </div>
          <div class="def_content_div" id="dashboard">
            <ul data-role="listview" data-inset="true">
                <li><a href="#lv1">List View 1</a> </li>
                <li><a href="#lv2" >List View 2</a> </li>
                <li><a href="#lv3" >List View 3</a> </li>
                <li><a href="#lv4" >List View 4</a> </li>
             </ul>
            </div>
            <div class="content_div" id="deals">
                <ul data-role="listview"data-inset="true">
                    <li> <a href="#lv5">List View 5</a></li>
                    <li> <a href="#lv6">List View 6</a></li>
                    <li><a href="#lv7">List View 7</a></li>
                    <li><a href="#lv8">List View 8</a></li>
                </ul>
             </div>
         </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:13:44.110

实现这一点的最佳方法是将导航栏放在 JQM 标头中，并为每个标头使用相同的 data-id。IE

```
<div data-role="header" data-posistion="fixed" data-id="constantNav">
    <div data-role="navbar">
        <ul>
            <li><a href="#" data-href="dashboard" class="ui-btn-active" datafld="list">Dashboard</a></li>
            <li><a href="#" data-href="deals" datafld="list1">Deals</a></li>
        </ul>
    </div>
</div> 
```

您必须在每个列表视图页面中包含上述代码片段。这将给出一个恒定的固定导航菜单的外观。

这是请求[http://jsfiddle.net/codaniel/z5VYF/1/的示例](http://jsfiddle.net/codaniel/z5VYF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:12:59.020

我从[http://jquerymobile.com/demos得到了解决方案](http://jquerymobile.com/demos/1.1.1/docs/toolbars/footer-persist-a.html)

根据 codaniel 的回答，我们需要在每个列表视图页面中包含代码片段。

然后，我们需要将以下类添加到每个页面的“当前”导航按钮。

```
class="ui-btn-active ui-state-persist" 
```

对于第一页：

```
<div data-role="header" data-posistion="fixed" data-id="constantNav">
    <div data-role="navbar">
        <ul>
            <li><a href="#" data-href="dashboard" class="ui-btn-active ui-state-persist" datafld="list">Dashboard</a></li>
            <li><a href="#" data-href="deals" datafld="list1">Deals</a></li>
        </ul>
    </div>
</div> 
```

第二页：

```
<div data-role="header" data-posistion="fixed" data-id="constantNav">
    <div data-role="navbar">
        <ul>
            <li><a href="#" data-href="dashboard"  datafld="list">Dashboard</a></li>
            <li><a href="#" data-href="deals" class="ui-btn-active ui-state-persist" datafld="list1">Deals</a></li>
        </ul>
    </div>
</div> 
```

# ios - NSDate by NSCalendar 的 dateFromComponent

> ID：10123746
> 
> 赞同：1
> 
> 时间：2012-04-12T12:38:17.513
> 
> 标签：ios, nsdate, nscalendar

我对这段代码有疑问：

```
+ (NSDate *)dateByMovingToBeginningOfDay:(NSDate *)date
{
    unsigned int flags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

    NSDateComponents* parts = [[NSCalendar currentCalendar] components:flags fromDate:date];
    [parts setHour:0];
    [parts setMinute:0];
    [parts setSecond:0];

    return [[NSCalendar currentCalendar] dateFromComponents:parts];
}

+ (NSDate *)dateByMovingToEndOfDay:(NSDate *)date
{
    unsigned int flags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

    NSDateComponents *parts = [[NSCalendar currentCalendar] components:flags fromDate:date];
    [parts setHour:23];
    [parts setMinute:59];
    [parts setSecond:59];

    return [[NSCalendar currentCalendar] dateFromComponents:parts];
}

+ (BOOL)checkForReportInDate:(NSDate *)date forUser:(User *)user
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = appDelegate.managedObjectContext;

    NSDate *startDate = [NSDate dateByMovingToBeginningOfDay:date];
    NSDate *endDate = [NSDate dateByMovingToEndOfDay:date];

    NSLog(@"apply date: %@", date.description);
    NSLog(@"start date: %@", startDate.description);
    NSLog(@"end date: %@", endDate.description);

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    fetchRequest.entity = [NSEntityDescription entityForName:@"Report" inManagedObjectContext:context];
    fetchRequest.predicate = [NSPredicate predicateWithFormat:@"user == %@ AND (date > %@ AND date < %@)", user, startDate, endDate];
    fetchRequest.fetchLimit = 1;

    NSError *error = nil;

    NSUInteger reportExist = [context countForFetchRequest:fetchRequest error:&error];

    if(error != nil) {
        NSLog(@"Error: %@", [error localizedDescription]);
        return NO;
    }

    if(reportExist > 0) {
        return 1;
    }
    else {
        return 0;
    }
} 
```

它生成错误的开始日期......在我的控制台中我有

2012-04-12 14:34:46.456 iFood Pro[23820:fb03] 将报告保存到数据库 2012-04-12 14:34:46.458 iFood Pro[23820:fb03] 申请日期：2012-04-12 12:34： 41 +0000 2012-04-12 14:34:46.458 iFood Pro[23820:fb03] 开始日期：2012-04-11 22:00:00 +0000 2012-04-12 14:34:46.459 iFood Pro[23820: fb03]结束日期：2012-04-12 21:59:59 +0000

开始日期应该是 2012-04-12 00:00:00 +0000 而不是 2012-04-11 22:00:00 +0000 为什么会出现这种行为？我快疯了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:47:03.117

已修复，问题出在时区...`using [parts setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];`解决了问题

# ruby - rubymine - 找不到宝石“jquery-rails”

> ID：10123761
> 
> 赞同：9
> 
> 时间：2012-04-12T12:39:10.127
> 
> 标签：ruby, rubymine

我已经安装了 ruby​​mine 和 Ruby193（使用 ruby​​installer）。
我现在创建一个带有“为选定数据库预配置”的 Rails 应用程序 - 选中了“mySqL”复选框
当我单击执行时，它会打印以下错误：

D:/Programs/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/resolver.rb:287:in `resolve': 找不到 gem 'jquery-rails (> = 0) x86-mingw32' 在这台机器上可用的 gem 中。(捆绑器::GemNotFound)

想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T13:27:50.073

单独安装这个 gem：

`gem install jquery-rails`

或通过[捆绑器](http://gembundler.com/rationale.html)

`bundle install`（在您的 Gemfile 所在的项目目录中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-06T16:11:55.183

这是通过终端安装在 ubuntu 中的最新版本的 jquery-rail：

**宝石安装 jquery-rails -v 4.0.4**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T06:59:15.073

在 Windows 上（至少从我刚刚做的）rubymine 无法使用 bundle install 安装 gem，这些 gem 很容易从命令提示符使用 gem install 命令安装，如上所示。

这将安装 gem，它允许您重新运行 ruby​​mine 捆绑器以创建您的捆绑包。

*我想将此作为评论放在我上面的答案中，但由于某种原因我无法添加。

必须有一些选项可以让 ruby​​mine 中的 bundle 命令下载新的 gem。是--系统吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T15:10:24.633

我最近遇到了这个问题，并找到了一种绕过它的简单方法。将 CD 放入项目文件夹并检查 gemfile 以确保 gem 存在。在项目文件夹中运行 bundle install 。这应该将缺少的 gem 安装到项目文件夹中。在那之后一切对我来说都很好。

# image-processing - Tesseract OCR 引擎是否支持图像校正和分割？

> ID：10123762
> 
> 赞同：2
> 
> 时间：2012-04-12T12:39:11.093
> 
> 标签：image-processing, tesseract, image-segmentation

我想知道 Tesseract 3.0 是否包含任何图像预处理，尤其是图像去偏斜和分割。如果是，Tesseract 还包含哪些功能？

# android - 与 Android 4.0.3 中的 noHistory 属性不一致

> ID：10123763
> 
> 赞同：3
> 
> 时间：2012-04-12T12:39:26.747
> 
> 标签：android, android-activity, android-4.0-ice-cream-sandwich

我将属性 noHistory=true 用于我不想保留在后台堆栈中的活动。它在 Android 2.3.3 上运行良好，但在 4.0.3 上有一个奇怪的行为。当屏幕进入睡眠状态并且我将其唤醒时， noHistory=true 的活动消失了！

这里发生了什么？屏幕唤醒时活动是否完成？我以错误的方式使用 noHistory 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:10:58.367

我今天刚遇到同样的问题，我在这里找到了解决方案：

[Android：如何在onStop之后返回具有“noHistory”属性的Activity？](https://stackoverflow.com/questions/6045558/android-how-to-return-to-activity-with-nohistory-attribute-after-onstop)

实际上，将 noHistory 设置为 true 时，当屏幕进入睡眠状态时，您的 Activity 会从堆栈中移除，并且不会在屏幕唤醒时恢复。

我从布局 xml 文件中删除了 noHistory=true ，并在我的活动调用另一个活动时调用了 finish() ：

```
Intent intent = new Intent();
intent.setClass(this, MainActivity.class);
this.startActivity(intent);
finish(); 
```

那成功了！当我单击后退按钮时，上一个活动不会出现。

我不确定这个问题是否发生在 Android 2.x 上，但我确信现在在 Android v2.x 和 Android v4.x 上都可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:13:18.683

可能与屏幕进入睡眠状态时调用 onPause() 的事实有关。

# git - Git/GitHub：导入符号链接的文件夹

> ID：10123765
> 
> 赞同：2
> 
> 时间：2012-04-12T12:39:41.520
> 
> 标签：git, github, symlink

我的代码位于不同的文件夹中，但由于我想在我的 IDE 中的一个“根”下查看它，所以我使用符号链接，例如`ln -s /path/to/mode/code/ SomeFolder`. 如果我尝试推送到 GitHub，则只会推送符号链接的文件。我怎样才能让它也导入链接的文件夹及其内容？

# java - 在 Java 场景中解决 UML

> ID：10123766
> 
> 赞同：0
> 
> 时间：2012-04-12T12:39:48.177
> 
> 标签：java, inheritance, computer-science, composition, aggregation

我是学习Java的初学者，并通过回答以前过去试卷上的问题来修改我的考试，并且有一个问题我被困住了。

**游戏的 OO 设计确定了以下类别：GAME、LEVEL、CHARACTER、HERO、ENEMY 和 GAMEWORLD。HERO 和 ENEMY 都是 CHARACTER 的类型。游戏发生在特定的 GAMEWORLD 中。一个游戏有几个级别。每个级别都有一个英雄角色和许多可以出现和删除的敌人角色。**

**在上面的场景中为这些类绘制一个 UML 图，清楚地显示类之间的适当连接器。（无需在类框中提供任何详细信息。）**

我不知道如何在这里绘制 UML 连接器，但这就是我的回答：

***HERO 和 ENEMY 通过继承与角色相关***

***GAME 和 LEVEL 通过 Composition 关联***

***LEVEL 通过聚合与 HERO 和 ENEMY 相关联***

***GAME 通过继承与 GAMEWORLD 相关联***

如果有人可以帮我检查这些答案是否正确，我将不胜感激？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:51:49.300

几乎是对的。游戏不继承自 GameWorld。GameWorld 有一个指向 Game 的聚合（这是一对多的关系）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:58:05.047

正确，除了 GAME 和 GAMEWORLD 关系。

*   HERO 和 ENEMY 都继承自 CHARACTER => **Inheritance**
*   GAME 包含关卡，但没有游戏就无法存在关卡 =>**合成**
*   LEVEL 可以包含一个 HERO 字符和几个 ENEMY 字符，但也可以为空 =>**聚合**
*   GAME 发生在 GAMEWORLD 中，但没有 Gameworld 就无法存在 GAME => **Composition**

查看 Wikipedia 上[的聚合和组合之间的区别。](http://en.wikipedia.org/wiki/Class_diagram#Aggregation)

# iphone - 锯切和隐藏导航栏的奇怪问题

> ID：10123769
> 
> 赞同：0
> 
> 时间：2012-04-12T12:39:54.140
> 
> 标签：iphone, xcode, uinavigationcontroller, navigationbar

我有一个使用导航控制器显示几个屏幕的应用程序，在我的第一个屏幕上我隐藏了导航栏，当我在第二个屏幕上按下时，我将导航栏设置为可见，当我从第二个屏幕弹出到第一个屏幕时，我看到了第一个屏幕上有一条黑色条纹，你能告诉我这个问题的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:17:19.677

请隐藏您的导航栏`ViewWillAppear`而不是隐藏`ViewDidLoad`，因为从第二个视图弹出时`viewWillAppear`将首先调用

# wcf - IIS Hosted WCF 服务不回收 TCP 端口“Winsock 资源不足”

> ID：10123770
> 
> 赞同：3
> 
> 时间：2012-04-12T12:39:55.390
> 
> 标签：wcf, web-services, iis-7, nettcpbinding

我有一个托管在 IIS 7 上的 WCF 服务，它成功运行了一段时间，然后无法与其他网络位置通信（我怀疑没有可用于连接到外部世界的 TCP 端口）

**申请背景：**

我的系统对大型媒体文件进行转码（这需要时间）。我有一个集中托管的 WCF 服务，它位于服务器 A 上 - 这将被称为“中央 WCF 服务”。然后，我有许多客户端服务，它们对不同服务器上的媒体文件进行实际转码：B、C、D、E、F 等等 - 这将被称为“客户端处理器服务”。中央 WCF 服务管理发送“转码作业”以进行处理的客户端处理器服务。这些客户端处理器服务中的每一个都是自托管的 WCF 服务，它们基本上执行长时间运行的过程，并由中央 WCF 服务检查作业进度百分比进行轮询。因此，中央 WCF 服务打开了与这些客户端的大量连接，以轮询他们的工作进度，

中央 WCF 服务存储客户端处理器服务的地址字符串列表。下面描述了用于轮询每个客户端的代码（精简版）：

```
public ClientProcessorClient getClientByaddress(string address)
{
    Binding bidning = new NetTcpBinding(SecurityMode.None);
    return new ClientProcessorClient(bidning, new EndpointAddress(address));
}

public void pollJobs()
{
    foreach (string clientAddress in clients)
    {
        ClientProcessorClient client = getClientByaddress(clientAddress);
        int progress = client.GetProgress();
        client.Close();
        // Do stuff with progress
    }
} 
```

**当它破裂时会发生什么：**

我可以向中央 WCF 服务提交许多转码作业，它会将作业提交给客户端，成功更新进度等。在处理了大约一个小时后，托管中央 WCF 服务的服务器停止正常工作。`Insufficient winsock resources available to complete socket connection initiation.`尝试联系客户端 WCF服务时，中央 WCF 服务会引发错误。客户端 WCF 服务都可以从我的本地计算机上运行的 WCF 测试客户端 ping 通。我还注意到，在这种状态下，服务器无法查看网络文件资源 - 我已经远程登录并尝试找到网络连接的存储文件夹，但无法连接。但是，我可以调用该服务器，例如，我可以打开 WCF 测试客户端并连接到中央 WCF 服务并调用它的 ping 方法。通信允许从服务器输入但不允许输出。

**几个兴趣点：**

在故障状态下，可以建立到服务器的连接，但不能从服务器建立。

我的每个服务（中央 WCF 服务和客户端处理器服务）都是单例实例。

中央 WCF 服务托管在 IIS 7 中，应用程序池回收已禁用

不幸的是，命名管道不是一个选项（客户端和服务器在不同的机器上）

**我的想法/问题**

所有迹象都指向服务器耗尽 TCP 套接字。我`ClientProcessorClient`是否正确设置了 WCF ？我是否妥善处理了它们？我需要将它们包装在`using`声明中吗？有人知道我如何调试/诊断问题发生的位置吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:00:19.487

无论好坏，Microsoft 决定实现 WCF 服务代理逻辑（ClientBase 或直接来自 ChannelFactory）以允许在 Close() 方法中引发异常。我相信所有 Dispose() 方法都是调用 Close() 但我从未尝试查看源代码。如果代理处于故障状态，则必须调用 Abort() 来释放资源（例如 TCP 会话）。

这意味着 WCF 服务代理在对 Close() 或 Abort() 的调用成功完成之前不会释放资源。查看此[博客文章](http://omaralzabir.com/do-not-use-using-in-wcf-client/)，了解正确关闭代理实例的一个选项。

# r - 制作一个全排序的矩阵？

> ID：10123771
> 
> 赞同：0
> 
> 时间：2012-04-12T12:39:56.450
> 
> 标签：r, matrix

如何将常规矩阵转换为 R 中的全排序矩阵？有没有可用的方法？

我有一个可能具有线性相关列的矩阵，我需要将它传递给一个函数，该函数需要它的参数是一个具有满秩的矩阵。由于无论如何对线性相关的列都不感兴趣，因此我正在寻找一个删除此类列的函数，直到矩阵满秩。当然，可能有几种解决方案，但其中任何一种都应该没问题。

现在我只是逐列构建矩阵，并且只在其结果矩阵仍然是满秩的情况下添加一列，但感觉应该有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:19:06.667

另一种方法是最小化 |y - Ax| ² + c |x| ²，通过将单位矩阵附加到 A 和零到 y。参数 c (aka λ) 权衡拟合 y - Ax，并保持 |x| 小的。然后用 x 的 r 个最大分量进行第二次拟合，r = rank(A)（或任何你喜欢的数字）。

# c++ - c++ 我的计数器增加了一个额外的计数

> ID：10123773
> 
> 赞同：-1
> 
> 时间：2012-04-12T12:40:00.693
> 
> 标签：c++

我是编程新手并试图自学，但我的计数器显示的比它应该显示的多一个。它应该显示 22，但它显示的是 23。

```
#include <iostream>
#include <fstream>
#include <string>
#include <iomanip>
using namespace std;

//Main and variable data type initializing

void main()
{    float c,l,x,y,z;
    int count;
    string input, output;
    string finput, foutput;
    fstream i,o;    //i = input file;    o = output file;
//Getting the name of the files

    cout << "XZY Multiply Program\n" << endl;
    cout << "Enter the input file name:  c:/";
    cin >> input;
    cout << "Enter the output file name:  c:/";
    cin >> output;

//inserts the beginning of the file and file extension.

    finput = "c:/" + input;
    foutput = "c:/" + output;

//Opens files

    i.open(finput.data(),ios::in);
    o.open(foutput.data(),ios::out);

//Initialize count and sum of variables

    count = 0;
    x=0;
    y=0;
    z=0;

//loop through input file

    while(!i.eof() && !o.eof())
    {   count++;
        if (i.good() && o.good())
        {

                i >> c;
                i >> l;   
                o << fixed << showpoint << setprecision(4);
                o << setw(7) << c;
                o << setprecision(2);
                o << setw(9) << l;
                o << setprecision(3);
                o << setw(10) << (l*c) << endl;

// Adds columns
                x = x+c;
                y = y+l;
               z = z+(l*c);

        } 
         else
        {
        cout << "no good";
        }

    }
     i.close();
     o.close();

    //Display the output of the counter and Sums of columns
            cout << fixed << showpoint << setprecision(2);
            cout << "\n" << count << " lines in file " << endl;
            cout << "X sum = " << setw(8) << right << x << endl;
            cout << "Y sum = " << setw(8) << right << y << endl;
            cout << "Z sum = " << setw(8) << right << z << endl;

}

  7.2830     84.40
  9.1327    124.02
  7.2619    133.16
  6.2527     43.96
  4.2160     24.08
  5.2724     57.80
  5.2025     73.89
 -9.9500     80.53
  0.2790    -12.43
  2.2115      3.37
  3.1222     13.63
 16.2413    223.01
 -4.2026     33.78
 -7.1914     42.89
  4.1417     53.42
  6.1714     61.66
  9.2516     73.68
 15.2419    383.66
  6.2715     93.53
 -3.2016      3.46
 12.2013    213.63
  3.1824     23.85 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:12:57.810

使用`.eof()`or`.good()`作为循环条件几乎总是会产生错误代码，就像在这种情况下一样。

相反，执行输入并在循环条件中检查其结果，如下所示：

```
while(i >> c >> l)
{   count++;
    o << fixed << showpoint << setprecision(4);
    o << setw(7) << c;
    ... 
```

参考：

*   [为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)
*   [http://www.parashift.com/c++-faq-lite/input-output.html#faq-15.5](http://www.parashift.com/c++-faq-lite/input-output.html#faq-15.5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:54:11.563

我假设在从输入文件中读取最后一个数字之后，还没有看到文件的*结尾。*尝试添加

```
if (!i.good()) break; 
```

在每个输入语句 ( `>>`) 之后，以防止在输入失败后执行循环体。

# jquery - 根据内容大小的jQuery标签大小

> ID：10123775
> 
> 赞同：0
> 
> 时间：2012-04-12T12:40:07.667
> 
> 标签：jquery, user-interface, tabs

我想知道如何根据选项卡内包含的 div 而不是窗口大小来调整 jQuery 选项卡的大小。我应该在 CSS 中做哪些更改？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:45:22.727

您只需要设置包含 div 的宽度，如果我正确理解您的意思，您就可以了

[http://jsfiddle.net/jDZhP/](http://jsfiddle.net/jDZhP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:51:45.520

您可以使用javascript`offsetHeight`的`offsetWidth`属性来计算选项卡内包含的 div 的高度、宽度。

# wpf - 绑定转换器到控件的属性如何访问控件的其他属性

> ID：10123776
> 
> 赞同：1
> 
> 时间：2012-04-12T12:40:10.040
> 
> 标签：wpf, silverlight, windows-phone-7, binding, ivalueconverter

我正在尝试将值“MaxLines”绑定到 WP7 应用程序中的 TextBlock 的 Height 属性。绑定有一个转换器，它应该将 LineHeight 与 MaxLines 相乘并返回预期的高度。我想说的是我想控制 TextBlock 中显示的行数。我如何能够从转换器访问 TextBlock 的 LineHeight 属性。

为了使这个通用，我不想单独维护 LineHeights 或从 viewModel 访问它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:57:32.137

查看这篇文章[Silverlight 数据绑定和值转换器](http://timheuer.com/blog/archive/2008/07/30/format-data-in-silverlight-databinding-valueconverter.aspx)，他在其中解释了如何在 Silverlight 中进行数据绑定。在示例中，他使用带参数值的 ValueConverter。

我认为这就是您所需要的，只需将您的 LineHeight 绑定到参数即可。（您可以为此使用 Blend）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:19:51.927

您可以使用 ConverterParameter：

```
<TextBlock x:Name="MyTextBlock" Height="{Binding ConverterParameter=Height, ElementName=MyTextBlock, Converter={StaticResource SomeConverter}}" Text="{Binding SomeLongText}" /> 
```

或传递整个文本块：

```
<TextBlock x:Name="MyTextBlock" Height="{Binding Converter={StaticResource ImageFileConverter}, ElementName=DropdownImage}" Text="{Binding SomeLongText}" /> 
```

然后在控制器内部：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            var image = value as TextBlock;
            /*do your magic here*/
} 
```

# java - 无法初始化类 com.google.gdata.client.youtube.YouTubeService

> ID：10123778
> 
> 赞同：0
> 
> 时间：2012-04-12T12:40:16.653
> 
> 标签：java, grails

我正在使用 grails 和 google youtube api ( [https://developers.google.com/youtube/2.0/developers_guide_java#AuthSub_for_Web_Applications](https://developers.google.com/youtube/2.0/developers_guide_java#AuthSub_for_Web_Applications) ) 来获取有关用户上传的视频的详细信息。但是，一旦我尝试将 YouTubeService 类初始化为：

```
String emailID="XXXX@gmail.com"//this is the id with which i registered for developer key
String DeveloperKey="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" //developer key given by google
YouTubeService service=new YouTubeService(emailID,DeveloperKey)
//I am done using appName,clientId(given by google) as the first parameter to the 
YouTubeService but nothing helped 
```

它给了我以下错误：

```
Class java.lang.ClassNotFoundException
Message com.google.gdata.data.media.MediaMultipart
//I can see this MediaMultipart file in the said destination in one of the included jars.
Originally it was complaining about com.google.collections.common.Maps but then i
added google.collections.1-rc.jar. I also tried adding guava.jar as read from various
forums but that could not solve my problem 
```

如果我重新加载页面，错误将更改为

```
Class java.lang.NoClassDefFoundError
Message Could not initialize class com.google.gdata.client.youtube.YouTubeService 
```

我已经包含了所有必需的罐子（[http://code.google.com/p/gdata-java-client/downloads/list](http://code.google.com/p/gdata-java-client/downloads/list)），但这个问题没有得到解决。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:21:16.307

尝试添加. `javax.mail`_`com.google.guava``gdata-java-client`

# php - 带有 PHP 的 MongoDB 执行相同的查询 4-30 次

> ID：10123782
> 
> 赞同：0
> 
> 时间：2012-04-12T12:40:35.680
> 
> 标签：php, mongodb

我正在使用 PHP 和 mongodb。我已经使用 mongodb 2.0.4 对 20 毫秒以上的所有内容打开了系统分析。当我为每个小查询加载一个简单页面时，它会在系统配置文件中记录相同的查询，例如 4 次、10 次，有时甚至 24 次！因此页面加载速度非常慢！为什么会这样？？

查询可以很简单：

```
$c2 = $things->find();
        foreach($c2 as $doc) {
            // some code...
        } 
```

谢谢！！

编辑：完整代码：

```
<?php

$m = new Mongo();
$db = $m->selectDB("test");

function getAllData ($db) {

    $some = $db->some;

        $cursor = $some->find();

        $js = "function() {
        return ((";

        foreach ($cursor as $doc) {
            $js .= "this.idE == '" . $doc['_id'] .  "' || ";

        }
        $js = substr($js,0,-4);
        $js .= ")";
        $js .= ");}";

        $names = $db->names;
        $c2 = $names->find(array('$where' => $js));
        foreach($c2 as $doc) {
            echo $doc['name'];
        }

}

getAllData ($db);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:39:11.043

这两个查询中的哪一个正在成倍增加？

我会开始修改代码，看看会发生什么。我要做的第一件事是删除“foreach”，而只做一个“getNext”，看看这是否会影响调用查询的次数。我最好的猜测是它与 Mongo 驱动程序批量获取结果的方式有关。当您进行查询时，它不会一次下载所有行，而是分批下载它们。您可能会将这些批量提取视为重复查询。我认为有一种机制可以调整批量大小，这可能会有所帮助。此外，更新到最新的驱动程序可能会有所帮助。

# dotnetopenauth - 如何使用 OAuth 1 和 DotNetOpenAuth 将表单数据多部分发布到 LinkedIn？

> ID：10123785
> 
> 赞同：2
> 
> 时间：2012-04-12T12:40:48.070
> 
> 标签：dotnetopenauth, linkedin

我正在使用 DotNetOpenAuth 框架，该框架非常有助于加快处理数据的速度。

我正在使用它与LinkedIn 交谈，并且无法确定向该站点发布/共享信息的正确方法。这是我正在使用的参考 - [http://developer.linkedin.com/documents/share-api](http://developer.linkedin.com/documents/share-api)

当我执行以下代码时，我总是得到以下错误响应；

**发送直接消息或获取响应时出错。远程服务器返回错误：(400) 错误请求。**

我正在使用 Oauth v1.0a。

这是我的代码；

```
 try
        {
            HttpDeliveryMethods resourceHttpMethod = HttpDeliveryMethods.PostRequest | HttpDeliveryMethods.AuthorizationHeaderRequest;

            string xml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><share><comment>83% of employers will use social media to hire: 78% LinkedIn, 55% Facebook, 45% Twitter [SF Biz Times] http://bit.ly/cCpeOD</comment>";
            xml += "<content><title>Survey: Social networks top hiring tool - San Francisco Business Times</title>";
            xml += "<submitted-url>http://sanfrancisco.bizjournals.com/sanfrancisco/stories/2010/06/28/daily34.html</submitted-url>";
            xml += "<submitted-image-url>http://images.bizjournals.com/travel/cityscapes/thumbs/sm_sanfrancisco.jpg</submitted-image-url>";
            xml += "</content><visibility><code>anyone</code></visibility></share>";

            var multiparts = new List<MultipartPostPart>();
            MultipartPostPart part = MultipartPostPart.CreateFormPart("body", xml);
            part.PartHeaders[HttpRequestHeader.ContentType] = "application/xml";
            multiparts.Add(part);

            var resourceEndpoint = new MessageReceivingEndpoint("http://api.linkedin.com/v1/people/~/shares", resourceHttpMethod);
            HttpWebRequest request = consumer.PrepareAuthorizedRequest(resourceEndpoint, accessToken, multiparts);
            request.ServicePoint.Expect100Continue = false;

            IncomingWebResponse response = consumer.Channel.WebRequestHandler.GetResponse(request);
            this.resultsBox.Text = response.GetResponseReader().ReadToEnd();
        }
        catch (Exception ex)
        {

        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:05:45.887

忘了回信，与来自老式谷歌新闻组的人交谈，我得到了我需要的方向，但想在发布之前验证解决方案。

我搞砸的一件大事是在发送请求数据之前添加多部分数据，而不是自己构建请求并将新内容写入流。

我是使用 OAuth 和 REST 的新手，所以我不知道所有细节，我只想说我已经针对 LinkedIn 和 Twitter REST API 验证了这段代码。

这是新的代码；

```
 try
        {
            Encoding encoder = Encoding.ASCII;
            HttpDeliveryMethods resourceHttpMethod = HttpDeliveryMethods.PostRequest | HttpDeliveryMethods.AuthorizationHeaderRequest;

            byte[] bytes = encoder.GetBytes(xd.OuterXml.ToString());

            var resourceEndpoint = new MessageReceivingEndpoint(ResourceURL, resourceHttpMethod);
            HttpWebRequest request = _consumer.PrepareAuthorizedRequest(resourceEndpoint, _manager.AccessToken);
            request.ServicePoint.Expect100Continue = false;

            request.Method = "POST";
            request.ContentLength = bytes.Length;
            request.ContentType = "application/xml";

            using (System.IO.Stream requestStream = request.GetRequestStream())
            {
                requestStream.Write(bytes, 0, bytes.Length);
            }

            IncomingWebResponse response = _consumer.Channel.WebRequestHandler.GetResponse(request);

            ret = true;
        }
        catch (Exception ex)
        {
            _Logger.Error(OpenLogger.FormatException(ex));
        } 
```

# solr - 如何将自定义 URL 放入 SOLR 结果

> ID：10123795
> 
> 赞同：0
> 
> 时间：2012-04-12T12:41:36.773
> 
> 标签：solr

我正在尝试使用 SOLR 索引我的数据库数据，并且我已成功对其进行索引。

我需要的是：

*   我需要在每个结果中添加 URL。
*   每个结果项的 URL 将不同。
*   每个结果项都需要在其 URL 后面附加其 item_id（可作为字段使用）。

我对 SOLR 配置和 SOLR 查询非常陌生，因此请帮助实现更好的搜索结果 XML。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:27:51.983

您可以将 URL 存储在附加字段中（stored=true indexed=false），然后在搜索时简单地检索它。

如果您可以通过将文档 ID 附加到某个固定 URL 来自己编写 URL（如果它们仅在 ID/主键上有所不同），那当然是更好的方法。这将包括更改显示搜索结果的页面。

您的 Solr 与哪种应用程序集成？你的那些文件存放在哪里？在数据库中？你如何通过你的申请找到他们？

# api - 使用 Spotify API 检索封面图稿

> ID：10123804
> 
> 赞同：21
> 
> 时间：2012-04-12T12:42:21.717
> 
> 标签：api, spotify

目前无法使用 Spotify 的 Web API 检索封面插图。是否有计划实施这些或任何解决方法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-08-18T01:31:53.380

## 2014 年 6 月 17 日：

今天 Spotify 发布了一个新的[Web API](https://developer.spotify.com/documentation/web-api/)。

现在很容易检索封面图稿，因为[所有端点都](https://developer.spotify.com/web-api/endpoint-reference/)`images`包含一个for each的数组`item`。

* * *

**搜索示例：**
`curl -X GET "https://api.spotify.com/v1/search?q=tania%20bowra&type=artist"`

```
{
  "artists" : {
...
    "items" : [ {
...
      "images" : [ {
        "height" : 640,
        "url" : "https://d3rt1990lpmkn.cloudfront.net/original/f2798ddab0c7b76dc2d270b65c4f67ddef7f6718",
        "width" : 640
      }, {
        "height" : 300,
        "url" : "https://d3rt1990lpmkn.cloudfront.net/original/b414091165ea0f4172089c2fc67bb35aa37cfc55",
        "width" : 300
      }, {
        "height" : 64,
        "url" : "https://d3rt1990lpmkn.cloudfront.net/original/8522fc78be4bf4e83fea8e67bb742e7d3dfe21b4",
        "width" : 64
...
    } ],
...
  }
} 
```

## 老答案：

* * *

您可以通过调用 Spotify 的 oEmbed 服务来获取封面艺术的 URL：

[https://embed.spotify.com/oembed/?url=spotify:track:6bc5scNUVa3h76T9nvpGIH](https://embed.spotify.com/oembed/?url=spotify:track:6bc5scNUVa3h76T9nvpGIH)
[https://embed.spotify.com/oembed/?url=spotify:album:5NCz8TTIiax2h1XTnImAQ2](https://embed.spotify.com/oembed/?url=spotify:album:5NCz8TTIiax2h1XTnImAQ2)
[https://embed.spotify.com/ oembed/?url=spotify:artist:7ae4vgLLhir2MCjyhgbGOQ](https://embed.spotify.com/oembed/?url=spotify:artist:7ae4vgLLhir2MCjyhgbGOQ)
使用 JSONP：
[https ://embed.spotify.com/oembed/?url=spotify:artist:7ae4vgLLhir2MCjyhgbGOQ&callback=callme](https://embed.spotify.com/oembed/?url=spotify:artist:7ae4vgLLhir2MCjyhgbGOQ&callback=callme)

`http://open.spotify.com/`网址也可以：

[https://embed.spotify.com/oembed/?url=http://open.spotify.com/track/6bc5scNUVa3h76T9nvpGIH](https://embed.spotify.com/oembed/?url=http://open.spotify.com/track/6bc5scNUVa3h76T9nvpGIH)

```
{
    "provider_url": "https:\/\/www.spotify.com",
    "version": "1.0",
    "thumbnail_width": 300,
    "height": 380,
    "thumbnail_height": 300,
    "title": "Gusgus - Within You",
    "width": 300,
    "thumbnail_url": "https:\/\/d3rt1990lpmkn.cloudfront.net\/cover\/f15552e72e1fcf02484d94553a7e7cd98049361a",
    "provider_name": "Spotify",
    "type": "rich",
    "html": "<iframe src=\"https:\/\/embed.spotify.com\/?uri=spotify:track:6bc5scNUVa3h76T9nvpGIH\" width=\"300\" height=\"380\" frameborder=\"0\" allowtransparency=\"true\"><\/iframe>"
} 
```

注意`thumbnail_url`：
[https ://d3rt1990lpmkn.cloudfront.net/cover/f15552e72e1fcf02484d94553a7e7cd98049361a](https://d3rt1990lpmkn.cloudfront.net/cover/f15552e72e1fcf02484d94553a7e7cd98049361a)

`/cover/`表示缩略图的大小。
可用尺寸：`60`, `85`, `120`, `140`, `160`, `165`, `230`, `300`, `320`, 和`640`.

例如：[https ://d3rt1990lpmkn.cloudfront.net/640/f15552e72e1fcf02484d94553a7e7cd98049361a](https://d3rt1990lpmkn.cloudfront.net/640/f15552e72e1fcf02484d94553a7e7cd98049361a)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-12T15:05:56.273

有计划实施它，例如，我们希望它在那里，但没有人在努力。这主要是使用条款的法律问题。

从技术上讲，当然可以通过解析 html 来计算并访问例如 open.spotify.com 使用的相同图像。这当然是不允许的，但从技术上讲，没有什么可以阻止访问。

（我在 Spotify 工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T05:14:04.667

iTunes 和 Deezer API 也很有用：

[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

[http://developers.deezer.com/api/search](http://developers.deezer.com/api/search)

# iphone - 是否可以在 iPhone 上发送“无声”推送通知（不对用户发出任何警报）？

> ID：10123807
> 
> 赞同：5
> 
> 时间：2012-04-12T12:42:33.230
> 
> 标签：iphone, objective-c, apple-push-notifications

我需要在聊天应用程序上执行此操作，以通知客户端有新数据要从服务器获取。

我知道从技术上讲，可以使用空的有效负载（至少在 ios 5 设备上它可以工作），但是 Apple 可以将其视为滥用服务还是可以这样做？

在 ios 4 设备上技术上可行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:14:14.517

是的，只增加徽章编号，不发送声音和警报，所以，App图标上会有一个徽章。

因此，在这里，徽章编号将在不知不觉中增加，以表明当用户观看应用程序图标时已收到某些内容。

但是您的设备不会收到警报或清空有效负载，也不会收到声音，因为您在 iPhone 上要求“静音”推送通知

在 AppDelegate 中配置时，只配置徽章

```
 [[UIApplication sharedApplication] registerForRemoteNotificationTypes:UIRemoteNotificationTypeBadge]; 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-20T13:52:29.197

您需要像这样构建有效负载：

```
String payload = 
'{
    "aps":{
        "content-available": 1 
    }, 
    "data_id": 5, 
    "additional_data": ["some", "data"]
}' 
```

在 aps 中放置使推送通知显示文本、声音、徽章...或仅内容可用以使其静音所需的苹果变量。然后，在'aps{...}' 中并用',' 分隔，将您的自定义字段发送到下载所需的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T14:08:13.843

如果您不希望徽章编号增加，您也可以尝试发送一个播放静音文件的声音通知。（不幸的是，我不知道这是否适合苹果）。

# php - 在 Htaccess 中重写规则

> ID：10123809
> 
> 赞同：0
> 
> 时间：2012-04-12T12:42:36.977
> 
> 标签：php, .htaccess, mod-rewrite

htaccess 的新手：我如何为此编写重写规则，
而不是[http://www.x.com/directory.php?state=TX](http://www.x.com/directory.php?state=TX)有 www.x.com/texas-fishing
而不是[http://www。 x.com/directory.php?state=WA](http://www.x.com/directory.php?state=WA)有 www.x.com/washington-fishing

实际上 $1 表示 Url 的动态部分，例如（TX，WA..），但这里我需要页面的完整标题。所以我需要在脚本中修改还是 .htaccess 足以管理。如果足够了，那我们该如何管理..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:47:23.090

```
RewriteRule ^texas-fishing$ directory.php?state=TX  [NC,L]
RewriteRule ^washington-fishing$ directory.php?state=WA  [NC,L] 
```

# html - 导航在 IE 中无法正确显示

> ID：10123811
> 
> 赞同：2
> 
> 时间：2012-04-12T12:42:37.257
> 
> 标签：html, css

我试过 ..

```
<!--[if IE 7 ]>
    <link href="http://www.mulberrydesignerkitchens.com/wp-content/themes/MBK/ie7.css" rel="stylesheet" type="text/css">
<![endif]-->

<!--[if IE 8 ]>
    <link href="http://www.mulberrydesignerkitchens.com/wp-content/themes/MBK/ie8.css" rel="stylesheet" type="text/css">
<![endif]--> 
```

**CSS**

```
header{
    position: relative;
    background:#7a2652;
    height: 75px;
}
header #telephone {
    float: right;
    color: #fff;
    margin-top: 10px;
    padding-right: 10px;
    width: auto !important;
}
header #telephone p {
    padding: 0;
    margin: 0;
    font-size: 10px;
    float: left;
    margin-top: 2px;
    color: #fff;
}
header #telephone img {
    float: left;
    margin-left: 5px;
    margin-right: 5px;
}

/*
--------------------------------------------------------------------------------------- nav
*/

nav#primary-menu {
    height: 37px;
    position: absolute;
    right: 2px;
    top: 38px;
    width: 685px;
    list-style: none outside none;
}

nav#primary-menu div {
    background: none repeat scroll 0 0 #833B5D;
    float: right;
    height: 37px;
    margin-left: 32px;
    width: 645px;
}

nav#primary-menu ul#menu-mainnav {
    list-style: none outside none;
}

nav#primary-menu ul#menu-mainnav li {
    height: 37px;
    margin: 0 -10px 0 -37px;
    overflow: visible;
    padding-left: 37px;
    padding-right: 10px;
    position: relative;
    width: 80px;
    z-index: 1;
    float:left;
    display: inline-block;
    list-style: none outside none;
}

nav#primary-menu ul#menu-mainnav li:hover:last-child {
    background: url("images/nav-last-bg.png") no-repeat transparent;
}

nav#primary-menu ul#menu-mainnav li:first-child {
    background: url("images/nav-first-bg.png") no-repeat scroll left center transparent;
}       

nav#primary-menu ul#menu-mainnav li:hover {
    background: url("images/nav-current-bg.png") no-repeat scroll left center transparent;
}

nav#primary-menu ul#menu-mainnav li.current-menu-item {
    background: url("images/nav-current-bg.png") no-repeat scroll 0 0 transparent;
}

nav#primary-menu a {
    color: #FFFFFF;
    float: left;
    font-size: 9px;
    line-height: 120%;
    padding-bottom: 8px;
    padding-top: 7px;
    text-align: left;
    text-decoration: none;
    width: 60px;
}

nav#primary-menu a:hover {
    color: #FFFFFF;
}

nav#primary-menu a:visited {
    color: #FFFFFF;
}

nav#primary-menu ul#menu-mainnav li ul.sub-menu {
    list-style: none outside none;
} 
```

但是并尝试添加一些css，但什么也没发生，请告诉我该怎么做..

该网站在 Firefox 中看起来不错，但在 IE 中完全搞砸了。请帮助我如何在 IE 中对其进行排序。

[http://i.stack.imgur.com/Xp51g.jpg](http://i.stack.imgur.com/Xp51g.jpg)

请检查上面的图片并指导我如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:55:29.277

您正在使用`HTML5`IE 支持的元素。

使用这个 js [http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)来`HTML5`支持 IE 的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:50:22.543

在 IE 中，会触发 quirks 模式，因为页面包含许多 HTML 和 CSS 错误。这弄乱了你的页面。[使用W3C HTML 验证器](http://validator.w3.org/check?verbose=1&uri=http://www.mulberrydesignerkitchens.com/)检查您的网站并修复这些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:05:30.910

您正在使用 HTML5，请使用：

```
<!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--> 
```

# java - getExternalFilesDir 和 getExternalStorageDirectory() 之间的区别

> ID：10123812
> 
> 赞同：102
> 
> 时间：2012-04-12T12:42:38.033
> 
> 标签：java, android, file

我知道 ExternalFiles 将用于 API 8 及更高版本，而 getExternalStorageDirectory 用于 7 及以下版本。但是我在使用之间有点困惑。例如，我想检查一个文件夹是否存在，以前你会使用类似的东西：

```
File ChildFolder = new File(Environment.getExternalStorageDirectory() + "/ParentFolder/Child"); 
```

但是，我看到的每个示例都说要使用 getExternalFilesDir (null)、File.ext。由于我在 API 8 以上，我想使用这种方法，但我如何检查文件夹？我将在另一点检查文件是否存在，但现在只想查看文件夹是否存在？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-04-12T12:57:56.963

```
getExternalFilesDir() 
```

它返回SD 卡上**Android/data/data/your_package/中****文件**夹的路径。它用于存储您的应用程序所需的任何文件（例如从网络下载的图像或缓存文件）。卸载应用程序后，存储在此文件夹中的所有数据也将消失。

 **```
getExternalStorageDirectory() 
```

它返回您的 SD 卡的根路径（例如**mnt/sdcard/**）。如果您在此路径上保存数据并卸载应用程序，则该数据不会丢失。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2015-04-02T03:18:50.203

**首先，我们需要了解内部存储、外部存储（也称为主外部存储）和辅助外部存储之间的区别是什么？**

**内部存储：**是用户无法访问的存储，除非通过已安装的应用程序（或通过 root 设备）。示例：数据/数据/app_packageName

**主要外部存储：**内置共享存储，“用户可以通过插入 USB 电缆并将其作为驱动器安装在主机上来访问”。示例：当我们说 Nexus 5 32 GB。

**辅助外部存储：**可移动存储。示例：SD 卡。

```
getExternalFilesDir (String type) 
```

它返回主外部存储上 Android/data/data/your_package/ 内文件夹的路径。这是内置存储。

```
Environment.getExternalStorageDirectory() 
```

它将返回辅助外部存储目录的路径

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-03-03T10:08:46.643

**！重要更新！**对于遇到这个问题的人。

因为这是一个有点老的问题，只是想提供一些额外的信息。由于 KitKat 甚至具有*WRITE_EXTERNAL_STORAGE*权限的应用程序也**只允许**写入外部存储上的**Android/data/data/your_package/ ，****也就是** `getExternalFilesDir()`

如果您尝试写信给`getExternalStorageDirectory() + "/somefolder/anotherfolder/"`您，大多数设备上都会收到 SecurityException

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2020-01-19T17:30:00.480

**！！重要的 ！！**

`Environment.getExternalStorageDirectory()`已**弃用**，应改为使用 Context#getExternalFilesDir(String)、MediaStore 或 Intent#ACTION_OPEN_DOCUMENT。

> 此方法在 API 级别 29 中已弃用。为了提高用户隐私，不建议直接访问共享/外部存储设备。当应用程序以 Build.VERSION_CODES.Q 为目标时，从此方法返回的路径不再可供应用程序直接访问。通过迁移到 Context#getExternalFilesDir(String)、MediaStore 或 Intent#ACTION_OPEN_DOCUMENT 等替代方案，应用程序可以继续访问存储在共享/外部存储上的内容。

[https://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory()](https://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory())

同样从 Android.M 开始，开发人员需要在运行时请求权限。

[在此处](https://www.google.com/search?client=firefox-b-d&q=android%20permissions)的文档和[此问题](https://stackoverflow.com/q/33666071/9640177)中查看更多详细信息

[在 API 级别 29 java 中不推荐使用 Environment.getExternalStorageDirectory()](https://stackoverflow.com/q/57116335/9640177)**

# java - 如何从 rt.jar 反编译 Java .class 文件

> ID：10123817
> 
> 赞同：1
> 
> 时间：2012-04-12T12:42:55.133
> 
> 标签：java, decompiling

我从 jre1.7 中的 rt.jar 文件中提取了一个 .class 文件，并尝试使用 notepad++ 打开它，但它不可读。如何将 .class 文件反编译成 .java 文件以便查看代码？

请注意，我对代码的反编译感兴趣，而不是查看 JDK 下载中提供的源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:46:57.023

正如@Jon Skeet 所说，不要使用JRE，而是使用包含整个源代码的JDK。如果你出于某种原因坚持你的方法，那么我推荐[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)进行反编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:46:33.823

`.class`files 是编译后的二进制文件。您无法从中读取 Java 代码，但可以运行它们。如果您想查看源代码，您通常需要`.java`文件。它们要么打包在同一个 jar 中，然后放在 src 文件夹中，要么可以下载到单独的包中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T05:03:25.560

您可以使用任何反编译器工具（如[cavaj](http://download.cnet.com/Cavaj-Java-Decompiler/3000-2213_4-10071619.html)）将类文件反编译为源代码（java 文件）。我正在使用它，它工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-12T11:12:39.727

尝试此处列出的任何反编译器：

*   Procyon - [https://bitbucket.org/mstrobel/procyon/wiki/Java%20Decompiler](https://bitbucket.org/mstrobel/procyon/wiki/Java%20Decompiler)
*   病死率 - [http://www.benf.org/other/cfr/](http://www.benf.org/other/cfr/)
*   京东-http: [//jd.benow.ca/](http://jd.benow.ca/)
*   蕨花 - [https://github.com/fesh0r/fernflower](https://github.com/fesh0r/fernflower)

或者使用在线反编译器 - [http://www.javadecompilers.com/](http://www.javadecompilers.com/)

# ruby - 是否存在续集模型生成器？

> ID：10123818
> 
> 赞同：0
> 
> 时间：2012-04-12T12:43:08.903
> 
> 标签：ruby, orm, sequel, ramaze

我正在寻找一个 ruby​​ 类，它可以在读取 mySQL 数据库中表的定义后为 Ramaze 生成续集模型文件。例如，我想输入： `ruby mySuperGenerator.rb "mytable"`

结果应该是“model”目录中的文件“mytable.rb”，其中包含：

```
 class Mytable < Sequel::Model(:mytable)
  # All plugins I've defined somewhere before lauching the generator
  plugin :validation_helpers
  plugin :json_serializer
  one_to_many :othertable
  many_to_one :othertable2

  def validate
        # Generating this if there are some not null attributes in this table
    validates_presence [:fieldthatshoulnotbenull1, :fieldthatshoulnotbenull2]
    errors.add(:fieldthatshoulnotbenull1, 'The field fieldthatshoulnotbenull1 should not be null.') if self.fieldthatshoulnotbenull1.nil?

  end

  def before_create
    # All the default values found for each table attributes
    self.creation_time ||= Time.now
  end

  def before_destroy
    # referential integrity
    self.othertable_dataset.destroy unless self.othertable.nil?
  end
end 

```

有人知道这样的发电机是否存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:34:53.777

嗯……我终于写好了我的剧本。见[https://github.com/Pilooz/sequel_model_generator](https://github.com/Pilooz/sequel_model_generator)看看和分叉！

# c# - SharpPcap OnPcapStatistics 事件在使用过滤器时引发异常？

> ID：10123820
> 
> 赞同：0
> 
> 时间：2012-04-12T12:43:16.350
> 
> 标签：c#, .net, winpcap, sharppcap

二人组

> [SharpPcap OnPcapStatistics 事件永远不会触发？](https://stackoverflow.com/questions/7458542/sharppcap-onpcapstatistics-event-never-fires)

我已经通过为 PcapDevice.SendPacketArrivalEvent() 和虚拟的 WinPcapDevice.SendPacketArrivalEvent() 设置覆盖来修复它，它工作得很好，但是当我添加一些像这样的过滤器时：

> device.Filter = "ip 和 tcp";

它引发了驱动器未准备好的异常，为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:12:53.257

对不起，我的错误，我在打开设备之前已经放置了过滤线。知道它工作正常。

# android - Android片段：以编程方式打开上下文菜单

> ID：10123821
> 
> 赞同：1
> 
> 时间：2012-04-12T12:43:20.267
> 
> 标签：android

我需要通过单击视图打开上下文菜单。我已经注册了上下文菜单的视图。

当我使用活动时，我只是调用了 openContextMenu([view registred for context menu]); 但是片段没有这种方法。

我必须怎么做才能在片段中一键打开上下文菜单？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T12:46:08.767

`getActivity().openContextMenu`应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-27T07:36:50.030

找到您的视图或只是膨胀，然后保存它

```
public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment, container, false);
    View myView = view.findViewById(R.id.view); 
```

然后你可以使用打开上下文菜单

```
view.showContextMenu(); 
```

# vb.net - WithEvents（句柄）与 AddHandler 之间的区别

> ID：10123824
> 
> 赞同：2
> 
> 时间：2012-04-12T12:43:27.410
> 
> 标签：vb.net, event-handling

我在[VB.NET中搜索了关于使用关键字](http://en.wikipedia.org/wiki/Visual_Basic_.NET)[Handles](http://msdn.microsoft.com/en-us/library/6k46st1y.aspx)而不是[AddHandler](http://msdn.microsoft.com/en-us/library/7taxzxka.aspx)的区别，但我无法解释为什么这段代码不起作用..

```
Imports System.Threading
Public Class MyClass_EventArgs
    Inherits System.EventArgs
End Class

Public Class MyClass
    Public Event MainThreadFinished(ByVal sender As Object, ByVal e As MyClass_EventArgs)
    Private WithEvents MyEvents As MyClass
    Private trd As Thread
    Public Sub New()
        'AddHandler MainThreadFinished, AddressOf Me.MyEvents_ThreadFinished
        trd = New Thread(AddressOf mainThread)
        trd.IsBackground = True
        trd.Start()
        RaiseEvent MainThreadFinished(Me, Nothing)
    End Sub
    Protected Overrides Sub Finalize()
        trd.Abort()
    End Sub
    Protected Sub MyEvents_ThreadFinished(ByVal sender As Object, ByVal e As MyClass_EventArgs) _
                Handles MyEvents.MainThreadFinished
        MessageBox.Show("AAA")
    End Sub
    Private Sub mainThread()
        RaiseEvent MainThreadFinished(Me, Nothing)
    End Sub
End Class 
```

好吧，这段代码从不响应事件，但是如果我取消注释下面的行，代码就可以工作并且出现消息框......

```
'AddHandler MainThreadFinished, AddressOf Me.MyEvents_ThreadFinished 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:53:36.477

看来你有一个很好的发现！根据 Microsoft 文档，*[RaiseEvent 声明](http://msdn.microsoft.com/en-us/library/fwd3bwed%28v=vs.100%29.aspx)*，

> 不应在声明它们的类的构造函数中引发非共享事件。尽管此类事件不会导致运行时错误，但它们可能无法被关联的事件处理程序捕获。`Shared`如果需要从构造函数引发事件，请使用修饰符创建共享事件。

换句话说，微软说你不应该做你正在做的事情——如果必须的话，使用共享事件。

`AddHandler`在查看其他来源时，我会说和之间的区别`Handles`是句法糖的问题。您可能想了解事件在 C# 中是如何完成的，以了解更多信息（例如在*[C# Events](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/C-Sharp-events/)*中）。`Handles`与 with 结合使用，`WithEvents`作为类实例自动订阅事件的一种方式（否则`+=`在 C# 和`AddHander`VB.NET 中显式完成）。

似乎您的明确`AddHandler`确保事件连接在 之前就位`RaiseEvent`，因此它可以按您的意愿工作。我只能猜测，如果没有这个，那些事件连接还没有完成——也就是说，它没有工作，因为编译器在幕后插入了执行相当于 AddHandler 的代码，无论编译器编写者采用什么设计模式认为合适。鉴于他们对此提出警告，设计师似乎很清楚这种可能的后果。

# ruby-on-rails - Rails 使用不同的布局？

> ID：10123826
> 
> 赞同：1
> 
> 时间：2012-04-12T12:43:30.323
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我知道 rails 使用默认的 application.html.erb。我有个人资料，在我的个人资料上我有视频、照片等，如何将我的主页（主页、关于、注册、登录）与实际应用程序分开？我遇到的问题是当用户尝试注册 rails 时会引发错误

```
Couldn't find Site with subdomain = 
```

那是因为我没有创建子域或站点，因为我无法注册创建一个。

我如何告诉 Rails 将 application.html 用于主页、关于、注册等页面，并将 home.hmtl.erb 用于个人资料页面和视频等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:50:40.870

创建一个名为 home 或类似的控制器。然后在控制器调用中：

```
layout :layout_name 
```

您可能需要创建一个 index.html 以使其也不会引发错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:50:05.007

您可以在为需要新布局的每个操作渲染操作时添加布局及其名称，或者您可以创建设置布局方法，默认情况下是设置应用程序和特殊操作加载特定布局。

# c# - 在没有模拟框架的情况下验证方法调用和参数

> ID：10123829
> 
> 赞同：3
> 
> 时间：2012-04-12T12:43:43.887
> 
> 标签：c#, unit-testing, mocking, windows-phone

我正在寻找验证给定方法（单元）是否执行正确逻辑的最佳方法。

在这种情况下，我有一个类似于：

```
public void GoToMyPage()
{
    DispatcherHelper.BeginInvoke(() =>
    {
        navigationService.Navigate("mypage.xaml", "id", id);
    });
} 
```

`navigationService`是接口的注入模拟版本，`INavigationService`. 现在，我想在我的单元测试中验证，它`Navigate(...)`是用正确的参数调用的。

但是，在 Windows Phone 上，IL 发射在一定程度上不受支持，其中模拟框架可以创建动态代理并分析调用。因此，我需要手动分析。

一个简单的解决方案是将`Navigate(...)`方法中调用的值保存在公共属性中，并在单元测试中检查它们。然而，对于所有不同类型的模拟和方法来说，这是相当烦人的。

所以我的问题是，有没有更聪明的方法来使用 C# 功能（例如委托）创建分析调用，而不使用基于反射的代理，并且不必手动保存调试信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:12:17.277

我的方法是手动创建 INavigationService 的可测试实现，该实现捕获调用和参数并允许您稍后验证它们。

```
public class TestableNavigationService : INavigationService
{
    Dictionary<string, Parameters> Calls = new Dictionary<string, Parameters>();

    public void Navigate(string page, string parameterName, string parameterValue)
    {
        Calls.Add("Navigate" new Parameters()); // Parameters will need to catch the parameters that were passed to this method some how
    }

    public void Verify(string methodName, Parameters methodParameters)
    {
        ASsert.IsTrue(Calls.ContainsKey(methodName));
        // TODO: Verify the parameters are called correctly.
    }
} 
```

然后可以在您的测试中使用它，例如：

```
public void Test()
{
    // Arrange
    TestableNavigationService testableService = new TestableNavigationService ();
    var classUnderTest = new TestClass(testableService );

    // Act
    classUnderTest.GoToMyPage();

    // Assert
    testableService.Verify("Navigate");
} 
```

我没有考虑传递给方法的参数，但我想这是一个好的开始。

# android - Android ImageView ScaleType 和项目高度

> ID：10123830
> 
> 赞同：20
> 
> 时间：2012-04-12T12:43:45.530
> 
> 标签：android, imageview, scale

事情起初看起来很简单，但最终结果并不好。我有一个宽度大于屏幕宽度的图像。所以我需要在我的图像视图中缩小它。我查看了 ScaleType 选项并尝试了所有选项，但没有一个可以。首先`"center"`只显示以布局为中心的图像，不进行缩放。`"fitCenter"`缩放图像以适合我的布局，但有一个主要缺点：项目的高度保持不变，因为它会在其中包含大图像。看一下附图中的第二个屏幕。如何强制列表项降低其高度以包装文本和图像？

![在此处输入图像描述](../Images/a68603d46deca242a8be5793f6c6fc30.png)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-12T12:56:44.680

使用对您来说最好的比例类型（我猜您喜欢使用 fitCenter 看到的内容）。您必须做的另一件事是

> 机器人：adjustViewBounds =“真”

在您的 ImageView 中。

或者您可以使用 FitXY，但有时结果并不完全符合您的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:52:39.267

利用`android:scaleType="fitXY"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T12:48:35.770

你能用 FitXY 吗？如果您知道要放入图像的区域的大小，这将起作用。CentreInside 也可以工作，我用它来缩小图像，但我认为这取决于你是否控制了边界布局元素的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-25T08:07:43.190

您需要在外部容器上设置 android:height = "wrap_content"，或者设置 TextBox 的静态高度并给 ImageView android:weight = "1" 以便 ImageView 占用容器中的剩余空间。

# javascript - Javascript原型继承

> ID：10123832
> 
> 赞同：0
> 
> 时间：2012-04-12T12:43:48.437
> 
> 标签：javascript

以下代码取自[http://bonsaiden.github.com/JavaScript-Garden/](http://bonsaiden.github.com/JavaScript-Garden/)

```
function Foo() {
    this.value = 42;
}
Foo.prototype = {
    method: function() {}
};

function Bar() {}

// Set Bar's prototype to a new instance of Foo
Bar.prototype = new Foo();
Bar.prototype.foo = 'Hello World';

// Make sure to list Bar as the actual constructor
Bar.prototype.constructor = Bar; 
```

我多次遇到过这种解释“当访问对象的属性时，首先它检查对象自身是否具有该属性，如果没有，则转到该对象的原型以查找该属性等等。”

但是由于以下代码的行为，我很难理解这实际上是有效的

```
var test1 = new Bar();
var test2 = new Bar();

test1.value = 24; 
```

现在 value 不是 test1 对象的一部分，但它是它的原型的属性，它是一个 Foo 对象，并且由于原型是一个 Foo 对象，所有 Bar 实例都将共享 value 属性，我希望上面的代码做的是将该 value 属性设置为 24，而是为 test1 对象创建一个名为“value”的新属性，并将其分配为 24，将原型中的 value 属性保留为其初始值 42。这听起来不像是共享。test2.value 的值仍然为 42。当我在 firebug 控制台中查看原型链时，它显示 test1 的 value 属性为 24，其原型的 value 属性为 42。

这是非常令人困惑的。有没有人知道它为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:48:47.970

原型链仅在*读取*属性时使用，并且仅当在对象本身中找不到该属性时才使用 - 在*写入*属性值时不使用它。

一旦将属性*写入*对象 ( `test1.value = 24`)，原型中任何现有的同名“共享”属性都会被隐藏，所有后续读取都将访问现在存储在对象本身中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:49:36.790

我想你想要 .hasOwnProperty()

如果那是您正在寻找的东西，那么其他人已经雄辩地在这里总结了它 [hasOwnProperty in javascript](https://stackoverflow.com/questions/2600085/hasownproperty-in-javascript)

**编辑**

阅读了另一个答案，然后这次正确阅读了问题......我想收回那个;-)

...

或者也许这就是您正在寻找的东西，您想在做其他事情之前检查属性是否已设置在“哈希”上。

我读了太多次了，我想我会感到困惑，我现在就闭嘴

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-08T03:44:34.303

只需在末尾附加以下几行即可检查发生了什么。

```
var test1 = new Bar();
test1.value = 30;

console.log(test1.hasOwnProperty("value"));
console.log(test1.value);

delete test1.value;

console.log(test1.hasOwnProperty("value"));
console.log(test1.value); 
```

**输出：**

```
true
30
false
42 
```

**条款：**

*   *hasOwnProperty*只返回 true 是 key 是对象的本地属性。
*   *delete*用于删除不涉及继承属性的本地属性。

**解释** 如果我们分配一个值，那么它会创建它自己的本地属性并覆盖原型属性。因此，由于本地属性比原型属性具有更高的偏好，因此首先读取它们。

# objective-c - TTPhotoViewController - 禁用拖动

> ID：10123833
> 
> 赞同：0
> 
> 时间：2012-04-12T12:43:51.930
> 
> 标签：objective-c, ios, three20, ttphotoviewcontroller

我正在尝试自定义three20 `TTPhotoViewController`，以便无法拖动第一个和最后一个图像。

我试图阻止的例子。 [https://plus.google.com/photos/109413514618904450093/albums/5730490807945885537?authkey=CMTi6OfqhLS2NQ](https://plus.google.com/photos/109413514618904450093/albums/5730490807945885537?authkey=CMTi6OfqhLS2NQ)

图像显示当前选中的图像已被向上拖动。此行为仅在第一个和最后一个中央图像上不会发生。

负责此行为的代码位于`TTScrollView`. 如果它是一个 uiscrollview 我只会将反弹设置为 NO。

谁能告诉我如何才能达到这个结果？

我认为问题出在，`TTScrollView:resistPageEdges`但我的黑客行为让我无处可去

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:09:44.950

TTPhotoViewController 委托 TTScrollViewDelegate。
TTScrollViewDelegate 有 -(void)scrollViewWillBeginDragging:(TTScrollView *)。
TTScrollView 有 (void)cancelTouches。
因此，您可以在自己的 TTPhotoViewController 子类中编写它。

```
- (void)scrollViewWillBeginDragging:(TTScrollView *)scrollView {
    [scrollView cancelTouches];
} 
```

每次用户尝试拖动时，它都会取消任何活动的触摸并将所有内容重置为未触摸状态。

# c#-to-vb.net - c# 图像上的多点选择

> ID：10123837
> 
> 赞同：0
> 
> 时间：2012-04-12T12:44:20.307
> 
> 标签：c#-to-vb.net

我正在为我的图像处理项目设计带有 Visual c# 的界面。我需要在图像上选择点并对这些点进行分类，以便在 vhdl 的图像处理代码中使用。

原始图像将保留在一个图片框中，我将在另一个图片框中使用选定的图像。

如何在图像上选择点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:51:47.727

如果您需要在鼠标悬停在图片框上时获取像素颜色和坐标，您可以使用

```
private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
{
    PictureBox pb = (PictureBox)sender;
    Bitmap bmp = (Bitmap)pb.Image;
    Color col = bmp.GetPixel(e.X, e.Y);
    // Do what you please with pixel coord and color
} 
```

# c# - CSharp 编译器无法打开父目录中的文件

> ID：10123839
> 
> 赞同：1
> 
> 时间：2012-04-12T12:44:31.877
> 
> 标签：c#, visual-studio-2010, msbuild, csc

我正在尝试编译一个位于我项目的同级目录中的 cs 文件，但 csc 无法打开它。这是触发问题的命令行示例：

```
csc ../test/file.cs 
```

Csc 打印此消息：

```
error CS1504: Source file '<path to current dir>\file.cs' could not be openned 
```

真正奇怪的是它剥离了“../test”部分。

任何人都知道如何进行这项工作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:25:10.187

由于这是命令行，您应该使用反斜杠来分隔目录。

```
csc ..\test\file.cs 
```

（在 C# 程序中，使用反斜杠还是正斜杠并不重要。）

# ruby-on-rails - 如何在rails中搜索特定字符串？

> ID：10123841
> 
> 赞同：0
> 
> 时间：2012-04-12T12:44:40.167
> 
> 标签：ruby-on-rails

我已经像下面这样输出了，我想搜索一个特定的字符串，它是如何在 rails 中执行此操作的价值。

例如：我想搜索**Nokogiri::XML::Text**模式并获取所有匹配**Nokogiri::XML::Text的模式**

```
#<LinkedIn::Location:0x4a339e8 @doc=#<Nokogiri::XML::Document:0x2519cb8 name="document" children=[#<Nokogiri::XML::Element:0x2519a0c name="per
son" children=[#<Nokogiri::XML::Text:0x25197f0 "\n  ">, #<Nokogiri::XML::Element:0x251970c name="`" children=[#<Nokogiri::XML::Text:0x2
519124 "\n    ">, #<Nokogiri::XML::Element:0x25190f4 name="name" children=[#<Nokogiri::XML::Text:0x2518bd8 "Bengaluru Area, India">]>, #<Nokog
iri::XML::Text:0x2518b00 "\n    ">, #<Nokogiri::XML::Element:0x2518ad0 name="country" children=[#<Nokogiri::XML::Text:0x2518680 "\n      ">, #
<Nokogiri::XML::Element:0x2518650 name="code" children=[#<Nokogiri::XML::Text:0x2517fcc "in">]>, #<Nokogiri::XML::Text:0x2517eb8 "\n    ">]>,
#<Nokogiri::XML::Text:0x2517cd8 "\n  ">]>, #<Nokogiri::XML::Text:0x2517bdc "\n">]>]>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:35:20.450

您可以获得如下值：

方式一：

```
reader = Nokogiri::XML::Reader(xml)
reader.read #Moves to next node in document
reader.attribute("cdn") # To get the value of attributes 
```

方式2：

```
doc = Nokogiri::XML(xml)
elems = doc.xpath("//*[@messageId]") #get all elements with an attribute of 'messageId'
elems[0].attr('messageId') #gets value of attribute of first elem 
```

# xcode - 重新创建 xcode 项目文件的最佳方法是什么？

> ID：10123848
> 
> 赞同：0
> 
> 时间：2012-04-12T12:45:14.563
> 
> 标签：xcode, xcode4.2

不知何故，在我的项目中，在多次 svn 提交、合并和冲突之后，我的 xcode 项目文件真的搞砸了。

所以，我想重新创建它，包括我所有的源文件。我想到的唯一天真的解决方案是创建一个新项目并将我的所有文件再次添加到其中。但是我需要重新创建我所有的组并重新组织它。

那是我唯一的解决方案吗？有没有更简单/更好的解决方案？

**编辑**：PS：Xcode 4.2.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:54:54.790

重新创建项目并导入所有类。

这是最简单、最安全的方法，除非你想冒更多问题的风险。

# jquery - jQuery自动完成自定义_renderItem问题

> ID：10123850
> 
> 赞同：4
> 
> 时间：2012-04-12T12:45:17.390
> 
> 标签：jquery, jquery-ui, debugging, jquery-ui-autocomplete, itemrenderers

我在使用 jQuery 自动完成时遇到问题。我正在对其进行自定义以显示两种项目：

*   与搜索字符串的实际匹配和
*   建议（拼写更正、相关关键字等）

后端完成所有工作；自动完成只是提供了两个列表。

一张图可以更好的解释：

[http://shot.ninjaloot.se/20120412.141112.png](http://shot.ninjaloot.se/20120412.141112.png)（数据只是开发中使用的虚拟数据，样式尚未完成）

在渲染工作时，项目的选择（单击或以其他方式）会引发难以调试的异常：

```
TypeError: 'undefined' is not an object (evaluating 'ui.item.data') 
```

据我了解， menu.selected 函数被赋予了一个`ui`具有未定义`item`键的参数。

为什么会发生这种情况，我该怎么办？如果我注释掉我的自定义渲染器，选择会起作用。

这是我的自定义渲染器功能。它是从 UI 源文件中逐字提取的，然后扩展为我的自定义 haxing。

```
$input.data("autocomplete")._renderItem = function(ul, item) {
    var cls = 'ui-menu-item';

    if(item.label === null) {
        cls += ' center disabled';
        item.label = '-- perhaps thou meaneth --';
    }

    return $("<li></li>")
     .data("item.autocomplete", item)
     .append("<a class='ui-corner-all'>" + item.label + "</a>")
     .addClass(cls)
     .appendTo(ul);
}; 
```

如果需要更多代码，我很乐意提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:19:22.940

> 自我回答！我设法自己解决了这个问题。显然，如果您手动添加类“ui-menu-item”，则菜单项被视为已完成并且不会进行任何后处理，并且后处理对于功能至关重要。如果我不手动添加类，它可以工作。

# python - 如何制作具有多个键的字典？

> ID：10123853
> 
> 赞同：72
> 
> 时间：2012-04-12T12:45:37.103
> 
> 标签：python, dictionary

我有一个关于我想要制作的字典的问题。我的目标是对单个值有多个键，如下所示：

```
dictionary = {('a', 'b'): 1, ('c', 'd'): 2}
assert dictionary['a'] == 1
assert dictionary['b'] == 1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-12T13:42:42.170

我猜你的意思是：

```
class Value:
    def __init__(self, v=None):
        self.v = v

v1 = Value(1)
v2 = Value(2)

d = {'a': v1, 'b': v1, 'c': v2, 'd': v2}
d['a'].v += 1

d['b'].v == 2 # True 
```

*   Python 的字符串和数字是*不可变*的对象，
*   因此，如果您想要`d['a']`并`d['b']`指向在更改时“更新”**的相同值**，请使该值引用一个*可变*对象（如上面的用户定义类，或 a `dict`, `list`, `set`）。
*   然后，当您在 处修改对象时`d['a']`，`d['b']`会同时更改，因为它们都指向同一个对象。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-08-17T18:00:42.147

如果您要经常添加到这本字典中，您需要采用基于类的方法，类似于@Latty 在这个 SO 问题[2d-dictionary-with-many-keys-that-will-return-the 中的回答-相同的值](https://stackoverflow.com/questions/13336952/2d-dictionary-with-many-keys-that-will-return-the-same-value)。

但是，如果您有一个静态字典，并且您只需要通过多个键访问值，那么您可以采用使用两个字典的非常简单的路线。一种用于存储别名键关联，另一种用于存储您的实际数据：

```
alias = {
    'a': 'id1',
    'b': 'id1',
    'c': 'id2',
    'd': 'id2'
}

dictionary = {
    'id1': 1,
    'id2': 2
}

dictionary[alias['a']] 
```

如果您需要添加到字典中，您可以编写这样的函数来使用两个字典：

```
def add(key, id, value=None)
    if id in dictionary:
        if key in alias:
            # Do nothing
            pass
        else:
            alias[key] = id
    else:
        dictionary[id] = value
        alias[key] = id

add('e', 'id2')
add('f', 'id3', 3) 
```

虽然这可行，但我认为最终如果你想做这样的事情，编写你自己的数据结构可能是要走的路，尽管它可以使用类似的结构。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-01T20:03:29.590

您的示例创建多个 key: value 对，如果使用`fromkeys`. 如果您不想这样做，您可以使用一个密钥并为该密钥创建一个别名。例如，如果您使用寄存器映射，则您的键可以是寄存器地址，别名可以是寄存器名称。这样您就可以对正确的寄存器执行读/写操作。

```
>>> mydict = {}
>>> mydict[(1,2)] = [30, 20]
>>> alias1 = (1,2)
>>> print mydict[alias1]
[30, 20]
>>> mydict[(1,3)] = [30, 30]
>>> print mydict
{(1, 2): [30, 20], (1, 3): [30, 30]}
>>> alias1 in mydict
True 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-06T06:00:49.117

很简单。首先你要了解 Python 解释器的设计。如果任何两个或多个变量具有相同的值，它基本上不会为所有变量分配内存，它只是映射到该值。

让我们来看代码示例，

```
In [6]: a = 10

In [7]: id(a)
Out[7]: 10914656

In [8]: b = 10

In [9]: id(b)
Out[9]: 10914656

In [10]: c = 11

In [11]: id(c)
Out[11]: 10914688

In [12]: d = 21

In [13]: id(d)
Out[13]: 10915008

In [14]: e = 11

In [15]: id(e)
Out[15]: 10914688

In [16]: e = 21

In [17]: id(e)
Out[17]: 10915008

In [18]: e is d
Out[18]: True
In [19]: e = 30

In [20]: id(e)
Out[20]: 10915296 
```

从上面的输出中，变量 a 和 b 共享相同的内存，当我创建一个新变量 e 并存储变量 c 中已经存在的值 (11) 时，c 和 d 具有不同的内存，因此它映射到该内存位置和当我将变量 e 中存在的值更改为变量 d 中已经存在的 21 时，不会创建新内存，因此现在变量 d 和 e 共享相同的内存位置。最后，我将变量 e 中的值更改为 30，该值未存储在任何其他变量中，因此它为 e 创建了一个新内存。

所以任何具有相同值的变量共享内存。

> 不适用于列表和字典对象

让我们来回答你的问题。

当多个键具有相同的值时，所有键都共享相同的内存，因此您期望的东西已经存在于 python 中。

你可以像这样简单地使用它

```
In [49]: dictionary = {
    ...:     'k1':1,
    ...:     'k2':1,
    ...:     'k3':2,
    ...:     'k4':2}
    ...:     
    ...:     

In [50]: id(dictionary['k1'])
Out[50]: 10914368

In [51]: id(dictionary['k2'])
Out[51]: 10914368

In [52]: id(dictionary['k3'])
Out[52]: 10914400

In [53]: id(dictionary['k4'])
Out[53]: 10914400 
```

从上面的输出中，键 k1 和 k2 映射到相同的地址，这意味着值一个只存储在内存中，这是一个多键单值字典，这就是你想要的。:P

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-29T00:05:33.070

**短中型版本**

**拥有多把钥匙**

```
#!/usr/bin/env python3

def get_keys(s):
    # Lower the user's entry to easily manipulate data
    s = s.lower()

    # Create a list to simulate multiple keys
    numbers = ['uno', 'one', 'um', 'eins', 'ein']

    # Lambda for input validation
    validator = lambda x: x if x in numbers else 'no-key-found'  # return me x if x is found in the list numbers, contratiwise return me 'no-key-found'

    dic = {
        validator(s):'1',
        'no-key-found':'Key does not exist'
    }

    return dic[validator(s)]

print(get_keys(input('Type in word: '))) 
```

***更简单的版本***

```
#!/usr/bin/env python3

import sys

def week_days():
    # Assets
    number_day = ['1', '2', '3', '4', '5', '6', '7']

    # Introduction
    print('Welcome to the Week Day Finder')

    # User input
    day = input('Please, enter the day you want to check: ').lower()
    WEEK_COLOR = {'RED': '\u001b[31m', 'GREEN': '\u001b[32m'}

    # Day validator
    days = {
        '1' if day in number_day else 'sunday': 'Weekend Day',
        '2' if day in number_day else 'monday': 'Week Day',
        '3' if day in number_day else 'tuesday': 'Week Day',
        '4' if day in number_day else 'wednesday': 'Week Day',
        '5' if day in number_day else 'thursday': 'Week Day',
        '6' if day in number_day else 'friday': 'Week Day',
        '7' if day in number_day else 'saturday': 'Weekend Day'
    }

    # Logical trial
    try:
        if days[day] == 'Week Day':
            print(WEEK_COLOR['GREEN'], days[day])

        elif days[day] == 'Weekend Day':
            print(WEEK_COLOR['RED'], days[day])

    except KeyError:
        print('** Invalid Day **', file=sys.stderr)

def main():
    week_days()

if __name__ == '__main__':
    main() 
```

# java - 通过 org.eclipse.ui.menus 扩展点贡献一个“editorAction”

> ID：10123862
> 
> 赞同：2
> 
> 时间：2012-04-12T12:46:33.883
> 
> 标签：java, eclipse-rcp

[在像这里](http://www.ibm.com/developerworks/opensource/library/os-eclipse-3.3menu/index.html)这样的许多文档中，都描述了 Eclipse 3.2 中的旧扩展点`org.eclipse.ui.actionSets`、`org.eclipse.ui.viewActions`、`org.eclipse.ui.editorActions`和被Eclipse 3.3 中的新扩展点替换。`org.eclipse.ui.popupMenus``org.eclipse.ui.menus`

所以我的简单问题是：如何使用新的扩展点`org.eclipse.ui.menus`为 editorAction 工具栏 ( `org.eclipse.ui.editorActions`) 做出贡献？

我在许多不同的值中尝试了以下类似的东西，`locationURI`但它从未奏效。

```
 <extension point="org.eclipse.ui.menus">
      <menuContribution locationURI="toolbar:my.editor.id">
         <command
               commandId="my.command.id"
               icon="icons/somicon.gif"
               label="Do my command"
               style="push">
         </command>
      </menuContribution>
   </extension> 
```

我的命令永远不会出现，我在控制台中也没有得到任何反馈。那么正确的属性是什么`locationURI`，让我的命令在那里？

该命令适用于其他工具栏，它也可以通过旧扩展点工作（修改命令类）。

为什么我需要新的扩展点？因为它不仅支持命令，还支持控件，您可以在其中贡献的不仅仅是一个简单的按钮。

**最终更新**

下面的解决方案旨在替换 editorActions 扩展点的功能。由于答案最后评论中提到的错误，这种替换并不是真的有用。总之接受了...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:56:29.760

我设法使用这个 locationURI 为 Eclipse 中的主工具栏做出贡献：

```
locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions" 
```

因此，例如，仅当我的编辑器处于活动状态时才将我的命令贡献给工具栏：

```
<extension
     point="org.eclipse.ui.menus">
  <menuContribution
      locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
     <toolbar
           id="mytoolbar.id"
           label="my toolbar">
        <command
              commandId="command.id"
              icon="icons/sample.gif"
              id="mytoolbar.command.id"
              label="Do my command"
              style="push">
           <visibleWhen
                 checkEnabled="false">
                     <with
                         variable="activePartId">
                          <equals
                             value="my.editor.id">
                          </equals>
                     </with>
          </visibleWhen>
        </command>
     </toolbar>
  </menuContribution>
</extension> 
```

其中 command.id 是我的命令的 id。

# tftp - tftp PUT 因 TFTPD32 失败（atftp 和 tftp 有效）

> ID：10123863
> 
> 赞同：0
> 
> 时间：2012-04-12T12:46:37.597
> 
> 标签：tftp

我使用以下命令在嵌入式系统上配置 tftpd：

```
# udpsvd -E 0 69 tftpd -c /flash0/app/Binary/ 
```

当我使用 linux 应用程序（tftp、atftp）作为客户端时，一切正常。但是使用 Windows 工具（Ph.Jounin 的 TFTPD32）- 在公司中首选我无法将文件放入服务器。

正确的跟踪（几行）：

```
# sending 4 bytes
00 04 00 00 
received 516 bytes: 0003 0001
sending 4 bytes
00 04 00 01 
received 516 bytes: 0003 0002
sending 4 bytes
00 04 00 02 
received 516 bytes: 0003 0003
sending 4 bytes 
```

错误跟踪：

```
# sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
sending 10 bytes
00 06 74 73 69 7a 65 00 30 00 
received 516 bytes: 0003 0001
tftpd: timeout
tftpd: malformed packet
tftpd: malformed packet 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:25:44.957

好的。这是 tftp 实现依赖问题。我使用 ddwrt/busybox 发行版中的一个。我需要禁用 FEATURE_TFTP_BLOCKSIZE，并避免使用 tftp_get_option("blksize"...)。

# css - 移动混合应用程序图像嵌入，png vs. inlined-base64 vs. font-face？

> ID：10123865
> 
> 赞同：3
> 
> 时间：2012-04-12T12:46:50.970
> 
> 标签：css, ios, performance, mobile, extjs

我正在寻找有关此问题的一些反馈，我正在使用 Sencha Touch 2.0 构建通过 PhoneGap/Cordova 打包的混合应用程序。

我很想使用一种字体来嵌入符号（并自动消除分辨率问题）。我只是喜欢桌面版的[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)并且我想知道它是否也适用于移动应用程序。

但是，我也在努力获得最好的性能。

想法是能够在庞大的列表（> 500 个项目）上使用这些符号。而且我完全不知道这些方法（png vs. inlined-base64 vs. font）将如何比较。

看起来 Sencha 团队正在使用 inlined-base64 而不是静态 png。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:34:10.693

**字体真棒**

我正在做一个我们曾经使用 FontAwesome 的项目，并且在 iOS 上一切正常。但是我们遇到了一个大问题，它无法在 Android 上运行，我们也不知道如何解决这个问题。因此，如果您不考虑为 Android 手机制作应用程序，或者它恰好适合您，那么我建议您去做。正如您所说，使用网络字体，您不必关心屏幕分辨率，您可以轻松更改图标的颜色和大小，我发现这非常方便。

**PNG**

我想 PNG 的唯一问题是您为获取它们而发出的 HTTP 请求的数量。所以我能给你的唯一建议就是使用精灵。你可以使用像 Glyphicons 这样的东西，它给你的图标很像 FontAwesome。

**内联 Base64**

此解决方案的唯一问题是图像 URI 不得大于 32k（根据[何时考虑 base64 (DATA: URI) 图像？](https://stackoverflow.com/questions/5650717/when-to-consider-base64-data-uri-images)）。IE6/7 显然不支持它，我认为这不是问题，因为 Sencha 只支持 webkit 浏览器。

**因此，根据我的经验，如果可能的话，请选择 FontAwesome，否则精灵应该始终是静态图像的最佳选择。**

希望它有所帮助

# jquery - jQuery UI 日历小部件在更改年份或月份时更改日期

> ID：10123871
> 
> 赞同：0
> 
> 时间：2012-04-12T12:47:16.457
> 
> 标签：jquery, jquery-ui

我正在使用带有月份和年份下拉菜单的 jQuery UI 日历小部件，如下所示：http: [//jqueryui.com/demos/datepicker/#dropdown-month-year](http://jqueryui.com/demos/datepicker/#dropdown-month-year)

显然有些人选择一天，然后再次打开小部件，选择一年和一个月并让它关闭。问题是选择年份和月份不会更改输入日期的年份和月份，只会更改显示给用户的年份和月份。

有没有办法让年份和月份对日期立即生效，这样如果我的日期是 22/06/2012 并选择 1990，它将自动转到 22/06/1990。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:28:38.340

您应该为此事件设置触发器`onChangeMonthYear`。

例如：

```
$(function() {
    $( "#datepicker" ).datepicker({
        changeMonth: true,
        changeYear: true,
        onChangeMonthYear: function(year, month, inst) {
        if(inst.currentYear != inst.drawYear || inst.currentMonth != inst.drawMonth) {
          $(this).datepicker("setDate", new Date(year, month - 1, inst.selectedDay));
        }
    });
}); 
```

# php - 传递参数并执行另一个 PHP 脚本

> ID：10123873
> 
> 赞同：0
> 
> 时间：2012-04-12T12:47:24.793
> 
> 标签：php, text

我有一个 php 脚本 script1.php。我想将参数传递给 script2.php 并从 script1.php 执行它。（script2.php 将输出保存到 script1.php 中使用的文本文件）

编辑：

这是我的 script2.php

```
require_once('showtimes/simple_html_dom/simple_html_dom.php');

$html = new simple_html_dom();
//$requested4=$_GET['place'];
$html->load_file('http://www.google.com/movies?near=${requested4}&hl=en');
ob_start(); 

$muv='<pre>';
foreach($html->find('#movie_results .theater') as $div) {
    // print theater and address info
$muv=$muv."Theatre:  ".$div->find('h2 a',0)->innertext."\n";
$muv=$muv."Address: ". $div->find('.info',0)->innertext."\n";

    // print all the movies with showtimes
    foreach($div->find('.movie') as $movie) {
       $muv=$muv."\tMovie:    ".$movie->find('.name a',0)->innertext.'<br />';
      $muv=$muv."\tTime:    ".$movie->find('.times',0)->innertext.'<br />';
    }
    $muv=$muv. "\n\n";
}
$muv=$muv."</pre>";
//ob_get_contents(); 
ob_end_clean(); 
echo $muv;
file_put_contents('textfiles/file.txt', $muv);  
$html->clear();

?> 
```

如果我只是执行它，它可以正常工作，但是如果我将它包含在 script1.php 中，我会收到此错误

```
Fatal error: Call to a member function find() on a non-object in /home/anandheg/public_html/anandghegde.in/se/showtimes/simple_html_dom/simple_html_dom.php on line 879 
```

另外，我在服务器上没有执行 shell 的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:51:13.837

使用反引号来调用系统命令

```
<?php
`script1.php any_command_line_options_goes_here`;

//example
`/usr/bin/php -i`; 
```

然后您可以在 script1.php 中执行后读取文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:49:32.870

您可以简单地将 script2.php 包含在 script1.php 中

```
include 'script2.php'; 
```

您不必传递参数，`script2.php`在该语句之前存在的变量`include`将在 script2.php 中正常可用。

# ruby - SWFUpload 和 WEBrick。上传问题（错误：2038）

> ID：10123878
> 
> 赞同：0
> 
> 时间：2012-04-12T12:47:41.923
> 
> 标签：ruby, ruby-on-rails-3, flash, webrick

我的 WEBrick 日志显示：

> WARN 无法确定响应正文的内容长度。设置响应的内容长度或设置 response#chunked = true

我做了一些搜索，发现该错误可能是因为：

1.  服务器允许的文件大小小于上传大小。
2.  服务器上的可用空间不足（已检查。有足够的空间）

关于这个话题的任何帮助？

PS：我也试过瘦。那里也没有帮助。或者也许我错过了“瘦配置”选项中的一些选项。

此外，自页面请求以来我的日志：如果这有帮助： http: [//paste.pocoo.org/raw/580142/](http://paste.pocoo.org/raw/580142/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:25:32.397

尝试将此添加到您的 Gemfile

```
gem "rack-raw-upload" 
```

这支持 Rails 中的 Ajax-Upload。

# iphone - 我不知道如何在 iPhone 中 md5 我的密码，或者如何开始

> ID：10123883
> 
> 赞同：1
> 
> 时间：2012-04-12T12:48:13.703
> 
> 标签：iphone, passwords, md5, commoncrypto

我不知道如何在 iPhone 中 md5 我的密码，或者如何开始。我试图了解 CommonCrypto 之类的东西。会有帮助吗？急求建议~谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:53:34.580

Apple 论坛上的这个答案/问题实际上在 iPhone 上有几个有效的 md5 哈希实现：[https](https://discussions.apple.com/message/7362074?messageID=7362074#7362074?messageID=7362074) ://discussions.apple.com/message/7362074?messageID=7362074#7362074?messageID=7362074 。

# android - 如何在 Android 中成功调试？

> ID：10123885
> 
> 赞同：0
> 
> 时间：2012-04-12T12:48:17.597
> 
> 标签：android, debugging

我知道有 LogCat 视图来检查记录的消息，但我无法理解它。

在调试时（我主要使用 Java），我习惯于遍历每一行代码并找出程序崩溃的确切位置，然后对其进行处理。

如何通过 Android 开发做到这一点？有没有办法精确定位导致应用程序崩溃的行？

我不明白该做什么/如何阅读 LogCat 消息，当我尝试跳过（使用 F9 键或 Eclipse 中的“调试”选项）时，它会不断打开内置类文件的新选项卡（如 Instrumentation.class等），并在再次按 F6 几次后，应用程序崩溃并显示“应用程序已意外停止。请再试一次'

有人可以告诉我是否有一些我不在这里做的事情要做吗？谢谢！

顺便说一句，如果有帮助，这是生成的日志： http: [//pastebin.com/EaqaWUdS](http://pastebin.com/EaqaWUdS)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:53:07.920

您使用的资源 id 不存在于第 93 行：com.site.custom.ModAdapter.getView(CustomListProjectActivity.java

--编辑：添加解释

您将以与在 Java 中相同的方式读取 logcat 堆栈跟踪：自下而上阅读，罪魁祸首是类的最后一行（在代码进入 android sdk 代码之前）。

你可以反过来做，从顶部开始，停在你的第一个类并丢弃 android 类。

调试时也适用相同的推理：如果需要，请进入您的方法并遍历 SDK 的所有方法，除非您想调试它们（通常您不会，如果您真的怀疑 SDK 中存在错误，请检查 grepcode 中的源代码查看您感兴趣的 android sdk 类的内部机制）。

有时很难在 android 上跟踪 bug，尤其是与 widget 布局相关的 bug，因为你只能看到 android 平台执行的代码，没有执行你的代码，只有你的数据是从 xml 文件中读取的。如果这里有问题，调试起来可能会更困难。在这种情况下，应用二分法：删除半行，如果错误没有出现，然后读取你的行，删除其中的一半，等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:54:39.400

这和java中的一样。基本上，您需要源来打开 java 文件而不是类文件。Google 向您展示了如何添加来源。

基本上，您在自己的课程中调试 android。我几乎没有研究过 android 类，因为大多数问题当然都在我自己的类中。

因此，只需像您已经做的那样进行调试，但不要进入您不拥有的方法/类，除非您已将源添加到您的 sdk。即使你有，也可能有一些类不是开源的，所以你不能进入那里的源代码。（基本上所有 Google API 类）

# javascript - 显示 object.responseXML 文本以进行调试

> ID：10123887
> 
> 赞同：6
> 
> 时间：2012-04-12T12:48:19.923
> 
> 标签：javascript, jquery, xml, debugging, sharepoint

我正在使用以下脚本：

```
<script type="text/javascript"> 
    function processResult(xData, status) { 
       $('.feedbackLink').empty(); 
        alert ($(xData.responseXML.xml));
        console.log($(xData.responseXML.xml));
        $(xData.responseXML).find("z\\:row").each(function() { 
            alert ($(this));
            var title = $(this).attr("ows_Title"); 
            var url = $(this).attr("ows_Contact"); 
            $('.feedbackLink').append("<a href="+url+">"+title+"</a>"); 
       }); 

   };

   $(document).ready(function() { 
   alert("ready"); 
       var soapEnv = "<?xml version='1.0' encoding='utf-8'?> <soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'> <soapenv:Body> <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> <listName>Pages</listName> <viewFields> <ViewFields> <FieldRef Name='Title' /> <FieldRef Name='Contact' /> </ViewFields> </viewFields> </GetListItems> </soapenv:Body> </soapenv:Envelope>";       
       $.ajax({ 
           url: "/_vti_bin/lists.asmx", 
           type: "POST", 
           dataType: "xml", 
           data: soapEnv, 
           complete: processResult, 
           contentType: "text/xml; charset=\"utf-8\"" 
       });
       alert(soapEnv); 
   }); 

    </script> 
```

但是里面的警报`$(xData.responseXML).find("z\\:row").each(function() {`不会触发。如何查看 responseXML？我想仔细检查我正在寻找正确的标识符（我不知道从哪里来`ows_`，我得到了这个脚本可以使用）。

alert 和 console.log 只显示 [object Object]。

关于如何调试的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:49:02.483

尝试使用`console.log(xData.responseText)`在控制台中获取实际的 xml 而不是 [object Object]。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T22:13:18.213

在 IE 中：

```
alert(xData.responseXML.xml); 
```

在 Firefox 中（未确认）：

```
var string = (new XMLSerializer()).serializeToString(xData.responseXML); alert(string); 
```

要查看完整的 xml，您可以将其附加到页面 (IE)：

```
function processResult(xData, status) 
{
    document.body.innerHTML += htmlEncode(xData.responseXML.xml);
}
function htmlEncode(str)
{
    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
} 
```

xData.responseXML.xml 是 xml 作为字符串，因此不需要将其转换为 jquery 对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:17:42.177

尝试使用[firebug](http://getfirebug.com/) for firefox 查看错误消息和由`console.log`.

# c# - 使用静态字典时，出现错误“已添加项目”。在 ASP.NET 中

> ID：10123895
> 
> 赞同：1
> 
> 时间：2012-04-12T12:49:04.827
> 
> 标签：c#, asp.net, dictionary

当我使用 f10 调试代码时，它可以正常工作，没有错误！但在运行时我收到此错误：“已添加具有相同密钥的项目”

请帮忙

我的字典：

```
public static Dictionary<string, string> ImageFilePath
        = new Dictionary<string, string>(); 
```

在同一个 Glob.cs 中使用我的函数：

```
public static Image ShowImageOnColumn(string Value,byte ImageHeigth,byte ImageWidth)
{

   .
   .
   .

    string FilePath = "",ImgId = "";

    Image img_ = new Image();

    Random rnd = new Random();

    ImgId = rnd.Next(100000000).ToString();
    img_.ImageUrl = "ShowImageInRuntime.aspx?FileName=" + ImgId;

    ImageFilePath.Add(ImgId, FilePath);

    img_.Height = Unit.Pixel(ImageHeigth);
    img_.Width = Unit.Pixel(ImageWidth);

    return img_;

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:51:35.100

你没有保护你的`ImageFilePath.Add`电话。如果密钥已经存在，您将得到一个异常说明。

您可以检查密钥：

```
if (ImageFilePath.ContainsKey(ImgId))
{
    ImageFilePath[ImgId] = FilePath;
} 
```

或者您可以在索引上设置，如果它丢失，它将添加，如果存在则更新：

```
ImageFilePath[ImgId] = FilePath; 
```

而不是调用 Add.

但是请注意，当 IIS 回收工作进程时，静态成员**可能会丢失。**因此，它们往往被避免。由于静态成员在整个进程中可见，因此也存在多线程问题。

如果您需要一个随机文件名，请尝试`DateTime.ToString("ddMMyyyyhhmmssfff")`或`Guid.NewGuid()`，而不是保持`Random`活动实例。

`Path`还有一个`GetTempFileName`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:53:54.160

`Random`这是因为您每次使用该功能时都会实例化类并重新启动随机种子。在单例中实例化`Random`，可能在类构造函数中，每次调用时都会有一个有效的 uniq(ish) 编号。

我还建议，随机不是唯一的，对于唯一值，您很可能希望使用哈希算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T12:55:16.803

使用`Guid.NewGuid().ToString("N")`而不是随机数。这将确保没有碰撞。另外，给出关于静态成员使用的思考过程。它们在多个线程之间共享，当多个用户同时访问您的站点时，您可能会遇到线程安全问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:00:00.593

在将密钥添加到字典之前检查密钥是否已存在

```
if (!ImageFilePath.ContainsKey(ImgId))                     
{
    ImageFilePath.Add(ImgId,FilePath); 
} 
```

# capistrano - 使用 forward_agent 选项从 Windows 部署 Capistrano：“从身份验证套接字读取响应长度时出错。”

> ID：10123896
> 
> 赞同：12
> 
> 时间：2012-04-12T12:49:07.487
> 
> 标签：capistrano, git-bash, ssh-agent

我正在尝试使用 Capistrano 部署一个项目。我的开发机器运行的是 Windows 7；我要部署的服务器是 Linux。

在 deploy.rb 脚本中，设置了以下内容：

```
ssh_options[:forward_agent] = true 
```

Capistrano 脚本首先在本地运行 git 命令，此时系统会提示我输入 SSH 密钥的密码：

```
* executing `deploy:update_code'
executing locally: "git ls-remote git@github.com:pathto/gitproject.git develop"
Enter passphrase for key '/c/Users/Sam/.ssh/id_rsa':
command finished in 6999ms 
```

（你可能会看到，我已经从上面删除了真正的 git 路径。）

我输入我的密码，这很好用。然而，Capistrano 然后尝试在远程机器上做类似的事情（在下面重命名为 staging-server.com），我得到了一个错误——见这个摘录的最后一行：

```
[staging-server.com] executing command
[staging-server.com] sh -c 'git clone git@github.com:pathto/gitproject.git /home/perstest/releases/20120412074500 && cd
/home/perstest/releases/20120412074500 && git checkout -b deploy 50eaf06d06d66fd20c3e55038276f420d8c308a8 && (echo 50eaf06d06d66fd20c3e55038
276f420d8c308a8 > /home/perstest/releases/20120412074500/REVISION)'
 ** [staging-server.com :: out] Initialized empty Git repository in /home/perstest/releases/20120412074500/.git/
 ** [staging-server.com :: err] Error reading response length from authentication socket. 
```

如果我注释掉 deploy.rb 中的 forward_agent 行，则此安装成功，可能是使用部署服务器本身的密钥。

我的 SSH 密钥似乎正在工作 - 毕竟，初始 git 命令有效，我可以在 git push/pull 中使用它，并且 ssh -T git@github.com 报告它应该做什么（如[github:help](http://help.github.com/win-set-up-git/)上的建议）。

当远程服务器要求提供密钥时，我假设我的机器没有提供密钥。经过大量谷歌搜索，我在[http://hustoknow.blogspot.co.uk/2011/06/ssh-agent-and-agent-forwarding-on.html](http://hustoknow.blogspot.co.uk/2011/06/ssh-agent-and-agent-forwarding-on.html)找到了建议，其中解释了如何获取 ssh-agent在启动时运行。我是在命令提示符下执行所有这些操作的，因此我切换到 git-bash 并设置我的 .bash_profile 以包含我链接到的脚本。

添加后，首次启动 git bash 时提示我输入密码，然后我可以使用 SSH 密钥连接到 github（无需重新输入密码）。此外， ssh-add -L 报告确实有一个可用的密钥。所以一切似乎都设置正确！

但是，我仍然收到“从身份验证套接字读取响应长度时出错”。错误。

有任何想法吗？这适用于我的开发机器是 Linux 的同事（相同的 deploy.rb 文件）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:40:00.017

这是来自 net-ssh 的错误，如此处[所述](https://github.com/net-ssh/net-ssh/pull/14)

# vb.net - ASP.NET MVC 音乐商店问题

> ID：10123897
> 
> 赞同：0
> 
> 时间：2012-04-12T12:49:11.700
> 
> 标签：vb.net, entity-framework-4.1

在 mvc 3 音乐商店示例中，他们执行以下操作。

```
Public Class Album

Public Property GenreId AS Integer

...

Public Overidable Property Genre as Genre

End Class 
```

实体框架似乎很漂亮，并且认为 GenreId 是 Genre 表的 PK。因此，“Album”的 SQL 表将 GenreId 作为列，当我们加载专辑 storeDB.album.find(x) 时，它也会加载“Genre”实体。

我的问题是，如果我们想要第二个相同类型的对象怎么办。例如，如果每张专辑都有一个主要流派和一个次要流派怎么办。我认为我们可以做这样的事情。

```
Public Class Album

Public Property MainGenreId As Integer
Public Overidable Property MainGenre As Genre

Public Property BackupGenreId As Integer
Public Overidable Property BackupGenre as Genre

End Class 
```

我也试过这个......

```
Public Class Album

Public Property MainGenre_GenreId As Integer
Public Overidable Property MainGenre As Genre

Public Property BackupGenre_GenreId As Integer
Public Overidable Property BackupGenre as Genre

End Class 
```

但是，这些选项都不能正常工作。谁能指出我正确的方向，这样当我通过 storeDB.album.find(x) 加载专辑时，它会自动填充 MainGenre 和 BackupGenre？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:03:31.967

您需要使用数据注释或 Fluent API 来配置关系。假设实体上有两个名为`MainGenreAlbums`and的集合属性，您可以使用and属性来配置关系。`BackupGenreAlbums``Genre``ForeignKey``InverseProperty`

```
Public Class Album

  Public Property MainGenreId As Integer

  <ForeignKey("MainGenreId")>
  <InverseProperty("MainGenreAlbums")>
  Public Overidable Property MainGenre As Genre

  Public Property BackupGenreId As Integer

  <ForeignKey("BackupGenreId")>
  <InverseProperty("BackupGenreAlbums")>
  Public Overidable Property BackupGenre as Genre

End Class 
```

# ios - iOS UITableView：空的页眉和页脚高度？

> ID：10123899
> 
> 赞同：1
> 
> 时间：2012-04-12T12:49:17.423
> 
> 标签：ios, uitableview, header, height

要将 UITableView 正确嵌入到 UIScrollView 中，我需要知道 UITableView 的确切高度。我添加了行数 * rowHeight 和节标题数 * sectionTitleHeight，但这仍然是大约 50 像素。我猜这是由空表页眉和页脚引起的，但我找不到任何关于它们有多高的信息......

我错过了 UITableView 类参考中的某些内容吗？

感谢您的任何提示，诺比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:52:02.313

您可以获取`UITableView`'s`frame`变量并检查其`size`成员变量以查看`UITableView`元素的确切大小。

```
CGSize tableSize = [table frame].size;
CGFloat tableHeight = tableSize.height;
CGFloat tableWidth = tableSize.width; 
```

# java - 如何在 Java 中使用 Apache POI 在 Excel 中创建图表？

> ID：10123903
> 
> 赞同：-2
> 
> 时间：2012-04-12T12:49:36.207
> 
> 标签：java, apache-poi

> **可能重复：**
> [使用 Apache POI 创建 excel 图表](https://stackoverflow.com/questions/3354092/create-excel-chart-using-apache-poi)

我的项目需要在 Excel 中创建图表。如何使用 Apache POI 创建图表？

请尽可能尽快回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:02:22.810

请参阅[POI 电子表格限制页面](http://poi.apache.org/spreadsheet/limitations.html)- 尚不支持添加图表。

如果被接受，GSOC 学生有可能在今年夏天为 POI 添加更多图表支持，但同时你不能。

目前的解决方法是加载 excel，为所需的每个系列创建命名范围，然后创建图表以使其看起来像你想要的那样。将此保存为模板文件。根据需要，在 POI 中打开模板，写入数据，然后更新命名范围以引用新数据。当您在 Excel 中打开时，您将在图表中看到新数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:01:58.377

您不能使用 Apache POI 创建图表。您可以做的是创建一个excel模板并创建图形并绑定数据。 [POI 的限制](http://poi.apache.org/spreadsheet/limitations.html)

# c# - 修改 linq 以获取前 5 个元素

> ID：10123913
> 
> 赞同：1
> 
> 时间：2012-04-12T12:50:10.840
> 
> 标签：c#, linq

```
var lastArticles = from a in be.MyTable
                   where a.id == 1
                   join c in be.OtherTable on a.parent equals c.id
                   orderby a.timestamp descending
                   select new { a, cName = c.name}; 
```

我需要获得前 5 个元素。

我正在这样做

```
.Take(5) 
```

但是有没有办法在 linq 语句中做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T12:51:36.307

不，您需要使用[`Skip()`](http://msdn.microsoft.com/en-us/library/bb357513.aspx)and[`Take()`](http://msdn.microsoft.com/en-us/library/bb300906.aspx)作为方法调用。没有特定于 LINQ 的等效项。

```
var lastArticles = (from a in be.MyTable
                    where a.id == 1
                    join c in be.OtherTable on a.parent equals c.id
                    orderby a.timestamp descending
                    select new { a, cName = c.name }).Take(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:54:21.850

linq 查询应始终与运行该查询的产品分开。

`.Take()`产生结果，因此应该与查询分开和不同。

```
//data query
var lastArticlesQuery = from a in be.MyTable
                   where a.id == 1
                   join c in be.OtherTable on a.parent equals c.id
                   orderby a.timestamp descending
                   select new { a, cName = c.name};

//results of that query at this time
var lastArticles = lastArticlesQuery.Take(5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T12:57:21.433

这段代码只是语法糖，最终它会被转换成一个看起来像这样的 LINQ 方法链：

```
var lastArticles = be.MyTable
    .Where(a => a.id == 1)
    .Join(be.OtherTable, a => a.parent, c => c.id,
    (a, c) => new { a, c})
    .OrderByDescending(@t => @t.a.timestamp)
    .Select(@t => new { @t.a, cName = @t.c.name }); 
```

所以有一个关键字 for`Take()`只会增加语法糖，它也需要重新转换。

简而言之，不，唯一的方法是使用`Take()`方法。

# continuous-integration - 如何向詹金斯添加一些预构建步骤？

> ID：10123914
> 
> 赞同：6
> 
> 时间：2012-04-12T12:50:15.677
> 
> 标签：continuous-integration, hudson, jenkins

我是 Jenkins 新手，需要一点帮助，因为我们只在 SVN 中维护部分应用程序。我有基本的 Jenkins 安装设置。

这是我为获得本地 DEV 环境设置所做的，并且需要将其转换为 Jenkins 以进行构建：

1.  执行 SVN 结帐（并获取 SVN 下的 2 个文件夹）
2.  删除文件夹
3.  从 FTP 位置复制完整的应用程序
4.  做SVN还原
5.  下载sql文件
6.  导入 MySQL

我将如何在 Jenkins 中获得上述步骤？我知道我可以使用一些后期构建步骤。只是不知道如何把它们放在一起。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:42:38.557

告诉 Jenkins SVN 存储库，它会在新构建开始时自动检查它。这应该注意 1\. 2-5 将是构建步骤（即执行 shell 命令）。基本上，您可以将 Jenkins 设置为完全按照您在命令行中执行的操作，除了如果您告诉 Jenkins 有关存储库，第一步将自动处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:28:08.647

与其尝试在 Jenkins 中做这些事情，不如使用 Ant 或 NAnt 之类的东西来处理构建的复杂性，您可能会为自己省去一些麻烦。

我发现以这种方式进行构建给了我更多的灵活性（即，如果它可以通过命令行完成，我可以在我的构建中使用它，而不需要一个 Jenkins 插件来支持它），并进行维护也更容易（因为我的 NAnt 脚本成为项目的一部分并被检入到 VCS 系统中，如果我做出的更改不起作用，我可以返回。

Jenkins 有一些构建历史插件，但随着时间的推移，我发现将大部分“构建”逻辑和复杂性保留在 CI 环境之外并直接调用它更容易。

# sql-server - VB.net 中的 HTTPHandler 用于使用 Plupload 上传文件

> ID：10123915
> 
> 赞同：2
> 
> 时间：2012-04-12T12:50:20.173
> 
> 标签：sql-server, vb.net, file-upload, httphandler, plupload

我已经构建了可以使用 Plupload 将多个图像上传到服务器的工作 VB.net 代码。我正在使用 HTTPHandler (FileUpload.ashx) 进行升级，并希望添加一条 SQL 语句，将每个图像文件名插入我的 SQL 数据库。我尝试将 SQL 添加到处理程序，但是当我这样做时，我会为每个上传的 iamge 获得 4 个数据库条目。我真的不明白为什么，需要一些指导。提前感谢您的时间。

相关处理程序代码：

```
Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

    Dim chunk As Integer = If(context.Request("chunk") IsNot Nothing, Integer.Parse(context.Request("chunk")), 0)
    Dim fileName As String = If(context.Request("name") IsNot Nothing, context.Request("name"), String.Empty)
    Dim fileUpload As HttpPostedFile = context.Request.Files(0)

    Dim uploadPath = context.Server.MapPath("Upload")
    Using fs = New FileStream(Path.Combine(uploadPath, fileName), If(chunk = 0, FileMode.Create, FileMode.Append))
        Dim buffer = New Byte(fileUpload.InputStream.Length - 1) {}
        fileUpload.InputStream.Read(buffer, 0, buffer.Length)

        fs.Write(buffer, 0, buffer.Length)
    End Using
    context.Response.ContentType = "text/plain"
    context.Response.Write("Success") 
```

EXP：SQL 插入

```
 Dim conn As SqlClient.SqlConnection = New SqlClient.SqlConnection(DBCONN)
    Dim command As SqlClient.SqlCommand = New SqlClient.SqlCommand("W2_InsertPhoto " & fileName, conn)
    Dim rs As SqlClient.SqlDataReader
    conn.Open()
    rs = command.ExecuteReader()
    rs.Close()
    rs = Nothing
    conn.Close()
    conn = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:18:04.973

如果你正在使用块，那么确保你触发你的 SQL，因为最后一个块已被保存

例如。

```
 chunk = If(context.Request("chunk") IsNot Nothing, Integer.Parse(context.Request("chunk")), 0)
  chunks = If(context.Request("chunks") IsNot Nothing, Integer.Parse(context.Request("chunks")) - 1, 0) 

 If (chunk = chunks) Then
      'Upload is complete, Save to DB here or whatever
 end if 
```

-1 用于 CHUNKS，因为如果有意义的话，块是最后一个块的 -1。

要获取文件名，您需要在 handler.ashx 中添加是..

```
fileName = If(context.Request("name") IsNot Nothing, context.Request("name"), String.Empty) 
```

为了从 Pluplaod 获取唯一的文件名到你的处理程序，你需要告诉 Plupload（在客户端）使用唯一的名称。

```
var uploader = new plupload.Uploader({
        runtimes: 'html5,flash,silverlight,html4',
        max_file_size: '20mb',
        url: '../handler.ashx',
        chunk_size: '100kb',
        unique_names: true,
        multipart_params: { imageType: $('#myDiv').attr("MyIMageType"), custom: 'This is static custom text' }, 
```

在您的处理程序中，您`'name'`再次调用请求，您将拥有 pluplaoder 制作的 unqie 名称..也可以像往常一样请求多部分中的数据`request`

```
PictureType = If(context.Request("imageType") IsNot Nothing, [Enum].Parse(GetType(PictureType), context.Request("imageType")), Nothing)

Dim myCustom as String = If(context.Request("custom") IsNot Nothing, context.Request("custom")) 
```

**为了响应您的 SQL，您需要用`'`空格和特殊字符封装文件名，否则会破坏 SQLCommand，因为 SQL 会认为它是另一个变量或命令，而不是将其纯粹视为字符串。这也是 SQL Injection 的常见问题。因为这样的代码而让黑客注入代码。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:41:52.603

南瓜，我不认为我解释得很好。对不起，我确定是蹩脚的条款，我同时是 plupload 和处理程序的新手。

我使用唯一命名作为“假”，因为我需要保留每个文件的原始名称。我目前在上传到服务器时正确命名了文件名，但是对于我的 SQL 插入，我需要插入这些相同的名称。如果我尝试使用我声明的 FileName (context.Request("name")) 作为我的 SQL 语句中的一个值，我会立即得到一个错误并且没有插入值。如果我为文件名使用静态值只是为了测试，它会很好地插入，但当然对于我上传的每个文件来说它的名称相同。

包括您的更新，这是我目前为我的处理程序和客户端脚本所拥有的。

处理程序：

```
Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

    Dim chunk As Integer = If(context.Request("chunk") IsNot Nothing, Integer.Parse(context.Request("chunk")), 0)
    Dim chunks As Integer = If(context.Request("chunks") IsNot Nothing, Integer.Parse(context.Request("chunks")) - 1, 0)
    Dim fileName As String = If(context.Request("name") IsNot Nothing, context.Request("name"), String.Empty)

    If (chunk = chunks) Then
        Dim conn As SqlClient.SqlConnection = New SqlClient.SqlConnection(mdata.DBCONN)
        Dim command As SqlClient.SqlCommand = New SqlClient.SqlCommand("W2_InsertPhoto 12345," & **fileName**, conn)
        Dim rs As SqlClient.SqlDataReader
        conn.Open()
        rs = command.ExecuteReader()
        rs.Close()
        rs = Nothing
        conn.Close()
        conn = Nothing
    End If

    Dim fileUpload As HttpPostedFile = context.Request.Files(0)

    Dim uploadPath = context.Server.MapPath("Upload")
    Using fs = New FileStream(Path.Combine(uploadPath, fileName), If(chunk = 0, FileMode.Create, FileMode.Append))
        Dim buffer = New Byte(fileUpload.InputStream.Length - 1) {}
        fileUpload.InputStream.Read(buffer, 0, buffer.Length)
        fs.Write(buffer, 0, buffer.Length)
    End Using
End Sub 
```

我的客户脚本：

```
 <script type="text/javascript">
    // Convert divs to queue widgets when the DOM is ready
    $(function () {
        $("#uploader").pluploadQueue({
            // General settings,silverlight,browserplus,html5gears,
            runtimes: 'flash',
            url: 'FileUpload.ashx',
            max_file_size: '10mb',
            chunk_size: '1mb',
            unique_names: false,

            // Specify what files to browse for
            filters: [{ title: "Image files", extensions: "jpg,jpeg,gif,png,bmp"}],
            // Flash settings
            flash_swf_url: 'assets/resources/plupload.flash.swf',

            // Silverlight settings
            silverlight_xap_url: 'assets/resources/plupload.silverlight.xap',

            init: {
                FileUploaded: function (up, file, info) {
                }
            }
        });

        // Client side form validation
        $('form').submit(function (e) {
            var uploader = $('#uploader').pluploadQueue();

            // Validate number of uploaded files
            if (uploader.total.uploaded == 0) {
                // Files in queue upload them first
                if (uploader.files.length > 0) {
                    // When all files are uploaded submit form
                    uploader.bind('UploadProgress', function () {
                        if (uploader.total.uploaded == uploader.files.length)
                            $('form').submit();
                    });
                    uploader.start();
                } else
                    alert('You must at least upload one file.');

                e.preventDefault();
            }
        });
        //tweak to reset the interface for new file upload
        $('#btnReset').click(function () {
            var uploader = $('#uploader').pluploadQueue();

            //clear files object
            uploader.files.length = 0;

            $('div.plupload_buttons').css('display', 'block');
            $('span.plupload_upload_status').html(''); 
            $('span.plupload_upload_status').css('display', 'none');
            $('a.plupload_start').addClass('plupload_disabled');
            //resetting the flash container css property
            $('.flash').css({
                position: 'absolute', top: '292px',
                background: 'none repeat scroll 0% 0% transparent',
                width: '77px',
                height: '22px',
                left: '16px'
            });
            //clear the upload list
            $('#uploader_filelist li').each(function (idx, val) {
                $(val).remove();
            });
        });
    });
</script> 
```

# bash - 如何删除 CSV 文件第二列中包含三个以上字符的所有行？

> ID：10123920
> 
> 赞同：3
> 
> 时间：2012-04-12T12:50:49.753
> 
> 标签：bash

如何删除 CSV 文件中第二列中包含超过 3 个字符的所有行？例如：

```
cave,ape,1
tree,monkey,2 
```

第二行在第二列中包含超过 3 个字符，因此将其删除。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T12:55:39.743

```
awk -F, 'length($2)<=3' input.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:00:56.193

你可以使用这个命令：

```
grep -vE "^[^,]+,[^,]{4,}," test.csv > filtered.csv 
```

grep 语法的分解：

```
-v = remove lines matching
-E = extended regular expression syntax (also -P is perl syntax) 
```

重击的东西：

```
> filename = overwrite/create a file and fill it with the standard out 
```

正则表达式语法的细分：

```
"^[^,]+,[^,]{4,},"

^ = beginning of line
[^,] = anything except commas
[^,]+ = 1 or more of anything except commas
, = comma
[^,]{4,} = 4 or more of anything except commas 
```

请注意，如果前 2 列在数据中包含逗号，则上述内容已简化并且不起作用。（它不知道转义逗号和原始逗号之间的区别）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T14:15:05.157

还没有人给出`sed`答案，所以这里是：

```
sed -e '/^[^,]*,[^,]\{4\}/d' animal.csv 
```

这是一些测试数据。

```
>animal.csv cat <<'.'      
cave,ape,0
,cat,1
,orangutan,2
large,wolf,3
,dog,4,happy
tree,monkey,5,sad
. 
```

现在来测试：

```
sed -i'' -e '/^[^,]*,[^,]\{4\}/d' animal.csv
cat animal.csv 
```

只有猿、猫和狗应该出现在输出中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T00:08:22.417

这是您的数据类型的过滤器脚本。它假设您的数据是 utf8

```
#!/bin/bash
function px {
 local a="$@"
 local i=0
 while [ $i -lt ${#a}  ]
  do
   printf \\x${a:$i:2}
   i=$(($i+2))
  done
}
(iconv -f UTF8 -t UTF16 | od -x |  cut -b 9- | xargs -n 1) |
if read utf16header
then
 px $utf16header
 cnt=0
 out=''
 st=0
 while read line
  do
   if [ "$st" -eq 1 ] ; then
     cnt=$(($cnt+1))
   fi
   if [ "$line" == "002c" ] ; then
     st=$(($st+1))
   fi
   if [ "$line" == "000a" ]
    then
     out=$out$line
     if [[ $cnt -le 3+1 ]] ; then
        px $out
     fi
     cnt=0
     out=''
     st=0
   else
    out=$out$line
   fi
  done
fi | iconv -f UTF16 -t UTF8 
```

# javascript - JavaScript：将多维数组转换为二维数组

> ID：10123923
> 
> 赞同：1
> 
> 时间：2012-04-12T12:50:58.390
> 
> 标签：javascript, jquery, multidimensional-array

我有一个 JS 数组，其中填充了如下数据：

```
var myarr = [[new Date("2011-12-01"), 389, 380.75, 382.54, 387.93],
[new Date("2011-11-30"), 382.28, 378.3, 381.29, 382.2]...] 
```

有没有办法只选择整个日期列和每行的最后一个数字？我正在寻找这样的输出：

```
[[new Date("2011-12-01"), 387.93],[new Date("2011-11-30"), 382.2]...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:53:13.213

```
var myCollapsedArr = [[myarr[0][0], myarr[0][myarr[0].length-1]], [myarr[1][0], myarr[1][myarr[1].length-1]]; 
```

或者在 for 循环中：

```
var myCollapsedArr = [];

for(var i = 0; i<myarr.length; i++) {
    myCollapsedArr.push([myarr[i], [myarr[i][myarr[i].length-1]]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:54:27.753

**选项 1 - 简单的 for 循环**

```
// Create array to hold new values
var newArray = [];
// Loop through existing array and pull out data
for(var i = 0; i < myarr.length; i++) {
    newArray.push([myarr[i][0], myarr[i][myarr[i].length - 1]]);
} 
```

这是一个要演示[的工作小提琴。](http://jsfiddle.net/JamesHill/tkW2J/)

**选项 2 - ECMAScript 5 [forEach()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)**

```
// Create array to hold new values
var newArray = [];

// Loop through existing array and pull out data
myarr.forEach(function(obj) {
    newArray.push([obj[0], obj[obj.length - 1]]);
}); 
```

这是一个可以演示[的工作小提琴。](http://jsfiddle.net/JamesHill/Gucs4/)

# c# - 如何检测 UI 线程是否已在 WPF 中完成工作

> ID：10123926
> 
> 赞同：1
> 
> 时间：2012-04-12T12:51:02.543
> 
> 标签：c#, wpf, multithreading, performance-testing

我需要测量 WPF 多线程应用程序的性能，会发生以下情况：
1\. 在 UI 中触发 buttonClick -> UI 线程开始处理它
2\. UI 线程在后台启动另一个线程，它在后台异步执行某些操作并且, 准备好后，将结果传回 ui 线程
3\. 数据绑定发生
4\. 渲染发生

我知道线程的数量，但不知道顺序。如何测量 buttonClick 和渲染结束之间的时间？UI 线程完成后是触发事件还是引发属性？或者如果没有，我能做到吗？
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:05:12.590

[我在http://www.kynosarges.de/WpfPerformance.html](http://www.kynosarges.de/WpfPerformance.html)发现了一些可能有用的东西：

> 我们无法直接访问渲染线程，但 WPF 确实提供了一种间接访问点，即通过 CompositionTarget.Rendering 事件。此事件通常以监视器刷新率（通常为每秒 60 次）触发，无论是否有任何新内容要呈现。它主要用于需要在监视器显示它们时尽快生成显示更新的自定义动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:01:36.557

您必须查看[WPF Performance Suite](http://msdn.microsoft.com/en-us/library/aa969767.aspx)，尤其是 Perforator 和 Visual Profiler。在 VisualProfiler 上，您可以拥有*“应用程序 CPU 使用详情”*部分，其中之一是：

> 渲染 (MediaContext) 在渲染过程中发生。该方法最终调用每个元素的 OnRender 方法，有助于了解所有元素的 OnRender 总成本......

或者

> 渲染线程在渲染线程上执行渲染指令时发生。这对于检测渲染绑定的应用程序很有用。

希望这可以帮助。

# perl - 警告“未引用的字符串……可能与未来的保留字冲突”的原因是什么？

> ID：10123927
> 
> 赞同：0
> 
> 时间：2012-04-12T12:51:04.420
> 
> 标签：perl, warnings

我正在尝试解决 Perl 程序中的所有警告，并且遇到了一些问题。

```
Unquoted string "lib" may clash with future reserved word at /home/user/bin/ttt.v01.pl line 17.
    line 17: use lib ( "${HOME}/.lib" );
Unquoted string "sync" may clash with future reserved word at /home/user/bin/ttt.v01.pl line 23.
    line 23: our $SYNC_HOSTS = "${HOME}/.sync.hosts";
Unquoted string "config" may clash with future reserved word at /home/user/bin/ttt.v01.pl line 28.
    line 28: our $USAGE_TEXT = "[-hd] -a <config> -l <location>"; 
```

从[perldiag](http://p3rl.org/diag)：

> 未加引号的字符串“%s”可能与未来的保留字发生冲突
> 
> （W 保留）您使用了可能有一天会被声明为保留字的裸字。最好将这样的单词放在引号中，或者以某种方式将其大写，或者在其中插入下划线。您也可以将其声明为子例程。

我有这些都是双引号，所以我不确定我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:54:36.263

嗯，也许你在第 17 行之前有一个不匹配的双引号，导致编译器报告错误的警告？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:23:42.363

我闻到了一个缺少的引号！

您使用的是程序编辑器还是使用记事本？

大多数程序编辑器都有语法突出显示，可以轻松帮助您找到丢失的引号。我使用`VIM`which 将带引号的字符串以红色和 Perl 函数以绿色。如果我突然看到我所有的各种 Perl 函数都是红色的，而引用的文本不是红色的，我会立即知道我在某处遗漏了引用。

编辑您的问题并包含程序的前 20 行。

# python - 使用 Python 请求从本地 url 获取文件？

> ID：10123929
> 
> 赞同：45
> 
> 时间：2012-04-12T12:51:08.063
> 
> 标签：python, http, python-requests, local-files

我在我的应用程序的一种方法中使用 Python 的[请求](http://docs.python-requests.org/en/latest/index.html)库。该方法的主体如下所示：

```
def handle_remote_file(url, **kwargs):
    response = requests.get(url, ...)
    buff = StringIO.StringIO()
    buff.write(response.content)
    ...
    return True 
```

我想为该方法编写一些单元测试，但是，我想做的是传递一个虚假的本地 url，例如：

```
class RemoteTest(TestCase):
    def setUp(self):
        self.url = 'file:///tmp/dummy.txt'

    def test_handle_remote_file(self):
        self.assertTrue(handle_remote_file(self.url)) 
```

当我使用本地 url调用**requests.get时，我得到下面的****KeyError**异常：

```
requests.get('file:///tmp/dummy.txt')

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/packages/urllib3/poolmanager.pyc in connection_from_host(self, host, port, scheme)
76 
77         # Make a fresh ConnectionPool of the desired type
78         pool_cls = pool_classes_by_scheme[scheme]
79         pool = pool_cls(host, port, **self.connection_pool_kw)
80 

KeyError: 'file' 
```

问题是如何将本地 url 传递给**requests.get**？

PS：上面的例子是我自己编的。它可能包含许多错误。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-04-10T13:21:49.113

正如@WooParadog 解释的请求库不知道如何处理本地文件。虽然，当前版本允许定义[传输适配器](http://docs.python-requests.org/en/latest/user/advanced/?highlight=mount#transport-adapters)。

因此，您可以简单地定义自己的适配器来处理本地文件，例如：

```
from requests_testadapter import Resp

class LocalFileAdapter(requests.adapters.HTTPAdapter):
    def build_response_from_file(self, request):
        file_path = request.url[7:]
        with open(file_path, 'rb') as file:
            buff = bytearray(os.path.getsize(file_path))
            file.readinto(buff)
            resp = Resp(buff)
            r = self.build_response(request, resp)

            return r

    def send(self, request, stream=False, timeout=None,
             verify=True, cert=None, proxies=None):

        return self.build_response_from_file(request)

requests_session = requests.session()
requests_session.mount('file://', LocalFileAdapter())
requests_session.get('file://<some_local_path>') 
```

我在上面的例子中使用了[requests-testadapter](https://github.com/ambv/requests-testadapter)模块。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-01-05T19:36:36.260

这是我编写的一个传输适配器，它比 b1r3k 的功能更强大，并且除了 Requests 本身之外没有其他依赖项。我还没有对它进行详尽的测试，但是我尝试过的似乎没有错误。

```
import requests
import os, sys

if sys.version_info.major < 3:
    from urllib import url2pathname
else:
    from urllib.request import url2pathname

class LocalFileAdapter(requests.adapters.BaseAdapter):
    """Protocol Adapter to allow Requests to GET file:// URLs

    @todo: Properly handle non-empty hostname portions.
    """

    @staticmethod
    def _chkpath(method, path):
        """Return an HTTP status for the given filesystem path."""
        if method.lower() in ('put', 'delete'):
            return 501, "Not Implemented"  # TODO
        elif method.lower() not in ('get', 'head'):
            return 405, "Method Not Allowed"
        elif os.path.isdir(path):
            return 400, "Path Not A File"
        elif not os.path.isfile(path):
            return 404, "File Not Found"
        elif not os.access(path, os.R_OK):
            return 403, "Access Denied"
        else:
            return 200, "OK"

    def send(self, req, **kwargs):  # pylint: disable=unused-argument
        """Return the file specified by the given request

        @type req: C{PreparedRequest}
        @todo: Should I bother filling `response.headers` and processing
               If-Modified-Since and friends using `os.stat`?
        """
        path = os.path.normcase(os.path.normpath(url2pathname(req.path_url)))
        response = requests.Response()

        response.status_code, response.reason = self._chkpath(req.method, path)
        if response.status_code == 200 and req.method.lower() != 'head':
            try:
                response.raw = open(path, 'rb')
            except (OSError, IOError) as err:
                response.status_code = 500
                response.reason = str(err)

        if isinstance(req.url, bytes):
            response.url = req.url.decode('utf-8')
        else:
            response.url = req.url

        response.request = req
        response.connection = self

        return response

    def close(self):
        pass 
```

（尽管有名字，但它是在我想检查谷歌之前完全写好的，所以它与 b1r3k 无关。）与其他答案一样，请遵循以下内容：

```
requests_session = requests.session()
requests_session.mount('file://', LocalFileAdapter())
r = requests_session.get('file:///path/to/your/file') 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-05-09T20:24:51.793

最简单的方法似乎是使用请求文件。

[https://github.com/dashea/requests-file](https://github.com/dashea/requests-file)（也可以通过 PyPI 获得）

“Requests-File 是与 Requests Python 库一起使用的传输适配器，允许通过 file:// URL 访问本地文件系统。”

这与 requests-html 的结合是纯粹的魔法:)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-12T13:05:08.197

[packages/urllib3/poolmanager.py](https://github.com/kennethreitz/requests/blob/775b6f6f0098ffa9edd3874b1af4b98378377211/requests/packages/urllib3/poolmanager.py#L18)几乎解释了它。请求不支持本地 url。

```
pool_classes_by_scheme = {                                                        
    'http': HTTPConnectionPool,                                                   
    'https': HTTPSConnectionPool,                                              
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-03T15:19:36.667

在最近的一个项目中，我遇到了同样的问题。由于 requests 不支持“文件”方案，我将修补我们的代码以在本地加载内容。首先，我定义了一个函数来替换`requests.get`：

```
def local_get(self, url):
    "Fetch a stream from local files."
    p_url = six.moves.urllib.parse.urlparse(url)
    if p_url.scheme != 'file':
        raise ValueError("Expected file scheme")

    filename = six.moves.urllib.request.url2pathname(p_url.path)
    return open(filename, 'rb') 
```

然后，在测试设置或装饰测试功能的某个地方，我用来`mock.patch`根据请求修补 get 功能：

```
@mock.patch('requests.get', local_get)
def test_handle_remote_file(self):
    ... 
```

`requests.request`这种技术有点脆弱——如果底层代码调用或构造 a`Session`并调用它，它就没有帮助。可能有一种方法可以在较低级别修补请求以支持`file:`URL，但在我最初的调查中，似乎没有明显的挂钩点，所以我采用了这种更简单的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-02T21:59:56.057

要从本地 URL 加载文件，例如图像文件，您可以这样做：

```
import urllib
from PIL import Image

Image.open(urllib.request.urlopen('file:///path/to/your/file.png'))) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-09-04T17:32:23.167

我认为对此的简单解决方案是使用 python 创建临时 http 服务器并使用它。

1.  将所有文件放在临时文件夹中，例如。临时文件夹
2.  转到该目录并根据您的操作系统使用命令在终端/cmd 中创建一个临时 http 服务器`python -m http.server 8000`（注意 8000 是端口号。）
3.  这将为您提供指向 http 服务器的链接。您可以从[http://127.0.0.1:8000/访问它](http://127.0.0.1:8000/)
4.  在浏览器中打开您想要的文件并将链接复制到您的网址。

# smtpclient - 根据验证程序，远程证书无效.. 对于使用 asp.net 的电子邮件功能

> ID：10123930
> 
> 赞同：0
> 
> 时间：2012-04-12T12:51:12.230
> 
> 标签：smtpclient

在使用 asp.net 处理电子邮件功能时，我发现以下错误：

发送电子邮件时发生未知错误：根据验证程序，远程证书无效..在 System.Net.Security.SslState.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, Exception exception)

经过对上述问题的分析，我找到了如下所述的解决方案：

将 SmtpClient 类的 SMTPEnableSsl 属性设置为 false 解决了该问题。

谢谢和问候， 桑托什·库马尔·帕特罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T14:03:50.820

经过对上述问题的分析，我找到了如下所述的解决方案：

将 SmtpClient 类的 SMTPEnableSsl 属性设置为 false 解决了该问题。

# objective-c - 用于在 iOS 应用中签入用户的 Facebook Api

> ID：10123931
> 
> 赞同：1
> 
> 时间：2012-04-12T12:51:13.537
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

我正在寻找使用 Facebook Api 在 iOS 应用程序中签入用户。

我想知道我是否在 AppDelegate 中设置了权限，但希望用户从不同的视图控制器签入，我是否必须在每个视图控制器中声明 Facebook 实例以及 FBRequestDelegate、FBSessionDelegate、FBDialogDelegate 委托方法？还是 AppDelegate 中的一次性事情？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:58:40.910

我刚刚处理了完全相同的问题。这是我的解决方案：

我创建了一个**FBRequestWrapper**，它基本上包含以下方法：

```
#import <Foundation/Foundation.h>
#import "Facebook.h"

#define FB_APP_ID @"xx"
#define FB_APP_SECRET @"xx"

@interface FBRequestWrapper : NSObject <FBRequestDelegate, FBSessionDelegate>
{
    Facebook *facebook;
    BOOL isLoggedIn;
}

@property (nonatomic, retain) Facebook *facebook;
@property (nonatomic, assign) BOOL isLoggedIn;

+ (id) defaultManager;
- (void) setIsLoggedIn:(BOOL) _loggedIn;
- (void) FBSessionBegin:(id) _delegate;
- (void) FBLogout;
- (void) getFBRequestWithGraphPath:(NSString*) _path andDelegate:(id) _delegate;
- (void) sendFBRequestWithGraphPath:(NSString*) _path params:(NSMutableDictionary*) _params andDelegate:(id) _delegate;

@end 
```

所以所有 Facebook 的东西都在这个 Singleton 类中管理。

在我的**AppDelegate 中，我调用了 authentication**。因为在我看来，必须在加载所有控制器之前完成身份验证。

```
// FACEBOOK
requestWrapper = [FBRequestWrapper defaultManager];

BOOL loggedIn = [requestWrapper isLoggedIn];

// if the user is not currently logged in begin the session
if (!loggedIn) {
    [requestWrapper FBSessionBegin:(id)self];
} else {
    NSLog(@"Is already logged in!");
}

// Check if the access token is already there. In that case the user is already authenticated with facebook.
// Directly load the controllers and do not wait till facebook has returned back the access_token
if([[NSUserDefaults standardUserDefaults] objectForKey:@"access_token"] != nil &&
   [[NSUserDefaults standardUserDefaults] objectForKey:@"exp_date"] != nil) {
    [self loadControllers];
} 
```

可以看到我也将 accessToken 存储在 NSUserDefaults 空间中。因为我们使用 accessToken 作为我们的 web 服务的身份验证。

**我的 AppDelegate 方法委托 FBSessionDelegate 方法：**

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate, FBSessionDelegate> 
```

这是最重要的方法**fbDidLogin**的实现：

```
- (void) fbDidLogin {
    NSLog(@"AccessToken: %@", requestWrapper.facebook.accessToken);

    [[NSUserDefaults standardUserDefaults] setObject:requestWrapper.facebook.accessToken forKey:@"access_token"];
    [[NSUserDefaults standardUserDefaults] setObject:requestWrapper.facebook.expirationDate forKey:@"exp_date"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    [self loadControllers];
} 
```

在这里，我将 accesstoken 存储在 NSUserDefaults 中，如果一切正常，则加载所有控制器。

现在，如果您想**从 AppDelegate 之外的任何控制器访问 Facebook Graph Api，**您也可以像这样使用 FBRequestWrapper：

```
- (IBAction)test:(id)sender {
   // FBRequestWrapper
   NSString *graphPath = @"me/friends";

   [[FBRequestWrapper defaultManager] getFBRequestWithGraphPath:graphPath andDelegate:self];
} 
```

这里是来自 FBRequestWrapper.m 的代码：

```
#import "FBRequestWrapper.h"

static FBRequestWrapper *defaultWrapper = nil;

@implementation FBRequestWrapper
@synthesize isLoggedIn, facebook;

+ (id) defaultManager {

    if (!defaultWrapper)
        defaultWrapper = [[FBRequestWrapper alloc] init];

    return defaultWrapper;
}

- (void) setIsLoggedIn:(BOOL) _loggedIn {
    isLoggedIn = _loggedIn;

    if (isLoggedIn) {
        [[NSUserDefaults standardUserDefaults] setObject:facebook.accessToken forKey:@"access_token"];
        [[NSUserDefaults standardUserDefaults] setObject:facebook.expirationDate forKey:@"exp_date"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
    else {
        [[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"access_token"];
        [[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"exp_date"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
}

- (void) FBSessionBegin:(id) _delegate {

    if (facebook == nil) {
        facebook = [[Facebook alloc] initWithAppId:FB_APP_ID andDelegate:_delegate];
        [facebook setSessionDelegate:_delegate];

        NSString *token = [[NSUserDefaults standardUserDefaults] objectForKey:@"access_token"];
        NSDate *exp = [[NSUserDefaults standardUserDefaults] objectForKey:@"exp_date"];

        if (token != nil && exp != nil && [token length] > 2) {
            isLoggedIn = YES;
            facebook.accessToken = token;
            facebook.expirationDate = [NSDate distantFuture];

            [self setIsLoggedIn:isLoggedIn];

            NSLog(@"Access token: %@", facebook.accessToken);
        } 
    }

    if(![facebook isSessionValid]) {
        NSArray *permissions = [NSArray arrayWithObjects:@"offline_access", @"read_friendlists", @"user_about_me", nil];

        // if no session is available login
        [facebook authorize:permissions];
    }
}
- (void) FBLogout {
    [[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"access_token"];
    [[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"exp_date"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    [facebook logout:self];
}

// Make simple requests
- (void) getFBRequestWithGraphPath:(NSString*) _path andDelegate:(id) _delegate {
    if (_path != nil) {
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

        if (_delegate == nil)
            _delegate = self;

        if(isLoggedIn) {
            NSLog(@"is logged in in the get method");
        } else {
            NSLog(@"Is NOT logged in the get metthod");
        }

        [facebook requestWithGraphPath:_path andDelegate:_delegate];
    }
}

// Used for publishing
- (void) sendFBRequestWithGraphPath:(NSString*) _path params:(NSMutableDictionary*) _params andDelegate:(id) _delegate {

    if (_delegate == nil)
        _delegate = self;

    if (_params != nil && _path != nil) {

        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
        [facebook requestWithGraphPath:_path andParams:_params andHttpMethod:@"POST" andDelegate:_delegate];
    }
}

#pragma mark -
#pragma mark FacebookSessionDelegate

- (void)fbDidLogin {
    isLoggedIn = YES;

    [[NSUserDefaults standardUserDefaults] setObject:facebook.accessToken forKey:@"access_token"];
    [[NSUserDefaults standardUserDefaults] setObject:facebook.expirationDate forKey:@"exp_date"];
    [[NSUserDefaults standardUserDefaults] synchronize];
}

- (void)fbDidNotLogin:(BOOL)cancelled {
    isLoggedIn = NO;
}

- (void)fbDidLogout {
    [[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"access_token"];
    [[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"exp_date"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    isLoggedIn = NO;
}

#pragma mark -
#pragma mark FBRequestDelegate

- (void)request:(FBRequest *)request didFailWithError:(NSError *)error {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
    //NSLog(@"ResponseFailed: %@", error);
}

- (void)request:(FBRequest *)request didLoad:(id)result {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
    //NSLog(@"Parsed Response: %@", result);
}

/**
 * Called after the access token was extended. If your application has any
 * references to the previous access token (for example, if your application
 * stores the previous access token in persistent storage), your application
 * should overwrite the old access token with the new one in this method.
 * See extendAccessToken for more details.
 */
- (void)fbDidExtendToken:(NSString*)accessToken expiresAt:(NSDate*)expiresAt {
    NSLog(@"Fb did extend token.. NOT IMPLEMENTED YET!");
}

/**
 * Called when the current session has expired. This might happen when:
 *  - the access token expired
 *  - the app has been disabled
 *  - the user revoked the app's permissions
 *  - the user changed his or her password
 */
- (void)fbSessionInvalidated {
    NSLog(@"Fb session invalidated.. NOT IMPLEMENTED YET!");
}

@end 
```

# api - 地址 API -> 学区查询？

> ID：10123933
> 
> 赞同：6
> 
> 时间：2012-04-12T12:51:17.907
> 
> 标签：api, map, lookup, street-address

有没有办法以编程方式确定美国给定的实际街道地址与哪个学区相关联？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T15:47:55.770

美国人口普查局与每个州的当地学区进行协调，以了解边界以及任何变化。该信息每隔一年由人口普查局本身在其“老虎”数据中发布：

[http://www.census.gov/did/www/schooldistricts/data/boundaries.html](http://www.census.gov/did/www/schooldistricts/data/boundaries.html)

（读取数据的一种相对简单的方法是使用 PostgreSQL 下的 PostGIS）

但在此之前，您需要确保使用正确的地址。原因是该地址甚至可能根本不存在，或者格式可能不正确，以至于您无法确定匹配。此外，如果邮政编码错误或街道信息拼写错误，或者该人不小心颠倒了地址的“北”或“南”部分，例如 123 North Main Street，则可能会将坐标放在错误的学区。因此，作为通过 PostGIS 运行地址的前身，您肯定希望考虑使用地址验证服务来确保您有*良好的*数据开始。（全面披露：我是[SmartyStreets](http://smartystreets.com)的创始人，我们进行地址验证。）

# c# - 如何解析 .daq 文件？

> ID：10123934
> 
> 赞同：0
> 
> 时间：2012-04-12T12:51:20.683
> 
> 标签：c#, c++, file-io

我有一个文件，其中包含嵌入式系统获取的一些数据的日志记录。

这是一个例子：

```
<HISDAQ-V0.1;COMPRESSION(TOKEN-ESC(4X, 0x10, 7, 13, 15))>
<DAQPRJ>
<ANALOG>
<CHANNEL id='0' name='TKist' unit='°C' />
<CHANNEL id='1' name='RGTist' unit='°C' /> .... 
</ANALOG>
<DIGITAL> 
<CHANNEL id='0' bit='0' name='HK1MischerAuf' /> .... 
</DIGITAL>
</DAQPRJ>
....
2012-04-10_00:00:00 pm 64.0 79.4 18.0 49.0 120.0 48.3 6683573.0 5.8 23.6 120.0 60.0 60@49.6 0.0 0.0 8 *8 5 8¡{13.4 -5.3 0 8à,8à6 8à 2 66838áU0.0 6.8 0 0 8 *8 7 8 3 18.08 3 66838¡U13.4 98À18À8 8Á{0.0 11.3 0 08À+8À9 8À2 18.08Áj13.4 9.8 0 08À+8À40 8Á{20.1 3.0 0 08À+8À1 8Á{6.7 3.8 0 0 8 *8 2 8¡{0.0 -68À18À3 8À3 78.18Ás14.3 08À-8À4 8Á4.5 0 8 ,8 5 8¡{20.1 6.8 0 08À+8À6 8Á{0.0 -08À18À7 8Á{13.4 9.1 0 08À+8À8 8À1 120.8Á`20.1 3.8 0 08À+8À9 8À0 18.0 49.0 8Ád6.7 5.3 0 0 8 *8 50 8¡{0.0 -3`8À+8À1 8Á6.8 0 8 ,8 2 8¡-1.5 08À-8À3 8À    7.9 188Ál6.7 3.0 0 0 8 *8 4 8¡{13.4 38À18À5 8À  8.0 188Ál0.0 4.5 0 0 8 *8 6 8¡{13.4 5.3 0 08À+8À7 8À    7.9 188Ál20.1 -3.0 0 8à,8à8 8á2.3 0......á
--- EOF--- 
```

（EOF 来自我，它不在文件中！）

我在网上搜索过，但没有找到有关该文件格式的任何信息。

我看到首先有模拟和数字通道的描述（如列标题），然后是数据。但我无法弄清楚分隔符。

最好的办法是拥有一段可以处理该数据文件的 C++/C# 代码。

有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:56:06.767

这看起来很像 XML，所以我很想研究 .NET XML 解析函数[Here: 可能是一个很好的起点](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)。这些天我处理了很多 XML，而且在 C# 中使用它真的很容易。

至于语法背后的含义（例如每个属性/元素的含义以及如何在逻辑中使用它），只有您或专家会知道。您可能必须与客户/客户或其他工程师坐在一起才能弄清楚这一点。

希望有帮助。

**编辑**：

要阅读最后一部分，您可以将整个文件作为字符串读取，然后创建它的子字符串 - 从最后一个 > 的位置开始，一直读取到 EOF 标记。这样，您将“数据”保存在一个字符串中，并且您可以以任何您需要的方式进一步操作/解析它。

终止字符串的空字符通常是 C# 中的“\0”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:12:06.017

我没有使用过 .daq 文件——但这种方法可能会有所帮助，我将它用于“松散”或碎片化的 XML 文件、格式​​错误的文件等。

我认为你有一个`'header' + XML + data`.

首先解析标题 - 看起来就像一个`<>`- 或者也可能总是在线。

在下一次打开时`<`（我猜是格式，但看起来像那样），您将启动 XML。

搜索`'end >'`- 你可以使用 LastIndexOf - 应该做的。

这就是您的 XML，使用 LINQ to XML 加载它，例如 - 然后`rest`才是真正的数据。

希望这可以帮助

# c++ - 必须遵守未使用的 volatile 参数吗？

> ID：10123935
> 
> 赞同：12
> 
> 时间：2012-04-12T12:51:23.447
> 
> 标签：c++, c, gcc

如果我调用具有 volatile 参数的函数并且未使用该参数，那么编译器是否仍必须生成该参数？

```
void consume( volatile int ) { }

...

consume( some_expr ); 
```

GCC 确实尊重这一点，但我不确定标准中 volatile 的措辞是否需要这一点。在我看来，GCC 正在做正确的事情——这在逻辑上是对 volatile 变量的赋值，因此不应省略（根据 c++ 标准的 1.9-8）

*注意：*这样做的目的是防止优化器删除代码的评估。也就是说，它强制`some_expr`进行评估。它允许优化表达式，但确保它实际执行。

*如果有任何差异，我已经将 C 和 C++ 添加为标签，作为我感兴趣的答案。不过我不认为会有。*

**回答**： 我选择了第一个，因为我相信它是该标准的正确实际实现。然而，史蒂夫的哲学观点非常有趣，实际上可能意味着标准是模棱两可的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:12:09.587

的未命名参数`consume`无法读取，因为它未命名。但是，它已初始化，并且初始化（带有`some_expr`）是可见的副作用。因此编译器可能不会优化初始化。

这是否需要实际评估`some_expr`是另一回事。一般来说，这不是一个可见的副作用，但它可能是如果`some_expr`包含`volatile`子表达式。

[编辑] 请注意，“未命名”部分可能出现在两个地方。调用者通常无法知道参数是否已命名（更不用说使用了）例如

```
void consume( volatile int x);
consume( some_expr );
// other .cpp
void consume( volatile int ) { } // Same function. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:27:30.993

有可能提出相反的论点，但我认为实现可能会省略对自动`volatile`对象的访问，前提是它们对程序没有任何影响，并且还禁止程序员观察堆栈（通过未映射或只读页面） ，调试器等），或者至少警告这样做不会总是产生您期望的效果。一个未命名的参数符合该描述。

原因是“as-if”规则谈到了可见的副作用，并说 volatile 访问是可见的副作用。但是如果程序本身不以任何方式依赖它们，那么标准*就不会*说对象实际上必须位于“堆栈上”。该标准允许它位于硬件提供的特殊内存位置，不能以任何方式读取，只能写入，写入对硬件没有物理影响。既然这是允许的，那么说“标准要求”这种无效的写入实际上继续进行似乎是荒谬的。怎么会有人知道？该标准不要求二进制文件中必须有指令来执行写入，它要求神奇的、不可读的秘密对象必须采用特定的值。如果我声称它有那个价值，你就不能证明我错了:-)

不可能编写一个依赖于实际发生的这种易失性访问的符合标准的程序，或者检测是否`some_expr`被评估。真的它在你和你的调试器之间，不管它是否被计算。我已经看到调试器出错了。

所以，我认为*允许*一个实现破坏它自己的调试器，就像它根本*不允许*提供一个工作调试器一样。我不立即明白为什么它会想要。在实践中，我希望将参数标记为 volatile 与将函数的定义移动到优化器找不到的地方具有大致相同的效果——它将确保可以使用该值。

# excel - 如何递归附加单元格？

> ID：10123937
> 
> 赞同：4
> 
> 时间：2012-04-12T12:51:30.153
> 
> 标签：excel, excel-formula

我有一个看起来像这样的 Excel 工作表：

```
 |A     B           C                      D
-----------------------------------------------------------------------------------
1 |ID    PARENTID    VALUE                  RESOLVED VALUE (how to generate this?)
===================================================================================
2 |0     0           /root                  /root
3 |1     0           /one                   /root/one
4 |2     0           /two                   /root/two
5 |3     0           /three                 /root/three
6 |4     3           /child-one-of-three    /root/three/child-one-of-three
7 |5     3           /child-two-of-three    /root/three/child-two-of-three 
```

每行都有一个`ID`和一个`PARENTID`。`RESOLVED VALUE`我想通过递归地附加`VALUE`每一行的内容来生成最后一列的内容。

如何在 Excel 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:49:14.470

假设您的数据从单元格 A3 开始：

```
=IF(B4=A4,C4,VLOOKUP(B4,$A$3:$D$5,4)&C4) 
```

您必须扩展`$A$3:$D$5`到数据数组的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:30:28.827

这是一个 VBA 函数解决方案。

```
Option Explicit
Public Function ResValue(id As Long, table As Range, indexID As Integer, indexParentID As Integer, indexValue As Integer) As String

Dim strTmp As String, idTmp As Long
idTmp = id
ResValue = ""
Do While idTmp <> 0
    strTmp = Application.WorksheetFunction.Index(table.Columns(indexValue), Application.WorksheetFunction.Match(idTmp, table.Columns(indexID), 0))
    ResValue = strTmp & ResValue
    idTmp = Application.WorksheetFunction.Index(table.Columns(indexParentID), Application.WorksheetFunction.Match(strTmp, table.Columns(indexValue), 0))
Loop
ResValue = Application.WorksheetFunction.Index(table.Columns(indexValue), Application.WorksheetFunction.Match(0, table.Columns(indexID), 0)) & ResValue
End Function 
```

您现在可以`ResValue(id, table, indexID, indexParentID, indexValue)`在工作表中使用来生成解析值。

笔记：

*   `id`是您要为其生成解析值的 id。
*   `table`是整个表的地址（不包括解析值列）。
*   每个索引参数是每个字段的相对列索引。例如，ID 在表的第一列，所以`indexID`= 1，而 ParentID 在第二列，所以`indexParentID`= 2。

在您的示例表中，您将在`D3`（已解析值的第一个单元格）中输入以下内容：

```
=ResValue(A3,$A$3:$C$8,1,2,3) 
```

然后你可以在列中填写这个公式。

![在此处输入图像描述](../Images/50b74e968339357853cc4341220c5dee.png)

# javascript - 如何按日期属性对对象数组进行排序？

> ID：10123953
> 
> 赞同：1005
> 
> 时间：2012-04-12T12:53:03.743
> 
> 标签：javascript, datetime

假设我有几个对象的数组：

```
var array = [{id: 1, date: Mar 12 2012 10:00:00 AM}, {id: 2, date: Mar 8 2012 08:00:00 AM}]; 
```

如何按日期元素对这个数组进行排序，从最接近当前日期和时间的日期开始排序？请记住，数组可能有很多对象，但为了简单起见，我使用了 2。

我会使用排序功能和自定义比较器吗？

* * *

## 回答 #1

> 赞同：1892
> 
> 时间：2012-04-12T12:58:32.493

## 最简单的答案

```
array.sort(function(a,b){
  // Turn your strings into dates, and then subtract them
  // to get a value that is either negative, positive, or zero.
  return new Date(b.date) - new Date(a.date);
}); 
```

## 更通用的答案

```
array.sort(function(o1,o2){
  if (sort_o1_before_o2)    return -1;
  else if(sort_o1_after_o2) return  1;
  else                      return  0;
}); 
```

或者更简洁：

```
array.sort(function(o1,o2){
  return sort_o1_before_o2 ? -1 : sort_o1_after_o2 ? 1 : 0;
}); 
```

## 通用，强大的答案

在所有数组上`sortBy`使用[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)定义自定义的不可枚举函数：

```
(function(){
  if (typeof Object.defineProperty === 'function'){
    try{Object.defineProperty(Array.prototype,'sortBy',{value:sb}); }catch(e){}
  }
  if (!Array.prototype.sortBy) Array.prototype.sortBy = sb;

  function sb(f){
    for (var i=this.length;i;){
      var o = this[--i];
      this[i] = [].concat(f.call(o,o,i),o);
    }
    this.sort(function(a,b){
      for (var i=0,len=a.length;i<len;++i){
        if (a[i]!=b[i]) return a[i]<b[i]?-1:1;
      }
      return 0;
    });
    for (var i=this.length;i;){
      this[--i]=this[i][this[i].length-1];
    }
    return this;
  }
})(); 
```

像这样使用它：

```
array.sortBy(function(o){ return o.date }); 
```

如果您的日期不能直接比较，请从中制作一个可比较的日期，例如

```
array.sortBy(function(o){ return new Date( o.date ) }); 
```

如果您返回一个值数组，您还可以使用它来按多个条件排序：

```
// Sort by date, then score (reversed), then name
array.sortBy(function(o){ return [ o.date, -o.score, o.name ] }; 
```

*有关详细信息，请参阅[http://phrogz.net/JS/Array.prototype.sortBy.js 。](http://phrogz.net/JS/Array.prototype.sortBy.js)*

* * *

## 回答 #2

> 赞同：257
> 
> 时间：2013-08-15T04:20:46.023

@Phrogz 的答案都很棒，但这里有一个很棒、更简洁的答案：

```
array.sort(function(a,b){return a.getTime() - b.getTime()}); 
```

使用箭头函数方式

```
array.sort((a,b)=>a.getTime()-b.getTime()); 
```

在这里找到：[在 Javascript 中排序日期](https://stackoverflow.com/questions/16690035/sort-date-in-javascript)

* * *

## 回答 #3

> 赞同：110
> 
> 时间：2012-04-12T13:06:04.337

更正 JSON 后，这应该对您有用：

```
var array = [{id: 1, date:'Mar 12 2012 10:00:00 AM'}, {id: 2, date:'Mar 8 2012 08:00:00 AM'}];

array.sort(function(a, b) {
    var c = new Date(a.date);
    var d = new Date(b.date);
    return c-d;
}); 
```

* * *

## 回答 #4

> 赞同：62
> 
> 时间：2012-04-12T13:08:54.077

您的数据需要一些更正：

```
var array = [{id: 1, date: "Mar 12 2012 10:00:00 AM"},{id: 2, date: "Mar 28 2012 08:00:00 AM"}]; 
```

改正数据后，就可以使用这段代码了：

```
function sortFunction(a,b){  
    var dateA = new Date(a.date).getTime();
    var dateB = new Date(b.date).getTime();
    return dateA > dateB ? 1 : -1;  
}; 

var array = [{id: 1, date: "Mar 12 2012 10:00:00 AM"},{id: 2, date: "Mar 28 2012 08:00:00 AM"}];
array.sort(sortFunction);​ 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2014-11-05T14:03:21.927

我推荐[GitHub：Array sortBy - 使用](https://github.com/jherax/array-sort-by)[Schwartzian 变换](https://en.wikipedia.org/wiki/Schwartzian_transform)`sortBy`的方法的最佳实现

但现在我们将尝试这种方法[Gist：sortBy-old.js](https://gist.github.com/jherax/8781f45dcd068a9e3e37)。
让我们创建一个方法来对能够按某些属性排列对象的数组进行排序。

## 创建排序函数

```
var sortBy = (function () {
  var toString = Object.prototype.toString,
      // default parser function
      parse = function (x) { return x; },
      // gets the item to be sorted
      getItem = function (x) {
        var isObject = x != null && typeof x === "object";
        var isProp = isObject && this.prop in x;
        return this.parser(isProp ? x[this.prop] : x);
      };

  /**
   * Sorts an array of elements.
   *
   * @param {Array} array: the collection to sort
   * @param {Object} cfg: the configuration options
   * @property {String}   cfg.prop: property name (if it is an Array of objects)
   * @property {Boolean}  cfg.desc: determines whether the sort is descending
   * @property {Function} cfg.parser: function to parse the items to expected type
   * @return {Array}
   */
  return function sortby (array, cfg) {
    if (!(array instanceof Array && array.length)) return [];
    if (toString.call(cfg) !== "[object Object]") cfg = {};
    if (typeof cfg.parser !== "function") cfg.parser = parse;
    cfg.desc = !!cfg.desc ? -1 : 1;
    return array.sort(function (a, b) {
      a = getItem.call(cfg, a);
      b = getItem.call(cfg, b);
      return cfg.desc * (a < b ? -1 : +(a > b));
    });
  };

}()); 
```

## 设置未排序的数据

```
var data = [
  {date: "2011-11-14T17:25:45Z", quantity: 2, total: 200, tip: 0,   type: "cash"},
  {date: "2011-11-14T16:28:54Z", quantity: 1, total: 300, tip: 200, type: "visa"},
  {date: "2011-11-14T16:30:43Z", quantity: 2, total: 90,  tip: 0,   type: "tab"},
  {date: "2011-11-14T17:22:59Z", quantity: 2, total: 90,  tip: 0,   type: "tab"},
  {date: "2011-11-14T16:53:41Z", quantity: 2, total: 90,  tip: 0,   type: "tab"},
  {date: "2011-11-14T16:48:46Z", quantity: 2, total: 90,  tip: 0,   type: "tab"},
  {date: "2011-11-31T17:29:52Z", quantity: 1, total: 200, tip: 100, type: "visa"},
  {date: "2011-11-01T16:17:54Z", quantity: 2, total: 190, tip: 100, type: "tab"},
  {date: "2011-11-14T16:58:03Z", quantity: 2, total: 90,  tip: 0,   type: "tab"},
  {date: "2011-11-14T16:20:19Z", quantity: 2, total: 190, tip: 100, type: "tab"},
  {date: "2011-11-14T17:07:21Z", quantity: 2, total: 90,  tip: 0,   type: "tab"},
  {date: "2011-11-14T16:54:06Z", quantity: 1, total: 100, tip: 0,   type: "cash"}
]; 
```

## 使用它

最后，我们将数组按`"date"`属性排列为`string`

```
//sort the object by a property (ascending)
//sorting takes into account uppercase and lowercase
sortBy(data, { prop: "date" }); 
```

如果要忽略字母大小写，请设置`"parser"`回调：

```
//sort the object by a property (descending)
//sorting ignores uppercase and lowercase
sortBy(data, {
    prop: "date",
    desc: true,
    parser: function (item) {
        //ignore case sensitive
        return item.toUpperCase();
    }
}); 
```

如果要将“日期”字段视为`Date`类型：

```
//sort the object by a property (ascending)
//sorting parses each item to Date type
sortBy(data, {
    prop: "date",
    parser: function (item) {
        return new Date(item);
    }
}); 
```

在这里你可以玩上面的例子：
[jsbin.com/lesebi](http://jsbin.com/lesebi/edit?js,console)

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-12-12T12:46:59.513

当您的日期采用这种格式 (dd/mm/yyyy) 时，应该这样做。

```
 sortByDate(arr) {
    arr.sort(function(a,b){
      return Number(new Date(a.readableDate)) - Number(new Date(b.readableDate));
    });

    return arr;
  } 
```

然后打电话`sortByDate(myArr);`

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2021-10-28T12:47:16.920

以上答案都很好，这是我以 ES6 方式对日期进行排序的实现，我正在使用`Date.parse`（是全局 Date 对象）这会将 Date 的字符串表示形式转换为毫秒数。`new Date`而不是每次都实例化对象。

```
var array = ["2021-08-10T07:24:30.087+0000" , "2021-09-30T07:24:30.087+0000", "2021-10-13T07:24:30.087+0000"];

// sorting with latest date
array.sort((a,b) => Date.parse(b) - Date.parse(a)) 
```

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2015-05-18T07:38:22.133

您可以在下划线 js 中使用 sortBy。

[http://underscorejs.org/#sortBy](http://underscorejs.org/#sortBy)

样本：

```
var log = [{date: '2016-01-16T05:23:38+00:00', other: 'sample'}, 
           {date: '2016-01-13T05:23:38+00:00',other: 'sample'}, 
           {date: '2016-01-15T11:23:38+00:00', other: 'sample'}];

console.log(_.sortBy(log, 'date')); 
```

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2021-07-06T07:17:44.860

arr 是一个对象数组，每个对象都有 date_prop ，它是一个日期。您可以像这样按降序/降序对其进行排序

```
 arr = arr.sort(function (a, b) {
      var dateA = new Date(a.date_prop).getTime();
      var dateB = new Date(b.date_prop).getTime();
      return dateA < dateB ? 1 : -1; // ? -1 : 1 for ascending/increasing order
    }); 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2020-08-23T20:41:52.570

使用 ES6 箭头函数，您可以进一步编写一行简洁的代码（不包括变量声明）。

例如。：

```
var isDescending = true; //set to false for ascending
console.log(["8/2/2020","8/1/2020","8/13/2020", "8/2/2020"].sort((a,b) => isDescending ? new Date(b).getTime() - new Date(a).getTime() : new Date(a).getTime() - new Date(b).getTime()));
```

由于上述日期不存在时间，Date 对象将考虑以下默认时间进行排序：

> 00:00:00

该代码适用于升序和降序排序。只需根据需要更改`isDescending`变量的值。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2016-06-15T03:32:25.790

我将在此处添加此内容，因为某些用途可能无法弄清楚如何反转此排序方法。

要按“出现”排序，我们可以简单地交换 a 和 b，如下所示：

```
your_array.sort ( (a, b) => {
      return new Date(a.DateTime) - new Date(b.DateTime);
}); 
```

请注意，`a`现在在左侧，`b`在右侧，：D！

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2015-06-17T15:32:20.257

我能够使用以下行实现排序：

```
array.sort(function(a, b)
{
   if (a.DueDate > b.DueDate) return 1;
   if (a.DueDate < b.DueDate) return -1;
}) 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2019-07-19T04:31:07.433

我个人使用以下方法对日期进行排序。

```
let array = ["July 11, 1960", "February 1, 1974", "July 11, 1615", "October 18, 1851", "November 12, 1995"];

array.sort(function(date1, date2) {
   date1 = new Date(date1);
   date2 = new Date(date2);
   if (date1 > date2) return 1;
   if (date1 < date2) return -1;
}) 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2018-06-27T14:33:02.267

```
Adding absolute will give better results

var datesArray =[
      {"some":"data1","date": "2018-06-30T13:40:31.493Z"},
      {"some":"data2","date": "2018-07-04T13:40:31.493Z"},
      {"some":"data3","date": "2018-06-27T13:40:54.394Z"}
   ]

var sortedJsObjects = datesArray.sort(function(a,b){ 
    return Math.abs(new Date(a.date) - new Date(b.date)) 
}); 
```

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2021-01-22T07:30:36.927

带有日期的字符串在 JavaScript 中是可比较的（如果它们在语法上相同），例如：

```
'2020-12-01' < '2020-12-02' == true 
```

这意味着您可以在自定义排序函数中使用此表达式：

```
var arr = [{id:1, date:'2020-12-01'}, {id:1, date:'2020-12-15'}, {id:1, date:'2020-12-12'}]

function sortByDate(a, b) {
    if (a.date < b.date) {
        return 1;
    }
    if (a.date > b.date) {
        return -1;
    }
    return 0;
}

const sorted = arr.sort(sortByDate);
console.log(sorted);
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2020-01-31T12:01:24.553

谢谢 Ganesh Sanap。按日期字段从旧到新对项目进行排序。用它

```
 myArray = [{transport: "Air",
             load: "Vatican Vaticano",
             created: "01/31/2020"},
            {transport: "Air",
             load: "Paris",
             created: "01/30/2020"}] 

        myAarray.sort(function(a, b) {
            var c = new Date(a.created);
            var d = new Date(b.created);
            return c-d;
        }); 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-01-02T10:59:31.357

对于任何想要按日期（英国格式）排序的人，我使用了以下内容：

```
//Sort by day, then month, then year
for(i=0;i<=2; i++){
    dataCourses.sort(function(a, b){

        a = a.lastAccessed.split("/");
        b = b.lastAccessed.split("/");

        return a[i]>b[i] ? -1 : a[i]<b[i] ? 1 : 0;
    }); 
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-05-10T16:36:54.320

我刚刚采用了上面描述的[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)并将其作为函数。它需要一个`array`、 排序`function`和一个布尔值作为输入：

```
function schwartzianSort(array,f,asc){
    for (var i=array.length;i;){
      var o = array[--i];
      array[i] = [].concat(f.call(o,o,i),o);
    }
    array.sort(function(a,b){
      for (var i=0,len=a.length;i<len;++i){
        if (a[i]!=b[i]) return a[i]<b[i]?asc?-1:1:1;
      }
      return 0;
    });
    for (var i=array.length;i;){
      array[--i]=array[i][array[i].length-1];
    }
    return array;
  } 
```

```
function schwartzianSort(array, f, asc) {
  for (var i = array.length; i;) {
    var o = array[--i];
    array[i] = [].concat(f.call(o, o, i), o);
  }
  array.sort(function(a, b) {
    for (var i = 0, len = a.length; i < len; ++i) {
      if (a[i] != b[i]) return a[i] < b[i] ? asc ? -1 : 1 : 1;
    }
    return 0;
  });
  for (var i = array.length; i;) {
    array[--i] = array[i][array[i].length - 1];
  }
  return array;
}

arr = []
arr.push({
  date: new Date(1494434112806)
})
arr.push({
  date: new Date(1494434118181)
})
arr.push({
  date: new Date(1494434127341)
})

console.log(JSON.stringify(arr));

arr = schwartzianSort(arr, function(o) {
  return o.date
}, false)
console.log("DESC", JSON.stringify(arr));

arr = schwartzianSort(arr, function(o) {
  return o.date
}, true)
console.log("ASC", JSON.stringify(arr));
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2018-01-11T16:51:18.143

如果像我一样，你有一个日期格式的数组，就像`YYYY[-MM[-DD]]`你想在不太具体的日期之前订购更具体的日期，我想出了这个方便的功能：

```
function sortByDateSpecificity(a, b) {
  const aLength = a.date.length
  const bLength = b.date.length
  const aDate = a.date + (aLength < 10 ? '-12-31'.slice(-10 + aLength) : '')
  const bDate = b.date + (bLength < 10 ? '-12-31'.slice(-10 + bLength) : '')
  return new Date(aDate) - new Date(bDate)
} 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-10-21T19:44:21.293

```
["12 Jan 2018" , "1 Dec 2018", "04 May 2018"].sort(function(a,b) {
    return new Date(a).getTime() - new Date(b).getTime()
}) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-02-04T11:59:27.943

感谢上面那些精彩的答案。我想到了一个稍微复杂的答案。仅适用于那些想要比较不同答案的人。

```
const data = [
    '2-2018', '1-2018',
    '3-2018', '4-2018',
    '1-2019', '2-2019',
    '3-2019', '4-2019',
    '1-2020', '3-2020',
    '4-2020', '1-2021'
]

let eachYearUniqueMonth = data.reduce((acc, elem) => {
    const uniqueDate = Number(elem.match(/(\d+)\-(\d+)/)[1])
    const uniqueYear = Number(elem.match(/(\d+)\-(\d+)/)[2])

    if (acc[uniqueYear] === undefined) {
        acc[uniqueYear] = []        
    } else{    
       if (acc[uniqueYear]  && !acc[uniqueYear].includes(uniqueDate)) {
          acc[uniqueYear].push(uniqueDate)
      }
    }

    return acc;
}, {})

let group = Object.keys(eachYearUniqueMonth).reduce((acc,uniqueYear)=>{
    eachYearUniqueMonth[uniqueYear].forEach(uniqueMonth=>{
    acc.push(`${uniqueYear}-${uniqueMonth}`)
  })

  return acc;
},[])

console.log(group);   //["2018-1", "2018-3", "2018-4", "2019-2", "2019-3", "2019-4", "2020-3", "2020-4"] 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-12-26T06:25:26.700

我有一个对象数组，其中键“时间”包含**ISO**格式的日期

示例 - 2021-12-24T11:02:20.370705

```
arr.sort(function(a,b){return a.time > b.time ? 1 : a.time < b.time ? -1 : 0 }); 
```

以上对我来说就像一个魅力！

# django - 用于 Google App Engine 和 Django 的 Python 调试器

> ID：10123958
> 
> 赞同：2
> 
> 时间：2012-04-12T12:53:16.930
> 
> 标签：django, google-app-engine, python-2.7

我有一个困扰我一个多星期的问题。我有一个在 Google App Engine 上使用 Django 用 python 编写的项目。该项目有一个登录页面，当我在 Google App Engine 中或使用 dev_server.py c:\project 从命令行运行该应用程序时，它工作正常。当我尝试通过 Wing 或 Pycharm 等调试器运行应用程序时，我无法通过登录页面。尝试登录后，它再次将我带回登录屏幕。当我查看日志时，它在调试器中显示 302（重定向），但通常显示 200（OK）。有人可以解释为什么会发生这种情况吗？

谢谢-Dimitry

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:24:09.473

这不是一个很好的答案，因为我对 Wing 或 Pycharm 了解不多。但是 dev_appserver 将标准输入和标准输出重新路由到 WSGI 处理程序。如果您遇到 pdb.set_trace() 设置的断点，该断点通常会将您带到使用 stdin/stdout 的 shell，但使用 dev_appserver，您会看到调试器 shell 通过管道传输到您的 HTTP，并且没有可用的输入。

我不确定 Wing/Pycharm 是如何处理这个问题的。带有 eclipse 的 Pydev 可以与 dev_appserver 一起使用，但这可能是因为 GAE eclipse 插件。

我发现自己经常在我的代码中嵌入断点并在 shell 中手动调试，主要是因为它的运行速度比在 pydev 调试器中快得多。我这样做是在遇到断点时将 stdin/stdout 重新路由回终端。 [http://eatdev.tumblr.com/post/12076034867/using-pdb-on-app-engine](http://eatdev.tumblr.com/post/12076034867/using-pdb-on-app-engine)

我在linux环境下。我确实在 Windows 上使用了 GAE 应用程序启动器，但不是最近。我想我记得应用程序启动器隐藏了启动 dev_appserver 的原始终端，因此您可能必须从命令提示符启动 dev_appserver 才能使其工作。如果 Wing 或 Pycharm 在下面使用 pdb，我怀疑你可能需要类似的 hack。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:15:41.177

经过一个星期的绞尽脑汁，我终于找到了问题所在。gaesessions 代码是罪魁祸首。我们输入 DEFAULT_LIFETIME = datetime.timedelta(hours=1)，原来是 DEFAULT_LIFETIME = datetime.timedelta(days=7)。不知道为什么通过任何调试器（如wing或pycharm）运行它会阻止浏览器获取会话。有趣的是，使用 hours=1 的代码更改在带有翼调试器的 linux 上运行良好。很奇怪！

# asp.net-mvc-3 - MVC 代码是否首先消除了使用数据库项目对数据库进行源代码控制并保持同步的需要？

> ID：10123962
> 
> 赞同：0
> 
> 时间：2012-04-12T12:53:30.467
> 
> 标签：asp.net-mvc-3, ef-code-first, sync

我们正在计划重写，我想获得最新的工具，以确保我们以最好的方式做事。我喜欢代码如何首先将数据库结构保留在代码中。这已经是源代码控制的。所以我希望这将消除对数据库项目的需求。是吗？不 ？

DB项目还允许您在环境之间同步数据，但这是与代码无关的其他事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:05:09.207

首先使用实体​​框架代码，您*可以*用 C# 代码编写内容并让它创建/保存数据。由于您可以对 C# 代码进行源代码控制，因此您可以对数据库进行源代码控制，但只能控制模式。您将无法对数据进行“源代码控制”。

就个人而言，我不使用它，因为它会迫使您做一些不稳定的事情，例如将属性声明为`virtual`和在整个地方使用装饰器。不仅如此，而且你真的在框架上做很多幕后的事情，当事情出错时，这永远不会好。

我选择并且对我来说效果很好的路线是使用实体框架从现有数据库生成的模型声明一个 Project.Domain 类库项目。

然后我会从我的 Project.WebUI（我的 MVC3 项目）中引用这个项目，并且只能访问公共存储库类。

所以我的项目看起来像：

![在此处输入图像描述](../Images/a7789d2c7d5e4484980435d5065434c9.png)

# python - 具有默认参数的 Python 类构造函数

> ID：10123968
> 
> 赞同：14
> 
> 时间：2012-04-12T12:53:53.943
> 
> 标签：python, oop

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

谁能解释以下奇怪的行为？

我有以下课程：

```
class Zoo:
    def __init__(self,alist=[]):
        self.animals = alist

    def __len__(self):
        return len(self.animals)

    def add(self,a):
        self.animals.append(a) 
```

当我执行以下操作时，

```
In [38]: z=Zoo()
In [39]: z.add(2)
In [40]: z.add(23)
In [41]: len(z)
Out[41]: 2

In [42]: z2=Zoo()

In [43]: len(z2)
Out[43]: 2 
```

为什么 z2.animals 不是一个空列表？

谢谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T13:01:04.647

您正在改变构造函数中的默认参数（您只是将对同一列表的引用复制到每个实例中）。您可以按如下方式解决此问题：

```
class Zoo:
    def __init__(self,alist=None):
        self.animals = alist or []

    def __len__(self):
        return len(self.animals)

    def add(self,a):
        self.animals.append(a) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T13:02:58.413

默认参数列表是所有实例的相同对象，因此将其分配给成员只是分配对同一对象的引用。

这是一个例子：

```
>>> class foo():
...   def __init__(self, x = []):
...       print id(x)
... 
>>> x = foo()
140284337344168
>>> y = foo()
140284337344168
>>> z = foo()
140284337344168 
```

您可以看到`x`在所有情况下都是同一个对象。

# google-maps - 允许用户根据地点名称而不是坐标添加标记，然后允许过滤

> ID：10123971
> 
> 赞同：0
> 
> 时间：2012-04-12T12:54:03.100
> 
> 标签：google-maps, google-maps-api-3, geocoding

我有一个由 10 名志愿者组成的小组，他们将在不同地区分发传单。我想制作一个他们可以登录的网页，然后通过搜索地点而不是坐标来添加他们的标记（如果相信它是通过地理编码完成的？？）。然后，一旦用户登录，我希望他们按“我的标记”和“所有标记”类别过滤标记。

所以2件事。如何让用户使用名称而不是坐标进行搜索并添加标记。其次，如何过滤标记。

谢谢卡兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:46:49.770

你读了...吗

[https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingStatusCodes](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingStatusCodes)

? 然后使用引用 Marker 数组的对象跟踪用户的标记，例如`user['bob'] = [marker 1, marker 2, etc.]`并根据这些用户名打开和关闭。

当您遇到特定问题时，请返回此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:15:49.783

是的，您是对的，您应该使用[地理编码](https://developers.google.com/maps/documentation/geocoding/)将用户带到他想要的确切位置。然后您可以将用户标记与用户 ID 一起添加到数据库中，以便您可以通过 mymarkers 过滤它们。

# video - ActionScript：从视频/NetStream 中提取/修改帧

> ID：10123981
> 
> 赞同：0
> 
> 时间：2012-04-12T12:54:32.950
> 
> 标签：video, actionscript, frames, netstream

我想在播放之前修改从 NetStream 加载的所有帧。有没有可能的方法？使用内置类和方法或 3rd-party 库更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:03:06.650

```
var frames:Vector.<bitmap>; 
onEnterFrame(event:Event) : void {
    frames.add(video);
} 
```

简而言之，播放视频，然后在 EnterFrame 事件的处理程序中录制。但是这种方式有很多缺点……尽管如此。

# entity-framework - 使用 EF Code First Fluent API 时如何将数据库列设置为“稀疏”？

> ID：10123986
> 
> 赞同：7
> 
> 时间：2012-04-12T12:54:52.963
> 
> 标签：entity-framework, code-first, dbcontext, sparse-matrix

我正在使用一个首先使用 EF 代码的系统，我想在一个表上使用一些 SQL Server 稀疏列。我目前的解决方案是删除 EF 创建的表并在数据库初始化期间通过脚本重新添加。这是否可以在从 EntityTypeConfiguration 或其他方式继承的类中使用 Fluent API 进行配置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T19:43:56.860

[如果您使用实体框架迁移，您可以在Up](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.dbmigration.up.aspx)方法中为添加稀疏列的迁移发出类似这样的 SQL 语句：

```
Sql("alter table TableName alter column ColumnName int sparse"); 
```

`dbContext.Database.ExecuteSqlCommand`即使您不使用迁移，使用相同 SQL的任何一次性执行都将起作用。

这两种方法都不像您可以通过 EF 显式配置类型那样好，但它们仍然比删除和替换整个表更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-08T14:02:12.990

[根据此处](https://docs.microsoft.com/en-us/ef/core/what-is-new/ef-core-6.0/whatsnew#support-for-sql-server-sparse-columns)的文档，现在 EF Core 6.0 支持此功能

> 现在可以使用 OnModelCreating 中的 IsSparse 进行配置。例如：

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder
        .Entity<ForumModerator>()
        .Property(e => e.ForumName)
        .IsSparse();
} 
```

# ruby-on-rails - 如何对 mongodb/mongoid 脚本进行基准测试，以比较两种不同的查询技术

> ID：10123990
> 
> 赞同：2
> 
> 时间：2012-04-12T12:55:03.713
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, database

您对如何测试两种不同的 mongoid/mongodb 查询实现的性能有什么建议吗？

要比较的实现与之前的[“问答”](https://stackoverflow.com/questions/10121977/extracting-modelling-and-changing-data-model-with-mongoid-mongodb)有关，但为简洁起见，我将在这里再次报告：

**第一个代码：**

```
Competitor  = Struct.new(:html_url, :description, :user)
competitors = []

User.all.map do |user|
  user.watchlists.all.map do |wl|
    if wl.tags_array == ["ruby", "web", "framework"]
        competitors << Competitor.new(wl.html_url, wl.description, wl.user.nickname)
    end
  end
end 
```

**与第二个代码：**

```
Competitor = Struct.new(:html_url, :description, :user)
competitors = []

User.where('watchlists.tags_array' => %w[ruby web framework]).only(:nickname, :watchlists).each do |u|
  u.watchlists.where(:tags_array => %w[ruby web framework]).each do |wl|
    competitors << Competitor.new(wl.html_url, wl.description, u.nickname)
  end
end 
```

并且为了完整性，

**下划线数据模型是：**

```
class User
  include Mongoid::Document

  field :nickname
  embeds_many :watchlists
end

class Watchlist
 include Mongoid::Document

 field :html_url
 field :description
 field :tags_array, type: Array
 embedded_in :user
end 
```

目前对这两个代码进行基准测试和比较性能的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:24:01.993

到目前为止，我找到了这种方式，但是如果您知道更好的方法，请也回答...

**第一个代码：**

```
1.9.2p290 :038 >   Competitor  = Struct.new(:html_url, :description, :user)
1.9.2p290 :039 >   time = Benchmark.measure do
1.9.2p290 :040 >     competitors = []
1.9.2p290 :041?>   
1.9.2p290 :042 >     User.all.map do |user|
1.9.2p290 :043 >         user.watchlists.all.map do |wl|
1.9.2p290 :044 >             if wl.tags_array == ["ruby", "web", "framework"]
1.9.2p290 :045?>                 competitors << Competitor.new(wl.html_url, wl.description, wl.user.nickname)
1.9.2p290 :046?>             end
1.9.2p290 :047?>         end
1.9.2p290 :048?>     end
1.9.2p290 :049?>   end
MONGODB (34ms) heroku_app1707530['users'].find({})
MONGODB [DEBUG] cursor.refresh() for cursor 2492208785546818168
MONGODB [DEBUG] cursor.refresh() for cursor 2492208785546818168
 =>   1.390000   0.010000   1.400000 (  1.400842)

1.9.2p290 :050 > 
```

**与第二个代码：**

```
1.9.2p290 :049 > Competitor  = Struct.new(:html_url, :description, :user)
1.9.2p290 :050 > time = Benchmark.measure do
1.9.2p290 :051 >     competitors = []
1.9.2p290 :052?>   
1.9.2p290 :053 >     User.where('watchlists.tags_array' => %w[ruby web framework]).only(:nickname, :watchlists).each do |u|
1.9.2p290 :054 >         u.watchlists.where(:tags_array => %w[ruby web framework]).each do |wl|
1.9.2p290 :055 >             competitors << Competitor.new(wl.html_url, wl.description, u.nickname)
1.9.2p290 :056?>         end
1.9.2p290 :057?>     end
1.9.2p290 :058?>   end
MONGODB (185ms) heroku_app1707530['users'].find({"watchlists.tags_array"=>["ruby", "web", "framework"]}, {:_type=>1, :nickname=>1, :watchlists=>1})
MONGODB [DEBUG] cursor.refresh() for cursor 2195378613558492020
 =>   0.440000   0.000000   0.440000 (  0.456714)

1.9.2p290 :059 > 
```

但更好的是：

**第一个代码：**

```
1.9.2p290 :157 > Competitor  = Struct.new(:html_url, :description, :user)
1.9.2p290 :158 > competitors = []
 => [] 
1.9.2p290 :159 > Benchmark.bm(10) do |x|
1.9.2p290 :160 >     x.report("first:") do
1.9.2p290 :161 >       User.all.map do |user|
1.9.2p290 :162 >           user.watchlists.all.map do |wl|
1.9.2p290 :163 >               if wl.tags_array == ["ruby", "web", "framework"]
1.9.2p290 :164?>                   competitors << Competitor.new(wl.html_url, wl.description, wl.user.nickname)
1.9.2p290 :165?>               end
1.9.2p290 :166?>           end
1.9.2p290 :167?>       end
1.9.2p290 :168?>     end
1.9.2p290 :169?>   x.report("second:") do
1.9.2p290 :170 >       User.all.map do |user|
1.9.2p290 :171 >           user.watchlists.all.map do |wl|
1.9.2p290 :172 >               if wl.tags_array == ["ruby", "web", "framework"]
1.9.2p290 :173?>                   competitors << Competitor.new(wl.html_url, wl.description, wl.user.nickname)
1.9.2p290 :174?>               end
1.9.2p290 :175?>           end
1.9.2p290 :176?>       end
1.9.2p290 :177?>     end
1.9.2p290 :178?>   x.report("third:") do
1.9.2p290 :179 >       User.all.map do |user|
1.9.2p290 :180 >           user.watchlists.all.map do |wl|
1.9.2p290 :181 >               if wl.tags_array == ["ruby", "web", "framework"]
1.9.2p290 :182?>                   competitors << Competitor.new(wl.html_url, wl.description, wl.user.nickname)
1.9.2p290 :183?>               end
1.9.2p290 :184?>           end
1.9.2p290 :185?>       end
1.9.2p290 :186?>     end
1.9.2p290 :187?>   end
                user     system      total        real
first:    MONGODB (30ms) heroku_app1707530['users'].find({})
MONGODB [DEBUG] cursor.refresh() for cursor 6320857008182747446
MONGODB [DEBUG] cursor.refresh() for cursor 6320857008182747446
  1.460000   0.010000   1.470000 (  1.475545)
second:   MONGODB (24ms) heroku_app1707530['users'].find({})
MONGODB [DEBUG] cursor.refresh() for cursor 8580701579081246457
MONGODB [DEBUG] cursor.refresh() for cursor 8580701579081246457
  1.470000   0.010000   1.480000 (  1.494812)
third:    MONGODB (24ms) heroku_app1707530['users'].find({})
MONGODB [DEBUG] cursor.refresh() for cursor 6472818135140756688
MONGODB [DEBUG] cursor.refresh() for cursor 6472818135140756688
  1.490000   0.010000   1.500000 (  1.505000)
 => true 
1.9.2p290 :188 > 
```

**与第二个代码：**

```
1.9.2p290 :065 > Competitor  = Struct.new(:html_url, :description, :user)
1.9.2p290 :066 > competitors = []
 => [] 
1.9.2p290 :067 > Benchmark.bm(10) do |x|
1.9.2p290 :068 >     x.report("first:") {User.where('watchlists.tags_array' => %w[ruby web framework]).only(:nickname, :watchlists).each{|u|u.watchlists.where(:tags_array => %w[ruby web framework]).each{|wl|competitors << Competitor.new(wl.html_url, wl.description, u.nickname)}}}
1.9.2p290 :069?>   x.report("second:") {User.where('watchlists.tags_array' => %w[ruby web framework]).only(:nickname, :watchlists).each{|u|u.watchlists.where(:tags_array => %w[ruby web framework]).each{|wl|competitors << Competitor.new(wl.html_url, wl.description, u.nickname)}}}
1.9.2p290 :070?>   x.report("third:") {User.where('watchlists.tags_array' => %w[ruby web framework]).only(:nickname, :watchlists).each{|u|u.watchlists.where(:tags_array => %w[ruby web framework]).each{|wl|competitors << Competitor.new(wl.html_url, wl.description, u.nickname)}}}
1.9.2p290 :071?>   end
                user     system      total        real
first:    MONGODB (163ms) heroku_app1707530['users'].find({"watchlists.tags_array"=>["ruby", "web", "framework"]}, {:_type=>1, :nickname=>1, :watchlists=>1})
MONGODB [DEBUG] cursor.refresh() for cursor 7239021952645827000
  0.330000   0.000000   0.330000 (  0.380199)
second:   MONGODB (164ms) heroku_app1707530['users'].find({"watchlists.tags_array"=>["ruby", "web", "framework"]}, {:_type=>1, :nickname=>1, :watchlists=>1})
MONGODB [DEBUG] cursor.refresh() for cursor 4816095738351422260
  0.320000   0.010000   0.330000 (  0.381196)
third:    MONGODB (125ms) heroku_app1707530['users'].find({"watchlists.tags_array"=>["ruby", "web", "framework"]}, {:_type=>1, :nickname=>1, :watchlists=>1})
MONGODB [DEBUG] cursor.refresh() for cursor 5014359782446173361
  0.390000   0.010000   0.400000 (  0.397241)
 => true 
1.9.2p290 :072 > 
```

然后第二个代码的结果真的更快，CPU消耗更少......，多亏了[“第二个代码”的](https://stackoverflow.com/questions/10121977/extracting-modelling-and-changing-data-model-with-mongoid-mongodb?answertab=oldest#tab-top)[rubish](https://stackoverflow.com/users/479167/rubish)

# cakephp - 不同模型的cakePHP分页

> ID：10123991
> 
> 赞同：0
> 
> 时间：2012-04-12T12:55:11.453
> 
> 标签：cakephp, pagination

我正在使用 cakePHP 的分页功能和不同的模型。我有一个 AdminController，并使用以下代码向其中添加了许多模型。

```
class AdminsController extends AppController {

var $uses = array('UserDetail', 'CategoryDetail', 'AlbumDetail', 'SongDetail', 'FeaturedPlaylist');
var $components = array('Attachment'); 
```

现在我正在指定分页配置。

```
var $paginate = array(
    'SongDetail' => array('limit' => 10)
   ); 
```

我需要的是在管理屏幕中显示歌曲，我正在加载歌曲列表，如：

```
$songList=  $this->paginate('SongDetail'); 
```

但这并没有返回任何东西。当我将填充元素添加到视图时，它会根据限制显示不同的页数。这有什么问题..？

# android - 使用 getRootView 获取在画布上完成的绘图

> ID：10123999
> 
> 赞同：1
> 
> 时间：2012-04-12T05:13:03.130
> 
> 标签：android

我正在使用演示应用程序`MyView`在画布上绘制内容。`FingerPaint API`我想捕捉我在画布上写的任何东西。但是当我使用`View v1 = myview.getRootView()`它时，它只返回空白画布而不是内容。我想将我的绘图保存在 SDCard 中。以下是我的代码。让我知道我需要改变什么

```
v1 = myview.getRootView();
System.out.println("v1 value = "+v1);
v1.buildDrawingCache(true);
v1.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
           MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
//v1.layout(0, 0, v1.getMeasuredWidth(), v1.getMeasuredHeight()); 
v1.layout(0, 0, 100, 100); 

//Bitmap b = Bitmap.createBitmap(v1.getDrawingCache());
myview.mBitmap = Bitmap.createBitmap(v1.getDrawingCache());
System.out.println("BITMAP VALue = "+myview.mBitmap);

ByteArrayOutputStream bytes = new ByteArrayOutputStream();
//b.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
File f = new File(Environment.getExternalStorageDirectory()+ File.separator + "test.jpg");
try {
    f.createNewFile();
    FileOutputStream fo = new FileOutputStream(f);
    fo.write(bytes.toByteArray());
} catch (Exception e) 
{
    e.printStackTrace();
}
v1.setDrawingCacheEnabled(false); 
```

`myview``MyView`是扩展的类的对象`View`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:09:12.587

您可以直接使用 myview 对象来获取当前视图/画布

```
myview.setDrawingCacheEnabled(true);
Bitmap b = myview.getDrawingCache(); 
```

对于不可变的图像使用这个

```
Bitmap b = myview.getDrawingCache().copy(Config.ARGB_8888, true); 
```

然后您可以将此位图保存为图像文件