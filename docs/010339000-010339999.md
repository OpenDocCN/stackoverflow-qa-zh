# StackOverflow 问答 10339000-10339999

# c# - C# Foreach 更改某些对象属性？

> ID：10339002
> 
> 赞同：3
> 
> 时间：2012-04-26T18:10:04.260
> 
> 标签：c#, object, properties, foreach, controls

我有一个带有复选框和标签的面板，我想在单击按钮时更改复选框的所有选中状态。

```
foreach (object x in panel1.Controls)
        {
            if (x.GetType() == typeof(CheckBox))
            {
                x.Checked = false; // problem is here;
                // (CheckBox)x.Checked = false; // also didn't work
            }
        } 
```

我确定这很简单，但找不到解决问题的方法。我能够在 vb.net 中编写相同的程序，但不想使用它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T18:11:16.443

您需要在整个铸造操作周围加上括号：

```
((CheckBox)x).Checked = false; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T18:12:23.410

您绝对可以稍微清理一下您的代码（以及用括号解决问题）：

```
foreach(var x in panel1.Controls)
{
    var checkbox = x as Checkbox;
    if(checkbox != null) checkbox.Checked = false;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T18:18:50.083

```
foreach(Checkbox box in panel1.Controls.OfType<CheckBox>())
{
  box.Checked = true;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T18:12:16.133

尝试

```
((CheckBox)x).Checked = false; 
```

正如你写的那样，编译器理解

```
(CheckBox)(x.Checked) = false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T18:12:09.277

x 仍然是一个对象，因此您需要将对象强制转换为复选框

```
((Checkbox)x).Checked = false; 
```

# java - 处理 AppEngine Memcache 超时

> ID：10339004
> 
> 赞同：5
> 
> 时间：2012-04-26T18:10:15.320
> 
> 标签：java, google-app-engine, memcached

`com.google.apphosting.api.ApiProxy$ApiDeadlineExceededException: The API call memcache.Get() took too long to respond and was cancelled.`

处理此类 Memcache 错误的最佳方法是什么？我假设 memcache 调用（与数据存储调用相反）如果由于某种原因失败，则只会返回 null，因为当从缓存中删除缓存项时，总是可能出现 null 结果。

## 我正在考虑用我自己的方法包装 memcache 调用以捕获异常并返回 null。有更好的想法吗？

编辑：我现在看到您可以设置错误处理程序。LogAndContinueErrorHandler 应该是默认值，但不清楚究竟设置/正在使用什么。这似乎是要走的路。

* * *

编辑：这是完整的堆栈跟踪：

```
com.google.apphosting.api.ApiProxy$ApiDeadlineExceededException: The API call memcache.Get() took too long to respond and was cancelled.
    at com.google.apphosting.runtime.ApiProxyImpl$3.createDeadlineException(ApiProxyImpl.java:318)
    at com.google.appengine.tools.development.TimedFuture.get(TimedFuture.java:44)
    at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:63)
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
    at com.google.appengine.api.memcache.MemcacheServiceImpl.quietGet(MemcacheServiceImpl.java:28)
    at com.google.appengine.api.memcache.MemcacheServiceImpl.get(MemcacheServiceImpl.java:51)
    at mikelike.account.Account.getPrivateBoardsFromCache(Account.java:1110)
    at org.apache.jsp.inc.dialogs.pin_005fdialog_jsp._jspService(pin_005fdialog_jsp.java:77)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.servlet.Dispatcher.include(Dispatcher.java:192)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.inc.header_jsp._jspService(header_jsp.java:145)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.servlet.Dispatcher.include(Dispatcher.java:192)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.index_jsp._jspService(index_jsp.java:107)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
    at com.google.apphosting.runtime.jetty.ResourceFileServlet.serveWelcomeFileAsForward(ResourceFileServlet.java:342)
    at com.google.apphosting.runtime.jetty.ResourceFileServlet.maybeServeWelcomeFile(ResourceFileServlet.java:281)
    at com.google.apphosting.runtime.jetty.ResourceFileServlet.doGet(ResourceFileServlet.java:142)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at mikelike.common.MikeLikeServletFilter.doFilter(MikeLikeServletFilter.java:191)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:446)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

编辑：这是标题：

```
Host: www.mikelike.com
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://www.mikelike.com/pin/PiAILvNi4yA3c/no-description
Accept-Language: ja,en-US;q=0.8,en;q=0.6
Accept-Charset: Shift_JIS,utf-8;q=0.7,*;q=0.3
Cookie: bookmarklet=mikelike; __utma=144575401.2134744684.1335291737.1336151354.1336236818.8; __utmb=144575401.263.10.1336236818; __utmc=144575401; __utmz=144575401.1336236818.8.7.utmcsr=pinterest.com|utmccn=(referral)|utmcmd=referral|utmcct=/nagakubo/watch-later/; fbm_247980821960554=base_domain=.mikelike.com; fbsr_247980821960554=bCuJN2JJUzK9RpAzxnurnPTaWLLYIk3MAnBrjDn0_WE.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImNvZGUiOiIyLkFRQ1JJeldBYWUyY1FHUGcuMzYwMC4xMzM2MjQ4MDAwLjEtMTI1ODY2OTgzN3xLWEd4MVVNYS12T0k2RGxWaW90NVppRndWZ1kiLCJpc3N1ZWRfYXQiOjEzMzYyNDQxODMsInVzZXJfaWQiOiIxMjU4NjY5ODM3In0
X-Zoo: app-id=mikelikecom,domain=mikelike.com,host=www.mikelike.com
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19
X-Google-Apps-Metadata: domain=mikelike.com,host=www.mikelike.com
X-AppEngine-Country: JP
X-AppEngine-Region: 13
X-AppEngine-City: fuchu
X-AppEngine-CityLatLong: 35.668973,139.477661
X-AppEngine-Default-Namespace: mikelike.com 
```

* * *

编辑：这是完整的日志条目。

```
2012-05-12 18:37:24.317 /ml/scripts/set_bookmarklet_cookie/?pin_service=mikelike&_=1336873018270 500 25355ms 2kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.5 Safari/534.55.3

99.226.111.36 - - [12/May/2012:18:37:24 -0700] "GET /ml/scripts/set_bookmarklet_cookie/?pin_service=mikelike&_=1336873018270 HTTP/1.1" 500 2793 "http://pinterest.com/pin/126593439495821330/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.5 Safari/534.55.3" "www.mikelike.com" ms=25356 cpu_ms=19232 api_cpu_ms=0 cpm_usd=0.635415 instance=00c61b117c5f07e0509d55c89da88f028311b8

W 2012-05-12 18:37:23.996

/ml/scripts/set_bookmarklet_cookie/
com.google.apphosting.api.ApiProxy$ApiDeadlineExceededException: The API call memcache.Get() took too long to respond and was cancelled.
    at com.google.apphosting.runtime.ApiProxyImpl$3.createDeadlineException(ApiProxyImpl.java:318)
    at com.google.appengine.tools.development.TimedFuture.get(TimedFuture.java:44)
    at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:63)
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
    at com.google.appengine.api.memcache.MemcacheServiceImpl.quietGet(MemcacheServiceImpl.java:28)
    at com.google.appengine.api.memcache.MemcacheServiceImpl.get(MemcacheServiceImpl.java:51)
    at mikelike.account.Account.getAccountFromCache(Account.java:1053)
    at mikelike.common.MikeLikeServletFilter.getUserAccount(MikeLikeServletFilter.java:209)
    at mikelike.common.MikeLikeServletFilter.doFilter(MikeLikeServletFilter.java:165)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:446)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:34:25.853

开发服务器上是否发生此错误？如果是这样，请记住，memcache 内存使用会随着时间的推移而增长（如果您没有明确清除项目..），因为内部 memcache api 在开发服务器上没有得到正确管理。

# python - 在 Mac OS 10.7、Python 2.7.1 上构建 mysqldb 时出错

> ID：10339005
> 
> 赞同：0
> 
> 时间：2012-04-26T18:10:22.893
> 
> 标签：python, macos, mysql-python

我正在尝试构建 MySQLdb 1.2.3。我编辑了构建配置以设置 threadsafe = False，现在，当我构建时，我看到以下内容：

一长串警告阿拉

```
_mysql.c:986: warning: implicit conversion shortens 64-bit value into a 32-bit value 
```

最后发生 llvm 崩溃：

```
lipo: /var/folders/fk/648y1j5d0c94ljvc5k0xncmh0000gt/T//ccoAI1iz.out and /var/folders/fk/648y1j5d0c94ljvc5k0xncmh0000gt/T//cc9fJKgC.out have the same architectures (x86_64) and can't be in the same fat output file
error: command 'llvm-gcc-4.2' failed with exit status 1 
```

有没有快速解决这些问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:44:23.037

看起来这是由我正在构建的库版本、python 版本和/或我系统上的 mysql 版本之间的不匹配引起的问题。

我通过确保所有版本都匹配 64 位并运行来纠正它

```
ARCHFLAGS="-arch x86_64" python setup.py build 
```

正如[这里](http://learninglamp.wordpress.com/2010/02/21/mysqldb-python-mysql-and-os-x-a-match-made-in-satans-bum/)推荐的那样。

# asp.net - VB.NET 以编程方式关闭模式窗口

> ID：10339008
> 
> 赞同：0
> 
> 时间：2012-04-26T18:10:37.967
> 
> 标签：asp.net, vb.net

我有一个在 .aspx 中显示的模式窗口。如何以编程方式在 VB.net 中关闭此模式窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:05:26.293

这取决于谁关闭了窗户。

是窗户本身吗？然后只需为`DialogResult`(`true`或`false`) 分配一个值，窗口就会隐藏。

如果是关闭窗口的应用程序，您可以使用子窗口将订阅的事件并在引发时自行关闭。

如果您希望窗口在给定时间后关闭，请在此窗口中使用计时器，并在处理程序中关闭窗口。

确保用户理解当他没有自己关闭窗口时为什么窗口会关闭。

# data-structures - B树的叶子最少？

> ID：10339009
> 
> 赞同：3
> 
> 时间：2012-04-26T18:10:40.897
> 
> 标签：data-structures, tree

我被要求证明对于一棵 kB 树，必须至少有**2(k + 1)^(h-1) 个**叶子。

从我自己画出一棵快速的 3-B 树开始，我一直到那里必须至少有 4 片叶子才能使树达到高度 2，但是 2(k + 1)^(h-1) 结果为 8树叶。

我忽略了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:01:32.593

首先，对于典型的 B 树问题*，有两种类型的节点，您的内部节点和您的叶节点。因此，指定内部节点的最大数量 M 和叶节点的最大数量 L 是标准的。

但是假设您的意思是 M 和 L 是相同的数字 k，那么您的最小叶 3-B 树的高度为 2 确实只有四片叶子（假设高度 h 的标准定义）。

我认为您的问题在于公式的定义。2(k + 1)^(h-1) 将为您提供叶中数据元素的最小数量，必须为 8，因为每个叶节点必须至少半满。因此，在此示例中，每个叶节点必须有 2 个元素，在树中总共有 8 个数据元素。但是，您将只有 4 个叶节点。

这是一个很好的概述：

[http://en.wikipedia.org/wiki/B%2B_tree](http://en.wikipedia.org/wiki/B%2B_tree)

*我假设您指的是技术上的 B+ 树，因为 B 树在实践中并未使用，尽管每个人都称 B+ 树为 B 树。

# c++ - 必须提供自己作为模板参数的模板函子

> ID：10339012
> 
> 赞同：1
> 
> 时间：2012-04-26T18:10:47.380
> 
> 标签：c++, templates, constructor, functor

我非常希望能够提供一个仿函数作为模板参数。函子必须能够提供“他们自己”作为该参数。

我想象这样的事情：

```
template<typename T, template<typename> class SumFunctor> class foo;

template<typename T>
struct sum_default
{
    foo<T, sum_default> operator()(foo<T, sum_default> a, foo<T, sum_default> b) const 
    {
            T a_data = a.data();
            T b_data = b.data();
            return foo<T, sum_default>(a_data + b_data);
    }
};

template<typename T>
struct sum_awesome
{
    foo<T, sum_awesome> operator()(foo<T, sum_awesome> a, foo<T, sum_awesome> b) const 
    {
            T a_data = a.data();
            T b_data = b.data();
            return foo<T, sum_awesome>(a_data - b_data);
    }
};

template<typename T=int, template<typename> class SumFunctor=sum_default>
class foo
{
private:
    T _data;
    SumFunctor<T> _functor;
public:
    foo<T, SumFunctor>(T data) : _data(data) {}

    T data() { return _data; }

    friend const foo operator +(const foo& lhs, const foo& rhs)
    {
            return lhs._functor(lhs,rhs);
    }
};

int main(){
    foo<> a(42); 
    foo<double> b(1.0);
    foo<double,sum_default> c(4.0);
    foo<double,sum_awesome> d(4.0);

    a+a;
    d+d;
} 
```

这可能吗？如果可以，怎么做？

另一种解决方案是向构造函数提供函子，但我认为这非常难看，因为用户必须自己动态分配函子（因为我们无法确定构造函数中函子的类型。使用 RTTI 这样做似乎有点丑）：

```
foo<double> a(42, new sum_default<double>() ); 
```

这也强制所有函子从一些预定义的基本函子派生。

**更新**

尝试将模板参数添加到 sum_default 模板参数似乎无法解决问题：

```
template<typename T>
struct sum_default
{
// Error    1   error C3200: 'sum_default<T>' : invalid template argument for template parameter 'SumFunctor', expected a class template
foo<T, sum_default<T> > operator()(foo<T, sum_default<T> > a, foo<T, sum_default<T> > b) const 
{
    T a_data = a.data();
    T b_data = b.data();
    return foo<T, sum_default<T> >(a_data + b_data);
}
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:38:58.483

在这里咬你的东西被称为“类名注入”——在类模板内部，例如`Foo<T>`，不合格的使用`Foo`实际上被视为`Foo<T>`. 引用 C++11 §14.6.1/1：

> 与普通（非模板）类一样，类模板具有注入类名称。注入的类名可以用作*模板名*或*类型名*。当它与*template-argument-list*一起使用时，作为*模板模板参数*的模板*参数，或作为朋友类模板声明的**详细类型说明*符中的最终标识符，它指的是类模板本身. 否则，它等价于*template-name*后跟包含在 中的类模板的*模板参数*`<>`。

因此，在 内部`sum_default<T>`，当您拥有 时`foo<T, sum_default>`，它会被视为您键入了`foo<T, sum_default<T> >`（这显然不能像`foo`需要模板模板参数那样工作）。

为了避免这种行为，您需要限定这些类模板中类模板名称的使用。因为您的类模板在全局范围内，`::`所以就足够了：

```
template<typename T>
struct sum_default;

template<typename T = int, template<typename> class SumFunctor = sum_default>
class foo
{
    T _data;
    SumFunctor<T> _functor;

public:
    foo<T, SumFunctor>(T data) : _data(data) { }

    T data() { return _data; } const

    friend foo operator +(foo const& lhs, foo const& rhs)
    {
        return lhs._functor(lhs, rhs);
    }
};

template<typename T>
struct sum_default
{
    foo<T, ::sum_default> operator ()(foo<T, ::sum_default> a,
                                      foo<T, ::sum_default> b) const
    {
        return foo<T, ::sum_default>(a.data() + b.data());
    }
};

template<typename T>
struct sum_awesome
{
    foo<T, ::sum_awesome> operator()(foo<T, ::sum_awesome> a,
                                     foo<T, ::sum_awesome> b) const
    {
        return foo<T, ::sum_awesome>(a.data() - b.data());
    }
};

int main()
{
    foo<> a(42);
    foo<double> b(1.0);
    foo<double, sum_default> c(4.0);
    foo<double, sum_awesome> d(4.0);

    a + a;
    d + d;
} 
```

请注意，这也允许您因此定义`foo`的构造函数，从而减少一些噪音：

```
foo(T data) : _data(data) { } 
```

# node.js - 是否可以从共享主机上的 socket.io 开始以及如何

> ID：10339013
> 
> 赞同：0
> 
> 时间：2012-04-26T18:10:48.073
> 
> 标签：node.js, socket.io, hosting, devops, shared-hosting

我创建了一些游戏，我需要一个`socket.io`服务器，但我不知道是否可以将它安装在共享主机上以及如何安装？

**在 socket.io node.js**和**socket.io**之前我需要安装什么？

如何从 socket.io 开始

在文档中写得很糟糕。我需要使用 NPM 命令安装 socket.io，但那在哪里。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:25:48.457

在某种程度上是可能的

> 从技术上讲，您不需要专用服务器，甚至不需要 root 访问权限。您确实需要一个可以长时间运行进程的系统。如果您希望服务在系统重新启动时自动启动，您可能需要将启动文件添加到 /etc/init.d、/etc/rc.d，这将需要 root 访问权限。node.js 和 Socket.IO 都可以从普通的主目录安装和运行。如果您想在标准端口（如 80 或 443）上运行 Socket.IO，则需要以 root 权限运行它。

查看更多：[https ://stackoverflow.com/a/4410612/1061871](https://stackoverflow.com/a/4410612/1061871)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T14:02:13.573

您不能在共享主机上安装 node.js 之类的东西，因为服务器为所有客户端分配相同的资源，并且如果您使用的资源比其他人多，这将是不公平的，只有在所有者同意您的情况下。此外，如果您想使用 websocket（我想这就是您想要的），您可以购买一个专用 IP，您可以在该 IP 上打开您想要的任何端口，但服务器必须安装“php_sockets”扩展。我建议你使用[Ratchet](http://socketo.me)，一个不错的 websockets 服务器实现。

# ruby-on-rails - id=0 注册时将新用户分配给模型时出错

> ID：10339016
> 
> 赞同：1
> 
> 时间：2012-04-26T18:10:58.680
> 
> 标签：ruby-on-rails, devise, registration

我正在尝试允许当前用户邀请另一个用户并将该新受邀者分配给列表，但是当受邀用户去注册时出现错误。

有两个模型，用户和列表，它们与每个模型上的 has_and_belongs_to_many 相关。还有一个邀请模型，其中包含一个令牌和受邀者需要分配到的列表。

我正在覆盖设计注册控制器：

```
 def new
    resource = build_resource({:invitation_token => params[:invitation_token]})
    resource.email = resource.invitation.recipient_email if resource.invitation
    resource.listings << resource.invitation.listing if resource.invitation
    respond_with resource
  end

  # POST /resource
  def create
    build_resource

    if resource.save
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_in(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end 
```

在我的注册/新视图中，我有：

```
= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|
  = f.hidden_field :listing_ids 
```

当我邀请新用户并转到注册（注册/新）页面时，填写表格，然后单击提交，我收到以下错误：

```
Couldn't find Listing with id=0 
```

以下输出到服务器日志：

```
Started POST "/users" for 127.0.0.1 at 2012-04-26 14:02:51 -0400
  Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"KdWS08JnnbN61JwKkUsIBNDFvJZnX6E8iN3QOS9149U=", "user"=>{"invitation_token"=>"80c98940448829e7edc623f9886e6930434e245c", "listing_ids"=>"[1]", "first_name"=>"John", "last_name"=>"Williams", "email"=>"johnpkelleher@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  Invitation Load (0.8ms)  SELECT "invitations".* FROM "invitations" WHERE "invitations"."token" = '80c98940448829e7edc623f9886e6930434e245c' LIMIT 1
  Listing Load (0.3ms)  SELECT "listings".* FROM "listings" WHERE "listings"."id" = $1 LIMIT 1  [["id", 0]]
Completed 404 Not Found in 170ms

ActiveRecord::RecordNotFound (Couldn't find Listing with id=0):
  app/controllers/registrations_controller.rb:12:in `create' 
```

当分配的列表的 id 为 1 时，为什么我会收到此错误。

# haskell - 自动收集所有快速检查

> ID：10339025
> 
> 赞同：8
> 
> 时间：2012-04-26T18:11:29.560
> 
> 标签：haskell, quickcheck

作为 quickCheck 的粉丝，我有很多

```
prop_something_something = ... 
```

在我的整个程序中。

为方便起见，为了轻松运行所有这些，我定义

```
runchecks = do
    quickCheck prop_something_something
    quickCheck prop_something_different 
```

但是有没有一种很好的生成方法`runchecks`？

TL;DR：我想轻松运行文件中的所有快速检查。我想一种方法是在可运行的测试前面加上 test_ 或类似的东西，但这可能太老套了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T05:20:54.033

An extra note: this functionality exists out of the box in QuickCheck 2 as well, see the function [`quickCheckAll`](http://hackage.haskell.org/packages/archive/QuickCheck/latest/doc/html/Test-QuickCheck-All.html#v:quickCheckAll), which requires an import of `Test.QuickCheck.All` as well as `TemplateHaskell`. `quickCheckAll` will test all functions in your module whose name starts with `prop_`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T18:27:18.497

你可以用这个[`test-framework-th`](http://hackage.haskell.org/package/test-framework-th)包来做到这一点。做就是了：

```
import Test.Framework.TH
import Test.Framework.Providers.QuickCheck2
runchecks = $(defaultMainGenerator) 
```

这将使用`test-framework`运行测试的方式，即您将获得比简单地一个接一个地运行测试所获得的信息略多的信息，这通常是一件好事。

您显然需要`TemplateHaskell`启用它才能工作；要么添加`Default-extensions: TemplateHaskell`到您的 Cabal 文件，要么添加到文件`{-# LANGUAGE TemplateHaskell #-}`的顶部。

# java - SliceQuery 中允许的运算符

> ID：10339029
> 
> 赞同：1
> 
> 时间：2012-04-26T18:11:56.013
> 
> 标签：java, nosql, cassandra, predicate, hector

我正在编写一个 java 代码来访问存储在 Cassandra 中的数据。我正在使用赫克托 API。

为了检索数据，我使用切片查询。但它似乎只支持五个算术运算符，并且也支持 AND 运算符。

有没有办法用 OR 运算符编写谓词或基于字符串中的包含功能进行查询。？？？

# matrix - 相对于其在 xna 中的旋转向前移动模型

> ID：10339037
> 
> 赞同：0
> 
> 时间：2012-04-26T18:12:13.637
> 
> 标签：matrix, xna, 3d, rotation, translation

我有这个敌人阶级，我希望它

1) 在某个地方生成 Vector3 pos

2) 旋转面对我的球员位置

3) 前进

就像现在的代码一样，它将出现在指定的位置：pos，并尝试旋转以面对它的目标：targetShip。由于这种偏移，它无法正确面对它的目标。

如果我删除为平移分配值的代码，或者如果我对 pos 进行规范化，那么模型将出现在原点并旋转以正确面对它的目标。

如果我尝试使用任何关于翻译的注释掉代码来移动它，它似乎从其他地方开始，我永远找不到它。

但是，如果我删除与旋转相关的代码，并取消注释与翻译相关的代码，那么我可以让它继续前进。

诀窍是一起做。

```
class Enemy : BasicModel
{

    Matrix rotation = Matrix.Identity;
    Matrix translation = Matrix.Identity;
    public Vector3 pos, up, right, targetShip,dir;

    public Enemy(Model m, Vector3 pos)
        : base(m)
    {
        up = Vector3.Up;
        //sets the position to the Vector3 as it's spawn point.
        translation = Matrix.CreateTranslation(pos);

    }

    public override void Update()
    {
        //Glo is a global class, where I store the player world.
        targetShip = Glo.world.Translation;
        targetShip.Normalize();

      pos = transform.Translation;

      rotation = RotateToFace(targetShip, pos, Vector3.Up);
      //Attempt at moving the model forward. Causes it to go out of view
      //translation *= Matrix.CreateTranslation(this.GetWorld().Backward);
      //translation *= Matrix.CreateTranslation(pos);
    }

    public override Matrix GetWorld()
    {
        return rotation * world * translation ;

    }

    /*Params: O = Our target
     * P = Our position
     * U = up.
     * 
     * Code from some site I googled up.
      */
    Matrix RotateToFace(Vector3 O, Vector3 P, Vector3 U)
    {

        //The direction we're facing.
        Vector3 D = (O - P);
        //Our relative Right.
        Vector3 Right = Vector3.Cross(U, D);
        Vector3.Normalize(ref Right, out Right);
        //Our back
        Vector3 Backwards = Vector3.Cross(Right, U);
        Vector3.Normalize(ref Backwards, out Backwards);
        //Our relative up
        Vector3 Up = Vector3.Cross(Backwards, Right);
        //Make a matrix out of all of these.
        Matrix rot = new Matrix(Right.X, Right.Y, Right.Z, 0, Up.X, Up.Y, Up.Z, 0, Backwards.X, Backwards.Y, Backwards.Z, 0, 0, 0, 0, 1);
        return rot;
    }

} 
```

}

## ----

* * *

我试着做

anathonline 的方法，这就是我现在拥有的它不起作用。我在任何地方都看不到我的模型。

```
public override void Update()
        {
            targetShip = Glo.world.Translation;
            targetShip.Normalize();

            //Translate it to the origin
            translation = Matrix.Identity;
            //Orient it
            rot = RotateToFace(targetShip, translation.Translation, Vector3.Up);
            //Move it back to where it was originally;
            translation = Matrix.CreateTranslation(offset);
            //Calculate the front of the object
            Vector3 front = Vector3.Forward * translation.Translation;
            //normalize it
            Vector3.Normalize(ref front, out front);
            //multiply it
            front *= 2;
            //translate the object
            translation *= Matrix.CreateTranslation(front);

        }

        public override Matrix GetWorld()
        {
            return world * rot *  translation;

        } 
```

## ----

* * *

第二次修改：还是不行

```
public override void Update()
    {
        targetShip = Glo.world.Translation;
        targetShip.Normalize();

         translation = Matrix.CreateLookAt(offset, targetShip, Vector3.Up);
        var amountToMove = 0.2f;
        var finalPos = Vector3.Lerp(targetShip, offset, amountToMove);
        rot = translation * Matrix.CreateTranslation(finalPos); 

    }

    public override Matrix GetWorld()
    {
        return world * rot * translation ;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:48:32.967

我修好了，别着急。无论如何，所有这些代码都已过时。

# javascript - 使用弹出框内的按钮单击关闭 Safari 弹出框

> ID：10339042
> 
> 赞同：5
> 
> 时间：2012-04-26T18:12:19.013
> 
> 标签：javascript, safari-extension

我正在开发一个 Safari 扩展程序，该扩展程序在单击工具栏按钮时会显示一个弹出框。我在弹出框取消和保存中添加了 2 个按钮。我想在单击按钮时关闭弹出框。我怎样才能做到这一点？

我尝试使用 self.close() 但是一旦我单击任何按钮，弹出框就会关闭，但在单击工具栏时不会再次显示。（工具栏按钮不注册点击）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T22:00:34.057

试试`safari.self.hide()`吧。

# oracle - 比较两个日期字段时出现“文字与格式字符串不匹配”

> ID：10339047
> 
> 赞同：2
> 
> 时间：2012-04-26T18:12:31.847
> 
> 标签：oracle, plsql

我在这里发生了一种奇怪的行为，我希望有人可以向我解释。

我在查询中有两个字段。一个是一个数字字段，它通过 转换为日期`to_date('01/01/1960', 'mm/dd/yyyy') + somethingorother`。另一种是文本字段，它包含至少一个非日期值，它被转换为带有 的日期`to_date(textField, 'mm/dd/rrrr')`。如果我运行查询，它运行良好。但是，如果我将查询括在 中`select * from ( ) where field1 > field2`，则会出现“ORA-01861：文字与格式字符串不匹配”错误。如果我尝试在拉回文本字段的子查询的 where 子句中排除已知的非日期值，则无济于事。

我知道没有代码几乎不可能弄清楚，但我想知道是否有人可以向我解释为什么它在没有过滤器的情况下工作，但是当我添加它时会爆炸。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T18:42:57.157

一般的问题是，由于 SQL 是一种基于集合的语言，Oracle 可以自由地以它选择的任何顺序评估您的谓词。如果您有一`VARCAHR2`列存储了一些日期值和一些非日期值，这意味着 Oracle 可以自由地评估首先过滤掉所有非日期值的谓词，或者评估检查是否有一个转换`DATE`后的值大于另一个首先。如果碰巧在过滤掉非日期值之前 评估`DATE`不等式谓词 ( )，则会出现错误。`field1 > field2`

SQL 是基于集合的这一事实是使用错误数据类型如此成问题的主要原因之一——您永远无法确定查询总是会在调用转换之前过滤掉不可转换的数据功能。即使您设置了过滤掉无效数据的视图之类的抽象障碍，优化器也可以自由地重新排序谓词，因此您可以轻松地发现您的查询最终打破了您的抽象障碍，或者您的查询大部分时间都在工作，除非优化器碰巧选择了不同的执行计划。Jonathan Gennick 有一篇非常有趣的文章[Subquery Madness](http://gennick.com/madness.html)讨论了这个特定问题。

您可以编写自己的转换函数来忽略异常并在查询中使用它。例如，您可以创建一个函数

```
CREATE OR REPLACE FUNCTION my_to_date( p_date_str    IN VARCHAR2,
                                       p_format_mask IN VARCHAR2 )
  RETURN DATE
IS
  l_date DATE;
BEGIN
  l_date := to_date( p_date_Str, p_format_mask ); 
  RETURN l_date;
EXCEPTION
  WHEN OTHERS THEN
    RETURN null;
END; 
```

然后在您的查询中使用该功能

```
SELECT *
  FROM (SELECT to_date('01/01/1960', 'mm/dd/yyyy') + somethingorother field1,
               my_to_date( textField, 'mm/dd/rrrr' ) field2
          FROM your_table
         WHERE some_condition)
 WHERE field1 > field2 
```

这将起作用，因为调用`my_to_date`任何字符串都是有效的，无论它的计算结果是否有效`DATE`，因此您的查询不再依赖于 Oracle 选择评估谓词的顺序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T18:25:47.437

我猜您`varchar2`专栏中的日期之一 - 请注意不一致之处 - 不是您指定的格式。请不要将日期存储在字符列中。使用日期列，它根本不会发生这种情况。

创建以下函数：

```
create or replace function is_date
        ( Pdate varchar2
        , Pformatstring varchar2 ) return number is

   l_date date;

begin

   l_date := to_date(Pdate, Pformatstring);

   return 1;
-- raise an exception when you can-t convert to a date.
exception when others then
   return 0;

end; 
```

然后在你的桌子上跑：

```
select <columns>
  from my_table
 where is_date(textfield,  'mm/dd/rrrr') = 0 
```

这将向您显示您的数据错误的地方。

如评论中所述，由于您没有选择所有数据，因此最初似乎运行良好。

* * *

还有另一种选择，尽管仍然与将日期存储为字符有关。如果您正在执行复杂的联接，则如下所示：

```
select a.a, a.b
  from my_table a
  join another_table b
    on to_date(replace(a.textfield,'?'),'mm/dd/rr') = b.a_date 
```

那么 Oracle 不一定会按照您想要的顺序评估所有内容。您必须将其更改为：

```
select x.*
  from ( select a, b, to_date(replace(a.textfield,'?'),'mm/dd/rr') as another_date
           from my_table ) x
  join another_table b
    on another_date = b.a_date 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T18:27:11.360

我将使用 DBMS_Xplan.display 查看执行计划，以查看您提供的过滤器是否正在以某种可以解释此行为的微妙方式进行修改。

# wordpress - WordPress + Multisite：如何在网络管理员中添加自定义博客选项以添加新站点表单？

> ID：10339053
> 
> 赞同：16
> 
> 时间：2012-04-26T18:12:54.487
> 
> 标签：wordpress

在我正在自定义的 WordPress 多站点安装中，我需要在输入表单中添加一个简单的文本字段以创建新的博客站点，该表单位于

`Network Admin > Sites > Add New`

自然，我需要将此字段与该表单中的其他元数据一起保存在`{new_blog_prefix}_options`表格中。

我对实现这一目标的最简单、最直接和/或“正确的方式”（即 WordPress 方式）特别感兴趣，但我会满足于 The Way That Works™！

到目前为止，我在研究中遇到了许多死胡同：

*   **设置 API** - [ [WP Codex](http://codex.wordpress.org/Settings_API) ]

    据我所知，Settings API **(a)** *可能*不适用于 Network Admin 部分（尽管这在 WP 的最新版本中可能已经改变）；此外，**(b)**似乎这只允许您`Settings`在仪表板部分添加/修改屏幕。

*   **wpmu_options**钩子 - [[钩子数据库](http://adambrown.info/p/wp_hooks/hook/wpmu_options)]

    似乎是专门用于向“网络设置”屏幕添加选项的钩子。

*   **add_site_option / add_blog_option** - [ [WP Codex](http://codex.wordpress.org/Category:WPMU_Functions) ]

    我能找到的最近的；似乎允许向`{blogsite_prefix}_options`表中添加特定于站点的选项，但仍无助于向管理表单添加选项。

所以......没有骰子。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-29T14:25:23.617

如果您查看“添加新站点”页面的[源代码](http://phpxref.ftwr.co.uk/wordpress/wp-admin/network/site-new.php.source.html)，您会发现 WordPress 没有为此目的提供挂钩。当然，也可以自己添加一个钩子，但编辑 WordPress 核心通常是*不好的做法。*

但是，一旦提交并且所有信息都存在，页面就会调用函数[wpmu_create_blog()](http://phpxref.ftwr.co.uk/wordpress/wp-admin/network/site-new.php.source.html)。在这个函数中有一个钩子被调用，即 action `wpmu_new_blog`：

```
do_action( 'wpmu_new_blog', $blog_id, $user_id, $domain, $path, $site_id, $meta ); 
```

至此，博客已经创建完毕。但是，我们仍然可以通过挂钩此操作并将其保存到数据库中来检测字段是否已提交。我们将以下内容添加到我们的插件文件（或模板）中：

```
function add_new_blog_field($blog_id, $user_id, $domain, $path, $site_id, $meta) {

    // Make sure the user can perform this action and the request came from the correct page.

    switch_to_blog($blog_id);

    // Use a default value here if the field was not submitted.
    $new_field_value = 'default';

    if ( !empty($_POST['blog']['new_field']) )
        $new_field_value = $_POST['blog']['new_field'];

    // save option into the database
    update_option( 'new_field', $new_field_value);

    restore_current_blog();
}

add_action( 'wpmu_new_blog', 'add_new_blog_field' ); 
```

至于在页面上显示字段，您可以使用 JavaScript 方法。您添加一个 javascript 文件，仅添加到“添加新站点”页面，然后在页面的 onLoad 中将字段插入页面上的正确位置。您应该添加一个名为“blog[new_field]”的输入字段。我们创建以下 JavaScript 文件，该文件一旦加载，就会向“添加新站点”页面添加一个新字段：

```
(function($) {
    $(document).ready(function() {
        $('<tr class="form-field form-required"></tr>').append(
            $('<th scope="row">New field</th>')
        ).append(
            $('<td></td>').append(
                $('<input class="regular-text" type="text" title="New Field" name="blog[new_field]">')
            ).append(
                $('<p>Explanation about your new field</p>')
            )
        ).insertAfter('#wpbody-content table tr:eq(2)');
    });
})(jQuery); 
```

现在剩下要做的就是将此文件包含到“添加新站点”页面中，方法是将其添加到您的插件文件中：

```
// Only add the script for the page site-new.php (the page hook).
add_action( "admin_print_scripts-site-new.php", 'my_admin_scripts' );

function my_admin_scripts() {
    wp_register_script('yourScript', plugins_url('js/yourScript.js', __FILE__));
    wp_enqueue_script('yourScript');
} 
```

根据您的需要，进一步的建议可能是：使用[add_settings_field](http://phpxref.ftwr.co.uk/wordpress/wp-admin/includes/template.php.html#add_settings_field)在您的常规设置页面中添加一个输入字段，以便用户稍后可以编辑它（并且可能仅当它是该字段的默认设置时）。“您以后不能更改此字段”的方法。

我希望这是您需要的帮助。

# c++ - boost::object_pool 构造函数参数数量

> ID：10339054
> 
> 赞同：2
> 
> 时间：2012-04-26T18:13:09.317
> 
> 标签：c++, memory-management, boost-pool

我正在使用来自 boost pool 库的 boost::object_pool 接口。默认情况下 boost::object_pool::construct 最多可以使用三个参数。我需要传递 13 个参数来构造其中一个对象。[我按照此处](http://www.boost.org/doc/libs/1_42_0/libs/pool/doc/implementation/pool_construct.html)的建议在文件[detail/pool_construct.m4](http://www.boost.org/doc/libs/1_47_0/boost/pool/detail/pool_construct.m4)中将 m4 宏 NumberOfArguments（可以传递给 boost::object_pool::construct 的最大参数）定义为 13 。最后文件看起来像

```
m4_dnl
m4_dnl Copyright (C) 2000 Stephen Cleary
m4_dnl
m4_dnl Distributed under the Boost Software License, Version 1.0\. (See accompany-
m4_dnl ing file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
m4_dnl
m4_dnl See http://www.boost.org for updates, documentation, and revision history.
m4_dnl
m4_dnl
m4_dnl
m4_dnl Avoid the use of any m4_* identifiers in this header file,
m4_dnl  as that may cause incompatibility problems with future
m4_dnl  versions of m4.
m4_dnl
m4_dnl This is a normal header file, except that lines starting
m4_dnl  with `m4_dnl' will be stripped, TBA_FOR
m4_dnl  macros will be replaced with repeated text, and text in
m4_dnl  single quotes (`...') will have their single quotes
m4_dnl  stripped.
m4_dnl
m4_define(`NumberOfArguments', 13)
m4_dnl
m4_dnl Check to make sure NumberOfArguments was defined.  If it's not defined,
m4_dnl  default to 3
m4_dnl
m4_ifdef(`NumberOfArguments', , `m4_errprint(m4___file__:m4___line__`: NumberOfArguments is not defined; defaulting to 3
')m4_define(`NumberOfArguments', 3)')m4_dnl
m4_ifelse(NumberOfArguments, , `m4_errprint(m4___file__:m4___line__`: NumberOfArguments is defined to be empty; defaulting to 3
')m4_define(`NumberOfArguments', 3)')m4_dnl
m4_dnl
m4_dnl Check to make sure NumberOfArguments >= 1\.  If it's not, then fatal error.
m4_dnl
m4_ifelse(m4_eval(NumberOfArguments < 1), 1, `m4_errprint(m4___file__:m4___line__`: NumberOfArguments ('NumberOfArguments`) is less than 1
')m4_m4exit(1)')m4_dnl
m4_dnl
m4_dnl Include the BOOST_M4_FOR macro definition
m4_dnl
m4_include(`for.m4')`'m4_dnl
m4_dnl
m4_dnl Begin the generated file.
m4_dnl
// Copyright (C) 2000 Stephen Cleary
//
// Distributed under the Boost Software License, Version 1.0\. (See accompany-
// ing file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org for updates, documentation, and revision history.

m4_dnl These warnings apply to the file generated from this file.
m4_dnl Of course, you may freely edit this file.
// This file was AUTOMATICALLY GENERATED from "m4___file__"
//  Do NOT include directly!
//  Do NOT edit!

m4_dnl
m4_dnl First we define a simple 'cv_qual' macro which takes a number, either
m4_dnl   0, 1, 2, or 3, and determines cv-qualification.
m4_dnl
m4_define(`cv_qual',
`m4_ifelse($1, 0, `',
`m4_ifelse($1, 1, `const ',
`m4_ifelse($1, 2, `volatile ',
`m4_ifelse($1, 3, `const volatile ',
`m4_errprint(m4___file__:m4___line__: `Boost m4 script: cv-determiner: Not 0, 1, 2, or 3 (was '$1`)')'
)')')')')m4_dnl
m4_dnl
m4_dnl Next we go through the actual loop.  For each number of arguments from
m4_dnl   1 to NumberOfArguments, we create a template function that takes that
m4_dnl   many template arguments, and also generate all cv-qualified permutations
m4_dnl   of that function.
m4_dnl
BOOST_M4_FOR(N, 1, NumberOfArguments + 1,
`BOOST_M4_FOR(cv, 0, m4_eval(4 ** N),
  `template <BOOST_M4_FOR(i, 0, N, `typename T`'i', `, ')>
element_type * construct(BOOST_M4_FOR(i, 0, N,
    `cv_qual(m4_eval((cv >> (i * 2)) % 4))T`'i & a`'i', `, '))
{
  element_type * const ret = (malloc)();
  if (ret == 0)
    return ret;
  try { new (ret) element_type(BOOST_M4_FOR(i, 0, N, `a`'i', `, ')); }
  catch (...) { (free)(ret); throw; }
  return ret;
}
')') 
```

现在我收到错误消息，例如

```
 'boost::object_pool<T>::construct' : function does not take 3 arguments
    'boost::object_pool<T>::construct' : function does not take 1 arguments
    'boost::object_pool<T>::construct' : function does not take 13 arguments 
```

有趣的是，即使恢复 detail/pool_construct.m4 中的更改也没有修复它，现在即使使用原始文件，我也无法将任意数量的参数传递给 boost::object_pool::construct。我正在使用 Visual C++ 2010 express。任何帮助将不胜感激。

谢谢

# wix - WiX：在没有 CustomAction 的情况下从 Fragment 中提取 CustomTable

> ID：10339055
> 
> 赞同：2
> 
> 时间：2012-04-26T18:13:11.727
> 
> 标签：wix, fragment

我有一个定义的自定义表`<Fragment>`，我想链接到主**.wxs**文件。我的问题与[此问题](https://stackoverflow.com/questions/6344608/reference-custom-table-in-wix-fragment-file)类似，但我的片段没有`<CustomAction>`可引用的标签，也没有`<CustomTableRef>`可在主文件中使用的标签。

是唯一的方法来拉入一个`<Fragment>`没有能力标签的标签来注入一个*可以*'d'`<...Ref>`的虚拟标签吗？- 例如，具有“永不安装”的条件，或者从未计划运行（或完全良性的事情，例如将属性设置为）？*`Ref``<Component>``<CustomAction>``Foo``""`*

 *我正在寻找推荐的最佳实践。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:32:21.627

在您的片段中，您可以像这样创建一个属性：

```
<Property Id="IncludeMyFragment" Value="1" /> 
```

然后在源代码中引用该片段，如下所示：

```
<PropertyRef Id="IncludeMyFragment"/> 
```

那应该拉入片段的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:20:13.533

使用引用时，会消耗整个片段。您是否将自定义表定义为仅作为有关 MSI 的文档/元数据，或者您是否实际在数据驱动的自定义操作中使用它？通常，我会在单个片段中定义自定义操作和自定义表架构，以便当有人引用自定义操作时，他们可以获得支持的基础设施。然后其他片段可以包含所述自定义表的实际数据（特定于实现）。*

# visual-studio-2010 - Windows7 上 Mercurial / TortoiseHG 中奇怪的区分大小写的目录名称行为

> ID：10339059
> 
> 赞同：2
> 
> 时间：2012-04-26T18:14:06.857
> 
> 标签：visual-studio-2010, mercurial, tortoisehg, visualhg

我有一个 TortoiseHG (2.3.2) 存储库，在我的 Windows7 Ultimate（32 位）机器上包含一个名为“cv2”的根目录。当我在“cv2”的不同子目录中添加新文件时，TortoiseHG 将“cv2”显示为“cv2”或“CV2”，具体取决于目录。

例如，如果我将一个名为“tom.cs”的文件添加到以下目录，我会在 TortoiseHG 中得到以下结果：

```
Physical Directory                 TortoiseHG Filename
...\cv2\Common\tom.cs              cv2/Common/tom.cs
...\cv2\tom.cs                     CV2/tom.cs
...\cv2\WinClient\tom.cs           cv2/WinClient/tom.cs
...\cv2\WinService\tom.cs          CV2/WinService/tom.cs 
```

我不知道这是什么时候开始的，但这意味着我现在已经提交到“cv2”和“CV2”，导致存储库中有两个单独的目录（我猜我对此无能为力）。

存储库包含一个解决方案，在子目录中有 3 个项目（“cv2”是其中之一，还有“cp2”和“NotificationService”）。我刚刚发现解决方案文件的目录名称是“CV2”而不是“cv2”。现在已经改变了，因为它阻止了“Diff”在 Visual Studio 中的工作......但是从一开始就是这样，并且自初始提交以来就没有改变。不幸的是，我不记得当时我是否重命名了 Windows 目录……我可能有。

对于“CV2”或“cv2”这取决于它是哪个目录的差异，我有什么办法吗？我尝试通过命令提示符重命名 Windows 目录但没有成功。我的印象是 Mercurial 在 Windows 机器上运行时忽略了区分大小写，但我想我被误导了。

我是该项目中唯一的开发人员，因此不会有任何更改弄乱其他任何人的危险。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:32:54.523

是的，Mercurial 在不区分大小写的文件系统上会忽略文件名大小写，但它仍然必须在存储库中存储带有*某些*大小写的文件名。

使用 Mercurial 2.2-rc（有关如何在 Windows 中运行候选版本的说明，请参阅[wiki](http://mercurial.selenic.com/wiki/HackableMercurial)），您将能够运行

```
hg rename CV2/tom.cs cv2/tom.cs 
```

为下一次提交安排“重命名”。该文件不会在磁盘上移动——因为它已经在不区分大小写的文件系统的正确位置——但重命名将记录在历史记录中，并且新的签出将在磁盘上具有正确的大小写。

wiki 中有[更多说明](http://mercurial.selenic.com/wiki/FixingCaseCollisions)，包括您将来可以用来保护自己的[caseguard 扩展。](http://mercurial.selenic.com/wiki/CaseFoldExtension)然而，这主要应该通过 Mercurial 2.2 来解决，与以前的版本相比，它将有更多的代码来处理案例折叠问题。

# android - android中是否存在“库/模板”iphone xcode功能？

> ID：10339063
> 
> 赞同：0
> 
> 时间：2012-04-26T18:14:23.333
> 
> 标签：android, templates, template-engine

我不是 iPhone 开发人员，所以我可能没有使用正确的术语。但我经常收到需要移植到 Android 的 iPhone 项目。

现在，我注意到 iPhone 开发人员在开发许多类似项目时使用的一个非常好的功能。他们创建了一个特定的模板或骨架项目，他们在其中保存文件、图像，谁知道还有什么。

然后当他们想创建一个类似的项目时，他们只是使用相同的结构、文件等。

我看到了在新项目中仅使用几个文件创建新项目并重用此模板项目中的所有其他文件的案例。

再次，如果我在描述这个 iPhone 功能时听起来很蹩脚，我深表歉意，但我不是 iPhone 开发人员，我只描述了我能看到的（视觉印象）。

Android中是否存在这样的事情？任何人都可以给我一些链接或告诉我要学习什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:26:34.237

根据您的描述，Android 中的近似等价物将是一个 Android 库项目。它允许您将源代码和资源（图像、布局等）保存在一个公共位置，并在项目之间重用它们。

您可以阅读更多关于：

*   [一般图书馆项目](http://developer.android.com/guide/developing/projects/index.html#LibraryProjects)
*   [在 Eclipse 中处理库项目](http://developer.android.com/guide/developing/projects/projects-eclipse.html#SettingUpLibraryProject)
*   [使用 Eclipse 之外的库项目](http://developer.android.com/guide/developing/projects/projects-cmdline.html#SettingUpLibraryProject)

# javascript - script.aculo.us 用于从指定 div 获取文本的滑块

> ID：10339065
> 
> 赞同：0
> 
> 时间：2012-04-26T18:14:45.657
> 
> 标签：javascript, ajax, slider, scriptaculous

我的朋友需要一些 JavaScript 方面的帮助，因为我知道一点（很少），所以我决定帮助他。不过，我在这个上画了一个空白。

使用 script.aculo.us 创建一个多滑块。我有点让滑动手柄工作了。他们左右移动！无论如何，当每个手柄就位时，我需要有一个预览字段显示与两个手柄位置相对应的文本。

他给我提供了一个演示视频：

[http://www.youtube.com/watch?feature=player_embedded&v=D0V4P8q5G-E](http://www.youtube.com/watch?feature=player_embedded&v=D0V4P8q5G-E)

然后他给了我一个带有 HTML 和 CSS 的压缩包。我从 script.aculo.us 网站获得了 JavaScript 文件。

无论如何，这是我到目前为止所拥有的：

[http://dnescripts.com/slider/](http://dnescripts.com/slider/)

任何人都可以帮助或指出我正确的方向，让它像演示视频中看到的那样运行吗？这将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:10:22.167

这看起来很酷。到目前为止，一切都很好！

您需要将示例文本中的每个字符包装在 a 中`<SPAN>`，然后计算每个 SPAN 的 x 位置（在 LOAD 处运行并将值放入数组中）。然后您需要将指针位置与字符的 x 位置进行比较。您需要将它们四舍五入以“捕捉”到下一个位置。从那里你应该知道开始和结束的跨度，以及中间的相关文本。

使用等距字体会更容易做到这一点。然后，您可以为滑块使用预定义的范围和停止。

# iphone - 无法运行 xcodeproj

> ID：10339066
> 
> 赞同：0
> 
> 时间：2012-04-26T18:14:47.570
> 
> 标签：iphone, objective-c, ios, xcode, ipad

所以我试图在[这里](https://github.com/gmoledina/GMGridView)运行示例 xcode 项目。但是，我似乎无法运行它。当我按下运行它只是说构建成功并且没有启动应用程序？知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:21:01.433

GMGridView 项目构建的是一个库，而不是一个应用程序，所以没有什么可以运行的。还包括一个构建应用程序的示例项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:22:24.780

只需将目标从 GridView 更改为 GridViewExample（就在运行停止按钮旁边）。享受

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T18:23:40.433

运行 GMGridViewExample.xcodeproj，其他项目只是构建一个静态库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T18:29:12.887

你以为你是谁，只是要求我们在我们的...上运行随机代码……哦，好吧，就这一次。该示例为我运行。请务必将其设置为在模拟器上运行。

# ios - 访问属性时损坏 NSManagedObject 派生对象

> ID：10339067
> 
> 赞同：2
> 
> 时间：2012-04-26T18:14:53.630
> 
> 标签：ios, core-data, nsmanagedobject

我有一个类，它在某些时候通过 Core Data fetch 获取一堆数据，然后将在 XCode 中以通常的 Core Data 方式创建的对象插入`NSManagedObject`到`NSMutableSet`. 根据事情的进展情况，其中一些对象可能最终会出现在其他几个集合中。到现在为止还挺好。

但随后会发生以下情况：

```
NSMutableArray* anArray = [NSMutableArray alloc] init;
[currentResults minus:previousResults]; // both are NSMutableSets
for(MyObject* obj in currentResults)
{
   [anArray addObject:[createAnnoFromMyObject:obj]]; // nastiness happens here
} 
```

`createAnnoFromMyObj:`所做的只是将数据拉出并`obj`返回一个实现`MKAnnotation`.

问题是，尽管我得到了一组可用的注释，`currentResults`但 ,`previousResults`和任何其他引用了`MyObject`被触摸的任何 s 的对象`createAnnoFromMyObject:`最终都被丢弃了。

通过破坏我的意思是尝试访问它们会导致异常

```
-[MyObject beginningOfDocument]: unrecognized selector sent to instance... 
```

当尝试使用该`po`命令在调试器窗格中查看任何这些集合时，也会发生同样的情况。

我们尝试`MyObject`在 Core Data 中重新生成，但没有成功。谷歌上很少提到这个`beginningOfDocument`选择器，我们不知道有什么问题。尽管我们有一个可能会消除此问题的解决方法，但很高兴知道发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:04:29.007

我还遇到了这个特定的无法识别的选择器问题——在 iOS5.x`beginningOfDocument`中我的（子类）实例上调用了这个问题。`NSManagedObject`不过，这个问题似乎在 iOS6 中得到了解决。我还证实了 NSZombies 没有给我任何东西，尽管它看起来确实是正确的直觉。

在查找我们的托管对象期间抛出了无法识别的选择器异常`valueForKey`，因此值得查看堆栈跟踪，看看这是否也是为您抛出异常的地方。

在我们的例子中，“损坏的”键是`fullText`，我们的属性之一的名称。改名就解决了这个问题。我的猜测是该名称导致底层 sqlite 查询出现错误（我不认为全文是关键字，但可能是在 sqlite 中进行全文搜索？），也许查询参数在 iOS6 中得到更好的清理。

您可以通过这个小技巧找出哪些键/属性名称被破坏：`valueForKey:`暂时将您的方法覆盖到 NSLog，然后调用超类版本并返回它。即使文档说不要覆盖它（我们只是暂时找到了有问题的属性），这没关系，因为我们只是覆盖然后调用超类实现。

```
// Don't forget to remove me after the bug is fixed!
- (id)valueForKey:(NSString *)key {
    NSLog(@"Finding value for key: %@", key);
    return [super valueForKey:key];
} 
```

然后当你再次运行时，你会看到崩溃前的最后一次调用，`valueForKey:`并知道哪个属性名被破坏了。

如果您仍然无法确定哪个是不成功的查找，您可以使用更详细的方法：

```
// Don't forget to remove me after the bug is fixed!
- (id)valueForKey:(NSString *)key {
    NSLog(@"Finding value for key: %@", key);
    id retVal = [super valueForKey:key];
    NSLog(@"Success for key: %@", key); // or print retVal for fun
    return retVal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:58:11.443

看起来您的 MyObject 正在被释放。我猜你在这种情况下使用的是 ARC，并且你没有任何东西持有 MyObject 对象（检查对象所在的 NSSets 是否也以某种方式被持有）。这意味着它将在当前运行循环结束时释放，您将看到您遇到的错误。

你可以运行 Zombies in Instruments 来证明这个理论。

# machine-learning - 自动/机器学习工具从文本中提取类别/上下文

> ID：10339068
> 
> 赞同：0
> 
> 时间：2012-04-26T18:14:57.497
> 
> 标签：machine-learning, categories

我正在寻找一种可以被训练从文本输入中提取上下文/类别的工具。

例如，在训练后，该工具应该能够识别出... “Dell Inspiron Corei3 laptop Bangalore best price”与“Computers”类别下的“Laptop”相关 “Tata Indicom Photon plus Data Card”与“Data Card”相关“在“计算机”类别下......与“摄影”无关！

谢谢， 阿文德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:20:51.910

像 Apache Mahout 这样的东西？我从未亲自使用过它，但不久前在 IBM developerworks 上读到过它，它看起来很适合您的问题。

# html - 防止在 Chrome 中突出显示 div

> ID：10339072
> 
> 赞同：1
> 
> 时间：2012-04-26T18:15:06.513
> 
> 标签：html, css

我正在使用以下内容显示视频，使用视频标签嵌入视频并具有 Flash 后备。在 Chrome 中，当我单击播放视频时，它会在橙色框中勾勒出视频。

```
<div id="slide0" style="display:block; -webkit-user-select: none; -moz-user-select: none; -o-user-select: none; -khtml-user-select: none; user-select: none; width: 960px; height: 456px;">
    <video id="video0" poster="poster.jpg" controls="controls" preload="auto" width="960" height="453">
        <source type="video/mp4" src="video.mp4" /><source type="video/webm" src="video.webm" />
    <object width="960" height="453" type="application/x-shockwave-flash" data="resources/videos/flashmediaelement.swf">
        <param name="movie" value="resources/videos/flashmediaelement.swf" />
        <param name="flashvars" value="controls=true&amp;file=video.mp4" />
    </object>
    </video>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:19:48.667

将 css 属性设置`outline`为`none`您的 div （或视频，我不知道概述了哪个元素）样式属性或样式表。

```
#slide0,#video0
{
   outline: none;
} 
```

# javascript - javascript中的单选按钮验证

> ID：10339073
> 
> 赞同：13
> 
> 时间：2012-04-26T18:15:10.330
> 
> 标签：javascript, validation, client-side-validation

需要验证单选按钮输入，即当按下提交按钮并且没有选择单选按钮时，它会提醒用户说“请选择一个复选框”，如果已选择单选按钮，则只需提交表单，需要没有警报。

只能为此使用 HTML CSS 和 JavaScript，我知道它在 jquery 中容易 1000 倍，但遗憾的是我不能使用它。

而且我知道我的 HTML 无效，但除非它直接影响我当前的问题，否则我稍后会处理它。

```
<form name="form1" action="#" onsubmit="return validateForm()" method="post"> 

    First time visitor?:<br/>
            <label for="s1">Yes</label>
            <input type="radio" id="1" name="yesno" value="1"/>
            <br/>
            <label for="s2">No</label>
            <input type="radio" id="1" name="yesno" value="2"/>

            <br/>       

    <input type="submit" value="Submit"><br/>
    </form> 
```

非常感谢任何指针，谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-26T18:25:38.710

第一：如果你知道你的代码不正确，你应该在做任何事情之前修复它！

你可以这样做：

```
function validateForm() {
    var radios = document.getElementsByName("yesno");
    var formValid = false;

    var i = 0;
    while (!formValid && i < radios.length) {
        if (radios[i].checked) formValid = true;
        i++;        
    }

    if (!formValid) alert("Must check some option!");
    return formValid;
}​ 
```

在行动中看到它：http: [//jsfiddle.net/FhgQS/](http://jsfiddle.net/FhgQS/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-23T20:11:32.750

使用 javascript 的完整验证示例：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Radio button: full validation example with javascript</title>
        <script>
            function send() {
                var genders = document.getElementsByName("gender");
                if (genders[0].checked == true) {
                    alert("Your gender is male");
                } else if (genders[1].checked == true) {
                    alert("Your gender is female");
                } else {
                    // no checked
                    var msg = '<span style="color:red;">You must select your gender!</span><br /><br />';
                    document.getElementById('msg').innerHTML = msg;
                    return false;
                }
                return true;
            }

            function reset_msg() {
                document.getElementById('msg').innerHTML = '';
            }
        </script>
    </head>
    <body>
        <form action="" method="POST">
            <label>Gender:</label>
            <br />
            <input type="radio" name="gender" value="m" onclick="reset_msg();" />Male
            <br />
            <input type="radio" name="gender" value="f" onclick="reset_msg();" />Female
            <br />
            <div id="msg"></div>
            <input type="submit" value="send>>" onclick="return send();" />
        </form>
    </body>
</html> 
```

问候，

费尔南多

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-09T06:35:10.320

**你可以做这样的事情**

```
var option=document.getElementsByName('yesno');

if (!(option[0].checked || option[1].checked)) {
    alert("Please Select Your Gender");
    return false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-14T11:44:40.730

```
<form action="" method="post" name="register_form" id="register_form" enctype="multipart/form-data">

    <div class="text-input">
        <label>Gender: </label>
        <input class="form-control" type="radio" name="gender" id="male" value="male" />
        <label for="male">Male</label>
        <input class="form-control" type="radio" name="gender" id="female" value="female" />
        <label for="female">Female</label>
    </div>
    <div class="text-input" align="center">
        <input type="submit" name="register" value="Submit" onclick="return radioValidation();" />
    </div>

</form>

<script type="text/javascript">
    function radioValidation(){

        var gender = document.getElementsByName('gender');
        var genValue = false;

        for(var i=0; i<gender.length;i++){
            if(gender[i].checked == true){
                genValue = true;    
            }
        }
        if(!genValue){
            alert("Please Choose the gender");
            return false;
        }

    }
</script> 
```

来源：[http ://chandreshrana.blogspot.in/2016/11/radio-button-validation-in-javascript.html](http://chandreshrana.blogspot.in/2016/11/radio-button-validation-in-javascript.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T18:21:37.040

```
document.forms[ 'forms1' ].onsubmit = function() {
    return [].some.call( this.elements, function( el ) {
        return el.type === 'radio' ? el.checked : false
    } )
} 
```

只是我脑子里的东西。不确定代码是否正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-29T16:16:34.907

除了上面的 Javascript 解决方案之外，您还可以通过在标记中根据需要标记单选按钮来使用 HTML 5 解决方案。这将消除对任何 Javascript 的需求，让浏览器为您完成工作。

请参阅[HTML5：如何将“required”属性与“radio”输入字段一起使用](https://stackoverflow.com/questions/8287779/html5-how-to-use-the-required-attribute-with-a-radio-input-field)，以了解有关如何做好这一点的更多信息。

# c++ - 合并两个 C++ 包

> ID：10339074
> 
> 赞同：3
> 
> 时间：2012-04-26T18:15:11.203
> 
> 标签：c++, profiling, package, packaging

我有两个 C++ 包 A 和 B，其中 A 依赖于 B。我想通过让 A 吞下 B 代码的最小部分来打破这种依赖关系，这样 B 就可以被完全抛弃。

有人对我如何分析包 A 以准确找出我需要从 B 引入的类/函数等有什么建议吗？

编辑：我只是删除了包 B 并经历了（很多）编译 A 的循环，从 B 复制文件，相应地更新了 Makefile.am。现在我很确定我已经用比需要的更多的东西来膨胀包 A。我怎样才能找到从未在其产生的可执行文件/库中使用的 A` 代码部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:48:11.810

我认为有三种可能的行动方式：

1.  真正只导入需要的东西：撤消你所做的，然后再做一次，但这次不要从 B 复制整个文件，而只是复制编译器告诉你丢失的单个函数。

2.  根据您目前的情况，让一些工具为您分析代码（请参阅[寻找免费的源代码分析器（功能依赖树）](https://stackoverflow.com/questions/1408908/looking-for-a-free-source-code-analyzer-function-depedency-tree)和[寻找免费的源代码分析器（功能依赖树）](https://stackoverflow.com/questions/1408908/looking-for-a-free-source-code-analyzer-function-depedency-tree)），或者使用所有 A并运行代码覆盖率分析。

3.  注释掉从 B 复制的源中的函数（而不是在标题中）。现在您的链接器将抱怨任何缺少的功能。取消注释这些，删除其余部分，包括它们在标题中的声明。这是与第一种相反的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:44:45.983

也许 objdump 会给你一些有用的信息。在二进制文件（objdump -t）上使用它，它应该能够显示有关导入函数的一些有用信息。

# c++ - 在 C++ 中使用 C 标志枚举

> ID：10339076
> 
> 赞同：13
> 
> 时间：2012-04-26T18:15:15.000
> 
> 标签：c++, c, enums

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-26T18:20:34.500

您需要将`int`s 强制转换为 C++ 中的枚举，但您可以在自定义`OR`运算符中隐藏强制转换：

```
CEnumType operator|(CEnumType lhs, CEnumType rhs) {
    return (CEnumType) ((int)lhs| (int)rhs);
} 
```

有了这个运算符，您就可以编写您的原始

```
do_something(C_ENUM_VALUE_APPLE | C_ENUM_VALUE_BANANA); 
```

它将毫无问题地编译和运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T18:18:59.850

对于枚举，C++ 比 C 有更严格的规则。调用时需要将值转换为枚举类型：

```
do_something((CEnumType)(C_ENUM_VALUE_APPLE | C_ENUM_VALUE_BANANA)); 
```

`int`或者，如果你想避免每次调用它时都编写强制转换，你可以编写一个包装函数来为你进行强制转换：

```
void do_something_wrapper(int types)
{
    do_something((CEnumType)types);
}
...
do_something_wrapper(C_ENUM_VALUE_APPLE | C_ENUM_VALUE_BANANA); 
```

虽然我不知道我是否想看看当你用香蕉交叉苹果时你会得到什么......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T18:20:19.583

在按位运算的情况下，表达式计算为原始类型，即`int`,`long`等。但是，您的函数采用非原始类型 ( `CEnumType`)。我知道绕过这个的唯一方法是强制转换表达式。例如：

```
do_something((CEnumType) (C_ENUM_VALUE_APPLE | C_ENUM_VALUE_BANANA)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-30T01:54:38.023

CEnumType A;

A = (CEnumType)(A | C_ENUM_VALUE_APPLE);

你也可以这样使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T18:18:38.213

通过 or-ing 两个枚举值，您正在创建一个无效值（0x3 不在枚举 CEnumType 中）。枚举不是位域。如果你想要一个位域，定义一个。

如果您想强制它通过，您可以强制转换该值，但这可能会让一些仅指望能够获取枚举值的代码感到惊讶。

```
do_something((CEnumType)(C_ENUM_VALUE_APPLE | C_ENUM_VALUE_BANANA)); 
```

# jquery - jQM：获取活动页面的索引

> ID：10339078
> 
> 赞同：0
> 
> 时间：2012-04-26T18:15:17.170
> 
> 标签：jquery, jquery-mobile

如果我有这样的结构：

```
<body>
 <div data-role="page" data-dom-cache="true" id="foo">...</div>
 <div data-role="page" data-dom-cache="true" id="bar">...</div>
 <div data-role="page" data-dom-cache="true" id="baz">...</div>
</body> 
```

如何获得 bar 在这一系列 div 中的位置？在这种情况下，它应该返回 2。

我正在使用它来尝试获取 jquery mobile 中当前页面的索引。现在我正在做：

```
$( '#<%=@page_id%>' ).bind( 'pageshow',function(event){
    alert('current page = '+$.mobile.activePage.index())
}) 
```

但这向我显示第一页的 index=1，第二页的 index=3，然后从那里线性增加到 4,5...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:15:57.997

使用`index()`：

```
var index = $('#bar').index(); 
```

这将返回元素在其兄弟元素中的索引位置，或者您可以传递一个选择器：

```
var index = $('#bar').index(selector); 
```

其中jQuery将返回`$('#bar')`由传递给index的选择器返回的匹配元素中的索引位置。

请注意，JavaScript 适用于从零开始的数组；所以上面的（在第一个）将返回`1`（不是`2`）。如果你必须`2`记得明确`+ 1`：

```
var index = $('#bar').index() + 1; 
```

但是，当使用该`index`变量（可能与`eq()`）时，请记住针对该添加进行调整，否则事情可能会意外中断。或者，至少，以不同的方式工作。

参考：

*   [`index()`](http://api.jquery.com/index/).

# java - 使用公共电子邮件库发送电子邮件失败

> ID：10339080
> 
> 赞同：0
> 
> 时间：2012-04-26T18:15:17.397
> 
> 标签：java, email

```
 try {
        Email email = new SimpleEmail();
        email.setHostName("smtp.googlemail.com");
        email.setSmtpPort(587);
        email.setAuthenticator(new DefaultAuthenticator("***@gmail.com", "*********"));
        email.setSSL(true);
        email.setFrom("*******@gmail.com");
        email.setSubject("TestMail");
        email.setMsg("This is a test mail ... :-)");
        email.addTo("*****@gmail.com");
        email.setTLS(true);
        email.send();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

这是我使用的代码，这是打印堆栈跟踪

```
org.apache.commons.mail.EmailException: Sending the email to the following server failed : smtp.googlemail.com:587
    at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1242)
    at org.apache.commons.mail.Email.send(Email.java:1267)
    at Main.main(Main.java:28)
Caused by: javax.mail.AuthenticationFailedException
    at javax.mail.Service.connect(Service.java:306)
    at javax.mail.Service.connect(Service.java:156)
    at javax.mail.Service.connect(Service.java:105)
    at javax.mail.Transport.send0(Transport.java:168)
    at javax.mail.Transport.send(Transport.java:98)
    at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1232) 
```

有人可以告诉我我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:18:11.183

你试过[端口 465](http://support.google.com/mail/bin/answer.py?hl=en&answer=78799)吗？

并使用[email.setSSLOnConnect(true);](http://commons.apache.org/email/userguide.html) 而不是 setSSL 和 setTLS ？

# hibernate - 如何打包 hibernate-memcached 以在 JBoss 7 中使用它

> ID：10339081
> 
> 赞同：2
> 
> 时间：2012-04-26T18:15:27.647
> 
> 标签：hibernate, module, memcached, jboss7.x

我一直在尝试在 JBOSS AS 7 上设置 Java EE 应用程序以使用 hibernate-memcached 作为二级缓存。目标是能够在 JPA 级别进行扩展并使用集群缓存。我尝试手动将 jar 放入 jboss 模块中，但出现此错误。以下是其中一些错误：

```
Caused by: org.hibernate.cache.CacheException: could not instantiate CacheProvider [com.googlecode.hibernate.memcached.MemcachedCacheProvider]
    at org.hibernate.cache.internal.bridge.RegionFactoryCacheProviderBridge.<init>(RegionFactoryCacheProviderBridge.java:68)
    ... 24 more
Caused by: java.lang.ClassNotFoundException: com.googlecode.hibernate.memcached.MemcachedCacheProvider from [Module "org.hibernate:main" from local module loader @1839bb3 (roots: C:\jboss-7.0.0\modules)]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:358)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:330)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:307)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:101)
    at java.lang.Class.forName0(Native Method) [:1.7.0_03]
    at java.lang.Class.forName(Class.java:186) [:1.7.0_03]
    at org.hibernate.internal.util.ReflectHelper.classForName(ReflectHelper.java:191)
    at org.hibernate.cache.internal.bridge.RegionFactoryCacheProviderBridge.<init>(RegionFactoryCacheProviderBridge.java:65)
    ... 24 more 
```

我该如何解决这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:50:29.850

我想到了几种方法：

*   定义一个新的 hibernate-memcached 模块，并在主 hibernate 模块中添加一个依赖项；或者

*   只需将 hibernate-memcached JAR 添加到主 hibernate 模块并将它们作为资源根添加到`module.xml`.

有关如何创建和修改模块的详细信息，请参阅[AS7 中的类加载和模块文档](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7)。

# objective-c - NSXMLParser 忽略节点

> ID：10339083
> 
> 赞同：1
> 
> 时间：2012-04-26T18:15:50.093
> 
> 标签：objective-c, ios, nsxmlparser

我在要阅读的 xml 中有以下操作。但我只想阅读`<goodactions>`和`<niceactions>`。我需要在`didStartElement`委托函数中放置标志吗？

```
<goodactions>
  <action name=\"play\" id=\"0\"/>
  <action name=\"eat\" id=\"1\" />
  <action name=\"sleep\" id=\"2\" />
  <action name=\"study\" id=\"3\"/>
</goodactions>
<badactions>
  <action name=\"smoke\" id=\"0\"/>
  <action name=\"watch_tv\" id=\"1\"/>
</badactions>
<niceactions>
  <action name=\"cycling\" id=\"0\"/>
  <action name=\"swimming\" id=\"1\"/>
</niceactions> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:49:27.607

也许你在问别的问题，但一个简单的布尔值可能就足够了。

```
BOOL ignoreElement; 

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ([elementName isEqualToString:@"badactions"]) {

        self.ignoreElement = YES; 

    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

    if (!self.ignoreElement) {
        // data from other elements
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if ([elementName isEqualToString:@"badactions"]) {

        self.ignoreElement = NO; 

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:47:09.607

是的，我就是这样做的。当您的委托`-parser:didStartElement::::`方法被调用时，如果元素名称为“badactions”，请设置一个标志以忽略所有内容。`-parser:didEndElement:`如果元素名称为“badactions”，则重置标志。像这样的东西：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
    if ([elementName isEqualToString:@"badactions"])
    {
        _ignoreElement = YES;
        return;
    }
    if (!_ignoreElement)
    {
         // handle other elements here
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    // Reset if we were ignoring a badactions element
    if (([elementName isEqualToString:@"badactions"]) && (_ignoreElement))
    {
         _ignoreElement = NO;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-28T14:32:09.433

忽略特定节点或分支的最简单解决方案是创建自己的 XPath 类 XML 路径并维护元素堆栈。

因此，每当您解析新元素时，您都会将节点推送到堆栈上，并更新当前的 XML 路径。然后，当您偶然发现关闭标签时，您只需从堆栈中弹出元素。

但是，您的堆栈可能会不一致，因为您可能想忽略一些分支，您始终可以保留并与结束标记的 XMLPath 和堆栈上的最后一个节点进行比较。

在下面给定的示例中，我使用点分隔符存储 XML 路径。它便宜且易于解析和比较。

作为这种方法的一个好处，您可以实现一些简单的比较算法并忽略或匹配 XML 结构中间的特定分支，但更深入地挖掘和解析特定节点。

拥有一堆元素是一个巨大的好处，因为如果您需要使用位于层次结构深处的一些信息来填充它们，您总是可以引用相关节点。

```
// Base node class
@interface MYNode : NSObject

@property NSString* XMLPath;

@end

// Some custom node subclass
@interface MYRootNode : MYNode @end

// Some other custom node subclass
@interface MYBlockNode : MYNode @end

// NSXMLParserDelegate interface
@interface MYXMLParserDelegate : NSObject<NSXMLParserDelegate>

@property NSMutableArray* elementStack;
@property NSString* XMLPath;
@property MYRootNode* rootNode;

@end

// NSXMLParserDelegate implementation
@implementation MYXMLParserDelegate

#pragma mark - Initializer

- (id)init {
    if(self = [super init]) {
        self.elementStack = [NSMutableArray new];
    }
    return self;
}

#pragma mark - XMLPath manipulation methods

- (void)addXMLPathComponent:(NSString*)component {
    NSString* newXMLPath;

    if(self.XMLPath.length) {
        newXMLPath = [self.XMLPath stringByAppendingFormat:@".%@", component];
    } else {
        newXMLPath = component;
    }

    self.XMLPath = newXMLPath;
}

- (void)removeLastXMLPathComponent {
    NSRange range = [self.XMLPath rangeOfString:@"." options:NSBackwardsSearch];
    if(range.location != NSNotFound) {
        self.XMLPath = [self.XMLPath substringToIndex:range.location];
    }
}

#pragma mark - NSXMLParserDelegate

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
    MYNode* node;

    // Add XML path component
    [self addXMLPathComponent:elementName];

    // Process relevant nodes
    if([self.XMLPath isEqualToString:@"document.page"])
    {
        node = [[MYRootNode alloc] initWithAttributes:attributeDict];

        // Save root node
        self.rootNode = node;
    }
    else if([self.XMLPath isEqualToString:@"document.page.block"])
    {
        node = [[MYBlockNode alloc] initWithAttributes:attributeDict];
    }

    // Push relevant node on stack
    if(node) {
        node.XMLPath = self.XMLPath;
        [self.elementStack addObject:node];

        NSLog(@"-> %@", self.XMLPath);
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    MYNode* node = [self.elementStack lastObject];

    // Remove node from stack if XML path match found    
    if([node.XMLPath isEqualToString:self.XMLPath]) {
        [self.elementStack removeLastObject];

        NSLog(@"<- %@", self.XMLPath);
    }

    // Pop XML path component
    [self removeLastXMLPathComponent];
}

@end 
```

# wordpress - Wordpress：functions.php 中定义的对象实例在 footer.php 中显示为 NULL

> ID：10339084
> 
> 赞同：0
> 
> 时间：2012-04-26T18:15:57.820
> 
> 标签：wordpress

我在 中设置一个对象的实例`functions.php`，如下所示：

```
$foo = new Foo; 
```

当我将它转储到 中时`index.php`，它会返回实例。然而，在`footer.php`这：

```
var_dump($foo) 
```

返回`NULL`。

这一切都在一个 Wordpress 主题中。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:39:31.053

footer.php 中的代码在不同的范围内。您可以尝试通过以下方式使其成为全球性的：

```
global $foo;
$foo = new foo; 
```

在您的 functions.php 文件中，然后在您的 footer.php 文件的顶部添加：

```
global $foo; 
```

然后您的 var_dump 应该返回该对象。

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# c# - 使用 XPath 过滤会删除绑定的 ComboBox 中的选定值

> ID：10339088
> 
> 赞同：3
> 
> 时间：2012-04-26T18:16:09.120
> 
> 标签：c#, wpf, xaml, gridview, combobox

我有以下设置：

这是主屏幕：

```
 <ListView Name="lineData" Grid.Row="2" ItemsSource="{Binding ElementName=This, Path=LineInformation, ValidatesOnDataErrors=True}" 
              ItemContainerStyle="{StaticResource ItemStyle}" PreviewMouseUp="lineData_PreviewMouseUp" SelectedIndex="0" 
              Foreground="{StaticResource {x:Static SystemColors.ControlTextBrushKey}}">
        <ListView.View>
            <GridView  x:Name="gridViewItems" AllowsColumnReorder="false">
                <GridViewColumn Header="Product" Width="Auto">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <ComboBox Name="descriptionComboBox" Loaded="description_Loaded"
                                    DisplayMemberPath="Description" SelectedItem="{Binding Path=Product}" SourceUpdated="descriptionComboBox_SourceUpdated"
                                    MinWidth="200" Width="Auto" SelectionChanged="description_SelectionChanged" TargetUpdated="descriptionComboBox_TargetUpdated">
                                  <ComboBox.ItemsSource>
                                    <Binding Source="{StaticResource XmlFile}" />
                                  </ComboBox.ItemsSource>
                                </ComboBox>
                            </StackPanel>
                        </DataTemplate>                            
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView> 
```

这个屏幕有一个按钮，它会像这样调用一个新窗口：

```
 Window newWindow = new Window();
        buildWindow.Owner = this; //MainWindow is the owner
        buildWindow.ShowDialog(); 
```

这个新窗口从第一个窗口中过滤掉组合框中的值，如下所示：

```
 XmlDataProvider provider = Owner.FindResource("XmlFile") as XmlDataProvider;
        provider.XPath = _configuration.CreateFilterQuery();
        provider.Refresh(); 
```

所以组合框绑定到这个 XmlFile。我遇到的问题是，如果组合框属于新过滤器的类别，我现在需要保持组合框上显示的值。

但是当我调用 .Refresh() 函数时，组合框的选定索引被重置。

应用 XPath 查询后如何维护显示的文本有什么想法吗？

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:56:27.120

我认为您的子窗口必须拥有自己的 XmlDataProvider。也许做这样的事情？

```
 XmlDataProvider provider = Owner.FindResource("XmlFile") as XmlDataProvider;
        XDocument cloneDoc = new XDocument(provider.Document);

        XmlDataProvider childProvider = new XmlDataProvider();
        childProvider.Document = cloneDoc;
        childProvider.XPath = _configuration.CreateFilterQuery();
        childProvider.Refresh();

        Window newWindow = new Window();
        newWindow.Provider = childProvider;
        newWindow.Owner = this; //MainWindow is the owner
        newWindow.ShowDialog(); 
```

您必须继承 window 并添加该 Provider 属性。您也可以创建一个 XDocument 属性并绑定子窗口中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:00:19.807

必须尝试记住刷新之前的选择，然后检查新过滤器后的值是否仍然存在并选择它？

# android - java.lang.NoClassDefFoundError: com.google.gdata.client.photos.PicasawebService

> ID：10339091
> 
> 赞同：0
> 
> 时间：2012-04-26T18:16:33.160
> 
> 标签：android, gdata, picasa

我正在使用 Picasa Api 并添加了以下库：

```
activation.jar
gdata-client-1.0.jar
gdata-client-meta-1.0.jar
gdata-core-1.0.jar
gdata-media-1.0.jar
gdata-photos-2.0.jar
gdata-photos-meta-2.0.jar
mail.jar 
```

此外，我正在进口：

```
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import org.apache.http.HttpRequestFactory;
import com.google.gdata.client.photos.PicasawebService;
import com.google.gdata.data.photos.AlbumFeed;
import com.google.gdata.data.photos.PhotoEntry;

import com.google.gdata.client.*;
import com.google.gdata.client.photos.*;
import com.google.gdata.data.*;
import com.google.gdata.data.media.*;
import com.google.gdata.data.photos.*;
import com.google.gdata.util.AuthenticationException;
import com.google.gdata.util.ServiceException; 
```

但在 onCreate:`PicasawebService myPicasa = new PicasawebService("Test");`我收到以下错误：

`java.lang.NoClassDefFoundError: com.google.gdata.client.photos.PicasawebService`.

我已经看到其他人也有同样的问题，但我在 Eclipse 中找不到 Android 编程的答案。任何人有任何提示如何解决这个问题？为什么找不到 ClassDef？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:31:26.043

尝试使用这个库 [http://code.google.com/p/gdata-java-client/downloads/list](http://code.google.com/p/gdata-java-client/downloads/list)

为了`PicasawebService`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:35:06.073

It seems to me that those jar files are not included in the built APK. You should create a `lib` folder inside your Android project folder and put the jars there and then reference them from the lib folder in your eclipse build path

# android - 如何做涉及移动/动画对象的平滑 UI？

> ID：10339092
> 
> 赞同：0
> 
> 时间：2012-04-26T18:16:37.900
> 
> 标签：android, user-interface

我正在开发一个应用程序，该应用程序涉及使用相机应用程序拍照，然后用户应该通过在其上拖动裁剪矩形来选择图片的重要部分。

我的问题是如何绘制这个裁剪矩形，因为它基本上涉及动态 UI 环境，我不知道如何处理。我应该在 OpenGL 中加载照片并使用它来绘制矩形，还是可以在触摸输入上调整视图的大小（大约每秒 30 次）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:21:04.053

我只是`onDraw()`用自定义视图的方法绘制矩形。在`onTouch()`设置矩形大小然后调用`invalidate()`视图。`Canvas`您可以使用传入的对象绘制各种颜色和 alpha 值的简单基元。这听起来不像是一个非常复杂的绘图操作，所以我希望它会非常顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:42:11.400

首先做最简单的方法（比如只是调整大小）。如果它的动画效果足够好，就不要优化，因为 OpenGL 虽然速度很快，但工作量要大得多。此外，30FPS 可能不是可接受的最低要求。在决定严格的性能标准之前，先看看它在您的眼中是怎样的。

# iphone - NSUrlConnection 偶尔会得到 -1003（DNS 问题）

> ID：10339094
> 
> 赞同：1
> 
> 时间：2012-04-26T18:16:47.553
> 
> 标签：iphone, nsurlconnection

NSUrlConnection 偶尔会得到 -1003（DNS 问题）

但是当我进入 Safari 时，一切都很好，可以访问任何网站。当我在浏览器上查看时，我要去的网站也返回正常。是否有一些 API 可以调用清理？谢谢。

# java - Ajax、Java 和休眠

> ID：10339095
> 
> 赞同：0
> 
> 时间：2012-04-26T18:16:49.650
> 
> 标签：java, spring, hibernate, web

我正在寻找非常好的教程，甚至是我可以购买的一本书，它将向我展示如何使用 Ajax 框架、Spring (Java) 和 hibernate 构建 Web 应用程序。基本上我只想将 AJAX 用于我的前端，并将 spring 框架用于我的中间层或业务层。对于那些对这些技术有经验的人，请指出我正确的方向。我已经开始阅读 Nathaniel T. Schutta 和 Ryan Asleson 的 Pro Ajax 和 Java

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:14:15.547

您在 Web 编程和 Java 编程方面的经验如何？从你的问题看来不是很多。

如果您还不熟悉 Web 和 Java，那么其中的大部分内容可能会让人感到困惑。

对于前端来说，AJAX 请求通常是通过 JavaScript 来完成的（当然还有其他的方法）

*   [W3School Ajax 教程](http://www.w3schools.com/ajax/default.asp)
*   [阿贾克斯介绍](http://www.ibm.com/developerworks/web/library/wa-ajaxintro2/)
*   如果你使用 jQuery 作为前端，[jQuery ajax](http://api.jquery.com/jQuery.ajax/)
*   我也使用过[JSON-RPC](http://json-rpc.org/)

如果您想将 Spring 用于您的业务层，这里有关于[Spring 和 AJAX](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)的博客。

你以前用过Spring吗？有很多关于 Spring 的资源，通过搜索很容易找到，你想使用 Spring 的哪个组件？其 IOC 能力？是MVC框架吗？等等等等，你可以随时阅读 Spring 3[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)

你以前用过Hibernate之类的ORM吗？Spring 3 使用 Hibernate 4，上次我使用它时存在错误，我不得不退回到 Hibernate 3。你可以从他们的[文档页面](http://www.hibernate.org/docs)阅读 Hibernate 。

你问的是 3 个不同的主题：AJAX、Spring 和 Hibernate——如果你对 Web 和 Java 编程还不是很熟悉，那么你需要立即学习这些主题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:04:46.997

Spring 文档非常有帮助：[http](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/) ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/ 它会告诉你所有的部分是如何组合在一起的。

# java - C: 和 C: 之间的区别/

> ID：10339098
> 
> 赞同：6
> 
> 时间：2012-04-26T18:16:54.527
> 
> 标签：java, windows

我只是在阅读一些java书籍并制作一些小程序进行练习，我创建了一个小代码来获取有关我输入的路径的信息，代码是：

```
String path = JOptionPane.showInputDialog("Enter Path to analyze");

File file =  new File(path);

if (file.exists())
{
    String result = "";
    if (file.isDirectory())
    {
        result += "Path is directory\n ";
        String [] resList = file.list();

        for (String s : resList)
        {
            result += s + ", ";
        }
    }
    if (file.isFile())
    {
        result += "Path is a file\n";
    }

    JOptionPane.showMessageDialog(null, result); 
```

现在在输入对话框中，当我输入时`C:`，结果是`build, build.xml, manifest.mf, nbproject, src`，但是当我输入 C:/ 时，它显示了 C 中目录和文件的完整列表。

奇怪的是，D 驱动器和其他驱动器不会发生这种情况（即 D:/ 和 D: 的结果相同），请解释一下发生了什么？

**更新** 在使用 C# 的 WPF 中也会发生同样的情况！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T18:29:15.907

`C:`表示“驱动器上当前选择的任何目录`C:`”。在您的情况下，它可能是您的应用程序正在运行的目录。

`D:`与您的情况相同，`D:/`因为根目录*是*`D:`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T18:30:23.433

这不是一个真正的 java 问题，而是一个 windows/dos 问题。

解释归结为用于切换驱动器的旧 dos 命令。

键入驱动器号后跟冒号是在 dos 中更改驱动器的命令，因此“命令”`C:`没有任何作用，因为您的工作目录已经在 C 驱动器上。JRE 的本机接口返回的“目录”与您使用路径“”相同，即您的工作目录。

另一方面，添加一个斜杠，它是一个正确的路径，指向您的 C 驱动器的根目录，因此您的 JRE 由本机界面提供此目录。

如果您转到 dos 命令（windows>run>cmd）并输入，`C:`您将看到它接受命令但不会更改目录，当然除非您当时在不同的驱动器上。

希望有帮助。

# ios - 在没有 mac 的情况下构建 iOS 应用程序

> ID：10339099
> 
> 赞同：4
> 
> 时间：2012-04-26T18:16:58.417
> 
> 标签：ios

> **可能重复：**
> [在 Linux 中开始 iPhone 应用程序开发？](https://stackoverflow.com/questions/276907/starting-iphone-app-development-in-linux)
> [在 linux 中开发 iPhone 应用程序](https://stackoverflow.com/questions/1492378/development-of-iphone-application-in-linux)
> [Windows 下 iOS 开发的替代方案](https://stackoverflow.com/questions/4533847/alternatives-for-ios-development-under-windows)

我想学习如何构建 iOS 应用程序，但我并没有真正的 Mac，（但我可以用一个来进行测试和其他东西）。那么 linux（ubuntu-debain）或 windows 中的 Xcode IDE 是否有任何替代方案可以用来获得与 Xcode 类似的环境？

我知道我们可以在 VM 中运行 Mac，但我不想使用它（它缓慢、缓慢且使用起来很痛苦）。

另外，如果你们碰巧知道如何在 Linux 上编译 Objective-C 代码，请分享！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:57:58.430

iOS SDK 仅适用于 Xcode，而 Xcode 仅可在 Mac 上使用。因此，虽然您当然可以在其他平台上使用 gcc 编译 Objective-C，但您将无法在 Mac 以外的任何平台上编译和链接使用任何 iOS SDK API 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:42:42.693

我为 64 位 linux 编译了 4.2 版本的 GNU 工具链。[http://xsellize.com/topic/111034-toolchain-for-ios-42/](http://xsellize.com/topic/111034-toolchain-for-ios-42/)

# jquery - 尝试为 jQuery each() 计时

> ID：10339100
> 
> 赞同：0
> 
> 时间：2012-04-26T18:16:59.803
> 
> 标签：jquery, each

我正在尝试为一个简单的 jQuery 动画计时，以便它在一组 HTML 元素上一个接一个地触发，并在移动到下一组元素之前延迟。使用 jQuery each() 还没有让我走得太远，因为 each() 会立即运行“项目”变量。有没有办法计时，以便在进入下一个“项目”变量之前延迟？

```
$(document).ready(function() {
    var slideShow = $(".intro-inner");
        if (slideShow) {
        var item = slideShow.find(".item");
        var headLine = item.find("h1");
        var para = item.find("p");
        item.each(function () { 
            if (headLine && para) {
                headLine.css({"opacity": "0", "left" : "-1.25em" });
                para.css({"opacity": "0", "left" : "-12.500em" });
                setTimeout(function() {
                    headLine.animate({"opacity": "1", "left" : "0"}, 4000);
                    para.animate({"opacity": "1", "left" : "0"}, 4000);
                }, 1000); 
            }
        });
    }
}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:18:07.600

```
setInterval(callYouFunction(), time interval in miliseconds) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:36:39.813

`.each()` will pass [the index and the element](http://api.jquery.com/each/) to its callback function. You may be able to use this.

For instance, multiply the (zero-based) index by the number of seconds you're passing to `setTimeout` to animate each one a second after the one before it:

```
 item.each(function (i,el) { 
        if (headLine && para) {
            headLine.css({"opacity": "0", "left" : "-1.25em" });
            para.css({"opacity": "0", "left" : "-12.500em" });
            setTimeout(function() {
                headLine.animate({"opacity": "1", "left" : "0"}, 4000);
                para.animate({"opacity": "1", "left" : "0"}, 4000);
            }, i*1000); 
        }
    }); 
```

# greedy - 使用贪心算法找到 ZIG-ZAG 序列

> ID：10339102
> 
> 赞同：1
> 
> 时间：2012-04-26T18:17:07.660
> 
> 标签：greedy

整数序列 X=x1,x2...,xn 定义为 ZIG-ZAG 如果：

xi < xi+1 如果 xi 是奇数
xi > xi+1 如果 xi 是偶数

我需要一个贪心算法来找到给定序列内最大 ZIG-ZAG 子序列的维数

编辑：有一个例子：
Y = (3, 4, 8, 5, 6, 2)
对于 3、8、5、6、2 或 4、8、5、6、2，输出应该是 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:30:52.357

您可以使用此算法（只需将 o(dd) 和 e(ven) 数组初始化为 1）：

```
for i=1 to n 
for j=i-1 down to 1 do
if a[i]>a[j]  and o[i]< e[j]+1 then o[i]=e[j]+1
else if a[i]<a[j] and e[i]<o[j]+1 then e[i]=o[j]+1 
```

答案是 o 和 e 数组的最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:24:38.117

只需遍历序列并检查每个元素是否满足条件。

你能试着解释一下[贪心算法](http://en.wikipedia.org/wiki/Greedy_algorithm)与此有什么关系吗？

编辑：好的，现在它比原版更有意义。不幸的是，我想不出一个好的解决方案 atm。

# mysql - MySQL：在行列表中使用给定值找到合适的行

> ID：10339107
> 
> 赞同：1
> 
> 时间：2012-04-26T18:17:31.280
> 
> 标签：mysql

我有一张表叫打折

```
Field        Type 
id           int(11) NOT NULL
resort_id    int(11) NOT NULL
count_from   int(11) NULL
count_to     int(11) NULL
discount     varchar(255) NULL 
```

我有如下行：

> ```
>  
>   id |product_id |count_from |count_to |discount
>     1|8 |0 |30 |22
>     2|8 |31 |60 |12
>   
> ```

当我得到 27 作为输入时，我应该检索第一行（id：1）。假设如果我的输入是 33，我应该检索 2 行（id：2）。

如何编写一个mysql查询？

问候，
帕布

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:22:47.900

```
SELECT *
FROM discounts
WHERE 27 BETWEEN count_from AND count_to

SELECT *
FROM discounts
WHERE 33 BETWEEN count_from AND count_to 
```

# objective-c - 如何从 UITableView 的所有选定单元格构建列表

> ID：10339108
> 
> 赞同：0
> 
> 时间：2012-04-26T18:17:32.933
> 
> 标签：objective-c, ios, xcode

大家好，感谢您的宝贵时间。我想知道如何构建所有选定单元格数据的列表并将其写入一个数组，然后我将其写入 .plist

我只想从选定的单元格中继续添加到“*selecedArray”对象。

当我“NSLog”我的数据时，下面的当前代码显示我覆盖了最后一个选择，因此......我最终得到了最后一个选择的单元格。希望这是有道理的。

谢谢亚哈。

```
NSMutableArray *selectedArray = [[NSMutableArray alloc] init];
  NSMutableDictionary *New_myData = [[NSMutableDictionary alloc] initWithCapacity:1];
  NSString *selected = [prodArray objectAtIndex:indexPath.row];
  [selectedArray addObject:selected];
  [New_myData setValue:selectedArray forKey:@"SelctedPrds"];

   NSLog( @"data from BuildString %@", New_myData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:30:19.847

这段代码在你的`tableView:didSelectRowAtIndexPath:`方法中吗？

如果是这样，您每次用户选择一行时都会创建一个**新数组** `NSMutableArray *selectedArray`，这意味着它将始终只有一个项目（即刚刚选择的行）。

您需要更高范围的数组。尝试在类上设置`selectedArray`为实例变量/属性。您需要在类的`init`方法中初始化数组。然后当用户选择一行时，将其添加到数组中，它将正确地保持其状态。

您可能还需要编写代码来释放内存（如果您不使用 ARC），也许还需要某种方式来清除数组（如果您的应用程序中有“清除”或“取消全选”类型的选项）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T08:23:02.117

您可以使用此方法获取选定单元格的列表，`tableView:indexPathsForSelectedRows`它将返回所有选定单元格的数组

# php - php中的解析错误未显示在localhost（xampp）中，但显示在nginx服务器中

> ID：10339112
> 
> 赞同：0
> 
> 时间：2012-04-26T18:17:42.777
> 
> 标签：php, parsing

谁能给我以下代码行的解决方案：

```
 $filteredArray = array_filter($wordArray, function ($x) {
    return !preg_match("/^(.|a|an|and|the|this|at|in|or|of|is|for|to|em|com|be
       |with|href|me|rt|by|np|http|www)$/x", $x);
 }); 
```

此行在我的本地主机中使用 XAMPP 没有产生任何错误，但同一行在我的 nginx 服务器（在线）中显示错误。

我能为此做些什么。为什么会这样显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:31:34.203

听起来您的服务器可能没有运行 PHP 5.3 或更高版本，这是支持匿名函数所必需的。相反，您可以创建函数并将其作为回调函数字符串传递给`array_filter()`.

```
function wordFilter($x) {
  return !preg_match("/^(.|a|an|and|the|this|at|in|or|of|is|for|to|em|com|be
    |with|href|me|rt|by|np|http|www)$/x", $x);
}

$filtered_array = array_filter($wordArray, 'wordFilter'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:31:24.813

您在 nginx 服务器上的 php 版本太旧，无法使用匿名函数（闭包——至少 PHP 5.3）是必需的。您可以使用`create_function`在旧版本中创建函数，并且在新版本中仍然有效。

# c# - 如何在c#中从boxofwidgets的arraylist中搜索和删除较低的值

> ID：10339113
> 
> 赞同：-2
> 
> 时间：2012-04-26T18:17:43.140
> 
> 标签：c#, arraylist

如何使用 c# 中的“GetRidOfTheSmallWidgets”方法在不使用 foreach 或任何循环的情况下搜索“BoxOfW​​idgets”的数组列表并删除值小于 20 的小部件。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Collections;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            ArrayList colBoxesOfWidgets = new ArrayList();

      colBoxesOfWidgets.Add(new BoxOfWidgets("Cardboard"));
      ((BoxOfWidgets)colBoxesOfWidgets[0]).colWidgets.Add(new Widget("The blue widget", 12));
      ((BoxOfWidgets)colBoxesOfWidgets[0]).colWidgets.Add(new Widget("The red widget", 15));
      ((BoxOfWidgets)colBoxesOfWidgets[0]).colWidgets.Add(new Widget("The silver widget", 6));
      ((BoxOfWidgets)colBoxesOfWidgets[0]).colWidgets.Add(new Widget("The green widget", 52));

      colBoxesOfWidgets.Add(new BoxOfWidgets("Metal"));
      ((BoxOfWidgets)colBoxesOfWidgets[1]).colWidgets.Add(new Widget("The gold widget", 9));
    ((BoxOfWidgets)colBoxesOfWidgets[1]).colWidgets.Add(new Widget("The orange widget", 115));
    ((BoxOfWidgets)colBoxesOfWidgets[1]).colWidgets.Add(new Widget("The pink widget", 1));

    colBoxesOfWidgets.Add(new BoxOfWidgets("Metal"));
    ((BoxOfWidgets) colBoxesOfWidgets[2]).colWidgets.Add(new Widget("The grey widget", 12));
    ((BoxOfWidgets) colBoxesOfWidgets[2]).colWidgets.Add(new Widget("The black widget", 15));
    ((BoxOfWidgets) colBoxesOfWidgets[2]).colWidgets.Add(new Widget("The white widget", 19));
    ((BoxOfWidgets) colBoxesOfWidgets[2]).colWidgets.Add(new Widget("The brown widget", 60));
    ((BoxOfWidgets) colBoxesOfWidgets[2]).colWidgets.Add(new Widget("The peach widget", 16));

    GetRidOfTheSmallWidgets(colBoxesOfWidgets);
}

    public static ArrayList GetRidOfTheSmallWidgets(ArrayList colBoxesOfWidgets)
    {
        //It should remove all widgets that have lengths lower than 20.
        return colBoxesOfWidgets;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:14:13.460

如果您喜欢搞笑，可以使用 if 和 goto 语句。

# eclipse-plugin - 在 Eclipse 中，如何为对话框中的控件提供上下文/弹出菜单？

> ID：10339116
> 
> 赞同：2
> 
> 时间：2012-04-26T18:17:57.050
> 
> 标签：eclipse-plugin, eclipse-rcp, jface

通常，在编辑器中，可以提供一个上下文菜单（在 org.eclipse.ui.menus 扩展中声明），如下所示。

```
MenuManager menuManager = new MenuManager();
Control menuParent = ... ;//some Control in the editor
Menu contextMenu = menuManager.createContextMenu(menuParent);
menuParent.setMenu(contextMenu);
getEditorSite().registerContextMenu(CONTEXT_MENU_ID, menuManager, getMySelectionProvider(), false); 
```

我想做类似的事情，但在对话框中。

显然，我今天缺乏谷歌搜索技能，因为除了一个人在 DZone 上问同样的事情但没有成功，我似乎找不到任何东西。

甚至可以通过扩展点为对话框中的控件提供菜单吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T07:36:37.617

[`IMenuService`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/menus/IMenuService.html)工作台窗口的使用：

```
IMenuService mSvc = (IMenuService) window.getService(IMenuService.class);
MenuManager mgr = new MenuManager();
mSvc.populateContributionManager(mgr, "popup:my.dialog.menu");
control.setMenu(mgr.createContextMenu(control)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T12:11:06.213

我已经设法在首选项对话框的自定义表格控件中显示上下文菜单（我也在视图中使用）。

在我的 ViewPart 我有方法：

```
public static MyView getView() {
    MyView myView = (MyView) 
    Activator.getDefault().getWorkbench().getActiveWorkbenchWindow().
    getActivePage().findView(MyView.ID);

    return myView;
} 
```

在我的 RCP 应用程序中，视图始终可见，因此该方法永远不应返回 null。

然后在我的首选项页面的 ctor 中，该页面在对话框中打开：

```
 m_viewPart = MyView.getView(); 
```

在首选项页面中创建控件时，我使用 ViewPart 注册上下文菜单：

```
 Control control = new ...
    MenuManager menuManager = new MenuManager();
    Menu menu = menuManager.createContextMenu(control);
    control.setMenu(menu);
    viewPart.getSite().registerContextMenu("si.test.myCtxMenu", 
                                           menuManager, 
                                           selectionProvider); 
```

将对话框中组件的上下文菜单注册到 ViewPart 可能不是最好的主意，但它很简单并且有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:48:00.227

这是我为`ViewPart`. 我不知道它是否适用于`Dialog`.

```
protected void createContextMenu() {
    MenuManager menuMgr = new MenuManager("#PopupMenu");
    menuMgr.setRemoveAllWhenShown(true);
    menuMgr.addMenuListener(new IMenuListener() {
        public void menuAboutToShow(IMenuManager m) {
            WorkAssignmentView.this.fillContextMenu(m);
        }
    });
    Menu menu = menuMgr.createContextMenu(activeViewer.getControl());
    activeViewer.getControl().setMenu(menu);
    getSite().registerContextMenu(menuMgr, activeViewer);
} 
```

我的班级`WorkAssignmentView`名称在哪里，并且是.`ViewPart``activeViewer``TableViewer`

如果你能做到`control.getControl().setMenu(menu);`，那么你应该能够将其用作模型。

这是填充上下文菜单的方法。

```
protected void fillContextMenu(IMenuManager menuMgr) {

    WorkAssignmentViewRow[] row = this.getSelectedAssignments();

    menuMgr.add(addAction);

        if (status.equals(WorkAssignmentViewRow.ACTIVE)) {
            menuMgr.add(new Separator());
            menuMgr.add(modifyAction);
            menuMgr.add(changeAction);
            menuMgr.add(new Separator());
            menuMgr.add(deleteAction);
            menuMgr.add(new Separator());
            menuMgr.add(whoIsModifyingAction);
            menuMgr.add(new Separator());
            menuMgr.add(displayAction);
            menuMgr.add(displayFullAction);
            menuMgr.add(new Separator());
            menuMgr.add(updateAction);
            menuMgr.add(commitAction);
            menuMgr.add(new Separator());
            menuMgr.add(developmentMoveAction);
            menuMgr.add(new Separator());
            menuMgr.add(testMoveAction);
            menuMgr.add(new Separator());
            menuMgr.add(productionMoveAction);
            menuMgr.add(displayProductionAction);
            menuMgr.add(new Separator());
        } else if (status.equals(WorkAssignmentViewRow.INACTIVE)){
            menuMgr.add(new Separator());
            menuMgr.add(changeAction);
            menuMgr.add(new Separator());
            menuMgr.add(deleteAction);
            menuMgr.add(new Separator());
            menuMgr.add(displayAction);
            menuMgr.add(displayFullAction);
            menuMgr.add(new Separator());
        } else {
            menuMgr.add(new Separator());
            menuMgr.add(displayAction);
            menuMgr.add(displayFullAction);
            menuMgr.add(new Separator());
        }

    menuMgr.add(new Separator(IWorkbenchActionConstants.MB_ADDITIONS));
} 
```

# hadoop - Hadoop 作业失败：读取 IndexFile 时出错？

> ID：10339120
> 
> 赞同：1
> 
> 时间：2012-04-26T18:18:05.357
> 
> 标签：hadoop, mapreduce

如何解决这样的错误

```
Map output lost, rescheduling: getMapOutput(attempt_201204251959_0001_m_000000_0,0) failed :
java.io.IOException: Error Reading IndexFile
    at org.apache.hadoop.mapred.IndexCache.readIndexFileToCache(IndexCache.java:113)
    at org.apache.hadoop.mapred.IndexCache.getIndexInformation(IndexCache.java:66)
    at org.apache.hadoop.mapred.TaskTracker$MapOutputServlet.doGet(TaskTracker.java:3745)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)
    at org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:818)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.io.IOException: Owner '4294967294' for path /work/app/hadoop/tmp/mapred/local/taskTracker/hduser/jobcache/job_201204251959_0001/attempt_201204251959_0001_m_000000_0/output/file.out.index did not match expected owner 'hduser'
    at org.apache.hadoop.io.SecureIOUtils.checkStat(SecureIOUtils.java:177)
    at org.apache.hadoop.io.SecureIOUtils.openForRead(SecureIOUtils.java:110)
    at org.apache.hadoop.mapred.SpillRecord.<init>(SpillRecord.java:61)
    at org.apache.hadoop.mapred.SpillRecord.<init>(SpillRecord.java:54)
    at org.apache.hadoop.mapred.IndexCache.readIndexFileToCache(IndexCache.java:109)
    ... 23 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T11:51:11.140

我知道这已经晚了，但对于可能再次遇到同样问题的人来说：

Hadoop v1.2.1 附带 Jetty v6.1.26。我在 Java7（openJDK）上运行 Hadoop 时遇到了同样的问题。

在 Java6 上运行 hadoop 时问题已解决。Java 版本之间可能存在兼容性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:38:26.293

看看[https://issues.apache.org/jira/browse/MAPREDUCE-2389](https://issues.apache.org/jira/browse/MAPREDUCE-2389)。看起来使用另一个码头版本可能会有所帮助......

# java - Java 在第二段之后插入一个字符串

> ID：10339122
> 
> 赞同：1
> 
> 时间：2012-04-26T18:18:10.177
> 
> 标签：java

我是 Java 新手，这就是我想要做的：我有一个字符串内容，它是一个带有 html 标签的字符串

```
 <p><strong>First Paragraph</strong></p>
    <p><i>Second paragraph....</i></p>
    <a>....more tags etc... 
```

有几个段落之间有其他 html 标记。我试图在第二段之后插入一个链接。

我尝试使用 string.split 但它并没有真正起作用。

```
 String str = content;
 String[] temp;
 String delimiter = "[<p>]+";
 temp = str.split(delimiter);
 for(int i =0; i < temp.length ; i++)
 System.out.println(temp[i]); 
```

关于如何做到这一点的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:23:13.793

您的插入点应该是 idx = str.indexOf("</p>",str.indexOf("</p>") + 1) + "</p>".length();

然后你可以做

字符串 newStr = str.substring(0,idx) + lineToAdd + str.substring(idx);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:29:01.940

如果您使用的是 XHTML，那么您可以将该文档视为 XML，并使用可用的 Java 接口之一来处理该文档。

但是，如果您的任务只是如您所描述的那么简单，那么这可能是很多机器。如果您打算进行更复杂的修改，您可以尝试使用更多涉及的方法，否则使用@user1291492 想法。

# jquery - jQuery - 如何选择父元素的子元素？

> ID：10339124
> 
> 赞同：4
> 
> 时间：2012-04-26T18:18:12.447
> 
> 标签：jquery, jquery-selectors

抱歉，如果标题不准确 - 我不知道如何措辞。

我有多个具有相同类的小部件`<div class="widget"></div>`- 每个小部件都有一个标题和内容，结构如下：

```
<div class="widget">
    <div class="widget-title">Title</div>
    <div class="widget-content">Content Here</div>
</div> 
```

“widget-content”是隐藏的，当您单击widget-title 时，会出现内容，并且将一个类应用于widget-title，将其更改为“widget-title open”。这部分工作查找，小部件内容也打开。

问题是，它在所有小部件上打开小部件内容。它应该只在单击标题的特定小部件中打开小部件内容，而不是全部打开。我不确定使用什么正确的语法，所以它只打开用户单击标题的特定小部件的小部件内容。

这是我到目前为止的代码：

```
$('.widget').find('.widget-title').click(function() {
  $('.widget-content').show('slow', function() {
    // Animation complete.
  });
  $('.widget').find('.widget-title').addClass("open");
}); 
```

有人可以提供一个工作示例吗？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T18:21:15.573

```
$('.widget .widget-title').click(function() {
    $(this)
        .addClass("open")
        .parent().find('.widget-content').show('slow', function() {
            // Animation complete.
        });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:21:13.743

我想你想要这个：

```
$('.widget').find('.widget-title').click(function() {
    $(this).parent().show('slow', function() {
        // Animation complete.
    }).addClass("open");
}); 
```

`.widget-title`它打开所选元素的父级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T18:22:44.513

尝试这个：

```
$('.widget-title').click(function() {
  $(this).parent('.widget').children('.widget-content').show('slow', function() {
    $(this).addClass('open');
  });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-07T08:17:50.550

我今天遇到了同样的问题，这是一个快速的解决方案 $('#parent > childNode'); [http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T18:19:17.387

`.children()` [http://api.jquery.com/children/](http://api.jquery.com/children/)

我不完全确定我是否理解你，但这可能会对你有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T18:21:33.313

```
$('div.widget-title').click(function() {
 var el = $(this);
 el.addClass('open');siblings('div.widget-content').show('slow',function() {
     //animation complete
 });
}); 
```

您需要使用引用当前 DOM 元素的“this”关键字将回调函数保留在上下文中。否则，您将在回调中获取所有带有 widget-title 类的 DOM 元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T18:22:36.707

如果按类选择，jquery 将选择该类的所有成员。您是否可以为此特定的小部件或父容器设置 ID 或属性？

# php - 表单提交没有任何反应

> ID：10339125
> 
> 赞同：4
> 
> 时间：2012-04-26T18:18:19.503
> 
> 标签：php, jquery, forms, tinymce, rich-text-editor

我将 tinyMCE 应用到我网站管理区域的文本区域。现在有一个页面“创建类别”和页面“编辑类别”。

在编辑类别中，有一个类别的下拉菜单，我选择一个，类别描述的文本区域填充了AJAX和一个tinyMCE函数：_

```
tinyMCE.activeEditor.setContent(responce); 
```

类别描述填充到应用 tinyMCE 的文本区域中。但是当我点击提交时，什么都没有发生。同样，在创建类别页面上，没有下拉菜单，但是当你点击提交时，什么也没有发生。

不应用 tinyMCE 时不会出现此问题。但是在编辑类别页面上，它正在提交但没有用类别描述填写文本区域，而不是

```
tinyMCE.activeEditor.setContent(responce); 
```

我用了

```
$("#lang_description").html(responce); 
```

在 jQuery AJAX 的回调函数中。

所以主要问题是没有提交表格，这就是故事。

有人建议在我发布之前使用 tinyMCE 函数 getContent，但我不明白我会在哪里以及如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T18:49:00.803

我曾经遇到过像您这样的情况，而我首先要做的是`tinyMCE.init`

```
tinyMCE.init({
    mode : "exact", // Used exact
    elements : "page_content", // I gave the textarea id and name 'page_content'
    ...
}); 
```

然后我写了一个函数如下

```
function get_page_content()
{
    var ed = tinyMCE.get('page_content');
    return ed.getContent();
} 
```

然后在我的表单提交事件处理程序/函数中，我刚刚做了

```
$('#page_content').val(get_page_content()); // I populated my textarea (id=page_content) before the form submission 
```

我收到了`$page_content=$_POST['page_content']`在我的 php 脚本中使用的数据

**更新：**也许你可以使用

```
var ed=tinyMCE.activeEditor.getContent(); // when you didn't set the mode : "exact" in init function 
```

**参考：** [**getContent**](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.getContent)和[**setContent**](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.setContent)

可能不是解决方案，但如果这有帮助，我会很高兴知道。另请注意 Sparky672 的评论。

# .htaccess - 如果目录不存在，htaccess 将根目录重定向到目录

> ID：10339126
> 
> 赞同：0
> 
> 时间：2012-04-26T18:18:19.973
> 
> 标签：.htaccess, mod-rewrite, redirect, directory

使用 htacces 我想将我的 url 重定向到一个目录，我将其用于：

```
RewriteEngine on
RewriteRule !^dir1/(.*) /dir1/$1 
```

它适用于脚本，但不适用于图像。

我还想知道是否有一种方法可以仅在根目录中不存在目录时进行重写。

示例：mysite.com 重定向到：mysite.com/dir1

但如果 dir2 存在于根目录中，则 mysite.com/dir2 不会重定向。

我知道这有点令人困惑。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:35:17.517

这就是我使用的：

```
# Redirect if root folder doesnt exist (request_uri must begin with a dir (contain slash or contains only alphanum plus -))
RewriteCond %{DOCUMENT_ROOT}/$1 !-d
RewriteRule ^([a-z0-9-]+)(/(.*))?$ /dir1/$0 [NC,L] 
```

# nxt - Lego NXT 超声波传感器的输出值

> ID：10339133
> 
> 赞同：1
> 
> 时间：2012-04-26T18:18:47.497
> 
> 标签：nxt, lego, mindstorms

我正在尝试使用编程语言 NBC（下一个字节码）读取乐高 NXT 机器人的超声波传感器读数。它在乐高网站上说传感器读数范围为 0 -255 厘米，但是当我输出传感器数据时，有时会得到高于 255 的值；这通常发生在我的传感器读取值 255 时；然后它读取大约 170 - 900 我不知道它为什么这样做。这是我的代码：（我首先读取传感器数据，然后让机器人旋转 45 度并无限期地重复，以检查数据是如何被读取的。）

```
#include "NXTDefs.h"
// have the robot stay still and keep track of all the distances when turning around.

dseg segment
    Distance udword 0
dseg ends

thread main
    SetSensorUltrasonic(IN_4)
    Forever:
        ReadSensorUS(IN_4,Distance)
        NumOut(0,10,Distance)
        wait 1000
        RotateMotor(OUT_B,100,180)
        ClearSensor(IN_4)
        ResetSensor(IN_4)
        set Distance,0
        jmp Forever
        exit
endt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:29:24.203

正如@Charbonier 所说，您没有清除显示。这样，只有部分数字会被覆盖，从而产生传感器已经发疯的错觉。

尝试使用[它](http://bricxcc.sourceforge.net/nbc/doc/nbcapi/group___display_module_functions_ga31ef9d6db45ded5550fb613cfd01a629.html)而不是`NumOut()`（`DRAW_OPT_CLEAR_SCREEN`是一个定义为的常量`1`）：

```
NumOutEx(0, 10, Distance, DRAW_OPT_CLEAR_SCREEN) 
```

或者，您可以在 之前放置[以下](http://bricxcc.sourceforge.net/nbc/doc/nbcapi/group___display_module_functions_ga8b3ae29bcb49e0bc76e9d3285098b55d.html)代码行`NumOut()`：

```
ClearScreen() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:47:54.237

好吧，一张表格可能会更清晰并保持不变：

```
Value of "Distance"   Display
_     255                255
_      80                805 
```

您会看到前 255 个中的 5 个！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:26:36.287

正在读取显示屏上的数字吗？这些是传感器读取的值吗？

例如，

```
Value of Distance    Display
    255                255
    80                 805 
```

您会看到，因为您在显示屏上`805`打印，而最后一个from仍然存在。`80``5``255`

显示不会被 删除`NumOut()`。我想应该有一个擦除显示的选项。

# mysql - 在 MySQL 中创建来自另一个表的动态列

> ID：10339135
> 
> 赞同：0
> 
> 时间：2012-04-26T18:18:55.240
> 
> 标签：mysql, dynamic

首先，感谢迄今为止我在这里获得的所有巨大帮助——非常宝贵。

我想创建一个 MySQL 表，其中包含从另一个表中的列动态生成的列，但它也可以容纳具有手动输入值的列。换句话说：

例如，表 1 有一个名为“汽车”的列，其中包含讴歌、福特、本田等项目。有时该表会更新为新车。假设有人插入“闪避”。

我需要的是一个不同的表，它有一个名为“cars”的列，它会自动更新以反映另一个表中“cars”列中的项目列表；但是该表还应该有一个名为“轮胎”的列，可以接受新值，如“倍耐力”、“米其林”等。

换句话说，这个新表应该有一个名为 cars 的列，该列始终来自另一个表，但应该能够在插入时接受匹配的“轮胎”值——如果这有意义的话。

非常非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:27:37.340

不要那样做！这是非常非常糟糕的设计。您需要创建几个具有多对多关系的汽车和轮胎参考表。

```
table cars:
car_id
car_name

table tires:
tire_id
tire_name

connection table car_tire:
tire_id
car_id 
```

# actionscript-3 - 时间轴实例不在第一帧

> ID：10339140
> 
> 赞同：0
> 
> 时间：2012-04-26T18:19:06.653
> 
> 标签：actionscript-3, flash-cs5

自从我不得不编写**真正**需要与时间线集成的 Actionscript（在这种情况下，控制必须以特定顺序发生的一系列帧）以来已经有一段时间了，我正试图弄清楚该怎么做。

在前几帧中，我有一个按钮“next_1”。

在第 10 帧，我需要另一个按钮“next_2”。我真的真的需要这个按钮不在第一帧上（我可能只是让它不可见，但这会创建一个我不想要的可点击区域）。

问题是，我没有放在“frame_1”上的任何东西都会在我的 Document 类中呈现为 null。

有什么解决办法吗？如果可能的话，我宁愿不必在时间轴上编写我的脚本（从长远来看，将它保存在文档类中似乎更容易）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:30:19.523

时间轴上的项目是动态创建的，因此如果播放头尚未到达第 10 帧，则不会创建 next_2。

最简单的文档级解决方案：

1.  创建一个框架标签数组，如 ["label1", "label2"]
2.  创建 sectionIndex 变量并将其设置为 0
3.  在自己的图层上创建一个下一个按钮，以便它始终显示。
4.  单击下一个按钮时，增加 sectionIndex，然后 gotoAndPlay(myLabels[sectionIndex])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:42:49.903

好吧，直接摘自《Real World Flash Game Development》：

```
/**************************************************
* FRAME LABELS *
**************************************************/
private function enumerateFrameLabels():void {
   for each (var label:FrameLabel in currentLabels) {
       addFrameScript(label.frame-1, dispatchFrameEvent);
   }
}

private function dispatchFrameEvent():void {
   dispatchEvent(new Event(currentLabel, true));
} 
```

这会在时间轴上的每个帧标签处调度一个事件。

然后你可以为每一帧添加事件监听器：

```
addEventListener("name_of_my_framelabel", frameHandler);
addEventListener("another_framelabel", frameHandler); 
```

并编写一个 switch 语句，以便在按钮实际出现在时间轴上时为其添加事件侦听器。

```
private function frameHandler(e:Event):void {
            switch(e.type) {
                case 'screen_2':
                    stop();
                    next_2.addEventListener(MouseEvent.CLICK, click2, false, 0, true)
                break;
            }
        } 
```

# html - img 标题属性显示块而不是外来字符

> ID：10339146
> 
> 赞同：2
> 
> 时间：2012-04-26T18:19:39.193
> 
> 标签：html

我网站上的一些图像具有`title`包含外来字符的属性。

这些字符在网站的其余部分和 HTML 源代码中正确显示，但在小浏览器标题悬停上显示不正确。

**悬停**

![标题问题](../Images/b43cfbaa45c4e383be57b24d7f38c37d.png)

**别处**

![正确显示](../Images/38d85edb9b226ff5ab6030d86f353034.png)

**来源**

```
<img width="288" height="145" src="http://www.xxxxxxxx.com/dev/wp-content/uploads/2012/03/Betta-patoti-7-288x145.jpg" class="attachment-species-thumb" alt="???~" title="© ???~"> 
```

有什么可以做的吗？

* * *

**编辑**

以下代码位于我网站上的每个页面上：

`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`

* * *

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:40:15.897

此问题往往意味着您使用的字符集未安装在客户端计算机上。

如果这是 Unicode 编码，则可能是该字符范围没有安装在客户端计算机上（为了节省空间，许多 Windows 安装仅包含一部分字体，通常不包括远东字体和在西方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:24:49.970

属性值的呈现`title`是依赖于浏览器的，通常使用特定的字体，由用户设置（尽管很少有用户知道这一点），并且自然会因浏览器和平台而异。在一些现代设置中，浏览器可以在这里使用不同的字体，但在旧系统上，你会得到不同的东西，很可能通常是框表示字体中不存在的字符。`title`作为作者，您在使用该属性时无能为力。

士气是不应该在`title`属性中传达任何必要的（如果有的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T18:43:37.313

根据@oded 的回答，我发现将`QuickInfo`字体`Windows XP`从`Tahoma`更改为`Lucida Sans Unicode`在丑陋的框中换取了我想看到的实际 unicode 字符。

![在此处输入图像描述](../Images/1fa6fa5a519031b1e6040aed71f226a3.png)

# ruby - Ruby on Rails 中是否有简写 if（没有 else）语句？

> ID：10339149
> 
> 赞同：41
> 
> 时间：2012-04-26T18:20:02.830
> 
> 标签：ruby

我知道 Ruby 中有一个简写的单行 if/else 语句：

```
a ? b : c 
```

是否只有一个`if`声明？而不是这样写：

```
if a
  # do something
end 
```

有这个的简写版本吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-26T18:20:56.840

您可以使用后置条件（不要介意名称，它将在代码***之前***进行评估。并且仅在条件评估为真实值（即非或）`do_something`时才会执行）。`nil``false`

```
do_something if a 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T18:22:18.460

```
do_something if a 
```

这将首先评估`if`条件（在这种情况下`a`），如果它是`true`（或在 的情况下`a`，不是`false`或`nil`），它将执行`do_something`。如果是`false`（或`nil`），它将转到下一行永远不会运行的代码`do_something`。

# c - 在 C 中，如果用未定义的东西定义变量会发生什么？

> ID：10339150
> 
> 赞同：1
> 
> 时间：2012-04-26T18:20:05.463
> 
> 标签：c, gcc, macros, c-preprocessor

我有一个这样的示例代码：

```
int var;
var = MACRO_A; 
```

我希望`MACRO_A`已经像这样定义：

```
#define MACRO_A    1234 
```

但是，我在源代码的任何地方都找不到**定义**`MACRO_A`，但是我可以成功构建代码，那么最后的值是什么`var`？

编译器是 gcc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:21:09.973

> 但是，我在源代码的任何地方都找不到定义的MACRO_A，但是我可以成功构建代码，那么最后var的值是什么

它在某处，否则无法编译。也许它是直接在命令行上定义的？( `-DMACRO_A`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:25:35.077

该宏可以在编译期间使用`-D`选项传递。

```
#include <stdio.h>

int main()
{
    int i = MACRO_A;
    printf("MACRO_A : %d \n", i);
    return 0;
} 
```

输出：

```
$ gcc macro.c -D MACRO_A=10
$ ./a.out 
MACRO_A : 10 
$ 
```

# php - javascript捕获php的所有列表框值

> ID：10339154
> 
> 赞同：1
> 
> 时间：2012-04-26T18:20:38.537
> 
> 标签：php, javascript, listbox, capture

我有一个页面，可以让人们将项目分配给一个类别和 javascript，让用户可以根据需要将任意数量的项目从左侧的一个框移动到右侧的一个框并返回，以便用户可以预览和微调选择（最终在右框中）。如果可以在列表而不是列表框之间移动项目可能会更好，但我想选择框适合在单击时选择。用户完成后，我需要将右侧框中的项目发布到 php 脚本。但是，我无法弄清楚如何捕获正确列表中的所有项目。脚本中没有表单，因此无法从 document.form 中获取。项目并没有真正被选中，它们只是填充列表，我想全部获取。是否有包含整个列表的变量？脚本很长，所以这里有一些可以工作的函数。本质上，我需要一种方法来在最后的右框中写出元素列表。感谢您的任何建议。

```
 function moveToRightOrLeft(side) {
    var listLeft = document.getElementById('selectLeft');
    var listRight = document.getElementById('selectRight');
    if (side == 1) {
        if (listLeft.options.length == 0) {
            alert('You have already assigned all items to the category');
            return false;
        } else {
            var selectedItem = listLeft.options.selectedIndex;
            move(listRight, listLeft.options[selectedItem].value, listLeft.options[selectedItem].text);
            listLeft.remove(selectedItem);
            if (listLeft.options.length > 0) {
                listLeft.options[0].selected = true;
            }
        }
    } else if (side == 2) {
        if (listRight.options.length == 0) {
            alert('The list is empty');
            return false;
        } else {
            var selectedItem = listRight.options.selectedIndex;
            move(listLeft, listRight.options[selectedItem].value, listRight.options[selectedItem].text);
            listRight.remove(selectedItem);
            if (listRight.options.length > 0) {
                listRight.options[0].selected = true;
            }
        }
    }
}

function move(listBoxTo, optionValue, optionDisplayText) {
    var newOption = document.createElement("option");
    newOption.value = optionValue;
    newOption.text = optionDisplayText;
    listBoxTo.add(newOption, null);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:49:40.450

首先，我认为您的语法有错误。要获取选择框的选定项的值，您可以使用以下内容：

```
var value = listLeft.options[listLeft.selectedIndex].value; 
```

要写出特定选择框中的所有选项，您应该能够执行以下操作：

```
var options = document.getElementById('selectRight').options;
for (i=0; i<options.length(); i++)
    document.write("value "+ i +" = "+ options[i].value); 
```

* * *

我稍微修改了您的代码，这是一个完整的工作示例：

```
<html>
<head>
    <style type="text/css">
        select
        {
            width:100px;
        }
    </style>
    <script type="text/Javascript">
        function moveToRightOrLeft(side)
        {
            if (side == 1)
            {
                var list1 = document.getElementById('selectLeft');
                var list2 = document.getElementById('selectRight');
            }
            else
            {
                var list1 = document.getElementById('selectRight');
                var list2 = document.getElementById('selectLeft');
            }

            if (list1.options.length == 0)
            {
                alert('The list is empty');
                return false;
            }
            else
            {
                var selectedItem = list1.options[list1.selectedIndex];
                move(list2, selectedItem.value, selectedItem.text);
                list1.remove(list1.selectedIndex);
                if (list1.options.length > 0)
                    list1.options[0].selected = true;
            }
            return true;
        }

        function move(listBoxTo, optionValue, optionDisplayText)
        {
            var newOption = document.createElement("option");
            newOption.value = optionValue;
            newOption.text = optionDisplayText;
            listBoxTo.add(newOption, null);
            return true;
        }

        function showContents(listBoxID)
        {
            var options = document.getElementById(listBoxID).options;
            for (var i = 0; i < options.length; i++)
                alert("Option "+ options[i].value +" = "+ options[i].text);
        }
    </script>
</head>
<body>
    <select id="selectLeft" multiple="multiple">
        <option value="1">Value 1</option>
        <option value="2">Value 2</option>
        <option value="3">Value 3</option>
    </select>
    <button onclick="moveToRightOrLeft(2)">&lt;</button>
    <button onclick="moveToRightOrLeft(1)">&gt;</button>
    <select id="selectRight" multiple="multiple">
    </select>
    <button onclick="showContents('selectRight')">Show Contents</button>
</body>
</html> 
```

# facebook - Facebook 粉丝专页上的“玩游戏”标签

> ID：10339159
> 
> 赞同：1
> 
> 时间：2012-04-26T18:20:57.503
> 
> 标签：facebook, button

我有一个粉丝专页和一个游戏应用程序。粉丝专页是在比赛之前创建的，所以我已经有一些喜欢，我想保留。我需要添加一些选项卡或按钮，将用户带到我的应用程序（www.apps.facebook.com/myapp）。粉丝专页的管理面板上没有关于此的选项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:35:19.853

欢迎来到 SO！

您必须使用链接到您的游戏页面的按钮构建一个 HTML/PHP 页面。
还请记住，您可以通过提供来自不同目录的内容，将相同的应用程序（您的游戏）与 Timeline 应用程序一起使用。您可以在 facebook 开发者应用程序中进行设置。

一些有用的资源：

**页面标签教程**
[https://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

**PHP SDK**
[https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

**Javascript SDK**
[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

# javascript - 在原始 javascript 中触发点击事件

> ID：10339160
> 
> 赞同：0
> 
> 时间：2012-04-26T18:20:59.397
> 
> 标签：javascript

在 jQuery 中，我可以执行以下操作：

```
$('#example').click(); 
```

原始Javascript中的等价物是什么？我尝试了以下方法：

```
document.getElementById('example').click(); 
```

但这似乎不起作用。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:26:04.203

我在我的框架中使用它：

```
 function fireEvent() {
        var eventType = null, i, j, k, l, event,
            einstellungen = {
            'pointerX': 0,
            'pointerY': 0,
            'button': 0,
            'ctrlKey': false,
            'altKey': false,
            'shiftKey': false,
            'metaKey': false,
            'bubbles': true,
            'cancelable': true
        }, moeglicheEvents = [
            ['HTMLEvents', ['load', 'unload', 'abort', 'error', 'select', 'change', 'submit', 'reset', 'focus', 'blur', 'resize', 'scroll']],
            ['MouseEvents', ['click', 'dblclick', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout']]
        ];

        for(i=0,j=moeglicheEvents.length;i<j;++i) {
            for(k=0,l=moeglicheEvents[i][1].length;k<l;++k) {
                if(arguments[1] === moeglicheEvents[i][1][k]) {
                    eventType = moeglicheEvents[i][0]; i = j; k = l;
                }
            }
        }

        if(arguments.length > 2) {
            if((typeof arguments[2]) === 'object') {
                change(einstellungen, arguments[2]);
            }
        }

        if(eventType === null) {
            throw new SyntaxError('Event type "' + arguments[1] + '" is not implemented!');
        }

        if(document.createEvent) {
            event = document.createEvent(eventType);

            if(eventType === 'HTMLEvents') {
                event.initEvent(arguments[1], einstellungen.bubbles, einstellungen.cancalable);
            } else {
                event.initMouseEvent(arguments[1], einstellungen.bubbles, einstellungen.cancelable, document.defaultView,
                    einstellungen.button, einstellungen.pointerX, einstellungen.pointerY, einstellungen.pointerX, einstellungen.pointerY,
                    einstellungen.ctrlKey, einstellungen.altKey, einstellungen.shiftKey, einstellungen.metaKey, einstellungen.button, arguments[0]);
            }

            arguments[0].dispatchEvent(event);
        } else {
            einstellungen.clientX = einstellungen.pointerX;
            einstellungen.clientY = einstellungen.pointerY;

            event = document.createEventObject();

            event = extend(event, einstellungen);

            arguments[0].fireEvent('on' + arguments[1], event);
        }
    } 
```

参数 1 是元素，第二个参数是事件，第三个（可选）选项。

对不起，我忘了重写一些部分：

`_.isObject()`至`(typeof arguments[2]) == 'object'`

并`_.change`进行更改并且需要此功能：

```
function change() {
    var name;

    for(name in arguments[1]) {
        if((typeof arguments[1][name]) === 'object') {
            if((typeof arguments[0][name]) === 'undefined') {
                arguments[0][name] = {};
            }

            change(arguments[0][name], arguments[1][name]);
        } else {
            arguments[0][name] = arguments[1][name];
        }
    }

    return arguments[0];
}; 
```

编辑：

在你的情况下，它会是`fireEvent(document.getElementById('example'), 'click');`

# asp.net-mvc-3 - 如何从 Jquery 检索多条记录到我的 RazorView 页面

> ID：10339162
> 
> 赞同：0
> 
> 时间：2012-04-26T18:21:02.813
> 
> 标签：asp.net-mvc-3, jquery, razor

我的剃须刀页面上有一个按钮“btnGetAddress”。单击此按钮时，我正在调用 Jquery 以使我的 addressItmes 对象显示在我的查看页面上。

单击“btnGetAddress”时，我可以`"JsonResult GetAddresses()"`在我的 Jquery 中点击并检索记录`(success: function (data))`。并且该数据有多个地址记录。但我不知道如何将这些数据带到我的视图中。请帮助我让我的数据显示在我的视图中

当我的页面被加载时，用户只会看到“btnGetAddress”按钮。当用户点击btnGetAddress时，它将调用Jquery Click函数从数据库中获取所有地址记录并在页面上显示每组记录

```
$("#btnGetAddress").click(function () { 

                debugger;
                var selected = $("#ddlType").val();
                if (selected == "")
                { selected = 0; }
                var dataToSend = {
                    SelectedTypeId: selected
                };
                $.ajax({
                    type: "GET",
                    url: '@Url.Action("GetAddresses", "Content")',
                    data: { SelectedTypeId: selected },
                    success: function (data) {
                        debugger;

                    },

                    error: function (error) {
                        var verr = error;
                        alert(verr);
                    }

                }); 
```

下面粘贴的是我的 JsonResult GetAddresses() ，它被调用以检索 addressItems

```
public JsonResult GetAddresses()
        {
   model.AddressItems = AddressService.RetrieveAllAddress(); 
 // My AddressItems is of type IEnumerable<AddressItems>   

 return Json(model.AddressItems, JsonRequestBehavior.AllowGet);
} 
```

这是我要显示地址记录的剃须刀视图页面。

```
 ........................

  <input type="submit" id="btnGetAddress" name="btnSubmit" value="Show Addresses" />

  if (!UtilityHelper.IsNullOrEmpty(Model.AddressItems))
    {

        foreach (var AddressRecord in Model.AddressItems)
        {
    <fieldset >
        <legend style="padding-top: 10px; font-size: small;">Address Queue(@Model.NumRecords)
        </legend>
        <table>
            <tr>
                <td>
                    <span>Index</span>

                </td>
                <td>
                </td>
                <td>
                    <input type="submit" id="btnDelete" name="btnSubmit" value="X" />
                    <br />
                </td>
            </tr>
            <tr>
                <td>
                    <span>Address1</span>
                    <br />
                </td>
                <td>
                    @Html.EditorFor(model => AddressRecord.Address )
                    @Html.ValidationMessageFor(model => AddressRecord.Address)
                </td>
            </tr>
            <tr>
                <td>
                    <span>Description</span>
                    <br />
                </td>
                <td>
                    @Html.EditorFor(model => AddressRecord.Description)
                    @Html.ValidationMessageFor(model => AddressRecord.Description)
                </td>
            </tr>
           <tr>
                <td>
                    <input type="submit" id="btnSave" name="btnSubmit" value="Save" />
                </td>
                <td>
                    <input type="submit" id="btnDelete" name="btnSubmit" value="Delete" />
                </td>
            </tr>
        </table>
    </fieldset>
        }
        }

    <fieldset> 
```

或者有没有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:34:37.787

由于您是通过 ajax 获取数据，因此您应该使用 jquery 模板引擎。基本上以您的方式获取数据，并在成功时执行类似的操作

```
<script language="javascript" type="text/javascript">
    $(function () {
        $.getJSON("/getprojects", "", function (data) {
            $("#projectsTemplate").tmpl(data).appendTo("#projectsList");
        });
    });
</script>

<script id="projectsTemplate" type="text/html">
    <section>
        <header><h2>Projects</h2></header>
        <table id="projects">
            <th>Name</th>
            {{tmpl(items) "#projectRowTemplate"}}
        </table>
    </section>
</script>

<script id="projectRowTemplate" type="x-jquery-tmpl">
  <tr>
    <td><a href="/show/${id}">${name}</a></td>
  </tr>
</script>

<div id="projectsList"></div> 
```

现在每个模板引擎都不同，但以上内容让您了解了您可以做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:53:36.237

如果要在控制器中返回 JSON 对象，则必须将视图转换为字符串并将其作为消息的一部分返回。如果你谷歌有一些方法可以做到这一点。

但是，我真的认为这是一个艰难的方法，为什么不把你从控制器中的 JSON 获得的数据放入一个模型中，然后返回你的视图和传入的模型数据。我认为这是更简单的方法。

# ef-code-first - EF Code First 与 SQL Server Express 2012 ConnectionString

> ID：10339163
> 
> 赞同：2
> 
> 时间：2012-04-26T18:21:03.440
> 
> 标签：ef-code-first, sql-server-2012-express

使用以下连接字符串一切正常。

```
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" /> 
```

我最近在本地机器上安装了 SQL Server 2012 Express 进行测试，但无法建立连接。这是我使用 Windows 身份验证的连接字符串。

```
<add name="ApplicationServices" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=testdb;Integrated Security=SSPI;" providerName="System.Data.SqlClient" /> 
```

我是一个尽最大努力搜索论坛的菜鸟，但我无法从“具有相似标题的问题”部分推迟我的解决方案。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T12:56:37.910

EntityFramework 代码首先在 app.config 或 web.config 文件中使用 defaultConnectionFactory，它将自动连接到 .\SQLEXPRESS。此配置如下所示：

```
<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"/>
  </entityFramework> 
```

如果您使用的是 EF Code First，您可能有一个派生自 DbContext 的类用作上下文。按照设计，EntityFramework 将查找与您的上下文类同名的连接字符串，并使用该连接字符串而不是 defaultConnectionFactory。这就是我使用它的方式：

```
<connectionStrings>
    <add name="ObjectContext" 
         connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=My.Db.Name; Integrated Security=True; MultipleActiveResultSets=True"
         providerName="System.Data.SqlClient"/>
  </connectionStrings> 
```

我的建议是检查 EF 是否使用它的 defaultConnectionFactory ，甚至通过添加以您的上下文命名的连接字符串来强制覆盖它。您还应该查看[这篇博客文章](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx)，其中提供了有关 EF 配置文件的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:36:40.260

你确定这部分连接是正确的吗？"数据源=.\SQLEXPRESS **[名称]**；

我没有使用 SQL Server 2012，但尝试删除 [Name] 文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:12:39.820

这对我有用

```
add name="MovieDBContext" connectionString="Data Source=.\SQLEXPRESS;
Initial Catalog=Movies;
Integrated Security="True" providerName="System.Data.SqlClient" 
```

我正在完成本教程并且必须解决它。MovieDBContext 是在 mvc 应用程序模型中的代码中创建的

```
public class MovieDBContext : DbContext
{
    public DbSet<Movie> Movies { get; set; }
} 
```

这会自动创建控制器类的 IDE，但直到我在 web.config 文件中获得连接字符串后它才会起作用。

# spring - 你如何在不同的 Spring 上下文之间共享 Spring bean？

> ID：10339174
> 
> 赞同：4
> 
> 时间：2012-04-26T18:21:35.177
> 
> 标签：spring, spring-mvc, blazeds

我们有一个使用 Spring BlazeDS 集成的应用程序。到目前为止，我们一直在使用 Spring 和 Flex，它运行良好。我们现在还需要添加一些 Spring MVC 控制器。Spring BlazeDS 文档指出，这样做的方法是在**web.xml**中声明两个单独的上下文，如下所示：

```
<servlet>
    <servlet-name>flex</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>flex</servlet-name>
    <url-pattern>/messagebroker/*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>spring-mvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring-mvc</servlet-name>
    <url-pattern>/spring/*</url-pattern>
</servlet-mapping> 
```

这是我的问题：在两种情况下都需要使用 Spring bean - **spring-mvc**和**flex**。如何做到这一点 - 如何在一个上下文中声明一个 bean（在 xml 中或通过组件扫描）并允许它与在另一个上下文中声明的 bean 共享？谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T22:49:44.587

使用[ContextLoaderListener](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#context-create)创建父上下文。`DispatcherServlet`上下文将自动成为该上下文的子级。

在父上下文中创建您的共享 bean，并在子上下文中的 bean 中引用它们。

如果您正在使用`<component-scan>`，请确保您不会意外地将类扫描到多个上下文中。[在这里](https://stackoverflow.com/questions/6959749/whats-a-smart-way-to-organize-classes-in-spring-3-for-component-scan/6960626#6960626)查看我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T17:20:58.837

将此添加到您的 web.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring/YOUR_APP_CONTEXT.xml</param-value>
</context-param> 
```

通过扫描和直接定义定义的 bean 都可用于您的 BlazeDS 和 SpringMVC 端点。

# sql - Ms Access Rank 并匹配两个查询

> ID：10339177
> 
> 赞同：0
> 
> 时间：2012-04-26T18:21:45.717
> 
> 标签：sql, ms-access, match, rank

我已经被这个问题困住了一段时间，但还不能解决这个问题。这里是：

我的 Acces 数据库中有一些表和一些查询。我有一个查询来选择一些字段并按它们的频率排序。这是为两张桌子完成的，给了我两个等级。看起来像这样（并且是按 DESC 排序的，所以频率越高）：

```
表 1 表 2
值 1 频率 1 值 2 频率 2

```

Table2.Value2 是 Table1.Value1 的子集，所以我想匹配 Value2 和 Value1 加上在 Table2 上添加一个显示 Value2 位置（排名）的列，这样我就可以比较它在 Table1 和 Table2 排名上的位置。所以我会有一些东西喜欢：

```
表3
值 1 频率 1 频率 2 位置表 2

```

我已经搜索了如何返回字段的行号（无法使其工作），我可以将两个表放在一起并按值匹配，但无法得到我需要的结果。

我对SQL的了解有限，而且我根本不懂VB，所以请善待:)提前谢谢

**编辑** 示例：

```
表 1 表 2
姓名 频率 姓名 频率
玛丽 5 保罗 2
约翰福音 4 约翰福音 1
保罗 3

```

我想要的输出：

```
表3               
名称 频率 Frequency2 RankIn2
Mary 5 //没有出现在table2中，freq=null rankin2=null
John 4 1 2 //table2 的第二行
Paul 3 2 1 //table2 的第一行

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:43:42.083

您可以分两步执行此操作：

第 1 步——创建一个计算表 2 排名的查询（例如，命名为“带排名的表 2”）。SQL 可能如下所示：

```
SELECT
    [Table 2].[Name],
    [Table 2].[Frequency],
    Count(*) AS [Rank]
FROM
    [Table 2],
    [Table 2] AS [Self]
WHERE
    [Self].[Frequency]>=[Table 2].[Frequency]
GROUP BY
    [Table 2].[Name],
    [Table 2].[Frequency]; 
```

如果表 2 中存在“关系”（即频率相同的不同名称），则此查询将为两者分配相同的排名。如果您不希望这样做，请更改 WHERE 子句以指定您希望如何打破平局。例如，如果出现平局，WHERE 子句...

```
WHERE
    [Self].[Frequency]>[Table 2].[Frequency]
    OR
    ([Self].[Frequency]=[Table 2].[Frequency] AND [Self].[Name]<=[Table 2].[Name]) 
```

...将编号较低的等级分配给字母表中排在第一位的名称。

第 2 步——创建另一个查询，将第一个查询连接到表 1。SQL 可能如下所示：

```
SELECT
    [Table 1].[Name], 
    [Table 1].[Frequency], 
    [Table 2 with Rank].[Frequency] AS [Frequency2], 
    [Table 2 with Rank].Rank AS [RankIn2]
FROM 
    [Table 1] LEFT JOIN [Table 2 with Rank] 
        ON [Table 1].[Name] = [Table 2 with Rank].[Name]
ORDER BY
    [Table 1].[Frequency] DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:45:10.950

我会使用 VBA，因为 Access 的有限 SQL 不能很好地理解排名概念。以下是步骤。

1.  为 Table2 创建第三个字段并将其命名为 Rank。

2.  通过按 Alt+F11、Insert->Module 并在打开的编辑器窗口中粘贴以下代码来创建以下子例程。

    公共子排名表（）

    ```
    Dim rs As Recordset, iRank As Integer, strQuery As String

    strQuery = "SELECT * FROM Table2 ORDER BY Freq DESC"

    Set rs = CurrentDb.OpenRecordset(strQuery, dbOpenDynaset)

    rs.MoveFirst
    iRank = 1

    Do

        rs.Edit
        rs.Fields(3) = iRank
        rs.Update

        rs.MoveNext
        iRank = iRank + 1

    Loop While Not rs.EOF

    rs.Close 
    ```

    结束子

3.  运行上述子程序。（请记住，每次对 Table2 进行更新时，您都必须运行它。）

4.  创建查询

    SELECT Table1.Name, Table1.Frequency, Table2.Frequency AS Frequency2, Table2.Rank FROM Table1 LEFT OUTER JOIN Name ON Table1.Name = Table2.Name ORDER BY Table2.Frequency

# c++ - 3d 游戏内的实时聊天框

> ID：10339183
> 
> 赞同：1
> 
> 时间：2012-04-26T18:22:10.363
> 
> 标签：c++, objective-c, real-time-data

**关于发生了什么的基本信息：**

我有一个 3d 多人游戏，大约只有 15-20 个用户连接。我使用 C++ 作为与目标 c 混合的编码，通过基于套接字的 http post 请求，有一个小型实时聊天框发送和接收消息。我们正在使用我们的另一台 Mac 作为游戏/用户连接到的网络/游戏服务器/主机。

**我的问题：**

基于套接字的 http post 请求可以用作 3d 多人游戏中的实时聊天吗？

如果是，速度是快还是慢？

如果没有，为什么不呢？它对我来说很好用，速度还可以快

是否有任何在线游戏具有基于套接字的 http post 请求，用作游戏内部的实时聊天？

还有其他更好的方法吗？

如果是，是什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-10T19:04:07.960

**问题**：基于套接字的 http post 请求可以用作 3d 多人游戏中的实时聊天吗？

**答**：是的，您绝对可以，我将它们用于实时客户端-服务器模型，包括实时文件传输（使用文件分块）和消息传递，并且效果很好。速度实际上取决于它对您的工作方式，我有大量文件要分块并发送到服务器，但它仍然对我有用。

**问题**：是否有任何在线游戏具有基于套接字的 http post 请求，用作游戏内部的实时聊天？

**答**：显然 NodeJs 是更好的选择，C# 和 .Net 框架 Windows Communication Foundation (WCF)，但 C++ 套接字是一个不错的选择。

# ajax - Spring mvc Ajax更新jstl变量--jstl未显示

> ID：10339187
> 
> 赞同：0
> 
> 时间：2012-04-26T18:22:17.640
> 
> 标签：ajax, spring-mvc, web, jstl

我正在使用 spring mvc 开发一个小型 Web 应用程序。我将变量放入视图中，然后从前端显示为 jstl。在我的主页上，我有

```
function getExecJob(execid){
alert(execid);
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      document.getElementById("execDetailDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","execJobDetail.action?execId="+execid,true);
xmlhttp.send(); 
```

}

execJobDetail.action 返回页面 execJobDetail.jsp，

```
 <div id="status_code_div">
                        HTTP Status Code Summary <br/>
                            <table width="523" id="http_status_code_table">
                                    <tr>
                                        <th width="268" >HTTP Status Code</th>
                                        <th width="129" ># of Urls</th>
                                        <th width="110" >%</th>
                                     </tr>
                                    <c:forEach var="entry" items="${reportMap}">
                                    <tr>
                                        <td scope="col" class="row_type"> ${entry.key}</td>
                                        <td scope="col" class="row_value">${entry.value}</td>
                                        <td scope="col" class="row_value">${(entry.value)*1.0/toal}</td>
                                </tr>
                            </c:forEach>
                            </table>
                    </div>
                    </c:if> 
```

但它总是返回页面，让 jstl 东西空白。谁能给我一些建议！！！！谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:42:27.903

如果您实际上没有在 JSP 顶部声明 JSTL taglib，就会发生这种情况。这样它就不会被解析或处理，最终在生成的 HTML 输出中以纯文本形式出现。

将以下行添加到 JSP 顶部以运行 JSTL 标记库：

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

### 也可以看看：

*   [我们的 JSTL 标签 wiki 页面](https://stackoverflow.com/tags/jstl/info)

# facebook - 如何获取现有 Facebook 页面的 App ID？

> ID：10339192
> 
> 赞同：11
> 
> 时间：2012-04-26T18:22:25.973
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-comments

我有以下情况：

我的客户已经有一个带有时间线和大量喜欢的 Facebook 页面。我的工作是将 facebook 评论和 facebook like 整合到他们的网站上。为此，我需要一个 App ID，我可以通过在 developers.facebook.com 上创建一个新应用轻松获得它

我想要的是以某种方式将此应用程序连接到客户端的页面；

*   它显示在他们的洞察报告中
*   也许喜欢和互动会连接到客户的页面而不是应用程序

我已经花了很多时间试图让这个工作，但我还没有看到办法。我可以想象，当我创建一个新应用程序然后向该应用程序添加一个页面时，我将它们连接起来。虽然我客户的公司不是“应用程序”，但它是一个现实世界的业务。此外，这样我的客户就会失去他们当前页面上的所有喜欢。

请帮我找出正确的方法来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-02T15:12:13.767

如果你有一个漂亮的 URL，你可以去[http://graph.facebook.com/](http://graph.facebook.com/) {yourpagename}。页面的 App ID 将位于顶部。如果您没有页面的 Pretty URL，则页面的 App ID 是其 URL 末尾的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T18:25:16.557

无法链接现有应用程序和页面（“链接”是指将页面标记为代表该应用程序的页面） - 您当然可以将应用程序作为选项卡安装到您的页面上，或使用应用程序管理页面和发布更新等，这两者的文档都在主要的开发者网站上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-17T19:52:53.890

登录您的页面>>点击设置>点击左侧面板中的应用程序>选择您的页面应用程序>>转到底部您可以在此处找到用户ID

# php - 仅检查名称而不是扩展名的表单输入的最佳方法是什么

> ID：10339197
> 
> 赞同：0
> 
> 时间：2012-04-26T18:22:42.080
> 
> 标签：php, regex, arrays

在我的表单中，有一个用于重命名文件的输入。当他们选择要上传的文件时，会检查它以确保它只是一个 .pdf 文件。我正在尝试检查输入以确保他们没有为新名称添加文件扩展名。我正在尝试检查“pdf”的任何变体这是我所拥有的，但有没有更好的方法来做到这一点。欢迎任何帮助，谢谢

```
 <?php
    function get_file_extension($pdf)
    {
     return substr(strrchr($pdf,'.'),0);
    }

    $pdf = "test.pdf";

    $test = strstr($pdf, '.');
    $pdf_ext = array('.pdf','.PDF','.Pdf','.PDf','.pdF','.pDf','.PdF','.PdF');
    $test =  get_file_extension($pdf);
    if($test == in_array($test,$pdf_ext)) {
       echo 'you do not a .pdf';
    } else {
       echo 'name ok';
    }
   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:26:29.527

只需使用`strtolower`or `strtoupper`：

```
if(strtolower($test) == 'pdf') {
   echo 'pdf';
} else {
   echo 'no pdf';
} 
```

或者

```
if(strtoupper($test) == 'PDF') {
   echo 'pdf';
} else {
   echo 'no pdf';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:42:56.720

除了不允许用户输入文件扩展名为 .pdf 的名称外，您还可以检查他们是否输入，然后为他们删除。

```
<?php

function get_filename_without_pdf($file){
    preg_match('/(.+?)(\.pdf)?$/i', $file, $matches);
    return $matches[1];
}

echo get_filename_without_pdf('test1.pdf') . PHP_EOL;
echo get_filename_without_pdf('test2.PdF') . PHP_EOL;
echo get_filename_without_pdf('test3.txt') . PHP_EOL;
echo get_filename_without_pdf('test4') . PHP_EOL; 
```

**输出**

```
test1
test2
test3.txt
test4 
```

# facebook - 通过 Facebook PHP API 在时间轴上固定或加注星标

> ID：10339204
> 
> 赞同：3
> 
> 时间：2012-04-26T18:22:57.063
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

有什么方法可以通过图形 API 以编程方式将 API 应用程序发布到用户或页面时间轴的帖子固定或加注星标？

请求权限不是问题；我假设此应用程序的用户将授予 publish_actions 或完整的 publish_stream 权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T10:52:21.743

在这里查看答案：[https ://stackoverflow.com/a/21550302/1784062](https://stackoverflow.com/a/21550302/1784062)

**目前似乎无法通过 Graph API 进行固定 afaik **。****

 **用于**主演**：

```
POST /<post_id>/ with param timeline_visibility = starred 
```

`timeline_visibility`必须是以下值之一：`hidden`, `normal`, `starred`.**

# c++ - 使用模板调用正确的派生类方法而不使用虚拟？

> ID：10339208
> 
> 赞同：0
> 
> 时间：2012-04-26T18:23:12.053
> 
> 标签：c++, performance, templates, inheritance

我有类似附件的东西。我基本上有一个 Doer 类，我想从它的成员调用 Func() 而不使用虚拟或尽可能少的代码重复。此外，提升也不是一种选择。我知道这个例子可能不太清楚，但我希望你能明白。乙

```
class Base { // a bunch of shared base functionality. Cannot be instantiated by itself  }

class D1 : public Base
{
   void Func();
}

class D2 : public Base
{
   void Func();
}

//----

class Doer
{
   Doer(Base* b) : base(b) { } 

   void DoIt()
   {
      base->Func();
   }

   Base* base;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:28:02.833

好吧，您可以进行`Doer`模板化：

```
template<class T>
class Doer
{
public:
   Doer(T* b) : base(b) { } 

   void DoIt()
   {
      base->Func();
   }

private:
   T* base;
}; 
```

但为此，我只想添加一个`virtual void Func()`to 来`Base`代替。

请注意，无论哪种情况，您都可能希望`Func`公开 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:51:52.523

这种方法怎么样：

```
class Base { // a bunch of shared base functionality. Cannot be instantiated by itself  
   ~Base() { //stuff }
   void Func();
}

class D1 : public Base
{
   void Func();
}

class D2 : public Base
{
   void Func();
}

//----

class Doer
{
   Doer(Base* b) : base(b) { } 

   void DoIt()
   {
      base->Func();
   }

   Base* base;
} 
```

由于 Func() 不是虚拟的并且被孩子们超载，不应该有一个 vtable 或任何招致的性能损失，对吧？

此外，需要在基类上调用析构函数，但将其声明为虚拟会强加一个 vtable？

谁能澄清一下？

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:59:59.707

你可以使用混合！它们有利于优化（很多内联机会并且没有虚拟方法调用），但有时有点难以推理。这是您使用 mixins 实现的示例：

```
template<class Base> class Doer : Base {
public:
    Doer() {}
    void DoIt() {
        this->Func();
    }
};

class D1 {
public:
    void Func() {
        cout<<"Hello from D1"<<endl;
    }
};

class D2 {
public:
    void Func() {
        cout<<"Hello from D2"<<endl;
    }
}; 
```

使用它有点不同，因为 Doer 与您的 Base 类实例相同。以下程序：

```
Doer<D1> *d1 = new Doer<D1>();
Doer<D2> *d2 = new Doer<D2>();
d1->DoIt();
d2->DoIt(); 
```

产生输出：

> 来自D1的你好
> 
> 来自D2的你好

这有一个明显的缺点，即 D1 和 D2 没有强制执行“Func”方法。如果你忘记了，你会得到一个非常方便的 C++ 模板实例化错误，而不是“找不到方法”。如果您要经常使用模板，Clang 是一个不错的选择，因为与 g++ 相比，您会得到更多有用的编译器错误。构造函数的另一个缺点是：Doer 定义了默认构造函数，但没有公开 D1 的构造函数。C++11 允许构造函数继承，因此可以使用编译器标志来避免这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:51:03.353

事实上，您不需要参数化整个 Doer 类。这会很好用（接近 ccurtsinger 的建议）：

```
class Base {
public:
    void Func() {};
};

class B1 {
public:
    void Func() { cout << "in B1::Func" << endl;}
};

class B2 {
public:
    void Func() { cout << "in B2::Func" << endl;}
};

class Doer {
public:
    template <class B> void Do(B *pb) {pb->Func();}
};

int main() {
    B1 b1;
    B2 b2;
    Doer d;
    d.Do<B1>(&b1);
    d.Do<B2>(&b2);

    return 0;
} 
```

但实际上还有一个更大的问题：从您说您最终使用的代码中，您似乎在编译时确切知道您正在处理哪些派生类对象，因此代码如下：

```
for(auto i = begin(B1_container); i != end(B1_container); ++i) {
    i->Func();
}
for(auto j = begin(B2_container); j != end(B2_container); ++j) {
    j->Func();
} 
```

应该做的伎俩。

我的意思是 - 你要么事先知道你在这里使用 B1-s，在那里使用 B2-s，而且 Func() 调用没有额外的成本，或者你不知道你要处理哪一个使用 next 然后您需要检查它是某种特征或其他类型的动态类型，这是一个“if”，因此会出现分支，从而导致错误预测和开销。请注意，我没有添加函数调用的成本，无论如何，这两种情况都存在。

# javascript - Cloud9 在生成子进程时抛出错误，有解决方法吗？

> ID：10339215
> 
> 赞同：0
> 
> 时间：2012-04-26T18:23:42.063
> 
> 标签：javascript, node.js, cloud9-ide

由常见问题解答[http://support.cloud9ide.com/entries/20862101-cloud9-throws-an-error-when-i-run-code-that-spawns-a-child-process-why](http://support.cloud9ide.com/entries/20862101-cloud9-throws-an-error-when-i-run-code-that-spawns-a-child-process-why) cloud9 不支持生成子进程确认共享环境中的进程。有解决方法吗？

或者，如果您需要生成子进程，您是否可以不再使用 cloud9？似乎必须有某种方法可以使它起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:31:38.060

（目前）唯一的方法是在本地安装 Cloud9（参见[GitHub 页面](http://github.com/ajaxorg/cloud9)）。

**编辑**Cloud9 现在通过为每个项目提供一个 VM 解决了这个问题。

# dql - Documentum - 可以在不删除关系中的记录的情况下删除子记录

> ID：10339220
> 
> 赞同：0
> 
> 时间：2012-04-26T18:24:17.900
> 
> 标签：dql, documentum

您好，我是 Documentum 的新手，但出于某些数据提取目的使用 DQL。

在 dm_relation 我有一个包含 parent_id 和 child_id 的关系，它们是 2 种类型的 r_object_ids（我的表）

我面临一个问题。如果您可以告诉我，即使在子表（类型）中删除了记录，关系中也可以存在记录吗？

我希望我很清楚。另外我现在假设如果删除父记录（包含 parent_id），则关系中不存在记录。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:37:07.030

我认为这取决于关系的属性。此处提出了类似的问题：[https ://community.emc.com/message/591116#591116](https://community.emc.com/message/591116#591116)

# c++ - 如何在 SWIG 中获取与 C++ 对象关联的 *the* PyObject*？

> ID：10339222
> 
> 赞同：1
> 
> 时间：2012-04-26T18:24:22.437
> 
> 标签：c++, python, swig

我可以使用 SWIG_NewPointerObj 将 C++ 对象传递给 Python，但它不是PyObject* *，*所以我无法在 Python 中正确使用它。

**我的问题是**：有没有办法在 C++ 中获取从 Python 创建的 C++ 对象*的PyObject*？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:42:40.667

`PyObject`每个 C++ 对象没有唯一的。例如，如果您包装以下内容：

```
struct foo {};

struct foo *test() {
  static struct foo inst;
  return &inst;
} 
```

`test()`对Python 内部的每次调用都会返回一个新的`PyObject`- SWIG 没有简单的方法来知道它们是相同的。

返回的`PyObject`s 是瘦包装器，即没有本地状态的 C++ 对象周围的代理。从 Python 的角度来看，它们看起来和行为都像同一个对象，因为它们将所有内容委托给 C++ 对象。

如果您想获得*a* `PyObject`，您可以通过多种方式做到这一点，但通常这不是一个好主意，因为您对该对象所做的任何更改都不会从其他`PyObject`s 中看到，即使它们引用了同一个 C++ 对象。

# java - JSF 页面以重定向循环结束

> ID：10339228
> 
> 赞同：1
> 
> 时间：2012-04-26T18:24:40.287
> 
> 标签：java, jsf, loops, redirect

我的浏览器总是返回一个重定向循环，我不知道为什么，看起来当我访问**login.html**时它正在调用我的一些方法。

这是 login.html 文件：

```
<ui:composition
    template="/templates/master.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html">
    <ui:define name="body">

        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12">
                    <h:form class="form-horizontal">
                        <fieldset>
                            <legend>Bem vindo a Sergio's</legend>
                            <br/>
                            <p>Preencha os campos abaixo para entrar no sistema.</p>
                            <div class="control-group">
                                <label class="control-label" for="user">Usuário</label>
                                <div class="controls">
                                    <h:inputText required="true" id="user" value="#{loginController.username}" class="input-medium" />
                                    <h:message for="user" />
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label" for="password">Senha</label>
                                <div class="controls">
                                    <h:inputSecret required="true" id="password" value="#{loginController.password}" class="input-medium"/>
                                    <h:message for="password" />
                                </div>
                            </div>
                            <div class="form-actions">
                                <h:commandButton action="#{loginController.login()}" class="btn btn-primary" value="Entrar"/>
                            </div>
                        </fieldset>
                    </h:form>
                    <h:messages/>
                </div>
            </div>
        </div>

    </ui:define>
</ui:composition> 
```

这是登录控制器：

```
package com.erp3.gui.controllers;

import java.io.IOException;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;

@ManagedBean
public class LoginController {

    public Boolean isLoggedIn = false;
    private String username;
    private String password;
    private FacesMessage facesMessage;
    public ExternalContext externalContent;

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public Boolean getIsLoggedIn() {
        return isLoggedIn;
    }

    public void setIsLoggedIn(Boolean isLoggedIn) {
        this.isLoggedIn = isLoggedIn;
    }

    public void login() throws IOException {
        if (this.getUsername().equals("daniel") && this.getPassword().equals("123")) {
            this.isLoggedIn = true;
            externalContent = FacesContext.getCurrentInstance().getExternalContext();
            externalContent.getSessionMap().put("loginController", this);
            externalContent.redirect(externalContent.getRequestContextPath() + "/views/home.html");
        } else {
            this.isLoggedIn = false;
            facesMessage = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Usuário ou senha inválida.", username);
            FacesContext.getCurrentInstance().addMessage(null, facesMessage);
            externalContent.redirect(externalContent.getRequestContextPath() + "/views/login.htm");
        }
    }

    public void logOut() throws IOException {
        externalContent = FacesContext.getCurrentInstance().getExternalContext();
        externalContent.getSessionMap().remove("loginController");
        externalContent.redirect(externalContent.getRequestContextPath() + "/views/login.html");
    }

} 
```

我有一个 master.html 是我的模板，它正在调用一个带有以下内容的 top.html：

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="#">Project name</a>
                <div class="btn-group pull-right">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="icon-user"></i>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Conta</a></li>
                        <li class="divider"></li>
                        <li><a href="#{loginController.logout}">Sair</a></li>
                    </ul>
                </div>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="active"><a href="#">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:59:26.680

发现了问题，在我的`top.html`，我正在调用`loginController.logOut()`一个链接，但我不知道它为什么会自动执行，没有等待我的点击，所以我更改了`<a>`for`<h:commandLink/>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:05:54.837

*模板文本*中的EL 表达式在呈现响应期间立即被评估并被视为值表达式。即它们的返回值被打印为 HTML 输出的一部分。“Plain vanilla” HTML*也是*模板文本。所以以下

```
<li><a href="#{loginController.logOut()}">Sair</a></li> 
```

基本上会调用该方法，`href`在渲染响应期间将其返回值打印为 URL。然后生成的 HTML 是：

```
<li><a href="">Sair</a></li> 
```

*（是的，这`href`是空的，因为您实际上返回`void`而不是有效`String)`*

但是在该方法中，您告诉 JSF 重定向到登录页面，因此它最终陷入无限循环。

这不是你真正想要的。您打算将其作为支持 bean 操作方法调用。您应该`UICommand`为此使用完全值得的 JSF 组件，例如`<h:commandLink>`.

```
<li><h:form><h:commandLink value="Sair" action="#{loginController.logOut()}" /></h:form></li> 
```

这样，您还可以更改`logOut()`方法以返回完全值得的导航结果：

```
public String logOut() {
    FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
    return "/views/login.html?faces-redirect=true";
} 
```

应该仅在`ExternalContext#redirect()`您想要重定向到非 JSF URL 时使用，或者当您实际上不在操作方法中时使用。

# java - Google App Engine 后端出现 503 服务器错误

> ID：10339231
> 
> 赞同：1
> 
> 时间：2012-04-26T18:24:48.163
> 
> 标签：java, google-app-engine

整天都在忙这个，希望有人能帮忙。我正在尝试在谷歌应用引擎上使用后端来运行一个将启动 100,000 个任务的进程

每当我尝试调用后端服务网址时，我都会得到

**错误：服务器错误您请求的服务尚不可用。请在 30 秒后重试。**

在应用引擎控制台上，运行 appcfg backends update 后，我的支持显示为已启动

运行 appcfg /war backends start / stop 工作正常，没有错误

我的后端.xml：

```
<backends>
    <backend name="maint">
        <class>B2</class>
        <instances>1</instances>
        <options>
            <dynamic>true</dynamic>
            <public>true</public>
        </options>
    </backend>
</backends> 
```

我没做什么？？

# php - 为自定义 CMS 管理面板保存登录详细信息的最佳方式是什么？

> ID：10339232
> 
> 赞同：1
> 
> 时间：2012-04-26T18:25:03.047
> 
> 标签：php, database, security, content-management-system, administrator

我正在为我的一些朋友开发一个非常基本的 CMS。我为 CMS 需要的文章、用户和其他实体创建了一个数据库。

当然，它需要一个管理员帐户才能登录到管理面板。
但我不知道保存管理员详细信息的最安全方法是什么。与普通用户一起存放是否安全，或者我应该为他们制作一张特殊的桌子？

我不确定这是否是保留这些重要细节的最安全方法。那么你们中的任何人认为我应该忘记数据库，并使用另一种安全的方式来保存这些数据吗？

谢谢，
-罗宾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:28:27.527

假设密码被安全存储（如果您存储密码，则使用加盐哈希），则无需将管理员与普通用户区别对待。管理员只是拥有在用户表中定义的更多权限（例如用户级别或超级用户状态）或单独的角色表。

# java - 使用注解 @Loader 和 @NamedQuery Hibernate 加载集合

> ID：10339236
> 
> 赞同：3
> 
> 时间：2012-04-26T18:25:16.673
> 
> 标签：java, hibernate, annotations, polymorphism

我正在尝试使用**@Loader**注释和**@NamedQuery**加载集合，但不起作用。如果我使用**@NamedNativeQuery（**如果它有效），我需要使用**@NamedQuery**，因为我在HQL 中使用这个查询。**该查询使用多态性，因此除了使用@NamedQuery**之外我别无选择。

代码：

```
@Entity
@NamedQuery(name = "loadFacade", query = "FROM Facade WHERE contact_id = ?")
@Table(name = "Contact")
public class Contact extends Atom {

   @OneToMany
   @Loader(namedQuery = "loadFacade")
   @JoinColumn(name = "atom_id")
   private List<Atom> facades;

} 
```

此配置总是抛出错误：

**命名 SQL 查询未知：loadFacade**

¿ 是否可以将注释 @Loader 与 @NamedQuery 注释一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:43:27.510

如果您可以在**@Loader中使用****NamedQuery** ，那您一定非常幸运。[这是](https://hibernate.onjira.com/browse/HHH-2989)**Hibernate JIRA中****打开**状态下的另一个问题。

# c - 根据现有代码定义正确的结构

> ID：10339237
> 
> 赞同：2
> 
> 时间：2012-04-26T18:25:31.070
> 
> 标签：c, pointers, struct

我在 C 结构方面遇到了一些家庭作业问题……如果有人能提供帮助的话。因为我不明白。

工作代码包含这些位（这是一个游戏，蛇的头部包含方向）：

```
game_t *game = …;

game->snake.head->direction = …;
snake_info(game->snake)
snake_destroy(&(game->snake)); 
```

原型（我显然无法更改）：

```
void snake_info(snake_t const *snake);
void snake_destroy(snake_t *snake); 
```

还有我正在尝试构建的结构。

```
typedef struct game {
    snake_t snake; // to match call to snake_destroy and direction assignation
    // or
    snake_t *snake; // to match call to snake_info
} game_t; 
```

但我不能让两者同时工作。

**编辑：**实际`struct`调用`snake`时调用了`game`. 我错过了一些明显的东西还是这些原型（或调用）有问题？

**编辑2：**

第一个解决方案的编译器错误`snake_t snake`（在 中`game`）：

```
snake.c: In function ‘game_print’:
snake.c:244:5: erreur: incompatible type for argument 1 of ‘snake_info’
gamecore.c:20:6: note: expected ‘const struct snake_t *’ but argument is of type ‘snake_t’ 
```

第二种解决方案的编译器错误 ̀snake_t *snake`：

```
snake.c: In function ‘game_destroy’:
snake.c:205:5: attention : passing argument 1 of ‘snake_destroy’ from incompatible pointer type
gamecore.c:54:6: note: expected ‘struct snake_t *’ but argument is of type ‘struct snake_t **’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:17:28.340

编译器错误说明了一切，您必须使用以下方式定义结构`struct snake_t`：

```
typedef struct game {
    struct snake_t snake;
} game_t; 
```

你必须在给定的代码中使用`snake_t snake`因为。`snake.head`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:32:00.320

您的结构不正确。您有两个同名“蛇”的成员

两者都必须在结构范围内具有唯一名称以允许合法代码

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T21:35:49.247

使用指针的位置有点混乱。随着更多的练习，使用指针对你来说会变得更自然。

此外，使用与结构名称不冲突的变量名称。

取决于您希望在代码中使用多少指针。

对现有代码的最小编辑：

```
typedef struct game {
    snake_t snake; // A snake_t instance is created with the game instance.. 
} game_t; 
```

--

```
game_t *game = …;

game->snake.head->direction = …;

// snake_info requires a snake_t reference so pass the address of game->snake
//snake_info(game->snake);
snake_info(&(game->snake));
snake_destroy(&(game->snake)); 
```

最小的指针：

```
typedef struct game {
    snake_t snake; // A snake_t instance is created with the game instance.. 
} game_t; 
```

--

```
// Use a game_t variable instead of a pointer
//game_t *game = …;
game_t aGame = …; // renamed variable to avoid conflicts

// change the snake.head to snake->head since the game object uses a snake_t pointer
// game->snake.head->direction = …;
aGame.snake.head->direction = …; 

// Pass the address of aGame.snake 
snake_info(&(aGame.snake));

// this line is okay since you pass the address of game->snake.
snake_destroy(&(aGame.snake)); 
```

更多地使用指针：

```
typedef struct game {
    snake_t *snake; // A pointer to a snake_t instance. 
} game_t; 
```

--

```
// Create a game_t instance
game_t aGame = …;

// Create a snake_t instance
snake_t aSnake = ... ;

// Create a game_t pointer and assign it the address of aGame
game_t *aGamePtr = &aGame;

// Using aGamePtr, assign the snake variable in aGame the address of aSnake
aGamePtr->snake = &aSnake;

// Since the game_t object is a snake_t pointer,
// change the snake.head to snake->head 
// game->snake.head->direction = …;
aGamePtr->snake->head->direction = …; 

// this line is okay since aGamePtr->snake is a pointer.
snake_info(aGamePtr->snake);

// Since game object uses a snake_t pointer, pass aGamePtr->snake directly
// snake_destroy(&(game->snake));
snake_destroy(aGamePtr->snake); 
```

# c# - 如何使用自定义方法/ActionLink 进行分页？

> ID：10339241
> 
> 赞同：0
> 
> 时间：2012-04-26T18:25:39.740
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我可能在这里完全错了，但这部分是我要问的。

我正在使用 MVC3 创建博客，但遇到了一些问题。我的主页目前正确列出了每篇博客文章及其相应的评论和主题。我希望它仅限于一些帖子，所以这是我在 HomeController 中的代码。

```
public class HomeController : Controller
{
    private MyDB db = new MyDB();

    public ActionResult Index()
    {
        var posts = (from p in db.Set<BlogPost>()
                     orderby p.DateCreated descending 
                     select new PostViewModel
                                {
                                    Title = p.Title,
                                    DateCreated = p.DateCreated,
                                    Content = p.Content,
                                    Topics = p.Topics,
                                    Comments = p.Comments,
                                    CommentCount = p.Comments.Count
                                }).Take(5).ToList();

        IEnumerable<Topic> topics = from t in db.Topics
                                    select t;

        var blog = new BlogViewModel
        {
            Post = posts,
            Topics = topics.Select(t => new SelectListItem { 
                Value = Convert.ToString(t.id),
                Text = t.Name
            })
        };

        return View(blog);
    }
} 
```

正如我所说，这很好用。我有单独的主题，因为我想最终按这些排序（我也不知道从哪里开始，但那是另一个故事）。

我的主要问题是我想在 5 个选定的帖子下有一个“下一个”和“上一个”按钮，当点击时，抓住下一个 5 或前 5 个。我被告知使用...

```
@Html.ActionLink("Next >>", "ActionName", "Home", Custom arguement?) 
```

我在 HomeController 中编写自定义方法并获取下一个或上一个 5 的解决方案类型。这完全正确吗？我想了解这样的最佳使用场景。我对 MVC3 完全陌生，所以我不是在寻找捷径，我觉得我可能已经做了一些。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:33:51.640

我看到两个最好的情况：

您可以使用 Ajax/Jquery 并执行此操作。

两个您使用“部分”视图。这样，当有人按下接下来的五个操作链接时，您不会影响整个视图。因此，您将只为帖子制作一个局部视图，然后控制器接收对接下来五个帖子的请求并返回一个带有包含五个帖子项目的模型的局部视图。

选择你觉得更舒服的那个，但是如果你正在学习 MVC，那么选择 2 可能更适合你练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:36:07.490

你可以看看： http: [//nerddinnerbook.s3.amazonaws.com/Part8.htm](http://nerddinnerbook.s3.amazonaws.com/Part8.htm)。此外，如果您想通过 ajax 请求获取数据，我建议您将包含数据的部分视图转换为字符串（[使用 JSON（ASP MVC 3）返回 Razor 部分视图](https://stackoverflow.com/questions/3694645/return-razor-partial-view-using-json-asp-mvc-3)）并使用 jquery 加载它（[http://api. jquery.com/load/](http://api.jquery.com/load/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:36:18.857

我会在您的控制器上请求另一种操作方法（使用 Ajax 或普通），然后重用您在初始页面渲染中使用的相同视图。

```
public ActionResult Index(int? pageNumber)
{
     if(!pageNumber.HasValue)
         return Index();

     var posts = ...; // get posts

     var set = posts.Skip(pageNumber * itemsPerPage).Take(itemsPerPage);
     // or pageNumber - 1 if you want to be 1-index based

     return View(...); //or PartialView() if doing ajax, or even Json() if you want to bind on the client side
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:01:46.240

[https://github.com/TroyGoode/PagedList](https://github.com/TroyGoode/PagedList)

```
public class HomeController : Controller
{
    public ActionResult Index(int? page)
    {
    var posts = (from p in db.Set<BlogPost>()
                 orderby p.DateCreated descending 
                 select new PostViewModel
                            {
                                Title = p.Title,
                                DateCreated = p.DateCreated,
                                Content = p.Content,
                                Topics = p.Topics,
                                Comments = p.Comments,
                                CommentCount = p.Comments.Count
                            });

    var pageNumber = page ?? 1; // if no page was specified in the querystring, default to the first page (1)
    posts = posts.ToPagedList(pageNumber, 25); // will only contain 25 posts max because of the pageSize

    var blog = new BlogViewModel
    {
        Post = posts,
        Topics = topics.Select(t => new SelectListItem { 
            Value = Convert.ToString(t.id),
            Text = t.Name
        })
    };

    return View(blog);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T19:14:20.017

您可以像下面的示例代码一样创建您的控制器：

```
 public ViewResult List(string category, int page = 1) {

        ProductsListViewModel viewModel = new ProductsListViewModel {
            Products = repository.Products
                .Where(p => category == null ? true : p.Category == category)
                .OrderBy(p => p.ProductID)
                .Skip((page - 1) * PageSize)
                .Take(PageSize),
            PagingInfo = new PagingInfo {
                CurrentPage = page,
                ItemsPerPage = PageSize, //4 for example
                TotalItems =  category == null ? 
                    repository.Products.Count() : 
                    repository.Products.Where(e => e.Category == category).Count()
            },
            CurrentCategory = category
        };
        return View(viewModel);
    } 
```

在您的视图中，您放置了这个自定义 HTML 帮助器：

```
<div class="pager">
   @Html.PageLinks(Model.PagingInfo, x => Url.Action("List", 
    new {page = x, category = Model.CurrentCategory}))
</div> 
```

这是助手的代码：

```
public static class PagingHelpers {

    public static MvcHtmlString PageLinks(this HtmlHelper html,
                                          PagingInfo pagingInfo,
                                          Func<int, string> pageUrl) {

        StringBuilder result = new StringBuilder();
        for (int i = 1; i <= pagingInfo.TotalPages; i++) {
            TagBuilder tag = new TagBuilder("a"); // Construct an <a> tag
            tag.MergeAttribute("href", pageUrl(i));
            tag.InnerHtml = i.ToString();
            if (i == pagingInfo.CurrentPage)
                tag.AddCssClass("selected");
            result.Append(tag.ToString());
        }

        return MvcHtmlString.Create(result.ToString());
    }
} 
```

[这个例子取自这本书](https://rads.stackoverflow.com/amzn/click/com/1430234040)

# jsp - 让嵌入式 Jetty 8.1.2 中的 JSP 调用 POST 方法

> ID：10339244
> 
> 赞同：0
> 
> 时间：2012-04-26T18:25:52.273
> 
> 标签：jsp, post, jetty

我在嵌入式 Jetty 服务器中包含以下 JSP 代码，该服务器没有 web.xml 并且导出为 jar 文件，而不是 WAR 文件：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<jsp:useBean id="tech" class="com.sgi.jetty.webapp.TechServlet" scope="session"/>
<jsp:setProperty name="tech" property="*"/>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Tech Diags</title>
</head>

<body>
<h1>Tech Diags</h1>
<br>
<form METHOD="post" action="doPost">
<table>
<tr>
    <td>External Id</td>
    <td> <input type="text" name="extId" value="<%= tech.getExternalId() %>" style="width:250px"/> </td>
</tr>
<tr>
    <td>Address List</td>
    <td><input type="text" name="addrList" value="<%= tech.getAddressList() %>" style="width:600px"/> </td>
 </tr>
</table>
<input type="submit" value="Save"/>
</form>
</body>
</html> 
```

我需要在 TechServlet 中调用 POST 方法。我可以让 JSP 引用 servlet 代码，以便各个字段显示存储的值，但我无法将更新反映回服务器。

有人知道如何让嵌入式码头服务器识别 jsp 中的 POST 调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:25:49.323

我猜你把这个混为一谈：

```
<form METHOD="post" action="doPost"> 
```

“doPost”是 url，而不是 servlet 中的方法

# regex - 名称捕获，需要一个数字列表

> ID：10339247
> 
> 赞同：2
> 
> 时间：2012-04-26T18:26:03.860
> 
> 标签：regex

我需要在列表中生成一个命名的数字捕获

示例源数据

```
This is a comment on line 1
Here is another Comment Line 2
Log ID 1234,5555,2342 
```

使用：`(?<id>(\d+)*)`我会拿起结果

```
1
2
1234
5555
2342 
```

但这是错误的`1`。`2`我需要它来拾取 Log ID Only 之后的项目。

我正在寻找一个将返回的正则表达式

```
1234
5555
2342 
```

在一个名为的组中`id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:43:39.963

如果您的语言支持可变长度的lookbehinds，您应该能够使用以下内容：

```
(?<=Log ID.*)(?<id>\d+) 
```

我还对您的原始正则表达式进行了一些修改，因为我并没有真正看到命名捕获组内的附加捕获组的意义，或者嵌套重复 (`(\d+)*`相当于`(\d*)`，但我认为您实际上想要`\d+`这样它需要你要匹配至少一位数字）。

如果您不能使用可变长度的lookbehinds（大多数语言），那么您可能需要分两步执行此操作。首先匹配任何带有“日志 ID”的行，然后在这些行中查找数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:05:07.620

断言背后的负面看法会起作用吗？

```
(?<![Ll]ine )(?<id>\d+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:44:09.553

您也可以不看（向前|向后）执行此操作：

```
"Log\s+ID\s+((?<id>\d+),?)+" 
```

这将为您提供一个名为的单独组中的每个数字`id`

*   `Log\s+ID\s+`: 匹配你要的ID，但不要捕获
*   `(?<id>\d+),?`：捕获数字并在其后允许一个可选的逗号（但不要捕获）
*   `+`: 至少重复一次

但是，这会带来一个问题，因为您将拥有多个具有相同名称的组 - 这取决于如何处理此问题的语言。

或者，您可以使用此正则表达式将日志 ID 之后的整个字符串捕获到一组中：

```
"Log\s*ID\s+(?<id>(?:\d+,?)+)" 
```

# java - 视频缩略图 xuggle

> ID：10339250
> 
> 赞同：-3
> 
> 时间：2012-04-26T18:26:19.707
> 
> 标签：java, xuggle

我想从大约一半的时间点从视频中获取缩略图，我通过使用以下方法实现了这一点：

[http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/ws/workingcopy/src/com/xuggle/mediatool/demos/DecodeAndCaptureFrames.java](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/ws/workingcopy/src/com/xuggle/mediatool/demos/DecodeAndCaptureFrames.java)

但是我的解决方案非常慢，实际上它会在视频中循环播放。对于较大的文件，这不是一个聪明的解决方案。

IContainer.seekKeyFrame 看起来对我的问题很有用。有人可以解释我如何为此目的使用 seekKeyFrame 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:26:31.577

我从第五秒开始修改代码并退出循环。不是最好的，而是一个可行的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T13:39:31.053

**从任何持续时间创建视频的缩略图。**

```
 public class ThumbsGenerator { 
     private static void processFrame(IVideoPicture picture, BufferedImage image){ 
     try { 
           File file=new File("C:\\snapshot\thimbnailpic.png");//name of pic
            ImageIO.write(image, "png", file);

            } catch (Exception e) { 
                    e.printStackTrace(); 
            } 
    }

    @SuppressWarnings("deprecation") 
    public static void main(String[] args) throws NumberFormatException,IOException { 

            String filename = "your_video.mp4";

            if (!IVideoResampler.isSupported(IVideoResampler.Feature.FEATURE_COLORSPACECONVERSION)) 
            throw new RuntimeException("you must install the GPL version of Xuggler (with IVideoResampler support) for this demo to work"); 

            IContainer container = IContainer.make(); 

            if (container.open(filename, IContainer.Type.READ, null) < 0) 
                    throw new IllegalArgumentException("could not open file: " 
                                    + filename); 

            String seconds="20" //20 seconds 

            int numStreams = container.getNumStreams(); 

            // and iterate through the streams to find the first video stream 
            int videoStreamId = -1; 
            IStreamCoder videoCoder = null; 
            for (int i = 0; i < numStreams; i++) { 
                    // find the stream object 
                    IStream stream = container.getStream(i); 
                    // get the pre-configured decoder that can decode this stream; 
                    IStreamCoder coder = stream.getStreamCoder(); 

                    if (coder.getCodecType() == ICodec.Type.CODEC_TYPE_VIDEO) { 
                            videoStreamId = i; 
                            videoCoder = coder; 
                            break; 
                    } 
            } 

            if (videoStreamId == -1) 
                    throw new RuntimeException( 
                                    "could not find video stream in container: " + filename); 

            if (videoCoder.open() < 0) 
                    throw new RuntimeException( 
                                    "could not open video decoder for container: " + filename); 

            IVideoResampler resampler = null; 
            if (videoCoder.getPixelType() != IPixelFormat.Type.BGR24) { 

                    resampler = IVideoResampler.make(videoCoder.getWidth(), videoCoder 
                                    .getHeight(), IPixelFormat.Type.BGR24, videoCoder 
                                    .getWidth(), videoCoder.getHeight(), videoCoder 
                                    .getPixelType()); 
                    if (resampler == null) 
                            throw new RuntimeException( 
                                            "could not create color space resampler for: " 
                                            + filename); 
            } 

            IPacket packet = IPacket.make(); 

            IRational timeBase = container.getStream(videoStreamId).getTimeBase(); 

            System.out.println("Timebase " + timeBase.toString()); 

            long timeStampOffset = (timeBase.getDenominator() / timeBase.getNumerator()) 
                                    * Integer.parseInt(seconds); 
            System.out.println("TimeStampOffset " + timeStampOffset); 

            long target = container.getStartTime() + timeStampOffset; 

            container.seekKeyFrame(videoStreamId, target, 0); 

            boolean isFinished = false; 

            while(container.readNextPacket(packet) >= 0 && !isFinished ) { 

                    if (packet.getStreamIndex() == videoStreamId) { 

                            IVideoPicture picture = IVideoPicture.make(videoCoder 
                                            .getPixelType(), videoCoder.getWidth(), videoCoder 
                                            .getHeight()); 

                            int offset = 0; 
                            while (offset < packet.getSize()) { 

                                    int bytesDecoded = videoCoder.decodeVideo(picture, packet, 
                                                    offset); 
                                    if (bytesDecoded < 0) { 
                                            System.err.println("WARNING!!! got no data decoding " + 
                                                            "video in one packet"); 
                                    } 
                                    offset += bytesDecoded; 

                                    picture from 

                                    if (picture.isComplete()) { 

                                            IVideoPicture newPic = picture; 

                                            if (resampler != null) { 

                                                    newPic = IVideoPicture.make(resampler 
                                                                    .getOutputPixelFormat(), picture.getWidth(), 
                                                                    picture.getHeight()); 
                                                    if (resampler.resample(newPic, picture) < 0) 
                                                            throw new RuntimeException( 
                                                                            "could not resample video from: " 
                                                                            + filename); 
                                            } 

                                            if (newPic.getPixelType() != IPixelFormat.Type.BGR24) 
                                                    throw new RuntimeException( 
                                                                    "could not decode video as BGR 24 bit data in: " 
                                                                    + filename); 

                                            BufferedImage javaImage = Utils.videoPictureToImage(newPic); 

                                            processFrame(newPic, javaImage); 
                                            isFinished = true; 
                                    } 
                            } 
                    } 
            } 

            if (videoCoder != null) { 
                    videoCoder.close(); 
                    videoCoder = null; 
            } 
            if (container != null) { 
                    container.close(); 
                    container = null; 
            } 
    } 
```

# c# - 打印 C# Web 服务的肥皂请求和响应

> ID：10339254
> 
> 赞同：2
> 
> 时间：2012-04-26T18:26:48.910
> 
> 标签：c#, web-services, soap, logging

我是 Webservices 的新手，我有一个问题。我有一个网络服务和这样的方法，

```
 CompanyOpereations srv = new CompanyOperations();
           srv.getCustomerInfo(input); 
```

我想获取和响应。编写 getCustomerInfo 方法的肥皂请求和响应。

有人能帮我吗？？我已经看到了这个，但是我登录到我需要在屏幕上打印的文件， [从在 ASP.net 中运行的 Web 参考客户端获取 RAW Soap 数据](https://stackoverflow.com/questions/300674/getting-raw-soap-data-from-a-web-reference-client-running-in-asp-net)

我什至见过这个，但不知道如何调用它，我的客户的 WriteOutput 方法可以有人帮我吗？ [http://msdn.microsoft.com/en-us/library/ms972353.aspx](http://msdn.microsoft.com/en-us/library/ms972353.aspx)

提前致谢。

如果我的问题不清楚，请告诉我！！

这不是为了调试。它是为了将它打印为方法的输出，以便其他人可以在其他地方使用 XML。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:36:53.477

我可能会使用 SOAP 拦截扩展，他们只是将所有内容写入日志：

> ASP.NET 允许通过可扩展性机制构建与 SOAP 相关的基础结构。ASP.NET SOAP 扩展架构围绕一个扩展展开，该扩展可以**在客户端或服务器上的**消息处理的特定阶段**检查**或修改**消息**。

 **[**MSDN 文档**](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapextension%28v=vs.80%29.aspx)有一个很好的完整示例...

* * *

***补充：*** 我无法实现上面的答案，所以我流氓了。

将此添加到您的`web.config`文件中：

```
<configuration>

  <system.diagnostics>
    <trace autoflush="true" useGlobalLock="false"/>
    <sources>
      <source name="System.Net">
        <listeners>
          <add name="traceFile"/>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="traceFile"
           type="System.Diagnostics.TextWriterTraceListener"
           initializeData="App_Data/trace.log"
           traceOutputOptions="None">
      </add>
    </sharedListeners>
    <switches>
      <add name="System.Net" value="Verbose"/>
    </switches>
  </system.diagnostics>

</configuration> 
```

`App_Data/trace.log`这将输出一个[与此类似的](http://paste2.org/p/1996572)日志文件。

只需解析该文件或按原样使用它...

我没有找到任何其他方式，因为没有`ServiceClient`显示此类信息的方法。

我还**[设置了一个小型气象服务项目](http://cl.ly/GBJA)**，因此您可以查看它并查看正在创建的日志文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:32:40.117

虽然这个实用程序来自石器时代，但在我使用它时它做得很好：[SOAP Toolkit 3.0](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=13456)。我猜他们从那时起添加了更复杂的方法，但你应该先尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:48:30.023

我可以解决这个问题的最好方法是在我返回一个对象时序列化我的对象:)**

# java - “不能在不同方法中定义的内部类中引用非最终变量按钮标志”

> ID：10339255
> 
> 赞同：1
> 
> 时间：2012-04-26T18:26:52.210
> 
> 标签：java, swing

```
boolean buttonflag=false;
        Editbutton.setOnClickListener( new OnClickListener()
        { 

            @Override
            public void onClick( View v )
            {
               buttonflag=true;

             }
        } 
```

我得到的错误是“不能引用以不同方法定义的内部类中的非最终变量buttonflag”我想要做的是当我按下Editbutton时我希望buttonflag为真..任何人都可以解释原因并解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:35:14.930

The error message is pretty straight forward. Since `buttonflag` is not final, you cannot access it in your `OnClickListener` anonymous class. Two possible solutions

1.  Make buttonflag a field
2.  Make it final. However, then you cannot modify it, and you have to choose the one-dimensional array approach resulting in

    ```
    final boolean[] buttonflag=new boolean[]{false};
    Editbutton.setOnClickListener( new OnClickListener(){ 
       @Override
       public void onClick( View v ){
         buttonflag[0]=true;
       }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:14:55.387

对于这种情况，您必须将其设为字段。另一个@Robin 正确地向您展示了解决问题的两种方法，但是由于这是一个会被多次调用的回调机制（毕竟它是一个按钮上的回调），因此局部变量几乎没有用，因为它会可能在调用方法之前超出范围。

即使它不会失败，因为设置的值不再可以被代码的任何其他部分访问，它也没有什么用处。我假设您正在尝试在按下按钮时设置某些状态，因此需要将该状态存储为一个字段，以便在包含所示代码的方法结束时可以访问。

# c# - 将 ASP.NET 连接到 SQL Server 的最佳实践

> ID：10339266
> 
> 赞同：8
> 
> 时间：2012-04-26T18:27:42.967
> 
> 标签：c#, asp.net, .net, sql-server, security

我们有一个 ASP.NET 4.0 Web 应用程序，它通过 LAN 连接到另一台机器上的 SQL Server。我使用存储在我的 Web.config 中的 ConnectionString（带有 SQL Server 身份验证）来执行此操作。基本上，这是一种相当传统的 Web-Server-to-SQL 策略。

然而，我们的一位客户认为这种策略并不安全。这个客户端说我们应该只通过一个单独的 Web 服务层连接到 SQL Server。

我真的不想为了满足这个客户而重写这个应用程序。我应该告诉他什么？有谁知道我如何最好地反驳这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T18:39:00.020

安全始终是一种权衡。客户真正害怕的是什么？

拥有“明确”的数据库凭据？我已经看到审计人员指出这是一个潜在的漏洞，但实际上，如果有人入侵了您的 Web 服务器，他们可以针对数据库运行任意代码，因此加密数据库凭据并不会真正为您带来太多好处。

您的 Web 应用程序应该使用最低权限的用户连接到数据库，因此破坏 Web 服务器应该只授予您读取和更新数据的权限。如果一切都通过 Web 服务层，那将如何改变？同样，通过访问 Web 服务层会产生非常实际的成本 - 复杂性和性能。只有客户才能回答这笔费用是否值得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T18:37:44.213

如果这是一个 web 项目，您需要将运行 IIS 服务器的用户更改为域用户，并将 sql server 的权限授予该用户。您可以在连接字符串上使用 SSPI，如下所示。像这样，您无需在 web.config 上清楚地保留您的用户名或密码。

```
<configuration>
  <system.web>
    <identity impersonate="true"/> 

  </system.web> 
```

和你的连接字符串

`"Integrated Security=SSPI;Initial Catalog=TestDb;Data Source=10.10.10.10"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T18:56:02.163

有很多客户在争论 IT 专业人员的工作，就像很多人去看医生时问的是药而不是他们得了什么病，因为他们在网上看到这个问题后就已经知道答案了。

我的意思是，他们要求您构建应用程序，而您作为 IT 专业人员应该最清楚您的应用程序何时按预期工作。作为专业人士，您应该有胆量告诉您的客户，如果他认为可以在其他地方做得更好，他应该去那里或者自己构建应用程序；这就是过去所做的并取得了积极成果:)

关于安全；也许出于他们的信心，您可以加密`web.config`并显示它们，但实际上这没有任何意义；如果有人可以访问服务器，他们就可以对其进行解码。另一方面，想要闯入您的数据库的人应该通过许多障碍。很难闯入，也许是不可能的。另一种选择是简单地阻止来自网络或 IP 范围或其他任何外部网络的连接。我认为这不应该是一件值得担心的事情。

还有更多和更现实的问题需要担心，例如防止跨站点脚本和此类常见处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T19:04:42.373

客户端是错误的，引入另一层不会自动提高安全性。

简而言之，使用 SQL 服务器角色进行数据访问，例如内置的 data_reader 和 data_writer 角色是一个很好的起点。始终为应用程序使用最合适的最低权限帐户。如果您只需要读取数据，请使用只有读取权限的帐户。

尽可能使用 Windows 身份验证，如果不可能，那么至少加密连接字符串。

有关如何执行我所描述的操作的更多信息，请访问[http://msdn.microsoft.com/en-us/library/ff650037.aspx#pagpractices0001_dataaccess](http://msdn.microsoft.com/en-us/library/ff650037.aspx#pagpractices0001_dataaccess)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T19:29:14.217

一种可能性是加密 web.config 中的部分。因此，只有可以直接访问网络服务器的用户才能解密此部分。

这是在 iisreg 工具的帮助下如何工作的：http: [//msdn.microsoft.com/en-us/library/zhhddkxy.aspx](http://msdn.microsoft.com/en-us/library/zhhddkxy.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T18:30:57.430

您可以在您的数据库中启用加密连接并告诉客户端连接已加密如此完全安全？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-26T19:12:44.040

为了使其更安全并满足您的客户，您可以在计算机之间使用[隧道。](http://en.wikipedia.org/wiki/Tunneling_protocol)

您在数据库所在的位置设置服务器隧道程序，并在客户端计算机上设置客户端隧道程序。您通过隧道将一台计算机连接到另一台计算机，并且数据库连接通过隧道进行。

并且一切都是高度安全的交换（如果隧道支持它，则压缩）。

[http://en.wikipedia.org/wiki/Tunneling_protocol](http://en.wikipedia.org/wiki/Tunneling_protocol)

[http://en.wikipedia.org/wiki/HTTP_tunnel](http://en.wikipedia.org/wiki/HTTP_tunnel)

Ps 对于我所做的任何事情，我只通过隧道连接到我的服务器。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-04-26T19:23:23.127

我从不喜欢使用网络配置。注册表更安全。

最佳实践是：

*   在注册表中隐藏连接字符串的重要项
*   加密连接中的重要项目，如注册表中的用户名、密码和服务器名称
*   通过类访问注册表
*   即时构建连接字符串，并且仅在每页需要时
*   错误处理每一页，以便在出现错误时不会显示连接字符串
*   完成后始终关闭连接。避免内存泄漏
*   始终关闭并重置 DataReaders

为了额外的安全

*   您可以构建一个单独的程序来创建连接字符串并将该项目作为解决方案中的库引用
*   如果您想真正安全，您的客户是正确的。将信息发送到将与数据库通信的 dll。这是很多工作

**资料来源：**

来自 ScottGu @ [http://msdn.microsoft.com/en-us/library/Aa302406](http://msdn.microsoft.com/en-us/library/Aa302406)

**可扩展性：**

关于可扩展性：使用自定义管理软件可以非常轻松地在 Web 场中创建\编辑注册表项。

[http://weblogs.asp.net/scottgu/archive/2010/09/08/introducing-the-microsoft-web-farm-framework.aspx](http://weblogs.asp.net/scottgu/archive/2010/09/08/introducing-the-microsoft-web-farm-framework.aspx)

最后，给所有投票给我的人。开箱即用的安全性是不够的。安全是一门艺术而不是科学。

黑客默认知道密码存储在哪里......

**ASP.NET 4.0 爱好者**

Microsoft 使 asp.net 4.0 网站可以轻松部署注册表设置：

[http://msdn.microsoft.com/en-us/library/dd394698.aspx](http://msdn.microsoft.com/en-us/library/dd394698.aspx)

# zend-framework - Zend View Helper - 依赖文件、图像、CSS、JS

> ID：10339267
> 
> 赞同：0
> 
> 时间：2012-04-26T18:27:48.573
> 
> 标签：zend-framework

构建或打包将根据传递的数据显示可重用闪存图表的视图助手的最佳方法是什么？

结构应该看起来像这样，还是矫枉过正？我想将文件与一般公共应用程序文件分开。

-application
---module
----default
------views
--------helpers
----------MyFlashChart.php
-public
---images
---css
---js
***---默认*** ------views
--------helpers
----------MyFlashChart
------------js
-- ----------css
------------图片
------------swf

我想从技术上讲，我将使用部分组合..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:50:43.837

阅读文档： http: [//framework.zend.com/manual/en/project-structure.project.html](http://framework.zend.com/manual/en/project-structure.project.html)

# javascript - 有没有办法检测用户的浏览器是否支持@font-face？

> ID：10339268
> 
> 赞同：3
> 
> 时间：2012-04-26T18:27:50.707
> 
> 标签：javascript, html, css, font-face

我在网页上有一些内容使用有趣的字体通过使用@font-face 使用一些自定义字体来正确显示。我包含一个警告，它可能无法在所有浏览器上正确显示。内容对页面来说并不是真正重要的，所以我真正想做的就是如果由于浏览器版本、脚本阻塞或其他原因，浏览器不打算这样做，则根本不显示它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T18:29:20.817

Modernizr 有这个内置的。这是一个只检查@font-face 支持的构建的链接。 [http://modernizr.com/download/#-fontface-shiv-cssclasses-teststyles-load](http://modernizr.com/download/#-fontface-shiv-cssclasses-teststyles-load)

然后你可以在 JS 中检查`Modernizr.fontface`或在 css 中检查`.fontface { }`.

这是如何做到这一点的花哨的解释：http: [//paulirish.com/2009/font-face-feature-detection/](http://paulirish.com/2009/font-face-feature-detection/)

需要明确的是，除了某些版本的 Android 之外，您几乎可以使用 @font-face 支持所有浏览器。 [http://caniuse.com/#search=font](http://caniuse.com/#search=font)

您对@font-face 的更大问题不是对@font-face 的基本支持，而是对特定字体文件类型的支持，这是比较有限的。我个人建议使用 WOFF，它适用于 IE9+。或者，如果您使用 Typekit 或 Font-Squirrel，您几乎可以开箱即用地支持所有浏览器。

# java - XMLEncoder - 在写入对象期间设置值

> ID：10339269
> 
> 赞同：0
> 
> 时间：2012-04-26T18:27:50.867
> 
> 标签：java, xml, xmlencoder

我需要将对象写入 XML，因此我使用 XMLEncoder，但该对象中的变量（字符串）之一应该被加密。是否可以在写入时捕获对象然后替换值（但不要在对象中设置值）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:16:22.313

是的。XMLEncoder 使用序列化，因此您可以使用正常的序列化规则来覆盖 readObject 和 writeObject 中序列化的默认行为。

[http://java.sun.com/products/jfc/tsc/articles/persistence4/](http://java.sun.com/products/jfc/tsc/articles/persistence4/)

尽管有些人可能会争论加密文件上的对象是否足够重要，但也许您应该将其加密在内存中，因为这很容易查看。

# android - 使用 Android APK 2.2 打开硬件加速（如 Android 3+）

> ID：10339277
> 
> 赞同：17
> 
> 时间：2012-04-26T18:28:38.207
> 
> 标签：android, android-manifest, apk, android-compatibility, android-hardware

我为Android 3.0开发了一个应用程序，它运行得很好，但是客户端坚持要兼容2.2设备。

禁用硬件加速，使用 Android Compatibility Package，NIO-backport 支持（用于任务和执行程序）和 View 方法的一些重新实现我能够将我的应用程序移植到 Android 2.2 并且效果非常好，但是如果我将这个 apk 运行到更新的设备性能非常缓慢，所以我想知道如何打开硬件加速（如果可用）但仍使用我的 2.2 APK。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-26T18:38:30.307

添加`android:hardwareAccelerated="true"`到您的清单中，对于`<activity>`或`<application>`.

此属性在较早版本的 Android 上将被忽略，但在 Android 3.0+ 上将受到尊重。

这将要求您将构建目标设置为 API 级别 11 或更高，但您可能已经拥有该级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-14T08:23:25.030

如果您需要旧操作系统（2.3.X 和更早版本）的支持设计，而不是添加`android:hardwareAccelerated="true"`到您的清单中，请尝试在您的 java 中添加此代码：

```
try { if( Build.VERSION.SDK_INT >= 11) getWindow().setFlags( 16777216, 16777216); } catch( Exception e) {} // FLAG_HARDWARE_ACCELERATED == 16777216 (0x01000000) 
```

这在 OS 3.0++ 中有效，在 2.3.X 和更早版本上不调用错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T18:32:18.890

您可以[在此处](http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)查看如何启用基于 Android 版本的功能。你也可以通过反射来做到这一点，但它很笨重。

# wcf - 从 Metro App 客户端运行 WCF 服务

> ID：10339280
> 
> 赞同：2
> 
> 时间：2012-04-26T18:28:48.370
> 
> 标签：wcf, iis, microsoft-metro, visual-studio-2012

我有一个托管在本地主机上的 WCF 服务，并且我有一个使用该服务的 Metro 应用程序。目前，为了使用该服务，我必须在单独的 Visual Studio 实例中单独运行该服务，然后运行 ​​Metro App 客户端。

有什么办法可以设置客户端应用程序在应用程序启动后立即开始运行服务，而不是在应用程序之前一次又一次地单独启动服务？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:06:27.037

[您应该在 Visual Studio 中使用成熟的 IIS](http://msdn.microsoft.com/en-us/library/ms733766.aspx)而不是 IIS Express 来托管 WCF 服务。您可以通过项目属性[的 Web 选项卡更改此设置。](http://msdn.microsoft.com/en-us/library/aa983445.aspx)通过使用 IIS 而不是 IIS Express，WCF 服务将始终侦听请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:12:55.260

AFAIK，Windows 8 不支持（尚）**本地主机**上从 Metro 应用程序到 WCF 服务的通信。它在 VS 中工作的原因是因为它们确实允许将其用于开发用途。如果您想要一个持续运行的服务可用，请使用另一台（虚拟）机器单独托管它。

或者，查看[SO 上的这个问题以](https://stackoverflow.com/questions/7465517/how-can-a-metro-app-in-windows-8-communicate-with-a-backend-desktop-app-on-the-s)获取有关此问题的更多信息。

# ios - 链接中的数字是什么意思

> ID：10339285
> 
> 赞同：0
> 
> 时间：2012-04-26T18:29:07.307
> 
> 标签：ios, facebook

我正在查看旧帖子，试图找出[https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook](https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook)上的 hackbook 示例有什么问题。

在这篇文章中，[Post image to facebook using graph api](https://stackoverflow.com/questions/7991687/post-image-to-facebook-using-graph-api)，看来他的问题是 117795728310/photos" 而不是 me/photos

117795728310 指的是什么？我假设这不是他的应用程序 ID。如果是他的用户名，我在哪里可以找到我的用户名？

谢谢，密歇根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:33:06.787

它确实看起来像一个用户 ID。

去[http://www.facebook.com/note.php?note_id=91532827198](http://www.facebook.com/note.php?note_id=91532827198)看看你是怎么得到你的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:34:07.550

开放图的路径通常以对象的 id 开始，然后是连接。

例如：*[6708787004/feed](http://developers.facebook.com/tools/explorer?method=GET&path=6708787004/feed)*将返回南方公园页面的提要。

id 可以替换为“用户名”，因此上面的示例与“ [southpark/feed](http://developers.facebook.com/tools/explorer?method=GET&path=southpark/feed) ”相同。并且“我/饲料”与“您的用户ID/饲料”相同

[您可以通过各种方式获取您的 id，在图形资源管理器中检查“/me”](http://developers.facebook.com/tools/explorer?method=GET&path=me)会更容易。

您发布的 id 不是用户而是页面（[图形浏览](http://developers.facebook.com/tools/explorer?method=GET&path=117795728310)器）

# c# - 在没有查找表的情况下将月份中的某天转换为发音方式？

> ID：10339286
> 
> 赞同：1
> 
> 时间：2012-04-26T18:29:09.143
> 
> 标签：c#, datetime

我需要将每月的日期转换为一个人的说法。

例如 4/26 将被称为 26th。4/01 将被称为 First。

我知道我可以使用查找表字符串 foo = {"First", "Second", ...} 然后取月份日期并提取字符串。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:34:28.033

一般来说，是的，您可以对英语规则进行编码以产生序数。但是，前 19 个单词不可避免地会出现在查找表中，因为它们是例外。

对于一个月中的天数，异常值的范围（1 到 19）覆盖了您需要生成的单词序列总数的大约 60%，因此完全跳过算法并将所有内容在查找表中。如果您决定支持英语以外的语言，这将提高可读性并简化国际化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:34:39.753

没有办法绕过查找表（即使它是由第三方提供的）。但是您可以减少案例数量：

*   一个数字 1-20 和 30 的条目（如日期所说）。
*   可以组合缺失的数字，例如使用 20 + 1、20 + 2、30 + 1 等。

# c++ - 字典的动态内存分配

> ID：10339291
> 
> 赞同：1
> 
> 时间：2012-04-26T18:29:34.440
> 
> 标签：c++, memory, dynamic, allocation

嗨，我需要构建类似字典的东西，根据我的代码，每个单词可以有 100 个含义，但也许它只有 5 个含义，然后我将分配 95 个额外的空间，或者它可能有超过 100 个含义然后程序会崩溃，我知道向量类非常简单并且可以很好地使用，但任务几乎是构建我自己的向量类，以了解它是如何工作的。因此**含义和其他一些东西保持不变，这是我的代码，我也知道我导致内存泄漏，我怎样才能正确删除？：

```
#include <iostream>
#include <string>
#include <cstring>
using namespace std;

class Expression {

    char *word_with_several_meanings; // like "bank", "class"
    char **meanings; // a pointer to a pointer stores all meanings
    int meanings_ctr; // meanings counter

    //-----------FUNCTIONS------------------------------------------------
public:
    void word( char* = NULL );
    void add_meaning(char* = NULL);
    char* get_word();
    int get_total_number_of_meanings();
    char* get_meaning(int meanx = 0);
    Expression(int mctr = 0); // CTOR
    ~Expression(); // DTOR
};

  Expression::Expression(int mctr ) {
  meanings_ctr = mctr;          // Setting the counter to 0
  meanings = new char * [100]; // Allocate Space for 100 meanings
}

Expression::~Expression() {
 delete [] meanings; // Deleting the memory we allocated
 delete [] word_with_several_meanings; // Deleting the memory we allocated
}

void Expression::word( char *p2c )
{

    word_with_several_meanings = new char[strlen(p2c)+1];
// copy the string, DEEP copy
    strcpy(word_with_several_meanings, p2c);
}

void Expression::add_meaning(char *p2c)
{

    //meanings = new char * [meanings_ctr+1];
    meanings[meanings_ctr] = new char[strlen(p2c)+1];
    strcpy(meanings[meanings_ctr++],p2c);

}

char * Expression::get_meaning( int meanx )
{

    return *(meanings+meanx);

}

char * Expression::get_word()
{

    return word_with_several_meanings;

}

int Expression::get_total_number_of_meanings()
{

    return meanings_ctr;

}

int main(void) {
    int i;
    Expression expr;
    expr.word("bank ");
    expr.add_meaning("a place to get money from");
    expr.add_meaning("b place to sit");
    expr.add_meaning("4 letter word");
    expr.add_meaning("Test meaning");
    cout << expr.get_word() << endl;

    for(int i = 0; i<expr.get_total_number_of_meanings(); i++)
            cout << " " << expr.get_meaning(i)  << endl;
    Expression expr2;
    expr2.word("class");
    expr2.add_meaning("a school class");
    expr2.add_meaning("a classification for a hotel");
    expr2.add_meaning("Starts with C");
    cout << expr2.get_word() << endl;
    for( i = 0; i<expr2.get_total_number_of_meanings(); i++)
            cout << " " << expr2.get_meaning(i) << endl;

        Expression expr3;
    expr3.word("A long test ... ");
    char str[] = "Meaning_      ";
    for (int kx=0;kx<26;kx++)
    {
            str[8] = (char) ('A'+kx);
            expr3.add_meaning(str);
    }

cout << expr3.get_word() << endl;
for(i = 0; i < expr3.get_total_number_of_meanings(); i++)
    cout << " " << expr3.get_meaning(i) << endl; 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:43:03.927

当您分配多维数组时，`new`您将使用循环分配它，例如

```
char **x = new char*[size]
for (int i = 0; i < N; i++) {
    x[i] = new int[size];
} 
```

所以你也必须以这种方式删除它：

```
for (int i = 0; i < N; i++) {
    delete[] x[i];
}
delete[] x; 
```

因此，当您拥有任意大小的数组时，您必须将它们存储在某个地方以便在析构函数中使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:43:16.523

```
delete [] meanings; // Deleting the memory we allocated 
```

不会摆脱分配的内存，只有指针本身。

要释放实际内存，您需要遍历`meanings`数组以及`delete []`其中的每个元素。

就像是：

```
for (int i = 0; i < meanings_ctr; ++i)
{
    delete [] meanings[meanings_ctr];
    meanings[meanings_ctr] = NULL;
}
delete [] meanings; 
```

--

对于如果你得到超过 100 个含义（或者通常当你的集合已满）该怎么办的问题，标准技术是分配一个两倍大小的新数组（你可以这样做，因为它是动态的），将您现有的收藏复制到该收藏中，然后处置您现有的收藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:53:28.300

我会使用一个简单的链表（这是简化的，不完整且未经测试；还应该有适当的 getter/setter 和东西）：

```
class Meaning {
    char text[20];
    Meaning *next;

    Meaning(const char *text) : next(0) {
        strcpy(this->text, text);
    }
}

class Word {
    char text[20];
    Meaning *first;
    Meaning *last;

    Word(const char *text) : first(0), last(0) {
        strcpy(this->text, text);
    }

    ~Word() {
        Meaning *m = first, *n;
        while(m) {
            n = m->next;
            delete m;
            m = n;
        }
    }

    void AddMeaning(const char *text) {
        if (last) {
            last = last->next = new Meaning(text);
        }
        else {
            first = last = new Meaning(text);
        }
    }

    void print() {
        printf("%s:\n\t", text);
        Meaning *m = first;
        while (m) {
            printf("%s, ", m->text);
            m = m->next;
        }
    }
} 
```

# wpf - 在 wpf 中选择一个包含给定值的数据网格单元格

> ID：10339294
> 
> 赞同：0
> 
> 时间：2012-04-26T18:29:52.963
> 
> 标签：wpf, datagrid

我将 DataTable 绑定到 wpf 中的数据网格。第一列具有唯一值。现在我想在第二列中自动选择一个单元格，其第一列单元格具有给定值。我应该如何做到这一点？例如，这是我的数据网格：

姓名 | 年龄
猫 | 2
狗 | 3

当用户输入“狗”时，我需要选择“3”。

我尝试了这里显示的方法：
[How to select a row or a cell in WPF DataGrid programmatically?](https://stackoverflow.com/questions/3836191/how-to-select-a-row-or-a-cell-in-wpf-datagrid-programmatically)
但是，我无法弄清楚显示的行号。即使我知道 dataTable 的行号，由于我允许用户对表进行排序，因此显示编号可能会有所不同。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:27:33.253

将网格的 SelectionUnit 属性设置为“单元格”，并假设您使用表的 DefaultView 为 DataGrid 提供：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
  // Search for the source-row.
  var Element = MyDataTable.AsEnumerable()
    .FirstOrDefault(x => x.Field<string>("Name") == "horse");

  if (Element == null) return;

  // Found the row number in the DataGrid
  var RowOnGrid = MyGrid.Items.OfType<DataRowView>()
    .Select((a, Index) => new { data=a.Row, index = Index })
    .Where(x=> x.data == Element)
    .Select(x => x.index)
    .FirstOrDefault();

  // Assuming the desired column is the second one.
  MyGrid.SelectedCells.Clear();
  MyGrid.SelectedCells.Add(new DataGridCellInfo(MyGrid.Items[RowOnGrid], MyGrid.Columns[1]));
} 
```

即使您对行重新排序，它也应该可以工作。

# user-interface - 有没有办法将应用程序覆盖在全屏程序上？

> ID：10339295
> 
> 赞同：0
> 
> 时间：2012-04-26T18:29:58.227
> 
> 标签：user-interface, architecture

我正在寻找开发一个应用程序，它本质上是一个计时器窗口，它始终显示在任何其他应用程序前面的屏幕上，并且在聚焦其他窗口时永远不会落到后台。一个例子是当我玩全屏游戏时，我希望这个计时器覆盖游戏，当我点击窗口上的计时器按钮时，它不会关闭游戏。

有什么想法可以在 C#/java/C++ 中实现吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:32:42.860

C#：尝试设置窗口（窗体）的 AlwaysOnTop 属性
java：在框架或对话框上调用 setAlwaysOnTop(true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:33:56.510

我认为您想要实现的目标可以通过 C# 中表单的属性[TopMost和 Java Window 上的](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.topmost%28v=vs.71%29.aspx)[setAlwaysOnTop](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#setAlwaysOnTop%28boolean%29)来实现......

在 Windows 上的 C++ 中，您必须调用**SetWindowPos**函数并作为参数传递：**HWND_TOPMOST**属性。

**更新**

由于您的应用程序处于全屏模式，请尝试使用 Win32 API 函数将您的应用程序设置在前台：[SetForegroundWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)。

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
public static extern bool SetForegroundWindow(IntPtr hWnd);

SetForegroundWindow(this.Handle); 
```

否则，您可以尝试避免使用 Win32 [SetForegroundWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)函数，如下所示：

```
this.TopMost = true;
this.Activate(); 
```

# templates - dust.js 在处理程序中丢失“this”上下文？

> ID：10339297
> 
> 赞同：0
> 
> 时间：2012-04-26T18:30:11.797
> 
> 标签：templates, scope, this, dust.js

我有一个 [看似] 琐碎的dust.js 模板。我用来呈现模板的上下文对象包含一个处理程序，它引用上下文对象中的另一个项目。我还包括一个 toString 处理程序，它还引用上下文对象中的另一个项目。

模板：

```
{error}
<pre>
{#error.getStackTrace}
{.}{~n}
{/error.getStackTrace}
</pre> 
```

语境：

```
{
  error: {
    st: ['a','b','c'],
    msg: 'This is an error message',
    getStackTrace: function () {
      return this.st;
    },
    toString: function () {
      return this.msg;
    }
  }
} 
```

渲染：

```
This is an error message<pre></pre> 
```

如果我`{#error.st}`直接引用，它会正确呈现：

```
This is an error message<pre>a
b
c
</pre> 
```

如果我在 getStackTrace() 处理程序中检查“this”，它会指向 DOMWindow。然而，有趣的是，隐式调用 toString() 的范围是正确的。如果我显式调用 toString() `{error.toString}`，则范围会跳回 DOMWindow。

这是一个问题的唯一原因（为什么我不能`error.st`直接访问）是因为 st 数组实际上存储在 Qooxdoo 属性中，而我只能访问生成的 getter。上面的示例尽可能简单地模仿实际对象。

这是dust.js中的错误吗？它是否在处理程序中失去了正确的范围？还是我在dust.js 文档中遗漏了一些东西来保留范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:10:14.283

你可以这样使用它：

```
{
 error: {
   st: 'a,b,d',
   msg: 'This is an error message',
   getStackTrace: function (chunk, context) {
     return context.current().error.st;
   },
   toString: function () {
     return this.msg;
   }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:30:21.033

**这**是 Javascript 并不总是显而易见的，尤其是当您返回函数时。

当 Dust 解析引用时，比如`{error.st}`which 是一个函数。它调用该函数，但没有为其设置范围；所以它默认为您浏览器中的全局范围是`window`.

看看这一行：[https ://github.com/akdubya/dustjs/blob/master/lib/dust.js#L319](https://github.com/akdubya/dustjs/blob/master/lib/dust.js#L319)

这是正在发生的事情：

```
var current_context = {
  st: 'a,b,d',
  msg: 'This is an error message',
  getStackTrace: function (chunk, context) {
    return error.st;
  },
  toString: function () {
    return this.msg;
  }
}
current_context.st(); // outputs correctly

var elem = current_context.st; // here is your reference {.}
elem(); // Dust tries to resolve your reference but it doesn't set the scope
elem.call(current_context); // if we pass the scope you'll get what you want. 
```

这是灰尘中的错误吗？可能不是，因为您通过 context.current() 获得了上下文。

`this`指向是否有意义`window`。不，但是我想当您在服务器端使用 Dust 时，我们将更好地使用`this`.

# iphone - 加载带有音频标签的div时iPad模糊页面

> ID：10339302
> 
> 赞同：1
> 
> 时间：2012-04-26T18:30:22.457
> 
> 标签：iphone, ios, ipad, html, blurry

所以我在 Safari 中遇到了一个 iPad 特定的问题（它似乎有时也发生在 iPhone 上，但不是偶尔发生，就是不够严重，无法注意到）。

但我有一个包含 5 个音频播放器（全部为 html5）的页面，它们都在一个带有 display: none 的 div 中开始。单击标题将显示更改为 display: block 并且播放器弹出一个未完成的 html 5 播放器。这适用于任何地方（当然没有旧的 IE），甚至适用于 iPad。

然而，当点击标题时，整个页面在 iPad 上变得模糊不清。我试过玩代码，似乎问题是从“none”加载一个div到block“里面有一个html5音频文件。我什至改变了它，所以它只显示标准控制器，我删除了我的所有额外的代码，问题仍然存在。

有人对此有任何想法吗？

该网站的链接是[http://artferretti.com/paulperrysound/recordings/](http://artferretti.com/paulperrysound/recordings/)

这是 iPad 图像的链接：http: [//artferretti.com/blurrediPad.png](http://artferretti.com/blurrediPad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:00:04.430

我刚刚遇到了一个类似的问题，`div`当 Vimeo 视频在`div`.

我删除了`overflow:hidden`它并修复了它。

您可以检查是否有溢出 css 规则，这可能是关键。

# iphone - 如何使用 UIButton 跳转到应用程序偏好设置页面？

> ID：10339305
> 
> 赞同：0
> 
> 时间：2012-04-26T18:30:28.567
> 
> 标签：iphone, xcode, button, preference, setting

有谁知道如何在不按主页按钮的情况下跳转到应用程序偏好设置页面？

如何使用 UIBUTTON 执行此操作并进入应用程序偏好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:34:09.997

你不能。 [InAppSettingsKit](http://www.inappsettingskit.com/)是可能满足您需求的替代方案。

# windows - 在单次安装中安装 MSI 文件

> ID：10339306
> 
> 赞同：1
> 
> 时间：2012-04-26T18:30:34.293
> 
> 标签：windows, windows-installer

我必须安装两个 MSI 文件。有什么方法可以将两者都安装为另一个的依赖项？

是否有可能或是否有任何工具可以生成一个新的 MSI 来触发两者？

我的意思是，我有

```
MSIinstallerONE.msi 
MSIinstallerTWO.msi 
```

最后我需要执行

```
msiexec /i MSIINstallerALL.msi 
```

并允许卸载（如果可能的话）

```
msiexec /x MSIINstallerALL.msi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:28:32.000

为此，您可以创建一个链式包，即一个主 MSI 包，您可以在其中添加两个 MSI 包作为链式包。大多数用于设置创作的工具都支持这一点，您只需要决定您最喜欢的工具： [http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:36:08.703

使用 iepress

转到开始菜单

然后

运行并编写 iexpress 然后回车

按照向导中的说明进行操作

# ios - 释放与导航控制器关联的视图控制器

> ID：10339311
> 
> 赞同：1
> 
> 时间：2012-04-26T18:31:12.497
> 
> 标签：ios, memory-management, uiviewcontroller, uinavigationcontroller, release-management

我有一个导航控制器，我似乎无法理解的一件事是为什么当我弹出一个视图控制器时，它没有被释放。

当我将它添加到导航控制器时我释放它，这对我来说意味着现在导航控制器负责管理视图控制器。

但是当我弹出导航控制器时，我可以看到弹出的视图控制器仍然存在。我知道这一点是因为通知观察者仍在执行。

我也尝试从视图中删除导航控制器，释放并将其设置为零，但我的视图控制器仍然徘徊。

当视图控制器被弹出或我释放导航控制器本身时，我可以在哪里以及如何释放视图控制器形成导航控制器？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:31:38.700

您提到通知观察者...视图控制器是否添加到通知中心？如果是这种情况，我认为通知中心会保留视图控制器。在 viewWillDisappear 中将其作为观察者删除，然后在 dealloc 中抛出一个 NSLog 并查看它现在是否正确释放。

# facebook - 搜索在 Facebook 应用程序中完成的最后操作

> ID：10339314
> 
> 赞同：0
> 
> 时间：2012-04-26T18:31:24.243
> 
> 标签：facebook, facebook-graph-api

我需要搜索用户在我的应用程序中执行的所有操作。

示例：我的自定义操作：“询问”

问题：“哪些用户在过去 7 天内“询问”了使用我的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:43:37.780

没有 Facebook API 可以返回如此广泛的信息；如果您需要进行此类查询，请保留自己的数据库

# java - 无法打开输出流

> ID：10339317
> 
> 赞同：0
> 
> 时间：2012-04-26T18:31:26.897
> 
> 标签：java, android, stream, serversocket

由于某些原因，我必须在等待与计算机连接的 android SocketServer 上进行设置。一切顺利，正在创建带有客户端（计算机）的套接字，但流没有打开。它只是暂停，没有任何错误或消息。

客户：

```
 s = new Socket(ip, 4567);
        ois = new ObjectInputStream(s.getInputStream());
        System.out.println("ois..");// not showing, so can't open input stream
        oos = new ObjectOutputStream(s.getOutputStream());
        System.out.println("oos..");  // same here 
```

服务器：

```
 socket = new ServerSocket(4567);
        System.out.println("Waiting for connection,,"); // showing
        client = socket.accept();
        System.out.println("Connected"); //showing
        ois = new ObjectInputStream(client.getInputStream());

        System.out.println("ois.."); // not showing
        oos = new ObjectOutputStream(client.getOutputStream());
        System.out.println("oos.."); // not showing too
        System.out.println("Stream,s opened"); 
```

我的 apk 具有 INTERNET 权限。我正在使用 4567 端口。任何其他应用程序都不会阻塞该端口。

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:42:58.623

尝试首先在您的服务器中打开 ObjectOutputStream。

```
 socket = new ServerSocket(4567);
    System.out.println("Waiting for connection,,"); // showing
    client = socket.accept();
    System.out.println("Connected"); //showing
    oos = new ObjectOutputStream(client.getOutputStream());
    ois = new ObjectInputStream(client.getInputStream());
    System.out.println("Stream,s opened"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:42:03.513

我没有看到任何超时，这就是它停止的原因。

可能有一些网络问题；您是否验证了设备的 IP 地址是否正确？

这不太可能，但*可能*有一些防火墙规则阻止了连接。

# php - 检查php imagick中的ghostscript支持？

> ID：10339320
> 
> 赞同：4
> 
> 时间：2012-04-26T18:31:41.940
> 
> 标签：php, pdf, ghostscript, imagick

是否可以检查 php imagick 扩展以获取 ghostscript 支持？

例如是否打开/关闭、使用的 ghostscript 版本等。

有哪些可能性可以获得额外的 ghostscript / pdf 详细信息？

到目前为止我唯一发现的是这个（imagick lib本身的版本）：

[http://php.net/manual/en/imagick.getversion.php](http://php.net/manual/en/imagick.getversion.php)

ps：不允许从 php 中调用系统调用（例如 exec）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T20:38:19.083

我对 的了解不多`imagick`，但对`imagemagick`. 我的猜测是，通过阅读[**与 imagemagick 相关的答案**](https://stackoverflow.com/a/3613720/359307)也可以帮助您使用 imagick：

```
 convert -list delegate | grep -Ei '(PDF|PS|EPS)' 
```

（`convert`是 CLI 实用程序之一，属于`imagemagick`.）

# ios - 用户退出模式视图时如何验证 uitextfields？(iOS)

> ID：10339322
> 
> 赞同：1
> 
> 时间：2012-04-26T18:31:47.433
> 
> 标签：ios, uitextfield

我必须验证用户在模态视图中的某些文本字段中输入的文本。我对 textFieldShouldEndEditing 进行了验证并且工作正常......除非用户按下视图的关闭按钮。然后，无论 textFieldShouldEndEditing 结果如何，视图都会关闭。

那么......我应该如何（以及在​​哪里）进行验证以确保始终验证数据？或者，至少，当他/她按下模态视图的取消或完成按钮时，我怎么知道用户是否正在编辑某个文本字段...

非常感谢，

卡洛斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:35:04.477

您可以使用`textFieldDidBeginEditing:`禁用模式视图上的关闭按钮，直到用户结束编辑。

或者，当用户点击模态视图上的关闭按钮时，您可以使用验证代码检查是否应关闭模态视图。

例如，假设“self”是委托：

```
- (IBAction)closeButtonPressed:(id)sender {

    if ([self textFieldShouldEndEditing:self.textFieldBeingEdited]) {

         // dismiss modal view 

    } 

} 
```

# gwt - 显示/隐藏标签 - 在 GWT 中添加和删除与设置可见

> ID：10339323
> 
> 赞同：1
> 
> 时间：2012-04-26T18:31:53.313
> 
> 标签：gwt, visibility, widget, show-hide, labels

我想这可能是一个一般的 javascript 问题，但我有一个小部件，默认情况下，它有一个标签。我需要一种方法来拥有一个无标签的小部件。我目前有一个带有布尔值的特殊构造函数，指示是否显示此标签。

相反，如果我要添加一种方法来显示/隐藏此标签，是更好地使用 CSS 中的可见性，还是从其父标签中添加/删除标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:49:47.390

CSS 可见性。

但是，如果您正在使用 GWT 和它的其他群组（smartgwt、gxt），setVisible(boolean)、show()、hide() 已经被精心设计到它们的可视化组件中。

在引入新的可视化组件时，您应该简单地扩展 Widget 类或其任何子类，以便为您的新组件充分利用 GWT 特性。GWT 类 Java 功能的重量级已经被 GWT 编译器分离为 javascript 代码中的固定成本 - 所以您不妨扩展 Widget 类。

为什么不使用 GWT（或 smartgwt 或 gxt）中已经存在的 Label 类，然后使用 setVisible（或 show() hide()）属性方法？

# javascript - jquery .show() .hide() 拼图

> ID：10339327
> 
> 赞同：0
> 
> 时间：2012-04-26T18:32:10.553
> 
> 标签：javascript, jquery

我正在编写一个简单的 jquery 动画来在单击标题时显示/隐藏一块东西。标记如下所示：

```
<section class="infoblock off">
<h2><span class="sectiontitle rounded-right">TITLE (click to show/hide)</span></h2>
<div class="info"></div><!--info-->
</section> 
```

我的 javascript 看起来像这样：

```
 $(".infoblock h2").click( function(event) {
        //console.log('show info');

        if ( $(this).parent( $('.infoblock') ).hasClass('off') ) {          
            $(this).parent( $('.infoblock') ).removeClass('off');
            $(this).parent( $('.infoblock') ).addClass('on').children( $('.info') ).show(300);
            console.log( 'On function. Parent class= '+$(this).parent( $('.infoblock') ).attr('class') );

        } else if ( $(this).parent( $('.infoblock') ).hasClass('on') ) {
            $(this).parent( $('.infoblock') ).removeClass('on');
            $(this).parent( $('.infoblock') ).addClass('off');
            $(this).parent( $('.infoblock') ).children( $('.info') ).hide(300);
            console.log( 'Off function. Parent class= '+$(this).parent( $('.infoblock') ).attr('class') );
        }

    }); 
```

这有效，**但是**当我第二次单击标题以隐藏`.info <div>`标题时，标题也会被隐藏。为什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:41:57.907

我认为您对如何指定选择器感到困惑。例如，您在哪里

```
$(this).parent( $('.infoblock') ).hasClass('off') 
```

我想你想要

```
$(this).parent('.infoblock').hasClass('off') 
```

[这](http://jsfiddle.net/cordesmj/5yt6V/)是一个工作示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:40:04.583

演示：http: [//jsfiddle.net/RQ2Cw/1/](http://jsfiddle.net/RQ2Cw/1/)

而不是`parent`使用`closest`，而不是`children`使用`find`

```
$(".infoblock h2").click(function(event) {
    //console.log('show info');
    if ($(this).closest('.infoblock').hasClass('off')) {
        $(this).closest('.infoblock').removeClass('off');
        $(this).closest('.infoblock').addClass('on').find('.info').show(300);
        console.log('On function. Parent class= ' + $(this).closest('.infoblock').attr('class'));

    } else if ($(this).parent('.infoblock').hasClass('on')) {
        $(this).closest('.infoblock').removeClass('on');
        $(this).closest('.infoblock').addClass('off');
        $(this).closest('.infoblock').find('.info').hide(300);
        console.log('Off function. Parent class= ' + $(this).closest('.infoblock').attr('class'));
    }

});​ 
```

或者 ：

```
$(".infoblock h2").click(function(event) {
    var _parent = $(this).closest('.infoblock');
    if (_parent.hasClass('off')) {
        _parent.removeClass('off').addClass('on').find('.info').show(300);

    } else if (_parent.hasClass('on')) {
        _parent.removeClass('on').addClass('off').find('.info').hide(300);
    }

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:40:54.740

如果您不在其他任何地方使用“信息”类，则可以直接将其用作选择器：

```
$('.info').show(300)
$('.info').hide(300) 
```

如果您确实在其他地方使用该类，您可以给它一个 ID`<div id="info" class="info"></div>`并使用`$('#info')`

`hide()`此外，如果条件的唯一目的是在和之间切换`show()`（如果没有与类关联的 css），请尝试使用该`toggle()`函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T18:42:34.643

存储对父元素的引用并使用 jQuery 的函数链接，如下所示：

```
$(".infoblock h2").click( function(event) {
        //console.log('show info');
        var $parent = $(this).parent('.infoblock');

        $parent.toggleClass("off").toggleClass("on").children($('.info')).toggle(300);

        if ($parent.hasClass('on')) {          
            console.log( 'On function. Parent class= '+$parent.attr('class'));
        } else if ($parent.hasClass('off')) {
            console.log( 'Off function. Parent class= '+$parent.attr('class'));
        }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T18:49:17.127

您可以分两行执行此操作：

```
$( '.infoblock' ).on( 'click', 'h2', function () {   
    var $elem = $( this ).closest( '.infoblock' ).toggleClass( 'on off' );   
    $elem.find( '.info' )[ $elem.hasClass( 'on' ) ? 'show' : 'hide' ]( 300 );
}); 
```

**现场演示：http:** [//jsfiddle.net/dpdvg/1/](http://jsfiddle.net/dpdvg/1/)

# hadoop - mapreduce程序输出中的重复项？

> ID：10339331
> 
> 赞同：1
> 
> 时间：2012-04-26T18:32:34.633
> 
> 标签：hadoop

我的输出中有很多重复的值，所以我实现了一个 reduce 函数，如下所示，但是这个 reduce 仍然作为一个标识函数工作，即即使我有一个 reduce，输出也没有区别。我的 reduce 功能有什么问题？

```
 public class search 
{      
    public static String str="And";
    public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, Text> 
    {
        String mname="";
        public void configure(JobConf job)
        {
             mname=job.get(str);
             job.set(mname,str);
        }

        private Text word = new Text();
        public Text Uinput =new Text("");
        public void map(LongWritable key, Text value, OutputCollector<Text, Text> output, Reporter reporter) throws IOException 
        {

            String mapstr=mname;
            Uinput.set(mapstr);
            String line = value.toString();
            Text fdata = new Text();

            StringTokenizer tokenizer = new StringTokenizer(line);
            while (tokenizer.hasMoreTokens())
            {
                word.set(tokenizer.nextToken());
                fdata.set(line);

                if(word.equals(Uinput))
                output.collect(fdata,new Text(""));
            }

        }
    } 

    public static class SReducer extends MapReduceBase implements Reducer<Text, Text, Text, Text> 
    {
        public void reduce(Text key, Iterator<Text> values, OutputCollector<Text, Text> output, Reporter reporter) throws IOException 
        {

            boolean start = true;
            //System.out.println("inside reduce   :"+input);
            StringBuilder sb = new StringBuilder();
            while (values.hasNext()) 
            {
                if(!start)

                start=false;
                sb.append(values.next().toString());

            }
            //output.collect(key, new IntWritable(sum));
            output.collect(key, new Text(sb.toString()));
        }
    } 
```

公共静态 void main(String[] args) 抛出异常 {

```
 JobConf conf = new JobConf(search.class);
    conf.setJobName("QueryIndex");
    //JobConf conf = new JobConf(getConf(), WordCount.class);
    conf.set(str,args[0]);

    conf.setOutputKeyClass(Text.class);
    conf.setOutputValueClass(Text.class);

    conf.setMapperClass(Map.class);
    //conf.setCombinerClass(SReducer.class);
    conf.setReducerClass(SReducer.class);

    conf.setInputFormat(TextInputFormat.class);
    conf.setOutputFormat(TextOutputFormat.class);

    FileInputFormat.setInputPaths(conf, new Path("IIndexOut"));
    FileOutputFormat.setOutputPath(conf, new Path("searchOut"));

    JobClient.runJob(conf);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:14:29.630

我没有仔细看代码，但我可以确定的一件事是布尔变量**start**在这里没有用，下面的代码***if (!start)***应该放在括号中以删除数据，否则你最终只会写所有您从 mapper 收到的 reducer 中的数据。

```
 public static class SReducer extends MapReduceBase implements Reducer<Text, Text, Text, Text> 
{
    public void reduce(Text key, Iterator<Text> values, OutputCollector<Text, Text> output, Reporter reporter) throws IOException 
    {

        boolean start = true;
        //System.out.println("inside reduce   :"+input);
        StringBuilder sb = new StringBuilder();
        while (values.hasNext()) 
        {
            if(!start)
            {
               start=false;
               sb.append(values.next().toString());
            }

        }
        //output.collect(key, new IntWritable(sum));
        output.collect(key, new Text(sb.toString()));
    }
} 
```

或者一个最佳的减少方法就是： -

```
public static class SReducer extends MapReduceBase implements Reducer<Text, Text, Text, Text> 
  {
  public void reduce(Text key, Iterator<Text> values, OutputCollector<Text, Text> output, Reporter reporter) throws IOException 
{

   //System.out.println("inside reduce   :"+input);
    StringBuilder sb = new StringBuilder();
    sb.append(values.next().toString());

    //output.collect(key, new IntWritable(sum));
    output.collect(key, new Text(sb.toString()));
} 
```

}

因为您只关心迭代器的第一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:02:15.663

也许你还没有将这个 reducer 设置为要使用的实际 reduce 函数？这是使用完成的

```
job.setReducerClass(). 
```

如果您不将类设置为您的类，则使用默认减速器。您应该执行以下操作：

```
job.setReducerClass(SReducer.class) 
```

请发布您的主要功能，以便我们验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T21:46:17.687

在 map 和 reduce 函数之前使用 @override 注释。这样您就可以非常确定，您正在覆盖基类方法。

# javascript - 在 JavaScript/ActionScript 中重新定义 Math.constructor 有什么实际用途吗？

> ID：10339334
> 
> 赞同：3
> 
> 时间：2012-04-26T18:32:51.153
> 
> 标签：javascript, actionscript, constructor, ecmascript-5, jscript

Math 对象没有原型属性，但有构造函数属性。在任何情况下重新定义构造函数会有用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:43:20.657

对象（准确地说： ECMAScript 全局对象的属性的初始值所指的对象）没有属性`Math`，请*参阅*ECMAScript[语言规范，5.1 版](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262%20edition%205.1,%20June%202011.pdf)，第 15.8 节“数学对象”。所以，`Math`*`constructor`*

 *```
Math.hasOwnProperty("constructor") 
```

返回`false`（在符合 ECMAScript Ed. 3 及更高版本的实现中）。

`Math`对象通过原型链从其原型中*继承*一个`constructor`属性，即“标准内置Object原型对象（15.2.4）”（同上），与该`Object.prototype`属性最初所指的相同。后一个对象提供了几个有用的属性，例如`Object.prototype.hasOwnProperty`（见上文）。所以`Math`对象的原型链不为空是有道理的。

`Math`对象也继承只是 ECMAScript 实现中无条件继承的`Object.prototype.constructor`副作用（除了第 4 版提案的实现，也许还有未来的版本）属性没有合适的可见性修饰符来防止这种情况（比如`private`在几种基于类的语言中）。当然，继承自同一个原型的实例的构造函数，就是全局对象`Object`的属性初始值所引用的对象。`Object`所以`Object.prototype.constructor`必须反映这一点。因此，评估结果

```
Math.constructor === Object 
```

是`true`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T18:35:54.790

*所有*对象都有一个`constructor`属性，该属性指示创建该对象的构造函数。

甚至`({}).constructor`回报`Object()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T15:10:09.437

实际上，Math 没有*自己的*“构造函数”属性。它从 Object.prototype 继承“构造函数”，就像它继承“toString”、“hasOwnProperty”和 Object.prototype 的所有其他属性一样。

对于数学，“构造”可能没有什么用处。它只是 JavaScript 继承工作方式的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T12:23:57.150

[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math#Description)说：

> 与其他全局对象不同，Math 不是构造函数。**Math 的所有属性和方法**都是**静态**的。

在其他语言中，当类是静态的时，您可以直接使用其属性和方法，而无需创建该类的实例（对象）。如果使用 Math 构造函数，则没有原生类型来支持对象，这与原始类型不同：Number、String、Boolean。它们可以使用包装器转换为对象。

此外，扩展根对象是一种不好的做法。如果将来在环境中实现了新功能并且代码没有对此进行故障安全检查，它将覆盖本机功能。

我个人的看法是，你不需要构造函数，也不需要原型——你可以定义自己的数学函数。Math 对象在这里只是为了呈现一个标准函数，并让程序员可以不定义`Pi`or `E`，例如。并且可能用户定义的数学函数将比内置函数慢几倍。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-07T19:29:28.853

`Math`对象“继承”自`Object`（意思`Math.__proto__ === Object.prototype`）

对于`Math`任何 JavaScript 程序员来说，对象只不过是一个“特殊”但简单`Object`的附加方法，其实现和构造是自动和隐藏的。

`Object.prototype`定义一个`.constructor`字段（实际上任何函数都将自己分配给自己原型的构造函数，请参见*ex1*）

*ex1（有点绕道）*：

```
function xxx() { }
// then:
xxx.prototype.constructor === xxx; // true
// since xxx is a function:
xxx.constructor === Function.prototype.constructor; // true
// and as such:
xxx.constructor === Function; // true 
```

***因此，当您使用 时`Math.constructor`，它只是像这样查找`Math`对象的原型链（......好吧）：***

1.  `Math`-->`Math.hasOwnProperty('constructor')`**`=== false`**

2.  *没有找到下一步*

3.  `Math.__proto__`-->`Math.__proto__.hasOwnProperty('constructor')`**`=== true`**

4.  *找到，返回：* `Math.__proto__.constructor`

***所以基本上：***

```
Math.constructor === Object.prototype.constructor; // true
// and as such:
Math.constructor === Object; // true
// and as stated at the top:
Math.__proto__ === Object.prototype; // true 
```

希望这会有所帮助-ck

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T13:57:26.073

在我看来，JavaScript 中的 Math 对象试图模拟其他流行编程语言（例如 Java）中的静态数学行为。由于这只能在 JavaScript 中模拟，并且默认情况下所有对象都具有原型和构造函数属性，我的猜测是开发人员只是忘记将构造函数属性设置为`undefined`，通过显式执行类似`Math.constructor = undefined;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-15T01:12:53.147

在您需要在不污染全局范围的情况下生成转换表的情况下，这将很有用。例如：

```
Math.constructor = function() {
  var i = 0, unicode = {}, zero_padding = "0000", max = 9999;
  //Loop through code points
  while (i < max) {
    //Convert decimal to hex value, find the character, then pad zeroes to the codepoint
    Math.constructor[String.fromCharCode(parseInt(i, 16))] = ("u" + zero_padding + i).substr(-4);
    i = i + 1;
    }    
  } 
```

调用构造函数来填充它：

```
Math.constructor();

Math.constructor["a"] 
```

另一个用途是扩展属性和方法以定义图形库的原语：

```
root(arg,index) "index-th" 参数的根。示例：root(x,6) x 的第六个根，root[tan(x),4] x 的切线的第四个根。
sqrt() 参数的平方根（括号内的数字或表达式）。等价于根（参数，2）
cbrt() 参数的立方根。相当于根（参数，3）
logn(arg,base) 以 arg 为底的对数。
ln() 参数的自然对数（以 E 为底的参数对数，其中 E 是欧拉常数）
lg() 参数以 10 为底的对数，等价于 logn(argument,10)。
lb() 参数的以 2 为底的对数。
exp() 指数函数 E 的参数幂，等价于 E^argument
sin() 参数正弦
cos() 余弦
tan() 正切
cot() 余切
sec() 参数的割线，等价。为 1/cos(arg)。
csc() 余割，等效。为 1/sin(arg)。
asin() 反正弦
acos() 反余弦
atan() 反正切
acot() 反正切
asec() 弧正割，反割。
acsc() 反余割，反余割。
sinh() 双曲正弦，双曲正弦
cosh() 双曲余弦，双曲余弦
tanh() 双曲正切，Tangens hyperbolicus
coth() 双曲余切，双曲余切
sech() 双曲正割，双曲正割。
csch() 双曲余割，双曲余割。
asinh() 面积正弦，面积正弦双曲线，逆 sinh()。
acosh() 面积余弦，面积余弦双曲线，逆 cosh()。
atanh() 面积正切，面积正切双曲线，逆 tanh()。
acoth() 面积余切，双曲线余切面积，逆 cotanh()。
asech() 面积正割，双曲线面积正割，逆 sech()。
acsch() 面积余割，双曲线面积余割，逆 csch()。
gaussd(x,mean,sigma) 高斯分布（“钟形曲线”）。顺便说一下，gaussd(x,0,1) 是特例“正态分布密度，平均值=0，标准差=1”。
min(arg1,arg2) 返回两个参数中较小的一个
max(arg1,arg2) 返回两个参数中的较大者
round() 将参数向上或向下舍入到最接近的整数
floor() 向下舍入 arg。
ceil() 向上舍入 arg。
abs() 或 | | 参数的绝对值。示例：2abs(sin[x]) 或 2|sin(x)| .
sgn() 符号函数。

```

```
rand 0 和 1 之间的随机数。示例：
pi*rand*sin(x) 甚至 Pirandsin(x) 。
E 欧拉常数 2.718281828459045...
LN2 2的自然对数，是0.6931471805599453...
LN10 10的自然对数，是2.302585092994046...
LOG2E E 的以 2 为底的对数（E：见上文），为 1.4426950408889633...
LOG10E E 的以 10 为底的对数，是 0.4342944819032518...
PHI 黄金比例 1.61803398874989...
PI 3.141592653589793...
SQRT1_2 1/2 的平方根，为 0.7071067811865476...
SQRT2 2 的平方根，是 1.4142135623730951...

```

**参考**

*   [增强 JavaScript 核心对象](http://www.sitepoint.com/augmenting-javascript-core-objects/)

*   [Walter Zorn：在线函数绘图员](http://www.walterzorn.de/en/grapher/grapher_e.htm)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-03T20:36:28.623

```
 <script type="text/javascript">
    Math.prototype=Math;
    Math.prototype.rand=function(min,max){
        return Math.floor((Math.random() * (max-min+1))+min)
    }

    var o=[];
    for(var i=0;i<100;i++)o.push(Math.rand(-1,1));
    alert(o.join(", "))
    </script> 
```

粗略的你也可以这样做：

```
Math.rand=function(min,max){
    return Math.floor((Math.random() * (max-min+1))+min)
} 
```

Math 没有像 Array 和 String 这样的原型的原因是它不是一个函数而是一个对象。因为你可以使用 new`String()`和 new`Array()`你也可以使用`String.prototype`and `Array.prototype`。

也是如此`Object, Function, Number, Date, RegExp and even Boolean`。但是，任何定义的函数都将被分配一个原型属性，并将继承自 Function 以及它必须继承的链中的任何其他内容。

如果你想像函数一样对待`Math`，你所要做的就是用函数覆盖变量。这种方式`Math.constructor`在调用时不会返回 Object ，因为它实际上会链接到创建它的用户定义函数。

您可以先制作本机对象的副本，然后将其扔给覆盖函数的原型属性之一，或者使用封装，以便只有您的新数学函数可以访问本机方法。不知道在这个问题上还能说什么。

开头的问题有点无意义。**Math.constructor 将返回 Object 并且与直接调用 Object 相同。唯一的区别是如果您更改了构造函数。**

你为什么要改变构造函数呢？

该`Math`对象完全没有问题。如果我们期望它从某个地方继承某些东西，那么我们期望 " `this`" 指向什么？如果你能想出这个问题的答案，你就会有一些可以编码的目的。*

# java - 对比

> ID：10339338
> 
> 赞同：29
> 
> 时间：2012-04-26T18:33:01.690
> 
> 标签：java, generics

[java.util.Collections.max](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#max%28java.util.Collection%29)的签名如下所示：

> 公共静态 <T 扩展对象和可比较<? super T>> T max(集合集合);

据我了解，这基本上意味着 T 必须既是 [java.lang.Object](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#max%28java.util.Collection%29)又是[java.lang.Comparable<? 超级T>>](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html) ,

但是，由于每个[java.lang.Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)也是一个[java.lang.Object](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)，所以上面的签名和下面的这个有什么区别？：

> 公共静态 <T 扩展 Comparable<? super T>> T max(集合集合);

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-26T18:42:46.813

**为了保持二进制兼容性：**[这里](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ104)有完整的描述。第二个签名实际上将方法的返回类型更改为`Comparable`，它失去了返回的一般性`Object`。原始签名保留两者。

# objective-c - 如何为 UIImageView 背景设置动画

> ID：10339343
> 
> 赞同：0
> 
> 时间：2012-04-26T18:33:24.277
> 
> 标签：objective-c, animation, uiimageview

我有一个背景图像，我不想为它制作动画，但我不知道如何制作。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:41:53.647

使用 UIImageView 并将 animationImages 属性设置为图像数组。您可以设置持续时间并调用 startAnimating。

[苹果文档 UIImageView](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html)

# gwt - GWT 多个活动/地点与一个令牌

> ID：10339346
> 
> 赞同：0
> 
> 时间：2012-04-26T18:33:38.627
> 
> 标签：gwt, history, gwt-mvp, gwt-history

我的站点在左侧有一个 GWT-Tree。中间是一个 GWT-TabBar。

这两部分都实现为[Views/Activity/Places](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)。我有两个标记器：树的“m”和选项卡的“t”。

如果我访问一个地方 ( `goTo()`)，只有这个地方将用于生成历史令牌。**但我想看到这个：`<page>#m:sub/sub/sub;t:map`**

我实际上认为活动和场所的想法。当只有一个标记器可以一次提供一个标记时，我看不出有多个标记器的意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T22:18:09.767

您不能同时显示两个不同的标记 #m: 和 #t:，因为您不能同时在两个地方。

因此，如果选项卡和树同时显示，那么两者的状态必须同时存储在同一个位置。

这或多或少是您需要的。

```
public class ExamplePlace extends Place {

    public String treePosition = "/";

    public int tabIndex = 0;

    public ExamplePlace() {
        super();
    }

    public ExamplePlace(String treePosition, int tabIndex) {
        this.treePosition = treePosition;
        this.tabIndex = tabIndex;
    }

    @Prefix("overview")
    public static class Tokenizer implements PlaceTokenizer<ExamplePlace> {

        /**
         * parse token to get state
         * 
         */
        @Override
        public ExamplePlace getPlace(String token) {
            String treePosition = "";
            int tabIndex = 0;
            String[] states = token.split(";");
            for (String state : states) {
                String[] mapping = state.split("=");
                if (mapping.length == 2) {
                    if ("t".equals(mapping[0])) {
                        treePosition = mapping[1];
                    }
                    if ("m".equals(mapping[0])) {
                        try {
                            tabIndex = Integer.valueOf(mapping[1]);
                        } catch (Throwable e) {
                        }
                    }
                }
            }
            return new ExamplePlace(treePosition, tabIndex);
        }

        /**
         * store state in token
         * 
         */
        @Override
        public String getToken(ExamplePlace place) {
            StringBuffer sb = new StringBuffer();
            if (place.getTreePosition()!=null) {
                sb.append("t").append("=").append(place.getTreePosition());
               sb.append(";");
            }
            sb.append("m=").append(place.getTabIndex());
            return sb.toString();
        }

    }

    public String getTreePosition() {
        return treePosition;
    }

    public void setTreePosition(String treePosition) {
        this.treePosition = treePosition;
    }

    public int getTabIndex() {
        return tabIndex;
    }

    public void setTabIndex(int tabIndex) {
        this.tabIndex = tabIndex;
    }

} 
```

这将为您提供如下所示的 URL；

> index.html#overview:t=/subtree/subtree/leaf;m=2

您可能会遇到令牌中的正斜杠的问题，不确定。如有必要，将它们更改为其他字符；

Activity接收传入的地方并将状态注入到视图中；

# python - 如何使用 Python 对一堆 IP 地址进行地理定位？

> ID：10339351
> 
> 赞同：4
> 
> 时间：2012-04-26T18:33:51.877
> 
> 标签：python, geolocation, visualization, data-visualization

我有一个大约 300 个 IP 地址的列表，我想将它们绘制在世界地图上。你能大致解释一下我如何用 Python 做到这一点吗？

编辑：我也对问题的可视化部分感兴趣

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T18:39:49.683

您可以使用[hostip.info API](http://www.hostip.info/use.html)。例如：

```
http://api.hostip.info/get_html.php?ip=64.233.160.0 
```

因此，您使用的 Python 代码`urllib2`将是：

```
import urllib2
f = urllib2.urlopen("http://api.hostip.info/get_html.php?ip=64.233.160.0")
data = f.read()
f.close() 
```

然后从返回的结果中检索数据。

如果您需要经度和纬度，请使用以下`position=true`标志：

```
http://api.hostip.info/get_html.php?ip=64.233.160.0&position=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:41:04.413

您可以使用[GeoIP](http://www.maxmind.com/app/python)，它有免费版和付费版。还有一个方便的[Python API](http://www.maxmind.com/app/python)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-12T12:20:50.230

这是我在 Python 3.x 中的解决方案，用于在给定包含**IP 地址**的数据帧的情况下返回**地理位置**信息；在矢量化 pd.series/dataframe 上有效地并行应用函数是要走的路。

 **为了在地图上绘制记录，对纬度和经度信息进行子集化，然后使用合适的 Mapping API，如 Google Maps Api 或 tableau，有助于实现数据可视化。

将对比两个流行库的性能返回**位置**。

TLDR：使用**geolite2**方法。

**1.** 从库中`geolite2`打包`geolite2`

**输入**

```
# !pip install maxminddb-geolite2
import time
from geolite2 import geolite2
geo = geolite2.reader()
df_1 = train_data.loc[:50,['IP_Address']]

def IP_info_1(ip):
    try:
        try:
        x = geo.get(ip)
    except ValueError:   #Faulty IP value
        return np.nan
    try:
        return x['country']['names']['en'] if x is not None else np.nan
    except KeyError:   #Faulty Key value
        return np.nan

s_time = time.time()
# map IP --> country
#apply(fn) applies fn. on all pd.series elements
df_1['country'] = df_1.loc[:,'IP_Address'].apply(IP_info_1)
print(df_1.head(), '\n')
print('Time:',str(time.time()-s_time)+'s \n')

print(type(geo.get('48.151.136.76'))) 
```

**输出**

```
 IP_Address         country
0   48.151.136.76   United States
1    94.9.145.169  United Kingdom
2   58.94.157.121           Japan
3  193.187.41.186         Austria
4   125.96.20.172           China 

Time: 0.09906983375549316s 

<class 'dict'> 
```

**2.** 从库`DbIpCity`中打包`ip2geotools`

**输入**

```
# !pip install ip2geotools
import time
s_time = time.time()
from ip2geotools.databases.noncommercial import DbIpCity
df_2 = train_data.loc[:50,['IP_Address']]
def IP_info_2(ip):
    try:
        return DbIpCity.get(ip, api_key = 'free').country
    except:
        return np.nan
df_2['country'] = df_2.loc[:, 'IP_Address'].apply(IP_info_2)
print(df_2.head())
print('Time:',str(time.time()-s_time)+'s')

print(type(DbIpCity.get('48.151.136.76',api_key = 'free'))) 
```

**输出**

```
 IP_Address country
0   48.151.136.76      US
1    94.9.145.169      GB
2   58.94.157.121      JP
3  193.187.41.186      AT
4   125.96.20.172      CN

Time: 80.53318452835083s 

<class 'ip2geotools.models.IpLocation'> 
```

巨大的时间差异的一个原因可能是由于输出的数据结构，**即从***字典*直接子集似乎比从专门的*ip2geotools.models.IpLocation*对象索引更有效 。

此外，第一种方法的输出是包含地理位置数据的字典，分别子集以获得所需的信息：

```
x = geolite2.reader().get('48.151.136.76')
print(x)

>>>
    {'city': {'geoname_id': 5101798, 'names': {'de': 'Newark', 'en': 'Newark', 'es': 'Newark', 'fr': 'Newark', 'ja': 'ニューアーク', 'pt-BR': 'Newark', 'ru': 'Ньюарк'}},

 'continent': {'code': 'NA', 'geoname_id': 6255149, 'names': {'de': 'Nordamerika', 'en': 'North America', 'es': 'Norteamérica', 'fr': 'Amérique du Nord', 'ja': '北アメリカ', 'pt-BR': 'América do Norte', 'ru': 'Северная Америка', 'zh-CN': '北美洲'}}, 

'country': {'geoname_id': 6252001, 'iso_code': 'US', 'names': {'de': 'USA', 'en': 'United States', 'es': 'Estados Unidos', 'fr': 'États-Unis', 'ja': 'アメリカ合衆国', 'pt-BR': 'Estados Unidos', 'ru': 'США', 'zh-CN': '美国'}}, 

'location': {'accuracy_radius': 1000, 'latitude': 40.7355, 'longitude': -74.1741, 'metro_code': 501, 'time_zone': 'America/New_York'}, 

'postal': {'code': '07102'}, 

'registered_country': {'geoname_id': 6252001, 'iso_code': 'US', 'names': {'de': 'USA', 'en': 'United States', 'es': 'Estados Unidos', 'fr': 'États-Unis', 'ja': 'アメリカ合衆国', 'pt-BR': 'Estados Unidos', 'ru': 'США', 'zh-CN': '美国'}}, 

'subdivisions': [{'geoname_id': 5101760, 'iso_code': 'NJ', 'names': {'en': 'New Jersey', 'es': 'Nueva Jersey', 'fr': 'New Jersey', 'ja': 'ニュージャージー州', 'pt-BR': 'Nova Jérsia', 'ru': 'Нью-Джерси', 'zh-CN': '新泽西州'}}]} 
```**

# android - 解析 JSON 方向谷歌地图

> ID：10339353
> 
> 赞同：-2
> 
> 时间：2012-04-26T18:33:59.283
> 
> 标签：android, google-maps, directions

我是否需要从下面的 url 解析 json 并将距离和持续时间的数据放在列表视图中，可能吗？

[http://maps.googleapis.com/maps/api/directions/json?origin=-25.3641,-49.2857&destination=-25.3928,-49.2728®ion=en&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=-25.3641,-49.2857&destination=-25.3928,-49.2728&region=en&sensor=false)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:46:33.257

你的问题不是很清楚。你需要先解析json。您可以将解析后的数据放入`ArrayList`of 中`Bundle`。执行以下操作：

```
String response = getResponseFromGoogleMaps(); //this function will fetch the response. write it in your way
ArrayList<Bundle> list = new ArrayList<Bundle>();
try {
        JSONObject json = new JSONObject(response);
        JSONArray routes = json.getJSONArray("route");
        JSONArray legs = routes.getJSONArray(0);
        JSONArray steps = legs.getJSONArray(0);
        for(int i=0;i<steps.length();i++) {
            JSONObject singleStep = steps.getJSONObject(i);
            JSONObject duration = singleStep.getJSONObject("duration");
            Bundle dur = new Bundle();
            dur.putString("text", duration.getString("text"));
            dur.putString("value", duration.getString("value"));
            JSONObject distance = singleStep.getJSONObject("distance");
            Bundle dis = new Bundle();
            dis.putString("text", distance.getString("text"));
            dis.putString("value", distance.getString("value"));
            Bundle data = new Bundle();
            data.putBundle("duration", dur);
            data.putBundle("distance", dis);
            list.add(data);
        }
} catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
} 
```

然后创建您自己的列表适配器（应该从 扩展`BaseAdapter`）来处理`ArrayList<Bundle>`. 你完成了！

# ios - 如何为 CAlayer 的边界设置动画以逐步显示图像？

> ID：10339361
> 
> 赞同：5
> 
> 时间：2012-04-26T18:34:37.470
> 
> 标签：ios, core-animation, calayer

由于某些原因，我试图避免使用 CAScrollLayer 来执行此操作。我想要的效果是逐步显示（从下到上）CALayer 的内容（我之前加载的 png）。所以我想这样做：

```
 layer.anchorPoint = CGPointMake(.5, 1);
    CABasicAnimation* a = [CABasicAnimation animationWithKeyPath:@"bounds.size.height"];
    a.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    a.fillMode = kCAFillModeBoth;
    a.removedOnCompletion = NO;
    a.duration = 1;
    a.fromValue = [NSNumber numberWithFloat:0.];
    a.toValue = [NSNumber numberWithFloat:layer.bounds.size.height];
    [layer addAnimation:a forKey:nil]; 
```

这样做的问题是您可以告诉图层的内容是按边界缩放的。我试图改变边界，但内容始终保持原始大小，以便边界有效地剪辑图像，并且当我增加 bounds.height 时，图像“显示”本身。

关于如何实现它或我可能遗漏什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T02:41:42.387

“爸爸”有正确的答案。

您想创建一个 CAShapeLayer，并将其作为蒙版安装在您的图层上。

您创建一个只是一个矩形的 CGPath 并将该路径安装到形状层中。路径的内容决定了蒙版图层的哪些区域显示。如果路径是图层中间的三角形，则只出现三角形。

然后，您创建一个为路径设置动画的动画。

为了从底部显示您的图像，您需要在图层底部设置一个高度为 0 的矩形路径，然后创建一个 CAAnimation，其中 toValue 是与整个图层高度相同的矩形你想透露。该系统将生成一个动画，在扫描中显示图像。

您可以使用相同的技术来实现各种炫酷效果，例如谷仓门、百叶窗、“虹膜擦拭”等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T20:08:53.980

好的，我让它工作了，但我基本上也必须更新图层的框架，以反映锚点的变化：

```
 [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
  layer.contentsGravity = kCAGravityTop;
  layer.masksToBounds = YES;
  layer.anchorPoint = CGPointMake(.5, 1);
  CGRect newFrame = layer.frame;
  newFrame.origin.y += newFrame.size.height / 2;
  layer.frame = newFrame;
  [CATransaction setValue:(id)kCFBooleanFalse forKey:kCATransactionDisableActions];

  a.toValue = [NSNumber numberWithFloat:layer.bounds.size.height];
  [layer addAnimation:a forKey:nil]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T19:36:41.150

如果您更改了剪贴蒙版怎么办？（或使用遮罩层）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:18:47.387

您可以将另一个图像放在目标图像上，然后像舞台幕布一样将其向上移动。

# jquery - 检查 JSON 是否具有不可解析的曲线 - jQuery .ajax dataFilter

> ID：10339364
> 
> 赞同：1
> 
> 时间：2012-04-26T18:34:48.723
> 
> 标签：jquery, json, security, csrf

使用：

```
$.ajaxSetup({
    dataFilter: function(data, type) {
        if (type === 'json') {
            data.replace('for (;;);', '');
            return JSON.parse(data);
        }

        return data;
    }
}); 
```

为无法解析的垃圾处理 json - `for(;;);` - 用于 json 安全性：http: [//labs.adobe.com/technologies/spry/samples/data_region/JSONParserSample.html](http://labs.adobe.com/technologies/spry/samples/data_region/JSONParserSample.html)

但我想做的是让 .ajax 函数检查 json 是否具有无法解析的残渣，如果是，则替换它并返回它，否则就返回它。

这样，我可以在整个站点中重用该功能 - 一些 json 将具有杂乱无章，而另一些则不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:32:28.837

您的 dataFilter 不工作的唯一原因是该`.replace`方法不能在字符串上就地工作；您必须将结果返回到新字符串，或将字符串重新分配给其替换方法的输出。

```
$.ajaxSetup({
    dataFilter: function(data, type) {
        if (type === 'json') {
            data = data.replace('for (;;);', '');
            return JSON.parse(data);
        }

        return data;
    }
}); 
```

# google-maps - Google Maps API 3 fitBounds 填充 - 确保标记不会被覆盖的控件遮挡

> ID：10339365
> 
> 赞同：32
> 
> 时间：2012-04-26T18:34:51.597
> 
> 标签：google-maps, google-maps-api-3, padding, google-maps-api-2, geo

我希望能够在调用 a 后向地图视图添加填充[`map.fitBounds()`](https://developers.google.com/maps/documentation/javascript/reference)，因此无论地图控件或打开时会覆盖标记的滑动面板之类的东西如何，所有标记都可以看到。Leaftlet 可以[选择向 fitBounds 添加填充](http://leafletjs.com/reference.html#map-fitboundsoptions)，但谷歌地图没有。

有时，最北端的标记部分隐藏在视口上方。最西端的标记也经常位于缩放滑块下方。使用 API 2，可以通过减少地图视口中的给定填充来形成虚拟视口，然后调用该方法`showBounds()`来计算并基于该虚拟视口执行缩放和居中：

```
map.showBounds(bounds, {top:30,right:10,left:50}); 
```

API 2 的一个工作示例可以在[showBounds](http://koti.mbnet.fi/ojalesa/exam/index.html) () 示例链接下找到。

我在 API V3 中找不到类似的功能，但希望有另一种方法可以实现。也许我可以抓住东北点和西南点，然后在包含它们之后添加假坐标以进一步扩展边界？

### 更新

（[Codepen](http://codepen.io/dandv/pen/QGWPzP)，以防下面的代码不起作用）

```
function initMap() {
  var map = new google.maps.Map(document.getElementById('map'), {
    draggable: true,
    streetViewControl: false,
    zoomControl: false
  });

  var marker1 = new google.maps.Marker({
    position: {lat: 37, lng: -121},
    map: map,
  });

  var marker2 = new google.maps.Marker({
    position: {lat: 39.3, lng: -122},
    map: map,
  });

  var bounds = new google.maps.LatLngBounds();
  bounds.extend(marker1.position);
  bounds.extend(marker2.position);
  map.fitBounds(bounds);
}
```

```
#map {
  height: 640px;
  width: 360px;
}
#overlays {
  position: absolute;
  height: 50px;
  width: 340px;
  background: white;
  margin: -80px 10px;
  text-align: center;
  line-height: 50px;
}
/* Optional: Makes the sample page fill the window. */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
```

```
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Simple markers</title>

  </head>
  <body>
    <div id="map"></div>
    <div id="overlays">Controls / Order pizza / ETA / etc.</div>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?&callback=initMap">
    </script>
  </body>
</html>
```

问题是这样的：

[![在此处输入图像描述](../Images/22902046adcf0a50bb042aeb5e5b4cec.png)](https://i.stack.imgur.com/gKQSU.png)

我已尝试添加[自定义控件中记录的控件](https://developers.google.com/maps/documentation/javascript/controls#CustomControls)，但地图并不完全了解它 - 请参阅从[地图自定义控件示例](https://developers.google.com/maps/documentation/javascript/examples/control-custom)分叉的[这个小提琴](https://jsfiddle.net/dandv/pn66Lfcz/)。其中一个标记仍被控件遮挡。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-26T19:34:16.687

这是某种 hack-ish 解决方案，但在 之后`fitBounds`，您可以缩小一个级别，这样您就可以为标记获得足够的填充。

假设`map`变量是您对地图对象的引用；

```
map.setZoom(map.getZoom() - 1); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-07-06T08:38:48.327

自 2017 年 6 月起，Maps JavaScript API 支持 fitBounds() 方法中的填充参数。

```
fitBounds(bounds:LatLngBounds|LatLngBoundsLiteral, padding?:number) 
```

请参阅文档以获取更多详细信息

[https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-29T09:22:42.550

我通过扩展地图边界以包含一个足以将标记推入视野的 latlng 解决了这个问题。

首先你需要创建一个覆盖视图

```
var overlayHelper = new google.maps.OverlayView();
overlayHelper.onAdd = function() {};
overlayHelper.onRemove = function() {};
overlayHelper.draw = function() {};
overlayHelper.setMap(map); 
```

一旦你有一个叠加助手，你需要获取地图投影并基于它执行计算。

请注意，我在地图上的控件是地图最右侧的一个 420 像素宽、100% 高度的 div。您显然需要更改代码以适应您的控件。

```
var mapCanvas = $("#map_canvas"),
    controlLeft = mapCanvas.width() - 420, // canvas width minus width of the overlayed control
    projection = overlayHelper.getProjection(),
    widestPoint = 0, 
    latlng, 
    point;

// the markers were created elsewhere and already extended the bounds on creation
map.fitBounds(mapBounds);

// check if any markers are hidden behind the overlayed control
for (var m in markers) {
    point = projection.fromLatLngToContainerPixel(markers[m].getPosition());
    if (point.x > controlLeft && point.x > widestPoint) {
        widestPoint = point.x;
    }
}

if (widestPoint > 0) {
    point = new google.maps.Point(
                mapCanvas.width() + (widestPoint - controlLeft), 
                mapCanvas.height() / 2); // middle of map height, since we only want to reposition bounds to the left and not up and down

    latlng = projection.fromContainerPixelToLatLng(point);
    mapBounds.extend(latlng);
    map.fitBounds(mapBounds);
} 
```

如果您在地图第一次加载时执行此操作，那么您需要将其包装在地图事件中以等待空闲。这允许覆盖视图初始化。不要在事件回调中包含覆盖帮助器的创建。

```
google.maps.event.addListenerOnce(map, 'idle', function() { <above code> }); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-11-30T21:58:42.337

您可以使用`map.fitBounds()`API V3，其填充语法与您提到的`map.showBounds()`.

简单地使用`map.fitBounds(bounds, {top:30,right:10,left:50});`对我有用。

（这可能是对 xomena 或 Roman86 帖子的评论，我没有足够的声誉来评论）

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-05-03T13:21:29.047

## 更新

[Google Maps API 现在支持fitBounds](https://developers.google.com/maps/documentation/javascript/reference/3/map#Map.fitBounds)方法中的原生“填充”参数（从版本 3.32 开始，如果更早，请更正我）。

我还没有机会测试它，但如果你能够升级 - 我会建议使用原生方式。如果您使用的是版本 < 3.32 并且无法升级 - 我的解决方案适合您。

* * *

我采用了[erzzo的](https://stackoverflow.com/users/4470863/erzzo)[工作解决方案](https://stackoverflow.com/a/28194546/4892968)并对其进行了一些改进。 **例子**

 **```
fitBoundsWithPadding(googleMapInstance, PolygonLatLngBounds, {left:250, bottom:10}); 
```

参数说明：

1.  gMap - 谷歌地图实例
2.  bounds - 谷歌地图 LatLngBounds 对象以适应
3.  paddingXY - 对象文字：2 种可能的格式：
    *   {x, y} - 用于水平和垂直填充（x=left=right, y=top=bottom）
    *   {左、右、上、下}

* * *

**要复制的功能列表**

```
function fitBoundsWithPadding(gMap, bounds, paddingXY) {
        var projection = gMap.getProjection();
        if (projection) {
            if (!$.isPlainObject(paddingXY))
                paddingXY = {x: 0, y: 0};

            var paddings = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            };

            if (paddingXY.left){
                paddings.left = paddingXY.left;
            } else if (paddingXY.x) {
                paddings.left = paddingXY.x;
                paddings.right = paddingXY.x;
            }

            if (paddingXY.right){
                paddings.right = paddingXY.right;
            }

            if (paddingXY.top){
                paddings.top = paddingXY.top;
            } else if (paddingXY.y) {
                paddings.top = paddingXY.y;
                paddings.bottom = paddingXY.y;
            }

            if (paddingXY.bottom){
                paddings.bottom = paddingXY.bottom;
            }

            // copying the bounds object, since we will extend it
            bounds = new google.maps.LatLngBounds(bounds.getSouthWest(), bounds.getNorthEast());

            // SW
            var point1 = projection.fromLatLngToPoint(bounds.getSouthWest());

            // we must call fitBounds 2 times - first is necessary to set up a projection with initial (actual) bounds
            // and then calculate new bounds by adding our pixel-sized paddings to the resulting viewport
            gMap.fitBounds(bounds);

            var point2 = new google.maps.Point(
                ( (typeof(paddings.left) == 'number' ? paddings.left : 0) / Math.pow(2, gMap.getZoom()) ) || 0,
                ( (typeof(paddings.bottom) == 'number' ? paddings.bottom : 0) / Math.pow(2, gMap.getZoom()) ) || 0
            );

            var newPoint = projection.fromPointToLatLng(new google.maps.Point(
                point1.x - point2.x,
                point1.y + point2.y
            ));

            bounds.extend(newPoint);

            // NE
            point1 = projection.fromLatLngToPoint(bounds.getNorthEast());
            point2 = new google.maps.Point(
                ( (typeof(paddings.right) == 'number' ? paddings.right : 0) / Math.pow(2, gMap.getZoom()) ) || 0,
                ( (typeof(paddings.top) == 'number' ? paddings.top : 0) / Math.pow(2, gMap.getZoom()) ) || 0
            );
            newPoint = projection.fromPointToLatLng(new google.maps.Point(
                point1.x + point2.x,
                point1.y - point2.y
            ));

            bounds.extend(newPoint);

            gMap.fitBounds(bounds);
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-11T07:31:36.240

我将为这个问题提供一个更通用的解决方案。如果我们有一个位置 eg `marker.getPosition()`，我们可以使用这个函数找到另一个`(x, y)`远离它的位置像素。

```
function extendedLocation(position, x, y) {
    var projection = map.getProjection();
    var newMarkerX = projection.fromLatLngToPoint(position).x + x/(Math.pow(2, map.getZoom()))
    var newMarkerY = projection.fromLatLngToPoint(position).y + y/(Math.pow(2, map.getZoom()))
    var newMarkerPoint = new google.maps.Point(newMarkerX, newMarkerY);
    return projection.fromPointToLatLng(newMarkerPoint)
} 
```

注意：x 为正，y 为右，y 为下。所以，在一般情况下，要看到标记，我们需要传递 y 的负值，例如`extendedLocation(marker.getPosition(), 4, -18)`

如果您在假设 30 px 高度的顶部有一个持久滑块或任何此类元素，只需`y`在函数中使用参数 as `-30`。

可以创建一个更通用的函数，它返回 4 个点的数组，每个`(x, y)`像素远离给定的向上、向下、向右和向左方向。

```
function getAllExtendedPosition(position, x, y){
   var positionArray = [];
   postitionArray.push(extendedLocation(position, x, y);
   postitionArray.push(extendedLocation(position, -x, -y);
   postitionArray.push(extendedLocation(position, -x, y);
   postitionArray.push(extendedLocation(position, x, -y);
   return positionArray
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-25T20:16:32.703

我做的方式看起来很干净。例如，在地图的每一侧使用像素坐标基础应用 10% 的填充。这是 Maps API v3.44：

```
map.fitBounds(bounds)
let mapDiv = map.getDiv()

let padding = {
  bottom: mapDiv.offsetHeight * 0.1,
  left: mapDiv.offsetWidth * 0.1,
  right: mapDiv.offsetWidth * 0.1,
  top: mapDiv.offsetHeight * 0.1,
}
map.fitBounds(bounds, padding); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-09-22T17:03:43.083

另一种方法是使用一个额外的 LatLong 点来扩展您的边界，并计算距离。google.maps.LatLngBounds() 对象具有获取边界框的西南和东北点的功能，可用于计算北、南、东或西 X 英里的距离。

例如，如果您尝试将标记向右推以考虑地图左侧的叠加元素，您可以尝试以下操作：

```
// create your LatLngBounds object, like you're already probably doing
var bounds = new google.maps.LatLngBounds();

// for each marker call bounds.extend(pos) to extend the base boundaries

// once your loop is complete
// *** add a calculated LatLng point to the west of your boundary ***
bounds.extend(new google.maps.LatLng(bounds.getSouthWest().lat(), bounds.getSouthWest().lng() - .9));

// finally, center your map on the modified boundaries
map.fitBounds(bounds); 
```

在上面的示例中，通过从最西点的经度中减去 0.9 将 LatLong 点添加到边界会使边界向西移动约 52 英里。

一个整点 (pos.lng() - 1.0) 大约为 58 英里，因此在确定需要哪种填充时，您可以猜测一个合适的距离或使用其他方法来计算纵向偏移量。**

# objective-c - 文本标签中的 Html 字符

> ID：10339366
> 
> 赞同：0
> 
> 时间：2012-04-26T18:35:04.267
> 
> 标签：objective-c, xcode, uitableview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:46:59.697

当我从 Web 服务器获取字符串并且如果它们注定要用于任何用户界面时，我通常会通过这个“ `NSString`”方法来除虱（错误，去百分比转义它们）：

[`stringByReplacingPercentEscapesUsingEncoding`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByReplacingPercentEscapesUsingEncoding:)（为您链接的文档）。

这摆脱了 URL 编码的字符串片段。

现在，对于像“ `&#8220`”这样的 HTML 字符，需要一个额外的 NSString 类别来做一些工作。

[其他人已经为您编写了此类别。看看这里的各种答案](https://stackoverflow.com/questions/1105169/html-character-decoding-in-objective-c-cocoa-touch)，其中一个应该很好用。

# php - PHP mysql_real_escape_string 返回空字符串

> ID：10339373
> 
> 赞同：11
> 
> 时间：2012-04-26T18:35:30.977
> 
> 标签：php, mysql, database, mysql-real-escape-string

我正在尝试在我的数据库应用程序（对于一个类）中进行一些安全性和清理工作。首先，我正在尝试使用 mysql_real_escape_string，但每当我使用它时，它总是返回一个空字符串！

这是连接代码：

```
include_once ("./connect.php");
$db_connection = new mysqli($SERVER, $USERNAME, $PASSWORD, $DATABASE);
if (mysqli_connect_errno()) {
    echo("Can't connect to MySQL Server. Error code: " . mysqli_connect_error());
    return null;
}
$field = mysql_real_escape_string($_GET['value']);
$upc = $_GET['upc'];
$type = $_GET['field_type'];
echo $field;
echo $upc;
echo $type; 
```

当 php 实际执行时，会打印 $upc 和 $type，但 $field 没有任何内容。我试过使用中间字符串，但我得到了相同的结果。我对这里出了什么问题感到非常茫然。

另外，我在 var_dump 上做了一个`$field`，它声称`mysql_real_escape_string`返回`FALSE`，这应该在没有连接时发生（？），但有一个。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T20:17:53.527

您正在使用 mysqli 连接，而不是 mysql，所以您需要[`mysqli_real_escape_string`](http://php.net/manual/en/mysqli.real-escape-string.php)

虽然您可以轻松地在 mysqli 中使用准备好的语句，但您也不需要...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T19:49:40.343

请参阅 PHP 文档[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

> MySQL 连接。如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。如果未找到或建立连接，则会生成 E_WARNING 级别错误。

这意味着您需要一个活动连接才能使用此功能

如果您没有看到任何错误，请尝试

```
error_reporting(E_ALL);
ini_set('display_errors','On'); 
```

`mysql_real_escape_string`选择

采用

```
 $escaped = htmlspecialchars($_GET['value'], ENT_QUOTES, "ISO-8859-1"); 
```

或者

```
 $escaped = filter_var($_GET['value'], FILTER_SANITIZE_STRING); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-05T20:53:10.117

你得到任何空字符串，因为该函数有两个参数；到数据库的实际连接，然后是字符串。用这个：

```
$sanitizedField = mysqli_real_escape_string($connection, $field); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-08T20:20:34.750

“此扩展自 PHP 5.5.0 起已弃用，将来将被删除。应使用 MySQLi 或 PDO_MySQL 扩展。” 来自[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

简单地将“i”添加到函数名称不是解决方案。请注意，链接标识符参数不再是可选的[http://www.php.net/manual/en/mysqli.real-escape-string.php](http://www.php.net/manual/en/mysqli.real-escape-string.php)

PS：至于否决票，我支持我的回答。问题中的函数将从 PHP 中删除，这很重要，我觉得需要指出它，因为没有其他人提到它。你不同意吗？原始问题的细节很重要，但是很多人（包括我自己）来这里寻找有关 mysql_real_escape_string() 的信息，而在寻找有关 mysql_real_escape_string() 的信息时，您应该意识到的第一件事是它已被弃用。系统管理员迟早必须升级 PHP，毫无疑问，大量应用程序仍在使用这个已弃用的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T06:37:04.597

我们也面临同样的问题。mysql_real_escape_string 在我们的开发 Linux 系统上工作，但不在测试台上工作。我们想知道为什么它可以在我们的系统上运行，而不是在测试平台上运行，即使所有的 php rpm 都是相同的版本。参考 PHP 文档后，发现在调用 mysql_real_escape_string 之前必须有与 MySQL 的活动连接。如果没有活动连接，则 PHP 在内部尝试使用默认参数连接到 MySQL。当 PHP 在内部尝试连接到我们开发机器上的数据库时，它可以工作，但在我们的测试台上失败，并导致对 mysql_real_escape_string 的调用响应为空。在 mysql_real_escape_string() 之前添加对 mysql_connect() 的调用后，我们的问题得到了解决。

下面是我们运行 mysql 命令时的错误，在我们的开发机器上没有看到这个错误，并且命令成功连接到数据库服务器。错误 1045 (28000): 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

结论是我们必须在调用mysql_real_escape_string之前显式连接mysql。php 连接到数据库的内部尝试可以在某些系统上工作，而在某些其他系统上失败，具体取决于安全级别或登录凭据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-27T08:22:38.033

@jeroen 似乎可以解释。虽然它应该在不连接到本地服务器上的数据库的情况下工作（很多事情都是这样工作的）但它不会在 Web 服务器上，除非你在 mysql_rea 之前连接到数据库.....我只是尝试过它并且它工作。这就是为什么他赢得了我的选票

# php - Doctrine ODM MongoDB - 使用约束复制简单的一对多引用

> ID：10339375
> 
> 赞同：5
> 
> 时间：2012-04-26T18:35:39.230
> 
> 标签：php, zend-framework, doctrine, doctrine-orm, doctrine-odm

我是 Doctrine、mongo 和 ODM 设置的新手，在 ZF1 中使用此设置时，我试图复制一个带有约束的简单一对多引用。这是情况，想就如何实现这一点提出一些建议。

这是一个简单的用户->角色映射，因此在 sql 情况下，我将有如下表：

```
用户
 - ID
 - 姓名
 - role_id

角色
 - ID
 - 姓名

```

然后将在用户 role_id 上设置外键约束以映射到角色 id。并且在删除角色后，将触发外键约束来停止操作。

我怎样才能在 Doctrines MongoDB ODM 中实现相同的目标？

到目前为止，我已经在 User 实体上使用了不同类型的注释，包括具有不同级联选项的 @ReferenceOne @ReferenceMany ...

现在留给我的选择是在“角色”实体上实现@PreUpdate、@PreRemove 生命周期事件，然后检查是否没有用户正在使用该角色，如果他们在更新时将引用更改为匹配或在删除时抛出异常.

我在这里还是迷路了？

谢谢，

硅

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T22:56:23.020

对于这样的事情，我不会像在 SQL 中那样有两个单独的“表”。您只需将角色类型作为用户的属性。然后，如果您想删除一个角色类型，您可以操纵具有该角色的所有用户的角色字段。

但要回答你的问题，我会这样做。

```
<?php
class User {
    /** @MongoDB\Id */
    protected $id;
    /** @MongoDB\String */
    protected $name;
    /** @MongoDB\ReferenceOne(targetDocument="Role", mappedBy="user") */
    protected $role;

    //Getters/Setters
}

class Role {
    /** @MongoDB\Id */
    protected $id;
    /** @MongoDB\String */
    protected $name;
    /** @MongoDB\ReferenceMany(targetDocument="User", inversedBy="role") */
    protected $users;

    public function _construct() {
        $this->users = new Doctrine\Common\Collections\ArrayCollection;
    }
    // Getters/Setters

    public function hasUsers() {
        return !$this->users->isEmpty();
    }
} 
```

然后我会创建一个服务类来使用我的文档管理器。

```
class RoleService {
    public function deleteRole(Role $role) {
        if (!$role->hasUsers()) {
            // Setup the documentManager either in a base class or the init method. Or if your über fancy and have php 5.4, a trait.
            $this->documentManager->remove($role);
            // I wouldn't always do this in the service classes as you can't chain
            // calls without a performance hit.
            $this->documentManager->flush();
        }
    }
} 
```

# sql - 是否可以将选择字段分配给 PostgreSQL 中的变量？

> ID：10339380
> 
> 赞同：0
> 
> 时间：2012-04-26T18:36:14.977
> 
> 标签：sql, postgresql, select, variable-assignment

我必须从选择中获取一个值并创建一个要在插入中使用的变量，在 PostgreSQL 中可以吗？我无法创建函数，因为我的主机不允许这样做。

这是表创建模式：

```
CREATE SEQUENCE identificador_produto START 1;

CREATE TABLE product (
    id integer DEFAULT nextval('identificador_produto') primary key,
    description varchar(60) not null
);

CREATE TABLE material (
    product_id integer DEFAULT nextval('identificador_produto') primary key,
    description varchar(60) not null
); 
```

举例说明我需要什么：

```
begin;

    select currval('identificador_produto') as id;

    insert into material (product_id, description) values (id, 'Gold');
    insert into material (product_id, description) values (id, 'Silver');
    insert into material (product_id, description) values (id, 'Wood');
    insert into material (product_id, description) values (id, 'Steel');
    insert into material (product_id, description) values (id, 'Water');
    insert into material (product_id, description) values (id, 'Paper');

commit; 
```

我必须将“id”值分配给一个变量，他们使用它在同一个事务中进行一些插入，但是插入共享相同的“产品”序列，因此我不能使用 curval() 函数，否则每个插入将获得不同的 id。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:30:24.783

首先我认为你的理解`currval`是错误的。`currval` 将返回从您的序列中获取的最后*生成的 id。*

以下将插入具有相同 id 的所有行：

```
insert into material (product_id, description) 
values (nextval('identificador_produto'), 'Gold');

insert into material 
(product_id, description) 
values 
(currval('identificador_produto'), 'Silver');

insert into material 
(product_id, description) 
values 
(currval('identificador_produto'), 'Wood');

insert into material 
(product_id, description) 
values 
(currval('identificador_produto'), 'Steel');

insert into material 
(product_id, description) 
values 
(currval('identificador_produto'), 'Water');

insert into material 
(product_id, description) 
values 
(currval('identificador_produto'), 'Paper'); 
```

第一个生成一个**新**ID，随后`INSERT`的 s 重新使用**相同的 id**。这是交易安全的，即使有数千个连接这样做也能正常工作（这就是序列的美妙之处）

但我认为你的桌子设计是错误的。您定义表的方式，您可以将描述列移动到产品表。

我的猜测是你实际上想要这样的东西：

```
CREATE SEQUENCE identificador_produto START 1;

CREATE TABLE product (
    id integer DEFAULT nextval('identificador_produto') primary key,
    description varchar(60) not null
);

CREATE TABLE material (
    material_id serial primary key,
    product_id integer not null 
       references product(id),
    description varchar(60) not null
); 
```

这意味着您在材料中有一行或多行引用特定产品。然后插入模式看起来像这样：

```
insert into product
(description) 
values 
('foobar');

insert into material 
(product_id, description)
values
(currval('identificador_produto'), 'silver');

insert into material 
(product_id, description)
values
(currval('identificador_produto'), 'gold'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:25:35.457

你不需要一个变量：

```
insert into material (product_id, description) values (
    (select id from product where condition = 100)
    , 'Gold'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T19:46:04.083

如果您希望在同一个事务中使用相同的 id 值进行两次插入，这可能是一个不错的选择：

```
WITH x(descr) AS (VALUES ('Gold'), ('Silver'))
INSERT INTO material (product_id, description)
  SELECT id, descr
    FROM x,
        (SELECT id FROM product WHERE condition = 100) y; 
```

如果您真的需要带有变量的命令式代码，另一种可能性是 DO 构造：

[http://www.postgresql.org/docs/current/interactive/sql-do.html](http://www.postgresql.org/docs/current/interactive/sql-do.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T18:37:50.357

是的，首先在声明部分声明一个变量。

然后说“从条件 = 100 的产品中选择 id 到变量中；” 并继续

```
 declare
    myvar int;
    begin
    select id into myvar from product where condition = 100;

    ...
    end; 
```

# php - Simple PHP Form Redirect

> ID：10339390
> 
> 赞同：0
> 
> 时间：2012-04-26T18:36:41.263
> 
> 标签：php, forms, post, redirect

I do a few websites for clients using either Indexhibit or Wordpress. I keep getting the same 'where do I login?' email from them so want to create a simple forward form on my site where a client can enter there URL, select either Wordpress/Indexhibit and click go and be forwarded on to there site.

I have constructed the following after some googling:

```
<?php if($_SERVER['REQUEST_METHOD'] == 'POST') : $siteid1 = $_POST['siteid1'];             header('Location: http://' . $siteid1 . '/ndxz-studio/'); else:?>
<form action="<?php echo $_SERVER['../PHP_SELF']; ?>" method="post">
<h3>Indexhibit</h3>
<p class='formp'>If your website is powered by <em>Indexhibit</em> submit your URL to be forwarded to your admin area</p>
<input  input class='loginforms' type="text"  value='i.e. your-domain-name.com' onclick="this.value='';" onfocus="this.select()" onblur="this.value=!this.value?'i.e. your-domain-name.com':this.value;"   name="siteid1" />
<input class="btn btn-success loginbuttons" type="submit" value="Go" />
</form>
<?php endif; ?> 
```

And then the same again directly beneath it for Wordpress.

However because I am using

```
<?php if($_SERVER['REQUEST_METHOD'] == 'POST') : $siteid1 = $_POST['siteid1'];             header('Location: http://' . $siteid1 . '/ndxz-studio/'); else:?> 
```

It only seems to take accept one form on the site. (so either indexhibit fails to go to /ndxz-studio or wp fails to go to wp-admin)

PHP is not my forte so apologies I have committed any stupid mistakes

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:43:05.157

正因为如此：

```
<?php if($_SERVER['REQUEST_METHOD'] == 'POST') : $siteid1 = $_POST['siteid1']; 
```

这在你的形式中总是正确的。所以，PHP 执行它。PHP 永远不会到达第二`if`条语句，因此它永远不会执行。

尝试一个`if else`语句并确保您的表单名称是唯一的

编辑：

这是一些示例代码，可帮助您入门。

```
if($_POST['siteid1']) {
    $siteid1 = $_POST['siteid1']; 
    // execute code here
} elseif($_POST['siteid2']) {
    $siteid1 = $_POST['siteid1'];
    // Execute code here
} 
```

# php - why is it appending numbers 0 and 1 everytime

> ID：10339391
> 
> 赞同：1
> 
> 时间：2012-04-26T18:36:44.953
> 
> 标签：php, javascript, json

I am trying to append a the variable imagename but instead of displaying a file name, it is appending numbers '0' then break then '1'. I want to know why is it appending these numbers and not the file names? The imagename variable loops through the imageNameArray variable which contains a $_SESSION variable which retrieves the name of the files which have been uploaded and that $_SESSION variable is retrieved from the php script where the files are uploaded.

Below is the javascript code where the appending occurs:

```
 function stopImageUpload(success){

var imageNameArray = <?php echo json_encode(isset($_SESSION ['fileImage']) ? $_SESSION ['fileImage'] : null); ?>;
 var result = '';

if (success == 1){
result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
for (imagename in imageNameArray)
            {
$('.listImage').append(imageNameArray[imagename]+ '<br/>');

             }

              }
 else {
 result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
              }

 return true;   
 } 
```

Below is the php script where it uploads a file and where the $_SESSION variable retrieve its file name:

```
 <?php

    session_start();

    $result = 0;
    $errors = array ();
    $dirImage = "ImageFiles/";

if (isset ( $_FILES ['fileImage'] ) && $_FILES ["fileImage"] ["error"] == UPLOAD_ERR_OK) {

$fileName = $_FILES ['fileImage'] ['name'];

$fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
$fileExt = strtolower ( $fileExt );

$fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;

        if (count ( $errors ) == 0) {
            if (move_uploaded_file ( $fileTemp, $fileDst )) {
                $result = 1;

            }
        }

    }

$_SESSION ['fileImage'][] = $_FILES ['fileImage']['name'];

    ?>

<script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result;?>);</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:43:00.557

因为您在`for in`数组上使用循环，所以`imageName`将等于数组的索引，而不是它的值。很像`for (i in window)`，我将在其中列出窗口对象的所有方法和属性。

由于这是一个数组，我强烈建议您使用一种`for(i=0;i<arr.length;i++)`循环，因为它更安全……在这两种情况下，您都需要替换

```
$('.listImage').append(imagename + '<br/>'); 
```

和

```
$('.listImage').append(imageNameArray[imagename]+ '<br/>'); 
```

**编辑**

该`for`循环可能对您不起作用，因为我遗漏了一点，因为我认为它很明显。不幸的是，显而易见的事情很容易被忽视......正如格雷格向我指出的那样（谢谢 m8）：

```
$('.listImage').append(imageNameArray[i]+ '<br/>'); 
```

如果您使用 for(i...) 样式循环。为了清楚起见，我将添加完整的循环：

```
for(var i=0;i<imageNameArray.length;i++)
{
    $('.listImage').append(imageNameArray[i]+ '<br/>');
} 
```

为了帮助您进一步找出仅显示一个 img 名称可能导致问题的原因，请在循环开始之前添加此问题：`console.log(imageArrayName);`并查看您的控制台。数组是否包含超过 1 个元素？它说什么？当您使用它时，也请尝试添加此行：`console.log((imageArray instanceof Array ? 'for' : 'for-in'));`. 在您发布的 JavaScript 函数中的任何位置添加此行，但在循环之外，以避免使您的控制台过于混乱......

让我知道你发现了什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:41:14.990

因为`for (var in array)`迭代数组的索引。你应该做

```
$('.listImage').append(imageNameArray[imagename] + '<br/>'); 
```

# symfony1 - symfony: actAs: { 时间戳: ~ }

> ID：10339398
> 
> 赞同：5
> 
> 时间：2012-04-26T18:37:46.157
> 
> 标签：symfony1, doctrine, symfony-1.4, behavior, doctrine-1.2

我有两个小问题：

```
actAs: { Timestampable: ~ } 
```

上面代码中的“~”是什么意思？

然后，我看到`actAs: { Timestampable: ~ }`具有两个字段（created_at 和 updated_at）的表。

是否可以将 updated_at 字段绑定到特定字段（我更新此字段，然后 updated_at 获取新值）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T19:14:26.967

“~”表示您将使用默认值或默认配置。在您的情况下，行为[Timestampable](http://readthedocs.org/docs/doctrine/en/latest/en/manual/behaviors.html#timestampable)将使用默认值和配置。所以你不必重新定义它们。

从文档中，这里有一些配置：

```
Timestampable:
  created:
    name: created_at
    type: timestamp
    format: Y-m-d H:i:s
  updated:
    disabled: true 
```

您还会在默认的`generator.yml`. 这样，即使是空的，生成器也会生成一个不错的管理员：

```
config:
  actions: ~
  fields:  ~
  list:    ~
  filter:  ~
  form:    ~
  edit:    ~
  new:     ~ 
```

对于您的第二个问题，目标`Timestampable`是对于一行中的每个修改，该字段`updated_at`将设置为当前日期。所以你不需要照顾它。

**编辑：**

如果您想手动更新该`updated_at`字段：

*   首先：您必须禁用该字段的时间戳行为（参见上面的示例
*   第二：你必须自己做这些行为。

最简单的方法是扩展`preSave`模型的功能并在这里完成工作。像：

```
class Article extends BaseArticle
{
  public function preSave($event)
  {
    if(array_key_exists("your_field", $this->getModified())
    {
      $this->setUpdatedAt(time());
    }
  } 
```

# c# - Pass 2 dimensional array double[][] to a c# windows application

> ID：10339401
> 
> 赞同：0
> 
> 时间：2012-04-26T18:37:53.123
> 
> 标签：c#, c++, dll, double

I am trying to use a dll in a c# windows application. this dll is expecting one double[][] parameter( more than 10000 values) and another double[] parameter.

```
public static double[] CalcResults(double[][] Positions, double[] Values) 
```

I am not quite sure how to declare this variable in the c# class. Appreciate your help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:39:47.593

```
double[][] positions = new double[size1][]; 
```

**编辑**：更好的是，试试这个：

```
double[,] positions = new double[size1, size2]; 
```

[http://msdn.microsoft.com/en-us/library/2yd9wwz4(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/2yd9wwz4(v=vs.100).aspx)

**Edit2** : [Doing Arrays - C#](http://www.codeproject.com/Articles/161465/Doing-Arrays-C)显示了锯齿状数组 ([][]) 和常规二维数组 ([,]) 之间的区别。

# objective-c - 继承和类别有什么区别

> ID：10339407
> 
> 赞同：3
> 
> 时间：2012-04-26T18:38:30.560
> 
> 标签：objective-c

Objective-C中的继承和类别有什么区别

两者都用于子类！那么它们之间有什么区别

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T18:44:46.170

虽然 Category 是向基类添加功能的好方法，但像我这样来自其他面向对象技术（如 Flash）的人会发现有点难以理解这件事与继承链的关系。我想到了同样的问题，我对该主题进行了快速研究。

最后一件事是 Category 所做的事情与它讲述自己的事情相同。它将功能添加到基类。如果你记住了这一点，那么就不会有任何混乱。

好吧，为了理解这一点，让我们举个例子。假设有一个 A 类，而 B 类是 A 类的子类。在应用程序中，B 类被用在很多地方。现在，需要向 A 类添加更多功能，因此将新类别写为“A+newRole”。一旦编写了这个类别，新的功能就会被添加到基类中，在这种情况下是 A 类。这意味着，所有属于 A 类的子类的类，例如 B 类，都会自动获得该功能。太酷了 可以直接从子类调用类别中添加的新方法。这里唯一需要做的就是将 Category 文件导入到适当的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T18:41:17.453

类别在根本不生成新类的情况下向类添加了额外的功能，您只需扩展它，但它没有隐含的多态性或任何类似的东西。

另一方面，继承会自行生成一个新类，您可以在其中添加新的实例变量并通过多态性覆盖父类的行为。

# visual-studio-2010 - Visual Studio 2010 C++ 发布模式问题

> ID：10339409
> 
> 赞同：0
> 
> 时间：2012-04-26T18:38:36.733
> 
> 标签：visual-studio-2010, compiler-errors

我正在尝试在 Visual Studio 2010 中编译我的 c++ 项目，该项目在过去几个月中一直在调试模式下运行良好。我已经完成了它的开发，所以我想创建一个 exe 来发布。

问题是当我将它切换到我不确定如何调试的发布模式时，我收到一堆编译器错误。

任何帮助，将不胜感激：

```
1>main.obj : error LNK2005: "int __cdecl initKinect(void)" (?initKinect@@YAHXZ) already defined in gui.obj
1>main.obj : error LNK2005: _main already defined in gui.obj
1>Kinect.lib(Kinect-win32.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '2' doesn't match value '0' in algorithm.obj
1>Kinect.lib(Kinect-win32.obj) : warning LNK4075: ignoring '/EDITANDCONTINUE' due to '/OPT:ICF' specification
1>Kinect.lib(Kinect-Driver.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '2' doesn't match value '0' in algorithm.obj
1>Kinect.lib(Kinect-FrameInput.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '2' doesn't match value '0' in algorithm.obj
1>libcpmtd.lib(stdthrow.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '2' doesn't match value '0' in algorithm.obj
1>LIBCMTD.lib(dbgheap.obj) : error LNK2005: __heap_alloc already defined in LIBCMT.lib(malloc.obj)
1>LIBCMTD.lib(dbgheap.obj) : error LNK2005: __recalloc already defined in LIBCMT.lib(recalloc.obj)
1>LIBCMTD.lib(dbgheap.obj) : error LNK2005: __msize already defined in LIBCMT.lib(msize.obj)
1>LIBCMTD.lib(dbghook.obj) : error LNK2005: __crt_debugger_hook already defined in LIBCMT.lib(dbghook.obj)
1>LIBCMTD.lib(isctype.obj) : error LNK2005: __isctype_l already defined in LIBCMT.lib(isctype.obj)
1>LIBCMTD.lib(isctype.obj) : error LNK2005: __isctype already defined in LIBCMT.lib(isctype.obj)
1>LINK : warning LNK4098: defaultlib 'LIBCMTD' conflicts with use of other libs; use /NODEFAULTLIB:library
1>C:\Users\Tom\Documents\Kinect\repository\KinectTracker\Release\KinectTracker.exe : fatal error LNK1169: one or more multiply defined symbols found
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:48:16.683

在我看来，这就像您正在链接两组库（除了可能的其他问题）。Libcmtd 是 libc 的多线程调试版本，而 libcmt 是同一事物的发布版本。

# php - Stripslashes 不适用于我在 PHP 中的魔术引号

> ID：10339413
> 
> 赞同：-1
> 
> 时间：2012-04-26T18:39:01.470
> 
> 标签：php, magic-quotes, stripslashes

我已经开始使用魔术引号，但遇到了一个小问题，我想这是一个我想不通的简单问题。

我不想使用当我在我的文本区域中写东西时它不会删除的条纹

代码：

```
<?php
echo "Removed Slashes: ";
// Remove those slashes
if(get_magic_quotes_gpc())
    echo stripslashes($_POST['question']);
else
    echo $_POST['question'];

?>

<form method='post'>
Question: <input type='text' name='question'/><br />
<input type='submit'>

</form> 
```

我也试过这个真的有效！：

```
<?php
$str = "Is your name O\'reilly?";

// Outputs: Is your name O'reilly?
echo stripslashes($str);
?> 
```

但现在出于安全原因，我想将我的输入用于网站

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:46:51.210

我不能说它比 cHao 在[手册页上的评论更好](http://us.php.net/manual/en/security.magicquotes.php#102907)

> 不推荐使用魔术引号的原因是，一种千篇一律的转义/引用方法是错误的，而且非常危险。不同类型的内容具有不同的特殊字符和不同的转义方式，并且在一个内容中起作用的内容往往会在其他地方产生副作用。任何示例代码，在这里或其他任何地方，假装像魔术引号一样工作——或者对 HTML、SQL 或其他任何东西进行类似的转换——同样是错误的，同样是危险的。
> 
> 魔术引号不是为了安全。他们从来没有。这是一件很方便的事情——它们的存在使得 PHP 新手可以摸索并最终编写一些有点工作的 mysql 查询，而无需了解如何正确转义/引用数据。他们防止一些意外的语法错误，就像他们的工作一样。但它们不会阻止恶意和半知识的攻击者破坏 PHP noob 的数据库。而那个可怜的菜鸟甚至可能永远不知道他的数据库现在是如何消失或为什么消失了，因为魔术引号（或他那漂亮的“我要逃避一切”功能）给了他一种虚假的安全感。他不必学习如何真正处理不受信任的输入。
> 
> 数据应该在您需要转义的地方以及将要使用的域中转义。（mysql_real_escape_string -- 不是添加斜杠！ -- 用于 MySQL（除非你有线索并使用准备好的语句），用于 HTML 的 htmlentities 或 htmlspecialchars 等）其他任何事情都注定要失败。

真的，接受建议。不要使用它们，通过尝试它们不会学到任何有用的东西，只是忘记它们曾经存在过。

看看这篇文章[http://www.sitepoint.com/magic-quotes-headaches](http://www.sitepoint.com/magic-quotes-headaches)和这篇文章[http://econsultancy.com/us/blog/2663-web-app-security-basics-filtering-input- and-escaping-output](http://econsultancy.com/us/blog/2663-web-app-security-basics-filtering-input-and-escaping-output)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T23:44:15.417

好吧，它很容易攻击，但似乎需要更多的帮助。所以这是我试图提供帮助的尝试。

因此，您正在将数据发回服务器，并且您希望确保用户发回的任何内容都不会最终出现在它可以进行恶意操作的地方。

您采用的天真的策略是说好的，我将通过打开魔术引用来一般地清理数据，这应该可以避免所有的讨厌......

然而，事实并非如此。您的工作是确保在处理不受信任的数据时使用自定义的清理策略，这完全取决于您如何使用它。可以在[OWASP](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#RULE_.235_-_URL_Escape_Before_Inserting_Untrusted_Data_into_HTML_URL_Parameter_Values)上找到一个很好的资源，用于了解应该允许不受信任的数据**在哪里**进入特定位置，以及**如何逃避不受信任的数据**

您会注意到并非所有位置都适合不受信任的数据、转义或其他情况。这突出了一个事实，即要真正实施安全网站，您必须考虑不受信任的数据的去向以及**数据****如何**到达那里。

这个问题更直接地集中在**how**上，因为我们正在考虑（并攻击使用）一个通用的转义机制。您的意思是打开魔术引号是一种合适的方法来转义注定要发送到您的不受信任数据可能最终到达的所有位置的数据。

最佳实践表明，实际上，您需要使用适合您打算使用它的位置的转义机制。正如已经指出的，[mysql_real_escape_string](http://uk.php.net/manual/en/function.mysql-real-escape-string.php)的使用是一个流行的函数，它专门用于在 MySQL 查询中转义字符串。人们确实使用这种机制，但是使用这种机制手动转义数据的需要被正确使用[PHP 数据对象 (PDO)](http://php.net/manual/en/book.pdo.php)所取代。（将不受信任的数据绑定到参数，而不是手动构建查询字符串）。

[其他明显的转义机制包括使用htmlspecialchars](http://uk.php.net/manual/en/function.htmlspecialchars.php)或[htmlentities](http://uk.php.net/manual/en/function.htmlentities.php)对 html 字符进行编码，以及更通用的引号转义机制[addlashes](http://uk.php.net/manual/en/function.addslashes.php)和[addcslashes](http://uk.php.net/manual/en/function.addcslashes.php)。[甚至还有命令行参数escapeshellarg](http://www.php.net/manual/en/function.escapeshellarg.php)和[escapeshellcmd](http://www.php.net/manual/en/function.escapeshellcmd.php)的转义方法

因此，您可以看到正确转义数据远没有将魔术引号应用于所有传入数据那么简单，并且通常有完善的机制可以根据您打算使用它的位置安全地转义数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T19:20:29.203

解决您的问题的简单方法是创建一个简单的函数，如果它要触及您的数据库，您可以通过它推送所有数据。可以这样建模：

```
function sanitizeString($var)
{

    $var = strip_tags($var);
    $var = htmlentities($var);
    $var = stripslashes($var);

    return mysql_real_escape_string($var);

}//end sanitizeString 
```

# sorting - 排序算法lisp-scheme

> ID：10339416
> 
> 赞同：4
> 
> 时间：2012-04-26T18:39:20.217
> 
> 标签：sorting, lisp, scheme

我决定学习一些函数式语言，毕竟我迷上了 lisp-scheme。

我正在尝试创建一个函数来检查列表是否已排序，最低的第一个变得更高，反之亦然，如果它可以排序，它应该返回 true，否则返回 false。

这是我的第一个代码，仅在列表增加（或相等）时才有效。

```
 (define sorted?
     (lambda (lst)
      (cond ((empty? lst) #t)
            (else (and (<= (car lst) (cadr lst))
                  (sorted? (cdr lst))))))) 
```

澄清：像 (sorted? '(1 2 3 4 5)) 和 (sorted? '(5 4 3 2 1)) 这样的东西应该返回 true，否则当然返回 false。

在以函数式编程时我应该如何思考？语法似乎直截了当，但我不习惯这种逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:05:45.973

你几乎是对的，看：

```
(define sorted?
  (lambda (lst)
    (cond ((or (empty? lst) (empty? (cdr lst)))
           #t)
          (else (and (<= (car lst) (cadr lst))
                     (sorted? (cdr lst))))))) 
```

在基本情况下稍作修改，一切就绪。当列表中只剩下一个元素时必须停止，否则`cadr`表达式会抛出错误。

对于您问题的第二部分：如果您想检查它是否使用不同的标准进行排序，只需将比较函数作为参数传递，如下所示：

```
(define sorted?
  (lambda (lst cmp)
    (cond ((or (empty? lst) (empty? (cdr lst)))
           #t)
          (else (and (cmp (car lst) (cadr lst))
                     (sorted? (cdr lst) cmp))))))

(sorted? '(1 2 3 4 5) <=)
> #t
(sorted? '(5 4 3 2 1) >=)
> #t 
```

*现在，*如果您想知道列表是按升序*还是*降序排序：

 *```
(define lst '(1 2 3 4 5))
(or (sorted? lst >=) (sorted? lst <=))
> #t 
```

如您所见，函数式编程是关于定义尽可能通用的过程并将它们组合起来以解决问题。您可以将函数作为参数传递这一事实有助于实现泛型函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T19:56:28.420

**具体实现**

我会接受[Óscar López 的回答](https://stackoverflow.com/a/10339764/63225)并更进一步：

```
(define sorted? (lambda (lst)
  (letrec ((sorted-cmp 
            (lambda (lst cmp)
              (cond ((or (empty? lst) (empty? (cdr lst)))
                     #t)
                    (else (and (cmp (car lst) (cadr lst))
                               (sorted-cmp (cdr lst) cmp)))))))
    (or (sorted-cmp lst <=) (sorted-cmp lst >=))))) 
```

这个版本和他的最大区别是`sorted?`现在将 Óscar 的版本定义为一个内部辅助函数，使用`letrec`和调用它两种方式。

**功能性思维**

实际上，您选择了一个很好的示例来说明 Scheme 如何看待世界的某些方面，并且您的实现有了一个非常好的开始。

解决此问题的一个重要功能原则是，您可以放置​​的任何内容都`(**here** more stuff '(1 2 3 4))`可以作为参数传递给另一个函数。也就是说，函数是函数式编程语言中的第一类。因此，您在比较中使用的事实`<=`意味着您可以将`<=`其作为参数传递给另一个相应地进行比较的函数。Óscar 的回答很好地说明了这一点。

这个问题的另一个体现另一种常见功能模式的方面是主要由`(cond)`块组成的功能。在许多函数式编程语言（Haskell、ML、OCaml、F#、Mathematica）中，您获得的模式匹配能力比在 Scheme 默认情况下获得的要强。因此，`(cond)`在 Scheme 中，您必须描述如何测试您所寻求的模式，但这通常相当简单（例如`(or (empty? lst) (empty? (cdr lst)))`在这个 implementation.

我认为在这个问题中得到很好体现的最后一种函数式编程模式是，许多函数式编程解决方案都是递归的。递归是我必须使用`letrec`而不是普通的 ol' 的原因`let`。

通过对第一个元素（或本例中的 2 个元素）进行操作，然后在列表的尾部 ( ) 上重复操作，您几乎可以做任何事情`cdr`。命令`for`式`while`循环在 Scheme 中并非不可能（尽管它们在诸如 Haskell 之类的纯函数式语言中几乎是不可能的），但在许多情况下它们在 Scheme 中有点不合适。但是，Scheme 的灵活性允许您作为开发人员做出决定，从而在某些情况下实现重要的性能或可维护性优化。

**继续探索**

我在这里回答的第一个实现是根据它在列表中看到的内容`sorted?`来决定要传递给哪个比较运算符。`sorted-cmp`当我发现一个列表可以以两个相等的数字开头时，我放弃了这一点`'(1 1 2 3 4 5)`。但当我想得更多时，肯定有一种方法可以跟踪你是否已经决定了一个方向，因此，只需要一个电话就可以了`sorted-cmp`。你可以考虑下一个探索。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T19:10:01.437

我将把你的问题理解为，更具体地说，“如果我已经使用 C 或 Java 等命令式语言进行编程，我该如何调整我的函数式编程思维？” 以你的问题为例，我将在周六早上用长篇回答这个问题。我将通过三个阶段来追踪函数式程序员的演变，每个阶段依次是更高的 zen - 1)**迭代**思考；**2）递归**思考；**3)懒惰地**思考。

## 第一部分——迭代思考

假设我正在用 C 编程，我不能或不会使用递归——也许编译器没有优化尾递归，递归解决方案会溢出堆栈。所以我开始思考我需要保持什么状态。我想象有一台小机器爬过输入。它会记住它是在搜索递增序列还是递减序列。如果它还没有决定，它会根据当前的输入来决定，如果可以的话。如果它发现输入指向错误的方向，它会以 zigzag=true 终止。如果它到达输入的末尾，它以 zigzag=false 终止。

```
int
zigzag(int *data, int n)
{
  enum {unknown, increasing, decreasing} direction = unknown;

  int i;
  for (i = 1; i < n; ++i)
    {
      if (data[i] > data[i - 1]) {
    if (direction == decreasing) return 1;
    direction = increasing;
      }
      if (data[i] < data[i - 1]) {
    if (direction == increasing) return 1;
    direction = decreasing;
      }
    }

  /* We've made it through the gauntlet, no zigzagging */
  return 0;
} 
```

这个程序是典型的 C 程序：它很高效，但很难证明它会做正确的事情。即使对于这个简单的示例，它也不能立即陷入无限循环，或者在某个地方出现错误的逻辑转向。当然，更复杂的程序会变得更糟。

## 第二部分 - 递归思考

我发现以函数式语言的精神编写可读程序的关键（而不是仅仅试图将命令式解决方案转变为该语言）是关注程序应该计算*什么*而不是它应该如何做*。*如果你能以足够的精度做到这一点——如果你能清楚地写出问题——那么在函数式编程的大部分时间里，你几乎就在解决方案中！

因此，让我们从更详细地写出要计算的内容开始。我们想知道一个列表是否曲折（即在某个点减少，在另一个点增加）。哪些列表符合此标准？好吧，如果出现以下情况，则列表曲折：

*   它的长度超过两个元素并且
*   它最初会增加，但随后会在某个点减少或
*   它最初会减少，但随后会在某个点增加或
*   它的尾巴曲折。

可以或多或少地直接将上述语句转换为 Scheme 函数：

```
(define (zigzag xs)
  (and (> (length xs) 2)
       (or (and (initially-increasing xs) (decreases xs))
           (and (initially-decreasing xs) (increases xs))
           (zigzag (cdr xs))))) 
```

现在我们需要`initially-increasing`、`initially-decreasing`、`decreases`和的定义`increases`。这些`initially-`功能很简单：

```
(define (initially-increasing xs)
  (> (cadr xs) (car xs)))

(define (initially-decreasing xs)
  (< (cadr xs) (car xs))) 
```

`decreases`和怎么样`increases`？好吧，如果序列的长度大于一个，并且第一个元素大于第二个元素，或者它的尾部减少，则序列会减少：

```
(define (decreases xs)
  (letrec ((passes
        (lambda (prev rest)
          (cond ((null? rest) #f)
            ((< (car rest) prev)
             #t)
            (else (passes (car rest) (cdr rest)))))))
    (passes (car xs) (cdr xs)))) 
```

我们可以编写一个类似的`increases`函数，但很明显只需要一个更改：`<`必须成为`>`. 复制这么多代码会让你感到不安。难道我不能要求语言让我成为一个类似的函数`decreases`，而是`>`在那个地方使用吗？在函数式语言中，你可以做到这一点，因为*函数可以返回其他函数*！所以我们可以编写一个函数来实现：“给定一个比较运算符，如果该比较对于它的参数的任何两个连续元素都为真，则返回一个返回真的函数。”

```
(define (ever op)
 (lambda (xs)
   (letrec ((passes
         (lambda (prev rest)
           (cond ((null? rest) #f)
             ((op (car rest) prev)
              #t)
             (else (passes (car rest) (cdr rest)))))))
     (passes (car xs) (cdr xs))))) 
```

`increases`并且`decreases`现在都可以非常简单地定义：

```
(define decreases (ever <))
(define increases (ever >)) 
```

没有更多要实现的功能 - 我们完成了。这个版本相对于 C 版本的优势是显而易见的——更容易推断这个程序会做正确的事情。这个程序的大部分内容都非常简单，所有的复杂性都被推到了`ever`函数中，这是一个非常通用的操作，在许多其他情况下都很有用。我确信通过搜索可以找到一个标准的（因此更值得信赖的）实现，而不是这个自定义的实现。

尽管有所改进，但该程序仍然不完美。有很多自定义递归，起初并不明显所有这些都是[尾递归](http://en.wikipedia.org/wiki/Tail_call)（尽管它是）。此外，该程序以多个条件分支和退出点的形式保留了 C 的微弱回声。**借助惰性求值**，我们可以获得更清晰的实现，为此我们将切换语言。

## 第三部分——懒惰的思考

让我们回到问题定义。它实际上可以比第二部分更简单地说明 - “如果序列包含在两个方向上的相邻元素之间的比较，则它是曲折的（即未排序的）”。我可以或多或少地直接将那句话翻译成 Haskell 的一行：

```
zigzag xs = LT `elem` comparisons && GT `elem` comparisons 
```

现在我需要一种方法来导出`comparisons`的每个成员`xs`与其后继者的比较列表。这并不难做到，也许最好用例子来解释。

```
> xs
[1,1,1,2,3,4,5,3,9,9]

> zip xs (tail xs)
[(1,1),(1,1),(1,2),(2,3),(3,4),(4,5),(5,3),(3,9),(9,9)]

> map (\(x,y) -> compare x y) $ zip xs (tail xs)
[EQ,EQ,LT,LT,LT,LT,GT,LT,EQ] 
```

这就是我们所需要的；这两行是完整的实现 -

```
zigzag xs = LT `elem` comparisons && GT `elem` comparisons
  where comparisons = map (\(x,y) -> compare x y) $ zip xs (tail xs) 
```

我会注意到这个程序只通过列表一次来测试增加和减少的情况。

至此，你可能已经想到了一个反对意见：这样的做法是不是很浪费？这不是要搜索整个输入列表，而它只需要到达第一个方向变化吗？实际上，不，它不会，因为**懒惰的评估**。在上面的示例中，它计算了整个比较列表，因为它必须打印出来。但是，如果它将结果传递给`zigzag`，它只会评估比较列表足够远以找到 的一个实例`GT`和一个`LT`，而不会进一步。为了说服自己相信这一点，请考虑以下情况：

```
> zigzag $ 2:[1..]
True
> zigzag 1:[9,8..]
True 
```

两种情况下的输入都是一个无限列表（[2,1,2,3,4,5..] 和 [1,9,8,7,6,5...]）。尝试将它们打印出来，它们将填满屏幕。但是将它们传递给`zigzag`，它会很快返回，只要它发现第一个方向变化。

阅读代码的许多困难来自于遵循控制流的多个分支。许多这些分支确实是在努力避免计算超出我们的需要。但是通过惰性评估可以实现很多相同的事情，使程序更短，更真实地解决原始问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:27:52.153

试试这个

```
(define sorted?
  (lambda (l)
     (cond ((null? l) #t)
           (else (check-asc? (car l) (sorted? (cdr l))
                 (check-desc? (car l) (sorted? (cdr l))))))

(define check-asc?
  (lambda (elt lst)
     (cond ((null? lst) #t)
           (else (or (< elt (car lst)) (= elt (car lst))) (check-asc? (car lst) (cdr lst))))))

(define check-desc?
  (lambda (elt lst)
     (cond ((null? lst) #t)
           (else (or (< elt (car lst)) (= elt (car lst))) (check-desc? (car lst) (cdr lst)))))) 
```

我自己是新手。我没有测试过这段代码。仍在为递归而苦苦挣扎。请告诉我它是否有效或它给出了什么错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T13:46:29.510

我之前给出的答案真的很糟糕。

我在 DrScheme 中运行了代码，它给出了错误。

不过我已经修改过了。这是一个有效的代码：

```
(define sorted?
 (lambda (l)
   (cond ((null? l) #t)
       (else (if (check-asc? (car l) (cdr l)) #t
             (check-desc? (car l) (cdr l)))))))

(define check-asc?
(lambda (elt lst)
  (cond ((null? lst) #t)
       (else (if (or (< elt (car lst)) (= elt (car lst))) (check-asc? (car lst) (cdr lst))
                 #f)))))

(define check-desc?
 (lambda (elt lst)
  (cond ((null? lst) #t)
       (else (if (or (> elt (car lst)) (= elt (car lst))) (check-desc? (car lst) (cdr lst))
                 #f))))) 
```

检查案例：

（排序？'（5 4 3 2 1））返回#t

（排序？'（1 2 3 4 5））返回#t

（排序？'（1 2 3 5 4））返回#f

（排序？'（））返回#t

（排序？'（1））返回#t*

# php - PHP卷曲上传

> ID：10339417
> 
> 赞同：0
> 
> 时间：2012-04-26T18:39:25.183
> 
> 标签：php, curl

curl 的第二页无法打开，因为我尝试获取大文件。当第一页中的过程完成时，第二页打开。如何在不使用 curl_multi_exec 的情况下解决这个问题。上传.php：

```
$curl = curl_init('http://example.com/upload.php');
$curlopt[CURLOPT_SSL_VERIFYHOST] = true;
$curlopt[CURLOPT_POST] = true;
$curlopt[CURLOPT_RETURNTRANSFER] = true;
$curlopt[CURLOPT_POSTFIELDS] = array('myfile'=>'@'.$u->file);
$curlopt[CURLOPT_INFILESIZE] = (string)filesize($u->file);
$curlopt[CURLOPT_INFILE] = fopen($u->file,'r');
curl_setopt_array($curl,$curlopt);
curl_exec($curl);
curl_close($curl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:17:44.037

这就是我的建议

A. 将大文件拆分成块：[https ://stackoverflow.com/a/10271542/1226894](https://stackoverflow.com/a/10271542/1226894)

B. 使用多卷曲：[https ://stackoverflow.com/a/10036599/1226894](https://stackoverflow.com/a/10036599/1226894)

之前已经回答过，不认为​​应该重复，但如果您有任何问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:44:54.447

您可以将 curl 的 CURLOPT_TIMEOUT 选项设置为更大的值，以免丢失第一个连接

您可以参考[此处](http://tr2.php.net/manual/en/function.curl-setopt.php)了解更多选项

# javascript - 如何按名称获取元素并设置其值

> ID：10339426
> 
> 赞同：8
> 
> 时间：2012-04-26T18:40:02.523
> 
> 标签：javascript, jquery

应该有一个简单的解决方案。我需要按名称获取输入元素并设置其值。

以下 Javascript 不起作用：

```
x = document.getElementsByName($('#questions').val());
x.value=this.value; 
```

有没有使用 JQuery 的简单解决方案？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T18:41:54.940

### 描述

您正在混合普通的 javascript 和 jQuery。使用属性选择器。

查看我的示例和这个[jsFiddle 演示](http://jsfiddle.net/HasfR/)

### 样本

**html**

```
<input type="text" name="nameOfTheInputElement"/> 
```

**jQuery**

```
$(function() {
    $("input[name='nameOfTheInputElement']").val("your value");
});
​ 
```

## 编辑

如果您出于某种原因想要更改名称是另一个元素中的值的元素，请执行此操作。[jsFiddle 演示](http://jsfiddle.net/HasfR/3/)

**html**

```
<input type="text" id="questions" value="nameOfTheInputElement"/>    
<input type="text" name="nameOfTheInputElement"/> 
```

​<strong>jQuery

```
$(function() {
    var name = $("#questions").val();
    $("input[name='"+name +"']").val("your value");
});​ 
```

### 更多信息

*   [jQuery - 属性等于选择器 [name="value"]](http://api.jquery.com/attribute-equals-selector/)
*   [jsFiddle 演示（第一个示例）](http://jsfiddle.net/HasfR/)
*   [jsFiddle 演示（第二个示例）](http://jsfiddle.net/HasfR/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T18:40:57.490

[getElementsByName()](https://developer.mozilla.org/en/DOM/document.getElementsByName)返回一个节点列表，因此您需要获取第一个`getElementsByName(...)[0]`

但是您已经在使用 jQuery，所以使用它。阅读一些关于[jQuery 选择器的教程](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T18:48:27.433

一个简单、纯 JavaScript（因此更快）的解决方案：

```
var x = document.getElementsByName(document.getElementById('questions').value)[0].value = this.value; 
```

我知道 jQuery 的标语是“少写，多做”，但在许多情况下确实如此…… `many cases !== always`;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T18:49:12.223

试试这个

```
var q = $("#question").val();
var x = $("input[name='" + q + "']").val(); 
```

在第 2 行，变量 q，输入中提供的名称，ID 为“问题”，将用 ' 括起来，并且可以包含任何支持的字符，如空格、:、- 等

如果你需要一个组件的值而不管它的标签，你可以这样做：

```
var x = $("[name='" + q + "']").val(); 
```

考虑到这种方法`$("[name='" + q + "']")`可以返回多个元素，但`.val()`只会返回第一个元素的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T18:42:29.903

如果我正确理解您的问题，您希望按名称获取元素，并且您选择的元素的名称将由某个下拉列表或文本区域指定。

这是我的看法：

**html**

```
<input type="text" id="enteredName">
<button id="doTheStuff">Do the work</button>

<input name="one" value="One">
<input name="two" value="Two"> 
```

**jQuery**

```
$('#doTheStuff').click(function(){
    var objectOfInterest = $('[name=\'' + $('#enteredName').val() + '\']');
    alert(objectOfInterest.val());
}); 
```

[工作示例](http://jsfiddle.net/Gwvxu/)

这是[另一个](http://jsfiddle.net/Gwvxu/1/)使用下拉菜单指定选择名称的工作示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-25T13:21:46.617

```
$('#form-id input[name="name-input"]').val('your value'); 
```

# django - 如何检查 django 模型上的先前值

> ID：10339441
> 
> 赞同：4
> 
> 时间：2012-04-26T18:41:03.583
> 
> 标签：django, django-models, django-1.4, validationerror

我有一个 django 模型，它的字段在更新后总是大于相同模型实例的前一个，如下所示：

```
class MyModel(models.Model):
    version = models.FloatField()
    prev_value = 0

    def clean(self):
        if self.version <= self.prev_value:
             raise ValidationError('error msg')

    def save(self,*args,**kwargs):
        super(MyModel, self).save(*args, **kwargs)
        self.prev_value = self.version 
```

我知道 clean 工作正常，因为我在同一个方法上进行了其他验证，并且工作正常，我做错了什么，我该如何解决？提前致谢。

我对其进行了测试，它没有在更新时抛出任何错误消息 verion < prev_value

编辑：我使用新的 django 1.4

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T18:52:33.453

模型子类实际上最终有一个元类重新格式化它们的所有类属性。因此，您不应该将普通值初始化为类属性。你应该在`__init__`

```
class MyModel(models.Model):
    version = models.FloatField()

    def __init__(self, *args, **kwargs):
        super(MyModel, self).__init__(*args, **kwargs)
        self._prev_value = self.version

    def clean(self):
        if self.version <= self._prev_value:
             raise ValidationError('error msg')

    def save(self,*args,**kwargs):
        super(MyModel, self).save(*args, **kwargs)
        self._prev_value = self.version 
```

# vb.net - VB.NET 对于每个

> ID：10339444
> 
> 赞同：-1
> 
> 时间：2012-04-26T18:41:09.190
> 
> 标签：vb.net, hash, foreach, md5

在终于解决了我的最后一个问题之后，我结束的代码是

```
Function MD5(ByVal strToHash As String) As String
    Dim md5Obj As New Security.Cryptography.MD5CryptoServiceProvider
    Dim bytesToHash() As Byte = System.Text.Encoding.ASCII.GetBytes(strToHash)

    bytesToHash = md5Obj.ComputeHash(bytesToHash)

    Dim strResult As String = ""

    For Each b As Byte In bytesToHash
        strResult += b.ToString("x2")
    Next

    Return strResult
End Function

Dim words As IEnumerable(Of String) = File.ReadLines(OpenFileDialog1.FileName)
    For Each word As String In words
        If String.Equals(MD5(word), hash.Text) Then
            Label2.Text = word
        Else : Label2.Text = "Hash Could Not Be Cracked"
        End If
    Next 
```

现在，一旦散列字与我输入的散列匹配，我需要让它停止！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:47:03.740

您可以使用 LINQ's [`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)，因为您正在使用`ReadLines`而不是`ReadAllLines`：

```
Dim firstWord = (From line In IO.File.ReadLines(OpenFileDialog1.FileName)
    Where String.Equals(MD5(line), hash.Text)).FirstOrDefault()
If firstWord IsNot Nothing Then
    Label2.Text = firstWord 
Else
    Label2.Text = "Hash Could Not Be Cracked"
End If 
```

另一种方法是一个简单的循环：

```
Dim lines = IO.File.ReadAllLines(OpenFileDialog1.FileName)
Dim matchingLine As String = Nothing
For i = 0 To lines.Length -1
    Dim line = lines(i)
    If String.Equals(MD5(line), hash.Text)) Then 
        matchingLine = line
        Exit For
    End If
Next
If matchingLine IsNot Nothing Then
    Label2.Text = matchingLine 
Else
    Label2.Text = "Hash Could Not Be Cracked"
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:55:08.207

要停止循环，请使用`Exit For`：

```
Dim words As IEnumerable(Of String) = File.ReadLines(OpenFileDialog1.FileName)

For Each word As String In words
    If MD5(word) = hash.Text Then
        Label2.Text = word
        Exit For
    Else : Label2.Text = "Hash Could Not Be Cracked"
    End If
Next 
```

但请注意，`Else`这里没有意义（在离开方法之前表单不会更新）并且`String.Equals`可以在这里替换为`=`（我已经这样做了）。

# jakarta-ee - WAS 6 中的 NameNotFoundException 调度程序 TaskHandler EJB 查找

> ID：10339448
> 
> 赞同：0
> 
> 时间：2012-04-26T18:41:23.663
> 
> 标签：jakarta-ee, websphere-6.1

我已经开始重复出现以下错误。我已经彻底检查了 ejb-jar.xml 和 ibm-ejb-jar-bnd.xml 并且两者都有关于 EJB 主目录、远程、jndi 名称与 ejb 名称的正确信息。还有什么可能的原因？请帮忙。

NamingException 在 XXXXXXXX 中捕获：“根异常是 org.omg.CosNaming.NamingContextPackage.NotFound：IDL:omg.org/CosNaming/NamingContext/NotFound”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:42:36.227

这解决了。调度程序使用配置 XML，我们可以在其中使用 jndi 名称声明不同的 TaskHandler EJB。在格式化 XML 时，我们不小心在 jndi 名称之前放置了一个空格。虽然我们期待 WAS 会修剪空格:(

总之感谢。

# javascript - Django - 如果国家/地区字段等于美国，则发送 ajax 请求以将状态选择器设置为美国各州的元组

> ID：10339449
> 
> 赞同：0
> 
> 时间：2012-04-26T18:41:27.483
> 
> 标签：javascript, jquery, ajax, django, forms

在我的 django 表单中，我想发出某种类型的 ajax/jquery 请求，以便如果用户选择“美国”作为他们的国家，状态字段会自动变成包含所有状态的下拉列表（选择 = STATE_CHOICES）。我怎样才能在 Django 中做到这一点？我在搜索结果中看到了 DAJAX，但我很犹豫，因为我觉得应该有一个非常简单的方法来做到这一点。提前致谢。

### 更新：

能够用ajax完成其中的一些工作。当用户失去对国家字段的关注时，它将该字段中的数据发送到相应的视图。

```
 //JQUERY CODE
$("#id_country").focusout(function()
    {
        var country = $(this).attr('value');

        $.ajax({
            type:'POST',
            URL: '/accounts/register/',
            data: {
                country: $(this).attr('value')                    
            }
            });

    });` 
```

这是它被发送到的视图。它从不承认这是一个 ajax 调用。除非用户当然提交表单，否则它总是属于 else 语句。

```
from django.contrib.localflavor.us.us_states import STATE_CHOICES

def register(request):
form = RegistrationForm()
form_pref = UserInfoForm(request.POST)

if request.method == 'POST':
    form = RegistrationForm(request.POST)     
    if form.is_valid():   
        form_pref = UserInfoForm(request.POST, instance=UserInfo())            
        if form_pref.is_valid():
            new_user = form.save()                
            user=UserInfo.objects.create(user_id=new_user.id)            
            form_pref = UserInfoForm(request.POST, instance = user)  
            form_pref.save()   
    if form_pref.is_valid():
        form_pref.save(commit=False)

if request.is_ajax():
   ajax= "AJAX"
   country = request.POST.get('choices')  
    # I tested out in the shell and this line below changed the choices for me           
   form_pref.fields['state_province']._set_choices(STATE_CHOICES)   

else:

    form = RegistrationForm()
    form_pref = UserInfoForm()       
    country = "test"
 forms = (form, form_pref)

return render_to_response('register_form.html', {'form':form,'form_pref': form_pref,'forms':forms, 'ajax':ajax, 'country':country} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-17T14:46:28.863

您正在为该 AJAX 调用调用 post 方法... request.is_ajax() 应该是 if...else 语句内的 if request.method == "POST" 语句。

# jakarta-ee - 配置 Jersey + Jetty + JSP

> ID：10339451
> 
> 赞同：1
> 
> 时间：2012-04-26T18:41:33.163
> 
> 标签：jakarta-ee, servlets, jetty, jersey, jax-rs

如何配置这个项目以便它能够呈现 JSP 文件？我希望以 /rest 开头的 URL 路由到球衣资源并让 /* URLS 服务 JSP 文件。我在这个项目中没有任何 web.xml。

### 项目文件夹

```
├───src
│   └───main
│       └───java/Main.java
│           └───resources/HelloResource.java
└───WEB-INF
    └───jsp/NewFile.jsp 
```

### HelloResource.java

```
package resources;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@Path("/hello")
public class HelloResource {

    @GET
    @Produces("text/plain")
    public String handleGreeting() {
        return "Hello World";
    }

    @Path("/test")
    @GET
    @Produces("text/json")
    public String test() {
        return "just test";
    }
} 
```

### 主.java

```
import java.io.IOException;

import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;

import com.sun.jersey.spi.container.servlet.ServletContainer;

public class Main {
    public static void main(String[] args) throws IOException {

        Server server = new Server(Integer.valueOf(System.getenv("PORT")));
        ServletContextHandler context = new ServletContextHandler(
                ServletContextHandler.SESSIONS);
        context.setContextPath("/");
        server.setHandler(context);
        ServletContainer container = new ServletContainer();
        ServletHolder h = new ServletHolder(container);
        h.setInitParameter("com.sun.jersey.config.property.packages",
                "resources");
        h.setInitParameter(
                "com.sun.jersey.config.property.JSPTemplatesBasePath",
                "/WEB-INF/jsp");
        h.setInitParameter(
                "com.sun.jersey.config.property.WebPageContentRegex",
                "/(images|js|styles|(WEB-INF/jsp))/.*");
        context.addServlet(h, "/*");
        try {
            server.start();
            server.join();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:45:49.920

您应该使用 context.addServlet(h, "/*") 更改该行，如下所示：

```
context.addServlet(h, "/rest/*"); 
```

您可以删除 WebPageContentRegex 和 JSPTemplatesBasePath 初始化参数 - 在这种情况下它们是无用的。并将您的 JSP 移出 WEB-INF/jsp 目录。

如果您使用的是 maven，您的项目结构应如下所示：

```
└───src
    └───main
        ├───java/Main.java
        │   └───resources/HelloResource.java
        └───webapp/NewFile.jsp
            └───WEB-INF/web.xml (optional) 
```

# javascript - .clone 似乎没有增加

> ID：10339454
> 
> 赞同：0
> 
> 时间：2012-04-26T18:41:40.387
> 
> 标签：javascript, jquery, clone, auto-increment, mask

此脚本假设克隆 HTML 表的新行。它似乎没有增加名称、ID、属性。我究竟做错了什么？唯一不起作用的另一件事是从#endtime_* 的前一个输入ID 中获取值并将其放入#starttime_* 的克隆输入ID 中，尽管我认为这是因为它在克隆一行时似乎在增加.

```
<script type="text/javascript">
function MaskTime(){
    var index = $("#TimeCard tbody>tr").length-1;

$('#endtime_'+index).mask("99:99 aa");
$('#starttime_'+index).mask("99:99 aa");    
}
function update_rows(){
    $("#TimeCard tbody>tr:odd").css("background-color", "#FFF");
    $("#TimeCard tbody>tr:even").css("background-color", "#999");
}
$(document).ready(function() {
    $("#addrow").click(function() {
        var row = $('#TimeCard tbody>tr:last').clone(true).insertAfter('#TimeCard tbody>tr:last');
        var index = $("#TimeCard tbody>tr").length-1;
        var endvalue = $('#endtime_'+index-1).val();
        $("td:eq(0) select").attr("name", 'type_'+index).attr("id", 'type_'+index).addClass("validate[required]").val('')
        $("td:eq(1)").html("&nbsp;")
        $("td:eq(2) select").attr("name", 'propid_'+index).attr("id", 'propid_'+index).addClass("validate[required]").val('')
        $("td:eq(3)").html("&nbsp;")
        $("td:eq(4) input").attr("name", 'starttime_'+index).attr("id", 'starttime_'+index).addClass("validate[required,custom[timeclock]]").val(endvalue)
        $("td:eq(5) input").attr("name", 'endtime_'+index).attr("id", 'endtime_'+index).addClass("validate[required,custom[timeclock]]").val('')
        $("td:eq(6)").html("&nbsp;")

        update_rows();
        MaskTime();

      return false;
    });
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:46:29.393

对于您问题的第一部分：

> 它似乎没有增加名称、ID、属性。

您的脚本没有为您要修改属性等的 tds 的位置提供正确的上下文。

这是一个修正，添加一个新变量“newrow”（以减少 DOM 调用）并修改与 td:eq(#) 相关的代码行...

```
$(document).ready(function() {
    $("#addrow").click(function() {
        var row = $('#TimeCard tbody>tr:last').clone(true).insertAfter('#TimeCard tbody>tr:last');
        var index = $("#TimeCard tbody>tr").length-1;
        var endvalue = $('#endtime_'+index-1).val();
        var newrow = $("#TimeCard tbody>tr:last");
        newrow.children("td:eq(0)").children("select").attr("name", 'type_'+index).attr("id", 'type_'+index).addClass("validate[required]").val('')
        newrow.children("td:eq(1)").html("&nbsp;")
        newrow.children("td:eq(2)").children("select").attr("name", 'propid_'+index).attr("id", 'propid_'+index).addClass("validate[required]").val('')
        newrow.children("td:eq(3)").html("&nbsp;")
        newrow.children("td:eq(4)").children("input").attr("name", 'starttime_'+index).attr("id", 'starttime_'+index).addClass("validate[required,custom[timeclock]]").val(endvalue)
        newrow.children("td:eq(5)").children("input").attr("name", 'endtime_'+index).attr("id", 'endtime_'+index).addClass("validate[required,custom[timeclock]]").val('')
        newrow.children("td:eq(6)").html("&nbsp;")

        update_rows();
        MaskTime();

      return false;
    });
}); 
```

另外，我用上面的方法做了一个 jsfiddle：http: [//jsfiddle.net/m78UN/2/](http://jsfiddle.net/m78UN/2/)

当您描述第二个问题时，我没有遵循您想要的内容：

> 唯一不起作用的另一件事是从 #endtime_* 的先前输入 id 获取值并将其放入 #starttime_* 的克隆输入 id

...所以我没有试图解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:16:28.267

我认为您可以以更简单的方式完成您正在做的所有事情。我没有您的原始 HTML，但请查看此作为可能的替代方法。它主要做了3件事：

1.  删除了用于查找内容的 ID
2.  缓存选择器
3.  将类添加到时间输入以使其更易于参考
4.  删除`MaskTime()`功能

这是代码：

```
$(document).ready(function() {
  var $timecard = $("#TimeCard");
  var $tbody = $timecard.find("tbody");
  var $rows = $tbody.children("tr");
  $("#addrow").click(function(e) {
    e.preventDefault(); // clearer than return false
    var $lastRow = $tbody.find("tr:last-of-type");
    var lastEnd = $lastRow.find(".endTime").val();
    var $newRow = $lastRow.clone(true).appendTo($tbody);
    var $cols = $newRow.find("td");
    var index = $rows.length - 1;
    $cols.eq(0).find("select").attr("name", 'type_' + index).addClass("validate[required]").val('');
    $cols.eq(1).empty();
    $cols.eq(2).find("select").attr("name", 'propid_' + index).addClass("validate[required]").val('');
    $cols.eq(3).empty();
    $cols.eq(4).find("input").attr("name", 'starttime_' + index).addClass("time startTime validate[required,custom[timeclock]]").val(lastEnd);
    $cols.eq(5).find("input").attr("name", 'endtime_' + index).addClass("time endTime validate[required,custom[timeclock]]").val('');
    $cols.eq(6).empty();
    update_rows(); // no idea what this is
    $newRow.find(".time").mask("99:99 aa"); // MaskTime() just did this
  });
}); 
```

# android - 安装 Android SDK 和 Eclipse 的更多问题

> ID：10339455
> 
> 赞同：0
> 
> 时间：2012-04-26T18:41:42.873
> 
> 标签：android, eclipse, sdk, ide

我的第一个问题是：我似乎找不到`Android SDK`! 我已经通过`Android SDK Manager`必要的文件下载并安装了，至少我希望我有。要开始滚动，我下载：`API 15`、`Android SDK`工具和平台工具加`Android 3.2`。我错过了什么吗？问题是我找不到任何可执行文件来运行我的`Android SDK！它在哪里？

然后我继续下载`Eclipse Java IDE`，认为现在我已经`Android SDK`安装它肯定会运行，这里的问题是，当我尝试运行下载文件的可执行文件时，它会返回消息：

```
'The Eclipse executable launcher was unable to locate it's companion shared library' 
```

关于我能做些什么来最终运行我的`Android SDK`或`Eclipse Java IDE`将不胜感激的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:00:18.147

事实上，SDK 有几个可执行文件：adb、android 等。您将通过 Eclipse 和/或命令行访问这些文件。设置 Android 开发环境非常痛苦。[此处](http://developer.android.com/sdk/installing.html)或多或少有所描述。试试看，当你遇到下一个障碍时，你让我们知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:14:27.933

如果您在设置所有内容时遇到问题，另一种选择是摩托罗拉的[MOTODEV Studio](http://developer.motorola.com/tools/motodevstudio/download/)。这是一个免费产品，但需要注册。我们关注的用例之一是遇到 Eclipse 和/或 Android SDK 问题的新开发人员。

免责声明：这是我团队的产品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T18:54:02.657

从以下网址下载 Eclipse 'Eclipse IDE for Java Developers'：http:
[//www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

然后从以下网址下载 SDK：http:
[//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

该视频可以帮助您：
[http ://www.youtube.com/watch?v=BLLX9EtG6CI](http://www.youtube.com/watch?v=BLLX9EtG6CI)

# android - 未按下后Textview不会恢复原始颜色

> ID：10339456
> 
> 赞同：0
> 
> 时间：2012-04-26T18:41:52.163
> 
> 标签：android, android-layout

我有一个文本视图，我将文本颜色设置如下：

```
<TextViw
android:id = "@+id/tv"
android:clickable = "true"
android:textColor = "@color/clickable_text"
android:textSize="16sp"
/> 
```

选择器是

```
<item android:state_pressed "true" android:color = "#FF0000"  />  //which is red
<item android:color = "#00FF66"  />  //which is Green 
```

文本视图按预期启动绿色。如果我单击（比如说按住它），颜色会变为红色，这很好。但是当释放点击时（即取消触摸它）。然后颜色变为黄色！这是默认颜色的android，点击后将可点击视图更改为。为什么！！！！。

它不应该像我预期的那样回到绿色吗？问题是即使我在活动之间移动并回来，这种颜色也会保持不变有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:16:16.287

我知道这不是您问题的确切答案，但是来自此链接的想法可能会对您有所帮助：[Android 如何在按下或聚焦时使 TextView 文本加粗](https://stackoverflow.com/questions/4988850/android-how-to-make-textview-text-bold-when-pressed-or-focussed)。我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:48:45.030

您通常希望具有按下、聚焦和默认状态。并且总是把默认状态放在最后。我的猜测是，如果你长按然后松开，按钮不会被按下（红色），但仍然是焦点。因此，将您的焦点更改为绿色以及以下

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:color = "#FF0000" /> <!-- pressed -->
    <item android:state_focused="true"
          android:color = "#00FF66" /> <!-- focused -->
    <item android:color = "#00FF66" /> <!-- default -->
</selector> 
```

# touch - Sencha Touch 2.0 和navigation.View - MVC

> ID：10339458
> 
> 赞同：0
> 
> 时间：2012-04-26T18:41:54.333
> 
> 标签：touch, extjs

我想用一个按钮切换视图，在 sencha 文档中绝对没有在 MVC 上下文中的示例，尽管他们建议开发人员使用他们在 MVC 架构中构建的内容。我猜是因为 Touch 2.0 相当新。

[http://docs.sencha.com/touch/2-0/#!/api](http://docs.sencha.com/touch/2-0/#!/api)

关于list组件的视频也是关于navigation.View的，但是由于使用了list组件，所以没有展示如何用按钮切换视图。

视频：[列表组件介绍](http://docs.sencha.com/touch/2-0/#!/video/list)

这是我到目前为止的代码：

uddannelser.js（第一个视图）

```
Ext.define("VUCFyn.view.uddannelser", {
extend: "Ext.navigation.View",
xtype: "uddannelser",
requires: [
    "VUCFyn.view.avu"
],

config: {
    title: "Uddannelser",
    cls: "uddannelser",
    items: [
        {
            title: "Uddannelser",
            xtype: "container",
            margin: 20,
            layout: "vbox",
            items: [
                {
                    xtype: "button",
                    text: "AVU",
                    width: 100
                }
            ]
        }
    ]
}}); 
```

avu.js（uddannelser 的子视图）

```
Ext.define("VUCFyn.view.avu", {
extend: "Ext.Panel",
xtype: "avu",

config: {
    title: "AVU",
    cls: "avu",
    scrollable: true,
    items: [
        {
            xtype: "label",
            html: [
                "<p>Almen Voksenuddannelse - avu - er et tilbud om uddannelse til alle over 18 år. Du kan tage avu-fagene et ad gangen eller i en kombination med flere fag. Du kan også kombinere avu-fagene med andre enkeltfag på FVU og/eller hf.</p>",
                "<h5>AVU omfatter kernefagene:</h5>",
            ].join("")
        }
    ]
}}); 
```

Main.js（控制器）

```
Ext.define('VUCFyn.controller.Main', {
extend: 'Ext.app.Controller',

config: {
    refs: {
        uddannelser: "uddannelser"
    },
    control: {
        "uddannelser": {
            tap: "showDetail"
        }
    }
},

showDetail: function () {
    this.getUddannelser().push({
        xtype: "avu"
    });
},

init: function () {

}}); 
```

请，如果有人可以根据上面的代码（或类似代码）告诉我怎么做，那就太好了。

顺便说一句：此线程中的答案：[Sencha Touch 2 MVC - 如何使用按钮切换视图](https://stackoverflow.com/questions/7883097/sencha-touch-2-mvc-how-to-switch-views-with-button)对我不起作用。（虽然没有错误）我认为它适用于 Sencha Touch 1.1，很多事情在 2.0 中显然发生了变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:28:52.660

嗨，我认为您只需要修复控制器即可，它会起作用，请尝试以下操作，让我知道您的情况。

```
config: {
refs: {
    uddannelser: "uddannelser",
    uddannelserButton: "uddanelser button"
},
control: {
    "uddannelserButton": {
        tap: "showDetail"
    }
} 
```

},

所以我所做的就是在您的 uddanelser 视图中为按钮添加一个选择器，并将点击侦听器附加到该按钮上。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T22:55:20.480

您是否尝试在`navigationview`您给 uddannelser 的设备上收听点击事件`cls`？您的设置有几个问题；

首先，您似乎没有在控制器中正确使用组件查询，请查看此文档：[http ://docs.sencha.com/touch/2.4/apidocs/#!/api/Ext.ComponentQuery](http://docs.sencha.com/touch/2.4/apidocs/#!/api/Ext.ComponentQuery)

根据您希望控制器管理视图中这些组件的数量，您可以给它一个 id 并搜索组件，`"#id"`或者您可以使用`xtype`和配置选项，例如`"navigationview[cls=uddannelser]"`.

其次，您不能在 a 上侦听点击事件`navigationview`，如果您想在此组件上侦听点击事件，则必须在该组件上侦听点击事件`element`并转发事件。我怀疑您实际上是在尝试侦听 tap 事件`button`，在这种情况下，在您的控制器中创建两个 ref，一个用于 the `navigationview`，一个用于`button`，侦听 the 上的 tap 事件并像您一样`button`按下面板`navigationview`现在。

# javascript - jquery删除不删除

> ID：10339459
> 
> 赞同：0
> 
> 时间：2012-04-26T18:41:54.660
> 
> 标签：javascript, jquery, html, forms

所以我有这个表格：

```
<form id="imageinputpopup" class=suggestionsubmit style="display: none">
    <span>Add a thing!</span><br/>
    <label>url: </label><input name="imageurl" type="url"><br/>
    <label>file: </label><input name="imagefile" type="file"><br/>
    <input type='hidden' name='schoolid' class="schoolid">
    <input type="submit" value="Submit">
</form> 
```

这个点击处理程序：

```
$(".allow-submission").live('click', function(){
    if($(this).attr('inputtype')=="colorpicker"){
        ....
    } else if($(this).attr('inputtype')=="image"){
        remove_hidden("#imageinputpopup");
        add_fieldname($(this), $("#imageinputpopup"));
        $("#imageinputpopup").dialog();
    } ....
}); 
```

remove_hidden 看起来像：

```
function remove_hidden(element){
    alert($(element).children('.fieldname').length);
    $(element+'.fieldname').remove();
    alert($(element).children('.fieldname').length);
} 
```

和 add_fieldname 看起来像：

```
function add_fieldname(element, addto){
    var elementname = document.createElement('input');
    elementname.type = 'hidden';
    elementname.name = 'fieldname';
    elementname.value = element.attr('fieldname').replace(' ', '_');
    $(elementname).addClass('fieldname');
    addto.append(elementname);
} 
```

正如我所料，每次点击都会添加一个这样的标签：

```
<input type="hidden" name="fieldname" value="mascot_image" class="fieldname"> 
```

但 remove_hidden 没有删除！我知道选择器是正确的，因为警报正是这些输入标签的数量，但它们只是没有被删除。为什么？我也试过`$(element+).remove('.fieldname');`了，也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:51:10.317

尝试更换

```
$(element+'.fieldname').remove(); 
```

和

```
$(element+' .fieldname').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:51:22.037

如果我得到了这个来源，一方面，当您使用 add_fieldname 函数添加字段名时，您在输入中没有 ID。您可能需要设置它以方便使用。另一方面，在 remove_hidden 函数中，您警告了`element .fieldname`，但试图删除`element.fieldname`（注意类名前面缺少空格），所以我认为您在 remove_hidden 函数中需要这个：

```
$(element+' .fieldname').remove(); 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T18:51:22.510

在这一行`remove_hidden`

```
//Select the element with the id of element AND has the class of fieldname
$(element+'.fieldname').remove(); 
```

尝试在类似之前放置一个空格`.`：

```
//Select the children of element which have a class of fieldname
$(element+' .fieldname').remove(); 
```

编辑：在上面添加了评论以澄清一些事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T22:02:27.610

这是因为 .remove([selector]) [“过滤匹配的元素集”](http://api.jquery.com/remove)来决定要删除的内容。

他们的文件起初让我失望。您尝试删除的内容已经需要在集合中（remove 方法中的选择器不会删除整个集合）。

**例如：删除 input.fieldname：**

```
$(element).find('.fieldname').remove('.fieldname'); 
```

或（对于较大的案例收集案例）：

```
$(element).find('input').remove('.fieldname'); 
```

**例如：不要删除 input.fieldname：**

```
$(element).find('input').remove('.notfieldname'); 
```

# haskell - 如何为具有多个构造函数的数据类型编写 ToJSON/FromJSON 实例？

> ID：10339462
> 
> 赞同：4
> 
> 时间：2012-04-26T18:41:59.090
> 
> 标签：haskell

我见过的每个示例`ToJSON`都`FromJSON`适用于具有单个构造函数的数据类型，如下所示：

```
data RewindConfig = RConfig JobID Phase
                      deriving Show

instance FromJSON RewindConfig where
  parseJSON (Object o) = RConfig
    <$> o .: "JobID"
    <*> o .: "Phase"
  parseJSON _ = fail "invalid RewindConfig" 
```

我想我会看看 Aeson 如何为具有多个构造函数的类型创建实例，例如`Either`：

```
instance (FromJSON a, FromJSON b) => FromJSON (Either a b) where
   parseJSON (Object (H.toList -> [(key, value)]))
        | key == left  = Left  <$> parseJSON value
        | key == right = Right <$> parseJSON value
   parseJSON _        = fail "" 
```

parseJSON 中的模式匹配让我感到困惑，我不明白`(H.toList -> [(key, value)])`.

我要为其创建实例的数据类型如下所示：

```
data Foo = Bar String
         | Baz String
         | Bin String 
```

我确实想到了做一些我知道如何实施的事情

```
data Foo = (Maybe Bar) (Maybe Baz) (Maybe Bin) 
```

但这似乎并不令人满意。有人可以通过解释`Either`实例的情况来帮助我吗，或者给我一些关于 To/From 实例的指导`Foo`？

更新：我认为 Aeson 实现的实例`Maybe`更加清晰，并告诉我我需要知道什么来满足我的需求。不过，我想知道发生了什么`Either`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:55:00.157

该模式`(Object (H.toList -> [(key, value)]))`称为[视图模式](http://hackage.haskell.org/trac/ghc/wiki/ViewPatterns)。你可以像这样阅读它：

```
parseJSon (Object o) = case H.toList o of
    [(key, value)]
        | key == left  -> Left  <$> parseJSON value
        | key == right -> Right <$> parseJSON value 
```

它实际上略有不同，因为上面将始终提交给模式`Object o`，`Object`而视图模式只会在“匹配`Object o`模式”和“`H.toList o`匹配`[(key, value)]`模式”条件都成立时提交，但对于这个例子，没有'没关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:50:45.177

json 包包含您可能想要采用的数据类型的编码。如果你只是派生`Data`，你可以使用它。它不是很快，但很容易使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-28T03:57:53.737

假设每个数据类型都有一个不同的键，另一种方法可以使用镜头——我喜欢它，因为它简洁易读。例如，如果您有一个围绕 A、B 和 C 的包装器，它们都具有 FromJSON 实例：

```
import Data.Aeson
import Data.Maybe
import Data.Aeson.Lens
import Control.Lens

data Wrap = WrapA A | WrapB B | WrapC C

instance FromJSON Wrap where
    parseJSON json
        | isJust (json ^? key "A's unique key") = WrapA <$> parseJSON json
        | isJust (json ^? key "B's unique key") = WrapB <$> parseJSON json
        | isJust (json ^? key "C's unique key") = WrapC <$> parseJSON json
        | otherwise = fail "Bad message" 
```

# ios - 以编程方式从我的 iOS 应用程序中的外部摄像头电路传输图片

> ID：10339464
> 
> 赞同：0
> 
> 时间：2012-04-26T18:42:06.283
> 
> 标签：ios, bluetooth, mfi, bluetooth-lowenergy

我正在从事我的高级工程设计项目，我需要你的帮助！为此，我的 iPhone 应用程序从我构建的外部摄像头电路接收图像。

为了将我的 iPhone 应用程序连接到相机电路，我研究了以下方法：

1.  在摄像头电路上构建**蓝牙模块**，将图像传输到 iPhone

2.  使用**Eye-Fi** SD 卡以某种方式将图像传输到我的应用程序！链接：[http ://www.eye.fi/products/iphone](http://www.eye.fi/products/iphone)

3.  构建电路，使用**30 针基座连接器与 iPhone 进行有线连接**

以下是我面临的每一个问题。我对你们的实际问题以**粗体突出显示**：

1.  iOS 蓝牙框架（仅限 4S），仅支持低功耗设备。看着像[这样](http://www.bluegiga.com/BLE112_Bluetooth_low_energy_module)的模块，我怀疑它是否适用于图像传输，这对于低功耗蓝牙来说似乎是一项繁重的任务。我知道 cydia 商店中有越狱应用程序，它们会定期进行蓝牙传输，但我无法找到用于此类任务的那些私有 API。（注意：我制作这个应用程序是为了我的目的，所以请随意建议任何私有/非官方 API）。问题#1：**如何连接普通蓝牙设备（不是其他 iPhone）并传输数据？**

2.  EYE-FI 卡作为消费者听起来很神奇，因为该公司拥有他们专有的 iPhone 应用程序来传输来自 EYE-FI SD 卡的图像。问题是我无法弄清楚如何在我的代码中轻松地与 EYE-Fi 卡进行交互。我研究了 iOS CFNetwork 框架，但没有任何运气。问题#2：**如何在我的应用程序中与 EYE-FI 卡交互？**

3.  [使用此开发板](http://www.cypress.com/?rID=40218)构建电路​​似乎很简单，但我在某处读到 iPhone 可能无法识别“未注册”配件。我有开发者许可证，但没有 MFi 许可证。问题#3：**我是否需要注册为 MFi 开发者才能在我的应用程序中创建和使用这个外部附件用于我自己的目的？？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T06:43:41.600

您可以尝试通过串行端口进行设置，因为个人禁止加入 MPi 程序。您可以使用这样的连接器[http://www.amazon.com/neXplug-Ultra-Small-Micro-Adapter/dp/B0055PCVDO/ref=sr_1_1?ie=UTF8&qid=1339309918&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/B0055PCVDO)

Apple 网站建议个人/爱好者使用“建议您使用第三方解决方案，该解决方案允许您将 iOS 设备连接到串行设备并编写与这些串行设备通信的 iOS 应用程序”（来自 mfi.apple.com/常问问题）。

我还在研究可以连接到 iphone/ipad 的外部摄像头。我将使用串行端口来解决外部 iphone/pad 设备的 MFi 要求。尝试使用蓝牙太复杂了，数据流也不够大。有线版本会更好。

我希望这会有所帮助，并且您的大学学期和项目尚未完成。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:45:09.780

正如 T Reddy 已经提到的，如果您想创建与外部硬件框架的接口的硬件，您必须注册 Apple MFi 程序，而您作为个人无法做到这一点。

我不确定 Eye-Fi 系统是如何工作的，但在我看来，它基本上会将图像同步到他们的服务器，一旦你下载了他们的 Apple 应用程序，该应用程序就可以为你同步照片。

无论您使用的是蓝牙还是 30 针连接器，都无法连接到外部设备，除非该设备符合 MFi 标准并且是 MFi 程序的一部分。我建议您尝试以下选项来解决此问题-

1.  如果这是某个大学的“高级项目”，请查看您的大学是否是 MFi 的一部分。Apple 不会让个人加入该计划，因此如果您要获得访问权限，您必须通过其他组织或可能的教育机构访问它。我不知道苹果是否在这方面与学校合作，但你永远不知道。这可能是可能的。

2.  如果您的学校不在 MFi 计划中，那么您可能需要考虑为 Android 设备重新编写应用程序。Android 设备不像 iOS 设备那样被锁定，所以这可能是一种更合理的方法。

我讨厌带来坏消息，但在 iOS 设备上规避这些硬件限制是被过度禁止的。您的选择非常有限，而且没有一个可能是您想要或需要听到的。

# c - 使用 MapViewOfFile，指针最终会走出内存空间

> ID：10339473
> 
> 赞同：0
> 
> 时间：2012-04-26T18:42:47.590
> 
> 标签：c, windows, pointers, memory-leaks, mmap

全部，

我正在使用 MapViewOfFile 将文件的一部分保存在内存中。有一个流指向这个文件并写入它，然后被倒带。我使用指向映射文件开头的指针，并读取直到我到达作为最后一个字符写入的空字符。

```
int fd;
yyout = tmpfile();
fd = fileno(yyout);
#ifdef WIN32
    HANDLE fm;
    HANDLE h = (HANDLE) _get_osfhandle (fd);

    fm = CreateFileMapping(
             h,
             NULL,
             PAGE_READWRITE|SEC_RESERVE,
             0,
             4096,
             NULL);
    if (fm == NULL) { 
            fprintf (stderr, "%s: Couldn't access memory space! %s\n", argv[0],  strerror (GetLastError()));
            exit(GetLastError());
    }
    bp = (char*)MapViewOfFile(
              fm,
              FILE_MAP_ALL_ACCESS,
              0,
              0,
              0);
    if (bp == NULL) { 
            fprintf (stderr, "%s: Couldn't fill memory space! %s\n", argv[0],  strerror (GetLastError()));
            exit(GetLastError());
    } 
```

数据被发送到`yyout`流中，直到`flushData()`被调用。这会将 null 写入流，刷新，然后倒回流。然后我从映射内存的开头开始，读取字符，直到我到达空值。

```
void flushData(void) {
    /* write out data in the stream and reset */ 
    fprintf(yyout, "%c%c%c", 13, 10, '\0');
    fflush(yyout);
    rewind(yyout);
    if (faqLine == 1) {
        faqLine = 0; /* don't print faq's to the data file */
    }
    else {
        char * ps = bp;
        while (*ps != '\0') {
                fprintf(outstream, "%c%c", *ps, blank);
                ps++;
            }
        fflush(outfile);
    }
    fflush(yyout);
    rewind(yyout);
} 
```

刷新后，更多的数据被写入流，应该设置在内存区域的开头。就我可以用 gdb 确定的那样，流没有被倒带，并最终填满了分配的空间。

由于流指向底层文件，因此最初不会导致问题。但是，当我尝试遍历内存时，我从来没有找到空值。这导致一个`SIGSEV`. 如果您想了解我为什么需要它的更多详细信息，[请参见此处](https://stackoverflow.com/q/10305095/724357)。

为什么我没有按预期重用内存空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T23:26:13.120

我认为 CreateFileMapping 的 MSDN 文档中的这一行可能是线索。

*映射文件和使用输入和输出 (I/O) 函数（ReadFile 和 WriteFile）访问的文件不一定是一致的。*

您显然没有使用 Read/WriteFile，但应该根据映射视图与显式 I/O 调用来理解文档。无论如何，C RTL 肯定是使用 Win32 API 实现的。

简而言之，这种方法是有问题的。

我不知道为什么更改视图/文件大小会有所帮助；也许它只是将未定义的行为转移到恰好有益的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:09:42.340

好吧，在研究了一段时间之后，我有了一个可行的解决方案。我不知道为什么会成功，所以如果有人想出更好的东西，我会很乐意接受他们的答案。

```
fm = CreateFileMapping(
         h,
         NULL,
         PAGE_READWRITE|SEC_RESERVE,
         0,
         16384,
         NULL); 
```

如您所见，唯一的变化是从`4096`to声明的大小`16384`。我不知道为什么当一次输入的总字符数不超过 1200 时这会起作用。如果有人可以提供这方面的详细信息，我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T00:11:51.237

完成地图后，只需取消地图即可。

```
UnmapViewOfFile(bp); 
```

# php - 循环遍历对象

> ID：10339477
> 
> 赞同：1
> 
> 时间：2012-04-26T18:42:53.583
> 
> 标签：php, oop, object

假设您有这个包含对象的数组：

```
array
0 => 
object(User\Entity\User)[297]
  public 'id' => int 1
  private 'first_name' => string 'Peter' (length=5)
  private 'last_name' => string 'Johnson' (length=7)
  private 'initials' => string 'J.J.' (length=4)
  private 'email' => string 'test@gmail.com' (length=21)
 1 => 
object(User\Entity\User)[296]
  public 'id' => int 2 
  private 'first_name' => string 'Edith' (length=8)
  private 'last_name' => string 'Peters' (length=7)
  private 'initials' => string 'R.J.' (length=4)
  private 'email' => string 'edit@gmail.com' (length=26) 
```

现在我想把它们放在一张桌子上。但是因为我想让它通用，所以我尝试以一种抽象的方式来做。

我在下面的函数中有一个 $aColnames 数组，以便能够只显示获取我想在表中看到的字段的值。

这是我正在尝试构建的方法：

```
private function generateTable()
{

    foreach($this->aData as $aData){
      $this->sTable.= '<tr>';
      foreach($this->aColnames as $sColname){
          $this->sTable.= '<td>';
/****What code goes here ****/
              $this->sTable.= '</td>';
      }
          $this->sTable.= '</tr>';
        }
    } 
```

问题是我如何从对象中获取值？我每次都需要实例化对象吗？谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:54:46.393

不，您不需要再次实例化对象。当您首先将它们放在数组中时，它们会被实例化！

但是，您需要将这些变量声明为 public，以便可以访问它们，或者具有某种 getter 函数。

# ruby-on-rails - 如何使用 rails check_box 获取表单中的模型对象？

> ID：10339478
> 
> 赞同：1
> 
> 时间：2012-04-26T18:42:56.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, checkbox, form-helpers

如何从数据库中获取表单中的复选框值？我希望表单带有现有的子类别名称，并且当我选中复选框以选择该特定类别名称而不创建新类别名称时。我尝试了 ryan bate 的 railscast 但对我没有帮助。这里的关系是`Category has_many SubCategories`和`SubCategory belongs_to Category`。谢谢。

```
 <%= form_for @category ,:url=>{:action =>"create"} do |f| %>
 <%=f.text_field :category_name %>
 <%= f.fields_for :sub_categories do |s| %>
 <% @category.sub_categories.each do |sub|%>
 <%=s.check_box "name",{},sub.id %>  <!--need help here-->
 <%end%> 
 <%end%>
 <%=f.submit "submit"%>
 <%end%> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T21:04:54.557

根据评论中的交流，您似乎希望使用复选框将 SubCategory 对象分配给 Category 对象。如果是这种情况，您的关联应该是类别 has_and_belongs_to_many :sub_categories。然后你的表格看起来像：

```
<%= form_for @category ,:url=>{:action =>"create"} do |f| %>
 <%=f.text_field :category_name %>
 <% SubCategories.each do |sc| %>
    <div>
      <%= check_box_tag :sub_category_ids, sub_category_id, @category.sub_categories.include?(sc), :name => 'category[sub_category_ids][]' -%>
      <%= label_tag :sub_category_ids, sc.name -%>
    </div>
  <% end -%>
<% end %> 
```

这将显示一个类别表单，然后通过选中复选框列出可以分配或取消分配的所有子类别。

对于这个新的关联和逻辑（可能在您的控制器中），您还需要一个连接表“categories_sub_categories”来处理实际分配。

您的 category_controller.rb 示例

```
def create
    @category = Category.find(params[:id])
    #use the checked sub_category_ids from the form to find and assign the sub_categories.
    assigned_sub_categories = SubCategory.find(params[:category][:sub_category_ids]) rescue []
    @category.sub_categories = assigned_sub_categories
    if @category.save
      …
    else
      …
    end
end 
```

# jquery - jQuery 无法渲染 html 以供 Underscores 的模板使用

> ID：10339483
> 
> 赞同：0
> 
> 时间：2012-04-26T18:43:01.273
> 
> 标签：jquery, underscore.js

我制作了两个文件，一个用于 HTML，其中一个脚本是用 id='search_template' 定义的，另一个 javaScript 文件是我提到的“视图”。

在 View 的渲染功能中，我在 HTML 文件中提取脚本

> id='搜索模板'

使用 jQuery 并通过 jQuery 传递它

> .html()

将其转换为字符串，然后将其传递给下划线

> _.template ( 字符串 )

但是，下划线会引发错误

*未捕获的类型错误：无法调用 null 的“替换”方法*

我相信 jQuery 无法将 id='search_template' 的脚本转换为字符串。

```
SearchView = Backbone.View.extend({
      initialize: function(){
        _.bindAll(this, 'render');
      },
      render: function(){
        var template = _.template($("#search_template").html());
        $("body").html(template);
      }
    });
var search_view = new SearchView({ el: $("#search_container") });
    search_view.render(); 
```

我从渲染函数中删除了 jQuery 部分，并尝试通过显式传递 HTML 字符串而不使用 .html() 函数：-

```
render: function(){
    var template = _.template("<label><%= search_label %></label> 
    <input type=\"text\" id=\"search_input\" /> 
    <input type=\"button\" id=\"search_button\" value=\"Search\" />");
    $("body").html(template);
} 
```

这工作得很好。为什么当我使用 jQuery 使用 $("search_template"). 此外，当我合并 HTML 和 JavaScript 文件时，它也可以工作。这是 HTML 文件的片段：-

```
<script type="text/template" id="search_template">
<label>Search here : </label>
<input type="text" id="search_input" />
<input type="button" id="search_button" value="Search" />
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:57:27.027

这`render`：

```
render: function(){
  var template = _.template($("#search_template").html());
  $("body").html(template);
} 
```

`#search_template`不起作用，因为在调用它时您在 DOM 中没有 a 。如果您不相信我，这里有一些证据：http: [//jsfiddle.net/ambiguous/HFYyx/](http://jsfiddle.net/ambiguous/HFYyx/)

您在某处有错字或顺序问题：

1.  如果您不包含`#search_template`在 HTML 中，请修复 HTML。
2.  如果您`render`之前`#search_template`在 DOM 中运行，则将您的`render`调用放入`$(function() { ... })`包装器中，以便在 DOM 准备好之前不会调用它。
3.  如果您有错字，请`id`更正您的错字。

这些将是您的问题的最常见原因。

* * *

顺便说一句，[`_.template`](http://underscorejs.org/#template)返回一个函数（除非您也将第二个参数传递给它）：

> **模板** `_.template(templateString, [data], [settings])`
> 
> 将 JavaScript 模板编译为可评估以进行渲染的函数。
> [...]
> 如果您正在编写一次性的，您可以将**数据**对象作为第二个参数传递给模板，以便立即呈现而不是返回模板函数。

所以你应该调用`template`并使用它的返回值作为 HTML：

```
$('body').html(template());
// --------------------^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:58:22.180

也许您需要将对象与模板调用一起传递：

```
var template = _.template($("#search_template").html(), { search_label: "Label1" }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T07:40:20.440

用这个：

```
$(function() {
    var search_view = new SearchView({ el: $("#search_container") });
    search_view.render();
} 
```

# php - 从哪里开始使用 CPanel 托管在 PHP 中运行命令行

> ID：10339485
> 
> 赞同：8
> 
> 时间：2012-04-26T18:43:04.207
> 
> 标签：php, shell, command-line, cpanel

我正在查看一些 PayPal 脚本/代码示例，其中很多需要通过命令行运行的 php 脚本。

我以前从来没有在 PHP 的命令行中运行过任何东西，所以根本不知道从哪里开始。我不知道我是否使用了正确的搜索词，因为谷歌没有帮助我回答。

我需要使用不同的应用程序还是 cPanel 中有我可以使用的东西？

我收到此错误：

```
INSTALLATION ERROR: Please cd to the /home/site_name/public_html/site and run install.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:47:28.493

使用 SSH 通过终端访问服务器：

[http://docs.cpanel.net/twiki/bin/view/11_30/CpanelDocs/ShellAccess](http://docs.cpanel.net/twiki/bin/view/11_30/CpanelDocs/ShellAccess)

有关于如何通过 PuTTY 连接的说明，然后您可以转到运行 PHP 脚本的目录，如下所示：

php myPHPScript.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:47:24.017

*如果*您的 cPanel 可以选择打开 SSH，请执行此操作。然后 SSH 进入服务器并运行命令 -

```
cd /home/site_name/public_html/site
php install.php 
```

# ruby-on-rails - Ruby on Rails - 有没有办法从数据库表生成脚手架脚本？

> ID：10339490
> 
> 赞同：1
> 
> 时间：2012-04-26T18:43:23.333
> 
> 标签：ruby-on-rails, rubymine

我已经有了数据库表，我需要创建 rails 脚本

```
 rails generate scaffold ... 
```

有没有办法或工具？

谢谢。

编辑：通常我做
rails generate scaffold myObj1 columna:id, columnB:string
rails generate scaffold myOdb2 columna:id, columnB:string
并创建包括 dbg 脚本在内的所有内容。

我现在想从数据库创建脚本。因为我已经有了数据库表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:24:20.440

只需运行脚手架，并删除它创建的迁移文件，因为您已经在数据库中拥有该表。

# iphone - 如何使用 iOS 接收单击并按住远程控制事件？

> ID：10339492
> 
> 赞同：1
> 
> 时间：2012-04-26T18:43:36.033
> 
> 标签：iphone, objective-c, ios

我正在寻找我的应用程序来监听 iOS 设备耳机上单击并按住播放/暂停按钮的情况。目前，行为是启动语音控制（在我的 iPhone 4 上）。

[远程控制事件](http://developer.apple.com/library/IOS/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/RemoteControl/RemoteControl.html)的[事件列表](http://developer.apple.com/library/IOS/#documentation/UIKit/Reference/UIEvent_Class/Reference/Reference.html#//apple_ref/c/tdef/UIEventSubtype)允许获得双击并按住（BeginSeekingForward）和释放（EndSeekingForward），但我正在寻找当前激活语音控制的单击并按住。

我的应用程序有没有办法覆盖语音控制并听取单击并按住？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:21:01.460

您可以将 UILongPressGestureRecognizer 添加到您的 UIButton 并从那里开始工作。

如果你想阻止你的其他方法被调用，你还需要一个 UITapGestureRecognizer 来计算点击并在它接收到第二次点击时将值设置为 true 以及另一个方法（从你的 UIResponder touch* 方法检查）用于触摸释放并将值设置回 false。

使用该值，您可以使用 UILongPressGestureRecognizer 检查用户是否双击。

*或者，您也可以在触摸没有点击计数为 2 的按钮时将值设置为 false。*

希望这可以帮助！

编辑：如果不越狱设备，您就无法覆盖耳机（据我所知）。通常，您永远不必为使用 Apple 耳机进行交互的人编写代码，因为这会严重降低您的应用程序的市场和可用性。例如，如果有人忘记了他们的耳机，他们就无法使用您的应用程序。它只是要考虑的事情。您不想过多地限制应用的可访问性。

# android - 如何禁用 Android 断言（在 Windows 上使用 Eclipse）

> ID：10339497
> 
> 赞同：1
> 
> 时间：2012-04-26T18:43:55.377
> 
> 标签：android, junit, assert

如何通过 Eclipse 在 Windows 上禁用断言检查？

我试过使用

```
-assumenosideeffects junit.framework.Assert {
*;
} 
```

但aseert检查仍在运行。

我已经看到`adb shell setprop debug.assert 1`了另一种解决方案，但我使用的是 Eclipse。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:38:41.583

关于 adb shell setprop debug.assert 1 您可以在任何系统中执行，因为使用 adb shell 您可以在 Android 操作系统中设置属性，而不是在您的计算机操作系统中。但无论如何，它是针对 Java 语言的断言，而不是您提到的 JUnit 断言。

如果您尝试删除 JUnit 断言，请使用：

> -assumenosideeffects**类**junit.framework.Assert { *; }

它必须工作。但请注意，它仅在您导出未正常运行的包时适用。

# jquery - 单击按钮时使用 jQuery 更新 .HTML

> ID：10339498
> 
> 赞同：0
> 
> 时间：2012-04-26T18:43:57.950
> 
> 标签：jquery

我在使用 jQuery 更新元素中的 HTML 时遇到问题。我有一个隐藏的表单，并且 onclick 变得可见，我不确定这是否是问题但由于某种原因我无法让它工作？

我的 jQuery 是...

```
 $(".bill-upd-submit").click(function() {
          var elem = $(this);
          $.post("update_bill.php", elem.parent(".bill-upd").serialize(), function(data) {

                 $(this).closest('li').find('.cost').html('asdasd');
                 return false;

                alert('done');
          });
    }); 
```

我做了一个小提琴来展示它...... [http://jsfiddle.net/jTzyQ/1/](http://jsfiddle.net/jTzyQ/1/)

我想做的是更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:47:40.710

也许你需要

```
elem.closest('li').find('.cost').html('asdasd'); 
```

而不是

```
$(this).closest('li').find('.cost').html('asdasd'); 
```

你在内部回拨帖子到服务器，我不认为`this`是正确的事情。

# opengl - 如何对某个范围进行深度测试？

> ID：10339501
> 
> 赞同：0
> 
> 时间：2012-04-26T18:44:02.007
> 
> 标签：opengl, depth-buffer, depth-testing

在一定范围内进行深度测试的最常见/最简单/最快的方法是什么？

`pass if (currentDepth-offset < newDepth && newDepth < currentDepth)`

*   currentDepth := 深度缓冲区中的值
*   offset := 常量（在编译时知道并且所有片段都相同）
*   newDepth := 片段的深度

理想情况下，函数 glDepthFunc(...) 会更灵活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:01:25.207

glPolygonOffset是您要找的吗[？](http://www.opengl.org/sdk/docs/man/xhtml/glPolygonOffset.xml)（当然，这取决于你想要的偏移量）。

# android - 访问 SIM 上的 SMS 消息

> ID：10339504
> 
> 赞同：4
> 
> 时间：2012-04-26T18:44:23.707
> 
> 标签：android, sms, sim-card

我需要访问存储在 SIM 卡上的 SMS 消息（不在手机上）。

根据 grepcode ( [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/telephony/SmsManager.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/telephony/SmsManager.java) )，android telephony.SmsManger API包括一个公共函数“getAllMessagesFromIcc()”，并表明它从 2.1 开始就存在，但是官方的 android SDK 不支持这样的函数。

为什么会出现差异？

此功能将完全满足我的需要。如果它不存在，如何读取当前 SIM 卡上的 SMS 消息？

我确实在stackoverflow上找到了这篇文章（[Retrieving the SMS Messages from the SIM card on with android](https://stackoverflow.com/questions/1126903/retrieving-the-sms-messages-from-the-sim-card-on-with-android)），这似乎可以做我想做的事，但它实际上扩展了“广播接收器”，我将其解释为捕获传入的消息，而不是阅读消息已存储在 SIM 卡上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:52:48.210

Found the answer. There are a number of public functions in Android that are marked with an "(@HIDE)" tag. These functions are stripped from the android SDK to discourage (well, pretty much prevent) their use by the average programmer.

Of course, the challenge introduced is just too much for *some* programmers...

For more info, see: [http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)

Unfortunately, it seems like current phones (a Samsung Galaxy S, and a LG, 2012) have removed the file he refers to, so the above process is no longer supported.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T02:57:06.890

这是我一直在与自己斗争的一件事。的确，很多函数都标有@HIDE 注解。

经过一段时间的研究，我注意到我可以利用反射的隐藏方法来读取 SIM 消息。您可以在 Java 中查找反射。

**请注意**，在使用隐藏/内部方法时，不能保证这些方法在现有的 android 平台（版本）中存在或具有相同的行为。

导入以下包

```
import android.telephony.SmsMessage;
import java.lang.reflect.Method; 
```

以下是尝试的示例代码，无论如何它对我有用。

```
public ArrayList<SmsMessage> getSimCardMessages() {

    // this implementation was recorded to work for android 1.6
    // it was tested Ok on android 2.3

    ArrayList<SmsMessage> list = new ArrayList<SmsMessage>();

    try {
        Class<?> smsMgrClass = Class.forName("android.telephony.SmsManager");
        Method getSMSMgr = smsMgrClass.getMethod("getDefault");
        Object smsDefaultInstance = getSMSMgr.invoke(null);
        Method getMessages = smsMgrClass.getMethod("getAllMessagesFromIcc");
        @SuppressWarnings("unchecked")
        list = (ArrayList<SmsMessage>) getMessages.invoke(smsDefaultInstance);

        Log.d("sms manager", "length: " + list.size());
    } catch (Exception e) {
        e.printStackTrace();
    }
    return list;
} 
```

您可能想查找[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/telephony/SmsManager.java#SmsManager.getAllMessagesFromIcc%28 %29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/telephony/SmsManager.java#SmsManager.getAllMessagesFromIcc%28%29)有关示例代码中调用的使用的 android 内置类和方法的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T02:27:42.357

如果您可以访问串行设备（Android[似乎](https://stackoverflow.com/q/16404344/23118) `/dev/smd0`可用），那么您可以使用以下 AT 命令从 SIM 中读取 SMS 消息：

```
AT+CPMS="SM","SM"
AT+CMGF=0
AT+CMGL=4 
```

上面是PDU模式，下面是文本模式

```
AT+CPMS="SM","SM"
AT+CMGF=1
AT+CMGL="ALL" 
```

# hibernate - 创建接口的 OneToMany 映射

> ID：10339505
> 
> 赞同：0
> 
> 时间：2012-04-26T18:44:29.120
> 
> 标签：hibernate, jpa, hql

这几天我一直在解决这个问题，但实际上并没有取得什么成就。我想在对象和某些接口之间创建 OneToMany 关系。这是基本示例

```
public class Contact {
  @OneToMany(mappedBy = "contact")
  private List<ContactFacade> facades;
}

public interface ContactFacade {
  public Contact getContact() { }
}

public class ContactFacebook implements ContactFacade {
  @ManyToOne
  private Contact contact;
  public Contact getContact() { }
}

public class ContactTwitter implements ContactFacade {
  @ManyToOne
  private Contact contact;
  public Contact getContact() { }
} 
```

我当然可以做这样的查询来获取`ContactFacade`给定联系人的所有信息：

```
SELECT package.name.ContactFacade WHERE contact.id = :theid 
```

但我无法真正将它作为一个属性映射到另一个类。有可能做到这一点吗？还有其他方法吗？我真的很讨厌`Contact`在查询中保留一个实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:22:22.730

将`ContactFacade`与抽象的 Contact 类相关联，让每个延伸到它的外观实现 getContact(..)。

```
public interface ContactFacade {
  public Contact getContact() { }
}

@Entity
@Inheritance
public abstract class Contact implements ContactFacade {
private Set<Contact > contacts;

   @OneToMany(cascade = CascadeType.ALL, mappedBy = "contact")
   public Set<Contact> getContacts() {
       return notes;
   }
}

@Entity
public class ContactFacebook extends Contact {
  @ManyToOne
  private Contact contact;
  public Contact getContact() { }
}
... 
```

# javascript - 如何在javascript中对自定义对象执行小于/大于比较

> ID：10339506
> 
> 赞同：23
> 
> 时间：2012-04-26T18:44:34.503
> 
> 标签：javascript

我有一个有几个成员的自定义类。我需要将它们相互比较。javascript让我写：

```
var a = new MyType(1);
var b = new MyType(2);
if (a < b) { ... 
```

但我不明白逻辑比较的行为。有人可以解释上述代码中 < 比较的语义吗？有没有办法控制发生的事情，以便我能得到正确的行为？我知道我可以为该类编写一个比较方法，但由于 javascript 允许我编写它，我想知道它认为它在做什么。

谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-26T18:49:51.037

您需要定义一个`.valueOf`返回可用于比较的原语的方法：

```
function MyType( value ){
    this.value = value;
}

MyType.prototype.valueOf = function() {
    return this.value;
};

var a = new MyType(3),
    b = new MyType(5);

a < b
true
a > b
false
a >= b
false
b < a
false
b > a
true 
```

如果你不定义它，字符串`"[object Object]"`用于比较：

```
"[object Object]" < "[object Object]"
false
"[object Object]" > "[object Object]"
false
"[object Object]" >= "[object Object]"
true
"[object Object]" <= "[object Object]"
true 
```

# sql - 表中的多个更新

> ID：10339514
> 
> 赞同：-1
> 
> 时间：2012-04-26T18:45:10.993
> 
> 标签：sql, oracle, sql-update

我有一些数据，比如一些价格 123.4561、345.5671、121.3432、321.3452、1234.3423，它们需要分别更新为文章 a、b、c、d、e 的新价格。

我有大约 1000 条这样的记录。

我需要在表格中更新这些文章（全部 1000）的新价格（如上）。

编写 1000 条更新语句将是一项繁重的工作。我正在考虑使用光标来做到这一点。仍然无法获取所有价格并将它们与特定价格联系起来。问题是如何将特定文章与其新价格联系起来并进行更新。

有人可以建议任何更简单的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:06:40.827

你可以做

```
UPDATE table1 SET price = 
CASE articles
 WHEN 'a' THEN 123.4561 
 WHEN 'b' THEN  345.5671
 ...
END   
WHERE articles IN ('a','b',....) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T06:21:46.263

格式或数据是什么？如果你的记事本有像

```
art1,price1 
art2,price2
art3,price3 
```

您可以将此信息导入数据库中的表中（最好在 SQL Developer、Toad 或您使用的任何 IDE 中使用导入选项），

然后发布更新：

```
update table_articles a
set price = (select price from import_table where price = a.price); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:40:06.277

考虑使用[`MERGE`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm).

以下是标准 SQL：

```
WITH source
     AS
     (
      SELECT * 
        FROM (
              VALUES ( 'a' ,  123.4561 ), 
                     ( 'b' ,  345.5671 ), 
                     ( 'c' ,  121.3432 ), 
                     ( 'd' ,  321.3452 ), 
                     ( 'e' , 1234.3423 )
             ) AS T ( articles , price )
     )
MERGE INTO YourTable
   USING source
      ON source.articles = YourTable.articles
WHEN MATCHED THEN
   UPDATE
      SET price = source.price; 
```

Oracle 支持非常接近这一点的东西。请注意，公用表表达式 (CTE) 可能会替换为暂存基表。

# c# - 如何修复“命名空间 Y 中不存在类型或命名空间名称 X”的错误？

> ID：10339521
> 
> 赞同：0
> 
> 时间：2012-04-26T18:46:20.110
> 
> 标签：c#, compiler-errors, assembly-references

我以前多次遇到此错误，这是一个简单的修复 - 只需添加缺少的参考。不过，我已经有了。事实上，在我添加了引用之后，intellisense 能够引导我找到我想要引用的类型。但是，当我构建时，我得到了错误。从那里开始，智能感知不起作用（给我红色的波浪线）。我怀疑的一件奇怪的事情。我尝试添加引用的项目是 .NET 4.0 应用程序项目（使用 LINQ 和 WPF）。我正在尝试添加对 .NET 3.5 类库项目的引用。这对我来说是新领域（.NET 4.0 引用 .NET 3.5），但我猜这些程序集之间存在一些冲突。有任何想法吗？

[编辑]

不确定这是否会有所帮助，但听起来人们需要一些代码。这就是我所做的一切。

1.  添加了对项目 Framework.UserServices 的引用。
2.  对象浏览器中存在已验证的中继命令类型，命名空间为 Framework.UserServices。
3.  在现有类的构造函数中添加了以下代码（可以放在任何地方）。

    Framework.UserServices.RelayCommand 中继 = new Framework.UserServices.RelayCommand(OpenEditor);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:56:09.177

通过右键单击解决方案资源管理器中的项目，选择属性，然后单击“应用程序”选项卡，检查 .NET 4.0 项目的构建目标是什么。如果它以“.NET Framework 4 Client Profile”为目标，请尝试将其切换为纯（非客户端）“.NET Framework 4.0”配置文件。

# c++ - QML：如何在不实际移动任何可见组件的情况下在 MouseAeria 上获得鼠标移动方向？

> ID：10339536
> 
> 赞同：1
> 
> 时间：2012-04-26T18:47:58.920
> 
> 标签：c++, qt, qml

我想知道是否有一种方法可以发送到一些函数，比如`utilety.move`一些变量，比如`(newX, newY)`代表鼠标移动到哪里的类似伪代码

```
each time event calls function
var coord =  - initioal mouse coords + current mouse coords
utilety.move(coord )
initioal mouse coords  = current mouse coords 
```

所以要控制 QML 元素的移动，而不是使用拖动目标，而是使用自己的方法（可能是 C++ 之一）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:41:51.860

如果您为移动平台开发，您可以考虑使用 Qt Quick Gestures 插件：

```
import Qt.labs.gestures 2.0
GestureArea {
    Tap: {
        when: gesture.hotspot.x > gesture.hotspot.y
        onStarted: console.log("tap in upper right started")
        onFinished: console.log("tap in upper right completed")
    }
} 
```

在这里查看更多信息： http: [//labs.qt.nokia.com/2010/10/05/getting-in-touch-with-qt-quick-gestures-and-qml/](http://labs.qt.nokia.com/2010/10/05/getting-in-touch-with-qt-quick-gestures-and-qml/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T00:42:08.293

我不清楚你的问题，但看起来你想在 QML 中有鼠标坐标。

如果是这种情况，您可以使用 MouseArea 元素，它具有 mouseX 和 mouseY 属性，您可以使用它们来定位鼠标光标。

当鼠标位置改变时调用 onPositionChanged 处理程序。

```
MouseArea {
     anchors.fill: parent
     onPositionChanged: { 
      //var curMouseX = mouseX 
      //var curMouseY = mouseY 
     }
} 
```

# mysql - mysql GROUP_CONCAT 和 INSERT 到另一个表的问题

> ID：10339542
> 
> 赞同：1
> 
> 时间：2012-04-26T18:48:26.597
> 
> 标签：mysql, insert, group-concat, insert-update

我有一个 MySQL GROUP_CONCAT .... INSERT 问题此代码有效：

```
 SELECT group_concat(tabel2.img_name separator ',') 
    FROM tabel2 
    GROUP BY tabel2.produit_id 
```

我需要将结果插入另一个表，但我被卡住了。

这（或我能想到的任何组合）不起作用

```
 INSERT INTO tabel1.imgname
    SELECT group_concat(tabel2.img_name separator ',') 
    FROM tabel2 
    GROUP BY tabel2.produit_id 
    WHERE tabel1.product_id = tabel2.produit_id 
```

我究竟做错了什么？

```
CREATE TABLE IF NOT EXISTS `tabel1` (
  `product_id` int(11) NOT NULL AUTO_INCREMENT,
  `rubrique_id` int(11) NOT NULL,
  `marque_id` int(11) NOT NULL,
  `subfamily_id` int(11) NOT NULL,
  `product_name` varchar(150) NOT NULL,
  `imgname` varchar(255) DEFAULT NULL,
  `product_description1` text NOT NULL,
  `product_description2` text NOT NULL,
  `product_order` int(11) NOT NULL,
  `product_page` int(11) NOT NULL,
  `price_min` float NOT NULL,
  PRIMARY KEY (`product_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=0;

    INSERT INTO `tabel1` (`product_id`, `rubrique_id`, `marque_id`, `subfamily_id`, `product_name`, `imgname`, `product_description1`, `product_description2`, `product_order`, `product_page`, `price_min`) 
VALUES
(33, 15, 23, 40, 'product 1', NULL, '', '', 0, 0, 0),
(34, 13, 13, 13, 'product 2', NULL, '', '', 0, 0, 0),
(35, 14, 14, 14, 'product 3', NULL, '', '', 0, 0, 0);

CREATE TABLE IF NOT EXISTS `tabel2` (
  `img_id` int(11) NOT NULL AUTO_INCREMENT,
  `img_name` text NOT NULL,
  `article_id` int(11) DEFAULT NULL,
  `produit_id` int(11) DEFAULT NULL,
  `product_select` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`img_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4018 ;

INSERT INTO `tabel2` (`img_id`, `img_name`, `article_id`, `produit_id`, `product_select`) 
VALUES
(4013, 'acoacki086050.jpg', 13342, 33, NULL),
(4014, '32252il6jh2dqex.jpg', NULL, 34, NULL),
(4015, '33265ulrzmgr18w.jpg', NULL, 34, NULL),
(4016, '40334zcfk0c4n67.jpg', NULL, 35, NULL),
(4017, '40473frd4900u82.jpg', NULL, 35, NULL); 
```

所以说 tabel1.product_id = 34 我需要有 tabel1.imgname = 32252il6jh2dqex.jpg,33265ulrzmgr18w.jpg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:51:59.180

我认为这就是你想要做的：

```
INSERT INTO tabel1 (product_id,imgname)
SELECT tabel2.produit_id, group_concat(tabel2.img_name separator ',') as imgname
FROM tabel2 
GROUP BY tabel2.produit_id 
```

**更新**：感谢您发布架构并阐明要求。

这应该适合你：

```
UPDATE tabel1
INNER JOIN 
(
SELECT tabel2.produit_id, group_concat(tabel2.img_name separator ',') AS imgname
FROM tabel2 
GROUP BY tabel2.produit_id 
) s ON s.produit_id = tabel1.product_id
SET tabel1.imgname = s.imgname; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:56:41.803

你描述的是`UPDATE`。不是`INSERT`：

```
UPDATE
    tabel1 AS t1
  JOIN
    ( SELECT produit_id
           , GROUP_CONCAT(img_name SEPARATOR ',') AS grp_img_name
      FROM tabel2 
      GROUP BY produit_id
    ) AS t2
        ON t2.produit_id = t1.product_id
SET
    t1.imgname = t2.grp_img_name ; 
```

* * *

随意吐槽：

为什么，为什么，为什么你有这些`table1`，，，，名字？任何对象（表、列、索引、约束、数据库）的名称都应反映使用情况。什么也没说。除了你不拼写检查你的名字外，什么也没说。`tabel1``tabel2``tableX`
`table1`
`tabel1`

外键约束中使用的列（以及作为连接的结果）具有相同的名称（如果可能）是一种很好的做法。不在`imgname`一张桌子和`img_name`另一张桌子上。不是`produit_id`在一个和`product_id`另一个。它可以帮助您，下一个程序员和试图帮助您解决 SO 的人，不要在编写时出错`ON t2.produit_id = t1.produit_id`。`USING (product_id)`如果您喜欢语法而不是连接的语法，它也会有所帮助`ON`。

（更新）
似乎不同的名称是因为表来自不同的源/数据库，这不是您的选择。如果您有很多工作要做，我建议您将它们更改为具有统一/合理的名称。如果这是一次性工作，只是为了传输/转换一些数据，请不要打扰。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T18:52:40.090

您没有指定要插入的值

```
INSERT INTO tabel1.imgname
SELECT group_concat(tabel2.img_name separator ',') 
FROM tabel2 
GROUP BY tabel2.produit_id 
WHERE tabel1.product_id = tabel2.produit_id
VALUES('','') 
```

ETC

# c - 不能在另一个函数中释放 malloc() 分配的值

> ID：10339547
> 
> 赞同：1
> 
> 时间：2012-04-26T18:48:44.253
> 
> 标签：c, memory-management, buffer-overflow

我有一个 C 函数，如下所示：

```
void foo(char ** out) {
     *out = malloc(computedsize);
     if(*out != NULL){
         sprintf(*out, "%s,%s", foovar, baa);
      }
} 
```

然后我打电话：

```
int main(void) {
   char * out = NULL;
   foo(&out);
   printf("%s\n", out); /* so far, it works fine */
   free(out); /* the problem. */ 
} 
```

当我打电话时：

`free(out);`

它给出了：

```
*** glibc detected *** ./a.out: free(): invalid next size (fast): 0x09a03050 ***
======= Backtrace: =========
/lib/tls/i686/cmov/libc.so.6(+0x6b161)[0x4ff161]
/lib/tls/i686/cmov/libc.so.6(+0x6c9b8)[0x5009b8]
/lib/tls/i686/cmov/libc.so.6(cfree+0x6d)[0x503a9d]
./a.out[0x804875b]
./a.out[0x804871a]
./a.out[0x80486f9]
/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0x4aabd6]
./a.out[0x8048601]
======= Memory map: ======== 
```

//是否需要复制内存映射部分？

有人可以指出我的错误吗？我相信那是`sprintf()`电话.. 或者不是，实际上，我不知道。`*out = myvariable;`我也尝试在函数 alloc 值中为其创建一个新变量，然后调用给出相同`*out = strdup(myvariable)`的错误。`free()`

## 更新

我看到问题出在函数内部。其中的任何`free()`调用都会导致无效的下一个大小。

例如：

```
char *f=malloc(2);
strcpy(f,"a");
free(f); 
```

在`foo()`函数内部，得到上述错误，在`main()`函数上，工作正常。我完全迷失了如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T18:52:36.403

您可能已经超出了分配数组的范围，从而破坏了堆（其中包含`malloc`/`free`用于管理事物的元数据）。

Valgrind 等工具旨在帮助您发现此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:58:34.057

对我有用，但我没有计算大小的 foo 或 baa。我同意您可能已经超出了分配的内存的末尾。

```
#include <stdio.h>
#include <stdlib.h>

#define COMPUTEDSIZE 1024
void foo(char ** out) {
     *out = malloc(COMPUTEDSIZE);
     if(*out != NULL){
         sprintf(*out, "%s,%s", "foo", "baa");
      }
}
int main(int argc, char * argv[]) {
   char * out = NULL;
   foo(&out);
   printf("%s\n", out); /* so far, it works fine */
   free(out); /* the problem. */ 
   exit(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:51:17.257

解决方案：

实际上，问题出在之前的. 一个`malloc()`if() 声明调用另一个函数`malloc()`，但`if()`内部调用的函数没有按预期工作，因此存储了一些无效值。这导致了堆损坏。

# arrays - 从没有重复的数组中选择随机元素？

> ID：10339551
> 
> 赞同：1
> 
> 时间：2012-04-26T18:49:11.757
> 
> 标签：arrays, actionscript-3, flash, flash-cs5, shuffle

编辑：我不敢相信我没有早点发现这个。原来我的问题是一遍又一遍地重新声明我的第一个变量，基本上是重新启动程序而不是继续它。为了解决这个问题，我将前两行替换为：

```
if (initialized === undefined) {
    trace("INITIALIZING");
    var MCs = [];
    var lastPos = "intializer";
    var initialized = 1;
} 
```

现在它就像一个魅力。对于这个，我觉得自己像个菜鸟；对不起任何我浪费时间的人。我会将其发布为我自己问题的答案，但由于我还是新手，它不会让我这样做。

* * *

## 原帖如下：

我正在尝试制作一个随机选择一个广告，播放它，然后随机播放另一个的 Flash。为此，我成功地改组了一个数组，然后`gotoAndPlay`在数组的第一个元素中添加标签，然后删除该元素。在每个广告的末尾，`gotoAndPlay(1);`所有主要代码都在第一帧上。如果数组是空的，它会重建它并重新洗牌。

问题是，我不希望它重复任何广告，直到它贯穿所有广告；我*想*我已经明白了，但我并不积极。此外，我不希望数组中的最后一个元素与新元素中的第一个元素相同，因此同一广告不会连续显示两次。我试图让它检测它刚刚使用的元素是否与它即将使用的元素匹配，如果发生这种情况则重新洗牌，但在我的测试中，它偶尔会连续两次显示相同的广告。

我显然做错了什么，但是对于 ActionScript3 （实际上是 flash）是全新的，我在识别它是什么时遇到了很多麻烦。这是我现在拥有的：

```
var MCs = [];
var lastPos = "intializer";

if (MCs.length == 0) {
    MCs = reset();
    if (lastPos == MCs[0]) {
        while (lastPos == MCs[0]) {
            MCs = reset();
        }
    }
}
if (MCs.length > 0) {
    lastPos = MCs[0];
    MCs.splice(0,1);
    gotoAndPlay(lastPos+"MC");
}

function reset(){
    var PrepMCs = new Array("Image1", "Image2", "Image3");
    var WorkMCs = new Array(PrepMCs.length);

    var randomPos:Number = 0;
    for (var i:int = 0; i < WorkMCs.length; i++)
    {
        randomPos = int(Math.random() * PrepMCs.length);
        WorkMCs[i] = PrepMCs.splice(randomPos, 1)[0];
    }
    return WorkMCs;
} 
```

就个人而言，我宁愿只用 JavaScript、HTML 和图像来做这件事；这真的很简单。但出于托管/CMS 的原因，我无法控制，我仅限于单个文件或单个代码块；我不能在外部托管任何东西，据我所知，Flash 是我最好的选择。

任何帮助将不胜感激，谢谢！如果我做了什么可怕的、可怕的错误的事情，这甚至是一个奇迹，请不要犹豫告诉我！

编辑：我刚刚想到，如果第二次运行的顺序与第一次运行的顺序相同，则完全没问题，等等。主要的是，它需要是随机的。这可能更容易实现。

编辑 2：这里有大量的 DERP。每次它运行时，它都会重新初始化`MCs`并且`lastPos`......换句话说，它每次都在洗牌并重新开始。我应该研究的是如何在变量尚未初始化的情况下只运行一行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:17:18.453

公然从@32bitKid 窃取，这是我的版本。

我对他的解决方案的主要问题是推送/拼接的想法。尽可能地，我喜欢创建一次，然后重复使用。即使有效，缩小和增长的阵列也很庞大。

此外，此方法不会重新排序数组，这可能有价值，也可能没有价值。

顺便说一句，我喜欢他防止重复上一项（“几乎是空的”）的方式。

所以这里有另一种方法：

```
package
{

    public class RandomizedList
    {
        private var _items:Array;
        private var idxs:Array;
        private var rnd:int;
        private var priorItemIdx:int;
        private var curIdx:int;

        public function RandomizedList(inarr:Array)
        {
            items = inarr;
        }

        private function initRandomize():void
        {
            idxs = new Array();

            //Fisher-Yates initialization (http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle):
            idxs[i] = 0;
            for (var i:int = 1; i < items.length; i++)
            {
                rnd = int(Math.random() * (i + 1));
                idxs[i] = idxs[rnd];
                idxs[rnd] = rnd;
            }

            curIdx = 0;
            priorItemIdx = -1;
        }

        private function randomize():void
        {
            var tempint:int;
            //Fisher-Yates (http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle):
            for (var i:int = items.length; i >= 1; i--)
            {
                rnd = int(Math.random() * (i + 1));
                tempint = idxs[i];
                idxs[i] = idxs[rnd];
                idxs[rnd] = tempint;
            }

            curIdx = 0;
        }

        public function next():void
        {
            if (curIdx >= idxs.length)
            {
                randomize();
            }

            if (items.length > 1 && priorItemIdx == idxs[curIdx])
            {
                curIdx++;
            }

            priorItemIdx = idxs[curIdx++];
            return items[priorItemIdx];
        }

        public function get items():Array
        {
            return _items;
        }

        public function set items(value:Array):void
        {
            _items = value;
            initRandomize();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:34:51.947

我会使用这样的实用程序类来抽象出我想要的行为：

```
import flash.text.TextField;

class Randomizer {

    private var unused:Array = [];
    private var used:Array;

    public function Randomizer(playList:Array) {
        used = playList;
    }

    public function next():* {
        // If almost empty, refill the unused array
        if(unused.length <= 1) refill();

        // Get the first item off the playList
        var item:* = unused.shift();

        // Shove it into the bucket
        used.push(item); 

        // return it back
        return item;
    }

    public function refill():void {
        var i:int;
        // Fisher-Yates shuffle to refill the unused array
        while(used.length > 0) {
            i = Math.floor(Math.random() * used.length)
            unused.push(used.splice(i,1)[0])
        }
    }
} 
```

请注意，`unused`当`unused`数组中仍有一项时，它会重新填充数组，这使得最后一个结果不可能连续重复两次。这将在循环之前返回每个项目一次，并且永远不会重复相同的项目两次。

您可以通过以下方式使用它：

```
var ads:Randomizer = new Randomizer(["Image1", "Image2", "Image3"]);
ads.next(); // will return something
ads.next(); // will return something
ads.next(); // will return something
ads.next(); // will return something
// Keep going into infinity... 
```

此代码有一个小测试示例在[这里](http://wonderfl.net/c/aACx)工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T19:23:34.017

看看这是否有意义

```
//create your array of all your ad names/frame labels
var PrepMCs:Array = new Array("Image1", "Image2", "Image3");

var shuffledMCs:Array = [];

//store the name of the last played ad in this var
var lastAdPlayed:String;

//shuffle the array
shuffleArray(PrepMCs);

function shuffleArray(arrayToShuffle:Array):void {  
//clear the array
shuffledMCs = [];

var len:int = arrayToShuffle.length;

for(var i:int = 0; i<len; i++) {
shuffledMCs[i] = arrayToShuffle.splice(int(Math.random() * (len - i)), 1)[0];
}

//test to see if the new first ad is the same as the last played ad
if (lastAdPlayed == shuffledMCs[0]) {
//reshuffle
    shuffleArray(PrepMCs);
} else {

lastAdPlayed = [0];

trace(shuffledMCs);

playAds();
}    

}

//after each ad has played, call this function
function playAds():void {

if (shuffledMCs.length > 0) {

    gotoAndPlay(shuffledMCs[0]);
    shuffledMCs.splice(0,1);

} else {
    //array is empty so we have played all the ads
    shuffleArray(PrepMCs);
}

} 
```

# javascript - 在初始化另一个函数或动画之前，如何确保动画完成？

> ID：10339554
> 
> 赞同：1
> 
> 时间：2012-04-26T18:49:14.007
> 
> 标签：javascript, function, animation, raphael, settimeout

所以在这里，我有一系列使用 Raphael 的动画：

1.  淡入曲线
2.  淡入球 1
3.  动画球 1
4.  淡入球 2
5.  动画球 2

但是，使用我的代码，步骤 4-5 会启动，而步骤 2-3 仍在动画中。如何确保在 1-3 的动画完成后启动第 4 步和第 5 步？我尝试在我的第二个函数（ball2）上使用 setTimeout，但没有运气。

[在 JSFiddle](http://jsfiddle.net/DnQtW/)或此处查看：

```
Raphael("bounce", 640, 480, function () {
               var r = this,
                p = r.path("M0,77.255c0,0,269.393,37.431,412.96,247.653 c0,0,95.883-149.719,226.632-153.309").attr({stroke: "#666", opacity: 0, "stroke-width": 1}),
                len = p.getTotalLength(),
            e = r.circle(0, 0, 7).attr({stroke: "none", fill: "#000", opacity:0}).onAnimation(function () {
                    var t = this.attr("transform");
                });
             f = r.circle(0, 0, 7).attr({stroke: "none", fill: "#000",opacity:0}).onAnimation(function () {
                    var t = this.attr("transform");
               });
            r.customAttributes.along = function (v) {
                var point = p.getPointAtLength(v * len);
                return {
                    transform: "t" + [point.x, point.y] + "r" + point.alpha
                };
            };
            e.attr({along: 0});
            f.attr({along: 0});

            var rotateAlongThePath = true;
            function fadecurve(ca,ba,aa,ab){
                ca.animate({opacity:1},500);
                setTimeout(function(){fadeball(ba,aa,ab);
                },1000);
            }
            function fadeball(ba,aa,ab) {
                   ba.animate({opacity:1},400);
                   setTimeout(function(){run(ba, aa,ab);
                   },1000);
            }
            function run(ba,aa,ab) {
                   ba.animate({along: aa}, ab, ">", function () {
                    ba.attr({along: aa});
                });
            }
            function startbounce() {
                fadecurve(p,e,.9,400),
                setTimeout(function(){fadeball(f,.8,400);
                    },1000);
            }
            startbounce();
        }); ​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:12:25.707

根据 Raphael 的文档，animate 方法采用回调方法作为它的第四个参数。该方法可用于启动序列中的下一个动画（或在第三个动画之后）。

```
 function fadecurve(ca,ba,aa,ab){
        ca.animate({opacity:1},500,,function(){fadeball(ba,aa,ab);});
    } 
```

例如。

# c# - 在我的应用程序中调用 urlbuilder.Buildurl 时遇到问题

> ID：10339559
> 
> 赞同：0
> 
> 时间：2012-04-26T18:49:23.860
> 
> 标签：c#, winforms, url

我试图让用户在我的 WinForms 应用程序中使用 GUI 构建 URL。我遇到了 Urlbuilder.Buildurl。它似乎提供了我需要的东西。

[http://msdn.microsoft.com/en-us/library/ms154075%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms154075%28v=vs.80%29.aspx)

```
// Launch the Url Builder using the specified control
// parent, initial URL, empty relative base URL path,
// window caption, filter string and URLBuilderOptions value. 
```

不幸的是，提供的示例甚至无法编译。

this.Component 是未知成员。

有没有人使用过这个，如果有的话，有什么我缺少的建议吗？

我应该只创建自己的对话框并使用 System.UriBuilder(...) 吗？

-- 编辑 -- 这*是*在一个表单类中。我*确实*根据文档引用了 System.Design。

this.Component 不是 Form 类的成员。

-- 编辑 --
当您在项目中选择 URL（例如超链接 URL 或图像 URL）时，这个小虫子是 Visual Studio 使用的内部编辑器。不是我想要的。是时候建立那个对话框了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:07:32.683

为了编译它，您需要从表单类中调用它。

# jquery - 获取 json 数据 - jquery

> ID：10339562
> 
> 赞同：0
> 
> 时间：2012-04-26T18:49:36.563
> 
> 标签：jquery

我无法通过

```
 jQuery.parseJSON(myArr);
              $.each(myArr, function(key, value) { 
  alert(key + ': ' + value); 
}); 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:52:49.217

您需要捕获 parseJSON 方法的返回。

```
jQuery.parseJSON(myArr); 
```

应该读

```
myArr = jQuery.parseJSON(myArr); 
```

否则，您将一个字符串传递给 $.each 方法。

# image - MIME 类型警告导致网站图像损坏

> ID：10339563
> 
> 赞同：3
> 
> 时间：2012-04-26T18:49:36.620
> 
> 标签：image, mime-types

这是一个有问题的示例页面：

[http://estorkdelivery.com/template/view/69](http://estorkdelivery.com/template/view/69)

我们的网站提供模板预览。一旦您输入文本信息并从字段中跳出标签，该网站就会提供图像的更新预览，并将文本添加到字段中。

当服务器返回此图像时：

> [http://estorkdelivery.com/file/preview/verify_token:149505eb811f8856a12ec6e71e2932f082a97edf](http://estorkdelivery.com/file/preview/verify_token:149505eb811f8856a12ec6e71e2932f082a97edf)

它在我的控制台中显示以下消息：

> 资源解释为图像，但使用 MIME 类型 text/html 传输：[http ://estorkdelivery.com/file/preview/verify_token:149505eb811f8856a12ec6e71e2932f082a97edf](http://estorkdelivery.com/file/preview/verify_token:149505eb811f8856a12ec6e71e2932f082a97edf)

试图涵盖所有基础，我已经验证服务器设置了以下 MIME 类型：

> 应用程序/x-javascript .js
> 
> 图片/jpeg jpeg jpg jpe
> 
> 图片/png

我不确定为什么会这样。我想知道是否有人可以帮助我解决问题。有任何想法吗？

谢谢！

**2012 年 4月 27 日更新**- 我的问题已被标记，但我已经对这个问题进行了研究。如果这个问题不值得回答，是否有人至少可以指出我需要继续进行故障排除的方向？我不会轻易提出问题，而且我在 StackOverflow 上阅读了很多类似的问题，发现自己仍然遇到同样的问题。没有礼貌的解释就被降价是令人沮丧的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:04:51.687

老实说，我不认为这是服务器设置问题。当您的 AJAX 请求返回时`verify_token`，我可以使用它从您的服务器获取图像。然后，使用 JavaScript，我可以在页面上显示新的预览。

这部分看起来很奇怪：

```
new $._iframeUpload(form, {
  success: function(response)
  {
    $('.preview').attr('src', 'http://estorkdelivery.com/file/preview/verify_token:' 
        + response.verify_token);
    var image = new Image();
    image.src = 'http://estorkdelivery.com/file/preview/verify_token:' 
        + response.verify_token;
    image.onload = function()
    {
      $queue--;
      if ($queue <= 0)
        $('.updating').hide();
    };
  }
}); 
```

我真的不明白为什么在编辑标签*后会创建一个 Image 对象。*`img`我会将您的 JavaScript 更改为如下所示（以便`onload`回调起作用）：

```
new $._iframeUpload(form, {
  success: function(response)
  {
    var image = new Image();
    image.onload = function()
    {
      $('.preview').attr('src', image.src);
      $queue--;
      if ($queue <= 0)
        $('.updating').hide();
    };
    image.src = 'http://estorkdelivery.com/file/preview/verify_token:' 
        + response.verify_token;
  }
}); 
```

试试看，告诉我它是否有帮助。

### 小怪癖

这并不是真正回答您的问题，但它会影响整个图像加载过程的工作方式。您的预览是 700 x 500，但您从服务器返回的新预览是 2900 x 2100！这使您的 AJAX 加载时间比初始页面加载时间长得多。您可能会考虑在服务器端缩小它的大小，然后将其传输到浏览器。

# javascript - Javascript：在重定向时清除缓存

> ID：10339567
> 
> 赞同：4
> 
> 时间：2012-04-26T18:49:44.297
> 
> 标签：javascript, caching, cookies

我可以`location.reload(true)`用来刷新页面并重新获取页面。我想将用户重定向到一个新的 URL 并清除缓存。

更具体地说，我有一个“清除所有 cookie”按钮，可在点击后将用户重定向到主页。我希望刷新主页。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T18:53:27.090

执行以下操作：

```
var loc = window.location.href; // or a new URL
window.location.href = loc + '?n=' + new Date().getTime(); // random number 
```

**编辑：**重新加载静态资源的唯一选择（请参阅下面的评论）是通过侦听“n”查询字符串将随机数附加到其 URL 服务器端。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-26T18:51:19.863

抱歉，您[无法](https://stackoverflow.com/a/1011617/339852) 使用 Javascript[清除](http://www.tek-tips.com/viewthread.cfm?qid=1221243) [缓存。](http://www.dynamicdrive.com/forums/showthread.php?t=26659)

# javafx - 运行 dll 方法 Javafx

> ID：10339570
> 
> 赞同：1
> 
> 时间：2012-04-26T18:50:06.197
> 
> 标签：javafx, java-native-interface, unsatisfiedlinkerror, native-methods

我有可以使用 JNI 从 Java 调用的 C 程序 (Dll)。我想为接口使用 Javafx，所以我创建了一个 java 类来调用 dll。我能够加载 dll，但我无法调用该方法。它给我的错误信息是

```
java.lang.UnsatisfiedLinkError: 
mark1.Small_test.tester(DDDLjava/lang/String;Ljava/lang/String;Ljava/lang/String;DDD)[D
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 
```

我使用了相同的 Dll，如果我用普通的 java 调用它就可以工作。我正在为 JavaFX 使用 netbeans。我已经被这个问题困扰了一周。任何帮助是极大的赞赏。

# box-api - 如何为我的应用程序添加事件通知

> ID：10339574
> 
> 赞同：1
> 
> 时间：2012-04-26T18:50:16.073
> 
> 标签：box-api

事件[通知 Wiki 页面](http://developers.box.net/w/page/51897545/Event%20Notifications "事件通知 Wiki 页面")告诉您单击编辑您的应用程序，然后显示屏幕截图并告诉您单击事件通知标题下的“创建新事件通知”。

当我查看我的应用程序的事件通知标题时，它只显示“未添加事件通知”并且没有可点击的链接“创建新事件通知”，如 wiki 页面上的屏幕截图所示。

当该链接未显示时，如何添加事件通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:00:28.693

事件通知目前处于测试阶段，需要我们团队中的某个人为您的 Box API 密钥手动启用。请通过 API[at]boxDOTcom 向我们发送一封电子邮件，并附上您的用例，我们将看看能否让您进入测试版。

# algorithm - 删除最小权重边以断开一组节点

> ID：10339576
> 
> 赞同：1
> 
> 时间：2012-04-26T18:50:24.677
> 
> 标签：algorithm, graph

问题是给定一个加权边双向图，通过删除给定节点集彼此断开的边来找到边集。而且这些边缘权重的总和应该是最小的。这个问题有名字吗？有什么特定的算法可以解决它们吗？我知道这一定是NP完全问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:19:50.553

如果您只想找到一个将图形分成两部分的最小权重削减，这可以通过运行最大流量/最小削减算法（例如 Edmonds 算法）来完成。您只需修复一个顶点，然后找到它与所有其他 |V|-1 个顶点的最小切割，最后在所有切割中输出最小切割。请注意，您的固定顶点应位于组件之一中。为了在无向图上运行最大流/最小切割算法，只需将每条边绘制到两个方向。该算法导致运行最大流算法 * O(|V|)。

但是，如果您的问题是如何将图划分为具有最小权重削减的 k 个连通分量，这就是 NP-Hard 问题。

# jquery - 调用 jQuery $.Deferred .state() 方法正在启动返回 done() 方法

> ID：10339579
> 
> 赞同：0
> 
> 时间：2012-04-26T18:50:36.503
> 
> 标签：jquery, ajax, jquery-deferred, deferred

我正在对一个应用程序进行一些测试，我意识到在 Deferred 对象上调用 .state() 似乎会一次又一次地启动 .done() 回调。

我在这里制作了一个简化的测试用例

[http://jsfiddle.net/vaxilart/ajeGm/](http://jsfiddle.net/vaxilart/ajeGm/)

我想知道这是正常行为还是我误解了什么。

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:04:10.673

你是 jsfiddle 并没有展示你想要的东西。您不是重新执行匿名 IIFE，而是一遍又一遍地重新执行全局范围内的所有代码，包括 resolve()。我认为小提琴的修改版本说明调用 .state() 只会返回状态。

[http://jsfiddle.net/ajeGm/4/](http://jsfiddle.net/ajeGm/4/)

# java - 如何在 Servlet 上检索字符串作为 Multipart Post 的一部分发送

> ID：10339587
> 
> 赞同：2
> 
> 时间：2012-04-26T18:51:20.430
> 
> 标签：java, servlets, file-upload

这可能是一个非常简单的问题，但我已经环顾了一段时间。我正在向 Tomcat 7 上的 Java Servlet 发送两个字符串。

```
multipartContent.addPart("destadd", sb1);
multipartContent.addPart("destfilename", sb2); 
```

我正在尝试像这样检索这些字符串

```
String destFileName = request.getPart("destfilename").getName(); 
```

但在静脉中。我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T18:01:17.253

差不多跑了两天，终于找到答案了

```
Part destFileNamePart = request.getPart("destfilename");
Scanner s = new Scanner(destFileNamePart.getInputStream());
String destFileName = s.nextLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-07T12:52:42.153

有点晚了，但可能对其他人有帮助：

```
IOUtils.toString( destFileNamePart.getInputStream() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:03:49.780

您是否看过[Get form parameters from multipart request without getting the files](https://stackoverflow.com/questions/1748259/get-form-parameters-from-multipart-request-without-getting-the-files)。

[您还可以在此处使用](http://www.servlets.com/cos/)[O'Reilly MultipartRequest](http://www.servlets.com/cos/javadoc/com/oreilly/servlet/MultipartRequest.html)等实用程序类和更多信息

# jquery - jQuery Mobile 固定工具栏在滚动时淡出

> ID：10339590
> 
> 赞同：1
> 
> 时间：2012-04-26T18:51:25.583
> 
> 标签：jquery, jquery-mobile

我试图在固定标题功能方面模仿以下页面。 [http://jquerymobile.com/demos/1.0.1/docs/toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.0.1/docs/toolbars/bars-fixed.html)

但是，随着 jquerymobile 的较新版本，我相信他们删除了滚动上的淡入/淡出功能。

新的 jquerymobile 版本有没有办法模仿这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:05:20.767

如果您正在使用`data-position="fixed"`工具栏，那么您应该能够`data-attributes`在标签中添加一对以允许“切换”工具栏：

```
<div data-role="footer" data-tap-toggle="true" data-transition="fade">
    ...
</div> 
```

文档：http: [//jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed-options.html](http://jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed-options.html)

这将适用于水龙头，滚动我相信你必须使用自己的事件处理程序：

```
//when a user starts to scroll, hide the toolbar(s)
$(window).bind('scrollstart', function () {
    $.mobile.activePage.children("[data-position='fixed']").fixedtoolbar('hide');

//when a user stops a scroll, show the toolbar(s)
}).bind('scrollstop', function () {
    $.mobile.activePage.children("[data-position='fixed']").fixedtoolbar('show');
}); 
```

这是一个演示：http: [//jsfiddle.net/BCTpK/](http://jsfiddle.net/BCTpK/)

制作完演示后，我意识到设置超时以使`scrollstart`and`scrollstop`事件不会频繁触发是个好主意：

```
var timer = null;

//when a user starts to scroll, hide the toolbar(s)
$(window).bind('scrollstart', function () {
    clearTimeout(timer);
    timer = setTimeout(function () {
        $.mobile.activePage.children("[data-position='fixed']").fixedtoolbar('hide');
    }, 100);

//when a user stops a scroll, show the toolbar(s)
}).bind('scrollstop', function () {
    clearTimeout(timer);
    timer = setTimeout(function () {
        $.mobile.activePage.children("[data-position='fixed']").fixedtoolbar('show');
    }, 100);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:34:55.913

您想将此行为用于工具栏吗？

然后你也可以检查JQM 1.1。[发行说明](http://jquerymobile.com/blog/)，它包含一个指向 polyfill 的链接，以使用旧的固定工具栏行为。

这是[预览 URL](http://filamentgroup.github.com/jQuery-Mobile-FixedToolbar-Legacy-Polyfill/)和[Github](https://github.com/filamentgroup/jQuery-Mobile-FixedToolbar-Legacy-Polyfill) repo

如果您想将行为用于其他一些元素（页眉/页脚任何您喜欢的元素），我从 polyfill 中获取了一个函数来重新定位 show() 并像这样使用它：

```
// reposition before showing - based on JQM fixedtoolbar polyfill   
var $popPanel = YOUR_ELEMENT(S) to be repositioned
$popPanel.jqmData("fixed") == "top" ? 
    $popPanel.css( "top", $( window ).scrollTop() + "px" ) :
        $popPanel.css( "bottom", $wrap.outerHeight() - $( window ).scrollTop() - $.mobile.getScreenHeight() + "px" ); 
```

这将重新定位您需要添加的元素*data-fixed="top/bottom"*。

要过渡到我正在使用的元素：

```
// show $popPanel
$popPanel
    // add transition class - this is using slide
    .addClass('in')
    .show('fast')
// clean up
window.setTimeout( function() {
    $popPanel.removeClass('in');
    }); 
```

我喜欢 JQM 1.0 中的这个功能，但我认为 polyfill 更好，因为我只使用这个片段而不是需要完整的 old-fixed-toolbars 处理程序。

# python - 在 Python 中为启用了真正除法的 datetime 模块计算 total_seconds

> ID：10339593
> 
> 赞同：9
> 
> 时间：2012-04-26T18:51:40.253
> 
> 标签：python, datetime

我正在尝试对日期进行一些计算，我有一个`timedelta`对象，并且我想获得秒数。它似乎`dt.total_seconds()`完全符合我的需要，但不幸的是它是在 Python 2.7 中引入的，我坚持使用旧版本。

如果我阅读[官方文档](http://docs.python.org/library/datetime.html#datetime.timedelta.total_seconds)，它会说明以下内容：

> 返回持续时间中包含的总秒数。等价于 (td.microseconds + (td.seconds + td.days * 24 * 3600) * 10**6) / 10**6 计算**启用真除法**。

在查看了`datetime`模块的源代码（在 C 中）之后，我看到了这样的内容：

```
total_seconds = PyNumber_TrueDivide(total_microseconds, one_million); 
```

因此，虽然 的计算`total_seconds()`似乎微不足道，但这让我想知道这个**真正的除法**实际上意味着什么。我找不到有关该主题的任何信息。如果我只使用常规除法会发生什么，为什么我们需要这种真正的除法，它有什么作用？我可以`total_seconds()`用文档中给出的等价物用 Python 编写吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T18:56:26.820

使用真正的除法，`1 / 2`将导致`0.5`. Python 2.x 中的默认行为是使用整数除法，这`1 / 2`将导致`0`. 以下是[文档](http://docs.python.org/reference/expressions.html#binary-arithmetic-operations)的解释：

> 普通或长整数除法产生相同类型的整数；结果是数学除法的结果，“地板”函数应用于结果。

要在 Python 2.2 或更高版本上启用真正的除法（在 Python 3.x 上不是必需的），您可以使用以下命令：

```
from __future__ import division 
```

或者，您可以将其中一个参数设为浮点数以获得相同的行为：

```
(td.microseconds + (td.seconds + td.days * 24 * 3600) * 10**6) / 10.0**6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T22:41:15.773

无论如何，当您在代码中使用数字时，最简单的方法是在第一个除法上使用浮点数。

如果您使用 10.0**6，您的结果将是一个浮点数，这意味着公式中的所有其他数字也将是浮点数，这会导致“真正的除法”。

# spring - VMware vFabric 服务器超时

> ID：10339597
> 
> 赞同：7
> 
> 时间：2012-04-26T18:51:55.160
> 
> 标签：spring, timeout, vmware

所以，我已经下载了一个 Spring Tool Suite，当我想启动 VMware vFabric tc Server 时，我收到以下消息：

> Server VMware vFabric tc Server Developer Edition v2.6 无法在 120 秒内启动。如果服务器需要更多时间，请尝试在服务器编辑器中增加超时。

谁能告诉我在哪里可以更改这个允许我启动服务器的参数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T18:58:04.630

在 Eclipse 的 Servers 视图中，双击 Server 名称，这将打开一个编辑器，有一个 Timeouts 部分，增加 Start 的值。

# php - 函数正在将数组从数字更改为关联

> ID：10339598
> 
> 赞同：1
> 
> 时间：2012-04-26T18:51:57.167
> 
> 标签：php, arrays, json

这应该采用任何`ing_name`重复的行，组合`eff_name`字段并删除重复项，但它也具有将数组从数字更改为关联的副作用。我的 ajax 期待数字数组。

```
for($i=count($recipe)-1; $i>0; $i--) {
    if($recipe[$i]['ing_name'] == $recipe[$i-1]['ing_name']) { //check for duplicate. **array must be sorted by ing_name**
        $recipe[$i-1]['eff_name'] .= ', '.$recipe[$i]['eff_name']; //Combine eff_name of duplicates
        $recipe[$i-1]['link'] = true;
        unset($recipe[$i]); //remove duplicate index
    }
} 
```

示例：[NUM](http://tidehousedesign.com/alchemy/php/alchemy.php?json&eff=damage%20magicka) , [ASSOC](http://tidehousedesign.com/alchemy/php/alchemy.php?json&eff=damage%20magicka,%20damage%20magicka%20regen)

[来源](https://github.com/Tidehouse/Alchemy)

编辑：所以我认为它必须与取消设置索引有关，所以我这样做了，它似乎工作正常：

```
$newRecipe = array();
foreach($recipe as $r) {
    $newRecipe[] = $r;
} 
```

新问题，有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:01:13.327

`unset`使用命名键。您可以[`array_splice`](http://www.php.net/manual/en/function.array-splice.php)改用，或者在循环之后获得一个全新的数组[`array_values`](http://php.net/array_values)（但这会很丑！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:02:02.480

[array_values()](http://php.net/manual/en/function.array-values.php)将返回一个数字索引数组

# javascript - 更改绘制谷歌地图的div的高度

> ID：10339600
> 
> 赞同：2
> 
> 时间：2012-04-26T18:52:02.860
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用 Google Mpas Api v3 在 200px 高的 div 中显示地图：

```
<div id='propertyKaart'></div> 
```

使用普通的 javascript，我使用这个 div 来显示地图：

```
$(document).ready(function(){
        var map = new google.maps.Map(document.getElementById("propertyKaart"),
                    mapOptions);
                    map.setCenter(punt);
                    map.setZoom(14);
}) 
```

单击带有类的按钮，`.mapPuller`我想将图表的高度更改为 600px：

```
var mapState        
$('.mapPuller').click(function(e){
        if(mapState == 'klein'){
            $('#propertyKaart').animate({height: '600px'}, 200);
            mapState = 'groot'

        }else{
            $('#propertyKaart').animate({height: '200px'}, 200);
            mapState = 'klein';

        }
         //---- here
    }) 
```

像魅力一样工作，只有一个问题。地图（可以说是瓷砖）仍然认为 div 高 200px。

在[文档](https://developers.google.com/maps/documentation/javascript/reference#Map%22documentation%22) 中，我发现更改容器 div 时必须触发调整大小事件。于是我当场在.mapPuller函数中添加了如下代码`//------ here`。

```
google.maps.event.trigger(map, 'resize'); 
```

**但这不起作用......我错过了什么吗？**

当我调整浏览器窗口的大小时，事件被触发并且图块似乎完成了它们的工作.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:09:45.493

我尝试使用 jquery 的`animate`函数调整地图的大小，但遇到了同样的问题。地图图块不适应。但是触发地图`resize`事件解决了这个问题。

所以，范围界定可能存在问题。确保该`map`变量可在`mapPuller`函数内部访问，并确保控制台中没有其他错误。

# java - Maven：更新了 pom 中的 struts 版本，现在我遇到了一个奇怪的错误

> ID：10339602
> 
> 赞同：0
> 
> 时间：2012-04-26T18:52:20.903
> 
> 标签：java, struts2, maven-3

我将使用 struts 2.2.3.1 的项目更新为 pom.xml 文件中的 2.3.1.2。运行 maven 后，它从 repo 中获取了 jar 和所有这些，并构建了包。但是，当我运行 webapp 时，我收到了这个错误：

> 2012-04-26 13:42:06,300 错误 org.apache.struts2.dispatcher.Dispatcher.error:38 - 调度程序初始化失败无法加载配置。- bean - jar:file:/Library/Tomcat/apache-tomcat-6.0.35/webapps/idmadmin/WEB-INF/lib/struts2-core-2.3.1.2.jar!/struts-default.xml:29:72 ......

我在想也许旧的可能仍然停留在类路径中，但我没有看到。

# c++ - 多态性误解/重新定义的虚函数不起作用

> ID：10339612
> 
> 赞同：0
> 
> 时间：2012-04-26T18:52:59.087
> 
> 标签：c++, inheritance, polymorphism

我认为我应该从简化我的类结构开始，以便更好地解释我的问题，我怀疑这可能只是对使用 virtual 的误解。

我有：

```
class Controller{
..
    virtual void InitialiseController(){ //std::cout confirms this is running }
..
}

class AIController : public Controller{
..
    virtual void InitialiseController(){ //some logic here }
..
}
class ComController : public AIController{
..
    virtual void InitialiseController(){ //actually the same logic as parent }
..
} 
```

我的对象 Snake 有一个指向 Controller 的指针`(Controller* _controller)`。当我调用该`snake.initialise(..)`方法时，我向它传递了一个新的 ComController 对象，该对象然后将蛇 _controller 设置为等于新的 ComController。我知道这个过程很成功。

但是当我随后调用`_controller.InitialiseController();`我的调试器时，会显示程序步骤进入基类 Controller 的 InitialiseContoller 的空白实现。

我知道我可能过于简单化了，您可能无法提供帮助，但我认为这可能是我对整个概念的不理解，一个逻辑错误，而不是一个输入错误，并想检查一下。

**附加代码：**

```
_player2->Initialise(_gameProperties, &_fruitManager, new ComController(_player2), _player1); 
```

踏入..

```
void Snake::Initialise(
   GamePropertiesManager* gpm, FruitManager* fm, Controller* control, Snake* opposingSnake)
{
   _game = gpm;
   _fruitManager = fm;
   _controller = control;
   _opposition = opposingSnake;

   if(_controller){

           ///Bunch of stuff in here runs just fine

      // This primarily serves to ensure that a ComControllers timer is started, but other controllers might wish to override initialise later
      _controller->IntialiseController();

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:07:58.613

我真的没有看到你正在做的事情有什么问题（至少就理解和使用虚拟方法而言）。

这是一个完整的例子。请与您的代码进行比较。

```
#include <stdio.h>

class Controller{
public:
    virtual void InitialiseController(){
      printf ("base class controller...\n");
    }
};

class AIController : public Controller{
public:
    virtual void InitialiseController(){
      printf ("AIController subclass controller...\n");
    }
};

class ComController : public AIController{
public:
    virtual void InitialiseController(){
      printf ("ComController subclass controller...\n");
    }
};

int main (int argc, char *argv[])
{
   Controller *myController = new ComController ();
   myController->InitialiseController ();
   return 0;
} 
```

编译： `g++ -Wall -pedantic -o tmp tmp.cpp`

执行： `ComController subclass controller...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:29:34.827

我认为您是直接在对象上调用虚拟方法。只有当您通过指针或引用调用时，多态才会发挥作用。

编辑：你写两个`_controller.InitialiseController();`和`_controller->InitialiseController();`（以前有吗？），所以我不完全确定你在做什么。

# c# - Linq 查询到 Lambda 表达式

> ID：10339617
> 
> 赞同：1
> 
> 时间：2012-04-26T18:53:28.723
> 
> 标签：c#, linq, lambda

我一直在尝试为此使用 lambda：

```
var y = from r in rs.Returns from z in r.Tags where z.Name.Contains(c) select r; 
```

我试过`var r = rs.Returns.Where(x=>x.Tags.Where(x=>x.Name.Contains(c)));`了，但没有用。什么是正确的 lambda，所以我不必使用`y`&`z`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T18:55:58.143

您需要`SelectMany`翻译第二个“from”子句：

```
var y = rs.Returns
          .SelectMany(r => r.Tags, (r, z) => new { r, z })
          .Where(pair => pair.z.Name.Contains(c))
          .Select(pair => pair.r); 
```

这是一个非常直接的翻译。另一种选择是使用：

```
var y = rs.Returns.Where(r => r.Tags.Any(z => z.Name.Contains(c))); 
```

# r - ggplot 0.9.0 中 scale_datetime() 的适当时区参数语法是什么

> ID：10339618
> 
> 赞同：3
> 
> 时间：2012-04-26T18:54:00.023
> 
> 标签：r, datetime, timezone, ggplot2

我似乎无法在 ggplot2 [0.9.0 文档](http://had.co.nz/ggplot2/docs/)、0.9.0 过渡指南或搜索中找到信息。

我猜在早期版本中，您会将`tz`参数添加到`scale_x_datetime`. 我试过将`tz`论点放在不同的地方，`scale_x_datetime`但不断出错。见下文。

我的日期时间数据`POSIXct`采用 GMT 时区格式。当我绘制它时，轴刻度和中断显示我的本地时区（EST）。我希望轴上的午夜是 GMT 时区的午夜。在 ggplot2 0.9.0 中执行此操作的正确方法是什么？

```
attributes(data$date)
# $class
# [1] "POSIXct" "POSIXt" 

# $tzone
# [1] "GMT"

ggplot(data, aes(x = date)) +
  geom_line(aes(y = count)) +
  scale_x_datetime(breaks = date_breaks("1 day"),
                   labels = date_format("%d", tz = "UTC"))
# Error in date_format("%d", tz = "UTC") : unused argument(s) (tz = "UTC")

ggplot(data, aes(x = date)) +
  geom_line(aes(y = count)) +
  scale_x_datetime(breaks = date_breaks("1 day", tz = "UTC"),
                   labels = date_format("%d"))
# Error in date_breaks("1 day", tz = "UTC") : 
#   unused argument(s) (tz = "UTC")

ggplot(data, aes(x = date)) +
  geom_line(aes(y = count)) +
  scale_x_datetime(breaks = date_breaks("1 day"),
                   labels = date_format("%d"),
                   tz = "UTC")
# Error in continuous_scale(aesthetics, "datetime", identity, breaks = breaks,  : 
#   unused argument(s) (tz = "UTC") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-12T12:15:44.443

由于[scales 2.2](https://github.com/hadley/scales/commit/274c1f9abd9a3c7726edd569c893b289e3886276)（~2012 年 7 月），可以将`tz`参数传递给`time_trans`.

例如，它以 UTC 格式格式化时间戳并且不需要额外的编码：

```
+scale_x_continuous(trans = time_trans(tz = "UTC")) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T18:04:06.063

@joran 是在正确的轨道上，但是额外的参数不能通过格式化函数传递，所以它们需要传递给生成器函数：

```
date_format_tz <- function(format = "%Y-%m-%d", tz = "UTC") {
  function(x) format(x, format, tz=tz)
} 
```

然后可以将其称为：

```
scale_x_datetime(breaks = date_breaks("1 day"),
                 labels = date_format_tz("%d", tz="UTC")) 
```

# jquery - struts2-jquery tabbedpanel 使用带有 jqgrid 的标签

> ID：10339620
> 
> 赞同：0
> 
> 时间：2012-04-26T18:54:14.420
> 
> 标签：jquery, jqgrid, struts2, tabpanel

我正在尝试创建一个在每个选项卡中具有不同 jquery 网格的选项卡式面板。第一个选项卡按预期加载并显示请求的网格。但是所有其他选项卡都拒绝显示网格，而只是呈现一个空的

```
<table id="gridtable" class="scroll" cellpadding="0" cellspacing="0"></table> 
```

所以 <sjg:grid> 标签不会调用远程 URL 来获取网格的 json 数据。

这是我的标签面板：

```
<sj:tabbedpanel id="taskTabs">
  <sj:tab id="all" href="%{allURL}" label="Alle"/>
  <sj:tab id="today" href="%{todayURL}" label="Heute"/>
  <sj:tab id="thisWeek" href="%{thisWeekURL}" label="Diese Woche"/>
</sj:tabbedpanel> 
```

URL 指向显示以下网格的操作：

```
<sjg:grid 
  id="gridtable" 
  caption="tasks"
  dataType="json"
  href="%{remoteurl}"
  gridModel="tasks"
>
  <sjg:gridColumn name="id" index="id" title="ID" sortable="true"/>
  <sjg:gridColumn name="text" index="text" title="Text" sortable="true"/>
</sjg:grid> 
```

但是 remoteurl 仅在第一个选项卡中调用。所有其他选项卡都不会调用它。当我在面板定义中使用 selectedTab 选项时，在调用页面时会加载此选项卡中的网格，但是当我离开此选项卡并返回时，它会呈现为空。尽管如此，第一个选项卡仍然显示网格。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:39:05.150

您在其他选项卡中是否有网格的唯一 ID？确保同一 DOM 中的所有元素都有唯一的 ID。

约翰内斯

# css - 为什么 transform-origin-z 在 Safari、iOS 上会变形？

> ID：10339623
> 
> 赞同：25
> 
> 时间：2012-04-26T18:54:27.923
> 
> 标签：css, safari, mobile-safari

我一直在使用 3D 变换构建棱镜旋转效果。该`transform-origin-z`属性似乎最适合变换棱镜的面，但 Safari 5 和 Mobile Safari 莫名其妙地拉伸了我的元素，即使没有应用变换。Firefox 12 和 Chrome 18 可以正常工作。

[现场演示](http://jsfiddle.net/eaBSW/embedded/result/)

[全棱镜演示](http://jsfiddle.net/eaBSW/9/embedded/result/)

我有兴趣了解为什么会发生这种情况。我应该`transform-origin-z`完全避免，还是 Safari 和 Mobile Safari 有一些解决方法？

![截屏](../Images/b268f0a20574df9d53129388e5b0ce5d.png)

```
<style>
  /* other browser prefixes omitted for brevity */
  .container {
    margin: 50px;
    border: 2px solid #00f;
    height: 50px;
    -webkit-perspective: 500px;
  }
  .face {
    height: 50px;
    background-color: rgba(255,0,0,0.5);
    -webkit-transform-origin: center center -25px;
    -webkit-transform: translate3d(0,0,0);
  }
</style>

<div class="container">
  <div class="face"></div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T15:48:16.993

这似乎是 Safari 中的一个错误。Chrome 将转换中心移动到 Z 轴上，Safari 将这个中心保留原样，但将对象本身移动到 Z 轴上。因此，该对象在 Safari 中被放大，并且看起来更大。

我现在会避免使用变换原点（在 Z 轴上）并使用 translate-Z 来产生相同的效果。

例子：

[http://jsfiddle.net/willemvb/GuhcC/3/](http://jsfiddle.net/willemvb/GuhcC/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:21:49.113

**我相信以下解释回答了“为什么”Safari 正在做的事情**

我无权访问 Safari 进行测试，但是当我阅读该`perspective`属性的规范（[您指向的同一规范页面](http://www.w3.org/TR/css3-3d-transforms/#perspective-property)）时，它指出：

> 'perspective' 属性应用与 perspective() 变换函数相同的变换，除了它仅适用于元素的定位或变换子元素，而不适用于元素本身的变换。

* * *

**更新我如何阅读上述规范**

> 'perspective' 属性应用与 perspective() 变换函数相同的变换

这告诉我将完成透视变换，就像`transform: perspective(500px)`在这种情况下应用一样。

> 除了它仅适用于元素的定位或转换的子元素

这告诉我透视变换将应用于子元素，在这种情况下`.face`。在这里，似乎有些模棱两可。这是说只有在对子元素进行了另一次变换时才应应用透视图？并且，该`tranform-origin`属性是否算作对孩子进行的转换（特别是因为该值与`perspective`转换直接相关）？*正是在这个模棱两可的点上，浏览器似乎有所不同。*Safari 正在进行`perspective`转换，因为子元素已`tranform-origin`设置为`-25px`，而其他元素显然不是（至少，直到实际的其他元素在动画期间对 进行其他操作）`transform`。`.face`

> 不要对元素本身进行转换

这告诉我`z=0`of`.container`是无关紧要的，因为来自这个属性的变换不影响`.container`，而是影响`.container`的孩子（即`.face`）。

* * *

因此，Safari 似乎处于您始终应用变换的位置，`.face` *因为*您已设置`.container`为 have `-webkit-perspective: 500px;`，因此始终有一个`perspective`变换应用于子元素（`.face`在您的情况下）。

请注意，如果您删除动画，并将实际应用于`transform: perspective(500px)`Firefox或 Chrome，`.face`您将[**在 Firefox 或 Chrome 中看到**](http://jsfiddle.net/eaBSW/10/)与您在 Safari 中使用代码所体验到的结果相同的结果。

**所以我认为实际上，*Safari 可能做得正确*，而 Firefox 和 Chrome 可能不是。**该规范有一些歧义。其他两个浏览器可能仍然应该`.container`像 Safari 那样应用基于透视变换的透视变换，但肯定看起来不是，而 Safari 显然看起来是。

为了消除这个问题（在“休息”时不让它“突出”），你可能需要

1.  在动画`transform-origin`开始时为自身设置动画（并在之后重置`0`），*或者*......
2.  将`perspective`值本身设置为`0`“静止”和`500px`动画时的动画。

我的猜测是#1 会更容易实现，但我不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-25T10:11:53.157

我不知道为什么这对我有用。似乎适用于所有浏览器。基本上我认为我正在取消 css 声明效果。

```
.container {
   perspective: 500px;
   transform-origin: 50% 50% 25px;
} 
```

# php - PDO 在 PHP 中执行

> ID：10339626
> 
> 赞同：2
> 
> 时间：2012-04-26T18:54:42.010
> 
> 标签：php, sql, pdo

我在使用 PDO 执行语句时遇到了一些问题。我的代码如下所示：

```
try {

    $stmt = $this->dbh->prepare("INSERT INTO smtp_servers (host, port, ssl, auth, username, password) VALUES(:host, :port, :ssl, :auth, :username, :password)");
    $stmt->bindParam(':host', $serverOptions[0]);
    $stmt->bindParam(':port', $serverOptions[1]);
    $stmt->bindParam(':ssl', $serverOptions[2]);
    $stmt->bindParam(':auth', $serverOptions[3]);
    $stmt->bindParam(':username', $serverOptions[4]);
    $stmt->bindParam(':password', $serverOptions[5]);
    $stmt->execute();

} catch (PDOException $e) {
    print("fail");
} 
```

如果我在它打印测试之前进行打印，它不会打印“失败” `$stmt->execute();`，但如果我在执行行之后进行打印，它不会打印文本。

有任何想法吗？

**更新：**

我试图抛出更通用的异常，但没有任何运气，我`PDO::PARAM_INT`在使用整数的地方实现了。并且还添加了一行：

```
$this->dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

现在我的代码如下所示：

```
try {

    $stmt = $this->dbh->prepare("INSERT INTO smtp_servers (host, port, ssl, auth, username, password) VALUES(:host, :port, :ssl, :auth, :username, :password)");
    $stmt->bindParam(':host', $serverOptions[0]);
    $stmt->bindParam(':port', $serverOptions[1], PDO::PARAM_INT);
    $stmt->bindParam(':ssl', $serverOptions[2], PDO::PARAM_INT);
    $stmt->bindParam(':auth', $serverOptions[3], PDO::PARAM_INT);
    $stmt->bindParam(':username', $serverOptions[4]);
    $stmt->bindParam(':password', $serverOptions[5]);
    $stmt->execute();

} catch (PDOException $e) {
    debug("fail");
} 
```

我想看看我的数据库表设计会有所帮助吗？

```
CREATE TABLE IF NOT EXISTS `smtp_servers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `host` varchar(50) NOT NULL,
  `port` int(11) DEFAULT NULL,
  `ssl` smallint(11) DEFAULT NULL,
  `auth` smallint(11) DEFAULT NULL,
  `username` varchar(50) DEFAULT NULL,
  `password` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

现在我收到此错误：

> Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ssl, auth, username, password FROM smtp_servers' at line 1' in /var/www/isms/php/communication/Mail.php on line 13 PDOException: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ssl, auth, username, password FROM smtp_servers' at line 1 in /var/www/isms/php/communication/Mail.php on line 13 Call Stack: 0.0002 649056 1\. {main}() /var/www/isms/index.php:0 0.0023 867336 2\. include('/var/www/isms/php/settings/ismsSettings.php') /var/www/isms/index.php:88 0.0065 1091712 3\. require_once('/var/www/isms/php/settings/MailSettings.php') /var/www/isms/php/settings/ismsSettings.php:29 0.0147 2288960 4\. require_once('/var/www/isms/php/forms/settings/EditSmtpServer.php') /var/www/isms/php/settings/MailSettings.php:4 0.0155 2290456 5\. Mail->getServers() /var/www/isms/php/forms/settings/EditSmtpServer.php:41 0.0156 2291888 6\. PDOStatement->execute() /var/www/isms/php/communication/Mail.php:13

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T23:04:37.887

除了andrewsi关于“ [MySQL保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)”的评论...... [ssl确实是一个MySQL保留字！]

就目前而言，您的 create table 语句也按原样失败，但格式如下；才不是

```
CREATE TABLE `smtp_servers` (
`id` INT( 11 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`host` VARCHAR( 50 ) NOT NULL ,
`port` INT( 11 ) NOT NULL ,
`ssl` SMALLINT( 11 ) NOT NULL ,
`auth` SMALLINT( 11 ) NOT NULL ,
`username` VARCHAR( 50 ) NOT NULL ,
`password` VARCHAR( 50 ) NOT NULL
) ENGINE = MYISAM ; 
```

## 虽然，当我写这篇文章时，我注意到`StackOverflow`使用[间距坟墓](http://www.fileformat.info/info/unicode/char/60/index.htm) 进行格式化！( ` )(`)

因此，总而言之，将您的准备语句行更改为以下内容：

```
$stmt = $this->dbh->prepare("INSERT INTO `smtp_servers` 
    (`host`, `port`, `ssl`, `auth`, `username`, `password`) 
    VALUES(:host, :port, :ssl, :auth, :username, :password)"); 
```

**注意：** *仅以这种方式格式化以便于阅读*:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:51:13.650

您是否尝试过打印查询的 SQL，用您尝试插入的实际参数替换命名参数，然后从命令行运行它？

异常的文本暗示 SQL 语句存在问题，而不是 PDO 连接存在问题，从命令行运行它会让您知道 SQL 本身是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T18:56:50.047

在您的代码示例中，`fail`打印应该只在出现问题的情况下发生，即当 try 块内的脚本抛出异常时。

假设一切顺利并且查询成功，那么看不到这条线是一个好兆头。

* * *

如果查询没有成功，但您仍然没有看到错误消息，请尝试告诉 PDO 仅在错误时抛出 PDOExceptions：

```
$this->dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

在实例化 PDO 对象之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:38:26.170

这可能是因为您现在处于特定的命名空间中。尝试替换`} catch (PDOException $e) {`，`} catch (\PDOException $e) {`看看是否有变化。

# python - easy_install 'develop' 命令无法在 virtualenv 中工作

> ID：10339631
> 
> 赞同：1
> 
> 时间：2012-04-26T18:55:07.363
> 
> 标签：python, virtualenv, easy-install

## 更新：

事实证明，virtualenv 在运行之前没有正确初始化`easy_install`。一旦这个问题得到纠正，事情就开始按预期工作了。没有解决方案可以发布，因为所述问题首先不存在。'当*我激活 virtualenv'*步骤没有正确执行（不要问），所以下面的故障是一种错觉。

结案。

### 原始问题：

我有一个虚拟环境。在里面，`sys.path`看起来像这样：

```
[...,
 '/<inside_virtualenv>/lib/python2.6/site-packages/foo-1.2.egg',
 ...
 '/usr/local/lib/python2.6/dist-packages/foo-2.0.egg'
] 
```

如果我`import foo`从 virtualenv 内部，我会按预期导入 foo-1.2。

我有一个鸡蛋；它的设置文件列出了另一个 egg 作为其依赖项`foo=1.2`中的依赖项。

当我激活 virtualenv 并尝试运行`python <my_egg>/setup.py develop`时，出现错误：

```
Processing dependencies for <my egg>
Installed distribution foo 2.0 conflicts with requirement foo==1.2 
```

我什至修补了在引发此异常的语句中`setuptools/command/easy_install.py`打印。路径没问题，列第一，远第二。`sys.path``try``foo-1.2``foo-2.0`

我究竟做错了什么？有没有办法让easy_install忽略非virtualenv`foo-2.0`安装并`foo-1.2`在virtualenv内部接受？

`sys.path`从我的鸡蛋里面去除有问题的条目`setup.py`并没有帮助。虽然`sys.path`仅包含 的正确版本`foo`，但该过程失败并出现相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:16:09.253

除了您直接经历的情况之外，还有另一种可能发生的情况，但很容易避免：

设置新的 virtualenv 时，`--no-site-packages`请避免包含系统 Python 安装中的库，除非您确定它们不会（也永远不会）冲突。

# iphone - NSString 到 UIImage 类型的参数

> ID：10339633
> 
> 赞同：0
> 
> 时间：2012-04-26T18:55:14.103
> 
> 标签：iphone, ios, xcode

嗨，我遇到了这个问题，有人可以为我解决这个问题吗？

```
unichar aChar7 = [textview.text characterAtIndex:0];

if (aChar7 == 'A' ){
    [imageview7 setImage: @"BLUEBOXA.png"]; 
```

它说

> 不兼容的指针类型将“NSString *”发送到“UIImage *”类型的参数

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:00:15.053

UIImageView "setImage" 将 UIImage 类型作为参数。所以你需要先创建一个 UIImage 实例。做这个：

```
myImage = [UIImage imageNamed:@"BLUEBOXA.png"];
[imageview7 setImage: myImage]; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:58:36.363

的参数`setImage`是一个`UIImage`，而不是`NSString.`试试这个：

```
[imageview7 setImage:[UIImage imageNamed:@"BLUEBOXA.png"]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:14:14.567

1 - 以下语句将查看文件的名称。如果这是第一次加载图像，该方法会在应用程序的主包中查找具有指定名称的图像。

```
UIImage *blueBoxImage = [UIImage imageNamed:@"BLUEBOXA"]; 
//see my 3rd point, no need to specify png format 
```

2 - 如果 blueBoxImage 返回 nil；该方法找不到指定的图像。

因为此方法在**系统缓存**中查找具有指定名称的图像对象，并在该对象存在时返回该对象。如果缓存中没有匹配的图像对象，则此方法从指定文件加载图像数据，缓存它，然后返回结果对象。

3 - 在 iOS 4 及更高版本上，**如果文件为 PNG 格式，则无需指定 .PNG 文件扩展名**。在 iOS 4 之前，您必须指定文件扩展名。

现在，一旦您准备好照片，您就可以对其进行构图 :)。我的意思是一旦得到那个图像对象，你就可以设置你的 UIImageView

```
imageView7.image = blueBoxImage; 
```

# java - java导入“找不到符号”

> ID：10339637
> 
> 赞同：1
> 
> 时间：2012-04-26T18:55:47.500
> 
> 标签：java, import

我正在将 linux 工具移植到 Windows。该工具在 linux 系统上运行良好，但现在在 windows 上我得到这个“找不到符号”错误。

我有这个小主课：

```
package foo;

import foo.bar;

public class Main {
    public static void main(String[] args) throws Exception {
        bar.getInstance();
    }
} 
```

现在出现错误，同时执行 javac Main.java：

导入 foo.bar：找不到符号 ^ 符号：类栏位置：包 foo

Main.java 和 bar.java 位于同一目录中。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T18:58:12.480

一方面，`bar`应该被称为`Bar`惯用语......

理想情况下，您应该从Main.java*上方的目录编译，如下所示：*

```
javac -d out foo/Main.java foo/Bar.java 
```

这将创建一个名为“out”的目录，其中包含另一个目录“foo”，该目录将包含 Main.class 和 Bar.class。因此，再次从父目录中，您可以运行：

```
java -cp out foo.Main 
```

源位置不必*与*包结构匹配。您*可以*只从包含的目录中调用 javac `Main.java`，`Bar.java`如下所示：

```
javac -cp out Main.java Bar.java 
```

（然后以与以前相同的方式运行它）但是，根据包来构建源代码通常是一个更好的主意。

您可能会发现使用将为您处理所有编译等的 IDE（例如 Eclipse 或 NetBeans）更容易。如果您*确实*想从命令行构建一个真正的项目，您可能应该考虑使用完整的构建系统，例如 Ant 或 Maven。

（请注意，如果您尝试以相同的方式进行编译，您在 Linux 上会遇到与在 Windows 上相同的错误。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:58:14.493

我认为您需要在尝试编译 foo 之前正确编译类栏，即在正确的包结构中生成类文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-29T11:04:44.203

如果你们中的任何人从事过 kotlin 项目，然后**在 gradle 中没有 kotlin 支持的情况下从事完整的 Java 项目**，并且您将 kotlin 中的类放入 Java 项目并尝试导入该 Kotlin 类，您将获得此导入问题。没有参考确切的问题，但有人可能会发现它有帮助。

示例：尝试在 MainActivity.java 中导入 SomeClass.kt 将引发此错误。

# wordpress - 我的 WordPress 博客下的奇怪文字

> ID：10339640
> 
> 赞同：0
> 
> 时间：2012-04-26T18:56:08.817
> 
> 标签：wordpress

我一直试图摆脱出现在我的 WordPress 博客下的一些奇怪的文字，我检查了 Wordpress 支持并在谷歌上搜索了它，但没有。我也尝试更改博客的主题，但无济于事。我的博客地址是 abuango.net。如果你能指导我解决这个问题，我会很高兴......

我正在使用 Foghorn 主题，下面是奇怪文本的预览： ![在此处输入图像描述](../Images/0bd46c6eddd8c63bd6c2e4d6b99f3777.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:33:21.720

你已经被黑客入侵。阅读**[验证我是否已完全删除 WordPress 黑客？](https://wordpress.stackexchange.com/questions/19696/verifying-that-i-have-fully-removed-a-wordpress-hack)**咨询。

最重要的部分是：你必须找到感染点。如果你不知道这一点……它会一次又一次地发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:57:13.850

我似乎已经使用 WordDefence (http://www.wordfence.com) 修复了它，我的通用模板被修改了，插件显示了原始文件和修改文件的并排比较，并提供了恢复原始文件的选项。我现在将继续更改我所有的密码。谢谢大家

# c++ - 缓慢的 SLAB/SLUB 内存分配

> ID：10339643
> 
> 赞同：0
> 
> 时间：2012-04-26T18:56:14.333
> 
> 标签：c++, memory-management, linux-kernel

我最近遇到了一个非常奇怪的问题，可能是由于内核内存分配器造成的。起初，我怀疑我的 C++ 代码中存在某种类型的内存错误，但我看到的确切行为让我相信这可能不是由于代码中的错误造成的。这很奇怪，但这是我对这个问题的最佳描述。

我有一个应用程序可以写入和覆盖我机器的 /dev/shm 区域中的文件。在程序开始时，它为要写入的所有文件声明文件指针，并不断覆盖。这些指针都是在程序开始时创建的。

当我运行代码时，我注意到以下内容。第一次内存使用量上升到我系统总数的 4.3%（从顶部看）。当我启动可执行文件时，就会发生这种情况。然后，在代码开始执行任何操作之前，CPU 使用率徘徊在 40-50% 左右。大约 2-3 分钟后，内存使用率达到 5.0%，并且没有进一步增加。发生这种情况时，CPU 使用率下降到 5-15%，这是程序通常运行的范围（由于数据传递给它的速率）。

在我的程序启动内存期间，幕后发生了一些事情，但我不明白它是什么，感觉在现代 x86_64 上分配 5% 的系统内存（1.2GB）不应该花费 2-3 分钟服务器。请注意，在这个奇怪的启动之后，程序通常运行没有问题。

但是，今天，我不得不增加程序在 /dev/shm 中写入的文件数量，并相应地增加指针数量。问题就在这里，在启动过程中，CPU 使用率突然跳到 100% 并停留在那里。这是一个巨大的问题，因为它导致我的应用程序大幅减速，低于可接受的水平。这个和工作可执行文件之间的唯一区别是我让它写入的文件数量。具体来说，我将文件数从 1345 增加到 1350。事实上，仅 1346 多一个就足以解决这个 100% cpu 问题。

我真的对我在这里处理的事情感到茫然。我怀疑可能与 SLAB/SLUB 分配器有关（我的系统是带有 2.6.35 内核的 Centos 5.8）。任何有关如何解决此问题的想法或提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:21:46.407

我认为这不太可能是 SLUB 的问题。`/dev/shm`是通过`tmpfs`（在现代系统上）实现的，它使用页面缓存，而不是 SLUB。

您需要弄清楚程序在占用 CPU 时在做什么。您可以从 开始`strace`，这至少可以显示您的程序是否在内核或代码中花费了大量时间。从那里你应该学会使用`perf`.

# objective-c - 用特定颜色填充路径

> ID：10339653
> 
> 赞同：2
> 
> 时间：2012-04-26T18:56:52.797
> 
> 标签：objective-c, drawing, core-graphics, cgcontext

我想用红色填充路径。这是我的代码：

```
CGFloat red[4] = {1.0f, 0.0f, 0.0f, 1.0f};
CGContextBeginPath(c);
CGContextSetStrokeColor(c, red);
CGContextSetFillColorWithColor(c, [UIColor whiteColor].CGColor);
CGContextMoveToPoint(c, 10, 10);
CGContextAddLineToPoint(c, 20, 20);
CGContextAddLineToPoint(c, 20, 40);
CGContextAddLineToPoint(c, 40, 20);
CGContextAddLineToPoint(c, 10, 10);
CGContextStrokePath(c);
CGContextFillPath(c); 
```

我知道我必须使用`CGContextSetFillColor()`and `CGContextFillPath()`，但它不起作用。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:42:48.703

就我而言，答案是：

```
CGContextRef context = UIGraphicsGetCurrentContext();

//set fill pattern
UIColor *patternRed = [UIColor colorWithPatternImage:[UIImage imageNamed:@"patternRed.png"]];

CGContextSetLineWidth(context, 1.0);
CGContextSetFillColorWithColor(context, patternRed.CGColor);

CGMutablePathRef pathRef = CGPathCreateMutable();

CGPathMoveToPoint(pathRef, NULL, 0, self.frame.size.height);
for (int i = 0; i<255; ++i) {
    CGPathAddLineToPoint(pathRef, NULL, stepX*arrayX[i], self.frame.size.height - (arrayYRed[i]*stepY));
}
CGPathAddLineToPoint(pathRef, NULL, stepX*255, self.frame.size.height);
CGContextAddPath(context, pathRef);
CGContextFillPath(context);

CGPathRelease(pathRef); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:54:54.420

你没有在上面的例子中设置线宽，所以这里有一个理智的例子，它将在矩形的左侧画一条线。直接取自 drawRect 函数

```
CGContextRef context = UIGraphicsGetCurrentContext();
[[UIColor whiteColor] setFill];
CGContextFillRect(context, rect);

CGContextSetLineWidth(context, 2);
CGFloat gray[4] = {0.5f, 0.5f, 0.5f, 1.0f};
CGContextSetStrokeColor(context, gray);

// left
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, 0, CGRectGetHeight(rect));

CGContextStrokePath(context); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T15:44:15.163

快速使用：

```
CGContextSetFillColorWithColor(context, UIColor.blackColor().CGColor)
CGContextFillPath(context) 
```

# serialization - 使用 Jackson Parser 反序列化 GeoJSON

> ID：10339654
> 
> 赞同：2
> 
> 时间：2012-04-26T18:56:58.560
> 
> 标签：serialization, jackson, pojo, geojson

我正在尝试将 GeoJSON 反序列化为相应的 POJO。对于每个 GeoJSON 类型（点、线串、多边形等），我都有一个 Java 对象。我想让杰克逊使用 GeoJSON 实体的类型字段来使用相应的 Java 类。例如，假设我有以下 GeoJSON 实体：

```
{ "type": "Point", "coordinates": [100.0, 0.0] }

{ "type": "LineString", "coordinates": [ [100.0, 0.0], [101.0, 1.0] ] }

{ 
"type": "Polygon", "coordinates": [
    [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ],
    [ [100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2] ]
  ]
} 
```

对于第一个对象，Jackson 应该使用点类并相应地反序列化坐标字段。对于第二个对象，Jackson 应该使用 LineString 对象，对于第三个对象，应该使用多边形对象。

我知道您可以在 Jackson 中编写自定义反序列化器，但我只看到用于单个对象字段的反序列化器。就我而言，我认为我必须为整个 GeoJSON 实体编写一个反序列化器，因为根据类型字段，整个表示会发生变化。

也许有人可以提示我在这种情况下该怎么做？也许有一些我没有读过的聪明把戏？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:50:28.617

为什么需要自定义处理程序？您确实需要使用`@JsonTypeInfo`注释（属性“type”；方法“As.NAME”）来获得自动多态类型处理；和子类必须定义名称以与 一起使用`@JsonTypeName`。但除此之外，它似乎是可行的。“坐标”属性的结构似乎有所不同，因此您需要为单独的子类建模。

# objective-c - 从 UITableView 调用 UIPopoverController - objective-c

> ID：10339655
> 
> 赞同：0
> 
> 时间：2012-04-26T18:57:09.280
> 
> 标签：objective-c, ios, ipad, uipopovercontroller

是否可以`UIPopoverController`从 parentViewController 的 tableView 调用？例如我选择了 UITableViewCell：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
     //Call UIPopoverController here
} 
```

如果是，请给出简短的示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:08:57.180

您想要做的是使用自定义表格视图单元格，并在您的单元格内创建一个按钮。对于按钮，并从按钮触摸事件函数中定义您的弹出框。此方法有效，我在当前项目中使用它。

如果您需要，我可以提供更多细节，因为用几句话描述整个过程并不容易。

但是，您可能想检查[一下](https://stackoverflow.com/questions/3015400/how-to-correctly-present-a-popover-from-a-uitableviewcell-with-uipopoverarrowdir)，看看他们的解决方案是否会对您有所帮助。

# jquery - 如何强制选择特定的 jquery-ui 选项卡索引或在特定选项卡上强制“tabsselect”事件？

> ID：10339663
> 
> 赞同：0
> 
> 时间：2012-04-26T18:57:51.187
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我有以下功能：

```
function createTabs( selectorText, selected ) {
    var tabs = $( selectorText ).tabs();        
    if( selectorText == '#content .tabs' ) {
        contentTabs = tabs;
        $( selectorText ).unbind( 'tabsselect' ).bind( 'tabsselect', function( event, ui ) {            
            var queryNumber = $( ui.tab ).data('query_number');
            if( queryNumber ) {
                $( ui.panel ).html( '<table id="table"></table>' )
                var table = $( ui.panel ).find( 'table' );
                populateFlexigrid( table, queryNumber );
            }
        });
    }

    if( !selected ) {
        selected = 0;
        tabs.tabs( 'select', 0 )
    }
    tabs.tabs( 'select', selected );
} 
```

在`if`函数末尾的语句中，我将选定的选项卡设置为应选择的任何选项卡。进入此`if`语句时，选择的选项卡始终为 0，因为刚刚创建了选项卡。所以我的问题是我试图选择一个已经选择的选项卡。这意味着我绑定到该选项卡的功能没有执行。

**有什么方法可以强制选择选项卡或该`tabsselect`选项卡上的事件，以便我的绑定功能运行？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:22:41.770

我不喜欢[这个解决方案](http://forum.jquery.com/topic/tabsselect-tabsshow-dont-fire-when-re-selecting-current-tab)，但它正在工作。如果有人有更好的方法，请发布。

```
var selectedTab = $tabs.tabs('option', 'selected');
$tabs.find('li').eq(selectedTab).removeClass('ui-tabs-selected').end().tabs('select', selectedTab); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:02:28.363

`tabs.trigger('tabsselect');`选择选项卡后尝试添加。

**更新：**

很抱歉延迟了这个，但我终于找到了一些时间来解决这个问题。

尝试将“tabsselect”函数重写为命名函数（不是匿名函数），这样您就可以随时调用它（在构造`ui`事件提供的参数之后）。下面的示例代码（和[工作小提琴](http://jsfiddle.net/aQvRg/)）：

```
function tabSelected(event, ui) {
    var queryNumber = $(ui.tab).data('query_number');
    var table = $(ui.panel).find('table');
    console.log('Tab ' + ui.index + ' "tabsselect" event triggered.');
    if (queryNumber) {
        $(ui.panel).html('<table id="table"></table>');
        populateFlexigrid(table, queryNumber);
    }
}

function createTabs(selectorText, selected) {
    var tabs = $(selectorText).tabs();
    var tab = null;
    var panel = null;
    var ui = {
        "index": 0,
        "panel": tab,
        "tab": panel
    };

    if (selectorText == '#content .tabs') {
        contentTabs = tabs;
        $(selectorText).unbind('tabsselect').bind('tabsselect', tabSelected);
    }

    if (!selected) {
        selected = 0;
        tabs.tabs('select', 0);
    }

    //create the ui parameter
    ui.index = selected;
    ui.tab = $(tabs.children('ul:first').children('li')[selected]).children('a')[0];
    ui.panel = tabs.children('div')[selected];

    //run the "tabsselect" function
    tabSelected(null, ui);
}
createTabs('#content .tabs', 0);​ 
```

# python - 向 dotcloud 发送带有 post 请求的文件时出现错误：413 Request Entity Too Large

> ID：10339666
> 
> 赞同：0
> 
> 时间：2012-04-26T18:58:03.603
> 
> 标签：python, django, dotcloud

我为 dotcloud 编写了一个简单的 django 应用程序，该应用程序旨在操作使用 post 请求发送给它的文件。我已经在本地对此进行了测试，它似乎工作正常，但是我刚刚部署了该应用程序并通过发布一个 1.7MB pdf 文件对其进行了测试，引发了以下错误：

```
413 Request Entity Too Large 
```

发布请求的大小限制是什么？我打算发送这种大小并且可能更大的文件 - 有没有更好的方法/一种可以在不遇到错误的情况下工作的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:01:31.263

这是[nginx 的默认限制](http://docs.dotcloud.com/guides/nginx/#increase-http-post-max-size)。

> ## 增加 HTTP POST 最大大小
> 
> 默认情况下，HTTP POST 请求的正文大小限制为 1 MiB。
> 
> 您可以使用以下指令对其进行配置：
> 
> ```
> client_max_body_size 10m; 
> ```
> 
> 请注意，我们的 HTTP 网关强制限制为 100 MiB。

# c# - 从其基类调用继承的方法

> ID：10339676
> 
> 赞同：1
> 
> 时间：2012-04-26T18:58:33.593
> 
> 标签：c#, .net

我有一个抽象类，用于派生许多其他类，每个类都做类似但略有不同的事情。这些类由反射加载并暴露给用户，以选择他需要运行的类。

这是因为基类有一个名为 Run 的抽象方法，它被每个派生类覆盖。因此，在代码中我需要任何这些类型的变量的任何地方，我都将它们声明为基类。然后当我调用 Run 方法时，它会从真实类型执行该方法（即使我将它声明为基类）。

我的问题是我需要为每个派生类显示一个定制的 UI。我想为每个自定义 UserControl。这些控件将有一个 puclic 方法，该方法根据用户对其所做的操作返回一个值。然后我在运行时创建这个控件，用户设置需要什么，我从这个控件调用 return 方法，最后我可以从用户选择的类中将 i 传递给 Run Run 方法并执行它。

我不知道我有多少或哪些派生类，因为用户可以创建从该基类派生的 dll 并将其作为插件附加。

因此，我认为我必须在表单上创建这些自定义控件作为通用 UserControl 类，然后将它们转换为真实类型。但是只有知道控件是从 UserControl 派生的，有没有办法做到这一点？

我可以在基类上创建一个公共属性来存储其自定义控件，但是回到主代码中，我可以将通用用户控件转换为存储在此属性中的类型吗？

另外，这里会是设计问题吗？我可以使用其他方法来做到这一点吗？

我希望这听起来不会很混乱:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:27:02.413

我可能误解了你，但这是我的想法：

```
public abstract class BaseClass<T> where T: UserControl, IMyControl
{
    private Page _page;
    protected T Control { get; private set;}

    public BaseClass(Page page, string controlPath)
    {
        _page = page;
        Control = (T)page.LoadControl(controlPath);
        _page.Controls.Add(Control);
    }

    public void Run()
    {
        var data = Control.GetData();
    }
}

public interface IMyControl
{
    object GetData();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:33:54.017

我将创建一个继承自 UserControl 的类。我认为您不能将其设为抽象，但您可以在其他类型上创建一个名为 CreateControl() 的方法，该方法将返回应该包含 UI 的 UserControl 的实例。

然后，您可以将该 UserControl 添加到 Panel 或其他容器中，而无需真正关心它是什么特定的 UserControl。如果您希望有特定的方法来实现该 UserControl，例如 Save 或 Load，那么您可以将它们作为虚拟方法添加到派生自 UserControl 的 Base 类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:50:10.787

我不知道这是否是正确或最佳的解决方案，但基于上述答案和一些研究，我以这种方式解决了问题：

从 BaseClass 派生的每个类都有一个可覆盖的方法 GetControl。此方法返回专门为该类设计的 UserControl 的新实例。

当用户选择派生类时，我调用 GetControl 方法并将此控件添加到表单中。然后显示为该类设计的 UI。如果选择了另一个类并且随后为该其他类创建了新 UI，则删除此控件。

为了读取用户在控件中所做的设置，我在每个 UserControl 上实现了一个名为 ReadData 的方法。要从对象级别调用此方法，我使用了反射：

```
Object ui = FindControlByName("SelectedClassUI");
Type t = ui.GetType();
MethodInfo m = t.GetMethod("ReadData");
Object userSetup = m.Invoke(ui, null);

<... do something with userSetup ...> 
```

# java - 安卓安装问题

> ID：10339679
> 
> 赞同：16
> 
> 时间：2012-04-26T18:58:37.600
> 
> 标签：java, android

我一直在尝试设置我的 android 以开始我的开发课程一整天都没有成功。我已经安装了`Java JDK kit`，我正在尝试安装 android sdk，但这是我整天遇到的错误：

```
"failed to find java version for 'C:\windows\system32\java.exe':[2] The system cannot find the specified file. 
```

我安装的 Java 版本是`jdk1.7.0_03`. 我已经转到环境变量并添加了 java 文件的路径（`C:\Program Files\Java\jdk1.7.0_03\bin`和`C:\Program Files\Java\jdk1.7.0_03\bin\javac`），但我仍然得到同样的错误。我要安装的 android sdk 版本是`"installer_r18-windows.exe"`. 有人能帮我吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-18T15:58:58.573

问题是有两个 Java 文件，安装程序会选择它找到的第一个；然而，解决方案很简单：

重命名`c:\windows\system\java.exe`为`c:\windows\system\java.exe.orj`，然后重新启动安装程序，一切都应该没问题。

它现在将使用安装在 Program Files\Java 中的 java.exe 版本来解决问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T10:36:47.823

我按照以下步骤解决了这个问题：

1.  右键我的电脑->属性->高级系统设置->高级选项卡->点击环境变量

2.  在系统变量下按新创建和新系统变量

3.  将其命名为 JAVA_HOME 并提供安装 java 的文件夹的 url

    例如`C:\Program Files\Java\jdk1.7.0_05` ，然后重新运行 sdk

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T11:40:08.337

您唯一需要做的就是设置 jdk 源文件夹的路径。

"C:\Program Files\Java\jdk1.7.0_03\"

这对我有这个错误很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T09:59:17.227

只需删除“C:\windows\System32\”的“java.exe”，并重新设置java环境（JAVA_HOME,CLASSPATH,PATH），即可顺利通过此步骤。

顺便说一下，我在Windows7 X64下

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-11T05:01:26.183

@hasan-veli-soyalan 我尝试了您的解决方案，但`c:\windows\system\java.exe`在我的情况下不存在，我使用的是 Windows 8 pro 64bit，相反，我发现`c:\windows\system32\java.exe`并按照您的描述进行了更改，它有效！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-30T02:48:48.753

这个错误经常发生，如果不是总是因为 android sdk 不能将子文件夹“System32”中的“java”识别为“java.exe”。只需将其重命名为“java.exe”。在本地磁盘(C:)>>Windows 中找到子文件夹“System32”。向下滚动以在子文件夹“System32”中找到“java”。

如果您的系统上正确安装了“Java jdk”，这应该可以工作。祝你好运！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-26T19:29:04.060

我在安装android时遇到了同样的错误，尝试系统还原然后重新安装jre和jdk

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-03-25T12:43:34.070

要在您的第一个应用上安装 Android 并使用 Android Studio，请按照以下分步说明进行操作：

*   第 1 步：下载 Android Studio
*   第 2 步：安装 Android Studio 步骤
*   第 3 步：开始一个新项目
*   第 4 步：创建新的 AVD
*   第 5 步：打开 AVD 管理器
*   第 6 步：启动模拟器
*   第 7 步：运行项目

而在[安装 Android](https://studyopedia.com/android/setup-android-environment/)时，您还需要设置环境变量。

[要设置环境变量，在安装 Java](https://studyopedia.com/java/install-java-on-windows/)以设置 JDK时遵循相同的步骤。

转到控制面板 > 系统 > 高级系统设置 > 高级选项卡 > 环境变量。

在系统变量下，单击路径，然后单击新建并添加 JDK 路径。

# jquery - 将关联数组作为数据传递给 jquery ajax 函数

> ID：10339681
> 
> 赞同：0
> 
> 时间：2012-04-26T18:59:00.827
> 
> 标签：jquery

我想调用一个 jquery ajax 函数并传入数据。我知道数据应该被格式化为查询字符串。如果我传入类似`$(':checked')`数据的内容，那么它将被格式化为`tagname=value1&tagname=value2...etc`哪个好。

现在，我想用一个关联数组替换 jquery 结果，其中包含一些我得到的整数`value1=true$value2=true`。那不是我想要的。

如何使用键格式化关联数组以传递给 jquery ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:24:43.987

好的，我想出了一个解决方案。我创建了以下函数，它返回一个可以作为数据传递给 jquery ajax 函数的数组：

```
function () {
    var kvArray = [];
    for (x in MyAssociativeArray) {
        var kv = {};
        kv.name = "NameIWantToAssign";
        kv.value = x;
        kvArray.push(kv);
    }

    return kvArray;
}; 
```

诀窍是使用 .name 和 .value 属性。在阅读了以下 jquery 文档后，我得到了这个想法：

*如果传递的对象是一个数组，它必须是一个由 .serializeArray() 返回的格式的对象数组*

```
[{name:"first",value:"Rick"},
{name:"last",value:"Astley"},
{name:"job",value:"Rock Star"}] 
```

不过可能有更好的方法。如果您知道，请发表评论或提供其他答案。

# dojo - 未捕获的类型错误：无法使用 dijit.form.DateTextBox 调用 null 的方法“getMonth”

> ID：10339682
> 
> 赞同：0
> 
> 时间：2012-04-26T18:59:04.183
> 
> 标签：dojo, dijit.form

我有一个网格和一个用于编辑每一行值的编辑器。在我的编辑器中，我有一个 dijit.form.DateTextBox。我也有提交和取消按钮。单击编辑按钮时，我打开网格弹出编辑器，它有 1 个表单和一堆其他 dojo 控件，包括文本框。现在我想使用取消按钮来重置表单并隐藏 Dojo Grid 弹出对话框。我为此创建了一个函数。当我删除在 DateTextBox onChange 事件之后运行的 JavaScript 时，它工作正常。它给了我以下错误。

未捕获的类型错误：无法调用 null 的方法“getMonth”

我在 DateTextBox onChange 事件上的 JavaScript 就是这个。

```
dojo.connect(dijit.byId("Edit_TrialStartDate"), "onChange", function () {                        
                        var item = dojo.date.locale.format(dijit.byId("Edit_TrialStartDate").value, { datePattern: "MM/dd/yyyy", selector: "date" });
                        dijit.byId("Edit_tTrialStartDate").setValue(item);
                    }); 
```

因为如果这个错误，我的网格弹出对话框永远不会释放它注册的 ID。所以我一次只能编辑 1 条记录。当我单击另一行编辑按钮时，我收到以下错误。

未捕获的错误：尝试使用 id==TrialGridPopUp 注册小部件，但该 id 已注册

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:22:07.257

在您的代码中的某处，您将一个不是日期的对象传递给一个期望日期的方法。

```
Uncaught TypeError: Cannot call method 'getMonth' of null 
```

我会验证这`dijit.byId("Edit_TrialStartDate").value`是给你一个日期对象。

打电话也是更好的做法`dijit.byId("Edit_TrialStartDate").get('value');`

# symfony1 - symfony：一些字段相互关联的表单

> ID：10339683
> 
> 赞同：0
> 
> 时间：2012-04-26T18:59:04.757
> 
> 标签：symfony1, doctrine, symfony-1.4, symfony-forms

我有这个 schema.yml

```
Region:
  columns:
    name: { type: string(255), notnull: true, unique: true }
  options:
    symfony: { form: false, filter: false }

Province:
  columns:
    id: { type: string(2), notnull: true, primary: true }
    name: { type: string(255), notnull: true, unique: true }
    region_id: { type: integer, notnull: true }
  relations:
    Region: { local: region_id, foreign: id, onDelete: CASCADE, foreignAlias: Provinces }
  options:
    symfony: { form: false, filter: false }

City:
  columns:
    id: { type: string(4), notnull: true, primary: true }
    name: { type: string(255), notnull: true, unique: true }
    province_id: { type: string(2), notnull: true }
    latitude: { type: decimal, scale: 6, size: 8, notnull: true }
    longitude: { type: decimal, scale: 6, size: 8, notnull: true }
  relations:
    Province: { local: province_id, foreign: id, onDelete: CASCADE, foreignAlias: Cities }
  options:
    symfony: { form: false, filter: false } 
```

我想制作一个使这些字段相互关联的表格：我在下拉菜单中选择地区，然后在下一个下拉菜单中我可以在所选地区的省份之间进行选择，然后在最后一个下拉菜单中我只能看到之前选择的省市。

我不知道如何做到这一点......你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T08:37:49.117

你可以使用这个插件，它很有帮助 [http://www.symfony-project.org/plugins/sfDependentSelectPlugin](http://www.symfony-project.org/plugins/sfDependentSelectPlugin)

# python - 用Python删除excel行

> ID：10339684
> 
> 赞同：2
> 
> 时间：2012-04-26T18:59:11.453
> 
> 标签：python, excel

我正在使用 python-excel 模块进行一些测试。我似乎找不到使用这些模块删除 Excel 工作表中的一行的方法，而且互联网也没有提供解决方案。有没有办法使用 python-excel 模块之一删除一行？

就我而言，我想打开一个excel表，读取第一行，确定它是否包含一些有效数据，如果没有，则将其删除。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:07:12.597

xlwt 提供了模块名称所暗示的 Excel 编写器（创建而不是修改）功能。另一方面，xlrd 提供 Excel 阅读器功能。

如果您的源 excel 文件相当简单（没有花哨的图表、数据透视表等），您应该这样做：

使用 xlrd 模块读取目标 excel 文件的内容，然后使用 xlwt 模块创建包含必要行的新 excel 文件。

但是，如果您在 Windows 平台上运行此程序，则可以直接通过 Microsoft COM 对象操作 Excel，[请参阅旧书参考](http://oreilly.com/catalog/pythonwin32/chapter/ch12.html#49339)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T17:35:11.133

我遇到了同样的问题，但发现了一个四处走走：

1.  使用自定义过滤器过程（Reader>Filter1>Filter2>...>Writer）生成源 excel 文件的副本，但在前面插入一个空白列。我们称这个文件*为 augmented.xls*。

2.  然后，`rb`使用 xlrd.open_workbook() 将 augmented.xls 读入 xlrd.Workbook 对象。

3.  使用 xlutils.copy.copy() 转换`rb`为 xlwt.Workbook 对象，`wb`.

4.  将每个待删除行的第一列的值设置为“x”（或其他值作为标记）`wb`。

5.  保存`wb`回*augmented.xls*。

6.  使用另一个自定义过滤器过程从*augmented.xls*生成结果 excel 文件，方法是省略第一列中带有“x”的行并将所有列向左移动一列（相当于删除第一列标记）。

定义过滤过程的信息和示例可以在[http://www.simplistix.co.uk/presentations/python-excel.pdf中找到](http://www.simplistix.co.uk/presentations/python-excel.pdf)

希望这在某种程度上有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-21T08:48:23.730

你可以使用图书馆[`openpyxl`](https://openpyxl.readthedocs.io/en/stable/usage.html)。打开文件时，它既可以用于读取**，也**可以用于写入。然后，通过一个简单的功能，您可以实现：

```
from openpyxl import load_workbook

wb = load_workbook(filename)

ws = wb.active()

first_row = ws[1]

# Your code here using first_row

if first_row not valid:
    ws.delete_rows(1, amount=1) 
```

# c# - 添加新的 ApplicationBarMenuItem 图标时无法分配给属性

> ID：10339685
> 
> 赞同：3
> 
> 时间：2012-04-26T18:59:16.463
> 
> 标签：c#, silverlight, windows-phone-7, shell, application-bar

我`ApplicationBarMenu`在 wp7 项目的页面中添加了一个带有图标的新按钮。尝试运行页面时，我得到：

> 未能分配给属性“Microsoft.Phone.Shell.ApplicationBarIconButton.Click”。[行：56 位置：124]

指向我添加的新菜单项按钮（第二个，`send_report_button`）：

```
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton x:Name="take_photo_button" IconUri="/Images/appbar.feature.camera.rest.png" Text="Take photo" Click="TakePhotoClick" />
        <shell:ApplicationBarIconButton x:Name="send_report_button" IconUri="/Images/mail.sent.png" Text="Send report" Click="SendReportClick" />
        <shell:ApplicationBarIconButton x:Name="logout_button" IconUri="/Images/appbar.logout.rest.png" Text="Logout"/>
        <shell:ApplicationBar.MenuItems>
            <!--<shell:ApplicationBarMenuItem x:Name="menuItem1" Text="MenuItem 1"/>
            <shell:ApplicationBarMenuItem x:Name="menuItem2" Text="MenuItem 2"/>-->
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

我已经检查了十次我有一个方法`.xaml.cs`：

```
private void SendReportClick(object sender, RoutedEventArgs e) 
```

但是，VS似乎仍然没有识别它，或者是其他错误。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T21:11:05.850

问题出在事件处理程序签名中。你有`RoutedEventArgs`作为第二个参数。它应该只是`EventArgs`。

[这是一个解释](https://stackoverflow.com/a/1428775/303696)。不要忘记应用栏是一个外壳对象。

# django - 无法公开访问但内部可访问的 Django 视图？

> ID：10339689
> 
> 赞同：0
> 
> 时间：2012-04-26T19:00:11.173
> 
> 标签：django, security

我想向服务器集群内部的应用程序公开一些视图。我怎样才能安全地做到这一点？

想要访问这些受限视图的应用程序也在使用 python，所以如果我可以绕过 HTTP 隧道并直接调用它们，那就更好了。如果是这种情况，我认为这些会更适合作为命令，但是另一个进程如何调用 Django 环境的命令呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:05:46.947

听起来您基本上想从您的 Django 站点中提取一些数据并在其他地方使用它。也许有几个[管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)会定期将它们的数据输出到某个目录中，然后您可以从其他 python 应用程序中读取这些数据？取决于您的数据需求是否可以选择。

我这样做是因为其他应用程序似乎在同一台服务器上（否则你怎么能从这些应用程序运行你网站的 python 代码？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:17:39.963

[加载项目设置后](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)，您可以充当项目本身。

# c# - MonoTouch.Dialog 并排放置两列

> ID：10339693
> 
> 赞同：2
> 
> 时间：2012-04-26T19:00:24.700
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

MonoTouch.Dialog 中的大多数示例（可能全部）用于创建 iPhone 应用程序，并且由于屏幕尺寸有限，应用程序以单列形式呈现，许多元素一个接一个地列出。

但在 iPad 中则不同，您实际上可以将两个对话框并排放置。有没有人知道如何实现这一目标？

（如果你不明白我的话......）

```
----------------------------------------------------------- 

| 字符串元素 | | 字符串元素 | | | 

| 字符串元素 | | 入口元素 | | | 

| 入口元素 | | _______________| | | 

| _____________ | | 布尔元素| | | 

| | | | | (0)| --> 主页按钮

| 字符串元素 | |_______________ | | | 

| 入口元素 | | | | | 

| _______________| | | | | 

| | | | | | 

-----------------------------------------------------------

```

（水平放置的 iPad）

这需要一些时间来解释。感谢您对此的任何线索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:09:49.290

一般来说，它是用`UISplitViewController`. [您可以从 Xamarin 的MWC2012 示例](http://blog.xamarin.com/2012/02/24/mwc_2012/)中查看有关如何执行此操作（以及在 iPad/iPhone 和其他平台之间共享代码）的（完整）示例。iPad/iPhone 版本确实使用 MonoTouch.Dialog。

但是还有其他方法可能更适合您的应用程序。我喜欢的一个（因为它也适用于 iPhone）是[FlyOutNavigation](https://github.com/Clancey/FlyOutNavigation)。示例代码还使用 MonoTouch.Dialog。

# visual-studio-2010 - 在 VS-2010 中，如何防止 Toolbox 覆盖当前窗口？

> ID：10339694
> 
> 赞同：0
> 
> 时间：2012-04-26T19:00:24.667
> 
> 标签：visual-studio-2010

我习惯了 VS-2008，使用“MDI”IDE，又名“重叠 Windows”。这似乎不是 VS-2010 中的选项，所以现在当我打开 Form1 并单击工具箱时……它会滑过并完全遮住 Form1。

所以......一个很好的解决方案会告诉我是否有办法让 vs2010 允许 MDI 接口。

否则，我怎样才能让工具箱滑动并滑动一组选项卡式窗口，以便我可以看到我正在将控件拖到什么上面？谢谢，--吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:03:41.613

您是否尝试过固定工具箱？工具箱顶部应该有一个图钉图标。如果单击它，工具箱将停留在屏幕上，但它会调整 Form1 窗口的大小，以便为工具箱窗口腾出空间。

# php - PHP 为每个语句拆分并向右浮动一半数据

> ID：10339697
> 
> 赞同：0
> 
> 时间：2012-04-26T19:00:44.637
> 
> 标签：php, css

我有下面的代码将我的 for 每个语句分成两个单独的 div：

```
<?php
    $previousLetter = false;
?>
<?php 
$i=1; // have a counter variable
foreach($this->clubs as $clubs) : ?>
    <?php
    $firstLetter = substr($clubs->club_name, 0, 1);
    if ($firstLetter != $previousLetter) {
    if($i==1){
        echo "<div class="left_class">"; // open left div
    }
    ?>
        <h3 id="club-link-header"><u><?php echo $firstLetter; ?></u></h3>
    <?php } ?>
        <a id="club-link" href="<?php echo $this->url(array('controller' => 'club-description', 'action' => 'index', 'club_id' => $clubs->id));?>"><br />
        <?php echo $this->escape($clubs->club_name);?></a>
    <?php $previousLetter = $firstLetter; ?>
<?php 
    if($i==25){
        echo "</div>"; //close left div
        echo "<div class="right_class">"; // open right div
    }

    if($i==50){
        echo "</div>"; //close right div
    }

$i++; // increment the counter variable for each loop
endforeach; 
?> 
```

的HTML：

```
<body>
        <div id="top">
            <a id="admin-link" href="/MN/public/index.php/admin/index/id/1"></a>
    <div id="logged-in-as">
        Hello! ric89\. <a href="/MN/public/index.php/auth/logout">Logout</a>    </div>

</div>
    <div id="header">
    <div id="header-wrapper">
            <div id="social">
                <a id="fb" href="#"><img src="/MN/public/images/fb.png" /></a>
                <a id="twitter" href="#"><img src="/MN/public/images/twitter.png" /></a>
            </div>
            <div id="nav">
                <div id="nav-left">
                    <a href="/MN/public/index.php/index/index/id/1">Home</a>
                </div>
                <div id="nav-middle">
                    <a id="clubs-link" href="/MN/public/index.php/clubs/index/id/1">Clubs</a>
                    </div>
                <div id="nav-right">
                    <a id="admin-link" href="/MN/public/index.php/admin/index/id/1">Admin</a>
                </div>
            </div>
            <div id="logo">

             </div>

    </div>

</div>
    <div id="content">
        <h1>Clubs</h1>
           //database content is echo'd here, 50 items like this:
           <h3 id="club-link-header"><u>5</u></h3>
        <a id="club-link" href="/MN/public/index.php/club-description/index/id/1/club_id/1"><br />
    5th Avenue</a>
    </div>
<div id="footer">
        <p id="footer-text">created & designed by <a href="http://www.richardgregson.info" target="_blank">Richard Knight-Gregson</a></p>
</div>
</body> 
```

CSS：

```
/*Content styles */

.clubs-left {
    width: 450px;
}

.clubs-right {
    float: right;
    margin-left: 450px;
    position: absolute;
    width: 450px;
}

.right_class {
    float: right;
    width: 450px;
}

.left_class {
    position: absolute;
    width: 450px;
}

.clear {
    clear: both;
} 
```

这是问题的图片 -> [http://imageshack.us/photo/my-images/84/screenshot20120426at211.png/](http://imageshack.us/photo/my-images/84/screenshot20120426at211.png/)页脚应该是 100% 宽度。

问题是我不能在不破坏布局的情况下向右浮动 div，因为右 div 需要位于代码左侧的顶部，但这样做会破坏 PHP。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:36:11.587

由于您描述接缝的问题纯粹是装饰性的，我相信您需要清除浮动以允许文档继续正常呈现：

在你之后`<div class="right_class">...</div>`：

**HTML**

```
<div class="clear"></div> 
```

**CSS**

```
.clear {clear: both;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:39:18.707

这样的事情不会更有效率吗？

按字母分解您的列表以开始...

```
var glossary=array();
var $half=(int)count($this=>clubs);

 var $count=0;

foreach ($this->clubs as $clubs){
        $glossary[substr($clubs->club_name, 0, 1)][] = $clubs;
    }
    # Start a definition list.  (http://www.w3schools.com/tags/tag_dl.asp)
    echo'<dl>';
    foreach ($glossary as $letter => $clubs){
        $count++;
        $class=($count>=$half)?'float_left':'float_right';
    # list all the clbs broken down by letter
        echo"<dt class='$class'>$letter</dt>";
        foreach ($clubs as $club)
        {

            echo"<dd class='$class'>
                <a id='club-link' href='" . $this->url(array('controller' => 'club-description', 'action' => 'index', 'club_id' => $club->id)) . "'>
            " . $this->escape($clubs->club_name) .
                "</a>
            </dd>";
        }
    }
    echo '</dl>'; 
```

和CSS：

```
dl{
   width:100%;
}

.float_left{
   width:49%;
   float:left;
   clear:left;
}
.float_right{
   width:49%;
   float:right;
   clear:right;
} 
```

这样，当你击中球杆的中点后，dt 和 dd 元素在右侧堆叠，无论你有多少球杆，列表都会自动平衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:35:06.380

事实证明，页脚位于内容 div 内，而在页脚开始之前，我还没有正确关闭内容 div 就足够了！很抱歉浪费你的时间。。

# mysql - MySQL：更新语句期间的“where子句中的未知列”

> ID：10339699
> 
> 赞同：2
> 
> 时间：2012-04-26T19:00:51.297
> 
> 标签：mysql, sql, sql-update

```
UPDATE Recipes RE, (
    SELECT SUM((((i.iCaseCost/i.iCaseQty)/i.iUnitSize)/i.iUnitSoldBy)*ri.riQty*ri.riMeasureBy) AS     'RecipeCost'
      FROM Recipes r INNER JOIN RecipeIngredients ri
        ON r.rID = ri.rID JOIN Ingredients i
        ON ri.iID = i.iID 
        WHERE ri.rID = RE.rID
    ) t
    SET RE.rYieldCost = t.RecipeCost 
```

执行时，我收到以下错误：“'where 子句'中的未知列'RE.rID'”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:05:23.617

您的内部派生查询对外部查询中的列一无所知。尝试将 WHERE 移动到 UPDATE 子句中，例如`WHERE t.rID = RE.rID`.

# lucene - 带有词干分析器的 Lucene 荧光笔

> ID：10339704
> 
> 赞同：5
> 
> 时间：2012-04-26T19:01:15.260
> 
> 标签：lucene, full-text-search, highlighting, analyzer, snowballanalyzer

我正在使用 Lucene 的 Highlighter 类来突出显示匹配搜索结果的片段，并且效果很好。我想从使用 StandardAnalyzer 搜索切换到 EnglishAnalyzer，它将执行词干提取。

搜索结果很好，但现在荧光笔并不总能找到匹配项。这是我正在查看的示例：

```
document field text 1: Everyone likes goats.

document field text 2: I have a goat that eats everything. 
```

使用 EnglishAnalyzer 并搜索“goat”，两个文档都匹配，但荧光笔只能从文档 2 中找到匹配的片段。有没有办法让荧光笔返回两个文档的数据？

我知道标记的字符不同，但相同的标记仍然存在，因此仅突出显示该位置存在的任何标记似乎是合理的。

如果有帮助，这是使用 Lucene 3.5。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T20:22:09.660

我找到了解决这个问题的方法。我从使用`Highlighter`类更改为使用`FastVectorHighlighter`. 看起来我也会获得一些速度改进（以存储术语向量数据为代价）。为了以后遇到这个问题的任何人的利益，这里有一个单元测试，展示了这一切如何协同工作：

```
package com.sample.index;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.en.EnglishAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.search.vectorhighlight.*;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;
import org.junit.Before;
import org.junit.Test;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import static junit.framework.Assert.assertEquals;

public class TestIndexStuff {
    public static final String FIELD_NORMAL = "normal";
    public static final String[] PRE_TAGS = new String[]{"["};
    public static final String[] POST_TAGS = new String[]{"]"};
    private IndexSearcher searcher;
    private Analyzer analyzer = new EnglishAnalyzer(Version.LUCENE_35);

    @Before
    public void init() throws IOException {
        RAMDirectory idx = new RAMDirectory();
        IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35, analyzer);

        IndexWriter writer = new IndexWriter(idx, config);
        addDocs(writer);
        writer.close();

        searcher = new IndexSearcher(IndexReader.open(idx));
    }

    private void addDocs(IndexWriter writer) throws IOException {
        for (String text : new String[] {
              "Pretty much everyone likes goats.",
              "I have a goat that eats everything.", 
              "goats goats goats goats goats"}) {
            Document doc = new Document();
            doc.add(new Field(FIELD_NORMAL, text, Field.Store.YES, 
                    Field.Index.ANALYZED, Field.TermVector.WITH_POSITIONS_OFFSETS));
            writer.addDocument(doc);
        }
    }

    private FastVectorHighlighter makeHighlighter() {
        FragListBuilder fragListBuilder = new SimpleFragListBuilder(200);
        FragmentsBuilder fragmentBuilder = new SimpleFragmentsBuilder(PRE_TAGS, POST_TAGS);
        return new FastVectorHighlighter(true, true, fragListBuilder, fragmentBuilder);
    }

    @Test
    public void highlight() throws ParseException, IOException {
        Query query = new QueryParser(Version.LUCENE_35, FIELD_NORMAL, analyzer)
                    .parse("goat");
        FastVectorHighlighter highlighter = makeHighlighter();
        FieldQuery fieldQuery = highlighter.getFieldQuery(query);

        TopDocs topDocs = searcher.search(query, 10);
        List<String> fragments = new ArrayList<String>();
        for (ScoreDoc scoreDoc : topDocs.scoreDocs) {
            fragments.add(highlighter.getBestFragment(fieldQuery, searcher.getIndexReader(), 
                    scoreDoc.doc, FIELD_NORMAL, 10000));
        }

        assertEquals(3, fragments.size());
        assertEquals("[goats] [goats] [goats] [goats] [goats]", fragments.get(0).trim());
        assertEquals("Pretty much everyone likes [goats].", fragments.get(1).trim());
        assertEquals("I have a [goat] that eats everything.", fragments.get(2).trim());
    }
} 
```

# .net - 编译时参考神秘消失

> ID：10339711
> 
> 赞同：1
> 
> 时间：2012-04-26T19:01:57.777
> 
> 标签：.net, reference, exchange-server

我有一个程序，我需要从我们的交换服务器获取电子邮件。我从一个旧项目中得到这个：

```
Dim oExchService As New ExchangeService(Microsoft.Exchange.WebServices.Data.ExchangeVersion.Exchange2007_SP1)
                    oExchService.Credentials = New Net.NetworkCredential(strUserName, strPassword, strDomain)
                    oExchService.Url = New Uri(strServeur)

                    Dim oItemView As New ItemView(1000)
                    oItemView.Traversal = ItemTraversal.Shallow

                    Dim oLstItems As FindItemsResults(Of Item) = oExchService.FindItems(WellKnownFolderName.Inbox, oItemView)
                    'Importation de chaque fichier
                    For Each oItem As Item In oLstItems
                        If oItem.HasAttachments Then

                        End If
                    Next 
```

我添加了对 Microsoft.Exchange.webservice.dll 的引用，这也是我从另一个项目中获得的，并在文件中导入了引用。一切似乎都很好，我可以与班级内的成员一起工作。当我点击编译时，进口声明得到绿色下划线，说明参考不存在或没有任何公共成员......

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:01:01.327

好的，

最后，它是目标框架。

这个工作：http: [//social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/26f1a426-f42d-4bab-8245-1a77c3f09251](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/26f1a426-f42d-4bab-8245-1a77c3f09251)

# php - 如何使用 Maven 调用 Ant Builts

> ID：10339712
> 
> 赞同：2
> 
> 时间：2012-04-26T19:01:58.230
> 
> 标签：php, maven, ant

我有许多使用 ANT 运行的 php 项目子模块 [它只是复制文件并运行 SQL]。

现在我需要实现 Maven 来处理未来的单元测试 + [Maven 是我们将来需要使用的最好的工具。]

我已经在 Eclipse 中安装了 Maven for php。我在 IDE 中使用 Maven 创建了一个新项目。我也可以运行项目。[我是 Maven 的菜鸟，但擅长`ANTs`]

现在我想使用 Maven 项目调用那些子模块 ANT 的 xml。有[ANT RUN](http://maven.apache.org/plugins/maven-antrun-plugin/)可以为 Maven 解决问题，但我无法：

*   弄清楚如何`ANT xml`在 Maven 项目之外引用模块。
*   Ant 仅仅链接 XML 就可以完成这项工作吗？还是我需要更多的依赖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:41:26.200

您可以在 Maven 的 Ant Run 插件的[目标](http://maven.apache.org/plugins/maven-antrun-plugin/run-mojo.html#target)配置元素中简单地使用[ant](http://ant.apache.org/manual/Tasks/ant.html)任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:33:02.547

使用 Maven [ant runner 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)调用 ANT 逻辑，使用 ANT 的[subant](http://ant.apache.org/manual/Tasks/subant.html)任务

# 例子

```
$ tree
.
|-- pom.xml
`-- src
    `-- main
        `-- ant
            |-- module1
            |   `-- build.xml
            `-- module2
                `-- build.xml

5 directories, 3 files 
```

## pom.xml

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myspotontheweb.demo</groupId>
    <artifactId>demo</artifactId>
    <version>1.0-SNAPSHOT</version>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <configuration>
                            <target>
                                <property name="src.dir" location="${project.build.directory}/../src"/>
                                <subant>
                                    <fileset dir="${src.dir}" includes="**/build.xml"/>
                                </subant>
                            </target>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

ANT 被配置为在 Maven 构建的“编译”阶段运行。ANT 逻辑使用[subant](http://ant.apache.org/manual/Tasks/subant.html)任务来运行外部 ANT 逻辑。

## 运行示例

```
$ mvn compile
..    
..
[INFO] --- maven-antrun-plugin:1.7:run (default) @ demo ---
[INFO] Executing tasks

main:

main:
     [echo] module1: hello world

main:
     [echo] module2: hello world
[INFO] Executed tasks
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.394s
[INFO] Finished at: Fri Apr 27 20:25:35 IST 2012
[INFO] Final Memory: 4M/15M
[INFO] ------------------------------------------------------------------------ 
```

# php - MySql - 根据另一列的值更新某些行的列值

> ID：10339717
> 
> 赞同：0
> 
> 时间：2012-04-26T19:02:07.903
> 
> 标签：php, mysql, sql-update

那么我有一个情况，我将在下面用一个例子来解释

**第 1 栏 第 2 栏 第 3 栏**

```
 1       87       0
   6       89       0
   8       87       1
   9       87       0
  15       89       0
  18       90       1 
```

所以我有一个案例，对于 column2 的相同值，column3 值是唯一的

所以这里让我们将 column2 的值视为 87。所以我们有 3 个这样的记录，但我想要 column3 中这三个记录的唯一值。所以我的意思是这三个记录中应该只有一个在 column3 中的值为 1，其余的应该是 0。

因此，假设我想将这些记录集的 column3 的值更新为 1，其中 column1 的值为 9，并在 column1 的值为 8 且 column2 的值为 87 时将 column3 的值设置为 0。所以我无法弄清楚如何做到这一点。

如果 column2 值为 87，我尝试将所有 column3 值重置为 0，然后更新特定的所需记录。但这并没有发生。还有其他可能的解决方案吗？？

# sql-server - 由于临时表而超时

> ID：10339726
> 
> 赞同：1
> 
> 时间：2012-04-26T19:02:58.300
> 
> 标签：sql-server, stored-procedures, timeout

在我的存储过程中，我`#temptable`用来从一个表中获取数据并更新它`#temptable`以获得结果。在我的生产环境中，此存储过程消耗大量时间，有时会导致超时，但在较低的环境中，此查询绝对完美。

```
 CREATE TABLE #TempTable
 (
  ID int IDENTITY PRIMARY KEY,
  TOTALPOLICY nvarchar(14),
  SYMBOL nvarchar (3),
  POLNUM nvarchar (7),
  MODULE nvarchar (2),
  LOC char (2),
  MCO char (2),
  LOB char (3),
  INSUREDNAME nvarchar (100),
  TotalPremium decimal (10,2),
  ServiceCharges decimal (10,2),
  TotalPaid decimal (10,2),
  TotalRefunded decimal (10,2),
  CurrentBalance decimal (10,2),
  TotalBilled decimal (10,2),
  PCO char (2)
 )

INSERT INTO #TempTable (TOTALPOLICY,SYMBOL, POLNUM, MODULE, LOC, MCO, LOB, INSUREDNAME,TotalPremium, ServiceCharges, TotalPaid, TotalRefunded, CurrentBalance, TotalBilled, PCO) --PCR 109 SMT added PCO
       EXEC(@sql)

--PCR 109 Start SMT
Update #TempTable 
    Set TotalPaid = IsNull((Select sum(PaymentAmt) 
    From SHCashActivity with (nolock)
Where #TempTable.POLNUM = PolicyNbr 
      and #TempTable.Module = PolicyModuleNbr 
      and #TempTable.Symbol = PolicySymbolCd 
      and CashActivityTypeCd in ('P', 'C', 'N') 
      and CashAppliedStatusCd in ('1','2')), 0) 
```

请告诉我什么可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:05:56.663

问题不在于临时表。问题是这个过程耗时太长。重新设计您的流程，以便在更可接受的时间内生成答案。

此外，您的更新声明很难阅读。如果向 SHCashActivity/#TempTable 添加与另一个表中的字段名称匹配的字段，它也容易被破坏。创建表别名并将它们用于所有字段访问。

此外，在#TempTable（POLNUM、Module、Symbol）上创建索引 X
也会有所帮助。索引中字段的正确顺序将取决于 SHCashActivity 上的索引。

# ruby-on-rails - 如何从远程应用程序获取 Json 数据

> ID：10339727
> 
> 赞同：0
> 
> 时间：2012-04-26T19:02:59.290
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的 Rails 应用程序中有一个控制器，用于呈现 json 数据

```
def show
 @visit = Visit.all
 @count = @visit.first.count unless @visit == [] 
 respond_to do |format|
  format.html # new.html.erb
  format.xml  { render :xml => @visit.first }
  format.json {render :partial => "this.json"}
 end
end 
```

我的另一个应用程序我做了一个简单的 ajax 请求以从我的视图中获取 json 字符串

```
$.ajax({
url: 'http://url.com/show.json', 
success: function( data ){
    console.log(data);
  $('#data').html(data);
 }
});​ 
```

对于跨域标头，我使用 Rack Cors

```
use Rack::Cors do
 allow do
  origins '*'
  # regular expressions can be used here
  resource '/countvisit/*', :headers => :any, :methods => :any
  # headers to expose
 end
end 
```

我没有从 ajax 请求中得到任何回报。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:12:47.237

您正在尝试渲染 'this.json' 部分而不是实际的 json 字符串。

不应该`format.json {render :json=> "this.json"}`取而代之吗？

# java - 如何在 JSF 中做迷你模板系统？

> ID：10339732
> 
> 赞同：0
> 
> 时间：2012-04-26T19:03:29.697
> 
> 标签：java, jsf, template-engine

首先，我想描述一下Mini-Template System是什么意思。例如；我有一个用户上传的 html 文件。有很多 html/css 代码。我需要确定一些标签，如 html。如果用户将**{posts} {/posts}**写入 html。系统应该运行 listPosts 方法。我知道，我应该用正则表达式来做到这一点。但我不知道如何读取 html 文件？我应该用 Java 的文件类来阅读这个文件吗？或者 php 中是否有类似 file_get_contents() 方法的东西？另外，如果我使用 Java 的文件类，我怎样才能读取组中的所有 html 标记？感谢您帮助致以最诚挚的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:37:35.250

我对你的建议是使用 HtmlCleaner：
[http ://htmlcleaner.sourceforge.net/](http://htmlcleaner.sourceforge.net/)

当您可以获得特定的 html 标签时，它会非常有帮助......

# gnuplot - gnuplot 在同一张图上用单列数据绘制两个图

> ID：10339733
> 
> 赞同：2
> 
> 时间：2012-04-26T19:03:33.410
> 
> 标签：gnuplot

有两个数据文件，比如**data1.txt**：

```
31231
32312
32323
32323 
```

**数据2.txt**：

```
32323
54223
32456
45321 
```

我想在同一张图上绘制这两个图，我该如何`gnuplot`实现呢？非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T19:14:19.470

`plot`您可以在一个带有两个参数的命令中在同一个图形上获得两个图，`datafile`用逗号分隔。例如

```
 plot [-1:5] 'data1.txt' with points, 'data2.txt' with points 
```

会给你这样的东西：

![在此处输入图像描述](../Images/bc4b57d5461a666fed56f13d883e4543.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-10T03:20:31.490

这对我有用：

```
reset 
set term pngcairo
set output 'wall.png'
set xlabel "Length (meter)"
set ylabel "error (meter)"
set style line 1 lt 1 linecolor rgb "yellow" lw 10 pt 1
set style line 2 lt 1 linecolor rgb "green" lw 10 pt 1
set style line 3 lt 1 linecolor rgb "blue" lw 10 pt 1
set datafile separator ","
set key
set auto x
set xtics 1, 2, 9
set yrange [2:7]
set grid

set label "(Disabled)" at -.8, 1.8
plot  "file1.csv" using 1:2 ls 1 title "one" with lines ,\
  "file2.csv" using 1:2 ls 2 title "two" with lines ,\
  "file3.csv" using 1:2 ls 3 title "three" with lines
set output 
```

# php - 遥控闪光灯演示

> ID：10339734
> 
> 赞同：1
> 
> 时间：2012-04-26T19:03:36.337
> 
> 标签：php, flash

首先，我要感谢你们这些年来为我提供的所有帮助，我一直是一个潜伏者，但现在我有一些知识，想为人们的问题做出贡献。

我的问题是：

我的朋友让我帮他开发某种用于 Flash 演示的远程控制，例如他可以使用 PHP 页面或其他东西远程将参数发送到 Flash 文件，并告诉 Flash 文件播放特定点那个文件。

他正在参加他之前赢得的动画颁奖典礼的评审团，组织者希望他的角色也出现在评审团中，向提名的参与者提供反馈。所以本质上我们需要一定数量的响应，让我的朋友能够选择响应和 Flash 文件来播放它。

流程如下：

移动设备上的 HTML 页面 -> 选择响应 -> 发送到远程服务器的响应 -> 播放特定响应的 Flash 文件。

有没有人听说过这样的事情？或者，如果你能指出我在谷歌上搜索什么的正确方向，那就太好了。

再次感谢您的所有帮助。

卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:16:24.737

这是可行的，但是....您真的需要 IP 解决方案吗？你不能让一个人在房间里吗？

# django - 具有奇怪模型关系的 Django 表单

> ID：10339742
> 
> 赞同：0
> 
> 时间：2012-04-26T19:04:11.100
> 
> 标签：django, django-forms

我正在使用一个无法修改的现有数据库，并且在尝试处理在 Django 中修改数据库的呈现表单时遇到了一些麻烦。有问题的结构如下，所有模型都是非托管的。

```
class Persons(models.Model):
    personid = models.BigIntegerField(primary_key=True, db_column='PersonID') 
    ....

class Phones(models.Model):
    phoneid = models.BigIntegerField(primary_key=True, db_column='PhoneID') 
    number = models.CharField(max_length=60, db_column='Number', blank=True)
    type = models.CharField(max_length=15, db_column='Type', blank=True)
    ...

class Personsphones(models.Model):
    personphoneid = models.BigIntegerField(primary_key=True, db_column='PersonPhoneID')
    personid = models.ForeignKey(Persons, db_column='PersonID') 
    phoneid = models.ForeignKey(Phones, db_column='PhoneID')
    ... 
```

我想创建一个表单来显示与特定“人员”关联的所有“电话”，此外还能够修改/添加/删除属于“人员”的“电话”。现在我唯一能想到的就是在模型集中显示“电话”，然后如果添加或删除一个，手动设置“人员电话”关系。关于如何最好地处理此模型设置的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:17:15.247

要更改您的模型，您可能需要使用 django-south [http://south.aeracode.org/docs/](http://south.aeracode.org/docs/) 至于在 forms.py 下显示您的“电话”，您可能需要像这样设置类元。这样，对模型所做的任何更改都将反映更改

```
class Meta:
    model = Persons
    exclude = ('user') 
```

在模型中，您可能希望在电话和人员之间使用外键关系。在这里更好地看到行动[https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)

# django - nginx、django 和 x_requested_with：request.is_ajax() 返回 False

> ID：10339745
> 
> 赞同：1
> 
> 时间：2012-04-26T19:04:23.097
> 
> 标签：django, http, nginx

我的 Django 视图中有这段代码：

```
if request.is_ajax():
    if request.method == 'POST':
        data = json.loads(request.raw_post_data) 
```

我通过 CURL 发送这个请求：

```
curl -v -i -H "Content-Type:application/json" -H "X_REQUESTED_WITH:XMLHttpRequest" -X POST -d '{"tweet_id":"189881044923719680", "question_id":"1", "choice_one":"T", "choice_two":"F", "choice_three":"F", "extra_passback":"common cold"}' http://ec[...].compute-1.amazonaws.com/question/answer/ 
```

当我点击我的开发 Django 服务器时，这有效。在生产中，我正在运行 nginx 和 gunicorn。并且 curl 语句不起作用。

request.is_ajax() 返回 False（is_ajax 查找 x_requested_with 标头）。

我认为这可能与 NGINX 配置有关。但我不确定。我需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:00:03.797

尝试`X_REQUESTED_WITH:XMLHttpRequest`用破折号更改下划线：`X-REQUESTED-WITH:XMLHttpRequest`。

我对 nginx 有同样的问题，因为代理`X_REQUESTED_WITH`从请求中删除了该字段。默认情况下，nginx 将带有下划线的标头标记为无效并忽略无效标头。

您可以使用 nginx 指令来允许标头中使用下划线`underscores_in_headers on;`或不忽略带有`ignore_invalid_headers off;`.

在我的具体案例中，我使用 python 请求作为客户端，django 作为服务器，nginx 作为代理，并解决了我重命名`X_REQUESTED_WITH`为`X-REQUESTED-WITH`. （Django`'HTTP_'`在使标头可用之前自动添加到 x-header 名称的开头`request.META.`）

```
import requests
headers = {'X-REQUESTED-WITH':'XMLHttpRequest'}
r = requests.post(url, data=payload, headers=headers) 
```

# php - 将 CURL_OPTPOST 设置为 true 时，CURL http 身份验证失败

> ID：10339746
> 
> 赞同：2
> 
> 时间：2012-04-26T19:04:24.150
> 
> 标签：php, curl

我正在尝试构建一个与 Firstdata 的 api 集成的支付表单。我需要将 XML 字符串发布到他们的服务器。它们还需要客户端证书和 http 身份验证。我的 CURL 设置目前如下所示：

```
function firstdata_send($config_param, $data) {
  $config_default = array(
    'test' => FALSE,
  );
  // settings in $config_param will overwrite settings in $config_default
  $config = (object)array_merge($config_default, $config_param);

  if($config->test) {
    $url = 'https://ws.merchanttest.firstdataglobalgateway.com/fdggwsapi/services/order.wsdl';
  }
  else {
    $url = 'https://ws.firstdataglobalgateway.com/fdggwsapi/services/order.wsdl';
  }

  $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_POST, TRUE);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
  curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
  curl_setopt($ch, CURLOPT_USERPWD, "{$config->username}:{$config->password}");
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
  curl_setopt($ch, CURLOPT_SSLCERT, $config->pemfile);
  curl_setopt($ch, CURLOPT_SSLKEY, $config->keyfile);
  curl_setopt($ch, CURLOPT_SSLKEYPASSWD, $config->keypass);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
  curl_setopt($ch, CURLOPT_HEADER, TRUE);
  curl_setopt($ch, CURLOPT_VERBOSE, TRUE);
  $result = curl_exec($ch);
  $result .= curl_error($ch);
  return $result;
} 
```

他们的服务器以`HTTP/1.1 401 Unauthorized`. 但是，如果我注释掉帖子选项：

```
 //curl_setopt($ch, CURLOPT_POST, TRUE);
  //curl_setopt($ch, CURLOPT_POSTFIELDS, $data); 
```

我明白了`HTTP/1.1 200 OK`。除非我完全误解了发生了什么，否则使用 post 似乎会以某种方式干扰 auth 标头。我不知道我错过了什么。

解决了：

结果证明测试帐户生成的 ssl 证书很糟糕。我不得不打电话给他们的技术支持，他们必须重新生成证书 3 次，然后系统才会接受它们。很抱歉浪费您的时间。我应该先打电话给他们。如果有人感兴趣，我拨打的技术支持号码是 (888) 477-3611。我认为 NomikOS 最接近正确，所以我会将他标记为答案，并投票给你们其他人。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:44:57.070

形成我认为您需要格式`certificate`才能`pem`使用此服务....

A. 下载 API [https://www.firstdata.com/downloads/customerservice/30006_api_php.zip](https://www.firstdata.com/downloads/customerservice/30006_api_php.zip)

B. 你会看到很多例子

示例销售信息

```
 include"lphp.php";
    $mylphp=new lphp;

    $myorder["host"]       = "secure.linkpt.net";
    $myorder["port"]       = "1129";
    $myorder["keyfile"]    = "./YOURCERT.pem"; # Change this to the name and location of your certificate file 
    $myorder["configfile"] = "1234567";        # Change this to your store number 

    $myorder["ordertype"]    = "SALE";
    $myorder["result"]       = "LIVE"; # For a test, set result to GOOD, DECLINE, or DUPLICATE
    $myorder["cardnumber"]   = "4111-1111-1111-1111";
    $myorder["cardexpmonth"] = "01";
    $myorder["cardexpyear"]  = "05";
    $myorder["chargetotal"]  = "9.99";

    $myorder["addrnum"]   = "123";   # Required for AVS. If not provided, transactions will downgrade.
    $myorder["zip"]       = "12345"; # Required for AVS. If not provided, transactions will downgrade.
//  $myorder["debugging"] = "true";  # for development only - not intended for production use

  # Send transaction. Use one of two possible methods  #
//  $result = $mylphp->process($myorder);       # use shared library model
    $result = $mylphp->curl_process($myorder);  # use curl methods

    if ($result["r_approved"] != "APPROVED")    // transaction failed, print the reason
    {   
        print "Status: $result[r_approved]\n";
        print "Error: $result[r_error]\n";
    }
    else
    {   // success
        print "Status: $result[r_approved]\n";
        print "Code: $result[r_code]\n";
        print "OID: $result[r_ordernum]\n\n";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:15:52.130

检查您的访问凭据（用户名、密码）

> 401未经授权
> 
> 该请求需要用户身份验证。响应必须包含一个 WWW-Authenticate 头字段（第 14.47 节），其中包含适用于所请求资源的质询。客户端可以使用合适的授权头域重复请求（第 14.8 节）。**如果请求已包含授权凭证，则 401 响应指示已拒绝对这些凭证的授权**. 如果 401 响应包含与先前响应相同的质询，并且用户代理已经尝试了至少一次身份验证，则应该向用户呈现响应中给出的实体，因为该实体可能包含相关的诊断信息。HTTP 访问身份验证在“HTTP 身份验证：基本和摘要式访问身份验证”[43] 中进行了说明。

来源：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2)

==

OBS：我建议您使用此代码检查错误

```
// check for errors before close
$result = curl_exec($ch);
if ($result === false)
{
    echo curl_error($ch);
}
curl_close($ch); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:39:24.037

刚刚检查过 First Datas API 是一个基于 SOAP 的 API ...

wsdl 的 url 只接受 GET，因为 wsdl 只是用于发送 soap 调用的 xml 指令集。

[PHP 肥皂客户端类](http://www.php.net/manual/en/class.soapclient.php)

# c# - 实体框架 - 存储过程返回值

> ID：10339750
> 
> 赞同：12
> 
> 时间：2012-04-26T19:04:42.900
> 
> 标签：c#, sql, entity-framework, stored-procedures

我正在尝试获取存储过程的返回值。以下是此类存储过程的示例：

```
select
    Name,
    IsEnabled
from
    dbo.something
where
    ID = @ID

if @@rowcount = 0
    return 1    

return 
```

这是一个简单的选择。如果找到 0 行，我的结果集将为空，但我仍然会有一个返回值。

这是一个不好的例子，因为这是一个选择，所以我可以确定是否返回了 0 行。但是，在 Insert、delete 或其他调用中，我们需要此返回值来了解是否存在问题。我一直无法找到获取此返回值的方法。我可以得到输出值，我可以得到结果集，但没有返回值。

如果我手动调用 SQL，或者即使我`SqlCommand`使用实体框架运行 SQL，我也可以获得返回值，但这不是我想要做的。

有没有人能够使用实体框架从存储过程中获取返回值？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-13T06:11:14.207

我猜对存储过程返回值的支持取决于实体框架的版本。虽然直接返回值对我不起作用，但我设法使用 OUTPUT 存储过程参数获取值。例子：

```
USE [YOUR_DB_NAME]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[TestReturnValue]
    @InputValue int = 0,
    @Result int OUTPUT
AS
BEGIN
    SET NOCOUNT ON;
    SELECT @Result  = @InputValue
    RETURN(@InputValue);
END 
```

这是测试代码：

```
void TestReturnValue()
{
    using (var db = new YourDBContext())
    {
        var result = new System.Data.Objects.ObjectParameter("Result", 0);
        Console.WriteLine("SP returned {0}", db.TestReturnValue(123, result));
        Console.WriteLine("Output param {0}", result.Value);
    }
} 
```

这是输出：

```
SP returned -1
Output param 123 
```

如您所见，直接返回值输出一些垃圾，但 OUTPUT 参数有效！

[本文提供有关从 SP 返回值的两种方式的一般信息](http://msdn.microsoft.com/en-us/library/ms188655.aspx)

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T19:30:14.510

不。实体框架没有丰富的存储过程支持，因为它是 ORM，而不是 SQL 替代品。

正如您已经发现的那样，如果您需要使用存储过程的不太常见（更高级？）的功能，则必须使用良好的老式 ADO.NET。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T17:59:19.653

我已经能够使用代码优先方法通过 Entity Framework 5（但我认为它适用于 4.x 版）获取返回值（以及输出和输入参数）。从您的帖子中，我看不到您使用的是什么版本的 EF 以及您如何进行映射；如果您考虑在这里使用代码优先方法，您可以找到我的帖子以及解决方案：

[从存储过程中获取返回值](https://stackoverflow.com/questions/14735477/entity-framework-code-first-get-return-value-from-stored-procedure)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T09:51:36.320

必须使用“Context.Database.SqlQuery”，并指定存储过程的输出类型

```
 var spReturnVaue = Context.Database.SqlQuery<Type>("[schema].YourSp").FirstOrDefault();

        int firstId = Context.Database.SqlQuery<int>("[dbo].GetFirstId").FirstOrDefault(); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-26T19:30:39.050

为了在 EF 中获得感兴趣的结果，您应该返回相同的结构（不是 1 和 Name，IsEnabled） 在此查询中，您应该返回 '',0 例如，而不是 if 条件中的 1：

```
选择
    姓名，
    已启用
从
    dbo.something
在哪里
    ID = @ID

如果@@rowcount = 0
    返回'',0

```

# mysql - 将多个 (100+) Excel 文件导入 MySQL 表

> ID：10339752
> 
> 赞同：0
> 
> 时间：2012-04-26T19:04:53.527
> 
> 标签：mysql, import

我有 100 多个 XLSX 文件需要进入 MySQL 数据库。每个文件都有点不同，所以我创建了一个大表，其中包含所有文件中每个可能的列标题的字段。这样他们就可以在导入时自动映射。

使用 Navicat 我可以一次导入一个文件，但我想知道是否有一种方法可以一次导入所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:36:02.117

我在想“不”，但是如果您要经常这样做，我认为有办法使之自动化。

将您的 xls 文件导出为 csv 文件。编写一些脚本将它们从 csv-excel 样式转换为 csv-mysql 样式。

[使用csv 引擎](http://dev.mysql.com/doc/refman/5.5/en/csv-storage-engine.html)创建用于导入的表。将您的文件放在由 mysql 和刷新表创建的文件的位置。现在您的数据已准备好在 mysql 中读取并复制到更强大的表引擎中。

[另一种方法是执行 VBA 脚本，以加载数据 infile](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)识别的格式导出数据，然后使用 mysql 加载它们。

# database - 数据库规范化第二种形式：字段是否也应该依赖于 FK？

> ID：10339753
> 
> 赞同：0
> 
> 时间：2012-04-26T19:04:58.250
> 
> 标签：database, database-design

我正在努力为场景建模并遇到一个问题，在规范化表的同时，我们是否应该将 FK 也视为确定字段是否应该在同一个表或其他表中的关键？

例如，我有用户和团队表（一个用户可能零个或多个考虑不同运动的团队）。

```
Owner                                       Teams

 -----                                    -------- 
OwnerID ---PK                              TeamID  ---PK
OwnerName                                  OwnerID    ---FK  
                                          TeamManager
                                          TeamLogo 
```

如果我们观察到这种关系，TeamManager 和 TeamLogo 完全（在功能上）仅依赖于 TeamID，而不依赖于 UserID（我理解这一点是否正确？）。我们是否应该为 UserID 和 TeamID 建立另一个表来建立关系？

任何建议都会非常有帮助。

这不是家庭作业。我正在为一个网站建模并提高我对范式的知识，以获得最佳的可扩展数据库设计。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:43:06.403

> ...我们是否应该将 FK 也视为确定字段是否应该在同一个表或其他表中的关键？

作为参照完整性的**子**端点与作为密钥正交（即，FK 子节点可能是也可能不是密钥）。名称“外*键*”仅指父端点，它*必须*是键（在大多数 DBMS 中）。

因此，在您的示例中，`Teams.OwnerID`不一定*是*键（根据您的描述，实际上不是）。

> 如果我们观察到这种关系，TeamManager 和 TeamLogo 完全（在功能上）仅依赖于 TeamID，而不依赖于 UserID（我理解这一点是否正确？）。

是的，你是对的。

在`Teams`3NF 中，因为所有属性在功能上都依赖于[键、整个键，而只有键（所以帮助我 Codd ;)）](http://en.wikipedia.org/wiki/Third_normal_form#.22Nothing_but_the_key.22)。

原因如下：

*   没有任何东西依赖于密钥子集，所以这是 2NF（事实上，没有“密钥子集”，因为密钥只是一个属性）。
*   正如您已经指出的那样，`TeamManager`并且在功能上`TeamLogo`不依赖，因此您**没有**传递**依赖，因此**[这](http://en.wikipedia.org/wiki/Transitive_dependency)是 3NF。`OwnerID`

 **> 我们是否应该为 UserID 和 TeamID 建立另一个表来建立关系？

对于像这样简单的 1:N 关系建模：不。

建模 M:N 将是另一回事。

* * *

所以除非有一些你没有提到的额外细节，这个模型对我来说看起来很好标准化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:14:59.077

II 没有理由为 UserId 和 TeamId 提供第三个表。现在，如果您有更多关于 TeamManager 的信息，我将创建一个经理表。每个团队只有一个用户吗？用户可以成为经理吗？**

# image - matlab gui-使用按钮作为开关

> ID：10339755
> 
> 赞同：0
> 
> 时间：2012-04-26T19:05:10.033
> 
> 标签：image, matlab, user-interface, image-processing

我正在编写一个带有 matlab 软件链接的机器人。它是一个图像处理程序。

我已经编写了大部分程序，现在我需要设计 gui。我需要对主程序进行某种切换，如下所示：

当我按下按钮 1- 程序开始运行和数据分析。

当我按下按钮 2- 程序停止运行。

main function=> main(preImage) 当 preImage 是一个恒定的 640*480 图像时。

我该怎么做？
我需要在哪里设置该循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:58:32.383

```
flag <- false

main()
{
  while(1)
  {
    while(flag)
    {
      //your code to analyze data
    }
  }
}

button1_clicked()
{
  flag <- true
}

button2_clicked()
{
  flag <- false
} 
```

# android - 想知道如何在我的纬度上放置一个精确的标记，长时间使用这个代码

> ID：10339759
> 
> 赞同：0
> 
> 时间：2012-04-26T19:05:24.790
> 
> 标签：android, google-maps

我正在尝试找到一种方法来在我的纬度上放置一个精确的标记，在谷歌地图上。

```
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import android.os.Bundle;

public class Nav10 extends MapActivity {
    MapController mControl;
    GeoPoint GeoP;
    MapView navView10;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nav10);

        navView10 = (MapView) findViewById(R.id.navView10);
        navView10.displayZoomControls(true);
        navView10.setBuiltInZoomControls(true);
        navView10.setSatellite(true);

        double lat = 40.325874;
        double longi = -76.002211;

        GeoP = new GeoPoint((int) ( lat *1E6), (int) (longi * 1E6));

        mControl = navView10.getController();
        mControl.animateTo(GeoP);
        mControl.setZoom(20);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

如何使用此代码插入精确标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:30:58.917

您可以使用[MyLocationOverlay](https://developers.google.com/maps/documentation/android/reference/index)。你只需要将它添加到你的 mapView 中：

```
mapView.getOverlays().add(new MyLocationOverlay(context,mapView) ); 
```

# php - 用 PHP 和 htaccess 重写 URL

> ID：10339762
> 
> 赞同：0
> 
> 时间：2012-04-26T19:05:33.797
> 
> 标签：php, .htaccess, url-rewriting

我正在尝试重写一些 URL，但不确定如何做我需要的。我也很难在网上找到答案，因为这不仅仅是简单的重写，而且我不知道要搜索的术语。

所以我可以使用一些帮助来尝试这样做，并且想知道是否有一个术语用于这种类型的事情。

基本上我想把这个：

`http://www.domain.com/search.php?search_type=news&searchterms=2012-04-23`

进入这个

`http://www.domain.com/search/news/2012-04-23`

但是让 search.php 脚本仍然可以正常工作并获得它需要的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:15:22.070

尝试这个：

```
RewriteEngine on
RewriteRule ^search/([^/]+)/([^/]+)$ /search.php?search_type=$1&searchterms=$2 [L,QSA] 
```

`[^/]+`匹配一系列非斜杠字符。该`QSA`选项允许 URL`/search/foo/bar?baz=1`也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:12:52.320

如果您正在寻找要搜索的术语，请尝试“ModRewrite”或“Rewrite Rules”。

我不会给出确切的答案，但这里有一个随机的类似规则，可能会帮助您解决问题：

```
RewriteRule ^(.*/)help/([0-9]*?)/(.*)(/?)$ /help.php?category=$2 [QSA,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:13:20.077

在这里你有一个很棒的指南，里面有很多例子： [http ://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

但是，我认为重写 url 的查询字符串不是一个好主意。

# android - Android EditText 选择文本

> ID：10339765
> 
> 赞同：0
> 
> 时间：2012-04-26T19:05:46.740
> 
> 标签：android, select, android-edittext, onlongclicklistener

我已经覆盖了

```
OnLongClickListener 
```

Android:EditText 以显示我自己的菜单。但是我仍然希望用户能够从我的自定义菜单中的按钮“选择文本”和“全选”，我应该怎么做呢？

编辑：对不起，我应该在我的问题中提供更多细节。

我已经尝试使用 selectAll() 方法来选择文本，但是这并没有提供两个指针（用户可以在其中拖动到选择区域），这就是我所说的选择文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:20:08.340

按下自定义按钮时，使用 findViewBy id 查找 EditText，然后使用以下函数：

```
((EditText)v).selectAll(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:12:36.783

在**相关**列中，我发现[当它获得焦点时选择 EditText 中的所有文本，](https://stackoverflow.com/questions/4669464/select-all-text-inside-edittext-when-it-gets-focus)这很容易适应上下文菜单，你也可以在那里找到“选择单词”策略。

# android - 错误：解析 XML 时出错：未绑定前缀

> ID：10339766
> 
> 赞同：0
> 
> 时间：2012-04-26T19:05:50.890
> 
> 标签：android

我知道这可能是由拼写和语法错误引起的，我已经仔细检查了这部分代码。我的主要工作是将图像“外星人”放在画布上的特定位置。错误来自此代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/spaceinvaders"
    >

<ImageView
android:id="@+id/alien"
android:src="@drawable/alien"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
andriod:layout_marginTop="120dip"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:13:08.130

我相信这是由你的最后一行引起的。

**安卓： layout_marginTop** ="120dip"/>

# asp.net - 使用带有树视图的站点地图路径

> ID：10339770
> 
> 赞同：0
> 
> 时间：2012-04-26T19:06:14.140
> 
> 标签：asp.net

我已经插入了站点地​​图数据源 + 树视图控件，编写了我的站点地图文件，所有文件夹/文件名都是正确的，但是树视图不是直接从站点地图文件中读取的。有什么建议么？

站点地图代码如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >

    <siteMapNode url="~/Default.aspx" title="Home"  description="">
        <siteMapNode url="~/about2.aspx" title="About"  description="" >
        </siteMapNode>
        <siteMapNode url="~/menu.aspx" title="Menu" description="">
            <siteMapNode url="~/starters.aspx" title="Starters" description=""/>
            <siteMapNode url="~/mains.aspx" title="Mains" description=""/>
            <siteMapNode url="~/desserts.aspx" title="Desserts" description=""/>
            <siteMapNode url="~/drinks.aspx" title="Drinks" description=""/>
            <siteMapNode url="~/specials.aspx" title="Specials" description=""/>
        </siteMapNode>
        <siteMapNode url="~/contact.aspx" title="Contact" description="">
        </siteMapNode>
        <siteMapNode url="~/findus.aspx" title="Find Us" description="">
        </siteMapNode>
        <siteMapNode url="~/reviews.aspx" title="Reviews" description="">
        </siteMapNode>
    </siteMapNode>
</siteMap> 
```

是不是我希望站点地图使用的网络表单被添加到文件夹的根目录中，而不是在文件夹中？帮助将不胜感激。谢谢你。

asp.net/html 的源代码。

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="sitemap.aspx.vb" Inherits="sitemap" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" />
        <br />

    </div>
    <asp:TreeView ID="TreeView1" runat="server" DataSourceID="SiteMapDataSource1">
    </asp:TreeView>
    </form>
</body>
</html 
```

>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:21:59.697

遇到这个寻找别的东西。您的 SiteMapDataSource 没有指定“SiteMapProvider”。它如何知道使用哪个地图？

这必须在 systen.web 部分的 web.config 中指定

```
 <siteMap defaultProvider="secure" enabled="true">
       <providers>
         <add name="mapname" description="my site map" type="System.Web.XmlSiteMapProvider" siteMapFile="filename.sitemap" />
       </providers>
     </siteMap> 
```

所以你应该设置 SiteMapProvider="mapname"

# .net - 使用包含丹麦字符的 json 数据调用时出现 WCF Web 服务请求错误

> ID：10339771
> 
> 赞同：1
> 
> 时间：2012-04-26T19:06:21.280
> 
> 标签：.net, ios, wcf, web-services

我的 WCF Web 服务（svc 文件）在尝试以 json 格式发送数据时返回请求错误，包括丹麦字符，如æ、ø、å。

在我的 iOS 应用程序中，我提出这样的请求：

```
NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: requestData]; 
```

我的 WCF 服务接口如下所示：

```
 [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle=WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = "/createNewPost")]
    NewPostReply CreateNewPost(CreatePostCredential createPostCredential); 
```

当我不发送“æ ø å”时，一切正常，但在包含“æ ø å”时出现错误。

我是否必须更改运营合同或 web.config 中的某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:12:57.193

这就是我所做的：

我没有在 NSData 中发送请求数据，而是发送一个字符串并将其设置为使用 NSUTF8StringEncoding。

```
[request setHTTPBody: [requestDataString dataUsingEncoding:NSUTF8StringEncoding]] 
```

# javascript - Javascript函数无法获取高度css属性

> ID：10339772
> 
> 赞同：0
> 
> 时间：2012-04-26T19:06:28.033
> 
> 标签：javascript, html, css

我有以下网站：

[http://www.pachamber.org/www/advocacy/index.php](http://www.pachamber.org/www/advocacy/index.php)

当用户点击底部的“General Commerce”href 标签时，它应该会滑出隐藏的内容。除此标签外，所有其他标签都可以正常工作。

该函数仅在 IE 中出现意外行为。在 Chrome 和 FF 中看起来不错。在调试函数时，似乎没有`height`从 div 中抓取属性：

`<div id="general" style="display: none; height: 30px; overflow: hidden">`

该`height`属性在这一行显示为 1px：

`this.height = parseInt(this.obj.style.height);`

这是 HTML 和函数调用的片段：

```
<table width="100%" border="0" cellspacing="0" cellpadding="6">
<tr>
    <td colspan="2" style="width: 100%;">
      <div class="subheading2"  style="border-bottom: thin solid gray; cursor: pointer; color: #000099" onClick="doSlideOut('general');"><a name="general"></a>General Commerce</div>
    </td>
</tr>
</table>
<div id="general" style="display: none; height: 30px; overflow: hidden">
<table width="100%" border="0" cellspacing="0" cellpadding="6">
<tr>
    <td width="53%">
        &bull; <a href="gc/testimony/index.php" >Testimony &amp; Comments</a>
    </td>
    <td width="47%">&nbsp;</td>
</tr>
</table>
</div> 
```

有什么我想念的想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:34:54.340

[在 Internet Explorer 中使用 getElementById 时注意 id 和 name 属性](http://www.456bereastreet.com/archive/200802/beware_of_id_and_name_attribute_mixups_when_using_getelementbyid_in_internet_explorer/)描述了导致您的问题的 IE 的愚蠢行为。

如果有两个具有相同值的元素`id`和`name`（在您的情况下是具有 id`general-commerce`和链接的 div `General Commerce`）IE 将在使用 getElementById 时获取其中一个。

解决方案是更改链接的名称属性或 div 容器的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:25:50.740

我看到的一件事是你的脚本中有错误。

![虫虫错误](../Images/17df9ffa7a009a1a691749a6dd3bd77c.png)

像这样的错误会破坏 JS 的正常运行。

查看[我的一个网站](http://www.howgreatthouart.com/)，了解如何使用 jQuery 执行此操作（查看“我们的课程”下的链接）。

```
$('.lgroup').on('click', function () {
    if ($(this).hasClass('directLink')) {
        return true
    } else {
        $('.links').slideUp();
        $('.lgroup').removeClass('lactive');
        if ($(this).next().css('display') == 'block') {
            $(this).next().slideUp()
        } else {
            $(this).addClass('lactive').next().slideDown()
        }
    }
}); 
```

# unity3d - HUD雷达问题

> ID：10339773
> 
> 赞同：0
> 
> 时间：2012-04-26T19:06:33.633
> 
> 标签：unity3d

我创建了一个基于 3D 对象（平面）的基本 HUD 雷达系统，脚本检测敌人并在屏幕上跟随他，但我的问题是，有时 HUD 会超出屏幕区域。

这是我的代码：

```
#pragma strict

// ******Public dimentions ******
public var AircraftObject : Transform;
// ******Private dimentions ******
//Fetch CpuScript class to get some varibles
private var mainClass : CpuScript;
private var isRenderer : boolean;
private var aircraftArea : float;
//Other perfabs
private var Spd : GameObject;
private var Alt : GameObject;
private var Trg : GameObject;
//Calculating varibles
private var Distance : int;
private var Speed : int;

function Awake()
{
    //Finding all objects
    findObjects();
    //Set PlayerScript into the mainClass
    mainClass = gameObject.GetComponent(CpuScript);
}

function FixedUpdate() 
{
    isRenderer = mainClass.isProximity;
    aircraftArea = mainClass.mainObjectArea;
    transform.position.x = aircraftArea / 6;
    //Set GUI's
    guiControl();
    getValue();
}

function guiControl()
{
    Spd.GetComponent.<TextMesh>().text = Speed + " Knot";
    Alt.GetComponent.<TextMesh>().text = "Enemy detected";
    Trg.GetComponent.<TextMesh>().text = Distance + " Ft";
}

function getValue()
{
    Distance = Vector3.Distance(AircraftObject.transform.position, mainClass.AircraftDistance) * 4;
    Speed = Random.Range(100, 300);
}

function findObjects()
{
    Spd = GameObject.Find("Speed");
    Alt = GameObject.Find("Alt");
    Trg = GameObject.Find("AimTarget");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:31:57.257

无法从代码中准确地说出您的 3d hud 为何会离开屏幕。

但是，如果您想始终将任何 3d 对象（例如您的 HUD）保留在屏幕上，则需要确保它始终由相机呈现在屏幕上。

这可以通过多种方式完成。

一种方法是：

1.  使用第二个摄像头渲染 HUD
2.  仅将其清除标志设置为深度（在检查器中）
3.  将此相机的深度设置为高于主相机（在检查器中）

只要您不移动第二个摄像头，就应该始终显示 HUD。

您还需要确保主摄像机不会渲染 HUD。通过以下方式执行此操作：

1.  更改 HUD 的图层（创建您赢得的 HUD 图层）。
2.  将 hud 相机设置为仅渲染该图层。
3.  设置主摄像机以渲染除 HUD 层之外的所有其他层。

您可以在两个相机的检查器中使用剔除蒙版放置选择器来执行此操作。

仅供参考：您也可以在代码中设置摄像机的剔除蒙版，但要做到这一点，您需要使用按位运算符。

替代方法包括使 HUD 成为场景视图中主摄像机的子项，以便在摄像机移动时 HUD 移动到该位置。但是，这可能会导致您的 HUD 被其他游戏对象遮挡。

# matlab - Matlab 中的扩展霍夫曼编码

> ID：10339775
> 
> 赞同：1
> 
> 时间：2012-04-26T19:06:45.327
> 
> 标签：matlab, huffman-code

嗨，我在使用扩展霍夫曼编码对 1000 个符号消息进行编码时遇到问题。我已经有字典了。我只需要对消息进行编码。但是，我不知道该怎么做。有任何想法吗？

我正在使用 Matlab bdw。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:41:59.433

这是我使用的代码：

```
%Extended Huffman 
prob=0.1;
m=4;

%Generating the probabilities

 for i = 1:2^m
   q(i) = 1;
    for j=0: m-1
      b=2^j;
      if bitand(i-1,b)
          q(i)= q(i)*prob;
      else 
          q(i)= q(i)*(1-prob);
     end
   end
end

disp ('Sum of probabilities');
disp (sum(q));

disp('Entropy per symbol');%should be equal to 1
E=sum(q.*log2(1./q));

disp(E/m); 

%huffman 

s=0:2^m-1; %There are 16 symbols from 0000 -> 1111
[dict,avglen] = huffmandict(s,q); %probabilities 
```

我已经为扩展霍夫曼尝试了这种方法，并且消息大小确实减少了但不是很多，我不知道这是否是正确的方法。消息首先被分成 4 位，并将得到的十进制值与字典进行比较。然后获得了新的编码消息：

```
for j=(0:4:1000-1)
    newcode=message(j+1:j+4); %Dividing the message into 4 bits and saving the     
                              %corresponding decimal values
   array(:,a)=bi2de(newcode);
   a=a+1;
end

 for(f=1:250)
   for(i=1:15)
     if(array(f)==cell2mat((dict(i,1)))) %cell2mat will obtain the value of the cell
     encodedmsg= horzcat(encodedmsg, dict(i,2)); %horzcat will concatenate the array                    with its corresponding codeword
  end
 end
end 
```

# android - 子布局在 ExpandableListView 中重复多次

> ID：10339777
> 
> 赞同：3
> 
> 时间：2012-04-26T19:06:49.867
> 
> 标签：android

我有一个问题，我正在实现一个带有网格视图的 ExpandableListView 作为一个父级的子级。GridView 中有 46 张图像。因此，当我们打开第一个父级时，它会显示一个包含超过 46 个图像的网格视图，其中包含 46 个图像的插槽。表示一个插槽显示 46 个图像，然后在其下方再次显示另一个 46 个图像，然后是另一个，然后是另一个。意味着多次重复相同的布局在一个布局中。我无法找到问题的根源，因此我无法解决。请向我建议任何有关相同的解决方案。

**代码（可扩展列表）：**

```
public class ExpResearchListAdapter extends BaseExpandableListAdapter {
    // Sample data set. children[i] contains the children (String[]) for
    // groups[i].
    Context context;
    /*private String[] groups = { "Research by Brand", "Research by Category",
        "Research by Price" , "Research by Fuel Economy", "Recently Viewed"};*/
    GridView label;
    TextView groupText;
    ImageView groupImg;
    ArrayList<String> groups = new ArrayList<String>();
    ArrayList<Integer> groupImage = new ArrayList<Integer>();
    ArrayList<Integer> childElement = new ArrayList<Integer>();
    private Integer[][] children = { 
            { R.drawable.icon_1, R.drawable.icon_2, R.drawable.icon_3, R.drawable.icon_4, R.drawable.icon_5, R.drawable.icon_6, R.drawable.icon_7, R.drawable.icon_8, R.drawable.icon_9,
                R.drawable.icon_10, R.drawable.icon_11, R.drawable.icon_12, R.drawable.icon_13, R.drawable.icon_14, R.drawable.icon_15, R.drawable.icon_16, R.drawable.icon_17, R.drawable.icon_18,
                R.drawable.icon_19, R.drawable.icon_20, R.drawable.icon_21, R.drawable.icon_22, R.drawable.icon_23, R.drawable.icon_24, R.drawable.icon_25, R.drawable.icon_26, R.drawable.icon_27,
                R.drawable.icon_28, R.drawable.icon_29, R.drawable.icon_30, R.drawable.icon_31, R.drawable.icon_32, R.drawable.icon_33, R.drawable.icon_34, R.drawable.icon_35, R.drawable.icon_36,
                R.drawable.icon_37, R.drawable.icon_38, R.drawable.icon_39, R.drawable.icon_40, R.drawable.icon_41, R.drawable.icon_42, R.drawable.icon_43, R.drawable.icon_44, R.drawable.icon_45,
                R.drawable.icon_46} 
            };
    LinearLayout linear;

    public ExpResearchListAdapter(Context context, ArrayList<String> groups, ArrayList<Integer> groupImage, ArrayList<Integer> childElement, LinearLayout linear)
    {
        this.context=context;
        this.groups = groups;
        this.groupImage = groupImage;
        this.childElement = childElement;
        this.linear = linear;
    }

    public Object getChild(int groupPosition, int childPosition) {
        return children[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public int getChildrenCount(int groupPosition) {
        int i = 0;
        try {
        i = children[groupPosition].length;

        } catch (Exception e) {
        }

        return i;
    }

    public TextView getGenericView() {
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT, 64);

        TextView textView = new TextView(context);
        textView.setLayoutParams(lp);
        // Center the text vertically
        textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
        //textView.setTextColor(R.color.marcyred);
        // Set the text starting position
        textView.setPadding(36, 0, 0, 0);
        return textView;
    }

    public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
        if(convertView==null)
        {
            LayoutInflater inflater = LayoutInflater.from(context);
            convertView = (View) inflater.inflate(R.layout.brand_research_grid, null);
            label = (GridView) convertView.findViewById(R.id.gv_ResearchList_Child);
            label.setAdapter(new GridAdapter(context, children));
            label.setCacheColorHint(Color.WHITE);
            // initialize the following variables (i've done it based on your layout
            // note: rowHeightDp is based on my grid_cell.xml, that is the height i've
            //    assigned to the items in the grid.
            final int spacingDp = 10;
            final int colWidthDp = 50;
            //final int rowHeightDp = (childElement.size()/3)*10;
            final int rowHeightDp = 107;

            // convert the dp values to pixels
            final float COL_WIDTH = context.getResources().getDisplayMetrics().density * colWidthDp;
            final float ROW_HEIGHT = context.getResources().getDisplayMetrics().density * rowHeightDp;
            final float SPACING = context.getResources().getDisplayMetrics().density * spacingDp;
            System.out.println("===================================RowHeight"+ROW_HEIGHT);
            System.out.println("===================================RowHeightDP"+rowHeightDp);

            // calculate the column and row counts based on your display
            final int colCount = (int)Math.floor((linear.getWidth() - (2 * SPACING)) / (COL_WIDTH + SPACING));
            //final int rowCount = (int)Math.ceil((childElement.size() + 0d) / 3);
            final int rowCount = 16;

            // calculate the height for the current grid
            final int GRID_HEIGHT = Math.round(rowCount * (ROW_HEIGHT + SPACING));
            System.out.println("===================================GHieght"+GRID_HEIGHT);
            System.out.println("===================================colCount"+colCount);
            System.out.println("===================================rowCount"+rowCount);
            // set the height of the current grid
            label.getLayoutParams().height = GRID_HEIGHT;
        }

        return convertView;
    }

    public Object getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    public int getGroupCount() {
        return groups.size();
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
        String group = (String) getGroup(groupPosition);
        if (convertView == null) {
            LayoutInflater infalInflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = infalInflater.inflate(
                    R.layout.research_list_exp_group, null);
            groupText = (TextView) convertView
                    .findViewById(R.id.tv_ResearchList_ExpParentElement);
            groupImg = (ImageView) convertView
                    .findViewById(R.id.img_ResearchList_GroupParentImage);
            // convertView.setClickable(false);
        }
        groupText.setText(group);
        groupImg.setImageResource(groupImage.get(groupPosition));

        return convertView;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean hasStableIds() {
        return true;
    }

    } 
```

**网格适配器：**

```
public class GridAdapter extends BaseAdapter{

    public Context context;
    private LayoutInflater mInflater;
    //public ArrayList<Integer> childElements = new ArrayList<Integer>();
    Integer[][] childElements;
    ImageView imgGridItem;

    public GridAdapter(Context context, Integer[][] childElements)
    {
        this.context = context;
        this.childElements = childElements;
        mInflater = LayoutInflater.from(context);
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return childElements.length;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return arg0;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return arg0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
         ViewHolder holder = null;
        //pos=position;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.grid_item, null);
            holder = new ViewHolder();

            imgGridItem = (ImageView)convertView.findViewById(R.id.img_GridItem);
        }
        imgGridItem.setImageResource(childElements[position][0]);

        return convertView;
    }
    class ViewHolder {
        private ImageView imgGridItem;

    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-04T18:08:14.913

找了几个小时没有解决方案。这是答案。只需像这样在父适配器中创建函数 getChildrenCount ：

```
@Override
public ing getChildrenCount(int groupPosition){
     return 1;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T01:48:21.720

您需要做的只是将一个孩子传递给可扩展列表。因此，可扩展列表中只会显示一个网格视图，但您希望在网格视图中显示所有选项。

因此，如果您有另一个组和另一个 gridview 项目，只需将一个项目添加到可扩展列表的该组中，使用 gridview，但在此 gridview 中，请确保您传递了您希望它拥有的数据。我的意思是，您应该使用相同的 gridview 适配器，但使用不同的数据。我希望这对你有帮助。

# java - 广泛的符号/方法/变量混淆

> ID：10339778
> 
> 赞同：-2
> 
> 时间：2012-04-26T19:06:55.280
> 
> 标签：java

我正在开发一个创建简单的基于文本的冒险游戏的项目。这有点复杂，但游戏中基本上有大约八个房间，每个房间都有特定的物品。您只能根据房间向某些方向移动，目标是到达最后一个房间。我有一个名为 Item 的类，一个名为 Room 的类，然后是主 Game 类。

无论如何，此时我的 checkForItem 和 drop 方法遇到了一些问题。我必须检查我的 itemsHeld ArrayList 是否有某个项目，但是每当我输入“项目”时，它都会说找不到符号项目。我的 drop 方法也出现了类似的问题。有什么建议么？这是（非常长的）代码。

```
 import java.util.ArrayList;

    public class Game
    {
        private ArrayList<Item> itemsHeld = new ArrayList<Item>();
        private Room planetHarvest;
        private Room planetReach;
        private Room alphaHalo;
        private Room newMombasa;
        private Room deltaHalo;
        private Room voi;
        private Room theArk;
        private Room forerunnerShieldWorld;
        private Item DMR;
        private Item Launcher;
        private Item Shotgun;
        private Item Health;
        private Item Key;
        private Room currentLocation;
        private String msg;

        public Game(){
            createRooms();
            ArrayList<Item> itemsHeld = new ArrayList<Item>(0);
            currentLocation = planetHarvest;
        }

        private void createRooms(){
            DMR = new Item("DMR", "The Designated Marksman Rifle fires a medium-range shot that defeats one enemy at a time.",
            10, false);
            Launcher = new Item("Launcher", "The rocket launcher fires a long-range rocket that defeats two enemies at a time.",
            30, false);
            Shotgun = new Item("Shotgun", "The shotgun fires a short-range buckshot blast that defeats one enemy at a time.",
            10, false);
            Health = new Item("Health", "The health pack heals you if you've been attacked.", 10, true);
            Key = new Item("Key", "The Key is the secret to saving the galaxy.", 10000, false);

            planetHarvest = new Room("a farming colony at the edge of human-controlled space. Though usually quiet, it has now been disturbed by an invasion from extraterrestrials who call themselves the Covenant. The Covenant will not let you escape without a fight.", DMR);
            planetReach = new Room("twenty-seven years in the future. The Covenant has invaded every human colony world and bombarded each one with plasma, reducing the surface to molten glass. Planet Reach is the only human colony that remains. The aliens know their campaign to exterminate humanity is almost over and they show it in their ferocity on the battlefield.", Launcher);
            alphaHalo = new Room("a strange, alien, planet-sized ring following your escape from the doomed planet Reach. The inside of the mysterious non-Covenant hoop structure has continents, oceans, ecosystems, breathable atmosphere – and two relentless foes. The Covenant has arrived; so has the Flood, a terrifying alien parasite that will eat both you and the Covenant. On top of that, you learn that this Halo is not just a habitat but also a weapon that will destroy all life in the galaxy if you don’t stop it.", Key);
            newMombasa = new Room("an African city on Earth, humanity's last safe haven in the universe. A Covenant invasion force has landed. You’ll need to fend them off and follow them to wherever they’re headed next.", Health);
            deltaHalo = new Room("where the Covenant and the Flood are already waiting. The same rules from Alpha Halo apply here, but now you learn that there are a total of eleven Halos and that the only way to stop them all is to shut them down from a structure outside the galaxy called the Ark. Meanwhile, the Covenant is still attacking Earth.", Key);
            voi = new Room("The Flood has arrived and is infecting humans and aliens; meanwhile, the Covenant is in civil war and some of the aliens are helping you. Following your escape from Delta Halo, all of the Halos in the galaxy have been put on standby, so if you don’t find the Ark soon then it’s the end of life as we know it.", Shotgun);
            theArk = new Room("a massive installation many times bigger than even a Halo. Shutting down the Ark will mean saving the galaxy. However, most of the Covenant and the Flood are still after you. Finish the fight.", Key);
            forerunnerShieldWorld = new Room("an artificial planet made by a super-advanced alien civilization that disappeared 100,000 years ago – the makers of the Halos and the Ark. The war against the Covenant is finally over, the Flood has been defeated, and the galaxy is safe. The mysteries of the Forerunners, however, are just beginning to be unraveled.");

            planetHarvest.addNeighbor("Slipspace Forward", planetReach);

            planetReach.addNeighbor("Slipspace Out", alphaHalo);

            alphaHalo.addNeighbor("Slipspace Back", planetReach);
            alphaHalo.addNeighbor("Slipspace Forward", newMombasa);

        newMombasa.addNeighbor("Slipspace Out", deltaHalo);
        newMombasa.addNeighbor("Forward", voi);

        deltaHalo.addNeighbor("Slipspace Back", newMombasa);

        voi.addNeighbor("Slipspace Out", theArk);
        voi.addNeighbor("Back", newMombasa);

        theArk.addNeighbor("Slipspace Unknown", forerunnerShieldWorld);
    }

    private void setWelcomeMessage(){
        msg = "You are John-117, an augmented soldier fighting for Earth and its colonies in the year 2552\. You battle the Covenant, an alien religious alliance, and the Flood, an alien parasite that infects both humans and Covenant and turns them into zombies. Your battles take you to planetary colonies like Harvest and Reach, ancient alien ring-worlds called Halos, futuristic cities in Africa, and the Halos’ control station called the Ark, located outside the galaxy. The goal of the game is to defeat all enemies and make it to the safety of the Forerunner Shield World.";
    }

    public String getMessage(){
        return msg;
    }

    public void help(){
        msg = "Every place you enter is crawling with Covenent and/or Flood. You'll have to neutralize them before they neutralize you. As a Reclaimer, you're the only one who can use Keys on a Halo or Ark. Some places involve more than one mission.";
    }

    public void look(){
        msg = currentLocation.getLongDescription();
    }

    public void move (String direction){
        Room nextRoom = currentLocation.getNeighbor(direction);
        if (nextRoom == null){
            msg = "You can't go there.";
        }else{
            currentLocation = nextRoom;
            msg = currentLocation.getLongDescription();
        }
    }

    public void list(){
        if(itemsHeld != null){
            msg += itemsHeld;
        }else{
            msg = "You are not holding anything.";
        }
    }

    public boolean gameOver(){
        if(currentLocation == forerunnerShieldWorld){
            msg = "You defeated the Covenant and survived the war. You won!";
        }
        return false;
    }

    public void pickup(){
        if(currentLocation.hasItem()){
            if(currentLocation.getItem().getWeight() < 50){
                msg = "You are now holding the" + currentLocation.getItem().getName();
                itemsHeld.add(currentLocation.getItem());
                currentLocation.removeItem();
            }else{
                msg = "This item is too heavy to pick up.";
            }
        }else{
            msg = "There is no item to pick up.";
        }
    }

     private Item checkForItem (String name){
         if(itemsHeld.contains(name)){
             return ();
         }else{
             return null;
         }
     }

    public void drop (String item){
        if(itemsHeld.contains(item)){
            itemsHeld.remove(item);
            currentLocation.addItem;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:09:35.107

`Item`是本例中的类型。不是变量名，这是你想要的。您有几个类型为 的变量`Item`，但没有**名为**item 的变量。

此外，您没有名为`itemsHeld`. 在您的构造函数中，您创建一个具有该名称的局部变量，但未定义该类上的该名称的变量。

添加

`private ArrayList<Item> itemsHeld`

到您的字段声明，并在构造函数中执行

`itemsHeld = new ArrayList<Item>(0);`

初始化它。

或者只是做

`private List<Item> itemsHeld = new ArrayList<Item>(0);`

在您的字段声明中...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T02:08:33.220

```
 if(!PlayerLocation.hasItem()){
        msg = "The player does not have that Item";
    }

    if(PlayerLocation.hasItem()){
        for(Item lookfor: ItemsHeld){
            String result = lookfor.getName();
            if(result.contains(PlayerLocation.getItem().getName())){
                msg = "The room already has an item " + 
                PlayerLocation.getItem().getName() +
                ".";
            }
        }
    }
    else {

        for(Item lookfor: ItemsHeld){
            String result = lookfor.getName();

            if(result.contains(name)){
                dropped = lookfor;
                ItemsHeld.remove(lookfor);
                PlayerLocation.addItem(dropped);
                msg = "the player has successfully" +
                "dropped the item in the room";
            }
        }
    } 
```

如果我们有相同的 Java 老师，我会想办法，但是我在谷歌上搜索并浏览了一些答案并遇到了你的问题。

我的方法适用于掉落物品；但是，如果数组列表为空并且没有任何项目，我正在调试我的代码。

# windows-7 - Windows 7：打开测试签名和禁用完整性检查有什么区别

> ID：10339782
> 
> 赞同：4
> 
> 时间：2012-04-26T19:07:14.010
> 
> 标签：windows-7, driver, bcdedit

要在 Windows 7 64 位中禁用 KMCS，有什么区别

*   bcdedit.exe -set 加载选项 DDISABLE_INTEGRITY_CHECKS
*   bcdedit.exe -设置测试签名开启

加载未签名的驱动程序是否都需要或其中之一？

感谢您的帮助 - 丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T22:07:09.493

我相信对 DDISABLE_INTEGRITY_CHECKS 的支持将被完全删除（有各种 Windows 更新将其删除）。在 Win7 64 位上加载未签名驱动程序的唯一方法是启用测试签名并在需要驱动程序时保持启用状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-03T13:16:11.090

根据[官方文档](https://docs.microsoft.com/en-us/windows-hardware/drivers/devtest/bcdedit--set)，`nointegritychecks`命令被 Windows 7 和 Windows 8 忽略：

> **nointegritychecks [ 上 | 离开 ]**
> 
> 禁用完整性检查。启用安全启动时无法设置。此值被 Windows 7 和 Windows 8 忽略。

由于`/set nointegritychecks on`是 的别名`-set loadoptions DDISABLE_INTEGRITY_CHECKS`，因此我假设此命令已过时且不再有效。

因此，您的问题的答案是仅`bcdedit.exe -set TESTSIGNING ON`在 Windows 7 64 位中才有意义。它将 Windows 切换到“测试模式”并在桌面的右下角添加水印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:07:40.080

1.  您禁用普通模式 Windows 7 启动。
2.  您提供了普通模式的替代方案。
    *   你需要两条线。很多时候，在您成为 Windows 系统/您的 IP 提供商的一部分后，您无法获得真实身份。所以以安全模式启动并编写命令。在任何尝试之前请记住：从系统中卸载 Java。如果无论如何它不起作用，请激活访客帐户并尝试在那里安装您的设备。下次登录时，它会显示在您的普通帐户中。祝您好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-07T20:08:24.240

不，他们仍然工作。我总是同时运行它们。重启后将在底部 rt 角落看到您的操作系统版本和测试模式。也可以使用兼容模式来尝试强制或使用未签名的驱动程序并在较旧的操作系统下尝试（通常最适合 xp sp 3 兼容模式。我一直在所有操作系统中运行它们，Win 7，Win 8.1，Win 10 和 Win Server 2012r2\. 您可以查看您的 bcd 条目，它们也会在此处列出。

# pinvoke - 如何将 ISAPI 相关的方法和结构转换为 C#

> ID：10339788
> 
> 赞同：1
> 
> 时间：2012-04-26T19:07:54.763
> 
> 标签：pinvoke, dllimport, signature, isapi

我有一个为 IIS6 编写的 ISAPI 过滤器。我现在需要为 IIS7 编写一个包装器来包装 IIS6 过滤器。我计划用 C# 编写 HTTP 模块并 Pinvoke 非托管 dll 方法。

我需要以下代码的 C# 表示，

```
DWORD WINAPI HttpFilterProc(
   PHTTP_FILTER_CONTEXT pfc,
   DWORD notificationType,
   LPVOID pvNotification
);

    typedef struct _HTTP_FILTER_CONTEXT HTTP_FILTER_CONTEXT {
       DWORD cbSize;
       DWORD Revision;
       PVOID ServerContext;
       DWORD ulReserved;
       BOOL fIsSecurePort;
       PVOID pFilterContext;
       BOOL GetServerVariable;
       BOOL AddResponseHeaders;
       BOOL WriteClient;
       VOID * AllocMem;
       BOOL ServerSupportFunction;
    } HTTP_FILTER_CONTEXT, * PHTTP_FILTER_CONTEXT; 
```

我尝试使用 codeplex 中的 PInvoke Assistant，但我无法使其工作。有没有人做过这样的事情？任何人都可以提供上述解决方案吗？

更正：添加了正确的结构

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:52:52.243

基于您的答案中的代码，您需要使用以下内容：

```
[DllImport(@"XyzISAPI.dll")]
public static extern uint HttpFilterProc(
    ref HttpFilterContext pfc, 
    uint notificationType, 
    IntPtr pvNotification
); 
```

本机代码传递一个指向上下文的指针`struct`，传递结构`ref`是匹配它的简单方法。最后一个参数是`LPVOID`，这在托管代码`void*`中很简单。`IntPtr`

至于`HTTP_FILTER_ACCESS_DENIED`，定义如下：

```
[StructLayout(LayoutKind.Sequential)]
public struct HttpFilterAccessDenied
{
    IntPtr URL;
    IntPtr PhysicalPath;
    uint Reason;
} 
```

然后，您可以获得这样的其中之一：

```
HttpFilterAccessDenied hfad = (HttpFilterAccessDenied)Marshal.PtrToStructure(
    pvNotification, typeof(HttpFilterAccessDenied)); 
```

然后您可以从`struct`with`Marshal.PtrToStringUni`或中获取字符串值`Marshal.PtrToStringAnsi`。

# abstract-class - OpenKinect - FreenectDevice 抽象？

> ID：10339791
> 
> 赞同：0
> 
> 时间：2012-04-26T19:07:59.177
> 
> 标签：abstract-class, device, openkinect

我正在尝试设置一个简单的程序来使用 OpenKinect 连接 Kinect 并以某种方式测试与我的笔记本电脑的通信。我可以很好地运行演示，但我想通过代码对其进行测试，以确保我知道发生了什么。到目前为止，我仍然无法连接它。截至目前的代码是 -

```
#include "/usr/local/include/libfreenect.hpp"
#include <iostream>
using namespace std;
Freenect::FreenectDevice::FreenectDevice* device; 

int main(int argc, char** argv) {
    Freenect::Freenect k;
    device = &k.createDevice<Freenect::FreenectDevice>(0);  //line 8
    cout<<"\ndeviceCount:"<<k.deviceCount();
    return 0;
} 
```

当我编译时，它告诉我

```
 In member function ‘ConcreteDevice& Freenect::Freenect::createDevice(int) [with ConcreteDevice = Freenect::FreenectDevice]’:
test_kinect.cpp:8:   instantiated from here

libfreenect.hpp:196: error: cannot allocate an object of abstract type ‘Freenect::FreenectDevice’ 
```

所以 FreenectDevice 类是抽象的......那么我应该如何创建一个设备呢？每当我想使用 OpenKinect 时，我是否应该编写自己的类来继承这个类？我对如何实际使用这个库提供的代码感到非常困惑。我一直在寻找某种基本教程，但一无所获。如果有人知道一个好的教程，那对我来说是最好的。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:23:35.637

嗯，是的，您需要继承 FreenectDevice 并实现两个回调 (`VideoCallback`和`DepthCallback`)，它们将接收 Kinect 注册的视频和深度信息。

示例的问题在于，在库的整个生命周期中都有 API 更改，因此它们可能并非都适用于当前版本。工作示例代码的最佳选择是OpenKinect Wiki的[C++ 包装器部分](http://openkinect.org/wiki/C%2B%2B_Wrapper)`cppview.cpp`，它有两个（希望是）当前示例，并包含在 libfreenect 本身的源代码分发中。

# c# - 有什么简单的方法可以将数据导出为多种格式？

> ID：10339793
> 
> 赞同：2
> 
> 时间：2012-04-26T19:08:19.780
> 
> 标签：c#, .net, formatting, string-formatting, export-to-csv

我编写了一个方便的小类来从各种数据源生成 CSV 文件。例如，我可以传入一个 DataTable 或一组 IEnumerable 对象（每个对象都有效地表示一个“行”），它会根据需要忠实地转义和分隔文件。它似乎工作得很好，但我正在努力思考解决最后一块的最佳方法。

我希望能够为输出到 CSV 的每种类型设置默认格式化程序。因此，例如，我希望能够指定特定于区域设置的日期格式以用于所有日期时间。或者，您的某个字段可能是十进制数字，并且您希望在输出到 CSV 时将其格式化为货币。（所以基本上能够为给定数据类型定义全局格式化程序，和/或为数据中的特定列定义特定格式化程序（即，只是格式化为货币的“价格”字段））

我已经研究了 .NET 框架，但我找不到这样的东西。这只是我需要自己滚动的东西吗？如果是这样，我可能会在这个任务中看到任何有用的课程吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:11:47.737

> 这只是我需要自己滚动的东西吗？

是的。

> 在这个任务中我可能会看到任何有用的课程吗？

不是一个类，而是一个接口 - [`IFormatProvider`](http://msdn.microsoft.com/en-us/library/system.iformatprovider.aspx).

您需要为要格式化的所有类型实现它，并将实现传递给不同的格式化函数。

看看[这个](http://www.codeproject.com/Articles/6533/Custom-String-Formatting-in-NET)代码项目示例的实现和[这个](https://stackoverflow.com/questions/2382154/how-to-create-and-use-a-custom-iformatprovider-for-datetime)SO question and answers 的一些警告。

您可能还想查看该[`IFormattable`](http://msdn.microsoft.com/en-us/library/system.iformattable.aspx)接口，因为它专门用于将对象格式化为字符串表示形式。

# javascript - 是什么 ？这些脚本和样式表引用中的参数？

> ID：10339795
> 
> 赞同：0
> 
> 时间：2012-04-26T19:08:26.853
> 
> 标签：javascript, css

在查看各种网页时，我有时会在源代码中看到如下语句。这些示例取自几个不同的站点。

```
 <script type="text/javascript" src="js/jquery.min.js?v=1.5.1"></script>
    <script type="text/javascript" src="js/jquery-ui.custom.min.js?v=1.8.13"></script>
    <script type="text/javascript" src="/js/skin/core.js?ver=5212"></script>
    <script type="text/javascript" src="/js/skin/plugins.js?ver=5212"></script>
    <script type="text/javascript" src="/js/skin/mainpage.js?ver=5212"></script>
    <link rel="stylesheet" href="/css/site.css?ver=5212" media="screen" />
    <link rel="stylesheet" href="/css/global.css?v=04.23.2012.01" type="text/css" />
    <script type="text/javascript" src="/stuff/lib/site.js?v=04.20.2012.00"></script>
  <link rel="stylesheet" type="text/css" href="http://css.nyt.com/css/0.1/screen/build/homepage/styles.css?v=20120119"> 
```

有人能解释一下这些是做什么用的，以及它使用的是什么脚本吗？这样可以根据版本号保留和发送不同版本的 CSS/JS 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:10:14.660

这是用于缓存清除；更改参数`?whatever`会强制浏览器再次下载文件，而不是从缓存中获取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:10:49.920

它在那里，因此缓存了这些文件的先前版本的浏览器将请求新副本。通过添加版本号或日期，他们实际上是在为文件创建一个新名称，从而绕过缓存。

# iphone - 将数据添加到我的数据成员

> ID：10339804
> 
> 赞同：0
> 
> 时间：2012-04-26T19:09:41.970
> 
> 标签：iphone, objective-c, class

您好，我是 iPhone 开发的新手。我尝试将 NSDictionary 中的移动数据添加到我创建的调用的数据成员中。当我“setWeightMeasure”什么也没发生。

有什么建议么？

不起作用的代码：

```
NSDictionary *responseBodyProfile = [responseBody objectFromJSONString];
NSLog(@"%@",responseBodyProfile);
// the output is : 
"{ "profile": {"goal_weight_kg": "77.0000", "height_cm": "179.00", 
  "height_measure": "Cm", "last_weight_date_int": "15452", 
   "last_weight_kg": "99.0000", "weight_measure": "Kg" }}""

[responseBody release];

if (responseBodyProfile != nil ){
    NSDictionary *profile =[responseBodyProfile valueForKey:@"profile"];

    NSLog(@"%@\n",[profile objectForKey:@"weight_measure"]);// Output : "kg"

    [self.myUser setWeightMeasure:[profile objectForKey:@"weight_measure"]];
    NSLog(@"%@", [self.myUser WeightMeasure]); // Output : "(null)"
 } 
```

H文件属性：

```
@property (nonatomic, retain) UserData* myUser; 
```

用户数据.h：

```
#import <Foundation/Foundation.h>

@interface UserData : NSObject{
    NSString* Weight;
    NSString* Height;
    NSString* GolWeight;
    NSString* WeightMeasure;

}

@property (nonatomic, retain) NSString* Weight;
@property (nonatomic, retain) NSString* Height;
@property (nonatomic, retain) NSString* GolWeight;
@property (nonatomic, retain) NSString* WeightMeasure; 

@end 
```

用户数据.m

```
#import "UserData.h"

@implementation UserData
@synthesize Weight, Height, GolWeight, WeightMeasure;

-(id)init{
    self.Weight = @"0";
    self.Height = @"0";
    self.GolWeight = @"0";
    self.WeightMeasure = @"0";
    return self;
}

-(void)dealloc{
    [Weight release];
    [Height release];
    [GolWeight release];   
    [WeightMeasure release];

    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:14:31.803

在此行中使用 valueForKey 而不是 objectForKey：

```
[self.myUser setWeightMeasure:[profile objectForKey:@"weight_measure"]]; 
```

像这样：

```
[self.myUser setWeightMeasure:[profile valueForKey:@"weight_measure"]]; 
```

您可能还想使用，因为这些值可以读取为 NSNumbers

```
[self.myUser setWeightMeasure:[[profile valueForKey:@"weight_measure"] stringValue]]; 
```

为什么你使用字符串而不是浮点数？当您需要进行一些比较时，这不会让您的生活更轻松吗？

还要检查您是否为“myUser”分配了内存，也可能是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:18:49.330

正如尤金所说，你应该使用 valueForKey 而不是 objectForKey

另一件事是，正如 Apple 推荐的那样，每当您引用对象成员时，您可能都想使用属性和点表示法。管理内存通常对您有好处。

先前关于不在 -init() 中初始化字符串成员的答案是完全错误的，如果这引起了一些混乱，我对此深表歉意。

# android - 如何从 CalendarView 中提取日期并显示所选日期？

> ID：10339808
> 
> 赞同：6
> 
> 时间：2012-04-26T19:10:11.203
> 
> 标签：android

目前我正在使用下面的代码，我可以在文本字段中显示当前日期。但是我不知道如何显示选定的日期。

我还使用了 DatePicker，它可以很好地显示选定的日期，但是我更喜欢 CalendarView。谢谢

```
Calendar c = Calendar.getInstance();
        SimpleDateFormat ss = new SimpleDateFormat("dd-MM-yyyy");
        Date date = new Date();
        String currentdate= ss.format(date);
        TextView editText = (TextView) this.findViewById(R.id.textfield1);
        editText.setText(currentdate); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:32:40.320

在 onCreate ：

```
 CalendarView v = new CalendarView( this );
 v.setOnDateChangeListener( new CalendarView.OnDateChangeListener() {
    public void onSelectedDayChange(CalendarView view, int year, int month, int dayOfMonth) {
       this.calendar = new GregorianCalendar( year, month, dayOfMonth );
    }//met
 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T03:43:29.187

```
CalendarView view = new CalendarView(this);
setContentView(view);

view.setOnDateChangeListener(new OnDateChangeListener() {

    @Override
    public void onSelectedDayChange(CalendarView arg0, int year, int month,
        int date) {
        Toast.makeText(getApplicationContext(),date+ "/"+month+"/"+year,4000).show();
    }
}); 
```

这将显示用户选择的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:29:09.380

```
Calendar c = Calendar.getInstance(); 
```

`Calendar`与[CalendarView](http://developer.android.com/reference/android/widget/CalendarView.html)不同。`CalendarView`是的后代，`View`因此它有许多事件处理程序，例如[onClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)。也许这就是你想要找到的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T13:23:27.350

```
CalendarView view = new CalendarView(this);
setContentView(view);

view.setOnDateChangeListener(new OnDateChangeListener() {

    @Override
    public void onSelectedDayChange(CalendarView arg0, int year, int month,
        int date) {
        Toast.makeText(getApplicationContext(),date+ "/"+month+"/"+year,4000).show();
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-05T08:09:18.260

**`Kotlin`从以下位置获取选定日期的简单代码`CalenderView`：**

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <CalendarView
        android:id="@+id/calendar_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Toast Selected Date" />

</LinearLayout> 
```

**MainActivity.kt**

```
import android.os.Bundle
import android.text.format.DateFormat
import android.util.Log
import android.widget.CalendarView
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import com.example.testandcheck.databinding.ActivityMainBinding
import java.util.*

class MainActivity : AppCompatActivity() {

private lateinit var binding: ActivityMainBinding   // Binding object for ViewBinding.

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    binding = ActivityMainBinding.inflate(layoutInflater)
    setContentView(binding.root)

    // Set date change listener on calenderView.
    // Callback notified when user select a date from CalenderView on UI.
    binding.calendarView.setOnDateChangeListener { calView: CalendarView, year: Int, month: Int, dayOfMonth: Int ->

        // Create calender object with which will have system date time.
        val calender: Calendar = Calendar.getInstance()

        // Set attributes in calender object as per selected date.
        calender.set(year, month, dayOfMonth)

        // Now set calenderView with this calender object to highlight selected date on UI.
        calView.setDate(calender.timeInMillis, true, true)
        Log.d("SelectedDate", "$dayOfMonth/${month + 1}/$year")
    }

    // Example button to show get selected date from CalenderView and show in Toast.
    binding.button.setOnClickListener {

        // Fetch long milliseconds from calenderView.
        val dateMillis: Long = binding.calendarView.date

        // Create Date object from milliseconds.
        val date: Date = Date(dateMillis)

        // Get Date values and created formatted string date to show in Toast.
        val selectedDayOfWeek = DateFormat.format("EEEE", date) as String // Monday
        val selectedDay = DateFormat.format("dd", date) as String // 05
        val selectedMonthString = DateFormat.format("MMM", date) as String // Jul
        val selectedMonthNumber = DateFormat.format("MM", date) as String // 6 --> Month Code as Jan = 0 till Dec = 11.
        val selectedYear = DateFormat.format("yyyy", date) as String // 2021

        val strFormattedSelectedDate = "$selectedDay-${selectedMonthNumber + 1}-$selectedYear ($selectedDayOfWeek)"
        Toast.makeText(applicationContext, "Selected Date = $strFormattedSelectedDate", Toast.LENGTH_SHORT).show()
    }
}

} 
```

> **注意**：一旦您选择了任何日期，`CalenderView`它只会突出显示该日期而不是选择。由于这个原因，当您调用`calendarView.date`(kotlin) 或 `calenderView.getDate()`(Java) 时，您将始终获得系统的当前日期时间。所以你必须实现`setOnDateChangeListener`. 收到回调后，您必须以编程方式设置新`Date`对象，如图所示。

*希望它有所帮助......快乐编码...... :)*

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-02-24T05:37:12.223

```
Calendar c = Calendar.getInstance();
    SimpleDateFormat ss = new SimpleDateFormat("dd-MM-yyyy");
    Date date = new Date();
    String currentdate= ss.format(date);
    TextView editText = (TextView) this.findViewById(R.id.textfield1);
    editText.setText(currentdate); 
```

上面一个是你的代码试试下面的代码

```
CalendarView cv = (CalendarView)findViewById(R.id.cv1);
Calendar c = Calendar.getInstance();
    SimpleDateFormat ss = new SimpleDateFormat("dd-MM-yyyy");
    Date date = new Date(cv);
    String currentdate= ss.format(date);
    TextView editText = (TextView) this.findViewById(R.id.textfield1);
    editText.setText(currentdate); 
```

# fullscreen - PlayN 全屏

> ID：10339812
> 
> 赞同：1
> 
> 时间：2012-04-26T19:10:31.760
> 
> 标签：fullscreen, playn

我不知道为什么它不起作用。我想在桌面（Java）上全屏启动我的游戏。

**代码**

```
@Override
public void setToFullScreen() {
    int screenHeight = graphics().screenHeight();
    int screenWidth = graphics().screenWidth();

    log().debug("ScreenHeight: " + screenHeight);
    log().debug("ScreenWidth: " + screenWidth);

    graphics().setSize(screenWidth, screenHeight);
} 
```

**日志说：**

> 屏幕高度：480
> 
> 屏幕宽度：640

我可能的分辨率是全高清 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:53:08.670

命令

```
graphics().screenWidth();
graphics().screehHeight(); 
```

给你playn游戏窗口的大小。

如果要将屏幕尺寸调整为全高清，则必须这样做：

```
graphics().setSize(1920, 1080); 
```

这会将 playn 窗口的大小设置为 1920、1080。但是，这不会将您的游戏设置为全屏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:27:59.817

PlayN 不适用于 Java-fullscreen-mode。

Java-Applet 视图是出于调试所有其他平台的原因而创建的。

如果您想使用全屏模式，您可能需要更改 PlayN-java-sourcecode。您可能必须使用方法 java.awt.GraphicsDevice.setFullScreenWindow(...)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:15:01.637

不知道您使用的是哪个版本，但在最前沿（1.5-SNAPSHOT）中，这些函数每次都会返回真实的屏幕分辨率。

# git - Git rebase --interactive 块在 index.lock

> ID：10339815
> 
> 赞同：3
> 
> 时间：2012-04-26T19:10:41.277
> 
> 标签：git, git-rebase

在 linux 上使用 git 1.7.10 我试图在大约 100 个提交的分支上使用 git rebase -i。我经常但并不总是遇到这个问题：

在我指出我想要进行哪些更改之后......例如。我只是在上游部分附近做了一个改写，git 继续运行并在应用提交时在命令行中显示一个计数器：比如 [17/100] ...

这通常应该是一个非常顺利的操作，但通常它会在某个地方停在中间说：

> [分离 HEAD 5e1a3c8] 提交消息
> 作者：用户名
> 1 个文件已更改，14 次插入（+），3 次删除（-）
> 致命：无法创建“/[存储库路径]/.git/index.lock”：文件存在。
> 
> 无法应用 05e6b8ef 其他提交消息

当我运行 git rebase --continue 时，我会看到当前提交的提交消息，当我关闭文件时，git rebase 会继续，但它忽略了该提交......这是非常没用的，所以目前我只做 --abort，但这是一种痛苦……

也许可以手动提交有问题的提交，然后 --continue，但我还没有研究过。

无论如何，当我去检查 index.lock 不存在时。也许它存在于 git 想要创建它的那一刻，但在我可以用文件浏览器查看它之前它肯定被删除了......

**ps**：如果我在变基时没有打开 gitg，我似乎无法重现这一点。

有什么线索吗？

**更新**：更新到 gitg 2.6 似乎已经解决了这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:49:59.243

创建该文件是为了确保两个客户端在使用同一个存储库时不会相互干扰。我曾经用 torgoisegit 遇到过这个问题。它也可能在其他时间发生，只是交互式变基是一项相当密集的操作，所以你更有可能击中它。在你做你的变基之前，关闭 gitg 和任何其他客户端。

# vb.net - 将项目添加到数据绑定组合框

> ID：10339817
> 
> 赞同：1
> 
> 时间：2012-04-26T19:10:49.847
> 
> 标签：vb.net, vb.net-2010

我正在尝试将项目添加到数据绑定组合框。
我试过了，但它不起作用：
`ComboBox1.Items.Insert(0, New Object() {"undefined"})`
有没有可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T10:39:58.257

comboBox1.Items.Insert(0, "-Select-");

# xcode - xCode - 如何在完成之前最好地清理项目

> ID：10339821
> 
> 赞同：1
> 
> 时间：2012-04-26T19:10:59.973
> 
> 标签：xcode

对于我编写的每个应用程序，在项目结束时，尽管浏览了代码，但我确信我已经留下了未使用的“东西”。是否有一种很好的方法来检查变量和/或属性是否未使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:17:01.353

实际上，Xcode4 在编辑时已经找到了未使用的变量。

![在此处输入图像描述](../Images/425133fc28fd5f39d6879ed284c1dc72.png)

然后是 Xcode 免费提供的静态分析器。

只需通过***Product*** -> ***Analyze运行它即可使用它***

![在此处输入图像描述](../Images/51f76e8f84380f006f756043309f9b15.png)

这将在许多其他有用的事情中定位和标记未使用的变量分配。

![在此处输入图像描述](../Images/9f423656f33eca24d3176a70a3734a08.png)

# asp.net - 让 Cassini（VS 开发 Web 服务器）停止覆盖我的 404 响应

> ID：10339822
> 
> 赞同：1
> 
> 时间：2012-04-26T19:11:05.410
> 
> 标签：asp.net, visual-studio, visual-studio-2010, debugging, cassini

我注意到，在调试我的站点时，任何导致 404 并且似乎是指相对于我配置的虚拟目录的磁盘路径的请求都会被 Cassini 拦截并粗鲁地替换为目录列表。我正在使用 Nancy Framework，但鉴于此问题似乎出现在 Web 服务器级别，我怀疑 Cassini 对 MCV 应用程序的行为方式相同。除了 Cassini 源上的相关提交消息说“...目录列表仅覆盖目录的 404 响应”之外，我找不到任何关于此“功能”的文档。

我宁愿我的开发网络服务器停止试图超越我的框架。我让调试体验有点不和谐。在 MVC 框架中，请求 URL 与文件位置完全没有关系，因此我正在获取一些无效请求的目录列表和其他正确的 404 页面这一事实令人讨厌。更不用说它使我的几个单元测试失败了，因为它们依赖于我的 404 错误页面中自动生成的内容（我也无法手动测试）。

有什么办法可以在 Cassini 中禁用此功能？我知道我可以安装 IIS Express，但我宁愿不安装。特别是因为我的单元测试运行程序和主机文件（这是一个多域应用程序）已经配置得恰到好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:19:43.753

停止使用 Cassini 并改用[IIS Express](http://learn.iis.net/page.aspx/868/iis-express-overview/)。

Cassini 有很多缺点（SSL 支持是其中之一，您遇到的问题还有很多）。

IIS Express 基于 IIS 代码，尽可能地接近 IIS，同时仍然是轻量级的。

# jquery - jquery验证器：何时清除自定义错误图标

> ID：10339824
> 
> 赞同：0
> 
> 时间：2012-04-26T19:11:13.683
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validator 来验证用户输入。我试图弄清楚何时应该清除无效元素旁边显示的自定义错误图标。下面发布的代码不断附加错误图标。我试图在`showErrors`事件中清除它，但没有运气。

```
 $("#form1").validate({
                onfocusout: false,
                onKeyUp: false,

                rules: {

                 txtDate:{
                    required: true
                 },
                 txtType:{                   
                      required: true
                 },
                 ddlTime:{                   
                      required: true
                 }
               },
               messages: {
                ddlTime: {                   
                      required: "Please select an option for Time"
                 },
                 txtDate:{
                    required: "<br>Please enter valid date"
                 },
                 txtType: {                   
                      required: "<br>Please Enter valid type"
                 }
               },
               errorPlacement: function(error, element) {
                    error.wrap("<li></li>").appendTo($("#dvErrorSummary")); 
                    $('<div class="errorIcon"></div>').insertAfter(element);
                  }
             }); 
```

这就是我的 CSS 的样子：

```
label.error {
    color: red;
    font-style: italic
}

    .errors { color: red; }
    .errorIcon 
    { 
        background: url(../errorIcon.png); 
        width: 16px; 
        height: 16px;
        display:inline;

    } 
```

这就是我的 HTML 的样子：

```
<body>
<html>
<head runat="server"></head>

        <form id="form1" runat="server">

            <ul id="dvErrorSummary" name="dvErrorSummary" class="errors"></ul>

             <select id="ddlTime" name="ddlTime" </select>
             <input id="txtDate" name="txtDate" />
             <input id="txtType" name="txtType" />

       </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:17:10.630

这是一块，您要在其中添加错误消息容器

```
errorPlacement: function(error, element) {
                    error.wrap("<li></li>").appendTo($("#dvErrorSummary")); 
                    $('<div class="errorIcon"></div>').insertAfter(element);
                  } 
```

只有当值小于 1 时，才可以使用可以检查长度属性以插入 errorIcon。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T06:11:01.583

这就是我为解决这个问题所做的:)

```
jQuery.extend(jQuery.validator.messages, {
    required: '<i class = "icon-exclamation-sign"></i>'
}); 
```

我尝试使用上述方法，但我破解了太多，所以意识到它不可能是正确的。希望这可以帮助 ：）

# java - 如何确定 LIVE vs UAT 环境

> ID：10339825
> 
> 赞同：0
> 
> 时间：2012-04-26T19:11:20.373
> 
> 标签：java

目前在我的应用程序中，我在 jsp 中使用它来确定我的环境

```
<% String environment = (request.getRequestURL().indexOf("localhost") > 0) ? "dev" : "uat"; %>
<% request.setAttribute("environment", environment); %>
<% if (!environment.equals("live")) { %> 
```

我真的很想将其更改为特定于服务器的设置，因为在其他一些地方我需要运行相同的检查。我是否可以在我的 UAT 服务器上设置一个变量`UAT`，然后在 dev 上没有该变量意味着我们在 dev 中？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:18:48.460

您可以为环境设置一个 VM 参数。

```
-Druntime.env=uat or dev or tst or ... 
```

# django - django psycopg2 和 postgresql 插入错误

> ID：10339828
> 
> 赞同：3
> 
> 时间：2012-04-26T19:11:46.270
> 
> 标签：django, psycopg2, postgresql-9.1

我无法将任何数据添加到我的数据库中。它允许我修改表中的条目，但是任何将在数据库中创建新行或新列的操作都会神秘地失败。这是堆栈跟踪：

```
Traceback (most recent call last):
  File "manage.py", line 25, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/python2.7/lib/python2.7/site-packages/South-0.7.4-py2.7.egg/south/management/commands/migrate.py", line 107, in handle
    ignore_ghosts = ignore_ghosts,
  File "/usr/local/python2.7/lib/python2.7/site-packages/South-0.7.4-py2.7.egg/south/migration/__init__.py", line 219, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File "/usr/local/python2.7/lib/python2.7/site-packages/South-0.7.4-py2.7.egg/south/migration/migrators.py", line 235, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File "/usr/local/python2.7/lib/python2.7/site-packages/South-0.7.4-py2.7.egg/south/migration/migrators.py", line 310, in migrate_many
    result = self.migrate(migration, database)
  File "/usr/local/python2.7/lib/python2.7/site-packages/South-0.7.4-py2.7.egg/south/migration/migrators.py", line 134, in migrate
    self.done_migrate(migration, database)
  File "/usr/local/python2.7/lib/python2.7/site-packages/South-0.7.4-py2.7.egg/south/migration/migrators.py", line 113, in done_migrate
    self.record(migration, database)
  File "/usr/local/python2.7/lib/python2.7/site-packages/South-0.7.4-py2.7.egg/south/migration/migrators.py", line 280, in record
    record.save()
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/base.py", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/base.py", line 551, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/manager.py", line 203, in _insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/query.py", line 1576, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/sql/compiler.py", line 910, in execute_sql
    cursor.execute(sql, params)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/usr/local/python2.7/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: syntax error at or near "RETURNING" at character 171 
```

在我将数据库迁移到另一台服务器之前，它工作正常。现在我遇到了各种各样的麻烦，我不确定该怎么办。此外，如果尝试将字段添加到数据库中，South 似乎也会发生这种情况。奇怪的是，修改数据库中现有的对象/列成功而没有失败。我真的不确定该怎么做，并希望得到任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:50:00.430

8.1 不支持该`RETURNING`子句。因此，将您的数据库版本升级到当前的稳定版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T13:43:41.250

8.1 不支持返回插入对象的 id，因此您需要禁用它。

```
from django.db import connection
##just before insert statement
connection.features.can_return_id_from_insert = False    
###some insert statement 
```

# batch-file - 更新批处理文件中的命令行参数

> ID：10339832
> 
> 赞同：0
> 
> 时间：2012-04-26T19:12:12.860
> 
> 标签：batch-file

**批处理文件**我正在编写批处理文件，它接受命令行参数并在参数匹配时做一些事情。但是当使用新参数再次运行批处理文件时，文件仍然使用旧参数运行。

1.  第一次运行：file.bat -name hello -w 400 -r 320

2.  第二次运行：file.bat -name hello -w 400。

当我第二次运行文件时，它仍然执行第一次运行，我的意思是说它仍然考虑第一次运行的参数。有谁知道为什么会这样？

提前致谢。

很抱歉没有发布批处理文件代码。下面提到的是代码。

```
set filename= 
set rate=
set hidden=
set rate=
:recheck 
if  "%1"=="-help"  goto :help
if  "%1"=="-name"  goto :filename
if  "%1"=="-h"     goto :hidden 
if  "%1"=="-w"     goto :weight 
if  "%1"=="-r"     goto :rate 
if  "%~1"==""      goto :endofcommandline
:filename 
shift 
set filename =%1
shift   
goto :recheck 
```

对于文件的另一部分，我使用变量“文件名”来做其他事情。我还在文件的开头和结尾使用 setlocal 和 endlocal 。对于每个 if 语句，我都有其他相应的标签，并将不同的变量设置为用户传递给它们的值（如果有的话）。有时，当我尝试打印出某个变量的值时，我也会得到 echo is off。如上所述，我使用的所有变量都在文件开头被清除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:55:22.313

这里有几点。

> “我还在文件的开头和结尾使用 setlocal 和 endlocal 。”
> 
> “如上所述，我使用的所有变量都在文件开头被清除。”

Setlocal 命令不会*清除*变量，它会*保留*当前变量以防止后期修改。这意味着，如果在之前执行批处理文件时，或者甚至通过键入的 SET 命令，定义了文件名变量，它的值将一直保留，直到它被删除或修改。

“好的！”，你说，“文件名变量在批处理文件第二次运行时被修改，对吗？”

好吧，不......以下行：

```
set filename =%1 
```

不修改“文件名”变量，而是修改“文件名”（文件名和空格）。尝试这个：

```
set filename=No space
echo %filename%
set filename =Bad name with trailing space
echo %filename %
echo %filename% 
```

您必须仔细检查您的程序以避免此类错误。

# c# - Telerik RadGrid 如何在填充 Columns 和 AutoGeneratedColumns 时更改 Column 的位置

> ID：10339833
> 
> 赞同：2
> 
> 时间：2012-04-26T19:12:18.287
> 
> 标签：c#, telerik, radgrid

在 RagGrid 中，我填充了 AutoGeneratedColumns 并添加了列。首先显示列，然后显示 AutoGeneratedColumns。我想更改列顺序。如何从 Columns 更改第二列将显示在 AutoGeneratedColumns 的第 4 列之后：

1 列 2 列 3 AutoGeneratedColumn 4 AutoGeneratedColumn .. 7 列 8 AutoGeneratedColumn

谢谢

# c++ - zeromq 3.1 C++ API“设备”不是“zmq”的成员

> ID：10339844
> 
> 赞同：4
> 
> 时间：2012-04-26T19:12:52.170
> 
> 标签：c++, zeromq

我注意到该设备不是 3.0 api 的一部分......我用什么代替？

```
zmq::device (ZMQ_QUEUE, clients, workers); 
```

我发现设备已经移到这里了：[https ://github.com/zeromq/libzfl](https://github.com/zeromq/libzfl)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T07:05:22.870

有点糊涂了，故事就讲到这里吧。

当我继承0MQ/2.x的维护时，它有一个zmq_device()函数，和一组外部设备应用程序，带有XML配置的小主程序。

我之前曾尝试改进和记录人们正在使用的这两层，维护者拒绝了补丁。然后，我们将外部应用程序移至 zdevices 项目，配置更灵活等。最终这些应用程序没有被采用并被放弃。zdevices 使用 libzfl（和 XML）进行配置。大多数 libzfl 都被重构为 CZMQ API（人们经常使用它）。

Sustrik 然后决定从 0MQ/3.0 中删除 zmq_device 调用，我用“少即是多”的论点解释了该列表。人们并不真正喜欢这个，因为它破坏了很多现有的应用程序，原因很弱。

所以在 XS 分叉之后，我将 zmq_device 修补回 0MQ/3.1。C++ API 不是核心库的一部分，但欢迎使用它的任何人将设备方法修补回其中。

HTH。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T20:26:20.257

AFAIK，目前没有可用于 3.x 的设备，但根据自述文件

> 少即是多
> 
> 预建设备和 zmq_device() 已删除。应作为单独的项目提供。

就在一年前，pieterh[在网站上写了以下关于](http://www.zeromq.org/docs:3-0)移除设备的原因：

> 它主要是关于能够独立于 libzmq 核心来改进设备层。作为 libzmq 核心的一部分，很难改进这些设备层，主要是因为核心 API 被认为是神圣的，而其他东西则不然。即除了主要版本之间不涉及核心API。因此，如果设备是核心的一部分，则不会触摸设备，除非在主要版本之间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T06:00:19.863

现在只需使用 C API：

```
zmq_device (ZMQ_QUEUE, clients, workers); 
```

# python - Python：连接字符串，允许它调用元组

> ID：10339849
> 
> 赞同：0
> 
> 时间：2012-04-26T19:13:12.857
> 
> 标签：python, string, tuples, python-2.7

在一个名为“数据”的文件中，我有一些元组：

```
tuple1 = (1, 2, 3)
tuple2 = (4, 5, 6) 
```

在另一个文件中，我导入数据文件并有一个连接字符串的函数，以便能够调用这些元组。

```
import data

def string(tupleNumber):

    return 'tuple' + str(tupleNumber) 
```

如果我尝试打印元组，我会收到一个错误，因为 string(1) 未在数据中定义。

```
print data.tuple1     # This works
print string(1)       # This also works
print data.string(1)  # This does not 
```

出现以下结果：

```
(1, 2, 3)
tuple1

Traceback (most recent call last):
  File "C:/Python27/Scripts/tuplecall.py", line 10, in <module>
    print data.string(1)
AttributeError: 'module' object has no attribute 'string' 
```

我可以看到为什么它不起作用，但是当我尝试调用数据集时，我想不出如何将 string(1) 更改为看起来像 tuple1。

到目前为止，我解决这个问题的方法是使用以下代码：

```
from data import *

def string(tupleNumber):

    return 'tuple' + str(tupleNumber)

print tuple1
print string(1)
print eval(string(1)) 
```

这给出了结果：

```
(1, 2, 3)
tuple1
(1, 2, 3) 
```

然而，由于我的“数据”文件中有很多数据，我担心我在每个元组中浪费内存加载“来自数据导入*”，当我需要它时，我可以像第一种情况一样调用它，但我是显然遗漏了一些重要的东西。

我也看到 eval() 不是最好用的东西，但到目前为止，我发现它是所有的。因此，如果有人能够就如何提高我的理解给我一些想法，我将不胜感激。

亲切的问候

嗅觉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:26:10.740

这并不是变量名的真正含义。中的数字 1 和 2`tuple1`要么`tuple2`表示某些东西（例如，`1`真正的意思是“1 人”和`2`“2 人”），要么不表示，它们只是占位符。

如果它们*确实*意味着什么，您可能应该使用字典：

```
>>> my_data = {1: (1,2,3), 2: (4,5,6)}
>>> my_data
{1: (1, 2, 3), 2: (4, 5, 6)}
>>> my_data[1]
(1, 2, 3)
>>> my_data[2]
(4, 5, 6) 
```

如果他们没有，而你只有两个元组，那么你不妨使用一个列表：

```
>>> my_data = [(1,2,3), (4,5,6)]
>>> my_data[0]
(1, 2, 3)
>>> my_data[1]
(4, 5, 6)
>>> for tup in my_data:
...     print tup
... 
(1, 2, 3)
(4, 5, 6) 
```

你绝对不需要使用 eval。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:20:15.840

您的 string() 方法声明不在数据文件中，因此 data.string() 不起作用

# haskell - Haskell 非法模式匹配

> ID：10339851
> 
> 赞同：-3
> 
> 时间：2012-04-26T19:13:16.050
> 
> 标签：haskell, pattern-matching

我被告知这个函数声明是非法的：

f3 1 (f2 x) 是

我确实理解为什么这是非法的，我认为它与第二个参数（f2 x）有关。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T19:49:53.947

在函数定义中，函数的参数必须是[模式](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-590003.17.1)，即它们必须是

*   一个通配符`_`，它​​匹配所有内容并且不绑定任何内容，
*   一个变量模式`var`，它匹配所有内容并将相应的参数绑定到参数，
*   一个文字（整数、浮点数、字符或字符串），它匹配等于模式的参数，
*   一个值构造函数应用于与其数量要求一样多的模式（因此可以嵌套模式），
*   一个列表模式`[elem1, elem2, elem3, elem4]`，
*   一个标记的模式`Con{ field1 = value1, field2 = value2 }`，
*   带括号的模式`(pattern)`，
*   元组模式`(pattern1, pattern2, pattern3)`，
*   *as-pattern* ,将`var@pattern`整个参数和组件绑定到if 匹配`var`的相应部分，或`pattern`
*   一个无可辩驳的模式`~pattern`，它绑定了参数resp。它的零件`pattern`resp。它的部分，如果参数实际上不匹配，则会导致运行时错误`pattern`。

`(f2 x)`片段中的部分

```
f3 1 (f2 x) y 
```

不是模式，而是表达式，函数 ( `f2`) 应用于值 ( `x`)，因此函数定义不能具有形式

```
f3 1 (f2 x) y = whatever 
```

最接近的法律功能定义是

```
f3 1 (F2 x) y = ... 
```

带有（一元）*值构造函数* `F2`。

# mongodb - 我可以在不使用 dbstats 的情况下计算 MongoDB 数据库的文件大小吗？

> ID：10339852
> 
> 赞同：2
> 
> 时间：2012-04-26T19:13:17.353
> 
> 标签：mongodb, size, filesize

MongoDB 中有[一个 dbstats 调用，](http://docs.mongodb.org/manual/reference/database-statistics/)它为您提供磁盘上数据库的真实大小，即 fileSize。但是，dbstats 不适合在生产中使用，因为[它在运行时会阻塞数据库服务器，并且可以运行很长时间](http://www.mongodb.org/display/DOCS/Monitoring+and+Diagnostics#MonitoringandDiagnostics-mongoShellDiagnosticCommands)。有一个据称是安全[的 collstats 调用](http://docs.mongodb.org/manual/reference/collection-statistics/)（根据同事），但它的返回值没有 fileSize 成员，只有 storageSize 成员。这是[对 dbstats().dataSize、fileSize 和 storageSize 的解释](https://stackoverflow.com/a/9025881/253309)，声称 storageSize 和 fileSize 是不同的。该[文档](http://docs.mongodb.org/manual/reference/database-statistics/)模棱两可，但我已经根据经验证实了差异：

```
> MB = Math.pow(2, 20)
> db.stats(MB)
{
    "db" : "somedb",
    "collections" : 11,
    "objects" : 68200,
    "avgObjSize" : 1153.922991202346,
    "dataSize" : 75,
    "storageSize" : 117,
    "numExtents" : 34,
    "indexes" : 17,
    "indexSize" : 8,
    "fileSize" : 448,
    "nsSizeMB" : 16,
    "ok" : 1
}
> 
```

有没有办法在不阻塞服务器 15 分钟的情况下使用服务器 API 计算磁盘上 MongoDB 数据库的真实大小？

**更新：**我正在专门寻找服务器 API。[我的用例是向数据库浏览器Mongs](http://www.whit537.org/mongs/)添加磁盘使用统计信息，它不能假设直接文件系统访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:29:08.190

这是意料之中的。

存储大小是内部为文档分配的空间量。MongoDB 自动将填充添加到实际文档大小，以使更新不需要在磁盘上移动。

FileSize 是主机操作系统文件系统中磁盘上分配的空间量（包括预分配空间）。数据文件以每个 DB 为基础分配，从 64 MB 开始，大小翻倍，直到达到 2 GB（之后每个后续数据文件的大小为 2 GB）。数据文件的命名格式为 dbname.0, dbname.1 ...

要查找文件大小，您可以简单地对所有数据文件使用 linux 命令（ls -l、du -h 等）并对值求和，或者您可以使用 du -ch*正则表达式*来查找所有数据文件的组合值.

# ios - iOS 低内存崩溃但使用非常低内存的问题 - 使用仪器检查

> ID：10339855
> 
> 赞同：0
> 
> 时间：2012-04-26T19:13:28.623
> 
> 标签：ios, memory-management

我有一个示例应用程序在模拟器上运行良好，但在设备上崩溃。我从 Organizer 在控制台上得到以下输出。它会在短时间内崩溃。

使用仪器，内存泄漏，我看到内存使用量约为 2-3 mb。使用内存分配，我看到大约 8-9mb 的内存分配，而在 VM 跟踪器中什么也没有。

控制台输出如下所示。任何人都可以建议该怎么做吗？

```
 pr 26 11:46:37 unknown SpringBoard[15] <Warning>: Memory level is not normal (2). Delaying auto-relaunch of 'com.apple.mobilemail' for 30 seconds.
    Apr 26 11:46:44 unknown SpringBoard[15] <Warning>: No valid 'aps-environment' entitlement string found for application 'SampleApp': (null). Notifications will not be delivered.
    Apr 26 11:46:44 unknown SampleApp[14834] <Warning>: unique id: //someID
    Apr 26 11:46:45 unknown SampleApp[14834] <Warning>: Failed to get token, error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0x2322ae {NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application}
    Apr 26 11:46:46 unknown UserEventAgent[12] <Notice>: jetsam: kernel termination snapshot being created
    Apr 26 11:46:46 unknown com.apple.debugserver-64[14833] <Warning>: 1 [39f1/1303]: error: ::read ( 4, 0x2ff389d4, 1024 ) => -1 err = Bad file descriptor (0x00000009)
    Apr 26 11:46:46 unknown com.apple.launchd[1] <Notice>: (com.apple.atc) Exited: Killed: 9
    Apr 26 11:46:46 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.fun.SampleApp.ios[0x2344]) Bug: launchd_core_logic.c:3730 (25147):3
    Apr 26 11:46:46 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.fun.SampleApp.ios[0x2344]) Assuming job exited: <rdar://problem/5020256>: 10: No child processes
    Apr 26 11:46:46 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.fun.SampleApp.ios[0x2344]) Job appears to have crashed: Segmentation fault: 11
    Apr 26 11:46:46 unknown com.apple.launchd[1] <Notice>: (com.apple.mediaserverd) Exited: Killed: 9
    Apr 26 11:46:46 unknown com.apple.launchd[1] <Notice>: (com.apple.ubd) Exited: Killed: 9
    Apr 26 11:46:47 unknown kernel[0] <Debug>: launchd[14836] Builtin profile: mediaserverd (sandbox)
    Apr 26 11:46:48 unknown lockdownd[21] <Error>: 2ffd4000 _receive_message: walk away - non-SSL 1
    Apr 26 11:46:48 unknown com.apple.mobile.lockdown[21] <Notice>: receive secure message timeout!
    Apr 26 11:46:48 unknown ReportCrash[14838] <Error>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-04-26-114648.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0
    Apr 26 11:46:49 unknown mediaserverd[14836] <Error>: 11:46:49.618590 com.apple.AVConference: /SourceCache/GameKitServices/GameKitServices-344.3/AVConference.subproj/Sources/AVConferenceServer.m:1862: AVConferenceServerStart aborting - device doesn't support conferencing
    Apr 26 11:46:49 unknown SpringBoard[15] <Warning>: Application 'SampleApp' exited abnormally with signal 11: Segmentation fault: 11
    Apr 26 11:46:52 unknown atc[14835] <Warning>: Error: Connection invalid
    Apr 26 11:46:53 unknown wifid[27] <Error>: WiFi:[357158813.1212122]: Client itunesstored is background application
    Apr 26 11:47:07 unknown SpringBoard[15] <Warning>: Memory level is not normal (2). Delaying auto-relaunch of 'com.apple.mobilemail' for 30 seconds.
    Apr 26 11:47:37 unknown SpringBoard[15] <Warning>: Memory level is not normal (2). Delaying auto-relaunch of 'com.apple.mobilemail' for 30 seconds.
    Apr 26 11:48:07 unknown SpringBoard[15] <Warning>: Memory level is not normal (2). Delaying auto-relaunch of 'com.apple.mobilemail' for 30 seconds.
    Apr 26 11:48:37 unknown SpringBoard[15] <Warning>: Memory level is not normal (2). Delaying auto-relaunch of 'com.apple.mobilemail' for 30 seconds.
    Apr 26 11:48:49 unknown SpringBoard[15] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:27:51.800

好的，所以看起来一切都很好，我只需要从 iPad 上删除应用程序并重新安装它......很奇怪......！

# java - 是否可以创建一个 @RooSolrSearchable 而不是 JPA 实体的对象？

> ID：10339856
> 
> 赞同：0
> 
> 时间：2012-04-26T19:13:29.840
> 
> 标签：java, spring, spring-roo, solrj

是否可以创建一个 @RooSolrSearchable 而不是 JPA 实体的对象？

我们有一个由 5-6 层组成的对象模型。我们需要在对象模型的最底层的一些文本字段上进行搜索，但是我们需要通过上层进行过滤。我们的想法是专门为 Solr 创建一个 DTO，这样我们就可以在 ID 字段上运行过滤查询，在文本字段上运行模糊匹配。

Roo 期望有一点不同的模型……如果您将对象注释为 @RooSolrSearchable，它期望它是 JPA 实体。我们只想要搜索，以及在不作为 JPA 实体的情况下使用搜索（方面生成等）的好处。当然，我们可以使用 Spring 和 SolrJ 手动执行此操作……但我们宁愿让 Roo 完成艰苦的工作。

我们继续前进的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:24:22.373

好的，所以我真的没有办法做到这一点。我们最终使用了正常的 Solr-Spring 集成（还不错）。

# javascript - 有没有办法仅在条件为真时执行 jQuery 链接的分支

> ID：10339857
> 
> 赞同：6
> 
> 时间：2012-04-26T19:13:36.383
> 
> 标签：javascript, jquery, conditional-statements

我对 jQuery 的熟练程度可能大约为 7 或 8（等级为 1-10），所以我不确定这是否有意义，但我想知道是否有人知道 jQuery 函数或可能是一个插件，它仅在给定条件为真时才允许执行 jQuery 的一个分支。否则，我很想听听是否有人认为这个概念在某种程度上存在缺陷（**编辑**以及它是*如何*存在缺陷的）

虽然可以使用类似于以下的普通 JavaScript 语法来控制各种事件的附件：

```
var desiredElement = $('.parent')                        // find the parent element
                     .hover(overFunction,offFunction)    // attach an event while I've got the parent in 'scope'
                     .find('.child-element');            // then find and return the child
if (booleanVar1) {                                       // if one condition
    desiredElement.click(clickFunction1);                //   attach one event
} else if (booleanVar2) {                                // or if a different condition
    desiredElement.click(clickFunction2);                //   attach a different event
} else {                                                 // otherwise
    desiredElement.click(clickFunction3);                //   attach a default event
}
$('.parent').find('.other-child')                        // (or $('.parent .other-child')
    .css(SomePredefinedCssMapping)
    .hide()
//... 
```

我想知道是否有一种方法可以在 jQuery 中完成这一切，或者是否有充分的理由不这样做......也许是这样的：

```
$('.parent')                                // find the parent element
    .hover({overFunction,offFunction})      // attach an event while I've got the parent in 'scope'
    .find('.child-element')                 // then find the child
        .when(booleanVar1)                  // if one condition
            .click(clickFunction1)          //   attach one event
        .orWhen(booleanVar2)                // or if a different condition
            .click(clickFunction2)          //   attach a different event
        .orElse()                           // otherwise
            .click(clickFunction3)          //   attach a default event
        .end()
    .end()
    .find('.other-child')
        .css(SomePredefinedCssMapping)
//... 
```

*注意：我认为这在语法上是正确的，假设布尔值和函数定义得当，但我很确定我已经很清楚地理解了意图*

提议的 jQuery 对我来说似乎更整洁（？？）同意/不同意？- 所以这是我的问题：

*   本机 jQuery 的某些部分基本上已经这样做了吗？
*   是否已经有一个扩展允许这种类型的事情？
*   做起来比我想象的难吗？（我想如果条件为真则保持当前元素集，如果条件为假则推入一个空元素集，然后为每个`or`条件弹出元素集就可以了，就像`end()`方法弹出前一个通话后设置`find()`）
*   有什么东西会显着降低效率吗？

**编辑**

该问题询问如何使用方法链接来执行此操作，或者为什么不建议这样做（首选具体情况）。虽然它不要求替代方案，但可能需要这样的替代方案来解释 jQuery 链接方法的问题。此外，由于上面的示例立即评估布尔值，因此任何其他解决方案都应该这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:23:06.933

```
$('.parent').hover(overFunction,offFunction)
    .find('.child-element')
    .click( booleanVar ? clickFunction1 :
            booleanVar2 ? clickFunction2 :
            clickFunction3 )
    .end()
    .find('.other-child')
    .css(SomePredefinedCssMapping) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:18:28.107

你不能在你的处理程序中执行那个条件逻辑吗？

```
var boolVar1 = true,
    boolVar2 = false;

$(".foo").on("click", function(){
  if ( boolVar1 ) clickFunction1();
  if ( boolVar2 ) clickFunction2();
}); 
```

# php - 使用 ajax 和 PHP 获取最新文件时避免部分上传文件（通过 FTP）

> ID：10339858
> 
> 赞同：5
> 
> 时间：2012-04-26T19:13:43.947
> 
> 标签：php, javascript, jquery, ajax

我知道这个标题有点奇怪，但我会到达那里。

我有一台连接在笔记本电脑上的相机。使用远程拍摄，当摄影师拍摄照片时，它会保存到笔记本电脑硬盘上的文件夹中。在文件夹上设置了一个 Automator (Mac OS X) 操作，每当出现新文件时，它都会调整其大小并使用 Transmit 将其推送到 FTP。

这就是代码的来源。

我有一个网页显示最近拍摄的照片。它使用 ajax 反复检查是否上传了新文件，如果有，则加载新照片并与旧照片交叉淡入淡出。这是页面上运行的 Javascript。

```
(function() {
  var delay, refreshLoop;

  // Alias to setTimeout that reverses the parameters, making it much cleaner in code (for CoffeeScript)
  delay = function(time, callback) {
    return setTimeout(callback, time);
  };

  // Function that drives the loop of refreshing photos
  refreshLoop = function(currentFolderState, refreshRate) {
    // Get the new folder state
    $.get("ajax/getFolderState.php", function(newFolderState) {
      // If the new folder state is different
      if (newFolderState !== currentFolderState) {
        // Get the newest photo 
        $.get("ajax/getNewestPhoto.php", function(photoFilename) {
          var img;
          // Create the new image element
          img = $('<img class="new-photo"/>')
            // Append the src attribute to it after so it can BG load
            .attr('src', "/events/mindsmack/booth/cinco-de-mindsmack-2012/" + photoFilename)
            // When the image is loaded
            .load(function() {
              // Append the image to the photos container
              $('#photos').append(img);
              // Crossfade it with the old photo
              $('#photos .current-photo').fadeOut();
              $('#photos .new-photo').fadeIn().removeClass("new-photo").addClass("current-photo");
            });
        });
      }
      // Wait for the refresh rate and then repeat
      delay(refreshRate, function() {
        refreshLoop(newFolderState, refreshRate);
      });
    });
  };

  // Document Ready
  $(function() {
    var refreshRate;

    // Load the first photo 
    $.get("ajax/getNewestPhoto.php", function(photoFilename) {
      $('#photos').append("<img src='/events/mindsmack/booth/cinco-de-mindsmack-2012/" + photoFilename + "' class='current-photo' />");
    });
    refreshRate = 2000;
    // After the timeout
    delay(refreshRate, function() {
      // Get the initial folder state and kick off the loop
      $.get("ajax/getFolderState.php", function(initialFolderState) {
        refreshLoop(initialFolderState, refreshRate);
      });
    });
  });

}).call(this); 
```

这是在该 Javascript 中调用的两个 PHP 文件

获取文件夹状态.php

```
<?php

    $path = $_SERVER['DOCUMENT_ROOT'] . "/events/mindsmack/booth/cinco-de-mindsmack-2012/";

    // Get a directory listing of the path where the photos are stored
    $dirListing = scandir( $path );

    // Echo an md5 hash of the directory listing
    echo md5(serialize($dirListing)); 
```

获取最新照片.php

```
<?php

    $path = $_SERVER['DOCUMENT_ROOT'] . "/events/mindsmack/booth/cinco-de-mindsmack-2012/";

    // Get a directory listing of the path where the photos are stored
    $listing = scandir($path);

    $modTime = 0;
    $mostRecent = "";

    // Find the most recent file
    foreach ( $listing as $file ) {
        if ( is_file($path.$file) && $file !== ".DS_Store" && filectime($path.$file) > $modTime) {
            $modTime = filectime($path.$file);
            $mostRecent = $file;
        }
    }

    // Echo the most recent filename
    echo $mostRecent; 
```

所有这些工作大多完美无缺。我相信，问题在于当文件正在上传时触发循环。偶尔会拍一张照片，它只会在页面中途显示。根本没有抛出错误，脚本继续运行得很好，并且图像文件实际上以该状态缓存，让我相信我的代码正在捕获正在进行的文件上传并且只显示文件的一部分那一刻已经上传。

如果我需要为了克服这个问题而改变我的解决方案，我不介意改变我的解决方案，我只是不确定该怎么做。

编辑

根据以下建议之一，我在 getNewestPhoto.php 中添加了代码，用于检查照片的文件大小，稍等片刻，然后再次检查。如果它们不同，它会返回并再次检查，直到文件大小相同。我希望这会捕获正在上传的文件，因为文件大小会在循环之间发生变化，但即使照片出现部分渲染，文件大小检查也没有捕获它。

这是我添加的代码

```
$currFilesize = filesize($path . $mostRecent);
$newFilesize;

while ( true ) {
    sleep(.5);
    $newFilesize = filesize($path . $mostRecent);

    if ( $newFilesize == $currFilesize) {
        break;
    }
    else {
        $currFilesize = $newFilesize;
    }
} 
```

我在想（通过另一个建议）我需要在上传时添加某种锁定文件，以阻止代码刷新照片并在上传完成后被删除，但看到我没有运行任何类型的网络计算机上的服务器连接到相机，我不知道如何做到这一点。我很乐意提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:17:47.687

有很多方法可以解决这个问题，最比我要建议的要好。然而，我认为最简单和最快的解决方案是将 FTP 传输到 tmp 目录，并在传输完成后触发文件移动到生产目录。您当地的自动化工作在处理传输时是否有这样的机制？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:17:38.863

我会让 PHP 脚本以（小）延迟循环检查文件大小，如果匹配则输出文件。否则，循环直到它完成。

# python - 使用格式更改解析 pdb 文件

> ID：10339859
> 
> 赞同：1
> 
> 时间：2012-04-26T19:13:46.680
> 
> 标签：python

我有一个看起来像这样的文件：

```
ATOM   7748  CG2 ILE A 999      53.647  54.338  82.768  1.00 82.10           C  
ATOM   7749  CD1 ILE A 999      51.224  54.016  84.367  1.00 83.16           C  
ATOM   7750  N   ASN A1000      55.338  57.542  83.643  1.00 80.67           N  
ATOM   7751  CA  ASN A1000      56.604  58.163  83.297  1.00 80.45           C  
ATOM   7752  C   ASN A1000      57.517  58.266  84.501  1.00 80.30           C 
```

如您所见，“”在第 4 列和第 5 列之间消失（从 0 开始计数）。因此下面的代码失败了。我是 python 新手（总时间现在整整 3 天！）并且想知道处理这个问题的最佳方法是什么。只要有空格， line.split() 就可以工作。我是否必须进行字符计数，然后使用绝对引用解析字符串？

```
import string
visited = {}
outputfile = open(file_output_location, "w")
for line in open(file_input_location, "r"):
    list = line.split()
    id = list[0]
    if id == "ATOM":
        type = list[2]
        if type == "CA":
            residue = list[3]
            if len(residue) == 4:
                residue = residue[1:]
            type_of_chain = list[4]
            atom_count = int(list[5])
            position = list[6:9]
            if(atom_count >= 1):
                if atom_count not in visited and type_of_chain == chain_required:
                    visited[atom_count] = 1
                    result_line = " ".join([residue,str(atom_count),type_of_chain," ".join(position)])
                    print result_line
                    print >>outputfile, result_line
outputfile.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:22:33.330

PDB 文件似乎是固定列宽文件，而不是空格分隔。[因此，如果您必须手动解析它们（而不是使用诸如pdb-tools 之](http://code.google.com/p/pdb-tools/)类的现有工具），则需要使用更多类似以下内容的方法来分割队列：

```
id = line[0:4]
type = line[4:9].strip()
# ad nausium 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:21:52.020

使用字符串切片：

```
print '0123456789'[3:6]
345 
```

那里有一个不对称 - 第一个数字是您需要的第一个字符的从 0 开始的索引。第二个数字是您不再需要的第一个字符的从 0 开始的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T23:41:44.383

可能值得安装[Biopython](http://biopython.org/wiki/Biopython)，因为它有一个 Parse PDB 模块。

我在您的示例数据上使用了以下代码：

```
from Bio.PDB.PDBParser import PDBParser

pdb_reader = PDBParser(PERMISSIVE=1)
structure_id="Test"
filename="Test.pdb" # Enter file name here or path to file.
structure = pdb_reader.get_structure(structure_id, filename)

model = structure[0]

for chain in model: # This will loop over every chain in Model
    for residue in chain:
        for atom in residue:
            if atom.get_name() == 'CA': # get_name strips spaces, use this over get_fullname() or get_id()
                print atom.get_id(), residue.get_resname(), residue.get_id()[1], chain.get_id(), atom.get_coord() 
                # Prints Atom Name, Residue Name, Residue number, Chain Name, Atom Co-Ordinates 
```

这打印出来：

```
CA ASN 1000 A [ 56.60400009  58.1629982   83.29699707] 
```

然后我在一个更大的蛋白质上尝试了它，它有 14 条链（1aon.pdb）并且效果很好。

# regex - Notepad++：用正则表达式查找和替换

> ID：10339860
> 
> 赞同：1
> 
> 时间：2012-04-26T19:13:53.273
> 
> 标签：regex, notepad++

嗨，我在多个文件中有下面的文本，我想用 Notepad++ 更改它们。我搜索了互联网和许多“guyides”，但还没有运气。

```
<ingredient id="57" count="10000000"/> 
```

我想这样做

```
<ingredient id="57" count="10000000" isTaxIngredient="true" /> 
```

计数始终为整数。

我正在寻找这个

```
<ingredient id="57" count="\d+"/> 
```

并用这个替换所有

```
<ingredient id="57" count="\1" isTaxIngredient="true" /> 
```

我的表情应该是怎样的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:17:16.363

唯一缺少的是括号，显示要在反向引用中捕获的正则表达式匹配的哪一部分`\1`：

```
<ingredient id="57" count="(\d+)"/> 
```

应该管用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T19:21:14.803

您只是忘记了 \d+ 周围的括号

```
<ingredient id="57" count="(\d+)"/> 
```

这告诉记事本++您希望它匹配的不同组（并使用反向引用检索）

问候，

曼尼

# php - 图像JPEG（）；不在主机服务器上生成图像，在 localhost 上工作正常

> ID：10339861
> 
> 赞同：2
> 
> 时间：2012-04-26T19:13:55.460
> 
> 标签：php, image, image-processing, jpeg

我有这段代码应该生成一个随机数的验证码图像，它在本地主机上运行良好，但在我的主机上运行良好，有人可以帮忙吗？有人能告诉我我哪里出错了吗？

```
 <?php
 session_start();
header('Content-type: image/jpeg');

 $text= $_SESSION['secure'];

 $font_size =30;
 $image_width= 110;
 $image_height=40;

 $image=imagecreate($image_width,$image_height);
 imagecolorallocate($image, 255, 255, 255);
 $text_color = imagecolorallocate($image, 0, 0, 0);

 for($x=1; $x<=30; $x++){
$x1 = rand(1,100);
$x2 = rand(1,100);
$y1 = rand(1,100);
$y2 = rand(1,100);
 imageline($image, $x1, $x2, $y1, $y2, $text_color);
}

imagettftext($image, $font_size, 0, 15, 30, $text_color, 'font.ttf', $text);
imagejpeg($image);
?> 
```

然后我将包含上述代码的文件包含在一个新的 html 文件中，其中我有我的表单并像这样调用图像：

```
 <img src="generate.php"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:31:33.073

用字符串测试了你的脚本，`hello`它可以工作

![生成的图像](../Images/2d481a3046891c5b8634c269b5574fe0.png)

我很确定问题是`PHP`找不到字体..尝试使用完整的系统路径

尝试

```
$font = dirname ( __FILE__ ) . "/verdana.ttf" ;
if(!is_file($font))
{
    die("Missing Font");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:05:28.320

确保您的脚本中没有前导空格或换行符。在尝试显示图像之前输出的任何文本都将导致它失败。

# vb.net - vb.net FindByValue

> ID：10339862
> 
> 赞同：1
> 
> 时间：2012-04-26T19:14:04.957
> 
> 标签：vb.net

我有以下代码

```
 li1 = ddsState.Items.FindByValue("State") 
```

我将 li1 声明为 String 但说我需要

```
 ListItem. 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:20:10.537

显然，`ddsState`是一种列表，也许是一个下拉列表。该`Items`集合包括`ListItems`. 因此，当您找到 之一时`Items`，其类型为`ListItem`。

如果您将声明更改为`li1`to `ListItem`，您将能够检查其属性，包括其值。

# php - 如何使用 phpthumb （或其他一些库）自动将整个目录复制为缩略图

> ID：10339863
> 
> 赞同：0
> 
> 时间：2012-04-26T19:14:05.303
> 
> 标签：php, gd, thumbnails, phpthumb

我希望将目录中的所有图像作为缩略图复制到单独的目录中，然后我可以在我的网站上查看。现在我正在研究phpthumb，但也下载了wideimage 和zen photo。

谢谢，如果您能找到与此完全相同的副本，近似匹配也可能会有所帮助。

这是仅复制单个文件的脚本：

```
require_once '../ThumbLib.inc.php';
//include the thumb library 
$thumb = PhpThumbFactory::create('test.jpg');
//create a new image from the targeted jpegs
$thumb->adaptiveResize(100, 100);
//resize 
$thumb->save('test.png', 'png');
//save as 'test' with the file type png
//echo "<img src='$thumb' class='thumb'>";
$thumb->show();
//print the thumbnail to the screen 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:24:14.483

尝试

```
$dir = "photos" ;
$destination = "thumb" ;
$images = scandir($dir);

foreach ( $images as $image ) {

    if(is_file($image))
    {
        $ext = pathinfo ( $dir . DIRECTORY_SEPARATOR . $image, PATHINFO_EXTENSION );
        $thumb = PhpThumbFactory::create ( $dir . DIRECTORY_SEPARATOR . $image );
        $thumb->adaptiveResize ( 100, 100 );
        $thumb->save ( $destination . DIRECTORY_SEPARATOR . $image, $ext );
        $thumb->show ();
    }
} 
```

# facebook - Facebook Like + Send（发送不显示）

> ID：10339872
> 
> 赞同：3
> 
> 时间：2012-04-26T19:14:32.237
> 
> 标签：facebook, html, facebook-social-plugins

所以我使用 Facebook Like 结合发送按钮，使用以下 HTML5 代码：

```
<div class="fb-like" data-send="true" data-layout="button_count" data-width="120" data-show-faces="false" data-colorscheme="dark" data-font="arial"> 
```

问题是“发送”按钮闪烁片刻然后消失。请注意，这仅适用于 data-layout=button_count 的情况。当数据布局设置为“标准”时，它会保持不变，尽管会显示其他不需要的文本（在我们的例子中）。

在我能找到的文档中，没有任何地方说当数据布局设置为“button_count”时，data-send=true 标志不会呈现“send”按钮。

即使在 facebook 示例页面上也是如此：

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

发送按钮闪烁然后消失的事实（即使在 FACEBOOK 示例页面上），让我相信这是一个错误。

知道的人可以对正在发生的事情有所了解吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:52:03.077

[您可以通过在错误报告系统](http://developers.facebook.com/bugs?search_view=search&search_ids%5B0%5D=119344624828659&&search_statuses%5B0%5D=open)中搜索看到，发送按钮当前似乎存在一些问题。

这两个告诉我出了点问题：[发送按钮打开新选项卡](http://developers.facebook.com/bugs/177102442412197?browse=search_4f99b4d4245973761417571)和[数据布局设置为 'button_count' 的 Like/Send 按钮出现问题](http://developers.facebook.com/bugs/299191993489218?browse=search_4f97ebe1524a53b52292044)。

我不确定您所描述的是否相关，但这并不牵强。

# ruby - 在 Pry 的提示配置中，nest_level 是什么意思？

> ID：10339874
> 
> 赞同：1
> 
> 时间：2012-04-26T19:14:46.267
> 
> 标签：ruby, prompt, irb, read-eval-print-loop, pry

我正在尝试为输入 Ruby 代码配置一个更简单的 Pry 提示。是什么`nest_level`意思？Pry 文档说，“三个参数被传递到提示过程中，作为会话目标的对象，当前嵌套级别以及对关联 Pry 实例的引用。如果需要，可以在提示中使用这些对象。” 他们的例子是：

```
Pry.config.prompt = proc { |obj, nest_level, _| "#{obj}:#{nest_level}> " } 
```

但是，`nest_level`似乎不是我想的那样：

```
main:0> if true
main:0>   if true
main:0>     while true
main:0>       puts 1
main:0>       break
main:0>     end  
main:0>   end  
main:0> end  
1
=> nil
main:0> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:20:53.467

嵌套级别是指范围。在`pry`中，您可以使用`cd`命令“输入”对象，这就像 using `instance_eval`- 允许您使用所述对象的方法，而不用在它们前面加上对象的名称。例如（使用您使用的相同提示过程）：

```
main:0> arr=[1,2,3]
=> [1, 2, 3]
main:0> cd arr
[1, 2, 3]:1> first
=> 1
[1, 2, 3]:1> last
=> 3
[1, 2, 3]:1> count
=> 3
[1, 2, 3]:1> exit
=> [1, 2, 3]
main:0> 
```

我已经`cd`编辑到数组中，并调用了它的方法，而没有在它们前面加上`arr.`. 当我编辑它时嵌套级别更改为1，当我`cd`编辑时又回到0 `exit`。我也可以`cd ..`用来退出范围。

# c# - ASP.NET WebApi：如何使用 WebApi HttpClient 通过文件上传执行多部分发布

> ID：10339877
> 
> 赞同：64
> 
> 时间：2012-04-26T19:14:58.880
> 
> 标签：c#, asp.net, asp.net-web-api, dotnet-httpclient

我有一个 WebApi 服务处理一个简单表单的上传，比如这个：

```
 <form action="/api/workitems" enctype="multipart/form-data" method="post">
        <input type="hidden" name="type" value="ExtractText" />
        <input type="file" name="FileForUpload" />
        <input type="submit" value="Run test" />
    </form> 
```

但是，我不知道如何使用 HttpClient API 模拟同一篇文章。这`FormUrlEncodedContent`一点很简单，但是如何将带有名称的文件内容添加到帖子中？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-05-24T19:27:24.000

经过多次试验和错误，这里是实际工作的代码：

```
using (var client = new HttpClient())
{
    using (var content = new MultipartFormDataContent())
    {
        var values = new[]
        {
            new KeyValuePair<string, string>("Foo", "Bar"),
            new KeyValuePair<string, string>("More", "Less"),
        };

        foreach (var keyValuePair in values)
        {
            content.Add(new StringContent(keyValuePair.Value), keyValuePair.Key);
        }

        var fileContent = new ByteArrayContent(System.IO.File.ReadAllBytes(fileName));
        fileContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
        {
            FileName = "Foo.txt"
        };
        content.Add(fileContent);

        var requestUri = "/api/action";
        var result = client.PostAsync(requestUri, content).Result;
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-03T00:34:05.003

谢谢@Michael Tepper 的回答。

我必须将附件发布到 MailGun（电子邮件提供商），并且我必须对其稍作修改，以便它接受我的附件。

```
var fileContent = new ByteArrayContent(System.IO.File.ReadAllBytes(fileName));
fileContent.Headers.ContentDisposition = 
        new ContentDispositionHeaderValue("form-data") //<- 'form-data' instead of 'attachment'
{
    Name = "attachment", // <- included line...
    FileName = "Foo.txt",
};
multipartFormDataContent.Add(fileContent); 
```

此处供日后参考。谢谢。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-26T20:24:12.107

您需要查找`HttpContent`.

您创建一个多形式的 http 内容并向其添加各种部分。*在您的情况下，您有一个字节数组内容和表单 url ，沿以下行*编码：

```
HttpClient c = new HttpClient();
var fileContent = new ByteArrayContent(new byte[100]);
fileContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
                                            {
                                                FileName = "myFilename.txt"
                                            };

var formData = new FormUrlEncodedContent(new[]
                                            {
                                                new KeyValuePair<string, string>("name", "ali"),
                                                new KeyValuePair<string, string>("title", "ostad")
                                            });

MultipartContent content = new MultipartContent();
content.Add(formData);
content.Add(fileContent);
c.PostAsync(myUrl, content); 
```

# jquery - 如何使用 jQuery 序列化使未选中的复选框返回一个值？

> ID：10339881
> 
> 赞同：7
> 
> 时间：2012-04-26T19:15:22.990
> 
> 标签：jquery, html, serialization, checkbox

我有一个带有一些复选框的 HTML 表单。我使用 jQuery`.serialize()`函数制作查询字符串以提交到数据库。我遇到的问题是，当未选中复选框时，该`.serialize()`函数不会在查询字符串中注册它。

这个 jsfiddle 说明了我的问题：http: [//jsfiddle.net/cTKhH/](http://jsfiddle.net/cTKhH/)。

这是一个问题，因为我仍然需要将未选中复选框的值保存到数据库中。现在，仅在选中复选框时才保存信息。如果取消选中，并且`.serialize()`提交了来自的信息，则不会进行任何更改，因为没有提交信息。

有谁知道如何让我的`.serialize()`函数在未选中时返回所有复选框的未选中值？

谢谢！！

** 编辑 **

再多一点信息，我现在知道为什么未提交未选中的复选框，因为它不是“成功”的表单控件，请参见此处：[http://www.w3.org/TR/html401/interact/forms。 html#successful-controls](http://www.w3.org/TR/html401/interact/forms.html#successful-controls)。

希望我仍然修改`.serialize()`函数以提交未经检查的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:11:23.430

这是一个简单的例子——我相信你可以把它包装成一个不错的插件。

html

```
<form id="doit" action="" method="post">    
    <input type="checkbox" name="test" data-checkedName="test" data-uncheckedid="yup" value="true" class="checkedValue" />
    <input type="hidden" name="test" id="yup" value="false" />
    <input type="submit" value="serialize" />
</form> 
```

js

```
$(function () {

    $(".checkedValue").click(function () {

        var $cb = $(this),
            $associatedHiddenField = $("#" + $cb.attr("data-uncheckedid")),
            name = $cb.attr("data-checkedName");

        if (this.checked) {
            $cb.attr("name", name);
            $associatedHiddenField.removeAttr("name");

        } else {
            $cb.removeAttr("name");
            $associatedHiddenField.attr("name", name);
        }

    });

    $("#doit").submit(function (e) {
        e.preventDefault();
        console.log($(this).serialize());
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:32:54.920

这个问题的一个常见解决方案是简单地包含一个与复选框同名的隐藏字段，并且值“false”

这样，如果未选中复选框，则提交的值将是“false”，如果选中，则提交值将是“true,false”（假设您的复选框的值为“true”）。

根据您的服务器端代码，“真，假”值对可能会被解析为 True，或者在解析它时可能需要一些帮助。一些 MVC 框架会对真假对感到满意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T20:04:24.077

如果未设置，您可能可以`serializeArray`在 jQuery 中自定义允许包含复选框的功能。

[**演示**](http://jsfiddle.net/skram/cTKhH/18/)

**注意：**以下只是一个粗略的草稿，请随时优化。

```
$.fn.serializeArray = function () {
    var rselectTextarea= /^(?:select|textarea)/i;
    var rinput = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;
    var rCRLF = /\r?\n/g;

    return this.map(function () {
        return this.elements ? jQuery.makeArray(this.elements) : this;
    }).filter(function () {
        return this.name && !this.disabled && (this.checked || rselectTextarea.test(this.nodeName) || rinput.test(this.type) || this.type == "checkbox");
    }).map(function (i, elem) {
        var val = jQuery(this).val();
        if (this.type == 'checkbox' && this.checked === false) {
            val = 'off';
        }
        return val == null ? null : jQuery.isArray(val) ? jQuery.map(val, function (val, i) {
            return {
                name: elem.name,
                value: val.replace(rCRLF, "\r\n")
            };
        }) : {
            name: elem.name,
            value: val.replace(rCRLF, "\r\n")
        };
    }).get();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T19:20:46.933

### 描述

`jQuery.serialize()`几乎和浏览器一样，然后你提交一个表单。未选中的复选框不包含在表单提交中。

解决方法是使用`select`元素。

查看我的示例和这个[jsFiddle 演示](http://jsfiddle.net/cTKhH/1/)

### 样本

```
<form>
<select id="event_allDay" name="a">
   <option value="0" selected>No</option>
   <option value="1">Yes</option>
</select>
</form>
<button id="b">submit</button>​

$('#b').click(function() {
    alert($('form').serialize());
});​ 
```

**编辑**

我不知道您是否使用以及使用什么服务器技术。但是如果你使用一个，你也可以使用默认值来修复它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-17T22:41:55.850

另一种方法是使用 jQuery 插件。例如，[serializeJSON](https://github.com/marioizquierdo/jquery.serializeJSON)可以选择为未选中的复选框设置值，如下所示：

```
$('form').serializeJSON({checkboxUncheckedValue: "false"}); 
```

在任何情况下，通常最好对未检查的值使用隐藏输入。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-26T19:43:45.433

```
<input type='hidden' name='check' value='false'/>
<input type='checkbox' name='check' value='true'/> 
```

如果未选中复选框，将输出 check = false。

# java - 为 Mac OS X 安装 Java JDK 7 后 - mvn -version 仍然显示 java 版本 1.6.0_31

> ID：10339887
> 
> 赞同：118
> 
> 时间：2012-04-26T19:16:19.060
> 
> 标签：java, macos, maven, java-7

Oracle 于 4 月 26 日为 Mac OS X 发布了 Java JDK 7。我按照安装说明进行操作，当我在终端窗口中执行 java -version 时，我得到：

```
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

但是，当我`mvn -version`在终端窗口中执行时，我得到：

```
Apache Maven 3.0.2 (r1056850; 2011-01-08 18:58:10-0600)
Java version: 1.6.0_31, vendor: Apple Inc.
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x", version: "10.7.3", arch: "x86_64", family: "mac" 
```

如何让 Maven 使用 Java JDK 1.7.0_04？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-04-28T13:26:28.433

终于在这里找到了答案：

[http://www.adam-bien.com/roller/abien/entry/java_se_development_kit_7](http://www.adam-bien.com/roller/abien/entry/java_se_development_kit_7)

您应该`JAVA_HOME=$(/usr/libexec/java_home)`在 Mac 上使用，然后通过“Java Preferences.app”设置当前 jdk。

在 ~/.profile 中设置 JAVA_HOME

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-12-23T09:26:03.350

问题是JavaVm.framework版本中的符号链接“CurrentJDK”指向旧的jdk，所以当我使用以下命令将CurrentJDK设置为最新的（1.7.0_45）时它可以工作

```
cd /System/Library/Frameworks/JavaVM.framework/Versions
sudo rm CurrentJDK
sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents CurrentJDK 
```

参考：http: [//java.dzone.com/articles/installing-jdk-7-mac-os-x](http://java.dzone.com/articles/installing-jdk-7-mac-os-x)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-30T04:45:59.357

要从 Java Preferences 中查找路径，请尝试 `/usr/libexec/java_home -X`

我的 Java7 条目如下所示：

```
<dict>
    <key>JVMArch</key>
    <string>x86_64</string>
    <key>JVMBundleID</key>
    <string>com.oracle.java.7u04.jdk</string>
    <key>JVMEnabled</key>
    <true/>
    <key>JVMHomePath</key>
    <string>/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home</string>
    <key>JVMIsBuiltIn</key>
    <false/>
    <key>JVMName</key>
    <string>Java SE 7</string>
    <key>JVMPlatformVersion</key>
    <string>1.7</string>
    <key>JVMVendor</key>
    <string>Oracle Corporation</string>
    <key>JVMVersion</key>
    <string>1.7.0_04</string>
</dict> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-26T19:18:59.393

您需要将`JAVA_HOME`环境变量更改为新的 JDK 1.7 位置。

查看[此问题](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)以了解可能定义 JAVA_HOME 的位置。在终端中，键入`which java`以查找 Java 安装的路径，然后更新`JAVA_HOME`以指向该路径（但不包括尾随 bin 文件夹）。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-11-25T05:27:14.230

如果有人在运行 Mac OSX 'Mavericks' 的 64 位 Mac 上安装 Maven，可以为自己节省一些时间和一些尝试安装 Maven 的麻烦。我试图遵循这个（失败了，因为 java_home 的位置在 Mavericks 上发生了变化：

[http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)

我一直在努力，直到找到这个网站，它建议您安装自制软件并按照此页面上的说明进行操作：http: [//techspunky.blogspot.in/2013/10/how-to-install-maven-on-mac -osx-109.html](http://techspunky.blogspot.in/2013/10/how-to-install-maven-on-mac-osx-109.html)

一旦完成，当 $ maven -version 不起作用时不要惊慌，而是使用 $mvn --version 作为 maven.apache.org/download.cgi 推荐的。

它工作，但后来我注意到 Java SDK Maven 使用的是 Java 版本：1.6.0_65，这不是我在系统上安装的最新 SDK。

一旦我设置了 JAVA_HOME=`/usr/libexec/java_home`

它使用了正确的 SDK：Maven 主页：/usr/local/Cellar/maven/3.1.1/libexec Java 版本：1.7.0_45，供应商：Oracle Corporation Java 主页：/Library/Java/JavaVirtualMachines/jdk1.7.0_45。 jdk/Contents/Home/jre 默认语言环境：en_US，平台编码：UTF-8 操作系统名称：“mac os x”，版本：“10.9”，arch：“x86_64”，系列：“mac”

成功！但是等等……下次我打开终端并运行 mvn -v 时，它又回到了 java 版本 1.6。哇！

它是我阅读使用的某种假定错误：echo JAVA_HOME= `/usr/libexec/java_home -v 1.7`| sudo tee -a /etc/mavenrc

现在：

Maven 主页：/usr/local/Cellar/maven/3.1.1/libexec Java 版本：1.7.0_45，供应商：Oracle Corporation Java 主页：/Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/jre默认语言环境：en_US，平台编码：UTF-8 操作系统名称：“mac os x”，版本：“10.9”，arch：“x86_64”，系列：“mac”

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-08T21:58:09.687

Maven 仍在使用 Java 6 的原因是启动它的 /usr/bin/mvn 脚本没有使用正确的 OS/X 方法来解析 Java 首选项中指定的当前 Java 版本。有关详细信息，请参阅此 Maven 问题：

[http://jira.codehaus.org/browse/MNG-4226](http://jira.codehaus.org/browse/MNG-4226)

投票可能会解决问题；同时，如果您更改 /usr/bin/mvn 脚本，如该问题的评论和补丁中所示，您将获得所需的结果。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-28T17:26:46.117

好的，在我的机器上。是的，Oracle 安装程序并没有完全完成它的工作，在 1.6 仍在运行之后，它让我感到困惑。

```
java run time was updated 

java -version
java version "1.7.0_25"
Java(TM) SE Runtime Environment (build 1.7.0_25-b15)
Java HotSpot(TM) 64-Bit Server VM (build 23.25-b01, mixed mode) 
```

但SDK HOME实际上是一个sim链接仍然指向1.6

`/Library/Java/Home`在查找器 GetInfo 指向`/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home`

在终端

```
./Home -> /System/Library/Frameworks/JavaVM.framework/Home 
```

去搞清楚。

我在这里找到了 1.7，我正在使用它来构建：`/Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-30T04:31:23.780

我认为问题部分在于java启动机制。我已经能够让 Eclipse 在 Java7 下运行我的代码，但我认为 Eclipse 本身仍在 Java6 下运行。另外，我有一个一年前编译的 java 程序，使用 jarbundler-2.1.0.jar（选项 jvmversion="1.6+"）构建。当我双击 .app 文件时，它运行 Java6，但是当我双击 .app 内的 .jar 文件时，它运行 Java7。

另外，我不使用 JAVA_HOME，但我仍然得到问题中显示的正确 java 版本“1.7.0_04”。JAVA_HOME 似乎是一个红鲱鱼。也许 Maven 需要它，但 Eclipse 似乎没有使用它，启动 jar 文件也没有。

并且在Java Preferences工具中设置Java7后，似乎不影响启动.app java文件。但是，它确实使终端中的“java -version”工作得很好。我尝试取消选中除 Java7 选项之外的所有选项，然后 Eclipse 根本无法运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-02T12:23:47.550

如果您的 JAVA_HOME 位于本地用户的 bash 中，无论您设置了什么 JAVA_HOME，mvn 都会选择系统当前的 java 版本。

因此，首先运行命令“ **which mvn** ”并检查您正在使用哪个可执行 mvn。之后**编辑该 mvn 文件**并将**JAVA_HOME**变量更改为您喜欢的 java home。

# smtp - 如何通过 microsoft exchange cloud 使用 java 发送 smtp 邮件

> ID：10339888
> 
> 赞同：1
> 
> 时间：2012-04-26T19:16:21.707
> 
> 标签：smtp, jakarta-mail, exchange-server

我需要通过交换帐户从网络服务器发送带有 java 邮件的邮件。交易所账号注册在我司拥有的域名中，该域名以交易所账号作为MX入口。我对如何完成这一点进行了一些研究，因为我无法找到有关可能正在使用的某种 smtp Outlook 的任何简单信息。我不知道我需要连接哪个服务器以及如何对其进行身份验证。我对任何微软技术都没有任何经验。我找到了一些 .NET 框架指南，例如[介绍 Exchange Web Services Managed API 1.0](http://msdn.microsoft.com/en-us/library/dd637749%28v=EXCHG.80%29.aspx)

但这似乎没有多大帮助！？我还发现了一些 Java 框架，例如[exJello](http://www.exjello.org/)，它看起来不错，但我没有设法正确配置它，因为我不知道任何属性值。

我不希望你购买任何大框架，我不需要管理任何与交换相关的功能，这个连接的唯一要求就是发送邮件。

我的问题是，我怎样才能连接到我的交换帐户并用它发送邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:39:31.687

简单的回答是，您需要询问您公司的网络管理员如何配置邮件客户端以使用您公司的邮件服务器。他们应该能够告诉您要使用的主机名等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:56:24.260

经过一段时间的研究和大量误导性信息，我在我的交换管理网络界面的某个选项中找到了有关我需要的属性的信息。所以连接到 smtp 和普通的 stmp 服务没什么不同

# php - 如何“转发”请求并 获得提交的 Cookies/表单数据？

> ID：10339890
> 
> 赞同：0
> 
> 时间：2012-04-26T19:16:26.010
> 
> 标签：php, perl, curl, proxy

我想按原样转发请求，但来自我的服务器（代理）除外。例如，如果用户向[http://google.com/](http://google.com/)提交请求，我的服务器会将该请求发送到 google.com，并将响应返回给用户。如果支持 SSL/HTTPS，那就太好了，但我可以没有它。代理还需要保存提交的 cookie 和表单数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:07:46.850

我在[Plack::App::Proxy方面取得了一些成功](https://metacpan.org/module/Plack%3a%3aApp%3a%3aProxy)

你可以尝试这样的事情让你开始：

```
#!/usr/bin/env perl

use strict;
use warnings;
use Plack::App::Proxy;
use Plack::Builder;

my $app = builder {

    mount '/' => builder {
        Plack::App::Proxy->new( remote => 'http://google.com:80/' )->to_app;
    };  

};

$app; 
```

将其保存为 app.psgi 并使用以下命令运行它：

```
plackup app.psgi 
```

您的代理现在将在端口 5000 上运行

# c# - 这个功能的反面

> ID：10339891
> 
> 赞同：-1
> 
> 时间：2012-04-26T19:16:26.980
> 
> 标签：c#, linq

我有这个代码：

```
private static readonly Dictionary<string, ChatUser> _users = new Dictionary<string, ChatUser>(StringComparer.OrdinalIgnoreCase);
private static readonly Dictionary<string, ChatRoom> _rooms = new Dictionary<string, ChatRoom>(StringComparer.OrdinalIgnoreCase);

public IEnumerable<ChatUser> GetUsersInRoom(string room)
{
    if (String.IsNullOrEmpty(room))
    {
        return Enumerable.Empty<ChatUser>();
    }

    var results = from name in _rooms[room].Users
                           select _users[name];

    return results;
} 
```

我如何找到*不在*提供房间的人？：-/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T19:20:24.643

```
var usersNotInRoom = _users.Values.Except(GetUsersInRoom("ROOM")); 
```

# javascript - 单击时切换 CSS 样式

> ID：10339892
> 
> 赞同：0
> 
> 时间：2012-04-26T19:16:27.403
> 
> 标签：javascript, jquery, html, css-transitions

现在为此挠头一段时间，我很快就会脱发。

我在这里有一个网站：http: [//ve.jago-staging.com/](http://ve.jago-staging.com/)我试图弄清楚如何更改下面的代码，以便当我单击精选帖子时，转换以相同的方式发生，而不仅仅是一轮点击链接。

我看过一些例子，我点击元素本身并改变样式但不受外部控制。

圆形点击仍然需要工作

谢谢您的帮助

```
(function($) {
        $(document).ready( function() {
            $('.feature-slider a').click(function(e) {
                $('.featured-posts section.featured-post').css({
                    opacity: 0,
                    visibility: 'hidden'
                });
                $(this.hash).css({
                    opacity: 1,
                    visibility: 'visible'
                });
                $('.feature-slider a').removeClass('active');
                $(this).addClass('active');
                e.preventDefault();
            });
        });
    })(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:22:51.207

做这个：

```
$(document).ready( function() {
        $('.feature-slider a').click(function(e) {
            $('.featured-posts section.featured-post').toggleClass('your-extra-css');
        });
    }); 
```

并在您的 css 中添加 css 内容：

```
.your-extra-css {
visibility:visible;
} 
```

# algorithm - 两条平行线之间的最大点数

> ID：10339896
> 
> 赞同：-4
> 
> 时间：2012-04-26T19:16:48.873
> 
> 标签：algorithm, parallel-processing, lines, points

给我 N+2 个整数坐标点。其中2个是基点。需要通过给定的基点绘制两条平行线。位于两条平行线之间的最大点数是多少？对不起我的英语，提前谢谢！

在下图中，红色的点是基点，黑色的点是正常点。黄色区域是最大数量的黑点。如果其中一个黑点位于其中一条线上，则认为该点位于线之间。

[http://i.stack.imgur.com/Awhg6.png](http://i.stack.imgur.com/Awhg6.png)

我找到了时间复杂度 O(N*N) 的解决方案，但这太慢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:42:51.107

想象你的两条线穿过两个基点。线之间的条带宽度为 0，内部没有点（或有一些点，取决于您对“内部”的定义）。

现在想象两条线逆时针缓慢旋转，同时保持平行。转了半圈后，他们的位置和之前一样。当线条旋转时，它们会穿过您的点，从而进入和离开线条之间的条带。

假设线条每单位时间进行固定的旋转次数，计算每个点它进入线条之间的条带的时间，以及它离开条带的时间。（这些时间基本上是角度）。将这两种事件排序在一起。现在检查事件，每个进入事件计数 +1，每个退出事件计数 -1。对于同时发生的事件，首先执行 -1 或首先执行 +1，这再次取决于您对“内部”的定义。跟踪最大计数。

# django - Django EmailMessage 未发送/超时

> ID：10339897
> 
> 赞同：4
> 
> 时间：2012-04-26T19:16:55.203
> 
> 标签：django, email

我试图使用 django.core.mail 使用默认后端发送电子邮件，但它似乎不起作用。我已经在设置文件中设置了电子邮件凭据、服务器和端口号，但是每当我尝试运行电子邮件的 send() 方法时，该命令都会无限期挂起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T10:43:42.753

**视图.py**

```
from django.core.mail import send_mail

def sending_email(request):
    message = ""
    subject = ""
    send_mail(subject, message, from_email, ['to_email',]) 
```

**在 settings.py 中添加**

```
# Sending mail
EMAIL_USE_TLS = True
EMAIL_HOST='smtp.gmail.com'
EMAIL_PORT=587
EMAIL_HOST_USER='your gmail account'
EMAIL_HOST_PASSWORD='your gmail password' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T05:47:04.483

尝试使用 use_tls=True 通过 smtp.gmail.com 发送时遇到了同样的问题。原来我设置了错误的端口。这是我现在正在做的事情，它有效：

```
from django.core.mail import get_connection
from django.core.mail.message import EmailMessage

connection = get_connection(use_tls=True, host='smtp.gmail.com', port=587,username='YourEmail@gmail.com', password='YourPassword')
EmailMessage('test', 'test', 'addr@from.com', ['addr@to.com'], connection=connection).send() 
```

# java - 使用对象数组在 Scala 中调用 java.lang.reflect.Method

> ID：10339900
> 
> 赞同：1
> 
> 时间：2012-04-26T19:17:09.177
> 
> 标签：java, scala, reflection

我试图通过在数组中传递方法的调用参数来通过反射调用方法。Params 是一个 List [Any] 并带有要传递给反射方法的值。

```
// make absolutely sure it's of the correct type
val args : Array [Object] = params.map (_.asInstanceOf [java.lang.Object]).toArray
System.err.println ("target method: " + method.getName + " :: " + method.getParameterTypes.toList)
System.err.println ("parameters   : " + args.getClass.getCanonicalName + "\n    " + 
    (args map (p => (p.getClass.getCanonicalName, p))).toList)
method.invoke (host, args) 
```

我得到以下输出，看起来都不错。被调用方法的签名与参数列表完美匹配。

```
target method: echo :: List(class java.lang.String)
parameters   : java.lang.Object[]
    List((java.lang.String,looks good)) 
```

可悲的是，调用抛出 java.lang.IllegalArgumentException: argument type mismatch

根据 Java 文档，可变参数参数（作为 Method.invoke 的参数）可以与 Object[] 一起提供。我难住了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T19:21:02.200

Vararg 方法可以从 scala 中调用，其`:_*`语法告诉 Scala 将序列解压缩为单独的参数：

```
method.invoke(host, args: _*) 
```

这是一个完整的例子：

```
class A {
  def meth(a: String, b: String) = a + b
}
val host = (new A)
val method = host.getClass.getDeclaredMethods.head
val params: List[Object] = List("a", "b")
val result = method.invoke(host, params: _*)
println(result) // ab 
```

# c++ - 显式覆盖

> ID：10339905
> 
> 赞同：2
> 
> 时间：2012-04-26T19:17:23.753
> 
> 标签：c++, explicit-interface

用于 C++ 的 msft 编译器支持显式覆盖（请参阅[http://msdn.microsoft.com/en-us/library/ksek8777.aspx](http://msdn.microsoft.com/en-us/library/ksek8777.aspx)）

```
// could be declared __interface I1, making the public scope and pure virtual implied
// I use the more expressive form here for clarity
class I1
{
public:
  virtual void foo() = 0;
};

class I2
{
public:
  virtual void foo() = 0;
};

class C : public I1, public I2
{
public:
  virtual void I1::foo() { cout << "I1::foo\n"; }
  virtual void I2::foo() { cout << "I2::foo\n"; }
};

int main()
{
  C c;
  static_cast<I1*>(&c)->foo();
  static_cast<I2*>(&c)->foo();

  cin.get();
} 
```

但是 gcc 不喜欢这样。一个简单的“显式覆盖”在线搜索会产生有关新关键字的信息`override`。这不一定与我正在寻找的东西有关。c++11（按规范）是否以其他方式支持此功能，或者至少在 gcc 中以某种方式支持此功能？

注意：可接受的答案可能是一个 hack - 只要它与问题的精神相同，而不是解决不同问题的新设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:26:32.483

我相信唯一的方法是通过实现功能的中间类：

```
class Impl1 : public I1 {
public:
    void foo() { cout << "I1::foo\n"; }
};

class Impl2 : public I2 {
public:
    void foo() { cout << "I2::foo\n"; }
};

class C : public Impl1, public Impl2
{
}; 
```

诚然，一旦这些函数需要访问其成员，这会变得相当复杂`C` ——它们不能，成员需要以复杂的方式传递。

顺便说一句，不需要指针；您可以使用参考：

```
int main()
{
    C c;
    static_cast<I1&>(c).foo();
    static_cast<I2&>(c).foo();
} 
```

（或使用完全避免虚拟调度的显式限定：）

```
c.Impl1::foo();
c.Impl2::foo(); 
```

# java - XmlDiscriminatorNode、XmlSchema 命名空间和 elementFormDefault=QUALIFIED

> ID：10339908
> 
> 赞同：3
> 
> 时间：2012-04-26T19:17:29.653
> 
> 标签：java, eclipselink, moxy

我正在使用eclipselink-2.3.2。我的包裹有注释：

`@XmlSchema(namespace = "http://example.com/namespace", elementFormDefault = XmlNsForm.QUALIFIED)`

我有以下课程：

```
@XmlRootElement
public class Box {
    private A item; // and getter/setter
}

@XmlDiscriminatorNode("@thetype")
public abstract class A {}

@XmlDiscriminatorValue("b")
public class B extends A {}

@XmlDiscriminatorValue("c")
public class C extends A {} 
```

当我尝试像这样反序列化有效的 XML 时：

`<box xmlns="http://example.com/namespace"><a thetype="b" /></box>`

我得到描述性异常：

```
org.eclipse.persistence.exceptions.DescriptorException
Exception Description: Missing class indicator field from database row [UnmarshalRecord()] 
```

如果我`@XmlSchema`从包中删除 并`xmlns`从根元素中删除属性，它就可以工作。如果我从 QUALIFIED 更改为 UNQUALIFIED，只要我给它提供丑陋的前缀 XML，它就可以工作。

我假设 unprefixed 会起作用，因为它仍然声明默认命名空间，但是尽管没有例外，但该字段仍然为空。

单步执行 EclipseLink 代码后，我可以看到`QNameInheritancePolicy.classFromRow`调用时`UnmarshalRecord.get`，它正在尝试访问 namespaceURI“http://example.com/namespace”下的属性“thetype”。

当我将 XmlScehma elementFormDefault 更改为 UNQUALIFIED 时，namespaceURI 返回 null 并且属性被正确检索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:40:12.310

这是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)中的一个错误。您可以使用下面的链接跟踪我们在此问题上的进展。我已经有一个附加到错误的修复程序，一旦测试用例完成运行，我将检查它。

*   [http://bugs.eclipse.org/377967](http://bugs.eclipse.org/377967)

**更新**

此错误现已修复。从 2012 年 4 月 30 日开始，您可以通过获取其中一个 EclipseLink 2.4.0 夜间构建来试用它：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:30:45.447

你的鉴别器是一个属性，所以我认为你只需要添加一个“@”：

```
@XmlDiscriminatorNode("@thetype")
public abstract class A {} 
```

[Blaise Doughan 的](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html)这篇博文包含更多信息和示例。

# java - JSF EL 条件

> ID：10339910
> 
> 赞同：1
> 
> 时间：2012-04-26T19:17:37.967
> 
> 标签：java, jsf, el

这是我的片段：

```
<ui:fragment rendered="#{}">
    <ui:include src="../includes/top.xhtml"/>
</ui:fragment> 
```

我的**LoginController**将重定向到扩展**MainController**具有布尔方法的页面**home.html**所以当我尝试调用它时，我得到一个因为，正如我注意到的，Java 首先加载 html 以查看它是否正在调用任何 Java 类所以当我尝试访问（从 HomeController 扩展，尚未调用）我得到这个空指针**`showComponent``mainController.showComponent()``nullPointerException``mainController`**

 **. 如果设置了 maisController，如何检查片段内部？

这是我到目前为止尝试过的

`<ui:fragment rendered="#{not empty mainController ? true : false}">`

它总是返回`true`。

这是我的 MainController 类：

```
package com.erp3.gui.controllers;

import java.io.IOException;
import javax.faces.bean.ManagedBean;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;

@ManagedBean
public class MainController {

    public LoginController loginController;
    public ExternalContext ec;

    public void checkUserSession() throws IOException {
        ec = FacesContext.getCurrentInstance().getExternalContext();
        loginController = (LoginController) ec.getSessionMap().get("loginController");
        loginController = (LoginController) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("loginController");
        if (loginController == null || !loginController.getIsLoggedIn()) {
            ec.redirect(ec.getRequestContextPath() + "/views/login.html");
        }
    }

    public Boolean showComponent() {
        return this.loginController.getIsLoggedIn();
    }
} 
```

我的方法`showComponent()`是从返回会话对象属性`loginController`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:42:40.277

它抛出`NullPointerException`是因为`loginController`显然是`null`。如果它是另一个`@ManagedBean`，那么您需要将其作为托管属性注入。这样您就不需要从会话映射中手动抓取它。此外，您应该给您`MainController`一个有效的 bean 范围。如果没有范围，将在**每个**EL 表达式上创建一个新的`#{mainController}`。

```
@ManagedBean
@RequestScoped
public class MainController {

    @ManagedProperty("#{loginController}") // +getter+setter
    public LoginController loginController;

    @PostConstruct // Will be invoked directly after construction and managed property injection.
    public void checkUserSession() throws IOException {
        ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
        if (!loginController.getIsLoggedIn()) {
            ec.redirect(ec.getRequestContextPath() + "/views/login.html");
        }
    }

    public boolean isShowComponent() {
        return loginController.getIsLoggedIn();
    }

} 
```

然后你可以使用它：

```
<ui:fragment rendered="#{mainController.showComponent}"> 
```

但是你为什么不`#{loginController}`直接访问呢？

```
<ui:fragment rendered="#{loginController.isLoggedIn}"> 
```

至于你的问题，为什么`#{not empty mainController ? true : false}`总是评估是`true`因为 JSF**从来没有**。如果 EL 范围内不存在一个，JSF 将自动创建一个。`@ManagedBean` **`null`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:42:33.150

当您调用时，它似乎`loginController`为空`showComponent`。创建方法`getLoginController`：

```
public getLoginController() {
    (LoginController) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("loginController");
}

public Boolean showComponent() {
    return getLoginController() != null && getLoginController().getIsLoggedIn();
} 
```****

# macos - 如何卸载 python3 DMG 安装程序安装的文件？

> ID：10339911
> 
> 赞同：0
> 
> 时间：2012-04-26T19:17:38.420
> 
> 标签：macos, uninstallation, python-install

我想删除已安装的内容。但我不确定那里有什么或没有什么。我应该删除什么？我相信它在某个地方

```
/Library/Frameworks/... 
```

但真的不知道我应该卸载什么。我假设我也可以删除添加到我的应用程序文件夹中的 python 3.2 文件夹。先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:44:24.117

如果您使用 Installer.app 打开软件包，就好像您要重新安装它一样，菜单中有一个选项可以显示文件列表。或者，您可以使用共享软件[Pacifist](http://www.charlessoft.com/)应用程序来调查安装程序的内容。

请注意，文件列表并不是全部。该软件包可以包含可以运行的脚本，这些脚本可能会创建或更改文件。

# flash - 使用 Flash 检测网页焦点的变化

> ID：10339913
> 
> 赞同：0
> 
> 时间：2012-04-26T19:17:39.530
> 
> 标签：flash, web-applications

我想设计一个网站来进行测验。我需要的主要功能是限制用户更改选项卡或打开新浏览器或任何窗口，以便用户至少不能通过使用互联网或一些电子书作弊。我玩 Hozzat cricket 游戏当我在游戏中间更改选项卡或打开新窗口时，可以轻松检测焦点变化的 fb。我想知道这是如何完成的，以及如何在我的基于 Web 的测验应用程序中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:20:09.320

你想要这个：[http ://www.wuup.co.uk/as3-basics-detect-flash-window-focus-with-actionscript-30](http://www.wuup.co.uk/as3-basics-detect-flash-window-focus-with-actionscript-30)

windowNotActive 事件监听器

# twitter - Twitter Streaming API - 按 url 过滤

> ID：10339917
> 
> 赞同：1
> 
> 时间：2012-04-26T19:17:48.407
> 
> 标签：twitter, twitter-streaming-api

我正在尝试使用 track 参数中的 url 过滤来自 Streaming API 的推文。但是，我没有收到我期望的推文。我怀疑过滤器不适用于扩展的 url，而是适用于自动缩短的 url (t.co)。

任何人都可以确认是这种情况吗？[Streaming Api 文档](https://dev.twitter.com/docs/streaming-api/methods)甚至没有提到如何应用过滤。

如果是这种情况，有人有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:45:40.527

我正在使用带有 cURL 的扩展 URL。我在终端上获得特定搜索参数的实时推文。你可能想看看这个。

```
curl https://stream.twitter.com/1/statuses/filter.json?track=SEARCH_PARAMETER -uUSERNAME:PASSWORD 
```

# embed - 在 OSGi 包中嵌入 jar 时，忽略或可选结果？

> ID：10339920
> 
> 赞同：5
> 
> 时间：2012-04-26T19:18:09.730
> 
> 标签：embed, osgi, bundle

当我构建一个包时，我需要在我的案例中嵌入一些 jars（http-core 和 http-client）。使用带有 flex 插件的 maven，我得到了巨大的导入列表——一些我不需要的东西。截至目前，我只是否定了我不需要的包`<Import-Package>`，但我也可以使用`Import-Package: resolution:=optional`. 我想知道首选方法是什么，两种方法的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:01:28.703

不幸的是，人们包含了许多导致这些导入的“很高兴拥有部件”（通常称为 utils）。很多时候，罪魁祸首与您要使用的核心代码是分开的。如果您使用 bndtools，那么您可以轻松检查依赖项的运行方式。

在 bndtools 和 maven 中，您使用 bnd，并且 bnd 使得仅将 JAR 的一部分复制到您的包中变得非常容易。这样你就可以最小化依赖。只需使用 Private-Package 复制您真正需要的包，然后查看导入。如果您导入您认为需要的内容，请将其添加到 Private-Package（在 bndtools 中，您可以通过拖放来完成此操作）。

最后，您可能可以摆脱许多不必要的导入。但是，通常会留下一些。在这种情况下，在 Import-Package 语句中使用 resolution:=optional 装饰它们：

```
Import-Package: com.oracle.whatever; resolution:=optional, * 
```

不要忘记最后的*。

# objective-c - copyItemAtPath、moveItemAtPath 和 createFileAtPath 似乎都创建了一个不可读的文件

> ID：10339923
> 
> 赞同：0
> 
> 时间：2012-04-26T19:18:28.970
> 
> 标签：objective-c, ios, nsdata, nsurl, nsfilemanager

所以我想弄清楚为什么我不能制作可读的文件副本。我尝试过 moveItemAtPath、copyItemAtPath 和 createFileAtPath。每次，从原始路径读取数据都可以正常工作，但从新文件路径读取数据会导致 0 字节 nil NSdata 对象。

```
NSData* tempData = [NSData dataWithContentsOfURL:tempSoundFile]; // reads just fine

NSError* error;
NSFileManager* fileMgr = [NSFileManager defaultManager];
NSString* docDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString* uniqueFileName = [[NSString stringWithFormat:@"%@-%@", description.text, [NSDate date]] MD5];
NSString* newAudioFile = [NSString stringWithFormat:@"%@/%@.caf", docDir, uniqueFileName];

if (LOG) { NSLog(@"Copying %@ to %@", tempSoundFile.path, newAudioFile); }

// Have tried either or both as well as moveItemAtPath with the same result
[fileMgr createFileAtPath:newAudioFile contents:tempData attributes:nil];
//[fileMgr copyItemAtPath:tempSoundFile.path toPath:newAudioFile error:&error];

NSData* audioAfter = [NSData dataWithContentsOfURL:[NSURL URLWithString:newAudioFile]]; // nil data 
```

日志输出：

将 /var/mobile/Applications/19531C7F-F408-45B9-B417-09315BB15B49/Documents/8554temp.caf 复制到 /var/mobile/Applications/19531C7F-F408-45B9-B417-09315BB15B49/Documents/933becb02783c8f9c715accad。

有人对我做错了什么有任何建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:59:10.613

将最后一行更改为：

```
SData* audioAfter = [NSData dataWithContentsOfFile:newAudioFile]; // NOT nil 
```

因为路径 url 以`NSURL`期望 file:// 开头。

# java - Java中的最终数组

> ID：10339930
> 
> 赞同：60
> 
> 时间：2012-04-26T19:18:48.900
> 
> 标签：java

Java中的以下代码使用了一个`final`数组，`String`这是毫无疑问的。

```
final public class Main {
  public static final String[] CONSTANT_ARRAY = {"I", "can", "never", "change"};

  public static void main(String[] args) {
    for (int x = 0; x < CONSTANT_ARRAY.length; x++) {
      System.out.print(CONSTANT_ARRAY[x] + " ");
    }
  }
} 
```

它在控制台上显示以下输出。

```
I can never change 
```

* * *

以下代码也毫无疑问。

```
final public class Main {
  public static final String[] CONSTANT_ARRAY = {"I", "can", "never", "change"};

  public static void main(String[] args) {
    //CONSTANT_ARRAY={"I", "can", "never", "change"}; //Error - can not assign to final variable CONSTANT_ARRAY.
    for (int x = 0; x < CONSTANT_ARRAY.length; x++) {
      System.out.print(CONSTANT_ARRAY[x] + " ");
    }
  }
} 
```

显然，注释行会导致指定的错误，因为我们试图重新分配声明`final`的 type 数组`String`。

* * *

下面的代码呢。

```
final public class Main {
  public static final String[] CONSTANT_ARRAY = {"I", "can", "never", "change"};

  public static void main(String[] args) {
    CONSTANT_ARRAY[2] = "always";  //Compiles fine.
    for (int x = 0; x < CONSTANT_ARRAY.length; x++) {
      System.out.print(CONSTANT_ARRAY[x] + " ");
    }
  }
} 
```

它显示`I can always change`意味着我们可以设法修改`final`type 数组的值`String`。我们可以在不违反 规则的情况下以这种方式修改整个数组`final`吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-04-26T19:23:56.387

`final`在 Java 中影响*变量*，它与您分配给它的对象无关。

```
final String[] myArray = { "hi", "there" };
myArray = anotherArray; // Error, you can't do that. myArray is final
myArray[0] = "over";  // perfectly fine, final has nothing to do with it 
```

**编辑以添加评论：**请注意，我说*的是您分配给它的对象*。在 Java 中，数组是一个对象。这同样适用于任何其他对象：

```
final List<String> myList = new ArrayList<String>():
myList = anotherList; // error, you can't do that
myList.add("Hi there!"); // perfectly fine. 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-26T19:34:12.707

您误解了最终的实现。`final`适用于数组对象引用，这意味着一旦启动，引用永远不会改变，但可以填充其自身的数组。“它没有违反规则”您只指定了一条关于参考更改的规则，该规则正在相应地起作用。如果您希望这些值也永远不会改变，您应该选择不可变列表，即

```
List<String> items = Collections.unmodifiableList(Arrays.asList("I", "can", "never", "change")); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-26T19:22:32.753

您只能这样做，因此无法更改数组引用。如果您希望元素无法更改，则需要使用某种不可修改的集合。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T19:24:46.353

将数组声明为 final 时，可以更改数组中的元素，但不能更改该数组的引用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-26T19:26:11.690

final 只保证原语的不变性。并且还保证一个变量只分配一次。如果一个对象是可变的，您可以更改它定义为 final 的事件的内容。您可以根据需要检查不可变集合。如 Collections.unmodifiableList() [http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableList(java.util.List](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableList(java.util.List) )

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-13T22:59:12.140

对数组对象的引用是最终的（不能更改，例如，如果您试图将不同的 Java 数组对象（String[] 的实例）关联到同一个最终变量……您会得到一个编译时错误）。

但是您示例中最终数组对象的字段不是最终的，因此您可以修改它们的值。...而您创建的 Java 对象 CONSTANT_ARRAY 在收到初始值后将具有该值“永远”== 直到 JVM 停止。:) 它将是“永远”相同的字符串数组实例。

Java 中的 final 变量没什么大不了的，只需花一些时间仔细消化主题/想法。:-)
我建议所有不确定在此页面上冥想的人，例如： [https ://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12 .4](https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)

**让我引用相应的部分：**

"*一旦一个 final 变量被赋值，它总是包含相同的值。如果一个 final 变量持有对一个对象的引用，那么对象的状态可能会通过对对象的操作而改变，但变量总是引用同一个对象。*

*这也适用于数组，因为数组是对象；如果最终变量持有对数组的引用，则数组的组成部分可能会通过对数组的操作而改变，但变量将始终引用同一个数组。*"

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-26T19:25:11.253

变量 CONSTANT_ARRAY 的值不能改变。该变量包含一个（对一个）数组的引用。但是，数组的*内容**可以*更改。当您声明任何非简单标量类型的最终变量（例如对象）时，也会发生同样的事情。

请注意如何命名变量。:-) 称它为 CONSTANT_ARRAY 并不会使数组的内容不可更改。

这是一个很好的参考：[final 上的最后一句话](http://www.360doc.com/content/06/1007/20/8473_224657.shtml)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-23T10:29:20.447

当一个变量用 final 关键字声明时，它的值不能被修改，本质上是一个常量。这也意味着您必须初始化最终变量。如果最终变量**是一个引用**，这意味着该变量不能**重新绑定到引用另一个对象**，但该引用变量指向的对象的**内部状态**可以更改，即您可以在最终数组中添加或删除元素或最后的集合。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-09-18T04:44:06.537

```
 final int[] res;
    int[] res1;
    int[] res2 = new int[1];
    res2[0]=20;

    res1=res2;
    res1=res2;//no error
    System.out.println("res1:"+res1[0]);

    res = res2;//only once
   //res = res2;//error already initialised
    res2[0]=30;

    System.out.println("res:"+res[0]); 
```

*输出:: res1:20 res:30*

# jquery - 在同一页面上运行两个 jquery 幻灯片的问题

> ID：10339934
> 
> 赞同：2
> 
> 时间：2012-04-26T19:18:56.990
> 
> 标签：jquery

我是 PHP 程序员，主要在我的网站上使用 jquery 插件。困扰我的问题是在单页网站上放置两个幻灯片。一次只运行一个幻灯片。

这是我正在使用的代码..第一个滑块的链接...

```
<script>window.jQuery || document.write('<script src="js/jquery-1.6.1.min.js"><\/script>')
</script>

<script src="js/jquery.smoothscroll.js"></script>
<script src="js/jquery.nivo.slider.pack.js"></script>
<script src="js/jquery.easing-1.3.pack.js"></script>
<script src="js/jquery.fancybox-1.3.4.pack.js"></script>
<script src="js/init.js"></script> 
```

第二个的链接。。

```
 <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
    <!-- the jScrollPane script -->
    <script type="text/javascript" src="js/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="js/jquery.contentcarousel.js"></script>
    <script type="text/javascript">
        $('#ca-container').contentcarousel();
    </script> 
```

希望我能提前得到一些具体的答案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:12:30.360

不确定这是否是问题，但你有

```
<script type="text/javascript">
    $('#ca-container').contentcarousel();
</script> 
```

应该是：

```
<script type="text/javascript">
    $(function() { $('#ca-container').contentcarousel(); });
</script> 
```

所以它从页面加载开始，而不是取决于它在脚本中的位置。在此处查看更多信息：http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

# email - Magento 事务性电子邮件配置：最佳实践

> ID：10339938
> 
> 赞同：2
> 
> 时间：2012-04-26T19:19:01.403
> 
> 标签：email, magento, transactional

每次我设置 Magento 商店时，我都必须花一整天时间设置愚蠢的交易电子邮件，因为默认情况下它们非常弱。

一半的时间花在将模板加载到后端并在 Magento 的用户界面上单击...

1.  是否有一种直接的方法可以在一个 sql 语句或类似语句中加载所有电子邮件？
2.  你们有没有找到一种方法来快速编辑 Magento 之外的所有模板？
3.  对[电子邮件模板适配器](http://www.magentocommerce.com/magento-connect/email-template-adapter.html)扩展（或类似）有何评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:48:55.023

请阅读[Magento 设置资源](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources)

然后，您可以使用专用模块中的更新脚本更新您的电子邮件内容/配置，例如：

`app/code/local/{project_prefix}/ConfigurationEmail`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:44:00.980

1.  Magento 允许您运行更新脚本，因此您可以导出初始设置工作并创建一个 EmailSetup 模块。请注意，您还需要设置适当的配置数据以将事务与数据库电子邮件相关联。
2.  我们制作了一些 shell 脚本来进行定期更改，其中许多都被 Magento 所做的更改所消除。
3.  不是很熟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T22:01:33.323

您应该尝试来自 Comfirm的[Transactional Email 扩展程序。](http://www.magentocommerce.com/magento-connect/comfirm-alphamail-9080.html)

它使在 Magento 中处理事务性电子邮件变得更加容易。

# c# - 将 Web 服务作为服务参考添加到项目库时出错

> ID：10339939
> 
> 赞同：0
> 
> 时间：2012-04-26T19:19:05.263
> 
> 标签：c#, web-services

我正在将 Web 服务作为服务参考添加到 Web 项目中。添加时发生的添加错误是

> HTML 文档不包含 Web 服务发现信息。元数据包含无法解析的引用。

在将 Web 服务添加为服务引用之前，我尝试将其添加为 Web 引用。这样做没有错误，但是我无法通过 Web 引用访问类。所以我选择了服务参考。我能够将服务引用添加到 Web 项目并且一切正常，但我无法在类库中执行相同的操作。

您的帮助将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:22:24.500

在解决方案资源管理器中右键单击您的服务，然后选择在浏览器中查看。您的服务中可能存在一些错误，通过这种方式您可以找出错误。

# hibernate - JPA2 + Hibernate + Guice-persist：版本行为

> ID：10339940
> 
> 赞同：2
> 
> 时间：2012-04-26T19:19:08.683
> 
> 标签：hibernate, jpa-2.0, guice-persist

我使用 Hibernate 3.6 Final、Guice-persist 和 JPA2。

太好了，我已经配置好了所有东西，并且我的 bean 有一个`@Version private Long version;`, 带有 getter 和 setter。

我已经用所有字段实现了equals和hashcode。

我的 dao 保存方法是：

```
@Transactional
public void save(Product p){ em.persist(p); } 
```

但是，如果我这样做：

```
Product p = new Product("name"); //id=null, version=null
dao.save(p); //works, id!=null, version=0
Product p2 = new Produto(10, 0, "other name"); //id, version, name
dao.save(p2); //works, but the version isnt updated, so my version still 0 
```

然后，如果我更改名称并再次尝试保存，我会收到“StaleObjectstateException 行已更新或删除...”...

我想知道我必须做什么才能让实体管理器在保存对象时更新版本......以及为什么坚持不这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:52:22.883

（忽略代码中的新产品而不是新产品）对于 p2，您在对象实例化时设置 id 和版本，然后将其持久化。持久化后，对象 p2 的状态与上次已知的持久化状态相比没有变化 -> 无需更新版本。

（执行 p2.setName("yet another name") 之类的操作，然后执行 p2.getVersion() ... 查看效果。

p otho 没有任何版本，既不是由“你”直接通过代码或通过 PresistenceContext 设置的。一旦你持久化了 p，它就会在持久化上下文中得到管理，因此得到一个版本号——在这种情况下，它得到了版本 0（新创建的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:05:28.900

我这样解决这个问题：

```
@Transactional
public void persist(B bean) {
    em.persist(bean);
}

@Transactional
public B update(B bean) {
    bean = em.merge(bean);
    em.flush();
    return bean;
} 
```

然后我只调用 save 方法，这个方法知道它必须做什么：

```
@Transactional
public B save(B bean) {
    if (bean == null || bean.getId() == null) {
        persist(bean);
    } else {
        bean = update(bean);
    }
    return bean;
} 
```

# cakephp - CakePHP：使用 FileUpload 插件保存带有新记录的文件

> ID：10339942
> 
> 赞同：1
> 
> 时间：2012-04-26T19:19:17.783
> 
> 标签：cakephp, file-upload, cakephp-1.3

我正在尝试`FileUpload`在我的 CakePHP (1.3) 应用程序中使用插件 (https://github.com/webtechnick/CakePHP-FileUpload-Plugin)。

我有两个模型：`PendingContract`和`PendingContractFile`. A`PendingContract`可以有许多`PendingContractFile`记录。保存新的`PendingContract`时，我也想保存上传的`PendingContractFile`；但是，我的保存方法失败了，因为`PendingContract`还没有一个 ID，它被用作我的`PendingContractFile`.

为清楚起见，这是我的模型：

```
<?php
class PendingContract extends AppModel {

    var $name = 'PendingContract';
    var $belongsTo = array(
        'Supplier'
    );
    var $hasMany = array(
        'PendingContractFile'
    );
}

class PendingContractFile extends AppModel {

    var $name = 'PendingContractFile';
    var $belongsTo = array(
        'PendingContract' => array(
            'className' => 'PendingContract',
            'foreignKey' => 'pending_contract_id'
        ),
        'Author' => array(
            'className' => 'User',
            'foreignKey' => 'author_id'
        )
    );
} 
```

这是我保存的控制器方法`PendingContract`：

```
<?php
class PendingContractsController extends AppController {

    function add() {
        if (!empty($this->data)) {
            if ($this->FileUpload->success) {
                $this->Session->setFlash('Pending contract successfully created.');
                $this->redirect(array('action' => 'index'));
            }
            else {
                $this->Session->setFlash($this->FileUpload->showErrors());
            }
        }
    }
} 
```

目前我得到的错误是：

> 1452：无法添加或更新子行：外键约束失败（pending_contract_files，CONSTRAINT pending_contract_files_ibfk_1 FOREIGN KEY (pending_contract_id) REFERENCES pending_contracts (id) ON DELETE CASCADE ON UPDATE CASCADE）

如何使用该`FileUpload`插件，以便将上传的文件与我的新`PendingContract`记录一起附加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:52:07.727

我看了一下插件，它似乎不会将发布的数据与上传的文件一起保存。它有目的地将上传文件数据与表单中的任何其他输入分开，并为每个文件执行保存。

就个人而言，我会尝试其他不依赖任何控制器级代码的插件，例如[https://github.com/josegonzalez/upload 。](https://github.com/josegonzalez/upload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:47:40.717

```
public function beforeSave($options = array()) {
    if (!isset($this->data[$this->alias][$this->primaryKey])) {
        $this->data[$this->alias][$this->primaryKey] = String::uuid();
    }
    return parent::beforeSave($options);
} 
```

这将在保存之前为记录生成一个新的 UUID。如果密钥尚未设置，您可能只应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:39:07.027

我遇到了类似的问题，我所做的是在您的情况下添加新的 PendingContractFile 时取消验证。所以在 saveAll 方法之前尝试添加：

```
unset($this->PendingContract->PendingContractFile->validate['pending_contract_id']); 
```

所以它不会检查foreign_key。希望能帮助到你。

# php - 开发 facebook 应用程序时是否可以删除权限并重新开始？我需要改变我的范围并不断出错

> ID：10339943
> 
> 赞同：4
> 
> 时间：2012-04-26T19:19:37.763
> 
> 标签：php, facebook, facebook-php-sdk, facebook-authentication

我是这个 Facebook 编码游戏的新手，所以偶然发现了一个我认为只有我可能遇到的错误。我最初希望允许用户登录来管理他们的页面，但事后考虑，客户希望他们的用户也能够发布到他们的个人页面。

因此，我将 publish_stream 权限添加到范围，但我坚持让 Facebook 出现错误。

我是否必须首先从应用程序中停用自己，这是文档中的重点：

[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

附上代码，任何帮助都会很棒：

```
$facebook = new Facebook(array(
        'appId'  => $this->app_id,
        'secret' => $this->secret,
    ));

    $s = setting::findAppSettingSpecific('social','facebook');

    // exit;
    $facebook->setAccessToken($s);
    $user = $facebook->getUser();
    $dia_url = 'http://localhost/social/accept/';
    $login_url = $facebook->getLoginUrl($params = array('redirect_uri' => $dia_url,'scope' => 'manage_pages,publish_stream'));
    if($user == 0) {

    }
    else
    {
        echo ("<script> top.location.href='".$login_url."'</script>");
        echo 'Facebook Loves Us';
        return true;
    } 
```

它正在本地主机上运行，​​以防万一有人指出这一点，但是在添加额外权限时才开始调用错误。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:24:30.630

你有几个选择：

(1) 使用[Graph Explorer](http://developers.facebook.com/tools/explorer)，在右上角的选择框中选择您的应用程序，将方法更改为 DELETE 并在路径中放置*me/permissions*。这将删除您授予该应用程序的所有权限。

(2) 如果应用程序已添加书签，则在您的 facebook 主页中，将应用程序名称悬停在左侧书签面板上，左侧会出现一个编辑图标，单击该图标，然后单击*Edit Settings*，您可以在其中删除一些个人权限。

(3) 在 facebook 的右上角点击朝下的箭头，在菜单中点击 *Privacy Settings”，然后在该页面点击“Apps and Websites”的*编辑设置*，您可以控制您使用的应用程序。

* * *

# 编辑

(4) 例如，您可以通过对 /me/permissions 的 DELETE 请求删除单个权限，并使用额外的参数 permissions=publish_stream

感谢@Igy 指出了第四个选项。

# ruby - 使用 Ruby 自动化大型目录系统

> ID：10339944
> 
> 赞同：0
> 
> 时间：2012-04-26T19:19:41.960
> 
> 标签：ruby, arrays, file-io, ruby-1.9

所以我有以下小脚本来进行文件设置，以组织我们得到的报告。

```
#This script is to create a file structure for our survey data

require 'fileutils'

f = File.open('CustomerList.txt') or die "Unable to open file..."
a = f.readlines
x = 0

while a[x] != nil

    Customer = a[x]
    FileUtils.mkdir_p(Customer + "/foo/bar/orders")
    FileUtils.mkdir_p(Customer + "/foo/bar/employees")
    FileUtils.mkdir_p(Customer + "/foo/bar/comments")
    x += 1

end 
```

一切似乎都在之前工作`while`，但我不断得到：

```
'mkdir': Invalid argument - Cust001_JohnJacobSmith(JJS) (Errno::EINVAL) 
```

这将是`CustomerList.txt`. 我需要对数组条目做些什么才能被视为字符串吗？我是不匹配变量类型还是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:44:21.620

以下对我有用：

```
IO.foreach('CustomerList.txt') do |customer|
  customer.chomp!
  ["orders", "employees", "comments"].each do |dir|
    FileUtils.mkdir_p("#{customer}/foo/bar/#{dir}")
  end
end 
```

像这样的数据：

```
$ cat CustomerList.txt 
Cust001_JohnJacobSmith(JJS)
Cust003_JohnJacobSmith(JJS)
Cust002_JohnJacobSmith(JJS) 
```

使它更像红宝石方式的一些事情：

在打开文件或遍历数组时使用块，这样您就不必担心关闭文件或直接访问数组。

正如@inger 所指出的，本地变量以小写客户开头。

当您想要字符串中的变量值时，使用 #{} 比与 + 连接更有效。

另请注意，我们使用 chomp! 删除了尾随换行符！（它改变了原地的 var，由方法名称的尾随 ! 注明）

# java - 程序逻辑错误

> ID：10339949
> 
> 赞同：0
> 
> 时间：2012-04-26T19:19:56.810
> 
> 标签：java, floating-point

所以我目前正在阅读一本关于学习 Java 的书，书中概述的一个程序给我带来了一些麻烦。特别是当我运行程序来计算我应该从 9.87 获得的美元数量和零钱时，我得到的零钱就像我输入 9.86 一样。但是，当我输入 9.86 时，我得到了正确的变化量。据我所知，这只发生在某些以 0.87 结尾的金额，例如 8.87，尽管它适用于 6.87 罚款。这是*第 8 版 Java 编程简介*的书，由于它是由专业人士撰写的书，我对错误可能是什么感到困惑。我试过在 cmd 和 eclipse 中运行它，似乎都显示了错误。

PasteBin 链接：

[http://pastebin.com/CVssSUYp](http://pastebin.com/CVssSUYp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:25:36.207

我几乎可以肯定你被对浮点数如何工作的理解不足所困扰。你不能再用二进制精确表示 0.1，就像用十进制表示 1/3 一样。然后，除此之外，IEEE 浮点数的双精度数不能超过 17 位。

这不是 Java 或您的代码中的错误。

金钱是不应该用十进制数字表示的东西的典型例子。

编写一个包含整数美元和美分的 Money 类，并在您学习足够的 Java 时使用它：

```
public class Money {
    private final int dollars;
    private final int cents;
    private final Currency currency;

    public Money(int dollars, int cents, Currency curr) {
        if (dollars < 0) throw new IllegalArgumentException("dollars cannot be negative");
        if (cents < 0) throw new IllegalArgumentException("cents cannot be negative");
        if (curr == null) throw new IllegalArgumentException("currency cannot be null");
        this.dollars = dollars; 
        this.cents = cents;
        this.currency = curr;
    }
    // more methods here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:38:21.737

*达菲莫*是对的。浮点数中的 9.87 x 100 可能是 986.999999999... 当转换回整数时转换为 986。

您可以在使用 (int) 进行类型转换之前使用 Math.round() 将浮点数舍入到最接近的整数。

```
import java.lang.Math;
...
int remainingAmount = (int)(Math.round(amount * 100));
... 
```

产生正确的输出：

```
Your amount 9.87 consists of
        9 dollars
        3 quarters
        1 dimes
        0 nickels
        2 pennies 
```

问候，

曼尼

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:44:31.977

尝试将数量设置为 9.87，然后将其乘以 100：

```
double amount=9.87;
System.out.println(amount*100); 
```

之后，尝试打印相同的内容，但将其转换为 int：

```
double amount=9.87;
System.out.println((int)amount*100); 
```

转换为 int 只是删除了最后的小数（正如 Hot Licks 在评论中所说），并且因为你不能准确地表示浮点数（正如 duffymo 在答案中所说）你最终得到 986 而不是 987 正如你所期望的.

# jsf-2 - 不为 JSF 2.0 提供 ID 是典型的做法吗？

> ID：10339951
> 
> 赞同：1
> 
> 时间：2012-04-26T19:20:06.703
> 
> 标签：jsf-2

最好不要标记表单组件（或任何其他组件），除非您需要这样做，例如，如果您希望能够可靠地区分一个组件与另一个组件？

当我看到参考组件的示例时，我总是看到它们带有前面的冒号，例如“:dialog”而不是“dialog”或“form:dialog”。不是命名表单然后使用前面的冒号指定组件是最佳实践吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:33:45.377

如果您没有指定`id`表单的 ，因为您现在不需要通过客户端 ID 引用它，那么从技术上讲，省略它并没有什么坏处，因为 JSF 会以任何方式自动生成一个。

例如，从无 ID 表单内部，您始终可以引用父表单`@form`和属性来表示您想要提交和/或呈现整个父表单。`execute``render``<f:ajax>`

```
<f:ajax execute="@form" render="@form" /> 
```

但是，如果您需要在 ajax 渲染上引用*另​​一个*表单或其子组件之一，那么您应该为该表单提供一个固定 ID，以便您能够通过客户端 ID 引用它。

我们在现实世界项目中遇到的另一个原因是，像[Selenium](http://seleniumhq.org/)这样的自动化 Web 单元测试软件确实需要一个具有固定 ID 的表单，因为它需要通过其`name`属性找到输入字段并提交按钮，该属性也是基于JSF 表单 ID。如果未指定 JSF 表单 ID，则输入字段名称在每次部署/请求时都是不可预测的，因此无法测试。

总而言之，“最佳实践”基本上是：“仅在需要时”。我自己只是习惯于*总是*指定`NamingContainer`,`UIInput`和`UICommand`组件的 ID。“你永远不会知道”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:33:38.303

> 您的组件 ID 类似于 :namingContainer:myComponent。第一个“:”告诉 JSF 你想在 UIViewRoot 实例或组件树的最顶层开始查找组件

阅读[http://ocpsoft.org/java/jsf2-java/how-to-jsf-2-0-render-components-outside-of-the-form/](http://ocpsoft.org/java/jsf2-java/how-to-jsf-2-0-render-components-outside-of-the-form/)

# javascript - JavaScript 迭代

> ID：10339955
> 
> 赞同：0
> 
> 时间：2012-04-26T19:20:13.033
> 
> 标签：javascript, while-loop, html5-canvas

我想使用 JavaScript 在 HTML5 画布上绘制一系列图像。我有以下 while 循环，我曾希望将所有图像绘制到画布上，但是，它目前只绘制第一个：

```
function drawLevelOneElements(){
            /*First, clear the canvas */
            context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
            /*This line clears all of the elements that were previously drawn on the canvas. */

            /*Then redraw the game elements */
            drawGameElements();

            /*Draw the elements needed for level 1 (26/04/2012) */
            var fileName = 1;
            var imagePositionX = 20;
            var imagePositionY = 30;
            while(fileName < 11){
                /*Create an array of images here, move to next element of array on each iteration */
                var numbers = new Array();
                numbers[0] = "1.png"
                numbers[1] = "2.png"
                numbers[3] = "3.png"
                numbers[4] = "4.png"
                numbers[5] = "5.png"
                image.src = fileName+".png";
                image.src = numbers[0];
                image.onload = function(){
                    context.drawImage(image, imagePositionX, imagePositionY, 50, 50);
                }
                fileName = fileName+1;
                imageY = imageY+20;
                console.dir(fileName); /* displays in the console- helpful for debugging */
            } 
```

谈谈我希望这个函数能做什么：

1.  将每个图像加载到数组的不同元素中（因此 1.png 将在 numbers[0] 中，2.png 在 numbers[1] 中，等等）

2.  然后它将获取全局变量“image”，并将其源分配给 numbers[0] 的内容

3.  然后在画布上的指定位置绘制该图像。

4.  然后将变量 fileName 的值加 1，给它一个值 '2'

5.  接下来，它将增加 Y 坐标的值，它将在画布上绘制图像 20-将要绘制的图像的位置向下移动 20 个像素

6.  之后它会回到循环的开始并在画布上绘制下一个图像（2.png），位置比绘制的第一个图像的位置低 20 像素。

7.  当变量“fileName”的值小于 11 时，它应该继续执行此操作，即它应该在最后一个绘制的图像下方绘制 10 个新图像。

但是，由于某种原因，我的函数只绘制了第一张图像。有人可以指出我做错了什么，我该如何纠正？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:32:22.713

如果你把drawImg的东西塞进它自己的函数里，你可以稍微清理一下:)现在我们已经把异步的东西从循环中拉出来了，所以`image`每次循环时变量都不会被覆盖。您现在也在使用`for`循环，这对我来说更容易理解。

```
function drawLevelOneElements() {
  // your stuff
  for (var i = 0; i > 5; i++) {
    drawImg(ctx, i, x, y);
    // update x or y and whatever else
  }
}

// put all your image drawing stuff here
function drawImg(ctx, i, x, y) {
  var img = new Image();
  img.src = i + ".png";
  img.onload = function(){
    ctx.drawImage(img,  x, y, 50, 50);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:35:51.733

编辑并评论了您的代码的一些要点。最有效的变化是`imageY = imageY+20;`编辑为使用`imagePositionY`变量。

```
function drawLevelOneElements() {
        /*First, clear the canvas */
        context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
        /*This line clears all of the elements that were previously drawn on the canvas. */

        /*Then redraw the game elements */
        drawGameElements();

        /*Draw the elements needed for level 1 (26/04/2012) */
        var fileName = 1;
        var imagePositionX = 20;
        var imagePositionY = 30;
        while(fileName < 11){
            /*Create an array of images here, move to next element of array on each iteration */
            var numbers = new Array();
            /* what is not used is not necessary :)
            numbers[0] = "1.png"
            numbers[1] = "2.png"
            numbers[3] = "3.png"
            numbers[4] = "4.png"
            numbers[5] = "5.png"*/
            image.src = fileName+".png";
            // image.src = numbers[0];
            image.onload = function(){
                context.drawImage(image, imagePositionX, imagePositionY, 50, 50);
            }
            fileName = fileName+1;
            imagePositionY = imagePositionY+20; //before: imageY = imageY+20;
            console.dir(fileName); /* displays in the console- helpful for debugging */
        } 
```

# c# - 为什么我没有在我的托管 C++ DLL 中遇到一些断点（即使它们在调试时是纯红色的）？

> ID：10339961
> 
> 赞同：0
> 
> 时间：2012-04-26T19:20:27.013
> 
> 标签：c#, debugging, dll, c++-cli, breakpoints

我制作了一个 DLL，其中包含一个托管 C++ 类，该类包装了 C 库的一些功能。我有一个引用托管 C++ DLL 的 C# 测试项目。C#项目中开启了非托管调试，我在C++ DLL项目中设置了Debugger Type=Mixed。这是我所拥有的图表：

*C# 控制台应用程序 -> 包装器 DLL -> 托管 C++ 类 -> 非托管 C++ 方法（在包装器 DLL 中实现）-> C 静态库*

我在托管包装类和 DLL 中的非托管方法中都设置了断点。当我开始调试时，我的所有断点都保持红色。托管包装类中的断点会被命中，但非托管方法中的断点不会。奇怪的是，当我尝试进入任何非托管方法时，调试器“跳过”非托管 C++ 方法并直接进入 C 静态库中的函数。那时，调用堆栈显示 [External Code]，我希望它显示我的非托管 C++ 方法。

关于这里可能发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:13:54.783

尝试运行 EXE，然后转到 Debug | 附加到 VS 中的进程。

选择 EXE 并确保

在“附加到：”中选择了“托管”和“本机”

这是我以前用过的，似乎工作正常......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:33:21.560

您确定要从正确的位置加载 dll 吗？您可以通过“模块”视图检查这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T10:08:31.257

在我的情况下（VS2015_SP1）我必须使用 Debugger-Option:
Debug->Options->General->Use native Compatibility Mode

# python - 在 PyCharm 中的 Django 项目上运行 sync.db 时，getdefaultlocale 返回 None

> ID：10339963
> 
> 赞同：6
> 
> 时间：2012-04-26T19:20:36.163
> 
> 标签：python, django, pycharm

OSX 10.7.3，PyCharm 版本 2.5 构建 PY 117.200

我将介绍如何得到错误：

1.  我开始一个新项目
2.  创建一个新的 VirtualEnv 并选择 Python 2.7 作为我的基本解释器（不勾选继承全局包）
3.  单击安装并选择 Django v1.4
4.  选择`Django`项目类型
5.  打钩`Enable Admin`
6.  打开`settings.py`并添加`sqlite3`到`DATABASES:ENGINE`
7.  跑`sync.db`
8.  开始创建数据库超级用户
9.  语言环境错误

问题似乎是 getdefaultlocale() 方法没有返回任何东西（嗯，无）。

```
return getpass.getuser().decode(locale.getdefaultlocale()[1])
    TypeError: decode() argument 1 must be string, not None 
```

但是，如果我启用 virtualenv`workon MyApplication`并`python`使用以下代码运行：

```
Python 2.7.2 (default, Feb  7 2012, 23:16:02) 
[GCC 4.2.1 Compatible Apple Clang 3.0 (tags/Apple/clang-211.10.1)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import locale
>>> print locale.getdefaultlocale()
('en_GB', 'UTF-8') 
```

**那么有人知道发生了什么吗？**

## 完整输出：

```
bash -cl "/Users/ash/.virtualenvs/Tester/bin/python /Applications/PyCharm.app/helpers/pycharm/django_manage.py syncdb"
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table django_admin_log

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): yes
Traceback (most recent call last):
  File "/Applications/PyCharm.app/helpers/pycharm/django_manage.py", line 17, in <module>
    run_module(manage_file, None, '__main__')
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 180, in run_module
    fname, loader, pkg_name)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/Users/ash/Development/PycharmProjects/Tester/manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 110, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/sql.py", line 189, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 73, in create_superuser
    call_command("createsuperuser", interactive=True, database=db)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 70, in handle
    default_username = get_default_username()
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 105, in get_default_username
    default_username = get_system_username()
  File "/Users/ash/.virtualenvs/Tester/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 85, in get_system_username
    return getpass.getuser().decode(locale.getdefaultlocale()[1])
TypeError: decode() argument 1 must be string, not None

Process finished with exit code 1 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T21:00:26.293

基本上发生这种情况的原因是 PyCharm 默认情况下无法访问环境变量。

我找到了 3 个解决此问题的方法：

1.  使用 CrazyCoder 在此问题的评论中建议的链接设置全局环境变量。

2.  通过更改到 PyCharm 应用程序目录并运行，从终端窗口运行 PyCharm `./pycharm`（可能在 PATH 中创建一个符号链接以减少不便）

3.  打开 PyCharm 首选项，浏览到`Console > Django Console`，键入所需的环境变量，就像在 bash 配置文件中一样，例如`LC_ALL=en_US.UTF-8`

我建议第三种方式最优雅，尽管默认情况下不加载变量很烦人。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T20:53:30.287

进入终端：

```
$ nano .bash_profile 
```

添加：

```
export LC_ALL=en_GB.UTF-8
export LANG=en_GB.UTF-8 
```

（或使用 locale -a 命令查看您可以使用哪些）

保存并重试。

# iphone - UIViewController childViewControllers 数组上的 KVO

> ID：10339966
> 
> 赞同：5
> 
> 时间：2012-04-26T19:20:54.563
> 
> 标签：iphone, objective-c, ios

使用[访问器](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-178830-BAJEDEFB)似乎是在集合对象上获取 KVO 通知的方法，但这似乎不适用于 UIViewController 的 childViewControllers NSArray 属性。我希望在向此属性添加或删除对象时收到通知。所以我尝试了这个：

```
[self addObserver:self forKeyPath:@"childViewControllers" options:NSKeyValueObservingOptionNew context:nil];

-(NSUInteger)countOfChildViewControllers
{
    return self.childViewControllers.count;
} 
```

但我不确定我是否做得对，我没有收到任何通知。我想要的可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:44:27.423

关键是对属性的所有修改都必须通过符合 KVO 的方式。这与`UIViewController`实现方式有关，在该类之外您无能为力。使用索引集合访问器是`UIViewController`实现 KVO 兼容的一种方式，但还有其他方式。我不知道该属性是否符合 KVO；从你的报告来看，显然不是。如果底层实现不使用它们，则在类别或子类中添加 getter 甚至 setter 都无济于事。

# android - Web 服务作为 Android 客户端和 MySQL 服务器数据库之间的中介

> ID：10339972
> 
> 赞同：0
> 
> 时间：2012-04-26T19:21:25.360
> 
> 标签：android, mysql, web-services

我正在开发一个 Android 客户端来连接到数据库（在我的例子中是 MySQL 服务器）。好的方法是在它们之间使用 Web 服务器。

我在这里找到了一些很好的理由： [访问远程数据库的最佳方式：通过 Web 服务还是直接 DB 访问？](https://stackoverflow.com/questions/5689539/best-way-to-access-a-remote-database-via-webservice-or-direct-db-access)

Elad 围绕这种方法写了很好的理由，例如复杂性和安全性。你能给我一些关于这些方法的新建议，让我知道你的想法的来源，因为 Elad 没有提供任何来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:24:49.310

最简单的原因是 JDBC 连接需要稳定。并且移动连接不够稳定。因此，使用中间 Web 服务是一个不错的选择。围绕某些数据库提供休息服务将为您提供一种安全、稳定、标准的方式来访问您的数据。

# java - 使用 hibernate3 和 spring3 自动装配 sessionbean

> ID：10339973
> 
> 赞同：1
> 
> 时间：2012-04-26T19:21:44.440
> 
> 标签：java, spring, hibernate

抱歉，因为我对 Spring 比较陌生。我有以下代码...

org.assessme.com.dao.UserDAOImpl.java

```
@Repository
public class UserDAOImpl implements UserDAO{

    @Autowired
    private SessionFactory sessionFactory;

     @Transactional
    public User getById(Long id) {
        return (User) sessionFactory.getCurrentSession().load(User.class, id);
    }

} 
```

这使用 org.assessme.com.dao.UserDAO.java

```
public interface UserDAO {
    public User getById(Long id);
} 
```

当我尝试运行我的程序时，我得到...

```
ERROR: org.springframework.web.servlet.DispatcherServlet - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory org.assessme.com.bean.UserDAOImpl.sessionFactory; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我的 spring.xml 是...

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"

       xsi:schemaLocation=
       "http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" /> 
        <property name="url" value="jdbc:mysql://localhost/db" />
        <property name="username" value="username" />
        <property name="password" value="password" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="annotatedClasses">
        <list>
            <value>org.assessme.com.entity.User</value>
        </list>
    </property>
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="data" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
                <prop key="hibernate.current_session_context_class">thread</prop>
                <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <context:component-scan base-package="org.assessme" />

    <tx:annotation-driven/>

    <bean id="transactionManager"  class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

谁能看到我做错了什么？我不太确定如何自动装配 sessionFactory。

我的实体类如下...

org.assessme.com.entity.User.java

```
@Entity
@Table(name = "users")
public class User {

    @Column(name = "firstName")
    private String firstName;

    @Column(name = "lastName")
    private String lastName;

    @Column(name = "email")
    private String email;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name = "id")
    private long id;

    public String getFirstName() {
        return firstName;
    }
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public String getLastName() {
        return lastName;
    }
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
    public String getEmail() {
        return email;
    }
    public void setEmail(String email) {
        this.email = email;
    }
    public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }
} 
```

谢谢，

顺便说一下，我在springmvc中使用它，这应该在servlet-context.xml中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:59:51.850

这是错误消息的相关部分：

```
NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] 
```

问题是`AnnotationSessionFactoryBean`没有实现`org.hibernate.SessionFactory`接口。要获得其中之一，您需要调用[buildSessionFactory](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/LocalSessionFactoryBean.html#buildSessionFactory%28%29)方法。

# delphi - Delphi 5和浮点乘法和数学

> ID：10339976
> 
> 赞同：3
> 
> 时间：2012-04-26T19:21:53.533
> 
> 标签：delphi, math, delphi-5

我偶尔会使用 Delphi 5 来完成编程工作，包括为我的电子业务提供的一个不错的商业应用程序。多年来，我已经用它完成了一些图形、数据库和其他一般工作。

今天，我正在做一个模拟，我想根据一些物理原理移动像素，细节在应用程序上并不重要，但我整个上午和昨天的一些时间都在寻找如何使用 Square Root 和 Square 函数没有得到奇怪的答案。通过检查分配给扩展变量类型“vector_length”的简单计算，我在计算时得到类似的结果（数字是固定的，但与表示这些数字的任何浮点类型的结果相同）：

```
vector_length := Sqrt(Sqr(3.4) + Sqr(3)) 
```

从理论上讲，这给了我大约 4.53。使用计算器足够合理。

Delphi 的调试器向我展示了这样的内容：

```
2.9134839203548e-322 
```

这显然是一个没有意义的浮点表示。

代码不像预期的那样工作，所以我只能认为数学是错误的，或者我做错了什么，期望函数给我一些符合合理结果的东西？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:34:03.787

表达没有问题。我用这个（Delphi 2007）进行了测试 - 我不再有 D5，但我不相信它们之间`Sqr`或`Sqrt`之间有太多（如果有的话）改变：

```
program Project3;

{$APPTYPE CONSOLE}

uses
  SysUtils, Math;

var
  Vector_Len: Extended;

begin
  Vector_Len :=  Sqrt(Sqr(3.4) + Sqr(3));
  WriteLn('Vector_Len: ' + Format('%f', [Vector_Len]));
  ReadLn;
end. 
```

这产生了以下控制台输出：

![在此处输入图像描述](../Images/c1b9d871920f7ce839cc51fdda8789f7.png)

不过，我认为@Uwe 正在做某事。我认为您所看到的不是调试器故障。我认为这正是您决定检查价值的地方。将代码更改为此（这显然是一个“仅用于显示目的”的测试应用程序，因为该函数在这种情况下毫无意义，而且您显然不会使用 a`var`然后立即将其分配给`Result`该函数）：

```
program Project3;

{$APPTYPE CONSOLE}

uses
  SysUtils, Math;

function CalcVectorLen: Extended;
var
  Vector_Len: Extended;
begin
  Vector_Len :=  Sqrt(Sqr(3.4) + Sqr(3));
  Result := Vector_Len;
end;

begin
  WriteLn('Vector_Len: ' + Format('%f', [CalcVectorLen]));
  ReadLn;
end. 
```

在行上设置一个断点`Vector_Len := Sqrt(`，然后运行。调试器显示此输出（您的实际值可能会有所不同）：

（注意：无法捕获实际的调试器弹出评估窗口，但它与`Local Variables`调试监视窗口中用箭头标记的内容相同。）

![在此处输入图像描述](../Images/81595d62386adeb19c7708b8168d9b1e.png)

发生的情况是，`Vector_Len`在表达式计算实际发生并将结果分配给变量之前，您正在检查 的未初始化值。如果您在剩下的过程中运行该应用程序，您会看到控制台窗口仍然显示正确的输出。

# symfony1 - Symfony - 多个 sfWidgetFormPropelChoice 过滤器 - 默认情况下如何全选？

> ID：10339981
> 
> 赞同：1
> 
> 时间：2012-04-26T19:22:23.737
> 
> 标签：symfony1, symfony-1.4, propel, symfony-forms

我`sfWidgetFormPropelChoice`在过滤器中使用了一个小部件，并打开了多选选项。

有没有一种简单的方法可以默认选择**所有选项？**

我知道我可以使用 set default 来选择特定的选项，但我希望它们都被添加，即使表格变大了。

```
$this->setDefault('field', array(1,2,3,4,5)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:50:51.553

为什么不将表中的所有值作为默认数组？类似的东西（我将采用一个名为的默认表`Article`）：

```
// in your model
class ArticleQuery extends BaseArticleQuery
{
  static public function getDefaultsValue()
  {
    $articles = self::create()
      ->setFormatter('PropelArrayFormatter')
      ->find();

    $default = array();
    foreach($articles as $article)
    {
      $default[] = $article['Id'];
    }

    return $default;
  } 
```

然后，在您的 setDefault 中：

```
$this->setDefault('field', ArticleQuery::getDefaultsValue()); 
```

# objective-c - 我的动画在设备上崩溃但在模拟器中没有

> ID：10339987
> 
> 赞同：0
> 
> 时间：2012-04-26T19:22:34.850
> 
> 标签：objective-c, xcode, ipad, animation

嗨，我是一个试图组合 iPad 应用程序的菜鸟。一切都在模拟器上顺利运行，但在设备上却没有。我有五个视图控制器，它是第五个，尤其是在运行怪物动画时。

我从那个视图控制器在这里发布代码。请不要笑。

它还说它收到了内存警告。那是怎么回事？

谢谢任何人。

```
import "FifthViewController.h"
#import "ViewController.h"

@interface FifthViewController ()

@end

@implementation FifthViewController

@synthesize doorImage;

@synthesize flagImage;

@synthesize kuckuImage;

@synthesize treImage;

@synthesize moppImage;

-(IBAction)trollljud:(id)sender{ 
    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"trolleri3", CFSTR ("mp3"), NULL);
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef); }

-(IBAction)monsterljud:(id)sender{ 
    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Monsterljud", CFSTR ("mp3"), NULL);
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef); }

-(IBAction)dorrljud:(id)sender{ 
    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"dörrljud", CFSTR ("mp3"), NULL);
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef); }

-(IBAction)kuckuljud:(id)sender{ 
    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Fun24", CFSTR ("mp3"), NULL); 
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef); }

-(IBAction)flaggljud:(id)sender{ 
    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Flag1", CFSTR ("mp3"), NULL); 
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef); }

-(IBAction)change:(id)sender{
    ViewController *two = [[ViewController alloc] initWithNibName:nil bundle:nil];
    two.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:two  animated:YES];
    [theAudio stop];
    [two release];

}

-(IBAction)hideButton

{
    Button2.hidden=FALSE; }

-(IBAction)hideButton2

{
    Button3.hidden=TRUE; }

- (void) openDoor {
    [doorImage startAnimating]; }

- (void) kucku {
    [kuckuImage startAnimating]; }

- (void) flag {
    [flagImage startAnimating]; }

- (void) tre {
    [treImage startAnimating]; }

- (void) mopp {
    [moppImage startAnimating]; }

-(IBAction)oneFingerSwipeLeft:(UITapGestureRecognizer *)recognizer {

    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Droid2", CFSTR ("mp3"), NULL); 
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef);
     }

-(IBAction)oneFingerSwipeRight:(UITapGestureRecognizer *)recognizer {

    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Droid", CFSTR ("mp3"), NULL); 
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef);
     }

-(IBAction)oneFingerSwipeUp:(UITapGestureRecognizer *)recognizer {

    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Wolf2", CFSTR ("mp3"), NULL); 
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef);
     }

-(IBAction)oneFingerSwipeDown:(UITapGestureRecognizer *)recognizer {

    CFBundleRef mainBundle = CFBundleGetMainBundle(); 
    CFURLRef soundFileURLRef; 
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Snake2", CFSTR ("mp3"), NULL); 
    UInt32 soundID; 
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID); 
    AudioServicesPlaySystemSound(soundID); 
    CFRelease(soundFileURLRef);
     }

- (void)viewDidLoad{

    {
        [super viewDidLoad];

        UISwipeGestureRecognizer *oneFingerSwipeLeft = [[[UISwipeGestureRecognizer alloc] 
                                                         initWithTarget:self 
                                                         action:@selector(oneFingerSwipeLeft:)] autorelease];
        [oneFingerSwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
        [[self view] addGestureRecognizer:oneFingerSwipeLeft];

        UISwipeGestureRecognizer *oneFingerSwipeRight = [[[UISwipeGestureRecognizer alloc] 
                                                          initWithTarget:self 
                                                          action:@selector(oneFingerSwipeRight:)] autorelease];
        [oneFingerSwipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
        [[self view] addGestureRecognizer:oneFingerSwipeRight];

        UISwipeGestureRecognizer *oneFingerSwipeUp = [[[UISwipeGestureRecognizer alloc] 
                                                       initWithTarget:self 
                                                       action:@selector(oneFingerSwipeUp:)] autorelease];
        [oneFingerSwipeUp setDirection:UISwipeGestureRecognizerDirectionUp];
        [[self view] addGestureRecognizer:oneFingerSwipeUp];

        UISwipeGestureRecognizer *oneFingerSwipeDown = [[[UISwipeGestureRecognizer alloc] 
                                                         initWithTarget:self 
                                                         action:@selector(oneFingerSwipeDown:)] autorelease];
        [oneFingerSwipeDown setDirection:UISwipeGestureRecognizerDirectionDown];
        [[self view] addGestureRecognizer:oneFingerSwipeDown];

    }

    {
        [super viewDidLoad];

        [Button2 setHidden:TRUE];
    }

    {
        NSString *path = [[NSBundle mainBundle] pathForResource:@"Okenljud" ofType:@"mp3"];
        if (theAudio) [theAudio release];
        {
            theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
            [theAudio play];
            theAudio.numberOfLoops = -1;
        }
        [super viewDidLoad];
    }
    {
        [super viewDidLoad];
        NSArray *doorFrames = [NSArray array];
        doorFrames = [[NSArray alloc] initWithObjects:
                      [UIImage imageNamed:@"dörr51.png"],
                      [UIImage imageNamed:@"dörr51.png"],
                      [UIImage imageNamed:@"dörr52.png"],          
                      [UIImage imageNamed:@"dörr53.png"],
                      [UIImage imageNamed:@"dörr54.png"],
                      [UIImage imageNamed:@"dörr55.png"],
                      [UIImage imageNamed:@"dörr56.png"],
                      [UIImage imageNamed:@"dörr57.png"], Nil];
        doorImage.animationImages = doorFrames;
        doorImage.animationDuration = 3;
        doorImage.animationRepeatCount = 1;
    }

    {
        [super viewDidLoad];
        NSArray *kuckuFrames = [NSArray array];
        kuckuFrames = [[NSArray alloc] initWithObjects:
                       [UIImage imageNamed:@"Kuckuhh1.png"],
                       [UIImage imageNamed:@"Kuckuhh2.png"],
                       [UIImage imageNamed:@"Kuckuhh3.png"],          
                       [UIImage imageNamed:@"Kuckuhh2.png"],
                       [UIImage imageNamed:@"Kuckuhh1.png"], Nil];
        kuckuImage.animationImages = kuckuFrames;
        kuckuImage.animationDuration = 1;
        kuckuImage.animationRepeatCount = 1;
    }

    {
        [super viewDidLoad];
        NSArray *moppFrames = [NSArray array];
        moppFrames = [[NSArray alloc] initWithObjects:
                         [UIImage imageNamed:@"m1.png"],
                         [UIImage imageNamed:@"m2.png"],
                         [UIImage imageNamed:@"m3.png"],
                         [UIImage imageNamed:@"monster15.png"],
                         [UIImage imageNamed:@"monster16.png"],
                         [UIImage imageNamed:@"monster17.png"],
                         [UIImage imageNamed:@"m4.png"],
                         [UIImage imageNamed:@"monster18.png"],
                         [UIImage imageNamed:@"monster19.png"],
                         [UIImage imageNamed:@"m5.png"],
                         [UIImage imageNamed:@"m6.png"],
                         [UIImage imageNamed:@"m7.png"],
                         [UIImage imageNamed:@"m8.png"],
                         [UIImage imageNamed:@"m9.png"],
                         [UIImage imageNamed:@"m10.png"],
                         [UIImage imageNamed:@"m11.png"],
                         [UIImage imageNamed:@"m12.png"],
                         [UIImage imageNamed:@"m13.png"],
                         [UIImage imageNamed:@"m14.png"],
                         [UIImage imageNamed:@"monster20.png"],
                         [UIImage imageNamed:@"monster21.png"],
                         [UIImage imageNamed:@"monster22.png"],
                         [UIImage imageNamed:@"monster23.png"],
                         [UIImage imageNamed:@"monster24.png"],
                         [UIImage imageNamed:@"monster25.png"],
                         [UIImage imageNamed:@"monster26.png"], Nil];
        moppImage.animationImages = moppFrames;
        moppImage.animationDuration = 19;
        moppImage.animationRepeatCount = 1;
    }

    {
        [super viewDidLoad];
        NSArray *fagelBilder = [NSArray array];
        fagelBilder = [[NSArray alloc] initWithObjects:
                       [UIImage imageNamed:@"1.png"],
                       [UIImage imageNamed:@"2.png"],
                       [UIImage imageNamed:@"3.png"],
                       [UIImage imageNamed:@"4.png"],
                       [UIImage imageNamed:@"5.png"],
                       [UIImage imageNamed:@"6.png"],
                       [UIImage imageNamed:@"7.png"],
                       [UIImage imageNamed:@"8.png"],
                       [UIImage imageNamed:@"9.png"],
                       [UIImage imageNamed:@"10.png"],
                       [UIImage imageNamed:@"11.png"],
                       [UIImage imageNamed:@"12.png"],
                       [UIImage imageNamed:@"13.png"],
                       [UIImage imageNamed:@"14.png"],
                       [UIImage imageNamed:@"15.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"16.png"],
                       [UIImage imageNamed:@"17.png"],
                       [UIImage imageNamed:@"18.png"],
                       [UIImage imageNamed:@"19.png"], 
                       [UIImage imageNamed:@"20.png"],
                       [UIImage imageNamed:@"21.png"],
                       [UIImage imageNamed:@"22.png"],
                       [UIImage imageNamed:@"23.png"],
                       [UIImage imageNamed:@"24.png"],
                       [UIImage imageNamed:@"25.png"],
                       [UIImage imageNamed:@"26.png"],
                       [UIImage imageNamed:@"27.png"],
                       [UIImage imageNamed:@"28.png"],
                       [UIImage imageNamed:@"29.png"],
                       [UIImage imageNamed:@"30.png"],
                       [UIImage imageNamed:@"31.png"],
                       [UIImage imageNamed:@"32.png"],
                       [UIImage imageNamed:@"33.png"],
                       [UIImage imageNamed:@"38.png"],
                       [UIImage imageNamed:@"14.png"],
                       [UIImage imageNamed:@"13.png"],
                       [UIImage imageNamed:@"12.png"],
                       [UIImage imageNamed:@"11.png"],
                       [UIImage imageNamed:@"10.png"],
                       [UIImage imageNamed:@"9.png"],
                       [UIImage imageNamed:@"8.png"],
                       [UIImage imageNamed:@"7.png"],
                       [UIImage imageNamed:@"6.png"],
                       [UIImage imageNamed:@"5.png"],
                       [UIImage imageNamed:@"4.png"],
                       [UIImage imageNamed:@"3.png"],
                       [UIImage imageNamed:@"2.png"],
                       [UIImage imageNamed:@"1.png"], Nil];
        treImage.animationImages = fagelBilder;
        treImage.animationDuration = 10;
        treImage.animationRepeatCount = 1;
    }

    {
        [super viewDidLoad];
        NSArray *flagbilder = [NSArray array];
        flagbilder = [[NSArray alloc] initWithObjects:
                       [UIImage imageNamed:@"F1.png"],
                       [UIImage imageNamed:@"f2.png"],
                       [UIImage imageNamed:@"f3.png"],
                       [UIImage imageNamed:@"f4.png"],
                       [UIImage imageNamed:@"f5.png"],
                       [UIImage imageNamed:@"f6.png"],
                       [UIImage imageNamed:@"f7.png"],
                       [UIImage imageNamed:@"f8.png"],
                       [UIImage imageNamed:@"f9.png"],
                       [UIImage imageNamed:@"f10.png"],
                       [UIImage imageNamed:@"f11.png"],
                       [UIImage imageNamed:@"f12.png"],
                       [UIImage imageNamed:@"f13.png"],
                       [UIImage imageNamed:@"f14.png"],
                       [UIImage imageNamed:@"f15.png"],
                       [UIImage imageNamed:@"f16.png"],
                       [UIImage imageNamed:@"f17.png"],
                       [UIImage imageNamed:@"f18.png"],
                       [UIImage imageNamed:@"f19.png"], 
                       [UIImage imageNamed:@"f20.png"],
                       [UIImage imageNamed:@"f21.png"],
                       [UIImage imageNamed:@"f20.png"],
                       [UIImage imageNamed:@"f22.png"],
                       [UIImage imageNamed:@"f20.png"],
                       [UIImage imageNamed:@"f23.png"],
                       [UIImage imageNamed:@"f20.png"],
                       [UIImage imageNamed:@"f22.png"],
                       [UIImage imageNamed:@"f20.png"],
                       [UIImage imageNamed:@"f23.png"],
                       [UIImage imageNamed:@"f20.png"],
                       [UIImage imageNamed:@"f22.png"],
                       [UIImage imageNamed:@"f20.png"],
                       [UIImage imageNamed:@"f23.png"],
                       [UIImage imageNamed:@"f20.png"],
                       [UIImage imageNamed:@"f24.png"],
                       [UIImage imageNamed:@"f25.png"],
                       [UIImage imageNamed:@"f26.png"],
                       [UIImage imageNamed:@"f27.png"],
                       [UIImage imageNamed:@"f28.png"],
                       [UIImage imageNamed:@"f29.png"],
                       [UIImage imageNamed:@"f30.png"],
                       [UIImage imageNamed:@"f31.png"],
                       [UIImage imageNamed:@"f32.png"],
                       [UIImage imageNamed:@"f33.png"],
                       [UIImage imageNamed:@"f34.png"],
                       [UIImage imageNamed:@"f35.png"],
                       [UIImage imageNamed:@"f36.png"],
                       [UIImage imageNamed:@"f37.png"],
                       [UIImage imageNamed:@"f38.png"], Nil];
        flagImage.animationImages = flagbilder;
        flagImage.animationDuration = 15;
        flagImage.animationRepeatCount = 1;
    }

}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil; }

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft); }

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:39:57.123

如果您收到内存警告，则该应用程序可能并未崩溃，而是因过度使用内存而被终止。

您可能会在课堂上的某个地方出现内存泄漏，或者只是对该设备要求太多。

你的课很长，所以我无法深入研究它以寻找泄漏。但是在 Xcode 中有一个功能可以自动分析代码中的问题。

只需从菜单中选择：**产品**->**分析**。

您将收到一份可能的问题列表，只需检查每个问题是否有未发布的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:49:06.037

你有记忆问题。该模拟器拥有您计算机的全部内存资源，远远超过任何 iPhone 或 iPad。

看起来您正在尝试一次加载太多图像。您可能需要使用更小的 inages 或更少的图像，或者将您的动画方法更改为更按需的类型。

也是一个更次要的观点。对于像您这样的重复代码，请使用“for”语句和“stringWithFormat”。它会将其降低为几行。

# c# - 设置注册表值抛出 UnauthorizedAccessException

> ID：10339990
> 
> 赞同：21
> 
> 时间：2012-04-26T19:22:47.497
> 
> 标签：c#

我有一个 C# 应用程序，我正在尝试通过注册表编辑服务。我正在使用需要管理员权限才能运行我的应用程序的清单文件。尽管如此，这段代码还是抛出了

> System.UnauthorizedAccessException：无法写入注册表项。

```
RegistryKey key = Registry.LocalMachine.OpenSubKey ("SYSTEM\\CurrentControlSet\\services\\Tomcat7");
key.SetValue ("Start", 2, RegistryValueKind.DWord); 
```

有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-06-30T11:28:45.897

按照以下代码，注意附加`true`参数：

```
RegistryKey key = Registry.LocalMachine.OpenSubKey("SYSTEM\\CurrentControlSet\\services\\Tomcat7",true);
key.SetValue("Start", 2, RegistryValueKind.DWord); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T19:45:30.563

这可能会有所帮助，

[链接到堆栈溢出的类似问题](https://stackoverflow.com/questions/2732126/)

看起来您正在以只读方式打开密钥。

# vb.net - 验证 html.editorfor

> ID：10339992
> 
> 赞同：0
> 
> 时间：2012-04-26T19:22:53.430
> 
> 标签：vb.net, asp.net-mvc-3, razor

我试图找出一种方法来验证输入的用户数据：

看法：

```
 <div class="editor-field">
            @Html.EditorFor(Function(model) model.CompleteWorkSample.EmailAddress)
            @Html.ValidationMessageFor(Function(model) model.CompleteWorkSample.EmailAddress)
        </div> 
```

这是在 MVC3，VB.net 中。我正在寻找一种简单的方法来验证用户在 editorfor 字段中输入的数据。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:26:49.583

为什么不在表单帖子的 Action 方法中验证它？

```
public Action Result Post(YourViewModel model)
{
   if(ModelState.IsValid)
   {
          //This is valid
   }
   return View(model);
} 
```

假设您已经使用 DataAnnotation attirbute 装饰了您的属性

```
public class CompleteWorkSample 
{
  [Required]
  public string EmailAdress { set;get;}
} 
```

抱歉，这是 C#。我不是 VB.NET 专家。

# jquery-ui - 从列表中删除项目后，有没有办法使用 jquery ui 在可排序的连接列表中获取单个项目？

> ID：10339995
> 
> 赞同：0
> 
> 时间：2012-04-26T19:23:15.937
> 
> 标签：jquery-ui

我有以下问题：将一个项目从“sortable_pics_selected”列表拖到另一个列表中后，jquery ui“remove”事件处理程序触发了一个事件：

-->小提琴：http: [//jsfiddle.net/4DBLj/3/](http://jsfiddle.net/4DBLj/3/) <---

```
 $("#sortable_pics_selected").sortable({
            remove: function(event, ui) {
                alert('hi);
            }
        });

<div id="sortablecontainer_pic"> 
   <ul id="sortable_pics_all" class="connectedSortable">
      <li class="ui-state-default">Item 1</li>
      <li class="ui-state-default">Item 2</li>
      <li class="ui-state-default">Item 3</li>
      <li class="ui-state-default">Item 4</li>
      <li class="ui-state-default">Item 5</li>
   </ul>

   <ul id="sortable_pics_selected" class="connectedSortable">
      <li id="1" class="ui-state-highlight">Item 1</li>
      <li id="2" class="ui-state-highlight">Item 2</li>
      <li id="3" class="ui-state-highlight">Item 3</li>
      <li id="4" class="ui-state-highlight">Item 4</li>
      <li id="5" class="ui-state-highlight">Item 5</li>
   </ul>
</div> 
```

有没有办法确定删除的项目有哪个 id？当任何项目被删除时，上述功能通常会触发......获取个人ID的最佳方式可能是什么？有没有可以做到这一点的jquery ui函数？如果不是这种情况......删除方法在我看来不是正确的方法。我可以用纯 jquery 编写它，但是为此构建了 jquery ui？我是不是误会了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:09:57.710

根据您的小提琴，这是最终代码

[http://jsfiddle.net/4DBLj/5/](http://jsfiddle.net/4DBLj/5/)

获取ui项的id属性：

```
alert(ui.item.attr('id')); 
```

编辑：关于 ui.item 评论“我可以在哪里阅读 ui.class”。

jQuery UI 有关于每个小部件的文档。虽然许多包含“ui”，但其实际内容可能会有所不同。对于可排序，请参阅此页面：

[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/) 在“概述”选项卡下。在那里您会找到对 ui.item 的引用 - 当前拖动的项目。在这种情况下，它具有“id”属性，因为您在该对象的代码“id=''”中包含了一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:30:07.913

您是否尝试过以下操作？我相信它应该工作

```
 ui.attr('id') 
```

# objective-c - 使用 FBRequest 从 Facebook 获取好友列表

> ID：10339999
> 
> 赞同：2
> 
> 时间：2012-04-26T19:23:35.927
> 
> 标签：objective-c, facebook, facebook-graph-api, facebook-c#-sdk

我正在尝试从 Facebook 读取好友列表并在 TableView 中显示，但我没有任何反应。我的代表的代码和平：

```
 if (![facebook isSessionValid]) {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                    @"user_location",
                    @"friends_location",
                    @"read_friendlists", 
                    nil]; 
    [facebook authorize:permissions];
    [permissions release];
    }
    [facebook requestWithGraphPath:@"me/friends" andDelegate:self]; 
```

`request:didLoad`方法看起来像：

```
-(void)request:(FBRequest *)request didLoad:(id)result {
_contacts = result;
} 
```

`contacts`这是我的实例 NSArray 我想用来自 Facebook 的联系人填充。在`tableViewController`我做了接下来的事情：

```
 AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    cell.textLabel.text = [appDelegate.contacts objectAtIndex:indexPath.row]; 
```

结果我的tableView中没有任何东西。我对我做错了什么感兴趣？我通常以正确的方式做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:37:02.203

你确定这个结果是 NSArray 的实例，而不是 NSDictionary？我现在正在使用 fb iOS SDK，并且由于相同的请求而获得了 NSDictionary。字典有两个关键路径：“数据”（包含 NSArray 和所需的朋友）和“分页”。