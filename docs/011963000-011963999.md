# StackOverflow 问答 11963000-11963999

# cassandra - Cassandra 多租户配置选项

> ID：11963010
> 
> 赞同：3
> 
> 时间：2012-08-15T01:31:22.540
> 
> 标签：cassandra, multi-tenant

我们正在评估是否将基于 PostGres 构建的多租户 EAV 系统迁移到 Cassandra，我希望输入我们的模式方法，看看使用 Cassandra 进行测试是否有意义。我们的多租户系统层次结构由帐户-> 应用程序组成，其中一个帐户可以运行多个应用程序。查询需要按应用或帐户进行隔离（聚合帐户的所有应用数据）。帐户可以在我们的 EAV 模型中使用自己的自定义字段创建自己的数据对象。

我考虑过对 Cassandra 采用两种方法。第一种是在 1 个列族中保存一定数量的应用程序（比如 20 个）（以减少使用的列族数量）。每行将由 accountid->appid->dataobjectid->recordid 的复合列标识。将根据应用程序的需要为每个应用程序的数据对象动态添加列。这意味着如果列族有两个应用程序，第一个应用程序的 1 行可能定义了 20 列，而第二个应用程序可能定义了 30 列。这意味着这两个应用程序总共将有 50 个潜在的列。现在，应用程序的平均列数为 19。这意味着列族中的平均列数为 400。看起来很合理，并利用了 Cassandra 的宽列支持。实际上，我们可能很容易支持每个列族的更多应用程序。缺点是二级索引会很困难，因为我们不允许用户创建自己的索引，因此如果没有 .

第二种方法是让两个列族保存 1000 个应用程序的所有数据。第一个列族将具有与上述相同的复合列，但它将在 JSON 文档中保存该行的整个数据对象。第二个列族将具有相同的复合键，但会向键添加另一个值，即 fieldid 表示 json 文档中的字段（我们的应用程序元数据管理器存储 UUID 以识别 JSON 文档中的每个“字段”），但会每种数据类型都有一个“字段值”列 - 字符串、数字、小数、浮点数（日期和布尔值转换为数字）。这里的好功能是我们可以轻松地索引每个列以进行搜索，并且我们正在最大限度地减少我们创建的列族的数量。

上述两种方法的优缺点是什么？在上述场景中，我是否遗漏了一些明显或误解的 Cassandra（例如，我是否可以首先拥有如此宽的复合列）？对于这种类型的应用程序还有其他更好的架构建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:38:29.747

我认为在决定数据模型时需要回答的第一个问题是“我打算如何查询这些数据？” 一般来说，在任何一个模型中，您在 CF、列或组合中的组件数量方面都远远没有达到极限，所以我不会担心这一点。

考虑到您担心第一个模型中缺少辅助节点，这告诉我按值查询功能可能很重要。如果是这样，第二个模型*可能会*更好地为您服务。需要注意的是，辅助数据在基数较低的情况下效果最好，并且您的数据可能不太适合这种情况。如果没有，您可以很容易地创建自己的索引，在这种情况下，任何一个模型都可以工作。

我的建议是弄清楚您打算如何读取数据，然后规划您的模型以匹配您的读取模式。如果您不确定，请尝试使用这两种模型，看看哪种效果最好。根据我的经验，通常需要不止一次迭代才能得出一个好的模型，而且你不应该害怕以不止一种方式编写数据。标准化不是这里的目标。如果您想更深入地讨论您的模型，请查看 freenode (#cassandra) 上的 Cassandra IRC 频道。

# c# - 解析 JSON 文件并获取“无效的 JSON 原语：\0\0\0\0”

> ID：11963013
> 
> 赞同：0
> 
> 时间：2012-08-15T01:32:05.037
> 
> 标签：c#, json, dynamic, deserialization

很简单的事情，但由于某种原因我无法弄清楚这一点。我有一个看起来像这样的模拟 JSON 文件：

```
 {
  "AccountId":"XXXXXXXXX",
  "UAN":"PE3458234758345",
  "BillingName":"John Smith",
  "BillingAddress": {
    "Address1":"701 First Ave.",
    "Address2":"test",
    "City":"Philadelphia",
    "State":"PA",
    "Zip:":"19147"
  },
  "ServiceStartDate":"5/1/2012",
  "PromoCode":"0056",
  "PartnerCode":"AAL",
  "MemberNumber":"0000001",
  "Invoices":[
    {
      "Amount":"113.78",
      "Date":"6/1/2012",
      "Usage":"3143"
    },
    {
      "Amount":"123.56",
      "Date":"7/1/2012",
      "Usage":"4561"
    },
    {
      "Amount":"105.23",
      "Date":"8/1/2012",
      "Usage":"5454"
    }
  ],
  "Expected":[
    {
      "AwardCreation":"true",
      "AwardAmount":"500",
      "AwardUnits":"usd",
      "AwardDate":"today()"
    }
  ]
} 
```

我需要从中创建一个动态对象，因为每次运行测试模型时它都会有所不同。[我已经尝试了这个解决方案](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object/3806407#3806407)中提到的自定义反序列化器以及 .NET 4.0 System.Web.Helpers，在这两种情况下我最终得到：

```
Invalid JSON primitive: \0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0... 
```

目前我的工作测试是：

```
var json = new StringBuilder();

        using (var fs = File.Open(@"c:\users\bryan\Desktop\test2.json", FileMode.Open))
        {
            var byteArray = new byte[1024];
            var tempString = new UTF8Encoding(true);

            while (fs.Read(byteArray, 0, byteArray.Length) > 0)
            {
                json.Append(tempString.GetString(byteArray));
            }
        }

       var dynamicObject = Json.Decode(json.ToString());

       Assert.IsNotNull(dynamicObject); 
```

我不知道，我猜是格式？我已经从 json 文件中删除了所有内容（意思是一条巨大的线），我得到了同样的东西。奇怪的是，当我使用 Newtonsoft.Json 时，我没有收到错误，但动态对象只是 AccountId 字符串，没有别的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:36:41.523

您读取 UTF-8 文件的代码是错误的，因为它：

*   由于切割 1024 字节边界，尝试转换可能不完整的字节序列
*   由于忽略最后一段中文件的长度，附加了额外的 0 字节。

考虑使用 StreamReader 或其他一些内置方法从文件中读取字符串。请参阅[How to:Read Text from a File](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)和[File.ReadAllText](http://msdn.microsoft.com/en-us/library/ms143368)了解起点。

```
var dynamicObject = Json.Decode(
  File.ReadAllText(@"c:\users\bryan\Desktop\test2.json")); 
```

# python - 从 virtualenv bin 内部运行 python 脚本不起作用

> ID：11963019
> 
> 赞同：42
> 
> 时间：2012-08-15T01:33:49.103
> 
> 标签：python, virtualenv, rundeck

我有一个希望在全球范围内可用的脚本。我从标准的 hashbang 开始：

```
#! /usr/bin/env python 
```

并将其链接到我的 virtualenv 的 bin 目录中：

```
~/environments/project/env/bin/myscript 
```

并将该目录添加到我的路径中。当我运行命令时：

```
myscript 
```

我收到其中一个库的导入错误。但是，如果我激活虚拟环境并运行脚本，它会按预期工作。

我已经排除了符号链接的问题（我也尝试将脚本移动到 bin 文件夹中）。我也试过用 python 运行脚本

```
python ~/environments/project/env/bin/myscript 
```

以前我使用的是激活环境然后运行我的脚本的脚本，但我的印象是从这个文件夹运行的脚本应该与 virtualenv 的解释器和站点包一起运行。关于为什么这可能不起作用或我可以调试它的一些方法的任何想法？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-15T01:51:21.953

将脚本放入您的 virtualenv 的 bin 中，然后将该 bin 位置添加到您的全局 PATH 将不会自动获取您的 virtualenv。您确实需要先获取它以使其处于活动状态。

您的系统所知道的就是检查可执行文件的额外路径并运行它。该脚本中没有任何内容表明 virtualenv。

但是，您可以将 she-bang 行硬编码到您的 virtualenv python，在这种情况下，站点包将最终出现在路径上：

```
#!/Users/foo/environments/project/env/bin/python 
```

或者另一种选择是简单地创建一个调用原始 pythons 脚本的小型 bash 包装器，这将允许您使用通用 she-bang 保留原始脚本。

所以如果 myscript.py 是： `#!/usr/bin/env python`...

然后你可以做一个`myscript`：

```
#!/bin/bash

/Users/foo/environments/project/env/bin/python myscript.py 
```

当您这样做时`myscript`，它将使用您设置的解释器显式调用您的 python 脚本。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-15T01:52:49.200

我认为您对 virtualenv 的工作方式感到困惑。

简而言之，virtualenv 会修改您的 shell 环境，以便 Python 将在不同的区域查找您要导入的模块。存储虚拟环境的位置与存储在 virtualenv 中运行的源文件的位置之间确实没有任何关系。如果你愿意，你可以将你的 virtualenv 存储在一个名为 ~/environments/my_env 的目录中，以及在 ~/projects/my_proj 中使用你的 virtualenv 时编写的所有源代码。

您可以在文档中阅读更多关于[virtulenv](http://www.virtualenv.org/en/latest/#activate-script)的功能。

真的，唯一告诉 python 在哪里可以找到模块的东西完全基于 python（[请参阅文档](http://docs.python.org/tutorial/modules.html?highlight=module%20import%20path#the-module-search-path)了解它的工作原理）。激活 virtualenv 会改变 python 的工作方式。

您可以返回让 shell 脚本为您激活 virtualenv，或者您可以按照[这个秘籍](http://www.virtualenv.org/en/latest/#using-virtualenv-without-bin-python)直接从您的脚本中激活它。

```
activate_this = '/path/to/env/bin/activate_this.py'
execfile(activate_this, dict(__file__=activate_this)) 
```

如果您选择此路线，请记住文档提供的信息：

> 这将更改 sys.path 甚至更改 sys.prefix，但也允许您使用现有的解释器。您环境中的项目将首先显示在 sys.path 上，然后是全局项目。但是，全局项目将始终可访问（就好像 --system-site-packages 标志已用于创建环境，无论是否使用）。此外，这无法撤消其他环境或已导入模块的激活。例如，您不应该尝试在 Web 请求之前激活环境；您应该尽早激活一个环境，并且不要在该过程中再次激活。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-16T22:49:30.273

你不能只添加一个相对路径吗？这对我有用：

```
#!./env/bin/python 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T05:44:26.897

我遇到了同样的问题并想出了这个解决方案：[https](https://github.com/jabbalaci/wpython) ://github.com/jabbalaci/wpython 。这是一个名为 " `wpython`" 的脚本，它使用 venv 中的本地 Python 解释器调用您的程序。因此，不要写“” `/Users/foo/environments/project/env/bin/python myscript.py`，写“”就足够了`wpython /path/to/myscript.py`。启动器脚本可能如下所示：

```
#!/usr/bin/env bash

cd /the/directory/where/myscript.py/is/located
wpython myscript.py 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-28T14:39:10.267

如果您使用的是 windows，您可以在 python 文件的顶部包含以下行。

```
#! P:\Workspace\pythontut\Scripts python 
```

# python - python - 从 mp3 文件中提取数据

> ID：11963020
> 
> 赞同：0
> 
> 时间：2012-08-15T01:33:53.730
> 
> 标签：python, mp3

我正在寻找一个能够提取 mp3 的实际数据（我们听的实际声音/声音）的 python 库。我希望能够使用数据与另一个 mp3 文件进行比较，而比特率/编码不会影响该过程。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:38:07.320

你可以试试[Echo Nest Remix API](http://code.google.com/p/echo-nest-remix/)。它不是图书馆，但它可能是您正在寻找的东西。或者，您可以测试[PyMedia python 模块](http://pymedia.org/tut/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:46:46.180

Python 具有 wave 和 Wave_read 对象，该对象具有名为 readframes(n) 的函数。它将返回一系列十六进制字符（这些基本上是特定时间声波的响度/幅度）。您可以比较两个 mp3 系列十六进制字符，但您需要注意位深度和通道数，因为流输出取决于它们。类似的东西 - 一个字符用于 8 位单声道信号，两个来自 8 位立体声等。

# java - 使用参数化对象数组的参数调用函数

> ID：11963027
> 
> 赞同：3
> 
> 时间：2012-08-15T01:35:24.367
> 
> 标签：java, generics

我有一个`PictureArrayAdapter`扩展`ArrayAdapter<Pair<String, ImageInitialiser>>`并具有以下构造函数的类：

```
public PictureArrayAdaptor(Context context, Pair<String, ImageInitialiser>[] values) 
```

我们已经明确声明，调用此构造函数时，程序员必须传递 a `Pair<String, ImageInitialiser>[]`，否则可能会发生类型错误。现在，在没有警告的情况下生成这样的对象相当困难：

```
@SuppressWarnings("unchecked")
Pair<String, ImageInitialiser> tableData[] = new Pair[1];
tableData[0]=new Pair<String, ImageInitialiser>("A", new ResourceImageInitialiser(R.drawable.sample1)); 
```

一种可能性是改用列表。但是，为了保持一致性，我想保持所有构造函数与基类*完全相同。*有没有更好的方法来调用这个构造函数？我真的不认为这就是它应该被调用的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T03:52:21.020

另一种方法是创建一个扩展 Pair 的类，例如

```
class NamedImage extends Pair<String, ImageInitialiser> { ... }
class PictureArrayAdapter extends ArrayAdapter<NamedImage> { ... } 
```

**NamedImage**现在是一种可具体化的类型，因此您可以像使用数组一样`NamedImage[]`不受惩罚。此外，它消除了未经检查的异常并简化了所有声明，使它们不再具有嵌套类型参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T01:41:05.183

数组和泛型就像油和水。使用泛型类型的数组无法保证类型安全，因此会出现警告。varargs ( `...`) 也是如此，因为它涉及隐式数组创建。有关原因的详细说明，请参阅[泛型常见问题解答。](http://www.angelikalanger.com/Articles/Papers/JavaGenerics/ArraysInJavaGenerics.htm)

我强烈建议使用参数 a`List`而不是数组。如果超级构造函数必须采用数组，则可以调用`toArray`. `List`一般来说，集合比数组更通用，有些人认为除非绝对必要，否则不应再直接使用数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T02:26:38.753

好的，我已经考虑了一段时间，我意识到我这样做的方式正是这样做的方式。当涉及到通用对象时，列表肯定更好用，但我试图匹配一个接口以保持一致性。

[泛型教程](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)（第15 页）解释了我们不能创建泛型对象数组的原因是这将允许运行时类型错误而没有警告。

```
List<?>[] lsa = new List<?>[10]; // ok, array of unbounded wildcard type
Object o = lsa;
Object[] oa = (Object[]) o;
List<Integer> li = new ArrayList<Integer>();
li.add(new Integer(3));
oa[1] = li; // correct
String s = (String) lsa[1].get(0); // run time error, but cast is explicit 
```

通过使用`@SuppressWarnings("unchecked")`，我们迫使任何接触此代码的人都必须考虑类型安全，而不是依赖编译器。这没什么大不了的，因为在像 Python 这样的语言中，根本没有编译时类型安全。@SuppressWarnings 让程序员清楚地知道他们必须自己管理它，但即使他们错过了这一点，它仍然可以在运行时被捕获。

现在，让我们考虑构造函数。我认为这将是编译器发出警告的好地方，因为声明泛型数组变量和泛型数组参数之间没有太大区别。在这里，我们没有@SuppressWarnings，但我仍然认为类型本身给了程序员足够的警告。此外，最好冒着有人更改这个类引入类型错误的风险，而不是让它只接受一个泛型数组并冒着任何调用者犯类型错误的风险。

# localhost - 特定端口上的 localhost 网站

> ID：11963029
> 
> 赞同：0
> 
> 时间：2012-08-15T01:35:35.327
> 
> 标签：localhost, port

我在我的 macbook 上设置了 php 和 mysql，当我转到 localhost 时，我得到了信息页面，所以我准备开始在我的网站上工作，但我想在特定端口上开发。那么如何让我的服务器监听 localhost:2727 呢？是否有我需要编辑的配置文件？

我使用股票 OS X 网络服务器，所以我相信它的 apache。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:46:03.810

我一直在将我的 vhosts 配置添加到`httpd-vhosts.conf`位于我的文件中`/etc/apache2/extra/httpd-vhosts.conf`。尝试在该文件中添加如下内容：

```
NameVirtualHost *:2727
<VirtualHost *:2727>
     ServerAdmin you@email.com
     DocumentRoot "/Users/you/Sites/"
     ServerName dev.site.com
     ErrorLog "/Users/you/log/apache2/dev-site-error_log"
     CustomLog "/Users/you/log/apache2/dev-site-access_log" common
</VirtualHost> 
```

# php - 显示某些 MySQL 表

> ID：11963033
> 
> 赞同：0
> 
> 时间：2012-08-15T01:35:50.513
> 
> 标签：php, mysql, database, pdo

这是我的 PHP 数据库结构： http: [//pastebin.com/x89AdzfS](http://pastebin.com/x89AdzfS)

我已经尝试了几个小时来使用 PDO 获得 JOIN SQL 查询，但失败了，所以我需要一些帮助。

我需要一个 PDO 查询来显示分配给学生也注册的班级 ID 的所有“作业”（标题和描述）。

如果您需要我说得更具体，请告诉我。谢谢！

**编辑**

这是我做的一个查询，它显示了一个人所在的班级

```
$sql = $db->prepare("SELECT enrollments.*, courses.*, students.* FROM enrollments
LEFT JOIN courses ON enrollments.course_id = courses.id
LEFT JOIN students ON students.id = enrollments.student_id
WHERE enrollments.student_id = ?
");
$sql->execute(array($login_id));

while($row = $sql->fetch(PDO::FETCH_ASSOC))
     {
    echo "<li><a href='class.php?id=".$row['course_id']."'><i class='icon-book'></i>".$row['name']."</a></li>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:49:31.007

这是一个相对简单的连接来完成我认为你所追求的。

```
$sql = $db->prepare("SELECT 
  title, 
  description, 
  courses.name
FROM assignments
JOIN courses ON courses.id = assignments.course_id
JOIN enrollments USING(course_id)
WHERE enrollments.student_id = ?");

$sql->execute(array($login_id)); 
```

我对查询的思考过程是这样的：

1.  决定哪个是“主”表。你说“显示所有作业”，所以它是“作业”
2.  该表是 FROM 之后的第一个表
3.  知道我有某个学生，找到对域逻辑有意义的“student_id”的最短路径
4.  我看到“注册”有一个 student_id，我的作业*和*注册有一个 course_id；这就是我通往 student_id 的道路
5.  加入与分配关系中涉及的因素的注册（当列与 USING() 同名时，SQL 很容易

与您的查询的区别（如我所见）是使用您的绝对目标实体作为原始 FROM 表，然后从那里加入。如果你想要分配，查询应该以 开头`FROM assignments`，然后使用连接来拉入你需要用来限制结果的数据。

# php - SHOW FIELDS FROM mysqltable 没有结果

> ID：11963034
> 
> 赞同：1
> 
> 时间：2012-08-15T01:36:03.540
> 
> 标签：php, mysql

我正在做一个后台项目——我首先实现了添加、更新和删除数据库条目，现在我需要对某些数据类型实施一些特定的操作。所以我想只检索数据类型 $fieldtypes = mysql_query("SHOW FIELDS FROM mysqltable"); 返回 NULL

这就是此时的代码：

```
<?php
$serveur='localhost'; 
$user='root'; 
$password='xxxx'; 
$base='db'; 
$champs=array(
"member"=>array("id","group","login","lastname","firstname","email","pswd","account","searchingfor","searchingfordistance","searchedfor","searchedfordistance","mydescription","groupdescription","searchdescription","resourcesdescription"),
    "place"=>array("id","idm","ids","name","town","postalcode","address","coord")
);

$connexion = mysql_connect("$serveur","$user","$password") or die ("Impossible de se connecter à la base de données");
mysql_select_db("$base",$connexion) or die("Erreur de connexion a la base de donnees");

$fieldtypes = mysql_query("SHOW FIELDS FROM place");

ob_start(); 
var_export($fieldtypes); 
$tab_debug=ob_get_contents(); 
ob_end_clean(); 
$fichier=fopen('gs.log','w'); 
fwrite($fichier,$tab_debug); 
fclose($fichier); 

... (rest of code works) 
```

谁能帮我找出问题所在？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:39:40.927

即使使用类似的元数据查询`SHOW FIELDS`，您仍然需要从结果资源中获取行。它的行为类似于返回行的常规查询，因此`while`像往常一样在循环中获取它们。

```
$fields = array();
$fieldtypes = mysql_query("SHOW FIELDS FROM place");
if ($fieldtypes) {
  while ($row = mysql_fetch_assoc($fieldtypes)) {
    $fields[] = $row;
  }
}
ob_start(); 
// Dump your $fields array
var_export($fields); 
$tab_debug=ob_get_contents(); 
ob_end_clean(); 
```

顺便说一句，当变量没有被插入到字符串中时，用双引号将变量括起来是不必要和多余的：

```
// Don't quote these vars -- it's poor practice
$connexion = mysql_connect("$serveur","$user","$password") 
```

# c++ - 模板实例化时间 typeid()

> ID：11963035
> 
> 赞同：0
> 
> 时间：2012-08-15T01:36:30.623
> 
> 标签：c++, templates

如何在模板实例化时找到模板参数的类型？例如，我希望将以下模板实例化为 2 个不同的函数，具体取决于参数：

```
template <typename T> void test(T a) {
    if-T-is-int {
        doSomethingWithInt(a);
    } else {
        doSomethingElse(a);
    }
} 
```

当用 实例化时`int`，结果函数将是：

```
void test(int a) { doSomethingWithInt(a); } 
```

当用例如实例化时`float`，它将是：

```
void test(float a) { doSomethingElse(a); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:38:58.913

```
template <typename T> void test(T a) {
    doSomethingElse(a);
}

template <> void test(int a) {
    doSomethingWithInt(a);
} 
```

应该可以，但是您需要考虑获得`int &`,`const int`等的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:50:12.803

在您的情况下，听起来您只需要两个重载版本`int`和`float`。描述的其他类型没有行为，因此不需要模板。

```
void test (int i) {
    doSomethingWithInt(i);
}

void test (float f) {
    doSomethingElse(f);
} 
```

如果您确实需要其他类型的案例，请添加一个普通的模板版本。特定的重载优先。例如，[请参见此处](http://ideone.com/ave7I)。

# iphone - iOS屏幕暗淡bug解决方案

> ID：11963040
> 
> 赞同：1
> 
> 时间：2012-08-15T01:37:12.773
> 
> 标签：iphone, ios, cocoa-touch, uiscreen

前几天我问了这个问题：[防止iPhone进入睡眠状态](https://stackoverflow.com/questions/11486036/prevent-iphone-to-sleep)

然后我发现了当按下主页按钮时不能让委托方法将屏幕亮度恢复正常的错误。我环顾四周，看到了一些涉及 imageView 和其他东西的“解决方案”。我的视图有一些按钮和一个 tabBar，我认为这些按钮上的 imageView 不是一个好主意，我需要这些按钮一直工作。

有人对此错误有一些解决方案或替代方案吗？

# javascript - Python - 处理 javascript URL？

> ID：11963043
> 
> 赞同：0
> 
> 时间：2012-08-15T01:37:38.060
> 
> 标签：javascript, python, html, pyquery

我正在尝试下载通过 javascript 请求的页面的 html，通常通过单击浏览器中的链接。我可以下载第一页，因为它有一个通用 URL：

```
http://www.locationary.com/stats/hotzone.jsp?hz=1 
```

但是页面底部的链接是数字（1 到 10）。因此，如果您单击一个，它将转到例如第 2 页：

```
http://www.locationary.com/stats/hotzone.jsp?ACTION_TOKEN=hotzone_jsp$JspView$NumericAction&inPageNumber=2 
```

当我将该 URL 放入我的程序并尝试下载 html 时，它给了我网站上不同页面的 html，我认为它是主页。

当没有特定的 URL 时，如何获取这个使用 javascript 的 URL 的 html？

谢谢。

PS 我正在使用 urllib/urllib2 和 cookielib。

另外，我刚刚发现了一个叫做 PyQuery 的东西？我可以用那个吗？我该怎么做？

代码：

```
import urllib
import urllib2
import cookielib
import re

URL = ''

def load(url):

    data = urllib.urlencode({"inUserName":"email", "inUserPass":"password"})
    jar = cookielib.FileCookieJar("cookies")
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(jar))
    opener.addheaders.append(('User-agent', 'Mozilla/5.0 (Windows NT 6.1; rv:13.0) Gecko/20100101 Firefox/13.0.1'))
    opener.addheaders.append(('Referer', 'http://www.locationary.com/'))
    opener.addheaders.append(('Cookie','site_version=REGULAR'))
    request = urllib2.Request("https://www.locationary.com/index.jsp?ACTION_TOKEN=tile_loginBar_jsp$JspView$LoginAction", data)
    response = opener.open(request)
    page = opener.open("https://www.locationary.com/index.jsp?ACTION_TOKEN=tile_loginBar_jsp$JspView$LoginAction").read()

    h = response.info().headers
    jsid = re.findall(r'Set-Cookie: (.*);', str(h[5]))
    data = urllib.urlencode({"inUserName":"email", "inUserPass":"password"})
    jar = cookielib.FileCookieJar("cookies")
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(jar))
    opener.addheaders.append(('User-agent', 'Mozilla/5.0 (Windows NT 6.1; rv:13.0) Gecko/20100101 Firefox/13.0.1'))
    opener.addheaders.append(('Referer', 'http://www.locationary.com/'))
    opener.addheaders.append(('Cookie','site_version=REGULAR; ' + str(jsid[0])))
    request = urllib2.Request("https://www.locationary.com/index.jsp?ACTION_TOKEN=tile_loginBar_jsp$JspView$LoginAction", data)
    response = opener.open(request)
    page = opener.open(url).read()
    print page

load(URL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:41:35.997

我自己没有使用过它，但我听说过有关[Requests](http://docs.python-requests.org/en/latest/user/quickstart/#passing-parameters-in-urls)的好消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:45:22.877

查看项目 Splinter，也许有用：[http ://splinter.cobrateam.info/](http://splinter.cobrateam.info/)

# string - 冲突字符串编程竞赛

> ID：11963048
> 
> 赞同：0
> 
> 时间：2012-08-15T01:38:41.283
> 
> 标签：string, algorithm

给定一组字符串，比如说

```
ap***
ab*le
a****
ab*** 
```

问题是在给定字符串数量和允许差异的数量的情况下，找出一组字符串是否一致。

因此，对于上述设置，如果我们允许单个不一致的字符串（第二个），答案是“是”，但如果我们不允许不一致的字符串，则答案是“否”。

**什么是最好的算法，复杂度是多少？**

我提出的每一个解决方案要么需要查看每一个组合，要么就是错误的。例如，您不能只通过并将字符串添加到集合（将 distinct 定义为“不兼容”），因为那样 **, ab ad 将通过。

实际问题（来自 ）：问题 M

2417 年，考古学家发现了大量具有重要历史意义的 20 世纪文本文件。尽管有许多重复的文件，但很快就很明显，除了由于时间造成的损坏使大部分文本难以辨认外，它们之间也存在一些分歧。然而，注意到可以使文本组保持一致，即可以通过省略一些（少量）文本来实现文本之间的一致性。例如，文本：

```
ap***
ab*le
app*e
*p\**e 
```

（其中 * 表示难以辨认的字符）可以通过仅删除第二个文本来保持一致。

输入将由一系列文本集组成。每个集合都以一行开始，指定集合中的文本数量，以及可以删除的最大文本数量。接下来是单独的文本，每行一个。每个文本由至少一个且不超过 250 个字符组成，可以是小写字母或星号。一组中的所有文本将具有相同的长度，并且一组中的文本不会超过 10,000 条。集合序列由包含两个零 (0 0) 的行终止。

每个集合的输出由包含单词“是”或“否”之一的行组成，具体取决于是否可以通过最多删除指定数量的文本来使集合保持一致。

```
Sample input
4 1
ap***
ab*le
app*e
*pple
3 1
a
b
c
4 2
fred
ferd
derf
frd*
0 0

Sample output
Yes
No
No 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:08:43.207

这感觉像家庭作业，所以我将省略一些细节。

一个[trie](http://en.wikipedia.org/wiki/Trie)可以很好地处理这个问题。在给定文本包含 的任何索引处`*`，您可以使该文本从 trie 中的所有其他叶子下降。然后你走特里，寻找任何匹配足够文本的终端节点。

trie 最多有`n * m`节点，因此添加另一个文本是`O(nm)`.

构建 trie 也有一个复杂的问题。您必须以正确的顺序添加文本，并且您必须检查每个文本索引的正确顺序。否则，您最终可能会遇到`*b`不包含在终端节点中的情况`ab`。但这样做不会引入任何进一步的算法复杂性。

总时间为`O(mn^2)`。一旦构建好就走树`O(nm)`，添加节点是`O(nm)`为了`n`节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:47:20.370

I propose that you represent a set of consistent strings with a string and a count. The string has a letter at a position where any of the strings in the set has a letter, and an asterisk there otherwise. The count is the number of strings in the set. So {ab**, a*b*} = [abb*, 2].

Start off with a single representation, [****,0].

Each time you see a string X:

1) Add [X,1] to the set of representations

2) If it is consistent with any of the representations so far, create a new representation from the string and the representation - increment the count, and if necessary fix some more letters in the string. Add the new representation to the set of representations.

3) If you now have more than one representation with the same string, keep just one, with the count the maximum of those with that string.

4) Remove representations whose count is less than the number of strings seen so far minus the number of strings you are allowed to leave out.

5) - repeat from (1) with the next string

At the end the most plausible answer, if any, is the one with the largest count. Any consistent answer will have been created. The maximum number of representations on hand at any one time is the maximum number of possible answers at that stage, which is Choose(n, x) where N is the number of strings seen at that point and x is the number of texts you are allowed to discard. If x = 1 this is n(n-1)/2\. You have to do this n times, and the other costs grow only with the length of the string, so I guess you have an O(mn^3) algorithm.

# perl - 无法通过 Perl LWP::UserAgent 选中复选框

> ID：11963049
> 
> 赞同：1
> 
> 时间：2012-08-15T01:38:46.713
> 
> 标签：perl, mailman

我应该如何检查这样的复选框：

```
<td><center><INPUT name="test2%40mydomain.com_notmetoo" type="CHECKBOX" value="off" ></center></td> 
```

使用 Perl 的 LWP::UserAgent 模块？

此代码**不**执行此操作（输出就好像它是在未选中复选框的情况下提交的 - 即网页被刷新并且复选框被清除）。

```
#!/usr/bin/perl
use LWP::UserAgent;

$ua = new LWP::UserAgent;
$ua->cookie_jar({ file => "$ENV{HOME}/.mailmanrc" });

$res = $ua->post('http://mydomain.com/mailman/admin/test1_mydomain.com/members/list',
    Content_Type => 'form-data',
    Content => [
        'test2%40mydomain.com_notmetoo' => 'on',
        setmemberopts_btn => 'Submit Your Changes'
    ]
);
if ($res->is_success) {
    print $res->decoded_content;
    print "Changed user setting...I hope!\n";
}
else {
    die $res->status_line;
} 
```

我不确定为什么元素名称中的“@”由“%40”表示（有什么想法吗？），但我也尝试过： **'test2\%40mydomain.com_notmetoo' => 'on'，** 和 **' test2@mydomain.com_notmetoo' => 'on'，** 没有成功。

网站上似乎没有 JavaScript（即它在禁用 JavaScript 的浏览器中运行良好）。我只是无法让它在 Perl 中工作。

谢谢。

特里。

* * *

更新 #1：这是我在检查 Test2 的 notmetoo 框后提交时来自 Firefox 的“篡改数据”扩展的 POSTDATA 值：

```
POSTDATA =-----------------------------2921376274802
Content-Disposition: form-data; name="findmember"

-----------------------------2921376274802
Content-Disposition: form-data; name="test1%40mydomain.com_realname"

Test1
-----------------------------2921376274802
Content-Disposition: form-data; name="user"

test1%40mydomain.com
-----------------------------2921376274802
Content-Disposition: form-data; name="test1%40mydomain.com_hide"

on
-----------------------------2921376274802
Content-Disposition: form-data; name="test1%40mydomain.com_notmetoo"

on
-----------------------------2921376274802
Content-Disposition: form-data; name="test1%40mydomain.com_plain"

on
-----------------------------2921376274802
Content-Disposition: form-data; name="test1%40mydomain.com_language"

en
-----------------------------2921376274802
Content-Disposition: form-data; name="test2%40mydomain.com_realname"

Test2
-----------------------------2921376274802
Content-Disposition: form-data; name="user"

test2%40mydomain.com
-----------------------------2921376274802
Content-Disposition: form-data; name="test2%40mydomain.com_hide"

on
-----------------------------2921376274802
Content-Disposition: form-data; name="test2%40mydomain.com_notmetoo"

off
-----------------------------2921376274802
Content-Disposition: form-data; name="test2%40mydomain.com_plain"

on
-----------------------------2921376274802
Content-Disposition: form-data; name="test2%40mydomain.com_language"

en
-----------------------------2921376274802
Content-Disposition: form-data; name="test3%40mydomain.com_realname"

Test3
-----------------------------2921376274802
Content-Disposition: form-data; name="user"

test3%40mydomain.com
-----------------------------2921376274802
Content-Disposition: form-data; name="test3%40mydomain.com_hide"

on
-----------------------------2921376274802
Content-Disposition: form-data; name="test3%40mydomain.com_plain"

on
-----------------------------2921376274802
Content-Disposition: form-data; name="test3%40mydomain.com_language"

en
-----------------------------2921376274802
Content-Disposition: form-data; name="setmemberopts_btn"

Submit Your Changes
-----------------------------2921376274802
Content-Disposition: form-data; name="allmodbit_val"

0
-----------------------------2921376274802-- 
```

这对任何人帮助我有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:58:31.970

My understanding of checkboxes is that the `value=` specifies the value which the variable will have when the checkbox is checked. So your confusing `value="off"` actually means thay you need

```
'test2%40mydomain.com_notmetoo' => 'off' 
```

To indicate that the box is checked.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:31:56.463

在您的情况下，复选框在选中时将具有“关闭”值。如果 value 类似于`value="checkbox1"`. 在这种情况下，复选框的值将被`checkbox1`选中。

此外，考虑使用`WWW::Mechanize`像这样的基本 Web 操作（没有 javascript），它更容易和直观，也是`WWW::Mechanize`一个子类，`LWP::UserAgent`所以你仍然可以使用 LWP 的方法。

# android - Android：Galaxy S 和 S3 上的布局不同

> ID：11963055
> 
> 赞同：0
> 
> 时间：2012-08-15T01:39:13.067
> 
> 标签：android

我正在构建一个简单的 Android 应用程序，但我无法让布局在 Galaxy S (480x800) 和 Galaxy S3 (720x1280) 上看起来都不错。这是它现在在 S 上的外观（这就是我希望它的外观）：

![在此处输入图像描述](../Images/da4b005d3d75faa3b0fc21c5654909e1.png)

在 S3 上：

![在此处输入图像描述](../Images/1c651eb139d420a726c36d8da724c4c8.png)

如您所见，有两处错误：S3 上的上边距不够，以及重新调整大小后按钮太小。不过，我到处都在使用“dp”。

我相信这两个屏幕都被认为是“正常”大小，所以创建一个“layout-large”文件夹来调整边距是行不通的，对吧？

我能想到的唯一其他选择是在我的代码上创建 IF，检查特定手机型号，并相应地调整边际值。这行得通，还是有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:08:06.047

它不仅仅是关于使用 dp。你会想要使用 android 提供的多种技术来实现屏幕独立性。

因此，如果我要创建此布局，我会执行以下操作。使用 RelativeLayout 作为父视图。将徽标/标题添加到顶部，并使用一些 dp 作为顶部和水平中心的填充。添加一个带有draw 9背景版本的框的线性布局，在线性布局内我将添加三个按钮。然后在此下方或与 RelativeLayout 的底部对齐，我将添加问题按钮。

下面是一堆如何使用其中一些工具的链接。

相对布局 [http://developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)

画九的 [http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

线性布局 [http://developer.android.com/guide/topics/ui/layout/linear.html](http://developer.android.com/guide/topics/ui/layout/linear.html)

编辑如上面的 t0mm13b 指出的，这也是一个很好的阅读链接。 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# windows - 如何在 Windows 中发布 Bonjour 服务？

> ID：11963056
> 
> 赞同：2
> 
> 时间：2012-08-15T01:39:18.607
> 
> 标签：windows, bonjour

我知道如何在 Mac Os 上发布 Bonjour 服务，但我不知道如何在 Windows 中执行此操作。

有人可以帮助我吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:07:45.047

1.  对于 Window，一种解决方案是“为窗口安装 bonjour”。
2.  然后，在window下使用C API进行开发。
3.  请参考 Apple 的 bonjour SDK 页面。他们在那里为 Windows 提供了一个 SDK。

# rdf - 如何编码一个简单感兴趣的 RDF/XML

> ID：11963060
> 
> 赞同：3
> 
> 时间：2012-08-15T01:39:43.140
> 
> 标签：rdf, owl, rdfs, foaf

我是一个编写 RDF 模式的初学者，我想知道我应该如何充分利用 URI 概念并创建一个简单感兴趣的 RDF 文档。我正在尝试创建以下语句的 RDF-

```
Jeffy is a Graduate student
Jeffy likes yoga
Jeffy is seeking Tennis. 
```

我应该如何根据这三个句子编写 RDF。对此的任何了解都会非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T02:21:10.257

我可以建议您不要使用 RDF/XML 吗？学习手写是一种相当复杂的语法格式。您最好使用[Turtle](http://www.w3.org/TeamSubmission/turtle/)语法之类的东西编写 RDF，在这种情况下，您的示例将类似于：

```
@prefix my: <http://example.org/mynamespace/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

my:jeffy rdf:type my:GraduateStudent ;
         my:likes my:yoga ;
         my:isSeeking my:Tennis . 
```

如果出于某种原因必须拥有 RDF/XML，请考虑使用任何 RDF 解析器工具包（OpenRDF Sesame、Apache Jena、dotNetRDF 等）从一种语法转换为另一种语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T02:18:10.907

您可以使用 OWL 而不是 RDF，因为：

1) 它是 RDF 的超集

2) 更强大

例如：

```
<?xml version="1.0"?>

<!DOCTYPE rdf:RDF [
  <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
  <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
  <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
  <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
  <!ENTITY base "http://www.example.com/example/" >
  ]>

<rdf:RDF
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
   xmlns:owl="http://www.w3.org/2002/07/owl#"
   xmlns:base="http://www.example.com/example/"
   >

  <owl:Class rdf:about="#GraduateStudent" />

  <owl:DatatypeProperty rdf:about="&base;Likes">
    <rdfs:domain rdf:resource="&base;GraduateStudent" />
    <rdfs:range rdf:resource="string" />
  </owl:DatatypeProperty>

  <owl:DatatypeProperty rdf:about="&base;IsSeeking">
    <rdfs:domain rdf:resource="&base;GraduateStudent" />
    <rdfs:range rdf:resource="string" />
  </owl:DatatypeProperty>

  <base:GraduateStudent rdf:about="&base;GraduateStudent/001">
    <base:Likes>yoga</base:Likes>
    <base:IsSeeking>Tennis</base:IsSeeking>
  </base:GraduateStudent>

</rdf:RDF> 
```

您会注意到，模型和数据在同一个文件中。

3个重要特点：

1）类：声明一个类

2）DatatypeProperty：声明一个文字属性

3）ObjectProperty（不在此处）：声明到语义图另一个节点的链接

在您的情况下，您可以创建一个“运动”类，通过 ObjectProperty 更改 DatatypeProperty，更新范围并创建 2 个运动的实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T16:39:40.067

**泡沫**：

您可以将[foaf:Person](http://xmlns.com/foaf/spec/#term_Person)用于“Jeffy”（您可以使用[foaf:name](http://xmlns.com/foaf/spec/#term_name) resp. [foaf:givenName](http://xmlns.com/foaf/spec/#term_givenName) resp. [foaf:nick](http://xmlns.com/foaf/spec/#term_nick)给出名称）。

您可以使用[foaf:interest](http://xmlns.com/foaf/spec/#term_interest)来表示对瑜伽的兴趣（不过，您必须使用代表“瑜伽”的[foaf:Document ；请参阅](http://xmlns.com/foaf/spec/#term_Document)[foaf:isPrimaryTopicOf](http://xmlns.com/foaf/spec/#term_isPrimaryTopicOf)）。或者你可以使用[foaf:topic_interest](http://xmlns.com/foaf/spec/#term_topic_interest)（范围是`owl:Thing`）。

作为一名研究生可以（也许！）用[foaf:Group](http://xmlns.com/foaf/spec/#term_Group)建模。

* * *

请参阅[Wikipedia 中的示例](http://en.wikipedia.org/wiki/FOAF_%28software%29#Example)，它位于 Turtle 序列化中。

# gnuplot - 在gnuplot的直方图中添加误差线

> ID：11963062
> 
> 赞同：5
> 
> 时间：2012-08-15T01:39:57.577
> 
> 标签：gnuplot, histogram

我有看起来像这样的数据文件

```
#col 1     2     3     4     5     6     7
#bench                 #these are max and min values 
#mark     #bar1 #bar2  #for the prevoius 2 values 
NOSHARE.2 43032 139412 100 45000 130000 140000
FALSE_SHARE.2 7035 24101 5000 7500 24100 25000
SHAREDVAR.2 11316 10248 10000 12000 10000 12000 
```

我能够使用 gnuplot 生成一个图形，看起来像这样 ![在此处输入图像描述](../Images/35500dbae5d2a011d290a0351b554ed4.png)

我需要将最大值和最小值作为错误栏添加到每个栏

这是我的 gnuplot 脚本

```
set output "truevsfalse.png"
set title " TRUE VS FALSE SHARING "
set boxwidth 0.9 absolute
set style fill   solid 1.00 border lt -1
set key inside right top vertical Right noreverse noenhanced autotitles nobox
set style histogram clustered gap 5 title  offset character 0, 0, 0
set datafile missing '-'
set style data histograms
set xtics border in scale 0,0 nomirror rotate by -45  offset character 0, 0, 0
set xtics  norangelimit
set ylabel "NUMBER      OF      SHARING"
set xlabel "BENCHMARK"
plot 'truevsfalse.dat'  using 2:xtic(1)  title "true(synced and nonsynced)sharing (both vcpus)" , '' u 3   title "false sharing (both vcpus)" 
```

我试过这个

```
plot 'truevsfalse.dat'  using($0- .05):2:4:5:xtic(1) with boxerrorbars  title "true(synced and nonsynced)sharing (both vcpus)" , '' using ($0+0.25):3:6:7 with boxerrorbars  title "false sharing (both vcpus)" 
```

但是失败了，我要么只得到没有直方图条的误差条，要么尝试修改一点图像损坏。
我在做什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:30:32.760

基本上，您需要叠加直方图和误差线图，但是，我看到问题是 using `xtic(1)`，这使得在箱线图上叠加误差线图变得困难。

```
set xtics ('NOSHARE.2' 0, 'FALSE_SHARE.2' 1, 'SHAREDVAR.2' 2)
set bs 0.2 # width of a box
plot 'junk' u ($0-bs/2):2:(bs) w boxes title "true(synced and nonsynced)sharing (both vcpus)", \
     'junk' u ($0-bs/2):2:4:5 w yerror notitle, \
     'junk' u ($0+bs/2):3:(bs) w boxes title "false sharing (both vcpus)", \
     'junk' u ($0+bs/2):3:6:7 w yerror notitle 
```

# java - java - 对象和“.class”使用

> ID：11963064
> 
> 赞同：1
> 
> 时间：2012-08-15T01:40:26.863
> 
> 标签：java, object

我是一个新手，我已经涵盖了 Java 的所有基本概念。到目前为止，我遇到过使用 Object 类和使用“.class”语法创建对象引用的示例。

我试图寻找关于如何使用这两个概念的解释，但我没有得到清晰的画面。

我所看到的是，是的，我们可以创建对 Object 的引用。**但是这个参考是如何/用于什么的？**

对于**.class语法，我一直看到“反射”这个词，但是当我在像****existingclass.class**这样的现有类上使用这种语法时，真正发生了什么？**是否只是在 < existingclass** >中使用方法/数据而不创建实例/对象？

示例将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T01:48:11.790

1.  对的引用`Object`可以指向*任何*对象；它可以在不同时间指向不同种类的对象。当您想要传入任何类型的对象时，它是一个很好的方法参数类型，当您希望能够返回任何类型的对象时，它是一个很好的返回类型。

2.  符号*ClassName*返回一个代表*ClassName*`.class`的实例。对于 Java 虚拟机中加载的每个类，都有一个对象来表示该类。至于它有什么用——它只适用于相当高级的、神奇的东西，比如编写询问类有哪些方法的代码，或者当你只有用户输入的类的名称时创建一个类的实例或从文件中读取。`java.lang.Class`*`java.lang.Class`*

     *此外，当您了解*线程*时，您会发现类对象对于静态方法具有特殊用途；你现在不必担心。作为初级 Java 程序员，您无需使用它；不过，总有一天，你可能会。* 

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:15:07.573

这个词`Java`有三个意思：

1.  一种编程语言；
2.  虚拟机（JVM）规范；
3.  以及 Java 应用程序的运行时环境。

从编程语言的角度来看，它定义了语法和句法。它提供了有关如何使用该语言的说明。要了解`.class`，您最好参考 JVM 规范（是的，它已经超出了语言范围）。

粗略地说，您的程序被彻底编译成`.class`字节码格式的文件，包括固有的超类名称、实现的接口以及最重要的编译代码等。

运行程序时，所有`.class`有助于其完成的 s 都应加载到 JVM 中。IIRC，类在您的程序第一次引用它们时加载，而不是在程序运行时加载，例如在导入指令中或通过`.class`代码中的直接引用。

So to answer your question, the `.class` syntax is not only used to refer class information, e.g. method definitions or static variables, but also enforce JVM load specific class. (If you are familiar with JDBC or have a chance play with it in the future, you will find `.class` syntax can be used to enforce loading a database driver)*

# javascript - 如何一次性将元素附加到dom中

> ID：11963065
> 
> 赞同：0
> 
> 时间：2012-08-15T01:40:26.483
> 
> 标签：javascript, jquery

如何一次性将元素附加到 dom 中？正如您从下面的代码中看到的那样，我将内容附加到循环内的根元素（tr_next）中。

```
$('.abc').each(function(){
  //create element code here
  var tr_next = $("<tr>");
  var td_contact_fname = $("<td>").attr({"width" : "190px" , "align" : "center"});

  td_contact_fname.appendTo(tr_next);
  td_contact_lname.appendTo(tr_next);
  td_month.appendTo(tr_next);
  td_day.appendTo(tr_next);
  td_email.appendTo(tr_next);
}); 
```

我在 vimeo 看过这个视频：[浏览器是如何在内部工作](http://vimeo.com/44182484)的，他们说在将内容附加到 dom 时，你应该一次性完成，因为浏览器需要执行大量的重绘（或类似的事情），这会影响性能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T01:42:32.893

该`.append`函数可以接受多个 jQuery 对象作为参数：

```
tr_next.append(td_contact_fname,td_contact_lname,td_month,td_day,td_email); 
```

这是否真的通过一个操作执行所有附加，我不确定，但如果有办法优化多个附加，我会假设 jQuery 团队已经实现了它。

至少它会清理你的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T01:54:36.617

```
var tr_next = $("<tr>");
var td_contact_fname = $("<td>").attr({"width" : "190px" , "align" : "center"});
var groupby = td_contact_fname.add(td_contact_lname,td_month,td_day,td_email);

$('.abc').each(function(){
    tr_next.append(groupby.clone())
}); 
```

编辑：不要忘记克隆元素；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T02:07:37.220

您可以创建元素而不将它们附加到 DOM：

`var $_container = $('<div id="someContainerId" />');`

现在，您可以在每次向实际容器添加新内容然后附加容器时循环或执行逗号操作或其他内容，而不会导致回流，从而仅触发一个回流而不是一大堆。

对于非 jQuery 方法，我建议查找 documentFragment。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T02:12:39.547

[jQuery Fundamentals](http://jqfundamentals.com/#chapter-9)对此有一些方便的指导。

像您的示例这样的循环以及最终使用“追加（项目1，项目2）”发生的事情是最慢的。

您可能想要创建一个文档片段，将所有内容附加到其中，然后在循环完成后，将片段附加到正文：

```
 var frag = document.createDocumentFragment();
   $('abc').each(function() {
      frag.appendChild(/*Stuff you want to append */);
   }
   $("<tr>").appendChild(frag); 
```

或者使用循环构建一个html字符串并像这样追加

```
 $('<tr>').html(myHtmlString) 
```

# python - Python / Scipy“标量变量的索引无效”

> ID：11963067
> 
> 赞同：5
> 
> 时间：2012-08-15T01:40:40.113
> 
> 标签：python, optimization, numpy, scipy

我正在使用 Scipy 优化模块，特别是 **fmin_tnc** 和 **fmin_l_bfgs_b**。但是，在使用其中任何一个时，我都会收到消息“IndexError：标量变量的索引无效”。

这个错误的原因是什么？

这个错误信息的含义是什么？

我的练习代码：

```
def f01(para):
    para1, para2 = para
    return 1+ (para1 -1)**2 + (para2 -2)**2

para0 = np.array([10, 10]) 
mybounds = [(-40,30),(-20,15)]

opt.fmin_l_bfgs_b(f01, para0,  bounds = mybounds ) 
```

返回：

```
Traceback (most recent call last):
  File "C:\Python27\mystuff\practice_optimize01.py", line 78, in <module>
    opt.fmin_l_bfgs_b(f01, para0,  bounds = mybounds )

  File "C:\Python27\lib\site-packages\scipy\optimize\lbfgsb.py", line 174, in fm
in_l_bfgs_b
**opts)

  File "C:\Python27\lib\site-packages\scipy\optimize\lbfgsb.py", line 294, in _m
 inimize_lbfgsb
    f, g = func_and_grad(x)

  File "C:\Python27\lib\site-packages\scipy\optimize\lbfgsb.py", line 249, in fu
nc_and_grad
    f = fun(x, *args)

  File "C:\Python27\lib\site-packages\scipy\optimize\optimize.py", line 55, in _
_call__
    self.jac = fg[1]
IndexError: invalid index to scalar variable. 
```

Python 2.7.3，32 位。麻木 1.6.2。Scipy 0.11.0b1。Windows XP 和 Vista。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T02:36:14.390

fmin_l_bfgs_b 期望您的函数返回函数值**和**梯度。您只返回函数值。

如果只返回函数值而不提供梯度，则需要设置 approx_grad=True 以便 fmin_l_bfgs_b 使用数值近似值。

请参阅文档字符串中的选项说明。

根据我对文档的阅读， fmin_tnc 在您的情况下具有相同的模式和相同的问题。

# html - 不同的垂直对齐方式 Chrome 与 Firefox (blockquote:before)

> ID：11963068
> 
> 赞同：2
> 
> 时间：2012-08-15T01:40:58.290
> 
> 标签：html, css, google-chrome

我正在尝试创建一个纯 CSS 块引用样式。问题是：使用 blockquote:before 创建的引号在 Chrome 中比在 Firefox 和 IE9 中的对齐更低。欢迎任何帮助，我一无所知:(

JSFiddle：http: [//jsfiddle.net/w3A7h/3/](http://jsfiddle.net/w3A7h/3/)

有没有一种简单的方法可以只为 Chrome 制定 CSS 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:50:59.900

在这种情况下，您应该做的第一件事是使用[重置样式表](http://meyerweb.com/eric/tools/css/reset/)使您的元素在默认情况下在浏览器之间呈现更加相同。这将为您节省大量的调试时间，因为它会让很多类似的问题消失。

也就是说，试试这个：

[http://jsfiddle.net/AWJyW/](http://jsfiddle.net/AWJyW/)

我将引用样式从位于块引用之外的位置更改为位于`<p>`内部第一个标记之前。然后我将位置更改为相对，将其向左浮动，并设置负边距以阻止它使文本变形。这样做的原因是，虽然 Chrome 和 Firefox 显然不同意从哪里开始绝对定位的边界，但它们就内部边界的位置达成了一致：

```
blockquote p:first-child:before {
        color: #ededed;
        content: "\201C";
        display: block;
        font-family: Georgia,serif;
        font-size: 110px;
        left: -56px;
        margin-right: -40px;
        position: relative;
        float: left;
        top: -30px;
    } 
```

# android - google play 上的应用程序未在某些 android 设备上显示

> ID：11963071
> 
> 赞同：1
> 
> 时间：2012-08-15T01:41:45.183
> 
> 标签：android, google-play

我昨天发布了我的申请。几个小时后，我使用 Firefox 检查了 Google Play 网站，它就在那里。我检查了它并将其下载到我的索尼爱立信 Xperia 手机上。但是我的两个使用三星 Galaxy 手机的朋友没有看到它在 Google Play 上发布。

每次我检查名称时都会显示 0 个结果？

我发布应用程序的方式有问题吗？

请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:35:56.590

我的一个朋友也有同样的问题。但是我不知道她做了什么。在这里检查这个.. [http://developer.coronalabs.com/forum/2011/10/25/app-not-showing-android-market-search-all](http://developer.coronalabs.com/forum/2011/10/25/app-not-showing-android-market-search-all)我希望它有帮助.. 祝你好运

哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇 我认为您的问题是您访问了朋友 android 设备上的不同图标。也许您访问的是应用程序而不是谷歌播放图标。请检查一下。

# regex - 使用正则表达式取消注释特殊标记（仅当它出现在 /* */ 样式注释中时）。在 perl 单行

> ID：11963072
> 
> 赞同：-2
> 
> 时间：2012-08-15T01:41:45.883
> 
> 标签：regex, perl

我很想写一个正则表达式来在多行 c 风格的注释中找到一个标记并将其从注释中删除。例如做如下变换：

```
/*
 * comments
SpecialToken
 * commetns
*/ 
```

->

```
/*
 * comments */
SpecialToken
 /** comments
*/ 
```

每当在源文件中找到上述内容时。

我在网上（http://ostermiller.org/findcomment.html）找到了一个匹配 /* */ 样式注释的正则表达式：

```
/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/ 
```

我的特殊标记类似于：\nSpecialToken\n，我编辑了以前的正则表达式以获得以下内容：

```
/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*cloneVerifierMarker_39843829489349873478202370870872077223082([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/ 
```

然后，我将 perl 单线从评论中删除：

```
perl -pi -e 'BEGIN{undef $/;} s/(\/\*(?:[^*]|[\r\n]|(?:\*+(?:[^*\/]|[\r\n])))*)\ncloneVerifierMarker_39843829489349873478202370870872077223082\n((?:[^*]|[\r\n]|(?:\*+(?:[^*\/]|[\r\n])))*\*+\/)/$1\*\/\ncloneVerifierMarker_39843829489349873478202370870872077223082\n\/\*$2/g' temp/file 
```

它的工作原理是从评论中删除标记，但它似乎也能找到特殊标记不在评论中的情况。例如：

以下文件中注入了两个 SpecialToken，一次在注释内（第 34 行），一次在注释外（第 2342 行）：

[http://pastebin.com/Yq185G8g](http://pastebin.com/Yq185G8g)

在我运行 perl one-liner 后，我得到以下信息：

[http://pastebin.com/LYftGBX1](http://pastebin.com/LYftGBX1)

特殊标记已成功从评论中删除，但即使第二个实例不在评论中，仍会处理它。

我不确定为什么会发生这种情况:(。

我这样做的原因是我需要在源代码的转换中跟踪一段代码。这些转换会删除注释，因此如果将特殊标记注入到注释中，我需要将其从中删除。

谢谢你的帮助 ：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:35:53.470

我相信你正在寻找这个正则表达式：

```
s/(\/\*)(?:(?!.*?\*\/.*?SpecialToken)(.*?)(SpecialToken)(.*?))(\*\/)/$1$2\*\/$3\/\*$4$5/gs; 
```

[在这里](http://ideone.com/H5WpQ)测试代码。

# objective-c - NSURL 无法识别的选择器

> ID：11963073
> 
> 赞同：0
> 
> 时间：2012-08-15T01:41:48.103
> 
> 标签：objective-c, ios, cocoa-touch, nsdata

我在课堂上有一个功能：

```
-(void)receiveFileName:(NSNotification *) notification {
[self dismissViewControllerAnimated:YES completion:nil];
NSString *selectedFileURL = [notification.userInfo valueForKey:@"selectedFile"];
NSString *fileName = [[selectedFileURL lastPathComponent] stringByDeletingPathExtension];
NSData *fileData = [NSData dataWithContentsOfFile:selectedFileURL]; 
```

}

它从表视图控制器接收文件目标 url，我需要它来生成文件名字符串和 NSData，但我做了一些调试，它被 NSData 部分捕获并给我这个错误：

-[NSURL getFileSystemRepresentation:maxLength:]: 无法识别的选择器发送到实例 0x1f507830

当我打印 selectedFileURL 我得到

```
2012-08-14 21:58:01.309 Share Me[4546:907] file://localhost/var/mobile/Applications/B87D9131-2E73-4117-9EE8-32EA7E19127D/Documents/mza_9195653795305984944.320x480-75.jpg 
```

当我打印文件名时，我得到：

```
2012-08-14 21:58:01.309 Share Me[4546:907] mza_9195653795305984944.320x480-75.jpg 
```

我尝试使用 alloc 和 init 但这并没有解决问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:09:44.917

selectedFileURL 是一个 NSURL 实例，而不是一个 NSString - 您可能误解了您正在使用的框架/库的文档。快速解决方案：

```
NSData *fileData = [NSData dataWithContentsOfURL:selectedFileURL];

NSData *fileData = [NSData dataWithContentsOfFile:[selectedFileURL path]]; 
```

等等

提示：您可能已经知道该对象不是字符串，而是开头的 URL 对象`file://`- 这是文件的特殊 URL 方案；包含路径的 NSString 实例不以此前缀开头，它们是普通的形式`/path/to/file.ext`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:05:17.377

验证字符串变量（例如 selectedFileURL）不是`NSURL`s。你可以使用`isKindOfClass:`，像这样：

```
assert([selectedFileURL isKindOfClass:[NSString class]] && "not actually a string!"); 
```

# php - 如何使用 ksoap2-android 正确调用我的 PHP 网络服务？

> ID：11963078
> 
> 赞同：6
> 
> 时间：2012-08-15T01:42:47.870
> 
> 标签：php, android, soap, android-ksoap2

到目前为止，我已经创建了一个 PHP 客户端和一个 VB.NET 客户端，它们都成功地调用了我的 PHP Web 服务。为了让后者工作，我需要使用[SourceForge](http://www.soapui.org/Getting-Started/your-first-soapui-project.html)的 SoapUI 工具。它告诉我我的 wsdl 不符合 WS-I。我不需要 Pro 版本以交互方式测试我的服务，因为它允许您直接编辑肥皂请求。修复我的 WSDL 并让我的 VB.Net 客户端运行 android 后仍然是一个问题。

我还[附上了 ksoap2-andriod 的源代码，](https://github.com/mosabua/ksoap2-android/downloads)以便在调试时逐步完成。它有一点帮助，但有一些捆绑的依赖项不包括源代码，特别是“kxml2 v1.6”。如果有人能指出我的源 zip 或 Jar，我将不胜感激。

这是我从我的 android 客户端调用 PHP Web 服务时无法克服的错误。

```
 org.xmlpull.v1.XmlPullParserException: expected: START_TAG   {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <definitions name='naturallyIrrationalsoapserver' targetNamespace='http://www.naturallyIrrational.com'>@10:42 in java.io.InputStreamReader@44dce560) 
```

它告诉我它无法解析 WSDL\XML - 位置 @10.42 是开始定义标记的结尾。

我相信，由于现在 WS-I 中的 WSDL 符合 Ksoap2 的解释，因此问题在于使用此服务命名空间定义。这是我用来调用它的android客户端代码。

```
public class SoapClientActivity extends Activity {
      @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView tv = (TextView) findViewById(R.id.myText);
        String soapResponse="";
        final String METHOD_NAME = "getArrval";
        final String SOAP_ACTION = "http://www.naturallyIrrational.com/naturallyIrrationalsoapserver.wsdl";
        final String NAMESPACE = "http://www.naturallyIrrational.com"; 
```

*** 下一行不正确，应指向 [http://www.naturallyIrrational.com/naturallyIrrationalsoapserver.php](http://www.naturallyIrrational.com/naturallyIrrationalsoapserver.php) ***

```
 final String URL = "http://www.naturallyIrrational.com/naturallyIrrationalsoapserver.wsdl";

        if (InternetStatus.getInstance(this).isOnline(this)) {

            try{                            
                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

                    PropertyInfo pi = new PropertyInfo();
            pi.setName("valname");
            pi.setValue("rt2");
            pi.setType(String.class);
            request.addProperty(pi);    

                 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);  
                    envelope.dotNet=false;
                    envelope.setOutputSoapObject(request); 
                    HttpTransportSE andHttpTransport = new HttpTransportSE(URL); 
                    andHttpTransport.debug = true;
                    andHttpTransport.call(SOAP_ACTION, envelope); 
```

*** 返回这个值有问题，已经接收到，但是从 ksoap 传回时抛出错误 ***

```
 soapResponse = (String) envelope.getResponse();  //Exception is thrown here  
                        String strrequest = andHttpTransport.requestDump;
                        String strresponse = andHttpTransport.responseDump;

            }catch(Exception e){soapResponse = "Nope not working "+"\n\n" + e.getMessage() + "/n/n" + e.getStackTrace() ;}
            } else {soapResponse="You are not online"; }   

        tv.setText(soapResponse);    
    }
} 
```

如果我在做一些愚蠢的事情并且有人可以指出我会很感激。

有没有像 PHP 那样在 Android 中不缓存和重用 wsdl 的指令？

也许使用网豆会有所帮助，那是我有时间的下一个。如果有人可以在此期间提供帮助，请不要犹豫提出建议。

```
<?php
class naturallyIrrational {
  private $arrval = array("pi" => 3.1415,"e" =>  2.7183, "rt2" => 1.414, "phi" => 1.618 );  
  function getIrrationalvalue($valname) {
$myFile = "logFile.html";
$fh = fopen($myFile, 'a') or die("can't open file");
$datq = date('m/d/Y h:i:s a', time());
fwrite($fh, $datq);
if (isset($this->arrval[$valname])) {

$stringData = " ".$valname." = ".$this->arrval[$valname]."<br/>";
fwrite($fh, $stringData);
fclose($fh);      
return $this->arrval[$valname];
    } else {
    throw new SoapFault("Server","Unknown Symbol '$valname'.");
    }
  }
}
$server = new SoapServer("naturallyIrrational.wsdl");
$server->setClass("naturallyIrrational");
$server->handle(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T03:26:00.197

我发现 URL 字符串需要指向公共 php.ini 文件。

`final String URL = "http://www.naturallyIrrational.com/naturallyIrrationalsoapserver.php"`;

真的很简单的事情在3周后结束。下载源代码是必不可少的，因为它让我可以看到服务正在运行。关于传递参数还有另一个问题，如下所示：

```
PropertyInfo pi = new PropertyInfo();
pi.setName("valname");
pi.setValue("rt2");
pi.setType(String.class); 
```

但这是一个不同的问题。

谢谢您的意见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T15:02:34.910

我最近开发了一个 Restful Web 服务。将 Web 服务开发为 SOAP 以外的其他方式的原因有很多。我在 SOAP 上做了一个非常小的项目，只是为了了解全局，然后转向在 restful 上进行开发，因为它更有优势。为开发这两种模型，Netbeans IDE 提供了非常方便的设施。阅读 [Web 服务学习路径](http://netbeans.org/kb/trails/web.html)

该链接以非常简单的方式包含restful和SOAP / WDSL Web服务开发......希望这会有所帮助。

# java - 实现 Comparable 时的名称冲突

> ID：11963084
> 
> 赞同：2
> 
> 时间：2012-08-15T01:44:25.900
> 
> 标签：java, comparable, name-clash

我不是 Java 专家，但我通常可以找出使用它时遇到的错误。然而，这个特别的让我摸不着头脑。

我有以下课程（为了便于阅读这篇文章，删除了不必要的绒毛）

```
package miui.content.res;

import android.app.ActivityManagerNative;
import android.app.IActivityManager;
import android.content.res.Configuration;
import android.os.Parcel;
import android.os.RemoteException;
import java.util.Collections;
import java.util.HashSet;
import java.util.Set;

public class ExtraConfiguration
    implements Comparable<ExtraConfiguration>
{
    public int themeChanged;

    public int compareTo(ExtraConfiguration that)
    {
        return this.themeChanged - that.themeChanged;
    }
} 
```

对我来说，这似乎很简单，但在编译时我收到以下错误：

```
out/target/common/obj/JAVA_LIBRARIES/android_stubs_current_intermediates/src/miui/content/res/ExtraConfiguration.java:2: 
name clash: 
    compareTo(java.lang.Object) in miui.content.res.ExtraConfiguration and 
    compareTo(T) in java.lang.Comparable<miui.content.res.ExtraConfiguration> 
    have the same erasure, yet neither overrides the other 
```

我对擦除的概念做了一些复习，我在代码片段中显示的 compareTo() 方法是 ExtraConfiguration 类中唯一的一个。在这一点上，我不确定问题是什么。

这个特定的类来自一个名为 MIUI 的 ROM 的 Android 框架，我试图从一些反编译的源中复制它。与此同时，我只是简单地删除了'实现可比

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:56:55.100

你应该能够这样做来解决它，但我无法解释为什么你会收到错误：

```
public class ExtraConfiguration
    implements Comparable<Object>
{
    public int themeChanged;

    public int compareTo(Object that)
    {
        if (!(that instanceof ExtraConfiguration)) {
            throw new ClassCastException();
        } else {
            return compareTo((ExtraConfiguration) that);
        }
    }

    public int compareTo(ExtraConfiguration that)
    {
        return this.themeChanged - that.themeChanged;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:47:09.147

尝试`@Override`在`compareTo`签名中添加一个。

# c++ - 使用动态无符号字符数组时发生未知崩溃

> ID：11963086
> 
> 赞同：0
> 
> 时间：2012-08-15T01:44:53.213
> 
> 标签：c++, crash, char, unsigned

有人可以向我解释为什么会这样：

```
unsigned char * buf;
buf = new unsigned char[dataSize]; 
```

正在使我的 C++ 程序崩溃？它没有给我任何错误，所以我真的迷失了我的程序由于这些代码行而崩溃的原因。先感谢您！

编辑：这是我目前正在处理的项目的代码，它使用的是 OpenAL，所以如果你想重新编译代码，你将需要它。

```
#include <cstdlib>
#include <iostream>
#include <Windows.h>
#include <al.h>
#include <alc.h>
#include <vector>

using namespace std;

class SoundSource
{
public:
    ALuint Source;
    ALuint buffer;
    ALuint frequency;
    ALenum format;

    //position
    ALfloat sourcePos[3];
    ALfloat sourceVel[3];
};

ALCcontext * Context;
ALCdevice * Device;
SoundSource sound;

int endWithError(char * msg, int error = 0)
{
    cout << msg << endl;
    while(cin.get() != 10);

    return error;
}

bool initSound()
{
    Device = alcOpenDevice((ALCchar*)"DirectSound3D");
    if(Device == NULL)
        return false;
    else
        {
        Context = alcCreateContext(Device,NULL);
        alcMakeContextCurrent(Context);
        alGetError();
        return true;
        }
    return false;
}

string loadSound(SoundSource s)
{
    char type[4];
    DWORD size, chunkSize;
    short formatType, channels;
    DWORD sampleRate, avgBytesPerSec;
    short bytesPerSample, bitsPerSample;
    DWORD dataSize;

    FILE * fp = NULL;

    fp = fopen("test.wav","rb");

    fread(type, sizeof(char), 4, fp);
    if(!strcmp(type, "RIFF"))
        endWithError("Error: Not RIFF format");

    fread(&size, sizeof(DWORD), 1, fp);

    fread(type, sizeof(char), 4, fp);
    if(!strcmp(type, "WAVE"))
        endWithError("Error: Not WAVE format");

    fread(type, sizeof(char), 4, fp);
    if(!strcmp(type, "fmt "))
        endWithError("Error: Not fmt format");

    fread(&chunkSize, sizeof(DWORD), 1, fp);
    fread(&formatType, sizeof(short), 1, fp);
    fread(&channels, sizeof(short), 1, fp);
    fread(&sampleRate, sizeof(DWORD), 1, fp);
    fread(&avgBytesPerSec, sizeof(DWORD), 1, fp);
    fread(&bytesPerSample, sizeof(short), 1, fp);
    fread(&bitsPerSample, sizeof(short), 1, fp);

    cout << "Chuck size: " << chunkSize << endl;
    cout << "Format type: " << formatType << endl;
    cout << "Channels: " << channels << endl;
    cout << "Sample rate: " << sampleRate << endl;
    cout << "Avg Bytes per sec: " << avgBytesPerSec << endl;
    cout << "Bytes per sample: " << bytesPerSample << endl;
    cout << "Bits per sample: " << bitsPerSample << endl;

    fread(type, sizeof(char), 4, fp);
    if(!strcmp(type, "data"))
        endWithError("Error: No data");

    fread(&dataSize, sizeof(DWORD), 1, fp);

    unsigned char * buf;
    buf = new unsigned char[dataSize];
    fread(buf, sizeof(BYTE), dataSize, fp);

    alGenBuffers(1, &s.buffer);
    alGenSources(1, &s.Source);

    switch(bitsPerSample)
    {
        //8 bit
        case 8:
        {
            switch(channels)
            {
            case 1: s.format = AL_FORMAT_MONO8; break;
            case 2: s.format = AL_FORMAT_STEREO8; break;
            }
        }
        //16 bit
        case 16:
        {
            switch(channels)
            {
            case 1: s.format = AL_FORMAT_MONO16; break;
            case 2: s.format = AL_FORMAT_STEREO16; break;
            }
        }
    }

    alBufferData(s.buffer, s.format, (ALvoid *)buf, dataSize, s.frequency);
    s.sourcePos[0] = 0.0;
    s.sourcePos[1] = 0.0;
    s.sourcePos[2] = 0.0;
    s.sourceVel[0] = 0.0;
    s.sourceVel[1] = 0.0;
    s.sourceVel[2] = 0.0;

    fclose(fp);
    //delete[] buf;

    return "WAVE successfully loaded!";
}

void closeSound()
{
    alDeleteSources(1, &sound.Source);
    alDeleteBuffers(1, &sound.buffer);
    Context = alcGetCurrentContext();
    Device = alcGetContextsDevice(Context);
    alcMakeContextCurrent(NULL);
    alcDestroyContext(Context);
    alcCloseDevice(Device);
    cout << "OpenAL sound closed!" << endl;
}

int main()
{
    string result;

    if(initSound())
    {
        cout << "Sound Context and Device up!" << endl;
        result = loadSound(sound);
        cout << result.c_str() << endl;
        alSourcePlay(sound.Source);
        system("PAUSE");
    }
    else
    {
        {
            cout << "Sound Context and Device not made.." << endl;
            system("PAUSE");
        }
    }

    closeSound();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:09:28.260

```
// replace this 
if(!strcmp(type, "XXXX"))
    endWithError("Error: Not RIFF format");
// with this 
if(!memcmp(type, "XXXX", 4))
    endWithError("Error: Not RIFF format"); 
```

因为类型不是 \0 终止的

```
fread(&chunkSize, sizeof(DWORD), 1, fp); 
```

提示：而不是 sizeof(type) 使用 sizeof(variable name) 例如 fread(&chunkSize, sizeof(chunkSize), 1, fp);

如果您以后由于某种原因需要更改变量类型，它不会在您的脸上爆炸

```
fread(&dataSize, sizeof(DWORD), 1, fp);
unsigned char * buf;
buf = new unsigned char[dataSize];
fread(buf, sizeof(BYTE), dataSize, fp); 
```

永远不要假设您读入的内容是正确的，而是在分配之前检查 dataSize 是什么。

避免使用全局变量也是一个好主意，您可以轻松地创建一个包含所需变量的结构并从函数中返回它

```
struct context_t // or whatever u want to call it
{
  ALCcontext * Context;
  ALCdevice * Device;

};

bool initSound(context_t & c) {}
void closeSound(context_t & c) {}

int main()
{
  context_t context;

  if (initSound(context)) 
  {
  ...
  }
  ..
  closeSound(context); 
```

# c# - c# - 如何从实例化的泛型类中获取属性？

> ID：11963092
> 
> 赞同：0
> 
> 时间：2012-08-15T01:45:47.203
> 
> 标签：c#, database, linq, generics

在上一个[线程](https://stackoverflow.com/questions/11951864/how-to-make-a-type-variable-work-with-linq-to-sql)中，我询问了如何以通用方式从 id 获取注册表，我得到的答案是：

```
 public class DBAccess
{
    public virtual DataBaseTable GetById<DataBaseTable>(int id, Table<DataBaseTable> table) where DataBaseTable : class
    {
        var itemParameter = Expression.Parameter(typeof(DataBaseTable), "item");
        var whereExpression = Expression.Lambda<Func<DataBaseTable, bool>>
            (
            Expression.Equal(
                Expression.Property(
                    itemParameter,
                    "Id"
                    ),
                Expression.Constant(id)
                ),
            new[] { itemParameter }
            );
        return table.Where(whereExpression).Single();
    }
} 
```

哪个很好用，但现在我不知道如何获得它的任何属性，给出一个具体的问题，我怎样才能使下面的函数工作？

```
 public static int GetRelatedTableId<DataBaseTable>
    (Table<DataBaseTable> table,String RelatedTableId) where DataBaseTable : class
    {
        DBAccess RegistryGet = new DBAccess();    
        DataBaseTable tab = RegistryGet.GetById<DataBaseTable>(id, table);
        return tab.getAttributeByString(RelatedTableId);//i just made this up
    } 
```

**更新**解决方案

感谢下面的链接，我设法解决了这个问题

```
 public static int GetRelatedTableId<DataBaseTable>
    (Table<DataBaseTable> table,String RelatedTableId) where DataBaseTable : class
    {
        DBAccess RegistryGet = new DBAccess();    
        DataBaseTable tab = RegistryGet.GetById<DataBaseTable>(id, table);
        return (int)(tab.GetType().GetProperty(RelatedTableId)).GetValue(tab, null);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:59:31.980

如果您的属性名称仅在运行时已知，那么您可以使用反射来检查 type `DataBaseTable`，通过名称找到感兴趣的属性，然后从您的 instance 中检索其值`tab`。

有关示例，请参阅此问题的答案：[如何通过反射获取字符串属性的值？](https://stackoverflow.com/questions/987982/c-sharp-how-can-i-get-the-value-of-a-string-property-via-reflection)

澄清：是的，您的类型是一个通用参数，但`typeof(DataBaseTable)`or`tab.GetType()`仍然允许您检查正在使用的特定类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:24:32.950

如果您只在运行时知道属性名称，请使用反射……尽管这通常是一种代码味道。

如果您在编译时知道属性名称但不知道具体类型（并且正在使用.net 4），则将返回值转换为 a`dynamic`并正常访问该属性。

如果您在编译时知道具体的类型和属性，则将返回值转换为返回的类型并正常访问该属性。

还基于提供的片段，您的代码可能应该是

```
public class DBAccess<T> where T : class
{
    public virtual T GetById(int id, Table<T> table)
    { 
```

或者

```
public static class DBAccess 
{
    public static T GetById<T>(int id, Table<T> table) where T : class
    { 
```

# wordpress - 在不使用插件的情况下，如何按名称排除多个类别？

> ID：11963094
> 
> 赞同：0
> 
> 时间：2012-08-15T01:46:10.223
> 
> 标签：wordpress, wordpress-theming

我有 (2) 个要从博客中排除的类别，如果没有 WP 插件并且名称不是 ID，我该如何做到这一点？

这是代码：

```
<?php
$temp = $wp_query;
$wp_query= null;
$wp_query = new WP_Query();
$wp_query->query('posts_per_page=5'.'&paged='.$paged); $exclude = get_cat_ID('feature');
$q = 'cat=-'.$exclude;
query_posts($q);
while ($wp_query->have_posts()) : $wp_query->the_post();
?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:31:05.230

尝试这个：

```
$category_ids_to_ignore = array(3,4);  // replace 3 & 4 with the actual catgory ids you want to exclude
$posts = new WP_Query(array('category__not_in' => $category_to_ignore, 'posts_per_page' => 5, 'paged' => get_query_var('paged')));

while($posts->have_posts()) : $posts->the_post();
endwhile; 
```

# css - 使用 :before & :after CSS 有什么缺点吗？

> ID：11963095
> 
> 赞同：1
> 
> 时间：2012-08-15T01:46:39.973
> 
> 标签：css, pseudo-element

在我将这些实施到我的网站之前，只是想知道是否有人在使用 :before 和 :after 进行设计时有任何负面经验。（或超过积极方面）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:58:12.413

好吧，通过使用伪元素，您可以使其更具语义化。您不需要仅为布局目的创建空元素。

缺点，我相信一些旧版浏览器不支持它，但你可以使用 polyfill。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:56:57.843

假设您有一个像 SO 这样的网站，它在每个页面上都有多个答案。如果你想在每个答案之后添加一个图像/图标，你可以有类似的东西

```
answercell.post-text:after {
    content: url(images/disclaimer.gif);
} 
```

这样您就可以更新整个网站，而无需更改单个 HTML/ASPX 页面

因此，它使站点范围的更新更容易。

此外，它会减少页面大小（Kb），因为您需要更少的 HTML，因此页面加载速度会更快。

# ios - 声音在 iPad 的 iOS 中不起作用

> ID：11963098
> 
> 赞同：1
> 
> 时间：2012-08-15T01:47:03.577
> 
> 标签：ios, xamarin.ios, monogame, soundeffectinstance

我的游戏在模拟器和实际的 iPod Touch 设备上运行良好，但是当我在 iPad 2 设备上运行它时，声音不播放并且音效不播放。

这是我启动背景音乐的代码。请记住，这适用于模拟器和实际的 iPod Touch 设备：

```
SoundEffect.MasterVolume = 1.0f;

SoundEffect soundMusic = (new ContentManager(screenManager.Game.Services, "Content")).Load<SoundEffect>("Music");
SoundEffectInstance soundMusicInstance = soundMusic.CreateInstance();

soundMusicInstance.IsLooped = true;
soundMusicInstance.Play(); 
```

为什么这在 iPad 上不起作用？

# c - spinLock 锁定系统

> ID：11963103
> 
> 赞同：0
> 
> 时间：2012-08-15T01:47:44.693
> 
> 标签：c, multithreading, locking, vxworks

我正在尝试`spinlockIsr_t`在 vxWorks 6.7 中使用，但如果我尝试将它用于多个任务，系统会冻结。您是否允许使用多个尝试获取相同自旋锁的任务？如果不是，那么首先它的意义是什么？以下代码适用于 1 或 2 个任务，但一旦任务数量增加到 3 个，系统就会冻结，然后才能在控制台上完成打印第一行。

```
spinlockIsr_t mySpinLock; 
int sharedResource;
void vx_test_mtx_spin_lock(void)
{
    const int kNumTask = 3;
    const int kTaskPriority = 50;
    const int kTaskStackSize = 10000;
    int i = 0;
    sharedResource = 0;
    char procName[40];
                                                printf("Number of tasks : %d\n", kNumTask);
                                                printf("SPIN_LOCK_ISR_INIT() [main task]\n");
    SPIN_LOCK_ISR_INIT (&mySpinLock, 0);        printf("SPIN_LOCK_ISR_TAKE() [main task] \n");
    SPIN_LOCK_ISR_TAKE (&mySpinLock);
    for (i = 0; i < kNumTask; i++){
        sprintf(procName, "%s%d", "myTask", i); printf("taskSpawn() [main task]\n");
        taskSpawn((char*)procName,
                kTaskPriority,
                0,
                kTaskStackSize,
                (FUNCPTR)vx_spin_lock_unlock,
                0,0,0,0,0,0,0,0,0,0
                );
    }                                           printf("SPIN_LOCK_ISR_GIVE() [main task]");
    SPIN_LOCK_ISR_GIVE (&mySpinLock); 

}

void vx_spin_lock_unlock(void)
{
                                                printf("SPIN_LOCK_ISR_TAKE() [spawned task] \n");
    SPIN_LOCK_ISR_TAKE (&mySpinLock);
    /* ... Access the share resource here */    printf("SPIN_LOCK_ISR_GIVE() [spawned task] \n");
    SPIN_LOCK_ISR_GIVE (&mySpinLock);       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T02:32:40.557

我怀疑你有一个更高优先级的任务在自旋锁上旋转，而一个低优先级的任务已经持有锁。较低优先级的任务将永远无法运行，因此锁永远不会解锁，并且会发生死锁。自旋锁基本上不应该在实时系统中使用。如果使用它们，您必须确保所有可以在锁上自旋的线程具有相同的优先级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:44:02.270

这确实是自旋锁的误用。在大多数情况下，您应该简单地使用互斥信号量而不是自旋锁。

自旋锁旨在具有非常短的临界区。执行字符串和 I/O（即 printf）操作**并不**短。与执行 taskSpawn 相同。

事实上，在持有自旋锁的同时进行任何系统调用都是一个巨大的危险信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T02:37:15.127

您在该系统中有多少个内核？有什么东西可以抢占旋转任务吗？由于您的所有任务都在锁上旋转，一旦您锁定了所有核心 - 游戏就结束了。

# c# - 被 SyntaxNode.ReplaceNodes<>() 弄糊涂了

> ID：11963106
> 
> 赞同：3
> 
> 时间：2012-08-15T01:48:08.937
> 
> 标签：c#, immutability, roslyn

我正在尝试用我自己构造的 InvocationExpressionSyntax 节点替换 InvocationExpressionSyntax 节点。

到目前为止，我发现的唯一方法是使用 SyntaxNode.ReplaceNodes<>，但我很难理解它是如何工作的。

这是一个代码片段

```
public override SyntaxNode VisitInvocationExpression(InvocationExpressionSyntax node)
{
    InvocationExpressionSyntax replacementNode = (constructing my own invocation node, etc.

    node = (InvocationExpressionSyntax)node.ReplaceNodes(new List<InvocationExpressionSyntax>() { replacementNode /* ##Solution: This should be the EXISTING node, not the replacement node*/ }, new Func<InvocationExpressionSyntax, InvocationExpressionSyntax, SyntaxNode>((old, old2) =>
        {
            //return what?  old and old2 are both unmodified at this point. Doing another node.replacenodes in here doesn't work either. How do I replace node?
            //even the following doesn't work. 
            return replacementNode;
        }));
} 
```

方法的 Func<> arg 的元数据：

> 计算参数节点的替换节点的函数。第一个参数是原始节点。第二个参数是用替换的后代重写的同一节点。

没有其他方法可以替换我能找到的节点。即使我返回我构建的替换节点，它也只是返回原始节点。

如何简单地替换整个节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:45:29.767

你的代码片段让我有点困惑。ReplaceNodes 替换第一个参数中指定的节点，因此第一个参数应该是*现有*节点的列表，而不是新节点。您可以在 lambda 中为第二个参数创建新节点，然后在树中替换这些节点。如果您必须知道当前正在替换哪些节点，请查看两个参数中的第一个（在您的示例中为“旧”）以了解它是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T03:16:20.420

这是我现在找到的解决方法：

```
node = node.WithExpression(replacementNode); 
```

# django - django-jqgrid：如何设置给定的示例

> ID：11963109
> 
> 赞同：1
> 
> 时间：2012-08-15T01:48:18.430
> 
> 标签：django, jqgrid

我想尝试[`django-jqgrid`](https://github.com/gerry/django-jqgrid)，但文件中作为示例给出的步骤[`README.md`](https://github.com/gerry/django-jqgrid/blob/master/README.md)不够清楚。特别是第 4 步，它读取*配置`jgrid`以使用定义的 url。*，太模糊了。

说明中给出的 javascript 代码片段应该放在哪个文件中？是否需要 HTML 模板？更详细的步骤会有所帮助。

[`django-jqgrid-demo`](https://bitbucket.org/romildo/django-jqgrid-demo)是`django-jqgrid`我正在编写的一个小型演示应用程序。最初的目标是以表格格式显示模型中的数据，并进行排序和过滤。所以我按照`django-jqgrid`文档中的步骤定义了模型类、网格类、查看器函数和 url（步骤 4 除外）。缺少的是用于呈现数据的模板。欢迎任何有关如何完成它的帮助。

# c++ - C++：父对象和子对象的数组

> ID：11963111
> 
> 赞同：0
> 
> 时间：2012-08-15T01:48:56.413
> 
> 标签：c++, arrays, inheritance

我正在设计一款游戏，其中一些玩家牌是已知的，而另一些则不是。为此，我创建了一个带有子“OpenPlayer”和“ClosedPlayer”的父对象“Player”。

我想将这个游戏中的所有玩家组成一个数组，以方便游戏管理。但是，我也希望能够适当地访问 OpenPlayer 和 ClosedPlayer 中的特殊方法。这可能吗？

编辑：我实际上正在考虑使用来自 STL 的向量，因为由于玩家数量可变，这可能更合适。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T01:51:42.553

一般来说，你不能创建一个元素属于不同类类型的 C++ 数组。每个数组元素的大小必须相同，不同的子类不一定如此。将不同的类型放入数组中会导致*切片*，这是子类的数据成员令人惊讶的消失。

*但是，如果您创建一个指向不同子类的指针*数组，那么您将很容易能够做您想做的事情。如果玩家数量可以变化，您也可以考虑使用 a`vector`而不是数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:53:47.580

通过“访问特殊方法”，我假设您指的是 OpenPlayer 或 ClosedPlayer 中的方法？

通过数组，我假设您的意思是一些 STL 集合；-)

最简洁的答案是不”。

长答案是“是的，你可以，但你需要将对象转换为正确的类型。这意味着你的设计是错误的。”

不同的设计可能是让“打开”或“关闭”成为 Player 类的属性，而不是单个子类。

# ruby - 在 Ruby 中创建子目录

> ID：11963112
> 
> 赞同：9
> 
> 时间：2012-08-15T01:48:57.590
> 
> 标签：ruby

我想创建一个不存在的目录的子目录，例如：`/foo/bar`

我试过了：

```
Dir.mkdir("foo/bar") 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T01:51:10.197

如果您尝试创建一个目录及其父目录，您想使用它[`FileUtils.mkdir_p`](http://stdlib.rubyonrails.org/libdoc/fileutils/rdoc/classes/FileUtils.html#M000711)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T01:51:55.933

这是你要找的吗？

```
require 'fileutils'
FileUtils.mkpath('/foo/bar') 
```

`mkpath`是 的别名`mkdir_p`。

# java - Eclipse JDK 7 启动失败

> ID：11963119
> 
> 赞同：1
> 
> 时间：2012-08-15T01:49:44.060
> 
> 标签：java, eclipse, jvm, classpath

当我尝试使用 eclipse.exe 文件启动 eclipse 时，它​​失败了。在我的系统上安装 JDK 7 后，此问题开始出现。

当我使用命令行参数时

> ```
> eclipse -vm "C:\Program Files\Java\jdk1.7.0_06\bin" 
> ```

日食开始就好了。我假设它与导致问题的 JVM 有关。

同时，当我尝试检查 java 版本时，出现以下错误：

> C:\Test>java -version 虚拟机初始化时出错

不确定这两者是否相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:59:30.307

`java -version` failing indicates to me that you probably need to configure the OS environment variables,

*   `JAVA_HOME=C:\Program Files\Java\jdk1.7.0_06`
*   `Path=...;%JAVA_HOME%\bin;`

# sql-server - 在 Mac 上使用 iODBC 连接到 MS SQL Server

> ID：11963122
> 
> 赞同：9
> 
> 时间：2012-08-15T01:50:40.890
> 
> 标签：sql-server, macos, pyodbc, freetds, iodbc

我正在尝试使用 iODBC 从我的 Mac 开发机器连接到 Microsoft SQL Server。无论我做什么，我都会收到`Unable to connect to data source`来自 FreeTDS 驱动程序的错误消息。在查阅了各种手册、博客文章和 StackOverflow 问题之后，我束手无策。

我使用的是 Mac OS X 10.7.4，通过 Homebrew 安装了 FreeTDS 版本 0.91。这就是我正在做的事情：

```
$ brew install freetds
$ mkvirtualenv odbc
$ workon odbc
$ pip install pyodbc

$ tsql -H localhost -U mydbusername -P mydbpassword -p 1433 
locale is "en_US.UTF-8"
locale charset is "UTF-8"
using default charset "UTF-8"
1> quit 
```

以上连接并有效，但是：

```
$ iodbctest
iODBC Demonstration program
This program shows an interactive SQL processor
Driver Manager: 03.52.0607.1008

Enter ODBC connect string (? shows list): driver={TDS};server=localhost;uid=mydbusername;pwd=mydbpassword;database=mydbname
1: SQLDriverConnect = [FreeTDS][SQL Server]Unable to connect to data source (0) SQLSTATE=08001
1: ODBC_Connect = [FreeTDS][SQL Server]Unable to connect to data source (0) SQLSTATE=08001 
```

由于我最终计划通过 PyODBC 使用它，因此我也尝试过：

```
$ python
Python 2.7.3 (default, Jun 22 2012, 00:35:38) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pyodbc
>>> c = pyodbc.connect(driver='/usr/local/lib/libtdsodbc.so', host='localhost', name='mydbname', uid='mydbusername', pwd='mydbpassword')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
pyodbc.Error: ('08001', '[08001] [FreeTDS][SQL Server]Unable to connect to data source (0) (SQLDriverConnect)') 
```

我已经尝试了博客文章和 SO 帖子中建议的所有方式...在 ODBC 管理器中创建 DSN，创建一个`~/.odbc.ini`，尝试使用 unixODBC（它不适用于 PyODBC），指定一个连接字符串而不是关键字 args，等等。我还通过 iODBC 生成了一个跟踪文件，我已将其粘贴**[到此处](http://dpaste.org/DSbC6/)**，但我无法从中收集到比错误消息更多的信息。

（我应该提到，我通过 SSH 与 SQL Server 建立隧道连接，因为`LocalForward localhost:1433 production.someinstitution.edu:1433`我`~/.ssh/config`的 IT 部门限制我只能从生产服务器的 IP 进行连接。它适用于 GUI 客户端（SQuirreLSQL），所以我假设转发是正确的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:41:42.413

在无 DSN 连接的情况下，您应该在连接字符串中使用“端口”参数。

否则，您的端口可以在您的 DSN 或驱动程序配置中指定（分别为 odbc.ini 和 freetds.conf）

# javascript - 在 Javascript 中生成唯一 ID

> ID：11963123
> 
> 赞同：1
> 
> 时间：2012-08-15T01:50:54.773
> 
> 标签：javascript, database, algorithm

我想实现一个类似于[Imgur](http://imgur.com/)的保存系统，如果用户按下按钮，则返回唯一的 5 个字符值。这是我到目前为止所拥有的：

数据库后端使用从 开始的自动递增 ID `5308416`。我使用修改后的 Radix 函数（见下文）将这些数字 ID 转换为字符。我使用反向函数将字符 ID 查找回数字数据库 ID。

```
function genID (value)
{
    var alphabet = "23456789BCDFGHJKLMNPRSTVWXYZbcdfghjkmnpqrstvwxyz";

    var result = "";
    var length = alphabet.length;

    while (value > 0)
    {
        result = alphabet[value % length] + result;
        value  = Math.floor (value / length);
    }

    return result;
} 
```

问题是这些生成的 ID 是非常可预测的。我的问题是，如何使生成的 ID 看起来是随机的但仍然是唯一的（所以我可以在数据库中将它们作为数字查找）。我正在考虑使用一些加密算法，但不知道从哪里开始。任何帮助或建议将不胜感激（也许还有更好的方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:06:15.797

您是否必须能够双向使用（即将整数转换为哈希并再次返回）？如果您可以存储散列并以这种方式查找内容，那么创建一个生成难以猜测但完整的散列空间的函数相对容易。您使用素数生成一个序列，该序列仅在所有可能的排列都用尽后才重复。

以下 PHP 示例[来自我自己的代码](https://github.com/hamishcampbell/silverstripe-pastie/blob/e0643cfcee87aa9597a3babc62c136bb1250ce3f/code/PastieSnippet.php#L157)，改编自此[站点](http://blog.kevburnsjr.com/php-unique-hash)：

```
function hash($len = 6) {
    $base = 36;
    $gp = array(1,23,809,28837,1038073,37370257 /*,1345328833*/);
    $maxlen = count($gp);
    $len = $len > ($maxlen-1) ? ($maxlen-1) : $len;
    while($len < $maxlen && pow($base,$len) < $this->ID) $len++; 
    if($len >= $maxlen) throw new Exception($this->ID." out of range (max ".pow($base,$maxlen-1).")");
    $ceil = pow($base,$len);
    $prime = $gp[$len];
    $dechash = ($this->ID * $prime) % $ceil;
    $hash = base_convert($dechash, 10, $base);
    return str_pad($hash, $len, "0", STR_PAD_LEFT);
} 
```

在 JavaScript 中实现这一点很容易，但理想情况下你也不需要 - 你的表上有一个插入触发器，它用该算法的结果填充哈希字段（当然适用于 SQL）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:50:45.763

通过将您的服务器端自动递增数字与当前日期/时间块或随机数相结合，可以生成一个不可预测但唯一的 ID。服务器端自动递增数字保证唯一性，而日期/时间块或随机数消除了可预测性。

对于将服务器端唯一编号作为输入并在客户端添加日期/时间块的字符串形式的唯一 ID，您可以执行以下操作：

```
function genID(serverNum) {
    return(serverNum + "" + (new Date).getTime());
} 
```

或使用随机数：

```
function genID(serverNum) {
    return(serverNum + "" + Math.floor(Math.random() * 100000));
} 
```

但是，最好在服务器上添加日期/时间元素，然后将整个唯一 ID 存储在数据库中。

# ruby-on-rails - 每个请求的路由集切换

> ID：11963124
> 
> 赞同：0
> 
> 时间：2012-08-15T01:50:58.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在努力将现有的 rails 2.3.8 应用程序升级到 rails 3.2.7。问题在于路由，因为在旧（2.3.x）版本中，有多个路由集在应用程序启动时被初始化，然后根据请求域“交换”。新的 rails 3 路由大部分被重写，我不确定是否有可能实现每个请求的“动态”路由集切换。我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:54:51.583

您可能想要使用[基于请求的路由约束](http://guides.rubyonrails.org/routing.html#request-based-constraints)。

# actionscript-3 - 如何将文本字段定位在另一个高度可变的文本字段下方

> ID：11963128
> 
> 赞同：0
> 
> 时间：2012-08-15T01:51:30.213
> 
> 标签：actionscript-3

我有一个动态文本字段，每天填充不同数量的文本。所以，身高是不一样的。我想在其下方放置第二个文本字段，边距为 50 像素。第二个文本字段将相对于第一个文本字段上下移动。

我该怎么做呢？谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:00:13.287

```
textfield2.y = textfield1.y + textfield1.height + 50; 
```

This should do it unless I'm misunderstanding your question.

# django - 3rd-party Django 插件的非常奇怪的行为

> ID：11963131
> 
> 赞同：0
> 
> 时间：2012-08-15T01:51:50.850
> 
> 标签：django

安装 django_tinymce 和 django-filebrowser 后，我注意到文件夹

> \venv\Lib\site-packages\django_tinymce-1.5.1b2-py2.6.egg\

和

> \venv\Lib\site-packages\django_filebrowser-3.5.0-py2.6.egg\

包含我的 Django 项目的副本。这些库如此糟糕的行为的原因是什么？这是常见的做法吗？

# javascript - JQuery animate() 到最大高度

> ID：11963134
> 
> 赞同：1
> 
> 时间：2012-08-15T01:52:01.193
> 
> 标签：javascript, jquery

我有一个 div`overflow:hidden`和一个设定的高度。当我跑步时`animate()`，我希望高度动画到全尺寸。

**例如，我有这个：**

[http://jsfiddle.net/aW9k9/](http://jsfiddle.net/aW9k9/)

```
<a href="#" onclick="lol(); return false;">clicky</a>

<div style="height:50px; overflow:hidden;" class="main">
    <div style="height:100px; background:blue;">text</div>
    <div style="height:50px; background:yellow;">text</div>
    <div style="height:50px; background:green;">text</div>
</div> 
```

**这个例子有效，但只是因为我知道所有元素的总高度。**

```
<script>
    function lol() {
        $("div.main").animate({height:'200px'}, 1000);
    }
</script> 
```

**^如何在不知道总动画高度的情况下重新创建它？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:07:00.557

@MattBall 答案的固定版本，它使用`.outerHeight(true)`来包含内部 div 的边距。

```
function lol() {
    var $main = $("div.main"),
        totalHeight = 0;

    $main.children().each(function () {
        totalHeight += $(this).outerHeight(true);
    });

    $main.animate({height:totalHeight}, 1000);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:11:32.853

如果更改 html 代码不是问题，您可以像这样简单地更改 html 代码：

```
<a href="#" onclick="lol(); return false;">clicky</a>

<div style="height:50px; overflow:hidden;" class="main">
    <div>
        <div style="height:100px; background:blue;">text</div>
        <div style="height:50px; background:yellow;">text</div>
        <div style="height:50px; background:green;">text</div>
    </div>
</div> 
```

你可以像这样获得内部元素的高度：

```
$('div.main > div').outerHeight() 
```

这也是lol功能：

```
function lol() { 
    $("div.main").animate({height:$('div.main > div').outerHeight()}, 1000);
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:57:21.760

您可以以编程方式执行与您在心理上得出该`200px`值相同的事情：对 s 的高度求和`div.main > div`。

```
function lol() {
    var $main = $("div.main"),
        totalHeight = 0;

    $main.children().each(function () {
        totalHeight += $(this).height();
    });

    $main.animate({height: totalHeight}, 1000);
} 
```

[http://jsfiddle.net/mattball/CXyKK](http://jsfiddle.net/mattball/CXyKK)

# c++ - 错误 C2065：“无处”：未声明的标识符

> ID：11963136
> 
> 赞同：2
> 
> 时间：2012-08-15T01:52:11.280
> 
> 标签：c++, visual-studio-2010

因此，我正在尝试使用 Visual Studio 2010 在 C++ 中制作基于文本的游戏。以下是一些我认为相关的代码块。如果您需要更多，请随时问我。

我正在尝试为名为场所的游戏创建一个类。我做了一个地方，它在它的北、南、东和西都有另一个“地方”。我现在真的很困惑。我是这个东西的菜鸟。我可能只是在看一些东西。

```
//places.h------------------------
#include "place.h"

//Nowhere place
string nowheredescr = "A strange hole to nowhere";
place nowhere(&nowheredescr, &nowhere, &nowhere, &nowhere, &nowhere); //Error occurs here
//

//place.h------------------------
#ifndef place_h
#define place_h

#include "classes.h"

class place
{
public:
    place(string *Sdescription, place *Snorth, place *Ssouth, place *Swest, place *Seast);
    ~place(void);
private:
    string *description;
    place *north;
    place *south;
    place *east;
    place *west;
};

#endif

//place.cpp-------------------
#include "place.h"
#include <iostream>

place::place(string *Sdescription, place *Snorth, place *Ssouth, place *Swest, place *Seast)
{
    description = Sdescription;
    north = Snorth;
    south = Ssouth;
    west = Swest;
    east = Seast;
}

place::~place(void)
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:27:27.407

以下语法将解决错误

```
place nowhere = place(&nowheredescr, &nowhere, &nowhere, &nowhere, &nowhere); 
```

这在 C++03 标准 3.3.1/1 中进行了解释

> 名称的声明点紧跟在其完整声明符之后（第 8 条）和初始化器之前（如果有）

在 OP 示例中，`place nowhere(.....)`表示一个声明符，因此`nowhere`用作构造函数的参数被认为是未声明的。在我的示例中， the`place nowhere`是一个声明器并且`place(.....)`是一个初始化器，因此`nowhere`在此时被声明。

# c# - 如何正确地将 HubTile 固定到开始屏幕

> ID：11963139
> 
> 赞同：0
> 
> 时间：2012-08-15T01:52:22.293
> 
> 标签：c#, windows-phone-7, xaml

我希望能够将应用程序中的 hubtile 固定到开始屏幕，以便开始屏幕磁贴与我的 hubtile 具有相同的动画效果。当用户点击固定的 hubtile 时，他或她将被导航到正确的页面。我已经按照这个例子[http://igrali.com/2011/09/27/how-to-pin-a-hubtile-to-start-screen/](http://igrali.com/2011/09/27/how-to-pin-a-hubtile-to-start-screen/)，但它对我不起作用？

主页.xaml

```
<ListBox Grid.Row="0" x:Name="tileList" toolkit:TiltEffect.IsTiltEnabled="True">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <toolkit:HubTile Title="{Binding Title}" Margin="3"
                                         Notification="{Binding Notification}"
                                         DisplayNotification="{Binding DisplayNotification}"
                                         Message="{Binding Message}"
                                         GroupTag="{Binding GroupTag}"
                                         Source="{Binding ImageUri}"
                                         Tap="hubTile_Tap">
                            <toolkit:ContextMenuService.ContextMenu>
                                <toolkit:ContextMenu x:Name="menu">
                                    <toolkit:MenuItem Header="pin to start" Tap="MenuItem_Tap"/>
                                </toolkit:ContextMenu>
                            </toolkit:ContextMenuService.ContextMenu>
                        </toolkit:HubTile>

                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

MainPage.xaml.cs

```
public MainPage()
    {
        InitializeComponent();

        CreateHubTiles();
    }

private void CreateHubTiles()
    {
        List<TileItem> tileItems = new List<TileItem>() 
        {
            new TileItem() { ImageUri = "/Images/shareStatusImage.jpg", Title = "status", /*Notification = "last shared link uri",*/ Message = Settings.statusMessage.Value, GroupTag = "TileGroup" },
            new TileItem() { ImageUri = "/Images/shareLinkImage.jpg", Title = "link", /*Notification = "last shared status message",*/ Message = "last shared link uri", GroupTag = "TileGroup" }, 
        };

        this.tileList.ItemsSource = tileItems;
    }

private void MenuItem_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        HubTile tap = sender as HubTile;

        CreateLiveTile(tap);
    }

    private void CreateLiveTile(HubTile hubtile)
    {
        //First create a new StandardTileData object from the hubtile to be pinned

        //NullReferenceException occurs here!!
        StandardTileData LiveTile = new StandardTileData
        {
            BackBackgroundImage = ((System.Windows.Media.Imaging.BitmapImage)hubtile.Source).UriSource,
            Title = hubtile.Title,
            BackTitle = hubtile.Title,
            BackContent = hubtile.Message
        };    

        //Check to see if the tile already exists
        //If not, create it
        //If yes, display messagebox
        ShellTile Tile = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains("DefaultTitle=" + LiveTile.Title));

        if (Tile == null)
        {
            try
            {
                ShellTile.Create(new Uri("/MainPage.xaml?DefaultTitle=" + LiveTile.Title, UriKind.Relative), LiveTile);
            }
            catch (Exception)
            {
                MessageBox.Show("This tile could not be pinned", "Warning", MessageBoxButton.OK);
            }
        }
        else
        {
            MessageBox.Show("This tile has already been pinned", "Notice", MessageBoxButton.OK);

        }
    } 
```

我被困在这个问题上，以及如何改变它才能使它起作用！？此外，这实际上是在开始屏幕上放置一个 hubtile，还是仅使用 hubtile 数据创建辅助磁贴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:19:32.800

> 我希望能够将应用程序中的 hubtile 固定到开始屏幕，以便开始屏幕磁贴与我的 hubtile 具有相同的动画效果

“普通”应用程序（不是第一方应用程序）的动态磁贴的功能有限。您只能提供[正面/背面图像、正面/背面文本、背面内容和计数](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.standardtiledata%28v=VS.92%29.aspx)。这就是我们可以访问的所有内容。

**更新**根据收到的错误添加更多信息您可以通过获取 TileItem

```
void MenuItem_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    var menuItem = (MenuItem)sender;
    var tileItem = menuItem.DataContext as TileItem;
    CreateLiveTile(tileIte);
}
enter code here
private void CreateLiveTile(TileItem item)
{
    // use the TileItem, not HubTile.
} 
```

# ios - 从 UItableviewcell 重新加载 TableView 数据

> ID：11963140
> 
> 赞同：0
> 
> 时间：2012-08-15T01:52:25.017
> 
> 标签：ios, uitableview

我的 UITableviewcell 子类中有一个 IBaction，我很难让它重新加载 tableview 的数据。它看起来很简单，但我尝试了很多员工，但没有任何效果。

以下是我在 UITableviewcell 中使用的代码，但没有重新加载：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (IBAction)deleterow:(id)sender
{
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Delete content ?"
                                                      message:@"Do you want to delete ?"
                                                     delegate:self
                                            cancelButtonTitle:@"Cancelar"
                                            otherButtonTitles:@"Eliminar", nil];
    [message show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if ([title isEqualToString:@"Eliminar"])
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);        
        NSString *documentsDirectory = [paths objectAtIndex:0];        
        NSString *path = [documentsDirectory stringByAppendingPathComponent:@"datatesting.plist"];
        libraryContent = [[NSMutableArray alloc] initWithContentsOfFile:path];
        [libraryContent removeObjectAtIndex:0];
        NSLog(@"delete the Row:%@",libraryContent);
        [libraryContent writeToFile:path atomically:YES];

        UITableView *parentTable = (UITableView *)self.superview;
        [parentTable reloadData];
    }
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
 }

 @end 
```

从 UITableviewcell 重新加载数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:40:42.870

我不完全确定您的代码是如何连接的，但通常对于这样的事情，您应该通过将 tableview 的引用传递给子类的属性来使用委托模式：

```
subclass *s = [subclass alloc] init];
s.table = self.tableview; 
```

然后当你想引用父表时，这样做：

```
[self.table reloadData]; 
```

或者通过使用协议/委托组合，这确实是首选方法。像这样：

在子类中：

```
@protocol subclassdelegate <NSObject>
- (void)refreshParentTableView;
@end 
```

在界面中设置委托

```
@property (nonatomic,weak) id<subclassdelegate> delegate; 
```

然后像这样在需要时调用它

```
[self.delegate refreshParentTableView]; 
```

现在，在父类中，您需要做几件事调用您的子类并将 self 设置为委托属性

```
subclass *s = [subclass alloc] init];
s.delegate = self; 
```

然后在父类中实现协议中定义的方法

```
- (void)refreshParentTableView {
     [self.tableview reloadData]
} 
```

两种方法都有效，但我建议您使用协议方法。它是模式代码，但更容易理解并且可能更可靠。

好起来。

# mod-rewrite - 重定向 apache 图标文件夹

> ID：11963142
> 
> 赞同：1
> 
> 时间：2012-08-15T01:52:57.933
> 
> 标签：mod-rewrite, pci-compliance

我的一个客户在 godaddy 共享主机上运行一个电子商务商店。他们正试图通过 pci 合规性，唯一的问题是默认的 apache 图标文件夹允许它被索引。此文件夹不在我的网络根目录中。所以我无权访问它。我已经尝试过 htaccess 重写，但它不起作用。任何人都知道任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:06:38.117

很抱歉，Go Daddy 共享主机不是 PCI 投诉。您可以查看此页面的最后一部分以验证：http: [//support.godaddy.com/help/article/4265/quick-shopping-cart-pci-compliance-faq ?locale=en](http://support.godaddy.com/help/article/4265/quick-shopping-cart-pci-compliance-faq?locale=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:48:58.627

事实证明，对于该客户处理的年销售额，第 4 级不需要扫描。所以，我们选择保持原样。

# ruby-on-rails - 如何正确翻译回形针错误消息？

> ID：11963146
> 
> 赞同：2
> 
> 时间：2012-08-15T01:53:30.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, internationalization, paperclip

我正在使用 Ruby on Rails 3.2.2 和 Paperclip 插件。由于我想翻译回形针错误消息，我使用以下代码：

```
class Article < ActiveRecord::Base
  validates_attachment_size :picture,
    :less_than => 4.megabytes,
    :message   => I18n.t('trl_too_big_file_size', :scope => 'activerecord.errors.messages')
end 
```

我的`.yml`文件是：

```
# <APP_PATH>/config/locales/en.yml (english language)
activerecord:
  errors:
    messages:
      trl_too_big_file_size: is too big

# <APP_PATH>/config/locales/it.yml (italian language)
activerecord:
  errors:
    messages:
      trl_too_big_file_size: è troppo grande 
```

我`ApplicationController`的是：

```
class ApplicationController < ActionController::Base
  before_filter :set_locale

  def set_locale
    # I am using code from http://guides.rubyonrails.org/i18n.html#setting-and-passing-the-locale.
    I18n.locale = request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first
  end
  # BTW: My `I18n.default_locale` is `:en` (english).
end 
```

但是，*当我提交与 Paperclip 附件相关的表单时，我的应用程序会生成一个**未**翻译的文本*- 也就是说，它会生成（并输出）一个*未*正确翻译的字符串，因为它始终引用默认的区域设置语言错误字符串`en.activerecord.errors.messages.trl_too_big_file_size`，即使`I18n.locale`是`:it`. 我做了一些研究（例如，[1](https://github.com/thoughtbot/paperclip/issues/14)、[2](http://blog.patrickespake.com/2009/11/18/ruby-on-rails-paperclip-com-i18n/)），但我仍然无法弄清楚如何正确翻译模型文件中与 Paperclip gem 相关的错误消息（参见上面的代码）。这似乎是 Parperclip gem 的一个错误（也因为这似乎不是唯一一个遇到这个问题的人）......

我该如何解决这个问题？

* * *

PS：我认为这个问题与ApplicationController-Paperclip gem的一些“*文件加载顺序*过程”有关......但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:46:57.687

Instead of using a lambda in the message parameter can't you simply use the appropriate key in the YAML file? Specifically, wouldn't something like:

```
class Article < ActiveRecord::Base
  validates_attachment_size :picture,
    :less_than => 4.megabytes
end 
```

with an entry in the Italian locale YAML file that looks like

```
it:
  activerecord:
    errors:
      models:
        article:
          attributes:
            picture:
              less_than: è troppo grande 
```

with a similar entry in the English local YAML file

```
en:
  activerecord:
    errors:
      models:
        article:
          attributes:
            picture:
              less_than: is too big 
```

Assuming your locale is getting set correctly, and that other ActiveRecord localized messages are getting displayed correctly, then I'd expect this to work as Paperclip's validators use the underlying ActiveRecord message bundles via the I18n.t method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:42:31.457

您可能需要对消息使用 lambda？

见[https://github.com/thoughtbot/paperclip/pull/411](https://github.com/thoughtbot/paperclip/pull/411)

```
class Article < ActiveRecord::Base
  validates_attachment_size :picture,
    :less_than => 4.megabytes,
    :message => lambda { 
      I18n.t('trl_too_big_file_size', :scope => 'activerecord.errors.messages') 
    }
end 
```

# python - 在 python 多处理池中共享 numpy 数组

> ID：11963148
> 
> 赞同：7
> 
> 时间：2012-08-15T01:53:55.503
> 
> 标签：python, numpy, scipy, multiprocessing

我正在编写一些代码，这些代码对大量（数万到数十万个数值积分）问题进行了一些相当繁重的数值工作。幸运的是，这些集成是令人尴尬的并行，因此很容易使用 Pool.map() 将工作拆分到多个内核。

现在，我有一个具有以下基本工作流程的程序：

```
#!/usr/bin/env python
from multiprocessing import Pool
from scipy import *
from my_parser import parse_numpy_array
from my_project import heavy_computation

#X is a global multidimensional numpy array
X = parse_numpy_array("input.dat")
param_1 = 0.0168
param_2 = 1.505

def do_work(arg):
  return heavy_computation(X, param_1, param_2, arg)

if __name__=='__main__':
  pool = Pool()
  arglist = linspace(0.0,1.0,100)
  results = Pool.map(do_work,arglist)
  #save results in a .npy file for analysis
  save("Results", [X,results]) 
```

由于 X、param_1 和 param_2 是硬编码的，并且对于池中的每个进程都以完全相同的方式初始化，所以这一切都很好。现在我的代码已经工作了，我想让它让用户在运行时输入文件名、param_1 和 param_2，而不是硬编码。

需要注意的一点是，X、param_1 和 param_2 在工作完成时不会被修改。由于我不修改它们，我可以在程序开始时做这样的事情：

```
import sys
X = parse_numpy_array(sys.argv[1])
param_1 = float(sys.argv[2])
param_2 = float(sys.argv[3]) 
```

这样就可以解决问题，但是由于此代码的大多数用户都在 Windows 机器上运行代码，所以我宁愿不走命令行参数的路线。

我真正想做的是这样的：

```
X, param_1, param_2 = None, None, None

def init(x,p1, p2)
  X = x
  param_1 = p1
  param_2 = p2

if __name__=='__main__':
  filename = raw_input("Filename> ")
  param_1 = float(raw_input("Parameter 1: "))
  param_2 = float(raw_input("Parameter 2: "))
  X = parse_numpy_array(filename)
  pool = Pool(initializer = init, initargs = (X, param_1, param_2,))
  arglist = linspace(0.0,1.0,100)
  results = Pool.map(do_work,arglist)
  #save results in a .npy file for analysis
  save("Results", [X,results]) 
```

但是，当 pool.map 调用发生时，这当然会失败并且 X/param_1/param_2 都是 None 。我对多处理很陌生，所以我不确定为什么对初始化程序的调用失败。有没有办法做我想做的事？有没有更好的方法来解决这个问题？我也看过使用共享数据，但根据我对文档的理解，它只适用于不包括 numpy 数组的 ctypes。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T06:28:29.067

我有一个类似的问题。如果您只想阅读我的解决方案，请跳过一些行:) 我必须：

*   在运行在它的不同部分的线程之间共享一个 numpy.array 并且......
*   向 Pool.map 传递一个具有多个参数的函数。

我注意到：

*   numpy.array 的数据被正确读取，但是......
*   numpy.array 上未永久更改的更改
*   Pool.map 在处理 lambda 函数时遇到问题，或者在我看来是这样（如果您不清楚这一点，请忽略它）

我的解决方案是：

*   使目标函数仅作为参数列表
*   使目标函数**返回**修改后的数据，而不是直接尝试在 numpy.array 上写入

我知道您的 do_work 函数已经返回了计算数据，因此您只需修改 to_work 以接受一个列表（包含 X、param_1、param_2 和 arg）作为参数，并在传递之前以这种格式将输入打包到目标函数它到 Pool.map。

这是一个示例实现：

```
def do_work2(args):
    X,param_1,param_2,arg = args
    return heavy_computation(X, param_1, param_2, arg) 
```

现在您必须在调用 do_work 函数之前将输入打包。你的主要变成：

```
if __name__=='__main__':
   filename = raw_input("Filename> ")
   param_1 = float(raw_input("Parameter 1: "))
   param_2 = float(raw_input("Parameter 2: "))
   X = parse_numpy_array(filename)
   # now you pack the input arguments
   arglist = [[X,param1,param2,n] for n in linspace(0.0,1.0,100)]
   # consider that you're not making 100 copies of X here. You're just passing a reference to it
   results = Pool.map(do_work2,arglist)
   #save results in a .npy file for analysis
   save("Results", [X,results]) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-15T02:55:38.390

为了使您的最后一个想法可行，我认为您可以在 if 语句中修改它们之前使用 global 关键字简单地制作`X`、`param_1`和全局变量。`param_2`所以添加以下内容：

```
global X
global param_1
global param_2 
```

直接在`if __name__ == '__main__'`.

# android - 如何将外部网络摄像头添加到 Android 手机（三星 Galaxy）

> ID：11963161
> 
> 赞同：1
> 
> 时间：2012-08-15T01:57:04.457
> 
> 标签：android, webcam

我想将外部网络摄像头添加到 Android 手机。理想情况下是一个普通的老式 USB 网络摄像头，但我愿意接受任何可行的方法。

我不想将我的 Android 手机用作网络摄像头。此处的等式绝不会将 PC/笔记本电脑因素考虑在内。只需将另一个摄像头添加到 Android 手机。

非常感谢，乔希

# php - What`s better, a single class for admins and visitors or 2 classes Company and adminCompany?

> ID：11963166
> 
> 赞同：0
> 
> 时间：2012-08-15T01:57:54.230
> 
> 标签：php, oop

I have a class `Company`, this class has some methods to search, list, etc and is used for the visitors of my website. But I have a different class `adminCompany`, which works only, when there is an admin user logged in. This class has the other methods: `update_info_company()`, `delete_company()`, and whatever an admin can do

My questions are:

*   Should I have a single class (Company) to do everything and just restrict access to some methods?
*   Is this against the principles of OOP?.

PD: it`s just to keep cleaner and shorter classes.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:14:30.450

在OOP中我们有这个东西：[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。这基本上意味着每个类应该只有一个改变的理由（扩展时）。

从您的描述看来，“公司”似乎都是一个单独的实体（很可能是[domain object](http://c2.com/cgi/wiki?DomainObject)的一些变体），它具有不同的属性并且可以创建或删除。然后它还具有工厂方面的功能，用于查找同一对象的多个实例。*这似乎是一个错误。*

你应该把这个结构的两个方面分开（我假设现在你有`class AdminCompany extends Company{}`，这是问题的一部分）。

至于控制哪些用户组可以执行任务，您可能会发现[这篇文章](https://stackoverflow.com/a/9685039/727208)很有用。

# e-commerce - 如何向非西方用户付款？

> ID：11963173
> 
> 赞同：8
> 
> 时间：2012-08-15T01:58:33.083
> 
> 标签：e-commerce, payment-gateway, bank

我有一个与[此类](https://stackoverflow.com/questions/1623747/how-to-pay-your-users-alternatives-to-paypal)似的问题，只是我的问题集中在“非西方”用户（我指的是西欧和美国以外的用户）。

我必须向我网站的用户付费（例如提供的服务），而且他们所在的地方至少可以说是银行系统很差的地方。他们确实有自动取款机，信用卡（维萨卡、万事达卡等）在大多数这些国家都可以使用。

在浏览网页数小时后，我认为我最好的选择是使用[预付借记卡](https://en.wikipedia.org/wiki/Debit_card#Prepaid_debit_cards)。他们允许我在卡上存款，我的用户可以使用该卡简单地取款或支付费用。事实上，我之前链接的帖子中提到了其中一些服务。提到了这些：

*   [Payoneer](http://www.payoneer.com/)：在纸面上，他们的服务看起来不错，但我还没有收到对几个询问的回复，他们的注册表有问题，他们的“新闻”部分大多是 2008 年的新闻。对我来说都是危险信号。

*   [iKobo](https://www.ikobo.com/)：在另一个主题和维基百科中命名的另一个提供者（因为它的价值......）。但是，他们的 SSL 证书已过期。大红旗。

我已经浏览了这个[评论网站](http://prepaid-debit-cards-review.toptenreviews.com/)上提到的大部分卡片，但它们似乎都是为美国量身定制的。

所以我的问题是：是否有人知道适合向广大国际用户支付的良好支付解决方案（可能是预付借记卡，也可能是其他东西）？

注意：这些大多是 100-500 美元范围内的较大付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:07:32.933

我自己的即时想法是银行电汇或贝宝（或 Skrill - Moneybookers）。我记得西联汇款很贵，但我可能错了。

在我的职业生涯中为银行从事国际支付工作，我知道资金是如何在世界各地流动的，我必须说预付借记卡的想法是一个不错的想法，实际上非常具有创新性。我查看了 payoneer 的东西，我认为它看起来不错。

我想知道是否有隐藏成本，但看起来不像。除了预付借记卡提供商之外，唯一不可见的费用肯定是外国 ATM 提供商收取的额外费用。

我想到一件事：确保收款人可以在他所在国家/地区的 ATM 机上使用该卡。现在几乎所有的卡都可以在全世界任何一台ATM机上取款，但我不会认为这是理所当然的。在最坏的情况下，收款人必须去一个大型机场，那里的 ATM 机更加国际化。询问收款人他最近的 ATM 显示什么符号/名称。然后询问热线该卡是否可以在该 ATM 上取款。例如是否支持 EFTPOS 等。

在银行电汇上，这取决于收款国，有些国家倾向于敲诈收费。我猜你在美国。我不知道银行是否提供这项服务，但瑞银瑞士有一个“保证我们的收费”，允许您在世界任何地方制作银行电汇，收款人无需支付任何费用，您最多需要支付 20 瑞士法郎加上常规银行电汇费用（我考虑到国外大约 15 瑞士法郎）。来自美国的外国银行电汇似乎也贵得离谱。我刚刚查了一下美国银行的收费。我的天啊。

对于某些国家/地区，我不鼓励使用银行电汇。我曾经在某个国家有过一些糟糕的经历，也许时代变了。首先与收款人核实，如果它是一个腐败倾向的国家，则宁愿用较小的金额进行测试。他们可能认为这是针对出口的东西的钱，并在释放钱之前想要文件和所有这些……

当然，您仍然可以退回现金或支票，它们的问题是速度很慢并且在邮件中丢失（但您的卡也需要邮寄）并且国际交通中的支票往往会产生高额费用并且现金兑换不良率。

最后，你也应该向收款人征求意见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:29:27.150

无论您选择哪种方法，您都应该非常小心，以免违反反洗钱法律。我不确定发送预付借记卡是否合法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:08:05.977

在英国有两家供应商：[Caxton](http://www.caxtonfx.com/) (Visa) 和[Fairfx](http://www.fairfx.com/) (Mastercard)。他们的卡被称为货币卡而不是预付借记卡，但我相信它们正是您所描述的。两者均根据英国金融法进行了全面注册，因此信誉良好且可靠。两者都可在非常广泛的国​​家/地区使用。它们都可用于许多（但不是所有）自动取款机（例如在泰国，它们可用于当地超市的自动取款机，但不能用于当地货币兑换亭）。除了@hol 提到的关于 ATM 的问题，特别是在亚洲，如果存在高度欺诈，当地银行可以并且确实选择停止从两个主要网络之一（通常是万事达卡）接收付款该特定国家/地区的网络。

我相信 Caxton 也提供各种低成本的汇款选择，但我没有使用过这些服务。

今年我在 11 个国家旅行时使用了这两个提供商，主要是在发展中国家，包括在所有访问过的国家中金融体系最不发达的老挝。他们提供了可靠和有用的服务。我与这两个提供商都没有其他联系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T14:51:59.280

你不能问问你的一些用户，或者处于类似情况的国家的人吗？

西联汇款以能够在许多国家/地区向人们付款而广为人知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T16:04:14.913

我会使用贝宝，或者，如果他们接受的话，比特币。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T12:09:32.980

Skrill（前身为 MoneyBookers）也可能是一种选择，因为它们提供随附的万事达卡预付卡。[https://www.moneybookers.com/](https://www.moneybookers.com/)

# mysql - “LIMIT 5,10”在 MySQL 中返回 9 行？

> ID：11963177
> 
> 赞同：6
> 
> 时间：2012-08-15T01:58:59.923
> 
> 标签：mysql, sql, limit

[http://666kb.com/i/c6e4rv80gz9yrn9h5.png](http://666kb.com/i/c6e4rv80gz9yrn9h5.png)

查看我的图片，我将查询限制为 5 个条目，但它返回 9 行？有什么问题，我无法得到它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-15T02:01:15.813

使用 mysql，[`LIMIT`](http://dev.mysql.com/doc/refman/5.5/en/select.html)参数是`offset, row_count`，但第*一个*参数是可选的 - 疯狂，但真实！

所以当你有*两个*参数时，第一个是起始行，第二个是行数。

你问的`LIMIT 5, 10`意思是*10 行，从第 5 行*（不是第 5 行到第 10 行）开始。

你不是第一个，也不会是最后一个对此感到困惑的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T14:41:22.833

在 MySQL 限制函数语法是：

```
SELECT column_name(s)
FROM table_name
LIMIT Rows start , Quantity of Rows for display; 
```

例子：

```
SELECT *
FROM customer
LIMIT 2 , 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T14:24:13.637

我建议转到[mysql 中的这个链接 LIMIT](https://www.w3schools.com/php/php_mysql_select_limit.asp)，在浏览完上面的评论后，我必须指出，它`limit 5, 10`返回 10 行，并且从第 6 行开始。

**LIMIT**：
`limit 10 offset 5`并且`limit 5, 10`，它们都返回**10**行，从第**6**行开始.
我强烈建议转到上面的链接。

希望能帮助到你！！

# python - 用一个变量制作两列？

> ID：11963179
> 
> 赞同：0
> 
> 时间：2012-08-15T01:59:07.523
> 
> 标签：python, html, css, django

所以我目前有一个变量将 X 数量的表单返回到模板并尝试节省页面上的空间我想尝试将它们分成两列但我有点难过如何做到这一点因为我只是在我的 html 生成表单中将 X 作为变量，因此没有什么可以分割/告诉进入第二列。那么我怎样才能让这些从一个变量生成的表格分成两列呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:04:39.510

您可以使用[`cycle`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#cycle)模板标签左右浮动表格。就像是：

```
<style>
.column{
    width:50%;
}
</style>

{% for form in forms %}
<div class="column" style="float:{% cycle 'left' 'right' %}">
     {{ form }}
</div>
{% endfor %} 
```

# javascript - SpiderMonkey js shell 不会碰撞字节码？

> ID：11963181
> 
> 赞同：2
> 
> 时间：2012-08-15T01:59:23.723
> 
> 标签：javascript, shell, bytecode, spidermonkey

我从[mozilla 的 ftp 站点下载了](https://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-mozilla-central/)[适用于 mac](https://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-mozilla-central/jsshell-mac.zip)的每晚js-shell 。

如果我运行：

```
~/Downloads/jsshell-mac/js -D --execute="var a = '100'" 
```

我假设我会得到字节码输出。相反，我什么也得不到。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:13:48.743

似乎没有提到这一点，但是要使此选项起作用，您将需要调试版本。例如，[这个构建](http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/2012-08-15-mozilla-beta-debug/jsshell-mac.zip)应该可以工作，或者您可以获取源代码并自己[构建](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Build_Documentation)。

# php - 当PHP中没有值时如何将数组等于零

> ID：11963182
> 
> 赞同：0
> 
> 时间：2012-08-15T01:59:24.227
> 
> 标签：php, arrays, sum

我这里有数据：

```
Array
(
[0] => Array
    (
        [SiteID] => 147
        [Amount] => 500.00
        [TransactionType] => D
    )

[1] => Array
    (
        [SiteID] => 147
        [Amount] => 500.00
        [TransactionType] => D
    )

[2] => Array
    (
        [SiteID] => 145
        [Amount] => 500.00
        [TransactionType] => R
    )
) 
```

我已经完成了重新加载、赎回和存款的计算并且它正在工作，但是如果站点 ID 没有存款 [D] 或重新加载 [R] 或赎回 [W] 的交易，它应该等于 0。我的代码在这儿：

```
 public function computeGHComponents()
    {
      error_reporting (E_ALL^ E_NOTICE);          

      foreach ($this->transaction as $t){

          $amount = (float) $t['Amount'];

            if (isset($this->totals[ $t['SiteID'] ][ $t['TransactionType'] ])){
                $this->totals[ $t['SiteID'] ][ $t['TransactionType'] ] += (float) $amount;
            } else {
                 $this->totals[ $t['SiteID'] ][ $t['TransactionType'] ] = (float) $amount;
            }
        }

     foreach($this->totals as $key => $value)

        {
          $this->result[$key] = array("Deposit"=>$value['D'], "Redemption"=>$value['W'], "Reload"=>$value['R']);

       }
     print_r($this->result); 

    } 
```

结果应如下所示：

```
 Array
 (
[147] => Array
    (
        [Deposit] => 1000
        [Redemption] => 0
        [Reload] => 0
    )

[145] => Array
    (
        [Deposit] => 0
        [Redemption] => 500.00
        [Reload] => 0
    )

 ) 
```

在此先感谢，请以正确的方式指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:03:29.007

描述含糊不清，问题中缺少信息。所以这是一种盲目的尝试，它可能是你所要求的，但也可能不是：

在最后一个 foreach 内的赋值中，您可以添加 0 作为默认值：

```
$this->result[$key] = array(
  "Deposit"    => array_key_exists('D',$value) ? $value['D'] : 0,            
  "Redemption" => array_key_exists('W',$value) ? $value['W'] : 0,           
  "Reload"     => array_key_exists('R',$value) ? $value['R'] : 0             
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:15:11.250

我会专注于只做一个循环。

```
foreach ($this->transaction as $key => $t){

   $amount = $t['Amount'];

   // set up the array with each postion equal to zero
   $tranTypes = array("Deposit"= 0, "Redemption"=> 0 , "Reload"= 0);

   $transaction = $t['TransactionType'];

   switch($transaction){
     case "D":
        $tranTypes['Deposit'] = $amount;
     break;

     case "R":
         $tranTypes['Redemption'] = $amount;
     break;

     case "W":
         $tranTypes['Reload'] = $amount;
     break;

     }

    $this->result[$key] = $transaction;
} 
```

或这个

```
 foreach($this->totals as $key => $value)

    {

     $this->result[$key]['Deposit']    = isset($value['D']) ? $value['D'] : 0;
     $this->result[$key]['Redemption'] = isset($value['W']) ? $value['W'] : 0; 
     $this->result[$key]['Reload']     = isset($value['R']) ? $value['R'] : 0;
    } 
```

# javascript - fade in images with javascript

> ID：11963187
> 
> 赞同：0
> 
> 时间：2012-08-15T01:59:51.323
> 
> 标签：javascript, map

Without using jquery, is it possible to simultaneously fadein and replace another image?

I've created a map with intricate polygonal areas that onmouseover and onmouseout, replaces imageA with imageB as seen in the following function. However, the transition is too abrupt upon replacing the image. It would be awesome if I can simply add a couple lines of code below the "if (aa==0) {...}" to do this. Unfortunately, my rudimentary knowledge of javascript prevents me from doing so.

```
aa=0;
function replaceImage()
{
if (aa==0) 
  {
  aa=1;
  document.getElementById('imageA').src="img/imageB.png";
  }
else
  {
  aa=0;
  document.getElementById('imageA').src="img/imageA.png";
  }
} 
```

Thanks so much!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:07:59.430

是的，您可以使用循环播放并调整图像的不透明度以淡入和淡出。如果您愿意使用 css3，您可能想查看此链接。[http://css3.bradshawenterprises.com/cfimg/](http://css3.bradshawenterprises.com/cfimg/)

# java - recieving HTTP POST echo response from a PHP file (sending the POSTS works fine, it's the receive that I can't figure out)

> ID：11963190
> 
> 赞同：4
> 
> 时间：2012-08-15T02:00:48.630
> 
> 标签：java, php, android, http-post, echo

So as the title suggest my problem is getting a response to a HTTP POST I'm making. What SHOULD be happening is I send a bunch of variables, the PHP checks the database for them and sends back to me the result (as an echo to the page).

Here is the android code:

```
 public class CheckChallenge extends AsyncTask<String, Void, String> 
  {
    @Override
    protected String doInBackground(String... urls) 
    {
      String response = "";
      try
      {
        URL = urls[0];
   ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
   nameValuePairs.add(new BasicNameValuePair("victim",NetPlay.myId)); 
   // need to return these to an array
   nameValuePairs.add(new BasicNameValuePair("rival",rivalid));

        nameValuePairs.add(new BasicNameValuePair("word","null"));
        nameValuePairs.add(new BasicNameValuePair("won","0"));

          HttpClient httpclient = new DefaultHttpClient();
          HttpPost httppost = new      
          HttpPost("http://www.hanged.comli.com/check-rival.php");
          httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

          HttpResponse execute = httpclient.execute(httppost);
          HttpEntity entity = execute.getEntity();

          //InputStream is = entity.getContent();

          //mText.setText(is.toString());

         Log.i("postData", execute.getStatusLine().toString());
         //HttpEntity entity = response.getEntity();

      }
      catch(Exception e)
      {
              Log.e("log_tag", "Error in http connection"+e.toString());
      }
            return response;
        } 

    @Override
    protected void onPostExecute(String result) 
    {
        // CHECK ENTIRE DATABASE FOR MY ID //
        // IF MY ID IS THERE THEN THAT MEANS IVE CHALLENGED SOMEONE //

    }

  } 
```

Here is the PHP which I think is ok just including this for completeness: $connect = mysql_connect("$mysql_host", "$mysql_user", "$mysql_password")or die("cannot connect"); mysql_select_db("$mysql_database", $connect)or die("cannot select DB"); session_start();

```
$victim = $_POST['victim'];
$rival = $_POST['rival'];
$word = $_POST['word'];
$won = $_POST['won'];

$query = "SELECT rival FROM currentgames";
$result = mysql_query($query);

 if (!$result) 
 {
echo "Could not successfully run query ($sql) from DB: " . mysql_error();
exit;
}

if (mysql_num_rows($result) == 0) 
{
echo "No rows found, nothing to print so am exiting";
exit;
}

 while ($row = mysql_fetch_assoc($result)) 
{
 echo $row["rival"];
} 
```

Any help with this would be very appreciated, trying to get my head around all this HTTP POSTing stuff.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T02:27:35.673

发送 HTTP 请求并读回 HTTP 响应的示例：

```
String res = "";
String url = "http://www.domain.com/youscript.php";
URL urlObj = new URL(url);
URLConnection lu = urlObj.openConnection();

// Send data - if you don't need to send data 
// ignore this section and just move on to the next one
String data = URLEncoder.encode("yourdata", "UTF-8");
lu.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(lu.getOutputStream());
wr.write(data);
wr.flush();

// Get the response
BufferedReader rd = new BufferedReader(new InputStreamReader(lu.getInputStream()));
String line = "", res = "";
while ((line = rd.readLine()) != null) {
  res += line;
}

wr.flush();
wr.close();
System.out.println(res); 
```

# vector - Clojure“包含”的问题

> ID：11963193
> 
> 赞同：10
> 
> 时间：2012-08-15T02:01:17.360
> 
> 标签：vector, clojure, contains

我正在使用 Closure Box 浏览一些 Clojure 教程，并输入以下代码：

```
user> (def stooges (vector "Moe" "Larry" "Curly"))
#'user/stooges
user> (contains? stooges "Moe")
false 
```

这不应该评估为 TRUE 吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T02:10:36.333

这是一个常见的陷阱！我记得当我开始使用 Clojure 时，我陷入了这个 :-)

[包含？](http://clojuredocs.org/clojure_core/clojure.core/contains_q)检查集合中是否存在索引（0、1、2 等）。

你可能想要这样的东西：

```
(some #{"Moe"} stooges)
=> "Moe"    <counts as boolean true>

(some #{"Fred"} stooges)
=> nil      <counts as boolean false> 
```

或者您可以定义自己的版本，例如：

```
(defn contains-value? [element coll]
  (boolean (some #(= element %) coll)))

(contains-value? "Moe" stooges)
=> true 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-15T02:05:42.867

向量类似于数组。如果集合中存在则[`contains?`](http://clojuredocs.org/clojure_core/clojure.core/contains_q)返回。您应该寻找“键/索引”0、1 或 2`true``key`

```
user=> (def stooges (vector "Moe" "Larry" "Curly"))
#'user/stooges
user=> (contains? stooges 1)
true
user=> (contains? stooges 5)    
false 
```

如果您使用的是哈希...

```
user=> (def stooges {:moe "Moe" :larry "Larry" :curly "Curly"})
#'user/stooges
user=> (contains? stooges :moe)
true
user=> (contains? stooges :foo)
false 
```

正如 mikera 建议的那样，您可能想要类似[clojure.core/some](http://clojuredocs.org/clojure_core/clojure.core/some)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-15T02:14:44.347

包含？支持 Set，如果你使用 clojure-1.4

```
user=> (contains? #{:a, :b} :a)
true

user=> (contains? (set stooges) "Moe")
true 
```

# uml - CSS 的类图有意义吗？

> ID：11963198
> 
> 赞同：0
> 
> 时间：2012-08-15T02:02:35.687
> 
> 标签：uml, class-diagram

如何为 CSS 创建类图？拥有 CSS 的类图真的有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:20:57.870

IMO 类图对 CSS 没有多大意义——至少对于 1:1 映射。类不相互扩展，但它们的实例（标签）从封闭标签继承属性。此外，实例可以有许多（或没有）类。因此，在 UML 类的意义上没有继承。此处解释了差异，例如：http: [//dorward.me.uk/www/css/inheritance/](http://dorward.me.uk/www/css/inheritance/)

此外，没有用 CSS 表示的关联。标记类不能以正式的方式相互关联。实际关系在实例级别表示 - 标签相互关联：[http ://webdesign.about.com/od/cssselectors/qt/html-tag-relationships.htm](http://webdesign.about.com/od/cssselectors/qt/html-tag-relationships.htm)

所以我的结论是：如果你真的想使用 UML，你将需要一个描述实例的图表——例如一个对象图（带有对象的类 Daigram）或包含它们的实例的组件。

绘制普通 HTML 文档的轮廓并用类和应用样式注释它们很可能会好得多……

# google-maps-api-3 - Why google map with kml always zoom to the max level?

> ID：11963199
> 
> 赞同：0
> 
> 时间：2012-08-15T02:02:51.463
> 
> 标签：google-maps-api-3, kml

I made a google map app use google map api v3 and kml file. However, sometime it work, and sometime it always zoom to the max level and center is not mine options.center(near Africa).

Why is it?

And my kml file was uploaded to mine Google Map account.

```
function initialize1() {
var myLatlng = new google.maps.LatLng(30.566991,114.315491);
var myOptions = {
zoom: 10,
center: myLatlng,
overviewMapControl:true,
overviewMapControlOptions: {
 opened:true  
},
scaleControl:true,
mapTypeId: google.maps.MapTypeId.ROADMAP
}

map1= new google.maps.Map(document.getElementById("map_canvas1"), myOptions);

var nyLayer = new google.maps.KmlLayer('https://maps.google.com/maps/ms? **************',
{suppressInfoWindows: true});
nyLayer.setMap(map1);
google.maps.event.addListener(nyLayer, 'click', function(kmlEvent) {
var text = kmlEvent.featureData.description;
showInDiv(text);
});
} 
```

Thanks very much,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:16:27.243

当 kml 文件不存在/找不到时，就会发生这种行为。您尚未提供文件的 URL 以允许对其进行测试。

要检查的另一件事是文件的有效性： [http ://www.feedvalidator.org/](http://www.feedvalidator.org/)

您还可以检查 API 提供的[KmlLayerStatus](https://developers.google.com/maps/documentation/javascript/reference#KmlLayerStatus)以查看它报告的内容。

# ruby - How to pass a URL in params?

> ID：11963200
> 
> 赞同：1
> 
> 时间：2012-08-15T02:03:14.990
> 
> 标签：ruby, url

I have a url, "localhost/test/http://myimage.com/" (I'm passing myimage.com, because it's hosted on another site and I'm accessing it via an api) my question is how do I go about encoding the image portion of the URL? I thought about doing a gsub on the '.' and '/' and then gsubing them back, but I'm wondering if there's an easier way. Thanks for your help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T02:15:17.377

你可以使用`URI::encode_www_form_component(str)`和`URI::decode_www_form_component`

检查：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:33:01.120

您可以使用 uri 库来转义和取消转义 url

```
require 'uri'
escaped = URI.escape(data, Regexp.new("[^#{URI::PATTERN::UNRESERVED}]")) 
```

你可以用

```
original = URI.unescape(escaped) 
```

# grails - Stoping saved request that triggered the login, always redirect to `/`

> ID：11963201
> 
> 赞同：1
> 
> 时间：2012-08-15T02:03:21.883
> 
> 标签：grails, grails-2.0

I have a web application that contains a REST api that is interacted with by the client application that lives at `/`. When a user session times out and the client js application makes a request to the REST api, that request will trigger a login event. Once the user logs in the user is then taken to the REST api endpoint which just displays a JSON response. I would like to hard wire the login page to always redirect to `/`.

Edit 1: I'm using spring-security-core plugin with the openid plugin as well and grails 2.0.4.

Edit 2: So I managed to get a solution working, however its a bit crude and I would like to know if there is a more elegant solution out there.

I created a simple filter in `grails-app/conf/LoginRedirectFilters.groovy`:

```
class RedirectLoginFilters {
    def filters = {
        redirectAfterLogin (uri: '/api/*') {
            before = {
                if (session["LOGGING_IN"])
                    redirect uri: "/"
            }
            after = {
                if (session["LOGGING_IN"])
                    session["LOGGING_IN"] = false
            }
        }
    }
} 
```

And in my `auth` function inside of `OpenIdController.groovy` I added the session flag `LOGGING_IN`:

```
def auth = {                                                                                     

    def config = SpringSecurityUtils.securityConfig                                              

    if (springSecurityService.isLoggedIn()) {                                                    
        redirect uri: config.successHandler.defaultTargetUrl                                     
        return                                                                                   
    }                                                                                            

    session["LOGGING_IN"] = true
    .
    .
    . 
```

This is working properly by only checking if the `LOGGING_IN` flag is true when an api endpoint is called, and it also kills the flag after one request so it won't interfere with subsequent client api calls. I realize this is pretty convoluted, so if there is a better solution please let me know, thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:14:30.063

为什么不能在过滤器中也使用相同的“springSecurityService.isLoggedIn()”？我很确定这也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:18:33.363

我想我完全误解了你想要实现的目标，但是如果你总是想在成功登录后重定向到“/”，只需在你的中设置这些属性`Config.groovy`：

```
grails.plugins.springsecurity.successHandler.alwaysUseDefault = true
grails.plugins.springsecurity.successHandler.defaultTargetUrl = "/" 
```

如果您想要对此采取不同的行为，则必须充实您的问题。

# javascript - what exactly is the point of javascript prototype

> ID：11963209
> 
> 赞同：1
> 
> 时间：2012-08-15T02:04:41.667
> 
> 标签：javascript, prototype

i get absolutely the same results whether i use "this.value=1;" inside the constructor function or just put property value inside prototype of function constructor - "MyClass.prototype.value =1;"

```
function MyClass() {
 //this.value=1;
}
MyClass.prototype.value =1;

var a = new MyClass();
document.write(a.value + "<br>");
a.value=13;
document.write(a.value + "<br>");

var b = new MyClass();
document.write(b.value); 
```

result is :

1

13

1

since last value is 1, obviously every object (a,b) get it's own copy of value inside it's own memory block so what exactly is the use of prototype values if they are not shared between objects?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T02:07:33.923

你的测试是似是而非的。原型值在值*之间*共享，但在写作中`a.value = 13`，您已将[属性](http://en.wikipedia.org/wiki/Variable_shadowing)`MyClass.prototype.value`隐藏在`a`. 试穿这个尺寸：

```
function MyClass() {}
MyClass.prototype.value = 1;

var a = new MyClass();
document.write(a.value + "<br>");
a.__proto__.value=13;
document.write(a.value + "<br>");

var b = new MyClass();
document.write(b.value); 
```

（[演示](http://jsfiddle.net/mattball/e3Zhf/)）

对象属性查找沿着原型链向上传播，直到原型为空或找到具有指定名称的属性。在您的原始测试中，由于在该对象上调用了一个属性，因此在到达原型之前就结束了`a.value = 13`查找。`a.value``a``value`

更多阅读：

*   [JavaScript .prototype 是如何工作的？](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)
*   [继承和原型链](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T02:13:56.107

> *“我得到完全相同的结果”*

只是因为你还不知道如何解释你的测试结果。

所有实例共享原型的属性，但实例可以具有与原型同名的实例属性。

因此，当您说`a.value = 13`要在实例上创建属性`a`但原型`value`属性仍然是`1`.

如果您改为说即使您在创建and*后*`MyClass.prototype.value = 13`更改原型，您也会看到这两者`a.value`并`b.value`报告。`13``value` *`a``b`*

# python - Local Variable Scope in Tornado (python)

> ID：11963210
> 
> 赞同：3
> 
> 时间：2012-08-15T02:04:47.703
> 
> 标签：python, html, templates, tornado

just wondering what the deal is with the scope of variables in a tornado template. I have this code in a template, but it fails!

```
 {% set dictionary = {'a' : 1, ... more letters here ... 'z' : 26} %}
    {% set sum = 0 %}
    {% for y in x %}
        {% sum += int(dictionary[y.lower()]) #x is a string, y a char %}
    {% end %}
    {{ sum }} 
```

But I get:

```
ParseError: unknown operator: 'sum' 
```

What's going on?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T02:29:05.343

只需`set`在之前使用`sum +=`

```
{% set dictionary = {'a' : 1, ... more letters here ... 'z' : 26} %}
{% set sum = 0 %}
{% for y in x %}
    {% set sum += int(dictionary[y.lower()]) #x is a string, y a char %}
{% end %}
{{ sum }} 
```

# php - How to get FGETCSV to read entire Japanese cell

> ID：11963213
> 
> 赞同：2
> 
> 时间：2012-08-15T02:05:12.100
> 
> 标签：php, encoding, fgetcsv

I have a large study conducted with about 50 questions and 70,000 entries, so manually editing or using pivot tables just won't really work, I need to upload the data into a database. I can't get the Japanese characters to be read with any accuracy while using fgcsv(). I've tried setting the locale to UTF-8 and SJIS, but neither one seem to want to read all of the Japanese characters. I read somewhere this might be a bug, but I don't know..

The data looks like this:

```
Q-004   必須回答    あなたは、以下のどちらにお住まいですか？    S/A
1       北海道 Hokkaido
2       青森県 Aomori
3       岩手県 Iwate
4       宮城県 Miyagi
5       秋田県 Akita 
```

Here is my code:

```
setlocale(LC_ALL, 'ja_JP.SJIS');
        $fp = fopen($_POST["filename"],'r') or die("can't open file");
            $csv_line = fgetcsv($fp,1024);
            $query = "";
            $count = 0;
            $question = false;
            while($csv_line = fgetcsv($fp,1024)) {

                if (!$question && strpos($csv_line[0],"Q-")!== false)
                {
                    echo "Found a question: ".$csv_line[2] . "<br>";
                    $question = true;
                }
                else if($question && strlen($csv_line[0])==0)
                {
                    echo "<hr>";
                    $question = false;
                }
                else if($question && intval($csv_line[0])>0)
                {
                    echo $csv_line[0]. " has value ". $csv_line[2]." - ".$csv_line[3]. "<br>";
                }       

                $count++;
            }
        echo "$count records read successfully";
        fclose($fp) or die("can't close file"); 
```

Here is the result:

```
Found a question: A以下のどちらにお住まいですか？
1 has value k海道 - Hokkaido
2 has value X県 - Aomori
3 has value - Iwate
4 has value {城県 - Miyagi
5 has value H田県 - Akita 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:18:56.007

当谈到在 PHP 中读取 CSV 时，我会说......不要这样做，而是使用 SQL 数据库，其中您可以在 MySQL中设置诸如**ujis_japanese_ci 之类的排序规则。**

您应该能够使用 phpMyAdmin 轻松地将您的 CSV 导入 MySQL 数据库（如果您有的话），然后从 MySQL 数据库中呈现数据，而不是读取 CSV 文件。

这是一种解决方法，当然，但我的一般经验是 CSV + 外国/特殊字符 == 问题。

我相信至少值得一试。祝你好运

# android - Android 模拟器因硬件加速和手机应用程序而崩溃

> ID：11963217
> 
> 赞同：0
> 
> 时间：2012-08-15T02:05:35.520
> 
> 标签：android, android-emulator

我有一个应用程序，它使用 aa 绘制标志在`TextView`. 此应用程序在模拟器上运行良好，直到我`GPU Rendering`在 Android 4.03 AVD 上启用。

[http://developer.android.com/tools/devices/emulator.html#acceleration](http://developer.android.com/tools/devices/emulator.html#acceleration)

启用此功能后，整个模拟器将锁定，并且在我设置绘画标志时不再响应。

```
TextView message = (TextView)v.findViewById(R.id.message);
message.setPaintFlags(day.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

这是在`ListView`适配器内部并且在加载时，它调用**getView(...)**方法并点击**setPaintFlags(...)**方法 6 次并在第 6 次后崩溃。

如果我注释掉**setPaintFlags(...)**行，它不会崩溃。如果我在手机上安装它，一旦触发删除，应用程序就会崩溃。

我在清单上设置了这个解决了模拟器上的问题，但仍然在手机上崩溃。

```
<application android:hardwareAccelerated="false"> 
```

有没有人有过手机崩溃的经验，但没有模拟器（除非它是硬件加速的）。

我已经挖掘并发现了其他类似的帖子[Android 模拟器崩溃；“emulator-arm.exe 停止响应”](https://stackoverflow.com/questions/8627098/android-emulator-crashes-emulator-arm-exe-stopped-responding)，但在我的情况下，它也会在手机上崩溃。

**解决方案**原来是巧合，与加速度无关。通过 LogCat 找到空指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:58:27.303

*根据上面的评论*：

由于模拟器很好，而且是手机设备崩溃了，所以使用 USB 调试来获取 LogCat 输出。这将有助于缩小崩溃/错误的原因。

# python - Python sqlite3，tkinter显示多行

> ID：11963224
> 
> 赞同：0
> 
> 时间：2012-08-15T02:06:22.227
> 
> 标签：python, sqlite, tkinter

我是 python 新手，最近我使用 Python 和 Sqlite3 和 tkinter 制作字典。当我运行代码时，它在 IDLE 中返回多行，但在 GUI 中它只显示最后一个结果。我想在 GUI 中显示所有信息。感谢您的任何帮助和建议。

```
import tkinter
import sqlite3
class Dictionary:
def __init__(self,master =None):
    self.main_window = tkinter.Tk()
    self.main_window.title("Lai Mirang Dictionary")
    self.main_window.minsize( 600,400)
    self.main_window.configure(background = 'paleturquoise')
    self.frame1 = tkinter.Frame()
    self.frame2= tkinter.Frame(bg = 'red')
    self.frame3 =tkinter.Text( foreground = 'green')
    self.frame4 = tkinter.Text()

    self.lai_label = tkinter.Label(self.frame1,anchor ='nw',font = 'Times:12', text = 'Lai',width =25,borderwidth ='3',fg='blue')
    self.mirang_label = tkinter.Label(self.frame1,anchor ='ne',font = 'Times:12', text = 'Mirang',borderwidth ='3',fg ='blue')

    self.lai_label.pack(side='left')
    self.mirang_label.pack(side = 'left')

    self.kawl_buttom= tkinter.Button(self.frame2 ,fg = 'red',font = 'Times:12',text ='Kawl',command=self.dic,borderwidth ='3',)

    self.lai_entry = tkinter.Entry(self.frame2, width= 28, borderwidth ='3',)
    self.lai_entry.focus_force()
    self.lai_entry.bind('<Return>', self.dic,)
    self.lai_entry.configure(background = 'khaki')

    self.lai_entry.pack(side='left')
    self.kawl_buttom.pack(side = 'left')

    self.value = tkinter.StringVar()
    self.mirang_label= tkinter.Label(self.frame3,font = 'Times:12',fg = 'blue',textvariable = self.value,justify = 'left',wraplength ='260',width = 30, height = 15,anchor = 'nw')
    self.mirang_label.pack()
    self.mirang_label.configure(background = 'seashell')

    self.copyright_label = tkinter.Label(self.frame4,anchor ='nw',font = 'Times:12:bold',text = "copyright @ cchristoe@gmail.com",width = 30,borderwidth = 3, fg = 'purple',)
    self.copyright_label.pack()

    self.frame1.pack()
    self.frame2.pack()
    self.frame3.pack()
    self.frame4.pack()

    tkinter.mainloop()
    self.main_window.quit()

def dic(self, event = None):
    conn = sqlite3.connect('C:/users/christoe/documents/sqlite/laimirangdictionary.sqlite')
    c = conn.cursor()
    kawl = self.lai_entry.get()
    kawl = kawl + '%'
    c.execute("SELECT * FROM laimirang WHERE lai LIKE ?", (kawl,))
    c.fetchall      
    for member in c:
        out = (member)
        self.value.set(out)
        print(out, )

dic=Dictionary() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T12:29:52.107

你需要改变：

```
 c.execute("SELECT * FROM laimirang WHERE lai LIKE ?", (kawl,))
 c.fetchall      
 for member in c:
     out = (member)
     self.value.set(out)
     print(out, ) 
```

至：

```
for member in c.execute("SELECT * FROM laimirang WHERE lai LIKE ?", (kawl,)):
    current_text = self.value.get()
    new_text = current_text +( "\n" if current_text else "") +" ".join(member)
    self.value.set(new_text) 
```

新版本获取该值的当前值`StringVar`，然后为返回的每一行附加返回的结果，并在其间附加一个空格，每一行在其自己的行上。但是，您所做的只是将 更新为`StringVar`当前成员对象，因此它只有最后一个值。

这是多行的外观：

![这是它目前的样子](../Images/acbe42d353ea921f9e6c4d046225c26e.png)

# windows-phone-7 - 数据模板 wp7 的数据绑定

> ID：11963225
> 
> 赞同：0
> 
> 时间：2012-08-15T02:06:28.373
> 
> 标签：windows-phone-7

我在内容面板中有一个列表框，其中有一个数据模板，其中有一个文本框，该文本框绑定到底层页面的依赖属性。点击时文本框应更新其文本。它在没有数据模板的情况下工作正常，但在数据模板文本框中没有更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:56:58.367

我想通了。我们无法通过那里的名称访问数据模板内的控件。

# iphone - 将 PDF 文件复制到 iBooks 图书馆

> ID：11963228
> 
> 赞同：6
> 
> 时间：2012-08-15T02:07:20.230
> 
> 标签：iphone, ios, pdf, ibooks

我正在开发一个示例应用程序，用户可以在我的应用程序包中读取 pdf 文件和 pdf 文件，并且我使用 Web 视图来读取这些文件。现在我想添加一个按钮，允许用户单击并将 pdf 文件复制到 iBooks 库，这意味着当用户执行此操作后，当用户打开 iBooks 应用程序时，此 PDF 文件已经在 iBooks 库中可用。任何关于这个问题的想法，请帮助我，非常感谢。PS：我想制作[这个链接](http://www.iphonelife.com/blog/7032/how-put-your-pdf-files-ibooks)，但我不想在用户点击按钮时立即在 iBooks 中打开 pdf 文件，我只希望用户在此之后随时打开 ibooks，用户可以在书架上看到这本 pdf 书

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T02:35:33.870

遗憾的是，没有可用于直接向 iBooks 添加内容的 API。

它的工作原理是您的应用程序使用 a`UIDocumentInteractionController`向用户展示在支持您指定给控制器的文件类型的应用程序中打开 PDF 的能力。如果 iBooks 安装在用户的设备上，其中一款应用程序就是 iBooks。

其他资源：

*   [来自 developer.apple.com 的 UIDocumentInteractionController 示例应用程序](http://developer.apple.com/library/ios/samplecode/DocInteraction/DocInteraction.zip)

*   [UIDocumentInteractionController 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)

# javascript - 弹出框如何在移动设备上响应？

> ID：11963234
> 
> 赞同：1
> 
> 时间：2012-08-15T02:07:46.423
> 
> 标签：javascript, html, mobile, twitter-bootstrap, popover

建议/询问将网站上的 div 设置为弹出框（悬停）类型。但是这个功能是如何在网站的移动版本上实现的。根据 twitter bootstrap [page](http://twitter.github.com/bootstrap/javascript.html#popovers)，它具有三个触发选项：`trigger string 'hover' how tooltip is triggered - hover | focus | manual` 这些将如何发生？：

*   徘徊
*   重点
*   手动的

$('#example').popover(选项)

我没有现成的平板电脑或移动设备来测试，并且这种查看/访问的行为没有得到很好的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:42:09.993

`hover`当用户点击时触发`#example`。“Manual”会出现，因为您亲自在 JavaScript 中显示或隐藏它。

# javascript - javascript变量未定义

> ID：11963240
> 
> 赞同：10
> 
> 时间：2012-08-15T02:08:20.757
> 
> 标签：javascript

首先，让我们看一下代码。

```
var a=0;
b=1;
document.write(a);
function run(){
    document.write(b);
    var b=1;
}
run(); 
```

我认为结果是。`01`但实际上，结果是`0undefined`。

然后我修改这段代码。

```
var a=0;
b=1;
document.write(a);
function run(){
    document.write(this.b); //or document.write(window.b)
    var b=1;
}
run(); 
```

是的，这次它按预期运行。`01`. 我无法理解，为什么？

更有趣的是，我再次修改了代码。

```
var a=0;
b=1;
document.write(a);
function run(){
    document.write(b);
    //var b=1;       //I comment this line
}
run(); 
```

结果是 01。

那么，有人可以解释一下吗？

感谢您分享您的观点。我简化了这段代码

```
b=1;
function run(){
    console.log(b); //1
} 
```

二：

```
b=1;
function run(){
    var b=2;
    console.log(b); //2
} 
```

三：

```
b=1;
function run(){
    console.log(b); //undefined
    var b=2;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T02:30:33.597

当您在函数中引用变量时，JS 首先检查该变量是否在当前范围内（即在该函数内）声明。如果未找到，它将在包含范围内查找。如果仍然没有找到，它会*在下一个*作用域中查找，依此类推，直到最终到达全局作用域。（请记住，您可以将函数嵌套在彼此内部，这就是您获得多个级别的包含范围的方式，尽管您的示例当然不会这样做。）

该声明：

```
b=1; 
```

*without* `var`声明了一个可以在任何函数中访问的全局变量，*除了*在你的第一个函数中你还声明一个 local `b`。这称为[变量阴影](http://en.wikipedia.org/wiki/Variable_shadowing)。

“但是”，你说，“我声明本地`b` *之后* `document.write(b)`”。在这里，您遇到了“提升”声明。JS 解释器将在函数中任何位置声明的变量视为在函数顶部声明的变量（即，它被“提升”到顶部），*但是*，任何值赋值都发生在适当的位置。所以你的第一个函数实际上是这样执行的：

```
function run(){
    var b;              // defaults to undefined
    document.write(b);  // write value of local b
    b=1;                // set value of local b
} 
```

在你使用的第二个函数`this.b`中，你会发现`this`引用`window`和全局变量本质上是 的属性`window`。因此，您正在访问全局`b`并忽略本地。

在您的第三个函数中，您根本没有声明本地函数`b`，因此它引用了全局函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T02:10:58.090

当您编写 时`b = 1`，您正在全局对象中创建一个属性。
在一个普通的函数中，`b`会引用这个全局的。

由于您的函数包含`var b;`,`b`函数内指的是局部变量。（`var`语句在整个函数中创建局部变量，无论在哪里`var`）。但是，语句 ( )
的可执行部分仅在该点执行。`var``b = 1`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T02:16:40.773

var 指令是在预执行阶段处理的，在`b`之前成为局部变量`document.write(b);`，所以当时`b`是`undefined`。

***注意：***为变量赋值是在执行时，所以你可以想象你的代码如下所示。

```
function run(){
    document.write(b);
    var b=1;
} 
```

是相同的：

```
function run(){
    var b;
    document.write(b);
    b=1;
} 
```

***补充：***

这就是为什么**将每个 var 定义放在函数顶部**是一种好习惯的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-02T10:42:27.213

这段代码对我来说很好

```
 if(var_name === "undefined"){
     alert(var_name+' : undefined');
   } 
```

# php - 如何指示 PHP 数组中的最后一个索引？

> ID：11963241
> 
> 赞同：0
> 
> 时间：2012-08-15T02:08:49.167
> 
> 标签：php, arrays, email, indices

我有一个简单的 mail() 脚本，它通过用逗号分隔电子邮件来动态发送到多封电子邮件。

```
<?php

$sendto = array("email@gmail.com", "email@zoho.com", "email@mail.usf.edu");
foreach ($sendto as $email)
{
    if ($email is the last indice in the array..) // <-- here
        $to = $email;
    else
        $to = $email . ', ';
}

$subject = "test message";
$msg = "this is a test";

if (mail($to, $subject, $msg)) 
    echo "message sent";
else 
    echo "uh oh";
?> 
```

我如何识别（这是我数组中的最后一条数据）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T02:11:33.143

没必要。

```
$to = implode(', ', $sendto); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T02:13:15.420

php 包括`implode`或`join`在这里会更好地工作：

```
$to = implode(', ', $sendto); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T02:16:56.340

只需让您的 if 子句使用该[`end`](http://php.net/manual/en/function.end.php)功能：

```
if ($email == end($sendto)) 
```

# c# - 如何以类型安全的方式编写以列名作为参数的 LINQ 查询

> ID：11963242
> 
> 赞同：5
> 
> 时间：2012-08-15T02:08:53.427
> 
> 标签：c#, linq, lambda, linq-to-entities, expression

我正在寻求有关如何以类型安全的方式使用 LINQ 实现此目的的帮助。

我需要对包含许多列的“性能”表执行搜索。根据为搜索指定的条件，我需要选择列并对具有给定值的列执行搜索。

```
private static IQueryable<Investment> PerformanceSearch(IQueryable<Investment> investments, **??? searchColumn**, double minValue, double maxValue)
{
  var entity = ExtendedEntities.Current;

  investments = from inv in entity.Investments 
                join performance in entity.Performances on inv.InvestmentID equals perfromance.InvestmentID
                where **performance.searchColumn** >= minValue && **performance.searchColumn** = maxValue
  return investments;
} 
```

现在我正在寻求您的帮助：

1.  如何以类型安全的方式将“searchColumn”列传递给此方法？我正在考虑创建一个字典对象以适应某种方式来维护实体框架中的列名。但不知道如何实现这一点。

2.  如何使用传递的 columnName 并应用 where 子句执行 LINQ 查询。

我不能使用 If Else 或 Switch case，如下所示是可能的搜索列的列表...

```
/*
 * Search Columns can be:
 *      "Return1Month", "Return2Months", "Return3Months", ... almost 10 more and
 *      "Risk1Month", "Risk2Months", "Risk3Months", ... almost 10 more and
 *      "TrackingError1Month", "TrackingError2Months", "TrackingError3Months", ... almost 10 more and
 *      2 more similar set of columns ... 
 */ 
```

我花时间在 Stackoverflow、Microsoft 和其他博客上，并考虑使用 Dynamic LINQ，但它不是类型安全的。似乎使用*表达式*可以实现，但无法正常工作。

任何建议表示赞赏。

**编辑 -**

**另一个需要提及的项目 - 所有搜索列都存在于“性能”表中。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T03:06:15.673

毫无疑问，LINQ 表达式是以强类型方式动态构建 LINQ 查询的最佳方式。放弃动态 LINQ 库是绝对正确的！LINQ 表达式一开始很难掌握，但我向你保证，最终的回报是值得付出努力的。

这是一个使用 LINQ 表达式来完成您想要的操作的示例。您会注意到它不包含任何字符串列名、switch 语句、帮助程序类或枚举。您需要导入`System.Linq.Expressions`命名空间才能使其工作：

**编辑：**该示例现在包括按一个连接表上的列过滤，同时从另一个表中选择一个元素。我还`investments`从方法中删除了参数，因为您实际上不需要传递它。您只是在方法中直接访问 EF 表（我用`_performance`and代替`_investments`）。

```
 public static IQueryable<Investment> PerformanceSearch(Expression<Func<Performance, double>> searchColumn, double minValue, double maxValue) {

        // LINQ Expression that represents the column passed in searchColumn
        // x.Return1Month
        MemberExpression columnExpression = searchColumn.Body as MemberExpression;

        // LINQ Expression to represent the parameter of the lambda you pass in
        // x
        ParameterExpression parameterExpression = (ParameterExpression)columnExpression.Expression;

        // Expressions to represent min and max values
        Expression minValueExpression = Expression.Constant(minValue);
        Expression maxValueExpression = Expression.Constant(maxValue);

        // Expressions to represent the boolean operators
        // x.Return1Month >= minValue
        Expression minComparisonExpression = Expression.GreaterThanOrEqual(columnExpression, minValueExpression);

        // x.Return1Month <= maxValue
        Expression maxComparisonExpression = Expression.LessThanOrEqual(columnExpression, maxValueExpression);

        // (x.Return1Month >= minValue) && (x.Return1Month <= maxValue)
        Expression filterExpression = Expression.AndAlso(minComparisonExpression, maxComparisonExpression);

        // x => (x.Return1Month >= minValue) && (x.Return1Month <= maxValue)
        Expression<Func<Performance, bool>> filterLambdaExpression = Expression.Lambda<Func<Performance, bool>>(filterExpression, parameterExpression);

        // use the completed expression to filter your collection
        // This requires that your collection is an IQueryable.
        // I believe that EF tables are already IQueryable, so you can probably
        // drop the .AsQueryable calls and it will still work fine.
        var query = (from i in _investments
                     join p in _performance.AsQueryable().Where(filterLambdaExpression)
                       on i.InvestmentId equals p.InvestmentId
                     select i);

        return query.AsQueryable();

    } 
```

您可以这样调用`PerformanceSearch`，以这个简单的控制台应用程序为例：

```
 private static IList<Investment> _investments;
    private static IList<Performance> _performance;

    static void Main(string[] args) {

        // Simulate your two Entity Framework tables
        BuildMockDataset();

        // Return1Month is on Performance, but I return IQueryable<Investment>;
        var results = PerformanceSearch(x => x.Return1Month, 300, 1000);

    } 
```

此示例足够通用，允许您从as传递`double`属性，将最小值和最大值指定为。`Performance``searchColumn``double`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T02:51:37.353

我认为您应该能够仅使用*Func<TIn,TOut>*参数（在这种情况下不需要表达式）来执行此操作。无论列的类型是什么，都使函数泛型成为类型安全的。这就是我的想法...

```
private static IQueryable<Investment> PerformanceSearch<TMember>(
                              IQueryable<Investment> investments, 
                              Func<Performance,TMember> SearchColumn, 
                              TMember minValue, 
                              TMember maxValue)
{
    var entity = ExtendedEntities.Current;

    investments = from inv in entity.Investments 
        join perfromance in entity.Performances on inv.InvestmentID equals perfromance.InvestmentID
        where SearchColumn(perfromance) >= minValue && SearchColumn(perfromance) <= maxValue
    return investments;
} 
```

然后你会像这样调用它：

```
var results = PerformanceSearch<double>(investments, p => p.Return1Month, 10.0, 20.0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T02:27:59.423

您可以构建一个包含强类型 where 子句的字典，如下所示：

```
var wheres = new Dictionary<string, Expression<Func<Performance, bool>>>()
{
    { "Return1Month", p => p.Return1Month >= minValue && p.Return1Month <= minValue },
    { "Return2Months", p => p.Return2Months >= minValue && p.Return2Months <= minValue },
    { "Return3Months", p => p.Return3Months >= minValue && p.Return3Months <= minValue },
    { "Risk1Month", p => p.Risk1Month >= minValue && p.Risk1Month <= minValue },
    { "TrackingError1Month", p => p.TrackingError1Month >= minValue && p.TrackingError1Month <= minValue },
    /* etc */
}; 
```

完整的方法如下所示：

```
private static IQueryable<Investment> PerformanceSearch(IQueryable<Investment> investments, string searchColumn, double minValue, double maxValue)
{
    var entity = ExtendedEntities.Current;

    var wheres = new Dictionary<string, Expression<Func<Performance, bool>>>()
    {
        { "Return1Month", p => p.Return1Month >= minValue && p.Return1Month <= minValue },
        { "Return2Months", p => p.Return2Months >= minValue && p.Return2Months <= minValue },
        { "Return3Months", p => p.Return3Months >= minValue && p.Return3Months <= minValue },
        { "Risk1Month", p => p.Risk1Month >= minValue && p.Risk1Month <= minValue },
        { "TrackingError1Month", p => p.TrackingError1Month >= minValue && p.TrackingError1Month <= minValue },
        /* etc */
    };

    var investments = (
        from inv in entity.Investments 
        join perfromance in entity.Performances.Where(wheres[searchColumn]) on inv.InvestmentID equals perfromance.InvestmentID
        select inv;

    return investments;
} 
```

与实际的数据库调用相比，为每个调用构建字典的速度非常快，所以不要太担心。如果您确实决定担心，则将字典设为静态私有字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T02:18:09.777

```
private static IQueryable<Investment> PerformanceSearch(IQueryable<Investment> investments, string searchColumn, double minValue, double maxValue)
{
  var entity = ExtendedEntities.Current;

  investments = from inv in entity.Investments 
                join perfromance in entity.Performances on inv.InvestmentID equals perfromance.InvestmentID
                where
                (
                    (searchColumn = "Return1Month" && perfromance.Return1Month >= minValue && perfromance.Return1Month <= maxValue) ||
                    (searchColumn = "Return2Months" && perfromance.Return2Months >= minValue && perfromance.Return2Months <= maxValue) ||
                    (searchColumn = "Return3Months" && perfromance.Return3Months >= minValue && perfromance.Return3Months <= maxValue) ||
                    (searchColumn = "Risk1Month" && perfromance.Risk1Month >= minValue && perfromance.Risk1Month <= maxValue)
                    // continue like this for as many columns, unless you want to use reflection
                )
  return investments;
} 
```

另一个选项是我们用于动态报告系统的东西，动态代码生成和编译：

[http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)

# objective-c - Objective-C：带有索引颜色空间的 CGBitmapCreateContext

> ID：11963244
> 
> 赞同：0
> 
> 时间：2012-08-15T02:09:08.370
> 
> 标签：objective-c, cgcontext, cgimageref, cgcolorspace

我知道文档说 CGBitMapContextCreate 不支持索引颜色空间。这对我来说很麻烦。我有一堆需要显示的 256 位 PNG 文件，它们都是索引颜色空间：

```
<CGColorSpace 0x101301000> (kCGColorSpaceICCBased; kCGColorSpaceModelRGB; sRGB IEC61966-2.1) 
```

如何将 CGImageRef 转换为支持的色彩空间，以便我可以完成这项工作？

这是我的方法，但有问题：

```
- (BOOL) renderToBuffer:(void*)baseAddress withBytesPerRow:(NSUInteger)rowBytes pixelFormat:(NSString*)format forBounds:(NSRect)bounds
{

    CGContextRef context = CGBitmapContextCreate(baseAddress, bounds.size.width, bounds.size.height,
                                                 8, rowBytes, CGImageGetColorSpace(img),
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    CGImageRef imageRef = CGImageCreateWithImageInRect(img, bounds);
    CGContextDrawImage(context, CGRectMake(0, 0, bounds.size.width, bounds.size.height), imageRef);
    CGImageRelease(imageRef);
    CGContextRelease(context);

    return YES;
} 
```

# ruby-on-rails - Heroku - therubyracer -v '0.11.0beta8' 失败

> ID：11963249
> 
> 赞同：3
> 
> 时间：2012-08-15T02:10:04.670
> 
> 标签：ruby-on-rails, twitter-bootstrap, heroku, therubyracer

```
Installing therubyracer (0.11.0beta8) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /tmp/build_2c9eqd3g9wxzt/vendor/ruby-1.9.3/bin/ruby extconf.rb
       checking for main() in -lpthread... yes
       creating Makefile
       make
       compiling locker.cc
       compiling context.cc
       compiling primitive.cc
       compiling v8.cc
       compiling handles.cc
       compiling string.cc
       compiling date.cc
       compiling exception.cc
       compiling heap.cc
       compiling backref.cc
       compiling script.cc
       compiling function.cc
       compiling invocation.cc
       compiling init.cc
       compiling external.cc
       compiling rr.cc
       compiling array.cc
       compiling value.cc
       compiling template.cc
       compiling constraints.cc
       compiling constants.cc
       compiling trycatch.cc
       compiling stack.cc
       compiling accessor.cc
       compiling message.cc
       compiling signature.cc
       compiling object.cc
       compiling gc.cc
       linking shared-object v8/init.so
       /tmp/build_2c9eqd3g9wxzt/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a: could not read symbols: No such file or directory
       collect2: ld returned 1 exit status
       make: *** [init.so] Error 1
       Gem files will remain installed in /tmp/build_2c9eqd3g9wxzt/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0beta8 for inspection.
       Results logged to /tmp/build_2c9eqd3g9wxzt/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0beta8/ext/v8/gem_make.out
       An error occurred while installing therubyracer (0.11.0beta8), and Bundler cannot continue.
       Make sure that `gem install therubyracer -v '0.11.0beta8'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

我可能在这里做错了什么？几天来，我一直在尝试修复此错误，但没有运气。这是一个有点有害的问题，因为如果我尝试在没有它的情况下进行捆绑，我会收到一个错误，它依赖于它的 twitter 引导程序。我也尝试过使用以前版本的 therubyracer，但是当我这样做时，我得到了同样的错误，并提示“确保 `gem install therubyracer -v '0.11.0beta8' 在捆绑之前成功”。任何帮助都会很棒！

更新：

当我根本不将 therubyracer 包含在生产中时，我得到了这个：（heroku 日志）

```
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `load'
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `eval'
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:71:in `start'
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-08-15T02:15:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2012-08-15T02:15:26+00:00 heroku[web.1]: Process exited with status 1
2012-08-15T02:15:26+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-15T02:33:23+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-15T02:33:27+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 57351`

2012-08-15T02:33:42+00:00 app[web.1]: **/app/vendor/bundle/ruby/1.9.1/gems/therubyracer-heroku-0.8.1.pre3/lib/v8/context.rb:74:in `IsEntered': HandleScope::HandleScope: Entering the V8 API without proper locking in place (fatal)**

2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/therubyracer-heroku-0.8.1.pre3/lib/v8/portal.rb:74:in `open'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/therubyracer-heroku-0.8.1.pre3/lib/v8/context.rb:74:in `enter'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/therubyracer-heroku-0.8.1.pre3/lib/v8/object.rb:18:in `block in []='
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/therubyracer-heroku-0.8.1.pre3/lib/v8/object.rb:17:in `tap'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/therubyracer-heroku-0.8.1.pre3/lib/v8/object.rb:17:in `[]='
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/therubyracer-heroku-0.8.1.pre3/lib/v8/context.rb:58:in `[]='
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/less-2.2.1/lib/less/loader.rb:12:in `initialize'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/less-2.2.1/lib/less.rb:14:in `new'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/less-2.2.1/lib/less.rb:14:in `<module:Less>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/less-2.2.1/lib/less.rb:9:in `<top (required)>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/less-rails-2.2.3/lib/less/rails.rb:6:in `<top (required)>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/less-rails-2.2.3/lib/less-rails.rb:1:in `<top (required)>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bundler/gems/twitter-bootstrap-rails-86cffd500849/lib/twitter-bootstrap-rails.rb:9:in `<top (required)>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:68:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:55:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/config/application.rb:10:in `<top (required)>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:66:in `block in require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:55:in `each'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:66:in `each'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler.rb:128:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/config/environment.rb:2:in `<top (required)>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `load'
2012-08-15T02:33:42+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/config/environment.rb:2:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from config.ru:1:in `new'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:71:in `start'
2012-08-15T02:33:42+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-08-15T02:33:42+00:00 app[web.1]:   from config.ru:3:in `require'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `eval'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-08-15T02:33:42+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-08-15T02:33:43+00:00 heroku[web.1]: Process exited with status 1
2012-08-15T02:33:43+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-15T02:37:06+00:00 heroku[slugc]: Slug compilation started
2012-08-15T02:37:53+00:00 heroku[api]: Release v9 created by joshua.chestang@gmail.com
2012-08-15T02:37:53+00:00 heroku[api]: Deploy 5bad9a2 by joshua.chestang@gmail.com
2012-08-15T02:37:53+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-15T02:37:54+00:00 heroku[slugc]: Slug compilation finished
2012-08-15T02:37:58+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 36867`

 **2012-08-15T02:38:11+00:00 app[web.1]: [WARNING] Please install gem 'therubyracer' to use Less.**
    2012-08-15T02:38:11+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:74:in `require': cannot load such file -- twitter/bootstrap/rails (LoadError)**
    2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:62:in `block in require'

2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:55:in `each'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:74:in `rescue in block in require'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/runtime.rb:55:in `require'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler.rb:128:in `require'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/config/application.rb:10:in `<top (required)>'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/config/environment.rb:2:in `require'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/config/environment.rb:2:in `<top (required)>'
2012-08-15T02:38:11+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-08-15T02:38:11+00:00 app[web.1]:   from config.ru:3:in `require'
2012-08-15T02:38:11+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `eval'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `load'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-08-15T02:38:11+00:00 app[web.1]:   from config.ru:1:in `new'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:71:in `start'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2012-08-15T02:38:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2012-08-15T02:38:12+00:00 heroku[web.1]: Process exited with status 1
2012-08-15T02:38:12+00:00 heroku[web.1]: State changed from starting to crashed 
```

宝石文件：

```
source 'http://rubygems.org'

ruby '1.9.3'
gem  'rails', '3.2.8'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
end

group :development, :test do
  gem 'sqlite3'
end
group :production do
  gem 'pg'
  gem 'thin'
end

gem "heroku"

gem 'libv8', '~> 3.11.8'

gem 'json', '~> 1.6.5'

gem "multi_json", "~> 1.3.6"

#attachment management
gem "paperclip", :git => "git://github.com/thoughtbot/paperclip.git"

#ativity feed
gem 'public_activity', :git => "git://github.com/pokonski/public_activity.git"

gem 'jquery-rails'

#nested-album-form
gem 'nested_form', :git => 'https://github.com/ryanb/nested_form.git'

#creates pattern for widget to send form data in json back to server
gem "js_message"

gem 'kaminari'

#gem 'will_paginate'

#user authentication
gem 'devise'

#notification - basic
gem 'unread'

#id3 tag reader for songs
#gem "taglib-ruby", '~> 0.5.1'

#admin interface
gem 'activeadmin', :git => 'git://github.com/gregbell/active_admin.git'

#gravatar images for users with no profile picture
gem 'gravatar_image_tag'

#amazon s3 for song storage
gem 'aws-sdk'

#authentication for twitter
gem 'omniauth-twitter'

#pretty urls
gem 'friendly_id'

gem 'tire'

group :development do
  gem 'rspec-rails'
  gem 'nifty-generators'
  gem 'annotate'
  gem 'faker'
end

group :test do
  gem 'rspec-rails'
  gem 'webrat'
  gem 'spork', '~> 0.9.0.rc'
  gem 'factory_girl_rails'
  gem 'watchr'
end

#?
gem 'progress_bar'

#web intents - twitter
gem 'tweet-button'

#like buttons
gem 'facebook_share'

#rails paypal interfacing
gem 'activemerchant', :require => 'active_merchant'

#gem 'bootstrap-will_paginate'

gem 'bootstrap-kaminari-views'

gem 'omniauth-facebook'

gem 'simple_form'

gem 'country_select'

# gem 'tiny_tds'
# gem 'activerecord-sqlserver-adapter'
# gem 'ruby-odbc'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
gem 'debugger'

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
  gem 'minitest'
end
gem "mocha", :group => :test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:30:17.127

你试过这个吗？[https://github.com/aler/therubyracer-heroku](https://github.com/aler/therubyracer-heroku)

看到[therubyracer 无法在 heroku 上构建](https://stackoverflow.com/questions/6259130/therubyracer-fails-to-build-on-heroku)

* * *

刚刚查看了 heroku 文档 - [https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

> 红宝石赛车
> 
> 如果您之前使用的是 therubyracer 或 therubyracer-heroku，则不再需要这些 gem，并且强烈建议您不要使用这些 gem，因为这些 gem 会占用大量内存。

如果您在生产部署中不包含 therubyracer 会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:24:23.930

然而 heroku 不鼓励使用 therubyracer gems，很难在不损害应用程序的情况下从现有项目中删除它。

所以有一个解决方案（[见](https://stackoverflow.com/questions/7658793/cant-install-therubyracer-error)）。

添加 'therubyracer', :platforms => :ruby 到组 :assets 并升级你的 ruby​​ 版本。然后删除您的 Gemfile.lock 并运行捆绑安装。

例子：

```
group :assets do
  gem 'therubyracer', :platforms => :ruby 
end

gem "less-rails"
gem "twitter-bootstrap-rails" 
```

# ibatis - mybatis 使用动态 sql 按多个字段排序

> ID：11963251
> 
> 赞同：5
> 
> 时间：2012-08-15T02:10:28.903
> 
> 标签：ibatis, mybatis

有没有更清洁的方法来做下一个：

```
<select id="getWithQueryData" resultMap="usuarioResult" parameterType="my.QueryData" >
select * from t_user 
 <if test="fieldName != null and ascDesc != null">
    order by
        <choose>  
            <when test="fieldName == 'name'">
                c_name 
            </when>         
            <when test="fieldName == 'lastName'">
                c_last_name 
            </when> 
            <when test="fieldName == 'email'">
                c_email 
            </when> 
            <when test="fieldName == 'password'">
                c_password 
            </when> 
            <when test="fieldName == 'age'">
                i_age
            </when>                                                             
        </choose>               
        <if test="ascDesc == 'asc'">
            asc 
        </if>            
        <if test="ascDesc == 'desc'">
            desc 
        </if>   
 </if>
limit #{limit} offset #{offset}; 
```

正如您可以推断的那样，QueryData 看起来像：

```
public class FiltroBusquedaVO {

private Integer offset;
private Integer limit;
private String fieldName;
private String ascDesc; ... } 
```

如果我能得到一个给定字段名的列名，那就太好了。我的意思是，结果图有这些信息。但似乎我无法从 xml 中获取它。

我的示例只有 5 个字段，但是 20 个字段呢？有没有另一种方法来做这个不那么冗长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:58:57.667

请参阅我对类似问题的回答。

[Mybatis 将属性映射到列](https://stackoverflow.com/questions/13030708/mybatis-map-property-to-column/14556066#14556066)

但是唯一的缺点是你的java代码会知道列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-19T10:53:30.310

我是这样做的：

```
List<ProjectLockDBO> getProjectsLocks(@Param("projectId") Integer projectId, @Param("userId") Integer userId, @Param("limit") Integer limit,
            @Param("offset") Integer offset, @Param("sortAsc") List<String> sortAsc, @Param("sortDesc") List<String> sortDesc);

<select id="getProjectsLocks" resultMap="ProjectLockResult">
        SELECT pl.id,
               pl.project_id,
               pl.notes,
               pl.created_by_id,
               pl.created_at,
               u.id AS user_id,
               u.email AS user_email,
               u.first_name AS user_first_name,
               u.last_name AS user_last_name
        FROM projects_locks pl
        LEFT JOIN users u ON u.id = pl.created_by_id
        WHERE 1=1
        <if test="projectId != null"> AND pl.project_id = #{projectId}</if>
        <if test="userId != null"> AND pl.created_by_id = #{userId}</if>
        <choose>
            <when test="sortAsc != null or sortDesc != null">
                ORDER BY <if test="sortAsc != null">
                    <foreach collection="sortAsc" item="element" open="" close=" ASC" separator=",">
                        ${element}
                    </foreach>
                </if>
                <if test="sortAsc != null and sortDesc != null">, </if>
                <if test="sortDesc != null">
                    <foreach collection="sortDesc" item="element" open="" close=" DESC" separator=",">
                        ${element}
                    </foreach>
                </if>
            </when>
            <otherwise>ORDER BY pl.id;</otherwise>
        </choose>
        <if test="limit != null">LIMIT #{limit}</if>
        <if test="offset != null">OFFSET #{offset}</if>
    </select> 
```

其中 2 个列表将包含以下字符串：“pl.project_id”、“pl.id”、

这里的关键部分是 {element} 前面的美元符号“$”。如果您将使用标准#，它将无法正常工作。

# proxy - 如何通过朋友的电脑通过 VPN / 代理连接到互联网

> ID：11963254
> 
> 赞同：1
> 
> 时间：2012-08-15T02:10:53.410
> 
> 标签：proxy, connect, vpn, tunnel

一个朋友有一台可以上网的电脑。我也有互联网，但我想通过我朋友的电脑连接到互联网，使用他的电脑作为 VPN，这样我就可以访问被当前 ISP 阻止的网站。

我知道我可以使用 logmein（例如）来控制他的 PC 并在那里冲浪，但我只需要能够连接到他的 PC/网络并通过他的互联网冲浪，就像 VPN 一样。

我的问题是：什么软件/方法可以帮助我们实现这一目标？

注意：他有动态 ip 互联网

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:00:52.267

绕过 DNS 块并不难。
您可以使用 Google DNS 访问每个站点。您将域名设置[*] 更改为 Google 的设置，您将能够访问 TPB 或其他被阻止的网站。

如果您想使用 VPN，最好您的朋友将他的 IP 设置为静态。这样你就可以使用微软内置的VPN客户端连接到他了。查看[本教程](http://www.pcworld.com/article/210562/how_set_up_vpn_in_windows_7.html "如何在 Windows 7 中设置 VPN")，了解如何在他的电脑上创建 VPN 并从你的电脑上连接。

[*] 从您的 ISP 获取 IP 需要 DNS 设置。如果您将它们更改为 Google DNS，您将从 Google 获得 IP，并且您的 DNS 查找（当您浏览网站时）将通过 Google 而不是通过您的 ISP。这使您可以绕过本地 DNS 块，并且某些站点的加载速度会快几毫秒。

# c++ - OpenCV程序中的“xxx没有命名类型”错误

> ID：11963258
> 
> 赞同：2
> 
> 时间：2012-08-15T02:11:18.213
> 
> 标签：c++, opencv, g++

我正在使用 OpenCV 库编写计算机视觉程序。在我的程序中，我通过“Vec3d”“typedef”了一个名为“CLabPixelType”的类型，用于表示Lab颜色空间中的一个颜色像素。但是，当我在 Mac OS X Mountain Lion 下使用 XCode 4.4.1 编译代码时遇到以下问题。

```
g++ ${CXXFLAGS} main.cpp slic.cpp slic_contrast.cpp -o sclbp -I/opt/local/include 
-L/opt/local/lib -lopencv_core.2.4.2 -lopencv_imgproc.2.4.2 -lopencv_highgui.2.4.2

In file included from /usr/include/c++/4.2.1/backward/map.h:59,
             from lxp_factory.h:8,
             from cmd_parser.h:4,
             from main.cpp:2:
/usr/include/c++/4.2.1/backward/backward_warning.h:32:2: warning: #warning This 
file includes at least one deprecated or antiquated header. Please consider using 
one of the 32 headers found in section 17.4.1.2 of the C++ standard. Examples 
include substituting the <X> header for the <X.h> header for C++ includes, or
<iostream> instead of the deprecated header     >>><iostream.h>. To disable this
warning use -Wno-deprecated.

In file included from lxp_framework.h:5,
             from lxp_factory.h:5,
             from cmd_parser.h:4,
             from main.cpp:2:
img_interpolater.h:10: error: ‘Vec3d’ does not name a type
img_interpolater.h:45: error: ‘CLabPixelType’ does not name a type
img_interpolater.h:97: error: ‘CLabPixelType’ does not name a type 
```

我不知道为什么它显示“'Vec3d'没有命名类型？我在Stackoverflow中检查了关于此类“XX没有命名类型”错误的其他问题，但未能找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:16:42.510

我上次使用 opencv 库时已经有一段时间了，但我认为问题可能是您没有考虑[命名空间 cv](http://opencv.willowgarage.com/documentation/cpp/namespace_%5Ctexttt%7Bcv%7D_and_function_naming.html)

尝试添加`using namespace cv`，`using namespace cv::CLabPixelType`或者只是在每次使用时完全限定名称`typedef cv::CLabPixelType Vec3d`。

# android - 在 Android 中调度后台工作

> ID：11963262
> 
> 赞同：0
> 
> 时间：2012-08-15T02:12:13.523
> 
> 标签：android, alarmmanager, android-pendingintent, intentservice

我是 Android 新手，所以我想确保以下解决方案是正确的。

问题：我想每 10 分钟通过网络服务将设备的本地数据库与服务器上的数据库同步一次。我已经有一个可以返回新/更新记录的 Web 服务调用。我想知道安排此任务的最佳方式是什么。即使应用程序未运行，我也希望数据库同步。

我的解决方案（这是正确的路线吗？）：我将有一个 BroadcastReceiver 来监听 android.intent.action.BOOT_COMPLETED，在它的 onReceive 中，我将创建一个 AlarmManager，每 10 次向 MyReceiver（通过 PendingIntent）发送一条消息分钟。此外，在我的应用程序启动时，我将执行相同的操作（创建一个警报以通过 PendingIntent 向 MyReceiver 发送消息） - 由于两个警报都向 MyReceiver 发送消息，并且它们相应的 PendingIntent 都使用 PendingIntent.FLAG_UPDATE_CURRENT 进行初始化，因此新警报会覆盖旧的？（这就是我想要做的，以防由于某种原因警报在设备启动后被取消，它应该在应用程序启动时重新启动）。

在 MyReceiver 的 onReceive() 中，我将创建一个 MyIntentService（此实例将调用 web 服务并更新本地数据库）。

这是一个好的解决方案吗？有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:53:44.737

解决方案很好......实际上，当设备关闭并重新启动时，所有 AlarmManager 实例都会被清除。

简单的方法是...首先在应用程序启动时创建AlarmManager。在 BOOT_COMPLETED BroadcastReceiver 的 onReceive 中排在第二位。

足够了，PendingIntent.FLAG_UPDATE_CURRENT 将确保一次只激活一个警报。

这样，当您的应用程序启动时，警报就会注册。如果它已经通过 BOOT_COMPLETED 注册，则不会有任何问题。当您关闭设备时，已激活的警报将停用，但 BroadcastReceiver 到 BOOT_COMPLETED 将负责在下次启动时注册新警报。

如果您决定这回答了您的问题，请将其标记为“已接受”。这将提高您和我的声誉分数。

此外，您还需要查看使用网络的时间间隔，这对设备和用户来说可能非常耗费资源。一种策略可能是在用户启动您的应用程序时设置更长的时间间隔并检查更新（这可能对用户不友好，但也可以节省许多系统资源和电池电量）。尝试根据您的需要找到一些更好的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:42:53.053

Using FLAG_UPDATE_CURRENT in that manner will override the existing PendingIntent if one exists. I'm not positive but I believe that as soon as you get into onReceive, the PendingIntent is consumed so it's no longer there to be overridden. In either case, it sounds like this is the functionality you are looking for and yes it's a good way to solve this kind of problem. My only other suggestion would be if the 10 minute interval timing is not absolutely critical then use one of the INTERVAL_ schedules (INTERVAL_FIFTEEN_MINUTES for example) in your AlarmManager to help conserve battery life; basically it lets allows all apps that run on intervals to "batch" their work together and wake the device up less frequently.

# qt - 桌面 GUI 应用程序的垃圾收集语言

> ID：11963265
> 
> 赞同：2
> 
> 时间：2012-08-15T02:12:45.857
> 
> 标签：qt, user-interface, cross-platform, desktop-application, d

我仍然是一个新手程序员，我正在研究一些适合编写桌面 GUI 应用程序的垃圾收集语言。该语言必须在 Windows、OSX 和 Linux 上可用。我说“垃圾收集”而不是高级，因为像 D 这样的语言不是很高级（imo），而是垃圾收集，编译为本机代码并提供接近 C++ 的性能。然而，针对 D 开发最多的 GUI 工具包是 DWT，它是 SWT 的一个端口。我用过的少数 SWT 应用程序在每个平台上都很难看。如果 D 有一个 Qt 绑定会很棒，但我唯一能找到的是 QtD，这似乎是一个死项目。

我知道的语言：
Java
Python
D

我宁愿不将 C# 与 Mono 一起使用，而且在语法方面我更喜欢类似于 C/C++ 的语言。

还有其他的吗，你有什么建议？

编辑：该语言不必编译为本机代码，编译为字节码并在 VM 中运行就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:10:06.100

我知道的每一种编程语言，都有一个本地代码的编译器，都使用一些 C 或 C++ GUI 工具包来实现 GUI。SWT/DWT 以 Linux/Unix 上的 GTK 为例。如果 SWT 应用程序在您看来很难看，那么要么您没有配置 GTK 主题，要么您对外观和感觉进行了初始化。SWT 应用程序看起来与任何“本机”GUI 应用程序完全相同。

即使我是一名前 C++ 程序员，无论我现在多么不喜欢它，我仍然会向你推荐 C++，因为你要求使用编译器编译为本机二进制文件的编程语言。您指定的附加要求是垃圾收集器。在您的 C++ 应用程序中使用`libgc`，这就是您所需要的。更多关于它的信息：http: [//developers.sun.com/solaris/articles/libgc.html](http://developers.sun.com/solaris/articles/libgc.html)。

在具有本机编译器的编程语言领域，我或多或少地适应了 D，但不幸的是，正如我们所说，D 没有积极开发的 GUI ToolKit。这很快就会解决，但在那之前，请使用 C++。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T15:52:15.427

怎么样[`vala`](http://en.wikipedia.org/wiki/Vala_%28programming_language%29)？

> Vala 是一种面向对象的编程语言，具有自托管编译器，可生成 C 代码并使用 GObject 系统。Vala 在语法上类似于 C#，并且包括有用的语言特性，如匿名函数、信号、属性、泛型、辅助内存管理、异常处理、类型推断和 foreach 语句。[2](http://golang.org/)它由 Jürg Billeter 和 Raffaele Sandrini 开发。它旨在通过以 GObject 对象系统为目标，将现代语言特性带入 C[需要澄清][孔雀术语]，而无需增加运行时需求且开销很小。Vala 不是直接编译为汇编语言或另一种中间语言，而是源对源代码编译为 C，然后使用平台的标准 C 编译器（例如 gcc）进行编译。

[`Go`](http://golang.org/)GTK、FLTK 和 WALK 也有一些绑定。看看[这个](https://stackoverflow.com/questions/4781341/which-gui-toolkit-for-go-language)线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T23:46:40.127

还有一些非常稳定的语言，比如 Free Pascal/Lazarus 和 PureBasic，它们在 Win、OS X 和 Linux 上运行良好（在所有平台上编译相同的源代码）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T02:56:27.987

在 Java 上，您仍然可以修改 UI 的外观。Java 还获得了一个名为[Qt Jambi](http://qt-jambi.org/)的 Qt 端口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T16:27:49.457

[Real Studio](http://www.realsoftware.com)使用引用计数进行自动内存管理。这不是垃圾收集，但在许多方面都更好。

当然，Real Studio 可以在 Windows、OS X 和 Linux 上运行，并且可以为 Windows、OS X、Linux 和 Web 创建应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T14:56:36.267

您可以使用 Qt Quick。它有一种称为 QML 的声明性 UI 语言，并且可以使用 javascript 编写脚本。

# ninject - 方法拦截，替换返回值

> ID：11963266
> 
> 赞同：3
> 
> 时间：2012-08-15T02:13:05.443
> 
> 标签：ninject, aop

我们正在使用 Ninject.Extensions.Interception （如果重要的话是 LinFu）来做一些事情，我想知道它是否可以从被拦截的方法中返回一个值。

例如

调用我们的存储库方法之一我们的拦截器获取 BeforeInvoke 事件，我们使用它查看 ASP.NET 缓存以查看是否有任何相关数据 - 返回相关数据（这将导致方法立即返回并且不执行方法的主体 - 或者允许方法正常运行

如果在 AfterInvoke 方法中我们查看返回的数据并将其添加到缓存中，则加分。

以前有人做过类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:32:31.237

根据您的问题，我假设您来自 SimpleInterceptor。这将不允许立即返回。相反，您必须实现 Iinterceptor 接口。您可以通过在调用时调用 Proceed 方法来决定是否调用被拦截的方法。

# php - 动态布局（每页不同的布局）

> ID：11963267
> 
> 赞同：1
> 
> 时间：2012-08-15T02:13:11.713
> 
> 标签：php, joomla, joomla1.5

我正在尝试在 Joomla 中实现不同的布局。我使用别名为每个页面设置不同的布局。我读了一本关于 Joomla 的电子书，没有其他方法可以创建不同的布局或在后端面板中设置它。我想问一下，是否有另一种方法/方式可以为每个页面从后端面板设置不同的页面？我只是想确保它在 Joomla 1.5 中是可能的。

**我以前的方法**

```
// Get Alias Page
function getCurrentAlias(){
   $menu= &JSite::getMenu();
   $active= $menu->getActive();
   return $active->alias;
} 
```

得到 Alias 页面名称后，我使用条件语句为每个页面获取不同的内容。

```
<-- Header Part -->
<-- Start Content Part -->
if( $pageName == "home" ){
   {{Content Home}}
}elseif( preg_match("#^(news).*$#", $pageName) ){
   {{Content News}}
}...etc
<-- End Content Part -->
<-- Footer Part --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:56:13.390

首先，我建议不要使用 1.5，它会在下个月到期。

但是，如果您要使用 1.5，那么您将使其变得比您需要的要困难得多。如果您想从一个页面到另一个页面有显着的结构差异，您可以为您想要使用的每个不同结构安装一个模板，然后将每个模板分配给适当的菜单项。您必须创建菜单项，即使它们位于站点上未显示的隐藏菜单中。

您还可以使用 CSS 和可折叠模块位置来控制页面结构。添加这个，以便您可以设置页面类后缀，将 ID 添加到页面的 body 标记，从而轻松拥有页面特定的 CSS：

```
<?php
$menu = &JSite::getMenu();
$active = $menu->getActive();
if (is_object( $active )) :
$params = new JParameter( $active->params );
$pageclass = $params->get( 'pageclass_sfx' );
endif;
?>

<body id="<?php echo $pageclass ? $pageclass : 'default'; ?>"> 
```

然后对于页面上的每个模块位置，您可以使它们可折叠，这样如果它们不被使用，它们就不会显示在页面上：

```
<?php if ($this->countModules('top')) : ?><div id="top"><jdoc:include type="modules" name="top" style="xhtml" /></div><?php endif; ?> 
```

所以基本上，如果你不把任何模块放在“顶部”位置，它就永远不会放在页面上。结合使用这 2 个项目，您可以使用单个模板准确控制每个页面的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:51:44.953

当我们在哪里使用 Joomla！1.5 我们使用了一个名为“ [Menu Dependent Items](http://extensions.joomla.org/extensions/style-a-design/templating/5465) ”的扩展来加载特定的 CSS、JS 等

通过加载正确的 CSS 等，我们可以完全重新布局任何给定的页面。

当然，随着 Joomla 中模板“样式”的出现！2.5+ 我们不再需要它，因为我们可以只将样式变化分配给菜单项。

# asp.net - 如何在 ASP.NET 中创建寻呼机

> ID：11963269
> 
> 赞同：0
> 
> 时间：2012-08-15T02:13:29.443
> 
> 标签：asp.net

有谁知道如何创建一个类似于 ASP.NET 网站名人堂部分的寻呼机？

[http://www.asp.net/community/recognition/hall-of-fame](http://www.asp.net/community/recognition/hall-of-fame)

它是一个网格视图吗？它是一个列表视图吗？如何创建一个与其中的一模一样的寻呼机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:26:30.560

要执行此类操作，您可能会尝试将数据绑定到一个`asp:ListView`，然后在客户端应用数据表以实现“平滑”分页[。](http://www.datatables.net)

为此，您需要一个具有“datatable”类的表，并且还需要用于数据表的 thead 和 tbody，以及一些使用 jQuery 选择表的方法（如下所示，LayoutTemplate 中表的 id 是“tblStuff”，我确保没有 runat="server")。此外，如果您在设计视图中创建了 LayoutTemplate，请小心，因为 Visual Studio 通常会将一个表嵌套在另一个表中。

```
<LayoutTemplate>
    <table id="tblStuff" class="datatable">
        <thead><tr><th>...(Your <th> elements go here)...</tr></thead>
        <tbody><tr ID="itemPlaceholder" runat="server"></tr></tbody>
    </table>
</LayoutTemplate> 
```

现在脚本：

```
$(document).ready(function() {
    $('#tblStuff').dataTable({
        // See the datatables documentation for all the great options possible
    });
}); 
```

如果您的数据集足够小，您可以一次将所有内容都填充到 ListView 中，然后将其全部发送到客户端并使用数据表对其进行分页。如果您的数据集太大，您可以将数据表[配置为使用 Ajax](http://www.datatables.net/release-datatables/examples/ajax/objects.html)获取页面数据，并设置一个 Web 方法来一次提供一个页面的数据。

至于实现名人堂页面的“精确”外观，我认为您可以使用适当的 CSS 来管理它。

# .net - app.config 中 ClientSettingsProvider.ServiceUri 的用途

> ID：11963270
> 
> 赞同：66
> 
> 时间：2012-08-15T02:13:39.570
> 
> 标签：.net, wcf

做什么

```
<appSettings>
    <add key="ClientSettingsProvider.ServiceUri" value=""/>
</appSettings> 
```

做？

由于值为空字符串，我可以删除该元素吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-12-20T18:01:56.547

这与 ASP/Ajax 客户端应用程序服务有关（[http://msdn.microsoft.com/en-us/library/bb384297(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/bb384297%28v=vs.100%29.aspx)）

我也在我的 app.config 文件中遇到了这个代码并且很困惑，因为我从头开始开发了我们的整个应用程序，并且没有添加这个。

What I discovered was that this line (and others under the tags) are added automatically to a project's app.config file when the "Enable client application services" checkbox is checked. 原来是我的，尽管我仍然不知道为什么或如何发生这种情况。

要查看您的项目中是否选择了此选项，请右键单击项目并选择“属性”。导航到“服务”选项卡，查看是否选中了该复选框。如果是，取消选中它，您看到的 XML 应该会从您的 app.config 文件中消失。

***重要的！***- VS2010（据我所知可能还有其他版本）中似乎存在一个错误，如果您导航到“服务”选项卡，它会自动为您选中此框，将错误的 XML 添加到您的 app.config 文件中。因此，一旦您取消选中该框并保存您的项目，请在关闭它之前导航到属性部分中的不同选项卡。您还将获得对添加到项目中的“System.Web.Extensions”的不必要引用。如果您不将此用于其他用途，则可以将其删除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T13:50:03.210

它由[ClientFormsAuthenticationMembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.clientservices.providers.clientformsauthenticationmembershipprovider.aspx)使用。

如果您不使用该模型，则可以将其删除，但如果您使用它，即使它是空的，它也应该存在。

在这里检查我的答案 - [ASP.NET Membership Authentication through Service](https://stackoverflow.com/questions/11173556/asp-net-membership-authentication-through-service/11189576#11189576)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T02:28:06.057

您的代码中是否引用了该设置？

如果没有，您可能可以将其删除。如果是，则只有您可以确定删除它可能会产生什么影响。

请注意，这可以用作第三方程序集，如果它不存在，它可能仍会查找并抛出异常。这很容易发现（您的应用程序将失败）

# java - IntelliJ 没有正确导入罐子

> ID：11963273
> 
> 赞同：18
> 
> 时间：2012-08-15T02:13:54.190
> 
> 标签：java, import, jar, intellij-idea

我正在使用 IntelliJ 11.1.3，并且正在尝试以 jarfile 的形式附加两个外部库以在模块中使用。我已将它们添加到项目结构 -> 模块 -> 依赖项中，它们也正确显示在库下，但我无法在源代码中导入它们。

我在这里缺少一个步骤吗？我对 IntelliJ 还很陌生，之前专门使用过 Netbeans，所以我有点迷茫。我认为附加外部库并立即使用这些类很简单，但是当我键入“导入”时，我什至没有在代码完成时获得库名称。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T10:00:01.993

你做得对，库是在[Module Dependencies](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)中配置的。验证那里添加了正确的文件。

您应该能够在**Libraries**节点下的 Project View 中浏览 jar 内部。如果您在那里看不到 jar，则说明您的库配置不正确。如果您看到罐子，但看不到其中的类，则它们可能已损坏，请将它们替换为有效副本。

还要检查这些库是否已添加到您尝试导入和使用它们的正确模块的依赖项中。验证依赖的范围，**编译**很可能是你需要的。

`File`| **如果一切看起来都正确，但无效的缓存**可能会有所帮助，但不起作用。

如果没有任何帮助，请与库共享一个示例项目来说明问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-16T16:22:48.567

你正在使用一个包。这些库将从默认包中使用。因此，将所有类移动到默认包（即 src 文件夹）并删除所有包/导入语句。此外，使用 In 或 Stdin 类而不是 java.io 来读取数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T12:27:20.207

我也遇到了这个问题，我所做的是关闭当前项目并重新创建/导入项目，然后导入 jar，它可以工作。我知道这不明智，但这是一种直接而简单的方法。当我尝试了 CRAZYCODER 所说但不起作用的所有事情时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-05T19:41:29.243

我在这里得到了解决方案 - [https://intellij-support.jetbrains.com/hc/en-us/community/posts/207108385-IntelliJ-not-able-to-resolve-classes-of-external-Libraries-for- Maven 项目](https://intellij-support.jetbrains.com/hc/en-us/community/posts/207108385-IntelliJ-not-able-to-resolve-classes-of-external-Libraries-for-Maven-projects)

这是我尝试过的，它奏效了-

将 jar 添加到 Classpath 似乎有帮助。项目结构 > 平台设置 > SDKs > 类路径 单击 + 并添加 jar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T16:10:29.393

如果您在 POM 中的 jar 依赖项没有范围（或者如果有，请将其更改为新的临时值），请添加一个临时值，例如“编译”。Intellij 将识别更改并刷新外部库。然后，您可以删除临时范围。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-15T09:50:49.600

Maven项目->右键单击您的项目-> Unignore

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-02T10:02:02.483

就我而言，当我在 POM.xml 中编译 .jar 文件时，有一个代码可以生成 EXECUTABLE .jar，但是对于在其他应用程序中使用带有角色库的 .jar 必须是 NOT EXECUTABLE .jar（它没有 main.claass 等。这对我们来说不是必须的）。实际上，当我从 POM.xml 中删除此 cod 时 - 我的库开始运行良好。

-->

```
<!--                <groupId>org.springframework.boot</groupId>-->
<!--                <artifactId>spring-boot-maven-plugin</artifactId>-->
<!--                <configuration>-->
<!--                    <excludes>-->
<!--                        <exclude>-->
<!--                            <groupId>org.projectlombok</groupId>-->
<!--                            <artifactId>lombok</artifactId>-->
<!--                        </exclude>-->
<!--                    </excludes>-->
<!--                </configuration>-->
<!--            </plugin>--> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-20T09:05:03.103

我遇到了同样的问题，并尝试了上面和[这里](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0ahUKEwiRxc31ooLRAhXrlFQKHZDhBbQQFggbMAA&url=https%3A%2F%2Fintellij-support.jetbrains.com%2Fhc%2Fen-us%2Fcommunity%2Fposts%2F206903515-Not-all-Maven-dependencies-appear-in-External-libraries-&usg=AFQjCNHPy7U5DmKTp4AmTY3Zats1SZK67g&cad=rja)提到的几乎所有解决方案。对于我们大多数人来说，提到的解决方案应该有效。

我的情况有点不同，所以想在这里提一下。

在 IntelliJ 项目 Maven 存储库设置中，我发现即使是本地 .m2 存储库也无法更新。它尝试连接`localhost`，特别是在我的情况下，`hosts`文件具有不同的设置`localhost`。

我改变了它并开始工作，因为它现在能够连接到本地 .m2

# twitter-bootstrap - Bootstrap 手风琴 - 使用而不是 显示更多正文

> ID：11963275
> 
> 赞同：3
> 
> 时间：2012-08-15T02:14:05.037
> 
> 标签：twitter-bootstrap, accordion, inline, html, jquery-ui-accordion

我正在尝试使用 Boostrap 来显示更多的正文 - 所以需要显示的内容与介绍文本内联。我在末尾使用更多链接作为触发器，如下所示：

```
<p>
 Intro text <span id="intro" class="collapse"> the rest of the sentence.</span>
 <a data-toggle="collapse" data-target="#intro"> More</a>
</p> 
```

这在使用 div 时有效，但使用任何内联元素会导致手风琴不起作用 - 即使我使用 div 并将其设置为显示内联或内联块。

有谁知道如何在内联元素上进行这项工作？或者是否有不同的 jquery 插件或一些简单的 jquery 可以实现相同的目标 - 同一页面上会有多个手风琴。

任何正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T02:33:58.423

由于插件的功能是如何实现的，使用 Bootstrap 的`collapse`插件将不适用于像 s 这样的内联元素。`<span>`

如果您查看 Bootstrap CSS，您会看到以下规则：

```
.collapse {
    position: relative;
    height: 0;
    overflow: hidden;
    -webkit-transition: height 0.35s ease;
       -moz-transition: height 0.35s ease;
        -ms-transition: height 0.35s ease;
         -o-transition: height 0.35s ease;
            transition: height 0.35s ease;
}

.collapse.in {
    height: auto;
} 
```

因此，`.collapse`通过将元素`height`设为零和设置，可以有效地隐藏元素`overflow:hidden`。

但是，内联元素（如您的`span`）不接受高度或垂直填充等样式。`.collapse`因此，即使添加了类，您的跨度也将始终可见。这也解释了为什么当您`display:inline`在`<div>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:22:35.040

使用正确的搜索词后，我发现并暗示了以下内容：http: [//viralpatel.net/blogs/dynamically-shortened-text-show-more-link-jquery/](http://viralpatel.net/blogs/dynamically-shortened-text-show-more-link-jquery/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T09:59:46.403

您可以通过添加更具体的样式轻松覆盖 Bootstrap 的默认折叠样式。只需确保正确覆盖它们设置的所有样式 - 默认情况下，折叠是通过动画属性完成的，因此如果您不希望启动高度动画，则`height`必须确保包含所有三种折叠状态。`height: auto`

例如，您可以`span`通过像这样淡出它们来折叠内联元素：

```
span.collapse {
    display: inline;
    position: static;
    height: auto;
    opacity: 0;
    -webkit-transition: opacity 0.35s ease;
       -moz-transition: opacity 0.35s ease;
        -ms-transition: opacity 0.35s ease;
         -o-transition: opacity 0.35s ease;
            transition: opacity 0.35s ease;
}
span.collapsing {
    display: inline;
    position: static;
    height: auto;
    opacity: 0;
    -webkit-transition: opacity .35s ease;
         -o-transition: opacity .35s ease;
            transition: opacity .35s ease;
}
span.collapse.in {
    display: inline;
    position: static;
    opacity: 1;
    height: auto;
} 
```

（使用这种方法折叠时它们仍会占用流中的空间，因此根据您的布局需要，您必须设置`display:none`折叠状态或设置`display:inline-block`所有状态才能为元素设置动画`width`等）

# linux - extra/locale/locale_mmap.h:46：错误：“__LOCALE_DATA_WCctype_II_LEN”未在此处声明（不在函数中）

> ID：11963280
> 
> 赞同：1
> 
> 时间：2012-08-15T02:15:01.917
> 
> 标签：linux, embedded, locale

当我编译工具链 (uClibc) 时，出现以下错误：

make[1]：进入目录`/home/xxx/Intel-Puma-Toolchain_01/buildroot-2011。ain/uClibc-0.9.32' HOSTCC extra/locale/gen_ldc 在从 extra/locale/gen_ldc.c:45 包含的文件中：extra/locale/locale_mmap.h:46：错误：'__LOCALE_DATA_WCctype_II_LEN' 未声明的 unction）extra/locale/ locale_mmap.h:46: 错误：'__LOCALE_DATA_WCctype_TI_LEN' 未声明的函数）

我在谷歌搜索，发现这个页面 [http://www.armadeus.com/wiki/index.php?title=Ubuntu/Debian_installation_prerequisites#Debian](http://www.armadeus.com/wiki/index.php?title=Ubuntu/Debian_installation_prerequisites#Debian)

也许我的语言环境有一些错误，但是我已经关注了这个页面并更改了我的语言环境，这些错误仍然存​​在。这是我的语言环境，我的操作系统是 debian 挤压

```
xxx@debian:~/Intel-Puma-Toolchain_01$ locale
LANG=en_US.UTF-8
LANGUAGE=en_US:en
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL=en_US.UTF-8
xxxx@debian:~/Intel-Puma-Toolchain_01$ locale -a
C
en_US.utf8
POSIX 
```

你们中的一些人是否遇到过这个错误，如何解决它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:28:09.320

编辑目录中的 uClibc 配置文件`toolchain/uClibc/uClibc-0.9.33.config`，并进行以下更改：

```
189,190c189,191
< # UCLIBC_HAS_WCHAR is not set
< # UCLIBC_HAS_LOCALE is not set
---
> UCLIBC_HAS_WCHAR=y
> UCLIBC_HAS_LOCALE=y
> UCLIBC_BUILD_ALL_LOCALE=y 
```

清理 uClibc 并再次重建。

```
cd output/toolchain/uClibc-0.9.33.2; make clean; cd ../../..; make 
```

`uClibc`将构建`output/toolchain/uClibc-0.9.33.2/extra/locale/wctables.h`
可以解决您的问题的语言环境数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T19:43:56.873

我想你可能会遇到这个错误：

[http://lists.uclibc.org/pipermail/uclibc/2015-March/048852.html](http://lists.uclibc.org/pipermail/uclibc/2015-March/048852.html)

这会导致生成静默失败`wctables.h`，这是应该定义缺少的宏的地方。运行`./extra/locale/gen_wctype -v en_US`或类似将显示生成此文件时可能发生的任何错误。

# javascript - 使用新的表格行键入 Ahead Breaks

> ID：11963281
> 
> 赞同：0
> 
> 时间：2012-08-15T02:15:03.467
> 
> 标签：javascript, jquery, forms, jquery-ui

我有一张带有 jQ​​uery UI 提前输入功能的表格。当只有 1 个表格行（初始视图）时，它正在使用我的表单。有一个按钮允许用户根据需要创建额外的表格行，但对于任何额外的表格行，提前输入功能不再起作用。

我已经设置了一个示例 JSFiddle：

[http://jsfiddle.net/fmdataweb/9REgZ/1/](http://jsfiddle.net/fmdataweb/9REgZ/1/)

 `如果您开始在第一个字段中输入 - 活动类型 - 您应该开始获取可以选择的匹配词列表（风险选择菜单也会根据输入的活动自动输入）。预输入列表和自动选择都适用于第一行，但是当您单击“新行”按钮时，它们会停止对任何新创建的行起作用。

感谢有人能指出什么是破坏以及如何解决它 - 我在这个阶段是 Javascript 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:48:34.453

[这里有一些东西](http://jsfiddle.net/9REgZ/3/)可以帮助你前进。当您创建一个新行时，您必须调用该`autocomplete()`方法来初始化该字段。

以下是一些相关代码：

```
$( '#nextYear' ).on( 'click', '#button2', function () {
    var row = $( this ).closest( 'tr' );

    row = row.clone().insertAfter( row );

    row.find( 'input[name="activity"]' ).val( '' ).attr(

      'id', "nextYearSelect" + ( row.index() + 1 )

    ).autocomplete({
        source: availableTags
    });    

}); 
```

确保您不会`id`在不同元素上得到重复的属性值。`

# excel - AppleScript 将多个 Excel 文件合并到一个工作表中

> ID：11963284
> 
> 赞同：0
> 
> 时间：2012-08-15T02:15:15.327
> 
> 标签：excel, vba, macos, applescript

我不是 AppleScript 方面的专家，所以我一直试图找到一个 AppleScript 代码示例，它可以成功处理一批 Excel 文件（每个文件都有一个工作表），将每个文件的内容复制到一个目标表中.

这是我想到的伪代码：

```
pick source folder with Excel files;
pick destination Excel file;

for each file within the source folder:
        copy data from default sheet;
        paste data into destination sheet's first unused row
end 
```

这是我想出的代码。它确实正确打开了每个文件，但复制/过去操作没有发生。知道如何让它工作吗？

```
 set main_folder to choose folder with prompt "Please select the folder containing the Excel files:"

set target_excel to choose file with prompt "Please select target Excel file:"

set excel_extension_list to {"xls", "xlsx", "csv"}

tell application "Finder"
    set excel_files to (files of main_folder whose name extension is in excel_extension_list) as alias list
end tell

tell application "Microsoft Excel"
    open target_excel

    repeat with a_file in excel_files
        open a_file
        activate a_file
        tell sheet 1 of workbook a_file
            set the_range to value of used range
            set number_of_source_rows to count of rows of the_range
        end tell

        activate target_excel
        tell sheet 1 of workbook target_excel
            set new_range to value of used range
            set number_of_destination_rows to count of rows of new_range
            set destination_range to range "A" & (number_of_destination_rows + 1) & ":E" & (number_of_destination_rows + 1 + number_of_source_rows)
            set value of destination_range to the_range
            close workbook a_file saving no
        end tell
    end repeat
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:16:51.880

**在 Excel 2011 中试用和测试**

**我的假设**

1.  目标文件有一张名为`Sheet1`
2.  我正在从所有文件的第一张表中检索信息。根据需要进行更改。

**代码**

我已经对代码进行了注释，因此您理解它应该没有任何问题。:)

```
Sub Sample()
    Dim wbI As Workbook, wbO As Workbook
    Dim lRowO As Long
    Dim lRowI As Long, lColI As Long
    Dim DestFile As Variant
    Dim RootFldr As String, FilesFolder As String, strFile As String

    '~~> Get the Root Folder
    RootFldr = MacScript("return (path to desktop folder) as String")

    '~~> Show the Folder Browser to select the folder which has the files
    FilesFolder = MacScript("(choose folder with prompt ""Please select the folder which has excel files""" & _
    "default location alias """ & RootFldr & """) as string")

    '~~> If user doesn't select anything then exit
    If FilesFolder = "" Then Exit Sub

    '~~> Show the File Select dialog for the output file
    DestFile = Application.GetOpenFilename("XLS8,XLS4")

    '~~> Open output file
    Set wbO = Workbooks.Open(DestFile)

    '~~> Get the next available row for writing
    lRowO = wbO.Sheets("Sheet1").Cells.Find(What:="*", _
            After:=wbO.Sheets("Sheet1").Range("A1"), _
            Lookat:=xlPart, _
            LookIn:=xlFormulas).Row + 1

    '~~> Loop through each file in the folder
    strFile = Dir(FilesFolder)

    Do While Len(strFile) > 0
        '~~> Check for the file if it is csv,xls or xlsx
        If Right(strFile, 3) = "csv" Or _
        Right(strFile, 3) = "xls" Or _
        Right(strFile, 4) = "xlsx" Then
            '~~> Open the file from the folder
            Set wbI = Workbooks.Open(FilesFolder & strFile)

            With wbI
                '~~> Get the last row in the file from sheet #1
                lRowI = .Sheets(1).Cells.Find(What:="*", _
                        After:=.Sheets(1).Range("A1"), _
                        Lookat:=xlPart, _
                        LookIn:=xlFormulas, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlPrevious, _
                        MatchCase:=False).Row

                '~~> Get the last column in the file from sheet #1
                lColI = .Sheets(1).Cells.Find(What:="*", _
                        After:=.Sheets(1).Range("A1"), _
                        Lookat:=xlPart, _
                        LookIn:=xlFormulas, _
                        SearchOrder:=xlByColumns, _
                        SearchDirection:=xlPrevious, _
                        MatchCase:=False).Column

                With .Sheets(1)
                    '~~> Copy the selected range
                    .Range(.Cells(1, 1), .Cells(lRowI, lColI)).Copy

                    '~~> Paste in destination file
                    wbO.Sheets("Sheet1").Range("A" & lRowO).PasteSpecial xlValues

                    '~~> Get the next available row for writing
                    lRowO = wbO.Sheets("Sheet1").Cells.Find(What:="*", _
                            After:=wbO.Sheets("Sheet1").Range("A1"), _
                            Lookat:=xlPart, _
                            LookIn:=xlFormulas, _
                            SearchOrder:=xlByRows, _
                            SearchDirection:=xlPrevious, _
                            MatchCase:=False).Row + 1
                End With
            End With
            '~~> Close the file after copying from it
            wbI.Close SaveChanges:=False
        End If
        strFile = Dir
    Loop

    MsgBox "Done"
End Sub 
```

# c++ - 在模板中指定允许的参数

> ID：11963287
> 
> 赞同：4
> 
> 时间：2012-08-15T02:15:48.183
> 
> 标签：c++, templates, generics, sfinae, static-assert

我可以准确地指定模板可以接收什么样的参数吗？例如，我想创建一个模板，该模板只能用属于或扩展类的类来实例化`A`。在 Java 中，泛型通过以下方式支持这一点：

```
class B<T extends A> { } 
```

可以用 C++ 中的模板实现类似的功能吗？

```
template <typename T (?)> class B { } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:50:39.453

有两种方法可以做到这一点。

首先，通过`std::enable_if`与`std::is_base_of<A, T>::value`as 条件一起使用的隐藏虚拟模板参数。如果后一个表达式计算为`false`，则嵌套`type`在 中不存在`std::enable_if`。如果您在重载函数上使用它，SFINAE 则意味着“替换失败不是错误”，并且有问题的重载将从可行函数集中删除。但是在这种情况下，没有其他类模板可以匹配您的调用，然后您确实会收到编译时错误。

SFINAE 是一个非常微妙的机制，很容易出错。例如，如果您有多个具有不同 SFINAE 条件的类专业化，您必须确保它们都不重叠，否则您会产生歧义。

其次，您可以在类的主体内部做一个简单`static_assert`的操作。`std::is_base_of<A,T>::value`与 SFINAE 方法相比，此方法的优点是您还可以指定更易读的错误消息。一个缺点是您总是会收到错误，并且您不能静默地抑制此特定模板并选择另一个模板。但总的来说，我认为在你的情况下推荐这种方法。

```
#include<type_traits>

class A {};
class C: public A {};
class D {};

// first alternative: SFINAE on hidden template parameter
template
<
    typename T, 
    typename /* dummy */ = typename std::enable_if< 
        std::is_base_of<A, T>::value
    >::type
>
class B
{
};

// second alternative: static_assert inside class
template
<
    typename T
>
class E
{
    static_assert(std::is_base_of<A, T>::value, "A should be a base of T");
};

int main()
{
    B<A> b1;
    B<C> c1;
    //B<D> d1; // uncomment this line to get a compile-time error

    E<A> b2;
    E<C> c2;
    //E<D> d2; // uncomment this line to get a compile-time error

    return 0;
} 
```

正如评论中所指出的，您可以使用像样的 C++11 编译器（VC++ 2010 或更高版本，gcc 4.5 或更高版本）或 Boost 或 TR1 库来获取`<type_traits>`功能。但是请注意，`std::is_base_of<A, A>::value`评估结果为`true`，但旧的评估`boost::is_base_of<A, A>::value`结果为`false`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T06:51:58.643

你可以用`static_assert`and做到这一点`is_base_of`：

```
#include <type_traits>
template<typename T> class D {
    static_assert(std::is_base_of<A, T>::value, "must be derived from A");
}; 
```

或者您可以使用`enable_if`：

```
#include <type_traits>
template<typename T, typename = void> class D;
template<typename T> class D<T, typename std::enable_if<std::is_base_of<A, T>::value>::type> {
}; 
```

对于 C++03，您可以使用 boost；`is_base_of`来自[Boost.TypeTraits](http://www.boost.org/doc/libs/1_50_0/libs/type_traits/doc/html/index.html)，`static_assert`来自[Boost.StaticAssert](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_staticassert.html)，`enable_if`来自[Boost.EnableIf](http://www.boost.org/doc/libs/1_50_0/libs/utility/enable_if.html)。

# memory-management - 内存不足异常后循环 CLR？

> ID：11963289
> 
> 赞同：-1
> 
> 时间：2012-08-15T02:15:58.297
> 
> 标签：memory-management, clr, out-of-memory

使用非常大的内存文件时，可能会发生 OutOfMemoryException。当这种情况在生产中发生时，所有 .NET 应用程序都会崩溃，这一定是因为它们都共享相同的 CLR 空间。因为我不明白如何“回收”CLR，所以我最终重新启动了服务器。

当在调试期间在 VS2010 中发生这种情况时，所有其他运行的 .NET 东西也会失败，但 VS2010 本身不会。然而，因为我不明白如何“回收”CLR，我最终在我的工作站上重新启动。

如何“回收”CLR 内存空间？在运行为 .NET Framework（非 IIS）编写的 Win32 服务的服务器上回收如何？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:56:37.503

循环 CLR 需要退出并重新运行该过程。你可以调用 GC.Collect 来强制 GC 优化它当前使用的内存；但就它而言，有些东西需要记忆，不能只是“循环”它。

# java - 使用 D&C/递归的最大子数组

> ID：11963291
> 
> 赞同：0
> 
> 时间：2012-08-15T02:16:28.257
> 
> 标签：java, algorithm, recursion, divide-and-conquer, kadanes-algorithm

我想用展示（n log n）的算法来实现最大子数组问题：

查找最大连续子数组，或数组中连续元素的最大总和。

假设：并非所有元素都是负数

* * *

我有一些可行的解决方案；问题在于重叠的中心数组，以及指定重叠子问题的适当索引，一些数组我得到了正确的答案，而另一些则没有。

* * *

只是为了比较和检查正确性，我实现了一个称为 Kadane 算法的解决方案（我相信复杂度是 Omega(n)）。

这是 Kandane 的算法（http://en.wikipedia.org/wiki/Maximum_subarray_problem）：

* * *

```
 public static void Kadane(int array[]) {
        int max_ending_here = 0;
        for (int i = 0; i < array.length; i++) {
            max_ending_here = max_ending_here + array[i];
            max_so_far = Math.max(max_so_far, max_ending_here);
        }
        System.out.println("Kadane(int array []): " + max_so_far);
    } 
```

* * *

我的递归实现，使用分治法来比较子数组的最大值，然后对具有最大值的子数组进行递归调用，直到递归结束

```
public static void findMaxSubArray(int[] array, int lowIndex, int highIndex) {

        int mid = 0;
        int arrayLength = 0;
        int maxEndingHere = 0;

        if (array == null) {
            throw new NullPointerException();
        } else if 
                //base condition 
           (array.length < 2 || (highIndex==lowIndex)) {
            maxLowIndex = lowIndex;
            maxHighIndex = highIndex;
            System.out.println("findMaxSubArray(int[] array, int lowIndex, int highIndex)");
            System.out.println("global Max Range, low:" + maxLowIndex + " high: " + maxHighIndex);
            System.out.println("global Max Sum:" + globalMaximum);
        } else {
            System.out.println();
            int lowMidMax = 0;
            int midHighMax = 0;
            int centerMax = 0;
            //array length is always the highest index +1 
            arrayLength = highIndex + 1;

            //if even number of elements in array 
            if (array.length % 2 == 0) {
                mid = arrayLength / 2;
                System.out.println("low: " + lowIndex + " mid: " + mid);
                for (int i = lowIndex; i < mid; i++) {
                    System.out.print(array[i] + ",");
                }
                //calculate maximum contigous array encountered so far in low to mid indexes 
                for (int i = lowIndex; i < mid; i++) {
                    maxEndingHere = maxEndingHere + array[i];
                    if (maxEndingHere < 0) {
                        maxEndingHere = 0;
                    }

                    if (globalMaximum < maxEndingHere) {
                        //new maximum found 
                        globalMaximum = lowMidMax = maxEndingHere;
                        lowIndex = i;
                    }

                }
                //end low mid calc 

                for (int i = mid; i <= highIndex; i++) {
                    System.out.print(array[i] + ",");
                }
                System.out.println("mid: " + mid + " high: " + highIndex);
                //calculate maximum contigous array encountered so far in mid to high indexes 
                for (int i = mid; i <= highIndex; i++) {
                    maxEndingHere = maxEndingHere + array[i];
                    if (maxEndingHere < 0) {
                        maxEndingHere = 0;
                    }

                    if (globalMaximum < maxEndingHere) {
                        //new maximum found 
                        globalMaximum = midHighMax = maxEndingHere;
                        mid = i;
                    }

                }
//end mid high calc
                //calculate maximum contigous array encountered so far in center array
                int lowCenter = mid -1;
                int highCenter = highIndex -1;

                System.out.println("lowCenter: " + lowCenter + " highCenter: " + highCenter);
                for (int i = lowCenter; i < highCenter; i++) {
                    System.out.print(array[i] + ",");
                }
                //calculate maximum contigous array encountered so far in low to mid indexes 
                for (int i = lowCenter; i < highCenter; i++) {
                    maxEndingHere = maxEndingHere + array[i];
                    if (maxEndingHere < 0) {
                        maxEndingHere = 0;
                    }

                    if (globalMaximum < maxEndingHere) {
                        //new max found
                        globalMaximum = centerMax = maxEndingHere;
                        lowCenter = i;

                    }

                }
                //end center calc 
                //determine which range contains the maximum sub array 
                //if lowMidMax <= midHighMax and centerMax
                if (lowMidMax >= midHighMax && lowMidMax >= centerMax) {
                    maxLowIndex = lowIndex;
                    maxHighIndex = mid;
                    //recursive call
                    findMaxSubArray(array, lowIndex, mid);
                }
                if (midHighMax >= lowMidMax && midHighMax >= centerMax) {
                    maxLowIndex = mid;
                    maxHighIndex = highIndex;
                    //recursive call
                    findMaxSubArray(array, mid, highIndex);
                }
                if (centerMax >= midHighMax && centerMax >= lowMidMax) {
                    maxLowIndex = lowCenter;
                    maxHighIndex = highCenter;
                    //recursive call
                    findMaxSubArray(array, lowCenter, highCenter);
                }

            }//end if even parent array 
            //else if uneven array 
            else {
                mid = (int) Math.floor(arrayLength / 2);
                System.out.println("low: " + lowIndex + " mid: " + mid);
                for (int i = lowIndex; i < mid; i++) {
                    System.out.print(array[i] + ",");
                }
                //calculate maximum contigous array encountered so far in low to mid indexes 
                for (int i = lowIndex; i < mid; i++) {
                    maxEndingHere = maxEndingHere + array[i];
                    if (maxEndingHere < 0) {
                        maxEndingHere = 0;
                    }

                    if (globalMaximum < maxEndingHere) {
                        //new maximum found 
                        globalMaximum = lowMidMax = maxEndingHere;
                        lowIndex = i;
                    }

                }
                //end low mid calc
                System.out.println("mid+1: " + (mid + 1) + " high: " + highIndex);
                for (int i = mid + 1; i <= highIndex; i++) {
                    System.out.print(array[i] + ",");
                }
                //calculate maximum contigous array encountered so far in mid to high indexes 
                for (int i = mid + 1; i <= highIndex; i++) {
                    maxEndingHere = maxEndingHere + array[i];
                    if (maxEndingHere < 0) {
                        maxEndingHere = 0;
                    }

                    if (globalMaximum < maxEndingHere) {
                        //new maximum found 
                        globalMaximum = midHighMax = maxEndingHere;
                        mid = i;
                    }

                }
                //end mid high calc
                //calculate maximum contigous array encountered so far in center array
                int lowCenter =  mid;
                int highCenter = highIndex -1;

                System.out.println("lowCenter: " + lowCenter + " highCenter: " + highCenter);
                for (int i = lowCenter; i < highCenter; i++) {
                    System.out.print(array[i] + ",");
                }
                //calculate maximum contigous array encountered so far in low to mid indexes 
                for (int i = lowCenter; i < highCenter; i++) {
                    maxEndingHere = maxEndingHere + array[i];
                    if (maxEndingHere < 0) {
                        maxEndingHere = 0;
                    }

                    if (globalMaximum < maxEndingHere) {
                        //new max
                        globalMaximum = centerMax = maxEndingHere;
                        lowCenter = i;
                    }

                }
                //end center calc 

                //determine which range contains the maximum sub array 
                //if lowMidMax <= midHighMax and centerMax
                  if (lowMidMax >= midHighMax && lowMidMax >= centerMax) {
                    maxLowIndex = lowIndex;
                    maxHighIndex = mid;
                    //recursive call
                    findMaxSubArray(array, lowIndex, mid);
                }
                if (midHighMax >= lowMidMax && midHighMax >= centerMax) {
                    maxLowIndex = mid;
                    maxHighIndex = highIndex;
                    //recursive call
                    findMaxSubArray(array, mid, highIndex);
                }
                if (centerMax >= midHighMax && centerMax >= lowMidMax) {
                    maxLowIndex = lowCenter;
                    maxHighIndex = highCenter;
                    //recursive call
                    findMaxSubArray(array, lowCenter, highCenter);
                }

            }//end odd parent array length 
        }//end outer else array is ok to computed 

    }//end method 
```

* * *

结果：使用数组 subArrayProblem1 = {1, 2, 3, 4, 5, 6, 7, 8};

**Kadane（int array []）：36** 低：0 中：4 1,2,3,4,5,6,7,8,中：4 高：7 低中心：6 高中心：6

findMaxSubArray(int[] array, int lowIndex, int highIndex) global Max Range, low:7 high: 7 **global Max Sum:36** BUILD SUCCESSFUL (总时间: 0 seconds)

问题尽管与 Kadane 相比，全局最大总和是正确的，但低指数和高指数范围反映了最后一次递归调用。

结果：使用数组 subArrayProblem = {100, 113, 110, 85, 105, 102, 86, 63, 81, 101, 94, 106, 101, 79, 94, 90, 97}；

Kadane（int数组[]）：1607低：0中：8 100,113,110,85,105,102,86,63,中+1：9高：16 101,94,106,101,79,94,90,97,lowCenter：16 highCenter：15

findMaxSubArray(int[] array, int lowIndex, int highIndex) global Max Range, low:16 high: 16 global Max Sum:1526

全局最大值不正确，注意区别其实是1个元素，也就是元素81

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-29T17:06:23.667

找到具有最大和的子数组的一种更简洁的方法（D/C 递归方式）：

```
// A Divide and Conquer based Java solution
// To find a subarray with the maximum sum

import java.util.Arrays;
import java.util.Scanner;

class MaxSubArray {

    private static Result maxCrossingSum(int arr[], int l, int m, int h) {

        int sum = 0;
        int maxLeft = 0;
        int leftSum = Integer.MIN_VALUE;
        for (int i = m; i >= l; i--) {
            sum = sum + arr[i];
            if (sum > leftSum) {
                leftSum = sum;
                maxLeft = i;
            }
        }

        sum = 0;
        int rightSum = Integer.MIN_VALUE;
        int maxRight = arr.length - 1;
        for (int i = m + 1; i <= h; i++) {
            sum = sum + arr[i];
            if (sum > rightSum) {
                rightSum = sum;
                maxRight = i;
            }
        }

        return new Result(maxLeft, maxRight, leftSum + rightSum);
    }

    private static Result maxSubArray(int[] A, int low, int high) {

        if (low == high) {
            return new Result(low, high, A[low]);
        }

        int mid = (low + high) / 2;

        Result leftSubArray = maxSubArray(A, low, mid);
        Result rightSubArray = maxSubArray(A, mid + 1, high);
        Result maxCrossingSubArray = maxCrossingSum(A, low, mid, high);

        int leftSum = leftSubArray.sum;
        int rightSum = rightSubArray.sum;
        int crossSum = maxCrossingSubArray.sum;

        if (leftSum > rightSum && leftSum > crossSum) {
            return new Result(leftSubArray.low, leftSubArray.high, leftSubArray.sum);
        } else if (rightSum > leftSum && rightSum > crossSum) {
            return new Result(rightSubArray.low, rightSubArray.high, rightSubArray.sum);
        } else {
            return new Result(maxCrossingSubArray.low, maxCrossingSubArray.high,
                maxCrossingSubArray.sum);
        }
    }

    public static class Result {

        public int low;
        public int high;
        public int sum;
        public Result(int low, int high, int sum) {
            this.low = low;
            this.high = high;
            this.sum = sum;
        }

    }

    /* Driver program to test maxSubArray */
    public static Result maxSubArray(int[] arr) {
        return maxSubArray(arr, 0, arr.length - 1);
    }

    public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);
        String[] arrString = sc.nextLine().split(" ");

        int n = arrString.length;

        int[] arr = new int[n];
        for (int i = 0; i < n; i++) {
            arr[i] = Integer.parseInt(arrString[i]);
        }

        Result result = maxSubArray(arr);

        int[] subArray = new int[result.high - result.low + 1];
        int j = 0;
        for (int i = result.low; i <= result.high; i++) {
            subArray[j++] = arr[i];
        }

        System.out.println(Arrays.toString(subArray));
        System.out.println("Sum : " + result.sum);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:55:59.130

1\. Kadane 算法的实现是错误的，它会在带有一些负数的数组上失败。正确的应该如下所示：

```
 public static void Kadane(int array[]) {
        int max_ending_here = 0;
        for (int i = 0; i < array.length; i++) {
            max_ending_here = Math.max(array[i], max_ending_here + array[i]);
            max_so_far = Math.max(max_so_far, max_ending_here);
        }
        System.out.println("Kadane(int array []): " + max_so_far);
    } 
```

您的代码中有许多错误，例如：

2.`maxEndingHere`在计算答案之前应初始化为 0：

```
[lowIndex,mid)
[mid, highIndex]
[lowCenter, highCenter] 
```

现在它只在第一次迭代之前被初始化。

3.`lowCenter`应该初始化为`lowIndex`

4.程序冗长而复杂……不知道有没有漏掉什么bug……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-12T21:36:20.957

解决方案非常简单，`pv`是一个变量，它向我们显示从 k 的子数组的总和，其中 0<= k <= n-1 到我们在第 i 次迭代中访问的变量。数组 s 让我们跟踪最大子数组，并且 s[i] 也是在第 i 次迭代中找到的最大子数组。c 是原始数组。p 是指向第 i 次迭代中找到的最大子数组的起点的指针。tp 是将 p 更新为正确值的临时指针

```
/**
 * @author : Yash M. Sawant
 */

#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define MAXLENGTH 17
#define MINVALUE -999

int main() {
    int i;

    int s[MAXLENGTH]; s[0] = 0;
    int c[MAXLENGTH] = {0, 13, -3, -25, 20, -3, -16, -23, 18, 20, -7, 12, -5, -22, 15, -4, 7};
    int pv = 0, p = -1, tp = -1;
    for(i = 1 ; i < MAXLENGTH ; i ++) {
        printf("%4d ", c[i]);
        if(s[i - 1] < pv + c[i]) {
            s[i] = pv + c[i];
            pv = pv + c[i];
            if(tp > p) {
                p = tp;
            }
        } else {
            s[i] = s[i - 1];
            pv = pv + c[i];
            if(pv < 0) {
                pv = 0; tp = i;
            }
        }
    }
    printf("\n");
    for(i = 0 ; i < MAXLENGTH ; i ++) {
        printf("%4d ", s[i]);
    }
    printf("\n");
    printf("Max Sub Array = %d and Starts at %d ", s[MAXLENGTH - 1], p);
    return 0;

} 
```

# javascript - 使用 getElementsByTag 更改表中的值

> ID：11963298
> 
> 赞同：1
> 
> 时间：2012-08-15T02:17:13.253
> 
> 标签：javascript, html-table

在过去的几天里，我一直在尝试这样做，但我的 Javascript 是可怕的。极其。

基本上，我试图完成的是获取 td 中的值，并检查一串 10 位数字。（实际上，任何美国格式的电话号码。我已经想出了正则表达式。）我需要用其他东西（不是电话号码的东西）替换那个字符串。

表结构如下所示：

```
 <tr id="76">
        <td class="stxt">
            <div class="dtxt" id="t1344992123" title="14 Aug 12, 08:55 PM">17 mins ago</div>
            <span>
                <a title="Delete">[×]</a>&nbsp;
                <a title="Ban User">[o]</a>&nbsp;
            </span>
            <b class="nme pn_std">Person</b>
            : This is a line a user has said previously
        </td>
    </tr> 
```

将有几行都具有相同的格式。它说“：这是用户之前说过的一行”是需要检查数字的地方。

我发布的表格格式是我必须使用的。无法添加，也无法删除任何标签/属性。

如果有人能够提出用于检查和替换我正在搜索的每个实例的代码，我可以自己插入正则表达式和替换字符串。

而且，如果有人好奇，这是用于 cbox 聊天的单词过滤器。它只是在有人加载聊天时运行的东西。

任何能帮助我的人都会很棒。就像我说的，我不擅长 Javascript。PHP 是我使用的语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:33:45.943

如果您不支持 IE8 以下的任何内容，则可以使用更新的 querySelectorAll。但在发表评论后，我想我会评论它以支持旧方法。

```
//var tableCells = document.querySelectorAll('#tableId td'),
var tableCells = document.getElementsById('tableId').getElementsByTagName('td'),
i = tableCells.length;

while(i--){
    var thisCell = tableCells[i];
    thisCell.innerHTML = thisCell.innerHTML.replace(yourRegEx,yourReplacementStuff);
} 
```

在有人讨论 regEx 和 HTML 之前，请记住，他只是在这里寻找电话号码，而不是用 regEx 解析 HTML。您可以在整个表格的 innerHTML 属性上使用 regEx，但我怀疑循环和咬掉较小的部分实际上可能更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:20:25.620

如果您无法唯一标识要替换其文本的元素，则需要遍历所有文本节点并将其替换为与正则表达式匹配的文本（您尚未向我们展示）。

```
function processTable(id) {
  var table = document.getElementById(id);
  var cells;
  var re = /\d{10}/; // just an example
  var text = 'foo';  // just an example

  if (table) {

    // Could iterate over table.rows then row.cells,
    // but gEBTN seems suitable
    cells = table.getElementsByTagName('td');

    for (var i=0, iLen=cells.length; i < iLen; i++) {
      replaceText(cells[i], re, text);
    }
  }
}

// Recursively replace text in text nodes of elements
function replaceText(el, re, text) {

  var node, nodes = el.childNodes;

  for (var i=0, iLen=nodes.length; i < iLen; i++) {
    node = nodes[i];

    // Replace content of text nodes
    // Ignore script elements
    if (node.nodeType == 3 && node.tagName.toLowerCase() != 'script') {
      node.data = node.data.replace(re, text);

    // Recurse over elements to get child text nodes
    } else if (node.childNodes) {
      replaceText(node, re, text);
    }
  }
} 
```

一些 HTML 来测试它：

```
<table id="t0">
  <tr>
    <td>1234567890
    <td><span>1234567890</span>
  <tr>
    <td>foo 1234567890 bar
    <td><span><b>1234567890</b></span>
  <tr>
    <td><a href="http://www.google.com">1234567890</a>
    <td><span>1234567890</span>
<table>

<button onclick="processTable('t0')">Do replacements</button> 
```

以上应该适用于任何支持javascript的浏览器，比如从IE 5开始（我认为是IE开始支持getElementById的时候，当然IE 6支持）。

# php - 在页面上显示超过 1 个模态框

> ID：11963299
> 
> 赞同：0
> 
> 时间：2012-08-15T02:17:41.110
> 
> 标签：php, javascript, jquery, modal-dialog

<< 参考[这个话题](https://stackoverflow.com/questions/11952407/how-can-i-pass-the-chosen-value-on-a-modal-box-to-php/11953436#11953436)>>

我想在一个页面上制作几个模态框：

```
<script>
var grid_modal_options = {
    height: 'auto',
    width: '80%',
    modal: true
};
function showProducts1ModalBox() {
    $("#products1_modal_box").dialog(grid_modal_options);
    $("#products1_modal_box").parent().appendTo('form:first');
}
function showProducts2ModalBox() {
    $("#products2_modal_box").dialog(grid_modal_options);
    $("#products2_modal_box").parent().appendTo('form:first');
}
function showProducts3ModalBox() {
    $("#products3_modal_box").dialog(grid_modal_options);
    $("#products3_modal_box").parent().appendTo('form:first');
}
</script>

<div id="products1_modal_box" title="Products" style="display: none;">
  <div class="in">
    <div class="grid-12-12">
      <form id="products1_modal_box_form" action="#" method="post">
    <table>
          <thead>
            <tr>
              <th>&nbsp;</th>
              <th>Product</th>
            </tr>
          </thead>
          <!-- Query for read mysql goes here (I skipped this line because it's not the main thing I'm gonna ask since it's run well) /-->
          <tbody>
          <?php
            //read the results
            while($fetch = mysqli_fetch_array($r)) {                
              print "<tr>";
              print "  <td><a href=\"javascript:;\" onclick=\"$('#products1_id_textbox').val('".$fetch[0]."');$('#products1_modal_box').dialog('close');\">Choose</a></td>";
              print "  <td>" . $fetch[0] . "</td>"; //$fetch[0] == Product ID
              print "</tr>";
            }
          ?>
          </tbody>
        </table>
      </form>
    </div>
  </div>
</div>

<div id="products2_modal_box" title="Products" style="display: none;">
  <!-- 
    The rest goes here (the same with "products1_modal_box") 
    except: 
    print "  <td><a href=\"javascript:;\" onclick=\"$('#products2_id_textbox').val('".$fetch[0]."');$('#products2_modal_box').dialog('close');\">Choose</a></td>";
  /-->
</div>

<div id="products3_modal_box" title="Products" style="display: none;">
  <!-- 
    The rest goes here (the same with "products1_modal_box") 
    except: 
    print "  <td><a href=\"javascript:;\" onclick=\"$('#products3_id_textbox').val('".$fetch[0]."');$('#products3_modal_box').dialog('close');\">Choose</a></td>";
  /-->
</div> 
```

和：

```
<input type='text' id='products1_id_textbox' name='products1_id_textbox' />
<a href='#' onclick='showProducts1ModalBox(); return false;'>Choose products 1</a>

<input type='text' id='products2_id_textbox' name='products2_id_textbox' />
<a href='#' onclick='showProducts2ModalBox(); return false;'>Choose products 2</a>

<input type='text' id='products3_id_textbox' name='products3_id_textbox' />
<a href='#' onclick='showProducts3ModalBox(); return false;'>Choose products 3</a> 
```

为什么这不起作用？当我删除 div "products2_modal_box" 和 "products3_modal_box" 时，会出现 div "products1_modal_box" 的模态框，但是当我试图取回所有这些时，单击链接时每个模态框都不会出现。代码有什么问题？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:27:43.637

从技术上讲，这并不能回答您的问题，但我在我的网站上使用 jQuery Reveal 进行模态。似乎比您尝试做的要容易得多。这是来源：[http ://www.zurb.com/playground/reveal-modal-plugin](http://www.zurb.com/playground/reveal-modal-plugin)

它真的很容易设置，每个页面可以有多个模式，并且可以通过事件（例如单击）或使用 jquery 动态触发它们。

希望这可以帮助！

# asp.net - 无法从用户控件 ASP.net 更新更新面板中的标签

> ID：11963300
> 
> 赞同：0
> 
> 时间：2012-08-15T02:17:48.630
> 
> 标签：asp.net, updatepanel, refresh, code-behind

我的代码如下。

```
 <div class="table">
       <asp:UpdatePanel runat="server" ID="labelPanel" UpdateMode="Conditional"  >
           <ContentTemplate>
                 <asp:Label Text="" runat="server" ID="Cost"></asp:Label>
           </ContentTemplate>
       </asp:UpdatePanel>

      <uc1:ucPartsListing ID="ucPartsListing" runat="server" />

  </div> 
```

现在用户控件 ucPartsListing 本身有 2 个更新面板。在某些条件下，用户控件向父 aspx 触发了一个事件。
在那种情况下，我正在尝试设置 aspx 文件中存在的标签值。我从代码隐藏手动调用更新。**然而它不起作用。我哪里错了？**

```
 public partial class PartsEnquiry : BaseAuthPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        ucPartsListing.OnQuotePartsItemSelect += new ascx.ucPartsListing.QuotePartsItemEventHandler(ucPartsListing_OnQuotePartsItemSelect);
    }

    void ucPartsListing_OnQuotePartsItemSelect(string price)
    {
        Cost.Text = price;  //This is not working !

        labelPanel.Update();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:34:08.043

在“void ucPartsListing_OnQuotePartsItemSelect(string price)”方法上设置一个断点，看看它是否被击中。我不确定您使用的是什么用户控件，但是无论应该触发事件的控件是什么，请尝试将其 AutoPostBack 属性设置为 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:01:00.840

我认为您对当前的结构不走运。

当您的用户控件内部的 UpdatePanel 在浏览器中被触发时，它将更新其内部的页面部分。您不能更新执行 UpdatePanel 之外的控件。

手动调用`Update()`外部 UpdatePanel 上的方法将无济于事，因为在客户端上它仍然是接收输出并更新 html 树的内部 UpdatePanel 之一。

为了让它工作，你必须以某种方式触发外部 UpdatePanel，它能够更新 Cost 标签。

# python - 如何为 Python 3 安装 PySpeech？

> ID：11963308
> 
> 赞同：0
> 
> 时间：2012-08-15T02:20:21.310
> 
> 标签：python, windows, installation, text-to-speech

到目前为止，我已经下载并安装了分发和 pywin32，但是我不明白如何安装 PySpeech 本身。说明是“浏览到您将 pyspeech-0.5.2.zip 解压缩到的文件夹并在命令提示符下运行以下命令：'/python32/python speech.py​​ install' 或 'python speech.py​​ install'”。

我将 pyspeech 提取到桌面，并在命令提示符下尝试了上述两个命令。这不起作用，因为我收到以下错误：“'python' 未被识别为内部或外部命令、可运行程序或批处理文件。” 显然我错过了一些东西。有人可以告诉我我做错了什么以及如何纠正这种情况吗？

我怀疑问题在于说明的“浏览到您提取的文件夹......”部分，因为我不知道这与该过程有何联系。此外，请原谅我的天真，因为我从未通过命令提示符安装过任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:25:34.537

您需要添加`python`到您的`PATH`环境变量。有关说明，请参见[此处](http://docs.python.org/using/windows.html#configuring-python)，然后您将需要运行`python.exe setup.py install`或其他任何内容（注意`.exe`）。

# sql-server-2008 - 在 sql server 2008 中直接识别行更改的最佳实践是什么？

> ID：11963311
> 
> 赞同：0
> 
> 时间：2012-08-15T02:21:52.503
> 
> 标签：sql-server-2008, checksum

我正在做一个项目，我必须在不使用更新它的应用程序的情况下直接修改表中的行。我已经回顾了 SQL Server 中的几种技术，例如 Checksum 和 Hashing。我的目标是清除 20 个字段，我的 5 个字段很重要，如果对这 5 个字段进行任何更改，我的校验和/哈希值必须更改。我打算使用一六列作为 rowversion 列。考虑它是一个更好的选择吗？还请引用您的建议以及我还有哪些其他选择？我必须决定哪个是我可以继续的最佳选择？

谢谢，

尼尔坎特·S·德赛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:56:18.220

我可以谈论 Checksum 路线，并强烈建议您不要使用该选项。

Microsoft BOL for Checksum 直接声明：

“我们不建议使用 CHECKSUM 来检测值是否已更改，除非您的应用程序可以容忍偶尔丢失更改”

在一些使用窄表的工作中，我们采用了使用通过 Hashbytes 创建的哈希来检查更改的路线。

# javascript - 在变量上存储 jquery 函数

> ID：11963313
> 
> 赞同：1
> 
> 时间：2012-08-15T02:22:04.233
> 
> 标签：javascript, jquery

我在 .js 文件中有这段代码：

```
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {     
  if (data.address.country='spain') {
    var a="http://www.link1.com";
  } else { 
    var a="http://www.link2.com";
  }
  return a; 
});

var fan_page_url = data(); 
```

如何将 var a 存储在 var fan_page_url 中？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:25:57.163

尝试摆脱`a`并直接分配链接。

```
var fan_page_url;
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function(data) {
    if (data.address.country = 'spain') {
        fan_page_url = "http://www.link1.com";
    } else {
        fan_page_url = "http://www.link2.com";
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:31:06.343

您有两种选择：按照仓库的建议直接分配外部变量，或者将`$.getJSON`返回值视为[Deferred](http://api.jquery.com/category/deferred-object/)：

```
$.when($.getJSON(...)).done(function(returnValue) {
    fan_page_url = returnValue;
}); 
```

如果您不想硬编码要存储结果的变量，后者很有用（尽管通常这不是问题，前一个选项更容易/更干净）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T23:24:45.687

这是我刚刚偶然发现的一个老问题（寻找稍微不同的东西），但由于答案似乎没有击中头部，我想我会加 2 美分：如果你（op）用一个变量成功了在 config.js 中进行了硬编码和手动设置，您可以从 start.js 中获取，为什么不简单：

*   像在全局范围内一样保留声明的变量
*   为其分配默认值或 null 或空值：

    ```
    var fan_page_url = null; // or
    var fan_page_url = ''; // or
    var fan_page_url = 'http://url_default'; // etc... 
    ```

*   然后更新 json 函数中的全局变量：

    ```
    $.getJSON('http://api.wipmania.com/jsonp?callback=?', function(data) {
        if (data.address.country='spain') {
            fan_page_url = "http://url1";
        } else { 
            fan_page_url = "http://url2";
        }
    }); 
    ```

*   在您的 start.js 页面中，您始终可以执行检查以查看变量是否已设置，或者是否仍然带有它的默认值并采取相应的行动......

如果它曾经与您通常手动声明的变量一起工作，那么它在这里的工作方式可能与您在结构上没有任何改变一样，只是在 json 响应之后更新变量。

为后代发布的答案，它可能对将来的某人有所帮助。

# javascript - JavaScript 和 C++ 是否过于相似而无法同时学习？

> ID：11963315
> 
> 赞同：4
> 
> 时间：2012-08-15T02:22:28.840
> 
> 标签：javascript, c++, scripting

我是网页设计和编程的新手。我大约四个月前开始学习 C++，大约一周前才开始学习网页设计。

尽管我只做了大约一周的网页设计，但我觉得我对 XHTML 的精通已经超过了，所以我决定在 XHTML 之后学习 JavaScript，然后再学习 HTML5。

我开始学习网页设计的原因是因为我想学习一些新东西，但因为我四个月前才开始学习 C++，所以我不想通过学习另一种编程语言来迷惑自己。

现在的问题是我开始学习 JavaScript 并看到语法似乎有点类似于 C++。我意识到一种是脚本语言而另一种不是，但我的问题是：对于有我经验的人来说，这会不会太令人困惑？或者我可以同时学习它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T02:32:18.050

不要被愚弄。在学习了四个月的 C++ 和一周的 HTML 之后，你都不精通这两者。

你的方向取决于你想走哪条路。C++ 在网页设计领域几乎毫无用处。

如果你想设计网站，那就坚持使用你知道的 HTML 并从里到外学习它。当您准备好时，用 CSS 补充它，最后用 JavaScript 补充。

如果您想编写通用应用程序，那么请学习 C++ 并了解其所有可能的环境和应用程序。

一旦您可以自信地回答 Stack Overflow 上出现的关于某个主题的大多数问题，那么您就可以认为自己精通了，但请不要低估这项任务：这将花费您很多年

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T02:30:12.683

如果您是编程新手，那么现在就坚持使用 C++。否则 Javascript 和 C++ 应该很容易一起学习，除了*面向对象*之外，大部分语法是相同的。对于使用 C++ 的人来说，Javascript 的一些细微差别可能看起来有点奇怪。我个人认为两者可以一起学习。

# asp.net-mvc-3 - MVC3 授权属性

> ID：11963318
> 
> 赞同：0
> 
> 时间：2012-08-15T02:23:11.260
> 
> 标签：asp.net-mvc-3, class, attributes

这允许“frankl”访问但阻止管理员。我做错了什么？

```
 [Authorize(Order=1,Roles = "Admin",Users="frankl")]
public class AuthorizeBaseController_Admins_frank : Controller
{

} 
```

这可能很简单，但我没有看到任何将两者结合在一起的示例，当我尝试添加它时，“Allowmultiple”属性会生成错误。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:59:15.387

角色和用户应独占使用。如果要组合它们，可以编写自定义授权属性：

```
public class MyAuthoirizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (httpContext == null)
        {
            throw new ArgumentNullException("httpContext");
        }
        var user = httpContext.User;
        if (!user.Identity.IsAuthenticated)
        {
            return false;
        }
        var usersSplit = SplitString(Users);
        var rolesSplit = SplitString(Roles);

        return
            (usersSplit.Length > 0 && usersSplit.Contains(user.Identity.Name, StringComparer.OrdinalIgnoreCase)) ||
            (rolesSplit.Length > 0 && rolesSplit.Any(user.IsInRole));
    }

    private string[] SplitString(string original)
    {
        if (string.IsNullOrEmpty(original))
        {
            return new string[0];
        }
        return (from piece in original.Split(',')
                let trimmed = piece.Trim()
                where !string.IsNullOrEmpty(trimmed)
                select trimmed).ToArray();
    }
} 
```

接着：

```
[MyAuthorize(Order = 1, Roles = "Admin", Users="frankl")]
public class AuthorizeBaseController_Admins_frank : Controller
{
    ...    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:09:22.840

不幸的是，这`AuthorizeAttribrute`将让您指定有效的用户或有效的角色——不能同时指定两者。这是来自 MVC 3 源代码的相关代码。

```
protected virtual bool AuthorizeCore(HttpContextBase httpContext) {
    if (httpContext == null) {
        throw new ArgumentNullException("httpContext");
    }

    IPrincipal user = httpContext.User;
    if (!user.Identity.IsAuthenticated) {
        return false;
    }

    if (_usersSplit.Length > 0 && !_usersSplit.Contains(user.Identity.Name, StringComparer.OrdinalIgnoreCase)) {
        return false;
    }

    if (_rolesSplit.Length > 0 && !_rolesSplit.Any(user.IsInRole)) {
        return false;
    }

    return true;
} 
```

您需要将“frankl”设为管理员，或创建自定义授权属性

# java - 如何在 Eclipse 中启用 java 代码热交换

> ID：11963320
> 
> 赞同：0
> 
> 时间：2012-08-15T02:23:33.727
> 
> 标签：java, eclipse, hotswap

我一直在尝试在 Eclipse 中热交换 Java 代码，但我不知道在 Eclipse 中热交换 Java 代码的限制和规则是什么，所以我的努力​​经常失败。如果有人可以提供关于如何在 Eclipse 中热交换代码的相对详细的解释，或者将我链接到一个会很棒的。

例如，如果我更改 的值，此代码会热交换`u`：

```
public class apples extends tuna {

    public static void main(String[] args) throws InterruptedException {
        while (true) {
            ddop();
            Thread.sleep(1000);
        }
    }

    public static void ddop() {
        int u = 3;
        System.out.println(u);
    }
} 
```

但这段代码没有：

```
public class apples extends tuna {
    static int u;
    public static void main(String[] args) throws InterruptedException {
        int u = 3;
        while (true) {
            System.out.println(u);
            Thread.sleep(1000);
        }
    }
} 
```

谁能解释为什么？是的，我确实检查了“自动构建”标志并且正在调试模式下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:58:48.237

我相信为了热交换方法的源，该方法必须在调用堆栈中。在您的第一个示例中，更改的方法被重复调用，而在第二个示例中，该方法被调用一次，然后才执行代码循环。如果代码在方法已经运行后发生更改，则该方法永远不会再次进入调用堆栈，并且无法获取代码更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:36:45.923

我不是 100% 确定上面的例子，但一般来说，规则是你不能改变一个类的接口。例如，添加去矿方法、更改方法签名、添加/删除静态字段等。

# python - Python：无法导入魔法库

> ID：11963323
> 
> 赞同：0
> 
> 时间：2012-08-15T02:23:59.380
> 
> 标签：python, import, jira, libmagic

我是 Python 新手，最近我在 JIRA 上做一个项目。我需要访问 JIRA api 来检索有关问题的一些信息。但它总是表示如下：

> 警告：无法导入魔法库（是否存在 libmagic？）头像图像内容类型的自动检测将不起作用；对于 create_avatar 方法，明确指定“contentType”参数。

事实上，当我用`easy_install`or下载魔法包时`pip`，它总是失败。

然后，我手动下载了libmagic和magic包，将它们复制到目录`C:\Python27\Lib\site-packages`中，但是在执行该子句时`jira = JIRA()`，它仍然会产生如上所述的警告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:28:17.810

如果它要求`magic`并且`libmagic`意味着`libmagic`未安装，而不仅仅是它的 python 绑定。您需要通过操作系统中的包管理器安装它。

此外，如果您需要帮助，如果没有回溯，我们将无法真正帮助您，因此如果您遇到错误，您需要包含这些错误。

# php - 如何在javascript中输入值/参数

> ID：11963327
> 
> 赞同：0
> 
> 时间：2012-08-15T02:24:19.783
> 
> 标签：php, javascript

情况：

用户可以添加他们想要的应用程序（频道）。所以当用户添加一个应用程序时，一个提示会询问用户是否确认添加应用程序（*带有应用程序名称和ID）？

问题是我不知道如何在 javascript 中调用/放入该值。希望任何人也可以帮助我:)

这里我使用的代码：

```
Application ID: <input type="text" class="txt" name="widget_id" value="" size="30" /> 
<INPUT TYPE="hidden" NAME="box_id" value='<?=$user_box_id;?>'>
<INPUT TYPE="hidden" NAME="user_name" value='<?=decode($user_name);?>'>

<input type="submit" class="btn" name="addapp" value="Add Apps"  onClick="javascript:if(confirm('Are You Sure To Add This Apps? ')) location='<?php echo site_url("$url/box/add_User_App/".$Add_apps['box_id']."/".$Add_apps['user_name']."/".encode($Add_apps["widget_id"]) )?>'"></a></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:07:35.660

您可以使用`onsubmit`表单的事件来执行此操作

```
<form action="<?php echo site_url("$url/box/add_User_App/".$Add_apps['box_id']."/".$Add_apps['user_name']."/".encode($Add_apps["widget_id"]) )?>" onsubmit="confirmation(event);">
    <input type="text" name="appname" id="appName"/>
    <input type="text" name="appid" id="appID"/>
    <input type="submit" value="go"/>         
</form>

<script type="text/javascript" >
   function confirmation(e){
      var appName = document.getElementById("appName");
      var appID = document.getElementById("appID");
      if(!confirm('Are You Sure To Add This Apps with App Name : ' + appName.value + " and App ID : " + appID.value + " ?")){
          e.preventDefault();
          return false;        
      }
   }
</script> 
```

示例：http: [//jsfiddle.net/diode/5YZh8/2/](http://jsfiddle.net/diode/5YZh8/2/)

# python - 无法在 python 中使用来自 user32.dll 的 ChangeWindowMessageFilter

> ID：11963329
> 
> 赞同：0
> 
> 时间：2012-08-15T02:24:40.847
> 
> 标签：python, dll, drag-and-drop

我正在尝试在 dll （**user32.dll**）中调用函数**ChangeWindowMessageFilter**

 **```
dlluser32 = ctypes.cdll.LoadLibrary('user32.dll')
dlluser32.ChangeWindowMessageFilter(0x0233, 1)
dlluser32.ChangeWindowMessageFilter(0x0048, 1)
dlluser32.ChangeWindowMessageFilter(0x0049, 1) 
```

结果是：

```
ValueError: Procedure called with not enough arguments (16 bytes missing) or wrong calling convention 
```

如何正确接听电话？我想在窗口中运行时使用此功能为我的应用程序启用拖放功能，如果它不起作用，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:49:29.783

您必须设置呼叫转换：

```
from ctypes.wintypes import BOOL, DWORD, UINT

dlluser32 = ctypes.cdll.LoadLibrary('user32.dll')
ChangeWindowMessageFilter = dlluser32.ChangeWindowMessageFilter

# BOOL WINAPI ChangeWindowMessageFilter(_In_  UINT message, _In_  DWORD dwFlag);
ChangeWindowMessageFilter.restype = BOOL
ChangeWindowMessageFilter.argtypes = (UINT, DWORD)

# Now you can call it there... 
```**

# entity-framework - Azure EF 代码优先迁移初始化程序

> ID：11963331
> 
> 赞同：4
> 
> 时间：2012-08-15T02:24:59.513
> 
> 标签：entity-framework, entity-framework-4, azure, ef-code-first, entity-framework-migrations

我只是在弄乱 Azure，我似乎无法让我的 Db 工作。我正在关注这里所说的内容：[https](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/) ://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/我更新了我的 web.config 以拥有这个：

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
      <contexts>
          <context type="DownloadThis.Models.DownloadThisDb, DownloadThisDb">
              <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion">
                  <parameters>
                      <parameter value="DownloadThisDb_DatabasePublish" />
                  </parameters>
              </databaseInitializer>
          </context>
      </contexts>
  </entityFramework> 
```

如示例所示，但我不断收到此错误：

> 初始化字符串的格式不符合从索引 0 开始的规范。

我已经三次检查了我的连接字符串，所以不是 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T15:40:09.677

假设您使用 VS2012 发布向导进行发布，我遇到了同样的问题。如果您选择让发布向导启用代码优先迁移，而不是在代码中手动连接它们，那么您需要在发布设置中提供连接字符串。您的正常连接字符串不用于运行迁移，这个新的连接字符串仅用于此目的。这很好，因为您可以指定一个具有提升权限的帐户来执行迁移，但是，您的应用程序不会在此用户上下文下运行。问题是向导没有使指定此连接字符串的需要非常明显。如果你不提供这个，你最终会得到一个空的迁移连接字符串，你会花很多时间试图弄清楚什么'

![发布 Web 应用程序设置](../Images/70aae7f2d96dc1f69883ce8e81b1cc56.png)

假设您的上下文类名为 FooContext。按照惯例，您的 web.config 中将有一个名为 FooContext 的连接字符串。当您通过此向导启用代码迁移时，该向导将创建名为 FooContext_DatabasePublish 的第二个连接字符串，该字符串仅用于运行您的代码首次迁移。

MSDN 上的这篇[博客文章](http://blogs.msdn.com/b/aspnetue/archive/2012/06/12/deployment-in-visual-studio-2012-rc-using-entity-framework-code-first-migrations.aspx)详细解释了这个过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:34:22.240

我认为您`.`的类型字符串中缺少 a ：

```
<databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion"> 
```

代码上方的红色矩形使其难以阅读......

如果那不能解决它，发表评论，我会制作一个样本来匹配你的，看看我是否能让它工作......

**[2012-08-15 更新]**

好的 - 我想我知道这里发生了什么......您提到“我更新了我的 web.config 以拥有这个：”并显示了您的 XML。当我浏览本教程时，我不必在我的`web.config`. 在发布过程中，Visual Studio 的部署过程自动为我添加了 XML，这一切都“正常工作”。

这是您的解决方案：

返回到`web.config`没有这些更新的原始文件，然后再次尝试发布。

作为参考，以下是`<entityFramework>`我的两个`web.config`文件中的部分，第一个来自我的项目，第二个来自我的托管服务（我通过 FTP 连接到正在运行的站点并下载它）。`11964172`在这篇文章的 SO 记录号之后调用 VS 项目：

**本地`web.config`文件设置**

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

**部署`web.config`文件设置**

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
    <contexts>
      <context type="_11963331.Models.ToDoDb, 11963331">
        <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[_11963331.Models.ToDoDb, 11963331], [_11963331.Migrations.Configuration, 11963331]], EntityFramework, PublicKeyToken=b77a5c561934e089">
          <parameters>
            <parameter value="_11963331.Models.ToDoDb_DatabasePublish" />
          </parameters>
        </databaseInitializer>
      </context>
    </contexts>
  </entityFramework> 
```

我想这解释了为什么他们拍摄了`web.config`文件更改的照片，而不是实际提供要输入的代码:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-31T20:42:36.503

看到[这个问题](https://stackoverflow.com/q/30562237/94853)。如果您将部署连接字符串保留为“远程连接字符串”，并选中“执行代码优先迁移”框，您将获得此异常作为迁移连接字符串，`DownloadThisDb_DatabasePublish`将无法正确定义。指定一个真实的连接字符串，而不是在部署向导中将连接字符串框留空，或者定义一个`DownloadThisDb_DatabasePublish`在 Azure 站点配置中命名的连接字符串。

# python - 相当于 SQL 执行的数据存储("update table set colum=%d where column2='%s'" % (value1,value2))?

> ID：11963332
> 
> 赞同：0
> 
> 时间：2012-08-15T02:25:06.237
> 
> 标签：python, sql, google-app-engine, datastore

我正在尝试修改优秀书籍 Programming Collective Intelligence 提供的朴素贝叶斯分类器的代码，使其适应 GAE 数据存储（提供的代码使用 pysqlite2）。但试图做到这一点，我在这一行遇到：

```
 update.put() 
```

从这个块：

```
def incf(self,f,cat):
    count=self.fcount(f,cat)
    if count==0:
      fc_value = fc(feature = f, category = cat, count = 1)
      fc_value.put()
    else:
        update = db.GqlQuery("SELECT count FROM fc where feature =:feature AND category =:category", feature = f, category = cat).get()
   #     if update:
        update.count = count + 1
        update.put()
  #      else:
#      self.con.execute(
 #       "update fc set count=%d where feature='%s' and category='%s'"
  #      % (count+1,f,cat)) 
```

这个错误：

```
File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 151, in train
    self.incf(f,cat)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 88, in incf
    update.put()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 1074, in put
    return datastore.Put(self._entity, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\datastore.py", line 579, in Put
    return PutAsync(entities, **kwargs).get_result()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\datastore.py", line 529, in PutAsync
    'Cannot put a partial entity: %s' % entity)
BadRequestError: Cannot put a partial entity: {u'count': 2L, 'category': None, 'feature': None} 
```

我正在尝试做的是相当于这个 SQL：

```
self.con.execute(
    "update fc set count=%d where feature='%s' and category='%s'"
    % (count+1,f,cat)) 
```

我怎样才能做到这一点？

这里是整个代码：

```
import os

import random

import re

import math

from google.appengine.ext import db

import webapp2

import jinja2

from jinja2 import Environment, FileSystemLoader

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

class fc(db.Model):
    feature = db.StringProperty()
    category = db.StringProperty()
    count = db.IntegerProperty()

fc_class = fc()

class cc(db.Model):
    category = db.StringProperty()
    count = db.IntegerProperty()

cc_class = cc()

def getfeatures(doc):
  splitter=re.compile('\\W*')
  # Split the words by non-alpha characters
  words=[s.lower() for s in splitter.split(doc)
          if len(s)>2 and len(s)<20]
  return dict([(w,1) for w in words])

class classifier:
  def __init__(self,getfeatures, filename=None):
    # Counts of feature/category combinations
    self.fc={}
    # Counts of documents in each category
    self.cc={}
    self.getfeatures=getfeatures

#  def setdb(self,dbfile):
#    self.con=sqlite.connect('db_file')
#    self.con=sqlite3.connect(":memory:")
#    self.con.execute('create table if not exists fc(feature,category,count)')
#    self.con.execute('create table if not exists cc(category,count)')

  def incf(self,f,cat):
    count=self.fcount(f,cat)
    if count==0:
      fc_value = fc(feature = f, category = cat, count = 1)
      fc_value.put()
    else:
        update = db.GqlQuery("SELECT count FROM fc where feature =:feature AND category =:category", feature = f, category = cat).get()
   #     if update:
        update.count = count + 1
        update.put()
  #      else:
#      self.con.execute(
 #       "update fc set count=%d where feature='%s' and category='%s'"
  #      % (count+1,f,cat))

  def fcount(self,f,cat):
    res = db.GqlQuery("SELECT * FROM fc WHERE feature =:feature AND category =:category", feature = f, category = cat).get()
#    res=self.con.execute(
#      'select count from fc where feature="%s" and category="%s"'
#      %(f,cat)).fetchone()
    if res is None:
        return 0
    else:
        return res.count
#        return float(res[0])

  def incc(self,cat):
    count=self.catcount(cat)
    if count==0:
      #  self.con.execute("insert into cc values ('%s',1)" % (cat))
      cc_value = cc(category = cat, count = 1)
      cc_value.put()
    else:
        update = db.GqlQuery("SELECT count FROM cc where category =:category", category = cat).get()
        update.count = count + 1
        update.put()
#      self.con.execute("update cc set count=%d where category='%s'"
#                       % (count+1,cat))

  def catcount(self,cat):
#    res=self.con.execute('select count from cc where category="%s"'
 #                        %(cat)).fetchone()
    res = db.GqlQuery("SELECT count FROM cc WHERE category =:category", category = cat).get()
    if res is None: return 0
#    else: return float(res[0])
    else: return float(res)

  def categories(self):
#    cur = self.con.execute('select category from cc');
    cur = db.GqlQuery("SELECT category FROM cc").fetch(999)
    return [d[0] for d in cur]

  def totalcount(self):
   # res=self.con.execute('select sum(count) from cc').fetchone();
    all_cc = db.GqlQuery("SELECT * FROM cc").fetch(999)
    res = 0
    for cc in all_cc:
        count = cc.count
        res+=count
#    res = db.GqlQuery("SELECT sum(count) FROM cc").get()
#    if res==None: return 0
    if res == 0: return 0
#    return res[0]
    return res

  def train(self,item,cat):
    features=self.getfeatures(item)
    # Increment the count for every feature with this category
    for f in features.keys():
##    for f in features:
      self.incf(f,cat)
    # Increment the count for this category
    self.incc(cat)
#    self.con.commit()

  def fprob(self,f,cat):
    if self.catcount(cat)==0: return 0
    # The total number of times this feature appeared in this
    # category divided by the total number of items in this category
    return self.fcount(f,cat)/self.catcount(cat)

  def weightedprob(self,f,cat,prf,weight=1.0,ap=0.5):
    # Calculate current probability
    basicprob=prf(f,cat)
    # Count the number of times this feature has appeared in
    # all categories
    totals=sum([self.fcount(f,c) for c in self.categories()])

    # Calculate the weighted average
    bp=((weight*ap)+(totals*basicprob))/(weight+totals)
    return bp

class naivebayes(classifier):
  def __init__(self,getfeatures):
    classifier.__init__(self, getfeatures)
    self.thresholds={}

  def docprob(self,item,cat):
    features=self.getfeatures(item)
    # Multiply the probabilities of all the features together
    p=1
    for f in features: p*=self.weightedprob(f,cat,self.fprob)
    return p

  def prob(self,item,cat):
    catprob=self.catcount(cat)/self.totalcount()
    docprob=self.docprob(item,cat)
    return docprob*catprob

  def setthreshold(self,cat,t):
    self.thresholds[cat]=t

  def getthreshold(self,cat):
    if cat not in self.thresholds: return 1.0
    return self.thresholds[cat]

  def classify(self,item,default=None):
    probs={}
    # Find the category with the highest probability
    max=0.0
    for cat in self.categories():
      probs[cat]=self.prob(item,cat)
      if probs[cat]>max:
        max=probs[cat]
        best=cat
    # Make sure the probability exceeds threshold*next best
    for cat in probs:
      if cat==best: continue
      if probs[cat]*self.getthreshold(best)>probs[best]: return default
    return best

def sampletrain(cl):
  cl.train('Nobody owns the water.','good')
  cl.train('the quick rabbit jumps fences','good')
  cl.train('buy pharmaceuticals now','bad')
  cl.train('make quick money at the online casino','bad')
  cl.train('the quick brown fox jumps','good')

class MainHandler(webapp2.RequestHandler):
    def get(self):
        template_values = {"given_sentence":'put a name here'}
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

    def post(self):
        nb = naivebayes(getfeatures)
        sampletrain(nb)
        given_sentence = self.request.get("given_sentence")
        spam_result = nb.classify(given_sentence)
        submit_button = self.request.get("submit_button")
        if submit_button:
            self.redirect('/test_result?spam_result=%s&given_sentence=%s' % (spam_result, given_sentence))

class test_resultHandler(webapp2.RequestHandler):
    def get(self):
        spam_result = self.request.get("spam_result")
        given_sentence = self.request.get("given_sentence")
        test_result_values = {"spam_result": spam_result,
                             "given_sentence": given_sentence}
        template = jinja_environment.get_template('test_result.html')
        self.response.out.write(template.render(test_result_values))

app = webapp2.WSGIApplication([('/', MainHandler), ('/test_result', test_resultHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:05:29.963

使用 GQL 构造（“SELECT count FROM fc ...”），您正在执行[投影查询](https://developers.google.com/appengine/docs/python/datastore/queries#Query_Projection)。投影查询返回的实体仅部分填充，因此无法保存回数据存储区。您可以改为获取完整的实体（例如，使用 GQL，“SELECT * FROM fc...”），这将允许将 put() 放入数据存储区。

# mysql - 在 MySQL 中使用 SELECT 语法创建表

> ID：11963343
> 
> 赞同：5
> 
> 时间：2012-08-15T02:26:16.867
> 
> 标签：mysql, sql, select, create-table

我想知道 MySQL 如何解释`CREATE TABLE`语法：

如果我写：

```
CREATE TABLE tbl1 (
    `v1` int,
    `v2` int
     CONSTRAINT idx PRIMARY KEY (v1)
)
SELECT a, b FROM tbl2; 
```

*   它是否根据它们在 select 语句中的顺序确定哪个值进入`v1`以及哪个进入？`v2`

*   它是使用我在`CREATE TABLE`语句中指定的名称还是从 select 语句中获取它们？

我以前使用过`CREATE TABLE XX SELECT val FROM YY`，但想更具体地了解上述语法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T02:34:37.703

`v1`使用您当前的解决方案，您将获得一个包含、`v2`、`a`和列的表格`b`。

要查看它是如何正确完成的，请参阅 MySQL 官方文档中的[“CREATE TABLE ... SELECT 语句”](http://dev.mysql.com/doc/refman/5.1/en/create-table-select.html)一章。

因此，如果您只想在 上`v1`使用`v2`索引*，*`v1`请执行以下操作：

```
CREATE TABLE tbl1 (PRIMARY KEY (v1))
SELECT a v1,
       b v2
FROM tbl2; 
```

# c - 修复 MSVC 编译器错误 C1074：非法扩展

> ID：11963344
> 
> 赞同：3
> 
> 时间：2012-08-15T02:26:24.013
> 
> 标签：c, visual-studio, visual-c++, compiler-errors

在 Windows 7 SP1（64 位）下使用 Visual Studio 2003 Professional，从命令行编译，我得到一个致命错误 C1074: `IDB is illegal extension for PDB file`。关于此错误的文档[很少](http://msdn.microsoft.com/en-us/library/116s07h4%28v=vs.71%29.aspx)，不能轻描淡写。令人难以置信的奇怪之处在于，在同一台计算机上但在不同帐户下使用相同的构建脚本不会产生此错误。

我的第一个猜测是环境变量中的某些东西导致了这种冲突，但是为两个帐户在它们之间做一个差异，并将 PATH 和 INCLUDE 修改为相同并不能修复错误。

有没有人可以解决这个错误，或者知道是什么实际触发了它？没有任何文件是用`/Z`任何类型的开关编译的，据我所知，`PDB`实际上不应该生成任何文件（并且在成功构建时，不会生成我可以看到的`IDB`OR文件）。`PDB`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-08T06:13:09.923

我在使用 Windows 7 x64 和 Visual Studio 2005 Pro (SP1) 上的解决方案时遇到了同样的问题。

## 症状

我正在使用 Visual Assist X（当前构建 2007）。所以在我的情况下，我需要做的就是通过将`feacp.dl`内部重命名为其他内容来禁用 IntelliSense `C:\Program Files (x86)\Microsoft Visual Studio 8\VC\vcpackages`。这修复了启动时的崩溃（可能与 OP 遇到的问题无关）。

之后`Debug`配置给了我很多

```
fatal error C1033: cannot open program database '' 
```

错误，每个由`cl.exe`.

有了`Release`我得到的配置

```
fatal error C1074: 'IDB' is illegal extension for PDB file: <filename> 
```

即OP所询问的那个。

## 解决方案

[我在其他地方](http://forum.ragezone.com/f651/problems-visual-studio-2003-a-715520/)或多或少地偶然发现了解决方案，为 VS 2003 报道。从某种意义上说，它与[卢克的回答](https://stackoverflow.com/a/18833456/476371)相反。

> 致命错误 C1074
> 
> 如果 Windows 7 机器打开了 Windows XP 兼容模式，则会报告此错误。要解决此错误，请关闭 Windows XP 兼容模式并重新编译解决方案。
> 
> 如果您有其他问题，请查看 MSDN 论坛以获得更多帮助。它不是来源，它听起来更像是您的 VS 设置。我以前从未遇到过这个问题，所以我帮不上什么忙。

这促使我检查了`devenv.exe`（在我的情况下`C:\Program Files (x86)\Microsoft Visual Studio 8\Common7\IDE`）的设置。它看起来像这样：

![devenv.exe 的当前用户设置](../Images/c7d2675ff61439699d78daf16c84018c.png)

在我的例子中，它被设置为与 Windows 2003 Server 兼容，如上面的屏幕截图所示。**但是，必须关闭兼容性！**（复选框未选中）

还要确保通过单击第二个突出显示的按钮检查并更正所有用户的设置（如果您尚未运行特权，则会显示 UAC 提示）。

![devenv.exe 的所有用户设置](../Images/b936ada239b5d2a59580c517c2726c33.png)

这解决了我的问题，我可以避免一直运行 VS 2005 Pro。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:14:35.097

根据我在 MSDN 上收集的关于类似但不完全相同的问题的信息：

由于它编译时除了用户帐户之外没有其他更改，我相信它可能与用户帐户权限有关。检查并查看 VS 设置和 Windows 用户设置中的用户权限之间的差异。

我会尝试的第一件事是关闭 VS，使用**不会**`Run As Administrator`编译的帐户重新打开，看看会发生什么。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T17:00:22.540

在尝试分享我的一些麻烦的解决方案，并希望将它们留给其他人，我在尝试在 Win8-x64 机器内编译 VS2005/SP1 中的旧解决方案时遇到了同样的问题。无论我尝试做什么，它总是停止抱怨非法 IDB 扩展......

另一方面，当“提升”运行时，相同的解决方案在我以前的 Win7-x64 机器中完美编译。

经过一番挣扎，我发现我必须使用 Win8“**程序兼容性助手**” *（或英文版中的任何名称 - 我的操作系统使用不同的语言）*并告诉它**在 Win7 升级环境中运行 VS2005**。之后，晦涩难懂的“IDB 是非法的”错误立即消失了！

希望这会对某人有所帮助=)**

# javascript - 在 d3.js 中绘制滚动/移动平均值

> ID：11963352
> 
> 赞同：9
> 
> 时间：2012-08-15T02:27:29.597
> 
> 标签：javascript, d3.js

寻找一种在 d3 中绘制滚动/移动平均线的方法，而无需提前操纵数据。所以我想通过平均每个数据点和后面的两个来平滑这条线。我的代码是这样的

```
var data = [3, 66, 2, 76, 5, 20, 1, 3, 8, 90, 2, 5, 70];

var w = 20,
    h = 80;

var x = d3.scale.linear()
    .domain([0, 1])
    .range([0, w]);
var y = d3.scale.linear()
    .domain([0, 100])
    .rangeRound([h, 0]);

var chart = d3.select("body").append("svg")
    .attr("class", "chart")
    .attr("width", w * data.length -1)
    .attr("height", h);

var line = d3.svg.line()
    .x(function(d,i) { return x(i); })
    .y(function(d) { return y(d); })

var movingAverageLine = d3.svg.line()
    .x(function(d,i) { return x(i); })
    .y(function(d) { return y(d); })

chart.append("svg:path").attr("d", line(data));
chart.append("svg:path").attr("d", movingAverageLine(data)); 
```

我可以指定movingAverageLine 来计算以下数据点的平均值吗？我想不出在该功能中访问它们的方法。

我在 jsfiddle 上设置了一个示例。[http://jsfiddle.net/tjjjohnson/XXFrg/2/#run](http://jsfiddle.net/tjjjohnson/XXFrg/2/#run)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-27T06:03:04.040

先前的解决方案导致*累积*移动平均线。

[我修改了](http://jsfiddle.net/plmrry/ktLtN/)[John O'Connor](https://stackoverflow.com/users/2255689/john-oconnor)制作的小提琴，通过将自定义插值函数传递给来提供[*n*移动平均值](http://mathworld.wolfram.com/MovingAverage.html)`d3.svg.line()`：

```
movingAvg = function(n) {
    return function (points) {
        points = points.map(function(each, index, array) {
            var to = index + n - 1;
            var subSeq, sum;
            if (to < points.length) {
                subSeq = array.slice(index, to + 1);
                sum = subSeq.reduce(function(a,b) { 
                    return [a[0] + b[0], a[1] + b[1]]; 
                });
                return sum.map(function(each) { return each / n; });
            }
            return undefined;
        });
        points = points.filter(function(each) { return typeof each !== 'undefined' })
        // Note that one could re-interpolate the points 
        // to form a basis curve (I think...)
        return points.join("L");
    }
}
var movingAverageLine = d3.svg.line()
    .x(function(d,i) { return x(i); })
    .y(function(d,i) { return y(d); })
    .interpolate(movingAvg(6)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:17:42.437

以下行功能应该做你想做的事。基于[http://en.wikipedia.org/wiki/Moving_average#Cumulative_moving_average](http://en.wikipedia.org/wiki/Moving_average#Cumulative_moving_average)的公式。

```
var _movingSum;
var movingAverageLine = d3.svg.line()
.x(function(d,i) { return x(i); })
.y(function(d,i) {
    if (i == 0) {
        return _movingSum = 0;
    } else {
        _movingSum += d;
    }
    return y(_movingSum / i);
})
.interpolate("basis"); 
```

[http://jsfiddle.net/XXFrg/12/](http://jsfiddle.net/XXFrg/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:17:11.467

不确定“滚动平均值”是什么意思，但如果你只想有一条线来显示数据的平均值，这里有一种方法：

```
chart.append("svg:line")
     .attr("x1", x(0))
     .attr("x2", x(1))
     .attr("y1", d3.mean(data))
     .attr("y2", d3.mean(data))
    .style('stroke', 'blue')
     .style('stroke-width', 1) 
```

你可以在这里看到 jsfiddle：http: [//jsfiddle.net/XXFrg/3/](http://jsfiddle.net/XXFrg/3/)。希望有帮助，

# html - 绝对位置和溢出：自动不出现滚动条

> ID：11963357
> 
> 赞同：1
> 
> 时间：2012-08-15T02:28:08.767
> 
> 标签：html, css, positioning, css-position

我不知道这是否可能仅使用 html 和 css，但我在相对容器中有一个绝对 div，并且希望在容器下有一个常规 div。

HTML：

```
<div id="container">

    <div id="content">
    </div>

</div>

<div id="footer">

</div> 
```

CSS：

```
#container{

position:relative;
overflow:auto;

}

#content{

position:absolute;
width:955px;
z-index:1000;

} 
```

目标是防止“内容” div 重叠到页脚中。它适用于溢出：自动，但我得到了另一个垂直滚动条出现在容器 div 中。

还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:10:54.117

那么，如何仅隐藏垂直滚动条：

```
#container {
    position: relative;
    overflow: auto;
    overflow-y: hidden;
} 
```

?

如果您正在寻找更花哨的东西来隐藏滚动条，那么您可以使用 JavaScript mousescroll 事件来做到这一点。 [http://viralpatel.net/blogs/2009/08/javascript-mouse-scroll-event-down-example.html](http://viralpatel.net/blogs/2009/08/javascript-mouse-scroll-event-down-example.html) 或者你可以使用一些 jquery 插件来处理滚动条，它们有很多，jScrollpane、Scrollable...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:15:00.110

仅使用 HTML 和 CSS 就可以做到这一点。[您可能会发现来自http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)的 HTML 和 CSS 代码的设置很有用，因为它使用与您的代码相同的布局并且试图实现类似的目标。

我在下面的小提琴中将用于创建粘性页脚的代码与您的代码相结合：

[http://jsfiddle.net/bPybY/1/](http://jsfiddle.net/bPybY/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:00:00.593

您必须以不同方式更改布局，因为具有`absolute`位置的元素没有布局空间。像这样：

```
<html> 
<head>
<style>
#container{
position:relative;
}
#absoluteContent{
position:absolute;
width:955px;
z-index:1000;
}
</style>
</head>
<body>
<div id="container">
  <div id="absoluteContent">
    <div id="content">content
    </div>
    <div id="footer">footer
    </div>
  </div>
</div>
</body>
</html> 
```

# objective-c - 为什么我不能在 for 循环中追加字符串？

> ID：11963358
> 
> 赞同：1
> 
> 时间：2012-08-15T02:28:11.757
> 
> 标签：objective-c, for-loop, nsstring, nsmutablestring, nsentitydescription

我有以下代码，我试图简单地循环遍历一个实体，并且对于每个 NSPropertyDescription 名称，将其附加到一个可变字符串，我将在其中构建一个进一步的字符串。

```
 - (void) createCSV {
    NSEntityDescription *anEntity = [NSEntityDescription entityForName:@"Missions" inManagedObjectContext:self.missionDatabase.managedObjectContext];

    NSMutableString *csvString = [NSString string];

    for (NSPropertyDescription *property in anEntity) {
        [csvString appendString:property.name];
    }
    NSLog(@"%@",csvString);
} 
```

运行以下代码时的问题是我得到一个

`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Attempt to mutate immutable object with appendString:'`

我无法弄清楚我做错了什么。我不能将 NSString 附加到 NSMutableString 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:30:40.967

再看一遍。`csvString`是不可变的。您正在创建一个`NSString`. 创建一个`NSMutableString`看起来像这样：

```
 NSMutableString *csvString = [NSMutableString string]; 
```

# iphone - 从一个 ViewController 翻转到另一个 iBooks Style

> ID：11963359
> 
> 赞同：0
> 
> 时间：2012-08-15T02:28:13.427
> 
> 标签：iphone, xcode, navigation, uipageviewcontroller

我正在尝试从数据库加载内容并允许用户像页面一样翻阅它，然后在内容的末尾，为他们提供转到另一部分内容的选项（可能带有按钮）。内容目前只是用 html 格式化，但如何实现按钮导航？我对 Xcode 有点陌生，所以也许我什至没有找到正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:20:03.027

参考这个开源：[https ://github.com/devindoty/iBooks-Flip-Animation](https://github.com/devindoty/iBooks-Flip-Animation)

这是非常少的代码并且完美地工作。

# kobold2d - Kobold2d 中的 didEnterBackground

> ID：11963364
> 
> 赞同：0
> 
> 时间：2012-08-15T02:28:45.510
> 
> 标签：kobold2d

在 Cocos2d 中，我会`(void)applicationDidEnterBackground:(UIApplication *)application`在 AppDelegate 内部实现 - 但在 Kobold2d 中（我没有使用太多），这一切都由 处理`config.lua`，这很好，但是我如何处理这些`exit`//应用程序的状态更改`enter`？`background`

我是否必须覆盖某些东西，还是有一些特定的地方？我不确定这里的最佳做法是什么，或者我在网上查找资源时遇到了很多麻烦。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:03:44.697

您可以简单地将这些方法添加到项目的 AppDelegate 类中。AppDelegate 派生自实现 UIApplicationDelegate 的 KKAppDelegate。

确保为每个方法调用 [super method]，因为 KKAppDelegate 实现了基本行为并依赖于接收一些 UIApplicationDelegate 方法。

# python - TypeError：_send_request() 得到了一个意外的关键字参数“prepare_body”

> ID：11963367
> 
> 赞同：0
> 
> 时间：2012-08-15T02:29:42.533
> 
> 标签：python, django, elasticsearch, django-haystack

haystack v2.0.0-beta，pyelasticsearch 0.0.6。当我尝试运行 "python managy rebuid_index" 时，出现错误：

```
File "/usr/lib/python2.6/site-packages/pyelasticsearch-0.0.6-py2.6.egg/pyelasticsearch.py", line 266, in bulk_index
response = self._send_request('POST', path, body, {'op_type':'create'}, prepare_body=False) 
```

TypeError：_send_request() 得到了一个意外的关键字参数“prepare_body”

pyelasticsearch.py​​ 中的详细信息：

```
#+
    def bulk_index(self, index, doc_type, docs, id_field="id"):
        """
        Indexes a list of documents as efficiently as possible.
        """
        body_bits = []

        if not len(docs):
            raise ElasticSearchError("No documents provided for bulk indexing!")

        for doc in docs:
            action = {"index": {"_index": index, "_type": doc_type}}

            if doc.get(id_field):
                action['index']['_id'] = doc[id_field]

            body_bits.append(self._prep_request(action))
            body_bits.append(self._prep_request(doc))

        path = self._make_path(['_bulk'])
        # Need the trailing newline.
        body = '\n'.join(body_bits) + '\n'
        response = self._send_request('POST', path, body, {'op_type':'create'}, prepare_body=False)
        return response
#+ 
```

实际上，我自己添加了 bulk_index，在错误“ `self.conn.bulk_index(self.index_name, 'modelresult', prepped_docs, id_field=ID) AttributeError: 'ElasticSearch' object has no attribute 'bulk_index'`”之后，点击链接[https://github.com/toastdriven/pyelasticsearch/blob/master/pyelasticsearch.py](https://github.com/toastdriven/pyelasticsearch/blob/master/pyelasticsearch.py#L424-469) ​​#L424-469 有人有同样的经历吗？任何建议和参考将不胜感激。

# php - 如何将行插入到 mysql 数据库中？

> ID：11963369
> 
> 赞同：0
> 
> 时间：2012-08-15T02:29:50.750
> 
> 标签：php, mysql, database

我需要编写一个脚本来使用自动化测试来不断地将行插入到 mysql 数据库中。哪种脚本语言最适合这个？

我正在使用 php 来读取数据库并创建 html。也为此使用 PHP 有意义吗？还是我最好使用 ruby​​ 或其他机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:35:24.970

[了解如何使用 MySql 存储过程。](http://mysqlstoredprocedure.com/)和 AFAIK，**PHP**的构建是为了从一开始就生成 HTML。任何*明显的*性能问题都*可能*源于您对 html 的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:41:46.483

看起来我应该只使用 cmd 行中的 php，这显然是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T02:35:41.630

您可以使用 phpadmin、toad 或任何其他 MySql IDE 来运行脚本：

```
BEGIN
  LOOP
    INSERT INTO ...
  END LOOP;
END; 
```

# android - 无法复制自己的数据库

> ID：11963375
> 
> 赞同：0
> 
> 时间：2012-08-15T02:30:56.253
> 
> 标签：android, sqlite, sqliteopenhelper

**opener.java**

```
 package com.example.camp;

    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;

    import android.app.Activity;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteException;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.os.Bundle;
    import android.util.Log;

    public class opener extends SQLiteOpenHelper {
        private static final String dbpath="\\data\\data\\com.example.camp\\databases\\";
        private static String dbname="mok";
        private SQLiteDatabase myDataBase;
        static String tname="javap";
        static String qn="ques";
        static String a="ans";
    private Context CON;

        public opener(Context context) {
            super(context, dbname, null, 3);
            this.CON=context;

        }
           public void createDataBase() throws IOException{

                boolean dbExist = checkDataBase();

                if(dbExist){

                    Log.e("sd", "donothing db exist");
                    //do nothing - database already exist
                }else{

                    //By calling this method and empty database will be created into the default system path
                       //of your application so we are gonna be able to overwrite that database with our database.
                    this.getReadableDatabase();

                    try {
         Log.e("pt", "calling copy");
                        copyDataBase();

                    } catch (IOException e) {

                        throw new Error("Error copying database");

                    }
                }

            }

         private boolean checkDataBase(){

                SQLiteDatabase checkDB = null;
                Log.e("inside","chkdb");

                try{

                    Log.e("incd", "eroo");
                    String myPath =dbpath +dbname;
                    checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

                }catch(SQLiteException e){

                    Log.e("l","dexist");

                }

                if(checkDB != null){
                    Log.e("incd", "if");
                    checkDB.close();
                    Log.e("",""+checkDB);

                }

                return checkDB != null ? true : false;
            }
         private void copyDataBase() throws IOException{
             Log.e("inside","copydb");

                InputStream myInput = CON.getAssets().open(dbname);

                String outFileName = dbpath + dbname;

                //Open the empty db as the output stream
                OutputStream myOutput = new FileOutputStream(outFileName);

                //transfer bytes from the inputfile to the outputfile
                byte[] buffer = new byte[1024];
                int length;
                while ((length = myInput.read(buffer))>0){
                    myOutput.write(buffer, 0, length);
                }

                //Close the streams
                myOutput.flush();
                myOutput.close(); 
                myInput.close();

            }

            public void openDataBase() throws SQLException{

                //Open the database
                String myPath = dbpath + dbname;
                myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

            }

            @Override
            public synchronized void close() {

                    if(myDataBase != null)
                        myDataBase.close();

                    super.close();

            }

            @Override
            public void onCreate(SQLiteDatabase db) {

            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

            }

        } 
```

**跳转.java**

```
 package com.example.camp;

    import java.io.IOException;

    import android.app.Activity;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.os.Bundle;
    import android.util.Log;

    public class jump extends Activity  {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_jump);
            opener obj=new opener(this);
            final SQLiteDatabase sqdb = obj.getWritableDatabase();
            Log.e("ck1", "ok");

        try{
            Log.e("ck2", "ok");
            obj.createDataBase();
        }catch(IOException e){ 

            Log.e("I/O", e.toString());

        }

        try{

            obj.openDataBase();
        }catch(Exception e)
        {
            Log.e("I/O2", e.toString());
        }
    try{
           /*Cursor c = sqdb.query(opener.tname,
                new String[] { opener.qn, opener.a },
                null, null, null, null, null);

         while (c.moveToNext()) {
            // GET COLUMN INDICES + VALUES OF THOSE COLUMNS
            int id = c.getInt(c.getColumnIndex(opener.qn));
            String name =
            c.getString(c.getColumnIndex(opener.a));
            Log.i("LOG_TAG", "ROW " + id + " HAS NAME " + name);
            */
         //}\
         }catch(Exception e){ 

             Log.e("ck3",e.toString());
         }

        }} 
```

**堆栈跟踪**

```
 08-15 03:22:44.030: I/dalvikvm(1149): threadid=3: reacting to signal 3
    08-15 03:22:44.160: I/dalvikvm(1149): Wrote stack traces to '/data/anr/traces.txt'
    08-15 03:22:44.330: E/ck1(1149): ok
    08-15 03:22:44.330: E/ck2(1149): ok
    08-15 03:22:44.330: E/inside(1149): chkdb
    08-15 03:22:44.340: E/incd(1149): eroo
    08-15 03:22:44.340: I/SqliteDatabaseCpp(1149): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/com.example.camp/databases/camprep
    08-15 03:22:44.340: I/SqliteDatabaseCpp(1149): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=//\data\data\com.example.camp\databases\camprep, db=/data/data/com.example.camp/databases/camprep
    08-15 03:22:44.340: E/SqliteDatabaseCpp(1149): sqlite3_open_v2("\data\data\com.example.camp\databases\camprep", &handle, 1, NULL) failed
    08-15 03:22:44.351: E/SQLiteDatabase(1149): Failed to open the database. closing it.
    08-15 03:22:44.351: E/SQLiteDatabase(1149): android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1013)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:962)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at com.example.camp.opener.checkDataBase(opener.java:77)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at com.example.camp.opener.createDataBase(opener.java:37)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at com.example.camp.jump.onCreate(jump.java:24)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.app.Activity.performCreate(Activity.java:4465)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.os.Handler.dispatchMessage(Handler.java:99)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.os.Looper.loop(Looper.java:137)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at android.app.ActivityThread.main(ActivityThread.java:4424)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at java.lang.reflect.Method.invokeNative(Native Method)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at java.lang.reflect.Method.invoke(Method.java:511)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    08-15 03:22:44.351: E/SQLiteDatabase(1149):     at dalvik.system.NativeStart.main(Native Method)
    08-15 03:22:44.351: E/l(1149): dexist
    08-15 03:22:44.351: E/pt(1149): calling copy
    08-15 03:22:44.351: E/inside(1149): copydb
    08-15 03:22:44.360: E/unable(1149): copydbjava.io.FileNotFoundException: camprep
    08-15 03:22:44.360: D/AndroidRuntime(1149): Shutting down VM
    08-15 03:22:44.360: W/dalvikvm(1149): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
    08-15 03:22:44.370: E/AndroidRuntime(1149): FATAL EXCEPTION: main
    08-15 03:22:44.370: E/AndroidRuntime(1149): java.lang.Error: Error copying database
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at com.example.camp.opener.createDataBase(opener.java:56)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at com.example.camp.jump.onCreate(jump.java:24)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.app.Activity.performCreate(Activity.java:4465)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.os.Handler.dispatchMessage(Handler.java:99)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.os.Looper.loop(Looper.java:137)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at android.app.ActivityThread.main(ActivityThread.java:4424)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at java.lang.reflect.Method.invokeNative(Native Method)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at java.lang.reflect.Method.invoke(Method.java:511)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    08-15 03:22:44.370: E/AndroidRuntime(1149):     at dalvik.system.NativeStart.main(Native Method)
    08-15 03:22:44.530: I/dalvikvm(1149): threadid=3: reacting to signal 3
    08-15 03:22:44.560: I/dalvikvm(1149): Wrote stack traces to '/data/anr/traces.txt'
    08-15 03:22:44.979: I/dalvikvm(1149): threadid=3: reacting to signal 3
    08-15 03:22:44.989: I/dalvikvm(1149): Wrote stack traces to '/data/anr/traces.txt' 
```

改变路径后它仍然没有开始。我已经找到了星迹。我'vw注意到filenotfound并且无法打开database.but文件在我项目的assets文件夹中。

# c++ - 服务器监听 localhost:8080 Apache 还能监听 80 端口吗？

> ID：11963379
> 
> 赞同：0
> 
> 时间：2012-08-15T02:31:43.490
> 
> 标签：c++, linux, facebook, apache, port

我在 linux 中有一个 C++ 服务器，使用 Mongoose 在端口 8080 上侦听 http 请求。我正在使用端口 8080，因为我有一个 Apache 服务器已经在使用端口 80。

我让 C++ 服务器监听 http 请求的原因是，我可以接收 Facebook 发送的 http GET 以获取用户的 Facebook 信息。对于 Facebook 服务器端 Auth，我将重定向到 localhost:8080。

我正确地获取了从 Facebook 发送的信息，但是现在 Apache 没有将我的 html 提供给客户端网页（如果我只重定向到本地主机，它就可以正常工作）。

是否有可能使这两项工作？客户端是否仍在尝试从端口 80 获取 index.html，或者它是否希望 8080 现在发送这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:53:10.690

80等于8080吗？显然没有。所以这两个端口可能被不同的应用程序监听。尝试使用 Wireshark（数据包分析器）检查收入请求。

# iphone - AudioUnit：如何获取混合音频数据

> ID：11963380
> 
> 赞同：1
> 
> 时间：2012-08-15T02:32:15.740
> 
> 标签：iphone, audiounit, mixer

我使用 AudioUnit 混合两个音频文件，使用 ioUnit 从麦克风录制，我想用混音器获取同步的音频数据并录制，但在“RenderNotify”回调中我只获取录制数据，我该怎么做?

```
 AUGraphAddRenderNotify(processingGraph, auRenderCallbac, self);

    static OSStatus auRenderCallbac(void *                          inRefCon,
                                AudioUnitRenderActionFlags *    ioActionFlags,
                                const AudioTimeStamp *          inTimeStamp,
                                UInt32                          inBusNumber,
                                UInt32                          inNumberFrames,
                                AudioBufferList *               ioData)

{

    if(*ioActionFlags & kAudioUnitRenderAction_PostRender)
    {
        MixerHostAudio *THIS = (MixerHostAudio *)inRefCon;

        AudioUnitSampleType samples[inNumberFrames]; // A large enough size to not have to worry about buffer overrun
        memset (&samples, 0, sizeof (samples));

        AudioBufferList bufferList;
        bufferList.mNumberBuffers = 1;
        bufferList.mBuffers[0].mData = samples;
        bufferList.mBuffers[0].mNumberChannels = 1;
        bufferList.mBuffers[0].mDataByteSize = inNumberFrames*sizeof(AudioUnitSampleType);

        OSStatus err = AudioUnitRender(THIS.ioUnit, ioActionFlags, 
                                       inTimeStamp, 1, inNumberFrames, &bufferList);
        printf("%lu \n",err);

        unsigned char aacData[2048] = {0};
        int inLen = inNumberFrames;
        int outLen;

        [THIS->aacEncoder encFuncWithInCode:(short *)bufferList.mBuffers[0].mData outCode:aacData inLen:&inLen outLen:&outLen];

        fwrite(aacData, 1, outLen, THIS->outfile);
    }

    return noErr;
} 
```

> 在这个我只得到麦克风的声音，但没有音频文件的声音

# sql - SQL Server：选择查询中除第一个结果之外的所有结果

> ID：11963382
> 
> 赞同：2
> 
> 时间：2012-08-15T02:32:22.057
> 
> 标签：sql, sql-server, tsql

我们有两个表的问题，我们称它们为 Item 和 ItemStatuses。我们跟踪状态的每次更改，因此 ItemStatuses 表中有一个开始日期和结束日期。我们通过查找结束日期为空的状态来跟踪当前状态。

由于系统中的错误，最新状态被多次添加到许多项目中。我需要为每个项目选择除第一个状态之外的所有状态。我有以下查询，它给了我所有的打开状态。我正在尝试这条路线，因为我想我可以使用行号来跳过第一个，但是这些集合中有多个项目，所以我需要跳过每个项目的第一个状态。我想我的查询非常接近，但我不确定我需要做什么。

```
SELECT ID, rn = ROW_NUMBER() OVER (ORDER BY ItemID)
FROM ItemStatuses WHERE ID IN
(
SELECT
s.ID
FROM Items as i
INNER JOIN ItemStatuses AS s ON
i.ID = s.ItemID AND
s.EndDate IS NULL
GROUP BY i.ID
HAVING COUNT(i.ID) > 1
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:51:17.390

为了说明如何更新表*的第一个状态以外的所有状态*：

```
declare @itemstatuses table (id int, Enddate datetime, theStatus int)
insert into @itemstatuses
    values  (1,getdate()-3,1),(1,getdate()-2,2),(1,getdate()-1,3),
            (2,getdate()-3,2),(2,getdate()-2,2),(2,getdate()-1,99),
            (3,getdate(),1)

select 'before',* from @itemStatuses

;with sorted
as  (   
        select  [r] = row_number()over(partition by id order by Enddate), * 
        from    @ItemStatuses
    )
update sorted
set theStatus = 100
where r>1

select 'after',* from @itemStatuses 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:47:05.170

我会简化您的`SQL`查询，因为这可能会变得过于复杂和昂贵。
然后使用您的服务器端语言来执行任何过滤或条件。

# wix - WiX - 在自定义操作中设置多个属性

> ID：11963384
> 
> 赞同：2
> 
> 时间：2012-08-15T02:32:42.070
> 
> 标签：wix, custom-action

当 ALLUSERS 为 1 时，我有几个属性要设置：

```
<CustomAction Id="CA1" Property="InstallDir" Value="[MYINSTALLDIR]" Execute="immediate" />
<CustomAction Id="CA2" Property="Version" Value="2.0" Execute="immediate" />
<CustomAction Id="CA3" Property="x" Value="x" Execute="immediate" />
<CustomAction Id="CA4" ... />
<CustomAction Id="CA5" ... />

<InstallExecuteSequence>
    <Custom Action="CA1" After="AppSearch">ALLUSERS=1</Custom>      
    <Custom Action="CA2" After="AppSearch">ALLUSERS=1</Custom>      
    <Custom Action="CA3" After="AppSearch">ALLUSERS=1</Custom>      
    <Custom Action="CA4" After="AppSearch">ALLUSERS=1</Custom>      
    <Custom Action="CA5" After="AppSearch">ALLUSERS=1</Custom>      
</InstallExecuteSequence> 
```

这是可行的，但我想知道是否有更简洁的方法而不是大量的 CA 和愚蠢的 ID，例如：

```
<CustomAction Id="CA" Property="InstallDir=[MYINSTALLDIR]; Version=2.0; x=x; y=y; z=z ..." Execute="immediate" />

<InstallExecuteSequence>
    <Custom Action="CA" After="AppSearch">ALLUSERS=1</Custom>      
</InstallExecuteSequence> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T02:46:07.123

您可以编写一个调用 MsiSetProperty() 多次的 C++ 自定义操作。不过，从技术上讲，失败的风险会更大。一旦设置好，一堆设置属性 CA 通常不会那么可怕。

# database-design - 表设计来跟踪客户订单系统中的变更单？

> ID：11963386
> 
> 赞同：1
> 
> 时间：2012-08-15T02:33:11.083
> 
> 标签：database-design

我正在为大型商业建设项目的项目管理订购系统设计表格。输入客户订单时，客户拥有其原始采购订单。未来，客户将通过添加到订单或进行更改来更改原始 PO。我需要将这些更改标记/跟踪并编号为客户订单上的更改订单，但原始订单需要在订单顶部保持完整，并带有小计（以保留原始报价/订单），以及任何更改将在下面列出作为其相关定价的变化。然后将在底部有一个新的总数，该总数将说明原始订单和变更订单。

关于如何设计表格以跟踪与原始订单项目/总数分开的这些更改有什么想法？

到目前为止，我有以下表格：客户、订单、订单详情、产品等。

编辑：希望澄清：

*   客户下订单（订单表：OrderID、PO#、OrderDate 等）
*   订单有一对多行项目（OrderDetail 表：LineID、Qty、Description 等）
*   一个订单可以有一对多的订单更改。
*   订单更改只是将订单项添加到订单中，每个订单更改（一个或多个订单项）都需要记录（例如“更改订单 #1”、“更改订单 #2”等），以便它们可以在客户和我的客户之间很容易引用。

下订单后，如果客户想稍后添加到订单中，我会看到将添加行项目添加到 OrderDetail 表中。

所以我的客户需要能够查找：

*   原始订单上有哪些商品，原始订单总额是多少。
*   对订单做了什么“变更单”，每个变更单都有自己的日期和价格。
*   新订单总额是多少

我的问题是，我可以将变更单行项目放在同一个表中还是不同的表中？如何显示原始订单的一部分？我如何显示哪些项目是每个变更单的一部分？

最好使用另一张或两张桌子吗？

**编辑：可能的解决方案**
@Darklantern - 如果我理解你的想法，请告诉我，它看起来像这样

**初始订单：**
`Order Header:`
`- Version = 1`

`Order Detail:`
`- Version = 1 Part = A`
`- Version = 1 Part = B`

**添加变更单后的订单：**
`Order Header:`
`- Version = 2`

`Order Detail:`
`- Version = 1 Part = A`
`- Version = 1 Part = B`
`- Version = 2 Part = A`
`- Version = 2 Part = B`
`- Version = 2 Part = C`

这会很棒，但是我要跟踪原始订单的一部分，版本 1 的一部分等等。你的想法看起来不错，但如果没有比较，将无法清楚地显示“版本 2 B 部分”是否被编辑它到“版本1 B部分”。

我把你的想法更进一步了。它会起作用吗，或者我没有看到什么缺陷：

**初始订单：**
`Order Header:`
`- Date, etc`

`Order Detail:`
`- Version = 0 Part = A`
`- Version = 0 Part = B`

**多次订单更改后的订单：**
`Order Header:`
`- Date, etc`

`Order Detail:`
`- Version = 0 Part = A`
`- Version = 0 Part = B`
`- Version = 1 Part = C`
`- Version = 1 Part = B Upgraded to D (price is the difference between B and D`
`- Version = 2 Part = A removed (price is a negative amount)`

那么问题来了，报告有多简单？打印采购订单或发票时，我可以列出每个“版本”及其自己的组标题和小计吗？因为很多时候每个“版本”都会有自己的批次定价。

我是在正确的轨道上，还是在兔子小径上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:49:42.133

你的第一个例子正是我的想法。我看到您的第二个样本是一个很好的变化，但报告起来更复杂。客户是否看到发票/订单中的所有内容，包括所有更改？或者你只是为了管理而把它分组，一个管理报告工具？您是想为每个版本创建模拟发票，还是想以分类帐样式格式展示整个订单。从报告（您没有说报告使用哪个工具）的角度考虑，第一个“版本”更简单，您可以按订单详细信息/产品列出，以便快速比较。您可以为每个版本创建小计。您当然可以创建按版本分组的发票/报告，但是如何在每个组中混合来自不同版本的项目，这对于脚本来说可能很复杂。我会更多地考虑这一点。当然，如果您熟悉脚本，那么版本 2 可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:16:44.630

嗯...我应该戴新眼镜。我的建议是将行项目留在一个表格中。将 VersionNumber 添加到 Order 和 Line 项目，当项目被取代时，将所有项目（包括新项目）增加到新版本（将被取代项目保留在其原始版本）。最终订单的标题版本 = 匹配的订单项版本。这更容易报告。

您可以通过使用 (Ident,Orderid,VersionNumber) 的 tblOrderVersion 来规范这一点，其中该行将使用当前版本号进行更新。这将允许您跟踪订单的每次迭代。如果表变得太大，将冗余数据删除到另一个表中会很简单，您可以合并以获取所需的报告。我希望我能帮上一点忙。我也认为在没有解释的情况下对某人投反对票是不礼貌的。（顺便说一句，我不赞成你）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T02:47:45.013

您的问题太宽泛了，您可能想要准确地指定您想要实现的目标。例如，您是否要为修改的项目输入一个新行，然后请求最新的行版本，或者您只希望该项目的 1 行（根据需要修改此行）然后将更改信息放入审计表（前端编码）。在网上寻找可以帮助您设计的 ERD，我相信这个概念并不新鲜。检查 Northwind/Pubs 示例数据库以获取一些想法。

# java - glassfish 3.1 以什么 Windows 用户身份运行？

> ID：11963387
> 
> 赞同：2
> 
> 时间：2012-08-15T02:33:15.073
> 
> 标签：java, web-services, glassfish-3, netbeans-7

我正在尝试从在 netbeans 7.2 预打包 glassfish 上运行的 web 服务执行此操作：

```
void correrMotor() throws InterruptedException {

    try {
//          Runtime rt = Runtime.getRuntime();
//          Process pr = rt.exec("C:\\Users\\Admin\\Documents\\UNIBE\\Inv Ops\\Mercalum\\correrMotor.bat");
        Process p = Runtime.getRuntime().exec("C:\\Users\\Admin\\Documents\\UNIBE\\Inv Ops\\Mercalum\\correrMotor.bat");
        BufferedReader in = new BufferedReader(  
                            new InputStreamReader(p.getInputStream()));  
        String line = null;  
        while ((line = in.readLine()) != null) {  
            System.out.println(line); 
    }} 
    catch (IOException ex) {
        Logger.getLogger(EjecutarMotor.class.getName()).log(Level.SEVERE, null, ex);
        ex.printStackTrace();
    }
} 
```

但我得到的只是找不到.exe（我的 correrMotor.bat 正在绑定调用可执行文件）的错误，但是如果我使用 Windows 资源管理器运行 bat，它运行没有问题，我怀疑这是因为权限, 有人可以帮我吗？

# scala - 使用 Squeryl scala 全选

> ID：11963388
> 
> 赞同：2
> 
> 时间：2012-08-15T02:33:42.023
> 
> 标签：scala, playframework, playframework-2.0, squeryl

我正在尝试在查询中选择所有表。我必须指定一个 where 子句（或者我是这样），那么里面有什么？

```
def all() = transaction { from(AppDB.users)(s => where(WHAT GOES HERE?) select(s)).toIndexedSeq } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T02:45:58.043

这应该这样做。

```
from(AppDB.users)(s => select(s)) 
```

# xml - 使用 XSLT 1.0 和 Muenchian 分组方法如何防止单个字段的连续输出，如果其值不变

> ID：11963390
> 
> 赞同：1
> 
> 时间：2012-08-15T02:33:52.407
> 
> 标签：xml, xslt

在[这个问题](https://stackoverflow.com/questions/11928339/using-xslt-can-i-prevent-output-of-consecutive-identical-values)中，我询问是否可以使用 XSLT 防止输出连续的相同值。在这个问题中，我扩展了输入数据，以便XSLT 1.0 语法的[Muenchian 分组方法更加清晰。](http://www.jenitennison.com/xslt/grouping/muenchian.html)

是否可以使用 XSL 转换仅匹配 XML 文档中第一次出现的值？

我想打印出 f2,f3 中的每个值，但只打印 f1 内容的第一个实例，保留顺序。

XML 数据

```
 <doc> 
    <datum>
        <f1>One</f1>
        <f2>Monday</f2>
        <f3>January</f3>
      </datum>
      <datum>
        <f1>One</f1>
        <f2>Tuesday</f2>
        <f3>February</f3>
      </datum>
      <datum>
        <f1>Two</f1>
        <f2>Wednesday</f2>
        <f3>March</f3>
    </datum>
    </doc> 
```

输出

```
 One
      -Monday-January
      -Tuesday-February
      Two
      -Wednesday-March 
```

这是 Dimitre Novatchev 针对包含字段 f1 和 f2 的输入数据集为 XSLT 1.0 提出的解决方案。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:key name="kDatumByF1" match="datum" use="f1"/>

 <xsl:template match=
   "datum[generate-id() = generate-id(key('kDatumByF1', f1)[1])]">
   <xsl:value-of select="concat('&#xA;', f1)"/>
   <xsl:apply-templates select="key('kDatumByF1', f1)/f2" mode="inGroup"/>
 </xsl:template>

 <xsl:template match="f2" mode="inGroup">
   - <xsl:value-of select="."/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

它工作得很好，但我不确定要扩展以在输出中包含字段“f3”的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:33:28.037

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:key name="kDatumByF1" match="datum" use="f1"/>

 <xsl:template match=
   "datum[generate-id() = generate-id(key('kDatumByF1', f1)[1])]">
   <xsl:value-of select="concat('&#xA;', f1)"/>
   <xsl:apply-templates select="key('kDatumByF1', f1)/*[self::f2 | self::f3]" mode="inGroup"/>
 </xsl:template>

 <xsl:template match="f2" mode="inGroup">
   - <xsl:value-of select="."/>
 </xsl:template>

 <xsl:template match="f3" mode="inGroup">
  <xsl:value-of select="concat('-',.)"/>
 </xsl:template>

 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:44:06.680

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output method="text"/>
     <xsl:strip-space elements="*"/>
     <xsl:key name="kDatumByF1" match="datum" use="f1"/>

     <xsl:template match=
       "datum[generate-id() = generate-id(key('kDatumByF1', f1)[1])]">
       <xsl:value-of select="concat(f1, '&#xA;')"/>
       <xsl:apply-templates mode="inGroup"
           select="key('kDatumByF1', f1)/*[self::f2 or self::f3]" />
     </xsl:template>

     <xsl:template match="f2|f3" mode="inGroup">
       <xsl:value-of select="concat('- ',., ' ')"/>
       <xsl:if test="not(following-sibling::*[self::f2 or self::f3])">
        <xsl:text>&#xA;</xsl:text>
       </xsl:if>
     </xsl:template>
     <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<doc>
    <datum>
        <f1>One</f1>
        <f2>Monday</f2>
        <f3>January</f3>
    </datum>
    <datum>
        <f1>One</f1>
        <f2>Tuesday</f2>
        <f3>February</f3>
    </datum>
    <datum>
        <f1>Two</f1>
        <f2>Wednesday</f2>
        <f3>March</f3>
    </datum>
</doc> 
```

**产生想要的正确结果**：

```
One
- Monday - January 
- Tuesday - February 
Two
- Wednesday - March 
```

**说明**：

正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

**请注意**：

即使可以按任何顺序出现，`f2`该解决方案也会产生想要的结果。`f3`

# c++ - 将一维转换为二维？

> ID：11963391
> 
> 赞同：2
> 
> 时间：2012-08-15T02:33:58.257
> 
> 标签：c++, arrays, c++11

这似乎是一个愚蠢的问题，但它真的困扰着我。

基本上，我有一个需要转换为二维数组的一维数组。基本上，数组的大小是：62017 现在从这个，我需要得到这个的行和列。但是，动态地执行此操作，例如，它会采用 43101 的数量，然后建立行+列，然后相应地重新调整向量的大小。

我希望我已经解释得足够多，希望有人能提供帮助，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:31:58.210

我相信你正在寻找这样的东西。尽管在访问适当的编译器时遇到了一些挑战，但我无法验证...

```
#include <iostream>
#include <array>
#include <inttypes.h>
#include <math.h>

void calc_new_sizes(const size_t old_size, size_t& new_size1, size_t& new_size2)
{
    new_size1 = 1;
    new_size2 = 1;
    size_t stop_at = (size_t)sqrt(old_size) + 1;
    for (size_t i = 1; i<stop_at; i++)
    {
        if ( old_size % i == 0 )
        {
            new_size1 = i;
            new_size2 = old_size / i;
        }
    }
}

template <class T, size_t new_size_1, size_t new_size_2, size_t old_size>
std::array<new_size_1, std::array<T, new_size_2>> twoDimensionify(std::array<T, old_size> p_input)
{
    std::array<new_size_1, std::array<T, new_size_2>> returnValue;
    int old_i = 0;
    for (int i=0; i<new_size_1; i++)
    {
        for (int j=0; j<new_size_2; j++)
        {
            returnValue[i][j] = p_input[old_i];
            old_i++;
        }
    }

    return returnValue;
}

int main()
{
    size_t old_size=20, new_size1=0, new_size2=0;
    calc_new_sizes(old_size, new_size1, new_size2);
    std::cout << "From " << old_size << " to " << new_size1 << "x" << new_size2 << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:54:36.873

这里是老式数组样式（因为我目前无法访问 C++0x 编译器）

```
#include <iostream>
//#include <array>
#include <inttypes.h>
#include <math.h>

void calc_new_sizes(const size_t old_size, size_t& new_size1, size_t& new_size2)
{
    new_size1 = 1;
    new_size2 = 1;
    size_t stop_at = (size_t)sqrt(old_size) + 1;
    for (size_t i = 1; i<stop_at; i++)
    {
        if ( old_size % i == 0 )
        {
            new_size1 = i;
            new_size2 = old_size / i;
        }
    }
}

template <class T>
T** twoDimensionify(T* p_old_array, const size_t old_size)
{
    size_t new_size1=1, new_size2=1, old_i=0;
    calc_new_sizes(old_size, new_size1, new_size2);
    T** returnValue = new T*[new_size1];
    for (size_t i=0; i<new_size1; i++)
    {
        returnValue[i] = new T[new_size2];
        for (size_t j=0; j<new_size2; j++)
        {
            returnValue[i][j] = p_old_array[old_i];
            old_i++;
        }
    }
    return returnValue;
}

int main()
{
    size_t old_size=20, new_size1=0, new_size2=0;
    calc_new_sizes(old_size, new_size1, new_size2);
    std::cout << "From " << old_size << " to " << new_size1 << "x" << new_size2 << std::endl;

    int old_array[20] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19};
    int **new_array = twoDimensionify<int>(old_array, 20);
    for (size_t i=0; i<new_size1; i++)
    {
        for (size_t j=0; j<new_size2; j++)
        {
            std::cout << "new array[" << i << "," << j << "] = " << new_array[i][j] << std::endl;
        }
    }

    // Clean up my memory.  This is C++ afterall.
    for (size_t i=0; i<new_size1; i++)
    {
       delete [](new_array[i]);
    }
    delete []new_array;
    return 0;
} 
```

# php - 在 PowerPC Mac 上安装用于 PHP 的 MongoDB 驱动程序到 XAMPP

> ID：11963394
> 
> 赞同：7
> 
> 时间：2012-08-15T02:34:11.060
> 
> 标签：php, mongodb

我知道您无法在 PowerPC Mac 上安装 MongoDB 服务器，但我找不到任何关于将 PHP 驱动程序安装到 XAMPP 的说明。

有谁知道这是否可能。如果是这样，你怎么做？我已经进行了广泛的搜索，但找不到答案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T14:53:21.540

I dusted off a G4 Powerbook with OS X 10.5.8 to test. Turns out that the current [precompiled version](https://github.com/mongodb/mongo-php-driver/downloads) of mongo.so for PHP 5.3 on github doesn't support PowerPC (the PHP 5.2 build appears to).

I downloaded the [PHP 5.3.1 source](http://php.net/releases/index.php) to match XAMPP 1.7.3 and compiled my own mongo.so (1.2.12).

I did some minimal testing with XAMPP 1.7.3 on PowerPC to confirm this appears to work. Essentially, I just pasted the example from the [MongoDB PHP Driver Tutorial](http://php.net/manual/en/mongo.tutorial.php), and inserted some documents into MongoDB 2.0.6 running on another computer.

Note this is an *unofficial & unsupported* mongo.so build, the same as what you should get building successfully from source with `pecl install mongo`. As a bonus, this is a much newer driver version than the precompiled OS X ones currently on github.

As a warning: I'm not sure about limitations or quirks of using this on PowerPC. Most of the OS X world has moved on to Intel architecture now.

So, instructions to use:

1.  Download and install [XAMPP Mac OS X 1.7.3 universal binary](http://www.apachefriends.org/en/xampp-macosx.html#849).

2.  Download `mongo-ppc-1.2.12.so` from my github: [mongodb-php-driver/downloads](https://github.com/stennie/mongo-php-driver/downloads)

3.  Rename that to `mongo.so` and copy into `/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/`

4.  Edit XAMPP/etc/php.ini and add a last line with:

    ```
    extension=mongo.so 
    ```

5.  Check via phpinfo() that the `mongo` extension is available. Make sure you stop/start Apache if it was already running when you added the extension.

# svn - 尝试添加新文件时，SVN“找不到路径”

> ID：11963397
> 
> 赞同：1
> 
> 时间：2012-08-15T02:34:26.400
> 
> 标签：svn, version-control, tortoisesvn

我在尝试将文件添加到 SVN 存储库时遇到问题，但无法找出问题所在。

我在 Visual Studio 中使用 VisualSVN 创建了我的主干文件夹和所有项目文件，所有内容都已签入并且工作副本都是最新的。

在另一台计算机上，我有一个名为 OnBoardFlash.dat 的文件，它是 .NET MicroFramework 模拟器的闪存驱动器的映像。我想将此文件添加到我的存储库中。所以我把它复制到项目文件夹中，右键单击，SVN Add，然后右键单击，SVN Commit。该文件被传输到服务器，全部为 72Mb，然后最后我收到以下错误消息：

```
犯罪
C:\Users\Tim Long\Desktop\Tigra.Project\Tigra.Project\OnBoardFlash.dat
C:\Users\Tim Long\Desktop\Tigra.Project\Tigra.Project\OnBoardFlash.dat
C:\Users\Tim Long\Desktop\Tigra.Project\Tigra.Project\OnBoardFlash.dat
提交失败（详情如下）：
文件 'C:\Users\Tim Long\Desktop\Tigra.Project\Tigra.Project\OnBoardFlash.dat'
 已过期
'/svn/TiGra/!svn/txr/1166-yp/Tigra.Project/trunk/Tigra.Project/OnBoardFlash.dat'
 找不到路径
您必须先更新您的工作副本。
```

诶？我不明白错误信息。不用说，我已经尝试更新工作副本并运行清理命令 - 但它是一个全新的结帐，所以它应该是干净的。路径不存在是毫无疑问的，因为文件夹中还有其他文件（WC 和 Repo）。它存在。另外，“过时”是什么意思？这是一个新添加的文件。我敢肯定有一个简单的答案，但目前，它逃脱了我。我希望你们都能对此有所了解。

作为健全性检查，我尝试直接从 Repo 浏览器添加文件，完全绕过工作副本。我收到一条不那么冗长但类似的错误消息“找不到路径”。帮助！

# java - 将 Parse Java SDK 转换为 JRuby

> ID：11963400
> 
> 赞同：3
> 
> 时间：2012-08-15T02:35:19.650
> 
> 标签：java, jruby, parse-platform

我想看看这段[Java 代码](https://parse.com/docs/android/api/?com/parse/GetCallback.html)在 JRuby 中的样子：

```
 ParseQuery query = new ParseQuery("MyClass");
 query.getInBackground(myId, new GetCallback() {
   public void done(ParseObject object, ParseException e) {
     if (e == null) {
       objectWasRetrievedSuccessfully(object);
     } else {
       objectRetrievalFailed();
     }
   }
 }); 
```

对我来说最大的困惑是匿名内部类。这是我最好的第一个猜测：

```
query = ParseQuery.new("GameScore")
query.getInBackground("xWMyZ4YEGZ", Class.new(GetCallback) do
  def done(object, e)
    #  ...
  end 
end.new) 
```

更新：基于此编辑：[http ://www.ruby-forum.com/topic/188599#823271](http://www.ruby-forum.com/topic/188599#823271)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:50:20.007

在 JRuby 中表达这一点的语法看似简单。JRuby 有一个称为“闭包转换”的功能，其中传递给方法的闭包可以转换为适当的 Java 接口。来自[JRuby 文档](https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby)：

> 这不仅适用于事件侦听器或 Runnable，而且基本上适用于任何接口。当调用一个需要接口的方法时，JRuby 会检查是否传递了一个块，并自动将该块转换为实现该接口的对象。

因此，您的代码如下所示：

```
query.in_background 'xWMyZ4YEGZ' { |object, e|
  # do stuff
} 
```

JRuby wiki 上的[“从 JRuby 调用 Java”](https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby)页面是解决此类问题的好资源。

# .htaccess - .htaccess 替换部分 URL

> ID：11963402
> 
> 赞同：1
> 
> 时间：2012-08-15T02:35:32.407
> 
> 标签：.htaccess, redirect

这里的任何人都知道如何在.htaccess 上执行此操作？我需要替换“[]”内的 URL 部分。

这是 URL：**[http://example.com/site/second/files/]** 2012/08/Image.jpg
新 URL：**[http://example-two.com/media1/]** 2012/08 /图像.jpg

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T02:48:12.343

```
RewriteRule ^site/second/files/(.*)$ http://example-two.com/media1/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:00:23.893

你也可以使用 mod_alias：

```
Redirect 301 /site/second/files http://example-two.com/media1/ 
```

# iphone - 在 ViewController 中设置自定义 UITableViewCell 的 UILabel.text

> ID：11963404
> 
> 赞同：0
> 
> 时间：2012-08-15T02:35:39.387
> 
> 标签：iphone, ios, uitableview

我有一个`UITableView`我`UITableViewCell`在界面生成器中使用自定义填充的。我在访问这些自定义 tableviewcells 属性时遇到了一些问题，希望能得到一些帮助。

在 Interface Builder 中，我将自定义 tableviewcell 设置`class`为当前 View 控制器（因此我可以将所有标签对象分配给 Interface Builder 中的正确标签），所以我还在 Interface Builder 中将`IBOutlet`标签设置为正确的标签但是这个当我尝试将 NSString 从数组对象变量（类型为 NSString）传递到 UIlabel 的文本时发生错误。

```
Property 'cellDescription' not found on object of type 'UITableViewCell *' 
```

下面是我用来使用自定义 tableviewcell 设置我的 tableview 的代码，然后尝试用正确的文本填充单元格 UILabels..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (indexPath.section == 0) {      
        // Set cell height
        [self tableView:tableView heightForRowAtIndexPath:indexPath];

        // Configure the cell using custom cell
        [[NSBundle mainBundle] loadNibNamed:@"AutomotiveSearchCell" owner:self options:nil];

        cell = autoSearchCell;

        //call dataArrayOfObject that has all of the values you have to apply to the custom tableviewcell
        SearchResultItem* myObj = (SearchResultItem*)[dataArrayOfObjects objectAtIndex:indexPath.row];

        cell.cellDescription.text = myObj.seriesDescription; // This is where I am receiving the error

        NSLog(@"%@", myObj.seriesDescription); // This logs the correct value

        //Disclosure Indicator
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:41:57.030

你必须键入Casting `UITableViewCell`To`AutomotiveSearchCell`

我认为您在某处的代码很奇怪（autoSearchCell 没有声明），但是您必须执行以下操作。

```
cell = (AutomotiveSerachCell* )autoSearchCell; 
```

上面的代码不起作用，应该遵循代码。

* * *

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

转换成

```
AutomotiveSearchCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

如果上述方法不起作用，请参考以下过程。

1.  制作一个 CustomCell 类。 ![在此处输入图像描述](../Images/b4833cd85a6499a053e01476ca83fb37.png)

2.  制作一个 CustomCell xib。 ![在此处输入图像描述](../Images/69473b04526a77c7f89c0e510fc91ae9.png) ![在此处输入图像描述](../Images/5089ac713f39f1db35d3426b49bf073a.png) ![在此处输入图像描述](../Images/e6def1635462ce2bfed31b4cb8ceacae.png)

3.  链接到 CustomCell 类的标签。 ![在此处输入图像描述](../Images/729155f586a6a85ffa5310e5dfedc1b5.png)

4.  导入标头`#import "AutomotiveSearchCell.h"`和以下代码复制和粘贴。

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    AutomotiveSearchCell *cell = nil;

    if(!cell)
    {
        UINib *nib = [UINib nibWithNibName:@"AutomotiveSearchCell" bundle:nil];
        NSArray *arr = [nib instantiateWithOwner:nil options:nil];
        cell = [arr objectAtIndex:0];
        cell.cellDescription.text = @"Test~!~!~!";
    }

    // Configure the cell...

    return cell;
} 
```

![在此处输入图像描述](../Images/b89e73ea5733763b8f326abcc4f125bb.png)

# c++ - 在使用带有 boost 线程的 makefile 时遇到问题

> ID：11963409
> 
> 赞同：0
> 
> 时间：2012-08-15T02:36:00.583
> 
> 标签：c++, multithreading, boost, xcode4.2

谁能告诉我我做错了什么？这是我的代码 main.cpp

```
#include <iostream>
#include <boost/thread.hpp>

using namespace boost;
using namespace boost::this_thread;
using namespace std;
// Global function called by thread
void GlobalFunction()
{
    for (int i=0;i<10;++i)
    {
        cout << i << "Do something in parallel with main method." << endl;
        boost::this_thread::yield();
    }
}
void GlobalThreadTest()
{
    boost::thread t(&GlobalFunction);
    for (int i = 0; i<10; ++i) {
        cout << i << "Do something in main method. " << endl;
    }
}

int main(int argc, const char * argv[])
{
    GlobalThreadTest();
    return 0;
} 
```

制作文件代码

```
BOOST_ROOT=/opt/local
PRODUCT_NAME=example
BOOST_INCLUDE_DIR=$(BOOST_ROOT)/include
BOOST_LIB_DIR=/usr/local/lib
BOOST_LINK_FLAGS=lboost_thread-mt
main: main.cpp
    gcc main.cpp -I$(BOOST_INCLUDE_DIR) -L$(BOOST_LIB_DIR) -o $(PRODUCT_NAME)
clean:
    rm -f main 
```

我的 boost 安装是通过 MacPorts 完成的，并存储在 /opt/local/include

库文件夹 /usr/local/lib 我相信是这种情况

这是我看到的错误

```
$ make -f makefile
gcc main.cpp -I/opt/local/include -L/usr/local/lib -o example
Undefined symbols for architecture x86_64:
  "boost::this_thread::yield()", referenced from:
      GlobalFunction()     in ccPsXnoZ.o
  "boost::detail::thread_data_base::~thread_data_base()", referenced from:
      boost::detail::thread_data<void (*)()>::~thread_data()in ccPsXnoZ.o
      boost::detail::thread_data<void (*)()>::~thread_data()in ccPsXnoZ.o
  "boost::system::system_category()", referenced from:
      __static_initialization_and_destruction_0(int, int)in ccPsXnoZ.o
      boost::thread_exception::thread_exception(int, char const*)in ccPsXnoZ.o
  "boost::system::generic_category()", referenced from:
      __static_initialization_and_destruction_0(int, int)in ccPsXnoZ.o
  "boost::thread::start_thread()", referenced from:
      boost::thread::thread<void (*)()>(void (*)(), boost::disable_if<boost::is_convertible<void (*&)(), boost::detail::thread_move_t<void (*)()> >, boost::thread::dummy*>::type)in ccPsXnoZ.o
  "boost::thread::detach()", referenced from:
      boost::thread::~thread()in ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::c_str() const", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::empty() const", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
  "std::bad_exception::what() const", referenced from:
      vtable for boost::exception_detail::bad_exception_in ccPsXnoZ.o
      vtable for boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>in ccPsXnoZ.o
  "std::runtime_error::what() const", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
  "std::bad_alloc::what() const", referenced from:
      vtable for boost::exception_detail::bad_alloc_in ccPsXnoZ.o
      vtable for boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>in ccPsXnoZ.o
  "std::allocator<char>::allocator()", referenced from:
      boost::system::system_error::system_error(boost::system::error_code, char const*)in ccPsXnoZ.o
  "std::allocator<char>::~allocator()", referenced from:
      boost::system::system_error::system_error(boost::system::error_code, char const*)in ccPsXnoZ.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))", referenced from:
      GlobalThreadTest()     in ccPsXnoZ.o
      GlobalFunction()     in ccPsXnoZ.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(int)", referenced from:
      GlobalThreadTest()     in ccPsXnoZ.o
      GlobalFunction()     in ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&)", referenced from:
      boost::system::system_error::system_error(boost::system::error_code, char const*)in ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      std::runtime_error::runtime_error(std::runtime_error const&)in ccPsXnoZ.o
      boost::system::system_error::system_error(boost::system::system_error const&)in ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string()", referenced from:
      boost::system::system_error::system_error(boost::system::error_code, char const*)in ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
      boost::system::system_error::~system_error()in ccPsXnoZ.o
      boost::system::system_error::~system_error()in ccPsXnoZ.o
      boost::system::system_error::~system_error()in ccPsXnoZ.o
      boost::system::system_error::system_error(boost::system::error_code, char const*)in ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator=(char const*)", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*)", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
  "std::bad_exception::~bad_exception()", referenced from:
      boost::exception_detail::bad_exception_::~bad_exception_()in ccPsXnoZ.o
      boost::exception_detail::bad_exception_::~bad_exception_()in ccPsXnoZ.o
      boost::exception_detail::bad_exception_::~bad_exception_()in ccPsXnoZ.o
  "std::runtime_error::runtime_error(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      boost::system::system_error::system_error(boost::system::error_code, char const*)in ccPsXnoZ.o
  "std::runtime_error::~runtime_error()", referenced from:
      boost::system::system_error::~system_error()in ccPsXnoZ.o
      boost::system::system_error::~system_error()in ccPsXnoZ.o
      boost::system::system_error::~system_error()in ccPsXnoZ.o
      boost::system::system_error::system_error(boost::system::error_code, char const*)in ccPsXnoZ.o
      typeinfo for boost::thread_exceptionin ccPsXnoZ.o
      typeinfo for boost::thread_resource_errorin ccPsXnoZ.o
      ...
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "vtable for __cxxabiv1::__vmi_class_type_info", referenced from:
      typeinfo for boost::exception_detail::bad_alloc_in ccPsXnoZ.o
      typeinfo for boost::exception_detail::bad_exception_in ccPsXnoZ.o
      typeinfo for boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>in ccPsXnoZ.o
      typeinfo for boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>in ccPsXnoZ.o
      typeinfo for boost::exception_detail::error_info_injector<boost::thread_resource_error>in ccPsXnoZ.o
      typeinfo for boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::thread_resource_error> >in ccPsXnoZ.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "vtable for boost::detail::thread_data_base", referenced from:
      boost::detail::thread_data_base::thread_data_base()in ccPsXnoZ.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "vtable for std::bad_exception", referenced from:
      std::bad_exception::bad_exception()in ccPsXnoZ.o
      std::bad_exception::bad_exception(std::bad_exception const&)in ccPsXnoZ.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "vtable for std::runtime_error", referenced from:
      std::runtime_error::runtime_error(std::runtime_error const&)in ccPsXnoZ.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "vtable for std::bad_alloc", referenced from:
      std::bad_alloc::bad_alloc()in ccPsXnoZ.o
      std::bad_alloc::bad_alloc(std::bad_alloc const&)in ccPsXnoZ.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "vtable for std::exception", referenced from:
      std::exception::exception()in ccPsXnoZ.o
      std::exception::exception(std::exception const&)in ccPsXnoZ.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "operator delete(void*)", referenced from:
      boost::detail::sp_counted_base::~sp_counted_base()in ccPsXnoZ.o
      boost::detail::sp_counted_base::~sp_counted_base()in ccPsXnoZ.o
      boost::exception_detail::clone_base::~clone_base()in ccPsXnoZ.o
      boost::exception_detail::clone_base::~clone_base()in ccPsXnoZ.o
      boost::exception_detail::bad_alloc_::~bad_alloc_()in ccPsXnoZ.o
      boost::exception_detail::bad_alloc_::~bad_alloc_()in ccPsXnoZ.o
      boost::exception_detail::bad_exception_::~bad_exception_()in ccPsXnoZ.o
      ...
  "operator new(unsigned long)", referenced from:
      boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>::clone() constin ccPsXnoZ.o
      boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>::clone() constin ccPsXnoZ.o
      boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::thread_resource_error> >::clone() constin ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>*)in ccPsXnoZ.o
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_alloc_>()in ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>*)in ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::detail::thread_data<void (*)()> >(boost::detail::thread_data<void (*)()>*)in ccPsXnoZ.o
      ...
  "___cxa_allocate_exception", referenced from:
      boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>::rethrow() constin ccPsXnoZ.o
      boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>::rethrow() constin ccPsXnoZ.o
      boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::thread_resource_error> >::rethrow() constin ccPsXnoZ.o
      void boost::throw_exception<boost::thread_resource_error>(boost::thread_resource_error const&)in ccPsXnoZ.o
  "___cxa_begin_catch", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>*)in ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>*)in ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::detail::thread_data<void (*)()> >(boost::detail::thread_data<void (*)()>*)in ccPsXnoZ.o
  "___cxa_call_unexpected", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
      boost::exception::~exception()in ccPsXnoZ.o
      boost::system::system_error::~system_error()in ccPsXnoZ.o
      boost::system::system_error::~system_error()in ccPsXnoZ.o
      boost::system::system_error::~system_error()in ccPsXnoZ.o
  "___cxa_end_catch", referenced from:
      boost::system::system_error::what() constin ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>*)in ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>*)in ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::detail::thread_data<void (*)()> >(boost::detail::thread_data<void (*)()>*)in ccPsXnoZ.o
  "___cxa_free_exception", referenced from:
      void boost::throw_exception<boost::thread_resource_error>(boost::thread_resource_error const&)in ccPsXnoZ.o
  "___cxa_guard_abort", referenced from:
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_alloc_>()in ccPsXnoZ.o
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_exception_>()in ccPsXnoZ.o
  "___cxa_guard_acquire", referenced from:
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_alloc_>()in ccPsXnoZ.o
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_exception_>()in ccPsXnoZ.o
  "___cxa_guard_release", referenced from:
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_alloc_>()in ccPsXnoZ.o
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_exception_>()in ccPsXnoZ.o
  "___cxa_pure_virtual", referenced from:
      vtable for boost::detail::sp_counted_basein ccPsXnoZ.o
      vtable for boost::exceptionin ccPsXnoZ.o
      vtable for boost::exception_detail::clone_basein ccPsXnoZ.o
      vtable for boost::system::error_categoryin ccPsXnoZ.o
  "___cxa_rethrow", referenced from:
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>*)in ccPsXnoZ.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>*)in cck3nfxq.o
      boost::detail::shared_count::shared_count<boost::detail::thread_data<void (*)()> >(boost::detail::thread_data<void (*)()>*)in cck3nfxq.o
  "___cxa_call_unexpected", referenced from:
      boost::system::system_error::what() constin cck3nfxq.o
      boost::exception::~exception()in cck3nfxq.o
      boost::system::system_error::~system_error()in cck3nfxq.o
      boost::system::system_error::~system_error()in cck3nfxq.o
      boost::system::system_error::~system_error()in cck3nfxq.o
  "___cxa_end_catch", referenced from:
      boost::system::system_error::what() constin cck3nfxq.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>*)in cck3nfxq.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>*)in cck3nfxq.o
      boost::detail::shared_count::shared_count<boost::detail::thread_data<void (*)()> >(boost::detail::thread_data<void (*)()>*)in cck3nfxq.o
  "___cxa_free_exception", referenced from:
      void boost::throw_exception<boost::thread_resource_error>(boost::thread_resource_error const&)in cck3nfxq.o
  "___cxa_guard_abort", referenced from:
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_alloc_>()in cck3nfxq.o
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_exception_>()in cck3nfxq.o
  "___cxa_guard_acquire", referenced from:
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_alloc_>()in cck3nfxq.o
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_exception_>()in cck3nfxq.o
  "___cxa_guard_release", referenced from:
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_alloc_>()in cck3nfxq.o
      boost::exception_ptr boost::exception_detail::get_static_exception_object<boost::exception_detail::bad_exception_>()in cck3nfxq.o
  "___cxa_pure_virtual", referenced from:
      vtable for boost::detail::sp_counted_basein cck3nfxq.o
      vtable for boost::exceptionin cck3nfxq.o
      vtable for boost::exception_detail::clone_basein cck3nfxq.o
      vtable for boost::system::error_categoryin cck3nfxq.o
  "___cxa_rethrow", referenced from:
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>*)in cck3nfxq.o
      boost::detail::shared_count::shared_count<boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_> >(boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>*)in cck3nfxq.o
      boost::detail::shared_count::shared_count<boost::detail::thread_data<void (*)()> >(boost::detail::thread_data<void (*)()>*)in cck3nfxq.o
  "___cxa_throw", referenced from:
      boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>::rethrow() constin cck3nfxq.o
      boost::exception_detail::clone_impl<boost::exception_detail::bad_exception_>::rethrow() constin cck3nfxq.o
      boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::thread_resource_error> >::rethrow() constin cck3nfxq.o
      void boost::throw_exception<boost::thread_resource_error>(boost::thread_resource_error const&)in cck3nfxq.o
  "___gxx_personality_v0", referenced from:
      Dwarf Exception Unwind Info (__eh_frame) in cck3nfxq.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

我也不能让它与 XCode 一起工作。我一直看到编译错误。如果有人对如何使用 xcode 4 让 boost 线程程序工作有任何想法，请分享。

更新*我添加了链接器

```
BOOST_ROOT=/opt/local
PRODUCT_NAME=example
BOOST_INCLUDE_DIR=$(BOOST_ROOT)/include
BOOST_LIB_DIR=/usr/local/lib
BOOST_LINK_FLAGS=lboost_thread-mt
main: main.cpp
    g++ main.cpp -I$(BOOST_INCLUDE_DIR) -$(BOOST_LINK_FLAGS) -L$(BOOST_LIB_DIR) -o $(PRODUCT_NAME)
clean:
    rm -f main 
```

错误：

```
make -f makefile
g++ main.cpp -I/opt/local/include -lboost_thread-mt -L/usr/local/lib -o example
ld: library not found for -lboost_thread-mt
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:43:41.023

你有两个错误。

首先是您尝试使用`gcc`. 虽然它可以工作，但它并没有添加 C++ 文件所需的所有库和其他东西。你应该`g++`改用。

第二个在`Makefile`中线

```
BOOST_LINK_FLAGS=lboost_thread-mt 
```

对我来说，这看起来不像是一个合适的图书馆标志。此外，链接时您甚至在命令行中都没有它，这意味着您没有与库链接。

# xml - 冷融合xml解析

> ID：11963410
> 
> 赞同：0
> 
> 时间：2012-08-15T02:36:03.903
> 
> 标签：xml, coldfusion

给定以下 XML：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
   <s:Header>
      <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <u:Timestamp u:Id="_0">
            <u:Created>2012-08-15T02:11:45.336Z</u:Created>
            <u:Expires>2012-08-15T02:16:45.336Z</u:Expires>
         </u:Timestamp>
      </o:Security>
   </s:Header>
   <s:Body>
      <GetDetailsResponse xmlns="http://tg.gov.au/services/">
         <GetDetailsResult i:type="Rto" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <Codes>
               <OrganisationCode>
                  <StartDate>2003-10-28</StartDate>
                  <Code>0022</Code>
               </OrganisationCode>
            </Codes>
            <Contacts>
               <Contact>
                  <EndDate>2011-10-21</EndDate>
                  <StartDate>2003-10-27</StartDate>
                  <Email>email@address.com</Email>
                  <Fax>08555555</Fax>
                  <FirstName>Steve</FirstName>
                  <JobTitle>Chief Executive Officer</JobTitle>
                  <LastName>Austin</LastName>
                  <OrganisationName>ATEX</OrganisationName>
                  <Phone>13333333</Phone>
                  <PostalAddress>
                     <CountryCode>1101</CountryCode>
                     <Line1>PO Box 555</Line1>
                     <Postcode>5515</Postcode>
                     <StateCode>04</StateCode>
                     <Suburb>PT ADELAIDE</Suburb>
                  </PostalAddress>
                  <RoleCode>1</RoleCode>
                  <Title>Ms</Title>
                  <TypeCode>0</TypeCode>
               </Contact>
            </Contacts>
            <CreatedDate xmlns:a="http://schemas.datacontract.org/2004/07/System">
               <a:DateTime>2011-06-09T19:05:11.5427569Z</a:DateTime>
               <a:OffsetMinutes>600</a:OffsetMinutes>
            </CreatedDate>
            <DataManagers>
               <DataManagerAssignment>
                  <StartDate>2003-10-28</StartDate>
                  <Code>03</Code>
               </DataManagerAssignment>
            </DataManagers>
            <Locations>
               <OrganisationLocation>
                  <StartDate>2003-10-27</StartDate>
                  <Address>
                     <CountryCode>1101</CountryCode>
                     <Line1>12 Aden Street</Line1>
                     <Postcode>4444</Postcode>
                     <StateCode>04</StateCode>
                     <Suburb>PT ADELAIDE</Suburb>
                  </Address>
               </OrganisationLocation>
            </Locations>
            <ResponsibleLegalPersons>
               <ResponsibleLegalPerson>
                  <StartDate>2003-10-27</StartDate>
                  <Abns xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
                     <a:string>58209574933</a:string>
                  </Abns>
                  <Name>ATEX INC</Name>
               </ResponsibleLegalPerson>
            </ResponsibleLegalPersons>
            <TradingNames>
               <TradingName>
                  <StartDate>2011-09-23</StartDate>
                  <Name>ATEX</Name>
               </TradingName>
            </TradingNames>
            <UpdatedDate xmlns:a="http://schemas.datacontract.org/2004/07/System">
               <a:DateTime>2012-08-02T02:42:29.1278397Z</a:DateTime>
               <a:OffsetMinutes>600</a:OffsetMinutes>
            </UpdatedDate>
            <Urls>
               <Url>
                  <StartDate>2011-09-23</StartDate>
                  <Link>http://www.atex.au</Link>
               </Url>
            </Urls>
            <Scopes>
               <Scope>
                  <EndDate>2013-10-27</EndDate>
                  <StartDate>2008-10-27</StartDate>
                  <ExtentCode>01</ExtentCode>
                  <IsImplicit>true</IsImplicit>
                  <IsRefused>false</IsRefused>
                  <NrtCode>XXWWRR43</NrtCode>
                  <TrainingComponentType>Unit</TrainingComponentType>
               </Scope>
                ...
            </Scopes>
        </GetDetailsResult>
      </GetDetailsResponse>
   </s:Body>
</s:Envelope> 
```

我用以下方式解析上述内容：

```
<cfset var stResponse = xmlParse(sResponse)> 
```

我将如何访问`<Scopes>`节点，

例如：

```
<cfset var res = XMLSearch(stResponse, '//s:Envelope/s:Body/.../Scopes/')> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:08:50.773

我承认我对 ColdFusion 不是很精通，所以这可能不是处理 xml 的最佳方式，但它确实有效。

```
<cfset stResponse = xmlParse(sResponse)>
<cfset res = stResponse['s:Envelope']['s:Body'].GetDetailsResponse.GetDetailsResult.Scopes>
<cfloop from="1" to="#arraylen(res)#" index="i">
    <cfset row = xmlparse(res[i])>
    <strong>Start Date: #row.Scopes.Scope.StartDate.xmltext#</strong>
</cfloop> 
```

将 EndDate 替换为 StartDate、ExtentCode 等以提取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T03:16:31.297

尝试这个：

```
//s:Envelope/s:Body/*:GetDetailsResponse/*:GetDetailsResult/*:Scopes/*:Scope/ 
```

另请阅读@JasonDean 发布的链接，它解释了命名空间的问题。

# python - 在python中下载html？

> ID：11963411
> 
> 赞同：5
> 
> 时间：2012-08-15T02:36:05.803
> 
> 标签：python, html

当您单击浏览器中的链接时，我正在尝试下载通过 javascript 操作请求的页面的 html。我可以下载第一页，因为它有一个通用 URL：

```
http://www.locationary.com/stats/hotzone.jsp?hz=1 
```

但是页面底部的链接是数字（1 到 10）。因此，如果您单击一个，它将转到例如第 2 页：

```
http://www.locationary.com/stats/hotzone.jsp?ACTION_TOKEN=hotzone_jsp$JspView$NumericAction&inPageNumber=2 
```

当我将该 URL 放入我的程序并尝试下载 html 时，它给了我网站上不同页面的 html，我认为它是主页。

当没有特定的 URL 时，如何获取这个使用 javascript 的 URL 的 html？

谢谢。

代码：

```
import urllib
import urllib2
import cookielib
import re

URL = ''

def load(url):

    data = urllib.urlencode({"inUserName":"email", "inUserPass":"password"})
    jar = cookielib.FileCookieJar("cookies")
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(jar))
    opener.addheaders.append(('User-agent', 'Mozilla/5.0 (Windows NT 6.1; rv:13.0) Gecko/20100101 Firefox/13.0.1'))
    opener.addheaders.append(('Referer', 'http://www.locationary.com/'))
    opener.addheaders.append(('Cookie','site_version=REGULAR'))
    request = urllib2.Request("https://www.locationary.com/index.jsp?ACTION_TOKEN=tile_loginBar_jsp$JspView$LoginAction", data)
    response = opener.open(request)
    page = opener.open("https://www.locationary.com/index.jsp?ACTION_TOKEN=tile_loginBar_jsp$JspView$LoginAction").read()

    h = response.info().headers
    jsid = re.findall(r'Set-Cookie: (.*);', str(h[5]))
    data = urllib.urlencode({"inUserName":"email", "inUserPass":"password"})
    jar = cookielib.FileCookieJar("cookies")
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(jar))
    opener.addheaders.append(('User-agent', 'Mozilla/5.0 (Windows NT 6.1; rv:13.0) Gecko/20100101 Firefox/13.0.1'))
    opener.addheaders.append(('Referer', 'http://www.locationary.com/'))
    opener.addheaders.append(('Cookie','site_version=REGULAR; ' + str(jsid[0])))
    request = urllib2.Request("https://www.locationary.com/index.jsp?ACTION_TOKEN=tile_loginBar_jsp$JspView$LoginAction", data)
    response = opener.open(request)
    page = opener.open(url).read()
    print page

load(URL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:16:15.627

selenium 工具套件中的[selenium webdriver](http://seleniumhq.org/docs/03_webdriver.html)使用标准浏览器来检索 HTML（它的主要目标是测试 Web 应用程序的自动化），因此它非常适合废弃富含 javascript 的应用程序。它有很好的 Python 绑定。

在所有 ajax 内容被触发后，我倾向于使用 selenium 来获取页面源，并使用 BeautifulSoup 之类的东西进行解析[（](http://www.crummy.com/software/BeautifulSoup/) BeautifulSoup 可以很好地处理格式错误的 HTML）。

# php - PHP 添加时间

> ID：11963415
> 
> 赞同：-1
> 
> 时间：2012-08-15T02:36:20.283
> 
> 标签：php, time, add

我有一个代码，我有 2 个 texboxes 和一个按钮，它根据输入添加这些文本框的时间值。

这是我的简单代码：

```
<?php 

echo "<form method=post><input type=text name=etd>";
echo "<input type=text name=btime>";
echo "<input type=submit name=sub value=submit></form>";
if(isset($_POST['sub']))
{

        $etime = $_POST['etd'];
        $btym = $_POST['btime'];
        $time = strtotime("$etime");
        $tym = strtotime("btym");
        $etym = strtotime("+$btym hours", $time);
        $eta = date('H:i:s', $etym);

echo "$eta";
}
?> 
```

但是，这有效，当我输入 12:00 和 00:30（意味着我想在 12:00 上增加 30 分钟）时，它输出 11:30，应该是 12:30。我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:40:49.467

这不应该：

```
$tym = strtotime("btym"); 
```

变成这样：

```
$tym = strtotime("$btym"); 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:46:42.053

这应该有效。虽然，如果你想使用 30 分钟，你的值`btime`应该是`0.5`，而不是`0:30`（因为你的`strtotime()`电话中的参考是小时）。

正如评论者所建议的那样，您的所有属性都应该用引号括起来。

```
<?php 

echo '<form method=post><input type="text" name="etd">';
echo '<input type="text" name="btime">';
echo '<input type="submit" name="sub" value="submit"></form>';
if(isset($_POST['sub']))
{
    $eta = date('H:i:s', strtotime( $_POST['etd'] . ' +' . $_POST['btime'] . ' hours' ) );
    echo "$eta";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:58:39.087

感谢您的所有回复！:))) 这是我的第一篇文章，我很高兴你们回答了！:))) 使用 mysql addtime() 和 timediff() 函数让它工作。它很容易工作，不用我把头撞在桌子上。无论如何感谢您的回复！从现在开始，我将在您的手中，因为我想我会发布很多问题。^_^

# jsp - 首次加载页面时字段应为空白

> ID：11963421
> 
> 赞同：2
> 
> 时间：2012-08-15T02:37:50.587
> 
> 标签：jsp

我正在创建一个 jsp 页面来测试验证器 servlet 以进行 uni 评估。

我是 jsp 的新手，所以我只想知道如何确保在第一页加载时该字段为空。

这个想法是，当表单被提交时，它被发送到一个 servlet，该 servlet 检查字段是否为空（它们具有用户输入的值），如果它们为空，则将它们重定向回带有错误消息的表单。

所以这是我的jsp字段的一个片段：

```
<td class="formlabel">Name:</td>
<td><input type="text" size="27" id="name" name="name" value="<%= session.getAttribute("name")%>" /></td>

<%
if((String)session.getAttribute("name") == "") {
%>
    <span class="error">No name entered</span>
<%
}
%> 
```

但目前我遇到的问题是会话属性是`null`. 所以`null`出现在输入字段中。我不想在第一次加载 jsp 时使用它，我只想让它为空白。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T02:43:06.373

使用 JSP EL：

```
<input type="text" name="name" value="${name}" /> 
```

当属性为空时，JSP EL 不会输出任何内容。

无论如何都应该避免使用 Scriptlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:43:59.010

`value="<%= session.getAttribute("name")%>` 您可以通过简单地将：拆分为几个语句来检查该值 ：

```
<%= String name = session.getAttribute("name");
    if(name == null) name = "";    
%>value="<%=name%> 
```

但总的来说，我建议不要验证许多字段，而是将另一个隐藏的输入参数添加到 id="submitted" 和 value="Y" 的表单中：

```
<input type="hidden id="submitted" name="submitted" value="Y"> 
```

然后添加一行检查此 POST/GET 参数：

```
String submitted = request.getParameter("submitted"); 
```

并将 if 条件更改为：

```
 <%if((String)session.getAttribute("name") == "" && "Y".equals(submitted)){%> 
```

**备注：**
字符串比较（在 Java 中）应该使用`equals()`- 而不是 with`==`

# c# - 通过linq读取xml文件

> ID：11963425
> 
> 赞同：1
> 
> 时间：2012-08-15T02:38:18.433
> 
> 标签：c#, linq, linq-to-xml

我有像下面这样的xml文件和`Device`类，我想`List<Device>`从我的xml文件中获取我如何通过linq做到这一点

```
 XDocument loaded = XDocument.Load(SharedData.CONFIGURATION_FULL_PATH);
            var q = loaded.Descendants("device").Select(c => c); 
```

但当然这段代码不起作用

```
<?xml version="1.0" encoding="utf-8"?>
<settings>
<device>
  <username>aa</username>
  <AgentName>aa</AgentName>
  <password>aa</password>
  <domain>aa</domain>
</device>
<device>
  <username>bb</username>
  <AgentName>bb</AgentName>
  <password>bb</password>
  <domain>bb</domain>
</device>
<device>
  <username>cc</username>
  <AgentName>cc</AgentName>
  <password>cc</password>
  <domain>cc</domain>
</device>

</settings> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T02:41:37.013

```
List<Device> devices = new List<Device>(loaded.Descendants("Device")
                                             .Select(e =>
                                               new Device(e.Element("username").Value,
                                                          e.Element("AgentName").Value,
                                                          e.Element("password").Value,
                                                          e.Element("domain").Value
                                                         ))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:09:36.690

你可以这样做：

```
var devices =
    loaded
        .Descendants("Device")
        .Select(e => new Device(
            e.Element("username").Value,
            e.Element("AgentName").Value,
            e.Element("password").Value,
            e.Element("domain").Value))
        .ToList(); 
```

# c# - 两个列表的区别C#

> ID：11963427
> 
> 赞同：1
> 
> 时间：2012-08-15T02:38:52.300
> 
> 标签：c#, list, set-difference

我有两个字符串列表，它们都是 ~300,000 行。清单 1 比清单 2 多几行。我要做的是找到清单 1 中但不在清单 2 中的字符串。

考虑到我必须比较多少个字符串，`Except()`足够好还是有更好（更快）的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T03:36:05.543

在内部，可枚举`Except`扩展方法用于`Set<T>`执行计算。它将与任何其他方法一样快。

一起去`list1.Except(list2)`。

它会给你最好的性能和最简单的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:26:51.020

我的建议：

```
 HashSet<String> hash1 = new HashSet<String>(new string[] { "a", "b", "c", "d" });
    HashSet<String> hash2 = new HashSet<String>(new string[] { "a", "b" });
    List<String> result = hash1.Except(hash2).ToList(); 
```

# java - 无法在 Android 上写入外部存储

> ID：11963428
> 
> 赞同：2
> 
> 时间：2012-08-15T02:39:17.440
> 
> 标签：java, android, io

我看到很多其他人问同样的问题，但发布的解决方案都没有帮助我。

我正在尝试从我的 Android 应用程序将（二进制）文件写入外部存储。我把`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`我的清单，但我仍然无法创建任何文件。我用来创建文件的代码是

```
File folder = new File(Environment.getExternalStorageDirectory(), SAVE_DIRECTORY);
File toWrite = new File(folder, "save.bin");
if(!toWrite.exists()){
    try {
        if(!folder.mkdirs())
            Log.e("Save", "Failed to create directories for save file!");
        toWrite.createNewFile();
     } catch (IOException e) {
         Log.e("Save", "Failed to create save file! " + e.getMessage());
     }
 } 
```

调用`mkdirs()`失败，并`createNewFile()`抛出`IOException`（ENOENT，因为目录不存在）

有谁知道怎么回事？我什至尝试重新启动我的设备。如果有任何区别，我在 Nexus 7 上的 API 级别为 8。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T03:22:32.657

**首先你应该检查 ExternalStorageState**

```
public static boolean isSDCARDAvailable(){
   return Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED);
} 
```

如果此方法`isSDCARDAvailable`返回`true`，则使用您的代码

添加权限：

`<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-01T18:13:50.007

文档说，从 API 级别 19 开始，WRITE_EXTERNAL_STORAGE 不需要读取/写入 getExternalFilesDir(String) 和 getExternalCacheDir() 返回的应用程序特定目录中的文件。但是，如果您不想在那里写入文件而是想将文件写入 getExternalStorageDirectory()，则在 API 23 或更高版本下，您必须在运行时使用 requestPermissions() 请求权限。一旦我这样做了，我就能够在 getExternalStorageDirectory() 中创建一个目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-05T15:45:16.017

我也遇到了这个问题，并且我的应用程序中的所有内容都已正确配置，即我拥有外部存储的读写权限。

我的问题在于我创建存储文件的路径的方式：

```
private val LOG_BASE_PATH = Environment.getExternalStorageDirectory().path + "myFolder" 
```

请注意，必须包含“/”，如下所示：

```
private val LOG_BASE_PATH = Environment.getExternalStorageDirectory().path + "/myFolder/" 
```

没有这个，您将无法创建文件夹。Android 不会失败，因此您可能会认为您的手机配置或应用权限存在问题。

理想情况下，这可以帮助某人节省一些宝贵的时间。

# c# - 如何从 HLSL 中的精灵批次中获取色调颜色

> ID：11963432
> 
> 赞同：0
> 
> 时间：2012-08-15T02:39:35.723
> 
> 标签：c#, xna, hlsl

我想要做的就是能够从像素着色器中的 HLSL 着色器内部的精灵批量绘制调用中获取色调颜色。

[我之前](https://stackoverflow.com/questions/11897015/obtaining-the-tint-color-from-a-sprite-batch-within-a-hlsl-shader)问过类似的问题，有人告诉我看一下 spritebatch 的库存效果。我看着这些，他们很困惑，但很明显，色调被传递给具有 COLOR0 语义的像素着色器。但是，我尝试通过添加如下所示的颜色参数来使用此语义，但它不起作用。

```
float4 PixelShaderFunction(float2 texCoord : TEXCOORD0, float4 inputColor : COLOR0) : COlOR0 
```

我假设我遗漏了一些东西，可能与顶点着色器有关？我没有使用顶点着色器的经验，但我想做的就是能够从精灵批次中获得色调颜色。

有人有这方面的经验吗？帮助表示赞赏

编辑：更具体地说明它为什么不起作用，inputColor 始终为 0，无论我为 spritebatch tint color 设置什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:56:35.710

它通过顶点着色器。请注意[语义和](http://msdn.microsoft.com/en-us/library/bb509647(v=vs.85).aspx)[函数参数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509606(v=vs.85).aspx)上的输入修饰符的文档。

基本流程如下所示：

`[vertex buffer data] -> [vertex shader] -> [pixel shader] -> [output]`

像素着色器只看到从顶点着色器出来的东西。在每个阶段，数据都根据语义进行解释。

在顶点缓冲区和顶点着色器之间，顶点声明将二进制数据映射到语义描述的输入寄存器中。

在顶点着色器和像素着色器之间，输出被传递给由匹配语义名称描述的输入。再次注意[这个语义列表](http://msdn.microsoft.com/en-us/library/bb509647(v=vs.85).aspx)。（这里还有一个混合步骤，用于获取顶点之间像素的输入值。）

最后，像素着色器的输出被传递到一组固定的输入（带有语义），用于管道的其余固定部分：深度测试、混合等。

* * *

我认为在这种情况下让你感到困惑的是，**有两种方法可以从着色器输出数据**：你可以返回它并给你的返回值一个语义（或者如果你返回一个结构，则为许多语义）。

`out`但是您也可以通过使用 the或`inout`修饰符将值分配给参数（或简单地将其留在参数中）来输出值。

这就是顶点着色器`SpriteBatch`正在做的事情。请注意，它已`inout`为所有参数指定 - 并且根本不修改颜色或纹理坐标参数。这些参数直接传递给像素着色器（通过适当的混合）。

# multicore - 无法在双核 ios 设备（iPhone4s、iPad2 等）上获得 Boost Thread 池

> ID：11963433
> 
> 赞同：2
> 
> 时间：2012-08-15T02:39:55.060
> 
> 标签：multicore, boost-thread

在我的 IOS 应用程序中，我使用线程池（Boost Thread）来下载资源图像。除了 appstore 构建之外的所有构建（包括 OTA 构建）都可以正常工作。经过调查，appstore build 无法仅在双核 ios 设备（iPhone4s、iPad2 等）上获得 Boost Thread pool。

而且它只发生在第一次启动时。在我杀死并重新启动应用程序后，它工作正常。

有人可以帮忙找出原因吗？

我可以做出这样的假设：Boost Thread + Dual Core + Apple post-encryption（对于 OTA 构建工作正常），所有这些都加起来导致了问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:49:09.097

遇到了同样的问题。通常未设置线程池或 Schedule() 不运行任务并随后获取回调。

没有线索。

# c# - C#访问接口上的动态属性

> ID：11963435
> 
> 赞同：5
> 
> 时间：2012-08-15T02:40:32.770
> 
> 标签：c#, c#-4.0, dynamic, fluent-security

我正在玩用于 asp.net mvc 的 FluentSecurity 库。该库公开的接口之一`ISecurityContext`如下所示：

```
public interface ISecurityContext
{
    dynamic Data { get; }
    bool CurrenUserAuthenticated();
    IEnumerable<object> CurrenUserRoles();
} 
```

当我尝试访问“数据”属性（如下所示）时，它不可用。尽管其他两种方法似乎可以访问。

```
public class ExperimentalPolicy : ISecurityPolicy
{
    public PolicyResult Enforce(ISecurityContext context)
    {
        dynamic data = context.Data; // Data property is not accessible.
    }
} 
```

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:25:09.997

`Data`on 属性`ISecurityContext`直到**2.0**版本才引入。与 nuget 一起安装但不包括预发行版的默认值为**1.4**。哪个没有[属性](https://github.com/kristofferahl/FluentSecurity/blob/a7b48011448ec366c664b83a4fb0fb0db44434d4/FluentSecurity/ISecurityContext.cs)。确保您使用的是正确的版本！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:49:43.970

以下是按预期运行的，我做的和你有什么不同吗？

```
void Main()
{
  ATest t = new ATest();
  Experiment z = new Experiment();

  z.TestTest(t);
}

public class ATest : ITest
{
  public dynamic Data {get; set;}

  public ATest()
  {
     Data = new { Test = "This is a string" };
  }
}

// Define other methods and classes here
public interface ITest
{
  dynamic Data { get; }
}

public class Experiment
{
    public int TestTest(ITest context)
    {
       dynamic data = context.Data; 

       Console.WriteLine(data.Test);

       return 0;
    }
} 
```

# apr - 更改 apr-1-config 返回的 APR 嵌入值？

> ID：11963436
> 
> 赞同：4
> 
> 时间：2012-08-15T02:40:37.527
> 
> 标签：apr

是否可以在不重新编译 APR 的情况下修改 APR 的嵌入值？或者有没有办法编辑和“重新加载”APR 的配置文件？

在 OS X 10.8 上，Apache Portable Runtime Library 中嵌入了几个错误值。这些值会导致编译其 makefile 依赖于 APR 派生值的软件出现问题。

`CC`具体来说，两者报告的值`apr-1-config`和`apxs`指向一个不存在的 Xcode 工具链（`OSX10.8.xctoolchain`而不是`XcodeDefault.xctoolchain`）。告诉`apxs`使用不同版本的`libtool`.

这些值似乎是从 和 的某种混合中提取`/usr/share/apr-1/build-1/apr_rules.mk`的`/usr/share/httpd/build/config_vars.mk`。编辑`config_vars.mk`会将查询结果更改为`apxs`但不会影响`apr-1-config`. 我将`LIBTOOL`config_vars.mk 中的定义更改为指向 /usr/bin/ 并得到了这个：

```
$ apxs -q LIBTOOL
/usr/bin/libtool --silent   // modified

$ apr-1-config --apr-libtool
/usr/share/apr-1/build-1/libtool  // default value 
```

两者都没有`apxs`或`apr-1-config`反映了类似的变化`apr_rules.mk`。不幸的是，我怀疑我的问题在于`apr-1-config`.

**更多的：**

一个简单的解决方法是只对 xctoolchain 进行符号链接，如下所述： [Homebrew Issue #13586](https://github.com/mxcl/homebrew/issues/13586)

```
sudo ln -s /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain 
```

# delphi - 从 NC 区域中删除 vcl 样式时，不显示 TMainMenu

> ID：11963441
> 
> 赞同：4
> 
> 时间：2012-08-15T02:41:09.213
> 
> 标签：delphi, delphi-xe2, vcl-styles

我正在使用此代码从表单的非客户区中删除 vcl 样式。

```
type
  TFormStyleHookNC= class(TMouseTrackControlStyleHook)
  protected
    procedure PaintBackground(Canvas: TCanvas); override;
    constructor Create(AControl: TWinControl); override;
  end;

constructor TFormStyleHookNC.Create(AControl: TWinControl);
begin
  inherited;
  OverrideEraseBkgnd := True;
end;

procedure TFormStyleHookNC.PaintBackground(Canvas: TCanvas);
var
  Details: TThemedElementDetails;
  R: TRect;
begin
  if StyleServices.Available then
  begin
    Details.Element := teWindow;
    Details.Part := 0;
    R := Rect(0, 0, Control.ClientWidth, Control.ClientHeight);
    StyleServices.DrawElement(Canvas.Handle, Details, R);
  end;
end;

initialization
 TStyleManager.Engine.RegisterStyleHook(TForm3, TFormStyleHookNC); 
```

在应用此样式挂钩之前，表单看起来像

![在此处输入图像描述](../Images/1f1636292fa7ae7cf67e77abcb97877b.png)

之后

![在此处输入图像描述](../Images/0931e14facff1f0fd6bdb1e4718a1e13.png)

如您所见，菜单消失了，问题是：我该如何解决？我的意思是如何在不删除 TMainMenu 的情况下从表单的非客户区删除 vcl 样式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T03:00:59.143

当您使用 vcl 样式时，TMain 菜单由 `TMainMenuBarStyleHook`vcl 样式钩子绘制，该钩子定义在`TFormStyleHook`（表单的钩子）内部，在这种情况下，因为您没有使用此钩子，所以没有代码来绘制 TMainMenu .

两种可能的解决方案是

1) 在 TFormStyleHookNC 内部为 TMainMenu 实现 vcl 样式挂钩，就像 TFormStyleHook 一样。

2) 甚至更好地使用 TActionMainMenuBar 组件而不是 TMainMenu，该组件与 vcl 样式很好地集成（查看下一个示例图像）。

![在此处输入图像描述](../Images/73dda73f5cad1982c0945ce6b8ce6853.png)

# mysql - 如何将 mysql 数据库与 Dart 连接？

> ID：11963444
> 
> 赞同：16
> 
> 时间：2012-08-15T02:41:36.263
> 
> 标签：mysql, database, dart

有谁可以告诉我如何用 Dart 连接到 mysql 数据库？我一直在阅读和搜索几天，但找不到任何合适的答案。我只是学习网络编程。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-03T10:38:55.867

您可以使用[SQLJocky](http://pub.dartlang.org/packages/sqljocky)连接到 MySQL。添加

```
dependencies:
  sqljocky: 0.0.4 
```

到您的**pubspec.yaml**运行**pub install**。现在你可以像这样连接到 MySQL

```
var cnx = new Connection();
cnx.connect(username, password, dbName, port, hostname).then((nothing) {
    // Do something with the connection
    cnx.query("show tables").then((Results results) {
    print("tables");
    for (List row in results) {
      print(row);
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-12-26T12:32:56.350

我认为 dart 2[`mysql1`](https://pub.dartlang.org/packages/mysql1)是一个简单的选择。

例子：

```
import 'package:mysql1/mysql1.dart';

Future main() async {
  // Open a connection (testdb should already exist)
  final connection = await MySqlConnection.connect(new ConnectionSettings(
      host: '10.0.2.2',
      port: 3306,
      user: 'root',
      password: '0123456789',
      db: 'development',
      ));
  var results = await connection.query('select * from tableName');
  for (var row in results) {
    print('${row[0]}');
  }

  // Finally, close the connection
  await connection.close();
} 
```

（在 Dart 版本 2.1.0 上测试（构建 2.1.0-dev.9.4 f9ebf21297））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:27:15.530

我还没有尝试过，但这里有一个：http: [//github.com/jamesots/sqljocky](https://github.com/jamesots/sqljocky)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:56:14.913

您可以尝试使用 sqljocky -> [http://pub.dartlang.org/packages/sqljocky](http://pub.dartlang.org/packages/sqljocky)

# internet-explorer - setStyleAttribute 位置固定在 ie 9 中无法使用谷歌应用脚 本

> ID：11963447
> 
> 赞同：0
> 
> 时间：2012-08-15T02:41:59.600
> 
> 标签：internet-explorer, google-apps-script

谷歌应用脚​​本使用 IE 9 image.setStyleAttribute("position", "fixed"); 不适合我。它在 chrome 和 ff 中运行良好。有任何想法吗？

显示了图像，但是当我滚动时它会移动。任何人都被固定在 ie 上工作（版本 7 之前不支持固定）

```
var app = UiApp.createApplication().setTitle('fixed pos');

var image = app.createImage("BMW_700_sport_BW_1.JPG");
image.setStyleAttribute("position", "fixed");
app.add(image); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:42:34.043

尝试这个：

```
var app = UiApp.createApplication().setTitle('fixed pos').setStandardsMode(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:46:25.467

改用 setAttribute，它应该适用于所有浏览器。请参阅此链接以获取参考[http://www.w3schools.com/dom/met_element_setattribute.asp](http://www.w3schools.com/dom/met_element_setattribute.asp)

# vim - vim 导航 - 最后一个字符不是分号或逗号

> ID：11963452
> 
> 赞同：1
> 
> 时间：2012-08-15T02:42:50.820
> 
> 标签：vim, navigation

我经常使用 PHP 和 Javascript，我发现我经常`(`在某处的某处（调用函数或其他东西）的中间添加一个左括号，然后我需要移动到行尾来关闭它。 .

示例（编辑前）：

```
array(
  'key' => 'value sometimes long and with \',() in string', 
```

示例（在初始编辑后 - 在关闭括号上退出插入模式`)`）：

```
array(
  'key' => Class::method('value sometimes long and with \',() in string',
                        ^ cursor here after exiting insert mode 
```

插入模式下所需的光标位置：

```
array(
  'key' => Class::method('value sometimes long and with \',() in string',
                                     cursor before comma in insert mode ^ 
```

显然，我可以`$hi`移动到行尾，后退一个字符并进入插入模式......或者我可以`A<`在 EOL 处进入插入模式，然后向左箭头一个位置。

我想知道是否有人知道任何更简单/更好的方法来做到这一点？

更好的是，我正在想象一个简单的函数来“知道”最后一个字符是逗号还是分号，然后移动到最后一个字符，并且只有在最后一个字符是逗号或分号时才向左移动。

伪代码思路：`$("am I on a comma or semicolon" ? h : )i`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T06:05:15.363

我会`iClass::method<Esc>lva'S)`使用 Tim Pope 出色的[Surround.vim](https://github.com/tpope/vim-surround/)插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T03:02:43.647

我能想到的唯一标准键序列是`Ctrl-o`用于执行一次性正常命令。例如`Ctrl-o``$``Left`，会让你进入正确的位置。如果你有`imap <C-b> <Left>`，你可以在不离开主行的情况下做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T05:53:34.997

在我的 TextMate 时代，我已经习惯了自动字符配对。Vim 中有很多插件提供该功能。我使用定界伴侣。

`()[]{}''""`这个想法是在您键入第一个字符时自动关闭对。这样一来，你就不必做你所说的体操了。

# razor - 为什么 Html.Raw 在 ASP.NET MVC 4 的锚标记中转义 & 符号？

> ID：11963453
> 
> 赞同：20
> 
> 时间：2012-08-15T02:42:50.943
> 
> 标签：razor, asp.net-mvc-4

我有一个 URL，我想在 Razor 视图中按原样呈现在锚标记中。我会认为 Html.Raw 将是要走的路：

```
@{
    string test = "http://someurl.com/someimage.png?a=1234&b=5678";
}

<div>
    <a href="@Html.Raw(test)">Test</a>
</div> 
```

但这不起作用。& 符号被编码，HTML 呈现为：

```
<div>
    <a href="http://someurl.com/someimage.png?a=1234&amp;b=5678">Test</a>
</div> 
```

奇怪的是，如果我在锚标记之外进行 Html.Raw 调用，则 HTML 输出与预期的一样：

```
<div>
    @Html.Raw(test)
<div> 
```

呈现为：

```
<div>
    http://someurl.com/someimage.png?a=1234&b=5678
</div> 
```

谁能解释这是为什么？

编辑：

尝试了其他一些事情，发现以下内容按预期工作：

```
<div data-url="@Html.Raw(test)"></div> 
```

输出：

```
<div data-url="http://someurl.com/someimage.png?a=1234&b=5678"></div> 
```

为了添加更多上下文，**我的目标实际上并不是在锚标记中使用 URL**，因为`href`s 可以进行 HTML 编码并且仍然可以工作（我只是以锚标记为例）。相反，我希望在`<object> <param>`Flash 对象的值标记中使用 URL。Flash 对象无法正确识别 HTML 编码的 URL，但我无法正确输出原始 URL。

我很茫然。我猜是时候破解 MVC 源代码了……

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T17:19:02.450

发生这种情况是因为管道中的某些东西（我猜是剃刀，但我需要查找它）属性对所有属性值进行编码。但是，这不应该影响浏览器到达您想要的位置。

您可以使用`@Html.ActionLink(text, action, routeAttributes)`重载进行测试。

```
@Html.ActionLink("Test", "Index", new { tony = "1", raul = 2 }) 
```

输出

```
<a href="/?tony=1&amp;raul=2">Test</a> 
```

* * *

关于您的编辑，您只需要制作`<param>`原始价值的整个部分。

```
@{
    var test = "<param src=\"http://someurl.com/someimage.png?a=1234&b=5678\">";
}

<div>
    <object>
    @Html.Raw(test)
    </object>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T17:25:22.463

像这样：

```
@{
    string test = "http://someurl.com/someimage.png?a=1234&b=5678";
}

<div>
    <a href="@Html.Raw(Html.AttributeEncode(test))">Test</a>
</div> 
```

产生有效的标记：

```
<div>
    <a href="http://someurl.com/someimage.png?a=1234&amp;b=5678">Test</a>
</div> 
```

> 但这不起作用。& 符号被编码，HTML 呈现为：

但这正是有效标记的样子。当用作属性时，必须对 & 符号进行编码。不用担心，浏览器会完全理解这个 url。

请注意，以下是无效标记，因此您**不希望**这样：

```
<div>
    <a href="http://someurl.com/someimage.png?a=1234&b=5678">Test</a>
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T02:48:46.677

尝试

```
<div>
    <a href="@MvcHtmlString.Create(test)">Test</a>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T07:15:43.603

试试下面......它工作得很好。

```
@{
    string test = "https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token="+@ViewBag.Token;
}
<div>
    <a href="@Html.Raw(System.Web.HttpUtility.HtmlDecode(test))">@Html.Raw(System.Web.HttpUtility.HtmlDecode(test))</a>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T10:05:30.180

为什么不使用 jquery 发布网址：

```
 $(function () {
    $('form').submit(function () {
        $.ajax({
            url: this.action,
            type: this.method,
            data: { a:'firstvalue', b: 'secondvalue'},
            success: function (result) {
//code for successful result
            }
        });
        return false;
    });
}); 
```

在控制器中

```
public ActionResult Fetch(string a, string b)
    {
        //write required codes here
            return View();

    } 
```

# java - 在 FileReader 中发现对默认编码的依赖

> ID：11963462
> 
> 赞同：11
> 
> 时间：2012-08-15T02:44:20.943
> 
> 标签：java, findbugs

我们如何解决 findBugs 报告的以下问题：

```
Found reliance on default encoding in abc.java : new java.io.FileReader(File) 
```

我只是在阅读文件，Findbug 已经报告了这个问题。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T02:47:23.737

打开文件时使用显式字符编码，而不是依赖平台默认值（可能会根据平台而变化），当然，除非您打算使用平台默认值。您可以使用显式字符编码`InputStreamReader`将 a 转换`FileInputStream`为 a 。`Reader`

# android - android：TextView 的 LayoutParams 以编程方式使视图消失

> ID：11963465
> 
> 赞同：29
> 
> 时间：2012-08-15T02:45:01.470
> 
> 标签：android, textview, layoutparams

我已经从各种不同的角度打了这个。基本上要点是这样的：

我已经在 XML 中为需要以编程方式运行的接口设计了一个模板，因此它将在运行期间动态填充。

这里的问题是 XML TextView 有很多布局调整（有效）并且是必要的。但如果我真的在代码中设置它们，TextView 甚至不会出现。

（顺便说一下，TextView 嵌套在 TableRow 中，因此调用了 weight。）我首先设计的 XML 模板用作代码的参考，它工作得很好：

```
<TextView
  android:id="@+id/txtviewWhiteBox"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_weight="1.0"
  android:background="@drawable/textview_9patch_white"
  android:gravity="center"
  android:text="75"
  android:textColor="@android:color/black"
  android:layout_margin="20dp"
  android:padding="20dp"
  android:textSize="40dp" /> 
```

就像我说的那样，这很完美。但是，当我在代码中运行相同的布局并应用 LayoutParams 时，TextView 消失了。

这是相关的片段：

```
int textViewExampleID = 9001;

private TextView txtviewExample = new TextView(this);

private void buildTextView(){   
    LayoutParams paramsExample = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,1.0f);
    txtviewExample.setId(textViewExampleID);
    txtviewExample.setBackgroundResource(R.drawable.textview_9patch_white);
    txtviewExample.setGravity(Gravity.CENTER);
    txtviewExample.setTextColor(getResources().getColor(android.R.color.black));
    paramsExample.setMargins(20, 20, 20, 20);
    txtviewExample.setPadding(20, 20, 20, 20);
    txtviewExample.setTextSize(40); 
    txtviewExample.setText("customExample");

    //if I comment out the following line, this TextView displays.
    //if I leave it in, it doesn't display.
    txtviewExample.setLayoutParams(paramsExample);
} 
```

我意识到 LayoutParams 有各种可用的类，我一直在玩它们所有 LinearLayout.LayoutParams、TableView.LayoutParams、RelativeLayout.LayoutParams、LayoutParams 本身......无论我尝试哪一个，任何尝试调用“setLayoutParams”使整个 TextView 消失。我已经搜索了这里的论坛，但还没有找到答案。这不会那么罕见。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-08-15T14:48:17.867

好吧，那很痛苦，但我终于明白了。要记住的最重要的事情（我刚刚意识到）是在无数的 中`LayoutParams`，您需要使用与您正在处理的视图的父视图相关的一个，而不是实际视图。

所以在我的情况下，我试图让`TextView`边距工作，但它被放在一个`TableRow`. 一个简单的更改是确保使用的类型`LayoutParams`是用于`TableRow`：

```
private void buildTextView(){   
    // the following change is what fixed it
    TableRow.LayoutParams paramsExample = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,1.0f);
    txtviewExample.setId(textViewExampleID);
    txtviewExample.setBackgroundResource(R.drawable.textview_9patch_white);
    txtviewExample.setGravity(Gravity.CENTER);
    txtviewExample.setTextColor(getResources().getColor(android.R.color.black));
    paramsExample.setMargins(20, 20, 20, 20);
    txtviewExample.setPadding(20, 20, 20, 20);
    txtviewExample.setTextSize(40); 
    txtviewExample.setText("customExample");
    txtviewExample.setLayoutParams(paramsExample);
} 
```

谢谢大家，希望这对其他人有用，因为我在这里的论坛中看到**了很多**半相关的问题，但不是真正定义问题的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T04:58:01.860

```
private TextView txtviewExample = new TextView(this);

private void buildTextView(){   
    LayoutParams paramsExample = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,1.0f);
    txtviewExample.setId(textViewExampleID);
    txtviewExample.setBackgroundResource(R.drawable.textview_9patch_white);
    txtviewExample.setGravity(Gravity.CENTER);
    txtviewExample.setTextColor(getResources().getColor(android.R.color.black));
    paramsExample.setMargins(20, 20, 20, 20);
    txtviewExample.setPadding(20, 20, 20, 20);
    txtviewExample.setTextSize(40); 
    txtviewExample.setText("customExample");

   setContentView(txtviewExample);//when you don't use SETTER method for TextView you can't view the desireable text on the UI//
} 
```

//利用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T02:49:52.330

layoutparams 中的第三个变量应该做什么，是 alpha 吗？如果你注释掉会发生什么`paramsExample.setMargins`

最后如果你追你会发生`txtviewExample.setVisible(View.Visible)`什么`setLayoutParams`？

如果你没有，我会尝试这些

# php - jQuery AJAX 在我的 PHP MVC 上运行不佳

> ID：11963466
> 
> 赞同：1
> 
> 时间：2012-08-15T02:45:28.777
> 
> 标签：php, jquery, ajax, model-view-controller

我制作了一个简单的 PHP MVC 框架，用于我的 Web 应用程序。但是，当尝试 AJAX 请求（使用 jQuery）时，它的行为不符合预期。以下是相关的代码片段：

**看法**

```
<input type="text" name="email" id="email">
<input type="password" name="password" id="password">
<a id="btnlogin">Login</a> 
```

**Jquery（放置在单独的文件中）**

```
$("#btnlogin").click(function(){
    var email = $("#email").val();
    var password = $("#password").val();

    $.ajax({
        type:"POST",
        url:"user/login",
        data:{email : email, password : password},
        cache:false,
        success:function(){
            alert("suksesssssss");
        }
    }); 
```

**控制器名称：用户**

```
public function login()
{
    $email = $_POST['email'];
    $password = $_POST['password'];
    $this->model->login($email,$password);
} 
```

**模型名称：用户模型**

```
public function login($email,$password)
{
    $sth = $this->db->prepare("select * from tbl_user where email = :email and password = :password");
    $sth->execute(array(
        ':email' => $email,
        ':password' => Hash::create('sha256', $password, PASSWORD_HASH_KEY)
    ));
    $count = $sth->rowCount();

    if($count > 0)
    {
        $data = $sth->fetch();

        Session::init();
        Session::set('id', $data['id']);
        Session::set('fullName', $data['nama_lengkap']);

        $this->updateLastLogin($data['id']);
        $this->updateLoginCount($data['id']);

        header('location:' . URL . 'user/profile');
    }
    else
    {
        header('location:' . URL . 'home/alogin');
    }
} 
```

我的目标是在登录成功时重定向到个人资料页面。但功能：

```
header('location:' . URL . 'user/profile'); 
```

这不运行..

是什么导致了这种行为？如果我使用 jQuery 重定向到另一个页面会更好吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T02:53:46.163

在执行 AJAX 时，您不能使用后端脚本重定向某人。您需要在 $.ajax() 成功回调中返回要重定向到（或通过您的 js 确定）的 url。

所以：

```
 header('location:' . URL . 'user/profile');
}
else
{
  header('location:' . URL . 'home/alogin');
} 
```

应该：

```
 echo json_encode( array( 'redirect' => 'location:' . URL . 'user/profile' ) );
}
else
{
  echo json_encode( array( 'redirect' => 'location:' . URL . 'home/alogin' ) );
} 
```

然后，在成功回调中使用 data 参数：

```
$.ajax({
  //...
  success: function(data){
    if( data.redirect ){
      window.location = data.redirect;
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:59:58.220

使用 ajax 时，通常使用回调函数。您没有被重定向的原因很可能是您收到的 ajax 调用的答案永远不会作为重定向处理。

你应该做什么而不是重定向到

```
header('location:' . URL . 'user/profile'); 
```

简单地说，使用 javascript 回调函数返回 url 并重定向：

```
$.ajax(
{
type:"POST",
url:"user/login",
data:{email : email, password : password},
cache:false,
success:function(data)
{
  window.location = data
}
}) 
```

如果仍然失败，请安装 firebug 或 chrome。按 Inspect 元素调出 Web 开发控制台 按 Net 或 network 选项卡。然后按登录按钮，如果您收到成功的 http 请求，请按一下。

# java - 这个简单的 GUI 程序中的错误

> ID：11963474
> 
> 赞同：0
> 
> 时间：2012-08-15T02:46:37.570
> 
> 标签：java, swing

这个简单的程序应该能够获得加价百分比和批发成本并计算零售价我在*CALCULATE*按钮上放置了一个动作侦听器，但是当我按下计算按钮时出现此错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: 
For input string: "Enter the markup precentage" 
at sun.misc.FloatingDecimal.readJavaFormatString(Unknown Source) 
at java.lang.Double.parseDouble(Unknown Source) 
at mm$CalcListerner.actionPerformed(mm.java:58) 
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) 
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source) 
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) 
at javax.swing.DefaultButtonModel.setPressed(Unknown Source) 
```

有人可以帮我解决这个问题吗？

有人可以解释这些错误消息，因为我真的不明白吗？

我的代码是：

```
import javax.swing.*;
import java.awt.event.*;

public class mm extends JFrame {

    private JTextField WholesaleCost;
    private JTextField markupPresentage;
    private JLabel WCost;
    private JLabel MPrecentage;
    private JButton button;
    private JPanel pannel;
    private final int Width = 250;
    private final int height = 320;

    public mm() {
        setTitle("Retail Price Calculator");
        setSize(Width, height);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
        buildPanel();
        add(pannel);
    }

    private void buildPanel() {
        WholesaleCost = new JTextField(10);
        markupPresentage = new JTextField(10);

        WCost = new JLabel("enter the Whole Sale cost");
        MPrecentage = new JLabel("Enter the markup precentage");

        button = new JButton("Calculate");
        button.addActionListener(new CalcListerner());

        pannel = new JPanel();
        pannel.add(WholesaleCost);
        pannel.add(markupPresentage);
        pannel.add(WCost);
        pannel.add(MPrecentage);
        pannel.add(button);
    }

    private class CalcListerner implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            String WSaleinput;
            String MPres;
            WSaleinput = WholesaleCost.getText();
            MPres = MPrecentage.getText();

            double Value = Double.parseDouble(WSaleinput) * (Double.parseDouble(MPres) / 100);

            JOptionPane.showMessageDialog(null, "Retail Price is  " + Value);
        }
    }

    public static void main(String[] args) {
        mm x = new mm();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T02:55:22.830

您正在尝试将 MPrecentage.getText() 解析为双精度值，但这是标签的值，而不是输入的值。

你应该设置`MPres`为`markupPercentage.getText();`

如果 jvm 无法从您提供的字符串中获取数字，则会引发错误 NumberFormatException。在这种情况下，您试图从文本“输入标记百分比”中解析一个数字

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T02:56:18.460

您试图引用错误的组件。

这

```
WSaleinput=WholesaleCost.getText();
MPres =MPrecentage.getText(); 
```

实际上应该是

```
WSaleinput = WholesaleCost.getText();
MPres = markupPresentage.getText(); 
```

# c++ - 控制台 C++ 中的循环错误

> ID：11963492
> 
> 赞同：0
> 
> 时间：2012-08-15T02:48:41.693
> 
> 标签：c++

我正在编写一个控制台 C++ 购物清单程序，当我尝试从购物清单中删除一个项目时，我收到了这个奇怪的循环错误。如果我要删除的项目名称超过一个单词，它会在此功能的主菜单端之间快速循环。

deleteItem 函数的代码如下：

```
void deleteItem()
{
    string itemToDelete;
    cout << "Which item would you like to delete?" << endl;
    cin >> itemToDelete;

    iFile.open("ShoppingList.dat");
    if(!iFile.is_open()) //check that file exists
    {
        cout << "Shopping List doesn't exist! Returning to main menu." << endl;
        cin.get();
        mainMenu();
    }
    oFile.open("Transfers.dat", ios::trunc); //create and/or clear temp transfers.dat                             file
    oFile.close();
    while (!iFile.eof())
    {
        getline(iFile, newItem);
        if(newItem.compare(itemToDelete) != 0)
        {
            oFile.open("Transfers.dat", ios::app);
            oFile << newItem << endl;
            oFile.close();
        }
    }
    iFile.close();
    int result;
    remove("ShoppingList.dat"); //delete old ShoppingList.dat
    result=rename("Transfers.dat", "ShoppingList.dat"); //Rename the file with     transfered data to the Shoping List
    cout << "Success" << endl;
    cin.ignore();
    cin.get();
    mainMenu();
} 
```

该函数的所有必要变量都已声明，并且所有必要的标头都已包含在内。这不会导致 Code::Blocks 上出现任何编译器标志，但是当`itemToDelete`长度超过一个单词时会导致这种奇怪的循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:55:50.437

好吧，最可能的解决方案是您打算这样做：

```
getline( cin, itemToDelete ); 
```

如果你使用`cin >> itemToDelete`它只会读一个字。您没有展示任何外部逻辑，`deleteItem()`因此很难评论这将产生什么影响。

但是，我很好奇该`mainMenu()`功能的作用。你似乎调用它，就好像它会从你的`deleteItem()`函数中返回一样，当然它不会。你不是说`return`吗？

# php - 使用 PHP 的 mail() 来做密件邮件？

> ID：11963494
> 
> 赞同：0
> 
> 时间：2012-08-15T02:48:59.600
> 
> 标签：php, email

我读到了

> 支持所有自定义标题（如 From、Cc、Bcc 和 Date）

来自[PHP mail() 参考](http://php.net/manual/en/function.mail.php)，但我如何在我的代码中实际实现这一点？即我不希望任何收件人看到其他电子邮件......永远。

就像是：

```
<?php
$to = "someguy@somesite.com, another@abc.com, someother@def.com";
$subject = "test message";
$msg = "this is a test";
$headers = "Bcc"; // <-- this?

if (mail($to, $subject, $msg, $headers)) 
    echo "message sent";
else 
    echo "uh oh";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T02:51:18.443

查看页面上的示例。

这是一个...

```
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n"; 
```

`Bcc:`因此，您只需在标题后添加逗号分隔的电子邮件地址。

这是一个带有循环的循环，它将数组中的地址添加`$recip`到密件抄送：

```
$headers.="Bcc: "; 
while($count < $count_recip){ 
    $headers.=$recip[$count].", "; 
    $count ++; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T02:51:16.383

将地址添加到信封（即收件人列表），而不是邮件（即标题）。

# vb.net - 如何从页面后面的 VB.NET 代码中获取 jqGrid 中 ID 列的值？

> ID：11963496
> 
> 赞同：0
> 
> 时间：2012-08-15T02:49:33.690
> 
> 标签：vb.net, jqgrid, code-behind

我的 .ascx 页面有两个 jqGrids

```
$(document).ready(function () {
    var searchText = "";

    $("#cclist").jqGrid({

        //url: ResolveUrl() + '/CC_DoctorList',
        datatype: 'local',
        // postData: { "CaseNo": CaseNo },
        mtype: 'POST',
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        serializeGridData: function (jsondata) { return JSON.stringify(jsondata); },
        jsonReader: { repeatitems: false, root: "d.rows", page: "d.page", total: "d.total", records: "d.records" },
        colNames: ['Remove', 'DoctorID', 'Last Name', 'First Name', 'Address'],
        colModel: [
            { name: 'RemoveAction', width: 80, fixed: true, sortable: false, resize: false, align: "center" },
            { name: 'ID', index: 'ID', width: 50, sortable: false, hidden: false },
            { name: 'LastName', index: 'LastName', width: 100, hidden: false, sortable: false },
            { name: 'FirstName', index: 'FirstName', width: 100, hidden: false, sortable: false },
            { name: 'Address', width: 420, hidden: false, sortable: false,
                jsonmap: function (obj) {
                    var street = obj.Address.Address1
                    var city = obj.Address.City
                    var state = obj.Address.StateProvince
                    var zip = obj.Address.PostalCode

                    if (street != '') { street = street + ', ' }
                    if (city != '') { city = city + ', ' }
                    if (state != '') { state = state + ', ' }

                    var Address = street + city + state + zip
                    return Address
                }
            }
        ],
        gridComplete: function () { addDeleteIcon(); },
        pager: '#ccpager',
        rowNum: 100,
        rowList: [100, 200],
        sortname: 'LastName',
        sortorder: 'desc',
        viewrecords: true,
        gridview: true,
        height: "100%",
        caption: 'Send Copy of Report To:',
        multiselect: false,
        shrinkToFit: false,
        loadui: "disabled"
    })//.jqGrid('navGrid', '#ccpager', { edit: false, add: true, del: false, search: true });

    $("#list").jqGrid({
        url: ResolveUrl() + '/DoctorList',
        datatype: 'local',
        postData: { "searchText": searchText },
        mtype: 'POST',
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        serializeGridData: function (jsondata) { return JSON.stringify(jsondata); },
        jsonReader: { repeatitems: false, root: "d.rows", page: "d.page", total: "d.total", records: "d.records" },
        colNames: ['Add', 'DoctorID', 'Last Name', 'First Name', 'Address'],
        colModel: [
    { name: 'AddAction', width: 80, fixed: true, sortable: false, resize: false, align: "center" },
    { name: 'ID', index: 'ID', width: 50, sortable: false, hidden: false },
    { name: 'LastName', index: 'LastName', width: 100, hidden: false, frozen: true, sortable: false },
    { name: 'FirstName', index: 'FirstName', width: 100, hidden: false, frozen: true, sortable: false },

    { name: 'Address', width: 420, hidden: false, sortable: false,
        jsonmap: function (obj) {
            var street = obj.Address.Address1
            var city = obj.Address.City
            var state = obj.Address.StateProvince
            var zip = obj.Address.PostalCode

            if (street != '') { street = street + ', ' }
            if (city != '') { city = city + ', ' }
            if (state != '') { state = state + ', ' }

            var Address = street + city + state + zip
            return Address
        }
    }],
        gridComplete: function () {
            var ids = jQuery("#list").jqGrid('getDataIDs');
            for (var i = 0; i < ids.length; i++) {
                var cl = ids[i];
                var rd = $("#list").getRowData(cl);
                var imageid = 'addImg_' + rd['ID']
                be = "<div><image style='height:22px;width:20px;'  alt='' src='" + ResolveUrl('//img/icons/add_black.png') + "'></image></div>"//"<input type='button' value='Remove' onclick=\"jQuery('#rowed2').editRow('" + cl + "');\"  />";

                jQuery("#list").jqGrid('setRowData', ids[i], { AddAction: be });
            }
        },
        pager: '#pager',
        rowNum: 5,
        rowList: [5, 10, 15, 20],
        sortname: 'LastName',
        sortorder: 'desc',
        viewrecords: true,
        gridview: true,
        caption: 'Search Result',
        multiselect: false,
        height: "100%",
        shrinkToFit: false
    })

    jQuery("#list").click(function (e) {
        var el = e.target;
        if (el.nodeName !== "TD") {
            el = $(el, this.rows).closest("td");
        }
        var iCol = $(el).index();
        var row = $(el, this.rows).closest("tr.jqgrow");
        var rowId = row[0].id;
        var noMatch = 0;

        if (iCol == 0) {
            var rd = $("#list").getRowData(rowId);
            var DoctorID = rd['ID'];
            //check if the doc already exists in the cc doc list
            var ids = jQuery("#cclist").jqGrid('getDataIDs');

            if (ids.length == 0) {
                ids.length = ids.length + 1;
            }
            for (var i = 0; i < ids.length; i++) {
                var cl = ids[i];
                var ccrd = $("#cclist").getRowData(cl);

                var newrowid = ids.length + 1;

                var ccDoctorID = ccrd['ID'];

                if (DoctorID != ccDoctorID) {
                    noMatch = noMatch + 1;
                    if (noMatch == ids.length) {
                        var deleteImageIcon = "<div><image style='height:22px;width:20px;'  alt='' src='" + ResolveUrl('//img/icons/trashbin.png') + "'></image></div>"; // onclick=\"jQuery('#cclist').delRowData('" + rowId + "');\"

                        jQuery("#cclist").jqGrid('addRowData', newrowid, { RemoveAction: deleteImageIcon, ID: rd['ID'], LastName: rd['LastName'], FirstName: rd['FirstName'], Number: rd['Number'], Address: rd['Address'] });

                        // alert(ids);
                        // var hdnids = document.getElementById('hdnDocIDs').value;

                        // hdnids.value = rd['ID'];
                        //var hdnids = jQuery("#<%=hdnDocIds.ClientID %>").val();
                        //alert(hdnids);
                        //hdnids = rd['ID'];
                        //alert('hdnvalue :' + hdnids);
                        //$("#<%=hdnlbldocs.ClientID%>").val(rd['ID'].toString() + ',' + $("#<%=hdnlbldocs.ClientID%>").val())
                        //$("#<%=hdnlbldocs.ClientID%>").val(rd['ID']);
                        //alert($("#<%=hdnlbldocs.ClientID%>").val());
                        //alert($("#<%=hdnlbldocs.ClientID%>").val(rd['ID'] + ','));
                        //alert($("#<%=hdnlbldocs.ClientID%>").val());
                        //jQuery("#<%=hdnDocIDs.ClientID %>").val(rd['ID']);

                        //The below works as expected - working.
                        jQuery("#<%=hdnDocIDs.ClientID %>").val(jQuery("#<%=hdnDocIDs.ClientID%>").val() + ',' + rd['ID']);
                        alert('All hdn ids : ' + jQuery("#<%=hdnDocIDs.ClientID%>").val());
                        //Using hidden fields it concatenates the doc ids - working

                        //alert('in side the for loop ID 2:' + rd['ID'] + ' DoctorID : ' + DoctorID);
                        //var furl = ResolveUrl() + '/AddCCDoctor';
                        //var furl = '';
                        //var param = '{"CaseNo":"' + CaseNo + '", "DoctorID":"' + DoctorID + '"  }';
                        //var param = '{ "DoctorID":"' + DoctorID + '"  }';
                        //var callback = function (msg) { dataHasChanged(); jQuery("#cclist").trigger("reloadGrid"); };
                        // ajaxJsonCall(furl, param, callback);
                        //jQuery("#cclist").jqGrid('setGridParam', {datatype: 'json'}).trigger('reloadGrid');
                        function (msg) { dataHasChanged(); jQuery("#cclist").trigger("reloadGrid"); };
                    }
                }
            }

        }
    }); 
```

通过`#list`单击上面代码中未发布的“搜索”按钮来加载网格。加载jqGrid`#list`后，用户可以单击他们感兴趣的行并将这些行添加到`#cclist`jqgrid。

现在，为了使 .ascx 更通用，我需要能够在后面的代码中编写一个公共方法，以返回添加到`#cclist`jqGrid 的所有行 ID（doctorID）并将这些 ID 保存到数据库中。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:56:43.320

感谢您花时间阅读我的帖子并发表您的评论。我将代码放在下面的函数中，它按预期工作。

var hiddenField = $("#<%= hdnDocIDs.ClientID %>"); var selectedValues = "";

```
function updateSelectedRowsHidden() {

    var selectedRows = [];
    selectedRows = $('#cclist').jqGrid('getDataIDs');
    selectedValues = "";
    hiddenField.val("");

    for (var i = 0; i < selectedRows.length; i++) {
         var myRow = $('#cclist').jqGrid('getRowData', selectedRows[i]);
         selectedValues = selectedValues + myRow.ID + ",";
    }

    hiddenField.val(selectedValues);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:29:45.977

您会看到这个[答案](https://stackoverflow.com/questions/11949960/how-can-i-get-checked-row-ids)，这里我从选定的行中获取数据并将其发送到服务器方法。在您的页面中有一个保存按钮，就像[答案中的那个](https://stackoverflow.com/questions/11949960/how-can-i-get-checked-row-ids)

现在，在您的情况下，您需要来自整个网格的数据。所以对你来说，代码将是这样的。

```
$('#clickMe').click(function() {
   var rowsOnPage=[];
   var docId=[];
   rowsOnPage=$('#cclist').jqGrid('getDataIDs');
   for(var i=0;i<rowsOnPage.length;i++)
   {
   docId.push(rowsOnPage[i].ID);
   }
    $.ajax({
        type: 'POST',
        url: '@Url.Action("editMe")',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({DoctorID:docID })
        dataType: "json",
        success: function() {
            $('#grid').trigger("reloadGrid");
        },
        error: function() {
            alert("error");
        }
    }); 
}); 
```

并且服务器方法（在 ASP.NET MVC 中）将是您方法中的代码隐藏方法，就像这样。

```
//depends upon dataType of DoctorID(int or string)
public ActionResult editMe(string[] DoctorID)
{
} 
```

# css - Sass @extend base/default 不扩展伪类？

> ID：11963501
> 
> 赞同：2
> 
> 时间：2012-08-15T02:49:55.863
> 
> 标签：css, css-selectors, extend, sass

我知道我可以@extend .foo:hover，但是有没有一种方法可以@extend .foobar 基本/默认属性而不扩展伪类的定义，例如：hover、:active 等？

**例如**，我将如何更改以下内容以使 .foobar 仅扩展 .foo 的默认状态？

```
.foo {
    & {
         color:blue;
    }
    &:hover {
         background-color: black;
    }
}

.foobar {
     @extend .foo;
     &:hover {
          //As is, I have to override. Any better way?
          background-color: transparent;
     }
} 
```

（如果没有办法用 Sass 做到这一点，有没有首选的方法来达到同样的效果？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T19:07:29.333

您必须以仅扩展您想要的部分的方式重写您的选择器：

```
%foo {
    color:blue;
}

.foo {
    @extend %foo;

    &:hover {
         background-color: black;
    }
}

.foobar {
    @extend %foo;

    &:hover {
         background-color: transparent;
    }
} 
```

但是，根据您将如何扩展/重用 .foo 类，新的 @content 指令可能是更好的选择。

```
@mixin foo {
    color: blue;

    &:hover {
        @content;
    }
}

.foo {
    @include foo {
        background-color: black;
    }
}

.foobar {
    @include foo {
        background-color: transparent;
    }
} 
```

# r - 在数据框上定义和应用自定义 bin

> ID：11963508
> 
> 赞同：35
> 
> 时间：2012-08-15T02:50:58.197
> 
> 标签：r, dataframe, binning, summarize

使用 python，我创建了以下包含相似性值的数据框：

```
 cosinFcolor cosinEdge cosinTexture histoFcolor histoEdge histoTexture    jaccard
1       0.770     0.489        0.388  0.57500000 0.5845137    0.3920000 0.00000000
2       0.067     0.496        0.912  0.13865546 0.6147309    0.6984127 0.00000000
3       0.514     0.426        0.692  0.36440678 0.4787535    0.5198413 0.05882353
4       0.102     0.430        0.739  0.11297071 0.5288008    0.5436508 0.00000000
5       0.560     0.735        0.554  0.48148148 0.8168083    0.4603175 0.00000000
6       0.029     0.302        0.558  0.08547009 0.3928234    0.4603175 0.00000000 
```

我正在尝试编写一个 R 脚本来生成另一个反映 bin 的数据帧，但是如果值高于 0.5，则我的 binning 条件适用，这样

伪代码：

```
if (cosinFcolor > 0.5 & cosinFcolor <= 0.6)
   bin = 1
if (cosinFcolor > 0.6 & cosinFcolor <= 0.7)
   bin = 2
if (cosinFcolor > 0.7 & cosinFcolor =< 0.8)
   bin = 3
if (cosinFcolor > 0.8 & cosinFcolor <=0.9)
   bin = 4
if (cosinFcolor > 0.9 & cosinFcolor <= 1.0)
   bin = 5
else
   bin = 0 
```

基于以上逻辑，我想建立一个数据框

```
 cosinFcolor cosinEdge cosinTexture histoFcolor histoEdge histoTexture    jaccard
1       3         0         0            1           1        0               0 
```

如何将其作为脚本启动，或者我应该在 python 中执行此操作？在了解 R 的强大程度/它拥有的机器学习包的数量之后，我正在尝试熟悉它。我的目标是建立一个分类器，但首先我需要熟悉 R :)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-15T03:24:22.923

另一个考虑极值的答案：

```
dat <- read.table("clipboard", header=TRUE)

cuts <- apply(dat, 2, cut, c(-Inf,seq(0.5, 1, 0.1), Inf), labels=0:6)
cuts[cuts=="6"] <- "0"
cuts <- as.data.frame(cuts)

  cosinFcolor cosinEdge cosinTexture histoFcolor histoEdge histoTexture jaccard
1           3         0            0           1         1            0       0
2           0         0            5           0         2            2       0
3           1         0            2           0         0            1       0
4           0         0            3           0         1            1       0
5           1         3            1           0         4            0       0
6           0         0            1           0         0            0       0 
```

### 解释

cut 函数根据您指定的切割分割成箱。所以让我们把 1:10 分成 3、5 和 7。

```
cut(1:10, c(3, 5, 7))
 [1] <NA>  <NA>  <NA>  (3,5] (3,5] (5,7] (5,7] <NA>  <NA>  <NA> 
Levels: (3,5] (5,7] 
```

您可以看到它是如何影响水平在休息之间的水平的。还要注意它不包括 3 （有一个`include.lowest`参数将包括它）。但这些对于组来说是可怕的名称，我们称它们为组 1 和组 2。

```
cut(1:10, c(3, 5, 7), labels=1:2)
 [1] <NA> <NA> <NA> 1    1    2    2    <NA> <NA> <NA> 
```

更好，但是 NA 是怎么回事？它们超出了我们的界限，没有被计算在内。为了计算它们，在我的解决方案中，我添加了 -infinity 和 infinity，因此将包括所有点。请注意，随着我们有更多的休息时间，我们将需要更多的标签：

```
x <- cut(1:10, c(-Inf, 3, 5, 7, Inf), labels=1:4)
 [1] 1 1 1 2 2 3 3 4 4 4
Levels: 1 2 3 4 
```

好的，但我们不想要 4（根据您的问题）。我们希望所有 4 都在第 1 组中。所以让我们去掉标记为“4”的条目。

```
x[x=="4"] <- "1"
 [1] 1 1 1 2 2 3 3 1 1 1
Levels: 1 2 3 4 
```

这与我之前所做的略有不同，请注意我之前在最后删除了所有最后的标签，但我在这里这样做了，所以你可以更好地了解它是如何`cut`工作的。

好的，`apply`功能。到目前为止，我们一直在对单个向量使用 cut。但是您希望它用于向量集合：数据框的每一列。这就是第二个参数的`apply`作用。1 将函数应用于所有行，2 应用于所有列。将该`cut`函数应用于数据框的每一列。`cut`apply 函数中的所有内容都只是`cut`我们上面讨论过的 的参数。

希望有帮助。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-15T03:14:43.840

您还可以使用`findInterval`：

```
findInterval(seq(0, 1, l=20), seq(0.5, 1, by=0.1))

## [1] 0 0 0 0 0 0 0 0 0 1 1 2 2 3 4 4 5 5 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-15T03:09:17.867

切起来像馅饼一样容易

```
dtf <- read.table(
textConnection(
"cosinFcolor cosinEdge cosinTexture histoFcolor histoEdge histoTexture jaccard
1 0.770 0.489 0.388 0.57500000 0.5845137 0.3920000 0.00000000
2 0.067 0.496 0.912 0.13865546 0.6147309 0.6984127 0.00000000
3 0.514 0.426 0.692 0.36440678 0.4787535 0.5198413 0.05882353
4 0.102 0.430 0.739 0.11297071 0.5288008 0.5436508 0.00000000
5 0.560 0.735 0.554 0.48148148 0.8168083 0.4603175 0.00000000
6 0.029 0.302 0.558 0.08547009 0.3928234 0.4603175 0.00000000"), sep = " ", 
           header = TRUE)

dtf$bin <- cut(dtf$cosinFcolor, breaks = c(0, seq(0.5, 1, by = .1)), labels = 0:5)
dtf
  cosinFcolor cosinEdge cosinTexture histoFcolor histoEdge histoTexture    jaccard bin
1       0.770     0.489        0.388  0.57500000 0.5845137    0.3920000 0.00000000   3
2       0.067     0.496        0.912  0.13865546 0.6147309    0.6984127 0.00000000   0
3       0.514     0.426        0.692  0.36440678 0.4787535    0.5198413 0.05882353   1
4       0.102     0.430        0.739  0.11297071 0.5288008    0.5436508 0.00000000   0
5       0.560     0.735        0.554  0.48148148 0.8168083    0.4603175 0.00000000   1
6       0.029     0.302        0.558  0.08547009 0.3928234    0.4603175 0.00000000   0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-13T03:51:48.230

[这是使用mltools](https://cran.r-project.org/web/packages/mltools/index.html)包中的`bin_data()`函数的另一个解决方案。

# 合并一个向量

```
library(mltools)

cosinFcolor <- c(0.77, 0.067, 0.514, 0.102, 0.56, 0.029)
binned <- bin_data(cosinFcolor, bins=c(0, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0), boundaryType = "[lorc")

binned
[1] (0.7, 0.8] [0, 0.5]   (0.5, 0.6] [0, 0.5]   (0.5, 0.6] [0, 0.5]  
Levels: [0, 0.5] < (0.5, 0.6] < (0.6, 0.7] < (0.7, 0.8] < (0.8, 0.9] < (0.9, 1]

# Convert to numbers 0, 1, ...
as.integer(binned) - 1L 
```

# 对 data.frame 中的每一列进行分箱

```
df <- read.table(textConnection(
  "cosinFcolor cosinEdge cosinTexture histoFcolor histoEdge histoTexture jaccard
0.770 0.489 0.388 0.57500000 0.5845137 0.3920000 0.00000000
0.067 0.496 0.912 0.13865546 0.6147309 0.6984127 0.00000000
0.514 0.426 0.692 0.36440678 0.4787535 0.5198413 0.05882353
0.102 0.430 0.739 0.11297071 0.5288008 0.5436508 0.00000000
0.560 0.735 0.554 0.48148148 0.8168083 0.4603175 0.00000000
0.029 0.302 0.558 0.08547009 0.3928234 0.4603175 0.00000000"
), sep = " ", header = TRUE)

for(col in colnames(df)) df[[col]] <- as.integer(bin_data(df[[col]], bins=c(0, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0), boundaryType = "[lorc")) - 1L

df
  cosinFcolor cosinEdge cosinTexture histoFcolor histoEdge histoTexture jaccard
1           3         0            0           1         1            0       0
2           0         0            5           0         2            2       0
3           1         0            2           0         0            1       0
4           0         0            3           0         1            1       0
5           1         3            1           0         4            0       0
6           0         0            1           0         0            0       0 
```

# scala - 如何在 Play! 中实现用户验证？

> ID：11963509
> 
> 赞同：0
> 
> 时间：2012-08-15T02:51:04.397
> 
> 标签：scala, playframework, squeryl

我有一个用户模型，其方案如下所示：

```
# --- First database schema

# --- !Ups

create sequence s_user_id;

create table user (
  id  bigint DEFAULT nextval('s_user_id'),
  firstName  varchar(128),
  lastName  varchar(128),
  email  varchar(128) unique
);

# --- !Downs

drop table user;
drop sequence s_user_id; 
```

我怎样才能验证新用户，而不是仅仅崩溃

> RuntimeException：执行语句时出现异常：唯一索引或主键违规：

?

另外，我没有使用任何形式或任何形式的视图。我只是在创建一个 API...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:36:20.113

您可以使用**表单**来定义和触发您的验证规则。

请注意，您可以使用没有 UI 的表单，数据可以来自您想要的（WS、代码、html ...）

举个例子 ：

```
case class User(name: String, age: Int)

val userForm = Form(
  mapping(
    "name" -> text.verifying(required),
    "age" -> number.verifying(min(0), max(100))
  ) verifying("Your custom validation", fields => fields match { 
      case (n, a) => User.myCustomValidation(n,a) 
  }) (User.apply)(User.unapply)
)

val filledForm = userForm.fill(User("Bob", 18))
if (filledForm.hasErrors) {
 // or filledForm.fold
} 
```

有关更多详细信息或[更复杂](https://github.com/playframework/Play20/blob/master/samples/scala/forms/app/controllers/SignUp.scala)的示例，请参阅[ScalaForms](http://www.playframework.org/documentation/2.0.2/ScalaForms)文档。

# django - AttributeError: 'ElasticSearch' 对象没有属性 'bulk_index'"

> ID：11963513
> 
> 赞同：1
> 
> 时间：2012-08-15T02:51:33.157
> 
> 标签：django, elasticsearch, search-engine, django-haystack

当我尝试`python manage.py rebuild_index`时，出现错误：

```
self.conn.bulk_index(self.index_name, 'modelresult', prepped_docs, id_field=ID)   
AttributeError: 'ElasticSearch' object has no attribute 'bulk_index' 
```

我找到了带有 pyelasticsearch.py​​ 的链接[https://github.com/toastdriven/pyelasticsearch/blob/master/pyelasticsearch.py](https://github.com/toastdriven/pyelasticsearch/blob/master/pyelasticsearch.py#L424-469) ​​#L424-469，我不知道它是哪个版本。反正`bulk_index`那个代码里有，买我的pyelasticsearch.py​​ 是没有的。有人有同样的经历吗？谢谢你的时间。

加：django-haystack 2.0.0.beta，pyelasticsearch 0.0.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:43:31.460

Django-haystack 不适用于原始 pyelasticsearch。您需要改用 toastdrivens 的 fork：[https](https://github.com/toastdriven/pyelasticsearch) ://github.com/toastdriven/pyelasticsearch 如果您使用 pip，只需键入：

```
pip uninstall pyelasticsearch
pip install git+git://github.com/toastdriven/pyelasticsearch.git 
```

# jquery - 自动刷新 Facebook 概念

> ID：11963515
> 
> 赞同：0
> 
> 时间：2012-08-15T02:51:42.537
> 
> 标签：jquery, facebook

我想问你facebook自动刷新的概念。

上次我在我的页面中使用 jquery 和一些 js 函数来获取自动更新。这工作顺利，如果收到数据，它将自动更新页面并显示数据。

但是现在我想阻止自动更新内容的文本时遇到了麻烦。麻烦的是当想要屏蔽文本和复制内容时，我们必须快速屏蔽它。如果没有，它将再次刷新并重置您的块文本。

我只是想如果我想像 facebook 概念一样自动刷新是否有可能。在facebook，我看得很顺利。
在 facebook 概念中，我阻止内容文本，如果自动刷新，它会保留文本块。

那么我怎样才能在我的页面中实现这个概念呢？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:02:34.897

我认为您可以将文本存储到“队列”中（可能是 js 中的数组），然后显示“队列”中的内容

因此，您不必担心内容会被重置。

例子：

```
var queue =[];

function getfromserver(){
    $.get("url",null,function(resp){
           queue = queue.concat( resp );
    }, "json");
}

function displayTopFive(){
    // do block text
    var topfive = queue.slice(0,5); // if the length of queue is more than 5
    $.map(topfive, function(elem){
            //do display single block
    });
} 
```

# android - 继承和泛型 java android

> ID：11963517
> 
> 赞同：1
> 
> 时间：2012-08-15T02:52:02.757
> 
> 标签：android, generics, inheritance, abstract-class, extend

继承和泛型的新手，如果我的问题很愚蠢，请多多包涵：

我有以下内容：

```
public abstract class car {
    private long id;
    private String name;

    public car (long id, String name) {
        this.id = id;
        this.name = name;
    }

    public final long getID(){
        return id;
    }

    public final String getName(){
        return name;
    }
}

public class sedan extends car {
    public sedan(long id, String name) {
        super (id, name);
    }
    ...
}

public class jeep extends car {
    public jeep(long id, String name) {
        super (id, name);
    }
    ...
} 
```

我正在尝试为微调器扩展 ArrayAdapter，如下所示：

```
public class DropdownAdapter extends ArrayAdapter<car> {
    private Context context;
    private List<car> values;

    public DropdownAdapter(Context context, int textViewResourceId, List<car> values) {
        super(context, textViewResourceId, values);
        this.context = context;
        this.values = values;
    }
    ...
} 
```

当我尝试使用它时，问题就来了：

```
adapter = new DropdownAdapter (this, android.R.layout.simple_spinner_item, lstSedan); 
```

会给我错误：构造函数 DropdownAdapter (ScreenItemList, int, List< 轿车 >) 未定义

```
adapter = new DropdownAdapter (this, android.R.layout.simple_spinner_item, lstJeep); 
```

会给我错误：构造函数 DropdownAdapter (ScreenItemList, int, List< jeep >) is undefined

这里有什么问题？当 lstSedan 或 lstJeep 从汽车派生时，为什么我不能使用它们作为参数？我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:42:41.093

您定义了一个需要类型参数的方法`List<a>`

```
 public SpinnerAdapter(Context context, int textViewResourceId, List<a> values) 
```

也就是说，它需要一个类型为的项目列表`a`。但是你传递了一个类型`b`为继承`a`的参数，而不是一个类型的参数`List<b>` 尝试使用这种方式：

```
 List<b> lstB= new ArrayList<b>();
  adapter = new SpinnerAdapter (this, android.R.layout.simple_spinner_item, lstB); 
```

正如 JoxTraex 所说，您应该阅读[java 名称约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)

**更新**：
对不起，我犯了一个错误。因为 java 不允许将`List<ChildClass>`参数传递给`List<ParentClass>`，所以在这种情况下你不应该使用继承。尝试使用泛型

```
public class DropdownAdapter extends ArrayAdapter<T> {
private Context context;
private List<T> values;

public DropdownAdapter(Context context, int textViewResourceId, List<T> values) {
    super(context, textViewResourceId, values);
    this.context = context;
    this.values = values;
}
...
} 
```

这个函数调用应该可以工作：

```
 adapter = new SpinnerAdapter (this, android.R.layout.simple_spinner_item, lstB); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:27:44.717

原因是您拥有它的名称，特别是 SDK 中已经存在**SpinnerAdapter**。您需要明确说明您正在使用哪一个或更改类名。

## 建议

另外仅供参考，您不应该将类称为 A 之类的无用名称。

# java - 将paintComponent传递给另一个类错误

> ID：11963518
> 
> 赞同：1
> 
> 时间：2012-08-15T02:52:19.957
> 
> 标签：java, swing, class, graphics, jpanel

我试图让每个对象`JPanel`通过传递将自己绘制成 ，`graphics`但我遇到了一个`java.lang.NullPointerException`错误。

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Main extends JPanel {

    private static final long serialVersionUID = 1L;
    Main panel;
    Player mainPlayer;

    public static void main(String[] args) {
        JFrame frame = new JFrame("Asteroids");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Main panel = new Main();
        frame.add(panel);
    frame.setBackground(Color.BLACK);
        frame.setSize(500, 400);
        frame.setVisible(true);
    }

    public void paintComponent(Graphics g) {
        mainPlayer.paintComponent(g);
    }
} 
```

然后这段代码在不同的 .java 文件中

```
import java.awt.Graphics;

public class Player {

    public Player() {

    }

    public void paintComponent(Graphics g) {

    }
} 
```

有谁知道为什么这段代码不起作用？

它给了我：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at Main.paintComponent(Main.java:23) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T03:00:30.737

您没有实例化 mainPlayer。由于未实例化的对象引用变量的默认值为 null，因此当您尝试取消引用该变量时，您会在第 23 行收到 NullPointerException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T03:21:48.090

mainPlayer 变量是导致您出现问题的原因。您应该在您的主要方法中添加 panel.mainPlayer = new Player(); 由于 mainPlayer 默认为 null，因此您必须将其设置为对象的某个实例才能使用它并调用其方法。

# ruby-on-rails-3 - 本地跳转错误 find_each 上没有给定块（yield）错误

> ID：11963519
> 
> 赞同：5
> 
> 时间：2012-08-15T02:52:21.307
> 
> 标签：ruby-on-rails-3

我正在尝试逐步浏览使用 find_each 检索的记录列表。

[我在这个堆栈溢出帖子](https://stackoverflow.com/questions/5153512/find-in-batches-no-block-given-yield)中的答案上设计了我的控制器代码，但我仍然收到“No Block Given (Yield)”错误。

我刚刚开始使用 Ruby 和 Rails，我还没有找到一个完整的解释（尽管有很多基本的例子）块和产量，这给了我我需要的东西。

我的代码如下所示：

```
def select_save
    @class = params[:class]
    @student_id = params[:id]
    @class.each do |id|
      old_subject = Subject.find(id)
      new_subject = old_subject.dup
      new_subject.student_id = @student_id
      new_subject.save
      Assignment.find_each.where(:subject_id => id) do |assignments|
        assignments.each do |a|
          new_assignment = a.dup
          new_assignment.subject_id = new_subject.id
          new_assignment.save
        end
      end
    end

    respond_to do |format|
      format.html { redirect_to @student, :notice => 'Subject and assignments created.' }
    end
  end 
```

并且错误指向带有 find_each 的行。

我知道我需要一个块来让步，但是在这种特殊情况下，这到底是怎么回事却让我无法理解。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T04:30:55.703

您将一个块传递给`where`并且没有块传递给`find_each`. 你不能那样做。您需要反转`find_each`，`where`在这一行中，顺序很重要，因为块被传递给最后调用的方法：

```
Assignment.find_each.where(:subject_id => id) do |assignments| 
```

它应该是：

```
Assignment.where(:subject_id => id).find_each do |assignments| 
```

你的下一个问题是你试图迭代`assignments`，这是一个单一的分配。`find_each`已经在为您进行迭代，一次将一个分配传递到块中。该块应为：

```
Assignment.where(:subject_id => id).find_each do |assignment|
  new_assignment = assignment.dup
  new_assignment.subject_id = new_subject.id
  new_assignment.save
end 
```

我将假设您的主题有很多作业，因为您的班级中有`subject_id`一个`Assignment`。如果是这种情况，编写循环的最终也是最*正确*的方法是：

```
old_subject.assignments.each do |assignment|
  new_assignment = assignment.dup
  new_assignment.subject_id = new_subject.id
  new_assignment.save
end 
```

# function - Clojure 记录实施 IFn 是一种好习惯吗？

> ID：11963520
> 
> 赞同：16
> 
> 时间：2012-08-15T02:52:37.953
> 
> 标签：function, clojure, functional-programming, record

假设我有一个“类似函数”的记录，至少在它代表可以应用于某些参数的操作的意义上。

我可以通过实现来使它作为一个函数工作`clojure.lang.IFn`，比如：

```
(defrecord Func [f x]
  clojure.lang.IFn
    (invoke [this arg]
      (f x arg))
    (applyTo [this args]
      (apply f x args)))

 ((->Func + 7) 1)
 => 8 
```

（是的，我知道我刚刚重新实现了...的低级版本。`partial`这只是一个例子:-)）

制作记录是`clojure.lang.IFn`一种好的做法吗？

这种方法有什么陷阱吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T05:24:31.740

我很惊讶它还没有。记录应该是[“持久映射的完整实现”](http://clojure.org/datatypes)。因此，要回答您的问题，我希望它是其键的功能，就像地图一样；其他任何事情都会非常令人惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T06:46:55.197

我不能直接给出是/否的答案，但我可以分享我的经验。

我定义了一个实现的记录`clojure.lang.IFn`。实现 IFn 是为了让我可以轻松地通过 REPL 环境对其进行测试。

该记录旨在成为 Job 类，将由工作人员处理。因此，我还实现了另外一个接口`java.lang.Runnable`和一个`run`函数。

当我真正将代码放入集成测试时，它抛出了异常。为什么？

工人逻辑是这样的：

1.  它检查 Job 类是否是一个`Callable`实例，如果是，则调用该`call`函数。
2.  它检查 Job 类是否是一个`Runnable`实例，如果是，则调用该`run`函数。

但是，`clojure.lang.IFn`已经扩展了`Callable`and `Runnable`，所以由于我忘记实现该`call`功能而引发了异常。

# ruby-on-rails - Rails 3.2 和 simple_datatables - 为什么我的表没有加载？

> ID：11963521
> 
> 赞同：0
> 
> 时间：2012-08-15T02:52:42.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试使用 simple_datatables gem，但[文档](https://github.com/gryphon/simple_datatables)不是很清楚。

当我在浏览器中加载 search.datatables 和 search.html 时，我得到 JSON 内容，但是当我使用我的索引视图时，我的表没有被填充。

我已经使用以下内容创建了 app/views/trades/search.jsonify：

```
@trades.each do |t|
  json << [
    t.tddt,
    ... # omitted for brevity
    t.sdbk,
  ]
end 
```

我已将“搜索”控制器操作添加到我的 TradesController：

```
respond_to :html, :datatables

def search
  @trades = Trade.search(params[:search])
  respond_with @trades
end

def index
  respond_to do |format|
    format.html # index.html.erb
  end
end 
```

同样，如文档所示，我已将此 javascript 添加到我的 app/views/index.html.erb 中：

```
<script type="text/javascript">

$("#trades_tbl").dataTable({
    "sAjaxSource" : "/trades/search.datatables",
    "aaSorting" : [[0,'asc']],
    "aoColumns" : [
      {"sName":"tddt"},
      ... // again omitted for brevity
      {"sName":"sdbk"},
    ],
    "bServerSide"  : true,
    "fnServerData" : simpleDatatables
  });

</script> 
```

这是同一个文件中的表格：

```
<table id="trades_tbl">
  <thead>
    <tr>
      <th>Tddt</th>
      <!-- more columns omitted for brevity -->
      <th>Sdbk</th>
    </tr>
  </thead>

  <tbody/>
</table> 
```

那么我错过了什么？为什么javascript没有加载我的表？

谢谢。

**注意：**如果有 1500+ 名声的人愿意创建一个 simple_datatables 标签，我认为那将是一件好事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:29:35.400

我有几个想法：

为了确认，您将以下内容添加到您的 application.js 资产管道清单文件中：

```
//= require simple_datatables 
```

并重新启动网络服务器？

另一个可能的障碍是 index.html 中的 javascript 在文档加载完成之前执行，您可能希望将 index.html 中的 javascript 包装在 $(document).ready 回调中，如下所示：

```
$(document).ready(function(){
  $("#trades_tbl").dataTable({
    ....
  });
}); 
```

最后的想法：Web 浏览器开发控制台是否表明发生了任何 javascript 错误？如果是这样，您可能需要解决这些问题。

# inno-setup - Inno 设置上的欢迎标签透明

> ID：11963522
> 
> 赞同：8
> 
> 时间：2012-08-15T02:52:47.057
> 
> 标签：inno-setup

Inno Setup 上的 WelcomeLabel 不会出现，并且只在图像上留下文本。

这就是我想要的。

[![在此处输入图像描述](../Images/4c3310f07bafbd2149afea7607959fb9.png)](https://i.stack.imgur.com/uzWNX.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T03:57:22.913

像这样的东西可能会奏效。由于欢迎标签不支持透明度，因此您需要通过使用不同的类（具有透明度支持）创建自己的标签来解决此问题，继承父级、字体、文本和大小并隐藏原始标签。这是如何执行此操作的脚本：

```
[Code]
procedure InheritBoundsRect(ASource, ATarget: TControl);
begin
  ATarget.Left := ASource.Left;
  ATarget.Top := ASource.Top;
  ATarget.Width := ASource.Width;
  ATarget.Height := ASource.Height;
end;

procedure InitializeWizard;
var
  TopWelcomeLabel: TLabel;
  BottomWelcomeLabel: TLabel;
begin
  WizardForm.WizardBitmapImage.Align := alClient;
  WizardForm.WizardBitmapImage.Bitmap.LoadFromFile('D:\Image.bmp');

  TopWelcomeLabel := TLabel.Create(WizardForm);
  TopWelcomeLabel.Parent := WizardForm.WelcomeLabel1.Parent;
  TopWelcomeLabel.Font := WizardForm.WelcomeLabel1.Font;
  TopWelcomeLabel.Caption := WizardForm.WelcomeLabel1.Caption;
  TopWelcomeLabel.WordWrap := WizardForm.WelcomeLabel1.WordWrap;
  InheritBoundsRect(WizardForm.WelcomeLabel1, TopWelcomeLabel);
  WizardForm.WelcomeLabel1.Visible := False;

  BottomWelcomeLabel := TLabel.Create(WizardForm);
  BottomWelcomeLabel.Parent := WizardForm.WelcomeLabel2.Parent;
  BottomWelcomeLabel.Font := WizardForm.WelcomeLabel2.Font;
  BottomWelcomeLabel.Caption := WizardForm.WelcomeLabel2.Caption;
  BottomWelcomeLabel.WordWrap := WizardForm.WelcomeLabel2.WordWrap;
  InheritBoundsRect(WizardForm.WelcomeLabel2, BottomWelcomeLabel);
  WizardForm.WelcomeLabel2.Visible := False;
end; 
```

结果：

![在此处输入图像描述](../Images/117fec569fc9377440525c95a416aa3e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T07:58:11.293

这段代码可以帮助你。只需更改欢迎页面，但您可以尝试使用安装程序的其他页面。

```
[code]
function NextButtonClick(CurPageID: Integer): Boolean;
begin
  Result := True;
end;

function GetCustomSetupExitCode(): Integer;
begin
  Result := 1;
end;

procedure InitializeWizard();
var
  WLabel1, WLabel2,
  FLabel1, FLabel2: TLabel;
begin
  WizardForm.WelcomeLabel1.Hide;
  WizardForm.WelcomeLabel2.Hide;
  WizardForm.FinishedHeadingLabel.Hide;
  WizardForm.FinishedLabel.Hide;
  WizardForm.WizardBitmapImage.Width := 500;
  WizardForm.WizardBitmapImage.Height := 315;

  WLabel1 := TLabel.Create(WizardForm);
  WLabel1.Left := ScaleX(176); 
  WLabel1.Top := ScaleY(16);
  WLabel1.Width := ScaleX(301); 
  WLabel1.Height := ScaleY(54); 
  WLabel1.AutoSize := False;
  WLabel1.WordWrap := True;
  WLabel1.Font.Name := 'verdana'; 
  WLabel1.Font.Size := 12; 
  WLabel1.Font.Style := [fsBold];
  WLabel1.Font.Color:= clBlack; 
  WLabel1.ShowAccelChar := False;
  WLabel1.Caption := WizardForm.WelcomeLabel1.Caption;
  WLabel1.Transparent := True;
  WLabel1.Parent := WizardForm.WelcomePage;

  WLabel2 :=TLabel.Create(WizardForm);
  WLabel2.Top := ScaleY(76);
  WLabel2.Left := ScaleX(176); 
  WLabel2.Width := ScaleX(301); 
  WLabel2.Height := ScaleY(234); 
  WLabel2.AutoSize := False;
  WLabel2.WordWrap := True;
  WLabel2.Font.Name := 'tahoma'; 
  WLabel2.Font.Color:= clBlack; 
  WLabel2.ShowAccelChar := False;
  WLabel2.Caption := WizardForm.WelcomeLabel2.Caption;
  WLabel2.Transparent := True;
  WLabel2.Parent := WizardForm.WelcomePage;

  WizardForm.WizardBitmapImage2.Width := 500; 
  WizardForm.WizardBitmapImage2.Height := 315; 

  FLabel1 := TLabel.Create(WizardForm); 
  FLabel1.Left := ScaleX(176); 
  FLabel1.Top := ScaleY(16);
  FLabel1.Width := ScaleX(301); 
  FLabel1.Height := ScaleY(54); 
  FLabel1.AutoSize := False;
  FLabel1.WordWrap := True;
  FLabel1.Font.Name := 'verdana'; 
  FLabel1.Font.Size := 12; 
  FLabel1.Font.Style := [fsBold];
  FLabel1.Font.Color:= clBlack; 
  FLabel1.ShowAccelChar := False;
  FLabel1.Caption := WizardForm.FinishedHeadingLabel.Caption;
  FLabel1.Transparent := True;
  FLabel1.Parent := WizardForm.FinishedPage;

  FLabel2 :=TLabel.Create(WizardForm);
  FLabel2.Top := ScaleY(76);
  FLabel2.Left := ScaleX(176); 
  FLabel2.Width := ScaleX(301); 
  FLabel2.Height := ScaleY(53); 
  FLabel2.AutoSize := False;
  FLabel2.WordWrap := True;
  FLabel2.Font.Name := 'tahoma'; 
  FLabel2.Font.Color:= clBlack; 
  FLabel2.ShowAccelChar := False;
  FLabel2.Caption := WizardForm.FinishedLabel.Caption;
  FLabel2.Transparent := True;
  FLabel2.Parent := WizardForm.FinishedPage;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T03:00:30.543

即使创建自定义页面，恐怕您想要的也可能无法实现或相当困难。查看[CreateCustomPage()](http://www.jrsoftware.org/ishelp/index.php?topic=isxfunc_createcustompage)函数和 Inno Setup 安装中包含的示例脚本。

# node.js - 一些 JS 和 CSS 资源没有在 Heroku 上加载，尽管在本地加载

> ID：11963524
> 
> 赞同：3
> 
> 时间：2012-08-15T02:53:27.820
> 
> 标签：node.js, heroku, express

在本地，我的 node.js 与 express 应用程序按预期工作。当我推送到 Heroku 时，该应用程序能够加载一些样式表和 javascript，但不能加载其他的。以下是 app.js 的相关片段：

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
}); 
```

以下是我从我的翡翠模板加载的资产：

```
link(href='/stylesheets/style.css', rel='stylesheet')
link(href='/lib/bootstrap/docs/assets/css/bootstrap.css', rel='stylesheet')
link(href='/lib/bootstrap/docs/assets/css/bootstrap-responsive.css', rel='stylesheet')
script(src='/lib/jquery/jquery-1.7.2.js')
script(src='/lib/bootstrap/docs/assets/js/bootstrap-collapse.js') 
```

一切都在本地工作，但是当我推送到 Heroku 时，`style.css`文件和 jquery 文件加载正常。引导文件返回 404。

我很困惑为什么这会在本地工作，但会在 Heroku 上部分中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-05T04:11:27.150

1.  检查文件是否真的存在
2.  检查您的静态文件是否由节点或 Web 服务器（例如 nginx）提供服务。Web 服务器可能被错误配置为提供静态文件并且没有在 /lib/bootstrap/ 中查找

# php - 贝宝订阅 + 一次性订单 (NVP)

> ID：11963525
> 
> 赞同：1
> 
> 时间：2012-08-15T02:53:37.510
> 
> 标签：php, paypal, paypal-sandbox, paypal-subscriptions, paypal-nvp

对不起，如果这已经在某个地方得到了回答，但从我发现的情况来看，没有人回答这个问题。

我会很快的。我创建了允许快速生成 PayPal 字段的功能，因此我们可以通过我们定制的 CMS 进行快速付款。通过这一点，我们可以创建多个一次性付款或订阅，但是，我们似乎不能同时进行两者。这是我正在尝试实现的示例（版本 63）：

```
Array
(
    [L_PAYMENTREQUEST_0_NAME0] => XXXXXX
    [L_PAYMENTREQUEST_0_DESC0] => XXXXXXXXXX
    [L_PAYMENTREQUEST_0_AMT0] => 97.00
    [L_PAYMENTREQUEST_0_QTY0] => 1
    [L_PAYMENTREQUEST_0_NUMBER0] => 112

    [L_PAYMENTREQUEST_0_NAME1] => XXXXXX
    [L_PAYMENTREQUEST_0_DESC1] => XXXXXXXXXXX
    [L_PAYMENTREQUEST_0_AMT1] => 37.00
    [L_PAYMENTREQUEST_0_QTY1] => 1
    [L_PAYMENTREQUEST_0_NUMBER1] => 113
    [L_BILLINGAGREEMENTDESCRIPTION1] => Subscription: XXXXXXXXX
    [L_BILLINGTYPE1] => RecurringPayments

    [METHOD] => SetExpressCheckout
    [LANDINGPAGE] => Billing
    [ALLOWNOTE] => 0
    [RETURNURL] => http://XXXXXXXXXX/confirm-order
    [CANCELURL] => http://XXXXXXXXXX/checkout/cancelled
    [CURRENCYCODE] => AUD
    [PAYMENTREQUEST_0_ITEMAMT] => 134
    [PAYMENTREQUEST_0_SHIPPINGAMT] => 0
    [PAYMENTREQUEST_0_AMT] => 134
    [PAYMENTREQUEST_0_CURRENCYCODE] => AUD
    .... 
```

这就是我要回来的

```
[L_ERRORCODE0] => 10480
[L_SHORTMESSAGE0] => Invalid Data
[L_LONGMESSAGE0] => Invalid billing agreement type.
[L_SEVERITYCODE0] => Error 
```

谁能告诉我我做错了什么？我做了一些搜索，但所有结果都是空的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:14:17.240

您丢失了`L_BILLINGTYPE0`，`L_BILLINGAGREEMENTDESCRIPTION0`在您的数据中，添加它们，您应该被设置:)

# merge - 在sql server中合并查询中的行列

> ID：11963530
> 
> 赞同：0
> 
> 时间：2012-08-15T02:54:31.950
> 
> 标签：merge, sql-server-2008-r2

我有一个简单的查询，它返回以下行：

当前行：

```
Empl    ECode   DCode       LCode       Earn    Dedn    Liab
====    ====    =====       =====       ====    ====    ====
123     PerHr   Null        Null        13      0       0
123     Null    Union       Null        0       10      0
123     Null    Per         Null        0       20      0
123     Null    Null        MyHealth    0       0       5
123     Null    Null        401         0       0       10
123     Null    Null        Train       0       0       15
123     Null    Null        CAFTA       0       0       20 
```

但是，我需要看到上面的行如下：

```
Empl    ECode   DCode   LCode       Earn    Dedn    Liab
====    ====    =====   =====       ====    ====    ====
123     PerHr   Union   MyHealth    13      10      5
123     Null    Per     401         0       20      10
123     Null    Null    Train       0       0       15
123     Null    Null    CAFTA       0       0       20 
```

这更像是将后续行合并到前面的行中，只要遇到`EarnCode`, `DednCode`&的空值`LiabCode`。实际上我想看到的是将所有内容汇总到前面的行。

在 Oracle 中，我们有这个`LAST_VALUE`可以使用的函数，但在这种情况下，我根本不知道如何处理它。

在上面的示例中，`ECode`的总和值列是`Earn`、`DCode`is`Dedn`和`LCode`is `Liab`；请注意，只要`ECode`、`DCode`或中的任何一个不为空，就会在、或列`LCode`中存在相应的值。`Earn``Dedn``Liab`

顺便说一句，我们在工作中使用的是 SQL Server 2008 R2。

希望得到您的建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:44:06.257

这与 Tango_Guy 的技术基本相同，但没有临时表并且排序明确。因为每个 Empl 的行数 <= 已经存在的行数，所以我不需要为最左边的表创建一个虚拟表，只需将基础数据过滤到 3 个代码中匹配的位置。此外，我回顾了您的讨论，并将 Earn 和 ECode 一起移动。实际上，没有 ECode 的列中的非零 Earn 会被有效地丢失（这是一个很好的约束情况 - 当 ECode 为 NULL 时，不允许非零 Earn）：

[http://sqlfiddle.com/#!3/7bd04/3](http://sqlfiddle.com/#!3/7bd04/3)

```
CREATE TABLE data(ID INT IDENTITY NOT NULL,
                  Empl VARCHAR(3), 
                  ECode VARCHAR(8), 
                  DCode VARCHAR(8), 
                  LCode VARCHAR(8),
                  Earn INT NOT NULL,
                  Dedn INT NOT NULL,
                  Liab INT NOT NULL ) ;

INSERT INTO data (Empl, ECode, DCode, LCode, Earn, Dedn, Liab)
VALUES ('123', 'PerHr', NULL, NULL, 13, 0, 0),
        ('123', NULL, 'Union', NULL, 0, 10, 0),
        ('123', NULL, 'Per', NULL, 0, 20, 0),
        ('123', NULL, NULL, 'MyHealth', 0, 0, 5),
        ('123', NULL, NULL, '401', 0, 0, 10),
        ('123', NULL, NULL, 'Train', 0, 0, 15),
        ('123', NULL, NULL, 'CAFTA', 0, 0, 20);

WITH basedata AS (
    SELECT *, ROW_NUMBER () OVER(ORDER BY ID) AS OrigSort, ROW_NUMBER () OVER(PARTITION BY Empl ORDER BY ID) AS EmplSort
    FROM data
),
E AS (
  SELECT Empl, ECode, Earn, ROW_NUMBER () OVER(PARTITION BY Empl ORDER BY OrigSort) AS EmplSort
  FROM basedata
  WHERE ECode IS NOT NULL
),
D AS (
  SELECT Empl, DCode, Dedn, ROW_NUMBER () OVER(PARTITION BY Empl ORDER BY OrigSort) AS EmplSort
  FROM basedata
  WHERE DCode IS NOT NULL
),
L AS (
  SELECT Empl, LCode, Liab, ROW_NUMBER () OVER(PARTITION BY Empl ORDER BY OrigSort) AS EmplSort
  FROM basedata
  WHERE LCode IS NOT NULL
)
SELECT basedata.Empl, E.ECode, D.Dcode, L.LCode, E.Earn, D.Dedn, L.Liab
FROM basedata
LEFT JOIN E
    ON E.Empl = basedata.Empl AND E.EmplSort = basedata.EmplSort
LEFT JOIN D
    ON D.Empl = basedata.Empl AND D.EmplSort = basedata.EmplSort
LEFT JOIN L
    ON L.Empl = basedata.Empl AND L.EmplSort = basedata.EmplSort
WHERE E.ECode IS NOT NULL OR D.DCode IS NOT NULL OR L.LCode IS NOT NULL
ORDER BY basedata.Empl, basedata.EmplSort 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:57:49.940

不确定它是否是您需要的，但您是否尝试过 coalesc

```
SELECT Name, Class, Color, ProductNumber,
COALESCE(Class, Color, ProductNumber) AS FirstNotNull
FROM Production.Product ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T04:11:01.220

我有一个解决方案，但它非常笨拙。如果有人有更好的东西，那就太好了。

但是，一个算法：

1) 获取列中每个不同值列表的行
号 2) 根据行号连接所有列

例子：

```
select Distinct ECode   into #Ecode     from source_table   order by rowid;
select Distinct DCode   into #Dcode     from source_table   order by rowid;
select Distinct LCode   into #Lcode     from source_table   order by rowid;
select Distinct Earn    into #Earn  from source_table   order by rowid;
select Distinct Dedn    into #Dedn  from source_table   order by rowid;
select Distinct Liab    into #Liab  from source_table   order by rowid;

select b.ECode, c.DCode, d.LCode, e.Earn, f.Dedn, g.Liab
from source_table   a -- Note:  a source for row numbers that will be >= the below
left outer join #Ecode b on a.rowid = b.rowid
left outer join #DCode c on a.rowid = c.rowid
left outer join #LCode d on a.rowid = d.rowid
left outer join #Earn  e on a.rowid = e.rowid
left outer join #Dedn  f on a.rowid = f.rowid
left outer join #Liab  g on a.rowid = g.rowid
where 
    b.ecode is not null or
    c.dcode is not null or
    d.lcode is not null or
    e.earn is not null or
    f.dedn is not null or
    g.liab is not null; 
```

我没有包括 Empl，因为我不知道你想让它扮演什么角色。如果对于给定的 Empl 这一切都是正确的，那么您可以添加它，加入它，然后执行它。

我根本不喜欢这个解决方案，所以希望其他人会想出更优雅的东西。

最好的，大卫

# android - Facebook sdk 登录在 Kindle Fire 模拟器上导致应用程序崩溃

> ID：11963532
> 
> 赞同：1
> 
> 时间：2012-08-15T02:54:33.830
> 
> 标签：android, facebook-android-sdk, kindle-fire

如果没有 Facebook 集成，我的应用程序没有任何功能，所以我的应用程序在 onCreate 中所做的第一件事就是登录 Facebook，为其提供一个监听器，该监听器将抓取用户的新闻提要，然后将其加载到我的应用程序中。但是，在 Kindle Fire 模拟器上，我的应用程序甚至无法使用 SDK 的授权调用打开 Facebook 的登录对话框。

这个登录以及我的应用程序的其余部分在几个测试设备上完美运行，我创建的每个 AVD 模拟器除了我从 SDK 管理器安装的官方 Kindle Fire 模拟器。遗憾的是，我无法使用 Kindle Fire，因此无法在真实设备上对其进行测试。

为了隔离问题，我临时修改了我的代码，在回调监听器中完全不做任何事情，我只为我的 onDataLoaded() 实现留下了一个空的 void 方法。在 onCreate 中，我调用以下命令：

```
 m_fbHelper.authorize(new NFDataLoadedListener() {

        public void onDataLoaded() {
            // TODO Auto-generated method stub

        }
    }, this); 
```

FbHelper 类中的定义是：

```
public void authorize(NFDataLoadedListener dataLoadedListener, Home homeActivity){
        m_facebook.authorize(homeActivity, s_permissions, new  FacebookDataRetrievalListener(dataLoadedListener));
} 
```

创建活动并进行此调用时，会出现一个通知框，上面写着“正在加载”，这通常在登录时发生。然后应用程序崩溃并且模拟器返回主屏幕。

日志这样说：

> 08-15 01:40:23.338: D/Zygote(32): 进程 414 由信号 (4) 终止
> 
> 08-15 01:40:23.342: I/ActivityManager(61): 进程 com.mattgmg.socialadvancedpro (pid 414) 已经死亡。
> 
> 08-15 01:40:23.366: E/InputDispatcher(61): 通道'405ea458
> 
> com.mattgmg.socialadvancedpro/com.mattgmg.socialadvancedpro.Home (server)' ~ 消费者关闭输入通道或发生错误。事件=0x8
> 
> 08-15 01:40:23.366: E/InputDispatcher(61): 频道 '405ea458 com.mattgmg.socialadvancedpro/com.mattgmg.socialadvancedpro.Home (server)' ~ 频道已无法恢复，将被处理！08-15 01:40:23.392: I/WindowManager(61): WIN DEATH: Window{4061da60 com.mattgmg.socialadvancedpro/com.mattgmg.socialadvancedpro.Home paused=false}
> 
> 08-15 01:40:23.422: I/WindowManager(61): WIN DEATH: Window{405ea458 com.mattgmg.socialadvancedpro/com.mattgmg.socialadvancedpro.Home paused=false}
> 
> 08-15 01:40:23.482: I/WindowManager(61): WIN DEATH: Window{40636a48 com.mattgmg.socialadvancedpro/com.mattgmg.socialadvancedpro.Home paused=false}
> 
> 08-15 01:40:23.512：E/InputDispatcher(61)：收到未知输入通道的虚假接收回调。fd=175，事件=0x8
> 
> 08-15 01:40:23.512：E/InputDispatcher(61)：收到未知输入通道的虚假接收回调。fd=178，事件=0x8
> 
> 08-15 01:40:23.863：I/LAB126(119)：StatusBarService 听到意图。行动：com.lab126.intent.TOP_WINDOW_CHANGED

由于没有堆栈跟踪，我无法弄清楚为什么 Facebook SDK 无法显示登录对话框。其他SO帖子说这些日志消息表明内存泄漏，但是我除了尝试登录Facebook之外还没有在应用程序中做任何事情，所以如果它是内存泄漏肯定是SDK问题。

# php - 无法修改标头信息 - 标头已由（输出开始于）发送。这是什么意思？

> ID：11963533
> 
> 赞同：-3
> 
> 时间：2012-08-15T02:54:37.367
> 
> 标签：php, mysql, header

> **可能重复：**
> [“警告：无法修改标头信息 - 标头已由”错误标头](https://stackoverflow.com/questions/1912029/warning-cannot-modify-header-information-headers-already-sent-by-error)
> [已由 PHP 发送](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我查看了许多其他网站，这些网站指出问题是由于空白间距。我认为这不是问题，因为在我的 php 脚本结束之后和我的 php 脚本开始之前我没有留下任何空白。这是完整的错误

：无法修改标头信息 - 标头已由第 22 行的 admin/login.php 中的（输出开始于 /admin/login.php:19）发送

这是我的代码：

```
 <?php
        require_once("../../includes/database.php");
        require_once("../../includes/session.php");
        require_once("../../includes/user.php");

        if($session->is_logged_in())
        {
        header("Location:index.php");
        }
        if(isset($_POST['submit']))
        {
        $username = trim($_POST['username']);
        $password = trim($_POST['password']);
        //Check Databases
        $found_user = User::authenticate($username, $password);
        $found_user->id = $found_user[0];
        if($found_user)
        {
            $session->login($found_user);
            header("Location:index.php");
        }
        else
        {
            echo "Username/password combination incorrect.";
        }
            } else { //form is not submitted
        $username = "";
        $password = "";
        }
       ?>
       <html>
           <head>
           </head>
           <body>
           <h1>Photo Gallery</h1>
           <div id="main">
           <h2>Staff Login</h2>
           <form action="login.php" method="post">
           <table>
         <tr>
                <td>Username:</td>
                <td>
                  <input type="text" name="username" maxlength="30" value="" />
                </td> 
            </tr>
            <tr>
                <td> Password:</td>
                <td>
                  <input type="password" name="password" maxlength="30" value="" />
                </td>
            </tr>
            <tr>
                <td colspan="2">
                  <input type="submit" name="submit" value"Login" />
                </td>
            </tr>
           </table>
           </form>
           </div>
           </body>
           </html>
            <?php if(isset($database)) 
        {
                $database->close_connection();
        }
           ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:41:24.573

如果您使用 a`header()`来重定向用户，请确保在`header()`调用后使用[`exit()`](http://www.php.net/manual/en/function.exit.php). 否则，脚本会愉快地继续尝试输出以下所有内容。

例如：

```
if($session->is_logged_in())
{
    header("Location:index.php");
    exit();
} 
```

# xaml - 是否可以使 Windows 8 Metro App 列表框的行为与 Windows Phone 列表框版本一样？

> ID：11963536
> 
> 赞同：0
> 
> 时间：2012-08-15T02:55:05.747
> 
> 标签：xaml, windows-8, winrt-xaml

我正在使用 ListBox 在我的 Windows 8 应用程序中显示一些项目。

我想像在 Windows Phone 版本中一样向下平移它：单击任意位置并向上或向下拖动。此外，最好仅在项目处于移动状态时才能看到滚动（再次，如 windows phone 版本）。

我怎样才能做到这一点？

# ruby-on-rails - 如何在 Ruby on Rails 中为我的开发和生产环境设置不同的 api 密钥？

> ID：11963539
> 
> 赞同：1
> 
> 时间：2012-08-15T02:55:49.137
> 
> 标签：ruby-on-rails, development-environment

我正在做一些涉及 Stripe API 的开发。在我的开发环境中，我正在使用我的条带测试密钥。在生产中，我使用的是真正的 api 密钥，这样我当然可以处理真正的交易。

我目前只是在部署到生产环境之前立即更改测试 api 密钥；这感觉不是很好。我很确定可行的策略是使用 gitignore 创建一个开发分支（忽略加载 api 密钥的初始化程序），然后在部署之前将其与主分支合并；这样，api 密钥在各自的环境中总是正确的。我不是很喜欢这种方法。是否有某种方法可以在某处配置这些 api 密钥，以便应用程序只知道在 dev/prod 中使用哪一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-26T13:23:55.987

在 rails 4.1 我们有这个`config/secrets.yml`文件，所以你可以像这样设置 api 键：

```
development:
  secret_key_base: 'xxx'
  publishable_key: xxx
  secret_key: xxx
production:
  secret_key_base: 'xxx'
  publishable_key: xxx
  secret_key: xxx 
```

在您的 stripe.rb 文件中，您可以这样做：

```
Rails.configuration.stripe = {
  :publishable_key => Rails.application.secrets.publishable_key,
  :secret_key      => Rails.application.secrets.secret_key
}

Stripe.api_key = Rails.configuration.stripe[:secret_key] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T04:30:17.643

我更喜欢使用[Yetting](https://github.com/charlotte-ruby/yettings)。

虽然将 API 密钥添加到环境文件中可以完成工作，但将它们添加到单独的文件中对我来说似乎是一种更清洁和抽象的方式。

一旦安装了gem。您可以在 config 目录中创建一个 Yetting.yml 文件。

```
development:
  facebook_app_id: xxxxxx
staging:
  facebook_app_id: xxxxxx
production:
  facebook_app_id: xxxxxx 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T03:17:20.697

有很多方法可以给这只猫剥皮。

快速简单，看看`Rails.env`。

它将返回服务器运行的环境。您只需相应地设置密钥。

我真正推荐的方法是使用`yaml`文件或使用创建应用程序配置变量`Rails.application.config`

*配置/环境/development.rb*

```
config.api_key = "my dev api key" 
```

*配置/环境/production.rb*

```
config.api_key = "my prod api key" 
```

访问您的密钥

```
MyApp::Application.config.api_key 
```

查看此[**问题**](https://stackoverflow.com/questions/1450285/how-to-define-custom-configuration-variables-in-rails)以获取其他示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T06:10:50.240

我就是这样做的：

在 config/initializers/stripe.rb

```
if(Rails.env == 'development' || Rails.env == 'staging')
  Stripe.api_key = "XXXXXXXXXXXXXXXXXXXXXXXXXXX"
  STRIPE_PUBLIC_KEY = "XXXXXXXXXXXXXXXXXXXXXXXXXXX"
elsif(Rails.env == 'production')
  Stripe.api_key = "XXXXXXXXXXXXXXXXXXXXXXXXXXX"
  STRIPE_PUBLIC_KEY = "XXXXXXXXXXXXXXXXXXXXXXXXXXX"
end 
```

# c - vsprintf 失败

> ID：11963541
> 
> 赞同：0
> 
> 时间：2012-08-15T02:55:56.643
> 
> 标签：c, microcontroller, printf

我正在为 HCS12 微控制器编写 C 代码以与 LCD 屏幕接口作为 Uni 任务的一部分，我遇到一个问题，如果我尝试使用 vsprintf 制作 printf 包装器，则会发生异常并且控制器进入无法使用的状态。

```
void printfLCD(const char *fmt, ...) {
    char buffer[256];
    va_list args;
    va_start(args, fmt);
    (void)vsprintf(buffer, fmt, args);
    putsLCD(buffer);
    va_end(args);
} 
```

逐步调试我可以看到它在 vprintf 的某个地方崩溃了，但我仍然不知道为什么。我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:03:45.940

你的缓冲区在堆栈上吗？一些编译器（如 Keil 编译器）会假设您不想要可重入性并将局部变量放在数据空间中。但是，如果它在堆栈上，它可能太大了。您可能想制作缓冲区`static`，看看是否有帮助。

# string - “if ($line =~ m/($rr)(.+>)(\d.\d+)”是什么意思？

> ID：11963542
> 
> 赞同：0
> 
> 时间：2012-08-15T02:56:07.363
> 
> 标签：string, perl

我正在查看一位前雇员编写的脚本，并遇到了这个问题。我很困惑这意味着什么。这是一个遍历文件的 if 循环的条件，我知道 $rr 变量是什么，但之后的一切我都不知道它是什么意思......显然谷歌搜索“\d”没有返回任何相关......什么“.+>”也是这个意思吗？

```
if ($line =~ m/($rr)(.+>)(\d.\d+)</) { 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T04:24:10.503

我使用了[`x`](http://perldoc.perl.org/perlre.html#Modifiers)修饰符来使模式具有描述性：

```
$line =~ m/
    ( $rr  )     # Match and capture the value of $rr
    ( .+ > )     # Match and capture everything till the last >
    (            # Capture the following matches
        \d       # Match a single digit
        .        # Match any character a single time
        \d+      # Match one or more digits
    )
/x; 
```

上述模式中有三个捕获。可以使用特殊变量`$1`和访问这些`$2`捕获`$3`。

## 参考

*   [Perl 正则表达式教程](http://perldoc.perl.org/perlretut.html)
*   [Perl 正则表达式](http://perldoc.perl.org/perlre.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:08:34.933

这是关于正则表达式的。

```
if ($line =~ m/($rr)(.+>)(\d.\d+) 
```

`$line`是一个变量。它与这种模式匹配
的方式是什么？ 模式如下。它类似于then 变量，然后（单个字符），（多次匹配前一个字符）。我不确定。表示一个数字（即 0 到 9）。`=~`
`m/``$rr``.``+``>``\d`

在此处阅读模式匹配和正则表达式：[http ://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

正则表达式在许多语言中都是相似的，例如 Perl、Ruby 等。

在此处查看您的大部分字符串（ruby）：[http ://rubular.com/r/OTe4jFN545](http://rubular.com/r/OTe4jFN545)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T03:46:42.550

如果 line 匹配以 $rr 变量开头的正则表达式，后跟至少一个任意字符，后跟至少两位数。

我怎么不确定，但它接缝缺少一个括号。

我会尝试去这里匹配正则表达式

[http://www.perlfect.com/articles/regextutor.shtml](http://www.perlfect.com/articles/regextutor.shtml)

正则表达式是 m/($rr)(.+>)(\d.\d+ 但这接缝错误 /($rr)(.+>)(\d.\d+)/ 接缝更好。正则表达式也有捕获可以在 if 语句中访问的组

```
$_[0] .. $_[2] 
```

# ruby - t分布的Ruby实现

> ID：11963544
> 
> 赞同：1
> 
> 时间：2012-08-15T02:56:23.377
> 
> 标签：ruby, statistics

我正在尝试找到 t 分布的红宝石实现，这样我就可以绘制具有一定平均值、标准偏差和自由度的图形。不完全确定这是否有意义，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:44:31.100

我必须支持 DGM 关于使用 R 和 Rinruby 的评论。Rinruby 非常棒，因为您可以直接在 ruby​​ 中输入 R 命令 :) 您只需要确保在使用之前在系统上安装了 R。如果您想查看 T-Distribution 的运行（在安装 R 和 Rinruby gem 之后），只需将以下内容粘贴到 irb 中：

```
require 'rinruby'

R.eval <<EOF
x <- seq(-4, 4, length=100)
hx <- dnorm(x)

degf <- c(1, 3, 8, 30)
colors <- c("red", "blue", "darkgreen", "gold", "black")
labels <- c("df=1", "df=3", "df=8", "df=30", "normal")

plot(x, hx, type="l", lty=2, xlab="x value",
  ylab="Density", main="Comparison of t Distributions")

for (i in 1:4){
  lines(x, dt(x,degf[i]), lwd=2, col=colors[i])
}

legend("topright", inset=.05, title="Distributions",
  labels, lwd=2, lty=c(1, 1, 1, 1, 2), col=colors)
EOF 
```

希望这可以帮助您入门。我应该注意到我最近不需要进行 t 分布，所以我厚颜无耻地从一些 R 文档中窃取了 R 代码。

# javascript - Socket.io.js - 在授权时拒绝连接后仍然建立

> ID：11963545
> 
> 赞同：0
> 
> 时间：2012-08-15T02:56:24.310
> 
> 标签：javascript, socket.io, authorization

我使用的是 express v3.0.0、sockek.io 和 redis。当未经授权的用户请求连接时，发生了一些奇怪的事情。该行`console.log( 'Error!!!');`已运行，连接应被下一行拒绝`return accept(err, false);`。但是，连接仍然建立，并且线路`socket.log.info('A socket with sessionID', hs.sessionID, 'connected');`运行。

```
io = socketIO.listen(server);
io.configure(function () {
    io.set('authorization', function (data, accept) {
        // check if there's a cookie header
        if (data.headers.cookie) {
            data.cookie = parseSignedCookies(cookie.parse(decodeURIComponent(data.headers.cookie)), 'secret');
            data.sessionID = data.cookie['connect.sid'];
            // save the session store to the data object 
            // (as required by the Session constructor)
            data.sessionStore = sessionStore;
            sessionStore.get(data.sessionID, function (err, session) {
                if (session) {
                    req = {
                        sessionStore: sessionStore
                        , sessionID: data.sessionID
                    };
                    session = new express.session.Session(req, session);
                }
                if (err || !session) {
                    console.log( 'Error!!!');
                    return accept(err, false);
                } else {
                    // create a session object, passing data as request and our
                    // just acquired session data
                    data.session = new Session(data, session);
                    return accept(null, true);
                }
            });
        } else {
            // if there isn't, turn down the connection with a message
            // and leave the function.
            return accept('No cookie transmitted', false);
        }
        // accept the incoming connection
        accept(null, true);
    });
});

io.sockets.on('connection', function (socket) {
    var hs = socket.handshake;
    socket.log.info('A socket with sessionID', hs.sessionID, 'connected');
    // setup an inteval that will keep our session fresh
    var intervalID = setInterval(function () {
        // reload the session (just in case something changed,
        // we don't want to override anything, but the age)
        // reloading will also ensure we keep an up2date copy
        // of the session with our connection.
        hs.session.reload( function () { 
            // "touch" it (resetting maxAge and lastAccess)
            // and save it back again.
            hs.session.touch().save();
        });
    }, 60 * 1000);
    socket.on('disconnect', function () {
        socket.log.info('A socket with sessionID', hs.sessionID, 'disconnected');
        // clear the socket interval to stop refreshing the session
        clearInterval(intervalID);
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:31:37.857

问题出在您的授权方法的最后一行：

```
// accept the incoming connection
accept(null, true); 
```

因为

```
sessionStore.get(data.sessionID, function (err, session) { 
```

异步工作。您不得直接从授权函数中返回任何值，而只能从 sessionStore.get 回调函数返回。

完整的代码应该是：

```
io = socketIO.listen(server);
io.configure(function () {
    io.set('authorization', function (data, accept) {
        // check if there's a cookie header
        if (data.headers.cookie) {
            data.cookie = parseSignedCookies(cookie.parse(decodeURIComponent(data.headers.cookie)), 'secret');
            data.sessionID = data.cookie['connect.sid'];
            // save the session store to the data object 
            // (as required by the Session constructor)
            data.sessionStore = sessionStore;
            sessionStore.get(data.sessionID, function (err, session) {
                if (session) {
                    req = {
                        sessionStore: sessionStore
                        , sessionID: data.sessionID
                    };
                    session = new express.session.Session(req, session);
                }
                if (err || !session) {
                    console.log( 'Error!!!');
                    return accept(err, false);
                } else {
                    // create a session object, passing data as request and our
                    // just acquired session data
                    data.session = new Session(data, session);
                    return accept(null, true);
                }
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-17T01:08:16.777

根据最新版本的 Socke.io，不推荐使用 io.set('authorization')。

相反，使用中间件。

我的项目中的代码片段如下：

> io.use(SocketAuthRules.ensureUser)

In SocketAuthRules module, I have a function

function ensureUser (socket, next){
if(user!==null) { next() } else { next(new Error('not authorized')); } }

# python - 为什么有 =\r\n 字符来自我的 textarea？

> ID：11963547
> 
> 赞同：0
> 
> 时间：2012-08-15T02:56:27.183
> 
> 标签：python, html, google-app-engine

在我的表格中，我有：

```
<textarea id="styled" name="content"></textarea> 
```

在提交表单之前，我将以下内容剪切并粘贴到文本区域中：

```
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

当我在谷歌应用引擎上检索值时：

```
ImageUploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    content_i = self.request.get("content", None)

#content_i is:
u'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa=\r\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa=\r\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa=\r\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa=\r\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa=\r\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa=\r\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:16:25.060

这是因为这个[错误](http://code.google.com/p/googleappengine/issues/detail?id=2749)。尽管这可能会解决您的问题-> [@AndreBrossards Middleware Fix](https://stackoverflow.com/questions/3624226/encoding-problem-in-app-engine-when-submitting-multipart-form-data-forms)

# php - foreach() 中的无效警告

> ID：11963552
> 
> 赞同：0
> 
> 时间：2012-08-15T02:57:23.287
> 
> 标签：php, mysql, web

我是 php 新手，今年夏季学期一直在参加 php 编程课程，我想知道是否有人可以帮助我弄清楚我需要做什么才能使事情正常进行。

我正在做一个最终项目，我们必须在我们想要的主题上建立我们的小数据库。所以我选择做一个电影数据库。我已经使用了 murach 的 php 书中 my_guitar_shop 中的一些代码。这是 Murach 的 php 和 mysql 书。并且由于某种原因，当我转到 index.php 页面时，我无法让我的信息显示在我页面上的表格中。

我将向您展示我的索引页面的代码

```
<?php
require_once('database.php');
if (isset($_POST['deleteThis'])) {
    $deleteThis = $_POST['deleteThis'];
    $sqlDel="DELETE FROM categories WHERE categoryID = $deleteThis";
    $temp=$db->exec($sqlDel);

}

// Get all categories
$query = 'SELECT * FROM categories
ORDER BY categoryID';
$categories = $db->query($query);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml">

<!-- the head section -->
<head>
<title>My Movie Store</title>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>

<!-- the body section -->
<body>
    <center>
        <div id="heading">My Movie Store</div>
    </center>

    <div id="page">

        <div id="header">
            <h1>Top Movies</h1>
        </div>

        <div id="main">

            <h1>Movie List</h1>
            <table class="content">
                <tr>
                    <th>Title</th>
                    <th>Date</th>
                    <th>&nbsp;</th>
                </tr>

                <?php foreach($categories as $cat) {
                    ?>
                <tr>
                    <td><?php echo $cat['categoryName'];?>
                    </td>

                    <form method="post" action="category_list.php">
                        <input type="hidden" name="deleteThis"
                            value="<?php echo $cat['categoryID']; ?> " />
                        <td></td>
                        <td><input type="submit" value="Delete" />
                        </td>
                    </form>

                    <?php
                }
                ?>

            </table>
            <br />

            <h2>Add a Movie</h2>

            <!-- add code for the form here -->

            <p>
                <a href="add_product_form.php">Add Movie</a>
            </p>

            <br />
            <p>
                <a href="index.php">Movie List</a>
            </p>

        </div>
        <!-- end main -->

        <div id="footer">
            <p>
                &copy;
                <?php echo date("2012"); ?>
                My Movie Store, created by Kara Holey
            </p>
        </div>

    </div>
    <!-- end page -->
</body>
</html> 
```

我的数据库名称称为我在 localhost/phpmyadmin 中创建的电影数据库，数据库下的 2 个表称为类别和电影。出于某种原因，这是我在此页面上遇到的错误。

*警告：第 82 行 C:\xampp\htdocs\1306\finalp\index.php 中为 foreach() 提供的参数无效*

如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:21:11.063

```
$categories = $db->query($query) // this is your problem 
```

我认为您`foreach()`没有收到有效的数组。尝试使用您创建的静态数组进行故障排除！！

示例制作

```
$categories = array("A","B");
foreach($categories as $value){
   echo $value."<br/>";    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:05:39.527

您的变量 $categories in `foreach`loop 不是有效的集合，这就是 php 给您此错误的原因。你需要看看到底是什么`$categories`。

我怀疑它可能是从您的查询返回的资源，也可能是空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T03:56:00.880

如果您使用的是 PDO，这可能意味着您的查询失败并且输出`$db->query()`为`false`.

为了避免这个问题，我建议启用异常处理：

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

您可以将此添加到`database.php`. 如果查询失败并详细说明失败的原因，这样做会产生一个非常明显且难以错过的异常。

# windows - Haskell 中的屏幕截图？

> ID：11963561
> 
> 赞同：13
> 
> 时间：2012-08-15T02:59:04.320
> 
> 标签：windows, haskell, wxhaskell

是否可以在 Windows 环境中使用 Haskell 捕获屏幕（或窗口）？（即每隔几分钟左右截屏一次）。如果是这样，人们将如何去做（同样，在 Haskell 中，对于 Windows 环境）？

更多信息：我是 Haskell 的初学者。一个朋友想通过让我为他的会计师事务所编写一些程序来降低开发成本，但他坚持让我使用 Haskell。他想要一个工具，可以让他监控不同 Windows XP 工作站的桌面。它可能必须是客户端/服务器类型的应用程序。他只需要监控桌面活动，因此他不想要任何已经在市场上的昂贵管理软件。我筛选了很多文档，只找到了 wxHaskell，但在捕获屏幕方面我找不到太多，尤其是对于 Windows 环境。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-15T09:29:05.800

Tikhon 提到的方法是正确的。只是在他上面给出的答案中添加一些代码

```
import Graphics.Win32.Window
import Graphics.Win32.GDI.Bitmap
import Graphics.Win32.GDI.HDC
import Graphics.Win32.GDI.Graphics2D

main = do desktop   <- getDesktopWindow -- Grab the Hwnd of the desktop, GetDC 0, GetDC NULL etc all work too
          hdc       <- getWindowDC (Just desktop) -- Get the dc handle of the desktop
          (x,y,r,b) <- getWindowRect desktop -- Find the size of the desktop so we can know which size the destination bitmap should be
                                             -- (left, top, right, bottom)
          newDC     <- createCompatibleDC (Just hdc) -- Create a new DC to hold the copied image. It should be compatible with the source DC
          let width  = r - x -- Calculate the width
          let height = b - y -- Calculate the Height
          newBmp    <- createCompatibleBitmap hdc width height -- Create a new Bitmap which is compatible with the newly created DC
          selBmp    <- selectBitmap newDC newBmp -- Select the Bitmap into the DC, drawing on the DC now draws on the bitmap as well
          bitBlt newDC 0 0 width height hdc 0 0 sRCCOPY -- use SRCCOPY to copy the desktop DC into the newDC
          createBMPFile "Foo.bmp" newBmp newDC  -- Write out the new Bitmap file to Foo.bmp
          putStrLn "Bitmap image copied" -- Some debug message
          deleteBitmap selBmp -- Cleanup the selected bitmap
          deleteBitmap newBmp -- Cleanup the new bitmap
          deleteDC newDC      -- Cleanup the DC we created. 
```

这只是快速组合在一起，但它将屏幕截图保存到名为 Foo.bmp 的文件中。附言。对于编写 Win32 库的人来说，做得很好:)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-15T15:46:49.140

[您也可以使用GTK](http://hackage.haskell.org/package/gtk)以跨平台的方式进行。

这与使用 C 进行操作没有太大区别：[使用 C/GTK 截屏](https://stackoverflow.com/questions/3124229/taking-a-screenshot-with-c-gtk)。

```
{-# LANGUAGE OverloadedStrings #-}

import Graphics.UI.Gtk
import System.Environment
import Data.Text as T

main :: IO ()
main = do
    [fileName] <- getArgs
    _ <- initGUI
    Just screen <- screenGetDefault
    window <- screenGetRootWindow screen
    size <- drawableGetSize window
    origin <- drawWindowGetOrigin window
    Just pxbuf <-
        pixbufGetFromDrawable
            window
            ((uncurry . uncurry Rectangle) origin size)
    pixbufSave pxbuf fileName "png" ([] :: [(T.Text, T.Text)]) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-15T04:23:21.677

您应该能够使用 Win32 API 执行此操作。基于[在 Windows 中使用 C++ 截取窗口的最佳方法是什么？](https://stackoverflow.com/questions/531684/what-is-the-best-way-to-take-screenshots-of-a-window-with-c-in-windows)`GetWindowDC`，您需要获取窗口的上下文，然后分别使用和从中复制图像`BitBlt`。

查看 Haskell Win32 API 文档，`getWindowDC`在[`Graphics.Win32.Window`](http://hackage.haskell.org/packages/archive/Win32/2.2.2.0/doc/html/Graphics-Win32-Window.html). 这将返回一个`IO HDC`. 中有一个`bitblt`函数[`Graphics.Win32.GDI.Graphics2D`](http://hackage.haskell.org/packages/archive/Win32/2.2.2.0/doc/html/Graphics-Win32-GDI-Graphics2D.html)。这个函数需要一个s`HDC`和一堆`INT`s，这些 s 大概对应于它在[C++](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183370(v=vs.85).aspx)中的参数。

不幸的是，我手边没有 Windows 机器，所以我无法编写实际代码。您必须自己弄清楚如何使用 Win32 API 函数，这可能有点麻烦。

当你这样做的时候，如果你把它放入一个库并将它放在 Hackage 上，那就太好了——Windows 在 Haskell 领域通常不会得到太多的喜爱（正如我自己展示的那样：P），所以我相信其他 Windows 程序员将不胜感激一种简单的方法来截取屏幕截图。

# php - 无法在 symfony2 控制器中获取当前登录的用户

> ID：11963562
> 
> 赞同：0
> 
> 时间：2012-08-15T02:59:04.153
> 
> 标签：php, symfony, doctrine-orm

我在控制器中有这段代码

```
public function newAction()
    {
$em = $this->getDoctrine()->getEntityManager();
$user = $this->container->get('security.context')->getToken()->getUser(); 
```

我收到此错误

> 致命错误：在第 86 行的 /home/xxxxx/Acme/UserBundle/Controller/UserController.php 中的非对象上调用成员函数 getUser()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T04:55:55.547

这意味着您的安全上下文未填充令牌。当您的操作的路由不在防火墙后面时，就会发生这种情况。

你应该检查你的防火墙模式`security.yml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:54:42.480

1.  确保您使用 Symfony 调试栏登录。如果您可以看到那里已记录，那么它应该可以正常工作

2.  还要看看该路径是否在防火墙后面。如果它不是即使您已登录但您不会获得用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T06:19:05.617

我遇到了同样的问题。我的错误如下：

安全.yml

```
access_control:
    - { path: ^/admin/*, roles: ROLE_ADMIN } 
```

我不得不更改出现错误的控制器：

*路由.yml（坏）*

```
admin_bets:
    resource: "@adminBundle/Resources/config/routing/bets.yml"
    prefix:   /bets 
```

对此：

*路由.yml（好）*

```
admin_bets:
    resource: "@adminBundle/Resources/config/routing/bets.yml"
    prefix:   /admin/bets 
```

# java - 使用 Scanner 读取 UTF-8 字符

> ID：11963563
> 
> 赞同：2
> 
> 时间：2012-08-15T02:59:09.220
> 
> 标签：java, utf-8, io

```
public boolean isValid(String username, String password)  {
        boolean valid = false;
        DataInputStream file = null;

        try{
            Scanner files = new Scanner(new BufferedReader(new FileReader("files/students.txt")));

            while(files.hasNext()){
                System.out.println(files.next());
            }

        }catch(Exception e){
            e.printStackTrace();
        }
        return valid;
    } 
```

当我读取一个由 UTF-8（由另一个 java 程序）编写的文件时，它为什么会显示奇怪的符号，后跟它的字符串名称？

```
I wrote it using this

    private static void  addAccount(String username,String password){
        File file = new File(file_name);
        try{
            DataOutputStream dos = new DataOutputStream(new FileOutputStream(file,true));
            dos.writeUTF((username+"::"+password+"\n"));
        }catch(Exception e){

        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-05-03T04:06:17.160

这是一个简单的方法：

```
File words = new File(path);
Scanner s = new Scanner(words,"utf-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:35:09.010

使用[`DataOutput.writeUTF`](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutput.html#writeUTF%28java.lang.String%29)/[`DataInput.readUTF`](http://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#readUTF%28%29)时，前 2 个字节形成一个无符号 16 位大端整数，表示字符串的大小。

> 首先，两个字节被读取并用于构造一个无符号的 16 位整数，完全按照方法的`readUnsignedShort`方式。这个整数值称为*UTF 长度*，并指定要读取的附加字节数。然后通过分组考虑将这些字节转换为字符。每个组的长度是根据组的第一个字节的值计算的。组后面的字节（如果有的话）是下一组的第一个字节。

这些可能是您的问题的原因。您需要跳过前 2 个字节，然后指定`Scanner`使用 UTF-8 才能正确读取。

话虽如此，我看不出有任何理由在这里使用`DataOutput`/ `DataInput`。您只能使用`FileReader`and`FileWriter`代替。这些将使用默认的系统编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T03:07:53.017

来自`FileReader`Javadoc：

> 读取字符文件的便利类。此类的构造函数假定默认字符编码和默认字节缓冲区大小是适当的。要自己指定这些值，请在 FileInputStream 上构造 InputStreamReader。

所以也许像`new InputStreamReader(new FileInputStream(file), "UTF-8"))`

# sql - 尝试查找不同数据时返回相同的结果

> ID：11963564
> 
> 赞同：1
> 
> 时间：2012-08-15T02:59:10.723
> 
> 标签：sql, database, postgresql, date, postgresql-8.4

我可以从下面的查询中获取每年的日期范围数据`15/02`。`21/06`

```
SELECT * FROM dim_date
WHERE EXTRACT (MONTH FROM date_cal) BETWEEN 3 AND 5
 OR (EXTRACT (MONTH FROM date_cal) = 2 AND EXTRACT (DAY FROM date_cal) >= 15)
 OR (EXTRACT (MONTH FROM date_cal) = 6 AND EXTRACT (DAY FROM date_cal) <= 21) 
```

但问题是，当我想从 year 中查找时`2010 - 2012`，我得到了相同的结果。

我想得到的范围：

```
2010-02-15 - 2010-06-15
2011-02-15 - 2011-06-15
2012-02-15 - 2012-06-15

SELECT * FROM dim_date
WHERE EXTRACT (MONTH FROM date_cal) BETWEEN 3 AND 5
 OR (EXTRACT (MONTH FROM date_cal) = 2 AND EXTRACT (DAY FROM date_cal) >= 15)
 OR (EXTRACT (MONTH FROM date_cal) = 6 AND EXTRACT (DAY FROM date_cal) <= 21)
AND EXTRACT (YEAR FROM date_cal) BETWEEN 2010 AND 2012 
```

谁能帮我解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:08:48.013

您的问题是缺少括号：在 SQL`AND`中优先于`OR`，因此您需要在整个先前的表达式周围加上括号：

```
SELECT * FROM dim_date
WHERE ( -- added bracket
 EXTRACT (MONTH FROM date_cal) BETWEEN 3 AND 5
 OR (EXTRACT (MONTH FROM date_cal) = 2 AND EXTRACT (DAY FROM date_cal) >= 15)
 OR (EXTRACT (MONTH FROM date_cal) = 6 AND EXTRACT (DAY FROM date_cal) <= 21)
 ) -- added bracket
AND EXTRACT (YEAR FROM date_cal) BETWEEN 2010 AND 2012 
```

没有括号，你会得到`A or B or (C and D)`，但你想要`(A or B or C) and D`

# css - CSS3 旋转开始慢然后结束慢？

> ID：11963569
> 
> 赞同：2
> 
> 时间：2012-08-15T03:00:04.723
> 
> 标签：css, css-animations

这不是一个可以通过使用来解决的问题`ease-in`。

如果我有一个元素，我想在 CSS3 中旋转一段时间，但开始很慢，结束很慢，我该怎么做？

CSS

```
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

div{
  background-image:-webkit-radial-gradient(center, ellipse cover, rgba(0,0,0,1) 0%,rgba(51,51,51,1) 20%,rgba(0,0,0,1) 20%,rgba(51,51,51,1) 40%,rgba(0,0,0,1) 40%,rgba(51,51,51,1) 60%,rgba(0,0,0,1) 60%,rgba(51,51,51,1) 80%,rgba(0,0,0,1) 80%,rgba(51,51,51,1) 100%);
  width: 200px;
  height: 200px;
  -webkit-animation-name: spin; 
  -webkit-animation-duration: 2s;
  -webkit-animation-iteration-count: 60.5;
  -webkit-animation-timing-function: ease-in;
} 
```

HTML

```
<div></div> 
```

我似乎无法弄清楚如何做到这一点。我的动画总共运行了 121 秒，因为完成一次旋转需要 2 秒，所以 60.5 次旋转总共需要 121 秒（如果我的数学不正确，请告诉我）。这工作正常，除了我希望 div 开始缓慢旋转，然后完成所有 59 次旋转，然后在最后一次缓慢结束。

如果可能的话，我想为此使用纯 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:12:50.567

抱歉，我没有 JSFiddle ......

**编辑**：我在实验中使用了一个相对的解决方案：[CSS3 Clock](http://passerby.heliohost.org/clock/)，这可以算作半小提琴吗？:D

**编辑#2**：@Charlie 提供的 JSFiddle：http: [//jsfiddle.net/7DPnc](http://jsfiddle.net/7DPnc)

如果它真的必须是纯 CSS，我建议将 3 `div`s 包装在一起并分别旋转它们：

CSS

```
div.first_round
{
-webkit-animation-duration:3s;
-webkit-animation-iteration-count:1;
}
div.last_round
{
-webkit-animation-duration:3s;
-webkit-animation-iteration-count:1.5;
-webkit-animation-delay:100s; /* you'll have to do the math */
}
div.main_round
{
-webkit-animation-duration:2s;
-webkit-animation-delay:3s;
-webkit-animation-iteration-count:59;
-webkit-animation-timing-function:linear;
} 
```

HTML

```
<div class="first_round">
<div class="last_round">
<div class="main_round">
</div>
</div>
</div> 
```

或者，如果您不介意使用一点 JS，请听`animationend`事件...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T17:41:20.743

您需要在 120 秒内旋转 60 次，对吗？

让我们首先将迭代计数更改为 1。

```
-webkit-animation-iteration-count:1; 
```

持续时间为 120 秒

```
-webkit-animation-duration: 120s; 
```

现在设置旋转的数量。（360 度 x 60 转）

```
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(21600deg); }
} 
```

现在我们将对其进行修改以设置时间。（每边剃掉一个旋转，添加到新部分）

```
@-webkit-keyframes spin {
  10% { -webkit-transform: rotate(360deg); }
  90% { -webkit-transform: rotate(20880deg); }
  100% { -webkit-transform: rotate(21600deg); }
} 
```

最后，我们将缓动函数设置为线性，以避免在使用曲线时在关键帧部分之间发生停止。（轻松替换，缓出等，看看我的意思）

```
-webkit-animation-timing-function: linear; 
```

您可以通过更改持续时间和关键帧百分比轻松调整时间。

[演示](http://codepen.io/anon/pen/koGKw)

# jquery - 附加 CSS 在 IE8 中无法正常工作

> ID：11963572
> 
> 赞同：1
> 
> 时间：2012-08-15T03:00:26.310
> 
> 标签：jquery, css

```
$("head").append('<link href="xxx.css" rel="stylesheet" type="text/css"/>'); 
```

我发现这个片段在 IE 8 中不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T03:16:01.263

根据jquery 网站上的[这个](http://bugs.jquery.com/ticket/12145)错误报告，IE8 中很可能存在将 css 文件附加到包含相对链接的 dom 的问题。

该错误的发布者建议按如下方式添加它可能会起作用：

```
 var style = document.createElement("link");
    style.setAttribute("type", "text/css");
    style.setAttribute("rel", "stylesheet");
    style.setAttribute("href", "xxx.css");
    jQuery("head")[0].appendChild(style); 
```

或者使用绝对 url 也可以工作：

```
 $('<link rel="stylesheet" type="text/css" href="http://yoursite.com/css/xxx.css">').appendTo('head'); 
```

​</p>

尽管他接着说附加的 css 文件中通过 @import 包含的任何文件也不会按预期加载。

我建议试一试这些测试用例，看看哪些内容适合您，哪些不适合（如果它有效，您应该在 HTML 窗口中获得灰色背景）：

OP问题中使用的方法：http: [//jsfiddle.net/vs5NC/20/](http://jsfiddle.net/vs5NC/20/)

我的回答中的第一个可能的解决方案：http: [//jsfiddle.net/vs5NC/17/](http://jsfiddle.net/vs5NC/17/)

我的回答中的第二种可能的解决方案：http: [//jsfiddle.net/vs5NC/19/](http://jsfiddle.net/vs5NC/19/)

如果这些都不起作用，那么 Chris Fulstow对类似问题的[回答可能是一个可行的解决方案。](https://stackoverflow.com/a/6079832/1171529)

# linux - MAC .bash_profile：按类型更改目录字符串颜色和文件名

> ID：11963576
> 
> 赞同：0
> 
> 时间：2012-08-15T03:00:36.323
> 
> 标签：linux, macos, unix, terminal, .bash-profile

我不确定这是否可能我在谷歌搜索但看起来我没有使用正确的搜索字符串。我们如何更改目录字符串、文件等的显示颜色？

示例：当我们执行 ls 时，我们可以更改 .bash_profile 脚本以显示红色的目录和黄色的文件吗？此外，我们可以根据文件类型更改文件颜色吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:06:21.700

是的你可以。利用

```
export CLICOLOR=true 
```

打开颜色之`ls`类的

```
export LSCOLORS=gxfxcxdxbxegedabagacad 
```

自定义每种文件类型的颜色。

类型

```
man ls 
```

有关如何`LSCOLORS`工作的说明。

# php - PHP将语义版本控制字符串转换为整数/浮点数

> ID：11963586
> 
> 赞同：2
> 
> 时间：2012-08-15T03:02:00.323
> 
> 标签：php, versioning, semantics

我有一个`string`变量`PHP`以语义版本控制格式存储我的应用程序的当前版本：

```
 $version = "0.2.6"; 
```

如何将其转换为整数或浮点数，我可以在其中比较使用`<` 和的版本`>`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T03:04:14.580

[`version_compare()`](http://php.net/manual/en/function.version-compare.php)php中有一个特殊的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-09T22:58:57.890

对不起，死灵，但现在有一个 packagegist 包[vierbergenlars/php-semver](https://packagist.org/packages/vierbergenlars/php-semver)可以包含在 composer.json 中。

# java - 使用 JavaMail API 时出现 SSLException

> ID：11963587
> 
> 赞同：1
> 
> 时间：2012-08-15T03:02:00.280
> 
> 标签：java, android, smtp, jakarta-mail, sslhandshakeexception

我正在使用 Java Mail API 来开发一个发送邮件的应用程序。如果我使用 yahoo 或 gmail 托管的邮件服务器，我可以成功发送邮件。但是，当我尝试使用自己的邮件服务器时，我无法发送邮件，可能导致失败的原因是什么？当我在我的设备中执行我的应用程序时，它显示“电子邮件未发送”，因此不会发生异常。请问我该如何更改我的程序，以便我可以成功地将我的应用程序连接到我的 smtp 服务器，或者我如何才能获得更多信息以显示因此我可以理解连接失败的原因。

这是我的程序：Sender.java

```
public class Sender extends Activity {

    Button Send;
    TextView text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sender);

        Send = (Button) findViewById(R.id.mail);
        text = (TextView) findViewById(R.id.textView1);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
        .permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        Send.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                new SendMail().execute();
            }
        });

    }

    private class SendMail extends AsyncTask<String, Void, Integer> 
    { 
        ProgressDialog pd = null;
        String error = null;
        Integer result;

        @Override 
        protected void onPreExecute() { 
            // TODO Auto-generated method stub 
            super.onPreExecute(); 
            pd = new ProgressDialog(Sender.this); 
            pd.setTitle("Sending Mail"); 
            pd.setMessage("Please wait..."); 
            pd.setCancelable(false); 
            pd.show(); 
        } 

        @Override  
        protected Integer doInBackground(String... params) {  
            // TODO Auto-generated method stub  

            MailSender sender = new MailSender("me@mysmtp.com", "password");  

            sender.setTo(new String[]{"you@mysmtp.com", "me@gmail.com"}); 
            sender.setFrom("me@mysmtp.com"); 
            sender.setSubject("Test mail"); 
            sender.setBody("This is the mail body"); 
            try { 
                if(sender.send()) { 
                    System.out.println("Message sent"); 
                    return 1; 
                } else {
                    return 2; 
                } 
            } catch (Exception e) {    
             error = e.getMessage(); 
             Log.e("SendMail", e.getMessage(), e);     
            } 
            return 3;  
        }  

        protected void onPostExecute(Integer result) { 
            pd.dismiss(); 
            if(error!=null) { 
                text.setText(error); 
            } 
            if(result==1) { 
                Toast.makeText(Sender.this, 
                    "Email was sent successfully.", Toast.LENGTH_LONG) 
                    .show(); 
            } else if(result==2) { 
                Toast.makeText(Sender.this, 
                    "Email was not sent.", Toast.LENGTH_LONG).show(); 
            } else if(result==3) { 
                Toast.makeText(Sender.this, 
                    "There was a problem sending the email.", 
                    Toast.LENGTH_LONG).show(); 
            } 
        } 
    }  
} 
```

MailSender.java

```
public class MailSender extends Authenticator { 
    private String user; 
    private String password; 

    private String [] to; 
    private String from; 

    private String port; 
    private String sport; 

    private String host; 

    private String subject; 
    private String body; 

    private boolean auth; 
    private boolean debuggable; 

    private Multipart multi; 

    public MailSender(){ 
        host = "web.mysmtp.com"; 
        port = "25"; 
        sport = "25"; 

        user = ""; 
        password = ""; 
        from = ""; 
        subject = ""; 
        body = ""; 

        debuggable = false; 
        auth = true; 

        multi = new MimeMultipart(); 

        // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();  
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");  
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");  
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");  
        CommandMap.setDefaultCommandMap(mc);  
    } 

    public MailSender(String user, String password){ 
        this();       
        this.user = user; 
        this.password = password;    
    } 

    public boolean send() throws Exception { 
        Properties props = setProperties(); 

        try{ 
            Session session = Session.getInstance(props, this); 
            session.setDebug(true); 

            MimeMessage msg = new MimeMessage(session); 

            msg.setFrom(new InternetAddress(from)); 

            InternetAddress[] addressTo = new InternetAddress[to.length]; 
            for(int i=0; i<to.length; i++){ 
                addressTo[i] = new InternetAddress(to[i]); 
            } 

            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 
            msg.setSubject(subject); 
            msg.setSentDate(new Date()); 

            BodyPart messageBodyPart = new MimeBodyPart(); 
            messageBodyPart.setText(body); 
            multi.addBodyPart(messageBodyPart); 

            msg.setContent(multi); 

            Transport transport = session.getTransport("smtps"); 
            transport.connect(host, 25, user, password); 
            transport.sendMessage(msg, msg.getAllRecipients()); 
            transport.close(); 
            return true; 
        } catch (Exception e) { 
            e.printStackTrace(); 
            return false; 
        } 
    } 

    public void addAttachment(String filename) throws Exception { 
        BodyPart messageBodyPart = new MimeBodyPart(); 
        DataSource source = new FileDataSource(filename); 
        messageBodyPart.setDataHandler(new DataHandler(source)); 
        messageBodyPart.setFileName(filename); 

        multi.addBodyPart(messageBodyPart); 
    } 

    @Override  
      public PasswordAuthentication getPasswordAuthentication() {  
        return new PasswordAuthentication(user, password);  
      } 

    private Properties setProperties() { 
        Properties props = new Properties(); 

        props.put("mail.smtp.host", host); 

        if(debuggable) { 
            props.put("mail.debug", "true"); 
        } 

        if(auth) { 
            props.put("mail.smtp.auth", "true"); 
        } 

        props.put("mail.smtp.port", port); 
        props.put("mail.smtp.socketFactory.port", sport); 
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
        props.put("mail.smtp.socketFactory.fallback", "false"); 

        return props; 
    } 

    public void setTo(String[] toAddress) { 
        this.to = toAddress; 
    } 

    public void setFrom(String fromAddress) { 
        this.from = fromAddress; 
    } 

    public void setSubject(String subject) { 
        this.subject = subject; 
    } 

    public void setBody(String body) {  
        this.body = body;  
    } 
} 
```

错误日志中的错误消息：

```
08-15 11:21:37.284: W/System.err(2553):     javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x5c075548: Failure in SSL library, usually a protocol error
08-15 11:21:37.291: W/System.err(2553): Caused by: javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x5c075548: Failure in SSL library, usually a protocol error
08-15 11:21:37.299: W/System.err(2553): Caused by: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x5c075548: Failure in SSL library, usually a protocol error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:07:38.260

您正在连接到端口 25 并使用 SSL。端口 25 是非 SSL（纯文本）端口。假设您的服务器设置为使用 SSL，请使用不需要您指定端口号的连接方法并让 JavaMail 使用默认端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:49:57.543

您的 SMTP 服务器的 SSL 配置将是我要检查的第一件事。如果您的课程与外部服务一起使用，那么它就是您的服务器的安全配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T04:05:44.290

您可能会收到该错误，因为您没有在服务器端创建签名证书。如果您确实设置了 SSL 验证，则说明您没有正确设置，或者您正在连接到其证书尚未添加到信任库的服务器。

这篇文章（[我如何通过 Android 访问 SSL 连接？](https://stackoverflow.com/questions/6441158/how-can-i-access-an-ssl-connection-through-android)）通过代码示例回答了如何初始化密钥库和信任库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T05:45:59.670

Java Mail API 会导致很多问题，[这](http://lifeinide.com/post/2012-08-22-javax-mail-ssl-examples/)是我最近使用几个不同的邮件服务器测试的各种 pop3/smtp 连接的工作示例。

# ruby-on-rails - 用 Rails 思考 Sphinx：我应该在我的 git push 中包含这些文件吗？

> ID：11963589
> 
> 赞同：2
> 
> 时间：2012-08-15T03:02:28.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git, sphinx, thinking-sphinx

我在我的 Rails 应用程序中收到了很多未跟踪/修改过的文件：

```
db/sphinx/development/user_core.spa
db/sphinx/development/user_core.spd
db/sphinx/development/book_core.sph
db/sphinx/development/book_core.spi
db/sphinx/development/book_core.spp
db/sphinx/development/book_core.sps 
```

等等

我应该在提交和推送 git 时包含这些，还是应该将 db/sphinx/development/* 放在我的 .gitignore 文件中？

--得到下面的答案后编辑--

我最终将它添加到我的 .gitignore 文件中......

```
# Ignore certain Sphinx files
/db/sphinx/*
/config/*.sphinx.conf 
```

...然后执行此处推荐的操作：[忽略已提交到 Git 存储库的文件](https://stackoverflow.com/questions/1139762/gitignore-file-not-ignoring)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:18:36.687

您应该将它们添加到 .gitignore。它们类似于数据库文件。我认为您可能想要签入的唯一 sphinx 特定文件是`config/sphinx.yml`文件，假设它不包含任何敏感信息。

# iphone - iOS 无法将 URL 内容存储到数组中

> ID：11963591
> 
> 赞同：0
> 
> 时间：2012-08-15T03:02:32.010
> 
> 标签：iphone, ios, xml, nsurlconnection

我必须连接到一个 URL 以检查记录是否为空。响应看起来像这样：

```
<?xml version = "1.0" encoding = "UTF-8"?>
<find>
<record_id>1234</record_id>
<no_record>00001</no_record>
<entry_num>00001</entry_num>
<session-id>aijheifaohqrihelrkqn324tlejaofjaf</session-id>
</find> 
```

我的代码：

```
 NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init]
                                                autorelease];
                [request setURL:[NSURL URLWithString: finalSearchURL]];

                // Content-Type related.
                [request setValue:@"application/x-www-form-urlencoded"
               forHTTPHeaderField:@"Content-Type"];

                // Create Connection.
                NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];

                if (conn) {
                    // The connection was established.
                    NSMutableData *receivedData =  [[NSMutableData alloc] initWithContentsOfURL:[NSURL URLWithString:request]];
                    NSLog( @"Data will be received from URL: %@", request.URL );
                    NSLog(@"Recieved Data 2: %@", receivedData);
                }
                else
                {
                    // The download could not be made.
                    NSLog( @"Data could not be received from: %@", request.URL );
                } 
```

但它返回给我：

```
Recieved Data : <3c3f786d 6c207665 7273696f 6e203d20 22312e30 2220656e 636f6469 6e67203d 20225554 462d3822 3f3e0a3c 66696e64 3e0a3c73 65745f6e 756d6265 723e3031 39303633 3c2f7365 745f6e75 6d626572 3e0a3c6e 6f5f7265 636f7264 733e3030 30303030 3030313c 2f6e6f5f 7265636f 7264733e 0a3c6e6f 5f656e74 72696573 3e303030 30303030 30313c2f 6e6f5f65 6e747269 65733e0a 3c736573 73696f6e 2d69643e 4d505843 33323433 58564336 4534454a 41464232 45473541 39374237 584e3832 43554631 4e314234 584e4c37 424c5947 4e533c2f 73657373 696f6e2d 69643e0a 3c2f6669 6e643e0a 20> 
```

谁能帮忙告诉我我做错了什么？这是我第一次尝试从网址获得回复，请帮助谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:18:40.917

实际上，您的代码正在返回正确的数据。由于 NSData 可以保存任何类型的数据，它只会显示十六进制值。如果将十六进制数据转换为字符串，您会看到它具有正确的文本。

现在，您的代码可以简化很多。根本不需要设置 NSURLConnection 的所有代码。您只需要以下行。

```
NSString *recievedText = [NSString stringWithContentsOfFile:finalSearchURL encoding:NSUTF8StringEncoding error:NULL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:44:23.680

以这种方式将数据视为字符串：

```
NSString *string = [[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding];
NSLog(@"the xml string is %@", string); 
```

如果解析目标足够简单——比如只找到一个标签的值——你可以使用字符串方法来解析。否则，可以使用 NSXMLParser 或[其他几个选项](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)。

要查看字符串是否包含子字符串，您可以执行以下操作：

```
if (string) {
    NSRange range = [string rangeOfString:@"<session-id>"];
    if (range.location != NSNotFound) {
        // session-id tag is at index range.location, so we know it's there
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T03:16:41.977

您使用的方法是从 url 获取原始数据。您需要一个解析器将原始数据转换为可理解的结构（可能是 NSDictionary 而不是 NSArray）。

Apple 提供了[NSXMLParser](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)供您从 url 检索 xml 结构，或者您可以找到其他 xml 解析器库。

# newsstand-kit - 报亭杂志如何

> ID：11963595
> 
> 赞同：0
> 
> 时间：2012-08-15T03:02:51.423
> 
> 标签：newsstand-kit

我需要为客户开发一个报亭应用程序。我在报亭上看过教程。我的问题是，在你为报亭制作应用程序之后，你如何提供每期的内容？
我的客户想要 GQ 杂志提供的相同 UI 体验，这是一本交互式杂志（视频、展开文本的按钮）

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:27:33.033

对于报亭，最好通过从您的服务器下载来提供问题。不要将它们与应用程序捆绑在一起，因为每次添加问题时都需要对应用程序进行审查。

对于付费杂志，您必须为每一期创建非消耗性应用内购买。如果您不想使用某些 CDN，则可以使用[Apple 托管您的内容。](https://stackoverflow.com/questions/11028183/whats-hosting-content-with-apple)

您仍然需要某种网络服务来：

*   提供 iOS 应用的问题列表
*   提供问题内容
*   当有新问题可用时发送推送通知
*   提供[报亭提要](https://itunesconnect.apple.com/docs/NewsstandAtomFeedSpecification.pdf)以自动更新 App Store 中可见的问题
*   验证来自 App Store 的收据

付费杂志 iOS 应用的简化“算法”如下所示：

1.  从服务器获取当前问题并与本地副本同步
2.  从 App Store 获取问题价格（为每个问题创建**SKProductsRequest ）**
3.  向用户展示问题
4.  当用户执行购买时，验证收据并开始下载内容
5.  如果用户购买了订阅，则允许免费访问所有问题（但请继续检查订阅是否仍然有效）

如果工作量太大，您可能需要使用一些[现有的解决方案](https://hackpad.com/Companies-that-work-with-tablet-publishing-Q3tU3clFZ0j)（免责声明：我共同创立了 Issue Stand 并正在审核此列表）。

# java - Java：程序启动时出现ExceptionInInitializerError

> ID：11963597
> 
> 赞同：6
> 
> 时间：2012-08-15T03:03:26.793
> 
> 标签：java, static, nullpointerexception, static-methods

启动时，我的程序立即抛出 ExceptionInInitializerError。来源来自这个方法：

```
public static void errorMessage(String input) {
    System.err.println("[ERROR] " + form.format(date) + " - " + Thread.currentThread().getStackTrace()[3].getClassName() + ": " + input);
} 
```

我打印出字符串的不同部分，发现只有在调用form.format(date)时才会抛出错误。它说它是空的。唯一的问题是，日期和表单都在此方法上方静态声明，如下所示：

```
public static Date date = new Date();
public static DateFormat form = new SimpleDateFormat("HH:mm:ss"); 
```

在修复了一些小错误后，错误突然开始抛出。我不知道出了什么问题，也不知道这有什么问题。我的意思是，我在同一个类中调用静态声明的变量。从技术上讲，它们不应该为空，但它们确实是。任何人都有任何想法为什么会引发此错误？这是控制台输出：

```
java.lang.ExceptionInInitializerError
at A$$OpSystem.getOperatingSystem(A$.java:98)
at A_.<clinit>(A_.java:19)
Caused by: java.lang.NullPointerException
at A$.errorMessage(A$.java:72)
at A$.loadCursor(A$.java:84)
at A$.<clinit>(A$.java:62)
... 2 more
Exception in thread "main" 
```

顺便说一句，A$.OpSystem.getOperatingSystem 只显示在那里，因为它调用了 A$.errorMessage...

我之前也遇到过这个问题，只是当一个静态声明的变量实际上从未被声明为在调用时保持为空。现在它不应该为空，但它是。所以我不知道是什么原因造成的。想法？

但我想这是了解静态变量如何实际加载的好时机......

编辑：如果我将调用“loadCursor”的静态光标对象移动到不同的类，似乎不会引发异常。什么？

我对这种情况进行了测试，但它没有返回错误？

```
public class StaticMethodTesting {

public static int i = getInt();

public static int getInt() {
    return getAnotherInt();
}

public static int getAnotherInt() {
    return 0;
}

public static void main(String[]args) {
    System.out.println("Hi");
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T03:24:20.627

检查您的异常跟踪后...

```
at A$.errorMessage(A$.java:72)
at A$.loadCursor(A$.java:84)
at A$.< clinit>(A$.java:62) 
```

很明显，一些静态字段初始化 in在初始化and和调用`A$`之前执行，然后在逻辑上失败as并且未初始化。`date``form``loadCursor``NullPointerException``date``form`

问题是您已将初始化您的代码放在初始化您的和对象的代码`Cursor`之前。[根据 Java Language Specification 的第 8.3.2.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.1)，在声明时具有赋值的静态字段按声明顺序初始化。`date``form`

如果您阅读详细的初始化过程，尤其是[第 §12.4.2.9 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)，您会发现...

> **接下来，按文本顺序**执行类的类变量初始化程序和静态初始化程序，或者接口的字段初始化程序，就好像它们是一个块一样。

* * *

所以，你可能会做这样的事情：

```
static Cursor cursor = loadCursor();
static Date date = new Date();
static DateFormat form = new SimpleDateFormat("HH:mm:ss");

static Cursor loadCursor() {
  ...
  errorMessage("...");
  ...
} 
```

`loadCursor`**如果**您希望它工作，则不能在之前调用`date`并初始化。`form`

* * *

您的示例没有产生*“错误”*（嗯？）的原因是因为这两种方法都没有引用尚未初始化的字段。如果您想要绝不是错误的等效行为，请参阅以下内容（可以在[此处](http://ideone.com/PbIkC)运行）：

```
import java.util.Random;

public final class Example {

  /* note if the below read: static final int value = rand.nextInt(),
     this would be considered an illegal forward reference to rand */
  private static final int value = next();
  private static final Random rand = new Random();

  private static int next() {
    return rand.nextInt();
  }

  public static void main(final String[] argv) { }
} 
```

可以看到输出如下。

```
Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
        at Example.next(Example.java:11)
        at Example.<clinit>(Example.java:7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:14:09.193

我想你会发现问题在这里发生

```
Thread.currentThread().getStackTrace()[3].getClassName() 
```

您可能需要做更多类似的事情

```
StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();
String className = stackTrace[Math.min(3, stackTrace.length - 1)].getClassName(); 
```

或类似的：P

# sql - 用 UNION 和 LEFT JOIN 选择

> ID：11963599
> 
> 赞同：1
> 
> 时间：2012-08-15T03:03:42.183
> 
> 标签：sql

大家好，我一直在尝试将这个 sql 搜索查询用于我的网站搜索工具，它应该按相关性进行搜索和排序。它在没有左连接的情况下工作，我无法让它与左连接一起工作。这是 SQL 查询。

```
SELECT bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
       bl_bands.bandpage as bandpage, sum(relevance)
FROM bl_albums 
LEFT JOIN(
  SELECT  bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
          bl_bands.bandpage as bandpage,10 AS relevance 
  FROM bl_albums 
  WHERE bl_albums.name like 'Camera'
  UNION
  SELECT bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
         bl_bands.bandpage as bandpage, 7 AS relevance 
  FROM bl_albums 
  WHERE bl_albums.name like 'Camera%'
  UNION
  SELECT  bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
          bl_bands.bandpage as bandpage, 5 AS relevance 
  FROM bl_albums 
  WHERE bl_albums.name like '%Camera'
  UNION
  SELECT bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
         bl_bands.bandpage as bandpage, 2 AS relevance 
  FROM bl_albums 
  WHERE bl_albums.name like '%Camera%'
)  bl_bands on bl_albums.bandid = bl_bands.id
GROUP BY bl_albums.name
ORDER BY relevance desc 
```

所有表名都正确，所有列名都正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:07:22.680

您命名为“bl_bands”的子查询没有 bl_bands.id，因为所有联合联接都不包含 bl_bands 表。如果我对您所有数据的假设是正确的，请尝试向每个联合添加连接：

```
SELECT
    bl_albums.*,
    bl_bands.name as bandname,
    bl_bands.id as bandid, 
    bl_bands.bandpage as bandpage,
    sum(relevance)
FROM
    bl_albums 
    LEFT JOIN(
      SELECT  bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
              bl_bands.bandpage as bandpage,10 AS relevance 
      FROM bl_albums
        JOIN bl_bands ON bl_bands.id = bl_albums.bandid 
      WHERE bl_albums.name like 'Camera'
      UNION
      SELECT bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
             bl_bands.bandpage as bandpage, 7 AS relevance 
      FROM bl_albums 
        JOIN bl_bands ON bl_bands.id = bl_albums.bandid
      WHERE bl_albums.name like 'Camera%'
      UNION
      SELECT  bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
              bl_bands.bandpage as bandpage, 5 AS relevance 
      FROM bl_albums 
        JOIN bl_bands ON bl_bands.id = bl_albums.bandid
      WHERE bl_albums.name like '%Camera'
      UNION
      SELECT bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
             bl_bands.bandpage as bandpage, 2 AS relevance 
      FROM bl_albums 
        JOIN bl_bands ON bl_bands.id = bl_albums.bandid
      WHERE bl_albums.name like '%Camera%'
    ) bl_bands ON bl_albums.bandid = bl_bands.id
GROUP BY bl_albums.name
ORDER BY relevance desc 
```

看起来您可能已经复制/粘贴了一些 SELECT 语句/列名，但没有添加获得结果所需的加入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:20:01.423

我不相信这个查询曾经奏效。内部查询没有意义。例如

```
SELECT  bl_albums.*, bl_bands.name as bandname, bl_bands.id as bandid, 
      bl_bands.bandpage as bandpage,10 AS relevance 
FROM bl_albums 
WHERE bl_albums.name like 'Camera' 
```

此查询包含许多以 bl_bands 为前缀的字段，但该表不包含在 from 语句或连接中。

# android - Android StrictMode 政策

> ID：11963601
> 
> 赞同：4
> 
> 时间：2012-08-15T03:03:48.137
> 
> 标签：android, android-strictmode

使用 android 应用程序遇到一些 ANR 问题，因此我实施了 StrictMode 策略。以前从未使用过，因此希望有人可以帮助解释以下内容：

为什么除了前 4 行和持续时间的差异之外，日志显示 2 个看似相似的违规行为？为什么还是有 2 次违规 - 这是否意味着代码被执行了两次？

任何帮助表示赞赏

```
08-15 14:24:14.314: DEBUG/StrictMode(767): StrictMode policy violation; ~duration=13876 ms: android.os.StrictMode$StrictModeDiskWriteViolation: policy=17 violation=1
    at android.os.StrictMode$AndroidBlockGuardPolicy.onWriteToDisk(StrictMode.java:732)
    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1791)
    at com.j256.ormlite.android.AndroidCompiledStatement.execSql(AndroidCompiledStatement.java:151)
    at com.j256.ormlite.android.AndroidCompiledStatement.runUpdate(AndroidCompiledStatement.java:70)
    at com.j256.ormlite.stmt.StatementExecutor.update(StatementExecutor.java:382)
    at com.j256.ormlite.dao.BaseDaoImpl.update(BaseDaoImpl.java:374)
    at conx.Repositories.JobRepository.update(JobRepository.java:381)
    at conx.Presenters.JobSchedulePresenter.onSave(JobSchedulePresenter.java:200)
    at conx.Activities.JobScheduleActivity.onSaveEvent(JobScheduleActivity.java:111)
    at conx.Activities.JobScheduleActivity.access$100(JobScheduleActivity.java:43)
    at conx.Activities.JobScheduleActivity$2.onChildClick(JobScheduleActivity.java:169)
    at android.widget.ExpandableListView.handleItemClick(ExpandableListView.java:588)
    at android.widget.ExpandableListView.performItemClick(ExpandableListView.java:527)
    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1877)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3835)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
    at dalvik.system.NativeStart.main(Native Method)

 08-15 14:24:14.314: DEBUG/StrictMode(767): StrictMode policy violation; ~duration=12086 ms: android.os.StrictMode$StrictModeDiskWriteViolation: policy=17 violation=1
    at android.os.StrictMode$AndroidBlockGuardPolicy.onWriteToDisk(StrictMode.java:732)
    at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:52)
    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1809)
    at com.j256.ormlite.android.AndroidCompiledStatement.execSql(AndroidCompiledStatement.java:151)
    at com.j256.ormlite.android.AndroidCompiledStatement.runUpdate(AndroidCompiledStatement.java:70)
    at com.j256.ormlite.stmt.StatementExecutor.update(StatementExecutor.java:382)
    at com.j256.ormlite.dao.BaseDaoImpl.update(BaseDaoImpl.java:374)
    at conx.Repositories.JobRepository.update(JobRepository.java:381)
    at conx.Presenters.JobSchedulePresenter.onSave(JobSchedulePresenter.java:200)
    at conx.Activities.JobScheduleActivity.onSaveEvent(JobScheduleActivity.java:111)
    at conx.Activities.JobScheduleActivity.access$100(JobScheduleActivity.java:43)
    at conx.Activities.JobScheduleActivity$2.onChildClick(JobScheduleActivity.java:169)
    at android.widget.ExpandableListView.handleItemClick(ExpandableListView.java:588)
    at android.widget.ExpandableListView.performItemClick(ExpandableListView.java:527)
    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1877)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3835)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:37:54.233

StrictMode 违规表明您正在导致 ANR 问题的 UI 线程上执行 SQLite 查询。

尝试在单独的线程上执行数据库交互，这将防止 ANR 问题并防止显示这些 StrictMode 违规。

从浏览该`LogCat`输出来看，它看起来像是发生在`conx.Activities.JobScheduleActivity.onSaveEvent`

**一些有用的阅读：**

*   [http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)
*   [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# sql - SQL - 如何在连接表中检索唯一值（nvarchar）？

> ID：11963611
> 
> 赞同：1
> 
> 时间：2012-08-15T03:05:18.087
> 
> 标签：sql, join, distinct

我正在尝试显示两个连接表的所有列，但仅从`antsDescriptionCode`数据类型为`nvarchar`.

有人可以帮忙吗？谢谢。

我当前的查询允许我在某些条件下显示两个连接表的所有列：

```
select c.*, a.* 
from cats c
join ants a on c.ctypeid = a.atypeid
where 
     (c.CatsNo like 'cat4%'
   or c.CatsNo like 'cat7%'
   or c.CatsNo like 'cat8%')
   and a.antsflagged = 0 
   and a.antsDescriptionCode in ('type a', 'type b', 'type  c')! 
```

[有关当前获取和预期输出的信息，请参阅图像](http://i.stack.imgur.com/sIVcz.png)

我正在使用 Microsoft SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:34:10.793

假设您使用的是 Microsoft SQL Server，您可以执行以下操作：

```
select * from (
select 
    c.*, a.*,
    row_number() over (partition by a.antsDescriptionCode order by CatsNo) [row]
from cats c
join ants a on c.ctypeid = a.atypeid
where 
     (c.CatsNo like 'cat4%'
   or c.CatsNo like 'cat7%'
   or c.CatsNo like 'cat8%')
   and a.antsflagged = 0 
   and a.antsDescriptionCode in ('type a', 'type b', 'type  c')
) q where q.row=1 
```

这将为您`catsno`提供每个 distinct 的第一行（按 排序）`antsDescriptionCode`。

它还将为您提供额外的`1`值列（称为“行”）。要摆脱这种情况，请将第一个替换`*`为实际的列列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:39:00.697

因为您要加入由两个表中的多行共享的任意`TypeID`数据，所以您需要进一步定义数据。除了它的类型之外，是什么决定了许多 Ant 行中的哪一个与该 Cat 相关联？您是否只想返回给定类型的最高 AntsID？进一步定义关系将创建一个更简单、更强大的解决方案。如果没有这个定义，这个问题的其他答案肯定就足够了。

# javascript - FileReader & FileWriter 问题 (cordova 2.0.0 js)

> ID：11963612
> 
> 赞同：0
> 
> 时间：2012-08-15T03:05:38.687
> 
> 标签：javascript, android, cordova

我一直在为 Android* 设备编写一段 PhoneGap (cordova-2.0.0.js) 代码，以保留一些数据。我收到了这个奇怪的错误代码，而且文件似乎没有被写入。我从示例代码开始，可以成功地将内联字符串写入文件句柄，因此我确定我的权限和所有权限都是正确的。

也许我没有正确处理所有回调？有很多要听的！可能是 truncate(0); 我很难找到很多关于它的文档。我需要多次调用 window.requestFileSystem 吗？我做了 2 次来注册不同的回调。如果不是这样，是什么导致了错误？

也很乐意接受有关减少读取 + 写入操作的总行数的建议...

*模拟器运行Android 2.3.4

这是我的代码：

```
var CREDENTIALS_FILE_NAME = "credentials.json";
var credentials;

// INIT -- Wait for PhoneGap to load
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, initCredentialReader, fail);
}
function initCredentialReader(fileSystem) {
    fileSystem.root.getFile(CREDENTIALS_FILE_NAME, {create: true}, gotFileEntryReader, fail); 
}
function gotFileEntryReader(fileEntry) {
    fileEntry.file(gotFileToRead, fail);
}
function gotFileToRead(file){
    var reader = new FileReader();
    reader.onloadend = function(e) {
        console.log("--FILE READER: "+e.target.result);

        if( e.target.result.length < 1 ) {
            credentials = newCredentials();
        } else {
            credentials = JSON.parse( e.target.result );
        }
    };
    reader.readAsText(file);
}
// END CHAIN

function initCredentialWriter(fileSystem) {
    fileSystem.root.getFile(CREDENTIALS_FILE_NAME, {create: true}, gotFileEntryWriter, fail); 
}
function gotFileEntryWriter(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}
function gotFileWriter(writer) {
    writer.onwrite = function(e) {
        console.log("--- write success");
    };
    var toWrite = JSON.stringify(credentials);
    console.log("--- toWrite: "+toWrite);
    writer.truncate(0);
    writer.seek(0);
    writer.write(toWrite);
}

function fail(error) {
    console.log("--- write FAIL: "+error.code);
}

function newCredentials() {
    console.log("returning newCredentials!");
    return {
        "username" : "",
        "password" : "",
        "organization" : "",
        "cookieValue" : "" };
}

function getCredentials() {
    console.log("--- getCredentials: "+credentials);
    return credentials;
}

function saveCredentials( jsonCredentials ) {
    console.log('--- saveCredentials jsonCredentials: '+ jsonCredentials);

    credentials = JSON.stringify( jsonCredentials );
    console.log('--- credentials to save: '+credentials)

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, initCredentialWriter, fail);
    return credentials;
} 
```

## 错误

> 08-14 18:41:38.839: I/Web Console(2678): 成功回调错误: File9 = {"code":7,"line":2863,"expressionBeginOffset":91407,"expressionEndOffset":91455," sourceId":4122528,"sourceURL":"file:///android_asset/www/cordova-2.0.0.js"} 在 file:///android_asset/www/cordova-2.0.0.js:258

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:43:31.880

因此，事实证明调用 truncate() 和 write() 不是异步正确的——只是实现了更多回调，如下所示：

```
function initCredentialTruncate(fileSystem) {
    fileSystem.root.getFile(CREDENTIALS_FILE_NAME, {create: true}, gotFileEntryTruncate, fail); 
}
function gotFileEntryTruncate(fileEntry) {
    fileEntry.createWriter(gotFileTruncate, fail);
}
function gotFileTruncate(writer) {
    writer.onwrite = function(e) {
        console.log("--- truncate success");
    };
    writer.truncate(0);
    //writer.seek(0);
}
// END CHAIN 
```

并在必要时调用 init 函数。谢谢你让我发泄，StackOverflow ......

# javascript - Django TinyMCE 拼写检查器在 Chrome、Safari 中无法正常工作

> ID：11963613
> 
> 赞同：1
> 
> 时间：2012-08-15T03:05:38.760
> 
> 标签：javascript, tinymce, spell-checking, django-tinymce

我在我的 django 应用程序中为我的表单使用 TinyMCE 编辑器。但是拼写检查插件在 Chrome（21.0.1180.79 版）和 Safari（5.1.7 版）中无法正常工作，但在 Firefox 中运行良好。[这里的“无法正常工作”意味着与 tinymce http://fiddle.tinymce.com/baaaab](http://fiddle.tinymce.com/baaaab)的全功能示例相比，拼写检查器的行为不像它应有的那样。我正在使用 django-tinymce v1.5.1b2 并且 /static/js/tiny_mce 中的 tinymce 版本是 3.5.6（基于 tiny_mce_src.js）

使用 Chrome/Safari 时，在单击“切换拼写检查”按钮之前键入的拼写错误的单词没有红色下划线（我必须单击这些单词才能使它们带有红色下划线）。禁用拼写检查功能后（再次单击按钮），拼写错误的单词中的红色下划线不会自动删除（再次，我必须单击单词才能使红色下划线消失）。

拼写检查功能在 Firefox 中效果很好，就像在全功能示例中一样。我认为这是一个javascript问题，但通过浏览器调试时我没有看到错误。任何帮助将不胜感激！

编辑：这是我的 tinymce 初始化代码：

```
tinyMCE.init({
mode : "textareas",
theme : "advanced",
width: "565", 
height: "150",
plugins : 'table,spellchecker,paste,searchreplace,autoresize',

theme_advanced_buttons1 : "bold,italic,underline,|,justifyleft,justifycenter,justifyright,|,outdent,indent,|,bullist,numlist,blockquote,|,formatselect,|,undo,redo,|,spellchecker,|,pastetext,pasteword,removeformat",
theme_advanced_buttons2: "",
theme_advanced_buttons3 : "",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align: "center",
theme_advanced_statusbar_location: "bottom",
theme_advanced_resizing: "true",
theme_advanced_resizing_min_width: "565",
theme_advanced_resizing_min_height: "150",
theme_advanced_resizing_max_width: "565",
theme_advanced_blockformats: "p,h2,h3,h4,h5,h6,blockquote",
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T23:00:02.360

*mezzanine*也有类似的问题，这是一个使用*django-grappelli*（实现 tinyMCE）的 Django CMS。我想这个解决方案也可以应用于您的案例。

我已经解决了将这两行放在`tinyMCE_setup.js`文件的 init 方法中：

```
 tinyMCE.init({
    // ...
    gecko_spellcheck : true,
    browser_spellcheck : true,
    // ...
}); 
```

这使用浏览器内的拼写检查（默认禁用）。第一行为 Chrome 和 Firefox 激活它，第二行使它也适用于 Safari。

# iphone - iPhone 图标在文档共享选项上有光泽

> ID：11963616
> 
> 赞同：0
> 
> 时间：2012-08-15T03:05:46.470
> 
> 标签：iphone, objective-c, ios, xcode

我声明我的应用程序接受来自其他应用程序的文件类型 ( [App-RelatedResources](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW2) )

这样做时，我必须指定要使用的图标，然后选择我的应用程序图标。我还在我的 info.plist 中指定了图标上不应该有光泽，并且确实没有在跳板上的图标上。但是，当它出现在我选择“打开”我的应用程序的弹出窗口中时，图标上有光泽。

任何想法哪些参数控制这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:27:19.357

要删除自动上光，请执行以下步骤：

1) 在 XCode 项目中按 cmd + 1

2) 在左侧面板中选择您的项目 -> 在中间面板中选择您的目标 -> 在右侧面板中选择信息选项卡

3）点击“+”并选择“图标已经包含光泽效果”并设置“是”

然后必须从您的图标中禁用任何自动光泽

# image - 图片的友好 URL

> ID：11963617
> 
> 赞同：1
> 
> 时间：2012-08-15T03:06:08.890
> 
> 标签：image, .htaccess, url, friendly-url

请建议我将什么放入`.htaccess`文件中。

我在服务器上有 PNG、GIF、JPG 图像`http://domain.tld/images/anyimage.anyextension`

想让 URL 像`http://domain.tld/anyimage.anyextension`

* * *

我现在有这个。如前所述，前两个字符串更改链接。但是最后一个字符串不会将其更改回服务器。

```
RewriteCond %{REQUEST_URI} ^/images/(.+)(\.gif|\.jpg|\.png)$ [NC]
RewriteRule ^image/(.+)$ /$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/(.+)$ /images/$1 [L] 
```

* * *

如果我添加

```
RewriteCond %{REQUEST_URI} ^/([^/.]+\.(png|gif|jpg))$ [NC]
RewriteCond %{DOCUMENT_ROOT}/image/%1 -f
RewriteRule ^([^/.]+\.(png|gif|jpg))$ /image/$1 [L,NC] 
```

在之前的查询字符串规则之后，图像不会打开。如果之前没有问题。它可能是什么？你知道如何解决它吗？最后一个字符串`RewriteRule ^/?(.+)$ /?$1 [L]`导致此冲突

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?([^\ ]+) [NC]
RewriteRule ^$ /%1? [R=301,L]
RewriteCond %{QUERY_STRING} ^$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?(.+)$ /?$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:06:43.650

不知道这如何使它更友好，除了它更短。您可以尝试将其添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/([^/.]+\.(png|gif|jpg))$ [NC]
RewriteCond %{DOCUMENT_ROOT}/images/%1 -f
RewriteRule ^([^/.]+\.(png|gif|jpg))$ /images/$1 [L,NC] 
```

然后您可以将所有链接从更改`http://domain.tld/images/anyimage.anyextension`为`http://domain.tld/anyimage.anyextension`

第一个条件检查以确保请求是 for `anyimage.anyextension`，只要扩展名是不区分大小写的 png、gif 或 jpg。

第二个条件检查以确保请求的图像确实存在于`/images/`目录中。

* * *

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /images/(.+)(\.gif|\.jpg|\.png) [NC]
RewriteRule ^image/(.+)$ /$1 [R=301,L] 
```

这会将浏览器重定向到非/image/ URL。这里发生了两件完全不同的事情。一个处理浏览器，另一个处理服务器上的内容。请参阅此答案的顶部，该部分[解释了它们的不同](https://stackoverflow.com/a/11711948/851273)之处。

你的规则是行不通的。第一的：

```
RewriteRule ^/(.+)$ /images/$1 [L] 
```

永远不会匹配。用于匹配 htaccess 文件中 RewriteRule 的正则表达式的 URI 删除了前导斜杠，因此没有 URI 会以`/`. 你需要摆脱它。

其次，一旦你这样做，你会得到一个 500 内部服务器错误，因为你的规则会导致内部无限循环。您需要进行匹配`%{THE_REQUEST}`以确保浏览器实际请求的是带有`/images/`路径的 URL，而不是内部重写的 URL。

# jquery - 如何在 jQuery datetimepicker 中获取 UTC 时间

> ID：11963621
> 
> 赞同：7
> 
> 时间：2012-08-15T03:06:52.330
> 
> 标签：jquery, datetimepicker

我正在使用这个[jQuery datetimepicker](http://trentrichardson.com/examples/timepicker/)来获取日期和时间数据。我能够得到大部分的东西（格式，显示等）。但是，我无法获得 UTC 格式的日期和时间。我只能以本地格式获取日期和时间。

有谁知道如何修改它以获取日期和时间？或删除弹出窗口中的“现在”按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T22:42:11.817

我今天遇到了同样的问题，发现了这个旧线程。单击“现在”按钮时，您可以覆盖 $.datepicker._gotoToday 以使用 UTC 时间。

```
//make the now button go to "now" in utc, not local
$.datepicker._gotoToday = function(id) {
  var inst = this._getInst($(id)[0]),
      $dp = inst.dpDiv;
  this._base_gotoToday(id);
  var tp_inst = this._get(inst, 'timepicker');
  //removed -> selectLocalTimeZone(tp_inst);
  var now = new Date();
  var now_utc = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),  now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());
  this._setTime(inst, now_utc);
  $('.ui-datepicker-today', $dp).click();
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-06T15:13:35.593

如果没有任何额外的库，您可以使用下面的实用方法来执行以下操作：

```
var dateFromPicker = getDateFromPicker();
var dateUtc = localAsUtc(dateFromPicker);
var iso = dateUtc.toISOString(); // returns "2016-12-06T00:00:00.000Z" 
```

```
/**
 * <b>WARNING</b>: This method should only be used in conjunction with components that handle local dates (i.e. date pickers).
 *
 * Returns a local date constructed from a UTC date (shifts the time by the local time zone). E.g.:
 * <ul><li>2016-01-01T00:00Z (UTC) -> 2016-01-01T00:00-0100 (CVT)
 *     <li>2016-01-01T00:00Z (UTC) -> 2016-01-01T00:00+0100 (CET)
 * </ul>
 * @param date a date in UTC time zone
 * @returns {Date} the same date & time in the local time zone
 */
function utcAsLocal(date) {
    if (isNotValidDate(date)) {
        return null;
    }

    return new Date(
        date.getUTCFullYear(),
        date.getUTCMonth(),
        date.getUTCDate(),
        date.getUTCHours(),
        date.getUTCMinutes(),
        date.getUTCSeconds(),
        date.getUTCMilliseconds()
    );
}

/**
 * <b>WARNING</b>: This method should only be used in conjunction with components that handle local dates (i.e. date pickers).
 *
 * Returns a UTC date constructed from a local date (shifts the time by the local time zone). E.g.:
 * <ul><li>2016-01-01T00:00-0100 (CVT) -> 2016-01-01T00:00Z (UTC)
 *     <li>2016-01-01T00:00+0100 (GMT) -> 2016-01-01T00:00Z (UTC)
 * </ul>
 * @param date a date in UTC time zone
 * @returns {Date} the same date & time in the UTC time zone
 */
function localAsUtc(date) {
    if (isNotValidDate(date)) {
        return null;
    }

    return new Date(Date.UTC(
        date.getFullYear(),
        date.getMonth(),
        date.getDate(),
        date.getHours(),
        date.getMinutes(),
        date.getSeconds(),
        date.getMilliseconds()
    ));
}

function isValidDate (date) {
    return !isNotValidDate(date);
}

function isNotValidDate(date) {
    return date == null || isNaN(date.getTime());
} 
```

以下是一些模拟 UTC 前后时区的示例：

```
var date;

// simulate a datepicker in (CET)
date = new Date("2016-12-06T00:00:00.000+0100");
date.toISOString(); // "2016-12-05T23:00:00.000Z"
date = localAsUtc(date);
date.toISOString(); // "2016-12-06T00:00:00.000Z" sent to server

// simulate a datepicker in (CVT)
date = new Date("2016-12-06T00:00:00.000-0100");
date.toISOString(); // "2016-12-06T01:00:00.000Z"
date = localAsUtc(date);
date.toISOString(); // "2016-12-06T00:00:00.000Z" sent to server

// setting the datepicker date (CET)
date = new Date("2016-12-06T00:00:00.000Z"); // received from server
date.toISOString(); // "2016-12-06T00:00:00.000Z"
date = utcAsLocal(date); // set datepicker with this date shows (06/12/2016)
date.toISOString(); // "2016-12-05T23:00:00.000Z"

// setting the datepicker date (CVT)
date = new Date("2016-12-06T00:00:00.000Z"); // received from server
date.toISOString(); // "2016-12-06T00:00:00.000Z"
date = utcAsLocal(date); // set datepicker with this date shows (06/12/2016)
date.toISOString(); // "2016-12-06T01:00:00.000Z"
```

[但是如果不提及moment.js](http://momentjs.com/) ，答案就不会完整，这使得处理日期变得非常容易。

# mysql - Mysql COUNT by date 只是 DATETIME 的一部分

> ID：11963622
> 
> 赞同：2
> 
> 时间：2012-08-15T03:07:30.893
> 
> 标签：mysql

我有一张如下表

```
 +-----+--------------+---------------------+
 | id  | url          | visit_date          | 
 +-----+--------------+---------------------+
 |  1  + 60           | 2012-06-23 18:15:49 |  
 +-----+--------------+---------------------+
 |  2  + 60&ref=qr    | 2012-06-23 12:15:49 |  
 +-----+--------------+---------------------+
 |  3  + 54           | 2012-06-23 18:15:49 |  
 +-----+--------------+---------------------+
 |  4  + 5            | 2012-06-24 18:15:49 |  
 +-----+--------------+---------------------+
 |  5  + 60           | 2012-06-25 13:15:49 |  
 +-----+--------------+---------------------+
 |  6  + 60           | 2012-06-25 19:15:49 |  
 +-----+--------------+---------------------+ 
```

我只想将结果分组到我的日期。所以结果将是，例如，如果我只想要 60 的 url。

```
 +-------------+------------------+
  |visit_date   |count(visit_date) |
  +-------------+------------------+
  |  2012-06-23 |        2         | 
  +-------------+------------------+
  |  2012-06-25 |        2         |
  +-------------+------------------+ 
```

我尝试了以下方法，但显然由于时差，我得到了每个日期。

```
 SELECT visit_time, COUNT( visit_time ) 
  FROM tracking
  WHERE query_string LIKE  '%60%'
  GROUP BY visit_time 
```

是否可以仅通过忽略时间的日期来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T03:09:13.943

是的你可以。只需使用`DATE()`功能。

```
SELECT DATE(visit_time), COUNT( visit_time ) 
FROM tracking
WHERE query_string LIKE  CONCAT('%', '60' ,'%')  -- makes readable
GROUP BY DATE(visit_time) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:09:09.390

用这个

```
GROUP BY date(visit_time) 
```

# compiler-errors - 经验证的代码不会上传到 Arduino Uno R3

> ID：11963624
> 
> 赞同：1
> 
> 时间：2012-08-15T03:07:36.753
> 
> 标签：compiler-errors, arduino

所以我刚刚在邮件中收到了 LED 矩阵，我试图从这个可指导的[http://www.instructables.com/id/Arduino-Processing-Audio-Spectrum-Analyzer/?ALLSTEPS](http://www.instructables.com/id/Arduino-Processing-Audio-Spectrum-Analyzer/?ALLSTEPS)上传代码，但我一直收到错误

```
ArduinoCode:2: error: 'ht1632c' does not name a type
ArduinoCode.cpp: In function 'void setup()':
ArduinoCode:11: error: 'dotmatrix' was not declared in this scope
ArduinoCode.cpp: In function 'void loop()':
ArduinoCode:35: error: 'dotmatrix' was not declared in this scope
ArduinoCode:35: error: 'BLACK' was not declared in this scope
ArduinoCode:41: error: 'GREEN' was not declared in this scope
ArduinoCode:107: error: 'ORANGE' was not declared in this scope
ArduinoCode:131: error: 'RED' was not declared in this scope
ArduinoCode:153: error: 'dotmatrix' was not declared in this scope 
```

代码是[http://www.instructables.com/files/orig/FSH/KZKA/GZ0BVJOC/FSHKZKAGZ0BVJOC.ino](http://www.instructables.com/files/orig/FSH/KZKA/GZ0BVJOC/FSHKZKAGZ0BVJOC.ino)因为我仍然不知道如何在这里发布代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:53:03.427

您收到此错误消息是因为您在库文件夹中没有该文件（包含在您的程序中）。

在您提到的教科书中，他们有一个名为 libary.zip 文件的附件。下载并解压 zip 文件并将内容复制到 arduino 库文件夹中。一旦你这样做了，你的代码应该可以正确编译。

# php - 如何通过键对php中的多维数组进行排序？

> ID：11963626
> 
> 赞同：0
> 
> 时间：2012-08-15T03:08:15.340
> 
> 标签：php

我知道这个问题已经被问过好几次了，但给出的答案对我的情况没有帮助。

我有一个简单的数组，基本上代表月份和年份。数组的唯一目的是跟踪数据库中的事件，我需要知道代表了哪些月份和年份。该数组基本上是：

```
$array[MONTH][YEAR] = 1; //just any value. Don't care about the value. 
```

我需要对数组进行排序，以便年份按顺序排列，但同一年中的任何月份也应该进行排序。请参阅下面我想要的输出...

```
$dates[10][2012] = 1;
$dates[1][2011] = 1;
$dates[12][2013] = 1;
$dates[4][2010] = 1;
$dates[6][2009] = 1;
$dates[7][2009] = 1; 
```

如何对该数组进行排序，以便值返回为：

```
Array
(
    [6] => Array
    (
        [2009] => 1
    )
    [7] => Array
    (
        [2009] => 1
    )
    [4] => Array
    (
        [2010] => 1
    )
    [1] => Array
    (
        [2011] => 1
    )
    [10] => Array
    (
        [2012] => 1
    )
    [12] => Array
    (
        [2013] => 1
    )
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T03:21:35.313

尝试使用[uasort](http://www.php.net/manual/en/function.uasort.php)。您可以编写一个自定义函数来对内部键而不是外部键进行排序。

***编辑：***

事实证明，如果您还想对外部月份进行排序，则需要使用[uksort 。](http://www.php.net/manual/en/function.uksort.php)这似乎有效：

```
uksort($dates, function ($a, $b) use ($dates) {
  $year = key($dates[$a]) - key($dates[$b]);
  $month = $a - $b;
  return $year == 0 ? $month : $year;
}); 
```

***编辑：***

如果您只是像上面 Jon 建议的那样更改索引顺序，它会简单得多：

```
$dates[2012][10] = 1;
$dates[2011][1] = 1;
$dates[2013][12] = 1;
$dates[2010][4] = 1;
$dates[2009][7] = 1;
$dates[2009][6] = 1;

ksort($dates);
array_walk($dates, ksort);

print_r($dates); 
```

# eclipse - 在 Eclipse 中创建 01:00 倒数计时器（计时器）

> ID：11963627
> 
> 赞同：0
> 
> 时间：2012-08-15T03:08:20.503
> 
> 标签：eclipse, chronometer

我在我的 Android 应用程序中实现了一个 Chronometer 对象。创建 01:00 倒数计时器的简单代码是什么，让用户有 1 分钟时间完成当前关卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:02:16.980

天文钟需要几分钟吗？我似乎记得它需要几毫秒

无论如何，只需通过它倒计时的时间，然后在完成时，这应该是包含的方法，执行您的命令，例如弹出某种阻止用户或完成活动的警报对话框

# php - PHP：超过 30 秒的最大执行时间，继续循环

> ID：11963630
> 
> 赞同：1
> 
> 时间：2012-08-15T03:08:44.420
> 
> 标签：php

我正在编写一个 php 脚本，我在其中执行一个循环，并且在循环内部有一个特定的函数处理信息，如此处所示。

```
while (some condition){
    // some code
    processInformation();
    // Some more code
} 
```

事实证明，在中途，在 processInformation() 中，我遇到了错误致命错误：超过了 30 秒的最大执行时间。使用 set_time_limit(0) 对我的情况没有帮助，因为 processInformation() 可能需要很长时间。我不希望错误完全破坏我的程序，所以如果 processInformation() 花费太长时间，我是否可以捕获异常或告诉 php“继续”循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:53:41.317

您可以将最大执行时间的值从 30 秒增加到任意值。例如：如果你想将最大执行时间的限制设置为 3 分钟（而不是 30 秒），那么你可以设置为：

```
ini_set('max_execution_time', 180); //maximum execution time of 3 minutes 
```

这样，您可以根据需要设置时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:13:57.923

我不知道如何捕捉异常，但您可以使用简单的时间计算在 60 秒后逃脱。()

$x=时间();
而（某些条件）{

```
 processInformation();

    if ($x + 60) < time() 
    break;

} 
```

# c - 如何从 readahead() 中释放内存？

> ID：11963640
> 
> 赞同：0
> 
> 时间：2012-08-15T03:09:51.167
> 
> 标签：c, linux, file-io

我只是使用`free()`函数来释放指针还是某些特定的 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:18:19.183

由于`readahead()`填充了页面缓存，内存由内核处理。你什么都不做。

# php - 代理后面的 CodeIgniter 会话

> ID：11963641
> 
> 赞同：6
> 
> 时间：2012-08-15T03:09:57.750
> 
> 标签：php, database, codeigniter, session, proxy

当您没有代理 IP 列表时会发生什么？使用 Akamai、Google、Edgecast 或 CloudFront 等站点加速服务时；从他们那里获得会话的 IP 总是很困难的。

在 CDN 上测试我们的 codeigniter 应用程序时，我们注意到 IP 是作为 CDN IP 传递的，而不是会话数据库中的客户端 IP。

你怎么能解决这个问题？

```
 /*
|--------------------------------------------------------------------------
| Reverse Proxy IPs
|--------------------------------------------------------------------------
|
| If your server is behind a reverse proxy, you must whitelist the proxy IP
| addresses from which CodeIgniter should trust the HTTP_X_FORWARDED_FOR
| header in order to properly identify the visitor's IP address.
| Comma-delimited, e.g. '10.0.1.200,10.0.1.201'
|
*/
$config['proxy_ips'] = ''; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T08:23:48.993

根据您使用的 Web 服务器，有些模块会为您提供来自 HTTP_X_FORWARDED_FOR 标头的真实客户端 IP 地址，或代理的等效地址。

我在 CloudFlare 后面的网络服务器上使用 Nginx，所以我使用这个：[http ://wiki.nginx.org/HttpRealipModule](http://wiki.nginx.org/HttpRealipModule)

您需要为您的 Web 服务器配置模块，该模块从您的 CDN 的正确标头中获取真实的客户端 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T15:49:57.383

如果您想在 Codeigniter 3 中处理 IP 而不是在 Web 服务器中处理 IP，您可以将 CDN IP 添加到此配置中：

```
$config['proxy_ips'] = ['10.0.1.2']; 
```

或提供 CDN 网络掩码：

```
$config['proxy_ips'] = '10.0.1.0/24'; 
```

如果您的服务器始终落后于 CDN：

```
$config['proxy_ips'] = isset($_SERVER["REMOTE_ADDR"]) ? $_SERVER["REMOTE_ADDR"] : ''; 
```

* * *

### 获取IP方法：

```
$this->input->ip_address(); //$this=>CI 
```

如果匹配代理IP，则返回转发IP，否则返回`$_SERVER["REMOTE_ADDR"]`，可以得到真实的客户端IP。

> 参考[Codeigniter 3](https://www.codeigniter.com/user_guide/libraries/input.html#CI_Input::ip_address)

# html - 为什么不应该/不被识别为文档大纲中的节标题？

> ID：11963643
> 
> 赞同：2
> 
> 时间：2012-08-15T03:10:18.683
> 
> 标签：html, html-table, caption

目前，HTML5 标准从它在文章/部分/导航等中找到的第一个标题自动创建标题/标题。我遇到的问题是为什么`<caption>`不应该以与标题相同的方式对待（出于大纲的目的）。

以下面的代码为例。为了在文档大纲中有标题部分，您必须求助于它：

```
<table>
    <caption>Results from zombie duck experiment</caption>
    <h2 style="display: none;">Results from zombie duck experiment</h2>
    <tr>
        <td>FAILURE</td>
        <td>FAILURE</td>
    </tr>
</table> 
```

（生成此大纲：[http](http://gsnedders.html5.org/outliner/process.py?url=http%3A%2F%2Froncya.com%2Ftransfer%2FHTML5CaptionDocumentOutline2.htm) ://gsnedders.html5.org/outliner/process.py?url=http%3A%2F%2Fruncya.com%2Ftransfer%2FHTML5CaptionDocumentOutline2.htm ）

我明白为什么会这样；HTMLDoctor 甚至说这是推荐的做事方式：

> 出于可访问性的原因，我们建议每个分段元素都有一个标题，偶数`<aside>`和`<nav>`. 如果您不希望这些标题可见，您可以随时使用 CSS 隐藏它们。-- [http://html5doctor.com/outlines/](http://html5doctor.com/outlines/)

当然可以，但为什么不这样呢？：

```
<table>
    <caption>Results from zombie duck experiment</caption>
    <tr>
        <td>FAILURE</td>
        <td>FAILURE</td>
    </tr>
</table> 
```

（这会产生这个失败的大纲：[http](http://gsnedders.html5.org/outliner/process.py?url=http%3A%2F%2Froncya.com%2Ftransfer%2FHTML5CaptionDocumentOutline1.htm) ://gsnedders.html5.org/outliner/process.py?url=http%3A%2F%2Fruncya.com%2Ftransfer%2FHTML5CaptionDocumentOutline1.htm ）

我假设 W3C 做出了有意识的决定，而我唯一的想法是：

1.  表格虽然有结束标签，但并没有真正用作“包装器”，如 div、span、article、section、nav 等。所以从这个意义上说，他们没有定义“环绕部分”
2.  标题是标题，标题不是标题（......这没有太多答案）
3.  典型的标题不适合合适的标题（我不同意这一点）

至于第 3 点，我认为典型的标题仍然可以用作文档大纲中的标题。不管他们是在表格的顶部还是在下面。哎呀，我什至不明白为什么它会比没有更糟糕。以这些可能的标题为例 - 我认为它们都是合适的文档大纲部分标题：

*   僵尸鸭实验结果
*   图 3b
*   Windows 8 区域定价
*   哪个品牌包含什么？
*   秘籍
*   颜色
*   亚伯拉罕·林肯在不同历史时期的着装

这对我来说肯定是有意义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:50:09.633

在 HTML5 中，标题不仅包含简短的标题，还包含解释表格的描述性散文。该规范提供了[一个使用标题的示例](http://dev.w3.org/html5/spec/the-caption-element.html#the-caption-element)：

```
<caption>
    <p>Table 1.
    <p>This table shows the total score obtained from rolling two
    six-sided dice. The first row represents the value of the first die,
    the first column the value of the second die. The total is given in
    the cell that corresponds to the values of the two dice.
</caption> 
```

这不会为文档大纲提供一个好的标题。

`<h?>`如果你想让它出现在文档大纲中，我建议你把标题放在里面。在上面的示例中，这将是合适的：

```
<caption>
    <h2>Table 1.</h2>
    <p>This table shows the total score obtained from rolling two
    six-sided dice. The first row represents the value of the first die,
    the first column the value of the second die. The total is given in
    the cell that corresponds to the values of the two dice.
</caption> 
```

或在您的示例中：

```
<table>
    <caption><h2>Results from zombie duck experiment</h2></caption>
    <tr>
        <td>FAILURE</td>
        <td>FAILURE</td>
    </tr>
</table> 
```

# vba - 蓝牙传入数据串失真

> ID：11963648
> 
> 赞同：0
> 
> 时间：2012-08-15T03:12:28.073
> 
> 标签：vba, bluetooth, distortion

我有配备 RS232 串行端口和蓝牙发射器的秤。我在 VBA 中编写了一个程序来接收来自秤的数据。但是，假设在 10 个传入的字符串中，我得到了 3 个失真。我的常规字符串看起来像：“+001500./3 G S”。这意味着高于零 1500.3 克，并且输出稳定。但有时我会得到像“+”或“001500./3”或“GS”这样的分隔字符串。当我插入串行电缆时，我没有失真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:22:06.333

串行端口只是字节流。您永远无法假设每次读取操作会显示多少字节。巧合的是，当您使用真正的电缆时，您会一次读取整个字符串。您必须自己进行字符串拆分，并在仅获得部分结果时继续阅读。

# jsf - JSF h:button 或 Primefaces p:button - 目标 _blank

> ID：11963654
> 
> 赞同：4
> 
> 时间：2012-08-15T03:13:21.067
> 
> 标签：jsf, primefaces

如何将 _blank 设置为 ah:button 或 p:button 的目标？

现在我有一个简单的链接：

```
<h:outputLink value="#{bean.url}" target="_blank">
 <h:outputText value="Link" />
</h:outputLink> 
```

但我希望它看起来像一个按钮（如果可能的话，一个 primefaces 样式的按钮）所以我决定用 ap:button 来改变它。

```
<p:button value="Link" href="#{bean.url}" /> 
```

但是现在我无法按照我的意愿设置目标值。

有人有想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T05:57:30.117

一点 javascript 会有所帮助：

```
<p:button value="Link" onclick="window.open('#{bean.url}'); return false;" /> 
```

EL 表达式将在执行 javascript 之前被替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:41:08.807

我用了 ：

```
<h:form target="_blank">
      <p:commandButton value="Run" action="#{bean.createReport}"  />
    </h:form> 
```

这没关系。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-06-05T20:32:33.640

将 ajax="false" 添加到 primefaces commandButton 在 p:button 中设置目标，而不是形式

# javascript - 根据父 URL 更改 iframe 中属性的颜色

> ID：11963655
> 
> 赞同：1
> 
> 时间：2012-08-15T03:13:46.343
> 
> 标签：javascript, html, url, variables, iframe

基本上，我有一个 iframe 加载在我网站上的每个页面上。这里面是一个带有导航栏的标题，使用`<ul>`和`<li>`标记进行编码。例如。

```
<div id="header">   
  <ul>
    <li><a id="BtnHome" href="/home">Home</a></li>
    <li><a id="BtnServices" href="/services">Services</a></li>
    <li><a id="BtnProducts" href="/products">Products</a></li>
    <li><a id="BtnAbout" href="/about">About Us</a></li>
    <li><a id="BtnBlank" href="#">Something</a></li>
  </ul>
</div> 
```

`<a>`当标题加载到相应页面时，我需要更改属性的背景颜色。到目前为止，我最接近的是使用这个..

在父页面上：

```
<script type="text/javascript">
  var URL = document.URL;
  URL = URL.toUpperCase();
</script> 
```

在 iframe 中：

```
<script type="text/javascript">
  if (URL.indexOf("/HOME") != -1) {document.getElementById("BtnHome").style.backgroundColor="#222";}
  if (URL.indexOf("/SERVICES") != -1) {document.getElementById("BtnServices").style.backgroundColor="#222";}
  if (URL.indexOf("/PRODUCTS") != -1) {document.getElementById("BtnProducts").style.backgroundColor="#222";}
  if (URL.indexOf("/ABOUT") != -1) {document.getElementById("BtnAbout").style.backgroundColor="#222";}
</script> 
```

如果变量“URL”匹配并且父页面成功存储到“URL”变量中，则 iframe 中的代码成功更改`<a>`属性的颜色，`document.URL`但 iframe 似乎无法访问该变量。

我确信有一个很好的方法可以做到这一点，但我已经没有想法了

值得注意的是，我试图将所有父页面上的混乱降至最低（因此首先使用 iframe）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:30:22.937

哎呀，皮特，你在这里是一个受伤的世界。你有两种可能的情况：

*   iFrame 页面和您的页面在同一个域中
*   他们在不同的域

如果它们在同一个域中，您应该能够通过 JavaScript 访问内部框架，反之亦然，使用[此处列出的方法。](https://stackoverflow.com/questions/251420/invoking-javascript-in-iframe-from-parent-page)令人讨厌，但可行。

但是，如果目标文档和父文档位于不同的域上——是的，**子域算作不同的域**——你需要做一些更激进和更老套的事情。本质上，除了设置 URL 之外，您不能影响内部框架；您可以通过设置 URL 片段 ( [http://www.foo.com/bar.php#fragment](http://www.foo.com/bar.php#fragment) ) 将消息传递给框架中的脚本。iFrame 中的脚本可以检查 URL 片段并根据需要更改 CSS 样式。[可以在这里](http://softwareas.com/cross-domain-communication-with-iframes)找到一个很好的方法，尽管它非常复杂 - 祝你好运。

尽管如此，使用 iFrame 很有可能是错误的做法。您可以使用[jQuery 的 ajax() 系列方法](http://api.jquery.com/jQuery.ajax/)将文档直接动态加载到您的文档中，其中 CSS 和 JavaScript 将与它们正常交互。这**更**容易处理，而且在风格上更可取，并且符合标准。

# mysql - Rikulo 是否支持 mysql 数据库？

> ID：11963666
> 
> 赞同：2
> 
> 时间：2012-08-15T03:15:27.430
> 
> 标签：mysql, dart, rikulo

我知道 rukilo 是 Dart 语言的 UI 框架，但我想知道它是否支持使用 Mysql？如果是，如何将 mysql 与 Dart 连接起来？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:22:42.300

我们正在开发 Rikulo ORM 以简化数据库访问（但尚未开放）。第一个版本将建立在 WebSQL (SQLite) 和 IndexedDB 之上。我们确实有计划将其桥接到 MySQL 等后端服务器。当然，还有一些安全和性能挑战需要处理。

# jquery - 如何防止骨干的默认操作？

> ID：11963668
> 
> 赞同：2
> 
> 时间：2012-08-15T03:15:42.737
> 
> 标签：jquery, backbone.js

我在 Rails 中有一个删除链接：

```
<%= link_to "#{image_tag("icons/icon_delete.png", :alt => "Delete")} Delete".html_safe, "#suppliers", id: supplier.id, class: "delete", :title => "Delete", :confirm => 'Are you sure?', :method => :delete %> 
```

而且我有一个可以捕捉到它的主干事件（CofeeScript）：

```
 events: ->
    "click a.delete": "deleteSupplier"

  deleteSupplier: (event) ->
    event.preventDefault()
    console.log("delete") 
```

所有这一切都很好，除了当我在确认对话框上单击确定时，链接会被跟踪。任何想法如何防止这种情况？如果我从 deleteSupplier 返回 false ，则确认不再有效，这不是我所追求的。我希望确认能够正常工作，只是在单击“确定”时不通过链接。

编辑：我忘了提到这些链接是在通过 ajax get 请求加载页面*后插入的。*而且我还通过删除 :confirm 进行了测试，它似乎没有任何区别。我相信这与通过 ajax 请求加载有关，但我原以为如果是这种情况，事件甚至不会触发:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T19:02:22.720

您正在使用两种力量：将 JS 处理程序添加到链接的 Rails 魔术链接和也将处理程序添加到链接的 Backbone。

你最好和一个一起去，给另一个自由的一天。当您使用 Backbone 作为您的 JS 武器时，让我们将所有 JS 逻辑移至 Backbone：

```
<%= link_to "delete", "#suppliers", :id => supplier.id, :class => "delete", :title => "Delete" %>

deleteSupplier: function( event ) {
  event.preventDefault();
  if( confirm( "Are you sure?" ) ) {
    console.log("delete")
  }
} 
```

# java - 在会话超时时无法获取会话范围的 bean

> ID：11963673
> 
> 赞同：2
> 
> 时间：2012-08-15T03:16:27.027
> 
> 标签：java, spring, spring-mvc, session-bean

我需要在`HttpSessionListener.sessionDestroyed()`. 目标是在会话被销毁时进行清理（通过`invalidate()`或超时）。我添加了`ContextLoaderListener`以公开上下文并让 bean 通过`WebApplicationContextUtils.getWebApplicationContext()`.

如果我自己在 Servlet 中使会话无效，一切都会正常工作，但是当会话超时时，我会得到一个`Scope 'session' is not active for the current thread;`. 我知道清理问题是由 Servlet 引擎的内部线程完成的，但我仍然需要能够从`HttpSessionListener`.

我似乎有很多相同的问题，没有人有解决方案，这就是我再次问的原因。

我的**applicationContext.xml**没有 bean 声明，因为我正在使用注释。

这是会话超时时我需要访问的**bean ：**

```
@Component
@Scope(value="session", proxyMode=ScopedProxyMode.TARGET_CLASS)
public class Access {

    static private int SERIAL = 0;
private int serial;

    public Access() {
            serial = SERIAL++;
    }

    public int getSerial() {
            return serial;
    }
} 
```

这是手动或会话的**控制器。**`create``destroy`

```
@Controller
public class Handler {

    @Autowired
    Access access;

    @RequestMapping("/create")
    public @ResponseBody String create() {
        return "Created "+access.getSerial();
    }

    @RequestMapping("/destroy")
    public @ResponseBody String destroy(HttpSession sess) {
        int val = access.getSerial();
        sess.invalidate();
        return "Destroyed "+val;
    }

} 
```

这是监听会话销毁的**HttpSessionListener ，*****我需要访问`Access`会话范围 bean***的内容。

```
public class SessionCleanup implements HttpSessionListener {

@Override
public void sessionDestroyed(HttpSessionEvent ev) {

    // Get context exposed at ContextLoaderListener
    WebApplicationContext ctx = WebApplicationContextUtils
        .getWebApplicationContext(ev.getSession().getServletContext());

    // Get the beans
    Access v = (Access) ctx.getBean("access");

    // prints a not-null object
    System.out.println(v);

    // this line raise the exception
    System.out.println(v.getSerial());

    }

    @Override
    public void sessionCreated(HttpSessionEvent ev) {/*Nothing to do*/}

} 
```

下面的异常在`v.getSerial()`.

```
Ago 14, 2012 11:44:58 PM org.apache.catalina.session.StandardSession expire
SEVERE: Session event listener threw exception
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.access': Scope 'session' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:342)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:33)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.getTarget(Cglib2AopProxy.java:654)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:605)
    at model.Access$$EnhancerByCGLIB$$438f41a5.toString(<generated>)
    at java.lang.String.valueOf(String.java:2902)
    at java.io.PrintStream.println(PrintStream.java:821)
    at org.apache.tomcat.util.log.SystemLogHandler.println(SystemLogHandler.java:242)
    at service.SessionCleanup.sessionDestroyed(SessionCleanup.java:24)
    at org.apache.catalina.session.StandardSession.expire(StandardSession.java:709)
    at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:576)
    at org.apache.catalina.session.ManagerBase.processExpires(ManagerBase.java:712)
    at org.apache.catalina.session.ManagerBase.backgroundProcess(ManagerBase.java:697)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1364)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1649)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1658)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1658)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1638)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)
    at org.springframework.web.context.request.SessionScope.get(SessionScope.java:90)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
    ... 19 more 
```

最后，这是我的**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
    id="WebApp_ID" version="2.5">

  <display-name>session-listener-cleanup</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-config.xml</param-value>
    </context-param>

    <listener>
      <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
      <listener-class>service.SessionCleanup</listener-class>
    </listener>

    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <session-config>
      <session-timeout>1</session-timeout>
    </session-config>

</web-app> 
```

正如我所说，当我在控制器的方法中使会话无效时，一切都很好`destroy`。

**更新 1：找到可能的解决方案**

出现问题是因为需要一个请求才能 Spring 访问会话 bean。事件虽然我们有一个关联到线程的上下文，但没有请求。

这里有一些可能的选择：

1.  **按照alexwen**的建议实现接口 DisposableBean 。这意味着将业务逻辑移动到模型对象[[here]](https://stackoverflow.com/a/11965010/179138)；
2.  实施**alexwen**`DestructionAwareBeanPostProcessor`也建议的。这意味着您需要在进行任何处置[[here]](https://stackoverflow.com/a/11965010/179138)之前检查要处置的 bean 是否为 a ；**`Access`**
***   直接从会话中检索 bean。这种方式不是一个很好的方式，因为您使用未记录的行为来实现结果，但确实有效[[here]](https://stackoverflow.com/a/11979178/179138)；*   模拟一个 servlet 请求并将其属性绑定到 Thread 通过`RequestContextHolder`. 这也会导致未记录的行为，可以在未来的版本中进行更改[[这里]](http://forum.springsource.org/showthread.php?28389-Access-session-scoped-bean-via-HttpSessionListener&p=280143#post280143)；**

 **我没有选择最后两个，因为它们没有记录。另外，我不喜欢在一个特定的豆子之后清除每个豆子的想法。由于我也不想将业务逻辑混合到我的模型 bean 中，所以我最终创建了一个`@Service`创建 bean 并且还有一个方法的`destroy`方法。

此方法由访问 bean 的处置负责。我在 bean`DisposableBean`上实现了接口并将服务`Access`注入`AccessManager`到 `Access`bean 并调用服务`destroy`方法。该服务如下所示：

```
@Service
public class AccessManager {

    @Bean(name="access", destroyMethod="destroy")
    @Scope(value="session", proxyMode=ScopedProxyMode.TARGET_CLASS)
    @Autowired
    public Access create(HttpServletRequest request) {
        // creation logic
    }

    public void destroy(Access access) {
        // disposal logic
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:33:41.183

如果您实现该接口，则您的 Access 类 Spring 上的[DisposableBean](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/DisposableBean.html)将在 Session 被销毁时调用方法“destroy”。

或者，您可以向 Spring 注册一个[DestructionAwareBeanPostProcessor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/DestructionAwareBeanPostProcessor.html)，当范围被销毁时，它将有机会处理 Session 范围内的所有 bean。[文档和说明在这里](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-extension)。

如果您对 Spring 是如何完成所有这些工作感到好奇，我鼓励您查看 Spring在 Session 中注册为[HttpSessionBindingListener的 DisposableBeanAdapter。](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionBindingListener.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T00:36:30.597

问题发生在没有请求绑定到侦听器的情况下，尽管有一个上下文绑定到它。会话范围需要一个请求来解决。

仔细阅读，我发现范围 bean 存储在`HttpSession`自身中。如果我只需要获取一个会话范围的 bean，我只需要获取带有 bean 名称 ( `session.getAttribute('beanName')`) 的会话属性。

这里唯一的技巧是代理 bean，就像上面的例子一样，以 string 为前缀`scopedTarget.`，所以要抓取`Access`bean，我只需要调用属性 named `scopedTarget.access`。也不需要**ContextLoaderListener**。

为了得到上面的bean，我需要做的就是实现`HttpSessionListener`并编写以下方法：

```
@Override
public void sessionDestroyed(HttpSessionEvent ev) {

    // Get the session
    HttpSession session = ev.getSession();

    // Get the access bean
    Access access = (Access) session.getAttribute("scopedTarget.access");

    // Print the serial
    System.out.println(access.getSerial());

} 
```

**重要提示：**不过，我不知道这是否是最好的方法。我相信这是有风险的，因为无法保证 bean 名称将保持与现在相同的规则。**

# scala - 身份验证和会话播放框架

> ID：11963674
> 
> 赞同：1
> 
> 时间：2012-08-15T03:16:30.850
> 
> 标签：scala, playframework, playframework-2.0

我正在尝试使用 scala 语言通过 playframework 找出身份验证。

下面的代码是什么意思，Security.username -> java.util.UUID.randomUUID().toString() 部分

```
def authenticate = Action { implicit request =>
  loginForm.bindFromRequest.fold(
    formWithErrors => BadRequest(html.login(formWithErrors)),
    user => Redirect(routes.Application.index).withSession(Security.username -> java.util.UUID.randomUUID().toString())
  )
} 
```

我想创建一个网站，允许用户通过会话安全地访问自己的设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:18:47.910

这意味着您正在将一个键值对写入您的会话（实际上是一个签名的 cookie）（“key”->“value”计算为一个元组（“key”，“value”））。

使用密钥“Security.username”。这将检查配置“session.username”是否存在，否则默认为“用户名”。所以如果你不配置任何东西，关键是'用户名'。

java.util.UUID.randomUUID().toString() 生成一个唯一标识符（用户名值）。如果您已经有任何形式的用户名，请改用它。

与 servlet（或例如 php）会话相比，正在运行的会话不存储在服务器上，而是存储在 cookie 上。因此，只有字符串类型的键值对是有效的，并且大小上限为 4k 数据。也许您只想将用户名存储在会话中并从其他数据存储区（例如您的文件系统或数据库）加载设置。在实现此查找时，强烈建议使用 play 的缓存功能。

# python - 将 web.py iterbetter 转换为字典或列表

> ID：11963676
> 
> 赞同：0
> 
> 时间：2012-08-15T03:17:01.330
> 
> 标签：python, database, list, dictionary, web.py

我正在尝试使用 web.py 的 database.select 从 MySQL 表（ipb_members）中获取一些数据。这是我正在使用的代码：`members = db.select("ipb_members", where="name=\"asdfquerty\"")`

它返回一个 iterbetter 的实例。我想弄清楚的是如何将其转换为字典或列表。我看到了[这个](https://stackoverflow.com/questions/9560948/web-py-database-select-access)，它建议使用 list()，但这只是将所有内容放在第一个索引中。我也试过 dict()，但也没有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:04:53.403

这应该有效：

```
members = db.select("ipb_members", where="name=\"asdfquerty\"")
for member in members #members is IterBetter
    print member.posts #member is Storage 
```

请注意，如果您只需要迭代一次，则不必调用`.list()`结果。`db.select`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:08:50.333

你试过`dict(members)`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-03T05:23:20.607

iterBetter 不是很方便，因为它只能迭代一次，这是将 iterBetter 转换为列表的代码：

```
list_conv_from_db = []
for menber in menbers:
    temp = dict()
    for key in menber:
        temp[key]=menber[key]
    list_conv_from_db.append(temp) 
```

然后你得到 list_conv_from_db 你可以做你想做的一切！

# xcode - 无法推送到 Git 存储库

> ID：11963677
> 
> 赞同：10
> 
> 时间：2012-08-15T03:17:05.527
> 
> 标签：xcode, git

我正在尝试将我最近的提交推送到我在 Bitbucket 上设置的 Git 存储库，并且由于某种原因它从不推送。

Xcode 只是卡在屏幕上说“Pushing Changes...”和“Preparing to Push Changes...”，但它永远不会完成。然后以“'Master' 的工作副本当前是最新的”结束。

但事实并非如此。

我已经做出了改变。

还尝试添加更多提交，但这也不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T04:37:54.537

Git 并不总是与 Xcode 一起工作，通常是因为 Xcode 生成的垃圾文件（例如 xcworkspace 等），而且它通常有很多错误，所以我会尝试从命令行而不是通过 Xcode 推送（这也应该给你如果它不起作用，则会显示更详细的错误消息）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T04:04:44.613

尝试做一个 git add 然后 git commit

# android - 如何列出活动中所有动态创建的视图？

> ID：11963678
> 
> 赞同：0
> 
> 时间：2012-08-15T03:17:12.273
> 
> 标签：android, dynamic, resources, views

我想在 setContentView() 将它们显示在屏幕上之前（甚至之后）查看所有动态创建的按钮、TextView 等。我有一个松散的理解，这与上下文和活动有关，但具体来说，我不知道这些动态视图存在于哪里/它们在运行时如何组合在一起。

如果它们在运行时显示，是否有办法列出所有这些？

```
 LinearLayout layout = new LinearLayout(this);
    layout.addView(button1);
    layout.addView(button2);
    layout.addView(button3);
    setContentView(layout); 
```

按钮应该存在于某处（我很确定它们存在于上下文中！！）但没有办法（我发现）定位这些动态创建的视图。请和谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:26:32.263

一般来说，如果您需要在屏幕上显示这些类型的东西，那么您应该在某处保留对它们的引用。这是一种常见的模式，如果你动态创建一个按钮，你需要把它们塞进一个`List`（例如）。如果您像这样编程，您不需要获取所有视图，即使您可以轻松地（通常在 GUI 中，您可以通过反射或同样俗气的机制）它也不会以任何形式组织将布局中的事物与应用程序指定的逻辑布局相关联的逻辑结构。因此，当您动态创建视图时，将它们像列表一样填充到某个地方，以便您以后可以迭代它。

# c# - Microsoft 表达式 - OutputPreviewWindow 不起作用

> ID：11963679
> 
> 赞同：0
> 
> 时间：2012-08-15T03:17:14.513
> 
> 标签：c#, expression

我正在尝试构建一个简单的测试示例，该示例使用我的网络摄像头并输出到 WIndowsFormHost。这实际上取自示例代码，但我不确定为什么它不起作用。我的网络摄像头的 LED 亮起，所以我想这意味着我的网络摄像头没有问题。

谁能帮我解决这个问题？这是我的示例代码。

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        job = new LiveJob();

        deviceSource = job.AddDeviceSource(videoDevs.Count > 0 ? videoDevs[1] : null, audioDevs.Count > 0 ? audioDevs[0] : null);
        job.ActivateSource(deviceSource);
        job.ApplyPreset(LivePresets.VC1HighSpeedBroadband16x9);
        job.StartEncoding();
        job.OutputPreviewWindow = new PreviewWindow(new HandleRef(displayPanel, displayPanel.Handle));
        //Console.Read();
        //job.StopEncoding();
    } 
```

此外，当我尝试将 job.StartEncoding() 放在按钮中时，我收到了一个奇怪的错误，即 HREF COMException。谁能告诉我这个错误是什么意思？

![异常](../Images/a68485f63bf40505d95cacedd67648ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:48:27.337

我找到了我的问题的解决方案。

```
private string Broadcast_Webcam()
    {
        if (_job == null)
        {
            v_Device = EncoderDevices.FindDevices(EncoderDeviceType.Video);
            a_Device = EncoderDevices.FindDevices(EncoderDeviceType.Audio);

            _job = new LiveJob();
            _source = _job.AddDeviceSource(v_Device.Count > 0 ? v_Device[1] : null,                       a_Device.Count > 0 ? a_Device[0] : null);
            _job.ActivateSource(_source);
        }

        if (_job != null)
        {
            _job.ApplyPreset(LivePresets.VC1Broadband4x3);

            PullBroadcastPublishFormat format = new PullBroadcastPublishFormat();
            format.BroadcastPort = 8080;
            format.MaximumNumberOfConnections = 2;
            _job.PublishFormats.Add(format);
            _job.StartEncoding();

        }
        return "Webcam service has been started";
    } 
```

这将毫无问题地工作。

第二个问题是 COMEXCEPTION 的持续错误。解决方法是通过

```
_job.StopEncoding();
_job.Dispose(); 
```

我忘记在处理它之前停止编码过程，导致异常。

# mongodb - 如何通过一次调用将一组对象推送到猫鼬中的数组中？

> ID：11963684
> 
> 赞同：45
> 
> 时间：2012-08-15T03:18:13.333
> 
> 标签：mongodb, mongoose

我需要使用一次调用将多个值推送到猫鼬中的数组中。我尝试使用较小的数组来执行此操作，但该数组被作为子数组插入。

```
var kittySchema = new mongoose.Schema({
        name: String,
        values: [Number]
});

var Kitten = db.model('Kitten', kittySchema);
Kitten.update({name: 'fluffy'},{$push: {values:[2,3]}},{upsert:true},function(err){
        if(err){
                console.log(err);
        }else{
                console.log("Successfully added");
        }
}); 
```

三次调用上述代码的结果如下：

```
{ "_id" : ObjectId("502b0e807809d79e84403606"), "name" : "fluffy", "values" : [ [ 2, 3 ], [ 2, 3 ], [ 2, 3 ] ] } 
```

而我想要的是这样的：

```
{ "_id" : ObjectId("502b0e807809d79e84403606"), "name" : "fluffy", "values" : [ 2, 3 ,2 ,3, 2, 3] } 
```

我注意到的另一件事是数组（值）中的类型被指定为数字，那么“严格”选项不会确保不插入除数字之外的任何内容吗？在这种情况下，允许插入另一个数组。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-12-13T20:32:05.997

**（2014 年 12 月更新）**从 MongoDB2.4 开始，您应该使用：

```
Kitten.update({name: 'fluffy'}, {$push: {values: {$each: [2,3]}}}, {upsert:true}, function(err){
        if(err){
                console.log(err);
        }else{
                console.log("Successfully added");
        }
}); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-08-15T03:37:56.987

***已弃用***，请参阅下面使用 $push $each 的其他解决方案

您的示例很接近，但您希望[$pushAll](https://docs.mongodb.org/manual/reference/operator/update/pushAll/)而不是[$push](https://docs.mongodb.org/manual/reference/operator/update/push/)分别添加每个值（而不是将另一个数组推送到`values`数组上）：

```
var Kitten = db.model('Kitten', kittySchema);
Kitten.update({name: 'fluffy'},{$pushAll: {values:[2,3]}},{upsert:true},function(err){
        if(err){
                console.log(err);
        }else{
                console.log("Successfully added");
        }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-16T22:58:30.863

或者将 $each 修饰符与 $addToSet 一起使用：

[https://docs.mongodb.com/manual/reference/operator/update/addToSet/#each-modifier](https://docs.mongodb.com/manual/reference/operator/update/addToSet/#each-modifier)

> ```
> // Existing tags array
> { _id: 2, item: "cable", tags: [ "electronics", "supplies" ] }
> 
> // Add "camera" and "accessories" to it
> db.inventory.update(
>    { _id: 2 },
>    { $addToSet: { tags: { $each: [ "camera", "accessories" ] } } }
>  ) 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-21T15:07:57.177

目前，更新后的[文档](https://docs.mongodb.com/manual/reference/operator/update/push/)不支持`$pushAll`. 它似乎已被弃用。现在好的选择是使用`$push`&的组合`$each`

一个例子：

```
//User schema: {uid: String, transaction: [objects] }
const filter = {"uid": uid};
const update = {
        $push: {
            transactions: {$each: dataarr}
        }
    }
User.updateOne(filter, update, {upsert:true}, (err) => {
        if(err){
            console.log(err)
        }
    }) 
```

如果过滤器返回 false，则传递`{upsert: true}`选项以插入。

# ios - NSArray 图像不显示在 ScrollView

> ID：11963686
> 
> 赞同：0
> 
> 时间：2012-08-15T03:18:26.347
> 
> 标签：ios, nsarray, scrollview

`NSArray`图像有：

```
2012-08-15 10:12:39.687 test[4200:11103] (
    "http://192.168.1.165/Images/Demo/1.jpg",
    "http://192.168.1.165/Images/Demo/0.jpg",
    "http://192.168.1.165/Images/Demo/0.jpg",
    "http://192.168.1.165/Images/Demo/2.jpg",
    "http://192.168.1.165/Images/Demo/2.jpg",
    "http://192.168.1.165/Images/Demo/2.jpg",
    "http://192.168.1.165/Images/Demo/2.jpg",
    "http://192.168.1.165/Images/Demo/1.jpg",
    "http://192.168.1.165/Images/Demo/1.jpg",
    "http://192.168.1.165/Images/Demo/1.jpg" ) 
```

和代码.m：

```
dispatch_async(htvque, ^{
        NSData* data = [NSData dataWithContentsOfURL: tophotfilm];

        NSError* error;

        json = [NSJSONSerialization JSONObjectWithData:data
                                               options:kNilOptions 
                                                 error:&error];

        NSDictionary *list = [json objectForKey:@"List"];

        NSMutableArray *arrPoster =[[NSMutableArray alloc]init];
        for(NSString *po in list)
        {
            NSString *poster = [po valueForKey:@"Poster"];
            [arrPoster addObject:poster];

        }
        myArray = [NSArray arrayWithArray:arrPoster];
        NSArray *colors = [[NSArray alloc] initWithObjects:[UIColor redColor], 
                           [UIColor greenColor], [UIColor magentaColor],
                           [UIColor blueColor], [UIColor orangeColor], 
                           [UIColor brownColor], [UIColor grayColor], nil];
            //NSLog(@"%@",colors);
            NSLog(@"%@",myArray);
        for (int i = 0; i < myArray.count; i++) {
                //NSLog(@"%@",myArray.count);
            NSString *imageName = [NSString stringWithFormat:@"%@", i];
            UIImage *image = [UIImage imageNamed:imageName];
            UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

            CGRect rect = imageView.frame;

            rect.origin.x = self.scrollView.frame.size.width * i;
            rect.origin.y = 0;
            rect.size = scrollView.frame.size;

            [self.scrollView addSubview:imageView];

        }

        scrollView.pagingEnabled = YES;
        scrollView.showsHorizontalScrollIndicator = NO;
        scrollView.showsVerticalScrollIndicator = NO;
        scrollView.contentSize = CGSizeMake(scrollView.frame.size.width *
        myArray.count,scrollView.frame.size.height);
        pageControl.currentPage = 0;
        pageControl.numberOfPages = myArray.count;
        [super viewDidLoad];
    }); 
```

使用 NSArray 颜色，它工作正常，但 NSArray 图像有一些错误。

* * *

滚动视图不显示列表图像，它显示第一张图像，任何人都知道为什么......

> dispatch_async(dispatch_get_main_queue(), ^{ for (int i = 0; i < myArray.count; i++) { //NSString *imageName = [NSString stringWithFormat:@"%@",[myArray objectAtIndex:i]];
> 
> ```
>  NSURL *urlImage = [NSURL URLWithString:[NSString stringWithFormat:@"%@",[myArray objectAtIndex:i]]];
>                 //NSLog(@"%@",urlImage);
>                 UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:urlImage]];
>                 UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
> 
>                 CGRect rect = imageView.frame;
>                 rect.size.height = imgHeight;
>                 rect.size.width = imgWidth;
>                 imageView.frame = rect;
>                 imageView.tag = i;
> 
>                 //rect.size = scrollView.frame.size;
>                 [scrollView addSubview:imageView];
>             }
> 
>             scrollView.pagingEnabled = YES;
>             scrollView.showsHorizontalScrollIndicator = NO;
>             scrollView.showsVerticalScrollIndicator = NO;
>             scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * 
> ```
> 
> myArray.count,scrollView.frame.size.height); pageControl.currentPage = 0; pageControl.numberOfPages = myArray.count; });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:40:35.953

您使用`imageNamed:`的只能用于项目中的图像，如果我理解您的问题，您正在尝试从服务器访问它们。试试这个`UIImage`方法：`imageWithData:`

```
NSURL *url = [NSURL URLWithString:[myArray objectAtIndex:i]];
UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:05:12.250

检查这行代码

`NSString *imageName = [NSString stringWithFormat:@"%@", i];`

您的图像名称将只是 1、2 等，而不是打印在日志中的图像名称，

它应该是这样的

`[myArray objectATIndex:i];`

# css - 如果不出现背景图像 是空的？

> ID：11963687
> 
> 赞同：17
> 
> 时间：2012-08-15T03:18:35.153
> 
> 标签：css, html

我在页面顶部创建了`<div>`第一件事来绘制一条顶线：`<body>`

```
<body>
    <div class="bordertop"></div>
    .....
</body> 
```

和风格：

```
body {
    font-family: Helvetica, Arial, sans-serif;
    -webkit-text-size-adjust: 100%;
    margin:0;
}
.bordertop {
    background-image: url(../images/top_border.png);
    background-repeat: repeat-x;    
} 
```

但是，`top_border image`除非我在其中写一些文本，否则不会出现，`<div>`但我不想这样做。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T03:21:55.853

由于 div 是空的，因此没有内容可以将其“打开”，从而使 div 的高度为 0px。在 div 上设置显式尺寸，您应该会看到背景图像。

```
.bordertop 
{
    background-image: url(../images/top_border.png);
    background-repeat: repeat-x;    
    height: 100px;
    width: 100%; /* may not be necessary */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T03:22:36.370

您可能需要将元素的 css`width`和设置`height`为您`<div>`想要的任何大小

```
.bordertop {
    background-image: url(../images/top_border.png);
    background-repeat: repeat-x;
    width: 200px;
    height: 100px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T03:23:50.517

给`div`一个`height:1px`。那应该行得通。否则你`div`的`0px`很高，这意味着你什么都看不到。

你也可以给`padding-top:1px`

你可以做的另一件事是在你的CSS中设置`background-image`行的。`body`这是假设线是整个宽度`body`。

看**[演示](http://jsbin.com/eseved/1/edit)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T03:30:59.800

正如我上面的答案所暗示的那样^^'这是因为它几乎没有大小，您需要将内容放入其中以调整其大小或在cssbordertop类中设置宽度/高度或填充，或者您可以在其中放置另一个空的内容尺寸。我打算跳过这个答案，因为已经有了答案，但我只是想补充一下，宽度/高度不是你唯一的选择。

顺便说一句，哦，伙计，这里的人发帖速度如此之快，我有时想知道这是否是一场比赛，奖品是什么，一定有一些，我想帮助他人本身就是很棒的奖品。:) 当我开始输入这个时，还没有答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-23T17:36:28.807

即使设置了宽度，我也无法在 div 中显示背景。原来我不得不把“../”放在 url 部分，然后它显示了我挣扎了很长一段时间的图片。

```
left {
    width: 800px;
    height: auto;
    min-height: 100%;
    position: relative;
    background-image: url("../img/loginpic.jpg");
    background-size: cover;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
    background-color: crimson;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-27T07:26:45.913

如果它是`div`正文中的唯一元素，请使用以下样式使其占据全角。

```
.bordertop  {
   position: absolute;
   top: 0;
   right: 0;
   bottom: 0;
   left: 0;
   background-image: 
   url('../images/top_border.png');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-17T18:21:34.630

我很长一段时间都遇到同样的问题，我的解决方案是给出以下样式线：最小高度。如果里面没有元素，这会将 div 打开到给定的高度。内部元素越多，高度可以变大，但不能变小。

示例代码：

```
.fixed-bg {

    /* The background image */
    background-image: url("img_tree.gif");
    /* Set a specified height, or the minimum height for the background image */
    min-height: 500px;
    /* Set background image to fixed (don't scroll along with the page) */
    background-attachment: fixed;
    /* Center the background image */
    background-position: center;
    /* Set the background image to no repeat */
    background-repeat: no-repeat;
    /* Scale the background image to be as large as possible */
    background-size: cover;
} 
```

从[https://www.w3schools.com/cssref/pr_background-attachment.asp获得的代码](https://www.w3schools.com/cssref/pr_background-attachment.asp)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-24T15:24:22.507

否则，您可以只打开一个`<p></p>`和样式，删除默认边距长度，即`margin: 0;`添加`height: 0.1px`不占用太多空间的，这样就可以了。

注意：它会正常工作，直到缩小不超过 50%，所以在将它应用到 body 之前，请确保用例。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-14T02:30:32.130

我发现的最好方法是：对于景观：

```
width:100%;
height:0;
padding-top:[ratio]%; 
```

肖像：

```
width:[ratio]%;
height:0;
padding-top:100%; 
```

您需要确定哪一侧较长，并接受此尺寸为 100%，然后计算 [ratio] - 较短尺寸相对于 100% 较长尺寸的百分比。然后使用上述解决方案之一。

# android - 在android框架层中获取触摸事件，如何将其更改为系统事件

> ID：11963693
> 
> 赞同：1
> 
> 时间：2012-08-15T03:18:56.743
> 
> 标签：android, events

当我在android框架中得到一个带有坐标的触摸事件时，我可以使用ioctl将用户事件发送到内核，然后让驱动程序将其转换为系统输入事件。（使用：input_sync、input_report_key、input_report_abs等）

问题是：

据我所知，android swipe 事件可能是这样的：(swipe down) { type, code, value }

```
 {3,48,5}, {3,50,1}, {3,53,240}, {3,54,400},
    {1,330,1},

    {3,58,255}, {3,57,0},
    {0,2,0},{0,0,0},

    {3,48,0},{3,50,1},{3,53,240},{3,54,450},{3,58,255},{3,57,0},
    {0,2,0},{0,0,0},

    {3,0,0},{3,1,450},{3,57,15},
    {0,0,0},{1,330,0},

    {3,48,0},{3,50,1},{3,53,240},{3,54,450},{3,58,0},
    {0,2,0},{0,0,0} 
```

type=0，代表同步

type=1，代表key

type=3, code=53,54, value代表坐标

type=3，code=48,50,57,58，value代表触控工具属性。

所以只有type=3、code=53,54或type=1是输入参数，其他的需要在用户事件到系统事件的转换中插入。

我应该这样编码：

```
// in driver
if ( get an event )
{
    report touch tool event;    
    report the x,y/key event;   // from input params
    report the sync event;
} 
```

还是有更好的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:57:09.513

找到了linux的uinput接口，可以更方便的在用户空间生成输入事件。

[http://thiemonge.org/getting-started-with-uinput](http://thiemonge.org/getting-started-with-uinput)

# mysql - 在mysql中加入表没有正确使用索引？

> ID：11963696
> 
> 赞同：0
> 
> 时间：2012-08-15T03:19:23.083
> 
> 标签：mysql, sql, join, indexing, explain

我有四个表，我正在尝试加入并将结果输出到一个新表。我的代码如下所示：

```
create table tbl  
select a.dte, a.permno, (ret - rf) f0_xs_ret, (xs_ret - (betav*xs_mkt)) f0_resid, mkt_cap     last_year_mkt_cap, betav beta_value
from a inner join b using (dte)
inner join c on (year(a.dte) = c.yr and a.permno = c.permno)
inner join  d on (a.permno = d.permno and year(a.dte)-1 = year(d.dte)); 
```

所有表都有多个索引，对于 table `a`，`(dte, permno)`标识一条唯一记录，对于 table `b`，`dte`id 是唯一记录，对于 table `c`，`(yr, permno)`id 是唯一记录，对于 table `d`，`(dte, permno)`id 是唯一记录。`select`查询部分的解释是：

```
+----+-------------+-------+--------+-------------------+---------+---------+----------    ------------------------+--------+-------------------+
| id | select_type | table | type   | possible_keys     | key     | key_len | ref                                  | rows   | Extra             |
+----+-------------+-------+--------+-------------------+---------+---------+----------    ------------------------+--------+-------------------+
|  1 | SIMPLE      | d     | ALL    | idx1              | NULL    | NULL    | NULL                                 | 264129 |                   | 
|  1 | SIMPLE      | c     | ref    | idx2              | idx2    | 4       |     achernya.d.permno                |     16 |                   | 
|  1 | SIMPLE      | b     | ALL    | PRIMARY,idx2      | NULL    | NULL    | NULL                                 |  12336 | Using join buffer | 
|  1 | SIMPLE      | a     | eq_ref | PRIMARY,idx1,idx2 | PRIMARY | 7       |    achernya.b.dte,achernya.d.permno |      1 | Using where       | 
+----+-------------+-------+--------+-------------------+---------+---------+----------------------------------+--------+-------------------+ 
```

为什么mysql要读取这么多行来处理这个东西？如果我读得正确，它必须读取`(264129*16*12336)`应该需要一个月的行。

有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:15:45.500

MySQL 必须读取行，因为您使用函数作为连接条件。上的索引`dte`将无助`YEAR(dte)`于在查询中解析。如果您想加快速度，请将年份放在自己的列中以用于连接并将索引移动到该列，即使这意味着一些非规范化。

至于索引中您未对其应用函数的其他列，如果索引不会提供太多好处，或者它们不是索引中最左边的列并且您不使用它们，则可能不会使用它们连接条件中该索引的最左边前缀。

> 有时 MySQL 不使用索引，即使索引可用。发生这种情况的一种情况是优化器估计使用索引将需要 MySQL 访问表中很大比例的行。（在这种情况下，表扫描可能会快得多，因为它需要的搜索次数更少。）

[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

# javascript - 如何删除最后一个标记谷歌地图 v3

> ID：11963702
> 
> 赞同：0
> 
> 时间：2012-08-15T03:20:33.287
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个用于在我的数据中添加新位置的 html 表单，

我希望用户添加标记并删除最后一个标记，

我找到了这段代码，但它添加了多个标记

如何让它删除最后一个？

因为我只需要一个标记？这是表单[http://saudi-hotels.info/add_hotel.php的演示](http://saudi-hotels.info/add_hotel.php)

```
<script type="text/javascript">

var map;
function mapa()
{
    var opts = {'center': new google.maps.LatLng(26.12295, -80.17122), 
    'zoom':11, 'mapTypeId': google.maps.MapTypeId.ROADMAP }

    map = new google.maps.Map(document.getElementById('mapdiv'),opts);

                google.maps.event.addListener(map,'click',function(event) {

                        document.getElementById('long').value = event.latLng.lng();
                        document.getElementById('lat').value = event.latLng.lat();

                    marker = new google.maps.Marker({
                            map: map,
                            position: new google.maps.LatLng(event.latLng.lat(),event.latLng.lng()),
                  });

                  }

);

}
</script> 
```

请帮我 ，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T03:35:33.153

您可以创建一个跟踪最后创建的标记的全局变量：

```
var lastMarker; 
```

然后，每当您创建新标记时，设置`lastMarker`为新创建的标记：

```
lastMarker = new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng(26.12295, -80.17122)
}); 
```

然后，无论何时要删除最后创建的标记，都可以使用`lastMarker`变量：

```
lastMarker.setMap(null); 
```

# wpf - 在 XAML 中更改按钮背景？

> ID：11963703
> 
> 赞同：0
> 
> 时间：2012-08-15T03:20:34.730
> 
> 标签：wpf, silverlight, xaml

如何将以下 XAML 代码集成到按钮背景中。我已经尝试了很多方法，但我很难让它发挥作用。PS 我是 XAML 的新手。

```
 <Viewbox Width="55.247" Height="55.247"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Canvas Width="55.247" Height="55.247">

  <Canvas>

  <!-- button/circle -->
  <Path StrokeThickness="1.0" Stroke="#ff335284" StrokeMiterLimit="1.0" Data="F1 M 54.747,27.624 C 54.747,42.603 42.603,54.747 27.624,54.747 C 12.644,54.747 0.500,42.603 0.500,27.624 C 0.500,12.644 12.644,0.500 27.624,0.500 C 42.603,0.500 54.747,12.644 54.747,27.624 Z">
    <Path.Fill>
      <RadialGradientBrush MappingMode="Absolute" GradientOrigin="392.717,-251.469" Center="392.717,-251.469" RadiusX="27.123" RadiusY="27.123">
        <RadialGradientBrush.GradientStops>
          <GradientStop Offset="0.00" Color="#ff00aae4"/>
          <GradientStop Offset="1.00" Color="#ff2463a7"/>
        </RadialGradientBrush.GradientStops>
        <RadialGradientBrush.Transform>
          <MatrixTransform Matrix="1.000,0.000,-0.000,-1.000,-365.093,-223.845" />
        </RadialGradientBrush.Transform>
      </RadialGradientBrush>
    </Path.Fill>
  </Path>

  </Canvas>
</Canvas>
</Viewbox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:41:24.317

以下示例将标准按钮模板替换为您的设计并添加内容演示器，以便您仍然可以设置按钮的内容。

```
<Button Content="OK" Width="75" Height="75">
    <Button.Template>
        <ControlTemplate TargetType="Button">

            <Grid>
                <Path StrokeThickness="1.0" Stroke="#ff335284" StrokeMiterLimit="1.0" Data="F1 M 54.747,27.624 C 54.747,42.603 42.603,54.747 27.624,54.747 C 12.644,54.747 0.500,42.603 0.500,27.624 C 0.500,12.644 12.644,0.500 27.624,0.500 C 42.603,0.500 54.747,12.644 54.747,27.624 Z">
                  <Path.Fill>
                      <RadialGradientBrush MappingMode="Absolute" GradientOrigin="392.717,-251.469" Center="392.717,-251.469" RadiusX="27.123" RadiusY="27.123">
                          <RadialGradientBrush.GradientStops>
                              <GradientStop Offset="0.00" Color="#ff00aae4"/>
                              <GradientStop Offset="1.00" Color="#ff2463a7"/>
                          </RadialGradientBrush.GradientStops>
                          <RadialGradientBrush.Transform>
                              <MatrixTransform Matrix="1.000,0.000,-0.000,-1.000,-365.093,-223.845" />
                          </RadialGradientBrush.Transform>
                      </RadialGradientBrush>
                 </Path.Fill>
             </Path>
             <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Grid>

    </ControlTemplate>
</Button.Template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:30:22.343

那么你有多种选择来实现这一点。如果你真的只是想把你的路径放在一个按钮中，你可以用最小的努力做到这一点；

```
<Button Width="75" Height="75">
    <!-- Embed our elements in a grid since Content can be set only once -->
    <Grid>
        <!-- Your Path -->
        <Path StrokeThickness="1.0" Stroke="#ff335284" StrokeMiterLimit="1.0" Data="F1 M 54.747,27.624 C 54.747,42.603 42.603,54.747 27.624,54.747 C 12.644,54.747 0.500,42.603 0.500,27.624 C 0.500,12.644 12.644,0.500 27.624,0.500 C 42.603,0.500 54.747,12.644 54.747,27.624 Z">
          <Path.Fill>
            <RadialGradientBrush MappingMode="Absolute" GradientOrigin="392.717,-251.469" Center="392.717,-251.469" RadiusX="27.123" RadiusY="27.123">
              <RadialGradientBrush.GradientStops>
                <GradientStop Offset="0.00" Color="#ff00aae4"/>
                <GradientStop Offset="1.00" Color="#ff2463a7"/>
              </RadialGradientBrush.GradientStops>
              <RadialGradientBrush.Transform>
                <MatrixTransform Matrix="1.000,0.000,-0.000,-1.000,-365.093,-223.845" />
              </RadialGradientBrush.Transform>
            </RadialGradientBrush>
          </Path.Fill>
        </Path>
        <!-- Your Button Text -->
        <TextBlock Text="Button" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
</Button> 
```

如果您需要获得更多技术/更清洁，您只需将其直接放入控制模板中。这是关于[WPF 按钮控件模板的文档](http://msdn.microsoft.com/en-us/library/ms753328%28v=vs.85%29.aspx)

希望这会有所帮助，幸运的是，网上也有很多自定义 WPF 按钮的教程。如果您想详细说明您想要什么，例如您是特别为 WPF 还是 SL 拍摄（VisualStateManager 或 Style Triggers 等差异），人们可能会更有用。:)

# python - Python TKinter 窗口中基于时钟的方法 - 请批评

> ID：11963709
> 
> 赞同：1
> 
> 时间：2012-08-15T03:21:52.990
> 
> 标签：python, tkinter, countdown

目标： 30 分钟的定时活动，循环通过一系列交替缓慢和剧烈的锻炼。该窗口首先显示从 30 分钟开始的倒数计时器。练习以 30 秒的“慢”活动开始 - 计时器下方显示“慢”字样。然后继续进行 60 秒的剧烈运动。然后是 30 秒的慢速运动，然后是 60 秒的不同强度运动，以此类推。总共有 4 种不同的剧烈运动，每种运动都以缓慢的速度交替进行。

我已经组装了下面的代码。我不相信它是直观的。我不喜欢在方法周围蹦蹦跳跳，我觉得那里有一些方法可以用来提高效率。在实际层面上，这并不能很好地工作，因为计时器和消息（即显示的慢/运动#）开始变得不同步。我研究了 python 博客并不断“听到”关于 Tkinter 不是多线程的一些信息。我猜测 after(x,y) 会因为倒计时线程占用资源而受到损害......不太确定。另外，我想在每个方法之后添加一个音调作为“运动员”的音频队列无论如何，提前感谢您查看我的粗略代码。

```
 import Tkinter as tk

 class ExampleApp(tk.Tk):
     def __init__(self):
         tk.Tk.__init__(self)
         self.label = tk.Label(self, text="", width=10, font= ("Helvetica",72), background='yellow', fg = 'red')
         self.label2 = tk.Label(self, text="", width=10, font=("Helvetica",72), background='yellow', fg = 'blue')
         self.label.pack()
         self.label2.pack()
         self.remaining = 0
         self.countdown(1800)  # the 30 minutes countdown  initialization
         self.run = True 

     def countdown(self, remaining = None):
         if self.remaining == 1799:  # marker that starts the methods series
             self.start()
         if remaining is not None:
             self.remaining = remaining
         if self.remaining >= 1:
             mins = int(self.remaining/60)
             #rsecs = self.remaining - mins * 60 #could use this
             rsecs = self.remaining % 60     #same results as t - mins * 60
             self.remaining = self.remaining -1
             self.after(1000, self.countdown)
             self.label.configure(text ="%.2f" % (mins + rsecs / 100.0))
         else:
             self.label.configure(text="Stop")

     def start(self):
         app.after(0, self.slow1)
         return

     def slow1(self):
         self.label2.configure(text="Slow" )
         app.after(30000, self.fast1)
         return

     def fast1(self):
         self.label2.configure(text="Exercise 1" )
         app.after(61000, self.slow2)
         return

     def slow2(self):
         self.label2.configure(text="Slow" )
         app.after(31000, self.fast2)
         return

     def fast2(self):
         self.label2.configure(text="Exercise 2" )
         app.after(61000, self.slow3)
         return

     def slow3(self):
         self.label2.configure(text="Slow" )
         app.after(30000, self.fast3)
         return

     def fast3(self):
         self.label2.configure(text="Exercise 3" )
         app.after(60000, self.slow4)
         return

     def slow4(self):
         self.label2.configure(text="Slow" )
         app.after(30000, self.fast4)
         return

     def fast4(self):
         self.label2.configure(text="Exercise 4" )
         app.after(60000, self.slow1)
         return

 if __name__ == "__main__":
     app = ExampleApp()
     app.title("Intense Workout")
     app.geometry('550x550+200+200')
     app.configure(background='yellow')
     app.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:50:11.757

有很多方法可以解决这个问题，而且你不需要线程。这是一个想法：

从定义间隔的数据结构开始。例如：

```
intervals = [[30, "slow"], [60, "intense"], [30, "slow"], [60, "intense]] 
```

接下来，设置一个简单的计时器函数，该函数每秒调用一次。它每秒显示数字和列表头部的字符串。数字代表剩余时间。在该计时器函数中，从数字中减去 1。如果它变为零，则从列表中删除该元素。让这个函数在一秒钟后使用 调用自己`after`，当数据结构变空时停止（即：当只剩下一对并且数字下降到零时）。

以下为您提供有关如何实现此功能的想法。代码可以做得更好，但重点是说明如何使用 迭代数据结构`after`，而不一定要给出生产质量的示例。

```
import Tkinter as tk

class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.label = tk.Label(self, text="", width=10, font= ("Helvetica",72), background='yellow', fg = 'red')
        self.label2 = tk.Label(self, text="", width=10, font=("Helvetica",72), background='yellow', fg = 'blue')
        self.label.pack()
        self.label2.pack()
        self.intervals = [[30, "Slow"], [60, "Exercise 1"],
                          [30, "Slow"], [60, "Exercise 2"],
                          [30, "Slow"], [60, "Exercise 3"],
                          [30, "Slow"], [60, "Exercise 4"],
                          ]
        self.countdown()

    def countdown(self):
        (remaining, label) = self.intervals[0]
        self.label.configure(text=remaining)
        self.label2.configure(text=label)
        remaining -= 1
        if remaining < 0:
            self.intervals.pop(0)
        else:
            self.intervals[0][0] = remaining
        if len(self.intervals) > 0:
            self.after(1000, self.countdown)
        else:
            self.label.configure(text="Done!")

if __name__ == "__main__":
    app = ExampleApp()
    app.title("Intense Workout")
    app.geometry('550x550+200+200')
    app.configure(background='yellow')
    app.mainloop() 
```

# python - 在 python 中搜索嵌套列表的最有效方法是什么？

> ID：11963711
> 
> 赞同：11
> 
> 时间：2012-08-15T03:22:07.590
> 
> 标签：python

我有一个包含嵌套列表的列表，我需要知道在这些嵌套列表中搜索的最有效方法。

例如，如果我有

```
[['a','b','c'],
['d','e','f']] 
```

我必须搜索上面的整个列表，找到“d”的最有效方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T04:43:18.147

```
>>> lis=[['a','b','c'],['d','e','f']]
>>> any('d' in x for x in lis)
True 
```

**generator expression using `any`**

```
$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "any('d' in x for x in lis)" 
1000000 loops, best of 3: 1.32 usec per loop 
```

**generator expression**

```
$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "'d' in (y for x in lis for y in x)"
100000 loops, best of 3: 1.56 usec per loop 
```

**list comprehension**

```
$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "'d' in [y for x in lis for y in x]"
100000 loops, best of 3: 3.23 usec per loop 
```

How about if the item is near the end, or not present at all? `any` is faster than the list comprehension

```
$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]"
    "'NOT THERE' in [y for x in lis for y in x]"
100000 loops, best of 3: 4.4 usec per loop

$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" 
    "any('NOT THERE' in x for x in lis)"
100000 loops, best of 3: 3.06 usec per loop 
```

Perhaps if the list is 1000 times longer? `any` is still faster

```
$ python -m timeit -s "lis=1000*[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]"
    "'NOT THERE' in [y for x in lis for y in x]"
100 loops, best of 3: 3.74 msec per loop
$ python -m timeit -s "lis=1000*[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" 
    "any('NOT THERE' in x for x in lis)"
100 loops, best of 3: 2.48 msec per loop 
```

We know that generators take a while to set up, so the best chance for the LC to win is a very short list

```
$ python -m timeit -s "lis=[['a','b','c']]"
    "any('c' in x for x in lis)"
1000000 loops, best of 3: 1.12 usec per loop
$ python -m timeit -s "lis=[['a','b','c']]"
    "'c' in [y for x in lis for y in x]"
1000000 loops, best of 3: 0.611 usec per loop 
```

And `any` uses less memory too

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T03:24:08.990

使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)，给出：

```
mylist = [['a','b','c'],['d','e','f']]
'd' in [j for i in mylist for j in i] 
```

产量：

```
True 
```

这也可以通过生成器来完成（如@AshwiniChaudhary 所示）

*根据以下评论更新：*

这是相同的列表推导，但使用了更具描述性的变量名称：

```
'd' in [elem for sublist in mylist for elem in sublist] 
```

列表理解部分中的循环结构等价于

```
for sublist in mylist:
   for elem in sublist 
```

并生成一个列表，其中 'd' 可以使用`in`操作员进行测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T03:23:31.173

使用生成器表达式，这里不会遍历整个列表，因为生成器会一一生成结果：

```
>>> lis = [['a','b','c'],['d','e','f']]
>>> 'd' in (y for x in lis for y in x)
True
>>> gen = (y for x in lis for y in x)
>>> 'd' in gen
True
>>> list(gen)
['e', 'f']

~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "'d' in (y for x in lis for y in x)"
    100000 loops, best of 3: 2.96 usec per loop

~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "'d' in [y for x in lis for y in x]"
    100000 loops, best of 3: 7.4 usec per loop 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T03:37:53.173

如果您的数组总是按您显示的那样排序，那么`a[i][j] <= a[i][j+1]`并且`a[i][-1] <= a[i+1][0]`（一个数组的最后一个元素总是小于或等于下一个数组中的第一个元素），那么您可以通过执行以下操作来消除大量比较：

```
a = # your big array

previous = None
for subarray in a:
   # In this case, since the subarrays are sorted, we know it's not in
   # the current subarray, and must be in the previous one
   if a[0] > theValue:
      break
   # Otherwise, we keep track of the last array we looked at
   else:
      previous = subarray

return (theValue in previous) if previous else False 
```

只有当你有很多数组并且它们都有很多元素时，这种优化才值得。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-27T20:30:21.553

如果您只想知道您的元素是否在列表中，那么您可以通过将列表转换为字符串并检查它来做到这一点。你可以扩展这个更多的嵌套列表。像 *[[1],'a','b','d',['a','b',['c',1]]]* 如果您不知道嵌套列表的级别并且想知道可搜索项目是否存在。

```
 search='d'
    lis = [['a',['b'],'c'],[['d'],'e','f']]
    print(search in str(lis)) 
```

# javascript - 用图像替换单选框（Javascript 或 Jquery）

> ID：11963714
> 
> 赞同：0
> 
> 时间：2012-08-15T03:22:32.797
> 
> 标签：javascript, jquery, css

我目前正在将一个单选框覆盖在一个独特的图像之上（在stackoverflow上找到了帮助：[如何在图像上显示复选框以供选择？](https://stackoverflow.com/questions/8877807/how-can-i-display-the-checkbox-over-the-images-for-selection)和[http://jsfiddle.net/erSBP/1/](http://jsfiddle.net/erSBP/1/)），它的工作方式就像这个例子。

但是，我想删除单选框，以便仅保留唯一图像并且可以单击并像普通单选按钮一样发送选中的值。

单选框输入 ID 是动态生成的，因此我无法指定它们的名称。

有没有办法用 Javascript 或 JQuery 做到这一点？

我目前的配置是：

```
<div class="answer">
<div class="answer-image">
<img style="border-width:0px;" src="/images/white.jpg">
</div>
<input id="Questions8404" type="radio" onclick="javascript:setTimeout('__doPostBack(\'965968404\',\'\')', 0)" value="8404" name="96596">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:26:30.683

你的代码搞砸了。首先，不要使用setimeout。只需调用 dopostback 即可。其次，您在 onlick 属性上使用了 javascript url。不要这样做，除非你通过 href 属性调用它，因为谁知道是什么原因。总而言之，不要使用 javascript 网址。这是您的代码的外观

```
<div class="answer">
<div class="answer-image">
<img style="border-width:0px;" src="/images/white.jpg">
</div>
<input id="Questions8404" type="radio" onclick="__doPostBack(\'965968404\',\'\')" value="8404" name="96596">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:43:01.797

如果您希望使用复选框来执行此操作，您可以使用 jquery 执行类似的操作​</p>

```
$(document).ready(function () {
    $(".answer").each(function() {
        var p = $(this).find("input:checkbox");
        p.hide();
        $(this).find("img").click(function() {
            p.prop("checked", true);
        });
    });
}); 
```

因为这会将输入设置为隐藏，并触发单击事件以选中复选框。它将匹配包含在相同“答案”div 中的图像和输入。您可以调整它以与收音机一起使用，您只需要知道您想要选择哪个选项。

# visual-studio-2010 - 如何修复“无法添加引用“TkxRFTag.tlb”错误在 VS 项目中添加对 Teklynx 的 Codesoft 9 的引用？

> ID：11963717
> 
> 赞同：1
> 
> 时间：2012-08-15T03:22:50.910
> 
> 标签：visual-studio-2010, activex, com-interop

我正在使用*Teklynx 的 Codesoft 9*使用他们的自动化控件。Codesoft 是一个标签生成和打印程序。我过去曾使用它的姊妹产品 LabelView 来自动化标签打印，但从 LabelView 9 开始，他们放弃了自动化服务器。

您必须添加两个引用：*LabelManager2*和*TkxRFTAG*。*LabelManager2*隐藏在 COM 列表中作为*TK Labeling ActiveX 6.0*并且安装得很好。对另一个的引用与库具有相同的名称*TkxRFTAG*。

当我选择它时，我收到了这个错误，包括双反斜杠。

```
"Unable to add reference "C:\Program Files (x86)\Teklynx\CODESOFT 9\\TkxRFTag.tlb" 
```

我在几台机器上遇到了同样的问题。你如何注册类型库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:22:50.910

反斜杠有些奇怪，但关键是手动注册库。为此，需要 .Net 文件夹中的类型库注册实用程序。

```
C:\Users\Rich>C:\Windows\Microsoft.NET\Framework\v4.0.30319\regtlibv12.exe "C:\Program
Files (x86)\Teklynx\CODESOFT 9\TkxRFTag.tlb"
Registration of TkxRFTAG.tlb successful. 
```

之后我有两个*TkxRFTAG*条目，新的一个是 2.0，它很容易添加到项目参考列表中。我不知道为什么会有两个，我只是在使用它之前安装了*Codesoft ，它是一台新 PC。*自动化对象随基础软件一起安装。

# linux - 多列终端多路复用器？

> ID：11963720
> 
> 赞同：7
> 
> 时间：2012-08-15T03:23:19.897
> 
> 标签：linux, vim, terminal, gnu-screen

让我解释一下我在寻找什么，希望是终端，但如果它存在于 IDE 中，我也会接受。

我有一台 1366x768 分辨率屏幕的笔记本电脑；我使用 vim 编写代码，我在终端中使用了相当小的字体（~7pt）。因此，正如您可能想象的那样，存在大量“浪费”的水平空间，尤其是在使用 Python 等紧凑型语言进行编码时。

我刚查了一下，发现是6pt。字体，我的终端的 maxyx 是 82 行 x 271 列。本质上，我想要的是一个尺寸为 246 行 x 90（89？）列的单个终端，分成 3 个窗格并并排显示。但是，它们需要表现为一个连续的垂直窗格，即，当我在编辑器中滚动时，它们三个都同步滚动。

有谁知道黑客或任何东西来完成这个？也许对于 vim/screen/类似？

修补屏幕可能是一个有趣的项目，但我没有时间去追逐那只兔子。不过，如果有人这样做，我会为他们点披萨或其他东西；）

（虽然如果我先解决它，我将不得不为自己点一份披萨）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T02:23:05.583

我有同样的愿望，[其他人也想要这个](http://www.mail-archive.com/plug@lists.pdxlinux.org/msg06364.html)。由于缺乏任何选项，我实现了自己的[两列虚拟终端](http://subdivi.de/~helmut/tcvt/)。请参阅`--columns`用于选择与两列不同的列数的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T04:35:58.283

**编辑：**根据评论，我现在更好地理解了这个要求。即以类似报纸的多栏格式查看一个文本文件。

它看起来更像是一个编辑器功能而不是多路复用器功能（因为应该链接 2 个编辑器）。感谢@romainl 提及`:set scrollbind`。这似乎能够结合一些额外的 vim 魔法来完成这项工作。

这是一个超级用户问答，展示了如何`scrollbind`用于您的目的：[https](https://superuser.com/questions/243931/how-do-i-maintain-vertical-splits-with-scrollbind-in-vim) ://superuser.com/questions/243931/how-do-i-maintain-vertical-splits-with-scrollbind-in-vim 。

**原始答案：** vim 和 [recently] screen 都提供垂直分割，tmux 也是如此。

我不知道有什么方法可以同时滚动，但是 tmux 的“同步窗格”确实提供了同时输入。可以有用！

*   对于 vim，使用[:vsplit](http://vimdoc.sourceforge.net/htmldoc/windows.html)
*   对于屏幕（最新版本），使用[Ca |](http://aperiodic.net/screen/commands:split)
*   替代屏幕，我使用[tmux](http://tmux.sourceforge.net/)。它提供 (default keys) `C-b %`，然后您可以`C-b :setw synchronize-panes`用于跨窗格的同时输入。

希望这可以帮助。

# asp.net - 如何向数据库中现有的电子邮件地址发送电子邮件

> ID：11963724
> 
> 赞同：-1
> 
> 时间：2012-08-15T03:23:39.350
> 
> 标签：asp.net, vb.net

我正在使用 vb.net 和 asp.net。我想向我的数据库中存在的电子邮件地址发送一个简单的文本。我已经声明了文本，并且可以从我的数据库中获取电子邮件地址。但我不知道如何将文本发送到那个特定的电子邮件地址。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:36:26.777

使用这个 VB.Net 函数：

```
Public Shared Function sendmail(ByVal to As String, ByVal subject As String, ByVal body As String, ByVal IsBodyHtml As Boolean) As Integer

    Dim mm As New MailMessage("registration@yourdomain.org", to)

    mm.Subject = subject
    mm.Body = body
    mm.IsBodyHtml = IsBodyHtml

    Dim smtp As New SmtpClient
    Try
        smtp.Send(mm)
        Return 1
    Catch ex As Exception
        Return 0
    End Try

End Function 
```

在您的 web.config 上：

```
<configuration>
<system.net>
<mailSettings>
  <smtp from="registration@yourdomain.org">
    <network  host="smtp.youremailservice.com"
              userName="registration@yourdomain.org"
              password="yourpassword"/>
  </smtp>
</mailSettings> 
```

# python - 字符串到字典列表（python）

> ID：11963726
> 
> 赞同：1
> 
> 时间：2012-08-15T03:23:52.107
> 
> 标签：python, string, list, dictionary, split

我有一个字符串需要分成 3 种方式，然后分成字典列表。

```
given_string = 'name:mickey,age:58|name:minnie,age:47,weight:60' 

data = []

data = [value.split(',') for value in given_string.split('|')]

data = [['name:mickey', 'age:58'], ['name:minnie', 'age:47', 'weight:60']] 
```

现在我想在 ':' 上再拆分一次，并让数据包含两个字典的列表，这样当我输入数据 [1] [年龄] 时，我得到 47。

基本上，我想我希望它能够工作：

```
data = [{'name': 'mickey', 'age': '58}, {'name': 'minnie', 'age': '47', 'weight': '60'}] 
```

我相信最终，数据应该是一个字典列表，但是一旦我将字符串分成两个列表，我在将它拆分为“：”然后将子列表转换为字典时会感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T03:28:33.827

你可以做一个简单的列表理解

```
>>> [dict(x.split(':') for x in parts.split(',')) 
     for parts in given_string.split('|')]
[{'age': '58', 'name': 'mickey'}, {'age': '47', 'name': 'minnie', 'weight': '60'}] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T03:28:16.210

更难筑巢。

```
>>> [ dict(y.split(':') for y in x.split(',')) for x in 'name:mickey,age:58|name:minnie,age:47,weight:60'.split('|')]
[{'age': '58', 'name': 'mickey'}, {'age': '47', 'name': 'minnie', 'weight': '60'}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T11:44:03.670

```
 given_string = 'name:mickey,age:58|name:minnie,age:47,weight:60' 
 data = [value.split(',') for value in given_string.split('|')]

 y=[] # make a empty list
 for i in data:
     z={}
     for v in range(len(i)):
         b=i[v].split(":")      #  ['name", "mickey', 'age","58"]
         z[b[0]]=b[1]           # adding keys and values in dictionary z  
     y.append(z)                # adding dictionary to the list 
```

# python - 如何删除包含某个字符串的行？

> ID：11963728
> 
> 赞同：2
> 
> 时间：2012-08-15T03:24:08.807
> 
> 标签：python, replace, line

我在这里要做的是： 1.从文本文件中读取行。2.查找包含特定字符串的行。3.删除该行并将结果写入一个新的文本文件。

例如，如果我有这样的文本：

```
Starting text
How are you?
Nice to meet you
That meat is rare
Shake your body 
```

如果我的某个字符串是“是”，我希望输出为：

```
Starting text
Nice to meet you
Shake your body 
```

我不想要这样的东西：

```
Starting text

Nice to meet you

Shake your body 
```

我正在尝试这样的事情：

```
opentxt = open.('original.txt','w')
readtxt = opentxt.read()

result = readtxt.line.replace('are', '')

newtxt = open.('revised.txt','w')
newtxt.write(result)
newtxt.close() 
```

但它似乎不起作用......

有什么建议么？任何帮助都会很棒！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:26:22.373

一如往常。打开源文件，打开目标文件，仅将您想要的行从源文件复制到目标文件中，关闭两个文件，将目标文件重命名为源文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T03:27:35.607

```
with open('data.txt') as f,open('out.txt') as f2:
    for x in f:
        if 'are' not in x:
            f2.write(x.strip()+'\n')  #strip the line first and then add a '\n', 
                                      #so now you'll not get a empty line between two lines 
```

# wif - WIF 错误：“ID3094：无法从给定的 URI 'http://myurl' 创建 WS-Federation 消息”

> ID：11963729
> 
> 赞同：0
> 
> 时间：2012-08-15T03:24:11.313
> 
> 标签：wif, sts-securitytokenservice

谁能告诉我这个错误是什么意思？
我刚开始从使用 WIF 构建的 STS 中获取它，但找不到任何文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:13:07.723

URL 缺少一些必需的参数。

使用[WSFederationMessage.CreateFromUri](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.wsfederationmessage.createfromuri.aspx)方法从 URL 中存在的信息创建消息实例。

来自 MSDN 页面的这个片段应该提供一个关于正在发生的事情的想法：

> 根据查询字符串中的 wa 参数返回 WSFederationMessage 的适当实现；例如，如果 wa 参数是“wsignout1.0”，则返回一个 SignOutRequestMessage 对象。
> 
> 根据查询字符串中存在的参数的组合和值，可能会引发其他异常。
> 
> 调用 TryCreateFromUri 方法。

# python - 在 Pyramid 应用程序中注册自定义 Jinja2 过滤器

> ID：11963730
> 
> 赞同：4
> 
> 时间：2012-08-15T03:24:11.887
> 
> 标签：python, pyramid, jinja2

我已经尝试了几种方法。根据[文档](http://docs.pylonsproject.org/projects/pyramid_jinja2/en/latest/?awesome#jinja2-filters)，我在我的应用程序的 ini 中完成了此操作：

```
[app:myapp]
#...
jinja2.filters =
    islist = myapp.machines.islist 
```

我的功能很简单：

```
def islist(item):
    return isinstance(item, list) 
```

我可以看出正在读取 ini 文件中的过滤器设置行，因为如果我的`islist`函数的虚线路径错误，应用程序会引发错误。

但是，当我尝试`islist`在模板中使用该函数时，该模板找不到该函数。

```
{% if islist([]) %}a list{% else %}not a list{% endif %} 
```

结果如下：

```
UndefinedError: 'islist' is undefined 
```

我究竟做错了什么？？任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T04:30:48.147

我认为过滤器不会作为命名空间中的函数公开，而是仅通过管道调用。例如`{{ foo | some_filter }}`.

# html - CSS 修复 div 并隐藏溢出

> ID：11963733
> 
> 赞同：1
> 
> 时间：2012-08-15T03:24:50.830
> 
> 标签：html, css, layout, overflow, css-position

所以，我已经被这个问题困扰了一段时间，我似乎无法找到解决方案。

我正在尝试制作一个由（目前）4个不同内容区域组成的布局，如下所示： ![基本布局](../Images/118419cccb1650452dfad4e23fb9a1ce.png)

## 我正在尝试做的事情

我正在尝试做以下事情：

简单解释：`Content`应该是页面上唯一可滚动的东西，`footer`如果内容适合页面，则在其后面，否则固定在底部。

详细解释：

*   修复`banner`并`mainMenu`使其在页面滚动时永远不会移动。
*   使用页面进行`content`滚动，以便：
    *   如果`content`(and `footer`) 适合页面，则不显示滚动。
    *   如果需要滚动，`content`则位于`banner`（未显示）的后面并且不再出现在其上方。
    *   如果需要滚动，`content`可以滚动到它的底线并且`footer`在可见区域中。
*   应该做两`footer`件事：
    *   如果`content`并且`footer`适合页面，`footer`则应粘贴在页面底部`content`
    *   否则，`footer`应固定在底部。

## 我试过的

Fixing`banner`和`mainMenu`是`footer`使用`position: fixed`（并相应地定位）固定的。父母`div`有`overflow: hidden`（这似乎不起作用）。

```
<div id='main'>
  <div id='banner'>banner</div>
  <div id='mainMenu'>mainMenu</div>
  <div id='content'>.. some long content ..</div>
  <div id='footer'>footer</div>
</div> 
```

和

```
#main {
  width: 960px;
  height: auto;
  margin: 40px auto;
  overflow: hidden;
}
#main #banner {
  width: 960px;
  height: 100px;
  position: fixed;
}
#main #mainMenu {
  width: 230px;
  height: auto;
  display: inline;
  float: left;
  position: fixed;
  top: 140px;
}
#main #content {
  width: 720px;
  height: auto;
  display: inline;
  float: right;
  margin-top: 100px;
}
#main #footer {
  width: 960px;
  height: auto;
  clear: both;
  position: fixed;
  bottom: 0;
} 
```

## 问题

`content`如果页脚适合该区域，则 页脚不会跟随![页脚不跟随内容](../Images/c0d5060980caf40f3ed4c63b168e37ed.png) 横幅顶部的内容溢出 ![内容溢出横幅](../Images/7c9fc4a81dfb1b2cfa56f0c5348ea293.png)

我真的更喜欢在 CSS 中（如果可能的话）并尽可能兼容（IE7+，所有其他主要浏览器）。现在真的很令人沮丧..任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:56:12.157

我无法想象仅使用css就可以解决您的问题。一旦您将元素设置为固定位置，它们就会脱离流程，因此您的其他元素无法围绕它们进行调整。

但是，我确实通过做两件不同的事情找到了解决方案。对于标题问题，我只是在主横幅上方添加了另一个固定元素并将其设置为背景颜色。这样，内容将在其后面滚动，看起来好像它被隐藏了。对于页脚，我使用 jQuery 设置了一些 javascript 来查看内容是否溢出。如果是，则将页脚的位置设置为固定，否则将位置设置为相对。

您可以在此演示中查看所有内容：http: [//jsfiddle.net/mrQGh/4/](http://jsfiddle.net/mrQGh/4/)

要测试 javascript，只需删除文本，直到不再溢出并再次运行它。

# javascript - 在 JS 中结合两个 RegEx

> ID：11963734
> 
> 赞同：0
> 
> 时间：2012-08-15T03:25:02.157
> 
> 标签：javascript, regex

我有两个 JS RegExes`/\?(?!xml)/ig`可以寻找任何？后面没有字符串“xml”和另一个`/\?(?!>)/ig`寻找？后面没有“>”。

如何将两者组合成一个正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:27:13.797

关于什么：

```
/\?(?!(xml|>))/gi 
```

**编辑：**无论如何，请考虑使用解析器而不是 RegExp 正确解析您的 XML。

# ruby-on-rails - Rails：动态命名选择框

> ID：11963736
> 
> 赞同：0
> 
> 时间：2012-08-15T03:25:32.290
> 
> 标签：ruby-on-rails, select, loops

我正在尝试在循环代码中创建一系列三个选择框，因此：

```
<% for a in @issue.articles %>
  <%= f.select(:article+a.page, options_for_select([[a.name, a.id]])) %>
<% end %> 
```

我如何将每个选择框命名为`article1`,`article2`和`article3`？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:35:42.893

如果您的意思是`a.page`有数字：

```
f.select "article#{a.page}" ... etc ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:39:33.467

尝试。

```
f.select 'article', options, :name => 'article' + a.page.to_s, :id => '...' 
```

# c# - 在数据集的下拉列表中显示唯一值

> ID：11963738
> 
> 赞同：0
> 
> 时间：2012-08-15T03:26:20.907
> 
> 标签：c#, asp.net

我有一个数据集表，其中提取了行和列。我想在下拉列表中显示数据集中的列值（日期）之一。这是我为将日期填充到下拉列表中而编写的代码。问题是有相似的日期，我想要填写唯一的日期..

```
Public void fillDates()
{
    DataSet ds = new DataSet();
    ds = bal.selectDateOfTest(qstrng);
    ddlTestDate.Items.Clear();
    ddlTestDate.Items.Add(new ListItem("--Select--", "0"));
    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        ddlTestDate.Items.Add(new ListItem(
        Convert.ToString(ds.Tables[0].Rows[i][0]).Trim(), 
        Convert.ToString(ds.Tables[0].Rows[i][0])));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:31:50.437

您需要调整返回所有日期的查询以对日期进行分组，这将是最好的方法。

或者，您可以实现在从数据库返回后进行分组的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:25:06.773

进行仅返回唯一日期的查询，即：

```
select distinct Dates from yourtable 
```

您的 sql 查询将由您的 selectDateOfTest 方法调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T10:53:02.463

尝试使用此查询来获取具有唯一列值的数据表： DataTable uniqueTable = results.DefaultView.ToTable(true, "Dates");

其中**results**是数据表的名称。

# actionscript-3 - 在 AS3 中做一个简单的追逐 AI

> ID：11963743
> 
> 赞同：0
> 
> 时间：2012-08-15T03:26:43.293
> 
> 标签：actionscript-3, flash

我试图制作一个简单的游戏，僵尸从屏幕边缘随机生成，一旦它们生成，它们将获得玩家的最后一个位置并继续朝那个方向移动，直到它们撞上舞台并被移除。但是，我似乎遇到了追逐代码的问题。即使在阅读了大量提供相同代码块的文章之后，我仍然无法使其工作（我做错了 ARRGH）。

这是主要课程

```
package 
{
import flash.display.*;
import flash.events.*;
import flash.utils.*;
import flash.ui.*;

public class main extends MovieClip
{
    private var left,right,up,down,fire,mouseRight,mouseLeft:Boolean;
    private var speedX,speedY,mobPosX,mobPosY:int;
    private var num:Number;
    private var wizard:Player;
    private var crosshair:Crosshair;
    private var mobArray,magicArray:Array;

    public function main()
    {
        //Hide mouse for crosshair
        Mouse.hide();
        crosshair = new Crosshair();
        addChild(crosshair);
        crosshair.x = stage.stageWidth;
        crosshair.y = stage.stageHeight;

        //Set initial speed
        speedX = 0;
        speedY = 0;

        //Wizard stuff
        fire = false;
        wizard = new Player();
        addChild(wizard);
        wizard.x = stage.stageWidth / 2;
        wizard.y = stage.stageHeight / 2;

        //Mob stuff
        mobArray = new Array();
        magicArray = new Array();

        //Initialize bool so movement doesn't get stuck on startup
        up = false;
        down = false;
        left = false;
        right = false;

    }

    public function startGame()
    {

        addEventListener(Event.ENTER_FRAME,update);
        stage.addEventListener(KeyboardEvent.KEY_DOWN,keyDownHandler);
        stage.addEventListener(KeyboardEvent.KEY_UP,keyUpHandler);
        stage.addEventListener(MouseEvent.CLICK, myClick);

    }

    private function keyDownHandler(evt:KeyboardEvent)
    {

        if (evt.keyCode == 37)
        {
            left = true;
        }

        if (evt.keyCode == 38)
        {
            up = true;

        }

        if (evt.keyCode == 39)
        {
            right = true;
        }

        if (evt.keyCode == 40)
        {
            down = true;
        }

        if (evt.keyCode == 67)
        {
            trace(mobArray.length);
        }

    }

    private function keyUpHandler(evt:KeyboardEvent)
    {
        if (evt.keyCode == 37)
        {
            left = false;
            speedX = 0;
        }

        if (evt.keyCode == 38)
        {
            up = false;
            speedY = 0;
        }

        if (evt.keyCode == 39)
        {
            right = false;
            speedX = 0;
        }

        if (evt.keyCode == 40)
        {
            down = false;
            speedY = 0;
        }

    }

    function myClick(eventObject:MouseEvent)
    {
        fire = true;
    }

    public function update(evt:Event)
    {
        //UI
        crosshair.x = mouseX;
        crosshair.y = mouseY;

        //Start player
        if (left && right == false)
        {
            speedX = -8;
        }

        if (up && down == false)
        {
            speedY = -8;
        }

        if (down && up == false)
        {
            speedY = 8;
        }

        if (right && left == false)
        {
            speedX = 8;
        }

        wizard.x +=  speedX;
        wizard.y +=  speedY;

        for (var i = mobArray.length - 1; i >= 0; i--)
        {
            //Start mob                                 //if X is zero and Y > 10, spawn.

            var m:Zombie = new Zombie();
            m.chase((Math.atan2(mobArray[i].y - wizard.y,mobArray[i].x - wizard.x)/Math.PI * 180)); //applies trigo
            num = Math.random();
            if (num < 0.1)
            {
                //when x = 0
                mobPosX = 10;
                mobPosY = Math.floor(Math.random() * 590) + 10;
            }
            else if (num < 0.3)
            {
                //when y = 0
                mobPosX = Math.floor(Math.random() * 790) + 10;
                mobPosY = 10;
            }
            else if (num < 0.6)
            {
                mobPosX = 800;
                mobPosY = Math.floor(Math.random() * 590) + 10;
                //when x width of screen
            }
            else if (num < 0.9)
            {
                //y is height of screen
                mobPosX = Math.floor(Math.random() * 790) + 10;
                mobPosY = 590;
            }
            m.x = mobPosX;
            m.y = mobPosY;
            mobArray.push(m);
            addChild(m);
        }

    }

    private function gameOver()
    {
        removeEventListener(Event.ENTER_FRAME,update);
        stage.removeEventListener(KeyboardEvent.KEY_DOWN,keyDownHandler);
        stage.removeEventListener(KeyboardEvent.KEY_UP,keyUpHandler);
    }

}//end class
 }//end package 
```

这是僵尸类

```
package 
  {
import flash.display.*;
import flash.events.*;

public class Zombie extends MovieClip
{
    private var zombSpd:Number;
    private var angle:Number;

    public function Zombie()
    {
        zombSpd = 10;
    }

    public function chase(chaseAngle:Number)
    {
        angle = chaseAngle;
    }

    public function update()
    {
        this.x+=Math.cos(angle*Math.PI/180)*zombSpd;
        this.y+=Math.sin(angle*Math.PI/180)*zombSpd;
    }

}//end class
   }//end package 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:24:57.553

我只是重读了您的代码，发现在尝试创建这样的游戏之前，您必须阅读并了解更多有关编程的知识。

你的僵尸没有产生的原因是你永远不会进入 for 循环。mob 数组长度一开始就为零，所以 for 循环永远不会发生。

把那个 for 循环出来并创建一个函数来在你的主类中生成敌人。您可以使用您在 for 循环中使用的代码作为此函数示例的代码：

```
function spawn():void{
    //code directly from your for loop, with a small change            
        num = Math.random();
        if (num < 0.1)
        {
            //when x = 0
            mobPosX = 10;
            mobPosY = Math.floor(Math.random() * 590) + 10;
        }
        else if (num < 0.3)
        {
            //when y = 0
            mobPosX = Math.floor(Math.random() * 790) + 10;
            mobPosY = 10;
        }
        else if (num < 0.6)
        {
            mobPosX = 800;
            mobPosY = Math.floor(Math.random() * 590) + 10;
            //when x width of screen
        }
        else if (num < 0.9)
        {
            //y is height of screen
            mobPosX = Math.floor(Math.random() * 790) + 10;
            mobPosY = 590;
        }
        var m:Zombie = new Zombie();
        m.x = mobPosX;
        m.y = mobPosY;
        m.chase((Math.atan2(m.y - wizard.y,m.x - wizard.x)/Math.PI * 180)); //applies trigo
        mobArray.push(m);
        addChild(m);
} 
```

现在在您的更新功能中，您必须确定何时要生成敌人。您可以使用计数器来做到这一点。我会让你弄清楚那部分，但如果你想让僵尸不断产生，（你在更新函数中的 forloop 所在的位置）添加这个：

```
//use a counter variable to determine when to execute spawn
spawn();
//loop through all zombies
for(var i:int = 0; i < mobArray.length; i++){
    mobArray[i].update();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T15:58:26.740

AdvanceEDActionScriptAnimation 中的转向行为示例，具有抽象接口和编组实现。Github：[https ://github.com/yangboz/as3SteeringBehavior](https://github.com/yangboz/as3SteeringBehavior)

# emacs - Ctags 与 CEDET/语义的集成

> ID：11963748
> 
> 赞同：1
> 
> 时间：2012-08-15T03:27:16.200
> 
> 标签：emacs, cscope, cedet

[我已经使用http://cedet.sourceforge.net/](http://cedet.sourceforge.net/)中的信息和 Alex Ott 的文章 (http://alexott.net/en/writings/emacs-devenv/EmacsCedet ) 使用 CEDET 1.1 设置了我的 Emacs(v 23.3) .html)

我已经解决了与我的 init.el 文件相关的链接的大部分问题。

现在解决问题。我自己构建 TAGS，所以我的项目根目录中有一个 TAGS 文件。但是语义似乎不想使用该文件和 barfs 并出现以下错误：

`Source file `/users/lshvarts/.emacs.d/cedet-1.1/semantic/ctags/semantic-ectag-util.el' newer than byte-compiled file
Exuberent CTags not found. Found ctags that comes with Emacs
semantic-ectag-test-version: Exuberent CTags not found. Use M-x semantic-ectag-version RET
Exuberent CTags not found. Use M-x semantic-ectag-version RET
Exuberent CTags not found. Found ctags that comes with Emacs` 

我拥有的 Etags 可能不是最新版本，但我很困惑为什么它明确拒绝使用它。 `boxy:92> etags --version
etags (GNU Emacs 20.7)
Copyright (C) 1996 Free Software Foundation, Inc. and Ken Arnold
This program is distributed under the same terms as Emacs
boxy:93>` 

任何帮助/见解表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:08:57.237

你需要的不是`etags`，而是**Exuberent CTags**！您可以从您的 linux/mac 存储库（通常具有 name`ectags`或`exuberant-ctags`在 Debian 上）或从[它的站点](http://ctags.sourceforge.net/)安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T05:54:20.943

这与您遇到的问题并不完全相关，但是在升级到 ubuntu 12.04 后，我得到了同样的错误（找不到丰富的 CTags。使用 Mx semantic-ectag-version RET）。

问题是 ctags-exuberant --version 返回了一个非数字版本：

```
Exuberant Ctags 5.9~svn20110310, Copyright (C) 1996-2009 Darren Hiebert
  Compiled: Nov  9 2011, 17:40:39
  Addresses: <dhiebert@users.sourceforge.net>, http://ctags.sourceforge.net
  Optional compiled features: +wildcards, +regex 
```

只需替换正则表达式

```
"Exuberant Ctags \\([0-9.]+\\)," 
```

经过

```
"Exuberant Ctags \\([0-9.]+\\)[~,]" 
```

在semantic-ectag-version 中（在semantic-ectag-util.el 中）并重新编译文件。

# ios - iOS中复杂的模糊字符串匹配

> ID：11963752
> 
> 赞同：2
> 
> 时间：2012-08-15T03:27:48.223
> 
> 标签：ios, regex, string, sqlite, search

我正在编写一个 iOS 应用程序，它从公共 Google 日历中提取事件，提取自由格式的“位置”字段，并在与给定位置相对应的地图上放置一个图钉。我想使用某种字符串搜索或模糊匹配算法使应用程序尽可能灵活，但我不确定从哪里开始。

日历管理员可以在“位置”字段中输入几项内容：

*   建筑物名称和房间号（例如 Foo Hall Room 123）
*   建筑物缩写和房间号（例如 FOO 123）
*   速记房间或位置名称（例如 Foo）

目前，我有一个由一张表组成的 sqlite 数据库，每行存储一个纬度、经度、完整的建筑物名称（Foo Hall）和标准化的建筑物缩写（FOO）。

我想获取版主的自由格式字符串并从数据库中获取正确的坐标（如果存在）。

我尝试过使用`LIKE '%FOO%'`和类似的模式，以及 Levenshtein Distance，但我遇到了一些问题，例如，如果实际的建筑物名称是“Example Foo and Bar Building”，而主持人输入的位置是“Example Bar Building”。

我考虑过的三个选项是...

*   强制版主输入标准化的缩写或建筑物名称。对于日历版主来说，这可能是一个乏味的过程，所以我会尽可能避免这种情况。

*   进行粗略的子字符串搜索，检查输入的字符串是否包含在数据库字符串的任何位置。这是我的大学在他们的网站上所做的，但它显然不是很灵活。

*   实现一个更复杂的模糊字符串匹配算法，该算法提供最大的灵活性，但需要多一个数量级的时间来实现。如果已经存在正确的解决方案，那将是理想的解决方案！

这些选项中的哪一个（如果有的话）看起来最好？有没有我没想到的更好的选择？是否有一个库可以满足我的需要，但我还没有找到它？

提前感谢您的帮助！

# javascript - 使用单个功能更新多个 div 的字符数

> ID：11963753
> 
> 赞同：0
> 
> 时间：2012-08-15T03:28:04.763
> 
> 标签：javascript, jquery, count, character

我正在尝试使用我在网上找到的代码片段来实现 charcount。它适用于单个文本区域。我有多个具有不同计数限制的文本区域。这是适用于一种形式的代码。

```
Javascript:
function countChar(val,count,focus){

        var len = val.value.length;
    var lim=count;
    var focussed=focus;

    if (len >= lim) {

            $('#charNum').text(lim - len);
            $('#charNum').addClass('exceeded');
        /* val.value = val.value.substring(0, lim);*/   
        }else {
        if(focussed===0){
            $('#charNum').html('<a>&nbsp;</a>');
        }
                else {
            $('#charNum').text(lim - len);
            $('#charNum').removeClass('exceeded');
        }
        }
};

HTML:
<div id='charNum' class='counter'>&nbsp;</div>
<textarea id='description' name='description'  onkeyup=\"countChar(this,200,1)\" onblur=\"countChar(this,200,0)\" rows='10' cols='20'></textarea> 
```

如果我有两个文本区域，如何修改此代码才能工作？我知道如何在脚本中获取 div 的 id，但我不知道如何正确更新计数器 div，比如 #charNum1 和 #charNum2。欣赏一些提示。谢谢

编辑：我在想，如果有帮助，我可以将计数器 div 命名为“Charnum+divName”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:54:51.073

如果您使用 jQuery 附加事件处理程序，您可以`this`在处理程序中使用来引用触发事件的任何元素，从而避免在函数中硬编码元素 ID。

我建议添加一个允许的最大字符数的属性并删除内联事件处理程序：

```
<div id='charNum' class='counter'>&nbsp;</div>
<textarea id='description' name='description' data-maxChars="200" rows='10' cols='20'></textarea>
<div id='charNum2' class='counter'>&nbsp;</div>
<textarea id='otherfield' name='otherfield' data-maxChars="400" rows='10' cols='20'></textarea> 
```

然后：

```
$(document).ready(function() {
    $("textarea[data-maxChars]").on("keyup blur", function(e) {
        var $this = $(this),
            $counter = $this.prev(),
            len = $this.val().length,
            maxChars = +$this.attr("data-maxChars");

        $counter.text(maxChars - len).toggleClass("exceeded", len > maxChars);
    });
}); 
```

演示：http: [//jsfiddle.net/nnnnnn/GTyW3/](http://jsfiddle.net/nnnnnn/GTyW3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:52:49.487

如果每个 textarea 都有自己的 div，您可以在 countChar 函数中添加一个额外的参数，该参数将是 div 的名称。所以你会有类似的东西：

```
function countChar(val,count,focus, charCountDiv) 
```

然后，jQuery 不是在函数中硬编码它，而是：

```
$(charCountDiv) 
```

那应该做我认为你想做的事情。

# umbraco - Umbraco 自定义数据类型 - 如何隐藏标签？

> ID：11963754
> 
> 赞同：2
> 
> 时间：2012-08-15T03:28:12.610
> 
> 标签：umbraco, umbraco4

我正在为 Umbraco 创建一个自定义数据类型。
它是从 IUsercontrolDataEditor 派生的 UserControl（.ascx 文件）。
（它显示了一个列出所有子节点的网格）

如何使此控件全宽？
IE。我想隐藏标签，就像您可以通过取消选中“显示标签”对 RichTextEditor 执行的操作一样。

编辑：感谢您的回答:) 另一种方法是使用[AbstractDataEditor](http://www.nibble.be/?p=62)，但它更复杂。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-09-22T16:46:47.803

对于 Umbraco 7.x，为您的自定义数据类型使用 angularJs-controller 只需更改作用域上继承模型的属性 hideLabel：

```
 $scope.model.hideLabel = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:43:18.067

我知道的唯一方法是使用一些 javascript，就像在[这个论坛帖子](http://our.umbraco.org/forum/developers/api-questions/18291-Hide-label-with-usercontrolwrapper#comment68977)中一样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T14:44:29.500

这是一种解决方法，但对于管理功能应该没问题（其中 Name 是您要抑制的标签）：

```
<script type="text/javascript">
    jQuery(document).ready(function () {
        $("div.propertyItemheader:contains('Name')").hide();
    });
</script> 
```

# apache - CakePHP 漂亮的 URL 在生产服务器上不起作用

> ID：11963756
> 
> 赞同：0
> 
> 时间：2012-08-15T03:28:16.320
> 
> 标签：apache, cakephp, vhosts

我开发了一个 CakePHP 应用程序，现在已经部署到我的生产服务器上，但是漂亮的 URL 不起作用。

这是我的网站的 Apache 虚拟主机：

```
<VirtualHost *:80>
       ServerName site.com
    ServerAdmin support@site.com

    DocumentRoot /home/whitey/sites/site.com/htdocs/app/webroot/
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /home/whitey/sites/site.com/htdocs/app/webroot/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog /home/whitey/sites/site.com/logs/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /home/whitey/sites/site.com/logs/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

如您所见，文档根目录设置为`webroot`我的应用程序中的目录。在该目录中，有这个 .htaccess 文件：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

整个设置与我运行 XAMPP 的本地机器完美配合，所以我不确定出了什么问题。我唯一能想到的是，由于我的虚拟主机中的设置，重写规则没有生效。但是我没有足够的 Apache 配置文件知识来知道如何修复它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:33:09.110

没关系，我是个白痴。我昨晚设置时忘记为 Apache 启用 mod_rewrite 模块。这是修复：

```
sudo a2enmod rewrite
sudo service apache2 restart 
```

# objective-c - 使用 ForLoop 方法为 9UIButtons 分配属性？

> ID：11963758
> 
> 赞同：1
> 
> 时间：2012-08-15T03:28:58.617
> 
> 标签：objective-c, xcode

我`for loop`一整天都在试图避免，但我再也做不到了。伙计们，我该怎么做：我有 9 个`UIButtons`叫 : `imageCallerButton1`，`imageCallerButton2`有`imageCallerButton3,etc`没有办法使用 for 循环而不是添加 18 行来更改半径？

```
for (int i =9; i<=9; ++i) {
    imageCallerButton1.layer.cornerRadius = 10;
    imageCallerButton1.clipsToBounds = YES;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:35:35.430

您需要先创建一个数组或另一个集合，然后才能使用`for`循环：

```
NSArray *buttons = [NSArray arrayWithObjects: imageCallerButton1, imageCallerButton2, ...];
for (UIButton *btn in buttons) {
    btn.layer.cornerRadius = 10;
    btn.clipsToBounds = YES;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T03:33:44.777

尝试使用 imageCallerButtons 数组。

```
imgCB = new imageCallerButton [9];
for(int i = 0; i < imgCB.length; i++){
   imageCallerButton[i].layer.cornerRadius = 10;
    imageCallerButton[i].clipsToBounds = YES;

} 
```

# youtube - youtube 观看次数增加

> ID：11963760
> 
> 赞同：0
> 
> 时间：2012-08-15T03:29:11.753
> 
> 标签：youtube

我在我的网站中添加了 youtube 视频，我有疑问，如果我们在网站上观看视频并且视频 youtube 的观看次数可能会增加。

需要紧急回复。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:43:55.600

我想你可以从[这里](http://www.atlantaanalytics.com/practicing-web-analytics/how-does-youtube-video-view-count-work/)得到答案：

> YouTube 视频计数将在以下情况下增加：
> 
> 1.  您在 youtube.com 上观看视频，只要您不重新加载视频无数次（尤其是当它接近 308 次观看时）。
> 2.  您在另一个需要您点击播放的域上观看嵌入式视频（使用 YouTube 自己的 HTML5 或 Flash 播放器）。
> 
> 在以下情况下，YouTube 不会增加视频计数：
> 
> 1.  您在启用了自动播放功能的播放器中观看嵌入的视频（视频在页面加载后立即开始播放）。
> 2.  您观看通过 YouTube API 通过专有播放器加载的视频。

# java - 如何检测按钮何时在android上按下和释放

> ID：11963763
> 
> 赞同：28
> 
> 时间：2012-08-15T03:29:53.370
> 
> 标签：java, android, button, timer, pressed

我想启动一个计时器，该计时器从第一次按下按钮时开始，并在释放按钮时结束（基本上我想测量按下按钮的时间）。我将在这两个时间都使用 System.nanoTime() 方法，然后从最后一个数字中减去初始数字，以测量按住按钮时经过的时间。

（如果您对使用 nanoTime() 以外的其他方法或其他测量按钮按住时间的方法有任何建议，我也愿意接受。）

谢谢！安迪

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-15T04:23:11.383

使用[OnTouchListener](https://developer.android.com/reference/android/view/View.OnTouchListener.html)代替 OnClickListener：

```
// this goes somewhere in your class:
  long lastDown;
  long lastDuration;

  ...

  // this goes wherever you setup your button listener:
  button.setOnTouchListener(new OnTouchListener() {
     @Override
     public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
           lastDown = System.currentTimeMillis();
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
           lastDuration = System.currentTimeMillis() - lastDown;
        }

        return true;
     }
  }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T05:41:18.047

这肯定会奏效：

```
button.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            increaseSize();
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            resetSize();
        }
        return true;
    }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-15T05:38:14.763

1.  在 onTouchListener 中启动计时器。
2.  在 onClickListener 中停止时间。

计算差异。

# python - pyes 范围查询语法

> ID：11963768
> 
> 赞同：3
> 
> 时间：2012-08-15T03:30:33.843
> 
> 标签：python, elasticsearch, pyes

我正在尝试将下面的弹性搜索转换为 pyes 查询，但我找不到有关如何使用范围查询的示例（尤其是时间戳）。有人可以帮忙吗？

弹性搜索查询

```
{
  "query": {
    "bool": {
      "must": [
        {
          "term": {
            "field1": "abcd"
          }
        },
        {
          "query_string": {
            "default_field": "@field2",
            "query": "efgh"
          }
        },
        {
          "range": {
            "timestamp": {
              "gte": "2012-08-14T20:45:09.000Z"
            }
          }
        }
      ],
      "must_not": [
        {
          "term": {
            "@field3": "ijkl"
          }
        }
      ]

    }
  },
  "size": 1,
} 
```

我的 Python 脚本（使用 pyes）来获得结果，我使用的是 pyes 0.19.1

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
from pyes import *

conn = ES('127.0.0.1:9200')

def main():
    try:
        q1= TextQuery('field1','abcd')
        q2=TextQuery('@field2','efgh')
        q3=Range('@timestamp','2012-08-14T20:45:09.000Z','2012-08-14T20:45:09.000Z')
        q4=TextQuery('@field3','ijkl')
        q = BoolQuery(must=[q1, q2,q3],must_not=[q4])
        results = conn.search(q,size='1')
        for r in results:
            print r;
    except:
        pass

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:15:18.173

尝试将其替换`Range`为

```
RangeQuery(qrange=ESRange('@timestamp',from_value='2012-08-14T20:45:09.000Z',to_value='2012-08-14T20:45:09.000Z')) 
```

我相信这会起作用，只要您的时间戳值与映射中的格式匹配。

# php - Javascript onclick 事件

> ID：11963769
> 
> 赞同：2
> 
> 时间：2012-08-15T03:30:51.677
> 
> 标签：php, javascript, ajax

我想根据用户在我的搜索表单中单击的内容将用户重定向到另一个页面，该搜索表单使用 ajax 从数据库中填充。

我将如何制作一个 onclick 事件，将页面重定向到另一个页面并传递一个 ID 参数？

目前，只要您从下拉搜索菜单中突出显示一个选项，它就会将我发送到一个新页面（称为 some_page.php？具有正确的卡 ID，我唯一要更改的是仅在用户单击时将其发送到那里卡片。

![在此处输入图像描述](../Images/485ea4eb1c6c55d7c8a5954f134b0e06.png)

**JS**

```
function display(id)
    {
        //document.getElementById('text_content').value = word;
            document.getElementById('box').style.display = 'none';
        document.getElementById('text_content').focus();
        window.location.href = "some_page.php?card_id=" + id;

    } 
```

## **php**

```
<?php
    $mysqli = mysqli_connect('localhost', 'root', '', 'draftdb');

if(mysqli_connect_errno()) 
{
    echo "Connection Failed: " . mysqli_connect_errno();
    exit();
}

<?php
        $str = $_GET['content'];
        if(strlen($str))
        {
            $sel = mysqli_query($mysqli, "select CARD_NAME, CARD_ID,CARD_TYPE from cards where CARD_NAME like '".trim($str)."%'");
            if(mysqli_num_rows($sel))
            {
                echo "<table border =\"0\" width=\"100%\">\n";
                if(mysqli_num_rows($sel))
                {
                    echo "<script language=\"javascript\">box('1');</script>";
                    while($row = mysqli_fetch_array($sel))
                    {
                        $card_info = str_ireplace($str,"<b>".$str."</b>",($row['CARD_NAME']));
                        $card_type = str_ireplace($str,"<b>".$str."</b>",($row['CARD_TYPE']));

                echo "<tr id=\"word".$row['CARD_ID']."\" onmouseover=\"highlight(1,'".$row['CARD_ID']."');\" onmouseout=\"highlight(0,'".$row['CARD_ID']."');\" 
       onClick=\"display('".$row['CARD_NAME']."', " . $row['CARD_ID'] . ");\" >\n<td>".$card_info." ".$card_type."</td>\n</tr>\n";

                    }
                }
                echo "</table>";
            }
        }
        else
        {
            echo "<script language=\"javascript\">box('0');</script>";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:58:14.297

如果我是你，我会使用标准表单提交。并非所有互联网用户都支持 Javascript。您当然不想回复将其用于会影响或破坏您网站功能的事情。我坚信，如果您使用 Javascript，请提供明确的后备方案。在您的情况下，如果他们没有启用 Javascript……那么他们根本无法搜索。

用户提交表单，例如：

`<form method="POST" id="myForm" action="search.php">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:01:12.060

我会重做代码，并使用这样的东西：

**PHP：**

```
<?php
$mysqli = mysqli_connect('localhost', 'any_user_other_than_root', 'secure_password_here', 'draftdb');
if(!$mysqli) 
{
    die('Connection Failed: ' . mysqli_connect_errno());
}
$str = $_GET['content'];
if(!empty($str))
{
    $str = trim(mysqli_real_escape_string($mysqli, $str));
    $sel = mysqli_query($mysqli, "SELECT `card_name`, `card_id`, `card_type` FROM `cards` WHERE `card_name` LIKE '$str%'");
    if(mysqli_num_rows($sel) > 0)
    {
        echo '<form action="some_page.php" method="post">' . PHP_EOL;
        echo '<select name="card_id" id="card_id" size="8">' . PHP_EOL;
        while($row = mysqli_fetch_array($sel))
        {
            $card_info = str_ireplace($str, "<strong>$str</strong>", $row['CARD_NAME']);
            $card_info = str_ireplace($str, "<strong>$str</strong>", $row['CARD_TYPE']);
            echo '<option class="card" value="'. $row['CARD_ID'] . '">';
            echo "$card_info $card_type";
            echo '</option>' . PHP_EOL;
        }
        echo '</select>' . PHP_EOL;
        echo '</form>' . PHP_EOL;
    }
}
?> 
```

**CSS：**

```
<style type="text/css">
    .card {
        background: #eee
    }
    .card:hover {
        background: #ccc
    }
</style> 
```

当然，需要 CSS 让它看起来像你现在拥有它，并且可能需要一些 JS。

# scala - 如何制作一个ArrayBuffer的ArrayBuffer

> ID：11963776
> 
> 赞同：2
> 
> 时间：2012-08-15T03:32:31.217
> 
> 标签：scala, collections

我想要一个 ArrayBuffer 的二维数组

像这样的东西：

```
var myRowOfStrings = new ArrayBuffer[String]
val myArrayOfRows = new ArrayBuffer[ArrayBuffer] // To store many ArrayBuffer[String] 
```

但是 Scala 编译器不喜欢第二个声明：

```
scala> val myArrayOfRows = new ArrayBuffer[ArrayBuffer]
<console>:8: error: class ArrayBuffer takes type parameters
       val myArrayOfRows = new ArrayBuffer[ArrayBuffer]
                                       ^ 
```

我的语法错了吗？

或者 ArrayBuffer 的 ArrayBuffer 是不可能的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T03:35:13.043

`ArrayBuffer`对象需要类型。它在错误消息中这么说。

你需要告诉编译器`ArrayBuffer`你想要什么类型。

```
scala> import scala.collection.mutable.ArrayBuffer
import scala.collection.mutable.ArrayBuffer

scala> val myArrayOfRows = new ArrayBuffer[ArrayBuffer[String]]
myArrayOfRows: scala.collection.mutable.ArrayBuffer[scala.collection.mutable.ArrayBuffer[String]] = ArrayBuffer() 
```

如果它更容易，请考虑这样做。

```
type Row = ArrayBuffer[String]
var myRowOfStrings = new Row
val myArrayOfRows = new ArrayBuffer[Row] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-15T21:18:28.620

在应用之前导入 ArrayBuffer：

```
import scala.collection.mutable.ArrayBuffer
var e = ArrayBuffer("a", "b", "c") 
```

```
scala> e: scala.collection.mutable.ArrayBuffer[String] = ArrayBuffer(a, b, c) 
```

# ravendb - 何时在 RavenDB 中评估 groupby 查询？

> ID：11963777
> 
> 赞同：1
> 
> 时间：2012-08-15T03:33:02.003
> 
> 标签：ravendb

我正在努力解决使用[RavenDB](http://ravendb.net/)和 LuceneQuery 进行分组的行为。

我一直认为 IEnumerable 仅在调用 ToArray() 等时才被评估。

为了清楚起见，以下查询分为两部分。

我不希望在toArray() 调用tolledBalanceList 之后评估查询，我的期望是在服务器上对所有数据进行分组。但是，实际结果取决于 .Take() 中规定的项目数量。如果没有 Take(1024)，则返回默认 128 个项目的结果。

我需要能够对整个数据集进行分组。

```
using (var session = MvcApplication.RavenSession)
{
    var computedBalanceList =
        from c in session.Advanced.LuceneQuery<Journal, Ledger_ByDateAndDebitIdAndCreditIdAndValues>()
        .Where(parameters)
        .OrderBy(c => c.DateAsString).Take(1024)
        select new LedgerBalanceDto
        {
            Account = account,
            Name = queryName,
            Debits = c.DebitId == account.Id
                         ? c.DebitValue
                         : 0,
            Credits = (c.CreditId == account.Id)
                          ? c.CreditValue
                          : 0,
            Currency = (c.DebitId == account.Id) ? c.DebitCurrency : c.CreditCurrency,
            CurrencySymbol = (c.DebitId == account.Id) ? c.DebitCurrencySymbol : c.CreditCurrencySymbol,
        };

    var totalledBalanceList =
        from balance in computedBalanceList
        group new {balance.Debits, balance.Credits} by new {balance.Currency, balance.CurrencySymbol}
        into grouping
        select new LedgerBalanceDto
        {
            Account = account,
            Currency = grouping.Key.Currency,
            CurrencySymbol = grouping.Key.CurrencySymbol,
            Debits = grouping.Sum(c => c.Debits),
            Credits = grouping.Sum(c => c.Credits),
            Name = queryName
        };

    return totalledBalanceList; 
```

和索引：

```
public class Ledger_ByDateAndDebitIdAndCreditIdAndValues:AbstractIndexCreationTask<Journal>
{
    public Ledger_ByDateAndDebitIdAndCreditIdAndValues()
    {
        Map = journals => from c in journals
                          select new {c.Date,c.DateAsString, c.DebitId, c.CreditId,c.DebitValue,c.CreditValue};

        Index(x=>x.Date,FieldIndexing.Analyzed);
        Index(x=>x.DateAsString,FieldIndexing.Analyzed);
        Index(x=>x.DebitId,FieldIndexing.Analyzed);
        Index(x=>x.CreditId,FieldIndexing.Analyzed);

        Index(x=>x.DebitValue,FieldIndexing.Analyzed);
        Index(x=>x.CreditValue,FieldIndexing.Analyzed);

        Sort(x=>x.DateAsString,SortOptions.String);
    }
} 
```

我还重写了查询，以便分组发生在过滤器“外部”，但我得到完全相同的结果，即结果取决于 Take()。

```
var totalledBalanceList = from balance in
    from c in query
        .Where(parameters)
        .OrderBy(c => c.DateAsString)
    select new LedgerBalanceDto
    {
        Account = account,
        Name = queryName,
        Debits = c.DebitId == account.Id
                     ? c.DebitValue
                     : 0,
        Credits = (c.CreditId == account.Id)
                      ? c.CreditValue
                      : 0,
        Currency = (c.DebitId == account.Id) ? c.DebitCurrency : c.CreditCurrency,
        CurrencySymbol = (c.DebitId == account.Id) ? c.DebitCurrencySymbol : c.CreditCurrencySymbol,
    }
    group new {balance.Debits, balance.Credits} by new {balance.Currency, balance.CurrencySymbol}
    into grouping
    select new LedgerBalanceDto
    {
        Account = account,
        Currency = grouping.Key.Currency,
        CurrencySymbol = grouping.Key.CurrencySymbol,
        Debits = grouping.Sum(c => c.Debits),
        Credits = grouping.Sum(c => c.Credits),
        Name = queryName
    };
return totalledBalanceList; 
```

对此的任何想法将不胜感激。

部分期刊类：

```
public class Journal
{
    public string Id { get; set; }
    public string DebitId{get;set;}
    public string CreditId{get;set;}
    public decimal? ExchangeRate { get; set; }
    public decimal CreditValue {get;set;}
    public decimal DebitValue {get;set;}
    public string DebitCurrency {get;set;}
    public string CreditCurrency {get;set;}
    public decimal Nett
    {
        get { return _nett; }
        set
        {
            _nett = value;

            CreditValue = Math.Round(Nett, 2);
            DebitValue = Math.Round(Nett * (ExchangeRate ?? 1), 2);
        }
    }
   etc ...
} 
```

示例数据 IEnumerable `<Journal`>:

```
Id     DebitId       CreditId      Nett     ExchangeRate     DbCurr     CrCurr   DbVal    CrVal

1      Expense1      Bank          100      2.03             BRL        USD      203.00   100.00
2      Expense2      Bank          50       null             USD        USD      50.00     50.00
3      Bank          Client1       300      null             USD        USD      300.00   300.00
4      Stock         Bank          300      null             USD        USD      300.00   300.00 
```

例如，当我查询银行时，我希望能够将 DbVal 和 CrVal 相加并计算余额，但为此，我必须将其中一个或另一个归零（根据查询）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:58:34.403

您在这里混合了[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)和 Lucene 查询，这意味着它们将在*client*上进行评估。

您需要将其中的很多内容移动到使用 session.Query 而不是 session.Advanced.LuceneQuery 的索引和查询中。

# html - 显示：内联不工作

> ID：11963780
> 
> 赞同：19
> 
> 时间：2012-08-15T03:33:09.133
> 
> 标签：html, css, list, unordered

我对 html 和 css 还很陌生。

我学习了基础知识和一些高级技术，但是很长一段时间以来我一直遇到列表问题，并且想知道如何解决我的问题。

这是想法。

我正在开一家网上商店，但我想避免使用不同的 ID 定位每一个图像、文本、链接。

我有这个想法，我会将我的 li 放在一个 div 中，这样，我列表中的所有内容都会卡在这个盒子里，让一个类正确定位我的文本、链接、图像，使用 display:inline 等等，我可以仅使用一个类创建整个产品页面。

问题是显示：内联不起作用。

如果有人可以帮助我解决这个问题，我将不胜感激。

这是一个不好的例子，但是，您了解原理。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
    #nav_bar {margin:0px;padding:0px;list-style-type:none;text-align:center;}
    .nav_button {background-color:purple;width:100px;height:50px;}
    .nav_button:hover {background-color:pink;}
    .nav_button li {display:inline;} /* Not working ?!? */
    .nav_button a {position:relative;color:white;text-decoration:none;top:13px;}
</style>
</head>

<body>
    <table style="width:600px;margin:0 auto;">
        <tr>
            <td>
                <ul id="nav_bar">
                    <div class="nav_button"> <li> <a href="#">Home</a> </li> </div>
                    <div class="nav_button"> <li> <a href="#">Contact us</a> </li> </div>
                    <div class="nav_button"> <li> <a href="#">Shipping</a> </li> </div>
                    <div class="nav_button"> <li> <a href="#">About us</a> </li> </div>
                </ul>
            </td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-15T03:35:43.793

`display:inline`非常有限，不允许添加任何**块级**样式。你最好使用`display:inline-block`或使用`float:left`. 请记住，如果您使用浮点数，那么您需要将父元素的溢出设置为`overflow:auto`（对于 IE < 8 使用可见），这应该可以工作。首先使用内联块。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T03:37:18.957

它不起作用的原因是因为您在 div 内使用它并且该 div 元素只有 li 元素，如果您在 div 下有多个 li 元素，则 inline 属性将起作用。

尝试这个

```
<ul id="nav_bar">
    <li class="nav_button"> <a href="#">Home</a> </li>
    <li class="nav_button"> <a href="#">Contact us</a> </li>
    <li class="nav_button"> <a href="#">Shipping</a> </li>
    <li class="nav_button" > <a href="#">About us</a> </li>
 </ul> 
```

和CSS

```
#nav_bar .nav_button {display:inline-block;} 
```

或者您也可以使用：

```
#nav_bar .nav_button {float:left;width:40px;}/*you will need to specify the width*/ 
```

如果您使用该`float`方法，请确保您使用的`clear:both;`是最后指定的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-04T17:25:51.080

note that : if the parent element width is too short to display horizantally then

```
ul {
width: 20px;
}
li
{
display: inline;
} 
```

will not work.

also under li element if you have display:block; statement such as

```
li
{
display: inline;
}
li a{
display: block;
} 
```

not work.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-18T00:49:01.463

内联元素不接受高度和宽度。它只会忽略它。因此，您在 css 中输入的高度和宽度将被忽略，这就是空 div 不可见的原因。此外尝试使用内联块，它会解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-03T15:45:41.480

利用

```
 display:flex; 
```

它对我有用

# scheme - SICP 类型和变量

> ID：11963783
> 
> 赞同：0
> 
> 时间：2012-08-15T03:33:32.407
> 
> 标签：scheme, sicp

这是来自[MIT 6.001 Online Tutor](http://icampustutor.csail.mit.edu/6.001-public/tutor.cgi)，它是第三个问题集的一部分。

**问题：指出下列每个表达式的类型。如果您需要类型变量，请使用 A、B、C 等，从 A 作为最左边的变量开始。**

1.  `(lambda (x y) x)`=`A,B->A`
2.  `(lambda (p) (p 3))`
3.  `(lambda (p x) (p x))`=`(A->B), A->B`
4.  `(lambda (x y comp) (if (comp x y) x y))`

如您所见，我解决了 1 和 3，但这主要是不走运。我仍然无法理解这个概念，这阻止了我解决 2 和 4。

演讲幻灯片可以在[这里](https://docs.google.com/viewer?url=http://icampustutor.csail.mit.edu/6.001-public/courseexport/lessons/Lesson6/lecture6.pdf)找到（查看最后几张）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:46:34.620

1.  A, B -> A
2.  (数字 -> A) -> A
3.  (A -> B), A -> B
4.  A, A, (A, A -> 布尔值) -> A

（最后一个假设`x`和`y`是相同的类型）

# android - EditText 数组列表

> ID：11963803
> 
> 赞同：1
> 
> 时间：2012-08-15T03:36:29.487
> 
> 标签：android

有没有办法将 EditText 存储到列表数组中。例如，

```
n1I1 = (EditText) findViewById(R.id.etN1I1);
n1I2 = (EditText) findViewById(R.id.etN1I2);
n1I3 = (EditText) findViewById(R.id.etN1I3);
n2I1 = (EditText) findViewById(R.id.etN2I1);
n2I2 = (EditText) findViewById(R.id.etN2I2);
n2I3 = (EditText) findViewById(R.id.etN2I3); 
```

进入

```
FirstList[]={n1I1,n1I2,n1I3}
SecondList[]={n2I1,n2I2,n2I3}. 
```

我想要这样，这样我就可以很容易地跟踪用户输入的数字。在此期间，如何将双精度（例如 31.12）值存储到数组列表中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:53:06.543

使用`ArrayList`对象，而不是常规数组：

```
ArrayList<EditText> firstList = new ArrayList<EditText>();
firstList.add(n1I1);
firstList.add(n1I2);
firstList.add(n1I3);

ArrayList<EditText> secondList = new ArrayList<EditText>();
secondList.add(n2I1);
secondList.add(n2I2);
secondList.add(n2I3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:09:02.277

您有 2 个选项：

```
 //Array
    EditText[] FirstList = {n1I1,n1I2,n1I3};

    //or ArrayList      
   List<EditText> FirstList = new ArrayList<EditText>(){{
     add(n1I1);
     add(n1I2);
     add(n1I3);
   }}; 
```

# html - 适当的 css 以确保 body 元素填满整个屏幕

> ID：11963813
> 
> 赞同：1
> 
> 时间：2012-08-15T03:38:06.070
> 
> 标签：html, css

我的身体元素有问题。它似乎填充了 100% 的屏幕。但是，如果您将浏览器拖小然后向下滚动 - 主体不会延伸。

请[将此 jsFiddle](http://jsfiddle.net/sheriffderek/LBu8z/1/)视为一个主要示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T03:50:50.437

`height: 100%;`是您的网站显示的窗口的高度，而不是网站的高度，这会导致向下滚动时背景变紫。

只需添加以下内容：

```
html { background: green; } 
```

并删除

```
body { background: green; } 
```

使背景始终为绿色。( [JSFiddle](http://jsfiddle.net/LBu8z/7/) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:31:56.147

我相信[这个 FIDDLE](http://jsfiddle.net/sheriffderek/LBu8z/)回答了这个问题。我一直在生产中使用它，并且效果很好。

**HTML：**

```
<html>
    <body>
        <div class="main-wrapper contain">

            <section class="main-content">                    
                Main Content
            </section> <!-- end .main-wrapper -->

            <div class="other-thing">
                Other thing for example.
            </div>

        </div> <!-- .main-wrapper -->
    </body>
</html> 
```

**CSS：**

```
/* hard reset */
* { 
    -moz-box-sizing: border-box; 
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
    position: relative;
    padding: 0; margin: 0;
} 

/* micro clear fix (clears floats) */
    .contain:before,
    .contain:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}
.contain:after {
    clear: both;
}
.contain {
    *zoom: 1;
}

html {
    height: 100%; /* 01 */
    /* tells html to go ahead and feel free to be 100% height */
}

body {
    min-height: 100%; /* 02 */
    /* expands to push html to the limit */
}

.main-wrapper {
    /* overflow: hidden; */
    /* in this case - forces wrapper to contain content (like a clear-fix) */
    /* use clear fix instead */

}

/* if you see yellow - we are failing */

.main-content {
    width: 100%;
    float: left;
}

.other-thing {
    width: 100%;
    float: left;
} 
```

我已经对此进行了测试-假设您保留了所有容器和实际包含的东西，它似乎在每种情况下都有效。这个溢出肯定有缺点：隐藏；否则人们不会使用 clear-fix。所以 - 我很想听到更多的意见。

或者，我认为 html 和 body 可以是 100%，然后 .main-wrapper 可以是 min-height: 100%; 这也有效。基本上 - 有些东西需要迫使它的所有容器伸展。为了做到这一点，所有这些容器都必须设置为 100%，以便他们记住自己拥有这种能力。还是我将 div 拟人化太多了...

**2021 年更新：** 网络的本质是允许内容定义“形状”或“空间”或任何你想称呼它的东西......所以 - 身体并不真正知道它有多“高”。它知道它是 100% 宽度，因为它是块级元素。所以，除非你告诉 HTML 是 height: 100%，然后是每个孩子……那么他们就不会真正知道“100%”的真正含义。100% 什么？对于仪表板应用程序和桌面全屏布局，您可能需要设置高度（但在大多数情况下不是） -`vh`现在可以使用 100 个单位。一般规则：让内容决定它的父元素的大小并与 Web 的性质一起工作。（忽略上面的所有代码！现在是 2021 年：flex-box + grid！: )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:46:35.090

只需`height: 100%;`从您的`<body>`and 中删除，然后`height: 300px;`从您的中删除`<figure>`，您就可以开始了。

您也可以使用此代码：http: [//jsfiddle.net/Asustaba/LBu8z/8/](http://jsfiddle.net/Asustaba/LBu8z/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-25T08:31:20.643

1）如果你想让body填满整个屏幕，同时解决2件事（由于body有动态内容）

1.  内容不足：主体至少与视口一样高，因为您的主体没有足够的内容来填满屏幕
2.  内容过多：body 应该和 html 一样高

现在您可以使用**min-height:100vh**，这意味着视口高度的 100%：http: [//jsfiddle.net/LBu8z/89/](http://jsfiddle.net/LBu8z/89/)

除 Opera Mini 外，所有浏览器都支持它：caniuse.com/#search=vh

2）如果你想要一个固定的背景图片，那么我建议拉伸一个固定位置的body：after

我在生产中需要这个解决方案，因为 background-sizing:cover 在固定的背景下无法正常工作，因此我必须制作 body:after 固定并且背景图像不固定。你可以在这里查看：[https ://www.doklist.com/](https://www.doklist.com/)

```
body:after{
  content:"";
  background:green;
  position:fixed;
  top:0;
  bottom:0;
  left:0;
  right:0;
  z-index:-1;
} 
```

3）如果你只想用身体做，那么：用溢出滚动拉伸一个固定的身体。但请注意，它可能会干扰某些元素（例如引导工具提示和弹出框）

```
body {
    background: green;
    overflow-y:scroll;
    position:fixed;
    top:0;
    bottom:0;
    left:0;
    right:0;
} 
```

# javascript - 使用 struts 标记和通过 Javascript 的动态行为以形式保留值

> ID：11963816
> 
> 赞同：0
> 
> 时间：2012-08-15T03:38:46.483
> 
> 标签：javascript, jsp, struts2, struts-html

我有一个 JSP 页面，其中包含一个添加按钮以通过 Javascript 添加行（一个 HTML 代码）。我现在需要通过用 struts-tags 替换 JSP 中的代码来保留表单中的值。那么我应该如何从 struts-tags 和 JS 进行通信。既然所有的HTML代码都在JS里，那应该怎么用struts-tags？？？

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:09:13.903

您的问题太模糊，无法给出适当的答案。但是，我最近做了类似的事情，所以我会尝试给你一些指导。

1.) 如果您希望使用来自服务器的信息填充这些行，这将需要一个 ajax 调用。最有可能返回仅包含表行的 jsp 片段的操作。

我建议避免使用 struts2-jquery 插件，除非您已经在应用程序中使用它。我只会使用 jQuery - [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

2.) 如果您希望在这些行中收集用户输入，您只需确保为您的字段使用适当的命名。

例如：在您的 java 操作中，您有一个 List<String> 名称。您需要通过 js 生成以下 html。

```
<tbody>
   <tr>
       <input type="text" name="names[0]">
   </tr><tr>
       <input type="text" name="names[1]">
   </tr><tr>
       <input type="text" name="names[2]">
   </tr>
</tbody> 
```

3.) 如果您希望跟踪添加的行数，您可以在 jsp 中使用它...

```
<s:hidden name="rowsCount" id="rowsCount" value="0"> 
```

然后在您的 javascript 中更改该输入的值。

希望这三个中的一个有所帮助！

# php - 教义在我的课堂上没有找到@UniqueEntity

> ID：11963817
> 
> 赞同：1
> 
> 时间：2012-08-15T03:38:48.627
> 
> 标签：php, symfony, doctrine-orm

我在 User.php 中使用它

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

* @ORM\HasLifecycleCallbacks
* @ORM\Table(name="user")
* @UniqueEntity("email") 
```

但我收到了这个错误

> [Doctrine\Common\Annotations\AnnotationException] [语义错误] 类 ...\Entity\User 中的注释“@UniqueEntity”从未导入。您是否可能忘记为此注释添加“使用”语句？

我什至尝试过 ORM\UniqueEntity 但它也没有用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T04:04:24.240

它不是教条约束，而是 Symfony 的

检查[UniqueEntity](http://symfony.com/doc/current/reference/constraints/UniqueEntity.html)约束。

```
// DON'T forget this use statement!!!
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity; 
```

# mysql - MySQL 中用于插入的 ROW_NUMBER() 等效项

> ID：11963818
> 
> 赞同：9
> 
> 时间：2012-08-15T03:38:56.903
> 
> 标签：mysql, sql, row-number

我正在尝试将在 Microsoft SQL Server 中创建以使用链接服务器运行的 SQL 脚本转换为可在 SQL 过程中使用的脚本，我正在使用的脚本

```
ROW_NUMBER() OVER(ORDER BY [FIELDS]) 
```

创建一个不依赖于自动增量的主键，当我尝试将代码保存为过程时，我收到此错误

> 错误 1064 (42000)：您的 SQL 语法有错误：检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 [LINENO] 行的“（ORDER BY [FIELDS]）”附近使用

显然错误是说 ROW_NUMBER OVER 不正确，因为我删除了 OVER 位并得到一个错误，说 ROW_NUMBER 未定义

在我搜索的任何地方，我什么都没有得到，但人们在 SELECT 语句中询问这个问题，而不是 INSERT 语句，并且大多数时候的答案只是获取行数或插入最后一个 id，所以我可以用什么来创建与 Microsoft Server 中的 ROW_NUMBER() 相同的数据

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T03:46:26.470

不幸的是，在 MySQL 中没有`ROW_NUMBER()`等价物，但您仍然可以通过创建一个简单的变量来模拟它，该变量保存一个值并在每一行递增。

例子：

```
SET @rank=0;
SELECT   @rank := @rank+1 AS rank, fruit, amount
FROM     sales
ORDER BY amount DESC; 
```

*   [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/1b14f/2 "点击演示")

# c++ - 如何在 C/C++ 中从 6 个线性方程中求解 6 个未知数

> ID：11963826
> 
> 赞同：0
> 
> 时间：2012-08-15T03:40:07.707
> 
> 标签：c++, c, opencv, equation

> **可能重复：**
> [C++ 中的线性方程组？](https://stackoverflow.com/questions/2474432/system-of-linear-equations-in-c)

嗨，是否有任何内置函数可以求解具有 6 个未知数的线性方程组。假设我们也有 6 个方程。

有没有简单有效的方法来解决这些方程？

# android - 在每个 listview 项目中使用 ProgressBar 时，Listview 有黑色背景（Android > 3.0）

> ID：11963827
> 
> 赞同：0
> 
> 时间：2012-08-15T03:40:12.390
> 
> 标签：android, android-layout, android-widget

请帮我解决这个问题。我在 ListView 的每个项目中都使用了一个进度条（用于延迟加载）。它在 Android 2.2.3 中运行良好，但是当我在 Android 4.1.1 或 Android 3.2 中运行该应用程序时，我遇到了问题。请参阅我的附件： ![在此处输入图像描述](../Images/2a46959bbee3f46da13bb47e72f27a2a.png)

请看“红色”矩形。背景是黑色的。当我滚动列表视图时会发生这种情况。而且我在 getView 方法（ArrayAdapter，只显示文本）中没有做太多事情。如果我设置进度条 Visible = Gone。列表视图运行良好。

您是否曾经遇到过同样的问题或有解决方案，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:42:15.960

将 listview cacheColorHint 设置为透明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:32:33.637

您还可以设置 listview 属性`android:scrollingCache="false"`，`cacheColorHint`并将`transparent`.

# mysql - 重复键忽略 - 更新多个表

> ID：11963830
> 
> 赞同：0
> 
> 时间：2012-08-15T03:41:29.983
> 
> 标签：mysql, insert, duplicates

我正在尝试将数据插入到两个表（table1 和 table2）中，条件是输入到 table1 中的数据的唯一性。Table1 在流行 & 电子邮件 & 社区上有一个独特的键集。这个想法是，如果同一个人在附近提交相同的流行音乐，那么任何一张桌子都不会发生任何事情。如果其他人进入相同的人口和社区，那么它会在 table1 中输入数据并将 table2 中的投票数增加 1。我听说有些人在谈论“忽略重复键”，我认为如果按如下方式实现它会起作用，但我是实际上不确定该命令是否真实：

```
 mysql_query("INSERT INTO `table1` VALUES ('$pop','$first', '$last', '$email',
'$neighborhood') on duplicate key ignore (INSERT INTO `table2` 
VALUES ('$pop', '$neighborhood','$votes', '$city') ON DUPLICATE KEY UPDATE 
`votes` = `votes` +1)"); 
```

我有以下代码工作，但了解它会将数据输入到 table2 中，而不管 table1 中的唯一数据如何。

```
 mysql_query("INSERT INTO `table1` VALUtS ('$pop','$first', '$last', '$email', '$neighborhood')"); 
 mysql_query("INSERT INTO `table2` VALUES ('$pop', '$neighborhood', '$votes', '$city') ON DUPLICATE KEY UPDATE `votes` = `votes` +1"); 
```

请让我知道，如果你有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:32:14.947

为什么没有一张桌子？将您的唯一键更改为 pop,neighborhood,email（所以 pop,neighborhood 是最左边的两个，可以在一个组中使用）并删除“votes”列。然后，您可以运行类似的查询`SELECT pop, neighborhood, count(*) AS votes FROM table1 GROUP BY pop,neighborhood;`

我不认为有任何这样的东西`ON DUPLICATE KEY IGNORE`，但是`INSERT IGNORE INTO ...`基本上说如果插入失败，不返回任何错误。如果您需要保留单独的表，则必须运行第一个查询，检查是否有重复键错误，然后将重复键更新插入到第二个表中。

# php - 将 MySQL 从 localhost 移动到远程服务器

> ID：11963838
> 
> 赞同：0
> 
> 时间：2012-08-15T03:42:39.043
> 
> 标签：php, mysql, phpmyadmin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:48:50.270

Shouldn't you still use `localhost` as `$host` if you're trying to connect via the application? The script is on the same server as the DB.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:49:55.387

Ah, this is always the most annoying part of the process. Try this and see if it works:

```
$host="127.0.0.1";  // "localhost" should work, but don't count on it
$username="user"; // username you use to log into phpMyAdmin
$password="password"; // password you use to log into phpMyAdmin
$db_name="dbname"; // database you want to connect to 
```

You'll need to have created this user/password pair and given them the appropriate permissions to access the database. Also note that the mysql PHP functions are deprecated and should not be used. PDO or mysqli are the preferred ones going forward.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:02:54.440

If you are using cPanel, when you create the MySQL table, make sure you assign your user to it (trivial, I know, but Ive forgotten about it a few times myself.)

If your script is running from your remote server, just stick with localhost. Will work fine.

Last, my only suggestion until a better answer is said, try using

```
$host = 'localhost';
$user = 'username'; // Im pretty sure your username isn't root.
$pass = '1234';
$db = 'partnership'; 
/* Alot of hosts like to append your cPanel login to your db and username fields.
Check to see what your table is. It might actually be 'youruser_partnership'  */

$mysqli = new mysqli($host, $user , $pass, $db);
if (mysqli_connect_error()) {
    die('Connect Error (' . mysqli_connect_errno() . ') ' . mysqli_connect_error());
} 
```

If your host supports mysqli (most do). If not, when you do your die statement, still use `die(mysql_error());` to get the exact error. It will more than likely be your username/password you created and assigned to your database

# google-apps-script - 谷歌电子表格图表显示日期范围

> ID：11963839
> 
> 赞同：1
> 
> 时间：2012-08-15T03:42:59.207
> 
> 标签：google-apps-script, google-visualization, google-sheets

我正在使用 Google App Script 构建一个图表来显示来自 Google 电子表格宏的股票价值。我将电子表格值读入 Charts.newDataTable()，然后用 Charts.newNumberRangeFilter() 构造一个过滤器。然后我在仪表板中将过滤器和 LineChart 绑定在一起。

现在，我真正想要的是 Google API 中的 google.visualization.ChartRangeFilter 之类的东西，一个可选择的日期范围以显示在图表中。但是由于某种原因，电子表格宏不提供此功能。所以我正在尝试使用 NumberRangeFilter 来替代。

我遇到的问题是 NumberRangeFilter 为范围的最小值和最大值内的每个日期在图表的 X 轴上分配一个空格，无论我是否为其提供数据。但是，库存数据仅对每周的周一至周五有效。这会在每周之间留下两天的空白水平空间，这不是我想要的效果。这是一个屏幕截图：[screenshot](http://i.imgur.com/fE7y9.png)

我也尝试使用 CategoryPicker，因为它允许我控制使用的值，还允许使用字符串作为日期，但这只允许我一次选择一个日期添加到图表中，这不是一个好的解决方案. 似乎没有办法将它与滑块一起使用。

有谁知道如何在基于 Google 电子表格的 AppScript 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:43:28.483

如果您的数据已排序，您可以将数字设置为行号，因此数字是连续的。但是，过滤器对用户来说变得不太清楚。

您可以使用数字列进行过滤，但仍使用图表上的日期列或字符串列。在下图中，我将我的年份和月份转换为连续数字，过滤到最近 12 个月，使过滤器不可见，并使用字符串列作为自定义标签的 x 轴。 ![图表](../Images/7906a083de178a4d463237aa3802ad59.png)

[添加 ChartRangeFilter](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1946)存在一个未解决的问题。

# html - 在同一行获取图像

> ID：11963842
> 
> 赞同：1
> 
> 时间：2012-08-15T03:43:32.403
> 
> 标签：html, css, drupal, web, drupal-7

我正在开发一个使用drupal (7.14) Marinelli 主题作为模板的网站。我目前正在努力将主菜单与徽标放在同一行。我的页面的网址是[http://quaaoutlodge.com/drupal-7.14/](http://quaaoutlodge.com/drupal-7.14/) - 任何人都可以帮助我了解如何设置 css 属性或将 html 放在一起以使其正确对齐吗？该图标应位于主菜单的左侧，黄色背景仅用于调试原因。任何帮助，将不胜感激！谢谢！page.tpl.php 中的代码目前如下所示：

```
 <div style="background:#000; height:85px; position:fixed; top:0px; width:100%; text-align: right;padding-right:-20px; filter:alpha(opacity=60);border-bottom:1px solid #999;">
<div style="text-align: left;
            top:0px;
            width:70%;
            padding-left:100px;
            padding-right:auto;
            margin-left:auto;
            margin-right:auto;
            background-color:#FFFF00;"><?php if($logo):print $imagelogo;endif ?>
<div id="navigation-primary" class="sitemenu">
  <?php print $mainmenu; ?>    
</div></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:55:22.360

最简单的解决方案是将`position:absolute`两者`divs`与`top`: 和`margin-left`: 属性一起设置以始终相对修复它们。例如，您也可以将它们都放在左边，在右边`float`设置一个`width`属性和一个。`margin-left``div`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:28:57.443

不要害怕使用负边距来定位彼此。

另见： [http ://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:47:51.653

主要问题是第二个 div（包装徽标和导航的那个）太小，无法舒适地适应徽标和导航。

首先，请给第二个`div`一个`id`（例如“header-wrapper”）并取出样式属性。然后是相关的CSS：

```
#header-wrapper { width: 1038px; margin: 0 auto; }
#logo { top: 15px; position: relative; }
#navigation-primary { float: left; margin-left: 50px; padding-top: 34px; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T04:04:19.033

在这里，这就是你需要做的：http: [//jsfiddle.net/Z4EAb/](http://jsfiddle.net/Z4EAb/)

# bash - Bash 集减法

> ID：11963844
> 
> 赞同：17
> 
> 时间：2012-08-15T03:44:03.040
> 
> 标签：bash

如何在 Bash 中从另一个集合中减去一个集合？

这类似于：[bash 中是否存在“集合”数据结构？](https://stackoverflow.com/questions/7099887/is-there-a-set-data-structure-in-bash)但不同的是它询问如何使用代码执行减法

*   set1：N行作为过滤器的输出
*   set2：M 行作为过滤器的输出

怎么获得：

*   set3：N中所有未出现在M中的行

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-15T05:21:28.677

```
comm -23 <(command_which_generate_N|sort) <(command_which_generate_M|sort) 
```

不带选项的 comm 显示 3 列输出：1：仅在第一个文件中，2：仅在第二个文件中，3：在两个文件中。-23 删除第二列和第三列。

```
$ cat > file1.list
A
B
C
$ cat > file2.list
A
C
D
$ comm file1.list file2.list 
        A
B
        C
    D
$ comm -12 file1.list file2.list # In both
A
C
$ comm -23 file1.list file2.list # Only in set 1
B
$ comm -13 file1.list file2.list # Only in set 2
D 
```

输入文件必须排序。

GNU sort 和 comm 取决于语言环境，例如输出顺序可能不同（但内容必须相同）

```
(export LC_ALL=C; comm -23 <(command_which_generate_N|sort) <(command_which_generate_M|sort)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-18T09:16:11.520

[`uniq -u`(manpage)](https://linux.die.net/man/1/uniq)通常是最简单的列表减法工具：

**用法**

```
uniq [OPTION]... [INPUT [OUTPUT]] 
[...]
-u, --unique
    only print unique lines 
```

**示例：列出在目录 a 中找到但不在 b 中的文件**

```
$ ls a
file1  file2  file3
$ ls b
file1  file3

$ echo "$(ls a ; ls b)" | sort | uniq -u
file2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-30T02:35:52.587

[我最近编写了一个名为 Setdown 的程序](https://robertmassaioli.wordpress.com/2015/01/27/setdown-the-best-tool-for-fast-and-repeatable-line-based-set-operations/)，它从 cli 执行 Set 操作（如设置差异）。

它可以通过编写类似于您在 Makefile 中编写的定义来执行集合操作：

```
someUnion: "file-1.txt" \/ "file-2.txt"
someIntersection: "file-1.txt" /\ "file-2.txt"
someDifference: someUnion - someIntersection 
```

它很酷，你应该检查一下。我个人不推荐“在 unix shell 中设置操作”的帖子。当您确实需要执行许多集合操作或者您有任何相互依赖的集合操作时，它不会很好地工作。

无论如何，我认为这很酷，您应该完全检查一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-19T09:15:27.173

我有一个非常简单的 1-liner：

```
$ now=(ConfigQC DBScripts DRE DataUpload WFAdaptors.log)

$ later=(ConfigQC DBScripts DRE DataUpload WFAdaptors.log baz foo)

$ printf "%s\n" $now $later | sort | uniq -c | grep -vE '[ ]+2.*' | awk '{print $2}'
baz
foo 
```

根据定义，如果两个集合具有共同的元素，则它们相交。在这种情况下，有 2 个集合，所以任何 2 的计数都是一个交集 - 只需用 grep “减去”它们

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-06T02:28:18.433

您可以使用差异

```
# you should sort the output
ls > t1
cp t1 t2 
```

我用 vi 从 t2 中删除了一些条目

```
$ cat t1
AEDWIP.writeMappings.sam
createTmpFile.sh*
find.out
grepMappingRate.sh*
salmonUnmapped.sh*
selectUnmappedReadsFromFastq.sh*

$ cat t2
AEDWIP.writeMappings.sam
createTmpFile.sh*
salmonUnmapped.sh*
selectUnmappedReadsFromFastq.sh* 
```

diff 报告 t1 中不在 t2 中的行

```
diff t1 t2
$ diff t1 t2
3,4d2
< find.out
< grepMappingRate.sh* 
```

拼装版

```
diff t1 t2 | grep "^<" | cut -d " " -f 2
find.out
grepMappingRate.sh* 
```

# c++ - 未调用 C++ 构造函数

> ID：11963849
> 
> 赞同：2
> 
> 时间：2012-08-15T03:44:54.410
> 
> 标签：c++, syntax, constructor, variable-declaration, most-vexing-parse

我是 C++ 新手，这是我第一次使用它的类，我想知道如何调用构造函数？我已经阅读了一些关于 C++ 类的文档，这就是我想出我所拥有的东西的方式。构造函数调用私有方法来设置服务器。

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sstream>
#include <string>
#include "SimpleIni.h"
#include "MySQL.cpp"
#include <thread>

class LoginServer {
    int resSocket;
    MySQL mysql;
    struct sockaddr_in strctAddr;

    private:
        void log(std::string strText, std::string strType = "INFO"){
            time_t rawtime;
            struct tm * timeinfo;
            char buffer[50];
            time(&rawtime);
            timeinfo = localtime(&rawtime);
            strftime(buffer, 50, "%c",timeinfo);
            std::cout << "[" << buffer << "][" << strType << "] > " << strText << std::endl;
        } 

        void error(std::string strError){
            log(strError, "ERROR");
            exit(1);
        }

        int setup(int intPort){
            std::stringstream objStringStream;
            objStringStream << intPort;
            log("Initializing socket server");
            resSocket = socket(AF_INET, SOCK_STREAM, 0);
            if(resSocket < 0) error("Could not create socket.");
            bzero((char *) &strctAddr, sizeof(strctAddr));
            strctAddr.sin_family = AF_INET;
            strctAddr.sin_addr.s_addr = INADDR_ANY;
            strctAddr.sin_port = htons(intPort);
            setsockopt(resSocket, SOL_SOCKET, SO_REUSEADDR, (struct sockaddr *) &strctAddr, sizeof(strctAddr));
            if(bind(resSocket, (struct sockaddr *) &strctAddr, sizeof(strctAddr)) < 0)
                error("Could not bind");
            listen(resSocket, 5);
            log("Listening for clients on " + objStringStream.str(), "FINE");
            return 1;
        }

        int sendPacket(int resSock, std::string strData){
            int intWrite;
            char chBuffer[8192];
            strcpy(chBuffer, strData.c_str());
            log("Sending packet: " + strData, "SEND");
            intWrite = write(resSock, chBuffer, strlen(chBuffer) + 1);
            return intWrite;
        }

        std::string RandomString(int len){
           srand(time(0));
           std::string str = "`~!@#$%^&*()-=_+[]\{]|;:'\",<.>/?0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
           int pos;
           int size = str.size();
           while(size != len) {
            pos = ((rand() % (str.size() - 1)));
            str.erase (pos, 1);
           }
           return str;
        }

        void handleData(int resSock, char* strData){
            char * chData;
            chData = strtok(strData, "\0");
            while(chData != NULL){
                std::string strPacket = chData;
                log("Received data: " + std::string(strPacket), "RECV");
                if(strPacket.compare("<policy-file-request/>") == 0){
                    log("Policy request received");
                    sendPacket(resSock, "<cross-domain-policy><allow-access-from domain='*' to-ports='6112'/></cross-domain-policy>");
                } else if(strPacket.compare("<msg t='sys'><body action='verChk' r='0'><ver v='153' /></body></msg>") == 0){
                    log("Version check received");
                    sendPacket(resSock, "<msg t='sys'><body action='apiOK' r='0'></body></msg>");
                }
                chData = strtok(NULL, "\0");
            }
        }

        void handleClient(int resSock){
            char chBuffer[6486];
            int intRead;
            for(;;){
                bzero(chBuffer, 6486);
                intRead = read(resSock, chBuffer, 6486);
                if(chBuffer == NULL) continue;
                if(intRead <= 0){
                    log("Client disconnected");
                    close(resSock);
                    break;
                } else {
                    handleData(resSock, chBuffer);
                }
            }
        }

        void listenToClients(){
            for(;;){
                std::stringstream objStringStream;
                struct sockaddr_in clntAddr;
                socklen_t intClients = sizeof(clntAddr);
                int resClient = accept(resSocket, (struct sockaddr *) &clntAddr, &intClients);
                if(resClient < 0) log("Failed to accept client", "ERROR");
                setsockopt(resClient, SOL_SOCKET, SO_REUSEADDR, (struct sockaddr *) &clntAddr, sizeof(clntAddr));
                char floatIP[INET_ADDRSTRLEN];
                inet_ntop(AF_INET, &clntAddr.sin_addr, floatIP, sizeof floatIP);
                objStringStream << floatIP;
                log("New client connected (IP: " + objStringStream.str() + ")");
                std::thread objThread(&LoginServer::handleClient, this, resClient);
                objThread.detach();
            }
        }

    public:
        LoginServer();
};
LoginServer::LoginServer(){
    CSimpleIniA objIniParser;
    objIniParser.LoadFile("Settings.conf");
    #define Host objIniParser.GetValue("Database", "Host", NULL)
    #define User objIniParser.GetValue("Database", "User", NULL)
    #define Pass objIniParser.GetValue("Database", "Pass", NULL)
    #define Name objIniParser.GetValue("Database", "Name", NULL)    
    if(!mysql.connect(Host, User, Pass, Name)) error("Could not establish database connection.");
    setup(6112);
    listenToClients();
}

int main(){
    LoginServer objLoginServer();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T03:50:51.880

由于 C++ 中的解析规则：

```
LoginServer objLoginServer(); 
```

不声明类型的对象`LoginServer`。实际上是声明了一个不带参数并按值返回对象的函数*。*`LoginServer`

相反，你想说：

```
LoginServer objLoginServer; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T03:51:24.307

尝试删除括号：

```
LoginServer objLoginServer; 
```

如果您对发生的事情感到好奇，请搜索“最令人烦恼的解析”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T03:48:57.920

每次实例化对象时都应调用构造函数，例如行`LoginServer objLoginServer;` （提示：尝试不带括号）或`LoginServer *objLoginServer = new LoginServer();`，当然记得`delete objLoginServer;`在完成后调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T03:48:44.783

[http://www.cplusplus.com/doc/tutorial/classes/](http://www.cplusplus.com/doc/tutorial/classes/)

阅读这篇文章是一个好的开始。祝你好运。

重要提示：请注意，如果我们声明一个新对象并希望使用其默认构造函数（没有参数的构造函数），我们不包括括号 ()：

```
CRectangle rectb;   // right
CRectangle rectb(); // wrong! 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T03:53:38.410

有多种调用构造函数的方法，但我想你的具体问题是你在调用默认构造函数时放置括号，你需要省略它们：`LoginServer objLoginServer;`

出现这样的问题是因为编译器无法区分声明函数原型和调用默认构造函数。看`A B()`，脱离上下文，它可能是使用默认构造函数创建具有`B`类型名称的对象，或者是返回类型实例的函数。`A``B``A`

# android - “密钥库版本错误”错误。如何创建 version=1 密钥库证书？

> ID：11963852
> 
> 赞同：8
> 
> 时间：2012-08-15T03:46:04.393
> 
> 标签：android, ssl, keytool, android-keystore

我在使用 SSL 时遇到问题，因为我收到以下与我的密钥库相关的错误（使用 keytool 自创建和自签名：http: [//developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)） ：

> 08-14 20:55:23.044: W/System.err(5430): java.io.IOException: 密钥库版本错误。08-14 20:55:23.060: W/System.err(5430): 在 org.bouncycastle.jce.provider.JDKKeyStore.engineLoad(JDKKeyStore.java:812) ...

类中抛出的错误`JDKKeyStore.java`出现在以下代码中：

> 来自 JDKKeyStore.java 的块引用：
> if (version != STORE_VERSION) { if (version != 0) { throw new IOException("Wrong version of key store."); } }
> 
> 块引用

在这种情况下，STORE_VERSION = 1，我的版本 = 3，基于读取我创建的密钥库所持有的证书的详细信息。我不知道如何生成包含 version=1 证书的密钥库。

我发现这个答案很有帮助： [执行 https 调用时错误的版本密钥库](https://stackoverflow.com/questions/6933103/wrong-version-keystore-when-doing-https-call)

但是它要求使用以下参数创建密钥库：

> -storetype BKS
> -provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath
> /path/to/bouncycastle.jar

但是，当我尝试使用以下参数创建 keytool（使用 Mac 上的终端应用程序）时：

> keytool -genkeypair -v -alias androiddebugkey -keyalg RSA -keysize 2048 -validity 10000 -keypass android -keystore /Users/djames/dropbox/bc146keystore/debug.keystore -storepass android -providerclass org.bouncycastle.jce.provider.BouncyCastleProvider –providerpath /用户/djames/dropbox/bc146keystore/

（其中 /Users/djames/dropbox/bc146keystore/ 是充气城堡 jar 的路径：bcprov-jdk16-146.jar）

我收到以下错误：

> keytool 错误：java.lang.RuntimeException：使用错误，？providerpath 不是合法命令 java.lang.RuntimeException：使用错误，？providerpath 不是 sun.security.tools.KeyTool.parseArgs 的合法命令（KeyTool.java： 375) 在 sun.security.tools.KeyTool.run(KeyTool.java:171) 在 sun.security.tools.KeyTool.main(KeyTool.java:166)

我不明白这是在告诉我什么。如果我使用： keytool -help 它告诉我以下是 -genkeypair 选项的有效选项：

> -genkeypair [-v] [-protected] [-alias ] [-keyalg ] [-keysize ] [-sigalg ] [-dname ] [-validity ] [-keypass ] [-keystore ] [-storepass ] [-storetype ] [-providername] [-providerclass [-providerarg]] ... [-providerpath]

但是在我正在使用的 Oracle docs java 版本 6 中（[http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html)）
它告诉我这些是选项：

> -genkeypair {-alias alias} {-keyalg keyalg} {-keysize keysize} {-sigalg sigalg} [-dname dname] [-keypass keypass] {-validity valDays} {-storetype storetype} {-keystore keystore} [-storepass storepass] {-providerClass provider_class_name {-providerArg provider_arg}} {-v} {-protected} {-Jjavaoption}

其中不包括`-providerpath option`. 为什么不一致？（如果我不使用 -providerpath 选项，那么我会在该选项处得到一个未知的类异常：`"-providerclass org.bouncycastle.jce.provider.BouncyCastleProvider"`...）

当我谷歌：keytool -providerpath
我没有得到任何帮助来解决这个问题。

我不确定如何在不解决我的 keytool 问题的情况下解决我的密钥库版本问题。任何建议表示赞赏。

吉姆

```
(Mac OSX 10.6.8 if relevant) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T03:07:11.827

我的问题是使用的充气城堡版本太新了。我不得不使用[146](http://www.bouncycastle.org/download/bcprov-jdk15on-146.jar) - 以后再使用它，它给了我这个错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T02:18:39.857

我能够通过密钥库的版本解决这个问题。请参阅：[创建 BKS 密钥库时出现 keytool 错误：providerpath 不是合法命令](https://stackoverflow.com/questions/12015512/keytool-error-when-creating-bks-keystore-providerpath-is-not-a-legal-command/12135543#12135543)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T03:53:27.783

版本不匹配是针对密钥存储版本，而不是证书版本（对于 v3 X.509 证书，它的值应该为 2）。

您使用的是哪个版本的 JDK `keytool`？您是否指定了命令的完整路径，或者使用了您的`PATH`? 您确定您使用的是 JKS 密钥存储，而不是 JCEKS 存储吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-09T10:38:49.427

为了完成 Ryan 的回答，因为我不得不深入了解如何使用 Bouncy Castle 1.46 生成 BKS，您可以使用[Portecle](http://sourceforge.net/projects/portecle/)生成 BKS。

1.  下载[Boucycastle 提供者 1.46](http://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on/1.46)
2.  安装或解压它。
3.  替换 Portecle 安装目录中的 bcprov.jar（例如：）`C:\Program Files (x86)\Portecle\bcprov.jar`。需要相同的命名。
4.  重新启动 Portecle 并生成您的 BKS 信任库。

这解释[了here](https://joinup.ec.europa.eu/svn/spocs/eSafe/trunk/WP_Supplemental/Cert_Inspect_Portecle-1.7/README.txt)。

* * *

**编辑**：

从 Portecle 1.8 开始，您可以使用 BKS-V1 类型来生成您的信任库，而无需替换`bcprov.jar`.

您可以点击后选择它`New keystore`或通过菜单更改类型`Tools -> Change KeyStore Type`。

# objective-c - MKMapRect 和 MKCoordinateRegion 有什么区别

> ID：11963853
> 
> 赞同：5
> 
> 时间：2012-08-15T03:46:21.237
> 
> 标签：objective-c, xcode4.2

它们都指定了地图中心以及框的大小。

那么为什么要同时使用呢？

一些功能在`MKMapview`使用一个，一些功能使用另一个

*   `(MKCoordinateRegion)regionThatFits:(MKCoordinateRegion)region`
*   `(MKMapRect)mapRectThatFits:(MKMapRect)mapRect edgePadding:(UIEdgeInsets)insets`

他们有什么区别？

更重要的是，我们应该使用哪一个来设置我们看到的区域？

顺便说一句，没有`regionThatFits:edgePadding:`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T03:57:20.387

A`MKCoordinateRegion`是使用度坐标类型定义的，`CLLocationCoordinate2D`它表示地球表面上一个点的纬度和经度。

`MKMapRect`表示在地图视图上用视图坐标 (x, y) 定义的实际平面矩形。

您可以使用函数为您进行转换，例如[MKCoordinateRegionForMapRect](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKitFunctionsReference/Reference/reference.html#//apple_ref/c/func/MKCoordinateRegionForMapRect)

请参阅[http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKitFunctionsReference/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKitFunctionsReference/Reference/reference.html)

为了回答您的最后一个问题，您将使用`MKCoordinateRegion`which 来定义您希望看到的地球表面的哪个区域，并且根据定义，它将设置您的缩放级别。

# websocket - PHP中的模拟js websockets

> ID：11963857
> 
> 赞同：1
> 
> 时间：2012-08-15T03:46:40.777
> 
> 标签：websocket, phpwebsocket

这是js代码

```
websocket = new WebSocket(wsUri);
websocket.onopen = function(evt) { onOpen(evt) };
websocket.onclose = function(evt) { onClose(evt) };
websocket.onmessage = function(evt) { onMessage(evt) };
websocket.onerror = function(evt) { onError(evt) };

websocket.send('some_message'); 
```

它连接到 wsUri，绑定一些处理程序并将“some_message”发送到服务器。我怎样才能在 PHP 中做到这一点？我想从另一个 php 脚本向 wsUri 发送消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:19:52.457

最简单的解决方案是使用 PHP 的 WebSocket 客户端-服务器库，并在脚本中简单地使用客户端部分。似乎有许多可用的解决方案：

*   [phpws](http://code.google.com/p/phpws/)
*   [棘轮](http://socketo.me/)
*   [lemmingzshadow](https://stackoverflow.com/users/949444/lemmingzshadow)的[php-websocket](https://github.com/lemmingzshadow/php-websocket)

# jquery - 添加 event.stopPropagation(); 到所有输入框keyup

> ID：11963866
> 
> 赞同：1
> 
> 时间：2012-08-15T03:48:42.397
> 
> 标签：jquery, stoppropagation

我将使用什么 jquery 函数来停止`keyup`传播`<input>`到身体。

我用于 `event.stopPropagation();`单击特定元素；不确定如何将其用于所有输入。

谢谢大家 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T03:50:23.743

```
$("input, textarea").keyup(function(e){
    e.stopPropagation();    
}); 
```

`textarea`为了安全起见，也添加了它。

# javascript - 使用 Ext.grid.Panel.reconfigure() 打破了网格 RowEditing 插件

> ID：11963870
> 
> 赞同：4
> 
> 时间：2012-08-15T03:49:04.270
> 
> 标签：javascript, web-applications, extjs, extjs4.1

我正在创建一个 extjs 网格面板，它有一组用户可配置的列。该组件为此目的[`Ext.grid.Panel`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel)提供了一种方便的方法。`reconfigure(store, columns)`

此方法按预期工作以重新配置网格的存储/列，而不必完全破坏和重新创建网格。但是，如果您使用[`Ext.grid.plugins.RowEditing`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.RowEditing)插件提供内联行编辑，则在使用新列重新配置网格后，列会不同步。

这尤其令人沮丧，因为 RowEditing 插件已经监视添加/删除/调整列大小并正确处理这些列。我怀疑这只是当前 ExtJs 4.1 版本中的一个疏忽。

我想要的是 RowEditor 在使用新列重新配置网格时更新其编辑器列表和宽度，而不会破坏/重新创建网格/视图。

经过多次谷歌搜索后，似乎我并不是唯一一个寻找具有内联编辑支持的易于重新配置的列列表的人。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T03:49:04.270

提供了一个“重新配置”事件，该[`Ext.grid.Panel`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel)事件在任何时候`reconfigure()`调用该方法后都会触发。然而，在当前 4.1 版本的 ExtJs 中，RowEditing 插件并没有挂钩这个事件！

看来我们需要自己做繁重的工作。最终的解决方案相当简单，尽管花了几个小时才得出最终的代码。

RowEditing 插件创建了 RowEditor 组件的一个实例（明白了吗？记住这两个是分开的，名称相似但组件不同！）。RowEditing 插件与网格挂钩，连接到必要的事件以了解何时显示行编辑器等。RowEditor 是在行上弹出以在网格中进行内联编辑的可视组件。

起初，我尝试了十几种不同的方式重新配置行编辑器。我尝试调用内部方法、init 方法、resize 方法等……然后我注意到架构的一些优点。有一个对 RowEditor 实例的内部引用，其中包含获取行编辑器和延迟加载（如果需要）的方法。那是关键！

您可以在不破坏 RowEditing 插件的情况下销毁 RowEditor（您不能动态加载/卸载插件），然后重新创建 RowEditor。

还有一个问题，即 Ext 网格的编辑插件为每一列添加了一些扩展方法，`getEditor()`用于`setEditor()`获取/设置每一列的正确编辑器类型。当您重新配置网格时，任何应用的扩展方法都“消失”（您有一些从未应用过这些方法的新列）。`initFieldAccessors()`因此，您还需要通过调用插件上的方法来重新应用这些访问器方法。

这是我的网格面板重新配置事件的处理程序：

```
/**
* @event reconfigure
* Fires after a reconfigure.
* @param {Ext.grid.Panel} this
* @param {Ext.data.Store} store The store that was passed to the {@link #method-reconfigure} method
* @param {Object[]} columns The column configs that were passed to the {@link #method-reconfigure} method
*/
onReconfigure: function (grid, store, columnConfigs) {
    var columns = grid.headerCt.getGridColumns(),
        rowEditingPlugin = grid.getPlugin('rowEditor');

    //
    // Re-attached the 'getField' and 'setField' extension methods to each column
    //
    rowEditingPlugin.initFieldAccessors(columns);

    //
    // Re-create the actual editor (the UI component within the 'RowEditing' plugin itself)
    //
    // 1\. Destroy and make sure we aren't holding a reference to it.
    //
    Ext.destroy(rowEditingPlugin.editor);
    rowEditingPlugin.editor = null;
    //
    // 2\. This method has some lazy load logic built into it and will initialize a new row editor.
    //
    rowEditingPlugin.getEditor();
} 
```

我使用配置侦听器将其附加到我的网格面板中：

```
listeners: {
    'reconfigure': Ext.bind(this.onReconfigure, this)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:10:58.447

看来这个问题已经在最新的 ExtJS 版本中得到纠正——版本 4.1.1a 至少集成了类似于 Ben Swayne 实现的功能。

# java - 当 SPNEGO 不能用于客户端时，如何回退到 BASIC 或 FORM 身份验证？

> ID：11963873
> 
> 赞同：6
> 
> 时间：2012-08-15T03:49:25.133
> 
> 标签：java, jboss, jboss7.x, spnego

我终于将我的 JBoss AS 7 服务器配置为`SPNEGO`在针对 Windows 2008 R2 的 AD 域上使用。我正在使用 Java 7。

当用户从域计算机以外的其他地方（例如，从手机或更广泛的 Internet）访问服务器 URL 时，系统会提示他们输入用户名和密码，然后我收到错误消息：

```
Login failure: javax.security.auth.login.LoginException: Unsupported negotiation mechanism 'NTLM' 
```

当用户在登录域时访问 url 时，一切正常。

在`SPNEGO`安全域（`standalone.xml`）上，我配置了 2 个登录模块：

第一的：`org.jboss.security.negotiation.spnego.SPNEGOLoginModule`

第二：

```
<login-module code="org.jboss.security.auth.spi.UsersRolesLoginModule" flag="required">
    <module-option name="password-stacking" value="useFirstPass"/>
    <module-option name="usersProperties" value="file:${jboss.server.config.dir}/spnego-users.properties"/>
    <module-option name="rolesProperties" value="file:${jboss.server.config.dir}/spnego-roles.properties"/>
    <module-option name="defaultUsersProperties" value="file:${jboss.server.config.dir}/spnego-users.properties"/>
    <module-option name="defaultRolesProperties" value="file:${jboss.server.config.dir}/spnego-roles.properties"/>
</login-module> 
```

问题是：我如何回退到`BASIC`或`FORM`何时`SPNEGO`超出范围？

谢谢

完整的例外如下：

```
00:40:23,751 ERROR [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http--0.0.0.0-9090-8) Login failure: javax.security.auth.login.LoginException: Unsupported negotiation mechanism 'NTLM'.
        at org.jboss.security.negotiation.spnego.SPNEGOLoginModule.spnegoLogin(SPNEGOLoginModule.java:230) [jboss-negotiation-spnego-2.2.0.SP1.jar:2.2.0.SP1]
        at org.jboss.security.negotiation.spnego.SPNEGOLoginModule.innerLogin(SPNEGOLoginModule.java:194) [jboss-negotiation-spnego-2.2.0.SP1.jar:2.2.0.SP1]
        at org.jboss.security.negotiation.spnego.SPNEGOLoginModule.login(SPNEGOLoginModule.java:137) [jboss-negotiation-spnego-2.2.0.SP1.jar:2.2.0.SP1]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_05]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_05]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_05]
        at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_05]
        at javax.security.auth.login.LoginContext.invoke(LoginContext.java:784) [rt.jar:1.7.0_05]
        at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203) [rt.jar:1.7.0_05]
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:698) [rt.jar:1.7.0_05]
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:696) [rt.jar:1.7.0_05]
        at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_05]
        at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:695) [rt.jar:1.7.0_05]
        at javax.security.auth.login.LoginContext.login(LoginContext.java:594) [rt.jar:1.7.0_05]
        at org.jboss.security.authentication.JBossCachedAuthenticationManager.defaultLogin(JBossCachedAuthenticationManager.java:449) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
        at org.jboss.security.authentication.JBossCachedAuthenticationManager.proceedWithJaasLogin(JBossCachedAuthenticationManager.java:383) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
        at org.jboss.security.authentication.JBossCachedAuthenticationManager.authenticate(JBossCachedAuthenticationManager.java:371) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
        at org.jboss.security.authentication.JBossCachedAuthenticationManager.isValid(JBossCachedAuthenticationManager.java:160) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
        at org.jboss.as.web.security.JBossWebRealm.authenticate(JBossWebRealm.java:214) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.security.negotiation.NegotiationAuthenticator.authenticate(NegotiationAuthenticator.java:187) [jboss-negotiation-common-2.2.0.SP1.jar:2.2.0.SP1]
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:455) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T10:57:37.233

老实说，我建议您使用带有 SPNEGO 扩展的 Spring Security。请看类似：http: [//blog.springsource.org/2009/09/28/spring-security-kerberos/](http://blog.springsource.org/2009/09/28/spring-security-kerberos/)

之后，您可以拥有更多的身份验证提供程序。

引用来自： [Spring Security 中的多个身份验证提供程序](https://stackoverflow.com/questions/9303502/multiple-authentication-providers-in-spring-security)

*您可以根据需要指定任意数量的提供程序。它们将按照您在 authentication-manager 标签中声明的顺序进行检查。一旦成功进行身份验证，它将停止轮询提供程序。如果任何提供者抛出 AccountStatusException，它也会中断轮询。*

这样，您将不依赖于特定的应用程序服务器配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-16T20:29:18.290

您需要修改 WEB-INF/web.xml 文件以回退到基本：

```
<context-param>
  <description>BASIC Authentication FallBack</description>
  <param-name>org.jboss.security.negotiation.NegotiationAuthenticator.BasicAuthFallBack</param-name>
  <param-value>true</param-value>
</context-param> 
```

有关详细信息，请参见此处：

[https://issues.jboss.org/browse/SECURITY-793](https://issues.jboss.org/browse/SECURITY-793)

# asp.net-mvc-3 - 在 razor 中创建隐藏字段作为扩展名（在 IE 中而不在 Mozilla 中工作）

> ID：11963885
> 
> 赞同：1
> 
> 时间：2012-08-15T03:51:39.193
> 
> 标签：asp.net-mvc-3, razor

我创建了一个隐藏字段作为扩展，它在 Internet Explorer 中运行良好，但是当我希望它在 chrome 或 mozilla 中执行时，它不支持...

```
public static MvcHtmlString hiddenText(this HtmlHelper helper, string Text)
{
    var tag = new TagBuilder("input");
    tag.MergeAttribute("id", "hid");
    tag.MergeAttribute("name", Text);
    tag.MergeAttribute("value", Text);
    return new MvcHtmlString(tag.ToString())
} 
```

有什么解决方案可以让我编写的代码在 mozilla 或 chrome 中运行.. 谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:53:41.230

您可能想要指定输入类型。

```
tag.MergeAttribute("type", "hidden"); 
```

顺便说一句，您确实意识到已经内置了允许您创建隐藏字段的帮助程序？

```
@Html.Hidden()

@Html.HiddenFor() 
```

# javascript - 在 HTML 中单击按钮时调用 JavaScript 函数

> ID：11963886
> 
> 赞同：5
> 
> 时间：2012-08-15T03:51:40.557
> 
> 标签：javascript, html, button, onclick

我编写了一个简单的 JavaScript 代码，允许人们输入一个数字，如果它不符合 FizzBu​​zz 游戏的条件，它应该返回 FizzBu​​zz、Fizz、Buzz 或仅返回数字。然后我尝试使用以下代码在 HTML 中创建一个按钮：

```
<button onclick="fBCalc(prompt("Enter a number!"))">FizzBuzz</button> 
```

我也试过这个：

```
<input type="button" name="FizzBuzz" value="FizzBuzz" onClick="fBCalc(prompt("Enter a number!"))" /> 
```

两种方法都不起作用。我在谷歌上搜索了答案，但我已经尝试过了，当我点击按钮时没有任何反应。我确保该函数被正确调用。这在没有按钮的情况下工作，所以我不知道为什么它不应该与按钮一起工作。除非一个按钮无法提示 oo 有没有人知道是什么问题？

这是我完整 HTML 代码的 pastebin：http: [//pastebin.com/YPGdbTVQ](http://pastebin.com/YPGdbTVQ)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T03:54:56.643

你没有在这里正确粘贴你的代码，但我确实发现了我怀疑是你在 Pastebin 上的问题：

```
<button onclick="fBCalc(prompt("Enter a number!"))">FizzBuzz</button> 
```

您不能像这里那样将引号放在引号内，因为浏览器无法确定哪些是做什么的。尝试用单引号交换内引号：

```
 <button onclick="fBCalc(prompt('Enter a number!'))">FizzBuzz</button> 
```

巧合的是，祝你成绩好！;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:06:19.490

你不能把双引号放在双引号里，所以让你的代码像这样

```
<button onclick="fBCalc(prompt('Enter a number!'))">FizzBuzz</button> 
```

# android - 网页视图中的 HTML5 视频

> ID：11963890
> 
> 赞同：0
> 
> 时间：2012-08-15T03:52:35.510
> 
> 标签：android, html5-video, android-webview

我有一个带有 android 4.0.4 的 Galaxy Tab 10.1

我尝试让我的视频在我的网络视图中工作，但没有成功。

这是视频的代码。

```
<video width="320" height="240" controls="controls" >
      <source src="/public/files/vide1.mp4" type="video/mp4" />
        Your browser does not support the video tag.
</video> 
```

我用 Internet Explorer 尝试过，它正在工作。我做错了什么。

谢谢。

# php - 配置购物车价格更新

> ID：11963896
> 
> 赞同：0
> 
> 时间：2012-08-15T03:53:47.213
> 
> 标签：php, javascript, jquery, shopping-cart

我想创建一个有大量选项的产品订购页面。每个选项都会稍微改变价格，我希望总价在任何选项发生变化时自动更新。

所有选项都是下拉菜单，因此当他们从下拉菜单中选择一个选项时，价格需要更改。

我对一切都持开放态度，但最好在一页上写简单的代码。我希望能够将价格作为产品页面其余部分的一部分进行编辑，因为只有一种产品。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:02:54.260

尝试绑定一个 jQuery/javascript 函数，该函数计算所有价格输入字段的总和，并将其打印在底部的下拉菜单`onchange`事件中，如下所示。我给你的 HTML 只是一个模型，你可以随意改变它和你想要的 jQuery 引用。

HTML：

```
<p>Computer base price: $<span id="baseCost"></span></p>

<p>Select your upgrades:</p>
<form id="options">
    <select name="processor" onchange="calculateTotals()">
        <option value="Base_0">Base processor ($0)</option>
        <option value="Processor1_100">Processor 1 ($100)</option>
        <option value="Processor2_500">Processor 2 ($500)</option>
    </select>
    <select name="hard-drive" onchange="calculateTotals()">
        <option value="Base_0">Base hard-drive ($0)</option>
        <option value="7200rpm_250">7200rpm hard-drive ($250)</option>
    </select>
</form>

<p>Upgrade total: $<span id="upgradeCost">0</span></p><br>
<p>Final total: $<span id="sumTotal"></span></p>​ 
```

Javascript：

```
$(document).ready(function(){
    var basePrice = 2000;
    $("#baseCost").text(basePrice);
    $("#sumTotal").text(basePrice);
});

function calculateTotals(){
    var basePrice = parseInt($("#baseCost").text(), 10);
    var upgradePrice = 0;
    $("#options select").each(function(){
        var optionVal = $(this).val();
        upgradePrice += parseInt(optionVal.substr(optionVal.indexOf("_") + 1, optionVal.length - 1), 10);
    });
    $("#upgradeCost").text(upgradePrice);
    $("#sumTotal").text(basePrice + upgradePrice);
}​ 
```

[**工作演示**](http://jsfiddle.net/Snowsickle/sDmwH/1/)

如您所见，选项`value`属性包括选项 ID 及其价格，用下划线分隔。这允许 Javascript 和您的表单处理代码获取所选选项及其价格。

# c++ - 与带有指针项的向量副本相关的问题

> ID：11963897
> 
> 赞同：0
> 
> 时间：2012-08-15T03:54:11.240
> 
> 标签：c++, copy, depth

我想问一下指针项向量的副本是否有问题。我是否需要 strcpy 或 memcpy 因为可能存在深度复制问题？

例如：

```
Class B;

Class A

{
   ....

private:
   std::vector<B*> bvec;

public:

   void setB(std::vector<B*>& value)

   {

      this->bvec = value;

   }

};

void main()

{

   ....

   std::vector<const B*> value; // and already has values

   A a;

   a.setB(value);

} 
```

此示例仅将值分配给 A 类中的类变量 bvec。我是否需要使用 memcpy，因为我发现 std::vector bvec; 有指针项目吗？我对 C++ 中的深度复制感到困惑，你能说清楚吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:59:17.957

想一想，如果在调用`value` *之后*`setB`从向量中删除和删除一个项目，那么向量 in`A`将有一个不再有效的指针。

所以要么你需要做一个“深拷贝”，保证上述情况永远不会发生，要么使用共享智能指针[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)而不是原始指针。如果您需要指针，我会推荐最后一个。

还有另一种选择，那就是将向量存储`A`为对真实向量的引用。但是，这还有其他问题，例如真正的向量需要在对象的整个生命周期内都有效。但是在这里您也可以使用智能指针，并动态分配向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:59:58.350

您不太可能需要 strcpy 或 memcpy 来解决您的问题。但是，我不确定您的问题是什么。

我将尝试解释与 std::vector 相关的复制。

当您将 bvev 分配给 setB 中的值时，您正在制作深层副本。这意味着向量中的所有元素都从 value 复制到 bvec。如果您有一个对象向量，则会复制每个对象。如果您有一个指针向量，则会复制每个指针。

如果您希望稍后引用元素，另一种选择是简单地将指针复制*到向量。*只是要小心正确地管理生命周期！

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T04:17:09.967

您可能希望定义您的复制构造函数，`class A`以确保正确处理您询问的问题（尽管不是通过使用`memcpy`or `strcpy`）。在这里始终遵循三原则。我很确定`std::vector`你的好，但如果不是，那么使用`for`循环而不是`memcpy`

# debugging - Monodevelop：`等待调试器`

> ID：11963904
> 
> 赞同：3
> 
> 时间：2012-08-15T03:55:36.847
> 
> 标签：debugging, mono, monodevelop

我正在尝试在 Monodevelop中调试[这个 Mono 桌面软件。](https://github.com/hbons/SparkleShare/tree/master/SparkleShare/Linux)

我导入了 SLN 文件，运行`Build all`成功，但是当我按下`Debug`按钮时，我得到这个一直在等待的弹出窗口`Waiting for debugger`：

![Monodevelop：等待调试器](../Images/5ef55f33d51d55ea73bd1d61b0ba0947.png)

输出说：

> 缺少用户程序集“/home/nico/src/SparkleShare/SparkleShare/bin/SparkleShare.exe”。调试器现在将调试所有代码，而不仅仅是用户代码。

我的第一行代码是 a `Console.WriteLine`，它的输出没有出现在任何地方。
难道我做错了什么？

Ubuntu 2012.10 上的 Monodevelop 3.0.3.2。
控制台上没有出现任何特别的内容`monodevelop -v -v -v`。

当我按下`Start Without Debugging`而不是 时`Start Debugging`，应用程序立即崩溃说`The application exited with code: 255`，但我需要 Debug 来找出问题所在。

当我按下`Debug Application...`并选择`bin/SparkleShare.exe`时，Monodevelop 什么也不做。UI 没有任何反应，就像我什么都没按一样。

当我从命令行运行应用程序时，它运行良好（没有崩溃），但 Monodevelop 没有任何反应，所以我不能用它来调试：

```
mono --debug  bin/SparkleShare.exe 
```

Monodevelop 中的调试适用于从头创建的解决方案。

[这是一个在 Monodevelop](https://stackoverflow.com/a/13740078/226958)中调试的 hack，可以在这里工作，但它非常痛苦，并且不受支持。

*[注意：这和这个问题](https://stackoverflow.com/questions/9716141/waiting-for-debugger-to-connect)不是同一个问题，这是关于MonoTouch等待手机模拟器的问题......那里的建议是关于模拟器或更新XCode......这里没有模拟器也没有XCode。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:02:30.167

MonoDevelop 2.8.6.3 有点旧。

我建议你升级到 3.x 甚至是 master 分支，它有很多改进，可能会解决你的问题。

# asp.net - 寻求有关如何构建包含大量数据的 SQL Server 2008 DB 表的建议？

> ID：11963905
> 
> 赞同：1
> 
> 时间：2012-08-15T03:55:59.297
> 
> 标签：asp.net, sql, sql-server, tsql

我正在计划一个管理记录事件数据库的 Web 应用程序（使用 ASP.NET 编程）。数据库将在 SQL Server 2008 中进行管理。每个事件可能来自一组（我们称它们为“单元”）。用户将能够通过 ASP.NET 界面添加和删除这些“单元”。

每个“单元”都可能记录多达一百万个条目，甚至更多。（截止日期将通过日期进行管理。例如：

```
DELETE FROM [tbl] WHERE [date] < '01-01-2011' 
```

我的问题是构建此类数据库的最佳方法是什么：

1.  通过将所有“单位”的所有条目放在一个表中，如下所示：

    ```
    CREATE TABLE tblLogCommon (id INT PRIMARY INDEX, 
                               idUnit INT, 
                               dtIn DATETIME2, dtOut DATETIME2, etc INT) 
    ```

2.  或者，通过为每个“单元”分隔表格：

    ```
    CREATE TABLE tblLogUnit_1 (id INT PRIMARY INDEX, dtIn DATETIME2, dtOut DATETIME2, etc INT)
    CREATE TABLE tblLogUnit_2 (id INT PRIMARY INDEX, dtIn DATETIME2, dtOut DATETIME2, etc INT)
    CREATE TABLE tblLogUnit_3 (id INT PRIMARY INDEX, dtIn DATETIME2, dtOut DATETIME2, etc INT)
    --and so on
    CREATE TABLE tblLogUnit_N (id INT PRIMARY INDEX, dtIn DATETIME2, dtOut DATETIME2, etc INT) 
    ```

从引用条目的角度来看，方法 #1 似乎更简单，因为使用方法 #2 我将不得不处理可变的 N 个表（正如我所说的，用户将被允许添加和删除“单元”。）

但是方法 #1 可能会导致以后对这些日志条目的访问效率非常低。我将不得不通过 ASP.NET 接口从这些日志中生成报告。

所以在我开始编码之前，我想听听你对此的看法？

**编辑：**我没有意识到表中的列数会有所不同。我的错！表中的实际列数是 16。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:58:27.193

我会采用方法 1，因为表格看起来不是很大（宽度方面）并且你可以应用索引来改进搜索/选择。

除此之外，您还可以查看分区表和索引。

[创建分区表和索引](http://msdn.microsoft.com/en-us/library/ms188730%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:49:48.280

在单独的表中拆分将产生更好的插入和搜索速度。

对于一个表，不同之处在于 idUnit 上的索引。使用该索引搜索速度将几乎与单独的表一样快（并且您可以跨 idUnits 进行搜索是单个查询）。一个表会受到打击的地方是插入，但这是一个小打击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:06:51.867

很大程度上取决于您打算如何使用这些数据。如果您将数据拆分为多个表，您将查询多个表，还是所有查询都在定义的日期范围内。插入和更新数据的频率。

换句话说，没有正确的答案！

此外，您能否为 SQL 企业提供许可证以使用分区表？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:36:38.647

我使用 SQL Server 2008 Express 对实际数据进行了一些测试，使用本地计算机连接，没有网络延迟。测试的计算机：台式机，Windows 7 Ultimate，64 位，CPU：i7，@2.8GHZ，4 核；内存：8GB；硬盘（操作系统）：1TB，260GB 免费。

首先，所有记录都位于“SINGLE”表中（方法＃1）。所有记录都是用随机数据生成的。处理每个特定“unitID”的复杂 SELECT 语句被尝试了两次（一个接一个），CPU 负载：12% 到 16%，RAM 负载：53% - 62%。结果如下：

```
UnitID   NumRecords   Complex_SELECT_Timing
1        486,810      1m:26s / 1m:13s
3        1,538,800    1m:13s / 0m:51s
4        497,860      0m:30s / 0m:24s
5        497,860      1m:20s / 0m:50s 
```

然后*将相同的*记录分成具有相同结构的四个表（方法＃2）。然后，我在同一台 PC 上以相同的 CPU 和 RAM 负载运行了两次*相同的SELECT 语句。*接下来是结果：

```
Table   NumRecords   Complex_SELECT_Timing
t1       486,810      0m:19s / 0m:12s
t3       1,538,800    0m:42s / 0m:38s
t4       497,860      0m:03s / 0m:01s
t5       497,860      0m:15s / 0m:12s 
```

我想和有兴趣的人分享这个。这几乎给了你答案......

感谢所有贡献的人！

# python - DatabaseError: ORA-00933: SQL 命令未以 cx_Oracle 正确结束

> ID：11963907
> 
> 赞同：2
> 
> 时间：2012-08-15T03:56:03.117
> 
> 标签：python, oracle, ora-00933

当我运行以下 Python 代码时，我不断收到错误“DatabaseError：ORA-00933：SQL 命令未正确结束”。奇怪的是，当我在数据库客户端 SQuirrel 中运行我在调试期间复制的 sql 时，它工作得很好。我正在使用 cx_Oracle。有谁知道可能出了什么问题？`names`是一个字典，在其值字段中包含客户名称。谢谢！

```
def getData(accts):
    names = getNames(list(accts))
    sql = """select 
         CustomerAcronym, 
         Portal, 
         CcyPair, 
         BuyCCY, 
         SellCCY, 
         count(PortalID) as TradeCount, 
         sum(BuyCCYAmt) as TtlBuyCcyAmt, 
         sum(SellCCYAmt) as TtlSellCcyAmt, 
         sum(USDEquiv) as USDEquivalent 
         from ( 
             select 
             CustomerAcronym, 
             Portal, 
             CcyPair, 
             case 
                 when DealtDirection = 'BUY' then DealtCcy 
                 when DealtCcy = CCY1 then CCY2 
                 else CCY1 
             end as BuyCCY, 
             case 
                 when DealtDirection = 'SELL' then DealtCcy 
                 when DealtCcy = CCY1 then CCY2 
                 else CCY1 
             end as SellCCY, 
             case 
                 when DealtDirection = 'BUY' then DealtAmount 
                 when DealtCcy = substr(Price, 1,3) and instr(Price,'/') = 0 then DealtAmount*substr(Price, instr(Price,' ')+1) 
                 when DealtCcy = substr(Price, 1,3) then DealtAmount*substr(Price, instr(Price,' ')+1, instr(Price,'/')-instr(Price,' ')-1) 
                 when DealtCcy = substr(Price, 4,3) and instr(Price,'/') = 0 then DealtAmount/substr(Price, instr(Price,' ')+1) 
                 when DealtCcy = substr(Price, 4,3) then DealtAmount/substr(Price, instr(Price,' ')+1, instr(Price,'/')-instr(Price,' ')-1) 
             end as BuyCCYAmt, 
             case 
                 when DealtDirection = 'SELL' then DealtAmount 
                 when DealtCcy = substr(Price, 1,3) and instr(Price,'/') = 0 then DealtAmount*substr(Price, instr(Price,' ')+1) 
                 when DealtCcy = substr(Price, 1,3) then DealtAmount*substr(Price, instr(Price,' ')+1, instr(Price,'/')-instr(Price,' ')-1) 
                 when DealtCcy = substr(Price, 4,3) and instr(Price,'/') = 0 then DealtAmount/substr(Price, instr(Price,' ')+1) 
                 when DealtCcy = substr(Price, 4,3) then DealtAmount/substr(Price, instr(Price,' ')+1, instr(Price,'/')-instr(Price,' ')-1) 
             end as SellCCYAmt, 
             PortalID, 
             USDEquiv 
             from SALES_DATA 
             where 
                 CustomerAcronym = 'ABCCORP' and 
                 DealtFlag = 'DEALT' and 
                 TDate > '2012-08-01' 
         ) as temptbl
         group by CustomerAcronym, Portal, CcyPair, BuyCCY, SellCCY 
         order by Portal, CcyPair"""
    con = getConn()
    try:
        cursor = con.cursor()
        cursor.execute(sql)
        return cursor.fetchall()
    finally:
        con.close() 
```

# .htaccess - CodeIgniter 2.1.1 .htaccess 升级后的问题

> ID：11963908
> 
> 赞同：1
> 
> 时间：2012-08-15T03:56:09.873
> 
> 标签：.htaccess, codeigniter, url-rewriting, codeigniter-2

我已经有一个使用 CodeIgniter 1.7 的客户网站大约 6 年了，没有任何问题。但是，最近我将 CodeIgniter 框架更新到 2.1.1，现在 .htaccess 出现了问题。我已经在日志中确认它没有到达我的控制器，所以我相信这纯粹是一个 .htaccess 问题。

我有几个典型的 URL 模式：

```
mysite.com/<page name here>, i.e. mysite.com/faq  
mysite.com/admin/<action here>, i.e. mysite.com/admin/login 
```

我`.htaccess`目前是：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/page/id/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(admin/*)$ index.php/$1 [L] 
```

现在，应该很明显，`mysite.com/faq`应该重写为`mysite.com/page/id/faq`，但它正在抛出 404 。

只是要`mysite.com`成功加载默认控制器，在这种情况下是主页或等效于`mysite.com/home`. 所有管理员网址都运行良好。`mysite.com/page/id/<page name here>`也工作得很好。

只是为了比较，在`.htaccess`我升级 CodeIgniter 之前已经运行了 6 年的原始版本是：

```
RewriteRule ^((images|styles|scripts|documents)/*.*)$ $1 [L]
RewriteRule ^(admin/*)$ index.php/$1 [L]
RewriteRule ^([a-zA-Z0-9]+)$ page/id/$1
RewriteCond $1 !^(index\.php|robots\.txt|favicon\.ico)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

这个原始的行为与我目前在上面尝试使用的行为完全相同。原文的重写日志如下：

```
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/faq -> faq
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'faq'
[rid#1db5120/initial] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='/jb2/faq' pattern='^system.*' => not-matched
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/faq -> faq
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'faq'
[rid#1db5120/initial] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='/jb2/faq' pattern='^application.*' => not-matched
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/faq -> faq
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^((images|styles|scripts|documents)/*.*)$' to uri 'faq'
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/faq -> faq
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(admin/*)$' to uri 'faq'
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/faq -> faq
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^([a-zA-Z0-9]+)$' to uri 'faq'
[rid#1db5120/initial] (2) [perdir C:/wamp/www/jb2/] rewrite 'faq' -> 'page/id/faq'
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] add per-dir prefix: page/id/faq -> C:/wamp/www/jb2/page/id/faq
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/page/id/faq -> page/id/faq
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'page/id/faq'
[rid#1db5120/initial] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='page/id/faq' pattern='!^(index\.php|robots\.txt|favicon\.ico)' => matched
[rid#1db5120/initial] (2) [perdir C:/wamp/www/jb2/] rewrite 'page/id/faq' -> 'index.php/page/id/faq'
[rid#1db5120/initial] (3) [perdir C:/wamp/www/jb2/] add per-dir prefix: index.php/page/id/faq -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#1db5120/initial] (2) [perdir C:/wamp/www/jb2/] strip document_root prefix: C:/wamp/www/jb2/index.php/page/id/faq -> /jb2/index.php/page/id/faq
[rid#1db5120/initial] (1) [perdir C:/wamp/www/jb2/] internal redirect with /jb2/index.php/page/id/faq [INTERNAL REDIRECT]
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'index.php/page/id/faq'
[rid#4f657d8/initial/redir#1] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='/jb2/index.php/page/id/faq' pattern='^system.*' => not-matched
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'index.php/page/id/faq'
[rid#4f657d8/initial/redir#1] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='/jb2/index.php/page/id/faq' pattern='^application.*' => not-matched
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^((images|styles|scripts|documents)/*.*)$' to uri 'index.php/page/id/faq'
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(admin/*)$' to uri 'index.php/page/id/faq'
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^([a-zA-Z0-9]+)$' to uri 'index.php/page/id/faq'
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#4f657d8/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'index.php/page/id/faq'
[rid#4f657d8/initial/redir#1] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='index.php/page/id/faq' pattern='!^(index\.php|robots\.txt|favicon\.ico)' => not-matched
[rid#4f657d8/initial/redir#1] (1) [perdir C:/wamp/www/jb2/] pass through C:/wamp/www/jb2/index.php 
```

`.htaccess`我一直在尝试的当前重写日志是这样的：

```
[rid#4fb2e70/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/faq -> faq
[rid#4fb2e70/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'faq'
[rid#4fb2e70/initial] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='/jb2/faq' pattern='^system.*' => not-matched
[rid#4fb2e70/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/faq -> faq
[rid#4fb2e70/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'faq'
[rid#4fb2e70/initial] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='/jb2/faq' pattern='^application.*' => not-matched
[rid#4fb2e70/initial] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/faq -> faq
[rid#4fb2e70/initial] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'faq'
[rid#4fb2e70/initial] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='C:/wamp/www/jb2/faq' pattern='!-f' => matched
[rid#4fb2e70/initial] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='C:/wamp/www/jb2/faq' pattern='!-d' => matched
[rid#4fb2e70/initial] (2) [perdir C:/wamp/www/jb2/] rewrite 'faq' -> 'index.php/page/id/faq'
[rid#4fb2e70/initial] (3) [perdir C:/wamp/www/jb2/] add per-dir prefix: index.php/page/id/faq -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#4fb2e70/initial] (2) [perdir C:/wamp/www/jb2/] strip document_root prefix: C:/wamp/www/jb2/index.php/page/id/faq -> /jb2/index.php/page/id/faq
[rid#4fb2e70/initial] (1) [perdir C:/wamp/www/jb2/] internal redirect with /jb2/index.php/page/id/faq [INTERNAL REDIRECT]
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'index.php/page/id/faq'
[rid#1da50a0/initial/redir#1] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='/jb2/index.php/page/id/faq' pattern='^system.*' => not-matched
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'index.php/page/id/faq'
[rid#1da50a0/initial/redir#1] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='/jb2/index.php/page/id/faq' pattern='^application.*' => not-matched
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(.*)$' to uri 'index.php/page/id/faq'
[rid#1da50a0/initial/redir#1] (4) [perdir C:/wamp/www/jb2/] RewriteCond: input='C:/wamp/www/jb2/index.php' pattern='!-f' => not-matched
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] add path info postfix: C:/wamp/www/jb2/index.php -> C:/wamp/www/jb2/index.php/page/id/faq
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] strip per-dir prefix: C:/wamp/www/jb2/index.php/page/id/faq -> index.php/page/id/faq
[rid#1da50a0/initial/redir#1] (3) [perdir C:/wamp/www/jb2/] applying pattern '^(admin/*)$' to uri 'index.php/page/id/faq'
[rid#1da50a0/initial/redir#1] (1) [perdir C:/wamp/www/jb2/] pass through C:/wamp/www/jb2/index.php 
```

实际的升级过程只是在 CodeIgniter 框架上，并将文件重新组织到单独的`application`和`system`文件夹中，除了升级过程中所需的最小更改之外，我没有触及任何实际的自定义代码。

我已经尝试了大约十亿个不同的`.htaccess`命令组合，试图让这个东西工作，但无法让“正常”页面和管理页面都使用相同的配置正确加载。最终我的问题是，为什么升级 CodeIgniter 会神奇地破坏 URL 重写，但我很乐意让它再次工作。

有人有建议吗？我希望对此有另一种看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:20:36.003

所以我终于得到了另一个论坛的建议。我`$config[‘uri_protocol’]`从`AUTO`to改变了`PATH_INFO`，它神奇地起作用了。不过，我确实必须添加一行来处理`admin/*`URL 格式，所以我的最终结果`.htaccess`是：

```
RewriteRule ^(admin/*)$ index.php/$1 [L]
RewriteRule ^([a-zA-Z0-9]+)$ page/id/$1
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:09:38.393

您的 .htaccess 文件是否在正确的文件夹中？CodeIgniter 使用了几个 .htaccess 文件，我相信系统和应用程序内部的那个说拒绝所有文件，而上面的那个有你的规则。

# php - 如何使用php删除html中的table、tr、td标签

> ID：11963918
> 
> 赞同：-1
> 
> 时间：2012-08-15T03:57:36.410
> 
> 标签：php, html, regex

我有一个html代码：

```
<table id="table1" border="0" cellspacing="0" cellpadding="3" width="1" align="center">
  <tr>
    <td>
    <img src="http://vnexpress.net/Files/Subject/3b/bd/ac/f9/cuongbibat.jpg" width="330" height="441" border="1" alt="C&#432;&#7901;ng">
    </td>
  </tr>
  <tr>
    <td class="Image">Everything
   </td>
  </tr>
</table>
 <table id="table2" border="0" cellspacing="0" cellpadding="3" width="1" align="center">
      <tr>
        <td>
        Someone
        </td>
      </tr>
      <tr>
        <td class="Image">Everything
       </td>
      </tr>
    </table> 
```

我有 2 个表，我想删除所有标签：表、tr、td 如果表有 img 标签（表 1）。我需要得到如下结果：

```
 <img src="http://vnexpress.net/Files/Subject/3b/bd/ac/f9/cuongbibat.jpg" width="330" height="441" border="1" alt="C&#432;&#7901;ng">
        Everything

     <table id="table2" border="0" cellspacing="0" cellpadding="3" width="1" align="center">
          <tr>
            <td>
            Someone
            </td>
          </tr>
          <tr>
            <td class="text">Everything
           </td>
          </tr>
        </table> 
```

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T04:15:22.553

[HTML Purifier](http://htmlpurifier.org/)可用于从文档中去除所有标签或特定标签集。它是 PHP 中基本上任何 HTML 标签剥离的首选解决方案 -**永远不要为此使用正则表达式，**否则太阳会燃烧，我们都会在令人窒息的黑暗中冻死。

尝试类似：

```
$config->set('HTML.Allowed', 'img');
$purifier = new HTMLPurifier($config);
$output = $filter->purify($YOUR_HTML); 
```

您需要`$config->set('HTML.Allowed', 'TAGNAME');`为每个不想被擦掉的标签添加一条线，但这是值得为白昼之星的持续生命温暖付出的代价。我猜，也不要让您的网站容易受到 XSS 攻击和内容吞噬故障的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:16:40.227

查看： [http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

让您使用类似于 jQuery 的选择器在 HTML 页面上查找标签，并在一行中从 HTML 中提取内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:20:54.923

理论上，可以使用单个高度复杂的正则表达式来做到这一点。在单独的步骤中进行搜索和替换总是更容易：首先搜索外部容器，然后处理它包含的内容。

```
<?php 

header("Content-type: text/plain");

$html = '<table id="table1" border="0" cellspacing="0" cellpadding="3" width="1" align="center">
  <tr>
    <td>
    <img src="http://vnexpress.net/Files/Subject/3b/bd/ac/f9/cuongbibat.jpg" width="330" height="441" border="1" alt="C&#432;&#7901;ng">
    </td>
  </tr>
  <tr>
    <td class="Image">Everything
   </td>
  </tr>
</table>
 <table id="table2" border="0" cellspacing="0" cellpadding="3" width="1" align="center">
      <tr>
        <td>
        Someone
        </td>
      </tr>
      <tr>
        <td class="Image">Everything
       </td>
      </tr>
    </table> ';

$html = preg_replace_callback('/<table\b[^>]*>.*?<\/table>/si', 'removeTableIfImg', $html);

function removeTableIfImg($matches) {
    $table = $matches[0];
    return preg_match('/<img\b[^>]*>/i', $table, $img) 
         ? preg_replace('/<\/?(?:table|td|tr)\b[^>]*>\s*/i', '', $table)
         : $table;
}
echo $html;

?> 
```

第一个模式找到表。第二个模式（在回调中）检查是否有图像标签。第三个删除 table、td 和 tr 标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-03T11:23:40.233

我需要这样的东西。这是我的解决方案： `(<\/?tr.*?>)|(<\/?td.*?>)|(<\/?table.*?>)`

此正则表达式将选择所有不贪婪的 tr td 和 table 标记。

你可以在这里看到它的作用：

[http://regexr.com/3fslh](http://regexr.com/3fslh)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-15T06:10:46.773

正如 sudowned 所说，不要为此使用正则表达式，它会让你发疯。通常搜索库所消耗的时间与为此编写自己的小型解析器所花费的时间相同。我用不同的语言做了几次。你学到了很多东西，而且你经常可以重用代码:-)

由于您对属性不感兴趣，因此这应该很容易。逐个字符循环进入站点。看看这个 java 代码，它是我早期的、更小的清理 html 的方法之一：

```
public static String sanatize(String body, String[] whiteList, String tagSeperator, String seperate) {
    StringBuilder out = new StringBuilder();
    StringBuilder tag = new StringBuilder();

    boolean quoteOpen = false;
    boolean tagOpen = false;
    for(int i=0;i<body.length();i++) {
        char c = body.charAt(i);
        if(i<body.length()-1 && c == '<'  && !quoteOpen && body.charAt(i+1) != '!') {
            tagOpen = true;
            tag.append(c);
        } else if(c == '>'  && !quoteOpen && tagOpen) {
            tag.append(c);

            for (String tagName : whiteList) {
                String stag = tag.toString().toLowerCase();
                if (stag.startsWith("</"+tagName+" ") || stag.startsWith("</"+tagName+">") || stag.startsWith("<"+tagName+" ") || stag.startsWith("<"+tagName+">")) {
                    out.append(tag);
                } else if (stag.startsWith("</") && tagSeperator != null) {
                    if (seperate.length()>2) {
                        if (seperate.contains("," + stag.replaceAll("[</]+(\\w+)[\\s>].*", "$1") + ",")) {
                            out.append(tagSeperator);
                        }
                    } else {
                        if (!out.toString().endsWith(tagSeperator)) {
                            out.append(tagSeperator);
                        }
                    }
                }
            }

            tag = new StringBuilder(); 
            tagOpen = false;
        } else if (c == '"' && !quoteOpen) {
            quoteOpen = true;
            if (tagOpen)
                tag.append(c);
            else 
                out.append(c);
        } else if (i>1 && c == '"' && quoteOpen && body.charAt(i-1) != '\\' ) {
            quoteOpen = false;
            if (tagOpen)
                tag.append(c);
            else 
                out.append(c);
        } else {
            if (tagOpen)
                tag.append(c);
            else 
                out.append(c);
        }
    }

    return out.toString();
} 
```

您可以忽略分隔符和分隔符，我用它来清理标签并转换为 csv

# objective-c - segue期间的nsunknownkeyexception

> ID：11963921
> 
> 赞同：1
> 
> 时间：2012-08-15T03:57:51.977
> 
> 标签：objective-c, uistoryboardsegue

所以我试图用一个 UITableView 来写一些东西，这个 UITableView 是一个 UITextview 。

在 UITextview 中有一个按钮来清除文本。我有 2 个问题。

现在我得到一个错误

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason:      '[<textViewController 0x6e69760> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key clearButton.' 
```

断点说这是在 didSelectRowAtIndexPath 内部调用 performSegue 时抛出的

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[self performSegueWithIdentifier:@"segueIdentifier" sender:self];
} 
```

这里

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if( [segue.identifier isEqualToString:@"fileSelected"]){
    textViewController *nextViewController = segue.destinationViewController ;
    nextViewController.title = @"newView";

    [nextViewController setText:[[NSString alloc] initWithData:[self readFromFile:@"textfile.txt"] encoding:NSUTF8StringEncoding]];
}
} 
```

并且。我试图用我从文件系统中的文件中读取的数据设置 textview 文本，这是读取和写入功能，但它不起作用......

```
-(NSData*) readFromFile:(NSString *)filename{
NSString* content = @"";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory, filename];

content = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];

return [content dataUsingEncoding:NSUTF8StringEncoding];
}
-(void) saveToFile:(NSString *)filename withData:(NSData *)data{
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/%@",documentsDirectory,filename];
[data writeToFile:filePath atomically:YES];
} 
```

我在segue期间做错了什么，导致异常吗？如果您需要任何其他代码，请提出来。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T17:01:25.440

**在segue之后**出现了这个问题，是由视图和控制器之间的连接断开引起的：

![截屏](../Images/10d3419d3da892dcd02eb2592468b61b.png)
（下一个坏了）

* * *

您只需删除连接并重新添加即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:36:49.643

检查您是否有一个实际名为“segueIdentifier”的segue。那将是第一步。

# qt - 如何编译 SpeechMe

> ID：11963923
> 
> 赞同：0
> 
> 时间：2012-08-15T03:58:01.563
> 
> 标签：qt, symbian, speech-recognition, cmusphinx, carbide

我正在尝试编译 SpeechMe 项目：[http](http://projects.developer.nokia.com/speechme/wiki) ://projects.developer.nokia.com/speechme/wiki ，这样我就可以在我想做的另一个项目中使用语音识别。

我已按照所有说明下载了 Sphinxbase 和 Pocketsphinx 的完整源代码，并使用它们将所有丢失的文件添加到 SpeechMe 中包含的 Sphinxbase 和 Pocketsphinx 目录中。我已经按照wiki说的顺序编译了它们，它们都返回：“***Build Complete”但似乎它们没有产生任何输出文件？

然后我尝试在 Qt Creator 中编译 SpeechMe，但它给了我以下三个错误：

这是所有配置的构建日志：http: [//sdrv.ms/PxlD6r](http://sdrv.ms/PxlD6r)

请帮忙，我真的不明白为什么这不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:10:11.107

> 我猜 Carbide 应该在编译时创建了这 3 个文件，但它没有，任何想法为什么以及我能做些什么来修复它？

文件必须在pocketsphinx 树中创建，但不应放置在所需位置。您很可能需要找到库文件并将它们手动放入所需的文件夹中。

另一个原因可能是您编译了 pocketsphinx 的调试版本，而最新项目正在寻找库的发布版本。

# java - 多色列表

> ID：11963928
> 
> 赞同：1
> 
> 时间：2012-08-15T03:58:38.843
> 
> 标签：java, swing, layout, colors, jlist

![在此处输入图像描述](../Images/0a029b4f6768b911456150d9fa5fcfb1.png)

我必须连续创建 5 个 Jlist 以使它们的背景看起来具有不同的颜色。我现有的代码创建了这 5 个没有颜色的列表（默认的 JList）。我知道我只能自定义 jlist 的内部/边框，而不是它周围的边距/填充？还是我错了，有办法吗？

顺便说一句，列表上方的空间是一个 Jlabel（上图中未显示），使用的布局管理器是 GroupLayout 和 GridBagLayout。

**更新**

AT，根据您的建议，这里比较了列表被 jpanel 包围时的外观。后面的列表是带有 Jpanel 的列表，周围有一个大小为 1 的最小空边框。

创建覆盖首选大小的 JPanel 的问题是 jlists 在水平 jpanel 中，而在它们之上是另一个带有标签的 jpanel。因此，将 jlist 包装在 jpanel 中是行不通的。

![在此处输入图像描述](../Images/c1bb9ca8ce1f7f82acb3615ed97c750c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T06:24:19.330

请看一下这个代码示例。它是否更接近您想要的，否则您定义需要完成的更改。我一收到你的回复就在他们身边:-)

这是结果：

![清单](../Images/221811b71312cbbb97053be2dae8fc66.png)

```
import java.awt.*;
import javax.swing.*;

public class JListExample
{
    private JList<String> list1;
    private JList<String> list2;
    private JList<String> list3;
    private JList<String> list4;
    private JList<String> list5;
    private CustomPanel panel1;
    private CustomPanel panel2;
    private CustomPanel panel3;
    private CustomPanel panel4;
    private CustomPanel panel5;
    private String[] data = {"one", "two", "three", "four"};
    private int width = 110;
    private int height = 300;

    private void displayGUI()
    {
        JFrame frame = new JFrame("JList Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridLayout(0, 5, 2, 2));

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.weightx = 1.0;
        gbc.weighty = 0.9;

        panel1 = new CustomPanel(width, height, Color.GRAY, "List 1");
        list1 = new JList<String>(data);
        panel1.add(list1, gbc);
        panel2 = new CustomPanel(width, height, 
                 Color.GREEN.brighter().brighter(), "List 2");
        list2 = new JList<String>(data);         
        panel2.add(list2, gbc);
        panel3 = new CustomPanel(width, height, 
                          Color.ORANGE.brighter(), "List 3");
        list3 = new JList<String>(data);                  
        panel3.add(list3, gbc);
        panel4 = new CustomPanel(width, height, 
                            Color.BLUE.brighter(), "List 4");
        list4 = new JList<String>(data);                    
        panel4.add(list4, gbc);
        panel5 = new CustomPanel(width, height, Color.RED, "List 5");
        list5 = new JList<String>(data);
        panel5.add(list5, gbc);

        contentPane.add(panel1);
        contentPane.add(panel2);
        contentPane.add(panel3);
        contentPane.add(panel4);
        contentPane.add(panel5);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new JListExample().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private final int GAP = 5;
    private int width;
    private int height;
    private Color backgroundColour;
    private JLabel titleLabel;

    public CustomPanel(int w, int h, Color c, String title)
    {
        width = w;
        height = h;
        backgroundColour = c;
        titleLabel = new JLabel(title, JLabel.CENTER);
        setBackground(backgroundColour);
        setBorder(
            BorderFactory.createEmptyBorder(
                                GAP, GAP, GAP, GAP));                   
        setLayout(new GridBagLayout()); 
        titleLabel.setAlignmentX(JLabel.CENTER_ALIGNMENT);
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.NONE;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 1.0;
        gbc.weighty = 0.1;
        add(titleLabel, gbc);
    }   

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(width, height));
    }
} 
```

**最新编辑：**

正如@kleopatra 正确指出的那样（对我来说不是新事物:-)），判断力太好了。完成与以下相关的编辑：

```
import java.awt.*;
import javax.swing.*;

public class JListExample
{
    private final int GAP = 5;
    private JList<String> list1;
    private JList<String> list2;
    private JList<String> list3;
    private JList<String> list4;
    private JList<String> list5;
    private JPanel panel1;
    private JPanel panel2;
    private JPanel panel3;
    private JPanel panel4;
    private JPanel panel5;
    private String[] data = {"one", "two", "three", "four"};
    private int width = 110;
    private int height = 300;
    private GridBagConstraints gbc = new GridBagConstraints();

    private void displayGUI()
    {
        JFrame frame = new JFrame("JList Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridLayout(0, 5, 2, 2));      

        panel1 = getPanel(Color.GRAY, "List 1");
        list1 = new JList<String>(data);

        panel2 = getPanel(Color.GREEN.brighter().brighter(), "List 2");
        list2 = new JList<String>(data);         

        panel3 = getPanel(Color.ORANGE.brighter(), "List 3");
        list3 = new JList<String>(data);                  

        panel4 = getPanel(Color.BLUE.brighter(), "List 4");
        list4 = new JList<String>(data);                    

        panel5 = getPanel(Color.RED, "List 5");
        list5 = new JList<String>(data);        

        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.weightx = 1.0;
        gbc.weighty = 0.9;

        panel1.add(list1, gbc);
        panel2.add(list2, gbc);
        panel3.add(list3, gbc);
        panel4.add(list4, gbc);
        panel5.add(list5, gbc);

        contentPane.add(panel1);
        contentPane.add(panel2);
        contentPane.add(panel3);
        contentPane.add(panel4);
        contentPane.add(panel5);

        frame.setContentPane(contentPane);
        frame.setSize(610, 300);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    private JPanel getPanel(Color c, String title)
    {
        JPanel panel = new JPanel();
        panel.setOpaque(true);
        panel.setBorder(
            BorderFactory.createEmptyBorder(
                                GAP, GAP, GAP, GAP));       
        panel.setBackground(c);
        panel.setLayout(new GridBagLayout());   
        JLabel label = new JLabel(title, JLabel.CENTER);
        label.setAlignmentX(JLabel.CENTER_ALIGNMENT);

        gbc.fill = GridBagConstraints.NONE;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 1.0;
        gbc.weighty = 0.1;

        panel.add(label, gbc);

        return panel;
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new JListExample().displayGUI();
            }
        });
    }
} 
```

# php - 如何使用 PHP 从 microsoft project (2007,2010) 导入数据？

> ID：11963930
> 
> 赞同：0
> 
> 时间：2012-08-15T03:58:55.043
> 
> 标签：php, xml, xml-parsing, converter, ms-project

我一直在使用 PHP 构建一个程序。我的数据资源来自 xml 格式的 microsoft project (2007,2010)。

有人有经验/程序转换器吗？

非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:41:36.143

您可能会发现[MPXJ](http://mpxj.sf.net)很有用。虽然是用 Java 编写的，但正如 MPXJ 主页上所述，您将能够使用 Java-PHP 桥从 PHP 中使用其功能。

# django - Django runserver 显示 HTTP

> ID：11963936
> 
> 赞同：0
> 
> 时间：2012-08-15T03:59:40.467
> 
> 标签：django, https

我已将 nginx 配置为运行 HTTPS。我还重写了所有规则，使其在 HTTPS 下运行。

但是 Django 在内部仍然使用 HTTP 运行是真的吗？

```
Django version 1.2.1, using settings 'myproject.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
[14/Aug/2012 23:57:04] "GET /app/c HTTP/1.0" 200 4
[14/Aug/2012 23:57:09] "GET /app/c HTTP/1.0" 200 4 
```

是的。我知道我的版本已经过时了。

我检查`request.is_secure`并在我访问 HTTPS 时返回 True。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:04:14.700

正确，在内部您将使用 http 通过代理服务器进行通信，但所有外部流量都将使用 https 方法。

为了进一步保护您的流量，请确保您只绑定到本地地址，或者使用套接字在 nginx 和应用程序服务器之间进行连接。

我确实希望您不要在生产中使用 django 的开发服务器，而应该使用[gunicorn 之](http://gunicorn.org/)类的东西作为您的应用程序服务器。

# c - 在 C 中查找内存泄漏

> ID：11963940
> 
> 赞同：0
> 
> 时间：2012-08-15T04:00:54.680
> 
> 标签：c, memory-management

我试图在以下代码中找到内存泄漏。valgrind 给了我这个：

```
==14160== 1,850 (592 direct, 1,258 indirect) bytes in 9 blocks are definitely lost in loss    record 2 of 5
==14160==    at 0x4904A06: malloc (vg_replace_malloc.c:149)
==14160==    by 0x405B1F: tsCreate (ticket_set.c:55)
==14160==    by 0x401ECA: test1TS (main.c:62)
==14160==    by 0x40557C: main (main.c:424) 
```

这是功能：

```
TicketSetStatus tsCreate(TicketSet* t, int n, int c) {
    if(t==NULL){
        return TS_CANNOT_CREATE;
    }
    if (n <= 0){
        return TS_ILLEGAL_PARAMETER;
    }

    t->usedTravels = 0;
    t->originalTravels = n;
    t->cost = c;
    t->moneyLeft = n * c;
    //Date time is array of travels:
    t->dates =  malloc(sizeof(DateTime *)* (n)); //todo maybe c99 allows dynamic arrays?
    for (int i = 0; i < n; i++) {
        t->dates[i] =  malloc(sizeof(char)*GOOD_LENGTH+1);
        if (t->dates[i] == NULL) {
            free(   t->dates);

            return TS_CANNOT_CREATE;
        }
    }

    return TS_SUCCESS;
}

TicketSetStatus tsDestroy(TicketSet* t, int* moneyLeft) {
    if (t == NULL) {
        return TS_FAIL;
    }
    *moneyLeft = (t->cost) * (t->originalTravels-t->usedTravels);

     for (int i = 0; i < t->originalTravels; i++){
        free(t->dates[i]);
    }
    free(t->dates);

    t=NULL; 
    return TS_SUCCESS;
} 
```

当结构是：

```
struct TS_element {
    int usedTravels;
    int originalTravels;
    int cost;
    DateTime* dates;
    int moneyLeft;
}; 
```

和

```
typedef char* DateType 
```

实际上玩免费的程序经常会导致程序崩溃，所以只要程序正常运行，我倾向于忍受内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:25:18.940

对于至少一个错误，您可以只关注

```
...
t->dates =  malloc(sizeof(DateTime*) * (n));    /* first malloc */
for (int i = 0; i < n; i++) {   /* call this loop 1 */
    t->dates[i] =  malloc(sizeof(char)*GOOD_LENGTH+1);  /* second malloc */
    if (t->dates[i] == NULL) {  /* test for malloc error */
        free(   t->dates);      /* free the base array/list */

        return TS_CANNOT_CREATE; /* exit function */
    }
}
... 
```

问题是如果第二个`malloc`失败，`free`唯一的释放基本（第一个）malloc。它不会**释放**循环 1 中的第二个 malloc 在前一个循环 1 迭代中创建的任何其他内存分配。即，如果`t->dates[i] = malloc(...`在 i 等于 5 时失败，则在退出函数之前不会释放在迭代 0 到 4 中分配的内存块。

希望这是有道理的。

**更新**@paddy 正确地指出了`t->dates[0] = someDateValue` 在这种情况下的错误是什么：

```
char someDateValue[] = "2012-08-15"; 
```

在这种情况下也可以写成

```
char *someDateValue = "2012-08-15"; 
```

以便

```
t->dates[0] = someDateValue; 
```

简单地分配字符串的指针，替换前面新分配的块的指针`malloc`。

Ref: 如果您仍然感到困惑，您可以阅读[C 常见](http://c-faq.com/)问题解答问题 6.3[那么 C 中的“指针和数组等价”是什么意思？](http://c-faq.com/aryptr/aryptrequiv.html)以及 C FAQ 的其余部分。

并且建议[str[n]cpy](http://linux.die.net/man/3/strcpy)（或类似的[替换](http://www.courtesan.com/todd/papers/strlcpy.html)）将数组*内容*（而不是其指针）复制到新分配的内存块是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:16:16.780

你是如何使用这个数组的`DateTime`？如果您稍后踩踏这些值，您将得到泄漏。也许对字符串分配感到困惑？ *IE*

```
char someDateValue[] = "2012-08-15";
t->dates[0] = someDateValue;         // Leak -- your allocated string is lost 
```

反而：

```
strcpy( t->dates[0], someDateValue ); 
```

在您的错误情况中存在明确的泄漏`tsCreate`：

```
for (int i = 0; i < n; i++) {
    t->dates[i] =  malloc(sizeof(char)*GOOD_LENGTH+1);
    if (t->dates[i] == NULL) {
        free(t->dates);              // Leak -- every element up to i-1 is lost
        return TS_CANNOT_CREATE;
    }
} 
```

你`tsDestroy`在完成初始化数据后打电话`tsCreate`吗？也许你`main`没有清理就回来了。

如果这些都没有帮助，您应该发布额外的代码来展示您如何使用您的数据结构。

# perl - 如何安装 CPAN 模块的所有依赖项？

> ID：11963945
> 
> 赞同：0
> 
> 时间：2012-08-15T04:01:56.847
> 
> 标签：perl, cpan

如何在 Perl 中使用 cpan 安装模块 Nmap::Scanner 的所有依赖项？我做到了，cpan Nmap::Scanner。但是，需要模块的其他依赖项。

```
 #!/bash/perl

  use Nmap::Scanner;
  my $scan = Nmap::Scanner->new();

  $scan->add_target('localhost');
  $scan->add_target('host.i.administer');
  $scan->add_scan_port('1-1024');
  $scan->add_scan_port('31337');
  $scan->tcp_syn_scan();
  $scan->noping();

  my $results = $scan->scan();

  my $hosts = $results->gethostlist();

  while (my $host = $hosts->get_next()) {

      print "On " . $host->hostname() . ": \n";

      my $ports = $host->get_port_list();

      while (my $port = $ports->get_next()) {
          print join(' ',
              'Port',
              $port->service() . '/' . $port->portid(),
              'is in state',
              $port->state(),
              "\n"
          );
      }

  } 
```

我做到了，但是在 perl 中运行脚本时，在控制台中显示了这一点。

```
Can't locate XML/SAX/Exception.pm in @INC (@INC contains: /usr/local/lib/perl5 /usr/local/share/perl5 /usr/lib/perl5/vendor_perl` /usr/share/perl5/vendor_perl /usr/lib/perl5 /usr/share/perl5 .) at /usr/local/share/perl5/XML/SAX/ParserFactory.pm line 12.
BEGIN failed--compilation aborted at /usr/local/share/perl5/XML/SAX/ParserFactory.pm line 12.
Compilation failed in require at /usr/local/share/perl5/Nmap/Scanner/Backend/XML.pm line 8.
BEGIN failed--compilation aborted at /usr/local/share/perl5/Nmap/Scanner/Backend/XML.pm line 8.
Compilation failed in require at /usr/local/share/perl5/Nmap/Scanner/Scanner.pm line 4.
BEGIN failed--compilation aborted at /usr/local/share/perl5/Nmap/Scanner/Scanner.pm line 4.
Compilation failed in require at /usr/local/share/perl5/Nmap/Scanner.pm line 10.
BEGIN failed--compilation aborted at /usr/local/share/perl5/Nmap/Scanner.pm line 10.
Compilation failed in require at e1-insecure.pl line 3.
BEGIN failed--compilation aborted at e1-insecure.pl line 3. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T04:05:26.317

`cpan`自动解决依赖关系。要安装执行以下命令：

```
cpan Nmap::Scanner 
```

CPAN 模块的替代安装程序是[`cpanminus`](https://raw.github.com/miyagawa/cpanminus/master/cpanm). 使用`cpanm`：

```
cpanm Nmap::Scanner 
```

# javascript - 尝试从我的 chrome 扩展程序而不是从开发人员控制台访问 gmail 中的 iframe 时出现未定义的错误

> ID：11963950
> 
> 赞同：0
> 
> 时间：2012-08-15T04:02:35.820
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在制作一个 chrome 扩展（内容脚本），它将在 gmail 顶部黑条的“更多”之后添加文本。这些元素被封装在`canvas_frame`iframe 中。

当我尝试通过以下方式访问这些元素时：

`document.getElementById('canvas_frame').contentWindow.document.getElementById('gbz').innerHTML = scr;`

我明白了`Uncaught TypeError: Cannot read property 'document' of undefined`。但是，如果我将该代码直接输入到 chrome 开发人员控制台中，它就可以工作。为什么是这样？如何从我的 chrome 扩展中访问和修改该元素。

我是 javascript 新手，所以我可能会遗漏一些明显的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:49:44.403

Try

```
document.getElementById('canvas_frame').contentDocument.document.getElementById('gbz').innerHTML = src; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:17:07.290

我自己构建了 Chrome 扩展并遇到了这个问题，有几种方法可以缓解它，一种是在 JS 中运行计时器循环以查找#canvas_frame 并在找到时停止它，另一种是监听 DOM节点插入事件，如果您要查找的元素已被插入，则开始执行您想做的事情。

虽然 canvas_frame 一直是 Gmail 与之交互的“内容区域”元素，如果这是您需要做的，目前（截至几天前）我遇到了没有 content_frame 的 Google Apps Gmail 实例，或者更确切地说，在页面加载时有一个瞬间然后它被删除，我不确定谷歌在拉什么恶作剧，但由于他们没有提供用于制作 Gmail Chrome 扩展的官方 API（非常不幸），我们是作为扩展开发人员，任由他们摆布……

# c# - 针对多个不稳定的会员提供者进行身份验证？

> ID：11963954
> 
> 赞同：1
> 
> 时间：2012-08-15T04:03:08.477
> 
> 标签：c#, asp.net, membership-provider

目前我的 asp.net 应用程序有 5 个 ActiveDirectoryMembershipProvider 和 1 个 SqlMembershipProvider。在不久的将来，这两个数字都必将至少增加一些。问题是我们正在验证的一些域是不稳定的。因此，例如，周日 30 分钟内，五分之一的人可能无法到达。当来自任何提供商的用户在此期间尝试登录时，他们无法登录，因为 Providers 集合会引发错误。因此，如果一个人倒下了，他们都倒下了。不好玩。

我已经尝试了大约 72 种不同的方法来解决这个问题，但都没有运气。这是我的前3名。

1：将它们全部添加到web.config中，覆盖登录控制验证并循环遍历所有Membership.Providers。ValidateUser 直到我们有一个匹配。除非出现上述问题，否则效果很好。如果有一个倒下，集合就会溢出，没有人进入。

B. 仅针对默认提供者进行身份验证。让用户选择要使用的提供程序并使用 WebConfigurationManager 将其更改为默认提供程序。非常棒，除了您实际上是在运行时更改 web.config 文件...哎呀！我这样做了吗？

三、检查域用户想要登录的自定义提供程序，并在 Initiate() 中从 web.config 以外的源提供适当的配置值。包含所有单独提供者信息的数据库表。然后我们总是在自定义提供商上验证用户，然后他们检查用户选择的域/提供商，插入信息并关闭我们去。这有效，除非我注销然后使用 diff 域登录...我不能这样做，因为它已经初始化为您之前选择的另一个域。

也许我错过了一些简单的东西？但愿如此。StackOverflow，你是我唯一的希望。

# html - 固定拉伸背景图像

> ID：11963955
> 
> 赞同：1
> 
> 时间：2012-08-15T04:03:23.790
> 
> 标签：html, css, xhtml, responsive-design

我已经起草了一个简短的例子来说明我到目前为止所拥有的，以及我正在努力实现的目标。

[在这里](http://jsfiddle.net/kztGj/20/)查看我的演示

在我的 jsfiddle 中，您将看到一个名为“content-wrap”的包装 div。在这个 div 中，我想要一个可以拉伸到窗口大小和内容的图像。

我之前做过背景图像拉伸：请参见[此处的示例](http://maycontainnuts.co.nz/)

但这有点复杂，因为它是针对站点内的特定区域的。

到目前为止，我已经尝试使用上面链接中的现有代码进行游戏，我认为我可能需要采取不同的方法。当您向下滚动时，图像不会保持在原位，它会随着滚动条移动（应该如此）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:18:26.967

如果您不介意使用 CSS3 的`background-size`属性，那么在您的`#content-wrap {`CSS 语句中添加以下内容将实现响应式背景图像，该图像将扩展以适应容器的大小。

```
#content-wrap {
    height: 1000px;
    background: #ccc;
    color: #fff;

    /* Added CSS */

    display: block;
    max-width: 100%;
    clear: both;
    background: transparent url("http://placekitten.com/900/900") top right no-repeat;
    background-size: cover;
} 
```

这是您的 jsfiddle 的更新版本，其中包含我添加的 CSS 和一些可爱的 placekittens：http: [//jsfiddle.net/kztGj/22/](http://jsfiddle.net/kztGj/22/)

这样做的缺点当然是它不能在 Internet Explorer < 9、Firefox 3.6 或任何不支持 CSS3 的浏览器中工作。但是随后您要求响应式图像，因此您将很难找到支持旧浏览器的优雅解决方案。

有关该`background-size`属性及其用途的更多信息，我建议您查看[这篇文章](http://www.onextrapixel.com/2012/03/02/using-css-background-size-responsively/)，它的信息量很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:55:59.467

在您的图像中，添加这样的**CSS**

```
.custom-image {
    width:100%;
} 
```

和你的**html**

```
<div>
    <img src="" class="custom-image" />
</div> 
```

# ajax - 如何为 AJAX 请求使用 form_validation 库规则

> ID：11963956
> 
> 赞同：0
> 
> 时间：2012-08-15T04:03:42.120
> 
> 标签：ajax, codeigniter

我的一种形式使用 AJAX 发送数据。由于 AJAX 导致我的页面永远不会重新加载，有没有办法我仍然可以使用`form_validation`它来验证和输出哪些字段是错误的？我的表单使用 jquery 发送到的 url 是`contact/ajax_send`.

整个 AJAX 工作正常，除了我还没有插入任何验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:55:49.213

由于您使用 ajax 发送数据，您可以做的是，只需在插入数据库之前添加 form_validation 代码调用。

如果有任何验证错误，您可以将错误消息作为 json 响应返回到前端以显示错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:01:18.927

表单验证库将发生的所有错误分配给名为 的私有数组`_error_array`，但不会公开它或提供有关它的文档（注意第一个下划线？）。只需返回控制器中错误的 json 编码对象：

`echo json_encode($this->form_validation->_error_array);`

* * *

如果你愿意，你可以扩展 CodeIgniter 的表单验证库，可能返回`FALSE`而不是一个空数组......或者你认为合适的任何东西：

```
/* libraries/MY_Form_validation.php */
<?php
class MY_Form_validation extends CI_Form_validation
{   
     function __construct($config = array())
     {
          parent::__construct($config);
     }

    function error_array()
    {
        if (count($this->_error_array) === 0) return FALSE;
        else return $this->_error_array;
    }
} 
```

现在，删除控制器中的初始下划线：

`echo json_encode($this->form_validation->error_array);`

然后在客户端解码并显示错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:30:24.457

我找到了一种方法，部分归功于乔丹的回答。这将返回一个数组，其中包含有错误的字段的名称。

```
// library/MY_Form_validation.php
class MY_Form_validation extends CI_Form_validation {

    public function get_field_data(){
        return count($this->_field_data) ? $this->_field_data : FALSE;
    }

}

// Controller file
$field_data = $this->form_validation->get_field_data();
foreach($field_data as $key=>$val){
    if($key == '__proto__') break;
    foreach($val as $k=>$v){
        if($k == 'error' && !empty($v)) $errors[] = $key;
    }
}
$return = array('success'=>FALSE, 'errors'=>$errors); 
```

上面的代码检查`error`密钥是否为空。空值意味着它通过了 CI 验证，而没有空值将包含您在使用时看到的字符串`validation_errors()`。由于我在寻找那些有错误的字段，所以我只需要查看哪些值*不*为空而忽略那些值。

# android - 如何在显示自定义文本的 XML 中创建指向网站的链接

> ID：11963957
> 
> 赞同：0
> 
> 时间：2012-08-15T04:03:44.430
> 
> 标签：android, android-xml

晚上好，

我有一个简单的问题，但对于我的生活，我无法弄清楚。

我有一个指向我想放入我的应用程序的网页的链接。我想用 XML 来做这件事，以便让事情对我来说更容易一些，因为这将是一个非常大的应用程序。我希望喜欢是自定义文本，单击该文本会打开网络浏览器。我想就像你可以使用 HTML 一样。现在我有

```
android:text="http://bhflc.org/"
android:autoLink="web" 
```

我知道文本部分是我需要自定义文本的地方，但我应该把网址放在哪里？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:04:28.603

您可以在 XML 上创建 TextView 并将其设置为可点击：

```
<TextView
     android:id="@+id/textViewID"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="Link"
     android:clickable="true" /> 
```

在您的班级中，您可以输入以下内容：

```
TextView LinkButton = (TextView) findViewById(R.id.TextViewID);
LinkButton.setOnClickListener(new View.OnClickListener() {          
        public void onClick(View v) {
            // TODO Auto-generated method stub
                            Uri uri = Uri.parse("http://www.link.com");
                            Intent openBrowser = new Intent(Intent.ACTION_VIEW, uri);
                            startActivity(openBrowser);
        }
    }); 
```

反正我不知道只通过 XML 来做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:41:46.953

**主意：**

您需要一个自定义 Web 视图类。在此 Web 视图中，您可以获取从 xml 文件中设置的属性值。

**代码：**

你的 webview 类

```
 YourWebView extends WebView{
    public YourWebView (Context context, AttributeSet attrs) {
       //get attribute values which you set from xml file.
       TypedArray a=mContext.obtainStyledAttributes(attrSet, R.styleable.YourView);
       final String url=a.getString( R.styleable.YourView_web_url);
       yourWebView.mWebView.loadUrl(url);

} 
```

你的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<yourpackagenamspace.yourView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    app:web_url="http://bhflc.org/" 
     /> 
```

您必须使用 values/attrs.xml 文件声明您的属性

```
<declare-styleable name="YourView">

        <attr name="web_url" format="string" />

    </declare-styleable> 
```

# clojure - Clojure defrecord - 如何更新多个向量

> ID：11963962
> 
> 赞同：1
> 
> 时间：2012-08-15T04:04:32.590
> 
> 标签：clojure

我有一个用 defrecord 定义的数据类型，它包含两个向量：

```
(defrecord MyType [a b])

(def mytype (->MyType [1 2 3] [4 5 6])) 
```

我想要一个函数更新两个向量并返回一个新的 MyType。我能想到的唯一方法是通过嵌套的 assoc 调用：

```
(defn mutate-mytype [mytype x y]
  (assoc mytype :a (assoc (:a mytype) x y)
                :b (assoc (:b mytype) x y))) 
```

示例输出：

```
user=> (mutate-mytype mytype 1 7)
#user.MyType{:a [1 7 3], :b [4 7 6]} 
```

问题：有没有更好的方法来编写 mutate-mytype 方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T04:27:40.600

您的实现非常好。

有一些替代方案，例如您可以考虑使用`assoc-in`和`->`线程运算符：

```
(defn mutate-mytype [mytype x y]
  (-> mytype 
      (assoc-in [:a x] y)
      (assoc-in [:b x] y))) 
```

在这种情况下，与您的方法相比，这实际上并没有任何优势，但是如果您进行更深的嵌套，它可能会使代码更具可读性。

# java - 在 Java 中，我可以依靠引用分配是原子的来实现写入时复制吗？

> ID：11963972
> 
> 赞同：9
> 
> 时间：2012-08-15T04:05:32.203
> 
> 标签：java, multithreading, synchronization, locking, copy-on-write

如果我在多线程环境中有一个不同步的 java 集合，并且我不想强制集合的读取器同步^([1])，那么我同步写入器并使用引用分配的原子性的解决方案是否可行？就像是：

```
private Collection global = new HashSet(); // start threading after this

void allUpdatesGoThroughHere(Object exampleOperand) {
  // My hypothesis is that this prevents operations in the block being re-ordered
  synchronized(global) {
    Collection copy = new HashSet(global);
    copy.remove(exampleOperand);
    // Given my hypothesis, we should have a fully constructed object here. So a 
    // reader will either get the old or the new Collection, but never an 
    // inconsistent one.
    global = copy;    
  }
}

// Do multithreaded reads here. All reads are done through a reference copy like:
// Collection copy = global;
// for (Object elm: copy) {...
// so the global reference being updated half way through should have no impact 
```

在这些类型的情况下，滚动您自己的解决方案似乎经常失败，所以我有兴趣了解其他模式、集合或库，我可以使用这些模式、集合或库来防止创建对象并阻止我的数据消费者。

* * *

[1] 原因是与写入相比，读取花费的时间占很大比例，以及引入死锁的风险。

* * *

编辑：几个答案和评论中有很多很好的信息，一些要点：

1.  我发布的代码中存在错误。在全局（一个命名错误的变量）上同步可能无法在交换后保护同步块。
2.  您可以通过在类上进行同步来解决此问题（将同步关键字移动到方法中），但可能存在其他错误。一个更安全、更易于维护的解决方案是使用 java.util.concurrent 中的一些东西。
3.  我发布的代码中没有“最终一致性保证”，确保读者看到作者更新的一种方法是使用 volatile 关键字。
4.  回想起来，激发这个问题的一般问题是试图在 java 中使用锁定写入来实现无锁读取，但是我的（已解决的）问题是一个集合，这可能会让未来的读者感到不必要的困惑。因此，如果我发布的代码不明显，则通过一次允许一个作者对不受多个阅读器线程保护的“某个对象”执行编辑来工作。编辑的提交是通过原子操作完成的，因此读者只能获得编辑前或编辑后的“对象”。当/如果读取器线程获得更新时，它不能发生在读取中间，因为读取发生在“对象”的旧副本上。在 java 提供更好的并发支持之前，可能已经发现并证明以某种方式破坏了一个简单的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T04:28:44.600

与其尝试推出您自己的解决方案，不如使用[ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)作为您的集合并将所有值设置为某个标准值？（一个恒定的like`Boolean.TRUE`会很好用。）

我认为这种实现适用于多读者少作者的场景。甚至还有[一个构造函数可以让您设置预期的“并发级别”](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#ConcurrentHashMap%28int,%20float,%20int%29)。

***更新：*** Veer 建议使用[Collections.newSetFromMap](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#newSetFromMap%28java.util.Map%29)实用方法将 ConcurrentHashMap 转换为 Set。由于该方法需要`Map<E,Boolean>`我的猜测，它在将所有值设置为`Boolean.TRUE`幕后执行相同的操作。

* * *

***更新：解决海报的例子***

> 这可能是我最终会采用的方式，但我仍然对我的极简主义解决方案如何失败感到好奇。– 迈尔斯汉普森

您的极简主义解决方案只需稍作调整即可正常工作。我担心的是，虽然现在很少，但将来可能会变得更加复杂。很难记住在制作线程安全的东西时假设的所有条件——尤其是当你在几周/几个月/几年后回到代码中进行看似微不足道的调整时。如果 ConcurrentHashMap 以足够的性能满足您的所有需求，那么为什么不使用它呢？所有令人讨厌的并发细节都被封装掉了，即使是 6 个月后，你也很难把它搞砸！

在您当前的解决方案生效之前，您确实需要至少进行一次调整。正如已经指出的，您可能应该将`volatile`修饰符添加到`global`'s 声明中。我不知道你是否有 C/C++ 背景，但当我得知`volatile` [Java中的语义实际上比](http://en.wikipedia.org/wiki/Volatile_variable#In_Java)[C 中](http://en.wikipedia.org/wiki/Volatile_variable#In_C_and_C.2B.2B)复杂得多时，我感到非常惊讶。如果您打算在 Java 中进行大量并发编程，那么最好熟悉[Java 内存模型](http://en.wikipedia.org/wiki/Java_Memory_Model)的基础知识。如果您没有对引用进行`global`引用`volatile`，那么在他们尝试更新它之前，没有线程可能会看到值的任何更改`global`，此时输入`synchronized`块将刷新本地缓存并获取更新的参考值。

但是，即使添加了`volatile`，仍然存在**很大**的问题。这是一个有两个线程的问题场景：

1.  我们从空集或 开始`global={}`。线程`A`和`B`都在其线程本地缓存内存中具有此值。
2.  线程`A`获取获取`synchronized`锁`global`并通过复制`global`并将新密钥添加到集合来开始更新。
3.  当 Thread`A`仍在`synchronized`块内时，Thread`B`将其本地值读取`global`到堆栈上并尝试进入该`synchronized`块。由于 Thread`A`当前位于监视器 Thread`B`块内。
4.  线程`A`通过设置引用并退出监视器来完成更新，产生`global={1}`.
5.  Thread`B`现在可以进入监视器并制作`global={1}`集合的副本。
6.  线程`A`决定进行另一次更新，读取其本地`global`引用并尝试进入`synchronized`块。**由于线程 B 当前持有锁，`{}`因此没有锁`{1}`，线程`A`成功进入监视器！**
7.  Thread还会出于更新目的`A`制作副本。`{1}`

现在线程`A`和`B`都在块内，并且它们具有相同的集合`synchronized`副本。**这意味着他们的更新之一将丢失！**这种情况是由于您正在同步存储在您正在块内更新的引用中的对象。您应该始终非常小心用于同步的对象。您可以通过添加一个新变量来充当锁来解决此问题：`global={1}`**`synchronized`**

 **```
private volatile Collection global = new HashSet(); // start threading after this
private final Object globalLock = new Object(); // final reference used for synchronization

void allUpdatesGoThroughHere(Object exampleOperand) {
  // My hypothesis is that this prevents operations in the block being re-ordered
  synchronized(globalLock) {
    Collection copy = new HashSet(global);
    copy.remove(exampleOperand);
    // Given my hypothesis, we should have a fully constructed object here. So a 
    // reader will either get the old or the new Collection, but never an 
    // inconsistent one.
    global = copy;    
  }
} 
```

这个错误足够阴险，以至于其他答案都没有解决它。*正是这些疯狂的并发细节让我建议使用已经调试过的 java.util.concurrent 库中的一些东西，而不是尝试自己组装一些东西。*我认为上述解决方案会奏效——但再次搞砸它有多容易？这会容易得多：

```
private final Set<Object> global = Collections.newSetFromMap(new ConcurrentHashMap<Object,Boolean>()); 
```

由于引用是`final`您无需担心使用过时引用的线程，并且由于`ConcurrentHashMap`内部处理了所有令人讨厌的内存模型问题，您不必担心监视器和内存屏障的所有令人讨厌的细节！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T04:16:24.917

根据[相关的Java教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)，

> 我们已经看到增量表达式，例如`c++`，并没有描述原子动作。即使是非常简单的表达式也可以定义可以分解为其他动作的复杂动作。但是，您可以指定一些原子操作：
> 
> *   `long`对于引用变量和大多数原始变量（除and之外的所有类型）而言，读取和写入都是原子的`double`。
> *   `volatile`对于声明的所有变量（*包括* `long`和`double`变量），读取和写入都是原子的。

[Java 语言规范的第 17.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7)重申了这一点

> 对引用的写入和读取始终是原子的，无论它们是作为 32 位还是 64 位值实现的。

看来您确实可以依赖参考访问是原子的；但是，请认识到这并*不能*确保所有读取器都会`global`在此写入后读取更新的值——即这里没有内存排序保证。

如果您通过`synchronized`对 的所有访问使用隐式锁定`global`，那么您可以在这里伪造一些内存一致性......但使用替代方法可能会更好。

您似乎还希望集合`global`保持不变......幸运的是[`Collections.unmodifiableSet`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableSet(java.util.Set))，您可以使用它来强制执行此操作。例如，您可能应该执行以下操作...

```
private volatile Collection global = Collections.unmodifiableSet(new HashSet()); 
```

...那个，或使用`AtomicReference`，

```
private AtomicReference<Collection> global = new AtomicReference<>(Collections.unmodifiableSet(new HashSet())); 
```

然后，您也可以将其`Collections.unmodifiableSet`用于修改后的副本。

* * *

```
// ... All reads are done through a reference copy like:
// Collection copy = global;
// for (Object elm: copy) {...
// so the global reference being updated half way through should have no impact 
```

您应该知道在此处制作副本是多余的，因为在内部`for (Object elm : global)`创建`Iterator`如下...

```
final Iterator it = global.iterator();
while (it.hasNext()) {
  Object elm = it.next();
} 
```

因此，`global`在阅读过程中没有机会切换到完全不同的值。

* * *

除此之外，我同意[DaoWen 表达的观点......当可能有](https://stackoverflow.com/questions/11963972/in-java-can-i-depend-on-reference-assignment-being-atomic-to-implement-copy-on-w/11964034#comment15944871_11963972)[替代方案`java.util.concurrent`](http://docs.oracle.com/javase/tutorial/essential/concurrency/collections.html)时，你有什么理由在这里滚动你自己的数据结构？我想也许您正在处理较旧的 Java，因为您使用原始类型，但问一下也无妨。

您可以找到由[`CopyOnWriteArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)或其表亲[`CopyOnWriteArraySet`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html)（使用前者实现 a `Set`）提供的写时复制集合语义。

* * *

[DaoWen](https://stackoverflow.com/a/11964129/591495)也建议，您是否考虑过使用[`ConcurrentHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)? 他们保证`for`像您在示例中所做的那样使用循环将是一致的。

> 类似地，迭代器和枚举返回反映哈希表在创建迭代器/枚举时或之后的某个时间点的状态的元素。

在内部，an用于`Iterator`增强.`for``Iterable`

您可以`Set`通过[`Collections.newSetFromMap`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#newSetFromMap(java.util.Map))以下方式从中制作一个：

```
final Set<E> safeSet = Collections.newSetFromMap(new ConcurrentHashMap<E, Boolean>());
...
/* guaranteed to reflect the state of the set at read-time */
for (final E elem : safeSet) {
  ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T20:25:06.630

我认为您最初的想法是合理的，并且道文在消除错误方面做得很好。除非你能找到可以为你做*所有事情*的东西，否则最好理解这些东西，而不是希望某个神奇的课程能为你做这件事。神奇的课程可以让你的生活更轻松并减少错误的数量，但你确实想了解他们在做什么。

ConcurrentSkipListSet 在这里可能会为您做得更好。它可以摆脱你所有的多线程问题。

但是，它比 HashSet 慢（通常——HashSets 和 SkipLists/Trees 很难比较）。如果您为每次写入进行大量读取，那么您所拥有的将会更快。更重要的是，如果您一次更新多个条目，您的读取可能会看到不一致的结果。如果您希望只要有条目 A 就会有条目 B，反之亦然，则跳过列表可能会给您一个而没有另一个。

使用您当前的解决方案，对于读者来说，地图的内容始终是内部一致的。一次读取可以确保每个 B 都有一个 A。可以确保该`size()` 方法给出了迭代器将返回的元素的精确数量。两次迭代将以相同的顺序返回相同的元素。

换句话说，allUpdatesGoThroughHere 和 ConcurrentSkipListSet 是解决两个不同问题的两个很好的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T04:09:41.607

`synchronized`通过制作替换，`global` `volatile`就写时复制而言，你会没事的。

尽管分配是原子的，但在其他线程中，它没有按照对引用对象的写入进行排序。需要有一个*happens-before*关系，你可以通过a`volatile`或同步读取*和*写入来获得。

一次发生多个更新的问题是分开的 - 使用单个线程或您想要在那里执行的任何操作。

如果您将 a`synchronized`用于读取和写入，那么它是正确的，但是对于需要切换的读取，性能可能不是很好。A`ReadWriteLock`可能是合适的，但您仍然会有写入阻塞读取。

发布问题的另一种方法是使用 final 字段语义来创建一个（理论上）可以安全发布的对象。

当然，也有可用的并发集合。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-15T04:15:35.870

你能用这个`Collections.synchronizedSet`方法吗？来自 HashSet Javadoc [http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)

```
Set s = Collections.synchronizedSet(new HashSet(...)); 
```**

# javascript - 管理 AJAX 中打开函数的 URL 的规则

> ID：11963974
> 
> 赞同：0
> 
> 时间：2012-08-15T04:05:57.537
> 
> 标签：javascript, ajax

我刚刚开始使用 AJAX，试图在用户提交内容之前使用数据库验证表单，但我在 Open 函数的 URL 部分遇到了障碍。当我使用完整的 URL（例如[http://www.mywebsite.com/folder/file.php](http://www.mywebsite.com/folder/file.php)）时，它不起作用，但是当我只使用 file.php 时，就像在相对路径中一样，它可以正常工作。任何想法是什么导致了这种情况，更一般地说，Open 的 URL 部分的规则是什么。在此先感谢您的帮助。我总是对你回答我问题的速度感到惊讶。

```
xmlhttp.open("GET","myFile.php",true); GOOD
xmlhttp.open("GET","http://www.mywebsite.com/folder/myFile.php",true); BAD? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:33:25.887

XMLHttpRequests 必须遵守[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。对某个域的请求必须来自同一个域。XMLHttpRequest 对象通过将`open()`方法的 URL 视为相对于存储在 XMLHttpRequest 对象上的基本 URL 来强制执行这一点，该对象使用浏览器当前所在的任何 URL 从主 Window 对象派生。

[在此处](http://www.w3.org/TR/XMLHttpRequest/#the-open-method)`open()`查看 XMLHttpRequest方法的 W3C 规范

# java - 从另一个类中的对象中创建一个私有成员

> ID：11963976
> 
> 赞同：-1
> 
> 时间：2012-08-15T04:06:13.823
> 
> 标签：java

编辑：我粘贴了错误的代码已更新它

我创建了 3 个具体的类，前两个已经完成并且工作正常。第三个需要有**其他两个类的新对象的私有成员**。我如何为私人成员编写代码？我现有的类是 NameAddress 和 PhoneNumber，新的类名为 ContactDetails，两个已经创建的类是 NameAddress 和 PhoneNumber（我的私人成员需要第一个和后者中的一个）

我努力了：

```
public class ContactDetails{
  private Object contactName = new NameAddress();
  private Object mobile = new PhoneNumber();
  private Object home = new PhoneNumber();
} 
```

但这在编译器中不起作用并引发错误。帮助将不胜感激，我似乎无法找到正确的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:11:03.553

`}`除了缺少关闭类之外，我没有看到任何明显的语法错误：

```
public class ContactDetails {
    private Object contactName = new NameAddress();
} // ← here 
```

但也许您想将该`contactName`字段声明为比`Object`?

```
public class ContactDetails {
    private NameAddress contactName = new NameAddress();
} 
```

* * *

如果这没有帮助，请准确告诉我们编译器错误消息是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:31:03.283

我怀疑您的类没有无参数构造函数。如果您定义了带参数的构造函数，则将其添加到您的`NameAddress`类中：

```
public NameAddress() {
} 
```

对“电话号码”做同样的事情

这应该消除编译器错误（但可能不会导致*工作*应用程序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:01:45.443

只是一种预感，但我认为您可能误读了您的规格。

当你说：

> 第三个 [class] 需要拥有其他两个类的新对象的私有成员。

...那么这意味着您在类中声明并随后实例化两种不同的对象类型。当您需要通过访问器访问它们时，您需要明确说明要返回的类型。当您通过 mutator 修改它们时，您*必须*具体说明您正在修改的对象 - 除非您与此特定`Object`表示的内容完全一致，否则您将面临丢失对象状态信息并导致程序异常行为的风险.

这是一个例子。只要`setS()`传递了一个字符串，此代码就可以正常工作：

```
public class Test {
    private Object s = new String("Testing");

    public Object getS() {
        return (String) s;
    }

    public void setS(Object theS) {
        s = theS;
    }
} 
```

...但是如果我传入任何 Object 子类的东西（也就是说，***任何***用 实例化的东西`new`），我将得到一个`ClassCastException`.

减轻这种情况的正确方法是专门实例化/返回/传递一个字符串。

```
public class Test {
    private String s = new String("Testing");

    public String getS() {
        return s;
    }

    public void setS(String theS) {
        s = theS;
    }
} 
```

# r - 如何以 log2(n+1) 格式重新缩放 x 轴上的标签？

> ID：11963978
> 
> 赞同：2
> 
> 时间：2012-08-15T04:06:22.607
> 
> 标签：r, plot, scale

我想以格式格式化我的 x 轴，`log2(n+1)`以便 x 轴标签对应于 1、2、4、16 等。

输入：

```
x <- c(1, 2, 3, 11, 15)
y <- c(1.1, 1.2, .4, 2.1, 1.5)

plot(log2(x + 1), y, axes=FALSE)
axis(1, at=(labels=as.character(formatC(x))), cex.axis=0.9) 
```

但是我得到的情节仍然具有原始的 x 轴值。

![在此处输入图像描述](../Images/d18fa5c5ceec6c064a8fa46fb0b2636e.png)

如何使我的 x 轴幂为 2（1、2、4、16 等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T04:19:45.873

我想这就是你想要的。

```
x<-c(1,2,3,11,15) 
y<-c(1.1,1.2,.4,2.1,1.5)
lab<-c(1,2,4,16)
plot(log2(x+1),y,xaxt="n",xlab="x")
axis(1,at=log2(lab+1),labels=lab) 
```

计算等距标签也可能很有用：

```
lab<-round(2^seq(min(log2(x+1)),max(log2(x+1)),length.out=4)-1) 
```

# html - 禁止打开和抓取 HTML 文件

> ID：11963982
> 
> 赞同：2
> 
> 时间：2012-08-15T04:07:21.460
> 
> 标签：html, seo, search-engine, bots, web-crawler

我在根目录和单独的目录中有 HTML 文件，这些文件通过 SSI 包含到其他页面中。

1.  如何禁止通过直接 URL 打开此 HTML 文件，但同时仍让 SSI 可以访问它们？.htaccess 还是别的什么？一般可以吗？

2.  如何禁止为搜索引擎机器人抓取此 HTML 文件？如果我将它们包含在其他页面的 SSI 中，但在站点上没有任何直接链接到它们，搜索引擎机器人会看到它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:16:27.877

创建 robots.txt 并添加以下内容：

```
User-agent: * 
Disallow: /foldername-you-want-to-disallow/ # hides all files in this directory from bots
Disallow: /hidden.html # hides a specific file in the root dir from bots
Disallow: /foldername/hidden.html # hides a specific file in a subdir from bots 
```

或者

您可以创建一个 .htaccess 文件并将其上传到您要隐藏的目录中。包括以下这些：

```
Options -Indexes

Order deny,allow
Deny from all 
```

您仍然可以通过 SSI 调用它们，但任何 http 直接请求都将被阻止。

# unit-testing - 多单元测试运行分析工具

> ID：11963984
> 
> 赞同：2
> 
> 时间：2012-08-15T04:07:55.757
> 
> 标签：unit-testing, continuous-integration, nunit, mstest

是否有任何工具可以分析特定单元测试运行的测试报告并显示它们之间的差异？基本上，我对“进度图”感兴趣：

*   2012 年 8 月 12 日 10:00：48/50 测试通过。失败的测试：“MyTest13”、“MyTest43”。
*   2012 年 8 月 12 日 10:02：47/50 测试通过。“MyTest13”现在通过了，但“MyTest2”和“MyTest22”开始失败。

NUnit 是首选，但是，单元测试框架并不那么重要。

我正在寻找一个完全自动化的工具，以便我可以将其设置为在每次构建后运行它，并立即查看结果并将它们与以前的结果进行比较。我发现的最接近的东西是[nunit-results](https://launchpad.net/nunit-results)和一个手写的批处理文件，用于调用 NUnit（具有指定的 xml 报告路径）和 nunit-results 作为构建后操作。但是，它生成的 html 文件信息量不大。

我真的很惊讶，没有一个流行的单元测试软件能够存储测试运行信息并批量分析一系列运行。我试过 Resharper、NUnit GUI、Gallio 并没有发现任何有用的东西。

我会很高兴有一个不需要设置复杂 CI 服务器的解决方案。我的项目通常很小，但我需要为每个项目提供这样的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:21:47.417

我不知道您对“复杂的 CI 服务器”的阈值是多少，但[Jenkins](http://jenkins-ci.org)很容易设置，并且使用[NUnit 插件](https://wiki.jenkins-ci.org/display/JENKINS/NUnit+Plugin)应该可以满足您的需求：

> 这个插件可以将 NUnit 报告从每个构建导入到 Jenkins 中，以便显示趋势图和有关哪些测试失败的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:24:11.517

如果您对“进度图”感兴趣，我会采用更简单的（恕我直言）方法并使用[NCrunch](http://www.ncrunch.net/)。它会在您编写代码时向您显示测试状态，而无需停止测试运​​行。[有关更多详细信息，请参阅我的](https://stackoverflow.com/a/11825301/687857)答案。

# iphone - 不需要时如何隐藏键盘？

> ID：11963985
> 
> 赞同：0
> 
> 时间：2012-08-15T04:08:11.997
> 
> 标签：iphone, xcode, keyboard

我正在开发的应用程序允许用户使用不同的按钮阅读文本和撰写文本。我现在的问题是，在阅读文本的屏幕上，如果用户在屏幕上用于编写文本的 UITextView 框内点击，则会出现键盘。这种情况下的 UITextView 是`self.textView`；我已经将键盘通知和keyboardWillShow方法放在`if(self.textView)`语句中，然后确保在阅读文本方法的开头调用`[self.textView removeFromSuperView]`和设置，但是当您点击设置的空间时键盘仍然出现（顺便说一句，以编程方式，不使用 IB）。`self.textView = nil;``self.textView`

我究竟做错了什么？

**编辑：** 谢谢你们的回答，伙计们，但那个该死的键盘仍然会回来，就像歌曲中的猫一样......这是我的代码。如果可以，请原谅它的长度；如果我做了一些不可靠的事情，我不知道它在哪里，所以我不知道要省略什么。

这是`viewDidLoad`.

```
-(void)viewDidLoad {
[super viewDidLoad];
self.textView.editable=NO;
self.textView.userInteractionEnabled = NO;
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(previousHaiku)];
swipeRight.numberOfTouchesRequired = 1;
swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
[self.view addGestureRecognizer:swipeRight];
UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(nextHaiku)];
swipeLeft.numberOfTouchesRequired = 1;
swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:swipeLeft];
 NSError *error;
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
 NSString *documentsDirectory = [paths objectAtIndex:0];
 NSString *path = [documentsDirectory stringByAppendingPathComponent:@"gayHaiku.plist"];
 NSFileManager *fileManager = [NSFileManager defaultManager];
 if (![fileManager fileExistsAtPath: path])
 {
 NSString *bundle = [[NSBundle mainBundle] pathForResource:@"gayHaiku" ofType:@"plist"];
 [fileManager copyItemAtPath:bundle toPath: path error:&error];
 }
 self.gayHaiku = [[NSMutableArray alloc] initWithContentsOfFile: path];
 [self nextHaiku];
} 
```

这是`nextHaiku`最后一个调用的方法`viewDidLoad`——这是读取方法。

```
-(void)nextHaiku
{
[self.view.layer removeAllAnimations];
[self.bar removeFromSuperview];
self.textToSave=@"";
self.haiku_text.text=@"";
[self.view viewWithTag:1].hidden = NO;
[self.view viewWithTag:3].hidden = NO;
int indexOfHaiku;
NSMutableArray *arrayOfHaikuSeen;
NSString *cat;
if (!self.selectedCategory) cat = @"Derfner";
else cat = self.selectedCategory;
NSArray *filteredArray;
if (cat==@"all")
{
    filteredArray = self.gayHaiku;
    indexOfHaiku = self.indxAll;
    arrayOfHaikuSeen = self.theseAreDoneAll;
}
else
{
    indexOfHaiku = (cat==@"user")?self.indxU:self.indxD;
    arrayOfHaikuSeen = (cat==@"user")?self.theseAreDoneU:self.theseAreDoneD;
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"category == %@", cat];
    filteredArray = [self.gayHaiku filteredArrayUsingPredicate:predicate];
}
int array_tot = [filteredArray count];
int sortingHat;
NSString *txt;
if (array_tot > 0)
{
    if (indexOfHaiku == arrayOfHaikuSeen.count)
    {
        while (true)
        {
            sortingHat = (arc4random() % array_tot);
            if (![arrayOfHaikuSeen containsObject:[filteredArray objectAtIndex:sortingHat]]) break;
        }
        txt = [[filteredArray objectAtIndex:sortingHat] valueForKey:@"quote"];
        if (!arrayOfHaikuSeen || arrayOfHaikuSeen.count==array_tot)
        {
            arrayOfHaikuSeen = [[NSMutableArray alloc] init];
        }
        [arrayOfHaikuSeen addObject:[filteredArray objectAtIndex:sortingHat]];
        indexOfHaiku = arrayOfHaikuSeen.count;
        if (arrayOfHaikuSeen.count==filteredArray.count)
        {
            [arrayOfHaikuSeen removeAllObjects];
            indexOfHaiku=0;
        }
    }
    else 
    {
        txt = [[arrayOfHaikuSeen objectAtIndex:indexOfHaiku] valueForKey:@"quote"];
        indexOfHaiku += 1;
    }
}
//Need to test to make sure it starts over once all 110 haiku have been seen.

CGSize dimensions = CGSizeMake(320, 400);
CGSize xySize = [txt sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14.0] constrainedToSize:dimensions lineBreakMode:0];
self.haiku_text = [[UITextView alloc] initWithFrame:CGRectMake((320/2)-(xySize.width/2),200,320,200)];
self.haiku_text.font = [UIFont fontWithName:@"Helvetica Neue" size:14];
self.haiku_text.backgroundColor = [UIColor clearColor];
self.haiku_text.text=txt;
CATransition *transition = [CATransition animation];
transition.duration = 0.25;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionPush;
transition.subtype =kCATransitionFromRight;
transition.delegate = self;
[self.view.layer addAnimation:transition forKey:nil];
[self.view addSubview:self.haiku_text];

if (cat==@"user")
{
    self.theseAreDoneU = arrayOfHaikuSeen;
    self.indxU = indexOfHaiku;
}
else if (cat==@"all")
{
    self.theseAreDoneAll = arrayOfHaikuSeen;
    self.indxAll = indexOfHaiku;
}
else 
{
    self.theseAreDoneD = arrayOfHaikuSeen;
    self.indxD = indexOfHaiku;
}
} 
```

这是写作方法。

```
-(void)userWritesHaiku

//Set up the screen.
[self clearScreen];
self.textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 60, 280, 150)];
self.textView.delegate = self;
self.textView.returnKeyType = UIReturnKeyDefault;
self.textView.keyboardType = UIKeyboardTypeDefault;
self.textView.font = [UIFont fontWithName:@"Helvetica Neue" size:14];
self.textView.scrollEnabled = YES;
self.textView.autoresizingMask = UIViewAutoresizingFlexibleHeight;
self.textView.userInteractionEnabled = YES;
self.textView.editable=YES;
self.textView.backgroundColor = [UIColor colorWithRed:217 green:147 blue:182 alpha:.5];
[self.view addSubview: self.textView];

[self loadNavBar:@"Compose"];
[self addLeftButton:@"Instructions" callingMethod:@"haikuInstructions"];

//If you've added text before calling haikuInstructions, when you return from haikuInstructions the textView window with the different background color AND the keyboard.
[self addRightButton:@"Done" callingMethod:@"userFinishedWritingHaiku"];
self.titulus.hidesBackButton=YES;
[self seeNavBar];

//Create and add the space for user to write.
[self createSpaceToWrite];
if (self.textToSave!=@"")
{
    self.textView.text = self.textToSave;
}
[self.view addSubview:self.textView];
[self.textView becomeFirstResponder];

//Keyboard notifications.

if (self.textView)
{
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:47:32.433

试试这个

```
[self.textView setEditable:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:21:14.460

当用户点击阅读按钮时，我会打电话

```
self.textView.userInteractionEnabled = NO; 
```

当你想让他们编辑它时调用

```
self.textView.userInteractionEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:34:13.403

好吧，事实证明，`UITextView`我一直在 xib 中创建了一个并忘记了，因为它隐藏在主视图下 - 当我决定以`UITextView`编程方式创建时，我不记得删除另一个，因为我看不到它，但它一直在那里发挥着它的邪恶意志。在将整个代码注释掉之后，我终于弄清楚了这一点，除了`[super viewDidLoad]`并从 xib 中删除了所有内容。

# java - 快速排序时间复杂度

> ID：11963986
> 
> 赞同：1
> 
> 时间：2012-08-15T04:08:13.510
> 
> 标签：java, c++, algorithm, time-complexity, quicksort

我最近阅读了有关时间复杂度的文章，发现快速排序的平均时间复杂度为**O(nlog(n))**。

问题 1：我不明白时间复杂度方程中的**log(n)是如何出现的？**

问题 2：为什么我们总是使用**大 O**符号来计算算法的时间复杂度？为什么我们不使用其他符号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T06:02:41.733

**是如何`logn`进入复杂度公式的？**

*   对于每一步，您在前半部分和后半部分递归地调用算法。
*   因此 - 所需的步骤总数是`n`如果`1`您将问题每一步除以 2 所需要的次数。
    所以你实际上正在寻找`k`这样一个：

    ```
    n / 2 /2 / 2 / ... /2 = 1
            ^
         (k times) 
    ```

    但是，请注意，等式实际上是：`n / 2^k = 1`。既然`2^logn = n`，我们得到`k = logn`。所以算法所需的步数（迭代）是 O(logn)，这将使算法`O(nlogn)`- 因为每次迭代都是`O(n)`.

**注意：**这里的复杂性并不精确，在极少数情况下快速排序会衰减到`O(n^2)`，这取决于枢轴选择。“将问题每步除以 2”是一种简化，但它不会改变算法的*平均*分析。

**为什么要使用大 O 符号？**
它简单且独立于平台。
op（有时甚至是比较）的确切数量取决于平台。（如果指令集 A 比指令集 B 更丰富，它可能需要更多操作）。
它绝对不是*唯一*使用的方法。对于现实生活中的应用程序，**准确的运行时间**（以秒为单位）是非常重要的因素，并且经常被使用。

因此，简而言之 - 大 O 表示法使我们易于计算 - 算法将如何渐近（在无穷大处）表现的独立于平台的近似，它可以将算法的“家族”划分为其复杂性的子集，让我们轻松比较他们。

此外，使用的其他符号是[small o、theta 和 big/small omega](http://en.wikipedia.org/wiki/Big_O_notation#Family_of_Bachmann.E2.80.93Landau_notations)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T10:01:39.470

问题1.快速排序的最坏情况时间复杂度是O(n^2)，而平均情况复杂度是O(nlogn)。logn 因子取决于枢轴，算法如何选择它。

快速排序最坏情况时间复杂度发生在枢轴递归地产生两个区域，一个是大小为 1 的元素，另一个是大小为 (n-1) 的元素。而平均情况发生在枢轴选择两个区域时，两个区域的大小都为 n/2 .

所以产生的递归关系是T(n)=2T(n/2)+Θ(n)。

```
 f(n)=Θ(n)     
                  h(n)=n^log2(2)=>n 
                  since f(n) = h(n) so
                  T(n)= f(n)logn =>n(logn). 
```

（这里我们使用 Θ 表示法，因为快速排序的最坏情况复杂度（大 O）是 O(n^2)，这里我们计算的是平均情况复杂度。）

问题 2\. 我们使用大 O 表示法，因为它给出了最坏情况时间复杂度的概念，即使参数趋于无穷大，它也会限制算法，这意味着算法至少会在这个时间复杂度下运行并且不能超过它。

而还有其他符号，如小 o、theta 和大/小 omega，它们经常使用，因为它们的应用有限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T04:23:51.120

请阅读[Cormen 等人的算法简介](http://books.google.com.br/books?id=NLngYyWFl_YC&printsec=frontcover&dq=introduction%20to%20algorithm&source=bl&ots=BxRrAy3iEd&sig=ZXbGDmx0txj4Ul0fUeAplS04f7w&hl=pt-BR&sa=X&ei=MiMrUITsB4GQ9gSIkoHYBg&redir_esc=y#v=onepage&q=introduction%20to%20algorithm&f=false)。在第 3 章中，您将找到关于算法复杂性分析的一个很好的解释。你会发现大 O 并不是唯一使用的渐近符号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T04:25:53.203

尽管这更多是关于计算机科学的一般问题，但可以通过对该问题的评论更彻底地解释——

问题 1：log(n) 表示问题的扩展率比 O(n) 问题高一个因子 log(n)。小于 n*log(n) 的项（如 n）被省略，因为它们的缩放比最大项慢。

问题2：还有其他指标，O（大O）是问题扩展的最坏情况率。请参阅评论中的书籍链接以了解其他人是什么/意思，因为那里有更好的解释。

# objective-c - 如何从 NSMutableArray 中只删除一个对象的一个 实例？

> ID：11963988
> 
> 赞同：7
> 
> 时间：2012-08-15T04:08:18.427
> 
> 标签：objective-c, cocoa-touch, nsmutablearray

Apple 文档说该`- (void)removeObject:(id)anObject`方法从`NSMutableArray`.

有没有办法从数组中只删除一次出现的对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-15T04:13:35.090

如果您有一个要删除的特定实例，它具有唯一的内存地址，但在其他方面与其他实例比较相等，您将使用[`removeObjectIdenticalTo:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000138-BABDDBAG).

如果要删除数组中第一个符合要求的对象，请使用`indexOfObject:`，它会找到最低索引，然后`removeObjectAtIndex:`您也可以使用`indexesOfObjectsPassingTest:`获取包含相等对象的所有索引的列表，作为`NSIndexSet`，然后挑选一个从那里——也许[`lastIndex`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSIndexSet_Class/Reference/Reference.html#//apple_ref/doc/uid/20002197-BAJDDCAC)，例如

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-10T03:52:33.567

这真的很简单：[yourArray removeObjectAtIndex:[yourArray indexOfObject:yourObject]]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T04:11:51.310

是的，您想找到要删除并调用的特定对象的索引：

```
- (void)removeObjectAtIndex:(NSUInteger)index 
```

[请在此处](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000138-BABCAFIH)查看有关 NSMutableArray 的 Apple 文档。

# html - 为 canvas 推荐一个 HTML 编辑器或 IDE

> ID：11963991
> 
> 赞同：1
> 
> 时间：2012-08-15T04:08:46.087
> 
> 标签：html, ide, editor, html5-canvas

我需要具有 HTML5 画布元素的实时或内置预览功能的出色文本编辑器或 IDE。最好的，具有每当我更改代码时，预览也会改变的功能。另一个问题，有没有可以做到的浏览器？

例如：[http ://www.htmlinstant.com/](http://www.htmlinstant.com/)

HTML Instant 很棒，但我当然需要常用编辑器的其他功能，例如语法高亮。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:16:20.063

[http://codepen.io/](http://codepen.io/)非常好

修改此项目中的一些代码并注意它如何立即更新 [http://codepen.io/onedayitwillmake/pen/Evyfp](http://codepen.io/onedayitwillmake/pen/Evyfp)

# tridion - 使用 Core Service 2011 连接到 tridion 的第三方应用程序

> ID：11963993
> 
> 赞同：-1
> 
> 时间：2012-08-15T04:09:00.733
> 
> 标签：tridion, tridion-2011

我是 Tridion 新手，因此很难了解如何使用核心服务通过第三方应用程序连接到 tridion 服务器。

任何人都可以共享一些 .NET 应用程序的代码，这些代码向 tridion 发送请求以在 tridion 服务器中创建组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:16:22.987

那里有大量优秀的博客文章和示例应用程序。一次[搜索给我这些结果](https://www.google.com/search?btnG=1&pws=0&q=tridion+core+service)：

*   [Robert Curlette 记录了他的第一个使用核心服务的控制台应用程序](http://www.curlette.com/?p=570)
*   [使用 Tridion 核心服务的 GetListUsingItems 返回比 TOM 更多的项目](https://stackoverflow.com/questions/9515647/getlistusingitems-with-tridion-core-service-returns-more-items-than-tom)
*   [获取没有配置文件的核心服务客户端](http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithoutConfigFile)
*   [SDL Tridion 2011 组件发布者](http://blog.building-blocks.com/sdl-tridion-2011-component-publisher)
*   [使用 SDL Tridion 2011 中的核心服务导入内容](http://blog.building-blocks.com/creating-custom-pages-using-the-core-service-in-sdl-tridion-2011)
*   [使用核心服务获取使用过的物品](http://www.tridiondeveloper.com/getting-used-items-using-the-core-service)
*   [SDL Tridion 2011 应用数据](http://tridionfanboy.wordpress.com/category/sdl-tridion/2011/core-service-2011/)
*   [核心服务客户端示例代码](http://yatb.mitza.net/2012/03/core-service-client-sample-code.html)

当然还有官方文档（需要登录）：

*   [启动并运行 .NET 客户端](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_B49EC308F06D48E19230A2EC6070E14E)

# java - Tomcat 服务器未作为服务启动：%1 不是有效的 Win32 应用程序

> ID：11963994
> 
> 赞同：18
> 
> 时间：2012-08-15T04:09:01.903
> 
> 标签：java, eclipse, tomcat

我的 tomcat 服务器在 Eclipse 中运行良好，但是当我尝试启动服务器时它没有启动。

以下是错误：

```
[2012-08-15 09:26:09] [info] Procrun (2.0.5.0) started
[2012-08-15 09:26:09] [info] Running Service...
[2012-08-15 09:26:09] [info] Starting service...
[2012-08-15 09:26:09] [197  javajni.c] [error] %1 is not a valid Win32 application.
[2012-08-15 09:26:09] [994  prunsrv.c] [error] Failed creating java C:\java\java\jre\bin\server\jvm.dll
[2012-08-15 09:26:09] [1269 prunsrv.c] [error] ServiceStart returned 1
[2012-08-15 09:26:09] [info] Run service finished.
[2012-08-15 09:26:09] [info] Procrun finished.
[2012-08-15 09:29:06] [info] Procrun (2.0.5.0) started
[2012-08-15 09:29:06] [info] Running Service...
[2012-08-15 09:29:06] [info] Starting service...
[2012-08-15 09:29:06] [197  javajni.c] [error] %1 is not a valid Win32 application.
[2012-08-15 09:29:06] [994  prunsrv.c] [error] Failed creating java C:\java\java\jre\bin\server\jvm.dll
[2012-08-15 09:29:06] [1269 prunsrv.c] [error] ServiceStart returned 1
[2012-08-15 09:29:06] [info] Run service finished.
[2012-08-15 09:29:06] [info] Procrun finished.
[2012-08-15 09:30:07] [info] Procrun (2.0.5.0) started
[2012-08-15 09:30:07] [info] Running Service...
[2012-08-15 09:30:07] [info] Starting service...
[2012-08-15 09:30:07] [197  javajni.c] [error] %1 is not a valid Win32 application.
[2012-08-15 09:30:07] [994  prunsrv.c] [error] Failed creating java C:\java\java\jre\bin\server\jvm.dll
[2012-08-15 09:30:07] [1269 prunsrv.c] [error] ServiceStart returned 1
[2012-08-15 09:30:07] [info] Run service finished.
[2012-08-15 09:30:07] [info] Procrun finished.
[2012-08-15 09:30:57] [info] Procrun (2.0.5.0) started
[2012-08-15 09:30:57] [info] Running Service...
[2012-08-15 09:30:57] [info] Starting service...
[2012-08-15 09:30:57] [197  javajni.c] [error] %1 is not a valid Win32 application.
[2012-08-15 09:30:57] [994  prunsrv.c] [error] Failed creating java C:\java\java\jre\bin\server\jvm.dll
[2012-08-15 09:30:57] [1269 prunsrv.c] [error] ServiceStart returned 1
[2012-08-15 09:30:57] [info] Run service finished.
[2012-08-15 09:30:57] [info] Procrun finished. 
```

这些错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-04T18:22:14.653

我遇到了完全相同的问题，它是由在 64 位窗口上运行 32 位 Tomcat 引起的。（我在 Windows 8 64 位中使用 XAMPP 1.8.3。）

第一的：

*   确保您的`JAVA_HOME`系统变量指向您的 jdk 文件夹（而不是`\bin`）；
*   确保`%JAVA_HOME%\bin;`在您的`%PATH%`系统变量中。

解决方案：

*   如果您已经安装了Tomcat7服务，请卸载它；
*   下载 Tomcat 7 for windows 的**64 位版本**（查看[此链接以获取最新](http://tomcat.apache.org/download-70.cgihttp://tomcat.apache.org/download-70.cgi)版本- 我使用的是[7.0.42](http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.42/bin/apache-tomcat-7.0.42-windows-x64.zip)版本）；
*   **将文件夹的**`tomcat7.exe`**和**`tomcat7w.exe`**文件**替换**`C:\xampp\tomcat\bin`为最近下载的 zip 文件中的文件。**

 **现在您可以像往常一样安装该服务（通过 XAMPP 控制面板，如果您使用它），它应该可以正常启动。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-29T09:21:31.683

确保“jvm.dll”（启动 tomcat8w.exe 时选项卡“Java”）的路径找到正确的 Java 运行时环境版本（x64 或 x86）。

在以下两种情况下都会出现此问题：

1 - 您的 Tomcat 服务器版本是 64 位，但使用的是 32 位版本的 Java 虚拟机。
2 - 您的 Tomcat 服务器版本是 32 位，但使用的是 64 位版本的 Java 虚拟机。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T04:30:59.523

尝试这个

将 java 的 bin 目录下的 msvcr71.dll 复制到 tomcat 的 bin 文件夹中。

将 java 的 bin 目录添加到 windows 环境变量中。

将 msvcr71.dll 从 java 的 bin 目录复制到 windows\system32 文件夹。

确保您的 tomcat 指向正确的 jvm.dll 文件夹。

阿帕奇雄猫[1](http://i.stack.imgur.com/252I1.jpg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-26T05:55:51.893

同样的问题发生时

> *   64 位雄猫 7
> *   64 位 Windows 服务器
> *   32 位 JDK（在 JDK_HOME 系统变量中）

您只能在 32 位 Tomcat 7 上使用 32 位 JDK。如果要将 Tomcat 7 64 位更改为 32 位

> *   将 CATALINA_HOME 变量更改为 32 位 Tomcat 7 路径
> *   删除 Tomcat Windows 服务
> *   安装 Tomcat Windows 服务

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-02T07:57:10.367

您的 Tomcat 是 64 位但指向 32 位 java

1.  打开 Apache Tomcat 配置（从命令行：tomcat7w //ES//your-instance）
2.  转到 Java 选项卡
3.  将 Java 虚拟机设置为所需的位版本，例如：C:\Program Files\Java\jre1.8.0_66\bin\server\jvm.dll

为避免在创建新实例时出现问题，请检查 JAVA_HOME 指向的位置并将其设置为 64 位版本 jdk（不是 jre），例如 C:\Program Files\Java\jdk1.8.0_66

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-15T19:15:36.610

如果要将**Tomcat 作为 Windows 服务运行**，最简单的方法是使用 [**32 位/64 位 Windows 服务安装程序**](http://tomcat.apache.org/download-70.cgi)。

我在使用 Tomcat 时遇到了同样的问题`service.bat install`，但我不知道它是 32 位还是 64 位安装。

使用Tomcat 32-bit/64-bit Windows Service Installer帮我快速解决了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-29T14:36:29.863

打开 Apache Tomcat 配置 -> Java 选项卡 -> 单击“使用默认值”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-15T13:19:42.083

Sage CRM 7.1g 上的错误生成报告：此错误表明 Tomcat 已停止并且无法启动。因此，以下解决方案适用于以 excel 或 PDF 或任何其他格式检索报告并需要运行 Tomcat 的 Sage CRM 用户。该解决方案适用于Tomcat6。

1.  运行 jdk-8u121 -windows-i586（这是 32 位 JDK）

2.  配置环境变量变量名：JAVA_HOME 变量值：C:\Program Files (x86)\Java\jdk1.8.0_121

3.  点击确定，确定，确定

4.点击打开注册表；Window的开始按钮--->在它读取的地方输入“REGEDIT”（搜索程序和文件），

点击出现的REGEDIT

5.  在注册表中，遵循此路径

    HKEY_LOCAL_MACHINE --> SOFTWARE ----> Wow6432Node ---> Apache Software Foundation

    折叠“Procrun --> Tomcat6 --> Parameters 在Parameters下的省略号，您将看到以下文件夹；

    Java 日志开始停止

单击“Java”文件夹并双击“名称”列下的 Jvm

将打开一个弹出框。

复制您之前设置的环境变量值。在本例中：C:\Program Files (x86)\Java\jdk1.8.0_121 并粘贴到“Value Data”空间中，并在末尾附加 \jvm.dll .

这是完整路径：C:\Program Files (x86)\Java\jdk1.8.0_121\jre\bin\client\jvm.dll

关闭注册表，瞧。

戴夫**