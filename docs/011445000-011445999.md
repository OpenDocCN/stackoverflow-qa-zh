# StackOverflow 问答 11445000-11445999

# asp.net - 当我们在菜单栏中导航时创建链接？

> ID：11445001
> 
> 赞同：0
> 
> 时间：2012-07-12T04:26:26.207
> 
> 标签：asp.net, visual-studio, hyperlink, navigation

我们目前有如下图所示的要求。

google了很多，但我没有特定的关键字，所以我找不到任何东西。

我们需要在导航栏中显示链接，以便用户可以选择适当的页面而无需来回...通过直接选择所需的页面链接。

如下图所示，如何在 asp.net 中进行操作。

非常感谢........ ![在此处输入图像描述](../Images/f20b18cdd7ded5bc87aa89bea9b4a162.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:39:43.180

你可以看看`Navigation`这里[http://www.w3schools.com/aspnet/aspnet_navigation.asp](http://www.w3schools.com/aspnet/aspnet_navigation.asp)和`Site Map`这里[http://msdn.microsoft.com/en-us/library/yy2ykkab.aspx](http://msdn.microsoft.com/en-us/library/yy2ykkab.aspx)

尽可能基本，您可以在要显示链接的页面上使用列表。假设您有三个页面 A、B 和 C。在每个页面上添加一个如下所示的列表。

所以你就这样

```
<span>You are here</span>
<ul id="navList" runat="server">
</ul> 
```

在 A 页的代码隐藏中，将以下内容添加到您的列表中。

```
HyperLink nav=new HyperLink();
nav.NavigateUrl="A.aspx";//You can also pass parameters here.
HtmlGenericControl li=new HtmlGenericControl("<li>");
HtmlGenericControl span=new HtmlGenericControl("<span>");
span.InnerText=">>";
li.Controls.Add(span);
li.Controls.Add(nav);
navList.Controls.Add(li); 
```

同样对于 B

```
HyperLink nav=new HyperLink();
nav.NavigateUrl="A.aspx";//You can also pass parameters here.
HtmlGenericControl li=new HtmlGenericControl("<li>");
HtmlGenericControl span=new HtmlGenericControl("<span>");
span.InnerText=">>";
li.Controls.Add(span);
li.Controls.Add(nav);
navList.Controls.Add(li);

HyperLink nav2=new HyperLink();
nav2.NavigateUrl="B.aspx";//You can also pass parameters here.
HtmlGenericControl li2=new HtmlGenericControl("<li>");
HtmlGenericControl span2=new HtmlGenericControl("<span>");
span2.InnerText=">>";
li2.Controls.Add(span);
li2.Controls.Add(nav);
navList.Controls.Add(li2); 
```

同样对于 C.

# iis-express - IIS Express 8 - 无法写入配置文件

> ID：11445002
> 
> 赞同：36
> 
> 时间：2012-07-12T04:26:30.303
> 
> 标签：iis-express, visual-studio-2012

我正在尝试将 IIS Express 8 用于 VS2012 中的 MVC 站点。每当我尝试创建站点时，都会收到以下错误：

> 文件名：\?\C:\Users\xxxxxx\Documents\IISExpress\config\applicationHost.config
> 错误：无法写入配置文件

是否有某种方法可以强制 IIS Express 为配置和日志文件夹使用不同的位置？我知道当我从命令行运行 iisexpress.exe 时可以指向不同的位置，但是在使用 Visual Studio 时我无法控制它。

或者，有没有人对为什么会发生错误有任何建议？（旁注：我的笔记本电脑位于公司环境中，在“文档”文件夹中进行了一些愚蠢的加密，但是我没有遇到保存到该位置的其他软件的任何问题。我还为“所有人”组提供了完整的访问该文件夹。）

**编辑 - 按照[http://learn.iis.net/page.aspx/1286/iis-80-express-readme/](http://learn.iis.net/page.aspx/1286/iis-80-express-readme/)的说明进行操作后，我似乎仍然无法正常工作。我尝试了以下方法：**

*   添加了指向我的备用目录的 HKCU\Software\Microsoft\IISExpress\CustomUserHome 注册表项
*   添加了指向我的备用目录的 HKCU\Software\Microsoft\IISExpress\8.0\CustomUserHome 注册表项
*   添加了指向我的备用目录的 HKLM\Software\Microsoft\IISExpress\CustomUserHome 注册表项
*   添加了指向我的备用目录的 HKLM\Software\Microsoft\IISExpress\8.0\CustomUserHome 注册表项
*   设置指向我的备用目录的 %IIS_USER_HOME% 环境变量。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-13T18:32:40.527

@布拉德

我刚才也遇到了你同样的问题。删除 IISExpress 文件夹上的加密和“只读”属性解决了它。在我的公司中，文档也是加密的，但我认为从 IISExpress 中删除加密不会是任何问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-05T19:13:49.643

我收到了由完全不同的问题引起的非常相似的错误消息。

错误：

> C:\VS\TFS_Projects\SomeSolution\SomeProject\SomeProject.csproj ：错误：**创建虚拟目录[http://localhost:55063/](http://localhost:55063/)失败**并出现错误：文件名：\\?\C:\VS\TFS_Projects\SomeSolution。 vs\config\applicationhost.config 错误：**由于权限不足，无法写入配置文件**

更多详细信息：我什至无法打开该项目，因为打开它会失败。

我可以获得先前的变更集，它们实际上可以正常打开，但如果我获得最新的项目，则无法打开。

**解决方案：** 就我而言，事实证明，当我们更改 TFS 服务器时，有人将“ **.vs** ”文件夹与其他所有内容一起添加到源代码控制中。在这种情况下，一位开发人员将他的**applicationhost.config**设置为在 D:\ 驱动器上运行站点，而我没有这样的 D:\ 驱动器（嗯，它是一个 DVD 驱动器。）我能够通过找到具有未更改的 applicationhost.config 并替换我的本地文件的先前变更集。（我本可以尝试实际删除该文件夹，但我没有走那条路。）

之后，我们从源代码管理中删除了“.vs”文件夹。

（我把这个解决方案放在这里，因为它是谷歌登陆我的地方，所以其他有这个错误消息的人可能会发现上述解决方案没有为他们修复它，因此他们可能会遇到这个问题。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-18T17:40:29.360

我也在一个对用户文件夹进行加密的公司环境中，删除加密并删除 IISExpress 文件夹中所有内容的只读标志对我有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-23T20:25:40.097

我在 Windows 10 上使用 Visual Studio 2017，为了解决这个问题，我必须禁用 OneDrive 设置“在使用时节省空间并下载文件”。更改设置后，我的计算机崩溃了，但重新启动后，我能够更改启用 SSL 并且一切正常。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-21T15:17:26.370

对于任何在谷歌上搜索的人；这可能与此问题相同：[http ://connect.microsoft.com/VisualStudio/feedback/details/878812/use-iis-express-is-broken-in-vs-2012-on-windows-8-1](http://connect.microsoft.com/VisualStudio/feedback/details/878812/use-iis-express-is-broken-in-vs-2012-on-windows-8-1)

您可以通过下载[Prcocess Monitor](http://technet.microsoft.com/da-dk/sysinternals/bb896645.aspx)并使用过滤器运行它来检查它，“路径”包含“\Documents\IISExpress\config”，然后尝试将项目更改为使用 IIS Express。如果有一个 CreateFile 条目，其结果为 0xC0190052 作为最后一个条目之一，那么这就是同样的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-05T19:33:52.490

在努力解决这个问题并验证加密和只读属性并让它们不起作用之后，我的解决方案最终是：

*   导航到包含 IISExpress 文件夹的文件夹（在我的情况下，它在我的 OneDrive 中，而不是 Documents 文件夹中）
*   右键单击`IISExpress`文件夹>安全选项卡>高级按钮
*   将所有者更改为您自己，即使它已经是
*   选中“替换子容器和对象的所有者”框
    *   在您完成“更改所有者”对话框之前，这可能不会出现
*   打开`IISExpress`文件夹
*   右键单击`config`文件夹>安全选项卡>高级按钮
*   添加用户 > 添加主体
*   将位置更改为本地计算机（而不是域）
*   输入名称`NETWORK SERVICE`和“检查名称”
*   按确定返回高级安全对话框
*   确保选中“将所有子对象权限条目替换为此对象的可继承权限条目”

使用 IISExpress 10 在 Windows 10 中工作，适用于 VS 2013 和 VS 2017。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-20T10:30:52.510

C:\Users\xxxxxx\Documents\IISExpress\config\applicationHost.config

取消选中文件中的只读属性。它对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T15:17:34.360

添加注册表项似乎有效，但是，在注册表项中使用环境变量却没有。在我的环境中，只有我们的文档目录被重定向，所以我只想将 IIS Express 配置目录上移一级到 %USERPROFILE% 目录。然而，这并没有奏效。IIS Express 从字面上读取环境变量，当然无法运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-14T21:07:22.387

我之前遇到过同样的问题，以管理员身份运行 VisualStudio（以管理员身份运行）解决了这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-18T09:29:10.073

我也遇到了这个问题，并尝试通过在 HKCU\Software\Microsoft 中设置注册表项来解决它，但这不起作用。

我犯的错误是使用 HKCU，因为我没有权限通过普通帐户（我用来运行 Visual Studio）编辑注册表，所以我使用的是管理帐户。当然，HKCU 是为了那个帐户。

因此，我只使用了 HKEY_USERS\"my normal user's SID"，并且在手动启动 iisexpress.exe 时，它​​在指示的位置创建了文件。仍然没有工作的是使用视觉工作室的 iisexpress。VS 似乎仍然没有使用注册表设置。

最后，我在 HKU\"my normal user's SID"\Software\Microsoft\Windows\CurrentVersion\Explorer\ 中为 Shell Folders\Personal 和 User Shell Folders\Personal 设置了一个非 UNC 路径，这起到了作用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-18T02:45:34.237

我收到了同样的错误，但在不同的上下文中。打开另一个开发人员提供的项目（.csproj 文件）返回此错误并且无法执行任何操作：

> 创建虚拟目录[http://localhost:58753/](http://localhost:58753/)
> 失败并出现错误： Filename: \?\C:\Users\xxxxx\Documents\Clients\xxx\Gen II\xxx\,vs\config\applicationhost.config 错误: 无法写入配置文件

我从包含项目文件的目录中删除了 Encryption 和 R/O 属性，并应用于所有子文件夹和文件。Visual Studio 现在可以读取该项目。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-16T08:55:57.123

在我的情况下，我将文件夹移动到另一个位置，因此我必须编辑 applicationhost.config 文件并将虚拟目录条目更改为新位置。删除加密和设置只读没有帮助。我想如果我只是复制它而不是移动它，它会很高兴地继续工作。

# android - Android上传图片到jsp页面

> ID：11445003
> 
> 赞同：0
> 
> 时间：2012-07-12T04:26:39.867
> 
> 标签：android, jsp, java-server

我想将图像从我的 android 应用程序上传到 jsp 服务器页面，该页面处理并将图像保存到服务器中。但是`java.lang.IndexOutOfBoundsException`当我调试它时我得到了。这是我在 jsp 页面中的代码。

```
String contentType = request.getContentType();
    //here we are checking the content type is not equal to Null and as well as the passed data from mulitpart/form-data is greater than or equal to 0
    if ((contentType != null) && (contentType.indexOf("multipart/form-data") >= 0)) {
                InputStream in = request.getPart("Image").getInputStream();

        //DataInputStream in = new DataInputStream(request.getInputStream());
        //we are taking the length of Content type data
        int formDataLength = request.getContentLength();
        byte dataBytes[] = new byte[formDataLength];
        int byteRead = 0;
        int totalBytesRead = 0;
        //this loop converting the uploaded file into byte code
                    while (totalBytesRead < formDataLength) {
                            byteRead = in.read(dataBytes, totalBytesRead, formDataLength);
                            totalBytesRead += byteRead;
                    }

        String file = new String(dataBytes);
        //for saving the file name
        String saveFile = file.substring(file.indexOf("filename=\"") + 10);
        saveFile = saveFile.substring(0, saveFile.indexOf("\n"));
        saveFile = saveFile.substring(saveFile.lastIndexOf("\\") + 1,saveFile.indexOf("\""));
        int lastIndex = contentType.lastIndexOf("=");
        String boundary = contentType.substring(lastIndex + 1,contentType.length());
        int pos;
        //extracting the index of file 
        pos = file.indexOf("filename=\"");
        pos = file.indexOf("\n", pos) + 1;
        pos = file.indexOf("\n", pos) + 1;
        pos = file.indexOf("\n", pos) + 1;
        int boundaryLocation = file.indexOf(boundary, pos) - 4;
        int startPos = ((file.substring(0, pos)).getBytes()).length;
        int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length;
        // creating a new file with the same name and writing the content in new file
        FileOutputStream fileOut = new FileOutputStream(getServletContext().getRealPath("/")+"images/"+saveFile);
        fileOut.write(dataBytes, startPos, (endPos - startPos));
        fileOut.flush();
        fileOut.close(); 
```

我怎样才能解决这个问题？

* * *

这是错误日志： 当我调试此行时，此日志可见**byteRead = in.read(dataBytes, totalBytesRead, formDataLength);** 在**while (totalBytesRead < formDataLength)的第二次循环中**`>Exception occurred in target VM:
java.lang.IndexOutOfBoundsException: at java.io.BufferedInputStream.read(BufferedInputStream.java:327) at org.apache.felix.gogo.runtime.threadio.ThreadInputStream.read(ThreadInputStream.java:87) at org.apache.jsp.upload_jsp._jspService(upload_jsp.java:64) at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111) at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403) at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492) at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378) at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98) at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162) at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174) at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828) at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725) at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019) at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225) at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) <`

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:55:31.700

You should have to use Apache [Commons FileUpload](http://commons.apache.org/fileupload/) API to upload a file or you may use *Servlet 3.0* - `Part` API.****

# grails - 从域类中删除属性是否会导致架构自动更新，从而删除相应的列？

> ID：11445004
> 
> 赞同：4
> 
> 时间：2012-07-12T04:26:40.770
> 
> 标签：grails, grails-orm

我是 Grails 的新手。我已经使用它了一点，但没有那么多。不过，我对 Java 很熟悉。我的问题是关于模式更新。我知道 Grails 通过查看域类来创建 Hibernate 映射，因此如果我添加一个新属性，Grails 将自动在数据库中为该属性添加一个列。反过来也成立吗？如果我删除一个属性，该列是否会被删除？我没有看到这种行为，所以我想知道这是否是配置问题。

如果我想进入更强大的数据库管理，我猜我将不得不使用数据库管理插件或类似 Liquibase 的东西。但是，我正在进行的项目非常简单，目前，我们还没有决定是否朝那个方向发展。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T04:47:07.947

这取决于您`dbCreate`在`DataSource.groovy`. 如果是这样`create`，`create-drop`那么当您重新启动时，一切都会重建。如果是，`update`则添加新表和列。如果是其他设置，则不会进行任何更改。

`update`虽然没有做大多数人期望的事情。这是悲观的，不会做出可能导致数据丢失或损坏的更改。因此，即使它更宽（例如`VARCHAR(50)`-> `VARCHAR(200)`），它也不会改变列的大小。它不会添加索引。它将添加一个指定为非空的新列，但它会将其添加为可为空的，否则之前插入的行将无效。但它不会删除列或表。因此，您可以轻松地进入重命名列并最终得到两个 - 旧的和新的。

Liquibase 是一个很棒的库，并且[http://grails.org/plugin/database-migration](http://grails.org/plugin/database-migration)很受欢迎，因此很容易获得两者的支持。一旦您的架构稍微稳定了，您就应该考虑使用该插件。

# ios4 - ARC 禁止发布的显式消息发送。请求有关错误和语句标签的建议

> ID：11445006
> 
> 赞同：1
> 
> 时间：2012-07-12T04:27:08.683
> 
> 标签：ios4, xcode4.3

是否有人对使用替代代码而不是[查看发布]有任何建议；（见下面的代码片段）。任何关于解决方案的想法或任何评论都将不胜感激。

Alos Iv 包含一个带有黄色注释标签的代码片段。任何人再次得到任何建议将不胜感激。

我正在 Xcode 4.3 中重建我在早期版本的 xcode 中构建的应用程序，以兼容新的图像要求等。

[代码片段 http://img195.imageshack.us/img195/3267/20120712121243pm.png](http://img195.imageshack.us/img195/3267/20120712121243pm.png) [代码片段2 http://img12.imageshack.us/img12/6616/hfile.png](http://img12.imageshack.us/img12/6616/hfile.png)

# android - 应用程序缓存在 android 设备中不起作用（在 chrome 浏览器上运行良好）

> ID：11445008
> 
> 赞同：6
> 
> 时间：2012-07-12T04:27:17.323
> 
> 标签：android, web-applications, application-cache

我正在尝试使用应用缓存来批准性能。

我在各个站点得到了指导。（例如[http://xguru.net/621](http://xguru.net/621) ...）

制作 cache.man 文件，将 mime-type 设置为 text/cache-manifest。

问题是...

它在谷歌 chrome 浏览器上运行良好，但在我的 android 手机上不起作用。

我在 ICS 和 Gingerbread 进行了测试。

这是清单文件。

```
CACHE MANIFEST
# manifest version v0.1 

CACHE:
./programs.png
./video.png

NETWORK:
* 
```

然后，我像这样设置我的 webview。

```
getSettings().setAppCacheEnabled(true);
getSettings().setDomStorageEnabled(true);
getSettings().setPluginsEnabled(true);
getSettings().setCacheMode(WebSettings.LOAD_DEFAULT); 
```

（我将cacheMode更改为LOAD_NORMAL、NO_CACHE，但并没有什么不同。）

要查看缓存状态，我使用此站点。 [http://jonathanstark.com/blog/2009/09/27/debugging-html-5-offline-application-cache/](http://jonathanstark.com/blog/2009/09/27/debugging-html-5-offline-application-cache/)

```
var cacheStatusValues = [];
cacheStatusValues[0] = 'uncached';
cacheStatusValues[1] = 'idle';
cacheStatusValues[2] = 'checking';
cacheStatusValues[3] = 'downloading';
cacheStatusValues[4] = 'updateready';
cacheStatusValues[5] = 'obsolete';

var cache = window.applicationCache;
cache.addEventListener('cached', logEvent, false);
cache.addEventListener('checking', logEvent, false);
cache.addEventListener('downloading', logEvent, false);
cache.addEventListener('error', logEvent, false);
cache.addEventListener('noupdate', logEvent, false);
cache.addEventListener('obsolete', logEvent, false);
cache.addEventListener('progress', logEvent, false);
cache.addEventListener('updateready', logEvent, false);

function logEvent(e) {
    var online, status, type, message;
    online = (navigator.onLine) ? 'yes' : 'no';
    status = cacheStatusValues[cache.status];
    type = e.type;
    message = 'online: ' + online;
    message+= ', event: ' + type;
    message+= ', status: ' + status;
    if (type == 'error' && navigator.onLine) {
        message+= ' (prolly a syntax error in manifest)';
    }
    console.log(message);
}

window.applicationCache.addEventListener(
    'updateready',
    function(){
        window.applicationCache.swapCache();
        console.log('swap cache has been called');
    },
    false
); 
```

最后，这是我在我的安卓手机上看到的日志。

```
[cache Resource] app cache support! 
[cache Resource] DOWNLOADING 
[cache Resource] event online: yes, event: checking, status: uncached 
[cache Resource] event online: yes, event: downloading, status: uncached 
[cache Resource] event online: yes, event: progress, status: uncached 
[cache Resource] event online: yes, event: progress, status: uncached 
[cache Resource] event online: yes, event: error, status: uncached (prolly a syntax error in manifest) 
```

图像已下载，但我们在最后一行得到错误。所以它总是处于未缓存状态。

我想问题出在 webview 设置或 android 应用程序上。但我无法处理它。

给我一个使用应用程序缓存的提示..请...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:49:54.983

由 yugidroid 间接链接的答案将我引向了正确的方向。答案中链接的博客显示了该怎么做：

```
 String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
    webView.getSettings().setAppCachePath(appCachePath); 
```

我再次删除了这些行进行测试：相同的错误 - 已阅读：没有错误！

# python - 远程用户的主机名 + App Engine Python

> ID：11445015
> 
> 赞同：0
> 
> 时间：2012-07-12T04:28:38.667
> 
> 标签：python, google-app-engine, webob

如同：

> remote_addr - 远程用户的 IP 地址。

```
self.request.remote_addr 
```

相反，有没有办法获取远程用户的主机名？类似的东西可能像，

```
self.request.hostname 
```

从官方文档[The Request Class](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_remote_addr)看来，似乎没有获取远程用户主机名的选项。

我正在尝试使用主机名+ ip 的组合来唯一标识一台机器，因为有一些用户可能共享互联网网关，因此可能具有相同的 IP 地址，这会使 IP 地址不够唯一。

对此有何建议？或者至少，任何人都可以提出替代方法来唯一地识别具有匿名身份的机器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:12:38.460

不，无法在 App Engine 上进行反向 DNS 查找，并且信息不是由 HTTP 或 App Engine 环境提供的。此外，由于以下几个原因，这对您没有帮助：

*   对于具有给定 IP 的每个用户，反向 DNS 将是相同的，因为它仅取决于 IP。
*   任何可以控制其反向 DNS 的人都可以将其设置为他们喜欢的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:39:10.443

我认为这在 HTTP 上是不可能的。通常，cookies 用于此目的。

# ruby-on-rails - 从 Spree::BaseController 继承时 Spree 1.1 缺少模板

> ID：11445016
> 
> 赞同：1
> 
> 时间：2012-07-12T04:29:01.707
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, spree

我正在尝试通过从 Spree::BaseController 继承来加载自定义的狂欢页面。

```
class PagesController < Spree::BaseController
  layout 'spree_application'

  def home
  end
end 
```

但我得到一大堆丢失的模板错误

> 模板丢失
> 
> 缺少带有 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee 的模板页面/主页、spree/base/home、应用程序/主页：拉布尔]}。在以下位置搜索：*“/Users/mm/StoreOnline/app/views”...

这似乎不对。如果我必须替换所有这些模板，我还不如使用常规的 Rails 控制器/动作/视图。所以我的问题是——Spree 1.1+ 版不再支持这个功能了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:30:11.530

原来我只是在错误的地方定义了控制器。真的希望 Spree 有关于这些东西的更好的文档。

不管怎样，把它搬进去`app/controllers/spree/pages_controller.rb`，它工作得很好。

# .net - WPF 复选框行

> ID：11445020
> 
> 赞同：0
> 
> 时间：2012-07-12T04:29:16.857
> 
> 标签：.net, wpf, xaml, mvvm

具有动态列号的 datgrid，如下所示：

```
<DataGrid DataGridCell.Selected="DataGrid_GotFocus" EnableColumnVirtualization="true" EnableRowVirtualization="true" Name="dataGrid1" DockPanel.Dock="Top" AutoGenerateColumns="False" 
                   Height="120" Width="Auto" CanUserReorderColumns="False" CanUserResizeColumns="False" CanUserAddRows="false" CanUserResizeRows="False" CanUserSortColumns="False" CellEditEnding="dataGrid1_CellEditEnding">
                </DataGrid>

for (var i = datetime; i < datetime.AddDays(1); i += TimeSpan.FromHours(1))
        {
            var column = new DataGridTemplateColumn();
            column.Header = (i.Hour + 1).ToString();
            column.Width = 30;
            column.CellTemplate = (DataTemplate)XamlReader.Load(
                new MemoryStream(Encoding.Default.GetBytes(
                    @"<DataTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'><TextBlock Text='{Binding ValuesExtended[" + i.Hour + @"].value_nullable, UpdateSourceTrigger=PropertyChanged}'/></DataTemplate>"
                )));
            column.CellEditingTemplate = (DataTemplate)XamlReader.Load(
                new MemoryStream(Encoding.Default.GetBytes(
                    @"<DataTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'><TextBox Text='{Binding ValuesExtended[" + i.Hour + @"].value_nullable, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}'/></DataTemplate>"
                )));
            dataGrid1.Columns.Add(column);
        }

dataGrid1.ItemSource = data; 
```

现在我想要一个带有复选框而不是文本的特殊行，我该怎么做？谷歌搜索示例，仅找到复选框列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:17:25.457

嗨，这样做的逻辑是

```
 <Window.Resources>
    <DataGridRow x:Key="dr">
        <DataGridRow.Template>
            <ControlTemplate>
                <StackPanel Width="400" Orientation="Horizontal">
                <CheckBox Width="100"/>
                <CheckBox Width="100"/>
                <CheckBox Width="100"/>
                <CheckBox Width="100"/>
                </StackPanel>
            </ControlTemplate>
        </DataGridRow.Template>
    </DataGridRow>
</Window.Resources>
<Grid >
    <DataGrid AutoGenerateColumns="False" Width="400" CanUserAddRows="True" ItemsSource="{Binding PhoneNumbers}" LoadingRow="DataGrid_LoadingRow">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Name}" Header="Name" Width="100"></DataGridTextColumn>
            <DataGridTextColumn Binding="{Binding Name}" Header="Name" Width="100"></DataGridTextColumn>
            <DataGridTextColumn Binding="{Binding Name}" Header="Name" Width="100"></DataGridTextColumn>
            <DataGridTextColumn Binding="{Binding Name}" Header="Name" Width="100"></DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid>

</Grid>

private void DataGrid_LoadingRow(object sender, DataGridRowEventArgs e)
    {
        if (e.Row.Item.ToString().Equals("{NewItemPlaceholder}"))
        {
            e.Row.Item = this.FindResource("dr");
            e.Row.DetailsVisibility = Visibility.Visible;
        }

    } 
```

这不是确切的，但想法是一样的。我希望这个能帮上忙

# c++ - 获取指向迭代器引用的 STL 容器的指针？

> ID：11445025
> 
> 赞同：17
> 
> 时间：2012-07-12T04:30:39.787
> 
> 标签：c++, stl

例如，以下是可能的：

```
std::set<int> s;  
std::set<int>::iterator it = s.begin(); 
```

我想知道相反的情况是否可能，比如说，

```
std::set<int>* pSet = it->**getContainer**();  // something like this... 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T04:32:09.660

不，没有便携的方法可以做到这一点。

迭代器甚至可能没有*对容器*的引用。例如，一个实现可以同时用作和`T*`的`iterator`类型，因为两者都将它们的元素存储为数组。`std::array<T, N>``std::vector<T>`

此外，迭代器比容器更通用，并不是所有的迭代器都指向容器（例如，有输入和输出迭代器从流中读取和写入）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T04:35:37.193

不可以。在找到迭代器时，您必须记住迭代器来自的容器。

这种限制的一个可能原因是指针应该是有效的迭代器，并且没有办法让指针找出它来自哪里（例如，如果您将 4 个元素指向一个数组，那么您如何仅从该指针中判断出哪里数组的开头是？）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-31T20:26:33.127

至少有一个`std`迭代器和一些技巧是可能的。`std::back_insert_iterator`需要一个指向容器的指针来调用它的方法`push_back`。而且这个指针是`protected`唯一的。

```
#include <iterator>

template <typename Container>
struct get_a_pointer_iterator : std::back_insert_iterator<Container> {
    typedef std::back_insert_iterator<Container> base;
    get_a_pointer_iterator(Container& c) : base(c) {}
    Container* getPointer(){ return base::container;}
};

#include <iostream>
int main() {
    std::vector<int> x{1};
    auto p = get_a_pointer_iterator<std::vector<int>>(x);
    std::cout << (*p.getPointer()).at(0);
} 
```

`std`这当然没有实际用途，而只是一个确实携带指向其容器的指针的迭代器的示例，尽管是一个非常特殊的示例（例如，递增 a`std::back_insert_iterator`是一个 noop）。使用迭代器的全部意义在于不知道元素来自哪里。另一方面，如果您想要一个迭代器来获取指向容器的指针，您可以编写一个。

# .net - 从 View 更新 ViewModel

> ID：11445028
> 
> 赞同：0
> 
> 时间：2012-07-12T04:30:54.813
> 
> 标签：.net, wpf, data-binding, view, viewmodel

当 ViewModel 被 View 更新/更新时，是否有任何事件或方法可以知道触发器？

`INotifyPropertyChanged`并`PropertyChanged`在 ViewModel 更新 View 时使用。

但是有没有反转呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:34:01.457

从视图到视图模型的更改也会触发`PropertyChanged`，因为它们设置了属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:01:55.467

如果您使用绑定，那么您可以使用[`Binding.SourceUpdated`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.sourceupdated.aspx)和[`Binding.TargetUpdated`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.targetupdated.aspx)附加事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:36:58.560

如果您将视图中的控件绑定到视图模型，只要您确保绑定是`Mode=TwoWay`.

[http://msdn.microsoft.com/en-us/library/system.windows.data.bindingmode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingmode.aspx)

如果由于某种原因您已将`UpdateSourceTrigger`绑定设置为显式，那么要更新视图模型，您将需要获取绑定表达式并调用更新源

[http://msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.getbindingexpression.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.getbindingexpression.aspx)

# python - Python 中的 Nosetests TypeError 和 Attribute Error（LPTHW，练习 48）

> ID：11445030
> 
> 赞同：0
> 
> 时间：2012-07-12T04:31:23.093
> 
> 标签：python, nosetests

我正在努力学习 Python，练习 48，使用鼻子测试来测试元组。我设置的nosetest如下：

```
def test_directions():
    assert_equal(lexicon.scan("north"), [('direction', 'north')]) 
```

但是，我每次都会收到以下错误：

```
...line 5, in test_directions
    assert_equal(lexicon.scan("north"), [('direction', 'north')])
TypeError: unbound method scan() must be called with lexicon instance 
as first argument (got str instance instead) 
```

如果我在“def scan(self):”上方引入@staticmethod，则会收到此错误：

```
line 24, in scan
    words = self.sentence.split()
AttributeError: 'str' object has no attribute 'sentence' 
```

我正在测试它的代码如下。我错过了什么？

```
class lexicon(object):

    def __init__(self, sentence):

        self.sentence = sentence

        self.direction = "direction"
        self.verb = "verb"
        self.noun = "noun"
        self.stop = "stop"
        self.number = "number"

        self.direction_words = ('north', 'south', 'east', 'west', 'up', 'down')
        self.verb_words = ('go', 'stop', 'kill', 'eat')
        self.noun_words = ('door', 'bear', 'princess', 'cabinet')
        self.stop_words = ('the', 'in', 'of', 'from', 'at', 'it')

        self.a = 0
        self.instructions = []

    def scan(self):

        words = self.sentence.split()
        self.a = 0

        while self.a < len(words):
            result = words[self.a]
            if result in self.direction_words:
                self.instructions.append(('direction', result))
            elif result in self.verb_words:
                self.instructions.append(('verb', result))
            elif result in self.noun_words:
                self.instructions.append(('noun', result))
            elif result in self.stop_words:
                self.instructions.append(('stop', result))
            elif self.test_num(result) == None:
                self.instructions.append(('number', "Error"))
            else:
                self.instructions.append(('number', result))
            self.a += 1

        return self.instructions

    def test_num(self, num):
        try:
            return int(num)
        except ValueError:
            return None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:57:06.133

看起来您需要首先用您的字符串实例化您的词典对象，然后对该对象调用扫描。简而言之：

```
def test_directions():
    assert_equal(lexicon("north").scan(), [('direction', 'north')]) 
```

您可以看到这一点，因为该`__init__`方法接受`sentence`了一个参数，而该`scan`方法没有真正的参数（只是`self`，它表示对象的一个​​实例）。使用`@staticmethod`just 导致它将句子（在本例中为“north”）视为`lexicon`类的一个实例，由于明显的原因而失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-05T16:49:55.943

这是问题的完整解决方案

```
directions = ['north', 'south', 'east']
stops =["the" , "in" , "of"]
verbs = ['go','stop','kill','eat' ]
numbers = xrange(999999999)
nouns=["bear" , "princess" ]
list_of_lists=['go','stop','kill','eat','north', 'south', 'east','door',"the" , "in" , "of","bear" , "princess",xrange(999999999)]
list99=[]

class lexicon:
    @staticmethod
    def scan(d):
        list2=d.split()
        list1=[]
        list3=[]
        try:
            for x in d.split(): 

                if int(x) in xrange(999999999):
                    a = x

                    list1.append(a)
                    list2.remove(a)
                else:
                    print "yes"
        except:
            list99=[]

        for x in d.split():
            #print x
            if x in nouns:
                z1 = ("noun" , x)
                list3.append(z1)

            elif x in directions:
                z2 = ("direction" , x)
                list3.append(z2)

            elif x in verbs:
                z2 = ("verb" , x)
                list3.append(z2)
            elif x in list1:
                z2 = ("number" , int(x))
                list3.append(z2)
            elif x in stops:
                z2 = ("stop" , x)
                list3.append(z2)
            elif x in list2:
                z2 = ("error" , x)
                list3.append(z2)
            else:
                print "yes"

        print "d:%s"%d.split()
        print "list1:%s"%list1
        print "list2:%s"%list2
        print "list3:%s"%list3
        return list3 
```

# devexpress - 如何在 DevExprees 的图像库中添加图像

> ID：11445031
> 
> 赞同：0
> 
> 时间：2012-07-12T04:31:26.557
> 
> 标签：devexpress, image-gallery, xaf

我正在使用[XAF](http://documentation.devexpress.com/#Xaf/CustomDocument2670)。如何在图片库中添加图片。我想选择我的图片。

[http://www.picza.net/show.php?id=20120712vvIdvOvdTldvx67961](http://www.picza.net/show.php?id=20120712vvIdvOvdTldvx67961)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:14:30.257

这很容易。将所需的图像添加到位于模块中的 Images 文件夹中（如果没有这样的文件夹，请创建它）。

相关帮助主题：[添加和覆盖图像](http://documentation.devexpress.com/#Xaf/CustomDocument2792)

# uml - 设计模型中的每个类都必须存在于领域模型中吗？

> ID：11445032
> 
> 赞同：0
> 
> 时间：2012-07-12T04:31:33.190
> 
> 标签：uml

我对设计模型有疑问。设计模型中的每个类都必须存在于域模型中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:01:52.100

即使主题很重要，问题也没有得到很好的解释。UML 是一种类似于 Java 编码的对象方法，而域建模与数据库结构相关。因此，UML 与域建模不同。

话虽如此，JD5 及更高版本允许在代码中使用 ORM 注释。这意味着在对象级别，您还可以考虑直接在 Java 代码中使用 Hibernate 注释的数据库。EclipseUML 与 Java 代码同步，但也与 ORM 注释同步。这意味着在代码中编写的所有 ORM 注释都会在类图中以及模型中更新，并且每个类图注释更改都会在代码中更新。

这意味着 UML 和域建模现在使用标准的 ORM 注释来统一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:44:56.833

对象建模最好作为一个迭代过程来完成，因此从您认为满足当前要求的任何（简单）设计开始，并在您了解有关您的领域的更多信息时对其进行构建。

# windows - 卸载parallels plesk面板，我不能

> ID：11445037
> 
> 赞同：0
> 
> 时间：2012-07-12T04:31:53.407
> 
> 标签：windows, uninstallation, plesk, parallels

我在 windows server 2003 x64 上安装了适用于 windows 的 parallels plesk panel 9.5，现在我无法卸载，我收到此错误：

无法访问 Windows Installer 服务。如果您在安全模式下运行 Windows，或者未正确安装 Windows Installer，则可能会发生这种情况。

Windows 没有在安全模式下运行，我尝试安装 Windows 安装程序，但我不能。

而不是这样我可以卸载。可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:42:38.627

我刚刚使用 Windows 的“卸载程序”功能卸载了 Plesk Panel 11。它似乎可以工作，因为它显示了一个 DOS 窗口并通知我它正在卸载的每个模块，但它没有从 IIS 中删除任何内容。卸载“成功”完成后，整个 Parallels 目录结构仍然完好无损。

我不得不从 IIS 中手动删除网站和应用程序池，并在 Windows 资源管理器中手动删除整个目录和文件结构。但是，为了做到这一点，我必须首先停止所有 MailEnable 服务以及结束 METray.exe 的进程。

换言之，完全移除 Plesk Panel 主要是手动过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:38:23.517

Parallels plesk 9.5 和 10.1-10.3 不支持 unix/linux 和 windows 操作系统的卸载。

如果我没记错的话，plesk 支持从 10.4 或 11 版本开始卸载 Windows。需要重新阅读发行说明。

卸载选项可能如下：

1.  尝试升级到 plesk 11，然后他们卸载 plesk（实际上我对这个选项不太确定，在尝试真实服务器之前最好检查一下）；
2.  如果对您不重要，请重新部署服务器；
3.  停止服务面板，不关心它。您也可以手动从文件系统和 iis 中删除面板。

# vb.net - VB.NET 自定义 SqlFactory，FileUpload 控制问题

> ID：11445042
> 
> 赞同：0
> 
> 时间：2012-07-12T04:32:21.567
> 
> 标签：vb.net, file-upload

我已经建立了一个`SqlFactory`类来控制我的`StoredProcedures`，并将它用于应用程序和 SQLServer 之间的所有事务。我最后实现的部分是文件上传。但它不会做它应该做的事情:(我在网上搜索了很多都找不到。

所以基本上我想`Report`用`name`,`description`和`image`. `Name`并且`description`工作正常，但由于某种原因它不会上传文件，它甚至没有达到上传文件的代码，即：

```
If fuImage.PostedFile Is Nothing OrElse String.IsNullOrEmpty(fuImage.PostedFile.FileName) OrElse fuImage.PostedFile.InputStream Is Nothing Then
    'nothing to upload
Else
    Dim imagebytes(fuImage.PostedFile.InputStream.Length) As Byte
    fuImage.PostedFile.InputStream.Read(imagebytes, 0, imagebytes.Length)
    rep.FuImage = imagebytes
End If
rep.Name = txtName.Text
rep.Description = txtReportContent.Text
repFac.Save(rep) 
```

这些行`rep.FuImage = imagebytes`和下面`if`的语句是我的工厂行，它应该可以工作，但就像`fuImage` `FileUpload`控制永远不会识别应该选择的文件一样。

这是我的观点部分：

```
<asp:FileUpload ID="fuImage" runat="server" CssClass="fontChange" />
<asp:RegularExpressionValidator ID="rExpImage" runat="server" ControlToValidate="fuImage"
    ErrorMessage="Only .gif, .jpg, .png, .tiff and .jpeg"  ValidationExpression="(.*\.([Gg][Ii][Ff])|.*\.([Jj][Pp][Gg])|.*\.([Bb][Mm][Pp])|.*\.([pP][nN][gG])|.*\.([tT][iI][iI][fF])$)"
    ValidationGroup="ReportValidationSummary" CssClass="failureNotification">*</asp:RegularExpressionValidator> 
```

注意：我知道 FileUpload 在 中不起作用`asp:UpdatePanel`，因此我正在使用常规`asp:Panel`，我开始怀疑是否所有`Panel`控件都存在问题......另外，我查看了提到很多事情的问题，我我很迷茫。

请帮忙，谢谢。

**编辑：** 我也尝试过解决`forms`，没有任何结果。我的服务器端`form`放在我的`Master`页面上，这是我唯一使用的。相反，我尝试在每个页面上放置表单。没有改变。（在某人的问题中阅读此内容，我想我也会尝试。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:29:28.673

固定的。问题`<ContentTemplate>`围绕着两者`<asp:UpdatePanel>`，而我`EditPanel`的问题很常见`<asp:Panel>`。这样，`FileUpload`不在更新面板中就无关紧要了。它必须设置为一个完整的帖子`<Triggers>`。

代码`Triggers`：

```
<Triggers>
   <asp:PostBackTrigger ControlID="Your_Control_ID" />
</Triggers> 
```

# java - 是否（或不）鼓励在 Android 开发中使用内部类？

> ID：11445048
> 
> 赞同：0
> 
> 时间：2012-07-12T04:32:46.090
> 
> 标签：java, android, inner-classes

我在某本书中读到使用内部类会使应用程序更大（每个内部类使用几个 KB），但是对性能有任何担忧吗？我在 Google 的示例代码中看到了内部类，但总的来说，在 Android 中是否鼓励使用内部类？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T04:45:37.967

**1.**当你想在同一个类中实现一个接口方法超过 1 次并且以超过 1 种方式实现时，内部类非常好。

**2.**匿名类是创建事件处理程序的最佳方式。

**3\. 使用顶级类（即静态内部类）将是轻量级的，因为它就像一个外部类，它没有对外部类的任何隐式引用。**

**4\. 非静态内部类会有点开销，因为它包含对外部类的隐式引用。**

例如： **对于具有隐式引用的内部类**

例如：

```
 public class outer{

                int x = 10;

               class inner{

                 int x=5;

                 public void go(){

   System.out.println("Inner x: "+ this.x);           // Prints x in Inner class
   System.out.println("Inner x: "+ Outer.this.x);     // Prints x in Outer class

                }
           }
       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T04:36:16.397

内部类、匿名类和常规类之间不应该有任何显着的代码大小差异。至于inner 和regular 的区别，你可以解压你的jar，看到每一个都会生成一个普通的.class 文件。

所以不要对不必要的事情发疯，但这也不是“不惜一切代价避免”的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:38:57.980

只要您使用静态内部类，就可以了。静态内部类更多是为了方便地安排类和正确地确定它们的范围。

非静态内部类不是这种情况，因为它们持有对持有它们的类的引用。这不仅很重，而且在 Android 中也很危险，当持有类是一个活的类时，即附加了一个上下文。这可能会导致内存泄漏，可能会泄漏整个应用程序。

这是一个非常相似的问题（关于活动中适配器的内部类的用户）和答案： [什么是更好的方法，将适配器保持为活动的内部类或外部？](https://stackoverflow.com/questions/8904038/what-is-the-better-way-keeping-adapter-as-an-inner-class-of-activity-or-outside/8904525#8904525)

# c++ - 静态数组和动态数组的区别

> ID：11445053
> 
> 赞同：3
> 
> 时间：2012-07-12T04:33:42.940
> 
> 标签：c++, c, gcc, compiler-construction, icc

朋友们，我只是在玩一些指针程序，并意识到 GCC（也许还有 C 标准）区分了静态和动态数组。

动态数组有一个用于数组中元素地址的占位符，而对于静态数组，没有编译器存储元素数组起始地址的内存位置。

我有一个示例程序来证明我的困惑。

```
#include <iostream>
#int main(void)
{
  int _static[10];
  int *_dynamic;

  _dynamic = new int [10];

  std::cout<<"_static="<<_static<<" &_static="<<&_static<<" &_static[0]="<<&_static[0]<<std::endl;
  std::cout<<"_dynamic="<<_dynamic<<" &_dynamic="<<&_dynamic<<" &_dynamic[0]="<<&_dynamic[0]<<std::endl;

  return 0;
} 
```

对于上述程序，`_static`并`&_static[0]`在预期的行上返回相同的地址。但是，它`&_static`也返回与其他两个相同的地址。

所以，`_static`并`&_static`引用相同的数字（或地址我们想称呼它的任何东西）。正如预期的那样，`_dynamic`并`&_dynamic`指示不同的位置。

那么，为什么 C 标准这么说`_static`并且`&_static`必须引用相同的位置。听起来很混乱。我觉得的一个原因是这`&_static`没有多大意义。但是，它的用法不应该被报告为错误吗？

有人可以帮我解决这个困惑吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T04:42:04.903

函数内部的静态数组在堆栈上分配。这样`_static`（衰减为指向第一个条目的指针），`&_static[0]`并且`&_static`具有相同的值，相同的内存地址。

On the other hand, a dynamic array is in fact a pointer to a contiguous memory area. Only the pointer is stored on the stack. This is why `&_dynamic` (from the stack) and `_dynamic` (from the heap) differ.

Hope this image shows it all:

![static vs dynamic arrays](../Images/65657db648fff07fe896d90155d3794d.png)

Have also a look at this [article about static and dynamic global arrays](http://techblog.rosedu.org/arrays-vs-pointers.html) continued with [the distinction between `extern` and non-`extern`](http://techblog.rosedu.org/c-extern-internals.html).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T04:42:38.263

Actually `_static` and `&_static` don't refer to the same location. The only reason they appear to is because you use `_static` in a context in which it decayed into a pointer. That is, by the way you used them, you *made* them refer to the same location. But they didn't before you did that -- one was an array and the other was a pointer. They couldn't be the same because they were fundamentally different things.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:14:14.980

in simple words static is created in stack and dynamic is created in heap, in static array you have to tell the size before program runs but in dynamic you can take input from user and then make array of that size.

Example static:

```
int array[5]; 
```

Example dynamic:

```
int *array;
cout << "Enter size of array: ";
cin >> size;
array = new int[size]; 
```

# scala - GlassFish 3.1.2 + 集群 + Web 容器属性

> ID：11445055
> 
> 赞同：0
> 
> 时间：2012-07-12T04:33:56.023
> 
> 标签：scala, servlets, properties, glassfish, scalatra

我在 Glassfish 中有一个关于处理设置 Web 应用程序的属性的问题我们正在从使用 Jetty 转移到在 Amazon AWS 上使用 GlassFish 设置集群环境

按照惯例，在处理 Servlet 时，当您想要解析环境变量时，您应该使用 .properties 文件，但是当您使用分布式环境时，这会导致问题（您必须将 .properties 文件放置在每个集群节点中）。GlassFish 能够通过其管理控制台配置 W​​eb 容器的属性，这意味着这些属性将通过集群自动分发

问题是，我在检索变量时遇到了随机行为。第一次运行测试应用程序时，我无法检索变量，但是它不再起作用

基本上我是通过管理 UI 设置环境变量。在 Configurations 下有 3 个配置项，一个用于集群（通常命名为 .config），一个 default-config 和一个 server-config。在 Web Container 下，我在所有 3 个名为“someVal”的文件中都放置了一个测试属性。

然后，我在 Scala（使用 Servlet 2.5）中创建了一个快速的 Scalatra 应用程序，并使用这一行来尝试获取属性

```
getServletContext.getInitParameter("someVal") 
```

任何想法我做错了什么，它总是返回null？

**更新** 看来我试图做的不是“正确”的做事方式。所以我的问题是，在处理 GlassFish 中的集群时，提供特定应用程序设置（在 .war 之外和运行时之外）的标准方法是什么。myfear 表示使用数据库是标准方法，但是我使用这些配置设置本身来定义 JDBC 连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:11:33.753

我知道了。您指的是 Web 容器设置 [http://docs.oracle.com/cd/E18930_01/html/821-2431/abedw.html](http://docs.oracle.com/cd/E18930_01/html/821-2431/abedw.html)

恐怕这从未被认为是提供特定于应用程序的配置，我坚信您将永远无法从 servlet 上下文访问这些属性。因此，如果您谈论的是应用程序特定信息，您可以（应该）使用 web.xml 中的 servlet init 参数。如果你使用

```
getServletContext().setInitParameter("param", "value"); 
```

您也许可以设置它们（至少在应用程序的运行时）。我不确定这里的集群复制。*正常*的方法是让您在数据库中进行配置设置。

# python - 使用 Python 解密 Windows 无线密码

> ID：11445058
> 
> 赞同：3
> 
> 时间：2012-07-12T04:34:07.920
> 
> 标签：python, encryption, wireless

我正在尝试使用 Python 解密存储在配置文件 xml 文件中的 Windows 无线密码。我遇到了[一篇博客文章](http://jbarillari.blogspot.com/2009/06/security-lols.html)，它给出了一个如何使用 Python 的 win32crypt 模块调用 Windows [CryptUnprotectData的示例。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380882%28v=vs.85%29.aspx)我的问题是我收到`Key not valid for use in specified state`错误，需要使用 LocalSystem 运行它。

> 即使您以管理员身份运行 cmd.exe，也会收到该错误。这里是你需要了解的一点关于 Windows 的地方，作为一个 Windows n00b，我不知道：LocalSystem 帐户不同于管理员权限。为了使用 LocalSystem 帐户运行 cmd.exe，您需要安装一个名为 PsTools 的 Microsoft 软件包。在 PsTools 中有一个名为 PsExec 的程序，它有点像 Un*x 上的 sudo。只需下载上面 Microsoft TechNet 页面底部链接的 zip 文件，然后将其解压缩到可以找到的地方。
> 
> 要使用 PsExec，请以管理员身份打开 cmd.exe（打开屏幕左下角的开始菜单，在搜索框中键入 cmd.exe，然后按 Ctrl+Shift+Enter 以管理员身份运行）。在打开的用户帐户控制对话框中点击“继续”。在打开的命令外壳中，导航到解压缩 PsTools 的目录。现在运行“psexec.exe /s /i cmd.exe”。在您同意 PsTools 的 EULA 后，PsTools 应该会打开一个以 LocalSystem 运行的新 cmd.exe 外壳窗口。

`psexec.exe`有没有办法在不使用博客文章状态的情况下解决这个错误？也许使用 CryptoPy 或 PyCrypto？

作为参考，我检索到的加密密码是 Windows Vista 配置文件 xml 文件中的 keyMaterial 密钥。

我正在使用的代码：

```
import win32crypt
mykey='01000000D08C9DDF.....' # 308 characters long
binout = []
for i in range(len(mykey)):
    if i % 2 == 0:
        binout.append(chr(int(mykey[i:i+2],16)))
pwdHash=''.join(binout)

output =  win32crypt.CryptUnprotectData(pwdHash,None,None,None,0)

print "hex:", "".join(["%02X" % ord(char) for char in output[1]])

print "ascii:", output[1] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:49:27.633

如果你需要的话，不要求你的系统管理员给你 LocalSystem 权限吗？

顺便说一句，不要为从十六进制到二进制的复杂转换而烦恼。做就是了：

```
In [5]: '01000000D08C9DDF'.decode('hex')
Out[5]: '\x01\x00\x00\x00\xd0\x8c\x9d\xdf' 
```

# dynamic - 用 id 检查是否存在 div 并插入一些 html 代码

> ID：11445059
> 
> 赞同：0
> 
> 时间：2012-07-12T04:34:16.373
> 
> 标签：dynamic, conditional, jwplayer

如何在某个 div 下方插入一些内容？

我的页面上有一个 jwplayer，它通常有一个 jwplayer-1 的 id，由 wordpress 的 jwplayer 插件插入。

我想要做的是在其下方插入一个 div（如果存在）。

因此，例如，如果我的页面有播放器，则页面上的某处会有

```
<div id="jwplayer-1>Player will appear here</div> 
```

我想要做的是检查该行是否存在，如果存在，则插入另一个 div 以便代码如下所示。

```
<div id="jwplayer-1>Player will appear here</div>
<div id="viewcount">Total Views: <?php showviews()?></div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:47:12.373

你可以做：

```
$('<div id="viewcount">Total Views: X</div>').insertAfter($('#jwplayer-1')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:38:25.180

如果要将 div 放在另一个 div 中，则可以使用 jQuery 的 append 方法：

html:

```
<div id="container">
    <div id="jwplayer-1>Player will appear here</div>
</div> 
```

javascript:

```
$('.container').append('<div id="viewcount">Total Views: <?php showviews()?></div>'); 
```

来源：

[http://api.jquery.com/append/](http://api.jquery.com/append/)

# php - 如何将子域重定向到 index.php 并在地址栏中保持子域 url 可见？

> ID：11445061
> 
> 赞同：1
> 
> 时间：2012-07-12T04:34:41.227
> 
> 标签：php, .htaccess

我有一个包含多个域的站点，例如`sub1.mydomain.org`, `sub2.mydomain.org`。

目前我有这个 htaccess 代码将所有这些子域重定向到 index.php 并将子域名作为变量传递：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^(.*)$ http://mydomain.org/index.php?subdomain=$1 [QSA,L] 
```

一切正常，除了 URL 地址更改为`mydomain.org/index.php?subdomain=(sub accessed)`.

我想保持显示子域名。我怎样才能做到这一点？

我的共享主机站点的结构为

```
/username/public_html/addon-domain/index.php
/username/public_html/addon-domain/subdomains
/username/public_html/addon-domain/subdomains/sub1
/username/public_html/addon-domain/subdomains/sub2... 
```

上面的 htaccess 文件在`subdomains`目录中。

编辑： ----- 上述问题已解决，但新情况已出现 -----

我的 HTACCESS 代码的问题是我使用了绝对路径 (http://www.mydomain...)，这将始终导致显示新的 url，无论 [R] 与否。相反，您应该使用相对路径。但是，仍然存在一个令人困惑的问题。这是新代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^([^.]+)\.mydomain\.org$
RewriteRule ^(.*)$ (can't use relative here) [QSA,L]
RewriteRule ^(.*)$ \.\./index.php?subdomain=$1 [QSA,L] 
```

第一个条件/规则将检查我的站点是否正在从子域访问，例如 sub.mydomain.org。如果它是真的，[L] 将停止第二个重写器运行。第二个重写器使用来自位于 /subdomains/ 文件夹中的 HTACCESS 文件的相对路径，如果我从 mydomain.org/subdomains/anysub 进入我的站点，一切正常。

但是，如果站点输入为 anysub.domain.org，则相对路径不起作用。它将触发两个错误：“内部服务器错误。服务器遇到内部错误或配置错误，无法完成您的请求。” 和“此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。”

任何人都会碰巧知道为什么？相对路径不应该总是与 HTACCESS 文件所在的位置相关吗？

编辑：刚刚发现 mydomain/subdomains/anysub/ 有效，但 mydomain/subdomains/anysub （不以 / 结尾）将再次触发显示 get var。开始认为这太复杂了，无法得到答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:06:12.033

尝试`P`在 的括号中添加一个标志`RewriteRule`：

```
RewriteRule ^(.*)$ http://mydomain.org/index.php?subdomain=$1 [P,QSA,L] 
```

# jquery - jQuery $().change(Function() 使用 $.ajax 对话框

> ID：11445063
> 
> 赞同：0
> 
> 时间：2012-07-12T04:34:58.620
> 
> 标签：jquery, events, select, dialog, handler

我正在打开一个动态加载 ajax 内容的对话框。

该对话框可以从多个按钮（CT 头、CT 胸等）打开。

当对话框打开时，会有一个 <select> </select> 菜单，其中包含一个事件处理程序，用于侦听发生的 .change。

我遇到的问题是 .change 没有被触发：

```
<script>
 $(document).ready(function(){

 $("button.ctIndicationList").change(function() {
     // alert('Value change to ' + $(this).attr('value')); <-- this won't trigger
     $('#dialogResult').html("loading...");
     $.ajax({
       type: "POST",
       url: $(this).attr('value') + ".php",
       // data: "q=" + $("#q").val(),
       success: function(msg){
         $('#dialogResult').html(msg);
          // alert( "Data Saved: " + msg );
       }
     });        

});
 $("#requestStudy").click(function() {
     alert('Your study has been ordered');
     $( "#dialog-form" ).dialog( "close" );
 });   
$( "button.create-user" )
    .button()
    .click(function() {
         alert($(this).attr('value') + ".php");
        // $("input.create-user").change(function() {
            $.ajax({
               type: "POST",
               url: $(this).attr('value') + ".php",
               // data: "q=" + $("#q").val(),
               success: function(msg){
                 $('#dialogResult').html(msg);
                  // alert( "Data Saved: " + msg );
               }
            });
             // $("#dialog-form").load($(this).attr('value') + ".php","?opt1=Cron&opt2=Spron");
             // $("#dialog-form" ).dialog( "open" );
        //    });   

        $( "#dialog-form" ).dialog( "open" );
});  
$('#dialog-form').dialog({ bgiframe: true,
    height: 600,
    width: 800,
    autoOpen: false,
    modal: true,
    overlay: {
        backgroundColor: '#000',
        opacity: 0.5
    }                
 });  

 });
 </script> 
```

...

```
<div>
<div id="dialog-form" title="Radiology Requisition" style="display:none;">
<p class="validateTips">All form fields are required.</p>
<form>
<fieldset>
    <p>Indication:
    <select id="ctIndicationList" class="ctIndicationList">
    <option value="ajaxheadInjury">head injury</option>
    <option value="ajaxstroke">stroke / TIA</option>
    </select></p>
<p><label for="email">Clinical History</label></p>
<p><input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" size="60" /></p>
<p><label for="email">Differential Diagnosis</label></p>
<P>1\. <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" size="60" />
<p>2\. <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" size="60" />
<p>3\. <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" size="60" />
<p id="dialogResult">result is here</p>
<p><button id="requestStudy">Request Study</button><p>
</fieldset>
</form>
</div>

<p><button class="create-user" value="formCThead">CT Head - minor head injury</button></p>
<p><button class="create-user" value="formCTchest">CT Chest</button></p>
<p><button class="create-user" value="formCTabdomen">CT Abdomen / Pelvis</button></p>
<p><button class="create-user" value="formCTcarotid">CT Carotid Angiogram</button></p>                  
<p><button class="create-user" value="formCTcspine">CT c-spine</button></p>

</div> 
```

下面是动态加载到对话框中的 formCT__.php 文件之一。它们看起来都很相似。您会注意到 <select id="ctIndicationList"> 位于此处。这就是我想要触发的。

```
<form>
<fieldset>
    <p>Indication:
    <select id="ctIndicationList">
        <option value="ajaxheadInjury">head injury</option>
        <option value="ajaxstroke">stroke / TIA</option>
    </select></p>
    <p><label for="email">Clinical History</label></p>
    <p><input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" size="60"></input></p>
    <p><label for="email">Differential Diagnosis</label></p>
    <P>1\. <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" size="60"></input></p>
    <p>2\. <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" size="60"></input></p>
    <p>3\. <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" size="60"></input></p>
    <p id="dialogResult">result is here</p>
    <p><button id="requestStudy">Request Study</button><p>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:57:37.643

You need to delegate your handler since the target element does not exist when the page loads, also you have `button.ctIndicationList` for you selector instead of `select.ctIndicationList`

```
$(document/* or some container element */).on('change', "select.ctIndicationList", function() {
    // alert('Value change to ' + $(this).attr('value')); <-- this won't trigger
    $('#dialogResult').html("loading...");
    $.ajax({
        type: "POST",
        url: $(this).attr('value') + ".php",
        // data: "q=" + $("#q").val(),
        success: function(msg){
            $('#dialogResult').html(msg);
            // alert( "Data Saved: " + msg );
        }
    });        
}); 
```

# iphone - iOS 应用程序的服务器/网络入门

> ID：11445067
> 
> 赞同：0
> 
> 时间：2012-07-12T04:35:07.093
> 
> 标签：iphone, objective-c, ios, cocoa-touch, network-programming

我正在开发一个 iOS 社交网络应用程序，该应用程序将涉及用户共享和评价照片。在过去的一年左右，我一直在自学如何使用可可触摸进行开发，现在我已经准备好开始使用该应用程序的网络方面了。不幸的是，我的网络/数据库经验为 0，并且想知道是否有人对要考虑的事项以及从何处/如何开始有任何好的建议。我很可能不会构建自己的服务器，而是会使用机架空间之类的东西。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:58:10.263

iOS 网络应用程序入门。以下是所需的东西：-您确实需要良好的**MySQL 后端开发经验和复杂的数据库查询以及开发 Web 服务的经验**。在根目录中，您需要服务器主机作为后端和管理模块，正如您在问题中提到的那样，例如竞赛空间或任何其他。你需要花几个月的时间来完成 mysql 后端、web 服务和管理模块的实现。

对于功能齐全的社交网络应用程序，您的首要任务是管理用户。登录/注册将在那里。每个用户都可以发布他的状态并可以评论其他用户的状态。所有状态帖子或评论都将具有其唯一的 ID 和与用户 ID 表的关系。可能是图片上传和对照片的评论也会在那里所以在后端会有很多表格和它们之间的关系。

对于社交网络应用程序，后端/Web 服务端和 iOS 端的工作量都会更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:39:01.650

这是一个相当抽象的问题。

最终，您将不得不专注于特定架构（哪个数据库，哪种网络技术），但在此之前，您需要大致了解可用选项是什么以及每个选项的优缺点是。

服务器数据库可能是最简单的，因为它没有那么大的区别。选择是 sql 数据库（mysql、sqllite ....），而不是 sql 数据库（nosql，在内存表中）或更高级别的抽象，您可以在其中隐藏差异并稍后决定（例如核心数据）。这可能会受到您的部署决策的限制，例如，如果您选择 LAMP（Linux、Apache、MySql、PHP），您将有更多的机架选项选择。如果您坚持使用 Apple 套件并使用 MacOS X 后端，则您可能有其他网络架构选项（例如 DistributedObjects。

网络架构也是众多选择中的难点。确实有几十种选择，有很多不同的优点和缺点。由于这是您首次涉足该领域，因此我将易用性和帮助的可用性列为您的首要任务。以下是您可能想要研究的一些流行技术（按字母顺序排列，以尽量减少易燃性:)）。DistributedObjects (apple), JAXP, JSON, RPC, SOAP, XML (bare, without the soapy bits)。

您应该问自己的另一个问题是“您可以只使用数据库连接，还是需要在后端进行处理？”。如果可以的话，你可能只需要使用远程数据库就可以逃脱，然后你只需要学习核心数据（这仍然会让你忙很长时间）。

一旦确定了要使用的技术，就可以开始学习了。

您提到使用托管服务器。您将希望能够在本地运行测试服务器。幸运的是，数据库和网络技术的几乎所有有价值的选项都可以在任何类似 unix 的机器上运行，因此您可能可以使用常规的开发机器。

还要记住，其中一些选择是宗教性的，所以你读到的每个人都会有强烈的偏见（当然包括我自己）。

# php - shopp插件中的导出选项

> ID：11445069
> 
> 赞同：1
> 
> 时间：2012-07-12T04:35:31.703
> 
> 标签：php, export, shopp

我在我的 wordpress 网站中使用了 paypal 的 shopp 插件。在`shopp->orders`页面中有一个“导出选项”。购买页面导出订单的功能是

```
function exportcolumns () {
        $prefix = "p.";
        return array(
            $prefix.'id' => __('Line Item ID','Shopp'),
            $prefix.'optionlabel' => __('Product Variation Name','Shopp'),
            $prefix.'description' => __('Product Description','Shopp'),
            $prefix.'sku' => __('Product SKU','Shopp'),
            $prefix.'quantity' => __('Product Quantity Purchased','Shopp'),
            $prefix.'unitprice' => __('Product Unit Price','Shopp'),
            $prefix.'total' => __('Product Total Price','Shopp'),
            $prefix.'data' => __('Product Data','Shopp'),
            $prefix.'downloads' => __('Product Downloads','Shopp')
            );
    } 
```

在 this`$prefix.'optionlabel' => __('Product Variation Name','Shopp')`中，包含`3482 Gouchh, Two Sems, With Insurance`单个字段中的值。在导出为 xls 时，我必须将其分成 3 个字段。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T06:05:08.060

根据我的经验，从 Shopp 导出任何东西的最佳理由是将其移动到不同的购物车平台。

我在几个网站上使用 Shopp 一年多了，这简直就是一场噩梦。它仍然存在故障，存在安全问题。如果您使用日志记录，您会发现代码是如此草率，以至于它不断抛出 PHP 错误。

他们所做的每一次更新都破坏了我的网站，让我大出血——而他们在他们的“支持”区域拉扯我，拖延勒索钱财——并提出修复他们的垃圾软件破坏的网站——每人 500 美元。

强烈建议远离 Shopp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:33:39.150

我不确定我是否误解了你的问题，但如果你有一个要推断的字符串值，[explode](http://php.net/manual/en/function.explode.php)就是你需要的函数。

假设您的产品存储在 $product 变量中

```
$export=explode(', ',$product['p.optionlabel']); 
```

会提供

```
array(3)
(
  [0] => string(11) "3482 Gouchh"
  [1] => string(8) "Two Sems"
  [2] => string(14) "With Insurance"
) 
```

然后，您可以使用它来进行导出。

# wpf - 如何为 WPF WebBrowser 设置动画

> ID：11445072
> 
> 赞同：2
> 
> 时间：2012-07-12T04:35:49.247
> 
> 标签：wpf, .net-3.5, browser, storyboard

只需将其记录为问题答案，以便其他人不必遭受同样的痛苦。

我有一个为页面设置动画的 WPF 应用程序，就像在 iPhone 上滑动一样。一切都很好，直到其中一个页面需要包含 WebBrowser。它对动画完全没有反应——当它应该滑入时，直到你聚焦它才会出现，当它应该滑出时，它会消失，直到你将鼠标移到它上面。在这两种情况下，它只是弹出/弹出而不是动画。

使事情复杂化的是，在项目期间，出于不相关的原因，决定回到 .net 3.5 而不是 4。

所以问题是：我怎样才能（a）让 WebBrowser 正确地制作动画；或 (b) 如何在动画开始时隐藏 WebBrowser 并在结束时再次显示。动画目前是在 XAML 中定义的，我并不是特别想将其更改为代码。

一个后续问题是：有没有更好的方法，仍然使用 .net 3.5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:35:49.807

***更新***与 WinForms 相比，WPF WebBrowser 实在是太可悲了，我已经使用 WindowsFormsHost 进行了替换。下面的一切仍然适用，但 WebBrowser 现在不那么高贵了（例如，它有一个 DocumentCompleted 事件）。

* * *

我很快放弃了为 WebBrowser 设置动画的选项，因为它太难了，而是决定隐藏并重新显示它。动画的开始由视图模型上的命令触发。然后它找到应该显示的页面，创建它，并通过反映过渡状态的附加属性启动动画。

我创建了一个接口 ，`IRequireTransitionInfo`这样调用给它一个隐藏自己并再次显示`IRequireTransitionInfo.TransitioningFrom`的机会。`IRequireTransitionInfo.TransitioningTo`TransitioningFrom 很简单，但必须在情节提要完成时调用 TransitioningTo。

最初，在 View Model 的构造函数中，它去寻找 Storyboard 并连接到它的 Completed 事件中，如下面的代码所示：

```
 Storyboard animation = Application.Current.FindResource("SlideAnimation") as Storyboard;
    if (animation != null)
    {
      animation.Completed += new EventHandler(animation_Completed);
    } 
```

然后是事件处理程序：

```
void animation_Completed(object sender, EventArgs e)
{
  IRequireTransitionInfo info = currentViewModel as IRequireTransitionInfo;
  if (info != null)
    info.TransitioningTo(currentView);
} 
```

这似乎与 .net 4 配合得很好。降级到 .net 3.5 后，当上面连接 Completed 事件的代码运行时，我收到以下错误：

```
Specified value of type 'System.Windows.Media.Animation.Storyboard' must have IsFrozen set to false to modify. 
```

尽管有一些关于 SO 的其他答案，但您无法解冻冻结的 Freezable，并且将代码移动到 MainWindow 的构造函数中并没有帮助。

我沿着故事板上的附加属性的路径走下去，该属性绑定到视图模型上的命令。

```
<Storyboard x:Key="SlideAnimation" local:EventCommand.StoryboardCompleted="{Binding Source={StaticResource Locator}, Path=Current.MainViewModel.StoryboardCompletedCommand}"> 
```

但是，这会在运行时导致以下错误：

```
Cannot convert the value in attribute 'ContentTemplate' to object of type 'System.Windows.DataTemplate'. Cannot freeze this Storyboard timeline tree for use across threads. 
```

看来您不能在 Storyboard 上进行任何数据绑定（至少在 .net 3.5 下）。因此，我通过让附加属性只定义资源的字符串名称来稍微不雅地解决了这个问题，该资源预计将实现支持故事板完成通知的接口。

```
<Storyboard x:Key="SlideAnimation" local:EventCommand.StoryboardCompletedHandler="Locator"> 
```

如果有人知道在 .net 3.5 下处理这种情况的更好方法，我会很高兴听到。

# javascript - 视差“滚动”仅通过导航

> ID：11445077
> 
> 赞同：2
> 
> 时间：2012-07-12T04:36:00.850
> 
> 标签：javascript, html, jquery-ui, css, parallax

由于我还是 Javascript/Jquery/HTML5/CSS3 的新手，我想我会向所有更有经验的程序员提问。

我有点卡在我的程序逻辑的开头。我想做一个具有视差“滚动”效果的网站，但是只有当用户单击屏幕边缘的导航按钮时才会产生这种效果。

网站的布局将是这样的：

```
 O
OXO
 O 
```

“O”是内容 div，“X”是“主页”页面（起点）。如果用户单击屏幕顶部的箭头（从原点开始），页面将向上滚动。其他任何方向也是如此。我想要一张背景中机构的巨型照片，它使用视差效果根据他们“滚动”到的特定内容 div 来改变它的位置。

这两天我一直在绞尽脑汁想弄清楚从哪里开始。任何帮助将不胜感激，如果我需要更具体地说明某些事情，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:10:56.183

主页内容处于视差体验的中间。

出于这个原因，您将需要一个可以处理垂直和水平视差效果的视差插件，以便在您的网页中正确导航。

**考虑：** [**jQuery 的滚动视差插件**](http://dev.jonraasch.com/scrolling-parallax/examples/multi-directional-parallax)

上面的视差演示页面允许您滚动两个方向。

这是我使用这个插件的方法/方法。

**1.**根据需要设计具有水平和垂直内容的网站。布局示例：

```
OOO     Here, the top of the webpage is content about the "starting" point.
OXO     Next, you have content on the sides of the "starting" point as shown.
OOO     Finally, content is below the "starting" point to complete the webpage. 
```

**2.**由于网页访问者会看到不想要的网页顶部，因此使用`jQuery.scrollTo()`插件设置页面加载的“起始”点。

**3.**使用插件或方法，允许 4 个透明箭头“div”位于每个**视口侧的“固定”位置**。当用鼠标单击（***或悬停***）时，这将模拟滚动条的移动，并且视差网页插件会做出相应的反应。布局示例（注意外部导航是半透明的）：

```
UUUUU     Webpage top-content is here plus the overlay arrow for UP Navigation.
LOOOR     LEFT and RIGHT Navigation arrows are seen on top of more "top" content.
LOXOR     The center starting point will show the "fixed" Navigation arrows.
LOOOR     LEFT and RIGHT Navigation arrows are seen below the "starting" point.
DDDDD     Bottom-content is here plus the overlay arrow for DOWN Navigation. 
```

网页最困难的部分是有足够的“填充内容”占据“起点”的顶部和侧面。但是如果那个“填充内容”是一个缩略图库，那么这个特殊的视差页面看起来会非常好（而且不寻常！）。

# ruby - Sinatra - 通过 config.ru 设置缓存控制标头

> ID：11445082
> 
> 赞同：3
> 
> 时间：2012-07-12T04:36:32.717
> 
> 标签：ruby, heroku, sinatra, rack, jekyll

我目前正在 Heroku 的 Cedar 堆栈上运行 Octopress（基于 Jekyll）站点——代码位于此处：[https ://github.com/elithrar/octopress](https://github.com/elithrar/octopress)

我想`Cache-Control`根据文件类型有选择地应用标题：

*   `.html`文件的值为`public, max-age=3600`
*   `.css|.js|.png|.ico`（等）获取值`public, max-age=604800`- 或者，我想将此规则应用于`/stylesheets', '/javascripts', '/imgs'`目录提供的任何内容。

已经使用了这两个`set :static_cache_control , [:public, :max_age => 3600]`并且只是没有运气的香草`cache_control :public, :max_age => 3600`语句。

我已经设法自己设置`public, max-age=3600`文章（例如`/2012/lazy-sundays/`），但无法让标题应用于 CSS/JS（例如`/stylesheets/screen.css`）

我`config.ru`目前看起来像这样（**更新**）：

```
require 'bundler/setup'
require 'sinatra/base'

# The project root directory
$root = ::File.dirname(__FILE__)

class SinatraStaticServer < Sinatra::Base

  get(/.+/) do
    cache_control :public, :max_age => 7200
    send_sinatra_file(request.path) {404}
  end

  not_found do
    send_sinatra_file('404.html') {"Sorry, I cannot find #{request.path}"}
    cache_control :no_cache, :max_age => 0
  end

  def send_sinatra_file(path, &missing_file_block)
    file_path = File.join(File.dirname(__FILE__), 'public',  path)
    file_path = File.join(file_path, 'index.html') unless file_path =~ /\.[a-z]+$/i  
    File.exist?(file_path) ? send_file(file_path) : missing_file_block.call
  end

end

use Rack::Deflater

run SinatraStaticServer 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:49:13.827

以下是如何为静态资产设置长到期标头，并为您在 Heroku 上的主要内容设置任意到期标头：

宝石文件：

```
gem 'rack-contrib' 
```

配置.ru：

```
require 'rack/contrib'

get '*.html' do |page|
  # whatever code you need to serve up your main pages
  # goes here... use Rack::File I guess.
  page
end

# Set content headers for that content...
before do
  expires 5001, :public, :must_revalidate
end

# Assets in /static/stylesheets (domain.com/stylesheets) 
# are served by Rack StaticCache, with a default 2 year expiry.

use Rack::StaticCache, :urls => ["/stylesheets"], :root => Dir.pwd + '/static'

run Sinatra::Application 
```

默认情况下，URL 数组（静态/样式表、静态/图像等）中列出的内容的有效期为 2 年。

你必须从 /public 移动到 /static ，否则你会不必要地使用 Heroku 的 nginx 配置（应用这些设置的正确位置真的......）。

我知道你说过你试图不使用 Rack Contrib，但这没有任何意义。使用 90 行的小型库来执行此操作没有任何害处[https://github.com/rack/rack-contrib/blob/master/lib/rack/contrib/static_cache.rb](https://github.com/rack/rack-contrib/blob/master/lib/rack/contrib/static_cache.rb)。

“正确”的方法是在可以配置 nginx 的环境中托管静态内容，第二个最佳方法是重命名静态文件路径，以便 heroku 忽略它，并使用 rack static 提供带有所需标题的静态文件。

--

另外要明确的是，只需将您的公用文件夹重命名为其他名称，您就可以通过路由执行此操作，并且正常的 Sinatra 过期功能。但我会使用 StaticCache，因为它不那么冗长。（我相信，真正的问题是 Heroku 不会让 nginx 与您的应用程序对话以请求 public/。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T23:12:36.423

我对 Sinatra 知之甚少，但我*认为*这样的事情可以解决问题：

```
class SinatraStaticServer < Sinatra::Base
  before '*.html' do
    response.headers['Cache-Control'] = 'public, max-age=3600'
  end

  before %r{\.(css)|(js)|(png)|(ico)} do
    response.headers['Cache-Control'] = 'public, max-age=604800'
  end

  # ...
end 
```

**更新：**当你说上面没有成功添加标题时，我进一步调查了它。我确定问题在于 Sinatra 自动提供文件`public/`而不是通过应用程序，因此没有添加标题。我的解决方案是将静态文件从`public/`to移动`public/public/`并相应调整`send_sinatra_file`：

```
class SinatraStaticServer < Sinatra::Base
  # ...

  def send_sinatra_file(path, &missing_file_block)
    file_path = File.join(File.dirname(__FILE__), 'public/public',  path)
    file_path = File.join(file_path, 'index.html') unless file_path =~ /\.[a-z]+$/i
    File.exist?(file_path) ? send_file(file_path) : missing_file_block.call
  end

  # ...
end 
```

我确认这适用于我的机器。请注意，我`response.headers['Cache-Control']`在答案的第一部分中使用了该方法，而不是`set :static_cache_control`您尝试过的方法，但我认为它只能在一个`configure do`块中运行一次。

另请注意，在当前设置下，与上述匹配的 404`nonexistant.png`将提供 404 状态，但 Cache-Control 标头仍然存在。我可以看到几种解决方法，但我认为你会这样做，所以我只是指出它并认为你会随心所欲地处理它。

# jquery - Jquery悬停功能并在平板电脑上单击

> ID：11445086
> 
> 赞同：1
> 
> 时间：2012-07-12T04:37:49.797
> 
> 标签：jquery, ipad, hover, tablet, click-through

我有一个 jquery 幻灯片，它使用导航列表来切换幻灯片图像。它的工作原理是当您将鼠标悬停在它突出显示的导航列表（'.active'）上并且关联的图像切换到该列表时。导航列表内有链接，也可以单击以转到不同的页面。

我需要在平板电脑上使用它，这样当用户点击导航列表时，它会变为活动状态，然后图像幻灯片切换，然后如果再次点击，它会进入该链接。现在发生的事情是，只要您点击它，它就会变得活跃并点击。

这是jquery

```
$(".main_image .desc").show(); //Show Banner
$(".main_image .block").animate({ opacity: 0.8 }, 1 ); //Set Opacity

//Click and Hover events for thumbnail list
$(".image_thumb ul li:first").addClass('active'); 
$(".image_thumb ul li").hover(function(e){ 
    //Set Variables
    e.preventDefault();

    var imgAlt = $(this).find('img').attr("alt"); //Get Alt Tag of Image
    var imgTitle = $(this).find('a.imgloc').attr("href"); //Get Main Image URL
    var imgDesc = $(this).find('.block').html();    //Get HTML of block
    var imgDescHeight = $(".main_image").find('.block').height();   //Calculate height of block 
    if ($(this).is(".active")) {  //If it's already active, then...
        return false; // Don't click through
    } else {
        //Animate the Teaser                
        $(".main_image .block").animate({ opacity: 0, marginBottom: -imgDescHeight }, 250, function() {
        $(".main_image .block").html(imgDesc).animate({ opacity: 0.8,   marginBottom: "0" }, 250 );
        $(".main_image img").attr({ src: imgTitle , alt: imgAlt});
        });
    }

    $(".image_thumb ul li").removeClass('active'); //Remove class of 'active' on all lists
        $(this).addClass('active');  //add class of 'active' on this list only
        return false;
    }); 
```

这是导航列表的 html

```
<div class="image_thumb">
    <ul>
        <li id="one">

            <h2><a href="styleguide.html">Text Text Text</a></h2>
            <p><a href="styleguide.html">Text Text Text</a></p>

            <a class="imgloc" href="content/images/home/01.jpg"></a>

            <div class="block">
                 <p>Text Text Text</p>
            </div>

        </li>
    </ul>
</div> 
```

这是它如何工作的示例： [ocgoodwill.org](http://ocgoodwill.org)

如果有人可以提供帮助，那就太好了！

- 编辑 -

我还想补充一点，如果用户点击了其中一个元素，然后点击了另一个元素，则需要重置第一个元素，这样如果他们再次点击它，它就不会自动点击。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:12:11.820

**更新**：在最近再次使用这个脚本之后，我意识到事情可以做得更简单，根本不需要任何标志。

[在我的网站上查看修改后的代码。](http://www.hnldesign.nl/work/code/mouseover-hover-on-touch-devices-using-jquery/)

原答案：

今天有完全相同的问题。我使用 data 属性解决了它，实时绑定到 touchstart 事件（这是一个基本的触摸设备检查，但你可以让它更彻底）。尝试使用以下代码，替换“clickable_element”以满足您的需求。

```
$('clickable_element').live("touchstart",function(e){
    if ($(this).data('clicked_once')) {
        // element has been tapped (hovered), reset 'clicked_once' data flag and return true
        $(this).data('clicked_once', false);
        return true;
    } else {
        // element has not been tapped (hovered) yet, set 'clicked_once' data flag to true
        e.preventDefault();
        $(this).trigger("mouseenter"); //optional: trigger the hover state, as preventDefault(); breaks this.
        $(this).data('clicked_once', true);
    }
}); 
```

这应该会阻止平板电脑在第一次点击时激活链接，在第二次点击时激活它。

**编辑**：如果有多个链接元素，当单击其他元素之一时需要“重置”，请尝试将数据属性附加到父容器：

的HTML：

```
<div id="parent-element">
    <a href="" id="1">Link 1</a>
    <a href="" id="2">Link 2</a>
    <a href="" id="3">Link 3</a>
</div> 
```

jQuery：

```
$('#parent-element a').live("touchstart",function(e){
    var $link_id = $(this).attr('id');
    if ($(this).parent().data('clicked') == $link_id) {
        // element has been tapped (hovered), reset 'clicked' data flag on parent element and return true (activates link)
        $(this).parent().data('clicked', null);
        return true;
    } else {
        // element has not been tapped (hovered) yet, set 'clicked' data flag on parent element to id of clicked link, and prevent click
        e.preventDefault(); // return false; on the end of this else statement would do the same
        $(this).trigger("mouseenter"); //optional: trigger the hover state, as preventDefault(); breaks this. I do suggest adding a class with addClass, as this is much more reliable.
        $(this).parent().data('clicked', $link_id);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:35:19.007

我希望我可以回复原始帖子，但是要重置“clicked_once”状态，您应该能够使用原始代码中的这个位

```
$(".image_thumb ul li").removeClass('clicked_once'); 
```

（或类似的东西）在 c_kick 代码的 else 语句的开头。

# android - 连接 USB 电缆后自动启动我的 android 应用程序。

> ID：11445092
> 
> 赞同：4
> 
> 时间：2012-07-12T04:38:41.157
> 
> 标签：android, usb

如果用户将 USB 电缆连接到设备，我是否可以启动我的 android 应用程序？我正在通过这个[链接](http://developer.android.com/guide/topics/connectivity/usb/host.html)。我在正确的道路上吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T04:48:51.983

在 Manifest 中为 ACTION_POWER_CONNECTED 注册一个接收器：

```
<receiver android:name=".OnPowerReceiver">
        <intent-filter>
                <action android:name="android.intent.action.ACTION_POWER_CONNECTED" />
        </intent-filter>
</receiver> 
```

并在代码部分

```
public class OnPowerReceiver extends BroadcastReceiver { 

@Override
    public void onReceive(Context context, Intent intent) {
        Intent i = new Intent(context, Your_Activity.class);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);   
    }   
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T04:47:37.917

是的，你可以做到，你需要编写一个`BroadcastReceiver`当 USB 端口（插件或插件）发生任何事件时会触发的代码。

```
<action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" /> 
```

发生此类情况时，只需触发 Intent 即可开始您的活动。

# jquery - p.parentNode 为空（没有 http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 的来源）

> ID：11445096
> 
> 赞同：0
> 
> 时间：2012-07-12T04:39:09.157
> 
> 标签：jquery

在 Firefox 13 中我的一个页面的大多数页面加载中，我都会收到此错误。（在 Chrome 或 Firefox 12 中不可复制）

p.parentNode 为空（没有[http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)的来源）

这似乎与CDN有关。有没有人有任何想法？

# hibernate - 休眠递归初始化

> ID：11445099
> 
> 赞同：17
> 
> 时间：2012-07-12T04:39:34.173
> 
> 标签：hibernate

我正在休眠中编写一个函数来递归地递归初始化对象的所有属性，以便加载整个对象图。

我有两个复杂的场景需要使用它

1）自复合对象，如类别和子类别......

```
@Entity
public class Category {

    @Column(nullable = false, length = 50)
    @NotNull
    @Size(max = 50, message = "{50}")
    protected String name;

    @ManyToOne(targetEntity = Category.class, fetch = FetchType.LAZY, optional = true)
    private Category parentCategory;
    } 
```

2）复杂的对象图，在使用之前有很多对象需要初始化。

问题是我不能使用急切获取，因为我只在选择性情况下需要整个对象图，并且我想要通用代码，因此不需要为对象编写 HQL 查询。

我为此编写了部分代码，

```
public void recursiveInitliaze(Object obj) throws Exception {
    if(!Hibernate.isInitialized(obj))
        Hibernate.initialize(obj);
    PropertyDescriptor[] properties = PropertyUtils.getPropertyDescriptors(obj);
    for (PropertyDescriptor propertyDescriptor : properties) {
        Object origProp = PropertyUtils.getProperty(obj, propertyDescriptor.getName());
        if (origProp != null) {
            this.recursiveInitliaze(origProp);
        }
        if (origProp instanceof Collection && origProp != null) {               
            for (Object item : (Collection) origProp) {
                this.recursiveInitliaze(item);
            }
        }
    }
} 
```

但它有一个问题，由于双向关系，它最终进入方法调用的stackoverflow。那么如何检测是否存在双向关系或者有没有更好的方法来实现呢？

我认为 fetch profile 也可以提供帮助，但如果可能的话，仍然想尝试实现这一点，因为在项目的当前阶段配置 fetch profile 很困难。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-09-01T14:49:08.457

完整代码：

```
public <T> T recursiveInitliaze(T obj) {
    Set<Object> dejaVu = Collections.newSetFromMap(new IdentityHashMap<Object, Boolean>());
    try {
        recursiveInitliaze(obj, dejaVu);
    } catch (IllegalAccessException | InvocationTargetException | NoSuchMethodException e) {
        ReflectionUtils.handleReflectionException(e);
    }
    return obj;
}

private void recursiveInitliaze(Object obj, Set<Object> dejaVu) throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {
    if (dejaVu.contains(this)) {
        return;
    } else {
        dejaVu.add(this);

        if (!Hibernate.isInitialized(obj)) {
            Hibernate.initialize(obj);
        }
        PropertyDescriptor[] properties = PropertyUtils.getPropertyDescriptors(obj);
        for (PropertyDescriptor propertyDescriptor : properties) {
            Object origProp = PropertyUtils.getProperty(obj, propertyDescriptor.getName());
            if (origProp != null) {
                this.recursiveInitliaze(origProp, dejaVu);
            }
            if (origProp instanceof Collection && origProp != null) {
                for (Object item : (Collection<?>) origProp) {
                    this.recursiveInitliaze(item, dejaVu);
                }
            }
        }
    }
} 
```

ReflectionUtils 的代码：

```
/**
 * Handle the given reflection exception. Should only be called if no
 * checked exception is expected to be thrown by the target method.
 * <p>Throws the underlying RuntimeException or Error in case of an
 * InvocationTargetException with such a root cause. Throws an
 * IllegalStateException with an appropriate message else.
 * @param ex the reflection exception to handle
 */
public static void handleReflectionException(Exception ex) {
    if (ex instanceof NoSuchMethodException) {
        throw new IllegalStateException("Method not found: " + ex.getMessage());
    }
    if (ex instanceof IllegalAccessException) {
        throw new IllegalStateException("Could not access method: " + ex.getMessage());
    }
    if (ex instanceof InvocationTargetException) {
        handleInvocationTargetException((InvocationTargetException) ex);
    }
    if (ex instanceof RuntimeException) {
        throw (RuntimeException) ex;
    }
    throw new UndeclaredThrowableException(ex);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T08:53:34.450

您可以`Hibernate.initialize()`在对象上使用来初始化它。我不确定这是否会级联。否则，您可以检查`instanceof HibernateProxy`哪个为您提供了 isInitialized 属性。

更新：由于初始化不级联，你需要像你已经做的那样遍历树。使用 Hashset 来跟踪您已经处理过的对象。

# grails - 如何重新启动 Grails Web 应用程序

> ID：11445101
> 
> 赞同：1
> 
> 时间：2012-07-12T04:39:44.640
> 
> 标签：grails, groovy, jetty

除了通过执行 ctrl z 并再次运行它来关闭它之外，我如何重新启动 grails 应用程序。

当我这样做时，它会说

```
Error Server failed to start for port 8080: Address already in use 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T08:04:18.410

`CTRL`-`Z`不关闭应用程序，向[进程发送 SIGTSTP 信号以](http://en.wikipedia.org/wiki/SIGTSTP)暂停它...暂停的进程仍然与其资源（端口、文件等）有连接，因此您不能在同一端口上运行另一个 grails 实例而其中一个被暂停。

要将其带回[前台](http://en.wikipedia.org/wiki/Fg_%28Unix%29)，您可以`fg`在同一个 shell 中输入（或者如果您希望它[在后台运行](http://en.wikipedia.org/wiki/Bg_%28Unix%29)，您可以使用`bg`）

要关闭它，你需要`CTRL`- `C`（或者你可以像 nickdos 在评论中所说的那样杀死它）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T11:19:39.923

要彻底关闭`run-app`or ，请在您的 grails 应用程序的顶级目录中`run-war`创建一个名为的空文件（即在、等旁边）。一旦应用程序停止，Grails 将自动删除该文件，因此当它在您创建它后不久消失时不要感到惊讶。`.kill-run-app``grails-app``src`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-26T21:58:39.697

关机不需要进程黑客，也不需要“可能毁掉一切”的免责声明:)

赶紧跑：

`grails stop-app`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T20:50:31.150

如果这仍然不起作用：

`lsof -i :8080`或者`ps aux | grep grails`

将显示进程 ID，然后首先尝试很好地杀死它：

`kill 12345`（其中 12345 是 processId）

如果它真的不想玩得很好，那么**锤**它：

`kill -9 12345`（其中 12345 是 processId）

每次都有效（免责声明：可能会毁掉一切）

# git - 如何恢复 GIT 中的错误修复？

> ID：11445104
> 
> 赞同：6
> 
> 时间：2012-07-12T04:39:57.787
> 
> 标签：git

我敢肯定有很多 GIT 用户遇到了这个问题：

1.  从 master 创建一个分支。我们称之为*featureX*。
2.  在某个地方，在处理*featureX*时，您意识到您想要修复以前的提交：
    *   你提交你的修复。
    *   你做你的 rebase 和 squash/fixup。
3.  稍后，您想针对您的 master 进行 rebase 以将最新更改合并到*featureX*中。
4.  事情中断是因为你的分支已经发散了（修复没有在 master 中完成）。你有一个糟糕的一天。

这是我第二次发生这种情况。*第一次，我在featureX*中没有太多的历史，只是从 master 中创建了一个新分支。**你对此有何看法？你会如何解决这个问题？**是否有可能进行`git reset`某个 reflog？在这种情况下，我可以撤消变基并将修复提交移回*featureX 之上*（使用交​​互式变基）。

我确信有不同的方法可以解决它，但我想这是一个常见的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:52:48.740

是的，您可以将任何分支重置为之前签出的任何内容（reflog）。因为您的修复仍在 FeatureX 中，所以 rebase 的行为与您不进行修复的情况没有什么不同 - 只有当 master 的分歧与 featureX 分支中的任何提交发生冲突时才重要 - 是否修复。

其次，当人们第一次学习 git 时，就会爱上变基的美妙之处。但我又回到了合并。它更简单，它标志着历史的发生，并迫使一些纪律。这是我的工作流程：[http ://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

# asp.net - 在 ASCX 自定义控件中将 CSS 规则放在哪里？

> ID：11445106
> 
> 赞同：6
> 
> 时间：2012-07-12T04:40:35.207
> 
> 标签：asp.net, css, jquery-ui

我是在 ASP.NET 中工作的新手，但我正在开发一个自定义控件，其中包含一个多视图控件，它显示了一堆不同的东西。其中一些是使用 JQuery UI 元素（如选项卡和手风琴）显示的，这些元素将具有相当多的自定义功能。

由于我将有很多仅适用于自定义控件内的元素的 CSS 规则（不适用于我们网站的其余部分），我想知道将 CSS 样式规则放在哪里。

我通常只是在站点根目录的某个地方放置一个样式表并从那里引用它。但是当我使用 ASP.NET 时，我觉得我应该将所有代码（包括 CSS、JS 等）放在自定义控件本身中。这感觉更“程序化”，将所有东西放在一起。

谁能告诉我应该怎么做？在 ASP.NET 中进行 Web 开发的最佳实践是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T04:47:05.943

如果您正在创建的控件位于*单独的程序*集中，您可以将 CSS 文件嵌入到程序集中以使其可重用并*从您的控件创建到这些文件的直接链接*，然后在您的控件中注册它们以呈现为`link`标记。在您的页面中

注意：请记住，您需要将程序集中的 CSS 文件标记为*嵌入式资源*

只需选择您的文件 | 然后 proeprties 并更改其*Build Action*属性并将其设置为：*嵌入式资源*

![在此处输入图像描述](../Images/89da44ea6a84003dde261e44bebb2fc7.png)

在以下代码中：

*   `AjaxEnabled.Web.UI`表示程序集的命名空间

*   `DefaultStyle.css`表示嵌入的 CSS 文件名

以下代码示例显示了所需的步骤：（在您的自定义服务器控件中）

```
[assembly: WebResource("AjaxEnabled.Web.UI.DefaultStyle.css", "text/css")]

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        if (this.Page.Header != null)
        {
            if (!this.Page.ClientScript.IsClientScriptBlockRegistered("defaultCss"))
            {
                var link = new HtmlLink();

                link.Href = this.Page.ClientScript.GetWebResourceUrl(
                    typeof(YourControlType),
                    "AjaxEnabled.Web.UI.DefaultStyle.css"
                );
                link.Attributes.Add("rel", "stylesheet");
                link.Attributes.Add("type", "text/css");

                this.Page.Header.Controls.Add(link);
                this.Page.ClientScript.RegisterClientScriptBlock(
                    typeof(Page),
                    "defaultCss",
                    string.Empty
                );
            }
        }
    } 
```

您需要`ScriptManager`在包含自定义控件的页面中添加控件的实例

```
<asp:ScriptManager runat="server" ID="sm"/> 
```

在您的 ASPX 页面中，您需要将该`header`部分标记为服务器控件

```
<head runat="server"> 
```

* * *

以下代码：

```
link.Href = this.Page.ClientScript.GetWebResourceUrl(
                typeof(YourControlType),
                "AjaxEnabled.Web.UI.DefaultStyle.css"); 
```

直接呈现*到嵌入在程序集中的 CSS 文件的链接*

* * *

这个条件：

```
if (!this.Page.ClientScript.IsClientScriptBlockRegistered("defaultCss"))
...
this.Page.ClientScript.RegisterClientScriptBlock(
                        typeof(Page),
                        "defaultCss",
                        string.Empty
                    ); 
```

确保 CSS 在页面中仅呈现一次，即使您删除了多个控件实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:09:19.363

您应该输入您正在使用的页面。

为什么？

1.  在页面上有多个控件的情况下，如果您将 style/js 应用到用户控件而不引用外部样式表或脚本，您将看到每个单独的控件都重复了许多 CSS/js 代码。
2.  更好地管理代码。
3.  CSS的控件是页面而不是控件本身，所以同一个控件可以用于多个页面，可能需要不同的样式。

# jquery - jQuery加载网址问题

> ID：11445109
> 
> 赞同：0
> 
> 时间：2012-07-12T04:41:57.130
> 
> 标签：jquery, asp.net-mvc-2

我们突然遇到了 jQuery 加载函数的问题。

假设我们有一个视图/页面的 url，它是“www.domain.com/register”，并且在该视图中我们有`$('#div').load('messages/pixeltracker.htm');` 之前的脚本，它总是返回**www.domain.com/messages/pixeltracker.htm**它总是ups一个文件夹。

但是现在，它返回了一个错误的网址**www.domain.com/register/messages/pixeltracker.htm**这显然会返回 404 错误，并且在调试时我注意到我需要在 messages/pixeltracker.htm 之前添加 ../ 之类的东西 `$('#div').load('../messages/pixeltracker.htm');`

我想知道是服务器问题还是浏览器问题？

我希望有人能解释一下。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:31:26.097

您之前访问的页面是 www.domain.com/register/ 吗？如果你总是在最后使用反斜杠，messages/pixeltracker.htm 就可以了。否则，它不应该是正确的。

# google-apps-script - 来自谷歌脚本的融合表

> ID：11445112
> 
> 赞同：0
> 
> 时间：2012-07-12T04:42:13.220
> 
> 标签：google-apps-script, google-fusion-tables

我在谷歌脚本中使用此代码从请求到谷歌融合表 [https://developers.google.com/fusiontables/docs/samples/apps_script](https://developers.google.com/fusiontables/docs/samples/apps_script)

```
function getGAauthenticationToken(email, password) {
  password = encodeURIComponent(password);
  var response = UrlFetchApp.fetch("https://www.google.com/accounts/ClientLogin", {
      method: "post",
      payload: "accountType=GOOGLE&Email=" + email + "&Passwd=" + password + "&service=fusiontables&Source=testing"
  });
  var responseStr = response.getContentText();
  responseStr = responseStr.slice(responseStr.search("Auth=") + 5, responseStr.length);
  responseStr = responseStr.replace(/\n/g, "");
  return responseStr;
}

function getdata(authToken) {
  query = encodeURIComponent("SHOW TABLES");
  var URL = "http://www.google.com/fusiontables/api/query?sql=" + query;
  var response = UrlFetchApp.fetch(URL, {
     method: "get",
     headers: {
          "Authorization": "GoogleLogin auth=" + authToken,
     }
  });
  return response.getContentText();
}

function test(){
  var email = "xyz@gmail.com";
  var pass = "xyz";
  var token = getGAauthenticationToken(email,pass);
  Logger.log(getdata(token));
} 
```

但是，我如何在没有用户/密码的情况下与 OAuth 2.0 建立连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:52:08.400

不是 oAuth 2.0，Apps 脚本仅支持 1.0。但是您可以通过 Fusion Tables API 正常使用 1.0。不需要用户通行证信息。这是我很久以前编写的一个函数，用于将 oAuth om 我的 UrlFetch 请求设置为 Google API。

```
/**
 * Set up Google's oAuth authentication for UrlFetch
 * @retuns {Object} args to be used UrlFetchApp
 * @param {string} name oAuth service name, can be anything
 *     but must not repeat between different scopes
 *     recommend to use a meaninful name related to the scope
 * @param {string} scope google scope for oAuth
 */
function googleOAuth(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey('anonymous');
  oAuthConfig.setConsumerSecret('anonymous');
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

现在还有一个[著名的库](https://developers.google.com/apps-script/notable-script-libraries?hl=pt-BR)，链接在 Google Apps 脚本网站上，它会自动为您提供更多的东西。请看一下。

# ruby - 厨师的 deploy_revision/before_symlink 什么时候运行？

> ID：11445113
> 
> 赞同：2
> 
> 时间：2012-07-12T04:42:22.243
> 
> 标签：ruby, deployment, chef-infra

我试图了解 before_symlink 的运行方式和时间，特别是在出现故障的情况下。拿这个块：

```
deploy_revision "foo" do
  action :deploy
  deploy_to "/opt/foo"
  ...
  symlink_before_migrate(app_symlinks.merge({
  ...     }))
  purge_before_symlink([])
  create_dirs_before_symlink([])
  symlinks({})
  before_symlink do
    current_release = release_path

    bash "foo_buildout_install" do
      user "foo"
      cwd current_release
      code <<-EOH
         ...
      EOH
    end
  end
  restart_command do
    current_release = release_path
    bash "foo_foreman_install_and_restart" do
        restart foo || start foo
      EOH
    end
  end
end 
```

before_symlink 块在什么条件下运行？例如，如果构建失败，则重新配置 chef - 它会再次运行吗？如果创建了符号链接怎么办，它会再次被调用吗？

（我还在学习 Chef，而且我不做 ruby​​ 开发，所以请不要假设我了解 deploy_revision 的工作原理或 rails 部署模型。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:16:51.647

我相信它会在您每次“部署”时运行，我相信每次您通过 Chef 提供时都会发生这种情况。

如果您想为自己进一步研究，请在您的 Ruby gems 路径中找到 Chef 安装并在里面查找`./lib/chef/provider/deploy.rb`

deploy 方法几乎可以解释自己：

```
 def deploy
    enforce_ownership
    verify_directories_exist
    update_cached_repo
    copy_cached_repo
    install_gems
    enforce_ownership
    callback(:before_migrate, @new_resource.before_migrate)
    migrate
    callback(:before_symlink, @new_resource.before_symlink)
    symlink
    callback(:before_restart, @new_resource.before_restart)
    restart
    callback(:after_restart, @new_resource.after_restart)
    cleanup!
    Chef::Log.info "#{@new_resource} deployed to #{@new_resource.deploy_to}"
  end 
```

# ruby-on-rails - 在 Rails 模型中调用 gravatar_for

> ID：11445115
> 
> 赞同：1
> 
> 时间：2012-07-12T04:42:36.843
> 
> 标签：ruby-on-rails, ruby, gravatar

我正在尝试从我的一个模型中调用 gravatar_for。（是的，我意识到这不是严格意义上的 MVC，但我有正当理由这样做，但我不打算这样做）。我正在尝试将 Gravatar 的助手包括在内，但我没有成功找到它们是什么。

到目前为止，像这样将它包含在我的课堂上是行不通的：

```
class AnnotationPostedActivity < NewsfeedActivity
  include GravatarHelper::PublicMethods 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T05:20:28.507

假设您使用[gravatar-plugin](https://github.com/woods/gravatar-plugin/)生成图像标签，有一些问题需要克服。请注意，该`gravatar_for`方法将用户对象作为其第一个参数。

混合`GravatarHelper::PublicMethods`到您的`AnnotationPostedActivity`类中，所有实例都可以访问该方法`gravatar_for(user, options={})`。所以你会说：

```
alice = User.new()

alice.respond_to?(:gravatar_for)
=> true

alice.gravatar_for
ArgumentError: wrong number of arguments (0 for 1)
# (you need to supply an argument - the method got zero but was expecting one)

alice.gravatar_for(alice)
=> "<img class=\"gravatar\" alt=\"\" width=\"50\" height=\"50\" src=\"http://www.gravatar.com/avatar/70375a32ad79987b9bc00cb20f7d1c95?rating=PG&amp;size=50\" />
 # (not what we want at all) 
```

你看，你必须提供`user`对象作为`gravatar_for`方法的第一个参数。所以你要做的是

## 1.使用另一个宝石

一个提供一个查看`self.email`而不是要求它作为方法参数的模块。

## 2.自己实现方法

[这很容易](http://en.gravatar.com/site/implement/hash/)。并且[已经有 ruby​​ 代码](https://github.com/woods/gravatar-plugin/blob/master/lib/gravatar.rb#L67-81)可以遵循。你*可能需要*`AnnotationPostedActivity`在你的模型中包含一些 Rails 的助手

```
>> gravatar_url 'github@deanandadie.net`
NoMethodError: undefined method `h' for main:Object ....

>> require 'active_support/core_ext/string/output_safety'
=> true

>> include ERB::Util
=> Object

>> gravatar_url 'github@deanandadie.net`
=> "http://www.gravatar.com/avatar/fbaf55d6c2618cafe0a759cfe85967e0?rating=PG&size=50" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:32:47.230

如果这是您尝试混入模型的辅助模块，那么这是一个信号，表明需要稍微移动一下。助手是真正的视图助手，只能从视图中调用。如果那里有对模型本身也有用的逻辑，则将其移至库中。例如：

```
# lib/gravatar_utils.rb
module GravatarUtils
  def gravatar_for(user)
    # ...
  end
end

# app/helpers/gravatar_helper.rb
class GravatarHelper
  include GravatarUtils

  def gravatar_image_tag(user)
    url = gravatar_for(user)
    # ...
  end
end

# app/models/annotation_posted_activity.rb
class AnnotationPostedActivity < NewsfeedActivity
  include GravatarUtils
end 
```

当然，使用[gravatar-ultimate之类的东西可能更容易](https://github.com/sinisterchipmunk/gravatar)

# android - Android 应用间关系

> ID：11445119
> 
> 赞同：2
> 
> 时间：2012-07-12T04:42:56.640
> 
> 标签：android, user-interface, emulation

虽然有一些与我相关的问题，但没有人能像我所寻找的那样回答它们。首先，是否有可能拥有一个“在另一个应用程序之上运行”的可下载 Android 应用程序，也就是说，它模拟预定义的用户输入并且没有传统的“gui”。例如，（假设）如果我有一个播放视频的应用程序，但设置为每 10 秒自动关闭一次屏幕，我希望每隔几秒发生一次 onTouch 事件以防止这种情况发生。没有什么复杂的，只是触摸，也许是几次滑动，以及随之而来的其他事件。

其次，如果这不是创建“没有界面，只有预定义脚本”的应用程序的有效方法，是否有任何其他方法可以将触摸事件“注入”非开源应用程序?

编辑：更具体地说，我正在考虑制作一个“快速”应用程序助手，这是一种程序，当它被激活时，会运行一组预定义的指令，以非常高的速度模拟用户输入，所以，想想一个执行某些活动（例如从对象 A 滑动到对象 B）并快速返回的应用程序。我也已经在研究不同 Android 设备上的速度阈值，以找到适用于所有设备的通用（最大）阈值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:00:38.450

你想要[android.app.Instrumentation](http://developer.android.com/reference/android/app/Instrumentation.html)类。这使您可以将各种事件发送到应用程序并监视结果。

要成功使用此类，您的应用必须具有 INJECT_EVENTS 权限，并且[必须使用系统签名密钥进行签名](https://stackoverflow.com/questions/3598662/how-to-compile-android-application-with-system-permissions)。这意味着您需要使用自己的自定义固件在根设备上工作。您将无法使用运营商提供的固件来执行此操作。

如果您的解决方案不需要是 .apk，那么您可以尝试使用[monkeyrunner](http://developer.android.com/tools/help/monkeyrunner_concepts.html)。这仅要求您能够使用 adb 连接到设备（即为设备启用 USB 调试）。

# c# - 当控件是数据绑定时，行不能以编程方式添加到 DataGridView 的行集合

> ID：11445121
> 
> 赞同：4
> 
> 时间：2012-07-12T04:43:01.910
> 
> 标签：c#, visual-studio-2008, datagridview

我有一个网格，当数据加载到网格中时；我只需选择一行并按编辑按钮。编辑时，打开新的子表单，并将行单元格的值传递给子表单上的控件。但是，当我更改子表单上的某些值并将它们保存以在网格中替换时，我遇到了错误：**当控件为数据绑定时，无法以编程方式将行添加到 DataGridView 的行集合中**。这个错误的原因是什么以及如何克服这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T05:16:18.547

原因是“当控件绑定数据时，无法以编程方式将行添加到 DataGridView 的行集合中”。它像结晶水一样清澈

**解决**方案？不要**将**行添加到 DataGridView 的行集合中，将它们添加到基础数据源集合（您要设置到 DataGridView 的 DataSource 属性中的集合）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:25:51.967

在. `DataSource`_ **不要直接添加/编辑到您的网格。**`DataGridView`

 **如果您`DataSource is DataSet`和您想添加新行

```
DataSet dsTempDataTable = (DataSet)MainApplication.dgvBooksDetails.DataSource;
DataTable dt = dsTempDataTable.Tables[0]; // use table index/name to get the exact table
DataRow dr = dt.NewRow();
//  code to fill record
dt.Rows.Add(dr); 
```

编辑

```
DataSet dsTempDataTable = (DataSet)MainApplication.dgvBooksDetails.DataSource;
DataTable dt = dsTempDataTable.Tables[0]; // use table index/name to get the exact table
dt.Rows[0]["columnName"] = "some value";
// your row edit  code
dt.AcceptChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T14:11:40.163

我有同样的问题，我找到了解决方案。

```
//create datatable and columns
DataTable dtable = new DataTable();
dtable.Columns.Add(new DataColumn("Column 1"));
dtable.Columns.Add(new DataColumn("Column 2"));

//simple way create object for rowvalues here i have given only 2 add as per your requirement
object[] RowValues = { "", "" };

//assign values into row object
RowValues[0] = "your value 1";
RowValues[1] = "your value 2";

//create new data row
DataRow dRow;
dRow = dtable.Rows.Add(RowValues);
dtable.AcceptChanges();

//now bind datatable to gridview... 
gridview.datasource=dtable;
gridview.databind(); 
```

资料来源： http: [//www.codeproject.com/Questions/615379/Adding-rows-to-datagridview-with-existing-columns](http://www.codeproject.com/Questions/615379/Adding-rows-to-datagridview-with-existing-columns)**

# python - 如何为python脚本编写makefile更新数据库？

> ID：11445122
> 
> 赞同：3
> 
> 时间：2012-07-12T04:43:06.963
> 
> 标签：python, sqlite, makefile

我有一堆 Python 脚本，我在管道中使用它们来读取文件，并转换数据以创建和填充 sqlite3 数据库。

我使用makefile来做到这一点；由于我的一些输入文件相当大，即 5GB，因此需要相当长的时间来处理，我不希望 makefile 在我只编辑一个文件时重新运行整个管道。

然而，因为它们都编辑同一个文件，即数据库文件，它们实际上都是假目标。有没有办法让它只重新运行已经编辑过文件的目标？

这是我正在使用的生成文件：

```
.PHONY: all
    all: blogs.db

    blogs.db: create users posts likes blogs blog_likes

    .PHONY: create
    create: create.py
        $(PYTHON) create.py

    .PHONY: users
    users:  users.py
        $(PYTHON) users.py

    .PHONY: posts
    posts:  posts.py
        $(PYTHON) posts.py

    .PHONY: likes
    likes:  likes.py
        $(PYTHON) likes.py

    .PHONY: blogs
    blogs:  blogs.py
        $(PYTHON) blogs.py

    .PHONY: blog_likes
    blog_likes: blog_likes.py
        $(PYTHON) blog_likes.py 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:09:26.727

如果目标是虚假的，那么每次有人依赖它们时，它们都会重建。正如@jdi 所说，让每个目标都是创建虚拟文件的真实目标，以表明它们已经构建。然后它们将在 .py 文件仅更改时重新运行。

```
blogs.db: create.dummy users.dummy posts.dummy likes.dummy blogs.dummy \
    blog_likes.dummy

create.dummy: create.py
    $(PYTHON) create.py
    touch create.dummy

etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:13:36.330

您不需要虚拟文件，只要这些脚本正在修改数据库：

```
SCRIPTS = create.py users.py posts.py likes.py blogs.py blog_likes.py

.PHONY: all
all: blogs.db

blogs.db: $(SCRIPTS)
    @for s in $?; do $(PYTHON) $$s; done 
```

# ruby-on-rails - 浮点乘法的Ruby奇怪问题

> ID：11445123
> 
> 赞同：5
> 
> 时间：2012-07-12T04:43:09.257
> 
> 标签：ruby-on-rails, ruby

有没有人在 ruby​​ 中有解决这个问题的方法：

假设我们有：a = 8.1999999

我们想将它四舍五入到小数点后 2 即 8.20，然后乘以 1,000,000 成为 8,200,000

我们这样做；

```
(a.round(2) * 1000000).to_i 
```

但是我们得到的是8199999，为什么？

奇怪的是，如果我们乘以 1000、100000 或 10000000，但不是 1000000，我们得到了正确的结果。有人知道为什么吗？

我们正在使用 ruby​​ 1.9.2 并尝试使用 1.9.3。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T05:06:10.193

每当您在计算中获得时髦的数字时，请使用 bigdecimal

```
require 'bigdecimal'
a = BigDecimal(8.1999999.to_s)
(a.round(2) * 1000000).to_i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T04:56:00.677

变成这样是因为 a.round(2) 返回一个浮点数，因此计算并不完美。

要获得正确的结果，请尝试以下操作： (10*a).round.to_i * 100000

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:20:59.767

您的初始四舍五入有效，从某种意义上说*是*¹。问题是 8.2 没有精确的内部表示。如果你只是输入`8.2`irb 或显示`#round(2)`方法调用的结果，*看起来*你有 8.2 但你没有。实际上存储了一个略小于 8.2 的数字。

您最终会被输出舍入逻辑的默认值打败。一旦内部略小于 8.2 位被倍增，错误就会转移到数字的整数部分，除非您要求，否则这部分不会被四舍五入。你可以这样做：`(a * 1000000).round`

问题是我们用十进制写数字，但用二进制存储它们。这适用于整数；但它对分数效果不佳。

事实上，我们写的*大多数*小数部分都不能精确表示。

^(每个机器分数都是 x/2 n)形式的有理数。^(现在，常数是十进制的，每个十进制常数都是 x/(2 n) * 5 ^m )形式的有理数。5 ^m的数字是奇数，因此它们中的任何一个都没有 2 ^n因数。只有当*m == 0*时，分数的二进制和十进制扩展才有有限表示。所以，1.25 是准确的，因为它是 5 / (2 ² * 5 ⁰ )，但 0.1 不是因为它是 1 / (2 ⁰ * 5 ¹ )。事实上，在 1.01 .. 1.99 系列中，只有 3 个数字可以精确表示：1.25、1.50 和 1.75。

因为 8.2 没有精确的表示，所以它永远以二进制重复，永远不会完全加起来正好是 8.2。它继续无穷大，为 1100110011 ......

* * *

^(1\. 但请注意，您可能想要`a.round(1)`而不是 2。参数 to`#round`是您想要的*小数*位数，而不是*有效*位数。在这种情况下，结果是一样的，没关系。)

# c# - 禁用组合框中的特定项目

> ID：11445125
> 
> 赞同：20
> 
> 时间：2012-07-12T04:44:00.633
> 
> 标签：c#, winforms, combobox

我有一个 WinForms 应用程序，我想知道是否有一种更优雅的方式来禁用组合框项，而无需更改所有禁用值的 SelectedIndex 属性 -1。

我一直在谷歌搜索，很多解决方案都涉及 ASP.Net DropDownLists，但这个[LINK](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.drawmode%28VS.80%29.aspx)看起来很有希望。我想我可能必须构建自己的 ComboBox 控件，但在我重新发明轮子之前，我想我会在这里问是否可能。

# **更新**

这是最终的解决方案，感谢 Arif Eqbal：

```
//Add a Combobox to a form and name it comboBox1
//
    using System;
    using System.Drawing;
    using System.Windows.Forms;

    namespace WindowsFormsApplication6
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
                this.comboBox1.DrawMode = DrawMode.OwnerDrawFixed;
                this.comboBox1.DrawItem += new System.Windows.Forms.DrawItemEventHandler(this.comboBox1_DrawItem);
                this.comboBox1.SelectedIndexChanged += new System.EventHandler(this.comboBox1_SelectedIndexChanged);
            }

            private void Form1_Load(object sender, EventArgs e)
            {
                this.comboBox1.Items.Add("Test1");
                this.comboBox1.Items.Add("Test2");
                this.comboBox1.Items.Add("Test3");
                this.comboBox1.Items.Add("Test4");
                this.comboBox1.Items.Add("Test5");
                this.comboBox1.Items.Add("Test6");
                this.comboBox1.Items.Add("Test7");
            }

            Font myFont = new Font("Aerial", 10, FontStyle.Underline|FontStyle.Regular);
            Font myFont2 = new Font("Aerial", 10, FontStyle.Italic|FontStyle.Strikeout);

            private void comboBox1_DrawItem(object sender, DrawItemEventArgs e)
            {
                if (e.Index == 1 || e.Index == 4 || e.Index == 5)//We are disabling item based on Index, you can have your logic here
                {
                    e.Graphics.DrawString(comboBox1.Items[e.Index].ToString(), myFont2, Brushes.LightSlateGray, e.Bounds);
                }
                else
                {
                    e.DrawBackground();
                    e.Graphics.DrawString(comboBox1.Items[e.Index].ToString(), myFont, Brushes.Black, e.Bounds);
                    e.DrawFocusRectangle();
                }
            }

            void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
            {
                if (comboBox1.SelectedIndex == 1 || comboBox1.SelectedIndex == 4 || comboBox1.SelectedIndex == 5)
                    comboBox1.SelectedIndex = -1;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-12T06:39:56.310

试试这个......它是否符合您的目的：

我假设您有一个名为的组合框`ComboBox1`，并且您想要禁用第二个项目，即索引为 1 的项目。

设置`DrawMode`组合框的属性，`OwnerDrawFixed`然后处理这两个事件，如下所示：

```
Font myFont = new Font("Aerial", 10, FontStyle.Regular);

private void comboBox1_DrawItem(object sender, DrawItemEventArgs e)
{        
    if (e.Index == 1) //We are disabling item based on Index, you can have your logic here
    {
        e.Graphics.DrawString(comboBox1.Items[e.Index].ToString(), myFont, Brushes.LightGray, e.Bounds);
    }
    else
    {
        e.DrawBackground();
        e.Graphics.DrawString(comboBox1.Items[e.Index].ToString(), myFont, Brushes.Black, e.Bounds);
        e.DrawFocusRectangle();
    }
} 

void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox1.SelectedIndex == 1)
        comboBox1.SelectedIndex = -1;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-05T02:05:01.963

这是我 100% 基于 Arif Eqbal 的答案。改进如下：

*   重用`Font`ComboBox 中的而不是创建新的（这样，如果您在设计器中更改它，则不必更新代码）
*   重用默认值`SystemBrushes`（因此它应该与您的主题匹配；但如果您手动更改 ComboBox 中使用的颜色，它将不起作用）
*   对于禁用的项目，我必须重绘背景，否则每次重绘灰色项目时，它们的颜色会越来越接近黑色
*   创建专用`IsItemDisabled`方法以避免复制/粘贴

* * *

```
// Don't forget to change DrawMode, else the DrawItem event won't be called.
// this.comboBox1.DrawMode = System.Windows.Forms.DrawMode.OwnerDrawFixed;

private void comboBox1_DrawItem(object sender, DrawItemEventArgs e)
{
    ComboBox comboBox = (ComboBox)sender;

    if (IsItemDisabled(e.Index))
    {
        // NOTE we must draw the background or else each time we hover over the text it will be redrawn and its color will get darker and darker.
        e.Graphics.FillRectangle(SystemBrushes.Window, e.Bounds);
        e.Graphics.DrawString(comboBox.Items[e.Index].ToString(), comboBox.Font, SystemBrushes.GrayText, e.Bounds);
    }
    else
    {
        e.DrawBackground();

        // Using winwaed's advice for selected items:
        // Set the brush according to whether the item is selected or not
        Brush brush = ( (e.State & DrawItemState.Selected) > 0) ? SystemBrushes.HighlightText : SystemBrushes.ControlText;
        e.Graphics.DrawString(comboBox.Items[e.Index].ToString(), comboBox.Font, brush, e.Bounds);

        e.DrawFocusRectangle();
    }
}

void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (IsItemDisabled(comboBox1.SelectedIndex))
        comboBox1.SelectedIndex = -1;
}

bool IsItemDisabled(int index)
{
    // We are disabling item based on Index, you can have your logic here
    return index % 2 == 1;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-11T20:29:36.537

这是进一步的修改。上述解决方案的问题是所选项目不可见，因为字体前景和背景选择都是黑暗的。因此字体应根据 的值设置`e.State`：

```
 private void comboBox1_DrawItem(object sender, DrawItemEventArgs e)
    {
        ComboBox comboBox = (ComboBox)sender;
        if (e.Index >= 0)
        {
            if (IsItemDisabled(e.Index))
            {
                e.Graphics.FillRectangle(SystemBrushes.Window, e.Bounds);
                e.Graphics.DrawString(comboBox.Items[e.Index].ToString(), comboBox.Font, Brushes.LightSlateGray, e.Bounds);
            }
            else
            {
                e.DrawBackground();

                // Set the brush according to whether the item is selected or not
                Brush br = ( (e.State & DrawItemState.Selected) > 0) ? SystemBrushes.HighlightText : SystemBrushes.ControlText;

                e.Graphics.DrawString(comboBox.Items[e.Index].ToString(), comboBox.Font, br, e.Bounds);
                e.DrawFocusRectangle();
            }
        }
    } 
```

# c - 无法从 C 中的文本文件中提取值

> ID：11445133
> 
> 赞同：1
> 
> 时间：2012-07-12T04:45:55.170
> 
> 标签：c, file, fgets, scanf

我有一个大约 2000 行文本的文本文件，其格式如下：

> 1 1 Name1 LastN1 58 c 1600 1310.40 6 1 0.22 2164.80 1
> 2 1 Name2 LastN2 22 d 1700 1523.37 4 1 0.13 897.26 1 3 1 Name3 LastN3
> 34 c 1600 1195.83616 1 1 0.26 8 . 2000 3 NameX LastNX 46 d 6000 6000.00 1 0 0.00 0.00 1

我想要做的是从文本文件中读取所有这些值并将它们存储到数组中：

```
int id          [2100];
char nombre [2100][30];
char apellido   [2100][30];
int edad        [2100];
int puesto      [2100];     char categoria  [2100];
int sueldoI     [2100];
float sueldoA   [2100];
int antiguedad  [2100];
int inscrito    [2100];
float aporte    [2100];
float ahorro    [2100]; 
int libre       [2100]; 
```

但是当我试图阅读它们时，我会在控制台中收到很多垃圾

这些是我用来尝试读取并将它们存储到数组中的方法：

```
//Way number 1
char linea[70];
while(fgets(linea,70,datos) != NULL){   
    flushall();
    sscanf(linea,"%d %d %s %s %d %c %d %f %d %d %f %f %d\n",&id[i],&puesto[i],&nombre[i],&apellido[i],&edad[i],&categoria[i],&sueldoI[i],&sueldoA[i],&antiguedad[i],&inscrito[i],&aporte[i],&ahorro[i],&libre[i]);      
    i++;
}

// Way number 2 in here i get linea the way it's intended to be but i can't figure
// out a way to split the string into the multiple values i need to store in the arrays

while(fgets(linea,70,datos) != NULL){
    printf("%s",linea);
} 
```

这是我以第一种方式得到的输出：

![方式#1输出](../Images/6e38486aa12dd622ca5ba1dc443dad03.png)

**编辑：**

我已将数组的大小从 2100 修改为 2000，并且程序似乎表现得更好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T04:58:00.530

`&nombre[i]`从, 和中删除地址运算符`&apellido[i]`，它们是数组，您可以只使用没有地址的数组名称来获取第一个元素的地址：

```
sscanf(/*....*/, nombre[i], apellido[i], /*....*/); 
```

此外，对于字符串，您应该为 scanf 指定预期的字符串长度（数组的大小 - 1）：

```
sscanf(linea, "... %29s %29s ....", /*....*/, nombre[i], apellido[i], /*....*/); 
```

你可能会误用`i`：

```
int main() {
  char linea[70];
  FILE *datos = fopen("datos", "r");
  int i= 0;
  while(fgets(linea,70,datos) != NULL){   
    sscanf(linea,"%d %d %29s %29s %d %c %d %f %d %d %f %f %d\n", &id[i], &puesto[i], 
        nombre[i], apellido[i],&edad[i],&categoria[i],&sueldoI[i],
        &sueldoA[i],&antiguedad[i],&inscrito[i],&aporte[i],&ahorro[i],   
        &libre[i]); 
    i++;
  } 

  i--;

  for (; i >= 0; i--) {
    printf("%d %s\n", id[i], nombre[i]);
  }

  return 0;
} 
```

# translation - 在 gettext 中使用预先存在的/系统翻译？

> ID：11445134
> 
> 赞同：0
> 
> 时间：2012-07-12T04:46:06.860
> 
> 标签：translation, gettext

我正在编写一个小程序（javascript，但我认为这并不重要）并且正在尝试为其添加翻译。

其中唯一需要翻译的字符串是“Minimize”、“Maximize”、“Restore”、“Close”等——这些应该已经在某处进行了翻译，对吧？因为当我右键单击窗口的系统标题栏时，我会得到一个带有这些相同选项的菜单（我使用的是 Linux）。

有什么方法可以让我使用这些已经完成的翻译，而不必再次进行翻译（这涉及到我找到一大群愿意自愿提供一些时间进行翻译的翻译）？

是否只是找到正确的 gettext 域的问题？这就是我目前的设置方式（它在javascript中，但这与问题无关）：

```
const Gettext = imports.gettext.domain('foobar-gettext-domain');               
const _ = Gettext.gettext; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:02:53.027

好的，进一步思考，我意识到我知道如何在 gettext 中使用预先存在的翻译。要使用预先存在的文本域`asdf`，只需执行

```
const Gettext = imports.gettext.domain('asdf');
const _ = Gettext.gettext; 
```

那里没有惊喜。

事实证明，我的*实际*问题是我想使用“最小化”、“最大化”、“恢复”、“关闭”等翻译，虽然我确信这些翻译已经存在于我的系统某处，但我没有不知道他们实际上在哪个*gettext 域中。*

要找出答案：

在 Fedora（无论如何是我的版本）上，翻译文本位于`/usr/share/locale`.

我进去了`/usr/share/locale/en_GB/LC_MESSAGES`，那里有一堆`.mo`文件。这些不是人类可读的，但我仍然可以通过它们 grep：

```
[foo@bar]$ grep -i maximize *.mo
Binary file devhelp.mo matches
Binary file evolution-3.2.mo matches
Binary file f-spot.mo matches
Binary file gnome-games.mo matches
Binary file gnome-media-2.0.mo matches
Binary file gnome-utils-2.0.mo matches
Binary file metacity.mo matches
Binary file mutter.mo matches
Binary file nautilus.mo matches 
```

浏览列表时，我突然想到，因为我正在寻找窗口菜单上项目的翻译，所以可能是我的窗口管理器拥有这些翻译。我的窗口管理器（因为我在 gnome-shell 上）`mutter`是基于`metacity`.

所以，我下载了 mutter 源并查看了`po`文件（人类可读的翻译文件），你瞧！

```
#: ../src/ui/menu.c:69
msgid "Mi_nimize"                                                               
msgstr "Mi_nimise"                                                              

#: ../src/ui/menu.c:71                                                          
msgid "Ma_ximize"                                                               
msgstr "Ma_ximise"                                                              

#: ../src/ui/menu.c:73                                                          
msgid "Unma_ximize"                                                             
msgstr "Unma_ximise"                                                            

...and so on (the underscores are the keyboard accelerators for that menu item). 
```

所以现在我已经找到了翻译，这只是一个例子（在我的代码中）：

```
 const Gettext = imports.gettext.domain('mutter')
    const _ = Gettext.gettext;

    log(_("Ma_ximize")); // to translate 'Ma_ximize' 
```

（我必须输入`_("Ma_ximize")`gettext ，因为这是`mutter.mo`文件中翻译的确切字符串——没有下划线就没有`"Maximize"`翻译。之后我不得不从翻译的文本中删除下划线，这可能会搞砸使用下划线的语言作为他们写作的一部分，但我希望这不是很多）。

所以，总而言之——使用另一个（预先存在的）文本域很容易，但问题是找到具有您想要的字符串的文本域。

# c++ - 远程桌面服务

> ID：11445136
> 
> 赞同：1
> 
> 时间：2012-07-12T04:46:18.960
> 
> 标签：c++, remote-desktop, api-hook

我正在尝试获取远程桌面IP地址，为此我正在挂钩API WTSQuerysessionInformation。但是此功能没有挂钩，请任何人帮助我。我的代码如下。检查任何参数不匹配并建议我有什么做。

```
#include "stdafx.h"
#include "MinHook.h"
#include <Wtsapi32.h>

#if defined _M_X64
#pragma comment(lib, "libMinHook.x64.lib")
#elif defined _M_IX86
#pragma comment(lib, "libMinHook.x86.lib")
#endif

typedef BOOL(WINAPI *WTSQuerySessionInformationWNext)(IN HANDLE hServer,
             IN DWORD SessionId, IN WTS_INFO_CLASS WTSInfoClass, __deref_out_bcount(*pBytesReturned) LPWSTR * ppBuffer, __out DWORD * pBytesReturned);

WTSQuerySessionInformationWNext Real_WTSQuerySessionInformationW = NULL;

BOOL WINAPI WTSQuerySessionInformationWCallback(IN HANDLE hServer,IN DWORD SessionId,  IN WTS_INFO_CLASS WTSInfoClass, __deref_out_bcount(*pBytesReturned) LPWSTR * ppBuffer, __out DWORD * pBytesReturned)
{

BOOL ret =  Real_WTSQuerySessionInformationW(hServer, SessionId, WTSInfoClass,  ppBuffer, pBytesReturned);
if(ret != NULL)
{
    MessageBoxA(NULL, "WTSQuerySessionInformationW Called", "Info", MB_OK);
    return ret;
}
else
{
    MessageBoxA(NULL, "WTSQuerySessionInformationW fails", "Info", MB_OK);
    return ret;
}
}

BOOL APIENTRY DllMain(HMODULE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved)
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
                        if (MH_Initialize() != MH_OK)
                        {
                            MessageBoxW(NULL, L"Failed Initialize", L"Info!", MB_ICONWARNING|MB_OK);    
                        }   
                        if (MH_CreateHook(&WTSQuerySessionInformationW, &WTSQuerySessionInformationWCallback, reinterpret_cast<void**>(&Real_WTSQuerySessionInformationW)) != MH_OK)
                        {
                            MessageBoxW(NULL, L"Failed CreateHook WTSQuerySessionInformationW", L"Info!",MB_ICONWARNING|MB_OK);
                        }
                        if (MH_EnableHook(&WTSQuerySessionInformationW) != MH_OK)
                        {
                            MessageBoxW(NULL, L"Failed EnableHook WTSQuerySessionInformationW", L"Info!",MB_ICONWARNING|MB_OK);
                        }

                        break;
case DLL_PROCESS_DETACH:
                        if (MH_Uninitialize() != MH_OK)
                        {               
                        }
                        if(MH_DisableHook(&ProcessIdToSessionId) != MH_OK)
                        {
                        }
                        break;
                    }
                    return TRUE;
} 
```

# macos - “TypeError - Property not Function” - Chrome 上的 Firebreath 插件

> ID：11445141
> 
> 赞同：1
> 
> 时间：2012-07-12T04:46:54.163
> 
> 标签：macos, google-chrome-extension, osx-lion, firebreath

这是 Chrome background.html 中的 JavaScript 代码。

```
var plugin = document.getElementById("reverbPlugin");
if (!plugin.startBackgroundThread()) {
        console.log("Failed to start background thread: " + plugin.getErrorMessage());
        return;
} 
```

这是它的 HTML 部分。

```
<embed type="application/x-reverbbrowserplugin" id="reverbPlugin"></embed> 
```

我在 JavaScript 代码上遇到的例外是`TypeError - property_not_function`.

我的库（`BrowserPlugin.plugin`编译 Firebreath 项目后创建的文件）是 Mac OS X Lion 上 x86_64 架构的非胖二进制文件。

关于为什么 JavaScript 找不到该函数的任何想法？我错过了一些明显的东西吗？（让我知道需要更多信息）。

谢谢！

PS。对于使用 JS-Ctypes的 Firefox 插件，我遇到了[类似的问题，但已解决。](https://stackoverflow.com/questions/11442509/couldnt-find-function-symbol-in-library-js-ctypes)我在这个上尝试了类似的方法并尝试了不同的函数名称。没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:11:58.283

我意识到您需要在 JSAPI 对象中为该方法名称调用 registerMethod 。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:41:38.613

除非最近有所改变，否则 Chrome 不支持 64 位插件。尝试构建它 i386

接下来，我建议使用对象标签而不是嵌入标签。

如果它仍然说没有这样的方法，你可能忘记在你的 JSAPI 对象的构造函数中调用 registerMethod 了。

（更新以包括以下评论中的项目）

# python - 服务器上的 Django 访问文件

> ID：11445143
> 
> 赞同：1
> 
> 时间：2012-07-12T04:47:02.677
> 
> 标签：python, ios, django, apple-push-notifications

我正在使用 Django 发送 iOS 推送通知。为此，我需要访问当前存储在我的应用程序目录中的服务器上的 .pem 证书文件以及 views.py、models.py、admin.py 等。当我尝试从 python shell 发送推送通知时在服务器上，一切正常。但是当我尝试通过访问 Django 视图发送推送通知时，它不会发送并给我一个 SSLError。我认为这是因为 Django 找不到 .pem 证书文件。

简而言之，我想知道 Django 视图函数如何读取服务器上的另一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:16:36.330

没关系，我使用绝对文件路径再次尝试了它，并且在我重新启动 Django 后它工作了。

# javascript - 执行 onkeydown 时捕获之前的值

> ID：11445150
> 
> 赞同：1
> 
> 时间：2012-07-12T04:47:27.357
> 
> 标签：javascript

在事件处理方面需要帮助。在我的场景中，我有一个默认值为 35 的文本框，光标设置在 3 之前。此文本框有一个事件，即 onkeydown。当我按 4 时，IE 和 Safari 会捕获文本的先前值 35。但 Mozilla 和 Chrome 会捕获新值 435。

我需要可以在 onkeydown 被触发时捕获文本框先前值的 javascript 代码。

需要你的双手:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:36:00.370

已在 IE、Chrome、FF、Opera 中测试并且可以正常工作

```
<div>
    <input type="text" value="35" />
</div>
<script>
       $("input").keydown(function () {
            alert($(this).val());
        });
</script> 
```

# php - 电子邮件地址存储到数据库时有应用程序+乱码

> ID：11445151
> 
> 赞同：0
> 
> 时间：2012-07-12T04:47:30.623
> 
> 标签：php, facebook, codeigniter

今天检查我的数据库时，我注意到一些记录在电子邮件字段中的格式像这样

```
app+9276ti5j64.ir10bj.618106aa6d78af59ff4c7f79f1bf 
```

我注意到这些记录都来自 Facebook Connect，尽管这只是其他成功的 Facebook Connect 的一小部分。电子邮件记录来自

```
$me = $this->facebook->api('/me');
$email = $me['email'] 
```

如果它无法从 Facebook 获取，为什么电子邮件包含这个乱码字符串而不是 NULL 或空？（尽管由于某些原因，fb_uid 和其他字段可以正常通过）

有没有人遇到过同样的问题？是 Facebook Connect 错误吗？是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:41:04.860

这是特殊的代理 facebook 电子邮件。

在 FB 将连接窗口更改为我们现在的方式之前 - 可以选择是否将真实电子邮件或代理电子邮件发回给您。

如果您有更长的字段长度 - 您会看到整个代理电子邮件，虽然看起来很难看，但它仍然是完美的电子邮件，并且只会将电子邮件代理到真实的用户电子邮件（您不知道）。

现在做什么：

1.  扩大电子邮件字段长度。有效长度最多约为 255 个字符
2.  以某种方式处理那些垃圾邮件。可能 - 从该用户重新请求它
3.  随意使用相同的代码 - 现在它总是会返回真实用户的电子邮件

# c++ - 这个 C++ 代码有什么缺陷？

> ID：11445156
> 
> 赞同：0
> 
> 时间：2012-07-12T04:47:57.960
> 
> 标签：c++

（我是 C++ 的初学者。但我熟悉其他一些编程语言，特别是 Java。）

谁能帮我找出这个 C++ 代码中的缺陷？

```
string & getFullName(string name, bool male){
    string fullName = name;
    if (male) {
        fullName = string(” Mr. ”) + fullName;
        return fullName;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T04:52:11.933

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T04:49:56.120

您正在返回对局部变量的引用。理想情况下，这意味着一旦函数 getFullName 返回，fullName 就会消失，并且如果您尝试为其分配类似

```
string myName = getFullName("Adam",true); 
```

`myName`会是垃圾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:52:07.207

不要返回对本地的引用并删除单个左卷曲：

```
void makeFullName(string &name, bool male){
    if (male) /* remove the curly */
        name = string(“Mr. ”) + name;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T04:56:01.283

The scope of the **fullname** is limited to this function only, hence once this function ends or goes out of scope, **fullname** is removed from the stack. Therefore when you return the reference of **fullname**, you return the address of flushed up memory hence you will get garbage value. The other problem is when the condition of **male** is false, you are not returning anything.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T04:58:10.730

你可能想要更像这样的东西：

```
std::string getFullName(string const &name, bool male) { 
    std::string ret = "Mr. ";
    if (male)
        return ret+name;
    return name;
} 
```

如果您选择，另一种可能性也可以更轻松地为女性姓名添加标题：

```
std::string getFullName(string const &name, bool male) { 
    static const std::string titles[] = {std::string(""), std::string("Mr. ")};

    return titles[male] + name;
} 
```

如果您确实想要在女性姓名中添加标题，只需将其插入上面的空字符串即可。

# iis-express - IIS Express 块 VS 2010SP1 构建

> ID：11445157
> 
> 赞同：1
> 
> 时间：2012-07-12T04:48:06.577
> 
> 标签：iis-express, visual-studio-2010

经过几个构建/调试周期后，IIS Express（7.5 和 8.0RC）开始阻止 VS 2010SP1 中项目的构建。

构建将无限期挂起，直到我终止 IIS Express。

是否有解决此问题的方法/解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:18:53.083

我最终添加了一个预构建事件来杀死 IIS Express（如果它正在运行）。

> taskkill /FI "IMAGENAME eq iisexpress.exe"

**更新**

此解决方案有帮助，但并不完美。有时构建会失败，并显示无法终止 IIS Express 进程的错误消息。仍然希望有更好的解决方案...

# iphone - 如何将CGContextAddArc（CGContextRef）中的所有点存储到NSMUtableArray

> ID：11445159
> 
> 赞同：6
> 
> 时间：2012-07-12T04:48:15.197
> 
> 标签：iphone, nsmutablearray, quartz-graphics, drawrect, cgcontextref

如何将 CGContextAddArc 中的所有像素点存储到 NSMutableArray.or CGContextRef 到 NSMutable Array

```
static inline float radians(double degrees) 
{
 return degrees * PI / 180;
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGRect parentViewBounds = self.bounds;
    CGFloat x = CGRectGetWidth(parentViewBounds)/2;
    CGFloat y = CGRectGetHeight(parentViewBounds)/2;
    UIColor *rbg=[UIColor redColor];
    CGContextSetFillColor(context, CGColorGetComponents( [rbg CGColor]));
    CGContextMoveToPoint(context, x, y); 
    CGContextAddArc(context, x, y,100,radians(35),radians(105),0); 
        CGContextClosePath(context); 
        CGContextFillPath(context);
// here I want to store All points Containing in the Arc to NSMutableArray

 NSMutableArray *pointsArray=????
        } 
```

图片![在此处输入图像描述](../Images/431ffb6b6b0c156871c4b0ab038c5b75.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:05:54.207

存储或当您想在 NSValue 中的 CGPoint 数组中添加点时，

```
NSValue *point = [NSValue valueWithCGPoint:CGPointMake(your_X, your_Y)];
[pointsArray addObject:point]; 
```

现在在检索时，您将如何从数组中的 NSVaule stroe 读取 CGPoint，

```
NSValue *getPoint = [pointsArray objectAtIndex:i];
CGPoint thePoint = [getPoint CGPointValue]; 
```

thePoint 将是您的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:42:41.417

Musthafa，你有几个不同的问题。

第一点是您可能以错误的方式进行此操作。要检查用户是否单击了弧线，您最好使用弧线 (CGPathAddArc) 创建路径，然后使用 CGPathContainsPoint。

接下来，您要确保弧线是您真正想要的，这看起来不像饼图，弧线是饼图外侧的部分，而 close 将连接其末端，对于饼图形状，您需要在中心之间移动。

如果您试图获取闭合弧中的点，我能想到的唯一方法是创建一个 CGBitmapContext，然后渲染到 CGContext 的路径，然后渲染 CGBitmapContextGetData 以获取支持数据。然后，您可以遍历它以获取设置点并将它们添加到您的 NSMutableArray，如 iHungry 建议的那样。

我可能还会质疑为什么要将它们粘贴在可变数组中，因为如果您要遍历它们以进行触摸测试，它可能会变得很慢，最好将它们留在位图中:)

# javascript - Sencha Architect - 使用表单创建屏幕

> ID：11445163
> 
> 赞同：0
> 
> 时间：2012-07-12T04:49:00.677
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2, sencha-architect

刚开始看煎茶触摸

谁能解释一下您将在哪里使用“FieldSet、FormPanel 和容器”

例如：带有标题、文本字段和提交按钮的表单？

登录屏幕...

```
Title: Login
TextField: username
PasswordField: password
Button: submit 
```

1) 这个登录屏幕会在容器、字段集和/或表单面板中吗？

2）没有标题的表格怎么办？只是文本字段、按钮，还是只是带有标题、数据列表的屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:43:42.217

我认为示例代码会对您有所帮助：

```
Ext.define('MyApp.view.LoginSiteContainer', {
extend: 'Ext.form.Panel',
alias: 'widget.loginsitecontainer',

config: {
    id: 'loginform',
    url: 'som_url',
    items: [            
        {
            xtype: 'container',
            layout: {
                type: 'vbox'
            },
            items: [
                {
                    xtype: 'fieldset',
                    instructions: 'Login using existing account. Password is case sensitive.',
                    title: 'Login details',
                    items: [
                        {
                            xtype: 'textfield',
                            id: 'login',
                            itemId: 'login',
                            label: 'Login'
                        },
                        {
                            xtype: 'passwordfield',
                            id: 'password',
                            itemId: 'password',
                            label: 'Password'
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    layout: {
                        type: 'hbox'
                    },
                    items: [
                        {
                            xtype: 'button',
                            id: 'Login',
                            itemId: 'Login',
                            margin: '0.1em',
                            ui: 'confirm',
                            text: 'Login',
                            flex: 1
                        }
                    ]
                }
            ]
        }
    ],
    listeners: [            
        {
            fn: 'onLoginTap',
            event: 'tap',
            delegate: '#Login'
        }
    ]
},

onLoginTap: function(button, e, options) {
// login function here
} 
```

});

# android - 我在 A 类中调用一个方法，并且从类中调用它。但是如果我在 BI 类中调用相同的方法会出错

> ID：11445164
> 
> 赞同：-4
> 
> 时间：2012-07-12T04:49:46.190
> 
> 标签：android

> 这是方法

```
public String testFile(int numofpunches, String filename,  int picture, int cancelpix){
    String string="";
    Boolean a;
    FILENAME = filename;
    try {
        FileInputStream fis = openFileInput(filename);
        try{
            int counter = fis.read( mIds, 0,numofpunches);
            fis.close();
            int i=0;
            while( i <counter ){
                if(mIds[i] == 'c'){
                    mThumbIds[i++] = picture; //R.drawable.crab;
                    string=string.concat("c");

                }else{

                    mThumbIds[i] = cancelpix; 
                    string=string.concat("x");

                    ImageView punchit =  (ImageView) 
findViewById(mypunches[i++]);

punchit.setImageResource(R.drawable.punchboxcancelled);

                }
            }
            String testfordone = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
            a= string.equals(testfordone.substring(0,numofpunches));
            if(a){
                return "done";
            }
        }catch (IOException e){

        }
    }catch (FileNotFoundException e) {

        try {//initialize
            String FILENAME = filename;
            FileOutputStream fos =  openFileOutput(FILENAME, 
            Context.MODE_PRIVATE);
            string  = "cccccccccccccccccccccccccccccccccccccc";
            string.substring(0,numofpunches);

            try {
                fos.write(string.getBytes());
                fos.close();

                int counter = 0;
                while(counter < numofpunches ){

                    mThumbIds[counter++] =  picture; 

                }
            }catch(IOException err){

            }

        }catch(FileNotFoundException error){

        };

    } 
```

> 我从该方法所在的同一个类 (A) 中调用它。现在我用同样的方法创建了一个新类（PunchActivities）。在 A 中导入类 PunchActivities 调用方法为

```
PunchActivities pa = new PunchActivities();
String result = pa.testFile(all the required parameters); 
```

> 在运行时程序到达

```
FileInputStream fis = openFileInput(filename); in PunchActivities 
```

> 但随后它返回到 A 类并出现 NullPointer 错误。为什么？？？？？有人知道安卓的规则吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:06:12.220

我认为问题出在这一行：

```
 punchit.setImageResource(R.drawable.punchboxcancelled); 
```

因为在这个类中，您没有设置与早期类中相同的 xml（在 onCreate() 中的 setContentView() 方法中）。所以这个视图在这里找不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:57:23.817

我发现我需要将路径传递给文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:06:28.193

将 Context 作为函数中的参数传递并使用`context.openFileInput(fileName)`. 对于`openFileOutput(fileName)`.

我希望它会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T05:12:08.103

最好使用以下内容而不是“FileInputStream fis = openFileInput(filename); in PunchActivities”

尝试这个

```
FileInputStream fis =new FileInputStream(filename); 
```

# ios - iOS Storyboard - 实践经验回复：多个开发人员？

> ID：11445169
> 
> 赞同：6
> 
> 时间：2012-07-12T04:50:55.987
> 
> 标签：ios, uikit, uistoryboard, uistoryboardsegue

故事板似乎是处理 iOS 中多个视图控制器以及它们之间的转换的一种优雅方式。

但是，到目前为止，我一直避免使用它们，因为担心多个开发人员对同一故事板文件中的视图控制器进行更改时会发生什么，以及可能导致的**合并冲突**。

在中等复杂度的生产应用程序中，有没有人有很多实践经验？

你的评估是什么——在这方面，故事板准备好迎接“黄金时间”了吗？还是更适合单个开发人员或小型开发团队？

（还有一些变通方法，比如“分片”到多个故事板文件中？）

意见？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T06:52:21.323

**一点背景：**

我的五人团队，四名开发人员和 QA，刚刚完成了一个相当大的项目（超过 50k 行代码），该项目使用了大量的 Storyboard。我们至少有 10 个不同的故事板，其中许多在导航结构中深入 5 或 6 层。

此外，我们严重依赖通过 Perforce 进行的版本控制，每天有几十个签入。

**我的经历：**

我从来没有想过用我们的任何故事板来处理解决方案。版本控制对它们的处理非常好，主要有两个原因。首先，如果您打开一个，您会看到它是结构良好的 XML，它与版本控制配合得非常好。其次，对于故事板，您*总是*希望在添加任何细节或代码之前布局整个 UI 结构（这就是重点）。这非常适合团队编码解决方案，因为每个成员都可以获取一个单独的 ViewController 并实现它，与团队的其他工作保持隔离。

但是，我建议您进行一些“分片”，因为您可以轻松获得一个巨大的老鼠巢状连接。

**最后：**

如果你在网上浏览一下，你会发现很多对 Storyboard 的负面反应，因为将数据从一个视图传递到另一个视图会变得“混乱”。但是，如果您让自己陷入这种情况，那么您已经违反了 MVC 的基本原则。您不应该使用您的视图来存储和管理数据。起初它很诱人而且很容易，但随着您的项目超出基础，最终会给您带来麻烦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T02:29:20.047

合并冲突仍然是 Apple 尚未解决的大问题（包括在 Xcode 4.6 中）。有时，仅查看情节提要内容会导致其被修改。修改似乎是 nib 的无害内部工作，但如果 2 个人查看故事板而不进行修改，保存文件，然后提交，您可能会看到您不了解如何合并的冲突。不久前我提交了一个错误，它被标记为已知问题的重复。

另请参阅支持这一点的这些问题：

[故事板和 SVN 冲突](https://stackoverflow.com/questions/11538510/storyboards-and-svn-conflicts)

[http://robsprogramknowledge.blogspot.com/2012/01/uistoryboard-best-practices.html](http://robsprogramknowledge.blogspot.com/2012/01/uistoryboard-best-practices.html)

[Xcode 更改未修改的故事板和 XIB 文件](https://stackoverflow.com/questions/13233181/xcode-changes-unmodified-storyboard-and-xib-files/13475320#13475320)

# javascript - jQuery 类事件处理程序 - 如何禁用类中的一个元素

> ID：11445172
> 
> 赞同：1
> 
> 时间：2012-07-12T04:51:49.800
> 
> 标签：javascript, jquery, class, event-handling, stoppropagation

我有一个附加到一个类的事件处理程序，如下所示：

```
$('#container').on('click', '.myClass', function (e) {... 
```

在此处理程序中，我想将不同的单击处理程序附加到已单击的元素。单击临时处理程序后，我想重新启用原始处理程序。

我正在尝试做的（如this [fiddle](http://jsfiddle.net/4vmQ4/2/)所示）是允许单击一段文本，将其更改为输入文本框，然后提交更改以重新创建文本。

我尝试了以下操作，但在[小提琴](http://jsfiddle.net/4vmQ4/2/)中没有成功：

```
$('#container').on('click', '.submit', function (e) {
    var $this = $(this),
        new_text = $this.prev().val();
    e.stopPropagation();
    $this.parent().off('click.temp').html(new_text);                    
});

$('#container').on('click', '.test', function (e) {
    var $this = $(this);
    $this.html("<input type='text' value='" + $this.text() + "'/><input class='submit' value='Submit' type='submit'>");
    $this.on('click.temp', function (e) {
        e.stopPropagation();
    });
}); 
```

使用 an`.off()`似乎不会取消类上的原始处理程序，因为它附加到类而不是元素。

我想我已经部​​分回答了我的问题`e.stopPropagation()`，但它仍然不是很有效，我不相信我会以最好的方式解决这个问题:)

注意：[这篇文章](https://stackoverflow.com/questions/1708450/how-to-disable-jquery-keypress-event-for-just-one-element)与想法有关，但不使用`this`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:15:26.627

你可以像下面这样简单地做到这一点：

```
function testClick() {

    var $this = $(this),
        text = $this.text();

    // you have to off the click like this
    $('#container').off('click', '.test');

    $this.html(
        "<input class='text' type='text' value='" + text + "'/><input class='submit' value='Submit' type='submit'>"
    );

    $this.find('.submit').on('click', function(e) {
        e.stopPropagation();
        var new_text = $this.find('input.text').val();
        $this.html(new_text);
        $('#container').on('click', '.test', testClick); // again on click
    });
}

$('#container').on('click', '.test', testClick); 
```

**[工作样本](http://jsfiddle.net/qG7WP/3/)**

### 您可以将提交事件分开，如下所示：

```
function testClick() {

    var $this = $(this),
        text = $this.text();

    // you have to off the click like this
    $('#container').off('click', '.test');

    $this.html("<input class='text' type='text' value='" + text + "'/><input class='submit' value='Submit' type='submit'>");
}

$('#container').on('click', '.submit', function(e) {
    e.stopPropagation();
    var new_text = $(this).prev('input.text').val();
    $(this).parent().html(new_text);
    $('#container').on('click', '.test', testClick); // again on click
});

$('#container').on('click', '.test', testClick); 
```

**[工作样本](http://jsfiddle.net/qG7WP/7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:04:34.677

我基本上重组了您的代码，以便以相同的方式打开和关闭事件。

更新演示：http: [//jsfiddle.net/qZVzY/6/](http://jsfiddle.net/qZVzY/6/)

**更新代码**

`onClickReadMode`- 是在读取模式下单击 div 时的事件处理程序

`onClickEditMode`- 是在编辑模式下单击 div 时的事件处理程序

```
function onClickReadMode(_elem) {
    console.log('onClickReadMode');
    var $this = _elem, text = $this.text();
    $this.html("<input class='text' type='text' value='" + text + "'/><input class='.submit' value='Submit' type='submit'>");
    _elem.off('click.before');
    _elem.on('click.after', function() {
        onClickEditMode($(this));
    });
    _elem.find('.text').on('click.stopevent', function(e) {
        e.stopPropagation();
        return false;
    });
}

function onClickEditMode(_elem) {
    console.log('onClickEditMode');
    var $this = _elem;
    var new_text = $this.find('input').val();
    $this.html(new_text);
    _elem.off('click.after');
    _elem.on('click.before', function() {
        onClickReadMode($(this));
    });
}

$('.test').on('click.before', function (e) {
    onClickReadMode($(this));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T05:29:24.497

我不会即时添加和删除输入的处理程序，而是坚持使用委托的事件处理程序，就像您已经在*创建*输入的单击处理程序中所做的那样：

```
$('#container').on('click', '.test', function (e) {
    var $this = $(this);
    $this.removeClass("test")
         .html("<input type='text' value='" + $this.text() + "'/><input id='me' value='Submit' type='button'>");
});

$('#container').on('click', 'input[type="button"]', function (e) {
    var $this = $(this),
        new_text = $this.prev().val();
    $this.parent().addClass("test")
                  .html(new_text);
}); 
```

单击“.test” div 时，将其内容替换为您所做的输入，但还要删除“test”类，以便进一步单击 div 不会做任何事情（目前）。

单击提交按钮时，将 div 更改回仅显示文本，然后再次添加类，以便之前的单击处理程序再次生效。

注意：我已将您的按钮从 更改为`type="submit"`，`type="button"`因为它们实际上并未用于提交表单。

演示：http: [//jsfiddle.net/4vmQ4/5/](http://jsfiddle.net/4vmQ4/5/)

# java - java - 如何在枚举中添加特殊字符？

> ID：11445173
> 
> 赞同：8
> 
> 时间：2012-07-12T04:51:50.253
> 
> 标签：java, enums

我这里有问题。我创建了 SpecialCharacterField.java - 一个列出一些特殊字符的枚举类。

**`SpecialCharacterField.java`**

```
package bp.enumfield;

public enum SpecialCharacterField {
   +, #;
} 
```

在我的日食线上：`public enum SpecialCharacterField{`有一个错误说： `Syntax error, insert "EnumBody" to complete EnumDeclaration`

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T05:00:39.817

做这样的事情，

```
public enum SpecialCharacterField{
   PLUS("+"),
   HASH("#");

   private String value;
   private SpecialCharacterField(String value)
   {
      this.value = value;
   }

   public String toString()
   {
      return this.value; //This will return , # or +
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T04:56:58.393

这些字符不能是 Java 语言中标识符的一部分。请注意，JVM 本身没有施加此类限制（仅 ./; 和 [ 被禁止），因此如果您直接编写字节码，则可以使用类似的名称。然而，这通常不是理想的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T05:47:12.283

枚举可以像普通类一样有字段和吸气剂。

```
public enum SpecialCharacterField{
   Plus('+'),
   Hash('#');

   private final char character;
   private SpecialCharacterField(char character) {
      this.character = character;
   }

   public char getCharacter() {
      return character;
   }
} 
```

**注意：**避免覆盖`toString()`- 这样做是一种反模式：`toString()`仅适用于“人眼” - 不应在代码中依赖它。

# css - CSS3 过渡在 Firefox 中不起作用

> ID：11445179
> 
> 赞同：1
> 
> 时间：2012-07-12T04:52:18.320
> 
> 标签：css, css-transitions

> **可能重复：**
> [Firefox 的背景图像的 CSS3 转换不起作用](https://stackoverflow.com/questions/10354742/css3-transition-of-background-image-for-firefox-not-working)

第一次在这里发帖。我已经研究过，似乎已经接近找到答案，但也许我只是感到沮丧。

我无法让我的背景图像轻松进出的 CSS3 过渡在 FF 中工作，但它在 Chrome 中工作。

这是我通过 jsFiddle 编写的代码：http: [//jsfiddle.net/hWnf4/](http://jsfiddle.net/hWnf4/)

HTML：

```
<a href="http://example.com" title="" id="logo">
<span id="logoimg"></span></a>​ 
```

CSS：

```
#logo {display:inline-block; padding-top:22px; text-decoration:none;font-family:'YanoneKaffeesatzRegular',"Helvetica", Arial, sans-serif;font-size:3em;margin-bottom:18px;}
#logo:link, #logo:visited {color:#fff;}
#logo:hover, #logo:active {color:#ccc;}
#logoimg {display:inline-block; width:405px; height:220px; background:url('http://www.webdesign-guru.co.uk/icon/wp-content/uploads/black-round-glassy.gif') no-repeat; transition: background .25s ease-in-out; -moz-transition: background .25s ease-in-out; -webkit-transition: background .25s ease-in-out;}
#logoimg:hover {background:url('http://www.webdesign-guru.co.uk/icon/wp-content/uploads/green-round-glassy-button.gif') no-repeat;}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:58:33.030

我想这会对你有所帮助。

[http://oli.jp/2010/css-animatable-properties/#background-image](http://oli.jp/2010/css-animatable-properties/#background-image)

# c++ - 更改连接到预定义流对象的设备

> ID：11445182
> 
> 赞同：0
> 
> 时间：2012-07-12T04:52:47.987
> 
> 标签：c++, stream

默认情况下，当包含 header 的 c++ 应用程序时，会实例化以下 4 个流对象，**cin、cout、cerr**和**clog**（也实例化相应的宽字符类型）。

现在默认情况下**cin**连接到通常是键盘的标准输入设备，而**cout、cerr**和**clog**连接到通常是控制台的标准输出设备。

我的问题是我们如何更改这些预定义的流对象连接到的设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:24:13.863

您可以使用与此类似的辅助类：

```
class RedirectOutput
{
    std::ostream &os_;
    std::filebuf f_;
    std::streambuf *obuf_;
    RedirectOutput (const RedirectOutput &);  // disallow
    void operator = (const RedirectOutput &); // disallow
public:
    RedirectOutput (std::ostream &os,
                    std::string where,
                    std::ios::openmode mode = std::ios::out)
        : os_(os.flush()) {
        f_.open(where.c_str(), mode);
        obuf_ = os.rdbuf(&f_);
    }
    ~RedirectOutput () {
        os_.flush();
        os_.rdbuf(obuf_);
    }
}; 
```

并像这样使用它：

```
{
   RedirectOutput ro(std::cout, "output.txt");
   std::cout << "Hello" << std::endl;
}
std::cout << "Goodbye" << std::endl; 
```

`Hello`转到文件`output.txt`，同时`Goodbye`转到终端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T05:24:30.203

是的，这是可能的，不，它不依赖于操作系统。这是一个快速演示，重定向`cout`到写入文件：

```
#include <iostream>
#include <fstream>

int main() { 
    // create a file buf, and open it on a file named "your_output.txt":
    std::basic_filebuf<char, std::char_traits<char> > b;
    b.open("your_output.txt", std::ios_base::out);

    // connect `std::cout` to the chosen file via our file_buf:
    std::cout.rdbuf(&b);

    // write some output (which shouldn't show up on screen.
    std::cout << "This is some junk";
    return 0;
} 
```

请注意，作为一项规则，我建议不要这样做。将代码移动到一个函数中，该函数将 ostream 的引用作为其参数，然后根据需要传递适当的 ostream 或 ofstream，通常会更简洁（例如）。另一方面，如果您（例如）有一大块现有代码已经对标准流进行了读/写，那么这可以让它工作而无需全部重写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:56:19.580

这取决于操作系统，但在类 Unix 系统上，您不能在程序运行时执行此操作。您必须在启动该过程时进行设置。

例如，如果您在`zsh`shell 中以这种方式运行程序：

```
./myprogram < file1  > file2  2> file3 
```

...然后`cin`读取`file1`、`cout`写入`file2`和`cerr`写入`file3`。

# java - Assign "this" to a variable

> ID：11445185
> 
> 赞同：-5
> 
> 时间：2012-07-12T04:53:08.890
> 
> 标签：java

Is there any way this can be done in Java?

In PHP you can do `$someVar = $this;` and in JavaScript `var something = this;`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T04:54:07.047

Yes. Assuming your class name is `MyClass`

```
MyClass thisObject = this; 
```

Alternatively, if you are in an inner, anonymous class, or something of the like, the following would be equivalent (given that you are in an instance of `MyClass` still)

```
MyClass thisObject = MyClass.this; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:22:24.637

**1.** “this”与java中的**非静态成员相关联。**

**2.** this 代表**当前对象**。

**3.** `MyCustomClass mc = this ;` **将当前对象分配给 mc，它是 MyCustomClass 类型的对象引用变量。**

**4.**假设你在内部类，你可以做以下......

**例如：**

```
public class outer{

    int x = 10;

    class inner{

        int x=5;

        public void go(){
            System.out.println("Inner x: "+ this.x);           // Prints x in Inner class
            System.out.println("Inner x: "+ Outer.this.x);     // Prints x in Outer class
        }
    }
} 
```

# ruby-on-rails - 如何在 rails postgresql 数据库中创建 BLOB 列

> ID：11445186
> 
> 赞同：7
> 
> 时间：2012-07-12T04:53:18.953
> 
> 标签：ruby-on-rails, postgresql, heroku, blob

我正在尝试将二进制数据存储在数据库中。（heroku 上的 postgresql）

我知道有两种不同的方法可以在 postgresql 中存储二进制数据。一个blob和一个bytea..

当我在迁移中创建表时，

```
create_table :binaries do |t|
  t.binary :data
end 
```

它在 bytea 类型的数据库中创建一个列。

我的问题是..如何创建 blob 类型的记录？

我为什么要问？似乎当我将一个 10 字节的文件发送到 heroku 时，它将它存储为一个十六进制值的字符串，前面带有一个“e”.. 所以我的 10 字节变成了 21。我的 10 兆文件将变成 20 兆（和一个字节），分机，分机，分机......
现在这让我很困扰，但因为我并不真正关心性能。（我已经被总理打败了），这不是最困扰我的事情。
真正困扰我的是；当我读出数据库的内容时，我得到了 21 个字节，而不是 10 个字节。那是不可用的。

**所以我的问题又来了。如何在 rails/postgresql/heroku 环境中创建一个 BLOB 列？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T05:30:00.827

`bytea`是 PostgreSQL 的 BLOB 版本。来自[精美手册](http://www.postgresql.org/docs/current/interactive/datatype-binary.html)：

> SQL 标准定义了一种不同的二进制字符串类型，称为`BLOB`or `BINARY LARGE OBJECT`。输入格式与 不同`bytea`，但提供的函数和运算符大体相同。

你`bytea`想要的也是如此。就格式而言：

> 该`bytea`类型支持两种外部输入和输出格式：PostgreSQL 历史上的“转义”格式和“十六进制”格式。这两个总是在输入时被接受。输出格式取决于配置参数 bytea_output；默认值为十六进制。（请注意，十六进制格式是在 PostgreSQL 9.0 中引入的；早期版本和一些工具不理解它。）

因此，您所看到的只是用于将数据输入数据库和从数据库输出的文本版本。

这可能也很有趣：

*   [ActiveRecord 在 Heroku 上错误地加载二进制字段，在 OSX 上很好](https://stackoverflow.com/questions/8539207/activerecord-loads-binary-field-incorrectly-on-heroku-fine-on-osx/8541304#8541304)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-07T21:16:06.627

Blob 存储内置在 Postgres 中，并使用 ActiveRecord 适配器支持，但只能直接通过原始连接和`lo_*`方法。您可以使用它`lo_write, lo_open, lo_close and lo_read`来创建和操作 blob。创建 blob 会返回一个 OID，您可以在模型中引用该 blob。

您可以使用迁移添加它

```
rails g migration AddFileToModel file:oid 
```

或者直接这样

```
add_column :users, :avatar, :oid 
```

对于这方面的工作示例，您应该查看[Carrierwave PostgreSQL gem](https://github.com/diogob/carrierwave-postgresql)。您可以基于该代码构建自定义解决方案，也可以直接使用 Carrierwave。我目前正在使用它并且效果很好。

# objective-c - 在 XCode 中使用 Pascal 库

> ID：11445188
> 
> 赞同：3
> 
> 时间：2012-07-12T04:53:33.577
> 
> 标签：objective-c, ios, xcode, pascal

我正在开发一个 iOS 应用程序（OSX 10.7.4、XCode 4.3.3，并针对 iOS 版本 5.1）。我已经构建了界面，但是应用程序将使用的核心功能是用 Pascal 编写的。我没有将 Pascal 函数移植到 C（并且必须维护两个副本），而是寻找一种方法来创建一个 Pascal 库，该库可以导入 XCode 并由 Objective-C 代码调用。

Pascal 函数只不过是计算（没有接口代码等）。我希望它如何工作的一个例子是这样的：用户按下一个按钮，Objective-C 代码收集输入的数据，调用适当的 Pascal 计算函数，然后返回并显示结果——Pascal仅用于提供结果。

我找到了[FreePascal](http://freepascal.org/)，并假设这是我要开始的地方，但我无法找到任何关于如何完成我想做的事情的明确信息。我也找到了这个[演练](http://pascal-central.com/fp-xcode/)，但最终结果是您可以使用 Pascal 来实际编写您的应用程序——与我需要的相比，这似乎有点矫枉过正。

我的问题是：在我已经构建的 iOS 应用程序中使用我的核心 Pascal 函数的最简单方法是什么？将 FreePascal 集成到 XCode 并将我当前的应用程序故事板和代码导入其中一个 Pascal 模板是绝对必要的，还是可以使用另一种方法创建兼容的 Pascal 库并从我的代码中引用它？

我将非常感谢提供的任何帮助（即使只是一个链接）。我做了很多搜索，真的很想解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:42:51.700

最简单的机制是[创建一个 pascal 静态库](http://julien.marcel.free.fr/ObjP_Part7.html)并将其包含在 Objective-C iOS 项目中，否则您必须将构建过程集成到 xcode 环境中；这比仅仅通过标头公开 API 然后链接到`.a`文件要多一些工作。

# c# - Telerik Free Testing Framework vs Selenium

> ID：11445189
> 
> 赞同：7
> 
> 时间：2012-07-12T04:53:34.663
> 
> 标签：c#, testing, selenium, telerik, gui-testing

I am choosing one of the following to test with: **Telerik Free Testing Framework** and **Selenium**

The web-project, is a site written in C # and JavaScript.

Can you please tell which of the testers to choose and why?
Highlighting the differences of the above tools for testing?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T18:16:18.883

完全披露：我是 Telerik 的测试工作室和测试框架的布道者，所以我在这里有一些偏见。

WebDriver 很棒。我仍然围绕它做很多研讨会和讨论。Telerik 的测试框架（免费，带有付费支持选项）在跨浏览器兼容性、隐式和显式等待以及其他一些领域都有很好的故事。这也是从 Test Studio 到完整商业版本的自然发展——但是，如果您不想这样做，您明确地不必使用付费工具。

任何一种工具都可以完成工作。测试自动化取得长期成功的更重要的方面是您如何开展工作。专注于很好地使用页面对象模式（无论您使用哪个框架），并学习如何处理围绕动态内容（例如 AJAX）的同步。搞定这两个概念，无论您使用的是 WebDriver 还是 Telerik 的测试框架，您都会更快乐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T22:49:43.577

我会选择硒。我这么说是为了一件主要的事情：开源。

我无法开始用语言来解释，从 Selenium 调用某些东西是多么烦人，它正在做一些我没有预料到的事情，或者我会传递一个值而它什么也没做。文档可能有点零散，那么接下来呢？查看源代码。

通过查看源代码，我了解了 Selenium 的工作原理。使用 Telerik，您显然无法做到这一点。

在浏览器支持下，它们是相同的。

两者都写得很好，维护得很好，Telerik 有专门的支持，而使用 Selenium，你会被困在谷歌群组、谷歌和 Stackoverflow 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:51:47.260

I think I would go with Selenium. I don't know Telerik but I do know that:

> As of early 2012, Simon Stewart of Google (inventor of WebDriver) and David Burns of Mozilla are negotiating with the W3C to make WebDriver an internet standard. As such, Selenium-Webdriver (Selenium 2.0) aims to be the reference implementation of the WebDriver standard in various programming languages. Currently Selenium-WebDriver is fully implemented and supported in Python, Ruby, Java, and C#.

Of course nobody knows if it will become a standard but the fact that is under consideration gives me hope that what I learn using it will be useful in the future. Anyway, it's an aspect worth keeping an eye on.

Also, I could do what I needed by reading their documentation.

# objective-c - Using "stringbyevaluatingjavascriptfromstring" for get the link in tag in objective C

> ID：11445190
> 
> 赞同：0
> 
> 时间：2012-07-12T04:53:40.703
> 
> 标签：objective-c, uiwebview, stringbyevaluatingjavascr

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:19:03.563

我认为`-stringByEvaluatingJavaScriptFromString:`这里不是一个好的选择。尝试使用`NSScanner`：

```
NSScanner* scanner = [NSScanner scannerWithString:yourHTML];
while ([scanner scanUpToString:@"a href='" intoString:nil])
{
    [scanner scanString:@"a href='" intoString:nil];
    NSString* result = nil;
    [scanner scanUpToString:@"'" intoString:&result];
    //Do something with result, which will equal 001, then 002, etc.
} 
```

请注意，如果您需要解析不是您自己编写的 HTML，则需要为此添加更多的灵活性以解决可能的风格差异（例如`'`vs `"`、`href`vs `HREF`）。

# c# - Nhibernate映射父>子的最佳方式

> ID：11445199
> 
> 赞同：0
> 
> 时间：2012-07-12T04:54:39.400
> 
> 标签：c#, nhibernate, parent-child, fluent-nhibernate-mapping

我是 NHibernate 的新手，我有一些疑问。我会把我的代码放在下面，然后我会解释。

我的桌子： ![https://dl.dropbox.com/u/423844/map%20db.png](../Images/5cd604d9d676a4277271efc53898ed2e.png)

我的课程：

```
public class IntegratorModel : PGIBaseModel<int>, IIntegratorModel
{
    public virtual string Identifier { get; set; }

    public virtual string Name { get; set; }

    public virtual string Description { get; set; }
}

public class ClientModel : PGIBaseModel<int>, IClientModel
{
    public virtual string Name { get; set; }

    public virtual string TokenPGI { get; set; }

    public virtual IIntegratorModel Integrator { get; set; }
} 
```

我使用 Fluent 的映射：

```
public class IntegratorMappingOverride : IAutoMappingOverride<IntegratorModel>
{
    public virtual void Override(AutoMapping<IntegratorModel> mapping)
    {
        mapping.Map(model => model.Identifier).Column("Identifier").Length(4);
        mapping.Map(model => model.Name).Column("Name").Length(200);
        mapping.Map(model => model.Description).Column("Description").Length(2000);
    }
}

    public class ClientMappingOverride : IAutoMappingOverride<ClientModel>
{
    public virtual void Override(AutoMapping<ClientModel> mapping)
    {
        mapping.Map(model => model.Name).Column("Name").Length(200);
        mapping.Map(model => model.TokenPGI).Column("TokenPGI").Length(50);

        mapping.References<IntegratorModel>(model => model.Integrator);
    }
} 
```

我之前在另一个时刻保存了 IntegratorModel，所以当我插入一个新的 ClientModel 时，我已经有了 IntegratorID，所以没关系。

我的问题是当我更新 ClientModel 并且我想更改数据库中的 IntegratorID 时，我正在做这样的事情：

```
 IClientModel model = this.GetModelFromPost();
    model.Integrator = integratorBLL.LoadByID(context.Request.Form["IntegratorID"]));
    clientBLL.Save(model); 
```

integratorBLL.LoadByID 只会从 NHibernate 调用 ISession.Load。也许我错了，但此时 Load 并没有命中数据库。

我的问题是我所做的是否正确。在这种情况下，如果我在 ClientModel e 中直接更新了一些属性 IntegratorID 会不会更容易？

因为，在我的架构中，我必须调用我的 Integrator BLL，调用 Load，然后在 ClientModel 属性中设置返回值。

这段代码有效，但由于我是 Nhibernate 的新手，我认为可能还有另一种方法可以做得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:44:43.270

`session.Load()`适用于这种情况，并且具有您获得的 objectproxy 的行为类似于真实对象的优点，因此当您仅设置 id 并且您想稍后使用 clientmodels 集成器时，您没有**损坏的模型。**它也不会中断更改跟踪，因为 NHib 不能在`null > not initialised`和之间分开`null > references nothing`

**总结一下：这是使用 (N)Hibernate 处理此问题的正确方法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:01:38.377

代码没问题。更改实体后无需调用 Save。NHibernate 自己发现更改并在提交会话时将所有更改传播到数据库。

# android - 如何在android中运行功能后台？

> ID：11445202
> 
> 赞同：1
> 
> 时间：2012-07-12T04:54:41.297
> 
> 标签：android, android-listview

在我的应用程序中，我有一个填充列表视图的功能。我想每 5 分钟定期运行一次此功能。我为此使用了以下方法。

```
private class RefreshThread extends Thread{
        public boolean isStop = false;

        public void run(){
            try{
                while(!isStop){                                             
                    Headlines.this.runOnUiThread(new Runnable() {                   
                        public void run() {
                              populate_listview(); //Function to populate listview
                        }
                    });                         
                    try{ Thread.sleep(300000); } catch(Exception ex){}
                }
        }catch(Exception e){
        }
      }
    } 
```

当我使用此方法时，该函数在前台运行，因此整个应用程序都受此影响。我想在后台运行此函数，以便列表视图更新，而用户永远不知道该函数正在运行。

以下是填充列表视图的功能。

```
 public void populate_listview()
         {
                ArrayList<HashMap<String, String>> newsList = new            ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML from URL
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_HEAD);
            // looping through all song nodes <song>
            NodeList itemLst = doc.getElementsByTagName("item");
            String MarqueeStr="";

            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);

                //map.put(KEY_DATE, parser.getValue(e, KEY_DATE));

                newsList.add(map);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:59:34.460

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在后台执行您的活动。

这是一个很好的[教程](http://www.vogella.com/articles/AndroidPerformance/article.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:59:41.907

您可以为此创建一个 Android[服务并使用警报管理器来调用该服务。](http://developer.android.com/reference/android/app/Service.html)

这是一个很好的[教程](http://www.vogella.com/articles/AndroidServices/article.html)

干杯， RJ

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T05:02:09.007

您需要探索 AsyncTask 类的 doInBackground 函数。

查看[文档](http://developer.android.com/reference/android/os/AsyncTask.html)和此[示例](http://www.vogella.com/articles/AndroidPerformance/article.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T05:14:36.443

为了获得更小的性能开销，您应该`HashMap`在后台线程中进行所有准备工作，包括使用适当的值填充并`populate_listview()`仅保留方法`newList.add(refresh_thread.getMap());`。只需添加到`RefreshThread` `synchronized`方法以从另一个类`getMap()`访问它，并为准备它的代码添加另一个方法。显然，你必须是一个类的领域。然后，该方法将如下所示：`HashMap``synchronized``prepareHashMap()``HashMap``RefreshThread``run()`

```
public void run(){
        try{
            while(!isStop){                                             
                prepareHashMap();
                Headlines.this.runOnUiThread(new Runnable() {                   
                    public void run() {
                          populate_listview(); //Function to populate listview
                    }
                });                         
                try{ Thread.sleep(300000); } catch(Exception ex){}
            }
    }catch(Exception e){
    }
  } 
```

# semantic-web - Semantic web interview Questions

> ID：11445205
> 
> 赞同：0
> 
> 时间：2012-07-12T04:55:22.260
> 
> 标签：semantic-web

if someone is getting a job interview in the domain of semantic web , this topic is a little bit not common so i wanted to collect some info about :

*   topics to revise before the interview and how to get prepared ?
*   what is the common interview Questions ?
*   what does recruiters seek for ?

i'll start by some and correct me if i'm wrong :

topics to revise :

1.  RDF / OWL
2.  SparQL Query language
3.  JENA , DotNetRDF frame works
4.  Virtuoso server installation and handling

and for common Questions : [http://www.coolinterview.com/type.asp?iType=467](http://www.coolinterview.com/type.asp?iType=467)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:01:12.373

编程！如果我正在为某个职位面试某人，我可能会为他们考虑一个项目，并且可能涉及的编程比语义网络细节更多，所以对我来说，这是一件重要的事情。

看，语义网不是火箭科学。一个优秀的程序员将能够非常快速地掌握基础知识，并且能够非常轻松地启动和运行项目。快速加入并为项目做出贡献是不可低估的。因此，我不会仅仅因为他们没有大量的 semweb 背景而忽略未见过的候选人视线。

你的计算机科学有多好？还记得复杂性类吗？图算法？你知道 HTTP 是如何工作的吗？简而言之，我会问一些问题来尝试确定程序员的水平以及您对编程艺术的兴趣。见鬼，我想知道你是否了解计算机的工作原理！这些都与了解 RDF 模型理论的每一个细节一样有用，或者更有用。

但是如果你要声称你知道 OWL，我会问关于本体建模的问题。我要问推理。您知道 OWL 2 配置文件吗？你能告诉我有什么不同吗？你用了什么推理？

您使用了多少现有的 semweb 工具链？你知道有比 Jena 和 .NetRDF 更多的库吗？你知道有比 Virtuoso 更多的三联店吗？您真正了解多少 SPARQL？您构建/开发了哪些 semweb 应用程序？为什么你使用 semweb 而不是其他东西？

我知道，这些大多是胡说八道的问题。但如果你要声称知道这些东西，我会找出你真正了解它的程度。正如我所说，详细的 semweb 知识并不是严格要求的，所以我不在乎你是否不知道所有的答案，但我会发现你正在对你的经历大发雷霆。当然，如果有工作 OWL 推理的职位，并且您已经阅读了 DL 手册并且可以谈论分类，那么这对您有利，所以经验绝对有帮助，但缺乏经验并不会造成严重伤害。

同样，我不希望有人将 semweb 向后和向前作为这项工作的主要要求。我希望有人聪明并且能够完成工作，*这*就是我在填补职位时所需要的。

# html - Different types of Apps Developed in Sybase Unwired Platform

> ID：11445206
> 
> 赞同：0
> 
> 时间：2012-07-12T04:55:30.233
> 
> 标签：html, sup, web-container

I want know the different types of apps developed in Sybase Unwired platform.please send me any materials or web links related to SUP .

Thanks in Advance........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:24:33.707

Sybase Unwired Platform supports two main modes of application development: native application development and hybrid Web development. Native application development makes sense when user interface expectations or application performance depend on device-specific capabilities.

Hybrid Web development is best for cross-platform apps that run on multiple devices. It provides a lower cost of development for extending workflow processes such as approvals or requests.

You can find everything in related to this in the sybase info center.

Regards Midhun

# linux - 通过算术运算在 hp unix 中循环日期

> ID：11445208
> 
> 赞同：0
> 
> 时间：2012-07-12T04:55:37.113
> 
> 标签：linux, perl, unix

您好，我正在使用 hp unix，我正在尝试使用 for 循环遍历过去 20 天（相对于当前日期）。

```
for (( c=1; c<=5; c++ ))
do
day$c=$(perl -e 'use POSIX;print strftime "%Y%m%d\n",localtime time-86400*$c;')
done
later do some operations with day$c 
```

问题是由于某种奇怪的原因 86400*$c 没有执行，有人能指出错误吗？提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:12:12.877

我相信您必须在运算符和操作数之间使用空格

```
perl -e 'use POSIX; print strftime "%Y%m%d\n",localtime time - 86400 * $c;' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:06:03.063

尝试不同的引用：

```
day$c=$(perl -e "use POSIX;print strftime qq(%Y%m%d\n),localtime time-86400*$c;") 
```

（我不熟悉 HPUX，但它看起来`$c`没有被 shell 插值。）

编辑：或者稍微短一点：

```
day$c=$(perl -MPOSIX -le "print strftime '%Y%m%d',localtime time-86400*$c;") 
```

# javascript - 使用脚本管理器后出现 Javascript 错误 - ：无法解析从服务器接收到的消息

> ID：11445215
> 
> 赞同：0
> 
> 时间：2012-07-12T04:56:11.763
> 
> 标签：javascript, asp.net

我在按钮 OnClientClick 事件上打开一个 ShowModalDialog，它的 javascript 是：-

```
<script language="javascript" type="text/javascript">
        function openmodalWinLunch() {
            var variable1 = "Lunch";
            window.showModalDialog("ClockPopUP.aspx?code=" + variable1, "dialogWidth:290px;dialogHeight:270px,");
        } 
```

在 Clock.aspx 页面上，我有一个我写过代码的 asp 按钮：-

```
protected void btnStop_Click(object sender, EventArgs e)
    {
        _nonProduction = new NonProduction();
        if (Session["LastNonProdTimeID"] == null)
        {
        }
        else
        {
            int NonProdTimeEntryID = Convert.ToInt32(Session["LastNonProdTimeID"]);
            //Updating the TimeSpent 
            isTimeSpentUpdated = _nonProduction.UpdateTimeSpentInDB(NonProdTimeEntryID);
            if (isTimeSpentUpdated == true)
            {

                string timespent = Convert.ToString(_nonProduction.GetTimeSpent(NonProdTimeEntryID));
                //string msg = "Total time consumed  in " +HiddenTaskname.Value.ToString()+": " + timespent.ToString() + " Minutes";
                Response.Write("<script language='javascript'>window.close();</script>");
                Response.End();

            }
            else
            {
            }
        }

    } 
```

以前每件事都工作正常，这段代码按照我的要求工作。只是我在 Clock.aspx 上添加了 Scriptmanager，因为我向用户显示了一个时钟，该时钟向用户显示了经过的时间。之后，当我单击 CLock.aspx 页面上的 btn_Stop 时，我收到以下错误消息：-“Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。”

请指导我如何解决这个问题。

我发现这个错误的根本原因是什么。这是因为我正在使用 Resonse.Write 和其他信息在 [这里](http://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx)

指导我如何解决此问题，因为我想在按钮单击事件后关闭网页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:42:12.067

我用过

`ScriptManager.RegisterStartupScript(Page, GetType(), "CLOSE", "window.close();", true);`

代替

`Response.Write("<script language='javascript'>window.close();</script>"); Response.End();` 这有助于我修复错误。

# python - Better optimization technique using if/else or dictionary

> ID：11445226
> 
> 赞同：9
> 
> 时间：2012-07-12T04:57:55.850
> 
> 标签：python, algorithm

Which is better optimization?

*   A series of if/else statement which receives the 'string' returns the appropriate function for it. (Around 40-50 if/else statements).
*   A dictionary maintaining the key-value pair. key as strings, and values as the function objects, and one main function to search and return the function object.

The main function which actually returns the function object using above method would be called millions or billions of times, so need to do this intelligently. What could be the better way?

For e.g.

```
dict['str1'] = func1
dict['str2'] = func2
and so on..

def main_func(str):
    return dict[str] 
```

Or

```
def main_func(str):
    if 'str1':
      return func1
    elif 'str2':
      return func2 
```

Which would be better..? if we have 50-60 such strings, and this process needs to be billions of times.

**Storing function object inside dictionary, in function itself:-**

```
def func1():
   if dict.has_key('str1'):
        dict['str1'] = func1
   -- do something -- 
```

Which is better, this or the above one. This looks much cleaner.? But remember, these functions would be called many times so has_key function would also be called many times.

Thanks

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T05:07:25.123

选择字典。

词典 ...

*   是内置的
*   是pythonic
*   需要更少的样板代码
*   与 if-else 线性 O(n) 复杂度相比，具有 O(1) 复杂度
*   不犯过早悲观（我们没有足够的理由相信没有分析它是一种效率较低的方法）

我建议先使用字典编写解决方案，然后查看解决方案是否足够快以满足您的需求。如果是这样，太好了，你完成了。如果没有，请按另一种方式计时。

`None`考虑这样的解决方案（如果找不到字符串，它将返回）：

```
func_dict = {}
func_dict['str1'] = fun1
func_dict['str2'] = fun2
...
def function_lookup(func_string):
    return func_dict.get(func_string) 
```

然后，在您的 main 中，只需编写`function_lookup(whatever_string_variable)`以尝试查找您的函数。这样可以避免每次`function_lookup`调用时都重建字典。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T05:13:16.753

字典会更快：它大约是 O(1)，而 if 语句链是 O(n)。为了演示，这个脚本 ( `make_test.py`) 将输出一个运行一些性能测试的 python 脚本：

```
ifs = []
dict = []
for i in range(60):
    string = 'str%d' % i
    ifs.append('  %sif str == "%s": return %d' % ('el' if i else '', string, i))
    dict.append('"%s": %d' % (string, i))

print 'dict = {', ','.join(dict), '}'
print 'def with_dict(str):'
print '  return dict[str]'

print 'def with_if(str):'
print '\n'.join(ifs)

print '''
import timeit

def test_dict():
    for i in range(60):
        with_dict("str%d" % i)

def test_if():
    for i in range(60):
        with_if("str%d" %i)

print 'dict:', timeit.timeit(test_dict, number=10000)
print 'if:  ', timeit.timeit(test_if, number=10000)''' 
```

运行它`python make_test.py | python`，给我：

```
dict: 0.706176042557
if:   1.67383503914 
```

即`if`版本比`dict`版本慢2倍以上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T05:01:08.390

从技术上讲，它取决于哈希冲突性能，但我想将所有数据存储在哈希中并检索它会*稍微*快一些。

无论如何，无论哪种方式，差异都可能不会很大。当然，哈希表解决方案更干净，所以我会推荐它。

确定的最好方法是编写两个版本并用大量数据测试它们并测量它们的性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T05:01:52.223

字典更好。字典应该由树/哈希图支持，并且比 if-else 语句（大致是线性的）具有更好的时间复杂度。即使实际运行时间不是更好，使用字典代码也会更干净。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-12T05:07:46.930

字典是 python 中经过大量调整的部分之一。它们产生更具可读性的代码。它们应该比你的 if 循环表现更好。但是，考虑到插入和其他开销，我建议您使用 timeit 模块并检查性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T05:14:41.543

[dict 查找](http://wiki.python.org/moin/TimeComplexity)的平均时间复杂度为O(1)。最坏的情况是 O(n)。只有 str 键（您的用例）的字典有优化。

假设 if/else 阶梯中的测试顺序本身不能根据输入的频率进行优化（例如 60 种可能性，其中 2 种出现 95% 的时间），一系列 if/else 语句的复杂性是 O(n)。

因此，字典将提供更好的性能以及更好的代码可读性。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-30T23:20:44.960

每个解决方案看起来更优雅，更容易维护。

在大多数应用程序编程中，优化人工时间和可维护性比优化计算机时间更重要。电脑时间很便宜。人的时间是昂贵的。

两种解决方案都有其优势。

如果您需要稍后添加控制流，例如嵌套 if/else，if/elif 解决方案可能会提供更大的灵活性。

如果数据直接来自像 yaml 或数据库这样的数据源，那么显然 dict 解决方案更优雅。

# paypal - 如何使用 Google Checkout API 查询订单？

> ID：11445228
> 
> 赞同：0
> 
> 时间：2012-07-12T04:58:06.870
> 
> 标签：paypal, google-api, payment-gateway, google-checkout

在 Google Checkout 中，POST`checkout-shopping-cart`请求后，Google 会发送包含`serial-number`多次的通知。我可以用它`serial-number`来收费或查询订单。如果我错过了这个通知，是否有任何其他 API 可以查询或收取订单？

是否可以在不设置的情况下获取`googld-order-number`或查询订单`API callback URL`？因为我认为有时我们的服务器可能无法处理来自 Google 的传入通知。

PS PayPal 将`token`在付款开始时生成一个。我可以使用相应的`token`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:07:50.613

*   每个`serial-number`代表一个特定（类型）的通知
*   然后，您发出[通知历史请求](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API#serial_number_notifications)以*获取*所`serial-number`代表的数据。

`serial-number`如果您存储（然后执行通知历史请求），您可以“重播”发送给您的通知。

*   您使用[订单处理 API收取订单费用](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Processing#order_processing_api)
*   您不使用`serial-number`此 API，而是使用订单号 ( `google-order-number`)
*   您使用通知历史请求和`serial-number`

您可以将其`serial-number`视为指向某些数据（您需要获取）的“指针”。

嗯。

* * *

更新：

如果您的服务器因任何原因出现故障，请不要/它不能，握手[`notification-acknowledgement`](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API#responding_to_notifications)，Google 将重新发送（直到您可以正确握手或重试尝试过期 - 我*相信*这是 14 天）。

您当然可以通过在卖方订单收件箱中获取订单号并在您的通知历史请求中使用它来**手动**执行操作....但是对于任何自动化，它将通过您的 API 回调 url....

# php - 如何在 joomla 中的组件位置显示内容？

> ID：11445229
> 
> 赞同：1
> 
> 时间：2012-07-12T04:58:07.970
> 
> 标签：php, javascript, joomla

我开发了一个在 joomla 中搜索用户的搜索模块。我的问题是它在同一个模块中显示内容，而不是我希望它显示在组件位置。我没有在该页面中使用任何其他组件。我的 Joomla 版本是 2.5 有什么建议吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:41:48.760

在 Joomla! 的 MVC 下，模块的输出仅呈现到模块位置，要在主组件位置呈现内容，您必须创建一个响应模块搜索请求的匹配组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T12:28:05.913

听起来您需要将其开发为组件而不是模块。[使用Joomla 组件创建](http://www.notwebdesign.com/joomla-component-creator/)器可能很容易实现

# ios - Titanium iOS - Facebook SSO 未返回应用程序

> ID：11445233
> 
> 赞同：1
> 
> 时间：2012-07-12T04:59:12.573
> 
> 标签：ios, facebook, titanium, single-sign-on, appcelerator

我最近使用 Appcelerator 的 Titanium 在我的应用程序中添加了 Facebook 单点登录。效果很好，但是当出现“已授权”facebook页面时无法自动重定向回我的应用程序。

如果用户单击 facebook 中的“确定”按钮，应用程序将重新打开并照常工作。我只是想为用户摆脱这个额外的步骤。

有什么建议么？我遇到过 Objective C 解决方案，例如：[Facebook iOS SDK 是否要求用户在每次使用应用程序时进行身份验证？](https://stackoverflow.com/questions/5571648/does-the-facebook-ios-sdk-require-the-user-to-authenticate-every-time-they-use-t)

干杯，汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:01:19.627

我认为这个问题与 Facebook 应用程序设置不正确以及没有直接在设备而不是模拟器上进行测试有关。

以下设置应在您的 Facebook 应用程序中应用。

**启用：原生 iOS 应用**

*   iOS 捆绑包 ID：com.yourcompany.yourapp
*   iPhone 应用商店 ID：24242423
*   为 iOS SSO 配置：已启用

由于未安装 Facebook 应用程序，在模拟器上进行测试将触发 Safari 打开并显示授权对话框（因此您需要真实设备）。如果发生错误、已授权或成功，则将您的应用程序推送到设备并在您的应用程序中触发 SSO 将重定向回您的应用程序。

希望这可以帮助发生这种情况的任何人。

# python - 在python中导入maltego模块

> ID：11445234
> 
> 赞同：0
> 
> 时间：2012-07-12T04:59:14.630
> 
> 标签：python, windows, import

我正在尝试导入 PyMaltego 模块并不断收到导入错误。

我已经使用以下命令从 cmd 安装了模块：

```
C:\Documents\maltego>C:\Python32\python setup.py install 
```

但是，当尝试导入模块时，我收到以下消息：

```
>   File "C:/Users/Loveturd/Documents/Python Stuff/test.py", line 3, in
> <module>
>    import maltego   File "C:\Python32\lib\site-packages\maltego\__init__.py", line 5, in
> <module>
>     from entity import * ImportError: No module named entity 
```

有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:10:42.843

Maltego 项目网站上没有任何内容表明它与 python3.2 兼容。如果使用python2.7，则不会出现此错误。

如果它们提到它们与 python3 兼容，则只能将包与 python3.2 一起使用。

# javascript - 多个悬停实例jQuery

> ID：11445236
> 
> 赞同：0
> 
> 时间：2012-07-12T04:59:40.147
> 
> 标签：javascript, animation, hover, multiple-instances, mouseenter

我有一个 div 从另一个 div 的顶部到底部设置动画。我目前正在播放带有 mouseenter/leave 和带有缓动的 JS 动画，其原始状态是向上/顶部。如果我鼠标离开/悬停，我想悬停/鼠标进入并让它向下移动并保持向下。当我再次悬停时，它将动画回到顶部/开始。

我最初使用 mouseenter/leave 这显然不能满足我的需要，因为我希望状态在 mouseleave 时保持不变。那么什么功能最适合这种需求呢？我仍在学习术语，并且在如何更好地表达问题时磕磕绊绊。

代码：

```
 function init() { 
        mouseenter: function(){
            $(".ltrP").stop(true, true).animate({
                marginTop:"170px"
            }, 
            {
                duration: 1000,
                easing: "easeOutBounce"
            });
        },
        mouseleave: function(){
            $(".ltrP").stop(true, true).animate({
                marginTop: "0px"
            },
            {
                duration: 1000,
                easing: "easeInBounce"
            });   
        }
    });
}
window.onload = init; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:09:37.527

你可以这样重写你的代码：

```
$(document).ready(function(){
    init();
});
function init() {
    $.hover(function(){
        $(".ltrP").stop(true, true).animate({
            marginTop:"170px"
        }, 
        {
            duration: 1000,
            easing: "easeOutBounce"
        });
    },
    function(){
        $(".ltrP").stop(true, true).animate({
            marginTop: "0px"
        },
        {
            duration: 1000,
            easing: "easeInBounce"
        });   
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:18:49.453

有很多方法可以做到这一点。也许最容易概念化的方法是向动画项目添加一个类。您想编写两个单独的 mouseenter 函数。

对于第一个函数，触发您的向下动画，并为输入的项目添加一个类。将课程称为“movedown”或其他明显的东西。

然后，编写第二个 mouseenter 函数。当具有该类的项目被鼠标插入时，将其设置为动画，然后删除该类。

忘记 jQuery 吧`hover`。它只是 mouseenter/mouseleave 的包装器。它可能会导致问题。jQuery 文档对此提出警告。通常最好分别编写 mouseenter 和 mouseleave 函数，特别是当你尝试做一些棘手的事情时，比如这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T05:30:29.800

我已经编辑了您的代码，请参阅注释以获取解释：

```
$(document).ready(function(){ // Runs when document is loaded

    $(".ltrP").mouseenter(function(){ // Mouseenter event on the given object (.ltrP)
        var goTo = $(this).css("marginTop") == '0px' ? 170 : 0; // When the current margin-top is 0px animate to 170px, otherwise animate it back to 0px
        $(this).stop(true,false).animate({ // Changed the stop(true, true) to stop(true, false), looks nicer in my opinion
            marginTop: goTo // Animate to the just set variable
        }, 1000);
    });

}); 
```

并在这里看到一个演示：http: [//jsfiddle.net/hnDmt/](http://jsfiddle.net/hnDmt/)

（而且缓动“easeInBounce”对我不起作用，所以我删除了它。（也许是一个 jQuery UI 缓动？））

# ruby-on-rails - Rails 教程：第 8.1.5 章错误（使用 flash 消息渲染；清单 8.11 和 8.12）

> ID：11445238
> 
> 赞同：0
> 
> 时间：2012-07-12T04:59:45.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec-rails, railstutorial.org

我正在学习 RoR 教程。在第 8.1.5 章的最后一部分，当所有的 rspec 测试都应该变成绿色时，我就是无法让我的工作。我运行 bundle exec rspec spec/requests/authentication_pages_spec.rb -e "signin with invalid information" 并且在四个测试中，一个失败，出现以下错误：

```
1) Authentication signin with invalid information after visiting another page 
 Failure/Error: it { should_not have_selector('div.alert.alert-error') }
   expected css "div.alert.alert-error" not to return anything
 # ./spec/requests/authentication_pages_spec.rb:25:in `block (5 levels) in <top (required)>' 
```

app/controllers/sessions_controller.rb 的文本如下：

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      # Sign the user in and redirect to the user's show page.
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
  end
end 
```

spec/requests/authetication_pages_spec.rb 的文本如下：

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end 

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before do
        fill_in "Email",    with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
      end 

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }
    end
  end
end 
```

如果您有任何想法或想法，请告诉我，我完全被难住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:34:53.347

我克隆[了您的仓库](https://github.com/brendandmcdonald/practice)并发现了您的问题。

头文件（**app/views/layouts/_header.html.erb**）中的链接不会去任何地方：

```
<li><%= link_to "Home",    '#' %></li>
<li><%= link_to "Help",    '#' %></li> 
```

因此，当您的测试运行时，以下测试通过，因为显示错误...

```
describe "with invalid information" do
  before { click_button "Sign in" }

  it { should have_selector('title', text: 'Sign in') }
  it { should have_selector('div.alert.alert-error', text: 'Invalid') } 
```

...但是当您单击一个不会去任何地方的链接时...

```
 describe "after visiting another page" do
    before { click_link "Home" } # goes nowhere
    it { should_not have_selector('div.alert.alert-error') }
  end
end 
```

...该错误仍在页面上，因此测试正确失败。

将`"Home"`链接目标从更改`'#'`为 后`root_path`，您的测试应该会通过。

看文字，如果你在第 8 章，似乎你在[第 5.3.3章中的](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec%3anamed_routes)[清单 5.2.4](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code%3aheader_partial_links)上错过了几章，所以一旦你回去修复，你应该处于更好的状态它。

我还建议安装`launchy`gem，以便您可以调用有用的 Capybara 方法，例如`save_and_open_page`在您的测试中，它会为您打开一个浏览器，显示您调用该方法时的页面状态；对调试有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:09:33.003

代替

```
it { should_not have_selector('div.alert.alert-error') } 
```

经过

```
it { should_not have_selector('div.alert.alert-error', text: 'Invalid') } 
```

# objective-c - 从 IB、XCode 中的多个按钮创建对象数组

> ID：11445239
> 
> 赞同：0
> 
> 时间：2012-07-12T04:59:45.570
> 
> 标签：objective-c, ios, xcode, arrays

我想为 iOS 应用程序设置三组 10 个按钮。我想显示/隐藏每组（一次显示一组）。我打算使用标签来做到这一点。

因为我有每个按钮的属性（例如：btn01、btn02 等），所以我有 30 个属性。我将它添加到一个数组中，然后使用以下代码隐藏带有一个标签或另一个标签的按钮。

我的问题是，有没有一种更有效的方法来创建对象数组，而不是设置 30 个属性（每个按钮一个）。很好，只是想知道是否有更清洁的方法，使用循环以某种方式从 IB 收集每个按钮。想不出来。

```
 if (tagState == 1) {
        tagState = 2;
    }else {
        tagState = 1;
    }

    for (btn in myArray) {
        NSLog(@"%@",btn);
        if (tagState == 1) {
            if (btn.tag == 1) {
                [btn setHidden:YES];
            }
            if (btn.tag == 2) {
                [btn setHidden:NO];
            }

        } else if (tagState == 2) {
            if (btn.tag == 1) {
                [btn setHidden:NO];
            }
            if (btn.tag == 2) {
                [btn setHidden:YES];
            }

        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:10:45.673

你可以使用`IBOutletCollection`，它是一个`NSArray`网点。

例如，要隐藏集合中的所有出口，您可以使用

```
[outlets setValue:@YES forKey:@"hidden"] 
```

或者

```
[outlets setValue:[NSNumber numberWithBool:YES] forKey:@"hidden"] 
```

使用 LLVM < 4.0 时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:22:34.440

我认为您可以在这里非常有效地使用视图层次结构：将每组按钮放入自己的按钮中`UIView`，仅将三个按钮连接`UIView`到插座，然后隐藏/显示*它们*。请注意，这仅在您出于其他原因不需要访问各个按钮的情况下才有效。

# iphone - viewController 自动播放设定的时间，然后切换到下一个 viewContrllofer

> ID：11445243
> 
> 赞同：0
> 
> 时间：2012-07-12T05:00:17.610
> 
> 标签：iphone, ios4, xcode4, nstimer

嗨，我希望 viewController 出现一段时间，然后溶解到新的 viewController。可能使用 nstimer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:03:41.703

简单的方法是：

```
[self performSelector:@selector(toNewViewController:) withObject:nil afterDelay:timeInSeconds]; 
```

那是。您只需在 toNewViewController: 方法中编写视图控制器来查看控制器转换。

# django - 带有 Celery 的 django-socketio：异步任务在单独的进程中完成后发送到套接字

> ID：11445247
> 
> 赞同：5
> 
> 时间：2012-07-12T05:00:50.540
> 
> 标签：django, redis, django-celery, gevent

如何在我的主要 Django 应用程序进程中访问 Celery 任务的结果？或者，如何从单独的进程发布到现有的套接字连接？

我有一个应用程序，用户可以在其中收到分数。当记录分数时，会进行计算（目标进度等），并根据这些计算将通知发送给感兴趣的用户。计算可能需要 30 秒以上，因此为了避免 UI 缓慢，这些操作是通过 Celery 任务在后台进程中执行的，由我的 Score 模型的 post_save 信号调用。

理想情况下，我的 Nofication 模型上的 post_save 信号会向订阅的客户端发布一条消息（我正在使用 django-socketio，它是 gevent-socketio 的包装器）。这似乎很简单......

1.  创建乐谱
2.  在后台进程中对新的 Score 实例进行一些计算
3.  基于这些计算，创建一个通知
4.  在通知保存时，获取实例并通过套接字连接发布到订阅的客户端

但是，在尝试以下操作后，我不确定这是否可行：

*   将 gevent 的 SocketIOServer 实例传递给任务调用的回调方法，但这需要对传递的对象进行酸洗，这是不可能的

*   将套接字的 session_id（不同于 Django 的 session_id）存储在 memchache 中，并在 Celery 任务进程中检索它。

*   使用 Redis pubsub，因此在后台进程中创建的模型上由 post_save 信号调用的方法可以简单地发布到 Redis 通道，但是在主应用程序进程（可以访问套接字连接）中侦听聊天通道会阻塞应用程序的其余部分。

*   我还尝试为每个 Redis 客户端生成新线程，这些线程是为每个套接字订阅者创建的。据我所知，这需要生成一个新的 gevent.greenlets.Greenlet，并且 gevent 不能在多个线程中使用

当然，这是一个已解决的问题。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:42:34.447

你已经有了 django-socketio，用 redis 写一个 pub/sub 会很可惜 :)

客户端：

```
var socket = new io.Socket();
socket.connect();
socket.on('connect', function() {
    socket.subscribe({{ score_update_channel }});
}); 
```

服务器端：

```
from django_socketio import broadcast_channel
def user_score_update(user):
    return 'score_updates_user_%s' % user.pk

channel = user_score_update(user)
broadcast_channel(score_result_data, channel) 
```

您需要在 django-socketio 进程上运行广播；如果您从不同的进程（芹菜工作者）运行它，它将无法工作（通道由 django-socketio 进程在内存中引用）；您可以通过将其包装在视图中来解决此问题，并且当任务完成时 celery 将调用（发出真正的 http 请求）。

# ruby-on-rails - Rails：在下拉列表中选择错误

> ID：11445248
> 
> 赞同：0
> 
> 时间：2012-07-12T05:01:00.370
> 
> 标签：ruby-on-rails, select

这是我在视图文件中的内容：

```
<% users = {'John Doe' => 1, 'Jane Doe' => 2} %>
<% admins = [1,2,nil] %> 

<% i = 1 %>
<% admins.each do |user_id| %>
  <% org_struc_order = 'admin' + i.to_s %>
  <% org_struc_order_text =  'Admin ' + i.to_s%>
  <% if user_id %>
    <%= 'Current selection for ' + org_struc_order_text + ' is '+ users.key(user_id) %>
    <%= select( 'org_selections', org_struc_order, users, {:selected => users.key(user_id)}, { :include_blank => true } ) %>
  <% else %>
    <%= 'Select ' + org_struc_order_text + ' from dropdown' %>
    <%= select( 'org_selections', org_struc_order, users, { :include_blank => true } ) %>
  <% end %>
  <% i = i + 1 %>
<% end %> 
```

这是部分工作。显示表单时，在第一个和第二个选择下拉框中显示相同的值“John Doe”，但上面的标题是正确的。在第一个框上方，它说：

```
Current selection for Admin 1 is John Doe 
```

和选择框，我有：

```
John Doe 
```

在第二个框上方，它说：

```
Current selection for Admin 2 is Jane Doe 
```

但在选择框中，我看到：

```
John Doe 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:28:13.893

我认为这条线有问题，

```
<%= select( 'org_selections', org_struc_order, users, {:selected => users.key(user_id)}, { :include_blank => true } ) %> 
```

更正一个：

```
<%= select( 'org_selections', org_struc_order, users, {:selected => user_id}, { :include_blank => true } ) %> 
```

您正在传递用户名而不是选定值的 user_id。

# android - Unity3d Android 插件问题

> ID：11445250
> 
> 赞同：1
> 
> 时间：2012-07-12T05:01:08.503
> 
> 标签：android, c++, plugins, unity3d, dllnotfoundexception

我在尝试从 Unity Android 播放器访问我的共享库时收到 DllNotFoundException。我将 .so 文件放在文章[HERE](http://docs.unity3d.com/Documentation/Manual/PluginsForAndroid.html "这里")告诉我的 Assets->Plugins->Android 文件夹中。我运行 adb logcat 并查看了日志，这是错误的片段：

```
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
D/dalvikvm(27320): Trying to load lib /data/data/com.pheenixstudios.tankraigearena/lib/libwinsocklib.so 0x419ccfd0
E/Unity   (27320): Unable to find winsocklib
D/dalvikvm(27320): Trying to load lib /data/data/com.pheenixstudios.tankraigearena/lib/libwinsocklib.so 0x419ccfd0
E/Unity   (27320): Unable to find winsocklib
D/dalvikvm(27320): Trying to load lib /data/data/com.pheenixstudios.tankraigearena/lib/libwinsocklib.so 0x419ccfd0
E/Unity   (27320): Unable to find winsocklib
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
E/        (  532): inv_get_mag_rate
I/Unity   (27320): DllNotFoundException: winsocklib
I/Unity   (27320):   at (wrapper managed-to-native) NetworkFunctions:dllInit ()
I/Unity   (27320):   at AndroidNetworkController.Start () [0x00000] in <filename unknown>:0 
```

我提取了构建的 APK，winsocklib.so 文件位于 lib\armeabi-v7a 文件夹中。它拼写正确。我什至尝试将 lib 附加到文件名但无济于事。

这是仅用于附加上下文的 C# 代码：

```
[DllImport("winsocklib", CallingConvention = CallingConvention.Cdecl, EntryPoint = "dllInit")]
public static extern Double dllInit(); 
```

我还将其简化为：

```
[DllImport("winsocklib")]
public static extern Double dllInit(); 
```

此外，我制作了一个副本并将其放在 Assets->Plugins 中。我还尝试在不更改 c# 代码的情况下将两者都重命名为 libwinsocklib。还是一样的例外。

有没有人有任何想法？任何人都可以说明情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:18:07.153

想通了这个问题。我使用的是带有 Linux ABI 的 lib 构建，而不是 Android ABI。该库现在可以工作。

# web-services - 具有多个参数的 Web 服务调用

> ID：11445261
> 
> 赞同：2
> 
> 时间：2012-07-12T05:02:04.167
> 
> 标签：web-services, .net

在我的应用程序中，我正在调用基于 .Net 肥皂的 Web 服务。我的网络服务调用功能是：

```
function CallService5() {
            $.ajax({
                type: "POST",
                url: "http://10.0.2.2:51434/Service1.asmx/GetAllTableStatus",
        dataType: "json",
        data: "{}",

        contentType: "application/json; charset=utf-8",
        success: OnSuccess,
        error: OnError
        });
    } 
```

如何添加多个参数..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:16:08.313

我想你可以这样使用

```
var firstName = document.getElementById("txtFirstName").value;
var lastName = document.getElementById("txtLastName").value;
data : "{'firstName':firstName,'lastName':lastName}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:10:53.107

您可以在服务的 url 部分添加参数作为查询字符串

```
"http://10.0.2.2:51434/Service1.asmx/GetAllTableStatus?para =val" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:11:37.070

您阅读了以下文章：它提供了很好的解决方案..

[http://elegantcode.com/2009/02/21/javascript-arrays-via-jquery-ajax-to-an-aspnet-webmethod/](http://elegantcode.com/2009/02/21/javascript-arrays-via-jquery-ajax-to-an-aspnet-webmethod/)

[http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/)

# python - 使用 Scapy 解析数据包字节

> ID：11445268
> 
> 赞同：3
> 
> 时间：2012-07-12T05:02:44.473
> 
> 标签：python, scapy

我想使用 Scapy 解析数据包有效负载的前两个字节。实现这一目标的最佳方法是什么？是否需要偏移计算？

首先需要解析有效负载，尽管以下将解析整个 PCAP 文件，是否有更有效的方法来获取每个有效负载的前两个字节？[链接](http://www.packetstan.com/2010/11/packet-payloads-encryption-and-bacon.html)：

```
>>> fp = open("payloads.dat","wb")
>>> def handler(packet):
...     fp.write(str(packet.payload.payload.payload))
...
>>> sniff(offline="capture1.dump",prn=handler,filter="tcp or udp") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:05:59.847

我懂了。从这里看起来很有效。

您可能会尝试`fp.write(str(packet.payload.payload.payload)[:2])`仅获取前 2 个字节。

您也可以`fp.write(str(packet[TCP].payload)[:2])`跳过所有这些有效负载。

或者，您可以定义一个 SSL 数据包对象，将其绑定到适当的端口，然后打印 SSL 层。

```
class SSL(Packet):
  name = "SSL" fields_desc = [ ShortField("firstBytes", None) ]

bind_layers( TCP, SSL, sport=443 )
bind_layers( TCP, SSL, dport=443 )

def handler(packet):
... fp.write(str(packet[SSL])) 
```

...但这似乎有点矫枉过正。

# eclipse-rcp - Buckminster 在 Eclipse 中抛出未找到组件和 org.eclipse.core.runtime.CoreException 异常

> ID：11445272
> 
> 赞同：0
> 
> 时间：2012-07-12T05:03:48.590
> 
> 标签：eclipse-rcp, buckminster

我正在尝试使用 Buckminster 构建 Eclipse 产品。但是当我调用操作并选择 create.product.It 显示在 Buckminster 和 org.eclipse.core.runtime.CoreException 中找不到组件“插件名称”。如何解决这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:30:26.497

不是拖钓，但你应该切换到第谷，CBI 的基础（[http://wiki.eclipse.org/CBI](http://wiki.eclipse.org/CBI)）

以下是一些资源：

*   [http://www.eclipse.org/tycho/documentation.php](http://www.eclipse.org/tycho/documentation.php)
*   [http://www.vogella.com/articles/EclipseTycho/article.html](http://www.vogella.com/articles/EclipseTycho/article.html)

问候

# java - 单击Android中的按钮后如何从GridView中删除按钮？

> ID：11445274
> 
> 赞同：0
> 
> 时间：2012-07-12T05:04:15.483
> 
> 标签：java, android

我在 GridView 中添加了按钮，该按钮以编程方式添加，按钮的数量取决于字长每个按钮都有一个单词字符并在单击时隐藏该按钮，但我想在单击它时删除它。

这是代码

**SpellAdapter.java**

```
public class SpellAdapter extends BaseAdapter{

    public Context context;
    public char[] word;
        public String spellWord1;
    public SpellAdapter(Context context, char[] word, String orglWord)
    {
        this.context=context;
        this.word=word;
        spellWord1 = orglWord;
    }

    public int getCount() {
        count=word.length;
        return count;
    }

    public Object getItem(int position) {

        return null;
    }

    public long getItemId(int position) {

        return 0;
    }

    public View getView(final int position, View convertView, ViewGroup arg2) {

        View v = convertView;
        if (v == null) 
        {  
             LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             v = vi.inflate(R.layout.buttonlist, null);
        } 

        final Button btn= (Button)v.findViewById(R.id.letterbtn);

        btn.setText(word[position]+"");

        btn.setOnClickListener(new OnClickListener(){

            public void onClick(View v) 
            {
                letters=btn.getText();
                String word = letters.toString();
                btn.setVisibility(View.GONE); // Here invisible the button.

            }

        });

        return v; 
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:11:12.750

不要提供与 words.length 一样多的按钮。使用不同的数据结构，比如说一个布尔数组，它将保存每个按钮是否已经被点击过一次（在开始时都是假的）。

然后，当单击按钮时，切换布尔值。

在实现适配器的 getCount 方法时，循环遍历数组并计算任何指示按钮仍必须显示的标志。

Getview 会稍微复杂一点：您将收到一个索引，它将是您的数组中“假”的数量。所以计算它们并获得正确的按钮来显示。

# spree - 使用 iOS 应用创建订单以狂欢电子商务

> ID：11445275
> 
> 赞同：0
> 
> 时间：2012-07-12T05:04:21.507
> 
> 标签：spree

在我的应用程序中，我想通过 iPhone 应用程序在狂欢电子商务中订购产品。我很容易获得产品名称及其详细信息，但是在为产品创建订单时，它会在 html 页面中返回错误：

```
 <h1>
   TypeError
   in Spree::Api::V1::OrdersController#create
 </h1>
   <pre>can't convert Symbol into Integer</pre> 
```

我发送帖子请求为：

```
NSString *str = [NSString stringWithFormat:@"http://localhost:3000/api/orders"];
NSURL *urlForBuy = [NSURL URLWithString:[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:urlForBuy];
NSString *idVariant = [NSString stringWithFormat:@"order[line_items][%d][variant_id]",0];
NSString *qnty = [NSString stringWithFormat:@"order[line_items][%d][quantity]",0];
NSString *idVariantValue = @"123456";
[request setPostValue:[NSString stringWithFormat:@"%d",[idVariantValue intValue]] forKey:idVariant];
[request setPostValue:[NSString stringWithFormat:@"%d",1] forKey:qnty];
[request setPostValue:@"<my admin token>" forKey:@"token"];
[request setRequestMethod:@"POST"];
[request setDelegate:self];
[request setDidFinishSelector:@selector(buyResponse:)];
[request setDidFailSelector:@selector(buyResponse_failed:)];
[networkQueue addOperation:request];
[networkQueue go]; 
```

此外，我从 Spree 的 REST api 文档获得的这个网址是： http: [//guides.spreecommerce.com/rest.html](http://guides.spreecommerce.com/rest.html)

另一件事我想知道这个 url 中的 [line_items] 是什么......另外，除了上面的 url 之外，他们是否还有任何教程？......提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:06:49.880

订单是通过 API 通过传入订单项来创建的，如[本测试](https://github.com/spree/spree/blob/master/api/spec/controllers/spree/api/v1/orders_controller_spec.rb#L54-63)所示。

```
api_post :create, :order => { 
  :line_items => [
    { 
      :variant_id => variant.to_param,
      :quantity => 5 
    }
  ]
} 
```

该`line_items`参数应该是一个哈希数组，由一个`variant_id`和一个`quantity`字段组成。[文档](http://guides.spreecommerce.com/rest.html)说请求如下所示：

```
POST /api/orders?order[line_items][0][variant_id]=1&order[line_items[0][quantity]=5 
```

我希望这可以帮助您更好地理解它！

# red5 - 如何在moodle 2.2中使用流媒体视频

> ID：11445276
> 
> 赞同：1
> 
> 时间：2012-07-12T05:04:31.133
> 
> 标签：red5, moodle

我使用了 Moodle 2.2。我有一个视频流服务器用于Red5。我想用这个服务器在moodle上播放视频。

在 moodle 1.9 中，我发现了用于从 red5 服务器在 Moodle 上流式传输视频的 WebClass 插件。但是moodle 2.2，我还没有找到解决办法？

如何在moodle 2.2中使用流媒体视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:15:01.057

或者：http: [//incubator.apache.org/openmeetings/MoodlePlugin.html](http://incubator.apache.org/openmeetings/MoodlePlugin.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:35:10.453

您也可以使用蓝色大按钮，它使用 red5，它有 moodle 插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:19:24.697

您可以使用[http://moodle.org/plugins/pluginversions.php?plugin=mod_livestreaming](http://moodle.org/plugins/pluginversions.php?plugin=mod_livestreaming)

# java - IDEA不支持scala？

> ID：11445280
> 
> 赞同：-2
> 
> 时间：2012-07-12T05:05:41.317
> 
> 标签：java, scala, intellij-idea

想法：11.1.2 构建：#IU:117.418 **macbook**

compile err: javac: 输入的标志： /Users/shijinkui/workerspace/scalaTest/src/main/java/Test.scala

我发现 scala 编译器一直在工作。

谢谢。

截图：

![在此处输入图像描述](../Images/d638e2fb8b1f39218c0ec68b0c2f36e6.png)

![在此处输入图像描述](../Images/61c5249782bb43a74a7ca79ad5137841.png)

![在此处输入图像描述](../Images/babb4c03f50f3b80d68877040b0294cc.png)

![在此处输入图像描述](../Images/ee9a82ac6e30729aea483370b0b940e3.png)

![在此处输入图像描述](../Images/e805bdc8f7082056798ab096dc345bc8.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T05:08:02.300

也许您需要安装 Scala 插件？[http://plugins.intellij.net/plugin/?id=1347](http://plugins.intellij.net/plugin/?id=1347)

IntelliJ 中的 Scala 教程：http: [//confluence.jetbrains.net/display/SCA/Getting+Started+with+IntelliJ+IDEA+Scala+Plugin](http://confluence.jetbrains.net/display/SCA/Getting+Started+with+IntelliJ+IDEA+Scala+Plugin)

IntelliJ 中 Scala 的一般文档：http: [//confluence.jetbrains.net/display/SCA/Scala+Plugin+for+IntelliJ+IDEA](http://confluence.jetbrains.net/display/SCA/Scala+Plugin+for+IntelliJ+IDEA)

您的项目：

![在此处输入图像描述](../Images/7cfee8f0ea8869a2cd2ca6b1e959c389.png)

教程：

![在此处输入图像描述](../Images/9cfcb29cdd898f4de884ce42dddce9c6.png)

为什么它不起作用？：您**没有**按照教程进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:46:13.443

我已经解决了这个问题。

设置 --> IDE 设置 --> 文件类型 --> scala 文件 --> 添加注册模式

添加 *.scala

就这些。哈哈

# jsf - 图像显示使用jsp XHTML模板.. JSF

> ID：11445286
> 
> 赞同：0
> 
> 时间：2012-07-12T05:06:30.353
> 
> 标签：jsf, jstl

我编写了一个简单的代码来使用**Jsp XHTML 模板**显示图像，但它不工作，但当我使用**Jsp HTML 模板时同样工作。**...

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Car Details</title>
</head>
<body>
<f:view>
<h:graphicImage id="root" value="http://www.allbestwallpapers.com/tagwallpaper/convertible%20car-wallpapers.jpg"></h:graphicImage>
</f:view>
</body>
</html> 
```

请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:48:26.020

您将 JSP ( `foo.jsp`) 与 Facelets ( `foo.xhtml`) 混合在一起。

JSP 是古老的视图技术，在 JSF 1.x 中是默认的。它不是基于 XML 的。Facelets 是 JSP 的继承者，并且是自 JSF 2.0 以来的默认视图技术（并且 JSP 已被弃用）。Facelets 是基于 XML 的。那些`xmlns`XML 名称空间声明在 JSP 中不起作用，而仅在 Facelets 中起作用。

将文件名从`.jsp`扩展名重命名为扩展`.xhtml`名，去掉那个 JSP 特定的`@page`声明，它就可以工作了。

# android - Android - 设置 Roboguice 2.0？

> ID：11445287
> 
> 赞同：7
> 
> 时间：2012-07-12T05:06:30.563
> 
> 标签：android, guice, roboguice

我开始了一个新项目（在 Eclipse 经典中），添加`roboguice-2.0.jar` `guice-2.0-no-aop.jar`到`jsr305-1.3.9.jar`我的项目和构建路径中。

第一步是扩展RoboApplication，但是eclipse找不到这个类的匹配包。我查看了源代码，roboguice 的包是`roboguice.application.RoboApplication`不存在的。我的项目中没有roboguice下的应用程序。

我错过了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-17T18:35:38.167

因此，令人沮丧的是，roboguice 库的开发速度已经[超过了它的文档](https://groups.google.com/forum/?fromgroups#!topic/roboguice/fE7-TUGioJo)。新库中没有 RoboApplication 类。

相反，您应该删除该文件并在指向您的自定义 robo 模块的值中创建一个 roboguice.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
  <resources> 
    <string-array name="roboguice_modules">
    <item>com.mypackage.MyModule</item>
  </string-array>
</resources> 
```

此外，如果您在模块代码中使用 AbstractAndroidModule 或 RoboModule，则它现在称为 AbstractModule。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T04:02:46.023

如果您使用的是 RoboGuice 2，您应该使用 Guice 3 而不是 Guice 2！！！wiki 上有很多可用的文档。具体查看

[http://code.google.com/p/roboguice/wiki/InstallationNonMaven](http://code.google.com/p/roboguice/wiki/InstallationNonMaven)

[http://code.google.com/p/roboguice/wiki/UpgradingTo20](http://code.google.com/p/roboguice/wiki/UpgradingTo20)

# emacs - Emacs Lisp：将列表转换为字符串

> ID：11445291
> 
> 赞同：4
> 
> 时间：2012-07-12T05:07:26.523
> 
> 标签：emacs, elisp

我正在涉足 Emacs Lisp，我正在尝试编写以下函数：

```
(defun buffer-file-name-body ()
  (last (split-string (buffer-file-name) "/"))) 
```

我想要实现的是从`(buffer-file-name)`. 但是，此实现返回一个项目的列表`("scratch.el")`...我尝试了几件事，例如传递`(last)`through的结果，但这会引发错误...当我搜索*Emacs List convert list to string*`(string)`时，Google 没有返回任何有用的信息。我该怎么做？

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:28:46.990

在我看来，您想要的是`(file-name-nondirectory (buffer-file-name))`返回简单文件名，没有任何目录信息，作为字符串。*

# iphone - 让 uibutton 跳动。

> ID：11445298
> 
> 赞同：1
> 
> 时间：2012-07-12T05:07:56.560
> 
> 标签：iphone, ios, uibutton, uiviewanimation

我正在尝试通过在视图加载后来回更改 alpha 级别来使其中包含图像的 uibutton 缓慢脉动...

目前我正在这样做，但它什么也没做......

```
-(void)loopdyloop
{
    while ( myCount < 1000 )
    {

        [UIView animateWithDuration:3.0
                              delay:0.0f
                            options:UIViewAnimationCurveEaseOut
                         animations:^{

                             iconButton.alpha = 0.0;

                         } completion:^(BOOL finished) {
                             if (finished) {

                                 NSLog(@"animated");
                             }
                         }];

        [UIView animateWithDuration:3.0
                              delay:0.0f
                            options:UIViewAnimationCurveEaseOut
                         animations:^{

                             iconButton.alpha = 1.0;

                         } completion:^(BOOL finished) {
                             if (finished) {

                                 NSLog(@"animated");
                             }
                         }];

        myCount++;
    }

} 
```

这个方法是从 viewdidload 方法中调用的，

我知道这很粗糙，但这是我最好的尝试，如果您对我如何实现这一目标有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T08:44:20.763

如何在您的按钮层中应用它`viewDidLoad`：

```
CABasicAnimation *pulseAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
pulseAnimation.duration = .5;
pulseAnimation.toValue = [NSNumber numberWithFloat:1.1];
pulseAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
pulseAnimation.autoreverses = YES;
pulseAnimation.repeatCount = FLT_MAX;
[YOURButton.layer addAnimation:pulseAnimation forKey:nil]; 
```

你可以尝试一下。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T06:20:31.690

如果您希望它永远重复，您可以添加动画选项以自动反转和重复，如下所示：

```
[UIView animateWithDuration:3.0
                      delay:0.0f
                    options:UIViewAnimationCurveEaseOut | 
                            UIViewAnimationOptionRepeat | 
                            UIViewAnimationOptionAutoreverse
                 animations:^{
                     iconButton.alpha = 0.0;
                 } 
                 completion:^(BOOL finished) {
                     // You could do something here
                 }]; 
```

它会导致 alpha 首先动画到 0.0，然后回到原来的 (1.0)，然后一遍又一遍地做这两件事......

# publish-subscribe - 从 DDS 中删除阅读主题

> ID：11445299
> 
> 赞同：3
> 
> 时间：2012-07-12T05:07:57.590
> 
> 标签：publish-subscribe, data-distribution-service

我在订阅数据时遇到问题（使用 java 平台）。当订阅者订阅主题时，订阅的数据必须从 DDS 中删除。但就我而言，每当我订阅数据时，都会多次订阅相同的数据。数据不会从 DDS 中删除。我尝试了 QoS，但我不知道如何使用它。

请建议我如何从 DDS 中删除读取的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T22:46:16.817

此行为不是由您的 QoS 设置引起的，而是由您访问`DataReader`. 当您检索数据时，您可能会`read()`在循环中调用类似以下内容：

```
FooReader.read(
    dataSeq, infoSeq, 10,
    ANY_SAMPLE_STATE.value,
    ANY_VIEW_STATE.value,
    ANY_INSTANCE_STATE.value); 
```

像这样调用的`read()`方法将返回您的`FooReader`. 在 之后`read()`，这些样本在 中仍然可用`FooReader`，这就是该`read()`方法的行为方式。将阅读视为“偷看”。下次`read()`以这种方式调用该方法时，您将看到之前看到的所有样本，除非它们已被来自`DataWriter`.

要解决您的问题，您可以将 替换为`read()`，`take()`如下所示：

```
FooReader.take(
    dataSeq, infoSeq, 10,
    ANY_SAMPLE_STATE.value,
    ANY_VIEW_STATE.value,
    ANY_INSTANCE_STATE.value); 
```

该`take()`方法与该方法的不同之处`read()`在于它进行破坏性读取；它不仅会读取数据，还会将其从`FooReader`. 这样，您将永远不会收到两次相同的样品。事实上，如果你一直使用`take()`而不是`read()`，你将永远无法看到任何样本两次。

解决问题的另一种方法是坚持使用`read()`，但调整请求的`SAMPLE_STATE`，从`ANY`到`NOT_READ`，如下所示：

```
FooReader.read(
    dataSeq, infoSeq, 10,
    NOT_READ_SAMPLE_STATE.value,
    ANY_VIEW_STATE.value,
    ANY_INSTANCE_STATE.value); 
```

这样，您只会阅读以前未阅读过的样本。在这种情况下，不同之处`take()`在于数据确实在您的`FooReader`.样品）。`ANY``NOT_READ`

# iphone - 在 UITableView 中隐藏页脚视图

> ID：11445301
> 
> 赞同：22
> 
> 时间：2012-07-12T05:08:15.667
> 
> 标签：iphone, uitableview, ios5, footer

我一直在努力**隐藏页脚视图**。我的问题是，当我单击按钮时，页脚中有一个按钮部分更新后。

```
footerView.hidden = YES 
```

我在按钮操作中使用了它，但它不起作用。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-12T05:38:01.230

有四种解决方案。他们是，

**解决方案1：**

```
tableView.sectionHeaderHeight = 0.0;
tableView.sectionFooterHeight = 0.0;

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger )section {
    return 1.0;
}

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger )section {
    return 1.0;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger )section {
    return [[UIView alloc] initWithFrame:CGRectZero];
}

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger )section {
    return [[UIView alloc] initWithFrame:CGRectZero];
} 
```

**解决方案2：**

您可以通过尺寸选项卡下的界面构建器设置页脚/页眉高度。

**解决方案3：**

设置**contentInset**属性。

```
self.tableView.contentInset = UIEdgeInsetsMake(-20, 0, -20, 0); 
```

它用于使顶部和底部接触边缘。

**解决方案4：**

执行以下操作，根据您的条件设置值。0.0 将不被接受。较低的值应为 1.0。

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger )section {
    if(section == 0) {
       return 6;
    } else {
       return 1.0;
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger )section {
    return 5.0;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger )section {
    return [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
}

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger )section {
    return [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-12T05:11:36.123

这应该这样做

```
tableView.tableFooterView.hidden = YES; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-15T13:28:12.997

这可以通过实现委托方法来实现

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
  return CGFLOAT_MIN;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-09T14:31:28.543

参考@J.Hong 的回答，**Swift4**版本（iOS 11.3）：

```
func tableView(_ tableView: UITableView, heightForFooterInSection section: Int) -> CGFloat {
    return .leastNonzeroMagnitude
} 
```

与@Tim Newton 的回答相比：

*   没有必要打电话`titleForFooterInSection`
*   简化`CGFloat.leastNormalMagnitude`-> `.leastNonzeroMagnitude`（更 Swifty IMO）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-02T01:16:30.820

**Swift 3.0**解决方案还删除了前一个单元格和下一个标题之间的讨厌的 1px 边框。

```
override func tableView(_ tableView: UITableView, heightForFooterInSection section: Int) -> CGFloat {
    return CGFloat.leastNormalMagnitude
}

override func tableView(_ tableView: UITableView, titleForFooterInSection section: Int) -> String? {
    return nil
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-19T07:49:30.027

在 swift4 中：

```
self.tableView.tableFooterView = nil 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-25T16:27:48.860

不使用自定义视图时，`nil`从`tableView:titleForFooterInSection:`和`0`从`tableView:heightForFooterInSection:`.

```
@property(nonatomic, strong) NSString *footerTitle;
@property(nonatomic, assign) BOOL shouldHideFooter; 
```

```
- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section
{
    return self.shouldHideFooter ? nil : self.footerTitle;
}

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    return self.shouldHideFooter ? 0 : UITableViewAutomaticDimension;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-05-03T00:37:40.477

**Swift 5 解决方案：（**隐藏部分页脚，您可能需要另一块来摆脱表格页脚）

```
func tableView(_ tableView: UITableView, heightForFooterInSection section: Int) -> CGFloat {
    return 0.0
}

func tableView(_ tableView: UITableView, viewForFooterInSection section: Int) -> UIView? {
    return UIView()
} 
```

# vim - 如何浏览 Vim 文件历史记录

> ID：11445302
> 
> 赞同：4
> 
> 时间：2012-07-12T05:08:19.910
> 
> 标签：vim

我正在使用带有[MRU 插件](http://www.vim.org/scripts/script.php?script_id=521)的 Vim 7.3 。

使用此插件，当您键入时，您`:MRU`会看到一个包含最近使用文件的新窗口。这很酷，但我想要比这更具体的东西：

假设我只使用一个窗口。我首先打开文件 A，然后打开文件 B，然后打开文件 C。

现在我现在在文件 C 上，我想返回文件 B，然后通过击键返回文件 A，就像浏览器历史记录上的后退按钮一样。我也想继续前进，从文件 A 回到文件 B，最后回到文件 C，就像我在玩浏览器历史记录一样。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T05:17:05.027

Vim 会记录你在文件内和文件之间所做的最后 100 个[跳跃动作的列表。](http://vimdoc.sourceforge.net/htmldoc/motion.html#jump-motions)您可以使用`Ctrl`-`O`跳回之前的位置，以及`Ctrl`-`I`再次向前跳。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T07:26:05.343

文件 A、B 和 C 在 Vim 用语中称为“缓冲区”。您想要的是直接从缓冲区跳转到缓冲区的能力或选择要跳转到的缓冲区的能力。

从一个缓冲区跳转到另一个缓冲区很容易。它是通过`:b`命令或其表亲完成的：

```
:b filename<CR>         " jump directly to the named buffer
:b fil<tab>             " select from <tab>-navigable menu if
                        " more than one match, completes the 
                        " filename otherwise
:b <tab>                " select from <tab>-navigable menu
:2b                     " go to buffer number 2
:bfirst<CR>    (or :bf) " self-descriptive
:blast<CR>     (or :bl) " self-descriptive
:bnext<CR>     (or :bn) " self-descriptive
:bprevious<CR> (or :bp) " self-descriptive 
```

从列表中选择缓冲区也很容易：`:ls<CR>`显示一个编号的缓冲区列表并等待命令。此时，您键入`:b <number><CR>`或`:<number>b<CR>`跳转到选定的缓冲区。您可以将以下映射添加到您的`~/.vimrc`，以使整个过程更快：

```
nnoremap <leader>b :ls<CR>:b<space> 
```

还有[相当多的缓冲区切换插件](http://vim.wikia.com/wiki/Easier_buffer_switching#Scripts)可供您使用（页面的其余部分也充满了有趣的信息）。

如果可以，我会使用未列出的[CtrlP](http://www.vim.org/scripts/script.php?script_id=3736)，如果不能，则使用上面的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T09:43:26.960

我还强烈推荐使用 Tim Pope 的[Unimpaired](https://github.com/tpope/vim-unimpaired)插件，它可以让您使用`:bprev`和快捷方式，以及更多功能。`:bnext``[b``]b`

# vb.net - 将 Nullable 属性默认值设置为 Nothing 无法正常工作

> ID：11445303
> 
> 赞同：3
> 
> 时间：2012-07-12T05:08:34.950
> 
> 标签：vb.net, nullable, short-circuiting

我有一个类型为默认值的属性，`Nullable`如下`Integer`所示`Nothing`：

```
Property TestId As Integer? = Nothing 
```

以下代码将属性 TestId 评估为 Nothing（根据需要）

```
Dim test As RadTreeNode = rtvDefinitionCreate.FindNodeByValue(DefinitionHeaderEnum.Test)
If test Is Nothing Then
    definition.TestId = Nothing
Else
    definition.TestId = test.Nodes(0).Value
End If 
```

但下面的代码评估为 0 （默认值`Integer`，即使是`Integer?`默认值`Nothing`）

```
Dim test As RadTreeNode = rtvDefinitionCreate.FindNodeByValue(DefinitionHeaderEnum.Test)
definition.TestId = If(IsNothing(test), Nothing, test.Nodes(0).Value) 
```

上面的代码有什么问题？有什么帮助吗？？

（后面代码调用属性时，属性为0）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:38:23.000

这是因为您正在使用`Option Strict Off`.

如果你用 编译你的代码`Option Strict On`，编译器会给你一个错误，告诉你它不能从`String`to转换`Integer?`，避免在运行时出现这样的意外。

* * *

在 VB.NET 中使用`properties`//`ternary operator`时，这是一个奇怪的现象。`option strict off`

考虑以下代码：

```
Class Test
    Property NullableProperty As Integer? = Nothing
    Public NullableField As Integer? = Nothing
End Class

Sub Main()
    ' Setting the Property directly will lest the ternary operator evaluate to zero
    Dim b = New Test() With {.NullableProperty = If(True, Nothing, "123")}
    b.NullableProperty = If(True, Nothing, "123")

    ' Setting the Property with reflection or setting a local variable 
    ' or a public field lets the ternary operator evaluate to Nothing
    Dim localNullable As Integer? = If(True, Nothing, "123")
    Dim implicitLocal = If(True, Nothing, "123")
    b.NullableField = If(True, Nothing, "123")
    b.GetType().GetMethod("set_NullableProperty").Invoke(b, New Object() {If(True, Nothing, "123")})
    b.GetType().GetProperty("NullableProperty").SetValue(b, If(True, Nothing, "123"), Nothing)
End Sub 
```

* * *

另一个需要考虑的区别：

```
Dim localNullable As Integer? = If(True, Nothing, "123") 
```

将评估为`Nothing`但

```
Dim localNullable As Integer? = If(SomeNonConstantCondition, Nothing, "123") 
```

将评估为`0`

* * *

您可以创建一个扩展方法来为您完成令人讨厌的工作。

```
<Extension()>
Function TakeAs(Of T, R)(obj As T, selector As Func(Of T, R)) As R
    If obj Is Nothing Then
        Return Nothing
    End If
    Return selector(obj)
End Function 
```

并称它为

```
definition.TestId = test.TakeAs(Of Int32?)(Function(o) o.Nodes(0).Value) 
```

# dynamics-crm-2011 - CRM 2011 oData 查询混乱

> ID：11445304
> 
> 赞同：1
> 
> 时间：2012-07-12T05:08:59.490
> 
> 标签：dynamics-crm-2011, odata

我对 CRM 开发非常陌生，我正在尝试[关注这篇文章](http://www.toplinestrategies.com/dotneters/technology/microsoft-crm-2011-odata-examples/?lang=en)，我对下面的代码有点困惑，请检查：

```
var xp = Xrm.Page;  
function onLoad(context) {    
  var accountId = xp.data.entity.getId();

  var mostRecentQuery = "/XRMServices/2011/organizationData.svc/ContactSet? 
  $select=FullName,JobTitle,EMailAddress1,Telephone1&$top=1&$orderby=CreatedOn
 desc&$filter=ParentCustomerId/Id eq guid'" + accountId + "'"; 

  getContact(mostRecentQuery, "MostRecent");
  ....
  } 
```

上面的 javascript 函数在**AccountForm**打开时执行。第一行获取 accountId。下一行是 oData 查询。现在检查此查询中的**ContactSet**，**我在这里感到困惑，我们如何根据 AccountEntity 的 GUID 检索 ContactEntity？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:14:44.043

我找到了答案！

实际上在 ContactEntity 上有一个**Lookup** 'Parent Customer'，它代表了与此联系人关联的帐户或联系人的唯一标识符，因此我们可以选择一个 Account/Contact 作为联系人的父客户。

因此，这个给定的 OData 查询实际上检索了引用此帐户的前 1 个联系人。

我希望它清楚。

# ios - 应用程序必须遵循 iOS 数据存储指南，否则将被拒绝

> ID：11445308
> 
> 赞同：4
> 
> 时间：2012-07-12T05:09:37.773
> 
> 标签：ios, ipad, data-storage

我开发了一个应用程序，可以从网上下载 mp3 文件（大小接近 6 到 8 mb）并存储在 NSDocumentDirectory 中。我的应用程序今天被拒绝并说

```
"Apps must follow the iOS Data Storage Guidelines or they will be rejected"

 We found that your app does not follow the iOS Data Storage Guidelines, which is
 required per the App Store Review Guidelines. The iOS Data Storage Guidelines 
 indicate that only content that the user creates using your app, e.g., documents,
 new files, edits, etc., may be stored in the /Documents directory - and backed up
 by iCloud. 

 Temporary files used by your app should only be stored in the /tmp directory; 
 please remember to delete the files stored in this location when the user exits 
 the app. " 
```

我曾经将音乐文件存储在 NSDocumentDirectory 中。所以，这是我第一次这样做，我无法弄清楚实际问题。我应该怎么做才能重新提交我的应用程序以供接受。

这是我的代码

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

 NSString *documentsDirectoryPath = [[paths objectAtIndex:0]stringByAppendingPathComponent:[NSString stringWithFormat:@"psalmsMusic%d.mp3",i]];
NSLog(@"ddddddd psalmsMusic%d.mp3",i);
i++;

 NSLog(@"path %@",documentsDirectoryPath);
 [receivedData writeToFile:documentsDirectoryPath atomically:YES]; 
```

真的需要一些帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T05:24:11.110

我的应用程序出于同样的原因被拒绝，解决方案非常简单，而不是将下载的文件保存到 Documents 目录中，您必须将它们保存到缓存目录中，该目录是一个临时目录，不会备份到 iCloud 并且可以在某些情况下被操作系统随机删除...这是您将文件保存到缓存目录的方式

```
NSString *filePath = [[self applicationCachesDirectory] stringByAppendingPathComponent:fileName];

BOOL flag = [[NSFileManager defaultManager] createFileAtPath:filePath contents: receivedData attributes:nil]; 
```

**编辑**

```
NSString *filePath = [[self applicationCachesDirectory]  stringByAppendingPathComponent:[NSString stringWithFormat:@"psalmsMusic%d.mp3",i]];
NSLog(@"ddddddd psalmsMusic%d.mp3",i);
i++;
BOOL flag = [[NSFileManager defaultManager] createFileAtPath:filePath contents: receivedData attributes:nil];
if ( flag )
  NSLog("success"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T05:15:13.247

Apple 希望减少您的备份占用空间。

首先，停止使用文档。这不合适。

如果您能够相当容易地再次下载文件，则应将它们存储在不会备份的地方。我建议缓存。如果它们被清除，您应该重新下载它们。

如果很难再次下载它们，您应该将它们存储在 Library 文件夹中的其他位置。

您可以使用以下命令找到 Caches 目录：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(
                        NSCachesDirectory, NSUserDomainMask, YES); 
```

基本上，这就是你现在所拥有的，但不是`NSDocumentDirectory`你使用`NSCachesDirectory`.

如果您控制文件名，这很好。如果你不这样做，你可能应该创建一个子目录并从那里工作，这样你就不会与任何东西发生冲突。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T05:14:50.343

一旦 iCloud 在 Apple 中实现，文档目录数据就与 iCloud Storage 有某种关联。因此，Apple 现在拒绝在文档目录中使用大量数据存储的应用程序。

您需要将数据存储在其他位置。将 MP3 文件存储在其他位置。

此链接可能对您有所帮助。

[http://www.techotopia.com/index.php/Working_with_Directories_on_iOS_4_%28iPhone%29](http://www.techotopia.com/index.php/Working_with_Directories_on_iOS_4_%28iPhone%29)

我希望它能解决你的问题。

另一个正在跟随…………

iOS 数据存储指南指出，只有用户使用您的应用程序创建的内容，例如文档、新文件、编辑等，可以存储在 /Documents 目录中 - 并由 iCloud 备份。

您的应用程序使用的临时文件应仅存储在 /tmp 目录中；请记住在用户退出应用程序时删除存储在此位置的文件。可以重新创建但必须保留以使您的应用程序正常运行的数据 - 或者因为客户希望它可以离线使用 - 应该使用“不备份”属性进行标记。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。

有关详细信息，请参阅[http://developer.appcelerator.com/question/134926/ipad-app-rejected-ios-data-storage-guidelines](http://developer.appcelerator.com/question/134926/ipad-app-rejected-ios-data-storage-guidelines)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T05:15:37.697

您不能存储，`NSDocumentDirectory`因为此目录现在用于与 iCloud 同步。但是您可以使用`NSCachesDirectory`或使用临时目录作为存储音乐文件的苹果评论状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T05:18:11.237

指导方针说只有不能从互联网上重新创建（下载）的重要文件才应该进入文档目录，因为这是

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T06:15:53.980

根据 iOS 存储指南（可在[http://developer.apple.com/icloud/documentation/data-storage/](http://developer.apple.com/icloud/documentation/data-storage/)找到），您应该将所有用户生成的内容放在 Documents 目录中，并将所有可重新下载的内容放在缓存目录。所以你应该没问题把 sqLite 数据库放在那里。

这方面的背景是，从 iOS 5 开始，Documents 目录已备份到 iCloud。由于许多应用程序倾向于将其完整数据存储在那里，iCloud 备份变得相当大，这会占用可用空间并产生网络流量，这反过来又会激怒用户，因为他/她想知道为什么。为了缓解这种情况，Apple 现在似乎更仔细地查看了保存在 Documents 目录中的内容，以及这是否可能是可再生的内容（例如可下载的文件）。

请注意，当设备上的可用空间不足时，操作系统可以并且将在 iOS 5 上清除 Caches 目录。因此，您的应用程序不能再假设所有内容都像以前一样存在，而是每次访问缓存中的内容时都必须重新检查。

希望这可以帮助...！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-13T13:00:19.163

由于同样的原因，我的应用程序也被拒绝了 - (2.3)

尝试这个 -

NSString *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);

这样做的好处是，只要您的设备将与云同步，那时应用程序数据将不会同步，因为它在 NSCachesDirectory 而不是 NSDocumentDirectory 中。

缺点是，无论何时您将使用您的设备，并且您的设备内存较少。那么 CPU 可能会清除缓存以获取可用空间。因此，如果您有任何数据供离线使用，您可能会丢失。

2）如果你不能使用 NSCachesDirectory （可能是因为你的数据太重要了）那么你可以用这种方式 -

使用此方法并提供您的数据库路径 - 'addskipbackupattributetoitematurl'

浏览此链接 -[如何使用 addSkipBackupAttributeToItemAtURL API？](https://stackoverflow.com/questions/13498752/how-to-use-addskipbackupattributetoitematurl-api)

# git - 我可以将 git 配置为运行命令（推送时）吗？

> ID：11445312
> 
> 赞同：0
> 
> 时间：2012-07-12T05:10:29.083
> 
> 标签：git, build, automation, automated-tests, build-automation

我一直在使用托管 Git，并且非常喜欢它。

当我推送到我的 git 存储库时，我想自动运行单元测试，并且我希望这些测试能够在多台不同的机器上运行（它们在我打算支持的不同平台上）。

[将 git repos 设置为可以将代码推送到的服务器似乎](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)非常简单，但我知道没有简单的方法可以启动，例如`make && make test`当某些东西被推送到 repo 时。

我想出的替代方案是推送到存储库（我可以通过这种方式保留我的托管存储库），然后使用完全独立的方法在我的测试服务器上触发`git pull && make && make test`. 这可能更优雅，但我觉得这不是一个理想的解决方案。

我还想让我的服务器报告程序输出或至少一个返回值，这样我就可以判断测试是否失败。但这超出了这个问题的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:19:09.520

您想查看“更新后挂钩”。

[http://www.kernel.org/pub/software/scm/git/docs/githooks.html](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)

# c# - 在 C# 中从 gsm 调制解调器拨打电话

> ID：11445313
> 
> 赞同：2
> 
> 时间：2012-07-12T05:10:30.067
> 
> 标签：c#, serial-port, gsm, serial-communication, telecommunication

我想使用 C# 从 GSM 调制解调器拨打电话。我已经编写了以下代码。但我无法拨打电话。请告诉错误是什么。还让我知道如何处理来自调制解调器的代码中的响应，以便我可以显示“呼叫连接”或“无法连接”之类的消息。

```
private void button1_Click(object sender, EventArgs e)  
{  
    SerialPort po = new SerialPort();  
    po.PortName = "COM3";  
    po.BaudRate = int.Parse( "9600");  
    po.DataBits = Convert.ToInt32("8");  
    po.Parity = Parity.None;  
    po.StopBits = StopBits.One;  
    po.ReadTimeout = int.Parse("300");  
    po.WriteTimeout = int.Parse("300");  
    po.Encoding = Encoding.GetEncoding("iso-8859-1");  
    po.Open();  
    po.DtrEnable = true;  
    po.RtsEnable = true;  
    po.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);  
    po.Write("ATD9030665834;");  
}  
public void port_DataReceived(object sender, SerialDataReceivedEventArgs e)  
{  
    if (e.EventType == SerialData.Chars)  
    {  
            //what to write here to display the response??    
    }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:37:18.377

使用 port.WriteLine("ATD"+phno+";");

这绝对会解决你的问题..

并使用 port.ReadExisting() 处理响应并与您的要求进行比较。就这么简单:)

祝你好运..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:14:15.400

1.  确保您是否配置`po`与超级终端相同的配置，因为它与超级终端一起使用。超级终端设置通常如下： ![COM 端口设置](../Images/71796ffe931a4e4d350df9e1213a7e48.png)

如果它的流控制为 NONE，那么您不需要：

```
po.DtrEnable = true;         
  po.RtsEnable = true; 
```

我找不到使用设置编码。

您忘记的最重要的事情是**在任何 AT 命令的末尾添加“\r”**！看来您还没有阅读 AT 命令列表！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T07:52:42.413

```
private void button1_Click(object sender, EventArgs e)
        {
            SerialPort po = new SerialPort();
            po.PortName = "COM10";
            po.BaudRate = int.Parse("9600");
            po.DataBits = Convert.ToInt32("8");
            po.Parity = Parity.None;
            po.StopBits = StopBits.One;
            po.ReadTimeout = int.Parse("300");
            po.WriteTimeout = int.Parse("300");
            po.Encoding = Encoding.GetEncoding("iso-8859-1");
            po.Open();
            po.DtrEnable = true;
            po.RtsEnable = true;
            //po.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);
           // po.Write("ATD01814201013;");
            po.WriteLine("ATD01"+textBoxPhoneNumber.Text+";"+Environment.NewLine);
        } 
```

# android - 为 ProgressDialog 创建一个接口

> ID：11445322
> 
> 赞同：0
> 
> 时间：2012-07-12T05:11:01.907
> 
> 标签：android, interface, progressdialog, java

我正在编写一个`java-library`与 Android 客户端一起使用的

*   我执行一项可以显示 a 的工作**（**假设`ProgressDialog`使用`AsyncTask`）。
*   我不想通过库显示对话框，而是通过创建一个可以在应用程序层实现的接口（将包含在库中）来实现，即由使用该库并可以自己自定义对话框的开发人员来实现。（通过自定义我的意思是，界面可能会提供一些主题，可以通过传递`ENUM`一个函数或类似的东西来选择这些主题）

    我不知道该怎么做。任何人都可以将我推向正确的方向吗？

# jquery - 透明地将焦点处理程序绑定到由 Knockout.js 添加的新文本输入

> ID：11445327
> 
> 赞同：2
> 
> 时间：2012-07-12T05:11:39.380
> 
> 标签：jquery, html, css, knockout.js

我正在使用 Knockout.js 构建我的大部分 UI，并且我正在寻找一种整洁的方法来选择焦点上的任何输入 [type=text] 中的文本。在过去，我做过类似的事情：

$('input[type=text]').click(function() { $(this).select(); });

但是在 Knockout 范式下，新的输入一直在创建和删除以响应我的视图模型更改。我不想做太多的程序性事情来将处理程序重新绑定到新元素，我不想为我的模板中的每个输入实例添加点击绑定，我真的不想使用由于性能和其他缺点，jQuery 的 live 可以观看整个文档。

这些输入可以出现在我的模板层次结构中的所有级别。是否有一种干净的方法可以连接到由 Knockout 构建的任何新 DOM 结构以响应我的视图模型更改并透明地连接子输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:27:16.040

您可以编写自己的自定义活页夹来为您执行此操作，请查看有关如何执行此操作的[文档。](http://knockoutjs.com/documentation/custom-bindings.html)您可以扩展`value:`绑定并自己添加焦点部分，它应该可以解决问题。您需要在需要时用您的自定义值绑定替换所有当前值绑定。

# usb - hotplug如何被调用

> ID：11445329
> 
> 赞同：1
> 
> 时间：2012-07-12T05:11:46.070
> 
> 标签：usb

在 linux 嵌入式平台上调整 USB 插件行为，只是想知道热插拔功能是如何从内核“导出”的。我确实看到了 hotplug 的内核配置功能，只是想知道核心 usb 驱动程序中的 hotplug 钩子在哪里。

# ios - 无法用我的字符串填充 PickerView

> ID：11445331
> 
> 赞同：0
> 
> 时间：2012-07-12T05:11:54.727
> 
> 标签：ios, uipickerview, textfield, populate, inputview

单击文本字段时，我正在使用 inputView 显示 pickerView 。然后我想用数字 1-100 填充选择器视图。我有一些我认为可以工作的代码，但是当我运行程序并单击 textField 时，它只会弹出一个空的选取器视图。还需要知道如何在工具栏上放置另一个按钮。我想在右侧有一个提交按钮来确认用户的选择（将完成更改为取消）我必须在界面构建器中使用选择器和按钮做些什么吗？因为我实际上在界面构建器中没有这些，因为它们是用代码制作的......

下面是我的 .h 和 .m 文件。

。H - -

```
@interface TestinputviewViewController : UIViewController <UITextFieldDelegate,UIPickerViewDataSource,UIPickerViewDelegate> {

IBOutlet UITextField *textField;
NSMutableArray *pickerViewArray;
}
-(IBAction) textFieldDidBeginEditing;
@end 
```

.m---

```
 #import "TestinputviewViewController.h"

@implementation TestinputviewViewController

-(IBAction)textFieldDidBeginEditing{

UIPickerView *myPickerView = [[UIPickerView alloc] init];
textField.inputView = myPickerView;
myPickerView.showsSelectionIndicator = YES;
myPickerView.delegate = self;
myPickerView.dataSource = self;
    [myPickerView release];

UIToolbar *myToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,0,320,44)];
                        UIBarButtonItem *doneButton =     [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self   action:@selector(inputAccessoryViewDidFinish)];
[myToolbar setItems:[NSArray arrayWithObject:doneButton] animated:NO];
                        textField.inputAccessoryView =     myToolbar; 

}   

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)myPickerView {
return 1;
}

-(NSInteger)pickerView:(UIPickerView *) myPickerView numberOfRowsInComponent: (NSInteger)component {
return [pickerViewArray count];
}

-(NSString *)pikerView:(UIPickerView *) myPickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
return [pickerViewArray objectAtIndex:row];
}

// Implement viewDidLoad to do additional setup after loading the view, typically from a     nib.
- (void)viewDidLoad {
[super viewDidLoad];

pickerViewArray = [[NSMutableArray alloc] init];
for (int i = 1; i<=20; i++) {
    NSString *myString = [NSString stringWithFormat:@"%d%",i];
    [pickerViewArray addObject:myString];

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:23:20.050

您没有将选取器的委托设置为当前对象类。

利用

```
`myPickerView.delegate = self;`

 `myPickerView.dataSource = self;` 
```

分配选择器视图对象后。

继续..

# java - 在 C++ 中实现接口

> ID：11445334
> 
> 赞同：1
> 
> 时间：2012-07-12T05:12:17.490
> 
> 标签：java, c++, interface

我如何在 C++ 中做到这一点

```
interface ActionListener { void actionPerformed(); }
jButton.addActionListener(
    new ActionListener(){ void actionPerformed() { do something } }
); 
```

到目前为止，我知道这一点，

```
class ActionListener {
  public : 
    virtual ~ActionListener(){}
    virtual void actionPerformed() = 0;
} 
```

在此之后我该怎么做......任何关键字来做这种实现也会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T05:18:02.080

C++ 并没有像 Java 中那样真正具有匿名类。通常的事情就是声明一个继承自接口类的子类。你最接近 Java 的匿名类实例是这样的：

```
class : public ActionListener {
public:
    virtual void actionPerformed() {
        // do something
    }
} listener;
thing.addActionListener( listener ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:19:02.250

在 C++ 中没有其他事情可做。您可能希望在实现时使用[虚拟继承](http://en.wikipedia.org/wiki/Virtual_inheritance)，以避免最终使用多重继承时出现菱形继承问题：

```
class SomeActionListener : virtual public ActionListener{
  public : 
    virtual ~ActionListener();
    virtual void actionPerformed();
} 
```

在 C++11 中，还可以`override`用于方法实现。这会在编译时进行检查，以防您无意中输入了方法名称或 cv 限定符错误，在这种情况下您不会被覆盖：

```
class SomeActionListener : virtual public ActionListener{
  public : 
    virtual ~ActionListener();
    virtual void actionPerformed() override;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T06:55:16.410

“我如何在 C++ 中做到这一点？” - 看起来您正在尝试做的是在按钮中注册回调。在 C++ 中，您以不同的方式执行此操作：您不需要提供任何抽象类或接口（在 OO 意义上）。相反，您的按钮可能会提供以下用于注册回调的函数：

```
void Button::addActionListener(std::function<void()> callback); 
```

的类型`callback`是“任何可以用零参数调用并且不返回任何内容的函数、函数指针或引用”。然后你像这样注册你的回调：

```
cppButton.addActionListener( [&]{ do something; } );
// lambda 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T05:16:40.427

继承自`ActionListener`。

C++ 支持多重继承。Java 没有，所以它必须依赖接口。

# jquery - 填写Jquery自动完成

> ID：11445339
> 
> 赞同：0
> 
> 时间：2012-07-12T05:12:39.300
> 
> 标签：jquery, jquery-autocomplete

似乎找不到这个问题的答案，但也许是因为它太简单了。我正在尝试使用基于 Jquery UI 的自动完成功能，并且我正在使用他们的 remoteJson 数据源，您可以在其中输入内容并从源中提取数据列表。但是，当您单击自动完成时，即使它们存储了回调，它也不会将数据填充到您的文本框中。想知道如何配置它，以便在您单击自动完成后，它会自动为您完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:19:58.043

像这样试试

```
$( ".selector" ).autocomplete({
   select: function(event, ui) { ... }
}); 
```

您可以在中选择值`"ui.item"`

[参考这个链接](http://jqueryui.com/demos/autocomplete/)

如果你想用选定的值填充相同的文本框，你可以使用

```
$(this).value =  ui.item.label 
```

内部选择功能

# prolog - do循环中参数的目的

> ID：11445340
> 
> 赞同：1
> 
> 时间：2012-07-12T05:12:41.847
> 
> 标签：prolog

我正在从“Learn Prolog”一书中学习 Prolog。我是Prolog的新手。

我有知识库：

```
 transpose(Matrix, Transpose) :-
          dim(Matrix, [R, C]),
          dim(Transpose, [C, R]),
          ( foreachelem(E,Matrix,[I,J]),
             param(Transpose)
            do subscript(Transpose,[J, I], E ) ). 
```

跑：

```
Matrix=[]([](11,12),[](21,22),[](31,32)),transpose(Matrix,Transpose). 
```

结果：

```
Matrix = []([](11, 12), [](21, 22), [](31, 32))
Transpose = []([](11, 21, 31), [](12, 22, 32)) 
```

我不明白 的目的`param`。帮我理解。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:38:41.010

该变量`Transpose`列在其中，`param`以便它在`do/2`循环内可用。

将`do/2`调用视为宏。ECLiPSe 编译器将它们转换为辅助谓词。

因此，您的谓词`transpose/2`变成了这样：

```
transpose(Matrix, Transpose) :-
      dim(Matrix, [R, C]),
      dim(Transpose, [C, R]),
      do__1(..., Transpose).

do__1(..., Transpose) :- !.
do__1(..., Transpose) :- 
    ForelemGoals, 
    subscript(Transpose,[J, I], E ), 
    do__1(..., Transpose). 
```

我不知道`do__1`谓词到底是什么样的 for循环。`foreachelem`但是在任何情况下，`param`条目中的所有变量都被添加到头中的变量中`do__1`，以便它们在辅助谓词中可用。没有这个，你的谓词循环`Transpose`内的变量将与循环外的变量没有联系。`do/2``transpose/2``Transpose`

**编辑**：可以在 Krzysztof Apt 和 Mark Wallace 的“使用 ECLiPSe 进行约束逻辑编程”的第 7 章中找到对`do/2`ECLiPSe 中 -loops 的一个很好的介绍，包括相同的示例。`transpose/2`

# ios - ios UI 在 vi ewdidappear 期间无响应

> ID：11445341
> 
> 赞同：0
> 
> 时间：2012-07-12T05:12:59.723
> 
> 标签：ios, xcode, viewdidappear

我有一个表格视图，当用户选择一行时，我将它们推送到一个新的 ViewController。起初，我在 ViewDidLoad 方法中初始化了所有视图对象（涉及 Web 服务调用），但我看到它使我的 tableview 转换到我的新视图控制器的时间很长。

相反，我在 ViewDidAppear 方法中移动了大部分 UI 初始化，我喜欢它加快了从 tableview 到新 viewcontroller 的转换。

但是，在 ViewDidAppear 方法完成并加载 UI 之前，我无法按下屏幕顶部 NavigationBar 中的任何按钮（如后退按钮）。

解决方案是什么？是否有另一种方法可以让我加载我的 UI 而不会阻止用户与我的 NavigationBar 中的按钮进行交互？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T15:55:49.030

您可以使用大型中央调度来异步调用您的 Web 服务，这将使主线程上的 UI 保持响应。

```
//create new queue
dispatch_queue_t backgroundQueue = dispatch_queue_create("com.siteName.projectName.bgqueue", NULL);

//run requests in background on new queue
dispatch_async(backgroundQueue, ^{
    //insert web service requests here
}); 
```

这是一个更深入的教程：

[http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T16:05:20.327

你在主线程上做的太多了。卸载您的较长操作，例如 IO 或较长的计算，但请注意不要在后台线程中弄乱 UI。

只在主线程上触摸 UI。（请注意，有时它可能看起来很安全，但从长远来看，它总是最终会产生奇怪的问题）

一种简单的方法是使用 GCD：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0),^{
    //insert web service requests / computations / IO here 

    dispatch_async(dispatch_get_main_queue(),^{
        //back to the main thread for UI Work
    });
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-12T05:28:15.260

尝试使用以下方法在后台初始化您的 UI

```
[self performSelectorInBackground:@selector(initYourUI) withObject:yourObj]; 
```

您可以在`ViewDidLoad`

# web-services - 在 Chrome 扩展中使用 webservice 访问用户信息

> ID：11445345
> 
> 赞同：0
> 
> 时间：2012-07-12T05:13:25.353
> 
> 标签：web-services, google-chrome-extension

我想为 Chrome 做一个扩展，客户必须输入他们的用户名和密码。然后，他们可以通过扩展程序查看他们的帐户信息，而不是登录网站。

但首先我是开发 Chrome 扩展程序的初学者，然后在阅读了一些关于它的文章之后，现在我不知道我可以从哪里开始？

**其次，我的大问题是在我的扩展程序中使用 Web 服务，因为我必须获取客户用户/通行证并将它们发送到我的 Web 服务 (.net) 以获取信息。**

如果您给我您的想法/示例代码/教程/...，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:49:13.830

> 但首先我是开发 Chrome 扩展程序的初学者，然后在阅读了一些关于它的文章之后，现在我不知道我可以从哪里开始？

当然，从[hello worlds开始。](http://code.google.com/chrome/extensions/getstarted.html)我建议您刷新您对 HTML/CSS 和 Javascript 的了解，因为 Chrome 扩展程序本质上是本地网页。

但在您深入研究新技术之前，请考虑一下您是否真的需要将其作为 Chrome 扩展来执行。也许一组简单的网页会是更好（和跨浏览器）的选择？你真的需要 chrome.* API 吗？也许你可以分享一些额外的细节，比如你为什么决定首先使用 Chrome 扩展。

# gradle - gradle build does not include jars in classpath

> ID：11445346
> 
> 赞同：0
> 
> 时间：2012-07-12T05:13:27.570
> 
> 标签：gradle

everyone

here is the build script

```
apply{
    plugin 'java'
}

    sourceCompatibility=1.5

    List spring = ["org.springframework:spring-webmvc:$springVersion@jar",
                   "org.springframework:spring-orm:$springVersion@jar",
                   "org.springframework:spring-context-support:$springVersion@jar"]

    List spring_js = [ "org.springframework.webflow:spring-js:2.0.7.RELEASE@jar",
                       "org.apache.ibatis:com.springsource.com.ibatis:2.3.4.726@jar",
                       "com.caucho:com.springsource.com.caucho:3.2.1@jar",
                       "org.apache.axis:com.springsource.org.apache.axis:1.4.0@jar",
                       "javax.wsdl:com.springsource.javax.wsdl:1.6.1@jar"]

    configurations {
        compile {
            description = 'compile classpath'
            transitive = true
        }
        runtime {
            extendsFrom compile
        }
    }

    def localMavenRepo = 'file://' + new File(System.getProperty('user.home'), '.m2/repository').absolutePath

    repositories{
        mavenCentral()
        maven{
            url localMavenRepo
        }
    }

    dependencies{
        compile spring, spring_js, 'commons-fileupload:commons-fileupload:1.2.1','org.apache.struts:com.springsource.org.apache.struts:1.2.9',
                'javax.xml.rpc:com.springsource.javax.xml.rpc:1.1.0','org.apache.commons:com.springsource.org.apache.commons.dbcp:1.2.2.osgi',
                'commons-io:commons-io:1.3.2','hsqldb:hsqldb:1.8.0.7','org.apache.tiles:tiles-jsp:2.2.0','org.tuckey:urlrewritefilter:3.1.0',
                'org.apache.tiles:tiles-core:2.2.0'
        runtime 'javax.servlet:jstl:1.2','org.aspectj:aspectjweaver:1.6.5','javax.servlet:servlet-api:2.5','javax.servlet.jsp:jsp-api:2.1'
        testCompile 'junit:junit:4.6'
    } 
```

The jars are present in local maven repo but when I run gradle --info clean build the build fails with errors such as

```
/home/anadi/Code/gradle-samples/java-proj/gradleSpringJpetStore/src/main/java/org/springframework/samples/jpetstore/web/spring/SignonInterceptor.java:17: cannot find symbol
symbol  : class HttpServletResponse
location: class org.springframework.samples.jpetstore.web.spring.SignonInterceptor
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
                                                         ^
/home/anadi/Code/gradle-samples/java-proj/gradleSpringJpetStore/src/main/java/org/springframework/samples/jpetstore/web/spring/RemoveItemFromCartController.java:9: package org.springframework.web.util does not exist
import org.springframework.web.util.WebUtils;
                                   ^

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileJava'.
> Compilation failed; see the compiler error output for details.

* Try:
Run with --stacktrace option to get the stack trace. Run with --debug option to get more log output.

BUILD FAILED

Total time: 4.969 secs 
```

If I run the same build with maven it picks up all dependencies from the local repo and does a compile successfully. I also tried the --refresh-dependencies switch but no help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:44:27.360

As Benjamin said, you are probably missing a dependency declaration. Note that your use of `@jar` disables transitive dependency resolution. `@jar` means " I want just this Jar, not any of the dependencies declared in its POM".

The preferred way to declare the local Maven repo is `repositories { mavenLocal() }`. Unless you have some other build installing into the local Maven repository and this build pulling from it, it is neither recommended nor necessary to declare `mavenLocal()` though. Gradle is smart enough to automatically steal Jars from the local Maven repo (to avoid downloading them) if their checksum matches.

Your `configurations` block can be removed completely. All of that is already configured by the `java` plugin.

# vb.net - VS2010 中的拆分容器锚问题

> ID：11445348
> 
> 赞同：0
> 
> 时间：2012-07-12T05:13:52.230
> 
> 标签：vb.net, visual-studio-2010, datagridview, splitcontainer

我有多个项目，其中 UI 似乎在设计师中变得“腐败”。它似乎总是与拆分容器、DataGridViews 以及将 DGV 锚定在拆分容器内有关。似乎 DGV 锚不知何故变得不同步，并且 DGV 变得比它应该锚定的面板更大。这会导致 DGV 的一部分被切断，并且没有滚动条可用于查看其余部分。

有没有人遇到过这个，希望也找到了解决办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:21:17.047

解决方案是摆脱拆分容器。我开始记得我与设计器有问题的其他项目也包含一个拆分容器。

我在 Microsoft 网站上发现了一些关于此的错误报告，它们似乎已被掩盖。我有一种感觉，这是一个不太可能解决的已知问题。

# javascript - 将 get() 添加到行会导致“不是函数”错误

> ID：11445354
> 
> 赞同：0
> 
> 时间：2012-07-12T05:14:24.557
> 
> 标签：javascript, jquery

这是我正在研究的库存系统的开始。基本上，它采用压缩形式包含项目和数量的数组，并将项目输出到项目 div 中。

运行以下不会产生错误：

```
$('.item_amount').html(collection[itemName].amo); 
```

在选择器之后添加 get() 方法，如下所示：

```
$('.item_amount').get(i).html(collection[itemName].amo); 
```

产生“$(".item_amount").get(i).html 不是函数”。

这就是该行正在改变的内容：

```
 <div class="item">
        <img src="" class="item_image"/>
        <div class="item_amount"></div>
    </div> 
```

导致错误的行位于一个 for 循环中，该循环遍历数组中的所有键。然后根据存储在变量“i”中的索引从 item_amount div 中的数组中输出项目数量。for 循环还为数组中的每个项目创建一个对象，并将其放入一个集合对象中。

完整代码如下：

```
 <body>
    <div class="item">
        <img src="" class="item_image"/>
        <div class="item_amount"></div>
    </div>

    <div class="item">
        <img src="" class="item_image"/>
        <div class="item_amount"></div>
    </div>

    <div class="item">
        <img src="" class="item_image"/>
        <div class="item_amount"></div>
    </div>

<script type="text/javascript">
    var collection = new Object(); 

    function makeItem(itemName, id, amo) {
        collection[itemName] = new item(id, amo); 
    }

    function item(id, amo) { 
        this.id = id;
        this.amo = amo;

    }

    var inventoryCom = "368.9,366.15,384.32"; //compressed inventory
    var inventoryArr = inventoryCom.split(','); 

    for(var i=0; i < inventoryArr.length; i++) {

        var itemName = 'item' + (i + 1); //unique name for each item
        var itemArr = inventoryArr[i].split('.'); 

        makeItem(itemName, itemArr[0], itemArr[1]); 

        $('.item_amount').get(i).html(collection[itemName].amo);
           }

</script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:18:45.097

[`.get(i)`](http://api.jquery.com/get/)返回没有`.html()`方法的 DOM 元素——这就是 js 引擎想要对你说的。

你需要[`.eq(i)`](http://api.jquery.com/eq/)改用。喜欢

```
$('.item_amount').eq(i).html(collection[itemName].amo); 
```

或者

```
$('.item_amount:eq(' + i + ')').html(collection[itemName].amo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:20:02.233

这条线可能有问题

```
 var itemName = 'item' + (i + 1); // 
```

这可能会使数组计数超出上限。检查 itemName 值。

也尝试为此添加警报

```
 collection[itemName].amo 
```

# mysql - 为什么mysqld位于linux系统的4个地方？

> ID：11445357
> 
> 赞同：5
> 
> 时间：2012-07-12T05:14:38.113
> 
> 标签：mysql, linux

我在执行命令“# find / -name mysqld”时感到困惑。因为 mysqld 位于以下四个地方：

1.  /usr/libexec/mysqld
2.  /etc/rc.d/init.d/mysqld
3.  /var/lock/subsys/mysqld
4.  /var/运行/mysqld

另外三个mysql守护进程的目的是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T05:18:16.947

这里有以下解释

*   /usr/libexec/mysqld ：实际的二进制可执行文件
*   /etc/rc.d/init.d/mysqld ：服务启动文件（文本文件）
*   /var/run/mysqld : PID/run 文件夹（mysqld在这个文件夹中写入一个run文件）
*   /var/lock/subsys/mysqld：不确定

如果你运行`which mysqld`，你应该看到第一个

你永远不会直接运行它

当您运行时`service mysqld start`，它会调用`/etc/rc.d/init.d/mysqld`启动一个名为`mysqld_safe`(Run `which mysqld_safe`) 的程序。`mysqld_safe`并`mysqld`共同成为服务器守护进程。

反过来，`mysqld_safe`将启动 mysqld，然后检查退出代码。您可以运行`less /etc/rc.d/init.d/mysqld`并查看此内容。如果 mysqld 由于系统关闭或正常没有结束`service mysql stop`，mysqld_safe 将尝试重新启动`mysqld`。

# php - 需要创建 php 桌面应用程序

> ID：11445367
> 
> 赞同：0
> 
> 时间：2012-07-12T05:15:15.327
> 
> 标签：php, desktop-application

我想创建 php 内网聊天应用程序，我的意思是桌面应用程序。

可能吗？如果可能的话请告诉我该怎么做？请参阅任何教程链接。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:24:53.167

你可以看看这个：

[http://winbinder.org/index.php](http://winbinder.org/index.php)

形成常见问题解答：

> **什么是 WinBinder？**A. WinBinder 是一个新的开源扩展，它允许 PHP 程序员轻松构建原生 Windows 应用程序。
> 
> **为什么要使用 WinBinder？**A. WinBinder 封装了大量复杂的 Windows API，因此可以快速轻松地开发应用程序。由于 PHP 是一种脚本语言，您不需要编译任何东西，只需编写代码并运行即可。单击[此处](http://winbinder.org/why.php)获取更详细的说明。
> 
> **它要多少钱？**A. 什么都没有。WinBinder 以开源形式发布，这意味着它对家庭或商业用途完全免费。它的源代码也是免费提供的，并且包含在分发文件中。

此扩展包小于 5 MB 可供下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:19:41.237

还有一个叫做 PHP-Qt [http://sourceforge.net/projects/php-qt/](http://sourceforge.net/projects/php-qt/)

您可以使用 PHP 语言编写 Qt 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:17:57.953

如果您想将 PHP 用作桌面应用程序，也许它可以帮助您：

[PHP-GTK](http://gtk.php.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T05:19:23.337

它可能是错误的语言开始。

如果你真的很想试试这个：[GTK-PHP](http://gtk.php.net)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T06:30:59.623

PHP 是为创建动态网页而设计的，它做得很好。

我并不是说 PHP 不应该用于桌面应用程序，而是说 PHP-GTK 和 WinBinder 等工具对于严肃的应用程序开发来说还不够成熟。

在当前，最好还是坚持其他更适合桌面应用程序开发的语言。PHP 可能会在未来的版本中进入主流桌面应用程序开发，但我们将拭目以待。

# asp.net - 如何使用 Excellibrary 将数据集添加到工作表

> ID：11445374
> 
> 赞同：2
> 
> 时间：2012-07-12T05:16:23.360
> 
> 标签：asp.net, excellibrary

我必须在单个文件中添加多个工作表..我找不到将数据集添加到工作表的任何方法，但我知道如何添加工作表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T05:38:29.553

尝试这个。

```
using System;
using System.Data;
using System.IO;
using ExcelLibrary.SpreadSheet;

namespace ExcelLibrary
{
  /// <summary>
   /// Provides simple way to convert Excel workbook into DataSet
  /// </summary>
 public sealed class DataSetHelper
 {
    /// <summary>
    /// Populate all data (all converted into String) in all worksheets 
    /// from a given Excel workbook.
    /// </summary>
    /// <param name="filePath">File path of the Excel workbook</param>
    /// <returns>DataSet with all worksheet populate into DataTable</returns>
    public static DataSet CreateDataSet(String filePath)
    {
        DataSet ds = new DataSet();
        Workbook workbook = Workbook.Load(filePath);
        foreach (Worksheet ws in workbook.Worksheets)
        {
            DataTable dt = PopulateDataTable(ws);
            ds.Tables.Add(dt);
        }
        return ds;
    }

    /// <summary>
    /// Populate data (all converted into String) from a given Excel 
    /// workbook and also work sheet name into a new instance of DataTable.
    /// Returns null if given work sheet is not found.
    /// </summary>
    /// <param name="filePath">File path of the Excel workbook</param>
    /// <param name="sheetName">Worksheet name in workbook</param>
    /// <returns>DataTable with populate data</returns>
    public static DataTable CreateDataTable(String filePath, String sheetName)
    {
        Workbook workbook = Workbook.Load(filePath);
        foreach (Worksheet ws in workbook.Worksheets)
        {
            if (ws.Name.Equals(sheetName))
                return PopulateDataTable(ws);
        }
        return null;
    }

    private static DataTable PopulateDataTable(Worksheet ws)
    {
        CellCollection Cells = ws.Cells;

        // Creates DataTable from a Worksheet
        // All values will be treated as Strings
        DataTable dt = new DataTable(ws.Name);

        // Extract columns
        for (int i = 0; i <= Cells.LastColIndex; i++)
            dt.Columns.Add(Cells[0, i].StringValue, typeof(String));

        // Extract data
        for (int currentRowIndex = 1; currentRowIndex <= Cells.LastRowIndex; currentRowIndex++)
        {
            DataRow dr = dt.NewRow();
            for (int currentColumnIndex = 0; currentColumnIndex <= Cells.LastColIndex; currentColumnIndex++)
                dr[currentColumnIndex] = Cells[currentRowIndex, currentColumnIndex].StringValue;
            dt.Rows.Add(dr);
        }

        return dt;
    }

    /// <summary>
    /// Populate all data from the given DataSet into a new Excel workbook
    /// </summary>
    /// <param name="filePath">File path to new Excel workbook to be created</param>
    /// <param name="dataset">Source DataSet</param>
    public static void CreateWorkbook(String filePath, DataSet dataset)
    {
        if (dataset.Tables.Count == 0)
            throw new ArgumentException("DataSet needs to have at least one DataTable", "dataset");

        Workbook workbook = new Workbook();
        foreach (DataTable dt in dataset.Tables)
        {
            Worksheet worksheet = new Worksheet(dt.TableName);
            for (int i = 0; i < dt.Columns.Count; i++)
            {
                // Add column header
                worksheet.Cells[0, i] = new Cell(dt.Columns[i].ColumnName);

                // Populate row data
                for (int j = 0; j < dt.Rows.Count; j++)
                    worksheet.Cells[j + 1, i] = new Cell(dt.Rows[j][i]);
            }
            workbook.Worksheets.Add(worksheet);
        }
        workbook.Save(filePath);
    }
}
} 
```

来自[code.google.com](http://code.google.com/p/excellibrary/source/browse/trunk/src/ExcelLibrary/DataSetHelper.cs?r=52) 样式和颜色

```
HSSFCellStyle style1 = hssfworkbook.CreateCellStyle();

// cell background
style1.FillForegroundColor = NPOI.HSSF.Util.HSSFColor.BLUE.index;
style1.FillPattern = HSSFCellStyle.SOLID_FOREGROUND;

// font color
 HSSFFont font1 = hssfworkbook.CreateFont();
 font1.Color = NPOI.HSSF.Util.HSSFColor.YELLOW.index;
 style1.SetFont(font1);

cell.CellStyle = style1; 
```

有关更多详细信息，请参阅这篇文章[如何使用 ExcelLibrary 更改 Excel 文件中的单元格样式？](https://stackoverflow.com/questions/3117227/how-can-i-change-cell-style-in-an-excel-file-with-excellibrary)

# iphone - 如果我在横向中停止视频，应用程序方向将更改为横向

> ID：11445377
> 
> 赞同：1
> 
> 时间：2012-07-12T05:17:02.283
> 
> 标签：iphone, vimeo, movieplayer

我正在开发一个应用程序，其中我在屏幕上嵌入了一个 iframe 以显示来自 vimeo.com 的视频的缩略图。一切都很完美，但是当我点击播放视频时，它会调用 iPhone 的默认电影播放器​​，然后我将 iPhone 旋转到横向并以横向模式播放视频。但是，如果视频以横向模式结束，那么屏幕（我在其上添加了 vimeo iframe）也会以横向模式旋转。我只需要以纵向修复它，但视频应该以纵向和横向两种模式播放。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:54:10.577

当我们以这种方式播放视频时，iPhone 内置的视频播放器会被调用，它属于“mpinlinevideoviewcontroller”类。我们无法控制它的功能。所以我设置

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return YES;
} 
```

在包含 web 视图的视图控制器中，现在只有应用程序的这个屏幕支持所有方向，因此我的问题被删除（但没有解决）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:31:28.423

将此方法放在您的所有视图控制器中以强制它们始终保持纵向模式

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:54:49.357

一种可能的方法是：当您的播放器停止播放时，只需调用此函数。

```
 -(void)setupOrientaion
    {

    [[UIDevice currentDevice] setOrientation:UIDeviceOrientationPortrait];  
    } 
```

或者在这里发布您的代码。分析起来会更有帮助。

# c# - 使用 LINQ (C#) 实现分页？

> ID：11445379
> 
> 赞同：3
> 
> 时间：2012-07-12T05:17:06.570
> 
> 标签：c#, sql-server, linq, sql-server-2008, linq-to-sql

我是数据库应用程序的新手。

我想以较低的内存占用实现分页。该应用程序连接到 MS SQL Server 2008 R2 DB。

我拥有的表包含数千条记录，应用程序可以查询具有给定条件的记录。

当前实现使用 LINQ-SQL 进行查询，整个数据将返回应用程序。如果查询返回太多结果，这可能会耗尽进程内存。因此，我想将其实现为页面。

我在网上遇到了一些可以对数据进行分页的存储过程。

我不确定标准分页是否可以帮助我满足以下要求

*   减少内存占用，按需返回所需的结果。
*   保留查询状态。当用户查看视图中的数据时，可以更新相同的记录。因此，无论表的当前状态如何，但与最后一个查询有关，都必须维护状态和结果数量。
*   如果使用 LINQ 实现分页，这会加载进程来存储整个结果吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T05:57:20.793

使用 Linq 分页不是问题，您可以使用`Take()`和`Skip()`

```
var page = list.Skip((pageNo - 1) * pageSize)
               .Take(pageSize) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T05:20:37.673

网格视图控件具有以下特点：

*   Linq 2 SQL 支持
*   使用 Linq 2 SQL 自定义分页
*   显示排序方向
*   分页器中的下拉菜单以调整页面中的记录数

[**LINQ TO SQL GridView（增强的 Gridview）**](http://www.codeproject.com/Articles/93253/LINQ-TO-SQL-GridView-Enhanced-Gridview)

# asp.net - IE 中的背景选项卡未处于活动状态

> ID：11445380
> 
> 赞同：0
> 
> 时间：2012-07-12T05:17:16.353
> 
> 标签：asp.net, ajax, session

我有一个 Web 应用程序，它在后台运行 AJAX 脚本以保持会话活动。

AJAX 请求发送到服务器，服务器将当前日期时间回复给客户端。该日期时间显示在状态栏中。

当浏览器只打开 1 个选项卡或应用程序是活动选项卡时，这一切都很好。但是，如果该应用程序成为后台选项卡（其他一些选项卡处于活动状态/焦点），它将不会使会话保持活动状态。

我已经下载了 Fiddler 并查看了 HTTP 请求，我可以看到请求正在进行并以正确的日期时间回复。

我注意到的一件事：当我将标签保留在后台时，等待几分钟然后回来，状态栏会显示旧的日期时间（我将标签放在后台的日期时间），直到它超过预定的时间。但是，当我检查 Fiddler 时，请求/响应一直在工作。

有谁知道发生了什么？即使应用程序选项卡在后台，客户端不应该发送足以保持会话活动的请求吗？

# jquery-ui - jQuery自动完成：如何启用缓存？

> ID：11445384
> 
> 赞同：0
> 
> 时间：2012-07-12T05:17:26.070
> 
> 标签：jquery-ui, autocomplete

这是我使用函数推送建议数组的源代码：

```
jQuery(document).ready(function ($){
    var cache = {};
    function split( val ) {
        return val.split( /,\s*/ );
    }

    function extractLast( term ) {
        return split( term ).pop();
    }

    $("#ctags-input")
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })

    .autocomplete({ 

        source: function(req, add){
            var ctags_action = 'suggest_tags';

            var term = req.term;
            if (term in cache) {
               add(cache[term]);
               return;
            }

    $.getJSON(SuggestTags.url+'?callback=?&action='+ctags_action, req, function(data) {
                var suggestions = [];
                $.each(data, function(i, val){                              
                    suggestions.push({
                        label: val.name,
                        count: val.count
                    });
                });
                cache[term] = suggestions;  
                add(suggestions);

            });
        },          
        focus: function() {
            return false;
        },

        select: function( event, ui ) {
            var terms = split( this.value );
            terms.pop();
            terms.push( ui.item.value );
            terms.push( "" );
            this.value = terms.join( ", " );
            return false;
        }   
    })

    .data( "autocomplete" )._renderItem = function( ul, item ) {        
        return $("<li></li>")
        .data("item.autocomplete", item)
        .append("<a>" + item.label + " (" + item.count+ ")</a>")        
        .appendTo(ul);
    };      
}); 
```

为了添加缓存能力，jQ UI 站点演示直接使用响应数据：

```
source: function( request, response ) {
   var term = request.term;
    if ( term in cache ) {
      response( cache[ term ] );
      return;
    }

   lastXhr = $.getJSON( "search.php", request, function( data, status, xhr ) {
    cache[ term ] = data;
    if ( xhr === lastXhr ) {
        response( data );
    }
 });
} 
```

如何在我的代码中实现这个缓存演示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:39:27.257

放入`suggestions`缓存。

```
var term = req.term;
if (term in cache) {
   add(cache[term]);
   return;
}
...
cache[term] = suggestions;
add(suggestions); 
```

# html - 表格高度百分比不起作用

> ID：11445387
> 
> 赞同：1
> 
> 时间：2012-07-12T05:17:31.643
> 
> 标签：html, css, mobile, tablelayout

我正在开发一个移动网站并尝试使用非常简单的标记。

下面是我的代码，这给我带来了问题：

```
<div class="abc">
  <div>&nbsp;</div>
  <table>

  </table>
</div> 
```

CSS

```
.abc {height:some-dynamic-value-in-px}

.abc div {height:5%;}
.abc table {height:95%;} 
```

问题是这段代码适用于所有最新的手机。但是当我检查索尼爱立信（500i）时，表格高度来自父 div abc，并且 UI 被扭曲。我检查了这个网站[http://www.apptools.com/examples/tableheight.php](http://www.apptools.com/examples/tableheight.php) 并给身体高度 {100%} 但仍然没有成功。请让我知道我哪里出错了。

此外，当我以 px 为单位给出高度时，它适用于所有手机。但我想知道百分比不起作用的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:29:50.790

如果您已经知道 div 的高度，那么最好在`px`.

如果没有必要，尽量***避免****复杂性。*

对于某些浏览器来说，给予`body { height: 100%; }`可能还不够。

```
html, body { height: 100%; }

.abc { height:100%; }
.abc div { height:5%; }
.abc table { height:95%; } 
```

另外，不要忘记在您的网页上包含**DOCTYPE 。**

# javascript - 如何在 JSF 中将 toDataURL 方法返回的画布内容存储为磁盘上的图像

> ID：11445389
> 
> 赞同：3
> 
> 时间：2012-07-12T05:17:44.463
> 
> 标签：javascript, html, jsf-2

我已经使用 svg 和 javascript 创建了图像，我希望用户能够保存它。如何将其发送到 bean 并保存？

**查看代码：**

```
<script>
        var svg = $('#map').html().replace(/>\s+/g, ">").replace(/\s+</g, "<");
            // strips off all spaces between tags

            canvg('cvs', svg, {        
                ignoreMouse: true, 
                ignoreAnimation: true
            });  
         var canvas  = document.getElementById('cvs');
         var img = canvas.toDataURL("image/png"); 
   </script> 
```

* * *

```
<h:body>
        <center><div id="map"></div></center>
        <a href="#" id="saveBtn">SAVE</a>
        <canvas id="cvs" width="0" height="0" ></canvas>​  
        <h:form id="formId">
            <h:inputText id="inputId" value="#{bean.property}" />
            <h:commandButton id="buttonId" value="Button" action="#{bean.action}" />
        </h:form>
    </h:body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T00:38:31.917

您可以通过隐藏的输入字段将 dataURL 发送到支持 bean，如下所示：

```
 <h:form>
    <h:inputHidden id="dataURL" value="#{userBean.dataURL}" />
    <h:commandButton value="Submit" action="#{userBean.submit}"/>
 </h:form> 
```

并从您的 javascript 中设置 inputHidden 值的值，如下所示：

```
var dataURL = canvas.toDataURL("image/png");
var hidden = document.getElementById("dataURL");
hidden.value = dataURL; 
```

更新： toDataURL 方法返回一个字符串，您可以在支持 bean 中保存与字符串相同的字符串，该字符串是 base64 编码的，因此可以将其解码回图像并保存到 webapp 根目录的磁盘：

```
public class UserBean implements Serializable {
    private String dataURL;
    public String getDataURL() {
    return dataURL;
}
public void setDataURL(String dataURL) {
    this.dataURL = dataURL;
}
    public void submit(){
      ExternalContext external = FacesContext.getCurrentInstance().getExternalContext();
      ServletContext servletContext = (ServletContext) external.getContext();
      String filename = servletContext.getRealPath("cloud.png");
      BASE64Decoder decoder = new BASE64Decoder();
      byte[] decodedBytes = decoder.decodeBuffer(dataURL.split("^data:image/(png|jpg);base64,")[1]);
      BufferedImage imag=ImageIO.read(new ByteArrayInputStream(decodedBytes));
      ImageIO.write(imag, "png", new File(filename));
    }
} 
```

# android - Android jelly bean 4.1 systrace 工具

> ID：11445399
> 
> 赞同：1
> 
> 时间：2012-07-12T05:18:50.130
> 
> 标签：android, android-4.2-jelly-bean, systrace

如何在 android jelly bean 4.1 中使用 systrace 工具在 windows 7 32 位操作系统上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:40:20.503

查看 developer.android.com 网站上最近发布的 Systrace 文档：

*   [http://developer.android.com/tools/debugging/systrace.html](http://developer.android.com/tools/debugging/systrace.html)
*   [http://developer.android.com/tools/help/systrace.html](http://developer.android.com/tools/help/systrace.html)

那应该让你开始。

# web-services - SOAP 标头与 HTTP 标头

> ID：11445400
> 
> 赞同：32
> 
> 时间：2012-07-12T05:18:51.627
> 
> 标签：web-services, soap, http-headers, soapheader

我正在开发一个使用 Web 服务的程序，为此我需要将一些数据包装为消息的标题。

我想问一下，将这些数据作为 SOAP 标头还是 HTTP 标头是否等效？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-14T07:51:17.620

[SOAP 标头](http://www.w3.org/TR/soap12-part1/#soaphead)包含与 SOAP 消息相关的应用程序特定信息。它们通常包含路由信息、身份验证信息、事务语义等。这些特定于 SOAP 消息并且独立于 SOAP 使用的传输（在本文的范围内：HTTP）。

[HTTP 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)定义了 HTTP 事务的操作参数，例如传输内容的内容类型、内容长度、客户端或代理的缓存指令等。这些是特定于 HTTP 的，独立于通过 HTTP 实际传输的内容（在这种情况下是 SOAP XML）。

当然，您可以同时使用 HTTP 标头或 SOAP 标头来提供有关 SOAP 消息的应用程序特定信息。 [SOAPAction HTTP 标头](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528)是 SOAP 1.1 朝这个方向迈出的一步。尽管对于服务器而言无需查看 SOAP XML 内部就可以有效地路由消息很有用（如果消息被加密并且只有最终接收者知道如何解密它有时是不可能的），但它主要引起了混乱，后来在 SOAP 1.2 中被删除（取而代之的是[type](http://www.ietf.org/rfc/rfc3902.txt)`action`的一个可选参数，它又是 HTTP 标头中的一个值......哦，好吧......：D）。[`application/soap+xml media`](http://www.ietf.org/rfc/rfc3902.txt)

总而言之，**SOAP 标头和 HTTP 标头并不相同**。尽管在某种程度上您可能会用用户定义的自定义 HTTP 标头替换 SOAP 标头，但大多数时候这是一个坏主意。

如果数据用于 Web 服务，则应将其放在 SOAP 标头内。HTTP 标头通常停在 Web 服务器上，而整个 SOAP 消息将向下传递到需要数据的最终接收者（甚至可能通过他们可能也需要数据的更多中介）。

# .net - 获取访问者 IP 地址

> ID：11445409
> 
> 赞同：0
> 
> 时间：2012-07-12T05:19:40.633
> 
> 标签：.net

我想获取访问者的 IP 地址。

哪一种适合使用：

```
Request.ServerVariables("REMOTE_ADDR") 
```

或者

```
Request.UserHostAddress 
```

哪一个是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T08:13:02.100

它们完全一样。`UserHostAddress`简单地调用`GetRemoteAddress`.

```
public string UserHostAddress
{
    get
    {
        if (this._wr != null)
        {
            return this._wr.GetRemoteAddress();
        }
        return null;
    }
}

public override string GetRemoteAddress()
{
    return this.GetServerVariable("REMOTE_ADDR");
} 
```

从 .NET Framework 1.0/1.1 开始也支持两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:21:47.550

两者都将返回与 IP 地址相同的值，我更喜欢 Request.UserHostAddress，因为 .net 框架 1.0 到 4.5 绝对支持它

看看： [MSDN](http://msdn.microsoft.com/de-de/library/system.web.httprequest.userhostaddress%28v=vs.110%29.aspx)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-12T05:29:43.487

尝试使用

`phpinfo();`

它应该为您提供类似 REMOTE_ADDR 的内容，这是您需要在 php 脚本中获取的变量。这应该从网络服务器传递到您的 PHP 脚本。

然后使用：

```
$ip = getenv('REMOTE_ADDR'); 
```

# php - php邮件功能-上传简历并作为附件发送

> ID：11445411
> 
> 赞同：0
> 
> 时间：2012-07-12T05:19:49.650
> 
> 标签：php, email

我有一个 php 网站。在这里我有表格上传用户的简历（必须在一个世界文件中），并将这个文件和用户信息邮寄给管理员。我使用了 PHP4 邮件功能。

我将如何使用这个附加的世界文件编写 php 邮件功能

请回复

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:28:14.727

像这样的东西？

```
 function attachdir(){

 $dir = 'uploaded_photos/';//resume folder
        // save pdf in directory
        $pdf->Output($dir . $filename);// filename of the document
        $data = $pdf->Output("", "S");
        $usersubname  = $this->input->get('userName');
        $userid       = $this->input->get('userId');
        $LeaderId = $this->input->get('LeaderId');
        $pass         = $this->input->get('password');
        $to           = $this->input->get('email');
        $this->smtpmailer($to, $usersubname, $dir, $filename, $userid, $LeaderId, $pass);
        unlink($dir . $filename);

    }

    function smtpmailer($to, $usersubname, $dir, $filename, $userid, $LeaderId, $pass)
    {
        $subject = $userid;
        $message = '<html><body>';

        $message .= "Hello  , <br><br>";
        $message .= "$usersubname,hii, resume attached along with this mail";
        $message .= "</body></html>";

        //$mailDetials  =   $this->adminmodel->mailDetials();
        $adminusername = 'XXXXXXXXXXXX';
        $adminpassword = 'XXXXXXXXXXXX';
        $adminhost     = "stmp.gmail.com";
        $adminport     = 465;
        $adminmail     = 'XXXXXXXXXXXX@gmail.com';
        $adminEmail    = 'XXXXXXXXXX@gmail.com';
        $to            = $to;

        require_once('./phpmailer/class.phpmailer.php');
        global $error;
        $mail = new PHPMailer(); // create a new object
        $mail->IsSMTP(); // enable SMTP
        $mail->Mailer     = "smtp";
        $mail->Host       = "smtp.gmail.com";
        $mail->SMTPSecure = "ssl"; //ssl or tls
        $mail->SMTPDebug  = 1; // debugging: 1 = errors and messages, 2 = messages only
        $mail->SMTPAuth   = true; // authentication enabled
        $mail->Port       = $adminport;
        $mail->Username   = $adminusername;
        $mail->Password   = $adminpassword;
        $mail->SetFrom($adminmail, 'XXXXXXXXXXXXX');
        $mail->Subject = $subject;
        $mail->IsHTML(true);
        $mail->Body = $message;
        $mail->AddAddress($to);
        $mail->AddBCC($to, "member");
        $mail->AddCC($adminEmail, "admin");
        $mail->AddAttachment($dir . $filename);//**attachment is done over here**
        //$mail->AddBCC($to, "member");
        if ($mail->Send()) {
            ob_start(); // ensures anything dumped out will be caught
            while (ob_get_status()) {
                ob_end_clean();
            }

        } else {
            //  echo 'Not sent: <pre>'.print_r(error_get_last(), true).'</pre>';

        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:26:30.577

我正在使用 PHP Mailer 库来帮助我发送带有附件的电子邮件[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

它有 AddAttachment() 方法，可以帮助您发送附件。

# ios - box2d iOS 软体

> ID：11445416
> 
> 赞同：2
> 
> 时间：2012-07-12T05:20:25.780
> 
> 标签：ios, box2d

我尝试使用一组刚体的关节连接来模拟 Box2d 的软体行为。但有时我结构良好的身体会变成一团乱七八糟的粒子，以一种非常荒谬的方式连接起来。这通常发生在一个大身体落在我的“柔软身体”上时。如何防止“软体”变得一团糟？如何保持其原有的有序结构？也许有一个更好的技巧来模拟软体行为。你能和我分享一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T12:17:49.463

在尝试使用 cocos2d 3.x 创建“软球”时，我不知何故遇到了同样的问题。

我最终使用了几个与弹簧相连的物体。困难的部分是微调弹簧的刚度，以使车身在发生碰撞时不会“爆炸”。

这可能会对您有所帮助：http: [//2sa-studio.blogspot.com/2014/05/soft-bodies-with-cocos2d-v3.html](http://2sa-studio.blogspot.com/2014/05/soft-bodies-with-cocos2d-v3.html)

尽管当前的解决方案仍然存在不稳定问题。

# iphone - 在 iOS 4.3 中的 UiNavigation Controller 和 Uitabbar Controller 之间导航

> ID：11445423
> 
> 赞同：1
> 
> 时间：2012-07-12T05:21:13.013
> 
> 标签：iphone, objective-c, uinavigationcontroller, ios5, iphone-sdk-4.3

在我的应用程序中，我能够将控制器从 uinavigation 控制器导航到标签栏项目的导航控制器（在我的标签栏控制器内，每个标签栏项目都有单独的 uinavigation 控制器）但返回导航控制器不起作用。

我尝试了 pushviewcontroller 和 presentModalViewController ，但在这两种情况下，后退导航都不起作用。

此问题仅在 iOS 4.3 中出现，但在 iOS 5 中可以正常工作

我尝试了以下代码来关闭 modalviewController：

```
 [self  dismissModalViewControllerAnimated:YES]; 
```

# android - android中的数据库显示

> ID：11445424
> 
> 赞同：0
> 
> 时间：2012-07-12T05:21:16.280
> 
> 标签：android

我想从数据库中显示一个表，其中包含 5 列具有不同字符串长度的表。这是显示它的最佳方式。谢谢我提前。以前我尝试使用 listview，但各种字符串长度显示行不正确。

我的 layout.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal">           

     <TextView android:id="@+id/text1"      
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 

     <TextView android:id="@+id/text3"          
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:layout_alignParentRight="true"/>

     <TextView android:id="@+id/text5"          
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:layout_alignParentRight="true"/>

     <TextView android:id="@+id/text7"          
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:layout_alignParentRight="true"/>

     <TextView android:id="@+id/text9"          
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:layout_alignParentRight="true"/>

     <TextView
        android:id="@+id/textView21"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"/> 

</LinearLayout> 
```

爪哇代码：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.report);            
String[] from;
int[] to;
db.open();          
ListView lv=(ListView)findViewById(R.id.listView1);     
Cursor c = db.getEducationTitle();

while(c. moveToNext())
{
    // Cursor c = db.getEducationTitle();
    LinearLayout linearlayout=(LinearLayout)findViewById(R.id.Layout1);
    TextView edt=(TextView) new TextView(getApplicationContext());
    edt.setText(c.getString(c.getColumnIndex("col1"))+" "+c.getString(c.getColumnIndex("col2"))+" "+c.getString(c.getColumnIndex("col3"))+c.getString(c.getColumnIndex("col4"))+" "+c.getString(c.getColumnIndex("col5")));
    linearlayout.addView(edt);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:33:29.963

尝试这个....

```
 SQLiteDatabase db=openOrCreateDatabase("databasename", MODE_PRIVATE, null);
    Cursor c=db.rawQuery("SELECT * FROM tablename, null);
    c.moveToFirst();
    LinearLayout linearlayout=(LinearLayout)findViewById(R.id.linearlayout);

       while(cursor.moveToNext)
        {

                TextView edt=(TextView) new TextView(getApplicationContext());
                edt.setText(c.getString(c.getColumnIndex("col1"))+" "+c.getString(c.getColumnIndex("col2"))+" "+c.getString(c.getColumnIndex("col3"))+" "+c.getString(c.getColumnIndex("col4"))+" "+c.getString(c.getColumnIndex("col5")));
                linearlayout.addView(edt);

        } 
```

# c# - 使用特定命令在 C# 中进行语音识别

> ID：11445428
> 
> 赞同：2
> 
> 时间：2012-07-12T05:22:10.607
> 
> 标签：c#, .net, speech-recognition, speech, speech-synthesis

我开发了一个只能识别某些单词的应用程序。我有几个问题。

1）我可以开发类似的东西吗

```
if(command == Browser)
{
    //open default browser
} 
```

2）如果是，识别系统如何理解自定义词？

任何代码示例或教程将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:27:28.427

您可以使用 Microsoft Speech API System.Speech.Recognition 执行此操作。

看看[这篇](http://msdn.microsoft.com/en-us/library/hh361683.aspx)文章

# javascript - 以后如何获取WFS？GeoExt

> ID：11445429
> 
> 赞同：0
> 
> 时间：2012-07-12T05:22:14.237
> 
> 标签：javascript

你能帮我处理 GEOExt 上的 WFS 吗？我阅读教程并查看此代码。

```
proxy: new GeoExt.data.ProtocolProxy({
    protocol: new OpenLayers.Protocol.WFS({
        url: "/geoserver/ows",
        version: "1.1.0",
        featureType: "parks",
        featureNS: "http://medford.opengeo.org",
        srsName: "EPSG:4326"
    })
}) 
```

在此之后我看到这个 var vectorLayer = new OpenLayers.Layer.Vector("Editable features"); 并且不明白如何创建图层。所以我有一些问题。
1 如何获取到 wfs 的 URL？（我使用地理服务器）
2 什么是 featureType 选项。
3 还有更重要的。这段代码正确吗？我在这里找到它[http://workshops.opengeo.org/geoext/wfs/grid.html](http://workshops.opengeo.org/geoext/wfs/grid.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:59:49.893

希望它可以帮助某人

```
 //WFS
                        var myStyle = OpenLayers.Util.extend({},
                            OpenLayers.Feature.Vector.style['default']);
                        myStyle.strokeWidth = 1.5;
                        myStyle.strokeColor = "#ff0000";
                        myStyle.fillOpacity = 0.1;
                        OpenLayers.ProxyHost = "proxy.cgi?url=";
                        var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
                        renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;           
                        myVecLayer = new OpenLayers.Layer.Vector("Редактируемый участок", {
                            strategies: [new OpenLayers.Strategy.BBOX(), new OpenLayers.Strategy.Save()],
                            style: myStyle,
                            protocol: new OpenLayers.Protocol.WFS({
                                version: "1.0.0",
                                srsName:"EPSG:900913",
                                url: "http://localhost:8080/geoserver/wfs",
                                featureType: "filedata",
                                featureNS: "http://www.opengeospatial.net/cite"
                            }),
                            renderers: renderer
                        })  
                        app.mapPanel.map.addLayers([myVecLayer]); 
```

`featureType`到 wokspace的 geoserver
`featureType`路径中的图层名称（也可以在 geoserver 中看到）

# facebook - 如何使用图形 api 将 Facebook 相册照片发布到用户的墙上

> ID：11445430
> 
> 赞同：3
> 
> 时间：2012-07-12T05:22:18.643
> 
> 标签：facebook, api

我可以使用图形 api 将照片上传到 facebook 用户的相册，并且可以将带有图像 url 的新帖子添加到用户的墙上。

问题是，如果图片 url 是已经上传到 facebook 的照片，那么 add post graph api 将返回失败并出现以下错误：

```
FBCDN image is not allowed in stream 
```

有没有办法可以添加之前已经上传到用户 Facebook 相册的照片 url/object_id 的墙贴？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:05:50.500

Facebook 不支持此功能，您可能需要查看此[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

# php - PHP Fun 的 Apache 500 错误

> ID：11445432
> 
> 赞同：5
> 
> 时间：2012-07-12T05:22:24.157
> 
> 标签：php, apache, timeout, execution, max

所以我在我的godaddy（不要恨我）虚拟服务器上运行一个PHP脚本，我预计需要大约5分钟才能完成执行。该脚本是 CURLing 页面，但一次不会超过 1 页（它是在循环中重复使用相同的变量）。我将 php5.ini 文件修改为以下内容：

```
max_execution_time = 600
max_input_time = 120
memory_limit = 64M 
```

我通过 phpinfo 验证了 ini 文件更改已经生效，但是 120 秒后出现 Apache 500 错误。这是这次的错误日志：

```
[Wed Jul 11 22:08:52 2012] [warn] [client **.**.**.***] mod_fcgid: read data timeout in   120 seconds
[Wed Jul 11 22:08:52 2012] [error] [client **.**.**.***] Premature end of script headers: test.php 
```

如果有人对我为什么会收到这些错误有任何想法或对尝试的事情有任何建议，我将不胜感激。我确实注意到 php 设置中的一个选项设置为 120，但我不确定它是否会产生影响：realpath_cache_tt

我还在 .php 文件中设置了时间限制： set_time_limit( 600 );

提前致谢。

***更新：*** 这是我在 .htaccess 文件中尝试的内容：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]
<IfModule mod_fcgid.c>
IPCCommTimeout  7200
</IfModule> 
```

这会在任何页面加载时导致 Apache 500 错误。 ***我也禁用了 FastCGI，但问题仍然存在。***

**已解决RobB** 提出以下建议： IPCCommTimeout 7200 这应该可以工作，但是由于我的 Godaddy 共享主机，它是不允许的。是时候寻找新的托管服务了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T05:34:53.460

我不确定在 GoDaddy 上对这个问题的处理，但正常的解决方案如下：

您遇到的问题是由于 FastCGI 执行 PHP 脚本，但它在默认 IO 超时（120 秒）内没有生成响应，从而导致 500 Internal Server Error。

尝试编辑默认的 VirtualHost conf 文件，该文件通常位于并在上下文中`/etc/apache2/sites-available/default`添加此指令：`<VirtualHost>`

```
<IfModule mod_fcgid.c>
   IPCCommTimeout  7200
</IfModule> 
```

保存修改后，使用以下命令重新启动 apache2：`sudo /etc/init.d/apache2 restart`。

根据我从 GoDaddy 可以确定的是，共享主机中 PHP/FastCGI 的最大时间限制为 120 秒，客户端无法增加。我建议联系他们的支持以寻求帮助，希望他们的声誉不会受到影响，您将能够获得帮助。

**更新：** 不确定它是否会有所帮助，但您可以尝试在您的主机控制中心（设置 > 文件扩展名 > php5）中从 FastCGI 更改为 PHP5。

# python - 打印一个列表并按一定的映射分组

> ID：11445434
> 
> 赞同：0
> 
> 时间：2012-07-12T05:22:55.883
> 
> 标签：python

嗨，这是我正在尝试做的一个例子

假设有一个有序的单词列表

```
list = ["Ack","Ashley","book","channel","Charlie","David","Eli,"George""Zebra"] 
```

我怎样才能打印这个

1.  如果有一个变量，它将不带括号或引号打印
2.  例如，如果有多个，它将​​根据字典用括号将它们分组

> dictmap = {1：[“a”，“A”，“b”，“B”，“c”，“C”]，2：[“d”，“D”，“e”，“E”， "f", "F"],..

所以所有以从 1: 映射的字母开头的单词将被分组在一个括号中，依此类推

所以上面列表的期望输出就是

```
[Ack,Ashely,book,channel,Charlie] [David,Eli] George Zebra 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:44:13.453

这些方面的东西应该起作用

```
from itertools import groupby
L = ["Ack","Ashley","book","channel","Charlie","David","Eli","George","Zebra"]
D ={v:k for k,v in dictmap.items() for v in v}
groups = itertools.groupby(L, key=lambda x:D.get(x[0]))

for k,g in groups:
    g=list(g)
    if len(g)>1:
        print g,
    else:
        print g[0], 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:40:43.393

如果原始列表按您进行分组的相同键排序，这应该是`itertools.groupby`.

这是一个未经测试的示例：

```
lst = [ ...here's the list of strings... ]

def grouping_key(elem) :
    for i, first_letters in dictmap.iteritems() :
         if elem[0] in first_letters :
             return i
    return None

for group_key, group_elems in itertools.groupby(lst, key=grouping_key) :
    group_elems = list(group_elems)
    if len(group_elems) == 1 :
        print group_elems[0]
    else :
        print group_elems 
```

# c# - 如何将 byte[] 转换为互操作对象的 Word（到 word 文档）？

> ID：11445440
> 
> 赞同：4
> 
> 时间：2012-07-12T05:23:46.840
> 
> 标签：c#, stream, office-interop

我想在数据库中保存一个word文档，我这样做：

```
 FileStream st = new FileStream(filePath, FileMode.Open);
  byte[] buffer = new byte[st.Length];
  st.Read(buffer, 0, (int)st.Length);
  st.Close();
  //save Buffer into DB
  //myentityobject.FileContent = buffer;
  //save it 
```

但是当我想阅读它时，我不知道如何从我从 DB 获得的流中制作一个 word 文档。我尝试过这样的事情：

```
 var doc = myentityobject.FileContent;
 MemoryStream stream = new MemoryStream(doc as byte[]);
 letterPatternDoc = new Document(stream);
 filePath = @"D:\LetterPatternDocument001.doc";
 object oMissing = System.Reflection.Missing.Value;
 currentApp = new wd.Application();
 currentApp.Visible = true;
 currentDoc = currentApp.Documents.Add(Type.Missing, Type.Missing);
 currentDoc = doc;
 currentDoc.SaveAs(ref path, oMissing, oMissing, oMissing, oMissing, oMissing, false
               , oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing,      oMissing, oMissing); 
```

但它不起作用。

编辑：

我更改了代码，它现在可以工作了，我通过文件流保存文件，然后读取它。但我不知道这是一个好的解决方案吗？

```
FileStream fileSream = new FileStream(filePath, FileMode.Create, FileAccess.ReadWrite);
        BinaryWriter bw = new BinaryWriter(fileSream);
        bw.Write(FileContent);//filecontent is a byte[]
        fileSream.Close();

       // WordDoc.OpenDocument(filePath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:06:23.563

尝试序列化文档对象，从而保留文档的状态并将其保存在 db 中。在阅读反序列化时，文档对象将再次可供您显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:29:21.183

你可以试试这个方法：将文件保存到某个地方，并将文件路径保存到数据库。当你想读取这个文件时，你可以从数据库中获取文件路径。希望它可以帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:08:28.703

word无法打开流，但您可以保存，修改它，然后在数据库中更新后，删除这个“临时”文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-27T17:16:27.993

如果您不想使用**FileStream**，您还可以利用命名空间中内置的**WriteAllBytes**静态方法`System.IO.File`。

这是一个简短的示例（假设已安装并引用了**Interop.Word ）：**

```
// byte[] fileBytes = getFileBytesFromDB();
var tmpFile = Path.GetTempFileName();
File.WriteAllBytes(tmpFile, fileBytes);

Application app = new word.Application();
Document doc = app.Documents.Open(filePath);

// do your stuff    

// convert the DOCX file back to a Byte Array
doc.Close();
app.Quit(); // VERY IMPORTANT: do this to close the MS Word instance
byte[] newFileBytes= File.ReadAllBytes(tmpFile);
File.Delete(tmpFile); 
```

有关此主题的更多信息，您还可以[阅读](http://www.ryadel.com/en/open-edit-word-doc-docx-file-byte-array-c-msword-interop/)我博客上的这篇文章。

# html - 如何在两个div之间定位图像

> ID：11445443
> 
> 赞同：6
> 
> 时间：2012-07-12T05:24:12.483
> 
> 标签：html, css, position

我必须在两个 div 的底部之间放置一个图像，一个在另一个内部，例如：

![例子](../Images/d15758b3bd9f25f5955e944066e9263e.png)

这个例子的代码是：

```
<div style="background:blue;width:500px;height:150px;overflow:hidden;">
   <div style="background:red;width:500px;height:100px;margin-top:20px;">
    //DOES IMAGE GOES HERE?
   </div>   
</div> 
```

我知道使用绝对位置我可以将图像定位在那里..但我不喜欢那种定位..还有其他方法吗？谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T05:30:06.863

嘿，现在习惯了

```
.parent{
background:blue;
  width:500px;
  height:150px;
  overflow:hidden;
}
.child{
background:red;
  width:500px;
  height:100px;
  margin-top:20px;
  position:relative;
}
.child img{
position:absolute;
  bottom:-25px;
  right:6%;
  width:200px;
  height:50px;
} 
```

```
.parent{
background:blue;
  width:500px;
  height:150px;
  overflow:hidden;
}
.child{
background:red;
  width:500px;
  height:100px;
  margin-top:20px;
  position:relative;
}
.child img{
position:absolute;
  bottom:-25px;
  right:6%;
  width:200px;
  height:50px;
}
```

```
<div class="parent">
   <div class="child">
    <img src="http://fakeimg.pl/250x100/">
   </div>   
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:33:20.930

完整的 CSS 示例

```
.blue {
  background: blue;
  width: 500px;
  height: 150px;
  overflow: hidden;
}

.red {
  background: red;
  width: 500px;
  height: 100px;
  margin-top: 20px;
  position: relative;
}

.image {
  position: absolute;
  bottom: -10px;
  /* half of image height */
  right: 10px;
  /* right space */
}

.image img {
  display: block;
  width: 100px;
  height: 20px;
  background: green;
}
```

```
<div class="blue">
  <div class="red">
    <div class="image">
      <img src="" alt="" />
    </div>
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:28:30.940

试试这个 ：

```
<div style="background:blue;width:500px;height:150px;overflow:hidden;">
   <div style="background:red;width:500px;height:100px;margin-top:20px; 
               padding-left: 250px ; padding-top: 50px">
    //IMAGE GOES HERE.
   </div>   
</div> 
```

填充将有助于留出空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T05:32:22.990

最好的是：

**HTML**

```
<div style="background:blue;width:500px;height:150px;overflow:hidden;">
   <div style="background:red;width:500px;height:100px;margin-top:20px;position:relative;">
    <img src="" style="position:absolute;bottom:-10px;" />
   </div>   
</div> 
```

我添加了绝对定位。

[JSFIDDLE](http://jsfiddle.net/mgNCf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T05:33:45.597

你可以试试下面的代码

```
<div style="background:blue;width:500px;height:150px;overflow:hidden;">
   <div style="background:red;width:500px;height:100px;margin-top:20px;">
   </div>   
   <img src="imageNemaHere" width="134" height="28" style="float:right; margin:-10px 10px 0 0" />
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T05:37:17.733

关于什么`position:relative`

```
<div style="background:blue;width:500px;height:150px;overflow:hidden;">
   <div style="background:red;width:500px;height:100px;margin-top:20px;">
    <img src="http://placehold.it/80x40" style="position:relative;left:400px;top:80px">
   </div>   
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/ABEne/](http://jsfiddle.net/ABEne/)

# sql - SQL 有条件地选择不同的聚合

> ID：11445445
> 
> 赞同：1
> 
> 时间：2012-07-12T05:24:19.763
> 
> 标签：sql, sqlite

假设我有一个表`T`，它有一个属性`A`，一个整数。

`MAX(T) + 1`如果`T`包含 5 而`MAX(T) + 2`不是，如何使 SQL 查询返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:35:39.813

```
SELECT MAX(a) + CASE WHEN (5 IN (SELECT a FROM t)) THEN 1 ELSE 2 END AS max_plus_something FROM t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:08:39.960

```
SELECT MAX(A) + MIN(CASE A WHEN 5 THEN 1 ELSE 2 END) AS NewA FROM T 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:59:21.453

我没有机会测试很多案例，但我认为这可以做你想要的。

```
declare @MinPosNI int;
set @MinPosNI = 1;
select @MinPosNI = case when (A - @MinPosNI) > 0 then @MinPosNI else A + 1 end from T     where A > 0 order by A 
select @MinPosNI 
```

# html - CSS 设置 li 缩进

> ID：11445453
> 
> 赞同：63
> 
> 时间：2012-07-12T05:25:35.737
> 
> 标签：html, css

谷歌搜索和搜索堆栈溢出没有返回任何我能识别的结果，所以如果之前有人问过这个问题，请原谅我......

我有使用列表作为基础的下拉主菜单。问题是，列表非常宽，并且在展开时缩进不够远。所以，这是我的问题！如何通过 CSS 使列表上的缩进量更大？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2015-02-19T02:05:56.887

`padding-left`是什么控制`ul`not的缩进`margin-left`。

比较：这里设置`padding-left`为`0`，注意所有缩进都消失了。

```
ul {
  padding-left: 0;
}
```

```
<ul>
  <li>section a
    <ul>
      <li>one</li>
      <li>two</li>
      <li>three</li>
    </ul>
  </li>
</ul>
<ul>
  <li>section b
    <ul>
      <li>one</li>
      <li>two</li>
      <li>three</li>
    </ul>
  </li>
</ul>
```

这里设置`margin-left`为`0px`. 注意缩进**不会改变**。

```
ul {
  margin-left: 0;
}
```

```
<ul>
  <li>section a
    <ul>
      <li>one</li>
      <li>two</li>
      <li>three</li>
    </ul>
  </li>
</ul>
<ul>
  <li>section b
    <ul>
      <li>one</li>
      <li>two</li>
      <li>three</li>
    </ul>
  </li>
</ul>
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-07-12T05:32:58.763

要缩进`ul`下拉菜单，请使用

```
/* Main Level */
ul{
  margin-left:10px;
}

/* Second Level */
ul ul{
  margin-left:15px;
}

/* Third Level */
ul ul ul{
  margin-left:20px;
}

/* and so on... */ 
```

您也可以缩进`li`s 和（如果适用）`a`s（或您拥有的任何内容元素），每个都有不同的效果。您也可以使用`padding-left`而不是`margin-left`, 再次取决于您想要的效果。

**更新**

默认情况下，许多浏览器使用`padding-left`设置初始缩进。如果你想摆脱它，设置`padding-left: 0px;`

尽管如此，`margin-left`和`padding-left`设置都以不同的方式影响列表的缩进。**具体来说：** `margin-left`影响元素边框外侧的缩进，而`padding-left`影响元素边框内侧的间距。[（在此处了解有关 CSS 盒模型的更多信息）](https://css-tricks.com/the-css-box-model/)

设置`padding-left: 0;`使 li 的项目符号图标悬挂在元素边框的边缘（至少在 Chrome 中），这可能是您想要的，也可能不是您想要的。

padding-left 与 margin-left 的示例以及它们如何在 ul 上协同工作：[https ://jsfiddle.net/daCrosby/bb7kj8cr/1/](https://jsfiddle.net/daCrosby/bb7kj8cr/1/)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-09-21T15:10:36.540

也试试：

```
ul {
  list-style-position: inside;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-12T05:27:20.083

```
li{
    margin-left:50px;
} 
```

或用任何你想要的替换 50px 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-30T04:33:23.670

我发现用两个相对简单的步骤来做这件事似乎效果很好。ul 的第一个 css 定义设置了整个列表所需的基本缩进。第二个定义为其中的每个嵌套列表项设置缩进值。在我的情况下，它们是相同的，但是您显然可以选择任何您想要的。

```
ul {
    margin-left: 1.5em;
}

ul > ul {
    margin-left: 1.5em;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-02T22:02:36.847

使用 chrome 开发工具并查看（在撰写本文时）应用于`ul`元素的`user agent stylesheet`样式，Chrome 中的默认样式为：

```
ul {
    display: block;
    list-style-type: disc;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
} 
```

该[`padding-inline-start`](https://developer.mozilla.org/en-US/docs/Web/CSS/padding-inline-start)属性用于设置项目符号（以及子列表的项目符号）的缩进。

> padding-inline-start CSS 属性定义元素的逻辑内联起始填充，根据元素的书写模式、方向性和文本方向映射到物理填充。

（其他默认属性也可以帮助人们获得他们所追求的外观）

[请注意，@preferred_anon 之前在另一个答案](https://stackoverflow.com/a/28597518/4289902)的评论中提到了这一点，但我第一次看时错过了这一点，所以我添加了这个答案。

# devise - OmniAuth Identity 策略和 Devise 有什么区别？

> ID：11445454
> 
> 赞同：5
> 
> 时间：2012-07-12T05:25:44.393
> 
> 标签：devise, omniauth

我一直在探索我的 Rails 应用程序的身份验证选项。我需要用户名/密码身份验证以及将用户与其 Facebook、Twitter、Foursquare 等身份链接的选项。我通常会发现有人为此目的使用 Devise 和 OmniAuth。但是，OmniAuth 1.0 带有用于用户名/密码的 OmniAuth 身份策略。那么使用Devise有什么优势呢？与仅 Omniauth 的身份验证相比，它不会导致不必要的复杂性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T07:16:07.420

使用 OmniAuth-Identity，您可以创建用户并使用 OmniAuth 对其进行身份验证。OmniAuth-Identity 是另一个身份验证提供程序，您不能将其与其他提供程序链接，如 twitter、facebook 等。这在[http://railscasts.com/episodes/304-omniauth-identity](http://railscasts.com/episodes/304-omniauth-identity)的最后提到.

如果你想要这种链接，你应该使用 Devise+OmniAuth（参见[http://railscasts.com/episodes/235-omniauth-part-1](http://railscasts.com/episodes/235-omniauth-part-1)）。

# qt - 在 QStatusBar 中处理鼠标事件

> ID：11445455
> 
> 赞同：0
> 
> 时间：2012-07-12T05:25:46.657
> 
> 标签：qt, qt4

在我的状态栏中，我添加了一个`QLabel`在其中显示一些消息的状态。现在我想要的是当我点击那个`QLabel`（出现在里面`QStatusBar`）时，消息应该消失..

我在状态栏中添加了如下标签：

```
QLabel *cpyrightlbl= new QLabel();
ui.statusBar->addWidget(cpyrightlbl);
cpyrightlbl->setText("Demo Message");
cpyrightlbl->setStyleSheet("border: 3px");
cpyrightlbl->setFixedWidth(frameGeometry().width());
cpyrightlbl->show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:34:06.950

您应该创建自己的类，该类派生自`QLabel`该函数，然后重新实现该函数`QLabel::mousePressEvent ( QMouseEvent * ev )`。

```
void CMyLabel::mousePressEvent( QMouseEvent * ev )
{
    if( ev->button() == Qt::LeftButton )
    {
        this->clear();
        // or
        // this->setText( "" );
    }

    QLabel::mousePressEvent( ev );
} 
```

*   [QLabel](http://doc.qt.nokia.com/4.7-snapshot/qlabel.html)
*   [QLabel::mousePressEvent](http://doc.qt.nokia.com/4.7-snapshot/qlabel.html#mousePressEvent)

# asp.net - ajax文件上传后更新文本框

> ID：11445459
> 
> 赞同：2
> 
> 时间：2012-07-12T05:26:18.800
> 
> 标签：asp.net, updatepanel

我在我的项目中使用[这个](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)Ajax 文件上传并且它工作正常，我唯一的问题是如何保存我刚刚上传的照片的路径？基本上，我尝试在成功上传后将路径复制到 TextBox 控件，并用更新面板包围该文本框，并在调用 Ajax 的 SaveAs 方法后手动更新该面板，但它似乎不起作用。

这是上载完成事件的代码：

```
protected void AsyncFileUpload1_UploadedComplete (object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
    {
        System.Threading.Thread.Sleep(3000);
        if (AsyncFileUpload1.HasFile)
        {
            var relativeFolder = DateTime.Now.Year.ToString(CultureInfo.InvariantCulture) + Path.DirectorySeparatorChar + DateTime.Now.Month +
                             Path.DirectorySeparatorChar;
            relativeFolder = relativeFolder.Replace('\\', '/');
            var folder = Utils.RelativeWebRoot + "PostPhotos/" + relativeFolder;
            var fileName = Path.GetFileName(e.FileName);

            AsyncFileUpload1.SaveAs(Server.MapPath(folder + fileName));

            txtPostPhoto.Text = folder + fileName;
            PostImage.ImageUrl = txtPostPhoto.Text;

            PostPhotoUpdatePanel.Update();
        }
    } 
```

txtPostPhoto 是我的文本框。

PostImage 是我试图显示图像预览的地方。

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:06:13.633

仔细查看[链接中的示例。](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)

使用 AJAX 控件的以下属性：

```
OnClientUploadComplete="uploadComplete" 
```

它是文件成功上传时在服务器端触发的 javascript 函数。您可以在此函数中设置文本框的值。

例子：

```
function uploadComplete(sender, args) {
    var txt= document.getElementById("ctl00_SampleContent_clientSide");//Your textbox id
    txt.value=args.get_fileName();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:36:19.607

您应该将路径保存在数据库中，而不是按名称保存，而应该通过创建 GUID 并使用 GUID 作为名称来保存。

为什么？

1.  考虑两个图像具有相同名称的场景，其中一个显然会被覆盖，在这些情况下使用 GUID 会有所帮助。
2.  如果您不再需要它，存储在数据库中可以帮助您识别或删除图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T14:55:00.487

尝试在 ViewState 中保存 photopath

```
protected void AsyncFileUpload1_UploadedComplete (object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
     ViewState["path"] = "your path"
     Page.ClientScript.RegisterHiddenField("vpath", ViewState("path"))
} 
```

在客户端放置一个脚本标签，

```
<script type="text/javascript" >
    var vCode = document.getElementById("vpath");
</script> 
```

# php - 列表中的选定值

> ID：11445463
> 
> 赞同：0
> 
> 时间：2012-07-12T05:26:55.867
> 
> 标签：php

如果发现匹配，我正在尝试在列表中显示所选值。它已成功填充，但所选值代码未运行。

```
Code:
$StaffName = 'Jimmy Chan';
<select name="Staff" id="Staff"><?php
$data = array();
$data[0] = '';
echo "<option value='" . $data[0] . "'>" . $data[0] . "</option>";
$result= $DB->query('select No, FirstName, LastName from Staff');
foreach ($result as $data)
{
    $SNo = $data['No'];
    $SFN = $data['FirstName'];
    $SLN = $data['LastName'];
    $SName = $SFN.' '.$SLN;         

    if($SName == $StaffName)
    {
        echo "<option value='".$Sno."' selected = \"selected\">".$Sname."</option>\n";
    }
    else
    {
    echo "<option value='" .$SNo. "'>" . $SName . " </option>";
    }

}                 
?>
        </select> 
```

第二个 else 语句确实运行，但不是 if 语句。我已经把“选定”放在里面了。好心提醒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:34:53.907

似乎问题在于变量 $SName 中的值。在比较之前修剪并将两个变量转换为大写或小写。

小写： http: [//php.net/manual/en/function.strtolower.php](http://php.net/manual/en/function.strtolower.php)

大写： http: [//php.net/manual/en/function.strtoupper.php](http://php.net/manual/en/function.strtoupper.php)

修剪： http: [//php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

也试试，

```
echo "<option value='".$Sno."' selected="selected">".$Sname."</option>"; //remove \n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:46:27.660

试试这个：

```
foreach ($result as $data)
{
    $SNo = $data['No'];
    $SFN = $data['FirstName'];
    $SLN = $data['LastName'];
    $SName = trim($SFN).' '.trim($SLN);         
    if(strtolower($SName) == strtolower($StaffName))
    {
        echo "<option value='".$Sno."' selected = 'selected'>".$Sname."</option>\n";
    }
    else
    {
        echo "<option value='" .$SNo. "'>".$SName."</option>\n";
    }
} 
```

此外，您在第一个“if”语句中使用 $Sname 而不是 $SName。我不确定 PHP 是否可以改变它，但请记住。$Sno 和 $SNo 变量也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T05:47:23.870

您正在使用

```
echo "<option value='".$Sno."' selected = \"selected\">".$Sname."</option>\n"; 
```

但是变量名称是`$SNo`and`$SName`并且您正在使用`$Sno`and `$Sname`。所以请用下面给出的行替换行。

```
echo "<option value='".$SNo."' selected = \"selected\">".$SName."</option>\n"; 
```

我希望我会为你工作，

谢谢

# python - django（但真的是 python）关于元组的古玩

> ID：11445464
> 
> 赞同：1
> 
> 时间：2012-07-12T05:27:14.467
> 
> 标签：python, django, tuples

所以我有一个元组：

```
SEX = [
    ("M","guy"),
    ("F","girl")
] 
```

这是一个 django 的东西，一个 2-ples 的元组。

接下来，我有一个字符串 -`M`

鉴于我有 `M`并且我有上面的元组，我可以运行什么函数来快速有效地返回“guy”？（或者实际上，从上面的 `("M","guy") 2-ple 中检索值“guy”）（我注意到这一点是因为我知道该怎么做

```
def stackOverFlowAnswer(value):
    return "guy" 
```

)

我是否必须遍历整个元组（是的，它只有 2 长。我只是对这个感到好奇），还是有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T05:29:00.227

使用[字典](http://docs.python.org/library/stdtypes.html#dict)而不是元组列表。

```
SEX = dict([
    ("M","guy"),
    ("F","girl")
])

print SEX['M'] 
```

您还可以快速识别输入是否有效（存在于字典中）：

```
val = "Z"
if val not in SEX:
    print "Invalid value" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T05:32:03.933

定义一个伴随字典。Django 可以使用列表，在其他地方你可以使用 dict。

```
SEX = [
    ("M","guy"),
    ("F","girl")
]
SEX_DICT = dict(SEX) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T06:10:24.700

在你的情况下你可能不需要这个，但在 django 中，如果这个元组被用作`choices`给定的字段，你可以使用该[`get_FOO_display()`](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display)模型的实例的函数来获取值，在你的情况下，“guy”代表“M” . `FOO`小写的字段名称在哪里。

所以给定这个模型：

```
SEX = [
    ("M","guy"),
    ("F","girl")
]
class SomeBody(models.Model):
    sex = models.CharField(max_length=1, choices=SEX) 
```

在您的视图或模板中，您可以使用`get_sex_display()`来获取“*显示*”值。

```
people = SomeBody.objects.all()
for person in people:
    display_sex = person.get_sex_display()
    # do stuff to show the value... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T05:31:44.203

您可以编写函数来获取参数`'M'`和`SEX`

```
for s in SEX:
     if s[0]== 'M':
         print s[1]
          #or return s[1] 
```

# seo - 搜索引擎优化论坛 mybb 与 vbulletin

> ID：11445468
> 
> 赞同：-2
> 
> 时间：2012-07-12T05:27:36.890
> 
> 标签：seo, vbulletin, mybb

什么论坛软件往往在谷歌上有更好的排名？例如，如果我有 2 个具有相同标题和名称的相同论坛，哪个在 google 中的排名会更高？这不是意见问题，这是一个真实的事实问题。

那么 vBulletin 还是 MyBB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:51:37.333

除非您拥有良好的内容，否则论坛软件包中内置的任何 SEO 都不会给您带来更好的结果。如果有很多内容供搜索引擎索引，即使是使用非 SEO 调整的论坛包的网站也会在引擎中排名很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:10:20.183

vbulletin 具有由专业人士开发和维护的 vbseo 插件...

mybb 目前没有任何可用的 seo 插件 (afaik)

# visual-studio-2010 - 在 Visual Studio 中构建时更新了 dll 文件版本

> ID：11445478
> 
> 赞同：1
> 
> 时间：2012-07-12T05:28:49.313
> 
> 标签：visual-studio-2010

是否可以在没有第三方工具或插件或手动运行命令的情况下在 Visual Studio 的构建中增加 dll 的文件版本。

例如，我只想按 F5 开始构建，所有的 dll 都有一个新的版本号。如果他们没有更改，如果他们没有获得递增的版本号，我不会大惊小怪。

编辑：

正如下面评论的那样，我已经使用了 autobuildversion.codeplex.com。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:26:59.607

试试这个

在 VB 2005 中，版本号会在您发布应用程序时递增。

1.  右键单击项目并选择属性
2.  单击“发布”选项卡
3.  在底部，您将看到发布版本和一个自动递增它的复选框

# javascript - 使用 indexedDB.open 时出现“无法调用未定义的方法‘open’”错误

> ID：11445479
> 
> 赞同：4
> 
> 时间：2012-07-12T05:28:53.930
> 
> 标签：javascript, indexeddb

我是 IndexedDB 的新手，我正在关注本指南[IndexedDB 教程](http://html5-demos.appspot.com/static/html5storage/index.html#slide30)我只是想创建一个数据库，然后能够添加一些条目。这就是我到目前为止所拥有的。

```
var db = window.indexedDB.open('FriendDB', 'My Friends!');

if (db.version != '1') {
    // User's first visit, initialize database (name, key, auto increment).
    db.createObjectStore('Friends', 'id', true);
    db.setVersion('1');
} else {
  // DB already initialized.
}

var store = db.openObjectStore('Friends');
var user = store.put({name: 'Eric', gender: 'male', likes: 'html5'}); 
```

在我的控制台中，我收到错误“无法调用未定义的方法‘打开’”我怎样才能让它工作？此外，如果有更好的在线资源可以帮助我，因为我似乎无法为新手找到关于 IndexedDB 主题的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:48:04.607

这是来自 html5rocks 的 indexeddb 演示，我对其进行了改进以在 Mozilla Firefox 上工作，并添加了用于查看详细数据和编辑现有数据的功能。里面有说明如何在 indexeddb 中创建数据库、插入、更新和删除数据。

[https://github.com/denimf/IndexedDbToDo](https://github.com/denimf/IndexedDbToDo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:04:27.657

每当您看到包含对 setVersion 的调用的代码时，它都在使用过时的语法。不幸的是，我们不得不在编写规范的这么晚才做出如此大的改变，但这使得正确使用 IndexedDB 变得非常简单，所以我们认为这是值得的。

developer.mozilla.org 上有很好的文档，尽管它肯定可以改进。

# mysql - java mysql连接链接失败连接被拒绝

> ID：11445481
> 
> 赞同：1
> 
> 时间：2012-07-12T05:29:01.323
> 
> 标签：mysql, jdbc

当客户端连接到 mySql 服务器时，抛出以下异常

```
Last packet sent to the server was 0 ms ago.
        at sun.reflect.GeneratedConstructorAccessor112.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
        at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074)
        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2103)
        at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:718)
        at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:46)
        at sun.reflect.GeneratedConstructorAccessor110.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
        at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:302)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:282)
        at java.sql.DriverManager.getConnection(DriverManager.java:582)
        at java.sql.DriverManager.getConnection(DriverManager.java:154)
        at org.logicalcobwebs.proxool.DefaultConnectionBuilder.buildConnection(DefaultConnectionBuilder.java:39)
        at org.logicalcobwebs.proxool.Prototyper.buildConnection(Prototyper.java:159)
        at org.logicalcobwebs.proxool.ConnectionPool.getConnection(ConnectionPool.java:211)
        at org.logicalcobwebs.proxool.ProxoolDriver.connect(ProxoolDriver.java:89)
        at java.sql.DriverManager.getConnection(DriverManager.java:582)
        at java.sql.DriverManager.getConnection(DriverManager.java:207)
        at com.chinaren.tools.MysqlConnectionPools.getConnection(MysqlConnectionPools.java:652)
        ..........
Caused by: java.net.ConnectException: Connection refused
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:525)
        at java.net.Socket.connect(Socket.java:475)
        at java.net.Socket.<init>(Socket.java:372)
        at java.net.Socket.<init>(Socket.java:215)
        at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:253)
        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:280)
        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2026)
        ... 51 more 
```

1: 客户端可以ping dbServer 正常
2: 客户端可以telnet dbServer:port 正常

我的计算机上的相同代码连接到 dbServer 没问题

是8小时的问题吗？

那是什么原因呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:26:21.800

`java.net.ConnectException: Connection refused`: 连接被拒绝。这发生在低级别，意味着端口未打开或连接被防火墙主动拒绝。检查 JDBC URL 和/或 DataSource 配置是否实际使用了它应该使用的主机名/IP 和端口。

客户端是否实际上是从运行此应用程序的同一台计算机上执行 ping 和远程登录？

# java - 如何解析soap响应消息？

> ID：11445482
> 
> 赞同：-4
> 
> 时间：2012-07-12T05:29:08.810
> 
> 标签：java, xml, parsing, soap

我想解析以下 xml 片段。任何人都可以帮我解决这个问题。我不知道如何解析元素和所有元素，只检索和 EmployeeId 节点及其值

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xxx/yyy" xmlns:idi="http://xxxx/">
   <soapenv:Header/>
   <soapenv:Body>
      <idi:retrieve>
         <requestXML>
            <CustomerNumber>111</CustomerNumber>
            <EmployeeId>222</EmployeeId>
         </requestXML>
      </idi:retrieve>
   </soapenv:Body>
</soapenv:Envelope> 
```

请参阅上面的 xml 并给出一些提示来解析它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:39:11.757

您应该使用一个知道从 WSDL 创建对象模型并为您进行解析的框架——这是最好的做法。

只需在其中任何一个上谷歌：

*   轴 2
*   JAX-WS
*   JAX-RPC

选择一个并使用它。

# java - MySql DATETIME 到 java.util.Calendar

> ID：11445486
> 
> 赞同：2
> 
> 时间：2012-07-12T05:29:25.143
> 
> 标签：java, mysql, datetime

我在 JAVA 中管理将日历存储到 mysql DATETIME 字段中来获取这个值

```
entry.date = Calendar.getInstance(TimeZone.getTimeZone("UT"));
entry.date.setTime(rs.getDate(DBBLogEntries.entDate)); 
```

entry.date 是 java.util.Calendar 在数据库中的值是这样的：'2012-07-07 07:18:46' 我将所有日期值存储在数据库中的唯一时区中。准备好根据请求发出的国家/地区进行增加或减少时间所需的所有额外工作。

问题是它带来了日期，但似乎没有给我带来时间。请问有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:43:44.960

可能是因为 Java 的日期格式与[`mysql format`](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)( `YYYY-MM-DD HH:MM:SS`)不同

访问链接：

[http://www.coderanch.com/t/304851/JDBC/java/Java-date-MySQL-date-conversion](http://www.coderanch.com/t/304851/JDBC/java/Java-date-MySQL-date-conversion)

您可以[`SimpleDateFormat`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)如下使用。

```
java.util.Date dt = new java.util.Date();

java.text.SimpleDateFormat sdf = 
     new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

String dateTime = sdf.format(dt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:17:58.153

您应该`timestamp`从`ResultSet`对象中读取 a 。

```
java.sql.Timestamp ts = rs.getTimestamp( DBBLogEntries.entDate ); 
```

它返回一个`Timestamp`包含日期和时间的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:33:50.557

不要使用 Java.util.Date，使用 Java.sql.Date。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T05:33:59.230

您使用的是 MySql DATE 类型吗？这不会**保留**时间分量。

[http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

或者，您如何从数据库中检索日期？

# node.js - 在另一个平台旁边使用 Node.js (Grails)

> ID：11445500
> 
> 赞同：4
> 
> 时间：2012-07-12T05:30:39.153
> 
> 标签：node.js, grails, websocket

我们在野外有一个 grails 应用程序。我们希望为使用当前浏览器的用户提供更好的体验，并提供网站部分的自动更新。查看所有选项，特别是 Grails，我没有留下深刻的印象。

我真的很想使用 WebSockets，从我到目前为止所做的调查来看，我相信我们最好的选择是 Node.js。但显然我们不能重做我们的应用程序。我喜欢Grails。

所以我的想法是我们在 Grails 旁边使用 Node.js 基本上充当客户端和数据之间的只读代理。Node.js 应用程序所做的就是从数据库中提取数据并通过 WebSockets 将其传递给客户端。

这听起来像是一种有效的方法吗？这是其他人做过的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:15:19.587

当然听起来很合理；我建议使用 socket.io 来实现您的传输（如果浏览器支持，它将使用 WebSockets；否则它将透明地使用各种回退机制）。您可能希望使用像 nginx 这样的反向代理来避免任何跨域问题，尽管 socket.io 非常擅长避免这些问题。

Node 非常注重让您在工作的正确部分使用正确的工具，而不是成为金锤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T12:59:01.320

我们没有使用 websockets，但我们有一个 Angular 应用程序，它通过 REST 调用与 grails 对话，我们使用控制器公开它。

# wcf - windows azure WCF 多个 x509 证书错误

> ID：11445502
> 
> 赞同：0
> 
> 时间：2012-07-12T05:30:44.883
> 
> 标签：wcf, azure, certificate, x509certificate

我们正在使用 Windows azure Web 角色来托管 WCF 服务。此 WCF 服务已启用证书身份验证。RootCertificate 和服务器证书上传到托管服务 - 证书部分。在部署期间，这些证书会自动安装在 Azure 角色的 CurrentUser、My store 上。

一切正常。当我们升级我们的服务时，问题就开始了。升级后，职业出现多个x509证书错误。我们正在通过指纹查找证书，那么应该没有任何机会通过多个指纹查找证书。

有人遇到过类似的问题，但没有发布解决方案。请参考 [http://social.msdn.microsoft.com/forums/en-US/wcf/thread/aa2ce0e3-4ee7-4d6e-8ea8-0ac1f75e912b/](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/aa2ce0e3-4ee7-4d6e-8ea8-0ac1f75e912b/)

Web.config 文件如下。我已经删除了实际的指纹值。

```
 <behavior name="customBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceCredentials>
        <clientCertificate>
          <authentication certificateValidationMode="Custom"
                          customCertificateValidatorType="CCP.Hosting.Provisioning.WebRole.Authentication.Implementation.X509CertificateValidator,CCP.Hosting.Provisioning.WebRole"
                          revocationMode="NoCheck"/>
        </clientCertificate> 
        <serviceCertificate
          findValue="{ThumbPrint}"
          x509FindType="FindByThumbprint"
          storeLocation="CurrentUser"
          storeName="My"/>
      </serviceCredentials>

      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<bindings>
    <wsHttpBinding>
    <binding name="customWsHttpBinding" receiveTimeout="00:15:00" sendTimeout="00:05:00" maxReceivedMessageSize="400000000">
      <readerQuotas maxDepth="5000000" maxStringContentLength="50000000"
      maxArrayLength="50000000" maxBytesPerRead="50000000" />
      <security mode="Message">
        <message clientCredentialType="Certificate"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<services>
  <service name="CCP.Hosting.Provisioning.WebRole.ProvisioningService" behaviorConfiguration="customBehavior" >
    <endpoint binding="wsHttpBinding" bindingConfiguration="customWsHttpBinding"
      address="" contract="CCP.Provisioning.Web.Interfaces.IProvisioningService" />
    <endpoint address="mex" binding="mexHttpBinding"          contract="IMetadataExchange" />
  </service>
</services> 
```

有时我们会遇到错误。我已从以下错误中删除指纹。

```
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 7/11/2012 11:51:16 AM 
Event time (UTC): 7/11/2012 11:51:16 AM 
Event ID: 841596aaed284171896138a00b734fe3 
Event sequence: 2 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/1273337584/ROOT-1-129864806465987458 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: E:\sitesroot\0\ 
    Machine name: RD00155D3AAD31 

Process information: 
    Process ID: 3432 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE 

Exception information: 
    Exception type: InvalidOperationException 
    Exception message: Found multiple X.509 certificates using the following search criteria: StoreName 'My', StoreLocation 'CurrentUser', FindType 'FindByThumbprint', FindValue '{Thumbprint}'. Provide a more specific find value.
   at System.ServiceModel.Security.SecurityUtils.GetCertificateFromStoreCore(StoreName storeName, StoreLocation storeLocation, X509FindType findType, Object findValue, EndpointAddress target, Boolean throwIfMultipleOrNoMatch)
   at System.ServiceModel.Security.SecurityUtils.GetCertificateFromStore(StoreName storeName, StoreLocation storeLocation, X509FindType findType, Object findValue, EndpointAddress target)
   at System.ServiceModel.Configuration.X509RecipientCertificateServiceElement.ApplyConfiguration(X509CertificateRecipientServiceCredential cert)
   at System.ServiceModel.Configuration.ServiceCredentialsElement.ApplyConfiguration(ServiceCredentials behavior)
   at System.ServiceModel.Configuration.ServiceCredentialsElement.CreateBehavior()
   at System.ServiceModel.Description.ConfigLoader.LoadBehaviors[T](ServiceModelExtensionCollectionElement`1 behaviorElement, KeyedByTypeCollection`1 behaviors, Boolean commonBehaviors)
   at System.ServiceModel.Description.ConfigLoader.LoadServiceDescription(ServiceHostBase host, ServiceDescription description, ServiceElement serviceElement, Action`1 addBaseAddress)
   at System.ServiceModel.ServiceHostBase.ApplyConfiguration()
   at System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses)
   at System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses)
   at Unity.Wcf.UnityServiceHost..ctor(IUnityContainer container, Type serviceType, Uri[] baseAddresses)
   at Unity.Wcf.UnityServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses)
   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(String normalizedVirtualPath)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath)

Request information: 
    Request URL: http://abcd.cloudapp.net/blahblah.svc 
    Request path: /ProvisioningService.svc 
    User host address: 210.18.83.151 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: NT AUTHORITY\NETWORK SERVICE 

Thread information: 
    Thread ID: 8 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 
    Is impersonating: False 
    Stack trace:    at System.ServiceModel.Security.SecurityUtils.GetCertificateFromStoreCore(StoreName storeName, StoreLocation storeLocation, X509FindType findType, Object findValue, EndpointAddress target, Boolean throwIfMultipleOrNoMatch)
   at System.ServiceModel.Security.SecurityUtils.GetCertificateFromStore(StoreName storeName, StoreLocation storeLocation, X509FindType findType, Object findValue, EndpointAddress target)
   at System.ServiceModel.Configuration.X509RecipientCertificateServiceElement.ApplyConfiguration(X509CertificateRecipientServiceCredential cert)
   at System.ServiceModel.Configuration.ServiceCredentialsElement.ApplyConfiguration(ServiceCredentials behavior)
   at System.ServiceModel.Configuration.ServiceCredentialsElement.CreateBehavior()
   at System.ServiceModel.Description.ConfigLoader.LoadBehaviors[T](ServiceModelExtensionCollectionElement`1 behaviorElement, KeyedByTypeCollection`1 behaviors, Boolean commonBehaviors)
   at System.ServiceModel.Description.ConfigLoader.LoadServiceDescription(ServiceHostBase host, ServiceDescription description, ServiceElement serviceElement, Action`1 addBaseAddress)
   at System.ServiceModel.ServiceHostBase.ApplyConfiguration()
   at System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses)
   at System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses)
   at Unity.Wcf.UnityServiceHost..ctor(IUnityContainer container, Type serviceType, Uri[] baseAddresses)
   at Unity.Wcf.UnityServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses)
   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(String normalizedVirtualPath)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) 
```

# linux - agetty.c 中的特殊字符

> ID：11445504
> 
> 赞同：3
> 
> 时间：2012-07-12T05:31:01.453
> 
> 标签：linux, login

将`agetty.c`某些字符`@`视为特殊字符。在`@`登录提示符处输入符号时，它会删除所有文本。它与安全性有什么关系，还是按照设计它们被视为特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:38:53.833

> 宏： int VKILL 这是特殊控制字符数组中 KILL 字符的下标。termios.c_cc[VKILL] 保存角色本身。KILL 字符仅在规范输入模式下被识别。当用户键入 kill 字符时，当前输入行的全部内容都将被丢弃。杀死角色本身也被丢弃。
> 
> KILL 字符通常是 Cu。[更多的...](http://www.delorie.com/gnu/docs/glibc/libc_368.html)

另一个解释`@`：

> 作为历史记录，擦除字符最初是#，而杀死字符最初是@。这些作业可以追溯到过去，当时终端用真墨水在真纸上打印并产生大量噪音。但是，有人告诉我，在某些现代系统上，这些设置仍然是默认设置[更多...](http://docstore.mik.ua/orelly/unix3/upt/ch05_08.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:52:50.433

如果您正在查看源代码，您会看到两者`@`和`Ctrl``U`都是 line kill 字符的同义词。

这是 TTY 线路纪律使用诸如 NAK (Ctrl-U) 之类的控制字符进行流量控制时的历史遗物。尽管仍然存在对可用字符集施加硬件限制的系统很少，但历史遗迹`@`仍然存在于 3 台设备中，您无法发送实际的 Ctrl-U 并将其作为 0x15 接收。您还将看到与`#`的历史同义词相同的功能`BS`。

即使您忽略了非常有限的老式设备，旧习惯，特别是在 getty 和 stty 中仍然存在，因为“我们一直都是这样做的”。

# silverlight - 是否可以在silverlight中以浏览器外模式更改应用程序的标题

> ID：11445505
> 
> 赞同：0
> 
> 时间：2012-07-12T05:31:02.387
> 
> 标签：silverlight, silverlight-oob

我有一个 silverlight 4.0 应用程序，我需要在登录到应用程序后根据浏览器外模式中的用户更改应用程序的窗口标题。

是否可以 ？

我已经通过以下链接

[http://www.codeproject.com/Articles/68955/Silverlight-4-How-Can-I-Create-a-Customized-OOB-Wi](http://www.codeproject.com/Articles/68955/Silverlight-4-How-Can-I-Create-a-Customized-OOB-Wi)

谢谢奇塔兰詹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:04:20.670

我不相信这在 Silverlight 4 中是可能的。

在 Silverlight 5 中，这非常容易，只要您以更高的信任度运行：

```
App.Current.MainWindow.Title = "Your new window title"; 
```

但是，[Window.Title](http://msdn.microsoft.com/en-us/library/system.windows.window.title(v=vs.95).aspx)属性的 MSDN 文档明确指出该属性仅在 Silverlight 5 中受支持。

# yii - 如何在 Yii 中动态设置默认动作

> ID：11445509
> 
> 赞同：1
> 
> 时间：2012-07-12T05:31:26.580
> 
> 标签：yii, action, default

我想更改控制器的默认操作取决于登录的用户。例如。我的站点中有两个用户：发布者和作者，我想将发布者操作设置为发布者登录时的默认操作，作者也是如此。

我应该怎么办？我什么时候可以检查我的角色并设置他们的相关操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T07:52:47.367

另一种方法是在控制器的[方法](http://www.yiiframework.com/doc/api/1.1/CController#init-detail "http://www.yiiframework.com/doc/api/1.1/CController#init-detail")中设置[`defaultAction`属性](http://www.yiiframework.com/doc/api/1.1/CController#defaultAction-detail "http://www.yiiframework.com/doc/api/1.1/CController#defaultAction-detail")。有点像这样：[`init()`](http://www.yiiframework.com/doc/api/1.1/CController#init-detail "http://www.yiiframework.com/doc/api/1.1/CController#init-detail")

```
<?php
class MyAwesomeController extends Controller{ // or extends CController depending on your code
    public function init(){
        parent::init(); // no need for this call if you don't have anything in your parent init() 

        if(array_key_exists('RolePublisher', Yii::app()->authManager->getRoles(Yii::app()->user->id)))
            $this->defaultAction='publisher'; // name of your action

        else if (array_key_exists('RoleAuthor', Yii::app()->authManager->getRoles(Yii::app()->user->id)))
            $this->defaultAction='author'; // name of your action
    }
    // ... rest of your code
}
?> 
```

查看[CAuthManager 的`getRoles()`](http://www.yiiframework.com/doc/api/1.1/CAuthManager#getRoles-detail "http://www.yiiframework.com/doc/api/1.1/CAuthManager#getRoles-detail")，查看返回的数组的格式为`'role'=>CAuthItem object`，这就是我使用`array_key_exists()`.

如果你不知道，动作名称将只是没有动作部分的名称，例如，如果你有，`public function actionPublisher(){...}`那么动作名称应该是：`publisher`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:17:43.747

另一个更简单的方法是保持默认操作不变，但该默认操作仅根据登录的用户类型调用附加操作函数。例如，您有条件调用 indexAction 函数`this->userAction`或 `this->publisherAction`取决于检查谁登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:50:13.157

我认为您可以在用户表中保存“第一个用户页面”。当用户通过身份验证时，您可以从数据库加载此页面。你在哪里可以做到这一点？我认为最好的地方是 UserIdentity 类。之后，您可以在 SiteController::actionLogin();

您可以获取或设置“首页”值：

```
 if (null === $user->first_page) {
                $firstPage = 'site/index';
            } else {
                $firstPage = $user->first_page;
            } 
```

这是一个完整的类：

```
class UserIdentity extends CUserIdentity
{
    private $_id;

    public function authenticate()
    {
        $user = User::model()->findByAttributes(array('username' => $this->username));
        if ($user === null) {
            $this->errorCode = self::ERROR_USERNAME_INVALID;
        } else if ($user->password !== $user->encrypt($this->password)) {
            $this->errorCode = self::ERROR_PASSWORD_INVALID;
        } else {
            $this->_id = $user->id;

            if (null === $user->first_page) {
                $firstPage = 'site/index';
            } else {
                $firstPage = $user->first_page;
            }

            $this->errorCode = self::ERROR_NONE;
        }
        return !$this->errorCode;
    }

    public function getId()
    {
        return $this->_id;
    }

}

/**
 * Displays the login page
 */
public function actionLogin()
{
    $model = new LoginForm;

    // if it is ajax validation request
    if (isset($_POST['ajax']) && $_POST['ajax'] === 'login-form') {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }

    // collect user input data
    if (isset($_POST['LoginForm'])) {
        $model->attributes = $_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if ($model->validate() && $model->login())
            $this->redirect(Yii::app()->user->first_page);
    }

    // display the login form
    $this->render('login', array('model' => $model));
} 
```

此外，您只能在此文件中编写正确的代码。在 SiteController 文件中。

# c++ - 将 openMP 与 SETS 一起使用

> ID：11445511
> 
> 赞同：0
> 
> 时间：2012-07-12T05:31:31.323
> 
> 标签：c++, parallel-processing, openmp

我想在 OpenMP 的帮助下并行化这段代码，比如 `#pragma omp parallel for`在不同的线程之间划分工作。

什么是有效的方法？这里级别在各种线程之间共享。

这里 make 是一个集合。

```
for(iter=make.at(level).begin();iter!=make.at(level).end();iter++)
{
    Function(*iter);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:10:28.057

如果返回的类型`make.at(level)`具有*具有恒定访问时间的随机访问迭代器，*并且如果您的编译器支持足够新的 OpenMP 版本（阅读：它*不是*MSVC++），那么您可以直接使用`parallel for`worksharing 指令：

```
obj = make.at(level);
#pragma omp parallel for
for (iter = obj.begin(); iter != obj.end(); iter++)
{
    Function(*iter);
} 
```

如果该类型不提供随机访问迭代器，但您的编译器仍支持 OpenMP 3.0 或更高版本，那么您可以使用 OpenMP 任务：

```
#pragma omp parallel
{
    #pragma omp single
    {
        obj = make.at(level);
        for (iter = obj.begin(); iter != obj.end(); iter++)
        {
            #pragma omp task
            Function(*iter);
        }
    }
} 
```

这里单个线程执行 for 循环并创建许多 OpenMP 任务。每个任务将`Function()`使用 的相应值进行一次调用`*iter`。然后每个空闲线程将开始从未完成任务列表中挑选。在并行区域的末尾有一个隐式屏障，因此主线程将尽职尽责地等待所有任务完成，然后再继续执行通过并行区域。

如果您不幸使用 MS Visual C++，那么您别无选择，只能创建一个对象指针数组并使用简单的整数循环对其进行迭代：

```
obj = make.at(level);
obj_type* elements = new obj_type*[obj.size()];
for (i = 0, iter = obj.begin(); i < obj.size(); i++)
{
    elements[i] = &(*iter++);
}

#pragma omp parallel for
for (i = 0; i < obj.size(); i++)
{
    Function(*elements[i]);
}

delete [] elements; 
```

这不是最优雅的解决方案，但它应该可以工作。

编辑：如果我从您的问题标题中理解正确，那么您正在使用集合。这排除了第一个算法，因为集合不支持随机访问迭代器。根据您的编译器对 OpenMP 任务的支持，使用第二种或第三种算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:27:13.287

似乎并行的变量必须是有符号的int。但我不确定。这是一个关于这个的话题。[为什么必须对循环变量进行并行签名？](https://stackoverflow.com/questions/3988470/why-must-loop-variables-be-signed-in-a-parallel-for)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:15:57.110

要在 OpenMP 中使用这种迭代器模式，可能需要重新考虑如何执行循环 -`#pragma omp for`因为循环不是简单的整数循环，所以不能使用。我想知道以下是否可行：

```
iter = make.at(level).begin();
end  = make.at(level).end();

#pragma omp parallel private(iter) shared(make,level,end)
{
    #pragma omp single
    func(iter);                      /* only one thread does the first item */

    while (1)
    {
        #pragma omp critical
        iter = make.at(level).next(); /* each thread gets a different item */

        if (iter == end)
            break;

        func(iter);
    }
} /* end parallel block */ 
```

请注意，我必须将您`iter++`的`next()`调用更改为关键部分中的调用才能使其正常工作。这样做的原因是共享`make.at(level)`对象需要记住哪些项目已经被处理。

# java - 使用来自 java 的自类型依赖项初始化 scala 类

> ID：11445512
> 
> 赞同：1
> 
> 时间：2012-07-12T05:31:31.990
> 
> 标签：java, scala

我正在开发一个同时具有 scala 和 java 代码的项目。我想在java代码中使用用scala编写的类。我遇到的问题是 scala 类有一些自类型依赖项。从java创建该类的新实例时，我不知道如何给它们。

```
trait Deps1 {
 def dep1 = println("dep1")
}

trait Deps2 {
 def dep2 = println("dep2")
}

class TestClass {
 this: Deps1 with Deps2 =>

 def test = {
   dep1
   dep2
 }
} 
```

在scala中，如果我要创建`TestClass`我可以使用的实例，`new TestClass with Deps1 with Deps2`但我不知道如何在java代码中做到这一点。

我正在使用 scala 2.9.2。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T05:59:21.887

如果特征非常复杂，最好让 Scala 处理它们。在 Scala 中编写一个 Java 可以实例化的存根：

```
class TestWithDeps extends TestClass with Deps1 with Deps2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:56:34.597

Scala 特征被编译为 Java 接口。因此，例如，在您的 Java 代码中，您正在实现接口 Deps1。有关示例和详细信息，请参见此[答案](https://stackoverflow.com/a/7637888/390708)

对于您的代码，以下 Java 代码有效：

```
class Test extends TestClass implements Deps1, Deps2{
   public void dep1(){
     Deps1$class.dep1(this);
   } 

   public void dep2(){
     Deps2$class.dep2(this);
   }

   public static void main(String []args){
     Test test = new Test();
     test.dep1();
     test.dep2();
   }

} 
```

运行这个给出：

```
dep1
dep2 
```

像这样在类路径和 scala-library jar 上编译并运行已编译的 Deps1、Deps2 和 TestClass`javac -classpath .:scala-library.jar Test.java`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:00:29.893

您正在询问如何在 Java 混合特征中创建匿名类。这根本不可能，因为在 Java 中你不能混合一个 trait，你可以实现一个不包含代码的接口。

如果您对 Scala Trait 的概念以及如何在 JVM 有效字节码之上实现它以保持与 Java 的兼容性进行一些推理，那么您自己会弄清楚（我并不是说这是 Scala 对待特征的确切方式, 但非常相似)

*   创建一个java接口
*   当特征混合到一个类中时，在编译时“具体”函数被编译器物理复制到类中。

这是允许 Scala trait 包含具体函数的技巧，但当然您需要源文件是 Scala 文件。此外请记住，当您创建匿名类时，例如：

```
val a = new MyClass extends A with B 
```

scala 编译器为此物理生成一个匿名类（并应用必要的转换来混合特征）。因此，如果您需要从 Java 创建 MyClass 的实例 extends A with B，正如 Rex 建议的那样，最好的方法是在 Scala 中创建一个存根，并从 Java 实例化它。存根将由 Scalac 编译，它将正确处理 trait。

# c# - 运行多启动应用程序不会在发布时停止应用程序，而是在调试时停止它们

> ID：11445514
> 
> 赞同：0
> 
> 时间：2012-07-12T05:31:35.483
> 
> 标签：c#, visual-studio-2010, ipc

我有一个关于 Visual Studio 2010 的调试和发布构建运行的区别的问题。我有一个具有两个项目 A 和 B 的解决方案。A 依赖于 B 并通过进程间通信 IPC 调用 B 的方法。

以下是场景：

```
CASE A:
Run B only 
- Stops the window when you click the STOP button on both on Debug and Release

CASE B:
Multi Startup Run Both A and B (Both action are set to "Start"):
- Irregardless of the order of run, 
  On Release run, A is STOP but B is not stopped 
  On Debug run, B and A are both stopped 
```

我想知道在调试和发布版本的 Visual Studio 上运行多重启动时有什么区别。我能想到的奇怪的事情是 B 在启动时注册了一个 IPCServiceChannel。但是为什么问题是B可以在我自己运行时正确停止。

```
IpcServerChannel serverChannel = new IpcServerChannel("ProcessName");
ChannelServices.RegisterChannel(serverChannel, true); 
```

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:13:01.223

为多个项目设置多个启动需要为每个项目设置操作

诸如：None、Start & Start without debug 等操作

还有一件更重要的事情是您需要设置项目应该开始的顺序

例如，如果您希望您的服务器首先启动，但如果它在顺序中是最后一个，那么它将按顺序最后启动。您必须先移动服务器项目才能执行，然后按顺序执行其余项目

结论：在一个多启动项目中，您必须为每个项目设置动作和顺序

# magento - 如何在magento的自定义模块中使用单选按钮创建自定义网格列

> ID：11445515
> 
> 赞同：3
> 
> 时间：2012-07-12T05:31:37.297
> 
> 标签：magento, grid, radio-button

我想创建带有单选按钮的自定义网格列。我用下面的代码创建了，但问题是，我没有得到单选按钮名称，这就是为什么单选按钮可以选择多个.....帮助我获取单选按钮名称。

```
protected function _prepareColumns()<br/>
    { 
$this->addColumn('pr_id',<br/>
            array( <br/>
                'header'=> Mage::helper('catalog')->__('p_id'),<br/>
                'index' => 'entity_id',<br/>
         'type' => 'radio',<br/>
         'name' => 'prid',<br/>
         'width' => '50px',<br/>

    )); 
```

...........

请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:22:14.910

```
$this->addColumn('pr_id', array(
        'header'    => Mage::helper('adminhtml')->__('p_id'),
        'type'      => 'radio',
        'html_name' => 'prid[]',
        'align'     => 'center',
        'value'    => array('1')
    )); 
```

# iphone - gdata-objectivec-client api + oauth2 ios 框架中的错误

> ID：11445520
> 
> 赞同：3
> 
> 时间：2012-07-12T05:31:50.470
> 
> 标签：iphone, ios, google-api

伙计们，我正在我的 iPhone 应用程序中集成谷歌文档，

我使用了来自[http://code.google.com/p/gdata-objectivec-client/的 gdata-objectivec-client](http://code.google.com/p/gdata-objectivec-client/)

并使用以下步骤配置我的项目[http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)

当我使用以下代码创建 GTMOAuth2ViewControllerTouch.h 实例时

```
GTMOAuth2ViewControllerTouch *viewController;

viewController = [[[GTMOAuth2ViewControllerTouch alloc] initWithScope:scope
                                                             clientID:kMyClientID
                                                         clientSecret:kMyClientSecret
                                                     keychainItemName:kKeychainItemName
                                                             delegate:self
                                                     finishedSelector:@selector(viewController:finishedWithAuth:error:)] autorelease];

[[self navigationController] pushViewController:viewController animated:YES]; 
```

**我得到这个错误缺少 GTMOAuth2ViewTouch.nib**

请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:57:44.490

您需要将`GTMOAuth2ViewTouch.nib`文件移动到根项目中（主项目在数据项目之外）

我遇到了同样的问题，但这是 Xcode 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:44:48.977

您需要从 SVN url 下载 GTMOAuth2ViewTouch.nib 文件，提供为[http://gtm-oauth2.googlecode.com/svn/trunk/Source/Touch/](http://gtm-oauth2.googlecode.com/svn/trunk/Source/Touch/)。从此处下载文件，然后将其添加到您的项目中。它会正常工作。

# javascript - 如何在地址栏中隐藏我的页面名称和扩展名？

> ID：11445522
> 
> 赞同：3
> 
> 时间：2012-07-12T05:32:19.500
> 
> 标签：javascript, html

如何在地址栏中隐藏我的页面名称和扩展名？

例如，当我单击“主页”链接时，它会带我到：

www.mysite.com/index.html

但我希望它显示在地址栏中而不显示页面名称和扩展名，如下所示：

www.mysite.com/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T05:49:38.160

这应该有效。

将它放在一个名为 .htaccess 的文件中，并将其放在您的根目录中。仅适用于 apache 网络服务器，但不适用于本地。

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule .* $0.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:03:52.920

您是如何编写“***主页***”链接的？

话虽如此，请不要在您的**锚标签**`/index.html`中包含该部分。

 **此外，如果您想显示站点`www.mysite.com`中每个本地链接的主站点 URL，无论您在哪个网页（照片库、关于我们等），请将您的整个网站包装在**iframe**中，该 iframe 是视口的整个空间将阻止**地址栏**更改。

**参考：** [**jsFiddle 还是它？？？**](http://jsfiddle.net/mCuUg/show/)

上面的 jsFiddle 网站展示了这个简单的 iframe 方法。请注意，地址栏始终位于同一位置，因为 iframe 正在接收所有导航交互。

**查看没有地址栏中**`/show/`的jsFiddle以访问**Edit Page**。

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T07:43:09.667

`.htaccess`在您网站的根目录中创建一个包含以下内容的文件：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

添加上述文件后，您可以访问以下网址：

```
www.mysite.com/index.html 
```

通过使用这个网址：

```
www.example.com/contactus 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T05:43:58.660

你可以试试：

```
window.location.href = 'WHAT LOCATION YOU WANT'; 
```

但这将重新加载页面。您应该在服务器端找到解决方案。******

# python - python & smtplib：是否可以使用 oauth2 通过 gmail 发送邮件？

> ID：11445523
> 
> 赞同：9
> 
> 时间：2012-07-12T05:32:21.447
> 
> 标签：python, oauth, oauth-2.0, smtplib

所以我可以使用 smtplib（使用下面的脚本）登录并通过 gmail 发送邮件，但我只是想知道使用 oauth2 是否像 imaplib 一样是一个选项？我在 smtplib 文档页面上没有看到任何关于 oauth 的内容，也没有在谷歌上找到任何内容。谢谢。

```
#! /usr/bin/python

import smtplib

to = 'myemailaddress'
gmail_user = 'myemailaddress'
gmail_pwd = 'passwd'
smtpserver = smtplib.SMTP("smtp.gmail.com",587)
smtpserver.ehlo()
smtpserver.starttls()
smtpserver.ehlo
smtpserver.login(gmail_user, gmail_pwd)
header = 'To:' + to + '\n' + 'From: ' + gmail_user + '\n' + 'Subject:testing \n'
print header
msg = header + '\n this is test msg from me \n\n'
smtpserver.sendmail(gmail_user, to, msg)
print 'done!'
smtpserver.close(); 
```

**编辑：**

感谢 samy.vilar 在他的回答中提供了非常详细的解释。但是，我遇到了一些麻烦。这是我的脚本：

```
#! /usr/bin/python

import oauth2 as oauth
import oauth2.clients.smtp as smtplib

consumer = oauth.Consumer('anonymous', 'anonymous')
token = oauth.Token('1/MI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0', 'NysqNqVTulFsdHpSRrPP56sF')

url = "https://mail.google.com/mail/b/testing.oauth.1@gmail.com/smtp/"

conn = smtplib.SMTP('smtp.googlemail.com', 587)
conn.set_debuglevel(True)
conn.ehlo('test')
conn.starttls()

conn.authenticate(url, consumer, token)

header = 'To:testing.oauth.1@gmail.com\n' + 'From: testing.oauth.1@gmail.com\n' + 'Subject:testing \n'
msg = header + '\n this is test msg from me \n\n'
conn.sendmail('testing.oauth.1@gmail.com', 'testing.oauth.1@gmail.com', msg) 
```

令我困惑的是，它似乎可以进行身份​​验证：

```
send: 'ehlo test\r\n'
reply: '250-mx.google.com at your service, [75.173.8.127]\r\n'
reply: '250-SIZE 35882577\r\n'
reply: '250-8BITMIME\r\n'
reply: '250-STARTTLS\r\n'
reply: '250 ENHANCEDSTATUSCODES\r\n'
reply: retcode (250); Msg: mx.google.com at your service, [75.173.8.127]
SIZE 35882577
8BITMIME
STARTTLS
ENHANCEDSTATUSCODES
send: 'STARTTLS\r\n'
reply: '220 2.0.0 Ready to start TLS\r\n'
reply: retcode (220); Msg: 2.0.0 Ready to start TLS
send: 'AUTH XOAUTH R0VUIGh0dHBzOi8vbWFpbC5nb29nbGUuY29tL21haWwvYi90ZXN0aW5nLm9hdXRoLjFAZ21haWwuY29tL3NtdHAvIG9hdXRoX2JvZHlfaGFzaD0iMmptajdsNXJTdzB5VmIlMkZ2bFdBWWtLJTJGWUJ3ayUzRCIsb2F1dGhfY29uc3VtZXJfa2V5PSJhbm9ueW1vdXMiLG9hdXRoX25vbmNlPSI3Nzc0ODMyIixvYXV0aF9zaWduYXR1cmU9IkxuckZHODdxdHRxZUhsUlQ1emRndmtEZ1UzTSUzRCIsb2F1dGhfc2lnbmF0dXJlX21ldGhvZD0iSE1BQy1TSEExIixvYXV0aF90aW1lc3RhbXA9IjEzNDIxNDI3NzIiLG9hdXRoX3Rva2VuPSIxJTJGTUk2QjJEcUpQNEZFa0RSTFVLckQ1bDQ2c1EwNzU4LTJ1Y0VLQlktRGVCMCIsb2F1dGhfdmVyc2lvbj0iMS4wIg==\r\n'
reply: '235 2.7.0 Accepted\r\n'
reply: retcode (235); Msg: 2.7.0 Accepted 
```

但是当谈到发送电子邮件时，它似乎忘记了`conn`已经通过身份验证：

```
send: 'ehlo [192.168.2.4]\r\n'
reply: '250-mx.google.com at your service, [75.173.8.127]\r\n'
reply: '250-SIZE 35882577\r\n'
reply: '250-8BITMIME\r\n'
reply: '250-AUTH LOGIN PLAIN XOAUTH\r\n'
reply: '250 ENHANCEDSTATUSCODES\r\n'
reply: retcode (250); Msg: mx.google.com at your service, [75.173.8.127]
SIZE 35882577
8BITMIME
AUTH LOGIN PLAIN XOAUTH
ENHANCEDSTATUSCODES
send: 'mail FROM:<testing.oauth.1@gmail.com> size=107\r\n'
reply: '530-5.5.1 Authentication Required. Learn more at\r\n'
reply: '530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 tu7sm3163839pbc.55\r\n'
reply: retcode (530); Msg: 5.5.1 Authentication Required. Learn more at
5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 tu7sm3163839pbc.55
send: 'rset\r\n'
reply: '250 2.1.5 Flushed tu7sm3163839pbc.55\r\n'
reply: retcode (250); Msg: 2.1.5 Flushed tu7sm3163839pbc.55
Traceback (most recent call last):
  File "./gmail_send3.py", line 47, in <module>
    conn.sendmail('testing.oauth.1@gmail.com', 'testing.oauth.1@gmail.com', msg)
  File "/usr/lib/python2.7/smtplib.py", line 713, in sendmail
    raise SMTPSenderRefused(code, resp, from_addr)
smtplib.SMTPSenderRefused: (530, '5.5.1 Authentication Required. Learn more at\n5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 tu7sm3163839pbc.55', 'testing.oauth.1@gmail.com') 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T09:29:26.097

有趣，我认为有可能，我找到了以下链接
[https://developers.google.com/google-apps/gmail/oauth_overview](https://developers.google.com/google-apps/gmail/oauth_overview)

**更新**
[https://github.com/google/gmail-oauth2-tools/wiki/OAuth2DotPyRunThrough](https://github.com/google/gmail-oauth2-tools/wiki/OAuth2DotPyRunThrough)
这是使用 oauth2 的新演练，似乎 xoauth 已被宣布为过时，我已更新 URL 以获取旧版本`xoauth.py`文件，以防任何人仍然需要它，尽管看起来 Google 已经更改了他们的 API，并且此演练不再适用。

您可以直接使用 xoauth 或[https://github.com/simplegeo/python-oauth2/](https://github.com/simplegeo/python-oauth2/)进行实际交流，我推荐后者，它更通用。

显然你首先需要下载`xoauth.py`脚本。

```
$ wget https://raw.githubusercontent.com/google/gmail-oauth2-tools/master/obsolete/python/xoauth.py
$ python xoauth.py --generate_oauth_token --user=testing.oauth.1@gmail.com

xoauth.py:74: DeprecationWarning: the sha module is deprecated; use the hashlib module instead
import sha
oauth_token_secret: HFJEvjcTfiXSPxgLzDh-1yaH
oauth_token: 4/EwUxCtY9ye1kdtb4uNJIcaUe9KXl
oauth_callback_confirmed: true
To authorize token, visit this url and follow the directions to generate a verification code:
https://www.google.com/accounts/OAuthAuthorizeToken?oauth_token=4%2FEwUxCtY9ye1kdtb4uNJIcaUe9KXl
Enter verification code: 7XjT15fqk1aNe8152d9oTRcJ
oauth_token: 1/MI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0
oauth_token_secret: NysqNqVTulFsdHpSRrPP56sF 
```

让我们测试一下：

```
$ python xoauth.py --test_imap_authentication --user=testing.oauth.1@gmail.com \
 --oauth_token=1/MI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0 --oauth_token_secret=NysqNqVTulFsdHpSRrPP56sF

xoauth.py:74: DeprecationWarning: the sha module is deprecated; use the hashlib module instead
xoauth string (before base64-encoding):
GET https://mail.google.com/mail/b/testing.oauth.1@gmail.com/imap/ oauth_consumer_key="anonymous",oauth_nonce="18010070659685102619",oauth_signature="jTJv%2FAFATpzfq%2BZTLAAxFNmWPi0%3D",oauth_signature_method="HMAC-SHA1",oauth_timestamp="1342084141",oauth_token="1%2FMI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0",oauth_version="1.0"

XOAUTH string (base64-encoded): R0VUIGh0dHBzOi8vbWFpbC5nb29nbGUuY29tL21haWwvYi90ZXN0aW5nLm9hdXRoLjFAZ21haWwuY29tL2ltYXAvIG9hdXRoX2NvbnN1bWVyX2tleT0iYW5vbnltb3VzIixvYXV0aF9ub25jZT0iMTgwMTAwNzA2NTk2ODUxMDI2MTkiLG9hdXRoX3NpZ25hdHVyZT0ialRKdiUyRkFGQVRwemZxJTJCWlRMQUF4Rk5tV1BpMCUzRCIsb2F1dGhfc2lnbmF0dXJlX21ldGhvZD0iSE1BQy1TSEExIixvYXV0aF90aW1lc3RhbXA9IjEzNDIwODQxNDEiLG9hdXRoX3Rva2VuPSIxJTJGTUk2QjJEcUpQNEZFa0RSTFVLckQ1bDQ2c1EwNzU4LTJ1Y0VLQlktRGVCMCIsb2F1dGhfdmVyc2lvbj0iMS4wIg==

09:01.40 > COKI1 AUTHENTICATE XOAUTH
09:01.44 < + 
09:01.45 write literal size 444
09:02.68 < * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE
09:02.68 < COKI1 OK testing.oauth.1@gmail.com Testing Oauth authenticated (Success)
09:02.68 > COKI2 SELECT INBOX
09:03.09 < * FLAGS (\Answered \Flagged \Draft \Deleted \Seen)
09:03.09 < * OK [PERMANENTFLAGS (\Answered \Flagged \Draft \Deleted \Seen \*)] Flags permitted.
09:03.09 < * OK [UIDVALIDITY 3] UIDs valid.
09:03.09 < * 3 EXISTS
09:03.09 < * 0 RECENT
09:03.09 < * OK [UIDNEXT 4] Predicted next UID.
09:03.09 < COKI2 OK [READ-WRITE] INBOX selected. (Success) 
```

看来我们可以走了。你可能想设置一个`virtualenv`

```
$ git clone https://github.com/simplegeo/python-oauth2.git
$ cd python-oauth2/
$ sudo python setup.py install 
```

并取自文档：

```
import oauth2 as oauth
import oauth2.clients.imap as imaplib

# Set up your Consumer and Token as per usual. Just like any other
# three-legged OAuth request.
consumer = oauth.Consumer('anonymous', 'anonymous')
token = oauth.Token('1/MI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0', 'NysqNqVTulFsdHpSRrPP56sF')

# Setup the URL according to Google's XOAUTH implementation. Be sure
# to replace the email here with the appropriate email address that
# you wish to access.
url = "https://mail.google.com/mail/b/testing.oauth.1@gmail.com/imap/"

conn = imaplib.IMAP4_SSL('imap.googlemail.com')
conn.debug = 4 

# This is the only thing in the API for impaplib.IMAP4_SSL that has 
# changed. You now authenticate with the URL, consumer, and token.
conn.authenticate(url, consumer, token)

# Once authenticated everything from the impalib.IMAP4_SSL class will 
# work as per usual without any modification to your code.
conn.select('INBOX')
print conn.list()

>>> conn.authenticate(url, consumer, token)
20:11.73 > EPKK1 AUTHENTICATE XOAUTH
20:11.78 < + 
20:11.78 write literal size 496
20:11.93 < * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE
20:11.93 < EPKK1 OK testing.oauth.1@gmail.com Testing Oauth authenticated (Success)
>>> conn.select('INBOX')
20:17.47 > EPKK2 SELECT INBOX
20:17.58 < * FLAGS (\Answered \Flagged \Draft \Deleted \Seen)
20:17.58 < * OK [PERMANENTFLAGS (\Answered \Flagged \Draft \Deleted \Seen \*)] Flags permitted.
20:17.58 < * OK [UIDVALIDITY 3] UIDs valid.
20:17.58 < * 3 EXISTS
20:17.58 < * 0 RECENT
20:17.58 < * OK [UIDNEXT 4] Predicted next UID.
20:17.58 < EPKK2 OK [READ-WRITE] INBOX selected. (Success)
('OK', ['3'])
>>> print conn.list()
20:20.23 > EPKK3 LIST "" *
20:20.28 < * LIST (\HasNoChildren) "/" "INBOX"
20:20.28 < * LIST (\Noselect \HasChildren) "/" "[Gmail]"
20:20.28 < * LIST (\HasNoChildren) "/" "[Gmail]/All Mail"
20:20.28 < * LIST (\HasNoChildren) "/" "[Gmail]/Drafts"
20:20.28 < * LIST (\HasNoChildren) "/" "[Gmail]/Important"
20:20.28 < * LIST (\HasNoChildren) "/" "[Gmail]/Sent Mail"
20:20.28 < * LIST (\HasNoChildren) "/" "[Gmail]/Spam"
20:20.28 < * LIST (\HasNoChildren) "/" "[Gmail]/Starred"
20:20.28 < * LIST (\HasNoChildren) "/" "[Gmail]/Trash"
20:20.28 < EPKK3 OK Success
('OK', ['(\\HasNoChildren) "/" "INBOX"', '(\\Noselect \\HasChildren) "/" "[Gmail]"', '(\\HasNoChildren) "/" "[Gmail]/All Mail"', '(\\HasNoChildren) "/" "[Gmail]/Drafts"', '(\\HasNoChildren) "/" "[Gmail]/Important"', '(\\HasNoChildren) "/" "[Gmail]/Sent Mail"', '(\\HasNoChildren) "/" "[Gmail]/Spam"', '(\\HasNoChildren) "/" "[Gmail]/Starred"', '(\\HasNoChildren) "/" "[Gmail]/Trash"'])
>>> 
```

对于 smtp：

```
import oauth2 as oauth
import oauth2.clients.smtp as smtplib

# Set up your Consumer and Token as per usual. Just like any other
# three-legged OAuth request.
# Set up your Consumer and Token as per usual. Just like any other
# three-legged OAuth request.
consumer = oauth.Consumer('anonymous', 'anonymous')
token = oauth.Token('1/MI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0', 'NysqNqVTulFsdHpSRrPP56sF')

# Setup the URL according to Google's XOAUTH implementation. Be sure
# to replace the email here with the appropriate email address that
# you wish to access.
url = "https://mail.google.com/mail/b/testing.oauth.1@gmail.com/smtp/"

conn = smtplib.SMTP('smtp.googlemail.com', 587)
conn.set_debuglevel(True)
conn.ehlo('test')
conn.starttls()

# Again the only thing modified from smtplib.SMTP is the authenticate
# method, which works identically to the imaplib.IMAP4_SSL method.
conn.authenticate(url, consumer, token)

>>> conn.ehlo('test')
send: 'ehlo test\r\n'
reply: '250-mx.google.com at your service, [142.255.57.49]\r\n'
reply: '250-SIZE 35882577\r\n'
reply: '250-8BITMIME\r\n'
reply: '250-STARTTLS\r\n'
reply: '250 ENHANCEDSTATUSCODES\r\n'
reply: retcode (250); Msg: mx.google.com at your service, [142.255.57.49]
SIZE 35882577
8BITMIME
STARTTLS
ENHANCEDSTATUSCODES
(250, 'mx.google.com at your service, [142.255.57.49]\nSIZE 35882577\n8BITMIME\nSTARTTLS\nENHANCEDSTATUSCODES')
>>> conn.starttls()
send: 'STARTTLS\r\n'
reply: '220 2.0.0 Ready to start TLS\r\n'
reply: retcode (220); Msg: 2.0.0 Ready to start TLS
(220, '2.0.0 Ready to start TLS')
>>> conn.authenticate(url, consumer, token)
send: 'AUTH XOAUTH R0VUIGh0dHBzOi8vbWFpbC5nb29nbGUuY29tL21haWwvYi90ZXN0aW5nLm9hdXRoLjFAZ21haWwuY29tL3NtdHAvIG9hdXRoX2JvZHlfaGFzaD0iMmptajdsNXJTdzB5VmIlMkZ2bFdBWWtLJTJGWUJ3ayUzRCIsb2F1dGhfY29uc3VtZXJfa2V5PSJhbm9ueW1vdXMiLG9hdXRoX25vbmNlPSI4MTEyMDkxNCIsb2F1dGhfc2lnbmF0dXJlPSJSaUFsTGdQWnpBSkNQJTJGWmx5aGRpYU1CV0xiTSUzRCIsb2F1dGhfc2lnbmF0dXJlX21ldGhvZD0iSE1BQy1TSEExIixvYXV0aF90aW1lc3RhbXA9IjEzNDIwODU2NzIiLG9hdXRoX3Rva2VuPSIxJTJGTUk2QjJEcUpQNEZFa0RSTFVLckQ1bDQ2c1EwNzU4LTJ1Y0VLQlktRGVCMCIsb2F1dGhfdmVyc2lvbj0iMS4wIg==\r\n'
reply: '235 2.7.0 Accepted\r\n'
reply: retcode (235); Msg: 2.7.0 Accepted
>>> 
```

并发送电子邮件：

```
>>> conn.authenticate(url, consumer, token)
send: 'AUTH XOAUTH R0VUIGh0dHBzOi8vbWFpbC5nb29nbGUuY29tL21haWwvYi90ZXN0aW5nLm9hdXRoLjFAZ21haWwuY29tL3NtdHAvIG9hdXRoX2JvZHlfaGFzaD0iMmptajdsNXJTdzB5VmIlMkZ2bFdBWWtLJTJGWUJ3ayUzRCIsb2F1dGhfY29uc3VtZXJfa2V5PSJhbm9ueW1vdXMiLG9hdXRoX25vbmNlPSI2OTg3ODM3NiIsb2F1dGhfc2lnbmF0dXJlPSIlMkZjUGslMkJRVWVJY1RaYXp1ekkwR1FzdkdtbDFBJTNEIixvYXV0aF9zaWduYXR1cmVfbWV0aG9kPSJITUFDLVNIQTEiLG9hdXRoX3RpbWVzdGFtcD0iMTM0MjA4NjAxNCIsb2F1dGhfdG9rZW49IjElMkZNSTZCMkRxSlA0RkVrRFJMVUtyRDVsNDZzUTA3NTgtMnVjRUtCWS1EZUIwIixvYXV0aF92ZXJzaW9uPSIxLjAi\r\n'
reply: '235 2.7.0 Accepted\r\n'
reply: retcode (235); Msg: 2.7.0 Accepted
>>> header = 'To:testing.oauth.1@gmail.com\n' + 'From: testing.oauth.1@gmail.com\n' + 'Subject:testing \n'
>>> msg = header + '\n this is test msg from me \n\n'
>>> conn.sendmail('testing.oauth.1@gmail.com', 'testing.oauth.1@gmail.com', msg)
send: 'mail FROM:<testing.oauth.1@gmail.com> size=107\r\n'
reply: '250 2.1.0 OK gb7sm6540492qab.12\r\n'
reply: retcode (250); Msg: 2.1.0 OK gb7sm6540492qab.12
send: 'rcpt TO:<testing.oauth.1@gmail.com>\r\n'
reply: '250 2.1.5 OK gb7sm6540492qab.12\r\n'
reply: retcode (250); Msg: 2.1.5 OK gb7sm6540492qab.12
send: 'data\r\n'
reply: '354  Go ahead gb7sm6540492qab.12\r\n'
reply: retcode (354); Msg: Go ahead gb7sm6540492qab.12
data: (354, 'Go ahead gb7sm6540492qab.12')
send: 'To:testing.oauth.1@gmail.com\r\nFrom: testing.oauth.1@gmail.com\r\nSubject:testing \r\n\r\n this is test msg from me \r\n\r\n.\r\n'
reply: '250 2.0.0 OK 1342086030 gb7sm6540492qab.12\r\n'
reply: retcode (250); Msg: 2.0.0 OK 1342086030 gb7sm6540492qab.12
data: (250, '2.0.0 OK 1342086030 gb7sm6540492qab.12')
{}
>>> 
```

确保在发送电子邮件之前进行身份验证。
希望这可以帮助 ...

**更新**
可能存在需要重新身份验证的错误，以下应该可以工作。

```
import oauth2 as oauth
import oauth2.clients.smtp as smtplib

consumer = oauth.Consumer('anonymous', 'anonymous')
token = oauth.Token('1/MI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0', 'NysqNqVTulFsdHpSRrPP56sF')

url = "https://mail.google.com/mail/b/testing.oauth.1@gmail.com/smtp/"

conn = smtplib.SMTP('smtp.googlemail.com', 587)
conn.set_debuglevel(True)
conn.ehlo('test')
conn.starttls()

conn.authenticate(url, consumer, token)

header = 'To:testing.oauth.1@gmail.com\n' + 'From: testing.oauth.1@gmail.com\n' + 'Subject:testing \n'
msg = header + '\n this is test msg from me \n\n'
try:
    conn.sendmail('testing.oauth.1@gmail.com', 'testing.oauth.1@gmail.com', msg)
except Exception as ex:
    print str(ex)
    print 'retying ...'
    conn.authenticate(url, consumer, token)
    conn.sendmail('testing.oauth.1@gmail.com', 'testing.oauth.1@gmail.com', msg) 
```

尽管您也可以`xoauth`直接使用：

```
import time
import smtplib
import xoauth

consumer = xoauth.OAuthEntity('anonymous', 'anonymous')
access_token = xoauth.OAuthEntity('1/MI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0', 'NysqNqVTulFsdHpSRrPP56sF')

xoauth_string = xoauth.GenerateXOauthString(consumer, access_token, 'testing.oauth.1@gmail.com', 'smtp', 'testing.oauth.1@gmail.com', str(xoauth.random.randrange(2**64 - 1)), str(int(time.time())))

smtp_conn = smtplib.SMTP('smtp.gmail.com', 587)
smtp_conn.set_debuglevel(True)
smtp_conn.ehlo()
smtp_conn.starttls()
smtp_conn.ehlo()
smtp_conn.docmd('AUTH', 'XOAUTH ' + xoauth.base64.b64encode(xoauth_string))

header = 'To:testing.oauth.1@gmail.com\n' + 'From: testing.oauth.1@gmail.com\n' + 'Subject:testing \n'
msg = header + '\n this is test msg from me \n\n'
smtp_conn.sendmail('testing.oauth.1@gmail.com', 'testing.oauth.1@gmail.com', msg) 
```

这似乎总是有效，我应该向`python-oauth2`团队提交一张票，谢谢。

**尽管这似乎也总是有效**

```
import oauth2 as oauth
import oauth2.clients.smtp as smtplib

consumer = oauth.Consumer('anonymous', 'anonymous')
token = oauth.Token('1/MI6B2DqJP4FEkDRLUKrD5l46sQ0758-2ucEKBY-DeB0', 'NysqNqVTulFsdHpSRrPP56sF')

url = "https://mail.google.com/mail/b/testing.oauth.1@gmail.com/smtp/"

conn = smtplib.SMTP('smtp.googlemail.com', 587)
conn.set_debuglevel(True)
conn.ehlo('test')
conn.starttls()
conn.ehlo()
conn.authenticate(url, consumer, token)
header = 'To:testing.oauth.1@gmail.com\n' + 'From: testing.oauth.1@gmail.com\n' + 'Subject:testing \n'
msg = header + '\n this is test msg from me \n\n'
conn.sendmail('testing.oauth.1@gmail.com', 'testing.oauth.1@gmail.com', msg) 
```

看来您需要`conn.ehlo()`在进行身份验证之前致电。

# php - PHP PDO::lastInsertId() 和 ATTR_PERSISTENT

> ID：11445525
> 
> 赞同：1
> 
> 时间：2012-07-12T05:32:29.013
> 
> 标签：php, pdo, last-insert-id

我和这个几乎有同样的[问题](https://stackoverflow.com/questions/10711966/how-can-i-make-sure-that-pdos-lastinsertid-is-not-that-of-another-simultaneou)。

根据那篇文章，我知道 PDO::lastInsertId() 从不同的连接调用时是安全的。但是，如果您想在该连接期间使用 PDO::lastInsertId()，这是否意味着不应在 PDO 构造函数中*使用*`PDO::ATTR_PERSISTENT => true`？

 *换句话说，如果我需要使用 PDO::lastInsertId() 是我的应用程序被迫忍受“每次脚本需要与数据库对话时建立新连接的开销”，如[PDO Connections and Connection Management](http://www.php.net/manual/en/pdo.connections.php)中所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:36:15.753

不，这并不意味着。

在您的 php 脚本结束其工作后，谁将使用相同的连接并不重要。重要的是您将拥有由此执行的最后插入的 id，而不是另一个连接。

因此，请随意将它与持久连接和非持久连接一起使用。*

# jquery - jQuery添加变量

> ID：11445526
> 
> 赞同：0
> 
> 时间：2012-07-12T05:32:29.623
> 
> 标签：jquery

[我在这里](https://stackoverflow.com/a/10400225)找到了一个脚本，它可以使连续 div 的高度相等（引导程序）。例如，如何将 20 添加到它计算的新高度？

这是脚本和 jsFiddle：http: [//jsfiddle.net/MVP3C/](http://jsfiddle.net/MVP3C/)

```
$('.well, .alert').height(function () {
    var h = _.max($(this).closest('.row').find('.well, .alert'), function (elem, index, list) {
        return $(elem).height();
    });
    return $(h).height();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:33:59.703

尝试以下代码段：

```
var HeightIncrement = 20; // the increment you need

var h = _.max($('.row').
    find('.well, .alert'),
    function (elem, index, list) {
        return $(elem).height();
    });
var maxHeight = $(h).height();

$('.well, .alert').height(function () {
    return maxHeight + HeightIncrement;
}); 
```

本质上，只需要预先计算共同高度（`maxHeight`变量），然后`.height(...)`以递增的共同高度值运行该函数。

[http://jsfiddle.net/pJ8zQ/](http://jsfiddle.net/pJ8zQ/)

# powershell - 如何使用 powershell 替换 KMZ 文件中的字符串

> ID：11445529
> 
> 赞同：1
> 
> 时间：2012-07-12T05:32:40.993
> 
> 标签：powershell, kml, replace, unzip, kmz

我需要修改 KML/KMZ 文件中的属性字符串，我已将 KMZ 文件解压缩到临时文件夹，并且需要通过 KML 文件更改名称字符串（出现时的所有名称字符串）所以 powershell 可以提供帮助，但我不太确定如何，我是powershell的新手。我怎么能这样做？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:45:12.200

如果没有示例，此示例不准确，但您必须执行以下操作：

```
(get-content c:\temp\yourfile.kml ) | % {  $_ -replace 'name','anothername' } | 
set-content c:\temp\yourfile.kml 
```

这将任何 'name' 字符串更改为 'anothername' 字符串：

```
myname it's my name 
```

变得

```
myanothername it's my anothername 
```

# java - 替换 UNIX 中的换行符

> ID：11445532
> 
> 赞同：2
> 
> 时间：2012-07-12T05:32:48.393
> 
> 标签：java, windows, unix, newline

我正在编写代码来替换字符串中的换行符。在 Windows 上，当我使用

```
String.replaceAll(System.getProperty("line.separator"), "\\n"); 
```

这工作正常，但在 UNIX 中失败。

我应该在 UNIX 中使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:35:55.103

`\n`对于 Unix 是正确的。Windows 使用`\r\n`，Mac 使用`\r`IIRC。

问题可能在于 Java 作为一种多平台语言，会自动替换`\n`为系统的分隔符。我不知道Java，但我认为是这种情况。

编辑：如果您发布的代码是您正在使用的，我想我看到了问题。`String`是一类。它在 Java 中也是不可变的。它应该是这样的：

```
String myStr = "abc\ndef";
myStr = myStr.replaceAll(/* params */); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T04:07:51.903

接收到的文本可能包含 windows 行分隔符，因此仅替换`\n`字符没有效果。

如果您不知道文本的来源（或文本包含混合行分隔符），以下方法可以提供帮助。首先将windows和mac的行分隔符转换为unix分隔符，然后将unix分隔符转换为系统分隔符。

```
final String DOS = "\r\n", NIX = "\n", MAC = "\r";
String converted = original.replace(DOS, NIX)
                           .replace(MAC, NIX)
                           .replace(NIX, System.lineSeparator()); 
```

# android - 在 Android 的嵌套 PreferenceScreens 中处理 BackKeyButton

> ID：11445542
> 
> 赞同：1
> 
> 时间：2012-07-12T05:34:05.317
> 
> 标签：android, preferencescreen

我有一个像这样的 PreferenceScreens

```
<PreferenceScreen android:id="outer">
 <PreferenceScreen android:id="outer">
  <ListPreference ...></ListPreference>
    <PreferenceScreen android:id="inner1">
      <CheckboxPreference ...></CheckboxPreference>
      <CheckboxPreference ...></CheckboxPreference>
      <CheckboxPreference ...></CheckboxPreference>
 </PreferenceScreen>  
  <PreferenceScren  android:id="inner2">
  </PreferenceScreen>
</PreferenceScren> 
```

1) 因此，当我单击 ID 为“inner1”的首选项屏幕时，我的所有复选框首选项都会出现一个新的首选项屏幕。在该偏好屏幕中执行一些操作后，我按下后退按钮转到我的主 PreferenceScreen（id 外部）。当用户在preferencescreen（id inner1）中按下backkey时，我想执行一些操作，如何处理？

我不能使用 public boolean onKeyDown(int keyCode, KeyEvent event) 因为它没有被触发（因为它不是一个活动）。

谁能帮帮我…………？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:20:43.130

对于偏好，我们确实有偏好活动，您可以在您的活动中扩展它，然后您也可以访问 onkeydown 或 onkeyup 方法。我希望这个链接对你有帮助。[http://developer.android.com/reference/android/preference](http://developer.android.com/reference/android/preference)

# asp.net - 如何将html表格导出到excel？

> ID：11445545
> 
> 赞同：0
> 
> 时间：2012-07-12T05:34:24.553
> 
> 标签：asp.net

我想从我的内容页面将 html 表（不是网格）导出到 excel。我知道如何将网格导出到 excel。相同的方式还是不同的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:40:05.173

尝试使用以下代码，这将对您有所帮助：

```
 private void ExportToExcel(string strFileName,Table dg)
    {
            Response.Clear();
            System.IO.StringWriter oStringWriter = new System.IO.StringWriter();

            Response.ClearHeaders();
            Response.AddHeader("content-disposition", "attachment;filename=" + strFileName + ".xls");

            Response.ContentType = "application/vnd.ms-excel";
            Response.Charset = "";
            this.EnableViewState = false;

            System.Web.UI.HtmlTextWriter oHtmlTextWriter = new System.Web.UI.HtmlTextWriter(oStringWriter);
            dg.RenderControl(oHtmlTextWriter);
            Response.Write(oStringWriter.ToString());
            Response.End();
    } 
```

# sql - 如何快速更新范围内的极端列？

> ID：11445551
> 
> 赞同：0
> 
> 时间：2012-07-12T05:35:11.477
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有 40 个如下所示的表，每个表包含 3000 万条记录。

表`RawData`：PK( `CaregoryID`, `Time`)

```
CategoryID  Time                        IsSampled  Value
-----------------------------------------------------------
1           2012-07-01 00:00:00.000     0 -> 1     65.36347
1           2012-07-01 00:00:11.000     0          80.16729
1           2012-07-01 00:00:14.000     0          29.19716
1           2012-07-01 00:00:25.000     0 -> 1      7.05847
1           2012-07-01 00:00:36.000     0 -> 1     98.08257
1           2012-07-01 00:00:57.000     0          75.35524
1           2012-07-01 00:00:59.000     0          35.35524 
```

截至目前，`IsSampled`所有记录的列均为 0。
我需要更新记录，以便对于每个 CategoryID 和每个分钟范围，具有 Max(Value)、Min(Value) 和第一条记录的记录应该为 1 `IsSampled`。

以下是我创建的程序查询，但运行时间太长。（每桌约 2h 30m）

```
DECLARE @startRange datetime 
DECLARE @endRange datetime 
DECLARE @endTime datetime 
SET @startRange = '2012-07-01 00:00:00.000'
SET @endTime = '2012-08-01 00:00:00.000'

WHILE (@startRange < @endTime)
BEGIN
    SET @endRange = DATEADD(MI, 1, @startRange)

    UPDATE r1
    SET IsSampled = 1
    FROM RawData AS r1
    JOIN 
    (
      SELECT r2.CategoryID, 
             MAX(Value) as MaxValue, 
             MIN(Value) as MinValue, 
             MIN([Time]) AS FirstTime
      FROM RawData AS r2
      WHERE @startRange <= [Time] AND [Time] < @endRange
      GROUP BY CategoryID
    ) as samples
    ON r1.CategoryID = samples.CategoryID
       AND (r1.Value = samples.MaxValue 
            OR r1.Value = samples.MinValue 
            OR r1.[Time] = samples.FirstTime)
       AND @startRange <= r1.[Time] AND r1.[Time] < @endRange

    SET @startRange = DATEADD(MI, 1, @startRange)   
END 
```

有没有办法更快地更新这些表（大概以非程序方式）？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:08:27.223

我不确定它的性能如何，但它是一种比您当前的方法更基于集合的方法：

```
declare @T table (CategoryID int not null,Time datetime2 not null,IsSampled bit not null,Value decimal(10,5) not null)
insert into @T (CategoryID,Time,IsSampled,Value) values
(1,'2012-07-01T00:00:00.000',0,65.36347),
(1,'2012-07-01T00:00:11.000',0,80.16729),
(1,'2012-07-01T00:00:14.000',0,29.19716),
(1,'2012-07-01T00:00:25.000',0,7.05847),
(1,'2012-07-01T00:00:36.000',0,98.08257),
(1,'2012-07-01T00:00:57.000',0,75.35524),
(1,'2012-07-01T00:00:59.000',0,35.35524)

;with BinnedValues as (
    select CategoryID,Time,IsSampled,Value,DATEADD(minute,DATEDIFF(minute,0,Time),0) as TimeBin
    from @T
), MinMax as (
    select CategoryID,Time,IsSampled,Value,TimeBin,
        ROW_NUMBER() OVER (PARTITION BY CategoryID, TimeBin ORDER BY Value) as MinPos,
        ROW_NUMBER() OVER (PARTITION BY CategoryID, TimeBin ORDER BY Value desc) as MaxPos,
        ROW_NUMBER() OVER (PARTITION BY CategoryID, TimeBin ORDER BY Time) as Earliest
    from
        BinnedValues
)
update MinMax set IsSampled = 1 where MinPos=1 or MaxPos=1 or Earliest=1

select * from @T 
```

结果：

```
CategoryID  Time                   IsSampled Value
----------- ---------------------- --------- ---------------------------------------
1           2012-07-01 00:00:00.00 1         65.36347
1           2012-07-01 00:00:11.00 0         80.16729
1           2012-07-01 00:00:14.00 0         29.19716
1           2012-07-01 00:00:25.00 1         7.05847
1           2012-07-01 00:00:36.00 1         98.08257
1           2012-07-01 00:00:57.00 0         75.35524
1           2012-07-01 00:00:59.00 0         35.35524 
```

`TimeBin`如果该列可以作为计算列添加到表中并添加到适当的索引中，则可能会加快速度。

还应该注意的是，这会将*最多*3 行标记为采样 - 如果最早的也是最小值或最大值，它只会被标记一次（显然），但下一个最近的最小值或最大值不会被标记。此外，如果多行具有相同的`Value`，即最小值或最大值，则将任意选择其中一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:08:55.970

您可以将循环中的更新重写为：

```
 UPDATE r1
   SET   IsSampled = 1
   FROM  RawData r1
   WHERE r1.Time >= @startRange and Time < @endRange

   AND NOT EXISTS
    (
        select *
        from    RawData r2
        where   r2.CategoryID = r1.CategoryID
        and     r2.Time >= @startRange and r2.Time < @endRange 
        and     (r2.Time < r1.Time or r2.Value < r1.Value or r2.Value > r1.Value)
    ) 
```

要获得实际的性能改进，您需要在 Time 列上建立索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:32:31.493

嗨试试这个查询。

```
declare @T table (CategoryID int not null,Time datetime2 not null,IsSampled bit not null,Value decimal(10,5) not null)
insert into @T (CategoryID,Time,IsSampled,Value) values
(1,'2012-07-01T00:00:00.000',0,65.36347),
(1,'2012-07-01T00:00:11.000',0,80.16729),
(1,'2012-07-01T00:00:14.000',0,29.19716),
(1,'2012-07-01T00:00:25.000',0,7.05847),
(1,'2012-07-01T00:00:36.000',0,98.08257),
(1,'2012-07-01T00:00:57.000',0,75.35524),
(1,'2012-07-01T00:00:59.000',0,35.35524)

;WITH CTE as (SELECT CategoryID,CAST([Time] as Time) as time,IsSampled,Value FROM @T)

,CTE2 as (SELECT CategoryID,Max(time) mx,MIN(time) mn,'00:00:00.0000000' as start FROM CTE where time <> '00:00:00.0000000' Group by CategoryID)

update @T SET IsSampled=1
FROM CTE2 c inner join @T t on c.CategoryID = t.CategoryID and (CAST(t.[Time] as Time)=c.mx or CAST(t.[Time] as Time)=c.mn or CAST(t.[Time] as Time)=c.start)

select * from @T 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T10:34:46.807

嗨，这是最新更新的查询。检查查询的性能：

```
declare @T table (CategoryID int not null,Time datetime2 not null,IsSampled bit not null,Value decimal(10,5) not null)
insert into @T (CategoryID,Time,IsSampled,Value) values
(1,'2012-07-01T00:00:00.000',0,65.36347),
(1,'2012-07-01T00:00:11.000',0,80.16729),
(1,'2012-07-01T00:00:14.000',0,29.19716),
(1,'2012-07-01T00:00:25.000',0,7.05847),
(1,'2012-07-01T00:00:36.000',0,98.08257),
(1,'2012-07-01T00:00:57.000',0,75.35524),
(1,'2012-07-01T00:00:59.000',0,35.35524)

;WITH CTE as (SELECT CategoryID,Time,CAST([Time] as Time) as timepart,IsSampled,Value FROM @T)
--SELECT * FROM CTE

,CTE2 as (SELECT CategoryID,Max(value) mx,MIN(value) mn FROM CTE 
where timepart <> '00:00:00.0000000' and Time <=DATEADD(MM,1,Time)
 Group by CategoryID)

,CTE3 as (SELECT CategoryID,Max(value) mx,MIN(value) mn FROM CTE 
where timepart = '00:00:00.0000000' and Time <=DATEADD(MM,1,Time)
 Group by CategoryID)

update @T SET IsSampled=1
FROM @T t left join CTE2 c1
on (t.CategoryID = c1.CategoryID  and (t.Value = c1.mn or t.Value =c1.mx))
left join CTE3 c3 on(t.CategoryID = c3.CategoryID and t.Value = c3.mx)
where (c1.CategoryID is not null or c3.CategoryID is not null)

select * from @T 
```

# c# - 当我拒绝写入权限时，使用 NTFS 拒绝读取权限

> ID：11445553
> 
> 赞同：1
> 
> 时间：2012-07-12T05:35:24.520
> 
> 标签：c#, permissions, ntfs

使用下面的代码，我拒绝了用户的写入权限，即使我检查了安全选项卡，也只有写入权限被拒绝，但我无法访问该文件夹进行读取。

```
ADsSecurity objADsSec;
SecurityDescriptor objSecDes;
AccessControlList objDAcl;
AccessControlEntry objAce1;
AccessControlEntry objAce2;
Object objSIdHex;
ADsSID objSId;

objADsSec = new ADsSecurityClass();
objSecDes = (SecurityDescriptor)(objADsSec.GetSecurityDescriptor("FILE://" + vPath));
objDAcl = (AccessControlList)objSecDes.DiscretionaryAcl;

objSId = new ADsSIDClass();
objSId.SetAs((int)ADSSECURITYLib.ADS_SID_FORMAT.ADS_SID_SAM, UserName.ToString());
objSIdHex = objSId.GetAs((int)ADSSECURITYLib.ADS_SID_FORMAT.ADS_SID_SDDL);

objAce2 = new AccessControlEntryClass();
objAce2.Trustee = (objSIdHex).ToString();
objAce2.AccessMask = (int)ActiveDs.ADS_RIGHTS_ENUM.ADS_RIGHT_GENERIC_WRITE;
objAce2.AceType = (int)ActiveDs.ADS_ACETYPE_ENUM.ADS_ACETYPE_ACCESS_DENIED;
objAce2.AceFlags = (int)ActiveDs.ADS_ACEFLAG_ENUM.ADS_ACEFLAG_INHERIT_ACE | 1;
objDAcl.AddAce(objAce2);

objSecDes.DiscretionaryAcl = objDAcl;

// Set permissions on the NTFS file system folder.
objADsSec.SetSecurityDescriptor(objSecDes, "FILE://" + vPath); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:51:14.730

你没有显示 objAce1

您需要在授予 ACE条目*之前订购拒绝 ACE 条目。*

尝试交换 ACL 中的条目顺序。

> 因此，应该对 DACL 的 ACE 列表进行适当排序。标准（规范）排序是首先放置显式拒绝，然后显式允许，一般（组）拒绝和组允许。如果不使用规范排序，则可能会发生意外的允许或拒绝

从[了解 Windows 文件和注册表权限](http://msdn.microsoft.com/en-us/magazine/cc982153.aspx)

# wcf - WCF：如何改变消息的处理顺序？

> ID：11445557
> 
> 赞同：1
> 
> 时间：2012-07-12T05:35:51.197
> 
> 标签：wcf

我的 wcf-service 必须按特定顺序处理来自客户端的消息。如果消息包含相同的标记（例如定义为操作的参数），则这些消息必须按顺序处理，它们不能在不同的线程中同时处理。具有相同标签的消息可能来自不同的客户端。如何实现这个要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:28:49.220

有一种称为[Resequencer](http://eaipatterns.com/Resequencer.html)的集成设计模式，它描述了您需要执行哪些操作来实现消息的有序传递。

# regex - R编程：正则表达式下一次出现

> ID：11445560
> 
> 赞同：1
> 
> 时间：2012-07-12T05:36:02.710
> 
> 标签：regex, r

我有以下代码和结果：

```
> x <- c("ABCDE CDEFG FGHIJ")
> x
[1] "ABCDE CDEFG FGHIJ"
> regexpr("D", x)
[1] 4
attr(,"match.length")
[1] 1 
```

regexpr 只返回第一次出现的“D”，我怎样才能让它返回所有出现的“D”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:00:47.153

你是如此接近 - 从帮助文件中只剩下几行`regexpr`......

```
gregexpr("D", x)
# [[1]]
# [1] 4 8
# attr(,"match.length")
# [1] 1 1
# attr(,"useBytes")
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:15:19.517

您也可以像这样使用 strsplit ：

```
which(unlist(strsplit(x,split=""))=="D")
[1] 4 8 
```

这样，您也可以完全匹配 D。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:53:08.047

我相信会有一个纯粹的 `regex`方法。不过`stringr::str_locate_all`就够了

```
library(stringr)

unique(unlist(str_locate_all(x, 'D')))

## [1] 4  8 
```

# actionscript-3 - 多个 Actionscript 3 层

> ID：11445563
> 
> 赞同：2
> 
> 时间：2012-07-12T05:36:20.907
> 
> 标签：actionscript-3, flash, actionscript, layer

我想知道我是否将用于不同部分的某些代码分成不同的层，它们之间是否具有功能或充当单独的东西。（我可以从另一层引用一个变量吗？）

基本上，我有一组贯穿每一帧的代码，但也需要特定于某些帧的代码，但仍然能够访问主代码。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T05:58:45.697

您可以拥有跨越多个框架的代码以及单个框架脚本：

![时间线](../Images/df2a048e7c7b5be67c68c7e418a32406.png)

在这种情况下，图层中的单个关键帧脚本`actions`可以调用定义在 中的函数`main actions`，同样`main actions`可以从图层当前帧中的代码调用函数`actions`。

随着应用程序复杂性的增加，您可能需要考虑在框架脚本上使用类，为您的项目定义一个基本文档类。

![文档类](../Images/c0c8a78c51362940885f97327a5d9f31.png)

同样，通过 AS Linkage 在库中为每个符号定义类：

![图书馆](../Images/acb0e323c87e914ae4f72c6e90c9cb07.png)

有许多用于大型应用程序的设计模式来降低复杂性。

# android - 如何导入 com.android.mms.R？

> ID：11445567
> 
> 赞同：0
> 
> 时间：2012-07-12T05:36:52.773
> 
> 标签：android, mms

在某些类的android源代码中，他们导入了com.android.mms.R，但我尝试后无法做到。有没有什么方法可以导入com.android.mms.R？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:40:50.193

如果您的课程已经导入`import com.android.R`，请将其删除。并清理项目重建它。从项目>清洁

如果您使用 R.XXXX 的任何 Res，您的项目 R 将自动导入或执行**ctrl + shift + O**

此外，如果它不起作用转到属性（右键单击项目）> Android 在这里选择目标版本为 4.0，然后清理它会去..首先`import com.android.R`从类中删除行

# php - 如何使 CodeIgniter 的分析器和 ajax 请求运行良好

> ID：11445569
> 
> 赞同：3
> 
> 时间：2012-07-12T05:37:58.233
> 
> 标签：php, codeigniter

据我所知，ajax 讨厌启用 CI 分析器，因为它将 html 注入到最后的方法`view()`中。这与.`success:``$.ajax()`

我的想法是，与其定义`$this->output->enable_profiler(false);`用于 ajax 调用的所有方法，我可以在扩展 CI_Controller.. 或其他地方的钩子或核心控制器中使用以下代码，只是不确定将其放在哪里。

```
<?php
if( $this->input->is_ajax_request() ){
    $this->output->enable_profiler(false);
} 
```

## 问题：

我可以在哪里放置以下代码，以使 CI 禁用探查器（如果它仅针对将在所有区域全局生效的 ajax 请求启用）。当然，如果有更好的解决方案，请告诉我。但谷歌什么也没透露。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T06:25:21.970

请扩展核心控制器并在构造函数中检查 post 数组中的特殊 post 变量名称并禁用分析器。

```
class MY_Controller extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        if(isset($_POST['is_ajax_request'])
            $this->output->enable_profiler(false);
    }
} 
```

发送 ajax 请求时，发送一个字段 is_ajax_request 以禁用分析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T21:40:57.693

我知道这是答案，但我使用它而不是在 MY_Controller.php 中传递一个字段

```
 if($this->input->is_ajax_request()) {
        $this->output->enable_profiler(false);
    } else {
        $this->output->enable_profiler(true);
    } 
```

在 Chrome 中测试过，而且只需要在我的开发盒上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:04:10.057

你不能简单地代替

```
echo json_encode($json); 
```

做一个

```
die(json_encode($json)); 
```

? 使系统没有机会打印出探查器。

# javascript - 根据先前复选框的状态将复选框重置为页面加载状态

> ID：11445570
> 
> 赞同：0
> 
> 时间：2012-07-12T05:38:00.767
> 
> 标签：javascript, jquery, html

我有一个页面，它有一个表单和一个生成的内容区域，它们都通过复选框隐藏了部分和子部分。（复选框隐藏在页面上，但不在小提琴上显示复选框的“已选中”状态）

[这](http://fiddle.jshell.net/chrisfrisina/hnbz4/)是小提琴。它可能看起来很多，但坚持下去，它真的不是。我有一个应该很简单的问题，让我告诉你问题出在哪里。

我正在尝试向页面添加功能，以便当用户从左侧窗格中取消选择某个部分的所有子部分时，该部分作为一个整体隐藏在左侧，而右侧表单让您知道整个部分被隐藏（小提琴中的红色文本），但不允许更改小节以保持持久性。我可以通过在左侧窗格中单击它们来隐藏所有子部分，左侧部分消失，右侧子部分隐藏自己，通知您它的右侧标题隐藏在左侧。问题出在单击右侧标题以取消隐藏左侧部分时，子部分不再可见或“重置”。

这是处理检查是否所有小节都隐藏的代码：

```
if (($('fieldset.abstract > div > input:checkbox:checked').length+1) == 7){
    //Left Side
    $('.block > .abstract > .superseven > section input').each(function(){
        $(this).prop('checked' , true);
    });
    $('.block > .abstract > .superseven > section').eq(index).hide();  
    $('.block > .abstract').hide("slow");
    //Right Side
    $('fieldset.abstract label:first').toggleClass('hidden');
    $('fieldset.abstract > div > input').each(function(){
            $(this).prop('checked' , false);
    });
    $('fieldset.abstract > div > label').each(function(){
            $(this).hide("slow");
    }); 
```

仅在隐藏所有小节之后，如何将复选框“重置”为页面加载？应该是，一旦用户单击右侧部分标题以将部分带回左侧，所有子部分都可见。

*   如果我在单击右侧部分标题时应用常规条件（类似于标记为 JS 的下部`//Toggle Section completely`），则从仅隐藏几个子部分然后隐藏整个部分时，它将不会保持持久性。
*   我在想，如果我跟踪状态变量，但不知道 Jquery 中的变量作用域（我认为它必须是全局的，我认为这不是好的做法），这可能是可能的，
*   或者 Jquery 的整个部分可以包装在一个自调用函数中，如下所示：

    (函数名() { ... })();

我可以使用任何其他编程方法吗？

很抱歉，对于 js/jquery 的新手来说，这很深入，我希望小提琴会有所帮助，而不是伤害。

澄清应该发生的事情：

*   单击所有左侧小节，它们就会消失
*   右侧的小节（仅限标签，因为所有复选框在实时页面中都不可见）应该消失
*   右侧部分标题应变为红色
*   单击右侧部分标题
*   左侧部分应该出现（所有这一切都在这里工作，这是它中断的地方）并且左侧的所有子部分都应该可见，就像它被重置一样（与页面加载时相同，但仅适用于此特定部分，因为这些部分有多个），因为用户隐藏了所有子部分，所以整个部分都被隐藏了，现在用户想要左侧部分，并且所有子部分都应该可见。

笔记：

当前工作功能：

*   从标题中隐藏整个部分
*   隐藏除一个小节之外的所有小节
*   隐藏小节，然后选择隐藏整个部分，并在取消隐藏整个部分时保持持久性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:33:46.570

对于初始块的问题，我认为是宽度问题，尝试更改一些宽度，尝试 14.28 而不是 14.326647564469914，（我通过 iPad 响应并且此设备正常工作）

总结评论，这段代码：重置初始案例并设置子部分的正确宽度

```
if(!$('.block > .abstract').is(':visible')) {
      $('fieldset.abstract #abstract_all').prop('checked' , false);
      $('.superseven ').children().show();
      var width = ((1/7)*100);
      $('.superseven ').find('div').css("width", width + '%') 
```

# javascript - 将表单复制到 Backbone.js 模型

> ID：11445576
> 
> 赞同：0
> 
> 时间：2012-07-12T05:38:53.840
> 
> 标签：javascript, model, backbone.js

我有一个表格：

```
<form>
    <input type="text" name="email" >
    <input type="text" name="phone" >
    <input type="button" value="ok" />
</form> 
```

单击按钮时，我想将表单值复制到相应的模型中。

我发现[Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)会在值更改时自动将值复制到模型，但这不是我想要的，我只想在单击按钮时复制值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:16:33.483

这段代码可能是你需要的：</p>

```
events: {
  ...
  'click input[value="ok"]': 'collectData2Model'
  ...
},

...
//suppose employee is your model
collectData2Model: function(e) {
    var employee = new Employee();
    var attr = {};
     $('input').each(function(){
            var input = $(this);
            attr[input.attr('name')] = input.val();
      });
       employee.bind('error',function(model,error){
            alert(error);
        });
      // set method will automatically call the model's validate method 
       employee.set(attr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:33:05.130

将自定义函数写入表单所在的视图中，并将其绑定到 ok click 事件：

```
events: {
  ...
  'click input[name="ok"]': 'copyFormToModel'
  ...
},

...

copyFormToModel: function() {
  var email = $('input[name="email"]').val();
  var phone = $('input[name="phone"]').val();

  // Perform some sort of validation

  this.model.email = email;
  this.model.phone = phone;
} 
```

这不是最漂亮的答案，但如果您的页面中只有一个小表单，那么使用一些库或插件可能有点过头了。如果您想使用插件或库，那么对于您的情况，我认为[骨干形式](https://github.com/powmedia/backbone-forms)可以解决问题。它的特点是使用方法调用而不是每次更新字段时更新绑定到表单的模型。

# image - 将png图像转换为gif而不丢失透明度

> ID：11445578
> 
> 赞同：0
> 
> 时间：2012-07-12T05:38:54.923
> 
> 标签：image

你好，

我有一个透明的 png 格式图像。但是 SAP 系统不支持 PNG 格式。所以我想将其转换为 GIF 或 JPEG。我尝试使用 Adob​​e Photoshop 和其他一些工具对其进行转换，但生成的图像失去了透明度。任何人都可以告诉我解决方案吗？？？[这是我的图像](http://postimage.org/image/54fh8g2a9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:07:36.240

是的，您可以在不丢失透明度的情况下将 png 转换为 GIF 或 JPEG ......这是通过 php lang 的帮助完成的......

```
<?php
$src = imagecreatefrompng("original_image.png");
$newImg = imagecreatetruecolor($nWidth, $nHeight);
 imagealphablending($newImg, false);
 imagesavealpha($newImg,true);
 $transparent = imagecolorallocatealpha($newImg, 255, 255, 255, 127);
 imagefilledrectangle($newImg, 0, 0, $nWidth, $nHeight, $transparent);
 imagecopyresampled($newImg, $im, 0, 0, 0, 0, $nWidth, $nHeight,
                      $imgInfo[0], $imgInfo[1]);

imagejpeg($newImg,"jpec_test_1.JPG",100);

imagedestroy($src);
imagedestroy($newImg);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:00:44.057

即使我没有很快成功地使用 Gimp 实现这一点，我也找到了一个适合您需求的网站。它是一个在线工具：您无需下载任何东西，只需上传您的 png 图像，然后下载生成的 gif。试试看：

> [http://images.my-addr.com/converter_png_to_gif_online_freeware_tool.php](http://images.my-addr.com/converter_png_to_gif_online_freeware_tool.php)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:43:52.793

您无法转换为 JPEG，因为它不支持透明度。您应该能够转换为 GIF，只需确保选中透明度旁边的框即可。但是，您链接到的图像实际上似乎没有透明度。幸运的是，该图像是一个非常简单的渐变，您可以在 Photoshop 中轻松复制它，然后将其保存为带透明度的 GIF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-19T08:37:08.763

正如@Valjas 所指出的，您的JPEG 不支持透明度。如果您只是为了减小文件大小而进行转换，因为 JPEG 具有更好的压缩率，您可能需要使用[https://tinypng.com/](https://tinypng.com/)。它还有一个 API。我只是用它来减少几个 PNG 的文件大小。

顺便说一句，我在寻找同样的问题时发现了这些信息；）

# .net - 如何在 YUICompressor.targets 中使用 $(OutDir)？

> ID：11445579
> 
> 赞同：2
> 
> 时间：2012-07-12T05:39:02.043
> 
> 标签：.net, asp.net-mvc, msbuild, appharbor, yui-compressor

我有 YUICompressor.NET，http://yuicompressor.codeplex.com/，[配置](http://yuicompressor.codeplex.com/)为 msbuild 任务，它在我的开发机器上按预期工作。

当我将代码推送到 AppHarbor 时，我收到以下构建错误：

```
D:\temp\q2hapsex.50d\input\Projects\CroquetScores.Web\Build\YUICompressor.targets(21,9):
error MSB4062: The "CompressorTask" task could not be loaded from the assembly
D:\temp\q2hapsex.50d\input\Projects\CroquetScores.Web\Build\..\Bin\Yahoo.Yui.Compressor.MsBuildTask.dll.
Could not load file or assembly
'file:///D:\temp\q2hapsex.50d\input\Projects\CroquetScores.Web\Bin\Yahoo.Yui.Compressor.MsbuildTask.dll' 
or one of its dependencies. The system cannot find the file specified. 
Confirm that the <UsingTask> declaration is correct, that the assembly and all its
dependencies are available, and that the task contains a public class that implements
Microsoft.Build.Framework.ITask 
```

我已经尝试了[http://support.appharbor.com/discussions/problems/3629-yuicompresoor-msbuild-task](http://support.appharbor.com/discussions/problems/3629-yuicompresoor-msbuild-task)的建议，方法是将 YUICompressor.targets 中的 using 任务更改为：

```
<UsingTask TaskName="CompressorTask" AssemblyFile="..\Bin\Yahoo.Yui.Compressor.MsBuildTask.dll" /> 
```

至

```
<UsingTask TaskName="CompressorTask" AssemblyFile="$(OutDir)Yahoo.Yui.Compressor.MsBuildTask.dll" /> 
```

我使用以下命令在本地机器上测试设置：

```
msbuild AppHarbor.sln /property:Configuration=Release /property:OutDir=D:\temp\TestingAppHarbor\ 
```

但除了路径信息外，它会导致相同的错误：

```
D:\Code\croquetscores.com\Projects\CroquetScores.Web\Build\YUICompressor.targets(21,9): 
error MSB4062: The "CompressorTask" task could not be loaded from the assembly
D:\Code\croquetscores.com\Projects\CroquetScores.Web\Build\Yahoo.Yui.Compressor.MsBuildTask.dll. 
Could not load file or assembly
'file:///D:\Code\croquetscores.com\Projects\CroquetScores.Web\Build\Yahoo.Yui.Compressor.MsBuildTask.dll'
or one of its dependencies. The system cannot find the file specified. 
Confirm that the <UsingTask> declaration is correct, that the assembly and all its
dependencies are available, and that the task contains a public class that implements
Microsoft.Build.Framework.ITask. 
```

如果我将 YUICompressor.targets 中的 $(OutDir) 替换为实际路径，则解决方案的构建不会出错。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:14:59.993

[我认为使用属性函数](http://msdn.microsoft.com/en-us/library/dd633440.aspx)会更好。

```
<PropertyGroup>
    <YuiCompressorDir>$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)..\Bin'))</YuiCompressorDir>
</PropertyGroup>
<UsingTask TaskName="CompressorTask" AssemblyFile="$(YuiCompressorDir)\Yahoo.Yui.Compressor.MsBuildTask.dll" /> 
```

您可以查看来自[ASP.NET Web Stack](http://aspnetwebstack.codeplex.com/)项目的*实时* [示例。](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1ccfcdfc11da#tools/WebStack.settings.targets)

# directshow - Directshow 播放器和无窗口 activex

> ID：11445583
> 
> 赞同：1
> 
> 时间：2012-07-12T05:39:13.690
> 
> 标签：directshow

我正在尝试将基于 directshow 的视频播放器实现为无窗口的 activex。计划是使用播放器并用 html 元素覆盖它。

我面临的问题是，为了让无窗口activex 正确显示视频，需要将视频绘制到容器（即Internet Explorer）提供的内存DC 上。我正在尝试编写自定义分配器演示者，但没有取得太大进展..

关于如何最好地实现这一点的任何指示？

# javascript - 任何用于动态加载外部 JS 的 javascript 事件？

> ID：11445587
> 
> 赞同：1
> 
> 时间：2012-07-12T05:39:29.480
> 
> 标签：javascript, jquery, javascript-events

我一直在研究一个加载外部 jQuery.js 文件的书签项目，如下所示：

```
jq_script = document.createElement('SCRIPT');
jq_script.type = 'text/javascript';
jq_script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js';
document.getElementsByTagName('head')[0].appendChild(jq_script); 
```

但是当我在此之后尝试使用 jQuery 时，我收到：

```
Uncaught ReferenceError: jQuery is not defined 
```

在 chrome JS 控制台上。

加载单个 dom 实例时是否会调用任何“事件”？（或者像这样加载外部 JS 文件时触发的任何事件？）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:41:40.517

`<script>`元素有一个`onload`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:43:55.983

你可以这样做

```
function loadScript()
{
 jq_script = document.createElement('SCRIPT');
 jq_script.type = 'text/javascript';
 jq_script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js';
 document.getElementsByTagName('head')[0].appendChild(jq_script);
}

window.onload = loadScript; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:46:20.593

**更新：使用下面的最新 jquery 代码。**

jQuery 的[getScript](http://api.jquery.com/jQuery.getScript)以下列方式处理它。你可以把你的功能放在里面`if(!isAbort)`。

```
script = document.createElement( "script" );

script.async = "async";

if ( s.scriptCharset ) {
    script.charset = s.scriptCharset;
}

script.src = s.url;

// Attach handlers for all browsers
script.onload = script.onreadystatechange = function( _, isAbort ) {

    if ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {

        // Handle memory leak in IE
        script.onload = script.onreadystatechange = null;

        // Remove the script
        if ( head && script.parentNode ) {
            head.removeChild( script );
        }

        // Dereference the script
        script = undefined;

        // Callback if not abort
        if ( !isAbort ) {
            //**Do your stuff here**
        }
    }
};
// Use insertBefore instead of appendChild  to circumvent an IE6 bug.
// This arises when a base node is used (#2709 and #4378).
head.insertBefore( script, head.firstChild ); 
```

# excel - 使用 apache poi 处理 excel 文件

> ID：11445595
> 
> 赞同：0
> 
> 时间：2012-07-12T05:40:17.403
> 
> 标签：excel, apache-poi

有什么方法可以使用 apache poi 读取或写入 excel 2003 和 2007 格式。我知道我们可以将 HSSF 工作簿用于 2003 格式和 XSSF 用于 2007（如果我错了，请纠正我）。但是有什么方法可以同时读取使用任何单个工作簿进行格式化，但不单独使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:51:37.980

利用

```
WorkbookFactory.create(in); 
```

基于javadoc，它

> 从给定的 InputStream 创建适当的 HSSFWorkbook / XSSFWorkbook。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:32:00.800

试试`Workbook wb = WorkbookFactory.create(OPCPackage pkg);`。它应该工作。但是，如果`XSSF`太大，您将得到一个`OutOfMemoryException`，因此您应该使用事件用户模型来读取您的文件。在这种情况下，您应该阅读您的路径并检查文件的扩展名，如下所示：

```
private boolean isXLS(String inputPath) {
    String tmp = inputPath.substring(inputPath.length() - 3,
            inputPath.length());
    if (tmp.equalsIgnoreCase("XLS"))
        return true;
    else
        return false;
} 
```

阅读[How-to](http://poi.apache.org/spreadsheet/how-to.html)以获取有关事件用户模型的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:25:18.087

是的，你可以做到。事实上，它在 Apache POI 网站上有相当广泛的记录！

如果您已经有使用 HSSF 的代码，那么您应该遵循[HSSF 到 SS 转换指南](http://poi.apache.org/spreadsheet/converting.html)以获取有关更新您的代码以通用两种格式的帮助。

如果您还没有任何代码，请按照[用户 API 指南](http://poi.apache.org/spreadsheet/how-to.html#user_api)开始操作 - 其中的所有代码对这两种格式都是通用的。您还可以查看[快速指南](http://poi.apache.org/spreadsheet/quick-guide.html)以了解一些特定问题以及如何以一般方式解决这些问题。

# jqgrid - Jqgrid客户端排序从ID = 10不起作用

> ID：11445599
> 
> 赞同：0
> 
> 时间：2012-07-12T05:40:41.430
> 
> 标签：jqgrid

我在 jqgrid 上实现客户端排序时遇到了一个奇怪的问题。

排序工作正常，直到 Id 在 1 到 9 的范围内，但是当它遇到 Id 10 而不是将 Id 10 放在最后一个位置时，它会将它放在第二个位置。

知道问题是什么吗？？？

id列是这样的

```
ID
1
10
2
3
4 
5
6
7
8
9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:41:55.330

在您的 colModel 中，您应该为列 ID 定义**sorttype: 'number'**。

# php - 在php中，mysql如何仅在记录存在的情况下运行循环

> ID：11445617
> 
> 赞同：-1
> 
> 时间：2012-07-12T05:42:39.333
> 
> 标签：php, mysql, loops

我有一个 php 脚本，它具有基于用户选择/输入的一系列计算和 FORM RELOADS，只有在表中而不是在 FORM RELOADS 上完成记录添加时，我才需要运行这些，如何在这种情况下运行循环。

**我的部分 php 脚本 bill-detail.php：** 希望这足够：

```
<html>
<head>
<title>Cash Bill Detail</title>

<script language="javascript">

function reload(form)
{
document.location.href = 'bill-detail.php'
}

function showecr(str)
{

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","billecr.php?q1=" + str,false);
xmlhttp.send();
 }

</script>

</head>
<body>

<?php
$con = mysql_connect("localhost","svga","a!@#");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("svga", $con);

$user = $_SESSION['user'];

//<!--------------VALIDATIONS ------------------->

echo "<form name='form1'>";
echo "ECR: <input type='text' size='10' maxlength='10' name='ecrn'     onchange=\"showecr(this.value);\"><br>";
echo "Product Type";
echo "<select name='product' onchange=\"reload(this.form);\">>";
echo "<option value='Gas'>Gas</option>";
echo "<option value='Others'>Others</option>";
echo "</select>";
echo "</form>";

//---As per user inputs copying value to variables---------------------
$hdr=mysql_query("SELECT * FROM BILLHDR_draft WHERE usr='$user'");
$hdr2=mysql_fetch_assoc($hdr);
$numrows=mysql_num_rows($hdr);

if ($numrows>0)

{
$cust_code=$hdr2['Ac_code'];
$product=$hdr2['prod_desc'];

//--Searching BILL DETAILS TABLE as per the user inputs from BILL HEADER Table------
$recs=mysql_query("SELECT * FROM BILLDTLS WHERE Ac_code='$cust_code' AND     Prod_desc='$product'");
while ($rec2=mysql_fetch_assoc($recs))
{
mysql_query("INSERT INTO DEMURAGE (DC_No, DC_date, Ac_code, Product_Desc) VALUES ('$rec2[dc]', '$rec2[dcdate]', '$rec2[accode]', '$rec2[product]'");
}

}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:01:18.063

您可以在循环之前添加一个布尔变量，您可以使用它来跟踪是否已经添加了记录。以下代码主要是概念，因为您自己没有提供太多代码示例，但希望您能理解。

```
// Set to false initially
$recordAdded = FALSE;

if( $num_rows > 0 && $recordAdded == FALSE )
{
   // Code to execute

   // Set value to to TRUE after initial successful execution
   $recordAdded = TRUE;
} 
```

# macos - 在 mac os x 上分析 c++

> ID：11445619
> 
> 赞同：75
> 
> 时间：2012-07-12T05:42:42.977
> 
> 标签：macos, profiling

我正在尝试在我的 mac（os x Lion）上分析一些 c++ 代码，但我找不到任何有用的东西。我正在寻找一个分析器，它会告诉我哪些函数占用了我的 cpu 时间（类似于 matlab 分析器）。

这是我尝试过的

*   教授。这是我在我的 linux 机器上使用的，但它只是在我的 mac 上给了我空输出（显然是一个已知问题）
*   仪器。我一生都无法弄清楚如何在我编译的二进制文件中分析任何内容。我也找不到任何有用的教程。
*   （其他搜索发现 Shark 不再可用，而 Valgrind 用于记忆）。

真的很感谢帮助！

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-07-12T05:58:01.123

Instruments 是使用的工具。Instruments 的完整解释超出了此答案的范围，但这里有一个快速入门指南：

1.  打开仪器。¹
2.  选择“时间分析器”模板。
3.  在“目标”下拉菜单中选择您的应用程序。²
4.  点击红色圆圈（“记录”）按钮开始运行您的应用程序。
5.  如果适用，请在您的应用程序中做一些您需要分析的事情。
6.  再次点击录制按钮停止录制。
7.  使用 Instruments 中的工具来分析您的结果。

在可用的工具中，最常用的是：

*   使用披露箭头扩展调用树
*   单击函数名称上的带圆圈的箭头将其聚焦
*   双击函数查看关联源
*   左侧的“反转调用树”复选框

您还可以`instruments`在命令行上启动 的调用：

```
instruments -l 30000 -t Time\ Profiler -p 5773 
```

见[说明](https://gist.github.com/loderunner/36724cc9ee8db66db305)。

* * *

[¹打开 Instruments 的一种简单方法是使用 Spotlight：只需单击任务栏右上角（时钟旁边）的放大镜，然后键入“Instruments”。]

[²单击“选择目标...”并导航到可执行文件的路径。]

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-04T23:01:48.023

Instruments 是使用的工具。要克服空白跟踪的问题，请确保从 XCode 中打开 Instruments：

```
Xcode > Open Developer Tool > Instruments 
```

如果您从上次更新 XCode 之前固定到 Dock 的旧 Instruments 图标打开 Instruments，它将为您提供空白跟踪。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-15T20:01:28.067

Instruments 确实是正确的答案，但如果您不知道如何使用它，那么另一个选项是内置 Activity Monitor 应用程序中的分析器。在活动监视器中，您可以获得有关任何正在运行的进程的信息，并且有一个按钮可以对其执行进行一段时间的采样。您必须启动程序，切换到活动监视器，找到进程，然后对其进行采样。

此外，您可以简单地通过在调试器中运行程序并手动暂停它六次左右并在那些时候注意调用堆栈来进行“穷人的分析”。它非常简单，但作为大部分程序的第一次通过，它的效果却出奇的好。

还有一个命令行`sample`程序可以像其他程序一样对调用堆栈进行采样。

# asp.net - 如何在 .aspx 文件中访问 .aspx.cs 文件的字符串变量值

> ID：11445620
> 
> 赞同：1
> 
> 时间：2012-07-12T05:42:44.170
> 
> 标签：asp.net, c#-2.0

我在 .aspx.cs 文件中得到一个字符串值回归，`regression = (Session["Regression"]).ToString();`然后我想在 SqlDataSource 属性的 SelectCommand 中的 .aspx 文件中使用这个值，如下所示

```
SelectCommand="SELECT [issue_oid], [issue_num], [regression], 
            [status], [tested_by], [tested_on], [patch_name], [arrived_on], [previous_info], [comment], [is_duplicate] FROM [itt_monthly_patch_issue_list] where status='Not Tested' and `regression='<%#regression%>'"` 
```

.aspx.cs 文件 page_load 方法如下

```
 protected void Page_Load(object sender, EventArgs e)
    {
            if ((Session["UserName"].ToString()) == string.Empty)
            {
                Server.Transfer("regressionType.aspx");
            }
            regression = (Session["Regression"]).ToString();
            usrname = (Session["UserName"]).ToString();
            DataBind();
     } 
```

请建议我该怎么做？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:50:35.693

您可以在 SQLDatasource 中设置会话变量的值。像这个例子。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server"
    ConnectionString="<%$ ConnectionStrings:testDatabaseConnectionString %>"
    SelectCommand="SELECT * FROM [UserTable] WHERE ([userID] = @UserID)">
    <SelectParameters>
        <asp:SessionParameter Name="UserID" SessionField="UserID" Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource> 
```

让我们知道对此的任何其他担忧..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:49:43.197

像这样将会话参数添加到您的 sql 数据源

```
<asp:SqlDataSource SelectCommand="SELECT [issue_oid], [issue_num], [regression], 
        [status], [tested_by], [tested_on], [patch_name], [arrived_on], [previous_info], [comment], [is_duplicate] FROM [itt_monthly_patch_issue_list] where status='Not Tested' and `regression='<%#regression%>'"`>

<SelectParameters>
        <asp:SessionParameter SessionField="Regression" Name="ParameterName" Type="String" />
</SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:18:18.367

试试这个：

```
 SelectCommand="SELECT [issue_oid], [issue_num], [regression], 
                [status], [tested_by], [tested_on], [patch_name], [arrived_on], [previous_info], [comment], [is_duplicate] FROM [itt_monthly_patch_issue_list] where status='Not Tested' and `regression='<%=ReturnRegression()%>'"` 
```

在代码隐藏中：

```
 string regression=null;//Before Page_Load

    protected string ReturnRegression()
    {
    //Write logic here to prevent null being returned
        return regression;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T06:55:29.800

试试这个：

```
public StringBuilder regression = new StringBuilder();
regression.Append((Session["Regression"]).ToString()); 
```

然后在 .aspx 页面中（在 selct 命令中），您可以使用“回归”作为：

```
 <% =regression %> 
```

# sas - SAS Data Integration Studio 中的作业调度

> ID：11445622
> 
> 赞同：0
> 
> 时间：2012-07-12T05:42:48.697
> 
> 标签：sas, job-scheduling

我想在 SAS-DIS 中安排一份工作。我使用 sas 管理控制台尝试了该过程，但弹出一个错误，说找不到 scheluing 服务器。谁能帮助我如何设置调度服务器？还是要安装的软件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:14:37.580

我认为调度服务器是一个必须购买的额外软件包。我们的 BI 设置缺少该选项，无论如何我们似乎都无法获得批准。请与您的 SAS 服务器管理员联系，查看是否已启用作业调度。如果是这样，他/她应该能够告诉你安排它的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T04:14:30.763

或者，如果没有调度服务器，您仍然可以部署作业，并且可以使用
1\. Cron 和 Crontab（在 Unix 或 Linux 中）
2\. Windows 操作系统调度程序**手动**
调度作业，因为如果没有，这是最好的选择。我知道这可能非常乏味和麻烦，但如果您要安排的工作数量较少，可以尝试一下。

# c# - 架构师能说对吗？“MVVM 只将后面的代码拆分为多个 (3) 文件”

> ID：11445623
> 
> 赞同：4
> 
> 时间：2012-07-12T05:43:08.463
> 
> 标签：c#, .net, wpf, design-patterns, mvvm

我对 WPF 很陌生，今天早上我与来自 C、C++ 背景的架构师进行了讨论。

我们正在尝试创建一个依赖本机 dll 的视频通话应用程序`PInvoke`。WPF 应用程序主要是 UI，在后面的代码中，我们正在`Pinvoke`调用视频/音频并列出可用的驱动程序。

因此，如果我们谈论来自数据库的数据，那么我们的应用程序中涉及的“**数据”并不多。**

我们正在尝试修改的 WPF 应用程序是[Boghe](http://code.google.com/p/boghe/)，令人惊讶的是他们也没有使用 MVVM。

虽然我热衷于实现 MVVM，但架构师指出它*不必要地将文件分成 3 个部分*。

> 他说，如果我们想要更改视图中的任何内容，例如更改按钮或任何控件，则可以直接在后面的代码中完成。那么为什么要使用 MVVM 呢？

虽然我有理论上的答案，但不禁同意他的观点。**他真的是对的吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T06:15:12.647

> 他说，如果我们想要更改视图中的任何内容，例如更改按钮或任何控件，则可以直接在后面的代码中完成。那么为什么要使用 MVVM 呢？

当然也*可以*采用这种方式。问题是是否*应该*这样做。

对于一个相当小的代码库，您可能可以在后面的代码中混合数据访问、核心逻辑和 UI 操作。然而，从长远来看，这不会产生可维护或可测试的代码，而且随着时间的推移，混乱可能会变得更糟并变成意大利面条式代码。相信我的话，因为我工作中的很大一部分时间都花在了扭转这些陈旧的烂摊子上。

在代码隐藏中混合所有内容的一些后果是：

*   从根本上违反“单一职责原则”（SRP）的代码。
*   很难理解的代码，因为它在同一个地方做了非常不同的事情。
*   容易破坏的代码。我在这里改变了一些东西，出于某种神秘的原因，那里的一些功能中断了。
*   代码重复/违反“不要重复自己”（DRY）原则。您经常在多个地方发现相同的逻辑。这是偶然的，还是故意的？如果我在这里更改逻辑，是否也必须更改相同/相似的逻辑？

请注意，除了第一点之外，这些都不是理论上的问题，而是典型的“遗留”代码库的非常现实、直接的问题。

在我看来，说 MVVM 引入了更多*的代码隐藏*类并不完全正确。这显然是一个不理解当您将数据、业务逻辑和 UI*逻辑层*彼此隔离时所带来的基本关注点分离的人的声明：即使使用 MVVM，您的视图也只有一个代码隐藏类。其他两个类（是的，可能还有两个）根本不能被认为是“代码隐藏”，因为它们没有直接与视图/设计器相关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:17:02.927

简短的回答：不！ViewModel 与不同文件中的 Codebehind 不同。

通过适当的 MVVM 实现，您没有代码隐藏，或者至少没有一个非常小的代码隐藏。

但是在 ViewModel 中，您不能直接访问窗口，因为在 MVVM 中，ViewModel 和 View 之间的通信是通过 Binding 完成的，没有直接引用 View（通常）。

与以视图为中心的方法相比，MVVM 带来了一些巨大的优势。它是可测试的，它更容易改变，它是一个适配器，......

**编辑** 如果他真的是你的软件架构师，他应该知道得更好……至少那是我对软件架构师的期望

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T07:36:06.043

我也同意*stakx*和*Mare* Infinitus ；MVVM 提供了很多好处，而不仅仅是在文件后面创建多个代码。

*根据我的经验，MVVM 是学习和使用 WPF 强大功能的最佳方式，它鼓励并强迫您使用 WPF 功能，如、 、`Binding`等`Commands`。我已经看到在没有 MVVM 的情况下开发应用程序，结果证明它们是 WPF 应用程序在 Winforms 风格中提到了 stakx 的问题（以及更多）。`Styles``Converters`*

除了 UnitTesting（我认为在您的应用程序中非常重要）、可重用性等。使用 MVVM 的一个非常重要的好处是**它可以支持多个视图**，即您可以为您的应用程序拥有多个 UI，所有这些都可以使用相同的视图模型；这可能不是您今天的要求，但您可能需要几年后有一个新界面或支持其他平台，如 Silverlight 或 Metro，在这种情况下，MVVM 将为您节省大量精力。

我建议您阅读这篇解释 MVVM 的真正好处并解释其他所谓好处的帖子（尽管我觉得它们在实践中是真正的好处） - [MVVM Backlash](http://neverindoubtnet.blogspot.in/2011/05/mvvm-backlash.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T06:05:28.573

一个目的是您可以在没有视图的情况下对视图逻辑（视图模型）进行单元测试。

这里是 Rachel 关于 viewmodel 第一种方法的一个很好的评论：

> 请记住，使用 MVVM，您的 ViewModel 就是您的应用程序。View 只是一个漂亮的界面，它允许用户与您的 ViewModel 进行交互。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T05:58:48.497

如果你在项目中只有两个人，而且每个人都是一体的，他是对的。

但是，如果您不希望设计师弄乱控制器（或 ViewModel），或者不希望程序员将视图更改为某些东西，您知道，就像程序员进行设计一样。

此外，您无需搜索庞大的文本文件即可立即知道在哪里进行更改。

此外，MVVM 或 MVC 的分离是编程的基本原则之一，它是 Data-Logic-View 分离，如果架构师说你不这样做，可能是时候问另一个架构师了 :)

# java - 如何从java中的方法返回泛型类型

> ID：11445626
> 
> 赞同：0
> 
> 时间：2012-07-12T05:43:24.343
> 
> 标签：java, generics

我是泛型新手。这是我的课。

```
public interface Animal {    
    void eat();
}

public class Dog implements Animal {    
   public void eat() {   
      System.out.println("Dog eats biscuits");    
   }    
}

public class Cat implements Animal {    
   public void eat() {    
      System.out.println("Cat drinks milk");    
   }    
} 
```

现在我希望以通用的方式使用这些类。

```
public class GenericExample {

   public <T extends Animal> T method1() {    
      //I want to return anything that extends Animal from this method
      //using generics, how can I do that    
   }

   public <T extends Animal> T method2(T animal) {    
      //I want to return anything that extends Animal from this method
      //using generics, how can I do that
   }

   public static void main(String[] args) {    
      Dog dog = method1(); //Returns a Dog    
      Cat cat = method2(new Cat()); //Returns a Cat    
   }    
} 
```

如何从方法“method1”和“method2”返回泛型类型（可能是 Cat 或 Dog）。我有几个这样的方法返回“T extends Animal”，所以在方法级别或类级别声明泛型类型更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:14:25.313

您不能让方法返回泛型类型，并且期望能够在没有强制转换的情况下在方法的调用者中访问该类型，除非可以从方法的参数中推断出该类型。所以你的例子是`main`行不通的。

因此，您要么不使用泛型，要么手动转换返回类型

```
public Animal method1()
    Dog dog = (Dog)method1() 
```

或者让方法返回子类类型以开始。

```
public Dog method1()
    Dog dog = method1() 
```

或者您可以使用泛型，并在调用方法时指定类型

```
public <T extends Animal> T method1()
    Dog dog = <Dog>method1() 
```

或传递一些可以推断类型的参数（第二种方法已经满足）：

```
public <T extends Animal> T method1(Class<T> classOfreturnedType)
    Dog dog = method1(Dog.class) 
```

如果它是它本身`method1`，你也只能调用它。`static main``static`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:58:20.663

method1 只是说它返回一个 Animal。返回 Animal 的任何实例，代码将编译：

```
return new Dog(); 
```

第二种方法说它返回一个与作为参数给出的动物类型相同的动物。所以你可以返回参数本身，它会编译。你说了方法必须返回哪种类型，但是你没有说方法必须做什么和返回，所以不可能实现它。我只能说那`return animal;`会编译。

# json - 从 JSON 结果中删除类型信息

> ID：11445627
> 
> 赞同：2
> 
> 时间：2012-07-12T05:43:34.610
> 
> 标签：json, jersey, jax-rs

目前我正在尝试创建一个简单地返回列表的网络服务；

```
@Path("/random")
@Singleton
public class Random
{
    @GET
    @Path("/")
    @Produces(MediaType.APPLICATION_JSON)
    public MyResult<String> test()
    {
        MyResult<String> test =  new MyResult<String>();
        test.add("Awesome");

        return test;
    }
} 
```

我的 MyResult 类如下所示：

```
@XmlRootElement
public class MyResult<T> implements Iterable<T>
{
    private ArrayList<T> _items;
    private int _total;

    public MyResult()
    {
        _items = new ArrayList<T>();
    }

    public ArrayList<T> getItems()
    {
        return _items;
    }

    public void setItems(ArrayList<T> items)
    {
        _items = items;
    }

    public int getTotal()
    {
        return _total;
    }

    public void setTotal(int total)
    {
        _total = total;
    }

    public void add(T item)
    {
        getItems().add(item);
    }

    public Iterator<T> iterator()
    {
        return getItems().iterator();
    }
} 
```

现在我从服务中得到以下结果：

```
{"items":[{"@type":"xs:string","$":"Awesome"}],"total":"0"} 
```

但我不想要任何这些信息，我只需要这个：

```
{"items":["Awesome"],"total":"0"} 
```

在我看来，这需要在某处进行一些配置，谁知道如何获得所需的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:40:42.910

假设您使用的是 jackson，请查看[@JsonTypeInfo](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/annotate/JsonTypeInfo.html)注释。它用于配置类型信息是否以及如何与 JSON 序列化和反序列化一起使用的详细信息。它的使用和行为取决于您使用的杰克逊版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-06T10:26:33.453

为了完全抑制类型信息，我不得不使用以下注释：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NONE)
@JsonDeserialize(as=NoType.class) 
```

# gwt - 如何重置页面的所有内容而不在 GWT 中重新加载页面

> ID：11445628
> 
> 赞同：0
> 
> 时间：2012-07-12T05:43:38.330
> 
> 标签：gwt, tabs, refresh, reload, reset

我的应用程序中有标签面板。每当我浏览不同的选项卡时，我只想刷新选项卡的所有内容。目前我正在使用 Window.Location.Reload 。但是还有其他的出路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:29:39.973

使用 方法将 TabListener 添加到 TabPanel `addTabListener(TabListener listener)`。选择选项卡时会通知您。您可以将刷新逻辑放在该方法中。

# php - AJAX/PHP 向服务器发送值

> ID：11445637
> 
> 赞同：0
> 
> 时间：2012-07-12T05:44:34.480
> 
> 标签：php, mysql, ajax, insert, pdo

我正在尝试使用 AJAX 将值发送到 PHP 文件，然后更新服务器上的 mysql 数据库。但由于某种原因，这些值不会传输到 PHP 文件中。

这是我使用的 JS：

```
function send_message()
{

 var number = localStorage.getItem("number");
  var message = prompt("Message:", "");
   jQuery.ajax({ type: "POST", 
url: serviceURL + "message.php", 
data: 'number='+number+'&message='+message,
cache: false, 
success: function(response) 
{
alert("message sent");
}
});

} 
```

这是message.php

```
 <?php
include 'config.php';

// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

// new data

$number = $_GET['number'];
$message = $_GET['message'];
// query
$sql = "INSERT into table
        SET condition=0, change=1, change_time=NOW(), recieve=999, 
        number=?, message=?";
$q = $conn->prepare($sql);
$q->execute(array($number, $message));

?> 
```

除了数字和消息为 NULL 外，其他所有内容都插入到 mysql 中。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:49:27.100

您正在使用 POST 使用 AJAX 发布数据。为了在 PHP 中监听这些值，您需要...

代替：

```
$number = $_GET['number'];
$message = $_GET['message']; 
```

和：

```
$number = $_POST['number'];
$message = $_POST['message']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:55:54.363

为了让事情变得更简单，只需在 jQuery 中使用 $.post 或 $.get 之类的便捷方法进行 ajax 调用：

```
function send_message()
{

  var number = localStorage.getItem("number");
  var message = prompt("Message:", "");
  $.post(serviceURL + "message.php", {'number' : number, 'message' : message},
         function(response){
           alert("message sent");      
         }
  );

} 
```

然后在你的 php 中：

```
// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

//if you used $.get you will also have to use $_GET here
$number = $_POST['number'];   
$message = $_POST['message'];

// query
$sql = "INSERT into table
        SET condition=0, change=1, change_time=NOW(), recieve=999, 
        number=?, message=?";
$q = $conn->prepare($sql);
$q->execute(array($number, $message));

?> 
```

我可以看到您在 PDO 中使用了准备好的语句。但您可能还想添加：

[过滤变量](http://php.net/manual/en/function.filter-var.php)和[过滤输入](http://www.php.net/manual/en/function.filter-input.php)以提高安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:51:08.753

使用`$_POST`而不是`$_GET`. 另外，您可以尝试使用`$_REQUEST`全局数组来忘记它。它包含您发送到脚本的所有数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T06:04:09.027

您可以将您的 php 文件更改为；

```
<?php
include 'config.php';
// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
// new data
$number = $_POST['number'];
$message = $_POST['message'];
// query
$sql = "INSERT into table
        SET condition=0, change=1, change_time=NOW(), recieve=999, 
        number=?, message=?";
$q = $conn->prepare($sql);
$q->execute(array($number, $message));
?> 
```

# mysql - sqlserver中mysql_insert_id()函数的等价物是什么？

> ID：11445643
> 
> 赞同：0
> 
> 时间：2012-07-12T05:44:53.277
> 
> 标签：mysql, sql-server

sqlserver 中的 mysql_insert_id() MySQL 函数的等价物是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:46:50.520

看看以下

[SQL SERVER – @@IDENTITY vs SCOPE_IDENTITY() vs IDENT_CURRENT – 检索最后插入的记录标识](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

[IDENT_CURRENT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms175098.aspx)

[@@IDENTITY (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187342.aspx)

[SCOPE_IDENTITY (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

# c++ - 扩展 boost::dynamic_bitset 以添加一些功能

> ID：11445647
> 
> 赞同：2
> 
> 时间：2012-07-12T05:45:23.417
> 
> 标签：c++, boost, derived-class, boost-dynamic-bitset

我尝试`boost::dynamic_bitset`使用我需要的一些功能来扩展该类，例如在 AND 操作之后计算位等。我还需要访问私有成员（m_num_bits 等），因为我希望能够“覆盖”该`set()`方法以确保使用 resize() fct 的 bitset 容量，如果`pos`要设置的位大于当前 bitset 容量。如果我使用本机`set()`fct 它在这种情况下会出现断言错误（因为`set()`在这种情况下该方法不会调整大小）

我对模板不是很有经验，而且几周后我才回到 C++，它有点生疏，也许有人可以帮助我。

我开始这样做：

```
template <typename Block, typename Allocator>
class ExtendedBitSet : public boost::dynamic_bitset<Block, Allocator> {
    typedef boost::dynamic_bitset<Block, Allocator> super;
public:
    void set(std::size_t pos) {
        if (pos > super::size())
            super::resize(pos);
        set(pos);
    }
    bool get(std::size_t pos) const {
        return super::test(pos);
    }
};

// ...

ExtendedBitSet<> * bs = new ExtendedBitSet<>(128);
bs->set(33);
// ...
std::wcout << "Bit 48 is " << ((bs->get(48) == true) ? "true" : "false") << std::endl;
// ...
delete bs; 
```

当然这不是编译，错误是：

```
dynamic_bitset.cpp: In function ‘int main(int, char**)’:
dynamic_bitset.cpp:50: error: wrong number of template arguments (0, should be 2)
dynamic_bitset.cpp:7: error: provided for ‘template<class T, class Allocator> class ExtendedBitSet’
dynamic_bitset.cpp:50: error: invalid type in declaration before ‘=’ token
dynamic_bitset.cpp:50: error: wrong number of template arguments (0, should be 2)
dynamic_bitset.cpp:7: error: provided for ‘template<class T, class Allocator> class ExtendedBitSet’
dynamic_bitset.cpp:51: error: request for member ‘set’ in ‘* bs’, which is of non-class type ‘int’
..
dynamic_bitset.cpp:57: error: request for member ‘get’ in ‘* bs’, which is of non-class type ‘int’ 
```

有人可以提示如何让它运行吗？还有可能比从 dynamic_bitset 类派生更好的方法还是可以这样做？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:56:27.437

您`ExtendedBitSet<>`的模板类型参数没有默认参数，并且您的代码正在尝试实例化它而不明确指定它们。尝试`ExtendedBitSet<unsigned, std::allocator<unsigned> > bs`改用。

# java - 如何公开发布 Java Web 服务？

> ID：11445652
> 
> 赞同：0
> 
> 时间：2012-07-12T05:46:25.467
> 
> 标签：java, android, web-services, rest, axis2

在我的基于 java 的 Web 应用程序`(struts 2 and hibernate 3)`中。我*使用 apache 轴制作了一个网络服务。*

Web 服务必须从数据库中返回数据，这些数据将由`android application.`

现在，该服务显然必须在公共 ip 上发布，以便我可以在 android 应用程序中访问它。

1.  在免费的公共 IP 或域上发布它的选项有哪些？
2.  如果我使用 REST 而不是 apache-axis 来创建 Web 服务会更好吗？什么是 JAX？
3.  而对于 android 开发者来说，一个 web 服务是如何在 android 中被消费的呢？

请回答它的紧急和重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:08:19.293

为了在 Web 上发布，您需要将其放在启用 Web 的服务器上，您可以通过以下几种方式进行：

1.  [将您的计算机变为服务器](http://www.labnol.org/internet/turn-home-computer-into-web-server/9111/)（这是一篇文章，只需在 google 中搜索“如何将我的计算机变为 Web 服务器”）。
2.  将您的文件上传到免费主机
3.  将您的文件上传到付费主机（通常只需支付很少的费用）

REST 与 SOAP（apache 轴）：

我建议使用 REST，因为它更轻量级且更灵活（它使您能够以 xml、json、html 的形式获得响应，而 soap 通常只是 XML）。

JAX-RS id java API 用于创建 REST Web 服务。看看[球衣框架](http://www.vogella.com/articles/REST/article.html)。

[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)是一种异步发送/获取数据的方法，广泛用于 Web 应用程序。

android 中 Web 服务的使用方式可能因您使用的技术而异。

# php - 如何在两个不同的 php 脚本上管理单个会话？

> ID：11445654
> 
> 赞同：0
> 
> 时间：2012-07-12T05:46:28.063
> 
> 标签：php, session, session-variables

我在我的服务器上安装了两个不同的 PHP 脚本。一个在根目录上，另一个在不同的子目录上。但是，我希望根 phpscript 的用户会话在另一个子目录脚本上继续。即使在另一个目录脚本上，我也需要此会话来启用聊天。

子目录是[os-class](http://osclass.org)。我在子目录中创建了一个不同的 PHP 文件来跟踪会话变量。

```
Array ( [user_email] => xxxx@example.com
        [users_id] => 275
        [first_name] => Sammy
        [last_name] => Durha
        [username] => 275
        [mobile] => XXXXXXXXX
        [chat_sms_sent] => message sent to off line friends. ) 
```

然而，在其中一个脚本页面上，半会话丢失了。

```
Array ( [messages] => Array ( )
        [keepForm] => Array ( )
        [form] => Array ( )
        [chat_sms_sent] => message sent to off line friends. ) 
```

任何人都可以解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:54:11.483

会话不绑定到目录。如果您`session_start()`在两个脚本的顶部调用，则`$_SESSION`变量应该在两个脚本中具有相同的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:08:10.957

会话独立于目录和文件。它可以普遍使用。但请记住，会话不太安全。

[您可以在这里](http://www.tizag.com/phpT/phpsessions.php/)学习一个简单的教程。

# c# - 一个事务中的多个聚合/存储库

> ID：11445657
> 
> 赞同：15
> 
> 时间：2012-07-12T05:46:46.507
> 
> 标签：c#, oop, design-patterns, domain-driven-design, cqrs

我有一个如下所示的支付系统。可以通过多张礼券付款。礼券随购买一起发行。客户可以使用此礼券以备将来购买。

当通过礼券进行付款时，GiftCoupon 表中的 UsedForPaymentID 列需要更新为该 PaymentID（用于礼券 ID）。

GiftCouponID 已在数据库中可用。当客户制作礼品券时，上面印有 GiftCouponID。操作员需要将此 CouponID 输入系统以进行付款。

对于 MakePayment() 操作，它需要两个存储库。

1.  礼券库
2.  支付库

代码

> //使用GiftCouponRepository获取对应的GiftCoupon对象。

这涉及为一个事务使用两个存储库。这是一个好习惯吗？如果没有，我们如何改变设计来克服这个问题？

> **参考**：在 DDD 中，聚合应该代表事务边界。需要涉及多个聚合的交易通常表明模型应该被改进，或者交易需求应该被审查，或者两者兼而有之。[CQRS 是否适合我的域？](https://stackoverflow.com/questions/11169097/is-cqrs-correct-for-my-domain)

![在此处输入图像描述](../Images/01ce622aba21d281abcd90311eb4ed38.png)

C# 代码

```
public RepositoryLayer.ILijosPaymentRepository repository { get; set; }

public void MakePayment(int giftCouponID)
{
    DBML_Project.Payment paymentEntity = new DBML_Project.Payment();
    paymentEntity.PaymentID = 1;

    DBML_Project.GiftCoupon giftCouponObj;

    //Use GiftCouponRepository to retrieve the corresponding GiftCoupon object.     

    paymentEntity.GiftCouponPayments = new System.Data.Linq.EntitySet<DBML_Project.GiftCoupon>();
    paymentEntity.GiftCouponPayments.Add(giftCouponObj);

    repository.InsertEntity(paymentEntity);
    repository.SubmitChanges();
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-12T12:59:05.060

我认为您真正要问的是“**一次交易中的多个聚合**”。我不相信使用多个存储库*来获取事务中的数据*有什么问题。通常在事务期间，聚合将需要来自其他聚合的信息，以便决定是否或如何更改状态。没关系。但是，在一个事务中修改多个聚合的状态是不可取的，我认为这就是您引用的报价试图暗示的意思。

这是不可取的原因是因为并发性。除了保护其边界内的不变变量外，还应保护每个聚合免受并发事务的影响。例如，两个用户同时对聚合进行更改。

这种保护通常是通过在聚合的数据库表上设置版本/时间戳来实现的。保存聚合时，会比较正在保存的版本和当前存储在数据库中的版本（现在可能与事务开始时不同）。如果它们不匹配，则会引发异常。

基本上可以归结为：**在一个协作系统中（很多用户进行很多事务），单个事务中修改的聚合越多，就会导致并发异常的增加。**

如果您的聚合太大并提供许多状态更改方法，则完全相同；多个用户一次只能修改一个聚合。通过设计在事务中单独修改的小型聚合，可以减少并发冲突。

[Vaughn Vernon 在他的 3 部分文章中出色地解释了这一点。](http://dddcommunity.org/library/vernon_2011)

然而，这只是一个指导原则，并且会有多个聚合需要修改的例外情况。您正在考虑是否可以重构事务/用例以仅修改一个聚合，这是一件好事。

考虑过您的示例后，我想不出一种将其设计为满足事务/用例要求的单个聚合的方法。需要创建付款，并且需要更新优惠券以表明它不再有效。

*但是，当真正分析此*交易的潜在并发问题时，我认为礼券聚合实际上不会发生冲突。它们只会被创建（发行）然后用于付款。两者之间没有其他状态更改操作。因此，在这种情况下，我们无需担心我们正在修改付款/订单和礼券聚合的事实。

下面是我快速想出的一种可能的建模方式

*   如果没有付款所属的订单汇总，我看不出付款的意义，所以我介绍了一个。
*   订单由付款组成。可以使用礼券付款。您可以创建其他类型的付款，例如 CashPayment 或 CreditCardPayment。
*   要进行礼券支付，必须将优惠券聚合传递给订单聚合。然后将优惠券标记为已使用。
*   在交易结束时，订单汇总与其新的付款一起被保存，并且任何使用的礼券也被保存。

代码：

```
public class PaymentApplicationService
{
    public void PayForOrderWithGiftCoupons(PayForOrderWithGiftCouponsCommand command)
    {
        using (IUnitOfWork unitOfWork = UnitOfWorkFactory.Create())
        {
            Order order = _orderRepository.GetById(command.OrderId);

            List<GiftCoupon> coupons = new List<GiftCoupon>();

            foreach(Guid couponId in command.CouponIds)
                coupons.Add(_giftCouponRepository.GetById(couponId));

            order.MakePaymentWithGiftCoupons(coupons);

            _orderRepository.Save(order);

            foreach(GiftCoupon coupon in coupons)
                _giftCouponRepository.Save(coupon);
        }
    }
}

public class Order : IAggregateRoot
{
    private readonly Guid _orderId;
    private readonly List<Payment> _payments = new List<Payment>();

    public Guid OrderId 
    {
        get { return _orderId;}
    }

    public void MakePaymentWithGiftCoupons(List<GiftCoupon> coupons)
    {
        foreach(GiftCoupon coupon in coupons)
        {
            if (!coupon.IsValid)
                throw new Exception("Coupon is no longer valid");

            coupon.UseForPaymentOnOrder(this);
            _payments.Add(new GiftCouponPayment(Guid.NewGuid(), DateTime.Now, coupon));
        }
    }
}

public abstract class Payment : IEntity
{
    private readonly Guid _paymentId;
    private readonly DateTime _paymentDate;

    public Guid PaymentId { get { return _paymentId; } }

    public DateTime PaymentDate { get { return _paymentDate; } }

    public abstract decimal Amount { get; }

    public Payment(Guid paymentId, DateTime paymentDate)
    {
        _paymentId = paymentId;
        _paymentDate = paymentDate;
    }
}

public class GiftCouponPayment : Payment
{
    private readonly Guid _couponId;
    private readonly decimal _amount;

    public override decimal  Amount
    {
        get { return _amount; }
    }

    public GiftCouponPayment(Guid paymentId, DateTime paymentDate, GiftCoupon coupon)
        : base(paymentId, paymentDate)
    {
        if (!coupon.IsValid)
            throw new Exception("Coupon is no longer valid");

        _couponId = coupon.GiftCouponId;
        _amount = coupon.Value;
    }
}

public class GiftCoupon : IAggregateRoot
{
    private Guid _giftCouponId;
    private decimal _value;
    private DateTime _issuedDate;
    private Guid _orderIdUsedFor;
    private DateTime _usedDate;

    public Guid GiftCouponId
    {
        get { return _giftCouponId; }
    }

    public decimal Value
    {
        get { return _value; }
    }

    public DateTime IssuedDate
    {
        get { return _issuedDate; }
    }

    public bool IsValid
    {
        get { return (_usedDate == default(DateTime)); }
    }

    public void UseForPaymentOnOrder(Order order)
    {
        _usedDate = DateTime.Now;
        _orderIdUsedFor = order.OrderId;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:28:41.310

在一个事务中使用两个存储库并没有错。正如 JB Nizet 所指出的，这就是服务层的用途。

如果您在保持连接共享时遇到问题，您可以使用[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)¹模式来控制来自服务层的连接，并让为您的存储库提供数据上下文的工厂提供 OoW 实例。

¹ EF/L2S DataContext*本身就是*一个 UoW 实现，但是对于此类情况，为服务层提供一个抽象的实现非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T23:56:01.177

我要提交的答案是“这取决于”（tm），因为它归结为“足够好”

问题空间和技术实现的背景都不是众所周知的，并且会影响任何可接受的解决方案。

如果技术允许（比如在 ACID 数据存储中），那么从业务角度来看，使用事务可能是有意义的。

如果这些技术不提供这些功能，那么“锁定”所有优惠券和支付记录以使更新保持一致可能是有意义的。需要调查多长时间的锁定以及可能发生的争用。

第三，它可以实现为具有以下粗略业务流程策略的多个事务/聚合。

*注意：我没有定义聚合之间的交互是如何发生的，因为技术要求是未知的*

1.  “创建”第一个聚合（我们称之为购买聚合），它将记录识别要使用的优惠券的预期付款。
2.  尽可能晚地确认当前业务政策有效（每张优惠券当前有效）。如果没有，取消/停止业务交易。
3.  将采购总量保持在“暂定”状态。
4.  与每个优惠券集合交互以“调整限制”以进行试探性购买。回复成功/失败。
5.  “调整限制”将改变可用于其他潜在购买总量的可用金额
6.  如果任何优惠券未能“调整限额”，则购买将“取消”，并且已批准的优惠券限额将重新调整回预购买请求金额（并且购买现在处于“取消”状态状态）
7.  如果调整所有优惠券限额，则购买现在处于“完成”状态
8.  在“完成”状态下，系统现在与每个优惠券聚合进行交互以“完成优惠券使用”，其中，购买的优惠券使用可能会记录在优惠券聚合上（取决于业务逻辑和需要）
9.  一旦所有优惠券的使用都已完成，则购买总量设置为“已批准”状态，并且可以开始任何其他业务流程。

您的许多选择将取决于从业务和技术能力的角度来看什么是正确的。每个选择的利弊都会影响企业的成功，无论是现在还是未来。'这取决于'（tm）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-22T23:33:25.620

2种方法：

*   两个单独的交易。如果事务 2 失败，则事务 1 应该回滚。
*   卡是一个帐户。针对该帐户记录交易。如果计算的余额（将所有交易相加）达到零（或更少，不应该发生），则卡已“使用”-但不要在数据库中记录“已使用”。只需从余额中得出。

# android - 在 Eclipse for Android 中安装 ADT 插件

> ID：11445661
> 
> 赞同：0
> 
> 时间：2012-07-12T05:47:12.857
> 
> 标签：android, eclipse, windows-7, eclipse-plugin

我正在使用 Windows 7 并尝试在 Eclipse 中安装 ADT 插件。我也尝试过使用 eclipse clasic 3.7、eclipse EE、Eclipse juno 和 4.2。在所有情况下，eclipse 都无法安装它。它在 35% 到 50% 处停止。我什至用 2 mbps 的专用互联网将系统打开了一整夜（认为连接速度是问题）但徒劳无功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T07:01:48.050

您可以尝试使用“Eclipse Marketplace”。以下步骤可能会帮助您为 Eclipse 安装 ADT 插件：

1.  打开日食
2.  转到帮助 -> Eclipse 市场
3.  搜索“ADT 插件”
4.  单击“Android Development Tools for Eclipse”部分的安装
5.  单击下一步按钮并按照 eclipse 指令进行操作

# sharekit - 如何在 IOS 中使用 Sharekit 直接在 facebook 或 twitter 上发布

> ID：11445664
> 
> 赞同：-2
> 
> 时间：2012-07-12T05:47:17.427
> 
> 标签：sharekit, facebook-sharer

我在我的 iPhone 项目中使用 sharekit 在 facebook 和 twitter 上发布。

但是每次当我在 facebook 或 twitter 上分享时，都会出现一个弹出窗口，并且在该发送按钮上单击内容将被分享。

问题是我不想要这个弹出窗口，而是想直接在 Facebook 或 twitter 上发布。

如果有人有，请给出想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:14:15.560

我找到了解决方案。

在 SHKFacebook.m 和 SHKTwitter.m 中有一个函数**“shouldAutoShare”** 它应该**返回是**，你的问题就解决了。

我的问题已经解决了，希望对你也有帮助。

谢谢

# visual-c++ - 将项目从 vc6 升级到 vc9 后检测到堆损坏

> ID：11445674
> 
> 赞同：0
> 
> 时间：2012-07-12T05:48:17.193
> 
> 标签：visual-c++, mfc, visual-c++-6

用vc6编写的函数。

```
bool CProductionTestDlg::GetVariables(CString strFilename, CMapStringToOb *cVariableMap)
{
    int     iMaxEntryLen   = 1000;
    //char    rgbEntryNames[1000];                //previous
    char  *rgbEntryNames = (char*)malloc(iMaxEntryLen * sizeof(int)); //Now
    CString strEntryName   = "";
    CString strEntryValue  = "";
    UINT    uiSeperator    = 0;
    ULONG   dwRetCode, dwSizeOfReturn;

    dwSizeOfReturn = GetPrivateProfileString(cszVariables,
                                            NULL,
                                            "",
                                            rgbEntryNames,
                                            iMaxEntryLen,
                                            strFilename);

    while ( uiSeperator < dwSizeOfReturn )
    {
        strEntryName.Format("%s", &rgbEntryNames[uiSeperator]);
        uiSeperator += strEntryName.GetLength() + 1;

        CString *strValue = new CString();
        dwRetCode = GetPrivateProfileString(cszVariables,
                                            strEntryName,
                                            "",
                                            strEntryValue.GetBufferSetLength(strEntryValue.GetLength()),
                                            iMaxEntryLen,
                                            strFilename);
        strValue->Format("%s", strEntryValue);        
        cVariableMap->SetAt(strEntryName, (CObject*)strValue);

    }

    return true;
} 
```

现在我在 vs08 上升级它。项目构建正确但是当我打开 exe 时它抛出异常

*检测到*堆损坏 ** CRT 检测到应用程序在堆缓冲区结束后写入内存。

当我调试我的应用程序时，控件在返回 true 后转到第 2103 行的**dbgheap.c**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T06:14:17.703

问题在这里：

```
dwRetCode = GetPrivateProfileString(cszVariables, 
    strEntryName, 
    "", 
    strEntryValue.GetBufferSetLength(strEntryValue.GetLength()), 
    iMaxEntryLen, 
    strFilename); 
```

您传递一个大小为 0 的缓冲区（`strEntryValue`初始化为`""`），但说它的大小为`iMaxEntryLen`. 所以`GetPrivateProfileString`认为它的缓冲区比实际得到的要大得多，并且超出了它的范围。

升级后出现此错误的原因是猜测，边界验证的改进。该错误也存在于 VC6 中，只是没有被检测到。

# soap - AxisFault：javax.xml.stream.XMLStreamException

> ID：11445676
> 
> 赞同：0
> 
> 时间：2012-07-12T05:48:26.833
> 
> 标签：soap, wsdl, axis2, soap-client, wsdl2java

我们将 drupal soapservice 用于 Web 服务。当我们尝试调用soapservice时，它返回结果但axis2抛出以下错误......

```
org.apache.axis2.AxisFault: javax.xml.stream.XMLStreamException: element text content may not contain START_ELEMENT 
 at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430) 
 at com.chm.api.login.client.DrupalSoapStub.fromOM(DrupalSoapStub.java:12249) 
 at com.chm.api.login.client.DrupalSoapStub.userLogin(DrupalSoapStub.java:1408) 
 at SocketClient.main(SocketClient.java:144) 
Caused by: java.lang.Exception: javax.xml.stream.XMLStreamException: element text content may not contain START_ELEMENT 
 at com.chm.api.login.client.DrupalSoapStub$UserLoginResponse$Factory.parse(DrupalSoapStub.java:59804) 
 at com.chm.api.login.client.DrupalSoapStub.fromOM(DrupalSoapStub.java:11473) 
 ... 2 more 
Caused by: javax.xml.stream.XMLStreamException: element text content may not contain START_ELEMENT 
 at org.apache.axiom.om.impl.SwitchingWrapper.getElementText(SwitchingWrapper.java:981) 
 at javax.xml.stream.util.StreamReaderDelegate.getElementText(StreamReaderDelegate.java:100) 
 at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.getElementText(XMLStreamReaderWrapper.java:100) 
 at org.apache.axiom.util.stax.debug.XMLStreamReaderValidator.getElementText(XMLStreamReaderValidator.java:76) 
 at com.chm.api.login.client.DrupalSoapStub$UserLoginResponse$Factory.parse(DrupalSoapStub.java:59770) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:47:55.240

我遇到了类似的问题，但与您所面临的不完全相同。我通过在类路径中添加以下依赖项解决了这个问题：

```
<dependency>
   <groupId>com.sun.xml.ws</groupId>
   <artifactId>jaxws-rt</artifactId>
   <version>2.1.5</version>
</dependency> 
```

我不确定它是否适用于您的问题，但您可以尝试一下。

# sql - SQL中如何查询对特定列所做的更改次数

> ID：11445677
> 
> 赞同：0
> 
> 时间：2012-07-12T05:48:30.407
> 
> 标签：sql

我有一个数据库，其中有一列我想查询它在一段时间内更改的次数。例如，我有用户名、用户级别和日期。如何查询此数据库以查看用户级别在 x 年内更改的次数？

（我查看了有关 stackoverflow 的其他帖子，他们告诉我使用触发器。但在我的情况下，我想查询数据库以了解已进行的更改数量。如果我的问题无法回答，请告诉我我可能需要查看哪些其他列来解决这个问题。我应该为此使用 Lag 吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:54:03.853

数据库本身不会为您捕获此信息。两个建议是将您的数据存储为时间序列，而不是更新值，而是将新行添加到表中作为新的当前值并使旧值过期。另一种选择是添加一个新列来跟踪您关心的列的更新次数。这可以在代码或触发器中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:56:36.813

你听说过LOG这个词吗？您必须创建一个新表，在其中存储您想要的更改。我可以想象这个表的解决方案：

*   id - int，主键，自增
*   table - 更改信息的表名
*   table_id - 已进行更改的表中的信息唯一 ID
*   年 - 整数
*   月 - 整数
*   日 - 整数

知道这一点，你可以计算一切

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:08:36.313

如果您已经通过添加新行来跟踪关卡历史记录，`level`并且`date`每次用户更改时都不同`level`：

```
SELECT username, COUNT(date) - 1 AS changes
FROM table_name
WHERE date >= '2011-01-01'
GROUP BY username 
```

这将为您提供自 2011 年 1 月 1 日以来的更改次数。请注意，我`1`从`COUNT`. 那是因为在您的表中有一行的用户从未*更改*过级别，该行代表用户的初始级别。

# mysql - mysql中的二进制日志错误

> ID：11445678
> 
> 赞同：8
> 
> 时间：2012-07-12T05:48:32.060
> 
> 标签：mysql

当我试图检查二进制日志时：

```
 SHOW BINARY LOGS; 
```

我收到此错误：

> 错误 1381 (HY000)：您没有使用二进制日志记录。

如何解决这个问题？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T05:58:15.257

在 MySQL 配置文件中设置`log-bin`变量，然后重新启动 MySQL。

一个示例`my.cnf`（在 Linux/unix 上）或`my.ini`（在 Windows 上）如下所示：

```
[client]
...

[mysqld]
...
log-bin=mysql-bin
--- 
```

一旦重新启动，MySQL 会自动创建一个新的二进制日志（每次重新启动时都会这样做）。您可能还希望查看以下变量：

```
server-id        = 1
expire_logs_days = 4
sync_binlog      = 1 
```

阅读有关[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html)的详细信息。如果您在进行复制设置（使用二进制日志的主要原因），请查看[复制配置清单](http://code.openark.org/blog/mysql/replication-configuration-checklist)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-03T04:35:34.767

线

```
log-bin=mysql-bin 
```

必须放在以下行之上：

```
[mysqld_safe]

log-error=/var/log/mysqld.log

pid-file=/var/run/mysqld/mysqld.pid 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T05:56:58.363

您需要在启动时激活二进制日志记录

在 [mysqld] 部分下的 /etc/my.cnf 中添加以下行

```
[mysqld]
log-bin=mysql-bin
expire-logs-days=7 
```

然后，运行这个

```
service mysql restart 
```

下次登录 mysql 时，您将看到一个二进制日志列表，并将在 7 天后轮换。

二进制日志的默认位置将是`/var/lib/mysql`或定义 datadir 的位置。如果您在 binlog 名称之前指定一个文件夹，则该文件夹就是位置。

例如

```
[mysqld]
log-bin=/var/log/mysql-bin
expire-logs-days=7 
```

## **美国东部时间 2012 年 7 月 12 日凌晨 02:20 更新**

请按如下方式重启mysql并告诉我们二进制登录是否开启

```
service mysql restart --log-bin=mysql-bin 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T05:56:43.537

要启用二进制日志，请使用 --log-bin[=base_name] 选项启动服务器。

如果未给出 base_name 值，则默认名称是 pid-file 选项的值（默认为主机名称），后跟 -bin。

如果给出了基本名称，则服务器将文件写入数据目录，除非基本名称带有前导绝对路径名以指定不同的目录。建议您指定一个基本名称。

或者你可以直接使用：

```
log-bin=mysql-bin 
```

然后重启你的mysql服务。然后将生成二进制文件。如果你在 Linux 机器上使用 Lampp，那么你会在 /lampp/var/mysql/mysql-bin.000001 中找到这个文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-11T11:12:45.953

FWIW，在我尝试设置*my.cnf.master*和*my.cnf.slave*文件并将它们分别**符号链接**到*my.cnf*的主服务器和从服务器后，我遇到了同样的问题。这个想法是能够轻松地将机器从主机切换到从机，然后再切换回来。

事实证明，mysqld 根本没有按预期处理符号链接。**硬链接**文件有效（*ln my.cnf.master my.cnf*）。如果您这样做，请小心，因为覆盖其中一个硬链接文件名可能会破坏链接并创建两个单独的文件（取决于您使用的软件所采用的重写方法）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-02T19:03:37.410

我发现即使 my.cnf 配置正确，日志记录也不会发生，因此您也可以尝试重新创建日志文件夹。

如果日志处于奇数状态，这可能是必要的。（就我而言，我只是停止登录 my.cnf 然后重新启用它，但什么也没发生，可能是因为现有文件不是最新更新？）。

像这样的东西应该工作：

```
sudo service mysql stop
sudo mv /var/log/mysql /tmp/mysqlold # or rm -fr if you're brave
mkdir /var/log/mysql
chown -R mysql:mysql /var/log/mysql
sudo service mysql start 
```

**强制性警告：**显然，删除数据库服务器上的任何内容时要小心。这将破坏/破坏/破坏使用此数据库作为主数据库的任何复制（尽管您可以恢复复制作为从属）。也就是说，我相信这应该是安全的，因为它不会删除数据库本身。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-11T18:45:44.437

在运行 Debian 的 MySQL 5.5 master 上，我对这个问题失去了理智。以上都没有奏效。最后，我重新启动了服务器并启用了日志记录。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-11-19T12:19:55.967

删除部分 [mysqld_safe] 并替换为 [mysqld]。这个对我有用。

# android - 注册 - 从 Android GCM 注销设备

> ID：11445687
> 
> 赞同：1
> 
> 时间：2012-07-12T05:49:52.807
> 
> 标签：android, google-cloud-messaging

我正在尝试向我的应用程序添加推送通知功能，但我遇到了奇怪的问题。

在我的第一次尝试中，我得到了设备的 regId；但在该设备试图从 GCM 中自行注销之后；实际上它成功了，因为我失去了 regId 但不是我无法再次获得它。

在 LogCat 我看到这些行。

```
07-12 08:40:25.615: V/GCMRegistrar(10648): Registering receiver
07-12 08:40:25.620: D/GCMRegistrar(10648): resetting backoff for PACKAGENAME
07-12 08:40:25.635: V/GCMRegistrar(10648): Unregistering app PACKAGENAME
07-12 08:40:28.570: D/GCMRegistrar(10648): resetting backoff for PACKAGENAME
07-12 08:40:28.570: V/GCMRegistrar(10648): Unregistering app PACKAGENAME
07-12 08:40:29.125: D/GCMRegistrar(10648): resetting backoff for PACKAGENAME
07-12 08:40:29.130: V/GCMRegistrar(10648): Unregistering app PACKAGENAME
07-12 08:40:39.655: D/GCMRegistrar(10648): resetting backoff for PACKAGENAME
07-12 08:40:39.660: V/GCMRegistrar(10648): Unregistering app PACKAGENAME
07-12 08:40:40.605: D/GCMRegistrar(10648): resetting backoff for PACKAGENAME
07-12 08:40:40.605: V/GCMRegistrar(10648): Unregistering app PACKAGENAME
07-12 08:40:41.350: D/GCMRegistrar(10648): resetting backoff for PACKAGENAME
07-12 08:40:41.350: V/GCMRegistrar(10648): Unregistering app PACKAGENAME
07-12 08:40:43.255: D/GCMRegistrar(10648): resetting backoff for PACKAGENAME
07-12 08:40:43.255: V/GCMRegistrar(10648): Unregistering app PACKAGENAME 
```

我试图在我的应用程序中实现 GCM Demo Application 的代码，所以这里是代码。

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);

registerReceiver(mHandleMessageReceiver, new IntentFilter(DISPLAY_MESSAGE_ACTION));
final String regId = GCMRegistrar.getRegistrationId(this);

if (regId.equals("")) {
    // Automatically registers application on
    // startup.
    GCMRegistrar.register(this, SENDER_ID);
} else {
    Log.v(TAG, "Already registered");
    // Device is already registered on GCM, needs to
    // check if it is
    // registered on our server as well.
    if (!GCMRegistrar.isRegisteredOnServer(this)) {
        // Try to register again, but not in the UI
        // thread.
        // It's also necessary to cancel the thread
        // onDestroy(),
        // hence the use of AsyncTask instead of a
        // raw thread.
        final Context context = this;
        mRegisterTask = new AsyncTask<Void, Void, Void>() {
            mRegisterTask.execute(null, null, null);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:04:26.767

我发现了我的问题，都是我的错和愚蠢。

我被添加`GCMRegistrar.unregister ()`到评估中；因此调试的每一步都会导致重新评估此代码并调用注销。

我不想删除它，可能有像我这样的人;）

# ios - 如何在运行时在IOS项目中添加资源

> ID：11445688
> 
> 赞同：1
> 
> 时间：2012-07-12T05:49:58.803
> 
> 标签：ios, xcode

是否可以在运行时将图像包含到 ios 应用程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T05:52:12.120

不可以。Xcode 项目本身在运行时不存在，并且应用程序包无法修改。

如果您需要在运行时添加数据，则需要将其保存在应用程序包之外。

# jquery - 在 jQuery mobile/Phonegap 中第一个成功后，第二个 Ajax 请求不起作用

> ID：11445692
> 
> 赞同：0
> 
> 时间：2012-07-12T05:50:55.867
> 
> 标签：jquery, mobile, jquery-mobile, cordova

我是 jQuery Mobile 和 Phonegap 的新手。我正在尝试构建一个可以在多个平台上运行的应用程序。基本上，我有一个 HTML 文件，里面有一些 DIV（用作不同的页面）。在主屏幕上，我有一个按钮可以链接到另一个页面，如下所示：

```
<a href="#getCategories" onclick='GetCategories(0);' data-transition="pop"
  data-role="button">Get Categories</a>. 
```

`GetCategories(categoryid)`有根据变量 categoryid 返回结果的 Ajax 请求。

我可以进入“#getCategories”屏幕，所有信息都正确显示，没有任何问题。我有大约 6 个类别，每个类别都有不同的类别 ID，从 1 到 6。我还在`GetCategories(categoryid)`每个类别中创建了一个链接以检索它们的子类别，但它不起作用。

请注意，在我用来填写从 Web 服务返回的所有信息的 DIV 中，我为它设置了 id（当然它不起作用）。如果我使用这个 div 的“类”，它会起作用，但后退按钮将直接指向主页，而不是父类别。

我真的想要它，以便每个页面都可以导航回正确的页面，即如果单击后退按钮，具有子类别的页面将导致其父类别页面。

任何建议将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:50:36.653

尝试使用：

```
$('#your_a_id').bind('vclick', function(){ GetCategories(0); }); 
```

属性 Javascript 事件通常不会在带有 jquery mobile 的 HTML 上运行。

始终使用 .bind() 和 jqmobile 事件。[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

# joomla2.5 - 如何在 joomla 中翻译动物园博客组件

> ID：11445693
> 
> 赞同：0
> 
> 时间：2012-07-12T05:50:56.223
> 
> 标签：joomla2.5

我正在使用“falang”语言翻译器的 joomla 2.5.1 网站中使用“2.5.14 的 zooblog”。你能告诉我是否可以在我使用的网站中用“ZOOlingual”翻译动物园博客'falang'语言翻译没有任何问题。我必须知道'joomfish'是可能的，但我不知道'falang'。请回答我，以便我可以将动物园博客从西班牙语翻译成英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:22:08.077

所有 Joomla 2.5 扩展必须符合多语言标准。

一切都可以是多语言的：菜单项、内容项、内容模块，换句话说，除了主菜单项之外的一切都是唯一的并且不能翻译成多种语言。

这是我几年前制作的视频教程，观看和学习：

[http://www.youtube.com/watch?v=2enpEbmFXXA](http://www.youtube.com/watch?v=2enpEbmFXXA)

# java - Query.CompositeFilter 生成 java.lang.VerifyError

> ID：11445697
> 
> 赞同：1
> 
> 时间：2012-07-12T05:51:09.517
> 
> 标签：java, google-app-engine, datastore

有人经历过吗？

我正在使用*Query.addFilter(...)*它工作/工作正常。如果我改为使用***Query.CompositeFilter*** ， 那么只要我使用使用*Query.CompositeFilter*的文件，我就会在运行时遇到**java.lang.VerifyError**。

 *我在这里错过了什么吗？我正在使用JDK 6。*

# git - 恢复在补丁创建过程中被删除的原始文件

> ID：11445699
> 
> 赞同：2
> 
> 时间：2012-07-12T05:51:26.053
> 
> 标签：git

我刚刚开始使用 git。出于某种原因，我必须创建一个更改补丁，其中包括（文件修改 + 4 个新文件创建）。我成功地创建了一个补丁。但是在这个过程中，我创建的那些文件是如何被删除的。我又想要那些文件了。我怎么能得到那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:46:18.197

你需要使用补丁吗？假设您将它们发送到哪里，它们也在使用 git，您可以只向它们发送一个 git 包。看看这里的`git bundle`命令：http: [//www.kernel.org/pub/software/scm/git/docs/git-bundle.html](http://www.kernel.org/pub/software/scm/git/docs/git-bundle.html)

如果您通过获取 的输出为新文件生成补丁`git diff`，您将无法发出任何 git 命令来取回它们，因为它们从来不是 git 跟踪的任何内容的一部分。只需删除您制作的补丁内容即可重新创建文件。

如果您在将新文件提交到历史记录后生成了补丁，您可以通过以下任何一种方法恢复到最新提交的原始状态：

```
git stash 
git checkout -- .
git reset --hard 
```

**执行此操作时请注意您没有现有的工作**。Stash 是所有这些命令中最安全的命令之一，因为它将您的修改状态存储在历史参考中。如果您破坏了某些东西，您可以使用以下命令将其取回`stash pop`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:30:01.463

如果这些文件被提交，一个简单的

```
git checkout -
# or
git checkout -f HEAD 
```

应该足以再次检查工作目录的内容（但它可以覆盖任何当前 - 尚未提交的 - 工作），所以要小心（`git stash`首先可能有用）。

# c++ - 为什么 C++ 中字符串到数字的转换这么慢？

> ID：11445700
> 
> 赞同：6
> 
> 时间：2012-07-12T05:51:32.743
> 
> 标签：c++, stringstream

这个函数从一个字符串中读取一个双精度数组：

```
vector<double> parseVals(string& str) {
    stringstream ss(str);
    vector<double> vals;
    double val;
    while (ss >> val) vals.push_back(val);
    return vals;
} 
```

当使用包含 100 万个数字的字符串调用时，该函数需要 7.8 秒才能执行（Core i5，3.3GHz）。这意味着解析一个数字需要花费 25000 个 CPU 周期。

user315052 指出，相同的代码在他的系统上运行速度要快一个数量级，进一步的测试表明不同系统和编译器之间的性能差异非常大（另见 user315052 的回答）：

```
1\. Win7, Visual Studio 2012RC or Intel C++ 2013 beta: 7.8  sec
2\. Win7, mingw / g++ 4.5.2                          : 4    sec
3\. Win7, Visual Studio 2010                         : 0.94 sec
4\. Ubuntu 12.04, g++ 4.7                            : 0.65 sec 
```

我在 Boost/Spirit 库中找到了一个很好的替代方案。代码安全、简洁且速度极快（在 VC2012 上为 0.06 秒，比 stringstream 快 130 倍）。

```
#include <boost/spirit/include/qi.hpp>

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

vector<double> parseVals4(string& str) {
    vector<double> vals;
    qi::phrase_parse(str.begin(), str.end(),
        *qi::double_ >> qi::eoi, ascii::space, vals);
    return vals;
} 
```

虽然这从实际角度解决了问题，但我仍然想知道为什么 stringstream 的性能如此不一致。我分析了程序以识别瓶颈，但 STL 代码对我来说看起来像乱码。任何熟悉 STL 内部的人的评论将不胜感激。

PS：在上述所有时间中，优化都是 O2 或更好。程序配置文件中既不是字符串流的实例化，也不是矢量图的重新分配。几乎所有的时间都花在提取操作符内部。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:45:33.480

在我运行在 1.6 GHz i7 上的 Linux VM 上，它只需要不到半秒的时间。我的结论是解析并不像您观察到的那么慢。一定有其他一些你正在测量的人工制品导致你的观察结果与我的大不相同。为了让我们更确定我们是在比较苹果和苹果，我将提供我所做的。

**编辑：**在我的 Linux 系统上，我有`g++`4.6.3，用`-O3`. 由于我没有 MS 或 Intel 编译器，我使用了 cygwin `g++`4.5.3，也使用`-O3`. 在 Linux 上，我得到以下输出：另一个事实是我的 Windows 7 是 64 位的，我的 Linux VM 也是如此。我相信 cygwin 只能在 32 位模式下运行。

```
elapsed: 0.46 stringstream
elapsed: 0.11 strtod 
```

在cygwin上，我得到了以下信息：

```
elapsed: 1.685 stringstream
elapsed: 0.171 strtod 
```

我推测 cygwin 和 Linux 性能之间的差异与 MS 库依赖关系有关。请注意，cygwin 环境只是在 Linux VM 的主机上。

这是我定时使用的例程`istringstream`。

```
std::vector<double> parseVals (std::string &s) {
    std::istringstream ss(s);
    std::vector<double> vals;
    vals.reserve(1000000);
    double val;
    while (ss >> val) vals.push_back(val);
    return vals;
} 
```

这是我定时使用的例程`strtod`。

```
std::vector<double> parseVals2 (char *s) {
    char *p = 0;
    std::vector<double> vals;
    vals.reserve(1000000);
    do {
        double val = strtod(s, &p);
        if (s == p) break;
        vals.push_back(val);
        s = p+1;
    } while (*p);
    return vals;
} 
```

这是我用一百万个双精度数填充字符串的例程。

```
std::string one_million_doubles () {
    std::ostringstream oss;
    double x = RAND_MAX/(1.0 + rand()) + rand();
    oss << x;
    for (int i = 1; i < 1000000; ++i) {
        x = RAND_MAX/(1.0 + rand()) + rand();
        oss << " " << x;
    }
    return oss.str();
} 
```

这是我用来计时的例程：

```
template <typename PARSE, typename S>
void time_parse (PARSE p, S s, const char *m) {
    struct tms start;
    struct tms finish;
    long ticks_per_second;
    std::vector<double> vals_vec;

    times(&start);
    vals_vec = p(s);
    times(&finish);
    assert(vals_vec.size() == 1000000);
    ticks_per_second = sysconf(_SC_CLK_TCK);
    std::cout << "elapsed: "
              << ((finish.tms_utime - start.tms_utime
                   + finish.tms_stime - start.tms_stime)
                  / (1.0 * ticks_per_second))
              << " " << m << std::endl;
} 
```

而且，这是`main`功能：

```
int main ()
{
    std::string vals_str;

    vals_str = one_million_doubles();
    std::vector<char> s(vals_str.begin(), vals_str.end());

    time_parse(parseVals, vals_str, "stringstream");
    time_parse(parseVals2, &s[0], "strtod");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:02:32.770

您的开销在于重复实例化`std::stringstream`和解析本身。如果您的数字是纯数字并且不使用任何依赖于语言环境的格式，那么我建议使用`#include <cstdlib>`和`std::strtod()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T06:16:10.860

转换`string`为`double`很慢，因为您的 Corei5 CPU 没有内置转换运算符。

虽然该 CPU 本身可以以相对更快的速度将 a 转换为`short`a ，但您描述的转换必须逐步完成，分析每个字符并确定它是否是 the 的一部分以及如何。`float``int``double`

**考虑到每个替身可能看起来像`-.0`or`INF`或`4E6`or **，您所观察到的代表了需要完成的实际工作**`-NAN`。它可能需要被截断，它可能需要近似并且它可能根本不是有效`double`的。**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T04:01:44.950

`stringstream`每次调用该函数时都会构造一个对象，这可能非常昂贵。

但是，我们没有足够的信息来回答您的问题。您是否在一直打开优化的情况下进行编译？您的函数是内联的，还是每次调用都有函数调用？

有关如何加快速度的建议，您应该考虑`boost::lexical_cast<double>(str)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T06:09:34.623

这是一个非常复杂的解析任务。要解析双精度数必须匹配小数或浮点数，然后它必须提取此字符串并进行实际的字符串转换。这意味着对于字符串中的每个双精度数，您至少要遍历每个双精度数两次，以及为获得下一个双精度数而完成的任何其他功能。提到的另一部分是向量在调整大小时并不是最有效的。但是，解析和转换字符串很慢。**

# r - 使用 R 中的过滤器函数计算 EMA

> ID：11445702
> 
> 赞同：3
> 
> 时间：2012-07-12T05:51:39.220
> 
> 标签：r, vector, filtering

我想用矢量化符号重​​现这段代码

```
getEMA2<-function(x,win){
k<-2/(win+1)
v<-vector()
for (i in 1:length(x)){
    if (i==1){
        v[i]<-x[i]
    }
    else{
        v[i]<-k*x[i]+(1-k)*v[i-1]
    }
}
return (v)
}
testOutput<-getEMA2(rnorm(100,0,1),5) 
```

我尝试过使用过滤器功能，但似乎递归/卷积方法无法实现这一点

感谢您的回复，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T06:22:47.210

由于`filter`计算

```
y[n] = x[n] + alpha * y[n-1] 
```

你需要重新调整结果。

```
f <- function(x,win) {
  alpha <- 2/(win+1)
  filter(x, 1-alpha, method="recursive", side=1, init=x[1]/alpha)*alpha
}
x <- 1:10
k <- 3
getEMA2(x,k)
f(x,k) # identical 
```

大多数过滤器已经在`TTR`包中定义。

# jquery - 在 JQueryMobile UI 中动态添加文本框。

> ID：11445703
> 
> 赞同：0
> 
> 时间：2012-07-12T05:51:44.883
> 
> 标签：jquery, forms, html, jquery-mobile

目前我有一个 JQueryMobile 表单，它有 2 个文本框，但可能存在我必须添加更多文本框的情况。如何做到这一点？...

例如，用户将单击屏幕中的添加按钮，它会在屏幕中显示一个新的文本框。我试图追加，但它不能正常工作。

如何通过向 JQueryMobile 表单动态添加文本框来实现这一点？

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:23:40.170

您在评论中说逻辑应该与 jquery 相同。在 jquery 我做这样的事情来创建新的表单元素：

```
//element where you are going to append your dynamically created element
var body = document.getElementsByTagName('body'); 

//create textbox and append it to the body of the document.
$('<input>').attr({'type' : 'text', 'placeholder' : 'some text'}).appendTo(body); 
```

# ruby-on-rails - 将来自 web 服务的 XML 响应存储到 Rails 模型中

> ID：11445705
> 
> 赞同：0
> 
> 时间：2012-07-12T05:51:53.773
> 
> 标签：ruby-on-rails

我正在通过 VMware Orchestrator API 开发一个到 VMware vCenter 的自定义门户。我正在使用 savon 查询 Orchestrator 的 SOAP API (WSDL) 并返回有效数据……特别是包含所有虚拟机的 XML。

将响应捕获到 Rails 模型中的最佳/最简单方法是什么？响应的 XML 结构如下...

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
      <findResponse xmlns="http://webservice.vso.dunes.ch">
         <findReturn>
            <totalCount>4</totalCount>
            <elements>
               <item>
                  <type>VC:VirtualMachine</type>
                  <id>vc.demo.local/vm-37</id>
                  <properties>
                     <item>
                        <name>displayName</name>
                        <value>FreeNAS</value>
                     </item>
                     <item>
                        <name>isTemplate</name>
                        <value>false</value>
                     </item>
                     <item>
                        <name>name</name>
                        <value>FreeNAS</value>
                     </item>
                     <item>
                        <name>connectionState</name>
                        <value>connected</value>
                     </item>
                     <item>
                        <name>state</name>
                        <value>poweredOff</value>
                     </item>
                     <item>
                        <name>vimHost</name>
                        <value>https://vc.demo.local:443/sdk</value>
                     </item>
                     <item>
                        <name>id</name>
                        <value>vm-37</value>
                     </item>
                     <item>
                        <name>dunesId</name>
                        <value>vc.demo.local/vm-37</value>
                     </item>
                  </properties>
                  <dunesUri>dunes://service.dunes.ch/CustomSDKObject?id='vc.demo.local/vm-37'&amp;dunesName='VC:VirtualMachine'</dunesUri>
               </item>
               <item>
   ...
               </item>
            </elements>
         </findReturn>
      </findResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:57:33.763

您可以挑选出您可能想要查询的几个关键属性（名称、id、类型），然后将其余的 XML 存储为 clob 或 varchar 或本地 XML 类型（如果您的数据库支持）。他们可以在需要时在代码中读取其他值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:03:38.873

我使用 nokogiri gem 来解析 xml。使用 nokogiri，您可以调用 xpath 来获取具有特定父标签的所有元素。例如使用您的 xml：

```
 your_Model = Your_Model.new
     docs = Nokogiri::XML(your.xml)

     your_Model =  docs.xpath('//item').map do |i|
          {    
                #here you would need to map the objects of the xml to your model attributes so if your attributes were called, itemname, and itemvalue the code would be.
                   itemname => i.xpath('name').inner_text,
                   itemvalue => i.xpath('value').inner_text

          }
      your_Model.save! 
```

如果您决定走这条路，请确保您需要 Nokogiri 宝石。

希望能帮助到你

# wcf - WCF IClientMessageInspector 在序列化时崩溃

> ID：11445706
> 
> 赞同：0
> 
> 时间：2012-07-12T05:51:58.237
> 
> 标签：wcf, soap-client

我使用 IClientMessageInspector 及其方法 BeforeSendRequest 来检查请求消息。问题是一些请求消息有成员，这些成员是对象类型的（在实际场景中，可能是示例字符串或其他值，在 KnownType 属性中指定）：

```
[DataContract(Namespace = "")]
    [KnownType(typeof(SomeValueDTO))]
    public class CenDTO
    {
        [DataMember]
        public string Uri { get; set; }

        [DataMember]
        public object Value { get; set; }
    } 
```

请注意，在这个项目中，命名空间没有在任何地方定义。所以在“BeforeSendRequest”我得到了异常。并且看起来这个接口使用的 DataContractSerializer 与实际服务中的不同，它没有这样的序列化错误或类似的东西。错误：

```
 The empty string '' is not a valid name.
   at System.Xml.XmlTextWriter.LookupPrefix(String ns)
   at System.Xml.XmlDictionaryWriter.XmlWrappedWriter.LookupPrefix(String namespaceUri)
   at System.Xml.XmlDictionaryWriter.XmlWrappedWriter.WriteXmlnsAttribute(String prefix, String namespaceUri)
   at System.Xml.XmlDictionaryWriter.WriteXmlnsAttribute(String prefix, XmlDictionaryString namespaceUri)
   at System.Runtime.Serialization.XmlWriterDelegator.WriteXmlnsAttribute(XmlDictionaryString ns)
   at System.Runtime.Serialization.XmlWriterDelegator.WriteAttributeQualifiedName(String attrPrefix, XmlDictionaryString attrName, XmlDictionaryString attrNs, XmlDictionaryString name, XmlDictionaryString ns)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteTypeInfo(XmlWriterDelegator writer, XmlDictionaryString dataContractName, XmlDictionaryString dataContractNamespace)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteTypeInfo(XmlWriterDelegator writer, DataContract contract, DataContract declaredContract)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteCenDTOToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )
   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameters(XmlDictionaryWriter writer, PartInfo[] parts, Object[] parameters)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest)
   at System.ServiceModel.Dispatcher.OperationFormatter.SerializeBodyContents(XmlDictionaryWriter writer, MessageVersion version, Object[] parameters, Object returnValue, Boolean isRequest)
   at System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)
   at System.ServiceModel.Channels.BodyWriter.WriteBodyContents(XmlDictionaryWriter writer)
   at System.ServiceModel.Channels.BodyWriterMessage.OnBodyToString(XmlDictionaryWriter writer)
   at System.ServiceModel.Channels.Message.ToString(XmlDictionaryWriter writer)
   at System.ServiceModel.Channels.Message.ToString()
   at CID.TopicAnalyst.CIA.Test.Utils.MessageInspector.BeforeSendRequest(Message& request, IClientChannel channel) in D:\git\...\MessageInspector.cs:line 25
   at System.ServiceModel.Dispatcher.ImmutableClientRuntime.BeforeSendRequest(ProxyRpc& rpc) 
```

“BeforeSendRequest”的实现（崩溃发生在 .ToString() 上）：

```
public object BeforeSendRequest(ref Message request, IClientChannel channel)
        {
            if(request.Headers.Count > 0)
            {
                request.Headers.RemoveAt(0);
            }
            MessageBuffer buffer = request.CreateBufferedCopy(Int32.MaxValue);
            request = buffer.CreateMessage();
            var message = buffer.CreateMessage().ToString();
            var resultFile = ConfigurationManager.AppSettings.GetValues("requestFile").First();
            _serializer.Write(resultFile, message);
            return null;
        } 
```

测试本身是一个单独的解决方案，它使用服务的引用。在服务实施中，操作如下所示：

```
 [ServiceContract]
    public interface ISoapService
    {
        [OperationContract]
        SomeListResponseMessage GetSomeList(SomeListRequestMessage request);
     }

    [MessageContract]
    public class SomeListRequestMessage : BaseRequestMessage
    {
        ...

        [MessageBodyMember]
        public CenDTO Cen { get; set; }
        ...

     }

    [DataContract(Namespace = "")]
    [KnownType(typeof(SemValueDTO))]
    public class CenDTO
    {
        ...

        [DataMember]
        public object Value { get; set; }
    } 
```

测试解决方案的一些代码：

```
static class Program
    {
        static void Main(string[] args)
        {

            while(true)
            {

                var client = new SoapServiceClient("BasicHttpBinding_ISoapService");
                client.Endpoint.Behaviors.Add(new InspectorBehavior());

                var soapService = client.ChannelFactory.CreateChannel();

                var co = new CooRequestCreator(soapService);
                co.CreateAndWriteRequests();

                Console.WriteLine("Press y to repeat");
                var str = Console.ReadLine();
                if(str != "y") break;
            }

        } 
```

在调用服务之前构造请求消息：

```
class CooRequestCreator : BaseRequestCreator<SomeListRequestMessage>
    {
        SemValueDTO _semaValue = new SemValueDTO
        {
            Key = "fb",
            Label = "Guild",
            Type = "org"
        };

        public CooRequestCreator(ISoapService soapService) : base(soapService)
        {
        }

        protected override SomeListRequestMessage CreateMinRequest()
        {
            return new SomeListRequestMessage
                       {
                          Cen =
                               new CenDTO
                                   {

                                       Value = _semaValue,
                                   },
                           MaxCount = 5
                       };
        } 
```

也许有人可以有相同的经验并可以提供帮助？

# iphone - 如何在不禁用 clipsToBounds 的情况下向 MKMapView 添加阴影

> ID：11445709
> 
> 赞同：1
> 
> 时间：2012-07-12T05:52:14.510
> 
> 标签：iphone, ios, mkmapview, calayer

当我尝试向`MKMapView`' 图层添加投影时遇到问题，为了使阴影可见，我必须将视图的`clipsToBounds`属性设置为 false。但是，这样做会导致地图图块在视图边界之外绘制，重叠阴影并切割部分视图。结果如下所示：

[![iPhone 5.1 模拟器中的错误截图](../Images/0c2f167254fac65b4064c44255a74992.png)](https://i.stack.imgur.com/MyDkm.png)

我想知道是否有一种方法可以在不禁用边界裁剪的情况下绘制阴影，或者在没有这种丑陋的视觉错误的情况下让阴影出现。我设置阴影的代码如下所示：

```
self.mapView.layer.borderWidth = 5.0;
self.mapView.layer.borderColor = [[UIColor whiteColor] CGColor];
self.mapView.layer.shadowOffset = CGSizeMake(0.0, 0.0);
self.mapView.layer.shadowColor = [[UIColor blackColor] CGColor];
self.mapView.layer.shadowRadius = 5.0;
self.mapView.layer.shadowOpacity = 0.2;
self.mapView.clipsToBounds = NO; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:56:05.613

由于该层由 拥有`MKMapView`，因此您自己触摸它通常不是一个好主意。（这种事情很可能在以后的操作系统版本中以奇怪的方式破坏，并且以不可预测的方式运行（看看这是否甚至适用于新的 iOS 6 3D 地图会很有趣）。使用 layer-在 OS X 上支持视图，您根本不应该直接接触图层（除非它是图层托管视图，但这是一个不同的讨论））

要获得下方的阴影，只需在地图下方添加一个阴影即可创建自己的新`CALayer`阴影。或者将 嵌套`MKMapView`为您自己的子视图`UIView`，并将阴影添加到您的视图中（不需要剪辑）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:02:47.587

您必须创建两个视图，一个用于阴影，另一个用于圆角。

更多信息：[UIView 带阴影的圆角](https://stackoverflow.com/questions/11437750/uiview-round-corners-with-shadow/11437918#11437918)

# iphone - 从 UIButton 创建一个 Popover 视图，该视图显示一个 TableView，其中包含 inApp 购买项目的列表

> ID：11445711
> 
> 赞同：0
> 
> 时间：2012-07-12T05:52:29.583
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我创建了一个弹出框，它向我展示了我的应用内购买项目列表。我有 Ray Wenderlich 教程使用的实现类。但肯定有问题。我的问题是：

1.  Popover 以最大高度显示。（我不希望它以 iPad 的 MAX 高度显示）
2.  如果我通过单击其他位置关闭弹出框，然后再次单击按钮以显示弹出框，它会打开弹出框但不会在其中加载视图。

请帮助我真正感到困惑/问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:08:49.320

我正在从 SearchDelivery.xib 中显示 popOverViewController，其中包含 tableView 和搜索栏。在其他 .xib 文件中，我在按钮单击代码上显示了弹出框，它可以帮助您。

```
-(IBAction)deliveryList:(UIButton*)sender
{
SearchDelivery *searchDel1=[[SearchDelivery alloc]initWithNibName:@"SearchDelivery" bundle:nil];

[searchDel1 loadDelAdd:self.arr];
self.searchDel=searchDel1;
[searchDel1 release];

UIPopoverController *popover=[[UIPopoverController alloc]initWithContentViewController:searchDel];
popover.delegate=self;

CGRect rect=searchDel.view.frame;
popover.popoverContentSize=rect.size;

self.popOverController=popover;
[popover release];

[popOverController presentPopoverFromRect:self.view.frame inView:self.view permittedArrowDirections:0 animated:YES];

} 
```

**popoverContentSize 属性用于设置 popOverView 的宽度和高度。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:17:27.683

试试下面给定的代码

```
 -(IBAction)setData1:(id)sender
{
    UIViewController *popoverContent=[[UIViewController alloc] init];
    UITableView *tableView1=[[UITableView alloc] initWithFrame:CGRectMake(265, 680, 0, 0)   style:UITableViewStylePlain];

    UIView *popoverView=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 500, 300)];

    popoverView.backgroundColor=[UIColor whiteColor];

    popoverContent.view=popoverView;
    popoverContent.contentSizeForViewInPopover=CGSizeMake(200, 420);
    popoverContent.view=tableView1;   //Use this if you like to add a tableView in popover
    tableView1.delegate=self;
    tableView1.dataSource=self;

    self.popoverController=[[UIPopoverController alloc] initWithContentViewController:popoverContent];
    [self.popoverController presentPopoverFromRect:CGRectMake(400, 675, 1000, 1000) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

}

# javascript - 获取当前范围内所有已定义的变量

> ID：11445722
> 
> 赞同：4
> 
> 时间：2012-07-12T05:53:40.713
> 
> 标签：javascript, node.js

我正在解析一个包含类似内容的网站

```
hmapId[7]='42500000000626135';
hmapStartInterv[7]='750';
hmapEndInterv[7]='846';
hmapUrlInterv[7]='some url';
hmapNameInterv[7]="some name"
hmapRoleInterv[7]='some role'; 
```

我的计划是将其写入`.js`文件并使用节点 js 执行。之后我想要一些代码行给我之前定义为 JSON 的所有变量，以便在其他程序中使用数据。最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:43:46.990

对于当前范围，这是不可能的（AFAIK），对于全局范围，您`global`在 node.js 中拥有对象（`window`在导航器嵌入式 js 引擎中），它获取全局变量属性：

```
// on global scope, with x not defined as a "var"
x=25
console.info(global['x']===x) // --> writes down 'true' 
```

# c++ - 指针和数组地址

> ID：11445724
> 
> 赞同：3
> 
> 时间：2012-07-12T05:53:53.777
> 
> 标签：c++, pointers, memory-address

我只是在玩指针，发现这个奇怪的东西。我创建了指针`p`并显示了它的地址，就像我在下面的程序中所做的那样，`p`和的地址`&p`不同，为什么它们不同？

```
int main()
{
    int *p, s[5];
    cout << p <<endl;
    cout << &p <<endl;
    p = s;
    cout << p <<endl;
    cout << &p <<endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:56:26.327

`P`是一个指针，表示它保存一个整数的地址。因此，当您打印 p 时，它会显示它指向的整数的地址。而当您打印时，`&p`您实际上是在打印 p 本身的地址，而不是它指向的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:17:34.703

正如 Jeeva 所说，指针 p 也占用了一部分内存（图中黄色部分，它的地址是 0x300），在这个区域中，它保存的值是数组 s 的地址。所以 p == 0x100 和 &p == 0x300![指针](../Images/5be1b50360e746e8199724980aa25c52.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T06:31:27.283

如果等于，`p` *则*`&p`指针将指向自身，这仅适用于 void 指针：

```
void* p = &p;
assert(p == &p); 
```

不过，我还没有看到它的实际用途:)

* * *

哦等等，它也发生在自引用递归数据结构中，这可能非常有用：

```
struct X
{
    X* p;

    void print()
    {
        std::cout << " p = " <<  p << '\n';
        std::cout << "&p = " << &p << '\n';
    }
};

X x;
x.p = &x;
x.print(); 
```

想想链接容器，其中最后一个节点将自己作为其后继节点。我的系统上的输出：

```
 p = 0x7fffb4455d40
&p = 0x7fffb4455d40 
```

为什么？因为一个对象通常在内存中与其第一个数据成员相同的地址开始。

# xml - 将转义的 XML 文本转换为 CDATA 部分

> ID：11445725
> 
> 赞同：1
> 
> 时间：2012-07-12T05:53:59.207
> 
> 标签：xml, groovy, cdata

我希望用 CDATA 块替换转义的 XML 部分，主要是为了提高 XML 的可读性，不幸的是必须由人类阅读。

```
// Input
def xml = '''
<search>
  <search-query>
    &lt;nested/&lt;
    &lt;xml/&lt;
  </search-query>
</search>
'''

def search = new XmlParser().parseText(xml)
def query = search."search-query"
query.replaceNode() {
  "search-query"() {
    // TODO how can I add a CDATA section here?
    //yieldUnescaped("<![CDATA[${query.text()}]]>")
  }
}

new XmlNodePrinter(preserveWhitespace:true).print(search)

// Expected
'''
<search>
  <search-query>
    <![CDATA[<nested/>
    <xml/>]]>
  </search-query>
</search>
''' 
```

*   性能并不重要
*   我希望能够仅在某些元素上使用 CDATA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:56:19.350

使用这个 XSLT 转换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output cdata-section-elements="search-query"/>
<xsl:template match="/"><xsl:copy-of select="."/></xsl:template>
</xsl:stylesheet> 
```

您可以将 cdata-section-elements 替换为以空格分隔的元素名称列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:02:45.773

我能在 Groovy 中获得的最接近的是：

```
import groovy.xml.StreamingMarkupBuilder
import groovy.xml.XmlUtil

// Input
def xml = '''
<search>
  <search-query>
    &lt;nested/&gt;
    &lt;xml/&gt;
  </search-query>
</search>
'''

def nodes = new XmlParser().parseText( xml )

String newXml = XmlUtil.serialize( new groovy.xml.StreamingMarkupBuilder().bind {
  search {
     nodes.'search-query'.each { x ->
      'search-query' {
        mkp.yieldUnescaped "<![CDATA[${x.children()}]]>"
      }
    }
  }
} )

println newXml 
```

哪个打印：

```
<?xml version="1.0" encoding="UTF-8"?>
<search>
  <search-query><![CDATA[[<nested/>
    <xml/>]]]></search-query>
</search> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:57:29.973

我看不到内置 API 可以为您提供任何帮助，因为这些`yield*`方法仅在呈现为字符串时适用（即：使用 MarkupBuilder）。该`replaceNode`方法仅创建新的内存节点，这些节点无法表示“原始”内容。

但是，鉴于您的样本有限，您可能（并且不要因为建议这样做而对我大喊大叫）最好只进行字符串替换：

```
// NOTE: using apache commons because I don't think there's a readily
//       accessible XML entity parser in Groovy's core libraries.
@Grab("org.apache.commons:commons-lang3:3.1")
import org.apache.commons.lang3.StringEscapeUtils

// Input
def xml = '''
<search>
  <search-query>
    &lt;nested/&gt;
    &lt;xml/&gt;
  </search-query>
</search>
'''

def converted = xml.replaceAll(/<search-query>([^<]+)<\/search-query/) {
    def value = StringEscapeUtils.unescapeXml(it[1])
    "<search-query><![CDATA[$value]]></search-query>"
}

assert converted == '''
<search>
  <search-query><![CDATA[
    <nested/>
    <xml/>
  ]]></search-query>>
</se 
```

不包括 Apache commons 导入，它非常干净。如果您不想看到嵌套内容周围的空白，可以更改`unescapeXml(it[1])`为`unescapeXml(it[1].trim())`

这只**适用**于 XML 被正确转义（意思是，没有`<`出现在要替换的部分），并且**只有**当您可以根据它的元素安全地确定要替换的块时。

# c# - C#中的消息驱动bean

> ID：11445728
> 
> 赞同：0
> 
> 时间：2012-07-12T05:54:02.557
> 
> 标签：c#, ibm-mq

任何人都可以建议我编写代码以在 C#.net 中编写消息驱动的 bean 来侦听 MQ 并对其进行处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:20:48.150

XMS 将与 JMS 非常相似。这是 C# 中使用 XMS 的消息侦听器的“hello, world”示例。请包含来自您的 websphere mq 安装的参考 IBM.XMS.dll。

在我的 32 位 Windows 安装中，它是

```
c:\Program Files\IBM\WebSphere MQ\bin\IBM.XMS.dll 
```

这个示例假设了一些硬编码设置并且没有错误处理，但我想你明白了。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using IBM.XMS;

namespace XMSTest
{
    class MyXmsApp
    {
        static void Main(string[] args)
        {
            MyXmsApp app = new MyXmsApp();
            app.Setup();
            Console.ReadLine();
        }

        public void Setup()
        {
            XMSFactoryFactory xff = XMSFactoryFactory.GetInstance(XMSC.CT_WMQ);
            IConnectionFactory cf = xff.CreateConnectionFactory();
            cf.SetStringProperty(XMSC.WMQ_HOST_NAME, "localhost");
            cf.SetIntProperty(XMSC.WMQ_PORT, 1414);
            cf.SetStringProperty(XMSC.WMQ_CHANNEL, "CLIENT");
            cf.SetIntProperty(XMSC.WMQ_CONNECTION_MODE, XMSC.WMQ_CM_CLIENT);
            cf.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, "QM_LOCAL");
            cf.SetIntProperty(XMSC.WMQ_BROKER_VERSION, XMSC.WMQ_BROKER_V1);

            IConnection conn = cf.CreateConnection();
            Console.WriteLine("connection created");
            ISession sess = conn.CreateSession(false, AcknowledgeMode.AutoAcknowledge);
            IDestination dest = sess.CreateQueue("queue://q");
            IMessageConsumer consumer = sess.CreateConsumer(dest);
            MessageListener ml = new MessageListener(OnMessage);
            consumer.MessageListener = ml;
            conn.Start();
            Console.WriteLine("Consumer started");
        }

        private void OnMessage(IMessage msg)
        {
            ITextMessage textMsg = (ITextMessage)msg;
            Console.Write("Got a message: ");
            Console.WriteLine(textMsg.Text);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:17:03.787

MDB 将使用 Java。我不知道是否有可以处理用 C# 编写的 MDB 的应用程序服务器。

如果您的想法是使用 C# 应用程序异步接收 WebSphere MQ 消息，那么您可以使用具有消息侦听器的[XMS .NET 。](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.msc.doc/xms_cgetstd_intronet.html)

# c - 为什么这个模运算符给我带来麻烦？

> ID：11445730
> 
> 赞同：0
> 
> 时间：2012-07-12T05:54:08.017
> 
> 标签：c, modulus

这是一个简单的 C 计算。当 FilterIndex 等于 FilterDepth 时，上面的第一个不会翻转。也就是说，FilterDepth是15，filterIndex变成15，一旦cpu执行了这个，应该是0，但是变成了16，后来变成了1，永远不会是0。

如果我将逻辑一分为二，它就可以工作。我在这里想念什么？

```
filterIndex = ((filterIndex++) % FilterDepth) ; 
```

对比

```
filterIndex++;
filterIndex=filterIndex % FilterDepth; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:55:50.230

这是 C 中未定义的行为，因此它的行为可以是任何东西。
您正试图[在序列点之间多次修改一个值](https://stackoverflow.com/questions/3575350/sequence-points-in-c)。

# python - Scrapy：进行表单登录，然后使用该会话

> ID：11445731
> 
> 赞同：1
> 
> 时间：2012-07-12T05:54:09.503
> 
> 标签：python, scrapy

我正在尝试执行以下操作：

1.  登录网页（在我的例子中是 zendesk.com）
2.  使用该会话进行一些发布请求

事实上，zendesk 错过了一些我现在需要模拟浏览器会话的 api（创建/更改宏）。

所以我不是在写蜘蛛，而是在我的脚本继续进行时尝试与网站进行交互。发布请求从一开始就未知，但仅在我的脚本期间才知道。

在[Scrapy](http://doc.scrapy.org/en/latest/topics/request-response.html#topics-request-response-ref-request-userlogin)文档中，有以下示例来说明如何在 Scrapy 中使用经过身份验证的会话：

```
class LoginSpider(BaseSpider):
  name = 'example.com'
  start_urls = ['http://www.example.com/users/login.php']

  def parse(self, response):
    return [FormRequest.from_response(response,
                formdata={'username': 'john', 'password': 'secret'},
                callback=self.after_login)]

  def after_login(self, response):
    # check login succeed before going on
    if "authentication failed" in response.body:
        self.log("Login failed", level=log.ERROR)
        return

    # continue scraping with authenticated session... 
```

但看起来这只适用于抓取，但在我的情况下，我只想“持有”会话并进一步使用该会话。有没有办法用scrapy来实现这个，或者有没有更适合这个任务的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:15:58.460

非常感谢@wawaruk。根据您链接的stackoverflow帖子，这是我提出的解决方案：

```
import urllib, urllib2, cookielib, re

zendesk_subdomain = 'mysub'
zendesk_username = '...'
zendesk_password = '...'

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
resp = opener.open('http://%s.zendesk.com/access/unauthenticated' % (zendesk_subdomain))
s = resp.read()
data = dict()
data['authenticity_token'] = re.findall('<input name="authenticity_token" type="hidden" value="([^"]+)"', s)[0]
data['return_to'] = 'http://%s.zendesk.com/login' % zendesk_subdomain
data['user[email]'] = zendesk_username
data['user[password]'] = zendesk_password
data['commit'] = 'Log in'
data['remember_me'] = '1'

opener.open('https://localch.zendesk.com/access/login', urllib.urlencode(data)) 
```

从那里使用 opener 可以访问所有页面，例如

```
opener.open('http://%s.zendesk.com/rules/new?filter=macro' % zendesk_subdomain) 
```

# php - 在包含的 php 页面中引用对象 - 以及如何隐藏它

> ID：11445737
> 
> 赞同：0
> 
> 时间：2012-07-12T05:54:41.000
> 
> 标签：php, javascript, dom, instance

因此，自从加入以来，我学到了很多东西 - 与我以前相比 - 但我仍然不太了解术语和功能，我想......所以这是我的问题：

我正在制作几个基于 js 的画廊。这个想法是，将有 3-4 个页面包含一些缩略图，这些缩略图将使用相应的艺术和副本填充特定的 div（我使用 innerHTML 调用的 div）并且到目前为止有效。这是脚本：

```
function changeDiv(target,id) {
var target = document.getElementById('generic');
var id = document.getElementById(id);
target.innerHTML = id.innerHTML; 
} 
```

这很好用......当我在同一页面中有“目标”和所有“ID”时。我什至在页面上使用 php 包含（我将其添加到页脚）并将其嵌套在我设置为可见性的内联 div 中：隐藏。在黑暗中开枪，但这也有效。除了我的页脚现在高了大约 100 像素，只有空白区域。显然它隐藏了内容，但为它腾出了足够的空间。

但我真正想做的是将我正在调用的 div 的来源（我们将它们称为artifact.php）包含到画廊页面（...和gallery1.php）中，就像链接css或js一样在标题中或以相同方式包含在 php 标签中，但不会弄乱我的任何对象。

我希望这是有道理的，但简而言之：如何调用不会显示但可以由 js 调用的外部 php 文档？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:34:14.897

嗯，我实际上并没有得到你想说的话，但我认为这可能会有所帮助

> 保存您的 php 页面让我们说“artwork.php”
> 
> 然后使用 jquery Load 调用页面并隐藏加载页面的 div。

```
$("#any_div_u_want").load('artwork.php',function(){
      $(this).hide();
}); 
```

现在你可以显示包含你的 php 脚本的 div，只要你只用

```
$("#any_div_u_want").show(); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:20:04.670

1) `visibility:hidden`; 保留页面上的位置。改为使用`display:none`。

2) Jo 有两种可能。

a) 如果您的 artifact.php 会动态变化，请使用 Ajax（google it！）。

b) 使用artifact.php 作为JS 文件，即像这样：

```
<?php
/* artwork.php */
header('Content-type: application/javascript');

echo "var myImages = [{'name':'First image','src':'image1.jpg'},{'name':'Next   image','src':'image2.png'}];\n";
?>
//... any other JS functions here ... 
```

和gallery1.php：

```
<html>
<head>
<script type="text/javascript" src="artwork.php"> </script>
</head>
<body>
...
</body> 
```

# tfs - 在 TFS2010 中看到搁置的变化

> ID：11445739
> 
> 赞同：5
> 
> 时间：2012-07-12T05:54:52.743
> 
> 标签：tfs, shelve

我正在使用 TFS 2010。我必须在签入之前查看其他开发人员搁置的代码。我们如何在 TFS2010 中做到这一点，以便我可以得到他的更改和审查。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T06:05:20.347

你所要做的就是：

*   在 Pending Changes 选项卡上按“Unshelve”
*   通过键入“Owner Name”（其他开发人员 tfs 用户名）查找shelfst。
*   搁置它。

![在此处输入图像描述](../Images/c803977ecbf9ffefdbc666ac35554e35.png)

# java - 使用带有 ProGuard 的 Hudson 上的 Maven 构建 Java 应用程序时出现 OutOfMemoryException

> ID：11445742
> 
> 赞同：0
> 
> 时间：2012-07-12T05:55:18.983
> 
> 标签：java, proguard

我正在尝试使用 ProGuard 进行混淆在 Hudson 上构建我的 maven 项目。我只是在执行混淆目标并跳过 ProGuard 的优化和推卸功能。

只有当我尝试在 Hudson 上构建项目时才会出现这个问题，但是当我使用 eclipse 或从命令提示符在我的机器上构建相同的项目时，它会成功构建。

我尝试在 Hudson 上更改`MAVEN_OPTS`和`JAVA_OPTS`选项，但它不起作用。

以下是例外情况：

> [proguard] 读取库 jar [/builds/repositories/builds/com/ibm/dhbcore/6.0/dhbcore-6.0.jar] [proguard] 线程“main”中的异常 java.lang.OutOfMemoryError: Java heap space [proguard] at proguard.classfile.io.LibraryClassReader.createConstant(LibraryClassReader.java:328) [proguard] 在 proguard.classfile.io.LibraryClassReader.visitLibraryClass(LibraryClassReader.java:99) [proguard] 在 proguard.classfile.LibraryClass.accept(LibraryClass. java:248) [proguard] 在 proguard.io.ClassReader.read(ClassReader.java:86) [proguard] 在 proguard.io.FilteredDataEntryReader.read(FilteredDataEntryReader.java:87) [proguard] 在 proguard.io.JarReader。在 proguard.io.DirectoryPump.readFiles(DirectoryPump.java:65) [proguard] 在 proguard.io.DirectoryPump 读取（JarReader.java:65）[proguard]。pumpDataEntries(DirectoryPump.java:53) [proguard] 在 proguard.InputReader.readInput(InputReader.java:226) [proguard] 在 proguard.InputReader.readInput(InputReader.java:200) [proguard] 在 proguard.InputReader.readInput( InputReader.java:178) [proguard] 在 proguard.InputReader.execute(InputReader.java:100) [proguard] 在 proguard.ProGuard.readInput(ProGuard.java:195) [proguard] 在 proguard.ProGuard.execute(ProGuard. java:78) [proguard] 在 proguard.ProGuard.main(ProGuard.java:499) mojoFailed com.pyx4me:proguard-maven-plugin:2.0.4(默认)InputReader.execute(InputReader.java:100) [proguard] 在 proguard.ProGuard.readInput(ProGuard.java:195) [proguard] 在 proguard.ProGuard.execute(ProGuard.java:78) [proguard] 在 proguard.ProGuard。 main(ProGuard.java:499) mojoFailed com.pyx4me:proguard-maven-plugin:2.0.4(默认)InputReader.execute(InputReader.java:100) [proguard] 在 proguard.ProGuard.readInput(ProGuard.java:195) [proguard] 在 proguard.ProGuard.execute(ProGuard.java:78) [proguard] 在 proguard.ProGuard。 main(ProGuard.java:499) mojoFailed com.pyx4me:proguard-maven-plugin:2.0.4(默认)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:25:18.483

如果你的内存不足，要么是你的代码有问题，要么（先试试这个）你真的是内存不足。尝试在构建选项中添加 -Xmx 参数，并为其提供更多内存。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-13T12:05:17.407

感谢您的帮助和回复。我解决了这个问题。我需要在 Proguard 的配置部分定义一个元素作为 pom 的一部分。这解决了我的问题。

```
Regards
Siddharth Shah 
```

# php - 甚至 CURL 函数也不能抓取一些 url

> ID：11445743
> 
> 赞同：1
> 
> 时间：2012-07-12T05:55:21.773
> 
> 标签：php, curl, web-scraping

我正在使用 CURL 从 url 中抓取 html。它适用于我使用的 80% 的网址。但有些网址似乎不是“可刮的”。例如，当我尝试抓取[http://www.thefancy.com](http://www.thefancy.com)时，它不起作用。该网站不断加载，最后它不返回结果。该问题可在以下位置进行测试：[http](http://www.itemmized.com/test/test/) ://www.itemmized.com/test/test/这是我的代码：

```
 if($_POST['submit']) {

 function curl_exec_follow($ch, &$maxredirect = null) {

 $mr = $maxredirect === null ? 5 : intval($maxredirect);

 if (ini_get('open_basedir') == '' && ini_get('safe_mode' == 'Off')) {

curl_setopt($ch, CURLOPT_FOLLOWLOCATION, $mr > 0);
curl_setopt($ch, CURLOPT_MAXREDIRS, $mr);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

} else {

curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);

if ($mr > 0)
{
  $original_url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
  $newurl = $original_url;

  $rch = curl_copy_handle($ch);

  curl_setopt($rch, CURLOPT_HEADER, true);
  curl_setopt($rch, CURLOPT_NOBODY, true);
  curl_setopt($rch, CURLOPT_FORBID_REUSE, false);
  do
  {
    curl_setopt($rch, CURLOPT_URL, $newurl);
    $header = curl_exec($rch);
    if (curl_errno($rch)) {
      $code = 0;
    } else {
      $code = curl_getinfo($rch, CURLINFO_HTTP_CODE);
      if ($code == 301 || $code == 302) {
        preg_match('/Location:(.*?)\n/', $header, $matches);
        $newurl = trim(array_pop($matches));

        // if no scheme is present then the new url is a
        // relative path and thus needs some extra care
        if(!preg_match("/^https?:/i", $newurl)){
          $newurl = $original_url . $newurl;
        }
      } else {
        $code = 0;
      }
    }
  } while ($code && --$mr);

  curl_close($rch);

  if (!$mr)
  {
    if ($maxredirect === null)
    trigger_error('Too many redirects.', E_USER_WARNING);
    else
    $maxredirect = 0;

    return false;
  }
  curl_setopt($ch, CURLOPT_URL, $newurl);
}
 }
return curl_exec($ch);
 }

 $ch = curl_init($_POST['form_url']);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 $data = curl_exec_follow($ch);
  curl_close($ch);

  echo $data; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T06:09:41.790

试试这个..希望这有帮助...

```
<?php

class Curl
{       

public $cookieJar = "";

public function __construct($cookieJarFile = 'cookies.txt') {
    $this->cookieJar = $cookieJarFile;
}

function setup()
{

    $header = array();
    $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    $header[] =  "Cache-Control: max-age=0";
    $header[] =  "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
    $header[] = "Accept-Language: en-us,en;q=0.5";
    $header[] = "Pragma: "; // browsers keep this blank.

    curl_setopt($this->curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.8.1.7) Gecko/20070914 Firefox/2.0.0.7');
    curl_setopt($this->curl, CURLOPT_HTTPHEADER, $header);
    curl_setopt($this->curl,CURLOPT_COOKIEJAR, $cookieJar); 
    curl_setopt($this->curl,CURLOPT_COOKIEFILE, $cookieJar);
    curl_setopt($this->curl,CURLOPT_AUTOREFERER, true);
    curl_setopt($this->curl,CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($this->curl,CURLOPT_RETURNTRANSFER, true);  
}

function get($url)
{ 
    $this->curl = curl_init($url);
    $this->setup();

    return $this->request();
}

function getAll($reg,$str)
{
    preg_match_all($reg,$str,$matches);
    return $matches[1];
}

function postForm($url, $fields, $referer='')
{
    $this->curl = curl_init($url);
    $this->setup();
    curl_setopt($this->curl, CURLOPT_URL, $url);
    curl_setopt($this->curl, CURLOPT_POST, 1);
    curl_setopt($this->curl, CURLOPT_REFERER, $referer);
    curl_setopt($this->curl, CURLOPT_POSTFIELDS, $fields);
    return $this->request();
}

function getInfo($info)
{
    $info = ($info == 'lasturl') ? curl_getinfo($this->curl, CURLINFO_EFFECTIVE_URL) : curl_getinfo($this->curl, $info);
    return $info;
}

function request()
{
    return curl_exec($this->curl);
}
}
{
$curl = new Curl();
$html = $curl->get("http://www.thefancy.com");
echo "$html";
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:45:28.547

可能您无法抓取[http://www.thefancy.com](http://www.thefancy.com)，因为每次到达页面底部时都会加载新内容，因此实际上您正在尝试使用 cUrl 获取大量信息，这可能就是问题所在是。你只是得到一个超时尝试在 php.ini 中设置一个更大的超时，然后再试一次。可能它需要一段时间才能加载，但我认为这样它会起作用。

# php - 如何在 PHP 中使用 SimpleXML 访问 XML 属性

> ID：11445744
> 
> 赞同：0
> 
> 时间：2012-07-12T05:55:31.167
> 
> 标签：php, simplexml

我有一个这样的 XML 文件，我只想获取属性内的值为“1”，PHP 代码应该是什么？提前致谢。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<nodeInfo>
<node flag="128">
<address>18 F5 40 1</address> 
<name>iMeterSolo</name> 
<type>9.7.135.92</type> 
<enabled>true</enabled> 
<deviceClass>0</deviceClass> 
<wattage>0</wattage> 
<dcPeriod>0</dcPeriod> 
<pnode>18 F5 40 1</pnode> 
<property id="ST" ***value="1"*** formatted="1" uom="W" /> 
</node>
<properties>
<property id="ST" value="1" formatted="1" uom="W" /> 
<property id="TPW" value="226" formatted="226" uom="kWs" /> 
</properties>
</nodeInfo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:07:21.867

```
$string = '<?xml version="1.0" encoding="UTF-8" ?> 
    <nodeInfo>
        <node flag="128">
            <address>18 F5 40 1</address> 
            <name>iMeterSolo</name> 
            <type>9.7.135.92</type> 
            <enabled>true</enabled> 
            <deviceClass>0</deviceClass> 
            <wattage>0</wattage> 
            <dcPeriod>0</dcPeriod> 
            <pnode>18 F5 40 1</pnode> 
            <property id="ST" value="1" formatted="1" uom="W" /> 
        </node>
        <properties>
           <property id="ST" value="1" formatted="1" uom="W" /> 
           <property id="TPW" value="226" formatted="226" uom="kWs" /> 
        </properties>
</nodeInfo>';

$xml = simplexml_load_string($string);

echo (string) $xml->node->property->attributes()->value.PHP_EOL;

foreach($xml->properties->property as $element) {

    $attr = $element->attributes();

    echo (string) $attr->value.PHP_EOL;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:10:58.513

尝试这个：

```
<?php
    $xml = '<nodeInfo><node flag="128">
    <address>18 F5 40 1</address> 
    <name>iMeterSolo</name> 
    <type>9.7.135.92</type> 
    <enabled>true</enabled> 
    <deviceClass>0</deviceClass> 
    <wattage>0</wattage> 
    <dcPeriod>0</dcPeriod> 
    <pnode>18 F5 40 1</pnode> 
    <property id="ST" value="1" formatted="1" uom="W" /> 
    </node>
    <properties>
    <property id="ST" value="1" formatted="1" uom="W" /> 
    <property id="TPW" value="226" formatted="226" uom="kWs" /> 
    </properties>
    </nodeInfo>';
    $xmlObj = simplexml_load_string($xml);
    $arrXml = array($xmlObj);
    echo $arrXml[0]->node->property->attributes()->value; 
```

# c# - C# WebBrowser 控件 - 使用 DOM 创建和修改 javascript 变量，然后使用 Applet 读取它

> ID：11445746
> 
> 赞同：0
> 
> 时间：2012-07-12T05:55:46.987
> 
> 标签：c#, javascript, dom, applet, browser

我需要在 java applet 和 C# WebBrowser 控件的 html 页面之间建立一个通信过程。我想在不刷新 html 页面的情况下做到这一点。我知道我可以使用小程序参数与小程序通信，但在这种情况下，我必须每次刷新小程序页面以获取更新的参数。我也可以使用 cookie，但我不想为每个请求将所有那些不必要的 cookie 发送到服务器。所以我在想是否有一种方法可以使用 DOM 创建 javacript 数组变量，然后用小程序读取它。但我不知道是否有可能或可能有其他方法可以做到这一点。任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:03:44.107

**您可以通过在 Webbrowser Controls DocumentText**属性中注入 html 代码来实现此目的

```
string htmlCode = "<html><head></head><body>";
htmlCode += "<applet code="Example.class" width="350" height="350"></applet>";
htmlCode +="</body></html>";

webBrowser1.DocumentText = htmlCode; 
```

# iphone - avplayer可以从mpmusicplayercontroller播放音乐吗

> ID：11445750
> 
> 赞同：1
> 
> 时间：2012-07-12T05:55:56.490
> 
> 标签：iphone, objective-c, ios, xcode, avplayer

这是可能的 AVPlayer 从 MPMusicPlayerController 的 ipodlibrary 获取音乐并播放吗，因为 avplayer 无法从 MPMusicPlayerController 访问 iPodMusicPlayer，因为 AVPlayer 支持后台播放和访问 remoteEvents。下面显示的代码来自 addMusic 项目。所以任何帮助将不胜感激。谢谢

```
void audioRouteChangeListenerCallback (
   void                      *inUserData,
   AudioSessionPropertyID    inPropertyID,
   UInt32                    inPropertyValueSize,
   const void                *inPropertyValue
) {

    // ensure that this callback was invoked for a route change
    if (inPropertyID != kAudioSessionProperty_AudioRouteChange) return;

    // This callback, being outside the implementation block, needs a reference to the
    //      MainViewController object, which it receives in the inUserData parameter.
    //      You provide this reference when registering this callback (see the call to 
    //      AudioSessionAddPropertyListener).
    MainViewController *controller = (MainViewController *) inUserData;

    // if application sound is not playing, there's nothing to do, so return.
    if (controller.appSoundPlayer.playing == 0 ) {

        NSLog (@"Audio route change while application audio is stopped.");
        return;

    } else {

        // Determines the reason for the route change, to ensure that it is not
        //      because of a category change.
        CFDictionaryRef routeChangeDictionary = inPropertyValue;

        CFNumberRef routeChangeReasonRef =
                        CFDictionaryGetValue (
                            routeChangeDictionary,
                            CFSTR (kAudioSession_AudioRouteChangeKey_Reason)
                        );

        SInt32 routeChangeReason;

        CFNumberGetValue (
            routeChangeReasonRef,
            kCFNumberSInt32Type,
            &routeChangeReason
        );

        // "Old device unavailable" indicates that a headset was unplugged, or that the
        //  device was removed from a dock connector that supports audio output. This is
        //  the recommended test for when to pause audio.
        if (routeChangeReason == kAudioSessionRouteChangeReason_OldDeviceUnavailable) {

            [controller.appSoundPlayer pause];
            NSLog (@"Output device removed, so application audio was paused.");

            UIAlertView *routeChangeAlertView = 
                    [[UIAlertView alloc]    initWithTitle: NSLocalizedString (@"Playback Paused", @"Title for audio hardware route-changed alert view")
                                                  message: NSLocalizedString (@"Audio output was changed", @"Explanation for route-changed alert view")
                                                 delegate: controller
                                        cancelButtonTitle: NSLocalizedString (@"StopPlaybackAfterRouteChange", @"Stop button title")
                                        otherButtonTitles: NSLocalizedString (@"ResumePlaybackAfterRouteChange", @"Play button title"), nil];
            [routeChangeAlertView show];
            // release takes place in alertView:clickedButtonAtIndex: method

        } else {

            NSLog (@"A route change occurred that does not require pausing of application audio.");
        }
    }
}

@implementation MainViewController

@synthesize artworkItem;                
@synthesize userMediaItemCollection;    
@synthesize playBarButton;              
@synthesize pauseBarButton;             
@synthesize musicPlayer;                
@synthesize navigationBar;              
@synthesize noArtworkImage;              item has no associated artwork
@synthesize backgroundColorTimer;       

@synthesize nowPlayingLabel;            
@synthesize appSoundButton;             
@synthesize addOrShowMusicButton;       
@synthesize appSoundPlayer;             
@synthesize soundFileURL;               
@synthesize interruptedOnPlayback;      
@synthesize playedMusicOnce;            
@synthesize playing;    

@implementation MainViewController

@synthesize artworkItem;                // the now-playing media item's artwork image, displayed in the Navigation bar
@synthesize userMediaItemCollection;    // the media item collection created by the user, using the media item picker   
@synthesize playBarButton;              // the button for invoking Play on the music player
@synthesize pauseBarButton;             // the button for invoking Pause on the music player
@synthesize musicPlayer;                // the music player, which plays media items from the iPod library
@synthesize navigationBar;              // the application's Navigation bar
@synthesize noArtworkImage;             // an image to display when a media item has no associated artwork
@synthesize backgroundColorTimer;       // a timer for changing the background color -- represents an application that is
                                        //      doing something else while iPod music is playing
@synthesize nowPlayingLabel;            // descriptive text shown on the main screen about the now-playing media item
@synthesize appSoundButton;             // the button to invoke playback for the application sound
@synthesize addOrShowMusicButton;       // the button for invoking the media item picker. if the user has already 
                                        //      specified a media item collection, the title changes to "Show Music" and
                                        //      the button invokes a table view that shows the specified collection
@synthesize appSoundPlayer;             // An AVAudioPlayer object for playing application sound
@synthesize soundFileURL;               // The path to the application sound
@synthesize interruptedOnPlayback;      // A flag indicating whether or not the application was interrupted during 
                                        //      application audio playback
@synthesize playedMusicOnce;            // A flag indicating if the user has played iPod library music at least one time
                                        //      since application launch.
@synthesize playing;                    // An application that responds to interruptions must keep track of its playing/
                                        //      not-playing state.

#pragma mark Music control
- (IBAction) AddMusicOrShowMusic: (id) sender {    

    // if the user has already chosen some music, display that list
    if (userMediaItemCollection) {

        MusicTableViewController *controller = [[MusicTableViewController alloc] initWithNibName: @"MusicTableView" bundle: nil];
        controller.delegate = self;

        controller.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

        [self presentModalViewController: controller animated: YES];
        [controller release];

    } else {

        MPMediaPickerController *picker =
            [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeMusic];

        picker.delegate                     = self;
        picker.allowsPickingMultipleItems   = YES;
        picker.prompt                       = NSLocalizedString (@"Add songs to play", "Prompt in media item picker");

        [[UIApplication sharedApplication] setStatusBarStyle: UIStatusBarStyleDefault animated: YES];

        [self presentModalViewController: picker animated: YES];
        [picker release];
    }
}

- (void) updatePlayerQueueWithMediaCollection: (MPMediaItemCollection *) mediaItemCollection {

    // Configure the music player, but only if the user chose at least one song to play
    if (mediaItemCollection) {

        if (userMediaItemCollection == nil) {

            [self setUserMediaItemCollection: mediaItemCollection];
            [musicPlayer setQueueWithItemCollection: userMediaItemCollection];
            [self setPlayedMusicOnce: YES];
            [musicPlayer play];

        } else {

            BOOL wasPlaying = NO;
            if (musicPlayer.playbackState == MPMusicPlaybackStatePlaying) {
                wasPlaying = YES;
            }

            MPMediaItem *nowPlayingItem         = musicPlayer.nowPlayingItem;
            NSTimeInterval currentPlaybackTime  = musicPlayer.currentPlaybackTime;

            NSMutableArray *combinedMediaItems  = [[userMediaItemCollection items] mutableCopy];
            NSArray *newMediaItems              = [mediaItemCollection items];
            [combinedMediaItems addObjectsFromArray: newMediaItems];

            [self setUserMediaItemCollection: [MPMediaItemCollection collectionWithItems: (NSArray *) combinedMediaItems]];
            [combinedMediaItems release];

            [musicPlayer setQueueWithItemCollection: userMediaItemCollection];

            musicPlayer.nowPlayingItem          = nowPlayingItem;
            musicPlayer.currentPlaybackTime     = currentPlaybackTime;

            if (wasPlaying) {
                [musicPlayer play];
            }
        }

        navigationBar.topItem.leftBarButtonItem.enabled = YES;

        [addOrShowMusicButton   setTitle: NSLocalizedString (@"Show Music", @"Alternate title for 'Add Music' button, after user has chosen some music")
                                forState: UIControlStateNormal];
    }
}

- (void) restorePlaybackState {

    if (musicPlayer.playbackState == MPMusicPlaybackStateStopped && userMediaItemCollection) {

        [addOrShowMusicButton   setTitle: NSLocalizedString (@"Show Music", @"Alternate title for 'Add Music' button, after user has chosen some music")
                                forState: UIControlStateNormal];

        if (playedMusicOnce == NO) {

            [self setPlayedMusicOnce: YES];
            [musicPlayer play];
        }
    }

}

#pragma mark Media item picker delegate methods________

- (void) mediaPicker: (MPMediaPickerController *) mediaPicker didPickMediaItems: (MPMediaItemCollection *) mediaItemCollection {

    [self dismissModalViewControllerAnimated: YES];

    [self updatePlayerQueueWithMediaCollection: mediaItemCollection];

    [[UIApplication sharedApplication] setStatusBarStyle: UIStatusBarStyleBlackOpaque animated: YES];
}

- (void) mediaPickerDidCancel: (MPMediaPickerController *) mediaPicker {

    [self dismissModalViewControllerAnimated: YES];

    [[UIApplication sharedApplication] setStatusBarStyle: UIStatusBarStyleBlackOpaque animated: YES];
}

#pragma mark Music notification handlers__________________

- (void) handle_NowPlayingItemChanged: (id) notification {

    MPMediaItem *currentItem = [musicPlayer nowPlayingItem];

    UIImage *artworkImage = noArtworkImage;

    MPMediaItemArtwork *artwork = [currentItem valueForProperty: MPMediaItemPropertyArtwork];

    // Obtain a UIImage object from the MPMediaItemArtwork object
    if (artwork) {
        artworkImage = [artwork imageWithSize: CGSizeMake (30, 30)];
    }

    // Obtain a UIButton object and set its background to the UIImage object
    UIButton *artworkView = [[UIButton alloc] initWithFrame: CGRectMake (0, 0, 30, 30)];
    [artworkView setBackgroundImage: artworkImage forState: UIControlStateNormal];

    // Obtain a UIBarButtonItem object and initialize it with the UIButton object
    UIBarButtonItem *newArtworkItem = [[UIBarButtonItem alloc] initWithCustomView: artworkView];
    [self setArtworkItem: newArtworkItem];
    [newArtworkItem release];

    [artworkItem setEnabled: NO];

    [navigationBar.topItem setRightBarButtonItem: artworkItem animated: YES];

    [nowPlayingLabel setText: [
            NSString stringWithFormat: @"%@ %@ %@ %@",
            NSLocalizedString (@"Now Playing:", @"Label for introducing the now-playing song title and artist"),
            [currentItem valueForProperty: MPMediaItemPropertyTitle],
            NSLocalizedString (@"by", @"Article between song name and artist name"),
            [currentItem valueForProperty: MPMediaItemPropertyArtist]]];

    if (musicPlayer.playbackState == MPMusicPlaybackStateStopped) {

        [nowPlayingLabel setText: [
                NSString stringWithFormat: @"%@",
                NSLocalizedString (@"Music-ended Instructions", @"Label for prompting user to play music again after it has stopped")]];

    }
}

- (void) handle_PlaybackStateChanged: (id) notification {

    MPMusicPlaybackState playbackState = [musicPlayer playbackState];

    if (playbackState == MPMusicPlaybackStatePaused) {

        navigationBar.topItem.leftBarButtonItem = playBarButton;

    } else if (playbackState == MPMusicPlaybackStatePlaying) {

        navigationBar.topItem.leftBarButtonItem = pauseBarButton;

    } else if (playbackState == MPMusicPlaybackStateStopped) {

        navigationBar.topItem.leftBarButtonItem = playBarButton;

        // Even though stopped, invoking 'stop' ensures that the music player will play  
        //      its queue from the start.
        [musicPlayer stop];

    }
}

- (void) handle_iPodLibraryChanged: (id) notification {
]
}

#pragma mark Application playback control_________________

- (IBAction) playAppSound: (id) sender {

    [appSoundPlayer play];
    playing = YES;
    [appSoundButton setEnabled: NO];
}

- (void) alertView: routeChangeAlertView clickedButtonAtIndex: buttonIndex {

    if ((NSInteger) buttonIndex == 1) {
        [appSoundPlayer play];
    } else {
        [appSoundPlayer setCurrentTime: 0];
        [appSoundButton setEnabled: YES];
    }

    [routeChangeAlertView release];         
}

#pragma mark AV Foundation delegate methods____________

- (void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) appSoundPlayer successfully: (BOOL) flag {

    playing = NO;
    [appSoundButton setEnabled: YES];
}

- (void) audioPlayerBeginInterruption: player {

    NSLog (@"Interrupted. The system has paused audio playback.");

    if (playing) {

        playing = NO;
        interruptedOnPlayback = YES;
    }
}

- (void) audioPlayerEndInterruption: player {

    NSLog (@"Interruption ended. Resuming audio playback.");

        [[AVAudioSession sharedInstance] setActive: YES error: nil];

    if (interruptedOnPlayback) {

        [appSoundPlayer prepareToPlay];
        [appSoundPlayer play];
        playing = YES;
        interruptedOnPlayback = NO;
    }
}

#pragma mark Table view delegate methods

- (void) musicTableViewControllerDidFinish: (MusicTableViewController *) controller {

    [self dismissModalViewControllerAnimated: YES];
    [self restorePlaybackState];
}

#pragma mark Application setup

- (void) setupApplicationAudio {

    NSString *soundFilePath = [[NSBundle mainBundle]    pathForResource:    @"sound"
                                                        ofType:             @"caf"];

    NSURL *newURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];
    self.soundFileURL = newURL;
    [newURL release];

    [[AVAudioSession sharedInstance] setDelegate: self];

   // [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: nil];

    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: nil];

    UInt32 doSetProperty = 0;
    AudioSessionSetProperty (
        kAudioSessionProperty_OverrideCategoryMixWithOthers,
        sizeof (doSetProperty),
        &doSetProperty
                             );

    // Registers the audio route change listener callback function
    AudioSessionAddPropertyListener (
        kAudioSessionProperty_AudioRouteChange,
        audioRouteChangeListenerCallback,
        self
    );

    // Activates the audio session.

    NSError *activationError = nil;
    [[AVAudioSession sharedInstance] setActive: YES error: &activationError];

    // Instantiates the AVAudioPlayer object, initializing it with the sound
    AVAudioPlayer *newPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL: soundFileURL error: nil];
    self.appSoundPlayer = newPlayer;
    [newPlayer release];

    [appSoundPlayer prepareToPlay];
    [appSoundPlayer setVolume: 1.0];
    [appSoundPlayer setDelegate: self];
}

- (void) registerForMediaPlayerNotifications {

    NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];

    [notificationCenter addObserver: self
                           selector: @selector (handle_NowPlayingItemChanged:)
                               name: MPMusicPlayerControllerNowPlayingItemDidChangeNotification
                             object: musicPlayer];

    [notificationCenter addObserver: self
                           selector: @selector (handle_PlaybackStateChanged:)
                               name: MPMusicPlayerControllerPlaybackStateDidChangeNotification
                             object: musicPlayer];

    [musicPlayer beginGeneratingPlaybackNotifications];
}

- (BOOL) useiPodPlayer {

    if ([[NSUserDefaults standardUserDefaults] boolForKey: PLAYER_TYPE_PREF_KEY]) {
        return YES;     
    } else {
        return NO;
    }       
}

- (void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}

- (void) viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];   
    [[UIApplication sharedApplication] endReceivingRemoteControlEvents];
    [self resignFirstResponder];
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}

- (void) remoteControlReceivedWithEvent: (UIEvent *) receivedEvent {
    if (receivedEvent.type == UIEventTypeRemoteControl) {
        switch (receivedEvent.subtype) {
            case UIEventSubtypeRemoteControlTogglePlayPause:
                [self togglePlayPause];
                break;
            case UIEventSubtypeRemoteControlPlay:
                [self playAudio];
                break;
            case UIEventSubtypeRemoteControlPause:
                [self pauseAudio];
                break;

            default:
                break;

        }
    }
}

- (IBAction) playOrPauseMusic: (id)sender {

    [self togglePlayPause];

}

- (void)playAudio {

    [musicPlayer play];
}

- (void)pauseAudio {
    [musicPlayer pause];
}

- (void)togglePlayPause {

    MPMusicPlaybackState playbackState = [musicPlayer playbackState];

    if (playbackState == MPMusicPlaybackStateStopped || playbackState == MPMusicPlaybackStatePaused) {
        [musicPlayer play];
    } else if (playbackState == MPMusicPlaybackStatePlaying) {
        [musicPlayer pause];
    }
}

// Configure the application.
- (void) viewDidLoad {

    [super viewDidLoad];

    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];

    [self setupApplicationAudio];

    [self setPlayedMusicOnce: NO];

    [self setNoArtworkImage:    [UIImage imageNamed: @"no_artwork.png"]];       

    [self setPlayBarButton:     [[UIBarButtonItem alloc]    initWithBarButtonSystemItem: UIBarButtonSystemItemPlay
                                                                                 target: self
                                                                                 action: @selector (playOrPauseMusic:)]];

    [self setPauseBarButton:    [[UIBarButtonItem alloc]    initWithBarButtonSystemItem: UIBarButtonSystemItemPause
                                                                                 target: self
                                                                                 action: @selector (playOrPauseMusic:)]];

    [addOrShowMusicButton   setTitle: NSLocalizedString (@"Add Music", @"Title for 'Add Music' button, before user has chosen some music")
                            forState: UIControlStateNormal];

    [appSoundButton         setTitle: NSLocalizedString (@"Play App Sound", @"Title for 'Play App Sound' button")
                            forState: UIControlStateNormal];

    [nowPlayingLabel setText: NSLocalizedString (@"Instructions", @"Brief instructions to user, shown at launch")];

    if ([self useiPodPlayer]) {

        [self setMusicPlayer: [MPMusicPlayerController iPodMusicPlayer]];

        if ([musicPlayer nowPlayingItem]) {

            navigationBar.topItem.leftBarButtonItem.enabled = YES;

            [self handle_NowPlayingItemChanged: nil];

            if ([musicPlayer playbackState] == MPMusicPlaybackStatePaused) {
                navigationBar.topItem.leftBarButtonItem = playBarButton;
            }
        }

    } else {

        [self setMusicPlayer: [MPMusicPlayerController applicationMusicPlayer]];

        [musicPlayer setShuffleMode: MPMusicShuffleModeOff];
        [musicPlayer setRepeatMode: MPMusicRepeatModeNone];
    }   

    [self registerForMediaPlayerNotifications];

    [self setBackgroundColorTimer: [NSTimer scheduledTimerWithTimeInterval: 3.5
                                                                    target: self
                                                                  selector: @selector (updateBackgroundColor)
                                                                  userInfo: nil
                                                                   repeats: YES]];
}

// Invoked by the backgroundColorTimer.
- (void) updateBackgroundColor {

    [UIView beginAnimations: nil context: nil];
    [UIView setAnimationDuration: 3.0];

    CGFloat redLevel    = rand() / (float) RAND_MAX;
    CGFloat greenLevel  = rand() / (float) RAND_MAX;
    CGFloat blueLevel   = rand() / (float) RAND_MAX;

    self.view.backgroundColor = [UIColor colorWithRed: redLevel
                                                green: greenLevel
                                                 blue: blueLevel
                                                alpha: 1.0];
    [UIView commitAnimations];
}

#pragma mark Application state management_____________

- (void) didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void) viewDidUnload {

    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {

    [[NSNotificationCenter defaultCenter] removeObserver: self
                                                    name: MPMusicPlayerControllerNowPlayingItemDidChangeNotification
                                                  object: musicPlayer];

    [[NSNotificationCenter defaultCenter] removeObserver: self
                                                    name: MPMusicPlayerControllerPlaybackStateDidChangeNotification
                                                  object: musicPlayer];

    [musicPlayer endGeneratingPlaybackNotifications];
    [musicPlayer                release];

    [artworkItem                release]; 
    [backgroundColorTimer       invalidate];
    [backgroundColorTimer       release];
    [navigationBar              release];
    [noArtworkImage             release];
    [nowPlayingLabel            release];
    [pauseBarButton             release];
    [playBarButton              release];
    [soundFileURL               release];
    [userMediaItemCollection    release];

    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T07:02:56.610

这四行应该让你开始:)

```
MPMediaItem *nowPlayingItem = musicPlayer.nowPlayingItem;

NSURL * mediaURL = [nowPlayingItem valueForProperty:MPMediaItemPropertyAssetURL];

AVPlayerItem * myAVPlayerItem = [AVPlayerItem playerItemWithURL:mediaURL];

AVPlayer * myAvPlayer = [AVPlayer playerWithPlayerItem:myAVPlayerItem]; 
```

# javascript - 上传文件时，一个文件不应被另一个文件替换

> ID：11445751
> 
> 赞同：0
> 
> 时间：2012-07-12T05:55:57.757
> 
> 标签：javascript, jquery, html

我在上传文件时遇到问题。请帮助我。

1.  当我一个一个上传文件时，它正在替换第一个上传的文件。
2.  如果用户拖动第二组文件，则上传的文件应为这些文件的并集。

我已经这样编码了，只是看到：- 请通过此链接：- [http://pastebin.com/syyVbw3A](http://pastebin.com/syyVbw3A)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:57:03.513

这个问题与jquery或html5无关。

如果您使用服务器端的javascript（如nodejs），它也只与javascript有关

所以基本上..这与您选择的标签无关，因为最终验证永远不应该在客户端完成。

这个问题与您使用的服务器有关，但除非您告诉我们您正在运行什么服务器以及您在上面使用什么语言，除非您向我们展示您的一些服务器端上传代码，否则我们可能根本无法为您提供帮助。

# excel - 为什么相同的 VBA excel 文件但编译结果不同？

> ID：11445753
> 
> 赞同：1
> 
> 时间：2012-07-12T05:56:10.900
> 
> 标签：excel, compiler-errors, vba

我有两个相似的文件[file01-hasError](https://dl.dropbox.com/u/6194904/2012/same%20file%20but%20different%20compile%20result/Error.xlsm)和[file02-noError](https://dl.dropbox.com/u/6194904/2012/same%20file%20but%20different%20compile%20result/NoError.xlsm)

我无法理解它们有什么问题，因为它们都具有`request`定义相同方法 bbb() 的相同模块；但一个会导致错误，而另一个不会。

你知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T06:05:50.683

该`NoError`文件包含对 的引用`Microsoft XML, V6.0`，该`Error`文件不包含。

然后错误是由该行引起的`Public xmlHttpRequest As MSXML2.XMLHTTP60`

将其设置在`\Tools\References...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:06:50.673

`file01`有编译错误，因为它没有引用`MicrosoftXML`. 打开菜单`Tools|References` 并找到并勾选MicrosoftXML6.0，应用它。错误会消失

# asp.net - 这是使用 Dispose 方法的正确方法吗？

> ID：11445754
> 
> 赞同：2
> 
> 时间：2012-07-12T05:56:11.540
> 
> 标签：asp.net, c#-4.0, idisposable

在这里，我使用了 aspx.cs 中的 dispose 方法，但我不确定处理对象的方式是否以正确的方式完成。Obvisoly我从网上冲浪并在我的代码中使用它，你能说无论对象是否以正确的格式处理。

这是我在 aspx.cs 中的方法

```
public List<CausesField> list(DataTable dt)
        {
             List<CausesField> lst = new List<CausesField>();
            foreach (DataRow row in dt.Rows)
            {

                    using (CausesField SignUpDetails = new CausesField())
                    {
                        SignUpDetails.FirstName = row["FirstName"].ToString();
                        SignUpDetails.LastName = row["LastName"].ToString();
                        SignUpDetails.Birthdate = row["BirthDay"].ToString();
                        SignUpDetails.Gender = row["Gender"].ToString();

                        lst.Add(SignUpDetails);
                        SignUpDetails.Dispose();
                    }

            }
            return lst;

        } 
```

我的班级文件：

```
public  class CausesField:IDisposable
    {

        public string FirstName { get; set; }  public string LastName { get; set; }

        public string Birthdate { get; set; }  public string Gender { get; set; }

         private Component component = new Component();

        private bool disposed = false;

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        private void Dispose(bool disposing)
        {
            // Check to see if Dispose has already been called.
            if (!this.disposed)
            {
                // If disposing equals true, dispose all managed 
                // and unmanaged resources.
                if (disposing)
                {
                    // Dispose managed resources.
                    component.Dispose();
                }

            }
            disposed = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:00:03.173

使用“using”语句时不需要处理实例。提供给`using`语句的对象实现了 IDisposable 接口，以便`dispose()`在 finally 块中调用方法。

您的上述 `using (CausesField SignUpDetails = new CausesField())`语句将等效于以下代码：

```
CausesField SignUpDetails = new CausesField();
try
{
//To do code here
}
finally
{
    if(SignUpDetails!=null)
    {
       SignUpDetails.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T06:00:11.393

该`using`语句`Dispose`在块的末尾自动调用，所以你不应该再自己调用它。

此外，一般来说，除非你持有一些外部资源（锁、文件句柄、套接字、数据库连接等）或非托管内存（我怀疑你的情况就是这种情况），否则你不应该有终结器或`Dispose`方法。垃圾收集器负责释放托管内存。

# asp.net - 防止路由到asp.net路由中的文件夹

> ID：11445755
> 
> 赞同：1
> 
> 时间：2012-07-12T05:56:14.580
> 
> 标签：asp.net, routing

我正在尝试通过使用 asp.net 路由在 asp.net 网络表单中实现无扩展名 url。

```
 routes.Add("MyRouting", new Route("{PagePath}",
 new MyRouteHandler("~/Default.aspx"))); 
```

通过执行此无扩展 URL 可以正常工作，但在少数情况下，路由路径实际上作为真实的物理路径存在。

> EG：localhost/Services 抛出 404 异常，因为根目录中有一个名为 Services 的真实文件夹。

如何跳过目录路由？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:22:37.717

以下代码可能是您更密切地控制传入的 URL 所需的答案。

```
public static void RegisterRoutes(RouteCollection routes) {

    // example: ignore routes with this file extension and with any extra text afterwards
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    ...

    // example: new route to modify an URL and remove the .aspx extension
    routes.MapRoute(
        "UrlManagerRoute",
        "{*url}",
        new { controller = "MyController", action = "MyAction" },
        new { url = @".*\.aspx(/.*)?" }
    );
    ...
} 
```

# javascript - 将 Jasmine JavaScript 单元测试与 TFS Build CI 集成的简单方法

> ID：11445760
> 
> 赞同：6
> 
> 时间：2012-07-12T05:56:35.597
> 
> 标签：javascript, build, tfs, jasmine

我一直在使用 Jasmine 编写 JavaScript 单元测试。但是，这些测试在浏览器中运行，而不是作为 MSTest 的一部分。

我希望我的 TFS 持续集成构建在 JavaScript 单元测试失败时中断。我知道在 Visual Studio 2012 中有一个解决方案，但我在 2010 年（并且可能在未来很长一段时间内）。

有没有一种简单的方法可以将基于 Jasmine 的 JavaScript 单元测试与 TFS Build 集成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T09:54:29.160

Chutzpah测试运行[程序](https://github.com/mmanela/chutzpah)使您能够从命令行或 Visual Studio 运行 QUnit 和 Jasmine JavaScript 单元测试。

因此，您应该能够通过 InvokeProcess 活动将其集成到您的 TFS 构建中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:59:41.030

我会使用 nodejs + jasmine-node，但您也可以使用 junit 记者查看[http://phantomjs.org/ 。](http://phantomjs.org/)Jasmine-node 为 junit 报告器提供 --junitreport 输出。您还可以查看 TFS 构建扩展 (http://visualstudiogallery.msdn.microsoft.com/2d7c8577-54b8-47ce-82a5-8649f579dcb6/view/Discussions/) 和其中的活动。它包括 JUnit 到 TRX（测试结果 xml）的 xml 转换，可以将其推送到 TFS。

# android - 获取默认浏览器书签，并存储到文本文件

> ID：11445764
> 
> 赞同：3
> 
> 时间：2012-07-12T05:56:45.627
> 
> 标签：android, browser, bookmarks

如何获取默认浏览器书签，以及如何将默认浏览器书签存储到文本文件中。

在此链接中，我得到了书签 URL 和标签（包括所有子文件夹 URL 和标签）。请参阅此链接 [在 android 中获取浏览器历史记录和搜索结果](https://stackoverflow.com/questions/7626084/get-browser-history-and-search-result-in-android)

如何获取树形结构格式的书签 URL 和标签。

1.  默认浏览器包含 URL。
2.  在此`BOOKMARKS`包含`URL`和`Folders`和`Sub-Folders`。
3.  每个文件夹包含一些`URL`和`Folders`
4.  我如何获得树结构格式。

例如，如何获得这种树结构格式

```
BOOKMARKS (Parent Folder)
    JAVA (Child Folder)
        http://www.java2s.com/
        http://roseindia.net/
    ANDROID (Child Folder)
        ANDROIDDEVELOPER (Child Folder)
            http://developer.android.com/index.html
        https://play.google.com/store?hl=en
    http://developer.android.com 
```

如何获取树结构格式。可能吗。请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-22T02:35:57.860

如前所述，将以下内容添加到您的 Android 清单文件中

```
<uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-15T07:35:15.103

您可以使用以下代码片段获取书签 -

```
static final String[] columns = { Browser.BookmarkColumns.TITLE, Browser.BookmarkColumns.URL };
Cursor query = getContentResolver().query(Browser.BOOKMARKS_URI,columns, null, null, null);
query.moveToFirst();
while (query.moveToNext()) {
    String title = query.getString(query.getColumnIndex(Browser.BookmarkColumns.TITLE));
    String url = query.getString(query.getColumnIndex(Browser.BookmarkColumns.URL));
} 
```

此外，您还需要在清单文件中授予以下权限才能读取它们 -

```
<uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/> 
```

有关更多详细信息，请参阅[文档](http://developer.android.com/reference/android/provider/Browser.html)

> 公共静态最终 Uri BOOKMARKS_URI
> 
> 包含书签和历史项目的表。表的列在**Browser.BookmarkColumns**中定义。读取此表需要**READ_HISTORY_BOOKMARKS**权限，写入它需要**WRITE_HISTORY_BOOKMARKS**权限。

# asp.net - 我们如何将 .xls 文件导入到 ssms 中，并且只有那些新的项目必须复制到数据库中，而旧的必须自动删除？

> ID：11445769
> 
> 赞同：0
> 
> 时间：2012-07-12T05:57:14.257
> 
> 标签：asp.net, sql-server, excel, ssms

我需要手动将 excel 文件导入 SQL Server 2008 SSMS，并且只将这些项目加载到数据库中，这些项目是新的而不是现有的。请为我找到相同的 SQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:00:03.100

我建议您可以在这种情况下使用 SSIS。我想没有直接的查询来处理这种情况。首先，您需要将数据加载到临时表中，然后您只需移动新记录。请参阅此处了解 T-SQL 命令 [将 Excel 电子表格列导入 SQL Server 数据库](https://stackoverflow.com/questions/375991/import-excel-spreadsheet-columns-into-sql-server-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:54:51.887

您可以使用此处显示的 OPENROWSET 函数 [http://beyondrelational.com/modules/2/blogs/70/posts/10846/export-to-excel-with-column-names.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10846/export-to-excel-with-column-names.aspx)

# google-app-engine - webapp2 jinja2 context_processor

> ID：11445772
> 
> 赞同：2
> 
> 时间：2012-07-12T05:57:26.960
> 
> 标签：google-app-engine, jinja2, webapp2

我正在 GAE、webapp2、jinja2 上构建一个项目，并使用[engineauth](http://engineauth.scotchmedia.com/)进行授权。我需要类似 Django 的东西才能在模板中使用来自**webapp2.request**`context_processor`的会话、用户和其他一些变量。请帮我解决这个问题。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:10:02.890

有很多方法可以实现这一目标。

最简单的方法可能是这样的：

```
def extra_context(handler, context=None):
    """
    Adds extra context.
    """

    context = context or {}

    # You can load and run various template processors from settings like Django does.
    # I don't do this in my projects because I'm not building yet another framework
    # so I like to keep it simple:

    return dict({'request': handler.request}, **context)

# --- somewhere in response handler ---
def get(self):
    my_context = {}
    template = get_template_somehow()
    self.response.out.write(template.render(**extra_context(self, my_context)) 
```

我喜欢当我的变量在模板全局变量中时，我可以在模板小部件中访问它们，而不必在模板中传递一堆变量。所以我这样做：

```
def get_template_globals(handler):
    return {
        'request': handler.request,
        'settings': <...>
    }

class MyHandlerBase(webapp.RequestHandler):
    def render(self, context=None):
        context = context or {}
        globals_ = get_template_globals(self)
        template = jinja_env.get_template(template_name, globals=globals_)
        self.response.out.write(template.render(**context)) 
```

还有其他方法：[使用 Werkzeug 和 Jinja2 的上下文处理器](https://stackoverflow.com/questions/539116/context-processor-using-werkzeug-and-jinja2)**

# css - Django：在模板页面上隐藏必要的表单

> ID：11445775
> 
> 赞同：0
> 
> 时间：2012-07-12T05:57:51.430
> 
> 标签：css, django, html, django-forms

我有一个 Django 应用程序，它通过 HTML5 地理定位从用户坐标中获取纬度/经度，并通过 jQuery 将它们放入表单字段中。然后使用这些坐标将标记放置在地图上。这很好用。

问题：我想隐藏这些表单，以便用户看不到它们，但这些表单仍然需要“在页面上”，以便他们可以接收信息。因此，通过 Django 表单文件排除这些是不可接受的。

我尝试了一种隐藏表单字段但留下表单标签的方法。我想对用户隐藏整行并删除表单字段存在的空间，同时它仍保留在后台以接收信息。

这可能吗？不确定它是否需要 CSS 技巧或 Django 内置的东西。

任何帮助或见解表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:00:39.307

为您的表单提供一个 ID，并在 CSS 中`display: none`为这些 ID 设置。或者，使用公共类而不是单独的 ID。

# facebook - 应用程序安全漏洞 - 如何使一个应用程序的所有令牌无效？

> ID：11445776
> 
> 赞同：0
> 
> 时间：2012-07-12T05:57:56.163
> 
> 标签：facebook, security, access-token, app-secret

我们的一个应用程序被黑了，一些墙贴/照片是代表我们的应用程序发布的。我们怀疑黑客以某种方式从我们的应用程序中检索了 access_token。

解决此安全漏洞的最佳方法是什么？

我们希望使该应用程序的所有访问令牌无效。但问题是如何？更改应用程序密码对这种情况有帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:42:45.303

[据 Facebook 称](http://developers.facebook.com/docs/authentication/access-token-expiration/)，当您更改应用程序密码时，所有访问令牌都将失效。

# php - php中的电话会议

> ID：11445778
> 
> 赞同：0
> 
> 时间：2012-07-12T05:58:04.773
> 
> 标签：php

我想使用 PHP 在我的网站中实现电话会议设施。您能否建议我实施的最佳方法。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:11:38.600

查看 twilio，它以 JavaScript 代码的形式提供此功能。该 API 使用起来相当简单，并且可以很容易地在 PHP 中完成，因为它们有相当好的文档。

# c# - c# gdi+ 保存图像时出现一般错误

> ID：11445779
> 
> 赞同：1
> 
> 时间：2012-07-12T05:58:14.627
> 
> 标签：c#, windows-applications

我尝试使用此代码调整图像大小：

```
 ConvertToBitmap(txtImage.Text);

    private void ConvertToBitmap(string filename)
    {
        if (File.Exists(filename))
        {
            var origImg = System.Drawing.Image.FromFile(filename);
            var widthDivisor = (double)origImg.Width / (double)900;
            var heightDivisor = (double)origImg.Height / (double)750;
            int newWidth, newHeight;

            if (widthDivisor < heightDivisor)
            {
                newWidth = (int)((double)origImg.Width / widthDivisor);
                newHeight = (int)((double)origImg.Height / widthDivisor);
            }
            else
            {
                newWidth = (int)((double)origImg.Width / heightDivisor);
                newHeight = (int)((double)origImg.Height / heightDivisor);
            }

            var newImg = new Bitmap(newWidth, newHeight);
            Graphics g = Graphics.FromImage(newImg);
            g.DrawImage(origImg, new Rectangle(0, 0, newWidth, newHeight));
            System.Drawing.Imaging.EncoderParameters encoderParameters = new System.Drawing.Imaging.EncoderParameters(1);
            encoderParameters.Param[0] = new System.Drawing.Imaging.EncoderParameter(System.Drawing.Imaging.Encoder.Quality, (long)350);
            newImg.Save(fullpath, GetImageCodeInfo("image/jpeg"), encoderParameters);
            g.Dispose();
        }
    }

    public static ImageCodecInfo GetImageCodeInfo(string mimeType)
    {
        ImageCodecInfo[] info = ImageCodecInfo.GetImageEncoders();
        foreach (ImageCodecInfo ici in info)
            if (ici.MimeType.Equals(mimeType, StringComparison.OrdinalIgnoreCase))
                return ici;
        return null;
    }

    private ImageCodecInfo GetEncoder(ImageFormat format)
    {

        ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();

        foreach (ImageCodecInfo codec in codecs)
        {
            if (codec.FormatID == format.Guid)
            {
                return codec;
            }
        }
        return null;
    } 
```

它是调整图像大小，但有些显示错误`a generic error occurred in gdi+`。欢迎任何额外的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:05:42.060

授予文件夹的安全完全权限，然后它工作得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:39:01.447

请注意发生错误时的私有内存使用情况。由于内存泄漏，也可能会出现此问题。

我看到代码正在处理应在使用后正确处理的图形和其他绘图对象。

循环运行此方法，以查看内存消耗是否急剧增加。如果是，则存在内存泄漏，您必须深入挖掘以找到使用后未处理的对象。

# css - 为什么 Facebook 移动评论插件有过多的空白？

> ID：11445788
> 
> 赞同：1
> 
> 时间：2012-07-12T05:59:06.763
> 
> 标签：css, facebook, mobile, facebook-comments

我一直在为为什么我们的某些页面上的 Facebook 评论模块在使用移动浏览器查看页面时有过多的空白而苦恼。

经过几个小时的调试，我现在挑选出特定的代码，它仍然可以重现。我最初认为这是由于 Twitter Bootstrap，但我已经比较了它有和没有它，并且发生了同样的错误。

比较这个有引导程序的：http: [//jsfiddle.net/trevin/uW8fz/](http://jsfiddle.net/trevin/uW8fz/)

而这个没有：http: [//jsfiddle.net/trevin/uW8fz/](http://jsfiddle.net/trevin/uW8fz/)

两者都表现出同样的问题。

如果您未登录，您会在下方看到 200 像素的空白。但是，如果您已登录，您将看到第一个评论插件，然后是大量空白。

![在此处输入图像描述](../Images/18f9527211d5611786fc7a99ad5f95ea.png)

我不知道是什么原因造成的……有什么想法吗？这是 FB 移动评论插件中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:50:01.917

我遇到了同样的问题，最后发现将**mobile="false"**添加到 div 元素解决了我的移动 fb 评论框和底部额外空白的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:12:53.593

看起来这是 Facebook 的一个错误。正在添加设置高度的内联样式。查看[有关此答案](https://stackoverflow.com/questions/6419602/remove-white-space-beneath-facebook-comments-plugin)的更多信息。

# asp.net-mvc-3 - 此属性不能设置为空值

> ID：11445792
> 
> 赞同：0
> 
> 时间：2012-07-12T05:59:31.587
> 
> 标签：asp.net-mvc-3

由于我是 asp.net mvc 3 的新手，所以我对它的内部流程一无所知。我有两个动作来创建新类别作为 Get 和 Post 方法：

```
 public ActionResult Create()
        {
            List<Category> cat = this.display_children(null, 0);
            List<SelectListItem> items = new SelectList(cat, "ID", "CategoryName").ToList();
            items.Insert(0, (new SelectListItem { Text = "root", Value = "" }));
            ViewBag.ParentCategoryID = items;
            return View();
        } 

        [HttpPost]
        public ActionResult Create(Category category)
        {
            if (ModelState.IsValid)
            {
                db.Categories.AddObject(category);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

            List<Category> cat = this.display_children(null, 0);
            List<SelectListItem> items = new SelectList(cat, "ID", "CategoryName").ToList();
            items.Insert(0, (new SelectListItem { Text = "root", Value = "" }));
            ViewBag.ParentCategoryID = items;
            return View(category);
        } 
```

下面是视图：

```
@model IVRControlPanel.Models.Category

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Category</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.CategoryName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CategoryName)
            @Html.ValidationMessageFor(model => model.CategoryName)
        </div>

       <div class="editor-label">
           @Html.Label("Select Category")
        </div>
      <div>
          @*@Html.DropDownList("CategoryList",new SelectList(ViewBag.Categories))*@
          @Html.DropDownList("ParentCategoryID", ViewBag.ParentCategoryID as SelectList) 
          @Html.ValidationMessageFor(model => model.ParentCategoryID)

        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

**问题**：当我单击创建按钮而不填写类别名称字段时，会引发以下异常：

```
This property cannot be set to a null value. 
```

仅当 Visual Studio 处于调试模式时才会引发异常，并且当我继续调试时，验证消息中只会显示错误。在这里，实际上必须是在不引发异常的情况下显示错误，这在不处于调试模式时是可以的。我在数据库中有以下类别表列并使用模型优先方法实体框架：

*   ID -> 主键和身份，整数
*   CategoryName -> 不可为空，varchar(50)
*   ParentCategoryID -> 可以为空

我不擅长 asp.net mvc 3，也不知道可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:06:22.197

在您的操作中替换：

```
ViewBag.ParentCategoryID = items; 
```

和：

```
ViewBag.Categories = items; 
```

在您看来：

```
@Html.DropDownListFor(x => x.ParentCategoryID, ViewBag.Categories as SelectList) 
```

DropDownList 帮助器需要 2 个参数：第一个表示将保存所选值的标量属性，第二个参数表示包含可用项目的集合。他们应该是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:37:38.353

幸运的是，我找到了解决方案。实际上，问题是由于 PreBinding 验证。我正在搜索并在此[链接](https://stackoverflow.com/questions/3129080/server-side-validation-of-a-required-string-property-in-mvc2-entity-framework-4)上发现相同的问题解释得很好。

我为类别制作了部分课程，如下所示：

```
 public partial class Category{
    }

    public class TestEntityValidation{
        [Required]
        [DisplayFormat(ConvertEmptyStringToNull = false)]
        public String CategoryName { get; set; }
    } 
```

在这里，将空字符串转换为 null 设置为 false，这解决了我在 DisplayFormat 属性上的问题。

# lotus-domino - Domino Web 服务提供者 - 最大 SOAP 消息大小是多少？

> ID：11445793
> 
> 赞同：0
> 
> 时间：2012-07-12T05:59:55.193
> 
> 标签：lotus-domino

如何确定对 Domino Web 服务提供者的请求的最大 SOAP 消息大小？

谢谢

马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:15:08.033

它取决于服务器文档中配置的“HTTP 协议限制”。您可以在“Internet 协议...\HTTP”选项卡上找到这些设置 干杯，克劳斯

# asp.net-mvc - Windows Azure 多租户

> ID：11445799
> 
> 赞同：2
> 
> 时间：2012-07-12T06:00:21.777
> 
> 标签：asp.net-mvc, azure, multi-tenant, federated-identity

我正在启动一个新的企业 Web 应用程序。它将托管在 Windows Azure 上，并且将是一个与 SQL 数据库通信的 asp.net MVC 应用程序。

我的问题与多租户以及完成它的正确方法有关。过去，我创建了一个多租户应用程序，方法是拥有一个租户表，而不是在每个表中放置一个 TenantID 列。这很好用（但它只是在较小的范围内，所以它并没有真正将它锻炼到第 n 级）。查看 Azure 上的多租户内容，似乎不推荐这种方式。他们谈论子域、拆分租户等。对我来说，这似乎是一场管理噩梦。我希望用户访问一个网站，输入他们的租户登录详细信息，然后他们就关闭了。

1.  是否有更简单的方法在 Azure 中实现多租户，仍然允许我使用 Azure 的可扩展性优势？
2.  我应该只使用简单的 TenantID 方法吗？Azure 框架是否仍能很好地扩展以适应？
3.  我应该一开始就担心租约还是把它留到最后？

需要建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:49:45.697

我已经在 Azure 上完成了这两种方式。我已经按照您之前在登录时输入租户代码的方式完成了此操作，并且效果很好，我看不出有任何不同的理由。您可以使用 SQL Azure 联合来管理租户，以便轻松拥有多个数据库以实现可伸缩性。

然后我还使用子域方法来识别租户，但它所做的只是将子域映射到租户代码。我在他们不必登录的系统中使用了它，因此对用户来说更容易。

如果只是设计数据库来应对它，一开始就担心它。

# perl - 在 perl 的另一个文件中分离所有公共子例程是否可取？

> ID：11445803
> 
> 赞同：1
> 
> 时间：2012-07-12T06:00:41.223
> 
> 标签：perl, require, subroutine

我想将所有常见的子程序分离到另一个文件中，以节省一些空间并整理每个文件。然后只需使用 require() 来调用子例程。

例如。

```
sub greet{
     print "Hi there\n";
} 
```

我在 Script1.pl、Script2.pl 和 Script3.pl 中添加并调用了它。

将子程序分离到另一个文件的优点和缺点是什么？

我为我的语法感到抱歉。希望你能帮助我理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:21:33.680

正如您所描述的，只要您有多个脚本使用的代码，通常应该将其拆分为一个库。有很多方法可以做到这一点，每种方法都有自己的优点和缺点，超出了您的具体问题的范围。

因此，为了解决您关于将功能移入库的利弊的具体问题，让我们从

## 优点

1.  因为你有更少的重复代码，所以更容易
    *   调试您的代码（错误存在的地方更少）
    *   更新您的代码（您不必在 10 个地方编辑相同的功能）
2.  它使与其他人或仅与其他项目共享您的库函数变得更加容易
3.  它通过让您模块化思考来鼓励更好的设计
4.  节省空间（使用现代存储介质，这是一个非常小的问题）

## 缺点

1.  分发你的代码更难——你必须确保你也分发了所有需要的文件。
2.  一次查看整个代码并不容易——这只是小项目的问题，你甚至可以选择一次将整个项目放在屏幕上（或在你的脑海中）

一般经验法则：除了非常小的和/或独立的项目，使用库。

# java - Java - 如何将计算语句结果四舍五入为两位有效数字

> ID：11445805
> 
> 赞同：0
> 
> 时间：2012-07-12T06:00:46.513
> 
> 标签：java, double, rounding, significant-digits

Java 新手，编程方面相对较新。下面的代码是已经完美运行的程序的最后几行——我只想对最终结果（newTuition 变量）进行四舍五入并将其限制为两位有效数字。

newTuition、TUITIONINCREASE 和学费都是双倍的。

```
 newTuition = ((TUITIONINCREASE * .01) * tuition) + tuition + ".");
    System.out.println("Your current tuition is $" + tuition + ". It will rise next year by " + TUITIONINCREASE + "% and " +
    "your new tuition will be $" + newTuition); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:09:55.013

评论者是正确的。不要为此使用浮点数。您需要的是 BigDecimal 类。这将在数​​学运算期间为您保留精度，并包含舍入和截断的方法。

[http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:09:21.043

使用 BigDecimal.Round：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#round(java.math.MathContext](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#round(java.math.MathContext)

像这样：

```
BigDecimal rounded = value.round(new MathContext(2, RoundingMode.HALF_UP));
System.out.println(value + ": " + rounded); 
```

# user-interface - 通过 GUI 在 Squeeze 上安装 .bin 包且无需 root

> ID：11445808
> 
> 赞同：0
> 
> 时间：2012-07-12T06:00:55.843
> 
> 标签：user-interface, installation, debian

我有一个使用 InstallAnywhere 创建的 .bin 包。该软件包必须作为基于 UI 的安装程序在 Debian Squeeze 上可用，而不是不需要 root 权限的命令行安装过程。

任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:11:58.830

我不认为你可以在没有 root 和通过 UI 的情况下做到这一点。

您需要通过命令行执行此操作，首先以 root 身份登录：

```
su
(type in your password)
chmod + /path/your/binfile.bin
./path/your/binfile.bin 
```

# java - 使用 Hadoop 的机器学习框架

> ID：11445809
> 
> 赞同：2
> 
> 时间：2012-07-12T06:00:59.460
> 
> 标签：java, hadoop, mapreduce, machine-learning, mahout

除了 Mahout 之外还有哪些其他框架用于在 JAVA 中实现机器学习算法，这样底层框架就可以获取 JAVA 代码并在 Hadoop 上运行它？

我正在寻找 Mahout 的替代品，因为我需要在 Hadoop 上实现 SVM 和聚合集群，并且 Mahout 仅支持 SVM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T10:02:15.703

好吧，如果 SVM 是在 hadoop 上，剩下的就很容易实现了！

请注意，朴素的凝聚聚类算法对于大数据（ O(n^2) 复杂度）效率不高。这种复杂性使得算法无法在大型数据集上运行，即使在大型集群上也是如此，除非您尝试以下扩展之一：`ftp://193.167.42.127/franti/papers/GraphPnn-TPAMI.pdf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T12:04:39.197

图案。它有一个 Java API，你也可以使用 R。

[http://www.cascading.org/pattern/](http://www.cascading.org/pattern/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T05:51:05.207

我向你们推荐基于 Apache Hadoop 的机器学习/数据挖掘库，例如 Apache Mahout。

[http://www.openankus.org/pages/viewpage.action?pageId=2195722](http://www.openankus.org/pages/viewpage.action?pageId=2195722)

mapreduce 作业处理就是这么简单容易。你有兴趣吗？查看更多维基 ( [http://www.openankus.org](http://www.openankus.org) )

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T09:55:26.893

快速谷歌搜索给出了以下内容

[http://java-ml.sourceforge.net/](http://java-ml.sourceforge.net/) - 将近 3 年后，发布了。不确定它的支持程度以及实现了哪些算法。

[http://sourceforge.net/projects/weka/](http://sourceforge.net/projects/weka/) - 其他人最近提出的一些建议看起来不错。

另外，请参阅此[线程](https://stackoverflow.com/questions/6829361/java-machine-learning-library-for-commercial-use)。

**两个都没试过。**

# python - Django 反向内化/本地化

> ID：11445815
> 
> 赞同：3
> 
> 时间：2012-07-12T06:01:17.460
> 
> 标签：python, django, localization, internationalization, timezone

这是完全不同的问题。我们有一个欧洲语言的 Django Web 应用程序。现在我们想要同样的英语应用程序。

我想如果我只是按照相反的顺序执行 django 内部化/本地化步骤，我将能够用英语制作应用程序（原始代码是由其他人编写的）。但我认为这不是一个最佳的方法。有没有更好的方法或方法？

PS。当地时区现在是印度。我们计划在未来几天内添加其他国家/地区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:08:54.950

有两个部分可以达到您所指出的所需解决方案：国际化和本地化。

> **国际化**
> 
> 准备本地化软件。通常由开发人员完成。
> 
> **本土化**
> 
> 编写翻译和本地格式。通常由翻译人员完成。

重要的是要注意，如果代码的结构不适合本地化，那么翻译就不够了。

查看[文档](https://docs.djangoproject.com/en/dev/topics/i18n/)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:09:29.063

时区实现起来相当简单。只需使用 pytz 和/或 dateutil。你的问题很广泛，你能举一个你面临的具体语言问题的例子吗？

# asp.net - 我可以在我的 SQL 会话状态配置中重用现有的连接字符串吗？

> ID：11445817
> 
> 赞同：6
> 
> 时间：2012-07-12T06:01:20.497
> 
> 标签：asp.net, web-config, connection-string, session-state

我在我的应用程序中使用 SQL 会话状态，但是鉴于我们已经有多个连接字符串，如果所有连接字符串都保存在`<connectionStrings>`.

我的问题是，是否有可能以某种方式在配置中指定现有的连接字符串`sessionState`？

```
 <connectionStrings>
        <add name="ConnString1" connectionString="data source=xx;Initial Catalog=zzz;"  
             providerName="System.Data.SqlClient" />
        <add name="EFConnString" 
             connectionString="metadata=res://*/EF.csdl|res://*/EF.ssdl|res://*/EF.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=xxx;initial catalog=yyy;App=EntityFramework&quot;" 
             providerName="System.Data.EntityClient" />
        <add name="SessionStateConn" connectionString="data source=xx;Initial Catalog=zzz;"  
             providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <sessionState mode="SQLServer" 
                  sqlConnectionString="**SessionStateConn**" 
                  sqlCommandTimeout="30" customProvider="" ... etc
    </sessionState> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-29T08:49:58.073

迟到的任何人 MSDN 文档都指出，对于 sqlConnectionString 属性，您可以指定完整的连接字符串或现有连接字符串的名称： [https ://msdn.microsoft.com/en-us/library/h6bb9cz9%28v =vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.85%29.aspx) （参见 Attributes & Elements 下的 sqlConnectionString）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T06:04:23.547

并不真地。至少不是以不需要更改代码或转换配置文件的直接方式。ASP.NET 中这种不一致的原因是 SQL Server 会话状态是在 ASP.NET 的原始版本中引入的，而该`connectionStrings`部分是在 2.0 版中添加的。`sessionState`标签设计者不能依赖尚未发明/交付的系统。

# java - BIRT：数字类型（格式）地狱

> ID：11445818
> 
> 赞同：2
> 
> 时间：2012-07-12T06:01:24.070
> 
> 标签：java, localization, locale, birt

Birt 支持 3 种数字/数字类型（例如，对于数据集中的输出列）：

*   `Integer`
*   `Decimal`
*   `Float`

同时，BIRT 有唯一的 1（是的！一个！！！）数字的 css 内置格式。这意味着如果你有，例如 int（天）和 decimal（数量），你不能为它们使用内置的 css 样式（你已经定义了自己的并将它们应用于每个项目）。

走得更远。您从 BIRT 调用 Java 类并将所谓的`Integer`值传递给它。你在 Java 中得到了什么？正确`Double`。`Integer`在我们最初拥有价值的那个水平上，现在是没有办法的。

当然，在某些情况下，您可以尝试根据值猜测数据类型。例如

```
 public Object formatFromBirt(Object pObject){
    if (pObject == null) return null;
    ...
    if (pObject instanceof Double) {
        // workaround for int as double (e.g. days in arrear in total)
        LWDecimal dec = new LWDecimal((Double)pObject);
        if (dec.getScale() == 0){
            pObject = dec.getJavaDecimal().toBigInteger();
        }
    }
    return formatObject(pObject);
} 
```

我的大问题是 - 伙计们，你们**如何处理 BIRT 号码类型系统中的所有这些乱七八糟的东西**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:45:19.773

在 BIRT API 中，他们有这个属性定义。

一般来说，如果您要检查源代码，在每个“属性”或“列”或“字段”或任何您调用的对象中，只要它具有包含其数据类型的属性，您会注意到其中一个此对象字段是数据类型的字符串名称。因此，API 似乎通过此字符串字段验证所选数据类型。

例如，如果您在 DataSet 中创建一个输出列并选择十进制作为其数据类型，则下拉列表中的显示名称实际上是 CamelCase 格式，即“十进制”，但 XML 名称为“十进制”。以编程方式执行此操作，您可以试试

```
 resultSetColumn.setDataType("Decimal"); 
```

因此，您可以以同样的方式以编程方式验证其确切类型。

以下是 DataSet 列的常用数据类型列表。

[http://www.eclipse.org/birt/ref/rom/structs/ResultSetColumn.html#Property-dataType](http://www.eclipse.org/birt/ref/rom/structs/ResultSetColumn.html#Property-dataType)

更新：您可以使用 DesignChoiceConstant 的静态常量，它包括可用于 BIRT 的数据类型。它还包括可用于其他 BIRT API 的属性名称和值，例如 css、标签、允许值列表等。

# java - 当值引用键时如何使用弱引用进行缓存？

> ID：11445822
> 
> 赞同：3
> 
> 时间：2012-07-12T06:01:43.123
> 
> 标签：java, caching, guava, weak-references

我正在使用番石榴的`Cache<Key, Value>`. 只要`Key`不再强可达，缓存条目就应该被垃圾收集（有一天......）。`CacheBuilder.weakKeys()`如果没有从back`Value`到`Key`.

我可以使这个参考变弱，但这可能随时使我的`Value`完全无效。我可以处理它，但我不想这样做。

我可以使用`weakValues()`，但这可能会导致很早就被驱逐，因为我的价值观只在短时间内被引用。

也许我可以使用`softValues()`，但`SoftReference`s[很破](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=cfd518f51afc7780e5188276b5f9?bug_id=6912889)。

可能我弄错了……正确的解决方案是什么？

### 更新

我需要的只是通过在`Value`each中添加一个引用来实现`Key`，但这是不可能的，因为`Key`不在我的控制之下。如果是，那么我不需要缓存，不需要弱引用，什么都不需要。

这样，每个都`Key`将保持其对应的`Value`可达性，这很好¹。此外，每个都 `Value`将保持其`Key`可访问性，但这没有问题，因为不再存在对`Value`.

* * *

¹一些到期会更好，但不是必须的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T22:34:54.147

不幸的是，如果没有[ephemerons](http://delivery.acm.org/10.1145/270000/263733/p176-hayes.pdf?ip=216.239.45.4&acc=ACTIVE%20SERVICE&CFID=96142969&CFTOKEN=46796959&__acm__=1342478362_8336a73eab1a1136cb76b54c06e5c2bc) ，这是无法解决的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:04:40.870

来自 Value -> Key 的指针无关紧要，只要没有其他东西保持在 Value 上。

当 Cache 转储 Key 时，它会被收集。

如果您有 System->Cache->Key<-Value，当 Cache 丢弃键时，您将获得 System->Cache Key<-Value。从 Key 备份到 System（此示例的内存根）的链接已断开，Key 将被恢复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T15:21:41.773

如果你真的想要弱键，那么从值到键的弱引用是正确的做法。

如果您觉得这不合适，请提供有关您要完成的工作的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:11:59.703

您是否认为可以创建密钥的副本并将其用作地图中的密钥？我想你可能有类似的东西

```
Value v = SomeLibrary.giveMeSomething();
String k = v.getName();
String k1 = new String(k);
cache.put(k1,v); 
```

这将适用于 b/c k.equals(k1) 和 k != k1。希望您可以创建用于 Key 的类型的副本或克隆（在您的情况下可能不是 String）。

**但是**，这会改变密钥的生命周期——因为它不再是 Value 中的那个。如果您可以控制放置在地图中的特定对象的生命周期，那么您就可以了。

你认为这可能奏效吗？

# java - 我的java游戏编程方法够用吗

> ID：11445824
> 
> 赞同：0
> 
> 时间：2012-07-12T06:01:59.240
> 
> 标签：java, slick2d

所以我正在使用 slick2d 和 MarteEngine 库制作 2d Java 游戏。这是自从我为我的 Java 类制作检查器以来最大的项目。我对编程概念和使用最佳方式完成工作仍然很陌生。

我的游戏的基本结构是你是僵尸启示录中的玩家/英雄，你可以聚集幸存者来帮助你。在我的编程中有很多我关心的领域。我不确定我的方法是否适合我想要的。该游戏目前也没有网格/瓷砖系统。

我看过一些开源 Java 游戏，但它们并没有真正回答我对我的方法提出的问题。因此，我将在这里列出我不确定的内容，希望你们能够确认/否认我的方法是否合适。抱歉，如果此列表太长，我在输入时正在考虑问题。

1.  **瞄准/攻击**——幸存者一旦进入枪的目标范围内就会自动攻击僵尸。为此，我让每个幸存者获取到每个僵尸的距离（使用距离公式）并找到最近的一个来攻击。我不断检查这一点，所以如果更快的僵尸靠近，幸存者会改变目标。对于僵尸来说，他们会获得一个目标并坚持下去（目前）。僵尸使用距离公式不断检查它们是否在攻击范围内（大约 50 像素）。如果他们在范围内，停止并攻击，否则，向目标移动。

2.  **2D 相机**- 因此 2D 环境中的相机代替您移动世界。我目前的方法是将地图上的僵尸/幸存者/任何实体存储在数组列表中。首先调整背景，然后循环遍历所有列表并修改每个实体的 x 和 y 值。这似乎工作正常，但有些东西你可以真正注意到在背景上滑动。不太清楚如何避免这种情况。

3.  **用户界面**- 我真的不知道如何使用 UI。到目前为止，我所做的只是使用背景，然后生成按钮对象并手动排列它们。然后，我检查鼠标是否在按钮的任何区域上，以及鼠标悬停在按钮上时是否有点击。我有三个不同的背景和按钮，我用布尔值切换出来。不过，我将使用带有背景和按钮的对象重新编码该区域。这是做 UI 的正确方法吗？

4.  **寻路**- 我还没有寻路系统。我必须坚持网格系统吗？我真的更喜欢我的实体沿着地形自由移动，而不是奇怪的方形运动。

5.  **选择**- 我有它，所以你可以选择幸存者，升级他们，以及其他随机的东西。我目前的选择方法是不断检查鼠标 X 和 Y 的位置。我得到了从鼠标到每个幸存者的距离，并检查它是否在 30 像素以内。然后，我检查是否有点击，如果有，选择幸存者并取消选择所有其他人。如果我单击开放空间，我仍在试图弄清楚如何取消选择所有幸存者。有没有更好的方法来做到这一点？

6.  **捡东西**- 和之前说的一样。我检查从玩家到每个可以拾取的物品的距离。如果物品在玩家的 30 像素范围内，它会捡起它。我想目前它似乎工作正常。也许真的没有其他方法可以做到这一点。

7.  **动画**- 我了解如何使用精灵制作动画，但我只是想确定一下。因此，如果我要射击 7 支不同的枪，我是否需要手动制作每个精灵都有精确计时的功能。假设我有一把霰弹枪，它需要后坐力，向前抽气，短暂暂停，向后抽气，然后再次准备好。对于手枪，我真的只需要后坐力。所以我必须为每个动画制作独特的功能？

很抱歉输入这个长长的问题列表。我尝试尽可能多地收集有关这些东西的信息，但我找不到很多关于这些东西的例子。我非常感谢任何答案，即使只是一个是或否的答案。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:45:17.327

**二维相机：**

当你说你修改每个实体的位置时，不确定你在做什么，但我这样做的方式是有一个 Camera 对象，它有自己的 x、y、宽度、高度和移动相机的方法，并且然后在您的绘图周期中：

```
for (every Object on the map)
{
    if (Object is within Camera bounds)
    {
        // Draw the Object at the Object-xy minus the Camera-xy
        // This will draw the Object at its position relative to the camera
        // and won't waste time drawing things that are not within camera bounds
    }
} 
```

**瞄准/攻击**

你的想法是对的，但是检查每个僵尸和每个幸存者将需要大量计算，并且（取决于僵尸和幸存者的数量）可能会导致游戏速度大大降低。碰撞检测也是一样，检查每个对象与其他对象是否发生碰撞需要很多时间。有一些方法可以不必检查所有内容，我建议您阅读“空间分区”。我没有使用过 slick2d，但也许它已经为你实现了这样的东西。

**收拾东西**

与瞄准/攻击相同的处理，如果有太多物品或可以拾取物品的物品，最终会大大降低帧率。

**选择**

这不是你应该选择的方式，但我自己根本不需要使用选择，所以我不完全确定最好的方式，你可能应该尝试四处寻找方法来做到这一点。无论哪种方式，您当前的方式都可以通过仅检查点击来改进，您不需要检查每一帧，只检查何时点击。

目前我能帮到的就这些了，希望至少对你有用。

# c++ - 根据另一个二维向量对二维向量进行排序

> ID：11445829
> 
> 赞同：0
> 
> 时间：2012-07-12T06:02:44.623
> 
> 标签：c++, sorting, stl, vector

所以我有两个 2d 向量，其中 vector1 在第一行中具有共同值，而 vector2 在第二列中具有共同值。我想根据vector1第一行的值对vector2中的行进行排序。最好的方法是什么？

这是我到目前为止所得到的，但我想知道是否有某种方法可以通过排序算法更好地做到这一点：

```
for(unsigned int i = 1; i < vec2.size(); i++)
    if(vec2[i][1] != vec1[0][i])
        swap(vec2[i], vec2[i + 1]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:33:43.957

一个简单的解决方案可能是：

```
std::vector<std::vector<int>> v1 = {
    { 3, 6, 4 },
    { 1, 1, 1 },
    { 1, 1, 1 }
};
std::vector<std::vector<int>> v2 = {
    { 1, 4, 1 },
    { 1, 6, 1 },
    { 1, 3, 1 }
};

const std::vector<int>& order = v1[0];

std::sort(v2.begin(), v2.end(), [&order](
    const std::vector<int>& r1, const std::vector<int>& r2) {
        auto it1 = std::find(order.begin(), order.end(), r1[1]);
        auto it2 = std::find(order.begin(), order.end(), r2[1]);
        return (it1 - it2) < 0;
}); 
```

但是，这种解决方案的成本相当高，O(N^2 log N)。根据向量的大小，这可能是一个问题，也可能不是。

另一种方法是使用中间向量作为间接：

```
std::vector<int> idxs(order.size());
for (std::size_t i = 0; i < order.size(); i++)
    idxs[i] = std::find(order.begin(), order.end(), v2[i][1]) - order.begin();

// After computing the intermediate vector you could access v2 like this:
v2[idxs[i]][j] 
```

此解决方案的成本为 O(N^2)，但每次访问时都会产生一些开销`v2`。

最后，您可以尝试提出自定义排序解决方案。尽管如此，我相信不可能以比 O(N^2) 更小的成本来解决这个问题。

# sql-server - 具有非聚集索引的表的性能问题

> ID：11445830
> 
> 赞同：0
> 
> 时间：2012-07-12T06:02:56.493
> 
> 标签：sql-server, performance

我们有一个包含大约 100,000 条记录的表，在我们的应用程序中经常使用。我们有一个标识 (ID) 列，并且上面有一个聚集索引，一切都运行良好。但由于某些原因，我们不得不使用 Uniqueidentifier 列作为主键。因此，我们在其上添加了一个非聚集索引，并在 ID 列上删除了聚集索引。但是现在，我们在高峰期遇到了很多来自客户的性能下降问题。是因为表现在没有聚集索引吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:37:55.487

您添加主键这一事实绝不意味着您必须删除聚集索引。这两个概念是不同的。`ID`您可以通过非聚集索引和选择的单独聚集索引（例如旧列）实现唯一标识符 PK 。

但真正的问题是**，当您添加 uniqueidentifier PK 时，您是如何更改您的应用程序的**？您是否还修改了应用程序代码以通过这个新的 PK（通过唯一标识符）检索记录？您是否更新了所有连接以引用新的 PK？您是否修改了所有引用旧`ID`列的外键约束？或者应用程序是否继续使用旧的标识`ID`列检索数据？我的期望是您更改*了*应用程序和表，并且访问现在以`SELECT ... FROM table WHERE pk=@uniqueidentifier`. 如果*只*发生这种访问，那么即使使用非聚集唯一标识符主键且没有聚集索引，该表也应该可以正常运行。所以肯定有别的东西在起作用：

*   您的应用程序继续访问基于旧标识`ID`列的表
*   您的查询中有基于旧标识`ID`列的连接
*   有外键约束引用旧`ID`列上的表

最终，您手头有一个性能故障排除问题，并将其作为性能故障排除问题来处理。我有两个很好的资源给你：[等待和队列方法](http://technet.microsoft.com/en-us/library/cc966413.aspx)和[性能故障排除流程图](http://sqlcat.com/sqlcat/b/presentations/archive/2008/04/18/troubleshooting-sql-server-2005-2008-performance-and-scalability-flowchart.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:06:57.320

嗨，我认为您可以使用 NEWSEQUENTIALID() 而不是 NEWID() 将 uniqueidentifier 列作为聚集索引。由于 newsequentialid 生成顺序 ID，并且对于聚集索引，它是最好的。

# ruby-on-rails - 如何通过 Rails 3.2 批量分配提交多个新项目

> ID：11445831
> 
> 赞同：57
> 
> 时间：2012-07-12T06:02:57.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个非常标准的用例。我有一个父对象和一个子对象列表。我想要一个表格形式，我可以在其中一次编辑所有子项，作为表格中的行。我还希望能够插入一个或多个*新*行，并在提交时将它们创建为新记录。

当我使用 a`fields_for`为 has-many 相关的嵌套记录呈现一系列子表单时，rails 会生成字段名称，例如`parent[children_attributes][0][fieldname]`，`parent[children_attributes][1][fieldname]`等等。

这会导致 Rack 解析一个 params 哈希，如下所示：

```
{ "parent" => { 
    "children" => {
      "0" => { ... },
      "1" => { ... } } } 
```

当传递一个*新*的（非持久化的）对象时，同样`fields_for`会生成一个如下所示的字段名称：

```
parent[children_attributes][][fieldname] 
```

请注意`[]`其中没有索引。

这*不能*`[0]`与包含,等的字段以相同的形式发布`[1]`，因为 Rack 会感到困惑并引发

```
TypeError: expected Array (got Rack::Utils::KeySpaceConstrainedParams) 
```

“好吧”，我想。“我会确保*所有*字段都使用`[]`表单而不是`[index]`表单。但我不知道如何说服`fields_for`他们始终如一地这样做。即使我给它一个明确的字段名称前缀和对象：

```
fields_for 'parent[children_attributes][]', child do |f| ... 
```

只要`child`是持久化的，它就会自动修改字段名，使它们成为例如`parent[children_attributes][0][fieldname]`，而将新记录的字段名保留为`parent[children_attributes][][fieldname]`。再一次，机架呕吐。

我不知所措。我如何使用标准 Rails 助手`fields_for`来提交多个*新*记录以及现有记录，将它们解析为参数中的数组，并将所有缺少 ID 的记录创建为数据库中的新记录？我运气不好，我只需要手动生成所有字段名称吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-12T16:09:43.857

正如其他人所提到的，`[]`应该包含新记录的键，否则它会将散列与数组类型混合。您可以使用`child_index`fields_for 上的选项进行设置。

```
f.fields_for :items, Item.new, child_index: "NEW_ITEM" # ... 
```

我通常使用`object_id`代替来确保它是唯一的，以防有多个新项目。

```
item = Item.new
f.fields_for :items, item, child_index: item.object_id # ... 
```

这是一个执行此操作的抽象辅助方法。这假设有一个部分名称`item_fields`将呈现。

```
def link_to_add_fields(name, f, association)
  new_object = f.object.send(association).klass.new
  id = new_object.object_id
  fields = f.fields_for(association, new_object, child_index: id) do |builder|
    render(association.to_s.singularize + "_fields", f: builder)
  end
  link_to(name, '#', class: "add_fields", data: {id: id, fields: fields.gsub("\n", "")})
end 
```

你可以像这样使用它。参数是：链接名称、父表单构建器以及父模型上的关联名称。

```
<%= link_to_add_fields "Add Item", f, :items %> 
```

这里有一些 CoffeeScript 来监听那个链接的点击事件，插入字段，并用当前时间更新对象 id 给它一个唯一的键。

```
jQuery ->
  $('form').on 'click', '.add_fields', (event) ->
    time = new Date().getTime()
    regexp = new RegExp($(this).data('id'), 'g')
    $(this).before($(this).data('fields').replace(regexp, time))
    event.preventDefault() 
```

该代码取自需要付费订阅的[RailsCasts Pro 剧集。](http://railscasts.com/episodes/196-nested-model-form-revised)但是，[在 GitHub 上](https://github.com/railscasts/196-nested-model-form-revised)可以免费获得完整的工作示例。

**更新：**我想指出插入`child_index`占位符并不总是必要的。如果您不想使用 JavaScript 动态插入新记录，您可以提前构建它们：

```
def new
  @project = Project.new
  3.times { @project.items.build }
end

<%= f.fields_for :items do |builder| %> 
```

Rails 会自动为新记录插入索引，因此它应该可以正常工作。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-13T16:07:16.157

所以，我对我最常看到的解决方案并不满意，即在服务器或客户端 JS 中为新元素生成伪索引。这感觉像是一个杂物，特别是考虑到 Rails/Rack 完全能够解析项目列表，只要它们都使用空括号 ( `[]`) 作为索引。这是我最终得到的代码的近似值：

```
# note that this is NOT f.fields_for.
fields_for 'parent[children_attributes][]', child, index: nil do |f|
  f.label :name
  f.text_field :name
  # ...
end 
```

以 结尾的字段名称前缀`[]`，再加上`index: nil`选项，禁用索引生成 Rails 因此有助于尝试提供持久对象。此代码段适用于新对象和已保存对象。生成的表单参数，因为它们始终使用`[]`，被解析为 中的数组`params`：

```
params[:parent][:children_attributes] # => [{"name" => "..."}, {...}] 
```

生成的`Parent#children_attributes=`方法可以`accepts_nested_attributes_for :children`很好地处理这个数组，更新更改的记录，添加新的记录（缺少`"id"`键的），并删除具有`"_destroy"`键集的记录。

我仍然很困扰 Rails 让这变得如此困难，我不得不恢复为硬编码的字段名称前缀字符串而不是使用 eg `f.fields_for :children, index: nil`。为了记录，即使执行以下操作：

```
f.fields_for :children, index: nil, child_index: nil do |f| ... 
```

...未能禁用字段索引生成。

我正在考虑编写一个 Rails 补丁来简化此操作，但我不知道是否有足够多的人关心它，或者它是否会被接受。

编辑：用户@Macario 告诉我为什么 Rails 更喜欢在字段名称中使用显式索引：一旦您进入三层嵌套模型，就需要有一种方法来区分第三级属性属于哪个第二级模型。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-12T07:20:17.413

常见的解决方案是在 [] 中添加一个占位符，并在将代码段插入表单时将其替换为唯一编号。时间戳在大部分时间都有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T08:05:23.573

*长帖删了*

瑞安对此有一个插曲： [http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

看起来您需要手动生成唯一索引。Ryan 使用了`object_id`这个。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-12T08:23:58.870

我在最近的所有项目中都遇到过这个用户案例，我希望这种情况会继续下去，正如 julian7 指出的那样，有必要在 [] 中提供一个唯一的 id。在我看来，这最好通过 js 完成。我一直在拖动和改进一个 jquery 插件来处理这种情况。它适用于现有记录并用于添加新记录，但需要一定的标记并且它会优雅地降级，这是代码和示例：

[https://gist.github.com/3096634](https://gist.github.com/3096634)

使用插件的注意事项：

1.  fields_for 调用应包含在`<fieldset>`具有数据关联属性的数据关联属性中，该属性等于模型的复数名称，以及类“nested_models”。

2.  在调用 fields_for 之前，应该在视图中构建一个对象。

3.  对象字段本身应该`<fieldset>`用类“new”包装，但前提是记录是新的（不记得我是否删除了这个要求）。

4.  标签内的“_destroy”属性的复选框必须存在，插件将使用标签文本创建销毁链接。

5.  与“add_record”类的链接应该存在于 fieldset.nested_models 但在包含模型字段的字段集之外。

Appart from this nuisances 它一直在为我创造奇迹。
在检查了要点之后，这个要求必须更清楚。如果您改进代码或使用它，请告诉我:)。
顺便说一句，我受到 Ryan Bates 的第一个嵌套模型截屏视频的启发。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-12T06:12:40.357

也许你应该作弊。将新记录放在不同的人造属性中，该属性是实际记录的装饰器。

```
parent[children_attributes][0][fieldname]
parent[new_children_attributes][][fieldname] 
```

它不漂亮，但它应该工作。可能需要一些额外的努力来支持验证错误的表单往返。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-13T18:01:54.090

有一种叫做茧的宝石可以做到这一点，我会选择一种更精简的 mor DIY 方法，但它是专门为这种情况而设计的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-12T07:50:27.343

我认为您可以通过将记录的 id 作为隐藏字段来使其工作

# clojure - 以编程方式发布到组合 URL

> ID：11445832
> 
> 赞同：1
> 
> 时间：2012-07-12T06:03:15.147
> 
> 标签：clojure, ring

有没有办法以编程方式访问路由（无需通过 http 调用）。

例如: (defroutes main-routes (POST "/query" "OK..."))

我可以调用 defroutes 宏生成的“查询”函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:37:33.050

`defroutes`创建一个与您传递给它的名称相同的环处理程序。所以基本上你有一个环处理程序，即一个简单的函数，它接受一个请求映射并返回一个响应映射。

在您的情况下，您可以`main-routes`通过传递一个正确的环请求映射对象来调用该函数，该对象具有一个`uri`键，以便将其传递给“/query”处理函数。

# android - SIP 到 SIP 通话录音

> ID：11445834
> 
> 赞同：1
> 
> 时间：2012-07-12T06:03:35.853
> 
> 标签：android, android-ndk

我们如何在 android 中记录 SIP 到 SIP 呼叫？如何使用本机代码在 android 中获取下行和上行访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:52:08.897

看看[CSipSimple](http://code.google.com/p/csipsimple/)。这是一个具有您正在寻找的功能的开源项目。通常，它使用在本机代码上运行的 pjsip SIP 堆栈。您可以在他们的邮件列表中提问。它非常活跃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T16:14:21.100

假设您编写了自己的 Android NDK SIP 堆栈，那么在 Android 上记录 SIP 呼叫非常简单。只需组合入站和出站音频 (MUX)，然后将组合音频写入文件系统或您想要保存通话录音的某个地方。

# android - Android：无法从 json 中检索数据

> ID：11445836
> 
> 赞同：0
> 
> 时间：2012-07-12T06:04:08.023
> 
> 标签：android, json, http-post, httpresponse

我从上一个活动到此活动中获取某个事件的一个 id，并将此 id 传递给当前活动中的 url，以获取该 url 中存在的城市名称。我的代码是..

```
String s = getIntent().getStringExtra("ar");

try{          
    HttpPost hpost = new HttpPost("xxxxxxxxxxxxxxxxx/id");
    HttpResponse response = login.client.execute(hpost);
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("id", s));
    hpost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    String re = EntityUtils.toString(response.getEntity());
    System.out.print(re);

    JSONObject root = new JSONObject(re);  
    eveState.setText(root.getString("cityname"));  
}
catch(Exception e){
    Log.e("exvcx", "error getting data" +e.toString());
} 
```

我得到的例外是`cityname`. 我想我无法将 id 传递给这个 url..请告诉这是正确的方法吗？如果是，请提供问题的解决方案，否则请纠正我做错的地方。谢谢。

```
{"status":1,"response":[{"id":"73","name":"Dangerous","address":"Rydgggh","location":"Entry try","phnumber":"2467568","createdate":"2012-07-11 06:24:31","image":"4ffd626f021487.45227344.jpg","block":"n","deleted":"n","cityname":"Juneau","statename":"Alaska","interestname":"Comedy","username":"princeb","eventdate":"2012-07-13 15:45:29","formatteddate":"July 13, 2012"}],"imageWidth":1024,"imageHeight":1024} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:24:13.367

请参考我在以下问题中给出的答案

[https://stackoverflow.com/a/11260845/1441666](https://stackoverflow.com/a/11260845/1441666)

我有这个数组

```
{
"result": "success",
"countryCodeList":
[
  {"countryCode":"00","countryName":"World Wide"},
  {"countryCode":"kr","countryName":"Korea"}
] 
} 
```

下面我正在获取国家/地区详细信息

```
JSONObject json = new JSONObject(jsonstring);
JSONArray nameArray = json.names();
JSONArray valArray = json.toJSONArray(nameArray);

JSONArray valArray1 = valArray.getJSONArray(1);

valArray1.toString().replace("[", "");
valArray1.toString().replace("]", "");

int len = valArray1.length();

for (int i = 0; i < valArray1.length(); i++) {

 Country country = new Country();
 JSONObject arr = valArray1.getJSONObject(i);
 country.setCountryCode(arr.getString("countryCode"));                        
 country.setCountryName(arr.getString("countryName"));
 arrCountries.add(country);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T07:51:04.373

我注意到的问题是：

*   您`id`在执行 HTTPPost 请求后设置参数。
*   不从服务器输入流中读取响应。您是否尝试将读取的数据打印到控制台并验证它是正确的。

使用下面的读取功能

```
public static JSONObject read(String url, String id){

    InputStream is = null;
    String result = "";
    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("id", id));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        e.printStackTrace();
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();

    } catch (Exception e) {
        e.printStackTrace();
    }

    JSONObject jsonObject=null;
    try {
        jsonObject = new JSONObject(result);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return jsonObject;
} 
```

*   现在您将获得包裹在 JSONObject 中的 JSON 字符串
*   现在遍历这个对象来获取`cityname`

代码示例

```
try {
    JSONObject jsonObject = new JSONObject(json);
    JSONArray jsonArray = jsonObject.optJSONArray("response");
    String cityName = ((JSONObject)jsonArray.get(0)).getString("cityname");
    System.out.println("Cityname : "+cityName);
} catch (JSONException e2) {
    e2.printStackTrace();
} 
```

# c# - windows mobile - 让用户保持登录状态 24 小时

> ID：11445849
> 
> 赞同：0
> 
> 时间：2012-07-12T06:05:30.677
> 
> 标签：c#, windows-mobile

我正在创建我的第一个 Windows Mobile 应用程序。我有一个登录屏幕 - 我只是在徘徊，我如何让用户登录 24 小时，然后它会在哪里要求他们输入用户名和密码？

该应用程序将在白天不断打开/关闭，我只希望他们必须在早上输入他们的凭据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:07:49.983

可以捕获第一次到数据库，并检查第一次登录时间的时间差，如果时间差超过24小时，删除表中的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:53:14.010

您可以使用几个[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime%28v=vs.80%29.aspx)控件和一个[Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer%28v=vs.80%29.aspx)控件来完成此操作。

```
private readonly DateTime NODATE = new DateTime(1900, 1, 1);
private DateTime loginTime;

private void User_Changed(bool loggedIn) {
  if (loggedIn) {
    loginTime = DateTime.Now();
  } else {
    loginTime = NODATE;
  }
} 
```

我保持一个计时器运行并检查各种事物的状态。

```
private void Timer_Tick(object sender, EventArgs e) {
  if (loginTime != NODATE) {
    TimeSpan span = DateTime.Now() - loginTime;
    if (24 < span.TotalHours) {
      // Call your Logout routine
    }
  }
} 
```

# php - 从空值创建默认对象：PHP 5.4

> ID：11445851
> 
> 赞同：0
> 
> 时间：2012-07-12T06:06:10.427
> 
> 标签：php, arrays, object

我收到一个错误，例如在第 196 行从空值创建默认对象（$settings->{$v->Name} = $setting; ）。我想，这是因为我已经将 php 升级到了 5.4 版本。所以我设置了 $setting =(object) null 而不是 $setting =null。但我无法在第 196 行更正它（$settings->{$v->Name} = $setting;）。

```
$settings;

 foreach($SettingsRows as $v)
      {
    $setting =(object) null;

    $setting->ID = $v->ID;
    $setting->Name = $v->Name;
    $setting->Value = $v->Value;
    $setting->Class = $v->ClassName;
    $setting->Form = new $setting->Class($setting);
    $settings->{$v->Name} = $setting;
} 
```

如何将 $setting 值设置为 $settings->{$v->Name} ？我需要在这里改变什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:10:38.757

您的代码看起来很粗略，但显然您需要`$settings = new stdClass`在`foreach`循环之前。（`new stdClass`与 相同`(object) null`，但在我看来更清楚。）

它看起来`$settings`应该只是一个数组（例如，`$settings[$v->Name] = $setting;`），但我不知道你在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T21:27:23.330

使用 PHP 5.4 为我工作

```
$query1 = $this->db()->prepare('SELECT id,title FROM category');
    $query1->execute();

    $d['query1']=(object) null;

    foreach($query1->fetchAll(PDO::FETCH_OBJ) as $k=>$v){

            $d['query1']->$k=$v;

            $query2 = $this->db()->prepare('SELECT id,title FROM page');

            $query2->execute();

            $d['query2']=(object) null;
            foreach($query2->fetchAll(PDO::FETCH_OBJ) as $k=>$v){

                $d['query2']->$k=$v;

            }
    }
    return $d; 
```

# javascript - 如何使用 Javascript 在 Windows 8 Metro 中制作带有部分标签的标题菜单？

> ID：11445857
> 
> 赞同：2
> 
> 时间：2012-07-12T06:06:35.003
> 
> 标签：javascript, html, microsoft-metro, winjs

如何在 Windows 8 Metro Javascript 中制作带有标题菜单和部分标签的导航菜单，如下图所示？

![在此处输入图像描述](../Images/51badf405d9a9488515ce0f7dcecae60.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:06:36.300

首先是定义HTML：

```
 <!-- Define the header menu -->
    <div id="headerMenu" data-win-control="WinJS.UI.Menu">
        <button data-win-control="WinJS.UI.MenuCommand" data-win-options="{id:'section1MenuItem',label:'Section page'}"></button>
        <button data-win-control="WinJS.UI.MenuCommand" data-win-options="{id:'section2MenuItem',label:'Section page'}"></button>
        <button data-win-control="WinJS.UI.MenuCommand" data-win-options="{id:'section3MenuItem',label:'Section page'}"></button>

        <hr data-win-control="WinJS.UI.MenuCommand" data-win-options="{id:'separator',type:'separator'}" />
        <button data-win-control="WinJS.UI.MenuCommand" data-win-options="{id:'homeMenuItem',label:'Home'}">
        </button>
    </div>

 <!-- The content that will be loaded and displayed. -->
    <header aria-label="Header content" role="banner">
        <button class="win-backbutton" aria-label="Back"></button>
        <div class="titlearea win-type-ellipsis">
            <button class="titlecontainer">
                <h1>
                    <span class="pagetitle">Header</span>
                    <span class="chevron win-type-x-large">&#xe099</span>
                </h1>
            </button>
            <h2 class="pagesubtitle">With neat flyin effect</h2>
        </div>
     </header> 
```

然后是Javascript：

```
 // This function is called whenever a user navigates to this page. It
   // populates the page elements with the app's data.
   ready: function (element, options) {

        document.querySelector(".titlearea").addEventListener("click", this.showHeaderMenu, false);
        document.getElementById("section1").addEventListener("click", function () { self.goToSection(0); }, false);
        document.getElementById("section2").addEventListener("click", function () { self.goToSection(1); }, false);
        document.getElementById("section3").addEventListener("click", function () { self.goToSection(2); }, false);
        document.getElementById("homeMenuItem").addEventListener("click", function () { self.goHome(); }, false);

    },
    // Binds the menu to an anchor and shows it
    showHeaderMenu: function () {

        var title = document.querySelector("header .titlearea");
        var menu = document.getElementById("headerMenu").winControl;
        menu.anchor = title;
        menu.placement = "bottom";
        menu.alignment = "left";

        menu.show();

    },
    // Navigate to a section
    goToSection: function (section) {
        switch (section) {
            case 1:
                WinJS.Navigation.navigate("/pages/section1/section1.html");
                break;
            case 2:
                WinJS.Navigation.navigate("/pages/section2/section2.html");
                break;
            case 3:
                WinJS.Navigation.navigate("/pages/section3/section3.html");
                break;

        }
        WinJS.log && WinJS.log("You are viewing the #" + section + " section.", "sample", "status");

    },
    // Go to the home screen
    goHome: function () {

        WinJS.Navigation.navigate("/default.html");

    }, 
```

只是想分享，希望这对某人有帮助！

# robotium - 使用 robotsium 锁定和解锁设备

> ID：11445859
> 
> 赞同：1
> 
> 时间：2012-07-12T06:06:39.163
> 
> 标签：robotium, keyguardlock

我正在为锁屏编写robotium tescases。为了测试它，我需要“锁定”和“解锁”设备（单击设备硬件按钮）。

我尝试使用 KEYCODE_POWER，寻找其他替代方案，但没有用。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:21:32.997

你试过使用`drag()`吗？这可能会解锁它，但我不知道如何锁定。这可能取决于设备本身。

# google-chrome - 如何从自托管无缝过渡到网上商店？

> ID：11445867
> 
> 赞同：3
> 
> 时间：2012-07-12T06:07:27.517
> 
> 标签：google-chrome, google-chrome-extension, manifest, chrome-web-store, crx

我目前自行托管我的 Chrome 扩展程序 - 但最近的变化使技术含量较低的用户侧载 Chrome 扩展程序变得更加复杂，我正在考虑将其移至网上商店。

问题是：我没有看到一个明确的过渡计划，即一旦我在网上商店下载了下一个更新版本，如何让我的约 500,000 多名用户从网上商店下载它。

是否像上传我的新版本一样简单，并在 manifest.json 中更改我的 update_url 以指向该下载链接？update_url 是否可以指向与托管原始扩展名不同的域名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:25:38.410

主要问题是 Chrome Web Store 中的版本需要与您的自托管版本具有相同的 ID - 这意味着它必须使用相同的证书进行签名。为此，您还需要将签名证书上传到网上应用店。首次上传扩展时，将证书添加`key.pem`到 ZIP 文件中，Web Store 将自动使用它进行签名（它将从扩展包中删除，不用担心）。

一旦您在 Web Store 中使用相同的 ID 拥有扩展程序，您就可以在您的自托管位置下添加新版本。用作`http://clients2.google.com/service/update2/crx`您的`update_url`. 一旦网上商店的扩展版本高于自托管位置上的最新版本，每个人都应该自动更新。

此答案基于[Google 群组讨论](https://groups.google.com/d/msg/chromium-extensions/3vvygtEajMQ/qcA03E81jq8J)。

# mysql - MySQL 导出命令

> ID：11445868
> 
> 赞同：0
> 
> 时间：2012-07-12T06:07:31.927
> 
> 标签：mysql, export

我有一个 MySQL 数据库，需要导出到 CSV 文件。谷歌告诉我很多这样做的例子，但所有的例子都是为了导出一个表。

任何人都可以帮助以特定方式导出一些数据（如下所示）吗？

数据库是这样的：

艺术家

*   ID
*   姓名

专辑

*   ID
*   姓名

标题

*   ID
*   艺术家 ID <- FK
*   专辑 ID <- FK
*   姓名

标题具有指向艺术家姓名和专辑名称的 FK 字段。

如何进行导出，以便输出 csv 文件如下所示：

> * * *
> 
> column1（艺术家），column2（专辑），column3（标题）
> 
> * * *
> 
> 约翰, 最新, 第一首歌
> 约翰, 工作中, 好歌
> 约翰, 加利福尼亚, 哦 SF
> 卢克, 我的歌, 一首歌
> 卢克, 我的歌, 两首歌
> 卢克, 作品集, 大名鼎鼎
> 的汤姆, 我的作品, 我的歌
> 汤姆, 我的作品, II 歌
> 汤姆, 我的作品, III 歌

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:26:21.017

您可以创建一个视图并从那里导出。

扩展 Mahesh 的查询：

```
CREATE VIEW view_example AS 
SELECT artist.name AS artist_name, album.name AS album_name , title.name AS title_name 
FROM artist,album,title 
WHERE artist.id=title.artist_id AND album.id=title.album_id;

SELECT * FROM view_example INTO OUTFILE 'example_output.csv' FIELDS TERMINATED BY ','; 
```

我对此进行了测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:16:32.187

在这种情况下，只需为此编写一个查询，当输出出现时，然后导出结果表![在此处输入图像描述](../Images/2826e8eda30001d2ad6fbc62aa2b19a5.png)

# c++ - 如何传递 std::shared_ptr 到一个函数？

> ID：11445869
> 
> 赞同：1
> 
> 时间：2012-07-12T06:07:41.123
> 
> 标签：c++, c++11, shared-ptr

> **可能重复：**
> [我应该通过引用传递 shared_ptr 吗？](https://stackoverflow.com/questions/8385457/should-i-pass-a-shared-ptr-by-reference)
> [将智能指针作为参数传递](https://stackoverflow.com/questions/10826541/passing-smart-pointers-as-arguments)

我应该通过值还是通过常量引用传递它？我已经阅读了许多关于是通过值还是通过常量引用传递复制可构造对象的经验法则。如：

1.  通过常量引用传递对象并通过值内置类型（函数对象除外）
2.  按值传递，除非对象（包括动态内存）的大小小于 2 * 双倍大小。

你能解释一下这些规则是如何适用的 `std::shared_ptr<Resource>`吗？我知道该对象可能非常小，可能是一个指针和一个引用计数器，但它仍然是一个对象。这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:17:04.293

也许最重要的问题（关于性能）是创建 a 的副本`std::shared_ptr<...>`（例如在按值传递时发生）需要引用计数的互锁增量。或者可能是其他形式的同步，例如关键部分，具体取决于实现。这样的成本在多线程程序中可能很重要。

通过引用传递几乎肯定是更好的选择。它的主要缺点（或者这仅与`boost::shared_ptr<...>`？）是仅提供标准线程安全保证：必须保护`shared_ptr<...>`对单个的访问（例如，通过互斥锁），除非所有访问都仅对 const 方法。`shared_ptr<...>`在多线程情况下，传递对`shared_ptr<...>`s 的 const 引用可能会使确保正确同步变得更加困难。

在单线程程序中，它可能没有太大区别。

# objective-c - 使用抖动 API 检测抖动

> ID：11445872
> 
> 赞同：0
> 
> 时间：2012-07-12T06:07:56.877
> 
> 标签：objective-c, ios5, ios4, xcode4, motion-detection

只有当我认为有第一响应者时，才能触发类似`motionBegan:`或`motionEnded:`用于监控震动的事件。好的，所以我可以像这样使视图第一响应者：`[self.view becomeFirstResponder];`. 但是默认情况下视图不能是第一响应者（为什么？）所以我需要创建一个 UIView 子类并将默认值覆盖`canBecomeFirstResponder`为`YES`. 这个 UIView 子类将如何提供帮助？这一切如何运作？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:56:28.393

查看本指南，尤其是有关急救人员的内容： [http ://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

# php - 将数组转换为键值对数组

> ID：11445875
> 
> 赞同：2
> 
> 时间：2012-07-12T06:08:17.113
> 
> 标签：php, arrays, key-value

我有一个逗号分隔的字符串，我分解成一个数组。如果数组的长度未知，并且我想将它变成一个键值对数组，其中数组中的每个元素都具有相同的键，我该怎么做？我假设我必须使用 array_combine？谁能给我一个使用下面数组的例子？：

例如：

```
array([0]=>zebra, [1]=>cow, [2]=>dog, [3]=>monkey, [4]=>ape) 
```

进入：

```
array([animal]=>zebra, [animal]=>cow, [animal]=>dog, [animal]=>monkey, [animal]=>ape) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:14:18.527

您不能对数组中的每个元素使用相同的键。您需要一个唯一标识符来访问数组的值。当你使用animal for all时，应该使用什么值？您可以做的是制作一个二维数组，在数组中包含一个数组：

```
array(
    [animals] => array(
        [0]=>zebra, [1]=>cow, [2]=>dog, [3]=>monkey, [4]=>ape
    )
) 
```

这可以与`$array['animals'][0]`

但是您仍然需要数字或唯一标识符来访问数组的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T06:15:58.563

像这样的东西：

```
$string = 'zebra,cow,dog,monkey,ape';
$array = explode(',', $string);

$arrayReturn['animals'] = $array;

print_r($arrayReturn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:24:43.060

你不能对所有的值都有相同的键，但你可以这样做

> 假设你的字符串是

```
$a = 'dog,ant,rabbit,lion';
$ar = explode(',',$a);
$yourArray = array();
foreach($ar as $animals){
   $yourArray['animals']=$animals;
} 
```

现在不管你的字符串有多长，你都会有你的数组

> $yourArray['animals'][0]='dog'
> 
> $yourArray['animals'][1]='ant'

....... 很快 ......

# jsf - 我们可以在同一个 EAR 中有两个不同的 jsf 版本吗

> ID：11445882
> 
> 赞同：0
> 
> 时间：2012-07-12T06:08:47.330
> 
> 标签：jsf, ear

我正在为我的项目使用 JSF1.1。工作区包括 EAR、动态 Web 模块和 Java 项目。

现在我想再拥有一个带有 JSF2.1 的动态 web 模块。有可能的？

并且在同一个 EAR 中拥有两个不同版本的 JSF 是一种好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:47:43.190

对的，这是可能的。EAR 中的每个 Web 模块都可以拥有自己的 JSF 版本，只要依赖项打包在每个 WAR 中即可。您还需要确保父类最后的类加载方法。

# makefile - 如何替换makefile目标中全局变量的定义？

> ID：11445889
> 
> 赞同：2
> 
> 时间：2012-07-12T06:09:17.307
> 
> 标签：makefile

```
COMMON= D_FF       
all :  
        ncverilog $(COMMON).v
test1:     
        COMMON=T_FF  
    ncverilog $(COMMON).v  
test2:  
    COMMON=JK_FF_tb  
    ncverilog $(COMMON).v   
test3:   
    COMMON=JK_FF  
    ncverilog $(COMMON).v 
```

我只想用局部变量替换全局变量，但它不起作用。就像我调用“ `make test1`”一样，它仍然`COMMON=D_FF`只是替换“”而不是“ `COMMON=T_FF`”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T06:55:13.747

您问题中的makefile的格式都混淆了。看起来你的makefile可以像这样重写：

```
COMMON = D_FF
test1 : COMMON = T_FF
test2 : COMMON = JK_FF_tb 
test3 : COMMON = JK_FF

all test1 test2 test3 :
    ncverilog $(COMMON).v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:45:40.037

`make`是一种声明性语言，并且具有几乎与您习惯的编程语言不同的范围规则。 `COMMON`与其说是“全局”，不如说是碰巧有一种（稍微例外的）方法来设置特定于目标的变量（参见 Reinier 的回答）。

# java - swing jcombobox中的意外输出getSelectedIndex方法

> ID：11445899
> 
> 赞同：0
> 
> 时间：2012-07-12T06:09:44.837
> 
> 标签：java, swing, jcombobox

我正在使用 swing 中的 jcombobox 并从 getSelectedIndex 方法获得一些意外输出。当我选择第一个 JComboBox 时，第二个组合框被启用，我使用的方法 getSelectedIndex() 显示了一些意外的输出。我的意思是它应该显示“0”，但它显示“0”，然后是“-1”，然后是一个异常，最后是“0”。我无法弄清楚异常的原因。我在这里只显示部分代码希望你们得到我...

```
 public Tester() {
            super("Utility for publish_date");
            Container contentpane = getContentPane();
            contentpane.setLayout(new BorderLayout());

            try{
            conn = new MyConn().getMyConnection();
             s = conn.createStatement();
             rs = s.executeQuery("select distinct state_name , state_code from state_master where state_code in (select statecode from pdf_detail) order by state_name");
             statelist.add(0,"Select state");
             while(rs.next())
            {
                statelist.add(rs.getString(1));
                statecodelist.add(rs.getString(2));
            }

             System.out.println("the content of statelist"+ statelist);
           System.out.println("the content of statecodelist"+statecodelist);

             list_state  = new String [statelist.size()];
            statelist.toArray(list_state);

            }catch(Exception e)
            {
                System.out.println(e);
                log(e.getMessage());
            }

            combo = new JComboBox(list_state);
            combo.setBounds(50, 50, 100, 20);
            combo.addActionListener(this);

            combo1 = new JComboBox();
            combo1.addActionListener(this);
            combo1.setEnabled(true);

            combo1.setBounds(50, 100, 100, 20);

            combo2 = new JComboBox();
            combo2.addActionListener(this);
            combo2.setEnabled(true);

            combo2.setBounds(50, 100, 100, 20);

            JPanel panel1 = new JPanel(new FlowLayout());
            panel1.add(combo);
            panel1.add(combo1);
            panel1.add(combo2);
            contentpane.add(panel1 , BorderLayout.NORTH);

          label = new JLabel();
          label.setText("Choose publish Date by selecting below.");
          final SimpleDateFormat dateformater = new SimpleDateFormat("yyyy-MM-dd");

        datepicker = new JXDatePicker();
        datepicker.setFormats(dateformater);

        datepicker.addActionListener(new ActionListener(){

                  public void actionPerformed(ActionEvent e)  {
                       //label.setText(datepicker.getDate().toString());
                     System.out.println("new date is "+dateformater.format(datepicker.getDate()));
                    publish_date =    dateformater.format(datepicker.getDate());

                  }
        });

        JPanel panel2 = new JPanel(new FlowLayout());
        panel2.add(label);
        panel2.add(datepicker);
        contentpane.add(panel2 , BorderLayout.CENTER);

            pbutton = new JButton("Submit");
            pbutton.addActionListener(this);

           JPanel panel3 = new JPanel();
           panel3.add(pbutton);
           contentpane.add(panel3 , BorderLayout.SOUTH);

            setSize(600,150);

            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void actionPerformed(ActionEvent a) 
    {
        if (a.getSource() == combo) {

            statename = (String)combo.getSelectedItem();
            System.out.println("statename======="+statename);
             q = combo.getSelectedIndex();
        System.out.println("....q....."+q);
            System.out.println(",,,,,,,,,,"+statecodelist.get(q-1));

            try{
                districtcodelist.clear();
                ResultSet rs2 =s.executeQuery("select distinct district_name , district_code from district_master where state_code= '"+statecodelist.get(q-1)+"' AND district_code in (select districtcode from pdf_detail where statecode =  '"+statecodelist.get(q-1)+"') order by district_name ");
                //districtlist.add(0, "Select district");
                while(rs2.next())
                {
                    districtlist.add(rs2.getString(1));
                    districtcodelist.add(rs2.getString(2));

                }

                 System.out.println("the content of districtlist"+ districtlist);
                 System.out.println("the content of districtcodelist"+districtcodelist);

                 list_district  = new String [districtlist.size()];
                 districtlist.toArray(list_district);
            }catch(Exception f)
            {
                 f.printStackTrace();
                 System.out.println(f);
                 log(f.getMessage());

            }
            //combo1.setEnabled(true);
            combo1.removeAllItems();
            for (int i = 0; i < list_district.length; i++) {
                     combo1.removeItem(list_district[i]);
                    combo1.addItem(list_district[i]);

            }
            districtlist.clear();
        }

        else if (a.getSource() == combo1)
        {
           // System.out.println("combo1");
            districtname = (String)combo1.getSelectedItem();
            System.out.println("districtname========"+districtname);
             w = combo1.getSelectedIndex();

             if(w == -1)
             {
                 System.out.println("hre is the prob");
                 System.out.println(combo1.getSelectedItem());
             }
            System.out.println(".....w...."+w);
            System.out.println(combo1.getSelectedItem());
            //System.out.println(",,,,,,,,,,"+districtcodelist.get(w));

            try{
                //tehsillist.add(0,"Select tehsil");

                ResultSet rs3 = s.executeQuery("select distinct tehsil_name , tehsil_code from tehsil_master where state_code= '"+statecodelist.get(q-1)+"' AND district_code='"+districtcodelist.get(w)+"' AND tehsil_code in ( select tehsilcode from pdf_detail where statecode =  '"+statecodelist.get(q-1)+"' AND districtcode = '"+districtcodelist.get(w)+"') order by tehsil_name");

                while(rs3.next())
                {
                    tehsillist.add(rs3.getString(1));
                }

                list_tehsil = new String [tehsillist.size()];
                tehsillist.toArray(list_tehsil);

            }catch(Exception g)
            {
             g.printStackTrace();
             log(g.getMessage());
            System.out.println(g);
        }
            //combo2.setEnabled(true);
            combo2.removeAllItems();
            for (int i = 0; i < list_tehsil.length; i++) {
                combo2.removeItem(list_tehsil[i]);
                combo2.addItem(list_tehsil[i]);
        }
            tehsillist.clear();
        }

        if(a.getSource() == pbutton){
             tehsilname = (String)combo2.getSelectedItem();
             e = combo2.getSelectedIndex();
             System.out.println("....e....."+e);
             System.out.println("....w....."+w);

               if((String)combo.getSelectedItem()== "Select state" || (String)combo1.getSelectedItem()== "Select district" || (String)combo2.getSelectedItem()== "Select tehsil" || publish_date == null  )
               {
                  JOptionPane.showMessageDialog(this, "Select all four items first.");
               }
               else 
               {
                 int c = JOptionPane.showConfirmDialog(this,"Do you really want to continue?","update publish date?",JOptionPane.YES_NO_OPTION);
                   if(c==0)
                   {
                   log("State is "+statename+"  \nDistrict is "+districtname+"  \nTehsil is "+tehsilname);
                  try{

              Properties pr =new Properties();
               pr.load(new FileInputStream("config/config.properties"));
              //String publish_date =  pr.getProperty("publish_date");

              ResultSet rs4 = s.executeQuery("select publish_date from pdf_detail where statecode = (select state_code from state_master where state_name = '"+statename+"') AND districtcode = (select district_code from district_master where district_name = '"+districtname+"') AND tehsilcode = (select tehsil_code from tehsil_master where tehsil_name = '"+tehsilname+"') ");

              while(rs4.next())
              {
                  testvalue = rs4.getString(1);

              }
              if(testvalue != null)
              {

                  n = JOptionPane.showConfirmDialog(this,"Publish_date is already assigned to this tehsil. Do you want to update it?","update publish date?",JOptionPane.YES_NO_OPTION);
                 System.out.println("the value of n is "+n);
              }

              if(testvalue == null ||  n == 0)
              {
                 JOptionPane.showMessageDialog(this, "Publish_date updated");  
                  s.executeUpdate("Update pdf_detail set publish_date = '"+publish_date+"'where statecode=(select state_code from state_master where state_name='"+statename+"') AND districtcode=(select district_code from district_master where district_name='"+districtname+"') AND tehsilcode=(select tehsil_code from tehsil_master where tehsil_name='"+tehsilname+"')");
                  log("publish date of "+tehsilname+" is updated from ("+testvalue+") to ("+publish_date+")");
              }
           }catch(Exception e){
               log(e.getMessage());
               System.out.println(e);}

           if(n==1)
           {
              JOptionPane.showMessageDialog(this, "Pulish_date updation canceled");
              log("publish_date process canceled as it is already done");
           }

          JOptionPane.showMessageDialog(this, "Proces completed");
          log("process completed at");
          log("------------------------------------------------------------------------");
         excelLog();

               }
                   else{
                       setVisible(false);
                     (new Publish_Date()).setVisible(true);

                   }

               }
               }    
    }

    public static void main(String args[]) {
             log("process start time");
            (new Tester()).setVisible(true);
    } 
```

}

输出：

```
....q.....1

.....w....0

....q.....1

.....w....-1

java.lang.ArrayIndexOutOfBoundsException: -1
at java.util.ArrayList.get(Unknown Source)
at com.Publish_Date.itemStateChanged(Publish_Date.java:215)
at javax.swing.JComboBox.fireItemStateChanged(Unknown Source)
at javax.swing.JComboBox.selectedItemChanged(Unknown Source)
at javax.swing.JComboBox.contentsChanged(Unknown Source)
at javax.swing.AbstractListModel.fireContentsChanged(Unknown Source)
at javax.swing.DefaultComboBoxModel.setSelectedItem(Unknown Source)
at javax.swing.DefaultComboBoxModel.removeElementAt(Unknown Source)
at javax.swing.DefaultComboBoxModel.removeElement(Unknown Source)
at javax.swing.JComboBox.removeItem(Unknown Source)
at com.Publish_Date.itemStateChanged(Publish_Date.java:190)
at javax.swing.JComboBox.fireItemStateChanged(Unknown Source)
at javax.swing.JComboBox.selectedItemChanged(Unknown Source)
at javax.swing.JComboBox.contentsChanged(Unknown Source)
at javax.swing.AbstractListModel.fireContentsChanged(Unknown Source)
at javax.swing.DefaultComboBoxModel.setSelectedItem(Unknown Source)
at javax.swing.JComboBox.setSelectedItem(Unknown Source)
at javax.swing.JComboBox.setSelectedIndex(Unknown Source)
at javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(Unknown Source)
at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at javax.swing.plaf.basic.BasicComboPopup$1.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
java.lang.ArrayIndexOutOfBoundsException: -1

.....w....0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:16:54.897

当没有选择任何项目时，JComboBox 的选定索引为 -1。如果第二个复选框中的一个项目被选中并且您更改了第一个复选框中的选择，则第二个复选框中的所有项目都将被删除`combo1.removeAllItems();`，这将导致复选框将其选择更改为 -1 并触发一个事件。

很可能您可以检测到 -1 值并忽略该事件或进行一些清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:29:04.257

试试**ActionListener**

```
JComboBox<String> jb =  new JComboBox<String>();

jb.add("Vivek"):
jb.add("Vicky");

jb.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent arg0) {

        System.out.println(jb.getSelectedIndex());
    }
}); 
```

# android - 使用默认音乐播放器播放歌曲时崩溃

> ID：11445900
> 
> 赞同：1
> 
> 时间：2012-07-12T06:09:49.887
> 
> 标签：android, audio-player, android-music-player

我想用默认的音乐播放器播放一些音频文件。如[本文](https://stackoverflow.com/questions/10867957/android-playing-a-song-file-using-default-music-player/11445075#11445075)所述，我尝试了以下代码：

```
 Intent intent = new Intent();  
    ComponentName comp = new ComponentName("com.android.music", "com.android.music.MediaPlaybackActivity");
    intent.setComponent(comp);
    intent.setAction(android.content.Intent.ACTION_VIEW);  
    File file = new File(songPath.toString());  
    intent.setDataAndType(Uri.fromFile(file), "audio/*");  
    startActivity(intent); 
```

但是，我收到了带有以下日志的 ActivityNotFound 异常：

```
07-12 11:28:49.575: E/AndroidRuntime(22700): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.jusplay/com.example.jusplay.playdb}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.android.music/com.android.music.MediaPlaybackActivity}; have you declared this activity in your AndroidManifest.xml?
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.os.Looper.loop(Looper.java:130)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.ActivityThread.main(ActivityThread.java:3701)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at java.lang.reflect.Method.invokeNative(Native Method)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at java.lang.reflect.Method.invoke(Method.java:507)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at dalvik.system.NativeStart.main(Native Method)
07-12 11:28:49.575: E/AndroidRuntime(22700): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.android.music/com.android.music.MediaPlaybackActivity}; have you declared this activity in your AndroidManifest.xml?
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.Activity.startActivityForResult(Activity.java:2827)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.Activity.startActivity(Activity.java:2933)
07-12 11:28:49.575: E/AndroidRuntime(22700):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623) 
```

我无法弄清楚为什么会发生这种崩溃！

# c# - 8 X 8 矩阵的特征向量和特征值

> ID：11445901
> 
> 赞同：0
> 
> 时间：2012-07-12T06:09:54.140
> 
> 标签：c#, matrix, pca, eigenvector, eigenvalue

我有一个 8 x 8 浮点数矩阵，需要从中计算特征向量和特征值。这是为了使用 PCA（主成分分析）减少特征，如果通过传统方法完成，这是一项非常耗时的工作。我尝试使用幂法，Y = C*X，其中 X 是我的 8 X 8 矩阵。

```
 float[,] XMatrix = new float[8, 1];
                float[,] YMatrix = new float[8, 1];
                float max = 0;
                XMatrix[0, 0] = 1;

                for (int i = 0; i < 8; i++)
                {
                    for (int j = 0; j < 1; j++)
                    {

                        for (int k = 0; k < 8; k++)
                        {
                            YMatrix[i, j] += C[i, k] * XMatrix[k, j];
                            if (YMatrix[i, j] > max)
                                max = YMatrix[i, j];
                        }

                    }
                } 
```

我知道这是不正确的，但无法弄清楚。我需要帮助来使用幂法或更有效的计算方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:20:46.770

对于任何大小（密集）的矩阵，以有效的方式（即快速！）检索特征值/特征向量并非*完全*微不足道。我建议您使用 QR 算法之类的算法（尽管对于单个 8x8 矩阵的一次性计算，这可能有点过分了）。

QR 算法计算矩阵的 Schur 分解。它无疑是特征值计算中最重要的算法之一。但是，它仅适用于密集矩阵（如上所述）。

QR 算法由两个独立的阶段组成。首先，通过相似变换，原始矩阵在有限的步数内变换为 Hessenberg 形式，或者在 Hermitian/对称情况下，变换为实三对角形式。算法的第一阶段准备了第二阶段，即应用于 Hessenberg 或三对角矩阵的实际 QR 迭代。

该算法的整体复杂度（浮点数）为 O(n3)。有关此算法的详细说明，[请参见此处](http://people.inf.ethz.ch/arbenz/ewp/Lnotes/chapter3.pdf)。或者在 Google 中搜索特征值算法应该为您提供许多计算所需特征值/向量的替代方法。

另外，我没有详细研究过这个，但是[Math.NET](http://www.mathdotnet.com/)一个免费的库可以帮助你......

# css - 更改 Bootstrap 2.0.4 响应式导航栏宽度

> ID：11445904
> 
> 赞同：0
> 
> 时间：2012-07-12T06:10:02.260
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap 2.0.4 + bootstraps responsive.css 创建一个站点。我不知道的是：是否有可能在网站的左上角出现一个标志，而导航栏出现在标志的右边（但固定在顶部）？在更改尺寸时，徽标应出现在导航栏的顶部。

能得到答案真的很高兴，因为我还没有发现任何有用的东西。

问候，多米尼克

编辑：这是描述我想要实现的目标的图片：http: [//i.imgur.com/HX3ZM.png](http://i.imgur.com/HX3ZM.png)

左侧的徽标，然后是导航栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:36:23.100

好的，我明白了。我使用了固定的导航栏，但没有按预期工作。您必须使用静态导航栏。然后你可以只使用引导程序中的行/脚手架系统。

导航栏左侧徽标的示例代码：

```
 <div class="row-fluid">
    <div class="span3">
      <p><img src="/sites/img/your_logo.png" alt="Logo" class="responsive-logo"></p>
    </div>
    <div class="span9">
      <div class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <div class="btn-group pull-right">
              <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="icon-user"></i> Username
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a href="#">Profile</a></li>
                <li class="divider"></li>
                <li><a href="#">Sign Out</a></li>
              </ul>
            </div>
            <div class="nav-collapse">
              <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div><!-- end navbar -->
    </div><!-- end span8 -->
  </div><!-- end row --> 
```

为了让我的 Logo 具有响应性，我添加了以下 CSS 规则：

```
 .responsive-logo {
max-width: 100%;
height: auto;
border: 0;
padding-top: 10px; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:18:20.770

是的，当然——您需要重新构建文档以在导航栏上方放置（例如）一个带有 span4 类的 div。

在此之下，有导航栏代码并删除品牌元素（通常包含您的徽标）。我的假设让我相信你想要这样的东西：

![重新设计](../Images/86930e5eb4471734f5c4ba7f167453c3.png)

如果您可以更具体地了解您想要什么，和/或提供您网站的相关部分 (HTML)，我可能会给出更多指导。

# mongodb - /data/db 中的数据文件大于 MongoDB 中插入的数据集

> ID：11445906
> 
> 赞同：0
> 
> 时间：2012-07-12T06:10:08.290
> 
> 标签：mongodb, mongodb-.net-driver

我想知道对于给定的数据集，/data/db 中的 MongoDB 数据文件大于插入到数据库中的数据集。为什么在 mongoDB 中会发生这种情况？有人可以澄清我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:30:13.403

MongoDB[预先分配了磁盘空间](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space#ExcessiveDiskSpace-DatafilePreallocation)，因此磁盘上的实际存储量总是大于数据集。

> 每个数据文件都预先分配给特定的大小。（这样做是为了防止文件系统碎片，以及其他原因。）数据库的第一个文件名是 .0，然后是 .1，等等。.0 将是 64MB，.1 128MB 等等，最多 2GB。一旦文件大小达到 2GB，每个连续的文件也是 2GB。

# html - Html 5 + css3 两个带有三个选择器的侧边栏：角色与类？

> ID：11445907
> 
> 赞同：0
> 
> 时间：2012-07-12T06:10:21.277
> 
> 标签：html, css, selector, sidebar, role

我决定完全摆脱 CSS 中的所有 id，除此之外，我还想开始过渡到 HTML 5。

旧标记，其中 .sidebar 是两个侧边栏的选择器，ID 用于单独设置侧边栏的样式

```
<div id="sidebar" class="sidebar widget-area"></div>
<div id="sidebar-alt" class="sidebar widget-area"></div> 
```

现在这就是我在***html 4 中要做的事情，我并不认为 ID 在 HTML5 中已经过时，请不要支持这个评论，我会在 html 4 中做同样的事情***

```
<div class="sidebar sidebar-primary widget-area"></div>
<div class="sidebar sidebar-secondary widget-area"></div> 
```

**我现在的问题是关于角色属性。这基本上是一个虚构的价值吗？它在未来是否或可能有一些真正的意义？**

**解决方案 1** .sidebar 保留两个侧边栏的选择器，我将使用 side[role="..."] 单独设置侧边栏的样式

```
<aside role="sidebar-primary" class="sidebar widget-area"></aside>
<aside role="sidebar-secondary" class="sidebar widget-area"></aside> 
```

**解决方案 2** 还是我应该更好地给两个侧​​边栏赋予相同的角色，并使用角色选择器来获得常见的样式？

```
<aside role="sidebar" class="sidebar-primary widget-area"></aside>
<aside role="sidebar" class="sidebar-secondary widget-area"></aside> 
```

我还没有那么喜欢 HTML 5，如果可能的话，我想获得一些意见，如果可能的话，通过深入的解释可能会更好。

在查看`WTC`角色列表后，似乎没有定义“侧边栏”角色，并且在这之后，两种解决方案（1+2）都可能不好

**解决方案 3** “互补”角色被 W3C 定义为一个角色，所以这可能是更好的方法吗？我仍然很好奇为什么人们会想出 role="sidebar" 以及仅仅“发明”角色有什么意义？如果`CSS`他们应该使用类来设置样式？

```
<aside role="complementary" class="sidebar-primary widget-area"></aside>
<aside role="complementary" class="sidebar-secondary widget-area"></aside> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:48:44.600

`role`不是编的

*   这是一个关于角色如何工作的非常[简单的指南](http://www.webteacher.ws/2010/10/14/aria-roles-101/)

*   你可以[设计它们](http://davidejones.com/blog/577-aria-roles-targeting-css/)

*   看一下一般的[微格式](http://html5doctor.com/microformats/)

*   阅读安迪·克拉克 (andy clarke) 的[硬汉网页设计](http://hardboiledwebdesign.com/)

*   [WAI-ARIA](http://www.w3.org/TR/wai-aria/)技术文件

# sql - 开始日期和结束日期的 SQL 查询混淆

> ID：11445910
> 
> 赞同：4
> 
> 时间：2012-07-12T06:10:29.370
> 
> 标签：sql, sql-server, select, select-query

我有一个像这样的表（例如*tableA*）：

```
| 姓名 | 开始日期 | 结束日期 |
|----------------------------------|
| 一个 | 2012-07-01 | 2013-06-30 |
| 乙 | 2011-05-01 | 2012-04-30 |
| c | 2010-01-01 | 2013-12-31 |
| d | 2013-01-01 | 2014-12-31 |
| 电子| 2011-07-01 | 2012-06-30 |

```

我想从表中获取一个在和之间活跃的*名字*。从上表结果应该是***a,c 和 e***。`2012-05-01``2012-10-31`

 *我所做的如下：

```
SELECT Name FROM tableA WHERE startdate<='2012-05-01' AND enddate>='2012-10-31' 
```

但我没有得到正确的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:19:50.787

```
declare @T table
(
  Name char(1),
  Startdate datetime,
  Enddate datetime
)

insert into @T values
('a',     '20120701',  '20130630'), 
('b',     '20110501',  '20120430'), 
('c',     '20100101',  '20131231'), 
('d',     '20130101',  '20141231'), 
('e',     '20110701',  '20120630')

declare @StartDate datetime = '20120501'
declare @EndDate datetime = '20121031'

select Name
from @T 
where Startdate < @EndDate and
      Enddate > @StartDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:12:18.040

如果您想查找在此期间发生的任何结果，请使用[BETWEEN](http://msdn.microsoft.com/en-us/library/ms187922.aspx)：

```
SELECT Name FROM tableA WHERE startdate BETWEEN '2012-05-01' and '2012-10-31' 
```

> 如果 test_expression 的值大于或等于 begin_expression 的值且小于或等于 end_expression 的值，则 BETWEEN 返回 TRUE。
> 
> 如果 test_expression 的值小于 begin_expression 的值或大于 end_expression 的值，NOT BETWEEN 返回 TRUE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:14:22.453

比较运算符的放置正在创建问题检查此

```
SELECT Name FROM tableA WHERE startdate>='2012-05-01' AND enddate<='2012-10-31' 
```*

# google-chrome - 有没有办法通过自定义 chrome 扩展启用或禁用 chrome 标志？

> ID：11445917
> 
> 赞同：5
> 
> 时间：2012-07-12T06:11:32.680
> 
> 标签：google-chrome, google-chrome-extension

我指的是`chrome://flags`

我很想知道是否可以通过自定义 chrome 扩展启用或禁用特定的 chrome 标志？

例如-我想`Enable Media Source API on <video> elements.`通过 chrome 扩展启用标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T22:42:14.470

您目前无法通过扩展更改实验性功能 (chrome://flags)。如果您有一个有效的方案，请将其提交到[Chromium-Extensions](https://groups.google.com/a/chromium.org/forum/#!forum/chromium-extensions)邮件列表。

# blackberry-simulator - 由于 net_rim_bb_gas.debug 文件丢失，调试器未附加到黑莓应用程序

> ID：11445921
> 
> 赞同：1
> 
> 时间：2012-07-12T06:12:07.003
> 
> 标签：blackberry-simulator

大家好，我遇到了一个奇怪的问题，由于缺少 net_rim_bb_gas.debug 文件，我无法在 Eclipse 中调试我的黑莓应用程序。我需要你的帮助....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T16:38:35.443

您可以放心地忽略此消息，否则连接将超时。如果您想使用需要调试文件的高级调试功能，我建议您升级到最新版本的 BlackBerry Java SDK Eclipse Plug-in，它会为您下载调试文件。

# file - 在 groovy 中列出 FTP 服务器目录中的文件

> ID：11445922
> 
> 赞同：1
> 
> 时间：2012-07-12T06:12:16.113
> 
> 标签：file, groovy

我想列出公共 FTP 服务器上的目录下的所有文件。

我尝试了以下

```
new File("ftp://ftp.ex.yyy/a").eachFile() { file->  
  println file.getName() 
```

但我得到一个错误

```
URI
  /sample/getStatus/index
Class
  java.io.FileNotFoundException
Message
  /Users/aaaaa/Documents/yyyyy/sample/ftp://ftp.ex.yyy/a 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:16:16.577

您不能将 FTP 站点视为本地文件。这就是为什么你得到那个例外。您的代码正在查看您的本地文件系统。经过一番谷歌搜索后，我为您找到了一个代码片段。如果没有至少一个第三方库，我*认为您将无法轻松做到这一点。*

[https://gist.github.com/1135043](https://gist.github.com/1135043)

# nhibernate - 使用 NHibernate 自定义方言选择顶部到 OpenEdge 数据库不起作用

> ID：11445933
> 
> 赞同：1
> 
> 时间：2012-07-12T06:13:15.237
> 
> 标签：nhibernate, openedge, dialect

我制作了一个自定义方言，以便能够通过 ODBC 将 NHibernate 与 Progress/OpenEdge 数据库一起使用。在大多数情况下，方言可以正常工作，但我对 SELECT TOP 语句有疑问。问题是语句生成如下，列的数量作为参数返回：

```
SELECT TOP ? SomeColumn
FROM SomeTable
where SomeColumn = ?; p0 = 100, p1 = 'test' 
```

Progress/Openedge 数据库不支持这一点，所以我想对方言进行一些更改，强制语句不使用 SELECT TOP 中列数量的参数 - 如下所示：

```
SELECT TOP 100 SomeColumn
FROM SomeTable
where SomeColumn = ?; p0 = 'test' 
```

这可能吗？

顺便说一句，我正在使用 NHibernate v. 3.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:00:38.910

通过查看[NHibernate 的源代码](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/Dialect.cs)，我会说您需要重写`SupportsVariableLimit`属性才能返回`false`。

```
/// <summary>
/// Can parameters be used for a statement containing a LIMIT?
/// </summary>
public override bool SupportsVariableLimit
{
    get { return false; }
} 
```

* * *

**编辑**

不幸的是， NHibernate Linq[似乎](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Linq/Visitors/ResultOperatorProcessors/ProcessTake.cs)不使用`SupportsVariableLimit`属性。它总是尝试使用参数。

这是对此[的讨论](https://groups.google.com/forum/?fromgroups#!topic/nhibernate-development/TZVi8ce_Vfo)，并带有源代码修复。

# objective-c - NSSearchfield 的背景颜色不起作用

> ID：11445936
> 
> 赞同：1
> 
> 时间：2012-07-12T06:13:31.960
> 
> 标签：objective-c, nssearchfield

我有一个 NSSearchField，我想改变它的背景颜色，但我做不到我尝试了几件事：

1）我尝试设置 DrawBackground TRUE 然后 setBackgroundColor 但 DrawBackGround 的值总是 False 我尝试通过代码或 Nib 设置它。（我不知道为什么？）

2）我尝试设置 NSText 的 BackgroundColor 但它看起来不太好，因为它没有覆盖整个 NSSearchField 存在小搜索图标和取消图标的极端角落没有着色。

3）我希望 searchField 具有它所在视图的颜色，所以我降低了 searchField 的 alpha 值，看起来不错，但文本的 alpha 值也降低了，所以有什么方法可以使文本的 alpha 值始终保持不变1.

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-27T19:37:17.523

如果您查看文档，Apple 会阻止圆角矩形字段的背景颜色渲染：

“为了防止渲染不一致，圆形边框文本字段的背景颜色渲染被禁用。”

[https://developer.apple.com/library/prerelease/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextField_Class/#//apple_ref/occ/instm/NSTextField/setDrawsBackground](https://developer.apple.com/library/prerelease/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextField_Class/#//apple_ref/occ/instm/NSTextField/setDrawsBackground)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:16:37.777

NSSearchField 是 NSTextField 的扩展，NSTextField 又是 NSView 的扩展，

不确定，但可以制作自定义类并覆盖 drawRect 函数并使用背景颜色进行绘制。

# android - 如何在eclipse中检索项目

> ID：11445937
> 
> 赞同：0
> 
> 时间：2012-07-12T06:13:35.067
> 
> 标签：android, eclipse, projects

现在我正在使用 android/eclipse。由于电源中断四次，我失去了我到目前为止所做的整个项目。如何将我的项目检索到 eclipse 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:18:20.827

转到文件-> 导入-> 现有项目到工作区。选择项目的根目录。完成 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:24:24.243

您必须在您的 pc 驱动器之一中拥有 src/backup。再次从 eclipse 工作区中的特定位置导入它们。

# c# - 我在我的 datagridview 中添加复选框列时遇到了一些问题

> ID：11445943
> 
> 赞同：0
> 
> 时间：2012-07-12T06:14:04.123
> 
> 标签：c#, datagridview, datagridviewcheckboxcell

我的页面上有一个datagridview，它的数据源根据从2个组合框中的一对值检索到的记录不断变化，我需要向我的数据网格添加一个复选框列，它与我的数据库表中的任何列都没有数据绑定，我正在使用此代码

```
public void RefreshDataGrid(string query)
        {
            Buisness_logic bl = new Buisness_logic();
            dataGridView1.DataSource = bl.GetDataTable(query);
            SetUpDataGridView();
            dataGridView1.ClearSelection();
        }

        public void SetUpDataGridView()
        {

            DataGridViewCellStyle style = dataGridView1.ColumnHeadersDefaultCellStyle;
            style.BackColor = Color.White;
            style.ForeColor = Color.Black;
            dataGridView1.EditMode = DataGridViewEditMode.EditProgrammatically;
            dataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.None;
            dataGridView1.RowHeadersVisible = false;
            dataGridView1.Columns[0].HeaderText = "Sr.No";
            dataGridView1.Columns[0].Width = 50;
            dataGridView1.Columns[1].HeaderText = "Rate";
            dataGridView1.Columns[1].Width = 70;
            dataGridView1.Columns[2].HeaderText = "Amount";
            dataGridView1.Columns[2].Width = 100;
            dataGridView1.Columns[3].HeaderText = "Mode";
            dataGridView1.Columns[3].Width = 60;
            dataGridView1.Columns[4].HeaderText = "Support";
            dataGridView1.Columns[4].Width = 80;
            dataGridView1.Columns[5].HeaderText = "Team1";
            dataGridView1.Columns[5].Width = 100;
            dataGridView1.Columns[6].HeaderText = "Team2";
            dataGridView1.Columns[6].Width = 100;
            dataGridView1.Columns[7].HeaderText = "Team3";
            dataGridView1.Columns[7].Width = 100;
                DataGridViewCheckBoxColumn column3 = new DataGridViewCheckBoxColumn();
                column3.Name = "Column3";
                column3.HeaderText = "IsCheck";
                column3.ReadOnly = false;
                dataGridView1.Columns.Add(column3);
        } 
```

第一次加载 tge 表单时它的 datagridview 很好，但是当我更改组合框的值并且数据源更改时，列会变得混乱，并且没有。添加了复选框列，这破坏了我的表单，

这是我用来从表中检索记录的代码

```
Combo_pair pr1 = combo_match_code.SelectedItem as Combo_pair;
                int match_code_f1 = Convert.ToInt32(pr1.Text);
                Combo_pair pair = combo_name.SelectedItem as Combo_pair;
                int userid_f1 = Convert.ToInt32(pair.Value);
                string query = "Select int_sr_no,double_rate,double_amount,txt_mode,txt_support,double_team1,double_team2,double_team3 from match_transaction where int_match_code='" + match_code_f1 + "' AND int_user_id='" + userid_f1 + "' AND is_deleted=0";
                RefreshDataGrid(query); 
```

这是第一次加载表单时的图像

![在此处输入图像描述](../Images/695f8af27c694bf0faf3f1bd3b4f45ad.png)

这是我几次更改组合框值后的图像

![在此处输入图像描述](../Images/80f79b4ee00ac359b7e4b1f704b462a1.png)

*（对不起，图像有问题）我真的需要一些帮助，thanxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:24:48.147

您只需要设置一次gridview。

这样做的好地方是 after `InitializeComponent()`。

由于这是一个固定列，您也可以通过设计器添加它（编辑列）。这样代码就会被添加到`InitializeComponent()`.

`InitializeComponent()`通常在表单的构造函数中调用。

目前您正在添加此行

```
dataGridView1.Columns.Add(column3); 
```

将导致复选框列被添加多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:35:23.753

在回答之前，我将逐步重申问题（希望我的解决方案更有意义）：

*   您有一个数据绑定 DataGridView ，您想在其中更改列的详细信息
*   当您想要刷新网格中的数据（您的搜索条件发生变化）时，您对列的更改将被覆盖
*   要解决此问题，您需要更新日期网格数据源并重新进行所有更改
*   这具有您添加的未绑定复选框列被多次添加的副作用

所以简而言之，问题是**如何在只有一列的同时保留对列的更改**？

这里的诀窍是 DataGridView 的 AutoGenerateColumns 属性。

为了争论，假设您首先在表单加载期间设置网格 - 如果没有，那么如果您以前设置过网格，则可能需要一个布尔字段来存储。

```
public Form1()
{
    InitializeComponent();

    // So this is the first time we call your refresh grid with some default string query
    RefreshDataGrid(query);

    // Now one time only we call SetUpDataGridView()
    SetUpDataGridView();

    // Now once we have done that we set AutoGenerateColumns to false
    dataGridView1.AutoGenerateColumns = false;

}

public void RefreshDataGrid(string query)
{
    Buisness_logic bl = new Buisness_logic();
    dataGridView1.DataSource = bl.GetDataTable(query);
    // We no longer need to call SetUpDataGridView()
    // SetUpDataGridView();
    dataGridView1.ClearSelection();
} 
```

您的 SetUpDataGridView() 方法几乎相同：

```
public void SetUpDataGridView()
{

    DataGridViewCellStyle style = dataGridView1.ColumnHeadersDefaultCellStyle;
    style.BackColor = Color.White;
    style.ForeColor = Color.Black;
    dataGridView1.EditMode = DataGridViewEditMode.EditProgrammatically;
    dataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.None;
    dataGridView1.RowHeadersVisible = false;
    dataGridView1.Columns[0].HeaderText = "Sr.No";
    dataGridView1.Columns[0].Width = 50;

    // And so on for all the columns...

    dataGridView1.Columns[7].Width = 100;
    DataGridViewCheckBoxColumn column3 = new DataGridViewCheckBoxColumn();
    column3.Name = "Column3";
    column3.HeaderText = "IsCheck";
    column3.ReadOnly = false;
    dataGridView1.Columns.Add(column3);
} 
```

因此，现在当包含查询信息的组合框发生更改时，您可以调用 RefreshDataGrid() 但它只会更新数据，不会更改您的自定义设置。

* * *

RefreshDataGrid() 方法的一个建议是添加如下一行：

```
public void RefreshDataGrid(string query)
{
    Buisness_logic bl = new Buisness_logic();
    // This is the new line
    dataGridView1.DataSource = typeof(List<>);
    dataGridView1.DataSource = bl.GetDataTable(query);
    // We no longer need to call SetUpDataGridView()
    // SetUpDataGridView();
    dataGridView1.ClearSelection();
} 
```

这可以减少列宽变化时的闪烁，并且通常也需要更改 DataSource 显示。

# c++ - 如何确定特定键在多图中是否唯一？

> ID：11445944
> 
> 赞同：6
> 
> 时间：2012-07-12T06:14:09.677
> 
> 标签：c++

我有一个`multimap<key_type,value_type>`，我想知道一个特定的键是否最多出现在地图中一次。

我知道我可以调用`multimap.equal_range(key)`以查找包含范围的开头和结尾的迭代器，`key`但我想知道`range.first`and之间是否只有一个元素`range.second`。

有没有比增加`range.first`值来查看它是否等于更好的方法`range.end`？由于`multimap::iterator`是双向的，因此撤消增量并不是什么大问题，但这样做似乎很草率。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T06:16:59.183

你能检查一下[std::multimap::count(key)](http://en.cppreference.com/w/cpp/container/multimap/count) == 1 吗？

# python - 汇编 mpeg 文件无法在媒体播放器中播放

> ID：11445947
> 
> 赞同：1
> 
> 时间：2012-07-12T06:14:16.283
> 
> 标签：python, video, mpeg

我目前正在做一个学校项目，我似乎遇到了 MPEG 文件的一些问题。我的项目范围是：

1) 将 MPEG 文件分割成许多固定大小的块。

2）在省略某些块的同时组装其中一些。

* * *

**问题1：**

当我在媒体播放器中播放文件时，它会播放视频，直到它到达我省略的块。

例子：

```
chunk = ["yui_1", "yui_2", "yui_3", "yui_5", "yui_6"]
Duration of each chunk: 1 second 
```

*如果您意识到我省略了“yui_4”块。*

如果我要组装除“yui_4”之外的所有块，则视频将先播放 2 秒，然后在整个持续时间内挂起。

* * *

**问题2：**

当我在省略第一个块的同时组装块时，它会使整个 mpeg 文件无法播放。

例子：

```
chunk = ["yui_2", "yui_3", "yui_4", "yui_5", "yui_6"]
Duration of each chunk: 1 second 
```

* * *

## 以下是我的部分代码（硬代码）：

```
def splitFile(inputFile,chunkSize):

    splittext = string.split(filename, ".")
    name = splittext[0]
    extension = splittext[1]

    os.chdir("./" + media_dir)

    #read the contents of the file
    f = open(inputFile, 'rb')
    data = f.read() # read the entire content of the file
    f.close()

    # get the length of data, ie size of the input file in bytes
    bytes = len(data)

    #calculate the number of chunks to be created
    noOfChunks= bytes/chunkSize
    if(bytes%chunkSize):
            noOfChunks+=1

    #create a info.txt file for writing metadata
    f = open('info.txt', 'w')
    f.write(inputFile+','+'chunk,'+str(noOfChunks)+','+str(chunkSize))
    f.close()

    chunkNames = []
    count = 1
    for i in range(0, bytes+1, chunkSize):
            fn1 = name + "_%s" % count
            chunkNames.append(fn1)
            f = open(fn1, 'wb')
            f.write(data[i:i+ chunkSize])
            count += 1
            f.close() 
```

* * *

## 以下是我如何组装块的一部分：

```
def assemble():

    data = ["yui_1", "yui_2", "yui_3", "yui_4", "yui_5", "yui_6", "yui_7"]
    output = open("output.mpeg", "wb")
    for item in datafile:
            data = open(item, "rb"). read()
            output.write(data)
    output.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:42:40.147

MPEG 视频文件包含“编码视频数据”，这意味着它是经过压缩的。最重要的是，将视频切割成可以单独附加或播放的块并非易事。除非您仔细阅读 MPEG2 传输流规范并了解在哪里可以找到可以剪切和“拼接”的点并且仍然输出兼容的 MPEG 流，否则您的这两个问题都不会得到解决。我的猜测是，这不是您想要为学校项目做的事情。

也许您应该尝试阅读如何使用 FFMPEG ( [http://www.ffmpeg.org/](http://www.ffmpeg.org/) ) 剪切和附加视频文件。

祝你的项目好运。

# c - 当键不是字符串类型时替代 g_variant_lookup_value

> ID：11445952
> 
> 赞同：0
> 
> 时间：2012-07-12T06:14:24.443
> 
> 标签：c, glib

当键不是字符串类型（即键是整数）时，是否有 g_variant_lookup_value 的替代方法？

我有一个函数，它需要一个像 GVariant * 这样的“a{ias}”字典。我想获取与一个键（这是一个 int 值）相关的字符串数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:30:32.237

我不知道 glib 中已经内置了任何内容（尽管我对 GVariant API 不是很熟悉），但是查看[g_variant_lookup_value 实现](http://git.gnome.org/browse/glib/tree/glib/gvariant.c?id=f66052fc87caada2552f651e9a21f1daac86b2a1#n1030)，在您的代码中创建一个行为类似的修改版本将是微不足道的。

# java - 我可以通过 html 页面向 thesuarus.com 发送搜索查询吗？

> ID：11445963
> 
> 赞同：0
> 
> 时间：2012-07-12T06:15:10.447
> 
> 标签：java, html

我制作了一个 html 页面，其中有一个文本字段和一个提交按钮，用户在文本字段中输入一个单词并单击提交。有一个通过 request.getParameter() 获取用户输入的 servlet。现在我想将此输入词发送到 thesaurus.com 并检索该词的同义词并将此同义词作为响应发送回用户我想将此功能包含在上述 servlet 本身中......请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:36:07.380

您可以使用 java.net api 或使用 apache HTTP 客户端。使用 java.net api 只需创建 url 对象并打开连接并使用 write 方法发送参数并获取响应。

要检查发送的参数，您可以使用 mozila 的 http live header 插件

# drupal - Drupal 7过滤字段当前用户

> ID：11445967
> 
> 赞同：1
> 
> 时间：2012-07-12T06:15:23.440
> 
> 标签：drupal, drupal-7, drupal-views

我在 Drupal 7 中创建了一个自定义事件内容类型，其中包含教师和学生的用户字段。我想创建一个视图，其中内容仅针对该内容中的教师或学生用户显示 - 自定义日历。

到目前为止，我已经尝试使用*user:uid*和*user在***Content: Teacher (field_teacher)**上创建一个过滤器。我知道这是一个语法问题，但我需要该值为*currentLoggedinUser*

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:11:16.090

要获取当前登录的用户 uid，请遵循此代码段。

```
global $user;
$uid = $user->uid; 
```

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:50:19.283

首先尝试将关系添加到字段**内容：教师 (field_teacher)**，然后再次检查过滤器选项以查看您需要的选项现在是否可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:01:23.413

为什么不创建两个不同的显示并使用**访问**视图选项根据用户的角色进行过滤？

把这个建议放在一边：你不应该使用两个字段来区分你的内容类型的老师和学生。使用单个字段选择列表。例如，学生的值为 0，教师的值为 1。

然后将该字段添加为**Contextual Filter**，选择**提供默认值**并使用**PHP 代码**作为类型。使用以下代码来确定用户的角色并返回适当的值：

```
global $user;

if(in_array('student', array_values($user->roles))) {
  return 0;
} else {
  return 1;
} 
```

不过，我会推荐我的第一个建议，并使用基于角色的访问权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T01:15:56.290

这实际上是一个非常简单的解决方案——我在两个实体引用（学生和教师）上创建了上下文过滤器，然后在“如果没有提供默认值”部分，我添加了“使用当前登录的用户”。

然后我不得不编写一个带有 hook_query_alter 的自定义模块来将上下文过滤器的 AND 更改为 OR***

# jquery - 访问 Jquery 中的隐藏字段值

> ID：11445970
> 
> 赞同：0
> 
> 时间：2012-07-12T06:15:45.937
> 
> 标签：jquery

我的表格如下所示

```
<form class="search_results_section" method="post" name="MainForm" id="MainForm" action="/searchresults.asp" onsubmit="return OnSubmitSearchForm(event, this);">
            <input type="hidden" name="Search" value="">
            <input type="hidden" name="Cat" value="1856">
</form> 
```

**我想在变量中获取隐藏字段的“猫”值**

我尝试使用以下但不确定为什么它不起作用

```
 var elements =$('#jmenuhide input[name^="Cat"]').val();
      alert(elements);
  var ele=document.MainForm.getElementsByName('Cat').value;
      alert(ele); 
```

警报显示“未定义”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:17:54.703

```
var elements =$('input[name="Cat"]').val();
      alert(elements);
var ele=document.getElementsByName('Cat')[0].value;
      alert(ele); 
```

这是工作小提琴：http: [//jsfiddle.net/gopi1410/NbCNu/](http://jsfiddle.net/gopi1410/NbCNu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:18:06.527

只是尝试使用它不知道为什么你需要这个#jmenuhide

```
var elements =$('input[name^="Cat"]').val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T06:20:29.553

您可以通过名称获取表单中的元素，也可以`#jmenuhide`使用您尝试使用`#MainForm`的元素

```
var elements =$('#MainForm input[name="Cat"]').val();
  alert(elements);
var ele=document.MainForm.Cat.value;
  alert(ele);​ 
```

[http://jsfiddle.net/N82s5/](http://jsfiddle.net/N82s5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T06:22:16.817

对于该标记，您只需要：

```
var cat = $('input[name="Cat"]').val();
var search = $('input[name="Search"]').val();

alert(cat); // 1856
alert(search); // (empty string)
​ 
```

# python - 用python中的命令行/shell版本替换加载文件到列表

> ID：11445971
> 
> 赞同：2
> 
> 时间：2012-07-12T06:15:47.300
> 
> 标签：python

嗨有没有办法像这样加载文件，但是从命令行

所以我可以输入 python test.py data.txt

代替

```
data = [line.strip() for line in open("/home/user/data.txt",  "rb").readlines()] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:17:29.237

```
import sys
data = [line.strip() for line in open(sys.argv[1],  "rb")] 
```

顺便说一句，不需要`.readlines()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:22:11.243

要从命令行向脚本传递参数，您需要使用[sys.argv](http://docs.python.org/library/sys.html#sys.argv)或[fileinput](http://docs.python.org/library/fileinput.html#module-fileinput)。

> 系统.argv
> 
> 传递给 Python 脚本的命令行参数列表。argv[0] 是脚本名称（它是否为完整路径名取决于操作系统）。如果命令是使用解释器的 -c 命令行选项执行的，则 argv[0] 设置为字符串“-c”。如果没有将脚本名称传递给 Python 解释器，则 argv[0] 是空字符串。

**文件输入：**

```
import fileinput
for line in fileinput.input():
    process(line) 
```

> 这会遍历 sys.argv[1:] 中列出的所有文件的行，如果列表为空，则默认为 sys.stdin。如果文件名是“-”，它也被 sys.stdin 替换。要指定文件名的替代列表，请将其作为第一个参数传递给 input()。也允许使用单个文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T06:19:00.837

看看[argparse](http://docs.python.org/library/argparse.html)模块。它相当容易使用，甚至允许您直接从命令行参数提供和打开文件。

# python - Django @staticmethod 两个字段的总和

> ID：11445972
> 
> 赞同：6
> 
> 时间：2012-07-12T06:15:48.587
> 
> 标签：python, django

我有一个快速的问题。我正在尝试向模型中添加一个字段，该字段是 2 个字段的总和。

例如：

```
class MyModel(models.Model)
      fee = models.DecimalField()
      fee_gst = models.DecimalField() 
```

我想我可以在模型中添加一个@staticmethod：

```
@staticmethod
def fee_total(self):
     return self.fee + self.fee_gst 
```

但我似乎无法使用以下方法访问模型的“fee_total”字段：

```
model = MyModel.objects.get(pk=1)
total = model.fee_total 
```

任何想法我做错了什么？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T06:36:47.127

我想你想为你的模型添加一个方法，所以这个[https://docs.djangoproject.com/en/dev/topics/db/models/#model-methods](https://docs.djangoproject.com/en/dev/topics/db/models/#model-methods)可能会对你有所帮助。

`@staticmethod`是一个向 声明方法的装饰器`class`，那么有什么区别呢？

长话短说，静态方法没有任何特定对象的实例，只是对象的实例，我所说的`class`对象是什么意思`class`，python 中的大多数东西，如函数、类，当然对象的实例实际上是对象.. .

就像每个人之前提到`@property`的一样，装饰器可以让方法充当变量......所以你不必显式使用`()`

不管怎样，你会想要这样做：

```
class MyModel(models.Model)
    fee = models.DecimalField()
    fee_gst = models.DecimalField()

    @property        
    def fee_total(self):
        return self.fee + self.fee_gst 
```

尽管文档采取了更长的方法：

```
class MyModel(models.Model)
    fee = models.DecimalField()
    fee_gst = models.DecimalField()

    def _fee_total(self):
        return self.fee + self.fee_gst
    fee_total = property(_fee_total) 
```

尽管我们使用装饰器作为简写，但这两种方法几乎是等价的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:23:33.083

从您与模型实例交互的方式来看，我相信您实际上想要使用[@property](http://docs.python.org/library/functions.html#property)装饰器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:26:41.090

您需要通过将实例作为参数传递来调用它，如下所示。

```
 total = model.fee_total(model) 
```

静态方法不`self`作为实例参数隐式传递。

但是，正如 'Filip Dupanović' 建议的那样，您可能想要使用 @property 而不是 @staticmethod

# fabric - --user=root 似乎没有覆盖结构 env.user，怎么会？

> ID：11445980
> 
> 赞同：3
> 
> 时间：2012-07-12T06:16:27.637
> 
> 标签：fabric

我有一个fabfile：

```
env.user = 'deploy'

def infra():
    """You need to use a user that can root itself, deploy cannot without a
    password."""
    put('conf.d/etc/nginx/sites-available/www.foo.hk',
         '/etc/nginx/sites-available/www.foo.hk', use_sudo=True)
     sudo('nginx -s reload',) 
```

我喜欢跑`fab infra -Rservers`。

`--user=root or -u root`所以我想我可以在运行时覆盖用户，`fab infra --user=root`但它仍然要求我输入密码。但是，如果我改变`env.user`它`env.user = 'root'`不会。我还可以使用设置上下文管理器，例如：

```
def infra(user):
    """You need to use a user that can root itself, deploy cannot without a
    password."""
    with settings(user=user):
        put('conf.d/etc/nginx/sites-available/www.foo.hk',
             '/etc/nginx/sites-available/www.foo.hk', use_sudo=True)
        sudo('nginx -s reload',) 
```

当我这样做时，它会起作用`fab infra:root -Rservers`。很明显，可以覆盖设置，但似乎我不能从正常的命令行标志。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:49:18.443

It's not currently possible to override the default setting from the command line in the way I would want. There's a ticket for it though [https://github.com/fabric/fabric/issues/680](https://github.com/fabric/fabric/issues/680) and it seem like it will be fixed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:03:20.300

你有[一张为此打开的票](https://github.com/fabric/fabric/issues/680)，我也展示了那里的例子，更像你在这里展示的。我的猜测是你不能事先在文件中设置 env.user ，因为这是一个明确的硬编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T19:51:03.050

我想你正在寻找：

```
fab infra:hosts=root@somehost 
```

It's unclear to me whether the same `username@...` pattern works with roles or roledefs.

[http://docs.fabfile.org/en/1.2.0/usage/execution.html](http://docs.fabfile.org/en/1.2.0/usage/execution.html)

# html - CSS：在中间垂直设置

> ID：11445981
> 
> 赞同：4
> 
> 时间：2012-07-12T06:16:29.253
> 
> 标签：html, css

考虑以下：

```
<div class="wrap">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

左 div 的高度小于右 div。我可以将左 div 垂直设置在右 div 的中间吗？我无法设置边距顶部，因为高度不同。

![在此处输入图像描述](../Images/44314e2684bb5fc3837f16b91cf41ec3.png)

这是 jsfiddle 链接：http: [//jsfiddle.net/k8972/](http://jsfiddle.net/k8972/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T06:23:32.920

嗨，现在习惯了`display inline-block`，给予`vertical-align` 和删除`float`

像这样

```
.wrap{
    overflow:hidden;
    border:1px solid red;
    width:250px;
    display:table;
}

.left{
    width:100px;
    height:50px;
    background:yellow;
    display:inline-block;
    vertical-align:middle;
}

.right{
    width:100px;
    height:100px;
    background:brown;
    display:inline-block;
    vertical-align:middle;
} 
```

现场演示[http://jsfiddle.net/k8972/2/](http://jsfiddle.net/k8972/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:19:36.247

您可以使用 display: table-cell 和 vertical-align: middle; 但它不适用于 IE7 或更低版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:22:54.543

这里提到的几种方法

[http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

# java - 比较两个对象列表并返回一个包含两个共同对象的列表

> ID：11445983
> 
> 赞同：-1
> 
> 时间：2012-07-12T06:16:32.987
> 
> 标签：java

我有两个清单 -

```
ArrayList<MyObject> list1 -> [obj1, obj2, obj3, obj4, obj5, obj6]

ArrayList<MyObject>  list2 -> [obj1, obj6, obj7, obj8] 
```

java api中是否已经存在任何实用方法，可以只列出两个常见记录？

预期列表-> `[obj1, obj6]`

MyObject 看起来像这样 -

```
class MyObject {
  public Integer number;
  public String name;
  public Integer parent;
  public String parentName;
} 
```

我只需要使用`number`and`name`进行比较。

* * *

我知道使用`retainAll`或`removeAll`获取所需列表的方法。然而问题是，**我不能覆盖`equals`方法，`MyObject`因为它用于某些不同的目的**。并且`retainAll`or`removeAll`方法似乎不接受`Comparator`对象。

我知道另一种解决方案是遍历列表并找到常见的列表。我正在寻找是否已经有一些方法可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:22:46.860

我不知道比您已经建议的更清洁的方法。

但是，如果您需要相等但不能使用`equals`（我不会问；），您可以合并列表并对它们进行排序，然后手动将每个元素与下一个元素进行比较，只保留重复的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:35:02.057

如果您想从两个列表中获取相同的值，我给您一个字符串示例：

```
/**
 * @param args
 * @throws IOException
 */
public static void main(String[] args) throws IOException {
    // create a script engine manager

    List<String> list_1 = new ArrayList<String>();
    list_1.add("a");
    list_1.add("b");
    List<String> list_2 = new ArrayList<String>();
    list_2.add("a");
    list_2.add("b");
    list_2.add("c");
    System.out.println(getSameVaue(list_2,list_1));
}

public static List<String> getSameVaue(List<String> list1,
        List<String> list2) {
    List<String> result = new ArrayList<String>();
    if (list1.size() > list2.size()) {
        for (String s : list1) {
            if (list2.contains(s)) {
                result.add(s);
            }
        }
    } else {
        for (String s : list2) {
            if (list1.contains(s)) {
                result.add(s);
            }
        }
    }
    return result;
} 
```

但是如果你想使用你的对象，请不要忘记实现**equals**方法。

# java - 我应该导入哪个类来使用 jboss 缓存？

> ID：11445984
> 
> 赞同：0
> 
> 时间：2012-07-12T06:16:55.197
> 
> 标签：java

我想使用 jboss 缓存，但我不知道哪个 jar 以及从哪里获取它。

```
 import org.jboss.cache.Fqn;
      import org.jboss.cache.Node;
      import org.jboss.cache.PropertyConfigurator;
      import org.jboss.cache.TreeCache; 
```

我收到“无法解析导入 org.jboss.cache.TreeCache”之类的错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:48:27.913

所有的 JBoss Cache 工件都可以[在这里找到](https://community.jboss.org/wiki/JBossCacheDownloadsPage)。

[JBoss Cache](http://www.jboss.org/jbosscache)不再开发。考虑使用它的继任者[infinispan](http://www.jboss.org/infinispan)。

# nsis - 在 NSIS 脚本中重命名目标文件而不使用重命名

> ID：11445990
> 
> 赞同：3
> 
> 时间：2012-07-12T06:17:26.280
> 
> 标签：nsis

如果我使用以下方法复制文件

```
SetOutPath "$FOO_DIR"
File "..\..\Bar.Dat"

...

SetOutPath "$OTHER_FOO_DIR"
File "..\..\Bar.Dat" 
```

请注意，文件*Bar.Dat*应该稍后在安装期间复制到其他位置。如何为这个特定的复制操作重命名它？如果我对其进行*重命名*，以后的操作将找不到它。我一直在寻找将*目标文件名*传递给*File*操作的选项，但找不到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T02:36:35.850

实际上尝试了上述方法，但 nsis 编译器抱怨。稍微重新安排一下就可以了：

```
File /oname="DestinationNameOfFile.Dat" "..\..\Bar.Dat" 
```

*源文件名是 /oname 的第二个参数

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T06:19:08.043

当然，我在发布这个问题后直接找到了答案。****啪****

*File*实际上带有目标名称的标志。

```
 File "..\..\Bar.Dat" /oname="DestinationNameOfFile.Dat" 
```

# android - 如何在不丢失 ICS 外观的情况下摆脱标题栏？

> ID：11445994
> 
> 赞同：1
> 
> 时间：2012-07-12T06:17:32.893
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-titlebar

我尝试了这个，当谷歌搜索时很容易获得：

```
android:theme="@android:style/Theme.NoTitleBar" 
```

但是当我应用它时，它会将整体主题改回前冰淇淋三明治。我的意思是`TextView`'s, `DatePicker`s 等是 Gingerbread 主题，而不是 ICS 主题。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T06:22:13.603

键入这是 setContentView() 之前的 onCreate() 方法：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:20:38.170

将其更改为：`theme.Holo.Light.NoTitlebar.`

# java - java编译器会优化对最终静态变量的方法调用吗？当它变成 dalvik 代码时会发生什么？

> ID：11445996
> 
> 赞同：5
> 
> 时间：2012-07-12T06:17:38.150
> 
> 标签：java, android, javac, compiler-optimization, dalvik

我有以下代码

```
 float square(float val) { return val*val;}
 boolean isInCircle(final float x,final float y) {

        float squareDistance = square(cx - x) + square(cy - y);
        return squareDistance < square(RADIUS);
    } 
```

哪里`RADIUS`是`static` `final` `float`。

java编译器会优化调用`square(RADIUS)`吗？

当它转换为`dalvik`代码时会发生什么`android`？它会保持优化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:31:31.277

Java 编译器不会对该代码执行任何操作。

HotSpot JVM 几乎肯定会预先计算平方（RADIUS）。

Android 没有那个特定的 JVM。

我个人根本不会编写 square() 方法，只是`return (cx-x)*(cx-x)+(cy-y)*(cy-y) < RADIUS*RADIUS;`让编译器/JVM 从那里解决它。但后来我是一名数学家;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T16:02:26.683

Dalvik JIT 编译器实际上确实内联了短函数，例如`square()`问题中定义的（尽管声明它可能更好`static`）。但是，我不能直接告诉你它是否肯定会被内联。

如果重要，请分析代码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T06:31:29.077

[Java 中的优化是由HotSpot 编译器](http://en.wikipedia.org/wiki/HotSpot)在运行时完成的（据我所知）（字节码在翻译成机器代码时会被优化）。所以答案是肯定的和否定的。

转换后的代码将同样优化，但它取决于 JVM，它将如何处理它。根据我的经验，它高度依赖于 JVM，并且可能在它的设置中（优化器的积极性）。我试图在 Windows JVM 和 Linux 上比较 SHA1 的运行与循环和没有循环。在一种情况下，没有循环的代码要快很多倍，而在第二种情况下（我认为在 Linux 上）只有大约 40% 的时间不同......

所以这很神奇，你可以给 HotSpot 很好的提示来优化或配置 JVM，但仍然取决于 JVM 的当前算法......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T17:35:28.647

唯一会发生的优化是编译器很可能会将静态最终字段的值“实习”为访问它的常量，而不是在运行时执行字段查找。

# java - 卡在这段代码上

> ID：11445999
> 
> 赞同：1
> 
> 时间：2012-07-12T06:17:47.870
> 
> 标签：java

我正在做的是创建一个命令行“游戏”，其中有一个 3x3 网格（阵列），您可以通过输入方向（上、下、左、右）在其中移动“1”。

例如：

0 0 0

0 1 0

0 0 0

我已经做到了，所以如果 1 在数组的边缘，则不允许它移出边界（阅读：导致超出索引错误）。

我完全迷失了，因为每当我尝试向右移动时，我都会收到以下信息：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3
at Logic.setMove(Logic.java:87)
at Logic.getMove(Logic.java:10)
at GridGameMain.main(GridGameMain.java:13) 
```

这是我的代码：

```
public class GridGameMain {
static int[][] board = new int[3][3];
public static void main(String[] args){

    board[(int) (Math.random() * 2.5)][(int) (Math.random() * 2.5)] = 1;
    for (int i =0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
        System.out.print(" " + board[j][i]);
        }
        System.out.println("");
        }
    Logic l = new Logic();
    l.getMove();

}

}

import java.util.Scanner;

public class Logic extends GridGameMain{
void getMove(){     //takes user input then calls setMove

    String direction;  //string to hold the direction
    Scanner user_input = new Scanner(System.in);   
    direction = user_input.next();    
    Logic l = new Logic();      
    l.setMove(direction);        

}
void setMove(String direction){ //called when user presses enter upon typing a move
    Logic l = new Logic();

    if(direction.equals("up")){

        if(board[0][0] == 1 || board[1][0] == 1 || board[2][0] == 1 ){

            System.out.println("Invalid move!");

            l.getMove();

        }else{
        for(int a = 0; a < 3; a++){
            for(int b = 0; b < 3; b++){
                if(board[a][b] == 1){
                    board[a][b-1] = 1;
                    board[a][b] = 0;
                    break;
                }
            }
        }
        l.printBoard();
        System.out.println("you moved up");
        l.getMove();
        }
    }

    if(direction.equals("down")){           
        if(board[0][2] == 1 || board[1][2] == 1 || board[2][2] == 1 ){
            System.out.println("Invalid move!");
            l.getMove();
        }else{
            for(int a = 0; a < 3; a++){
                for(int b = 0; b < 3; b++){
                    if(board[a][b] == 1){
                        board[a][b+1] = 1;
                        board[a][b] = 0;
                        break;
                    }
                }
            }
            l.printBoard();
        System.out.println("you moved down");
        l.getMove();
        }
    }
    if(direction.equals("left")){
        if(board[0][0] == 1 || board[0][1] == 1 || board[0][2] == 1 ){
            System.out.println("Invalid move!");
            l.getMove();
        }else{
            for(int a = 0; a < 3; a++){
                for(int b = 0; b < 3; b++){
                    if(board[a][b] == 1){
                        board[a-1][b] = 1;
                        board[a][b] = 0;
                        break;
                    }
                }
            }
            l.printBoard();

        System.out.println("you moved left");
        l.getMove();
        }
    }
    if(direction.equals("right")){
        if(board[2][0] == 1 || board[2][1] == 1 || board[2][2] == 1 ){
            System.out.println("Invalid move!");
            l.getMove();
        }else{
            for(int a = 0; a < 3; a++){
                for(int b = 0; b < 3; b++){
                    if(board[a][b] == 1){
                        board[a+1][b] = 1;
                        board[a][b] = 0;
                        break;
                    }
                }
            }

        l.printBoard();
        System.out.println("you moved right");
        l.getMove();
        }
    }
}
void printBoard(){
    for (int i =0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
        System.out.print(" " + board[j][i]);
        }
        System.out.println("");
        }
}
} 
```

我只是不确定为什么当我可以向上、向下和向左移动时我不能向右移动。请告诉我我没疯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:40:44.053

问题是您将“1”从左向右移动，因此由于您打破了第一个，因此您不会打破第二个，所以它会继续移动“1”，直到它被放在数组之外（ ArrayIndexOutOfBoundsException）。

解决它的一个例子：

```
 boolean found = false;
            for(int a = 0; a < 3; a++){                 
                for(int b = 0; b < 3; b++){                     
                    if(board[a][b] == 1){                         
                        board[a+1][b] = 1;                         
                        board[a][b] = 0;
                        found = true;
                        break;                     
                    }
                    if(found){
                        break;
                    }
                }             
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:23:18.770

在您向右移动：

```
 for(int a = 0; a < 3; a++){
            for(int b = 0; b < 3; b++){
                if(board[a][b] == 1){
                    board[a+1][b] = 1;  // what if a is 2??
                    board[a][b] = 0;
                    break;
                }
            } 
```

当 a 为 2 时，访问 board[a+1][b] 就是访问 board[3][b]。在 3*3 板上，这超出了界限。

编辑：问题是由于移动 1 后，您继续*外*循环 - 但没有初始边界检查。因此，在 1 从中央列移动到右侧之后，您尝试再次移动它。由于您循环的原因，这只发生在正确的移动中。

有两个简单的解决方案：

1.  使用一些标志来确保你也打破了外循环，或者更好 -
2.  `for`根据您实际要检查的内容更改 s 的边界。如果您不打算移动`1`第 2 列上的 a，则可以`a`在 0 和 1 之间进行循环。如果您永远不会使其从该点移动，则没有理由上升到 2。所有其他动作也是如此 - 将适当的界限从 更改`< 3`为`< 2`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T06:38:27.187

我认为问题在于，您检查以确保 1 不在最右边，*然后*您开始向右移动。这意味着，如果您的 1 在第 0 列上，则将其移至第 2 列，然后在下一次也是最后一次迭代时，将其移至第 3 列。

~~另外，你确定你下山时不会发生这种情况吗？~~ 这不会发生下降，因为正如@Keppil 所说，你打破了“行”（相关）循环，而向右走，你打破了第一列，这不是你想要的。

此外，您可以使用标签来打破您想要的任何循环。[方法如下](https://stackoverflow.com/questions/886955/breaking-out-of-nested-loops-in-java)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T06:40:49.043

你的`break;`for 循环内部似乎只中断了内部 for 循环。打破 后`for(int b = 0; b < 3; b++){ .. }`，外部循环没有理由停止。

您的循环找到`1`[1][1] 并将其向右移动。然后它打破了内部循环。尽管如此，它还是调用了内部循环 for `a=2`，即您`1`现在所在的位置。他试图再次转移......但异常失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T06:55:38.070

我相信当你向右走时你应该得到一个错误。原因是当你向右移动一个时，你打破了然后你增加了一个，但你没有检查它是否再次越界。一旦“b”循环完成，然后增加“a”，它就会将其注册为值为 1 并再次向右移动。这种情况一直持续到超出范围为止。更正代码的一种简单方法是反转循环，使外循环递增“b”，而内循环递增“a”。