# StackOverflow 问答 11266000-11266999

# sql - 带有转义单引号的 SQL Like 子句

> ID：11266000
> 
> 赞同：2
> 
> 时间：2012-06-29T17:04:15.903
> 
> 标签：sql, sql-server-2008, escaping

您好我正在尝试在 SQL 中运行此查询，但它没有给我结果：

```
SELECT        COUNT(*) AS Expr1
FROM            restaurantData
WHERE        (restaurantInfo LIKE '''%' + 'xyz' + '%''') OR
                         (restaurantName LIKE '''%' + 'xyz' + '%''') OR
                         (restaurantDescription LIKE '''%' + 'xyz' + '%''') 
```

我有值为 xyz 餐厅的 restaurantName 列

这是一些示例数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:08:56.647

为什么会有额外的单引号？

```
 SELECT
            COUNT(*) AS Expr1 
    FROM  restaurantData 
    WHERE        (restaurantInfo LIKE '%Guu%') 
OR (restaurantName LIKE '%Guu%') 
    OR (restaurantDescription LIKE '%Guu%') 
```

看起来您正在尝试动态构建它；如果是这种情况，那么我建议您发布您的构建方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:09:48.613

当执行字符串连接时，您可以将结果与以下内容进行比较：

```
'%Guu%' 
```

当您将两个单引号字符一个接一个地放在 SQL 字符串中时，它被“转义”，因此`''`用作`'`. 如果您的数据集包含引号字符，您将匹配以下内容：

```
restaurantInfo 
--------------
'ABCGuuDEF'
'xyzGuuamn' 
```

我相信你反而想做：

```
'%''' + 'Guu' + '''%' 
```

哪个会匹配

```
restaurantInfo 
--------------
Asdf'Guu'
'Guu'Asdf 
```

或者，如果您只是在寻找没有任何引号的 Guu，就这样做

```
'%' + 'Guu' + '%' 
```

哪个会匹配

```
restaurantInfo 
--------------
Guu
GuuAbcd
AbcdGuu
Asdf'Guu'
'Guu'Asdf 
```

# php - 搜索后显示整行

> ID：11266003
> 
> 赞同：1
> 
> 时间：2012-06-29T17:04:24.427
> 
> 标签：php, mysql

所以我可以搜索整个数据库，但我需要一种将 $db_tb_atr_name="location" 更改为所有列的方法。我需要搜索任何关键字并返回整行。现在返回的只是位置。我不知道如何更改我的代码来实现这一点。

```
<?php

if(isset($_GET['submit'])){

$db_host="localhost";
$db_username="megan";
$db_password="megan";
$db_name="megan";
$db_tb_name="user";
$db_tb_atr_name="location";

 mysql_connect("$db_host","$db_username","$db_password");
 mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT * FROM $db_tb_name WHERE 
CONCAT(id_user,fname,lname,location,email,phone_number,username) LIKE '%".$query."%'");

echo "<h2>Search Results</h2><ol>";
while($data_fetch=mysql_fetch_array($query_for_result))
{
 echo "<li>";
 echo substr($data_fetch[$db_tb_atr_name], 0,160);
 echo "</li><hr/>";
}
 echo "</ol>";

 mysql_close();
 }
 ?> 
```

如果我将 $db_tb_atr_name 更改为 $db_tb_name 它根本不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:07:42.920

不要那样做。尝试这样的事情：

```
$query_for_result=mysql_query("SELECT * FROM $db_tb_name WHERE CONCAT(id_user,fname,lname,location,email,phone_number,username) LIKE '%".$query."%'");

echo "<h2>Search Results</h2><ol>";
while($data_fetch=mysql_fetch_assoc($query_for_result))
{
    echo "<li>";
    echo substr(implode(",", $data_fetch), 0,160);
    echo "</li><hr/>";
}
echo "</ol>"; 
```

我将您的 mysql_fetch_array 切换为 mysql_fetch_assoc。现在，您可以获得更有条理和关联的响应。

此外，我对您的 $data_fetch 进行了内爆，这意味着它将您的不同列连接在一起，并由列分隔。

我们可以随时将其更改为您需要的方式，但您想要的输出并不详细。

你也可以这样做：

```
$query_for_result=mysql_query("SELECT * FROM $db_tb_name WHERE  CONCAT(id_user,fname,lname,location,email,phone_number,username) LIKE '%".$query."%'");

echo "<h2>Search Results</h2><ol>";
while($data_fetch=mysql_fetch_assoc($query_for_result))
{
    echo "<li>";
    foreach($data_fetch as $row => $value){
        echo "Row: $row - $value<br />";
    }
    echo "</li><hr/>";
} 
```

# jquery - jQuery appendTo 按照 DOM 源顺序串行

> ID：11266008
> 
> 赞同：0
> 
> 时间：2012-06-29T17:04:58.653
> 
> 标签：jquery, append

我正在使用 JQuery 在 DOM 中查找某些 div 类，如果他们发现将它们附加到另一个 div 中。

这是工作小提琴：http: [//jsfiddle.net/gTAfe/1/](http://jsfiddle.net/gTAfe/1/)

我的代码看起来像这样：

```
var parentM = $('#module');
var eltofind = ["heading", "text", "image"];

for(var i=0; i < eltofind.length; i++){
     var thisElement = eltofind[i];

    if(parentM.find("." + thisElement).length != 0){

        var eltoget = parentM.find("." + thisElement);

        $(eltoget).each( function(index) {
                var count = (index +1);
                var getting = thisElement + "-" + count;
                $('<div></div>').appendTo('#output').addClass(getting).text(getting);

        });
    }
} 
```

由于 each() 函数，此脚本确实追加，但它不会按照 DOM 中的 div 类的相同顺序追加 div。`var eltofind = ["heading", "text", "image"];`目前它们按定义的顺序附加。

我如何记住当前要查找的 div 类的顺序并在每个函数中以相同的顺序附加它们？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:36:01.583

这里有两个选择：

1）最简单的只是克隆它们并附加它们。不过，这取决于您希望对每个元素进行多少控制：[DEMO](http://jsfiddle.net/jeschafe/gTAfe/3/)

2）如果您想对每个元素或某物进行更改，这个可以让您更好地控制每个元素的代码：[DEMO](http://jsfiddle.net/jeschafe/gTAfe/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:20:46.517

问题是您首先找到所有`heading`s，然后是所有`text`s，然后是所有`image`s。这样就改变了顺序。你需要的是一个多选器。见：[http ://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

这将立即找到所有相关元素并保持顺序。

**此代码段按预期工作：**

```
var parentM = $('#module');
var eltofind = ["heading", "text", "image"];

var multiSelector = "";
for (var i = 0; i < eltofind.length - 1; i++) {
    multiSelector = multiSelector + "." + eltofind[i] + ", ";
}
multiSelector = multiSelector + "." + eltofind[eltofind.length - 1];

//this will contain all your elements
var eltoget = parentM.find(multiSelector);
$(eltoget).each(function(index) {
    $('<div></div>').appendTo('#output').hide().text($(this).text()).fadeIn(3000);
});​ 
```

# php - 从 XML 访问数据

> ID：11266010
> 
> 赞同：0
> 
> 时间：2012-06-29T17:05:04.677
> 
> 标签：php, xml

对，所以这是我使用 XML 的第一天。我没有创建 XML，有人向我发送了一个 URL，我需要使用 PHP 对其进行处理。XML 结构如下所示：

```
<response>
<query id="1">
<results>
    <item>
        <id>GZ7w39jpqwo</id>
        <rank>1</rank>
        <explanation>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla a massa lectus, sed convallis sapien. Curabitur sem mauris, ullamcorper ut. </explanation>
    </item>
    <item>
        <id>hfMNRUAwLVM</id>
        <rank>2</rank>
        <explanation>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla a massa lectus, sed convallis sapien. Curabitur sem mauris, ullamcorper ut. </explanation>
    </item>
    <item>
        <id>I_cxElavpS8</id>
        <rank>3</rank>
        <explanation>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla a massa lectus, sed convallis sapien. Curabitur sem mauris, ullamcorper ut. </explanation>
    </item>
</results>
</query>
</response> 
```

所以，是的，这就是我到目前为止所知道的......

```
$url = "http://www.MyURL.blah";

$string = file_get_contents($url);

$xml = simplexml_load_string($string);

echo $xml->getName(); 
```

这与“响应”一词相呼应。耶，跟我走！那么现在你到底是如何得到每个项目的 id、rank 和解释的呢？我只发布了上面的 3 个项目。实际上大约有50个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:09:44.657

试试这个教程：

[http://www.phpro.org/tutorials/Introduction-To-SimpleXML-With-PHP.html](http://www.phpro.org/tutorials/Introduction-To-SimpleXML-With-PHP.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:10:31.397

```
foreach($xml->xpath('/results')->children() as $child)
{
   $mystuff = $child->getChildren();
   $id = $mystuff[0];
   $rank = $mystuff[1];
   $explanation = $mystuff[2];
} 
```

类似的东西。请参阅[SimpleXMLElement 对象的 PHP 文档](http://us3.php.net/manual/en/class.simplexmlelement.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T17:43:27.300

这个例子可以帮助你，它使用了 DOMDocument。

```
$document = new DOMDocument(); //Creates a new DOM Document (used to process XML)
$document->loadXML($fileContents); //Load the XML file from an string
$resultsNode = $document->getElementsByTagName("results")->item(0); //Get the node with the results tag
foreach($resultsNode->childNodes as $itemNode) //Get each child node (item) and process it
{
    foreach($itemNode->childNodes as $unknownNode) //Get each child node of item and process it
    {
        if($unknownNode->nodeName == "id") //Check if it's the dessired node
        {
            $this->id = $unknownNode->value; //Assign the value of the node to a variable
        }
        if($unknownNode->nodeName == "rank")
        {
            $this->rank = $unknownNode->value;
        }
        if($unknownNode->nodeName == "explanation")
        {
            $this->explanation = $unknownNode->value;
        }
    }
} 
```

# excel - 在excel中动态冻结窗格

> ID：11266012
> 
> 赞同：6
> 
> 时间：2012-06-29T17:05:15.307
> 
> 标签：excel

我有一个 excel 表，其中包含以下格式的数据：

```
Title
Summary A
A info 1
A info 2
A info 3
Summary B
B info 1
B info 2
Summary C 
```

所以现在我只有“标题”作为excel中的冻结窗格。它工作正常，但有很多数据，所以当你在工作表中间时，很难知道你是在工作`summary A`还是在`summary B`.

有谁知道如何动态冻结窗格？即，最初`title`将`Summary A`被冻结。然后当用户向下滚动到下一个部分时`Title`，`Summary B`将被冻结，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:05:35.387

您可以尝试一下（在工作表代码模块中）。每次选择更改时，它都会在第一列中向上检查“Summary*”等内容：如果工作表尚未冻结到该行，它将进行调整。

一个困难是，要向上滚动，您必须单击顶部窗格中的某一行...

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

    Static lastFreeze As Long
    Dim c As Range, r As Long, sel As Range

    Set sel = Selection
    'get the first cell on the selected row, then
    '  go up until find a content like "Summary*"
    Set c = Target.Parent.Cells(Target.Cells(1).Row, 1)
    Do While (Not c.Value Like "Summary*") And c.Row > 1
        Set c = c.Offset(-1, 0)
    Loop

    'need to switch freeze location?
    If c.Row > 1 And c.Row <> lastFreeze Then
        ActiveWindow.FreezePanes = False
        'prevent re-triggering event
        Application.EnableEvents = False
        Application.GoTo c.Offset(-1, 0), True
        c.Offset(1, 0).Select
        ActiveWindow.FreezePanes = True
        sel.Select
        Application.EnableEvents = True
        lastFreeze = c.Row
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T15:38:36.573

这可能有点晚了，但是我一直在寻找这样的解决方案，并且我想出了一个更好的方法，因为解冻和重新冻结可能会非常棘手。而是尝试分组： http: [//office.microsoft.com/en-us/excel-help/outline-group-data-in-a-worksheet-HA010095247.aspx](http://office.microsoft.com/en-us/excel-help/outline-group-data-in-a-worksheet-HA010095247.aspx)

# arrays - Powershell：将对象添加到对象数组

> ID：11266013
> 
> 赞同：47
> 
> 时间：2012-06-29T17:05:18.283
> 
> 标签：arrays, powershell, scripting

我有这个脚本，我想将一个对象添加到`$Target`每个 foreach 中调用的数组中。

```
foreach ($Machine in $Machines)
{
  $TargetProperties = @{Name=$Machine}  
  $TargetObject = New-Object PSObject –Property $TargetProperties
  $Target= @()
  $Target =  $TargetObject
} 
```

我知道它不起作用，因为`$Target = $TargetObject`它等于同一个对象。

如何附加到数组而不是替换？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-06-29T17:11:05.577

要追加到数组，只需使用`+=`运算符。

`$Target += $TargetObject`

此外，您需要`$Target = @()`在循环之前声明，否则，它将在每个循环中清空数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-19T14:32:19.553

通常，人们在不使用每次都制作新数组副本的低效“+=”的情况下这样做：

```
$Target = foreach ($Machine in $Machines)
{
  $TargetProperties = @{Name=$Machine}  
  $TargetObject = New-Object PSObject –Property $TargetProperties
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-14T20:12:31.100

**我知道这是一个老问题，但对于未来的读者来说，接受的答案在每种情况下**都不是理想的，尤其是在循环中迭代大量数据时。

问题是如何“将对象添加到对象数组”。这篇文章的标题与给出的示例问题不符合相同的答案。相反，我的目标是解决示例中展示的问题。

虽然很容易将 append 运算符`+=`与数组一起使用，但在幕后，这是一个相当浪费的过程。浪费的程度取决于您循环通过的对象的大小。

接受的答案以初始化的空数组开头`$Target = @()`。然后建议使用循环`$Machines`将项目附加到空数组`$Target += $TargetObject`。在幕后，PowerShell 正在测量`$Target`您要附加的项目的大小和大小`$TargetObject`，将这些大小相加并创建一个全新的数组。然后它将内容从新数组复制/添加`$Target`到新数组，然后是您要附加的对象。这个过程发生在循环中的每个项目上。如果 中有 1000 个项目`$Machines`，则到操作结束时您将创建 1000 个数组。

这一切都是因为普通的旧数组是固定大小的。通过将项目附加到具有固定大小的东西，我们最终得到了这个浪费的过程。我们可以通过根本不创建新数组来避免这种情况。相反，只需将`foreach`循环已经创建的数组分配给一个变量。请参阅以下示例。

```
$Target = foreach ($Machine in $Machines)
{
  # Stuff I want to be in $Target goes here
} 
```

其他答案之一具有正确的想法，但给出的示例不正确。为了使`$Target`变量中的任何内容都结束，您必须确保将数据发送到输出流。不要与正在写入的数据相混淆`Write-Host`。

这是一个工作示例：

```
# Mock array for illustration purposes
$Machines = @( "Machine1", "Machine2", "Machine3" ) 

$Target = foreach ( $Machine in $Machines )
{
    # This is being sent directly to the output stream and therefore, into the $Target variable     
    @{ Name = $Machine } 
} 
```

您的输出应如下所示：

| 姓名 | 价值 |
| --- | --- |
| 姓名 | 机器1 |
| 姓名 | 机器2 |
| 姓名 | 机器3 |

如果您熟悉 Cmdlet `Foreach-Object`，下面是等效的。您可以开始看到与我的第一个示例的相似之处。

```
$Target = $Machines | ForEach-Object { @{ Name = $_ } } 
```

这篇文章涵盖了我刚刚提到的所有内容以及性能影响：

*   [https://vexx32.github.io/2020/02/15/Building-Arrays-Collections/](https://vexx32.github.io/2020/02/15/Building-Arrays-Collections/)
*   [https://www.pipehow.tech/new-arraylist/](https://www.pipehow.tech/new-arraylist/)

# java - 资源加载：如何判断是否为目录

> ID：11266016
> 
> 赞同：3
> 
> 时间：2012-06-29T17:05:37.707
> 
> 标签：java, jar, resource-loading

目前我使用这个解决方案来加载资源：

```
URL url = MyClass.class.getClassLoader().getResource("documents/"+path);
if(url == null)
    throw new FileNotFoundException();

BufferedReader reader = new BufferedReader(
    new InputStreamReader(url.openStream())); 
```

可悲的是，我无法控制`path`是文件还是目录。有什么方法可以确定表示的路径是否是目录？我正在寻找一种独立于资源加载位置的解决方案（换句话说：[`File.isFile`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#isFile%28%29)从 JAR 加载资源时不起作用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:54:09.107

我使用此代码从 jar 中获取文本文件的名称。

```
public String[] getFiles() throws IOException {
    ArrayList<String> list = new ArrayList<String>();
    List<JarEntry> ents = new ArrayList<JarEntry>();
    Enumeration<JarEntry> e = null;

    URL jarp = getLocation();
    if (jarp != null) {
        jar = jarp.getProtocol().equalsIgnoreCase("jar") ? jarp : new URL("jar:" + jarp.toString() + "!/");
        JarFile jarf = null;
        try {
            jarf = AccessController.doPrivileged(
                    new PrivilegedExceptionAction<JarFile>() {

                        @Override
                        public JarFile run() throws Exception {
                            JarURLConnection conn = (JarURLConnection) jar.openConnection();
                            conn.setUseCaches(false);
                            return conn.getJarFile();
                        }
                    });
        } catch (PrivilegedActionException ex) {
            Logger.getLogger(LicenseLoader.class.getName()).log(Level.SEVERE, null, ex);
        }
        e = jarf.entries();
        while (e.hasMoreElements()) {
            JarEntry je = e.nextElement();
            if (!je.isDirectory()) {
                ents.add(je);
            }
        }
        for (JarEntry ent : ents) {
            if ((ent.getName().startsWith(pathName)) && (ent.getName().endsWith(".txt"))) {
                String name = ent.getName().replace(pathName, "");
                list.add(name);
            }
        }
    }
    return list.toArray(new String[list.size()]);
} 
```

# javascript - 无法创建 SSL/TLS 安全通道

> ID：11266020
> 
> 赞同：5
> 
> 时间：2012-06-29T17:05:48.627
> 
> 标签：javascript, facebook, httpwebrequest, facebook-javascript-sdk

我只是*有时会*收到此错误 - 似乎它有时只会发生。如果我刷新页面，它似乎会自行修复。有任何想法吗？

```
The request was aborted: Could not create SSL/TLS secure channel. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Net.WebException: The request was aborted: Could not create SSL/TLS secure channel. 
```

从这段代码：

```
 string ThirdURL = "https://api.facebook.com/method/users.getInfo?uids=" + FacebookUserID + "&client_id=" + AppCode.Facebook.APPLICATION_ID + "&access_token=" + AccessToken + "&fields=first_name,last_name,current_location,email,birthday,sex,pic_square,locale&format=json";
    HttpWebRequest APIThirdRequest = (HttpWebRequest)WebRequest.Create(ThirdURL);
    StreamReader APIThirdResponse = new StreamReader(APIThirdRequest.GetResponse().GetResponseStream());

//error on line below -->
        string MoreAPIData = APIThirdResponse.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:08:37.003

这是 Facebook 方面的临时问题。虽然它持续存在，但解决方案是执行一个“try-catch 循环”，请求的最大重试次数为 x 次，即使它可能被认为是不好的做法。

自 2012-07-17 以来，问题本身已得到解决。

Facebook Developers 上关于该问题的门票：

*   [请求被中止：无法创建 SSL/TLS 安全通道。](https://developers.facebook.com/bugs/397592836945114)
*   [间歇性 SSL 证书错误：“无法创建 SSL/TLS 安全通道。”](https://developers.facebook.com/bugs/335732253172491)

# java - 无法在 XAMPP 中编辑 Tomcat Java 选项

> ID：11266024
> 
> 赞同：3
> 
> 时间：2012-06-29T17:06:20.257
> 
> 标签：java, tomcat, solr, xampp, tomcat7

我正在寻找在我的本地主机上运行的 Solr 搜索实例。[指示](http://www.icuriousmedia.com/blog/how-to-install-apache-solr-on-windows-xp-1439.php)要求通过编辑将Tomcat 指向 Solr 主目录

> C://Xampp/tomcat/bin/tomcat7w.exe

并修改 Java 选项选项卡。

当我尝试打开文件时，出现此错误：

> “指定的服务不作为已安装的服务存在。无法打开服务'tomcat7'”

当我在 XAMPP 上启动 Tomcat 并导航到 localhost:8080 时，似乎一切都很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T02:37:55.293

它已安装，但它是*作为 Windows 服务*安装的吗？检查控制面板/管理/服务。如果是，请打开其属性并记下短名称。然后将 Tomcat7w.exe 重命名为 XXXXXw.exe，其中 XXXXX 是短名称。如果它没有作为服务安装，请转到 Tomcat bin 目录并键入`service install Tomcat7`.

# jquery - 使用 jQuery 管理注册、登录和忘记密码 div

> ID：11266025
> 
> 赞同：0
> 
> 时间：2012-06-29T17:06:20.397
> 
> 标签：jquery, html

我想用 jQuery 创建动画登录、sigup 和忘记密码。

[我在http://vox.io](http://vox.io)中发现了这个想法

我创造了艰苦的工作，但我仍然无法显示忘记密码的 div。

我有 3 个 div：登录、注册和忘记；

这是完整的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

    $(".login").hide();
    $(".forgot").hide();
    $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".login").slideToggle("slow");  });

    $('.show_hide').click(function(){
    $(".signup").slideToggle("slow");  });

});

</script>
<style type="text/css">
.login, .signup, .forgot {
    height:300px;
    width:400px;
    padding:20px;
    margin-top:10px;
}

.show_hide {
    display:none;
}
</style>
</head>
<body>

    <div class="signup">
        <form id="login_voxio" method="post" action="http://vox.io/auth.localauthentication/authenticate">
        <div>
            <h2>New to vox.io? <a href="#" class="show_hide">Sign up</a></h2>
            <h3>Login</h3>
        </div>
        <fieldset>
            <div>
                <span class="input">Username or email</span>
                <input class="input" type="text" id="username" name="username" value="" autocomplete="off" />
            </div>
            <div class="l">
                <span class="input">Password</span>
                <input class="input" type="password" id="password" name="password" value="" autocomplete="off" />
            </div>
            <input type="submit" class="mac_arrow" id="signin" name="signin" value="Sign in" />
            <input type="hidden" id="type" name="type" value="LOCAL" />
        </fieldset>
        <a href="#" class="show_hide">Forgot password?</a>
    </form>
        <div class="forgot" id="#forgot">
        <form id="login_forgot" method="post" action="http://vox.io/authentication/forgot">
            <div>
                <h2>New to vox.io? <a class="show_hide">Sign up</a></h2>
                <h3>Your recovery email address</h3>
            </div>
            <fieldset>
                <div class="l">
                    <span class="input">Email Address</span>
                    <input class="input" type="text" id="femail" name="femail" value="" />
                </div>
                <input class="mac_arrow" type="submit" id="send-instructions" name="send-instructions" value="Send instructions">
            </fieldset>
        </form>
      </div>
    </div>
    <div class="login">
        <form id="login_register" method="post" action="http://vox.io/signup/saveaccount">
            <div>
                <h2>Already a member? <a href="#" class="show_hide">Log in</a></h2>
                <h3>Sign up</h3>
            </div>
            <fieldset>
                <div class="login_register_anim">
                    <span class="input">Full name</span>
                    <input class="input" type="text" id="name" name="acc.name" value="" maxlength="36" autocomplete="off" />
                </div>
                <div>
                    <span class="input">Username</span>
                    <input class="input" type="text" id="username_register" name="acc.username" value="" maxlength="16" autocomplete="off" />
                </div>
                <div>
                    <span class="input">Password</span>
                    <input class="input" type="password" id="password1" name="acc.password" value="" autocomplete="off" />
                </div>
                <div class="login_register_anim">
                    <span class="input">Email Address</span>
                    <input class="input" type="text" id="email" name="acc.emails[0].email" value="" autocomplete="off" />
                </div>
                <div class="l login_register_anim">
                    <select class="select selectBox" id="country" name="acc.country">
                        <option value="AF" title="+93" class="AF">Afghanistan</option>
                        <option value="AL" title="+355" class="AL">Albania</option>
                        <option value="DZ" title="+213" class="DZ">Algeria</option>
                        <option value="AS" title="+1684" class="AS">American Samoa</option>
                        <option value="AD" title="+376" class="AD">Andorra</option>
                        <option value="TN" title="+216" class="TN" selected="selected">Tunisia</option>
                        <option value="TR" title="+90" class="TR">Turkey</option>
                        <option value="TM" title="+993" class="TM">Turkmenistan</option>
                        <option value="TC" title="+1649" class="TC">Turks and Caicos Islands</option>
                        <option value="TV" title="+688" class="TV">Tuvalu</option>
                    </select>
                </div>
                <input class="login_register_anim button_blue" type="submit" id="register_submit" name="register_submit" value="Sign up" />
            </fieldset>
        </form>
    </div>
</body>
</html> 
```

以及如何更改动画（如淡入）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:10:15.847

在您喜欢的网站上，有一个非混淆文件，该网站用于实现您想要的功能 (http://vox.io/public/a0ea2e1a63/static/js/Authentication/login.js)

所以你有一个工作示例的所有 javascript。所以重新开始吧！

只需使用他们网站上的源代码作为示例。逆向工程应该很容易——只需从一个示例应用程序从头开始......然后将源代码的关键部分移动到您的应用程序中。一块一块的。在迭代中测试它​​。

1) 添加表格 2) 添加动画 3) 等等

特别是搜索 .animate 并观察他们是如何做到的：

这是他们的代码：

```
(function($) {
  $('.selectBox').customStyle();

  $('#username_register').blur(function() {
    var value = $.trim($(this).val());

    if (value !== '') {
      $('#username').attr('value', value).blur();
    }
  });

  $('#username').blur(function() {
    var value = $.trim($(this).val());

    if (value !== '') {
      $('#username_register').attr('value', value).prev().hide();
    }
  });

  /*
   * Landing animations
   */
  var forms = $('#landing_forms > div > form');
  var animStarted = false;

  // Animation from signup process to vox.io login
  $('#change_login').click(function(ev) {
    if (animStarted === true) {
      return false;
    }

    animStarted = true;

    // Hide fields
    $('> div, > fieldset, > a', '#login_voxio').css('opacity', 0);
    $('#login_voxio #username').prev().css('opacity', 0);

    // Show form
    $('#login_voxio').show();

    // Hide h1 and h2
    $('> div', '#login_register').animate({
      'opacity': 0
    }, 'fast', function() {
      var i = 1, x = $('.login_register_anim').length;

      // Hide all input fields
      $('.login_register_anim').animate({
        'opacity': 0
      }, 'fast', function() {
        if (i >= x) {
          // Push up username and password
          $('#name').parent().slideUp('fast', function() {
            // Hide label
            $('#login_register #username_register').prev().animate({
              'opacity': 0
            }, 'fast');

            // Show label
            $('#login_voxio #username').prev().animate({
              'opacity': 1
            }, 'fast', function() {
              // Hide form
              $(forms).hide();
              // Show form
              $('#login_voxio').show();
              $('#login_voxio #username').focus();

              // Show and animate fields
              $('> fieldset', '#login_voxio').css('opacity', 1);

              $('> a', '#login_voxio').animate({
                'opacity': 1
              }, 'fast', function() {
                animStarted = false;
              });
            });
          });
        }

        i = i + 1;
      });
    });

    // Show h1 and h2
    $('> div', '#login_voxio').animate({
      'opacity': 1
    }, 'normal');
  });

  // Animation from vox.io login to signup process
  $('#change_signup').click(function(ev) {
    if (animStarted === true) {
      return false;
    }

    animStarted = true;

    // Hide fields
    $('> div', '#login_register').css('opacity', 0);
    $('> a', '#login_voxio').animate({
      'opacity': 0
    }, 'fast');

    // Show form
    $('#login_register').show();

    // Hide h1 and h2
    $('> div', '#login_voxio').animate({
      'opacity': 0
    }, 'normal', function() {
      // Hide label
      $('#login_voxio #username').prev().animate({
        'opacity': 0
      }, 'fast');

      $('> fieldset', '#login_register').css('opacity', 1);

      // Show label
      $('#login_register #username_register').prev().animate({
        'opacity': 1
      }, 'fast', function() {
        // Hide form
        $(forms).hide();
        // Show form
        $('#login_register').show();

        $('#name').parent().slideDown('fast', function() {
          var i = 1, x = $('.login_register_anim').length;

          $('.login_register_anim').animate({
            'opacity': 1
          }, 'fast', function() {
            if (i >= x) {
              animStarted = false;
            }

            i = i + 1;
          });
        });
      });
    });

    // Show h1 and h2
    $('> div', '#login_register').animate({
      'opacity': 1
    }, 'normal');
  });

  // Animation from vox.io login to social login
  $('#change_social').click(function(ev) {
    if (animStarted === true) {
      return false;
    }

    animStarted = true;

    // Hide fields
    $('> div, > a', '#login_social').css('opacity', 0);
    $('> fieldset', '#login_social').css('opacity', 1);

    $('#landing_forms > div > form img').css({
      'top': 20,
      'left': 20,
      'width': 0,
      'height': 0
    });

    // Show form
    $('#login_social').show();

    $('> a, > fieldset', '#login_voxio').animate({
      'opacity': 0
    }, 'fast');

    // Hide h1 and h2
    $('> div', '#login_voxio').animate({
      'opacity': 0
    }, 'normal', function() {
      $('> a', '#login_social').animate({
        'opacity': 1
      }, 'fast');

      $('> div', '#login_social').animate({
        'opacity': 1
      }, 100, function() {
        // Hide forms
        $(forms).hide();
        // Show form
        $('#login_social').show();

        var x = $('#landing_forms > div > form ul li img').length - 1;

        $.each($('#landing_forms > div > form ul li img'), function(i, img) {
          setTimeout(function() {
            $(img).animate({
              'width': 43,
              'height': 43,
              'top': 0,
              'left': 0
            }, 300, 'easeOutCubic', function() {
              $(this).animate({
                'width': 41,
                'height': 41,
                'top': 0,
                'left': 0
              }, 250, 'easeOutCubic', function() {
                if (i >= x) {
                  $('> div, > a, > fieldset', '#login_voxio').css('opacity', 1);

                  animStarted = false;
                }
              });
            });
          }, i * 80);
        });
      });
    });

    // Show h1 and h2
    $('> div', '#login_social').animate({
      'opacity': 1
    }, 'normal');
  });

  // Animation from social login to signup process
  $('#change_signup_social').click(function(ev) {
    if (animStarted === true) {
      return false;
    }

    animStarted = true;

    // Hide fields
    $('> div, > fieldset', '#login_register').css('opacity', 0);
    $('#login_register #username_register').prev().css('opacity', 1);

    // Show form
    $('#login_register').show();

    // Hide fields
    $('> a, > fieldset', '#login_social').animate({
      'opacity': 0
    }, 'fast');

    // Hide h1 and h2
    $('> div', '#login_social').animate({
      'opacity': 0
    }, 'normal', function() {
      $('#name').parent().show();
      $('.login_register_anim').css('opacity', 1).show();

      $('> fieldset', '#login_register').animate({
        'opacity': 1
      }, 'fast', function() {
        // Hide forms
        $(forms).hide();
        // Show form
        $('#login_register').show();
        animStarted = false;
      });
    });

    // Show h1 and h2
    $('> div', '#login_register').animate({
      'opacity': 1
    }, 'normal');
  });

  // Animation from social login to vox.io login
  $('#change_voxio').click(function(ev) {
    if (animStarted === true) {
      return false;
    }

    animStarted = true;

    // Hide fields
    $('> div, > a, > fieldset', '#login_voxio').css('opacity', 0);

    // Show form
    $('#login_voxio').show();

    // Hide fields
    $('> a, > fieldset', '#login_social').animate({
      'opacity': 0
    }, 'fast');

    // Hide h1 and h2
    $('> div', '#login_social').animate({
      'opacity': 0
    }, 'normal', function() {
      // Hide forms
      $(forms).hide();
      // Show form
      $('#login_voxio').show();

      $('> a', '#login_voxio').animate({
        'opacity': 1
      }, 'fast');

      $('> fieldset', '#login_voxio').animate({
        'opacity': 1
      }, 'fast', function() {
        animStarted = false;
      });
    });

    // Show h1 and h2
    $('> div', '#login_voxio').animate({
      'opacity': 1
    }, 'normal');
  });

  // Animation from vox.io login to forgot password process
  $('#change_forgot').click(function(ev) {
    if (animStarted === true) {
      return false;
    }

    animStarted = true;

    // Hide fields
    $('> div, > fieldset, > p, #send-instructions', '#login_forgot').css('opacity', 0);
    $('#login_forgot #femail').prev().css('opacity', 0);

    // Show form
    $('#login_forgot').show();

    // Hide fields
    $('> a', '#login_voxio').animate({
      'opacity': 0
    }, 'fast');

    // Hide h1 and h2
    $('> div', '#login_voxio').animate({
      'opacity': 0
    }, 'normal', function() {
      $('#password').parent().slideUp('fast', function() {
        $('#send-instructions').css('opacity', 1);

        $('> p', '#login_forgot').animate({
          'opacity': 1
        }, 'fast');

        $('#signin').animate({
          'bottom': 21
        }, 50, function() {
          $('> fieldset', '#login_forgot').css('opacity', 1);

          // Hide forms
          $(forms).hide();
          // Show form
          $('#login_forgot').show();
          $('#login_forgot #femail').focus();

          $('#signin').css('bottom', 8);

          // Hide label
          $('#login_voxio #username').prev().animate({
            'opacity': 0
          }, 'fast');

          // Show label
          $('#login_forgot #femail').prev().animate({
            'opacity': 1
          }, 'fast', function() {
            animStarted = false;
          });
        });
      });
    });

    // Show h1 and h2
    $('> div', '#login_forgot').animate({
      'opacity': 1
    }, 'normal');
  });

  // Animation from forgot password process to signup process
  $('#change_signup_forgot').click(function(ev) {
    if (animStarted === true) {
      return false;
    }

    animStarted = true;

    // Show fields
    $('#name').parent().show();
    $('#password').parent().show();
    $('> fieldset > div, #register_submit', '#login_register').css('opacity', 1);
    $('#login_register #username_register').prev().css('opacity', 1);

    // Hide fields
    $('> div, > fieldset', '#login_register').css('opacity', 1);

    // Show form
    $('#login_register').show();

    $('> p, > fieldset', '#login_forgot').animate({
      'opacity': 0
    }, 'fast');

    // Hide h1 and h2
    $('> div', '#login_forgot').animate({
      'opacity': 0
    }, 'normal', function() {
      // Hide forms
      $(forms).hide();
      // Show form
      $('#login_register').show();

      $('> fieldset', '#login_register').animate({
        'opacity': 1
      }, 'fast', function() {
        animStarted = false;
      });
    });

    // Show h1 and h2
    $('> div', '#login_register').animate({
      'opacity': 1
    }, 'normal');
  });

  /*
   * End of animations :)
   * Some other stuff we have to handle
   */
  // Sign up process
  var profile_form_data = function(input, status, pending) {
    $(input).data({
      'status': status,
      'pending': (pending !== undefined ? pending : false)
    });
  };

  $.each($('#login_register input.input'), function(i, input) {
    profile_form_data(input, false, false);
  });

  var form_validators = {
    email: function(value) {
      var email = /^([^@]+)@([^\s@.]([^\s@.]*\.[^\s@.]+)+)$/;

      return email.test(value);
    },
    username: function(input, value) {
      profile_form_data(input, false);

      if ($(input).data('status') === false && $(input).data('pending') === false) {
        profile_form_data(input, false, true);

        var div = $(input).parent();
        div.find('p').remove();

        $(input).removeClass('valid invalid');

        if (0 < value.length && value.length < 3) {
          $(input).addClass('invalid');

          div.append('<p>Username requires at least 3 characters.</p>');
        } else {
          $.ajax({
            'url': VoxioUrls.ajaxValidationUsername,
            'cache': false,
            'data': {
              'username': value
            },
            'success': function(data) {
              if (data === 'true') {
                profile_form_data(input, true);

                $(input).addClass('valid');

                div.append('<p class="success">Success</p>');

                if ($('#login_register').data('submitted') === true) {
                  $('#login_register').data('submitted', false).submit();
                }
              } else if (data === 'false') {
                profile_form_data(input, false);

                $(input).addClass('invalid');

                div.append('<p>Huh, this username is already in use.</p>');
              } else if (data === 'short') {
                profile_form_data(input, false);

                $(input).addClass('invalid');

                div.append('<p>Username requires at least 3 characters.</p>');
              }
            }
          });
        }
      }
    }
  };

  // name
//  var name_value = $.trim($('#login_register #name').val());

  $('#login_register #name').blur(function(e) {
    var value = $.trim($(this).val());
    var div = $(this).parent();

    div.find('p').remove();

    profile_form_data(this, false);

    $(this).removeClass('valid invalid');

    if (value !== '') {
      $(this).addClass('valid');
      div.append('<p class="success">Success</p>');
      profile_form_data(this, true);

      var v = $.trim($('#login_register #username_register').val());

      if (v === '' && value.length >= 3) {
        $.ajax({
          'url': VoxioUrls.ajaxRecommendUsername,
          'cache': false,
          'data': {
            'name': value
          },
          'dataType': 'json',
          'success': function(response) {
            if (response.username !== '' && $.trim($('#login_register #username_register').val()) === '') {
              $('#login_register #username_register').attr('value', response.username).keyup();
            }
          }
        });
      }
    }
  }).focus(function() {
    $(this).removeClass('valid invalid').parent().find('p').remove();

    profile_form_data(this, false);
  });

  // email
  $('#login_register #email').blur(function(e) {
    var value = $.trim($(this).val());
    var div = $(this).parent();

    div.find('p').remove();

    $(this).removeClass('valid invalid');
    profile_form_data(this, false);

    if (form_validators.email(value) === true) {
      $(this).addClass('valid');

      div.append('<p class="success">Success</p>');

      profile_form_data(this, true);
    } else if (value !== '') {
      $(this).addClass('invalid');

      div.append('<p>This does not appear to be a valid email.</p>');
    }
  }).focus(function() {
    profile_form_data(this, false);
  });

  // password
  $('#login_register #password1').blur(function(e) {
    var value = $.trim($(this).val());
    var div = $(this).parent();

    div.find('p').remove();

    profile_form_data(this, false);
    $(this).removeClass('valid invalid');

    if (value !== '') {
      if (value.length < 4) {
        $(this).addClass('invalid');

        div.append('<p>Too short. Enter at least 4 characters. It’s safer.</p>');
      } else {
        $(this).addClass('valid');
        div.append('<p class="success">Success</p>');

        profile_form_data(this, true);
      }
    }
  }).focus(function() {
    $(this).removeClass('valid invalid').parent().find('p').remove();

    profile_form_data(this, false);
  });

  // username
  $('#login_register #username_register').keyup(function(ev) {
    var div = $(this).parent();

    var p = div.find('p');

    if (p.hasClass('loading') === false) {
      p.remove();
    }

    $(this).removeClass('valid invalid');
  }).blur(function(e) {
    $(this).removeClass('valid invalid');

    this.value = $.trim(this.value.replace(/[^A-Za-z0-9\_\-]/ig, ''));

    if ($(this).val() !== '' && $(this).data('status') === false && $(this).data('pending') === false) {
      $(this).parent().append('<p class="loading">Loading ...</p>');

      form_validators.username(this, $(this).val());
    } else if ($(this).val() !== '') {
      $(this).addClass('valid');
    }
  }).focus(function() {
    $(this).removeClass('valid invalid').parent().find('p').remove();

    profile_form_data(this, false);
  });

  $('#login_register').data('submitted', false);
  $('#login_register').ajaxForm({
    'beforeSerialize': function() {
      var nextStep = false, emptyInput = null;

      $.each($('#login_register input.input'), function(i, input) {
        var value = $.trim($(input).attr('value'));

        if (value !== '') {
          if ($(input).data('status') === false) {
            nextStep = false;

            if ($(input).data('pending') === true) {
              $('#login_register').data('submitted', true);

              return false;
            } else if ($(input).data('status') === false) {
              $('html, body').animate({
                'scrollTop': $(input).position().top
              }, 250, function() {
                $(input).focus();
              });

              return false;
            }
          }

          nextStep = true;
        } else {
          if (emptyInput === null) {
            emptyInput = input;

            nextStep = false;

            return false;
          }
        }
      });

      if (emptyInput !== null && nextStep === false) {
        $('html, body').animate({
          'scrollTop': $(emptyInput).position().top
        }, 250, function() {
          $(emptyInput).focus();
        });
      }

      return nextStep;
    },
    'dataType': 'json',
    'success': function(response) {
      if (response.status === false && response.errors !== undefined) {
        $.each(response.errors, function(i, error) {
          var input = $('input[name="' + error.key + '"]');

          if (input.length === 1) {
            input.addClass('invalid');

            var div = input.parent(), message = error.message;
            div.find('p').remove();

            try {
              message = input.attr('id').toLowerCase() === 'email' ? 'Huh, this email is already in use.' : message;
            } catch (e) {
            }

            div.append('<p>' + message + '</p>');
          }
        });
      } else if (response.status === true && response.url) {
        VoxioAjax.response(response, true);
      }
    }
  });

  // Login process
  $('#login_voxio').submit(function() {
    var that = this;

    if ($(that).data('submitted') === true) {
      return false;
    }

    $(that).data('submitted', true);

    $('#password').parent().find('p').remove();

    var username = $('#username'), password = $('#password'), valid = true;

    if ($.trim(username.val()) === '') {
      username.focus();

      valid = false;
    } else if ($.trim(password.val()) === '') {
      password.focus();

      valid = false;
    }

    if (valid === true) {
      $('#signin').addClass('loading');

      $.ajax({
        'url': $(this).attr('action'),
        'cache': false,
        'data': {
          'username': username.val(),
          'password': password.val()
        },
        'dataType': 'json',
        'method': 'post',
        'complete': function() {
          $(that).data('submitted', false);
        },
        'success': function(response) {
          $('#signin').removeClass('loading');

          if (response.status === true && response.url !== undefined) {
            VoxioAjax.redirect(response.url);
          } else if (response.status === false && response.message !== undefined) {
            var div = $('#password').parent();
            div.find('p').remove();
            div.append('<p>' + response.message + '</p>');
          }
        },
        'statusCode': {
          302: function() {
            VoxioAjax.redirect('/');
          }
        }
      });
    } else {
      $(that).data('submitted', false);
    }

    return false;
  }).data('submitted', false);

  // Forgot password
  $('#femail').bind('focus blur', function() {
    var value = $.trim($(this).val()), valid_email = /^([^@]+)@([^\s@.]([^\s@.]*\.[^\s@.]+)+)$/.test(value);

    $(this).removeClass('valid invalid');

    if ($(this).data('valid') === false) {
      $('#login_forgot > p').remove()
    }

    if (value !== '') {
      if (valid_email === false) {
        $(this).addClass('invalid');

        $('#login_forgot').append('<p class="invalid">Please enter a valid email address.</p>');
      } else if ($(this).data('valid') === true) {
        $(this).addClass('valid');
      }
    }
  }).data('valid', false);

  $('#login_forgot').ajaxForm({
    'beforeSubmit': function() {
      var value = $.trim($('#femail').val()), valid_email = /^([^@]+)@([^\s@.]([^\s@.]*\.[^\s@.]+)+)$/.test(value), valid = false;

      $('#femail').removeClass('valid invalid');
      $('#login_forgot > p').remove()

      if (value !== '') {
        if (valid_email === false) {
          $('#login_forgot').append('<p class="invalid">Please enter a valid email address.</p>');
          $('#femail').addClass('invalid').focus();
        } else if (valid_email === true) {
          $('#send-instructions').addClass('loading');

          valid = true;
        }
      }

      return valid;
    },
    'success': function(response) {
      $('#send-instructions').removeClass('loading');

      $('#login_forgot > p').remove();

      $('#femail').removeClass('valid invalid');

      if (response === 'success') {
        $('#femail').addClass('valid');

        $('#login_forgot').append('<p>Recovery link was sent to your email.</p>');

        $('#femail').data('valid', true);

        setTimeout(function() {
          if (animStarted === true) {
            return false;
          }

          animStarted = true;

          // Hide fields
          $('> div, > fieldset, > a', '#login_voxio').css('opacity', 0);

          // Show fields
          $('#login_voxio #username').prev().css('opacity', 1).show();
          $('#password').parent().show();

          // Show form
          $('#login_voxio').show();

          $('> p, > fieldset', '#login_forgot').animate({
            'opacity': 0
          }, 'fast', function() {
            $('> p', '#login_forgot').remove();
          });

          // Hide h1 and h2
          $('> div', '#login_forgot').animate({
            'opacity': 0
          }, 'normal', function() {
            // Hide forms
            $(forms).hide();
            // Show form
            $('#login_voxio').show();
            $('#login_voxio #username').focus();

            $('> fieldset', '#login_voxio').animate({
              'opacity': 1
            }, 'fast', function() {
              animStarted = false;

              $('#femail').attr('value', '').data('valid', true);
            });

            $('> a', '#login_voxio').animate({
              'opacity': 1
            }, 'fast');
          });

          // Show h1 and h2
          $('> div', '#login_voxio').animate({
            'opacity': 1
          }, 'normal');
        }, 2500);
      } else {
        $('#femail').addClass('invalid');

        if (response === 'invalid') {
          $('#login_forgot').append('<p class="invalid">Are you sure this is the right email address?</p>');
        } else if (response === 'error') {
          $('#login_forgot').append('<p class="invalid">Sorry an error occured :( Try again later.</p>');
        }
      }
    }
  });
})(jQuery);

$(document).ready(function() {
  var check_inputs = {
    check: function(input) {
      var value = $.trim($(input).attr('value'));
      var span = $(input).prev();

      if (value !== '') {
        $(span).hide();
      } else {
        $(span).show();
      }
    },
    init: function() {
      $.each($('div input', '#landing_forms > div > form'), function() {
        check_inputs.check(this);

        $(this).blur(function() {
          check_inputs.check(this);
        }).keyup(function() {
          check_inputs.check(this);
        }).focus(function() {
          check_inputs.check(this);
        });
      });
    }
  };

  check_inputs.init();

  $('div span', '#landing_forms > div > form').click(function() {
    $(this).next().focus();
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:28:26.043

您遇到的问题来自这样一个事实，即 show_hide 类由 Sign up 链接和 Forgot Password 链接共享，并且在您分配单击处理程序时，您可以通过它们的类引用它们：

```
$('.show_hide').click(function(){
$(".login").slideToggle("slow");  });

$('.show_hide').click(function(){
$(".signup").slideToggle("slow");  }); 
```

Mi 建议您使用 ids 而不是 clases 来引用您的链接，例如：

```
<h2>New to vox.io? <a id="show_hide_sign_up" href="#" class="show_hide">Sign up</a></h2>
…
<a id="show_hide_forgot_pass" href="#" class="show_hide">Forgot password?</a> 
```

当您分配处理程序时，将如下所示：

```
$('#show_hide_log_in').click(function(){
$(".login").slideToggle("slow");  });

$('#show_hide_sign_up').click(function(){
$(".signup").slideToggle("slow");  });

$('#show_hide_forgot_pass').click(function(){
$(".forgot").slideToggle("slow");  }); 
```

要更改动画，您只需将 slideToggle() 更改为fadeIn()，更多效果可以在这里查看：http: [//api.jquery.com/category/effects/](http://api.jquery.com/category/effects/)

# jquery - 如何获取使用 jQuery 表排序器单击的列的名称

> ID：11266032
> 
> 赞同：3
> 
> 时间：2012-06-29T17:06:54.377
> 
> 标签：jquery, tablesorter

我正在使用 jQuery tablesorter 插件对 asp.net 应用程序中的 gridview 进行排序。我可以捕获列索引，但似乎无法弄清楚如何获取列名。

这就是我正在做的事情：

```
var currentSort;

        $('#gvTickets').tablesorter({
            // sort on the last column, order asc 
            sortList: [[9, 0]]
        }).bind("sortEnd", function(sorter) {
            currentSort = sorter.target.config.sortList;

        }); 
```

这是html：

```
<div>
<table class="stretchalltable" cellspacing="0" rules="all" border="1" id="gvTickets" style="border-collapse:collapse;">
    <thead>
        <tr>
            <th scope="col" class="header" style="cursor: pointer; ">Requester</th><th scope="col" class="header" style="cursor: pointer; ">Subject</th><th scope="col" class="header" style="cursor: pointer; ">Type</th><th scope="col" class="header" style="cursor: pointer; ">Category</th><th scope="col" class="header" style="cursor: pointer; ">Priority</th><th scope="col" class="header" style="cursor: pointer; ">Status</th><th scope="col" class="header" style="cursor: pointer; ">Due</th><th scope="col" class="header" style="cursor: pointer; ">Assigned To</th><th scope="col" class="header" style="cursor: pointer; ">Created</th><th scope="col" class="header headerSortUp" style="cursor: pointer; ">Days</th>
        </tr>
    </thead><tbody>

    <tr>
            <td>JMAULDIN</td><td><a href="ticket2.aspx?action=edit&amp;ticket_id=7827">Van Order Entry Customer Contract Lookup Display</a></td><td>Project</td><td>Portal </td><td>Normal</td><td>On Hold</td><td>&nbsp;</td><td>Nathan Baker - Doozer</td><td>27-DEC-2011</td><td>133</td>
        </tr><tr style="background-color:#E6E6E6;">
            <td>RCRITTENDEN</td><td><a href="ticket2.aspx?action=edit&amp;ticket_id=8190">Cap changes</a></td><td>Project</td><td>Portal </td><td>Normal</td><td>On Hold</td><td>&nbsp;</td><td>Nathan Baker - Doozer</td><td>02-FEB-2012</td><td>106</td>
        </tr><tr style="background-color:#E6E6E6;">
            <td>JMAULDIN</td><td><a href="ticket2.aspx?action=edit&amp;ticket_id=8796">Online SRN  -- Add email SRN like print SRN</a></td><td>Project</td><td>Portal </td><td>Normal</td><td>New</td><td>&nbsp;</td><td>Nathan Baker - Doozer</td><td>15-MAR-2012</td><td>76</td>
        </tr><tr>
            <td>JMAULDIN</td><td><a href="ticket2.aspx?action=edit&amp;ticket_id=9058">SES AST field not saving correctly.</a></td><td>Project</td><td>Portal </td><td>Normal</td><td>On Hold</td><td>&nbsp;</td><td>Nathan Baker - Doozer</td><td>20-MAR-2012</td><td>73</td>
        </tr><tr>
            <td>RAVRIETT</td><td><a href="ticket2.aspx?action=edit&amp;ticket_id=9470">Copy Project Plan (ignore deleted items)</a></td><td>Support Task</td><td>Loaned Item </td><td>Normal</td><td>New</td><td>&nbsp;</td><td>Nathan Baker - Doozer</td><td>24-APR-2012</td><td>48</td>
        </tr><tr>
            <td>TCACCAM</td><td><a href="ticket2.aspx?action=edit&amp;ticket_id=9670">WEB: Contracts Administration</a></td><td>Support Task</td><td>Portal </td><td>High</td><td>New</td><td>14-MAY-2012</td><td>Nathan Baker - Doozer</td><td>14-MAY-2012</td><td>34</td>
        </tr><tr style="background-color:#E6E6E6;">
            <td>DOOZER1</td><td><a href="ticket2.aspx?action=edit&amp;ticket_id=10041">nb test</a></td><td>Project</td><td>Portal </td><td>Normal</td><td>New</td><td>13-JUN-2012</td><td>Nathan Baker - Doozer</td><td>13-JUN-2012</td><td>12</td>
        </tr></tbody>
</table>
</div> 
```

## 更新

感谢您对 fudgey 的回复。无论我尝试什么，我似乎都无法让它工作。基本上我需要做的是在 jquery 表排序器中，我需要让 sortList 值成为一个变量。它需要看起来像这样：

```
var currentSort;

    $('#gvTickets').tablesorter({
        // sort on the last column, order asc 
        sortList: currentSort
    }).bind("sortEnd", function(sorter) {
        currentSort = sorter.target.config.sortList;

    }); 
```

我需要将 currentSort 存储在 Session 中并通过 ajax 调用检索它，然后以与上次查看时相同的方式对网格进行排序。如果用户点击页面，对网格进行排序，离开页面然后返回，只要它在会话状态的范围内，我需要以与他们上次在页面上相同的方式对其进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T05:42:07.093

使用索引从标题中查找文本 - 使用保存的内容可能更容易`headerList`（[演示](http://jsfiddle.net/Mottie/eY8uH/24/)）：

```
$('#gvTickets')
    .tablesorter({
        // sort on the last column, order asc 
        sortList: [[9, 0]]
    })
    .bind("sortEnd", function(event) {
        var table = event.target,
            currentSort = table.config.sortList,
            // target the first sorted column
            columnNum = currentSort[0][0],
            columnName = $(table.config.headerList[columnNum]).text();

        console.log(columnName);

    });​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-13T17:43:07.617

您还可以在其他任何地方（例如，在您的函数中，ajax 的开头，..）捕获它，并且仅在需要时而不是在每次单击时捕获它，这样的开销会更少：

```
lastSortList=$("#mytable")[0].config.sortList; 
```

以及在 ajax 更新后对其进行排序的示例：

```
$("#mytable").trigger("sorton", [lastSortList]); 
```

请记住在正确的范围内声明第一行。

# jquery - 使用 jquery ajax，我向外部页面发出 POST 请求。为什么它将每个 css/JS 文件作为单独的 GET 请求加载？

> ID：11266033
> 
> 赞同：0
> 
> 时间：2012-06-29T17:07:02.170
> 
> 标签：jquery, ajax

很多这样的页面就像拥有自己的 CSS 和 JS 文件的迷你应用程序。因此，请求的页面被加载，然后样式表和 javascript 文件被一一加载。当我使用 jquery .html() 输出返回的页面时，它会执行此操作。

这是“只是它的工作方式”还是我错过了什么？这是显示萤火虫控制台输出的图像的链接：http: [//freelife.com/images/fb_console.jpg](http://freelife.com/images/fb_console.jpg)

示例代码：

```
$.ajax({
async: true,
type: "POST",
url: url,
cache: false,
dataType: "text/html; charset=UTF-8",
success: function(data) {

    $("div#comp_tab").html(data);

}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:07:45.867

> 这是“只是它的工作方式”还是我错过了什么？

这是它的工作方式。当您向可能包含对其他资源（脚本、样式、图像等）的引用的 HTML 页面发送 AJAX 请求并将此 HTML 注入 DOM 时，Web 浏览器将发送单独的请求以获取这些资源为了显示它们。它们不会作为原始 AJAX 请求的一部分进行检索。

# java - 是什么导致未引用类的 ClassNotFoundException？

> ID：11266034
> 
> 赞同：2
> 
> 时间：2012-06-29T17:07:14.687
> 
> 标签：java, jar, classnotfoundexception

我在我的 Java 应用程序中尝试实现 Apache commons-compress 时遇到了一个错误：

> java.lang.ClassNotFoundException: org.apache.commons.compress.archivers.ArchiveEntry"

[我有这篇文章](http://forums.bukkit.org/threads/noclassdeffounderror-for-class-never-mentioned.71917/)中描述的完全相同的问题，除了我没有使用 Bukkit（不管是什么）。[咒骂] OP 留下了令人气愤的最后一条帖子，“无论如何，我找到了解决方案。案件已结案！” 而不是分享解决方案，所以我不知道他做了什么来解决它。

我没有使用 ArchiveEntry，而是使用 TarArchiveEntry，我假设它导入 ArchiveEntry。即使我导入了所谓的缺失类，Eclipse 也会警告未使用的导入。奇怪的是，如果我删除我的 TarArchiveEntry 导入，警告就会消失，但包含对 TarArchiveEntry 错误的引用的行。

我以前从未遇到过这个问题。似乎 TarArchiveEntry 类包含错误并且无法导入 ArchiveEntry，但我看不到包含此类基本错误的广泛使用的库，例如 apache commons。

我的暗示有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T17:33:03.733

你的 CLASSPATH 有问题。您需要将其设置为包含包含该类的库。它似乎包含在 commons-compress 中，这意味着您应该有一个名为 commons-compress.jar 或类似文件的文件，确保它在您的类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:58:01.810

我的类路径确实存在问题。在我的项目目录中，我将以下行添加到 .classpath 文件中（它是隐藏的，因此请仔细查看）：

```
 <classpathentry exported="true" kind="lib" path="/home/stockb/commons-compress-bin/commons-compress-1.4.1/commons-compress-1.4.1.jar"/> 
```

添加此行后，我不再收到 ClassNotFoundException。我不确定为什么这解决了这个问题，因为我正在使用我的 .classpath 文件中没有的其他几个库（例如 commons-fileupload-1.2.jar），它们不会因此引发任何异常。

我现在的问题是，当我将 jar 添加到 Eclipse 中的构建路径时，为什么 Eclipse 没有修改这个文件？另外，为什么我需要在我的 .classpath 文件中添加 commons-compress 而不是 commons-fileupload？

# json - 在scala中创建一个多维数组

> ID：11266036
> 
> 赞同：1
> 
> 时间：2012-06-29T17:07:27.370
> 
> 标签：json, scala

我正在解析这样的 json 对象：

```
val product_array:Option[Any] = scala.util.parsing.json.JSON.parseFull(products_json)

var product_array2 = Array()

product_array match {
case Some(p) => {
for {
  (id, desc) <- p.asInstanceOf[Map[String,Map[String,Any]]]
  (propName, propValue) <- desc
}  product_array2(id) ++ Array(propName->propValue.toString)
}
case None => test = "No products in shopping cart"
} 
```

问题是我试图用这条线创建一个多维数组：

```
product_array2(id) ++ Array(propName->propValue.toString) 
```

但它不起作用。如何在 for 循环中创建多维数组？

希望我能澄清一下：

在 PHP 中是这样的：

```
product_array2[id][propName]=propValue; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:39:02.110

如果您想访问该结构，@lpaul7 的答案会告诉您如何访问。如果要更新结构，则需要处理嵌套的不可变 Map，或者将结果确实转换为可变结构（您尝试对 Array 执行的操作）。

这有点令人讨厌：

```
import scala.util.parsing.json.JSON._

val json = """{"id": {"age": 33}}"""

val im = parseFull(json) match {
  case Some(m: Map[_, _]) => 
    m.asInstanceOf[Map[String, Any]].collect {
      case (key, value: Map[_, _]) => (key, value.asInstanceOf[Map[String, Any]])
    }
  case _ => Map.empty[String, Map[String, Any]]
} 
```

询问：

```
im("id")("age") 
```

不可变更新：

```
val updated = im + ("id" -> (im.getOrElse("id", Map.empty) + ("age" -> 44))) 
```

可变结构（对外部和内部结构都使用可变映射）：

```
import collection.{breakOut, mutable}

val mut: mutable.Map[String, mutable.Map[String, Any]] = 
   im.map { case (key, inner) => key -> mutable.Map(inner.toSeq: _*)} (breakOut) 
```

可变更新：

```
mut("id")("age") = 55 
```

* * *

换句话说，您真的需要一个无[噪音的 Scala JSON 解决方案](https://stackoverflow.com/questions/4065897/noise-free-json-processing-with-scala)，例如[Lift 的 json](https://github.com/lift/lift/tree/master/framework/lift-base/lift-json/)、[sjson](https://github.com/debasishg/sjson/wiki)或[Jerkson](https://github.com/codahale/jerkson)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:53:49.957

您可以轻松实现它：

```
import scala.util.parsing.json.JSON._

val products_json = """{"p...67890"}}"""

val product_array = 
  parseFull(products_json).get.asInstanceOf[Map[String,Map[String,Any]]]

println(product_array("product1Id")("product_name")) 
```

# iphone - SSCollectionView 边距/间距

> ID：11266037
> 
> 赞同：0
> 
> 时间：2012-06-29T17:07:27.417
> 
> 标签：iphone, ios, sstoolkit

我正在使用 SSCollectionView 显示图像，但默认间距太大。当我更改项目的大小时，它只会以相同的大小将它们显示得更大，而在行中显示的项目更少。我试图找到这方面的文档，但没有运气。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:37:48.963

我现在正在查看文档（谷歌上的第一个结果）。[关联](http://sstoolk.it/documentation/Classes/SSCollectionView)

您是否尝试过修改`rowSpacing`或`minimumColumnSpacing`？

# oracle - 为什么我的 SELECT 语句没有设置我的 COLUMN NEW_VALUE？

> ID：11266040
> 
> 赞同：0
> 
> 时间：2012-06-29T17:07:32.747
> 
> 标签：oracle, sqlplus, execute-immediate

我有以下 SQL*Plus 代码：

```
COLUMN x NEW_VALUE x2
BEGIN
   -- ...
   EXECUTE IMMEDIATE 'SELECT ''a'' x FROM dual';
   EXECUTE IMMEDIATE 'SELECT colname x FROM some_table WHERE (some_condition)';
   -- ...
END; 
```

此时，&x2 仍然为空，并且 colname 不是 NULL。如果没有别的，为什么不设置为“a”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:48:13.043

`COLUMN`是一个 SQL*Plus 客户端结构，动态 SQL 在 PL/SQL 引擎内部运行，因此没有真正的连接。我不确定你会在哪里记录不适用的东西。

我能想到的最接近的方法——假设你这样做是为了让你的动态 SQL 的结果可用于稍后在脚本中规划 SQL 语句——而是使用绑定变量：

```
var x varchar2(30);

BEGIN
    EXECUTE IMMEDIATE 'SELECT ''a'' x FROM dual' INTO :x;
END;
/

select :x from dual; 
```

您可以`:x`在任何您使用过的地方使用`&x2`，但请记住，因为它是一个绑定变量，所以您在使用它时不需要将它放在单引号中（如果它是一个 varchar）；如果你这样做：

```
select ':x' from dual; 
```

...然后你会支持文字 string `:x`，而不是`a`。

*编辑添加*

如果您特别需要`&`表格，您可以做进一步的步骤（未经测试，但看不出为什么不这样做）：

```
column x2 new_value x3
select :x as x2 from dual; 
```

...您将`&x3`有空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:07:34.823

在网络上进行数小时的测试和搜索（无果而终）之后，这是我能想到的最好的： `EXECUTE IMMEDIATE`在它自己的泡沫宇宙中运行，至少就`COLUMN`支持而言。它甚至看不到它，无论你做什么都不会。不知道为什么会这样，或者为什么在任何地方都没有记录（至少我能找到）。

# vim - ultisnips with vundle

> ID：11266046
> 
> 赞同：3
> 
> 时间：2012-06-29T17:08:12.150
> 
> 标签：vim

使用 vundle 成功安装了 ultisnips，但它不会加载，任何片段都不起作用。

这是我的 vimrc [https://bitbucket.org/panditaomesh/vimfiles/src/a542f92624b7/vimrc](https://bitbucket.org/panditaomesh/vimfiles/src/a542f92624b7/vimrc)的链接，

我无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T08:12:14.127

发现错误在调用 vundle 之前已将行文件类型注释掉。vundle 要求关闭。

# java - Quartz 调度器中监听器的真实用例

> ID：11266047
> 
> 赞同：1
> 
> 时间：2012-06-29T17:08:15.000
> 
> 标签：java, quartz-scheduler

我正在阅读并尝试使用 Quartz Scheduler，它看起来确实是一个非常好且易于使用的平台。我正在阅读 Quartz 为 Jobs、Triggers 和 Scheduler 本身提供的各种侦听器，但无法将它们与任何现实生活用例联系起来。

任何人都可以通过一些用例给我一些理解，因为这些侦听器可以在现实生活中的应用程序开发中使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:15:58.637

在我从事的产品中，我们有不同的功能，可以根据客户的特定许可证启用/禁用。

我们使用 TriggerListener 来评估是否应该根据许可证执行作业。如果客户没有获得特定功能的许可，则触发器侦听器会否决作业的执行。

因此，不必在每个作业的执行方法的开头编写类似以下的内容，

```
if (!license.isLicensed(token)) {
    logger.debug("Not executing job because of license...");
    return;
} 
```

逻辑可以集中在侦听器中，并且可以将注释添加到指定许可证令牌的每个作业的类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:34:49.430

一些 Quartz 插件^([1])构建在侦听器之上。这意味着使用侦听器可以：

*   记录作业/触发器的执行时间和结果（不敢相信 Quartz 没有记录这个开箱即用）来监控作业执行

*   根据以上信息，您可以构建完整的监控解决方案，并能够浏览已执行的任务

*   您可以创建一个侦听器，在一段时间后重新安排失败的作业

*   在某些情况下忽略作业执行

^([1] [Quartz调度器插件-隐藏的宝藏](http://nurkiewicz.blogspot.no/2012/04/quartz-scheduler-plugins-hidden.html))

# mongodb - Map/Reduce 获取 group() 结果

> ID：11266048
> 
> 赞同：0
> 
> 时间：2012-06-29T17:08:18.763
> 
> 标签：mongodb, mapreduce

我正在尝试在我们的应用程序中汇总一堆用户个人资料数据。每个用户都有一个带有性别和种族属性的嵌入式配置文件。

```
{
  'email': 'foo@email.com',
  'profile': {
    'gender': 'male',
    'ethnicity': 'Hispanic'
  }
} 
```

如果我使用这样的组功能：

```
db.respondents.group({
  key: {},
  initial: {'gender': {'male':0,'female':0}, 'ethnicity': {}, 'count': 0},
  reduce: function (user, totals) {
    var profile = user.profile;

    totals.gender[profile.gender]++;
    totals.ethnicity[profile.ethnicity] = (totals.ethnicity[profile.ethnicity] || 0);
    totals.ethnicity[profile.ethnicity]++
    totals.count++;
 }
}); 
```

我以我想要的形式得到结果：

```
{
    "gender" : {
        "male" : ###,
        "female" : ###
    },
    "ethnicity" : {
        "Caucasian/White" : ###,
        "Hispanic" : ###,
                    ...

    },
    "count" : ###
} 
```

我无法让它作为 map/reduce 命令工作，当然使用不同的 reduce 函数。我不确定如何使总数相加。他们总是不正确的。我知道reduce的输出必须与map的输入格式相同，但我觉得我在reduce工作的方式上遗漏了一些东西......

作为对@Jenna 的回应，输入如下所示：

```
{
  'email': 'foo@email.com',
  'profile': {
    'gender': 'male',
    'ethnicity': 'Hispanic'
  }
} 
```

功能是：

```
function map(){
  emit('demographics', this.profile)
}

function reduce (key, values) {
  var reduced = {'gender': {'male':0,'female':0}, 'ethnicity': {}, 'count': 0};
  values.forEach(function(value) {
    reduced.gender[value.gender]++;
    reduced['ethnicity'][value.ethnicity] = (reduced['ethnicity'][value.ethnicity] || 0);
    reduced['ethnicity'][value.ethnicity]++;
    reduced.count++;
  });
  return reduced;
} 
```

输出是：

```
{
    "_id": "demographics",
    "value": {
      "gender": {
        "male": 76.0,
        "female": 64.0
      },
      "ethnicity": {
        "Caucasian/White": 109.0,
        "Other": 5.0,
        "Asian": 10.0,
        "African-American": 8.0,
        "Hispanic": 7.0,
        "Native American": 1.0
      },
      "count": 141.0
    }
} 
```

输出不正确，因为数据库中有超过 100k 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:38:20.647

可以在先前调用的输出上再次调用 reduce 函数。正确的是，map 的输出应该与 reduce 的输出相同。您当前的 map 函数返回的内容与您的 reduce 函数不同。尝试这样的事情：

```
function map(){
  result = {'gender': {'male': 0, 'female': 0}, 'ethnicity': {}, 'count': 1};
  result['gender'][this.gender] = 1;
  result['ethnicity'][this.ethnicity] = 1;
  emit('demographics', result);
}

function reduce (key, values) {
  var reduced = {'gender': {'male':0,'female':0}, 'ethnicity': {}, 'count': 0};
  values.forEach(function(value) {
    reduced['gender']['male'] += value['gender']['male'];
    reduced['gender']['female'] += value['gender']['female'];
    for(ethnicity in value['ethnicity']){
      if(reduced['ethnicity'][ethnicity] === undefined)
        reduced['ethnicity'][ethnicity] = 0
      reduced['ethnicity'][ethnicity] += value['ethnicity'][ethnicity]
    }
    reduced['count'] += values.count;
  });
  return reduced;
} 
```

# java - BeanAlreadyExistsException - Oracle WebLogic

> ID：11266049
> 
> 赞同：5
> 
> 时间：2012-06-29T17:08:20.500
> 
> 标签：java, oracle, servlets, weblogic

我在我的网络服务器上部署了一个应用程序，现在我试图在网络服务器上部署另一个应用程序，我得到一个 BeanAlreadyExistsException。我认为这可能是因为我在两个不同的项目中有两个同名的 bean。所以我从服务器上删除了第一个项目——但是这没有用——我在部署第二个应用程序时仍然遇到了这个异常。

这是堆栈跟踪：

```
####<Jun 29, 2012 11:35:47 AM EDT> <Warning> <Deployer> <GAATLITISDAU88W> <AdminServer> <[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1340984147265> <BEA-149004> <Failures were detected while initiating deploy task for application 'jwds0002.ear'.> 
####<Jun 29, 2012 11:35:47 AM EDT> <Warning> <Deployer> <GAATLITISDAU88W> <AdminServer> <[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1340984147265> <BEA-149078> <Stack trace for message 149004
weblogic.management.DeploymentException: Unmarshaller failed
    at weblogic.application.internal.EarDeploymentFactory.findOrCreateComponentMBeans(EarDeploymentFactory.java:193)
    at weblogic.application.internal.MBeanFactoryImpl.findOrCreateComponentMBeans(MBeanFactoryImpl.java:48)
    at weblogic.application.internal.MBeanFactoryImpl.createComponentMBeans(MBeanFactoryImpl.java:110)
    at weblogic.application.internal.MBeanFactoryImpl.initializeMBeans(MBeanFactoryImpl.java:76)
    at weblogic.management.deploy.internal.MBeanConverter.createApplicationMBean(MBeanConverter.java:89)
    at weblogic.management.deploy.internal.MBeanConverter.createApplicationForAppDeployment(MBeanConverter.java:67)
    at weblogic.management.deploy.internal.MBeanConverter.setupNew81MBean(MBeanConverter.java:315)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.compatibilityProcessor(ActivateOperation.java:81)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.setupPrepare(AbstractOperation.java:295)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doPrepare(ActivateOperation.java:97)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747)
    at weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
Caused By: weblogic.descriptor.BeanAlreadyExistsException: Bean already exists: "weblogic.j2ee.descriptor.wl.ApplicationParamBeanImpl@b68b07b2(/ApplicationParams[webapp.encoding.default])"
    at weblogic.descriptor.internal.ReferenceManager.registerBean(ReferenceManager.java:231)
    at weblogic.j2ee.descriptor.wl.WeblogicApplicationBeanImpl.setApplicationParams(WeblogicApplicationBeanImpl.java:564)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.bea.staxb.runtime.internal.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:48)
    at com.bea.staxb.runtime.internal.RuntimeBindingType$BeanRuntimeProperty.setValue(RuntimeBindingType.java:539)
    at com.bea.staxb.runtime.internal.AttributeRuntimeBindingType$QNameRuntimeProperty.fillCollection(AttributeRuntimeBindingType.java:381)
    at com.bea.staxb.runtime.internal.MultiIntermediary.getFinalValue(MultiIntermediary.java:52)
    at com.bea.staxb.runtime.internal.AttributeRuntimeBindingType.getFinalObjectFromIntermediary(AttributeRuntimeBindingType.java:140)
    at com.bea.staxb.runtime.internal.UnmarshalResult.unmarshalBindingType(UnmarshalResult.java:200)
    at com.bea.staxb.runtime.internal.UnmarshalResult.unmarshalDocument(UnmarshalResult.java:169)
    at com.bea.staxb.runtime.internal.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:65)
    at weblogic.descriptor.internal.MarshallerFactory$1.createDescriptor(MarshallerFactory.java:150)
    at weblogic.descriptor.BasicDescriptorManager.createDescriptor(BasicDescriptorManager.java:323)
    at weblogic.application.descriptor.AbstractDescriptorLoader2.getDescriptorBeanFromReader(AbstractDescriptorLoader2.java:788)
    at weblogic.application.descriptor.AbstractDescriptorLoader2.createDescriptorBean(AbstractDescriptorLoader2.java:409)
    at weblogic.application.descriptor.AbstractDescriptorLoader2.loadDescriptorBeanWithoutPlan(AbstractDescriptorLoader2.java:759)
    at weblogic.application.descriptor.AbstractDescriptorLoader2.loadDescriptorBean(AbstractDescriptorLoader2.java:768)
    at weblogic.application.ApplicationDescriptor.getWeblogicApplicationDescriptor(ApplicationDescriptor.java:324)
    at weblogic.application.internal.EarDeploymentFactory.findOrCreateComponentMBeans(EarDeploymentFactory.java:181)
    at weblogic.application.internal.MBeanFactoryImpl.findOrCreateComponentMBeans(MBeanFactoryImpl.java:48)
    at weblogic.application.internal.MBeanFactoryImpl.createComponentMBeans(MBeanFactoryImpl.java:110)
    at weblogic.application.internal.MBeanFactoryImpl.initializeMBeans(MBeanFactoryImpl.java:76)
    at weblogic.management.deploy.internal.MBeanConverter.createApplicationMBean(MBeanConverter.java:89)
    at weblogic.management.deploy.internal.MBeanConverter.createApplicationForAppDeployment(MBeanConverter.java:67)
    at weblogic.management.deploy.internal.MBeanConverter.setupNew81MBean(MBeanConverter.java:315)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.compatibilityProcessor(ActivateOperation.java:81)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.setupPrepare(AbstractOperation.java:295)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doPrepare(ActivateOperation.java:97)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747)
    at weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 
```

这是 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>jwds0002</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description></description>
    <display-name>PubAlertAccessor</display-name>
    <servlet-name>PubAlertAccessor</servlet-name>
    <servlet-class>com.myPackage.PubAlertAccessor</servlet-class>
   </servlet>
 <servlet-mapping>
    <servlet-name>PubAlertAccessor</servlet-name>
    <url-pattern>/PubAlertAccessor</url-pattern>
  </servlet-mapping>
  <listener>
    <listener-class>com.myPackage.Configurator</listener-class>
  </listener>      
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-21T09:30:23.310

您可以尝试从 /base_domain/config/config.xml 中删除“ **app-deployment** ”部分，其中包含 ear/war **

**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-20T10:39:04.663

打开你的 **weblogic.xml** 文件。并查看 **library-ref** 标记。很可能有对 *webapp.encoding.default*的重复引用 （这是您的日志中提到的库）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-29T03:11:59.423

只需从 weblogic-application.xml 文件中删除多个库引用。

adf.oracle.domain

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-11-05T08:41:48.390

1.  `cd $DOMAIN_HOME`
2.  `cd config/jdbc`
3.  删除到配置的xml文件
4.  重启服务器

# javascript - Javascript 错误：返回的未定义

> ID：11266051
> 
> 赞同：0
> 
> 时间：2012-06-29T17:08:35.523
> 
> 标签：javascript, jsp

嗨，我在 JSP 中遇到了一个问题，我希望调用一个 javascript 函数：

```
<c:forEach var='item' items='${bookLogs}' varStatus="status">
...

<tr >
    <td colspan="9"><a href="javascript:expandOrCollapse(${sectionNumber}, ${item.type.name});">
</tr>

...
</c:forEach> 
```

目前我的萤火虫给了我一个错误：未定义返回。javascript:expandOrCollapse(1,%20Returned);()

我如何只传递 item.type.name 的文本值？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:13:18.937

显然，`${item.type.name}`是一个字符串，因此需要正确地转义和引用。例如，如果`${item.type.name}`是 string `returned "value" & more`，您的 HTML 输出应如下所示：

```
<a href="javascript:expandOrCollapse(1, &quot;returned \&quot;value\&quot; &amp; more&quot;);"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:19:12.023

您需要在字符串周围加上引号，否则它将被视为 javascript 变量名：

```
<a href="javascript:expandOrCollapse(${sectionNumber}, '${item.type.name}');">
//                                                     ^     quotes      ^ 
```

`sectionNumber`如果它是一个字符串，你也需要引用。如果它是一个数字，你不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:19:29.253

我想出的解决方案是结合 jbabey 和 Salman A 的答案。我添加了 jbabey 建议的引号。但它仍然需要像 Salman A 所说的那样进行 HTML 转义，所以我`f:escapeHtml`在参数之前添加了函数并且有效。

# mysql - mysql计数与多个组

> ID：11266052
> 
> 赞同：1
> 
> 时间：2012-06-29T17:08:45.303
> 
> 标签：mysql, group-by, count

出色地。我真的不知道我想要的东西是否可以通过我构建表格的方式实现。让我解释。

我有这张桌子

```
CREATE TABLE `kill_log` (
  `time` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `killer_cid` int(11) NOT NULL,
  `killed_cid` int(11) NOT NULL,
  `map` varchar(25) NOT NULL DEFAULT '',
  KEY `killer_cid` (`killer_cid`),
  KEY `killed_cid` (`killed_cid`)
) 
```

当有人在游戏中杀死某人时，它会被注册，并且在每个月底我需要通过计算被杀死的次数和被杀死的次数来计算获胜者。

我尝试用组建立一个查询，但我不知道如何计算他被杀了多少次..

```
SELECT killer_cid as char_id, count(killer_cid) as kills
FROM kill_log
WHERE `time` >= (NOW() - INTERVAL 30 DAY)
GROUP BY killer_cid
ORDER BY count(killer_cid) DESC 
```

但我真正需要的是展示

```
char_id  |  kills  |  deaths  |  points (kills - deaths) 
```

我怎么能这样做？我应该创建一个不同的表并以另一种方式注册东西吗？

我想我可以记录他们什么时候被杀和什么时候死，然后分组`char_id`并计算他们是否被杀或死了..但是..这种方法可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:22:01.803

```
SELECT U.char_ID, SUM(U.kills) as kills, SUM(U.killed) as deaths, SUM(U.kills)- SUM(U.killed) as points FROM
(
SELECT killer_cid as char_id, count(killer_cid) as kills, 0 as killed
FROM kill_log
WHERE `time` >= (NOW() - INTERVAL 30 DAY)
GROUP BY killer_cid
ORDER BY count(killer_cid) DESC

UNION

SELECT killed_cid as char_id,0 AS kills, count(killer_cid) as killed
FROM kill_log
WHERE `time` >= (NOW() - INTERVAL 30 DAY)
GROUP BY killed_cid
ORDER BY count(killer_cid) DESC
) AS U
GROUP BY U.char_ID
ORDER BY SUM(U.kills)- SUM(U.killed) DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:15:24.177

```
select
 killer.killer_cid as cid,
 count(distinct killer.killed_cid, killer.time) as kills,
 count(distinct killed.killer_cid, killed.time) as died,
 count(distinct killer.killed_cid, killer.time) - count(distinct killed.killer_cid, killed.time) as points
from kill_log as killer
left join kill_log as killed (killer.killer_cid = killed.killed_cid)
group by killer.killer_cid 
```

# java - 实现等待和通知

> ID：11266053
> 
> 赞同：2
> 
> 时间：2012-06-29T17:08:48.893
> 
> 标签：java, wait, notify, kdb

我正在尝试编写一个检查数据库运行状况的程序。程序元素的元素之一应该是程序查询数据库，然后使用等待等待 5 分钟。如果没有响应，它会通知并发送一些电子邮件。我与数据库的连接/发送电子邮件一切正常，但我无法实现等待和通知。我在一个简单的程序中阅读了 api 及其易于理解的内容，但是我真的很困惑如何在这种情况下实现它，因为我无法从静态方法中调用动态的东西。

我一直在阅读大量带有等待和通知的线程，但还没有弄清楚如何在我的程序中正确处理它。如果有人能给我一些建议，那将是一个巨大的帮助。谢谢！

```
import com.fmr.ipgt.email.*;
import java.io.File;
import java.io.IOException;
import java.util.List;
import org.jdom.Document;
import org.jdom.Element;
import org.jdom.JDOMException;
import org.jdom.input.SAXBuilder;
import javax.mail.MessagingException;

class MyResource {
synchronized void qQuery() throws Exception {
    String query = ".z.k"; // The query that is used to query q; this can be changed here.
    int version = 0;
    c qConn = null;
    qConn = new c(Main.host,Main.port); // Connect to the q database
      while (Main.healthy) {
          Object o = qConn.k(query); // Query q
          version = c.t(o);
          if(!(version==0)) {
              break; // End the process if the database responds
          }
          }
  }
  synchronized void start() throws Exception {
    Main.setHealth(false);
    Main.sendMessages();
  }
}

class MyThread implements Runnable {
  MyResource myResource;

  MyThread(String name, MyResource so) {
    myResource = so;
    new Thread(this, name).start();
  }

  public void run() {

    try {
      myResource.qQuery(); // Begin a method to query q.
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
}

public class Main {

private static String[] recipients;
private static String subject = "Database Failure";
private static String message = "The database has failed or is in a hung state";
private static String from;
static String host;
static int port;
private static String emails;
private static int minutes;
static boolean healthy = true;
public static void main(String args[]) throws Exception {

    // Import information from the configuration file
      SAXBuilder builder = new SAXBuilder();
      File xmlFile = new File("/export/home/jflt/file.xml"); // Note: The directory for the configuration file may need to be changed

      try {

        Document document = (Document) builder.build(xmlFile);
        Element rootNode = document.getRootElement();
        List list = rootNode.getChildren("parameters");
           Element node = (Element) list.get(0);

          host = node.getChildText("host");
           port = Integer.parseInt(node.getChildText("port"));
           emails = node.getChildText("emails");
           String delims = "[ ]+";
           recipients = emails.split(delims); // parse email list
           minutes = Integer.parseInt(node.getChildText("time"));
           from = node.getChildText("from");

      } catch (IOException io) {
        System.out.println(io.getMessage());
      } catch (JDOMException jdomex) {
        System.out.println(jdomex.getMessage());
      }
    MyResource unhealthy = new MyResource();
    new MyThread("MyThread", unhealthy);  // Create new Thread
    new MyThread("WaitThread", unhealthy);
    while(healthy) {
    Thread.sleep(minutes*60000); // The wrong thread is sleeping here. The main method should probably be a different thread instead which will then need to wait and the second thread will notify.
    }
    unhealthy.start(); // The database has not responded for the given time. Report that it is unhealthy.
  }
  public static void setHealth(boolean health){
      System.out.println("database unhealthy");
    healthy  = health;  
  }

  public static void sendMessages() throws MessagingException {
        System.out.println("sending emails");
      FCAPMailSender.postMail(recipients,subject,message,from);
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:37:18.650

如果要使用等待和通知，我建议您使用**Lock Interface**和**Reentrant Lock Class** from`java.util.concurrent package...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:21:27.823

安排一个`ExecutorService`发送电子邮件的任务。收到回复后，取消任务。如果超过 5 分钟，则执行线程已经发送了邮件，取消是空操作。否则，电子邮件将被中止。

* * *

这甚至不是`wait()`/`notify()`问题；线程之间没有数据传递。这是一个相当于`ExecutorService`解决方案的低级别。

```
void test() {
  Thread t = new Thread() {
    @Override
    public void run() {
      try { Thread.sleep(TimeUnit.MINUTES.toMillis(5)); } 
      catch(InterruptedException abort) { return; }
      email();
    }
  }
  t.start();
  query();
  t.interrupt();
} 
```

# dependency-injection - 将 ConstructedBy 与非泛型 For 一起使用

> ID：11266061
> 
> 赞同：0
> 
> 时间：2012-06-29T17:09:24.947
> 
> 标签：dependency-injection, inversion-of-control, structuremap

我在 StructureMap 中有这个注册

```
ObjectFactory.Initialize(x => {
    x.For<IPageModel>().UseSpecial(y => y.ConstructedBy( r => ((MvcHandler) HttpContext.Current.Handler).RequestContext.RouteData.GetCurrentModel<IPageModel>()));
}); 
```

然后我像这样在构造函数中访问这个对象

```
public HomeController(IPageModel model) {} 
```

现在我想注册实现接口 IPageModel 的所有具体类型，当被要求时，我想使用相同的 For<> 语句来获取正确的实例。

似乎我可以将 Scan 与我自己的约定一起使用来做到这一点，但我不知道该怎么做。

这是一些示例代码

```
x.Scan(scanner =>
{
    scanner.AssembliesFromApplicationBaseDirectory();
    scanner.Convention<MySpecialConvetion>();
});

public class MySpecialConvetion : IRegistrationConvention {
    public void Process(Type type, Registry registry) {
        if(type.IsAssignableFrom(typeof(IPageModel))) {
            registry.For<CONCRETE IMPLEMENTATION>().UseSpecial(y => y.ConstructedBy( r => ((MvcHandler) HttpContext.Current.Handler).RequestContext.RouteData.GetCurrentModel<CONCRETE IMPLEMENTATION>()));
        }
    }
} 
```

**编辑：**似乎我需要使用非泛型 For，但是如何使用非泛型 For 处理我自己的构造？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:07:14.457

我通过创建一个通用方法定义来完成这项工作，并使用反射来填充类型。显示比解释容易：

```
 public class MySpecialConvetion : IRegistrationConvention
    {
        public static readonly MethodInfo RegisterMethod = typeof (MySpecialConvetion)
            .GetMethod("Register", BindingFlags.NonPublic | BindingFlags.Static)
            .GetGenericMethodDefinition();

        public void Process(Type type, Registry registry)
        {
            if (type.IsAssignableFrom(typeof (IPageModel)))
            {
                var specificRegisterMethod = RegisterMethod.MakeGenericMethod(new[] { type });
                specificRegisterMethod.Invoke(null, new object[] { registry });
            }
        }

        static private void Register<T>(Registry registry)
            where T : IPageModel
        {
            registry
                .For<T>()
                .UseSpecial(y => y.ConstructedBy(r => GetCurrentPageModel<T>()));
        }

        static private T GetCurrentPageModel<T>()
            where T : IPageModel
        {
            var handler = (MvcHandler) HttpContext.Current.Handler;
            if (handler == null)
                return default(T);
            return handler.RequestContext.RouteData.GetCurrentModel<T>();
        }
    } 
```

我添加了一个中间步骤并检查了一个空处理程序，因为我的站点中没有一个。但这应该会为您提供所需的缺失部分。

# javascript - 将事件绑定到 jqgrid 中的添加对话框选择输入

> ID：11266065
> 
> 赞同：0
> 
> 时间：2012-06-29T17:09:30.857
> 
> 标签：javascript, jquery, jqgrid

我有一个启用了添加对话框以添加新行的 jqgrid。我希望它的工作方式是用户将从下拉项目列表中进行选择，并且选择的项目将导致第二个下拉列表填充基于第一个项目的数据。

例如，如果我的网格有两列，一列代表国家，一列代表州，当用户单击添加按钮时，国家输入将是一个下拉列表，通过 ajax 调用动态填充国家。然后，当用户选择一个国家/地区时，将根据所选国家/地区填充州下拉菜单。

目前我正在做类似以下的事情：

```
 beforeProcessing: function () {
                var allcountries = ajaxcall();
                $('#clientReportsGrid').setColProp('Countries', { editoptions: { value: allcountries, class: 'edit-select' }, editrules: { required: true, edithidden: true} });
            },
            loadComplete: function () {
                $('#Countries').change(function () {
                    // States will be populated here
                    alert("changed");
                });
            } 
```

beforeProcessing 的第一部分工作正常，并且按预期填充国家下拉列表。但是，loadComplete 中的事件不会附加到 ID 为“Countries”的选择输入，并且永远不会发生警报。似乎尚未使用 loadComplete 触发创建选择对象，但如果是这种情况，我不确定将填充状态的逻辑放置在何处。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:24:44.877

jqGrid 没有对依赖选择的直接支持，但在[答案](https://stackoverflow.com/a/4480184/315935)中您会找到该场景的实现。最大的问题是代码不小，但分析一个工作代码就像编写自己的代码一样快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:25:36.580

我最终做了类似以下的事情，它有点多余，但它可以工作并且代码不太重：

首先，在 beforeProcessing 回调中，我用它们的初始值填充国家和州下拉列表：

```
beforeProcessing: function () {
            var allcountries = ajaxCallToFetchCounties();
            $('#clientReportsGrid').setColProp('Countries', { editoptions: { value: allcountries, class: 'edit-select' }, editrules: { required: true, edithidden: true} });
            var states = ajaxCallToFetchStates();
            $('#clientReportsGrid').setColProp('States', { editoptions: { value: states , class: 'edit-select' }, editrules: { required: true, edithidden: true} });
        } 
```

然后在寻呼机的添加选项中，我使用 beforeShowForm 回调将一个方法附加到国家/地区选择输入的更改事件，并在该方法中，我根据当前国家/地区获取状态并重新填充选择控件：

```
beforeShowForm: function (form) {
                $("#Countries").unbind("change").bind("change", function () {
                    var states = ajaxCallToFetchStates();
                    //Manually clear and re-populate the states select box here with the new list of states.
                });
                $('#tr_AccountCode', form).show();
            } 
```

# python - Python：避免使用打印命令换行

> ID：11266068
> 
> 赞同：144
> 
> 时间：2012-06-29T17:09:34.633
> 
> 标签：python, printing, newline, python-2.5

我今天开始编程，遇到了 Python 的这个问题。这很愚蠢，但我不知道该怎么做。当我使用 print 命令时，它会打印我想要的任何内容，然后转到另一行。例如：

```
print "this should be"; print "on the same line" 
```

应该返回：

> 这应该在同一行

而是返回：

> 这应该
> 在同一行

更准确地说，我试图创建一个程序`if`，告诉我一个数字是否是 2

```
def test2(x):
    if x == 2:
        print "Yeah bro, that's tottaly a two"
    else:
        print "Nope, that is not a two. That is a (x)" 
```

但它不会将最后一个识别`(x)`为输入的值，而是准确打印：“（x）”（带括号的字母）。为了使它工作，我必须写：

```
print "Nope, that is not a two. That is a"; print (x) 
```

如果我输入`test2(3)`，则给出：

> 不，那不是2，那是
> 3

因此，要么我需要让 Python 将打印行内的我的 (x) 识别为数字；或打印两个不同的东西，但在同一行。在此先感谢并为这样一个愚蠢的问题感到抱歉。

**重要提示**：我使用的是**2.5.4 版**

另一个注意事项：如果我`print "Thing" , print "Thing2"`在第二次打印时说“语法错误”。

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-06-29T17:10:44.127

在**Python 3.x**中，您可以使用函数的`end`参数`print()`来防止打印换行符：

```
print("Nope, that is not a two. That is a", end="") 
```

在**Python 2.x**中，您可以使用尾随逗号：

```
print "this should be",
print "on the same line" 
```

但是，您不需要它来简单地打印变量：

```
print "Nope, that is not a two. That is a", x 
```

请注意，尾随逗号仍然会导致在行尾打印一个空格，即它等同于`end=" "`在 Python 3 中使用。要抑制空格字符，您可以使用

```
from __future__ import print_function 
```

访问 Python 3 打印功能或使用`sys.stdout.write()`.

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2012-06-29T17:18:04.533

在**Python 2.x**中，只需在语句`,`的末尾添加一个。`print`如果您想避免在项目之间放置空格`print`，请使用`sys.stdout.write`.

```
import sys

sys.stdout.write('hi there')
sys.stdout.write('Bob here.') 
```

产量：

```
hi thereBob here. 
```

请注意，两个字符串之间*没有换行符*或*空格。*

在**Python 3.x**中，使用它的[print() 函数](http://docs.python.org/release/3.1.5/library/functions.html#print)，你可以说

```
print('this is a string', end="")
print(' and this is on the same line') 
```

并得到：

```
this is a string and this is on the same line 
```

还有一个名为的参数`sep`，您可以使用 Python 3.x 在 print 中设置它来控制相邻字符串的分隔方式（或不取决于分配给 的值`sep`）

例如，

**Python 2.x**

```
print 'hi', 'there' 
```

给

```
hi there 
```

**Python 3.x**

```
print('hi', 'there', sep='') 
```

给

```
hithere 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-29T17:18:07.763

如果您使用的是 Python 2.5，这将不起作用，但对于使用 2.6 或 2.7 的人，请尝试

```
from __future__ import print_function

print("abcd", end='')
print("efg") 
```

结果是

```
abcdefg 
```

对于使用 3.x 的用户，这已经是内置的。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-29T17:16:08.013

你只需要这样做：

```
print 'lakjdfljsdf', # trailing comma 
```

然而在：

```
print 'lkajdlfjasd', 'ljkadfljasf' 
```

有隐式空格（即`' '`）。

您还可以选择：

```
import sys
sys.stdout.write('some data here without a new line') 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-29T17:11:52.857

使用尾随逗号来防止出现新行：

```
print "this should be"; print "on the same line" 
```

应该：

```
print "this should be", "on the same line" 
```

此外，您可以通过以下方式将传递的变量附加到所需字符串的末尾：

```
print "Nope, that is not a two. That is a", x 
```

您还可以使用：

```
print "Nope, that is not a two. That is a %d" % x #assuming x is always an int 
```

您可以使用运算符（模数）访问有关字符串格式的其他[文档。](http://docs.python.org/library/stdtypes.html#string-formatting-operations)`%`

# python - 在 PyQt 中嵌入 Matplotlib

> ID：11266075
> 
> 赞同：0
> 
> 时间：2012-06-29T17:09:49.563
> 
> 标签：python, matplotlib, pyqt, backend

我正在尝试测试 Matplotlib 是否在 Ubuntu 上的 PyQt 中工作。我一直在使用 PyQt，我想在 Pyqt 中嵌入 Matplotlib。我遵循了[http://eli.thegreenplace.net/2009/01/20/matplotlib-with-pyqt-guis/](http://eli.thegreenplace.net/2009/01/20/matplotlib-with-pyqt-guis/)给出的代码，但是在导入`matplotlib`.

```
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
  File "/usr/lib/pymodules/python2.6/matplotlib/backends/backend_qt4agg.py", line 9, in <module>
    from matplotlib.figure import Figure
  File "/usr/lib/pymodules/python2.6/matplotlib/figure.py", line 18, in <module>
    from axes import Axes, SubplotBase, subplot_class_factory
  File "/usr/lib/pymodules/python2.6/matplotlib/axes.py", line 2, in <module>
    import math, sys, warnings, datetime, new
  File "/home/kasa/Desktop/new.py", line 25, in <module>
    from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
ImportError: cannot import name FigureCanvasQTAgg 
```

我从终端运行这些导入命令，它工作正常。有人可以弄清楚我的安装有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T06:40:41.300

阅读回溯。

您尝试`FigureCanvasQTAgg`从以下位置导入`backend_qt4agg`：

```
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas 
```

它试图`Figure`从以下位置导入`figure`：

```
 File "/usr/lib/pymodules/python2.6/matplotlib/backends/backend_qt4agg.py", line 9, in <module>
    from matplotlib.figure import Figure 
```

它试图从以下位置导入一些东西`axes`：

```
 File "/usr/lib/pymodules/python2.6/matplotlib/figure.py", line 18, in <module>
    from axes import Axes, SubplotBase, subplot_class_factory 
```

它还导入了几个模块。注意最后一个，`new`：

```
 File "/usr/lib/pymodules/python2.6/matplotlib/axes.py", line 2, in <module>
    import math, sys, warnings, datetime, new 
```

它在哪里寻找它？它不是内置模块，而是

```
 File "/home/kasa/Desktop/new.py", line 25, in <module> 
```

其中，我想是你的文件，它又回来了：

```
 from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas 
```

Python 意识到它无法导入`FigureCanvasQTAgg`，因为它发现自己处于循环导入地狱中，因此出现错误：

```
ImportError: cannot import name FigureCanvasQTAgg 
```

**长话短说**

您的文件掩盖了内置[`new`模块](http://docs.python.org/library/new.html)。解决方案很简单：重命名文件（并`new.pyc`从文件夹中删除）。

# fork - 使用 fork() 和 execl(...) 时父进程未结束

> ID：11266076
> 
> 赞同：0
> 
> 时间：2012-06-29T17:09:58.620
> 
> 标签：fork

我是使用 linux 编程的新手，我试图了解 fork() 和 exec 函数是如何工作的。为了让自己更容易，我创建了一个简单的 Dummy 可执行文件（使用 gcc -o Dummy.exe ...）并尝试调用 fork 函数，以便我可以用我创建的 Dummy.exe 可执行文件替换孩子。

我遇到的问题是，当我运行代码时，它会显示 Dummy.exe 的内容，但是，我没有看到任何过去的内容 - 意思是，我没有看到父进程结束。

当我运行我的代码 Ex1.cpp 时，我得到了输出：

```
 Program is Running
    --- ****** ---
    Ended

    me@mdev> 
```

我可以让程序结束的唯一方法是按回车键 - 你会在单词 Ended 之后看到一个空白行。

这是我的 Ex1.cpp 中的代码

```
#include <iostream>
using namespace std;

int main()
{
        pid_t retVal;
        int newStatus;

        switch(retVal = fork())
        {
                case -1:
                cout<<"Error occured with fork"<<endl;
                break;
                case 0:
                cout<<"Child forked"<<endl;
                newStatus = execl("Dummy.exe","Dummy.exe", NULL);
                break;
                default:
                cout<<"Parent has a new child: "<<retVal<<endl;
        }

        cout<<"Ended ..."<<endl;
        return 0;
} 
```

我的 Dummy.cpp 代码如下：

```
#include <iostream>
using namespace std;

int main()
{
        cout<<"Program is Running"<<endl;
        cout<<"--- ****** ---"<<endl;
        cout<<"Ended"<<endl;

        return 0;
} 
```

我的背景是 Windows 开发，这一切对我来说都是新的 - 感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:30:47.633

```
#include <iostream> 
```

使用命名空间标准；

int main () { pid_t retVal;

```
 int newStatus;

    int returnStatus;

    if (retVal = fork() < 0)
    {
        cout << "Error on fork" << endl;
        exit (1);
    }   

    // Child process
    else if (retVal == 0)
    {
        // No code is executed after an exec statement
        newStatus = execl("./Dummy", "Dummy", NULL);
    }

    else
    {
        // This waits for the child to finish and clean up
        waitpid(retVal, &returnStatus, NULL);
    }

return returnStatus; 
```

}

在您的情况下使用 switch 语句不是一个好主意，因为在 exec 语句之后没有执行任何代码。您可以通过在命令提示符下键入 man 2 exec 阅读手册页来进一步阅读。此外，等待孩子成功退出总是一个好主意，这就是 waitpid 函数的作用。试试这个，让我知道它是否有效，如果您还有任何问题。

# eclipse - Eclipse 堆空间（内存不足错误）

> ID：11266077
> 
> 赞同：6
> 
> 时间：2012-06-29T17:10:02.340
> 
> 标签：eclipse

我在eclipse中面临内存问题。最初我收到此错误：“未处理的事件循环异常 java 堆空间”，有时还有“发生内存不足错误”。

我以某种方式设法将堆大小增加到 -Xmx990m。但它仍然无法正常工作。当我尝试增加堆大小超出此范围时，在启动 Eclipse 时出现错误“无法创建虚拟机”。

我试图在 eclipse.ini 文件中进行其他更改。当我更改 XXMaxPermSize 时，它​​给了我“permGen 内存错误”。有几次，我遇到了不同类型的错误，例如“超出未处理的事件循环异常 GC 开销限制”和 2-3 种不同类型的错误。请帮助我做些什么会很棒！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T17:22:06.280

Jeshurun 关于购买更多 RAM 的有点轻率的评论实际上是相当准确的。Eclipse 是一只记忆猪！现在在我的机器上，Eclipse 使用的是 2.1GB；可不是闹着玩的。如果您希望能够真正有效地使用具有所有出色功能的 Eclipse，那么您确实需要大量内存。

话虽如此，有一些方法可以使用更少内存的 Eclipse。我发现的最大帮手是禁用所有验证器（检查窗口>首选项>验证下的“暂停所有验证器”；仅禁用单个验证器并没有足够的帮助）。另一个常见的内存吸收来源是插件。如果您要保持当前的内存限制，我强烈建议您：

1.  卸载当前的 Eclipse
2.  下载 Eclipse 的核心/独立/仅 Java 版本（文件大小最小/没有内置插件的版本）
3.  尝试使用它一段时间，看看性能如何。如果没问题，请尝试安装您喜欢的插件，一次安装一个。永远不要安装多个，并给每个一个一两个星期的试用期。
4.  您可能会发现某些插件会显着增加内存使用量；不要使用那些（或者如果你这样做，获得更多的内存）。

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T11:56:44.207

我也遇到了同样的问题。我按照以下步骤进行构建解决了。

-->右键项目选择RunAs->运行配置

选择您的项目作为 BaseDirectory。代替目标给 eclipse:eclipse install

--> 在第二个选项卡中，将**-Xmx1024m**作为 VM 参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-19T09:33:03.480

我遇到了类似的情况。我的程序必须运行模拟 10000 次试验。我试过 -Xmx1024m ：它仍然崩溃了。

然后我意识到我的程序有太多东西要放在控制台上；我的控制台显示内存可能会OOB。

**简单的解决方案=>右键单击控制台>首选项>检查限制控制台输出>输入缓冲区大小（字符）[默认值：80000]。**

我没有选中它来分析单次运行，但是当最终运行有 10000 次试验时，它开始崩溃，超过 500 次试验。

今天是这一天：我想了三遍，Java 编程如何帮助我跳过整个工作内存释放，并为此诅咒 C。我在这里，花了最后 2 1/2 小时来寻找如何强制 GC，如何释放变量（顺便说一句，不需要）。

祝你有美好的一天！

# google-drive-api - Google Drive .NET API 版本 2 DLL

> ID：11266079
> 
> 赞同：0
> 
> 时间：2012-06-29T17:10:05.597
> 
> 标签：google-drive-api

Google 有一个使用 Google Drive .NET 版本 2 库的示例：

[https://developers.google.com/drive/v2/reference/files/list#examples](https://developers.google.com/drive/v2/reference/files/list#examples)

我找不到将 DLL 下载到我的系统的地方。

请指教。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:28:26.497

新的 dll 将很快在[http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Drive_API上提供](http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Drive_API)

# actionscript-3 - 访问未定义的属性键盘 (AS3)

> ID：11266080
> 
> 赞同：0
> 
> 时间：2012-06-29T17:10:06.767
> 
> 标签：actionscript-3

我是 Actionscript 3 的新手，我希望使用键盘上的向下箭头允许一个圆圈向下移动。这是我的代码：

```
package  {

import flash.display.MovieClip;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

public class Circle extends MovieClip {

    public function Circle() {
        // constructor code
        var speed:int = 3;

        addEventListener(KeyboardEvent.KEY_DOWN,keyIsDown);

        function keyIsDown(event:KeyboardEvent) {
            if(event.keyCode == Keyboard.DOWN) {
                y = y+=speed;
            }
        }
    }

}

} 
```

当我测试它时，当我按下向下键时没有任何反应。有人知道代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:21:47.000

尝试将键盘事件添加到舞台而不是类。此外，我不会嵌套这样的函数，一般来说是不好的做法。这条线`y = y+=speed;`也令人困惑，不应该是`y += speed;`吗？

编辑：对不起，我猜阶段在构造函数中将为空，我添加了一个 ADDED 事件侦听器。

尝试这个：

```
package  {

    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.ui.Keyboard;

    public class Circle extends MovieClip {

        public function Circle() {
            // constructor code
            var speed:int = 3;

            addEventListener(Event.ADDED, onAdded);        
        }

        private function onAdded(event:Event) {
            stage.addEventListener(KeyboardEvent.KEY_DOWN,keyIsDown);
        }

        private function keyIsDown(event:KeyboardEvent) {
            if(event.keyCode == Keyboard.DOWN) {
                 y += speed;
            }
        }

    }
} 
```

# twitter-bootstrap - 运行 `make` 不再缩小 /assets/css v.2.0.4 中的 CSS

> ID：11266082
> 
> 赞同：0
> 
> 时间：2012-06-29T17:10:11.107
> 
> 标签：twitter-bootstrap, twitter-recess

`make`在 /bootstrap 目录 v2.0.4 中运行不再缩小 bootstrap.css。我可以为构建过程设置一个标志吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:01:15.460

我现在要做的是，一旦对 less 文件的任何更改完成，我运行 make，然后使用 --compress true 对两个引导 css 文件手动运行凹槽，并将它们的输出设置为 {filename}-min.css。

# javascript - CKEditor - 反映样式，也包括具有复杂选择器的样式

> ID：11266094
> 
> 赞同：0
> 
> 时间：2012-06-29T17:11:01.140
> 
> 标签：javascript, html, css, css-selectors, ckeditor

我用来`config.ContentsCss`将实时站点的样式加载到编辑器中：

`config.contentsCss = ['../css/reset.css','../css/screen.css'];`

**但是**，许多元素都有更复杂的选择器，例如`#content h2`，并且由于编辑器只处理**内部的元素** `<div id="content"> »» WHAT THE EDITOR SEES «« </div>`

**示例**- H2 元素：

在里面`screen.css`我有这个选择器：

```
#content h2 { color: #76828A !important; text-decoration: none !important; } 
```

在实时页面中，它确实正确显示了元素，但由于编辑器只加载**里面** `#content`的文本，所以它没有正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:14:37.203

作为参考，我在CKEditor论坛发帖时回答了这个问题：[http ://cksource.com/forums/viewtopic.php?f=6&t=25962](http://cksource.com/forums/viewtopic.php?f=6&t=25962)

# gwt - 我什么时候应该使用 GWT 小部件（解释）？

> ID：11266097
> 
> 赞同：1
> 
> 时间：2012-06-29T17:11:06.290
> 
> 标签：gwt, optimization, widget

我正在做一个 GWT 应用程序，速度跟踪器说绘画过程需要很长时间，所以阅读 pdf 的：Google 2010 - IO session ("Architecting for performance with GWT")，出现这句话：

> 我什么时候应该使用小部件？
> 当组件必须接收事件并且
> 无法在父小部件中捕获事件时

我同意第一个条件（我想使用小部件，因为我的组件，例如 textBox 或图像必须接收事件，例如 MouseOver、MouseClick ...），但我的问题涉及第二个条件。事实上，我不明白**在这种情况下**应该**没有办法**在父小部件中捕获事件，因为它（“总是”）可以访问任何使用 Javascript 操作 DOM 的元素/组件。在这里，我假设使用 Javascript 我可以访问小部件（使用 ui:field 例如在 ui:binder 中标识）元素和 DOM 元素（使用 id="" 标识）。

那么你能告诉我为什么我错了，或者在“无法在父小部件中捕获事件”时给我一个例子吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:47:39.350

它更多地是关于“没有*简单*的方法来放置可以在父小部件中捕获事件的代码”。这都是关于组件化的：您不希望将事件处理代码放在组件之外，也不希望将事件处理代码附加到组件外部的元素上。所以组件仍然是小部件，但在它们内部尝试尽可能多地使用 HTML 和事件冒泡。

在实践中，这意味着在复合材料中使用`HTMLPanel`（或者`RenderablePanel`为了更好的性能，如果你使用 2.5.0 RC1 并且你有点冒险），否则使用`CellWidget`（[`UiRenderer`](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Rendering_HTML_for_Cells)为了便于处理从特定子元素冒泡的事件）

# java - nvarchar 的使用有多糟糕

> ID：11266098
> 
> 赞同：1
> 
> 时间：2012-06-29T17:11:18.173
> 
> 标签：java, sql-server

我们的软件部署在他们遇到性能问题的客户站点，他们聘请了一位 SQL 顾问来查看数据库并了解他们的瓶颈在哪里。

顾问发现的一件事是，我们的许多陈述都转换为`nvarchar`. 经过一番调查，我发现它是`PreparedStatement`这样做的。

给你举个例子：

```
PreparedStatement query = connection.prepareStatement("SELECT * FROM sys.tables WHERE"
        + " name LIKE ?");
query.setString(1, "%%"); 
```

变成

```
declare @p1 int
set @p1=1
exec sp_prepexec @p1 output,N'@P0 nvarchar(4000)',N'SELECT * FROM sys.tables WHERE name LIKE @P0        ',N'%%'
select @p1 
```

另一方面，adhoc executeQuery 方法只是通过发送 SQL

```
ResultSet rs = connection.createStatement().executeQuery("SELECT * FROM sys.tables WHERE  name LIKE '%%'"); 
```

变成

```
SELECT * FROM sys.tables WHERE  name LIKE '%%' 
```

我正在努力解决的是这实际上有多糟糕。准备好的语句在我们的整个应用程序中都使用，因为它们的使用应该比即席查询更有效（如果执行多次）。

此外，我看不出微软的人会在他们的驱动程序中加入一些他们知道会导致性能问题的东西。

这是我们真正应该研究的问题，还是顾问正在寻找根本不存在的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:17:36.410

pepared 语句强制查询成为参数化查询（这是一件好事），而 ad-hoc 查询可能会或可能不会被 SQL 引擎自动参数化。简而言之，它不会对性能造成重大影响。

但是，从设计的角度来看，是否应该使用参数化存储过程（不一定是性能方面的）总是存在很多争论。我认为大多数 DBA（可能还有数据库顾问）更喜欢存储过程，因为它们更容易使用传统的数据库管理工具进行调试（以及提供安全优势，并且默认情况下包括参数化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T06:47:23.340

Prepared statements 具有比 ad-hoc 查询更多的优化选项，并且从安全角度来看通常会更好（设计上没有 SQL 注入）。

**nvarchar**的使用通常来自非功能性需求。如果您希望您的应用程序支持任何现在很常见的 Unicode 字符，那么您需要它。如果这是要求，请不要更改它。

我认为**LIKE**查询是罪魁祸首，您实际上应该查看后端数据库中的全文索引功能。该查询看起来超级简单，它是 LIKE '%' 查询导致扫描每个字段中的字符序列。

# node.js - Node.js - 如何使用 mongoose db 创建唯一 id

> ID：11266100
> 
> 赞同：2
> 
> 时间：2012-06-29T17:11:31.900
> 
> 标签：node.js, mongodb, mongoose

我正在使用 Twitter 身份验证，并希望将 twitter id 作为唯一密钥存储在 mongodb 中。但是我看到多个具有相同 ID 的条目。这是我的架构和代码

架构：

```
var TwitterSchema = new Schema({
    accessToken: String,
    accessTokenSecret: String,
    name: String,
    twitterId: { type: String, required: true, index: { unique: true, sparse: true } }
}); 
```

代码：

```
 mongoose.connect('mongodb://localhost/twd')
        mongoose.model('Post', TwitterSchema);    
        var Post = mongoose.model('Post');

        var post = new Post();
        post.accessToken = accessToken
        post.accessTokenSecret = accessTokenSecret
        post.name = twitterUserData.name
        post.twitterId = twitterUserData.id

        post.save(function(err){
            if (err){
                throw err;
                promise.fail(err);
             }
            console.log('saved');
            mongoose.disconnect();
        });

        promise.fulfill(post); 
```

数据库外壳输出

```
> db.posts.find();
{ "twitterId" : "21475255", "name" : "MMMK", "accessTokenSecret" : "ZYhiXMWfXvSr1aaCB93hgU243j8aapP0ALdSFlWEE", "accessToken" : "22475255-9YvKMceUInUIxcEtKAK0oMRRG2ZZxn5c52vnwPw", "_id" : ObjectId("4feddf6155203990e000001") }
{ "twitterId" : "21475255", "name" : "MMMK, "accessTokenSecret" : "ZYhiXMWfXvSr1aaCB93hgU2438aapP0ALdSFlWEE", "accessToken" : "22475255-9YvKMceUInUIxcEtKAK0oMRRG2ZZxn5c52vnwPw", "_id" : ObjectId("4feddf7b5905a1a10e000001") } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:23:18.680

我的猜测是没有在 MongoDB 中创建索引，或者同名的索引已经存在。如果它已经存在，mongoose 将使用`ensureIndex`它来创建它，但如果它已经存在，则不会覆盖/重新定义它。使用 mongo js shell 查看它是否存在，然后尝试删除它，重新启动 mongod，然后再次运行您的 node.js 代码。

[http://www.mongodb.org/display/DOCS/Indexes#Indexes-CreationOptions](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CreationOptions)

# javascript - Javascripts innerHTML 不适用于图像，但适用于文本？

> ID：11266104
> 
> 赞同：4
> 
> 时间：2012-06-29T17:11:58.050
> 
> 标签：javascript, innerhtml

好的，我有一个javascript函数，当用户更改选择下拉框的选项时，它会切换div标签的innerhtml。

这一切都适用于文本，但使用图像标签它会停止工作？

工作示例...

```
function toggle(opt) {
        var d = document.getElementById('div_tag');
        if (opt == '5') {
                d.innerHTML = 'FIVE';
        }
        else if (opt == '4') {
                d.innerHTML = 'FOUR';
        }
        etc...
} 
```

不工作的例子...

```
function toggle(opt) {
        var d = document.getElementById('div_tag');
        if (opt == '5') {
                d.innerHTML = '<img src='path/img1.jpg'><img src='path/img2.jpg'>';
        }
        else if (opt == '4') {
                d.innerHTML = '<img src='path/img2.jpg'><img src='path/img1.jpg'>';
        }
        etc...
} 
```

这就是我的 select 和 div 标签上的内容。

```
<select onchange='toggle(this.value);'>
<div id='div_tag'></div> 
```

任何人都告诉我我在这里做错了什么，因为我被难住了..当所有不同的是一个是另一个是文本时，为什么一个工作而不是另一个工作？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T17:16:21.050

在我看来，您似乎忘记转义图像路径周围的引号，并且它没有正确读取您的字符串，试试这个

```
function toggle(opt) {
    var d = document.getElementById('div_tag');
    if (opt == '5') {
            d.innerHTML = '<img src=\'path/img1.jpg\'><img src=\'path/img2.jpg\'>';
    }
etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:15:14.213

做这些更改，在开头和结尾`'`替换为。`"`

```
function toggle(opt) {
        var d = document.getElementById('div_tag');
        if (opt == '5') {
                d.innerHTML = "<img src='path/img1.jpg'><img src='path/img2.jpg'>";
        }
        else if (opt == '4') {
                d.innerHTML = "<img src='path/img2.jpg'><img src='path/img1.jpg'>";
        }
        etc...
} 
```

您实际上使用的是单引号而不是双引号。`path/img1.jpg`,`path/img2.jpg`之前没有被视为字符串的一部分。这就是问题所在。

**更新** 为您的php问题执行此操作：

```
function toggle(opt) {
        var d = document.getElementById('div_tag');
        if (opt == '5') {
                d.innerHTML = '<img src='+'path/img1.jpg'+'><img src='+'path/img2.jpg'+'>';
        }
        else if (opt == '4') {
                d.innerHTML = '<img src='+'path/img2.jpg'+'><img src='+'path/img1.jpg'+'>';
        }
        etc...
} 
```

# c++ - 使用 QTcpSocket 连接到 20 个不同的服务器后遇到超时

> ID：11266106
> 
> 赞同：0
> 
> 时间：2012-06-29T17:12:24.150
> 
> 标签：c++, qt, sockets, networking, tcp

我在使用 QTcpSocket 时遇到了一个奇怪的问题，我在网上搜索过，但找不到其他有同样问题的人。

我有两个基本应用程序，一个客户端和一个服务器，如果我在本地机器上运行它们，客户端成功地与服务器建立所有 50 个连接。

如果我在连接到网络的另一台计算机上运行服务器（比如说：10.1.1.1），它每次都会再次连接而不会出现问题。

现在，如果我更改服务器的 main.cpp 以在不同端口（8001 到 8050）下初始化多个服务器，并更改客户端以与每个服务器建立一个连接。两者都在本地运行，它仍然可以正常工作。

```
int main(int argc, char** argv) {
  QCoreApplication app(argc, argv);

  for (int i = 8001; i <= 8050; ++i) {
    Server server(i);
    return app.exec();
  }
} 
```

但是，如果我将服务器放在 10.1.1.1 上并再次尝试，那么我会毫无问题地连接到前 20 个，但是在连接到下一个 20 之前它会挂起一段时间（超过 5 秒），依此类推直到所有连接。

作为最终测试，我将服务器实例放在另一台机器（10.1.1.2）上，并在每台机器上创建了 15 个服务器实例，并尝试连接到这两个实例我遇到了同样的问题。第一台机器的所有 15 台机器都连接良好，第二台机器的下 5 台机器在挂起之前也是如此，直到最终连接到最后 10 台机器。

这是在 Qt 版本 4.7.2 上。我在 Fedora 17、Windows 7 上遇到过这个问题，但在Scientific Linux 6 上**没有。**

客户端/服务器的代码包含在下面，我删除了所有包含以节省一些垂直空间：

# 客户

## 客户端.h

```
class Client: public QObject {
  Q_OBJECT

public:
  Client(QObject* parent = 0);
  ~Client();
  void start(QString address, quint16 port);

public slots:
  void startTransfer();
  void disconnect() { qDebug("disconnect"); }

private:
  QTcpSocket client;
}; 
```

## 客户端.cpp

```
Client::Client(QObject* parent): QObject(parent) {
  connect(&client, SIGNAL(connected()), this, SLOT(startTransfer()));
  connect(&client, SIGNAL(disconnected()), this, SLOT(disconnect()));
}

Client::~Client() {
  client.close();
}

void Client::start(QString address, quint16 port) {
  QHostAddress addr(address);
  qDebug(QString("connecting to %1:%2").arg(address, QString::number(port)).toLocal8Bit().constData());

  client.connectToHost(addr, port);
}

void Client::startTransfer() { 
  qDebug("connected");
  client.write("Hello, world", 13);
} 
```

## 主文件

```
int main(int argc, char** argv) {
  QCoreApplication app(argc, argv);

  for (int i = 0; i < 50; i++) {
    Client *client = new Client;
    client->start("192.168.0.1", 8888);
  }

  return app.exec();
} 
```

# 服务器

## 服务器.h

```
class Server: public QObject {
  Q_OBJECT

public:
  Server(int port = 8888, QObject * parent = 0);
  ~Server();

public slots:
  void acceptConnection();
  void startRead();

private:
  QTcpServer server;
  QList<QTcpSocket *> clients;
}; 
```

## 服务器.cpp

```
Server::Server(int port, QObject* parent): QObject(parent) {
  qDebug(qPrintable("new server instance on port " + QString::number(port)));

  connect(&server, SIGNAL(newConnection()), this, SLOT(acceptConnection()));
  server.listen(QHostAddress::Any, port);
}

Server::~Server() {
  server.close();
}

void Server::acceptConnection() {
  QTcpSocket *client = server.nextPendingConnection();
  clients.append(client);

  connect(client, SIGNAL(readyRead()), this, SLOT(startRead()));
}

void Server::startRead() {
  QTcpSocket *client = dynamic_cast<QTcpSocket *>(sender());

  char buffer[1024] = {0};
  client->read(buffer, client->bytesAvailable());
  QString response = QString("%2 on server %3").arg(buffer, QString::number(server.serverPort()));
  std::cout << qPrintable(response) << std::endl;
  client->close();
} 
```

## 主文件

```
int main(int argc, char** argv) {
  QCoreApplication app(argc, argv);

  Server server;
  return app.exec();
} 
```

# rest - 带有集合的资源的 REST Url ID 放置

> ID：11266108
> 
> 赞同：2
> 
> 时间：2012-06-29T17:12:27.127
> 
> 标签：rest, restful-url

这是 REST URL 的良好结构吗？

假设：

```
GET /account  <- get list of accounts
GET /account/1234 <- get account 1234 
```

等等

如果帐户资源有我想要接口的集合，这是个好主意吗？

```
GET /account/1234/note <- get notes for account 1234
POST /account/1234/note <- add note to account 1234
DELETE /account/1234/note/321 <- delete note 321 on account 1234 
```

尤其是最后一个让我停下来；通常我在删除时不需要实体 ID 和父 ID。

或者也许这样的事情会更好？

```
GET /account-note/1234 <- get notes for account 1234
POST /account-note/1234 <- add note to account 1234
DELETE /account-note/321 <- delete note 321 on account 1234 (b/c note 321 is on account 1234) 
```

但后来我会得到一个非常浅的 URL 集。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:36:32.767

您的第一个 api 没有任何问题。在很大程度上，RESTful 接口的想法是与 Web 的自然树结构相匹配，而您的第一种方法是与此保持一致。它也将是一种结构，可以完成 API 的工作，抽象出数据存储的隐式约束，因为第二种方法隐含地假设 note 的 id 是全局唯一的。这现在可能是正确的，并且可能仍然是正确的，但它也正是当发生某种重大数据库更改时突然出现并带来灾难性后果的那种错误。

我会选择你的第一个方案。这是一种熟悉的休息模式，很直观，而且不会以一种奇怪的方式爆发。此外，为了响应@Corwin01，最小化查询参数——它们不是那么 RESTful。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:46:39.927

我在对另一个问题的评论中引用了这个问题，在我得到的反馈和我自己的研究之间，这就是我想出的。

首先，这个问题有点缺陷。RESTful API，或者使用更受欢迎的术语超媒体 API 应该包括相关操作的 url，以便接口是可发现的并且更改不会破坏现有客户端，因此确切的结构比我放在它上面的重要性要低得多，这些可以以后改。

其次，示例中的注释将作为帐户查询的一部分被检索，可能是这样的：

```
<account>
   ...
   <notes>
      <note>
         ...
         <link href="/account-note/123" rel="note">
      </note>
   </notes>
</account> 
```

客户永远不会自己组装帐户的网址，客户将使用提供的链接。由于在这种情况下笔记 ID 是全局唯一的，因此不需要两次包含密钥。因此问题的答案是否定的，第一个例子不是一个好的 REST url 结构，第二个更好。（虽然仍然可能不是最好的......）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T17:27:58.040

请注意，我的经验是使用 JAX-RS 和 Jersey，所以我不确定确切的区别是什么。

但是，这就是我要做的：

```
 @GET
    @Path ("/account/note/{id}")
    public void displayNotes(@PathParam ("accountId") String accountId)
    {
      //do stuff
    }

    @POST
    @Path ("/account/note")
    public void addNote(@FormParam ("accountId") String accountId)
    {
      //do stuff
    }

    @POST
    @Path ("/account/note/delete")
    public void deleteNote(@FormParam ("accountId") String accountId, @FormParam ("noteId") String noteId)
    {
      //do stuff
    } 
```

这样一来，您就不会看到用户无论如何都不需要看到的混乱和令人困惑的 URL，尤其是当用户尝试自己导航时。这对于显示帐户是可以的，但会使他们对 POST 的 URL 感到困惑，因为他们会得到 404 并且不明白为什么。

保持简单，只需用户@FormParams，因为无论如何用户都不需要看到它。

# ruby-on-rails - ruby on rails 正则表达式

> ID：11266114
> 
> 赞同：0
> 
> 时间：2012-06-29T17:13:20.043
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3, ruby-on-rails-3.1

我是正则表达式的新手，我觉得这很难解决：

我有以下字符串：

```
"inforun 7970 12423 99 10:03 ? 00:09:03 abcd -PR -gmh domain.den.abc.com -gmp 6020 -guid 9c06cc02-b1c8-41cf-93e6-1d795e9fff62 -rst 180 -s FOLDER_NAME:wkf_workflow.s_session -something Session task instance [session]" 
```

我必须提取`time`which`10:03`和`'domain'`in`domain.den.abc.com`和 the `FOLDER_NAME`, the `'workflow'`in the`'wkf_worklfow'`和 the `'session'`in the `'s_session'`, `time`, `domain`,`foldername`并`workflow`为`session`每个字符串不断变化，并且有一堆像这样的字符串都作为单个字符串连接。以下是每个字符串共有的模式。the`'abcd -PR -gmh'`是常见的，可以帮助找到在 the 之前的时间`'?'` 对于`'-s', ':wkf'`所有字符串都是常见的，而 the`folder_name`正好在这两者之间。`'workflow'`介于两者之间，`'wkf_'`会话`'.s_'` 介于两者之间`'s_'`，紧接下一个`'-'` 我需要单独的字符串中的时间、域、文件夹名称、工作流和会话。几天前我才尝试练习正则表达式，我什至要花很多时间才能理解[这里](http://ruby.railstutorial.org/chapters/modeling-and-viewing-users-one#table%3aemail_regex)`"\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z"`给出的东西 谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:20:56.963

正则表达式（时间`$1`、域`$2`、文件夹名称`$3`、工作流`$4`、会话`$5`）：

```
(?<=\s)(\d{2}:\d{2})(?=\s).*?(?<=\s)((?:[a-zA-Z\d]+(?:\-[a-zA-Z\d]+)*\.)+[a-zA-Z]{2,4})(?=\s).*?(?<=\s)([a-zA-Z\d_]+):wkf_([a-zA-Z\d]+)\.s_([a-zA-Z\d]+)(?=\s) 
```

红宝石：

```
text = "inforun 7970 12423 99 10:03 ? 00:09:03 abcd -PR -gmh domain.den.abc.com -gmp 6020 -guid 9c06cc02-b1c8-41cf-93e6-1d795e9fff62 -rst 180 -s FOLDER_NAME:wkf_workflow.s_session -something Session task instance [session]"
text =~ /(?<=\s)(\d{2}:\d{2})(?=\s).*?(?<=\s)((?:[a-zA-Z\d]+(?:\-[a-zA-Z\d]+)*\.)+[a-zA-Z]{2,4})(?=\s).*?(?<=\s)([a-zA-Z\d_]+):wkf_([a-zA-Z\d]+)\.s_([a-zA-Z\d]+)(?=\s)/
puts $~.captures 
```

输出：

```
10:03
domain.den.abc.com
FOLDER_NAME
workflow
session 
```

[在此处](http://ideone.com/q4XvG)查看并测试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:32:04.033

这是您可以使用的正则表达式。我对 Ruby/RoR 不够熟悉，无法提供帮助，但假设你真的想使用正则表达式，这个正则表达式应该让你一次完成所有事情

```
^.* (\d\d?:\d\d) \? .*? -gmh (.*?)\..*? -s (.*?):wkf_(.*?)\.s_(.*?) .*$ 
```

[http://regexr.com?31da7](http://regexr.com?31da7)应该显示捕获组及其内容

```
$1    $2     $3          $4       $5
10:03 domain FOLDER_NAME workflow session 
```

它假定时间紧接在问号之前，并被格式化为数字（可选数字）冒号数字，域紧跟在“-gmh”之后，文件夹名称跟在 -s 之后并且在 :wkf_ 之前，工作流程如下:wkf_，并且会话在 .s_ 之后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T17:32:04.233

假设您使用的是 ruby​​ 1.9，这是一个起点：

```
/(?<time>\d{2}:\d{2}:\d{2}) abcd -PR -gmh (?<domain>[a-zA-Z]*)/i =~ s
/-s (?<folder_name>\w*):wkf_(?<workflow>\w*)\.s_(?<session>\w*)/i =~ s 
```

运行这两行之后，你应该有：

```
1.9.3p125 :023 > time
=> "00:09:03" 
1.9.3p125 :024 > domain
 => "domain" 
1.9.3p125 :025 > folder_name
 => "FOLDER_NAME" 
1.9.3p125 :026 > workflow
 => "workflow" 
1.9.3p125 :027 > session
 => "session" 
```

您仍然需要定义每种情况下允许使用的字符并添加错误处理。

# wcf - Fiddler POST 到 REST 服务端点的 400 错误

> ID：11266116
> 
> 赞同：2
> 
> 时间：2012-06-29T17:13:27.027
> 
> 标签：wcf, rest, post

我有一个简单的 REST 服务端点，当我使用 Fiddler 2 发布时失败。不需要输入参数的端点成功。只有传入数据会导致失败。我使用集成到 VS 2010 中的 Web 服务器。

细节：

**Global.asax 条目**：

```
private void Application_Start(object sender, EventArgs e)
        {
            RegisterRoutes();
        }
    private void RegisterRoutes()
        {
            RouteTable.Routes.Add(new ServiceRoute("Employee", new WebServiceHostFactory(), typeof(Employee)));
            RouteTable.Routes.Add(new ServiceRoute("Provider", new WebServiceHostFactory(), typeof(Provider)));
        } 
```

**网络服务：**

```
[ServiceContract]
        [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
        [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
        public class Provider : BaseMvpWebService<ProviderPresenter>, IProvider

    [WebInvoke(Method="POST", RequestFormat=WebMessageFormat.Json, UriTemplate="",      ResponseFormat=WebMessageFormat.Json, BodyStyle=WebMessageBodyStyle.Wrapped)]
        public ProviderListWrap FilteredList(GeneralSearchView filtersearch)
    { ... } 
```

**网络配置条目：**

```
 <system.serviceModel>
        <standardEndpoints>
          <webHttpEndpoint>
        <!-- 
            Configure the WCF REST service base address via the global.asax.cs file and the default endpoint 
            via the attributes on the <standardEndpoint> element below
        -->
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

**参数类型定义：**

```
 [DataContract]
 public class GeneralSearchView : IGeneralSearchView
 {
    [DataMember]
    public string ProviderListing { get; set; }

    [DataMember]
    public string FundingSource { get; set; }

    [DataMember]
    public string ProviderType { get; set; }

    [DataMember]
    public string ServiceType { get; set; }

    [DataMember]
    public string UserZipCode { get; set; }

    [DataMember]
    public string SearchRadius { get; set; }

    [DataMember]
    public string SearchCounty { get; set; }
 } 
```

**通过 Fiddler 2 发布：**

```
POST  http://localhost:19099/Provider/ 
```

**请求标头**

```
User-Agent: Fiddler
Content-Type: application\json
Host: localhost:19099
Content-Length: 43 
```

**请求正文**

```
{"filtersearch":{"ProviderListing":"True"}} 
```

**原始响应**

```
HTTP/1.1 400 Bad Request
Server: ASP.NET Development Server/10.0.0.0
Date: Fri, 29 Jun 2012 17:31:35 GMT
X-AspNet-Version: 4.0.30319
Content-Length: 1770
Set-Cookie: ASP.NET_SessionId=qgvgtxlcvdouut2qgq40u4eh; path=/; HttpOnly
Cache-Control: private
Content-Type: text/html
Connection: Close

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Request Error</title>
    <style>BODY { color: #000000; background-color: white; font-family: Verdana; margin-left: 0px; margin-top: 0px; } #content { margin-left: 30px; font-size: .70em; padding-bottom: 2em; } A:link { color: #336699; font-weight: bold; text-decoration: underline; } A:visited { color: #6699cc; font-weight: bold; text-decoration: underline; } A:active { color: #336699; font-weight: bold; text-decoration: underline; } .heading1 { background-color: #003366; border-bottom: #336699 6px solid; color: #ffffff; font-family: Tahoma; font-size: 26px; font-weight: normal;margin: 0em 0em 10px -20px; padding-bottom: 8px; padding-left: 30px;padding-top: 16px;} pre { font-size:small; background-color: #e5e5cc; padding: 5px; font-family: Courier New; margin-top: 0px; border: 1px #f0f0e0 solid; white-space: pre-wrap; white-space: -pre-wrap; word-wrap: break-word; } table { border-collapse: collapse; border-spacing: 0px; font-family: Verdana;} table th { border-right: 2px white solid; border-bottom: 2px white solid; font-weight: bold; background-color: #cecf9c;} table td { border-right: 2px white solid; border-bottom: 2px white solid; background-color: #e5e5cc;}</style>
  </head>
  <body>
    <div id="content">
      <p class="heading1">Request Error</p>
      <p xmlns="">The server encountered an error processing the request. Please see the <a rel="help-page" href="http://localhost:19099/Provider/help">service help page</a> for constructing valid requests to the service.</p>
    </div>
  </body>
</html> 
```

任何想法/反馈将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:18:54.623

我认为您的内容类型斜杠可能存在语法问题。尝试：

内容类型：应用程序/json

如果没有，回复中是否还有其他细节？只是一个 400 错误的请求？

# wordpress - Wordpress BackWPup 和谷歌云存储

> ID：11266117
> 
> 赞同：0
> 
> 时间：2012-06-29T17:13:32.660
> 
> 标签：wordpress, plugins, google-cloud-storage

我已经为我的 WordPress 网站安装了 BackWPup 插件，并将其连接到我的 Google Cloud Storage 帐户。我的问题是完整备份（70 MB zip 文件）没有显示在我的 Google 文件夹中，但一个较小的测试备份（13 MB zip 文件）确实出现了。该插件在两种情况下都报告成功传输。有谁知道大文件可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:35:00.307

此问题是因为 BackWPup 使用多部分 HTTP 请求将大文件发送到 GWS 的方式存在问题。使用多部分消息的截止值是 50MB，所以我将它增加到比我的备份文件大，一切正常。我在 BackWPup 支持论坛上报告了这个问题，所以希望它会在未来的版本中得到修复。

# php - 如何使用 php 包含与 js 菜单

> ID：11266120
> 
> 赞同：-5
> 
> 时间：2012-06-29T17:13:54.663
> 
> 标签：php, javascript

我正在整理一个网站，它有一个用 javascript 设置的菜单系统。我不想在网站更改时更新每个页面。

我尝试使用 php 的`include`语句来处理它，但它不起作用。它甚至不会显示基本数据。

### 索引.php

```
<!DOCTYPE html>
<?php include('nav.php');?>
<html>
<head>
<style type="text/css">
<!--[if IE]>
<style type="text/css">
#menu li {
position:static;
}
</style>
<![endif]-->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="Your description goes here" />
<meta name="keywords" content="your,keywords,goes,here" />
<meta name="author" content="Your Name" />
<link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz|Droid+Sans|Princess+Sofia' rel='stylesheet' type='text/css' />
<link rel="stylesheet" type="text/css" media="all" href="inland-hembygd.css" />

<script src="menu.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery.nivo.slider.js"></script>
<title>Through His Eyes Photography</title>
</head>
<link href="drop-down-menu.css" type="text/css" rel="stylesheet" />
<script src="menu.js" type="text/javascript"></script>
<style type="text/css">
body {
    padding:20px;
    font-family:Arial, Helvetica, sans-serif;
    font-size:62.5%;

}
#container {
    margin:50px auto;
    width:500px;
}
</style>

<!--[if IE]>
<style type="text/css">

#menu li {
    position:static;
}

</style>
<![endif]-->
<body>

<div id="wrapper960" class="clearfix">

<div id="header" class="clearfix shadow">
<div id="sitetitle" class="clearfix">
<h1><a href="index.html">Through His Eyes Photography</a></h1>

<br /><br />

<!-- CONTAINER -->
<span id="container" >

<!-- NAVIGATION -->
<ul id="menu">

    <li><a href="index.php" title="Portraiture Gallery" class="selected">Portraiture Gallery</a>
    <ul>
    <li><a href="portraiture/adults.php" title="Adults">Adults  </a></li>
    <li><a href="portraiture/seniors.php" title="Seniors">Seniors  </a></li>
    <li><a href="portraiture/infantsandchildren.php" title="InfantsandChildren">Infants and Children  </a></li>
    <li><a href="portraiture/multiples.php" title="Multiples">Mutiples  </a></li>
    <li><a href="portraiture/hisangels.php" title="Hisangels">His Angels </a></li>

    </ul>
    </li>

    <li><a href="#" title="About us">The Stork's Arrival</a>
    <ul>
    <li><a href="portraiture/adults.php" title="Dults">Adults  </a></li>
    <li><a href="portraiture/seniors.php" title="Seniors">Seniors  </a></li>
    <li><a href="portraiture/infantsandchildren.php" title="InfantsandChildren">Infants and Children  </a></li>
    <li><a href="portraiture/multiples.php" title="Multiples">Mutiples  </a></li>
    <li><a href="portraiture/hisangels.php" title="Hisangels">His Angels </a></li>

    </ul>
    </li>

    <li><a href="#" title="Projects">Triple Braided Cord</a>
    <ul>
    <li><a href="portraiture/adults.php" title="Adults">Adults  </a></li>
    <li><a href="portraiture/seniors.php" title="Seniors">Seniors  </a></li>
    <li><a href="portraiture/infantsandchildren.php" title="InfantsandChildren">Infants and Children  </a></li>
    <li><a href="portraiture/multiples.php" title="Multiples">Mutiples  </a></li>
    <li><a href="portraiture/hisangels.php" title="Hisangels">His Angels </a></li>

    </ul>
    </li>

    <li><a href="#" title="Contact">Commercial Gallery</a>
    <ul>
    <li><a href="portraiture/adults.php" title="Dults">Adults  </a></li>
    <li><a href="portraiture/seniors.php" title="Seniors">Seniors  </a></li>
    <li><a href="portraiture/infantsandchildren.php" title="InfantsandChildren">Infants and Children  </a></li>
    <li><a href="portraiture/multiples.php" title="Multiples">Mutiples  </a></li>
    <li><a href="portraiture/hisangels.php" title="Hisangels">His Angels </a></li>

    </ul>
    </li>

    <li><a href="#" title="boudoir">Boudoir</a>
    <ul>
    <li><a href="portraiture/adults.php" title="Dults">Adults  </a></li>
    <li><a href="portraiture/seniors.php" title="Seniors">Seniors  </a></li>
    <li><a href="portraiture/infantsandchildren.php" title="InfantsandChildren">Infants and Children  </a></li>
    <li><a href="portraiture/multiples.php" title="Multiples">Mutiples  </a></li>
    <li><a href="portraiture/hisangels.php" title="Hisangels">His Angels </a></li>

    </ul>
    </i>

    <li><a href="#" title="hdr">HDR</a>
    <ul>
    <li><a href="portraiture/adults.php" title="Dults">Adults  </a></li>
    <li><a href="portraiture/seniors.php" title="Seniors">Seniors  </a></li>
    <li><a href="portraiture/infantsandchildren.php" title="InfantsandChildren">Infants and Children  </a></li>
    <li><a href="portraiture/multiples.php" title="Multiples">Mutiples  </a></li>
    <li><a href="portraiture/hisangels.php" title="Hisangels">His Angels </a></li>

    </ul>
    </i>

    <li><a href="#" title="hdr">Fine Art Gallery</a>
    <ul>
    <li><a href="portraiture/adults.php" title="Dults">Adults  </a></li>
    <li><a href="portraiture/seniors.php" title="Seniors">Seniors  </a></li>
    <li><a href="portraiture/infantsandchildren.php" title="InfantsandChildren">Infants and Children  </a></li>
    <li><a href="portraiture/multiples.php" title="Multiples">Mutiples  </a></li>
    <li><a href="portraiture/hisangels.php" title="Hisangels">His Angels </a></li>

    </ul>
    </i>

</ul>
<!-- /NAVIGATION -->    

</span>
<!-- /CONTAINER -->

</div>

<div align="center"="header-image">
<img src="images/main.jpg" alt="" />
</div>

<div id="content" class="clearfix shadow" >

<div id="sidebar" class="right" >

<div class="right">
<h2>Site Navigation</h2>

<div id="header" class="clearfix shadow">

        <div id="nav" class="clearfix" align="center">
            <ul>
                <li><a href="index.html">Home</a></li>

            </ul>
            <ul>
                <li><a href="index.html">Default layout</a></li>

            </ul>
            <ul>
            <li><a href="2-columns-left.html">2 columns (left)</a></li>

            </ul>
            <ul>
                <li><a class="current" href="2-columns-right.html">2 columns (right)</a></li>
            </ul>
            <ul>
                <li><a href="full-width.html">Full width</a></li>
            </ul>
        </div>
    </div>

</div>
</div>

<div id="main" class="left">
<h2>The Inland CSS template</h2>
<p>This is Inland, the first in a new series of HTML/CSS templates from <a href="http://andreasviklund.com/">andreasviklund.com</a>. It is a multi-layout design, and the first andreasviklund.com template to feature an image slider. Inland is made for template users who want a design that catches the attention of the website visitor and it is suitable for both personal websites and blogs, as well as for professional websites for companies and organizations. Like all templates by Andreas Viklund, it keeps the code simple, making the template easy to customize and build upon. To see the different layout options, click the main menu links above...</p>
</div>
</div>

<div id="footer" class="shadow">
<p>&copy; 2012 Your Name | <a href="http://andreasviklund.com/templates/inland-hembygd/">Template design</a> by <a href="http://andreasviklund.com/">andreasviklund.com</a> and <a href="http://allyourbasearebelongtous.se/">Daniel Carlsson</a></p>
</div>
</div>
</li>

</body>

</html> 
```

最后是 menu.js javascript

```
// JavaScript Document

// DropDownMenu by Miha Hribar
// http://hribar.info

function addLoadEvent(func) {
    var oldonload = window.onload;
    if (typeof window.onload != 'function') {
        window.onload = func;
    } else {
        window.onload = function() {
            oldonload();
            func();
        }
    }
}

function prepareMenu() {
    // first lets make sure the browser understands the DOM methods we will be using
    if (!document.getElementsByTagName) return false;
    if (!document.getElementById) return false;

    // lets make sure the element exists
    if (!document.getElementById("menu")) return false;
    var menu = document.getElementById("menu");

    // for each of the li on the root level check if the element has any children
    // if so append a function that makes the element appear when hovered over
    var root_li = menu.getElementsByTagName("li");
    for (var i = 0; i < root_li.length; i++) {
        var li = root_li[i];
        // search for children
        var child_ul = li.getElementsByTagName("ul");
        if (child_ul.length >= 1) {
            // we have children - append hover function to the parent
            li.onmouseover = function () {
                if (!this.getElementsByTagName("ul")) return false;
                var ul = this.getElementsByTagName("ul");
                ul[0].style.display = "block";
                return true;
            }
            li.onmouseout = function () {
                if (!this.getElementsByTagName("ul")) return false;
                var ul = this.getElementsByTagName("ul");
                ul[0].style.display = "none";
                return true;
            }
        }
    }

    return true;
}

addLoadEvent(prepareMenu); 
```

我正在尝试通过包含语句将右侧和顶部菜单添加到每个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:16:24.893

您在`nav.php`页面的 HTML 中包含上述内容。将该包含语句放在您希望导航显示的位置。在里面`nav.php`你应该只有你想要插入到那个位置的 HTML。从字面上看，它会获取文件中的代码，并将其放在您拥有`include`语句的位置。

# ruby-on-rails - 多模型嵌套表单，不能将用户添加到当前帐户

> ID：11266125
> 
> 赞同：0
> 
> 时间：2012-06-29T17:14:36.887
> 
> 标签：ruby-on-rails, nested-forms, multi-tenant

我到处寻找解决方案，但没有提出任何解决方案。

**起作用的部分**：我的应用程序允许客户使用嵌套表单创建帐户。收集的数据在四个模型中创建记录 - 帐户、用户、accounts_users（因为一个用户可以与许多帐户相关联）和配置文件（用于存储用户的 fname、lname、电话等）。

**那部分不起作用**：登录后，我希望用户能够使用下面的表格将更多用户添加到他们的帐户中。我在提交时没有收到任何错误，但我被带回到同一个表单，没有创建额外的记录。任何帮助都是极好的！

这是嵌套形式...

```
<%= form_for @user, :validate => true do |f| %>
<fieldset>
    <%= f.fields_for :profile do |p| %>
    <div class="field">
      <%= p.label :first_name %>
      <%= p.text_field :first_name %>
    </div>
    <div class="field">
      <%= p.label :last_name %>
      <%= p.text_field :last_name %>
    </div>
    <div class="field">
      <%= p.label :phone %>
      <%= p.text_field :phone %>
    </div>
    <% end %>
    <div class="field">
        <%= f.label :email %>
        <%= f.text_field :email %>
    </div>
    <div class="actions">
        <%= f.submit 'Create New User', :class => "btn btn-large btn-success" %>
        <%= cancel %>   
    </div>
</fieldset> 
```

ApplicationController 将所有内容都限定为 current_account，如下所示：

```
def current_account
  @current_account ||= Account.find_by_subdomain(request.subdomain) if request.subdomain
end 
```

用户控制器

```
def new
  @user = User.new  
  @user.build_profile()
  #current_account.accounts_users.build()  #Edit2: This line was removed

  respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @user }
end

def create
  @user = User.new(params[:user])
  @user.accounts_users.build(:account_id => current_account.id) #Edit2: This line was added
  if @user.save
    # Send Email and show 'success' message
    flash[:success] = 'An email has been sent to the user'
  else
    # Render form again
    render 'new'
  end
end 
```

模型如下所示：

```
class Account < ActiveRecord::Base
  attr_accessible :name, :subdomain, :users_attributes
  has_many :accounts_users
  has_many :users, :through => :accounts_users
  accepts_nested_attributes_for :users
end

class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :profile_attributes
  has_many :accounts_users
  has_many :accounts, :through => :accounts_users
  has_one :profile
  accepts_nested_attributes_for :profile
end

class AccountsUser < ActiveRecord::Base
  belongs_to :account
  belongs_to :user
end

class Profile < ActiveRecord::Base
  belongs_to :user
  attr_accessible :first_name, :last_name, :phone
end 
```

Edit2：事实证明，我需要在 User 模型中进行密码 + password_comfirmation 验证，这使我无法添加没有这些字段的其他用户。我注释掉了这些验证，并在“新”操作中删除了行：current_account.accounts_users.build()，并在“创建”操作中添加了行：@user.accounts_users.build(:account_id => current_account.id)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:13:23.473

“我希望用户能够使用下面的表格将更多*用户*添加到他们的帐户中。” 我假设您的意思是*配置文件*（因为您的嵌套表单在配置文件上）？

如果是这种情况，我认为您的 UsersController 的创建操作不会使用 new 将配置文件与用户相关联。

尝试这个...

```
def new
  @user = User.build
  @profile = @user.profiles.build #build adds the profile to user's associated collection of profiles, but new doesn't

  ...
end

def create
  @user = User.build(params[:user])
  if @user.save
    ....
  end
end 
```

如果您希望用户与帐户相关联，那么您需要将 new 和 create 操作放在 AccountsController 中，并执行类似于嵌套关联用户和配置文件记录的操作。

顺便说一句，它回到新的原因是因为您在创建结束时渲染新的，以防这也是问题的一部分。希望有帮助！

# javascript - Array(len) 初始化程序中的未定义值

> ID：11266126
> 
> 赞同：29
> 
> 时间：2012-06-29T17:14:45.397
> 
> 标签：javascript, arrays, undefined

考虑：

```
var a = Array(3);
var b = [undefined,undefined,undefined]; 
```

产生不同结果`a.map`的原因是什么？`b.map`

```
a.map(function(){  return 0;  });  //produces -> [undefined,undefined,undefined]
b.map(function(){  return 0;  });  //produces -> [0,0,0] 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-29T17:20:41.300

数组构造函数创建一个具有给定长度的数组。它不会**创建**密钥。[`Array.prototype.map`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)的回调函数只对列表中的元素执行。
也就是说，所有与键（整数）关联的值 0 ≤ *i* < *length*。

*   `Array(3)`有零键，所以`.map`永远不会触发回调。
*   `[void 0, void 0, void 0]`有三个键，回调函数被执行。

    ```
    Array(3).hasOwnProperty(0);                 // false
    [void 0, void 0, void 0].hasOwnProperty(0); // true 
    ```

MDN 上提到了该规范及其[polyfill 。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map#Compatibility)在第 47 行，`if (k in O) {`显示回调函数不处理不存在的键。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T17:24:33.817

来自[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)：

> 回调仅针对已分配值的数组索引调用；对于已被删除或从未被赋值的索引，它不会被调用。

对于数组`a`，您已经实例化了一个长度为 3 的数组，但尚未分配任何值。map 函数找不到具有赋值的元素，因此它不会生成新数组。

对于数组`b`，您已经实例化了一个包含 3 个元素的数组，每个元素的值都是`undefined`。map 函数找到 3 个具有赋值的元素，并在新数组中返回 '0' 作为每个元素的新值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-23T03:44:35.717

`map`仅迭代现有属性，而不是空索引。

因此，如果你想让它工作，你必须先填充数组。

有多种方法可以做到这一点，例如：

*   [`.fill()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill), 在 ES6 中引入

    ```
    console.log(new Array(3).fill().map(function(){ return 0; }));
    ```

*   调用：[`concat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)_[`apply`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)

    ```
    var arr = [].concat.apply([], new Array(3));
    console.log(arr.map(function(){ return 0; }));
    ```

*   一个老`for`循环。

    ```
    var arr = new Array(3);
    for(var i=0; i<arr.length; ++i) arr[i] = 1; /* whatever */
    console.log(arr.map(function(){ return 0; }));
    ```

*   使用[最有效方法中的一些想法来创建一个零填充的 JavaScript 数组？](https://stackoverflow.com/q/1295584/1529630)

*   等等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-29T17:21:41.040

`a`是一个没有元素的空数组，所以 map 函数产生一个没有元素的空数组*（根据规范，只有当 [[HasProperty]] 为真时，map 才会产生结果。）* `b`是一个由三个元素组成的数组，所以 map 产生一个三个要素。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-31T22:52:13.750

## 构造数组可枚举但为空

`Array(len)`创建一个数组并相应地设置它的长度，*但*只有它的长度是“可枚举的”，而不是包含的值。所以，你不能映射数组`Array(100).map(/* nope */)`——它还不是一个“真正的数组” ，*尽管*长度正确，它实际上是空的。

> 回调仅对**分配了包括 undefined 在内的值的数组索引调用。**,

`array`不包含任何值；甚至不`undefined`

> 对于数组的缺失元素（即从未设置、已删除或从未分配值的索引），不会调用它。

要填充数组，您需要以某种方式对其进行迭代......例如：`[...Array(100)]`或`Array.from(Array(100))`

我想这个初始化的目的是优化内存分配......数组中实际上没有任何东西。MDN 说“空`arrayLength`对象”可能会误导，因为尝试访问任何“空项目”只会返回未定义……但我们知道它们不是真的，`undefined`因为`map`失败了，因此我们可以确认它是一个真正的空数组。

## 构造函数等效

此示例不寻求镜像规范，而是说明为什么`array`返回的 from`Array`还不能被迭代

```
function * (length) {
  const arr = [];
  Object.defineProperty(arr, 'length', { value: length });
  // Equivalent, but invokes assignment trap and mutates array:
  // arr.length = length;
  Object.defineProperty(arr, Symbol.iterator, {
    value() {
      let i = 0;
      return {
        next() {
          return {
            value: undefined, // (Not omitted for illustration)
            done: i++ == length
          };
        }
      }
    }
  })
  return arr;
} 
```

值得指出的是，尽管`undefined`在生成器 value 属性中提供了一个值，*但它不会将其识别为一个值，因此数组是空的*。

## `Array(len)`规格

[https://www.ecma-international.org/ecma-262/6.0/#sec-array-len](https://www.ecma-international.org/ecma-262/6.0/#sec-array-len)

> Array (len) 当且仅当使用一个参数调用 Array 构造函数时，此描述才适用。
> 
> 1)`numberOfArgs`设为传递给此函数调用的参数数量。
> 
> 2）断言：`numberOfArgs`= 1。
> 
> 3) 如果 NewTarget 是`undefined`，则令`newTarget`为活动函数对象，否则`newTarget`为`NewTarget`。
> 
> 4 )让`proto`。`GetPrototypeFromConstructor(newTarget, "%ArrayPrototype%")`
> 
> 5) `ReturnIfAbrupt(proto)`。
> 
> 6) 设数组为`ArrayCreate(0, proto)`。
> 
> 7) 如果 Type( `len`) 不是 Number，那么
> 
> *`defineStatus`a ) 让`CreateDataProperty(array, "0", len)`。*
> 
> *b) 断言：`defineStatus`是真的。*
> 
> *c)`intLen`设为 1。*
> 
> 8) 否则，*a)`intLen`设为 ToUint32( `len`)。b) 如果`intLen`≠ `len`，则抛出 RangeError 异常。*
> 
> 9) `setStatus`设为 Set(array, "length", intLen, true)。
> 
> 10) Assert：`setStatus`不是突然完成。
> 
> 11) 返回数组。

# java - 如何在 Java 泛型方法中定义返回类型？

> ID：11266130
> 
> 赞同：0
> 
> 时间：2012-06-29T17:15:13.877
> 
> 标签：java, generics, instanceof

我有一个通用方法，例如：

```
public static<T> T execute(...) {
    ...
} 
```

如何定义方法体中的 T 类型？例如：

```
if (T == String) {
  // do something with strings
  // return string;
}
if (T == Bitmap) {
  // do something with bitmap
  // return bitmap;
} 
```

我尝试了以下方法，但没有奏效：

```
T par = null;
if(par instanceof String) {
    // do something with strings
    // return string;
} 
```

我尝试`par`像下面这样声明，但这也不起作用。

```
T par = (T) null;
T par = (T) new Object(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:18:46.920

你可能会做这样的事情：

```
public static <T>  T execute(Class<T> t) {
    if(String.class == t) {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:36:24.970

如果您的代码仅支持一组离散的数据类型，则您不想使用泛型。正如原始帖子的评论中提到的，这种情况需要重载方法调用。

例如，考虑一种情况，您支持字符串、整数和双精度，但您没有其他数据类型的特定逻辑。您将定义您的方法，例如：

```
public static String execute(String s) { ... }
public static Integer execute(Integer i) { ... }
public static Double execute(Double d) { ... }
public static Object execute(Object o) { ... } 
```

前三个方法将为您支持的三种离散数据类型定义逻辑，而最后一个方法将为您*不*支持的任何其他数据类型定义逻辑和/或错误处理。（当然，这不包括非 int 或 double 类型的原语，但这只是一个示例。）

泛型最初被添加到 Java 以支持 Collection 确切地知道它包含什么。例如，这是一种通过将 List 声明为 a 来保证 List 仅包含 Strings 的方法`List<String>`。然后扩展了此功能，但保留了基本概念 - 保证如果您放入 X 类型的未知对象，即使您在编译时不知道 X 是什么，您也可以编写逻辑以获得相同的 X 类型出去。（[这篇文章](http://www.oracle.com/technetwork/articles/javase/generics-136597.html)很有趣，如果过时了。）

这并不*意味着*它应该在方法或类中应用的逻辑取决于输入的数据类型时使用。它*应该*用在与*传入*数据类型无关的地方，并且将在未知数据类型 X 上一致地应用相同的逻辑。因此，如果 String 的逻辑与 Doubles 的逻辑不同，则不应使用泛型。

**tl; dr：** 由于原始帖子根据输入参数的数据类型指示了不同的逻辑，因此不适合使用泛型。`execute`应该改用基于支持的数据类型重载方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T17:32:45.190

**T 这里称为类型参数。**

// 这里会在方法go()中定义T的类型

```
public interface Comparable<T> { 

        public int compareTo(T t) {

           // do something...

         }
      } 
```

例如：

**我正在上课，我想根据歌曲的标题对歌曲进行排序。**

```
public class Song implements Comparable<Song> {

  private String title;

  public void compareTo(Song s) {

       title.compareTo(s.title());

    }

  public void setTitle(String s) {

    this.title = s;

   }

  public void getTitle() {

    return this.title;
   }

  public String toString() {

    return getTitle();

   }

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T17:43:25.153

如果您已经以这种方式在代码中拆分功能，并且输入相同，那么您可能会很好地使用不同的功能。所以而不是（使用杰舒伦的回答）

```
public static <T>  T execute(Class<T> t) 
{
  if(String.class == t) {

  }
}

BitMap b = execute(BitMap.class); 
```

你将会拥有

```
public BitMap bitmapExecute(...)
{
  commonWork();
  //do bitmap stuff
}

public String stringExecute(...)
{
  commonWork();
  //do String stuff
}

BitMap b = bitmapExecute(...);
String s = stringExecute(...); 
```

如果有一大块通用代码，只有一小部分因类型而异，您可以将该通用代码移至其自己的函数中。

```
public someObject commonWork(...)
{
  //Do common stuff
} 
```

只要您在编译时就类型做出决定，就不必有`instanceof`块。

# php - 适用于 iOS 应用的 PHP/MySQL Web 服务

> ID：11266135
> 
> 赞同：-4
> 
> 时间：2012-06-29T17:15:35.300
> 
> 标签：php, objective-c, sql, xcode

我正在尝试让我的应用程序与托管在服务器上的数据库进行通信。我做了一些阅读，发现更好的方法之一是使用 php 作为中间步骤。

我有一个 .php 文件，它可以接收数据，将其转换为查询，然后将其写入数据库。

我只是想知道如何让我的应用程序与.php 对话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:17:23.047

最基本的：向 php 文件发出 http 请求。

当然，您可能需要身份验证和 CRUD 操作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-29T17:58:58.163

您可以使用[ASIHTTPRequest 库](http://allseeing-i.com/ASIHTTPRequest/)而不是 NSURLConnection 来节省一些工作。

# jquery - 如何使用jQuery禁用除输入和文本区域之外的任何内容的退格键？

> ID：11266136
> 
> 赞同：3
> 
> 时间：2012-06-29T17:15:36.073
> 
> 标签：jquery, keypress, keydown

我想为除文本框和文本区域之外的任何元素禁用退格键（键码 8）。

这是我尝试但没有成功的方法：

```
$(":not(input, textarea)").keydown(function(event) {
    if (event.keyCode == 8) {
        event.preventDefault();
        return false;
    }
}); 
```

...

```
$("*:not(input, textarea)").keydown(function(event) {
    if (event.keyCode == 8) {
        event.preventDefault();
        return false;
    }
}); 
```

..

```
$("body").not("input,textarea").keydown(function(event) {
    if (event.keyCode == 8) {
        event.preventDefault();
        return false;
    }
}); 
```

这个想法是为了避免用户在没有集中在任何文本框或文本区域时意外地按下退格键。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T17:20:02.177

您还希望禁用只读的文本区域或文本框。

如果文本区域或文本框是只读的并且具有焦点，那么按退格键也会导致您离开页面。这就是为什么您还应该检查只读。

我假设您试图阻止返回功能。

编辑：

您也可以将侦听器附加到主体上。EDIT2：您也需要阻止对复选框的操作（这是输入）

```
$(document).keydown(function (e) {
                var element = e.target.nodeName.toLowerCase();
                if ((element != 'input' && element != 'textarea') || $(e.target).attr("readonly") || (e.target.getAttribute("type") ==="checkbox")) {
                    if (e.keyCode === 8) {
                        return false;
                    }
                }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T13:10:17.627

The easiest solution (which covers all the special cases) is:

```
$(document).keydown(function(e) {
    if (e.which == 8 && !$(':focus').length) {
        e.preventDefault();
    }
}); 
```

# c# - 在代码隐藏中访问 datalist 的 asp.net 控件

> ID：11266138
> 
> 赞同：0
> 
> 时间：2012-06-29T17:15:40.717
> 
> 标签：c#, asp.net, code-behind, datalist

我试图在后面的代码中访问一个 asp Image 标签，以便在没有其他图像存在的情况下显示默认图像。我遇到的问题是我得到一个“对象引用未设置为对象的实例”。错误信息。aspx 页面

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="MemberProfileList.ascx.cs"
Inherits="UserControls_MemberProfileList" %>
<%--<asp:GridView ID="GridView1" runat="server">
</asp:GridView>--%>
<asp:DataList ID="profilelist" runat="server" RepeatColumns="2" OnDataBinding="profilelist_DataBound" >
<ItemTemplate>
    <asp:Image ID="ProfileImage"  runat="server" ImageUrl='<%# System.String.Format("/Images/{0}", DataBinder.Eval(Container.DataItem, "ProfilePictureThumb"))%>'  />
    <asp:Hyperlink runat="server" NavigateUrl='<%#Link.ToSpecificMemberProfile(Eval("Username").ToString()) %>' Text='<%#HttpUtility.HtmlDecode(Eval("Username").ToString()) %>' />
</ItemTemplate>
</asp:DataList> 
```

后面代码中的方法

```
profilelist.DataSource = myProfileList;
    profilelist.DataBind();
    Image ProfileImage = profilelist.FindControl("ProfileImage") as Image;
    string profilepic = ProfileImage.ImageUrl.ToString();
    if (profilepic == null)
    {
        ProfileImage.Visible = false;
    } 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:24:29.867

图像将在一个项目内，而不是在整个列表中。在 ItemDataBound 事件中实现您的逻辑。

看看这个：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:06:54.153

//如果您试图根据天气隐藏它，则 ProfilePictureThumb 为 Null，方法是：**

```
 <asp:Image ID="ProfileImage" Visible='<%# String.IsNullOrEmpty(Eval("ProfilePictureThumb").ToString())? false:true %>'  runat="server"   ImageUrl='<%# System.String.Format("/Images/{0}", DataBinder.Eval(Container.DataItem, "ProfilePictureThumb"))%>'  />

//if you want to make it display a default image based on weather or not ProfilePicture is null:

    ImageUrl='<%# String.IsNullOrEmpty(Eval("ProfilePictureThumb").ToString())? System.String.Format("/Images/{0}", "defaultimage.jpg"):System.String.Format("/Images/{0}", DataBinder.Eval(Container.DataItem, "ProfilePictureThumb"))%>'

//that way you don't need code behind. 
```

# c# - c# 将 system.IO.Stream 转换为 Byte[]

> ID：11266141
> 
> 赞同：26
> 
> 时间：2012-06-29T17:15:52.443
> 
> 标签：c#, stream, byte

我想知道如何将流转换为字节。

我找到了这段代码，但在我的情况下它不起作用：

```
var memoryStream = new MemoryStream();
paramFile.CopyTo(memoryStream);
byte[] myBynary = memoryStream.ToArray();
myBinary = memoryStream.ToArray(); 
```

但在我的情况下，在 paramFile.CopyTo(memoryStream) 行中它什么也没发生，没有例外，应用程序仍然可以工作，但代码不会继续下一行。

谢谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-29T17:25:37.670

如果您正在读取文件，只需使用[File.ReadAllBytes 方法](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)：

```
byte[] myBinary = File.ReadAllBytes(@"C:\MyDir\MyFile.bin"); 
```

此外，只要您的 sourceStream 支持 Length 属性，就无需 CopyTo a MemoryStream 来获取字节数组：

```
byte[] myBinary = new byte[paramFile.Length];
paramFile.Read(myBinary, 0, (int)paramFile.Length); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-06-29T17:24:44.420

这是我为 Stream 类编写的扩展方法

```
 public static class StreamExtensions
    {
        public static byte[] ToByteArray(this Stream stream)
        {
            stream.Position = 0;
            byte[] buffer = new byte[stream.Length];
            for (int totalBytesCopied = 0; totalBytesCopied < stream.Length; )
                totalBytesCopied += stream.Read(buffer, totalBytesCopied, Convert.ToInt32(stream.Length) - totalBytesCopied);
            return buffer;
        }
    } 
```

# emacs - 在 emacs 中，在每个 p4 命令之前运行一个命令

> ID：11266145
> 
> 赞同：1
> 
> 时间：2012-06-29T17:16:17.093
> 
> 标签：emacs, hook, elisp, perforce

所以在工作中，我必须从两个不同的存储库工作。这些文件映射到基本上相同的位置，但一个路径中包含“数据”。

编写一个确定文件是否在数据目录中的 defun 相对简单，因此我实际上想从哪个存储库中签出。但是我想不出一种在任何 p4 命令之前调用我的函数的方法，而无需显式地重新绑定键来执行它，即使这也是一种大技巧。每次我尝试签出或还原文件并根据需要设置 p4port 时，我都希望它运行。

p4 系统中的所有钩子似乎都在我不希望它们被调用时被调用。我尝试在 p4-mode-hook 上调用我的 defun，但该挂钩仅在设置模式时运行，并且在我让我的 defun 执行任何操作之前，不在存储库中的文件被拒绝。：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:26:49.623

您可以使用几种方法。首先，您可以考虑将所需的函数添加到`pre-command-hook`，并使用谓词来检查当前缓冲区是否在 中运行`p4-mode`，即：

```
(add-hook
 'pre-command-hook
 (lambda ()
   (when (eq major-mode 'p4-mode)
     ;;; specify whatever functions you desire
     ))) 
```

这将在缓冲区中的*任何*命令`lambda`之前不加选择地执行您包含在上述主体中的函数。如果这太过分了，并且您需要对何时执行所述功能更有选择性，您可能应该单独建议在运行之前应首先执行您的功能的每个命令，例如：*`p4-mode``p4`*

 *```
(defadvice
  name-of-p4-function
  (before name-of-p4-function-advice activate)
  ;;; functions to be executed
  )

(ad-activate 'name-of-p4-function) 
```

有关更多详细信息，请参阅 Emacs 手册的[*Advising functions*部分](http://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)。*

# jquery - 如果禁用 js，则隐藏启用 js 时隐藏的相同 div

> ID：11266147
> 
> 赞同：0
> 
> 时间：2012-06-29T17:16:22.320
> 
> 标签：jquery

我有一个运行良好的产品页面的无限滚动条。出于 SEO 和“禁用 javascript”的目的，我需要提供一个甚至可以在禁用 js 的情况下使用的页面。

当滚动条在启用 js 的情况下正常工作时，会有一个带有加载器图像的隐藏 div。没什么特别的...问题是当 js 被禁用时，我真的无法隐藏该加载器图像或其中包含图像的 div。

当启用 js 时，我会隐藏某些元素：

```
jQuery(function($) { $('body').addClass('js');}); 
```

这对此不起作用：

```
<div class="overlay">
  <img src="https://site.com/ajax-loader.gif" />
</div> 
```

和jQuery：

```
 $(".overlay").fadeOut();
  $(window).scroll(function() { update(); });

});
///////////////// code /////////////
$(".overlay").fadeIn(); 
```

有什么建议么？

```
$(window).unbind('scroll'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:19:21.460

您可以使用 css ( `display:none;`) 默认隐藏 div，然后使用 JS 显示它。这样，当 JS 被禁用时，它不会妨碍内容。

# java - 解组中的 JAXB 设施

> ID：11266148
> 
> 赞同：0
> 
> 时间：2012-06-29T17:16:22.820
> 
> 标签：java, xml, parsing, jaxb, unmarshalling

大家好，我如何解组 XML 中的对象列表。我的 XML 将是这样的

```
<messageContainer class="class1">
    <a>         
        <b />
    </a>
    <MessageB />
</messageContainer>
<messageContainer class="class2">
    <a>         
        <b />
    </a>
    <MessageB />
</messageContainer> 
```

我想最后得到对象列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:50:20.173

任何有效的 XML 文件只能包含一个 XML 根元素。
我假设您将上述列表作为 RootElement（例如）的子项。

然后你的带注释的 RootElement 类应该是这样的。

> ```
> @XmlRootElement(name = "RootElement")
> public class RootElement{
>           @XmlElement(name = "messageContainer", required = true)
>           private List<messageContainer> containerList;
>   } 
> ```

MessageContainer 本身就是一个类。

**注意：**生成这些绑定类更简单的方法是，为您的 XML 编写 XSD（或使用在线工具生成）并使用 XJC 编译器编译这些 XSD。

# image-processing - 如何从直方图中获取阈值？

> ID：11266150
> 
> 赞同：12
> 
> 时间：2012-06-29T17:16:26.797
> 
> 标签：image-processing, opencv, computer-vision

我正在 OpenCV 中编写一个 Android 应用程序来检测 blob。一项任务是对图像进行阈值化以区分前景对象和背景（见图）。

只要图像是已知的，它就可以正常工作，并且我可以手动将阈值传递给 threshold()——在这个特定的图像中，比如 200。但是假设图像不知道，唯一的知识是会有一个黑暗纯色背景和较浅的前景对象如何动态计算阈值？

我遇到了可以计算灰度图像强度分布的直方图。但是我找不到分析直方图并选择感兴趣对象（较轻）所在的值的方法。那是; 我想将明显较暗的背景尖峰与较浅的前景尖峰区分开来——在这种情况下高于 200，但在另一种情况下，如果对象是灰色的，则可以说是 100。

![在此处输入图像描述](../Images/a18dc0ac5bf047bdac8cb2a85f82c4e7.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T19:41:20.793

如果你所有的图像都是这样，或者可以带成这种风格，我认为 cv2.THRESHOLD_OTSU，即 otsu 的阈值算法是一个很好的镜头。

以下是在命令终端中使用 Python 的示例：

```
>>> import cv2
>>> import numpy as np
>>> img2 = cv2.imread('D:\Abid_Rahman_K\work_space\sofeggs.jpg',0)

>>> ret,thresh = cv2.threshold(img2,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)

>>> ret
122.0 
```

`ret`是自动计算的阈值。我们只是将“0”作为阈值传递。

我在 GIMP 中得到了 124 分（这与我们得到的结果相当）。它还消除了噪音。见下面的结果：

![在此处输入图像描述](../Images/290372681f35dfc129480d4713ec2704.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T18:51:30.750

如果你说背景是暗的（黑色）而前景是亮的，那么我建议使用[YUV 颜色空间](http://en.wikipedia.org/wiki/YUV)（或任何其他**YXX** ，如**YCrCb**等），因为此类颜色空间的第一个组成部分是**亮度**（或**闪电**）。

![光通道](../Images/f4b06b9de2676cc3e5ae173a2600a6b5.png)

所以在提取**Y**通道之后（通过`extractChennel`函数）我们需要分析这个通道的直方图（图像）：

![直方图](../Images/7d236d47316a582063fa98ce1cc5e5a5.png)

看到第一个（左）驼峰了吗？它代表图像上的黑暗区域（您的情况下的背景）。所以我们现在的目标是找到一个包含这个驼峰的段（在横坐标上，它是图像中的红色部分）。显然这个段的左边点*为零*。正确的点是第一个点：

*   直方图的（局部）最大值从该点的左侧开始
*   histogram 的值小于一些小的*epsilon*（您可以将其设置为 10）

我画了一条绿色的垂直线来显示该直方图中线段右点的位置。

就是这样！该段的正确点是所需的阈值。结果如下（*epsilon*为 10，计算的*阈*值为 50）：

![结果](../Images/866573fa98d8a6259f3b79fc54aa9d63.png)

我认为删除上图中的噪点对您来说不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-18T16:28:40.023

以下是适用于 OpenCV 3.x 的 Abid 答案的 C++ 实现：

```
// Convert the source image to a 1 channel grayscale:
Mat gray;
cvtColor(src, gray, CV_BGR2GRAY);
// Apply the threshold function with the CV_THRESH_OTSU setting as well
// You can skip having it return the value, but I include it for showing the
// results from OTSU
double thresholdValue = threshold(gray, gray, 0, 255, CV_THRESH_BINARY+CV_THRESH_OTSU);
// Present the threshold value
printf("Threshold value: %f\n", thresholdValue); 
```

对原始图像运行它，我得到以下信息： [![在此处输入图像描述](../Images/7b3ace4444e1429f457a2c5518b34a12.png)](https://i.stack.imgur.com/WevIh.png)

OpenCV 为其计算了 122 的阈值，接近 Abid 在他的答案中找到的值。

只是为了验证，我改变了原始图像，如下所示：

[![在此处输入图像描述](../Images/161d4187e420bc49876b245b6ff35c12.png)](https://i.stack.imgur.com/YqjBA.jpg)

并产生了以下内容，新的阈值为 178：

[![在此处输入图像描述](../Images/519a4ca1c7518fab8aa96684e0b08e1d.png)](https://i.stack.imgur.com/SFgjO.png)

# c# - 如何从不同的域调用网页/服务？

> ID：11266152
> 
> 赞同：1
> 
> 时间：2012-06-29T17:16:31.150
> 
> 标签：c#, jquery, asp.net, cross-domain

我需要调用来自不同域的网页。当我从浏览器调用此页面时，它会正常响应。但是当我从服务器端代码或 jquery ajax 脚本调用它时，它会响应空 xml。

我正在尝试调用这样的页面或服务：

[http://www.otherdomain.com/oddsData.jsp?odds_flash_id=11&odds_s_type=1&odds_league=all&odds_period=all&me_select_string=&q=93801](http://www.otherdomain.com/oddsData.jsp?odds_flash_id=11&odds_s_type=1&odds_league=all&odds_period=all&me_select_string=&q=93801)

这通常从浏览器响应。但是当我像这样编写 ac# 代码时：

```
WebClient wc = new WebClient();
wc.Headers[HttpRequestHeader.UserAgent] = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5";
wc.Headers[HttpRequestHeader.Accept] = "*/*";
wc.Headers[HttpRequestHeader.AcceptCharset] = "ISO-8859-1,utf-8;q=0.7,*;q=0.3";
wc.Headers[HttpRequestHeader.AcceptEncoding] = "gzip,deflate,sdch";
wc.Headers[HttpRequestHeader.AcceptLanguage] = "en-US,en;q=0.8";
wc.Headers[HttpRequestHeader.Host] = "otherdomain.com";
var response = wc.DownloadString("http://www.otherdomain.com/oddsData.jsp?odds_flash_id=11&odds_s_type=1&odds_league=all&odds_period=all&me_select_string=&q=93801");
Response.Write(response); 
```

我得到空的 xml 作为响应：

```
<xml></xml> 
```

**如何从服务器端代码或客户端获得与浏览器相同的响应？**

我在这里尝试了解决方案：[Calling Cross Domain WCF service using Jquery](http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java)

所以我不明白该怎么做，我无法应用描述的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:19:36.470

> 如何从服务器端代码或客户端获得与浏览器相同的响应？

由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您不能从浏览器发送跨域 AJAX 请求。

另一方面，您可以从 .NET 完美地发送此请求。但是，您尝试向其发送请求的 Web 服务器可能需要一些 HTTP 标`User-Agent`头，例如标头。因此，请确保您在请求中提供了服务器需要的所有标头。例如添加`User-Agent`标题：

```
using (WebClient wc = new WebClient())
{
    wc.Headers[HttpRequestHeader.UserAgent] = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5";
    var response = wc.DownloadString("http://www.otherdomain.com/oddsData.jsp?odds_flash_id=11&odds_s_type=1&odds_league=all&odds_period=all&me_select_string=&q=93801");
    Response.Write(response);
} 
```

您可以使用 FireBug 或 Chrome 开发人员工具栏检查浏览器随有效请求发送的所有 HTTP 请求标头，然后简单地添加这些标头。

# javascript - 如何确保模块等到它们的依赖项加载到 require.js 中？

> ID：11266154
> 
> 赞同：4
> 
> 时间：2012-06-29T17:16:43.767
> 
> 标签：javascript, requirejs

加载同一页面时可能会出现大约 3 个不同的错误。刷新同一页面时出现不同的错误：jquery ui 在 jquery 之前加载，或者下划线没有及时加载成为依赖项。有没有办法确保配置模块等到它们的依赖加载后再加载自己？我正在使用以下内容：

main.js

```
require.config({
paths: {
    jQuery: 'libs/jquery/jquery-wrapper',
    Underscore: 'libs/underscore/underscore-wrapper',
    Backbone: 'libs/backbone/backbone-wrapper',
}
});
require([
'src/app',
'order!libs/jquery/jquery-min',
'order!libs/jquery/jquery-ui-min',
'order!libs/jquery/jquery.ui.selectmenu',
'order!libs/underscore/underscore-min',
'order!libs/backbone/backbone-min',
], function (App) {
App.initialize();
 }); 
```

我从页面中获取注入的依赖项。应用程序.js

```
define([
    'jQuery',
    'src/global'
], function ($) {

var initialize = function () {
    var d = $('#dependencies').html();
    require($.trim($('#dependencies').html().toString()).split(','), function () {
    });
}

return {
    initialize: initialize
}; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:23:18.433

我切换到 Require 2.0 并使用了大部分工作的垫片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:17:36.567

我正在使用 Require v2，它摆脱了订单。我切换回版本 1 并解决了问题。

# javascript - 有人能推荐一本 Dojo 和 JSON 的书吗？

> ID：11266156
> 
> 赞同：1
> 
> 时间：2012-06-29T17:17:23.910
> 
> 标签：javascript, json, dojo

这里的任何人都可以为研究生推荐一本好的 Dojo 和 JSON 书籍或教程网站吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:30:40.037

我拥有 David Flanagan 的最优秀的“Javascript：权威指南”，我同意 - 这是任何 Javascript 开发人员的必备品。

... 然而 ...

Flanagan 涵盖的一个框架是 jQuery（不是 Javascript）。

我推荐 Dojo 和 JSON 的在线 IBM 红皮书：

*   [http://www.ibm.com/developerworks/web/library/wa-ground/index.html](http://www.ibm.com/developerworks/web/library/wa-ground/index.html)

*   [http://www.ibm.com/developerworks/training/kp/wa-kp-dojo/](http://www.ibm.com/developerworks/training/kp/wa-kp-dojo/)

*   [http://www.ibm.com/developerworks/webservices/library/ws-rest1/](http://www.ibm.com/developerworks/webservices/library/ws-rest1/)

*   [http://www.ibm.com/developerworks/java/library/wa-jsonreststore/](http://www.ibm.com/developerworks/java/library/wa-jsonreststore/)

等等等等

*而且，甚至比 Flanagan（“The Rhino Book”）更*重要的是，我强烈推荐 Douglas Crockford 的“Javascript: The Good Parts”作为每个 Javascript 开发人员的必备品：

*   [http://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742](https://rads.stackoverflow.com/amzn/click/com/0596517742)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:28:23.813

我真的不建议阅读一本书，因为如果您知道如何查找它，您可以在网上非常接近相同的内容，但如果您坚持，权威的指南总是非常有帮助的（您需要购买两本关闭它们以获取有关 dojo 和 json 的信息）：

[http://www.amazon.com/Dojo-Definitive-Guide-Matthew-Russell/dp/0596516487](https://rads.stackoverflow.com/amzn/click/com/0596516487)

[http://www.amazon.com/JavaScript-Definitive-Guide-Activate-Guides/dp/0596805527/ref=pd_sim_b_1](https://rads.stackoverflow.com/amzn/click/com/0596805527)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T17:22:47.040

[Javascript：权威指南](https://rads.stackoverflow.com/amzn/click/com/0596101996)将教你所有你需要知道的（以及更多）关于 JSON 的知识，并让你为使用 Dojo、Mootools、jQuery 等框架做好准备。

# jakarta-ee - Java EE：为什么直接使用 JTA？

> ID：11266157
> 
> 赞同：21
> 
> 时间：2012-06-29T17:17:29.353
> 
> 标签：jakarta-ee, jta

我正在尝试了解 JTA 并使用 Bitronix 作为首选的事务管理器（只是为了学习和理解）。我在这里查看 Bitronix[参考指南](http://docs.codehaus.org/display/BTM/NewUserGuide)中的代码，我想知道：*如果我使用 JDBC，它本身是事务性的（`Connection`可以提交/回滚），我为什么要编写这样的代码？ ！？！*

现在，该代码片段的目的可能是简单地演示如何在现有的事务数据存储上使用 Bitronix/JTA，但我仍然没有得到它提供的内在好处。

然后，这个代码片段让我想到：“*如果您使用的唯一两个主要数据源是数据库和消息代理，并且您使用 JDBC/JMS 分别与它们进行通信，并且这两个标准（JDBC/JMS）已经是事务性的，那么为什么你根本需要使用 JTA？！？！* “

JTA 是 JDBC、JPA、JMS 等都使用的某种“内部”Java EE API；并且只为那些想要用它做一些疯狂的事情的 1% 人公开曝光？还是我完全错过了 JTA 的想法/适用性？

我想我可以设想两个非 JDBC 和非 JMS 用例直接命中 JTA，但由于我首先对 JTA 非常模糊，我不知道这些情况是否偏离轨道：

*   也许您的应用程序中有一个复杂的 I/O 系统，并且有多个线程读取/写入磁盘上的同一个文件。也许你会让每个线程使用一个事务来写入这个文件。（是吗？！？不？！？）
*   也许你有一个代表系统状态的状态机 POJO，多个线程可以修改机器。也许你会让每个线程使用一个事务来改变机器的状态。（是吗？！？不？！？）

我想我的问题的根源是：

*   如果我的 JPA (Hibernate) 和/或 JDBC 调用已经是事务性的，我为什么要将它们包装在 JTA begin->commit/rollback 块中？JMS 和消息系统也是如此。
*   在 JPA/JDBC/JMS 之外，还有哪些使用 JTA 来处理一系列操作的用例？

提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-02T10:41:48.670

它不仅仅是回滚打开的事务，JTA 提供了提供者可以实现的[XAResource](http://docs.oracle.com/javase/6/docs/api/javax/transaction/xa/XAResource.html)接口，您的 JDBC 驱动程序和 JMS 提供者已经这样做了，您可以实现自己的。这是基于开放标准的，可能值得一读。

现在我们为什么要这个？

考虑灾难中的马修斯示例：

```
Begin DB Transaction

Set AccountBalance $100 lower for Account #345 in database

Add JMS Message "Transfer $100 to OtherBank Account #987" to queue

*** DB power is unplugged while committing DB Transaction *** 
```

不幸的是，JMS 消息已经发送到另一家银行，这是分布式事务的一个非常现实的问题。

使用 XA，这就是场景的发展方式：

```
DB Transation starts XA Transaction

Set AccountBalance $100 lower for Account #345 in database

JMS Connection joins XA Transaction 

Add JMS Message "Transfer $100 to OtherBank Account #987" to queue

Everything went okay and JTA context is ready to commit.

DB and JMS both agree that they are capable of commiting.

JTA instructs DB and JMS to commit.

All members of the transaction commit. 
```

现在您可能会问，如果在 DB 的最终提交期间拔掉电源插头会发生什么。好吧，JMS 队列将已提交，但是 XA 事务将保持打开状态，直到 DB 再次可用，此时它将再次指示 DB 提交（DB 向我们承诺它可以提交，这是符合 XA 的一部分）。

JTA 真正伟大的地方在于您可以轻松实现自己的自定义 XAResource 并与这个伟大的框架联系起来！

**更新**

因此，要回答有关何时实施自定义交易的问题，您可以问自己以下问题：

1.  您的自定义状态或文件是否无法成为事务范围内的最终代码块？
2.  您是否需要在外部系统（即 DB 或 JMS）出现故障时恢复您的自定义状态/文件？
3.  外部系统的简单 getRollbackOnly() 和 setRollbackOnly() 以及自定义代码的补偿处理（即显式恢复自定义状态/文件）是否不足？

如果 1、2 和 3 的答案都是“是”，那么您可能需要自定义 XAResource，否则我认为这可能是矫枉过正。

但是，如果您的代码是一个框架或库，它将被 Java EE 空间中的业务逻辑征用，您可能希望为它实现一个 XAResource！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T17:26:26.993

您可以拥有*一个*同时涵盖数据库和消息服务的事务。如果没有 JTA，我不知道有什么方法可以做到这一点。

简单的概念示例。确切的代码并不重要：

> 开始 JTA 事务
> 
> 为数据库中的帐户 #345 设置 AccountBalance 100 美元以下
> 
> 将 JMS 消息“Transfer $100 to OtherBank Account #987”添加到队列
> 
> 提交 JTA 事务

OtherBank 是一个独立的银行，我们假设您通过 JMS 与它进行通信。

Begin Transaction 和 Commit 由 JTA 处理。如果将其添加到队列中失败，则提款也会自动回滚。

现实生活并不是那么简单，但这应该给你一个想法。

编辑：

JTA 可以在系统的任何部分可以正确实现的任何时候使用[`XAResource`](http://docs.oracle.com/javaee/6/api/javax/transaction/xa/XAResource.html)。通过实现这一点，资源可以参与分布式事务。乍一看，您提出的两个示例都可能实现`XAResource`.

“你的应用程序中有一个复杂的 I/O 系统，并且有多个线程读取/写入磁盘上的同一个文件。” - 如果您考虑一下，这听起来可能是一个数据库。

“也许你有一个代表系统状态的状态机 POJO，多个线程可以修改机器。” - 如果可以充分隔离更改，这绝对是一个候选者。

我认为量规的第一部分基本上是资源在逻辑上*可以*是`XAResource`s。换句话说，ACID 的概念是有意义的。第二个是实现该接口是可能的并且值得付出努力（在尚未实现的地方）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T16:49:00.907

In my opinion, the first consideration is to decorolate the TX manager and the TX system.

When I design my application, the word Transactional mark my intent to do something ACID. I want to put this intent in my business code as this should be driven by a business need.

I expect something magic (my container in the real life) will weave my tx intents correctly, depending the underlying TX system (database, jms broker, etc.)

Moreover, JTA defines somes interfaces to allow integration between an existing JTA system and a (eventually new, eventually exotic) TX system. For example: GigaSpaces XAP is an in-memory datagrid. It is not JMS, not SQL, but it's easy to plumb it as [it provides a JTA integration](http://docs.gigaspaces.com/xap102/transaction-management.html). We could quote many other products...

Obviously, the killer example is the support for XA transactions between different systems (I give a point to Justin). My point is to say JTA has value even if you don't use XA transaction.

# php - 使用阈值查找相似的十六进制颜色

> ID：11266159
> 
> 赞同：6
> 
> 时间：2012-06-29T17:17:39.837
> 
> 标签：php, javascript, image-processing

我有一组 RGB 十六进制颜色。我想找到一种快速而肮脏的方法来按颜色相似性和阈值对它们进行分组。

规格：![在此处输入图像描述](../Images/eb623fd54d4feb95298f55654ef39d9a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:07:14.437

又快又脏：

```
$dr = $red1   - $red2;
$dg = $green1 - $green2;
$db = $blue1  - $blue2;
$fr = 2; // may be adjusted
$fg = 4; // "
$fb = 1; // "
$distance_squared = $fr * $dr * $dr + $fg * $dg * $dg + $fb * $db * $db; 
```

然后，您将`$distance_squared`与阈值的平方进行比较。可以调整因子（特别是蓝色可能会得到更高的因子），以及它们的总和（为了匹配阈值）

对于“缓慢而干净”的解决方案，我将从[这里](http://en.wikipedia.org/wiki/Color_difference)开始（[这里](http://www.compuphase.com/cmetric.htm)是更实用的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:19:39.793

选择一个[颜色空间](http://en.wikipedia.org/wiki/List_of_color_spaces_and_their_uses)，并将“相似性”定义为例如两种颜色坐标之间的欧几里得距离。例如，HSL/HSV 可能是比 RGB 更好的选择。

# arrays - 将数组 .jsp 传递给 .jsp

> ID：11266163
> 
> 赞同：1
> 
> 时间：2012-06-29T17:17:55.693
> 
> 标签：arrays, jsp, parameter-passing

我想知道如何将数组或列表从一个 .jsp 页面传递到另一个页面。然后我想从这个数组中获取值并将它们分配给一个 javascript 数组。我想我已经正确配置了源 jsp 页面，但想知道如何获取第二个 .jsp 页面中的值。

这是我的源 .jsp 文件：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Firstjsp</title>
</head>
<body>
<Form Method = "Post" Action = "Mapper.jsp">
<% String locations[] = {"Loan 1", "33.890542", "151.274856", "Address 1","true", "-35404.34"};
for (int i =0; i<locations.length; i++)
{
%>
<Input type = "Hidden" name = "loc" value = "<%= locations[i] %>">
<%
}
%>
</Form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:31:38.567

您可以使用[`HttpServletRequest#getParameterValues()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29). 这将返回具有相同参数名称的所有参数值的字符串数组。在您的情况下，您在第一个 JSP 中生成了几个具有相同名称的隐藏 HTML 输入元素`loc`，因此在第二个 JSP（或者最好是[servlet](https://stackoverflow.com/tags/servlets/info)）中应该执行以下操作：

```
String[] locations = request.getParameterValues("loc"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:21:50.243

我认为最简单的方法是将变量（它甚至可以作为指针工作）作为会话变量。这样，只要代码在同一个会话下运行，您就可以在任何地方访问它。

`<% String name = request.getParameter( "username" ); session.setAttribute( "theName", name ); %>`

这个例子也用到了request。不同的是session比较突出。比如你在session中设置了一个变量那么即使你关闭浏览器重启它仍然存在。可以把它看成一个全局变量。Request是当您将数据从一个 jsp/servlet 发送到另一个 jsp/servlet 时最好使用它。它的生命周期基本上为 1。当您重定向页面时它会消失。

您可以使用`session.setParameter(name_of_the_variable,the_variable)`和`session.getParameter(name_of_the_variable)`。作为对我有用的提示，请始终确保测试返回的参数，在上面的“名称”的情况下，如果它不是 NULL。如果会话中没有具有该名称的变量，它将返回 NULL，并且大多数可能会崩溃。希望这会有所帮助！

# gwt - GWT 启动序列优化

> ID：11266164
> 
> 赞同：0
> 
> 时间：2012-06-29T17:17:56.707
> 
> 标签：gwt, optimization, startup

阅读 Goole 2010 IO pdf 的“使用 Google Web Toolkit 构建性能”，我发现这种方法可以减少启动时间：

更好：2 次往返：第一次：-主机页面-脚本 URL-初始数据第二次：-编译脚本

它不是默认 GWT 设置：4 次往返 - 主机页面 - 选择脚本 - 编译脚本 - 初始数据

我的问题是我不知道如何实现“2 往返解决方案”。你可以帮帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:42:03.063

其实很简单：

*   在您的页面中内联选择脚本（可以使用特殊的 GWT 链接器或使用 JSP 包含指令来完成 - 我已经成功地使用了后者，更容易 - 并添加一个`<meta name='moduleName::gwt:property' content='baseUrl=moduleName/'>`告诉内联选择脚本在哪里找到编译的排列。
    从技术上讲，你可以走得更远，用服务器端内容协商替换选择脚本。我相信谷歌会这样做（例如谷歌组）但它有点困难（通过模块化使方式更简单`CrossSiteIframeLinker`，但仍然没那么容易）。

*   对于初始数据，请参阅[https://developers.google.com/web-toolkit/articles/dynamic_host_page](https://developers.google.com/web-toolkit/articles/dynamic_host_page)和[http://jectbd.com/?p=1174](http://jectbd.com/?p=1174)（我一直在使用 AutoBeans 来传递用户信息和应用程序设置到 GWT 应用程序）

# c# - 将属性设置为仅允许在文本框中使用双打

> ID：11266166
> 
> 赞同：2
> 
> 时间：2012-06-29T17:18:03.477
> 
> 标签：c#

我记得在 getter/setter 上使用了一些属性，它将输入限制为特定的数据类型、长度等。IE [Attribute something something]。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:25:32.937

一种方法（如果您想继续使用标准文本框）是为文本框的文本更改事件创建一个事件，并在其中阅读文本以确保它仅包含数字（并且双重情况下的可选句点）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:36:41.490

你的意思是[`ValidateInput`](http://msdn.microsoft.com/en-us/library/system.web.mvc.validateinputattribute.aspx)可用的属性`System.Web.Mvc`吗？

[`MaskedTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)此外，如果您正在使用 WinForms ，您可能会使用 a 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:09:33.557

窗体？您是否考虑过使用蒙版的文本框控件？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T17:21:03.707

窗体？为什么不使用 NumericUpDown？

[http://msdn.microsoft.com/en-us/library/57dy4d56.aspx](http://msdn.microsoft.com/en-us/library/57dy4d56.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.aspx)

如果你需要科学记数法，你可以这样做：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    TextBox tBox = (TextBox)sender; 

    if (!((e.KeyCode >= Keys.D0 && e.KeyCode <= Keys.D9)
       || (e.KeyCode >= Keys.NumPad0 && e.KeyCode <= Keys.NumPad9)
       || (e.KeyCode == Keys.Decimal && !(tBox.Text.Contains('.')) 
           && !(tBox.Text.Length == 0)
           && !((tBox.Text.Length == 1) 
              && (tBox.Text.Contains('-') || tBox.Text.Contains('+'))))
       || (e.KeyCode == Keys.OemPeriod && !(tBox.Text.Contains('.'))
           && !(tBox.Text.Length == 0)
           && !((tBox.Text.Length == 1) 
              && (tBox.Text.Contains('-') || tBox.Text.Contains('+'))))
       || (e.KeyCode == Keys.Subtract && ((tBox.Text.Length == 0) || 
           tBox.Text.EndsWith("e") || tBox.Text.EndsWith("E")))
       || (e.KeyCode == Keys.OemMinus && ((tBox.Text.Length == 0) || 
           tBox.Text.EndsWith("e") || tBox.Text.EndsWith("E")))
       || (e.KeyCode == Keys.Add && ((tBox.Text.Length == 0) ||  
           tBox.Text.EndsWith("e") || tBox.Text.EndsWith("E")))
       || (e.KeyCode == Keys.Oemplus && ((tBox.Text.Length == 0) || 
           tBox.Text.EndsWith("e") || tBox.Text.EndsWith("E")))
       || e.KeyCode == Keys.Delete
       || e.KeyCode == Keys.Back
       || e.KeyCode == Keys.Left
       || e.KeyCode == Keys.Right
       || (e.KeyCode == Keys.E) && !(tBox.Text.Contains('e')) && 
           (tBox.Text.Contains('.') && !tBox.Text.EndsWith("."))))
        {
            e.SuppressKeyPress = true;
        }
    } 
```

这将拒绝输入任何与数值不一致的模式。减号只允许在字符串的开头（表示负数）和`e`or之后`E`表示负指数。加号遵循与减号相同的规则。只允许一个小数点，并且必须跟在至少一个数字后面。只允许使用一个`e`或`E`，并且它必须跟在小数点之后，并且小数点后至少有一个数字。

如果会干扰程序功能的其他方面，您还可以允许使用`Help`,`Tab`等键。

请注意，这并不能防止不完整的数字（即：`1.37E-`或被`-13.`输入，因此您可能希望在任何情况下检查字符串。这至少会拒绝任何立即无效的条目。

您可能会做类似的事情（在同一个处理程序中，在其他逻辑之前）：

```
if (e.KeyCode == Keys.Enter)
{
    textBox1_Validating(sender, new CancelEventArgs());
    return;
} 
```

以上仅给输入键提供了正常的输入“感觉”（强制验证）。离开文本框（失去焦点）也会触发验证，您可能会执行以下操作：

```
private void textBox1_Validating(object sender, CancelEventArgs e)
{
    TextBox tBox = (TextBox)sender; 
    double tstDbl;
    if (!double.TryParse(tBox.Text, out tstDbl)) 
    {
        //handle bad input
    }
    else
    {
        //double value OK
        doSomething(tstDbl);
    }            
} 
```

# android - 如何动态创建Activity

> ID：11266167
> 
> 赞同：-1
> 
> 时间：2012-06-29T17:18:04.037
> 
> 标签：android

我对我的应用程序有一些想法。但我不知道该怎么做。基本，我们创建活动然后加载它，或者从按钮调用另一个活动......我的想法是：我们有一个 ListView，可以添加，删除项目。所以每次我们添加一个项目，我们也添加一个活动。列表视图中有多少项目，所以活动也很多。何要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:25:22.750

抱歉，您无法**动态创建活动**，但您可以将已存在的活动分配给列表视图中的项目数。

您还可以根据不同的值使您的活动表现不同，但这一切都取决于您的要求和您的逻辑实现。

确保您的所有活动都列在清单中。**请记住**。

检查[这个](https://stackoverflow.com/a/6313799/582571)和[这个](https://groups.google.com/group/android-developers/browse_thread/thread/5b476d648da729d0)链接提到的相同。

# linux - 为什么 Apache + PHP 需要执行权限才能写入文件？

> ID：11266173
> 
> 赞同：9
> 
> 时间：2012-06-29T17:18:24.863
> 
> 标签：linux, file-permissions

一直让我感到困惑的是，如果一个文件夹具有读写权限，Apache + PHP 就无法对其进行写入。您必须结束授予 apache 执行权限才能在该文件夹中写入文件。为什么？

例如，使用 chmod 664（其中构建组包括 apache 用户）apache 将无法在此文件夹中写入临时缓存文件：

```
drw-rw-r--  5 jenkins build 4096 Jun 15 13:05 cache 
```

而使用 chmod 774 apache 将能够将新文件写入文件夹：

```
drwxrwxr--  5 jenkins build 4096 Jun 29 11:44 cache 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T17:20:27.573

您需要执行权限才能从概念上进入一个目录（cd 进入它，列出其中的文件等）。如果他们将这个位称为目录的其他名称会更清楚。本文建议将其视为目录的“搜索”权限[。](http://content.hccfl.edu/pollock/aunix1/filepermissions.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:23:30.143

当为目录设置这些权限时，它可以访问元信息和访问内容，我认为这就是您需要执行的原因。

# ruby - 根据 Ruby 中的关键字和活动将用户与对象匹配

> ID：11266178
> 
> 赞同：0
> 
> 时间：2012-06-29T17:18:44.673
> 
> 标签：ruby, algorithm, keyword

我有已通过社交媒体网站进行身份验证的用户。现在，根据他们最近的 X 个（假设是 200 个）帖子，我想绘制出该内容与有限关键字列表的匹配程度。

什么是最好的方法来捕获相关的单词/概念（也许这太难了）或者只是得到一个分数，比如说，我的推文历史映射到“海象”或“香蕉”？

天真的贝叶斯会在这里工作以区分“匹配”和“不匹配”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:52:54.207

在这种情况下，一个简单的贝叶斯就可以工作，它被广泛用于检测电子邮件是否是垃圾邮件，对于一个简单的关键字匹配它应该可以很好地工作。

对于这个问题，您还可以应用推荐系统，在其中为用户（或帖子）寻找最推荐的关键字。

有很多方法可以做到这一点。我建议您阅读[Programming Collective Intelligence](https://rads.stackoverflow.com/amzn/click/com/0596529325)。它是使用 python 解释的，但是由于您知道 ruby​​，因此理解代码应该没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:44:07.033

在 Python 中，我会说 NLTK 可以轻松做到这一点。[在 Ruby 中，名为lda-ruby 的](https://github.com/ealdent/lda-ruby/)gem 可能会对您有所帮助。整个 LDA 概念[在这里](http://blog.echen.me/2011/08/22/introduction-to-latent-dirichlet-allocation/)得到了很好的解释——例如，看看 Sarah Palin 的电子邮件。甚至还有一个应用程序示例（不完全使用 Ruby，但仍然如此）-> github.com/echen/sarah-palin-lda

或者，也许我只是说一些愚蠢的话，这对你一点帮助都没有。我不是专家；）

# php - 加入2个mysql表

> ID：11266180
> 
> 赞同：0
> 
> 时间：2012-06-29T17:18:45.923
> 
> 标签：php, mysql

我有 2 张桌子

餐桌技巧

```
id | skill
----------
1 | skill 1
2 | skill 2
3 | skill 3 
```

第二个表 user_skills，其中 user_skills.skill_1 = Skills.id (1) AND user_skills.skill_2 = Skills.id (2) AND user_skills.skill_3 = Skills.id (3)

```
id | user_id | skill_1 | skill_2 | skill_3
------------------------------------------
1  | 3       | 2       | 4       | 5 
```

我需要这样的输出：

```
skill 1 -- 2
skill 2 -- 4
skill 3 -- 5 
```

我尝试了左加入，但没有结果。欢迎任何帮助。

欧梅里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:31:43.777

嗨，您不应该将值组存储为列或列中的值组，在表中。这违反了数据库设计的第一范式，并且会在错误的地方回来咬你。

你的用户技能表应该是这样的：

```
id | user_id | skill
------------------------------------------
1  | 3       | 2
2  | 3       | 4
3  | 3       | 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:05:11.720

在第一个表（技能）中，我只有带有 id-s 的技能名称。在第二个表中，我有用户技能水平。Skill_1 与技能表中的技能 ID 1 相同。所以我需要输出所有技能和用户技能水平

技能名称（来自第一个表） - 技能级别（来自第二个表）

奥梅里

# c# - IE 想下载 JSON 结果....MVC3

> ID：11266183
> 
> 赞同：2
> 
> 时间：2012-06-29T17:18:51.137
> 
> 标签：c#, javascript, asp.net-mvc-3

我的 MVC3 应用程序将用户的文档上传到我们的服务器。我正在返回一个 JsonResult 以显示任何错误（如果有）：

```
 [HttpPost] 
    public JsonResult SaveDocument(DocumentModel model, HttpPostedFileBase postedFile)
    {
         //my wonderful code
         return Json(new { success = true, message="ok" });

     } 
```

以下是我提交请求的方式：

```
 var isSubmitting = false;
  var addDocumentOptions = {
       beforeSubmit: beforeAddDocumentSubmit,  // pre-submit callback 
      success: afterDocumentSubmit  // post-submit callback 
  };
  $('#btnCreateDocument').click(function (e) {
      e.preventDefault();
      $('#divError').html('');
      if (!isSubmitting) {
          $('#createDocForm').submit();
      }
    }); 
```

此 javascript 函数在上传完成后运行：

```
 function afterDocumentSubmit(responseText, statusText, xhr, $form) {
        if (responseText.success) {
            //no errors
          } else {
             $('#divError').html('Error: ' + responseText.message);
     }
   } 
```

在 FF、Chrome 等中，我的 javascript 代码运行良好，但在 IE 中，浏览器希望将 Json 结果作为文本下载。我得到一个不应该出现的下载/打开文件对话框。如何让 IE 不下载我的 Json 结果并像其他浏览器一样运行？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T17:29:16.980

我在 Java 上的 Spring MVC 中遇到了类似的问题。问题是 Spring 将 JSON 结果的内容类型返回为`application/json`，这似乎让 IE 想要下载它。您可以尝试将内容类型更改为`text/plain`; 在这种情况下，IE 不会提示您下载文件。我怀疑这里可能会发生类似的事情。

你可以试试：

```
return Json(new { success = true, message = "ok" }, "text/plain"); 
```

针对您的新问题：问题在于这`responseText`只是一个字符串。您需要做的是将其转换为 Javascript 对象。你可以这样做：

```
var response = JSON.parse(responseText);
if(response.success) {
   ...
} 
```

大多数浏览器都支持`JSON.parse()`. 如果您在使用不兼容的浏览器时遇到问题，您可以随时使用[JSON Javascript 库](http://json.org/js.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:31:34.560

大胆猜测：您正在使用[jquery.form](http://jquery.malsup.com/form/)插件，该插件使您能够使用 AJAX 上传文件，并且您尚未阅读说明以下内容的[文档](http://jquery.malsup.com/form/#file-upload)：

> 支持 XMLHttpRequest Level 2 的浏览器将能够无缝上传文件，甚至在上传过程中获得进度更新。对于较旧的浏览器，使用涉及 iframe 的回退技术，因为无法使用 XMLHttpRequest 对象的 1 级实现来上传文件。这是一种常见的后备技术，但它具有固有的局限性。iframe 元素用作表单提交操作的目标，这意味着将服务器响应写入 iframe。如果响应类型是 HTML 或 XML，这很好，但如果响应类型是脚本或 JSON，则效果不佳，这两种类型通常都包含在 HTML 标记中找到时需要使用实体引用来表示的字符。
> 
> 为了解决使用 iframe 模式时脚本和 JSON 响应的挑战，Form Plugin 允许将这些响应嵌入到 textarea 元素中，建议您在与文件上传和旧版本结合使用时对这些响应类型这样做浏览器。但是请注意，如果表单中没有文件输入，则请求使用普通 XHR 提交表单（不是 iframe）。这给你的服务器代码增加了知道什么时候使用 textarea 什么时候不使用的负担。

[既然您已经阅读了它，那么如果您希望您的代码在 IE 下运行，正如我在这篇文章](https://stackoverflow.com/a/9428595/29407)中所举例说明的那样，您应该采取相应的措施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T17:37:07.063

正确的 JsonResult 返回应该如下所示：

```
[HttpPost] 
public JsonResult SaveDocument(DocumentModel model, HttpPostedFileBase postedFile)
{
    ...
    return Json(new { success = true, message="ok" }, "application/json; charset=utf-8", JsonRequestBehavior.AllowGet);
} 
```

# unit-testing - 使用安全性对远程 EJB bean 进行单元测试

> ID：11266186
> 
> 赞同：0
> 
> 时间：2012-06-29T17:19:02.147
> 
> 标签：unit-testing, junit, glassfish, ejb, declarative-security

这个问题类似于[Java EE 声明式安全性，从应用程序客户端获取对安全 bean 的引用，](https://stackoverflow.com/questions/10584929/java-ee-declarative-security-acquiring-reference-to-a-secured-bean-from-applica)但更具体。

我可以使用 Glassfish 嵌入式容器对本地 bean 进行单元测试。对于远程 bean，我编写了应用程序客户端。在远程 bean 应用安全性之前，这是一个可行的解决方案。现在我遇到了向 Glassfish 3.1.1 验证应用程序客户端的问题。

现象：

*   使用应用程序客户端在没有安全性的情况下测试远程 bean 是可以的。
*   使用 ProgrammaticLogin 应用程序使用安全性的方法不起作用，我不确定它是否是解决单元测试问题的正确方法。（请参阅开头的附加链接。）

问题：

*   您认为应该如何使用远程 bean 进行具有安全性的单元测试？
*   需要将 glassfish-ejb-jar.xml 放在哪里？（在我的情况下这可能是错误的，这就是 ProgrammaticLogin 不起作用的原因。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:24:42.777

我继续在互联网上搜索更多信息，我遇到了以下博客：[http](http://www-02.imixs.com/roller/ralphsjavablog/entry/junit_and_glassfish_3_1) ://www-02.imixs.com/roller/ralphsjavablog/entry/junit_and_glassfish_3_1 。

*   它回答了如何在没有任何第三方工具的情况下在 Glassfish 3.1.1 上测试 EJB 3.1。这有点棘手。
*   我还没有尝试过安全设置，但也有一个关于此的示例。

# java - 不完整的 WSDL - 帐户类缺少与自定义对象的子关系

> ID：11266196
> 
> 赞同：0
> 
> 时间：2012-06-29T17:19:45.233
> 
> 标签：java, wsdl, salesforce

我生成了一个企业 WSDL，其中 Account 类有一堆字段以及与自定义和本机对象的关系，但没有我需要在我的代码中使用的关系。

任何想法为什么它被省略？我知道 WSDL 是根据创建它的用户的权限生成的，但这里不是这种情况。

更多详细信息，如果需要：

自定义对象名称为“Attachment_Category__c”。它与 Account 的子关系称为**R00N30000000vdrhEAA**。

我希望在 Account 类中看到以下字段声明：

```
 private com.sforce.soap.enterprise.QueryResult R00N30000000vdrhEAA; 
```

类似于已经存在的以下内容：

```
 private com.sforce.soap.enterprise.QueryResult notesAndAttachments; //standard object
    private com.sforce.soap.enterprise.QueryResult legal_Documents__r;  //custom object 
```

我还期望 Account 类中有一个**getR00N30000000vdrhEAA()**方法，就像它目前有**getLegal_Documents__r()**一样，但它不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:40:23.110

您需要进入设置并为关系命名。

# tsql - TSQL 透视单列表

> ID：11266197
> 
> 赞同：0
> 
> 时间：2012-06-29T17:19:57.127
> 
> 标签：tsql, pivot

抱歉，我休息了几天，并且没有指定确切的表结构。请忽略上面的描述。我有更多信息，因此我的原始问题不再有效，因为我获得了有关我真正需要的更多信息，如下所述：

我有下表（为了讨论的简化版本）。第一行是标题：

```
VariableID  DocumentID  Revision  Value
44          12          2         Val1
45          12          2         Val2
45          12          3         Val3
44          13          1         Val4
46          13          2         Val5
47          14          1         Val6 
```

我想将它（假设 n 行数）转换为以下按（DocumentId，revision）表分组：

```
Documentid  revision  variable1 (44)  variable2 (45)  variable3(46)  variable(47)  variable (n)
12          2         Val1            Val2            null           null
12          3         null            Val3            null           null
13          1         Val4            null            null           null
13          2         null            null            Val5           null
14          1         null            null            null           Val6 
```

变量的数量将被动态检索。我不知道源表中有多少变量作为输入。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:32:34.240

您没有提供有关当前表结构或示例数据的大量详细信息。因此，我将为您提供一些执行此操作的[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数示例。

PIVOT 有两个选项，一个静态（如果您知道要转换的列数）或一个动态，它将在运行时获取要转换的列列表。

编辑：根据您对问题的更改，您仍然可以执行 PIVOT

静态枢轴看起来像这样（[Sql Fiddle 示例](http://sqlfiddle.com/#!3/6b08e/1)）：

```
select *
from 
(
  select *
  from t
) x
pivot 
(
  max(value)
  for variableid in([44], [45], [46], [47])
) p 
```

由于动态枢轴看起来像这样（[Sql Fiddle 示例](http://sqlfiddle.com/#!3/6b08e/11)）：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsAlias AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(variableid) 
                    from t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

SELECT @colsAlias = STUFF((SELECT DISTINCT ',' + QUOTENAME(m.variableid) + ' AS ' + QUOTENAME('variable' + cast(n.variableid as varchar(10)))  
    FROM t m INNER JOIN t n ON m.variableid = n.variableid
    FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

set @query = 'SELECT documentid, revision, ' + @colsAlias + ' from 
             (
                select *
                from t
            ) x
            pivot 
            (
                max(value)
                for variableid in (' + @cols + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:24:41.050

PIVOT 运算符听起来就像您正在寻找的那样，它在 Microsoft SQL Server 和 Microsoft Access 中都可用，但我不确定它是否在 Sybase 中可用。这是关于它的 MSDN 文章：[T-SQL Pivot Operator](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

# php - 如何用 PHP 解析这个 XML

> ID：11266204
> 
> 赞同：1
> 
> 时间：2012-06-29T17:20:28.950
> 
> 标签：php, xml

通常我必须解析的 XML 文件是这样的：

```
<row id="1">
    <title>widget<title>
    <color>blue<color>
    <price>five<price>
</row> 
```

然后我会像这样解析：

```
$xmlstr_widget = file_get_contents($my_xml_feed);
$feed_widget = new SimpleXMLElement($xmlstr_widget);

foreach($feed_widget as $name) {
    $title = $name->title;
    $color = $name->color;
    $price = $price->price;
  } 
```

效果很好！但是现在我的 xml 格式有点不同，我有点难过，因为我没有很多 xml 解析经验：

```
<Widget Title="large" Color="blue" Price="five"/>
<Widget Title="small" Color="red" Price="ten"/> 
```

我如何进一步深入研究并正确解析它？我尝试了几件事，但没有成功。

所以问题是当我尝试使用不同的 xml 提要进行类似下面的操作时，我无法回显任何结果。

```
foreach($feed_widget as $name) {
    $title = $name->title;
    $color = $name->color;
    $price = $price->price;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:27:49.990

您可以使用该[`attributes()`](http://us.php.net/manual/en/simplexmlelement.attributes.php)方法获取元素的属性列表：

```
foreach ($xml as $element) {
    foreach ($element->attributes() as $name => $value) {
        echo "$name = $value\n";
    }
} 
```

输出：

```
Title = large
Color = blue
Price = five
Title = small
Color = red
Price = ten 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:28:16.873

您可以像访问关联数组中的元素一样访问属性：

```
foreach($feed_widget as $name) {
    $title = $name['Title'];
    $color = $name['Color'];
    $price = $name['Price'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T17:26:56.327

您需要使用元素的 attributes()。

例如，你想做

```
$feed_widget -> attributes() -> Color; 
```

会给你“蓝色”

资源：[http ://www.w3schools.com/xml/xml_attributes.asp](http://www.w3schools.com/xml/xml_attributes.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T17:30:50.120

```
<Widget Title="large" Color="blue" Price="five"/> 
```

是简写

```
<Widget Title="large" Color="blue" Price="five"></Widget> 
```

Title="large" Color="blue" 等是 XML 标记的属性。您在问题中提供的 foreach 语句提取了 XML 标记的内容（出现在开始和结束标记之间的内容）。你不会得到任何东西，因为 CONTENTS 是一个长度为零的字符串。

[http://www.php.net/manual/en/simplexmlelement.attributes.php](http://www.php.net/manual/en/simplexmlelement.attributes.php)

# android - 如何使用我的设备调试这个 android 错误？

> ID：11266205
> 
> 赞同：0
> 
> 时间：2012-06-29T17:20:29.123
> 
> 标签：android, titanium, ddms

我在`DDMS`. 但是我如何才能将其追溯到引发此异常的行？您认为以下错误的原因可能是什么？

![在此处输入图像描述](../Images/e7ba760fa638efcb759b8f70118da731.png)

是检查`DDMS`调试 android 应用程序的最佳方法吗？我正在使用钛。

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:26:58.990

您的应用程序尝试将字符串转换为其中一种数字类型，但该字符串没有适当的格式。

# objective-c - 使用正则表达式评估重复部分的字符串

> ID：11266207
> 
> 赞同：0
> 
> 时间：2012-06-29T17:20:42.880
> 
> 标签：objective-c, ios, regex, nsstring

我还没有在objective-c中使用过正则表达式。我现在要做的是评估一个字符串，看看它是否包含 4 个或 5 个字符的重复模式——任何模式都没有关系。例如，字符串 like`@"testA54RqA54Rq"`会从正则表达式返回一个真值，而字符串 like`@"testA54Rq"`不会。现在我只是生成所有可能的 4 和 5 个字符的子字符串并将它们相互匹配，但显然这是非常低效的。我在哪里可以找到一些关于如何开始在 Objective C 中使用正则表达式的资源？如果有人在一个小例子之前遇到过这种情况，那就太好了。

**-编辑-**

我也想有类似`@"testQWEr30BKRe40"`return true 的东西（4个字母后跟2个数字的模式）。我不确定这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:27:51.740

你可能想看看：

[https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

我相信实际的正则表达式只是：`(\\w{4,5})\\1`

* * *

```
NSString *regexStr = @"(\\w{4,5})\\1"; 
NSError *error = nil; 
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexStr options:0 error:&error]; 
if ((regex==nil) && (error!=nil)) {
  warn( @"Regex failed for: %@, error was: %@", string, error); 
} else {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:58:07.370

对于确切的模式，您将能够使用正则表达式进行此类验证`(.{4,5})\\1`

如果你想做类别模式，比如 4 个字母后跟 2 个数字，那么你必须：

1.  用一个不变的字母替换所有字母（例如替换`[a-zA-Z]`为`X`）
2.  用一个常数替换所有数字（例如替换`\\d`为`0`）
3.  使用与上所示相同的正则表达式验证此类修改后的输入

# wpf - 在 Visual Studio 中构建项目会使引用停止工作？

> ID：11266209
> 
> 赞同：1
> 
> 时间：2012-06-29T17:20:44.297
> 
> 标签：wpf, vb.net, visual-studio-2010, dll

我什至不知道如何描述这个。我有一个 WPF 项目，我已经添加了一些库。我以前在许多其他项目中使用过的库。我有一个奇怪的问题，当输入代码时，intellisense 可以很好地从库中填充东西，但是一旦我进行构建，VS 就像所有这些东西都没有声明一样。导入语句突然说我正在尝试引用不存在的东西等。但是如果我清理构建，所有引用都会恢复正常。

我完全被难住了，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:35:22.850

如果您以客户端配置文件为目标，我已经看到了这一点，但是某些 DLL 需要完整的 .net 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:41:11.997

如果您使用基于文件的对库 ($ref) 的引用，这些库 ($ref) 在与您添加对 ($proj) 引用的解决方案相同的解决方案中具有相应的项目，则可能会发生这种情况。

Visual Studio 无法（可靠地）理解构建顺序并无序构建项目（$proj 在 $ref 之前构建，但在清理 $ref 的输出之后）。

如果您遇到这种情况，只需将引用更改为基于项目的引用即可。

同样，确保没有会更改或移动文件的构建事件。

此外，VS 有时会搜索参考并在您不期望的位置选择文件。突出显示参考并检查其属性页，并确保它确实在您认为的位置。

# ruby-on-rails - 包含和扩展模块上的行为

> ID：11266227
> 
> 赞同：0
> 
> 时间：2012-06-29T17:21:53.740
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在玩`include`，`extend`今天发现了一些我不太明白的东西。

```
module Dragon
  def roar
    'roar'
  end
end

module Knight
  include Dragon

  def fight
    'fight'
  end
end

class Other
  extend Knight
end

puts Other.roar # -> 'roar' 
```

**为什么它`roar`可以作为类方法使用`Other`？**我做了`extend Knight`这使得`Knight's`方法可以作为类方法使用。`Knight`反过来会`include Dragon`，但这应该使`Dragon`方法可以作为`instance`方法使用。但这不是这里发生的唯一奇怪的事情，你也不能创建模块的实例，那为什么我可以`include`在一个模块上呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:50:15.677

1）您将 Dragon 模块中的方法包含到 Knigth 模块中（如 mixin）。

2）当你扩展类时，来自Knight的所有方法（已经包含了Dragon方法）成为类Other的类方法。这是正常现象，看不出有什么问题。

另一个问题你想达到什么目标？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T05:12:07.717

Include 使 roar 或 Fight 方法可用于类的实例，而 extend 使 roar 或 Fight 方法可用于类本身。

# ruby - Ruby - Time.now.to_date.next_month.begin 给出错误而不是下个月的第一天

> ID：11266229
> 
> 赞同：0
> 
> 时间：2012-06-29T17:22:00.927
> 
> 标签：ruby, datetime, date, time

当我使用：

```
require 'date'
Time.now.to_date.next_month 
```

它返回

```
 => #<Date: 2012-07-29 ((2456138j,0s,0n),+0s,2299161j)> 
```

如果我尝试制表符完成，`Time.now.to_date.next_month.`我会看到：

```
1.9.3p194 :081 > Time.now.to_date.next_month.be
Time.now.to_date.next_month.begin     Time.now.to_date.next_month.between? 
```

但如果我尝试`Time.now.to_date.next_month.begin`我得到

```
1.9.3p194 :081 > Time.now.to_date.next_month.begin
NoMethodError: undefined method `begin' for #<Date: 2012-07-29 ((... 
```

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:34:40.650

这是因为您在同一行中实例化并寻求建议。

```
Time.now.to_date.next_month.be<tab> #=> contains "begin"

t = Time.now.to_date.next_month
t.be<tab> #=> Does not contain "begin" 
```

由于 Ruby 解释器没有处理表达式，它不知道它正在处理什么样的类，因此当你 时`<tab>`，它只是给你一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:40:42.660

这是因为函数重载。当您有任何疑虑时，请先查看 API 参考，然后提出问题。

不返回下个月的第一个日期，因为 Date 中没有这个函数。在所有对象上总共定义了 719 个函数，尝试在任何对象上按 Tab 键并开始和之间恰好是这样的函数。

“IRB auto_complete 保证函数是你想要的”的核心假设是完全错误的和错误的。

# c++ - std::unordered_map 插入错误

> ID：11266232
> 
> 赞同：2
> 
> 时间：2012-06-29T17:22:12.787
> 
> 标签：c++, insert, c++11, compiler-errors, unordered-map

我有以下 unordered_map，它使用 int 类型的键将指针映射到 Item 类型的对象。

```
typedef std::unordered_map<int, Item*> ItemList;
ItemList Items; 
```

但是，在我的 addItem 方法中，我在编译时收到一个奇怪的错误。

```
void ItemManager::addItem(Item *it)  {
    int i = it->getItemID();
    Items.insert(ItemList::value_type(i, *it));
} 
```

产量：

```
item_manager.cc: In member function ‘void ItemManager::addItem(Item*)’:
item_manager.cc:31:51: error: no matching function for call to ‘std::pair<const int, Item*>::pair(int&, Item&)’
item_manager.cc:31:51: note: candidates are:
/usr/include/c++/4.6/bits/stl_pair.h:140:2: note: template<class ... _Args1, class ... _Args2> std::pair::pair(std::piecewise_construct_t, std::tuple<_Args1 ...>, std::tuple<_Args2 ...>)
/usr/include/c++/4.6/bits/stl_pair.h:135:2: note: template<class _U1, class _U2> std::pair::pair(std::pair<_U1, _U2>&&)
/usr/include/c++/4.6/bits/stl_pair.h:131:2: note: template<class _U1, class _U2, class> std::pair::pair(_U1&&, _U2&&)
/usr/include/c++/4.6/bits/stl_pair.h:125:2: note: template<class _U2, class> std::pair::pair(const _T1&, _U2&&)
/usr/include/c++/4.6/bits/stl_pair.h:120:2: note: template<class _U1, class> std::pair::pair(_U1&&, const _T2&)
/usr/include/c++/4.6/bits/stl_pair.h:112:17: note: constexpr std::pair<_T1, _T2>::pair(const std::pair<_T1, _T2>&) [with _T1 = const int, _T2 = Process*, std::pair<_T1, _T2> = std::pair<const int, Process*>]
/usr/include/c++/4.6/bits/stl_pair.h:112:17: note:   candidate expects 1 argument, 2 provided
/usr/include/c++/4.6/bits/stl_pair.h:108:21: note: template<class _U1, class _U2> constexpr std::pair::pair(const std::pair<_U1, _U2>&)
/usr/include/c++/4.6/bits/stl_pair.h:103:26: note: constexpr std::pair<_T1, _T2>::pair(const _T1&, const _T2&) [with _T1 = const int, _T2 = Process*]
/usr/include/c++/4.6/bits/stl_pair.h:103:26: note:   no known conversion for argument 2 from ‘Process’ to ‘Process* const&’
/usr/include/c++/4.6/bits/stl_pair.h:99:26: note: constexpr std::pair<_T1, _T2>::pair() [with _T1 = const int, _T2 = Process*]
/usr/include/c++/4.6/bits/stl_pair.h:99:26: note:   candidate expects 0 arguments, 2 provided 
```

任何想法可能导致这些错误？我是 C++ 新手，所以我一直在研究我在网上找到的 unordered_maps 示例。任何帮助是极大的赞赏。谢谢，麻烦您了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:25:45.643

地图中的值属于类型`Item*`，因此您需要插入`Item*`，而不是`Item`。这条线

```
 Items.insert(ItemList::value_type(i, *it)); 
```

应该

```
Items.insert(ItemList::value_type(i, it)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:25:22.127

您不需要取消引用指针：

```
void ItemManager::addItem(Item *it)  {
    int i = it->getItemID();
    Items.insert(ItemList::value_type(i, it));
} 
```

# vb.net - Winforms ListBox 控件在源更改后不更新

> ID：11266233
> 
> 赞同：3
> 
> 时间：2012-06-29T17:22:14.033
> 
> 标签：vb.net, winforms, binding, datatable, datasource

我在 Form_Load 事件中全局填充的表单类中有一个带有 DataTable (DT) 数据源的 ListBox (LB)。

```
Private Sub frmEditPresets_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    DT.Columns.Add("DisplayText")
    DT.Columns.Add("PresetID")
    For Each TSI As ToolStripItem In Presets.DropDownItems
        If TSI.Name.IndexOf("preset_") > -1 Then
            DT.Rows.Add(TSI.Text, TSI.Name)
        End If
    Next
    LB.DataSource = DT
    LB.DisplayMember = "DisplayText"
End Sub 
```

当我使用我的重命名按钮时。它更新菜单项和数据源，但列表框不会刷新，直到我单击列表框中的另一个项目。

重命名代码：

```
Private Sub btnRename_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRename.Click
    Dim R As DataRowView = LB.SelectedItem
    Dim S As String = InputBox("Preset Name", "Rename", R("DisplayText"))
    If S.Trim.Length = 0 Then Exit Sub
    If Presets.DropDownItems.ContainsKey(R("PresetID").ToString) Then
        Presets.DropDownItems(R("PresetID").ToString).Text = S
    End If
    R("DisplayText") = S
End Sub 
```

我敢肯定这是一个简单的问题，答案很简单，但我似乎无法弄清楚。我试过刷新（）。我已经尝试再次设置 DataSource。我读了这个 StackOverflow 问题[Winforms listbox not updated when bound data changes](https://stackoverflow.com/questions/768400/winforms-listbox-not-updating-when-bound-data-changes) but ResetBindings() 在这种情况下似乎不是可用的方法。

*编辑。当史蒂夫提到 BindingContext 时，我将答案归功于他。虽然，这让我找到`BindingContext(DT).EndCurrentEdit()`了更新我的 LB 显示并保持选择的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:56:55.187

试过这个，它的工作原理......

```
Private Sub btnRename_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRename.Click  
    Dim R As DataRowView = LB.SelectedItem  
    Dim S As String = InputBox("Preset Name", "Rename", R("DisplayText"))  
    If S.Trim.Length = 0 Then Exit Sub  
    If Presets.DropDownItems.ContainsKey(R("PresetID").ToString) Then  
        Presets.DropDownItems(R("PresetID").ToString).Text = S  
    End If  
    R("DisplayText") = S  
    BindingContext(DT).EndCurrentEdit()
End Sub 
```

# haskell - 列表范围的类型：如何使我的函数不那么多态？

> ID：11266235
> 
> 赞同：1
> 
> 时间：2012-06-29T17:22:28.337
> 
> 标签：haskell, polymorphism, ghci, typing

我有一个功能

```
sasiad (x,y) = [ (x+dx,y+dy) | dy <- [-1..1], dx <- [-1..1], x+dx >= 0, y+dy >= 0] 
```

我不喜欢那个函数的类型。我希望它返回`[(Int,Int)]`而不是`[(t,t1)]` 是否可以强制 ghci 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T18:10:18.267

您可以添加类型注释作为 dave4420 提及，但这样做的正常方式是这样的：

```
sasiad :: (Int, Int) -> [(Int, Int)]
sasiad (x,y) = [ (x+dx,y+dy) | dy <- [-1..1], dx <- [-1..1], x+dx >= 0, y+dy >= 0] 
```

但是，对于使用编译器推断的类型，需要提出一个论点：

```
sasiad :: (Ord t1, Ord t, Num t1, Num t, Enum t, Enum t1) => (t, t1) -> [(t, t1)] 
```

正如[这篇博](http://blog.malde.org/posts/polymorphic-types-are-safer.html)文所述，更复杂的类型具有优势。例如，你的函数的推断类型区分`t`和`t1`意味着如果你声明这个类型，编译器不会让你混淆参数。基本上，这种类型保证结果列表中对的第一个元素`x`仅使用计算，第二个元素仅使用计算`y`。这是否是有用的不变量取决于您的程序。

另外，我不禁要重构您的功能：

```
sasiad :: (Ord t1, Ord t, Num t1, Num t, Enum t, Enum t1) => (t, t1) -> [(t, t1)]
sasiad (x,y) = cross (generate x) (generate y)
    where generate x = filter (>=0) . map (\dx -> x+dx) $ [-1..1]

cross xs ys = [ (x,y) | x <- xs, y <- ys ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:31:09.523

是的，添加一个类型注释：

```
sasiad (x,y) = [ (x+dx,y+dy) | dy <- [-1..1], dx <- [-1..1], x+dx >= 0, y+dy >= 0] :: [(Int, Int)] 
```

# php - 创建 PHP+HTML 页面以启动进程

> ID：11266238
> 
> 赞同：0
> 
> 时间：2012-06-29T17:22:42.843
> 
> 标签：php, python, html, irc

我有一个文件，tenoticebot.py，我希望能够从 PHP 页面启动和停止。这可能吗？我认为该页面需要从用户帐户启动脚本，将其启动到后台（屏幕），获取并保留进程 ID，然后才能终止该进程。这可能吗？我可以有代码吗？或者你能推荐一个更简单的版本和代码吗？谢谢！

# python - python/django，firefox：有没有办法可以使用python代码调用firefox的功能

> ID：11266240
> 
> 赞同：1
> 
> 时间：2012-06-29T17:22:53.987
> 
> 标签：python, django, firefox

我一直在寻找这个一段时间，但我似乎无法找到实现这一目标的方法。

我想要做的是我需要网页到 pdf 从 firefox 转换的功能。现在网页是在我的 django 应用程序中生成的，我使用一个名为“pisa”（或“xhtml2pdf”）的开源软件来获取 pdf 报告。但是，它仅支持非常有限的 css 样式，并且某些图像无法正确渲染。在尝试了几种可能性之后，我发现firefox通过在brower gui中将网页打印到pdf文件选项给出了我想要的东西，所以我想知道我是否可以使用python或命令行来让firefox做同样的事情。如果有人可以向我指出一些有关 firefox 命令或 python api 的资源，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T17:34:11.077

要使用 Firefox 从命令行打印，您需要安装扩展程序。一个这样的扩展是 torisugari 的命令行打印。

此扩展允许您立即打印 URL，无需用户交互。例如，这对于将 html 页面转换为 PDF 很有用。

您首先必须从[http://torisugari.googlepages.com/commandlineprint2安装扩展程序](http://torisugari.googlepages.com/commandlineprint2)

正确安装扩展后，您可以开始使用 Firefox 作为命令行打印机。

用法：

```
$>firefox -print http://www.example.com/index.html
$>firefox -print http://www.example.com/index.html -printmode pdf -printfile foobar.pdf
$>firefox -print http://www.example.com/index.html -printmode PNG 
```

从这里命令行打印 - torisugari -> [https://sites.google.com/site/torisugari/commandlineprint2](https://sites.google.com/site/torisugari/commandlineprint2)

现在您必须使用 django webserver 添加您的页面，例如 127.0.0.1/yourpage

所以使用循环和地址，您可以打印所有页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:49:20.867

看看[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)。

它是一个简单的命令行实用程序，使用 WebKit 渲染引擎，Google Chrome 和 Apple Safari 也使用该引擎。

# c# - SqlConnection 运行时错误

> ID：11266246
> 
> 赞同：0
> 
> 时间：2012-06-29T17:23:26.697
> 
> 标签：c#, sql, sql-server

在这里，我已经编写了图像上传控件的编码。但是在 SqlConnection 位置出现了一些 RUNTIME 错误。错误母猪首先我有1.Image
名称框 - 文本框
2.Image Upload 控件 - asp imageupload 控件
3.Upload 按钮

错误：对象同步方法是从未同步的代码块中调用的。

下面的代码

```
public partial class ProfileDetails : System.Web.UI.Page
 {
  string connStr =  ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
//SqlConnection con = new SqlConnection("Data Source=CHATHU-LAPTOP;Initial Catalog=ProfilemgtDB;User ID=sa;Password=sa123");
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{

}

protected void Upload_Click(object sender, EventArgs e)
{
    string path = Server.MapPath("images/");
    if (FileUpload1.HasFile)
    {
        string ext = Path.GetExtension(FileUpload1.FileName);
        if (ext == ".jpg" || ext == ".png")
        {
            FileUpload1.SaveAs(path + FileUpload1.FileName);
            string name = "~/images/" + FileUpload1.FileName;
            string s = "Insert into Profile values('" + TextBox12.Text.Trim() + " '.'" + name + "' )";

            SqlConnection con = new SqlConnection(connStr);
            SqlCommand cmd = new SqlCommand(s, con);
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();
            Response.Write("File Uploaded");
        }
        else
        {
            Response.Write("You can upload only JPG & PNG");
        }

    }
    else {

        Response.Write("Please Select File");
    }
    }
} 
```

错误：对象同步方法是从未同步的代码块中调用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:21:48.640

尼梅什，

我没有在代码中看到任何错误。但是，您可能需要检查您的**web.config**是否包含与您的代码中提到的相同的 connectionStrings 名称（即 ConnectionString）。

另外，请参考以下链接

[http://www.ezzylearning.com/tutorial.aspx?tid=4287517](http://www.ezzylearning.com/tutorial.aspx?tid=4287517)

[http://forums.asp.net/t/1757347.aspx/1](http://forums.asp.net/t/1757347.aspx/1)

希望这可以帮助。

# javascript - Shopify javascript API

> ID：11266247
> 
> 赞同：0
> 
> 时间：2012-06-29T17:23:27.717
> 
> 标签：javascript, ruby-on-rails, backbone.js, shopify

我想知道在 shopify 上创建自定义产品选择的最佳策略是什么。我们想要使用主干来创建一些拖放 UI 来选择产品并将其添加到购物车。

我发现 API 主要用于管理任务。你知道是否有 javascript API 吗？

我应该创建一个主题并在那里添加所有 javascript 逻辑吗？还是我应该创建一个 shopify 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:28:11.850

出于您的目的，可以在没有任何麻烦或特殊代码的情况下完成带有 Backbone 的拖放 UI。

阅读[http://wiki.shopify.com/Ajax_API](http://wiki.shopify.com/Ajax_API)，您会发现您可以直接处理购物车。

基本上，对您而言，只需创建自己的主题即可。您可以使用 Liquid 使用数据（即产品）填充 Backbone

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:29:45.863

这是根据常见问题解答的购物问题 =)

这是一个指南。不确定它适用于哪个版本。

[http://superdit.com/2011/04/02/drag-drop-shopping-cart-using-jquery/](http://superdit.com/2011/04/02/drag-drop-shopping-cart-using-jquery/)

# c# - 如何创建 HTTP POST 请求，GetRequestStream() 导致 WebException：“底层连接已关闭...”

> ID：11266252
> 
> 赞同：1
> 
> 时间：2012-06-29T17:23:56.167
> 
> 标签：c#, .net, visual-studio-2010, httpwebrequest, http-post

我是 C# 和 .NET 的新手，因此我正在尝试构建一个发送 HTTP POST 请求、获取响应并将其写入控制台的程序。这是我的代码：

```
static void Main()
    {
        string uri = "https://api0.ringrevenue.com:3000/api/2010-04-22/calls/1.xml";
        string parameters = "start_time_t=133928918&call_center_call_id=91234567";
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.ContentType = "application/x-www-form-urlencoded";
        request.Method = "POST";
        request.KeepAlive = false;
        byte[] bytes = Encoding.ASCII.GetBytes(parameters);
        request.ContentLength = bytes.Length;
        using (Stream os = request.GetRequestStream()) // this line gets the error
        {
            os.Write(bytes, 0, bytes.Length);
            os.Close();
            using (WebResponse response = request.GetResponse())
            {
                if (response == null) Console.WriteLine("Response is null");
                using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                {
                    Console.WriteLine(reader.ReadToEnd().Trim());
                    Thread.Sleep(10000);
                }
            }
        }
    } 
```

我得到的错误是“WebException 未处理”，“底层连接已关闭：发送时发生意外错误。” 有什么想法吗？

这是堆栈跟踪：

```
at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
at System.Net.HttpWebRequest.GetRequestStream()
at HttpPost.HttpPost.Main() in c:\users\support.qb-server\documents\visual studio 2010\Projects\ConsoleApplication2\ConsoleApplication2\HttpPost.cs:line 24
at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

# sql-server - System.Data.OleDb.OleDbException：[DBNETLIB][ConnectionWrite (send())。]

> ID：11266253
> 
> 赞同：0
> 
> 时间：2012-06-29T17:23:58.430
> 
> 标签：sql-server, oledbexception

在一台 Win2k8R2 x64 机器中，我有一个 C# 控制台程序，它连接到远程 sql server 2008 R2 实例。我经常看到下面的异常消息

```
Unhandled Exception: System.Data.OleDb.OleDbException: [DBNETLIB][ConnectionWrite (send()).]General network error. Check your network documentation. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:08:35.453

It may be problem with the credentials you are supplying.

This may help you in troubleshooting the exception

[http://msdn.microsoft.com/en-us/library/6y8t7kbw.aspx](http://msdn.microsoft.com/en-us/library/6y8t7kbw.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:39:02.830

尝试如下操作：

```
1)    Launch regedit.exe
2)    Add DWORD value named SynAttackProtect under registry key HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\
3)    Set data value to 0 
```

完整的解释[在这里](http://blogs.msdn.com/b/sql_protocols/archive/2006/04/12/574608.aspx)和[这里阅读](http://blogs.msdn.com/b/sqlprogrammability/archive/2008/05/27/sql-server-intermittent-connectivity-issue.aspx)

# database-design - 星形/雪花模式的 ORM 等效项

> ID：11266254
> 
> 赞同：5
> 
> 时间：2012-06-29T17:24:10.833
> 
> 标签：database-design, architecture, orm

ORM（.netTiers、EntityFramework、nHibernate 等）通常可以描述为在关系数据模型和面向对象模型之间架起一座桥梁。

数据仓库世界中是否存在等价的 ORM？

该技术将弥合非规范化星/雪花模式和面向对象模型之间的差距。目标是能够快速开发位于并使用所述模式的数据层。

我们正在使用 .Net 和 MSSQL。

星期五快乐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:57:34.033

如果您练习 CQRS（命令/查询职责分离），您可能会将您的数据仓库视为您正在查询的读取模型。您的规范化 OLTP 数据库将是您的命令执行的数据模型。

话虽如此，我不知道任何可以说 MDX 并与数据仓库对话的 ORM。

# php - php 会话不会破坏

> ID：11266256
> 
> 赞同：0
> 
> 时间：2012-06-29T17:24:20.893
> 
> 标签：php, html, session

我建立了一个网站，它有一个登录表单，当用户登录时，登录表单不会出现，而是会出现注销

我的问题是当用户退出会话时不会破坏

当用户登录时，我进入功能运行，当用户退出时，我进入功能退出

### HTML

```
<?php
        Session::init();
        $l = Session::get('loggedIn');
        if (isset($l) && $l==true) {
                ?>
        <a href="<?php echo URL; ?>login/signout" class="smallLink">sign out</a>
            <?php

        } else {
            ?>
            <a href="login/run">Sign in</a>
            <br/>
            <form action="<?php echo URL;?>login/run" method="POST">
                <div class="staticSignin">
                    phoneNumber
                    password
                </div>
                <div id="userInputSignin">
                    <input type="text" name="MNumber"/>
                    <input type="password" name="password"/>
                    <input type="image" src="http://localhost/Mar7ba/public/images/signinButton.png"/>
                </div>
            </form>
            <?php
        }
        ?> 
```

### 运行登录

```
Session::init();
            $row = $sth->fetch();
            $ID = $row['ID'];
            $rollID = $row['rollID'];
            Session::set('loggedIn', true);
            Session::set('ID', $ID);
            Session::set('roolOfUser', $rollID); 
```

### 登出

```
 public function signout() {
        Session::set("loggedIn", false);
        Session::destroy();
        $this->view->render('index/index');
    } 
```

### 会话类

```
<?php

class Session {

    public static function init() {
        session_start();
    }

    public static function set($key, $value) {

        @$_SESSION[$key] = $value;
    }

    public static function get($key) {
        if (isset($_SESSION[$key]))
            return $_SESSION[$key];
    }

    public static function destroy() {
        unset ($_SESSION);
        session_destroy();
    }

} 
```

退出时，登录表单不出现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:25:32.807

要销毁会话，您首先需要使用 启动它`session_start()`，似乎您没有这样做

尝试这样做：

```
session_start();

// Deleting all content in $_SESSION
$_SESSION = array();

// Destroying the session
session_destroy(); 
```

**编辑 1**

尝试进行这些更改`destroy()`以测试会话是否真正开始：

```
public static function destroy() {

    session_start();

    // Deleting all content in $_SESSION
    $_SESSION = array();

    // Destroying the session
    session_destroy();

} 
```

# linq-to-sql - 跨多个数据库使用带有 LINQ 的函数

> ID：11266257
> 
> 赞同：0
> 
> 时间：2012-06-29T17:24:21.663
> 
> 标签：linq-to-sql

我已经设置了我当前的项目，以便我可以使用相同的 LINQ to SQL 数据上下文在两个不同的服务器上查询两个数据库（如此[处](https://stackoverflow.com/questions/352949/linq-across-multiple-databases)所述。）
但是，当我尝试调用数据库上的一个函数时我手动编辑了文件，我收到了错误。
我首先注意到`Source`属性中的字段是灰色的，所以我不得不进入 dmbl 文件的 xml 来编辑源代码。现在`Source`正确显示（`DEVSQL01.MyDB.dbo.MyFunction`），但是当我尝试调用该函数时，我收到一条错误消息 `Invalid column name 'DEVSQL01'.`

有人知道我想做的事情是否可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:06:53.530

我最终只是在第二个数据库上重新创建了该函数。如果有人找到另一种方法来做到这一点，我很想听听。

# batch-file - 引用文件夹中的所有文件及其特定类型的子文件夹

> ID：11266258
> 
> 赞同：0
> 
> 时间：2012-06-29T17:24:25.123
> 
> 标签：batch-file, filereference, all-files

在 .bat 文件中，我正在使用以下行执行编译器

```
cl -GL -Od -Zi <all .h files> <all .c files> 
```

但我不知道如何以这种方式引用所有 .c 和 .h 文件。我在想 * */* .c 和 * */* .h，但这两个都是无效的参数。有什么办法可以以这种方式引用所有 .c 和 .h 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:43:41.337

cl 不允许您这样做，但是如果您想从某个点开始编译每个文件夹中的所有 C 文件，那么您可以执行以下操作。

请注意，使用这些命令选项也不能传入头文件。

```
 @echo off
set USAGE=Usage: %~n0 "C:\Existent Start Dir"
if %1xx == xx ( echo %USAGE% & exit /b 2 )
if not exist "%~1" ( echo %USAGE% & exit /b 1 )
for /r "%~dpn1" %%f in (.) do (
  pushd %%f
  if exist *.c (
    echo *** Compiling C files in %%f ***
    call cl -GL -Od -Zi *.c
    echo.
  )
  popd
) 
```

使用以下方法进行测试： `test.cmd C:\mytest`

如果 C:\mytest 包含几个简单的 *.c 和 *.h 文件的文件夹，这将起作用。 `test.cmd C:\mytest`

您可能真的想要调用 nmake？

# scala - 为什么Scala解释器将定义的对象称为“模块”？

> ID：11266261
> 
> 赞同：10
> 
> 时间：2012-06-29T17:24:33.390
> 
> 标签：scala, module

```
scala> object Test
defined module Test 
```

为什么`Test`scala解释器将定义的对象称为“模块”，而不是伴随对象？

模块和伴生对象之间是否有区别，或者两个不同的名称是一样的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T17:40:41.647

从技术上讲，只有一个这样的东西，在语言规范中它主要被称为“模块”，但你也会发现这样的说法：“对象定义定义了一个单一的对象（或：模块）......”（[Scala Language Specification](http://www.scala-lang.org/node/198)）

此外，你只能说一个*伴随*对象，当它实际上伴随着一些东西时：

“一般来说，类的*伴生模块*是与类同名，定义在同一作用域和编译单元中的对象。反之，类称为模块的*伴生类*。” （再想想：伴生对象 = 伴生模块）

处于伴生状态为伴生类增加了特性，即可见性（例如，类可以看到伴生模块的私有字段）。相同的范围和编译单元意味着，它们需要定义在相同的源文件和相同的包中。

* * *

[LtU](http://lambda-the-ultimate.org/node/3735)上有一个有趣的线程，讨论了 Scala 的对象与模块术语。如果您感兴趣，它还包含指向 Odersky 和 ​​Zenger 的论文的链接；展示了他们如何特别关注 ML 语言的模块系统（OCaml 对 Scala 产生了重大影响），以及他们如何将其构建为模块化组合的各种方法（表明该模块是一个更通用的概念；特征作为 mixin 模块，... )

# 3d - glMatrix 比例转换是否需要 WebGL 下的特定顺序？

> ID：11266266
> 
> 赞同：2
> 
> 时间：2012-06-29T17:24:52.160
> 
> 标签：3d, webgl

我正在尝试使用 glMatrix for WebGL 进行比例转换。

当我使用以下顺序时，比例转换效果很好：

```
mat4.identity(mvMatrix);
mat4.translate(mvMatrix, [1, 1, 1]);
mat4.rotate(mvMatrix, degToRad(zAngle), [0, 0, 1]);
mat4.scale(mvMatrix, [2, 2, 2]); 
```

但是在先进行缩放变换时，对象并没有重新缩放：

```
mat4.identity(mvMatrix);
mat4.scale(mvMatrix, [2, 2, 2]);
mat4.translate(mvMatrix, [1, 1, 1]);
mat4.rotate(mvMatrix, degToRad(zAngle), [0, 0, 1]); 
```

缩放必须始终作为最后的转换命令发生吗？

谢谢，埃弗顿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:07:54.400

请参阅[此](https://stackoverflow.com/questions/2258910/opengl-scale-then-translate-and-how)答案以了解 OpenGL 中的“堆叠”转换。当然，矩阵乘法不是可交换的，因此您将根据顺序得到不同的结果。

# database - 提供正确的用户名和密码，得到 ORA-01017: 无效的用户名/密码；登录被拒绝

> ID：11266280
> 
> 赞同：10
> 
> 时间：2012-06-29T17:25:55.843
> 
> 标签：database, oracle, spring, oracle11g, tomcat7

我在 tomcat 的 server.xml 中有 oracle 数据库配置

```
<Resource name="jdbc/sgfdb" auth="Container"
          driverClassName="oracle.jdbc.OracleDriver"
          url="jdbc:oracle:thin:@databaseurl:1521:schema"
          username="username" password="password" maxActive="20" maxIdle="10"
          maxWait="-1"
          factory="oracle.jdbc.pool.OracleDataSourceFactory"
          type="oracle.jdbc.pool.OracleDataSource"/> 
```

然后在我的网络应用程序（spring mvc 项目）中，我在 context.xml 中清除它

```
<Context>
 <ResourceLink name="jdbc/sgfdb"
        global="jdbc/sgfdb"
        type="javax.sql.DataSource"/>
</Context> 
```

我之前能够连接到这个数据库。我已经一个星期没有工作了。然后现在当我尝试启动它时，总是得到：

```
SEVERE: Servlet.service() for servlet [action] in context with path [/WebUI] threw exception [Request processing failed; nested exception is javax.persistence.QueryTimeoutException: Could not open connection] with root cause
**java.sql.SQLException: ORA-01017: invalid username/password; logon denied**

at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:440)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:389)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:382)
at oracle.jdbc.driver.T4CTTIfun.processError(T4CTTIfun.java:573)
at    oracle.jdbc.driver.T4CTTIoauthenticate.processError(T4CTTIoauthenticate.java:431)
at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:445)
at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)
at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:366)
at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:752)
at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:366)
at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:536)
at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:228)
at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
at oracle.jdbc.pool.OracleDataSource.getPhysicalConnection(OracleDataSource.java:280)
at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:207)
at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:157)
at org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:70)
at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:278)
at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.extractPhysicalConnection(ConnectionProxyHandler.java:82)
at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:138)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy36.prepareStatement(Unknown Source)
at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:147)
at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:166)
at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:145)
at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1720)
at org.hibernate.loader.Loader.doQuery(Loader.java:828)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
at org.hibernate.loader.Loader.doList(Loader.java:2447)
at org.hibernate.loader.Loader.doList(Loader.java:2433)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2263)
at org.hibernate.loader.Loader.list(Loader.java:2258)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1215)
at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:284)
at org.hibernate.ejb.criteria.CriteriaQueryCompiler$3.getSingleResult(CriteriaQueryCompiler.java:258)
at mycompany.services.impl.JobServiceImpl.getNumberOfJobs(JobServiceImpl.java:51)
at mycompany.controller.ExecJobController.execJobList(ExecJobController.java:78)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我确定用户名和密码是正确的。谁能给我一些关于这里发生了什么的提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T12:26:00.957

刚刚解决了一个类似的问题。如果 11g 数据库配置了区分大小写的密码，但您尝试使用 10g 客户端进行连接，则 10g 客户端会将密码全部以大写形式发送到数据库，因此当您输入的密码明确时，密码无效正确的。因此，您需要将客户端升级到 11g 以使其以正确的大小写发送密码（但为了快速测试，您可以将密码更改为全部大写，然后就可以连接了）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-02T07:34:20.167

碰到这个线程，因为我面临同样的问题。用户名和密码是完美的。能够在 SQLPlus 和其他应用程序中使用这些凭据登录。datasource.url 也很完美。

在分析错误时，发现我使用的 ojdbc6.jar 试图连接到 Oracle 11.1.0.7，而我的 Oracle 是 11.2.0.4。下载最新的 ojdbc6.jar 并尝试连接，瞧！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T20:16:08.437

*   用户名可能不正确。
*   密码可能不正确。
*   您连接的服务器/实例可能不正确，或者您的机器和服务器之间或应用程序和 SQL Developer 之间的不同。
*   数据库可能配置为使用区分大小写的密码。
*   密码可能包含分号`;`字符，导致连接字符串在应用程序构建连接字符串时被截断，但允许您从 SQL Developer 使用它（？）
*   你可能在某处有错字（？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T17:10:31.337

解决了。问题是我不应该使用

```
 factory="oracle.jdbc.pool.OracleDataSourceFactory" 
```

删除后，效果很好！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-19T15:46:02.000

如果您的密码和用户名是小写字母，并且它们的大写模式具有不同的值（如土耳其语中的 i、İ），则可能会导致问题。一些 Java-Oracle 连接库在不注意文化差异的情况下将它们设为大写。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T17:29:39.600

您尝试登录的用户的密码可能已过期

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-24T23:17:11.487

我有类似的问题，密码在 SQL Developer 中有效，但在代码（Java）中无效。我试图重置密码，它工作正常。不确定根本原因，但它有效。希望这可以帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-08T12:40:27.227

对我来说，OracleDriver 的不兼容版本导致了这个问题您的应用程序应该手动注册 oracle 驱动程序（我需要使用的 jar 正在做）或者 agter java 6 ojdbc.jar 应该在您的应用程序的类路径中。因此，适用于您的 oracle 安装的 google 兼容驱动程序版本，或者在您的 pom 文件中声明它（使用需要的插件将其放入生成的 jar 中）并从代码中手动引用它，或者将 ojdbc.jar 放在您的 jar 可以看到的地方有用的链接：

关于连接oracle db： [https ://www.codejava.net/java-se/jdbc/connect-to-oracle-database-via-jdbc](https://www.codejava.net/java-se/jdbc/connect-to-oracle-database-via-jdbc)

关于java类路径：[https ://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html](https://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-15T15:09:19.210

您应该更改系统寄存器中**FipsAlgorithmPolicy的值：**

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\FipsAlgorithmPolicy] "Enabled" = dword: 00000000 
```

您无需重新启动操作系统。

# php - PHP：强制下载不起作用

> ID：11266281
> 
> 赞同：1
> 
> 时间：2012-06-29T17:25:59.133
> 
> 标签：php

我有以下代码来推送 zip 文件以供下载。

```
$filename = "ResourcePack_".time().".zip";
        $destination = $basepath."downloads/$filename";
        if($this->createdownload($files,$destination,false)){
            header("Cache-Control: public");
            header("Content-Description: File Transfer");
            header("Content-Length: ". filesize("$destination").";");
            header("Content-Disposition: attachment; filename='$filename'");
            header("Content-Type: application/octet-stream; "); 
            header("Content-Transfer-Encoding: binary");
            ob_end_flush();
            @readfile($destination);

            if(file_exists($destination)){
                unlink($destination);
            }
        } 
```

我知道 createdownload 函数可以很好地生成 zip 文件，因为我看到该文件正在服务器上创建。问题是文件被作为一堆垃圾写入浏览器，而不是打开下载流。我的标题中是否缺少某些内容？

# 编辑

我是对的。我的问题不在于 php，而是通过 JQuery $.ajax 调用调用生成此代码的 php 文件是问题所在。使用 $.ajax 会自动将 Accept-Encoding 请求标头设置为与 zip 文件不兼容的值。因此，除了使用 $.ajax 之外，我只使用了一个简单的 window.open javascript 命令来调用相同的 php 页面，并且它与标题一起工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:35:36.127

尝试为该文件传递正确的类型。我认为它的 fileinfo mime 类型见[http://www.php.net/manual/en/ref.fileinfo.php](http://www.php.net/manual/en/ref.fileinfo.php)

```
header("Content-Type: $file_type"); 
```

在八位字节流删除它之后你也有分号

```
header("Content-type: application/octet-stream"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:49:52.247

尝试在@readfile 之后放置一个骰子并删除@，以查看您是否有与文件读取相关的任何其他错误。

我有一些代码做同样的事情，这对我有用：

```
 header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: private", false); // required for certain browsers
        header('Content-Disposition: inline; filename="' . $filename . '"');
        header('Content-type: application/zip');
        //header("Content-Transfer-Encoding: binary");
        header("Content-Length: " . filesize($destination));

        readfile($destination);
        die(); 
```

# c - 在多线程程序中访问文件指针时出错

> ID：11266282
> 
> 赞同：1
> 
> 时间：2012-06-29T17:26:09.830
> 
> 标签：c, file-io, parallel-processing, cilk

我想问的是一些大代码的一部分，但我会尽量缩短它。我将首先解释我的代码中的相关代码片段，然后是我得到的错误。

从`main.c`主函数内部：

```
cilk_for ( line_count = 0; line_count != no_of_lines ; ++line_count )
{
     //some stuff here
     for ( j=line_count+1; j<no_of_lines; ++j )
     {
         //some stuff here
         final_result[line_count][j] = bf_dup_eleminate ( table_bloom[line_count], file_names[j], j );
         //some stuff here
     }
     //some stuff here
} 
```

`bf_dup_eleminate`文件中的函数`bloom-filter.c`：

```
int bf_dup_eleminate ( const bloom_filter *bf, const char *file_name, int j )
{
    int count=-1;
    FILE *fp = fopen (file_name, "rb" );
    if (fp)
    {
        count = bf_dup_eleminate_read ( bf, fp, j);
        fclose ( fp );
    }
    else
    {
        printf ( "Could not open file\n" );
    }
    return count;
} 
```

`bf_dup_eleminate_read`从`bloom-filter.c`文件：

```
int bf_dup_eleminate_read ( const bloom_filter *bf, FILE *fp, int j )
{
    //some stuff here
    printf ( "before while loop. j is %d ** workder id: **********%d***********\n", j, __cilkrts_get_worker_number());
    while (/*somecondition*/)
    {/*some stuff*/}
    //some stuff
} 
```

这是一个多线程应用程序（我通过强制它使用两个线程来运行它），并且我可以确定第一个线程到达`printf`语句（因为它与线程信息一起输出）。现在`gdb`告诉我你有以下错误

`0x0000000000406fc4 in bf_dup_eleminate_read (bf=<error reading variable: Cannot access memory at address 0x7ffff7edba58>, fp=<error reading variable: Cannot access memory at address 0x7ffff7edba50>, j=<error reading variable: Cannot access memory at address 0x7ffff7edba4c>) at bloom-filter.c:536`

`Line 536`是`int bf_dup_eleminate_read ( const bloom_filter *bf, FILE *fp, int j )`

错误消息很清楚，但我不明白为什么会这样。我想不出为什么会发生这种情况。确定文件已打开（因为`bf_dup_eleminate`未打印函数中的错误消息）。我也相信，如果两个线程正在执行相同的代码行，那么它们将对所有局部变量进行单独的实例化。鉴于这可能是什么问题。

任何帮助表示赞赏！

PS：`cilk_for`关键字只是在运行时生成线程的构造。

当要使用的线程数为 1 时，程序运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:14:30.220

似乎当您通过引用传递变量时，我的意思是 table_bloom [line_count]，它将指针传递给所有线程。所以所有线程都试图同时访问指针值。您可以尝试复制每个参数，然后将其传递给 bf_dup_eleminate_read。未测试代码：

```
int bf_dup_eleminate ( const bloom_filter *bf, const char *file_name, int j )
{
    bloom_filter *t_bf = bf;

    int count=-1;
    FILE *fp = fopen (file_name, "rb" );
    if (fp)
    {
        count = bf_dup_eleminate_read (t_bf, fp, j);
        fclose ( fp );
    }
    else
    {
        printf ( "Could not open file\n" );
    }
    return count;
} 
```

或者这不起作用，请尝试制作每个参数的硬拷贝：

```
 bloom_filter t_bf = *bf; //forgot how struct copying is done
    char *t_filename = strdup(filename);
    int t_j = j; //not required 
```

如果您无法制作副本，则可以使用互斥锁。见[链接](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)。

# batch-file - 在dos语法错误需要中将字符串附加到文件名

> ID：11266284
> 
> 赞同：0
> 
> 时间：2012-06-29T17:26:14.903
> 
> 标签：batch-file, dos, rename

```
@ECHO off
title Rename Script
set dir1=%1
set STR=%2
set count=1
:Start
cls
echo 1\. Rename Files
echo 2\. Quit
set /p choice=I choose (1,2):
if %choice%==1 goto rename
if %choice%==2 exit
:rename
cls
echo Running Rename Script for STR=%STR%
FOR %%n in (%dir1% *.*) DO (
ren %%n %STR%%%n
echo %STR%%%n)
echo done
pause 
```

C:>yogesh>LDK.bat C:\yogesh app

输出：

```
Running Rename Script for STR=app
The syntax of the command is incorrect.
appC:\yogesh
appa3dapi.dll
appHLTV-Readme.txt
apphltv.cfg
appkver.kp
applanguage.inf
appLDR.bat
appMp3dec.asi
appMss32.dll
appMssv12.asi
appMssv29.asi
appTrackerNET.dll
The batch file cannot be found.

C:\yogesh> 
```

这个脚本有几个问题：

1.  " 命令的语法不正确。" 我不知道脚本中的问题在哪里。
2.  如何获取重命名文件的数量？
3.  文件被重命名到 .bat 文件所在的目录我想将指定文件夹中的文件重命名为变量**dir1中的参数**

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:21:30.017

这是一个不使用 CD 的解决方案。您需要`\`在 dir1 变量之间放置一个而`*.*`不是空格。您需要引号来防止名称中出现空格。使用 FOR 变量修饰符`~nx`来获取名称和扩展名（删除任何驱动器和路径信息）。最后，使用 SET /A 执行数学运算。

```
@ECHO off
title Rename Script
set "dir1=%~1"
set "STR=%~2"
set count=1
:Start
cls
echo 1\. Rename Files
echo 2\. Quit
set /p choice=I choose (1,2):
if %choice%==1 goto rename
if %choice%==2 exit
:rename
cls
echo Running Rename Script for STR=%STR%
set cnt=0
FOR %%F in ("%dir1%\*.*") DO (
  ren "%%F" "%STR%%%~nxF"
  echo %STR%%%~nxF
  set /a cnt+=1
)
echo %cnt% files were renamed.
echo done
pause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:57:14.283

干得好：

```
@ECHO off
title Rename Script
set /A count=1
:Start
cls
echo 1\. Rename Files
echo 2\. Quit
set /p choice=I choose (1,2):
if %choice%==1 goto rename
if %choice%==2 exit
:rename
cls
set /p STR=choose a start-string:
echo Running Rename Script for STR=%STR%
FOR %%n in (*.*) DO (
ren "%%n" "%STR%%%n"
echo "%STR%%%n"
set /A count+=1)
echo count %count%
echo done
pause 
```

1.  我们可以将当前路径保存在 OLDDIR 中，然后将路径更改为用户提供的路径，在脚本结束时，我们将返回 OLDDIR 使用`CD`
2.  你需要设置计数器`/A`

**dbenham 的更新：**
一个小证明:)）它（对我来说）适用于包含空格的文件名：

![在此处输入图像描述](../Images/f486c416ba3392571281ed693e518572.png)

# c - 未定义对 RasDialA 的引用（包括 ras.h）

> ID：11266285
> 
> 赞同：1
> 
> 时间：2012-06-29T17:26:17.373
> 
> 标签：c, windows, header-files, vpn, ras

我阅读了 Microsoft 的所有文档，但他们声称它应该在没有任何额外库的情况下工作。谷歌搜索一个小时没有结果。我的代码：

```
#include <windows.h>
#include <ras.h>

int main()
{
    char* szPhoneNumberToDial = "127.0.0.1";
    char* szUserName = "test";
    char* szPassword = "test";
    RASDIALPARAMS rdParams;
    rdParams.dwSize = sizeof(RASDIALPARAMS);
    rdParams.szEntryName[0] = '\0';
    lstrcpy(rdParams.szPhoneNumber, szPhoneNumberToDial);
    rdParams.szCallbackNumber[0] = '\0';
    lstrcpy( rdParams.szUserName, szUserName );
    lstrcpy( rdParams.szPassword, szPassword );
    rdParams.szDomain[0] = '\0';

    HRASCONN hRasConn = NULL;
    DWORD dwRet = RasDial(NULL, NULL, &rdParams, 0L, NULL, &hRasConn);
} 
```

错误：

`undefined reference to 'RasDialA@24'`

我尝试了 C 和 C++ 实现（在 VC++ 2010 和 MinGW/gcc & g++ 中），但它们都导致了同样的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:48:32.393

[`according documentation`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377004%28v=vs.85%29.aspx)，对[`RasDial()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377004%28v=vs.85%29.aspx)使用的要求，也`Ras.h` 就是header，就是`Rasapi32.lib`库。如果这在您的编译器上可用，请使用[`-l`](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)选项将其传递给链接

**海湾合作委员会**：

```
gcc foo.c -lRasapi32 
```

*编辑：*感谢@Mark Wilkins，它提供了命令行

**微软编译器**：

```
cl foo.c rasapi32.lib 
```

# javascript - 居中对齐标题谷歌图表

> ID：11266286
> 
> 赞同：20
> 
> 时间：2012-06-29T17:26:17.167
> 
> 标签：javascript, api, charts, center

如何在 Google Charts API（不是 Google Chart Images）的折线图中将标题居中

我没有看到任何选项，例如 titlePosition: 'center'

谢谢！

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['xValues', 'yValues'],
    [0, 34.92],
    [389, 39.44],
    [488, 52.11],
    [652, 55.4]
  ]);

  var options = {
    curveType: 'none', // 'function'
    title: 'Title',
    titleTextStyle: {
      color: '333333',
      fontName: 'Arial',
      fontSize: 10
    },
    legend: 'none',
    enableInteractivity: false
  };

  var chart = new google.visualization.LineChart(document.getElementById('visualization'));
  chart.draw(data, options);
} 
```

​</p>

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T03:49:03.800

[API](https://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options)不提供此选项；你根本无法做到这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-28T00:46:19.923

我使用：titlePosition：'none'

并插入带有普通 HTML 的标题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-29T05:11:02.393

[另一个答案](https://stackoverflow.com/a/16291236/364)建议如下：

```
$("text:contains(" + vencOptions.title + ")").attr({'x':'60', 'y':'20'}) 
```

来源：[https ://stackoverflow.com/a/16291236/364](https://stackoverflow.com/a/16291236/364)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-06T12:40:44.263

```
$("text:contains(" + vencOptions.title + ")").attr({'x':'60', 'y':'20'}) 
```

//或者

```
$("#YOUR_GRAPH_WRAPPER svg text").first().attr("x", (($("#time-series-graph svg").width() - parseInt($("#YOUR_GRAPH_WRAPPER svg text").first().attr('x'),10)) / 2).toFixed(0)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-11T05:43:46.297

绘制完图表后，调用事件处理函数：

```
google.visualization.events.addListener(chart, 'ready', Title_center); 
```

并将函数定义为：

```
function Title_center(){

     var title_chart=$("#payer_chart_div svg g").find('text').html();   

     $("#payer_chart_div svg").find('g:first').html('<text text-anchor="start" x="500" y="141" font-family="Arial" font-size="18" font-weight="bold" stroke="none" stroke-width="0" fill="#000000">'+title_chart+'</text>');
} 
```

只需插入图表的标题并添加属性`X:500`, `y:141`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-12T15:22:40.810

您可以在绘制图表后使用图表中的回调信息轻松完成此操作，并对 div 中的某些文本进行一些数学运算。

将您的图表包含在位置：相对 div 中。在图表下添加一个 div 并将其和图表绝对定位。

然后你可以用一点高中数学来移动 div 的顶部和左侧位置。

```
<https://jsfiddle.net/o6zmbLvk/2/> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-23T14:25:15.970

*   中心图表磁贴
*   动态调整标题长度
*   *与google.visualization.LineChart*中的标题重叠（未使用其他类型的图表进行测试）

所有这些都在 1 个 CSS 类和 4 行 JavaScript 中。

[在这里回答](https://stackoverflow.com/a/64501781/4157871)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-07T06:47:36.820

要在图表中心显示图表标题，请使用下面的代码片段；它将在图表容器的中心动态设置标题。

添加`ready`事件监听器；`google.visualization.events.addListener(myChart, 'ready', titleCenter);`并添加功能`titleCenter`。

```
google.charts.load('current', {packages: ['corechart', 'bar']});
google.charts.setOnLoadCallback(drawAxisTickColors);

var options = {
  title: "Chart Title",
  titleTextStyle: {
      bold: true,
      italic: true,
      fontSize: 18,
  },
  width: 600,
  height: 400,
  legend: { position: 'top', maxLines: 3 },
  bar: { groupWidth: '75%' },
  isStacked: true,
};

function drawAxisTickColors() {
    var data = google.visualization.arrayToDataTable([
      ['Genre', 'Fantasy & Sci Fi', 'Romance', 'Mystery/Crime', 'General',
       'Western', 'Literature', { role: 'annotation' } ],
      ['2010', 10, 24, 20, 32, 18, 5, ''],
      ['2020', 16, 22, 23, 30, 16, 9, ''],
      ['2030', 28, 19, 29, 30, 12, 13, '']
    ]);

    var myChart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
    google.visualization.events.addListener(myChart, 'ready', titleCenter);
    myChart.draw(data, options);
}

function titleCenter() {
    var $container = $('#chart_div');
    var svgWidth = $container.find('svg').width();
    var $titleElem = $container.find("text:contains(" + options.title + ")");
    var titleWidth = $titleElem.html().length * ($titleElem.attr('font-size')/2);
    var xAxisAlign = (svgWidth - titleWidth)/2;
    $titleElem.attr('x', xAxisAlign);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<div id="chart_div"></div>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-26T18:53:40.310

正如前面的回答所说，你不能配置一个居中的标题。只是不要设置任何“标题”配置。默认不会显示。

然后你可以用 HTML 设置标题，一些代码：

```
<div>
    <div style="text-align: center;">Some Centered Title</div>
    <div id="chart_container">
        <!-- THE CHART GOES HERE -->
    </div>
</div> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-09T10:12:33.847

```
function Title_center(total) {
    var title_chart = $("#chart svg g").find('text').html();
    var x = $("#chart svg g").find('rect').attr('width');
    var y = $("#chart svg g").find('rect').attr('y');
    alert(x);
    $("#chart svg").find('g:first')
                   .html('<text text-anchor="start" x="'+x/2+'" y="'+y+'" font-family="Arial" font-size="12" font-weight="bold" stroke="none" stroke-width="0" fill="#000000">' + total + '</text>');
} 
```

在脚本中创建此函数，并在绘制图表后调用：

```
google.visualization.events.addListener(chart, 'ready', Title_center("Test success")); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-21T22:08:27.100

```
$("#YOUR_GRAPH_WRAPPER svg text").first()
   .attr("x", (($("#time-series-graph svg").width() - $("#YOUR_GRAPH_WRAPPER svg text").first().width()) / 2).toFixed(0)); 
```

[在这里查看我的解释](https://stackoverflow.com/questions/16282210/google-charts-pie-chart-title-position#answer-37955343)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-08-22T12:32:19.920

document.getElementById('divid').getElementsByTagName('text')[0].setAttribute('x', '350')

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2020-06-15T05:25:36.287

```
svg > g:first-of-type > text {
    transform: translateX(calc(50% - 150px));
} 
```

# git - 仅镜像 git 存储库中的子目录

> ID：11266290
> 
> 赞同：2
> 
> 时间：2012-06-29T17:26:39.183
> 
> 标签：git, version-control, repository, mirror

我一直在大学的 git 存储库中的一个文件夹中为大学做一些工作。

同一存储库上还有其他项目分为不同的文件夹，我想单独镜像我的文件夹，以便它也出现在 github 中。

是否可以在不镜像整个存储库和所有其他文件夹的情况下执行此操作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-29T17:55:16.300

你想让你的文件夹成为一个 git 子模块。

# asp.net-mvc-3 - FormsAuthentication cookie 不持久

> ID：11266292
> 
> 赞同：2
> 
> 时间：2012-06-29T17:26:48.737
> 
> 标签：asp.net-mvc-3, cookies, formsauthenticationticket

我正在尝试使用以下代码（在 AccountController.cs 中）将 FormsAuthenticationTicket 保存到 cookie：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket
          (1, user.UserEmail, DateTime.Now, 
           DateTime.Now.AddMinutes(FormsAuthentication.Timeout.TotalMinutes), 
           false, null);

string encTicket = FormsAuthentication.Encrypt(ticket);
HttpCookie faCookie = new HttpCookie(FormsAuthentication.FormsCookieName,
ticket.ToString());
HttpContext.Response.Cookies.Add(faCookie);

if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
           && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
           {
             return Redirect(returnUrl);
           }
           else
          {
             return RedirectToAction("Index", "Home");
          } 
```

当我逐步调试调试器时，一切似乎都很好。直到我到达`Application_AuthenticateRequest`，我尝试检索 cookie：

```
HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];

        if (authCookie != null)
        {
         //do stuff here
        } 
```

当我查看 Cookies 集合时，那里什么都没有。我可以在 AccountController 代码中添加另一个普通的 cookie，它显示得很好。无论我是否包含 UserData，问题仍然存在，所以我认为这不是大小问题。

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:39:58.637

cookie 的最大大小为 4096 字节。如果它高于此 cookie 将不会被保存。

使用以下方法检查 Cookie 大小：

```
int cookieSize = System.Text.UTF8Encoding.UTF8.GetByteCount(faCookie.Values.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:28:36.043

您正在将 cookie 添加到响应中。完成此操作后，请确保您已立即重定向。只有在随后的请求中，您才能希望从`Request.Cookies`集合中读取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T20:20:20.463

在编写 cookie 的代码中，您不能将 null 传递给带有加密 cookie 的 userData 参数。IsPersistent 为 false 很好。

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket
          (1, user.UserEmail, DateTime.Now, 
           DateTime.Now.AddMinutes(FormsAuthentication.Timeout.TotalMinutes), 
           false, null); 
```

执行以下操作：在我的示例中，您可以将 userData.ToString() 替换为空字符串。只是不要给它一个空值！那应该可以解决您的问题。

```
 FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
            1,                             // version
            userId.UserEmail,                      // a unique value that identifies the user
            DateTime.Now,                  // created
            DateTime.Now.AddMinutes(FormsAuthentication.Timeout.TotalMinutes),  // expires
            false,                    // persistent?
            userData.ToString(),   // user specific data (optional) //NOTE:  DO NOT pass NULL as encrypted string value will become NULL (argh)
            FormsAuthentication.FormsCookiePath  // the path for the cookie
            ); 
```

然后在您的 global.asax.cs 中，您将在 FormsAuthentication_OnAuthenticate 事件中检查该 cookie 您的代码将在此处有所不同，因为我已经编写了自定义表单身份验证，并且在您的情况下使用的是 userId 而不是电子邮件。

请注意以下逻辑，如果您在编写 auth cookie 时为 UserData 参数传递 null，则会失败。

```
 if (authCookie == null || authCookie.Value == "")
    {
        return;
    } 
```

以下是 globalasax.cs 文件中的完整事件：

```
protected void FormsAuthentication_OnAuthenticate(Object sender, FormsAuthenticationEventArgs e)
{
    //STEP #1 of Authentication/Authorization flow
    //Reference:  http://msdn.microsoft.com/en-us/library/ff649337.aspx
    //==================================================================
    if (FormsAuthentication.CookiesSupported == true)
    {

        //Look for an existing authorization cookie when challenged via [Authorize]
        HttpCookie authCookie = Context.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie == null || authCookie.Value == "")
        {
            return;
        }
        FormsAuthenticationTicket authTicket = null;
        try
        {
            //Reading from the ticket
            authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            //Check the Cookiename (which in this case is UserId).  If it is null, then we have an issue
            if (authTicket.Name == null)
            {
                FormsAuthentication.SignOut();
                authCookie.Value = null;
            }

        }
        catch (Exception ex)
        {
            //Unable to decrypt the auth ticket
            return;
        }

        //get userId from ticket
        string userId = authTicket.Name;

        Context.User = new GenericPrincipal(
                  new System.Security.Principal.GenericIdentity(userId, "MyCustomAuthTypeName"), authTicket.UserData.Split(','));

        //We are officially 'authenticated' at this point but not neccessarily 'authorized'
    }
    else
    {
        throw new HttpException("Cookieless Forms Authentication is not supported for this application.");

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-26T12:33:43.070

尽管您的身份验证票证设置为持久性并具有过期日期，但实际的 cookie 没有。

在创建 cookie 时添加如下内容：

```
var faCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket)
                   {
                       Expires = ticket.Expiration
                   }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T19:59:18.127

创建 FormsAuthenticationTicket 时，将 isPersistent 参数设置为 false。此参数应设置为 true。

# add - 如何在没有用户身份验证的情况下将场地添加到foursquare

> ID：11266296
> 
> 赞同：2
> 
> 时间：2012-06-29T17:27:05.127
> 
> 标签：add, foursquare

我想从我的应用程序中将场所添加到foursquare，但我不想让用户登录到foursquare。我创建了一个假用户，我的服务器将其用于我的应用程序的所有真实用户，但我担心foursquare 会阻止这个假用户，因为它会同时添加许多场所，并且来自不同的地方。

最好的解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:31:25.637

Your set up is definitely not recommended, but as a way to mitigate your risks, limit the number of venues a user can create via your app (like 1 per day). Otherwise one abusive user can cause your entire user account to be suspended.

# javascript - Openlayers / Openstreetmap 背景是垂直条纹和压扁的

> ID：11266297
> 
> 赞同：9
> 
> 时间：2012-06-29T17:27:09.340
> 
> 标签：javascript, maps, openlayers, openstreetmap

所以我的 openlayers 实现的背景似乎被压成垂直条纹。奇怪的是，它并不总是这样，但即使我将所有更改都藏回了我知道它正在工作的点，它仍然是坏的。这让我想知道瓷砖资产的交付方式是否发生了变化。我已经尝试在使用 osm 和 wms 层之间切换而没有任何变化，任何帮助将不胜感激。

以下是相关代码：

```
initMap: function() {
  var view = this;
  var map = this.map = new OpenLayers.Map();
  map.render(this.$map[0]);

  var wmsLayer = new OpenLayers.Layer.WMS( "OpenLayers WMS",
    "http://vmap0.tiles.osgeo.org/wms/vmap0?", {layers: 'basic'});

  var osmLayer = new OpenLayers.Layer.OSM();

  this.layers = {
    point: new OpenLayers.Layer.Vector("Point Layer"),
    line: new OpenLayers.Layer.Vector("Line Layer"),
    polygon: new OpenLayers.Layer.Vector("Polygon Layer")
  };

  this.setValue(this.value);

  map.addLayers([this.layers.point, this.layers.line, this.layers.polygon, osmLayer]);

  drawControls = {
    point: new OpenLayers.Control.DrawFeature(this.layers.point,
      OpenLayers.Handler.Point),
    line: new OpenLayers.Control.DrawFeature(this.layers.line,
      OpenLayers.Handler.Path),
    polygon: new OpenLayers.Control.DrawFeature(this.layers.polygon,
      OpenLayers.Handler.Polygon)
  };

  this.layers[this.layerType].events.on({'sketchcomplete': function(feature) {

    if (!view.multiple) {
      // deactivate polygon layer once a polygon has been added
      drawControls[view.layerType].deactivate();
    }

  }});

  for(var key in drawControls) {
    map.addControl(drawControls[key]);
  }

  if (this.layers[this.layerType].features.length) {
    var bounds = this.layers[this.layerType].getDataExtent();
    var zoom = this.layers[this.layerType].getZoomForExtent(bounds);
    var lon = (bounds.top - bounds.bottom) / 2;
    var lat = (bounds.right - bounds.left) / 2;
    map.setCenter(new OpenLayers.LonLat(lon,lat), 3);
    map.zoomToExtent(bounds);

    if (view.multiple) {
      drawControls[view.layerType].activate();
    }

  } else {
    map.setCenter(new OpenLayers.LonLat(-11174482.03751,4861394.9982606), 4);
    drawControls[view.layerType].activate();
  }

  this.$('.clear').click(function(e) {
    e.preventDefault();
    view.layers[view.layerType].destroyFeatures();
    drawControls[view.layerType].activate();
  });
}, 
```

这是输出：

![这是输出](../Images/81e845ac93e119ae469a3948ff95357a.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T22:48:57.520

所以我发现了问题。Twitter bootstrap 在其重置文件中有一行设置：

```
img { max-width: 100% } 
```

这是挤压图像。您可以通过以下方式修复它：

```
img { max-width: none; } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T23:13:19.160

```
I was having the same problem, are you using bootstrap of twitter? 

I found out there was a selector for img elements that was affecting the map. I had the next selector into the bootstrap.css"

img {
  max-width: 100%;
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic;
}

I don't know whay the parameter max-width: 100%; makes the vertical stripes in my case. I remove the propertie max-width: 100% and now is working. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-08T14:08:48.317

设置`img { max-width: 100% }`为`img { max-width:none; }`确实可以解决问题。

**但是**，这会对整个网站的图像产生意想不到的影响。我还在使用 Bootstrap Twitter 的轮播组件来获取图像，当我进行上述更改时，图像不适合轮播。因此，我对其进行了更改，使其仅针对 OpenLayers / OpenStreetMap div 中的图像。

```
div#outlet_map img { max-width:none; } 
```

# php - WP-成员头像添加

> ID：11266298
> 
> 赞同：0
> 
> 时间：2012-06-29T17:27:14.250
> 
> 标签：php, forms, wordpress, avatar

Stackoverflow 人，

我已经在互联网以及开发者的网站上搜索了这个问题的答案......我已经完成了大约 75% 的工作，但我无法弄清楚剩下的 25%。

我想将**上传您的头像**部分添加到我的 Wordpress 网站上的用户个人资料页面。我认为正确的答案是这样的：

```
<?php
$myAv = new simple_local_avatars();
$myAv->edit_user_profile($profileuser);
?> 
```

但正如我发现的那样，这段代码将图像上传到网站，而且它还把头像上传区域放在了我的个人资料表单之外。

有什么提示吗？提示？想法？

我已将此代码放在我的`<form>`标签中，并修改了`$profileuser`变量以反映用于指定当前用户的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:31:25.137

你看过这个插件吗？[添加本地头像](http://wordpress.org/extend/plugins/add-local-avatar/)。看起来它完全符合您的要求。

# macos - 使用更新的 Core Data 模型打开应用程序时磁盘上的文件更改

> ID：11266300
> 
> 赞同：1
> 
> 时间：2012-06-29T17:27:19.533
> 
> 标签：macos, core-data, nspersistentdocument

我有一个 OS X 应用程序，它依赖 NSPersistentDocument 和 Core Data 来处理应用程序的自定义文件类型（保存为 XML）。

我注意到，当我更新我的核心数据模型（我正在做简单的更改，依赖于轻量级迁移）时，*只需使用使用新模型的应用程序打开*一个文件就会更改磁盘上的文件。原始文件的备份版本也出现在磁盘上（文件名后附有“~”）。一旦发生这种情况，应用程序的先前（已发布）版本就无法打开该文件。

需要明确的是：我只是打开文件。我没有将文件保存回磁盘。我可以在 Finder 中观看，并在打开文件后立即看到“~”。

这似乎是非常危险的行为。我必须非常谨慎，*永远*不要打开我的用户群当前正在使用的文件，因为这样做会立即使他们无法访问。

这是默认的 OS X 行为吗？有没有办法配置 NSPersistentDocument 或我的核心数据模型，以便打开文件将内部存储更改为应用程序，但除非我明确保存，否则更改不会传播回磁盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:28:16.500

Core Data 似乎假设，如果您使用新程序打开旧文件，则必须继续进行迁移。根据我自己的经验，打开文件时，它是默认行为，它会自动迁移，并且不能再用以前的版本程序打开。我相信它与哈希数有关，必须更改它以允许新存储打开文件，使其成为文档中的永久更改；所以不，我认为您不能打开文件，但不能将更改传播回磁盘。也许您可以重写一个允许您在开始迁移之前制作副本的方法。

Apple 的开发人员库提到了制作的临时文件：

> 如果迁移成功进行，storeURL 上的现有存储会在任何文件扩展名之前使用“~”后缀重命名，并且迁移的存储会保存到 storeURL。

[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/vmInitiating.html#//apple_ref/doc/uid/TP40004399-CH7-SW1](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/vmInitiating.html#//apple_ref/doc/uid/TP40004399-CH7-SW1)

# php - 基于页面条件的入队脚本

> ID：11266301
> 
> 赞同：1
> 
> 时间：2012-06-29T17:27:20.147
> 
> 标签：php, javascript, wordpress

我试图弄清楚如何根据插件配置文件中的条件 is_page() 将文件（javascript 和样式）排入队列。一个星期以来，我一直在尝试从我在网上找到的无数解决方案中找到一个可行的解决方案。

这是文件的原件：

```
public function enqueue_files() {
        wp_enqueue_script("jquery");
        wp_enqueue_style("wpsqt-main",plugins_url('/css/main.css',WPSQT_FILE));
    } 
```

这是我尝试的：

```
public function enqueue_files() {
if ( is_page(xxx) ) {
        wp_enqueue_script("jquery");
        wp_enqueue_style("wpsqt-main",plugins_url('/css/main.css',WPSQT_FILE));
    }
} 
```

当我测试`if ( is_page() )`时，它会从所有页面的标题中删除脚本和样式。但是，当将其更改为: 时 `if ( !is_page() )`，它会将其添加回来。诡异的？

1.  有没有办法包括条件？
2.  公共功能部分是否会改变读取条件的方式？
3.  是否可以从插件的配置文件中删除队列并将其放在我的 function.php 文件中，这样每当插件更新时，我就不必进行更改？

这是文件（将文件入队的调用位于最底部）： http: [//pastebin.com/sDt4sTCH](http://pastebin.com/sDt4sTCH)

我包含了实际文件，因此您可以获取它使用的上下文。提前致谢！！ **编辑**更好的代码格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:21:46.740

在查询之前，您调用 is_page() 太早了，因此没有 $post 可用于测试。在这种情况下， if (not is_page()) 将始终为真。我规避这种情况的方法是将脚本插入页脚而不是页眉（在有查询之后）。注意，您需要`<?php wp_footer() ?>`在您的网站页脚中，通常在之前`</body>`

```
class MyPlugin {
    //In the constructor we want to set a few methods as action callbacks
    public function __construct () {
        add_action('init', array(&$this, 'register_my_scripts'));
        add_action('wp_print_footer_scripts', array(&$this, 'print_my_scripts'));
    }

    //This method is called by init, and registers our plugin scripts for later use
    public function register_my_scripts () {
        wp_enqueue_style("wpsqt-main",plugins_url('/css/main.css',WPSQT_FILE));
    }

    //This method is called by wp_print_footer_scripts, and prints our <script> through wp_footer()
    public function print_my_scripts () {
        //Only render the script on specific pages
        if ( is_page(xxx) ) {
            wp_print_scripts("wpsqt-main", array('jquery'));
        }
    }
} 
```

或者，您可以使用全局变量，并在您希望打印脚本的任何位置简单地将其设置为 true。例如，如果您不知道页面名称。只需用这个替换上面的 print_my_scripts 方法。

```
public function print_my_scripts () {
    global $print_my_script;
    //Only render the script on pages which have asked for it
    if ($print_my_script) {
        wp_print_scripts("wpsqt-main", array('jquery'));
    }
} 
```

并将其添加到任何简码、小部件、页面模板......任何告诉我们的脚本使用简码、小部件、模板......等在页面上打印的内容。

```
global $print_my_script ;
$print_my_script = true ; 
```

# jquery - JQuery quiz：计算一组答案中重复值的数量？

> ID：11266313
> 
> 赞同：1
> 
> 时间：2012-06-29T17:28:25.497
> 
> 标签：jquery, arrays, forms, radio-button

我有一个包含一系列问题的表格，单选按钮。每组是相同的 5 个值，顺序打乱，因此用户看不到模式。

当用户单击一个按钮时，我想首先获取每个组的值（我想我知道如何处理 `$('input:radio[name=bar]:checked').val();`），然后查看每个字符串总共选择了多少。

就像在这个示例问题中一样：

```
<input type="radio" name="q1" value="loner">
<input type="radio" name="q1" value="partier"
<input type="radio" name="q1" value="clueless">
<input type="radio" name="q1" value="romantic">
<input type="radio" name="q1" value="pragmatic"> 
```

所以，我可能有 10-20 个带有答案的问题，这些问题被映射到这些（在这里组成）值。最后，用户点击一个按钮，需要将 5 个术语中的每一个被选中的次数加起来，看看哪个被选中的次数最多，如“你是个浪漫主义者”。

我希望这很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:30:44.733

例子：

[http://jsfiddle.net/mM7X4/](http://jsfiddle.net/mM7X4/)

```
var values = ['loner','partier','clueless','romantic','pragmatic'];
var result = [];

$.each( values, function( i, value){
  result.push({
    value: value,
    sum: $('input:radio[value='+value+']:checked').length;
  });
});

result.sort( function( a,b){
  if( a.sum < a.sum ) return +1;
  if( a.sum > a.sum ) return -1;
  return 0;
});

alert('You are a '+result[0].value ); 
```

# java - 跨战争共享 JSP 文件，在 java servlet 中使用 forward

> ID：11266315
> 
> 赞同：3
> 
> 时间：2012-06-29T17:28:26.947
> 
> 标签：java, jsp, servlets, war, ear

我有一个包含多个 WARS 的 Web 应用程序。这些 WARS 都执行不同的功能，但有许多共同点：Css、Js、页眉和页脚，以及某些用于输出错误消息和交易确认的 jsps。为了良好的可维护性，我不想将这些共享文件中的任何一个放在多个位置，而是在一个位置，所以如果我对一个位置进行编辑，它就会全部显示出来。只是基本的代码管理东西，我认为我真的不需要向这里的任何人解释这一点。

对于 Css 和 Js，我有一个根战争，我只是绝对解决所有的`<link>`和`<script>`标签。对于页眉和页脚（jsp 片段），我正在使用`<c:import>`并再次从根战争中获取。我遇到的最后一个问题是共享 jsps。

在用户尝试执行导致更改我们的数据库以确认事务已完成的操作或在我想向用户提供格式化消息的其他情况下，我经常转发到这些 jsps。Servlet 可能看起来像这样......

```
public class sampleServlet extends ExtendedHttpServlet{ //ExtendedHttpServlet used to add common function to all of our HttpServlets including the foward function I use below. 
     public void doPost(HttpServletRequest request, HttpServletResponse response){

        //Do some preperation stuff here, then...

        try{

            ModelJob.insertNewControlMJob(user, submit);  //ModelJob is my inteface to our 'Job' Table Model... 
            submit.setSeqId(ModelJob.getSeqId(user, submit));
            EmailFactory.SUBMIT_NEW_EMAIL.sendCMAdminEmail(user, submit, null);
            EmailFactory.SUBMIT_NEW_EMAIL.sendUserEmail(user, submit, null);

            req.setAttribute("color","Green");
            req.setAttribute("message"," Job Successfully Submited. Sequece id : " + submit.getSeqId());
            forward("/WEB-INF/TransactionResult.jsp", req, resp); 
            return;

        }catch(Exception e){

            req.setAttribute("color","Red");
            req.setAttribute("message","Teradata failure : " + e.getMessage());
            forward("/WEB-INF/TransactionResult.jsp", req, resp);
            e.printStackTrace();
            return;

        }
     }
} 
```

这是我在上面调用的超类中定义的转发方法`ExtendedHttpServlet`：

```
protected void forward(String destination, HttpServletRequest request, HttpServletResponse response) 
throws ServletException, IOException 
{
    RequestDispatcher dispatcher = request.getRequestDispatcher(destination.toString());
    dispatcher.forward(request, response);
} 
```

但是有了这个，我在所有的战争中都必须有一个 TransactionResult.jsp 的副本，这使得维护有点痛苦。

我的问题是——有什么方法可以让我的转发功能在其他 WAR 中找到要转发的 jsps。或者也许我可以在我的 EAR 中包含 jsp 并让转发器在那里找到 jsp 文件。据我了解，jsps 只是文件，并在运行时由特殊的 servlet 编译，所以我不明白为什么这不可能？

感谢您的任何建议/见解/帮助....

编辑由于你们中的一些人问哪个服务器，我目前在 Websphere v 7.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:42:30.917

您可以通过 获取其他 servlet 上下文[`ServletContext#getContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getContext%28java.lang.String%29)，然后使用它的请求调度程序作为可用的[`ServletContext#getRequestDispatcher()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRequestDispatcher%28java.lang.String%29)。首先，您需要配置服务器以启用“跨上下文”选项。在大多数服务器上默认禁用此功能。不清楚您使用的是哪个服务器，所以这里只是一些提示：对于 Tomcat，检查 的`crossContext`属性，对于`context.xml`Glassfish，检查.`crossContextAllowed``glassfish-web.xml`

完成后，您将能够`ServletContext`通过 servlet 中的上下文路径获取另一个，如下所示：

```
ServletContext otherServletContext = getServletContext().getContext("/otherContextPath"); 
```

然后，您需要`RequestDispatcher`从它获取所需资源的路径上的 a 并调用[`forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)它，从而传递当前的 HTTP servlet 请求和响应。

```
otherServletContext.getRequestDispatcher("/WEB-INF/TransactionResult.jsp").forward(request, response); 
```

一个完全不同的替代方案是创建一个完全独立的 Java 项目（在 Eclipse 中称为“Web 片段项目”），其中您将共享的 JSP 放在`/META-INF/resources`Java 源文件夹的文件夹中。最后用这个 Java 项目以文件夹中的 JAR 文件的形式部署所有 WAR `/WEB-INF/lib`（在 Eclipse 中，将独立的 Java 项目添加为所有 Web 项目的“部署程序集”就足够了）。您可以访问`/META-INF/resources`文件夹中的 JSP，就好像它们在当前 WAR 中一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:46:33.157

如果您使用的是符合 servlet 3.0 的服务器，我建议将所有共享的 Web 资源（JSP、CSS 文件等）`META-INF/resources`打包到 jar 目录中。把这个jar放到`WEB-INF/lib`每个webapp的里面，这些共享资源就会成为webapp的一部分，就好像它们直接在webapp的根目录下一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T17:43:55.077

使用[ServletContext.getContext()](http://docs.oracle.com/cd/E17802_01/products/products/servlet/2.3/javadoc/javax/servlet/ServletContext.html#getContext%28java.lang.String%29)来访问其他应用程序的上下文（在同一虚拟主机内）。获得之后，您可以使用该请求调度程序进行转发。

为了使上述工作正常，您可能需要启用某些供应商特定设置来覆盖默认安全性，请参见此处：[crossContext 属性在 Tomcat 中的作用是什么？它是否启用会话共享？](https://stackoverflow.com/questions/661978/what-does-the-crosscontext-attribute-do-in-tomcat-does-it-enable-session-sharin)

# excel - 查找重复项并将其标记为第一个和其余的 dup 标记，并使用“Other Dups”

> ID：11266316
> 
> 赞同：1
> 
> 时间：2012-06-29T17:28:29.927
> 
> 标签：excel

我有一个 excel 文件，我需要进行一些更改。我需要识别重复项，然后将“1st”放在第一个 dup 的系列列中。对于其余的重复需要在系列列中放置“其他重复”。是否可以？我尝试了查找和匹配，但没有任何帮助。=vlookup(a1,a2,0) , match(a1,a2,0) 或者 if(a1=a2,"found match")

![在此处输入图像描述](../Images/20e164fe6fc873263962cc1205a22a60.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:40:50.597

如果数据从 A2 开始，请尝试在 B2 中复制此公式

`=IF(COUNTIF(A:A,A2)>1,IF(COUNTIF(A$2:A2,A2)=1,"1st","other dups"),"")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:47:02.957

如果您想查看**出现**而不是 ' **1st** ' 和 ' **other dups** '，请在 B2 中使用以下公式复制下来：

```
=IF(COUNTIF(A:A;A2)>1;COUNTIF(A$2:A2;A2);1) 
```

例子： ![在此处输入图像描述](../Images/94a2388f26f44a063ee56bfcd33a42f1.png)

要求是对“A”列进行排序。

# jquery - jquery模态对话框覆盖不会全屏

> ID：11266322
> 
> 赞同：6
> 
> 时间：2012-06-29T17:29:04.360
> 
> 标签：jquery, css

我有一个 jquery 模态对话框，当您打开它时它不会完全灰显屏幕。如果我看一下它归因于这个css代码：

```
<div class="ui-widget-overlay" style="width: 1920px; height: 628px; z-index: 1001;"></div> 
```

这是来自使用 jquery 的[Themeroller](http://jqueryui.com/themeroller/)生成的自定义 css 。

不确定为什么要创建这些维度？如果我为高度选择更高的数字，它会覆盖更多的屏幕，但我想知道是否有一个值可以用来占据整个屏幕。我尝试`100%`了`auto`身高，但他们什么也没做。

对话框大小很好，它只是对话框后面的灰色叠加层。我希望对话框后面的这个灰色部分占据全屏的大小。以下是我正在使用的对话框选项供参考：

```
var dialogOpts={
    modal:true,
    autoOpen: false,
    resizable:false,
    width: 525
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-01T10:41:35.167

尝试这个：

```
.ui-widget-overlay {
    position: fixed !important;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-07T20:19:46.720

我有同样的问题，这就是我解决它的方法：

```
<style>
    .ui-widget-overlay
    {
        height: 100vw;
    }
</style> 
```

现在，`vw`是 View Width，您希望 Modal Overlay 覆盖整个屏幕。“正确”的措施应该是`vh`（查看高度），但是当我尝试这样做时，它不起作用。

这是[vh 和 vw](https://dev.opera.com/articles/css-viewport-units/)的链接。

我希望这会有所帮助，
干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T17:39:49.883

尝试类似的东西

```
$( "#dialog" ).dialog({
    position: ["left","top"],
    width:"100%",
    height:$(window).height(),
    zIndex: 1000            
}); 
```

# html - 如何让 CSS 表格列对齐？

> ID：11266330
> 
> 赞同：0
> 
> 时间：2012-06-29T17:29:30.490
> 
> 标签：html, css

我正在使用 CSS 表格，但结果出乎意料 - 表格列没有正确排列。这就是桌子的样子

![在此处输入图像描述](../Images/40005e714bb01defc6275f850baa3fe9.png)

这是CSS

```
* {
    /* old-style reset here :) */
    border: 0px;
    padding: 0px;
}

table {
    border-collapse: separate;
    border: 1px solid #9DABCE;
    border-width: 0px 0px 1px 1px;
    margin: 10px auto;
    font-size: 20px;
    width:90%;
}
td, th {
    width: 41px;
    height: 41px;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    vertical-align: middle;
    background: url(../img/cells.png);
    color: #444;
    position: relative;
}
th {
    font-weight: bold;
    font-size: 14px;
}
td.today {
    background-position: 81px 0px;
    color: white;
} 
```

这是表格 HTML

```
 <table cellspacing="0">
            <thead>
                    <th>Core Measure</th><th>National Average</th>
            </thead>
            <tbody>
                <tr>
                    <td class="today">Discharge Instructions</td>
                    <td class="today">91%</td>
                </tr>
                <tr>
                    <td class="today">Measure LV Systolic Function</td>
                    <td class="today">98%</td>
                </tr>
                <tr>
                    <td class="today">ACE/ARB for LVSD</td>
                    <td class="today">95%</td>
                </tr>
                <tr>
                    <td class="today">Smoking Cessation</td>
                    <td class="today">99%</td>
                </tr>
            </tbody>
            <tfoot>
                    <th>Core Measure</th><th>National Average</th>
            </tfoot>
        </table> 
```

帮助解决这个问题将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:40:08.630

这与您的精灵和您设置的背景位置值有关。我为你做了一个[小提琴](http://jsfiddle.net/Bsnsw/)，看起来还可以。

# vba - 如何用对象引用

> ID：11266332
> 
> 赞同：7
> 
> 时间：2012-06-29T17:29:42.330
> 
> 标签：vba, excel, excel-2007

`With`如果我想要对象本身，而不是它的属性/方法，我如何引用我在里面使用的对象？

```
With ThisWorkbook.Sheets("MySheet")
    Call MySub(ThisWorkbook.Sheets("MySheet")) ' works OK, but duplicated
    Call MySub(this) ' does not works
    .Range(...).Value2 = 1
    ...
End With 
```

+ 这里的正确术语是什么？我什至不知道如何为此撰写谷歌查询并获得一些有用的结果（因为这`with`是一个常用词）......

* * *

**更新**：澄清一下，我在考虑像`with ... as handle`python语法这样的句柄，而不是面向对象的`this`关键字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:40:39.927

试试这个

```
Sub Sample()
    Dim ws As Worksheet

    Set ws = ThisWorkbook.Sheets("MySheet")

    With ws
        MySub ws
        '~~> Rest of the code
    End With
End Sub 
```

或者

```
Sub Sample()
    Dim ws As Worksheet

    Set ws = ThisWorkbook.Sheets("MySheet")

    MySub ws

    With ws    
        '~~> Rest of the code
    End With
End Sub 
```

**编辑**：

> 你有关于“这个”不存在的任何信息吗？– 死亡四月 19 分钟前

`this`基本上是 C# 中的一个关键字，它指的是类的当前实例。VB 中的等价物`this`是`Me`.

`Me`关键字提供了一种方法来引用代码**当前正在其中执行**的类或结构的特定实例。例如在用户表单中，您可以使用

```
Me.textBox1.Text = "Blah Blah" 
```

在 VBA 中，`Me`也可以用于`thisworkbook`. 例如，如果您将此代码粘贴到`ThisWorkbook`代码区域中，那么它将为您提供工作簿的名称

```
Sub Sample()
    Debug.Print Me.Name
End Sub 
```

同样，当您从工作表代码区域运行上述代码时，您将获得工作表名称。

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T17:41:33.793

一开始不使用`with`怎么办？它使您的代码更具可读性，不再使用内存（因为该`with`语句无论如何都必须分配一个临时变量），并且不那么混乱。

```
Dim WS as WorkSheet
WS = ThisWorkBook.Sheets("MySheet")
Call vymaz_obrazky(WS)
WS.Range(...).Value2 = 1 
```

在上面的代码中，总成本是增加了一行代码（`DIM`语句），并且总共减少了 9 次击键。（`DIM`语句是 19 次击键，改成`WS`三行中是 6 次击键，但是你保存了`with`（4）和重复（30），节省了大约 9 次击键。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-20T22:18:20.083

使用`.Cells.Parent`. 这仅适用于工作表，但其他一些对象也有类似的东西（对于您可以使用的工作簿`.Sheets.Parent`）

```
With ThisWorkbook.Sheets("MySheet")
    Call MySub(.Cells.Parent)
    .Range(...).Value2 = 1
    ...
End With 
```

# javascript - 如何检测何时单击画布中的图像或至少获取其位置？

> ID：11266336
> 
> 赞同：0
> 
> 时间：2012-06-29T17:30:04.610
> 
> 标签：javascript, html, canvas

我有这个画布 mousedown 事件：

```
$('#canvas').mousedown(function(e) {
    var coords = canvas.getMousePos(e); // user helper function

    if (coords.x >= 0 && coords.x <= 16 && coords.y >= 32 && coords.y <= 48) {
        tool = "fill";
    } else if (coords.x >= 16 && coords.x <= 32 && coords.y >= 32 && coords.y <= 48) {
        tool = "circle";
    }
}); 
```

我也在这个画布上绘制图像，就像在我的文档准备功能中一样：

```
var imgCircle = new Image();
imgCircle.src = "circle.png";

imgCircle.onload = function() {
    toolboxContext.drawImage(imgCircle, 16, 32);
} 
```

我不喜欢在我的 if 语句中使用像这样的硬编码值。我想知道是否有一种方法可以获取画布中图像的本地坐标或实际注册事件以单击所述图像。谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:37:23.177

您不能直接在对象上注册事件，但很容易在画布上注册事件，如

```
canvas.addEventListener("mousedown", function(e) { 
```

（你可能对“mouseup”更感兴趣）

然后你可以得到画布中的坐标

```
e.pageX-$(canvas).offset().left 
```

和

```
e.pageY-$(canvas).offset().top 
```

（这里使用 jQuery 轻松跨平台定位画布，但您可以使用标准 javascript）

之后，您只需与您必须保存在某处的图像位置进行比较。我个人使用 Rect 类来实现该效果：

```
function Rect(x,y,w,h){
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
}
Rect.prototype.contains = function(x, y) {
    return x>=this.x && x<=this.x+this.w && y>=this.y && y<=this.y+this.h;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:15:05.493

我认为您期望它像 DOM API 一样工作。画布上下文对象只是在像素网格上绘制东西的一组方法。像素网格是唯一保存的真实状态信息。没有方形或矩形对象为您保存坐标。只是在地图上绘制矩形和圆形的方法。维护和响应该信息的变化要么是 DIY，要么你需要查看一个为你做这件事的库。

但是，您可以使用 jQuery 即时编写和侦听通用对象上的新事件。

```
var someObj = {};
//bind - unfortunate choice for the generic listening method
$(someObj).bind('HiSomeObj',function(){ alert('hi, whoever triggered this event on me'); });
$(someObj).trigger('HiSomeObj'); //'hi, whoever triggered this event on me'

//note how in the following trigger below how I add properties to the event object 
```

这是一种利用这一点的粗略的 DIY 方法。

```
//your constructor object - assumes 16px diameter (mostly reusing your code)
function imgCircleObjConstructor16px(xArg, yArg){

    var imgCircle = new Image(),

     //following 2 are var defs and public for convenience

    diameter = this.diameter = 16, //hard-coded for now
    coords = this.coords = [xArg,yArg],
    that = this; //locks down reference to instance for use in JQ

    imgCircle.src = "circle.png";

    this.draw = function(x,y){
        //some function that clears canvas or resets context for redraws
        clearCanvasOrContext();

        toolboxContext.drawImage(imgCircle, x, y);
        this.coords = [x,y];
    }

    $('#canvas').mousedown(function(e) {
        var mouseXY = canvas.getMousePos(e);
        if( mouseXY.x >= coords[0]) && mouseXY.x <= coords[0]+diameter &&
            mouseXY.y >= coords[1] && mouseXY.y <= coords[1] ){

            //trigger custom events with JQ 'trigger' method
            //can't use 'this' because it refers to the jq object for #canvas here
            $(that).trigger('circleBoundingBoxClicked', { someProperty:'optional' } );

            //note: second arg in trigger func serves no purpose
            //just provided as an example of adding properties to event objects

        }
    }
    //might as well tell the circle to draw itself when the object is instantiated:
    this.draw();
}

var myCircle = new imgCircleObjConstructor16px(16,32);

//listen to custom events with 'bind' method
$(myCircle).bind('circleBoundingBoxClicked', function(e){

    var circleObj = e.target; //JQ puts object args from the $ func under target property
    alert('Circle Bounding box at x: '+circleObj.coords[0]+', y:'+circleObj.coords[1]
        +' was clicked. someProperty value: ' + e.someProperty);

//After you fix whatever syntax goofs I didn't test for, this should alert when clicked:
//'Circle Bounding box at x: 15, y:32 was clicked. someProperty value: optional'

} ); 
```

现在，当您使用 myCircle.draw 方法重绘圆时，事件侦听器应该响应新的坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T15:40:40.407

有一种方法可以获取用户触摸位置的坐标 x 和 y：

```
<canvas id="none"></canvas>
<script>
    var canvas = document.getElementById("none");
    var ctx = canvas.getContext("2d");

    canvas.onclick = (e) => {
        let x = e.offsetX;
        let y = e.offsetY;

        console.log(`x: ${x}, y: ${y}`);
    }
</script> 
```

和`offset`

# c# - 在另一个之上显示表单的更好方法

> ID：11266337
> 
> 赞同：-1
> 
> 时间：2012-06-29T17:30:07.897
> 
> 标签：c#, .net, winforms

我有一个主表单。我想从它启动另一个表单并从启动的表单启动另一个表单。我想确保在显示子表单时主表单不可编辑，所以我使用`showdialog()`

**Mainform>(Showdialog)>form1>(showDialog+dispose)>form2(dispose)>Mainform**

从 Mainform 我调用 form2.ShowDialog() 然后从 form2 我使用以下代码启动另一个表单

```
this.visible=false;
form3.showdialog();
this.dispose(); 
```

但这有一些问题。有没有更好的方法来实现我正在寻找的东西？

```
edit:more description 
```

我有一个主窗体，用户单击主窗体上的按钮 > 启动 Form1 > 用户单击 Form1 中的按钮 > 关闭窗体 2 后启动窗体 2（处理/隐藏窗体 1） 主窗体应放在前面并使其可编辑，直到那时所有其他表单都应该在 Mainform 之上，并且 Mainform 应该是不可编辑的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:09:02.730

问题是您必须将 MainForm 指定为（两者）form2 和 form3 的父级。当你使用 ShowDialog 的无参数重载时，WinForms 使用活动窗体作为父级，因此 form3 的父级自动变为 form2。然后，您尝试关闭/处置 form2 导致 form3 成为孤立的。

有几种方法可以获取 MainForm 的引用，但最简单的是使用：

```
form2/3.ShowDialog(Application.OpenForms["MainForm"]); 
```

假设您已将 MainForm 上的 Name 属性设置为“MainForm”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:41:44.517

在您的代码中， this.dispose() 仅在 form3 关闭后执行。我认为您想要的是在 form3 关闭后关闭 form2，因此您可以调用 this.Close() 而不是 this.Dispose()。

```
this.visible=false;
form3.showdialog();
this.Close(); 
```

或者，也许在 form3 出现后，您不再需要 form2。这意味着：

```
this.visible=false;
//show instead of showdialog so it wont wait until form3 is closed
form3.show();
this.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:25:18.290

看起来您正在尝试实现类似向导的东西。最好的解决方案是在主窗体中按顺序启动所有子窗体。

如果您需要沿序列传递数据，则应将其从每个对话框传递到主窗体，然后将其传递到下一个对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T20:28:12.740

主窗体：

```
Form1 f = new Form1();
if (f.ShowDialog(this) == DialogResult.OK) {
    Form2 f2 = new Form2();
    f2.ShowDialog(this);
} 
```

Form1（单击将打开表单 2 的按钮）：

```
button1_click(object sender, EvengArgs e) {
    this.DialogResult = DialogResult.OK;
    Close();   
} 
```

# java - 以编程方式判断您的视觉表单是否正在预览

> ID：11266339
> 
> 赞同：2
> 
> 时间：2012-06-29T17:30:13.013
> 
> 标签：java, swing, netbeans

我们使用 NetBeans GUI 构建器来创建我们的可视化表单。

我们尝试使它们与 JavaBean 兼容，以便我们可以将组件拖放到屏幕上。但是，有时这会变得很困难，因为组件需要连接到在预览/设计时对 NetBeans 不可用的服务，因此会引发异常并阻止您将组件拖放到表单上。

作为一种变通方法，我在与服务的连接周围添加了尝试捕获，当 NetBeans 尝试实例化表单以便可以预览时，我知道这些服务会失败。

不过，这感觉相当骇人听闻，如果有一种方法可以检查组件是否处于设计模式，并且如果是这种情况，那么就不要实例化会引发异常的对象。

有人对我如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:31:48.563

听起来您的表单类中内置了太多逻辑。您应该考虑使用所有连接到您的服务的代码并将其捆绑到一个或多个类中，然后在运行时将这些类注入到您的表单中。然后，确保调用该对象的代码在该对象不可用时不会抛出空指针异常，就像它在预览中一样。

# javascript - 如何禁用启用基于另一个复选框的复选框？

> ID：11266340
> 
> 赞同：1
> 
> 时间：2012-06-29T17:30:18.767
> 
> 标签：javascript, forms

以下代码由 for 循环生成。

```
<form action="saveresponse.php" method="POST" name="mainForm">

<input class="cbox_yes" type="checkbox" name="yes[]" value="01.jpg"
onclick="spenable()" /> OK
<input class="cbox_sp" type="checkbox" name="sp[]" value="01.jpg" disabled />Special<br />

<input class="cbox_yes" type="checkbox" name="yes[]" value="02.jpg"
onclick="spenable()" /> OK
<input class="cbox_sp" type="checkbox" name="sp[]" value="02.jpg" disabled />Special<br />

etc etc upto n times... 
```

现在，我想要的是在页面加载时，所有 sp[] 复选框应该被禁用和启用，只有当它们对应的 yes[] 复选框被用户选中时。

我正在使用的 Javascript 代码：（只是为了检查 JS 是否正在捕获 yes[] 复选框的状态？

```
function spenable(){
        var yes = document.mainForm.yes[].value;
            if (yes == true)
                //alert("true");
                document.mainForm.yes[].value = checked;
            else
                //alert("false");
                document.mainForm.yes[].value = checked;
        };
    }; 
```

但我没有收到任何警报（既不是，也不是）。

那么，第二行中的 yes[] （方括号）是否不正确？或者我的 if/else 条件在 JS 中是错误的？

PS SO 或 Google 上的所有问题都只涉及一个案例/对。
PS 如果需要，我可以将 yes[] 更改为 yes1、yes2、yes3 等以及相应的 sp1、sp2、sp3，其中 1,2,3 是 For 循环的 $i，但是我将如何在 JS 中捕获/引用它？

_*更新：* _

流程/条件是（澄清）：
最初特殊复选框将被禁用，并且确定复选框将被取消选中。
然后，如果用户选中 Ok，则启用 Special。
如果用户愿意，他可以勾选特别。
如果稍后用户改变主意并取消勾选 OK，Special 应该取消勾选并再次禁用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:37:31.330

为了简单起见，我在这里使用了 jQuery。

```
$("input[name='yes[]']").change(function() {      //When checkbox changes
    var checked = $(this).attr("checked");
    $(this).next().attr("disabled", !checked);    //The next checkbox will enable
});​                                               // or disable based on the
                                                  // checkbox before it 
```

*演示： http:* [//jsfiddle.net/DerekL/Zdf9d/](http://jsfiddle.net/DerekL/Zdf9d/)
*纯 JavaScript：http:* [//jsfiddle.net/DerekL/Zdf9d/1/](http://jsfiddle.net/DerekL/Zdf9d/1/)

## 更新

当特殊复选框被选中时，它将取消选中第一个复选框。
*纯 JavaScript：http:* [//jsfiddle.net/DerekL/Zdf9d/2/](http://jsfiddle.net/DerekL/Zdf9d/2/)

## 更多更新

这是演示：
*纯 JavaScript： http:* [//jsfiddle.net/DerekL/Zdf9d/3/](http://jsfiddle.net/DerekL/Zdf9d/3/)
*jQuery：http:* [//jsfiddle.net/DerekL/Zdf9d/4/](http://jsfiddle.net/DerekL/Zdf9d/4/)

[小提示：`document.querySelectorAll`适用于所有现代浏览器和 IE8+，包括 IE8。如果要支持 IE6，最好使用[jQuery 。](http://www.jquery.com/)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:40:25.257

您不能`yes[]`在 Javascript 中用作标识符，因此您必须使用名称作为字符串来访问该字段：

```
document.mainForm["yes[]"] 
```

这不会返回单个元素，它将返回一个元素数组。使用索引访问特定元素：

```
document.mainForm["yes[]"][0] 
```

复选框的值将始终是`value`属性，无论复选框是否被选中。使用该`checked`属性来确定它是否被选中：

```
function spenable() {
  var yes = document.mainForm["yes[]"][0].checked;
  if (yes) {
    alert("true");
  } else {
    alert("false");
  };
} 
```

要访问被单击的特定复选框，请在事件调用中发送复选框的索引：

```
<input class="cbox_yes" type="checkbox" name="yes[]" value="01.jpg" onclick="spenable(0);" /> OK 
```

在函数中使用索引：

```
function spenable(idx) {
  var yes = document.mainForm["yes[]"][idx].checked;
  var sp = document.mainForm["sp[]"][idx];
  sp.disabled = !yes;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T17:47:21.127

如果您愿意使用 jQuery：

```
$('input[type="checkbox"]').click(function(){
    var obj = $(this);
    obj.next('.cbox_sp').attr({'disabled':(obj.is(':checked') ? false : 'disabled')});
}); 
```

此解决方案将为所有复选框分配一个`onclick`事件处理程序，然后检查是否应禁用相应的“特殊”复选框。它还将默认选中状态设置为 true。

工作示例：http: [//jsfiddle.net/6YTqC/](http://jsfiddle.net/6YTqC/)

# c# - 如何更新脸书状态？

> ID：11266345
> 
> 赞同：0
> 
> 时间：2012-06-29T17:30:45.917
> 
> 标签：c#, windows-phone-7, facebook-c#-sdk

我希望允许我的 WP 应用程序用户共享文本（放入此应用程序）以更新他们的 facebook 状态。

我读到它存在一个名为[facebook c# sdk](http://csharpsdk.org/docs/phone/)的项目，但这个页面是空的！

你知道它是否存在一种简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:51:23.130

如何使用共享状态任务？

```
using Microsoft.Phone.Tasks;

...

ShareStatusTask shareStatusTask = new ShareStatusTask();
shareStatusTask.Status = "Here's my new status!";
shareStatusTask.Show(); 
```

# sql-server-2008 - 插入身份脚本

> ID：11266348
> 
> 赞同：0
> 
> 时间：2012-06-29T17:31:03.147
> 
> 标签：sql-server-2008, tsql

假设我有一个表，第一列是一个标识。我认为价值是由一个自动创造的。假设我有这个专栏

```
1 
2
3
4
...
47
48
49
50 
```

如果我删除最后一行（id = 50）并插入一个新行，为什么标识是 51 而不是 50？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:37:31.690

无论该行是否存在，该值都会用完。除了删除之外，您还会在回滚插入时看到间隙。如果你想要一个连续的整数序列，身份不是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:35:11.877

身份种子不受删除的影响，因此下一个值将继续增加，就好像该行从未被删除一样。

也可以使用`DBCC CHECKIDENT`(http://msdn.microsoft.com/en-us/library/ms176057.aspx) 实用程序重新植入身份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T17:37:52.410

种子与记录分开跟踪；如果您删除记录，该值仍会被使用。您可以使用

```
DBCC CHECKIDENT (YourTable, NORESEED) 
```

验证下一个身份值将是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T20:13:57.373

尝试调整差距是一个非常糟糕的主意。如果您没有正确执行此操作，您很可能会遇到数据完整性问题。没有理由担心 99.99% 的应用程序中存在差距（有一些应用程序具有不允许差距的法律要求 - 那些不使用身份的应用程序）。

# java - REST如何在URI中传递空路径参数？

> ID：11266349
> 
> 赞同：3
> 
> 时间：2012-06-29T17:31:09.430
> 
> 标签：java, rest, jax-rs

我正在开发一个宁静的网络应用程序。在此我采用的参数是 userid 和 orderid。

`userid`可以`null`。_
URI 是`@Path("api/user/userid/order/orderid")` 我的方法是，

```
void add(@PathParam("userid") String userId, @PathParam("orderid") String orderId); 
```

我想`userId`在 URI 中传递空值。

我试过了`api/user//order/1234`。但是在这种情况下， the`userid`的值是`orderId`(ie 1234 and `orderId`is `null`. (这是错误的)

我也尝试将路径更改为`@Path("api/user/userid: .*/order/orderid")`. 然而结果和以前一样。

解决此问题的其他方法可能是使用`@QueryParam`for`userid`或创建另一种方法 for `userid null`。

但我想知道是否有办法让`userId`as`PathParameter`代替`QueryParam`并传递`userid`as的值`null`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T19:17:18.070

将 URL 参数设置为 null 不是有效情况。

发布到 URL`api/user/userid/order/orderid`是说“为这个用户创建一个订单”。获取相同的 URL 会说“为这个用户检索这个特定的订单”。两者都在用户的上下文中。

要在用户上下文之外进行订单创建或检索，只需删除 URL 的这两部分...

```
api/order/orderid 
```

这将允许您在客户范围之外创建和获取订单。这也适用于用户的上下文。如果您发布一个没有用户 ID 的订单，没人会在意，但可以指定一个。如果你得到一个订单，它不应该关心它是给哪个客户的，除非你的 orderID 在客户中不是唯一的，但这可能不是一个好主意，但这是一个单独的讨论。

# windows - 在 Windows 批处理命令运行期间阻止 Cygwin 预先挂起“c:\cygdrive”

> ID：11266351
> 
> 赞同：-1
> 
> 时间：2012-06-29T17:31:16.743
> 
> 标签：windows, batch-file, cygwin, cmd

使用此行运行朋友的批处理文件

```
for /F "tokens=1 delims=¶" %%i in ('which synplify_pro.exe') do set synplify_path=%%~dpi 
```

var synplify_path 正在使用 c:\cygdrive 预先设置。

我只想要窗户部分。

有没有办法防止预先挂起或只取回窗口部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:52:27.140

好吧，您可以简单地从结果中删除该部分。

如果它在循环之后总是存在，您可以像这样简单地将其切断：

```
SET synplify_path=%synplify_path:~11% 
```

其中`11`是字符串的长度`c:\cygdrive`。如果在有问题的`\`字符串之后有一个并且也需要删除它，请 make it `12`。

或者，您可以这样做：

```
SET synplify_path=%synplify_path:c:\cygdrive=% 
```

这将用空字符串替换`c:\cygdrive`in的所有条目`%synplify_path%`，即它只会删除该子字符串。这种方法可能会更好，以防`c:\cygdrive`由于某种原因结果可能不存在：如果字符串不包含，该方法将保持字符串不变`c:\cygdrive`。

我不确定您是否真的不应该尝试使用`c:\cygdrive`路径中不喜欢的命令来解决问题，但是......

# java - 将字符串日期与当前长时间进行比较

> ID：11266357
> 
> 赞同：1
> 
> 时间：2012-06-29T17:31:41.707
> 
> 标签：java, android

搜索 API 以`String`格式返回日期，我想将该日期与当前日期进行比较并做一些事情。我创建了一个日期对象并对其进行了解析，但在进行比较时仍然出现错误。

```
Calendar currentDate = Calendar.getInstance();
long dateNow = currentDate.getTimeInMillis();

String eventDate = meta.getString("startDate"); //This is the string API returns

SimpleDateFormat formatter  = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss.SSS");
Date date = formatter.parse(eventDate);
long modifiedDate= date.getTime();

if (dateNow.compareTo(modifiedDate)>0) {
    //Do Something
} 
```

**我得到的错误是：**

```
Cannot invoke compareTo(long) on the primitive type long 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T17:42:51.127

比较原始`long`s 时，只需使用普通比较运算符：

```
dateNow > modifiedDate 
```

不建议这样做，但如果要使用`compareTo`，请先转换为`Long`：

```
Long.valueOf(dateNow).compareTo(Long.valueOf(modifiedDate)) > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:38:36.110

compareTo 方法是包装类的一部分，long 是原始数据类型 - 您不能在原始数据类型上调用方法。将 long 更改为 Long 或直接比较 long，如 dateNow > modifiedDate

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T17:39:59.933

`long`是一个原始类型，这意味着它不是一个对象，也没有基本的方法，比如`compareTo`等。你可以执行数学运算来比较它们：

```
if (dateNow - modifiedDate > 0) /* dateNow is later than modifiedDate */ 
```

另一种解决方案是使用`Long`(capital L) 这*是*一个对象。然后你可以使用`compareTo`，等等。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-29T17:39:57.993

`compareTo`是一种方法。它不是为原始类型定义的`long`。它*是*为 Date 类定义的。

```
Date dateNow = currentDate.getTime(); // instead of getTimeInMillis()
...
if (dateNow.compareTo(date)) { // this will now work 
```

如果它们都是 Date 对象，您可以这样做`dateNow.before(date)`在语义上更有意义。

或者，您可以使用 > 和 < 运算符，`dateNow < modifiedDate`如果您离开`dateNow`，则执行 long。

# c++ - 我应该什么时候使用 make_heap 与优先队列？

> ID：11266360
> 
> 赞同：43
> 
> 时间：2012-06-29T17:31:45.007
> 
> 标签：c++, heap, priority-queue

我有一个要用来创建堆的向量。我不确定是否应该使用 C++ make_heap 函数或将向量放入优先级队列？在性能方面哪个更好？我什么时候应该使用一个与另一个？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-29T17:47:04.433

在性能方面没有区别。`std::priority_queue`只是一个适配器类，它将容器和与堆相关的相同函数调用包装到一个类中。该规范`std::priority_queue`公开声明。

通过直接`heap`从暴露的`std::vector`和调用堆相关的函数构建一个，您可以保持它对外部访问的可能性保持开放，这可能会破坏堆/队列的完整性。`std::priority_queue`充当限制访问“规范”最小值的障碍：`push()`,`pop()`等`top()`。您可以将其视为自律执行措施。

此外，通过使您的队列接口适应“规范”操作集，您可以使其与符合相同外部规范的其他基于类的优先级队列实现统一和可互换。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-29T17:47:20.780

priority_queue （至少通常）被实现为堆。因此，真正的问题是priority_queue 是否提供了您所需要的。当您使用 make_heap 时，您仍然可以访问所有元素。当您使用priority_queue 时，您只有少数操作对元素的访问非常有限（基本上只是插入一个项目，然后删除队列头部的项目）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-21T09:23:30.347

**C++11 标准**

[C++11 N3337 标准草案](https://github.com/cplusplus/draft/raw/master/papers/n3337.pdf)规定`std::make_heap`用于`std::priority_queue`在“23.6.4.1 priority_queue constructors”的构造函数中：

> 显式priority_queue
> 
> 2 效果：用 x 初始化 comp 和用 y 初始化 c（复制构造或移动构造，视情况而定）；调用 make_heap(c.begin(), c.end(), comp)。

和其他方法说：

> 无效推送（常量值类型& x）；
> 
> 效果：c.push_back(x); push_heap(c.begin(), c.end(), comp)

然而，从较新的 n4724 开始，非构造方法的措辞变成“好像”，所以我认为`*_heap`不能保证对方法的实际调用，只是它的功能行为。

所有这些都证实了[https://stackoverflow.com/a/11266558/895245](https://stackoverflow.com/a/11266558/895245)提到`std::priority_queue`的关于`std::make_heap`.

**逐步调试到`g++`6.4 stdlibc++ 源以确认`priority_queue`转发到`make_heap`**

在 Ubuntu 的 16.04 默认`g++-6`包或[从源代码构建的 GCC 6.4](https://stackoverflow.com/questions/9450394/how-to-install-gcc-piece-by-piece-with-gmp-mpfr-mpc-elf-without-shared-libra)上，您无需任何进一步设置即可进入 C++ 库。

使用它，我们可以很容易地确认它`std::priority_queue`只是一个`std::make_heap`带有底层的家庭的包装器`std::vector`，这意味着性能将是相同的。

一个.cpp：

```
#include <cassert>
#include <queue>

int main() {
    std::priority_queue<int> q;
    q.emplace(2);
    q.emplace(1);
    q.emplace(3);
    assert(q.top() == 3);
    q.pop();
    assert(q.top() == 2);
    q.pop();
    assert(q.top() == 1);
    q.pop();
} 
```

编译和调试：

```
g++ -g -std=c++11 -O0 -o a.out ./a.cpp
gdb -ex 'start' -q --args a.out 
```

现在，如果你`std::priority_queue<int> q`先进入构造函数，它就会进入`vector`构造函数，所以我们已经可以猜到`std::priority_queue`包含一个`std::vector`.

现在我们`finish`在 GDB 中运行以找到队列构造函数，然后再次进入，这将我们引导到实际的队列构造函数`/usr/include/c++/6/bits/stl_queue.h`：

```
443       explicit
444       priority_queue(const _Compare& __x = _Compare(),
445              _Sequence&& __s = _Sequence())
446       : c(std::move(__s)), comp(__x)
447       { std::make_heap(c.begin(), c.end(), comp); } 
```

这显然只是转发到一个对象`std::make_heap`的顶部。`c`

所以我们在里面打开源文件`vim`，找到 的定义`c`：

```
 template<typename _Tp, typename _Sequence = vector<_Tp>,
       typename _Compare  = less<typename _Sequence::value_type> >
    class priority_queue
    {

      [...]

      _Sequence  c; 
```

所以我们得出结论`c`是`vector`.

如果我们进入其他方法，或者通过进一步检查源代码，我们很容易看到**所有其他`priority_queue`方法也只是转发到`std::make_heap`函数族**。

堆与平衡 BST 的选择是有意义的，因为堆的平均插入时间更短，请参阅：[堆与二叉搜索树 (BST)](https://stackoverflow.com/questions/6147242/heap-vs-binary-search-tree-bst/29548834#29548834)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T19:01:39.330

`priority_queue`不是容器。它是一个容器适配器，它使用特定的底层容器，例如`vector`or `deque`，并提供一组特定的方法来处理数据。此外，它的实现依赖于`*_heap`算法。

例如，每当您将新值推送到 时，`vector`您都应该调用`push_heap`以扩展被视为堆的范围。如果你不使用`priority_queue`，它可以让你考虑，比如说，一半的`vector`堆（`std::make_heap(v.begin(), v.begin() + (v.size() / 2))`），而另一半将保持原样。

`priority_queue`当你调用它时会做什么`push`：它将一个新元素推到底层容器的后面并调用`push_heap`以保持堆属性的优先级（只关心第一个元素是最大的）。

我会说您最好考虑解决方案设计和您的具体要求，而不是性能问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-04T11:09:39.727

如果您不想修改该向量，那么您应该使用`priority queue`它，因为它会创建一个单独的向量。但是，如果您有能力编辑它，那么显然使用`make_heap`会更好，因为它不会创建辅助空间并就地修改该向量，因此可以节省空间。此外，优先队列很容易实现。例如，当您在弹出元素时使用 make_heap 时，您必须先使用两个命令，`pop_heap`然后是`pop_back`.. 但在优先级队列的情况下，您可以只使用一个命令来完成。同样，同时将元素推入堆中。

现在，两者的性能是相同的，因为优先级队列不是容器，它使用一些底层容器作为向量或双端队列，它们使用与 make_heap 操作相同的堆操作。所以，你应该根据你的要求使用一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-28T05:01:48.703

make_heap 以封装为代价提供了灵活性，例如，打印出堆。

make_heap 的一个有趣用途是就地合并排序，它在合并的一侧使用 make_heap，以实现 n/2(log(n/2)) 的最坏情况就地合并。

此示例显示了输入向量的使用并打印出创建的堆：

```
#include <queue>
#include <iostream>
#include <string>
#include <vector>
using namespace std;

void print(string prefix,vector<int>& v)
{
  cout << prefix;
  for(int i : v)
     cout << i << " ";
  cout << endl;
}

int main()
{
  vector<int> v={1,2,9,0,3,8,4,7,1,2,9,0,3,8,4,7};
  typedef priority_queue< int,vector<int>,greater<int> > MinQ;
  MinQ minQ(v.begin(),v.end()); //minQ
  print("After priority_queue constructor: ",v);

  make_heap(v.begin(),v.end(),greater<int>());
  print("After make_heap: ", v);
  return 0;
} 
```

输出：

```
After priority_queue constructor: 1 2 9 0 3 8 4 7 1 2 9 0 3 8 4 7
After make_heap: 0 1 0 1 2 3 4 7 2 3 9 8 9 8 4 7 
```

# sql - 使用已部署的 SQL 紧凑型数据库进行实体框架迁移

> ID：11266364
> 
> 赞同：3
> 
> 时间：2012-06-29T17:31:58.663
> 
> 标签：sql, entity-framework, deployment, entity-framework-4, sql-server-ce

我的情况：EF 4.3，私人安装 SQL Compact 4，.Net FW 4，c# winform

问题：部署应用程序后，不可避免的更改要求我在 SQL 紧凑型数据库的唯一表中创建一个新字段。在应用程序安装期间，SQL compact db 被放置在用户的 Application Data 文件夹中，以便可以成功写入。我更新了程序并重新部署，但出现了以下行为：

*   卸载旧版本的应用程序不会卸载用户的应用程序数据文件夹中的 SQL compact db
*   安装应用程序的更新版本不会覆盖用户应用程序中的旧 SQL Compact 数据库。

由于带有添加列的新数据库不会被复制，因此当用户运行它时会破坏应用程序。我的研究表明我应该使用“自动 EF 迁移”来解决我的问题。在我的情况下，我想要的策略是快速检查 db 表并在必要时添加缺失的列。

我首先使用 EF 数据库。我很难找到一个适合我的情况和我想要解决这个问题的策略的好例子。

任何帮助将不胜感激！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T17:09:14.310

我认为 EF Migrations 与您的问题没有任何关系。据此，[如果](https://stackoverflow.com/questions/2261556/how-does-the-clickonce-installer-handle-updates-when-a-compact-database-is-invol)您逐步遵循 ClickOnce 教程，它应该可以工作。正如那个 SO 答案所建议的，你应该检查[这个页面](http://msdn.microsoft.com/en-us/library/d8saf4wy.aspx)。祝你好运！

# javascript - 如何在 SQL 表中插入两个变量

> ID：11266369
> 
> 赞同：0
> 
> 时间：2012-06-29T17:32:37.807
> 
> 标签：javascript, sql, html, insert

我已经坚持了一段时间，我似乎无法将两个变量插入表中。我认为这段代码应该可以工作......

```
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);

function submit() 
{
    var input = document.getElementById("save_name").value;
    var msg;
    var time_stamp = new Date();

    db.transaction(function (tx) 
    {
        tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id auto_increment, date_time varchar(128), log varchar(64))');
        tx.executeSql('INSERT INTO LOGS (log, date_time) VALUES (?, ?)', [input, time_stamp]); // <--Problem here!
        msg = '<p>Log message created and row inserted.</p>';
        document.querySelector('#status').innerHTML = msg;
    });
} 
```

但它没有将我的变量插入到我的表中。

这是我的打印功能：

```
function display_fields() 
{
    db.transaction(function (tx) 
    {
        tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) {
            var len = results.rows.length, i;
            msg = "<p>Found rows: " + len + "</p>";
            document.querySelector('#status').innerHTML += msg;
            for (i = 0; i < len; i++) 
            {
                msg = "<p><b>" + results.rows.item(i).log + " " + result.rows.item(i).date_time + "</b></p>";
                document.querySelector('#status').innerHTML += msg;
            }
        }, null);
    });
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:38:10.280

作为测试 - 试试这种方式：

```
db.transaction(function (tx) 
{
    tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id auto_increment, date_time varchar(128), log varchar(64))');
    tx.executeSql('INSERT INTO LOGS ( log ) VALUES (?)', [input]); // <--Problem here!
    msg = '<p>Log message created and row inserted.</p>';
    document.querySelector('#status').innerHTML = msg;
}); 
```

如果这有效，那么是您的日期格式错误。此外，您可以向表中添加触发器以自动插入时间，而不是让客户端执行...

另外 - 你的意思是广告日志而不是让 id 成为 auto_incrementing？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:40:08.637

当我更改 display_fields 的实现时，它在 Chrome 中对我有用

```
result.rows.item(i).date_time 
```

到

```
results.rows.item(i).date_time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:20:16.857

我能让这个工作的唯一方法是通过cancatinating

这是我所做的：

```
tx.executeSql('INSERT INTO LOGS (log, date_time) VALUES ("' + input + '", "' + time_stamp + '")'); 
```

我知道这会导致 SQL 注入，但我无法让它以任何其他方式工作。

# flash - 具有 wmode 不透明或透明的 Flex 应用程序会导致 Windows 上的 IE 出现图形故障

> ID：11266370
> 
> 赞同：0
> 
> 时间：2012-06-29T17:32:38.847
> 
> 标签：flash, apache-flex, swfobject, wmode, visual-glitch

我有一个 Flex 应用程序，其中包含一些需要出现在其上的 HTML 元素。为此，我们将 wmode 设置为不透明（或透明）。但是，在 Windows 上的 Internet Explorer 中，当我们通过 mx:TextField 输入进行切换时，我们经常会看到图形故障。故障是一个矩形，几乎跨越了应用程序的宽度，并且与 TextField 一样高。矩形“擦除”Flash 内容并通过它显示站点的背景。

稍微滚动页面，单击浏览器，甚至右键单击 Flash 内容都会使故障消失（我假设 Flash 重绘时）。

将 wmode 设置为“window”或“direct”可以解决问题，但 HTML 元素当然不能再出现在 Flex 应用程序的顶部。

我们使用 SWFObject 来嵌入播放器。

有没有人遇到过类似的问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:17:55.640

一种解决方法是调用 ExternalInterface 来更改包含 swf 的 div 的某些内容。在我们的例子中，我们为 div 添加了一个与背景颜色相同的边框底部 (#FFFFFF)，然后在它和另一个几乎相同的颜色 (#FFFFFE) 之间切换。这足以迫使浏览器（它接管一些闪存显示）强制重绘。

# android - mvn android:deploy 不工作（尽管确认成功）

> ID：11266373
> 
> 赞同：6
> 
> 时间：2012-06-29T17:33:03.407
> 
> 标签：android, maven, maven-3, android-maven-plugin

我正在使用 android-maven-plugin 3.2.0 并运行以下命令以在我的设备（Nexus One、Android 2.3.6）上安装和启动 apk，这是唯一通过 USB 连接且对 adb 可见的设备; 也没有并行运行的模拟器。

```
mvn install android:deploy android:run 
```

下面是我的 shell 中的输出，看起来一切都很好，我什至收到一条消息说

> 成功安装/Users/myuser/Projects/MyCompany/com.mycompany.abc/target/com.mycompany.abc-1.0-SNAPSHOT.apk到HT9CPP805008_HTC_NexusOne

但这不是真的，我的设备上没有安装 apk，在应用程序下找不到。我目前可以真正安装 apk 的唯一方法是通过[解决方法](https://stackoverflow.com/questions/7673227/android-maven-plugin-how-to-start-an-app-automatically-after-deploying-it/7673271)，因为`android:deploy`它似乎无法正常工作。（虽然 adb 本身工作正常，但我可以通过 adb 手动运行任何命令（推送、安装等），它也可以毫无问题地找到我的设备。我在 Mac OS X Lion 上使用 adb v1.0.29）

**更新：**

这是我刚刚发现的一个有趣的发现：**如果我之前已经在我的设备上安装了该应用程序**然后运行 ​​maven，那么它会首先取消部署旧的 apk，然后重新部署新的 apk `android:deploy/run`。这行得通！但是 - 如果我之前根本没有在我的设备上安装该应用程序，或者在运行 maven 之前手动删除该应用程序，它将无法正常工作。更改from to的值在这里也没有任何区别。**`<undeployBeforeDeploy>``true``false`**

 **以前有人遇到过这个问题吗？

```
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.mycompany:com.mycompany.abc:apk:1.0-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:exec-maven-plugin is missing. @ line 85, column 21
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building com.mycompany.abc 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- android-maven-plugin:3.2.0:deploy (default-cli) @ com.mycompany.abc ---
[INFO] Waiting for initial device list from the Android Debug Bridge
[INFO] Found 1 devices connected with the Android Debug Bridge
[INFO] android.device parameter set to usb
[INFO] Device HT9CPP805008_HTC_NexusOne found.
[INFO] Successfully installed /Users/myuser/Projects/MyCompany/com.mycompany.abc/target/com.mycompany.abc-1.0-SNAPSHOT.apk to HT9CPP805008_HTC_NexusOne
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.334s
[INFO] Finished at: Sat Jun 30 01:23:01 CST 2012
[INFO] Final Memory: 12M/126M
[INFO] ------------------------------------------------------------------------ 
```

pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.mycompanyany</groupId>
  <artifactId>com.mycompany.abc</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>apk</packaging>
  <name>com.mycompany.abc</name>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>2.2.1</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <!-- Simply read properties from file -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>properties-maven-plugin</artifactId>
                <version>1.0-alpha-2</version>
                <executions>
                    <execution>
                        <phase>initialize</phase>
                        <goals>
                            <goal>read-project-properties</goal>
                        </goals>
                        <configuration>
                            <files>
                                <file>android.properties</file>
                            </files>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.2.0</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>11</platform>
                    </sdk>
                    <deleteConflictingFiles>true</deleteConflictingFiles>
                    <undeployBeforeDeploy>false</undeployBeforeDeploy>
                    <!--<sign><debug>false</debug></sign>-->
                    <device>usb</device>
                </configuration>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>exec-maven-plugin</artifactId>
                <groupId>org.codehaus.mojo</groupId>
                <configuration>
                    <executable>${basedir}/scripts/run_app.sh</executable>
                </configuration>
            </plugin>

        </plugins>
    </build>   

</project> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T07:33:15.800

我正在使用没有问题的 maven 插件（Linux 和 Galaxy Nexus）并且工作正常。

试试这个：

```
mvn clean install android:deploy android:run -Dandroid.device=usb 
```

这是我的pom：

[http://pastebin.com/tzuFyjSx](http://pastebin.com/RvBcVFKr)

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:35:52.787

我知道这是老问题，但我有同样的问题，但我没有在这里找到解决方案。

`mvn clean android:emulator-start install android:deploy`**

# jquery - 解析嵌套的 json 对象

> ID：11266376
> 
> 赞同：2
> 
> 时间：2012-06-29T17:33:06.370
> 
> 标签：jquery, json

我有一个 json 文件，我试图从中获取值。在这个文件中，一个对象嵌套在另一个对象中。我可以隔离顶级值，但不能隔离嵌套值。应该是语法问题。这是我正在使用的。

这是json：

```
{
    "total": [
        [
            {
                "votes": "79,060"
            },
            {
                "percent": "11%"
            },
            {
                "winner": "0"
            }
        ],
        [
            {
                "votes": "167,800"
            },
            {
                "percent": "22%"
            },
            {
                "winner": "0"
            }
        ],
        [
            {
                "votes": "51,519"
            },
            {
                "percent": "7%"
            },
            {
                "winner": "0"
            }
        ],
        [
            {
                "votes": "297,060"
            },
            {
                "percent": "39%"
            },
            {
                "winner": "1"
            }
        ],
        [
            {
                "votes": "156,787"
            },
            {
                "percent": "21%"
            },
            {
                "winner": "0"
            }
        ]
    ],
    "useWinnerColors": 1,
    "timestamp": "3:00 p.m. April 26",
    "candidateCount": 5
} 
```

当我写：

```
console.log(json.candidateCount); 
```

我得到正确答案（5）。

但是当我写：

```
console.log(json.total[0][1]); 
```

我得到对象 { percent="11%"}。

当我写：

```
console.log(json.total[0].votes); 
```

我不确定。

请问如何隔离“total”中项目的价值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T17:36:28.147

你得到了，`undefined`因为`json.total[0]`它本身就是一个数组。您需要隔离*内部* `json.total[0]`的特定数组。所以你需要做类似的事情`json.total[0][0].votes`or `json.total[0][1].votes`。

我认为您的 JSON 的更好结构是这样的：

```
{"total": [    
   {
      "votes": "79,060"
      "percent": "11%"
      "winner": "0",
   },
   ...
   {
      "votes": "156,787",
      "percent": "21%",
      "winner": "0"
   }], 
   "useWinnerColors": 1,
   "timestamp": "3:00 p.m. April 26",
   "candidateCount": 5
} 
```

现在你可以做`json.total[0].votes`。

您不需要创建一个数组，其中每个条目都是一个名称-值对。您可以直接使用关联数组。

**编辑**：要遍历您的关联数组，请使用`for..in`with `hasOwnProperty()`。该`hasOwnProperty()`检查将阻止您迭代它继承的属性（某些第三方库会污染命名空间）：

```
var map = json.total[0];
for(var prop in map) if(map.hasOwnProperty(prop)) {
   var value = map[prop];
   ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T17:37:42.993

每个'['符号意味着我们处理数组，每个'{' - 处理对象。实际上是`json.total`一个对象数组的数组（尽管每个内部对象只是一个“元组” - 单个键值对。

所以...

`json.total[0][1]`- 评估为 { 'percent': '11%' }

`json.total[0]['votes']`- 评估为无（未定义），因为跳过了一个步骤。) 它真的应该是`json.total[0][n].votes`or `json.total[0][n]['votes']`。这两种形式（几乎）是相同的。)

# django - 既然重置消失了，如何在 Django 1.4 中删除一个应用程序的所有数据？

> ID：11266380
> 
> 赞同：6
> 
> 时间：2012-06-29T17:33:38.997
> 
> 标签：django, django-1.4

如何删除 Django 应用程序数据库中的所有数据？在以前的版本`manage.py reset APPNAME`中完成了这项工作，但已被弃用。

如果我们想使用命令行从应用程序中删除所有数据，我们现在应该做什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T18:57:38.583

`reset`并且`sqlreset`都只是其他管理命令的包装器。`sqlreset`特别是可以通过简单地运行来复制：

```
python manage.py sqlclear myapp
python manage.py sqlall myapp 
```

`reset``sqlreset`仅用于在数据库上自动运行结果。就个人而言，我认为删除它是一个绝妙的主意。不过，如果您想要类似的功能，您可以将输出通过管道传输到数据库的 shell 命令。

对于 PostgreSQL，例如：

```
python manage.py sqlclear myapp | psql mydatabase
python manage.py sqlall myapp | psql mydatabase 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-05T23:41:29.880

如果您想要一个适用于大多数数据库类型的命令，您可以将 sqlclear 生成的 drop table 语句通过管道传输到 dbshel​​l

`python manage.py sqlclear myapp | python manage.py dbshell`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-29T17:57:18.653

```
from django.contrib.contenttypes.models import ContentType
for ct in ContentType.objects.all()
    ct.model_class().objects.all().delete() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-12T11:54:46.810

现在 Django 默认集成了迁移，您首先需要让您的应用程序的迁移首先取消应用然后删除。

这是至少适用于**Django 1.8**的命令行（替换为要删除所有关联数据的应用程序，并且：

```
# First, update the DB so it thinks no migrations were applied to the app
python manage.py migrate --fake <app_name> zero

# Erase all migrations in the app folder
rm -r "<app_name>/migrations/*"

# Erase the application tables
python manage.py sqlclear <app_name> | python manage.py dbshell

# Recreate the app tables, that will be empty
python manage.py makemigrations <app_name>
python manage.py migrate <app_name> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-25T12:29:14.770

## DIY

如果您想从命令行执行此操作，请创建以下[自定义命令](https://docs.djangoproject.com/en/1.9/howto/custom-management-commands/)：

```
from django.core.management.base import AppCommand, CommandError
from django.utils.six.moves import input
from django.db import DEFAULT_DB_ALIAS, connections

class Command(AppCommand):
    help = (
        'Removes ALL DATA related to the given app from the database '
        'by calling model.objects.all().delete() for all app models. '
        'This also removes related data in other apps via cascade.'
    )

    def add_arguments(self, parser):
        super(Command, self).add_arguments(parser)
        parser.add_argument(
            '--noinput', '--no-input',
            action='store_false', dest='interactive', default=True,
            help='Tells Django to NOT prompt the user for input of any kind.',
        )
        parser.add_argument(
            '--database', action='store', dest='database', default=DEFAULT_DB_ALIAS,
            help='Nominates a database to reset. Defaults to the "default" database.',
        )

    def handle_app_config(self, app_config, **options):
        app_label = app_config.label
        database = options['database']
        interactive = options['interactive']
        db_name = connections[database].settings_dict['NAME']

        confirm = (ask_confirmation(app_label, db_name)
                if interactive else 'yes')

        if confirm == 'yes':
            for model in app_config.get_models():
                model.objects.using(database).all().delete()
            self.stdout.write('Reset done.\n')
        else:
            self.stdout.write("Reset cancelled.\n")

def ask_confirmation(app_label, db_name):
    return input("""You have requested a reset of the application {app_label}.
This will IRREVERSIBLY DESTROY all data related to the app currently in
the {db_name} database, and return each table to empty state.
Are you sure you want to do this?
    Type 'yes' to continue, or 'no' to cancel: """.format(**locals())) 
```

将其复制到`app/management/commands`任何应用程序文件夹中的文件夹并运行它

```
./manage.py app_db_tables_reset any_installed_app_name 
```

## 成品包

该命令在`django_commands` [包](https://github.com/mrts/django-commands)中可用，您可以使用

```
pip install git+http://github.com/mrts/django-commands.git 
```

并将其添加到`INSTALLED_APPS`以激活命令。

使用 Django 1.9 测试，它可能适用于 1.8，也可能不适用于 1.8。

# c++ - c++如何监听HTTP请求

> ID：11266381
> 
> 赞同：2
> 
> 时间：2012-06-29T17:33:42.703
> 
> 标签：c++, http

我是 C++ 新手。

我需要监听 HTTP 请求。

请给我一些好的教程或例子

谢谢

更新：

平台：Windows 语言：C++

我会更清楚地解释我需要什么

当用户单击此页面上的行时：`http://ucp-anticheat.org/monitor.html`应用程序会在客户端计算机上自动启动。

我想做同样的事情。

我认为在客户端是侦听 http 请求的服务，如果 url 以 steam:// 开头，服务会自动运行应用程序...

我需要监听 http 请求吗？

我的问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:41:32.790

你可以通过像 mongoose 这样的 web 服务器来监听 http 请求，在 C++ 中可以很容易地使用[http://code.google.com/p/mongoose/](http://code.google.com/p/mongoose/)，这里是使用 mongoose web server [http://的一个很好的例子code.google.com/p/mongoose/source/browse/examples/hello.c](http://code.google.com/p/mongoose/source/browse/examples/hello.c)

我不确定您的意思是“客户端”，如果您将浏览器作为您的客户端，那么您无法控制浏览器之外的任何内容。如果你想控制一台机器，你需要你的客户端机器来运行你的 exe，它具有根据你的服务器指令执行的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:50:01.213

您应该创建一个简单的服务器程序，创建一个监听默认 http、https 等端口的 SOCKET。通常我们在一个循环中执行它（在每个循环中读取）。

现在...如果你指定你是在像 OS 还是 Windows 这样的 Unix 上会更容易，但从现在开始你可以用谷歌搜索它。像 sys/socket.h 或在几乎所有 linux 上尝试“man 7 socket”（至少我知道的那些）。

如果你想嗅探某些东西，你可以在网络上搜索一些特定的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:19:49.973

如果我的问题正确，您希望能够在有人单击带有自定义协议（如 steam:// 或 telnet:// ）的链接时启动应用程序。您正在寻找[协议处理](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)程序。

注册此类应用程序的一种简单方法是使用 ftype 程序，如此[处](https://stackoverflow.com/questions/796748/how-can-i-add-a-custom-url-handler-on-windows-like-itunes-itms)所述。

# c# - asp.net javascript消息未显示

> ID：11266382
> 
> 赞同：2
> 
> 时间：2012-06-29T17:33:52.047
> 
> 标签：c#, javascript, asp.net

我有一个按钮，onclick 设置为这个方法，它应该显示一个简单的 JS 警报弹出窗口：

```
string message = "File is already open. <br>Please close the file and try again.";
    System.Text.StringBuilder sb = new System.Text.StringBuilder();
    sb.Append("<script type = 'text/javascript'>");
    sb.Append("window.onload=function(){");
    sb.Append("alert('");
    sb.Append(message);
    sb.Append("')};");
    sb.Append("</script>");
    ClientScript.RegisterClientScriptBlock(this.GetType(), "alert", sb.ToString()); 
```

我以前使用过上面的代码，它已经工作了，但这次不行。唯一的区别是我使用的是另一个站点的母版页，而不是这个站点，而且这个站点也有一个计时器。

`<head>`aspx 页面中是否有与加载相关的 JS 内容？

```
protected void btnToCSV_Click(object sender, EventArgs e)
    {
        try
        {
            StreamWriter writer = new StreamWriter(@"\\server location\test.csv");

            Some writer.write stuff...

            writer.Close();
        }
        catch (Exception ex)
        {
            lblMessage.Visible = true;
            string message = "File is already open. Please close the file and try again.";
            ClientScript.RegisterClientScriptBlock(
               this.GetType(),
              "alert",
              string.Format("alert('{0}');", message),
              true);

        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T17:40:18.553

试试这个简单的版本

```
string message = "File is already open. <br>Please close the file and try again.";
ScriptManager.RegisterClientScriptBlock(
  UpdatePanel1, // replace UpdatePanel1 by your UpdatePanel id
  UpdatePanel1.GetType(), // replace UpdatePanel1 by your UpdatePanel id
  "alert", 
  string.Format("alert('{0}');",message), 
  true ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:39:47.287

你没有在这里编码任何东西：

```
sb.Append(message); 
```

如果消息是*Hello Jean d'Arc*（注意单引号），您将得到以下代码：

```
alert('Hello Jean d'Arc'); 
```

我让你想象这个=>当然是一个javascript错误的结果。

要修复此错误，请确保您已正确编码参数。一种方法是对其进行 JSON 序列化：

```
var serializer = new JavaScriptSerializer();
sb.AppendFormat("alert({0});", serializer.Serialize(message)); 
```

此外，由于您已经包含了`<script>`标签，请确保您将 false 作为`RegisterClientScriptBlock`函数的最后一个参数传递，以避免将它们添加两次：

```
ClientScript.RegisterClientScriptBlock(
    this.GetType(), 
    "alert", 
    sb.ToString(), 
    false           // <!---- HERE
); 
```

以下是完整代码的样子：

```
var message = "File is already open. <br>Please close the file and try again.";
var sb = new StringBuilder();
sb.Append("<script type=\"text/javascript\">");
sb.Append("window.onload=function() {");
var serializer = new JavaScriptSerializer();
sb.AppendFormat("alert({0});", serializer.Serialize(message));
sb.Append("};");
sb.Append("</script>");
ClientScript.RegisterClientScriptBlock(
    this.GetType(), 
    "alert", 
    sb.ToString(), 
    false
); 
```

另一个注意事项是，如果您在 AJAX 调用中执行此操作，您应该使用该`ClientScript.RegisterStartupScript`方法。

# php - Cakephp cron 作业来调用控制器的动作

> ID：11266385
> 
> 赞同：6
> 
> 时间：2012-06-29T17:34:39.753
> 
> 标签：php, shell, cakephp, controller, cron

几个月前我开始使用 CakePHP (1.2) 为公司的应用程序添加小功能，我对它不太熟悉。

在合并到生产服务器之前，我们先在开发服务器上进行本地测试。

我希望每小时调用一次控制器操作，通过我的研究，我认为这是执行此操作的最佳方法，即 cron 工作。

* * *

**尝试 1**

看完这些，

[http://bakery.cakephp.org/articles/mathew_attlee/2006/12/05/calling-controller-actions-from-cron-and-the-command-line](http://bakery.cakephp.org/articles/mathew_attlee/2006/12/05/calling-controller-actions-from-cron-and-the-command-line)

[http://book.cakephp.org/1.2/en/view/110/Creating-Shells-Tasks](http://book.cakephp.org/1.2/en/view/110/Creating-Shells-Tasks)

我可以实现一些没有错误的东西，但没有执行该操作。

基于这些示例，我在我的应用程序目录（不是 app/webroot）中添加了一个名为 cron_dispatcher.php 的文件，然后从应用程序目录执行此命令

> php cron_dispatcher.php /controller/action/param

仍然没有发生任何事情，但是当我通过 url 调用它时它工作得很好。

* * *

**尝试 2**

我尝试创建一个 shell (email.php) 来调用 /app/vendors/shells/ 中的操作。

```
<?php

class EmailShell extends Shell {

    public function main() {
        $this->out('Test');
    }

}
?> 
```

这成功地在控制台中输出测试使用

> 蛋糕电子邮件主要

但后来我找不到如何调用控制器的动作。我努力了

> $this->requestAction('/controller/action');

我还尝试从与 shell 中的 main 不同的函数进行调用。

我试图像使用模型一样将控制器包含在 $uses 变量中，但这没有用（我认为这没有意义）

我不认为创建任务是解决方案，因为我不想复制 sendEmails 函数，因此为什么我正在寻找一种方法来从 shell 或其他任何方式调用控制器的操作！

我可能缺少一些理论，谢谢

* * *

**解决方案**

我将一些方法从控制器移到了模型中，并且能够从 shell 中调用它们。

```
App::import('Component', 'Email');

class SendMemosShell extends Shell {

    var $uses = array(
        'Memo',
    );

    public function main() {

    }

    public function sendEmails () {
        $this->Email =& new EmailComponent(null);
        $memoList = $this->Memo->getMemos();
        //...
    }
} 
```

此链接帮助 [http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html](http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html)

* * *

编辑：澄清了一些信息并添加了解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T17:42:59.053

这实际上是一个很常见的问题，也遇到过。

控制器正在决定如何处理请求并启动该任务。在这种情况下，不需要控制器，因为您有一个 shell 任务，任务已经很清楚了。

知道了这一点，调用控制器方法是没有意义的。

所以重新考虑你的选择，是的，这是一个非常困难的选择。例如，您可能决定发送电子邮件是一个业务逻辑步骤，因此它应该在模型中。另一种选择是将它完全分开（这是我们最喜欢的）。

在这种情况下，您必须创建一个队列，在其中放入所有要发送的电子邮件。这是一个很好的设计，因为您知道控制器中的逻辑数量下降并且它是分离的。这样您就可以获得电子邮件服务。

例如，您可以要求服务发送“新用户”邮件。然后将 User 对象添加到它，它应该自己处理。这样您甚至可以扩展，因为您的服务可以外包，您可以在服务上扩展多个服务器等。

编辑：

好问题。

采取的步骤：

1.  首先集中“发送电子邮件”过程。所以选择一个放置它的位置。您可以决定：添加以将电子邮件发送到队列或直接调用服务。例如，您可以添加用于发送电子邮件的 shell 任务。

2.  调用 shell：现在你遇到了调用 shell 的问题。一般来说，你不想。为什么不？因为一个shell（一个任务）可以运行很长时间。这就是我们在两者之间使用队列的原因。所以你可以询问队列或让队列告诉你某事已经完成。例如，考虑一个已关闭的邮件服务器。您必须重试等。这不应该出现在 Web 请求中，因为用户正在等待响应。

3.  第三步是从你的 cron 调用 shell，现在这很容易，因为你已经在命令行上，所以你可以使用标准调用。

无论如何，有一些选项可以从控制器直接调用，但你不应该这样做。这篇文章提供了一些非常有趣的见解： [CakePHP：从控制器运行 shell 作业](https://stackoverflow.com/questions/6692221/cakephp-run-shell-job-from-controller)

编辑 31/08/'13：请参阅 CakePHP 的事件系统以获取一些示例：[http ://book.cakephp.org/2.0/en/core-libraries/events.html](http://book.cakephp.org/2.0/en/core-libraries/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:16:44.273

根据需要做什么，我经常将这些方法保留在我的控制器操作中。在操作的顶部，我检查 $_SERVER['REMOTE_ADDR'] == $_SERVER['SERVER_ADDR'] 以确保只有网站可以调用该操作。然后在 cron 我会 curl 或 wget 这个地址。

它有它的好处——在开发过程中更容易在本地运行（只需在浏览器中输入url），另外运行cli版本的php和apache版本之间存在一些差异，以及请求变量（例如蛋糕无法获取）通过 cli 的网站域/地址就像您可以作为 apache 模块运行一样，因此使用 html 帮助程序的网站的绝对链接不起作用）。

# php - PHP 数据访问对象

> ID：11266388
> 
> 赞同：13
> 
> 时间：2012-06-29T17:34:48.443
> 
> 标签：php, design-patterns, data-access-layer

我试图弄清楚我是否正确使用了 DAO 模式，更具体地说，当它到达我的映射器类时，抽象数据库持久性应该如何。我使用 PDO 作为数据访问抽象对象，但有时我想知道我是否试图过多地抽象查询。

我刚刚介绍了我如何抽象选择查询，但我已经为所有 CRUD 操作编写了方法。

```
class DaoPDO {

    function __construct() {

        // connection settings
        $this->db_host   = '';
        $this->db_user   = ''; 
        $this->db_pass   = ''; 
        $this->db_name   = '';

    }

    function __destruct() {

        // close connections when the object is destroyed
        $this->dbh = null;

    } 

    function db_connect() {

        try { 

            /**
             * connects to the database -
             * the last line makes a persistent connection, which
             * caches the connection instead of closing it 
             */
            $dbh = new PDO("mysql:host=$this->db_host;dbname=$this->db_name", 
                            $this->db_user, $this->db_pass, 
                            array(PDO::ATTR_PERSISTENT => true));

            return $dbh;

        } catch (PDOException $e) {

            // eventually write this to a file
            print "Error!: " . $e->getMessage() . "<br/>";
            die();

        }

    } // end db_connect()'

    function select($table, array $columns, array $where = array(1=>1), $select_multiple = false) {

        // connect to db
        $dbh = $this->db_connect();

        $where_columns  = array();
        $where_values   = array();

        foreach($where as $col => $val) {

            $col = "$col = ?";

            array_push($where_columns, $col);
            array_push($where_values, $val);

        }

        // comma separated list
        $columns = implode(",", $columns);

        // does not currently support 'OR' arguments
        $where_columns = implode(' AND ', $where_columns);

        $stmt = $dbh->prepare("SELECT $columns
                               FROM   $table
                               WHERE  $where_columns");

        $stmt->execute($where_values);

        if (!$select_multiple) {

            $result = $stmt->fetch(PDO::FETCH_OBJ);
            return $result;

        } else {

            $results = array();

            while ($row = $stmt->fetch(PDO::FETCH_OBJ)) {

                array_push($results, $row);

            }

            return $results;

        }

    } // end select()

} // end class 
```

所以，我的两个问题：

1.  这是对 DAO 的正确使用，还是我误解了它的目的？

2.  将查询过程抽象到这种程度是不必要的，甚至是不常见的吗？有时我觉得我试图让事情变得太容易......

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-01T23:27:29.153

它看起来更像是在 PDO（它本身就是一个持久层）之上构建一个持久抽象层，而不是一个[数据访问对象](http://en.wikipedia.org/wiki/Data_access_object)。虽然 DAO 可以采用多种形式，但目标是将您的业务逻辑与持久性机制分开。

```
 Business Logic
        |
        v
Data Access Object
        |
        v
 Persistence Layer 
```

具有`db_connect`并且`select`过于接近持久层的 DAO。通用 DAO 的最简单形式是在对象级别提供基本的 CRUD 操作，而不暴露持久性机制的内部结构。

```
interface UserDao
{
    /**
     * Store the new user and assign a unique auto-generated ID.
     */
    function create($user);

    /**
     * Return the user with the given auto-generated ID.
     */
    function findById($id);

    /**
     * Return the user with the given login ID.
     */
    function findByLogin($login);

    /**
     * Update the user's fields.
     */
    function update($user);

    /**
     * Delete the user from the database.
     */
    function delete($user);
} 
```

如果您的业务对象是底层 PDO 模型对象，您可以从 DAO 中返回它们。请注意，根据您选择的底层持久性机制，这可能并不理想。我没有使用过 PDO，但假设它类似于生成标准 PHP 对象的其他 ORM 工具，而无需将业务逻辑绑定到 PDO API。所以你在这里可能没问题。

例如，如果您通过直接访问库来实现持久性`mysqli`，您可能希望将数据复制到/从结果集中复制到您自己的模型对象中。这是 DAO 的工作，将其排除在业务逻辑之外。

通过使用 DAO 的接口，您现在可以为不同的持久性框架实现它：PDO、Doctrine、原始 SQL 等等。虽然您不太可能在项目中期切换方法，但与其他好处相比，使用接口的成本可以忽略不计，例如在单元测试中使用模拟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:55:30.627

1.  这不一定是必要的，但它肯定是常见的做法。有许多库比你正在做的更抽象 waaaaay :)

# dojo - dojo DataGrid 中的 setSelected() 使先前的选择保持活动状态，即使对于 selectionMode="single" 的网格也是如此

> ID：11266389
> 
> 赞同：4
> 
> 时间：2012-06-29T17:34:57.467
> 
> 标签：dojo, dojox.grid

我有一个 dojox.grid.DataGrid 我想以编程方式选择一行。我正在使用 setSelected() 这样做，它是第一次工作。但是，为不同的行再次调用它会使前一行突出显示。此外，如果我尝试重新选择之前选择的行，onSelected 事件不会触发。但是如果我真的在网格中单击，它会清除一些东西：在网格中突出显示的行之前未突出显示和未选中。

代码如下所示：

```
if (grid.rowCount > 0 && idx < grid.rowCount)
{
    grid.selection.setSelected(idx, true);
    grid.render();
} 
```

好像我启用了多选，但我已将网格声明为 selectionMode="single"。

```
<table dojoType="dojox.grid.DataGrid"
    id="hotTablesForAppDg"
    autoWidth="true" autoHeight="true" selectionMode="single"
    onSelected="autonomics.Clusters.loadTableDetails(this)"> 
```

我还需要调用其他什么来清除先前的选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T20:47:20.580

Problem solved. You need to call setSelected(..., false) on the currently selected index:

```
if (grid.rowCount > 0 && idx < grid.rowCount)
{
    if (grid.selection.selectedIndex >= 0)
    {
        // If there is a currently selected row, deselect it now
        grid.selection.setSelected(grid.selection.selectedIndex, false);
    }
    grid.selection.setSelected(idx, true);
    grid.render();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T18:08:29.710

我有同样的问题，网格有以前的选择处于活动状态。以下代码行 grid.selection.clear(); 在调用 render() 之前，解决了这个问题。希望这可以帮助。

# javascript - setTimeout 有多少个参数？

> ID：11266400
> 
> 赞同：1
> 
> 时间：2012-06-29T17:35:52.720
> 
> 标签：javascript

[这个 SO 答案](https://stackoverflow.com/a/3223466/765287)`setTimeout`使用四个参数进行调用。

```
 setTimeout(self.process1, 0, self, u); 
```

这让我很困惑。我看到的[文档](http://www.w3schools.com/js/js_timing.asp)`setTimeout`只使用了两个参数，而不是四个。

最后两个参数有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T17:40:06.860

引用[MDN 上的文档](https://developer.mozilla.org/en/DOM/window.setTimeout)：

> **句法**
> 
> ```
> var timeoutID = window.setTimeout(func, delay, [param1, param2, ...]); 
> ```
> 
> 请注意，在第一种语法中将附加参数传递给函数在 Internet Explorer 中不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:39:10.653

这个函数有两个签名

```
var timeoutID = window.setTimeout(func, delay, [param1, param2, ...]);
var timeoutID = window.setTimeout(code, delay); 
```

请注意，在第一种语法中将附加参数传递给函数在 Internet Explorer 中不起作用。

[在MDN](https://developer.mozilla.org/en/DOM/window.setTimeout)中找到了关于这些额外参数的用途的注释：

> 在 Gecko 13 (Firefox 13.0 / Thunderbird 13.0) 之前，Gecko 向回调例程传递了一个额外的参数，以毫秒为单位指示超时的“实际延迟”。不再传递此非标准参数。

并非所有浏览器都支持第一个签名（具有两个以上的参数），因此我个人的建议是避免使用它。

# ms-access - Access 2010 使用查询填充子表单

> ID：11266401
> 
> 赞同：0
> 
> 时间：2012-06-29T17:35:53.457
> 
> 标签：ms-access, subform

我认为这是一个过于简单的问题，但我的大脑无法正常工作，所以我需要一些帮助。

我有一个表单，简而言之，用户在 2 个日期/时间文本框中输入开始日期和结束日期。我有一个查询过滤掉指定日期之间的记录。

我想要做的是在任何时候调整这些文本字段的更新后，只要两者都有值，就可以填充/刷新一个子表单（即，如果一个为空白，则不会有任何更改）。

我相信这是直截了当的，所以非常感谢任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:23:55.683

这取决于您如何设置子表单。您可以使用文本框的更新后事件来设置子表单的记录源或重新查询。

```
 Me.MySubformcontrolName.Form.Recordsource ="Select ..."
 Me.MySubformcontrolName.Form.Requery 
```

# android - String to Long 结果为空值

> ID：11266404
> 
> 赞同：1
> 
> 时间：2012-06-29T17:36:06.487
> 
> 标签：android

我试图从包含 Facebook ID 的字符串中获取“**长”值，这是一个****10 位数字**。这是我的函数的样子：

```
@Override
    public void onItemClick(AdapterView<?> arg0, View v, int position, long arg3) {
        try {
            final long opponentId;            
            opponentId = jsonArray.getJSONObject(position).getLong("uid");
            String opponentName = jsonArray.getJSONObject(position).getString("name");
            Toast.makeText(this, "UID: " + opponentId + "\n" + "Name: " + opponentName, Toast.LENGTH_SHORT).show();

            SharedPreferences myPrefs = getSharedPreferences("user", MODE_WORLD_READABLE);
            String playerUidString = myPrefs.getString("uid", null);

            if (playerUidString == null) {
                Log.d(GlobalVars.TAG, "Empty UID");
                return;
            }

            Log.d(GlobalVars.TAG, "ID: " + playerUidString);
            Log.d(GlobalVars.TAG, "ID Long: " + String.valueOf(Long.getLong(playerUidString)));

//           long player_id = Long.getLong(playerUidString);
//          new GameRequest(getBaseContext(), player_id, opponentId);

        } catch (JSONException e) {
            Log.d(GlobalVars.TAG, e.getMessage());
        }
    } 
```

通常，我会设置 long player_id 等于 playerUidString 到 long 的转换，但 Long.getLong(playerUidString) 结果为 null，而 playUidString 等于 10 位 ID 号。为什么会发生这种情况？

编辑：我的 Log.d 输出：

```
06-29 11:06:37.823: D/I See It(16053): ID: 1089490706
06-29 11:06:37.823: D/I See It(16053): ID Long: null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:41:03.577

您错过了`Long.getLong(String str)`不应将 String 解析为 long 的事实，而是返回由该字符串表示的**系统属性的 long 值。**正如其他人所建议的那样，您真正需要的是`Long.parseLong(String str)`

[在此处查看 Java 文档以获取更多信息](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html#getLong%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:41:56.170

你必须使用 Long.parseLong(yourstring)

我希望我能帮助你。

# javascript - ajax POST 上的对象对象

> ID：11266405
> 
> 赞同：0
> 
> 时间：2012-06-29T17:36:13.437
> 
> 标签：javascript, jquery, asp.net, ajax, vb.net

```
<WebMethod()> Public Shared Function micro() As String
    Dim context As HttpContext = HttpContext.Current
    Dim ClientID As String = context.Session(const_SESSION_CLIENT_ID)
    Dim UserID As String = context.Session(const_SESSION_USER_ID)

    If (ClientID Is Nothing OrElse UserID Is Nothing) Then Return SerializeErrorMessage("User not logged in")

    Dim serializer As JavaScriptSerializer = New JavaScriptSerializer()
    serializer.MaxJsonLength = Integer.MaxValue    

    Dim s As String = U.Settings(ClientID, UserID)

    'Return serializer.Serialize(s).ToString()
    Return s.ToString()
End Function 
```

s 返回我想要的字符串，但是当我从客户端获取并发出警报时，我得到 [object Object]

客户端：

```
datsaa = {};
    $.ajax({
        type: "POST",
        url: "v.aspx/micro",
        data: datsaa,
        contentType: "application/json; charset=utf-8",
        dataType: "text json",
        beforeSend: function (xhr)
        {
            xhr.setRequestHeader("Content-type",
                         "application/json; charset=utf-8");
        },
        success: function (b)
        {
            alert(b);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown)
        {

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:53:44.220

您将在 bd 中获得字符串，有关详细信息，请[**阅读此内容**](https://stackoverflow.com/questions/830112/what-does-d-in-json-mean)

```
success: function (b)
{
      alert(b.d);
} 
```

# jquery - 带有 jquery 的 ajax 按钮用于文件下载

> ID：11266406
> 
> 赞同：0
> 
> 时间：2012-06-29T17:36:23.333
> 
> 标签：jquery, ajax, wicket

我使用过 wicket、ajax、jquery。在表单上（这有两个日期字段）提交，用户获取文件下载弹出窗口。由于我有微调器来显示处理需要时间，这适用于 ajax 和 jquery。现在的问题是当我使用普通检票口提交按钮时，虽然没有微调器，但报告下载工作正常。但是当我使用 ajaxbutton 时微调器出现，但没有报告打开/保存弹出窗口。

以下代码工作正常并提供打开/保存弹出窗口，但由于没有 ajax 操作，因此不显示微调器

```
add(new SubmitLink("runReport") {

  *//**
   * 
   *//*
  private static final long serialVersionUID = 10011L;

  *//**
   * 
   *//*
  @Override
  public void onSubmit() {
    HashMap<String, Object> map = new HashMap<String, Object>();
    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
    map.put("reportStartDate", formatter.format(getReportStartDate()));

    // Add a day to the end date to include the date entered by the user.
    Calendar cal = Calendar.getInstance();
    cal.setTime(getReportEndDate());
    cal.add(Calendar.DATE, 1);

    map.put("reportEndDate", formatter.format(cal.getTime()));
    generateReport(map,"ecommerceReport.rptdesign");
  }   
}
.add(RelativePathPrefixHandler.RELATIVE_PATH_BEHAVIOR)
); 
```

以下代码将微调器显示为其 ajax，但没有打开/保存弹出窗口

```
AjaxButton runReportButton = new AjaxButton("runReport", this) {
    private static final long serialVersionUID = 10008L;

    @Override
    public void onSubmit(AjaxRequestTarget target, Form<?> form) {
        HashMap<String, Object> map = new HashMap<String, Object>();
        SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
        map.put("reportStartDate", formatter.format(getReportStartDate()));

        // Add a day to the end date to include the date entered by the user.
        Calendar cal = Calendar.getInstance();
        cal.setTime(getReportEndDate());
        cal.add(Calendar.DATE, 1);

        map.put("reportEndDate", formatter.format(cal.getTime()));
        generateReport(map,"ecommerceReport.rptdesign");
        target.addComponent(form);
    }
};

runReportButton.add(RelativePathPrefixHandler.RELATIVE_PATH_BEHAVIOR);
runReportButton.add(new SimpleAttributeModifier("onmouseup", "showPopup();"));

add(runReportButton); 
```

即使以下代码也不起作用：

```
add(new AjaxFallbackButton("runReport", this) {
    @Override
    protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
        HashMap<String, Object> map = new HashMap<String, Object>();
        SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
        map.put("reportStartDate", formatter.format(getReportStartDate()));

        // Add a day to the end date to include the date entered by the user.
        Calendar cal = Calendar.getInstance();
        cal.setTime(getReportEndDate());
        cal.add(Calendar.DATE, 1);

        map.put("reportEndDate", formatter.format(cal.getTime()));
        generateReport(map,"ecommerceReport.rptdesign");
        target.addComponent(form);
    }
}); 
```

任何帮助，我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:29:58.577

Wicket wiki 中的这个解决方案应该适合您 - 它可以在任何类型的 Ajax 请求上启动下载：

~~[https://cwiki.apache.org/WICKET/ajax-update-and-file-download-in-one-blow.html](https://cwiki.apache.org/WICKET/ajax-update-and-file-download-in-one-blow.html)~~

[https://cwiki.apache.org/confluence/display/WICKET/AJAX+update+and+file+download+in+one+blow](https://cwiki.apache.org/confluence/display/WICKET/AJAX+update+and+file+download+in+one+blow)

# ios - CaCurrentMediaTime 转换为其日期和字符串对应项

> ID：11266414
> 
> 赞同：0
> 
> 时间：2012-06-29T17:36:52.427
> 
> 标签：ios, datetime, core-data, nsdate, quartz-core

我试图在用户选择一个按钮时获得确切的时间和日期，然后在他们取消选择它时再次获得。

到目前为止，我一直在使用 NSDate dateWithTimeIntervalSince1970。这让我得到毫秒（浮点数），这很容易转换为 NSDate，然后转换为字符串。但是我现在已经多次注意到，与我的 Iphone 4S 上的实时时间相比，这并没有给出绝对时间，最多相差 1 或 2 分钟。

在这里使用毫秒浮点数的原因是因为它可以很容易地发送到不同的方法，允许它保存到 NSNumber 中的核心数据，从而允许以后轻松计算。

我在这里找到了一篇文章，建议使用 CACurrentMediaTime ，但我未能成功地将其转换为日期和该日期的字符串：

```
double CurrentTime = CACurrentMediaTime(); 
```

NSDate dateWithTimeIntervalSinceNow 给出了正确的日期，只是模拟器上的时钟比我的 Mac 上的实际时钟早了大约 35 到 45 分钟。

当前的转换是这样的：

```
NSDate *conversion = [NSDate dateWithTimeIntervalSince1970:startTimeInMiliSeconds];
NSDateFormatter *formatter;
NSString        *dateString;
formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd-MM-yyyy HH:mm"];
dateString = [formatter stringFromDate:conversion]; 
```

有什么想法/参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:47:56.490

为什么不直接将`NSDate`s 保存在 Core Data 中，省略整个转换过程呢？`NSDate`s 是核心数据条目的自然数据类型。

# single-sign-on - 各种 SSO SAML 2.0 SP 发起的配置文件有哪些优势？

> ID：11266415
> 
> 赞同：1
> 
> 时间：2012-06-29T17:37:00.157
> 
> 标签：single-sign-on, saml, saml-2.0, openam

因此，我看到 SAML 2.0 sp 启动的配置有几个不同的实现配置文件：

1.  POST-POST
2.  重定向-POST
3.  工件-POST
4.  后工件
5.  重定向工件
6.  神器-神器

各有什么优势？我们正在实施一种 sp 启动的方法，从最终用户的角度来看，每个配置文件的体验似乎是相同的，但我担心安全隐患。一个比另一个更安全吗？

顺便说一句...我们正在将 OpenAM 作为我们的 IdP 并将 SimpleSAMLphp 作为我们的 SP 库。如果您知道该设置仅支持特定配置文件，我也很想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:31:34.663

如果正确实施，所有绑定的安全性都是相似的。主要考虑因素是：

重定向 - 对于发送大消息的情况可能不理想。浏览器对最大 URL 大小有不同的限制。对于像身份验证请求这样的东西 - 它通常是合适的。

POST - 更适合大型消息，如身份验证响应。大多数实现使用 JavaScript 来自动提交这些。如果您的用户使用启用了 JavaScript 的现代浏览器，您可能没问题。

Artifact - 适用于旧的、通常是移动的浏览器。通过浏览器发送的内容很少——只是后端用来解析 SAML 消息的一个小的随机工件。也就是说 - 它依赖于您的后端系统能够呼叫对方。一些网络安全架构不允许这样做。

有关指南，请参阅[SAML 2.0 一致性文档](http://docs.oasis-open.org/security/saml/v2.0/saml-conformance-2.0-os.pdf)。例如，SSO 响应不允许重定向。最常见的是，您会看到 Redirect-POST 在部署中使用。我确信您选择的产品将支持这些绑定。

# c# - 如何将 CreateCompletedEventHandler 与 Web 服务一起使用

> ID：11266421
> 
> 赞同：1
> 
> 时间：2012-06-29T17:37:20.820
> 
> 标签：c#, web-services, dynamics-nav

我正在使用 Web 服务连接到我公司的测试 NAV 环境（NAV 2013）。我需要将客户添加到导航环境。所以因为我已经能够使这段代码工作：

```
var customerService = new CustomerService.Customer_Service()  {UseDefaultCredentials = true};    
var cust = new CustomerService.Customer()  {Address = "100 Orion Way", Name = "Test") };    
customerService.Create(cust); 
```

现在我需要异步创建客户并完成呼叫跟踪。我知道我需要使用 CreateAsync(Customer _customer, Object _userState) 和 CreateCompletedEventHandler，但我找不到任何方法。有人有例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:51:36.313

在 Visual Studio 中创建服务引用时，请确保选中“生成异步操作”复选框。否则生成的代理类将没有任何异步方法，我猜这是你的问题。 [这](http://msdn.microsoft.com/en-us/library/bb514724.aspx)是一篇包含更多详细信息的 MSDN 文章。

# android - 链接到新页面的按钮不起作用

> ID：11266423
> 
> 赞同：0
> 
> 时间：2012-06-29T17:37:25.297
> 
> 标签：android, hyperlink, rss

我正在创建一个程序，该程序应该在单击按钮后显示 RSS 提要。

我在布局中有一个主类、一个屏幕 1 和屏幕 2 以及一个主 xml 文件和屏幕 1 和屏幕 2。

现在我之前尝试过使用主要的 xml 和类作为 RSS Feed 并且效果很好

但是，现在当我尝试将 Screen1 (screen1) 设置为显示提要的位置时，我只是得到一个黑屏。

我想知道为什么会这样，正如我通过 Screen1 类告诉我要链接到 screen1 xml 文件一样。

主类：

```
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;

public class SImpleRssReader2Activity extends Activity {

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button videoNext = (Button) findViewById(R.id.videoButton) ; 
        videoNext.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
              setContentView(R.layout.screen2);

                //  Intent i = new Intent();
               // i.setClassName("rahul.application.WunApp", "rahul.application.WunApp.screen1");
               // startActivity(i);
            }
        });

        Button newsNext = (Button) findViewById(R.id.newsButton);
        newsNext.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
              setContentView(R.layout.screen1);

                //  Intent i = new Intent();
               // i.setClassName("rahul.application.WunApp", "rahul.application.WunApp.screen1");
               // startActivity(i);
            }
        });

}
} 
```

屏幕一：

```
 import java.io.IOException;
    import java.io.InputStream;
    import java.net.MalformedURLException;
    import java.net.URL;
    import java.util.ArrayList;
    import java.util.List;

    import org.xmlpull.v1.XmlPullParser;
    import org.xmlpull.v1.XmlPullParserException;
    import org.xmlpull.v1.XmlPullParserFactory;

    import android.app.ListActivity;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.Bundle;
    import android.view.View;

    import android.widget.ArrayAdapter;

    import android.widget.ListView;

    public class Screen1 extends ListActivity {
        /** Called when the activity is first created. */
       List<String> headlines;
       List<String> links;

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
       Uri uri = Uri.parse((String) links.get(position));
       Intent intent = new Intent(Intent.ACTION_VIEW, uri);
       startActivity(intent);
    }

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.screen1);
         // Initializing instance variables
            headlines = new ArrayList<String>();
            links = new ArrayList<String>();

            try {
                URL url = new URL("http://news.google.com/news?ned=us&topic=h&output=rss");

                XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                factory.setNamespaceAware(false);
                XmlPullParser xpp = factory.newPullParser();

                    // We will get the XML from an input stream
                xpp.setInput(getInputStream(url), "UTF_8");

                    /* We will parse the XML content looking for the "<title>" tag which appears inside the "<item>" tag.
                     * However, we should take in consideration that the rss feed name also is enclosed in a "<title>" tag.
                     * As we know, every feed begins with these lines: "<channel><title>Feed_Name</title>...."
                     * so we should skip the "<title>" tag which is a child of "<channel>" tag,
                     * and take in consideration only "<title>" tag which is a child of "<item>"
                     *
                     * In order to achieve this, we will make use of a boolean variable.
                     */
                boolean insideItem = false;

                    // Returns the type of current event: START_TAG, END_TAG, etc..
                int eventType = xpp.getEventType();
                while (eventType != XmlPullParser.END_DOCUMENT) {
                    if (eventType == XmlPullParser.START_TAG) {

                        if (xpp.getName().equalsIgnoreCase("item")) {
                            insideItem = true;
                        } else if (xpp.getName().equalsIgnoreCase("title")) {
                            if (insideItem)
                                headlines.add(xpp.nextText()); //extract the headline
                        } else if (xpp.getName().equalsIgnoreCase("link")) {
                            if (insideItem)
                                links.add(xpp.nextText()); //extract the link of article
                        }
                    }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                        insideItem=false;
                    }

                    eventType = xpp.next(); //move to next element
                }

            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            // Binding data
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, headlines);

            setListAdapter(adapter);

        }
    public InputStream getInputStream(URL url) {
           try {
               return url.openConnection().getInputStream();
           } catch (IOException e) {
               return null;
             }
        } 
```

主要的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:text="@string/welcome" >

        <requestFocus />

    </EditText>

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/newsButton"
            android:layout_width="152dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="@string/button1" />

    </RelativeLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" />

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/videoButton"
            android:layout_width="156dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="@string/button3" />

    </RelativeLayout>

</LinearLayout> 
```

屏幕1 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ListView
android:id="@+android:id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

总结一下：当我只有主类和 xml 时它工作，但现在我链接到一个新类和 xml，它不起作用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:34:03.840

第 1 点 - 您不应该在 UI 线程中进行与网络相关的工作 使用 Asynctask 或带有处理程序的线程

第 2 点-您在 main.xml 中有各种视图，但在 screen1 xml 中只有列表视图，您可能在 screen1 中没有数据敌人列表

第 3 点 - 使用“@android:id/list”作为 ListActivity 的 ID

```
<ListView
  android:id="@android:id/list"
  android:layout_width="match_parent"
  android:layout_height="wrap_content" >
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T11:08:59.457

这与在您的代码中被注释掉的这些有什么关系吗

```
 //Intent i = new Intent();
           // i.setClassName("rahul.application.WunApp",      "rahul.application.WunApp.screen1");
           // startActivity(i); 
```

您是否确保在清单中放入了应用程序块

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
<activity android:name=".SImpleRssReader2Activity" /> // your class names
<activity android:name=".screen1" />
<activity android:name=".screen2" /> 
```

使用意图时通常需要这些。

侧边栏：真的很有趣，你在做我正在做的同样的事情。我需要一个 RSS 提要，并尝试了相同的代码。根本不适合我，不知道你是怎么让它工作的，但很好。我为我的使用了另一段代码。我自己并没有真正习惯于像 java 这样的高级语言，我认为一旦你开始使用 C 语言，它就会变得更容易。

# multithreading - 无法从自生成线程访问 FacesContext.getCurrentInstance()

> ID：11266427
> 
> 赞同：4
> 
> 时间：2012-06-29T17:37:35.890
> 
> 标签：multithreading, jsf-2, primefaces

无法在自生成线程中获取“FacesContext.getCurrentInstance()”。

需要根据后端进程动态更新组件。通过创建一个线程来监视进程并与 p:poll 一起回调组件更新来实现相同的目的。

但是，似乎“FacesContext.getCurrentInstance()”不适用于新线程。在从新生成的线程调用任何依赖于 FacesContext.getCurrentInstance() 的实用程序方法时获取 NPE。

有什么方法可以在自生成线程中获取“FacesContext.getCurrentInstance()”吗？

环境 JSF2.0、Prettyfaces-jsf2-3.3.2、Primafaces 3.2、Tomcat 6.0.32、JDK 5.0

谢谢你，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T17:51:52.863

[`FacesContext`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html)就像[`ThreadLocal<T>`](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html)存储在执行当前 HTTP servlet 请求的线程中一样。您绝对不能在您自己生成的其他线程中访问它，这会破坏 JSF/Servlet 的整个工作。相反，您应该将所需*的*信息从`FacesContext`可运行对象中准确地传递给它的构造函数，可能只是具体的 bean 实例本身，或者反过来也被引用为会话属性的其他对象。

顺便说一句，在 Java EE Web 应用程序中生成非托管线程是一种味道。确保您真正了解自己在做什么。另请参阅[在 JSF 托管 bean 中启动新线程是否安全？](https://stackoverflow.com/questions/6149919/is-it-safe-to-start-a-new-thread-in-a-jsf-managed-bean/6151574#6151574)

# javascript - Javascript赋值运算符不起作用

> ID：11266429
> 
> 赞同：0
> 
> 时间：2012-06-29T17:37:42.463
> 
> 标签：javascript, ecma262

log.original_fields 始终为空。为什么？

```
var updateChangeLog = function(log, currentRecord) {
   var records, record;
   if(!log.original_fields) {
      records = ["a","b"];
      log["original_fields"] = records;   
      // log.original_fields = records; // doesnt work either
      debugger;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:49:16.830

我不认为修改函数作为参数接收的对象是一个好习惯，至少在不返回对象的情况下。更好的方法是使函数成为日志对象的方法。

像 logObject.updateChangeLog(currentRecord);

updateChangeLog 将包含... if(!self.original_fields) self.original_fields = records; ...但请记住将 logObject original_fields 初始化为 false 或 nil。

# php - 使用 php 包含一个 javascript 菜单

> ID：11266437
> 
> 赞同：0
> 
> 时间：2012-06-29T17:38:22.253
> 
> 标签：php, javascript

这是我第二次尝试这个问题，所以请多多包涵。

如何将 JS 菜单包含到 php 页面中？

每当我为其中包含 html 的 nav 执行包含语句时，什么都不会显示。

index.php 有一个 include 语句，它应该从导航中获取代码并使用 menu.js 显示它

这是索引中的片段

```
 <span id="container" >

        <!-- NAVIGATION -->
        <ul id="menu">

<?php include('nav.php')?>
            </ul>
     </span> 
```

这是nav.php

```
 <li><a href="index.php" title="Portraiture Gallery" class="selected">Portraiture Gallery</a>
            <ul>
            <li><a href="portraiture/adults.php" title="Adults">Adults  </a></li>
            <li><a href="portraiture/seniors.php" title="Seniors">Seniors  </a></li>
            <li><a href="portraiture/infantsandchildren.php" title="InfantsandChildren">Infants and Children  </a></li>
            <li><a href="portraiture/multiples.php" title="Multiples">Mutiples  </a></li>
            <li><a href="portraiture/hisangels.php" title="Hisangels">His Angels </a></li>

            </ul>
            </li> 
```

遵循这种格式是因为 menu.js 就是为此而编写的。

菜单.js

```
 // JavaScript Document

    // DropDownMenu by Miha Hribar
    // http://hribar.info

    function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
            window.onload = func;
        } else {
            window.onload = function() {
                oldonload();
                func();
            }
        }
    }

    function prepareMenu() {
        // first lets make sure the browser understands the DOM methods we will be using
        if (!document.getElementsByTagName) return false;
        if (!document.getElementById) return false;

        // lets make sure the element exists
        if (!document.getElementById("menu")) return false;
        var menu = document.getElementById("menu");

        // for each of the li on the root level check if the element has any children
        // if so append a function that makes the element appear when hovered over
        var root_li = menu.getElementsByTagName("li");
        for (var i = 0; i < root_li.length; i++) {
            var li = root_li[i];
            // search for children
            var child_ul = li.getElementsByTagName("ul");
            if (child_ul.length >= 1) {
                // we have children - append hover function to the parent
                li.onmouseover = function () {
                    if (!this.getElementsByTagName("ul")) return false;
                    var ul = this.getElementsByTagName("ul");
                    ul[0].style.display = "block";
                    return true;
                }
                li.onmouseout = function () {
                    if (!this.getElementsByTagName("ul")) return false;
                    var ul = this.getElementsByTagName("ul");
                    ul[0].style.display = "none";
                    return true;
                }
            }
        }

        return true;
    }

    addLoadEvent(prepareMenu); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:51:58.463

您是否检查过 PHP 在运行时可能生成的任何错误消息？

并非所有 PHP 错误消息都会显示在浏览器中（取决于您的 HTTP 配置），因此检查通常位于 access.log 文件旁边的 error.log 文件总是有帮助的。

# .net - 打开/保存 xml，同时保留节点属性之间的换行符

> ID：11266441
> 
> 赞同：5
> 
> 时间：2012-06-29T17:38:36.473
> 
> 标签：.net, xml, powershell

这是我到目前为止所拥有的：

```
$XML = New-Object System.Xml.XmlDocument
$XML.PreserveWhitespace = $true
$XML.Load($path)
#change some node attributes
$XML.Save($path) 
```

如果我打开一个 XML 文件，并取一个这样的片段：

```
<Node 
Name="tyjytj" 
Number="rthjr" 
Source="rjyrtjrjrtj" 
BinaryDrive="teheherhehtr" /> 
```

它将像这样保存它：

```
<Node Name="tyjytj" Number="rthjr" Source="rjyrtjrjrtj" BinaryDrive="teheherhehtr" /> 
```

但我希望能够更改（例如）节点的名称，同时在每个属性之间保留换行符。我希望格式在我打开/保存之前完全保持原样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-09T15:02:30.023

请查看与您的问题非常相似的问题的[答案：](https://stackoverflow.com/a/17968416/1056283)

虽然似乎没有保留 xml 属性格式的方法，但您可以使用 XmlWriterSettings 和 XmlWriter 类的强大功能在 xml 文档上自己定义它。

您可以指定它在属性之间有换行符，如下所示：

```
$xwSettings = new-object System.Xml.XmlWriterSettings
$xwSettings.NewLineOnAttributes = $true 
```

然后使用 XmlWriter 连同这些设置一起保存文档：

```
$xmlWriter = [Xml.XmlWriter]::Create("c:\temp\newlines.xml", $xwSettings)
$doc.Save($xmlWriter) 
```

（代码全部来自原始答案。向[vonPryz 致敬](https://stackoverflow.com/users/503046/vonpryz)）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-29T21:26:41.957

世界上没有任何 XML 解析器会告诉您开始标记中的属性是否由空格、换行符或制表符分隔。你不应该关心。

# google-chrome - 社交图标的 CSS 对齐 - Chrome/Safari 特定

> ID：11266442
> 
> 赞同：0
> 
> 时间：2012-06-29T17:38:57.050
> 
> 标签：google-chrome, css, safari, alignment

我有一个客户端页面，其中我有以下在 Firefox 上显示得很好：

[http://cl.ly/0u0h1S110f2J2N2E093d](http://cl.ly/0u0h1S110f2J2N2E093d)（屏幕截图）

但是在 Chrome 和 Safari 上它显示如下：

[http://cl.ly/0a132U3h1G2x1W3R0043](http://cl.ly/0a132U3h1G2x1W3R0043)（注意 Facebook 分享按钮）

按钮的代码是：

```
<div class="social">
  <div>
    <div class="fb"> <a name="fb_share" id="fb_share" type="button"></a>
      <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
    </div>
    <div class="twit"> <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
  </div>
</div> 
```

我有以下适用于 FF 的 CSS，但不适用于其他两个浏览器：

```
div.social div div {display: inline-block;}
div.social div div.fb {margin-bottom: 1px;} 
```

我已经尝试了所有我能想到的属性组合来使它起作用，但无济于事。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:47:35.303

使用`vertical-align: top`：

```
div.social div div.fb {
    vertical-align: top;
} 
```

**工作示例：http: [//jsfiddle.net/dFt8N/](http://jsfiddle.net/dFt8N/)**

# google-apps-script - 就像 UI 对工作表中的活动单元格具有某种优先级一样

> ID：11266447
> 
> 赞同：0
> 
> 时间：2012-06-29T17:39:15.970
> 
> 标签：google-apps-script

在数据库程序中，我经常使用一些依赖于这两种方法的函数：

```
 var activerow = sh.getActiveRange().getRowIndex();
  var activecol = sh.getActiveSelection().getColumnIndex(); 
```

这是非常基本的功能;-) 最近（我不知道确切的时间，我有一段时间没有检查它）我开始对这两种方法有可重现的问题：**如果 Ui 是“焦点”，它们会返回值为 1**

这至少是它看起来的样子，但它完全不正常而且不合逻辑，所以我要求一些人看看这个并告诉我我是否错了（有点“傻瓜”）并遗漏了一些明显的东西（嗯我希望如此;-)

这是 [我共享的测试表][1] ，我解释了表上的所有内容，对于任何了解 UI 的人来说，该脚本也非常基础。有一个 onOpen 菜单可以重置工作表并为您的舒适创建一个菜单；-) 在 UI 中按下按钮时会出现问题（两者）。

谢谢你的帮助

注意：Chrome 和 Safari 上的相同问题

编辑已删除，可能是我这边的浏览器问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:18:09.330

当前存在一个问题，即一旦您进入服务器处理程序，activeSheet / Range / Cell 就会被设置为第一张工作表的单元格 A1。您可以在此处跟踪问题的进度：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=1476](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1476)

# gnuplot - gnuplot中的水平直方图

> ID：11266452
> 
> 赞同：4
> 
> 时间：2012-06-29T17:39:34.423
> 
> 标签：gnuplot

我正在尝试在 gnuplot 中绘制水平直方图。

这是我当前的垂直（通常类型）直方图：

```
width=0.5
hist(x,width)=width*floor(x/width)+width/2.0 
set boxwidth width*0.9
set style fill solid 0.5
plot "a" u (hist($2,width)):(1.0) smooth freq w boxes lc 3 notitle 
```

现在我需要的是完全相同的结果，但顺时针旋转了 90 度。

我在下面尝试过，但结果确实不是我所期望的。

```
width=0.5
hist(x,width)=width*floor(x/width)+width/2.0 
set boxwidth width*0.9
set style fill solid 0.5
plot "a" u (1.0):(hist($2,width)) smooth freq w boxes lc 3 notitle 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-15T11:22:35.887

如果位图输出是唯一的关注点，也`convert`可以[在](http://www.imagemagick.org/)使用`gnuplot`.

```
convert -rotate 90 figure_in.png figure_out.png 
```

在执行此操作之前，`gnuplot`请使用`rotate`指令轮换所有标签。

[此处](http://www.phyast.pitt.edu/~zov1/gnuplot/html/histogram.html)提供了示例和更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:07:43.013

虽然在 gnuplot 中还没有对水平图的通用支持，但您可以使用**boxxyerrorbars**样式制作相当不错的水平条形图。它有一个 6 列输入（x、y、xlow、xhigh、ylow、yhigh）。您只需要事先自己计算条形的值。

我只是做了这样的事情（$2 指的是“中心”）：

> 使用 'median':'center':'min':'max':($2-0.4):($2+0.4) 和 boxxyerrorbars 绘制 'datafile.csv'

如果您想要沿 y 轴的类别文本标签，我们开始吧（我从数据文件的第一列中获取它们）：

> 使用 'median':'center':'min':'max':($2-0.4):($2+0.4):ytic(1) 和 boxxyerrorbars 绘制 'datafile.csv'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T05:47:42.070

谢谢。这行得通。这是做整个事情的一致方式。首先在另一个文件中以表格格式打印数据文件的通常输出，例如 datatable.txt

```
reset    
binwidth=0.015    
bin(x,width)=width*floor(x/width) + binwidth/2.0    
set table    
set output 'datatable.txt'    
plot './datafile.txt' using (bin($1,binwidth)):(1.0) smooth freq w p    
unset table

set output "horizontalhist.png"    
pl './datatable.txt' u 2:1:(0.0):2:(($1)-(binwidth/2.0)):(($1)+(binwidth/2.0)) w boxxyerrorbars 
```

这应该给你水平直方图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-06T08:18:56.747

虽然，这个问题相当老，基本上已经回答（但是，不被接受），让我用一个插图来更新一下，只是为了记录。

据我所知，在当前的 gnuplot (5.4.0) 中仍然没有专用的水平直方图样式，可能是因为您可以简单地使用`boxxyerror`（如果您知道如何）实现它，正如用户 @pygrac 和 @adhip 的答案中已经提到的那样agarwala 和@Christoph 链接的答案。因此，没有必要创建垂直直方图并对其进行旋转，因为绘图风格`boxxyerror`已经存在于 gnuplot 4.0 (2004) 甚至更早版本中。

由于 gnuplot 5.0.0 (2015) 数据块可用，因此不再需要将直方图数据`smooth freq`写入磁盘上的文件。

**代码：**

```
### horizontal histogram (gnuplot >=5.0.0)
reset session

# create some random test data
set table $Data
    set samples 2000
    plot '+' u 1:(invnorm(rand(0))+2) w table
    set samples 1000
    plot '+' u 1:(invnorm(rand(0))-2) w table
unset table

binwidth = 0.25
bin(x) = binwidth * floor(x/binwidth)

set table $Histo
    plot $Data u (bin($2)):(1) smooth freq
unset table

set style fill transparent solid 0.5

plot $Histo u (0):1:(0):2:($1-binwidth/2.):($1+binwidth/2.) w boxxy ti "Horizontal Histogram"
### end of code 
```

**结果：**

[![在此处输入图像描述](../Images/ee51f93a674f6ceb4223133f8f3ed48f.png)](https://i.stack.imgur.com/wlRzJ.png)

# javascript - jquery的.filter()方法中`this`的值

> ID：11266453
> 
> 赞同：0
> 
> 时间：2012-06-29T17:39:34.793
> 
> 标签：javascript, jquery, this

这是我正在使用的 HTML

```
<ul>
      <li><strong>list</strong> item 1 -
        one strong tag</li>
      <li><strong>list</strong> item <strong>2</strong> -
        two <span>strong tags</span></li>
      <li>list item 3</li>
      <li>list item 4</li>
      <li>list item 5</li>
      <li>list item 6</li>
</ul> 
```

我正在使用 .filter() 方法以两种方式对其进行修改：

第一的：

```
$('li').filter( function(foo) {
    console.log(this);
    return foo == 2;
}).css('background-color', 'red'); 
```

第二：

```
$('li').filter( function(foo) {
    console.log(this);
    return foo % 3 == 2;
}).css('background-color', 'red'); 
```

在第一种情况下，Chrome 记录了这个： ![在此处输入图像描述](../Images/5034858373a257db5ab8a9629fec41b1.png) 在第二种情况下： ![在此处输入图像描述](../Images/676ab8a00d571ee40e912758233ed30c.png)

为什么控制台`this`在不同情况下显示不同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:52:19.280

> *“为什么控制台`this`在不同情况下显示不同的值？”*

它没有。假设 DOM 没有改变，它两次都显示相同的元素。实际值没有什么不同。

唯一的区别是它们的视觉表现方式。这对它们的实际情况没有影响。

# jquery - slideDown() 错误行为

> ID：11266458
> 
> 赞同：0
> 
> 时间：2012-06-29T17:39:55.233
> 
> 标签：jquery

例子：`http://83.254.82.145:8080/android/`

查看地图底部的菜单。尝试从底部向内移动光标。为什么会立即显示？`animate()`与和相同的结果`slideDown()`。

```
$('#map_canvas, #map_menu').hover(function(e){

    $('#map_menu').stop(true, true).slideDown(200, 'easeOutCubic');

}, function(){

    $('#map_menu').stop(true, true).delay(500).slideUp(500, 'easeInCubic');

}); 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:46:16.363

试试这个：

```
 $('#mapbackground').hover(function(e){

    $('#map_menu').stop(true, true).slideDown(200, 'easeOutCubic');

  }, function(){

    $('#map_menu').stop(true, true).delay(500).slideUp(500, 'easeInCubic');

 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:46:33.487

我相信你的问题在于这个功能：

```
$('#map_canvas, #map_menu').hover( ... 
```

您在动画上调用停止，因此它正在触发，因为您悬停在 map_canvas 上，然后它立即调用 map_menu 上的悬停，因为它正在向上滑动。

# android - Android中IntentService的多个实例

> ID：11266464
> 
> 赞同：5
> 
> 时间：2012-06-29T17:40:00.853
> 
> 标签：android, service, concurrency, alarmmanager, intentservice

```
 private void setFPAlarm()
    {
    Intent intent = new Intent(this, FPService.class);
    PendingIntent pi = PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    long nextSearchTimeMillis = DateUtils.MINUTE_IN_MILLIS/2;
    Time nextSearchTime = new Time();
    nextSearchTime.set(nextSearchTimeMillis);

    AlarmManager FPAlarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    FPAlarm.setRepeating(AlarmManager.RTC, System.currentTimeMillis(), nextSearchTimeMillis, pi);
    } 
```

我使用上面的代码每 30 秒运行一次我的 IntentService。有时，一个服务进程需要超过 30 秒的时间，因此必须在前一个进程完成之前启动另一个进程。我想知道在这种情况下前一个会发生什么。它被搁置了吗？第二个要等前一个完成吗？

我的第二个问题是：我不希望他们互相等待。我希望两个服务同时运行。因此，无论前一个服务在做什么，下一个服务都应该启动。上面的代码是实现这一目标的正确方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T18:00:32.280

IntentService 就像一个工作请求队列。在前一个 Intent 的 onHandleIntent 完成之前，不会处理新的 Intent。如果 IntentService 有时需要超过 30 秒才能完成，为什么还要每 30 秒运行一次？

关于提问，有时对狭隘问题的回答要么是“你不能做你想做的事”，要么是“你正在做的事不会做你认为它做的事”。如果您提供问题上下文，则受访者更容易*添加*更好的解决方案。

在您的情况下，我只能猜测您应该在需要时向您的 IntentService 触发 Intent，并让 IntentService 的排队机制处理其余部分。作为替代方案，您可以使用常规服务和线程池。

# google-apps-script - DocsList 文件 getContentAsString() 缺少 Unicode 字符

> ID：11266469
> 
> 赞同：2
> 
> 时间：2012-06-29T17:40:10.820
> 
> 标签：google-apps-script, google-sheets

我正在尝试使用 Google App Script 导入带有法语口音的 CSV 文件，使用 getContentAsString() 读取文件，然后将其处理成 Google 电子表格。似乎 unicode 字符作为垃圾发回。

经过调查，似乎 getContentAsString() 使用 UTF-8 打开文件。当使用 Western Mac OS Roman 或 Western Windows Latin 1 创建文件时，这会导致问题 - 导出 CSV 时旧版 Excel 上的默认编码。

关于如何规避这个问题的任何建议？

> 示例：“设备应该是 Équipement

```
function Test() {
  var filename = 'BV_period_2.csv';
  var files = DocsList.getFiles();
  var csvFile = "";

  for (var i = 0; i < files.length; i++) {
    if (files[i].getName() == filename ) {
      csvFile = files[i].getContentAsString(); //csvFile will have �     
      break;
    }
  }

  var csvData = CSVToArray(csvFile, ",");
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName('TestBV');
  ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:32:46.160

您可以选择字符集。这是一个 UTF-16 示例。

```
DocsList.getFileById(<some id>).getBlob().getDataAsString("UTF-16") 
```

# git - git 添加远程分支

> ID：11266478
> 
> 赞同：156
> 
> 时间：2012-06-29T17:40:58.007
> 
> 标签：git

我想添加一个遥控器，以及该遥控器的一个分支。

我做了`git remote add <newname> <url>`，然后我做了，`git fetch --all`但`git branch -a`没有显示遥控器的任何分支。我的 .git/config 显示添加的遥控器。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：317
> 
> 时间：2012-06-29T18:26:51.473

我不确定您是否尝试从本地分支创建远程分支，反之亦然，因此我概述了这两种情况，并提供了有关合并远程和本地分支的信息。

创建一个名为“github”的遥控器：

```
git remote add github git://github.com/jdoe/coolapp.git
git fetch github 
```

列出所有远程分支：

```
git branch -r
  github/gh-pages
  github/master
  github/next
  github/pu 
```

**从 github 的远程分支 (pu) 创建一个新的本地分支 (test)：**

```
git branch test github/pu
git checkout test 
```

**将 github 远程分支 (pu) 的更改与本地分支 (test) 合并：**

```
git fetch github
git checkout test
git merge github/pu 
```

**从本地分支（测试）更新 github 的远程分支（pu）：**

```
git push github test:pu 
```

在远程创建新分支使用与更新远程分支相同的语法。例如，从本地分支（测试）在 github 上创建新的远程分支（测试版）：

```
git push github test:beta 
```

从 github 删除远程分支（pu）：

```
git push github :pu 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-29T18:48:32.047

您可以检查您的远程设置是否正确并具有适当的权限

```
git ls-remote origin 
```

如果你称你的远程“起源”。如果您收到错误，您可能没有正确设置安全性，例如将您的公钥上传到 github。如果设置正确，您将获得远程引用列表。现在

```
git fetch origin 
```

除非出现任何其他问题，例如未插入的网络电缆，否则将正常工作。

完成后，您可以获得上面列出的命令所需的任何分支

```
git checkout some-branch 
```

这将创建一个与远程分支同名的本地分支并检查它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-07-05T02:02:05.177

我测试了@Samy Dindane 在对 OP 的评论中提出的建议。

我相信它有效，试试

```
git fetch <remote_name> <remote_branch>:<local_branch>
git checkout <local_branch> 
```

这是一个虚构的远程存储库的示例，该存储库以一个名为`foo`的分支命名`bar`，我在其中创建了一个`bar`跟踪远程的本地分支：

```
git fetch foo bar:bar
git checkout bar 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-13T15:00:14.490

这是创建本地存储库并将更改推送到新远程分支的完整过程

1.  ***创建本地存储库：-***

    最初用户可能已经创建了本地 git 存储库。

    `$ git init`:- 这将使本地文件夹成为 Git 存储库，

2.  ***链接远程分支***：-

    现在的挑战是将本地 git 存储库与远程**master**分支相关联。

    `$ git remote add RepoName RepoURL`

    用法：git远程添加[]

3.  ***测试遥控器***

    `$ git remote show` --->显示远程名称

    `$ git remote -v` --->显示远程分支

4.  ***现在推送到远程***

    `$git add .` ----> 将所有文件和文件夹添加为 git staged'

    `$git commit -m "Your Commit Message"` - - - >提交消息

    `$git push` - - - - >将更改推送到上游

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-08-15T09:12:00.810

你可能只是做..

```
git checkout branch_name 
```

如果远程分支存在于 origin 上，则 git 将跟踪它（如果它具有相同的名称）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-07-13T15:07:25.207

如果您创建了一个名为 A 的本地分支，并且您有一个名为 B 的远程分支，并且您希望远程分支 B 跟踪本地分支 A 的更改

在命令行或终端上执行以下操作

```
git branch --set-upstream-to=origin/B A 
```

这会将本地分支 A 的上游设置到远程分支 B

然后运行

```
git pull 
```

从 B 中提取更改

然后运行

```
git push 
```

将更改推送到 B

# firefox - 无法将网站域用作端口 80 的 tomcat 主机名

> ID：11266480
> 
> 赞同：1
> 
> 时间：2012-06-29T17:41:03.840
> 
> 标签：firefox, tomcat, windows-7, tomcat7, socialauth

我正在尝试在我的机器上运行社交身份验证库，所以我按照此链接中的步骤操作：

[http://code.google.com/p/socialauth/wiki/HowToRunApplicationWithLocalhostOnWindows](http://code.google.com/p/socialauth/wiki/HowToRunApplicationWithLocalhostOnWindows)

1.  在 hosts 文件中更改了 localhost: 的绑定`127.0.0.1 opensource.brickred.com`。

2.  在eclipse中的tomcat中，我将主机名更改为`opensource.brickred.com`并将HTTP端口更改为80。

尝试运行该应用程序时，我发现它正在尝试访问该链接：

```
opensource.brickred.com/myapp 
```

在线不在我的本地主机上，并且该应用程序只能通过以下方式访问：

```
localhost/myapp 
```

网站域仅在端口为 8080 的情况下工作，通过以下链接：

```
http://opensource.brickred.com:8080/myapp/ 
```

请告知，我如何在端口 80 上的新主机名上运行我的应用程序？

# java - 什么时候适合多线程？

> ID：11266484
> 
> 赞同：8
> 
> 时间：2012-06-29T17:41:34.153
> 
> 标签：java, multithreading, concurrency

我想我“了解”了 Java 多线程的基础知识。如果我没记错的话，你会做一些大工作并弄清楚如何将它分成多个（并发）任务。然后将这些任务实现为`Runnable`s 或`Callable`s 并将它们全部提交给`ExecutorService`. （所以，首先，如果我错了这么多，**请从纠正我开始！！！**）

其次，我必须想象您在内部实现的代码`run()`或`call()`必须尽可能“并行化”，使用非阻塞算法等。这就是困难的部分（编写并行代码）。**正确的？不正确？**

但是我仍然遇到Java并发的真正问题（我猜一般是并发），这是这个问题的真正主题，是：

> 什么时候最适合多线程？

我从 Stack Overflow 上的另一个问题中看到了一个示例，其中发布者建议创建多个线程来读取和处理一个巨大的文本文件（*Moby Dick*书），一位回答者评论说，用于从磁盘读取的多线程是一个*可怕*的主意。他们这样做的理由是，在已经很慢的进程（磁盘访问）*之上，您将有多个线程引入上下文切换的开销。*

所以这让我开始思考：**哪些类型的问题适合多线程，哪些类型的问题应该始终序列化？**提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T17:59:25.687

多线程有两个主要优点，IMO：

*   能够在多个 CPU/内核之间分配密集型工作：不是让 4 个 CPU 中的 3 个空闲并在单个 CPU 上完成所有工作，而是将问题分成 4 个部分，让每个 CPU 独立工作。这减少了执行 CPU 密集型任务所需的时间，并证明您花在多 CPU 硬件上的钱是合理的
*   减少许多任务的延迟。假设有 4 个用户向 Web 服务器发出请求，并且请求都由单个线程处理。假设第一个请求进行了很长的数据库查询。线程处于空闲状态，等待查询完成，其他 3 个用户等待此请求完成以获取他们的小网页。如果你有4个线程，即使只有一个CPU，第二个，第三个和第四个请求可以在数据库服务器执行长数据库查询的同时处理，所有用户都很高兴。因此，当您有阻塞 IO 调用时，多线程尤其重要，因为这些阻塞 IO 调用让 CPU 空闲，而不是执行一些其他等待任务。

注意：从多个线程读取同一个磁盘的问题在于，不是顺序读取整个长文件，而是在每次上下文切换时强制磁盘在磁盘的各个物理位置之间切换。由于所有线程都在等待磁盘读取完成（它们受 IO 限制），这使得读取速度比单个线程读取所有内容要慢。但是一旦数据在内存中，在线程之间拆分工作是有意义的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T17:44:27.663

> 所以这让我开始思考：哪些类型的问题适合多线程，哪些类型的问题应该始终序列化？

基本上 CPU 密集型任务（例如进行大量数据处理，例如内存排序）应该是并行化的（如果可能的话），并且 I/O 绑定任务应该保持顺序（如磁盘 I/O）。这是一般建议，当然也有一些例外。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T17:48:50.963

> 所以这让我开始思考：哪些类型的问题适合多线程，哪些类型的问题应该始终序列化？

当您使用 Swing 组件构建 GUI 时，有时您想要通过单击按钮（例如）执行的任务需要很长时间，以至于您在执行任务时会锁定 GUI。

因此，您在不同的线程中执行任务，这样您就可以保持 GUI 线程（Swing 工作线程）响应 Swing 组件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-29T17:52:59.150

多线程对以下方面很有价值：

*   跨多个 CPU 或多个内核分配工作。
*   在执行冗长的任务（例如，加载文件、执行计算）时保持响应。
*   在执行可能阻塞的操作（例如，从套接字读取）时保持响应。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T18:03:58.353

我更喜欢这种方式......

1.  **对于基于 GUI 的应用程序**，线程非常重要。

***   在 Java 中，GUI 由 Event Dispatcher Thread 处理。**始终建议保持 UI 在 UI 线程上工作，而非 UI 在非 UI 线程上工作。** 假设您按下一个按钮，然后向某个 Web 服务器发出一个 http 请求，在服务器上进行处理，然后它以结果响应。**如果您不创建非 UI 线程来处理此作业，那么您的 GUI 将除非收到网络服务器的响应，否则为非响应。**

    *   **在要同时完成多项工作的**情况下，线程也非常重要。 最好的例子是**操作系统**。通常我一边编码一边听我最喜欢的音乐，同时上网等等。现在这就是多线程非常方便的地方，如果只有一个线程，我们永远不会想象我们能做的事情今天做操作系统。

    *   **跨 CPU 的多线程**用于**并行处理**CPU 密集型工作。

    *   在**Java Servlet**的情况下，每个到达服务器的请求都将由**容器提供的单独线程处理。**** 

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T18:25:40.890

并发在某些算法中也非常有用。例如，我目前正在编写一个程序，该程序将使用遗传算法计算复杂问题的最佳解决方案。在遗传算法中，你有一群人，他们都必须执行适应度函数。这些体能测试的执行通常会彼此完全独立，并且会执行很多测试（例如，您可能有数百个人口规模）。并行化可以通过减少执行所有适应度函数所需的时间来显着提高遗传算法的速度。

希望这能让您了解人们在谈论“cpu 密集型”任务时所指的内容，尤其是因为并非所有 cpu 密集型任务都可以轻松并行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-30T00:32:12.533

你机器上 99.9% 的线程没有做任何 CPU 密集型工作。我的盒子目前有 1084 个线程和 1% 的 CPU 使用率——1084 个线程根本没有做任何重要的事情。它们都在等待，许多等待来自其他线程的信号，但最重要的是，许多等待 I/O。在抢占式多任务操作系统上使用多线程的最重要和普遍的原因是提高应用程序的整体 I/O 性能。这些抢占式内核迫使我们陷入同步、队列、锁等的痛苦——本质上是一个不同的设计区域，一条指令不再必须跟随另一条指令。好处是，这是一个巨大的好处，就是 I/O 性能比任何协作调度系统都要好得多，因为任何等待 I/O 驱动程序的线程都可以“立即”准备好/运行 在响应硬件中断的驱动程序完成 I/O 时。异步 I/O 不会改变这一点，它只是将 I/O 等待移动到内核线程池，该线程池必须列出异步请求并在发生 I/O 时使回调设置用户线程准备好，（同时强制用户代码恢复到显式状态机）。所以'什么类别的问题适合多线程'：

1) 任何期望 I/O 来自多个源的地方，其中完成可以异步发生。

2) 线程使应用程序设计更容易、更快、更安全。如果必须同时发生 20 件“事情”，那么编写明显的“内联”代码并使用 20 个线程运行它比自己开发一个状态机来处理 20 个不同的上下文要容易得多。由于进程内的线程共享内存，因此在队列上通信巨大的缓冲区（好的，缓冲区引用/指针）是微不足道的，从而简化了分层/流水线应用程序，例如。通讯堆栈。

3）多核机器上的CPU密集型操作，特别是可以隔离每个线程/核心的数据集以进行缓存优化。

4）AOB :)

如果没有多线程和抢占式内核的 I/O 性能，就不会有 BitTorrent、视频流、MMP 游戏和 AVI 播放器。

但是，您将能够运行记事本和 MS Word...**

# iphone - 使用 AudioFileReadPackets 通过音频队列访问原始音频数据

> ID：11266489
> 
> 赞同：0
> 
> 时间：2012-06-29T17:41:50.123
> 
> 标签：iphone, c++, audio, audioqueueservices

我正在尝试访问发送到音频队列回调的原始音频数据，但在调用 AudioFileReadPackets 后，字节数（numBytes）为 0。

```
void AQRecorder::MyInputBufferHandler(void *inUserData, AudioQueueRef inAQ, AudioQueueBufferRef inBuffer, const AudioTimeStamp * inStartTime, UInt32 inNumPackets, const AudioStreamPacketDescription* inPacketDesc) {

AQRecorder *aqr = (AQRecorder *)inUserData;

try {
    if (inNumPackets > 0) {

        //read packets
        UInt32 numBytes;

        OSStatus result = AudioFileReadPackets(aqr->mRecordFile,      // The audio file from which packets of audio data are to be read.
                                               FALSE,                   // Set to true to cache the data. Otherwise, set to false.
                                               &numBytes,               // On output, a pointer to the number of bytes actually returned.
                                               (__bridge AudioStreamPacketDescription*)inPacketDesc,    // A pointer to an array of packet descriptions that have been allocated.
                                               aqr->mRecordPacket,  // The packet index of the first packet you want to be returned.
                                               &inNumPackets,               // On input, a pointer to the number of packets to read. On output, the number of packets actually read.                                           
                                               inBuffer->mAudioData); // A pointer to user-allocated memory.

        inBuffer->mAudioDataByteSize = numBytes;       
        SInt16 *testBuffer = (SInt16*)inBuffer->mAudioData;

        for (int i=0; i < numBytes; i++)
        {
            UInt16 currentData = testBuffer[i];
            printf("Current data in testbuffer is %d", currentData);
        }

    // if we're not stopping, re-enqueue the buffe so that it gets filled again
    if (aqr->IsRunning())
        XThrowIfError(AudioQueueEnqueueBuffer(inAQ, inBuffer, 0, NULL), "AudioQueueEnqueueBuffer failed");
} catch (CAXException e) {
    char buf[256];
    fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
}
} 
```

当我只打印出 testBuffer 的第一个索引时，我能够得到 0 到 4294967296 之间的值，所以它似乎不是空的。任何想法为什么在 AudioFileReadPackets 执行后 numBytes 为 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:06:33.980

我仍然不确定为什么 numBytes 为 0，但我从[这个](https://stackoverflow.com/questions/7880706/how-to-get-array-of-float-audio-data-from-audioqueueref-in-ios)问题中找到了一个可行的解决方案。

为了获得 testBuffer 的大小，我使用了以下代码：

```
int sampleCount = inBuffer->mAudioDataBytesCapacity / sizeof(SInt16); 
```

# mysql - 如何在某些条件下插入多条记录

> ID：11266490
> 
> 赞同：-2
> 
> 时间：2012-06-29T17:41:53.783
> 
> 标签：mysql, performance, stored-procedures

我有两张桌子。一张表包含单词。其他表包含点。

```
table words:

id word

table points:

id wordid x y 
```

词列是唯一的。

我想编写存储过程，它接受输入当前 x 值和 word|y 值列表。

例如：

这是初始单词表行：

```
id word
1  Carrot
2  Apple
3  Potato 
```

我们称之为过程 `StoreData(x = 5, words = { Carrot:123, Onion:321 })`。

结果我们有：

```
Words table:

  id word
  1  Carrot
  2  Apple
  3  Potato
  4  Onion 

Points table:    
id wordid x  y 
1    1    5 123 
2    4    5 321 
```

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:48:36.207

您不能将结构化数据作为参数传递给存储过程：您必须首先将其插入到某个（临时）表中，然后从您的过程中读取该表的内容。因此，您也可以直接插入到目标表中：

```
INSERT IGNORE INTO Words (word) VALUES ('Carrot'), ('Onion');

INSERT INTO Points (wordid, x, y)
  SELECT Words.id, 5, y
  FROM   Words NATURAL JOIN (
      SELECT 'Carrot' AS word, 123 AS y
    UNION ALL
      SELECT 'Onion'  AS word, 321 AS y
  ) AS t; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/a1bd7/1/0)上查看。

（顺便说一句，我的物化表`t`本质上是您在调用存储过程之前必须创建和填充的表）：

```
DELIMITER ;;
CREATE PROCEDURE StoreData(IN x INT) BEGIN
  INSERT IGNORE INTO Words SELECT word FROM args;
  INSERT IGNORE INTO Points (wordid, x, y)
    SELECT Words.id, 5, y FROM Words NATURAL JOIN args;
END;;
DELIMITER ;

DROP   TEMPORARY TABLE IF EXISTS args;
CREATE TEMPORARY TABLE args (word VARCHAR(20), y INT);
INSERT INTO args VALUES ('Carrot', 123), ('Onion', 321);
CALL StoreData(5); 
```

# javascript - 将 Backbone.js 用于静态内容、大量 JavaScript 的网站？

> ID：11266495
> 
> 赞同：2
> 
> 时间：2012-06-29T17:42:10.063
> 
> 标签：javascript, static, backbone.js, web

我正在为一个包含所有静态内容的客户端构建一个站点，这意味着它不是一个 Web 应用程序，因为它不涉及任何用户交互和对站点本身数据的操作。

话虽如此，UI 相当复杂，而且最终肯定会非常依赖 JavaScript，所以我想使用 JS 框架。

我进行了大量研究，发现大量 Backbone.js 示例用于高度交互的 Web 应用程序，也具有广泛的 UI，但我想知道它是否也适合我的情况。考虑到我的 UI 要求，它似乎仍然会是这样，但我想知道其他人是否已经成功地在与我类似的实例中使用它。

如果不合适，还有其​​他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T20:57:03.730

我最近使用出色的[主干样板](https://github.com/tbranyen/backbone-boilerplate)编写了一个没有服务器端功能的单页 Web 应用程序。

不管服务器有明确的模型来管理同步，您仍然可以将该方法应用于 UI。例如，我最近一直在开发的一个应用程序具有一些非常复杂的功能/与图像的交互。使用 Backbone 对图像（带有一些元数据，如尺寸、标题等）进行建模非常有用，将它们保存在集合中并将模型/集合与我的 Backbone 视图相关联。它使 UI 逻辑非常易于维护、更新、重用和单元测试。

使用样板文件，您还可以获得出色的构建过程、linting 和一些用于单元测试的指针等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T22:53:17.210

如果您的站点不包含大量用户交互、DOM 更新和非回发重绘（即 Ajax + DOM 操作），而只是通过 CMS 管理的内容，那么客户端 MV* 框架不是正确的工具。大多数 CMS（Drupal、Wordpress）已经在服务器端包含了预定义的结构以及诱人/主题化的方法，这些方法不一定与 Backbonejs、Angular 等提供的相匹配。简而言之：如果您的项目是一个 Web 应用程序，那么一个 MV* 前端框架是有意义的。如果它是一个内容网站，请选择与您选择的 CMS 提供的内容相关的其他方法。

# ruby-on-rails - ActiveAdmin：按关联排序（belongs_to）

> ID：11266498
> 
> 赞同：1
> 
> 时间：2012-06-29T17:42:15.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, activeadmin

我有一个索引管理视图，其中显示了关联的模型`City`。我希望能够按城市名称排序，但是当我单击列标题进行排序时，我收到以下错误：

```
ActiveRecord::StatementInvalid in Admin/deals#index

SQLite3::SQLException: no such column: cities.name: SELECT  "deals".* FROM "deals"  ORDER BY cities.name desc LIMIT 30 OFFSET 0 
```

索引视图

```
ActiveAdmin.register Deal do
  index do
     column :id
     column :city
  end
  ...
end 
```

模型

```
class Deal < ActiveRecord::Base
  belongs_to :city
end 
```

如何按城市排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-22T18:41:58.730

使用 Rails 3 或 4：

```
index do
  column :city, :sortable=>:"cities.name"

  ...
end 
```

然后，在同一个文件中，您需要它以便`Deal`查询包含`City`属性：

```
controller do
  def scoped_collection
    Deal.includes(:city)
  end

  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:39:05.800

看看[https://github.com/gregbell/active_admin/pull/623#issuecomment-2419393](https://github.com/gregbell/active_admin/pull/623#issuecomment-2419393)和以下评论。您必须告诉 activeadmin 如何进行排序 - 可能类似于在定义交易索引页面之前定义范围`column :city, :sortable => 'cities.name'`。`joined`就像是

```
scope :joined, :default => true do |deals|
  deals.includes [:city]
end 
```

# android - Android中正确的交互通信？

> ID：11266506
> 
> 赞同：1
> 
> 时间：2012-06-29T17:43:02.113
> 
> 标签：android, android-activity

我想在单个进程中的活动之间共享数兆字节的数据结构和其他对象（指的是所述数据结构）（这`Parcelable`是不可能的；大部分数据都存在于 C++ 中）。我不仅要向新活动发送任意对象，还要返回任意结果对象。

但是activity相互启动并通过Intents返回结果，而Intents似乎没有办法包含任意Objects。目前我正在使用`static`变量作为一种解决方法，但这让我担心内存泄漏，虽然只有一个应用程序实例打算运行（目前），但我不禁想到如果同一个 Activity 的两个实例会发生什么以某种方式进入活动堆栈。

那么，SO 社区，您会推荐什么通信机制呢？

PS有谁知道Android是否会产生一个进程的多个副本，例如当两个应用程序独立启动第三个应用程序时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:00:15.417

> 我想在单个进程中的活动之间共享数兆字节的数据结构和其他对象（指的是所述数据结构）

我希望你*真正*想要的是一个所有活动都可以引用的集中式数据模型。

> 我不仅要向新活动发送任意对象，还要返回任意结果对象。

同样，我希望您*真正*想要的是一个所有活动都可以引用的集中式数据模型。说要在活动之间传递“多兆字节的数据结构”类似于说要通过 Web 应用程序中 URL 上的查询参数传递“多兆字节的数据结构”。

> 目前我正在使用静态变量作为一种解决方法，但这让我担心内存泄漏，虽然只有一个应用程序实例打算运行（目前），但我不禁想到如果两个相同的实例会发生什么活动以某种方式进入活动堆栈。

好吧，如果你真的有一个集中的数据模型（无论是通过静态数据成员还是其他方式），你就不必担心数据复制。此外，每次您通过`Intent`附加组件传递数据时，您都已经在制作副本。

> 那么，SO 社区，您会推荐什么通信机制呢？

有一个集中的数据模型并在`Intent`附加中传递标识符。

> 有谁知道Android是否会产生多个进程副本，例如当两个应用程序独立启动第三个应用程序时？

默认情况下，每个应用程序都在一个进程中运行，无论是谁“启动”它们或“启动”多少次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:48:57.723

就像在 Web 服务和客户端之间通信任意对象时一样，您可以序列化您的对象并在另一端反序列化它们，并将这些对象传递到 Intent 包中。您可以使用 XML 或 JSON 序列化器/反序列化器来执行此操作。

编辑：好的，在看到 CommonWares 评论后，我对 Intents 和我的第一个建议进行了一些挖掘，毕竟可能不是那么好。虽然它适用于较小的物体。

所以我能想到几个替代方案。

1.  正如您已经做的那样，通过使用自定义 Application 对象来使用静态数据成员
2.  序列化您的数据并将其存储在磁盘上
3.  将其存储在数据库中
4.  使用服务
5.  不要在活动之间传递那么大的数据

# javascript - 无限滚动ajax jquery

> ID：11266509
> 
> 赞同：1
> 
> 时间：2012-06-29T17:43:07.167
> 
> 标签：javascript, jquery, ajax, symfony

我正在尝试实现无限滚动选项。我正在使用 symfony2 框架。

html 看起来像这样：

```
<div id='more' >Loading...</div>
<div id='no-more' >No more results</div>
<div id='result'></div> 
```

控制器：

```
if($request->isXmlHttpRequest()){
   $appResult = THIS IN AN ARRAY WITH ALL THE RESULTS ......
   $return=array("responseCode"=>400, "appResult"=>$appResult);
   $return=json_encode($return);
   return new Response($return,200,array('Content-Type'=>'application/json'));
} 
```

和javascript：

```
<script type="text/javascript">
        var page = 1;

        $(window).scroll(function () {
            $('#more').hide();
            $('#no-more').hide();

            if($(window).scrollTop() + $(window).height() > $(document).height() - 200) {
                $('#more').css("top","400");
                $('#more').show();

            }
            if($(window).scrollTop() + $(window).height() == $(document).height()) {

                $('#more').hide();
                $('#no-more').hide();

                page++;

                var data = {
                    page_num: page
                };

                var actual_count = 30;

                if((page-1)* 12 > actual_count){
                    $('#no-more').css("top","400");
                    $('#no-more').show();
                }else{
                     $.ajax({
                        type: "POST",
                        url: "{{ path('login') }}",
                        data:data,
                        success: function(res) {

WHAT I DO HERE????

                        }
                    });
                }

            }

        });

</script> 
```

该代码工作正常，它发送请求并接收包含所有结果的响应数组。但我不知道如何处理这些结果，如何在结果 div 中打印它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:49:53.767

我假设“res”正在返回 HTML，并且您希望该数据进入#result div？如果是这样，请将其放在成功函数中：

```
$('#result').html($(res)); 
```

或者也许只是

```
$('#result').html(res); 
```

如果您返回的“res”是 JSON，您必须以某种方式对其进行解析，然后将其放在 div 中。你能告诉我们 res 的结果是什么吗？

编辑：因为它是 JSON，您可能必须执行以下操作：

```
var data = $.parseJSON(res);
$.each(data, function(index, value) {
    var currentHTML = $('#result').html();
    $('#result').html(currentHTML + this.description);
}); 
```

# javascript - 用 Greasemonkey 覆盖一个函数（document.hasFocus）

> ID：11266518
> 
> 赞同：1
> 
> 时间：2012-06-29T17:43:34.840
> 
> 标签：javascript, greasemonkey

我需要为greasemonkey 编写一个脚本，用一个每次都返回true 的方法覆盖默认的document.hasFocus。

这是我尝试使用的代码：

```
var script = document.createElement('script');
script.type = "text/javascript";
script.innerHTML = 'function document.hasFocus{return true;}';
document.getElementsByTagName('head')[0].appendChild(script); 
```

但它不起作用...

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:29:03.840

语法关闭，可能没有`<head>`标签。此外，尽可能避免使用`innerHTML`。所以使用：

```
var scriptNode          = document.createElement('script');
scriptNode.type         = "text/javascript";
scriptNode.textContent  = 'document.hasFocus = function () {return true;}';
var targ                = document.getElementsByTagName ('head')[0] || document.body;
targ.appendChild (scriptNode); 
```

* * *

`unsafeWindow`但是，在这种情况下，使用(Firefox Greasemonkey)的风险很小。所以整个脚本代码可能是：

```
unsafeWindow.document.hasFocus = function () {return true;}; 
```

* * *

如果它仍然“不起作用”，请描述它是***如何***不起作用的（预期结果与实际结果；错误代码等）。链接到目标页面。

# android - 使用 ADT 20 将 Maven Android Android 项目导入 Eclipse 时出错

> ID：11266520
> 
> 赞同：19
> 
> 时间：2012-06-29T17:43:52.207
> 
> 标签：android, eclipse, maven, adt

我已将 ADT 插件更新到最新版本 (20) 和 android-sdk 工具。现在，当我尝试将现有的 Android Maven 导入 Eclipse 时，会引发异常`An internal error occurred during: "Importing Maven projects". com/android/io/StreamException`，并创建 eclipse 项目，但不像以前那样像 Android 项目。工作区中以前存在的（maven android）项目工作正常。

导入项目时的 Eclipse 完整异常跟踪如下：

```
!ENTRY org.eclipse.osgi 2 1 2012-06-29 19:02:34.421
!MESSAGE NLS unused message: LifecycleMappingPropertyPage_this_message in: org.eclipse.m2e.core.ui.internal.messages

!ENTRY org.eclipse.core.jobs 4 2 2012-06-29 19:03:03.953
!MESSAGE An internal error occurred during: "Importing Maven projects".
!STACK 0
java.lang.NoClassDefFoundError: com/android/io/StreamException
    at me.gladwell.eclipse.m2e.android.project.EclipseAndroidProjectFactory.createAndroidProject(EclipseAndroidProjectFactory.java:17)
    at me.gladwell.eclipse.m2e.android.project.EclipseAndroidProjectFactory.createAndroidProject(EclipseAndroidProjectFactory.java:1)
    at me.gladwell.eclipse.m2e.android.AndroidMavenProjectConfigurator.configure(AndroidMavenProjectConfigurator.java:62)
    at org.eclipse.m2e.core.project.configurator.AbstractLifecycleMapping.configure(AbstractLifecycleMapping.java:109)
    at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager.updateProjectConfiguration(ProjectConfigurationManager.java:414)
    at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager.configureNewMavenProject(ProjectConfigurationManager.java:240)
    at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager.importProjects(ProjectConfigurationManager.java:156)
    at org.eclipse.m2e.core.ui.internal.wizards.MavenImportWizard$1.doCreateMavenProjects(MavenImportWizard.java:164)
    at org.eclipse.m2e.core.ui.internal.wizards.AbstractCreateMavenProjectsOperation.run(AbstractCreateMavenProjectsOperation.java:73)
    at org.eclipse.m2e.core.ui.internal.wizards.MavenImportWizard$3.runInWorkspace(MavenImportWizard.java:249)
    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.ClassNotFoundException: com.android.io.StreamException
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 12 more 
```

任何人都可以解决它吗？是否需要更新 m2e Android 连接器？

更新：这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>your.company</groupId>
    <artifactId>my-android-application</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>my-android-application</name>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>2.3.3</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.2.0</version>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <sdk>
                        <!-- platform or api level (api level 4 = platform 1.6)-->
                        <platform>10</platform>
                    </sdk>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project></project> 
```

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-30T16:50:15.847

**编辑：**与其这样做，您现在最好从[github](https://github.com/rgladwell/m2e-android)获取 Ricardo 的更新项目，切换到`adt-20`分支，使用 Maven 构建，如下所述卸载 M2E 连接器，并从 me.gladwell.eclipse 安装新的 M2E 连接器。 m2e.android.update/target/repository 作为本地存储库，也如下所述。谢谢，里卡多！

* * *

我遇到了这个问题，无法构建我的项目。我解决它的唯一方法是将 ADT 降级到 18.0.0。我找不到通过 SDK 管理器等执行此操作的方法，因此结果证明这是一种考验——尽管我很可能没有以最明智的方式做到这一点！无论如何，我想我会发布我所经历的，以防它帮助任何人。我遗漏了无数次 Eclipse 重启。:)

这是在 Linux 上的 Eclipse 3.7 上。

*   获取 ADT 压缩包：http: [//dl.google.com/android/ADT-18.0.0.zip](http://dl.google.com/android/ADT-18.0.0.zip)
*   获取适用于您的操作系统的 Android SDK 工具存档：http: [//dl.google.com/android/android-sdk_r18-linux.tgz](http://dl.google.com/android/android-sdk_r18-linux.tgz)（将 linux.tgz 替换为 windows.zip 或 macosx.zip - 抱歉，Stack Overflow 只允许我使用我的帖子中有两个链接！）。
*   禁用自动软件更新：Window -> Preferences -> Install/Update -> Automatic Updates，取消选中“Automatically find new updates and notify me”。
*   卸载Android SDK Tools：Window -> Android SDK Manager，勾选Android SDK Tools，点击“Delete 1 package”。
*   卸载 ADT：帮助 -> 安装新软件 -> 已经安装了什么？-> 已安装软件，选择所有 Android* 组件和适用于 M2E 的 Android 配置器，然后单击“卸载”。
*   解压缩 ADT-18.0.0.zip 并安装：帮助 -> 安装新软件 -> 添加 -> 本地并浏览到您解压缩它的位置。为本地存储库命名并单击确定，然后从“使用”下拉列表中选择它并从中安装可用的软件。
*   将工具目录从 android-sdk_r18 存档中提取到您的 android-sdks 目录中。
*   安装 Android M2E 连接器：首选项 -> Maven -> 发现，单击“打开目录”，然后选择连接器。如果出现提示，请取消选择任何 ADT 20.0 功能。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-30T08:48:36.013

这是由于 ADT API 的更改而导致的 m2e-android 插件的已知问题：

[https://github.com/rgladwell/m2e-android/issues/89](https://github.com/rgladwell/m2e-android/issues/89)

在我们找到修复程序时请耐心等待。

* * *

**更新：**今天发布的新 0.4.2 版本修复了这个问题，请运行 Eclipse 更新（帮助 -> 检查更新），如果这能解决您的问题，请告诉我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-21T08:58:05.377

现在，它已修复为与 ADT 20+ 一起使用的 andriod maven 连接器，只需要从以下更新站点安装更新：`http://rgladwell.github.com/m2e-android/updates/master/`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-16T20:42:42.287

只需打开您的文件。XML 和“图形布局”下方的选项卡（在 Eclipse 的情况下）。您仍然在那里找到位于右上角的 Android 图标，该图标详细说明了在我的案例中使用的版本是 18 版，我选择了 17 版并且错误消失了。

# javascript - 使用多个 div 的值 javascript

> ID：11266524
> 
> 赞同：0
> 
> 时间：2012-06-29T17:44:04.407
> 
> 标签：javascript, html

我在网站上有多个 div！例如

```
<div id='id_111232'>Some text</div>
<div id='id_111233'>Some text</div>
<div id='id_111234'>Some text</div>
<div id='id_111235'>Some text</div> 
```

我想创建一个像这样附加到这个div的javascript

```
<a href='http://something.com/some/xx'></a> 
```

其中 xx 是上述 div 的值，所以我的意思是：id_ **value** 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:58:25.577

试试这个 - [http://jsfiddle.net/9DAd7/2](http://jsfiddle.net/9DAd7/2)

```
var divs = document.getElementsByTagName("div");
var size = divs.length;

for ( var i = 0; i < size; i++ ) {
    var link = document.createElement("a");
    var id = divs[i].getAttribute("id").replace("id_", "");

    link.innerHTML = id;
    link.href      = "http://www.example.com/" + id;

    divs[i].appendChild(link);
} 
```

或者更容易使用 jQuery - [http://jsfiddle.net/9DAd7/3/](http://jsfiddle.net/9DAd7/3/)

```
$("div").each(function() {
    var id = $(this).attr("id").replace("id_", "");
    $(this).append( '<a href="http://www.example.com/' + id + '">' + id + '</a>' );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:59:52.313

不确定我是否清楚地理解您要完成的工作，但如果您想将上述 div 中的每个文本附加到 href 的末尾，您可以执行如下的 JQuery 操作。

```
<a id="myLink" href='http://something.com/some'></a>

<div id='appendedDivs'>
<div id='id_111232'>Some text</div>
<div id='id_111233'>Some text</div>
<div id='id_111234'>Some text</div>
<div id='id_111235'>Some text</div>
</div>

<script type="text/javascript">
    var appendedLink=$("myLink").attr("href")+'/';
        $('appendedDivs').childen().each( function() {
        appendedLink = appendedLink + this.text();
    });

    $("myLink").attr("href")=appendedLink;

</script> 
```

这将通过并将 appendedDivs 中的所有 div 文本附加到您的 url。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:05:38.143

使用 jQuery，您可以通过有意义的选择器遍历 div，解析 id 属性并创建如下链接：

HTML：

```
<div class="link" id='id_111232'>Some text</div>
<div class="link" id='id_111233'>Some text</div>
<div class="link" id='id_111234'>Some text</div>
<div class="link" id='id_111235'>Some text</div> 
```

Javascript：

```
$('div.link').each(function() {
    var id = $(this).attr('id').split('_')[1];
    $(this).html('<a href="http://something.com/some/' + id + '">' + $(this).text() + '</a>');
});​ 
```

这是工作小提琴：http: [//jsfiddle.net/archatas/uPR62/](http://jsfiddle.net/archatas/uPR62/)

# javascript - 用javascript中的数组替换字符串中的多个单词

> ID：11266529
> 
> 赞同：2
> 
> 时间：2012-06-29T17:44:20.160
> 
> 标签：javascript, arrays

假设我正在制作一个翻译系统，它将数组键中匹配的所有单词替换为匹配的数组键的值让我们说

```
translate =
  saya: "i",
  jalan: "walk",
  hutan: "forest",
  beli: "buy",
  ke: "to",
  apel: "apple",
}; 
```

`string = "SaYa JaLan ke hutan beli Apel" // case insensitive`

它应该是

`string = "I walk to forest buy apple" // the translated string`

我们如何在javascript中做到这一点？在一个函数中，所以我们可以这样称呼它

`translated = translate(string) // returns the translated string`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T17:48:51.963

```
function translate(txt) {
    var translate = {
        saya: "i",
        jalan: "walk",
        hutan: "forest",
        beli: "buy",
        ke: "to",
        apel: "apple"
    };

    for (var key in translate) {
        txt = txt.replace(new RegExp(key, "ig"), translate[key]);
    }
    return txt.charAt(0).toUpperCase() + txt.slice(1);  //Capitalize the first
}                                                          // letter.

var translated = translate("SaYa JaLan ke hutan beli Apel");
//"I walk to forest buy apple" 
```

演示：http: [//jsfiddle.net/DerekL/2ucEk/](http://jsfiddle.net/DerekL/2ucEk/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T17:49:25.100

JS noobie 我自己，但我认为这应该可行。话虽不同，但过程是一样的

```
 lexicon = new Object();
lexicon.merry = "god";
lexicon.christmas = "jul";
lexicon.and = "och";
lexicon.happy = "gott";
lexicon.new = "nytt";
lexicon.year = "ar";

function translate(){

    //use to show translation:
    //have a merry christmas and a fun new year!
    var myString = document.getElementById('input').value;

    myString = myString.replace(/merry/g, lexicon.merry);
    myString = myString.replace(/christmas/g, lexicon.christmas);
    myString = myString.replace(/and/g, lexicon.and);
    myString = myString.replace(/happy/g, lexicon.happy);
    myString = myString.replace(/new/g, lexicon.new);
    myString = myString.replace(/year/g, lexicon.year);

    document.write(myString);
} 
```

# c# - 隐藏基类的属性

> ID：11266532
> 
> 赞同：3
> 
> 时间：2012-06-29T17:44:28.280
> 
> 标签：c#, generics, inheritance, base-class

我想要完成的是有两个类，一个非泛型和一个泛型。

我需要一个非泛型类，因为我打算插入这个类的对象并将它们插入到`List<T>`

这是代码

```
// Non-generic
public class Response
{
    public object Value { get; }
}

// Generic
public class Response<T> : Response
{
    public T Value { get; set; }
} 
```

我想要一个`List<Response>`，当我访问这个对象时，我将 Value 属性作为对象。

但是当我收到这个对象作为通用对象时，访问 T Value 属性并隐藏对象 Value 属性。

我希望清楚，如果没有..请告诉我。

编辑：这是一个测验。因此，每个问题都有答案。例如，在 MultipleChoiceQuestion 中，它可以有多个答案 A、B、C、D 作为视图形状，或者可以是字符串或整数。

```
public abstract class Question
{
    public Question(string questionText)
    {
        this.QuestionText = questionText;
    }

    public string QuestionText { get; set; }
}

// Non-generic
public class Response
{
    public object Value { get; }
}

// Generic
public class Response<T> : Response
{
    public T Value { get; set; }
}

public class MathProblemQuestion : Question
{
    public Response Response { get; set; }
}

public class MultipleChoiseQuestion : Question
{
    public Response Response { get; set; }

    public IEnumerable<Response> PossibleResponses;

    ...
}

public class TrueOrFalse : Question
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T17:49:39.157

我个人只会给他们不同的名字。它会让你的生活*更*简单，代码也更清晰：

```
public abstract class Response
{
    public abstract object ObjectValue { get; }
}

public class Response<T> : Response
{
    public T Value { get; set; }

    public override object ObjectValue { get { return Value; } }
} 
```

请注意，我已经将`Response`类抽象化了——很难看出它如何优雅地工作；如果`Response`有自己的存储空间，`Value`那么大概可以将其设置为非`T`值。希望制作这份摘要对您来说不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:49:48.943

> 我需要一个非泛型类，因为我打算插入这个类的对象并将它们插入到`List<T>`

不确定我是否理解。A`List<T>`当然可以保存泛型类型。

```
var ls = new List<List<int>>;  // works! 
```

如果您退回到`object`到处使用，那么使用泛型有什么意义呢？您不再拥有用于所有意图和目的的强类型集合，因为底层数据（您真正关心的数据）属于`object`.

> 但是当我收到这个对象作为通用对象时，访问 T Value 属性并隐藏对象 Value 属性。

如果您使用`Response<object>`then`T` *则* `object`适用于您类型的所有实例。

也许我在这里遗漏了一些东西。如果我是，你能详细说明一下吗？我看不出您的泛型类型不起作用的原因。

编辑：我想我现在明白了。您想要一个单独的对象`List<T>`来保存`Response`具有不同通用参数的对象。如果可能的话，我建议限制每种泛型类型以实现特定的接口，即

```
public interface IResponseData
{
    // whatever
}

public class Response<T> where T : IResponseData
{
    public T Value { get; set; }
} 
```

现在，如果您需要允许`int`s 和其他没有共同祖先的类型，那么这将不起作用，Jon Skeet 为您提供了更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:16:55.473

为了做你想做的事，你需要把这两个值联系在一起：

```
public abstract class Response
{
    public object Value { get; set; }
}

public class Response<T> : Response
{
    private T _value;
    public new T Value
    {
        get { return _value; }
        set { base.Value = _value = value; }
    }
} 
```

但是，正如其他人指出的那样 - 您的前提是不正确的：您可以将泛型类型用作其他泛型类型中的类型参数：

```
List<Response<YourObject>> 
```

将是完全有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T17:51:51.430

如果您执行以下操作（使用“new”关键字），您将隐藏基类上的属性：

```
// Non-generic
public class Foo
{
    public object Value { get; set; }
}

// Generic
public class Foo<T> : Foo
{
    public new T Value { get; set; }
} 
```

除非您添加另一个名称不同的属性，否则我看不到解决方法。我不完全理解为什么你需要使用不同版本的类才能使用一个列表，你可以有一个 List< Foo < T > > 就好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T18:01:06.420

我假设您希望在同一个列表中插入不同类型的响应，并使响应的对象版本不可设置。但是下面的代码不起作用，因为属性的自动生成的后备存储没有绑定在一起：

```
// Non-generic
public class Response
{
    public object Value { get; private set; }
}
// Generic
public class Response<T> : Response
{
    public new T Value { get; set; }
}

public static void Main()
{
    List<Response> List = new List<Response>() { new Response<int>() { Value = 1 }, new Response<string>() { Value = "p" } };

    // Throws NullReferenceException
    Console.WriteLine(list[0].Value);
    Console.WriteLine(list[1].Value);
} 
```

试试这个，它使用受保护的字段来支持属性：

```
// Non-generic
public class Response
{
    protected object valueObject;

    public object Value
    {
        get
        {
            return valueObject;
        }
    }
}
// Generic
public class Response<T> : Response
{
    public new T Value
    {
        get
        {
            return (T)valueObject;
        }
        set
        {
            valueObject = value;
        }
    }
}

public static void RunSnippet()
{
    List<Response> list = new List<Response>() { new Response<int>() { Value = 1 }, new Response<string>() { Value = "p" } };

    Console.WriteLine(list[0].Value);
    Console.WriteLine(list[1].Value);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T18:01:30.143

如果我正确理解您的问题，您可以做您想做的事，只要您愿意在读回列表元素时手动对它们进行类型转换。

您问题的第一部分是，您如何用不同类型的新属性“隐藏”继承的属性，而您已经实现了这一点。您不需要任何特殊关键字来替换属性。给定您的样本类型：

```
public class Response
{
    public object Value
    {
        get;
        set;
    }
}

public class Response<T> : Response
{
    public T Value
    {
        get;
        set;
    }

} 
```

您已经可以执行以下操作：

```
// typeof(response.Value) == System.Object
var response = new Response();

// typeof(responseint.Value) == System.Int32
var responseint = new Response<int>(); 
```

但是，您进一步要求做的是将它们放入 a`List<Response>`并仍将它们视为派生类型，如果没有显式类型转换，将无法工作。a 的元素类型`List<>`在编译时是固定的，据编译器所知，列表的所有元素都具有该类型。如果需要，您可以将更多派生类型添加到列表中，但是一旦它们在那里，当您*退出时*，编译器只知道它们是基类型。

当然，在运行时，实际的类型元数据是存在的，所以运行时知道如何将 a`Response`转换为 a `Response<int>` *，只要它是真实的。*为了在代码中进行演示，给定上述`Response`和的实例`Response<int>`：

```
 // this part is fine, but...
var responses = new List<Response>();
responses.Add(response);
responses.Add(responseint); 

// This will not work.
responses[1].Value += 1; 

// But this will.
(responses[1] as Response<int>).Value += 1; 
```

# android - Logcat 中 Choreographer 消息的含义

> ID：11266535
> 
> 赞同：198
> 
> 时间：2012-06-29T17:44:34.823
> 
> 标签：android, android-logcat

我安装了最新版本`SDK (API 16)`并获得了最新的 ADT。我现在在 logcat 中看到这些消息，我很确定，我以前从未见过。有人对此有任何想法吗？

> 06-29 23:11:17.796：I/Choreographer(691)：跳过 647 帧！应用程序可能在其主线程上做了太多工作。

我进行了搜索，发现了这个链接：http: [//developer.android.com/reference/android/view/Choreographer.html](http://developer.android.com/reference/android/view/Choreographer.html)。这是 API 16 中引入的一个新类。

我需要知道如何确定我的应用程序可能正在做哪些“太多工作”，因为我的所有处理都是在`AsyncTask`s 中完成的。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-07-04T12:34:24.377

Choreographer 允许应用程序将自己连接到 vsync，并适当地计时以提高性能。

Android 视图动画在内部使用 Choreographer 的目的相同：正确计时动画并可能提高性能。

由于 Choreographer 被告知每个 vsync 事件，因此它可以判断 Choreographer.post* api 传递的 Runnable 之一是否没有在一帧的时间内完成，从而导致帧被跳过。

据我了解，Choreographer 只能检测到跳帧。它无法说明为什么会发生这种情况。

消息“应用程序可能在其主线程上做的工作过多。” 可能会产生误导。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-11-06T12:16:26.117

我迟到了，但希望这是对这里其他答案的有用补充......

## 回答问题 / tl:dr;

> 我需要知道如何确定我的应用程序可能在做什么“太多工作”，因为我的所有处理都是在 AsyncTasks 中完成的。

以下为所有候选人：

*   主线程上的 IO 或昂贵的处理（加载可绘制对象、膨胀布局和设置`Uri`' `ImageView`s 都构成主线程上的 IO）
*   渲染大/复杂/深`View`层次结构
*   `View`使层次结构的大部分无效
*   `onDraw`custom 中`View`的昂贵方法
*   动画中的昂贵计算
*   以太高的优先级运行“工作”线程而不能被视为“后台”（`AsyncTask`默认情况下是“后台” `java.lang.Thread`，*不是*）
*   产生大量垃圾，导致垃圾收集器在清理时“停止世界”——包括主线程

要真正*确定*具体原因，您需要分析您的应用程序。

## 更多详情

我一直试图通过实验和查看[代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/android/view/Choreographer.java?av=f)来理解 Choreographer 。

Choreographer 的文档以“协调动画、输入和绘图的时间”打开。这实际上是一个很好的描述，但其余部分继续过分强调动画。

Choreographer 实际上负责执行 3 种类型的回调，它们按以下顺序运行：

1.  输入处理回调（处理用户输入，例如触摸事件）
2.  用于帧之间补间的动画回调，为任何/所有正在运行的动画提供稳定的帧开始时间。第二次运行这些回调意味着在调用第三种回调时已经进行了任何与动画相关的计算（例如更改视图的位置）......
3.  用于绘制视图层次结构的视图遍历回调。

目的是使无效视图重新绘制（和补间动画）的速率与屏幕垂直同步（通常为 60fps）相匹配。

关于跳过帧的警告看起来像是事后的想法：如果*单*次通过 3 个步骤所需的帧持续时间超过预期帧持续时间的 30 倍，则会记录该消息，因此您可以在日志消息中看到的最小数字是“跳过*30*帧” ; 如果*每次*通过的时间比应有的时间长 50%，您仍然会跳过 30 帧（*淘气！*）但您不会收到警告。

从所涉及的 3 个步骤可以清楚地看出，不仅动画会触发警告：使大型`View`层次结构的重要部分无效或`View`使用复杂的 onDraw 方法可能就足够了。

例如，这将反复触发警告：

```
public class AnnoyTheChoreographerActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.simple_linear_layout);

        ViewGroup root = (ViewGroup) findViewById(R.id.root);

        root.addView(new TextView(this){
            @Override
            protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                long sleep = (long)(Math.random() * 1000L);
                setText("" + sleep);
                try {
                    Thread.sleep(sleep);
                } catch (Exception exc) {}
            }
        });
    }
} 
```

...产生这样的日志记录：

```
11-06 09:35:15.865  13721-13721/example I/Choreographer﹕ Skipped 42 frames!  The application may be doing too much work on its main thread.
11-06 09:35:17.395  13721-13721/example I/Choreographer﹕ Skipped 59 frames!  The application may be doing too much work on its main thread.
11-06 09:35:18.030  13721-13721/example I/Choreographer﹕ Skipped 37 frames!  The application may be doing too much work on its main thread. 
```

`onDraw`无论您是否制作动画，您都可以从堆栈中看到编舞者参与其中：

> 在 example.AnnoyTheChoreographerActivity$1.onDraw(AnnoyTheChoreographerActivity.java:25) 在 android.view.View.draw(View.java:13759)
> 
> ...相当多的重复...
> 
> 在 android.view.ViewGroup.drawChild(ViewGroup.java:3169) 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:3039) 在 android.view.View.draw(View.java:13762) 在 android.widget。 FrameLayout.draw(FrameLayout.java:467) 在 com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2396) 在 android.view.View.getDisplayList(View.java:12710) 在 android .view.View.getDisplayList(View.java:12754) 在 android.view.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1144) 在 android.view.ViewRootImpl.draw(ViewRootImpl.java:2273) 在 android.view。 ViewRootImpl.performDraw(ViewRootImpl.java:2145) at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1956) at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1112) at android.view.ViewRootImpl$TraversalRunnable.run (ViewRootImpl.java:4472) **在 android.view.Choreographer$CallbackRecord.run(Choreographer.java:725) 在 android.view.Choreographer.doCallbacks(Choreographer.java:555) 在 android.view.Choreographer.doFrame(Choreographer.java:525) 在 android。 view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)** at android.os.Handler.handleCallback(Handler.java:615) at android.os.Handler.dispatchMessage(Handler.java:92) at android.os.Looper .loop(Looper.java:137) 在 android.app.ActivityThread.main(ActivityThread.java:4898)

最后，如果来自其他线程的争用减少了主线程可以完成的工作量，那么即使您实际上并没有在主线程上执行工作，跳帧的机会也会显着增加。

在这种情况下，建议应用程序在主线程上执行过多操作可能会被认为具有误导性，但[Android 确实希望工作线程以低优先级运行，](https://stackoverflow.com/a/8060413/473338)以防止它们饿死主线程。如果您的工作线程是低优先级的，那么触发 Choreographer 警告的唯一方法就是在主线程上做太多事情。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-11-09T02:16:29.430

如果在许多情况下可能会在您的 LogCat 中弹出一条 Info 消息。

就我而言，它发生在我以编程方式从 XML 布局文件中扩展多个视图时。该消息本身是无害的，但可能是以后出现问题的迹象，该问题将使用您的应用程序允许使用的所有 RAM 并导致超级邪恶 Force Close 发生。我已经成长为那种喜欢看到他的 Log WARN/INFO/ERROR Free 的开发人员。;)

所以，这是我自己的经验：

我收到消息：

```
10-09 01:25:08.373: I/Choreographer(11134): Skipped XXX frames!  The application may be doing too much work on its main thread. 
```

...当我通过从 XML 扩展视图并使用来自 REST 响应的数据填充其字段（图像、文本等）来创建自己的自定义“超复杂多节列表”时/ JSON Web 服务（没有分页功能），通过将所有这些以正确的顺序添加到 LinearLayout（在 ScrollView 内具有垂直方向），该视图将充当行、子节标题和节标题。所有这些都是为了模拟带有可点击元素的 listView ......但是，那是另一个问题。

作为负责任的开发人员，您希望使应用程序真正有效地利用系统资源，因此列表的最佳实践（当您的列表不是那么复杂时）是使用带有 Loader 的 ListActivity 或 ListFragment 并使用 Adapter 填充 ListView，这应该是更有效的，事实上它是，你应该一直这样做，再次......如果你的列表不是那么复杂。

解决方案：我在我的 REST/JSON Web 服务上实现了分页以防止“大响应大小”，并且我包装了在 AsyncTask 上添加“行”、“节标题”和“子节标题”视图的代码以保留 Main线程很酷。

所以...我希望我的经验能帮助那些因这条信息消息而大开眼界的人。

快乐黑客！

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-08-10T18:57:10.837

这通常在使用模拟器进行调试时发生，众所周知，模拟器总是很慢。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-11-16T13:41:36.850

就我而言，当我显示夏洛克操作栏终止进度条时，我会收到这些消息。由于它不是我的库，我决定隐藏 Choreographer 输出。

您可以使用此过滤器表达式将 Choreographer 输出隐藏到 Logcat 视图中：

**标签：^((?!编舞).*)$**

我使用了其他地方解释的正则表达式： [正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

# jquery - jquery 图像缩放像谷歌图像搜索

> ID：11266538
> 
> 赞同：0
> 
> 时间：2012-06-29T17:45:01.633
> 
> 标签：jquery

我需要从这篇文章中做同样的事情[Pop Images like Google Images](https://stackoverflow.com/questions/7411393/pop-images-like-google-images) 但我需要添加与谷歌图片搜索相同的内容，即悬停时需要显示图片标题。我来自 java 和 jquery 的新手，所以请帮助我[http://jsfiddle.net/roXon/HmTrw/](http://jsfiddle.net/roXon/HmTrw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:49:02.940

在我的情况下，我需要的不仅仅是属性`title`，我的图像结构如下：

```
<ul class="thumbnails">
    <li>
        <div class="thumbnail">
             <img src="/images/200X150.gif" alt="200X150" />
             <div class="caption" style="display:none">
                  HTML Goes here
             </div>
        </div>
    </li>
    ....
</ul> 
```

您需要在以下情况下更新插件[ibox](https://stackoverflow.com/questions/7411393/pop-images-like-google-images) ：

```
el.mouseenter(function() {
    ibox.html(''); 
```

添加这个：

```
$('#ibox').append('<div class="ibox-caption">'+$(this).siblings('.caption').html()+'</div>'); 
```

.ibox-caption 的 css 应该具有相同的图像宽度：

```
.ibox-caption {
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:55:27.807

在该行之后`ibox.html('');`（JS 中的第 20 行左右）添加以下行：

```
jQuery('<div />').text(this.title).appendTo(ibox); 
```

您还需要添加一些 CSS。

# ruby-on-rails - rails 2.3.10 open_session - 缺少方法

> ID：11266540
> 
> 赞同：1
> 
> 时间：2012-06-29T17:45:11.107
> 
> 标签：ruby-on-rails, unit-testing, testing

我正在尝试为旧应用程序编写一些测试：

```
open_session do |sess|
  sess.post "/shop/cart/add", :product_id => 687, :quantity => 1
  assert_equal '/shop/cart', path
end 
```

我只需要测试结帐过程，但应用程序需要会话数据来执行此操作。当我使用 open_session 我得到：

```
NameError: undefined local variable or method `open_session' for #<OrderTest:0x10706cf68> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:31:56.857

嗯，好的，我正在使用

```
class OrderTest < ActiveSupport::TestCase 
```

代替

```
class OrderTest < ActionController::IntegrationTest 
```

# javascript - YUI：在 IE 中检查选择器？

> ID：11266541
> 
> 赞同：1
> 
> 时间：2012-06-29T17:45:14.620
> 
> 标签：javascript, internet-explorer, css-selectors, yui

我有一个查询写成：

```
Y.all('.myClass:checked'); 
```

除了 IE (8) 之外，它在所有方面都表现出色。我似乎根本无法`':checked'`使用 IE。是否可以只查询这样的选中复选框并与 IE 兼容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T22:03:01.107

您是否包含了 selector-css3 模块？否则我相信 YUI 会将其视为普通查询，这就是为什么您在现代浏览器中而不是 IE 中获得它的原因

```
YUI().use('node-base','selector-css3', function(Y){
    Y.all('.myClass:checked');//Should now work in all browsers
}); 
```

请记住始终使用 YUI 声明您的依赖项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:48:35.887

> 听起来他们在以下情况下发现并修复了问题：yuilibrary.com/projects/yui3/ticket/2528895 可能是其他问题。如果没有人给你一个好的答案，你最终可能想要提交一份错误报告。

-TheZ（在原始问题的评论中）

这是 3.2 之前的 yui3 版本中的一个错误

# django - 编辑而不使用表单中的 id 隐藏字段？

> ID：11266543
> 
> 赞同：3
> 
> 时间：2012-06-29T17:45:31.583
> 
> 标签：django

我不确定这是否是最干净的编辑方式。但经过数小时的研究，这是我能想到的最好的。但是，我不喜欢我必须将 id 存储在隐藏字段中才能再次将其作为 POST 检索以实际更新模型的事实。

有没有更有效的方法来做到这一点？

```
def edit_contact_view(request):
    profile = request.user.get_profile()
    if 'id' in request.GET:
        try:
            id = request.GET['id']
            contacts = profile.company.contact_set.all()
            form = ContactsForm(profile.company, instance=contacts.get(id=id))
            form.data['id'] = id
            variables = RequestContext(request, {'form':form })
            return render_to_response("contact.html", variables)
        except Contact.DoesNotExist:
            raise Http404(_(u'Contact not found'))
    else:
        if request.method == 'POST':
            form = ContactsForm(profile.company, request.POST)
            if form.is_valid():
                contacts = profile.company.contact_set.all()
                contact = contacts.get(id=form.cleaned_data['id'])
                contact.last_name = form.cleaned_data['last_name']
                contact.save()
    return HttpResponseRedirect('/') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:15:46.803

是的，你让这变得比它需要的更复杂。

首先，在 Django 中，更常见的是在 URL 本身中传递 id，而不是在 GET 参数中 - 例如`/contact/edit/3/`，而不是`/contact/edit?id=3`. 例如，请参阅[此问题](https://stackoverflow.com/questions/11264655/valueerror-when-getting-objects-by-id)以了解如何配置这样的 URL。

其次，无论您采用哪种方式，都无需在隐藏变量中传递 id，因为它已经可以从 URL 获得。您始终可以从那里获取实例。

第三，我认为这`ContactForm`是一个 ModelForm，但您没有使用该`save`功能，这进一步简化了事情。

把它们放在一起：

```
def edit_contact_view(request, id=None):
    profile = request.user.get_profile()
    if id is not None:
        contact = get_object_or_404(Contact, pk=id)
    else:
        contact = Contact(company=profile.company)
    if request.POST:
       form = ContactForm(request.POST, instance=contact)
       if form.is_valid():
           contact = form.save()
           return redirect(...)

    else:
        form = ContactForm(instance=contact)
    return render_to_response('contact.html', {'form': form}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:10:50.457

我一定在这里遗漏了一些东西，但你为什么不按照标准对 url 中的 id 进行编码呢？

即在`urls.py`：

```
url('^/contact/?P<contact_id>[0-9]+)/edit/$', edit_contact_view, name='edit_contact_view') 
```

你的看法：

```
def edit_contact_view(request, contact_id):
    profile = request.user.get_profile()
    contact = get_object_or_404(Contact, id=contact_id)
    if contact not in profile.company.contact_set.all():
        return Http404 
```

并在您的模板中

```
<form method="POST">
   {{ form.as_p }}
   ...
</form> 
```

# javascript - CoffeeScript 中的 {bar}=foo 声明语法是什么？

> ID：11266546
> 
> 赞同：0
> 
> 时间：2012-06-29T17:46:11.423
> 
> 标签：javascript, coffeescript

我在 CoffeeScript 中看到过使用以下语法的人。

```
{variable} = something_else 
```

这是做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:49:10.777

这是解构赋值：

[http://coffeescript.org/#destructuring](http://coffeescript.org/#destructuring)

```
// From this coffescript
{a,b} = [1,2]

// the following javascript is generated:

var a, b, _ref;
_ref = [1, 2], a = _ref.a, b = _ref.b; 
```

# c++ - 设计一个可以在 if 语句中测试的类？

> ID：11266550
> 
> 赞同：3
> 
> 时间：2012-06-29T17:46:25.727
> 
> 标签：c++, if-statement, operator-overloading

我有我的课，在那里我重载了`!`运算符：

```
class obj
{
public:

    bool operator!() const
    { return this->str.length() == 0; }

private:

    string str;

}; 
```

与`!`操作员一起，我想检查`obj`有效性，所以：

```
obj o;

// if o is not a valid object
if(!o)
   cerr << "Error"; 
```

现在我想有可能这样做：

```
// if o is a valid object
if(o)
   cout << "OK"; 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T17:47:32.567

使用 C++11，您可以通过以下方式执行此操作`explicit operator bool`：

```
explicit operator bool() const {
    return !!*this;
} 
```

如果您需要将对象`bool`显式转换为 a（由`if`语句自动完成），则调用此运算符。该实现通过`operator !`在接收器对象上调用您的方法，然后返回相反的结果来工作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:00:38.053

根据您的使用情况，您似乎需要重载`bool`运算符而不是`!`运算符。

```
class obj
{
public:

    operator bool() const
    { return this->str.length() == 0; }

private:

    string str;

}; 
```

**编辑**

ildjarn 在评论中提供了一个很好的链接，说明进行简单`bool`重载的危险。绝对值得一读

[http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Safe_bool](http://en.wikibooks.org/wiki/More_C++_Idioms/Safe_bool)

# php - 语法错误，意外的 T_PRINT，需要 T_STRING

> ID：11266555
> 
> 赞同：-2
> 
> 时间：2012-06-29T17:46:33.720
> 
> 标签：php

我收到此错误：

```
Parse error: syntax error, unexpected T_PRINT, expecting T_STRING in 
/homepages/26/d94605010/htdocs/lz/writecodeonline.com/php/index.php(190) 
: eval()'d code on line 7 
```

例子：

```
 Class HelloWorld
    {   
      public $word;

      public function print()  
      {    
        echo $this->"hi";    
      }    
    }

    $word = new HelloWorld();
    $word = print(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T17:48:04.100

`print()`是保留关键字。此外，这是无效代码：

```
 echo $this->"hi"; 
```

你会得到这个错误：

```
PHP Parse error:  syntax error, unexpected T_CONSTANT_ENCAPSED_STRING, expecting T_STRING or T_VARIABLE or '{' or '$' 
```

你应该这样做：

```
Class HelloWorld
{   
  public $word = 'hi';

  public function printWord()  
  {    
    echo $this->word;    
  }    
}

$word = new HelloWorld();
$word = $word->printWord(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T17:47:48.237

`print`是 PHP 中的保留字。

你需要给你的方法一些其他的名字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T17:51:22.000

替换`echo $this->"hi";`为`echo "hi";`，调用`$word->function();`而不是`$word = function();`重命名`print`为其他名称

# java - 在 Ruby 中加密和在 Java 中解密 - 为什么它不起作用？

> ID：11266556
> 
> 赞同：8
> 
> 时间：2012-06-29T17:46:35.973
> 
> 标签：java, ruby, encryption

我究竟做错了什么？我希望 Java 程序打印“私有”。我的目标是尝试用 Java 编写 MessageEncryptor.decrypt ruby​​ 方法。

Ruby 加密（大部分代码取自 MessageEncryptor，但未修改为 Marshal），但我已将其提取出来，以便更容易查看发生了什么：

```
require 'openssl'
require 'active_support/base64'

@cipher = 'aes-256-cbc'
d = OpenSSL::Cipher.new(@cipher)
@secret = OpenSSL::PKCS5.pbkdf2_hmac_sha1("password", "some salt", 1024, d.key_len)
cipher = OpenSSL::Cipher::Cipher.new(@cipher)

iv = cipher.random_iv

cipher.encrypt
cipher.key = @secret
cipher.iv = iv

encrypted_data = cipher.update("private")
encrypted_data << cipher.final

puts [encrypted_data, iv].map {|v| ::Base64.strict_encode64(v)}.join("--") 
```

哪个打印：

tzFUIVllG2FcYD7xqGPmHQ==--UAPvdm3oN3Hog9ND9HrhEA==

Java代码：

```
package decryptruby;

import java.security.spec.KeySpec;
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;
import org.apache.commons.codec.binary.Base64;

public class DecryptRuby {    
    public static String decrypt(String encrypted, String pwd, byte[] salt)
            throws Exception {

        String[] parts = encrypted.split("--");
        if (parts.length != 2) return null;

        byte[] encryptedData = Base64.decodeBase64(parts[0]);
        byte[] iv = Base64.decodeBase64(parts[1]);

        SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        KeySpec spec = new PBEKeySpec(pwd.toCharArray(), salt, 1024, 256);
        SecretKey tmp = factory.generateSecret(spec);
        SecretKey aesKey = new SecretKeySpec(tmp.getEncoded(), "AES");

        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, aesKey, new IvParameterSpec(iv));

        byte[] result = cipher.doFinal(encryptedData);
        return result.toString();
    }

    public static void main(String[] args) throws Exception {
        String encrypted = "tzFUIVllG2FcYD7xqGPmHQ==--UAPvdm3oN3Hog9ND9HrhEA==";

        System.out.println("Decrypted: " + decrypt(encrypted, "password", "some salt".getBytes()));
    }
} 
```

哪个印刷

解密：[B@432a0f6c

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-29T17:52:03.130

这就是问题——或者至少*是一个*问题：

```
byte[] result = cipher.doFinal(encryptedData);
return result.toString(); 
```

您正在调用`toString()`一个字节数组。数组不会覆盖`toString()`. 如您所见，那根本不会给您想要的东西。相反，您需要编写如下*内容*：

```
return new String(result, "UTF-8"); 
```

...但是您需要知道在加密之前使用什么*编码*将原始字符串转换为字节。从 Ruby 代码中我不清楚使用了什么编码，但如果你可以明确地说明它（最好使用 UTF-8），它会让你的生活更轻松。

简而言之，我*怀疑*这个问题根本与加密无关——它与将文本转换为 Ruby 中的字节，然后将相同的字节序列转换回 Java 中的字符串有关。

当然，加密也可能失败*，*但那是另一回事。

# imagemagick - 使用 Image Magick 创建具有固定颜色图的 GIF 图像

> ID：11266566
> 
> 赞同：5
> 
> 时间：2012-06-29T17:47:36.627
> 
> 标签：imagemagick, quantization, color-mapping

我想用指定的颜色图保存其他图像的 .gif 转换。Image Magick 中的“-remap cmap.gif”选项

示例：convert -remap cmap.gif input.png output.gif

确实使用 cmap.gif 中的指定颜色处理 input.png，但它会更改输出颜色图中的顺序。有没有办法强制 Image Magick 使用完全相同的颜色图？

我正在尝试将新图像添加到接受 .gif 文件输入但使用固定颜色图但无法更改单个图像的颜色图的古老显示程序中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T19:43:28.423

`+dither`添加参数有帮助吗？

```
convert  input.png  -remap cmap.gif  +dither  output.gif 
```

# opengl - glGenBuffers() 因分段错误而崩溃。(C++/GLFW/GLEW)

> ID：11266567
> 
> 赞同：11
> 
> 时间：2012-06-29T17:47:40.097
> 
> 标签：opengl, crash, segmentation-fault, glew, glfw

因此，在我的项目中，我使用一个单独的类来创建名为 Buffer.cpp 的缓冲区。这是构造函数

```
#define GLEW_STATIC
#define GLEW_NO_GLU
#define GLFW_NO_GLU

#include "GL/glew.h"
#include "GL/glfw.h"

Buffer::Buffer(GLenum _type, const void *data, GLsizei _size, GLenum usage) :  type(_type), size(_size)
{
  ...

  //Generate Buffer
  glGenBuffers(1, &buffer);

  ...
} 
```

以及成员的定义：

```
GLuint buffer;
const GLsizei size; 
const GLenum type;
Buffer(GLenum, const void*, GLsizei, GLenum); 
```

问题是，当我尝试使用例如此命令生成缓冲区时：

```
Buffer vBuffer(GL_ARRAY_BUFFER, vertexPositions, sizeof(vertexPositions), GL_STATIC_DRAW); 
```

程序在 glGenBuffers() 处崩溃，终止状态为“-1073741819”。我尝试调试程序，这就是我得到的：

```
Program received signal SIGSEGV, Segmentation fault. 
```

我的卡支持 OpenGL 1.5，所以情况并非如此。

还值得注意的是，我自己编译了一个静态 glew 库。

**编辑：**我终于解决了这个问题。问题是我在创建 OpenGL 渲染上下文之前调用了 glewInit() 。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-03T18:07:50.630

所以你的问题是你在调用 glewInit() 之后创建了 OpenGL 上下文 - 因此 glewInit() 无法正确设置 GL 入口点。

在这种情况下，glewInit() 可能确实返回了错误代码。您是否正在验证函数的错误代码？它应该返回 GLEW_OK。

# eclipse - 无法在 Eclipse 中使用嵌入式 Tomcat 运行 mavenized GWT 应用程序

> ID：11266568
> 
> 赞同：0
> 
> 时间：2012-06-29T17:47:48.327
> 
> 标签：eclipse, spring, gwt, maven

我有一个我一直在研究的概念证明 GWT 2.4 / Spring 3.1 / Maven 3 / Eclipse Indigo 项目。我能够使用嵌入式 Jetty 服务器在开发模式下运行应用程序。我能够创建一个战争（mvn 包在 的帮助下`gwt-maven-plugin`）并在已安装的 Tomcat 服务器上运行该应用程序。但是当我尝试时`Run as > Run on Server`，它不会使用/复制生成/编译的 JavaScript。当我转到`wtpwebapps`目录时，除了生成/编译的 JavaScript 之外，一切都在那里。生成/编译的 JavaScript 似乎位于 maven 目标目录中的正确位置，但是将应用程序代码复制到 wtpwebapps 目录的 eclipse 进程没有拾取它。

我不确定我是否需要提供更多信息来解决此问题，但感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:26:27.357

您可以使用`com.google.gwt.core.ext.ServletContainerLauncher`嵌入式 Tomcat API 自定义，或者更简单地在 Tomcat 中运行您的服务器代码（使用 WTP 或 tomcat7-maven-plugin），然后在`-noserver`模式下运行 DevMode。

请参阅[https://developers.google.com/eclipse/docs/faq#gwt_with_maven](https://developers.google.com/eclipse/docs/faq#gwt_with_maven)和[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT)的

我在[https://github.com/tbroyer/gwt-maven-archetypes](https://github.com/tbroyer/gwt-maven-archetypes)
中使用第二种方法 原型现在使用 Jetty，但我在基于原型的项目中成功使用了 tomcat7-maven-plugin（有太多技巧阻止我将其设置为原型中的默认值；仅由于项目的多模块性质才需要这些技巧；但 Jetty 也有技巧）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T15:43:52.460

我在我的 eclipse maven 项目中遇到了与 GWT-dev 2.8.0-beta1 和 jetty 9 类似的问题。由于 GWT-dev jar 直接在其 jar 中包含 Jetty 和其他代码（这很糟糕），因此它与我在项目中导入的 jetty 冲突。解决方法是创建一个单独的模块，仅用于运行超级开发模式，导入 GWT-dev 和我的项目代码，但不包括码头罐子。然后我通过下面的 main 运行超级开发模式。这样，超级开发模式就可以在没有看到我的码头库的情况下运行。

```
import com.google.gwt.dev.codeserver.CodeServer;

public class SuperDevModeMain {

  public static void main(String[] pArgs) throws Exception {
    System.out.println("Starting management-station-web-sdm!");
    String[] options = "-port 9876 com.something.ms.web.MsWeb".split(" ");
    CodeServer.main(options);
  }
} 
```

# jquery - 当内容展开时，在 jQuery 动画期间展开 iframe

> ID：11266574
> 
> 赞同：3
> 
> 时间：2012-06-29T17:48:12.407
> 
> 标签：jquery, html, css, jquery-ui, iframe

我正在开发一个用户仪表板项目，用户可以在其中与小部件进行交互（非常类似于 iGoogle 仪表板）。我正在使用 jQueryUI portlet 来保存 iframe。我遇到的问题是，当 iframe 中的内容使用 jQuery 动画展开时，我想实时调整 iframe 的大小。例如，我在 iframe 中有一个自定义手风琴控件。当用户单击面板以展开手风琴时，我调用 slideDown() 函数来显示内容。当 slideDown() 动画完成后，我根据身体的新高度调整 iframe 的大小。结果是手风琴的内容向下滑动，直到它们在滑动动画期间超出小部件的范围。动画完成后，调整大小会处理新的小部件高度，一切看起来都很好。这是一个非常不稳定的动画，我想调整 iframe 的大小，使其在 slideDown() 动画期间扩展到 iframe 的主体高度。在幻灯片动画期间，如何根据身体高度扩展 iframe？

这是我目前正在使用的代码。

```
// This code gets fired on an accordion panel click event.
content.slideDown(100, function ()
{
    parent.expandContainer('panel1', $('body').height());
});     

// This code resides in the parent page hosting the iframes.
function expandContainer(elementId, height)
{
    $('#' + elementId).children('.content').find('iframe').css('height', height + 'px');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:16:00.643

有可能，您必须制作一个手风琴才能获得执行动画的*步骤事件*。

我创建了一个动画框。如果盒子变大或变小，*step-event*调用函数*resizeIframe(height)*。该函数再次调用父文档中的同名函数*resizeIframe(height)*。试试这个演示：

[http://algorhythm.de/tools/resizeable-iframe/index.html](http://algorhythm.de/tools/resizeable-iframe/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T15:48:12.283

jquery 手风琴在其 API 中有一个事件，当动画完成时会触发该事件：

> 在面板被激活后触发（动画完成后）。 [http://api.jqueryui.com/accordion/#event-activate](http://api.jqueryui.com/accordion/#event-activate)

使用此事件触发 iframe 调整大小对我来说很好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-09T20:01:09.950

根据我的研究，iframe 无法扩展。必须给它们一个固定的宽度和高度。

# google-apps-script - 应用程序脚本 scriptdb 是否有延迟因素？

> ID：11266575
> 
> 赞同：0
> 
> 时间：2012-06-29T17:48:18.563
> 
> 标签：google-apps-script

我有一个脚本，它将记录添加到 ScriptDB 数据存储中，然后立即查询所有记录并显示计数。90% 的情况下，显示的计数会按预期递增。然而，有 10% 的时间，计数不会增加。然后在下一次调用时计数为 +2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:00:04.097

ScriptDb 仍处于“实验”模式，如果您反复遇到这种情况，我想您应该在[问题跟踪器上提出问题。](http://code.google.com/p/google-apps-script-issues/issues/list)

# javascript - 如何在 JavaScript 中定位 Android < 3.0 用户代理

> ID：11266581
> 
> 赞同：0
> 
> 时间：2012-06-29T17:48:46.247
> 
> 标签：javascript, android, jquery

我怎样才能专门`target Android < 3.0`使用香草 JS 或 jQuery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:00:34.763

```
var start = navigator.userAgent.indexOf("Android ");
var majorversion = navigator.userAgent.substr(start+8,1)
if (majorversion < 3) { .... } 
```

正则表达式也可以工作，实际上正则表达式会更好，因为当有 Android 版本 10、11 等时，此代码将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T15:40:37.600

最佳实践是检测可用功能而不是特定的浏览器/操作系统版本。您可以为此使用[Modernizr 。](http://modernizr.com/)

如果你真的需要检测 Android < 3.0，正如[NoBugs](https://stackoverflow.com/questions/11266581/how-to-target-android-3-0-user-agent-in-javascript#answer-11266730)所说，最好使用正则表达式：

```
var majorversion = navigator.userAgent.match(/Android (\d+)\./i);
var isoldandroid = (majorversion != null && parseInt(majorversion[1]) < 3);
if (isoldandroid) { ... } 
```

# asterisk - 我在哪里可以看到从 Asterisk AMI 执行的“Originate”命令

> ID：11266587
> 
> 赞同：1
> 
> 时间：2012-06-29T17:49:01.487
> 
> 标签：asterisk, asteriskami

我正在调整简单的应用程序，除其他外，它应该能够使用 Asterisk AMI Originate 命令呼叫另一方。

我被卡住了，我相信我的起源命令是错误的。

当我使用普通手机时，我在哪里/如何查看 Asterisk 创建的 Originate 命令日志，以便将其与我手工制作的手机进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:53:16.923

使用网络嗅探器，例如[tcpdump](http://www.tcpdump.org)或[wireshark](http://www.wireshark.org)，并捕获进出 asterisk 的数据包。默认情况下，它使用 5038/tcp。检查您的[manager.conf](http://www.voip-info.org/wiki/view/Asterisk%20config%20manager.conf)文件，并查找**bindaddr**和**端口**选项以确保您捕获正确的流量。

如果您使用的是 ssl (sslenable=yes)，那么您必须使用您的 ssl 密钥配置 wireshark，以便它可以解密流量或仅使用普通 tcp（无 ssl）进行调试，然后切换到 ssl。

您应该看到**Action: Originate**进入星号，以及星号响应和相关事件。查找操作的**ActionID**参数，以便您可以跟踪与每个发出的操作对应的响应和事件。

考虑到异步发起（async：true）将在星号收到操作后立即返回响应，但随后它将发送异步事件以通知调用状态（一旦完成）。另一方面，当使用 async: false 时，将发出调用并且响应将具有状态。

有关发起操作的更多资源：

*   [http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Originate](http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Originate)
*   [https://wiki.asterisk.org/wiki/display/AST/ManagerAction_Originate](https://wiki.asterisk.org/wiki/display/AST/ManagerAction_Originate)

与异步参数有关的另一个问题： [Asterisk origin response says succeeded queued but no more](https://stackoverflow.com/questions/10940113/asterisk-originate-response-says-successfully-queued-but-nothing-more)

希望能帮助到你！

**编辑**：Asterisk 不会创建发起命令，但会根据传入的发起操作或[调用文件](http://www.voip-info.org/wiki/view/Asterisk+Call+Files)拨打目标（通道） ，因此您的应用程序（ami 客户端）将发出发起操作，然后星号将对它做出反应通过打电话。如果您的呼叫来自电话，则呼叫更有可能是由[dialplan中的](https://wiki.asterisk.org/wiki/display/AST/Dialplan+Fundamentals)[dial()](http://www.voip-info.org/wiki/view/Asterisk+cmd+Dial)命令发起的。

# c++ - 在 VS2005 中无需重新编译即可修补二进制文件

> ID：11266590
> 
> 赞同：0
> 
> 时间：2012-06-29T17:49:19.263
> 
> 标签：c++, visual-c++, visual-studio-2005

我有一个问题，我可能在我的头上，希望有人可以帮助我。我的 C++ 技能比较欠缺，但我愿意学习。

我在这里有一个 Visual Studio 2005 C++ 项目，它为我们使用的软件生成一个 DLL。问题是，我的代码比客户端使用的代码稍新，此时更新客户端是不可能的。

我需要做一些更改（主要是注释掉一些函数和调用，更改一些值，仅此而已）。通常我会更改代码并编译，但这给了我一个与客户端不兼容的二进制文件（因为它们已经过时了）

我有生成二进制文件的*最*兼容的代码，以及二进制文件本身。肯定有某种方法可以用我的更改来修补现有的 DLL，而无需实际编译项目吗？我从来没有做过任何二进制补丁。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:23:22.747

DLL 实际上是为解决您描述的问题而设计的，即如何在不重新编译整个项目的情况下修复客户手中的产品？DLL 建立了一个二进制边界，您可以简单地将其换出。

*不幸的是，我认为最好的方法是重新编译 DLL。*希望你在下面听到我的声音。:)

即使您的代码比客户端的代码更新，您需要维护的接口也在 .def 文件中定义。因此，只要您不破坏 .def 文件中定义的函数的原始接口契约，您的代码库就可以与客户端的完全不同，这无关紧要。

[http://msdn.microsoft.com/en-us/library/d91k01sh(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d91k01sh(v=vs.80).aspx)

事实上，您可以在 .def 文件中添加更多功能，只要旧功能（及其签名）的原始顺序不变，您就不会破坏客户的应用程序。这就是 Windows 如何将更新的 DLL 发送给他们的（相当大量的）客户端。

# jquery - jQuery悬停多个项目

> ID：11266593
> 
> 赞同：1
> 
> 时间：2012-06-29T17:49:25.930
> 
> 标签：jquery

所以我有四个相邻的圆圈，当您将鼠标从一个移到另一个时，此代码将激活。但我只希望它在您离开/进入任何圆圈时激活，而不是在您从一个 .circle 移动到另一个时激活。谢谢各位！

```
 $('.circle').hover(
    function () {
        $(this).parent().animate({marginLeft: '-=25px'}, 1000);
    },
    function () {
        $(this).parent().stop(true, true).animate({marginLeft: '+=25px'}, 1000);
    }
 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:11:17.547

看看这个小提琴...... [http://jsfiddle.net/WxNdN/3/](http://jsfiddle.net/WxNdN/3/)

e.relatedTarget 应该给你你输入或离开的元素。在触发动画之前检查它的类以查看它是否是一个圆圈。

```
$('.circle').hover(
    function (e) {

        if(!$(e.relatedTarget).hasClass('circle'))
        {
            console.log('entering');
        }
    },
    function (e) {

        if(!$(e.relatedTarget).hasClass('circle'))
        {
            console.log('leaving');
        }
    }
 );​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:55:23.580

在没有看到 html 的情况下，我猜您需要将所有 circle 类元素包装在容器中，然后将悬停事件放在容器上。所以像

```
<div id="container">
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
</div> 
```

进而

```
$('#container').hover(functions...) 
```

然后您可能必须进行更改`$(this).parent()`，但如果不查看您当前的 HTML 结构就很难判断。

# ios - UIScrollView 莫名其妙地移出位置

> ID：11266600
> 
> 赞同：1
> 
> 时间：2012-06-29T17:50:08.517
> 
> 标签：ios, uiscrollview, positioning

我有一个 UIScrollView 通过 Interface Builder 添加和定位，作为导航控制器堆栈上的视图控制器的一部分。当我将一个新的视图控制器推送到堆栈上，然后弹出该新的视图控制器时，原始视图中的 UIScrollView 已经向上漂移了 52 个像素。

这只发生在设备上，而不是模拟器上。

有什么想法可能导致这种情况吗？我可以通过调用 viewWillAppear/viewWillAppear 中的重新定位来追溯修复它，但由于某些原因，在极少数情况下，即使这不起作用，所以我真的很想解决根本原因。谢谢！

回应评论请注意：我将导航栏隐藏在推送的视图控制器中，而不是原始视图控制器中。另请注意，原始视图控制器上还有其他几个 UIView 元素，但只有 UIScrollView 移动了位置。

更新：不在推送视图控制器中隐藏导航栏对 UIScrollView 问题没有影响 - 但感谢评论者的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:23:03.433

修复：如果导航栏隐藏在视图控制器上，并且您不希望任何子视图（您通过 Interface Builder 添加）以意想不到的方式自动重新定位，请确保子视图上的支柱设置为固定.

# c++ - 为什么这里需要静态

> ID：11266601
> 
> 赞同：1
> 
> 时间：2012-06-29T17:50:15.110
> 
> 标签：c++, static, static-methods

我正在使用[curl 库](http://curl.haxx.se/download.html)，它通过带有下面原型的回调函数向我返回数据

```
size_t write_data(void * data, size_t size, size_t nmemb, void * userpointer); 
```

我注意到如果我在我的类中声明一个适合这个原型的函数

```
//file Dialog.h
class Dialog : public QDialog
{
    private:
    int new_data_callback(void * newdata, size_t size, size_t nmemb, QByteArray * buffer); 
} 
```

如果我尝试在我的**Dialog.cpp中使用它**

```
curl_easy_setopt(curl_handle,CURLOPT_WRITEFUNCTIION, new_data_callback); 
```

我收到一个错误

```
Invaid use of member (did you forget the '&'?) 
```

如果我添加`static`到我的函数声明中，它会编译。

```
static int new_data_callback(void * newdata, size_t size, size_t nmemb, QByteArray * buffer); //ok 
```

**问题**

为什么在这种情况下需要静态？

PS：以 Q 开头的类，例如 QDialog 是[QT](http://qt.nokia.com/downloads/)的一部分，不会影响问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T17:54:10.293

因为没有实例就不能调用非静态方法。由于`new_data_callback`是回调，因此将实例附加到它的唯一方法是通过参数。使其`static`消除实例限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:02:58.180

这是因为函数是如何被调用的。非静态类函数需要调用附加信息。即*this*指针。当您传递`new_data_callback`给`curl_easy_setopt`此实例时，未提供特定信息。因此，curl 没有足够的信息来调用该函数。

如果类函数定义为静态，则根据定义，它不能访问类的非静态成员。因此它不需要上面的附加实例信息，可以传递给`set_easy_setopt`

# java - Java += 含义

> ID：11266603
> 
> 赞同：-4
> 
> 时间：2012-06-29T17:50:18.507
> 
> 标签：java, operators

我在一段代码中看到了这个符号/运算符：

```
a+=1; 
```

但我无法弄清楚它的作用。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T17:51:10.797

它相当于

```
a = a + 1; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-29T17:57:03.670

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)：

> 形式的复合赋值表达式`E1 op= E2`等价于`E1 = (T) ((E1) op (E2))`，其中`T`是 的类型`E1`，除了`E1`只计算一次。

如果左侧有副作用，最后一句话很重要：

```
array[i++] += 1; 
```

这*不*等同于：

```
array[i++] = array[i++] + 1; 
```

第一个表达式将增加`i`一次。第二个将增加`i`两次，并将右侧的值分配给与`array`第一个表达式不同的元素。

我应该注意，尽管您经常发现它们被使用，但这些副作用语句并不是好的编程形式。

强制转换也很重要，因为 的类型`(E1) op (E2)`可能与 . 的赋值不兼容`E1`。例如，如果`a`是 类型`short`，`a++`则不等价于`a = a + 1`。后者不会编译，因为类型`a + 1`是`int`并且不能在没有强制转换的情况下分配给`short`变量。这就是为什么这种情况下的规范说这`a++`相当于`a = (short) ((a) + (1))`. 如果`a`是 type`char`或，情况也是如此`byte`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-29T17:51:01.763

```
x += y; 
```

相当于

```
x = x + y; 
```

其他数学运算也有类似的运算符：-=、*=、/=。例如：

```
x *= y; 
```

相当于

```
x = x * y; 
```

（编辑：以上假设 x 中没有“副作用”；即，前置或后置运算符。编辑以反映 Ted Hopp 的观点）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-29T17:50:55.110

它是以下内容的简写：

```
a = a + 1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T17:51:10.297

这意味着`a = a + 1`即增量`a`。

# node.js - Socket.io 错误

> ID：11266608
> 
> 赞同：7
> 
> 时间：2012-06-29T17:50:34.703
> 
> 标签：node.js, socket.io

我正在尝试使用 Socket.io 模块运行 Nodejs。我已经安装了最新版本的 Nodejs，并使用命令 npm install socket.io 从以管理员身份打开的命令提示符（我在 Windows 7 中）安装了 socket.io 安装似乎完成没有任何问题但是当我尝试运行以下测试程序：

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

我收到此错误：

```
module.js:340
    throw err;
Error: Cannot find module 'socket.io'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (C:\xampp\htdocks\HTML5Game\impact\app.js:1:72)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function .Module._load (module.js:312:12)
    at Module.runMain (module.js:487:10) 
```

在我的搜索中，我发现了一些关于依赖问题的事情，以及一些关于 socket.io 和 Nodejs 版本之间不兼容的建议，但两者都在谈论旧版本的 socket.io 和 Node Thanks。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-29T18:02:35.763

```
cd app
rm -rf node_modules
npm cache clean
npm install 
```

### 解释

```
cd app 
```

转到您的应用程序目录

```
rm -rf node_modules 
```

删除当前安装的模块

```
npm cache clean 
```

删除你的 npm 缓存，（一些错误是由这个引起的）

```
npm install 
```

安装您的`package.json`. 如果你没有`package.json`，你可以像这样安装一个特定的模块

```
npm install <module_name> 
```

例子

```
npm install socket.io 
```

在您的情况下，如果您不知道 a`package.json`是什么，请在继续使用 nodejs 之前在[此处阅读它。](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CFwQFjAD&url=http://howtonode.org/introduction-to-npm&ei=Y_TtT8LNCYrTrQf5g5C9DQ&usg=AFQjCNGXna2CS2oSHo6KwcpVBsZ5efLHSQ&sig2=kOx_A6cUtL0WUEV29K0NAQ)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T11:53:52.497

我必须通过以下方式解决这个问题。

**1）**我将一个测试程序放在以下文件夹中。

> c:\程序文件\nodejs\node_modules

在这种情况下，源代码如下。

```
var io = require('socket.io').listen(80); 
```

**2）**我指定了socket.io的完整路径。

> c:>dir /x[输入]

然后我键入以下命令来获取“ *progra~1* ”。

```
var io = require("c:/progra~1/nodejs/node_modules/socket.io").listen(80); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T11:22:36.430

如果您想在多个项目中使用模块或拥有干净的项目目录，您可以在 npm 命令中添加“-g”参数。像这样：

```
npm install socket.io -g
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-12T09:48:00.250

我有同样的问题。您唯一需要做的就是不在您安装 node.js 的文件夹中运行“npm install socket.io”，而是在您启动节点服务器文件的文件夹中运行。例如，我有带有代码的文件 server.js `

```
var io = require('socket.io').listen(
io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
  console.log(data);
});
}); 
```

` 就在同一个文件夹中运行 'sudo npm install socket.io' ，一切都会好起来的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T17:14:56.993

为了将来参考，对于那些想知道真正问题是什么的人，有一个两年前的 npm 错误尚未解决：[https ://github.com/isaacs/npm/issues/1341](https://github.com/isaacs/npm/issues/1341)

问题是，如果您的顶级 node_modules 目录中已经安装了 socket.io 的依赖项，那么 npm 不会为您安装的任何依赖它的模块安装该依赖项。

当您遇到麻烦时，您真正需要做的就是以下（替换`socket.io`为给您带来麻烦的任何模块）：

```
mv node_modules node_modules.bak
npm install socket.io
mv node_modules/socket.io node_modules.bak
rmdir node_modules
mv node_modules.bak node_modules 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-28T19:27:05.690

找不到模块“socket.io”意味着您的节点模块中没有安装“socket.io”模块。

只需运行以下命令：

```
npm install socket.io 
```

如果你运行：

```
npm install socket.io --save 
```

它将更新您的 package.json 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-30T19:54:07.303

我修复它：

```
npm install --save socket.io 
```

它运行！

这就是他们在[http://socket.io/get-started/chat/中的做法](http://socket.io/get-started/chat/)

# sql-server - 如何规避 Sybase ASE 和 SQL Server 的最大绑定值数

> ID：11266609
> 
> 赞同：0
> 
> 时间：2012-06-29T17:50:38.083
> 
> 标签：sql-server, jdbc, sap-ase, jooq, bind-variables

我正在为表单的大型条件运行[jOOQ集成测试](http://www.jooq.org)

```
WHERE x IN (:1, :2, :3, :4, ..., :3001, :3002) 
```

`IN`上面的示例描述了一个条件中有许多绑定变量。Oracle 在 IN 条件的括号之间有一个众所周知的限制，即 1000 个值（绑定值或内联值）。解决方法很简单，只需要写：

```
WHERE x IN (:1, :2, :3, :4, ..., :1000) OR x IN (:1001, ...) 
```

另一方面，Sybase ASE 15.5 和 SQL Server 2008 R8 似乎对绑定值的数量有总体限制：Sybase ASE 分别为 2000，SQL Server 分别为 2100。换句话说，似乎没有办法使用这两个数据库的绑定值来拆分/转换上述条件。除了内联所有绑定值之外，有没有办法绕过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:57:24.383

如果你创建了一个表类型，然后说`IN (SELECT column FROM @variableThatIsMyTableType)`那么你就完全不受限制了。

我不会重复 MSDN - 这里涵盖了[表类型和表值参数](http://msdn.microsoft.com/en-us/library/bb675163.aspx)。

然后生成的 SQL 类似于：

```
DECLARE @variableThatIsMyTableType mySchema.myTableType
INSERT @variableThatIsMyTableType VALUES (1)
INSERT @variableThatIsMyTableType VALUES (2)
EXEC proc @variableThatIsMyTableType 
```

但是，当从 C# 和 SqlClient 提交时，它会创建所谓的“琐碎计划” - 您可以[在此处](http://sqlskills.com/BLOGS/BOBB/post/The-interesting-case-of-TVPs-and-plan-compilation.aspx)和[此处](http://sqlskills.com/BLOGS/BOBB/post/TVPs-and-plan-compilation-the-reprise.aspx)阅读有关 TVP 和琐碎计划的信息。通过 SQL 直接执行此操作会导致缓存计划，因此您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T07:50:31.667

我们最终在[jOOQ](http://www.jooq.org)中实现这一点的方式是在遇到任何限制时使用 a`ControlFlowException`中止带有绑定值的 SQL 渲染。限制是：

*   SQLite：999
*   入口 10.1.0：1024
*   Sybase ASE 15.5：2000
*   SQL Server 2008：2100

我们也在这里写过博客：

*   [http://blog.jooq.org/2013/04/28/rare-uses-of-a-controlflowexception](http://blog.jooq.org/2013/04/28/rare-uses-of-a-controlflowexception)

一旦达到这个限制，`ControlFlowException`就会在查询渲染站点捕获它，在那里它只是用内联的所有绑定值重新渲染 - 这总是有效的（当然，直到你达到查询大小限制，如果有的话）。

我们假设内联绑定值和重复的硬解析在这些情况下是可以的，因为执行计划可以真正与这种高度动态的 SQL 一起重用的机会很小。

# c# - 在 WPF 中更新树视图控件

> ID：11266612
> 
> 赞同：1
> 
> 时间：2012-06-29T17:50:54.957
> 
> 标签：c#, wpf

在我的应用程序中，只要将对象放在画布上，我就会将其存储在树中。现在，我正在尝试编写一个方法来删除一个对象，这很好，但我还需要从树中删除该特定对象。每个对象都有一个唯一的 id，因此我可以在树中找到它并从树中删除它，同时从画布中删除它。

为了在树中找到一个节点，我计划在每个节点（item.Tag）中存储 ID，但是，我面临两个问题：

1.  如何从不同的类访问节点的详细信息？ *myTreeObj.Items.Tag 无法正常工作。*

2.  当我在树中循环时，myTreeObj.Items.Count 显示的项目比我看到的更多。

任何意见将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:05:44.467

在 WPF 中，TreeViews 实际上就是他们所说的：数据结构的视图。在 WinForms 中，您必须上下爬取 TreeView 的节点并手动添加或删除它们。在 WPF 中，正确的方法是从实际数据层次结构（TreeView 绑定到的数据层次结构）中添加或删除项目，并使用 PropertyChanged 或 CollectionChanged 通知来告诉 TreeView 自动更新自身。

你试图做的事情可能是可能的，但这将是一场艰苦的战斗，事情不会按预期进行。WPF 真的希望您使用数据绑定，而任何其他方法都会让您头疼。

这篇文章可能是开始了解如何使用 WPF TreeView 的一个有用的地方：http: [//joshsmithonwpf.wordpress.com/2008/05/24/the-wpf-treeview-is-a-view-of-a-树/](http://joshsmithonwpf.wordpress.com/2008/05/24/the-wpf-treeview-is-a-view-of-a-tree/)

编辑：作者的原始文章实际上更有帮助： http: [//www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)

# java - 以非顺序方式进行 XQuery 迭代

> ID：11266623
> 
> 赞同：0
> 
> 时间：2012-06-29T17:51:26.303
> 
> 标签：java, xml-parsing, xquery

我有一个带有以下标签的 xml 文档

```
 <User>aaaa</User>
          <User>bbbb</User>
          <User>cccc</User>
          <User>dddd</User>
          <User>eeee</User>
          <User>cccc</User>
          <User>uuuu</User> 
```

使用 for 循环对其进行迭代时，数据**未按**顺序排列

例如：

有时得到

```
aaaa
bbbb
cccc
dddd 
```

有时它会这样显示

```
uuuu
bbbb
cccc
dddd 
```

我如何以顺序方式迭代？**或提供任何顺序 xml 解析器的名称**。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:56:30.090

下面是一个示例，其中的结果反映了源 XML 文档中元素的原始顺序：

```
for $x in /*/*
  return
    $x 
```

当对以下文档（提供的 XML 片段，包装到单个顶部元素中以使其成为格式良好的 XML 文档）执行此 XQuery 时：

```
<t>
    <User>aaaa</User>
    <User>bbbb</User>
    <User>cccc</User>
    <User>dddd</User>
    <User>eeee</User>
    <User>cccc</User>
    <User>uuuu</User>
</t> 
```

结果是：

```
<User>aaaa</User>
<User>bbbb</User>
<User>cccc</User>
<User>dddd</User>
<User>eeee</User>
<User>cccc</User>
<User>uuuu</User> 
```

# eclipse - eclipse中的Tomcat用.war生成了一个war文件？扩大

> ID：11266625
> 
> 赞同：0
> 
> 时间：2012-06-29T17:51:47.590
> 
> 标签：eclipse, tomcat, solr

当我在 Eclipse 中使用 tomcat 插件生成 war 文件时，它给了我一个名为 solr.war 的名称？而不是 solr.war。我不明白为什么会有一个额外的问号。也许我做错了什么？谢谢！

PS：我使用的是 Eclipse Indigo、Tomcat 7、Solr 3.6，所以我在这个问题中包含了所有这些标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:17:37.650

您确定该文件是这样命名的（在 Eclipse 之外查看）还是只是一些团队插件向您显示该文件未添加到存储库中？

# php - PHP - 会话未注册

> ID：11266630
> 
> 赞同：3
> 
> 时间：2012-06-29T17:52:00.040
> 
> 标签：php

我试图制作管理面板并且我正在使用`sessions`，但是有问题，会话不起作用，

# 索引.php

```
$r=mysql_fetch_array($result);
$login=$r["login"];
session_register('login');
Header("Location: protected.php"); 
```

# 受保护的.php

```
<?php 
session_start();
if (!isset($_SESSION['login'])) { 
  echo "Not work";
}
else{
  echo "Work";
}
?> 
```

我不知道问题是什么，因为我在 index.php 中注册了会话，但在 protected.php 中没有设置此会话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T17:54:02.687

不要使用`session_register()`. 它在 PHP 5.4.0 中被删除。在 index.php 中，添加`session_start();`到顶部并将您的注册调用替换为`$_SESSION['login'] = 'val';`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:54:50.887

从 5.3.0 开始不推荐使用[session_register()](http://us2.php.net/session_register)，并且从 4.1.0 开始不推荐使用。

相反，使用[$_SESSION[]](http://us2.php.net/manual/en/reserved.variables.session.php)以您引用它的相同格式创建会话变量：

```
$_SESSION['login'] = $r["login"]; 
```

使用这种方法无需初始化`$login`变量，因为结果集中的登录值直接设置为会话变量。

```
<?php // Use of session_register() is deprecated 
$barney = "A big purple dinosaur."; session_register("barney");

// Use of $_SESSION is preferred, as of PHP 4.1.0 
$_SESSION["zim"] = "An invader from another planet.";

// The old way was to use $HTTP_SESSION_VARS 
$HTTP_SESSION_VARS["spongebob"] = "He's got square pants."; ?> 
```

此外，建议[`mysql_fetch_array`](http://us2.php.net/manual/en/function.mysql-fetch-array.php)不要使用，而应使用[MySQLi](http://us2.php.net/manual/en/mysqli-result.fetch-array.php)或[PDO_MySQL](http://us2.php.net/manual/en/ref.pdo-mysql.php)扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T17:55:37.697

`session_register()`已弃用，请阅读此处了解更多信息：

[http://php.net/manual/en/function.session-register.php](http://php.net/manual/en/function.session-register.php)

# java - 使用 StAX 切割 xml 部分并使用 XSLT 处理它们

> ID：11266633
> 
> 赞同：0
> 
> 时间：2012-06-29T17:52:12.397
> 
> 标签：java, xslt, stax

我正在尝试将 xml 切割成多个部分，然后对其进行一些转换。目前我有这个代码：

```
 public class XMLStax_xslt {

        static boolean allowStream = false;

        public static void main(String[] args) throws Exception {
            FileInputStream fis = new FileInputStream("SourceExternalFile.xml");        
            XMLInputFactory xmlif = null;
            xmlif = XMLInputFactory.newInstance();
            Source xslt = new StreamSource(new File("myTransformFile.xslt"));

            StreamFilter filter = new StreamFilter() {
                @Override
                public boolean accept(XMLStreamReader reader) {
                    int eventType = reader.getEventType();

                    if ( eventType == XMLEvent.START_ELEMENT )
                    {
                        String currentTag = reader.getLocalName();
                        if (currentTag.equals("wantedTag"))
                        {
                            allowStream = true;
                        }
                    }
                    if ( eventType == XMLEvent.END_ELEMENT )
                    {
                        String currentTag = reader.getLocalName();
                        if (currentTag.equals("wantedTag"))
                        {
                            allowStream = false;
                        }
                    }               
                    return allowStream;
                }
            };
            XMLStreamReader xmlR = xmlif.createFilteredReader(xmlif.createXMLStreamReader(fis),filter);
            while (xmlR.hasNext())
            {
                TransformerFactory transformerXSLT = TransformerFactory.newInstance();
                Transformer currentXslt = transformerXSLT.newTransformer(xslt);
                currentXslt.transform(new StAXSource(xmlR), new StreamResult("targetFile.xml"));
            }        
            fis.close();
        }   
    } 

```

当线路`return allowStream;`更改为`return true;`. 所以，我需要的只是将我需要的部分发送到转换，因为发送整个 XML 不是一种选择。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:18:01.643

问题是我将字符串传递给变压器，而不是整个节点。改变`XMLStreamReader`就是`XMLEventReader`诀窍。

这是变化：

```
 public static void main(String[] args) throws Exception {
            FileInputStream fis = new FileInputStream("SourceExternalFile.xml");        
            XMLInputFactory xmlif = null;
            xmlif = XMLInputFactory.newInstance();
            Source xslt = new StreamSource(new File("myTransformFile.xslt"));

            XMLEventReader xmlR = xmlif.createXMLEventReader(xmlif.createXMLStreamReader(fis));

            TransformerFactory transformerXSLT = TransformerFactory.newInstance();
            Transformer currentXslt = transformerXSLT.newTransformer(xslt);

            while (xmlR.hasNext())
            {
                XMLEvent xmlEvent = xmlR.nextEvent();
                if ( xmlEvent.equals("wantedTag") )
                {
                    currentXslt.transform(new StAXSource(xmlR), new StreamResult("targetFile.xml"));
                }
            }
            xmlR.close();
            fis.close();
        } 

```

# cqrs - 使用 CQRS 和 EventStore 创建并发

> ID：11266637
> 
> 赞同：4
> 
> 时间：2012-06-29T17:52:45.083
> 
> 标签：cqrs, event-sourcing, neventstore

**基线信息：** 我正在使用外部 OAuth 提供程序进行登录。如果用户登录到外部 OAuth，他们可以进入我的系统。但是，此用户可能尚不存在于我的系统中。这不是真正的技术问题，但我使用 JOliver EventStore 是为了它的价值。

**逻辑：**

1.  我没有为新用户提供指南。我只有一个电子邮件地址。
2.  我在发送命令之前检查我的读取模型，如果用户电子邮件存在，我会发出带有 ID 的登录命令，如果不存在，我会发出带有生成 ID 的 CreateUser 命令。我的问题是新用户的情况。
3.  使用新 ID 在事件存储中进行保存。

**问题：** 假设由于浏览器刷新或在实现与读取模型的一致性之前发生的一些其他异常，在读取模型更新之前以某种方式发出了两个创建命令。没关系，这不是我的问题。

**发生了什么：** 因为新 ID 是一个 Guid 梳，所以事件存储不可能知道这两个 CreateUser 命令代表同一个用户。当他们到达读取模型时，读取模型将知道（因为他们有相同的电子邮件）并且可以合并两条记录或采取其他一些补偿措施。但是现在我的读取模型与事件存储不同步，事件存储仍然认为这是两个独立的实体。

**也许没关系，因为：**

1.  重放事件将对读取模型产生相同的影响，因此应该没问题。
2.  因为这两个命令都是重复的“创建”命令，所以它们应该包含相同的信息，所以我不会在事件存储中丢失任何东西。

谁能说明他们如何处理类似问题？如果需要进行一些补偿操作，读取模型服务是否会在意识到它有重复条目时发出某种补偿命令？有没有我不考虑的更简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T11:17:22.760

你非常接近我认为合适的可能解决方案。如果我可以总结一下，这个场景有点像这样：

*   执行 OAuth 提示。
*   使用阅读模型根据电子邮件地址在经常访问者和新访问者之间做出决定。
*   如果是新访客，请发送 RegisterNewVisitor 命令消息，该消息将被处理并存储在事件存储中。
*   假设有一些并发发生，对于同一个电子邮件地址，会导致两条 RegisterNewVisitor 消息，每条消息都包含系统认为与电子邮件地址关联的密钥。这些键（指南）是不同的。
*   在读取模型中检测此重复键问题并将两个读取模型记录合并为一条记录。

现在，与其合并读取模型中的记录，不如向您的域模型发送 ResolveDuplicateVisitorEmailAddress { Key1, Key2 } ，将其留给域模型（要采取的业务决策的编码形式）来解决这个问题。你甚至可以有一个专门的读取模型来处理这类问题，另一个读取模型只会获得一种 DuplicateVisitorEmailAddressResolved 事件，并将其投影到适当的记录中。

警告语：你问了一个技术问题，我给了你一个技术性的、可能的解决方案。一般来说，我不会应用这种技术，除非我有一些值得投资的业务指标（用户第一次同时登录的频率是多少 - 也许以这种方式解决它只是一种忽略根本原因的方法（flakey OAuth，没有注册新的访问者进程等））。这个问题还有其他技术解决方案，但我想给你一个最接近你已有的解决方案。它们的范围从顺序注册新访问者到保留尚未在读取模型中的访问者的内存投影。

# c++ - 使用分治法找到一个数的第 n 个根

> ID：11266640
> 
> 赞同：1
> 
> 时间：2012-06-29T17:52:52.787
> 
> 标签：c++, algorithm, divide-and-conquer, cmath

我需要有关如何获得某个数字的第 n 个根的帮助。

用户输入数字 n 和他想要根的数字。我需要在没有 cmath 库的情况下使用分而治之的方法来解决这个问题。

这是我的代码还不能工作：

```
#include<iostream>
using namespace std;

float pow(float a,float c){
    if (a == 0)
        return 0;
    else if(a == 1)
        return 1;
    else{
        float p = pow(a,(c/2));
        if(c%2)
            return p*p*a;
        else
            return p*p;
    }
}

int main(){
    float a,b;
    float c;
    cout << "Enter positive number:(base)" << endl;
    do{
        cin >> a;
    }while (a < 0);
    cout << "Enter number: (root)" << endl;
    cin >> b;
    c = 1/b;
    cout << "Result:"<<pow(a,c) << endl;
    system("pause");
    return 0;
} 
```

关于如何解决这个问题的任何想法都将非常有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T18:07:55.847

让我告诉你如何使用分而治之来求平方根。第 n 个根将是相似的。

对于给定的 number ，您需要在和`x`之间搜索它的平方根。除以= 。如果<则您的搜索空间将移动到，否则它将是。如果匹配，则您的平方根为。第 n 个根的类似技术。`0``x``2``x2``x2 * x2``x``x2 -> x``0 -> x2``x2 * x2``x``x2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T17:16:17.913

对于那些不做数值实验的人：使用`<cmath>`函数`sqrt`and `cbrt`(cube-root) 来构造可被 2 和 3 分解的任何根。例如，第 4 个根是`sqrt(sqrt(x))`，第 6 个根是`sqrt(cbrt(x))`。如果您需要一般用途的东西，您可以构造一个适当调用的递归`sqrt`函数`cbrt`。

如果这很重要，我猜这将给出比 更快、更准确的答案`pow`。如果没有，只需使用`pow`.

# javascript - infowindow.setContent 和 OverlappingMarkerSpiderfier 有问题

> ID：11266657
> 
> 赞同：1
> 
> 时间：2012-06-29T17:54:16.717
> 
> 标签：javascript, google-maps-api-3

我一直在玩 OverlappingMArkerSpiderfier

[https://github.com/jawj/OverlappingMarkerSpiderfier](https://github.com/jawj/OverlappingMarkerSpiderfier)

我有一个添加标记的循环，但是每个标记都需要一个 infoWindow 才能将一些独特的文本作为其内容。

如果我执行以下操作：

```
content = '<div id="info">' +
                '<p><b><?php echo $row->Event ?></b></p>' +
                '<p><?php echo $row->Date ?></br>' +
                '<?php echo $row->City . ", " . $row->Country ?></p>' +
                '</div>';

oms.addListener('click', function(myMarker) {
         if(!iw){
            iw = new google.maps.InfoWindow();
         };

       iw.setContent(content);
      //  iw.setContent(myMarker.title);
        iw.open(map, myMarker);
      }); 
```

这只会将最后一个事件放在信息窗口中。

如果我尝试这样做：

```
(function(content, myMarker){
    oms.addListener('click', function(myMarker) {
         if(!iw){
            iw = new google.maps.InfoWindow();
         };

       iw.setContent(content);
      //  iw.setContent(myMarker.title);
        iw.open(map, myMarker);
      });
})(); 
```

...根本不起作用

任何人都可以阐明一些观点。

我没有提到：我对 javascript 比较陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:47:42.493

首先，我会`iw = new google.maps.InfoWindow();`在函数之外设置以避免您的`if(!iw)`检查。

其次，`oms.addListener`适用于所有标记，而不仅仅是一个标记，因此这不应该在您的结果循环中（我假设这是一个 while $row=$results 类型循环）。

要显示正确的内容，您需要`marker.desc = content`在循环中执行类似操作，然后在 addListener 中执行`iw.setContent(myMarker.desc);`

所以是这样的：

```
iw = new google.maps.InfoWindow();

oms.addListener('click', function(myMarker) {
    iw.setContent(myMarker.desc);
    iw.open(map, myMarker);
});

<?php while... { ?>
    ...
    content = '<div id="info">' +
        '<p><b><?php echo $row->Event ?></b></p>' +
        '<p><?php echo $row->Date ?></br>' +
        '<?php echo $row->City . ", " . $row->Country ?></p>' +
    '</div>';
    ...
    marker = new google.maps.Marker({
        ...
        ...
    });
    marker.desc = content;
    oms.addMarker(marker);
<?php } ?> 
```

# jasper-reports - 仅在打印文档时显示条带

> ID：11266658
> 
> 赞同：0
> 
> 时间：2012-06-29T17:54:21.223
> 
> 标签：jasper-reports, ireport, jasperserver

*iReport/JasperReports Server*中是否有内置参数允许我在*JasperReports Server*中显示报告时隐藏波段，但在打印报告时显示波段？*当用户在JasperReports Server*的屏幕上查看报告时，我不想显示我的报告页脚。

# facebook - 在移动浏览器上单击 LIKE BUTTON 时没有 Facebook 评论框

> ID：11266661
> 
> 赞同：0
> 
> 时间：2012-06-29T17:54:34.597
> 
> 标签：facebook, comments, facebook-like, facebook-fbml

大家下午好。

如果我使用普通浏览器，我有一个页面，每次都会弹出评论框。但是，当我转到我的 iPhone 时，没有出现评论框。我搜索了整个 Stack 和 Google，似乎找不到任何东西——也许是因为新问题或在移动设备上测试的人不多？你可以在这里测试它以在 iPhone 上查看： [https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

```
<fb:like href="https://developers.facebook.com/docs/reference/plugins/like/" layout="button_count" show_faces="false" action="like" colorscheme="light"></fb:like> 
```

如果有人有任何想法，请告诉我 - 在此先感谢！

丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:51:52.283

我所经历的是，如果您的页面上有一个 facebook 评论框，那么如果从普通浏览器查看，点赞按钮会欺骗评论弹出。

# multithreading - 如何将共享数据传递给 Perl 中的线程？

> ID：11266662
> 
> 赞同：1
> 
> 时间：2012-06-29T17:54:44.873
> 
> 标签：multithreading, perl

```
use threads;
use threads::shared;

sub test {
    my $s :shared = 22;
    my $thread = threads->new(\&thrsub);

    $thread->join();
    print $s;

}

sub thrsub {
    $s = 33;
}

test; 
```

为什么线程中没有共享数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T18:00:24.997

它共享变量，但您访问的变量与您共享的变量不同。（`use strict;`会告诉你在这种情况下有不同的变量。总是使用`use strict; use warnings;`）解决方法是使用单个变量。

```
my $s :shared = 22;

sub test {
    my $thread = threads->new(\&thrsub);
    $thread->join();
    print $s;
}

sub thrsub {
    $s = 33;
}

test; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T18:00:08.650

你误解了什么`threads::shared`。它不允许跨词法范围访问变量。如果要`thrsub`影响`$s`，则必须在创建线程时传递对它的引用。

```
use strict; use warnings;
use threads;
use threads::shared;

sub test {
    my $s = 22;
    my $s_ref = share $s;
    my $thread = threads->new(\&thrsub, $s_ref);

    $thread->join();
    print $s;

}

sub thrsub {
    my $s_ref = shift;
    $$s_ref = 33;
    return;
}

test; 
```

# jsf-2 - 对象持有对 JPA 数据存储库（JSF 集成）的引用时出现 Spring Webflow 序列化错误

> ID：11266664
> 
> 赞同：1
> 
> 时间：2012-06-29T17:54:55.487
> 
> 标签：jsf-2, primefaces, spring-webflow, spring-data-jpa

Spring Webflow：**2.3.1**
Spring Data：**1.0.2**
JSF：**2.1.9**
Primefaces：**3.3.1**

我正在尝试将 Spring Data JPA Repositories 与 JSF DataModel 结合起来，在这种情况下，Primefaces 与 LazyDataModel。这发生在使用 Spring Webflow 将 Spring 与 JSF 集成的 WebApp 中。

问题是当我在 Spring Webflow 的 ViewScope 中使用 LazyDataModel 中的 JpaRepository 时：

* * *

> 无法序列化流程执行；确保存储在流或闪存范围中的所有对象都是可序列化的 org.springframework.webflow.execution.repository.snapshot.SerializedFlowExecutionSnapshot.(SerializedFlowExecutionSnapshot.java:75)"

* * *

没有 LazyDataModel 中的 JpaRepository，我无法获得正确的页面并使用 spring 数据的分页模型。我已经找到了有同样问题的人，但不幸的是没有人回答：

[http://forum.springsource.org/showthread.php?116022-Webflow-Serialization-error-on-object-holding-ref-to-JPA-Data-Repository](http://forum.springsource.org/showthread.php?116022-Webflow-Serialization-error-on-object-holding-ref-to-JPA-Data-Repository)

感谢您提前提供帮助

最好的祝福

JSimas

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:45:25.130

已经找到了解决这个问题的方法！

每当您需要在将存在于您的 Spring Webflow 上下文中的对象中添加对 Spring Data JPA 存储库的引用时，只需将 JPA 存储库声明为瞬态！然后您需要在包含瞬态引用的对象中添加以下注释：

*   @Configurable - 标记要即时配置的类（这会给您的应用程序增加一些开销，请注意仅在需要时才使用此注解）
*   @Autowired - 将此添加到瞬态 JPA 存储库

因此，如果您正在扩展 DataModel JSF 基类，并且想要添加一些 JPA 存储库，这里是一个示例：

```
@Configurable
public class XptoLazyDataModel extends LazyDataModel<Xpto> {

    @Autowired
    private transient JpaRepository<Xpto> repository;

 (...)
} 
```

你去吧。希望这可以帮助某人。

最好的祝福

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:28:05.120

我还想到我应该像您一样将瞬态关键字应用于我的 JPA 存储库字段。这解决了问题，但是，我不需要使用@Configurable 或@Autowired。

# .htaccess - htaccess 将整个站点重定向到一个目录

> ID：11266667
> 
> 赞同：0
> 
> 时间：2012-06-29T17:55:21.697
> 
> 标签：.htaccess, redirect

我想做的很简单，但在任何地方都找不到唯一的解决方案。我想将站点中的所有文件和文件夹重定向到一个目录。

将 domain.com/ 和 domain.com/* 重定向到 domain.com/folder/

基本上所有输入 url 的字符串都被重定向到子文件夹，对公众隐藏整个站点，并重定向到带有 ![ip address] 条件的启动页面

# iphone - 当用户没有设置密码时如何在 iPhone 上加密文件？

> ID：11266670
> 
> 赞同：3
> 
> 时间：2012-06-29T17:55:24.767
> 
> 标签：iphone, ios

根据我在 iOS 设备上阅读的有关磁盘加密的[Apple 文档](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW11)和其他文档，似乎为了利用设备的高级加密，用户必须启用密码，以便当您使用 NSDataWritingFileProtectionComplete 属性时将加密。

如果用户没有设置密码但我仍想确保文件已加密怎么办？这种情况有哪些选择？

谢谢！跳蚤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:06:39.953

iOS包含多个用于加密数据的[API 。](http://developer.apple.com/library/ios/documentation/security/Conceptual/cryptoservices/GeneralPurposeCrypto/GeneralPurposeCrypto.html#//apple_ref/doc/uid/TP40011172-CH9-SW14)自动磁盘加密是用户选择的选项，允许用户加密写入设备辅助存储的所有数据。如果无论用户是否选择打开该选项，您都需要加密您的数据，请使用提供的选项之一自行加密数据。

除非您*真的*知道自己在做什么（即使您*认为*自己知道，也可能不知道），通常最好使用提供的 API，您可以期望这些 API 已经由专家编写和审查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:04:50.473

如果您计划在美国境外分发您的应用程序并使用加密，则必须遵守美国商务局的限制。如果您使用 Apple 提供的 API 并且仅使用加密来保护您的内容，您将能够在国际上分发您的应用程序（根据 Apple 的 iTunesConnect 常见问题解答。）

但是，如果您自己编写加密，则必须通过美国政府的审查程序。

我已经编写了不止一个应用程序来加密服务器上的内容，因此即使在将其下载到设备后也可以对其进行保护。

即使 Apple 的加密也无法阻止某人进行未加密的备份或将设备安装为文件系统并获取您的应用程序可能已下载的媒体文件。

因此，为了保护您的内容，您必须自己对其进行加密。而且，您只能在 ram 中解密它，而不是作为闪存中的临时文件（可以从设备复制）。这使得提供加密电影和 PDF 有点挑战。我使用解密网络服务器线程；但是，还有更现代的方法，包括可能效果更好的文件级委托方法。

# python - 遍历 python 列表只给出每个字母

> ID：11266672
> 
> 赞同：0
> 
> 时间：2012-06-29T17:55:29.400
> 
> 标签：python, list, cheetah

我有一个清单。。

```
availablethemes = ['cerulean', 'default', 'journal', 'united'] 
```

我正在尝试将每个项目放在下拉项目列表中

```
<select id="theme" name="theme">
    #for $interface in $availablethemes
         #if $getVar('theme', 'default') == $interface
         <option selected="selected" value="$interface">$interface</option>
         #else
         <option value="$interface">$interface</option>
         #end if
     #end for
 </select> 
```

它是 cheetah 模板文件的一部分，并且列表即将用于配置文件。我遇到的问题是，当它显示它时，它会单独放置每个字母，就好像它不是一个列表一样。它遍历每个字符而不是列表项。有人知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:14:05.947

[将其作为JSON](http://json.org/)存储在您的配置文件中，并在使用前对其进行解码。

```
>>> for i in json.loads('["foo", "bar", "baz"]'):
...   print i, repr(i)
... 
foo u'foo'
bar u'bar'
baz u'baz' 
```

# .net - 自签名证书。底层连接已关闭：无法建立信任关系

> ID：11266674
> 
> 赞同：10
> 
> 时间：2012-06-29T17:55:33.550
> 
> 标签：.net, web-services, security, iis, ssl-certificate

尝试为我们的 Intranet 的 Web 服务站点设置自签名证书。证书本身显示它“正常”，但是当尝试从 Web 服务调用方法时会引发错误，并且在添加 Web 引用时也会发出警告。

以下是确保我提供准确信息的步骤和一些屏幕截图。

Windows 服务器 2003。IIS。该网站是“WebServices.companyName.vmc”

![1](../Images/f03ae4eb45a2da6bc7f846fa47c823a0.png)

这是该站点的主机标头

![2](../Images/dabcf955046ad927269cda3d5e6e92c2.png)

从服务器，它显示证书是“好的”。

![在此处输入图像描述](../Images/1588a6e688f6c53ee512dc067a7fcbf2.png)

以下是一些网站设置

![在此处输入图像描述](../Images/a1ca69026bbcb8a882ba11e395acec6c.png)

* * *

现在，在 Visual Studio 2008 中，添加 Web 参考

![在此处输入图像描述](../Images/a90d3d4a6ebff9469b6135e024144d35.png)

在弹出窗口中单击“是”

![在此处输入图像描述](../Images/ad8dc4d4b19d5ec8a5ba06b333854268.png)

依次单击此弹出窗口的“否”几次。

![在此处输入图像描述](../Images/bd4d1d39b0fd00d5afc82f20ba958aa6.png)

在调用 Web 服务的代码行运行后...我收到此错误

> 基础连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。

当浏览器中的 web 服务站点时，URL 栏旁边的小挂锁会提供以下消息：

![在此处输入图像描述](../Images/e93866992e8e856ee1bd8f5faff2d439.png)

* * *

这是我现有的代码：

```
Dim mySvc As New WebServices.InstantAccount
mySvc.calledFunction() 
```

* * *

* * *

编辑

对于有类似问题的任何人，请阅读 iamkrillin 的答案和我的答案......因为它们都是解决问题的两种不同方式......取决于您可以控制的部分（代码或证书）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T18:08:43.073

在创建服务客户端之前在某处添加这行代码。

```
ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true); 
```

请注意：这将导致您的应用程序接受所有无效证书并继续运行。如果这是不可接受的，您可以附加一个函数并进行处理以确定证书错误是否正常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:52:46.407

iamkrillin 确实有一个可行的解决方案，因为他的代码将忽略无效证书，并允许应用程序使用 Web 服务。

除此之外，我已经更正了证书，因此我不再需要忽略无效的证书。

主机标头值（显示在 OP 中）是 WebServices.mycompany.vmc ，但证书的“通用名称”或“友好名称”（显示在 OP 屏幕截图 3 中的“证书路径”中）是 WebServices。

通用名称和网站 URL 需要匹配。我使用通用名称“WebServices.mycompany.vmc”重新创建了自签名证书，现在证书错误消失了。Web 服务可供使用，编码人员无需忽略应用程序的无效证书。

# java - 在这种情况下使用哪种数据结构

> ID：11266676
> 
> 赞同：2
> 
> 时间：2012-06-29T17:55:40.100
> 
> 标签：java, collections, treemap, sortedmap

我有一个“代码标记”形式的输入字符串列表

例如，

```
1001-40
1002-54
1003-23
1001-45
1004-60 
```

预期输出：

```
1004-60
1002-54
1001-45
1003-23 
```

如果值重复（如 1001），则使用最新的值，也需要排序。

我的第一个赌注是使用 TreeMap，但它会带来基于值的排序问题，这是不可能的。

```
Scanner in = new Scanner(System.in);
        SortedMap<Integer, Integer> map = new TreeMap<Integer, Integer>(new Comparator<Integer>() {
            public int compare(Integer i, Integer j) {
                return(j.compareTo(i));
            }
        });

        int i=0;
        while(i<5)
        {
            String[] s = in.next().split("\\-");
            map.put(Integer.parseInt(s[0]),Integer.parseInt(s[1]));
            i++;
        }
        // Get a set of the entries
        Set set = map.entrySet();
        // Get an iterator
        Iterator itr = set.iterator();
        // Display elements
        while(itr.hasNext()) {
            Map.Entry me = (Map.Entry)itr.next();
            System.out.print(me.getKey() + ": ");
            System.out.println(me.getValue());
        } 
```

解决这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:42:23.353

[我从@Pshemo 发布的链接中窃取了代码](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)，然后将您的数据设置为`main`模拟单元测试的一部分。先编码再输出。

**代码**

```
import java.util.Comparator;
import java.util.HashMap;
import java.util.TreeMap;

/**
 * Group of code marks
 */
public class CodeMarks {
    /**
     * Keep track of the most recently added suffix (value) by prefix (key)
     */
    HashMap<Integer, Integer> codeMarks = new HashMap<Integer, Integer>();

    /**
     * Add a code mark (i.e. ####-##) to the group.
     * If same prefix already exists overwrite.
     *
     * @param codeMark
     */
    public void add(String codeMark) {
        // add some validation here
        String[] pieces = codeMark.split("\\-");
        Integer prefix = Integer.parseInt(pieces[0]);
        Integer suffix = Integer.parseInt(pieces[1]);
        codeMarks.put(prefix, suffix);
    }

    /**
     * Sort code marks in descending suffix order.
     */
    Comparator<Integer> comparator = new Comparator<Integer>() {
        @Override
        public int compare(Integer prefixA, Integer prefixB) {
            Integer suffixA = codeMarks.get(prefixA);
            Integer suffixB = codeMarks.get(prefixB);
            if (suffixB.equals(suffixA))
                return prefixB.compareTo(prefixA);
            else
                return suffixB.compareTo(suffixA);
        }
    };

    /**
     * Output all code marks in descending suffix order
     */
    public String toString() {
        TreeMap<Integer,Integer> sorted_map  = new TreeMap<Integer,Integer>(comparator);
        sorted_map.putAll(codeMarks);
        StringBuffer output = new StringBuffer();
        for (Integer prefix : sorted_map.keySet()) {
            Integer suffix = sorted_map.get(prefix);
            output.append(prefix + "-" + suffix + "\n");
        }
        return output.toString();
    }

    public static void main(String args[]) {
        CodeMarks cm = new CodeMarks(){{
            add("1001-40");
            add("1002-54");
            add("1003-23");
            add("1001-45");
            add("1004-60");
        }};
        String expected =
                "1004-60\n" +
                "1002-54\n" +
                "1001-45\n" +
                "1003-23\n";
        String actual = cm.toString();
        System.out.println(actual);
        System.out.println("actual.equals(expected): " + actual.equals(expected));
    }
} 
```

**输出**

```
1004-60
1002-54
1001-45
1003-23

actual.equals(expected): true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:26:57.020

您可以`HashMap<Integer,Integer>`简单地使用，然后根据它们的值对其进行排序：

```
public LinkedHashMap<Integer,Integer> sortHashMapByValues(HashMap<Integer,Integer> passedMap) {
   List<Integer> mapKeys = new ArrayList<Integer>(passedMap.keySet());
   List<Integer> mapValues = new ArrayList<Integer>(passedMap.values());
   Collections.sort(mapValues);
   Collections.sort(mapKeys);

   LinkedHashMap<Integer,Integer> sortedMap = 
       new LinkedHashMap<Integer,Integer>();

   Iterator valueIt = mapValues.iterator();
   while (valueIt.hasNext()) {
       Object val = valueIt.next();
    Iterator keyIt = mapKeys.iterator();

    while (keyIt.hasNext()) {
        int key = (Integer)keyIt.next();
        int comp1 = (Integer)passedMap.get(key);
        int comp2 = (Integer)val;

        if (comp1 == comp2){
            passedMap.remove(key);
            mapKeys.remove(key);
            sortedMap.put(key,(Integer) val);
            break;
        }

    }

}
return sortedMap;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:21:47.603

我会简单地使用 a`HashMap<Code, CodeMark>`来消除重复代码，然后将所有值放入 a`List<CodeMark>`中，然后按降序对这个列表进行排序。

# javascript - Safari/Firefox/浏览器不能就选择元素大小达成一致

> ID：11266677
> 
> 赞同：1
> 
> 时间：2012-06-29T17:55:41.990
> 
> 标签：javascript, select, safari

这些愚蠢的浏览器不同意最愚蠢的事情，我快疯了。为什么移动 Safari 渲染的选择元素比其他浏览器大？甚至桌面野生动物园！

因此，由于我不希望每个浏览器中都有一个完美对齐的选择框，除了移动 safari，我必须使用 js 来更改宽度。问题是它不起作用。

```
<script type="text/javascript">
    if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1) {
        $document.GetElementById('safari_state').style.width="400px";
    }
</script> 
```

我的选择与页面上除移动 safari 之外的所有其他输入完全对齐。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:58:04.313

尝试使用不同的盒子尺寸：

```
 -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
      -ms-box-sizing: border-box;
          box-sizing: border-box; 
```

# delphi - 关闭运行时 createddd TTabItem

> ID：11266681
> 
> 赞同：0
> 
> 时间：2012-06-29T17:56:08.473
> 
> 标签：delphi, delphi-xe2, firemonkey

我可以在这里使用一些帮助，运行时创建 TTabItems。我在选项卡上有一个运行时创建的关闭按钮，并触发了关闭选项卡的事件。系统基于 Firemonkey 构建。一切正常，直到用户按下关闭按钮。我确实知道当前的选项卡项目，但是当我释放选项卡并尝试使另一个选项卡成为活动选项卡时，我得到了一个 av。用于关闭选项卡的一小段代码。

```
procedure TfrmMain.CloseButton(Sender: TObject);
begin
  pgeMain.ActiveTab.Index := currentTabIndex;
  if currentTabIndex > 0 then
    pgeMain.Tabs[currentTabIndex].Release();
  currentTabIndex := pgeMain.TabCount - 1;
end; 
```

# coronasdk - Corona SDK 和 Retina/Multi-res 中的纹理图集

> ID：11266685
> 
> 赞同：1
> 
> 时间：2012-06-29T17:56:42.143
> 
> 标签：coronasdk

我试图在在线文档中找到更多信息，但他们在这方面仍然有点缺乏。

使用新的纹理图集 API 处理多个分辨率的正确方法是什么？我应该为每种分辨率提供不同的数据文件吗？Corona SDK 会自动找到正确的文件还是需要我自己处理分辨率检测？

即使只是一个指向应用它的文档页面的指针就足够了！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:23:05.593

Corona 将正确加载图像文件（.png 或 .jpg），并将手动加载工作表文件，然后对其进行缩放...

如果您在制作适用于所有分辨率的工作表文件时遇到困难，一个好方法是手动加载适合该分辨率的工作表，然后使用 .xScale 和 .yScale 来更正分辨率。

我将为 Atlas 发布我自己的分辨率处理代码：

```
-- Mauricio Gomes
-- Kidoteca point class

local scaleString = "";
local scaleNumber = 1;
local errorMessage = "ERROR: Please call autoResolution.init";
local errorFunction = function() print(errorMessage); return errorMessage end;

local autoResolution = {};

function autoResolution.requireSheet( sheet )
    if autoResolution.SCALE == errorFunction then
        return errorFunction();
    end
    sheet = string.gsub(sheet, "/", ".");
    return require(sheet .. scaleString).sheet;
end

function autoResolution.requireInfo( sheet )
    if autoResolution.SCALE == errorFunction then
        return errorFunction();
    end
    sheet = string.gsub(sheet, "/", ".");
    return require(sheet .. scaleString);
end

function autoResolution.imageName( fileName, extension )
    if autoResolution.SCALE == errorFunction then
        return errorFunction();
    end
    return fileName .. scaleString .. "." .. extension;
end

-- variables about the scale settings

function autoResolution.init()
    if display.contentScaleX <= 0.25 then
        scaleString = "@4";
        scaleNumber = 0.25;
    elseif display.contentScaleX <= 0.7 then
        scaleString = "@2";
        scaleNumber = 0.5;
    end

    autoResolution.SCALE = scaleNumber;
end

autoResolution.SCALE = errorFunction;

return autoResolution; 
```

init 函数当然使用我公司 (Kidoteca) 使用的设置：后缀是 @2 和 @4，而不是 0.5 是 @2，因为我们的一些内部原因。

# box-api - 我可以将自定义元数据添加到文件吗？

> ID：11266687
> 
> 赞同：0
> 
> 时间：2012-06-29T17:57:02.850
> 
> 标签：box-api

我有兴趣为 Box.com 开发企业应用程序。我希望能够通过其他元数据对文档进行分类，例如客户端 ID。

有没有办法在 Box API v2 中做到这一点？这可以用标签来完成吗？（我在 API 文档中找不到太多关于标签的信息。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:08:39.707

标签似乎是一个合理的解决方案。但是，它们尚未在 v2 中发布，但最终会发布。您可以在此期间尝试使用 v1 标记方法。

# c# - Json.NET 不区分大小写的属性反序列化

> ID：11266695
> 
> 赞同：36
> 
> 时间：2012-06-29T17:57:21.443
> 
> 标签：c#, json.net

Json.NET 将“不区分大小写的属性反序列化”列为宣传的功能之一。我已经阅读过，将首先尝试匹配指定属性的大小写，如果未找到匹配项，则执行不区分大小写的搜索。然而，这似乎不是默认行为。请参见以下示例：

```
var result =
    JsonConvert.DeserializeObject<KeyValuePair<int, string>>(
        "{key: 123, value: \"test value\"}"
    );

// result is equal to: default(KeyValuePair<int, string>) 
```

如果 JSON 字符串被更改以匹配属性的大小写（“Key”和“Value”与“key”和“value”），那么一切都很好：

```
var result =
    JsonConvert.DeserializeObject<KeyValuePair<int, string>>(
        "{Key: 123, Value: \"test value\"}"
    );

// result is equal to: new KeyValuePair<int, string>(123, "test value") 
```

有没有办法执行不区分大小写的反序列化？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-29T23:45:06.987

那是一个错误。

不区分大小写的属性反序列化是指 Json.NET 能够将名为“Key”的 JSON 属性映射到 .NET 类的“Key”或“key”成员。

该错误是 KeyValuePair 需要它自己的 JsonConverter 但错过了不区分大小写的映射。

[https://github.com/JamesNK/Newtonsoft.Json/blob/fe200fbaeb5bad3852812db1e964473e1f881d93/Src/Newtonsoft.Json/Converters/KeyValuePairConverter.cs](https://github.com/JamesNK/Newtonsoft.Json/blob/fe200fbaeb5bad3852812db1e964473e1f881d93/Src/Newtonsoft.Json/Converters/KeyValuePairConverter.cs)

使用它作为基础，并在读取 JSON 时将小写的“key”和“value”添加到 case 语句中。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-06T03:23:11.190

我发现的一种有效方法是将 GetValue 与 StringComparer 参数一起使用。

例如，

```
JObject contact;
String strName = contact.GetValue('Name'); 
```

您正在尝试以不区分大小写的方式访问“名称”属性，您可以使用

```
JObject contact;
String strName = contact.GetValue("ObjType", StringComparison.InvariantCultureIgnoreCase); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-12T09:42:09.543

您可以在传入属性名称上使用自定义合同解析器，您可以将传入属性更改为与您的 C# 对象类属性格式匹配的首选格式。我制作了三个自定义合同解析器，它将传入的属性名称更改为标题大小写/小写/大写：

```
public class TitleCaseContractResolver : DefaultContractResolver
{
    protected override string ResolvePropertyName(string propertyName)
    {
        //Change the incoming property name into Title case
        var name = string.Concat(propertyName[0].ToString().ToUpper(), propertyName.Substring(1).ToLower());
        return base.ResolvePropertyName(name);
    }
}

public class LowerCaseContractResolver : DefaultContractResolver
{
    protected override string ResolvePropertyName(string propertyName)
    {
        //Change the incoming property name into Lower case
        return base.ResolvePropertyName(propertyName.ToLower());
    }
}

public class UpperCaseContractResolver : DefaultContractResolver
{
    protected override string ResolvePropertyName(string propertyName)
    {
        //Change the incoming property name into Upper case
        return base.ResolvePropertyName(propertyName.ToUpper());
    }
} 
```

然后创建一个新的 JsonSerializerSetting 对象并将您的自定义合同解析器放入属性 ContractResolver。然后将 JsonSerializerSetting 对象添加到 JsonConvert.DeserializeObject(jsonString, jsonSerializerSetting) 中的第二个参数中

```
 var serializerSetting = new JsonSerializerSettings()
        {
            ContractResolver = new TitleCaseContractResolver()
        };
        var result = JsonConvert.DeserializeObject<YourType>(jsonString, serializerSetting); 
```

# javascript - 无法在浏览器中播放 mp4 视频

> ID：11266697
> 
> 赞同：0
> 
> 时间：2012-06-29T17:57:49.070
> 
> 标签：javascript, html, css

我很难在浏览器窗口中播放 mp4 视频。我对 html 相当陌生，我一直在做很多研究，试图找出它为什么不起作用。现在它只是给了我一个空白的视频播放器这是我拥有的代码

谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link type="text/css" href="skin/jplayer.blue.monday.css" rel="stylesheet" />
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>

   <script type="text/javascript" src="javascripts/jquery.jplayer.min.js"></script>
   <script type="text/javascript">
       $(document).ready(function () {
           $("#jquery_jplayer_1").jPlayer({
               ready: function () {
                   $(this).jPlayer("setMedia", {
                       m4v: "/videos/m4v/sequence01mp4video_480x270_h264aac.m4v",
                       ogv: "/videos/ogv/sequence01mp4video_480x270.ogv",
                       png: "/videos/png/sequence01_480x270.png"
                   });
               },
               swfPath: "/javascripts",
               supplied: "m4v, ogv"
           });
       });
  </script>

</head>
<body>
  <div id="jp_container_1" class="jp-video ">
    <div class="jp-type-single">
      <div id="jquery_jplayer_1" class="jp-jplayer"></div>
      <div class="jp-gui">
        <div class="jp-video-play">
          <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>
        </div>
        <div class="jp-interface">
          <div class="jp-progress">
            <div class="jp-seek-bar">
              <div class="jp-play-bar"></div>
            </div>
          </div>
          <div class="jp-current-time"></div>
          <div class="jp-duration"></div>
          <div class="jp-controls-holder">
            <ul class="jp-controls">
              <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
              <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
              <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
              <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
              <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
              <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
            </ul>
            <div class="jp-volume-bar">
              <div class="jp-volume-bar-value"></div>
            </div>
            <ul class="jp-toggles">
              <li><a href="javascript:;" class="jp-full-screen" tabindex="1" title="full screen">full screen</a></li>
              <li><a href="javascript:;" class="jp-restore-screen" tabindex="1" title="restore screen">restore screen</a></li>
              <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
              <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
            </ul>
          </div>
          <div class="jp-title">
            <ul>
            </ul>
          </div>
        </div>
      </div>
      <div class="jp-no-solution">
        <span>Update Required</span>
        To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
      </div>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:01:29.350

我可以建议您当前的 Javascript 设置的替代方案吗？

试试 Video.js，一个轻量级的 HTML5 视频播放器。

[http://videojs.com/#section5](http://videojs.com/#section5)

# javascript - Jquery 选项卡：用于扩展内容的 autoHeight

> ID：11266702
> 
> 赞同：2
> 
> 时间：2012-06-29T17:58:17.403
> 
> 标签：javascript, jquery

我正在使用这个[SITE](http://codecanyon.net/item/sliding-tabs-jquery-plugin/full_screen_preview/141774)中的 jquery 滑动选项卡，效果很好。唯一的问题是 autoHeight jquery 函数不适应扩展内容。*改写：*标签容器将调整到非活动内容的高度，但问题是一旦容器内的内容变为活动并垂直扩展，它将不再适合并且看不到 <--- 它无法适应。这是示例[JSFFIDLE](http://jsfiddle.net/HZj7k/10/)

**我尝试这样做以调整高度以扩展内容，但它不起作用：**

```
<script>
 var height = 50 // Set to the height you want
        $('.st_view').css('height', height+'px')

    });​

    </script> 
```

**整体jQuery**

```
 <script>

    $(document).ready(function() {

        $('div#st_horizontal').slideTabs({
            // Options              
            contentAnim: 'slideH',
            autoHeight: true,
            contentAnimTime: 600,
            contentEasing: 'easeInOutExpo',
            tabsAnimTime: 300
        });

        var height = 50 // Set to the height you want
        $('.st_view').css('height', height+'px')

    });​

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:51:36.953

如果只有切换器导致内容扩展，您可以像这样修改切换器代码：

```
$('#title').click(function() {
    $(this).toggleClass('active');
    $('#content').toggle();
    var $tab = $(this).closest('.st_tab_view');
    $tab.closest('.st_view').css('height', $tab.height());
}); 
```

要获得更通用的解决方案，请获取[jQuery resize plugin](http://benalman.com/projects/jquery-resize-plugin/)，并添加以下代码：

```
$('.st_tab_view').resize(function() {
    var $this = $(this);
    $this.closest('.st_view').css('height', $this.height());
}); 
```

# jquery - jQuery删除类文本并在对话框中替换

> ID：11266704
> 
> 赞同：0
> 
> 时间：2012-06-29T17:58:27.787
> 
> 标签：jquery, checkbox, dialog

当用户从下拉列表中选择一个选项时，显示的复选框将被新的复选框替换。

```
var chooser = '<select class="criteria" id="criteria">'
    '<option value="One">One</option>' +
    '<option value="Two">Two</option>' +
    '</select>';

var criteriaSelect = '<div id="my-chooser-dialog" title="Chooser"> +
        chooser + '</div>';

// criteriaChoices contains some checkboxes
if (jQuery("#my-chooser-dialog").dialog("isOpen") === true) {
    jQuery("#my-chooser-dialog" > tr").remove();
    jQuery("#my-chooser-dialog").append(criteriaChoices);
    jQuery("#my-chooser-dialog").show();
    return;
}

jQuery(criteriaSelect).dialog({modal: false, dialogClass: "my-chooser-dialog"});
jQuery("#my-chooser-dialog").append(criteriaChoices); 
```

# mysql - 在mysql中使用正则表达式替换表中的列值

> ID：11266709
> 
> 赞同：2
> 
> 时间：2012-06-29T17:59:07.477
> 
> 标签：mysql, sql, regex

我需要执行以下操作，并且正在为语法苦苦挣扎：

我有一个名为“mytable”的表和一个名为“mycolumn”（字符串）的列。

在 mycolumn 中，该值是一个构造值 - 例如，其中一个值是：'first:10:second:18:third:31'。mycolumn 中的值都使用相同的模式，只是 ids/numbers 不同。

我需要将 18 的值（在这种特殊情况下）更改为来自另一个表键的值。此列值的最终结果应该是“first:10:second:22:third:31”，因为我将 18 替换为 22。我使用 18 作为查找值从另一个表中获得了 22。

因此，理想情况下，我将拥有以下内容：

```
UPDATE mytable 
SET mycolumn = [some regex function to find the number between 'second:' and ":third" - 
let's call that oldkey - and replace it with other id from another table - 
(select otherid from tableb where id = oldkey)]. 
```

我知道 mysql 有一个 REPLACE 功能，但这还不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:10:02.713

MySQL 的问题是它的 REGEX 风格非常有限，不支持反向引用或正则表达式替换，这几乎使得无法像单独使用 MySQL 那样替换值。

我知道这意味着速度会受到影响，但您可能需要考虑通过它的 id 选择您想要使用的行，或者无论您选择它，使用 PHP 或您与 MySQL 连接的任何语言修改值，然后用更新查询。

一般来说，编程语言中的 REGEX 要强大得多。

如果您使这些查询保持苗条和快速，那么您不应该对速度造成太大影响（可能可以忽略不计）。

此外，这里是关于 MySQL 的 REGEX 可以做什么的文档。[http://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

干杯

编辑：

老实说，eggyal 的评论对您的情况更有意义（简单的 int 值）。只需将它们分成几列，就没有理由像那样访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:25:56.257

您可以创建自己的函数。我害怕 REGEX，所以我使用 SUBSTRING 和 SUBSTRING_INDEX。

```
CREATE FUNCTION SPLIT_STRING(str VARCHAR(255), delim VARCHAR(12), pos INT)
RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(str, delim, pos),
   LENGTH(SUBSTRING_INDEX(str, delim, pos-1)) + 1),
   delim, '');

SPLIT_STRING('first:10:second:18:third:31', ':', 4) 
```

返回 18

基于这个答案：

[等价于在 MySQL 中处理字符串的 explode()](https://stackoverflow.com/questions/5928599/equivalent-of-explode-to-work-with-strings-in-mysql)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:06:07.643

你想要这样的东西，它与组匹配：

```
WHERE REGEXP 'second:([0-9]*):third' 
```

但是，MySQL 没有正则表达式替换功能，因此您必须使用用户定义的功能：

```
REGEXP_REPLACE?(text, pattern, replace [,position [,occurence [,return_end [,mode]]]) 
```

用户定义的函数在这里可用：

[http://www.mysqludf.org/lib_mysqludf_preg/](http://www.mysqludf.org/lib_mysqludf_preg/)

# c# - 是否可以确定 COM 互操作类型中可选参数的默认值？

> ID：11266710
> 
> 赞同：4
> 
> 时间：2012-06-29T17:59:13.300
> 
> 标签：c#, c#-4.0, com

我正在使用 C# 4.0 实例化一个`Excel.Application`并打开一个`Excel.Workbook`. 剥离下来，我的代码如下所示：

```
Excel.Application xlApp;
Excel.Workbook xlWorkBook;

xlApp = new Excel.Application();
xlWorkBook = xlApp.Workbooks.Open("someFile"); 
```

该`Open()`方法有很多我不需要提供的可选值。这很方便，只是我不知道那些可选参数的默认值是什么。因此，我无法决定是否必须提供价值。

在这种情况下，我可以在 MSDN 文档中找到*一些*参数所需的信息。是否有一种通用方法来确定 COM 互操作类型中可选参数的默认值？

**更新：**

使用`oleview`on `MSO.dll`，我检查了`Workbook`接口的相应 IDL。对于该`SaveAs()`方法，它看起来像这样：

```
HRESULT SaveAs(
    [in, optional] VARIANT Filename,
    [in, optional] VARIANT FileFormat,
    [in, optional] VARIANT Password,
    blahblah...
    [in, optional, defaultvalue(1)] XlSaveAsAccessMode AccessMode,
    blahblah...
    [in, optional] VARIANT Local,
    [in, lcid] long lcid); 
```

在 Visual Studio 中，智能感知显示`[object Filename = Type.Missing]`了大多数参数，我认为这是有道理的，因为 IDL 没有提供有关类型 ( `VARIANT`) 或任何默认值的任何信息。然而，对于参数`AccessMode`，IDL 提供了所需的信息并由智能感知显示。

所以我想现在的问题变成了：为什么 IDL 没有更具体地说明所有参数的类型（和默认值），就像它的 for 一样`AccessMode`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:31:46.913

> 为什么 IDL 没有更具体地说明类型（和默认值）

它*是*特定于类型的，它是 VARIANT。它不必*具体*说明默认值，变体能够指定“未指定”。实际上，在类型库中指定默认值是可能的，您从反向工程 IDL 中看到了这一点。

这里有很大的灵活性。但是如果变体值是“未指定”，那么 COM 服务器将替换它认为默认的任何值，或者给它未指定的特定行为。找出可能是什么的唯一方法是通过文档。这确实并不总是很出色。

# c# - 使用 CngKey 在 PEM 中生成 RSA 密钥对（与 DKIM 兼容）使用 C#....类似于“openssl rsa”

> ID：11266711
> 
> 赞同：6
> 
> 时间：2012-06-29T17:59:15.437
> 
> 标签：c#, certificate, rsa, pem

是否可以仅使用 C#生成 RSA 密钥对，将其导出为与[DKIM 的类 PEM格式兼容的 ASN1 格式？](https://stackoverflow.com/q/11269079/328397)

我想减少对第三方的依赖，但这里有一些我发现

**充气城堡**

*   [https://stackoverflow.com/a/251757](https://stackoverflow.com/a/251757)

**密码学应用程序块**

*   [http://msdn.microsoft.com/en-us/library/dd203099.aspx](http://msdn.microsoft.com/en-us/library/dd203099.aspx)
*   [https://stackoverflow.com/a/243787](https://stackoverflow.com/a/243787)

**Win32 PFXImportCertStore**

*   [http://msdn.microsoft.com/en-us/library/aa387314(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa387314(v=vs.85).aspx)
*   [http://msdn.microsoft.com/en-us/library/aa387313(v=vs.85)](http://msdn.microsoft.com/en-us/library/aa387313(v=vs.85))

**导入 PEM**

*   此代码仅导入 PEM 数据，但与 OpenSSL 不同，它修复了 .NET 4.0 和密钥[http://www.codeproject.com/Articles/162194/Certificates-to-DB-and-中的前导零的问题后退](http://www.codeproject.com/Articles/162194/Certificates-to-DB-and-Back)

**Microsoft 的 CLR 安全增强功能**

*   [http://clrsecurity.codeplex.com/](http://clrsecurity.codeplex.com/)

**微软压缩天然气**

*   [http://msdn.microsoft.com/en-us/magazine/cc163389.aspx](http://msdn.microsoft.com/en-us/magazine/cc163389.aspx)

这是 Microsoft CNG 提供程序在 codeplex 上的 .NET dll 的代码（上图）...但是我不知道如何以[DKIM 兼容的 ASN1 格式](https://stackoverflow.com/q/11269079/328397)导出和导入公钥和私钥。

```
 byte[] pkcs8PrivateKey = null;
        byte[] signedData = null;

        CngKey key = CngKey.Create(CngAlgorithm2.Rsa);
       byte[] exportedPrivateBytes = key.Export(CngKeyBlobFormat.GenericPrivateBlob);

       string exportedPrivateString= Encoding.UTF8.GetString(exportedPrivateBytes);

        pkcs8PrivateKey = Encoding.UTF8.GetBytes(exportedPrivateString);

        using (CngKey signingKey = CngKey.Import(pkcs8PrivateKey, CngKeyBlobFormat.Pkcs8PrivateBlob))
        {
            using (RSACng rsa = new RSACng(signingKey))
            {
                rsa.SignatureHashAlgorithm = CngAlgorithm.Sha1;
                signedData = rsa.SignData(dataToSign);
            }
        } 
```

**问题**

是否有使用 Microsoft 库（Codeplex 上的 Win32、PFX 或 CLR）的直接示例来说明如何创建密钥对并以 PEM 格式导出/导入这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-01T11:02:38.813

所以你只需要一个pkcs8的密钥。

```
CngKeyCreationParameters ckcParams = new CngKeyCreationParameters()
{
    ExportPolicy = CngExportPolicies.AllowPlaintextExport,
    KeyCreationOptions = CngKeyCreationOptions.None,
    KeyUsage = CngKeyUsages.AllUsages,                
};
ckcParams.Parameters.Add(new CngProperty("Length", BitConverter.GetBytes(2048), CngPropertyOptions.None));

myCngKey = CngKey.Create(CngAlgorithm.Rsa, null, ckcParams);

byte[] privatePlainTextBlob = myCngKey.Export(CngKeyBlobFormat.Pkcs8PrivateBlob);
Console.WriteLine(Convert.ToBase64String(privatePlainTextBlob));
} 
```

现在您的密钥对包含在 PKCS#8 ASN.1 编码字符串中。

# php - 提交后让表单字段保持可见

> ID：11266715
> 
> 赞同：0
> 
> 时间：2012-06-29T17:59:27.290
> 
> 标签：php, javascript, html, webforms

我会尽量说清楚。I have a listbox with 3 entries in it, and when my entry number 2 is selected it makes a field, which is by default hidden, become visible.

然后在提交表单后，所选项目保留在列表框中（已经解决了），但变得可见的字段恢复到其默认设置，隐藏。我希望它保持可见，以防提交未通过验证要求或任何其他原因。

我知道它必须非常简单，但我仍然习惯于 HTML/PHP/Javascript。

如果你们需要任何代码部分，我将非常乐意提供。我只是不想无缘无故地发布我的完整代码，这很混乱而且很长。

提前致谢！

编辑：

实际上我刚刚找到它。感谢您的帮助，让我走上了正确的道路

所以这是代码，你只需要把它放在body标签的任何地方。

这将在加载时执行任何操作。所以当我的代码运行时，它将检查我的列表框的 id 是否是数字 2，如果它会在 IF 语句中执行操作。寻找我的领域并让它们可见。

```
<script>   
window.onload = function() {     
if (document.getElementById("topic2").value=="2")
{
document.getElementById("Agence").style.visibility='Visible';
document.getElementById("agence_tittle").style.visibility='Visible';
}

} 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:02:50.320

您的表单提交功能是刷新页面还是将隐藏字段/类设置回隐藏？

# php - PHP error_log 写入一个文件夹，而不是另一个

> ID：11266719
> 
> 赞同：0
> 
> 时间：2012-06-29T17:59:38.543
> 
> 标签：php, logging, error-log

我有一个简单的 PHP 脚本，它将错误写入错误日志文件，并将部分错误打印到屏幕上。

我首先在 Aptana Studio 内的“沙盒”项目中开发了它（但实际上，它们只是目录），在那里它运行良好。但是，当我将它复制到我的“生产项目”（同样，它实际上只是网络服务器上的另一个目录）时，它不再将消息记录到`errorlog.log`文件中。所有权限都是相同的，实际上我使脚本可执行（它不在其他目录中），并赋予目录完全权限（chmod 777）。该`errorlog.log`文件已经作为一个空文件存在并且是可写的，就像它在沙箱中一样。

这是代码：

```
<?php
/* logerrors.inc.php - Prints a "formatted" error message which will be displayed 
 *    within a handler (i.e. the notification bar) on the front end and writes 
 *    the error to a text log.
 */
 date_default_timezone_set('America/New_York');  // Required to avoid errors.

 define("LOG_LOCATION", "errorlog.log");         // The location of the log file

 function writeError($error_string, $technical_info_string = ""){
    $tech_log_entry = "";                        // We should only log techinical information 
                                                 //    if it's provided
    if($technical_info_string != ""){
        $tech_log_entry = "\n- Technical Info Provided: ". $technical_info_string;
    }

    // Writes a log entry with full details.
    error_log("[ERROR: ".date('Y-m-d H:i:s') . "]\n- Error Displayed: ". $error_string . 
                 $tech_log_entry ."\n\n",
                 3, LOG_LOCATION);

    echo "error: " . $error_string;              // Emits the $error_string as output
    exit();
 }

?> 
```

有趣的是`echo`，脚本底部的命令运行良好，因此显然不会在`error_log`函数上出错。它只是行不通。

关于下一步看哪里或其他可能导致这种情况的任何想法？

# php - 试图在 Yii 的页面视图上创建模型

> ID：11266720
> 
> 赞同：1
> 
> 时间：2012-06-29T17:59:38.977
> 
> 标签：php, logging, yii

当有人查看我网站的页面时，我想在我的事件表中保存一些有关访问的信息。

目前我的视图中有这段代码 - 但我似乎没有将任何数据保存到数据库中 -

```
if(!Yii::app()->user->isGuest) {
$lview=new Event;
$lview->userid=Yii::app()->user->id;
$lview->type="lview";
$lview->data=$model->id;
$lview->event="view";
$lview->save();
} 
```

以这种方式创建对象是否可能/可取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:42:23.307

唯一可取的做法是将数据保存在控制器中。用于[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns "http://en.wikipedia.org/wiki/Separation_of_concerns")。

作为每个视图，在正常过程中[`$this->render('view');`](http://www.yiiframework.com/doc/api/1.1/CController#render "http://www.yiiframework.com/doc/api/1.1/CController#render")无论如何都是“渲染”的，您应该在此渲染调用之前在[action](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#action "http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#action")中执行此保存过程。

至于保存问题，使用检查错误[`$lview->getErrors();`](http://www.yiiframework.com/doc/api/1.1/CModel#getErrors-detail "http://www.yiiframework.com/doc/api/1.1/CModel#getErrors-detail")，并从那里调试：

```
public function actionShowSomeView(){
    // initialize your model here

    if(!Yii::app()->user->isGuest) {
        $lview=new Event;
        // assign values to $lview
        if(!$lview->save()){
            CVarDumper::dump($lview->getErrors());;
        }
    }

    // do your other stuff

    $this->render('view');
} 
```

# c# - 如何正确使 byte[] 字段为必填字段？

> ID：11266721
> 
> 赞同：4
> 
> 时间：2012-06-29T17:59:45.513
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, data-annotations

我需要`byte[]`在我的模型中验证 a`Required`但是每当我使用`Data Annotation` `[Required]`它时，它什么都不会做。即使我选择一个文件，它也会输出错误消息。

细节：

模型：

```
Public class MyClass
{
   [Key]
   public int ID {get; set;}

   [Required]
   public string Name {get; set;}

   public byte[] Image {get; set;}

   [Required]
   public byte[] Template {get; set;}
} 
```

看法：

```
<div class="editor-label">
   <%:Html.LabelFor(model => model.Image) %>
</div>
<div class="editor-field">
   <input type="file" id="file1" name="files" />
</div>
<div class="editor-label">
   <%:Html.Label("Template") %>
</div>
<div class="editor-field"> 
   <input type="file" id="file2" name="files"/>
</div>
<p>
   <input type="submit" value="Create" />
</p> 
```

我查看了帖子并注意到人们使用自定义验证，但他们使用`HttpPostedFileBase`文件类型而不是`byte[]`像我一样，由于某种原因，当我尝试使用相同的它时，它会出错，并且缺少 ID ......即使模型声明了自己的 ID。

编辑：

上下文 -`OnModelCreating`补充`Report`

```
modelBuilder.Entity<Report>().Property(p => p.Image).HasColumnType("image");
modelBuilder.Entity<Report>().Property(p => p.Template).HasColumnType("image"); 
```

请注意，由于错误，我不得不输入`image`as 。`ColumnType``Byte array truncation to a length of 4000.`

控制器：

```
public ActionResult Create(Report report, IEnumerable<HttpPostedFileBase> files)
    {

        if (ModelState.IsValid)
        {
            db.Configuration.ValidateOnSaveEnabled = false;

            if (files.ElementAt(0) != null && files.ElementAt(0).ContentLength > 0)
            {
                using (MemoryStream ms = new MemoryStream())
                {
                    files.ElementAt(0).InputStream.CopyTo(ms);
                    report.Image = ms.GetBuffer();
                }
            }

            if (files.ElementAt(1) != null && files.ElementAt(1).ContentLength > 0)
            {
                using (MemoryStream ms1 = new MemoryStream())
                {
                    files.ElementAt(1).InputStream.CopyTo(ms1);
                    report.Template = ms1.GetBuffer();
                }

            }
            db.Reports.Add(report);
            db.SaveChanges();

            //Temporary save method
            var tempID = 10000000 + report.ReportID;
            var fileName = tempID.ToString(); //current by-pass for name
            var path = Path.Combine(Server.MapPath("~/Content/Report/"), fileName);
            files.ElementAt(1).SaveAs(path);

            db.Configuration.ValidateOnSaveEnabled = true;
            return RedirectToAction("Index");
        } 
```

希望你能注意到我错过了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T18:22:45.780

`RequiredAttribute`检查 null 和空字符串。

```
public override bool IsValid(object value)
{
  if (value == null)
    return false;
  string str = value as string;
  if (str != null && !this.AllowEmptyStrings)
    return str.Trim().Length != 0;
  else
    return true;
} 
```

如果您的字节数组为空，这可以正常工作，但您可能还想检查一个空数组（没有看到您如何分配`Template`属性的值，我只能猜测是这种情况）。您可以定义自己的必需属性来为您执行此检查。

```
public class RequiredCollectionAttribute : RequiredAttribute
{
    public override bool IsValid(object value)
    {
      bool isValid = base.IsValid(value);

      if(isValid)
      {
        ICollection collection = value as ICollection;
        if(collection != null)
        {
            isValid = collection.Count != 0;
        }
      }  
      return isValid;
    }
} 
```

现在只需用我们的新属性替换`Required`您的属性上的属性。`Template``RequiredCollection`

```
[RequiredCollection]
public byte[] Template {get; set;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:12:46.203

> 我查看了帖子并注意到人们使用自定义验证，但他们使用 HttpPostedFileBase 作为文件类型，而不是像我这样的 byte[] ..

您想将发布的文件绑定到模型中的字节数组吗？如果是，您必须使用自定义模型绑定器。

ASP.NET MVC 已经有一个用于字节数组的内置模型绑定器，因此您可以按照本文中[的](http://prideparrot.com/blog/archive/2012/6/model_binding_posted_file_to_byte_array)建议轻松扩展它。

```
public class CustomFileModelBinder : ByteArrayModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var file = controllerContext.HttpContext.Request.Files[bindingContext.ModelName];

        if (file != null)
        {
            if (file.ContentLength != 0 && !String.IsNullOrEmpty(file.FileName))
            {
                var fileBytes = new byte[file.ContentLength];
                file.InputStream.Read(fileBytes, 0, fileBytes.Length);
                return fileBytes;
            }

            return null;
        }

        return base.BindModel(controllerContext, bindingContext);
    }
}

protected void Application_Start()
{
    ...
    ModelBinders.Binders.Remove(typeof(byte[]));
    ModelBinders.Binders.Add(typeof(byte[]), new CustomFileModelBinder());
} 
```

现在上传的文件将直接作为 bytearray 出现在属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T20:21:31.567

我改变了我的`Create`方法，这就是我想出的。似乎工作正常，但是...

```
if (files.ElementAt(1) != null && files.ElementAt(1).ContentLength > 0)
{
    using (MemoryStream ms1 = new MemoryStream())
    {
        files.ElementAt(1).InputStream.CopyTo(ms1);
        report.Template = ms1.GetBuffer();
    }

}
else // this part of code did the trick, although not sure how good it is in practice
{
    return View(report);
} 
```

# sql-server - Sharepoint 2007 查询利用大量资源

> ID：11266722
> 
> 赞同：1
> 
> 时间：2012-06-29T17:59:50.427
> 
> 标签：sql-server, database, sharepoint

在 SQL Server 活动监视器上，我注意到以下查询在逻辑读取和 CPU 使用方面占用了大量资源。任何人都知道此查询的作用以及如何禁用它？

```
IF EXISTS 
            (SELECT * FROM MSSCrawlContent 
            WHERE CrawlID IN 
                (SELECT CrawlID FROM MSSCrawlHistory
                 WHERE CrawlID <> @CrawlID
                 AND (Status = @CRAWL_STATUS_START OR Status = @CRAWL_STATUS_PAUSE))             
            AND StartAddressID IN
                (SELECT StartAddressID FROM MSSCrawlContent
                WHERE CrawlID = @CrawlID)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:19:01.220

我很确定这是爬过 Sharepoint 站点和索引文档的内容爬虫。这是一个相当激烈的过程。我不得不与我的 Sharepoint 管理员协调，让他们将内容抓取过程设置为非工作时间。

顺便说一句，这个过程也会产生一些荒谬的日志。在与 Sharepoint 管理员合作的过程中，我们看到了一些文章，这些文章建议我们将恢复模式设置为简单，并将备份设置为在 [Search_Service_Application_CrawlStoreDB_{GUID}] 数据库上完成爬网后的某个时间。还建议使用 AutoShrink（尽管这是非常不标准的），因为 db 和日志文件会变得失控。我还没有决定是否要进行第二次更改，但第一次对我们帮助很大。

# java - 从 spring 执行 sql 脚本时“用户缺少权限或找不到对象”

> ID：11266733
> 
> 赞同：4
> 
> 时间：2012-06-29T18:00:42.717
> 
> 标签：java, spring, hibernate, junit, spring-test

我正在使用 Hibernate 3 和 Spring 3。我一直在尝试填充内存数据库，并且我正在使用 Spring 来执行此操作。当我尝试这样做时，我感到很沮丧，并且这个堆栈跟踪：为了节省你们的阅读时间，例外是：

```
user lacks privilege or object not found: XFC_ACTIONSTARTCONDITIONTYPE  

Failed to execute database script; nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement at line 1 of resource class path resource [ctl_data-scrubd.sql]: INSERT INTO xfc_ActionStartConditionType (actionStartConditionTypeId,actionStartConditionTypeName) VALUES (&apos;1&apos;,&apos;Start After Action Completed&apos;)" type="org.springframework.dao.DataAccessResourceFailureException">org.springframework.dao.DataAccessResourceFailureException: Failed to execute database script; nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement at line 1 of resource class path resource [ctl_data-scrubd.sql]: INSERT INTO xfc_ActionStartConditionType (actionStartConditionTypeId,actionStartConditionTypeName) VALUES (&apos;1&apos;,&apos;Start After Action Completed&apos;)
at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:57)
at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory.initDatabase(EmbeddedDatabaseFactory.java:136)
at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory.getDatabase(EmbeddedDatabaseFactory.java:111)
at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder.build(EmbeddedDatabaseBuilder.java:113)
at com.capitaliq.loader.persistence.PersistenceHelper.setUpSessionFactory(PersistenceHelper.java:123)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement at line 1 of resource class path resource [ctl_data-scrubd.sql]: INSERT INTO xfc_ActionStartConditionType (actionStartConditionTypeId,actionStartConditionTypeName) VALUES (&apos;1&apos;,&apos;Start After Action Completed&apos;)
    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.executeSqlScript(ResourceDatabasePopulator.java:198)
    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:132)
    at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:45)
Caused by: java.sql.SQLException: user lacks privilege or object not found: XFC_ACTIONSTARTCONDITIONTYPE
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatement.executeUpdate(Unknown Source)
    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.executeSqlScript(ResourceDatabasePopulator.java:184)
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: XFC_ACTIONSTARTCONDITIONTYPE
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.SchemaManager.getTable(Unknown Source)
    at org.hsqldb.ParserDQL.readTableName(Unknown Source)
    at org.hsqldb.ParserDML.compileInsertStatement(Unknown Source)
    at org.hsqldb.ParserCommand.compilePart(Unknown Source)
    at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
    at org.hsqldb.Session.executeDirectStatement(Unknown Source)
    at org.hsqldb.Session.execute(Unknown Source) 
```

我暂时想说我的问题是没有创建表，但我不确定。我已遵循有关创建数据库的所有指示，但在阳光下的每种组合都行不通。这是我的 context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans default-lazy-init="true" xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:jdbc="http://www.springframework.org/schema/jdbc"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/jdbc
http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">
<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">    <!---->
    <property name="driverClassName" value="org.hsqldb.jdbc.JDBCDriver"/>
    <property name="url" value="jdbc:hsqldb:mem:mydb;create=true"/>
    <property name="username" value="sa"/>
    <property name="password" value=""/>

</bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="configLocation" value="hibernate.cfg.xml.incDTD"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.connection.shutdown">true</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<!--    <jdbc:initialize-database data-source="dataSource" enabled="#{systemProperties.INITIALIZE_DATABASE}" ignore-failures="ALL">
    <jdbc:script location="classpath:ctl_data-scrubd.sql" />
</jdbc:initialize-database>-->

<bean id="dataSourceInitializer" class="org.springframework.jdbc.datasource.init.DataSourceInitializer">
    <property name="dataSource" ref="dataSource"/>
    <property name="databasePopulator">
        <bean class="org.springframework.jdbc.datasource.init.ResourceDatabasePopulator">
            <property name="sqlScriptEncoding" value="UTF-8"/>
            <property name="scripts">
                <list>
                    <value>classpath:ctl_data-scrubd.sql</value>
                </list>
            </property>
        </bean>
    </property>
</bean>
</beans> 
```

我想要做的就是使用脚本文件来填充这个数据库。不要说我的 sql 错了，因为我知道事实并非如此。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:53:29.607

把它当作宇宙之谜；我从来没有让这个工作。只是重做了我填充表格的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-03T17:22:42.690

您必须使用 @Column 注释显式定义列的名称。

例子

```
@Column(name = "column-name")
private String domainName; 
```

在“列名”中，您必须替换为初始脚本中设置的名称，并且不应使用 CamelCase。而“domainName”是您应用程序中的属性名称。

问候

# wpf - 创建自定义项目控件

> ID：11266735
> 
> 赞同：7
> 
> 时间：2012-06-29T18:00:47.713
> 
> 标签：wpf, custom-controls, itemscontrol

我正在尝试创建一个从`ItemsControl`. 用`ItemsControl`项目初始化，但未显示。

**项目控制：**

```
public class PipeControl : ItemsControl 
{
    static PipeControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(PipeControl), new FrameworkPropertyMetadata(typeof(PipeControl)));                    
    }

    public PipeControl()
    {
        Checkers = new ObservableCollection<Checker>();
        Checkers.Add(new Checker());
        Checkers.Add(new Checker());
        Checkers.Add(new Checker());
        Checkers.Add(new Checker());
        Checkers.Add(new Checker());           
    }

    public ObservableCollection<Checker> Checkers 
    {
        get;
        set;               
    }        
} 
```

**主题资源字典：Generic.xaml**

```
<Style TargetType="{x:Type local:PipeControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:PipeControl}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">                                        
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>

    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate DataType="{x:Type local:Checker}">
                <Ellipse Fill="Red" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />                    
            </DataTemplate>                
        </Setter.Value>            
    </Setter>

    <Setter Property="ItemsSource" Value="{Binding Checkers,RelativeSource={RelativeSource Self}}"/>                           

    <!-- Just a Precaution its the default panel any ways -->  
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <StackPanel />
            </ItemsPanelTemplate>
        </Setter.Value>            
    </Setter>

</Style> 
```

任何想法为什么不显示这些项目？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T18:08:32.860

您需要设置 ItemsSource。因此，例如，您可以`ItemsSource = Checkers;`在最后一个 Checkers Add 行下方添加。即使您尝试将 ItemsSource 设置为 Checkers 样式，我认为如果您在控件类中设置会更容易。不过，只是我的两分钱。

这是 PipeControl 类的示例：

```
public class PipeControl : ItemsControl
{
    public ObservableCollection<Checker> Checkers { get; set; }
    static PipeControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(PipeControl), new FrameworkPropertyMetadata(typeof(PipeControl)));
    }
    public PipeControl()
    {
        Checkers = new ObservableCollection<Checker>();
        Checkers.Add(new Checker());
        Checkers.Add(new Checker());
        Checkers.Add(new Checker());
        Checkers.Add(new Checker());
        Checkers.Add(new Checker());
        ItemsSource = Checkers;
    }
} 
```

您还需要 ControlTemplate 中的 ItemsPresenter 并且您的 Ellipse 需要宽度和高度。这是为您提供的更新样式：

```
<Style TargetType="{x:Type local:PipeControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:PipeControl}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <ItemsPresenter />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate DataType="{x:Type local:Checker}">
                <Ellipse Width="25"
                         Height="25"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch"
                         Fill="Red" />
            </DataTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# jquery - 向下滚动 jquery div - 如何防止它无限推下标题？

> ID：11266738
> 
> 赞同：1
> 
> 时间：2012-06-29T18:01:12.593
> 
> 标签：jquery, html, scroll

我有一个内容 div，其中包含右侧的“侧边栏”div，当访问者向下滚动内容时，它应该向下滑动。这一切都很好，除了它还会无限地向下推下面的页脚，所以访问者永远无法完全看到整个页脚（它本身就很大）。

如何使滚动 div 在（深灰色）内容 div 结束的地方停止？

这是jsfiddle：http: [//jsfiddle.net/vTcqv/4/](http://jsfiddle.net/vTcqv/4/)

以及完整的预览：http: [//jsfiddle.net/vTcqv/4/embedded/result/](http://jsfiddle.net/vTcqv/4/embedded/result/)

非常感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:58:15.837

简单：将侧边栏限制在其父元素 #maincontainer div 而不是整个文档。

代替

```
documentHeight = $(document).height(); 
```

和

```
containerHeight = $("#maincontainer").height(); 
```

看看它在行动：http: [//jsfiddle.net/vTcqv/11/embedded/result/](http://jsfiddle.net/vTcqv/11/embedded/result/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:33:54.313

您的文档高度包括页脚，如果我理解正确，我们想停在页脚处。所以不要让你的文档高度是这样的：

```
documentHeight = $(document).height(); 
```

更改它以同时删除页脚的大小。

```
documentHeight = $(document).height() - $('#footer').height(); 
```

有一个小问题，它不会与内容 div 齐平，但我确信它很容易修复。

[http://jsfiddle.net/vTcqv/6/](http://jsfiddle.net/vTcqv/6/)

# api - 如何检查数据集是否对 WEKA api 中的某些分类有效？

> ID：11266740
> 
> 赞同：3
> 
> 时间：2012-06-29T18:01:21.813
> 
> 标签：api, machine-learning, weka

在 Weka 3.6.5 中，我遵循以下步骤：

1.  我使用 Weka 的资源管理器并打开一个数据集文件。
2.  我切换到分类面板并单击“选择”按钮。

现在您可以看到 WEKA 将阻止/灰显分类器，因为它们无法处理数据集，请参见图像。

![weka explorer 分类部分](../Images/8481f3fccb6889d32fe4d8d8be6daf7d.png)

我想知道用什么 Weka API 来确定这个数据集是否可以用于某些分类器。我在 Weka API 文档中找到了它，但没有得到任何有用的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T12:03:22.947

Weka 禁用无法处理您的数据的分类器。仅当数据与分类器匹配时才会启用分类器`capabilities`，如果您在从分类器列表中选择分类器名称后单击分类器名称，则可以查看该分类器。例如，这里是 J48（决策树）的功能：

*   类 -- 二进制类、名义类、缺失类值
*   属性 -- 名义属性、数字属性、日期属性、一元属性、缺失值、二元属性、空名义属性
*   附加 -- 最少实例数：0

因此，类数据必须是二进制或标称，并允许缺失类值。属性数据可以是标称、数字、日期、一元、二进制，并处理缺失值和空标称值。一个附加限制规定至少需要 0 个实例（这有点傻，但其他分类器在本节中说明了更重要的附加要求）。

您可以使用选项卡更改您的类和属性`Preprocess`。例如，如果分类器只能处理二进制属性，那么您可以使用`NominalToBinary`过滤器将属性从名义转换为二进制。

还有一件事，确保 Weka 知道它应该使用哪个数据列。默认情况下，它选择最后一列作为类列。如果您的课程在另一列中，那么您必须使用选项卡中的下拉菜单手动更改`Classify`。

# java - 如何确定为我的架构提交的最佳任务数量？

> ID：11266743
> 
> 赞同：0
> 
> 时间：2012-06-29T18:01:38.583
> 
> 标签：java, concurrency

我知道对于 CPU 密集型任务，您通常需要每个核心 1 个线程，否则您可以开始为每个核心添加更多线程。但是*每个线程的任务*（或者它们是同一个）呢？

我试图弄清楚如何将一个大问题分成最佳数量的`Runnable`s，以便我可以将它们提交给`Executor`. 我的理解是，然后您可以配置`Executor`将使用的线程数（因此不一定是 1 比 1）。

所以我的问题是：假设我发现对于给定的应用程序，我确定每个核心 5 个线程是最佳比率；**但是我如何`Runnables`首先确定要创建的最佳任务数（ ）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:22:21.823

你把它做成一个旋钮，你可以改变它，直到你满意为止。适用于您的工作站的可能不适用于部署服务器。这取决于。一只手握住旋钮，另一只手握着秒表，并对其进行基准测试，直到您对结果感到满意为止。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T18:13:05.373

你知道**阿姆达尔定律**吗？

使用此公式，您可以确定与*单线程应用程序相比，**多线程*应用程序将获得的潜在*加速*。

 **[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)

总结一下，你有以下公式：

**加速**= *1 / (1 - p) + (p / n)*

在哪里

**p**是并行部分， **1 - p**是顺序部分， **n**是处理器的数量。

如果您的应用程序由 60% 的并发代码和 40% 的顺序代码组成，您的并行部分将是 0.6，而顺序部分是 0.4。

希望这可以帮助你**

# themes - Tumblr：在文字帖子中使用高分辨率照片

> ID：11266746
> 
> 赞同：1
> 
> 时间：2012-06-29T18:01:59.227
> 
> 标签：themes, photo, tumblr

在为 Tumblr 创建自定义主题时，可以将高分辨率照片用于照片帖子和[照片集](https://stackoverflow.com/questions/10963932/disable-tumblr-photosets-or-change-the-size-of-them)。我想知道是否也可以在我的普通文本帖子中嵌入超过 500 像素的图片？到目前为止，像这样的代码仅限于照片帖子：

```
{block:Photos}
   <img src="{PhotoURL-HighRes}" class="highres">
{/block:Photos} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:00:20.527

我认为，您可以使用普通的所见即所得编辑器粘贴高分辨率照片。

此 Tumblr 代码仅输出帖子中包含的所有内容。

```
{block:Text}
    {Body}
{/block:Text} 
```

你试过这个吗？怎么了？

# git - 推送到远程 git 存储库之前的强制审查（ReviewBoard）

> ID：11266747
> 
> 赞同：0
> 
> 时间：2012-06-29T18:02:04.330
> 
> 标签：git, push, review-board

我希望对推送到我们通用远程 git 存储库的任何代码强制使用评论。我选择[了 ReviewBoard](http://www.reviewboard.org/)作为帮助我们实现这一目标的工具，但是在将任何代码推送到存储库之前，我一直在努力使审查成为一项要求。

不幸的是，git pre-push 钩子不是一种选择，也不会成为我所看到的。我看到的唯一选择是使用预接收挂钩，但是将这些与评论联系起来有点棘手。

为了完成这项工作，每个开发人员都必须遵循如下流程：

*   代码，提交，代码，提交...
*   审查后（生成新审查）
*   修复问题、提交、审查后（用新的差异更新审查票）
*   一旦审核被接受（状态：发货！），再次使用像“#review”这样的关键字提交（那必须是提交——修改我猜如果不需要更改）
*   git 推送

pre-receive 钩子必须检查关键字，检查相应的评论是否确实被接受，否则会出错退出。

我觉得通过在推送操作周围创建一个包装器并拥有一个可以正确处理所有这些的自定义脚本会更好地处理这个问题（它甚至可以在推送之前自动创建一个评论票，使用 git config 分支存储票证 id.. review_ticket 并在一切结束时推送）。这基本上与上面相同，但半自动化，这也意味着它会限制开发人员如何使用分支（虽然不一定是问题）。

最后，我可以让开发人员做他们想做的任何事情，但在远程存储库上运行一个 cron 作业，并检查是否有任何更改未经审查就被推送（有点棘手）并发送警告电子邮件。

不过，所有这些解决方案都感觉有点“肮脏”。有人设法建立这样的环境，或者可以在这里提供任何提示吗？请注意，所有这些都必须在共享主机上运行，​​我真的希望它能够与我拥有的当前软件集一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:42:05.157

您可以编写一个接收后挂钩来搜索您的 ReviewBoard 安装，以确保推送的内容的 HEAD 存在于已完成的评论中。这会将您的工作流程更改为：

*   代码，提交，代码，提交，代码，提交...
*   后审查
*   使用重新编写的代码修复问题、提交、后审查
*   git 推送

从而摆脱丑陋的提交修改的事情。

# vb.net - 如何使用 VB.NET 使用 UpDown 控件编辑时间跨度值？

> ID：11266751
> 
> 赞同：3
> 
> 时间：2012-06-29T18:02:30.677
> 
> 标签：vb.net, timer, timespan, numericupdown

我有一个带有显示时间跨度值（持续时间）的文本框的计时器。当我停止计时器时，我想使用 UpDown 控件编辑 Timespan 的值。我想要这样的东西：

![在此处输入图像描述](../Images/99b2975f14245c7f4514df808b53f85a.png)

但是上面的控件是一个 datetimePicker，它的 Format 属性设置为“Custom”，CustomFormat 属性设置为“HH:mm:ss”，ShowUpDown 属性设置为 true。

所以它只能显示 dateTime 值。

我希望它显示时间跨度值（例如“32.23:59:59”）并使用 UpDown 控件编辑秒或分钟或小时或天，具体取决于从光标标记的内容。

这怎么可能？

我必须从头开始创建自定义控件吗？

提前致谢。

**编辑：**经过大量思考和实验，我发现如果 DomainUpDown 控件具有方法 SelectionStart 和 SelectionLength ，则可以使用 DomainUpDown 控件编辑 TimeSpan。

[我向 Visual Studio UserVoice 网站提交了这样的提案。请为这样的功能投票！](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2986711-that-domainupdown-control-has-selectionstart-and-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:45:56.820

使用 DateTimePicker，但设置以下属性

格式 = 时间

ShowUpDown = 真

我想这就是你想要的。

如果你想在那里呆几天，只需设置 Format=Custom 和 CustomFormat = "dd:HH:mm:ss"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:17:10.283

如果您在“时间跨度”上使用此控件的死心塌地，并且您可以确定您的时间跨度小于 24 小时，

```
ReadOnly baseDate As DateTime = New DateTime(2000, 1, 1)
Dim myTimeSpan As New TimeSpan
''// set value
DateTimePicker1.Value = baseDate.Add(myTimeSpan)
''// retrieve value
myTimeSpan = DateTimePicker1.Value.Subtract(baseDate) 
```

但是你必须能够处理时间跨度大于 24 小时或负时间跨度的情况

# iphone - 将文本从 TableViewController 传递到 ViewControllers

> ID：11266752
> 
> 赞同：0
> 
> 时间：2012-06-29T18:02:33.123
> 
> 标签：iphone, ios, uitableview, uiviewcontroller

从 tabelview 发送文本到标签和数字到 int 到 viewcontroller 但它不工作

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    pushnavViewController *detailViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"pushnavViewController"];

    [self.navigationController pushViewController:detailViewController animated:YES];
    detailViewController.pushh.text = [IDNum objectAtIndex:indexPath.row];
    detailViewController.pushh.text = [listt objectAtIndex:indexPath.row];
} 
```

我也尝试过这样做，但没有工作：

```
detailViewController.pushh.text = [IDNum objectAtIndex:indexPath.row];
detailViewController.pushh.text = [listt objectAtIndex:indexPath.row];
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

我制作了所有属性并合成了它们：

```
@property (nonatomic) UILabel *pushh;
@property (nonatomic) UILabel *IDnumber; 
```

那么，有什么想法吗？

```
 NSArray *listt,*IDNum; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:30:51.270

好吧，对于一个你正在使用`detailViewController.pushh.text`的两个任务。我相信应该是`detailViewController.IDnumber.text`第一个。其次，在加载视图之前，您不能更改`.text`标签的属性。

相反，创建一个`NSString`属性并将您的信息保存到`NSString`，然后在您的`viewDidLoad`方法中`pushnavViewController`分配属性`label.text`的值`NSString`。

# php - 当用户在 iOS 版 Safari 中打开 PHP 网页时，我可以检测到 iOS 设备吗？

> ID：11266754
> 
> 赞同：0
> 
> 时间：2012-06-29T18:02:36.303
> 
> 标签：php, ios, browser, mobile-safari, user-agent

我知道我可以获取 iOS 版本，还可以通过以下代码读取浏览器代理来了解用户使用的是 iPod Touch、iPad 还是 iPhone：

```
$_SERVER['HTTP_USER_AGENT']; 
```

但是，我可以检测 iOS 设备的规格吗？就像用户使用 iPhone 一样，它是 iPhone 4S、iPhone 4、iPhone 3GS 还是 iPhone 3G？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:14:22.030

这是一个在 Safari 中由 iOS 设备发送的 User-Agent 示例。

```
Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3 
```

看起来包括操作系统版本（`OS 5_1_1`）。但没有具体说明 iOS 设备的型号/世代。您可以从版本中大致推断出这一点（例如 3G 无法运行 OS > 5）。但这充其量只是猜测。

我很好奇`Mobile/9B206`……这可能与 Safari 相关，而不是设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:15:29.397

有点，注意用户代理与使用 iOS 4 和 iOS 5 的 iPhone 的区别：

iPhone -- iOS 4: Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_2 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8H7 Safari/6533.18。 5

iPhone -- iOS 5: Mozilla/5.0 (iPhone; CPU iPhone OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3

然后您可以在该字符串中找到一个子字符串

# c# - 使用带有 MSCAPI 的 ncipher CSP 进行 AES 加密

> ID：11266758
> 
> 赞同：7
> 
> 时间：2012-06-29T18:02:56.417
> 
> 标签：c#, winapi, encryption, aes, nshield

我试图弄清楚如何使用 MCSAPI 与 ncipher 加密服务提供商 (CSP) 进行 AES 加密。令我困惑的是`AesCryptoServiceProvider`构造函数不接受一个`CspParameters`类，用于将 nCipher 指定为 csp。

```
CspParameters cp = new CspParameters(24, "nCipher Enhanced RSA and AES Cryptographic Provider");
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(CspParameters)  // works fine
AesCryptoServiceProvider aes = new AesCryptoServiceProvider();   // Constructor takes no parameters. 
```

据我所知，Rijndael 类也没有办法指定其他第三方 CSP。我错过了什么？有没有办法初始化我的整个系统以为所有后续加密调用加载 CSP？我是否想使用 CSP 来管理对称密钥，然后使用默认值`AesCryptoServiceProvider`来加密/解密？ `RSACryptoServiceProvider(CspParameters)`工作得很好。但我想做对称加密。我需要在 C# .NET 框架中执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T23:02:11.773

Microsoft CAPI 不支持对称算法的硬件保护密钥。这是 API 的缺点，而不是 nCipher CSP 的缺点。唯一可以受硬件保护的密钥是 CAPI 容器的签名和交换密钥对。创建的任何对称密钥都是在软件中生成和使用的。

您可以将（软件）对称密钥包装在（硬件）容器密钥中以进行保护和持久性，但这不会使这些对称密钥受到硬件保护。

如果您在任何 Vista、Server 2008 或更高版本上进行部署，则应考虑 CAPI Next Generation 或 CNG：它支持生成和使用受硬件保护的对称密钥，并且 Thales/nCipher CNG CSP 对此提供支持。但是，Thales/nCipher CNG CSP 不支持持久对称密钥，因此您必须将它们包装在容器密钥对中，就像使用老式 CAPI 一样。

我为泰雷兹工作，但不代表他们：如果您有任何问题和/或想了解如何获得开发人员支持，请联系泰雷兹支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T14:34:20.253

AES 是一种对称算法，因此不能使用 CspParameters。

nCipher 是一种硬件标准（请参阅[http://technet.microsoft.com/en-us/library/dd277354](http://technet.microsoft.com/en-us/library/dd277354)），因此您的令牌可以计算 AES 算法，但每个人（Alice 和 Bob）都需要知道密钥在硬件令牌上计算或存储密钥没有任何好处。

[您可以在MSDN 示例](http://msdn.microsoft.com/de-de/library/system.security.cryptography.aescryptoserviceprovider.aspx)中看到如何使用 AesCryptoServiceProvider ，也许您想使用[AesManaged](http://msdn.microsoft.com/de-de/library/system.security.cryptography.aesmanaged)（还有一个示例）。

# android - 硬件加速画布

> ID：11266762
> 
> 赞同：1
> 
> 时间：2012-06-29T18:02:58.443
> 
> 标签：android, hardware, android-canvas

我目前正在研究绘制到画布上的密集 LiveWallpaper。我偶然看到了以下视频：[http](http://www.youtube.com/watch?v=v9S5EO7CLjo) ://www.youtube.com/watch?v=v9S5EO7CLjo 。

但是，当我尝试实现硬件加速时，出现错误。这是我的代码：

```
if (c != null && mStaticRects.length > 10 && c.isHardwareAccelerated())
                    drawSurfacePortrait(c);

if (c != null && mStaticRects.length < 20 && c.isHardwareAccelerated())
                    drawSurfaceLandscape(c); 
```

当我运行它时，这是相应的错误：

```
AndroidRuntime(382): java.lang.NoSuchMethodError: android.graphics.Canvas.isHardwareAccelerated 
```

最后这是我的清单......

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="stuff.of.mine"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.VIBRATE" ></uses-permission>

<uses-feature
    android:name="android.software.live_wallpaper"
    android:required="true" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    ***android:hardwareAccelerated="true"***>
    <service
        android:name=".SomeWPService"
        android:permission="android.permission.BIND_WALLPAPER" 
        ***android:hardwareAccelerated="true"***>
        <intent-filter>
            <action android:name="android.service.wallpaper.WallpaperService" />
        </intent-filter>

        <meta-data
            android:name="android.service.wallpaper"
            android:resource="@xml/mylwp" />
    </service>

</application> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:26:43.937

好的，我正在搜索 stackoverflow 并偶然发现了我自己问题的答案

事实上，视频中的其中一个人 Romain Guy 在以下线程中回答了：

*SurfaceView 中的画布 - 硬件加速*

他说：

**SurfaceView.lockCanvas() 返回的 Canvas 目前无法进行硬件加速。**

我想知道的是如何在没有 SurfaceView.lock 和 unlockCanvas 的情况下创建动态壁纸？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T18:07:43.197

`canvas.isHardwareAccelerated`在 API 11 中引入，您的 minSdkVersion 为 7。尝试将其更改为 11。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T12:48:55.663

您可以在以下级别控制硬件加速：

*   应用
*   活动
*   窗户
*   看法

在你的代码中，

```
<service
        android:name=".SomeWPService"
        android:permission="android.permission.BIND_WALLPAPER" 
        ***android:hardwareAccelerated="true"***> 
```

服务标签不包含 android:hardwareAccelerated ！

# c# - 制作一个接受多个以逗号分隔的参数的 Web 服务（asp.NET）

> ID：11266764
> 
> 赞同：0
> 
> 时间：2012-06-29T18:03:12.030
> 
> 标签：c#, asp.net, sql

我有以下 Web 服务和 SQL 查询：

```
 public class DIENSTLEISTUNG
        {
            public string DienstleistungName { get; set; }
            public string DienstleistungArtBezeichnung { get; set; }
        }

        internal static List<DIENSTLEISTUNG> Dienstleistung(string RAUM_ID)
        {
            List<DIENSTLEISTUNG> BestuhlungObject = new List<DIENSTLEISTUNG>();

using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
            using (SqlCommand cmd = new SqlCommand(@"
                                       SELECT
                                       DISTINCT dl.NAME AS NAME, da.BEZEICHNUNG AS BEZEICHNUNG
                                       FROM RAUM r
                                       RIGHT JOIN DIENSTLEISTUNG_Raum bs ON bs.RAUM_ID = (" + Room_ID + ") 
                                       RIGHT JOIN DIENSTLEISTUNG ba ON bs.DIENSTLEISTUNG_ID = ba.ID 
                                       RIGHT JOIN DIENSTLEISTUNGSART da ON ba.DIENSTLEISTUNGSART_ID = da.ID
                                       RIGHT JOIN DIENSTLEISTER dl ON da.DIENSTLEISTER_ID = dl.ID", con))

            {
                con.Open();
                using (SqlDataReader rdr = cmd.ExecuteReader())
                {
                  while (rdr.Read())
                    {
                        if (rdr["NAME"] != DBNull.Value && rdr["BEZEICHNUNG"] != DBNull.Value)
                        {

                            BestuhlungObject.Add(new DIENSTLEISTUNG()
                               {                                                                                                                                      
                                DienstleistungName = rdr["NAME"].ToString(),
                                DienstleistungArtBezeichnung = rdr["BEZEICHNUNG"].ToString()
                             });

                        }

                    }
                }
            }
            return BestuhlungObject;
        }

    }
} 
```

这个 Web 服务的工作就像魅力一样。我可以发送一个 Room_ID = 219 并获得预期的输出。我的问题是，我如何发送多个以逗号分隔的 Room_ID。例如：Room_ID = 219、220、221

有人可以帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:24:47.080

请参阅[接受多个 Id 值的 T-SQL 存储过程](https://stackoverflow.com/questions/43249/t-sql-stored-procedure-that-accepts-multiple-id-values/43767#43767)

多种方式之一（MS SQL 2005+），如果您可以将参数作为 xml 传递：

```
var sql =
    @"SET ARITHABORT ON;
    SELECT ...  
    RIGHT JOIN DIENSTLEISTUNG_Raum bs ON bs.RAUM_ID IN
    (
        SELECT tbl.col.value('.', 'varchar(20)')
        FROM @xml.nodes('id') as tbl(col)
    ) ...";
SqlCommand cmd = new SqlCommand(sql, connection);
cmd.Parameters.Add("@xml", SqlDbType.Xml).Value = "<id>111</id><id>222</id><id>333</id>"; 
```

或者如果您可以将参数传递为 LIKE，请使用`,aaa,bbb,ccc,`（注意 LIKE 参数的顺序以避免注入）

```
var sql =
    @"SELECT ...    
    RIGHT JOIN DIENSTLEISTUNG_Raum bs ON @ids LIKE '%,' + bs.RAUM_ID + ',%'
    ...";
SqlCommand cmd = new SqlCommand(sql, connection);
cmd.Parameters.Add("@ids", SqlDbType.VarChar).Value = ",111,222,333,"; 
```

# unit-testing - 干燥 EasyMock 测试

> ID：11266765
> 
> 赞同：0
> 
> 时间：2012-06-29T18:03:16.493
> 
> 标签：unit-testing, testing, mocking, dry, easymock

似乎 EasyMock 测试倾向于遵循以下模式：

```
@Test
public void testCreateHamburger()
{
  // set up the expectation
  EasyMock.expect(mockFoodFactory.createHamburger("Beef", "Swiss", "Tomato", "Green Peppers", "Ketchup"))
    .andReturn(mockHamburger);

  // replay the mock
  EasyMock.replay(mockFoodFactory);

  // perform the test
  mockAverager.average(chef.cookFood("Hamburger"));

  // verify the result
  EasyMock.verify(mockFoodFactory);
} 
```

这适用于一个测试，但是当我想用不同的方法再次测试相同的逻辑时会发生什么？我的第一个想法是做这样的事情：

```
@Before
public void setUp()
{
  // set up the expectation
  EasyMock.expect(mockFoodFactory.createHamburger("Beef", "Swiss", "Tomato", "Green Peppers", "Ketchup"))
    .andReturn(mockHamburger);

  // replay the mock
  EasyMock.replay(mockCalculator);
}

@After
public void tearDown()
{
  // verify the result
  EasyMock.verify(mockCalculator);
}

@Test
public void testCreateHamburger()
{
  // perform the test
  mockAverager.average(chef.cookFood("Hamburger"));
}

@Test
public void testCreateMeal()
{
  // perform the test
  mockAverager.average(chef.cookMeal("Hamburger"));
} 
```

这种方法存在一些基本问题。首先是我的方法调用不能有任何变化。如果我想测试`person.cookFood("Turkey Burger")`，我的设置方法将不起作用。第二个问题是我的设置方法需要调用 createHamburger。如果我打电话`person.cookFood("Salad")`，那么这可能不适用。我可以使用`anyTimes()`或`stubReturn()`配合 EasyMock 来避免这个问题。但是，这些方法仅验证是否调用了某个方法，是否使用某些参数调用该方法，*而不验证该方法是否实际被调用*。

迄今为止唯一可行的解​​决方案是复制和粘贴每个测试的期望值并改变参数。 **有没有人知道使用 EasyMock 进行测试的更好方法，它保持 DRY 原则？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:10:30.080

您遇到的问题是因为单元测试应该是[DAMP 而不是 DRY](https://stackoverflow.com/questions/6453235/what-does-damp-not-dry-mean-when-talking-about-unit-tests)。单元测试往往会重复自己。如果您可以以安全的方式删除重复项（这样它就不会创建不必要的耦合测试），那就去做吧。如果没有，那就不要勉强。单元测试应该快速简单……如果不是，那么您将花费太多时间测试而不是编写业务价值。

只是我的两分钱。[顺便说一句，Roy Osherove 的《单元测试艺术》](http://artofunittesting.com/)是一本关于单元测试的好书，涵盖了这个主题。

# python - 这个 sqlite3 查询的正确格式是什么？（Python）

> ID：11266772
> 
> 赞同：1
> 
> 时间：2012-06-29T18:04:13.747
> 
> 标签：python, sqlite, python-2.7

我有以下代码：

```
def add_record(self,values):
    self.sql.execute("INSERT INTO TEST VALUES (?,?)" % values) 
```

我想调整它以适应用户定义的表，例如：

```
def add_record(self,tablename,values):
        self.sql.execute("INSERT INTO TEST VALUES (?,?)" % values) 
```

但是我不喜欢正确的格式。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:09:12.327

请注意，对任何查询使用字符串插值都会带来[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)的风险。

如果您可以确定不会使用恶意代码，则可以使用以下两步过程。
1\. 表名的字符串插值。
2\. 将查询参数作为第二个参数传递给`.execute()`

（不支持表名和/或列名的参数化。）

```
def add_record(self, tablename, values):
    the_query = "INSERT INTO {:s} VALUES (?,?);".format(tablename)
    self.sql.execute(the_query, values) 
```

# php - PHP：从字符串中提取压缩的十六进制数字

> ID：11266774
> 
> 赞同：4
> 
> 时间：2012-06-29T18:04:17.447
> 
> 标签：php, pack, unpack, payload

我正在尝试从字符串中提取压缩的十六进制数字。我的应用程序正在与一个服务器通信，该服务器发送一个带有标头的字符串，后跟 2 字节打包的十六进制数字。这个字符串中有数千个数字。

我想要做的是提取每个 2 字节压缩数字，并将其转换为我可以用来执行计算的数字。

示例：`string = "info:\x00\x00\x11\x11\x22\x22"`将产生三个数字`0x0000`（十进制 0）、`0x1111`（十进制 4369）、`0x2222`（十进制 8738）

我有一个可行的解决方案（见下文），但是当我尝试处理服务器发送的数千个数字时，它的运行速度太慢了。请提供一些建议以加快我的方法。

```
//Works but is too slow!
//$string has the data from the server
$arrayIndex = 0;
for($index = [start of data]; $index < strlen($string); $index+=2){
    $value = getNum($string, $index, $index+1);
    $array[$arrayIndex++] = $value;
}
function getNum($string, $start, $end){
    //get the substring we're interested in transforming
    $builder = substr($string, $start, $end-$start+1);  

    //convert into hex string
    $array = unpack("H*data", $builder);
    $answer = $array["data"];

    //return the value as a number
    return hexdec($answer);
} 
```

我也一直在尝试在单个解包命令中提取数字，但这不起作用（我在理解要使用的格式字符串时遇到了一些麻烦）

```
//Not working alternate method
//discard the header (in this case 18 bytes) and put the rest of the
//number values I'm interested in into an array
$unpacked = unpack("c18char/H2*data", $value);
for($i = 0; $i < $size; $i+=1){
    $data = $unpacked["data".$i];
    $array[$i] = $data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:30:52.923

```
$array = array();
$len = strlen($string);
for($index = [start of data];          $index < $len;               $index+=2){
    $d = unpack("H*data", substr($string, $index, 2));
    $array[] = hexdec($d["data"]);
} 
```

我做的唯一重要的事情是缓存 strlen 的值并减少函数调用。

你也可以试试这个

```
foreach (str_split(substr($string, [start of data]), 2) as $chunk) {
    $d = unpack("H*data", $chunk);
    $array[] = hexdec($d["data"]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:18:28.567

我可以建议的一件事是通过引用传递包含数千个十六进制数字的字符串，而不是值。如果假设有 3k 个数字，则字符串是 12k 长字符，3k 函数调用的倍数导致 ~36M（如果每个字符使用一个字节，则 ~72M 如果 utf8）堆栈上不必要的分配内存：

```
$arrayIndex = 0;
for($index = [start of data]; $index < strlen($string); $index+=2){
    $value = getNum($string, $index, $index+1);
    $array[$arrayIndex++] = $value;
}
 //pass by reference rather than value
function getNum(&$string, $start, $end){
    //get the substring we're interested in transforming
    //$builder = substr($string, $start, $end-$start+1);  
    //not sure if substr takes reference or value, so implementing this way, just in case it's by value
      $builder = $string[$start] . $string[$start + 1] ;
    //convert into hex string
    $array = unpack("H*data", $builder);
    $answer = $array["data"];

    //return the value as a number
    return hexdec($answer);
} 
```

不确定这会加快多少速度（肯定是内存分配），但绝对值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:19:39.783

为什么不尝试类似的东西：

```
$string = "info:\x00\x00\x11\x11\x22\x22";

$ret = array();
preg_match_all('#\\x(\d{2})#', $string, $items);
if(isset($items[1]) && count($items[1])>0)
{
     for($i=0;$i<count($items[1]);$i+=2)
     {
            if(isset($items[1][$i]) && isset($items[1][$i+1]))
            {
                    $ret[] = '0x' . $items[1][$i] . $items[1][$i+1];
                    unset($items[1][$i]);
                    unset($items[1][$i+1]);
            }
     }
} 
```

# android - 应用程序崩溃-Web 服务不返回

> ID：11266775
> 
> 赞同：0
> 
> 时间：2012-06-29T18:04:23.093
> 
> 标签：android, eclipse, web-services, google-maps, crash

所以我开发了这个应用程序来访问设备上的谷歌地图。之后，它读取设备上可见屏幕的角坐标（左上角和右下角）并将值存储在变量 xmin xmax ymin 和 ymax 中。现在这些值被传递给 Web 服务，

```
http://hiscentral.cuahsi.org/webservices/hiscentral_1_1.asmx/GetSeriesCatalogForBox2 
```

连同代码中提到的其他参数，以获取需要在该区域绘制的注释的坐标。

现在对于硬编码值的值，例如，

```
 xmin= -100
    ymin= -99
    xmax= 40
    ymax= 41 
```

该程序工作正常，输出是一个解析的xml并绘制了注释但是当我尝试使用地图上可见的角坐标时，值是，

```
40338927
-99388178
40347297
-99399164 
```

Web 服务没有返回。这会使应用程序崩溃。我不希望它崩溃，但没有绘制任何内容，这表明该区域内没有车站。我怎样才能做到这一点。

请帮忙，

提前谢谢

编码：

AndroidTestActivity.java

```
public class AndroidTestActivity extends MapActivity 
{
/** Called when the activity is first created. */
ArrayList<String> arrlat_long = new ArrayList<String>();
ArrayList<String> arrlat_lat = new ArrayList<String>();
ArrayList<String> d = new ArrayList<String>();
private static final String ACTION_RECV_MSG = "com.imrankhanandroid.intent.action.RECEIVE_MESSAGE";  
private static final String ACTION_OTHER_MSG = "com.imrankhanandroid.intent.action.OTHER_MESSAGE"; 
MapView mapView;
private MessageReceiver receiver ; 
private MapController mapController;
double topLat;
double topLon;
double bottomLat;
double bottomLon;
String strtest,strtest1,strtest2,strtest3;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    mapController.setZoom(8);

    Projection proj = mapView.getProjection();  
    GeoPoint topLeft = proj.fromPixels(0, 0);
    GeoPoint bottomRight = proj.fromPixels(mapView.getWidth()-1, mapView.getHeight()-1);
    topLat = topLeft.getLatitudeE6()/1E6;
    topLon = topLeft.getLongitudeE6()/1E6;
    bottomLat = bottomRight.getLatitudeE6()/1E6;
    bottomLon = bottomRight.getLongitudeE6()/1E6;
    int n= ((int) (topLat*1E6));

    int n1= ((int) (topLon*1E6));

    int n2= ((int) (bottomLat*1E6));

    int n3= ((int) (bottomLon*1E6));

    strtest=Integer.toString(n)+"/"+Integer.toString(n1)+"/"+Integer.toString(n2)+"/"+Integer.toString(n3);
    Log.d("strtest strtest", "strtest strtest = "+strtest);
    Intent msgIntent = new Intent(AndroidTestActivity.this,Intentservice.class); 
    msgIntent.putExtra("strtest", strtest);  //arrlat_long
    startService(msgIntent); 

    //Dynamic registration Receiver
    IntentFilter filter = new IntentFilter(ACTION_RECV_MSG);  
    filter.addCategory(Intent.CATEGORY_DEFAULT);  
    receiver = new MessageReceiver();  
    registerReceiver(receiver, filter);  
    IntentFilter filter2 = new IntentFilter(ACTION_OTHER_MSG);  
    filter2.addCategory(Intent.CATEGORY_DEFAULT);  
    receiver = new MessageReceiver();  
    registerReceiver(receiver, filter2);  
}  
  //Broadcast to receive 
public class MessageReceiver extends BroadcastReceiver 
{  
    @Override  
    public void onReceive(Context context, Intent intent) 
    {   
        arrlat_long = intent.getStringArrayListExtra("codnt");  
        arrlat_lat = intent.getStringArrayListExtra("codntlat");  
      // text.setText(message);      
    Toast.makeText(context, arrlat_long.get(0),Toast.LENGTH_SHORT).show();
    testoverlay();
    }  
}  
public void testoverlay()
{
   for(int i=0;i<arrlat_long.size();i++)
   {

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.mapmarker);
        HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
        float lat = Float.parseFloat(arrlat_lat.get(i));
        float lng = Float.parseFloat(arrlat_long.get(i));
        GeoPoint point = new GeoPoint((int)(lat * 1E6), (int)(lng * 1E6));
        OverlayItem overlayitem = new OverlayItem(point, "", "");
        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);

   }

}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

HelloItemizedOverlay.java

```
public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem>
{
 private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
 private Context mContext;

 public HelloItemizedOverlay(Drawable defaultMarker, Context context)
 {
 super(boundCenterBottom(defaultMarker));
 mContext = context;
 }

 public void addOverlay(OverlayItem overlay)
 {
 mOverlays.add(overlay);
 populate();
 }
 @Override
 protected OverlayItem createItem(int i)
 {
 return mOverlays.get(i);
 }
 @Override
 public int size()
 {
 return mOverlays.size();
 }
 @Override
 protected boolean onTap(int index)
 {

 return true;
 }
} 
```

IntentService.java

```
public class Intentservice extends IntentService 
{
private static final String ACTION_RECV_MSG = "com.imrankhanandroid.intent.action.RECEIVE_MESSAGE";
private static final String ACTION_OTHER_MSG = "com.imrankhanandroid.intent.action.OTHER_MESSAGE"; 
ArrayList<String> arrlat_long = new ArrayList<String>();
ArrayList<String> arrlat_lat = new ArrayList<String>();
public static String str="";
public static String str1="";
int n=0;
String responseBody;
Integer topLat=0;
Integer topLon=0;
Integer bottomLat=0;
Integer bottomLon=0;
ArrayList<String> a= new ArrayList<String>();
ArrayList<String> b= new ArrayList<String>();
ArrayList<String> c= new ArrayList<String>();
ArrayList<String> d= new ArrayList<String>();
MapView mapView;
private MessageReceiver receiver;

public Intentservice()
{
    super("Intentservice");
    // TODO Auto-generated constructor stub
}

@Override
protected void onHandleIntent(Intent intent) 
{
    String strxmin,xmax,ymin,ymax;
    String str=intent.getExtras().getString("strtest");
    Log.d("onHandleIntent", "onHandleIntent onHandleIntent= "+str);
    String[] arrtelog=str.split("/");
    strxmin=arrtelog[0];
    xmax=arrtelog[1];
    ymin=arrtelog[2];
    ymax=arrtelog[3];

   // strxmin=str;
  //  xmax=str1;
  //  ymin=str2;
  //  ymax=str3;

    // TODO Auto-generated method stub
    HttpClient httpclient = new DefaultHttpClient();   
     String Url = "http://hiscentral.cuahsi.org/webservices/hiscentral_1_1.asmx/GetSeriesCatalogForBox2";
     if(!Url.endsWith("?"))
     {
            Url += "?";
     }

     List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);   
     nameValuePairs.add(new BasicNameValuePair("xmin",xmax));
     nameValuePairs.add(new BasicNameValuePair("xmax", ymax));
     nameValuePairs.add(new BasicNameValuePair("ymin", "40"));
     nameValuePairs.add(new BasicNameValuePair("ymax", "41"));
     nameValuePairs.add(new BasicNameValuePair("networkIDs", ""));
     nameValuePairs.add(new BasicNameValuePair("conceptKeyword", "precipitation"));
     nameValuePairs.add(new BasicNameValuePair("beginDate", "1/1/2009"));
     nameValuePairs.add(new BasicNameValuePair("endDate", "1/1/2010"));
     String paramString = URLEncodedUtils.format(nameValuePairs, "utf-8");
     Url += paramString;
     try 
        {
           HttpPost httppost = new HttpPost(Url); 
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           HttpResponse response = httpclient.execute(httppost);
           responseBody = EntityUtils.toString(response.getEntity());
           XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
           factory.setValidating(false);
           XmlPullParser myxml = factory.newPullParser();
           InputStream raw = new ByteArrayInputStream(responseBody.getBytes());
           myxml.setInput(raw, null);
           int eventType = myxml.getEventType();

           while(eventType != XmlPullParser.END_DOCUMENT) 
           {
          if(eventType == XmlPullParser.START_DOCUMENT) 
             {

                 Log.d("ParseXmlActivity", "In start document");
             }
             else if(eventType == XmlPullParser.START_TAG) 
             {
                 if (myxml.getName().equals("latitude"))
                    {
                        str="";
                        str  =  myxml.nextText().toString();
                         Log.d("ParseXmlActivity", "In start tag = "+str);
                         arrlat_lat.add(str);
                    }
                    if (myxml.getName().equals("longitude"))
                    {
                        str = myxml.nextText().toString();
                         Log.d("ParseXmlActivity", "In start tag = "+str);
                         arrlat_long.add(str);
                    }

           }

           eventType = myxml.next();

   } }
   catch (XmlPullParserException e) 
   {
   } 
   catch (IOException e)
   {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

     IntentFilter filter = new IntentFilter(ACTION_RECV_MSG); 
     filter.addCategory(Intent.CATEGORY_DEFAULT);  
     receiver = new MessageReceiver();  
     registerReceiver(receiver, filter); 

   Log.d("TEST TESTTEST", "In start TESTTEST = "+arrlat_long.get(0)+" $$$ "+arrlat_long.size());
   Intent broadcastIntent = new Intent();  
   broadcastIntent.setAction(ACTION_RECV_MSG);  
   broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);  
   broadcastIntent.putStringArrayListExtra("codnt", arrlat_long);  //arrlat_long
   broadcastIntent.putStringArrayListExtra("codntlat", arrlat_lat);  //arrlat_lat
   sendBroadcast(broadcastIntent);  
} 
```

原木猫是，

```
 06-29 18:37:18.786: W/dalvikvm(1344): threadid=12: thread exiting with uncaught exception (group=0x409c01f8)
    06-29 18:37:18.796: E/AndroidRuntime(1344): FATAL EXCEPTION: IntentService[Intentservice]
06-29 18:37:18.796: E/AndroidRuntime(1344): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
06-29 18:37:18.796: E/AndroidRuntime(1344):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
06-29 18:37:18.796: E/AndroidRuntime(1344):     at java.util.ArrayList.get(ArrayList.java:304)
06-29 18:37:18.796: E/AndroidRuntime(1344):     at com.imrankhanandroid.Androidtest.Intentservice.onHandleIntent(Intentservice.java:157)
06-29 18:37:18.796: E/AndroidRuntime(1344):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
06-29 18:37:18.796: E/AndroidRuntime(1344):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 18:37:18.796: E/AndroidRuntime(1344):     at android.os.Looper.loop(Looper.java:137)
06-29 18:37:18.796: E/AndroidRuntime(1344):     at android.os.HandlerThread.run(HandlerThread.java:60)
06-29 18:37:19.086: D/dalvikvm(1344): GC_CONCURRENT freed 168K, 3% free 10132K/10375K, paused 4ms+4ms
06-29 18:37:20.527: E/ActivityThread(1344): Activity com.imrankhanandroid.Androidtest.AndroidTestActivity has leaked IntentReceiver com.imrankhanandroid.Androidtest.AndroidTestActivity$MessageReceiver@412bf4a0 that was originally registered here. Are you missing a call to unregisterReceiver()?
06-29 18:37:20.527: E/ActivityThread(1344): android.app.IntentReceiverLeaked: Activity com.imrankhanandroid.Androidtest.AndroidTestActivity has leaked IntentReceiver com.imrankhanandroid.Androidtest.AndroidTestActivity$MessageReceiver@412bf4a0 that was originally registered here. Are you missing a call to unregisterReceiver()?
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1043)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1030)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1024)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:341)
06-29 18:37:20.527: E/ActivityThread(1344):     at com.imrankhanandroid.Androidtest.AndroidTestActivity.onCreate(AndroidTestActivity.java:81)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.Activity.performCreate(Activity.java:4465)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.os.Looper.loop(Looper.java:137)
06-29 18:37:20.527: E/ActivityThread(1344):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-29 18:37:20.527: E/ActivityThread(1344):     at java.lang.reflect.Method.invokeNative(Native Method)
06-29 18:37:20.527: E/ActivityThread(1344):     at java.lang.reflect.Method.invoke(Method.java:511)
06-29 18:37:20.527: E/ActivityThread(1344):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-29 18:37:20.527: E/ActivityThread(1344):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-29 18:37:20.527: E/ActivityThread(1344):     at dalvik.system.NativeStart.main(Native Method)
06-29 18:37:20.557: E/ActivityThread(1344): Activity com.imrankhanandroid.Androidtest.AndroidTestActivity has leaked IntentReceiver com.imrankhanandroid.Androidtest.AndroidTestActivity$MessageReceiver@412d2f88 that was originally registered here. Are you missing a call to unregisterReceiver()?
06-29 18:37:20.557: E/ActivityThread(1344): android.app.IntentReceiverLeaked: Activity com.imrankhanandroid.Androidtest.AndroidTestActivity has leaked IntentReceiver com.imrankhanandroid.Androidtest.AndroidTestActivity$MessageReceiver@412d2f88 that was originally registered here. Are you missing a call to unregisterReceiver()?
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1043)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1030)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1024)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:341)
06-29 18:37:20.557: E/ActivityThread(1344):     at com.imrankhanandroid.Androidtest.AndroidTestActivity.onCreate(AndroidTestActivity.java:85)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.Activity.performCreate(Activity.java:4465)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.os.Looper.loop(Looper.java:137)
06-29 18:37:20.557: E/ActivityThread(1344):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-29 18:37:20.557: E/ActivityThread(1344):     at java.lang.reflect.Method.invokeNative(Native Method)
06-29 18:37:20.557: E/ActivityThread(1344):     at java.lang.reflect.Method.invoke(Method.java:511)
06-29 18:37:20.557: E/ActivityThread(1344):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-29 18:37:20.557: E/ActivityThread(1344):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-29 18:37:20.557: E/ActivityThread(1344):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:02:52.513

作为您的 logcat 行：

```
at com.imrankhanandroid.Androidtest.Intentservice.onHandleIntent(Intentservice.java:157)
06-29 18:37:18.796: E/AndroidRuntime(1344):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65) 
```

表示问题出在 IntentService 的 onHandleIntent 中：

```
Override
protected void onHandleIntent(Intent intent) 
{
    String strxmin,xmax,ymin,ymax;
    String str=intent.getExtras().getString("strtest");
    Log.d("onHandleIntent", "onHandleIntent onHandleIntent= "+str);
    String[] arrtelog=str.split("/");
   if(arrtelog.length >=3)
    {
      strxmin=arrtelog[0];
      xmax=arrtelog[1];
      ymin=arrtelog[2];
      ymax=arrtelog[3];
    }
  else{
     //your code here if array length is 0
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T21:51:47.837

如果您遇到`IndexOutOfBounds`异常，那么您就是在这样做。如果您的`ArrayList`大小为 0，则调用`<yourlist>.get(0)`将崩溃，因为列表中没有第 0 项。要解决此问题，只需检查`ArrayList`它是否为 null 或为空，例如：

```
if(arrlat_long != null && arrlat_long.isEmpty() == false)
    Toast.makeText(context, arrlat_long.get(0),Toast.LENGTH_SHORT).show(); 
```

或者您可以使用 a`try/catch`并捕获`IndexOutOfBounds`异常并选择忽略它，因为您似乎期望这一点。

# qt - 在 Qt 中管理字符串资源

> ID：11266776
> 
> 赞同：1
> 
> 时间：2012-06-29T18:04:24.027
> 
> 标签：qt

我有一个字符串，我在程序的各个点都需要它。我知道 Qt 可以管理图像资源，但我需要几个字符串的类似功能。目前我正在使用一个字符串资源类，这是一个[草率的解决方案](https://en.wikipedia.org/wiki/Poltergeist_%28computer_programming%29)。

```
class StringRes {
public:
    static const QString& appName() { return _appName; }
    static const QString& appVersion() { return _appVersion; }
private:
    static const QString _appName;
    static const QString _appVersion;
}; 
```

此外，此解决方案会在我的代码中的某个点导致段错误。

```
_fileStream << QString("This is ")
               + StringRes::appName()
               + " "
               + StringRes::appVersion()
               + " reporting for duty.\n"; 
```

Qt 程序员（或一般的 C++ 程序员）如何管理他们的字符串资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:32:06.943

要仅存储应用程序的名称和版本以及组织的名称和域，您可以使用[QCoreApplications](http://qt-project.org/doc/qt-4.8/QCoreApplication.html)的属性 applicationName、applicationVersion、organizationDomain 和 organizationName。

我通常在`main()`函数中设置它们：

```
#include <QApplication>
#include "MainWindow.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    // These functions are member of QCoreApplication, QApplication's
    // parent class:
    app.setApplicationName("My Application");
    app.setApplicationVersion("3.5.2");
    app.setOrganizationName("My Company, or just My Name");
    app.setOrganizationDomain("http://example.com/");

    MainWindow window;
    window.show();

    return app.exec();
} 
```

我可以用它们来显示一个关于消息的好消息：

```
#include "MainWindow.h"
#include <QCoreApplication>

...

// Slot called when ? -> About menu is clicked.
void MainWindow::on_aboutAction_triggered()
{
    QString message = tr("<strong>%1</strong> %2<br />"
                         "Developed by %3")
            .arg(QCoreApplication::applicationName())
            .arg(QCoreApplication::applicationVersion())
            .arg(QString("<a href=\"%1\">%2</a>")
                .arg(QCoreApplication::organizationDomain())
                .arg(QCoreApplication::organizationName()))
            ;

    QMessageBox::about(this, tr("About"), message);
} 
```

# php - Ubuntu imageMagick 不会将 PDF 从 www-data (php) 转换为 PNG

> ID：11266777
> 
> 赞同：0
> 
> 时间：2012-06-29T18:04:25.373
> 
> 标签：php, linux, ubuntu, imagemagick

当我想使用简单的 php 脚本转换 pdf 文件时遇到问题，例如：

```
<?php
    shell_exec("convert pdf.pdf image.png");
?> 
```

从终端（SSH 连接）转换时转换工作正常，但前提是我以自己的身份登录。以下不会给出错误，也不会给出输出文件“image.png”。

```
sudo su www-data
<enters password>
convert pdf.pdf image.png 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:43:24.677

您的文件/文件夹权限错误，imagemagick (convert) 需要写权限：

```
sudo chmod g+w folder 
```

查看[http://www.tuxfiles.org/linuxhelp/filepermissions.html](http://www.tuxfiles.org/linuxhelp/filepermissions.html)以获得很好的帮助/解释文件/文件夹“模式”是什么以及它们如何工作。

# android - 显示重复行：新的 Android 4.1 + Jquerymobile + Phonegap 1.8

> ID：11266778
> 
> 赞同：0
> 
> 时间：2012-06-29T18:04:39.173
> 
> 标签：android, jquery-mobile, cordova

我在使用 Android 4.0.3+JQM+Phonegap 时没有遇到任何问题。昨天我在Android 4.1上测试，发现那些动态生成的ListView有时会给我重复的结果。例如，我使用以下代码生成一个 ListView 来显示今天的日期：

```
<ul data-role="listview" data-inset="true" data-theme="c" 
data-divider-theme="d" id="todayvalue">             
</ul>

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
var today = new Date();
var dayofmonth = today.getDate();
var dayofweek = today.getDay();
var year = today.getFullYear();
var month = today.getMonth();
var myDays=      ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
var m_names = ["January", "February", "March", 
    "April", "May", "June", "July", "August", "September", 
    "October", "November", "December"];
$('#todayvalue').append('<li>Today is '+ myDays[dayofweek]+ ', '+year+'-'+m_names[month]+'-'+dayofmonth+'</li>');
$('#todayvalue').listview('refresh');

 } 
```

它以前完全没有问题。但现在它会生成两个相同的行。

怪谁？

更新：我已将项目上传到[https://github.com/ysongfinance/520Toll](https://github.com/ysongfinance/520Toll)。

经过进一步调试，我发现**onDeviceReady() 被调用了两次**，但其中一个看起来很奇怪：

07-05 20:42:31.368：I/Web 控制台（825）：########in OndeviceReady at file:///android_asset/www/js/updatetoll.js:4 07-05 20:42 ：31.488：I/Web 控制台（825）：########in OndeviceReady **at null** :4

看看第二个调用“在 OndeviceReady 中为 null”，那个“null”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:19:54.487

我用 Cordova 1.9 和 Android 2.2 尝试了你的例子，它触发`deviceready`了两次。

然后我将`updatetoll.js`包含在身体中的东西移到头部，它只发射一次。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>520 Toll Rate</title>
        <link rel="stylesheet" href="css/jquery.mobile-1.0.1.min.css" /> 

        <script src="js/jquery-1.6.4.min.js"></script> 
        <script src="js/jquery.mobile-1.0.1.min.js"></script>

        <script type="text/javascript" charset="utf-8" src="js/cordova-1.9.0.js"></script>
        <script src="js/updatetoll.js"></script>        
    </head>
    <body>      
        <div data-role="header">                
                <img src="logo/ic520toll.png" width=50px height=50px style="margin-left: 40%;"">            
        </div>
        <div data-role="content">
        <ul data-role="listview" data-inset="true" data-theme="c" 
            data-divider-theme="d" id="todayvalue">             
        </ul>           

        </div>  

    </body>
</html> 
```

您能否检查此更改并查看它在您的设备中是否有效。

## 编辑

如果将侦听器放在`head`标签之外，jQuery Mobile 似乎会产生问题。我尝试了较新版本的 jQuery Mobile (1.1.0)，但效果仍然相同。

如果您删除 jQuery Mobile 并保持您的代码不变，那么它只会触发一次。

# arrays - 使用 href 链接传递 JSP 输入

> ID：11266781
> 
> 赞同：0
> 
> 时间：2012-06-29T18:04:51.050
> 
> 标签：arrays, jsp, parameter-passing, href

我想用 href 而不是按钮传递输入数据。问题是我正在发送一个数组，我的 for 循环正在存储输入数据，因此它创建了多个链接。采取什么行动来解决这个问题。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Firstjsp</title>
</head>
<body>
<% String locations[] = {"Loan 1", "33.890542", "151.274856", "Address 1","true", "-35404.34"};
for (int i =0; i<locations.length; i++)
{
%>
<form name="submitForm" method="POST" action="Mapper.jsp">
<Input type = "Hidden" name = "loc" value = "<%= locations[i] %>">
<A HREF="Mapper.jsp">View Map</A>
</form>

<%
}   
%>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:17:35.737

HTTP 请求查询字符串采用`name1=value1&name2=value2&name3=value3`. 因此，您需要做的就是将`String[]`a转换`String`为该格式。附加要求是用于`URLEncoder`对名称和值进行编码，以便将任何特殊字符转换为`%nn`格式以便在 URL 中正确使用。

这应该这样做：

```
StringBuilder builder = new StringBuilder();

for (String location : locations) {
    if (builder.length() > 0) builder.append("&");
    builder.append("loc=").append(URLEncoder.encode(location, "UTF-8");
}

String locationsQuery = builder.toString(); 
```

然后您可以在链接中指定它，如下所示：

```
<a href="Mapper.jsp?<%=locationsQuery%>">View Map</a> 
```

[如何在对方获得它在你之前的问题](https://stackoverflow.com/questions/11266163/pass-array-jsp-to-jsp)中已经回答了。

* * *

**与具体问题无关，**[十年来官方不鼓励](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)在 JSP 中编写原始 Java 代码。您可以使用[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:url>`和. 这是一个启动示例，假设您已经在预处理 servlet 或 JSP 顶部完成了 a：`<c:param>``<c:forEach>``request.setAttribute("locations", locations)`

```
<c:url value="Mapper.jsp" var="mapperURL">
  <c:forEach items="${locations}" var="loc">
    <c:param name="loc" value="${loc}" />
  </c:forEach>
</c:url>
<a href="${mapperURL}">View Map</a> 
```

# c++ - 带有 MSG_PEEK 的 recv() 显示完整消息，但通常返回“将阻塞”

> ID：11266783
> 
> 赞同：1
> 
> 时间：2012-06-29T18:05:06.587
> 
> 标签：c++, winsock, recv, peek

我有一个非阻塞的 winsock 套接字，它正在`recv`循环中输入数据。

我注意到，当使用 putty 和原始套接字连接时，发送消息工作得很好。但是，当与此特定客户端交互时，数据包似乎没有触发成功的非`MSG_PEEK`调用`recv`. 我记得几年前有一个类似的问题，它最终不得不结束数据包`\r`或来自*客户端*的东西，在这种情况下这是不可能的，因为我无法修改客户端。

Wireshark 显示通过的数据包很好；但是，我的服务器程序运行不正常。

我将如何解决这个问题？

**编辑：**将缓冲区大小降低到例如 8 会导致在没有 MSG_PEEK 的情况下*成功*调用 recv。

接收调用：

```
iLen = recv(group->clpClients[cell]->_sock, // I normally call without MSG_PEEK
        group->clpClients[cell]->_cBuff, CAPS_CLIENT_BUFFER_SIZE, MSG_PEEK);
if(iLen != SOCKET_ERROR)
{
    ... 
```

套接字是`AF_INET`和。`SOCK_STREAM``IPPROTO_TCP`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:46:42.337

Microsoft 文档在几个地方指出`MSG_PEEK`应该完全避免，因为它效率低下且不准确。使用`select()`,`WSAAsyncSelect()`或`WSASelectEvent()`代替检测套接字何时有可读取的数据，然后调用`recv()`来`WSARecv()`实际读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:28:12.317

用于`setsockopt`设置`TCP_NODELAY`为 TRUE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:07:33.017

TCP 套接字是*字节*流，它不保留您的应用程序消息边界。一旦内核有*东西*给你，它就会从投票中返回。您必须收集接收到的字节，直到您有足够的能力来解码您需要解码的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T09:40:13.753

该解决方案最终是特定于实现的；我知道来自客户端的*所有*数据包的长度都可以被一定数量的字节整除。所以，我只是读取了这么多字节，直到缓冲区为空。

最大。在这种情况下，您一次可以接收的字节数必须小于最长消息的最大长度，并且必须是该长度的 GCF（最大公因数）。

这远不是一个永久的解决方案，但它现在有效。

# git - 如何提交项目更新？

> ID：11266786
> 
> 赞同：0
> 
> 时间：2012-06-29T18:05:28.260
> 
> 标签：git, github, git-svn, bitbucket

我正在使用以下命令在我的项目中加载更新的内容（我已经有一个存储库和我在 bitbucket 上的源代码），但是我无法在我的 bitbucket 帐户上看到任何提交，甚至我对代码所做的修改都是未出现在 bitbucket 存储库中...

```
 $ cd /path/to/my/repo
 $ git remote add origin https://abc@bitbucket.org/abc/test.git
 $ git push -u origin master 
```

一些指导我应该怎么做..我有我的存储库，我的初始源代码已经在 bitbucket 上，我只想将我对代码所做的更新提交给 bitbucket ......我不知道该怎么做对这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:27:48.710

您所做的只是注册遥控器。没有任何东西从偏远的地方下来。推送是您所做的使您的更改传递到远程的操作，而不是相反。

**简短的回答：** `git clone`相反。

**长答案：**

您需要先获取。

```
git fetch origin 
```

将获得远程引用和其中引用的所有对象。

```
git branch -r 
```

将列出您拉下的分支（例如 origin/master）。

更新你的主人（假设你已经把它签出）

```
git merge --ff-only origin/master 
```

虽然只是

```
git pull master 
```

在这种情况下会为你工作。

可以从远程本地创建其他分支并使用

```
git checkout origin/some-feature 
```

# database - 有一个只有主键字段的表是一个概念错误？

> ID：11266790
> 
> 赞同：2
> 
> 时间：2012-06-29T18:06:05.260
> 
> 标签：database, database-design

我正在设计一个数据库来存储一些艺术家的信息。这些艺术家可以属于一个或多个组织。从这些组织中，我只想存储他们的名字，我正在考虑用这些组织创建一个表，这些组织只是将名称作为主键，没有别的。有一个只有主键字段的表的事实是概念错误吗？在这种情况下，我会很感激一些解决这个问题的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T22:25:34.380

> 有一个只有主键字段的表的事实是概念错误吗？

不是自己。在某些完全合法的情况下，所有字段都包含一个 PK。

在这种特殊情况下，组织名称*是*一个键，但这并不一定意味着它应该是*主*键 - 您可以“发明”另一个更小（通常是整数）且更易于维护并使其*成为*主键的键，就像这样：

![在此处输入图像描述](../Images/c968c3c2f34ed71a552c69d807c763fb.png)

这`organizarion_id`被称为**“代理键”**，这样做的一些优点包括：

*   子 FK 会更苗条（因为只有整数迁移到子代，而不是整个字符串）。
*   您可以在不更新 的`organization_name`情况下更新`organization_id`，因此无需将此更新级联给子级。
*   一个小的整数代理可能比一个更复杂的自然键对 ORM 更友好。

缺点：

*   可能需要更多的加入。
*   需要多一个索引，并且每个额外的索引都会带来开销（即使在基于堆的表中，尤其是在[聚簇表](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)中）。

正如您所看到的，这是一个平衡问题，您是唯一拥有足够领域知识来做出正确决定的人。

*`organization_artist`注意：事项中的字段顺序。如果您需要有效地查询给定组织的艺术家，请使用上面显示的顺序，如果您需要给定艺术家的组织，请反转它。如果您需要两个方向，则需要在这两个字段（在 PK 下的索引旁边）上使用另一个复合索引，但顺序相反。如果您只能使用一个索引，请考虑对这张表进行集群（如果您的 DBMS 支持它）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:26:35.263

您需要一个 OrganizationId，来处理组织名称更改的情况。

您可能还会遇到不同组织似乎具有相同名称的情况。有多少“现代艺术博物馆”？（好吧，对于纽约人来说，只有一个 ;-)

您的组织表可能会随着时间的推移而扩展，其中包含短名称、地址、联系人、首选语言等列。因此，表格应如下所示：

```
 create table Organizations (
    OrganizationId int not null identity(1,1),
    Name varchar(255),
    CreatedBy varchar(255) default system_user,
    CreatedAt datetime default getdate()
) 
```

在成熟的数据库中，您甚至会认识到组织会更改名称、合并，有时甚至会拆分。您可以通过在记录中添加生效日期和结束日期来处理此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:31:28.713

此类事情的标准做法是为艺术家提供 1 个表格，为组织提供 1 个表格，以及为艺术家与 1 个或多个组织相关联的 1 个关联表。

```
ARTIST (id, firstName, lastName)

ORGANIZATION (id, name)

ARTIST_ORGANIZATION(artist_id, org_id) 
```

即使组织名称可能/应该是唯一的，最好将数字 id 作为主键，这样您就可以进行关联。并且查询与 id 的关联比搜索字符串的性能更好。

# objective-c - 在 Objective-C 中使用 C 风格的数组

> ID：11266794
> 
> 赞同：3
> 
> 时间：2012-06-29T18:06:13.797
> 
> 标签：objective-c, c

假设我想使用 NSObjects 的 C 样式数组而不是使用 NSArray。这对使用 NSArray 有任何性能损失吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:17:48.707

没有性能损失，实际上在技术上应该有性能改进。你所交换的是相当多的`NSArray`功能和合理数量的封装，如果你不小心的话，会给你一些语法上的麻烦和内存泄漏的风险。

也就是说，我开发的一个应用程序涉及二维数据数组。方便地，该阵列是预先知道的固定大小。我将其逻辑隐藏在`NSArray`采用二维索引的自定义模拟中。早期的实现使用以`NSIndexPath`s 作为键的字典。那很慢。我尝试了一个`NSArray`of `NSArray`s。那比较慢。我尝试了一个 2d C 数组，这明显更快。花时间来平衡我`retain`的 s 和`release`s 对性能没有不良影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:14:58.883

尽管它没有性能损失，但肯定会损失灵活性：与`NSMutableArray`s 不同，您的 C 数组是固定大小的。您也无法对 C 数组使用快速枚举，不得不求助于使用数组索引。

如果这些限制符合您的要求，那么 C 数组应该可以工作。它们也可以很好地与 ARC 配合使用：一旦 C 强引用数组超出范围，ARC 就会释放所有未设置为`nil`.

# c# - 如何备份 - 恢复 .mdf 数据库

> ID：11266795
> 
> 赞同：0
> 
> 时间：2012-06-29T18:06:20.423
> 
> 标签：c#, sql-server, visual-studio-2010, visual-studio, sql-server-2008

我用 vs2010 和 c# 开发了一个 windows 应用程序。我想知道一种以编程方式备份​​和恢复本地 mdf 数据库的方法。对于 sdf 数据库，我使用文件复制，但它似乎不适用于 mdf 文件。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:25:59.763

以这种方式尝试：

*   转到 Sql Management Studio 并选择要备份的数据库
*   右键单击并选择“任务”->“备份”
*   根据需要调整参数，但不要确认对话框
*   按下按钮 SCRIPT 并关闭对话框
*   在查询窗口中，在备份命令之前插入以下文本

    ```
    CREATE PROCEDURE DO_BACKUP  
    AS  
    BEGIN  
       -- HERE GOES THE BACKUP TEXT CREATED BY THE SCRIPT BUTTON   
       -- FOR EXAMPLE
       BACKUP DATABASE [Customers] 
       TO DISK = N'E:\backups\customers.bak' 
       WITH NOFORMAT, NOINIT,  
       NAME = N'Customers - Full Database Backup', 
       SKIP, NOREWIND, NOUNLOAD,  STATS = 10
    END 
    ```

并使用感叹号按钮执行（选择正确的数据库）。

现在您有了一个名为 DO_BACKUP 的存储过程，您可以使用普通的 ADO.NET 对象从代码中调用它，例如`SqlConnection`和`SqlCommand`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-31T20:33:02.057

我为此苦苦挣扎，接受的答案并不能解决问题，所以这是一个对我有用的解决方案（感谢[dnxit](https://stackoverflow.com/a/46738377/14489276)）

它可能会帮助某人。

备份

```
try
{
    var dlg = new System.Windows.Forms.FolderBrowserDialog();
    var result = dlg.ShowDialog(this.GetIWin32Window());

    if (result.ToString() == "OK")
    {
        var dbfileName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "LibraryManger.mdf");
        var backupConn = new SqlConnection { ConnectionString = eb.GetConnectionString() };
        backupConn.Open();

        var backupcomm = backupConn.CreateCommand();
        var backupdb = $@"BACKUP DATABASE ""{dbfileName}"" TO DISK='{Path.Combine(dlg.SelectedPath,"LibraryManagement.bak")}'";
        var backupcreatecomm = new SqlCommand(backupdb, backupConn);
        backupcreatecomm.ExecuteNonQuery();
        backupConn.Close();

        MessageBox.Show($"Database backup has successfully stored in {Path.Combine(dlg.SelectedPath, "LibraryManagement.bak")}", "Confirmation");
    }
}
catch (Exception ex)
{
    if(ex.Message.Contains("Operating system error"))
    {
        MessageBox.Show("Please chose a public folder.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
    }
    else
        MessageBox.Show(ex.Message, "Error", MessageBoxButton.OK, MessageBoxImage.Error);
} 
```

恢复

您必须在恢复之前关闭现有连接

```
try
{
    if (eb != null)
    {
        eb.DisposeConnection();
        eb = null;
    }

    var dlg = new OpenFileDialog();
    dlg.InitialDirectory = "C:\\";
    dlg.Filter = "Database file (*.bak)|*.bak";
    dlg.RestoreDirectory = true;

    if (Equals(dlg.ShowDialog(), true))
    {
        using (var con = new SqlConnection())
        {
            con.ConnectionString = @"Data Source=(LocalDB)\MSSQLLocalDB;Database=Master;Integrated Security=True;Connect Timeout=30;";
            con.Open();
            var dbfileName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "LibraryManger.mdf");
                using (var cmd = new SqlCommand())
                {
                    cmd.Connection = con;
                    cmd.CommandText = $@"RESTORE DATABASE ""{dbfileName}"" FROM DISK='{dlg.FileName}'";

                    cmd.ExecuteNonQuery();
                }
                con.Close();
            }

        MessageBox.Show($"Database backup has successfully restored.", "Confirmation");
        eb = new EntityBroker.EntityBroker();
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message, "Error", MessageBoxButton.OK, MessageBoxImage.Error);
} 
```

# javascript - 检测两个或多个 Javascript 字符串中的短语

> ID：11266796
> 
> 赞同：1
> 
> 时间：2012-06-29T18:06:27.020
> 
> 标签：javascript, string, phrases

我想知道是否有一种简单的方法可以检测两个字符串中的“短语”而不用引号引起来。例如：

“我喜欢盒子里的杰克”和“盒子里的杰克有很好的食物”

在这种情况下，将检测到“盒子里的插孔”。现在我可能会遍历整个第一个字符串，看看它是否在第二个字符串中，它不是......并继续减少到更小的长度并通过第二个字符串运行它，直到我找到 3-word-match “盒子里的杰克”……但效率不高。

任何帮助都会很棒 - 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:11:09.330

您指的是[最长公共子序列](https://en.wikipedia.org/wiki/Longest_common_subsequence_problem)问题。这用作字符串比较的基础。

有很多关于这个问题的问题： [https ://stackoverflow.com/search?q=longest+common+subsequence](https://stackoverflow.com/search?q=longest+common+subsequence)

该算法实现起来并不难。维基百科有伪代码，您可以将其用作起点。

# java - Java 代理服务器在切换服务器时保持客户端连接处于活动状态

> ID：11266797
> 
> 赞同：0
> 
> 时间：2012-06-29T18:06:31.657
> 
> 标签：java, proxy, minecraft

我正在尝试为我的世界创建一个代理服务器，允许用户在不重新登录的情况下切换服务器。我需要做的是创建一个服务器来处理来自客户端的传入连接并将它们转发到我已经完成的适当服务器。我的问题是如何更改与服务器的连接，同时仍保持客户端连接处于活动状态，以免断开连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:10:25.633

您需要向客户端发送一个 0x09（重生）数据包以重新加载世界并向服务器发送一些数据包（0x02,0x01）以登录客户端并伪造 0x0a（玩家更新）和 0x00（保持活动状态）数据包发送到后台服务器

请参阅：[http](http://wiki.vg) ://wiki.vg了解更多信息

# jquery - 使用 Jquery 淡出文本区域内的文本

> ID：11266805
> 
> 赞同：0
> 
> 时间：2012-06-29T18:07:15.260
> 
> 标签：jquery, fadeout

这可能是一个非常简单的问题，但我想`<textarea id="text">blabla</textarea`使用 jquery 淡出 textarea ( ) 内的文本，而不需要'fadingOut' textarea 本身。

我尝试使用 $('text').val()、$('text').text() 或 document.getElementById("text").nodeValue;

但没有任何效果，整个文本区域“不显示”。有人有想法吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:40:44.667

.text() 和 .val() 等 jQuery 方法返回相关 HTML 元素中包含的内容的值，而不是指向元素中实际文本的指针。这就是为什么使用它们不能满足您的需求。

您应该能够使用 jQuery UI 及其[.ToggleClass()](http://jqueryui.com/demos/toggleClass/)方法获得您想要的效果。设置一个 css 类，其中 textarea 的颜色与其背景相同，然后使用 .ToggleClass 以定义的持续时间在 textarea 上激活该类，这应该会产生 textarea 内的文本逐渐消失的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:16:37.477

没有简单的方法可以做到这一点。您可以尝试为文本的颜色设置动画，因此基本上从黑色渐变为白色（例如，如果您的 textarea 是白色的），但用户仍然可以突出显示文本并以这种方式查看。

唯一的其他解决方案是基本上设置图像的样式，使其看起来像文本区域，并用它替换文本区域，将文本放在 div 或 span 内的顶部，然后以这种方式淡化文本。

# javascript - 如果出现错误，如何避免表单提交？

> ID：11266806
> 
> 赞同：4
> 
> 时间：2012-06-29T18:07:18.453
> 
> 标签：javascript, jquery, forms

我有如下表格

```
<form id="myform" class="form-horizontal" class="collapse in">
    <fieldset>
        <!-- form fields are here -->
        <div class="form-actions">
          <button class="btn btn-inverse" id="search" name="search" data-loading-text="Searching...">Search</button>
        </div>
    </fieldset>    
</form> 
```

一旦按下按钮，我将使用以下代码执行操作：

```
$("#search").click(function() {
    try {
        // some javascript with syntax error is here
    } finally {
        return false; // don't submit form automatically
    }
}); 
```

但是如果我的 javascript 包含语法错误，那么无论`try .. finally`. 我该如何解决？表单不应自动提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:13:11.513

将按钮类型设置为“按钮”。

> 按钮：按钮没有默认行为。它可以具有与元素事件相关联的客户端脚本，这些事件在事件发生时被触发。

```
<button type="button"...>Search</button> 
```

如果是这种情况，该表单根本不会提交，直到您告诉它通过 Javascript 显式提交。

有关这个简单的解决方案，请参阅 HTML5 规范。[http://www.w3.org/TR/2011/WD-html5-20110525/the-button-element.html#attr-button-type](http://www.w3.org/TR/2011/WD-html5-20110525/the-button-element.html#attr-button-type)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:09:43.267

将表单的操作设置为不正确的内容，例如`action="error.html"`. 然后作为表单提交过程的最后一步，动态地将操作设置为正确的链接。

您也可以使按钮根本不提交，并手动提交表单：

```
$('#myForm').submit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:52:26.980

```
$("#search").click(function(e) {
e.preventDefault();
try {
    // some javascript with syntax error is here
} finally {
    return false; // don't submit form automatically
}}); 
```

在点击功能上，防止默认动作。然后如果代码确实通过了，然后手动调用提交

```
$('#myForm').submit(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T18:48:22.153

`event.preventDefault`在事件开始时使用并自己触发提交。

```
$("#search").click(function(event) {
    event.preventDefault();
    // some javascript with syntax error is here
    var foo = "bar";
    alert(foobar); // ERROR
    // if syntax error occurs in this scope, the form won't submit
    $(this).closest("form")[0].submit(); 
}); 
```

**[演示](http://jsfiddle.net/VsS4z/)**

# c# - HttpListenerResponse.AddHeader 不喜欢非拉丁符号

> ID：11266807
> 
> 赞同：0
> 
> 时间：2012-06-29T18:07:20.957
> 
> 标签：c#, firefox, header, httplistener, non-latin

所以它适用于 HttpResponse 类：

```
Response.AddHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); 
```

（我们必须为 IE 编码文件名）但现在应该为 HttpListener 完成。它适用于 IE。问题是 FireFox 和 Chrome 不会像 IE 那样解码编码的标头值，但是 HttpResponse.AddHeader 不允许非拉丁字符（来自 System.Net 的代码）：

```
if ((ch == '\x007f') || ((ch < ' ') && (ch != '\t')))
    throw new ArgumentException(SR.GetString("net_WebHeaderInvalidControlChars"), "value"); 
```

我尝试使用反射在支票周围走动：

```
Type type = response.Headers.GetType();
PropertyInfo info = type.GetProperty("InnerCollection",
    BindingFlags.GetProperty | BindingFlags.Instance | BindingFlags.NonPublic);
NameValueCollection headers = (NameValueCollection)info.GetValue(response.Headers, null);
headers.Add(name, value); 
```

什么都没有出现，但文件名已完全损坏。我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:53:15.820

没有可移植和跨浏览器的方法来做到这一点。

[请参阅http://greenbytes.de/tech/tc2231/](http://greenbytes.de/tech/tc2231/)上的表格，了解有效和无效的服务器/浏览器/标头组合。

最好的办法是只发送`Content-Disposition: attachment`并让浏览器从`/path/file.ext`URI 部分获取“默认”文件名。

# javascript - Require.js + Backbone 优化

> ID：11266808
> 
> 赞同：1
> 
> 时间：2012-06-29T18:07:25.197
> 
> 标签：javascript, backbone.js, requirejs

下午好，

我正在尝试使用 r.js 优化基于 Require.js 和 Backbone 的源代码，但在编译过程中出现以下错误：

```
Tracing dependencies for: main
Cannot optimize network URL, skipping: empty:.js
TypeError: Cannot read property 'normalize' of undefined
In module tree:
    main
      app
        router
          views/main_panel/event_details
            helpers/template_manager 
```

我的 template_manager 模块不会尝试访问任何“规范化”属性，所以我真的不明白这应该是什么意思。这是我的应用程序的入口点以及 require.js 配置。

```
require.config({
  paths: {
order: 'libs/requirejs-plugins/order',
        text: 'libs/requirejs-plugins/text',
        jQuery: 'libs/jquery/jquery',
        Underscore: 'libs/underscore/underscore',
        Backbone: 'libs/backbone/backbone',
        templates: '../templates',
    Sync: 'helpers/sync'
  }
});

require([
  'app',
  'event_manager',
  'order!https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',
  'order!libs/underscore/underscore-min',
  'order!libs/backbone/backbone-min',
  'helpers/objects_extension',
  'helpers/date_extension',
  'helpers/assets'
], function(App){
    App.initialize();
}); 
```

应用程序本身或多或少遵循[本教程](http://backbonetutorials.com/organizing-backbone-using-modules/)中的内容。我的 app.build.js 文件如下

```
({
    appDir: "../",
    baseUrl: "js",
    dir: "../app-build",
    modules: [
        {
            name: "main"
        }
    ],
    paths: {
        order: 'empty:',
        text: 'empty:',
        jQuery: 'empty:',
        Underscore: 'empty:',
        Backbone: 'empty:',
        templates: '../templates',
        Sync: 'helpers/sync'
    }
}) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T20:06:32.630

詹姆斯伯克 说：

> 文本插件需要由加载器加载才能处理文本！依赖性。加载器插件作为构建的一部分执行以解析其资源。
> 
> So it should be enough to remove the text: "empty:" from the paths config, and just leave the excludes: in so it is not included in the final build result. This assumes you have text.js available locally to be read by the optimizer.

[https://github.com/jrburke/r.js/issues/221](https://github.com/jrburke/r.js/issues/221)

# graphviz - 如何在graphviz中使用锥形边缘

> ID：11266816
> 
> 赞同：2
> 
> 时间：2012-06-29T18:08:23.273
> 
> 标签：graphviz

2011 年 9 月推出的锥形边缘看起来很酷。

*   [http://www.graphviz.org/News.php/](http://www.graphviz.org/News.php/)
*   [http://www.graphviz.org/pub/tmp/images/tapered-edge.png](http://www.graphviz.org/pub/tmp/images/tapered-edge.png)

我将 style="tapered" 添加到我的边缘选项中，否则效果很好：

```
 edge [color="black", minlen="1.3", arrowsize="0.6", style="tapered"] 
```

但现在我得到这个错误：

```
$ dot -Tsvg demo.dot -o dot.svg
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring
Warning: gvrender_set_style: unsupported style tapered - ignoring 
```

我的图表中的每条边似乎都有一个警告。

这是什么原因造成的，我该如何解决？我正在运行 ubuntu 12.04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:34:36.963

您肯定没有锥形边缘所需的 graphviz 版本。

试试看`dot -v`，如果您的 graphviz 版本以 2.28 或更低版本开始，锥形边缘可能不起作用。我在 2.28 版本中遇到了同样的错误。然而，Graphviz 2.29 接受锥形样式属性。

顺便说一句，一旦你有一个更新的graphviz版本工作，你可以`penwidth`用来改变锥形边缘的厚度。

# iphone - 高分辨率图像和视网膜显示

> ID：11266818
> 
> 赞同：1
> 
> 时间：2012-06-29T18:08:31.433
> 
> 标签：iphone, ios

我是 iOS 应用程序开发和设计的新手。我想知道这两个问题：

我可以创建高分辨率图像并将其用于所有设备（无论是视网膜还是非视网膜）？（为什么要故意为非视网膜设备创建低分辨率图像？为什么不能一切都简单地高分辨率？）......我希望这不是一个愚蠢的问题！

我们在这里所说的“高分辨率”到底是什么意思？'1024 像素 X 1024 像素' ? 视网膜显示器的“高”到底有多高？

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:18:49.033

“高分辨率”是指 iOS（和 OSX）上每个维度的两倍像素。因此，如果您在非视网膜显示屏上拥有 23x10 像素的图像，则其高分辨率版本的大小必须为 46x20 像素。

如果您将高分辨率图像命名为：lowResImageName `@2x`.png，系统将自动选择 Retina 设备上的高分辨率图像。

正如其他人所说，您使用特殊的低分辨率图像来最大限度地提高质量（因为您可以选择在低分辨率图像中留下精细的细节等）并最大限度地减少内存占用（因为非视网膜变体有一半到目前为止视网膜版本的 RAM）。

考虑非视网膜像素也很有帮助，因为一个非视网膜像素等于一个“显示点”，这是 iOS 测量尺寸的单位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:11:50.217

iOS设备的分辨率如下：

```
 standard            retina
iPhone, iPod Touch       320 x 480          640 x 960
iPad                     768 x 1024         1536 x 2048
iPhone 5                     -              640 x 1136 
```

为什么要创建低分辨率图像？因为它会自动在非视网膜设备上使用，节省内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:12:05.330

对于某些可以正常工作的图像，但对于某些图像（例如，如果您的图像有一些精美的文本），它们会在自动缩小时看起来参差不齐或扭曲。在某些情况下，您可能希望以不同的方式显示某些内容（我偶尔会看到带有酷渐变效果的图像在低分辨率设备上看起来不正确，因此我不得不删除低分辨率图像中的一些细节以让它看起来不错）。

另一个答案也是正确的，如果您允许这两种情况，低分辨率设备只会将低分辨率图像加载到内存中，因此应用程序将使用更少的内存。这只是针对这些情况的优化，但它仍然很有帮助，因为通常您可以假设低分辨率设备开始时内存较少，因为它们较旧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T18:15:09.190

Retina 图形，即您提到的高分辨率图形，应该是宽度和高度点值的两倍。我的意思是，在所有 iPhone 大小的设备上，屏幕尺寸为 320 点乘 480 点。在非视网膜设备上，转换为 320 x 480 像素。在 Retina 设备上，这转换为 640 x 960 像素。在水平和垂直方向上，一切都是双倍的。

这意味着，您应该拥有所有图像资产的两个版本。因此，如果您想要在屏幕上显示 44 点宽 x 44 点高的图像，您应该有两个图像...... Image.png 将是 44 像素 x 44 像素，Image@2x.png 将是88 像素 x 88 像素（对于视网膜设备，这是 @2x 表示的）。

为什么有两个版本，而不仅仅是高 rez 版本？因为它需要处理能力将较大的版本“压缩”成较小的版本。已经拥有较低分辨率的版本要容易得多，并且您可以节省宝贵的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T18:20:05.290

H2CO3 回答了第一个问题。保护旧设备上的内存（想想 iPhone 3G，许多当前的应用程序非常慢，但编码良好的应用程序仍然可以正常工作）

高分辨率是什么意思？

例如，在非视网膜设备上，您可以`example.png`使用`[UIImage imageNamed:"example.png"]`.

高分辨率意味着，您有额外`example@2x.png`的 600x400 像素，即双倍尺寸。然后你的应用程序大小更大，两个设备都有适当的图形，但你在旧设备上节省了内存（这将不得不分配 4 倍的内存而没有为用户带来额外的改进，因为它仍然只有 300x200 像素显示- 600x400 像素图像的空间）。

# c# - 使用接口嵌套类

> ID：11266820
> 
> 赞同：0
> 
> 时间：2012-06-29T18:08:33.247
> 
> 标签：c#, oop, class, inheritance, interface

我有一个小问题。

当我开始编写我的应用程序时，我将同一级别的类型分组到类`FirstLevel`（该级别的所有类型都派生自`FirstLevel`）。之后，我开始使用这种类型创建通用列表，并且我的代码正在使用它而没有任何错误。

现在，一段时间后，我需要`Generate`在每个`FirstLevel`派生自 FirstLevel 或其父类派生自 FirstLevel 的类中使用函数。我认为接口可以是很好的解决方案，所以我开始为`IGenerable`每个与 l 类有共同点的类实现接口`FirstLeve`（它是派生的，或者它的父级是派生的，或者它的父级的父级......）我已经实现了它也上一级课。

这是我的问题的开始。我需要对中的每个项目调用生成函数`List<FirstLevel>`。但我不知道是否会被称为`IGenerable`in 的`FirstLevel`实现，或`IGenerable`派生类的实现。我希望计算机将在派生类中执行实现调用。请告诉我情况如何。

但是，如果将调用实现`FirstLevel`，请帮助我并提出一些解决方案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:28:24.363

最好不要使用接口，而是将虚函数 Generate 添加到基类（FirstLevel）中，然后根据需要覆盖后代中的方法。现在，当您遍历 List 并调用 Generate 时，如果该对象有一个被覆盖的方法，它将执行该方法，否则它将从基础对象执行该方法。

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var objs = new List<FirstLevel> { new FirstLevel(), new SecondLevel(), new ThirdLevel(), new SecondLevel2() };
            objs.ForEach(o => o.Generate());
            Console.ReadLine();
        }

    }

    public class FirstLevel
    {
        public virtual void Generate()
        {
            Console.WriteLine("First Level Generate called.");
        }
    }

    public class SecondLevel : FirstLevel
    {
        public override void Generate()
        {
            Console.WriteLine("Second Level generate called.");
        }
    }

    public class SecondLevel2 : FirstLevel
    {

    }
    public class ThirdLevel : SecondLevel
    {
        public override void Generate()
        {
            Console.WriteLine("Third Level genrate.");
        }
    }
} 
```

# ruby-on-rails - 我所有的 POST 链接都由“create”处理

> ID：11266825
> 
> 赞同：0
> 
> 时间：2012-06-29T18:08:57.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图从索引操作对我的数据库进行简单搜索，而不是列出所有数据

这是我的用户/索引

```
<%= form_tag do %>
<fieldset>
    <div class="row">
        <div class="span5 offset3">
            <h2>Enter the CPF number of the user to be managed: </h2></br></br></br>
            <div>
                <%= label_tag :cpf_no, 'CPF Number:' ,class:"left_align" %>
                <%= number_field_tag :cpf_no, params[:cpf_no] %>
            </div>
            <div>
                <%= button_to  "     Find     ", users_find_path , class: "btn btn-large btn-primary" %></br></br>
            </div>
        </div>
    </div>
  </fieldset>
<% end %> 
```

这是我的控制器中的查找方法：

```
 class UsersController < ApplicationController   
  ...
def find 
if request.post?
@user = user.find_by_cpf_no(params[:cpf_no])
redirect_to edit_user_path(@user.id)
end     
end 
...
end 
```

这是我现在的路线：

```
 root        /                                home#index
             login GET    /global/login(.:format)          sessions#new
                   POST   /global/login(.:format)          sessions#create
            logout DELETE /global/logout(.:format)         sessions#destroy
        users_find POST   /global/users/find(.:format)     users#find
             users GET    /global/users(.:format)          users#index
                   POST   /global/users(.:format)          users#create
          new_user GET    /global/users/new(.:format)      users#new
         edit_user GET    /global/users/:id/edit(.:format) users#edit
              user GET    /global/users/:id(.:format)      users#show
                   PUT    /global/users/:id(.:format)      users#update
                   DELETE /global/users/:id(.:format)      users#destroy
            fields GET    /global/data(.:format)           fields#index
                   POST   /global/data(.:format)           fields#create
         new_field GET    /global/data/new(.:format)       fields#new
        edit_field GET    /global/data/:id/edit(.:format)  fields#edit
             field GET    /global/data/:id(.:format)       fields#show
                   PUT    /global/data/:id(.:format)       fields#update
                   DELETE /global/data/:id(.:format)       fields#destroy 
```

问题是它没有进入 :id/edit 路径...而是调用了 create 方法，该方法给出了一些错误，因为验证没有通过。我如何让它访问查找方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:20:49.363

您应该将路径放在您的 form_tag 中。

```
form_tag user_find_path, :method => :post
    # other code
    = submit_tag "Find" 
```

# mysql - 过滤最大值

> ID：11266827
> 
> 赞同：0
> 
> 时间：2012-06-29T18:09:05.153
> 
> 标签：mysql, sql

我正在尝试编写一个查询，该查询将返回每个操作员站点的最高实例。基本上每个操纵子可以有许多位点，但每个位点都有一个分数。我想过滤返回，而不是多次列出给定的操作子（每个站点一次），它只会在最高站点列出一次。

我在下面的内容似乎返回了正确的结果，但速度相当慢，我想看看是否有更快的方法来做到这一点。

抱歉，如果这不是很清楚，MySQL 对我来说是一个全新的世界，我不确定我是否以明智的方式提出问题。

```
select `g`.`id`       AS `ID`, 
   `g`.`Name`     AS `GENE`,
   `o`.`id`       AS `OPID`,
   `os`.`site`    AS `BSID`,
   `s`.`Sequence` AS `SITE`,
   `s`.`Score`    AS `SCORE`

from(((( 
          `METAGENO`.`GENE`        `g` )
     join `METAGENO`.`OPERON`      `o` )
     join `METAGENO`.`OPERON_SITE` `os`)
     join `METAGENO`.`SITE`        `s` )

    where(
          (`o` .`id`     = `g` .`Operon`)
       and(`os`.`operon` = `o` .`id`    )
       and(`s` .`id`     = `os`.`site`  
       and(`s` .`Score`  = (select max(`s2`.`Score`)
                                from(`METAGENO`.`SITE` `s2`)
                                where(`s2`.`id` = `os`.`site`))))) GROUP BY `o`.`id` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:17:17.583

利用

```
GREATEST() 
```

对于两个或多个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:17:47.540

您可以尝试创建一个内联视图来计算所有 id 的所有 maxscore，然后加入。

```
Select `g`.`id`       AS `ID`, 
   `g`.`Name`     AS `GENE`,
   `o`.`id`       AS `OPID`,
   `os`.`site`    AS `BSID`,
   `s`.`Sequence` AS `SITE`,
   `s`.`Score`    AS `SCORE`

from(((( 
          `METAGENO`.`GENE`        `g` )
     join `METAGENO`.`OPERON`      `o` )
     join `METAGENO`.`OPERON_SITE` `os`)
     join `METAGENO`.`SITE`        `s` )

     INNER JOIN (select max(`s2`.`Score`) as maxScore, `s2`.`id`
                 from `METAGENO`.`SITE` `s2`
                 group by `s2`.`id`) maxScore
     ON  s.Score = maxScore.Score
         AND os.site = maxScore.id

    where(
          (`o` .`id`     = `g` .`Operon`)
       and(`os`.`operon` = `o` .`id`    )
       and(`s` .`id`     = `os`.`site`  )) 
```

# ruby-on-rails - post:create 在 rspec 测试中给出 'count 应该已更改 1，但已更改为 0'

> ID：11266829
> 
> 赞同：0
> 
> 时间：2012-06-29T18:09:13.497
> 
> 标签：ruby-on-rails, rspec2, ruby-on-rails-3.2, factory-bot, rspec-rails

我在测试`create`控制器方法时遇到问题。我的测试：

```
describe "POST #create" do
  it "creates a new admin_user" do
    expect{
      post :create, :admin_user => FactoryGirl.attributes_for(:admin_user)
    }.to change(Admin::User,:count).by(1)
  end
end 
```

我得到的失败规范：

```
1) Admin::UsersController logged in POST #create creates a new admin_user
     Failure/Error: expect{
       count should have been changed by 1, but was changed by 0
     # ./spec/controllers/admin_users_controller_spec.rb:75:in `block (4 levels) in <top (required)>' 
```

这是我的控制器：

```
 def create
    @admin_user = Admin::User.new(params[:admin_user])
    if @admin_user.save
      render nothing: true
    end
  end 
```

和工厂：

```
require "factory_girl"
require 'ffaker'

FactoryGirl.define do
  factory :admin_user, class: "Admin::User" do |f|
    f.name {Faker::Name.first_name}
    f.email {Faker::Internet.email}
    f.password "aaa"
  end
end 
```

和我的模型：

```
class Admin::User < ActiveRecord::Base
  has_secure_password
  validates :email, :uniqueness => true, :presence => true 
  validates_presence_of :password, :on => :create
end 
```

我不知道可能出了什么问题。我已经搜索*了整个互联网*，但没有找到答案。从 rails 控制台添加用户就可以了。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:18:49.817

这一行：

```
post :create, FactoryGirl.attributes_for(:admin_user) 
```

应该是这样的：

```
post :create, :admin_user => FactoryGirl.attributes_for(:admin_user) 
```

作为练习，在控制器的创建操作中打印出参数（`p params`或`puts params.inspect`），您将看到不同之处。

**编辑**你应该尝试两件事：

1.  仍然打印出参数以查看它们是否对您有意义。
2.  问题可能是您的参数无效。`save`如果您的任何验证错误，请尝试使用`save!`which 将引发错误，而不是 using ，您将在测试输出中看到错误。如果保存仍然失败，您应该处理这种情况。

# cakephp - CakePHP - 模型属于 2 个不同的模型

> ID：11266831
> 
> 赞同：0
> 
> 时间：2012-06-29T18:09:14.997
> 
> 标签：cakephp, cakephp-2.0

我正在制作照片模型，让它属于多个模型（例如用户、地点等）是一个好习惯吗？
地点也属于用户

所以这是我的照片字段。

```
id
owner_id
type (an enum of the different models such as users and places) 
```

这是我拥有的 PhotoModel 中的 belongsTo

```
public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'owner_id',
        'conditions' => array('Photo.type' => 'user'),
        'fields' => '',
        'order' => ''
    ),
    'Place' => array(
        'className' => 'place',
        'foreignKey' => 'owner_id',
        'conditions' => array('Photo.type' => 'place'),
        'fields' => '',
        'order' => ''
    )
); 
```

还是只创建单独的模型（例如 UserPhoto、PlacePhoto 等）更好？

现在使用这种方法，当我将递归设置为 2 时，有时会看到 dbo 错误。

谢谢，
三通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:36:36.600

这种方法可以工作，但如果将 recursive 设置为 2，最清晰的解决方案是在此类查询中动态[创建和/或销毁关联。](http://book.cakephp.org/1.3/view/1045/Creating-and-Destroying-Associations-on-the-Fly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:41:53.623

如果将来您要使用 UserPhoto 和 PlacePhoto 模型，那么最好为它们创建单独的模型。以便您以后可以自定义这些模型。否则，如果您很少使用这些模型，那么您可以特别将这些模型绑定到控制器的方法中。

```
$this->User->bindModel(array('belongsTo' => array(
'User' => array(
    'className' => 'User',
    'foreignKey' => 'owner_id',
    'conditions' => array('Photo.type' => 'user'),
    'fields' => '',
    'order' => ''
),
'Place' => array(
    'className' => 'place',
    'foreignKey' => 'owner_id',
    'conditions' => array('Photo.type' => 'place'),
    'fields' => '',
    'order' => ''
))); 
```

# visual-studio - 如何告诉 Visual Studio 始终展开“查找”对话框中的“查找选项”组框？

> ID：11266832
> 
> 赞同：13
> 
> 时间：2012-06-29T18:09:17.270
> 
> 标签：visual-studio, visual-studio-2010, visual-studio-2008, visual-studio-2015

我扩展它，但它有时会崩溃，而且它变得非常烦人。我如何让它总是被扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-11T18:28:04.453

Visual Studio 应始终记住此选项组框的最后展开状态。如果您可以提供一组步骤来显示它没有的情况，请在 Microsoft com 的 mwthomas 上给我留言，我想看看。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-31T14:44:25.237

您使用`CTRL`+`F`组合键打开查找选项。如果要打开查找对话框弹出，可以使用`CTRL`+ `SHIFT`+`F`组合键。它适用于所有 Visual Studio 版本。

# list - LWUIT 列表不滚动

> ID：11266833
> 
> 赞同：1
> 
> 时间：2012-06-29T18:09:24.743
> 
> 标签：list, java-me, lwuit

我在我的 j2ME 项目中插入了一个列表，使用 LWUIT 设计。代码如下

```
 Button btnHome;
  Button btnExit;
  List list;
  setScrollableY(false);
  setScrollable(false);

  list = new List();
  MyRenderer render = new MyRenderer();
  list.setListCellRenderer(render);         

       list.getStyle().setFgColor(0xfaedf2);
       list.setSmoothScrolling(true);     
       list.addSelectionListener(new SelectionListener(){
            public void selectionChanged(int i, int i1) {
            try {
            InformationForm form = new InformationForm();                                        
            form.show();
            } catch (IOException ex) {
                ex.printStackTrace();
            }

        }

        });

        String[] arrString  = builder.getArrName();
       System.out.println(arrString.length);
       for (int i = 0; i < arrString.length ; i++)
              {
               list.addItem(arrString[i]);
             // System.out.println("item no " + i +" = " +arrString[i] + "added in   list");
              }         

           BorderLayout bl=new BorderLayout();

setLayout(bl);
Container holdingContainer=new Container(new FlowLayout(Component.LEFT));
Container c0 = new Container(new BoxLayout(BoxLayout.X_AXIS));
Container c1 = new Container(new FlowLayout(Component.LEFT));
Container c2 = new Container(new FlowLayout(Component.LEFT));

Container footerContainer=new Container(new BoxLayout(BoxLayout.X_AXIS));

c0.addComponent(cityChoice);
c0.addComponent(btnFilter);

  //c2.addComponent(list);

  c1.setPreferredH(25);
  holdingContainer.addComponent(c0);
  holdingContainer.addComponent(c1);
  getStyle().setBgColor(0x730E36);
 // holdingContainer.addComponent(c2);
  holdingContainer.setPreferredH(280);
  holdingContainer.setScrollableY(true);

  addComponent(BorderLayout.CENTER,list);
  //addComponent(BorderLayout.WEST,holdingContainer);
  footerContainer.getStyle().setMargin(Component.LEFT, 0);
  footerContainer.addComponent(btnHome);
  footerContainer.addComponent(btnExit);

  addComponent(BorderLayout.SOUTH,footerContainer); 
```

列表的渲染器是 public class MyRenderer extends TextArea implements ListCellRenderer{

```
 public Component getListCellRendererComponent(List list, Object value, int index,    boolean isSelected){
 getStyle().setBorder(Border.createEmpty());
 getStyle().setFgColor(0xfaedf2);
 getStyle().setBgColor(isSelected ? 0x630A2E : 0x730E36);

 setText(value.toString());

 if (isSelected) {
 setFocus(true);
 getStyle().setBgTransparency(100);
 } else {
 setFocus(false);
 getStyle().setBgTransparency(0);
 }
 return this;
 }
 public Component getListFocusComponent(List list){
   return null;}

 } 
```

问题是在设备上时，我尝试滚动列表，立即选择我触摸的项目并打开它的新表单。我根本无法滚动列表。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:07:26.130

你有可能使用 a`SelectionListener`而不是 a`ActionListener`吗？

# python - 在 Python 2.6 中使用 while 循环将管道连接到文件

> ID：11266837
> 
> 赞同：0
> 
> 时间：2012-06-29T18:09:33.607
> 
> 标签：python

我对 Python 管道完全陌生，但我认为这是我问题的答案。我有一个文件cleverbot.py，它从 raw_input 获取无穷无尽的输入并将结果打印到命令行。这是在整个过程中停留在一个while循环中完成的，当你说“再见”时，脚本退出。

现在，有人可以给我一个例子，我可以通过管道输入到这个脚本然后接收输出，而不用结束循环吗？该循环充当一个会话，重要的是脚本继续在此 while 循环内不断运行，同时能够将输入通过管道传输给它。

这是代码片段。对于任何想要获得完整内容的人来说，pycleverbot 库。

```
def main():
    import sys
    cb = Session()

    q = ''
    while q != 'bye':
            try:
                    q = raw_input("> ")
            except KeyboardInterrupt:
                    print
                    sys.exit()
            print cb.Ask(q) 
```

cb = Session() 在首次制作后根本无法重新创建。这就是while循环到位的原因。我缺乏必要的逻辑来查看不使用 while 循环的方法。

希望这是有道理的，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:31:21.693

诀窍是首先不要使用while循环。

```
for line in sys.stdin:
  if line.lower().strip() == 'bye':
    break
  sys.stdout.write(do_something(line))
  sys.stdout.flush() 
```

# javascript - 循环内的jquery类选择器

> ID：11266843
> 
> 赞同：0
> 
> 时间：2012-06-29T18:10:02.043
> 
> 标签：javascript, jquery

我对 jquery 中的表达式有一个简单的问题，以选择一个涉及 for 循环的类。基本上，我有两个步骤： 1\. 生成一些带有循环的 html 表。2\. 使用 jQuery 取消隐藏它们。

下面是 1\. 生成 html 表格的简化代码（我会添加一个循环索引来分隔每个循环创建的表格）： 2\. 第二步的关键部分是取消隐藏生成的表格。我的选择器写为：`method_options_1'+i+'`，其中 i 是 for 循环索引。

```
for (var i = 2; i <= 5; i++) {
  <tr class="method_options_1'+i+'" style="display: none;"><th><label for="id_CAM_1">Chemical application Method (CAM):</label></th>
      <td><select name="CAM_1_'+i+'" id="id_1_'+i+'">
        <option value="2">2-Interception based on crop canopy</option>
        <option value="9">9-Linear foliar based on crop canop</option></select>
      </td></tr>

  $('.method_options_1'+i).closest('tr').show();  
} 
```

但是，此选择器不起作用，这意味着我无法显示隐藏元素。同时，如果我从 HTML 和 jquery 中删除索引 i，则选择器可以工作。由于我必须保留 i 索引，任何人都可以给我一些建议（我试图删除最接近的（'tr'），但它不起作用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:14:08.177

`'.method_options_1'+i`已经是`tr`，所以首先尝试删除该`closest('tr')`步骤：

```
$('.method_options_1'+i).show(); 
```

见[http://jsfiddle.net/WJDCm/](http://jsfiddle.net/WJDCm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:14:13.937

那是因为就 Javascript 而言，`name`它只是一个字符串：`method_options_1'+i'`. 它不会评估该字符串中的任何代码。如果您想正确执行此操作，请执行以下操作：

HTML：

`<tr class="method_options">etc</tr>`

Javascript：

`$('.method_options:eq('+i+')').show();`

**编辑：**

也许我误解了。您在 Javascript`for`循环中生成它，因此`i`代码空间中的有效变量也是如此。如果是这种情况，那么您只需取出`closest()`，因为它告诉 jQuery 沿着 DOM 向上移动并选择`tr`它找到的第一个。在这种情况下，这似乎没什么。您想要处理`tr`您选择的那个，而不是您选择的`tr`那个的父级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:48:15.250

我真的很想知道你是如何运行上面的代码的......但是这样做确实有效

HTML：

```
 ​&lt;table id='myTable'>
 </table>​​​​​​​​ 
```

JavaScript：

```
$(function(){

  for (var i = 2; i <= 5; i++) {
     $('#myTable').append('<tr class="method_options_1'+i+'" style="display: none;"><th><label for="id_CAM_1">Chemical application Method (CAM):</label></th><td><select name="CAM_1_'+i+'" id="id_1_'+i+'">        <option value="2">2-Interception based on crop canopy</option>        <option value="9">9-Linear foliar based on crop canop</option></select>      </td></tr>');

     $('.method_options_1'+i).closest('tr').toggle('slow');   
  }

}) 
```

[解决方案](http://jsfiddle.net/5NZPL/1/)

# c# - 红黑修复

> ID：11266846
> 
> 赞同：0
> 
> 时间：2012-06-29T18:10:12.917
> 
> 标签：c#, insert, red-black-tree, fixup

我已经实现了一棵红黑树，但效果不佳。它以不正确的方式插入节点。我认为这是因为 FixUp。有谁知道我错在哪里？当我插入（1、4、9、16）时。在节点 16，它将根颜色设置为红色。然后它停止。

我已经调试了它，但我自己无法找到错误。我是 c# 的新手，而且我现在已经工作了大约 3 个小时。没有成功。

这是我的代码：

```
 public void insert(int score, int spelersnummer)
    {
        size++;
        Node z = new Node(score, spelersnummer);
        z.leftChilds++;
        Node y = null;
        Node x = this.root;
        while (x != null)
        {
            y = x;
            if (z.boom < x.boom) // boom staat voor score!
            {
                x.leftChilds++;
                x = x.left;
            }
            else
            {
                x = x.right;
            }

        }

        if (y == null)
        {
            this.root = z;

        }
        else if (z.boom < y.boom)
        {
            y.left = z;
            y.leftChilds++;
            z.parent = y;

        }
        else
        {
            y.right = z;
            z.parent = y;

        }
        // Z heeft automatisch left = null, right = null, color = red
        insertFixUp(z);
    }

    public void insertFixUp(Node z)
    {
        // check of parent bestaat en parent.parent NullPointerException?
        if(z.parent != null && z.parent.parent != null)
        {
            while (z != null && z.parent != null && z.parent.parent != null && !z.parent.isBlack) // ass long as color is not black, thus red
            {
                if (z.parent == z.parent.parent.left)
                {
                    Node y = z.parent.parent.right;
                    if (y != null && !y.isBlack)
                    {
                        z.parent.isBlack = true;
                        y.isBlack = true;
                        z.parent.parent.isBlack = false;
                        z = z.parent.parent;
                    }
                    else if (z == z.parent.right)
                    {
                        z = z.parent;
                        leftRotate(z);
                    }
                    z.parent.isBlack = true;
                    z.parent.parent.isBlack = false;
                    rightRotate(z.parent.parent);

                }
                else
                {

                    Node y = z.parent.parent.left; // left instead of right
                    if (y != null && !y.isBlack) // is red?
                    {
                        z.parent.isBlack = true; // color = black
                        y.isBlack = true; // color = black
                        z.parent.parent.isBlack = false; // color = red
                        z = z.parent.parent;
                    }
                    else
                    {
                        if (z == z.parent.left) // left instead of right
                        {
                            z = z.parent;
                            rightRotate(z);
                        }
                        z.parent.isBlack = true; // color is black
                        z.parent.parent.isBlack = false; // color is red
                        leftRotate(z.parent.parent);
                    }
                }

            }
        }
    }

    public void leftRotate(Node x)
    {
        Node y = x.right;
        x.right = y.left;
        if (y != null && y.left != null)
        {
            y.left.parent = x;
        }
        y.parent = x.parent;
        if (x.parent == null)
        {
            root = y;
        }
        else if (x.parent.left != null && x == x.parent.left)
        {
            x.parent.left = y;
        }
        else
        {
            x.parent.right = y;
        }
        y.left = x;

        x.parent = y;

        int lefts;
        lefts = (x.left != null) ? x.left.leftChilds : 0;

        x.leftChilds = lefts + 1;

        lefts= (y.left != null) ? y.left.leftChilds : 0;

        y.leftChilds = lefts + 1;
    }

    public void rightRotate(Node x)
    {
        Node y = x.left;
        x.left = y.right;
        if (y != null && x != null && y.right != null)
        {
            y.right.parent = x;
        }
        y.parent = x.parent;
        if (x.parent == null)
        {
            root = y;
        }
        else if (x.parent.right != null && x == x.parent.right)
        {
            x.parent.right = y;
        }
        else
        {
            x.parent.left = y;
        }
        y.right = x;
        x.parent = y;

        int lefts;
        lefts = (x.left != null) ? x.left.leftChilds : 0;

        x.leftChilds = lefts + 1;

        lefts = (y.left != null) ? y.left.leftChilds : 0;

        y.leftChilds = lefts + 1;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:26:09.753

这个实现是用C语言实现的。希望你能把它转换成C#。

```
struct node {
    int key;
    char cl;
    struct node *left;
    struct node *right;
    struct node *parent;
} *p;

void left_rotate(struct node *r, struct node *q) {
    struct node *y;
    y = q -> right;
    q -> right = y -> left;
    y -> left -> parent = q;
    y -> parent = q -> parent;
    if (q -> parent != NULL) {
        if (q == q -> parent -> left) q -> parent -> left = y;
        else q -> parent -> right = y;
    }
    else p = y;
    y -> left = q;
    q -> parent = y;
}
void right_rotate(struct node *r, struct node *q) {
    struct node *y;
    y = q -> left;
    q -> left = y -> right;
    y -> right -> parent = q;
    y -> parent = q -> parent;
    if (q -> parent != NULL) {
        if (q == q -> parent -> left) q -> parent -> left = y;
        else q -> parent -> right = y;
    }
    else p = y;
    y -> right = q;
    q -> parent = y;
}

void ins_fix(struct node *r, struct node *q) {
    while (q != r &&q -> parent -> cl == 'r') {
        if (q -> parent == q -> parent -> parent -> left) {
            if (q -> parent -> parent -> right -> cl == 'r') {
                q -> parent -> cl = 'b';
                q -> parent -> parent -> cl = 'r';
                q -> parent -> parent -> right -> cl = 'b';
                q = q -> parent -> parent;
            }
            else {
                if (q == q -> parent -> right) {
                    q = q -> parent;
                    left_rotate(p, q);
                }
                q -> parent -> cl = 'b';
                q -> parent -> parent -> cl = 'r';
                right_rotate(p, q -> parent -> parent);
            }
        }
        else {
            if (q -> parent -> parent -> left -> cl == 'r') {
                q -> parent -> cl = 'b';
                q -> parent -> parent -> cl = 'r';
                q -> parent -> parent -> left -> cl = 'b';
                q = q -> parent -> parent;
            }
            else {
                if (q == q -> parent -> left) {
                    q = q -> parent;
                    right_rotate(p, q);
                }
                q -> parent -> cl = 'b';
                q -> parent -> parent -> cl = 'r';
                left_rotate(p, q -> parent -> parent);
            }
        }
    }
    p -> cl = 'b';
}

void add(int num) {
    struct node *temp, *r, *nil;
    temp = (struct node *) malloc(sizeof(struct node));
    nil = (struct node *) malloc(sizeof(struct node));
    temp -> key = num;
    temp -> right = nil;
    temp -> left = nil;
    temp -> parent = NULL;
    temp -> cl = 'r';
    nil -> parent = temp;
    nil -> cl = 'b';
    nil -> right = NULL;
    nil -> left = NULL;
    nil -> key = NULL;
    r = p;
    if (p == NULL || p -> key == NULL) {
        p = temp;
        p -> parent = NULL;
        p -> cl = 'b';
        return;
    }
    while (1) {
        if (r -> left -> key == NULL &&r -> key >= num) {
            r -> left = temp;
            temp -> parent = r;
            ins_fix(p, temp);
            return;
        }
        else if (r -> right -> key == NULL &&r -> keyright = temp;
        temp -> parent = r;
        ins_fix(p, temp);
        return;
        }
        else if (r -> key >= num) r = r -> left;
        else if (r -> keyright;
        }
    }

    struct node *tree_min(struct node *r) {
        while (r -> left -> key != NULL) {
            r = r -> left;
        }
        return r;
    }
    struct node *successor(struct node *r) {
        struct node *y;
        if (r -> right -> key != NULL) return tree_min(r -> right);
        y = r -> parent;
        while (y != NULL &&r == y -> right) {
            r = y;
            y = y -> parent;
        }
        return y;
    }

    void RB_Del_Fix(struct node *r, struct node *x) {
        struct node *w;
        while (x != r &&x -> cl == 'b') {
            if (x == x -> parent -> left) {
                w = x -> parent -> right;
                if (w -> cl == 'r') {
                    w -> cl = 'b';
                    x -> parent -> cl = 'r';
                    left_rotate(p, x -> parent);
                    w = x -> parent -> right;
                } //if closed
                if (w -> left -> cl == 'b' &&w -> right -> cl == 'b') {
                    w -> cl = 'r';
                    x = x -> parent;
                } //if closed
                else {
                    if (w -> right -> cl == 'b') {
                        w -> left -> cl = 'b';
                        w -> cl = 'r';
                        right_rotate(p, w);
                        w = x -> parent -> right;
                    } //if closed
                    w -> cl = x -> parent -> cl;
                    x -> parent -> cl = 'b';
                    w -> right -> cl = 'b';
                    left_rotate(p, x -> parent);
                    x = r;
                } //else closed
            } //if main closed
            else {
                w = x -> parent -> left;
                if (w -> cl == 'r') {
                    w -> cl = 'b';
                    x -> parent -> cl = 'r';
                    right_rotate(p, x -> parent);
                    w = x -> parent -> left;
                } //if closed
                if (w -> left -> cl == 'b' &&w -> right -> cl == 'b') {
                    w -> cl = 'r';
                    x = x -> parent;
                } //if closed
                else {
                    if (w -> left -> cl == 'b') {
                        w -> right -> cl = 'b';
                        w -> cl = 'r';
                        left_rotate(p, w);
                        w = x -> parent -> left;
                    } //if closed
                    w -> cl = x -> parent -> cl;
                    x -> parent -> cl = 'b';
                    w -> left -> cl = 'b';
                    right_rotate(p, x -> parent);
                    x = r;
                } //else closed
            } //else main closed
        } //while closed
        x -> cl = 'b';
    }
    void del(int num) {
        struct node *r, *temp, *y;
        r = p;
        if (r == NULL) {
            printf("Tree is Empty.");
            return;
        }
        while (r -> key != num || r -> key == NULL) {
            if (r -> key == NULL) {
                printf("Number not in Tree.");
                return;
            }
            if (r -> key >= num) r = r -> left;
            else r = r -> right;
        }
        if (r -> left -> key == NULL || r -> right -> key == NULL) y = r;
        else y = successor(r);
        if (y -> left -> key == NULL) temp = y -> right;
        else temp = y -> left;
        temp -> parent = y -> parent;
        if (y -> parent == NULL) p = temp;
        else {
            if (y == y -> parent -> left) y -> parent -> left = temp;
            else y -> parent -> right = temp;
        }
        if (y != r) r -> key = y -> key;
        if (y -> cl == 'b') RB_Del_Fix(p, temp);
    }
    void display(struct node *r) {

        if (r -> key == NULL) return;
        display(r -> left);
        printf(" (%d<->%c) ->", r -> key, r -> cl);
        display(r -> right);

    }

    void main() {

        int i, num;
        clrscr();
        do {
            printf("\n\tEnter the number for following work");
            printf("\n\n\t1=>Enter number to add");
            printf("\n\n\t2=>Display sorted element");
            printf("\n\n\t3=>Enter the number to delete from list\n\n");
            scanf("%d", &i);
            switch (i) {
            case 1:
                {
                    printf("\nEnter the number to enter\n");
                    scanf("%d", &num);
                    add(num);
                    break;
                }

            case 2:
                {
                    display(p);
                    getch();
                    break;
                }
            case 3:
                {
                    printf("Enter the number");
                    scanf("%d", &num);
                    del(num);
                    getch();
                    break;
                }

            default:
                exit(1);
            }
            clrscr();
        } while (1);

    }​ 
```

希望你能找到你的解决方案。

# javascript - javascript中的星型算法实现

> ID：11266847
> 
> 赞同：1
> 
> 时间：2012-06-29T18:10:13.057
> 
> 标签：javascript, graph-algorithm

我正在尝试在 Javascript 中实现 A 星算法。但我面临的问题在于 heuristic_cost_estimate 函数。我不知道如何实现这一点。至于这个函数的定义在哪里。我不想要整个代码，只想要函数。

```
 function A*(start,goal)
         closedset := the empty set    // The set of nodes already evaluated.
         openset := {start}    // The set of tentative nodes to be evaluated, initially containing the start node
         came_from := the empty map    // The map of navigated nodes.

         g_score[start] := 0    // Cost from start along best known path.
         // Estimated total cost from start to goal through y.
    *************************************************** heurisctic function******************  

   f_score[start] := g_score[start] + ***heuristic_cost_estimate(start, goal)***

         while openset is not empty
             current := the node in openset having the lowest f_score[] value
             if current = goal
                 return reconstruct_path(came_from, goal)

             remove current from openset
             add current to closedset
             for each neighbor in neighbor_nodes(current)
                 if neighbor in closedset
                     continue
                 tentative_g_score := g_score[current] + dist_between(current,neighbor)

                 if neighbor not in openset or tentative_g_score < g_score[neighbor] 
                     add neighbor to openset
                     came_from[neighbor] := current
                     g_score[neighbor] := tentative_g_score
                     f_score[neighbor] := g_score[neighbor] + heuristic_cost_estimate(neighbor, goal)

         return failure

     function reconstruct_path(came_from, current_node)
         if came_from[current_node] is set
             p := reconstruct_path(came_from, came_from[current_node])
             return (p + current_node)
         else
             return current_node 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:29:02.023

[这篇文章](https://stackoverflow.com/a/9141357/1405830)在 A* 搜索的上下文中对适当的启发式函数提供了很好的解释。

据我了解，它应该提供一种快速的方法来估算从开始到结束节点的成本（无论您定义的成本是多少），同时通过您当前正在考虑的节点。它用于帮助确定到达终端节点应采取的最佳路径。

[这是有关启发式函数](http://en.wikipedia.org/wiki/Heuristic_function)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:34:31.690

该功能不是预定义的，因为它会根据您的用途而变化`A*`。启发式必须适合您实际尝试解决的问题，并且必须遵循某些规则（Zhihao 链接到的答案似乎将它们全部拼写出来）。

所以基本上：*你*必须决定什么是对你的实际问题有意义的启发式，然后在一个函数中实现它。不止一个。

请注意，您的启发式方法越接近真实成本，您的搜索速度就越快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-14T18:17:28.177

**A** * 的启发式函数取决于您使用的图形类型以及适用于通过它的移动的规则。我知道的最简单的函数之一适用于基本网格中的 4 方向移动（上、下、左、右），称为[曼哈顿距离](https://en.wikipedia.org/wiki/Taxicab_geometry)，可能看起来很简单：

```
function manhattan (pos0, pos1) {
  var d1 = Math.abs(pos1.x - pos0.x);
  var d2 = Math.abs(pos1.y - pos0.y);
  return d1 + d2;
} 
```

但是，如果您的环境允许对角线移动，那么您需要另一种支持 8 个方向的启发式类型：

```
function diagonal (pos0, pos1) {
  var D = 1;
  var D2 = Math.sqrt(2);
  var d1 = Math.abs(pos1.x - pos0.x);
  var d2 = Math.abs(pos1.y - pos0.y);
  return (D * (d1 + d2)) + ((D2 - (2 * D)) * Math.min(d1, d2));
} 
```

当然，这些只是示例，其他答案中还指出了许多其他示例。

一般来说，如果解释得当，这个算法可能看起来相当简单。但是编码它是一项不同的任务，对于初学者来说可能是一个相当大的挑战。我建议检查一些用您选择的语言编写的工作库。然后，您可以根据自己的需要调整它或从头开始编写自己的。

更多链接：

[Javascript中的好例子](https://github.com/bgrins/javascript-astar)

[启发式函数理论](http://theory.stanford.edu/%7Eamitp/GameProgramming/Heuristics.html)

# css - Heroku CSS 文件未更新

> ID：11266849
> 
> 赞同：6
> 
> 时间：2012-06-29T18:10:16.203
> 
> 标签：css, facebook, heroku

关于我目前正在构建的 Facebook APP，我更改了 Heroku 中**base.css**文件中的一些代码，当我使用命令时：

```
git commit -am
git push heroku 
```

重新加载后页面看起来仍然相同，并收到消息“一切都是最新的”。

我错过了什么/做错了什么？

文件的位置是：stylesheets/base.css

我也试过：

```
git push heroku stylesheets 
```

但这没有帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T01:21:43.363

我在heroku上遇到了与Django相同的问题。在遵循标准的 git add、commit、push 循环之后——服务器的 CSS 没有更新。包括静态文件在内的所有内容都已推送到服务器。

重新启动heroku服务器虽然有效：

```
heroku restart 
```

试一试！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-17T18:53:34.553

对我来说，是 Cloudflare 缓存了我的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:35:34.497

我最近遇到了这个问题，就我而言，这是一个区分大小写的问题。该页面将该文件称为 theFile.css，但该文件实际上是 thefile.css。在具有不区分大小写的文件系统的 OS X 上，它可以工作，但是放在 Heroku 上时就坏了。以防万一这对任何人都有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T02:18:56.797

您应该添加每个分支以提交：

例子：

```
git add css 
```

然后提交并推送

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-10T18:14:26.483

您的本地 CSS 文件可以正常工作。但是，如果您在项目中使用 bootstrap 或 material-ui，请确保您在 index.html 文件中使用了 CDN 链接。

之后它会正常工作。谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-15T04:44:50.690

我知道这是一个旧线程，但如果以上答案都不能帮助某人更改他们在 Heroku 上反映的 CSS，我想建议另外两个选项：

*   如果您在 Django 中工作并且您的 CSS 文件存储在您的静态文件夹中，根据您的配置，您可能需要`python manage.py collectstatic`在本地机器上运行 git add ( `git add .`)、git committing ( `git commit -m "collecting static files"`) 和 git push to heroku (`git push heroku main`或`git push heroku master`)
*   确保你使用 git 推送到 Heroku，你只是从你的主分支或主分支推送；我不相信 Heroku 会接受其他分支名称。

# ruby-on-rails - Rails：将供应商/缓存添加到 SCM？

> ID：11266852
> 
> 赞同：4
> 
> 时间：2012-06-29T18:10:24.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3

[Agile Web Development with Rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)的第 239 页指示我们将`vendor/cache`目录添加到 git。

这实际上是推荐的做法吗？我的印象是这个目录是特定于平台的。在 OSX 下提交缓存目录然后在 Linux 下部署到 prod 会导致问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T18:26:25.663

如果您将应用程序的 gem 打包到本地，这就是存储它们的地方。因此，如果您从 SCM 源进行部署并且想要使用您在本地使用的确切 gem 包，您将需要这些文件，这就是我怀疑本书建议这样做的原因。

就 gem 文件而言，如果您在 Mac 上开发并部署到 Linux 服务器上，它不会造成问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-21T18:23:14.753

简短的回答 - 是的。

长答案 - 让您的 gem 依赖项与您的应用程序保持一致非常方便。不仅是 Gemfile 和 Gemfile.lock，还有 gem 本身。

有许多优点 - 例如无需连接到 gem 服务器即可使用所有 gem。

# java - 可以为没有本地服务器的本地分析配置 Sonar 插件排除项吗？

> ID：11266854
> 
> 赞同：1
> 
> 时间：2012-06-29T18:10:29.503
> 
> 标签：java, eclipse, sonarqube

我们有一个中央 Sonar 服务器，用于扫描和报告组织内的所有代码。我们还有适用于 Eclipse (RTC) 的 Sonar 插件，以便我们可以在编辑代码时运行本地分析。

我遇到的问题是我需要在 3rd 方库上设置排除项，以便在运行本地分析时不会对其进行解析。我已经了解了如何在服务器上设置排除项，但我没有更改服务器设置的权限（并且没有看到需要为本地分析执行此操作）。我的开发计算机上也没有运行本地 Sonar 服务器，因此我无法将插件指向中央实例以外的服务器。

所以问题是我如何在没有本地声纳服务器（例如）的情况下专门为我的本地分析设置排除项`localhost:9000`？我是否需要创建属性文件、设置 XML 文件等？如果是这样，那么我应该把它放在哪里以便插件选择排除项？我尝试使用以下语法在项目文件夹的根目录中设置一个属性文件：

```
exclusions=/[projectRootFolder]/src/main/java/com/**/*.java 
```

但是该文件夹结构中的代码仍然会被解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:28:25.573

Sonar Eclipse 插件旨在集中配置您正在运行的源代码分析工具。

必须要问的一个问题是，为什么要在本地运行不同的分析？通常，用户希望在将本地 Eclipse 工作区中的文件提交到共享代码流之前对它们执行相同的分析。

最后，假设您使用的是 Maven，可以配置 PMD、Checkstyle 和 Findbugs 以使用它们的标准 Maven 插件运行。为了与 Sonar 同步，您可以下载每个工具的 XML 配置。以下是 Nemo 的“Sonar way with Findbugs”配置文件的示例：

*   [http://nemo.sonarsource.org/profiles/permalinks/12](http://nemo.sonarsource.org/profiles/permalinks/12)

# google-apps-script - 上传 Excel 文件并通过脚本以电子表格形式立即访问

> ID：11266857
> 
> 赞同：0
> 
> 时间：2012-06-29T18:10:36.527
> 
> 标签：google-apps-script, google-sheets

我正在尝试通过 Apps 脚本（使用 GUI 文件上传）上传 Excel 文件，并立即通过脚本打开它以进行处理。

通过脚本上传和保存时（使用文件上传 GUI 组件），文件不会被转换。而且我没有看到任何 API 可以将文件转换为原生谷歌文档（在 DocsList 或 Docs API 3 中）。

有什么方法可以触发将文档导出/转换为 Google Docs 的原生格式？我看到有人提到使用 UrlFetch 来触发 Docs API 事件，但都说这并不容易。还有就是用 UrlFetch 上传文件，而不是简单地触发转换为本机格式。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-28T10:58:14.550

您还可以使用高级驱动器服务 ( [https://developers.google.com/apps-script/advanced/drive](https://developers.google.com/apps-script/advanced/drive) )。

[首先，您必须按照此处https://developers.google.com/apps-script/guides/services/advanced](https://developers.google.com/apps-script/guides/services/advanced)的说明为您的脚本启用它， 然后您可以像这样使用它：

```
function convertFile(destTitle,sourceFileId) {

  // Set the "convert" property to true.
  var opArgs = {"convert" : "true"};
  // Set the request body to title:<something>
  var resource = {'title': destTitle};
  var response = Drive.Files.copy(resource, sourceFileId, opArgs);

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:07:55.017

Google Drive API 可以使用[files.copy](https://developers.google.com/drive/v2/reference/files/copy)方法实现这一点。如果你添加

```
?convert=true 
```

您的文件将被复制，并且该副本将被转换为 Google 电子表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:20:42.397

免责声明 - 我没有尝试过，所以不确定它是否有效。您可以登录到您的 Google Drive 并在上传设置下，您可以将其设置为自动转换每个文件而不要求确认。

然后尝试 Apps 脚本。这可能有效，也可能无效，但值得尝试

# android - 2 android中ListView中的按钮

> ID：11266860
> 
> 赞同：1
> 
> 时间：2012-06-29T18:10:46.723
> 
> 标签：android, listview

我有一个自定义 ListView，其中每行有 2 个按钮和一个 textview。

我想更改单击按钮的文本。如何识别单击了哪一行的哪个按钮，然后如何更改同一按钮的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:19:24.733

```
How to identify that which button of which row has been clicked 
```

使用 onClickListener()。单击按钮时，将调用该按钮的 onClickListener。

```
How to change the text of the same button 
```

在 onClickListener() 你可以做类似的事情

```
yourTextView.setTextColor(Color.rgb(0,0,0)); //replace 0,0,0 with the rgb value of the color 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:42:29.767

在一个 ListView 中有很多不同的可点击视图的例子

像[这样](https://stackoverflow.com/questions/1821871/android-how-to-fire-onlistitemclick-in-listactivity-with-buttons-in-list)

点应该保持

您需要在 getView 中为每个视图设置侦听器（不要在每次获取视图中创建，只需传递已经创建的一个，或者可以传递它并在同一个适配器类中实现侦听器）

您还需要`row position`so 可以使用不同的逻辑 l`ike get & Set tag`或`get button view parent (which will be list row)`在此[链接中](https://stackoverflow.com/questions/11188741/android-listview-get-textview-value-at-the-position-where-the-toggle-button-is-c/11188879#11188879)

# java - 从 C 程序读取输出时，BufferedReader 挂起

> ID：11266861
> 
> 赞同：0
> 
> 时间：2012-06-29T18:10:50.063
> 
> 标签：java, bufferedreader, runtime.exec

我正在用 Java 编写一个程序，该程序将命令发送到 C 程序并读取其输出，但是当我尝试实际读取输出时，我发现它挂起。代码是：

```
 import java.io.*;
    public class EsecutoreC {
        private String prg;
        OutputStream stdin=null;
        InputStream stderr=null;
        InputStream stdout=null;
        BufferedReader br;
        Process pr;
        public EsecutoreC(String p){
            prg=p;
            try {
                pr=Runtime.getRuntime().exec(prg);
                stdin=pr.getOutputStream();
            stderr=pr.getErrorStream();
            stdout=pr.getInputStream();
                    br=new BufferedReader(new InputStreamReader(stdout));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    public void sendInput(String line){
        line=line+"\n";
        try {
            stdin.write(line.getBytes());
            stdin.flush();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }

}
public BufferedReader getOutput(){
    return br;
}
} 
```

当我需要读取程序的输出时，我只需使用 getOutput 来获取 BufferedReader，然后调用 readLine()。我看到程序挂起，因为我在调用 readLine 之后立即放置了一个 println 并且没有打印任何内容。我还在 C 程序中的每一行输出之后添加了一个 \n。另外，有没有办法显示通过 Runtime.getRuntime().exec() 调用的程序的窗口？这样当我向它发送字符串或从其输出中读取时，我可以检查是否还有其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:05:57.023

当你调用`readLine()`BufferedReader 时会阻塞，直到输出中有一个换行符`'\n'`。尝试从终端/命令行调用 C 程序，看看输出是否真的在新行中终止。

或者，您可以一次只`read(1)`使用一个字符（不需要`BufferedReader`then）并立即打印。

编码不影响`'\n'`字符。

# android - 如何关闭通过意图调用的android应用程序（带线程）

> ID：11266863
> 
> 赞同：0
> 
> 时间：2012-06-29T18:10:56.413
> 
> 标签：android, multithreading, android-intent

我对android有点陌生，此时我在我的 ShoplistActivity 上调用barcodeSCanner，如下所示：

```
Intent barcode = new Intent(ShopListActivity.this, BarcodeActivity.class);
startActivityForResult(barcode,0); 
```

然后在我的 BarcodeActivity 我有这样的东西：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        switch (requestCode) {
        case IntentIntegrator.REQUEST_CODE: {
            if (resultCode != RESULT_CANCELED) {
                IntentResult scanResult = IntentIntegrator.parseActivityResult(
                        requestCode, resultCode, data);

                if (scanResult != null) {

                    try {
                        setContentView(R.layout.automatico);

                        editForEAN = (EditText) findViewById(R.id.EditEAN);
                        txt_EAN = scanResult.getContents();
                        editForEAN.setText(txt_EAN);

                    } catch (Exception e) {
                        Toast.makeText(getBaseContext(), e.getMessage(),
                                Toast.LENGTH_LONG).show();
                    }

                    }

            }
        }
            break;
        }
    } 
```

现在我的问题是，我想用线程实现一种关闭 BarcodeScanner 的方法，如果它没有在 5 秒内使用，尝试使用 Handler 没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:50:44.980

为什么要关闭它？Android 应用程序不需要关闭。如果用户启动您的应用程序，然后转到其他地方，您不在乎。您确实需要保存您的状态并准备好在用户回来时重新激活。

从本质上讲，Android UX 是“无退出按钮”。您的应用程序会一直运行，直到系统将其丢弃以腾出空间给其他东西。唯一的例外是正在进行的任务，例如音频播放和后台服务。在这些情况下，您应该为用户提供停止播放或卸载服务的方法，但无需停止整个应用程序。

# python - Python 类说明

> ID：11266864
> 
> 赞同：0
> 
> 时间：2012-06-29T18:11:06.200
> 
> 标签：python, class

我在一本书中看到了下面的一段代码，并想知道它是如何工作的..我试图了解自己，但在几个地方陷入困境..我知道它更像是一个教学问题，但希望在论坛中能对我有所帮助。 .

代码：

```
import os
import re

class Wiki:
    "A class representing a wiki as a whole."
    HOME_PAGE_NAME = "HomePage"
    def __init__(self, base):
        "Initializes a wiki that uses the provided base directory."
        self.base = base
        if not os.path.exists(self.base):
            os.makedirs(self.base)
        elif not os.path.isdir(self.base):
            raise IOError('Wiki base "%s" is not a directory!' % self.base)
    def getPage(self, name=None):
        """Retrieves the given page for this wiki, which may or may not
        currently exist."""
        if not name:
            name = self.HOME_PAGE_NAME
        return Page(self, name)

class Page:
    """A class representing one page of a wiki, containing all the
    logic necessary to manipulate that page and to determine which other
    pages it references."""
    #We consider a WikiWord any word beginning with a capital letter,
    #containing at least one other capital letter, and containing only
    #alphanumerics.
    WIKI_WORD_MATCH = "(([A-Z][a-z0-9]*){2,})"        
    WIKI_WORD = re.compile(WIKI_WORD_MATCH)
    WIKI_WORD_ALONE = re.compile('^%s$' % WIKI_WORD_MATCH)
    def __init__(self, wiki, name):
        """Initializes the page for the given wiki with the given
        name, making sure the name is valid. The page may or may not
        actually exist right now in the wiki."""
        #WIKI_WORD matches a WikiWord anywhere in the string. We want to make
        #sure the page is a WikiWord and nothing else.
        if not self.WIKI_WORD_ALONE.match(name):
            raise(NotWikiWord, name)
        self.wiki = wiki
        self.name = name
        self.path = os.path.join(self.wiki.base, name)
    def exists(self):
        "Returns true if there's a page for the wiki with this name."
        return os.path.isfile(self.path)
    def load(self):
        "Loads this page from disk, if it exists."
        if not hasattr(self, 'text'):
            self.text = ''
            if self.exists():
                self.text = open(self.path, 'r').read()    
    def save(self):
        "Saves this page. If it didn't exist before, it does now."
        if not hasattr(self, 'text'):
            self.text = ''
        out = open(self.path, 'w')
        out.write(self.text)
        out.close()
    def delete(self):
        "Deletes this page, assuming it currently exists."
        if self.exists():
            os.remove(self.path)
    def getText(self):
        "Returns the raw text of this page."
        self.load()
        return self.text

class NotWikiWord(Exception):
    """Exception thrown when someone tries to pass off a non-WikiWord
     as a WikiWord."""
    pass 
```

在 Python 外壳中：

```
 >  >  >  from BittyWiki import Wiki
 >  >  >  wiki = Wiki(“localwiki”)
 >  >  >  homePage = wiki.getPage()
 >  >  >  homePage.text = “Here ’ s the home page.\n\nIt links to PageTwo and 
PageThree.”
 >  >  >  homePage.save() 
```

这是我的理解。

1.  创建了 2 个类 a) Wiki 和 b)Page
2.  页面类存储与页面相关的所有信息。

问题：

1.  我们创建了一个方法对象 -homepage 但 homepage.save() 是如何工作的。homepage 是 Wiki 的对象， save() 是页面对象的方法。它是怎么工作的？

任何澄清都会非常有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:17:17.690

> 主页是 Wiki 的对象

不正确。`Wiki.getPage()`是一个工厂方法，它返回一个`Page`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:18:36.523

`wiki.getPage()`返回一个 Page 对象，而不是一个 wiki。所以，`homepage`确实有必要的方法`save`。

# javascript - 如何选择具有确切一个类名的元素？

> ID：11266866
> 
> 赞同：1
> 
> 时间：2012-06-29T18:11:17.083
> 
> 标签：javascript, jquery

所以我有，

```
<ul>

<li class="foo">
abc
</li>

<li class="foo bar">
def
</li>

</ul> 
```

如果我做`$('.foo').css('font-size','x-large');`

这将使用大字体更改两个 li 元素。我怎样才能选择只有“foo”而不是“bar”的类？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T18:13:26.003

我想您可以使用以下属性选择器：

```
$('li[class=foo]'); 
```

这是一个可以玩的[JSFiddle 。](http://jsfiddle.net/jKgqK/))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:13:36.147

这应该有效：

```
$('.foo:first').css('font-size','x-large'); 
```

# windows - 驱动程序/代码签名

> ID：11266868
> 
> 赞同：2
> 
> 时间：2012-06-29T18:11:19.723
> 
> 标签：windows, visual-studio-2010, driver

老实说，我自己也不知道把它放在哪里，但我把它放在这里，因为签名过程需要 VS 的 signtool。关于签名和数字证书，我在这里有点困惑。

如果我错了，请纠正我。

1）有两种类型的签名：代码签名和驱动程序签名。驱动程序必须做后者，而最终用户软件只需要做代码签名。

2) 驱动程序签名需要来自 VeriSign、GlobalSign 等来源的数字证书。而对于代码签名，我们可以使用自己生成的公钥生成自己的证书。

我理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-08-22T21:35:03.840

> 有两种类型的签名：代码签名和驱动程序签名。驱动程序必须做后者，而最终用户软件只需要做代码签名。

两种类型是：代码签名和 EV 代码签名。驱动程序需要稍后加上额外的验证和批准，但仅适用于 Windows 10 驱动程序。

> 驱动程序签名需要来自 VeriSign、GlobalSign 等来源的数字证书。而对于代码签名，我们可以使用自己生成的公钥生成自己的证书。

EV 签名（用于驱动程序）来自同一家公司，但是它们包含一个硬件令牌，每次签名都需要它，

适用于 Windows 10 的驱动程序需要以下内容：

1.  一种[EV（扩展验证）](https://docs.microsoft.com/en-us/windows-hardware/drivers/dashboard/get-a-code-signing-certificate)代码签名，它[需要硬件令牌](https://www.codeproject.com/Articles/1271890/EV-Code-Signing-with-a-hardware-token)，并且比常规代码签名证书的成本更高。

2.  [向 Microsoft 提交](https://docs.microsoft.com/en-us/windows-hardware/drivers/dashboard/hardware-certification-submissions)由他们签名的反代码。为此，签名者（必须向 Microsoft 硬件程序[注册）。](https://docs.microsoft.com/en-us/windows-hardware/drivers/dashboard/register-for-the-hardware-program)该要求自 2016 年 1 月起生效。

有一个关于这个过程的优秀[教程。](https://manualzz.com/doc/30290742/etoken-software-developer-s-guide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:35:04.797

前段时间，我学习了使用内核模式代码签名演练进行驱动程序签名 [http://msdn.microsoft.com/en-us/library/windows/hardware/gg487328.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487328.aspx)（可作为 doc 文件下载）。我从未听说过内核模式驱动程序的代码签名。对于驱动程序，有两种签名类型：测试签名和发布签名。测试签名用于开发过程，Win7和Vista 64位只允许在特殊模式下测试签名驱动程序。Release-sign 用于产品发布，需要购买数字证书。发布签名的驱动程序可以不受限制地安装在任何 Windows 版本中。

内核模式代码签名演练包含内核模式驱动程序的测试和发布签名的分步说明。

# python - Python OpenCV 通过轮廓错误进行迭代

> ID：11266874
> 
> 赞同：0
> 
> 时间：2012-06-29T18:11:50.237
> 
> 标签：python, opencv

我正在使用 OpenCV 分析网络摄像头拍摄的照片。然后我裁剪，并将图像转换为仅黑白。然后我想找到图像中的所有轮廓，并确定最大的轮廓。

我在 Ubuntu 操作系统的终端窗口中运行代码

以下是相关代码：

```
num_contours, contours = cvFindContours(contourimg, # num_contours - # of contours
                          cvCreateMemStorage(0),    # and contours are the actual contours
                          sizeof_CvContour)         # cvFindContours() destroys contourimg

max_size = float("-inf")
max_contour = None

for contour in contours.hrange():           # contours.hrange() returns a list of all contours
    print contour
    size = abs(cvContourArea(contour))      # calculates the area of the bounding rectangle
    if size > max_size:                             
        max_size = size                     # update max_size if larger contour found
        max_contour = contour               # update max_contour if larger contour found 
```

当我运行代码时，我得到不同的错误。一个是分段错误，退出 python 并返回到终端，但另一个是：

```
 File "fitness.py", line 74, in boundingimg
size = abs(cvContourArea(contour))      # calculates the area of the bounding rectangle
File "/usr/lib/pymodules/python2.6/opencv/cv.py", line 6741, in cvContourArea
return _cv.cvContourArea(*args)

RuntimeError:  openCV Error:
    Status=Bad argument
    function name=cvPointSeqFromMat
    error message=Input array is not a valid matrix
    file_name=/build/buildd/opencv-2.1.0/src/cv/cvutils.cpp
    line=53 
```

我发现这很奇怪，因为我有一个所有轮廓的打印语句，它们都工作正常，for 循环在抛出这个错误之前持续了很长时间。我不确定这个轮廓与所有其他轮廓有什么不同。

此外，有时（不经常）代码有效，因此错误不会每次都发生。

# spring - 春季安全 - 404错误

> ID：11266878
> 
> 赞同：1
> 
> 时间：2012-06-29T18:12:15.460
> 
> 标签：spring, security

为什么当我添加

```
 <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

到我的项目它不工作，我得到： HTTP 状态 404。但是当我删除过滤器依赖项时，它再次工作。

知道为什么吗？为什么会导致错误？

这是我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee      /web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">

<!-- Define the basename for a resource bundle for I18N -->
<context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>messages</param-value>
</context-param>

<context-param>
    <param-name>contextClass</param-name>
    <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext
    </param-value>

</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<!-- The definition of the Root Spring Container shared by all Servlets 
    and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:/META-INF/root-context.xml,
        classpath:/META-INF/appServlet/spring-security.xml
    </param-value>

</context-param>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:/META-INF/appServlet/servlet-context.xml

            </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

   </web-app> 
```

这是我的 spring_security.xml

```
 <beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

<security:http auto-config="true">
    <security:intercept-url pattern="/welcome*" access="ROLE_USER" />
    <security:form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <security:logout logout-success-url="/logout" />
</security:http>

<security:authentication-manager>
    <security:authentication-provider>
        <security:jdbc-user-service data-source-ref="dataSource"

            users-by-username-query="
                select username,password, enabled 
                from users where USERNAME=?" 

            authorities-by-username-query="
                select u.username, ur.authority from users u, user_roles ur 
                where u.user_id = ur.user_id and u.username =?  " 

        />
    </security:authentication-provider>
</security:authentication-manager>

   </beans:beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:23:58.097

尝试改变：

```
<security:http auto-config="true"> 
```

到

```
<security:http auto-config="true" authentication-manager-ref="authManager"> 
```

...和...

```
<security:authentication-manager> 
```

到

```
<security:authentication-manager id="authManager"> 
```

# .htaccess - CodeIgniter 只加载默认控制器

> ID：11266879
> 
> 赞同：3
> 
> 时间：2012-06-29T18:12:27.033
> 
> 标签：.htaccess, codeigniter

我一直在互联网上爬行，其他人使用的解决方案都没有为我工作。问题是默认控制器是唯一会加载的控制器。这里有很多关于这个主题的帖子。但我已经尝试了所有这些，包括尝试所有五个设置的主要建议`$config['uri_protocol']`。我已经尝试了所有五种设置，但它们都不起作用。

我还尝试了几种不同的 .htaccess 设置，但也没有任何帮助。这是我试过的一对。第一个是他们网站上的官方 CI .htaccess。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

和

```
#Standard CodeIgniter Rewrite
#-------------------------------------
RewriteCond $1 !^(index\.php|resources|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L,QSA] AddHandler cgi-script .pl 
```

尽管如此，还是没有运气。有人可以提示我正确组合 .htaccess 和 $config['uri_protocol'] 设置。那里的所有答案都各不相同。是因为服务器配置不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:28:46.917

我知道了。最后。这是我的 .htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /materials-library/index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 /index.php
</IfModule> 
```

并且`$config['uri_protocol']`设置为`REQUEST_URI`。

# html - 通过 html5 播放带有 mp3 的 icecast

> ID：11266880
> 
> 赞同：3
> 
> 时间：2012-06-29T18:12:33.750
> 
> 标签：html, stream, mp3, icecast

我有网络基地广播电台，它通过带有 mp3 编解码器的 icecast 服务器流式传输音乐。

[http://live.liveradio.ir:8000/airtime_128](http://live.liveradio.ir:8000/airtime_128) 我可以通过 VLC 和其他播放器应用程序播放它。

现在我想通过 HTML5 在浏览器中播放它。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:09:58.943

好吧，这就是我的答案。你可以做到，但由于缺乏浏览器的音频标准，你会得到不同的结果。执行此操作的基本方法是使用`<audio>`标记，然后将源指向您的流 URL。然而，MP3 呈现出复杂性。只有 Chrome 和 Safari 完全支持 HTML5/MP3 流媒体。如果我的研究属实，IE 一直是不确定的。Firefox 和 Opera 根本不支持它。

我的建议是创建两个流，一个在 MP3 中，一个在 OGG 中，并带有 Flash 备份。然后，您可以编写 HTML 代码以检测浏览器并从那里开始。

另一种选择是使用`<video>`标签。有关更多信息，请参阅这两个链接：

[https://github.com/dz0ny/AudioJS](https://github.com/dz0ny/AudioJS)没有真正使用`<video>`，但它是 VideoJS 的一个分支。看看那个。有些人已经能够用它只流式传输音频。

[http://www.wowza.com/forums/showthread.php?14071-Streaming-to-HTML5-audio-tag](http://www.wowza.com/forums/showthread.php?14071-Streaming-to-HTML5-audio-tag)

# javascript - 使用 AJAX 的 Http POST 请求

> ID：11266881
> 
> 赞同：0
> 
> 时间：2012-06-29T18:12:41.753
> 
> 标签：javascript, ajax

我有一个已经工作了一段时间的 Web 应用程序。我正在使用 AJAX 技术使用 HTTP POST 请求发送数据。

我正在使用这样的 JavaScript：

```
var rdate=document.getElementById('rdate').value;
var Description=document.getElementById('description').value; 
var urlstring="rdate="+rdate+"&Description="+Description;

oxhr.open("POST","http://localhost/info/php/store.php",false); 
//checking for ready state change here

oxhr.send(urlstring); 
```

但是在数据库中，我看到所有内容都是空白的（没有数据，但创建了一行） urlstring 不应该包含变量吗？或者 JavaScript 中可能出现的错误。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:31:11.803

解决方案（*找到*问题，因为人们不是物理的）：**使用 Firebug / Fiddler2 / IE Developer Tools 等工具，查看*真正*发送**的内容，或者是否发出请求。

虽然我不会声称以下是答案，但帖子中的上述手动字符串构建是......痛苦而且不是很健壮。这里有一个小有用的功能：

```
function encodeParams(params) {      
    var components = []
    for (var k in params) {
        if (params.hasOwnProperty(k)) {
            var v = params[k]
            components.push(encodeURIComponent(k) + "=" + encodeURIComponent(v))
        }
    }
    return components.join("&")
} 
```

用于：

```
var queryString = encodeParams({
    admin_id: 1,
    rdate: rdate,
    Description: description
}) 
```

这也正确地对组件进行*编码*，因此查询字符串不会被损坏。

快乐编码。

# c# - 在没有xml文件的c#中使用log4net

> ID：11266885
> 
> 赞同：2
> 
> 时间：2012-06-29T18:12:58.490
> 
> 标签：c#, winforms, windows-services, log4net

我想为我的 Windows 服务应用程序使用 log4net 来编写日志，但不使用 xml。一段代码会有所帮助。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:19:31.217

我认为你的意思是你不想要 log4net 的外部配置文件，但你希望它嵌入到你的 app.config 或 web.config 中。

从代码配置它不是一个好主意。您经常需要维护该配置、更改文件位置、更改日志大小等。因此您需要一个易于访问的位置来执行此操作。

[这](http://www.codeproject.com/Articles/11328/Configure-Log4Net-for-Desktop-and-Web-Applications)是一篇向您展示如何将 log4net 配置嵌入应用程序配置文件的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:15:44.040

您可以配置`log4net`为使用您喜欢的任何类型的附加程序，而不仅仅是`XML`. [有关许多不同类型的附加程序，请参见此处](http://logging.apache.org/log4net/release/sdk/log4net.Appender.html)。

您可以像这样在您的`Web.config`（或`App.config`）中配置它，例如：

```
<log4net>  
    <appender name="LogFileAppender" type="log4net.Appender.FileAppender, log4net">
      <param name="File" value="Log\Log.NHibernate.txt" />
      <param name="AppendToFile" value="false" />
      <layout type="log4net.Layout.PatternLayout, log4net">
        <param name="ConversionPattern" value="%m%n" />
      </layout>
    </appender>
    <!-- Note: Priority level can be ALL/DEBUG/INFO/WARN/ERROR/FATAL/OFF -->
    <root>
      <priority value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
    </root>
  </log4net> 
```

# javascript - Javascript 中不允许的方法

> ID：11266890
> 
> 赞同：2
> 
> 时间：2012-06-29T18:13:26.503
> 
> 标签：javascript, ajax, javascript-events

我正在学习 Javascript，在此过程中，我发现某些操作在 Javscript 中是不允许的，这在一般编程中是相当常见的。例如，由于明显的安全原因，无法在 Javascript 中控制用户的鼠标指针，请参阅[Move Mouse Cursor Javascript](https://stackoverflow.com/questions/4804068/move-mouse-cursor-javascript)。

我想知道更多这样的事件，它们可以用来控制用户输入，但在 Javascript 中是不可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T18:25:29.690

没有什么能阻止您从 Javascript*本身*移动鼠标指针，这是您的代码运行的*环境*（Web 浏览器）不提供执行此操作的库函数。

您可以通过编写 Web 浏览器扩展（例如 Windows 上的受信任 ActiveX 控件）来解决这个问题，该扩展提供到脚本层的绑定，例如[SetCursorPos() 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648394.aspx)然后您就可以从您的 Javascript 代码中移动指针。

换句话说，Javascript 语言不会以任何方式限制您，但是 Web 浏览器环境会实施（合法的）限制，如果您真的想要（当然取决于浏览器）可以取消这些限制。

最后一件事：鼠标指针属于用户。以编程方式移动它是侵入性的、令人惊讶的、令人困惑的，并且总体上会降低用户对您的应用程序和他的桌面环境的信心。*请不要那样做。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:24:27.407

好吧，这些可能会有所帮助：

**[给](http://www.dynamicdrive.com/forums/showthread.php?t=21964)**[你](http://javascript.about.com/od/reference/a/cannot.htm)*[_](http://www.javascripter.net/faq/javascr2.htm)*

# google-maps-api-3 - 单击时创建标记，然后使其可拖动

> ID：11266893
> 
> 赞同：0
> 
> 时间：2012-06-29T18:14:02.573
> 
> 标签：google-maps-api-3, drag, marker

我有一个监听器，它在单击地图时创建一个新标记。创建标记后，如果需要，我希望能够将其拖动到新位置。我尝试使用“draggable: true”属性，它允许拖动。但是，当拖动结束时，会创建一个新的不需要的标记。我该如何防止呢？谢谢。

更新：我正在使用 Google Maps API V3，从 Delphi 调用 JS 例程。很抱歉没有包含该信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:15:53.563

从您提供的少量信息来看，这听起来像是您在使用 Google Maps javascript API。假设您的侦听器已添加到地图对象，则在拖动标记时不应创建其他标记。

我会检查以确保您没有将相同的点击侦听器添加到正在创建的标记中。如果您希望在单击标记时发生某些事情，它应该有一个单独的侦听器。

这只是一个猜测。如果您使用更多详细信息更新了答案，则更容易弄清楚发生了什么。

# java - Hyperic Sigar Mac Osx 错误 - 无库

> ID：11266895
> 
> 赞同：5
> 
> 时间：2012-06-29T18:14:06.107
> 
> 标签：java, hyperic, sigar

嗨，我使用第三方库名称 Hyperic Sigar。当我运行我的代码时，它显示错误，

这是我的代码：

```
package pack;

import org.hyperic.sigar.*;

public class NetworkData {
    public static void main(String[] args) {
   Sigar sigar = new Sigar();
    }

} 
```

这是错误消息：

```
1 [main] DEBUG Sigar  - no libsigar-universal64-macosx.dylib in java.library.path
org.hyperic.sigar.SigarException: no libsigar-universal64-macosx.dylib in java.library.path
    at org.hyperic.sigar.Sigar.loadLibrary(Sigar.java:172)
    at org.hyperic.sigar.Sigar.<clinit>(Sigar.java:100)
    at pack.NetworkData.main(NetworkData.java:10) 
```

我在 Mac Osx Snow Leopard 上使用 Java 开发人员的 Eclipse IDE 进行开发发现了一些旧帖子（[“在多语言操作系统上使用 Hyperic SIGAR 时出现“java.library.path 中没有 sigar-x86-winnt.dll”错误](https://stackoverflow.com/questions/8832751/no-sigar-x86-winnt-dll-in-java-library-path-error-when-using-hyperic-sigar-on)）帖子说我需要添加一些路径，如果是这样...我如何在 Mac Osx 中添加该路径？希望有人能帮忙^^

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-19T10:46:29.687

```
 # to find it later because you will need it ...
 cd ~/Downloads/

 # or whatever the latest one at the time of reading is ... 
 curl https://netix.dl.sourceforge.net/project/sigar/sigar/1.6/hyperic-sigar-1.6.4.zip

 # unpack the package to the tmp dir
 sudo unzip -o /Users/phz/Downloads/hyperic-sigar-1.6.4.zip -d /tmp/

 # copy the libsigar-universal64-macosx.dylib to your class path dir
 sudo find /tmp/ -name libsigar-universal64-macosx.dylib \
   -exec cp -v {} /Library/Java/Extensions/ \;

 # this cmd might be obsolete ... 
 # copy the sigar.jar to your class path dir
 sudo find /tmp/ -name sigar*.jar \
   -exec cp -v {} /Library/Java/Extensions/ \;

 # set you classpath dir, or add in ~/.bash_profile
 # or even better https://github.com/YordanGeorgiev/ysg-confs
 export CLASSPATH=$CLASSPATH:/Library/Java/Extensions

 # you should not see the error anymore 
 cd $my_proj_dir ; sbt compile

 # neither here .. 
 cd $my_project_dir ; clear ; sbt "test:testOnly *testClass" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T10:27:52.220

首先，您需要添加`Sigar.jar`到您的库中，然后将 .dylib 文件添加到您的库中（您需要为您正在使用的操作系统选择文件）。在您的情况下，您应该添加`libsigar-universal64-macosx.dylib`您可以在`"hyperic-sigar-1.6.4/sigar-bin/lib"`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T07:59:24.530

我得到了解决方案，解决方案是在我的项目中添加一个 jar 文件（在我的情况下）。每当我们使用第三方库时都是相同的概念，例如 java 的 mysql 驱动程序。所以就我而言，我需要将 log4j.jar 和 sigar.jar 添加到我的路径中。

右键单击您的 Eclipse 项目，然后转到构建路径 > 配置构建路径 > Java 构建路径 > 添加外部 JAR 并将 sigar.jar 添加到您的项目中。

# php - PHP PDO 基本方程与对象和数组

> ID：11266897
> 
> 赞同：2
> 
> 时间：2012-06-29T18:14:11.287
> 
> 标签：php, pdo

我终于吸取了教训，转而使用 PDO。

现在我有很多疑问，但我正在努力解决这个问题。它应该在登录期间获取个人 user_salt。

```
function getsalt($email) {
    $sql = "SELECT    *
                FROM users
                WHERE email = '$email'
                LIMIT 1";

    foreach ($db->query($sql) as $row);

    print_r( $row['salt']);
}; 
```

显然我只想要一个记录，无论如何只会有一个匹配的记录，但这会导致调用时出现白屏死机。

我肯定错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:20:46.333

不需要`foreach`你使用的。

同样正如其他人指出的那样，您应该使用准备好的语句。

您还应该确保检查数据库查询的结果是否真的成功。

```
function getsalt($email) {
    $sql = "SELECT      salt
                FROM    users
                WHERE   email = ':email'
                LIMIT   1";

    $stmt = $db->prepare($sql);
    if($stmt === FALSE)
        return(FALSE);

    $stmt->bindParam(':email', $email);
    $stmt->execute();
    $salt = $stmt->fetchColumn();

    print_r( $salt );
} 
```

如果：

*   您的查询没有参数（简单的选择或创建/更改）；
*   您不想检查数据库查询是否成功；
*   你真的很想写一个查询作为单行；

你可以：

```
foreach($pdo->query('SHOW TABLES')->fetchAll() AS $row) print_r($row); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:21:47.483

您可能会在`query()`. 您需要像下面那样检查它。

如果有任何错误，此函数将返回`false`，如果一切顺利，则返回盐：

```
function getSalt($email) {
    $sql = "SELECT salt FROM users WHERE email = '$email'"; 
    $resultSet=$db->query($sql);
    if (!$resultSet) return false;
    return $resultSet->fetchColumn(); 
}; 
```

为避免 SQL 注入攻击，请务必`$email`在将其传递给函数之前验证其格式。

# regex - 如何使用 find 和 awk 更改文件内容？

> ID：11266898
> 
> 赞同：0
> 
> 时间：2012-06-29T18:14:11.730
> 
> 标签：regex, shell, replace, awk, find

我遇到了以下问题 - 我想遍历某个目录下的所有 xml 文件，并为`id`我找到的所有 -s 加上某个前缀。我编写了以下脚本来做到这一点：

```
#!/bin/bash
find . -iregex .+?\.xml -print -exec awk '{print gensub(/(.*?)=\"(@(\+|)id)\/(.+)\"/, "\\1=\"\\2/prefix_\\4\"", "g", $1);}' {} > {} \; 
```

但是重定向部分 -`> {}`将不起作用。该脚本将运行良好并按预期在标准输出上打印所有内容，但似乎无法将输出重定向到 awk 读取的同一文件。知道如何规避这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:22:29.260

改为执行 bash：

```
find . -iregex .+\.xml -print \
-exec bash -c "awk '{print gensub(/(.*?)=\\"(@(\+|)id)\/(.+)\\"/, \"\\1=\"\\2/prefix_\\4\\"\", \"g\", \$1);}' {} > {}.NEW" \; 
```

这将完全覆盖您正在读取的文件（这就是我添加`.NEW`到要重定向到的文件的原因）。也许您想要的是`>>`（附加）重定向器？

* * *

由于您没有在问题中提供示例文件，因此很难提出一个完整的工作示例。但是，以下工作：

如果您有一个名为的文件`tmp.xml`，其中包含以下内容：

```
I have a "
I do not 
```

然后运行：

```
find . -name '111.xml' -exec bash -c "awk '\$0 ~ /\"/ { print \$0 }' {} > {}.NEW" \; 
```

文件`tmp.xml.NEW`将包含：

```
I have a " 
```

请注意，除了双引号之外，您还必须`$`在脚本中转义美元 ( )，因为 shell 将它们视为变量。

# ios - iOS：删除应用内购买订阅自动续订产品

> ID：11266900
> 
> 赞同：4
> 
> 时间：2012-06-29T18:14:11.640
> 
> 标签：ios, in-app-purchase, subscription

我有一个带有 IAP 的应用程序，它是一种自动更新订阅产品。我只是被要求从 iTunes Connect 中删除这个产品。我想知道一旦他们当前的订阅期结束，我的用户已经注册了这个产品会发生什么。

我注意到，一旦我在应用开始时注册到应用内购买回调，Apple 就会启动测试以更新产品并通知我的功能。有谁知道现在该产品会丢失我所有订阅的用户是否会在打开应用程序时开始出现错误弹出窗口，或者一旦当前期限结束，他们是否会继续没有产品？

谢谢

罗伊

# java - 从多个视频部分创建单个视频文件

> ID：11266902
> 
> 赞同：3
> 
> 时间：2012-06-29T18:14:16.333
> 
> 标签：java, c++, c, video, android-ndk

我想**从多个视频文件**（部分）**创建一个视频**文件。我没有。使用 (.mp4/.3gp) 格式的视频类型文件我想创建扩展名为 (.mp4/.3gp) 的单个视频文件。它将作为来自较小部分的视频俱乐部应用程序。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:39:01.727

[OpenCV](http://opencv.org/platforms/android.html)是您不错的选择。网上有很多关于如何做到这一点的手册。这是在 Android NDK 中使用 OpenCV[的手册。](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html)

您的另一个选择是在 Android 上移植一些视频处理库。但它非常复杂。**

# jquery - Rails 3.2.1 ruby 1.9.3 qtip2 尝试使用 ajax 获取动态内容并获得堆栈溢出

> ID：11266903
> 
> 赞同：0
> 
> 时间：2012-06-29T18:14:17.363
> 
> 标签：jquery, qtip2

我发现了几个与该问题相关的问题，但尽管复制了解决方案，但我无法让它发挥作用。例如[jQuery qTip2 中的 Rails 动态内容](https://stackoverflow.com/questions/7548956/rails-dynamic-content-in-jquery-qtip2)。

处理到达控制器以产生内容，但它进入一个循环。

```
$('td.config_info_tip').qtip({
    content: {
        text: 'Loading',
        ajax: {
            url: 'config',
            data:   {
                "id": $(this).attr("id")
            },
            method: 'get'
        }
    },
    style: {
        classes: 'ui-tooltip-shadow ui-tooltip-rounded'
    }
}); 
```

在控制器中

```
def config
  id = params[:id]
  @device = Device.find_by_id(id)
  @devicecategory = DeviceCategory.find_by_id(@device.device_category_id)
  respond_to do |format|
    format.html { render layout: false}
  end
end 
```

当它通过渲染时，它会回到配置函数，循环直到溢出，我得到

```
SystemStackError (stack level too deep):
actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:70 
```

我有另一个 qtip 做类似的事情，效果很好 - 我可以看到不同之处在于我正在传递一个不起作用的数据。另一个微妙之处在于，提示不起作用的页面本身是用 jquery 呈现的，因此提示的 js 代码在页面上，而有效的代码在 $(document).ready 中功能。我很想知道这是哪里出了问题。

我试过取出respond_to，只是有

```
render layout: false 
```

这个有效：

```
 $('img#priceinfo').qtip({
    content: {
        text: 'Loading',
        ajax: {
            url: 'pricing',
            type: 'GET'
        }
    },
    style: {
        classes: 'ui-tooltip-shadow ui-tooltip-rounded'
    }
  }); 
```

和控制器

```
def current
  @d = Date.today
   # ought to check that we have prices defined
  @price = Price.where("effective_from < ?", @d).order("effective_from desc").first
  render layout: false

end 
```

任何人有任何想法 - 它现在让我难倒了几个小时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:23:31.187

我想知道为什么，但是将控制器中的方法名称从 config 更改为 device_config 解决了问题。

# android - Eclipse/ADT 没有创建 main.xml 文件

> ID：11266907
> 
> 赞同：2
> 
> 时间：2012-06-29T18:14:33.670
> 
> 标签：android, eclipse, adt

我有最新版本的 Eclipse 和 ADT。我创建了一个新的 Android 项目，在创建向导中它要求我创建一个 Activity，我做到了。但是，当项目加载时，我在 res/layout 中没有 main.xml 文件。我所拥有的只是我创建的活动的 activity.xml 文件。我什至尝试创建一个没有活动的项目，但我没有得到 main.xml 文件。

这是它现在应该工作的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:26:35.073

我认为您需要匹配您的安装程序版本和 ADT 版本，例如 installer-20.0.3 和 ADT-20.0.3 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T21:56:46.367

我选择了 API 14，得到了相同的结果：没有 main.xml 文件。只是activity_main.xml。我会假设这已经取代了 main.xml？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:21:39.683

看来问题出在新建项目向导（Android 4.1 API 16）中选择的默认构建 SDK 上。选择 API 15 或更低，它会创建文件就好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T18:22:23.023

答案仅针对**ADT R20**，而不针对旧 ADT 版本

当您尝试使用**NoActivity**创建项目时，将不会有**main.xml**，默认创建**DefaultActivity.java**并且 AndroidManifest.xml 中没有 DefaultActivity 的条目

如果您无法使用默认活动创建新的 Android 项目，那么这里是提到的解决方案（仅适用于**ADT R20**）[https://stackoverflow.com/a/11260656/582571](https://stackoverflow.com/a/11260656/582571)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-03T09:08:37.043

我是这个行业的新手，但这是我在学习本[教程](https://developer.android.com/training/basics/firstapp/creating-project)时使用 Android Studio 发现的。在 Android Studio (New Project) Home 屏幕上，有很多选项可用，其中有：

1-“无活动”：您创建的项目最终没有`activity_main.xml`，也`MainActivity.java`没有

2-“空活动”：您的项目目录中会出现空文件`activity_main.xml`和`MainActivity.java`文件，我假设 Android Studio 默认为“空活动”项目创建这些文件。

![Android Studio 截图](../Images/57a67315e6ca6660fd6a16ebdf48d6f6.png)

# javascript - .remove() 只删除innerHTML，而不是像我想要的那样删除整个标签

> ID：11266912
> 
> 赞同：4
> 
> 时间：2012-06-29T18:15:17.057
> 
> 标签：javascript, jquery, jquery-selectors

我有一个动态创建的列表。列表中的项目应该可以使用删除按钮删除。然而，出于某种原因，它似乎只是删除了innerHTML，而不是整个标签innerHTML，就像我想要的那样。它可能与我正在使用的选择器有关，但我似乎无法弄清楚。

这是代码。

提前致谢！

```
$('#courses').on('click', '.del', function() {
     var tempIndex = $(this).parentsUntil('li').index();
     reducePlanned(myListInfo[tempIndex-1].credits, myListInfo[tempIndex-1].gpa);
     myListInfo.splice(tempIndex-1,1);
     document.getElementById('hrs_planned').innerHTML = '<b>Hours: '+getStringHrs(planned_hrs)+' GPA: '+toStringGPA(planned_gpa)+'</b>    ';
     document.getElementById('header').innerHTML = 'Total Hours: '+getStringHrs(prev_hrs+planned_hrs)+' GPA: '+toStringGPA(((prev_hrs*    prev_gpa)+(planned_hrs*planned_gpa))/(planned_hrs+prev_hrs));
     $(this).parentsUntil('li').remove();
     return false;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T18:20:46.350

如果您希望它删除`li`，则记录在案的行为`parentsUntil()`是它不会触及`li`. 你需要：

```
$(this).parentsUntil('li').parent().remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:25:55.840

`.parentsUntil()`不返回匹配选择器的元素。

你想打电话`.closest()`。

# jquery-plugins - javascript 文件中的 Jquery 参考

> ID：11266916
> 
> 赞同：0
> 
> 时间：2012-06-29T18:15:35.497
> 
> 标签：jquery-plugins

以下是网页上图像放大的演示

[http://jdbartlett.com/loupe/](http://jdbartlett.com/loupe/)

我尝试使用开源代码将其构建到一个插件中，该插件可以作为脚本安装在浏览器中，以便它可以适用于通过它查看的任何网站（浏览器）

代码示例有几个演示和两个 jquery 文件，为了使用代码，请参考这些文件

我需要做的是开发另一个 .js 文件并包含（以某种方式）所需的 jquery 库

我尝试了以下代码

```
function

 include(filename, onload) {

var head = document.getElementsByTagName('head')[0];

 var script = document.createElement('script');

    script.src = filename;
    script.type = 'text/javascript';
    script.onload = script.onreadystatechange = function () {
        if (script.readyState) {
            if (script.readyState === 'complete' || script.readyState === 'loaded') {
                script.onreadystatechange = null;
                onload();
            }
        }

        else {
            onload();
        }
    };
    head.appendChild(script);

}
include(path + 'imagemagnifier/jquery.loupe.js');

$('img').loupe(); 
```

其中 loupe 是包含在文件中定义的函数，我想这是实际问题所在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:36:03.703

使用第二个参数调用文件加载时要运行的代码。

```
include(path + 'imagemagnifier/jquery.loupe.js', function(){ $('img').loupe(); }); 
```

但是既然是 jQuery，为什么不使用[getScript](http://api.jquery.com/jQuery.getScript/)呢？

```
jQuery.getScript(path + 'imagemagnifier/jquery.loupe.js', function(){ $('img').loupe(); }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T18:37:08.633

为什么不使用 jQuery 函数`$.getScript(scriptName, callback)`？

每当调用时，它将加载任何脚本文件（内部或外部托管）。如果您已经在使用 jQuery，它不会真正增加任何额外的开销，并且您不必担心 HTML 的附加混乱。

[在http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)阅读更多内容

# python - ogr 中的 SetField/SetFeature 上的分段错误（核心转储）

> ID：11266917
> 
> 赞同：1
> 
> 时间：2012-06-29T18:15:39.203
> 
> 标签：python, coredump, shapefile, gdal, ogr

在过去的两天里，我一直在尝试获取一个 python 脚本来完成创建一个带有属性的 289995 点的 shapefile。可以创建点，但脚本不会完成属性。代码正确运行，直到循环：（ `for j, p in enumerate(wCoords):`见下面的代码 - 2nd循环）一段时间后发生分段错误。我试图添加一个 if 语句，该语句以特定的时间间隔停止进程，以查看是否可以在循环周期中找到它发生时的位置。循环无故障循环直到 1000 个循环，但直到 10,000 个循环才停止而没有反馈，看起来像一个无限循环。该程序是创建树点，然后将树的高度属性附加到这些点。代码如下：

```
def save_shp(wCoords):
     print 'saving shapefile...'
     driver = ogr.GetDriverByName('ESRI Shapefile')
     if os.path.exists('tree_points.shp'):
         driver.DeleteDataSource('tree_points.shp')
     ds = driver.CreateDataSource('tree_points.shp')
     layer = ds.CreateLayer('trees', geom_type=ogr.wkbPoint)
     layerDefn = layer.GetLayerDefn()
     point = ogr.Geometry(ogr.wkbPoint)

     for i, p in enumerate(wCoords):
         point.AddPoint(p[0],p[1])
         featureIndex = i
         feature = ogr.Feature(layerDefn)
         feature.SetGeometry(point)
         feature.SetFID(featureIndex)
         layer.CreateFeature(feature)

     fieldDefn = ogr.FieldDefn('tree_hts', ogr.OFTReal)
     layer.CreateField(fieldDefn)
     i = feature.GetFieldIndex('tree_hts')#???

     for j, p in enumerate(wCoords):

         feature_n = layer.GetFeature(j)
         feature_n.SetField(i, p[2])#???
         layer.SetFeature(feature_n)

     try:
         ds.Destroy()
     except:
         print 'still core dumping!' 
```

我对 gdal/ogr 的了解不够多，无法为您提供更多信息。请帮忙。雅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:24:40.723

一些快速提示：

*   使用与 shapefile 前缀相同的图层名称：`ds.CreateLayer('tree_points', ogr.wkbPoint)`
*   在`layer.CreateField(fieldDefn)`添加任何数据之前拨打电话
*   循环*一次*您的特征，同时创建几何和特征对象
*   在你的 for 循环中，你需要创建一个新的几何对象，并且点索引为 0：

    ```
    point = ogr.Geometry(ogr.wkbPoint)
    point.SetPoint_2D(0, p[0], p[1]) 
    ```

*   你不需要`ds.Destroy()`；保存/关闭使用`ds = None`

# php - 我的 SQL 查询有什么问题？

> ID：11266918
> 
> 赞同：1
> 
> 时间：2012-06-29T18:15:43.917
> 
> 标签：php, mysql

我正在尝试将另一个表添加到已经工作的查询中，但由于某种原因出现错误。我不确定查询是否足以继续，因为它正在由另一个函数运行，但我认为它可能只是我的查询..

这是有效的原始查询：

```
$listing_sql = "select " . $select_column_list . " p.products_id, p.products_model,   

p.manufacturers_id, p.products_price, p.products_tax_class_id, IF(s.status, 
s.specials_new_products_price, NULL) as specials_new_products_price, IF(s.status, 
s.specials_new_products_price, p.products_price) as final_price 

from " . TABLE_PRODUCTS_DESCRIPTION . " pd, " . TABLE_PRODUCTS . " p 
left join " . TABLE_MANUFACTURERS . " m on p.manufacturers_id = m.manufacturers_id 
left join " . TABLE_SPECIALS . " s on p.products_id = s.products_id,
" . TABLE_PRODUCTS_TO_CATEGORIES . " p2c

where p.products_status = '1' and p.products_id = p2c.products_id and 
pd.products_id = p2c.products_id and pd.language_id = '" . (int)$languages_id . "' and 
p2c.categories_id = '" . (int)$current_category_id . "'"; 
```

这是带有添加表和 where 子句的新查询（`TABLE_PRODUCTS_ATTRIBUTES`是新表 pa）：

```
$listing_sql = "select " . $select_column_list . " p.products_id, p.products_model, 
p.manufacturers_id, p.products_price, pa.products_values_id, p.products_tax_class_id, 
IF(s.status, s.specials_new_products_price, NULL) as specials_new_products_price, 
IF(s.status, s.specials_new_products_price, p.products_price) as final_price 

from " . TABLE_PRODUCTS_DESCRIPTION . " pd, " . TABLE_PRODUCTS . " p, " . 

TABLE_PRODUCTS_ATTRIBUTES . " pa
left join " . TABLE_MANUFACTURERS . " m on p.manufacturers_id = m.manufacturers_id 
left join " . TABLE_SPECIALS . " s on p.products_id = s.products_id,
" . TABLE_PRODUCTS_TO_CATEGORIES . " p2c

where p.products_status = '1' and p.products_id = p2c.products_id and p.products_id = 
pa.products_id and pd.products_id = p2c.products_id and pd.language_id = '" . 
(int)$languages_id . "' and p2c.categories_id = '" . (int)$current_category_id . "'"; 
```

我的查询有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:19:16.663

问题是您将逗号样式的连接语法与 JOIN 关键字混合在一起。因为它们具有不同的优先级，所以连接没有按照您期望的顺序执行（您可能期望从左到右的顺序）。

[MySQL手册](http://dev.mysql.com/doc/refman/5.6/en/join.html)特别警告混合两种类型的连接：

> 但是，逗号运算符的优先级低于 INNER JOIN、CROSS JOIN、LEFT JOIN 等。如果在存在连接条件时将逗号连接与其他连接类型混合使用，则可能会出现“on 子句”中的“未知列”“col_name”形式的错误。

您可以为修复错误进行的一个简单更改是切换`TABLE_PRODUCTS_ATTRIBUTES`and的顺序`TABLE_PRODUCTS`：

```
from " . TABLE_PRODUCTS_DESCRIPTION . " pd, "
. TABLE_PRODUCTS_ATTRIBUTES . " pa, "
. TABLE_PRODUCTS . " p 
```

然而，这并不能解决真正的问题——您的查询是不可维护的。更好的是更改所有逗号样式的连接以使用`JOIN`关键字。这将需要从头开始重写您的整个查询，但这将使将来更容易修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:27:54.383

尝试在查询中更改该行：

```
from " . TABLE_PRODUCTS_DESCRIPTION . " pd, " . TABLE_PRODUCTS . " p, " . TABLE_PRODUCTS_ATTRIBUTES . " pa 
```

到：

```
from (" . TABLE_PRODUCTS_DESCRIPTION . " pd, " . TABLE_PRODUCTS . " p, " . TABLE_PRODUCTS_ATTRIBUTES . " pa) 
```

括号将不确定表连接的顺序是您期望的顺序。

# google-apps-script - 使用数组或类似方法修改多个范围（基本加法和减法）的更好方法？

> ID：11266924
> 
> 赞同：0
> 
> 时间：2012-06-29T18:16:01.253
> 
> 标签：google-apps-script, google-sheets

这是我在 Google 电子表格`onEdit()`函数中使用的以下代码片段：

```
else if(editedCell.getColumn() == 13 && editedCell.getRow() == 29) {
    var modVal = sheet.getRange("L29").getValue();

    if(editedCell.getValue() == "Yes") {
      sheet.getRange("G23").setValue(sheet.getRange("G23").getValue() + modVal);
      sheet.getRange("G24").setValue(sheet.getRange("G24").getValue() + modVal);
      sheet.getRange("G25").setValue(sheet.getRange("G25").getValue() + modVal);
      sheet.getRange("G26").setValue(sheet.getRange("G26").getValue() + modVal);
      sheet.getRange("G27").setValue(sheet.getRange("G27").getValue() + modVal);
      sheet.getRange("G28").setValue(sheet.getRange("G28").getValue() + modVal);
      sheet.getRange("G29").setValue(sheet.getRange("G29").getValue() + modVal);
    }
    else if(editedCell.getValue() == "No") {
      sheet.getRange("G23").setValue(sheet.getRange("G23").getValue() - modVal);
      sheet.getRange("G24").setValue(sheet.getRange("G24").getValue() - modVal);
      sheet.getRange("G25").setValue(sheet.getRange("G25").getValue() - modVal);
      sheet.getRange("G26").setValue(sheet.getRange("G26").getValue() - modVal);
      sheet.getRange("G27").setValue(sheet.getRange("G27").getValue() - modVal);
      sheet.getRange("G28").setValue(sheet.getRange("G28").getValue() - modVal);
      sheet.getRange("G29").setValue(sheet.getRange("G29").getValue() - modVal);
    }
} 
```

如您所见，我只是简单地逐行手动执行每个单元格。有没有办法指定一个范围数组，然后在一个简单的`foreach()`类型函数中进行数学运算？我不知道如何问我的问题，但我相信在查看我上面的代码时这是不言而喻的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:03:27.263

```
var modVal = sheet.getRange("L29").getValue();

// Create a function that updates a given sheet at a given range with
// the result of a value function
var changeRangeValue = new function(sheet, range, value) {
    sheet.getRange(range).setValue(value(sheet, range));
};

var calculateValue;

if(editedCell.getValue() == "Yes") {
    // Create a function that returns a value of a given sheet at a given range with
    // the mod value added
    calculateValue = new function(sheet, range) {
        return sheet.getRange(range).getValue() + modValue; 
    };
}
else if(editedCell.getValue() == "No") {
    // Create a function that returns a value of a given sheet at a given range with
    // the mod value added        
    calculateValue = new function(sheet, range) {
        return sheet.getRange(range).getValue() - modValue;
    };
}
else {
    // Create a function that returns the current value of a given sheet at a given range
    calculateValue = new function(sheet, range) {
        return sheet.getRange(range).getValue();
    };
}

// Go through G23-G29 and update the range value with the correct value
for(var i=23; i <= 29; i++) {
    changeRangeValue(sheet, "G"+i, calculateValue);
} 
```

# android - 手机启动时存在 LiveWallpaper 文件

> ID：11266929
> 
> 赞同：0
> 
> 时间：2012-06-29T18:16:23.047
> 
> 标签：android, live-wallpaper

我有这个动态壁纸，您可以在其中选择自己的自定义背景，并在启动应用程序时立即检查文件路径是否存在，如果不存在，则标记为仅绘制黑屏。问题是，每次我重新启动手机时，都不会绘制背景，而是在动态壁纸预览中绘制。

我高度怀疑 Media Scanner 或所有目录尚未安装的事实，但我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:13:09.260

每次单击预览和设置壁纸时，壁纸引擎都会创建。所以问题是您必须在引擎中的变量中保存文件路径。将此变量设为类级别。它会起作用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:00:41.267

我遇到了同样的问题。我所做的是 onSharedPreferenceChanged() 我正在检查密钥。如果 key 为空，那么我将从偏好中获取所有数据。当您重新启动您的引擎创建的手机时，它会将密钥作为空值传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T04:17:38.907

显然，解决方案是向广播接收器注册 Intent.ACTION_MEDIA_MOUNTED。即使没有任何真正的外部媒体，这似乎也可以工作（显然与外部存储媒体相同，而不仅仅是物理外部存储）

[sdcard的android意图准备好了](https://stackoverflow.com/questions/3417161/android-intent-for-sdcard-ready)

# r - data.table vs plyr 回归输出

> ID：11266930
> 
> 赞同：15
> 
> 时间：2012-06-29T18:16:35.753
> 
> 标签：r, data.table

data.table 包在速度方面非常有帮助。但我在实际使用线性回归的输出时遇到了麻烦。有没有一种简单的方法可以让 data.table 输出与 plyr 包中的输出一样漂亮/有用？下面是一个例子。谢谢！

```
library('data.table');
library('plyr');

REG <- data.table(ID=c(rep('Frank',5),rep('Tony',5),rep('Ed',5)), y=rnorm(15), x=rnorm(15), z=rnorm(15));
REG;

ddply(REG, .(ID), function(x) coef(lm(y ~ x + z, data=x)));

REG[, coef(lm(y ~ x + z)), by=ID]; 
```

data.table 系数估计值在单个列中输出，而 plyr/ddply 系数估计值在多个且标记良好的列中输出。

我知道我可以使用 data.table 运行回归三次，但这似乎效率很低。不过，我可能是错的。

```
REG[, Intercept=coef(lm(y ~ x + z))[1],
      x        =coef(lm(y ~ x + z))[2],
      z        =coef(lm(y ~ x + z))[3], by=ID]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T18:33:21.147

试试这个：

```
> REG[, as.list(coef(lm(y ~ x + z))), by=ID];
        ID (Intercept)           x         z
[1,] Frank  -0.2928611  0.07215896  1.835106
[2,]  Tony   0.9120795 -1.11153056  2.041260
[3,]    Ed   1.0498359  5.77131778 -1.253741 
```

我有一种挥之不去的感觉，这个问题是在不到一周前被问到的，但我认为我在尝试时没有想到这种方法，而且我不记得有任何答案是这样紧凑的。

哦，在 r-help 上有.. 如果他愿意，马修可以评论这件事的正当性。我想信息是返回列表的函数不会删除维度。有趣的是使用`list(coef(lm(...))`并没有按照我们希望的方式成功。

# project-management - 是否有为经理而不是程序员设计的高级视觉差异工具？

> ID：11266935
> 
> 赞同：0
> 
> 时间：2012-06-29T18:17:15.810
> 
> 标签：project-management, diff, visualization, gource, code-swarm

我一直在寻找和寻找，但这个问题的搜索空间似乎无可救药地混乱了。

我们都经历过：这个为期 6 周的项目耗时 5 个月，现在高管们想要一个 Powerpoint。

是否有一种工具可以以管理层可以理解的方式直观地显示源代码树从一个修订版到另一个修订版的更改？我正在考虑在源文件的缩略图之前和之后生成的东西（基本上只是由代码行缩放的不同高度的矩形），“之后”缩略图用红色、绿色和黄色带突出显示，其中差异看到了删除、添加和变化。

然而，任何能说明问题的东西都可以。

编辑：我找到[了 gource](https://code.google.com/p/gource/)，但我正在寻找可以放在 2 张幻灯片上的东西。古斯虽然很棒。

编辑2：也是[codewarm](https://stackoverflow.com/questions/553478/history-visualization-tools-for-version-control-systems) - 另一个视频工具，如果可能的话，我正在寻找静止图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:36:57.183

总结版本之间更改的一种方法是使用[diffstat](http://invisible-island.net/diffstat)。Diffstat 计算删除/添加的行数，并以图形表示所有文件的更改相对分布。来自 linux 内核源代码的示例：

```
$ git diff v3.5-rc3 v3.5-rc4 [k-z]* | diffstat 
 kernel/cgroup.c                        |   13 +
 kernel/events/core.c                   |   10 -
 kernel/exit.c                          |   19 +-
 kernel/pid_namespace.c                 |   20 ++
 kernel/printk.c                        |  241 ++++++++++++++++++++++++++++-----
 kernel/sys.c                           |    6 
 lib/fault-inject.c                     |    4 
 mm/memblock.c                          |   48 +++++-
 mm/memcontrol.c                        |    6 
 mm/memory.c                            |   12 +
 mm/mempolicy.c                         |    2 
 mm/oom_kill.c                          |   17 +-
 mm/page_cgroup.c                       |    4 
 mm/pagewalk.c                          |    1 
 mm/percpu-vm.c                         |    1 
 net/9p/trans_virtio.c                  |    2 
 net/ceph/ceph_common.c                 |    7 
 net/ceph/messenger.c                   |    4 
 net/ceph/mon_client.c                  |    8 +
 net/ceph/osd_client.c                  |   12 -
 scripts/get_maintainer.pl              |    3 
 sound/pci/hda/hda_codec.c              |   46 +++++-
 sound/pci/hda/hda_codec.h              |    2 
 sound/pci/hda/hda_intel.c              |    2 
 sound/soc/codecs/wm8904.c              |   26 +--
 sound/soc/codecs/wm8996.c              |    8 -
 sound/soc/pxa/pxa-ssp.c                |   38 +----
 sound/soc/tegra/tegra_wm8903.c         |   13 +
 sound/usb/6fire/firmware.c             |    2 
 sound/usb/pcm.c                        |   21 +-
 tools/hv/hv_kvp_daemon.c               |   10 -
 tools/perf/builtin-stat.c              |    8 -
 tools/perf/util/header.c               |   48 +++++-
 tools/perf/util/include/linux/bitops.h |    2 
 tools/perf/util/session.c              |   10 +
 tools/perf/util/session.h              |    1 
 virt/kvm/assigned-dev.c                |    4 
 37 files changed, 510 insertions(+), 171 deletions(-)
$ 
```

在这里您可以看到，对于选定的目录，在 3.5-rc3 和 3.5-rc4 之间，大部分工作都在添加调试代码（当天真地假设添加/删除的每一行代表相同的工作量时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:42:22.870

您可以尝试类似 Software Cities 之类的东西，它在最近的一篇论文中有所介绍：

F. Steinbrückner 和 C. Lewerentz。2010\. 代表软件城市的发展历史。在第五届软件可视化国际研讨会论文集（SOFTVIS '10）中。ACM，纽约，纽约，美国，193-202。DOI=1 [0.1145/1879211.1879239](http://dx.doi.org/10.1145/1879211.1879239)。[PDF链接](http://vis.pku.edu.cn/paper/vis2010/softvis/docs/p193.pdf)。

![Java JDK 6 的软件城市示例](../Images/4c03bd2ddd4af479a9da7ee4a6ffae69.png)

# jquery - 与 Jquery 的 .on 事件绑定

> ID：11266938
> 
> 赞同：0
> 
> 时间：2012-06-29T18:17:27.887
> 
> 标签：jquery

我为我的网站使用了自动完成插件。这对我来说效果很好。但是现在因为我同时使用了 Ajax 所以在使用 AJax 添加新的 HTML 时，我的脚本失败了。我在stackoverflow上发布并得到了关于使用`.on`Jquery 1.7.2的答案所以我试图将我的代码绑定到`.on`

我的代码是

```
$(document).ready(function(){
    $(function(){
        $(document).on("click.autocomplete","#artist_id",function(e){
            $(this).autocomplete({
                source : '<?php echo HTTP_PATH . '/artists/getArtistList'; ?>',
                multiple: true,
                mustMatch: true,
                matchContains: true,
                scroll: true,
                minChars: 0,
                autoFill: true,
                dataType: "json",
                parse: function(data) {
                    return $.map(data, function(item) {
                        return { data: item, value: item.label, result: item.label};
                    });
                },
                formatItem: function(item) {
                    return item.label;
                },
                formatResult: function(item) {
                    return item.id;
                },
                formatMatch: function(item) {
                    return item.label;
                }
            });
        });
    });
 }); 
```

运行良好的代码...

```
 $("#artist_id").focus().autocomplete( '<?php //echo HTTP_PATH . '/artists/getArtistList'; ?>', {
        multiple: true,
        mustMatch: true,
        matchContains: true,
        scroll: true,
        minChars: 0,
        autoFill: true,
        dataType: "json",
        parse: function(data) {
            return $.map(data, function(item) {
                return { data: item, value: item.label, result: item.label};
            });
        },
        formatItem: function(item) {
            return item.label;
        },
        formatResult: function(item) {
            return item.id;
        },
        formatMatch: function(item) {
            return item.label;
        }
    }); 
```

问题既不是它发送响应也不是给我脚本错误。我尝试使用 Firebug 检查它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:02:39.760

Few things:

This is redundant

```
$(document).ready(function(){
    $(function(){... 
```

only use one or the other.

```
$(document).ready(function(){... 
```

Secondly, `click.autocomplete` binds to any click events that have the `autocomplete` namespace. What i think you meant to do is to bind the event to any text input that has the class `autocomplete`.

```
$(document).on("click",".autocomplete",function(e){
    // prevent the default action
    e.preventDefault();
    // initialize autocomplete
    $(this).autocomplete({
        ...
    })
    // remove class to prevent reinitializing autocomplete:
    .removeClass('autocomplete')
    // trigger the focus event to start the autocomplete
    .focus();
}); 
```

`$(document).ready` isn't needed here since the `document` is already ready.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:21:01.940

你的问题是这一行：

```
$(document).on("click.autocomplete","#artist_id",function(e){ 
```

您以前在焦点上“绑定”，现在您在“click.autocomplete”上绑定。将其更改为：

```
$(document).on("focus","#artist_id",function(e){ 
```

根据[.on() 上的 jQuery 文档](http://api.jquery.com/on/%20jQuery%20docs%20on%20.on%28%29)，第二个参数是您要绑定的事件，而不是选择器。

# google-app-engine - 从谷歌应用引擎迁移到谷歌计算引擎

> ID：11266941
> 
> 赞同：2
> 
> 时间：2012-06-29T18:17:43.290
> 
> 标签：google-app-engine, virtual-machine, scaling, google-compute-engine

所以昨天谷歌发布了计算引擎，处理能力的价格比应用引擎标准要好得多。任何人都知道迁移会是什么样子，或者我们是否能够将新的谷歌计算虚拟机与我们当前的应用程序一起使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T01:02:39.877

在 Google IO 上，该团队展示了 GCE 虚拟机从 GAE 应用程序中动态启动的演示。我建议您观看该会话并下载代码示例，以更好地了解两个服务之间的互操作。我们在 YouTube 上的 Google 开发者频道上发布的会话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T01:18:25.650

App Engine (AE) 和 Google Compute Engine (GCE) 是不同的工具，因此它们将具有不同的规格和定价模型。

使用 GCE，您可以选择运行多少台服务器、何时运行、在其上安装什么软件堆栈等。它的功能非常强大，您不仅*可以*选择如何运行它们，还*必须*选择如何运行它们。运行它们。

另一方面，AE 为您做出所有这些决定：运行堆栈、根据需求打开和关闭服务器、分布式持久存储等。

因此，在决定迁移之前，您必须回答的问题是：您想要运行整个堆栈的自由（和责任）吗？还是您更愿意让 App Engine 处理可扩展性细节，而您专注于编写应用程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-19T18:28:54.310

在阅读了上面的答案/评论后，现在很明显 GAE 应用程序并没有直接准备好部署在计算引擎上。我完全理解 App Engine 作为一个平台提供的所有托管服务（主要是 API、数据存储、文档/索引搜索、内存缓存、云存储、任务队列、cron 作业等）不会是相同的-如果在计算引擎上可用，则可访问/集成就绪。

我们现在有一个 5 岁的成熟 App 引擎应用程序。我正在考虑一种方案来支持高级定制/控制并将第三方软件/中间件添加到我们的服务器环境中，这是 App 引擎无法实现的。因此，如果我们拥有除 App 引擎之外的所有解决方案（计算引擎、容器引擎等）来迁移我们的应用程序以满足此类需求，那么这种迁移的成本是多少？

1.  Need of server provisioning and configuration at Compute engines with different pricing model[Understood, should not be a problem :)]

2.  Full or partial code rewrite to continue using the same APIs esp. Datastore, Cloud Storage, Task Queues, Cron jobs, Document Search, Memcache etc.[Need confirmation here and any reference/link to migration guide would be help!!]

3.  Does this lead to risk of losing any managed service/API offered from App Engine? Document Search, Memcache, Task Queues, Cron jobs seem the possible candidates. Please confirm.

4.  As per my reading, Big Query, Cloud storage, Pub-Sub APIs integration should not be much affected with such migration(Client-libraries or Rest APIs should still help!). Please confirm.

In nut-shell, We wanted it fully managed in the beginning so PaaS seemed the right choice 5 years ago. Now we want App minus platform-managed plus customized/flexible to our choice. How complicated this transition is going to be?

# jquery - 数据表 fnDraw 不起作用

> ID：11266947
> 
> 赞同：1
> 
> 时间：2012-06-29T18:18:14.060
> 
> 标签：jquery, json, datatables

我正在使用从 json 文件中获取数据的数据表。

```
var date=new Date();
var day=date.getDate();
var dataTable = $('#.main_content table').dataTable({
                    "bProcessing": true,
                    "bPaginate": false,
                    "bSort": false,
                    "bServerSide": true,
                    "bjQueryUI": true,
                    "sAjaxSource": 'sources/data.json',
                    "fnServerData": fnServerObjectToArray()
                }); 
```

如您所见，我正在使用一个函数从 json 文件中提取数据。

```
fnServerObjectToArray = function () {
            return function (sSource, aoData, fnCallback) {
                $.ajax({
                    "dataType": 'json',
                    "type": "GET",
                    "url": sSource,
                    "data": aoData,
                    "dataType": "json",
                    "success": function (json) {
                        var a = [];
                        var data = json.aoData;
                        for (var i = 0, iLen = data.appointments.length; i < iLen; i++) {
                            var inner = [];
                            inner.push(data.appointments[i].time);
                            if (data.appointments[i].CHT111[day]) {
                                inner.push(data.appointments[i].CHT111[day]);
                                inner.push(data.appointments[i].DOB[day]);
                                inner.push(data.appointments[i].Patient[day]);
                                inner.push(data.appointments[i].Visit_Reason[day]);
                                inner.push(data.appointments[i].Room[day]);
                                inner.push(data.appointments[i].Scheduled[day]);
                            }
                            else {
                                inner.push(data.appointments[i].CHT111.default);
                                inner.push(data.appointments[i].DOB.default);
                                inner.push(data.appointments[i].Patient.default);
                                inner.push(data.appointments[i].Visit_Reason.default);
                                inner.push(data.appointments[i].Room.default);
                                inner.push(data.appointments[i].Scheduled.default);
                            }
                            a.push(inner);
                        }
                        json.aaData = a;
                        fnCallback(json);
                    }
                });
            }
        } 
```

问题是我有一个按钮可以更改 day 变量，然后调用不起作用的 fnDraw() 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:37:36.113

根据数据表文档 fnDraw 不会重新加载 Ajax 数据。但是，有一个名为 fnReloadAjax 的插件可以完全满足您的需求。以下代码是插件代码，只需将其保存为js文件并在加载datatables js之后，但在初始化表之前加载它：

```
$.fn.dataTableExt.oApi.fnReloadAjax = function ( oSettings, sNewSource, fnCallback, bStandingRedraw )
{
if ( typeof sNewSource != 'undefined' && sNewSource != null )
{
    oSettings.sAjaxSource = sNewSource;
}
this.oApi._fnProcessingDisplay( oSettings, true );
var that = this;
var iStart = oSettings._iDisplayStart;
var aData = [];

this.oApi._fnServerParams( oSettings, aData );

oSettings.fnServerData( oSettings.sAjaxSource, aData, function(json) {
    /* Clear the old information from the table */
    that.oApi._fnClearTable( oSettings );

    /* Got the data - add it to the table */
    var aData =  (oSettings.sAjaxDataProp !== "") ?
        that.oApi._fnGetObjectDataFn( oSettings.sAjaxDataProp )( json ) : json;

    for ( var i=0 ; i<aData.length ; i++ )
    {
        that.oApi._fnAddData( oSettings, aData[i] );
    }

    oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
    that.fnDraw();

    if ( typeof bStandingRedraw != 'undefined' && bStandingRedraw === true )
    {
        oSettings._iDisplayStart = iStart;
        that.fnDraw( false );
    }

    that.oApi._fnProcessingDisplay( oSettings, false );

    /* Callback user function - for event handlers etc */
    if ( typeof fnCallback == 'function' && fnCallback != null )
    {
        fnCallback( oSettings );
    }
}, oSettings );
}; 
```

现在，只要您想用新的过滤数据重新加载表，就可以调用以下代码：

```
dataTable.fnReloadAjax( 'sources/data.json' ); 
```

# mysql - 如何从 MySQL 控制台切换到新用户

> ID：11266957
> 
> 赞同：5
> 
> 时间：2012-06-29T18:19:08.227
> 
> 标签：mysql

我在 Windows 上使用 mysql 时遇到了一点问题。我知道如何创建一个新用户并向新用户和所有人授予授权。但我不知道如何从 mysql 控制台切换到新用户！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T18:33:03.800

您必须退出并使用新用户名重新登录。

从外壳：

```
mysql --user=user_name --password=your_password db_name 
```

参考：

*   [http://forums.mysql.com/read.php?10,247384,247391#msg-247391](http://forums.mysql.com/read.php?10,247384,247391#msg-247391)
*   [http://dev.mysql.com/doc/refman//5.5/en/mysql.html](http://dev.mysql.com/doc/refman//5.5/en/mysql.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-20T18:00:16.247

创建新用户后，请尝试更改默认快捷方式以直接以该用户身份登录。

转到开始菜单> MySql xx命令行客户端>右键单击>属性>目标并将用户（从`-uroot`）更改为`-uyournewuser`：

```
"C:\Program Files\MySQL\MySQL Server 5.7\bin\mysql.exe" "--defaults-file=C:\ProgramData\MySQL\MySQL Server 5.7\my.ini" "-uroot" "-p" 
```

# linux - 从嵌入式设备上的摄像头流式传输视频的最佳方式是什么？

> ID：11266964
> 
> 赞同：2
> 
> 时间：2012-06-29T18:19:32.050
> 
> 标签：linux, video, camera, embedded, video-streaming

我正在使用三星 S3C6410 开发视频（目前还没有很好的同步视频和音频解决方案）流媒体应用程序。

我打算把这个板子放在一辆小型机器人车上，然后将摄像头的视频从 3G 网络传回给我。

到目前为止，我尝试过的最好的解决方案是 mjpg_streamer。这是一个很好的开源项目，它会做它承诺做的事情。但令我失望的是，表现还不够好。

*   它使用 HTTP 作为流式传输视频的方式，这会导致大量带宽浪费。我对 1280x720 视频的测试结果超过 1MB/s，而 640x480 视频的测试结果约为 300KB/s。

*   它不会同时流式传输音频。

我发现 Mjpg-streamer 项目正在开发一个用于 RTSP 流媒体的模块，但还远未完成。所以我想知道是否有满足我要求的开源项目（带宽高效，同时流式传输音频，但不一定只用一个软件就能解决）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:56:02.583

您可能想使用 gstreamer。它能够流式传输音频和视频。看看 udpsink 和 rtp 模块：

[http://gstreamer.freedesktop.org/documentation/rtp.html](http://gstreamer.freedesktop.org/documentation/rtp.html)

[http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/gst-plugins-good-plugins-udpsink.html](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/gst-plugins-good-plugins-udpsink.html)

# javascript - 无法从 URL 获得响应

> ID：11266965
> 
> 赞同：0
> 
> 时间：2012-06-29T18:19:37.410
> 
> 标签：javascript, url, xmlhttprequest, request

我在这个问题上花了几个小时，我的伙伴们帮不了我。他说可能是跨站脚本问题，可能是我的系统设置导致了这个问题，因为脚本在我同事的机器上运行良好。

下面是一个简单的案例：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
var req = new XMLHttpRequest();
var url = "http://www.javascriptkit.com/dhtmltutors/javascriptkit.json";
req.open("GET", url, false);
try {
    req.send();
} catch (e) {
    alert("ERROR: " + e);
}
</script>
</head>
<body>
</body>
</html> 
```

执行代码，出现错误：

```
ERROR: [Exception... "Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)"  nsresult: "0x80004005 (NS_ERROR_FAILURE)"  location: "JS frame :: chrome://firebug/content/console/commandLineExposed.js :: <TOP_LEVEL> :: line 156"  data: no] 
```

我在本地主机、firebug 控制台和 jsFiddle 上运行了这段代码，但它们都不起作用。

我确信我的本地服务器运行良好，因为测试脚本`alert("works")`正在运行。

任何人都可以在这里帮助我。这是系统设置问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:28:57.763

您可以使用代理来检索外部内容。

如上所示：http: [//icant.co.uk/articles/crossdomain-ajax-with-jquery/using-proxy.html](http://icant.co.uk/articles/crossdomain-ajax-with-jquery/using-proxy.html)。在这里，他们从 PHP 页面发出外部请求，并在 javascript 函数调用中使用它。

这是演示页面主页的链接：http: [//icant.co.uk/articles/crossdomain-ajax-with-jquery/index.html](http://icant.co.uk/articles/crossdomain-ajax-with-jquery/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:25:24.333

`XMLHttpRequest`到不同的域？除非他们`Access-Control-Allow-Origin`在响应中设置标题，否则您将无法获得它。在 Opera（至少是 11.64 版）中，无论如何您都无法使用它。

我认为您同事的机器配置不安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:25:33.367

XMLHttpRequest 受制于浏览器的同源策略，出于安全原因，请求只有在发送到为原始网页提供服务的同一服务器时才会成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T18:21:31.300

我相信你不能像这样进行跨域调用。

# php - 验证电子邮件格式 PHP

> ID：11266967
> 
> 赞同：3
> 
> 时间：2012-06-29T18:19:41.337
> 
> 标签：php, mysql, email, verification

这是用户邀请代码的片段。代码应该从之前的 POST 表单中获取电子邮件地址，然后检查其格式是否正确。我使用了一个名为 checkMail 的函数来完成这项工作。但是，似乎每当电子邮件格式错误或表单留空时，它都不会显示此行：

```
else if(checkEmail($_POST['email'])==false){ 'Whoops! Looks like the email address you selected is invalid :('; } 
```

或者

```
else { 'Whoops! It looks like you didn&#39;t actually add an email address...'; } 
```

已经被困了几个小时，试图调试......希望这里有人可以帮助我！

这是完整的代码：

```
if(!empty($_POST['email'])) {
        if(checkEmail($_POST['email'])==true) {
            $thisDomain = str_replace('www.', '', $_SERVER['HTTP_HOST']);
            $mailcont = "Someone has invited you to an invite only website!\nYour invite code is: ".$_POST['code'].".\n\nYou can use it at http://".$thisDomain."?go=register&hash=".$_POST['code'];
            if(sendEmail($_POST['email'],'You have been invited!',$mailcont,'noreply@'.$thisDomain)) {
                echo 'Your invite was dispatched to '.$_POST['email'].'<br /><br />Go back <a href="?go=home">home</a>';
            } else { echo 'Whoops! Something went horribly wrong, and we couldn&#39;t send the email :('; }
        } else if(checkEmail($_POST['email'])==false){ 'Whoops! Looks like the email address you selected is invalid :('; }
    } else { 'Whoops! It looks like you didn&#39;t actually add an email address...'; }
break; 
```

这是函数 checkMail 的代码：

```
function checkEmail($email) 
   /**
Validate an email address.
Provide email address (raw input)
Returns true if the email address has the email 
address format and the domain exists.
*/
{
   $isValid = true;
   $atIndex = strrpos($email, "@");
   if (is_bool($atIndex) && !$atIndex)
   {
      $isValid = false;
   }
   else
   {
      $domain = substr($email, $atIndex+1);
      $local = substr($email, 0, $atIndex);
      $localLen = strlen($local);
      $domainLen = strlen($domain);
      if ($localLen < 1 || $localLen > 64)
      {
         // local part length exceeded
         $isValid = false;
      }
      else if ($domainLen < 1 || $domainLen > 255)
      {
         // domain part length exceeded
         $isValid = false;
      }
      else if ($local[0] == '.' || $local[$localLen-1] == '.')
      {
         // local part starts or ends with '.'
         $isValid = false;
      }
      else if (preg_match('/\\.\\./', $local))
      {
         // local part has two consecutive dots
         $isValid = false;
      }
      else if (!preg_match('/^[A-Za-z0-9\\-\\.]+$/', $domain))
      {
         // character not valid in domain part
         $isValid = false;
      }
      else if (preg_match('/\\.\\./', $domain))
      {
         // domain part has two consecutive dots
         $isValid = false;
      }
      else if
(!preg_match('/^(\\\\.|[A-Za-z0-9!#%&`_=\\/$\'*+?^{}|~.-])+$/',
                 str_replace("\\\\","",$local)))
      {
         // character not valid in local part unless 
         // local part is quoted
         if (!preg_match('/^"(\\\\"|[^"])+"$/',
             str_replace("\\\\","",$local)))
         {
            $isValid = false;
         }
      }
      if ($isValid && !(checkdnsrr($domain,"MX") || 
 checkdnsrr($domain,"A")))
      {
         // domain not found in DNS
         $isValid = false;
      }
   }
   return $isValid;
} 
```

提前谢谢各位。你们太棒了，我是 stackoverflow 的新手，但我发现自己每天都回来这里寻求想法和社区的大力帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:21:19.600

`else { 'Whoops! It looks like you didn&#39;t actually add an email address...'; }` 应该 `else { echo 'Whoops! It looks like you didn&#39;t actually add an email address...'; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:23:41.160

这是检查电子邮件地址的一种更简单的方法。

```
<?php
$re1='.*?'; //Non-greedy match on filler
$re2='([\\w-+]+(?:\\.[\\w-+]+)*@(?:[\\w-]+\\.)+[a-zA-Z]{2,7})'; //Email Address 1
if ($c=preg_match_all ('/'.$re1.$re2.'/is', $text, $matches)) {
    $email=$matches[1][0];
}
?> 
```

`$email`要么包含电子邮件，`$text`要么什么都不包含。您可以`empty()`稍后检查。在我看来，域验证毫无意义。你可以说出你想说的所有有趣的、令人印象深刻的事情，我还没有看到现实世界的情况，这样的支票是必要的。

# c++ - rfind 和 << 崩溃程序

> ID：11266972
> 
> 赞同：0
> 
> 时间：2012-06-29T18:20:13.307
> 
> 标签：c++

我有一个问题，有几个程序员在扯头发。语言是 C/C++。考虑下面的代码...假设*request*是一个有效的 C++ 字符串。

```
string outMsg;
string trans_str = ("</TRANSACTION>");
int32_t position;

//Assign outMsg and find "</TRANSACTION>"
outMsg.assign(request);
position = outMsg.rfind(trans_str); 
```

程序在 rfind(trans_str) 上崩溃。当使用 find(...) 和 replace(...) 时，程序也会崩溃。大多数 C++ 方法似乎都有问题。该程序还会崩溃，如下所示....

```
cout << "This is a string " << variable << "and this is the end"; //this is an example 
```

程序通常会在第三个“<<”处崩溃，并且在此示例中只会打印以下输出：

“这是一个字符串 {variable}” 崩溃。

这里发生了很多奇怪的事情。

包括“字符串”（在尖括号中）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:53:33.500

您的代码片段非常不完整，但是当我用我认为可能有意义的内容填写空白时，它对我来说运行良好.....

```
#include <iostream>
#include <string>

int main()
{
    std::string outMsg;
    std::string trans_str = ("</TRANSACTION>");
    int32_t position;

    std::string request = "abcdefg</TRANSACTION>hijklmnop";

    //Assign outMsg and find "</TRANSACTION>"
    outMsg.assign(request);
    position = outMsg.rfind(trans_str);

    std::string variable = outMsg.substr(position, outMsg.size()-position);

    std::cout << "This is a string\n" << variable << "\nand this is the end\n"; //this is an example
} 
```

# mongodb - MongoDB 建模 - 如何使用非规范化模型完成此任务？

> ID：11266974
> 
> 赞同：0
> 
> 时间：2012-06-29T18:20:17.740
> 
> 标签：mongodb, denormalization, database, nosql

假设我有 10,000 个带有课程名称的课程。以及 100,000 名注册各种课程的用户。我的用户数据模型将包含类似...

```
course: [
{courseName: 'Programming 101',
cost: 0
},
{courseName: 'How to use stackoverflow',
cost: 100
}
 ] 
```

但是，如果我想更改课程名称，则需要我更新已经分配了该课程的数千条用户记录。实现这一目标的最佳方法是什么？两个表的两个查询？这是 nosql 环境的弱点，还是这样做的有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:47:47.317

基本上你有两个选择：

1.  从用户记录中引用课程 ID 而不是名称本身，然后进行客户端连接。
2.  继续与学生一起存储完整的课程名称，并在需要时更新这些字段。

这实际上取决于您尝试优化系统的内容，以选择哪个。如果您每学期只更改十几个课程名称，那么选项 2 可能不会有问题。

另外，要回答您关于这是 nosql 系统的弱点的问题，是的，这绝对是一个弱点。这根本不是像 Mongo 这样的 nosql 系统试图解决的问题类型。Mongo 对某些问题非常有用，但对其他问题却非常不利。我想说的是，保留课程和学生数据库并不是 Mongo 的强项之一。这是一个原型关系数据模型，因此在 Mongo 中管理起来比在经典 RDBMS 中更麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:30:33.133

实际上，我会反其道而行之。用户的名字不会经常改变。

用户最好参加那个课程并说“嘿！我的名字错了，你能改吗？” 如果您有不同的班级名称，那么用户将无法找到您的班级。

这就是我要做的：

```
courses: [
  { coursename: 'Programming 101',
    cost: 0,
    registered: [
      {id: 11, name: 'John Doe'},
      {id: 12, name: 'Lumber Jack'}
    ]
  }
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:47:32.200

10,000 个课程，100,000 个用户，你就可以使用 RDBMS。如果您有 100,000 所大学，每所大学有 100,000 个用户（总共 100 亿用户），您可能需要 noSql....如果是这种情况，playOrm 允许您在这种情况下非常轻松地进行连接，因为您可以按大学进行分区（两个表）然后你可以简单地对“大学A分区中的课程”和“大学A分区中的用户”进行连接。嗯，这是一种方法。

# meteor - Meteor 中是否可以进行“分组”聚合查询？

> ID：11266977
> 
> 赞同：7
> 
> 时间：2012-06-29T18:20:38.400
> 
> 标签：meteor

`db.collection.group(...)`在 Meteor 中是否可以进行 Mongo 样式的查询？我希望我可以在服务器上运行这样的东西（coffeescript）：

```
Meteor.publish "top10", ->
    Records.group
        key: {name:true}
        reduce: (obj, agg) -> agg.count++
        initial: {count:0} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T03:19:52.223

其实还没有。

Meteor 使用 node-mongo-native 在服务器端执行 CURD，而在客户端使用 minimongo。并且 Meteor 在双方保持相同的 API。

文件说——

> 在这个版本中，Minimongo 有一些限制：
> 
> ...
> 
> 不支持 findAndModify、upsert、聚合函数和 map/reduce。

但是，node-mongo-native 支持它们，所以我认为 Meteor 只是没有为我们公开相关的 API。您可以查看 packages/mongo-livedata/mongo_driver.js，并帮助自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:53:40.833

这是一个如何做到这一点的工作示例：[https ://github.com/meteor/meteor/pull/644](https://github.com/meteor/meteor/pull/644)

# c# - 将图像路径发送到数据库

> ID：11266984
> 
> 赞同：0
> 
> 时间：2012-06-29T18:20:51.093
> 
> 标签：c#, sql, c#-4.0

我使用此代码将图像上传到服务器。是它的工作。但我需要将图像路径发送到我的数据库。我有一个带有 Profiles 表和 ImagePath 字段的数据库。

我怎样才能做到这一点...

我的工作代码在这里

```
public partial class ProfileDetails2 : System.Web.UI.Page
   {
protected void Page_Load(object sender, EventArgs e)
{

}
protected void upload_Click(object sender, EventArgs e)
{
    int intFileSizeLimit = 10;
    string strFileNameWithPath = FileUpload1.PostedFile.FileName;
    string strExtensionName = System.IO.Path.GetExtension(strFileNameWithPath);
    string strFileName = System.IO.Path.GetFileName(strFileNameWithPath);
    int intFileSize = FileUpload1.PostedFile.ContentLength / 1024;

    strExtensionName = strExtensionName.ToLower();
    if (strExtensionName.Equals(".jpg") || strExtensionName.Equals(".gif"))
    {

        if (intFileSize < intFileSizeLimit)
        {

            FileUpload1.PostedFile.SaveAs(Server.MapPath("~/images/") + "img" + strExtensionName);

            lblMessage.Text = "Uploaded file details <hr />" +
                "File path on your Computer: " + strFileNameWithPath + "<br />" +
                "File Name: " + strFileName + "<br />" +
                "File Extension Name: " + strExtensionName + "<br />" +
                "File Size: " + intFileSize.ToString();

        }
        else
        {
            lblMessage.Text = "File size exceeded than limit " + intFileSizeLimit + " KB, Please upload smaller file.";
        }
    }
    else
    {
        lblMessage.Text = "Only .jpg or .gif file are allowed, try again!";
        lblMessage.ForeColor = System.Drawing.Color.Red;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:29:37.420

您可以使用附加路径

```
string strFileNameWithPath = Request.PhysicalApplicationPath + "Uploads\" + FileUpload1.PostedFile.FileName; 
```

这将为您提供应用程序根路径内的完整路径。

我想这就是你要找的。

# jquery - 仅验证指定的文本框

> ID：11266989
> 
> 赞同：0
> 
> 时间：2012-06-29T18:21:24.060
> 
> 标签：jquery, asp.net, asp.net-mvc-3, validation, jquery-validate

我有三个`<input type="text" />`，每个都有一个与之关联的按钮。

IE

文本框 1 --> 提交 1 文本框 2 --> 提交 2 文本框 3 --> 提交 3

我希望仅在相应的文本框上进行验证。如果用户单击 Submit2，则仅对 TextBox2 进行验证。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:50:55.880

您可以将它们放在单独`<form>`的 s 中，并且每个表单有一个提交按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:35:49.273

我对 jQuery 不是很好，但我想你可以做到的一种方法是通过每次按钮单击来处理验证。这是我设置的以下[jsfiddle的 html/javascript：](http://jsfiddle.net/eMQ8r/)

```
<input type="text" id="input1" /><button id="button1">button 1</button><br/>
<input type="text" id="input2"/><button id="button2"> button 2</button><br/>
<input type="text" id="input3"/><button id="button3">button 3</button>​

$(document).ready(function(){
$('#button1').click(function()
                    {
                       //Handle validaton
                       $('#input1').val("You clicked button 1"); 
                    });

$('#button2').click(function()
                    {
                        //Handle validaton
                       $('#input2').val("You clicked button 2"); 
                    });

$('#button3').click(function()
                    {
                        //Handle validaton
                       $('#input3').val("You clicked button 3"); 
                    }); 
```

});​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:02:46.230

你可以通过 id 来上课。比如文本框上的文本框，那么你可以做

Javascript

```
$(document).on('click', '.textbox', aFunction);

function aFunction(event){
   var text = $(this).prev().val();
   //validation, text is the text of the box.
}​ 
```

HTML

```
<input type="text" id="input1" /><button class='textbox' id="button1">button 1</button><br/>

<input type="text" id="input2"/><button class='textbox' id="button2"> button 2</button><br/>

<input type="text" id="input3"/><button id="button3" class='textbox'>button 3</button>​ 
```

jsfiddle [http://jsfiddle.net/FERMIS/zE6uK/1/](http://jsfiddle.net/FERMIS/zE6uK/1/)

# javascript - 如何从 JS 获取 Span 标签中的值

> ID：11266990
> 
> 赞同：1
> 
> 时间：2012-06-29T18:21:28.017
> 
> 标签：javascript, html

我正在尝试使用 HTML 制作一个 BMI 计算器。输入来自文本字段。我在 Javascript 函数中对它们进行了一些计算。我想在这样的范围内获取计算值：

```
<span id="" class="">Your Calculation Results is = </span>
<span id="" class="">   "" I want the result here ""    </span> 
```

==================================================== ================== 编辑：我要问的部分

```
<script language="javascript">
var bmi = document.getElementById("ID_bmiResult2").innerHTML;
bmi.value = weight / (heightInMeter * heightInMeter);
</script>

<body>
<span id="ID_bmiResult2">  </span>
</body> 
```

我不知道怎么做...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T18:25:29.557

**编辑**：正如它所指出的，FF 不喜欢`innerText`，所以我替换`innerHTML`它在这种特殊情况下不会改变脚本的整体功能。

您可以获得第二个`span`并将值直接传递给`innerHTML`这样的：

```
document.getElementsByTagName('span')[1].innerHTML= 'the result'; 
```

**注意**：考虑使用 and`id`或`class`这样您可以找到需要更改的确切元素，而不是检索该类型的多个元素（在本例中`span`）。如果你有一个`id`，它会是这样的：

```
document.getElementById('the id goes here').innerHTML= 'the result'; 
```

**Edit2**：这个编辑是在 OP 改变他的问题之后进行的。现在我看到你的代码真的很困惑。我写[**了这个小提琴**](http://jsfiddle.net/schawaska/Qa4AC/)，所以你可以看到它工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:29:11.053

如果你有一个变量`calcResult`，你可以这样做：

```
document.getElementById('spanId').innerHTML += calcResult; 
```

当然，这只适用于一次。如果您再次执行此操作，您将在跨度中获得两个结果。如果您希望能够在表单字段更改时更改结果，我会尝试：

```
<span id="calc">Your calculation result = <span></span></span>

var result = 12;
document.getElementById('calc').getElementsByTagName('span')[0].innerHTML = result; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:23:52.580

你试过[jQuery](http://jquery.com/)吗？

```
$("span").next().text("Your Result");

OR

$("span").eq(1).text("Your Result"); 
```

要编写更好的代码，请在您的组件中添加一个 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T18:26:55.210

您可以使用 document.writeln 来获取结果。查看[http://jsfiddle.net/CmVww/](http://jsfiddle.net/CmVww/)上的小提琴来玩它。以下是结果。

```
<div id="start">
<span id="one" class="sText">Your Calculation Results is = </span>
<span id="two" class="result">  
<script type="text/javascript">
var tst = 'I want the result here';
  document.writeln(tst);
</script>
</span> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T04:56:11.613

```
var bmi = weight / (heightInMeter * heightInMeter);
document.getElementById('ID_bmiResult2').innerHTML= bmi; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-22T05:46:40.203

在javascript中计算bmi

```
<script language="javascript">

    var Height = 0;
    var Weight = 0;
    var BMI = 0;
    function getTotalBMIScore() {

        Height = document.getElementById('MainContent_txtPDHeight').value;
        //alert(Height + 'Height');
        Weight = document.getElementById('MainContent_txtPDWeight').value;
        //alert(Weight + 'Weight')
        BMI = Weight / (Height * Height);

        BMI = BMI.toFixed(2);

        //alert(BMI + 'BMI');
        document.getElementById('BMIScore').innerText = BMI;

    }

</script> 
```

//结束函数

// 如果你从文本框中取值，你应该使用这个高度（以米为单位）：

```
<asp:TextBox ID="txtPDHeight" onchange ="getTotalBMIScore()"   onKeyUp ="getTotalBMIScore()" onkeypress="return IsNumeric(event);" ondrop="return false;" onpaste="return false;"  runat="server"></asp:TextBox>
<span> 
```

重量（公斤）：

```
<asp:TextBox ID="txtPDWeight" onchange = "getTotalBMIScore()"  onkeypress="return IsNumeric(event);" ondrop="return false;" onpaste="return false;"  onKeyUp ="getTotalBMIScore()" runat="server"></asp:TextBox> 
```

//如果你想在跨度中显示使用这个BMI：

```
<span id="BMIScore"></span></span><br /> 
```

# animation - 制作页面过渡动画

> ID：11266995
> 
> 赞同：0
> 
> 时间：2012-06-29T18:21:37.853
> 
> 标签：animation, loading, transition

我最近注意到互联网上的一些页面（如 Gizmodo 和 io9）有页面加载动画。在后一种情况下，前一页显示为灰色，中间有一个小的加载“微调器”动画，而第二个页面进入时中间没有空白加载页面，就像互联网上的大多数页面一样。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:36:08.010

希望这对您有用...尽管需要 jQuery，但以下解决方案对我有用：

首先在body标签之后添加：

```
<div id="loading">
  <img id="loading-image" src="images/ajax-loader.gif" alt="Loading..." />
</div> 
```

然后将 div 和图像的样式类添加到您的 css 中：

```
#loading {
  width: 100%;
  height: 100%;
  top: 0px;
  left: 0px;
  position: fixed;
  display: block;
  opacity: 0.7;
  background-color: #fff;
  z-index: 99;
  text-align: center;
}

#loading-image {
  position: absolute;
  top: 100px;
  left: 240px;
  z-index: 100;
} 
```

最后将此javascript添加到您的页面（最好在页面末尾，当然在关闭body标签之前）：

```
<script language="javascript" type="text/javascript">   
$(window).load(function() {
$('#loading').hide();   }); 
</script> 
```

然后通过样式类调整加载图片的位置和加载div的背景颜色。

就是这样，工作得很好。但当然你必须在某个地方有一个 ajax-loader.gif。

试试[AJAXLoad](http://www.ajaxload.info/)他们有一些很棒的 GIF 动画.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:54:05.537

我没有看过引用的网站，但它听起来像是一个 jQuery 候选人。

您使用 ajax 调用来获取页面的内容，然后将其加载到当前 DOM 中，以替换当前显示的内容。

jQuery 框架有动画和插件来显示你描述的行为。我喜欢的一个是 ColorBox (http://www.jacklmoore.com/colorbox)。

# c - 需要解释输出

> ID：11266996
> 
> 赞同：0
> 
> 时间：2012-06-29T18:21:40.263
> 
> 标签：c, gcc, undefined-behavior

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

```
#include<stdio.h>
void main()
{
int a=5;
printf("%d\t%d\t%d\n",a,a++,++a);
} 
```

上述程序的输出在 gcc 版本 4.4.3 (Ubuntu 4.4.3-4ubuntu5) 中显示 7 6 7。为什么它显示而不是 7 6 6 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:24:15.507

您的程序可以显示它喜欢的任何内容并且输出是正确的。

行为未定义；任何事情都可以发生。

什么是未定义的？

*   在参数列表中增加`a`两次到`printf()`.

的行为`void main()`充其量是实现定义的。的返回类型`main()`应该是`int`.

* * *

## ISO/IEC 9899:2011 (C 2011) 标准

> ### § 6.5 表达式
> 
> ¶2 如果标量对象上的副作用相对于同一标量对象上的不同副作用或使用相同标量对象的值的值计算是未排序的，则行为未定义。如果一个表达式的子表达式有多个允许的排序，则如果在任何排序中出现这种未排序的副作用，则行为是未定义的。^(84))
> 
> ^(84))本段呈现未定义的语句表达式，例如
> 
> ```
>  i = ++i + 1;
>     a[i++] = i; 
> ```
> 
> 同时允许
> 
> ```
>  i = i + 1;
>     a[i] = i; 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:26:07.807

在 C 中 undefined 的一个语句中多次修改同一个变量。您应该避免这样做，因为结果是不可预测的，并且可能在编译器之间变化很大。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T18:25:38.503

“a++”和“++a”之间的区别的简单解释是这样的：

使用“a++”，在操作**之后**不增加增量，而“++a”在操作之前完成。

例如：

`a = 0; print("%d ", a++); printf("%d ",a);`会给你`0 1`。

`a = 0; print("%d ", ++a); printf("%d ",a);`会给你`1 1`。

# java - 如何获取 JavaFX 的版本号？

> ID：11266997
> 
> 赞同：41
> 
> 时间：2012-06-29T18:21:43.683
> 
> 标签：java, javafx, javafx-2

如何在运行时找出我正在使用的 JavaFX 版本？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-04T14:11:19.557

一种简单的方法是简单地读取`javafx.properties`位于您的`$JAVA_HOME/jre/lib`目录中的文件。

我现在安装了 Java 1.7 u9。与它捆绑的 JavaFX 是 v2.0.3，因此上述文件包含以下行：

```
javafx.runtime.version=2.0.3 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-29T18:26:49.087

```
com.sun.javafx.runtime.VersionInfo.getRuntimeVersion(); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-29T20:27:22.283

您可以`javafx.runtime.version`从系统属性中获取数字。

```
import javafx.application.Application;
import javafx.stage.Stage;
public class ReportVersion extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    System.out.println("javafx.runtime.version: " + System.getProperties().get("javafx.runtime.version"));
    System.exit(0);
  }
} 
```

请注意，如果未签名的应用程序嵌入在浏览器中或通过 WebStart 访问，则系统属性访问方法可能会导致安全异常，因此`com.sun`即使所有`com.sun`调用都已弃用且不属于官方 JavaFX 公共 API 的一部分，Sergey 的调用可能会更好。

*更新*

@assylias 对 Sergey 的回答的评论似乎表明，`com.sun`如果未签名的应用程序嵌入在浏览器中或通过 WebStart 访问，Sergey 可能会导致安全异常。因此，在这些特定条件下运行时，可能没有好的解决方案来确定 javafx 运行时版本。

# node.js - 在 Mongoose / Mongo 和 Node.js 中更新链接模式

> ID：11266998
> 
> 赞同：0
> 
> 时间：2012-06-29T18:21:43.793
> 
> 标签：node.js, mongodb, mongoose

我在 Node.js 中使用 Mongo / Mongoose 来缓存数据。一个 Cache 对象包含许多 CachedPages。换句话说：

```
var PageSchema = {
                'source':                    String,
                'data':                     {}
            };
var PageModel = mongoose.model('pages',PageSchema);

var CacheSchema = {
                'last_updated':             Date,
                'pages':                   [PageSchema]
            }
var CacheModel = mongoose.model('caches',CacheSchema); 
```

当一个新的页面数据数组进来时，我首先为每个新对象插入一个新的 CachedPage 来缓存它，例如。

```
var data = new PageModel({'source': page.source, 'data': page.contents});
data.save(function(err){
    // error handling removed
    pages.push(data);
}); 
```

最后，我将页面保存到一个新的缓存中：

```
var cache = new CacheModel({'last_updated': new Date(), 'pages': pages});
cache.save(...); 
```

到目前为止，一切都很好！一切都正确保存。

当我想更新页面时，问题就来了。当我执行 upsert 来修改 PageModel 时，它似乎不会影响 CacheModel 内页面中的数据。例如，如果我这样做：

```
PageModel.update({'_id': id_to_update}, {'data': new_data}, {'upsert': true}, function(...)); 
```

然后，即使页面已更新，当我执行“查找”以检索缓存时，页面数组仍会反映旧数据。

我的理解是，使用 PageSchema 作为 CacheSchema 声明的一部分的好处是可以链接对象，这样对 Pages 的更新就会反映在 Cache 中。我错过了什么？

显然，我可以将 CacheSchema.pages 更改为 _ids 数组，然后当我想检索缓存时，我将对 PageModel 进行第二次查询以将 _ids 数组转换为对象数组。这将解决问题，但它添加了第二个查询......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T02:19:29.397

您误解了 Mongoose/Mongo 中的嵌入式文档概念。将页面文档嵌入到缓存文档中的数组中，会创建具有相同 _id 值的页面文档的独立副本。如果您想采用这种模式设计，您需要确保对集合中的文档所做的任何更改`pages`也对集合中文档的嵌入`pages`数组进行`caches`。

正如您所提到的，这里更典型的选择是创建`CacheSchema.pages`一个 _ids 数组，然后[`populate`](http://mongoosejs.com/docs/populate.html)在需要时使用 Mongoose 的支持将 refs 跟踪到它们的完整对象。所以`pages`看起来像这样`CacheSchema`：

```
pages: [{ type: Schema.ObjectId, ref: 'pages' }] 
```