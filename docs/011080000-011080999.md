# StackOverflow 问答 11080000-11080999

# java - 如何连接两个arraylist 并存储到第三个数组列表中 ?

> ID：11080005
> 
> 赞同：0
> 
> 时间：2012-06-18T09:21:44.037
> 
> 标签：java, arraylist

我有三个数组列表，在这里我必须连接 2 个数组列表并将其显示到第三个数组列表中。我的编码如下所示，

编码：：

```
List<String> firstName  = new ArrayList<String>();
List<String> lastName  = new ArrayList<String>();
         /////inserting first name
         String string1 = "aaa";
         firstName.add(string1);
         String string2 = "bbb";
         firstName.add(string2);
         ///////inserting last name
         String string3 = "yyy";
         lastName.add(string3);
         String string4 = "zzz";
         lastName.add(string4);

 /////////first name 
        Iterator<String> iterator = firstName.iterator();
        while(iterator.hasNext()){
         String FirstName = iterator.next();
         System.out.println(" FirstName   "+FirstName);
        }
 //////////////last name
        Iterator<String> iterator1 = lastName.iterator();
        while(iterator1.hasNext()){
         String LastName = iterator1.next();
         System.out.println(" LastName  "+LastName);
        }
List<String> name=new ArrayList<String>();
        ///////////name=firstname+lastname
        Iterator<String> iterator11 = lastName.iterator();
        while(iterator11.hasNext()){
         name=firstName+lastName;///////here getting error
               ////////////what should I do here to add two arraylist<String> value
         System.out.println(" Name = FirstName+LastName  "+name);
        } 
```

我想要的输出::

```
FirstName   aaa
FirstName   bbb
LastName  yyy
LastName  zzz
Name = FirstName+LastName aaayyy
Name = FirstName+LastName bbbzzz 
```

但我不知道如何连接两个arrayList并将其显示在第三个arrayList中，请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T09:26:19.487

如果列表大小相等，则可以一起迭代它们：

```
Iterator<String> iterator = firstName.iterator();
Iterator<String> iterator1 = lastName.iterator();

while(iterator.hasNext() && iterator1.hasNext()){
    String FirstName = iterator.next();
    String LastName = iterator1.next();
    // add FirstName and LastName to the new list here
} 
```

**更新**

```
Iterator<String> iterator = firstName.iterator();
Iterator<String> iterator1 = lastName.iterator();
List<String> newList = new ArrayList<String>();

while(iterator.hasNext() && iterator1.hasNext()){
    String FirstName = iterator.next();
    String LastName = iterator1.next();
    newList.add(FirstName + " " + LastName);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T09:23:50.123

```
List<String> newList = new ArrayList<String>(firstName);
newList.addAll(lastName); 
```

newList 将包含来自 firstName 和 LastName 的元素

**编辑：**上面的代码连接两个列表，在名字列表的末尾添加姓氏。如果您的列表长度相同，那么您可以尝试：

```
List<String> newList = new ArrayList<String>();
for(int i=0;i<fistName.length();i++)
{
    newList.Add(firstName.get(i)+lastName.get(i));
}

Iterator<String> iter = newList.iterator();
while(iter.hasNext()){
    System.out.println(" Name = FirstName+LastName  "+iter.next());
    } 
```

这将为您提供所需的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:27:30.263

您应该循环执行。

```
List<String> name=new ArrayList<String>();
for(i=0;i<firstname.length()&&i<lastname.length();i++){
    name.add(firstname.get(i) + lastname.get(i));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:29:26.207

所以你真的想创建一个由其他两个列表的元素成对连接形成的字符串列表。

最简单的方法就是写一个循环；

```
 ArrayList<String> l1 = ...
 ArrayList<String> l2 = ...
 ArrayList<String> l3 = new ArrayList<String>(l1.size());
 for (int i =- 0; i < l3.size(); i++) {
     l3.add(l1.get(i) + l2.get(i));
 } 
```

这假设`l1`和`l2`具有相同的长度。（注意：我故意在此处的声明中使用列表实现类，因为此代码仅适用于使用`ArrayList`. 对于 a`LinkedList`您需要使用列表迭代器，因为`get(i)`它很昂贵。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T09:39:54.923

```
public static void main(String[] args) {

    List<String> firstName = new ArrayList<String>();
    List<String> lastName = new ArrayList<String>();
    String string1 = "aaa";
    firstName.add(string1);
    String string2 = "bbb";
    firstName.add(string2);
    // /////inserting last name
    String string3 = "yyy";
    lastName.add(string3);
    String string4 = "zzz";
    lastName.add(string4);

    Iterator<String> iterator = firstName.iterator();
    Iterator<String> iterator1 = lastName.iterator();
    List<String> name = new ArrayList<String>();

    while (iterator.hasNext()&& iterator1.hasNext() ) {

        name.add(iterator.next()+" "+iterator1.next());
    }

    Iterator<String> iterator11 = name.iterator();
    while(iterator11.hasNext())
        System.out.println(iterator11.next());

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-19T18:08:44.437

```
ArrayList<String> fname=new ArrayList<String>();
fname.add("deepak");
fname.add("avinash");
fname.add("amit");
ArrayList<String> lname=new ArrayList<String>();
lname.add("goswami");
lname.add("singh");
lname.add("jha");
ArrayList<String> name=new ArrayList<String>();
Iterator<String> it1=fname.iterator();
Iterator<String> it2=lname.iterator();
while(it1.hasNext() && it2.hasNext()){
    String f=it1.next();
    String l=it2.next();
    name.add(f+" "+l);
}
for(String str:name){
    System.out.println(str);
} 
```

} }

## 输出 ：

迪帕克·哥斯瓦米·阿维纳什·辛格·阿米特·贾

# c# - 在 GET 操作中设置实体键

> ID：11080007
> 
> 赞同：0
> 
> 时间：2012-06-18T09:21:50.357
> 
> 标签：c#, asp.net-mvc-3, ado.net-entity-data-model

我知道这是一个非常简单的问题，但我是 C#、ASP.NET MVC3 和 ADO.Net Entity Framework 的新手，我的朋友 google 对我帮助不大......

所以，我有两个实体：Post 和 Comments，它们之间有 1-n 的关系。

我想以简单的形式在帖子上发表评论，并带有一条给出帖子ID的路线。

GET 部分（id 是帖子的 id）

```
 //
    // GET: /Blog/Comment/5

    public ActionResult Comment(int id)
    {
        Comment comment = new Comment();
        comment.PostReference.EntityKey = new EntityKey("BlogEntities.Posts", "id", id);

        return View(comment);
    } 
```

POST部分：

```
 //
    // POST: /Blog/Comment/5

    [HttpPost]
    public ActionResult Comment(Comment comment)
    {
        if (ModelState.IsValid)
        {
            db.Comments.AddObject(comment);

            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View();
    } 
```

我在调试模式下骑行，提交表单时似乎密钥设置为空。如果我在 HttpPost 方法中设置后引用，它就可以正常工作，但此时我对 id 没有任何线索。所以，我认为它必须在 GET 部分设置......

或者也许我完全走错了方向？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:32:58.490

如前所述，完全愚蠢的问题......

```
 //
    // POST: /Blog/Comment/5

    [HttpPost]
    public ActionResult Comment(int id, Comment comment)
    {
        if (ModelState.IsValid)
        {
            db.Comments.AddObject(comment);
            comment.PostReference.EntityKey = new EntityKey("BlogEntities.Posts", "id", id);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View();
    } 
```

将 id 放入方法的 arg 中，然后在 AddObject 成功后设置引用......

希望它能帮助像我这样迷失的鸟...

# c++ - Marlett 字体：我可以加载它并在 WinAPI 中使用它吗

> ID：11080010
> 
> 赞同：0
> 
> 时间：2012-06-18T09:22:09.653
> 
> 标签：c++, winapi

**我使用哪些函数在 Native WinAPI中加载[Marlett字体（如果可能）？](http://www.reactos.org/wiki/Marlett_Characters)**

我正在尝试在 Native WinAPI 中创建自己的透明复选框。我正处于需要绘制**复选框勾号**的阶段，因此如果我可以加载 Marlett 字体然后 TextOut() - 即打印 - 复选框勾号，那就太酷了。

也许我需要获取 Marlett 字体的副本作为文件，然后在运行时将其加载，还是在 2k 以上的所有 Windows 操作系统上加载？

[http://www.siao2.com/2006/01/26/517738.aspx](http://www.siao2.com/2006/01/26/517738.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:25:16.143

通过咨询[Wikipedia](http://en.wikipedia.org/wiki/Marlett)可以轻松回答：

> Marlett 是一种 TrueType 字体，自 Windows 95 以来一直在 Microsoft Windows 中使用。

因此，如果您愿意，您可以使用传统的[`CreateFont`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183499%28v=vs.85%29.aspx)or加载字体。[`CreateFontIndirect`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183500%28v=vs.85%29.aspx)

# c# - 图像浏览器在 Razor 视图的 CkEditor 中不起作用

> ID：11080013
> 
> 赞同：3
> 
> 时间：2012-06-18T09:22:20.623
> 
> 标签：c#, asp.net-mvc, razor, ckeditor, ckfinder

在我的 CkEditor 上传图片工作正常，但浏览图片不工作。我将 CkFinder 集成到它上面。

我的剃刀观点：

```
<script src="@Url.Content("~/Scripts/CKEditor/ckeditor/ckeditor.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/CKEditor/ckfinder/ckfinder.js")" type="text/javascript"></script>

@Html.TextAreaFor(model => model.Content, new { @id = "ckeditor" })

CKEDITOR.replace('ckeditor',
{
    filebrowserImageBrowseUrl: '/Scripts/ckfinder/ckfinder.html?type=Images',
    filebrowserUploadUrl: '/Scripts/ckfinder/core/connector/aspx/connector.aspx?   command=QuickUpload&type=Files',
    filebrowserImageUploadUrl: '/ImageUploader/UploadImage'     
} 
```

对于图像上传，我使用了一个可以正常工作的操作。但是图像浏览器无法正常工作。它重定向到 ckfinder 但不显示上传的图像也不显示文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:09:36.597

使用 Filemanager 来浏览 Image 而不是 ckfinder

在我看来

```
@Html.TextAreaFor(model => model.Content, new { @id = "ckeditor" })

CKEDITOR.replace('ckeditor',
{

 filebrowserImageUploadUrl:'/ImageUploader/UploadImage',//for uploading image 
 filebrowserImageBrowseUrl: '/Scripts/FileManager/index.html'

 }
); 
```

下载 ckeditor 的 Filemanager 并在连接器内的 filemanager.aspx.cs 中指定文件夹路径，效果很好

# jquery - 多列列表jquery

> ID：11080018
> 
> 赞同：0
> 
> 时间：2012-06-18T09:22:40.450
> 
> 标签：jquery, html, list

我有一个包含未知数量的项目的列表。有没有办法使用 jquery 或 javascript 将列表拆分为列？棘手的部分：列数也是动态的，因此当浏览器更改它时，列数会更改为。您可以将其与浮点数进行比较。所以当你让你的浏览器变小时，浮动的 div 将浮动做底部。（如果你没有设置宽度）我可以说计算项目的数量并将它们放在列中，然后浮动 ul 列表。但是你有一个问题，最后一列将放在第一列之下。但我想要第一列下的“第二”列。

例如：

```
<ul>
   <li>test1</li>
   <li>test2</li>
   <li>test2</li>
   <li>test4</li>
   <li>test5</li>
   <li>test6</li>
</ul> 
```

如果我做一个浮动，你会得到这个：

测试1 测试2 测试3 测试4 测试5 测试6

当浏览器变小时，你有这个：test1 test2 test3 test4 test5 test6

它应该是：
test1 test3 test4 test5 test6 test2

（这是当你使用浮动时）所以有没有办法改变浮动顺序，或者只是用jquery来动态地制作列？

* * *

我找到了这个解决方案，但它仍然无法像我想要的那样工作。它是 jquery 插件：columnizeList。该列表显示在几列中，但我仍然遇到这个问题：当我加载页面时，例如我的 div 中有这个列表：

![在此处输入图像描述](../Images/cc698b15cb09105f2ffc9b9092ea4508.png)

（所以这和以前的问题一样）。我仍然使用浮动，所以也许这就是问题所在。但是我可以在没有浮动的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:43:47.387

这就是浮动的工作原理，如果您希望项目显示在彼此下方，您可以包装其中一些，然后浮动它们的包装：

```
<ul>
   <div>
     <li>test1</li>
     <li>test2</li>
     <li>test2</li>
     <li>test4</li>
     <li>test5</li>
   </div>
   <div>
     <li>test6</li>         
     <li>test7</li>         
     <li>test8</li>
   </div>
</ul>

ul div {
   float: left
} 
```

[http://jsfiddle.net/f8Kgj/](http://jsfiddle.net/f8Kgj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-13T04:42:40.067

我建议您使用 CSS:`display: flex`并使用它。您还可以使用[Bootstrap - Flex](https://getbootstrap.com/docs/4.0/utilities/flex/)来简化更改。

flex 最好的一点是你可以简单地通过在样式表中键入来重新排序元素`order: 1`，如果你使用 Bootstrap，你可以简单地将`.order-1`类放在第一个元素上。

`.order-lg-1`您还可以使用 Bootstrap 使用类根据屏幕宽度重新排序。

# android - 转会会员混淆

> ID：11080022
> 
> 赞同：0
> 
> 时间：2012-06-18T09:22:54.230
> 
> 标签：android, android-asynctask, static-members

我可以这样定义`public static member`一个`MainActivity`：

```
public static int end; 
```

我想知道我是否可以`Asynctask Thread`像这样分配它`end=9`。如果可以，为什么需要将会员转移到`Asynctask`使用`Asynctask prams`？

# javascript - 用 jquery 创建透视对象

> ID：11080023
> 
> 赞同：0
> 
> 时间：2012-06-18T09:22:56.783
> 
> 标签：javascript, jquery, .net, client-side, perspective

例如，如何创建具有透视的对象。

例如：[http ://www.spaceslide.co.uk/design-your-own.php?stage=5](http://www.spaceslide.co.uk/design-your-own.php?stage=5)

在第 5 步中，您可以看到滑动衣柜。如果需要，您还可以看到侧面（左侧或右侧）。我认为这是用 JQuery 创建的。我的问题是，这怎么可能创建透视图并用图像填充它？

或者你有什么更好的想法来创造视角

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:39:20.147

我不能让任何东西滑动，但我可以看到衣柜侧面的透视图。

背景图像覆盖有两个半透明的 gif，遮住了图像的一部分。

这是其中一张动图：

[http://www.spaceslide.co.uk/static/images/configurator/masks/endpanel-top-left.gif](http://www.spaceslide.co.uk/static/images/configurator/masks/endpanel-top-left.gif)

和另外一个：

[http://www.spaceslide.co.uk/static/images/configurator/masks/endpanel-bottom-left.gif](http://www.spaceslide.co.uk/static/images/configurator/masks/endpanel-bottom-left.gif)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:44:56.420

您可以在第 5 阶段探索更多，他们使用了提供此功能的[slidejs](http://slidesjs.com/) java 脚本库。

为了给门上色，他们使用[了 panzoom.js](http://andrew.hedges.name/experiments/pan-zoom)库。[此处](http://www.cyberz.org/blog/2009/12/08/svgpan-a-javascript-svg-panzoomdrag-library/)给出了为页面部分着色的示例。

# orm - 在学说2中合并对象的反序列化图时如何自动删除孤儿？

> ID：11080027
> 
> 赞同：7
> 
> 时间：2012-06-18T09:23:00.437
> 
> 标签：orm, symfony, merge, doctrine-orm, orphan

我正在使用 Symfony2 和 Doctrine2 来构建后端 API。此 API 将接收对象图到数据库中的 CRUD。

我正在使用出色的 JMSSerializer 包将对象的 json 编码图反序列化为分离的实体图，然后我想简单地将该图直接合并到数据库中。

在我的代码中，我有 2 个实体：父母和孩子。`OneToMany(cascade={"all"}, orphanRemoval=true)`在 Parent 中定义了一个关系。

在我的数据库中，我有一个 ID 为 1 的父行，其中有 3 个 ID 为 1、2、3 的子行。

我想写一些类似的东西（我在这里没有使用反序列化，以简化示例）：

```
$parent = new Parent(); $parent->id = 1  // detached entity
$existing_child = new Child(); $child->id = 2 // detached entity
$new_child = new Child(); // new entity
$parent->addChild($existing_child);
$parent->addChild($new_child);

$em = $this->getDoctrine()
    ->getEntityManager();
$em->merge($parent);

$em->flush(); 
```

这样做，我的新孩子被很好地创建，现有孩子被更新但旧孩子（1和3）没有被删除。

如果我遗漏了什么，有人可以帮助我吗？

# opera - Opera Extension 安装失败？

> ID：11080032
> 
> 赞同：0
> 
> 时间：2012-06-18T09:23:16.037
> 
> 标签：opera, opera-extension

我正在尝试为 Opera 安装自建扩展。正如 Opera 建议的那样：

1.一种方法是简单地将.xml文件拖到opera中，并以开发者模式安装。在我的情况下它也工作得很好。

但是第二种方法：

2.压缩文件夹并将名称从 .zip 更改为 .oex。现在将其拖到 Opera。

它被安装了。这不起作用。

我得到以下弹出窗口

![得到这个弹出窗口](../Images/84d0080c32de1b160a3defb6e94ea6fb.png)

当我单击确定时。我收到以下消息。 ![在此处输入图像描述](../Images/dd023c9bb073c609bf4a8bedd13eb38f.png)

任何人都可以告诉我是什么问题。

第一种方法仍然可以正常工作。扩展程序也运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:44:10.750

这是一个常见的错误。当您必须**压缩文件夹内的文件时，您当前正在压缩文件夹**。

> 您需要确保压缩您的扩展程序，以便包含它的文件和目录位于 zip 的根目录中，而不是在文件夹中。为确保这一点，请确保将文件压缩到扩展目录中，而不是目录本身。微妙，但它使一切变得不同。—[你好世界扩展](http://dev.opera.com/articles/view/opera-extensions-hello-world/#packaging)

# video-streaming - Google 互动媒体广告的示例广告代码

> ID：11080036
> 
> 赞同：0
> 
> 时间：2012-06-18T09:23:24.147
> 
> 标签：video-streaming, ads

我正在尝试弄清楚如何使用 Google IMA 在 Android 上的视频中展示广告。SDK 可从[https://developers.google.com/interactive-media-ads/docs/sdks/googleandroid获得](https://developers.google.com/interactive-media-ads/docs/sdks/googleandroid)

虽然示例应用程序可以正常工作，但随附的示例广告代码 URL 不起作用。没有标签 URL 广告就无法显示，而且如果没有标签，很难构建和试验 API。我一直在尝试搜索有效的示例广告代码 URL，但没有成功。

Android 示例（以及 HTML5 示例）提供的添加标记 URL 为： [http ://ad.doubleclick.net/pfadx/AngelaSite;kw=html5linearnonlinear;sz=300x300;ord=5036130;dcmt=text/ xml](http://ad.doubleclick.net/pfadx/AngelaSite;kw=html5linearnonlinear;sz=300x300;ord=5036130;dcmt=text/xml)

对于启用了广告拦截的用户：ad[dot]doubleclick[dot]net/pfadx/AngelaSite;kw=html5linearnonlinear;sz=300x300;ord=5036130;dcmt=text/xml

这会导致服务器端错误：

```
error on line 1 at column 31: AttValue: " or ' expected 
```

有谁知道我在哪里可以获得工作标签 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:10:23.233

[http://ad.doubleclick.net/pfadx/AngelaSite;kw=html5linearnonlinear;sz=300x300;ord=5036130;dcmt=text/xml](http://ad.doubleclick.net/pfadx/AngelaSite;kw=html5linearnonlinear;sz=300x300;ord=5036130;dcmt=text/xml)上的示例代码 已重新激活。它现在应该可以工作了。

# javascript - Java 7 + Rhino 1.7R3 对 CommonJS 模块的支持？

> ID：11080037
> 
> 赞同：7
> 
> 时间：2012-06-18T09:23:26.177
> 
> 标签：javascript, require, rhino, java-7, commonjs

我需要帮助 CommonJS 在 Java 7 和 Rhino 1.7R3 上工作。

Rhino 1.7R3 支持 CommonJS 模块：

*   [https://developer.mozilla.org/En/New_in_Rhino_1.7R3](https://developer.mozilla.org/En/New_in_Rhino_1.7R3)

Java 7 与 Rhino 1.7R3 捆绑在一起。不幸的是，Java 7 的 Rhino 是一个修改版本，它不包含该`org.mozilla.javascript.commonjs`包：

*   [http://jdk7.java.net/rhino/README.TXT](http://jdk7.java.net/rhino/README.TXT)

我想通过`javax.script`API 使用 Rhino 1.7R3 对 CommonJS 的支持，如下所示：

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript");
engine.put("markdown", markdown);
engine.eval("var html = require('./Markdown.Sanitizer').getSanitizingConverter().makeHtml(markdown);");
return (String) engine.get("html"); 
```

（我通过验证`ScriptEngineManager`我确实在使用 Rhino 1.7R3 引擎。）我想也许我可以将以下依赖项添加到类路径中

```
<dependency>
    <groupId>org.mozilla</groupId>
    <artifactId>rhino</artifactId>
    <version>1.7R3</version>
</dependency> 
```

和 CommonJS——特别是`require()`——将开始工作。但事实并非如此。当我尝试使用时，`require()`我得到

```
Caused by: sun.org.mozilla.javascript.internal.EcmaError: ReferenceError: "require" is not defined. (<Unknown source>#2)
    at sun.org.mozilla.javascript.internal.ScriptRuntime.constructError(ScriptRuntime.java:3773)
    at sun.org.mozilla.javascript.internal.ScriptRuntime.constructError(ScriptRuntime.java:3751)
    at sun.org.mozilla.javascript.internal.ScriptRuntime.notFoundError(ScriptRuntime.java:3836) 
```

如何让 Java 7 与完整版的 Rhino 1.7R3 一起工作，以便获得 CommonJS 支持？

**编辑：**我发现了以下问题，它涉及完全相同的主题：

[健全性检查：Rhino 没有 require 函数，对吧？](https://stackoverflow.com/questions/10723180/sanity-check-rhino-does-not-have-a-require-function-right)

受访者建议也许可以用 CommonJS Rhino 1.7R3 替换有限的 Rhino 1.7R3，但没有说明如何做到这一点。这就是我在这里要问的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T10:02:09.197

**编辑**：似乎你根本不需要使用 JVM 引导类加载器。Sun 已将默认的 Rhino 实现类放入

```
sun.org.mozilla.javascript.* 
```

包裹。但是您加载的 Rhino 实现将占用

```
org.mozilla.javascript.* 
```

因此它们不应该发生碰撞。但是*，如果出现问题*，您可以在引导类加载器的帮助下覆盖 JDK 中的类。你有两个选择：

基本上你需要覆盖类路径，以便你的 Rhino 类优先而不是内置类。

1.  只需将 rhino-1.7R3.jar 放入 your-JRE-path\lib\ext 即可。这样，Rhino jar 将被添加到 Java Bootsrap 类加载器中，并将在内置 JavaScript jar 之前加载。
2.  或者，如果您无权访问 ../lib/ext，您可以使用命令行选项：

    ```
    -Xbootclasspath/a:path/to/rhino-1.7R3.jar 
    ```

* * *

Rhino 本身*并没有*实现 Java Scripting API。为了将 Rhino 集成到 JDK 中，Sun 已经实现了自己`ScriptEngine`的`ScriptEngineFactory`. 因此，如果您加载自己`rhino-1.7R3.jar`的脚本，您将无法使用 Common JS

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript"); 
```

相反，您有两个选择。

1.  **在 Rhino API 之上**实现您自己的*`ScriptEngine`和其他相关的类。 看看[Oracle 是如何做到](http://grepcode.com/search/?r=repository.grepcode.com%24java%24root&start=0&query=rhino&entity=type)的。但是请注意，JDK 源代码在 GPL 2 许可下，因此您应该为 Rhino 发布您的自定义脚本引擎包装器，或者仅使用这些类作为参考并且不要复制代码。`ScriptEngineFactory`*

***   *直接使用 Rhino API*。**我强烈推荐这种方法。** [Mozilla 网站上有文档和示例，](http://www.mozilla.org/rhino/doc.html)但基本 API 相对简单：

    ```
    // Execution environment for Rhino
    // there should be only one context in a giver thread
    Context cx = Context.enter();
    // Object.prototype, Function prototype, etc.
    Scriptable scope = cx.initStandardObjects();

    // Execute script from a given java.io.Reader
    Object result = cx.evaluateReader(scope, reader, 0, null);
    // If returning result isn't sufficient for your needs
    // you can do something like this:
    Object someVar = scope.get("someVar");

    // Don't forget to close the context when you're done
    Context.exit(); 
    ```** 

 *** * *

或者，我可以为您提供一些仅限 JS 的解决方案。

1.  看看[Browserify](https://github.com/substack/node-browserify)。它是一个 JavaScript 预处理器，它将您的源代码组合成一个包。
2.  重写您的模块，以便它们使用[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)或[UMD](https://github.com/umdjs/umd)，然后将它们与[r.js 工具](https://github.com/jrburke/r.js)结合使用。

这两个选项都要求您在构建过程中添加一个 js 预处理步骤，这可能会使调试代码有点困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T16:28:07.693

这个问题很老，但对于那些来自谷歌的人来说，你可以使用以下方法在 Rhino 中设置 CommonJS 支持（以下只是一种方法）：

（我只是直接调用 Rhino，而不是使用 Java 的 Scripting API）

```
List<URI> paths = Arrays.asList(new URI[] { new File("js/require/paths/here").toURI() });
Context ctx = Context.enter();
Scriptable scope = ctx.initStandardObjects();

new RequireBuilder()
    .setModuleScriptProvider(new SoftCachingModuleScriptProvider(
        new UrlModuleSourceProvider(paths, null)))
    .setSandboxed(true)
    .createRequire(ctx, scope)
    .install(scope);

//
// now you can ctx.evaluateString(...) and use require()
//

Context.exit(); 
```

现在你可能有两个文件：

### main.js

```
require('require-test.js')() 
```

### 需要-test.js

```
module.exports = function() {
    java.lang.System.out.println('The CommonJS require function works!')
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T05:37:29.913

如果您使用`Gradle`构建系统。我通过在项目 gradle 文件中添加此依赖项成功解决了此问题。（基于[这里](https://mvnrepository.com/artifact/org.mozilla/rhino/1.7.10)）

`compile group: 'org.mozilla', name: 'rhino', version: '1.7.10'`

并且您必须在您的 java 类文件中将导入的包名称替换为`sun.org.mozilla.javascript.internal`to 。`org.mozilla.javascript`

```
// import sun.org.mozilla.javascript.internal.NativeObject; // <=== Do not use this package.
import org.mozilla.javascript.NativeObject;

import javax.script.Invocable;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException; 
```

一切正常。**

# jquery - 加载时在 SimpleTip 插件中显示工具提示

> ID：11080039
> 
> 赞同：0
> 
> 时间：2012-06-18T09:23:34.243
> 
> 标签：jquery, show, onload, simpletip

我正在使用 SimpleTip 插件在我的站点中显示弹出消息。我想在页面加载时立即显示文本，而不是在悬停或单击事件上。有没有办法做这样的事情？我尝试使用 show()，假设它可以工作，但无法使其工作。

```
$("#myDiv").simpletip({ 
    fixed: true, 
    position: 'bottom'
}).show(); 
```

有谁知道它有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:54:54.310

make sure for insert these tags in head:

```
<link href="code.css" rel="stylesheet" type="text/css" />
<link href="simpletip.css" rel="stylesheet" type="text/css" />
<script src="jquery.js" type="text/javascript"></script>
<script src="jquery.simpletip-1.3.1.min.js" type="text/javascript"></script>
<script src="jquery.simpletip-1.3.1.pack.js" type="text/javascript"></script> 
```

its worked.

# windows - 使用模式匹配删除当前目录中的所有文件夹

> ID：11080041
> 
> 赞同：1
> 
> 时间：2012-06-18T09:23:38.143
> 
> 标签：windows, batch-file

我需要删除当前目录中以“foo”开头的所有文件夹，然后是日期
，例如我们有

1.  foo20120620
2.  foo20120513
3.  胡闹

我可以成功删除一个与当前日期
示例匹配的文件夹

```
set FOO_FOLDER=%CD%\foo%datetimef%      

echo Y | rd /s/q %FOO_FOLDER% 
```

但我无法删除所有以 foo 开头的文件夹。

我已经尝试过类似的东西

```
set OLD_PATTERN="%CD%\foo"     
del %OLD_PATTERN%* 
```

我已经用谷歌搜索并尝试关注这个论坛中已经提出的一些问题，但这些对我没有多大帮助。

任何建议都会对我有很大帮助。
必须在 Windows 端进行批处理脚本。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T09:28:52.120

你可以使用`FOR /D`命令。

```
for /d %%p in (foo*) do rd /s /q "%%p" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:27:34.477

[dos批处理中](http://www.computerhope.com/forhlp.htm)的神奇for命令....

从命令行

```
for /f "tokens=*" %f in ('dir .\foo* /ad/b') do rd "%f" /s/q 
```

从批处理文件

```
for /f "tokens=*" %%f in ('dir .\foo* /ad/b') do rd "%%f" /s/q 
```

/f 运行括号中 '' 中的命令，并对其进行标记。通过说 tokens=* 所有文件/目录名称进入一个变量 %f

这是一个例子

```
C:\temp>md foo3

C:\temp>md foo2

C:\temp>md foo1

C:\temp>dir
 Volume in drive C is TEST
 Volume Serial Number is F47F-AAE1

 Directory of C:\temp

18/06/2012  09:42 p.m.    <DIR>          .
18/06/2012  09:42 p.m.    <DIR>          ..
18/06/2012  09:42 p.m.    <DIR>          foo1
18/06/2012  09:42 p.m.    <DIR>          foo2
18/06/2012  09:42 p.m.    <DIR>          foo3
               0 File(s)              0 bytes
               5 Dir(s)  131,009,933,312 bytes free

C:\temp>for /f "tokens=*" %f in ('dir .\foo* /ad/b') do rd "%f" /s/q

C:\temp>rd "foo1" /s/q

C:\temp>rd "foo2" /s/q

C:\temp>rd "foo3" /s/q

C:\temp>dir /ad
 Volume in drive C is TEST
 Volume Serial Number is F47F-AAE1

 Directory of C:\temp

18/06/2012  09:42 p.m.    <DIR>          .
18/06/2012  09:42 p.m.    <DIR>          ..
               0 File(s)              0 bytes
               2 Dir(s)  131,009,933,312 bytes free

C:\temp> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-27T17:37:46.710

我知道这是旧的，但我认为值得一提的是 FOR 命令创建的参数变量用字母而不是数字标识（例如 %%G），因此，为了避免参数和路径名格式之间的混淆字母，避免使用字母（a、d、f、n、p、s、t、x、z）作为 FOR 参数，或者只选择大写的 FOR 参数字母。

格式字母区分大小写，因此使用大写字母也是避免冲突的好方法，例如。%%A 而不是 %%a。

[参考](https://ss64.com/nt/syntax-args.html)

# linux - 如何知道分配给进程的最大虚拟内存量？

> ID：11080042
> 
> 赞同：0
> 
> 时间：2012-06-18T09:23:42.693
> 
> 标签：linux, memory-management, process, operating-system

我有一个进程/Linux，它很快就会耗尽内存，我想知道这可能是因为系统设置设置的每个进程允许的最大虚拟内存可能很低，在这种情况下，无论进程如何，该进程都会很快耗尽内存有多少 RAM/虚拟内存可用。

检查用户进程的最大允许内存的命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:43:18.683

您正在寻找的命令是

```
ulimit -m 
```

忘了补充，如果你在 64 位机器上，它可能会显示无限。

# javascript - 使用 Javascript 创建 onchange 事件并选择列表 ID

> ID：11080049
> 
> 赞同：0
> 
> 时间：2012-06-18T09:24:03.283
> 
> 标签：javascript, drop-down-menu, dom-events

我设法使用 Javascript 代码创建了一个动态的三个下拉列表，如下所示：

```
<html>
<head>
<script type="text/javascript">
function setOptions(chosen, selbox) {

selbox.options.length = 0;
if (chosen == " ") {
selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');
setTimeout(setOptions(' ',document.myform.optthree),5);
}
if (chosen == "1") {
selbox.options[selbox.options.length] = new Option('--Select--','11');
selbox.options[selbox.options.length] = new Option('Zone','12');
selbox.options[selbox.options.length] = new Option('Circle','13');
selbox.options[selbox.options.length] = new Option('Division','14');
selbox.options[selbox.options.length] = new Option('Sub Division','15');
selbox.options[selbox.options.length] = new Option('Section','16');
setTimeout(setOptions('11',document.myform.optthree),5);
 }
if (chosen == "2") {
selbox.options[selbox.options.length] = new Option('--Select--','21');
selbox.options[selbox.options.length] = new Option('District','22');
selbox.options[selbox.options.length] = new Option('Taluk','23');
selbox.options[selbox.options.length] = new Option('Hobli','24');
selbox.options[selbox.options.length] = new Option('Village','25');
setTimeout(setOptions('21',document.myform.optthree),5);
}
if (chosen == "11") {
selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');
 }
if (chosen == "12") {
selbox.options[selbox.options.length] = new Option('--All Zones--',' ');
selbox.options[selbox.options.length] = new Option('Mangalore','Mangalore');
}
if (chosen == "13") {
selbox.options[selbox.options.length] = new Option('--All Circles--',' ');
selbox.options[selbox.options.length] = new Option('Mangalore','Mangalore');
selbox.options[selbox.options.length] = new Option('Udupi','Udupi');
  }
if (chosen == "14") {
selbox.options[selbox.options.length] = new Option('--All Divisions--',' ');
selbox.options[selbox.options.length] = new Option('Mangalore','Mangalore');
selbox.options[selbox.options.length] = new Option('Bantwal','Bantwal');
selbox.options[selbox.options.length] = new Option('Udupi','Udupi');
selbox.options[selbox.options.length] = new Option('Kundapur','Kundapur');
}
if (chosen == "15") {
selbox.options[selbox.options.length] = new Option('--All Sub Divisions--',' ');
selbox.options[selbox.options.length] = new Option('Attavara','Attavara');
selbox.options[selbox.options.length] = new Option('Mannagudda','Mannagudda');
selbox.options[selbox.options.length] = new Option('Bantwal','Bantwal');
selbox.options[selbox.options.length] = new Option('Vittal','Vittala');
selbox.options[selbox.options.length] = new Option('Udupi','Udupi');
selbox.options[selbox.options.length] = new Option('Manipal','Manipal');
selbox.options[selbox.options.length] = new Option('Kundapur','Kundapur');
selbox.options[selbox.options.length] = new Option('Brahmavar','Brahmavar');
}
if (chosen == "16") {
selbox.options[selbox.options.length] = new Option('--All Sections--',' ');
selbox.options[selbox.options.length] = new Option('Section 1','Section 1');
selbox.options[selbox.options.length] = new Option('Section 2','Section 2');
selbox.options[selbox.options.length] = new Option('Section 3','Section 3');
selbox.options[selbox.options.length] = new Option('Section 4','Section 4');
selbox.options[selbox.options.length] = new Option('Section 5','Section 5');
selbox.options[selbox.options.length] = new Option('Section 6','Section 6');
selbox.options[selbox.options.length] = new Option('Section 7','Section 7');
selbox.options[selbox.options.length] = new Option('Section 8','Section 8');
selbox.options[selbox.options.length] = new Option('Section 9','Section 9');
selbox.options[selbox.options.length] = new Option('Section 10','Section 10');
selbox.options[selbox.options.length] = new Option('Section 11','Section 11');
selbox.options[selbox.options.length] = new Option('Section 12','Section 12');
selbox.options[selbox.options.length] = new Option('Section 13','Section 13');
selbox.options[selbox.options.length] = new Option('Section 14','Section 14');
selbox.options[selbox.options.length] = new Option('Section 15','Section 15');
selbox.options[selbox.options.length] = new Option('Section 16','Section 16');
}
 if (chosen == "21") {
selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');
 }
 if (chosen == "22") {
selbox.options[selbox.options.length] = new Option('--All Districts--',' ');
selbox.options[selbox.options.length] = new Option('District 1','District 1');
 }
if (chosen == "23") {
selbox.options[selbox.options.length] = new Option('--All Taluks--',' ');
selbox.options[selbox.options.length] = new Option('Taluk 1','Taluk 1');
 }
if (chosen == "24") {
selbox.options[selbox.options.length] = new Option('--All Hoblis--',' ');
selbox.options[selbox.options.length] = new Option('Hobli 1','Hobli 1');
 }
if (chosen == "25") {
selbox.options[selbox.options.length] = new Option('--All Villages--',' ');
selbox.options[selbox.options.length] = new Option('Village 1','Village 1');
}
 }
 </script>
</head>

 <body>

    <form name="myform">

  <select name="optone" onchange="setOptions(document.myform.optone.options[document.myform.optone.selectedIndex].value,document.myform.opttwo);">
  <option value=" " selected="selected"> </option>
  <option value="1">Office Heirarchy</option>
  <option value="2">Geographical Heirarchy</option>
     </select><br> <br>

   <select name="opttwo" onchange="setOptions(document.myform.opttwo.options[document.myform.opttwo.selectedIndex].value,document.myform.optthree);">
    <option value=" " selected="selected">Please select one of the options above first</option>
   </select><br> <br>

  <select name="optthree">
     <option value=" " selected="selected">Please select one of the options above first</option>
   </select><br> <br>

    </form>

  </body>
    <html> 
```

它工作正常。现在我想将`onchange`事件和**id**添加到第三个下拉列表中。即，对于区域列表，id 是 id1，`onchange`函数是 function(f1)，对于圆形列表，id 是 id2，`onchange`函数是 function(f2)，依此类推。任何人都请帮助我使用 Javascript 添加此 ID 和功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:24:49.277

似乎实际的答案是

```
document.getElementsByName("optthree")[0].onchange=function() { changeMap4(this.value)} 
```

和

```
document.getElementsByName("optthree")[0].id=".." 
```

对于我在等待信息时所做的其他事情，请看这里：

Struggling a little bit with the resetting of the selects when a select up the chain was changed. 也许在我可以递归的地方需要重写，但我不能很好地递归；）

[小提琴](http://jsfiddle.net/mplungjan/mhj4p/)

```
var sels = [
  { text:"Please select",value:"",subs:[]},
  { text:"Office Hierarchy",
    value:1,
    subs: [
          { text:'--Select--', value:'11', subs:[{ text:'Please select one of the options above first', value:' '}]},
          { text:'Zone', value:'12', 
            subs:[ 
              { text:'--All Zones--', value:' '},
              { text:'Mangalore', value:'Mangalore'}
              ]
          },
          { text:'Circle', value:'13', 
            subs:[
              { text:'--All Circles--', value:' '},
              { text:'Mangalore', value:'Mangalore'},
              { text:'Udupi', value:'Udupi'}
              ]
          },
          { text:'Division', value:'14', 
            subs:[              
              { text:'--All Divisions--', value:' '},
              { text:'Mangalore', value:'Mangalore'},
              { text:'Bantwal', value:'Bantwal'},
              { text:'Udupi', value:'Udupi'},
              { text:'Kundapur', value:'Kundapur'}
            ]
          },
          { text:'Sub Division', value:'15',
            subs:[
              { text:'--All Sub Divisions--', value:' '},
              { text:'Attavara', value:'Attavara'},
              { text:'Mannagudda', value:'Mannagudda'},
              { text:'Bantwal', value:'Bantwal'},
              { text:'Vittal', value:'Vittala'},
              { text:'Udupi', value:'Udupi'},
              { text:'Manipal', value:'Manipal'},
              { text:'Kundapur', value:'Kundapur'},
              { text:'Brahmavar', value:'Brahmavar'}              
            ]
          },
          { text:'Section', value:'16',
            subs:[
              { text:'--All Sections--', value:' '},
              { text:'Section 1', value:'Section 1'},
              { text:'Section 2', value:'Section 2'},
              { text:'Section 3', value:'Section 3'},
              { text:'Section 4', value:'Section 4'},
              { text:'Section 5', value:'Section 5'},
              { text:'Section 6', value:'Section 6'},
              { text:'Section 7', value:'Section 7'},
              { text:'Section 8', value:'Section 8'},
              { text:'Section 9', value:'Section 9'},
              { text:'Section 10', value:'Section 10'},
              { text:'Section 11', value:'Section 11'},
              { text:'Section 12', value:'Section 12'},
              { text:'Section 13', value:'Section 13'},
              { text:'Section 14', value:'Section 14'},
              { text:'Section 15', value:'Section 15'},
              { text:'Section 16', value:'Section 16'}
            ]
          }
       ]              
   },
  { text:"Geographical Heirarchy",
    value:2,
    subs: [
      { text:'--Select--', value:'21', subs:[{ text:'Please select one of the options above first', value:' '}]},
      { text:'District', value:'22',
        subs:[
          { text:'--All Districts--', value:' '},
          { text:'District 1', value:'District 1'}
        ]
      },
      { text:'Taluk', value:'23',
        subs:[
          { text:'--All Taluks--', value:' '},
          { text:'Taluk 1', value:'Taluk 1'}                
        ]
      },
      { text:'Hobli', value:'24',
        subs:[
          { text:'--All Hoblis--', value:' '},
          { text:'Hobli 1', value:'Hobli 1'}
        ]
      },
      { text:'Village', value:'25',
        subs:[
          { text:'--All Villages--', value:' '},
          { text:'Village 1', value:'Village 1'}
        ]
      }
    ]
  }
]; 
```

# mysql - Mysql：ALTER TABLE 和外键

> ID：11080056
> 
> 赞同：2
> 
> 时间：2012-06-18T09:24:25.410
> 
> 标签：mysql

我正在尝试做

```
ALTER table tbl_name Engine=MyISAM; 
```

我得到

```
ERROR 1217 (23000): Cannot delete or update a parent row: a foreign key constraint fails 
```

如何在不删除具有外键的表的情况下执行上述查询？

先感谢您！

**我是否正确理解**UPD**`MyIsam`仅支持全文搜索？**

 *** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T23:57:19.377

`SET FOREIGN_KEY_CHECKS = 0;`没有帮助。

如果有其他 InnoDB 表包含对要转换为 MyISAM 的表的外键引用，则必须手动删除外键。另请参阅[MySQL 网站上的这篇文章](http://bugs.mysql.com/bug.php?id=12555)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T09:26:24.453

尝试

```
SET FOREIGN_KEY_CHECKS = 0;
ALTER table tbl_name Engine=MyISAM;
SET FOREIGN_KEY_CHECKS = 1; 
```

> InnoDB 存储引擎支持检查外键约束。**对于InnoDB 以外**的存储引擎，MySQL Server 解析 CREATE TABLE 语句中的 FOREIGN KEY 语法，但不使用或存储它。

[外键差异](http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html)**

# iphone - 检索数组中字符串的子字符串

> ID：11080057
> 
> 赞同：0
> 
> 时间：2012-06-18T09:24:25.550
> 
> 标签：iphone

我是 iphone 新手。我有一个数组，其中包含如下对象

```
"04_Num/04Num001.mp3",
"04_Num/04Num002.mp3",
"04_Num/04Num003.mp3",
"04_Num/04Num004.mp3",
"04_Num/04Num005.mp3",
"04_Num/04Num006.mp3",
"04_Num/04Num007.mp3",
"04_Num/04Num008.mp3",
"04_Num/04Num009.mp3",
"04_Num/04Num010.mp3",
"04_Num/04Num011.mp3",
"04_Num/04Num012.mp3",
"04_Num/04Num013.mp3",
"04_Num/04Num014.mp3",
"04_Num/04Num015.mp3",
"04_Num/04Num016.mp3",
"04_Num/04Num017.mp3",
"04_Num/04Num018.mp3",
"04_Num/04Num019.mp3",
"04_Num/04Num020.mp3",
"04_Num/04Num021.mp3",
"04_Num/04Num022.mp3",
"04_Num/04Num023.mp3",
"04_Num/04Num024.mp3",
"04_Num/04Num025.mp3",
"04_Num/04Num026.mp3",
"04_Num/04Num027.mp3",
"04_Num/04Num028.mp3",
"04_Num/04Num029.mp3",
"04_Num/04Num030.mp3",
"04_Num/04Num031.mp3",
"04_Num/04Num032.mp3",
"04_Num/04Num033.mp3",
"04_Num/04Num034.mp3",
"04_Num/04Num035.mp3",
"04_Num/04Num036.mp3" 
```

但在这里我只想在 / （即）之后检索字符串（对象），例如 04_Num/04Num033.mp3 在这个我只想要字符串 04Num033.mp3。像以上所有内容一样，然后我必须放在一个数组中

如果有人知道这怎么可能，请帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:29:07.797

`lastPathComponent`是你需要的。你可以这样做：

```
NSMutableArray *files = [[NSMutableArray alloc] initWithCapacity:0];
for (NSString *file in songs) //Where songs is the array with the paths you have provided
{
    [files addObject:[file lastPathComponent]];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T09:33:53.540

您可以使用 NSString 将字符串分成两部分

> 组件SeparatedByString：

方法，并使用最后一个字符串组件

```
// Let's call your array of strings as stringsArray
NSMutableArray *prefixStrings = [[NSMutableArray alloc] init];

for (NSString *str in stringsArray) {
    NSArray *stringComponents = [str componentsSeparatedByString:@"/"];
    if ([stringComponents count]) {
        [prefixStrings addObject:[stringComponents objectAtIndex:1]];
    } } 
```

# php - 如何摆脱主题窃取者？

> ID：11080065
> 
> 赞同：0
> 
> 时间：2012-06-18T09:24:50.873
> 
> 标签：php, javascript, jquery, html, obfuscation

所以基本上我正在为 Themeforest 创建 wordpress 主题，并且我想摆脱主题窃取者。我需要想法如何做到这一点，我有一个计划，但我不确定实现它的最佳解决方案是什么（让用户远离它或至少让它尽可能难）。这个想法是这样的，在安装主题后，它会在某处添加一个计数器，并说如果您不输入购买代码，您的主题将在 x 天后被阻止。如果他们输入购买代码并且它是有效的（将通过API验证），那么关于阻止的通知将消失并且脚本将被删除，否则如果他们不输入购买代码主题将被阻止。我可以做阻塞的事情 ec，但我需要一个建议，如何让用户尽可能难地删除这个功能？如果我将在其中一个主题文件中添加该行，

那么有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:29:56.823

因为 WP 模板是开源的，所以没有办法做到这一点。无论您做什么，他们都将能够打开完全相同的文件并撤消您所做的任何事情。此外，阻止某些东西比移除它更难。

您可以尝试对其进行 base64 编码，但同样，他们将能够撤消您所做的任何事情。

我不是 WP 的粉丝，也没有太多经验；但是，我建议为每个模板设置一个演示站点。如果人们需要能够“测试”管理界面，请设置一个模块，在其中删除所有模板设置，这样他们就无法获取文件。

长话短说; 当开源文件从一个封闭的环境转移到他们自己的环境中时，你就会失去所有类型的控制。

# java - 插入和选择阿拉伯语数据 Android SQLite

> ID：11080067
> 
> 赞同：5
> 
> 时间：2012-06-18T09:24:56.027
> 
> 标签：java, android, database, sqlite, arabic

我正在尝试在 android 应用程序中创建**阿拉伯语数据库**，并想看看如何实现这一目标？

我知道我将不得不进行编码和其他工作。但我想知道是否有人真的试图创建非英语数据库并帮助我做最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:33:03.670

因此，创建`SQLite`最佳方法是使用`SQLiteOpenHelper`并创建您自己的类，该类扩展自`SQLiteOpenHelper`、实现`onCreate()`、方法和`onUpgrade()`方法。

**示例如何创建数据库：**

```
public class DatabaseHandler extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "basic_login_system_database";
    protected static final String USER_TABLE_NAME = "User";
    protected static final int DATABASE_VERSION = 1;

    protected static final String KEY_ID = "id";
    protected static final String KEY_NAME = "name";
    protected static final String KEY_SURNAME = "surname";
    protected static final String KEY_PASSWORD = "password";
    protected static final String KEY_EMAIL = "email";
    protected static final String KEY_ADDRESS = "adress";
    protected static final String KEY_AGE = "age";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }       

    public void onCreate(SQLiteDatabase db) {
        String CREATE_USER_TABLE = "CREATE TABLE " + USER_TABLE_NAME + "("
                + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                + KEY_NAME + " TEXT NOT NULL, "
                + KEY_SURNAME + " TEXT NOT NULL, "
                + KEY_PASSWORD + " TEXT NOT NULL, "
                + KEY_EMAIL + " TEXT UNIQUE NOT NULL, "
                + KEY_ADDRESS + " TEXT, "
                + KEY_AGE + " TEXT" + ")";
        db.execSQL(CREATE_USER_TABLE);
    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        String DELETE_USER_TABLE = "DROP TABLE IF EXISTS " + USER_TABLE_NAME;
        db.execSQL(DELETE_USER_TABLE);
        onCreate(db);       
    }
} 
```

并且您必须为`Arabic`字符设置编码，因为它隐式设置为`utf-8`.

`private static final String ENCODING_SETTING = "PRAGMA encoding ='windows-1256'";`

你在你的`onOpen()`方法中设置它。

```
@Override
public void onOpen(SQLiteDatabase db) {
   if (!db.isReadOnly()) {
      db.execSQL(ENCODING_SETTING);
   }
} 
```

然后，从数据库中检索数据只需使用`Cursor`with 方法`rawQuery()`或`query()`.

**例子：** `Cursor c = db.raQuery(SELECT_STATEMENT, null);`

对于插入数据的使用`insert()`方法`SQLiteDatabase`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:08:24.997

如果我将文件保存为 UTF-8 并正常写入阿拉伯数据，我可以从 eclipse 中做到这一点而无需编码。

# java - Ajax 下拉菜单在移动设备中不起作用

> ID：11080070
> 
> 赞同：0
> 
> 时间：2012-06-18T09:25:06.990
> 
> 标签：java

在我的 Java spring 应用程序中，我有一个带有 Region 下拉列表的表单。在选择特定区域城市列表时使用 ajax 填充。此功能在 Web 浏览器中运行良好。但不适用于 iPhone 或 Android 手机。第二个下拉列表未填充。这种问题有什么解决办法吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:30:13.713

我所有的赌注都放在与移动浏览器不兼容的 Javascript 代码上。或者在那里禁用Javascript。

# android - 将序列化对象作为文件存储到 sdcard 中导致 FileNotFoundException

> ID：11080071
> 
> 赞同：1
> 
> 时间：2012-06-18T09:25:09.953
> 
> 标签：android, serialization, filenotfoundexception, objectoutputstream

我想序列化一个对象并将其存储`sdcard`在我的项目名称下，但我得到`FileNotFoundException`.

我的代码写在下面：

```
FileOutputStream fileOutputStream = null;
ObjectOutputStream objectOutputStream = null;

File dir = new File(Environment.getExternalStorageDirectory(), FILE_LOCATION + username);

try {
    if(!dir.exists()) {
        dir.mkdirs();
    }
    File file = new File(dir, FILE_NAME);
    fileOutputStream = new FileOutputStream(file);
    objectOutputStream = new ObjectOutputStream(fileOutputStream);
    objectOutputStream.writeObject(formList);
    objectOutputStream.close();
} catch(IOException ioException) {
    ioException.getMessage();
} catch (Exception e) {
    e.getMessage();
} 
```

这个问题的原因是什么？
我在模拟器中运行，我的应用程序在 android 3.0 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:33:24.303

如果我错了，请纠正我，但是您不必在写入文件之前创建文件吗？

```
File file = new File(dir, FILE_NAME);
if (!file.exists()) {
    file.createNewFile();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:51:29.223

我怀疑您的文件名无效，也许是 . 在目录中？或文件名其自身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T13:21:26.127

我想分享我的解决方案，因为我从 Stackoverflow 获得了很多关于这个问题的帮助（通过搜索以前的答案）。我的解决方案经过几个小时的搜索和拼凑解决方案。我希望它可以帮助某人。

这将在外部存储中写入和读取自定义对象的 ArrayList。

我有一个为我的活动和其他课程提供 IO 的课程。警报是我的自定义类。

```
@SuppressWarnings("unchecked")
public static ArrayList<Alarm> restoreAlarmsFromSDCard(String fileName,
        Context context) {

FileInputStream fileInputStream = null;

ArrayList<Alarm> alarmList = new ArrayList<Alarm>();//Alarm is my custom class
//Check if External storage is mounted
if (Environment.getExternalStorageState() != null) {
File dir = new File(Environment.getExternalStorageDirectory(),
                "YourAppName/DesiredDirectory");

try {
if (!dir.exists()) {
Log.v("FileIOService", "No Such Directory Exists");
}
File file = new File(dir, fileName);
fileInputStream = new FileInputStream(file);
ObjectInputStream ois = new ObjectInputStream(fileInputStream);
alarmList = (ArrayList<Alarm>) ois.readObject();
ois.close();
} catch (Exception e) {
e.printStackTrace();
}
} else {
//Do something here to warn user
}

return alarmList;
}

public static void saveAlarmsToSDCard(String fileName, ArrayList<Alarm>     alarmList,Context context) {
FileOutputStream fileOutputStream = null;
ObjectOutputStream objectOutputStream = null;

if (Environment.getExternalStorageState() != null) {
File dir = new File(Environment.getExternalStorageDirectory(),
                "YourAppName/DesiredDirectory");

try {
if (!dir.exists()) {
dir.mkdirs();
}
File file = new File(dir, fileName);
fileOutputStream = new FileOutputStream(file);
objectOutputStream = new ObjectOutputStream(fileOutputStream);
objectOutputStream.writeObject(alarmList);
objectOutputStream.close();
} catch (IOException ioException) {
ioException.getMessage();
} catch (Exception e) {
e.getMessage();
}
}else{
//Do something to warn user that operation did not succeed
}

} 
```

# javascript - 比“类似回调的行为”更好的解决方案

> ID：11080072
> 
> 赞同：1
> 
> 时间：2012-06-18T09:25:12.010
> 
> 标签：javascript, jquery, callback, tablefilter

我使用 jquery picnet 表过滤器 - [http://www.picnet.com.au/picnet-table-filter.html](http://www.picnet.com.au/picnet-table-filter.html)

我需要显示当前可见的行数，所以我需要对每个过滤事件做出反应。

有两个选项应该用作回调 - 过滤行和过滤行。

但是，我尝试了这两种方法，但都没有成功。我只是偶尔触发了回调函数。最后我有一个可行的解决方案 -

```
$('#myTable .filters').change(function(){ setTimeout( 'load_num_rows()', 500 ) })
                               .keyup(function(){ setTimeout( 'load_num_rows()', 500 ) }); 
```

困扰我的是，这个解决方案显然不是回调。这是等待 500 毫秒过滤完成，但如果会有很多行并且过滤需要超过 500 毫秒，那么我不会得到正确的结果。

我尝试的是

```
$('#tb_list_reports').tableFilter({filteredRows: function(){ 'load_num_rows()' }}); 
```

和

```
$('#tb_list_reports').tableFilter({filteredRows: function(){setTimeout( 'load_num_rows()', 500 )}}); 
```

与选项过滤行相同。它们都不起作用，行数没有更新。我已经尝试过 console.log() ，当我过滤行时它​​们似乎甚至没有被触发，而且当我设置了这些选项时，我得到了一些奇怪的行为 - 有时我重新加载页面，没有过滤设置但我在第三次重新加载之前不会显示任何内容。

你对我应该尝试什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:54:31.533

这对我有用：

```
filteredRows: function(filterStates) {
    running_total = $("#assets tbody tr").filter(":visible").length;
    $("#total_rows_returned").html(running_total);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:24:45.383

这可能是您正在寻找的回调：`$('#myTable').tableFilterRefresh();`

# java - 异步路由和参数传递

> ID：11080076
> 
> 赞同：0
> 
> 时间：2012-06-18T09:25:33.883
> 
> 标签：java, apache-camel

```
from(routeA)
.process(new Processor() {
    public void process(Exchange exchange) throws Exception {
        //Point X
        int requestId = logRequestToDatabase(exchange.getIn().getBody(String.class));
        // need to use this requestId at point Y and Z..
    }
})
.wireTap(routeT)
.to(routeB)
.process(new Processor() {
    public void process(Exchange exchange) throws Exception {
        //Point Y
        // i need the requestId from X here to mark it to log the response to database...
    }
});
from(routeT)
.to(routeC)
.process(new Processor() {
    public void process(Exchange exchange) throws Exception {
        //Point Z
        // i need the requestId from X here to mark it to log the response to database...
    }
}); 
```

我需要点 X 是异步的。我希望`requestId`X 点中所示的在 Y 和 Z 中可用。这是因为，记录到数据库需要时间，我希望它是异步的，这样它就不会影响性能。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:45:32.460

我假设 logRequestToDatabase 是一个方法，因此您可以在该方法中实现代码以运行异步，因此 Camel 进程方法可以继续。如果 Y 点和 Z 点需要访问 logRequestToDatabase 调用的结果，您可以为此使用 JDK Future。

# ios - 模拟 iOS 中的方向变化以进行测试

> ID：11080077
> 
> 赞同：8
> 
> 时间：2012-06-18T09:25:36.340
> 
> 标签：ios, testing, ui-automation, ios-ui-automation, kif-framework

我想测试我的应用处理方向变化（纵向/横向）的能力。我目前正在使用[KIF](https://github.com/square/KIF/)，据我所知，它无法做到这一点。有没有办法以编程方式为 iOS 模拟器模拟旋转事件？

我不在乎它是否是一些未记录的私有 API 或 hack，因为它只会在测试期间运行，不会成为生产构建的一部分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T08:25:10.467

这是实现此目的的步骤：

```
+ (KIFTestStep*) stepToInterfaceOrientation: (UIInterfaceOrientation) toInterfaceOrientation {

    NSString* orientation = UIInterfaceOrientationIsLandscape(toInterfaceOrientation) ? @"Landscape" : @"Portrait";
        return [KIFTestStep stepWithDescription: [NSString stringWithFormat: @"Rotate to orientation %@", orientation]
                             executionBlock: ^KIFTestStepResult(KIFTestStep *step, NSError *__autoreleasing *error) {
                                 if( [UIApplication sharedApplication].statusBarOrientation != toInterfaceOrientation ) {
                                     UIDevice* device = [UIDevice currentDevice];
                                     SEL message = NSSelectorFromString(@"setOrientation:");

                                     if( [device respondsToSelector: message] ) {
                                         NSMethodSignature* signature = [UIDevice instanceMethodSignatureForSelector: message];
                                         NSInvocation* invocation = [NSInvocation invocationWithMethodSignature: signature];
                                         [invocation setTarget: device];
                                         [invocation setSelector: message];
                                         [invocation setArgument: &toInterfaceOrientation atIndex: 2];
                                         [invocation invoke];
                                     }
                                 }

                                 return KIFTestStepResultSuccess;
                             }];
} 
```

注意：请将您的设备平放在桌子上，否则加速度计更新会将视图旋转回来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T11:47:47.910

要在 UI 自动化中模拟方向更改，您可以使用 UIATarget 的 setDeviceOrientation 方法。例子：

```
UIATarget.localTarget().setDeviceOrientation(UIA_DEVICE_ORIENTATION_LANDSCAPELEFT); 
```

方法需要一个参数'deviceOrientation'常量。更多信息[在这里](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIATargetClassReference/UIATargetClass/UIATargetClass.html)

这 100% 可以在真正的 iOS 设备上运行。我不确定模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:51:56.270

我不知道“以编程方式”是什么意思，但如果您使用苹果提供的 UIAutomation 库以及 Instruments 应用程序的自动化模板，您可以模拟 iPhone 支持的不同方向。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-25T23:33:55.393

为什么以编程方式进行？模拟器完全符合您的要求，它测试应用程序处理方向变化的能力。

在模拟器中，使用顶部菜单 Hardware > Rotate Left / Right 或按住 Command 并使用左右箭头。

# linq - Linq to entity：更新创建新行

> ID：11080085
> 
> 赞同：1
> 
> 时间：2012-06-18T09:26:06.453
> 
> 标签：linq, entity-framework, linq-to-entities

我在使用 Linq 更新我的数据库到实体时遇到问题。

我有 2 个实体：消息和作者 我的应用程序检查 Web 服务并从服务中提取消息和作者。

我的数据库中可能已经存在消息和作者，因此我检查重复项。

这对作者很有效。添加新作者，更新现有作者。

但是，这些消息给了我一个奇怪的问题。一条消息与作者有明显的关系，所以我通过调用 Message.Author = Author; 将作者添加到我的消息中。其中作者是我上一步中的新作者或更新作者。

显然，一旦我这样做，稍后在我的代码调用中提交更改，实体框架/linq 决定将此新消息添加到数据库，即使我没有对提及对象进行任何调用。它可能是因为与它相关的作者。

谁能给我一个正确的伪代码方法或使用 Linq 插入/更新作者和消息到实体的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:14:49.527

EF 总是处理对象图中的所有实体。如果您已`Author`附加到 EF 上下文并将该作者实例分配给分离的`Message`实例，则 EF 会将其检测为对象图中的新实体。您必须通过更改其状态告诉 EF 该实体不是新实体而是存在的。

```
if (IsNewAuthor(author)) {
   context.Add(author); 
} else {
   context.Attach(author);
   context.ObjectStateManager.ChangeObjectState(author, EntityState.Modified);
}

message.Author = author;
context.ObjectStateManager.ChangeObjectState(message, EntityState.Unchanged);
context.SaveChanges(); 
```

# c# - ObjectStateManager 中已存在具有相同键的对象。使用 AsNoTracking 时

> ID：11080089
> 
> 赞同：1
> 
> 时间：2012-06-18T09:26:19.413
> 
> 标签：c#, entity-framework

SO中有很多错误，但我认为这种情况有所不同。

我有一些运行良好的代码，我更新了一个实体等。但问题是它正在被缓存，当我用 AsNoTracking() 禁用缓存时，它开始抛出这个异常；

我所做的如下： 1\. 在页面中我得到一个 EcoBonusRequest。2\. 用户点击一个按钮并修改当前状态属性，并将一个列表项添加到工作流历史集合（ecobonusrequest 对象的关联集合）中。3.我调用udpate方法，设置状态为修改，这里抛出异常。

这是我的代码>

**EcoBonusRequestRepository.cs**

```
public void UpdateEcoBonusRequest(EcoBonusRequest ecoBonusRequest)
            {
                _context.EcoBonusRequests.Attach(ecoBonusRequest);
                _context.Entry(ecoBonusRequest).State = EntityState.Modified;
            } 
```

**EcoBonusRequestBL**

```
public void Update(EcoBonusRequest ecoBonusRequest)
        {
            DALFacade.UpdateEcoBonusRequest(ecoBonusRequest);
        } 
```

**生态红利请求页面**

```
public void ChangeStatus(EcoBonusRequest ecoBonusRequest, string stepname, string who, string choosenoption)
        {

            ecoBonusRequest.WorkflowHistories = new List<WorkflowHistory>
                                                   {
                                                       new WorkflowHistory()
                                                           {
                                                               Date = DateTime.Now,
                                                               What = choosenoption,
                                                               StepName = stepname,
                                                               Who = who
                                                           }
                                                   };

            ecoBonusRequest.CurrentStatus = _currentStepBlo.StepName;
            var ecoBonusRequestBL = new EcoBonusRequestBL();
            ecoBonusRequestBL.Update(ecoBonusRequest);
        } 
```

这就是我首先获取对象的方式：（我不会在此处粘贴所有层的所有代码）

```
protected override void OnInit(EventArgs e)
        {
            var requestBaseId = RequestBaseId;
            if (requestBaseId != null)
            {
                EcoBonusRequest request = GetDBRequest(requestBaseId.Value); 
```

在达尔

```
public IQueryable<EcoBonusRequest> FindEcoBonusRequests(System.Linq.Expressions.Expression<Func<EcoBonusRequest, bool>> predicate)
            {
                return _context.EcoBonusRequests.AsNoTracking().Where(predicate);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:14:35.987

是的，这是一个有趣的问题，这里的问题来自尝试重新附加一个已经附加到上下文的实体。这可能来自逻辑错误，或者您可能在未清除附加对象的情况下重用上下文。数据库上有一个本地集合，您可以使用它来查看当前附加到上下文的项目。

```
ctx.YourEntityCollection.Local 
```

# ios - dismissViewControllerAnimated VS popViewControllerAnimated

> ID：11080091
> 
> 赞同：31
> 
> 时间：2012-06-18T09:26:29.617
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

我想知道他们有什么不同。我什么时候可以打电话

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

我什么时候应该打电话

```
[self.navigationController popViewControllerAnimated:YES]; 
```

根据苹果的文档：dismissViewControllerAnimated 的意思是“关闭接收者呈现的视图控制器”。但是我总是无法通过这种方法关闭视图控制器。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-18T09:31:57.347

**-dismissViewControllerAnimated：完成：**

用于关闭`UIViewController`由方法呈现的 :

`-presentViewController:animated:completion:`.

**-popViewController动画：**

方法`UINavigationController`用于弹出一个控制器，如下所示

`-pushViewController:animated`的方法`UINavigationController`。

在第一种情况下，视图控制器的视图显示为模态控制器（通常从下到上），而在第二种情况下，您将视图控制器推送到`UINavigationController`.

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-18T09:31:32.313

您选择的应用程序是基于导航的应用程序方式

```
[self.navigationController popViewControllerAnimated:YES]; 
```

您选择的应用程序不是基于导航的应用程序方式

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# php - 在我的代码中动态填充选择

> ID：11080096
> 
> 赞同：0
> 
> 时间：2012-06-18T09:26:39.717
> 
> 标签：php, jquery, json

我是 json n php 的新手。
使用下面的代码获取单选按钮复选框和带有 json 的文本框的数据。它工作正常，但我不知道如何以相同的方式在选择框中填充数据。

```
function get_input_value(name, rval) {

    //console.log(name + ' && ' + rval);
    var i = 0;
    var chk = $('input[name="' + name + '"]');
    while (i < chk.length) {
        //console.log($(chk[i]));
        if ($(chk[i]).val() == rval) {
            //console.log('loopvalue => ' + i);
            $(chk[i]).prop('checked', true);
            }
            i++;
        }
}

function loadJson (table, id) {

    $.get("json-object.php", {'table': table, 'id':id}, function (data) {

        console.log(data);

        $.each(data, function (k, v) {
            if ($('input[name="'+k+'"]').is('input[type="text"]')) {
                $('input[name="'+k+'"]').val(v);
            } 
            if ($('select[name="'+k+'"]').is('input[type="radio')) {
                get_input_value(k,v);

            } 
            if ($('input[name="'+k+'"]').is('input[type="checkbox"]')) {
                get_input_value(k,v);
            } 
         console.log(k+' ==> '+v);  
        });
    }, 'json');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:40:26.347

您的代码只是设置文本框的值并根据 PHP 输出自动选择某些复选框。

要让它在下拉列表中自动设置正确的项目，您需要更改此错误代码：

```
if ($('select[name="'+k+'"]').is('input[type="radio')) {
    get_input_value(k,v);
} 
```

对此：

```
$('select[name="'+k+'"]').val(v); 
```

（没有必要检查类型，`<select>`因为它没有）

# extjs4 - Sencha SDK Tools 没有缩小 app-all.js

> ID：11080097
> 
> 赞同：1
> 
> 时间：2012-06-18T09:26:39.820
> 
> 标签：extjs4, extjs, minify

我在 Windows 7 64 位中使用 Sencha SDK Tools **2 Beta 3**和 ExtJS 4.0.7。
构建项目后，**app-all.js**文件**未缩小**。

这是**.JSB3**文件（由 Sencha 生成）：

```
{
    "projectName": "Project Name",
    "licenseText": "Copyright(c) 2012 Company Name",
    "builds": [
        {
            "name": "All Classes",
            "target": "all-classes.js",
            "options": {
                "debug": true
            },
            "files": [
                // All Classes
            ]
        },
        {
            "name": "Application - Production",
            "target": "app-all.js",
            "compress": true,
            "files": [
                {
                    "path": "",
                    "name": "all-classes.js"
                },
                {
                    "path": "",
                    "name": "app.js"
                }
            ]
        }
    ],
    "resources": []
} 
```

和 Sencha**导致**命令提示符：（没有错误）

```
Loaded 2 Builds

Creating the "All Classes" target as "all-classes.js"
  - 256 file(s) included in this target.
    + // All Classes
* Parse all-classes.js with options:
- debug: true
- debugLevel: 1

Creating the "Application - Production" target as "app-all.js"
- 2 file(s) included in this target.
    + all-classes.js
+ app.js
* Parse app-all.js with options:
- debug: false
- debugLevel: 1
* Compress and obfuscate app-all.js...
Copy resources...
Done building! 
```

FUI：我的文件有 Unicode 字符。

先感谢您。

**更新：（**文件夹结构，简化）

```
MyApp
  - app
  -- controller
  --- mycontroller.js
  -- model
  --- mymodel.js
  -- store
  --- mystore.js
  -- view
  --- myview.js
  - ext
  - app.js
  - index.html 
```

*（文件夹没有文件扩展名）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:09:35.470

这是关于内部错误的。
我已经在我的 JS 文件中用**“float”替换了****float**，现在它可以工作了。

# c# - protobuf-net 和重复字段

> ID：11080108
> 
> 赞同：2
> 
> 时间：2012-06-18T09:27:17.963
> 
> 标签：c#, java, protocol-buffers, protobuf-net

使用 List 作为 protobuf 中重复字段的对应项是否正确？我正在尝试这个并且总是遇到异常：

线型无效；这通常意味着您在没有截断或设置长度的情况下覆盖了文件；看到[使用 Protobuf-net，我突然得到一个关于未知线型的异常](https://stackoverflow.com/q/2152978/23354)

整个缓冲区是（第一个消息，下一个到达的附加到这个）：9 8 5 26 5 24 238 98 32 1

java protobuf 文件：

```
package XXX;

option java_package = "XXX";
option java_outer_classname = "Protos";

option optimize_for = SPEED;

message V3DDelta {
  optional int32 bid = 1;
  optional int32 bidSize = 2;
  optional int32 ask = 3;
  optional int32 askSize = 4;
}

message Request {
  optional int32 type = 1;
  optional string request = 2;
}

message Response {
  optional int32 type = 1;
  optional string response = 2;
  repeated V3DDelta v3dDelta = 3;
} 
```

和 protbuf-net 类：

```
[ProtoContract]
public class V3DDelta {
    [ProtoMember(1)]
    public double bid { get; set; }
    [ProtoMember(2)]
    public int bidSize { get; set; }
    [ProtoMember(3)]
    public double ask { get; set; }
    [ProtoMember(4)]
    public int askSize { get; set; }
}

[ProtoContract]
public class Request {
    [ProtoMember(1)]
    public int Type { get; set; }
    [ProtoMember(2)]
    public string Rq { get; set; }
}

[ProtoContract]
public class Response {
    [ProtoMember(1)]
    public int Type { get; set; }
    [ProtoMember(2)]
    public string Rsp { get; set; }
    [ProtoMember(3)]
    public List<V3DDelta> v3dDelta { get; set; }
    public Response() {
        v3dDelta = new List<V3DDelta>();
    }
} 
```

我试过 V3DDelta[] 但结果是一样的。阅读留言：

```
Response rsp = Serializer.DeserializeWithLengthPrefix<Response>(rcvstream, PrefixStyle.Base128); 
```

并在 java 中使用 writeDelimitedTo 发送消息。c# 中的缓冲区与 java 中的缓冲区完全相同。当有 na v3dDelta 字段时，一切都按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:48:01.103

是的，或者`List<T>`数组 ( `T[]`) 将适用于`repeated`. 顺便说一句，有一个工具可以从 .proto 定义中生成 protobuf-net 类。

~~您正在尝试“使用长度前缀”阅读它，但是： 9**不能**作为 varint 前缀 ( `9`，作为字段标头，表示“字段 1，固定 64 位数据”，但是：在这种情况下，它应该是*变量*）。~~

实际上，您的**任何**数据都不兼容`9`作为字段标头，因为您的定义中没有任何 64 位值作为 field `1`。您*确实*有一个`double`as field `3`，它可以很好地完成这项工作 - 但是，这将是`73`一个字段标题。

我会告诉你序列 9,8,5,... 代表什么，但是 - 我们会有：

```
9 : field 1, fixed 64-bit
    8 5 26 5 24 238 98 32 <== payload for above
1 : field 0, fixed 64-bit
    ^^ not *really* valid, but fields <= 0 generally mean "stop" - but
       frankly this is not a clean/defined/expected exit condition 
```

~~再说一遍：请检查您的数据。这看起来不像一个 protobuf 流，或者至少不是一个与您的架构匹配的流。~~

* * *

编辑：可能java writeDelimitedTo**只**包含长度，没有标题）使其在技术上不是一致的protobuf文件，但是......嗯），所以让我们调查一下：

```
int len = ProtoReader.DirectReadVarintInt32(ms); 
```

这给了我们`9`，我们还有`9`字节，所以看起来不错......

```
8 : Field 1, varint
  5 = payload of above
26 : Field 3, length-delimited
  5 = length of payload
   24 238 98 32 1 = payload of ^^^
      24 : Field 3, varint
          238, 98 = payload of ^^^ = 12654
      32 : Field 4, varint
          1 = payload of ^^^ = 1 
```

现在看起来它应该解析......调查为什么它不是......

* * *

编辑2：经过更多调试，*部分*原因是您（很抱歉）破坏了`V3DDelta`属性。您将它们定义为`int32`原型（并且字段 3 是数据中的变量），但您将它们实现为`double`... 并且`double`不是`int32`朋友。

所以：

```
[ProtoContract]
public class V3DDelta
{
    [ProtoMember(1)]
    public int bid { get; set; }
    [ProtoMember(2)]
    public int bidSize { get; set; }
    [ProtoMember(3)]
    public int ask { get; set; }
    [ProtoMember(4)]
    public int askSize { get; set; }
} 
```

然后以下工作正常：

```
using (var ms = new MemoryStream(buffer))
{
    int len = ProtoReader.DirectReadVarintInt32(ms);
    var resp = (Response)model.Deserialize(ms, null, typeof(Response), len);

    Assert.AreEqual(5, resp.Type);
    Assert.AreEqual(1, resp.v3dDelta.Count);
    Assert.AreEqual(12654, resp.v3dDelta[0].ask);
    Assert.AreEqual(1, resp.v3dDelta[0].askSize);
} 
```

从技术上讲，我*可以*让 protobuf-net 接受 a`varint`作为`double`值，但这高度表明模式并不真正匹配，所以我认为正确的做法是在这种情况下更改类型。

# javascript - 使用 WebSocket 上传大文件

> ID：11080112
> 
> 赞同：34
> 
> 时间：2012-06-18T09:27:30.910
> 
> 标签：javascript, html, websocket, large-files, fileapi

我正在尝试使用 WebSocket API 上传大文件（至少 500MB，最好达到几 GB）。问题是我不知道如何编写“发送这部分文件，释放使用的资源然后重复”。我希望我可以避免为此使用 Flash/Silverlight 之类的东西。

目前，我正在处理以下内容：

```
function FileSlicer(file) {
    // randomly picked 1MB slices,
    // I don't think this size is important for this experiment
    this.sliceSize = 1024*1024;  
    this.slices = Math.ceil(file.size / this.sliceSize);

    this.currentSlice = 0;

    this.getNextSlice = function() {
        var start = this.currentSlice * this.sliceSize;
        var end = Math.min((this.currentSlice+1) * this.sliceSize, file.size);
        ++this.currentSlice;

        return file.slice(start, end);
    }
} 
```

然后，我会使用上传：

```
function Uploader(url, file) {
    var fs = new FileSlicer(file);
    var socket = new WebSocket(url);

    socket.onopen = function() {
        for(var i = 0; i < fs.slices; ++i) {
            socket.send(fs.getNextSlice()); // see below
        }
    }
} 
```

基本上这会立即返回，bufferedAmount 不变（0），它会在尝试发送之前不断迭代并将所有切片添加到队列中；没有 socket.afterSend 可以让我正确排队，这就是我卡住的地方。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T09:47:15.263

我相信该`send()`方法是异步的，这就是它会立即返回的原因。要使其排队，您需要服务器在每个切片上传后向客户端发送一条消息；然后客户端可以决定是否需要将下一个切片或“上传完成”消息发送回服务器。

这种事情使用 XMLHttpRequest(2) 可能会更容易；它内置了回调支持，并且比 WebSocket API 得到更广泛的支持。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-27T06:08:17.760

使用 web worker 处理大文件，而不是在主线程中处理，并使用`file.slice()`.

本文帮助您处理工作人员[中](http://kongaraju.blogspot.in/2012/07/large-file-upload-more-than-1gb-using.html)的大文件。在主线程中更改 XHR 发送到 Websocket。

```
//Messages from worker
function onmessage(blobOrFile) {
 ws.send(blobOrFile);
}

//construct file on server side based on blob or chunk information. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-25T19:53:13.913

为了序列化此操作，您需要服务器在每次接收和写入切片（或发生错误）时向您发送信号，这样您可以发送下一个切片以响应**onmessage**事件，就像这样：

```
function Uploader(url, file) {
    var fs = new FileSlicer(file);
    var socket = new WebSocket(url);

    socket.onopen = function() {
       socket.send(fs.getNextSlice());
    }
    socket.onmessage = function(ms){
        if(ms.data=="ok"){
           fs.slices--;
           if(fs.slices>0) socket.send(fs.getNextSlice());
        }else{
           // handle the error code here.
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-18T10:56:55.823

**编辑：自从做出这个答案以来，网络世界、浏览器、防火墙、代理发生了很大变化。现在，使用 websockets 发送文件可以很高效地完成，尤其是在局域网上。**

Websockets 对于双向通信非常有效，尤其是当您有兴趣从服务器推送信息（最好是小的）时。它们充当双向套接字（因此得名）。

Websockets 看起来不像是在这种情况下使用的正确技术。特别是考虑到使用它们会增加与某些代理、浏览器 (IE) 甚至防火墙的不兼容性。

另一方面，上传文件只是简单地向服务器发送一个 POST 请求，文件在正文中。浏览器在这方面非常擅长，大文件的开销几乎没有。不要将 websockets 用于该任务。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-03T17:47:22.440

如果可以在服务器上运行 node.js，则可以使用[https://github.com/binaryjs/binaryjs](https://github.com/binaryjs/binaryjs)或[https://github.com/liamks/Delivery.js 。](https://github.com/liamks/Delivery.js)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-17T16:23:15.007

我认为这个socket.io项目有很大的潜力：

[https://github.com/sffc/socketio-file-upload](https://github.com/sffc/socketio-file-upload)

它支持分块上传、进度跟踪，并且看起来相当容易使用。

# jsf-2 - Primefaces 微调器 - 如何更改宽度

> ID：11080114
> 
> 赞同：9
> 
> 时间：2012-06-18T09:27:35.793
> 
> 标签：jsf-2, primefaces

如果我像下面这样更改微调器宽度，仅更改向上/向下箭头的位置-文本区域保持默认设置，我如何更改微调器的大小-包括文本区域。

```
<p:spinner id="spinnerBasic" style="width:50px;"/> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-18T09:38:04.320

Primefaces 微调器是一个由文本字段和控制元素组成的复合组件。所有这些都将在一个`<span>`.

如果您只想更改文本输入的大小，则`p:spinner`具有 size 属性：

```
<p:spinner id="spinnerBasic" size="20"..../> 
```

从[primefaces 文档](http://primefaces.org/documentation.html)中：

> size：用于确定输入元素宽度的字符数。

对应的 css 类是`ui-spinner-input`. 更改`width`此类的属性以获得所需的更改。

# python - 通过 pypi 镜像中的 pip 从索引链接安装 pinax

> ID：11080116
> 
> 赞同：0
> 
> 时间：2012-06-18T09:28:06.880
> 
> 标签：python, django, pip, pinax

我想安装 pinax 和其他依赖包

[http://pypi.pinaxproject.com](http://pypi.pinaxproject.com) 我尝试在需求文件中使用以下设置：

```
django-notification==0.1.4
django-openid==0.2.0
django-email-confirmation==0.1.3
django-mailer==0.1.0
django-announcements==0.1.0
django-pagination==1.0.5.1
django-timezones==0.1.4
django-ajax-validation==0.1.3
django-uni-form==0.6.0
template_utils==0.4p2
django-staticfiles==0.1.2

--index-url http://pypi.pinaxproject.com
--index-url http://pypi2.pinaxproject.com 
```

进而

```
pip install -r requirements.txt 
```

安装了其他软件包，但忽略了以上两行我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:32:24.253

你应该使用`--extra-index-url`：

```
--extra-index-url http://pypi.pinaxproject.com
--extra-index-url http://pypi2.pinaxproject.com 
```

`--index-url`仅当您希望替换官方 PyPI时才应使用。该参数`--extra-index-url`添加了额外的 PyPI 存储库来安装包，它仍然允许您从官方 PyPI 安装包（当然，除非您只希望使用镜像，那么`--index-url`是合适的）。

有关详细信息，请参阅[requirements.txt 文档](http://www.pip-installer.org/en/latest/requirements.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:32:51.027

`--index-url`是单值期权；每次在命令行上指定它时，前一个值都会被覆盖。

改用`--extra-index-url`：

> --extra-index-url=URL
> 除了 --index-url 之外要使用的包索引的额外 URL

从[安装文档](http://www.pip-installer.org/en/latest/usage.html#install-packages)：

> 如果你有自己的包索引和一些额外的包，你可能希望在仍然使用 PyPI 的同时指定额外的索引 URL：
> 
> $ pip install --extra-index-url [http://my.package.repo/](http://my.package.repo/) SomePackage

# android - Android是否支持log2

> ID：11080118
> 
> 赞同：5
> 
> 时间：2012-06-18T09:28:16.113
> 
> 标签：android, c, android-x86

android 支持 log2 吗？
我已经发现android不支持long double。

当我尝试编译 cdce3.c 时，我收到以下错误：

```
g++.dg/cdce3.C: In function 'void mlog2f(int)':
g++.dg/cdce3.C:87: error: 'log2f' was not declared in this scope
g++.dg/cdce3.C: In function 'void mlog2(int)':
g++.dg/cdce3.C:87: error: 'log2' was not declared in this scope
g++.dg/cdce3.C: In function 'void olog2f(int)':
g++.dg/cdce3.C:108: error: 'log2f' was not declared in this scope
g++.dg/cdce3.C: In function 'void olog2(int)':
g++.dg/cdce3.C:108: error: 'log2' was not declared in this scope 
```

* * *

部分cdce3.c源代码：

```
#define DEF_MATH_FUNC(prefix, name) NI void prefix##name##f (int x) \
{ \
  float yy = name##f ((float) x); \
  STORE_RESULT; \
} \
NI void prefix##name (int x) \
{ \
  double yy = name ((double)x); \
  STORE_RESULT; \
}
#endif
.........
DEF_MATH_FUNC (m,log2)
DEF_MATH_FUNC (o,log2) 
```

在这里找到完整的[源代码](http://code.metager.de/source/xref/NetBSD/src/external/gpl3/gcc/dist/gcc/testsuite/g++.dg/cdce3.C)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-27T17:14:35.077

你的神奇方式就在这里。我已经对其进行了测试并工作了：

```
make CXXFLAGS="-Dlog2\(x\)=\(log\(x\)/log\(2\)\)" 
```

更快的计算：

```
make CXXFLAGS="-Dlog2\(x\)=\(log\(x\)*1.4426950408889634\)" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T07:14:39.667

看起来Android默认不支持log2功能。因为我在确定此功能的源代码中找不到任何位置。

# perl - 如何解决 base.pm perl 中缺少右花括号或方括号

> ID：11080119
> 
> 赞同：0
> 
> 时间：2012-06-18T09:28:16.693
> 
> 标签：perl

```
use DateTime::Format::RFC3339;

my $format = DateTime::Format::RFC3339->new();
my $dt = $format->parse_datetime('1996-08-29T00:00:00.0000Z');
say $dt->strftime('%d-%b-%Y');  # 29-Aug-1996 
```

当我运行此脚本时，我收到以下错误：

> /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/DateTime/Locale/Base.pm 第 1 行缺少右花括号或方括号，/usr/lib/ 处的行尾语法错误perl5/site_perl/5.8.8/i386-linux-thread-multi/DateTime/Locale/Base.pm 第 1 行，在 EOF

* * *

此外是从 cpan [http://cpansearch.perl.org/src/DROLSKY/DateTime-Locale-0.45/lib/DateTime/Locale/Base.pm](http://cpansearch.perl.org/src/DROLSKY/DateTime-Locale-0.45/lib/DateTime/Locale/Base.pm)`base.pm`复制的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:45:02.977

DateTime的[当前版本](http://search.cpan.org/dist/DateTime)是 0.75， [DateTime-Format-RFC3339](http://search.cpan.org/dist/DateTime-Format-RFC3339)是 1.0.5。

要正确安装模块，请参阅[安装缺少的 Perl 模块的最简单方法是什么？](https://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module).

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-18T11:21:09.057

我将 DateTime 用于更复杂的东西。对于简单的解析/格式，我这样做：

```
use warnings;
use strict;

use Date::Parse;
use Date::Format;

my $dt = str2time('1996-08-29T00:00:00.0000Z');
print time2str('%d-%b-%Y', $dt); 
```

# objective-c - NSPreferencePane 中的 NSToolbar

> ID：11080121
> 
> 赞同：2
> 
> 时间：2012-06-18T09:28:19.467
> 
> 标签：objective-c, xcode, macos, toolbar, system-preferences

我正在尝试实现我的应用程序的设置。所以我实现了 Preference Pane 但我需要将 Toolbar 插入它。这就是我的 IB 的外观： ![国际文凭组织](../Images/57ee3f5d889bc496967b094999d0dc09.png) 这就是系统偏好设置中我的窗格的外观： ![系统偏好](../Images/6bd3f0a16c505ca578f725508dd49d43.png) 你看，我的窗口新高度 = 旧高度 - 工具栏高度。这是我第一次使用工具栏和 prefpane，你能回答使用工具栏 iside 的 prefpane 是否有任何限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T01:58:14.373

System Preferences 应用程序已经设置了一个窗口工具栏，因此您的首选项窗格中不能有工具栏。

我建议使用标签；查看 NSTabView 和 NSTabViewItem 类。

请注意，NSTabView 实际上并不需要显示选项卡（尽管我建议使选项卡对用户可见）。您可以将 NSTabView 配置为没有选项卡框架，并且仍然利用它进行面板交换。

# objective-c - 带有元素的字典和数组循环

> ID：11080126
> 
> 赞同：-1
> 
> 时间：2012-06-18T09:28:44.647
> 
> 标签：objective-c, ios

我有一个包含 10 个数组的字典，每个数组有 20 个元素。如何访问每个数组的第 18 个元素？请指点。谢谢。附加我的日志文件![在此处输入图像描述](../Images/432388344114dd4c96825adac2c04580.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:31:34.483

```
for (NSString *key in [dictionary allKeys])
{
    NSArray *menuList = [dictionary objectForKey:key];
    NSString *imageName = [menuList objectAtIndex:17];
    NSLog(@"Image Name:%@", imageName);
} 
```

看来你真正想要的是

```
NSString *imageName = [dictionary objectForKey:@"episodeImagePath"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:30:45.007

使用以下代码

```
//iterate all values
for (NSArray *arr in yourDictionary.allValues) {
    //To loop the array
    for (NSString *str in arr) {
       NSLog(@"Element %@", str);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T09:50:34.170

我认为最好采用一个对象类，这样我们就可以在一个数组中获取所有第 18 个元素

# c++ - NodeJS文件系统两次或更频繁地观察抛出事件

> ID：11080132
> 
> 赞同：3
> 
> 时间：2012-06-18T09:29:08.283
> 
> 标签：c++, events, node.js, filesystems, inotify

我正在使用以下命令在 Ubuntu 上查看我的 NodeJS 服务器的配置文件：

```
for( var index in cfgFiles ) {
    fs.watch(cfgFiles[index], function(event, fileName) {
        logger.info("======> EVENT: " + event);
        updateConfigData(fileName);
    });
} 
```

因此，每当我保存配置文件时，相同文件名的处理函数至少会收到两次“更改”事件，从而导致 updateConfigData() 被执行多次。在使用 C++/iNotify 观看配置文件时，我遇到了同样的行为。

有谁知道是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T17:26:40.737

**简短的回答：**它不是节点，文件真的被改变了两次。

**长答案**

我有一个非常相似的方法用于我的开发设置。我的管理器进程监视所有 js 源文件（如果它是开发机器）并重新启动集群上的子进程。

我没有注意这一点，因为它只是开发设置；但是在阅读了您的问题后，我看了看并意识到我有同样的行为。

我在本地计算机上编辑文件，每当我保存时，我的编辑器都会通过 sftp 更新它们。每次保存时，文件上的更改事件都会触发两次。

我检查了由 fs.watch 调用返回的 FSWatcher 对象的 listeners('change')；但它只显示我的事件处理程序一次。

然后我做了我应该先做的测试：服务器上的“touch file.js”，它只触发了一次。所以，对我来说，它不是 Node，而是 Node。但文件真的被改变了两次。当打开文件进行写入（而不是追加）时，它可能会触发更改，因为它会清空内容。然后当写入新内容时，它会第二次触发该事件。

这不会对我造成任何问题；但是如果你想阻止它，你可以在你的事件处理函数中进行奇偶控制，方法是保留每个文件的调用号，并只在偶数索引调用上做任何你做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T11:08:35.293

请参阅[我对类似问题的回复，该回复](https://stackoverflow.com/a/23309948/680668)解释了该问题是由您的编辑器在保存时对文件进行多次编辑引起的。

# c# - 使用 Sessions 进行登录控制

> ID：11080139
> 
> 赞同：0
> 
> 时间：2012-06-18T09:29:29.803
> 
> 标签：c#, asp.net, visual-studio-2008

Gooday，我想在会话中使用`<Login>`and `<asp:CreateUserWizard >`，可以吗？

我知道如何检查登录控件中的用户名和密码文本框是否应该触发会话，它应该是这样的：

```
TextBox userTextBox = (TextBox)Login1.FindControl("UserName");
TextBox userPassword = (TextBox)Login1.FindControl("Password");

if (User1.ConnAttempt(userTextBox.Text, userPassword.Text) == 1)
{
      Session["User"] = userTextBox.Text;
} 
```

此处的 ConnAttempt 方法在其他地方定义，并检查 Clients 数据库表中的指定凭据，如果存在则返回 1。 **但是在按下登录按钮后，系统如何知道实际“登录”呢？**

我应该提到我之前通过网站管理工具配置了角色和用户，由于各种原因，我现在正试图不使用（摆脱）这些工具，并且我不确定如何最快、最轻松地进行转换。非常感谢！安娜

# android - Android 服务如何更新启动它的 Activity 的 UI？

> ID：11080141
> 
> 赞同：14
> 
> 时间：2012-06-18T09:29:38.987
> 
> 标签：android, android-intent, android-activity, android-service

我是 Android 编程的新手，所以在选择设计我的应用程序的最佳方式时我面临一些一般性问题。

我想做的基本上是一个媒体播放器。我希望媒体播放器在服务上运行，因为我希望它在不显示活动时也能播放。

我的问题是，如何根据服务工作流程更新我的活动的 UI（例如，歌曲更改并且我希望显示其名称）？

我想我可以使用本地广播管理器将意图从我的服务发送到我的活动并调用 UI 更新（看起来对吗？）

但是...我希望我的服务在播放音乐时做一些事情（比如查询/更新数据库）。出于这个原因，我正在考虑在不同的进程（或线程？）上运行服务。

所以..我想，在不同的进程上运行服务，我将无法使用本地广播管理器（对吗？）。

我希望我能解释我的疑虑......有人可以帮忙吗？

多谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T12:44:16.490

在您的服务中使用异步任务来处理您需要在后台完成的工作。当您需要更新 UI 时，请使用异步任务的 progressUpdate 方法将广播发送回任何感兴趣的活动。

伪例子。

**活动**

onCreate -> startService 并创建新的广播接收器。确保覆盖 onReceive 方法并测试特定意图。

```
 mLocalBroadcastManager = LocalBroadcastManager.getInstance(this);

    broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if(intent.getAction().equals(yourActionType)) {
                //do work here
            } 
        }
    }; 
```

onResume -> 注册为广播接收器

```
 IntentFilter filter = new IntentFilter();
    filter.addAction(yourActionType);
    mLocalBroadcastManager.registerReceiver(broadcastReceiver, filter); 
```

**服务**

onCreate -> 创建广播管理器。

```
 mLocalBroadcastManager = LocalBroadcastManager.getInstance(this); 
```

onStartCommand -> 如有必要，创建并执行一个新的异步任务。（onStart 可以被多次调用）

**异步任务**

doInBackground -> 启动您需要的任何后台任务。在这种情况下播放音乐。定期调用 publishProgress

onProgressUpdate -> sendBroadcast 指示更新状态

```
 Intent broadcastIntent = new Intent(yourActionType);
    broadcastIntent.putExtra(whateverExtraData you need to pass back);
    mLocalBroadcastManager.sendBroadcast(broadcastIntent); 
```

onPostExecute -> sendBroadcast 指示任务结束

# wpf - 单击时，MainWindow 从浮动窗口中窃取键盘焦点

> ID：11080142
> 
> 赞同：2
> 
> 时间：2012-06-18T09:29:43.350
> 
> 标签：wpf, focus, focusmanager, keyboardfocusmanager

我在关注 WPF 时遇到了一些问题。尽管专注是一个常见问题，但我找不到适合我的问题的解决方案。情况如下：

我有一个编辑器软件，我可以在其中拖动文档浮动（如在 Visual Studio 中）。保存按钮显示在托管所有编辑器文档的窗格上方的主窗口中。现在我想做的是让一个窗口浮动，另一个窗口停靠在文档窗格中。当我想在主应用程序中按下保存按钮时，它会从我的浮动窗口中窃取焦点并自动将文档聚焦在文档窗格中，即使我直接单击按钮，单击也不会执行任何其他操作。

当有浮动窗口时，如何防止我的应用程序接收键盘焦点？因为我想将浮动窗口保留为我的活动窗口，但仍然可以访问保存按钮或主应用程序的菜单？

任何帮助将不胜感激！

# linux - Tomcat 中的 403 访问被拒绝

> ID：11080148
> 
> 赞同：8
> 
> 时间：2012-06-18T09:30:10.047
> 
> 标签：linux, tomcat

我有以下内容`tomcat-users.xml`：

```
<tomcat-users>
<role rolename="admin"/>
<role rolename="manager"/>
<user username="aname" password="apassword" roles="admin,manager"/>
</tomcat-users> 
```

如果我去`http://localhost:8080/manager/html`，我会被问及用户名和密码（据我所知，这些来自`tomcat-users.xml`），但是当我输入它们时，我得到：

```
403 Access Denied
You are not authorized to view this page.

If you have already configured the Manager application to allow access and you have used your browsers back button... 
```

这种行为的原因可能是什么？提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-18T10:22:34.233

要使用 Web 管理 gui，您必须添加[`gui role`](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html).

您可以在其中`[Tomcat installation path]/conf/tomcat-users.xml`定义`role`和影响它们`user`。例如 ：

```
<tomcat-users>
    <role rolename="admin"/>
    <role rolename="admin-gui"/>
    <role rolename="manager"/>
    <role rolename="manager-gui"/>

    <user username="name" password="pwd" roles="admin,admin-gui,manager,manager-gui"/>
</tomcat-users> 
```

* * *

***笔记 ：***

*您可能没有在此处定义任何**默认用户名和密码**，因此最好花时间进行此配置，否则在使用集成在 NetBeans 等 IDE 中的 Tomcat 时会遇到问题。实际上，它需要这些凭据才能正确使用它。*

# java - 生成 GWT 覆盖类型

> ID：11080150
> 
> 赞同：3
> 
> 时间：2012-06-18T09:30:18.843
> 
> 标签：java, gwt, jaxb, code-generation

是否有任何工具/脚本/方法可以从 Java bean 类自动生成覆盖类型？例如，通过在字段/getter 上添加注释，可能使用标准 JAXB 注释，如 @XmlElement

这里有一个重复的主题：[Generate GWT Overlay types from Java objects](https://stackoverflow.com/questions/3721151/generate-gwt-overlay-types-from-java-objects)，但是那里没有回答这个问题。唯一的答案是使用 Protostuff，这并不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:38:40.973

你为什么要覆盖类型？你想使用 JSON(P) 而不是 RPC 吗？我在 RPC 层中使用 JAXB 注释对象，这样我就不需要对象的 2 个版本。RPC 速度慢且难以加载测试，所以在这种情况下，我可以理解您想要采用覆盖方式。我在一些影响很大的地方做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:33:51.610

至于 Overlay Types 文档是最新的，生成器不可能生成 Overlay Type 实现。

它说：

> GWT 1.5 中覆盖类型的实现不支持定义新 JSO 子类型的生成器（由于在后续编译期间需要重新定义或以其他方式扩展 JavaScriptObject$）。这个限制仍然存在。

[http://code.google.com/p/google-web-toolkit/wiki/OverlayTypes](http://code.google.com/p/google-web-toolkit/wiki/OverlayTypes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T13:45:55.793

最后我找到了一种方法来做到这一点，虽然它只是半自动化的。在 Eclipse 中，您可以像这样创建代码模板（Window / Preferences / Java / Editor / Templates）：

```
public final native ${type:var} get${nameCamelCase:var}() /*-{
    return this.${name:var};
}-*/;

public final native void set${nameCamelCase}(${type} ${name}) /*-{
    this.${name} = ${name};
}-*/; 
```

并给它起一个名字，比如“get”。然后在任何 GWT 编辑器中，您应该键入“get”并按 Ctrl+Space，然后按 Enter。

# c# - WCF：缓存 SSL 数据

> ID：11080151
> 
> 赞同：0
> 
> 时间：2012-06-18T09:30:23.277
> 
> 标签：c#, wcf, security, ssl, wcf-security

我想创建 WCF 服务和客户端。我想在这 2 个服务之间添加 2 路 SSL。

我想知道，是否有办法让这些服务缓存第一个连接的协商数据，并在后面的连接中使用它，以减少 SSL 握手引起的延迟。

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:03:44.690

SSL 已经进行了会话共享。你不需要做任何事情来实现它。

# c# - 我们可以嗅探某些程序的网络流量吗？

> ID：11080153
> 
> 赞同：0
> 
> 时间：2012-06-18T09:30:29.717
> 
> 标签：c#, network-programming, sniffing

我想用 c# 开发一个程序，它可以针对应用程序或端口的流量并尝试查看该流量。例如，我在我的应用程序中选择了 example.exe 程序，它给了我它的网络流量数据。有可能吗？如果可以，请给我一些指示。我试图不使用 airPcap 或 winPcap 或类似的东西，因为这些库针对的是网卡，我不知道用户可能使用什么类型的接口卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:45:39.473

winPcap is a very good library for what you want to do. If you choose to do it yourself, you will only be reinventing the wheel, and might not be able to support as many network cards as it does.

If you only want to see the traffic, you would have to use a proxy in between. But I believe you are not looking to build something like, [fiddler](http://msdn.microsoft.com/en-us/library/bb250446%28v=vs.85%29.aspx) for example, that sits in between and allows you to monitor the traffic.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:34:52.803

您必须捕获从 NIC (pcap) 接收到副本的数据包，或者通过您自己的应用程序路由请求，以便检查实时数据包流（类似代理）。

对于 C# 中的 WinPcap 实现，请查看[SharpPcap](http://www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET)。对于代理，请参见[此处](https://stackoverflow.com/questions/226784/how-to-create-a-simple-proxy-in-c)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:22:27.107

如果我对您的理解正确，您想要制作 ac# 应用程序，您可以在其中从正在运行的应用程序列表中进行选择，并显示进出该应用程序的网络流量。您可以使用 c# 执行此操作，但您必须调用 Windows API 才能获取所需的信息。此外，您将需要用于数据包捕获的非 c# 库，例如 WinPcap。Windows 有一个新的 NetMon API，可以做类似 pcap 的事情。我没有使用它，但你可能会更好地使用 pcap 和 CodeCaster 发布的[SharpPcap](http://www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET)库。

# c++ - 如果我删除了 const，为什么使用 boost::shared_ptr 的这个调用不能在 C++ 中编译？

> ID：11080161
> 
> 赞同：2
> 
> 时间：2012-06-18T09:31:05.450
> 
> 标签：c++, constants, shared-ptr, temporary

```
#include <boost/smart_ptr.hpp>

class Base {
};

class Derived : public Base {
  public:
    Derived() : Base() {}
};

void func(/*const*/ boost::shared_ptr<Base>& obj) {
}

int main() {
  boost::shared_ptr<Base> b;
  boost::shared_ptr<Derived> d;
  func(b);
  func(d);
} 
```

这与 func 签名中的 const 一起编译，但不是没有它。错误出现在调用的行中`func(d);`

对我有什么提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T09:37:20.370

阅读[文档时，`boost::shared_ptr`](http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/shared_ptr.htm)我们发现以下内容：

> A`shared_ptr<T>`可以隐式转换为`shared_ptr<U>`只要`T*`可以隐式转换为`U*`。

* * *

这意味着`boost::shared_ptr<Derived>`可以隐式转换为类型的对象`boost::shared_ptr<Base>`。

当执行此转换时，`func (d)`将创建一个临时对象，尽管*非常量*引用**不能**绑定到临时对象 - 这就是为什么编译器会发出错误，除非您将参数设置为`func`a `const&`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:35:28.747

假设`func`有内容：

```
void func(boost::shared_ptr<Base>& obj) {
    obj = boost::shared_ptr<Base>(new Base);
} 
```

调用它`boost::shared_ptr<Derived> d`是不正确的，因为它`d`不包含指向`Derived`.

# rest - Magento REST API 签名无效

> ID：11080163
> 
> 赞同：2
> 
> 时间：2012-06-18T09:31:08.920
> 
> 标签：rest, magento, oauth, signature

通过 Magento OAuth API，我设法获得了 access_token 和 access_token_secret。获取这些的调用需要有效的签名。由于我使用的是plainOAuth库并且我能够签署授权请求有效我怀疑库不是问题。

**问题：** 一旦我使用令牌和消费者令牌进行 REST 调用“test.magentohost.com/api/rest/products”，我得到响应无效签名。sig 通过库使用消费者/访问令牌秘密进行签名，并且（我认为）所有参数都在标头中。我希望任何人都可以在我的标题中看到一个错误，这让我发疯了！

这是我的“授权”标题。

```
oauth_realm="", 
oauth_timestamp="1340011522", 
oauth_nonce="ff5c167677069d9770d5cfc1dba12e0fc1d924f9", 
oauth_signature_method="HMAC-SHA1",
oauth_consumer_key="ic88q1nq0iitd9tmowz6bs3dzg2d07ng", 
oauth_version="1.0", 
oauth_token="uye05e0pb0f8dap1ovglecxoq6ziee35",
oauth_signature="G%2Frl7S%2Bw57pjCk8xk1DMpOLkjxI%3D" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:27:09.607

我认为 Magento Core 内部存在错误。我刚刚在这里提交了一个错误报告：http: [//www.magentocommerce.com/bug-tracking/issue](http://www.magentocommerce.com/bug-tracking/issue?issue=14307) ?issue= 14307（不幸的是，您必须登录 magento 站点才能看到它）。

基本上，它们在计算服务器签名时包括客户端签名，然后比较它们总是失败的。

请让我知道你是如何解决这个问题的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-20T18:08:32.377

我遇到了这个问题，在完成这些步骤后我得到了工作版本。但在此之前，示例请求令牌签名

```
POST&http%3A%2F%2Fmagento.test.com%2Foauth%2Ftoken%2Frequest%2F&oauth_consumer_key%3Duaa3romggcur5yrjjm85ydiunfxfyuxx%26oauth_nonce%3D1479663271%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1479663271%26oauth_version%3D1.0 
```

*   请注意，在方法和 url 以及其他参数之间，它们使用 & 而不应用 urlencode。我认为这是用于使用参数的拆分参数。
*   在请求令牌期间，我们不应将 oauth_token 放入参数中。
*   所有参数必须按字母顺序排序，字符必须使用 urlencode 之类的函数进行转义：

    # 这个

    http%3A%2F%2Fmagento.test.com%2Foauth%2Ftoken%2Frequest%2F

    # 取而代之的是：

    [http://magento.test.com/oauth/token/request](http://magento.test.com/oauth/token/request)

    # 和这个

    oauth_consumer_key%3Duaa3romggcur5yrjjm85ydiunfxfyuxx%26oauth_nonce%3D1479663271%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1479663271%26oauth_version%3D1.0

    # 而是这个

    oauth_consumer_key=uaa3romggcur5yrjjm85ydiunfxfyuxx&oauth_nonce=1479663271&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1479663271&oauth_version=1.0

# c# - 进度条工作但标签未更新

> ID：11080164
> 
> 赞同：3
> 
> 时间：2012-06-18T09:31:16.497
> 
> 标签：c#, winforms, progress-bar, uilabel

我有一个带接口的库。

```
Public Interface Progress
{
    int ProgressValue{get;set;},
    string ProgressText{get;set;},
} 
```

库有一个方法 Create（虚拟代码）：

```
Public Class TestLibrary
{

    Progress _progress;

    Public void Create()
    {
        foreach(var n in TestList)
        {
            // Do Something
            _progress.ProgressValue = GetIndex(n);
            _progress.ProgressText = "Updating..." + n;
        }
    }
} 
```

我有一个引用这个库并调用 Create 方法的项目。它甚至实现了接口进度。

```
Public Class TestProject : Progress
{
    public int ProgressValue
    {
        get{return progressBar1.Value;}
        set{progressBar1.Value = value;}
    }

    public int ProgressText
    {
        get{return label1.Text;}
        set{label1.Text = value;}
    }
} 
```

现在，当我运行应用程序时，进度条运行正常并正确显示进度，但 label1 的文本根本没有改变。但它确实在 for 循环结束时发生了变化，并显示了循环中的最后一项。谁能帮我解决这个问题？

注意：所有这些代码都是直接编写的，没有经过测试，因为我现在没有我的应用程序。抱歉有任何语法错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T09:47:31.940

听起来您的所有工作都在 UI 线程上完成。不要那样做。

相反，在后台线程中运行循环本身，并使用`Control.Invoke`or `Control.BeginInvoke`（可能在`Progress`实现中）将调用编组到 UI 线程只是为了更新 UI。这将使您的 UI 在处理过程中保持响应（并能够更新标签等）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T10:07:58.833

用了一个`Label instead of ProgressBar`。你可以试试这个代码[ `using BackGroundWorker`] -

```
using System.ComponentModel;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form3 : Form
    {
        private BackgroundWorker _worker;
        BusinessClass _biz = new BusinessClass();
        public Form3()
        {
            InitializeComponent();
            InitWorker();
        }

        private void InitWorker()
        {
            if (_worker != null)
            {
                _worker.Dispose();
            }

            _worker = new BackgroundWorker
            {
                WorkerReportsProgress = true,
                WorkerSupportsCancellation = true
            };
            _worker.DoWork += DoWork;
            _worker.RunWorkerCompleted += RunWorkerCompleted;
            _worker.ProgressChanged += ProgressChanged;
            _worker.RunWorkerAsync();
        }

        void DoWork(object sender, DoWorkEventArgs e)
        {
            int highestPercentageReached = 0;
            if (_worker.CancellationPending)
            {
                e.Cancel = true;
            }
            else
            {
                double i = 0.0d;
                int junk = 0;
                for (i = 0; i <= 199990000; i++)
                {
                    int result = _biz.MyFunction(junk);
                    junk++;

                    // Report progress as a percentage of the total task.
                    var percentComplete = (int)(i / 199990000 * 100);
                    if (percentComplete > highestPercentageReached)
                    {
                        highestPercentageReached = percentComplete;
                        // note I can pass the business class result also and display the same in the LABEL  
                        _worker.ReportProgress(percentComplete, result);
                        _worker.CancelAsync();
                    }
                }

            }
        }

        void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (e.Cancelled)
            {
                // Display some message to the user that task has been
                // cancelled
            }
            else if (e.Error != null)
            {
                // Do something with the error
            }
        }

        void ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            label1.Text =  string.Format("Result {0}: Percent {1}",e.UserState, e.ProgressPercentage);
        }
    }

    public class BusinessClass
    {
        public int MyFunction(int input)
        {
            return input+10;
        }
    }
} 
```

几天前[在这里发布了同样的内容](https://stackoverflow.com/a/11033200/763026)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-12T14:03:23.013

您发布的代码使用一个线程。这意味着每个操作都在前一个操作完成后按顺序执行。由于您可以立即更新 GUI 元素，因此我认为代码将从主线程（又名“GUI 线程”）运行。阻塞 GUI 线程会导致 GUI（“图形用户界面”）在有空闲时间之前不会更新。

使用以下示例在每次迭代时刷新您的标签，以便更新您的 UI。

```
label1.Text = i.ToString();
label1.Refresh(); 
```

# junit4 - 使用相同的测试测试多个接口实现 - JUnit4

> ID：11080168
> 
> 赞同：11
> 
> 时间：2012-06-18T09:31:38.193
> 
> 标签：junit4

我想为不同的接口实现运行相同的 JUnit 测试。**我用@Parameter**选项找到了一个不错的解决方案：

```
public class InterfaceTest{

  MyInterface interface;

  public InterfaceTest(MyInterface interface) {
    this.interface = interface;
  }

  @Parameters
  public static Collection<Object[]> getParameters()
  {
    return Arrays.asList(new Object[][] {
      { new GoodInterfaceImpl() },
      { new AnotherInterfaceImpl() }
    });
  }
} 
```

该测试将运行两次，首先使用**GoodInterfaceImpl**，然后使用**AnotherInterfaceImpl**类。但问题是大多数测试用例都需要一个新对象。一个简化的例子：

```
@Test
public void isEmptyTest(){
   assertTrue(interface.isEmpty());
}

@Test
public void insertTest(){
   interface.insert(new Object());
   assertFalse(interface.isEmpty());
} 
```

如果**isEmptyTest在****insertTest**之后运行，它会失败。

是否可以选择使用新的实现实例自动运行每个测试用例？

顺便说一句：为接口实现*clear()*或*reset()*方法并不是一个真正的选择，因为我在生产代码中不需要它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T22:42:24.127

这是模板方法模式的另一种方法：

面向接口的测试进入基类：

```
public abstract class MyInterfaceTest {

    private MyInterface myInterface;

    protected abstract MyInterface makeContractSubject();

    @Before
    public void setUp() {
        myInterface = makeContractSubject();
    }

    @Test
    public void isEmptyTest(){
        assertTrue(myInterface.isEmpty());
    }

    @Test
    public void insertTest(){
        myInterface.insert(new Object());
        assertFalse(myInterface.isEmpty());
    }
} 
```

对于每个具体类，定义一个具体的测试类：

```
public class GoodInterfaceImplTest extends MyInterfaceTest {

    @Override
    protected MyInterface makeContractSubject() {
        // initialize new GoodInterfaceImpl
        // insert proper stubs
        return ...;
    }

    @Test
    public void additionalImplementationSpecificStuff() {
        ...
    }
} 
```

与@Parameter 相比的一个轻微优势是，当测试失败时，您可以获得报告的具体测试类的名称，因此您可以立即知道哪个实现失败了。

顺便说一句，为了使这种方法完全起作用，接口的设计方式必须只允许通过接口方法进行测试。这意味着基于状态的测试——您无法在基础测试类中验证模拟。如果您需要在特定于实现的测试中验证模拟，这些测试必须进入具体的测试类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T09:52:33.827

如果您在生产中不需要这样的东西，可能只在您的测试层次结构中创建一个工厂接口和实现，并`getParameters()`返回一个工厂列表。

然后，您可以在带注释的方法中调用工厂，`@Before`为每个测试方法运行获取实际测试类的新实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-10T08:29:48.540

万一有人到达这里（就像我一样），寻找在.net中测试同一接口的多个实现，您可以看到我在[此处的一个项目中使用的一种方法](http://www.rahulpnath.com/blog/testing-multiple-implementations-of-same-interface/)

以下是我们简要介绍的内容

*通过设置环境变量，使用 vstest.console 运行相同的测试项目 dll 两次。在测试内部，（在程序集初始化或测试初始化​​中）根据环境变量值将适当的实现注册到 IoC 容器中。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-05T10:23:09.650

在 Junit 5 中，您可以执行以下操作：

```
@ParameterizedTest
@MethodSource("myInterfaceProvider")
void test(MyInterface myInterface) {}

static Stream<MyInterface> myInterfaceProvider() {
   return Stream.of(new ImplA(), new ImplB());
}

interface MyInterface {}

static class ImplA implements MyInterface {}

static class ImplB implements MyInterface {} 
```

# wordpress - 页面 url 显示 page/2 但从第一页获取帖子

> ID：11080175
> 
> 赞同：0
> 
> 时间：2012-06-18T09:32:05.263
> 
> 标签：wordpress, pagination

我正在为我得到的主题而苦苦挣扎，主题使用`query_posts()`和分页曾经有效。现在分页在这个页面上不起作用，它继续在第二个页面上显示来自第一页的帖子。意思是，网址显示`page/2`，但我继续看到该类别的第一个帖子，即每页上的前 4 个。

这是用于获取帖子的代码：

```
global $current_category;

$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
global $query_string;

$args = "";
if ($current_category['post_type'] == "product") {          
    $args=array(
        'showposts' => 4,
        'paged' => $paged,
        'post_type' => 'product'
    );
} else {
    $args=array(
        'showposts' => 4,
        'category_name' => $current_category['name'],
        'paged' => $paged
    );
}
query_posts($args); 
```

这是循环：

```
if (have_posts()) : while (have_posts()) : the_post();
    <outputs code here>
endwhile;
else :
    <output no results code here>
endif;

if ( is_home() ) wp_reset_query(); 
```

现在，有人可以指出我正确的方向吗？

//更新：

我也已经尝试过[这个解决方案](http://wordpress.org/support/topic/paged-page-2-etc-not-working)，到目前为止，我只能说`paged`变量永远不会在查询中更新。

//更新2：

**此页面是自定义的，通过设置 -> 阅读**将其设置为主页会禁止上述行为。将其保留为普通页面并将主页设置为最近的帖子时，分页工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:01:00.250

如果您在模板中有任何自定义查询，请确保集成`'paged'`参数。

[分页参数](http://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)

浏览这些法典页面：

[保留现有查询参数](http://codex.wordpress.org/Function_Reference/query_posts#Preserving_Existing_Query_Parameters)

相关：[分页](http://codex.wordpress.org/Function_Reference/query_posts#Pagination)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:51:11.277

经过长时间的研究，我已经解决了这个问题。我的代码现在如下所示：

```
global $current_category, $paged;

if ( get_query_var('paged') ) {
    $paged = get_query_var('paged');
} elseif ( get_query_var('page') ) {
    $paged = get_query_var('page');
} else {
    $paged = 1;
} 
```

这只是替换了答案中原始代码的前 3 行。其余的看起来完全一样。

# facebook - wsdl 创建连接 facebook

> ID：11080186
> 
> 赞同：-2
> 
> 时间：2012-06-18T09:32:51.330
> 
> 标签：facebook, facebook-graph-api, wsdl

我是 facebook 图形 api 的新手。我已经通过了使用图形 api 连接 facebook 的 restfb 客户端。它具有发布、获取对象方法等。

我需要创建一个 wsdl 以便从外部连接并上传 facebook 中的照片？

我如何创建一个 wsdl，它应该有一个接口来连接和上传 facebook 中的照片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:39:28.403

Facebook 通过 RESTfull 网络服务公开其网络服务。

RESTfull Web 服务通常没有 wsdl 文件，您可以在其中直接创建客户端。

但是 facebook 确实提供了许多流行语言的客户端库，您可以使用其中任何一种来连接到 facebook。

RESTfull web 服务也很容易使用。您也可以直接进行 REST 调用，无需任何库。就像 php 中的 curl 一样。Java 中的 HTTPUrlConnection。

# ios - 动画子类无法正确应用于我的视图动画

> ID：11080189
> 
> 赞同：0
> 
> 时间：2012-06-18T09:32:58.840
> 
> 标签：ios, cocoa-touch, uiview

我的目标是显示一个`subView`动画，我已经实现了一个专门的类来执行这样的动画，并且我已经从该类实例化并将其应用于我的子视图动画：

```
AnimationClass *ani = [[AnimationClass alloc] init];    
ani.type = AnimationClassTypeTransition;
ani.direction = AnimationClassDirectionMoveUp;

[self.masterView addSubview:self.detailImage withAnimation:ani]; 
```

平滑过渡动画一切正常，但是，我收到以下警告：

```
'UIView' may not respond to 'addSubview:withAnimation:' 
```

请问我该如何重构上面的代码来解决这个警告？提前感谢

**编辑** masterView 是`UIView`类型的属性。它是这样声明的：

```
@property (nonatomic, assign) UIView *masterView; 
```

并在`.m`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:38:35.893

如果您的代码在没有崩溃的情况下运行，那么您只是忘记了声明您`addSubview:withAnimation:`的子类的方法`UIView`。我想`self.masterView`是子类的类型`UIView`，它有一个方法`addSubview:withAnimation:`，但您没有在`.h`子类的文件中声明此方法`UIView`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:39:43.610

```
#import <QuartzCore/QuartzCore.h>

CATransition *transition = [CATransition animation];
transition.duration = 1.0;
transition.type = kCATransitionPush; //choose your animation
[newView.layer addAnimation:transition forKey:nil];
[self.view addSubview:newView]; 
```

# php - PDO 将行从一个数据库移动到另一个数据库

> ID：11080193
> 
> 赞同：0
> 
> 时间：2012-06-18T09:33:08.610
> 
> 标签：php, mysql, pdo, prepared-statement

我有 2 个具有相同结构的独立数据库。我想将一组选定的行从一个表移动到另一个表。我正在使用 PDO 选择所有行，然后在一个 while 循环中，我假设我可以将每一行插入到新表中，然后从旧表中删除它。

使用普通的 mysql，这是一项非常简单的任务，但我想使用命名空间，以便我可以轻松地修改表结构等。我有以下工作，但它不会将条目移动到新表：

```
 try {
        $sql = "SELECT * FROM `calls` WHERE `calls`.`status`=0 AND `calls`.`stage` < 4 AND `calls`.`answer` < (NOW() - INTERVAL 10 MINUTE)";
        $query = $this->staging->query($sql);
        while($row = $query->fetch(PDO::FETCH_ASSOC)) {
            $sql = "INSERT INTO `table` (`field1`,`field2`) VALUES (?,?)";
            $query = $this->production->prepare($sql);
            $query->execute($array);
        }
    }
    catch(PDOException $e) {
        $this->informer("FATAL", "Unable to process broken IVR surveys. Error: ".$e->getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:37:35.440

您可以立即完成：

```
INSERT INTO db1.table (fields) SELECT fields FROM db2.table 
```

当然两个数据库必须在同一台机器上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:38:35.020

它可能不起作用，因为您在准备好的语句中使用问号占位符样式，但是将命名数组传递给`execute`.

如果改为命名参数，它应该可以工作：

```
$sql = "INSERT INTO `table` (`field1`,`field2`) VALUES (:field1, :field2)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:40:47.773

另一种方法是在 MySQL 中使用联合表来做你想做的事情。有一些限制....但是这里有一些文档可以帮助您...

[http://dev.mysql.com/doc/refman/5.0/en/federated-use.html](http://dev.mysql.com/doc/refman/5.0/en/federated-use.html) http://dev.mysql.com/doc/refman/5.0/en/federated-limitations.html

# xml - 用于选择特定节点的 XSLT

> ID：11080195
> 
> 赞同：1
> 
> 时间：2012-06-18T09:33:12.750
> 
> 标签：xml, xslt, xpath, umbraco

我在使用 XSLT 创建的宏获取数据时遇到问题。我有几个`EventData`节点，我想从另一个 Content 文件夹中的页面访问它们。

我尝试了许多不同的查询（太多无法发布），但我的最新查询如下。当事件数据低于标准页面时，我有这个工作，但我已经将它们移动到他们自己的文件夹并且没有设法成功更新 XSLT。

**XML:**

```
<root id="-1">
  <HomeTemplate id="1055" parentID="-1" level="1">
    <ContentFolder id="1097" parentID="1055" level="2">
      <EventData id="1095" parentID="1097" level="3">
       <eventDate>2012-06-20T00:00:00</eventDate>
       <eventName>Event Name Data</eventName>
       <eventLocation>Event Location Data</eventLocation>
      </EventData>
    .......
    </ContentFolder>
    <ContentFolder id="1059" parentID="1055" level="2">
      <StandardTemplate id="1061" parentID="1059" level="3">
        <pageHeading>Results</pageHeading>
        .......
      </StandardTemplate>
    </ContentFolder>
  ......
  </HomeTemplate>
</root> 
```

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xsl:stylesheet [ <!ENTITY nbsp "&#x00A0;"> ]>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" omit-xml-declaration="yes"/>
<xsl:param name="currentPage"/>
<xsl:template match="/">
  <table>
    <xsl:for-each select="EventData">
      <tr>
        <td>Event Date: <xsl:value-of select="umbraco.library:FormatDateTime(./eventDate, 'd')"/></td>
        <td>Event Name: <xsl:value-of select="./eventName"/></td>
        <td>Event Location: <xsl:value-of select="./eventLocation"/></td>
      </tr>
    </xsl:for-each>
  </table>
</xsl:template>
</xsl:stylesheet> 
```

编辑：

```
<xsl:for-each select="umbraco.library:GetXmlNodeById(1097)/EventData"> 
```

上面的方法有效，但理想情况下我想要一些可以按类型选择的东西，所以不是硬编码的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:26:48.167

**旧架构**

```
<xsl:for-each select="$currentPage/ancestor-or-self::node[@nodeTypeAlias='HomeTemplate']//node[@nodeTypeAlias='EventData']">
</xsl:for-each> 
```

**新架构**

```
<xsl:for-each select="$currentPage/ancestor-or-self::HomeTemplate//EventData[@isDoc]">
</xsl:for-each> 
```

请注意，此示例使用别名 HomeTemplate 进入顶级节点/文档类型，因为我认为您正在使用的最顶级节点只有一个实例。

另请注意，这是一个相当昂贵的 xPath 调用，因为它会沿着树向上查找顶层节点，直到我们到达 Home 节点。然后无论多深，它都会遍历所有子节点，以找到具有 EventData 别名的节点（文档类型）。

资料来源： http: [//our.umbraco.org/wiki/reference/xslt/45-xml-schema/xslt-examples-updated-to-new-schema](http://our.umbraco.org/wiki/reference/xslt/45-xml-schema/xslt-examples-updated-to-new-schema)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:54:44.997

您正在匹配文档的根（不是节点“根”），然后查找节点“EventData”。那在那个层次上是不存在的，唯一存在的就是`<root>`。

如果要遍历 EventData，则需要

```
<xsl:for-each select="//EventData">
.... 
```

或者

```
<xsl:for-each select="root/HomeTemplate/ContentFolder/EventData">
... 
```

因为 eventData 有很长的路要走

# c# - 保存按属性排序的 Xml 节点

> ID：11080196
> 
> 赞同：0
> 
> 时间：2012-06-18T09:33:14.707
> 
> 标签：c#, asp.net, .net, xml, sorting

这是我现在的xml。可以添加新的“项目”节点，我希望所有节点都按类别 ID 排序。

```
<?xml version="1.0" encoding="utf-8"?>
<data>
  <banners>
    <banner type="search-bar">
      <item img="http://site.com/3ac0a.png" id="5df129a6-1" categoryid="7" />
      <item img="http://site.com/3ac1a.png" id="5df129a6-1" categoryid="10" />
      <item img="http://site.com/3ac2a.png" id="dfgsdfgg-1" categoryid="1" />
      <item img="http://site.com/3ac3a.png" id="5erjrthr-1" categoryid="2" />
      <item img="http://site.com/3ac4a.png" id="yuj67445-1" categoryid="3" />
      <item img="http://site.com/3ac5a.png" id="ghjmdmgh-1" categoryid="4" />
    </banner>
  </banners>
</data> 
```

**像这样**

```
<?xml version="1.0" encoding="utf-8"?>
<data>
  <banners>
    <banner type="search-bar">
      <item img="http://site.com/3ac2a.png" id="dfgsdfgg-1" categoryid="1" />
      <item img="http://site.com/3ac3a.png" id="5erjrthr-1" categoryid="2" />
      <item img="http://site.com/3ac4a.png" id="yuj67445-1" categoryid="3" />
      <item img="http://site.com/3ac5a.png" id="ghjmdmgh-1" categoryid="4" />
      <item img="http://site.com/3ac0a.png" id="5df129a6-1" categoryid="7" />
      <item img="http://site.com/3ac1a.png" id="5df129a6-1" categoryid="10" />
    </banner>
  </banners>
</data> 
```

**我需要保存已排序的 XML**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:44:48.133

```
XDocument document = XDocument.Parse(xml);
var items = document.Root.Elements("item");
foreach (var item in items)
{
    var elements = item.Elements("item").OrderBy(a => a.Attribute("categoryid").Value).ToArray();
    item.Elements().Remove();
    item.Add(elements);
}

document.Save("your sorted xml path, which you want to save"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:14:16.980

```
XElement El = XElement.Load(FilePath);
El.Descendants("banner").Where(b => b.Attribute("type").Value == "search-bar").First().ReplaceNodes(
                El.Descendants("banner").Where(b => b.Attribute("type").Value == "search-bar").First().Descendants("item").OrderBy(o => int.Parse(o.Attribute("categoryid").Value)));
            El.Save(FilePath); 
```

# http - 资源的 HTTP 状态码尚不可用

> ID：11080197
> 
> 赞同：25
> 
> 时间：2012-06-18T09:33:16.510
> 
> 标签：http, rest

我有一个 REST 端点接受 POST 请求以将代码标记为已兑换。该代码只能在特定日期之间兑换。

如果有人试图提前兑换代码，我应该如何应对？

我怀疑 HTTP 403，禁止，是正确的选择，但是 w3c 声明“[不应该重复请求](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)”，而在这种情况下，我预计请求会在以后重复。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-19T02:21:16.180

> **[409 冲突](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.10)**
> 
> 由于与资源的当前状态冲突，无法完成请求。仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。响应正文应该包含足够的信息让用户识别冲突的来源。理想情况下，响应实体将包含足够的信息供用户或用户代理解决问题；但是，这可能是不可能的，也不是必需的。

如果他们试图兑换已经兑换的优惠券，[403 Forbidden更有意义，尽管](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4)[410 Gone](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.11)在这种情况下也很优雅。

[404 Not Found](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5)并不理想，因为资源确实存在，但是如果您不想指定 403 的原因，或者出于安全原因想要隐藏资源的存在，则可以使用它。

如果您使用的是[HATEOAS](https://en.wikipedia.org/wiki/HATEOAS)，那么您还可以在可以兑换优惠券时仅`redeem`在优惠券资源中包含超媒体控件（通过 a 检索）来阻止您的客户（可以这么说）；`GET`尽管这不会阻止过度绑定的客户尝试赎回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T03:55:11.450

**编辑：感谢一些好的批评（见下文），我想警告这个答案。它基于 Richardson & Ruby 的文章，可以说与[403 Forbidden 上的 httpbis 文章](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-19#section-7.4.3)不太吻合。（就个人而言，现在我正在向 409 学习，正如汤姆在单独的答案中所解释的那样。）**

403 Forbidden是最好的选择。我将逐行引用[Richardson 和 Ruby 的 RESTful Web Services 。](http://shop.oreilly.com/product/9780596529260.do)如您所见，403 非常适合：

> 客户端的请求格式正确，但服务器不想执行它。

查看！

> 这不仅仅是凭据不足的情况：那将是 401（“未经授权”）。这更像是一种只能在特定时间或从特定 IP 地址访问的资源。

查看！

> 403 的响应意味着客户端请求了一个确实存在的资源。与 401（“未授权”）一样，如果服务器甚至不想提供此信息，它可以撒谎并发送 404（“未找到”）。

您在上面写道：“代码表示可以在它上线之前被 GETted。” 所以，你并没有试图隐藏任何东西。所以，坚持使用 403。检查！

> 如果客户端的请求格式正确，为什么这个状态码是4xx系列（客户端错误）而不是5xx系列（服务器端错误）？因为服务是根据请求的某些方面而不是其形式做出决定的；比如说，提出请求的时间。

查看！客户的请求已更正，但不适用于特定时间。

我们四对四。403 代码是赢家。也没有其他代码匹配。

所有这一切都表明，一个普通的、非特定的 400 不会是错误的，但不会那么具体或有用。

另一个答案建议使用 409 冲突代码。虽然值得考虑，但它并不适合。这就是为什么。根据 Richardson & Ruby 的说法：

> 获得此 [409] 响应意味着您试图将服务器的资源置于不可能或不一致的状态。当您尝试删除非空存储桶时，Amazon S3 会提供此响应代码。

在“活动”之前声明促销不会“将服务器资源置于不一致的状态”。它会破坏一些商业规则——并导致作弊——但它不会引起我所看到的逻辑矛盾。

因此，无论您在提出问题时是否意识到这一点，403 都是一个不错的选择。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:39:40.307

由于 Rest URL 应该代表资源，我会回复**404 - Not Found**
该资源仅在某些日期之间可用，因此在任何其他日期都找不到。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T09:58:12.763

当它说请求“不应该重复”时，它指的是您应该发送给查看者的消息。

它与是否重复实际请求无关。（如果他/她愿意，用户将一遍又一遍地收到相同的 403 消息。）

也就是说，404 不适用于此，因为资源可用 - 只是代码不可兑换/禁止兑换。它实际上是有害的，因为它告诉用户您可能在 URL 链接或服务器配置中犯了错误。

当然，这假设您在适当的日期返回 200。

# java - 如果唯一键匹配，则跳过持久化实体

> ID：11080198
> 
> 赞同：4
> 
> 时间：2012-06-18T09:33:17.310
> 
> 标签：java, mysql, jpa

假设我有一个名为“A”的实体。它有两列分别命名为 name 和 systemId。这些列约束唯一键。例如，它不允许 systemId "1" 和名称 "test" 的重复实体。

我的问题是：我想插入 A 实体的集合。我想跳过重复的实体，只需插入新的实体。如果唯一约束失败，EntityManager 是否能够跳过这些实体？我怎样才能成功？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T13:20:16.177

JPA 不允许错误处理，它要求在发生任何错误时将事务标记为回滚。

您可以将每个事务插入单独的事务中，或者将整个事务重试并拒绝每次传递失败的对象。您还可以先对唯一字段进行选择，如果对象已经存在，则跳过该对象。

# java - 使用 PID（进程 ID）切换到特定窗口

> ID：11080200
> 
> 赞同：3
> 
> 时间：2012-06-18T09:33:25.643
> 
> 标签：java, runtime, cmd

我正在开发一个使用 Runtime 类的 Java Selenium 程序。有多个打开的 Internet Explorer 窗口实例。
我只需要**“带来前面”**一个特定的窗口，硒套件就可以正常运行。

我已经使用 tasklist 命令检索了特定的 iexplore 实例。现在我有了进程的PID。

```
Process p = Runtime.getRuntime().exec("tasklist /FI \"WindowTitle eq Google\"");
BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));  
String line = null;  
int count=1;
while ((line = in.readLine()) != null) {
    System.out.println(count + " " + line);
    count++;
} 
```

如何使用其PID通过运行时命令行将进程置于最前面（使其成为活动窗口）？

**编辑：**
有没有办法使用应用程序的 PID 从命令提示符切换到应用程序窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:11:48.203

要从命令提示符切换到应用程序窗口，您可以使用 Windows Script Host 的 AppActivate 功能。它接受 ProcessID 或窗口的标题作为其参数。这是一个简单的脚本：

```
set WshShell = CreateObject("WScript.Shell")
WshShell.AppActivate Wscript.Arguments(0) 
```

然后使用调用脚本`cscript AppActivate.vbs 1234`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-20T08:13:45.380

我试图将上述建议应用到完整的解决方案中

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import java.nio.charset.StandardCharsets;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import static org.apache.commons.io.FileUtils.writeStringToFile;
import static org.apache.commons.lang3.math.NumberUtils.toInt;

public class WindowSwither {
    private static final Pattern TASKLIST_CSV_PATTERN = Pattern.compile("\".*?\",\"(\\d+)\".*");
    private int pidActive = 0;
    private final List<Integer> pidList = new ArrayList<>();

    public WindowSwither(String exeName) throws IOException {
        Process p = Runtime.getRuntime().exec("tasklist /FI \"ImageName eq " + exeName + ".exe\" /FO CSV");
        for (String line : showProcessOut(p)) {
            Matcher m = TASKLIST_CSV_PATTERN.matcher(line);
            if (m.find()) {
                pidList.add(toInt(m.group(1)));
            }
        }
    }

    public void next() throws IOException {
        if (pidList.size() == 0) {
            System.out.println("List empty! Ignored.");
            return;
        }

        if (pidActive == 0) {
            pidActive = pidList.get(0);
            System.out.println("[0] " + pidActive);
        } else {
            Iterator<Integer> it = pidList.iterator();
            while (it.hasNext()) {
                Integer pid = it.next();
                if (pid == pidActive) {
                    break;
                }
            }
            if (it.hasNext()) {
                pidActive = it.next();
                System.out.println("[+] " + pidActive);
            } else {
                pidActive = pidList.get(0);
                System.out.println("[0] " + pidActive);
            }
        }
        activate(pidActive);
    }

    private static void activate(int pid) throws IOException {
        String pathname = System.getProperty("java.io.tmpdir") + "WindowSwintcherAppActivate.vbs";
        File file = new File(pathname);
        if (!file.exists()) {
            String content = "set WshShell = CreateObject(\"WScript.Shell\")\n" +
                    "WshShell.AppActivate Wscript.Arguments(0)";
            writeStringToFile(file, content, StandardCharsets.UTF_8);
        }
        Runtime.getRuntime().exec("cscript " + pathname + " " + pid);
    }

    private List<String> showProcessOut(Process p) throws IOException {
        List<String> list = new ArrayList<>();
        BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream(), "cp866"));
        String line;
        while ((line = in.readLine()) != null) {
            list.add(line);
        }
        return list;
    }
} 
```

主班

```
public class EnumerateWindows {
    public static void main(String[] args) throws IOException, InterruptedException {
        WindowSwither swither = new WindowSwither("notepad");
        swither.next();
        Thread.sleep(1000);

        swither.next();
        Thread.sleep(1000);

        swither.next();
        Thread.sleep(1000);

        swither.next();
        Thread.sleep(1000);
    }

} 
```

# wpf - 为什么组合框的 Popup 部分在一种情况下可以调整大小，而在另一种情况下不能调整？

> ID：11080209
> 
> 赞同：0
> 
> 时间：2012-06-18T09:34:29.260
> 
> 标签：wpf, popup, custom-controls, resize

我有一个从组合框 System.Windows.Controls.ComboBox 派生的 wpf cusotm 控件，控件模板被重新定义，弹出窗口（`PART_Popup`）包含一个 DataGrid 和其他一些控件。我在两个地方使用它——在 TabControl(,Grid) 和 Window(Grid,,Grid) 中。当通过拖动列或从代码调整 DataGrid 的大小时，行为是不同的：在窗口中，TabControl Popup 中的 Popup 调整大小保持不变，并在必要时出现滚动条。

我需要知道是什么导致了这种差异。

**编辑** Datagrid 具有 Horizo​​ntalAlignment="Stretch"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:26:13.613

我找到它了。错误地有

```
 Popup.Width=Me.Width 
```

代替

```
 Popup.Width=Me.ActualWidth 
```

如果`Me.Width`未设置，这会导致可调整大小。

# javascript - 如何从存储排序的 jquery tablesorter 获取 cookie 值？

> ID：11080212
> 
> 赞同：1
> 
> 时间：2012-06-18T09:34:54.480
> 
> 标签：javascript, jquery, tablesorter

在 Web 应用程序的 JavaScript 代码中，表格排序器定义为：

```
$("#my-table").tablesorter({
    headers: { 
       1: { 
               sorter: false
           }
    },
    widgets: ["saveSort"] 
}); 
```

因此，当页面刷新时，表格的排序被保存，但是当浏览器关闭时，表格恢复到原来的排序。所以我想要的是获取表格的排序方式并将其保存到数据库中。有人可以建议我如何获取存储表格排序方式的 cookie 吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:56:46.410

当`saveSort`小部件 ( [demo](http://mottie.github.com/tablesorter/docs/example-widget-savesort.html) ) 保存信息时，它首先测试浏览器的 localStorage，然后如果不可用，它会回退到将排序保存到 cookie。因此，您可以使用内置在小部件文件中的函数，如下所示：

```
var myTable = $('#table1')[0],
    myLastSort = $.tablesorter.storage( myTable, 'tablesorter-savesort'); 
```

或者，如果您使用的是 Chrome，请转到该页面并按 F12。现在单击资源选项卡并在“本地存储”下查看

![保存排序](../Images/8656dccd70adcf1bdac2007d381270f6.png)

该值可能看起来有点混乱，但它只是一个 JSON 格式：

```
{
    "/tablesorter/docs/example-widget-savesort.html": {
        "0": {
            "sortList": [ [0,0],[2,1] ]
        },
        "1": {
            "sortList": [ [0,0] ]
        }
    }
} 
```

它被分解如下：

*   “/tablesorter/docs/example-widget-savesort.html”是网页的网址
*   “0”或“1”可以是表格 ID 或页面上表格的索引
*   “sortList”包含实际的排序列表值

正如您在上面的数据中看到的那样，它在一个网页上保存了两个表的排序信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T09:53:58.113

您可以使用 jQuery 来保存带有排序列的 cookie。下次加载该页面时，使用 jQuery 或服务器端逻辑来获取 cookie 的值，并对相应的列进行排序。这可能是有用的阅读：[Can jQuery read/write cookies to a browser？](https://stackoverflow.com/questions/95213/can-jquery-read-write-cookies-to-a-browser)

# c# - 如何在带防火墙的代理上使用 IMAP 从 Gmail 接收电子邮件？

> ID：11080214
> 
> 赞同：0
> 
> 时间：2012-06-18T09:35:07.330
> 
> 标签：c#, .net, gmail, imap, firewall

好的，所以我有一个工作程序，它只是一个非常基本的概念证明类型的东西 - 没有时间投入其中或任何东西！当我不在工作连接时，即当我在家或使用加密狗时，它可以工作。我想知道的是如何在工作网络上修改它以使其工作？当我在工作网络上运行它时，我收到此错误消息：“无法建立连接，因为目标机器主动拒绝它：”但是我目前不知道如何通过防火墙或代理，无论哪个可能会干扰过程！！！

我正在使用[AE.Net.Mail](https://github.com/andyedinborough/aenetmail)库与 IMAP 进行交互。

这是代码：

```
using AE.Net.Mail;

//IMAP ATTEMPT
try
{
// Connect to the Google IMAP server.
using (ImapClient Imap = new ImapClient("imap.gmail.com", "Address@googlemail.com", "Password", ImapClient.AuthMethods.Login, 993, true))
{
// Select the mailbox you want to read messages from.
Imap.SelectMailbox("INBOX");

//Displays the count of messages in selected mailbox.
label1.Text = Imap.GetMessageCount().ToString();

// Get the first 100 messages from selected mailbox. 0 is the first message
// MailMessage is a message in your mailbox, so this is an array of 100 messages from you selected mailbox.
MailMessage[] mm = Imap.GetMessages(0, 99);

//Loops through selected messages putting the subject in the listbox.
foreach (MailMessage m in mm)
{
listBox1.Items.Add(m.Subject);
}
}
}
catch (Exception exn)
{
//Show error message when error occurs.
errorProvider1.SetError(label1, exn.Message);
textBox1.Text = exn.Message;
} 
```

我已经尝试将以下内容添加到 App.config 中（就像平底船一样）！

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.net>
<defaultProxy useDefaultCredentials="true"/>
</system.net>
</configuration> 
```

如果有人可以阐明我所缺少的内容或我需要查找的内容，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:44:57.463

You could change the Code of the ImapClient as described in this link: [https://github.com/andyedinborough/aenetmail/issues/21](https://github.com/andyedinborough/aenetmail/issues/21)

# installation - 安装 Windows Installer 4.5 后，面向 Windows Installer 3.1 的安装程序包失败

> ID：11080216
> 
> 赞同：2
> 
> 时间：2012-06-18T09:35:17.307
> 
> 标签：installation, windows-installer, installshield, installshield-2009

我们有一个使用 InstallShield 2009 编写的安装程序包，面向 Windows Installer 3.1。

最近，我们开始注意到，在某些基于 Windows 2003 R2 x86 的主机上安装时，安装失败，安装程序日志报告 1603 错误代码（顺便说一句，这并没有太大帮助，因为[它意味着](http://msdn.microsoft.com/en-us/library/aa368542%28VS.85%29.aspx)ERROR_INSTALL_FAILURE ，那是一个很笼统的“*安装过程中发生了致命错误。* ”）。

由于安装仍在同一平台上的其他一些主机上运行，​​经过进一步调查，我们发现它发生在已经安装 Sql Server 2008 R2 的主机上，这使我们发现问题确实出在 Windows Installer 4.5 .

每当安装程序包安装 Windows Installer 4.5 时，我们的安装程序包都会失败并显示 1603。到目前为止，我们找到了一种解决方法：如果我们手动卸载 Windows Installer 4.5（运行类似“ *C:\WINDOWS\$NtUninstallKB942288-v4 $\spuninst\spuninst.exe* ")，然后我们可以成功运行我们的安装程序包，但这有各种缺点：

1.  卸载 Windows Installer 4.5 的用户会收到一个对话框，其中列出了使用该软件安装的所有各种软件产品，并且这些产品与 Windows Installer 4.5 之间的链接在卸载后有效地丢失了，即使我们在成功安装我们的应用程序后重新安装它；
2.  由于 Microsoft 发布了各种版本的 Windows Installer 4.5，因此要卸载的实用程序的位置并非严格意义上的上述位置；
3.  要求客户执行这样的工作是很尴尬的。

我想将安装程序包升级到目标 Windows Installer 5 可能会解决问题，但如果可能的话，我想避免它，并继续使用 InstallShield 2009 来创作这个特定的包。

我已经搜索了 Microsoft 和 Flexera 知识库（并且我正在继续我的调查），但到目前为止无济于事。

有谁知道 Microsoft 或 Flexera 或任何其他第三方是否已发布有关此问题的修补程序或更多信息？

**关于 1603 错误代码失败的一些信息**

我们从至少 3 台不同的服务器上获得了有关此问题的详细日志，并且我们对此进行了深入调查，但到目前为止还没有用。大多数操作返回 1，有些返回 0（特别是*IsolateComponents、MigrateFeatureStates、IsolateComponents、SetODBCFolders、MigrateFeatureStates、UnpublishComponents、UnregisterComPlus、UnregisterTypeLibraries、UnregisterMIMEInfo、RemoveShortcuts、RemoveFiles、CreateShortcuts、RegisterMIMEInfo、InstallODBC、RegisterTypeLibraries、RegisterComPlus 和*PublishComponents那些），安装程序包实际上似乎几乎可以安装（执行所有序列到“*安装。返回值1。* ”，它甚至打印“*产品：[我们的产品] - 安装操作成功完成。*")，然后它才开始回滚所有内容，并且由于回滚时出现各种错误，我认为其中一些会导致 1603（可能是 MsiProvideAssembly 在 ISChainPackagesCleanup 上返回的一些 1607），但关键是它不应该回滚，而对于 Windows Installer 3.1（或 5.x）则不会，只有在 Windows 2003 x86 环境中安装了 Windows Installer 4.5 时才会回滚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:33:27.143

您的包很可能有一个失败的操作，无论是自定义的还是标准的。尝试创建失败的安装的[详细日志](http://setupanddeployment.com/debugging/msi-log)（详细说明非常重要）。失败后，用文本编辑器打开日志，搜索错误代码（1603），看看是什么触发的。

作为旁注，不要试图责怪 Windows Installer。4.5 版没有任何问题，也没有修补程序或类似的东西。问题出在您的包裹中。它会做一些不正确或不受支持的事情。

**编辑：**

从您发布的更新来看，它看起来像是一个失败的链式安装。日志中未显示错误，因为错误发生在不同的安装程序进程中。

如果您没有使用链式包，请尝试在事件查看器中查找错误。

如果您使用的是链式包，您可以尝试启用[Windows Installer 日志记录策略](http://support.microsoft.com/kb/223300)并检查它们生成的日志。很可能其中一个包遇到了问题。

# java - 异常：ClassNotFoundException：com.mysql.jdbc.Driver

> ID：11080222
> 
> 赞同：0
> 
> 时间：2012-06-18T09:35:49.247
> 
> 标签：java, mysql, jsp, database-connection

我正在做一个简单的 JSP 程序来连接 MySQL DB。但它显示了这样的异常。我正在使用 Java 1.6 版和 MySQL -connector 5.1.20。我已将此连接器 (.jar) 文件放在 JAVA_HOME 的 lib/ext 目录中。我也将 CLASSPATH 设置为连接器 (.JAR) 文件的值。不过，我得到了同样的例外。

我已经搜索过了。我做了他们建议的所有事情。但是我没有找到任何结果。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:49:45.167

将连接器 jar 放在您的 tomcat 安装的 TOMCAT_HOME/lib 文件夹中。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:44:04.310

如果您使用的是 Netbeans，则右键单击您的项目，选择“添加库”，然后选择 MySQL JDBC 驱动程序并保存。

# java - 使用 java 代码运行 jar 时出错

> ID：11080224
> 
> 赞同：0
> 
> 时间：2012-06-18T09:36:10.370
> 
> 标签：java, swing, jar

我有一个 java swing 应用程序来从 pdf 中提取文本。当我使用命令提示符（`java -jar xyz.jar`）运行或双击并运行 jar 时它工作正常，但是当我使用 java 代码运行时它卡住了

```
Process asm = Runtime.getRuntime().exec("java -jar xyz.jar");
asm.waitFor(); 
```

或使用流程构建器。是因为我的应用程序中的例外吗？我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:37:35.830

您可能不在正确的目录中。

使用 ProcessBuilder 的[directory()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#directory%28java.io.File%29)方法，使外部进程运行在正确的位置，以便找到 jar。

```
ProcessBuilder processBuilder = new ProcessBuilder("java -jar xyz.jar");
processBuilder.redirectErrorStream(true);
processBuilder.directory(  complete this );
Process process = processBuilder.start();
String output = readOutput(process);
try {
    if (process.waitFor() != 0) {
        throw new IOException("command exited in error: " + process.exitValue() + "\n" + output);
    }
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

如果这不能解决您的问题，请打印输出流（包括错误之一）以查看会发生什么。

# c++ - 如果需要，动态连接 C++ 方法和动态转换

> ID：11080225
> 
> 赞同：0
> 
> 时间：2012-06-18T09:36:15.880
> 
> 标签：c++

我正在寻找一种方法来避免以下问题中的系统动态转换。

我有 Action 对象和 Message 对象。Action 对象具有发出消息的方法和其他接受消息的方法。当然还有派生的 Action 类和 Messages 类。对象及其方法在运行时通过基于定义互连对象网络的配置文件的字符串标识来动态连接。

这相当于一个信号槽系统，它对参数的数量和类型有很强的约束。所有信号都发出从 Message 类派生的消息，所有插槽都接受从 Message 类派生的消息。

连接为 NxN。因此信号是多播的，插槽可以接受来自多个来源的信号。

当前的实现是使用 Link 类来实例化信号和插槽之间的连接。信号和槽是函子成员变量。每个 Action 对象都有两个映射。一个从字符串名称到信号，一个从字符串名称到插槽。还有一个动作名称到实例的全局映射。跟踪目标操作（槽）中的链接的好处是在实例被销毁时正确断开所有链接。

在第一遍中，配置文件中定义的所有动作实例都被实例化，在第二遍中，链接被实例化，将信号连接到插槽。

问题是您将如何实现这一点，以便仅在实例化链接时执行消息类型匹配检查，并且仅在需要时执行动态转换。

例如，如果我们有消息基类 M 和 M 的子类 M1 和 M1 的子类 M2，则从 signal(M2) 到 slot(M1) 或 slot(M) 的链接不会执行动态转换，并且链接从信号（M1）或信号（M）到槽（M2）将执行动态转换。只有动态转换成功时才调用 slot 方法（不返回 nullptr）。

在每次调用时执行动态转换的实现是微不足道的。如果可能，我会寻求解决方案来避免这种情况。

我目前的理解是，由于动态绑定，我不能使用 boost::signals。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:27:28.623

我已经解决了我的问题。这是非常简洁的代码。信号也是一个模板类，它简单地定义了它可能发出的消息类型。因此，在将信号与槽连接时，Link 构造函数可以检查信号发出的消息类型与槽接受的消息类型的多态兼容性。然后无论是否需要动态转换，它都会复制适当的函数指针。此处未显示的是 Type 类以及如何使用它来检查消息类型的兼容性。

答案是如何定义这两个槽函数及其函数指针。

这是一个如何在类中定义插槽的示例：

```
class MyAction : public Action
{
public:
    //! Define shared pointer on object
    typedef std::shared_ptr<MyAction> Ptr;

    //! Constructor
    MyAction( const std::string& name )
        : Action(name),
          m_slotMsgM( this ),
          m_slotMsgA( this ),
          m_slotMsgB( this )
    {
    }

    //! Register the slots with their name for dynamic linking
    void configure()
    {
        add("processMsgM", &m_slotMsgM );
        add("processMsgA", &m_slotMsgA );
        add("processMsgB", &m_slotMsgB );
    }

    //! Slot method 
    void processMsgM( Message::Ptr msg, Link * link = nullptr )
    {
        cout << "MyAction::processMsgM: Msg " << msg->type().name() << endl;
    }

    //! Slot method 
    void processMsgA( MsgA::Ptr msg, Link * link = nullptr )
    {
        cout << "MyAction::processMsgA: Msg " << msg->type().name() << endl;
    }

    //! Slot method 
    void processMsgB( MsgB::Ptr msg, Link * link = nullptr )
    {
        cout << "MyAction::processMsgB: Msg " << msg->type().name() << endl;
    }

protected:
    //! Define slots
    SlotT<MyAction, Message, &MyAction::processMsgM> m_slotMsgM;
    SlotT<MyAction, MsgA, &MyAction::processMsgA> m_slotMsgA;
    SlotT<MyAction, MsgB, &MyAction::processMsgB> m_slotMsgB;
}; 
```

这是 Slot 和 SlotT 类的定义。

```
class Link;
typedef std::set<Link*> LinkSet;

//! Base class for Slot template class
class Slot
{
    friend class Link;
public:
    //! Slot function pointer
    typedef std::function<void ( Message::Ptr, Link* )> Function;

    //! Disconnect all links
    ~Slot();

    //! Return the type of message accepted by this Slot function
    const TypeDef& messageType() const { return m_msgType; }

    //! Return slot function applying a dynamic cast on the message pointer
    Function getDynamicCastFunction() const
        { return m_dynamicCastFunction; }

    //! Return slot function applying a static cast on the message pointer
    Function getStaticCastFunction() const
        { return m_staticCastFunction; }

    //! Operator () using the dynamic cast
    void operator()(Message::Ptr msg, Link * link = nullptr )
        { m_dynamicCastFunction( msg, link); }

protected:

    //! Construct Slot by derived class instance construction only
    Slot( const TypeDef& type, Function dynamicCastFunction,
          Function staticCastFunction ) :
        m_msgType(type),
        m_dynamicCastFunction(dynamicCastFunction),
        m_staticCastFunction(staticCastFunction)
    {
    }

    //! Insert link in set
    void connect( Link* link )
        { m_links.insert( link ); }

    //! Remove link from set
    void disconnect( Link* link )
        { m_links.erase( link ); }

    //! Set of active links
    LinkSet m_links;

    //! Type of accepted messages
    const TypeDef& m_msgType;

    //! Slot method usind dynamic cast on message pointer
    const Function m_dynamicCastFunction;

    //! Slot method using static cast on message pointer
    const Function m_staticCastFunction;
};

template <class TObj, class TMsg, 
          void (TObj::*TMethod)(typename TMsg::Ptr, Link*)>
class SlotT : public Slot
{
public:

    //! SlotT constructor with templated type
    SlotT( TObj* obj )
        : Slot(TMsg::Type(),
          std::bind( &SlotT<TObj,TMsg,TMethod>::dynamicCastFunction, obj,
                                      std::placeholders::_1,
                                      std::placeholders::_2 ),
          std::bind( &SlotT<TObj,TMsg,TMethod>::staticCastFunction, obj,
                                           std::placeholders::_1,
                                           std::placeholders::_2 ) )
    {
    }

private:
    //! dynamic cast function
    static void dynamicCastFunction( TObj* obj, 
                                     typename Message::Ptr msg, 
                                     Link* link )
    {
        typename TMsg::Ptr m = std::dynamic_pointer_cast<TMsg>(msg);
        if( m && obj )
            (obj->*TMethod)(m, link);
    }

    //! static cast function
    static void staticCastFunction( TObj* obj, 
                                    typename Message::Ptr msg, 
                                    Link* link )
    {
        typename TMsg::Ptr m = std::static_pointer_cast<TMsg>(msg);
        if( m && obj )
            (obj->*TMethod)(m, link);
    }    
}; 
```

# sql-server-2005 - 经典 ASP、IIS 5.1、使用 Windows 身份验证登录 SQL Server 时出错

> ID：11080230
> 
> 赞同：-1
> 
> 时间：2012-06-18T09:36:29.497
> 
> 标签：sql-server-2005, iis, asp-classic

我正在尝试在我自己的机器上设置一个测试环境，我们公司的网站是用经典的 asp 编写的。这个想法是使用集成的 Windows 身份验证来连接到数据库。

我正在使用以下连接字符串

```
Provider=SQLOLEDB.1;Server=localhost;Database=Filbert;Integrated Security=SSPI; 
```

但是浏览器响应

```
Microsoft OLE DB Provider for SQL Server (0x80004005)
[DBNETLIB][ConnectionOpen (Connect()).]SQL Server does not exist or access denied. 
```

在 SQL 日志中我可以看到

```
Login failed for user 'NT AUTHORITY\SYSTEM'. [CLIENT: <local machine>]
Error: 18456, Severity: 14, State: 16. 
```

状态 16 错误是

我正在运行 Windows XP SP3、IIS 5.1、SQL Server 2005

编辑：我还使用 SQL 身份验证创建并测试了登录。我可以使用 SQL 管理工作室进行 SQL 身份验证登录，但是从 ASP 尝试时会出现相同的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:14:36.603

我建议您在 SQL Server 中创建一个特定用户，使用该用户测试与数据库的连接，然后在您的 asp 代码中执行以下操作

```
<%
Provider=SQLOLEDB.1;Password=YourPassword;Persist Security Info=True;User ID=YourUserID;_
       Initial Catalog=YourDB;Data Source=YOUR_LOCAL_SERVER_NAME

 Set commInsert = Server.CreateObject("ADODB.Connection")
 commInsert.Open "Provider=SQLOLEDB.1;Integrated Security=SSPI;_
     PersistSecurity Info=False;Initial Catalog=_
     YourDB;_Data Source=YOUR_LOCAL_SERVER_NAME

 'now you can eg do an insert
 strInsertCommand = "INSERT INTO tableName(TextField, NumericField)_
     VALUES('ABCDE', 12345);"
 commInsert.Execute(strInsertCommand) ' Execute the insert command
 commInsert.Close()
 Set commInsert = Nothing
 %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:21:12.553

我已经设法通过将 SQL 提供程序切换到 SQLNCLI 来解决问题

```
Provider=SQL;Server=localhost;Database=Filbert;Integrated Security=SSPI; 
```

# ruby-on-rails - 尝试使用 JRuby on Rails/Trinidad 访问 HBase Java API

> ID：11080237
> 
> 赞同：0
> 
> 时间：2012-06-18T09:36:55.137
> 
> 标签：ruby-on-rails, jruby, hbase, trinidad-gem

我正在尝试在 Rails 3.2 应用程序中将 HBase Java API 与 Trinidad 一起使用。当我将所有 jar 文件放入特立尼达首选的 *.jar 文件夹 Rails.root/lib/jars 时，一切正常。

当我尝试通过 java.rb 初始化文件（在 config/initializers 中）将 jar 文件从项目中分离出来时，它将无法正常工作。（使用 WebBrick，一切都可以顺利进行，但我们无法在生产中使用它。）

java.rb:

```
require 'java'

Dir['/var/apps/jars/*.jar'].each do |jar|
  require jar
end 
```

Trinidad 启动时没有问题，但是一旦请求到达使用 HBaseConfiguration 类的控制器，就会引发以下错误：

```
Java::JavaLang::RuntimeException (hbase-default.xml file seems to be for and old version of HBase (null), this version is 0.90.6-cdh3u4): 
```

似乎 hbase-default.xml 捆绑在 hbase-0.90.6-cdh3u4.jar 文件中，但 HBaseConfiguration 类找不到。

你有关于如何解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:12:49.977

这可能不是“正确”的答案，但您可以自定义 Trinidad 的 jars 路径以指向`/var/apps/jars`您的应用程序（使用命令行或*trinidad.yml*配置）

而不是调整初始化程序，因此当它在 java web-server 中运行时它不会加载 jars（Webrick 是一个 ruby​​ web-server，碰巧在 JRuby 上运行良好，因为它是用纯 Ruby 编写的）例如：

```
Dir['/var/apps/jars/*.jar'].each do |jar|
  require jar
end unless defined?($servlet_context) 
```

至于您遇到的问题，它很可能是 hbase.jar 和/或 hadoop.jar 特定的（类加载器在简单的 jruby 应用程序和 jruby servlet 应用程序中看起来会有所不同），如果没有更多信息，很难判断，例如堆栈跟踪、jar 版本，最重要的是对 hadoop 的配置/资源加载的一些了解。

# emacs - EMACS 重新绑定 C-spc 禁用选定区域的突出显示

> ID：11080242
> 
> 赞同：2
> 
> 时间：2012-06-18T09:37:14.520
> 
> 标签：emacs, elisp

EMACS 24.1。我需要重新绑定`Ctrl-space`到一个自定义函数：

*   走到行尾
*   删除尾随空格（如果有）
*   设置标记（正常`Ctrl-space`）

这是我的代码不起作用：

```
(define-key global-map [?\C- ] 'my-set-mark-command)
(defun my-set-mark-command()
   (interactive)
   (end-of-line)
   (delete-char (* -1 (skip-chars-backward "\t\s")));;delete trailing spaces
   (set-mark-command nil)) 
```

当没有尾随空格时，它正常工作：开始选择并突出显示区域。尾随空格时：删除尾随空格，在行尾停止，设置标记但不突出显示区域。

如果我删除最后一个命令 ( `set-mark-command`) 并手动运行它，`M-x``set-mark-command`它就可以工作。请有人可以帮助我使此功能正常工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T10:05:08.953

修改命令导致变量`deactivate-mark`被重置，导致标记丢失。在它的文档中说明了如何通过将变量`save-excursion`绑定到. 然后，您可以将代码更改为：`deactivate-mark``let`

```
(defun my-set-mark-command ()
   (interactive)
   (end-of-line)
   (let (deactivate-mark)
     (delete-char (* -1 (skip-chars-backward "\t\s"))))  ;;delete trailing spaces
   (set-mark-command nil)) 
```

甚至将整个包含`let`在一个`save-excursion`.

见手册：

[http://www.gnu.org/software/emacs/manual/html_node/elisp/The-Mark.html#index-deactivate_002dmark-2801](http://www.gnu.org/software/emacs/manual/html_node/elisp/The-Mark.html#index-deactivate_002dmark-2801)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:29:38.570

迭戈解释了你想知道的。我只想指出，重新映射 `C-SPC`不是一个好主意。C-SPC 操纵标记环，非常有用。见[手册](http://www.gnu.org/software/emacs/manual/html_node/emacs/Mark-Ring.html)，特别是见`C-u C-SPC`

# php - 同一登录跨多个站点，登录过程透明

> ID：11080246
> 
> 赞同：4
> 
> 时间：2012-06-18T09:37:23.347
> 
> 标签：php, authentication

# 问题

假设我有 example.com、example.org 和 example.net。

所有这些站点都有一个登录名，该登录名根据相同的用户凭据库进行身份验证。

我正在寻找一种有效的方式来只登录一个地方，但仍然能够在网站上透明地登录。

**我当前的解决方案**
......在其中一个站点（我称之为主站点）上加载资源的 iframe，如果用户在主站点登录，则使用令牌刷新页面并通过自动登录用户一些JavaScript。

但这实际上是低效和不安全的，原因如下：

*   用户需要在主站点登录
*   用户需要使用一些客户端代码刷新他的页面（我知道可能无法避免这种情况）。
*   使用 iframe 通常不受欢迎，有些甚至有浏览器插件阻止这些。

**我*不*想要**
什么我 对使用 Facebook、Google 或 OpenID 提供商等第三方提供商不感兴趣，因为这需要我的用户在第三方网站上注册才能使用我的服务。

**总结具体问题**
就像谷歌甚至 StackOverflow 一样，站点之间的身份验证过程似乎是透明的，我需要类似的东西。我目前的解决方案有什么更好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:56:21.237

我无法共享代码......但我实施的解决方案涉及一个中间人来处理我所有网站的身份验证......我们称之为 SSO 代理......

基本上，所有登录请求都通过 SSO 代理，它会在尝试访问 siteb 时确定您是否已经在 sitea 中登录。

...我可以为您指出我们如何实现它的壁橱是： [http ://www.jasny.net/articles/simple-single-sign-on-for-php/](http://www.jasny.net/articles/simple-single-sign-on-for-php/)

其他 sso 解决方案也都有自己的位置，但有些比要求的更复杂。

另一种简单的方法是，简单地在彼此之间传递一些（安全的）令牌。

# gradle - 缓存外部构建脚本以供离线使用

> ID：11080247
> 
> 赞同：1
> 
> 时间：2012-06-18T09:37:23.810
> 
> 标签：gradle

我想将我的大型构建文件的通用部分外部化，以便在项目之间共享它们。在我看来，最简单的选择是将 Gradle 代码放入新的构建文件中并将它们存储在服务器上。然后我可以将它们包含在“应用自：”中。

这样做的缺点是，如果没有 Internet 连接，构建会失败。

你将如何解决这个问题？我可以让 Gradle 缓存在线构建脚本吗？

感谢您分享您对这个问题的看法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-17T18:37:53.187

我现在制作了一个插件来实现这一点：[https ://github.com/kageiit/gradle-url-cache-plugin](https://github.com/kageiit/gradle-url-cache-plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:11:31.070

脚本插件的缓存将在 Gradle 的未来版本中提供。同时，如果您需要离线支持，最好的选择是编写一个二进制插件（实现类`org.gradle.api.Plugin`），将其打包为 Jar，将其发布到存储库，并在任何构建`classpath`的部分中将其指定为依赖项`buildscript`希望使用该插件。有关更多信息，请参阅 Gradle 用户指南中的[编写自定义插件](http://gradle.org/docs/current/userguide/userguide_single.html#custom_plugins)一章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T20:49:52.343

## 此功能在 Gradle 4.2-rc-1 及更高版本中可用

此版本的[发行说明](https://docs.gradle.org/4.2-rc-1/release-notes.html)说 HTTP(S) 上的脚本插件现在已缓存并可离线使用。

> **更好地支持通过 HTTP 加载的脚本插件**
> 
> 脚本插件通过`apply from: 'URL'`语法应用于 Gradle 设置或项目。此版本中改进了对 http:// 和 https:// URL 的支持：
> 
> *   HTTP 脚本插件被缓存以供`--offline`使用。
> *   HTTP 脚本插件的下载遵循代理身份验证设置。

# jquery - 如何删除html字符串中的元素

> ID：11080248
> 
> 赞同：0
> 
> 时间：2012-06-18T09:37:31.423
> 
> 标签：jquery

```
 <div>
       <span>ABC</span>
        <ul>
             <li>list</li>
             <li>list</li>
             <span>ABC</span>
             <li>list</li>
        <ul>
        <span>ABC</span>
  </div> 
```

这是 myString 变量，现在我想从这个字符串中删除 span 元素？所以 myString 将是：

```
 <div>
        <ul>
             <li>list</li>
             <li>list</li>
             <li>list</li>
        <ul>
  </div> 
```

谢谢（remove() 仅适用于顶级元素）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:40:38.890

尝试：

```
var str = '<div><span>ABC</span><ul><li>1</li><li>2</li></ul><span>ABC</span></div>';
var without_span = $(str).find('span').remove().end(); 
```

*end() 获取更新后的字符串（从技术上讲，返回堆栈中的最后一个选择，即在查找之前）。*

**演示**：http: [//jsfiddle.net/t2uNr/](http://jsfiddle.net/t2uNr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:56:48.860

有点硬编码，但会工作。

```
var str = '<div><span>ABC</span><ul><li><li><li></li></ul><span>ABC</span></div>';
stringToReplace='<span>ABC</span>'; /*Enter string to be replaced here*/
var index = str.indexOf(stringToReplace);
        while(index != -1){
            str=str.replace(stringToReplace,'');
            index = str.indexOf(stringToReplace);
        }
alert(str);​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/dVtCx/](http://jsfiddle.net/dVtCx/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:40:16.063

您可以使用 substr 函数执行搜索并手动删除它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:45:26.947

You could try:

```
$('ul').find(span:first).remove(); 
```

I suggest you to assign some class at your UI elements anyway.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T09:44:00.990

它为我工作....

```
$('div').find('span').remove(); 
```

# asp.net - 验证复选框asp.net c#

> ID：11080251
> 
> 赞同：3
> 
> 时间：2012-06-18T09:37:39.063
> 
> 标签：asp.net, validation, checkbox

我正在尝试验证两个复选框。必须检查其中之一才能使表格有效。我想使用 CustomValidator 控件，并在服务器上进行验证。

（此 .ascx 页面是显示在不同 .aspx 页面上的表单。）

首先，我在 .ascx 页面上添加了复选框和 CustomValidator 控件。像这样：

```
<tr>
        <td colspan="3">
            <input type="checkbox" runat="server" name="EmailCourse" class="" id="EmailCourse" value="" />
                Email course
<asp:CustomValidator id="CustomValidator1" runat="server" ErrorMessage="No checkbox checked" 
                 OnServerValidate="validateCheckBoxes_ServerValidate">
                </asp:CustomValidator>

        </td>
    </tr>
<tr>
        <td colspan="3">
            <input type="checkbox" runat="server" name="SpecialReport" class="" id="SpecialReport"  value="" />
                Special report
        </td>
    </tr> 
```

然后，我在 .ascx.cs 页面的代码隐藏中添加了 validateCheckBoxes_ServerValidate 函数，如下所示：

```
 protected void validateCheckBoxes_ServerValidate(object source, ServerValidateEventArgs args)
        {
            if (!EmailCourse.Checked && !SpecialReport.Checked)
                args.IsValid = false;
            else
                args.IsValid = true;

    } 
```

当我尝试在本地站点上打开使用此表单的页面以查看其外观时，我收到一个错误，如下所示：

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS1061：“ASP.common_controls_specialreportform_ascx”不包含“validateCheckBoxes_ServerValidate”的定义，并且没有扩展方法“validateCheckBoxes_ServerValidate”接受“ASP.common_controls_specialreportform_ascx”类型的第一个参数（您是否缺少 using 指令或装配参考？）

和：

> 错误 CS1061：“ASP.common_controls_specialreportform_ascx”不包含“validateCheckBoxes_ServerValidate”的定义，并且没有可以找到接受“ASP.common_controls_specialreportform_ascx”类型的第一个参数的扩展方法“validateCheckBoxes_ServerValidate”（您是否缺少 using 指令或程序集引用？ )

有谁知道这个错误的原因是什么？我是 asp.net 的新手，遇到了麻烦。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:50:54.800

您将 validateCheckBoxes_ServerValidate 放在 *.ascx.cs 中，而它应该在您的 aspx.cs 上。在 ascx.cs 上，您不能像这样引用它在 Parent 上的控件。

将此代码放入您的 aspx.cs 文件：

```
protected void validateCheckBoxes_ServerValidate(object source, ServerValidateEventArgs args)
{
        if (!EmailCourse.Checked && !SpecialReport.Checked)
            args.IsValid = false;
        else
            args.IsValid = true;

} 
```

**编辑：**

您在 ascx 上的自定义验证器应如下所示：

```
<asp:CustomValidator id="CustomValidator1" runat="server" ErrorMessage="No checkbox  checked" ControlToValidate="EmailCourse" OnServerValidate="validateCheckBoxes_ServerValidate"/> 
```

没有这个`ControlToValidate`属性服务器不知道你想验证哪个控件。

**编辑2：**

您是否尝试使用更改`<input type="checkbox"/>`来`<asp:CheckBox />`？并告诉我在 btn 单击或选中/取消选中复选框后应该如何验证？

**编辑3：**

检查您的 .ascx.designer.cs EmailCourse 是否有正确的类型。

**编辑4：**

当你有`<asp:CheckBox .../>`你的`*.ascx`文件时，你应该有你的`ascx.designer.cs` 这种类型`protected global::System.Web.UI.WebControls.CheckBox EmailCourse`

如果这有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:54:45.823

Qs your question seems to be answered, I want to show you how you can write less

```
protected void validateCheckBoxes_ServerValidate(object source, ServerValidateEventArgs args)
{
args.IsValid = (!EmailCourse.Checked && !SpecialReport.Checked);
} 
```

This is the same than what you wrote except this is in one line

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:02:53.760

好的。所以这是有效的：

正如 harry180 建议的那样，我确实需要将 input-type="CheckBox" 切换为 asp:CheckBox。

这触发了一个运行时错误，我在上面对此进行了评论。运行时错误是因为我在进行更改后没有重新编译解决方案，以便修改 ascs.designer.cs 文件。

重新编译后，代码工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T21:57:01.040

我已经做了一个你尝试做的工作示例@user1463201

这是.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="ValidationExample._Default" %>

  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

   <html xmlns="http://www.w3.org/1999/xhtml">
   <head runat="server">
   <title></title>
   </head>
   <body>
      <form id="form1" runat="server">
        <div>
          <asp:ValidationSummary runat="server" ID="myValidationSummary" ValidationGroup="validation"/>
           <table>
             <tr>
                <td>
                  <asp:CheckBox runat="server" ID="cbxEmailCourse" Text="Email course" EnableViewState="True" AutoPostBack="True"/>
              </td>
            </tr>
            <tr>
              <td>
                <asp:CheckBox runat="server" ID="cbxSpecialReport" Text="Special report"/>
              </td>
           </tr>
           <tr>
              <td>
                <asp:TextBox Visible="False" Text="t" runat="server" ID="txtValid" ValidationGroup="validation"></asp:TextBox>
              </td>
              <td>
                <asp:Button runat="server" ID="btnValid" Text="Validate form" ValidationGroup="validation" OnClick="btnValid_Click"/>
                <asp:CustomValidator runat="server" ID="cValidator" ControlToValidate="txtValid" ValidationGroup="validation" OnServerValidate="cValidator_Validate"></asp:CustomValidator>
              </td>
          </tr>
      </table>
   </div>
  </form>
  </body>
 </html> 
```

和 aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace ValidationExample
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void cValidator_Validate(object source, ServerValidateEventArgs args)
        {
            args.IsValid = cbxEmailCourse.Checked && cbxSpecialReport.Checked;
        }

        protected void btnValid_Click(object sender, EventArgs e)
        {
            if (!Page.IsValid)
               Response.Write("Page are not Validate");
        }

    }
 } 
```

我希望我的工作能帮助别人:) 享受

# r - 按频率绘制因子

> ID：11080252
> 
> 赞同：2
> 
> 时间：2012-06-18T09:37:44.097
> 
> 标签：r, plot

我有一个因素`a`：

```
> a
[1]  foo                                                    
[2]  bar                      
[3]  foo                                
[4]  baz                                                     
[5]  bar
[6]  foo 
```

我想要`plot()`这个因素，但只包括最小频率为两个的级别。所以只有 foo 和 bar 被绘制，而不是 baz。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T09:40:46.423

您只需使用标准子集。首先，创建一些表：

```
d = factor(sample(LETTERS, 50, replace=TRUE)) 
```

接下来，创建一个频率表：

```
freq_tab = table(d) 
```

最后，子集和绘图：

```
barplot(freq_tab[freq_tab>=2]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T06:49:15.547

另一种解决方案是`summary`结合使用函数`as.factor`：

```
summary(as.factor(a)) -> b
barplot(b[b>=2]) 
```

# axapta - 缓存文件中保存了什么？

> ID：11080253
> 
> 赞同：2
> 
> 时间：2012-06-18T09:37:45.713
> 
> 标签：axapta, dynamics-ax-2009

Axapta / Dynamics Ax 2009 的 AUC 文件（缓存文件）中保存了什么？

它是否只保存对象，或者可能还保存用户的列布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:48:04.410

[AUC 文件](http://www.axaptapedia.com/index.php/Object_caching)存储对象数据，但不存储用户定义的数据。

基本上，它将使用的对象从服务器 AOD 文件复制到客户端 AUC 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:25:53.100

列布局是 MorphX 设置，存储在 syslastvalue 表中。我认为这是特定用户的应用程序特定的东西，例如窗口位置、文件位置等。删除文件，然后打开 AX，您将看到屏幕短暂闪烁。尝试并截屏，我想你会得到你的答案。

# javascript - 嵌入视频隐藏对话框

> ID：11080257
> 
> 赞同：0
> 
> 时间：2012-06-18T09:38:11.540
> 
> 标签：javascript, jquery

`youtube video`我在网站中嵌入了一个。现在我的问题是当我打开任何对话框窗口或

`jquery ui modal dialog`，视频隐藏了该对话框。我试图`z-Index`增加`dilaog`,

但它不起作用。任何人都可以解决这个问题吗？![我的问题截图](../Images/548a525bec63a20eb9d4aec53625cd46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:47:39.833

您应该在 falsh 对象属性中设置 wmode=opaque。

对于 Youtube [，这将有所帮助](https://stackoverflow.com/questions/3820325/overlay-opaque-div-over-youtube-iframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:47:43.860

**使用 youtube 上的“使用旧嵌入代码”**选项，然后将其添加到对象内部 -

```
<param name="wmode" value="opaque"></param> 
```

这会将 Flash z-index 设置得更低。

```
<object width="420" height="315"><param name="movie" value="http://www.youtube.com/v/G2zpWw_0Er4?version=3&amp;hl=en_US&amp;rel=0"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param>
<embed src="http://www.youtube.com/v/G2zpWw_0Er4?version=3&amp;hl=en_US&amp;rel=0" type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object> 
```

# php - 如何在php中增加文件名后缀

> ID：11080258
> 
> 赞同：0
> 
> 时间：2012-06-18T09:38:15.183
> 
> 标签：php, regex

我对正则表达式和在 php 中使用字符串的理解充其量是很差的，所以如果这对大多数人来说是一个简单的问题，我很抱歉。老实说，我所做的搜索比其他任何事情都让我感到困惑，希望这里有人能给我一个明确的答案。

我只需要在 PHP 中增加文件名的后缀。

文件名如下所示：

13132432343243432434234_1.jpg

我希望保持文件名原样，但用 '_2'、'_3'、'_4' 等替换最后的 '_1' 部分。

不需要检查文件是否存在，这需要一个简单的字符串操作。如果后缀为_1，则将其替换为_2，如果后缀为_4，则将其替换为_5，依此类推。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:42:49.293

沿着这些路线的东西应该这样做：

```
echo preg_replace_callback('/(?<=_)\d+(?=\.)/',
                           function ($m) { return ++$m[0]; },
                           '13132432343243432434234_1.jpg'); 
```

正则表达式匹配*“前面有 a`_`后面有 a的任何数字`.`”*，回调返回这个数字加一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:42:28.030

您也可以不使用正则表达式，使用简单的字符串函数：

```
$filename = '13132432343243432434234_1.jpg';

// Splits into '13132432343243432434234_1' and '.jpg'
list($name, $ext) = explode('.', $filename);

// Splits into '13132432343243432434234' and '1'
list($basename, $index) = explode('_', $name);

$index++; // increment the index

$filename = $basename . '_' . $index . '.' . $ext; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:52:51.097

这应该可以完成这项工作。

```
<?php

$file = "13132432343243432434234_1.jpg"; // old filename

list ($fn,$ext) = preg_split("/\./",$file); // split name and extension

print_r(array($fn,$ext));

list($pre,$suffix) = preg_split("/_/",$fn); // split prefix and suffix

print_r(array($pre,$suffix));

$suffix++; // increment  by 1

$file = $pre . "_" . $suffix . $ext; // regroup

echo "NEW FILENAME: " . $file; // new filename

?> 
```

# ios - UIPageViewController 中的阴影

> ID：11080259
> 
> 赞同：3
> 
> 时间：2012-06-18T09:38:17.960
> 
> 标签：ios, cocoa, uikit

谁能告诉我，如何使用 UIPageViewController 在我的背景图像而不是视图边界周围制作阴影？

换句话说，我有一个看起来像波浪的“不规则背景图像”。当我从一个页面转到另一个页面时，阴影必须围绕“背景图像的波浪”而不是页面矩形。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:44:30.377

您可以使用**QuartzCore.framework**。

每个 UIView 都有一个 CALayer 可以帮助你

1.  将 QuartzCore.framework 添加到您的项目中（构建阶段 => 将二进制文件与库链接）
2.  #import "QuartzCore/QuartzCore.h" 到你将制作阴影的文件

然后您可以执行以下操作：

```
- (void) stylingUIView:(UIView *) _view
{    
    [_view.layer setBorderWidth:3]; // add border to the UIView
    [_view.layer setBorderColor:[UIColor colorWithRed:0.7f green:0.7f blue:0.7f alpha:0.2].CGColor]; // set border Color for the UIView
    [_view.layer setShadowColor:[UIColor blackColor].CGColor]; //set shadow color for the UIView
    [_view.layer setShadowRadius:10]; // set Shadow radius 
} 
```

对于您的情况：您可以执行以下操作：

```
[(UIViewController) viewController.view.layer setShadowRadius:10];
[(UIImageView) *imageView setShadowRadius:10]; 
```

# asp.net-mvc-4 - Asp.Net Web Api：禁用 OData 支持

> ID：11080260
> 
> 赞同：1
> 
> 时间：2012-06-18T09:38:19.733
> 
> 标签：asp.net-mvc-4, odata, asp.net-web-api

是否可以禁用 OData 支持？

我不想要这种自动化，因为过滤应该在数据库级别完成，我想自己做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T12:05:00.090

在 ASP.NET Web API RC 及更高版本中，您需要使用 [Queryable] 属性装饰您的操作以提供 OData 支持。如果你不这样做，那么它就不会被启用。

**更新：** 根据这个提交 - [http://aspnetwebstack.codeplex.com/SourceControl/changeset/changes/af11adf6b3c5](http://aspnetwebstack.codeplex.com/SourceControl/changeset/changes/af11adf6b3c5)从 6 月 7 日起，QueryableAttribute 在最新版本的 Web API 中被完全删除

信息说： *我们计划提供更好的 OData 支持，作为基于 OData 库的单独功能。*

更多信息在这里：[http ://aspnetwebstack.codeplex.com/discussions/359229](http://aspnetwebstack.codeplex.com/discussions/359229)

*我们正在为 ASP.NET Web API 提供更丰富的 OData 支持，包括 OData 格式化程序、EDM 模型构建器、更丰富的查询支持、$metadata 支持和链接生成支持。这个想法是通过为可能不提供完整 OData 查询语义的数据源提供更好的支持以及对自定义业务逻辑提供更灵活的支持来补充 WCF 数据服务中的 OData 支持。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:57:27.003

所以不要`IQuerable`从你的行为中返回。

# regex - 正则表达式 [^)] 无法匹配双引号

> ID：11080264
> 
> 赞同：1
> 
> 时间：2012-06-18T09:38:50.083
> 
> 标签：regex, gnu, grep

我在 Windows 7 命令提示符下使用 GNU grep。

我有一个文件**jsutfstr.txt**，其内容如下：

```
some lines
HELLO("abc",adf)
HELLO("def", sd)
some lines
some lines
some lines 
```

我想grep **HELLO** (..) 模式。在 windows 命令提示符中，我使用了这些：

```
C:\bin>Egrep     HELLO\(\"[^)]+\) jsutfstr.txt
HELLO("abc",adf)
HELLO("def", sd)

C:\bin>Egrep     HELLO\([^)]+\) jsutfstr.txt 
```

所以，第二种模式没有产生任何结果。我不明白为什么我必须明确指定 \"。不是 [^)] 匹配不等于**)**的所有内容，包括双引号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:41:32.227

问题是您首先运行到 shell 解析该行并且`^`是`cmd`. `grep`所以在第二种情况下传递给的行是

```
Egrep     HELLO\([)]+\) jsutfstr.txt 
```

而在第一种情况下，将`"`开始一个引用的参数，其中`cmd`不会查看。

您可以引用完整的论点来避免这种情况：

```
Egrep "HELLO\([^)]+\)" jsutfstr.txt 
```

# ruby - rails 3 嵌套/命名空间路由生成显示操作而不是新的

> ID：11080266
> 
> 赞同：0
> 
> 时间：2012-06-18T09:39:04.097
> 
> 标签：ruby, ruby-on-rails-3, routing

我有一个带有“患者”的 rails 3.2.2 应用程序，他们可以有多种类型的“约会”。所以我做了以下路线：

```
# config/routes.rb
resources :patients do
  namespace :appointments do
    resources :default, :except => [:index]                                           
    resources :pilates, :except => [:index]
  end
end 
```

相关`rake routes`输出：

```
patient_appointments_default_index POST   /patients/:patient_id/appointments/default(.:format)          appointments/default#create
  new_patient_appointments_default GET    /patients/:patient_id/appointments/default/new(.:format)      appointments/default#new
 edit_patient_appointments_default GET    /patients/:patient_id/appointments/default/:id/edit(.:format) appointments/default#edit
      patient_appointments_default GET    /patients/:patient_id/appointments/default/:id(.:format)      appointments/default#show
                                   PUT    /patients/:patient_id/appointments/default/:id(.:format)      appointments/default#update
                                   DELETE /patients/:patient_id/appointments/default/:id(.:format)      appointments/default#destroy
patient_appointments_pilates_index POST   /patients/:patient_id/appointments/pilates(.:format)          appointments/pilates#create
  new_patient_appointments_pilates GET    /patients/:patient_id/appointments/pilates/new(.:format)      appointments/pilates#new
 edit_patient_appointments_pilates GET    /patients/:patient_id/appointments/pilates/:id/edit(.:format) appointments/pilates#edit
      patient_appointments_pilates GET    /patients/:patient_id/appointments/pilates/:id(.:format)      appointments/pilates#show
                                   PUT    /patients/:patient_id/appointments/pilates/:id(.:format)      appointments/pilates#update
                                   DELETE /patients/:patient_id/appointments/pilates/:id(.:format)      appointments/pilates#destroy 
```

请注意，我必须在 rails 变形器上添加 make “default” 和 “pilates” 不可数；否则我得到一些名为“defaults”的路线和其他名为“pilate”的路线：

```
#config/initialize/inflections.rb
ActiveSupport::Inflector.inflections do |inflect|
  inflect.uncountable %w( default pilates )
end 
```

我的问题是我在“显示”操作中解决的任何“新”操作链接。例如，这个：

```
link_to "Add", new_patient_appointments_default_path(@patient) 
```

产生这个（有效的，恕我直言）网址：

```
/patients/14/appointments/default/new 
```

但是当我点击它时，我得到了这个错误：

```
Started GET "/patients/14/appointments/default/new" for 127.0.0.1 at 2012-06-18 11:29:31 +0200
Processing by Appointments::DefaultController#new as HTML
  Parameters: {"patient_id"=>"14"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Patient Load (0.2ms)  SELECT "patients".* FROM "patients" WHERE "patients"."id" = ? LIMIT 1  [["id", "14"]]
  ...
Completed 500 Internal Server Error in 512ms

ActionController::RoutingError (No route matches {
  :action => "show",
  :controller => "appointments/default",
  :patient_id => #<Patient id: 14, ...>,
  :id => #<Appointments::Default id: nil, ...>}) 
```

我已经检查了明显的东西；@patient 对象不是 nil，没有“批量分配问题”，也不是权限问题。控制器没有收到“新”动作，然后检测到错误并重定向到“显示”或类似的东西。

确实似乎该 url 被错误地解析了。

我已经为此投入了几个小时。如果有人对如何解决它有任何指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:47:00.770

我很抱歉。

我尝试为“新”操作渲染一个简单的“纯文本”视图，它起作用了。所以现在我认为这是“新”观点的错误。我仍然不知道为什么 Rails 试图呈现“显示”视图而不是告诉我错误。但我想我可以从这里工作。只要允许我就会关闭这个答案。

# xslt - 通过在一个 xsl 文件中引用该文件来从 xml 文件中检索属性

> ID：11080267
> 
> 赞同：3
> 
> 时间：2012-06-18T09:39:13.770
> 
> 标签：xslt

考虑我的“destinationURLLookUp.xml”文件具有以下结构

```
 <?xml version="1.0" encoding="UTF-8"?>
               <destinationURLs xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
              <destinationURL name="Default Page" value="/abc/ab"/>
                     <destinationURL name="Home Page" value="/abc/ac"/>

                </destinationURLs> 
```

我正在使用以下 XSLT 代码将这个文件加载到我的 XSLT 中，并且必须为我正在处理的“值”检索相应的“名称”属性

```
 <destinationURL> 
```

标签。

我尝试过的 XSLT 片段

```
 <xsl:variable name="prop" select="document('destinationURLLookUp.xml')"/>
                <xsl:variable name="rep2" select="$prop/destinationURLs/destinationURL[@value=@url]/@name"/>
                <xsl:value-of select="$rep2" /> 
```

其中@url 是我将获得的与 'value' 属性匹配的 url 值

```
 <destinationURL> 
```

标签。我无法获得输出。我能否获得用于访问匹配的相应“值”的“名称”属性的相对 xpath。

尝试使用上面显示的 $prop/destinationURLs/destinationURL[@value=@url]/@name。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:22:01.940

我认为您只是缺少明确指定`@url`属性的模板当前内容。正确的 XPath 取决于放置指令的模板。

我说的是这样的事情：

```
<xsl:variable name="rep2" 
 select="$prop/destinationURLs/destinationURL[@value=current()/@url]/@name"/> 
```

请注意`current()/@url`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:49:37.587

您的节点中没有 url 的属性，因此 @value=@url 永远无法工作。

如果您有当前行中使用的 URL，请先将其放入变量中，以便

```
<xsl:variable name="url" select="@url"/>
<xsl:variable name="rep2" select="$prop/destinationURLs/destinationURL[@value=$url]/@name"/> 
```

# c - 可以通过返回指向结构的指针来改进此代码吗？

> ID：11080269
> 
> 赞同：2
> 
> 时间：2012-06-18T09:39:21.260
> 
> 标签：c, pointers

我有以下代码获取接口的 MAC 地址：

```
static struct ifreq get_mac( int socket_desc, char *if_name ) {                                                                                                                                                                         
      struct ifreq if_mac;                                                                                                                                                                                                                
      memset( &if_mac, 0, sizeof( struct ifreq ) );                                                                                                                                                                                       
      strncpy( if_mac.ifr_name, if_name, IFNAMSIZ - 1 );                                                                                                                                                                                  
      ...                                                                                                                                                                                                                                  
      return if_mac;                                                                                                                                                                                                                      
} 
```

我的 C 经验仅限于我在大学所做的事情。我大致得到了指针，但我知道`struct`按值返回大 s 是一个坏主意，因为您可能会用完堆栈空间（stackoverflow！）。如何更改上述代码以返回指向的指针`if_mac`？这有点令人困惑，因为有一个`struct`和一个“地址”运算符：S。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:46:50.880

在参数中给出一个指向预期结构的指针：

```
static int ifreq get_mac(int socket_desc, char *if_name, struct ifreq **if_mac)
{
      if (NULL == (*ifmac = malloc(sizeof (struct ifreq))) {
          return -1;                                        
      }                                                                                                                                                                                                                                                                                                                            
      memset(*if_mac, 0, sizeof(struct ifreq));                                                                                                                                                                                       
      strncpy((*if_mac)->ifr_name, if_name, IFNAMSIZ - 1);                                                                                                                                                                                  
      ...                                                                                                                                                                                                                                  
      return 0;                                                                                                                                                                                                                      
} 
```

如果调用者已经为结构分配空间，函数原型变为：

```
static int ifreq get_mac(int socket_desc, char *if_name, struct ifreq *if_mac) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:47:29.663

您最好将结构指针作为输出参数，从而将动态内存管理（如果有）的决定和责任推迟给调用者：

```
static void get_mac( int socket_desc, char *if_name, struct ifreq *if_mac ) { 
    ...
} 
```

但是，鉴于大多数编译器无论如何都会优化大型结构返回到参数外调用，因此没有多大意义。你知道这个结构`if_mac`有多大吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:46:00.113

Dynamically allocate memory (malloc) to `if_mac` and return the pointer Or Pass the pointer to the function itself, creating one before the function call and apply changes.

Dont return anything in second case. That may help.

# css - 在ie8中输入更多文本时Textarea背景图像滚动

> ID：11080270
> 
> 赞同：0
> 
> 时间：2012-06-18T09:39:22.300
> 
> 标签：css, internet-explorer-8, background, textarea

在 ie8 中输入更多文本时，Textarea 背景图像滚动，我在 css 中使用了精灵概念，所以当输入更多文本时，它会显示另一个图像作为背景

```
textarea{
  border:0 none; 
  background:url(../images/sprite.png) no-repeat -272px -63px; 
  max-height:80px; 
  max-width:191px; 
  overflow-y: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:42:14.083

用这个：

```
background:fixed url(../images/sprite.png) no-repeat -272px -63px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:05:45.820

如果我误解了你的问题，请提前道歉。

你需要这个吗，点击以下网址查看IE8中的Demo：

[http://jsfiddle.net/rathoreahsan/MmVwA/4/](http://jsfiddle.net/rathoreahsan/MmVwA/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:52:29.160

由于微软“纠正”了 IE7 的背景附件问题，现在无法在 input 或 textarea 元素中出现文本溢出并且没有背景滚动文本，如果您尝试“background-attachment：fixed;” 背景甚至不显示。因为没有真正的css hack解决问题，你需要考虑css。代替仅设置 textarea 元素的样式，为 textarea 创建一个类似于容器的补充 div，并将背景图像应用于 div，而不是 textarea。让没有边框和背景的textarea做出适当的叠加。所以我正在使用这样的代码

```
.textarea_div{background:url(../images/sprite.png) no-repeat -272px -63px;}
textarea{border:0 none; 
max-height:80px; 
min-height:80px; 
max-width:191px; 
min-width:191px;} 
```

HTML

```
<div class="textarea"><textarea></textarea></div> 
```

# java - 如何解决“邮件正文未使用 java 在 Outlook 中显示”的问题？

> ID：11080271
> 
> 赞同：0
> 
> 时间：2012-06-18T09:39:23.973
> 
> 标签：java, jakarta-mail

这是我发送邮件的 java 代码，但是当我使用此代码发送时，除了正文之外的所有内容都被发送。

此正文未在 Outlook 中显示，这是我的代码。

包装样品；

```
import java.util.Properties;
import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.Message.RecipientType;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
public class SendMail {
    public void sendMail(String m_from,String m_to,String m_subject,String m_body){
      try {
            Session m_Session;
            Message m_simpleMessage;
            InternetAddress m_fromAddress;
            InternetAddress m_toAddress;
            Properties m_properties;

            m_properties     = new Properties();
            m_properties.put("mail.smtp.host", "fffffff"); 
            m_properties.put("mail.smtp.auth", "true");
            m_properties.put("mail.smtp.starttls.enable", "true");
            m_properties.put("mail.smtp.port", "587");

            m_Session=Session.getDefaultInstance(m_properties,new Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication("anthony.savarimut","1wr345d@1"); // username and the password
                }
            });
            m_Session.setDebug(true);
            m_simpleMessage  =   new MimeMessage(m_Session);
            m_fromAddress    =   new InternetAddress(m_from);
            m_toAddress      =   new InternetAddress(m_to);

            m_simpleMessage.setFrom(m_fromAddress);
            m_simpleMessage.setRecipient(RecipientType.TO, m_toAddress);
            m_simpleMessage.setSubject(m_subject);

            m_simpleMessage.setContent(m_body, "text/html; charset=utf-8");

            //m_simpleMessage.setContent(m_body,"text/plain");

            Transport.send(m_simpleMessage);
        } catch (MessagingException ex) {
            ex.printStackTrace();
        }
    }
    public static void main(String[] args) {
      SendMail send_mail    =   new SendMail();
      String empName = "Antony Raj S";
      String title ="<b>Hi !"+empName+"</b>";
      StringBuffer mailBody = new StringBuffer();
        mailBody.append("<b><Hi  "+empName+">");
        mailBody.append("<br>");
        mailBody.append("<Please Apply Leave for the following date(s  )"+empName+">");
        mailBody.append("<br>");
        mailBody.append("<Regards>");
        mailBody.append("<br>");
        mailBody.append("<HR Team>");
        mailBody.append("<br>");
        mailBody.append("<Slingmedia>");

      send_mail.sendMail("anthony.savarimut@xxxxxx.com", "anthony.savarimut@yyyyy.com", "Please apply for leave for the following dates", mailBody.toString());
    }
} 
```

请帮我解决这个问题。

问候托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:40:33.163

尝试像这样设置身体：

```
MimeBodyPart messageBodyPart = new MimeBodyPart();
//fill message
messageBodyPart.setContent(bodytext, type.type);

Multipart multipart = new MimeMultipart();
multipart.addBodyPart(messageBodyPart);
message.setContent(multipart); 
```

# eclipse - 在 Eclipse 中，如何在 Maven 托管依赖项中搜索类？

> ID：11080273
> 
> 赞同：2
> 
> 时间：2012-06-18T09:39:30.597
> 
> 标签：eclipse, class, maven, jar, dependencies

> **可能重复：**
> [按类名查找 pom 依赖项](https://stackoverflow.com/questions/1371986/find-pom-dependencies-by-classname)

当我的所有依赖项都由 Maven 中的 Eclipse 管理时，如何使用 Ctrl+ Shift+ T 之类的东西来搜索依赖项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T09:48:15.073

我假设您正在使用 m2e 插件（并正确使用它）

Ctrl-Shift-T 适用于 Eclipse 项目库下 JAR 中的类。通过使用 M2E 插件，Maven 的依赖关系被显示为一个库。

请验证您是否将“Maven Dependencies”视为项目下的库之一。如果不是，可能是您错误地导入了项目，或者 POM 有问题。

# iphone - How to track which annotation callout clicked

> ID：11080275
> 
> 赞同：0
> 
> 时间：2012-06-18T09:39:39.930
> 
> 标签：iphone, objective-c, ios, ios4

I am creating an annotation callout with right accessory button, using the following code

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{

if ([annotation isKindOfClass:[MKUserLocation class]]){
    return nil;
}

else {

    static NSString *AnnotationViewID = @"annotationViewID";

    MKAnnotationView *annotationView = (MKAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];

    if (annotationView == nil)
    {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID];
    }

    annotationView.image = [UIImage imageNamed:@"Mevents.png"];
    annotationView.annotation = annotation;
    annotationView.canShowCallout=YES;

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [rightButton addTarget:self action:@selector(showDetails:) forControlEvents:UIControlEventTouchUpInside];

    annotationView.rightCalloutAccessoryView = rightButton;

    //  UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"profile.png"]];
    //  pinView.leftCalloutAccessoryView = profileIconView;
    //  [profileIconView release];

    return annotationView;

}

} 
```

How can I track, **which annotation is clicked**? I want to load the details screen with the **id** and fetch the data based on that id to show info.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:42:48.323

When you create the annotation add a tag to it

```
annotationView.image = [UIImage imageNamed:@"Mevents.png"];
//Add this after
annotationView.tag = 111; 
```

Now in `viewForAnnotation`, check for this tag

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{

if ([annotation isKindOfClass:[MKUserLocation class]]){
    return nil;

    if(annotation.tag == 111)
        //Do something
    else
        //Do some other thing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:03:35.500

hey bro check my answer in the following thread it can help you.

[Pass data to detailView when annotation tapped on mapview](https://stackoverflow.com/questions/10698576/pass-data-to-detailview-when-annotation-tapped-on-mapview/10699028#10699028)

# javascript - 如何重新定位我的 jQuery 弹出窗口？

> ID：11080283
> 
> 赞同：0
> 
> 时间：2012-06-18T09:40:02.567
> 
> 标签：javascript, jquery, html, css

我有一个使用 jQuery 的弹出窗口，但它呈现在与 DIV 相同的位置。我希望弹出窗口呈现在页面中间。是否可以？如果是，那么如何？

我的 CSS：

```
.newpopup {
    display:none;
    border: 1px solid black;
    background-color: #eee;
} 
```

HTML：

```
 <div class='newpopup'>
</div>
<button>popup</button> 
```

JavaScript：

```
function popup() {
    alert('test');
    var popup = $('.newpopup');
    popup.draggable();
    popup.resizable();
    popup.html('<p>Where is pancakes house?</p>');
    popup.show('fast');
}
$(document).ready(function(){
  $('button').click(function(){
     popup();
  });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:41:24.860

设置您的弹出 css`position : absolute`并使用`top & left`属性来设置您的弹出位置。

```
 .newpopup {
    display:none;
    border: 1px solid black;
    background-color: #eee;
    position:absolute;
    top:50%;
    left:50%;
} 
```

**编辑**

我创建了一个 fiddle ，[Jsfiddle](http://jsfiddle.net/bZ8NM/)它在​​这里完美运行，检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:53:07.503

您需要获取屏幕的宽度和高度，以及您创建的框

```
var screen_width = $(document).width();
var screen_height = $(document).height();
var box_width = popup.width();
var box_height = popup.height(); 
```

然后你需要设置`position:absolute;`。`.newpopup`以及它`top`的`left`位置

```
var top = (screen_height - box_height) / 2; // you might like to subtract a little to position it slightly higher than half way
var left = (screen_width - box_width) / 2;
popup.css({ 'position': 'absolute', 'top':top, 'left':left }); 
```

代码可以精简，但拆分起来更容易理解。

**编辑**：您可以使用 将弹出框添加到页面的开头`$(body).prepend(popup);`，这意味着它不会受到任何其他元素的影响

# solr - Solr 复合词标记器 - 结果被视为 OR 语句

> ID：11080287
> 
> 赞同：7
> 
> 时间：2012-06-18T09:40:32.113
> 
> 标签：solr, filter

荷兰语和德语确实有可以组合成*新*词的词；复合词。

例如，“accountmanager”被认为是一个词，由“account”和“manager”这两个词复合而成。我们的用户将在文档和查询中使用“accountmanager”和“account manager”，并期望这两个查询的结果相同。

为了能够*分解*（拆分）单词，solr 有一个我在模式中配置的字典过滤器：

```
<filter class="solr.DictionaryCompoundWordTokenFilterFactory" dictionary="../../compound-word-dictionary.txt" minWordSize="8" minSubwordSize="4" maxSubwordSize="15" onlyLongestMatch="true"/> 
```

Compound-word-dictionary.txt 文件包含用于分解复合词的单词列表。在此列表中，您会找到例如“帐户”和“经理”这两个词。

当在 Solr 调试器中使用查询“accountmanager”搜索时分析时，分解结果是好的：（术语文本）：

*   客户经理
*   帐户
*   经理

但是，此结果被视为 OR 语句，并查找其中至少包含一个术语的所有文档。我希望它表现得像一个 AND 语句（所以我只想要文档中同时包含术语“帐户”和“经理”的结果）。

我尝试将架构中的 defaultOperator 设置为“AND”，但是在使用*edismax*时会忽略它。所以我将建议的*Min-should-Match*设置为 100% (mm=100%)，同样没有任何期望的结果。在架构中调整字典过滤器的属性不会将行为更改为“AND”。

有没有人在使用字典复合词标记工厂时遇到过这种行为并且知道一个解决方案让它表现得像 AND 语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:18:07.797

它按预期工作，DictionaryCompoundWordTokenFilterFactory 只是添加它找到的“内部单词”，在这种情况下，“帐户”和“经理”都可能只是一个，例如，如果单词是“帐户香蕉”和“香蕉”不在字典中，只会添加“帐户”。

这有助于某人寻找“经理”并找到具有“帐户经理”的文档。

为了得到你想要的行为（我知道你在查询端应用这个）你可以使用一个字典，使 accountmanager="account manager"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T17:48:01.680

当我正在研究这个时，请注意，这样做时会有很多额外的噪音。由于 SOLR 3.6 将 CompoundWordTokenFilterBase 中每个损坏标记的位置增量设置为 0，因此您将获得正确索引的查询（有点）。然而，在查询时，您将获得复合词的巨大 OR 查询，因为 AnalyzerQueryNodeProcessor 仅检查 positionCount==1。

例如，搜索 Castaway 将查询 (castaway or cast or away)。这会增加很多噪音，电影 Castaway（实际上是 Cast Away）会起作用，但你也会得到只有“Away”或“Cast”的所有内容。

我们实际上已将 Lucene 修补为 setPositionIncrement 为 1，并在 AnalyzerQueryNodeProcessor 中添加了一些额外的代码，以便您将获得 OR'd PhraseQueryNodes（“castaway”或“cast away”）。这也是不正确的，但会降低噪音。如果将位置始终设置为 1，则短语查询可能会返回奇怪的结果，因为 (castaway0, cast1, away2) 可以返回“castaway away”的结果。此外，后来的职位现在也关闭了。如需更好的描述，请参阅：[http ://blog.mikemccandless.com/2012/04/lucenes-tokenstreams-are-actually.html](http://blog.mikemccandless.com/2012/04/lucenes-tokenstreams-are-actually.html)

# android - 浏览器意图导致应用重新创建活动

> ID：11080288
> 
> 赞同：1
> 
> 时间：2012-06-18T09:40:32.313
> 
> 标签：android, android-activity, android-intent

我注意到，有时（我不知道确切的时间和原因）当我向外部活动（浏览器、画廊、相机）发送意图时，系统会重新创建我的活动。说，我的活动有这个按钮：

```
button.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://google.com");
            startActivity(browserIntent);
        }
    }); 
```

我按下按钮，转到 google.com，然后按回 - 我的活动被重新创建（onCreate 被调用 - 这就是我检测娱乐的方式）。一般来说，这没关系，我听说android可以在内存不足时关闭不在堆栈顶部的活动。但是我有一个与这种行为有关的问题：重新创建活动时，我的一些类字段变为空，因此会导致应用程序崩溃。

避免此类崩溃的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:52:35.527

你已经告诉过你的一些类字段变为空，你可以使用

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    // SAVE YOUR DATA IN OUTSTATE BUNDLE
    outState.putBoolean("save value", value);
    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    value = savedInstanceState.getBoolean("save value");
    super.onRestoreInstanceState(savedInstanceState);
} 
```

onsaveinstancestate 将在 onpause 时保存您的值。当应用程序以这种方式恢复时，onrestoreinstancestate 将恢复您的值，您可以保存或恢复您的值。

您也可以在清单中尝试另一种选择...

android:configChanges="方向"

但谷歌不建议这样做，因为它破坏了 android 活动的自然流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:46:46.963

使用如下finish()方法，

```
button.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://google.com");
            startActivity(browserIntent);
            finish();
        }
    }); 
```

# php - PHP-MySql 中的一列或多列

> ID：11080295
> 
> 赞同：2
> 
> 时间：2012-06-18T09:41:21.227
> 
> 标签：php, mysql, database-design

假设我想将值 a,b,c 存储在 SQL 表中一个选项我必须通过 abc 之类的分隔符存储在 SQL DB 的单个列中（考虑到 a,b,c 值不包含 '-' ）然后在检索到它后由 PHP 解析它。另一种选择是我应该将所有三个值存储在不同的列中。

我的问题是：

> 存储在一列中+检索+解析需要更多时间吗？

或者

> 存储在三个不同的列中并检索它会花费更多的时间和资源吗？

注意：在任何时候，我都需要 a、b、c 的所有三个值，即如果我要检索 'a'，那么我也需要检索 b 和 c。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:44:23.970

You should store them in 3 separate columns. DB are made for this and you should not be afraid at all of performance issue :)

That will save you the pain of parsing after selecting the data and you will be able to use all the possibilites of a database : count occurences of each value...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:45:28.760

I think, it would be right to use three columns as **index** because MySQL stores an index in [B-tree structure](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html), which is more quicker than retrieving and parsing with PHP. [More about indexing](http://www.informit.com/articles/article.aspx?p=377652).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:53:25.867

如果变量的数量一直相同，则应使用 3 个不同的列，但如果不是，则可以将这些值放在 1 列中。我通过添加`#`类似这样的东西来做到这一点`#value#`，当我想要这些值时，我只使用 php 函数[explode](http://php.net/manual/en/function.explode.php) ('#'，$sql_val)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:53:28.663

您可能需要考虑的一件事：*您是否需要添加“D”或“E”...列*？

如果答案是肯定的，或者可能，那么查找表将有助于将来证明您的数据库。

如果 A、B 或 C 列成为可选列，这也将适用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T08:03:09.850

一个有趣的事实是，我可以准确地了解 3 列解决方案***（也就是执行 DB 的标准方式）***的性能，而我无法对您的解决方案发表意见。为什么？你会正确执行它吗？它会没有错误吗？如果您的代码经过审查，这样的设计将很容易被拒绝。

要记住的另一件事是代码维护。经常会看到一个月前写的东西，然后想“这家伙在想什么！？！”。尤其是当你是那个人的时候。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T09:47:39.150

将所有变量存储在一列中可能会稍微快一些，因为 MySQL 只有一个表要查询，而不是三个。但是，您是否应该拆分表的问题与您的性能无关，而与您的数据模型的规范化有关。有关更多信息，请参阅[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)。

为了澄清假设您有一个表名“用户”。假设您要存储用户的 id、名字、姓氏和城市。将它们放在单独的表中是没有意义的。但是，假设您想存储来自网上商店或其他东西的用户订单，您不能将其存储在同一个表中。它不仅涉及不同的东西（订单与用户），而且由于您不知道用户将下多少订单，因此您需要一个新表。

所以规范化=好，将字段放在单独的表中只是因为你可以=不好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-18T09:51:43.593

最好省去解析字符串的麻烦，这也可能会调用更大的函数开销。

此外，您需要所有三个值这一事实并不意味着列数也无关紧要。使用 3 个单独的列，您可以单独查询 A，而无需进行昂贵的查询调用来解析和搜索所需数据的行。

# linux - 如何获取本机系统调用地址

> ID：11080302
> 
> 赞同：3
> 
> 时间：2012-06-18T09:42:05.937
> 
> 标签：linux, kernel, system-calls

在 Linux 上，我试图确定哪些系统调用被挂钩（系统调用挂钩），哪些没有。我需要回答以下问题：

1.  如何从用户空间（具有 root 访问权限）读取挂钩系统调用的地址？

2.  如何获取原始系统调用的地址？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:02:52.340

系统调用表存放在sys_call_table[]下面是linux kenrel中进入系统调用的汇编代码entry.S：

```
sysenter_do_call:
425         cmpl $(NR_syscalls), %eax
426         jae syscall_badsys
427         call *sys_call_table(,%eax,4)
428         movl %eax,PT_EAX(%esp)
429         LOCKDEP_SYS_EXIT
430         DISABLE_INTERRUPTS(CLBR_ANY)
431         TRACE_IRQS_OFF
432         movl TI_flags(%ebp), %ecx
433         testl $_TIF_ALLWORK_MASK, %ecx
434         jne sysexit_audit 
```

由于 sys_call_table 在内核空间，用户态程序不能访问这个符号。您将不得不编写一个内核模块。在其中，您可以打印出存储在 sys_call_table[] 向量数组中的地址。

# c# - 非静态字段所需的对象引用

> ID：11080305
> 
> 赞同：0
> 
> 时间：2012-06-18T09:42:21.800
> 
> 标签：c#, .net

我收到一个错误“非静态字段、方法或属性‘Excel1.Program.GetAllTemplateNames(string, string)’需要对象引用”我知道这很愚蠢，但我对 C# 很陌生，可以做在调试此代码时提供一些帮助。甚至可以从 Main 函数调用静态函数吗？我有这些疑问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:50:58.570

由于是静态的，如果没有此类 () 的实例，则无法从那里`ProcessInput`调用实例（非静态）方法。`GetAllTemplateNames``Program`

因此，您要么需要制作`GetAllTemplateNames`静态，要么需要制作`ProcessInput`非静态。我会选择第二个选项，因为`GetAllTemplateNames`需要访问一些实例变量，这在静态时是不可能的。

`ProcessInput`所以通过以下方式更改签名（注意省略`static`）：

```
public void ProcessInput(String strRetVal, String strFunctionName, /*String strParamCount,*/ String strParam1, String strParam2, String strParam3, String strParam4) 
```

现在您还需要将此方法的调用更改`main`为：

```
var p = new Program();  // create an instance
p.ProcessInput(strRetVal, strFunctionName, /*strParamCount,*/ strParam1, strParam2, strParam3, strParam4); 
```

[MSDN：静态](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T09:45:20.647

如果您希望能够在没有类实例的情况下从其他静态方法调用它，则应该创建该`GetAllTemplateNames`方法：`static`

```
public static void GetAllTemplateNames(String strParam, String strRetVal) 
```

这也意味着此方法使用的字段（`templateClient`并且`taskClient`也必须是静态的）

或者另一种可能性是创建包含类的实例：

```
new Program().GetAllTemplateNames(strParam1, strRetVal); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T09:45:48.057

更改此行

```
 GetAllTemplateNames(strParam1, strRetVal); 
```

到

```
 new Program().GetAllTemplateNames(strParam1, strRetVal); 
```

或使方法静态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T09:46:20.613

问题发生在线路上，以及对或的`GetAllTemplateNames(strParam1, strRetVal);`任何其他呼叫。`GetAllTemplateNames()``ReturnAllTemplateNames()`

这些方法不是静态的，但您是从静态方法调用它们！您需要将它们设为静态，或创建它们的包含类的实例，以便从静态方法（如`main()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T09:55:47.147

主要功能是静态的，这就是您可以调用 ProcessInput 的原因。但是，您不能从静态函数调用非静态函数：GetAllTemplateNames 必须是静态函数。

# java - 使用 java 为 windows phone 7 发送推送通知

> ID：11080308
> 
> 赞同：1
> 
> 时间：2012-06-18T09:42:29.290
> 
> 标签：java, windows-phone-7, push-notification, mpns

我想为 Windows 7 平台的移动应用程序实现移动通知因为我想使用 java servlet 来响应 Microsoft Push Notification Service (MPNS) 任何人都可以帮助在 java 中转换以下 c# 代码

```
 protected void ButtonSendToast_Click(object sender, EventArgs e)
    {
        try
        {
            // Get the URI that the Microsoft Push Notification Service returns to the push client when creating a notification channel.
            // Normally, a web service would listen for URIs coming from the web client and maintain a list of URIs to send
            // notifications out to.
            string subscriptionUri = TextBoxUri.Text.ToString();

            HttpWebRequest sendNotificationRequest = (HttpWebRequest)WebRequest.Create(subscriptionUri);

            // Create an HTTPWebRequest that posts the toast notification to the Microsoft Push Notification Service.
            // HTTP POST is the only method allowed to send the notification.
            sendNotificationRequest.Method = "POST";

            // The optional custom header X-MessageID uniquely identifies a notification message. 
            // If it is present, the same value is returned in the notification response. It must be a string that contains a UUID.
            // sendNotificationRequest.Headers.Add("X-MessageID", "<UUID>");

            // Create the toast message.
            string toastMessage = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
            "<wp:Notification xmlns:wp=\"WPNotification\">" +
               "<wp:Toast>" +
                    "<wp:Text1>" + TextBoxTitle.Text.ToString() + "</wp:Text1>" +
                    "<wp:Text2>" + TextBoxSubTitle.Text.ToString() + "</wp:Text2>" +
                    "<wp:Param>/Page2.xaml?NavigatedFrom=Toast Notification</wp:Param>" +
               "</wp:Toast> " +
            "</wp:Notification>";

            // Set the notification payload to send.
            byte[] notificationMessage = Encoding.Default.GetBytes(toastMessage);

            // Set the web request content length.
            sendNotificationRequest.ContentLength = notificationMessage.Length;
            sendNotificationRequest.ContentType = "text/xml";
            sendNotificationRequest.Headers.Add("X-WindowsPhone-Target", "toast");
            sendNotificationRequest.Headers.Add("X-NotificationClass", "2");

            using (Stream requestStream = sendNotificationRequest.GetRequestStream())
            {
                requestStream.Write(notificationMessage, 0, notificationMessage.Length);
            }

            // Send the notification and get the response.
            HttpWebResponse response = (HttpWebResponse)sendNotificationRequest.GetResponse();
            string notificationStatus = response.Headers["X-NotificationStatus"];
            string notificationChannelStatus = response.Headers["X-SubscriptionStatus"];
            string deviceConnectionStatus = response.Headers["X-DeviceConnectionStatus"];

            // Display the response from the Microsoft Push Notification Service.  
            // Normally, error handling code would be here. In the real world, because data connections are not always available,
            // notifications may need to be throttled back if the device cannot be reached.
            TextBoxResponse.Text = notificationStatus + " | " + deviceConnectionStatus + " | " + notificationChannelStatus; 
        }
        catch (Exception ex)
        {
            TextBoxResponse.Text = "Exception caught sending update: " + ex.ToString();
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:52:39.230

*** ***答案可能已过时*** ***

您应该使用`java-mpns`lib 来更轻松地执行此操作。

这是代码：[https ://github.com/plucury/java-mpns](https://github.com/plucury/java-mpns)

# php - Pear Mails 也使用无效的 smtp 用户发送邮件

> ID：11080315
> 
> 赞同：1
> 
> 时间：2012-06-18T09:42:51.087
> 
> 标签：php, pear

我想使用 pear 邮件扩展来发送经过 SMTP 身份验证的电子邮件。网上有很多例子......这是我的代码：

```
<?php
require_once "Mail.php";

$body = "Testtext";
$subject = "SMTP Testmail";
$mail_to = "valid.adress@test.com";
$mail_from = "valid.sender.adress@othertest.com";

//SMTP Verbindungsdaten
$host = "valid.smtp.com";
$username = "invalidusername@othertest.com";
$password = "validpasswordforotheruser";

$smtp = Mail::factory('smtp',
 array (
 'host' => $host,
 //'auth' => true,
 'auth' => true,
 'username' => $username,
 'password' => $password
));

$headers = array (
 'From' => $mail_from,
 'To' => $mail_to,
 'Subject' => $subject
);
$mail = $smtp->send($mail_to, $headers, $body);

if (PEAR::isError($mail)) {
 echo "Error during sending E-Mail : ". $mail->getMessage();
}
?> 
```

该脚本运行良好，因此我想测试此示例的错误情况并将 smtp 用户更改为无效的内容，并且它仍然有效......我收到了我的邮件。

怎么会这样？

问候

编辑：我现在进行了另一项测试，并将 smtp 服务器更改为无效...文档说必须存在“PEAR_MAIL_SMTP_ERROR_CONNECT”错误...我得到以下输出：“fsockopen() [function. fsockopen]：无法连接到第 108 行 /usr/local/lib/php/Net/Socket.php 中的**xx.xx.xx.xxx:25**（连接被拒绝）"

“可捕获的致命错误：PEAR_Error 类的对象无法在第 222 行的 /usr/local/lib/php/Net/SMTP.php 中转换为字符串”

当 smtp 名称无效时，这个 IP 来自哪里？？？可以是服务器被任何配置否决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:45:41.630

这意味着 SMTP 服务器不会验证登录数据。它可能根本不需要身份验证或支持 SMPT-after-POP（顺便说一句，这是一个非常过时的东西），即如果您的 IP 最近在相应的 POP3 服务器上进行了身份验证，则 SMTP 服务器将不需要您进行身份验证。

尝试将*服务器*更改为可能一直需要身份验证的服务器，例如 gmail SMTP。

# java - 单独的数组编号并将它们保存在浮点数中

> ID：11080318
> 
> 赞同：0
> 
> 时间：2012-06-18T09:43:18.463
> 
> 标签：java, arrays, floating-point

我有一个包含 12 个数字的数组，我想将这 12 个数字保存在 12 个浮点数中。通常我应该如何执行此操作并将每个数字保存在一个浮点数中？

```
array numbers = { a,b,c,....}
object1 = a;
object2 = b; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:45:56.167

```
int[] numbers = { 1, 2, 3, 4, 5, ... };
float f1 = (float) numbers[0];
float f2 = (float) numbers[1];
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:55:41.797

```
int[] numbers = { 1, 2, 3, 4, 5, 6 };

float[] num_floats = new float[numbers.length];

for (int i = 0; i < numbers.length; i++)
{
    num_floats[i] = (float) numbers[i];
} 
```

# python - scipy ndimage过滤器中输出和返回值之间的差异

> ID：11080323
> 
> 赞同：1
> 
> 时间：2012-06-18T09:43:21.477
> 
> 标签：python, image-processing, filter, computer-vision, scipy

我正在开始一个计算机视觉项目，我需要计算水平和垂直 Sobel 的导数。我将 Python 与 Numpy 和 Scipy 一起使用，特别是 ndimage.filters 模块。

我无法理解返回值和输出参数之间的区别。

```
 output_x = np.zeros(image.shape)
   output_y = np.zeros(image.shape)
   filters.sobel(image, 1, output_x)
   filters.sobel(image, 0, output_y)

   return_val_1 = filters.sobel(image, axis=1)
   return_val_2 = filters.sobel(image, axis=0) 
```

如果我绘制返回值图像和输出图像，我会得到不同的结果。为什么？你能帮我么？我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:09:21.817

传入一个输出数组会将结果存储在该数组中，而不是创建一个新数组。

当您需要就地操作以节省内存时，这非常方便。

当您指定一个`output`数组时，ndimage 函数返回`None`. 除此之外，没有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T01:38:48.823

问题是数据类型。

做什么`_ni_support._get_outupt`是`np.zeros(input.shape, input.dtype.name)`，在哪里`input.dtype.name`是uint8。您所做的是`np.zeros(input.shape)`，默认情况下数据类型是浮点数。

我遇到了同样的问题，并通过查看源代码来解决。

# android - 如何将 ImageView 的内容保存到 Android 中的位图？

> ID：11080324
> 
> 赞同：1
> 
> 时间：2012-06-18T09:43:22.910
> 
> 标签：android, bitmap, save, android-imageview

我已经制作了一个带有 ImageView 的应用程序，该应用程序显示用户绘制的位图，一切顺利，但现在我想为用户提供在单击按钮时将图像从 ImageView 保存到 jpeg 文件的可能性. 我怎样才能做到这一点？

这是我的代码：

```
 ImageView imageview;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        imageview=(ImageView)findViewById(R.id.imageviewcomponent);
        imageview.setDrawingCacheEnabled(true);
    }

    //This method sets the Bitmap into the ImageView from the ActivityResult of the Drawing Activity
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == get_code && resultCode == RESULT_OK)
    {
        iv.setImageBitmap((Bitmap) data.getParcelableExtra("Painting"));
        }
    }

    //This is the onClick method of the button for saving the image
    public void SaveAsImage(View btsave) throws FileNotFoundException {
        Bitmap b=Bitmap.createBitmap(imageview.getWidth(), imageview.getHeight(),        Bitmap.Config.ARGB_8888);
        OutputStream fOut = null;
        new File("/sdcard/signatures").mkdir();
        fOut = new FileOutputStream("/sdcard/myPaintings/image.jpg");
        b.compress(CompressFormat.JPEG, 95, fOut);
    } 
```

创建文件夹和保存图像的代码正在运行，因为我可以在 myPainting 文件夹中找到一个 image.jpg 文件，但是图像的内容是完全黑色的，没有用户绘制的图像。如何获取 ImageView 的内容？（而不是位图格式，然后是其他东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:48:22.030

试试这个代码，让我知道会发生什么..

```
//This is the onClick method of the button for saving the image
    public void SaveAsImage(View btsave) throws FileNotFoundException {

        Bitmap b = Bitmap.createBitmap(imageview.getWidth(), imageview.getHeight(),        Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(b);
        imageview.draw(canvas);
        OutputStream fOut = null;
        new File("/sdcard/signatures").mkdir();
        fOut = new FileOutputStream("/sdcard/myPaintings/image.jpg");
        b.compress(CompressFormat.JPEG, 95, fOut);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:57:11.297

user370305 代码的略微修改版本也应该可以工作

```
static void saveDrawable(ImageView imageView) throws FileNotFoundException{
        Drawable drawable = imageView.getDrawable();
        Rect bounds = drawable.getBounds();
        Bitmap bitmap = Bitmap.createBitmap(bounds.width(),bounds.height(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);
        drawable.draw(canvas);
        OutputStream fOut = null;
        try {
            new File("/sdcard/signatures").mkdir();
            fOut = new FileOutputStream("/sdcard/myPaintings/image.jpg");
            bitmap.compress(Bitmap.CompressFormat.JPEG, 95, fOut);
        } finally {
            if ( fOut != null ){
                try {
                    fOut.close();
                } catch (IOException e) {
                    //report error
                }
            }

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-29T19:16:21.880

Imageview 在内部使用**ScaleType**。它将根据屏幕的像素缩放您的图像，如果您想获得图像的原始质量，请使用绘图缓存，

```
 public void SaveAsImage(Holder imageview) throws FileNotFoundException {

    View view=findViewById(R.id.holder_frame);
    Bitmap bmp=viewToBitmap(imageview);
    imageview.setDrawingCacheEnabled(true);
    imageview.buildDrawingCache(true);

   Bitmap bitmap1=imageview.getDrawingCache();
    OutputStream fOut = null;

    new File("/sdcard/Pic").mkdir();
    fOut = new FileOutputStream("/sdcard/Pic/image4.jpg");
    bitmap1.compress(Bitmap.CompressFormat.JPEG, 100, fOut);

    imageview.setDrawingCacheEnabled(false);
    imageview.destroyDrawingCache();
   } 
```

# javascript - 在 iOS 上切换 HTML 视频可见性

> ID：11080327
> 
> 赞同：0
> 
> 时间：2012-06-18T09:43:37.260
> 
> 标签：javascript, html, ios, video

我正在创建一个简单的网络应用程序。页面上有一个`<video>`元素。有一个登录表单在打开时会覆盖整个屏幕，但是如果您在带有视频的页面上，则不管`z-index`视频`visibility: hidden;`控件是否位于覆盖层的顶部。

嗯...它们在视觉下方，但命中区域在上方，因此您无法与登录表单进行交互。

我已经设法在表单打开时使用标签解决了这个`display: none;`问题`<video>`（这也是我尝试过的`visibility: hidden;`，但没有成功）但它并不理想，因为下面的页面移动了很多。

有没有人遇到过这个问题并找到了解决它的好方法？

谢谢 ：）

* * *

*当我打字时，我想通了。我想这是其他人会遇到的问题，所以我在下面回答了它。又好又简单！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:43:39.067

您可以使用一些 javascript/jQuery 简单地隐藏控件：

```
$('video').prop('controls',false); 
```

工作一种享受。

# javascript - 如何拥有图像工具栏？

> ID：11080329
> 
> 赞同：0
> 
> 时间：2012-06-18T09:43:41.347
> 
> 标签：javascript, image-processing, crop

实际上我希望用程序中的图片进行图像裁剪或调整大小等，为此我认为我的项目需要一个图像工具栏......如果它正确，请给我一些想法来学习这项任务......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:46:49.180

它基本上是使用 javascript 和/或 flash 完成的。

提交到服务器时，您将检索您选择的坐标以允许完成图像处理（裁剪/调整大小）。

看看[jCrop](http://deepliquid.com/projects/Jcrop/demos.php)

# google-visualization - 如何禁用谷歌地理图表中的工具提示？

> ID：11080331
> 
> 赞同：5
> 
> 时间：2012-06-18T09:43:48.307
> 
> 标签：google-visualization

我需要在谷歌地理图表中禁用工具提示。我尝试`tooltip.trigger: 'none'`了其他尝试，但我无法禁用工具提示。

如何禁用谷歌地理图表中的工具提示？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:19:40.163

环顾四周并尝试了一些东西，但似乎这个特殊的功能不是地理图表的一部分。对于其他图表，您可以执行以下操作并禁用工具提示：

```
var options = {
    tooltip {
       trigger: 'none'
    }
}; 
```

[我遇到的`div`](https://groups.google.com/forum/#!topic/google-visualization-api/wwz_Fhs8ah0)一种解决方法是创建一个[仅位于地图顶部](https://groups.google.com/forum/#!topic/google-visualization-api/wwz_Fhs8ah0)并禁用地图交互性的方法。不是最好的解决方案，而是一种解决方法，直到它可用为止。您可以看到它在[jsfiddle](http://jsfiddle.net/cchana/JspTt/)上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-06T22:38:48.203

根据您的站点/应用程序需要哪些浏览器来支持简单的 CSS 单线将禁用交互性。

```
#map {
  pointer-events: none;
} 
```

这将导致地图显示为没有交互性的静态图像。但同样，[并非所有浏览器都支持](http://caniuse.com/#feat=pointer-events)它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:22:07.210

[根据 12-09-12 asgalant 的说法](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/J-u_JIq_C90)：

> 您可以通过设置选项 enableRegionInteractivity: false 来禁用工具提示，这也会禁用单击区域。该 API 不公开地理图表的鼠标悬停事件，因此如果您想自己做，则必须手动在 SVG/VML 上挂钩鼠标事件。据我所知，没有很好的方法可以将 SVG/VML 元素映射到 DataTable 元素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-03-25T13:18:31.627

要删除工具提示，只需添加以下选项：

```
var options = {
    tooltip: { trigger: 'none'}
} 
```

完整代码：

```
var map_container = document.getElementById('map_div');
var options = {
    tooltip: { trigger: 'none'}
}
var chart = new google.visualization.GeoChart(map_container);
chart.draw(data, options);` 
```

# sql - 插入一个依赖于先前记录值的值

> ID：11080332
> 
> 赞同：0
> 
> 时间：2012-06-18T09:43:51.667
> 
> 标签：sql, sql-server, sql-server-2008-r2

我在 SQL Server2008 R2 中有大约 5300 万行。我想添加一个名为`Direction`. 方向的值依赖于前几行的坐标，其中进行了简单的计算以确定每个唯一标识符的坐标变化。

如何使用 SQL 脚本和/或语句来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:54:38.490

您真正想要做的是使用新的`LAG`和`LEAD`功能，但由于这些仅在 SQL Server 2012 中可用，您需要找到另一种方法。

这里有一篇博客文章讨论了模拟`LAG`和的五种方法：http `LEAD`: [//blog.sqlauthority.com/2011/11/24/sql-server-solution-to-puzzle-simulate-lead-and-lag-without-使用-sql-server-2012-analytic-function/](http://blog.sqlauthority.com/2011/11/24/sql-server-solution-to-puzzle-simulate-lead-and-lag-without-using-sql-server-2012-analytic-function/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:02:59.023

这需要在表上进行自联接，我相信您已经想通了。如果您的唯一标识符不是连续的，那么您必须使用该`ROW_NUMBER`函数创建一个连续的行号，否则您可以使用唯一标识符。

这是我的测试表，只是为了给你上下文......

```
CREATE TABLE #test(
    test_key INT PRIMARY KEY CLUSTERED,
    lat float,
    lon float,
    direction float
) 
```

如果主键不是顺序的，则需要 user `ROW_NUMBER`。这是这种情况的一个示例。我假设您正在尝试以顺时针方向从北方向旋转的度数来确定方向。`ATN2`将在东边逆时针返回方位，因此我交换了 X 和 Y 坐标以将基础移至北，并否定结果以纠正方向。这应该会给你一个很好的开端。但是请注意，在这个例子`lon`中，`lat`结果`direction`都是弧度。正如我在第二个示例中所做的那样，您可能需要将这些转换为度数。

```
;WITH cte AS (SELECT ROW_NUMBER() OVER (ORDER BY test_key) AS seq, test_key, lat, lon, direction FROM #test)
UPDATE t SET direction = -ATN2(c2.lon-c1.lon, c2.lat-c1.lat)
FROM #test t, cte c1, cte c2 
WHERE t.test_key = c1.test_key
AND c2.seq = c1.seq + 1 
```

第二个示例假设一个顺序的主键和方向、纬度和经度（以度为单位）。

```
UPDATE t1 SET direction = -ATN2((t2.lon-t1.lon)*pi()/180.0, (t2.lat-t1.lat)*pi()/180.0)*180.0/pi()
FROM #test t1, #test t2
WHERE t2.seq = t1.seq + 1 
```

# class - 通过在定义后添加更多方法来扩展 python 类

> ID：11080337
> 
> 赞同：0
> 
> 时间：2012-06-18T09:44:15.420
> 
> 标签：class, methods, python-3.x

```
class A:
    pass

def b(self):
    print('b')

A.b = b

a = A() 
```

此时 ab 是一个很好的绑定方法对象，但如果我说：

```
a.b() 
```

我收到一条错误消息，说 b 至少需要一个参数。

我的问题是： 1\. 如何将方法附加到现有的类上？和 2\. 关于这类事情，是否有任何记录在案的“最佳实践”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:04:51.417

那应该可以正常工作（请参阅：http: [//ideone.com/WWPg8](http://ideone.com/WWPg8)）

Python函数是描述符，分别在类和实例上访问时转换为未绑定和绑定方法；见[http://docs.python.org/howto/descriptor.html](http://docs.python.org/howto/descriptor.html)

“猴子补丁”类和实例被认为是完全可以的，只要您清楚自己在做什么并充分记录它。

# c++ - 根据输入参数确定返回类型

> ID：11080343
> 
> 赞同：2
> 
> 时间：2012-06-18T09:44:28.403
> 
> 标签：c++, templates, boost, return-type

我正在尝试实现一个通用配置文件解析器，我想知道如何在我的类中编写一个能够根据输入参数的类型确定其返回类型的方法。这就是我的意思：

```
class Config
{
    ...
    template <typename T>
    T GetData (const std::string &key, const T &defaultValue) const;
    ...
} 
```

为了调用上述方法，我必须使用这样的东西：

```
some_type data = Config::GetData<some_type>("some_key", defaultValue); 
```

如何摆脱冗余规范？我看到 boost::property_tree::ptree::get() 能够做到这一点，但实现相当复杂，我无法破译这个复杂的声明：

```
template<class Type, class Translator>
typename boost::enable_if<detail::is_translator<Translator>, Type>::type
get(const path_type &path, Translator tr) const; 
```

如果可能的话，我想这样做，而不是在将使用我的 Config 类的代码中创建对 boost 的依赖。

PS：说到 C++ 模板，我是一个 n00b :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:46:26.843

`enable_if`您显示的代码中的 做一些不相关的事情。在您的情况下，您可以删除显式模板规范，编译器将从参数中推断出它：

```
some_type data = Config::GetData("some_key", defaultValue); 
```

更好的是，在 C++11 中你甚至不需要在声明时指定变量类型，它也可以被推断出来：

```
auto data = Config::GetData("some_key", defaultValue); 
```

…但请注意，C++ 只能从参数推断模板参数，而不是返回类型。也就是说，以下内容*不起作用*：

```
class Config {
    …
    template <typename T>
    static T GetData(const std::string &key) const;
    …
} 
```

```
some_type data = Config::GetData("some_key"); 
```

在这里，您要么需要使模板参数显式化，要么使用返回代理类而不是实际对象的技巧，并定义隐式转换运算符。杂乱无章，大多数时候是不必要的。

# c# - Defining the click event for a Login control integrated button

> ID：11080344
> 
> 赞同：0
> 
> 时间：2012-06-18T09:44:30.877
> 
> 标签：c#, asp.net, visual-studio-2008

Gooday. I have a **login** control, **with an integrated user textbox and login button**. I did this little test to see how it works, and surprisingly, after doing this:

```
protected void LoginButton_Click(object sender, EventArgs e)
{
            TextBox userTextBox = (TextBox)Login1.FindControl("UserName");
            userTextBox.Text = "You pressed the button";
} 
```

the userTextBox doesn't change to "You pressed the button". Why? Thanks. Anna

**EDIT: Sure, here is the markup (most of it is generated automatically by the system when adding the Login control); you will notice a button LoginButton integrated in the Login:**

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

<asp:Panel ID="searchPanel" runat="server" DefaultButton="login1$LoginButton">
    <asp:Login ID="Login1" runat="server" 
    FailureText="Logarea a esuat. Reincercati!" LoginButtonText="Logati-va!" 
    PasswordLabelText="Parola:" 
    PasswordRequiredErrorMessage="Trebuie sa introduceti parola." 
    RememberMeText="Tine-ma minte!" TitleText="Logare" 
    UserNameLabelText="Nume de utilizator:" 
    UserNameRequiredErrorMessage="Trebuie sa introduceti numele de utilizator.">
        <LayoutTemplate>
            <table border="0" cellpadding="1" cellspacing="0" 
                style="border-collapse:collapse;">
                <tr>
                    <td>
                        <table border="0" cellpadding="0">
                            <tr>
                                <td align="center" colspan="2">
                                    Logare</td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Nume 
                                    de utilizator:</asp:Label>
                                </td>
                                .........
                            <tr>
                                <td align="right" colspan="2">
                                    <asp:Button ID="LoginButton" runat="server" CommandName="Login" 
                                        Text="Logati-va!" ValidationGroup="Login1" />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </LayoutTemplate>
</asp:Login>
</asp:Panel>
</asp:Content> 
```

The code-behind goes liek this:

```
namespace Cinemax
{
    public partial class Login : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

                        //userTextBox.Focus(); // this sets the focus on the username textbox when the page loads
            this.Title = CinemaxConfiguration.SiteName + ": Login";

        }

        protected void LoginButton_Click(object sender, EventArgs e)
        {
            TextBox userTextBox = (TextBox)Login1.FindControl("UserName");
            TextBox userPassword = (TextBox)Login1.FindControl("Password");

            //Button loginBtn = (Button)Login1.FindControl("LoginButton");
            userTextBox.Text = "You pressed me";

            if (User1.ConnAttempt(userTextBox.Text, userPassword.Text) == 1)
            {
                Session["User"] = userTextBox.Text;
                Response.Redirect("Catalog.aspx");
            }
            else
            {

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:49:19.553

我可能是错的，但你有没有真正将它绑定回控件。

您正在创建一个从登录控件初始化的新文本框。

然后，您设置该文本框的文本，但我认为不会将其绑定回控件本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:47:33.237

TestBox 是一个 ASP 服务器控件，并且是 runat=Server 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:49:01.890

如果您调试应用程序，它是否显示文本已设置？

另外，您在 Page_Load 方法中有设置文本框值的内容吗？你应该把东西放在一个

```
if(!IsPostBack)
{
userTextBox.Text = ""
} 
```

陈述

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:50:37.227

检查您的控件是否为 runat=server 并且您已将控件绑定到事件

```
 this.LoginButton.Click += new System.EventHandler(this.LoginButton_Click); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T09:51:33.327

在您的登录控件中，检查您是否正在设置`userTextBox`in`Page_Load`或任何其他事件的某个值，因为它的值似乎是从其他地方设置的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T10:08:02.310

您必须将其绑定到表单。. .

# stack - Maximum number of elems on stack for infix -> postfix translation

> ID：11080354
> 
> 赞同：0
> 
> 时间：2012-06-18T09:45:24.500
> 
> 标签：stack, infix-notation, polish

I got this as an interview question.

> What is the maximum number of elements that can be on stack at a specific moment while doing a translation from infix form to reversed postfixed Polish form?

I know that the principle is that on the stack there cannot be elements with higher priority (usually * and /) under the ones with smaller priority (+ and -). I tried making an algorithm keeping track of a global and local maximum number, but I didn`t found out a certain rule.

For example if i have `infix: 2 - 3 * 4 * 5 / 1 + 10`
Stack 1: `- * * /` => `maxLocal = 4` `maxGlobal = 4`

Stack 2: (After eliminating /, * and * because + has lower priority) `- +`
=> `maxLocal = 2` `maxGlobal = 4`

Can you please help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:02:26.957

# cocoa - NSDatePicker allows moving forward in time but not backward

> ID：11080357
> 
> 赞同：1
> 
> 时间：2012-06-18T09:45:33.420
> 
> 标签：cocoa, timezone, nscalendar, nsdatepicker

I am using an `NSDatePicker` in calendar format, which should give me the opportunity to move forward and backward through the months by using the little arrowheads.

In my case, I can *only* move forward in time. The 'left' arrow does not do anything. The minimum date is set to something in the past (year 2010), the maximum date to the future (2040), and the picker is initialized with today's date. It should really allow me to move backward. Why is this not happening?

# html - Retrieve data from the server without going to a new web page

> ID：11080366
> 
> 赞同：0
> 
> 时间：2012-06-18T09:46:02.220
> 
> 标签：html

I use a frame from a HTML page to load some data from the server without having to leave the original web page. I simply reassign the src of the frame and the shown data gets updated.

Now I need to programatically create a div, but the width and height have to be retrieved from the server. May I use a frame to get those values, without leaving the web page, or is there a more simple and efficiente way ?

I would prefer not to use ajax, and keep my code as simple as possible, thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:54:18.600

一种最简单的方法是像这样调用页面属性：

```
<script type="text/javascript">
var width = <%=this.Width %>
</script> 
```

并像这样在cs文件中声明这个属性

```
public int Width
        {
            get;
            set;
        } 
```

是你所期望的吗？或者如果您在页面加载后有一些计算，您可以通过使用 jquery ajax 和一个 httphanlder 来简单地实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:39:36.443

使用 jQuery。这真的很简单。

一个简单的例子：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

<script>
   $('#result').load('otherfile.php');​
</script>

<div id="result"> </div> 
```

在标识为“结果”的 div 中加载 otherfile.php。没有页面重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:48:54.403

感谢 jquery 示例，我将来可能会使用它。现在我找到了一种非常简单有效的方法来使用框架（我知道，我知道......）来解决它，它的简单性让我感到非常惊讶：

我创建了一个表单（一个管理多个 div 的 javascript 类），然后在其中创建一个小框架，该框架会更改表单属性并自行移除。

关键是从子级访问父级中定义的 javascript 变量：

```
 echo "<script>";
  echo "parent.window.oDlg.SetSize( ".$row[ "WIDTH" ].", ".$row[ "HEIGHT" ]." );";
  echo "parent.window.oDlg.SetTitle( '".trim( $row[ "TITLE" ] )."' );";
  echo "</script>"; 
```

# xcode - 没有库的通用 Xcode 存档

> ID：11080367
> 
> 赞同：0
> 
> 时间：2012-06-18T09:46:02.873
> 
> 标签：xcode, macos, cocoa

归档我的 Mac OS 应用程序时，我得到一个“通用 Xcode 归档”。我已经读过这可以通过在任何静态库上将**Skip Install**设置为**YES**来解决，但我没有添加任何静态库。我有两个目标和一些框架。

有谁知道为什么会这样？

**编辑**：

当我将第二个目标作为目标依赖项或在“复制文件”中添加到我的“主应用程序”时，就会发生这种情况。有谁知道如何避免这种情况并仍然将这两个项目联系起来？第二个目标是 C 命令行工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:09:01.007

我最终编译了产品并将其添加到我的主要目标中。

它并没有真正解决确切的问题，但它在某种程度上是一个解决方案。

正如 Peter Hosey 所指出的，这可能是一个错误。

# redmine - Redmine bug 记者添加观察者？

> ID：11080369
> 
> 赞同：0
> 
> 时间：2012-06-18T09:46:03.537
> 
> 标签：redmine

是否有可能以及如何授予发布记者以将观察者添加到他们打开的问题的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:22:58.510

是的，这是一个角色选项。管理中 | 角色，编辑角色（我假设您有一个名为“记者”的角色？）。在问题跟踪部分中启用“添加观察者”选项。

# jms - Sending data to Zeitgeist via MQ and/or JMS?

> ID：11080372
> 
> 赞同：1
> 
> 时间：2012-06-18T09:46:13.750
> 
> 标签：jms, gnome, mq, zeitgeist

I have a Java application that I want to send data to the Gnome (Activity) Journal. To keep code loosely coupled I'd like to use a MQ between my Java app and the Zeitgeist API (this allows to swap out the destination without changing my app).

So I'm looking for a way to add data to Zeitgeist from a message queue. Is there sample code somewhere?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:49:48.430

您应该使用[DBUS API 文档](http://zeitgeist-project.com/docs/0.8.2/)。

# javascript - 从服务器端返回 Javascript 对象有什么好处？

> ID：11080374
> 
> 赞同：1
> 
> 时间：2012-06-18T09:46:25.933
> 
> 标签：javascript, jquery, performance, server-side, serverside-javascript

我看到大多数大型网站都返回 javascript 对象而不是纯 HTML 输出，并将其呈现在客户端。

使用这种方法有什么好处？（我认为当谷歌、FB 和其他人使用它们时）。

我认为其中一个优点是在将新 html 插入页面时它不会“冻结”浏览器。[冻结问题](https://stackoverflow.com/questions/191413/why-does-my-spinner-gif-stop-while-jquery-ajax-call-is-running)

如果你有一个好的 javascript API，也很容易传输/处理它。

你认识其他人吗？

![Javascript 对象返回](../Images/98691a78e33cd211f811e28d49e88d7c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:48:48.150

那是[JSON 数据格式](http://json.org/)，而不是 JavaScript 对象（尽管语法是兼容的）。

JSON是：

*   轻的
*   结构化的
*   几乎所有编程语言的库都很好地支持

> 而不是纯 HTML 输出

您给出的特定示例具有嵌入式 HTML。据推测，请求不仅仅是将单个内容插入到页面的单个部分中。

# java - Ignore overloaded methods in a composed object

> ID：11080376
> 
> 赞同：2
> 
> 时间：2012-06-18T09:46:38.780
> 
> 标签：java, json, jackson

Consider the following example:

```
@JsonIgnoreProperties(ignoreUnknown = true)
class ModelA {
  private ModelB modelB;
} 
```

`ModelB` introduces two *overloaded* methods such as `setProperty(String)` and `setProperty(Object)`. This confuses Jackson's `ObjectMapper` complaining about "confliciting setter definitions":

```
Caused by: java.lang.IllegalArgumentException: 
Conflicting setter definitions for property "property": ModelB#setProperty(1 params) vs ModelB#setProperty(1 params) 
```

I'm aware that if I can use *inheritance* then I can use `@JsonIgnore` as in proposed in [this answer](https://stackoverflow.com/a/6349204/248082). I'm also aware that a bottom-line solution would be to develop a custom Jackson deserializer (although very complex in my case). But, I'd like to know if there is a workaround for this if I'm restricted to use *composition*?

# facebook - facebook signed request without authenticating app?

> ID：11080378
> 
> 赞同：-1
> 
> 时间：2012-06-18T09:46:45.027
> 
> 标签：facebook

> **Possible Duplicate:**
> [Facebook signed request problem](https://stackoverflow.com/questions/5703585/facebook-signed-request-problem)

Can i get signed request data in my fanpage tab without authenticating user? I want to get if user has liked my page or not.

I get data when i authenticate user through my application. Dont know why it is empty without authentication. I just need to check if user has liked my page or not.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:24:50.320

我将代码转移到另一台服务器，一切正常。我不知道我的服务器出了什么问题。如果您发现任何原因，请放弃您的答案。

# php - 多列PK表的Doctrine/MySql关系

> ID：11080383
> 
> 赞同：2
> 
> 时间：2012-06-18T09:46:59.397
> 
> 标签：php, mysql, symfony1, doctrine, symfony-1.4

我在 schema.yml (Symfony 1.4) 中的 Post 模型如下所示：

```
Post:
  columns:
    id: { type: bigint, notnull: true, primary: true }
    blog_id: { type: bigint, notnull: true, primary: true }
    user_id: { type: bigint, notnull: true }
    subject: { type: string(255), notnull: true }
    short_body: { type: text, notnull: true }
    long_body: { type: text } 
```

如您所见，Post 有一个多列 PK。我的问题是**“我怎样才能用这个模型创建 n:1 关系？”**

例如，我想要这样的东西：

```
PostComment:
  columns:
    post_id: { type: bigint, notnull: true }
    blog_id: { type: bigint, notnull: true }
    name: { type: string(255), notnull: true }
    email: { type: string(255) }
    text: { type: text, notnull: true }
  relations:
    Post:
      #Here is my problem. What should I write here?
      local: ????
      foreign: ????
      foreignAlias: Comments
      onDelete: cascade
      onUpdate: cascade 
```

我该如何处理这种类型的关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:52:07.163

你不能。您可以向您的 Post 模型添加另一个主键，并保持另外几个字段是唯一的。如果您这样做，我强烈建议您将“id”作为您的主键，并将另一个字段名称与“blog_id”一起使用。然后，像往常一样使用 PostComment 中的关系。

# javascript - 使用数组

> ID：11080384
> 
> 赞同：-3
> 
> 时间：2012-06-18T09:47:00.553
> 
> 标签：javascript, knockout.js

我已经开始学习淘汰赛 API。我写了一小段代码，很简单，但它不起作用。请帮帮我

```
<h4>People(<span data-bind="text: controls().length"> </span>)</h4>
<ul data-bind="foreach:controls">
    <li>
        Id: <span data-bind="text: controls.id"></span>
    </li>
</ul>
<button data-bind="click:$root.addControls">Add</button> 
```

```
var Form = function(){
    this.controls = [{id:"T1",type:"TextInput"},
                                     {id:"T2",type:"TextInput"}];
    this.addControls = function(){
    this.controls.push({id:"",type:""})           
    };

}

var Controls = function(id,type){
   this.id = id;
   this.type = type;              

}

ko.applyBindings(new Form()); 
```

[JS小提琴](http://jsfiddle.net/fTptZ/12/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:24:00.533

检查这个小提琴：http: [//jsfiddle.net/ingro/fTptZ/38/](http://jsfiddle.net/ingro/fTptZ/38/)

我不知道为什么它不能在线工作，但在我本地制作的测试页面上很好。

无论如何，你的一些错误：

1.  控件应该是一个 observableArray：

    ```
    self.controls = ko.observableArray([{id:"T1",type:"TextInput"}, {id:"T2",type:"TextInput"}]); 
    ```

2.  当您使用“foreach”绑定时，您不需要将数组作为前缀：

    ```
    Id:<span data-bind="text: id"></span> 
    ```

3.  你用的是旧版本的 Knockout，2.1.0 已经出来了！

希望这可以帮助！

# java - 将目录、子目录和文件复制到 sd 卡 - android

> ID：11080386
> 
> 赞同：4
> 
> 时间：2012-06-18T09:47:02.533
> 
> 标签：java, android, android-layout, filenotfoundexception, android-assets

我使用以下代码将特定目录及其内容复制到 sd 卡。该目录位于`res/raw`文件夹内。

以下是我使用的代码：

```
public class CopyActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    copyFilesToSdCard();
}

static String extStorageDirectory =  Environment.getExternalStorageDirectory().toString();
final static String TARGET_BASE_PATH = extStorageDirectory+"/Android/data/";

private void copyFilesToSdCard() {
    copyFileOrDir("");
}

private void copyFileOrDir(String path) {
    AssetManager assetManager = this.getAssets();
    String assets[] = null;
    try {
        Log.i("tag", "copyFileOrDir() "+path);
        assets = assetManager.list(path);
        if (assets.length == 0) {
            copyFile(path);
        } else {
            String fullPath =  TARGET_BASE_PATH + path;
            Log.i("tag", "path="+fullPath);
            File dir = new File(fullPath);
            if (!dir.exists())
                if (!dir.mkdirs());
                    Log.i("tag", "could not create dir "+fullPath);
            for (int i = 0; i < assets.length; ++i) {
                String p;
                if (path.equals(""))
                    p = "";
                else 
                    p = path + "/";

                    copyFileOrDir( p + assets[i]);
            }
        }
    } catch (IOException ex) {
        Log.e("tag", "I/O Exception", ex);
    }
}

private void copyFile(String filename) {
    AssetManager assetManager = this.getAssets();

    InputStream in = null;
    OutputStream out = null;
    String newFileName = null;
    try {
        Log.i("tag", "copyFile() "+filename);
        in = assetManager.open(filename);
        if (filename.endsWith(".jpg")) // extension was added to avoid compression on APK file
            newFileName = TARGET_BASE_PATH + filename.substring(0, filename.length()-4);
        else
            newFileName = TARGET_BASE_PATH + filename;
        out = new FileOutputStream(newFileName);

        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1) {
            out.write(buffer, 0, read);
        }
        in.close();
        in = null;
        out.flush();
        out.close();
        out = null;
    } catch (Exception e) {
        Log.e("tag", "Exception in copyFile() of "+newFileName);
        Log.e("tag", "Exception in copyFile() "+e.toString());
    }

}
} 
```

* * *

**例外：**

```
 Exception in copyFile() of /mnt/sdcard/Android/data/raw/edu/anees.txt
 Exception in copyFile() java.io.FileNotFoundException:
 /mnt/sdcard/Android/data/raw/edu/anees.txt: open failed: ENOENT (No such file or directory) 
```

* * *

有人可以让我知道导致此问题的原因和解决方案。

参考：[如何将文件从“资产”文件夹复制到 SD 卡？](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)

**编辑**

我可以使用此处作为答案发布的有关许可的提示之一来解决异常。

现在我遇到了另一个问题，如下所示：

以下日志说我无法在以下路径中创建文件夹：

```
Log.i("tag", "could not create dir "+fullPath);// fullPath = /mnt/sdcard/Android/data/raw 
```

我不想将数据存储在 /mnt/sdcard/Android/data/raw 中，而是希望将资产中的 raw 文件夹的内容复制到路径 /mnt/sdcard/Android/data我提供的参考链接中使用的代码没有发生这种情况。有什么明显的原因可能导致我给出的代码出现这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T09:50:15.510

您可能忘记在清单中设置权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# android - 将大位图发送到服务器时出现内存不足错误

> ID：11080388
> 
> 赞同：0
> 
> 时间：2012-06-18T09:47:05.640
> 
> 标签：android, image

我的问题可能是老问题，但由于过去 2 周的这个问题，我现在很痛苦，现在它太多了，在我的应用程序中，我需要将大图像位图发送到服务器，我通过以下编码来做到这一点：

```
 BitmapFactory.Options bfOptions=new BitmapFactory.Options();
                bfOptions.inDither=false;                     //Disable Dithering mode
                bfOptions.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
                bfOptions.inInputShareable=true;              //Which kind of reference will be used to recover the Bitmap data after being clear, when it will be used in the future
                bfOptions.inTempStorage=new byte[32 * 1024];

                File file=new File(TabGroupActivity.path);
                FileInputStream input=null;
                try {
                    input = new FileInputStream(TabGroupActivity.path);
                } catch (FileNotFoundException e) {
                    //TODO do something intelligent
                    e.printStackTrace();
                }
                if(input!=null)
                {

                bitmap = BitmapFactory.decodeStream(input, null, bfOptions);

                }

                  Matrix mat = new Matrix();//removing rotations

                   if(TabGroupActivity.rotation==90 ||  TabGroupActivity.rotation==270)
                    {
                        mat.setRotate(90);
                    }
                    else if(TabGroupActivity.rotation==0 || TabGroupActivity.rotation==180)
                    {
                        mat.setRotate(0);
                    }
                        bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), mat, true);

                       ByteArrayOutputStream bos = new ByteArrayOutputStream();

                int height= bitmap.getHeight();
                int width=bitmap.getWidth();

                     {
                //formula for calculating aspect ratio 

        float k= (float) height/width;
         newHeight =Math.round(620*k);
             }

        byte[] buffer=new byte[10];

        while(input.read(buffer)!=-1)
        {
             bos.write(buffer);
        }

                bitmap = Bitmap.createScaledBitmap(bitmap , 620, newHeight, true);
                bitmap.compress(CompressFormat.JPEG, 90, bos);
                byte[] imageData = bos.toByteArray();
                ContentBody cb = new ByteArrayBody(imageData, "image/jpg", "image1.jpeg");

                  input.close(); 
```

但是在发送 2,3 张图像后，我出现内存不足错误，`BitmapFactory.decodeStream()`请帮我解决这个问题，主要是我无法重新调整大小或裁剪图像，我只需要将高质量的图像发送到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:08:23.013

每次通过调用来回收位图`bitmap.recycle()`，这应该会有所帮助。还要优化你的代码；这部分：

```
 if(TabGroupActivity.rotation==90 ||  TabGroupActivity.rotation==270)
            {
                mat.setRotate(90);
            }
            else if(TabGroupActivity.rotation==0 || TabGroupActivity.rotation==180)
            {
                mat.setRotate(0);
            }
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), mat, true); 
```

你可以减少到

```
 if(TabGroupActivity.rotation==90 ||  TabGroupActivity.rotation==270)
            {
                mat.setRotate(90);
                bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), mat, true);

            } 
```

因此，您不必在每种情况下都创建新的位图。

此外，您可以尝试`BitmapFactory.Options.inSampleSize`获得更小的图像。

# java - 在 ant/netbeans 中 init 之前定义常量

> ID：11080391
> 
> 赞同：0
> 
> 时间：2012-06-18T09:47:12.593
> 
> 标签：java, ant, build, constants, build.xml

我有一个要在 Tomcat6/JbossAS 5 上运行的 webapp，出于版本控制的目的，我有几个 AND 目标，它们将执行一组操作来定义一个带有版本号和构建日期时间的常量。

目标执行以下操作：

1.  删除 Release.java
2.  将 Release.template 复制到 Release.java，并将版本信息正确设置为常量（公共静态最终字符串）

问题是，常量引用在编译之前在代码上被替换。例如，我在哪里

```
log.debug("Release: " + Release.info); 
```

我可以看到，使用 java 反编译器，以下内容（假设“TO_BE_DEFINED”是 Relase.info 的初始值）：

```
log.debug("Release: TO_BE_DEFINED"); 
```

目标如下：

```
<target name="build-config" >
    <!-- config -->
    <property name="project.name" value="MY PROJECT" />
    <property name="release.prefix" value="MPROJECT" />
    <property name="release.num" value="1.0" />
    <property name="release.info.file.path" value="org/my/project/Release" />
    <tstamp>
        <format property="release.date" pattern="yyyy-MM-dd HH:mm:ss z" />
    </tstamp>
    <!-- end config -->
    <property name="release.version" value="${release.prefix}-${release.num}" />
    <property name="release.info" value="${release.version} ${release.date}" />
</target>
<target name="build-replace">
    <filter token="release.info" value="${release.version} ${release.date}" />
    <delete file="${src.dir}/${release.info.file.path}.java" />
    <copy file="${src.dir}/${release.info.file.path}.template" tofile="${src.dir}/${release.info.file.path}.java" filtering="true" />
</target>

<target name="build-myproj-1.0.jar" depends="init,buil-config,build-replace,compile">
    <mkdir dir="${dist.dir}"/>
    <jar compress="true" jarfile="${dist.dir}/MPROJECT-1.0.jar">
        <fileset dir="${build.classes.dir}"
               excludes="META-INF/*.*, WEB-INF/classes/*.xml"
               includes="**/*.class"
        />
        <manifest>
            <section name="${project.name}">
                <attribute name="Release-Version" value="${release.version}" />
                <attribute name="Release-Date" value="${release.date}" />
            </section>
        </manifest>
    </jar>
</target> 
```

我的班级被定义为

```
public abstract class Release {

/** Release info */
public static final String INFO = "TO_BE_DEFINED";
} 
```

我知道这可能有点令人困惑，如果我遗漏了一些信息，请随时询问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:31:32.243

编译客户端代码时，客户端代码中的编译时常量会被替换。

要让客户端代码获取常量的新值，请重新编译所有内容，用 getter 替换字段，或使用[此问题中的一种策略](https://stackoverflow.com/questions/3524150/is-it-possible-to-disable-javacs-inlining-of-static-final-variables)

# list - 用剃刀获取所有文档类型 umbraco

> ID：11080400
> 
> 赞同：5
> 
> 时间：2012-06-18T09:47:40.643
> 
> 标签：list, razor, document, umbraco

我有一个“信息”类型的文档我也有一些自定义属性。

信息标题信息概要信息正文

我想检索文档类型为“info”的所有文档并输出数据。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T12:25:49.387

这个简单的剃​​刀宏应该可以完成您想要的：

```
@{
    // Get root node:
    var root = Model.AncestorOrSelf();

    // Get all descendants, filter by type:
    var nodes = root.Descendants("info");

    // Loop through the filtered nodes, displaying the properties:
    <ul>
    @foreach (var node in nodes)
    {
        <li>
            <h2>@node.infoTitle</h2>
            <div>@node.infoSummary</div>
            <div>@node.infoBody</div>
        </li>
    }
    </ul>
} 
```

# java - spring Ibatis Mysql ReplicationDriver

> ID：11080402
> 
> 赞同：0
> 
> 时间：2012-06-18T09:47:50.020
> 
> 标签：java, mysql, spring-mvc, ibatis, master-slave

我用过spring3.1 ibatis2.x 和mysql5.5。然后我想使用复制驱动程序。

我的代码是：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.ReplicationDriver" />
    <property name="url" value="jdbc:mysql:replication://192.168.1.160:3306/test,192.168.1.160:3306/test" />
    <property name="username" value="root" />
    <property name="password" value="root" />
..... 
```

那么：</p>

```
Caused by: org.apache.commons.dbcp.SQLNestedException: 
Cannot create PoolableConnectionFactory (Must specify at least one slave host to connect to for master/slave replication load-balancing functionality)
at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549)
at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)
at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
at org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy$TransactionAwareInvocationHandler.invoke(TransactionAwareDataSourceProxy.java:224)
at $Proxy50.getMetaData(Unknown Source)
at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:285)
... 50 more

Caused by: java.sql.SQLException: Must specify at least one slave host to connect to for master/slave replication load-balancing functionality
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:910)
at com.mysql.jdbc.NonRegisteringReplicationDriver.connect(NonRegisteringReplicationDriver.java:107)
at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)
at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 
```

那么如何让ibatis支持replication

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:19:00.473

尝试这个

```
<property name="url" value="jdbc:mysql:replication://192.168.1.160:3306,192.168.1.160:3306/test" /> 
```

格式是：master,slave1,slave2
不要为什么要使用同一台服务器进行负载平衡。

# asp.net - 如何触发 OnCheckedChanged 事件？

> ID：11080404
> 
> 赞同：0
> 
> 时间：2012-06-18T09:47:50.550
> 
> 标签：asp.net, events, sharepoint, checkbox, web-parts

我的 webpart 是用 C# 编程的，应该显示一个表单和一个复选框。如果用户单击它，则必须触发 OnCheckedChanged-Event（我认为是这样）。但是 web 部件此时不会将日期发送到服务器。有了`<asp:checkbox ... AutoPostBack = "true" ... />`它。问题是其他表单字段因此被熄灭/重置，我不想缓存数据。我能做些什么？评估客户端上的复选框是否合理？或者我可以通过其他方式触发 OnCheckedChanged-Event 吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:19:51.940

我认为这是因为 postback 发生的。您必须在页面加载时检查[Ispostback](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)属性以避免此类问题。这也有助于您在回发时防止不需要的函数调用。还要检查您在页面加载中调用的函数。

您也有可能`ViewState="false"`在 html 部分中进行设置。这样控件在回发后就没有任何价值了。确保为控件启用[ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)。

看看这些网址。或在页面加载事件中粘贴您的 html 和代码。

请提供更多细节。

# java - 转义序列

> ID：11080408
> 
> 赞同：-2
> 
> 时间：2012-06-18T09:47:55.013
> 
> 标签：java, string, escaping

我有一个html文本，

```
I scored <font color="red">190</font> on MCAT! 
```

，为了将它作为字符串传递，我需要转换

```
<font color="red"> 
```

至

. 我试过 String.replace() 和 StringTokenizer，但我不得不说我不知道​​如何用 \" 替换 "。

这应该是非常基本的。但我不太清楚该怎么做。

提前致谢！

编辑：我把代码缩进弄混了，所以我试着调整它。但是另一位发帖人刚刚编辑了我的帖子，所以我被指示为我的版本添加更多文本以允许发布。对不起！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:00:22.073

你写`String x= "I scored <font color = \"red\"> 190 </font> on my Mcat!"`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:00:28.423

你可以用这个

```
 String str="I scored <font color='red'>190</font> on MCAT!" 
```

# javascript - $.each 函数没有按预期工作

> ID：11080410
> 
> 赞同：2
> 
> 时间：2012-06-18T09:48:04.997
> 
> 标签：javascript, jquery

最终，我试图创建一个定时幻灯片放映，使图像淡入淡出。我无法弄清楚为什么我的 $.each 函数确实完成了数组每个索引的循环，而是只循环最后一个图像七次。

这是我的代码...

```
<script>
$(document).ready(function(){
    var image1 = "<img width='600' height='400' src='images/image1.jpg' />";
    var image2 = "<img width='600' height='400' src='images/image2.jpg' />";
    var image3 = "<img width='600' height='400' src='images/image3.jpg' />";
    var image4 = "<img width='600' height='400' src='images/image4.jpg' />";
    var image5 = "<img width='600' height='400' src='images/image5.jpg' />";
    var image6 = "<img width='600' height='400' src='images/image6.jpg' />";
    var image7 = "<img width='600' height='400' src='images/image7.jpg' />";
    var image8 = "<img width='600' height='400' src='images/image8.jpg' />";

    var imageArray = new Array(image1, image2, image3, image4, image5, image6, image7, image8);
    $.each(imageArray, function(key, value){
        $('#slide').html(value);
        $('#slide').hide().fadeIn('slow').fadeOut('slow');
    });
});
</script> 
```

同样，最终发生的是最后一张图像在消失之前淡入淡出 7 次。提前谢谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:55:34.347

那是因为您的循环不会等待动画完成。它将所有动画命令一个接一个地保留在队列中。所以最好给一个回调来检查动画何时完成，然后更改图像（通过继续循环）。
否则你必须像 Thilo 建议的那样做

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:03:55.070

`fadeIn`我认为您的问题是 JavaScript 执行在执行他们的操作时不会暂停`fadeOut`。

你的 `each`电话是这样做的：

1.  将 的 HTML 设置`#slide`为`image1`。
2.  隐藏`#slide`。
3.  开始淡入`#slide`。
4.  立即将 HTML 设置`#slide`为`image2`（因为它不等待`fadeIn`完成），覆盖`image1`.
5.  再次开始淡入`#slide`。

等等。

为了得到你想要的结果，你需要一个递归函数（即一个调用自身的函数）而不是你的`each`调用。该函数需要将回调函数传递给 and——`fadeIn`这些`fadeOut`函数将在执行完毕`fadeIn`时被调用。`fadeOut`

例如

```
function fadeImagesInAndOut(imageArray, imageIndex) {
    $('#slide').html( imageArray(imageIndex) );

    $('#slide').hide().fadeIn('slow', function () {

        $('#slide').fadeOut('slow', function () {

            if (imageIndex < imageArray.length) {
                fadeImagesInAndOut(imageArray, imageIndex + 1);
            }
        });
    });
}

fadeImagesInAndOut(imageArray, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T09:59:38.703

事情是动画是异步执行的。在您的代码中执行命令的顺序是：

1.  设置`$('#slide').html`为第一张图片。
2.  让 jQuery 启动对象的动画。动画尚未开始。
3.  设置`$('#slide').html`为第二张图像。
4.  要求另一个动画。
5.  ...
6.  最后求动画。
7.  你的功能已经完成。浏览器开始重绘页面并触发超时事件。您的容器是隐藏的，它的 html 是指最后一个图像。
8.  jQuery 为您的容器设置动画。

只有在动画结束后，您才需要更改容器的 html。这是一个例子：

```
$(document).ready(function(){
  //populate imageArray 
  function animate_one(index) {
    if (index >= imageArray.length) return;
    $('#slide').html(imageArray[index]);
    $('#slide').hide().fadeIn('slow').fadeOut('slow', function() {
      animate_one(index+1);
    });
  }
  animate_one(0);
}); 
```

[小提琴](http://jsfiddle.net/8ytVK/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T09:54:12.233

异步执行的魔力。

事件的时间顺序：

```
 $('#slide').html(image1);
    $('#slide').hide();
    #   fadeIn('slow').fadeOut('slow'); will happen some time later
    $('#slide').html(image2);
    $('#slide').hide();
    #   fadeIn('slow').fadeOut('slow'); will happen some time later
    $('#slide').html(image3);
    $('#slide').hide();
    #   fadeIn('slow').fadeOut('slow'); will happen some time later 
```

循环将进入第二次（和第三次等）迭代，在第一个动画完成之前重置图像直到它是最后一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T09:52:38.690

您正在设置 $('#slide') html 8 次，每次都重写它。可能您打算将每个图像附加到它？

```
$('#slide').append( $(value) ); 
```

此外，您在#slide 上调用 hide() 8 次。这是你的意图吗？

编辑：未经测试，但让您了解如何使用回调

```
var imgArray = new Array(...)

var doAnimate = function(key){
   if(!value = imgArray[key]) return;
   $('#slide').html(value);
   $('#slide').hide().fadeIn('slow').fadeOut('slow', function(){
       doAnimate(key++);
   });
}

doAnimate(0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T10:26:29.537

一种方法（具有很好的淡入淡出效果）：

## *[jsBin 演示](http://jsbin.com/ujecel/2/edit)*

将一个图像放入 DIV 中，而不仅仅是循环将新图像添加到 DIV**中的数组。**使用选择器淡出旧图像（并删除）`:last`。

```
var images = ['image1.jpg','image2.jpg','image3.jpg'];       // your images

var c = 0;                                                   // set the first image
$('#slide').prepend( '<img src="'+ images[c] +'" />' );      // prepend one

function loop(){ 
    $('#slide').prepend( '<img src="'+ images[c++ % images.length] +'" />' );    
       $('#slide img:last').delay(1000).fadeTo(700,0,function(){
            $(this).remove();                                // remove last one
            loop();
       });  
}
loop(); 
```

在您的 css 中确保您的图像绝对定位。

# sql - 今年的第一天

> ID：11080411
> 
> 赞同：16
> 
> 时间：2012-06-18T09:48:10.583
> 
> 标签：sql, postgresql

我在 postgresql 数据库中有以下查询

```
SELECT * 
FROM accounts 
where insertdate BETWEEN '2012-01-01' AND CURRENT_TIMESTAMP 
```

那么我怎样才能代替今年`'2012-01-01'`的第一天的要求

还有一个问题。当我在帐户表中有一条新记录时，同一时刻正在运行上面的选择，所以它不会给我带来我刚刚制作的记录。这合理吗？超越它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-18T09:51:20.643

您正在寻找[`date_trunc()`](http://www.postgresql.org/docs/9.1/static/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC)，它可以将日期截断为指定的精度（例如`year`, `month`, `day`）：

```
SELECT date_trunc('year', now()); 
```

在您的查询中：

```
SELECT * FROM accounts where insertdate BETWEEN 
date_trunc('year', now()) AND CURRENT_TIMESTAMP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:53:42.390

您可以尝试使用此 CURRENT_TIMESTAMP.YEAR-01-01

# nsis - NSIS 无人值守选项

> ID：11080412
> 
> 赞同：2
> 
> 时间：2012-06-18T09:48:11.253
> 
> 标签：nsis, unattended-processing

我想构建一个 NSIS 脚本，它包含三个部分

*   主要部分
*   小节
*   部分共享

如果选中 Main 或 Minor，Shared 是不可见的并且将被安装。如果我启动安装程序，则会检查每个部分（主要，次要）。

现在它应该能够定义该部分（在静默安装中）。我有什么要改变的，只安装主要或次要或两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:50:26.170

```
Name "Test"
Outfile "Test.exe"
;RequestExecutionLevel ?

!include "Sections.nsh"
!include "LogicLib.nsh"
!include "FileFunc.nsh" ;For GetOptions

Page Components "" "" EnforceSectionDependencies
Page InstFiles

Section /o "Main" SID_MAIN
DetailPrint Main
SectionEnd

Section /o "Minor" SID_MINOR
DetailPrint Minor
SectionEnd

Section "" SID_SHARED
DetailPrint Shared
SectionEnd

!macro CheckSectionSwitch sw sid
${GetOptions} $0 '${sw}' $9
${IfNot} ${Errors}
    StrCpy $1 1
    !insertmacro SelectSection ${sid}
${EndIf}
!macroend

Function .onInit
${GetParameters} $0
StrCpy $1 0 ;Any section swithes?
ClearErrors
!insertmacro CheckSectionSwitch '/Main' ${SID_MAIN}
!insertmacro CheckSectionSwitch '/Minor' ${SID_MINOR}

${If} $1 = 0
    ;Set defaults
    !insertmacro SelectSection ${SID_MAIN}
    !insertmacro SelectSection ${SID_MINOR}
${EndIf}

call EnforceSectionDependencies
FunctionEnd

Function EnforceSectionDependencies
!insertmacro UnselectSection ${SID_SHARED}
${If} ${SectionIsSelected} ${SID_MAIN}
${OrIf} ${SectionIsSelected} ${SID_MINOR}
    !insertmacro SelectSection ${SID_SHARED}
${EndIf}
FunctionEnd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:52:48.083

您应该查看文档的[Section management](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.13)部分，特别是[SectionSetFlags](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.13.1)以更改部分选择。

此外，[在使用 SubSections 和 InstTypes 示例时，如何控制部分选择](http://nsis.sourceforge.net/How_to_control_Section_selections,_while_using_SubSections_%26_InstTypes)可能会很有用。

# r - R中的一致错误管理

> ID：11080419
> 
> 赞同：4
> 
> 时间：2012-06-18T09:48:57.617
> 
> 标签：r, error-handling

一旦掌握了典型的 R 错误消息，它们就会非常有用。

尽管如此，我经常发现 R 自己的错误消息并不像我期望的那样提供丰富的信息，所以我通常最终会编写某种定制的错误消息。

现在，我想知道在为特定错误分配唯一错误代码以及附加信息方面是否有一些系统方法（或推荐的最佳实践方法）。

我想我想为错误构建某种哈希表解决方案，其中可以为每个错误存储和检索附加信息。您会使用某种“轻量级”数据库解决方案（例如 SQLite）还是通过存储在某处（ ）并在需要时检索的简单对象`data.frame`或`list`对象来解决这个问题？`.rdata`

## 家庭作业

老实说，我还没有对它做太多的研究。虽然这里至少有一些东西;-)

## 包裹[记者](http://cran.at.r-project.org/web/packages/reportr/index.html)

我刚刚发现了**记者**包，并将更详细地检查它。有没有人有使用该软件包或类似软件包的经验？

## 我自己的方法大纲（部分是伪代码）

```
myFoo <- function(x, ...) {
    tryCatch(
        x * 100,
        error=function(e) {
            record <- retrieveErrorRecord(e) # Does not exist yet
            # 'record' would be some sort of list or Ref Class Object

            if (!length(record)) {
                uid <- generateUid(e) # Does not exist yet
                msg <- paste(
                    "expecting arg 'x' to be of class 'numeric' (was '", 
                    class(x), "')", sep="")
                insertErrorRecord( # Does not exist yet
                    list(
                        uid=uid, 
                        message=msg, 
                        original=e
                    )
                )
                record <- retrieveErrorRecord(e)
            } 
            msg <- c(
                "myFoo/error:\n",
                paste("* Code:     ", record$uid, "\n", sep=""),
                paste("* Message:  ", record$message, "\n", sep=""),
                paste("* Original: ", record$original, "\n", sep="")  
            )
            stop(msg)            
        }
    )
} 
```

这就是消息的样子

```
require("digest")
x <- "abc"
e <- simpleError("test error")
record <- list(
    uid=digest(e),
    message=paste("expecting arg 'x' to be of class 'numeric' (was '", 
        class(x), "')", sep=""),
    original=e
)
msg <- c(
    "myFoo/error:\n",
    paste("* Code:     ", record$uid, "\n", sep=""),
    paste("* Message:  ", record$message, "\n", sep=""),
    paste("* Original: ", record$original, "\n", sep="")  
)
> stop(msg)
Error: myFoo/error:
* Code:     e78e73054b93d2bf682df32845cd064d
* Message:  expecting arg 'x' to be of class 'numeric' (was 'character')
* Original: Error: test error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:22:41.313

恕我直言，一种方法是将当前的 R 错误消息“翻译”为更适合您需求的内容。这可以在（当前关闭？）[http://translation.r-project.org/pootle](http://translation.r-project.org/pootle)页面上轻松完成。这将需要大量的工作/时间......

但是我认为标准的 R 错误/警告消息非常简单，虽然确实是技术性的，但是嘿，我们不是在编程还是什么？:)

但是要给出如何做到这一点的答案/提示（使用 some `regexp`），我已经实现了类似的东西，这可能值得在我的[`eval.msgs`](https://github.com/daroczig/pander/blob/master/R/evals.R#L82)函数中参考（这是在那里调用的更强大的函数的助手`evals`）。

此函数的工作原理类似于`evaluate`，因此评估给定的 R 命令会尝试捕获可能的信息/警告/错误`messages`以及`stdout` **返回**的原始 R 对象。在那里我意识到这些`syntax error`消息在一行中很蹩脚，所以在上面应用了上面`regexp`的例子，结果如下：

```
> x <- 'foobar'
> eval.msgs('x 100')
$src
[1] "x 100"

$result
NULL

$output
NULL

$type
[1] "error"

$msg
$msg$messages
NULL

$msg$warnings
NULL

$msg$errors
[1] "Unexpected numeric constant at character 3 in line 1: ` x 100`"

$stdout
NULL

> eval.msgs('x foo')
$src
[1] "x foo"

$result
NULL

$output
NULL

$type
[1] "error"

$msg
$msg$messages
NULL

$msg$warnings
NULL

$msg$errors
[1] "Unexpected symbol at character 3 in line 1: ` x foo`"

$stdout
NULL

> eval.msgs('x*100')
$src
[1] "x*100"

$result
NULL

$output
NULL

$type
[1] "error"

$msg
$msg$messages
NULL

$msg$warnings
NULL

$msg$errors
[1] "non-numeric argument to binary operator"

$stdout
NULL 
```

# extjs - 带有子数组的 ExtJS 数据存储：未正确加载数据

> ID：11080420
> 
> 赞同：3
> 
> 时间：2012-06-18T09:49:01.470
> 
> 标签：extjs, extjs4

我正在为一些具有一些元数据的数据实现一个小网格编辑器，然后在其中创建一个关联数组，其中包含几个数据点，稍后将用于绘图等。

现在我遇到的问题是将这些数据成功加载到数据存储中，我已经尽可能多地浏览了文档，但是由于我是新手，所以很难找到我正在寻找的东西ExtJS，所以我的搜索术语可能不正确。那么，我应该如何构建我的 ExtJS 数据模型来加载我目前结构化的数据呢？

如果有人可以向我指出正确的文档或工作示例，以便我可以看到我做错了什么，将不胜感激。

到目前为止我写的代码：

```
Ext.require([
    'Ext.form.*',
    'Ext.data.*',
    'Ext.grid.Panel',
    'Ext.layout.container.Column'
]);

Ext.define('TargetProfile', {
    extend  : 'Ext.data.Model',
    fields  : ['profileName', 'description', 'metaData'],
    hasMany : {model: 'TargetPoint', name: 'value'}
});

Ext.define('TargetPoint', {
    extend      : 'Ext.data.Model',
    fields      : [
        {name: 'startTime', type: 'date', dateFormat: 'H:i'},
        {name: 'endTime', type: 'date', dateFormat: 'H:i'},
        {name: 'targetValue', type: 'int'},
        {name: 'comments'}
    ],
    belongsTo   : 'TargetProfile'
});

Ext.onReady(function() {
    Ext.BLANK_IMAGE_URL = '/images/s.gif';
    Ext.QuickTips.init();

    var bd = Ext.getBody();

    var tData = ['TestProfile1', 'Testing', 'Just another test',
        [
        [1, '00:00', '04:00', 27, 'Start of day'],
        [2, '04:00', '08:00', 70, 'Ramp up'],
        [3, '08:00', '13:00', 55, 'Mid day period'],
        [4, '13:00', '18:00', 38, 'Finishing production'],
        [5, '18:00', '20:00', 25, 'Shutting down'],
        [6, '20:00', '00:00', 20, 'Overnight period']
        ]
    ];

    var tDataStore = Ext.create('Ext.data.ArrayStore', {
        model   : 'TargetProfile',
        fields  : ['profileName', 'description', 'metaData',
            [
            {name: 'id', type: 'int'},
            {name: 'startTime', type: 'date', dateFormat: 'H:i'},
            {name: 'endTime', type: 'date', dateFormat: 'H:i'},
            {name: 'targetValue', type: 'int'},
            {name: 'comments'}
            ]
        ],
        data    : tData
    });

    var rowEditing = Ext.create('Ext.grid.plugin.RowEditing', {
        clicksToMoveEditor  : 2,
        autoCancel          : false,
        clicksToEdit        : 2,
        pluginId            : 'rowEditing'
    });

    rowEditing.on('canceledit', function(me) {
        tDataStore.load();
    });

    var gridForm = Ext.create('Ext.form.Panel', {
        id              : 'targetForm',
        frame           : true,
        title           : 'Target Profile',
        bodyPadding     : 5,
        width           : 750,
        layout          : 'column',
        fieldDefaults   : {
            labelAlign  : 'left',
            msgTarget   : 'side'
        },
        dockedItems : [{
            xtype: 'toolbar',
            width: 750,
            dock: 'top',
            items: [{
                xtype: 'button',
                text: 'Add Target Point',
                iconCls: 'icon-add',
                handler: function() {
                    rowEditing.cancelEdit();
                    var r = Ext.create('TargetPoint', {
                        startTime   : '00:00',
                        endTime     : '00:00',
                        targetValue : 0,
                        comments    : ''
                    });
                    tDataStore.insert(0, r);
                    rowEditing.startEdit(0, 0);
                }
            }, {
                xtype: 'button',
                text: 'Save Profile',
                iconCls: 'icon-save',
                handler: function() {
                    tDataStore.save()
                }
            }, {
                xtype: 'button',
                text: 'Delete Profile',
                iconCls: 'icon-delete',
                handler: function() {
                    var selection = gridForm.child('gridpanel').getSelectionModel().getSelection()[0];
                    if (selection) {
                        tDataStore.remove(selection);
                    }
                }
            }]
        }],
        items           : [{
            columnWidth : 0.60,
            xtype       : 'gridpanel',
            store       : tDataStore,
            plugins      : [rowEditing],
            height      : 400,
            title       : 'Target Data',
            columns     : [{
                text        : 'Start Time',
                width       : 75,
                sortable    : true,
                dataIndex   : 'startTime',
                renderer    : Ext.util.Format.dateRenderer('H:i'),
                editor      : new Ext.form.TimeField({format: 'H:i'})
            }, {
                text        : 'End Time',
                width       : 75,
                sortable    : true,
                dataIndex   : 'endTime',
                renderer    : Ext.util.Format.dateRenderer('H:i'),
                editor      : new Ext.form.TimeField({format: 'H:i'})
            }, {
                text        : 'Target Value',
                width        : 75,
                sortable    : true,
                dataIndex   : 'targetValue',
                editor      : new Ext.form.NumberField()
            }, {
                text        : 'Comments',
                flex        : 1,
                sortable    : false,
                dataIndex   : 'comments',
                editor      : new Ext.form.TextField()
            }],
            listeners   : {
                selectionchange: function(model, records) {
                    if (records[0]) {
                        this.up('form').getForm().loadRecord(records[0]);
                    }
                }
            }
        }, {
            columnWidth : 0.4,
            margin      : '0 0 0 10',
            xtype       : 'fieldset',
            title       : 'Target Point Details',
            defaults    : {
                width       : 240,
                labelWidth  : 90
            },
            defaultType : 'textfield',
            items       : [{
                fieldLabel  : 'Start Time',
                name        : 'startTime',
                format      : 'H:i',
                xtype       : 'timefield'
            }, {
                fieldLabel  : 'End Time',
                name        : 'endTime',
                xtype       : 'timefield',
                format      : 'H:i'
            }, {
                fieldLabel  : 'Target Value',
                name        : 'targetValue'
            }, {
                fieldLabel  : 'Comments',
                name        : 'comments'
            }]
        }, {
            columnWidth : 0.4,
            margin      : '0 0 0 10',
            xtype       : 'fieldset',
            title       : 'Meta Data',
            store       : tDataStore,
            defaults    : {
                width       : 240,
                labelWidth  : 90
            },
            defaultType : 'textfield',
            items       : [{
                fieldLabel  : 'Profile Name',
                name        : 'profileName'
            }, {
                fieldLabel  : 'Description',
                name        : 'description'
            }, {
                fieldLabel  : 'Meta-data',
                name        : 'metaData',
                xtype       : 'textarea',
                rows        : 11
            }]
        }],
        renderTo    : bd
    });

    gridForm.child('gridpanel').getSelectionModel().select(0);
}); 
```

以及渲染时的样子：

![当前渲染](../Images/da1486be844db496b46d619327635731.png)

现在，如果我将 DataStores 上的更改还原为此

```
var myData = [
    [1, '00:00', '04:00', 27, 'Start of day'],
    [2, '04:00', '08:00', 70, 'Ramp up'],
    [3, '08:00', '13:00', 55, 'Mid day period'],
    [4, '13:00', '18:00', 38, 'Finishing production'],
    [5, '18:00', '20:00', 25, 'Shutting down'],
    [6, '20:00', '00:00', 20, 'Overnight period']
];

var myMetaData = [
    ['TestProfile1',
     'Testing',
     'Testing the\ntextarea\nbox'
    ]
];

var ds = Ext.create('Ext.data.ArrayStore', {
    fields  : [
        {name: 'id', type: 'int'},
        {name: 'startTime', type: 'date', dateFormat: 'H:i'},
        {name: 'endTime', type: 'date', dateFormat: 'H:i'},
        {name: 'targetValue', type: 'int'},
        {name: 'comments'}
    ],
    data    : myData
});

var ms = Ext.create('Ext.data.SimpleStore', {
    fields  : ['profileName', 'description', 'metaData'],
    data    : myMetaData
}); 
```

我得到以下内容，这更符合我的目标（尽管现在它正在加载包含我的元数据的第二个数据存储，因此更改为想要使用包含所有内容的 1 个存储，以及它的 MongoDB 数据模型）

![以前的渲染](../Images/e22fbc823916630db25446d278c76559.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T10:03:57.243

在您的`hasMany`关联中，`name`属性的值表示 Ext 应该读取相关模型数组的数据中的变量。从文档中，您有以下模型示例：

```
Ext.define('Product', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id',      type: 'int'},
        {name: 'user_id', type: 'int'},
        {name: 'name',    type: 'string'}
    ]
});

Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id',   type: 'int'},
        {name: 'name', type: 'string'}
    ],
    // we can use the hasMany shortcut on the model to create a hasMany association
    hasMany: {model: 'Product', name: 'products'}
}); 
```

然后，Ext 将期望用户存储的数据具有以下格式：

```
[
    {
        "id" : 1,
        "name" : "User 1",
        "products" : [
            {
                "id" : 1,
                "user_id" : 1,
                "name" : "Product 1"
            },
            {
                "id" : 2,
                "user_id" : 1,
                "name" : "Product 2"
            },
            {
                "id" : 3,
                "user_id" : 1,
                "name" : "Product 3"
            },
            ...
        ]
    },
    ...
] 
```

因此，您只需要加载具有正确数据及其相关子数据的商店之一，它会自动建立连接，您可以直接访问用户的产品`user.products()`（这将返回一个包含**此**记录的子数据的商店）

# sql - 如何通过某些条件更改游标的选择语句？

> ID：11080427
> 
> 赞同：2
> 
> 时间：2012-06-18T09:49:47.853
> 
> 标签：sql, sql-server-2008, tsql

有没有人知道如何为同一个游标设置不同的选择语句？我需要这样的想法。

```
DECLARE Temp_Cursor CURSOR FOR
IF(@TempVar = 1)
BEGIN
    SELECT CustomerId FROM Customers
END
ELSE IF(@TempVar = 2)
BEGIN
    SELECT OrderId FROM Orders
END
OPEN Temp_Cursor;
FETCH NEXT FROM TempCursor INTO @TempObjectId
WHILE @@FETCH_STATUS = 0
BEGIN 
```

.... ETC

我找到了解决方案：`DECLARE @Temp_Cursor CURSOR IF(@TempVar = 1) BEGIN SET @Temp_Cursor = CURSOR FOR SELECT CustomerId FROM Customers END ELSE IF(@TempVar = 2) BEGIN SET @Temp_Cursor = CURSOR FOR SELECT OrderId FROM Orders END OPEN @Temp_Cursor; FETCH NEXT FROM @TempCursor INTO @TempObjectId WHILE @@FETCH_STATUS = 0 BEGIN`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:53:34.680

完整的查询应该是动态的。这意味着执行计划将在运行时出现。

**例子**

```
Declare @SelectStatement Varchar(50)
Declare @SQL Varchar(50)

IF(@TempVar = 1)
BEGIN
    Set @SelectStatement = SELECT CustomerId FROM Customers
END
ELSE IF(@TempVar = 2)
BEGIN
    Set @SelectStatement = SELECT OrderId FROM Orders
END

Set @SQL = 'DECLARE Temp_Cursor CURSOR FOR
OPEN Temp_Cursor;
FETCH NEXT FROM TempCursor INTO ' + @TempObjectId +
'WHILE @@FETCH_STATUS = 0
BEGIN ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:54:08.737

放在`IF`外面，做两个不同的游标，每种情况一个。

像这样：

```
IF(@TempVar = 1)
BEGIN

    DECLARE Temp_Cursor CURSOR FOR
    SELECT CustomerId FROM Customers

    OPEN Temp_Cursor;
    FETCH NEXT FROM TempCursor INTO @TempObjectId
    WHILE @@FETCH_STATUS = 0
    BEGIN 
    ....
END
ELSE IF(@TempVar = 2)
BEGIN

    DECLARE Temp_Cursor CURSOR FOR
    SELECT OrderId FROM Orders

    OPEN Temp_Cursor;
    FETCH NEXT FROM TempCursor INTO @TempObjectId
    WHILE @@FETCH_STATUS = 0
    BEGIN 
    ....
END 
```

* * *

另一种可能性是使用[Dynamic SQL](http://www.sommarskog.se/dynamic_sql.html)。

# c# - 使用 MethodInvoker 时出现不可调用错误

> ID：11080428
> 
> 赞同：0
> 
> 时间：2012-06-18T09:49:51.377
> 
> 标签：c#, invoke

我使用这段代码：

```
 MethodInvoker TileLoadCompleteMethodInvoker = delegate()
{
    CleanStatusLabelTimer.Enabled = true;
    MemoryTextBox.Text = string.Format(System.Globalization.CultureInfo.InvariantCulture, "{0:0.00} MB of {1:0.00} MB", MainMapControl.Manager.MemoryCache.Size, MainMapControl.Manager.MemoryCache.Capacity);
};
try
{
    BeginInvoke(TileLoadCompleteMethodInvoker);
}
catch (TargetInvocationException ex)
{
    BLL.FunctionsClass.LogExceptions(ex.InnerException);
} 
```

LogExceptions 方法在这里：

```
 public class LogExceptions
{
public static void WriteLogException(Exception exMsg)
{
    string filePath = Application.StartupPath + "\\ExceptionLog.log";
    using (System.IO.StreamWriter file = new System.IO.StreamWriter(filePath, true))
    {
        file.WriteLine("-------------------Exception Begin----------------------");
        file.WriteLine(string.Format("Date: {0}, Time: {1}", DateTime.Now.ToShortTimeString()));
        file.WriteLine(string.Format("Exception Message: {0}", exMsg.ToString()));
        file.WriteLine(string.Format("Source: {0}", exMsg.Source));
        file.WriteLine("-------------------Exception End----------------------");
        file.WriteLine();
    }
}
} 
```

此方法将异常保存在日志文件中。但是调用 LogExceptions 方法时发生此错误； **不可调用的成员 'IslamAtlas.BLL.FunctionsClass.LogExceptions' 不能像方法一样使用。** 我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:52:48.567

您正在调用类，而不是方法！
改用这个：

```
BLL.FunctionsClass.LogExceptions.WriteLogException(ex.InnerException); 
```

更多：这里还有另一个错误：

```
string.Format("Date: {0}, Time: {1}", DateTime.Now.ToShortTimeString() 
```

你`String.Format`用两个参数调用，但只传递一个！

越来越多：这条线

```
string.Format("Exception Message: {0}", exMsg.ToString()) 
```

应该在我看来

```
string.Format("Exception Message: {0}", exMsg.Message) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:52:38.440

你有这样的称呼：

```
BLL.FunctionsClass.LogExceptions.WriteLogException(ex.InnerException); 
```

# iphone - 以编程方式启用/禁用 Interface Builder uibutton

> ID：11080431
> 
> 赞同：0
> 
> 时间：2012-06-18T09:50:10.630
> 
> 标签：iphone, button

在我的 mapkit 应用程序中，我将能够启用/禁用通过 Interface Builder 以编程方式创建的按钮。这个想法是如果选择了注释，则启用一个或多个按钮，否则禁用。例如，在我的一个动作中：

```
-(void)traceRoute:(id)sender{
 //trace route between user location and annotation selected
} 
```

定义是为了跟踪用户位置和注释 mapkit 之间的路线。在 IB 中，定义了一个按钮并链接到该操作，它可以工作。但我不明白如何启用未以编程方式定义但在界面构建器中定义的按钮。任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:55:21.610

试试这个

```
-(void)traceRoute:(id)sender{
     UIButton *button = (UIButton *)sender;
     [button setEnable:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:53:56.947

在 IB 中，我们确实有启用选项。如果我们想根据条件启用/禁用它，那么我们需要创建按钮的出口并以编程方式处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:55:55.073

您需要在视图控制器界面中定义该按钮：

```
IBOutlet UIButton* myButton; 
```

将此插座连接到 IB 中的按钮，然后您可以执行以下操作：

```
[myButton setEnabled:YES]; 
```

# c# - 保留动态添加的文本框的值

> ID：11080432
> 
> 赞同：1
> 
> 时间：2012-06-18T09:50:10.957
> 
> 标签：c#, asp.net, textbox

我通过按钮点击后面的代码动态添加了文本框，它工作正常。在另一个按钮上单击我想获取所有动态添加的文本框的值。但是文本框的值是空的。如何在回发时保留动态添加的文本框的值？

aspx 代码

```
<asp:Table runat="server" id="placeAddTds">
  <asp:TableRow>

    <asp:TableCell><asp:TextBox ID="txt_from" runat="server" class="sabsw" TabIndex="88"></asp:TextBox></asp:TableCell>
    <asp:TableCell><asp:TextBox ID="txt_to" runat="server" class="sabsw" TabIndex="89"></asp:TextBox></asp:TableCell>
    <asp:TableCell><asp:TextBox ID="txt_per" runat="server" class="sabsw" TabIndex="90"></asp:TextBox></asp:TableCell>

    <asp:TableCell>
    <asp:Button class="main-btn add-btn pointer" runat="server" ID="btn_add" Text="Add" OnClick="TdsAddClick" TabIndex="91"></asp:Button>
   </asp:TableCell>
  </asp:TableRow>
  </asp:Table> 
```

后面的代码：

```
 protected void TdsAddClick(object sender,EventArgs e)
    {
        try
        {
            TextBox[] l1 = new TextBox[txtcount];
            TextBox[] l2 = new TextBox[txtcount];
            TextBox[] l3 = new TextBox[txtcount];
            for (int j = 1; j < txtcount; j++)
            {
                l1[j] = new TextBox();
                l2[j] = new TextBox();
                l3[j] = new TextBox();
                l1[j].ID = "txt_from" + j;
                l1[j].Attributes.Add("class","sabsw");
                l2[j].ID = "txt_to" + j;
                l2[j].Attributes.Add("class", "sabsw");
                l3[j].ID = "txt_per" + j;
                l3[j].Attributes.Add("class", "sabsw");
                placeAddTds.Rows.Add(new TableRow());
                placeAddTds.Rows[j].Cells.Add(new TableCell());
                placeAddTds.Rows[j].Cells[0].Controls.Add(l1[j]);
                placeAddTds.Rows[j].Cells.Add(new TableCell());
                placeAddTds.Rows[j].Cells[1].Controls.Add(l2[j]);
                placeAddTds.Rows[j].Cells.Add(new TableCell());
                placeAddTds.Rows[j].Cells[2].Controls.Add(l3[j]);
           }
            txtcount++;
        }
        catch (Exception ex)
        {
        }
    } 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:11:51.307

我希望这是您评论中他的**要求**。

**我有两个按钮。单击一个按钮时，我想动态添加文本框，单击第二个按钮时，我想保存数据库中所有文本框的值**

您有 2 个按钮 一个按钮可以使用 Jquery 创建 TextBox。（与回发相比，客户端脚本要快得多）。

[*在这里您可以看到如何使用 Jquery 添加文本框*](http://jsfiddle.net/u9hvp/)

因此，您可以动态添加文本框而无需回发。

[*另一个按钮，您可以使用 Jquery 序列化表单并将其发送到服务器。*](http://jsfiddle.net/sxGtM/3/)

**将数据传递给服务器** 它将创建一个 JSON 对象并将其传递给服务器。你可以传入 __doPostBack(control,args)。在 args 中，您可以传递 JSON 值。 [点击这里](http://joinwind.wordpress.com/2010/10/21/understanding-the-javascript-__dopostback-function-passing-arguments/)

**处理 JSON 数据**

[C# JSON 自定义序列化](https://stackoverflow.com/questions/4547550/c-sharp-json-custom-serialization) 这将展示如何从 JSON 获取数据。

这是一种可以通过客户端脚本实现的方法，并且可能比您建议的方法运行得更快。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:08:06.017

您可以在代码隐藏中为此添加一个带有 ViewState 的属性，并将所有值存储在一个列表中：

```
private List<string> TextBoxValue
        {
            get
            {
                return (List<string>)ViewState["TextBoxValue"];
            }
            set
            {
                ViewState["TextBoxValue"] = value;
            }
        } 
```

然后，您可以将文本框的值存储在此属性中。例子：

```
TextBoxValue.Add(textBox1.Text); 
```

但是，这会使页面变得沉重。

# python - 如何避免scrapy忽略哈希标签

> ID：11080434
> 
> 赞同：1
> 
> 时间：2012-06-18T09:50:24.747
> 
> 标签：python, url, scrapy

我正在研究scrapy

我有一个包含哈希标签的网站，但是当我运行它时，通过忽略哈希标签来下载响应

例如，这是带有 的 url `hash fragments`，`url="www.example.com/hash-tag.php#user_id-654"` 并且来自该请求的响应仅为`www.example.com/hash-tag.php`，但我想用哈希片段刮取 url。

我的代码如下

```
 class ExampleSpider(BaseSpider):
     name = "example"
     domain_name = "www.example.com"

    def start_requests(self):
            return Request("www.example.com/hash-tag.php#user_id-654")    

    def parse(self):
           print response 
```

结果：

```
<GET www.example.com/hash-tag.php> 
```

我该怎么做......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:17:14.050

你想要做的事情并不容易。要实现您想要的，您需要一个完整的 DOM 和 JavaScript 引擎，即（可能是无头的）浏览器。

如果你真的需要它，看看[PhantomJS](http://phantomjs.org/)。它是 WebKit 引擎，但完全无头。我不确定是否可以轻松扩展 scrapy，但如果你真的想执行 JavaScript（在这种情况下你需要它），使用 PhantomJS 可能是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:27:23.833

好吧，如果您真的需要该信息，则可以在调用 Request 之前拆分字符串，并将该信息作为元数据发送。

就像是

```
url = "www.example.com/hash-tag.php#user_id-654"
hash = url.split("#")[1]

request = Request(url, callback=self.parse_something)
request.meta['after_hash'] = hash
yield request 
```

然后在解析中获取并使用它

```
def parse_something(self, response):
     hash = response.meta['after_hash'] 
```

也就是说，如果您只需要哈希符号后的信息。

# ruby-on-rails - EmberJS 中的 I18n（路由和一般）

> ID：11080435
> 
> 赞同：4
> 
> 时间：2012-06-18T09:50:31.780
> 
> 标签：ruby-on-rails, internationalization, routing, ember.js, ember-router

EmberJS 是否支持国际化应用程序的翻译路由？还是至少可以轻松扩展它以支持 i18n 路由？有这方面经验的人吗？

例如，路由字符串可以通过语言环境文件以某种方式动态设置吗？此外，使用 Ember 和 Rails 路由时不必指定两次也会很酷……是这样吗？

我是 Ember 的新手（目前正在评估 js 框架），但我假设通常使用 Rails 的人会简单地从 Rails 中指定非常基本的路由，其余的在 Ember 中？所以不会有太多的重复吗？想知道是否可以使用 Rails 的语言环境文件来查找路线翻译。

作为一个更普遍的问题：Ember 是否已经支持 I18n？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T11:07:41.563

您可以通过在初始化时重新打开并设置本地化路由来实现国际`Ember.Route`化路由，请参见此处的示例[http://jsfiddle.net/pangratz666/wQXvb/](http://jsfiddle.net/pangratz666/wQXvb/)。

您必须确保在初始化路由器*之前*`Ember.STRINGS`定义了 。字符串查找本身可以通过**sly7_7**提到的方法完成。*`loc`*

 ***```
Ember.STRINGS = {
    '/all': '/alle',
    '/home/:id': '/zuhause/:id'
};

Ember.Route.reopen({
    init: function() {
        this._super();
        var route = this.get('route');
        if (route) this.set('route', route.loc());
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T11:11:38.997

有一个 ember-i18n 项目：[https ://github.com/zendesk/ember-i18n](https://github.com/zendesk/ember-i18n)

它会帮助你处理你的字符串，但目前还没有处理翻译 URL 的解决方案。

您可以将任何 JS 路由库与 Ember 一起使用。有一个非常简单的`Ember.Location`协议可以将您自己的路由库与`Ember.Router`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T10:10:45.213

一般问题的部分答案可以在这里找到：

[http://docs.emberjs.com/#doc=Ember.String&method=.loc&src=false](http://docs.emberjs.com/#doc=Ember.String&method=.loc&src=false)

我认为这不是一个完整的 i18n 支持，并且没有内置在 emberjs 中。***

# android - 从 facebook-Android 上的 sdcard 上传图片

> ID：11080443
> 
> 赞同：1
> 
> 时间：2012-06-18T09:50:59.737
> 
> 标签：android, facebook, image

我想从 Facebook 上的 SD 卡上传图像。可以通过 URL 在 Facebook 上发布图像，但如果我从 SD 卡传递图像，则不会发布。

我正在传递`byteArray`用于上传图像的字符串，但仍然没有得到输出。谁能帮我解决这个问题？

我的代码：

```
 byte[] data = null;        
    params.putString(Facebook.TOKEN, facebook.getAccessToken());
    params.putString("link", "https://www.facebook.com/pages/My-Short-Sale-Score/242779072468511");
    params.putByteArray("picture",data);

    Facebook facebook = new Facebook("318633718220473");

    mAsyncRunner = new AsyncFacebookRunner(facebook);  
    mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null);

   facebook.dialog(this, "stream.publish", params,

              new DialogListener() {
                   @Override
                   public void onComplete(Bundle values){} 

                   @Override
                   public void onFacebookError(FacebookError error) {}

                   @Override
                   public void onError(DialogError e) {}

                   @Override
                   public void onCancel() {}
              }
        );              
}

 public class SampleUploadListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: (executed in background thread)
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String src = json.getString("src");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."

            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {    
        }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:19:06.307

从 SD 卡上的 Filepath 创建一个文件对象，例如

```
File ff = new File("Your sdcard file path");
        bb = decode(ff);
    }       
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bb.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] byteArray = stream.toByteArray();
    Bundle params = new Bundle();
    params.putString("method", "photos.upload");
    params.putString("caption", msg);
    params.putByteArray("image", byteArray);
    try {

        facebook.request("me/feed", params, "POST");

    } catch (FileNotFoundException fileNotFoundException) {
        fileNotFoundException.printStackTrace();
    } catch (MalformedURLException malformedURLException) {
        malformedURLException.printStackTrace();
    } catch (IOException ioException) {
        ioException.printStackTrace();
    }
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    mAsyncRunner.request(null, params, "POST", new SampleUploadListener(),
            null);

// code for decode method

private Bitmap decode(File f) {
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}

    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:17:55.623

试试这些 Facebook 开源示例：

[https://github.com/facebook/facebook-android-sdk](https://github.com/facebook/facebook-android-sdk)

在**hackbook**下的这个示例中，用于从 sdcard 将照片上传到 Facebook！

（或者）

尝试使用此代码将图像从 sdcard 上传到 facebook

```
byte[] data = null;
 try {
     FileInputStream fis = new FileInputStream(PATH_TO_FILE);
     Bitmap bi = BitmapFactory.decodeStream(fis);
     ByteArrayOutputStream baos = new ByteArrayOutputStream();
     bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
     data = baos.toByteArray();  
  } catch (FileNotFoundException e) { 
     e.printStackTrace();
     Log.d("onCreate", "debug error  e = " + e.toString());
  }     

     Bundle params = new Bundle(); 
     params.putString("method", "photos.upload");  
     params.putByteArray("picture", data);

     Facebook facebook = new Facebook(FACEBOOK_APP_ID);
     AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
     mAsyncRunner.request(null, params, "POST", new RequestListener() {

        public void onMalformedURLException(MalformedURLException e, Object state) {
            Log.d("request RequestListener", "debug onMalformedURLException");
        }

        public void onIOException(IOException e, Object state) {
            Log.d("request RequestListener", "debug onIOException");
        }

        public void onFileNotFoundException(FileNotFoundException e, Object state) {
            Log.d("request RequestListener", "debug onFileNotFoundException");
        }

        public void onFacebookError(FacebookError e, Object state) {
            Log.d("request RequestListener", "debug onFacebookError");
        }

        public void onComplete(String response, Object state) {
             Log.d("request RequestListener", "debug onComplete");
        }
     }, null); 
```

注意：您必须在项目中设置 Internet 和 SD 卡读取清单 xml 文件的权限

# c# - 使用c#在href中显示部分描述

> ID：11080445
> 
> 赞同：0
> 
> 时间：2012-06-18T09:51:09.257
> 
> 标签：c#, jquery, asp.net

在我的代码中，我有以下内容：

```
optionlist.AppendFormat("<li>
<a href=\"setlocale.aspx?returnURL=Default.aspx&localesetting={0}\">{1}</a>
</li>", DB.RSField(rs, "Name"), DB.RSField(rs, "Name")); 
```

数据库中的名称具有以下值：**en-US**

我怎么能错过前 3 个字符串字符而只显示**US**

如果语言环境显示为 fr-FR，则显示 fr 2 次是没有意义的。

但我需要将值保留在 a href 中，因为 fr-FR 只需将其显示为 FR。

我可以创建一个新字段 inteh DB 并将其命名为 Description2，然后手动记下每个国家/地区的 US、FR 和 DE。这将是我的快速解决方法。任何想法 id 如何从描述中删除 3 个字符串字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:58:24.950

```
string[] subStr = Name.Split("-");

optionlist.AppendFormat("<li>
<a href=\"setlocale.aspx?returnURL=Default.aspx&localesetting={0}\">{1}</a>
</li>", DB.RSField(rs, subStr[1]), DB.RSField(rs, subStr[1])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T09:57:53.747

由于您只是显示字符串，因此您可以将第二个参数 ( `{1}`) 保留为

```
DB.RSField(rs, "Name").Substring(DB.RSField(rs, "Name").IndexOf('-')+1, 2) 
```

...并保持`{0}`与您的`href`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T09:58:03.073

```
optionlist.AppendFormat("<li>
<a href=\"setlocale.aspx?returnURL=Default.aspx&localesetting={0}\">{1}</a>
</li>", DB.RSField(rs, "Name").Substring(3), DB.RSField(rs, "Name").Substring(3)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T09:56:18.363

如果字符长度始终相同，则使用子字符串

```
String x = "en-US";
x.Substring(3); 
```

# java - 如何对仅使用 jUnit 启动线程的方法进行单元测试？

> ID：11080447
> 
> 赞同：10
> 
> 时间：2012-06-18T09:51:19.997
> 
> 标签：java, multithreading, unit-testing, testing, junit

如标题所示，我想测试这样的方法：

```
public void startThread()
{
    new Thread()
    {
        public void run()
        {
            myLongProcess();
        }
    }.start();
} 
```

编辑：从评论来看，我猜测试线程是否启动并不常见。所以我必须调整问题......如果我的要求是 100% 的代码覆盖率，我是否需要测试该线程是否启动？如果是这样，我真的需要一个外部框架吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T10:08:54.380

这可以使用[Mockito](http://code.google.com/p/mockito)优雅地完成。假设该类已命名`ThreadLauncher`，您可以确保该`startThread()`方法导致调用`myLongProcess()`with：

```
public void testStart() throws Exception {
    // creates a decorator spying on the method calls of the real instance
    ThreadLauncher launcher = Mockito.spy(new ThreadLauncher());

    launcher.startThread();
    Thread.sleep(500);

    // verifies the myLongProcess() method was called
    Mockito.verify(launcher).myLongProcess();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:31:10.880

If you need 100% coverage, you will need to call `startThread` which will kick off a thread. I recommend doing some sort of verification that the thread was stared (by verifying that something in `myLongProcess` is happening, then clean up the thread. Then you would probably do the remainder of the testing for `myLongProcess` by invoking that method directly from your unit test.

# iphone - 滚动表格视图时 UIProgressView 隐藏

> ID：11080449
> 
> 赞同：-1
> 
> 时间：2012-06-18T09:51:21.120
> 
> 标签：iphone, multithreading, uitableview, asihttprequest, uiprogressview

在我的 iphone 应用程序中，我有一个按钮，当我单击按钮时，下载操作开始，我将按钮替换为`UIProgressView`. 这`UIProgressView`将显示下载进度。但是一旦添加了 UIProgressView，当我滚动它时它就会消失。这是我的代码：

```
 // Customize the appearance of table view cells.
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";

        UIMenuItemCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil)
            cell = [self getCellContentView:CellIdentifier];

        cell.cellitemImage = (UIImageView *)[cell viewWithTag:2];
        cell.cellItemButton = (UIButton *)[cell viewWithTag:3];

        DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:indexPath.row];
        NSString *url;
        if([itemObj.itemStatus isEqualToString:@"Available"]){
            cell.cellItemButton.userInteractionEnabled = YES;
            cell.userInteractionEnabled = YES;
            [cell.cellItemButton setTitle:@"" forState:UIControlStateNormal];
            [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"img_normal"] forState:UIControlStateNormal];
            [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"img_pressed"] forState:UIControlStateHighlighted];
            [cell.cellItemButton addTarget:self action:@selector(download) forControlEvents:UIControlEventTouchUpInside];
            url = [NSString stringWithFormat:@"%@",itemObj.availableIcon];
        }else if([itemObj.itemStatus isEqualToString:@"Downloading"]){
            url = [NSString stringWithFormat:@"%@",itemObj.availableIcon];
            [cell.contentView addSubview:myprogressView];
            cell.cellItemButton.hidden = YES;
        }

        [cell.cellitemImage setImageWithURL:[NSURL URLWithString:url] placeholderImage:[UIImage imageNamed:@"item01.png"]];

        cell.cellItemName.text = [NSString stringWithFormat:@"%@",itemObj.itemName];

        return cell;
    }

- (void)download{
        UIButton *btn = (UIButton *)clickedBtnSender;
        UIMenuItemCell *cell = [(UIMenuItemCell *)[[clickedBtnSender superview] superview] retain];
         myprogressView = [[[CustomProgressView alloc]initWithFrame:CGRectMake(25, 140, 100, 21)] retain];
        myprogressView.tag = selectedTag;

        btn.hidden = YES;

        for (UIProgressView *currentProgress in cell.contentView.subviews) {
            if ([currentProgress isKindOfClass:[UIProgressView class]]){
                [currentProgress removeFromSuperview];
            }
        }

        [cell.contentView addSubview:myprogressView];
} 
```

请帮忙。

**编辑**

```
- (UIMenuItemCell *) getCellContentView:(NSString *)cellIdentifier {

    CGRect CellFrame = CGRectMake(0, 0, 150, 60);
    CGRect imgFrame = CGRectMake(20, 48, 110, 123);
    CGRect btnFrame = CGRectMake(25, 140, 100, 26);
    CGRect progressFrame = CGRectMake(25, 140, 100, 21);

    UIImageView *itemImg;
    UIButton *itemBtn;
    UIProgressView *itemProgView;

    UIMenuItemCell *cell = [[UIMenuItemCell alloc] init] ;
    cell.frame = CellFrame;

    //Initialize ImageView
    itemImg = [[UIImageView alloc]initWithFrame:imgFrame];
    itemImg.tag = 2;
    [cell.contentView addSubview:itemImg];

    //Initialize Button
    itemBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    itemBtn.frame = btnFrame;
    itemBtn.tag = 3;
    itemBtn.titleLabel.textColor = [UIColor blueColor];
    itemBtn.titleLabel.font = [UIFont systemFontOfSize:9.0];
    [cell.contentView addSubview:itemBtn];

    //Initialize ProgressView
    itemProgView = [[CustomProgressView alloc]initWithFrame:progressFrame];
    itemProgView.tag = 4;
    //[cell.contentView addSubview:itemProgView];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:04:25.630

我认为您需要为每个单元格设置唯一的 cellIdentifier

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.row];

        UIMenuItemCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil) {
            cell = [self getCellContentView:CellIdentifier];

            // Some codes here
        }

       return cell;
} 
```

**基于您上次编辑的附加信息**

改变

```
UIMenuItemCell *cell = [[UIMenuItemCell alloc] init]; 
```

至

```
UIMenuItemCell *cell = [[UIMenuItemCell alloc] initWithFrame:CellFrame reuseIdentifier:cellIdentifier]; 
```

# facebook - Facebook 登录未响应 FB.login 响应

> ID：11080450
> 
> 赞同：5
> 
> 时间：2012-06-18T09:51:25.450
> 
> 标签：facebook

我正在开发一个带有 facebook 集成的 android phonegap 应用程序。FB.login(function(response) 函数有一个响应处理程序，当用户单击 fb 按钮时它会被调用，但它不会每次都进入函数响应或 alert('test')。只有当我进入这个脚本时击中大约 5 或 6 次。我需要的是在我第一次登录 facebook 时获取访问令牌。我已经浏览了很多关于此的链接，但无法找到确切的解决方案...

[如果用户已经登录 facebook，则 FB 登录回调函数没有响应](https://stackoverflow.com/questions/8541162/fb-login-callback-function-not-responding-if-user-is-already-logged-in-facebook/8743462#8743462)

即使这个问题似乎是相同的，但我无法弄清楚我的解决方案。

这是正在工作的代码：

```
<div id="data">Hello Facebooktesters, loading ...</div>

<button onclick="login()">Login</button>
<button onclick="me()">Me</button>
<button onclick="logout()">Logout</button>
<button onclick="Post()">facebookWallPost</button>

<script type="text/javascript">
    document.addEventListener('deviceready', function() {
        try {
            alert('Device is ready! Make sure you set your app_id below this alert.');
            FB.init({
                appId : "xxxxxxxxxxxxxxx",
                nativeInterface : CDV.FB,
                useCachedDialogs : false
            });
            document.getElementById('data').innerHTML = "FB init executed";
        } catch (e) {
            alert(e);
        }
    }, false);

    function me() {
        FB.api('/me/friends', {
            fields : 'id, name, picture'
        }, function(response) {
            if (response.error) {
                alert(JSON.stringify(response.error));
            } else {
                var data = document.getElementById('data');
                fdata = response.data;
                console.log("fdata: " + fdata);
                response.data.forEach(function(item) {
                    var d = document.createElement('div');
                    d.innerHTML = "<img src="+item.picture+"/>" + item.name;
                    data.appendChild(d);
                });
            }
            var friends = response.data;
            console.log(friends.length);
            for ( var k = 0; k < friends.length && k < 200; k++) {
                var friend = friends[k];
                var index = 1;

                friendIDs[k] = friend.id;
                //friendsInfo[k] = friend;
            }
            console.log("friendId's: " + friendIDs);
        });
    }

    function login() {
        FB.login(function(response) {
            alert('test');
            if (response.authResponse) {
                alert('logged in');
                var access_token =   FB.getAuthResponse()['accessToken'];
                alert(access_token);
                 window.location = "test.html"
            } else {
                alert('not logged in');
            }
        }, {
            scope : "email"
        });
    }

    function logout() {
        alert('test');
          FB.logout(function(response) {
              alert('logged out');
            //window.location.reload();
          });
    }

    function Post(ele) {
        var domain = 'http://192.168.0.46:8082/';
        console.log('Debug 1');
        var params = {
        method: 'feed',
        name: 'test - test',
        link: domain+'test/test/showproddetails.action?product.productId=1',
        picture: 'http://www.careersolutions.com/test.png',
        caption: 'test',
        description: 'test'
        };
        console.log(params);
        FB.ui(params, function(obj) { console.log(obj);});
    }

</script> 
```

谢谢你，拉杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:07:41.717

您在此行中缺少分号：

`window.location = "test.html"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-07T19:29:28.390

这个问题是不久前发布的，但我想指出一些事情。`FB.login`函数会打开一个弹出对话框，询问用户是否愿意使用 Facebook 登录您的应用程序。通常建议在单击按钮后运行它，因为大多数浏览器会在页面加载时阻止弹出对话框。如果用户之前已授权您的应用程序，则弹出对话框将重定向回您的应用程序并关闭对话框（假设您的应用程序是一个网站）。

如果您打算在页面加载时检查用户是否登录到您的应用程序，那么建议您改用`FB.getLoginStatus`这样的方法

```
function checkLoginState() {
   FB.getLoginStatus(function(response) {
      // Check response.status to see if user is logged in
      alert(response.status);
   });
} 
```

请参阅[facebook 上的大量文档](https://developers.facebook.com/docs/facebook-login/web)

# java - 删除文件内容android

> ID：11080451
> 
> 赞同：5
> 
> 时间：2012-06-18T09:51:25.480
> 
> 标签：java, android, file-io, filewriter, bufferedwriter

在将更多信息写入文件之前，我需要删除文件的内容。我尝试了不同的方法，例如我删除内容但文件保持相同大小，当我在删除后开始写入时，在写入新数据之前，一个空白洞似乎是删除的大小.

这是我尝试过的...

```
BufferedWriter bw;
try {
    bw = new BufferedWriter(new FileWriter(path));
    bw.write("");
    bw.close();
}
catch (IOException e) {
    e.printStackTrace();
} 
```

我也试过这个......

```
File f = new File(file);
FileWriter fw;

try {
    fw = new FileWriter(f,false);
    fw.write("");
}
catch (IOException e) {
    e.printStackTrace();
} 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T11:14:51.277

```
FileWriter (path, false) 
```

false 将告诉作者截断文件而不是追加文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:01:29.217

`flush()`在调用之前尝试调用`close()`。

```
FileWriter writer = null;

try {
   writer = ... // initialize a writer
   writer.write("");
   writer.flush(); // flush the stream
} catch (IOException e) {
   // do something with exception
} finally {
   if (writer != null) {
      writer.close();
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:26:31.883

这可能是因为您没有关闭 FileWriter，fw.close(); 您也不需要“删除”旧数据，只需开始写入，它就会覆盖旧数据。因此，请确保您在所有地方都关闭。

这对我有用：

```
 File f=new File(file);
    FileWriter fw;
    try {
        fw = new FileWriter(f);
        fw.write("");
       fw.close();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# php - php动作干扰css

> ID：11080457
> 
> 赞同：0
> 
> 时间：2012-06-18T09:51:38.483
> 
> 标签：php, css

好的，我有第一页（索引），功能齐全，工作正常，所有内容都加载到 iframe 中。但是，由于布局的设计，我希望我的作品集有更多的查看空间，所以我为作品集创建了另一个页面 (p.html)。现在，因为没有办法（我知道或可以弄清楚）单击 p.html 上的链接并告诉它在名为“内容”的 iframe 中打开例如 home.html#top。所以，我玩弄了一些 php 并想出了以下代码：

```
<?php
  switch($_GET['go']) { 
  case 'home': $src='pages/home.html#top'; break; 
  case 'about': $src='pages/about.html#top'; break; 
  case 'contact': $src='pages/contact.html#top'; break; 
  default: $src='pages/home.html'; break; 
} ?> 
```

然后，在 index.php 上，在我`<?=$src;?>`设置为源的 iframe 中。

现在，当您第一次加载[http://www.djcproductions.net](http://www.djcproductions.net)时，一切正常，默认页面 home.html 会正常加载到 iframe 中。但是，单击导航栏中的任何链接，它会以某种方式与我的 CSS 进行内容分类。如果您在第一次访问该站点时注意，并向下滚动到文本，您可以看到背景图像，因为 contentstyle.css 文件为 home.html 设置了透明背景。但是，一旦您单击任何链接，就会出现窗口并且背景不透明**编辑**它似乎也将加载到内容 iframe 中的页面向右移动了大约 50 个像素。因此，由于 php 代码中 home.html 的默认代码行正常工作，我想这可能是#top 搞砸了。因此，我从链接中删除了所有#top 标签，然后再次尝试。同样，在加载页面时很好，然后我单击一个链接，我的整个 index.php 页面加载到 iframe 中？！我的心都炸了。我做这一切都是错的，还是只是我错过了一条愚蠢的线路或其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:08:20.673

关于“关于我们”页面未加载的问题。这是我对这个问题的总结。

如果我手动`http://www.djcproductions.net/index.php?go=about`输入浏览器地址栏，一切正常。这意味着只要您提供请求参数，您的 PHP switch 语句就会很高兴。

当我查看您的链接时，它具有目标属性：

```
<a class="about" target="content" href="index.php?go=about">... 
```

这意味着它将整个页面加载到 iframe 中，我很确定这不是您想要做的。

如果您将超链接更改为：

```
<a class="about" href="index.php?go=about">... 
```

它会起作用的。同样，如果您将其更改为：

```
<a class="about" target="content" href="pages/about.html">... 
```

它会起作用的。

只是不要同时使用目标和整页链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:31:10.140

首先，禁用右键单击对于试图帮助您查看网站上的问题的人来说很烦人，并且最终毫无意义，因为无论如何我已经找到了源头。

出现的问题`p.php`是您的社交网络图像的图像来源不正确。这会导致显示替代文本（或损坏的图像字形），并且由于您的设计依赖于这些图像的大小，因此所有内容都放错了位置。

更改这些图像上的图像源可解决此问题。

```
images/p_05.jpg 
```

应该

```
images/image_05.jpg 
```

和 image_03 一样

还有其他问题，但是您需要隔离每个问题并专门提出一个问题。如果您创建一个较小的问题示例，它也可以帮助人们帮助您。

# reporting-services - Tablix 单元的 SSRS 半加法函数

> ID：11080460
> 
> 赞同：0
> 
> 时间：2012-06-18T09:51:45.010
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

我必须生成一个报告，其中我的行值应该在折叠时汇总（汇总数据），但列值不应该在折叠时汇总，而是显示最后一个值。这是一个示例报告

**完全扩展的报告**

```
 -2012  
                       Jan     Feb     Mar  
-India    Chennai      10       8       9  
          Bangalore    15       15      16 
```

**行已折叠**

```
 -2012  
                       Jan     Feb     Mar  
+India                 25       23      25 
```

**列折叠：**

```
 +2012
+India                73 
```

但是，我不需要汇总数据作为列折叠的总和。正确的数据将是月份数据中最后一个可用的数据，即

**列折叠：**

```
 +2012
+India                25 
```

我没有发现任何可用于报告的 tablix 单元格的半加法函数。我可以使用 sum 或 last 这适用于行和列摘要，这是我不想要的。

我们在数据透视表中对此没有问题，因为我们已将该度量定义为时间维度上的半加法度量。唯一的问题是使用 SSRS 设计的报告。关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:48:30.953

听起来您正在使用多维数据集作为数据源？如果是这种情况，请不要将 SSRS 中的 SUM 函数用于文本框中的表达式。而是使用 AGGREGATE 函数。这告诉 SSRS 从多维数据集中获取值。如果它在多维数据集中正确定义（如数据透视表所示），那么您应该在报告中获得相同的值。

# db2 - 如何使用 IBMDataStudio 在 DB2Express-C 10.1 版中创建新的 DB2 实例？

> ID：11080461
> 
> 赞同：1
> 
> 时间：2012-06-18T09:51:45.230
> 
> 标签：db2

我需要创建一个新的 DB2 实例并从早期版本的 DB2 中导入一个数据库，请告诉我如何创建一个新的 DB2 实例，我不想使用默认的 DB2 实例，因为我的要求是我们需要 crate每个版本一个新的 DB2 实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:13:18.227

[db2icrt](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0002057.html) - 创建实例命令

# c# - 在数据连接中添加数据源时出错

> ID：11080462
> 
> 赞同：-2
> 
> 时间：2012-06-18T09:52:07.460
> 
> 标签：c#, .net, linq, sql-server-2008, linq-to-sql

当我尝试添加连接时，它显示以下错误，如附件所示。“无法打开物理文件。访问被拒绝”。

当我搜索它时，它建议将 SQL Server 的帐户添加到该文件夹​​中。然后，使用以下查询，我发现该帐户是“LocalSystem”。当我尝试将“LocalSystem”添加到文件夹的 ACL 时，这样的帐户不可用。我们如何解决它并将连接添加到 DBML？

注意：当我在 C# 程序中使用带有数据库名称的 DataReader 时，它运行良好。

![在此处输入图像描述](../Images/66a28cf63ce6c4f65b2a51706bcdb655.png)

使用的查询：

```
declare @sqlser varchar(20)

EXEC master..xp_regread @rootkey='HKEY_LOCAL_MACHINE', 
@key='SYSTEM\CurrentControlSet\Services\MSSQLSERVER',

@value_name='objectname', @value=@sqlser OUTPUT

SELECT convert(varchar(30),@sqlser) 
```

![在此处输入图像描述](../Images/8814c234a70c864663347a2314c4385f.png)

工作 C# 程序：

```
 SqlDataReader rdr = null;
        SqlConnection con = null;
        SqlCommand cmd = null;

        try
        {
            // Open connection to the database
            string ConnectionString = "server=D088DTRV;integrated security=true; database=BankAccount";

            con = new SqlConnection(ConnectionString);
            con.Open();

            string CommandText = "SELECT * FROM Account";
            cmd = new SqlCommand(CommandText);
            cmd.Connection = con;

            rdr = cmd.ExecuteReader();

            while (rdr.Read())
            {
                string test = rdr["AccountType"].ToString(); 
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:55:18.577

问题与数据连接有关。

在高级窗口中，当我检查时，它正在尝试 ./SQLExpress。我用“。”修改它。

我重新启动了机器。我还在 services.msc 中停止了 SQLExpress

```
 Data Source=.;AttachDbFilename=C:\DevTEST\Databases\LibraryReservationSystem.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True 
```

# java - Spring 作为独立的还是在 Tomcat 上？

> ID：11080464
> 
> 赞同：4
> 
> 时间：2012-06-18T09:52:23.797
> 
> 标签：java, spring, jakarta-ee, tomcat

我正在寻找将 Spring 部署在 Tomcat 上的优势，而不是将其置于任何应用程序服务器容器之外。

我的项目不需要任何网络支持。它确实需要事务管理、数据库池、JMX、低延迟和更常见的 java-ee 技术等技术。

那么我为什么还要使用tomcat呢？如果只是因为有 DB POOL 的原因，我可以自己实现。我正在寻找低延迟解决方案。

同样，我的项目是一个完全后端，不需要任何网络支持。

那么我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:45:54.017

您所说的“更常见的 Java EE 技术”究竟是什么意思？

如果它“只是一个后端”，那么*前端*是什么？应用程序将如何与后端对话？

如果不需要 Web 界面，则使用 Web 容器没有任何优势。

如果您有复杂的事务管理需求，需要消息队列等，可能更容易在*应用程序*服务器（相对于 Web 容器）下设置，因为存在现有的管理/管理接口。所有这些*也*可以自己设置，但可能更痛苦——使用 Spring 可能会在一定程度上减轻这种痛苦。

然而，对“更常见的 Java EE 技术”的需求让我对实现独立应用程序有点紧张。应用程序容器具有内置、经过测试和功能的所有“通用 Java EE 技术”。如果您将各种包组合在一起以提供“通用 Java EE 技术”，而无需使用通用 Java EE 应用程序容器，那么仅使用应用程序容器可能会更容易，这也为您提供了对来自各种来源的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:00:40.483

[如果您的应用程序不是 Web 应用程序，您可以使用此处列出的](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/context/ApplicationContext.html)**所有已知实现类** 下的任何非 Web 特定应用程序上下文。然后，您可以从可运行 jar 中的 main 方法初始化上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:10:46.487

如果您不需要网络支持，则不必使用 tomcat 或任何其他应用程序服务器。Spring 将为您提供您需要的大部分功能。对于连接池，有许多可用的选项，例如 c3p0 和 apache dbcp。您可以使用其中之一。

您唯一需要担心的是彻底关闭您的流程。您可以通过实现自己的关闭挂钩来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:59:30.360

部署应用程序的原因之一`tomcat`是它将为您提供所有连接负担、线程管理等。没有什么是您自己无法实现的。但请记住，这`tomcat`是健壮的，他们已经处理了实现该逻辑的所有麻烦。

除此之外，使用应用程序容器没有什么意义（如果您认为不必开发和维护这么多代码很容易）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T05:33:57.310

你不应该使用 tomcat 或其他任何东西。Spring 已经是容器了。在一个简单的线程中初始化弹簧，确保它具有适当的清理流量。就这样。我曾经在几个服务器端集成应用程序上工作，这些应用程序通过不同的协议与其他服务器进行分配、通信，并且在没有 Web 容器或 J2ee 应用程序服务器的情况下，一切都很容易完成。Spring 几乎支持所有内容，有时还支持 3d 方库（缓存、事务、池等....）简化版本可能如下：

```
...
pubcic static  void main (String args[]){
 Server.server = new Server(...);
 server.initSpringContext()
 server.keepAlive();
 server.cleanupResources();
}

..
abstract class Server{

abstract void initSpring();
abstract void cleanUpResources();
abstract void shutdown(){
  this.state = STOP;
};
public void keepAlive()
 while(state!=STOP){
  sleep(1000)
 }

} 
```

# http - HTTP Get 不使用端口

> ID：11080476
> 
> 赞同：0
> 
> 时间：2012-06-18T09:52:47.803
> 
> 标签：http, http-headers, apache2, neolane

我正在尝试使用 http_get 调用 PHP 中的页面：

```
$url = "http://mysite.fr:9090/neolane-webservice/campagnesclient/Coclico=1135446";
http_get($url, $appelOptions, $appelInfos); 
```

我的问题是它每次都不起作用。

我安装了 Wireshark 来查看我真正发送的内容，我发现了一件奇怪的事情。有时，该端口不用于 HTTP 请求。

当它起作用时，我有：

```
Hypertext Transfer Protocol
GET http://mysite.fr:9090/neolane-webservice/campagnesclient/Coclico=1135446 HTTP/1.1\r\n
    Request Method: GET
    Request URI: http://mysite.fr:9090/neolane-webservice/campagnesclient/Coclico=1135446
    Request Version: HTTP/1.1
User-Agent: PECL::HTTP/1.6.5 (PHP/5.2.4-2ubuntu5.7)\r\n
Host: mysite.fr:9090\r\n
Pragma: no-cache\r\n
Accept: */*\r\n
Proxy-Connection: Keep-Alive\r\n
Keep-Alive: 300\r\n
Connection: keep-alive\r\n
Date: Fri, 15 Jun 2012 16:40:46 +0200\r\n
Accept-Charset: utf-8\r\n
Accept-Encoding: gzip;q=1.0,deflate;q=0.5\r\n
\r\n 
```

当它不是时：

```
Hypertext Transfer Protocol
GET http://mysite.fr:9090/neolane-webservice/campagnesclient/Coclico=1135446 HTTP/1.1\r\n
    Request Method: GET
    Request URI: http://mysite.fr:9090/neolane-webservice/campagnesclient/Coclico=1135446
    Request Version: HTTP/1.1
User-Agent: PECL::HTTP/1.6.5 (PHP/5.2.4-2ubuntu5.7)\r\n
Host: mysite.fr\r\n
Pragma: no-cache\r\n
Accept: */*\r\n
Proxy-Connection: Keep-Alive\r\n
Keep-Alive: 300\r\n
Connection: keep-alive\r\n
Date: Fri, 15 Jun 2012 16:40:34 +0200\r\n
Accept-Charset: utf-8\r\n
Accept-Encoding: gzip;q=1.0,deflate;q=0.5\r\n
\r\n 
```

我尝试使用 wget 调用该页面，并且它始终有效：

```
wget http://mysite.fr:9090/neolane-webservice/campagnesclient/Coclico=1135446 
```

所以我猜我的问题是由于 Apache 配置造成的，但我不知道去哪里找。请问你能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:45:53.713

您需要在`$appelOptions`阵列中设置端口。

```
$appelOptions['port']=9090;
http_get($url, $appelOptions, $appelInfos); 
```

不幸的是`http_get`，似乎不尊重 URL 中的 :port 语法

# android - 导航栏中奇怪的选项菜单按钮（Android 4.0）

> ID：11080484
> 
> 赞同：1
> 
> 时间：2012-06-18T09:53:21.050
> 
> 标签：android, android-layout, android-widget

这个选项菜单按钮是什么以及如何摆脱它？

看图片

![在此处输入图像描述](../Images/5b1d20ff1c386abeb465fd2fe1f58c47.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T09:58:45.783

它的旧按钮。较新的手机没有菜单按钮，但显然较旧的应用程序仍想使用它。这是用来代替旧的硬按钮的软按钮

你可以在这里读更多关于它的内容

[http://android-developers.blogspot.de/2012/01/say-goodbye-to-menu-button.html](http://android-developers.blogspot.de/2012/01/say-goodbye-to-menu-button.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T09:58:13.133

这是默认的“更多选项”按钮。

# asp.net-mvc - 可配置的默认视图布局

> ID：11080486
> 
> 赞同：2
> 
> 时间：2012-06-18T09:53:23.170
> 
> 标签：asp.net-mvc, layout, razor

在 Asp.net MVC Razor 中，我们可以使用该`_ViewStart.cshtml`文件来定义视图的默认布局。这很好，但是为什么我们在设置中丢失了 web 表单引擎可用的 web.config`system.web > pages.masterPageFile`设置？

为什么这很重要？**因为 web.config 允许自动环境转换。**

## 手动解决方案

当然，我们可以将默认布局名称放入其中`appSettings`，并在`_ViewStart.cshtml`或者如果我们有特定于应用程序的配置部分添加其他属性，这会使事情更加清晰和优美......

**但是还有其他不包含代码的方法吗？**

Asp.net MVC 团队应该将`layoutFile`配置设置添加到`system.web.webPages.razor > pages`元素，不是吗？

## 主要问题是

我是否错过了内置但我不知道的东西？类似于 WebForms 引擎的完全不需要代码的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:58:06.257

> Asp.net MVC 团队应该将 layoutFile 配置设置添加到 system.web.webPages.razor > pages 元素，不是吗？

随意在 MS Connect 网站上开票。

但是，在等待开发团队分析您的票证并可能将其添加到 ASP.NET MVC 框架和网页的未来版本中时，您始终可以在您的 中执行以下操作`_ViewStart.cshtml`：

```
@{
    Layout = ConfigurationManager.AppSettings["Layout"];
} 
```

然后在 web.config 文件中定义布局：

```
<appSettings>
    <add key="Layout" value="~/Views/Shared/_Layout.cshtml" />
    ...
</appSettings> 
```

另一种可能性是编写一个自定义剃须刀视图引擎，您可以在其中动态设置布局。

# java - com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：“where 子句”中的未知列“productId3”

> ID：11080488
> 
> 赞同：0
> 
> 时间：2012-06-18T09:53:27.217
> 
> 标签：java, database, spring, hibernate, hql

`com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'productId3' in 'where clause'`尝试运行此查询时出现错误：

```
public Vendor getVendorId(ProductInfo productInfo) { 
        return (Vendor) this.sessionFactory
                .getCurrentSession()
                .createQuery(
                        "select vendorId from Product where productId3 = :id")
                .setParameter("id", productInfo).uniqueResult();
    } 
```

Product 类如下所示：

```
@Entity
@Table(name="PRODUCT")
public class Product{

    @Id
    @GeneratedValue
    @Column(name="PRODUCT_ID2")
    private Integer productId2;

    public void setProductId2(Integer productId2){
        this.productId2 = productId2;
    }

    public Integer getProductId2(){
        return productId2;
    }

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="PRODUCT_ID3")
    private ProductInfo productId3;

    public void setProductId3(ProductInfo productId3){
        this.productId3 = productId3;
    }

    public ProductInfo getProductId3(){
        return productId3;
    }

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="VENDOR_ID")
    private Vendor vendorId;

    public void setVendorId(Vendor vendorId){
        this.vendorId = vendorId;
    }

    public Vendor getVendorId(){
        return vendorId;
    }

    @OneToMany(mappedBy="productId2")
    private Set<ProductRevision> productRevisions;

    public void setProductRevisions(Set<ProductRevision> productRevisions){
        this.productRevisions = productRevisions;
    }

    public Set<ProductRevision> getProductRevisions(){
        return productRevisions;
    }
} 
```

为什么我会收到此错误？我不明白为什么它找不到列，因为名称完全相同。谢谢你的帮助！

/D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:06:02.343

使用此查询：

```
select p.vendorId from Product p where p.productId3 = :id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:44:17.877

原谅这个繁琐的回答，但是对你来说 HQL 可能更清楚的一件事是重命名你的`Product`类上的字段。

```
 @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="PRODUCT_ID3")
    private ProductInfo productInfo;

    public void setProductInfo(ProductInfo productInfo){
        this.productInfo = productInfo;
    } 
```

对于该`vendorId`领域也是如此。然后你的 HQL 读起来会更好。很明显，您正在处理实体而不是 sql 列。

```
 public Vendor getVendorId(ProductInfo productInfo) { 
        return (Vendor) this.sessionFactory
            .getCurrentSession()
            .createQuery(
                    "select p.vendor from Product where productInfo = :productInfo")
            .setParameter("productInfo", productInfo).uniqueResult();
    } 
```

# php - 从 PHP 中的函数生成正则表达式

> ID：11080489
> 
> 赞同：2
> 
> 时间：2012-06-18T09:53:28.397
> 
> 标签：php, regex

我需要一个可以生成正则表达式的函数。例如，如果我写

```
$pat = "My {$var} is {$var2}" 
```

生成一个正则表达式，当我使用

```
preg_match($pat,"My name is Kevin",$matches); 
```

返回

```
$matches[1] = 'name';
$matches[2] = 'Kevin'; 
```

字符串可以是：“我的 $nameword 是 $name，我是 $age 岁”

问题是：

```
FIG1
<?php
function gen_pattern($string)
{
<--- add code for generating pattern --->
}
?>

FIG2
$pat = gen_pattern('my name is {$X}');
ereg($pat,'my name is moo',$regs);
//$regs[1] == "moo„
([^\s]*)

$pat = gen_pattern('my {$YZ} is {$IJK}');
ereg($pat,'my name is moo',$regs);
//$regs[1] == "name", $regs[2] == "moo" 
```

我的作业描述如下：

> 图 1 显示了一个可以生成正则表达式的函数，可用于 ereg 函数。
> 
> 图 2 显示了该模式应该如何工作。在给定的字符串中，每一项{$ABC}代表一个占位符，即{$X}是“我的名字是{$X}”中的单个占位符，而“我的{$YZ}是”中有两个占位符{$IJK}”。占位符可以是任何大于零的长度。
> 
> 在结果模式中，每个占位符代表文本的一个单词，必须将其添加到结果列表中。即{$X} 表示“我的名字是”之后的下一个单词。因此，如果在文本“my name is moo”上使用该模式，则 $regs[1] 变为“moo”。假设我们只有 [az ]* 形式的文本（注意空格）。

我的任务：

> 填写图 1 中的绿点。不要费心处理错误或检查给定字符串的正确语法（即不会出现“我的名字是 {{}”或类似的无效输入）。

我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:00:10.640

这可能有效：

```
function gen_pattern($str){
    $str = preg_replace('/(\{[\$a-zA-Z]+\})/', '(\w+)', $str);
    return '/'.$str.'/';
}
$p = gen_pattern('my {$xx} is {$X}');

preg_match($p, 'my name is moo', $m); 
```

`$m`将会：

```
array(3) {
  [0] =>
  string(14) "my name is moo"
  [1] =>
  string(4) "name"
  [2] =>
  string(3) "moo"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:59:17.100

像这样的东西会帮助你..：

```
function gen_pattern($string)
{
    return "@".preg_replace("@(\{\$(.*?)\})@msi", "(?P<$2>.*?)", $string)."@";
} 
```

所以你会得到一个以变量为键的结果。

# video - 使用外部采集卡打开 CV Capture

> ID：11080495
> 
> 赞同：4
> 
> 时间：2012-06-18T09:53:35.463
> 
> 标签：video, opencv, video-capture

有没有办法使用 OpenCV 从外部捕获设备（例如 AJA IO HD）或任何其他数字化仪（例如模数转换器）进行捕获？或者换句话说，我需要能够捕获什么（驱动程序、工作流）？如果有一种使用 Python 捕获的简单方法（相同的设置），我也很高兴听到它。它需要适用于 Mac。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:06:47.757

是的，OpenCV 支持的捕获设备非常多。该[`VideoCapture`API](http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture)让您可以访问支持的采集卡，前提是在构建时编译了适当的库。

此答案提供了平台和后端 API 的列表：

*   [OpenCV 2.3 (C++,QtGui)，初始化某些特定 USB 设备和设置时出现问题](https://stackoverflow.com/questions/7247475/opencv-2-3-c-qtgui-problem-initializing-some-specific-usb-devices-and-setup/7264572#7264572)

对于 Mac 支持，QuickTime 后端应该提供最好的驱动程序支持。我相信 AJA 和 Blackmagic 采集卡都应该支持这一点。您可以使用 HackTV 等工具验证 QuickTime 捕获支持。

Python 绑定应该提供等效的访问来控制这些功能。

# java - 通过命令行运行 JAR 时出现错误 java.lang.ClassNotFoundException: com.mysql.jdbc.Driver

> ID：11080499
> 
> 赞同：0
> 
> 时间：2012-06-18T09:53:57.443
> 
> 标签：java, mysql, mysql-connector

我有一个 java 程序，我正在使用**mysql**数据库连接代码。我在 Eclipse 的资源文件夹中添加了**mysql-connector-java-3.0.10-stable-bin.jar**和**mysql-connector-java-5.0.4-bin.jar**文件。当我在 Eclipse 中运行程序时，它运行良好。然后我创建了一个项目的**.jar**文件，其中包含该 jar 文件中的所有 jar 文件。但是当我在 DOS 提示符下使用**java -jar myJar.jar**命令运行我的**jar**文件时，它会给出错误 - **java.lang.ClassNotFoundException: com.mysql.jdbc.Driver**

 ****我尝试设置 mysql-connector*.jar 的 CLASSPATH 但仍然遇到相同的错误。请帮我解决这个问题？

提前致谢 ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:56:57.100

[您需要编辑`Manifest.txt`](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)文件以设置 jar 的类路径

**另见**

*   [在 Linux 中，如何使用外部 jar 文件执行 Java jar 文件？](https://stackoverflow.com/questions/5879925/in-linux-how-to-execute-java-jar-file-with-external-jar-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:07:59.810

要解决此问题，您可以在 Eclipse中创建“ **Runnable Jar 文件**”而不是“ **Simple Jar 文件”。******

# c++ - 在 OpenGL 中重新组织图像/图片数组以适应 2 个纹理大小的幂

> ID：11080503
> 
> 赞同：2
> 
> 时间：2012-06-18T09:54:09.890
> 
> 标签：c++, algorithm, opengl

由于纹理在 OpenGL 中必须是 2 的幂，因此我在 OpenGL 中遇到了麻烦。我正在做的是以下内容：

我使用 PNGLIB 或 SOIL 将 PNG 文件加载到无符号字符数组中。这个想法是我可以通过这个数组运行并“选择”与我相关的部分。例如，假设我加载了一个人，但我只想将头部存储在单独的纹理中。所以我循环遍历数组并只选择必要的部分。

**第一个问题：** 我相信数组中的数据是以 RGBA 模式存储的，但我还不确定数据是按行填充还是按列填充。有可能知道这些信息吗？

**第二个问题：**由于需要始终创建 2 个纹理的幂，因此我可能有一个宽度为 513 像素的图像，因此我需要一个宽度为 1024 像素的纹理。所以发生的事情是图片看起来像是被完全“破坏”了，因为像素不在它们应该在的地方 - 纹理的大小与填充在数组中的相关数据不同。那么我怎样才能设法重新组织数组以再次获取图像的内容呢？我尝试了以下方法，但它不起作用：

```
unsigned char* new_memory = 0;

    int index = 0;
    int new_index = 0;
    new_memory = new unsigned char[new_tex_width * new_tex_height * 4];

    for(int i=0; i<picture.width; i++) // WIDTH
    {
        for(int j=0; j<picture.height; j++) // HEIGHT
        {
            for(int k=0; k<4; k++) // DEPTH
                new_memory[new_index++] = picture.memory[index++];//picture.memory[i + picture.height * (j + 4 * k)];
        }
        new_index += new_tex_height - picture.height;
    }

    glGenTextures(1, &png_texture);
    glBindTexture(GL_TEXTURE_2D, png_texture);

    glTexImage2D(GL_TEXTURE_2D, 0, 3, new_tex_width, new_tex_height, 0 , GL_RGBA, GL_UNSIGNED_BYTE, new_memory); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:01:23.020

很久以前就支持两种纹理的非幂次。但是，创建纹理图集和重新排列纹理仍然有很多优点，我们这样做的方式是简单地使用[freeimage](http://freeimage.sourceforge.net/)，因为它们会为您处理所有这些并支持一些压缩格式。

如果您想按照自己的方式进行操作，并且知道它只是一个位图，那么我会按照以下方式进行更多操作（未经测试，不检查输入，但应该给您一个想法）：

```
void Blit( int xOffset, int yOffset, int targetW, int sourceW, int sourceH, unsigned char* source, unsigned char* target, unsigned int bpp )
{
    for( unsigned int i = 0; i < sourceH; ++i )
    {
        memcpy( target + bpp * ( targetW * ( yOffset + i ) + xOffset ), source + sourceW * i * bpp, sourceW * bpp );
    }
} 
```

基本上，只需将每一行都记录下来。

# visual-studio-2010 - Visual Studio 2010 / 2012 - 是否有类似 Eclipse 的类型完成？

> ID：11080513
> 
> 赞同：1
> 
> 时间：2012-06-18T09:54:46.603
> 
> 标签：visual-studio-2010, visual-studio

我是 Visual Studio 和 C# 的新手——VS 中的一件事让我抓狂：

在 Eclipse 中，您可以开始输入类型名称，按 CTRL-SPACE，它会显示与您输入的字符串匹配的类型，即使它们尚未导入。

如果您是 API 新手并且不知道确切的类型名称等，这将非常有用。

我注意到，VS 仅在命名空间已在 using 部分中导入的情况下才提供类型名称补全。

是否可以使其搜索扩展到所有可用的命名空间？

请不要推荐像 ReSharper 这样的商业工具，因为我目前愿意习惯 VS “原样”，而无需为扩展支付很多钱......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:37:45.367

据我所知，您描述的类似 Eclipse 的功能在 Visual Studio 中作为标准不可用。它与 Eclipse 中的许多其他好东西一样，作为 Resharper 的一部分提供，Resharper 是 Visual Studio 的一个非常大的（商业）插件。默认情况下，它将完成未导入的类名绑定到 Alt-Shift-Space。

作为以前的 Eclipse 用户，在我添加 Resharper 之前，VS 感觉很强大但很笨拙。一个特别的解脱是 control-T 和 control-shift-T 再次可用 - 不再缓慢地在解决方案资源管理器中寻找前同事离开课堂的位置。

Resharper 由同时制作 IdeaJ 的 JetBrains 制作，我认为这对 Eclipse 产生了影响，因此两者之间的相似之处并非巧合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:12:54.690

它在已使用的命名空间中搜索...但是，在您正确编写类名后，单击**ctrl+dot**，它会向您显示这样的命名空间。

![在此处输入图像描述](../Images/07e0486e7b5e3d79a1cc2fed9bd7b06f.png)

或者右键单击类名然后解析。**右键单击>解决**

# javascript - 如何将 JavaScript 添加到 Gridview 的 ASP.NET 下拉列表（模板文件）？

> ID：11080533
> 
> 赞同：0
> 
> 时间：2012-06-18T09:56:30.330
> 
> 标签：javascript, asp.net, javascript-events

如何在 ASP.NET Dropdownlist 上添加 JavaScript，将该 Dropdownlist Id 传递给被调用的相同 JavaScript 函数。如何对作为 Gridview 模板字段的 Dropdownlist 执行相同操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:05:16.707

如果您不需要数据库/服务器端的任何内容，您可以在下拉列表中添加 onchange 事件

```
<ItemTemplate> <asp:DropDownList ID="DropDownList1" runat="server" onchange="BindEng(this);" Height="16px" Width="179px"> <ItemTemplate> 
```

将 RowDataBound 事件添加到 gridview 并访问每行的下拉列表并为其分配 javascript，如果需要 javascript 功能，您可以在此处访问数据源的数据。

```
protected void GrdViewUsers_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        DropDownList ddl = e.Row.FindControl("YourDropDownListID") as DropDownList;
        //The statment below will pass the client id of drop down to function in javascript
        ddl.Attributes.Add("onchange", "YourjavascriptMethodCall('" + ddl.ClientID + "'");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:49:40.950

将 javacript 添加到下拉列表并传递所选值--> ddl.Attributes.Add("onchange", "BindEng('"+ddl.SelectedValue+"');");

# tcp - 如何处理 TCP 长连接故障转移？

> ID：11080534
> 
> 赞同：0
> 
> 时间：2012-06-18T09:56:30.700
> 
> 标签：tcp, cluster-computing, failover, apache-mina

我有许多服务器（集群）来运行相同的基于 TCP 长连接（apache mina 套接字）的应用程序。当一台服务器宕机时，其他服务器如何保持套接字连接，在不让客户端知道服务器宕机的情况下与客户端建立连接（失败） linux中的任何解决方案？谢谢。

# objective-c - 使用 Facebook iOS SDK 更改给定帖子中的受众？

> ID：11080535
> 
> 赞同：0
> 
> 时间：2012-06-18T09:56:38.520
> 
> 标签：objective-c, ios, facebook

是否可以使用 iOS Facebook SDK 更改我的时间轴中现有帖子的受众？如果是这样，有人可以给我一个提示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:59:34.217

不，没有用于此的 API - 如果原始帖子是由您的应用发布的，您可以删除并使用新的隐私设置重新创建帖子，否则需要从 Facebook 的本机界面完成

# sql - 修改子查询以显示基于“更大值”的结果

> ID：11080536
> 
> 赞同：0
> 
> 时间：2012-06-18T09:56:40.580
> 
> 标签：sql

我目前有以下 SQL 查询，其中列出了在雇用分析师的部门工作的所有员工的所有姓名。

```
SELECT ename
FROM emp
WHERE deptno IN (SELECT DISTINCT emp.deptno
                 FROM emp, dept
                 WHERE emp.deptno = dept.dept
                 AND job = 'Analyst'); 
```

如何修改它以显示在雇用两名或两名以上分析师的部门工作的所有员工的姓名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:02:38.390

您可以使用`GROUP BY`获取每个部门的分析师计数，然后根据此计数过滤员工：

```
SELECT emp.ename
FROM 
emp, (
    SELECT emp.deptno, count(*) as analyst_count
        FROM emp, dept
        WHERE emp.deptno = dept.dept
        AND job = 'Analyst'
        GROUP BY emp.deptno
) foo
WHERE emp.deptno = foo.deptno
AND foo.analyst_count >= 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:10:59.033

`GROUP BY`使用and修改子查询`HAVING`

```
SELECT emp.deptno
FROM emp, dept
WHERE emp.deptno = dept.dept AND job = 'Analyst'
GROUP BY emp.deptno HAVING COUNT(*) > 1 
```

# objective-c - 从服务器获取数据时的进度条

> ID：11080539
> 
> 赞同：0
> 
> 时间：2012-06-18T09:56:54.057
> 
> 标签：objective-c, ios

从服务器同步下载数据时，如何在 iOS 应用程序中显示进度条？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:01:07.140

你不能。当您同步获取数据时，获取发生在主线程中，并在获取时阻塞它，并且 UI 使用主线程更新自身，因此在获取完成之前，您无法更新 UI 上的任何内容。您应该异步获取（在另一个线程中）并在某些检查点上更新 UI（在主线程上运行）。

# tridion - SDL Tridion 环境数据框架 HTTP 请求

> ID：11080543
> 
> 赞同：7
> 
> 时间：2012-06-18T09:57:10.013
> 
> 标签：tridion

我看到每个 http 请求都输入了我的环境数据框架代码，因此如果一个页面有 5 张图像，则一个网页正在运行该代码 6 次。

有没有一种简单的方法可以仅在请求页面（aspx）时运行代码？

我在 Tridion 2009、IIS 7 和 .Net 4.0 上运行

谢谢

约翰

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T10:00:48.393

您可以确保环境数据框架模块仅针对 ASP.NET 请求运行，只需在 IIS 的“模块”部分中勾选“仅针对 ASP.NET 应用程序或托管处理程序的请求调用”框即可。

您还可以通过编辑配置文件将某些 URL 排除在框架处理之外。请参阅文档中的以下页面：[从环境数据框架过滤器中排除路径](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_32C65FFE08454808B577B5E8679CA5A6)

# c# - 如何使用 DumpBin.exe 获取损坏的名称

> ID：11080548
> 
> 赞同：1
> 
> 时间：2012-06-18T09:57:31.387
> 
> 标签：c#, dllimport, name-mangling, dumpbin

嗨，我创建了一个 C++ DLL，我将其导入 C# 应用程序以重用函数。C ++中的功能代码是`static bool IsSomethingAttached(char *Arg1[])`

当我在 C# 程序中使用如下 DllImport 时，[DllImport("DllName")] 我收到错误为 EntryPointNotFound 异常。

我用了

> `**DumpBin /symbols Dllname.dll**`获取损坏的名称。

1）但我不知道如何准确地得到损坏的名称。很少有帖子说我们应该使用 /exports ，而`/exports`不是`/symbols`只给出摘要，而且我没有得到错误的名称。请帮忙

2) 如何使用***undname.exe***从未修饰名称中获取修饰名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:03:33.170

利用，

`/ALL`显示除代码反汇编之外的所有可用信息。使用 /DISASM 选项显示反汇编。您可以使用`/RAWDATA:NONE`选项`/ALL`来省略文件的原始二进制详细信息。由于该`/ALL`选项只是所有其他选项的组合，因此不需要示例。

您可以在 C++ 中使用`exports`和`.def`归档以在 C# 中获取未修饰的名称。这里不需要dumpBin

# jquery - 更新 类内 元素

> ID：11080551
> 
> 赞同：0
> 
> 时间：2012-06-18T09:57:45.223
> 
> 标签：jquery

我正在尝试更新 ul 元素的所有子元素的类。这是我的代码：

```
 $('#quoteLog').find('ul').click( function(event){
            if (this == event.target) {
                $(this).children().toggleClass('details-shown');
            }
            return false;
        })
                .children().addClass('details-hidden'); 
```

我一直在搞乱查找价值，但运气不佳。这应该在 id=quotelog 的 dev 元素中找到每个 ul 元素，并将 details-hidden 类添加到 ul 中的 li 元素中，并在单击目标 ul 元素时将它们更改为 details-shown 。

本节的 html 如下所示：

```
<div id="quoteLog">
    <ul class="quote"> Some name
        <li>detail about quote</li>
        <li>some other detail</li>
    </ul>
    <ul class="quote"> Some other name...</ul>
    ... 
```

对 JQuery 来说相当新，并且在触发点击事件甚至将类添加到 li 元素时遇到问题。有人可以指出我的任何帮助或方向将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:11:09.417

```
$('#quoteLog').find('ul').click( function(event){
        if (this == event.target) {
            $(this).children().toggleClass('details-shown');
        }
        return false;
    }) 
```

此代码将默认返回“UL”元素，而不是 QuoteLog 元素。因此，排除`.Children`代码并首先添加类很重要。

试试这个结果代码（注意如何`.Children`删除）：

```
$('#quoteLog').addClass('details-hidden').find('ul').click( function(event){
        if (this == event.target) {
            $(this).children().toggleClass('details-shown');
        }
        return false;
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:13:16.653

`.find()`jQuery 支持 CSS 样式选择器，所以在这种情况下不需要。你可以让它更干净 - [http://jsfiddle.net/f4njs/1/](http://jsfiddle.net/f4njs/1/)

```
$('#quoteLog ul li').click(function() {
    $(this).toggleClass('details-shown');
});
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:08:19.017

为什么你会改变甚至 li，你只能改变父类也 ul 并且这个类将与孩子的 li 交互，如：

```
$('#quoteLog ul').click( function(event){
  $(this).toggleClass('details-shown');
});

ul.details-shown li {
     /* do */
} 
```

更高效，因为没有遍历每个 li，让 css 完成这项工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:10:00.433

我会将事件与单个 LI 元素相关联，而不是与 UL ...

```
$('#quoteLog').find('ul li').click(function(event){
                $(this).toggleClass('details-shown');
}) 
```

更清洁恕我直言：使用此代码，您正在告诉：在列表的每个项目上，单击时，切换显示的类。不确定您要使用隐藏类实现什么，但如果您想添加它（单击或不单击），您可以在 toggleClass() 指令之后添加它。

```
$('#quoteLog').find('ul li').click(function(event){
                $(this).toggleClass('details-shown').addClass('details-hidden');
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T10:13:16.280

也许你需要用另一种方式来做，比如：

`$('#quoteLog ul').each(function(){`

`$(this).click(function({
$(this).children().each(function(){
$(this).toggleClass('details-shown');
});
}));
});`

# jqgrid - 我们可以在 jqgrid colModel 中有 2 个格式化程序选项吗？

> ID：11080552
> 
> 赞同：4
> 
> 时间：2012-06-18T09:57:46.710
> 
> 标签：jqgrid, jqgrid-formatter

我有一个 jqgrid，它有一个“column1”的自定义格式化程序。我需要将“column1”排序为日期。我知道我可以给出“格式化程序：日期”，如果我给出这个，我的自定义格式化程序不起作用。我们可以有 2 个格式化程序还是有其他选择？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:10:06.550

不，每个字段只能有一个格式化程序，尽管自定义格式化程序可以做任何事情，包括根据基础数据的值调用多个格式化程序。无论如何，格式化程序用于控制数据的显示方式，但不应影响行的排序方式。

如果您使用的是本地数据，则可以使用该`sorttype`选项来确定如何对一行数据进行排序。排序以单元格的实际值为准；您可以自由使用自定义格式化程序来执行所需的任何格式化。

或者，如果您在服务器端进行排序，我认为您仍然可以使用相同的方法。只需定义您需要的任何自定义格式化程序，然后使用列的基础日期值进行排序。

* * *

您还应该知道，[`unformat`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter#unformatting)在使用自定义格式化程序时，有一个选项可用于检索原始数据。我认为您在这里不需要它，但想提一下以防万一您需要使用它。

这些帮助有用？

* * *

**更新**

要从您的自定义格式化程序函数调用日期格式化程序，您首先需要在您的`colmodel`:

```
formatoptions: { srcformat:'m/d/Y', newformat:'ShortDate' }, 
```

然后，您可以像任何其他函数一样从自定义格式化程序中调用日期格式化程序：

```
function myFormatter (cellvalue, options, rowObject) {
    return $.fn.fmatter.date(cellvalue, options, rowObject);
} 
```

以上应该可以工作，虽然我没有测试过。请告诉我进展如何...

# php - php给我一个错误，它说这一行有错误

> ID：11080554
> 
> 赞同：-3
> 
> 时间：2012-06-18T09:57:56.067
> 
> 标签：php, mysql

我是一个新手，一个真正的新手，当它取决于 php...

我正在构建一个表单，它从数据库中获取信息并输出该特定选择的信息，我在这里有这个代码：

```
$SQL ="SELECT hostess_id FROM hostess WHERE first_name_en="'.addslashes($_GET["titles"]).'""; 
?> 
```

但它给了我一个错误，我的意思是它不正确。我应该如何回显这个查询的结果？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T09:59:01.197

代替 ：

```
"'.addslashes($_GET["titles"]).'" 
```

做：

```
'".addslashes($_GET["titles"])."' 
```

结果：

```
$SQL ="SELECT hostess_id FROM hostess WHERE first_name_en='".addslashes($_GET["titles"])."'"; 

$query = mysql_query($SQL) or die(mysql_error());
while($res = mysql_fetch_assoc($query)){
   echo $res["hostess_id"];
} 
```

**注意**：

`mysql_*`停止使用古老的功能编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，这篇[文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，这里有一个相当[不错的 PDO 相关教程](http://goo.gl/vFWnC)

# css - IE9 对 CSS 有文件大小限制吗？

> ID：11080560
> 
> 赞同：52
> 
> 时间：2012-06-18T09:58:13.523
> 
> 标签：css, internet-explorer, internet-explorer-9, stylesheet

我正在使用 Drupal，我注意到如果我聚合了我的 CSS 文件，那么 CSS 并不总是能正常工作。我知道[IE7 中存在问题，](https://drupal.stackexchange.com/questions/29994/drupal-aggregate-css-crashes-ie7)但 IE9 中的 CSS 文件大小有限制吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-18T10:18:29.130

有3个限制：

*   一张表最多可以包含 4095 个选择器，请参阅 [http://demos.telerik.com/testcases/4095issues.html](http://demos.telerik.com/testcases/4095issues.html)
*   一张表可以@import 最多 31 张，请参阅[http://demos.telerik.com/testcases/BrokenTheme.aspx](http://demos.telerik.com/testcases/BrokenTheme.aspx)
*   @import 嵌套最多支持 4 层深度

Microsoft 支持/MSDN 参考链接：

[http://support.microsoft.com/kb/262161](http://support.microsoft.com/kb/262161)

[http://blogs.msdn.com/b/ieinternals/archive/2011/05/14/internet-explorer-stylesheet-rule-selector-import-sheet-limit-maximum.aspx](http://blogs.msdn.com/b/ieinternals/archive/2011/05/14/internet-explorer-stylesheet-rule-selector-import-sheet-limit-maximum.aspx)

# blackberry - 在黑莓中将图像下载和保存到 sd 卡时出错？

> ID：11080564
> 
> 赞同：0
> 
> 时间：2012-06-18T09:58:35.910
> 
> 标签：blackberry, blackberry-simulator, blackberry-webworks

我正在研究黑莓项目，我想下载图像并将其保存在黑莓的 sd 卡中。通过浏览许多站点，我得到了一些代码，并基于这些代码编写了程序，但是当它执行时，输出屏幕显示一个空白页面，没有任何响应。我遵循的代码是..

代码：

```
 public class BitmapDemo extends UiApplication
   {    
      public static void main(String[] args)
        {        
       BitmapDemo app = new BitmapDemo();
       app.enterEventDispatcher();        
   }
   public BitmapDemo()
   {
       pushScreen(new BitmapDemoScreen());
   }

      static class BitmapDemoScreen extends MainScreen
    {
       private static final String LABEL_X = " x ";
       BitmapDemoScreen()
        {
        //BitmapField bmpFld1=new BitmapField(connectServerForImage("http://images03.olx.in/ui/3/20/99/45761199_1.jpg"));
        //add(bmpFld1);
        setTitle("Bitmap Demo");    

        // method for saving image in sd card
        copyFile();    

        // Add a menu item to display an animation in a popup screen
        MenuItem showAnimation = new MenuItem(new StringProvider("Show Animation"), 0x230010, 0);
        showAnimation.setCommand(new Command(new CommandHandler() 
        {
            public void execute(ReadOnlyCommandMetadata metadata, Object context) 
            {
                // Create an EncodedImage object to contain an animated
                // gif resource.      
                EncodedImage encodedImage = EncodedImage.getEncodedImageResource("animation.gif");

                // Create a BitmapField to contain the animation
                BitmapField bitmapFieldAnimation = new BitmapField();
                bitmapFieldAnimation.setImage(encodedImage);               

                // Push a popup screen containing the BitmapField onto the
                // display stack.
                UiApplication.getUiApplication().pushScreen(new BitmapDemoPopup(bitmapFieldAnimation));                    
            }
        }));

        addMenuItem(showAnimation);       
    }        

    private static class BitmapDemoPopup extends PopupScreen
    {    
        public BitmapDemoPopup(BitmapField bitmapField)
        {
            super(new VerticalFieldManager());                           
            add(bitmapField);                
        } 
        protected boolean keyChar(char c, int status, int time) 
        {
            if(c == Characters.ESCAPE)
            {
                close();
            }               
            return super.keyChar(c, status, time);
        }
    }
}

public static Bitmap connectServerForImage(String url) {

    System.out.println("image url is:"+url);
    HttpConnection httpConnection = null;
    DataOutputStream httpDataOutput = null;
    InputStream httpInput = null;
    int rc;
    Bitmap bitmp = null;
    try {
     httpConnection = (HttpConnection) Connector.open(url,Connector.READ_WRITE);
     rc = httpConnection.getResponseCode();
     if (rc != HttpConnection.HTTP_OK) {
      throw new IOException("HTTP response code: " + rc);
     }
     httpInput = httpConnection.openInputStream();
     InputStream inp = httpInput;
     byte[] b = IOUtilities.streamToBytes(inp);
     EncodedImage hai = EncodedImage.createEncodedImage(b, 0, b.length);
     return hai.getBitmap();

    } catch (Exception ex) {
     System.out.println("URL Bitmap Error........" + ex.getMessage());
    } finally {
     try {
      if (httpInput != null)
       httpInput.close();
      if (httpDataOutput != null)
       httpDataOutput.close();
      if (httpConnection != null)
       httpConnection.close();
     } catch (Exception e) {
      e.printStackTrace();
     }
    }
    return bitmp;
   }

public static void copyFile() {
    // TODO Auto-generated method stub
    EncodedImage encImage = EncodedImage.getEncodedImageResource("rim.png"); 
            byte[] image = encImage.getData();
            try {

                // Create folder if not already created
                FileConnection fc = (FileConnection)Connector.open("file:///SDCard/BlackBerry/images/");
                if (!fc.exists())
                    fc.mkdir();
                fc.close();

             // Create file
                fc = (FileConnection)Connector.open("file:///SDCard/BlackBerry/images/" + image, Connector.READ_WRITE);
                if (!fc.exists())
                    fc.create();
                OutputStream outStream = fc.openOutputStream();
                outStream.write(image);
                outStream.close();
                fc.close();
                System.out.println("image saved.....");
            } catch (Exception e) {
                // TODO: handle exception
                //System.out.println("exception is "+ e);
            }
} 
```

}

这是我正在使用的代码。除了空白页之外没有得到任何响应。由于我是黑莓开发新手，无法找出我的代码有什么问题。谁能帮我解决这个问题……实际上我还有其他疑问，就像黑莓模拟器中的android和iphone一样支持SD卡，否则我们需要为此外部添加任何SD卡插槽……

等待你的回复.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T03:58:32.607

发布的代码有几个问题。它也不完全清楚你想要做什么。从问题标题中，我假设您想从互联网上下载 jpg 图像并显示它。

**1）**您实现了一个名为`connectServerForImage()`下载图像的方法，但随后它被注释掉了。因此，如果不调用该方法，则不会下载任何内容。

**2）**即使它没有注释，`connectServerForImage()`也在这里调用

```
BitmapField bmpFld1=new BitmapField(connectServerForImage("http://images03.olx.in/ui/3/20/99/45761199_1.jpg")); 
```

这将在下载图像时阻塞主（UI）线程。即使您*可以*这样做，但这也不是一件好事。相反，您可以创建一个`Thread`将图像下载为后台任务，然后用于`UiApplication.invokeLater()`将图像加载到您`BitmapField`的主/UI线程中。

**3)**您的`copyFile()`方法尝试复制名为**rim.png**的文件，该文件必须是与您的应用程序捆绑在一起的图像，并将其保存到 SDCard。这真的是你想要的吗？您想保存下载的图像吗？这种方法似乎与其他任何东西都没有联系。它不会保存从互联网下载的图像，并且它保存的图像永远不会在其他任何地方使用。

**4)**在`copyFile()`, 这行

```
fc = (FileConnection)Connector.open("file:///SDCard/BlackBerry/images/" + image, Connector.READ_WRITE); 
```

将 a`byte[]`作为要打开的文件名的一部分传入（您的变量名为`image`）。您可能应该`String`在 SDCard 路径的末尾添加一个名称。正如代码所示，它可能会在 /SDCard/BlackBerry/images/ 文件夹中打开一个文件，该文件的名称很长，看起来像一个数字。或者，如果文件名的长度受到限制，它可能会完全失败。

**5)**在 Java 中，制作所有内容通常不是一个好主意`static`。静态通常应该用于常量，以及像方法这样的极少数方法`main()`，它必须是静态的。

尝试清理这些东西，然后重新发布代码，我们可以尝试帮助您解决问题。谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:05:33.110

要简单地将该图像下载并保存到 SDCard，您可以使用此代码。我更改了您的 SDCard 路径以使用**图片**文件夹，我认为这是 BlackBerry 上的标准位置。如果您真的想将其存储在**images**中，则可能只需要创建该文件夹（如果该文件夹尚不存在）。

```
package com.mycompany;

import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import javax.microedition.io.file.FileConnection;

public class DownloadHelper implements Runnable {

   private String _url;

   public DownloadHelper(String url) {
      _url = url;
   }

   public void run() {
      HttpConnection connection = null;
      OutputStream output = null;
      InputStream input = null;
      try {
         // Open a HTTP connection to the webserver
         connection = (HttpConnection) Connector.open(_url);
         // Getting the response code will open the connection, send the request,
         // and read the HTTP response headers. The headers are stored until requested.
         if (connection.getResponseCode() == HttpConnection.HTTP_OK) {
            input = new DataInputStream(connection.openInputStream());
            int len = (int) connection.getLength();   // Get the content length
            if (len > 0) {
               // Save the download as a local file, named the same as in the URL
               String filename = _url.substring(_url.lastIndexOf('/') + 1);
               FileConnection outputFile = (FileConnection) Connector.open("file:///SDCard/BlackBerry/pictures/" + filename, 
                     Connector.READ_WRITE);
               if (!outputFile.exists()) {
                  outputFile.create();
               }
               // This is probably not a robust check ...
               if (len <= outputFile.availableSize()) {
                  output = outputFile.openDataOutputStream();
                  // We'll read and write this many bytes at a time until complete
                  int maxRead = 1024;  
                  byte[] buffer = new byte[maxRead];
                  int bytesRead;

                  for (;;) {
                     bytesRead = input.read(buffer);
                     if (bytesRead <= 0) {
                        break;
                     }
                     output.write(buffer, 0, bytesRead);
                  }
                  output.close();
               }
            }
         }
      } catch (java.io.IOException ioe) {
         ioe.printStackTrace();
      } finally {
         try {
            if (output != null) {
               output.close();
            }
            if (connection != null) {
               connection.close();
            }
            if (input != null) {
               input.close();
            }
         } catch (IOException e) {
            // do nothing
         }
      }
   }
} 
```

正如我所建议的那样，此类可以在后台下载图像。要使用它，您可以像这样启动一个工作线程：

```
DownloadHelper downloader = new DownloadHelper("http://images03.olx.in/ui/3/20/99/45761199_1.jpg");
Thread worker = new Thread(downloader);
worker.start(); 
```

这会将文件另存为 /SDCard/BlackBerry/pictures/45761199_1.jpg。我在 5.0 Storm 模拟器上对其进行了测试。

# spring-security - 发生会话无效时如何配置自定义 URL

> ID：11080569
> 
> 赞同：2
> 
> 时间：2012-06-18T09:58:45.830
> 
> 标签：spring-security

我正在使用 Spring Security 3 并且我的 ApplicationContext-Security.xml 指定

```
 <form-login login-page="/genesis" default-target-url="/diagnostics/start-diagnostics"
      authentication-failure-url="/genesis?authfailed=true"
      authentication-success-handler-ref="customTargetUrlResolver"/>
      <access-denied-handler error-page="/genesis?notauthorized=true"/>

     <logout logout-success-url="/genesis"/> 

    <session-management session-authentication-error-url="/genesis"> 
            <concurrency-control max-sessions="1"/>
    </session-management> 
```

但是，当我在第二个浏览器中登录我的应用程序时，当我尝试执行任何操作时立即返回到我的第一个浏览器，我得到一个纯白屏幕，并显示消息“此会话已过期（可能是由于尝试了多个并发登录）作为同一用户”

如何配置 Spring Security 3 以显示我自己的“您已断开连接”URL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T12:55:30.190

您可以：

*   强制并发过滤器抛出身份验证异常（它将由 处理`<form-login>`），
*   提供您自己的会话过期页面。

[Spring Security 手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-concurrency-control)中描述了这些情况：

> `<concurrency-control>`属性
> 
> `error-if-maximum-exceeded`
> 
> 如果设置为“true”，当用户尝试超过允许的最大会话数时，将引发 SessionAuthenticationException。默认行为是使原始会话过期。
> 
> `expired-url`
> 
> 如果用户尝试使用已被并发会话控制器“过期”的会话，则用户将被重定向到的 URL，因为用户已超过允许的会话数并在其他地方再次登录。除非设置了 exception-if-maximum-exceeded，否则应该设置。如果未提供任何值，则将直接将过期消息写回响应。

另请检查[ConcurrentSessionFilter](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/session/ConcurrentSessionFilter.html)和[ConcurrentSessionControlStrategy](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/session/ConcurrentSessionControlStrategy.html)了解更多详细信息。

* * *

**回答你的问题**：在你的配置中你应该有这样的东西：

```
<session-management session-authentication-error-url="/genesis"> 
    <concurrency-control max-sessions="1" expired-url="/sessionExpired.jsp" />
</session-management> 
```

*请注意，`expired-url`与 不一样`session-authentication-error-url`。*

# delphi - 将数据共享到 LinkedIn api 用户配置文件以更新状态

> ID：11080570
> 
> 赞同：0
> 
> 时间：2012-06-18T09:58:50.390
> 
> 标签：delphi, linkedin

我正在开发一个将数据共享到 LinkedIn 用户个人资料的程序。我正在使用 Delphi XE2、OAuth 和 LinkedIn API。我能够获得访问令牌。然后我想更新状态。所以我的代码是

```
procedure TForm1.Button2Click(Sender: TObject);
var
IdSSLIOHandlerSocketOpenSSL1: TIdSSLIOHandlerSocketOpenSSL ;
Url,sign  : String;
Response     : TStringStream;
slist        : TStringList;
str          : WideString;
Arequest1    : TOAuthRequest;
AuthHeader   : WideString;
begin
   with http do
   Begin
    IdSSLIOHandlerSocketOpenSSL1 := TIdSSLIOHandlerSOcketOpenSSL.Create(nil);
    with idSSLIOHandlerSocketOpenSSL1 do
    begin
      SSLOptions.Method := sslvTLSv1;
      SSLOptions.SSLVersions := [sslvTLSv1];
      SSLOptions.Mode := sslmBoth;
      SSLOptions.VerifyMode := [];
      SSLOptions.VerifyDepth := 0;
      host := '';
    end;
    IOHandler := IdSSLIOHandlerSocketOpenSSL1;
    AllowCookies := True;
    Request.ContentRangeEnd := 0;
    Request.ContentRangeStart := 0;
    Request.ContentType := 'application/xml';
    Request.ContentEncoding := 'utf-8';
    Request.BasicAuthentication := False;
    Request.Connection   := 'Keep-Alive';
    request.host := 'api.linkedin.com';
    Request.Accept := 'text/xml, */*';
    Request.UserAgent  :=  'Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0' ;
    HTTPOptions := [hoForceEncodeParams];
   end;
     Url := 'https://api.linkedin.com/v1/people/~/shares';
     Consumer    := nil;
     Consumer    := TOAuthConsumer.Create(ConsumerKey, ConsumerSecret);
     Arequest1   := TOAuthRequest.Create(Url);
     sign        := HMAC.build_signature(Arequest1,Consumer,Token);
     sign        := TOAuthUtil.urlEncodeRFC3986(sign);
     http.Request.CustomHeaders.Clear;
     AuthHeader     := 'OAuth '+ 'oauth_nonce="'+Arequest1.GenerateNonce+'",'+  'oauth_signature_method="'+HMAC.get_name+'",'+ 'oauth_timestamp="'+Timestamp+'",'+ 'oauth_consumer_key="'+Consumer.Key+'",'+ 'oauth_token="'+Token.Key+'",'+ 'oauth_signature="'+sign+'",'+ 'oauth_version="1.0"';
      http.Request.CustomHeaders.Add(AuthHeader);
      slist       := TStringList.Create;

      slist.Text  := '<?xml version="1.0" encoding="UTF-8"?><share><comment>Posting from the API using XML</comment>'+
                     '<content><title>A title for your share</title><submitted-url>http://developer.linkedin.com</submitted-url>'+
                     '<submitted-image-url>http://lnkd.in/Vjc5ec</submitted-image-url></content><visibility>'+
                     '<code>anyone</code></visibility></share>';
    Response    := TStringStream.Create;
    http.Request.ContentLength  := length(slist.Text);
  try
     http.post(Url,slist,Response);
  Finally
    ShowMessage(Response.DataString);
    http.Free;
    ARequest.Free;
  end;
end; 
```

我正面临**401 未授权**。请检查我的问题@A1rPun。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:20:39.387

感谢您提供完整的代码示例。我看到您评论了您在 Delphi XE2 中使用 indy 10 的上一个[问题。](https://stackoverflow.com/questions/10981160/share-data-to-linkedin-users-profile-for-status-update)

问题可能是 indy 10 中的 SSL 身份验证存在问题。[此处的完整解释](https://stackoverflow.com/questions/10818806/how-can-i-get-delphi-xe2-to-talk-to-google-calendar-apis-over-ssl/10823262#10823262)您可以做的是尝试获得 indy 组件的稳定版本。

除了一些可以释放的资源外，代码似乎没有错误；）。

我真的希望在更新您的 indy 时您的问题能够解决。

# c++ - C++ 中的 int64 时间计算

> ID：11080572
> 
> 赞同：0
> 
> 时间：2012-06-18T09:59:00.837
> 
> 标签：c++

我正在研究 C++ 中与时间相关的代码。

```
FILETIME ftTime;
GetSystemTimeAsFileTime(&ftTime);

struct DateTime
{
    unsigned int dwLowDateTime;
    unsigned int dwHighDateTime;
};

DateTime myTime;
myTime.dwHighDateTime = (unsigned int)ftTime.dwHighDateTime;
myTime.dwLowDateTime  = (unsigned int)ftTime.dwLowDateTime;

ussigned __int64 AsUInt64_t

unsigned __int64 myInt64Time = *(unsigned __int64*)&myTime;

// I have Getstring format from date time some thing like this below

Format() {

SYSTEMTIME  systemTime;
FileTimeToSystemTime(&fileTime, &systemTime);

const char*         formatString = "%04d-%02d-%02d %02d:%02d:%02d.%03d";

// I have few variable declartions to be used for snprintf which is not mentioned here.

apiResult = _snprintf_s(pBuffer, sizeOfBuffer, count, formatString, systemTime.wYear, systemTime.wMonth, systemTime.wDay, systemTime.wHour, systemTime.wMinute,                         systemTime.wSecond, systemTime.wMilliseconds);

}

DateTime startTime = now(); // some how I am getting latest time here.
sleep(5s); // sleeping for 5 seconds.
DateTime endTime = now(); // i.e., after 5 seconds.

std::cout << "\nOn Start Time:" << startTime.Format() << std::endl;
std::cout << "On End Tme:    " << endTime.Format() << std::endl;

std::cout << "On Start Read " << *(unsigned __int64*)&startTime << std::endl;
std::cout << "On End Read " << *(unsigned __int64*)&endtime<< std::endl;

/////////////////// 
```

对于上述输出如下。

```
On Start Time:2012-06-18 09:45:03.180
On End Time  :2012-06-18 09:45:08.183

// Int Int64 I am getting as below

On Start Read : 129844863031802858
On End Read   : 129844863081832935 
```

我的问题是我想根据给定的间隔将边界划分为相等的间隔，例如每个 2 秒的间隔。我怎么去？

上限（范围/间隔）间隔。

例如开始：12:00:00:0000 和结束是 12:01:52:00099。间隔是 16 秒，那么我们有 7 个间隔。

```
unsigned __int64 interval =16; 
```

如果我使用 int 上述逻辑`(*(unsigned __int64*)&endtime - *(unsigned __int64*)&startTime) / interval)`，我不会得到 7 吗？我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T06:59:37.953

`FILETIME`struct 包含一个 64 位值，表示自 1601 年 1 月 1 日 (UTC) 以来的 100 纳秒间隔数。

检查此链接：[FILETIME 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284(v=vs.85).aspx)

因此，对两个变量进行减法运算`FILETIME`可以得到以纳秒 (nS) 为单位的时间差。

将其除以 16（秒）不会给您想要的结果。

除以 16 * 10^9 或使用`difftime`API [(Link)](http://cplusplus.com/reference/clibrary/ctime/difftime)为您执行此数学运算并以秒为单位返回时差。

# c# - 样式未拾取 WPF

> ID：11080575
> 
> 赞同：1
> 
> 时间：2012-06-18T09:59:04.770
> 
> 标签：c#, wpf

我正在尝试在外部 DLL 中设置样式，用于定义某些控件的外观。

我在外部 DLL 中定义了一个资源字典，该字典具有针对 TextBoxes 的样式：

```
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style TargetType="{x:Type TextBox}" x:Key="TextStyle">
        <Setter Property="Text" Value="Moo"/>
    </Style>
</ResourceDictionary> 
```

然后我在另一个应用程序中引用这个构建的 DLL。这有效：

```
<Window x:Class="HTMLTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/GX3Resources;component/Resources.xaml"/>

            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <TextBox Height="23" HorizontalAlignment="Left" Margin="45,217,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Style="{StaticResource TextStyle}"/>
    </Grid>
</Window> 
```

这不会：

```
<Window x:Class="HTMLTest.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525">
        <Window.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <ResourceDictionary Source="pack://application:,,,/GX3Resources;component/Resources.xaml"/>

                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
        </Window.Resources>

        <Grid>
            <TextBox Height="23" HorizontalAlignment="Left" Margin="45,217,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" />
        </Grid>
    </Window> 
```

我希望上面的内容会选择 TextStyle，因为它是一个文本框，并且该样式针对文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:04:20.703

如果您可以编辑原始样式，则可以通过将其 key 属性设置为目标类型来自动将其用于所有文本框：

```
<Style TargetType="{x:Type TextBox}" x:Key="{x:Type TextBox}"> 
```

如果无法更改样式，请尝试基于它创建另一个样式：

```
<Style TargetType="{x:Type TextBox}" 
       BasedOn="{StaticResource TextStyle}" 
       x:Key="{x:Type TextBox}">
</Style> 
```

# css - 通过 CSS 操作 xslt 菜单

> ID：11080576
> 
> 赞同：1
> 
> 时间：2012-06-18T09:59:07.193
> 
> 标签：css, xml, xslt, umbraco

好的; 使用 Umbraco CMS 我有一个 xslt 菜单以下列方式生成：

```
 <xsl:output method="xml" omit-xml-declaration="yes" />

    <xsl:param name="currentPage"/>

    <!-- Input the documenttype you want here -->
    <xsl:variable name="level" select="1"/>

    <xsl:template match="/">

 <ul id="topNavigation">
       <li class="home">
         <xsl:if test="$currentPage/@id = $currentPage/ancestor-or-self::* [@level=$level]/@id">
             <xsl:attribute name="class">home current</xsl:attribute>
         </xsl:if>
         <a href="/">Home</a>
       </li>
      <xsl:for-each select="$currentPage/ancestor-or-self::*
      [@level=$level]/*
      [@isDoc and string(umbracoNaviHide) != '1']">
  <li>
     <xsl:if test="@id = $currentPage/@id">
        <xsl:attribute name="class">current</xsl:attribute>
      </xsl:if>
    <a class="navigation" href="{umbraco.library:NiceUrl(@id)}">
      <span><xsl:value-of select="@nodeName"/></span>
    </a>
  </li>

</xsl:for-each>
</ul>

    </xsl:template> 
```

它循环通过至少一个 xml 表（我对 xslt 不是很熟悉），它通过将页面附加到菜单系统来生成菜单。相信这段xml片段在这个过程中意义重大

```
<p><a href="http://umbraco.org/get-started"
title="Get Started with Umbraco">Get more information</a> about the
umbraco way.</p>
]]></bodyText>
        <umbracoNaviHide>0</umbracoNaviHide>
      </umbTextpage>
      <umbTextpage id="1071" parentID="1068" level="3" writerID="0" creatorID="0" nodeType="1059" template="1052" sortOrder="3" createDate="2010-09-07T13:19:40" updateDate="2012-06-04T21:47:02" nodeName="Getting started" urlName="getting-started" writerName="redacted" creatorName="redacted" path="-1,1061,1068,1071" isDoc="">

        <bodyText><![CDATA[
<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
]]></bodyText>
        <umbracoNaviHide>0</umbracoNaviHide>
      </umbTextpage>
    </umbTextpage>
    <umbTextpage id="1177" parentID="1061" level="2" writerID="0" creatorID="0" nodeType="1059" template="1052" sortOrder="4" createDate="2012-06-05T11:28:36" updateDate="2012-06-05T11:33:13" nodeName="Our Clients" urlName="our-clients" writerName="redacted" creatorName="redacted" path="-1,1061,1177" isDoc="">
      <bodyText><![CDATA[
<h3>Our Clients</h3>

<p>etc. etc.</p>

<!-- endUmbMacro -->]]></bodyText>
      <umbracoNaviHide>0</umbracoNaviHide>
    </umbTextpage>
    <umbTextpage id="1072" parentID="1061" level="2" writerID="0" creatorID="0" nodeType="1059" template="1052" sortOrder="5" createDate="2010-09-07T13:20:06" updateDate="2012-06-08T11:23:26" nodeName="Contact us" urlName="contact-us" writerName="redacted" creatorName="redacted" path="-1,1061,1072" isDoc="">
      <bodyText><![CDATA[
<h3>Office address</h3> 
```

例如，nodeName 用作选项卡内容的字符串（即，上面的 xml 代码中有标记为“我们的客户”和“联系我们”的选项卡，它们的排序方式与上面写的相同。

**我的问题与我需要能够更改各种选项卡的背景颜色**这一事实有关——不要让它们都具有相同的颜色。但是，唯一具有唯一 ID 的选项卡似乎是“主页”选项卡。在相关的 CSS 数据中：

```
#naviWrap { background-color:#000; background-color:rgba(0,0,50,0.5); margin:15px 0 0 0; } /*menu */
#topNavigation { border-left:1px solid rgba(255,255,255,0.25); margin:0 auto; width:960px; }
#topNavigation li { border-left:1px solid rgba(0,0,0,0.25); border-right:1px solid rgba(255,255,225,0.25); display:inline-block; height:60px; line-height:60px; text-align:center; }
#topNavigation li a { color:#fff; display:block; font-size:11px; height:60px; padding:0 30px; text-decoration:none; text-transform:uppercase; font-style: italic; font-weight:bold;}
#topNavigation li a:hover { background-color:#000; background-color:rgba(0,0,0,0.2); text-decoration:none; }
#topNavigation li.current { background-color:#200; background-color:rgba(350,0,100,0.5); }
#topNavigation li.current a {} 
```

li.current 与主页选项卡（菜单中的第一个选项卡）相关，而其余选项卡由 naviWrap 控制。'li a' 与选项卡的文本颜色有关。

那么有什么方法可以单独控制 CSS 中的选项卡吗？我认为它必须要么在 xml 级别完成（例如，与诸如 umbTextpage id="1177" 之类的事情有关），要么在 xslt 菜单生成中完成，其中一些参考点被分配给菜单选项卡在此刻。

很抱歉这个问题过长 - 任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:15:42.253

你可以试试这个，在你的 xsl 文件中，这是`for-each`循环内的位：

```
 <li>
     <xsl:attribute name="class">list-<xsl:value-of select="position()"/><xsl:if test="@id = $currentPage/@id"> current</xsl:if></xsl:attribute>
    <a class="navigation" href="{umbraco.library:NiceUrl(@id)}">
      <span><xsl:value-of select="@nodeName"/></span>
    </a>
  </li> 
```

基本上，您`<li>`根据`position()`for-each 循环中的每个添加一个类，为您提供以下类型的输出：

```
<li class="list-0">
<li class="list-1">
<li class="list-2 current"> //current will appear on the right li item as before, along with list-n class 
```

然后很容易`<li>`用 css 定位每个目标：

```
#topNavigation li.list-0 {
   background-color: #f00;
}
#topNavigation li.list-1 {
   background-color: #0f0;
}
#topNavigation li.list-2 {
   background-color: #00f;
} 
```

等等

我的 xslt 虽然很生锈，所以语法可能不正确 - 但它应该足以为您指明正确的方向！

# mysql - MySQL在自己的列上有多个值

> ID：11080578
> 
> 赞同：0
> 
> 时间：2012-06-18T09:59:17.140
> 
> 标签：mysql, database

我有一张这样的桌子；

```
id1     id2
1       1
2       1
1       2
3       2
1       3
4       3
1       4
5       4 
```

我想以一种获得行的方式选择它`GROUP`，但仍保留表中相应行的`id2`两个值。`id1`

所以我会得到这样的结果集；

```
id1     id1     id2
1       2       1
1       3       2
1       4       3
1       5       4 
```

我在高级数据库查询方面从来没有一半好过——我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:14:00.290

如果`id1`每个不同的值恰好有 2 行（有 2 个值）`id2`，则可以使用：

```
SELECT MIN(id1) AS id1_a
     , MAX(id1) AS id1_b
     , id2
FROM tableX
GROUP BY id2 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:02:10.603

你可以尝试使用

```
SELECT id2, GROUP_CONCAT(id1) FROM your_table
GROUP BY id2 
```

这样，对于每个 id2 值，您都有一个所有 id1 值以逗号分隔的列。
看看[GROUP_CONCAT 语法](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:22:26.760

这可能不是完美的解决方案，但在您的情况下，它应该可以工作。这是我使用的一个技巧。

select id1, (sum(id1) - id1 ) as nID1, id2 from table_name group by id2

希望它有效。乌吉瓦尔

# ruby - 如何在Ruby中的匹配行周围打印几行？

> ID：11080579
> 
> 赞同：1
> 
> 时间：2012-06-18T09:59:18.083
> 
> 标签：ruby, regex

我的脚本搜索文件，在日志中找到一个条目并打印相应的行，我想看到的是匹配周围的几行，以便查看之前发生的事情

```
files=Dir.open(Dir.pwd)
files.each do |li|
  next unless File.file? li
  f = File.open(li, "r:windows-1251")
  if f.each do |line|
    next unless line.include? (tag_466) or line.include?(tag_1004)
    a=[]
    a << ["1.#{MAT_1}".aster.console_green, line, "\n"] if line =~ /#{MAT_1}/
    a << ["2.#{MAT_2}".aster.console_green, line, "\n"] if line =~ /#{MAT_2}/
    puts a
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:36:21.457

一个例子：

```
def match_environment( filename, check_content = 'test', no_of_lines = 4)
  line_pattern = "%1s %5i: %s%"
  File.open(filename, "r:windows-1251") do |f|
    puts "====File #{f.path}===="
    #Contains previous 4 lines
    extract = []
    hit = 0 #flag to print next lines

    f.each_with_index do |line,linno|
      linno += 1  #Start line counting with 1
      extract.shift if extract.size >= no_of_lines  #remove last line
      if line.include? ( check_content )
        #print previous 4 lines
        extract.each_with_index{|pline, index|
          puts line_pattern % [ nil, linno - extract.size + index, pline.chomp ]
        }
        extract = []  #avoid
        puts line_pattern % [ '!', linno, line.chomp ]  #This line has a hit
        hit = no_of_lines #print next four line
      else
        if hit > 0  #put next lines
          puts line_pattern % [ nil, linno,line.chomp ]
          hit -= 1
          puts '   [...]' if hit == 0
        end
        extract << line   #add actual line
      end
    end 
  end #close file

end #match_environment

#Test if we find test anywhere
match_environment( __FILE__, 'test' )

exit  #remove to check directory
#loop on directory
Dir['*'].each do |filename|
  next unless File.file? filename
  match_environment( filename )
end 
```

`extract`是一个包含最后 n 行（参数 ）的数组`no_of_lines`。每个新行都被附加，以前的行被删除。`extract`是前 n 行的存储。

`hit`是打印下 n 行的计数器。

此解决方案的一个优点：如果您`'test'`多次匹配您的搜索模式（在我的示例中是），则之前和之后的四行仅从第一次和最后一次命中开始计算。

`line_pattern`是输出的模式（如果该行包含搜索字符串，则为标志，行号为 5 个字符，后跟该行）。

如果我执行脚本，我会得到：

```
====File test.rb====
      1:     %
      2:     %
!     3:     def match_environment( filename, check_content = 'test', no_of_lines = 4)%
      4:       line_pattern = "%1s %5i: %s%"%
      5:       File.open(filename, "r:windows-1251") do |f|%
      6:         puts "====File #{f.path}===="%
      7:         #Contains previous 4 lines%
   [...]
     33:     end #match_environment%
     34: %
     35: %
!    36:     #Test if we find test anywhere%
!    37:     match_environment( __FILE__, 'test' )%
     38:     %
     39:     exit  #remove to check directory%
     40:     #loop on directory%
     41:     Dir['*'].each do |filename|%
   [...] 
```

备注：`match_environment( __FILE__, 'test' )`在脚本文件本身上执行脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:15:43.597

您可以通过多个步骤来完成：

1.  将文件读入一个`Array`
2.  在该数组中查找匹配的行索引
3.  实现一个`print_line(ary, index, context)`打印行`index-context..index+context`并为找到的每个索引调用它的方法

# game-engine - 无尽的关卡背景

> ID：11080581
> 
> 赞同：0
> 
> 时间：2012-06-18T09:59:28.427
> 
> 标签：game-engine, slick2d

你能帮忙看看这个关卡的无尽背景吗？

我目前正在使用 slick2d 编写一个原始游戏，游戏玩法类似于马里奥。

我有两张图片 - img1 和 img2（均为 1280x480，而屏幕分辨率为 640x480）。最初 img2 的 X 是 == (img1 的 X + img1 的宽度)。即它粘在img1的末端。当 img1 超出屏幕左边框时，它的 X 坐标变为 img2X + imgWidth。

逻辑看起来对我来说是正确的，但有时图片会被过度使用（很多，大约是屏幕的 1/4）。逻辑上有没有错误？方法好吗？也许有更简单和正确的方法来做到这一点？

伪代码如下所示：

```
class BkgDrawer {

Image img1 = new Image("imgs/background/bkg1.png");
Image img2 = new Image("imgs/background/bkg2.png");

int img1Width = img1.getWidth(); //1280
int img2Width = img2.getWidth(); //1280
int screenResolution = game.getResolution; //640

Vector2f position1 = new Vector2f (0,0);
Vector2f position2 = new Vector2f (position1.x+img1.getWidth(), 0); //initially position2 is glued to the end of img1

public void render(    ) {
  if (position1.x + img1Width < 0) { //the img is over the left border of the screen
      position1.x = position2.x + img2Width; //glue it to the end of  img2
  }
//the same for the img2
  if (position2.x + img2Width < 0) { //the img is over the left border of the screen
      position2.x = position1.x + img2Width; //glue it to the end of  img2
  }
  img1.draw(position1.x, position1.y);
  img2.draw(position2.x, position2.y);
  //move coordinate to get the background moving.
  position1.x -= MOVING_STEP;
  position2.x -= MOVING_STEP;
  }
} 
```

很抱歉有很多文字，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:24:08.983

I have found only one bug and it will only have an affect if the two images have different widths: Your two if-statements use the same width `img2Width`

You may have noticed that you have duplicate code to handle the rendering and repositioning of each background. Might I suggest that you refactor the background code into a Background class that contains the background image, position, and and update method that repositions it by MOVING_STEP. You will avoid mistakes like the one I mentioned above.

# amazon - 爬亚马逊是否合法？

> ID：11080584
> 
> 赞同：7
> 
> 时间：2012-06-18T09:59:35.647
> 
> 标签：amazon, web-crawler

我想从亚马逊获得具体信息，例如产品名称和描述！爬亚马逊是否合法。或者亚马逊是否提供任何 api 来获取其数据的付费或非付费

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:18:46.853

亚马逊的“[产品广告 API](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html) ”允许这样做。您应该*仔细*阅读许可协议，因为它对他们允许您使用它做什么具有高度限制性。

# ios - 如何允许对 uiwebview 上的操作发出 javascript 警报

> ID：11080587
> 
> 赞同：2
> 
> 时间：2012-06-18T09:59:56.930
> 
> 标签：ios, ios5, uiwebview, uiwebviewdelegate

我正在将网页加载到我的 UIWebView 上。网页加载成功，网页上的按钮工作正常。但是当我在网页的文本框中输入错误的文本时，我无法在网页上看到应该弹出的警报。

如何允许显示警报。

请帮我。谢谢你

这是我的代码：

```
[webView loadRequest:[NSURLRequest requestWithURL: 
    [NSURL URLWithString:@"http://DUMMYURL.com/"]]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:35:36.950

在这里，我需要进一步澄清。也就是说，1.您如何处理警报？那是从中间轮胎吗？或 2.您是否通过获取您已经在 HTML 中给出的参考标识符来显示您的 Web 视图代表？

如果您按照第二步，您可以在 web 视图委托方法中获取引用标记。那是，

```
- (BOOL)webView:(UIWebView *)webView1 shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *referenceString = [[[request URL] absoluteString] lastPathComponent];
} 
```

因此，这里的“referenceString”显示了您在 HTML 中为选择指定的参考标记。这应该是独一无二的。

您可以在此处比较参考标签并生成警报。

我认为这很有用。

# python - 调用 pythons urllib2.info() 会导致异常吗？

> ID：11080588
> 
> 赞同：0
> 
> 时间：2012-06-18T09:59:57.023
> 
> 标签：python, exception, urllib2

我不时出现一些异常，但想不出原因。

这是一个片段：

```
 try:
        r = urllib2.urlopen(url)
    except urllib2.URLError, e:
        if hasattr(e, 'code'):
            # unauthorized
            print('UA: %s' % url)
        elif hasattr(e, 'reason'):
            print('TO: %s' % url)
            # timeout
    else:
        i = r.info()

        try:
            server = i['server']
        except:
            pass
        else:
            if not 'authenticate' in server:
                print('NA: %s' % url) 
```

我在想也许 r.info() 会导致异常，但不确定为什么会因为 r = urllib2.urlopen(url) 被尝试覆盖。

错误是：

```
Traceback (most recent call last):
  File "C:\Python27\lib\threading.py", line 551, in __bootstrap_inner
    self.run()
  File "C:\Users\anthony\Scripts\checker.py", line 35, in run
    r = urllib2.urlopen(url)
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1180, in do_open
    r = h.getresponse(buffering=True)
  File "C:\Python27\lib\httplib.py", line 1030, in getresponse
    response.begin()
  File "C:\Python27\lib\httplib.py", line 407, in begin
    version, status, reason = self._read_status()
  File "C:\Python27\lib\httplib.py", line 371, in _read_status
    raise BadStatusLine(line)
BadStatusLine: '' 
```

和

```
 File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1180, in do_open
    r = h.getresponse(buffering=True)
  File "C:\Python27\lib\httplib.py", line 1030, in getresponse
    response.begin()
  File "C:\Python27\lib\httplib.py", line 407, in begin
    version, status, reason = self._read_status()
  File "C:\Python27\lib\httplib.py", line 365, in _read_status
    line = self.fp.readline()
  File "C:\Python27\lib\socket.py", line 447, in readline
    data = self._sock.recv(self._rbufsize)
error: [Errno 10054] An existing connection was forcibly closed by the remote host 
```

我已经阅读了一些关于 [Errno 10054] 的信息，但不知道如何防止它。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:12:30.307

> 我在想也许 r.info() 会导致异常，但不确定为什么会因为 r = urllib2.urlopen(url) 被尝试覆盖。

没有。`r.info()`第一个异常与- 在 上引发异常无关`urllib2.urlopen(url)`，正如您在回溯中看到的那样。

`BadStatusLine`异常被定义`httplib`，你`except urllib2.URLError`根本没有抓住它。您可能应该改进您的异常处理逻辑，例如：

```
except (httplib.HTTPException, urllib2.URLError) as err:
    ... 
```

# android - 在 ListView 上的 RelativeLayout，当 RealtiveLayout 显示为时未检测到 onclick

> ID：11080590
> 
> 赞同：0
> 
> 时间：2012-06-18T10:00:01.483
> 
> 标签：android, android-listview, android-relativelayout, android-tabhost, android-framelayout

我目前`relative layout`是一个显示在一个`listview`. 原来，当我单击时`RelativeLayout`，总是在`list view`.

我想在显示布局时检测布局上的手势，但是当我单击时，该项目是从`listview`下面的项目中选择的。

有人知道这个问题的解决方案吗？

```
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/start_tabs_topbar" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="0dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="0dp" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="-4dp"
            android:layout_weight="0" />
    </LinearLayout>
</TabHost>

    <RelativeLayout
        android:id="@+id/playertab1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/back_artista"
        android:gravity="center_vertical|left"
        android:paddingLeft="15dp" >

        <LinearLayout
            android:id="@+id/music_info"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity=""
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/artist_image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="9dp"
                android:layout_marginTop="4dp"
                android:src="@drawable/placeholder" />

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="top"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/playlist_name"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="playlist_name"
                    android:textColor="#3BBEF9"
                    android:textSize="15dp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/artist_album"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="artist_album"
                    android:textColor="#EEEEEE"
                    android:textSize="11dp" />

                <TextView
                    android:id="@+id/artist_name"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="artist_album"
                    android:textColor="#EEEEEE"
                    android:textSize="11dp" />

                <TextView
                    android:id="@+id/artist_song"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="artist_song"
                    android:textColor="#EEEEEE"
                    android:textSize="11dp" />
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout> 
```

* * *

插入的列表视图：

```
 <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:padding="0dp" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:23:33.610

如果您正在使用`GestureDetector`尝试首先调用`mDetector.setIsLongpressEnabled(true);`并设置视图长点击通过`convertView.setLongClickable(true);`

# android - 在相对布局中设置视图高度

> ID：11080591
> 
> 赞同：0
> 
> 时间：2012-06-18T10:00:01.577
> 
> 标签：android, android-layout, android-relativelayout

我有一个这样的布局，我想在视图上方显示一个标签，然后在下面重复它。

这是我的代码...

```
<RelativeLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/speedLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:text="@string/speed"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <View
        android:id="@+id/speedGraph"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="4dp"
        android:layout_below="@+id/speedLbl"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:background="@color/blueColour" />

    <TextView
        android:id="@+id/distanceLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_below="@+id/speedGraph"
        android:text="@string/distance"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <View
        android:id="@+id/distanceGraph"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/distanceLbl"
        android:layout_marginBottom="4dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:background="@color/blueColour" />

</RelativeLayout> 
```

问题是我不想为两个视图设置高度，因为我希望它们根据屏幕尺寸动态变化。
我尝试使用`layout_weight`，但它不喜欢它嵌套在另一个内部的事实。

谁能看到这个问题的另一种解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:22:18.893

您可以通过一个小技巧来避免双重权重问题。`View`您可以在父项的垂直中心设置一个空，`RelativeLayout`并将两个组放置在其上方和下方，如下`View`所示：

```
<RelativeLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:orientation="vertical" >

    <View android:id="@+id/anchor" 
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_centerVertical="true/>

    <TextView
        android:id="@+id/speedLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:text="@string/speed"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <View
        android:id="@+id/speedGraph"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="4dp"
        android:layout_below="@id/speedLbl"
        android:layout_above="@id/anchor"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:background="@color/blueColour" />

    <TextView
        android:id="@+id/distanceLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_below="@id/anchor"
        android:text="@string/distance"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <View
        android:id="@+id/distanceGraph"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/distanceLbl"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="4dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:background="@color/blueColour" />

</RelativeLayout> 
```

此外，您应该`@+id/...`仅在第一次声明该 id 时使用该符号，在下一次出现 id 时您应该使用`@id/...`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:04:37.927

可以通过 `layout_weight`. 但在此之前，您只需尝试 `layout_weight`线性布局并为视图和文本视图提供适当的权重。它几乎可以解决您的问题。不要使用带权重的相对布局。重量在相对布局中不起作用。

# android - 多页面的android设计模式：多个xml的多个活动？

> ID：11080592
> 
> 赞同：0
> 
> 时间：2012-06-18T10:00:07.880
> 
> 标签：android, design-patterns, android-layout

我的应用程序需要有多个屏幕，例如一个登录页面，然后是另一个显示项目列表的页面，然后是显示所选项目详细信息的页面。我想知道在这种情况下一般/公认的做法是什么？我怀疑它会有多个布局，但我如何存储已选择的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:21:01.790

您在活动之间传递它，有多种方法可以做到这一点。最简单的简单项目是在 Intent 中传递它们

关于活动 A：

```
...
intent.putExtra("selectedItem", "1");
startActivity(intent); 
```

关于活动 B：

```
Intent intent = getIntent();
String item = intent.getStringExtra("selectedItem"); 
```

# c# - Telerik radgrid 中的多个编辑列

> ID：11080595
> 
> 赞同：4
> 
> 时间：2012-06-18T10:00:17.273
> 
> 标签：c#, asp.net, telerik, telerik-grid

我有一个telerik-radgrid，我在其中使用了一个editcolumn。对于`edit-column`我使用的 webusercontrol，我创建了。这工作正常。

但是知道应该有两个编辑链接。根据他的选择，我想显示不同的用户控件。

当我创建两个时`GridEditCommandColumns`出现错误，因为两列具有相同的 id “EditButton”

我不想将用户控件的全部内容合二为一，只显示所需的内容，尽管这样可行。但是控件非常大，以后再使用它就不好了。

如何使用`Edit-Columns`二合一 radgrid？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:16:54.587

我自己发现了

`GridButtonColumn`我用命令创建了一个`Edit` ，`GridEditCommandColumns`我在其中分配了一个用户控件给它。

当涉及到 EditCommand-Event 时，我会执行以下操作：

```
if (((LinkButton)e.CommandSource).Text == "Edit1") //The Title of EditColumn 1
{
    rgCases.MasterTableView.EditFormSettings.UserControlName = "WebUC1.ascx";
}
else
{
    rgCases.MasterTableView.EditFormSettings.UserControlName = "WebUC2.ascx";
} 
```

# javascript - 如何将整个页面保存为一个文件，以便离线工作（包括外部 javascript）？

> ID：11080598
> 
> 赞同：2
> 
> 时间：2012-06-18T10:00:31.827
> 
> 标签：javascript, html

我需要能够将我网站上的页面保存到我的硬盘驱动器，以便我可以在线和离线使用它。问题是，该页面在其自己的文件夹之外使用对 javascript 和 CSS 文件的引用。我可以将整个页面保存为一个 .html 文件，这一点非常重要，这样外部文件中的所有 javascript 和 CSS 代码也都在该文件中。

有没有办法做到这一点？

这应该以编程方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:52:08.870

根据您的要求，这可以使用 Python 以编程方式完成。代码的模式如下所示：

*   请求用户将 url 粘贴到一个框中
*   wget 或 curl 页面并使用正则表达式找出包含的代码在哪里
*   *   或者：使用像 SGML 这样的库直接与 HTML 标签交互
*   将所有链接的 CSS、JS 等文件放在一个 List 中
*   获取所有链接文件的内容并将它们放在列表中
*   重建 HTML 源代码并去掉和标签的东西
*   现在在标签中循环链接文件的内容，如下所示：

    新标题内容 = ''

    对于linkedFilesArray 中的内容：newHeaderContent = newHeaderContent + content

    newHTML = firstHTMLCode + newHeaderContent + lastHTMLCode

# audio - 如何使用 iphone sdk 中的 AVFoundation 将音频输出数据转换为帧

> ID：11080599
> 
> 赞同：1
> 
> 时间：2012-06-18T10:00:38.080
> 
> 标签：audio, video, avfoundation, video-capture, audio-capture

我正在尝试使用捕获视频和音频`AVCaptureSession`，我完成了视频捕获并转换为像素缓冲区，然后我在服务器端使用`ffmpeg n rtmp server`. 但问题是如何使音频转换为信息数据并在接收数据的服务器端播放。并想知道捕获的音频是什么音频格式。

谢谢大家，莫尼什

# asp.net-mvc-3 - ActionButton 而不是 ActionLink

> ID：11080601
> 
> 赞同：28
> 
> 时间：2012-06-18T10:00:42.640
> 
> 标签：asp.net-mvc-3, razor

我想创建一个按钮，单击该按钮会调用一个动作。我曾经`Html.ActionLink`创建一个链接，它完全可以做到这一点，但没有`Html.ActionButton`. 还有其他方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-22T14:59:57.460

这是一个使用 Bootstrap 的 CSS 按钮并将其应用于链接以使其看起来与按钮完全相同的示例。

```
@Html.ActionLink("Select", "Select", new { id = patient.Id }, new { @class = "btn btn-primary", @style = "color:white" }) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-18T10:03:55.693

> 还有其他方法吗？

您可以使用 html `<form>`：

```
@using (Html.BeginForm("someAction", "someController"))
{
    <button type="submit">OK</button>
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-04-09T02:44:43.037

这看起来很简单——我错过了什么吗？

```
@Html.ActionLink("About", "About","Home", new { @class = "btn btn-success" }) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-18T10:03:51.290

用这个：

```
@using (Html.BeginForm("yourAction", "yourController"))
{
    <input type="submit" value="Some text"/>
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-18T10:04:19.657

```
@using (Html.BeginForm("ActionName", "ControllerName")){
   <input type="button" value="Submit" />
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-07-01T13:27:40.360

```
a[type="button"] {
    background-color: #d3dce0;
    border: 1px solid #787878;
    cursor: pointer;
    font-size: 1.2em;
    font-weight: 600;
    padding: 7px;
    margin-right: 8px;
    width: auto;
    text-decoration: none;
}

@Html.ActionLink("ActionName", "ControllerName",null, new {type = "button" }) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-12T13:34:27.553

有时您的按钮可能有嵌套标记（例如图标）

这可能对某些人有帮助：

```
<button type="button" onclick="location.href='@Url.Action("Action", "Controller")'" class="btn btn-success">My button name <i class="glyphicon glyphicon-search"></i></button> 
```

type=button 是防止页面提交所必需的... 另一种可能的解决方案（如果您认为 type=button 看起来很奇怪，因为该元素已经是一个按钮）是在 OnClick javascript 处理程序中调用 event.preventDefault() 。

```
<button onclick="event.preventDefault(); location.href='@Url.Action("Action", "Controller")'" class="btn btn-success">My button name <i class="glyphicon glyphicon-search"></i></button> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-18T10:03:36.447

这应该回答你的问题。

[我可以使用像 Html.ActionLink 这样的 asp:Button 吗？](https://stackoverflow.com/questions/3173651/can-i-use-an-aspbutton-like-an-html-actionlink)

使用 CSS 使链接看起来像一个按钮。

或者使用表单内的按钮与表单控件一起移动页面。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-03-26T16:19:23.067

您可以编写一个到控制器的链接并以这种方式查看/跳过整个剃刀符号（最近在我的本地主机上为我工作！）：

```
<a href="../Home(controller)/Index(view)"><button type="submit">OK</button></a> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-12-07T11:29:00.837

使用 FORMACTION

```
<input type="submit" value="Delete" id="delete" formaction="@Url.Action("Delete", new { id = Model.Id })" /> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-09-05T10:44:57.053

我知道这是一个老话题，但这对我有帮助：

```
@Html.ActionLink("New member", "Create", null, new {@class = "btn btn-default"}) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-06-05T08:01:51.357

确保您使用正确的过载，否则您将被引导到错误的控制器。

您需要在新的 {} 之前使用“null”，如下所示：

```
@Html.ActionLink("About", "Action Name","Controller Name",null, new { @class = "btn btn-success" }) 
```

注意上面的空值。这个很重要！！！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-17T02:59:07.387

对于那些试图使锚标记看起来像 Bootstrap v3（可能也是 v4）中的按钮的人，请注意引导程序针对 Input 元素而不是 A 元素的边距存在一些细微的样式差异。当试图将几个按钮放在一起时，这可能会有点令人沮丧。

MVC 没有 ButtonLink 帮助器的一个相当明显的原因是：想想看。按钮不链接到任何东西。他们运行代码。那么助手会渲染什么代码呢？我的意思是它看起来很简单，它可以渲染类似 onclick="window.location=/controller/method..." 但是，这真的是你想要的吗？这是每个人一直想要的吗？那真的只是做一个 GET 吗？它变得有点愚蠢。

所以，真的，如果你想要一个打开链接的按钮，最简单的方法是按照其他人的建议设置 A 标签的样式，使其看起来像一个按钮，然后可能会进入你的样式表并为你的按钮锚点做一个非常具体的目标获得与实际按钮相同的样式。或者使用输入标记并强制 Razor（或其他）将链接内嵌到您的 JavaScript 中。

# ruby-on-rails - Rails 3 - 从 text_area 导入多行

> ID：11080605
> 
> 赞同：0
> 
> 时间：2012-06-18T10:01:08.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, fastercsv

从表单中的 text_area 导入多行的最佳方法是什么？

我尝试了使用 FasterCSV 的快速方法，但得到了 NoMethodError：

```
undefined method `pos' for {"name"=>"Carrots\r\nPeas\r\nRed Onion"}* 
```

```
 def create
    FasterCSV.parse(params[:ingredient], {:headers => false, :quote_char => '"', :col_sep => ','}).each do |row_data|
          new_record = Ingredient.new('name' => row_data[0])
          new_record.save
      end 
```

我想将最后的事情应用于具有多列的模型，因此 col_sep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:10:41.913

如果要`FasterCSV.parse`在单行上使用，则需要先获取简单的行。

先拆分多行数据：

```
params[:ingredient][:name].split.each do |line|
  FasterCSV.parse(line, { ... options ... }).each do |row_data|
    ... etc ... 
```

我可能会用它`parse_line`来明确地传达我正在单行上工作。

# iphone - UITextField vertical text alignment on transform

> ID：11080606
> 
> 赞同：4
> 
> 时间：2012-06-18T10:01:19.950
> 
> 标签：iphone, objective-c, ios, uitextfield

I have a `UITextfield` & I am going to apply the vertical alignments to it(top,bottom,center). I done it correctly by setting the vertical alignment. But when I transform the textfield using `(-M_PI/2)` and apply bottom or center alignment, then it works fine but text in textfield is not visible to user. If anyone knows the solution regarding this then please help me . Thanks in advance.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T10:43:21.693

try may work for u

```
 textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;

  textField.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight; 
```

# c# - 在 C# 和 iphone 应用程序之间同步数据

> ID：11080613
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:01:38.550
> 
> 标签：c#, ios, iphone, synchronization

我正在寻找的是在 PC 上运行的 C# 应用程序和连接到它的 iPhone 上的应用程序之间的离线同步。

*   这可能吗？
*   有没有办法使用 iTunes 应用程序访问 iPhone 数据。
*   可以 ActiveSync 或任何其他 API 在 PC 和设备之间同步数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:09:21.367

您需要有一个服务器或 wcf 服务被调用以在两个应用程序之间传递数据

# python - easy_install 得到错误的 pip 版本

> ID：11080614
> 
> 赞同：1
> 
> 时间：2012-06-18T10:01:40.703
> 
> 标签：python, python-2.7, virtualenv, pip, setuptools

我一直按照[http://docs.python-guide.org/en/latest/starting/install/osx/](http://docs.python-guide.org/en/latest/starting/install/osx/)上的说明进行操作，但由于某种原因，这并没有像我认为的那样进行。

我默认运行python 2.7，但必须按照以下说明更新easy_install：[https ://superuser.com/questions/256717/easy-install-the-wrong-version-of-python-modules -mac-os](https://superuser.com/questions/256717/easy-install-the-wrong-version-of-python-modules-mac-os)并将其从 /usr/local/bin/share 链接到 /usr/local/bin。它似乎工作正常。

问题是现在当我安装 pip 时，它似乎安装到 2.6 而不是 2.7。

```
 darky:~ user$ easy_install --upgrade pip
    Searching for pip
    Reading http://pypi.python.org/simple/pip/
    Reading http://pip.openplans.org
    Reading http://www.pip-installer.org
    Best match: pip 1.1
    Processing pip-1.1-py2.6.egg
    pip 1.1 is already the active version in easy-install.pth
    Installing pip script to /usr/local/bin
    Installing pip-2.6 script to /usr/local/bin

    Using /Library/Python/2.6/site-packages/pip-1.1-py2.6.egg
    Processing dependencies for pip
    Finished processing dependencies for pip 
```

在 MartijnPieters 发表评论后，这个问题**不再**存在

```
 darky:~ user$ /usr/local/share/python/easy_install-2.7 pip
    Searching for pip
    Best match: pip 1.1
    Processing pip-1.1-py2.7.egg
    pip 1.1 is already the active version in easy-install.pth
    Installing pip script to /usr/local/share/python
    Installing pip-2.7 script to /usr/local/share/python
    Using /usr/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg
    Processing dependencies for pip
    Finished processing dependencies for pip
    darky:~ user$ pip install virtualenv --upgrade
    Requirement already up-to-date: virtualenv in /Library/Python/2.6/site-packages
    Cleaning up... 
```

但是 pip 仍然使用 python-2.6 创建环境。所以我必须将它指向正确的 pyhton 解释器。

```
 darky:pytravisci pedrorodrigues$ virtualenv --python=/usr/local/bin/python2.7 ENV
    Running virtualenv with interpreter /usr/local/bin/python2.7
    New python executable in ENV/bin/python
    Installing setuptools............................done.
    Installing pip...............done. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T15:14:21.977

您可以使用

```
easy_install-2.7 
```

或者如果您没有该别名：

```
python2.7 -m easy_install <stuff> 
```

对于点子：

```
pip2.7 
```

# jquery - iframe 中的 src 值在运行时不会改变

> ID：11080616
> 
> 赞同：0
> 
> 时间：2012-06-18T10:01:45.117
> 
> 标签：jquery, html, jquery-ui, jquery-mobile

在我的应用程序中，我想在单击单选按钮时更改 iframe 的 src 值但是当我尝试这样做时，出现以下错误：

> ReferenceError：赋值的左侧不是参考

这是我的html代码：

```
<div data-role="fieldcontain">
                <fieldset data-role="controlgroup" data-type="horizontal">

                    <input id="aaa" name="exch_type" type="radio" value="AAA" checked="checked"/>
                    <label for="aaa" style="width: 125px;">AAA</label>

                    <input id="bbb" name="exch_type" type="radio" value="BBB" />
                    <label for="bbb" style="width: 125px;">BBB</label>
                </fieldset>

            </div>                  

        </div>
        <div align="center">
            <iframe name = "chartId" id = "chartId" src="http://myDomain/chts/mobile.asp?Scrip=AAA&Exchange=XXX&ChartType=I&Hg=150&Wd=300" scrolling="yes"></iframe> 
        </div> 
```

并单击功能为

```
$('input[name=exch_type]').change(function()
    {
        var radio_val = $('input[name=exch_type]:checked').val();

        if (radio_val=="AAA")
        {

            $("#chartId").attr("src") = "http://myDomain/charts/mobilechart.asp?Scrip=AAAIND&Exchange=NSE&ChartType=I&Hg=150&Wd=300";

        }

        else if (radio_val=="BBB")
        {

            $("#chartId").attr("src") = "http://myDomain/charts/mobilechart.asp?Scrip=BBBIND&Exchange=NSE&ChartType=I&Hg=150&Wd=300";
        }
        //alert('Radio Value: '+radio_val);
    }); 
```

任何帮助将不胜感激在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:05:23.020

我没有测试过，但是请注意一个错误的分配：

```
$("#chartId").attr("src") = src="http://myDomain/chts/mobile.asp?Scrip=AAA&Exchange=XXX&ChartType=I&Hg=150&Wd=300"; 
```

代替：

```
$("#chartId").attr("src", "http://myDomain/chts/mobile.asp?Scrip=AAA&Exchange=XXX&ChartType=I&Hg=150&Wd=300"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T10:06:04.637

试试这个：

```
$("#chartId").attr("src", "http://myDomain/chts/mobile.asp?Scrip=AAA&Exchange=XXX&ChartType=I&Hg=150&Wd=300"); 
```

# networking - 请求网络书籍推荐

> ID：11080617
> 
> 赞同：2
> 
> 时间：2012-06-18T10:01:51.463
> 
> 标签：networking

我很快将在一家光纤多路复用器的制造商和供应商处开始一份新工作。我不希望成为技术人员，但任何人都可以推荐一些有关网络的书籍（不一定只是光学），这将为我奠定良好的基础。我目前的网络知识很少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:40:00.810

有关 Internet 和全栈技术的基本介绍……请查看 Stevens 的[TCP/IP Illustrated, Vol I](https://rads.stackoverflow.com/amzn/click/com/0201633469)或 Doug Comer 的[Internetworking with TCP/IP, Vol](https://rads.stackoverflow.com/amzn/click/com/0131876716) I。您应该能够在公共图书馆中找到其中任何一个...

对于布线和网络技术人员的书籍：

*   综合布线信息：Oliviero 和 Woodward 的[布线：铜缆和光纤网络的完整指南](https://rads.stackoverflow.com/amzn/click/com/0470477075)
*   以太网的深入报道（80% 的你可能会布线）：Spurgeon 的[以太网：权威指南](https://rads.stackoverflow.com/amzn/click/com/1565926609)
*   高级故障排除（包括一些协议故障排除）：Neal Allen 的[网络维护和故障排除指南：针对日常问题的现场测试解决方案](https://rads.stackoverflow.com/amzn/click/com/0321647416)

# database - 在应用程序安装期间创建数据库并添加数据

> ID：11080618
> 
> 赞同：0
> 
> 时间：2012-06-18T10:01:53.180
> 
> 标签：database, windows, winforms, installation, installation-package

我开发了一个 Windows 窗体应用程序。我还在 sql server 上创建了一个数据库，并将数据添加到该数据库中。

现在我想在客户端安装这个应用程序。我想知道如何将我创建的数据库移动到客户的位置。在应用程序安装期间如何执行此操作？如果我必须在安装文件中包含数据库脚本并运行它。我该怎么做？如果这是一个漫长的过程，请指定有助于我完成此任务的链接。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:04:10.090

查看[GDR R2 数据库项目](http://www.microsoft.com/en-us/download/details.aspx?id=14258)（Visual Studio 的一部分）。

您可以使用它来将现有数据库反向工程为数据库项目中的脚本，并置于源代码控制之下。您可以从该项目同步现有和部署新数据库。

*   [Visual Studio 2010 SQL Server 数据库项目](http://msdn.microsoft.com/en-us/library/ff678491.aspx)

*   [数据库构建和部署概述](http://msdn.microsoft.com/en-us/library/aa833165.aspx)

*   [Visual Studio 数据库指南](http://vsdatabaseguide.codeplex.com/)

您还可以使用商业工具，例如 RedGate 出售的那些。

# javascript - 如何使用 id 删除 javascript 中的 Div 元素？

> ID：11080620
> 
> 赞同：5
> 
> 时间：2012-06-18T10:02:01.593
> 
> 标签：javascript, dom

> **可能重复：**
> [JavaScript：按 id 删除元素](https://stackoverflow.com/questions/3387427/javascript-remove-element-by-id)

我只知道他们各自的id，并不具体了解他们的父节点......

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-18T10:02:43.617

您可以`parentNode`在元素上使用来获取其父级，并`removeChild`在其上使用。

```
var el = document.getElementById( 'id' );
el.parentNode.removeChild( el ); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-18T10:03:33.240

在 jQuery 中，就`$('#your_id').remove();`可以了。

# .net - auto_handle 仍然是确定性处理句柄的建议方法吗？

> ID：11080627
> 
> 赞同：2
> 
> 时间：2012-06-18T10:02:34.477
> 
> 标签：.net, garbage-collection, scope, c++-cli, handles

我的一位同事在周末看到了一篇关于 codeproject 的文章，其中描述了[auto_handle 方法](http://www.codeproject.com/Articles/14520/C-CLI-Library-classes-for-interop-scenarios)的使用。鉴于这篇文章是在 2006 年写的，这仍然是处理文件句柄等确定性处置的正确方法吗？

我们倾向于显式地刷新和关闭文件句柄，然后删除指针并将它们清空，以确保 GC 没有理由不收集它们（是的，我们知道我们是超级偏执的）。使用类似 auto_handle 的东西看起来可以帮助我们变得更加懒惰（我们喜欢在安全的情况下变得懒惰）但是我们不想开始使用它现在被认为是不好的做法和/或我们可以使用更好的东西.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:05:15.790

自 2005 年发布以来，C++/CLI 没有改变，因此没有理由假设发生了任何新情况。与 2005 年有效的建议相同，auto_handle*并不是*自动删除对象的最佳方式。您应该首先考虑[堆栈语义](http://msdn.microsoft.com/en-us/library/ms177191.aspx)，它涵盖了绝大多数情况。编译器自动生成 try/finally 块和*delete*调用（即释放对象），相当于 C# *using*语句，减去代码。链接中给出的示例是这样完成的：

```
void Demo1A()
{
    StreamWriter sw("c:\\temp\\test.txt");
    sw.WriteLine("This is a line of text");
}   // <=== Compiler auto-generates the StreamWriter::Dispose call here 
```

请注意对象声明中缺少的 ^ 帽子。

并且*请*考虑这与垃圾收集器无关，仅与确定性资源清理有关。另请注意，将局部变量设置为 nullptr 是非常不合适的，它可以不必要地延长引用的生命周期超出其实际使用。抖动优化器删除分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:28:55.330

是的，它仍然是处理确定性处置的正确方法。使用 auto_handle 是 C# using 语句的 C++/CLI 等效项。

使用 auto_handle（它使用 RAII）可以让您获得异常安全性（即，即使抛出异常，对象也会被释放），而无需编写任何 try-catch。

另请参阅：[C++/CLI 资源管理混乱](https://stackoverflow.com/questions/9218925/c-cli-resource-management-confusion/9219844#9219844)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:17:45.890

我认为，有一种更简单的方法可以对托管对象进行确定性处理。只需在没有 a 的情况下声明它们`^`，您将获得与`*`不使用非托管 C++ 类相同类型的行为：初始化变量时调用构造函数，而“析构函数”（实际上是 Dispose 方法）当变量超出范围时调用。

当它被编译时，如果它是一个局部变量，它会变成一个 try-catch-dispose，或者如果它是一个类字段，它会在该类的 Dispose 方法中添加一行。

这与 auto_handle 没有太大区别，auto_handle 在其析构函数中调用了 Dispose，但我认为语法更易于使用。

例子：

C++/CLI：

```
public ref class Foo
{
    AutoResetEvent are;

public:
    Foo() : are(false)
    {
        this->are.Set(); // Use a '.' to access members.
    }

    void SomeMethod()
    {
        AutoResetEvent are2(false);
        are2.Set();
    }
}; 
```

等效的 C#，来自 Reflector，所以你可以看到它在幕后做了什么：

```
public class Foo : IDisposable
{
    // Fields
    private readonly AutoResetEvent modreq(IsByValue) are;

    // Methods
    public Foo()
    {
        AutoResetEvent modopt(IsConst) event2 = new AutoResetEvent(false);
        try
        {
            this.are = event2;
            base..ctor();
            this.are.Set();
        }
        fault
        {
            this.are.Dispose();
        }
    }

    public void ~Foo()
    {
    }

    public sealed override void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    [HandleProcessCorruptedStateExceptions]
    protected virtual void Dispose([MarshalAs(UnmanagedType.U1)] bool flag1)
    {
        if (flag1)
        {
            try
            {
                this.~Foo();
            }
            finally
            {
                this.are.Dispose();
            }
        }
        else
        {
            base.Finalize();
        }
    }

    public void SomeMethod()
    {
        AutoResetEvent are2 = null;
        AutoResetEvent modopt(IsConst) event2 = new AutoResetEvent(false);
        try
        {
            are2 = event2;
            are2.Set();
        }
        fault
        {
            are2.Dispose();
        }
        are2.Dispose();
    }
} 
```

# javascript - 跟踪书签事件

> ID：11080631
> 
> 赞同：2
> 
> 时间：2012-06-18T10:02:55.427
> 
> 标签：javascript, jquery, bookmarks

关于如何跟踪用户书签事件的任何想法？我想知道有多少用户将特定页面保存到他们的书签中，每次发生这种情况时，我都想调用一个回调函数（即 AJAX）来存储这些数据。

就我对 JS 的了解而言，这是不可能的：我可以发起书签创建，但这不是我想要做的......

即使是 jQuery 插件也可以。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T10:17:09.803

这是不可能的。书签的创建不在网页的控制范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:45:59.350

我想知道，那么 CodeProject 文章如何显示书签计数？

（请参阅右侧的“关于文章”面板以了解书签计数）例如看到[这个](http://www.codeproject.com/Articles/50411/Simple-6-Steps-to-Run-your-First-Azure-Worker-Role)

# java - 畅玩无拘无束的声音池

> ID：11080632
> 
> 赞同：1
> 
> 时间：2012-06-18T10:02:58.330
> 
> 标签：java, android, runnable, soundpool

当我的轮子被划伤（DJ 转台）时，我正在尝试播放声音，声音文件像计时器一样播放`tick tick tick`。
这是一个非常小的文件*00:02*。
我希望这个文件几乎像真正的划痕一样以连续的方式播放。
我在`soundpool`这里使用，我也尝试将速率提高到 2f 但仍然相同。
这是我在轮子旋转时调用的可运行文件：

```
r1 = new Runnable() {

    public void run() {
        // TODO Auto-generated method stub
        streamId = s.play(R.raw.clickslow, maxVolume, maxVolume, 100, 0, 2f);       
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:01:44.443

我通过使用一个非常小的声音文件并在 UI 线程上运行它来让它工作，它的工作方式非常接近我现在所需要的，非常感谢你的帮助。

# objective-c - iOS 初始化静态对象的成员失败

> ID：11080633
> 
> 赞同：0
> 
> 时间：2012-06-18T10:03:02.663
> 
> 标签：objective-c, ios, ios5

我有以下代码在运行时失败。我的 .h 文件：

```
 @interface OutlineManager : NSObject
    {
            NSMutableArray* mOutlines;
    }

    @property(nonatomic,strong)NSMutableArray* Outlines;

    +(void)initialize;

    @end

    static OutlineManager* outlnManager; 
```

在 .m 文件中：

```
#import "OutlineManager.h"

@implementation OutlineManager

@synthesize Outlines = mOutlines;

+(void)initialize
{
    outlnManager = [[[OutlineManager superclass]alloc]init];
    if(outlnManager)
    {
        outlnManager.Outlines = [[NSMutableArray alloc]init]; //it crashes here
    }
    NSLog(@"OUTLINEMANAGER INITIALIZED");
}

@end 
```

当我运行 (void)initialize 应用程序在我放置评论的 if 部分崩溃时，但我不知道为什么。我不能像这样初始化一个静态对象的数组吗？

我想这是非常基本的东西，但我在 Obj C /iOS 上还很新，所以请不要对我不利。

非常感谢您的帮助！

真诚的，佐利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:24:06.680

你写了：

```
outlnManager = [[[OutlineManager superclass]alloc]init]; 
```

该超类意味着您在 NSObject 而不是 OutlineManager 上调用 alloc。只需将此行替换为：

```
outlnManager = [[OutlineManager alloc]init]; 
```

哦，你应该在 .m 文件中声明你的静态变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:24:43.420

OutlineManager.h:

replace

```
static OutlineManager* outlnManager; 
```

with:

```
OBJC_EXPORT OutlineManager* outlnManager; 
```

and add in OutlineManager.m:

```
OutlineManager* outlnManager = nil;
+(void)initialize { // you should rename it to an other name.. initialize will be called twice
    outlnManager = [[OutlineManager alloc]init];
    if(outlnManager) {
        outlnManager.Outlines = [[NSMutableArray alloc]init];
    }
    NSLog(@"OUTLINEMANAGER INITIALIZED");
} 
```

# cvs - 签入一个 CVS 并签出另一个 CVS

> ID：11080642
> 
> 赞同：1
> 
> 时间：2012-06-18T10:03:43.060
> 
> 标签：cvs

我们有一个 CVS 服务器，与我们仅用于生产的签入和签出相同，我有一个想法来区分两者：一台服务器用于签入，另一台服务器用于签出（如生产 CVS ，QA CVS），这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T05:33:29.933

是的，这当然是可能的。您应该使用[cvsup](http://www.cvsup.org/)将数据从一个服务器复制到另一个服务器。

我曾经在 5 个不同时区的 9 个不同地点管理开发团队。各组之间共享各种模块。CVS 存储库中的每个顶级目录都源自一个特定位置，如果在该位置的开发中用作库，则将其复制到其他位置。

`cvsup`由于它是在 module-3 中编写的（您可能尚未安装并且需要编译），因此需要更多的设置，但这是值得的。或者，您可以尝试[csup](https://bitbucket.org/mux/csup)，它应该是兼容的，但我自己没有使用过。

您还需要注意`cvsup`使用拉模型。除非定期拉取费用不高（因为您在本地网络上），否则您希望有一些机制，就像我们拥有的那样，一旦有东西提交到签入服务器，就会通知签出服务器进行拉取。

# c++ - getline() 给出难度的字符串

> ID：11080648
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:03:58.857
> 
> 标签：c++

我正在做一个任务，我输入你想要输入的时间，然后我通过使用 getline 输入一个完整的行，但是我无法做到这一点。

在这里，当我尝试输入“1”作为我的号码时。在测试用例中，它立即给出“0”作为答案，并且在循环之外为什么不是这个 cin>> 测试；这里与 getline (cin,s) 兼容；

```
#include<iostream>
#include<string>

using namespace std;

int main()
{
    int test,j; 
    cin>>test;

    int len;
    string s;       
    for(j=1;j<=test;j++)
    { 
        getline( cin,s);
        len = s.length();
        cout<<len;

    }
    return 0;
} 
```

困难

```
input :
1
output:
0

expected
input:
1
Hello World
output
11 
```

好吧，我混合了一点 C 来得到我的答案

```
#include<iostream>
#include<string>
#include<cstdio>

using namespace std;

int main()
{
    int test,j; 
    scanf("%d\n",&test);

    int len;
    string s;       
    for(j=1;j<=test;j++)
    { 
        getline( cin,s);
        len = s.length();
        cout<<len;

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T10:08:58.943

您正在混合格式化输入和未格式化输入函数。

`operator>>`在您在输入缓冲区中提取的数字之后留下尾随换行符，但这对于随后完成的读取来说不是问题，`operator>>`因为它会跳过它在读取之前找到的所有空白。另一方面，`getline`读取直到找到分隔符（`\n`默认情况下）而不跳过任何内容。

长话短说：如果你想使用`getline`你必须从`\n`你的后面清理缓冲区`cin>>test;`：

```
#include <limits>
// ...

cin>>test;
cin.ignore(numeric_limits<streamsize>::max(), '\n'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:09:24.923

```
for(j=1;j<=test;j++)     
{          
getline( cin,s);         
len = s.length();         
cout<<len;      
} 
```

这是读取 int 和带有一个回车的字符串。

它读取 1 作为总数，然后什么都不作为字符串（因此长度为 0）。试试 1TEST，这应该给你 4 的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:41:52.613

我相信您的问题是您将输入流作为参数提供给缓冲区。试试这个。

```
{  
    char szInput[256];  
    cin.getline( szInput,256);  
    len = strlen(szInput);  
    cout<<len;  
} 
```

# collections - 从 xsd 检索选择值

> ID：11080657
> 
> 赞同：1
> 
> 时间：2012-06-18T10:04:36.410
> 
> 标签：collections, xsd, jaxb, choice

这是 xsd-scheme 的一部分：

```
<xsd:complexType name="TGroups">
  <xsd:choice>
    <xsd:element name="GROUP1"/>
    <xsd:element name="GROUP2"/>
  </xsd:choice>
</xsd:complexType> 
```

有没有办法使用 JAXB 或其他方法从 xsd 获取所有 TGroups 值（“GROUP1”、“GROUP2”）作为集合（Set、List、String[]、...）？

谢谢你的回复。

# ios5 - UITableViewCell 中的 UIButton 使用 Storyboard 执行对另一个 UIViewController 的 Segue

> ID：11080658
> 
> 赞同：3
> 
> 时间：2012-06-18T10:04:37.600
> 
> 标签：ios5, uitableview, uibutton, uistoryboardsegue

在我的应用程序中，我有一个 ParentViewController，其中包含多个元素。其中一个元素是 UITableView。

我使用我在情节提要中设计的动态原型单元设计了表格的单元。

意思是，我在情节提要中有一个 UIViewController；在里面我有一个 UITableView；在 UITableView 我有一个原型单元格。

现在，我在 Prototype Cell 中添加了一个 UIButton，创建了另一个 UIViewController（我们称之为 ChildViewController），并将 Storyboard 中的 UIButton 和 ChildViewController 与 Segue 连接起来。

**当用户单击 UIButton 时，我应该如何编写激活 Segue 的代码？**

我设法创建了表本身并在动态单元格中有数据（它们在 UIButton 旁边有一些 UILabel），但我无法弄清楚如何将 UIButton 正确连接到代码。

我不想使用 UITableView 默认的“选择”功能，因为我希望在动态单元格中有几个按钮 - 每个按钮都会派生出不同的 segue 到不同的 ChildViewController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:55:56.073

这是我解决相同问题的方法。希望它会有所帮助。

为此，您可以将指向 UITableViewController 的指针传递给自定义单元格的初始化方法，并将其存储在那里：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
            // ...
            CDTrackCell *cell = [tableView dequeueReusableCellWithIdentifier:strCellTableIdentifier];
            CDTrack *currTrack = [self.fetchedResultsController objectAtIndexPath:indexPath];

            [cell configureView:currTrack inTableViewController:self];

            return cell;
   } 
```

将指针保存在自定义 UITableViewCell 类中：

```
- (void) configureView:(CDTrack*)track
 inTableViewController:(CDTracksViewController*)_tvc
{
    self.tvc = _tvc;
    // ...
} 
```

然后，您可以在点击按钮时执行 segue：

```
- (IBAction)buttonAddToTracklistTapped:(UIButton *)sender {
    [self.tvc performSegueWithIdentifier:@"showAddToTracklist" sender:self];
} 
```

有更好的想法吗？

# jquery - 如何在组jquery中选择特定元素

> ID：11080660
> 
> 赞同：0
> 
> 时间：2012-06-18T10:04:42.827
> 
> 标签：jquery, jquery-selectors

我有 4 个字段集，里面有表单字段。

如何选择每个字段集中的每个第一个标签标记并将其包含在变量中？

这是我尝试过的：

```
var $firstLabel = $('fieldset label'); 
```

然后我这样称呼它：

```
$firstLabel.eq(0) 
```

这并不完全符合我的需要，因为它只选择第一个字段集中的第一个标签，而不是每个字段集中的每个第一个标签。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:06:58.077

如果您使用[`map()`](http://api.jquery.com/map).

```
var labels = $('fieldset').map(function () {
    return $(this).find('label:first');
}); 
```

该变量将是 4 个标签的 jQuery 集，因此您可以使用;`labels`遍历它们。[`each()`](http://api.jquery.com/each)

```
labels.each(function (i) {
    // this function will get called 4 times; each time `this` will be one of the labels.
}); 
```

甚至将它们分配给变量；

```
var firstLabel = labels.eq(0);
var secondLabel = labels.eq(1); 
```

... ETC。

# nginx - Nginx 上的 MediaWiki

> ID：11080666
> 
> 赞同：1
> 
> 时间：2012-06-18T10:04:58.903
> 
> 标签：nginx, mediawiki, vhosts

我无法让 MediaWiki 在 Nginx 上工作。我在我的 /var/www/domain.com/htdocs/wiki 目录和我的 wiki.domain.com 子域中有它。

我尝试了许多在互联网上找到的虚拟主机示例，例如：

```
server {
server_name wiki.domain.com;
root /var/www/domain.com/htdocs/wiki;
index index.html index.php;
autoindex off;

location / {
 index index.php5;
 error_page 404 = @wiki; 
```

}

```
location @wiki {
    rewrite ^/([^?]*)(?:\?(.*))? /index.php5?title=$1&$2 last;
}

location ~ \.php5?$ {
    include /etc/nginx/fastcgi.conf;
    include /etc/nginx/fastcgi_params;    
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php5;     
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
}

} 
```

或其他：

```
server {
server_name wiki.domain.com;
root /var/www/domain.com/htdocs/wiki;

client_max_body_size 5m;
client_body_timeout 60;

# Remote index.php from URI
rewrite ^/index.php/(.*) /$1  permanent;

location / {
    if (!-e $request_filename) {
            rewrite ^/([^?]*)(?:\?(.*))? /index.php?title=$1&$2 last;
    }
    if ($uri ~* "\.(ico|css|js|gif|jpe?g|png)(\?[0-9]+)?$") {
            expires max;
            break;
    }
}

location ~* \.php$ {
    if (!-e $request_filename) {
            return 404;
    }

    include /etc/nginx/fastcgi.conf;

    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;

    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
}

} 
```

我得到 wiki.domain.com 的 403 Forbidden 和 wiki.domain.com/index.php 的 500 Internet Server Error

在我的 LocalSettings.php 中，我还设置了这个： $wgUsePathInfo = true;

你能帮助我吗..？我应该如何配置 vhost/localsettings 以使 MW 在 Nginx 上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:21:18.037

好的，找到了问题：它与[LyricExtension 有关](http://wiki.peacocktech.com/wiki/LyricExtension)！我禁用了它，一切都开始正常工作:)

# android - 如何在活动开始时显示进度对话框？

> ID：11080673
> 
> 赞同：0
> 
> 时间：2012-06-18T10:05:21.253
> 
> 标签：android, android-asynctask, progressdialog

我有一个活动，它在启动时可能需要加载数据。

我已经阅读了一些其他问题，它们都涉及将progressdialog传递给asycntask（[比如这个](https://stackoverflow.com/questions/1458190/how-can-i-display-a-progress-at-start-up-application-in-android)必须加载数据并在完成后关闭它。这对我的应用程序来说是没有选择的，因为getNewData方法启动了5个异步任务和完成后返回。

有人知道我如何确保显示进度对话框吗？atm 屏幕一直保持黑色，直到应用程序完成加载。

```
ProgressDialog pd = ProgressDialog.show(this, "Loading...", "Loading data", true);
dataCommunicator.getNewData(this);
pd.dismiss(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:20:53.923

您可能有一个主`AsyncTask`线程，您可以在其中运行其他线程`doInBackground()`。显示`progressDialog`在这个 main`AsyncTask` `onPreExecute()`中。

维护一个可以跨子访问的 int 变量，`AsyncTask`并在子完成其操作时更新其值。当该 int 等于 5 从 main 返回`AsyncTask` `doInBackground()`并关闭`progressDialog`in `onPostExecute()`。

# python - Shop 类应该如何在 shop 方法中 shopify.Session 的第 60 行访问

> ID：11080680
> 
> 赞同：0
> 
> 时间：2012-06-18T10:05:55.870
> 
> 标签：python, shopify

我正在尝试将 python shopify api 与 OAuth2 一起使用并通过 api 工作，并尝试将 django auth 示例移至 oauth 而不是旧版（并且不使用 django，我只是在 appengine 上将 webapp2 定位为一个更简单的示例. ;-)

我遇到了一个问题，在我的处理程序中调用了会话 shopify_session.shop() 后，我得到了一个 NameError：“未定义全局名称'Shop'”。

查看当前代码，此方法的实现是（第 59 行）

```
def shop(self):
    Shop.current() 
```

但我看不出类 Shop 是如何访问的。Shop 类在 resources.py 中定义，并且不会在 session.py 中的任何位置导入。这是 api 代码中的错误，还是应该进行一些魔术或其他类型的设置运行以将该类注入会话模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:00:05.810

糟糕，该方法已从 ruby[​​ shopify_api](https://github.com/shopify/shopify_api)库中不正确地移植。我决定完全删除它，因为它已经坏了，因此没有应用程序必须依赖它工作，即使在 ruby​​ 库中它也没有真正使用会话实例。唯一有意义的方法是它暂时激活会话然后检索当前商店。

shopify_django_app示例应用现已更新[为](https://github.com/shopify/shopify_django_app)支持 Oauth2，尽管 App Engine 上 django 的说明和 zip 文件仍需要更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:13:02.790

对我来说似乎是一个错误。不仅缺少导入，而且此方法不返回任何内容这一事实。FWIW，如果有任何“魔法”（我在快速浏览了源代码后没有发现），那么它是**非常**不合 Python 的。

# windows - 发送 IDENTIFY DEVICE COMMAND - ATA PASS THROUGH on raid - SSD

> ID：11080688
> 
> 赞同：2
> 
> 时间：2012-06-18T10:06:38.090
> 
> 标签：windows, raid, deviceiocontrol, ata

我的目标是在具有 raid 配置的系统中检测固态驱动器。使用 smartmontools 的以下命令，我观察到位 434 (217) 显示 SSD 的值 1： smartctl -i -r ataioctl,2 /dev/csmi0,0

尝试读取相同的 512 字节数据我尝试通过以下 2 种方式发送 IDENTIFY DEVICE 命令：

方法 1 失败，DeviceIoControl() 将 GetLastError() 设置为 87 (ERROR_INVALID_PARAMETER)，你能帮我理解什么可能是错误的，我是否在正确的轨道上？

方法 2 有 info->IoctlHeader.ReturnCode = 3 这意味着 CSMI_SAS_STATUS_INVALID_PARAMETER。（提供的 CSMI 缓冲区太小）

///////// 方法一 /////////

```
handle = CreateFile(L"\\\\.\\PhysicalDrive0",
                    GENERIC_READ | GENERIC_WRITE,
                    FILE_SHARE_READ | FILE_SHARE_WRITE,
                    NULL,
                    OPEN_EXISTING,
                    NULL,
                    NULL);
if (handle == INVALID_HANDLE_VALUE)
{ 
    printf("Unable to open handle to device , Error %u\n", GetLastError());         
    return 1;
}

//Allocate memory for ATA_PASS_THROUGH_EX and clear the contents 
pATAData = (PATA_PASS_THROUGH_EX) VirtualAlloc(NULL, dataSize, MEM_COMMIT, PAGE_READWRITE); 
ZeroMemory(pATAData,dataSize); 
//Fill in the IDENTIFY DEVICE query data 
pATAData->Length = sizeof(ATA_PASS_THROUGH_EX); 
pATAData->DataBufferOffset = sizeof(ATA_PASS_THROUGH_EX); 
pATAData->DataTransferLength = 512; 
pATAData->AtaFlags = ATA_FLAGS_DATA_IN; 
pATAData->TimeOutValue = 10; //Seconds
pATAData->CurrentTaskFile[6] = 0xEC; /* send the command*/ 

status = DeviceIoControl( handle, 
                            IOCTL_ATA_PASS_THROUGH, 
                            pATAData, 
                            dataSize, /* input buffer and size */ 
                            pATAData, 
                            dataSize, /* output buffer and size */ 
                            &bytescopied, /* bytes copied to output buffer*/ 
                            NULL ); /* no overlapping */ 
```

//////// 方法二 //////////

```
BYTE    portNumber = 0;
_stprintf_s(DeviceName, (sizeof(char)*128),_T("\\\\.\\Scsi%u:"),portNumber);

// get a handle to the miniport driver
handle = CreateFile(DeviceName,
                    GENERIC_READ | GENERIC_WRITE,
                    FILE_SHARE_READ | FILE_SHARE_WRITE,
                    NULL,
                    OPEN_EXISTING,
                    NULL,
                    NULL);
if (handle == INVALID_HANDLE_VALUE)
{
    printf("Unable to open handle to device , Error %u\n", GetLastError());           
    return;
}

CSMI_SAS_STP_PASSTHRU_BUFFER* info = (CSMI_SAS_STP_PASSTHRU_BUFFER *) calloc(1, sizeof(CSMI_SAS_STP_PASSTHRU_BUFFER));
info->IoctlHeader.HeaderLength = sizeof(IOCTL_HEADER);
info->IoctlHeader.Timeout = CSMI_SAS_TIMEOUT;
info->IoctlHeader.ControlCode = CC_CSMI_SAS_STP_PASSTHRU;
info->IoctlHeader.Length = sizeof(CSMI_SAS_STP_PASSTHRU_BUFFER) -    sizeof(IOCTL_HEADER);
info->IoctlHeader.ReturnCode = 0;
memcpy(&info->IoctlHeader.Signature, CSMI_SAS_SIGNATURE, sizeof(CSMI_SAS_SIGNATURE));

bSuccess = DeviceIoControl(handle, IOCTL_SCSI_MINIPORT, info, sizeof(CSMI_SAS_STP_PASSTHRU_BUFFER),   
                            info, sizeof(CSMI_SAS_STP_PASSTHRU_BUFFER),
                            &bytesReturned, NULL); 
```

# maven - 在使用 maven 打包之前重命名目标目录中的 jsp 文件

> ID：11080692
> 
> 赞同：0
> 
> 时间：2012-06-18T10:07:03.387
> 
> 标签：maven, file-rename

我有一个基于 Maven 的 Web 项目，包括“正常”目录结构。我需要生成战争工件，一个是普通应用程序，另一个是管理员“版本”，它是通过使用 2 个不同的 maven-profiles 实现的。如果是管理员版本，我需要在打包 war 文件之前重命名 JSP 文件。

我怎样才能做到这一点？哪个 maven-plugin 符合这个要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:01:08.890

恕我直言，您必须使用 ant run 重命名文件并将此执行附加到准备包阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:55:57.743

抱歉，但是在准备包阶段复制/重命名 JSP 不起作用，因为此时文件尚未在目标目录中。

示例代码：

```
 <plugin>
  <artifactId>maven-antrun-plugin</artifactId>
   <version>1.7</version>
  <executions>
    <execution>
      <phase>prepare-package</phase>
      <configuration>
        <target>
          <copy file="${project.build.directory}\myProject\loginAdmin.jsp"
            tofile="${project.build.directory}\myProject\loginUser.jsp"/>
        </target>
      </configuration>
      <goals>
        <goal>run</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

# maven - Maven mojo - 防止在当前工作目录中执行项目？

> ID：11080693
> 
> 赞同：1
> 
> 时间：2012-06-18T10:07:04.530
> 
> 标签：maven, maven-plugin, maven-3

我正在编写一个 Maven 插件，并希望阻止它在当前工作目录中的项目上运行。该插件设计为在用户指定的 artifactId（或 artifactIds 列表）上运行，它可能不是当前工作目录中的 artifact。

我发现 Maven 总是开始在工作目录中询问项目，创建日志消息，这会使我的插件的用户感到困惑。

我能做些什么来防止这种情况发生吗？

提前致谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:00:40.927

Use `@requiresProject false` annotation for your mojo.

# git - 如何更改在 git 上保存 ssh 的默认位置？

> ID：11080694
> 
> 赞同：0
> 
> 时间：2012-06-18T10:07:04.533
> 
> 标签：git, ssh

我一直在花费数小时寻找解决此问题的方法。
正如您在第一张图片中看到的那样，我试图创建 ssh 密钥：

![在此处输入图像描述](../Images/ce801397701f8a1c7d030566b611e891.png)

默认目录是：`C:\Users\BC1\.ssh`
但是当我查看它时，我没有找到关键：

![在此处输入图像描述](../Images/cd37a43636c697e3870b3c3d5be59fc5.png)

密钥位于 中`C:\Windows\System32`，但不在上面显示的目录中。

我相信如果我成功了，我可以编辑密钥并将内容替换为 PuTTY 生成的密钥，然后我的问题就`Permission denied`可以解决。
希望有人能帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:11:45.033

创建密钥时，当您要求输入文件名以保存密钥时，只需按 Enter 键，而不是像在屏幕截图中那样输入“密钥”。

您现在可以在 C:\Windows\system32\key 中找到密钥，因为这是您第一次创建密钥时的工作目录。

# silverlight - 开发 3D Web App 的选项

> ID：11080696
> 
> 赞同：0
> 
> 时间：2012-06-18T10:07:11.440
> 
> 标签：silverlight, flash, 3d, webgl

我正在开发一个网络应用程序，其中最具挑战性的方面是 3D 模型部分。它还包含其他内容，例如拖放和每侧带有箭头的滑动条，用户可以通过这些滑动条来选择不同的项目。

我一直在研究，`WebGL`但如果不使用插件，IE 似乎不支持它。这并不理想，所以我想知道我还有什么其他选择。

闪光？银光？还要别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:39:47.987

Silverlight 太少见了，无法用于任何有意义的开发，而 ajax 根本不够令人惊叹。这给我们留下了 Flash，在我看来，它是三个选项中最好的。Flash Player 11 引入了新的[Stage3D API](http://www.adobe.com/devnet/flashplayer/stage3d.html)，可以创建令人惊叹的 3D 图形。还有许多用于 3D 渲染的 AS3 库。我更喜欢[Away3D](http://away3d.com/download/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:20:32.733

刚找到这个，看起来很有希望。

[http://iewebgl.com/](http://iewebgl.com/)

**编辑：**忽略，似乎用户必须下载可执行文件才能工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:03:45.447

目前 Flash 是基于 3D 的网络应用程序最流行的插件。这是跨浏览器，但不支持移动浏览器:(许多技术，每个都有他的缺点

# objective-c - 如何在 UITableView 中添加空单元格而不展开它

> ID：11080697
> 
> 赞同：1
> 
> 时间：2012-06-18T10:07:12.023
> 
> 标签：objective-c, ios, xcode, uitableview

我有带有自定义外观单元格的 UITableView。现在用户可以滚动到底部并看到没有更多的行（单元格）并查看背景。我想给人留下下面有更多行的印象，但它们不应该添加到 tableview 中，所以当用户向下滚动时，它会弹回最后一个有用的单元格。TableFooter 和子视图扩展内容，用户可以在那里滚动（或者我做错了）。

现在我添加了新的空单元格，并且在任何可能重新计算 contentSize 的操作之后，我专门将 contentSize 设置为默认设置。但我觉得这不是正确的方法（尽管它有效）。还有其他方法吗？

我尝试搜索，但很难用几句话解释我想要什么，更不用说在搜索行中了。

# git - 在调用 git push 之前，我如何知道要推送多少个文件？

> ID：11080698
> 
> 赞同：0
> 
> 时间：2012-06-18T10:07:13.823
> 
> 标签：git

我想知道我要推送多少个文件，哪个 git 命令可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:11:25.690

您将始终推送您正在推送的分支中的所有提交，这些提交在远程端尚不存在。

没有简单的方法来确定所有这些提交添加/修改的文件数量。

# linux - 多级页表

> ID：11080702
> 
> 赞同：0
> 
> 时间：2012-06-18T10:07:30.400
> 
> 标签：linux, operating-system, paging, virtual-memory

有2个问题：

1.  具有 32 位地址的计算机使用 2 级页表（9 位顶级和 11 位二级）。页面大小，地址空间中的页面数量以及应该驻留在内存中的最小页表大小是多少？

2.  32 位虚拟地址空间计算机有 4 KB 页。文本和数据进入最低页（0-4095）。堆栈位于最高页面。如果计算机仍然使用传统页表和 2 级页表（PT1 和 PT2 各 10 位），需要多少条目？

THX的答案家伙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:46:21.657

1.  `9 bit + 11 bit = 20 bit`. 鉴于此，它允许 12 位偏移，这基本上是一个 4kb 页面。顶级*页目录*存储256个页表项，二级*页表*存储2048个页项。

2.  从用户的角度来看，您需要 2 或 3 个页面（*堆栈、代码+数据*或*堆栈、代码、数据，*如果您有不同的页面用于代码和数据，即数据页面具有不执行属性）。从内存管理器的角度来看，您需要多一页来存储*页目录*结构，并需要一两页来存储相应的*页表*结构。*页目录*的第一个条目指向保存代码页和数据页条目的*页表页。**页目录*的最后一个条目指向保存堆栈页条目的*页表。*

希望这有帮助。

# java - 如何使用 maven 制作罐子

> ID：11080703
> 
> 赞同：7
> 
> 时间：2012-06-18T10:07:33.130
> 
> 标签：java, maven, maven-plugin

> **可能重复：**
> [使用 Maven 在 jar 中包含依赖项](https://stackoverflow.com/questions/1729054/including-dependencies-in-a-jar-with-maven)

我是 maven 的初学者，想使用 maven 构建一个包含依赖 jar 的 jar。但是，我不能这样做。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:10:27.327

如果您尝试创建一个包含您的应用程序及其所需库的 jar，则有两种方法（我知道）可以做到这一点。第一个是[One-Jar](http://one-jar.sourceforge.net/)，它使用一个特殊的类加载器来允许 jar 的嵌套。第二个是[UberJar](http://classworlds.codehaus.org/uberjar.html)，（或[Shade](http://maven.apache.org/plugins/maven-shade-plugin/)），它会分解包含的库并将所有类放入顶级 jar 中。

我还应该提到 UberJar 和 Shade 分别是 Maven1 和 Maven2 的插件。如下所述，您还可以使用程序集插件（实际上它更强大，但更难正确配置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:14:01.740

使用`shade`插件：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-shade-plugin</artifactId>
    <version>1.7</version>
<executions>
    <execution>
    <phase>package</phase>
    <goals>
        <goal>shade</goal>
    </goals>
    </execution>
</executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T10:10:49.213

您将在`pom.xml`文件中包含以下内容。

```
<build>
<plugins>
    <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
            <archive>
                <manifest>
                    <mainClass>MainClass with the packages</mainClass>
                </manifest>
            </archive>
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
        </configuration>
    </plugin>
</plugins> 
```

# ruby - CSS3 和 Heroku

> ID：11080711
> 
> 赞同：0
> 
> 时间：2012-06-18T10:08:10.777
> 
> 标签：ruby, ruby-on-rails-3, css, heroku

我遇到了 CSS3 代码和 heroku 的问题。我目前在 heroku 上临时托管我的网站，这段代码似乎不起作用：

```
#my_footer
{
    margin-top:170px;
    background-color:rgba(17,142,36,0.3); /* added this because of the backgroud */
    border-radius: 3px 3px 3px 3px;
} 
```

尤其是这行代码： background-color:rgba(17,142,36,0.3); 奇怪的是它可以在我的本地主机上运行，​​但不能在 heroku 上运行！我使用的是同一个浏览器！

注意：我已经检查了 GitHub 上的代码，代码和上面的完全一样！所以当我推送到heroku，然后从浏览器检查源代码时，“my_footer”的代码与GitHub中的代码不一样！！就像 GitHub 没有将我的代码推送到 heroku ！

顺便说一句，我的 config/environments/production.rb 中有这个

```
...
  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true #changed to true!
... 
```

否则heroku会返回一个错误，如果它是'false'则不显示页面我正在使用twitter bootstrap btw！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:42:54.757

尝试`rake assets:precompile`在您的语言环境机器上运行。将生成的文件添加到 git 后

```
git add .
git commit -m "assets precompiled"
git push heroku master 
```

假设您的远程分支称为“heroku”。

# web-services - 除了在本地机器上，Web 服务不工作

> ID：11080712
> 
> 赞同：0
> 
> 时间：2012-06-18T10:08:19.557
> 
> 标签：web-services, wsdl, localhost

我已将 Web 服务发布到与我连接的计算机中。两台电脑可以互相ping通。Web 服务在本地机器上完美运行，如下所示：

```
http://localhost:9000/flori/koci?wsdl 
```

当它从我的电脑（使用 ip）调用时，因为`http://1.1.1.1:9000/flori/koci?wsdl`它不显示方法。

你能给我一个提示吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:12:54.900

也许被阻止，`firewall`或者您没有通过`port`或的权限`ip`。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-17T14:33:05.420

localhost 对应的 IP 地址是 127.0.0.1

您可以尝试在使用 IP 的本地计算机上使用 http://127.0.0.1:9000/flori/koci?wsdl。要获取系统动态 ip，请运行 ipconfig 命令以获取 IPv4 地址并使用网络上其他系统的地址。

# spring-security - 如何将数据库级角色放入@preAuthorize 方法和 实际上我在数据库中有角色，如 ROLE_USER、ROLE_MAKER、ROLE_CHECKER。现在我通过提及 @PreAutorize(hasRole('ROLE_USER','ROLE_MAKER') 来使用方法级别限制， 在此先感谢维努

> ID：11080716
> 
> 赞同：1
> 
> 时间：2012-06-18T10:08:31.927
> 
> 标签：spring-security

实际上我在数据库中有角色，如 ROLE_USER、ROLE_MAKER、ROLE_CHECKER。现在我通过提及 @PreAutorize(hasRole('ROLE_USER','ROLE_MAKER') 来使用方法级别限制，

在此先感谢维努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:27:41.670

[在http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)检查权限评估器

第 1 步：告诉 spring 你将使用权限评估器。

```
<beans:bean id="expressionHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
    <beans:property name="permissionEvaluator">
        <beans:bean id="permissionEvaluator" class="com.npacemo.permissions.SomePermissionsEvaluator"/>
    </beans:property>
</beans:bean> 
```

Step2：在 com.npacemo.permissions.SomePermissionsEvaluator 实现 PermissionEvaluator

```
class SomePermissionsEvaluator implements PermissionEvaluator {

boolean hasPermission(Authentication authentication,
                      java.lang.Object targetDomainObject,
                      java.lang.Object permission){

if(permission.equals("check role")){
//ok I need to check for roles from DB..
if matching then return true else false..

    //write logic as per ur requirement

    }

boolean hasPermission(Authentication authentication,
                      java.io.Serializable targetId,
                      java.lang.String targetType,
                      java.lang.Object permission){

//write logic as per ur requirement
}

} 
```

第 3 步：在 PreAuthorize 中调用 hasPermission 以检查您的角色

```
@PreAuthorize("hasPermission(#contact, 'check role')")
  public void deleteApplication(Contact contact); 
```

# database - 与 Hibernate 一起使用的 SQL Server Express Jar 文件

> ID：11080718
> 
> 赞同：1
> 
> 时间：2012-06-18T10:08:49.557
> 
> 标签：database, hibernate, sql-server-express

在我的应用程序中，我想将 SQL Server Express 与 Hibernate 连接起来。但我不知道我需要下载的 jar 文件是什么以及我从哪里得到这个 jar 文件。当我在不添加 jar 文件的情况下运行我的应用程序时，它会抛出错误，即：

```
org.hibernate.HibernateException: JDBC Driver class not found: net.sourceforge.jtds.jdbc.Driver 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:38:00.317

[您需要可在此处下载](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)的用于 SQL Server 的 JDBC 驱动程序。从那里的三个“下载”按钮中，选择最后一个用于 UNIX（Linux 等），如操作系统，或者如果您的 Hibernate 在 Windows 上运行，则选择中间一个。

运行或解压；或者如果您不知道如何使用适当的操作系统标记您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:25:27.563

我得到了答案，我正在回答这个问题，所以它对其他人有帮助。

[在此处](http://www.microsoft.com/en-us/download/details.aspx?id=21599)下载驱动程序

**类名：** com.microsoft.sqlserver.jdbc.SQLServerDriver

**网址：** jdbc:sqlserver://server:port;DatabaseName=dbname

JDBC 示例：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
con = DriverManager.getConnection("jdbc:sqlserver://localhost:1433;DatabaseName=test", "sa", "password"); 
```

# c# - TabControl.ControlRemoved 事件的替代方法是什么？

> ID：11080723
> 
> 赞同：0
> 
> 时间：2012-06-18T10:09:02.060
> 
> 标签：c#, winforms, visual-studio-2010

我有一个 TabControl，我正在侦听 ControlRemoved 事件，然后在 TabControl.TabCount 等于零时对 MenuStrip 项进行更改。

我发现 TabCount 在此 Event 方法完成之前不会更新，对我来说，这使事件的名称具有误导性。

关于这个活动的替代方案有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:27:50.003

一种可能性是检查控件的数量是否为 1。如果是，则最后一个标签页即将被删除。（您甚至可以使用 EventArgs 检查哪一个`e.Control`：）

我测试了覆盖 OnControlRemoved 但它遇到了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:40:10.897

考虑通过订阅自己的事件来`TabControl`更新其属性的可能性。事实并非如此，但它有助于（我认为）理解问题。自己的处理程序可能会在您的处理程序之后运行。您需要的是在事件*之后*运行的事件。`TabCount``ControlRemoved``TabControl``ControlRemoved`*`ControlRemoved`*

 *什么`TabControl`是创建标准`ControlCollection`类的派生类，即[TabControl.ControlCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.controlcollection%28v=vs.100%29.aspx)。您可以做的是从*that*派生，并覆盖`Add`and/or`Remove`方法。调用`base.Add(control)`/ `base.Remove(control)`，然后引发自定义事件。使用该自定义事件而不是`ControlAdded`/ `ControlRemoved`。

*编辑*：现在未经测试，将在我可以测试时进行测试，但它应该类似于

```
[ToolboxItem(true)]
public class MyTabControl : TabControl
{
    public event ControlEventHandler TabAdded;

    public event ControlEventHandler TabRemoved;

    protected override Control.ControlCollection CreateControlsInstance()
    {
        return new ControlCollection(this);
    }

    protected virtual void OnTabAdded(ControlEventArgs e)
    {
        var @event = TabAdded;
        if (@event != null)
            @event.Invoke(this, e);
    }

    protected virtual void OnTabRemoved(ControlEventArgs e)
    {
        var @event = TabRemoved;
        if (@event != null)
            @event.Invoke(this, e);
    }

    public new class ControlCollection : TabControl.ControlCollection
    {
        public ControlCollection(MyTabControl owner)
            : base(owner)
        { }

        public override void Add(Control value)
        {
            base.Add(value);
            ((MyTabControl)Owner).OnTabAdded(new ControlEventArgs(value));
        }

        public override void Remove(Control value)
        {
            base.Remove(value);
            ((MyTabControl)Owner).OnTabRemoved(new ControlEventArgs(value));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:32:58.087

尝试使用[BeginInvoke 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)异步执行事件处理程序。例如

```
protected virtual void OnControlRemoved(ControlEventArgs e)
{
    BeginInvoke((Action)(()=>
        {
           if(Controls.Count() == 0)
           {
              ...
           }
        }));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T06:28:56.813

如果您一次删除一个标签，您可以简单地检查：

```
TabCount - 1 == 0 
```*

# json - 如何动态生成jquery jqgrid？

> ID：11080724
> 
> 赞同：1
> 
> 时间：2012-06-18T10:09:09.073
> 
> 标签：json, jquery, jqgrid

当前要求是单击按钮我通过 ajax 获取 json 数据，其中包含有关表头和数据的信息。我想使用 jqgrid 显示表格数据，因此我正在使用以下代码准备 jqgrid：

```
$("#fixedId").jqGrid({ 
        datatype: 'clientSide',
        colNames:colName,//from json response
        colModel :colModels,//from json response
                   pager: '',
                   shrinkToFit:true,
                   autowidth:true,
                   rowNum:10,
                   rowList:[10,20,30],
                   emptyrecords: "Empty records",
                   viewrecords: true,
                   width: '100%',
                   height: '100%',
                   altRows:true,
                   scrollOffset: 0,
                   gridview: true,
                   rownumbers:false,
                   multiselect:false,
                   multiboxonly:false,
                   caption: ''         
    }); 

    $("#"+tableId).jqGrid('gridResize', { minWidth: 450, minHeight: 200 }); 
```

我正在使用 jqgrid`addRowData`函数将数据添加到这个新创建的表中。

所以事情第一次运行良好。现在，当我得到一个新的 json 响应来通过 ajax 绘制这个新表详细信息时，我必须删除旧表，所以要删除我尝试过的旧表数据

1） `$("#fixedId").remove();` 使用..重新创建表标签

```
$("#tableParent").append('<table id=fixedId><tr><td /></tr></table>'); 
```

然后重新调用以前的代码来创建这个带有新标题和数据的新表，但是这个新的标题，数据表没有在屏幕上绘制。屏幕仍然是空的，我在屏幕上看不到任何表。

2）我试过

```
$("#gbox_fixedId").remove(); 
```

重复步骤 1 以生成新表并添加数据..再次相同的结果..我在屏幕上看不到任何表。

3）我试过了

```
$("#gbox_fixedId").find(".ui-jqgrid-htable").remove(); 
```

此选项有效，但是在重新粉刷新表 3-4 次后，我可以看到每张粉刷过的表看起来都有些变形，并且在重新粉刷一些之后，它变得难以使用该表。

任何解决方案，如如何删除旧的 jqgrid 并创建新的/干净的 jqgrid 以使其工作顺利？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:16:26.623

在打电话之前，`$("#fixedId").jqGrid();`我假设你有这个结构：

```
<div id="tableParent">
    <table id="fixedId"></table>
</div> 
```

然后，如果您在调用 jqGrid 后检查您的 dom，您会注意到**fixedId**不再是 tableParent 的直接子**级**，因为 jqGrid 将其扭曲到其他元素中，因此要删除您的网格，您需要调用：

```
$("#tableParent").empty(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:14:12.473

jqGrid 创建一些元素（div）并将您的表格包装在这些 div 中。调用`$("#fixedId").remove();`不会破坏那些额外的元素。你应该使用

```
$("#tableParent").children().remove() 
```

这将完全破坏 jqGrid，因此您可以创建一个新的 jqGrid。确保你没有任何其他元素，`#tableParent`否则它也会消失

# android - HttpTransportSE 。调用错误

> ID：11080725
> 
> 赞同：0
> 
> 时间：2012-06-18T10:09:12.773
> 
> 标签：android, android-webview

我是学生和新的 android 我有一个 Web 服务（WFC C#），当我在 Visual Winform 中测试时它没问题.. 我的 android 代码：

```
 String NAMESPACE="http://tempuri.org/";
    String METHOD_NAME="Hello"; // method public string Hello() [WCF]
    String SOAP_ACTIONS=NAMESPACE+"/"+METHOD_NAME;
    String URL="http://localhost:8732/BookInformationHost/BookService/"; // host Service 
    SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet=true;
    envelope.encodingStyle=SoapSerializationEnvelope.ENC;
    envelope.setOutputSoapObject(request);
    HttpTransportSE transp=new HttpTransportSE(URL);
    try
    {
        Toast.makeText(getApplicationContext(), "Try 1", Toast.LENGTH_SHORT).show();
        transp.call(SOAP_ACTIONS, envelope);
        Toast.makeText(getApplicationContext(), "Try 2", Toast.LENGTH_SHORT).show();
        Object result=(Object)envelope;
        Toast.makeText(getApplicationContext(), result.toString(), Toast.LENGTH_SHORT).show();

    }catch(Exception ex)
    {
        Toast.makeText(getApplicationContext(), "Hello_Error", Toast.LENGTH_SHORT).show();
    } 
```

吐司秀（“Try 1”）和“Hello_Error”。那么我需要做什么才能从 Webservice 上的函数 String 获取 String .. 非常感谢！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:24:58.117

```
String URL="http://localhost:8732/BookInformationHost/BookService/"; // host Service 
```

Android 不明白，`localhost`所以要么 put`10.0.2.2`要么你**系统的 IP Address**。然后再试一次..同时发布异常日志你从中得到什么。

# jquery - 如何制作一个滑动和隐藏之前内容的 jquery 菜单？

> ID：11080733
> 
> 赞同：1
> 
> 时间：2012-06-18T10:09:37.170
> 
> 标签：jquery, html, css

基本上我想要实现的是在我的内容 div 的左侧有一个 ul 菜单，一开始只有一个 li 应该是可见的。单击后，它必须滑出或某种动画，并被包含不同导航的 4 **li替换**

```
(function($){
    $(function(){

        $('li.dropdown').click(function() {
            $(this).fadeOut('slow')
                    .siblings('li.stage2').css('display', 'block');
        });
    });
})(jQuery); 
```

这目前可以做到，但兄弟姐妹进来并不顺利，当 fadOut 动画结束时，他们会跳到另一个位置，任何帮助将不胜感激。

**编辑** 不是下拉菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:56:26.527

请看一下这段代码。我构建了你的代码片段并想出了这个。

CSS：

```
ul { width: 200px; margin: 20px 0 0 20px; }
li { color: #fff; text-align: center; background-color: #000; border-bottom: 1px dotted #fff; }
li.stage2 { background-color: #0000ff; display: none; } 
```

​</p>

HTML：

```
<ul id="menu">
    <li class="dropdown">First Stage Menu</li>
    <li class="stage2">Second Stage - 1</li>
    <li class="stage2">Second Stage - 2</li>
    <li class="stage2">Second Stage - 3</li>
    <li class="stage2">Second Stage - 4</li>
</ul> 
```

JS：

```
$(document).ready(function() {
    $('li.dropdown').click(function() {
        $(this).animate({opacity:0},1000);
        $(this).siblings('li.stage2').fadeIn(1000);
        $(this).parent().animate({marginTop: '-=20'},1000);
    });​
}); 
```

在这里查看它的实际效果：http: [//jsfiddle.net/P9TQA/1/](http://jsfiddle.net/P9TQA/1/) 祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:13:31.733

我有同样的问题，这是我如何解决它的示例：

```
$("#menu-balticpoint li").mouseover(function() {

                var id = $(this).attr('id');
                var width = $("#"+id+" a").width();
                $("#"+id+" ul li a").css("width", width+"px");
                $("#"+id+" ul").slideDown('fast').show();
        $(this).hover(function() {
        }, function(){
            $("#"+id+" ul").fadeOut('slow').hide().stop(true, true); //When the mouse hovers out of the subnav, move it back up
        });
        }); 
```

# joomla - joomla：从 1.0 迁移到 1.5 后菜单消失了

> ID：11080734
> 
> 赞同：1
> 
> 时间：2012-06-18T10:09:43.753
> 
> 标签：joomla

实际上我尝试从**1.0 迁移到 2.5.4**因此我从**1.0 到 1.5**开始。我在我的本地**wamp**服务器上安装了 Joomla 1.0，以使用[从 Joomla 1.0 升级到](http://www.siteground.com/tutorials/joomla15/joomla_upgrade.htm)1.5 将 Joomla 1.0 迁移到 Joomla 1.5，尽管在此过程中它显示了许多折旧的功能，但过了一段时间它迁移时出现了一些折旧较少的功能错误，但网站视图不显示菜单..？

我用谷歌搜索，发现[升级 v1.5.18 到 v.1.5.20 后菜单项丢失](http://forum.joomla.org/viewtopic.php?f=430&t=535338&sid=93c8c5e760338bb5733b0c36602b08a5)

> 问题与使用新“menutype”输入类型的方式有关。它适用于新菜单，但不适用于带有空格的旧菜单。就目前而言，我建议：

*   备份您的网站

*   使用 phpMyAdmin 导出所有数据库表（检查导出屏幕上的添加删除表）

*   打开您导出的 SQL 文件

*   查找“jos_menu_types”所在的 SQL（注意：如果您使用不同的数据库前缀，它可能不会以 jos_ 开头）。

*   您可能会发现的示例 SQL：

    **代码：** INSERT INTO `jos_menu_types`( `id`, `menutype`, `title`, `description`) VALUES(5, 'Right Menu', 'Right Menu', '');

*   “Right Menu”的第一个实例是“menutype”。这不应包含任何空格。事实上，我建议将其设为小写，将空格转换为连字符“-”。

*   在整个 SQL 文件中搜索“Right Menu”的所有实例并将它们更改为“right-menu”。

*   这里棘手的部分是并非所有地方都需要更改。例如，您不需要更改上例中的“第二个实例”，也不需要更改与此模块关联的模块标题。

*   完成更改后，将 SQL 导入您的网站。

> 如果您有任何问题，请在编辑之前恢复您导出的原始 SQL 文件的副本，然后重试。
> 
> 我希望这会有所帮助。如果您有任何问题，请告诉我。

但它不能解决问题..

在左侧 Mainmenu 框中它说：

> 警告：modMainMenuHelper::buildXML() 的参数 1 应为参考，在第 100 行的 E:\wamp\www\joomla_1.5\libraries\joomla\cache\handler\callback.php 中给出的值

和 Topmenu 完全消失了。

我卡在这里..如果我继续前进会发生什么......！

# ruby - 如果给定的块类型是整数，如何在 ruby Hash 中添加元素？

> ID：11080735
> 
> 赞同：0
> 
> 时间：2012-06-18T10:09:44.160
> 
> 标签：ruby

```
def self.jq_column_models
  COLUMN_NAME.collect {|x|
    {:name => x.to_s, :width => 80, :format => 'integer' if x.is_a?(Fixnum)}
  }
end 
```

我编写了代码`:format => 'integer' if x.is_a?`来添加`:format`when `|x|`is only integer 类型。但它没有被编译。你如何用 ruby​​ 来表达这段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:27:34.963

您可以使用[点击](http://ruby-doc.org/core-2.3.1/Object.html#method-i-tap)（屈服自我；自我）：

```
 COLUMN_NAME.collect {|x|
    {:name => x.to_s, :width => 80}.tap{|y| y[:format] ='integer' if x.is_a?(Integer)}
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:22:28.930

只需`:format`在另一个语句中添加：

```
h = {:name => x.to_s, :width => 80}
h[:format] = 'integer' if x.kind_of? Integer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:34:53.760

```
def self.jq_column_models
  COLUMN_NAME.each_with_object([]) do |x,memo|
    h = {:name => x.to_s, :width => 80}
    h[:format] = 'integer if x.is_a?(Fixnum)
    memo << h
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:26:28.333

好的，所以你必须使用两个语句：

```
hash = {:name => x.to_s, :width => 80}
hash[:format] = 'integer' if x.is_a? Fixnum 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T12:05:13.097

只是为了补充其他答案，一个不涉及语句的功能解决方案。首先，将此通用方法添加到您的扩展库中：

```
class Hash
  def with_values
    select { |k, v| block_given? ? yield(v) : v }
  end
end 
```

现在使用它：

```
{:name => x.to_s, :width => 80, :format => ('integer' if x.is_a?(Fixnum))}.with_values 
```

当然，如果`nil`是合法值（通常不应该），这将不起作用。

# javascript - 使用 indexOf 方法在二维数组中查找值

> ID：11080736
> 
> 赞同：5
> 
> 时间：2012-06-18T10:09:51.260
> 
> 标签：javascript, indexing

我想问一个关于 JavaScript 中二维数组的问题，类似于：

```
var array = [[2,45],[3,56],[5,67],[8,98],[6,89],[9,89],[5,67]] 
```

也就是说，在每个索引上，我都有一个数组。

假设我的第二个索引中有一个值，例如`56`，并且我想要相应的第一个索引（即上面示例中的 3）。

我可以使用循环来做到这一点（如果没有其他选择），但有没有更好的方法？

另外，我知道`indexOf`JavaScript 中的方法，但是当我这样调用它时它没有返回索引：

```
array.indexOf(56); 
```

任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T10:24:53.997

使用一些迭代器函数。

`filter`允许您遍历数组并仅在函数返回时返回值`true`。

现代浏览器方式：

```
var arr = array.filter( function( el ) {
    return !!~el.indexOf( 56 );
} );
console.log( arr ); // [3, 56]
console.log( arr[ 0 ] ); // "3" 
```

旧版浏览器方式，使用 jQuery：

```
var arr = $.filter( array, function() {
    return !!~$.inArray( 56, $( this ) );
} );
console.log( arr ); // [3, 56]
console.log( arr[ 0 ] ); // "3" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T10:14:50.630

你可以这样做：

```
var ret;
var index = array.map(function(el){return el[1];}).indexOf(56);
if (index !== -1) {
  ret = array[index][0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:15:00.083

`array.indexOf( x )`返回`x`数组中的位置，如果未找到则返回 -1。在你的二维数组中这是没用的，因为 56 不在数组中；它位于一个数组中，该数组包含在`array`.

您将不得不遍历第一个数组，然后用于`indexOf`检查每个子数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T10:21:15.820

我发现至少在 IE6 中（我不确定更新的版本），内置的 Array 类型没有 indexOf 方法。如果您在 IE 中进行测试，也许这就是您无法开始的原因。我写了这个小补充以包含在我的所有代码中：

```
if(!Array.prototype.indexOf){
    Array.prototype.indexOf = function(obj){
        for(var i=0; i<this.length; i++){
            if(this[i]===obj){
                return i;
            }
        }
     return -1;
   };
} 
```

我真的不能把这归功于。这可能是我在一些教程或 Doug Crockford 的一篇文章中找到的一段相当通用的代码。我很确定有人会提出更好的写作方式。

我发现在 Firefox 中工作是一个不错的起点，因为您可以安装 Firebug 控制台并更好地了解哪里出了问题。我承认这不能解决跨浏览器的问题，但至少它可以让你开始你的项目。

这段小代码将确保您可以使用 indexOf 方法来查找给定值在一维数组中的位置。使用您的二维数组，外部数组中的每个元素都是一个数组，而不是单个值。我将做一个小测试，看看它是如何工作的，然后回复你，除非其他人有更好的答案。

我希望这至少能让你开始。

更新假设您有一个实现 Array.indexOf 的浏览器，我已经尝试了各种方法来传递外部数组中的一个数组元素。

```
alert(array.indexOf([3,56]))
alert(array.indexOf("3,56")) 
```

只需返回-1。

奇怪，

```
alert(array.indexOf(array[1])) 
```

正确返回 1。但是您需要知道内部数组的索引才能获取索引！我看不到将数组传递给 indexOf 方法的方法。

# data-mining - 同义词查找器文本挖掘算法

> ID：11080737
> 
> 赞同：0
> 
> 时间：2012-06-18T10:09:51.757
> 
> 标签：data-mining, text-mining, synonym, corpus

我想创建一个自动同义词查找算法（主要用于品牌名称）。例如，如果用户输入“可口可乐”这个词，我想返回“可乐”这个词。

这可以很容易地使用字典来完成；但我需要一个字典文件。如何自动创建一个？（我有一个包含 100 万多条记录的小型语料库，同义词将来自此）。

有没有针对这个问题的文本挖掘算法？此外，还有一些在线同义​​词服务，但这些服务不包含品牌名称 :-(

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:29:56.460

基于 trie 的算法可以找到同义词或相似词。它不使用键，而是使用树中的位置来定义键。例如，从 A 到 B，从 B 到 C。 trie 有许多数据结构。最简单的是邻接列表或三元搜索树。

# c# - 如何检查EntityDataSource的WhereParameters是否返回0行

> ID：11080738
> 
> 赞同：0
> 
> 时间：2012-06-18T10:09:56.640
> 
> 标签：c#, asp.net

我有一个 EntityDataSource：

```
<asp:EntityDataSource ID="EntityDataSourcePersoneel"
            runat="server"
            ConnectionString="name=HotelTestDatabaseEntities"
            DefaultContainerName="HotelTestDatabaseEntities"
            EntitySetName="Personeels"
            Include="Afdeling">
   </asp:EntityDataSource> 
```

我动态添加这些 WhereParameters：

```
EntityDataSourcePersoneel.WhereParameters.Clear();
   EntityDataSourcePersoneel.AutoGenerateWhereClause = true;
   EntityDataSourcePersoneel.WhereParameters.Add("personeelID", TypeCode.Int32  
   personeelId.ToString()); 
```

如何检查 WhereParameters 是否返回 0 行（无）？

哦，是的，如果我的代码是错误的，请帮助和建议我.. 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:23:54.150

使用`OnSelected`查询完成后将发生的事件：

```
protected void EntityDataSourcePersoneel_OnSelected(object Sender, EntityDataSourceSelectedEventArgs e)
{
     if(e.TotalRowCount == 0)
     {
          //Whatever
     }
} 
```

阅读更多：[这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.selected.aspx)

# java - 如何让 HttpClient 使用 Kerberos？

> ID：11080741
> 
> 赞同：14
> 
> 时间：2012-06-18T10:10:07.527
> 
> 标签：java, kerberos, apache-commons-httpclient

[HttpClient](http://hc.apache.org/index.html)是一个用于浏览网站的 Java 库。
我想将它与[Kerberos](http://en.wikipedia.org/wiki/Kerberos_%28protocol%29)一起使用。HttpClient 文档的[Kerberos 部分](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html#d5e1094)主要说：

> 最好的开始方法是获取示例中的 KerberosHttpClient.java 文件并尝试让它工作。

但是，`KerberosHttpClient.java`无处可寻（[source](http://ftp.meisei-u.ac.jp/mirror/apache/dist//httpcomponents/httpclient/source/httpcomponents-client-4.2-src.tar.gz)、[binaries](http://ftp.meisei-u.ac.jp/mirror/apache/dist//httpcomponents/httpclient/binary/httpcomponents-client-4.2-bin.tar.gz)、[doc](http://hc.apache.org/httpcomponents-client-ga/examples.html)）
没有这个文件就很难做任何事情。

我在哪里可以找到`KerberosHttpClient.java`？
或者是否有更好的文档解释如何将 HttpClient 与 Kerberos 一起使用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T12:01:11.123

在[源代码](http://hc.apache.org/downloads.cgi)中，您将找到`ClientKerberosAuthentication.java`包含该示例的文件。

```
httpcomponents-client-4.2/httpclient/src/examples/org/apache/http/examples/client/ClientKerberosAuthentication.java 
```

顺便说一句，设置 Kerberos 身份验证需要在 KDC 端（我猜是 ActiveDirectory）和 HTTP 服务器端执行许多步骤。即使针对 mod_auth_kerb，我也向您推荐此[通用服务器设置文档](http://grolmsnet.de/kerbtut/)，它解决了完成工作所需的概念和故障排除。

# perl - 在 Perl 中接受 STDIN 和参数参数的构造

> ID：11080743
> 
> 赞同：2
> 
> 时间：2012-06-18T10:10:22.467
> 
> 标签：perl, stdin, argv

我希望我的 perl 脚本能够做到这一点：

```
$ ./code file.txt | myperl.pl param1 param2 
```

所以基本上它会接受输入（STIDN）并用and`./code`执行它。`param1``param2`

但为什么这不起作用：

```
my $param1 = $ARGV[0];
my $param2 = $ARGV[1];

while (<>) {
   if ($param1 > 0.5 && $param2 > 0) {
     # do something
  }

} 
```

什么是正确的构造？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T10:22:43.387

`<>`aka`readline`的默认参数是 ARGV，它是一个神奇的文件句柄，可以从 @ARGV 中指定的所有文件中读取，如果没有，则从 STDIN 中读取。由于您要提供参数，因此您需要在使用之前将它们从 @ARGV 中清除`<>`，或者明确指定`<STDIN>`而不使用魔法 ARGV 句柄。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T11:06:17.643

这有效，它删除了@ARGV 的前两个参数：

```
my $param1 = shift;
my $param2 = shift;

while (<>) {
   if ($param1 > 0.5 && $param2 > 0) {
     # do something
   }
} 
```

`<>`（缩写`<ARGV>`）从`@ARGV`if`@ARGV`不为空中列出的文件中读取。当它为空时（例如在上面，因为您将选项移出），它会`STDIN`改为读取。

另一种方法是使用`<STDIN>`而不是`<>`，但是调用者失去了做的选择`myperl.pl param1 param2 file.txt`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T10:12:17.940

您必须`<STDIN>`在这种情况下使用。

```
my $param1 = $ARGV[0];
my $param2 = $ARGV[1];

while (<STDIN>) {
   if ($param1 > 0.5 && $param2 > 0) {
     # do something
  }

} 
```

*菱形*运算符`<>`表示参数 + 标准输入。

当您想使用菱形运算符而不是 时，您必须从之前`<STDIN>`删除这两个参数。但我认为在你的情况下会更好。`param1``param2``ARGV``<STDIN>`

# iphone - 从 URL 获取 UIImage 到 iPhone 和 iPhone 视网膜

> ID：11080746
> 
> 赞同：0
> 
> 时间：2012-06-18T10:10:28.207
> 
> 标签：iphone, uiimage, retina-display

我正在尝试从 URL 获取图像以在 iPhone 和 iPhone Retina 上查看它。问题是 iPhone 显示正确但 Retina 模糊。图像尺寸为 100x100，分辨率为 326dpi（视网膜尺寸）。

我做得对吗？

```
 - (void)viewDidLoad
    {
    [super viewDidLoad];

    double scaleFactor = [UIScreen mainScreen].scale;
    NSURL *imageURL = [NSURL URLWithString:@"http://s419999211.mialojamiento.es/img/bola.png"];

    if (scaleFactor == 2){
        // @2x
        NSLog(@"Estoy cargando la imágen retina");
        NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
        image = [UIImage imageWithData:imageData];
        NSLog(@"Width: %f Height: %f",image.size.width,image.size.height);
        yourImageView = [[UIImageView alloc] initWithImage:image];
    } else {
        // @1x
        NSLog(@"Estoy cargando la imágen normal");
        NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
        image = [UIImage imageWithData:imageData];
        imagenScalada = [UIImage imageWithCGImage:[image CGImage] scale:1.0 orientation:UIImageOrientationUp];
        NSLog(@"Width: %f Height: %f",imagenScalada.size.width,imagenScalada.size.height);
        yourImageView = [[UIImageView alloc] initWithImage:imagenScalada];
    }

    [self.view addSubview:yourImageView];
} 
```

![普通屏幕的图像](../Images/a4d09dcb7d734eb130455543d75d5aa7.png) ![图像模糊](../Images/bd9757223563d58c5330d6310b5279d7.png)

谢谢！

iPhone 普通 iPhone 视网膜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:34:44.257

**编辑：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    double scaleFactor = [UIScreen mainScreen].scale;
    NSURL *imageURL = [NSURL URLWithString:@"http://s419999211.mialojamiento.es/img/bola@2x.png"];
    NSData * imageData = nil;
    if (scaleFactor == 2){
        imageData = [NSData dataWithContentsOfURL:imageURL2x];
        image = [UIImage imageWithData:imageData];
    }
    else {
        imageData = [NSData dataWithContentsOfURL:imageURL2x];
        image = [UIImage imageWithData:imageData];
        image = [self scaledImage:image];
    }

    yourImageView = [[UIImageView alloc] initWithImage:image];
    [self.view addSubview:yourImageView];
}

- (UIImage *)scaledImage:(UIImage *)image {
    CGRect rect = CGRectMake(0.0, 0.0, actualWidth, actualHeight); //Change the size of the image
    UIGraphicsBeginImageContext(rect.size);

    [image drawInRect:rect];
    UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    return scaledImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:31:51.543

你通知服务器给我一个双倍尺寸的视网膜图像。如果普通 iphone 的 100x100 图像比视网膜的大小应该是两倍；如果你相同的图像图像会模糊。

试试这个代码来确定视网膜屏幕

```
 + (BOOL)isRetineDisplay{
        if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
            ([UIScreen mainScreen].scale == 2.0)) {
            // Retina display
            return YES;
        } else {
            // not Retine display
            return NO;
        }
    } 
```

# flowplayer - 如何在不设置 cookie 的情况下使用 flowplayer？

> ID：11080754
> 
> 赞同：1
> 
> 时间：2012-06-18T10:11:01.180
> 
> 标签：flowplayer

Flowplayer 默认设置 cookie。您可以在不设置 cookie 的情况下使用 Flowplayer 吗？

# jasper-reports - JasperReports：iReport 中交叉表的错误打印变量

> ID：11080756
> 
> 赞同：2
> 
> 时间：2012-06-18T10:11:08.660
> 
> 标签：jasper-reports, ireport

我在使用*crosstab*运行报告时遇到问题。错误是：

> 错误填充打印...错误评估表达式：源文本：$V{cat_code} net.sf.jasperreports.engine.fill.JRExpressionEvalException：错误评估表达式：源文本：$V{cat_code}

我可以知道我的源代码有什么问题吗？这是我的代码：

```
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Corr_ticket" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
<?xml version="1.0" encoding="UTF-8"?>
    <import value="com.google.common.base.*"/>
    <style name="Crosstab Data Text" hAlign="Center"/>
    <parameter name="daterangefrom" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="daterangeto" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="monthy" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="yrs" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="quarter" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="weeks" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <queryString>

    </queryString>
    <field name="daterange" class="java.lang.String"/>
    <field name="ticketid" class="java.lang.Integer"/>
    <field name="cat_code" class="java.lang.Integer"/>
    <field name="descategory" class="java.lang.String"/>
    <field name="subcat_code1" class="java.lang.Integer"/>
    <field name="dessub1cat" class="java.lang.String"/>
    <field name="subcat_code2" class="java.lang.Integer"/>
    <field name="dessub2cat" class="java.lang.String"/>
    <field name="description_sub" class="java.lang.String"/>
    <field name="description_source" class="java.lang.String"/>
    <pageHeader>
        <band height="141">
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement x="0" y="53" width="802" height="35" isRemoveLineWhenBlank="true"/>
                <textElement>
                    <font size="11" isBold="true"/>
                    <paragraph lineSpacing="1_1_2"/>
                </textElement>
                <textFieldExpression><![CDATA[(!Strings.isNullOrEmpty($P{daterangefrom}) && !Strings.isNullOrEmpty($P{daterangeto}) && Strings.isNullOrEmpty($P{weeks}) && Strings.isNullOrEmpty($P{monthy}) && Strings.isNullOrEmpty($P{quarter}) && Strings.isNullOrEmpty($P{yrs})) ? "Date Ticket Created From : " + $P{daterangefrom} +"\n" + "Date Ticket Created to : " + $P{daterangeto}
 : null]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="119" width="100" height="20"/>
                <textElement>
                    <font size="11" isBold="true"/>
                </textElement>
                <text><![CDATA[State :]]></text>
            </staticText>
            <staticText>
                <reportElement x="0" y="98" width="90" height="20"/>
                <textElement>
                    <font size="11" isBold="true"/>
                </textElement>
                <text><![CDATA[Industry Group :]]></text>
            </staticText>
        </band>
    </pageHeader>
    <summary>
        <band height="297">
            <crosstab>
                <reportElement x="0" y="0" width="802" height="297"/>
                <rowGroup name="ticketid" width="70" totalPosition="End">
                    <bucket class="java.lang.String">
                        <bucketExpression><![CDATA[$F{ticketid}]]></bucketExpression>
                    </bucket>
                    <crosstabRowHeader>
                        <cellContents backcolor="#F0F8FF" mode="Opaque">
                            <box>
                                <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                            </box>
                            <textField>
                                <reportElement style="Crosstab Data Text" x="0" y="0" width="70" height="25"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$V{ticketid}]]></textFieldExpression>
                            </textField>
                        </cellContents>
                    </crosstabRowHeader>
                    <crosstabTotalRowHeader>
                        <cellContents backcolor="#BFE1FF" mode="Opaque">
                            <box>
                                <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                            </box>
                            <staticText>
                                <reportElement x="0" y="0" width="70" height="25"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <text><![CDATA[Total ticketid]]></text>
                            </staticText>
                        </cellContents>
                    </crosstabTotalRowHeader>
                </rowGroup>
                <columnGroup name="cat_code" height="30" totalPosition="End">
                    <bucket class="java.lang.String">
                        <bucketExpression><![CDATA[$F{cat_code}]]></bucketExpression>
                    </bucket>
                    <crosstabColumnHeader>
                        <cellContents backcolor="#F0F8FF" mode="Opaque">
                            <box>
                                <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                            </box>
                            <textField isBlankWhenNull="true">
                                <reportElement style="Crosstab Data Text" x="0" y="0" width="100" height="30"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$V{cat_code}]]></textFieldExpression>
                            </textField>
                        </cellContents>
                    </crosstabColumnHeader>
                    <crosstabTotalColumnHeader>
                        <cellContents backcolor="#005FB3" mode="Opaque">
                            <box>
                                <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                            </box>
                            <staticText>
                                <reportElement x="0" y="0" width="50" height="60" forecolor="#FFFFFF"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <text><![CDATA[Total cat_code]]></text>
                            </staticText>
                        </cellContents>
                    </crosstabTotalColumnHeader>
                </columnGroup>
                <columnGroup name="description_source" height="30" totalPosition="End">
                    <bucket class="java.lang.String">
                        <bucketExpression><![CDATA[$F{description_source}]]></bucketExpression>
                    </bucket>
                    <crosstabColumnHeader>
                        <cellContents backcolor="#F0F8FF" mode="Opaque">
                            <box>
                                <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                            </box>
                            <textField>
                                <reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="30"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$V{description_source}]]></textFieldExpression>
                            </textField>
                        </cellContents>
                    </crosstabColumnHeader>
                    <crosstabTotalColumnHeader>
                        <cellContents backcolor="#BFE1FF" mode="Opaque">
                            <box>
                                <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                            </box>
                            <staticText>
                                <reportElement x="0" y="0" width="50" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <text><![CDATA[Total description_source]]></text>
                            </staticText>
                        </cellContents>
                    </crosstabTotalColumnHeader>
                </columnGroup>
                <measure name="description_sourceMeasure" class="java.lang.Integer" calculation="Count">
                    <measureExpression><![CDATA[$F{description_source}]]></measureExpression>
                </measure>
                <crosstabCell width="50" height="25">
                    <cellContents>
                        <box>
                            <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                        </box>
                        <textField>
                            <reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="25"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$V{description_sourceMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>
                <crosstabCell height="25" rowTotalGroup="ticketid">
                    <cellContents backcolor="#BFE1FF" mode="Opaque">
                        <box>
                            <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                        </box>
                        <textField>
                            <reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="25"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$V{description_sourceMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>
                <crosstabCell width="50" columnTotalGroup="cat_code">
                    <cellContents backcolor="#005FB3" mode="Opaque">
                        <box>
                            <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                        </box>
                        <textField>
                            <reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="25" forecolor="#FFFFFF"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$V{description_sourceMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>
                <crosstabCell rowTotalGroup="ticketid" columnTotalGroup="cat_code">
                    <cellContents backcolor="#005FB3" mode="Opaque">
                        <box>
                            <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                        </box>
                        <textField>
                            <reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="25" forecolor="#FFFFFF"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$V{description_sourceMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>
                <crosstabCell width="50" columnTotalGroup="description_source">
                    <cellContents backcolor="#BFE1FF" mode="Opaque">
                        <box>
                            <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                        </box>
                        <textField>
                            <reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="25"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$V{description_sourceMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>
                <crosstabCell rowTotalGroup="ticketid" columnTotalGroup="description_source">
                    <cellContents backcolor="#BFE1FF" mode="Opaque">
                        <box>
                            <pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
                        </box>
                        <textField>
                            <reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="25"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$V{description_sourceMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>
            </crosstab>
        </band>
    </summary>
</jasperReport> 
```

其他问题：-我认为问题是“表达式类”，因为我的字段有字段名称=“cat_code”类=“java.lang.Integer”并且我在交叉表中的变量有桶类=“java.lang.String”。如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:59:36.290

您没有`cat_code`像`$V{cat_code}`错误消息中建议的那样命名的变量。您确实有一个名为的字段`cat_code`：

```
<field name="cat_code" class="java.lang.Integer"/> 
```

我的猜测是你忘记定义一个名为 this 的变量。您可以在 iReport 中通过右键单击变量部分并单击 来执行此操作`Add Variable`。然后，您只需将其定义为您想要的。

我从未使用过交叉表，所以这可能是完全错误的，但也许你的意思是`$F{cat_code}`？

# vba - 在两个相同的 VBA 函数中，一个突然返回 #NAME 错误

> ID：11080759
> 
> 赞同：3
> 
> 时间：2012-06-18T10:11:10.587
> 
> 标签：vba, excel

我刚刚经历了我的一个宏突然失败。它调用以下函数，该函数使用选定的可选分隔符连接一系列单元格：

```
Public Function MAKELIST(ByVal cellRange As Range, Optional ByVal delimiter As String)
 'Function to join a range of cells together with an optional
 Dim c As Range
 Dim newText As String
 Dim Count As Integer
 Count = 0
 newText = ""
 For Each c In cellRange
  Count = Count + 1
  newText = newText & c.Value
  If Count < cellRange.Count Then
   newText = newText & delimiter
  End If
 Next
 MAKELIST = newText
End Function 
```

它只是将手动输入的单元格数据连接在一起——任何值似乎都会破坏它。似乎问题在于函数是如何被引用/调用的（对不起，这个命名法不好）而不是函数本身。

这工作*得*很好。我在文件夹之间移动了文件，它突然停止工作，`#NAME`每次都返回错误。代码中没有任何变化，所以我将它从 更改`MAKELIST`为`MAKELIST2`，使用相同的 VBA。这完美地工作。但是，我显然不想更改工作簿中对函数的每个引用，我希望它是健壮且面向未来的，这样其他用户就不会发生这种情况。谁能解释为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T12:33:57.733

查看有问题的范围会很有用。虽然你可以使用这个更短的函数

*[更新以处理多个列范围]*

```
Public Function MAKELIST2(ByVal cellRange As Range, Optional delimiter As String)
Dim rng1 As Range
For Each rng1 In cellRange.Columns
    MAKELIST2 = MAKELIST2 & Join(Application.Transpose(rng1), delimiter)
Next
End Function 
```

# arrays - OpenCL 动态数据结构

> ID：11080762
> 
> 赞同：2
> 
> 时间：2012-06-18T10:11:20.767
> 
> 标签：arrays, dynamic, storage, opencl

我必须编写一个 OpenCL Marching Cubes 实现。

Marching Cubes 算法获取体积数据并从中创建等值面。这个过程需要很长时间，所以我必须用 n 个线程在 OpenCL 中编写它以提高性能。

我已经有了代码，但我的问题是存储顶点。据我了解，我需要知道算法将创建多少个顶点来分配足够的内存，但这个数字是未知的。有没有办法创建一个动态数据结构，比如带有附加函数的向量或 numpy.array 或类似的东西。

我正在编写 python 代码来加载 OpenCL __kernel，并且必须对顶点做一些其他的事情，所以它应该可以用 python 读取。这个想法是创建一个搅拌机插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:06:16.193

据我所知，OpenCL 不允许任何类型的动态内存管理。原因之一是 GPU 的工作方式。让 OpenCL 代码只在 CPU 上工作，而不是在 GPU 上工作并不是 OpenCL 背后的想法。

您可以通过以下方式解决您的问题：

*   创建一个巨大的内存缓冲区。您可能需要的更大。
*   当您有一个新顶点时，只需将其附加到缓冲区中的最后一个附加位置。
*   继续这样。

假设您在某些时候仍然内存不足。在这种情况下，您只需创建一个更大的缓冲区，将内存从旧缓冲区复制到新缓冲区并删除旧缓冲区。

我希望这会有所帮助。

# bash - UNIX：如何使用自身的函数搜索和替换字符串

> ID：11080764
> 
> 赞同：0
> 
> 时间：2012-06-18T10:11:27.983
> 
> 标签：bash, unix, sed, awk

我有一个包含要加密的字符串的文本文件。这些字符串由标签表示。

例子：

```
This is an <tag> example </tag>. 
```

在 UNIX 中（使用 sed、bash 等常用工具）搜索所有出现并同时将其替换为加密值（这是标签内字符串的函数）的最佳方法是什么？

结果：

```
This is an <tag> <encrypted value here> </tag>. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:19:00.127

假设四个不清楚的条件：

1.  开始和结束标签不必在同一行。
2.  加密功能不是一些微不足道的改变。
3.  只有一种标签。
4.  没有任何类型的嵌套。

在那种情况下，bash、sed、awk 都可能太麻烦了。你最好使用 Perl 或 Python。下面是一个算法：

1.  将 tag_flag 初始化为 0。
2.  逐字读取文件（或逐行，分割每一行）。
3.  当 tag_flag 为 0 并且您没有遇到开始标签时，按原样输出所有内容。
4.  当您遇到开始标签时，将 tag_flag 设置为 1。继续逐字阅读以收集到 to_be_encrypted 字符串。
5.  遇到结束标签时，在 to_be_encrypted 上打印加密函数的输出，并将 tag_flag 设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:08:18.343

好的，我几天前就找到了解决方案。我使用了 bash 和正则表达式。

这是我的做法：

```
#!/bin/bash

REGEX='^(.*<tag>)(.*)(<\tag>.*)$'

function process()
{
   RESULT= #do processing of $1 here
}

while read line ; do
   while [[ $line =~ "$REGEX" ]] ; do
      process "${BASH_REMATCH[2]}"
      line="${BASH_REMATCH[1]}$RESULT${BASH_REMATCH[3]}"
   done
   echo "$line" > "$OUTPUT_FILE"
done < "$FILE" 
```

# c# - 通过 ASP.NET 按钮在 aspx 页面中导航锚标记

> ID：11080766
> 
> 赞同：1
> 
> 时间：2012-06-18T10:11:39.107
> 
> 标签：c#, asp.net, html, anchor

我有一个带有一些`TextBoxes`和`CheckBoxList`. 我想导航到页面的特定部分。我把`<a name="SpecificPortion"></a>`锚放在那部分。现在我想，当我单击`SaveButton`（它是一个 ASP.NET 控件）时，它应该执行其特定功能并导航到`SpecificPortion`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:13:31.867

使用`Response.Redirect()`并重定向到同一页面，指定`SpecficPortion`锚点。

```
Response.Redirect("MyPageName.aspx#SpecificPortion") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:20:29.540

尝试向您的页面添加一个 Web 方法，并将按钮设为正常的 HTML 按钮调用 javascript 函数，该函数调用 Web 方法进行保存，成功后将您的焦点移到特定部分的控件上。

对于 Page 方法如下

[http://www.dotnetspider.com/resources/21456-Page-Method.aspx](http://www.dotnetspider.com/resources/21456-Page-Method.aspx)

[http://aspalliance.com/1922_PageMethods_In_ASPNET_AJAX.3](http://aspalliance.com/1922_PageMethods_In_ASPNET_AJAX.3)

& 在成功函数中写入 document.getElementById('txtYourElement').focus()。

这里的 'txtYourElement' 是客户端任何 HTML 控件的 id。

希望这对你有意义。

# api - 尝试编辑页面会导致 (#300) 编辑失败，但更改已保存？

> ID：11080768
> 
> 赞同：0
> 
> 时间：2012-06-18T10:11:43.643
> 
> 标签：api, facebook-graph-api, facebook-javascript-sdk

我使用 js sdk 发布和编辑 fb 页面。这一直很好，直到我昨天开始测试当用户在 FB 中卸载应用程序时我正在构建的页面编辑器中会发生什么。

当我在编辑器中重新加载页面时，出现了 js 登录框，我需要再次授权该应用程序，所以它似乎运行良好。但是当我尝试发布或更新 FB 页面时，它不断收到这些错误。

```
code 300    
message "(#300) Edit failure"
type "OAuthException" 
```

有趣的是，该页面确实已发布，并且更新也发布在 fB 本身上。所以页面的发布和更新工作正常，但它也会产生这个错误，弄乱我的脚本。

```
FB.api('/'+pageTabId+'?access_token='+pageAccessToken, 'post', params, function(response) {
    if (!response || response.error) { //
        console.log("Error Installing:");
     } else {
        console.log('tab updated');                                                                                          
     }          
}); 
```

我试图注销 FB，卸载应用程序，删除所有 cookie 和缓存。但它似乎没有任何区别..我以前有这个，但后来它突然消失了。但这一次似乎并非如此。

“OAuthException”告诉我我无权进行更改，但是我所做的更改或页面本身如何才能发布呢？

我需要做什么才能使（＃300）编辑失败错误消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T20:01:07.383

仅供参考，遇到了这个 FB 错误报告[https://developers.facebook.com/bugs/255313014574414/](https://developers.facebook.com/bugs/255313014574414/)

# javascript - 为什么选择在 IE 9 中只显示选项文本的第一个字符

> ID：11080769
> 
> 赞同：2
> 
> 时间：2012-06-18T10:11:44.347
> 
> 标签：javascript, jquery, internet-explorer-9

在 IE 9 中选择仅显示选项文本的第一个字符

使用单击 div 事件添加选项，仅显示第一个字符。

问题出现在 IE 9 中。FF 和 Chrome 运行良好。

适用于 JQuery 1.3.2 但不在更高版本中。

请看这个jsfiddle：http: [//jsfiddle.net/q5F2r/25/](http://jsfiddle.net/q5F2r/25/)

或者

HTML

```
<button type="button" id="btn">insert option</button><div id="container"></div> 
```

Javascript

```
$(document).ready(function () {
    $("#container").append("<select class='category-select root' style='width:100px' />");  
    $("#btn").click(function(){    
       $(".root").append("<option>none</option>");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:12:40.823

我找到了答案。显然它之前已经[在 stackoverflow 上讨论过](https://stackoverflow.com/questions/5908494/select-only-shows-first-char-of-selected-option)。奇怪的是，微软在发布 IE10 之前无法修复这种错误！

好。解决方案是一个真正的黑客。您可以强制 IE 重新绘制 <select>，方法是将选择的宽度设置为某个值。在本例中，它被设置为自己的值。想知道为什么每个 Web 开发人员都讨厌 IE？

[http://jsfiddle.net/q5F2r/32/](http://jsfiddle.net/q5F2r/32/)

# mysql - 如何将 bzip 的输出通过管道传输到 mysql，以将数据直接从 bzip 压缩文件恢复到数据库中

> ID：11080773
> 
> 赞同：17
> 
> 时间：2012-06-18T10:12:02.723
> 
> 标签：mysql, linux, command-line, pipe, database-restore

为了直接以 bz2 格式转储数据库，我尝试使用管道直接压缩转储文件，如下所示：

```
mysqldump -u userName -p myDataBase | bzip2 -c > myDump.sql.bz2 
```

我想做类似的事情来恢复。我可以使用以下 2 个命令来执行此操作：命令 1：

```
bzip2 -d myDump.sql.bz2 
```

命令2：

```
mysql -u userName -p myDataBase < myDump.sql 
```

通缉：现在我想使用管道恢复`myDump.sql.bz2`到数据库`myDataBase`。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-18T18:51:08.533

`bzip2 -dc myDump.sql.bz2 | mysql -u userName -p myDatabase`- bzip2 的 -c 选项使其将输出发送到标准输出，您在创建转储时已经在使用它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-07-01T08:02:47.737

试试看：

```
bzcat dump.sql.bz2 | mysql -u name -p db 
```

# go - 使用 ZeroMQ 在 Go 中处理中断的惯用方式

> ID：11080777
> 
> 赞同：2
> 
> 时间：2012-06-18T10:12:06.933
> 
> 标签：go, interrupt, zeromq

我目前正在学习 Go 和 ZeroMQ，本着这种精神，我正在尝试为[Zguide](http://zguide.zeromq.org)贡献 Go 示例。我在[中断示例](http://zguide.zeromq.org/page%3aall#Handling-Interrupt-Signals)上有点挣扎。我不确定处理问题的惯用方式是什么。

我目前拥有的解决方案如下：我创建一个接收 SIGINT 信号的通道。当它发生时，我在主循环中使用的另一个通道上写一个布尔值来中断。问题是，Recv 是阻塞的，循环永远不会检查循环条件。我通过将 NOBLOCK 常量传递给 Recv 来规避这个问题。但我觉得有一种更好的方法，因为 Recv 在中断时应该返回一个 EINTR（据我所知，它并没有）。你们读者比我更有能力回答这个问题，你怎么看？

为了您的方便，我到目前为止的代码：

```
package main

import (
    "os/signal"
    "os"
    "fmt"
    zmq "github.com/alecthomas/gozmq"
)

func listenForSignals(exit_channel chan bool) {
    signal_channel := make(chan os.Signal)
    signal.Notify(signal_channel)
    <- signal_channel
    fmt.Println("stopping")
    exit_channel <- true
}

func main() {
    exit := make(chan bool)
    exit_signal := false
    go listenForSignals(exit)

    context, _ := zmq.NewContext()
    defer context.Close()

    socket, _ := context.NewSocket(zmq.REP)
    defer socket.Close()
    socket.Bind("tcp://*:5555")

    for exit_signal == false {
      select {
      case exit_signal = <- exit:
        fmt.Println("W: interrupt received, killing server...")
      default:
        msgbytes, err := socket.Recv(zmq.NOBLOCK)
        fmt.Printf("%s.\n", string(msgbytes))
      }
    }

} 
```

**编辑**根据反馈在一定程度上简化了代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:45:30.100

如果您打算使用 select 语句来切换频道，您也应该在频道上返回 socket.Recv 的结果。这也让您可以在 goroutine 上运行 socket.Recv，因此阻塞性质不是问题。

实际上，您可能还应该处理您遇到的错误。您可以通过向整个 shebang 添加另一个频道来做到这一点。

```
func main() {
    ...

    data := make(chan []byte)
    errors := make(chan error)
    go function() {
      for {
        msgbytes, err := socket.Recv(0)
        if err != nil {
          errors <- err
        } else {
          data <- msgbytes
        }
      }
    }()

    for exit_signal == false {
      select {
      case exit_signal = <- exit:
        fmt.Println("W: interrupt received, killing server...")
      case err := <- errors:
        fmt.Println("Receive Error:", err.Error())
      case msgbytes := <- data:
        fmt.Printf("%s.\n", string(msgbytes))
      }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:34:58.003

这看起来有点太复杂了。在 main 中，您可以启动一个等待中断信号的 goroutine：

```
go func() {
    sigchan := make(chan os.Signal, 10)
    signal.Notify(sigchan, os.Interrupt)
    <-sigchan
    log.Println("Application killed !")
    // do things like writing your last will or cursing the killer before you really die        
    os.Exit(2)
}()
// starts the things your application has to do 
```

# php - 如何从自定义博客导入 wordpress 中的标签

> ID：11080778
> 
> 赞同：0
> 
> 时间：2012-06-18T10:12:16.433
> 
> 标签：php, xml, wordpress, rss

我有一个自定义博客，它没有任何导出功能，所以我正在根据 wordpress XML 格式转换博客条目或帖子，

我也成功地导入了条目和图像（这很痛苦，但我设法做到了）但问题出在标签上

我如何制作用于导入标签的 xml 格式，

**注意：**我在 wordpress 中创建了一些带有标签和导出数据的帖子，然后我按照 xml 格式制作了我自己的 xml，wordpress 可以理解，除了标签，一切都很好。

请在这方面提供帮助。

亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:04:47.157

我对类似问题（将 3rd 方数据库转换为 Wordpress 格式）的方法是仔细检查：

[http://code.google.com/p/google-blog-converters-appengine/source/browse/trunk/samples/wordpress-sample.wxr](http://code.google.com/p/google-blog-converters-appengine/source/browse/trunk/samples/wordpress-sample.wxr)

在你的情况下看

```
<channel>
...
<wp:tag><wp:tag_slug>newtag</wp:tag_slug><wp:tag_name><![CDATA[NewTag]]></wp:tag_name></wp:tag> 
```

这定义了标签，您稍后将其附加到博客文章中：

```
 <category domain="tag" nicename="newtag"><![CDATA[NewTag]]></category> 
```

这篇博文还详细解释了 Wordpress 附带的默认 Wordpress 导入器使用的 .wxr 格式（以及 wordpress 本身导出到的）：http: [//ipggi.wordpress.com/2011/03/16/the-wordpress-extended- rss-wxr-exportimport-xml-document-format-decoded-and-explained/](http://ipggi.wordpress.com/2011/03/16/the-wordpress-extended-rss-wxr-exportimport-xml-document-format-decoded-and-explained/)

# jquery - Jquery 库上的 setTimeout 不起作用

> ID：11080780
> 
> 赞同：0
> 
> 时间：2012-06-18T10:12:21.950
> 
> 标签：jquery

我有一个不能与 setTimeout 一起正常工作的画廊。我需要让画廊每隔几秒钟更换一张照片。但是如果我按下指示器，那么我希望它手动更改它。

这是我的 js 文件：

```
var arrayPic = ["/img/gallery/gal1.jpg", 
                "/img/gallery/gal2.jpg", 
                "/img/gallery/gal3.jpg", 
                "/img/gallery/gal4.jpg", 
                "/img/gallery/gal5.jpg", 
                "/img/gallery/gal6.jpg"];
var counter = 0;
var waitTime = 5000;
var transitionTime = 500;
var t;
var time_is_on = 0;

$(document).ready(function () {

    t = setTimeout(function() {

        changeThisPhoto();
        changeIndicator();

    }, 1000);

    $(".countrydd").ykDropdown();
    $(".subjectdd").ykDropdown();

});

function stopTime() {

    clearTimeout(t);
    time_is_on = 0;
}

function changeDefaultIndicator() {

    console.log($("li.active"));
    var thisChild = ($("li.active").index(this)) + 1;

    for (var i = 0; i < arrayPic.length; i++) {
        $("#indi" + i).removeClass();
    }

    $("#indi" + thisChild).addClass("active");

}

function changeIndicator() {

    $(".indicatorslist li").bind("click", function () {

        var thisChild = ($(".indicatorslist li").index(this)) + 1;

        for (var i = 0; i < arrayPic.length; i++) {
            $("#indi" + i).removeClass();
        }

        $("#indi" + thisChild).addClass("active");

        changeThisPhoto(thisChild);

    })

 }

function animatePhotoOut() {

    $(".backgroundImage").animate({

        opacity: 1

    }, transitionTime, function () {
        $(".backgroundImage").delay(waitTime);
        changeThisPhoto();

    })

}

function changeThisPhoto(child) {

    var stepper = 0;

    if (!child) {
        child = -1;
    }

    $(".backgroundImage").stop().animate({
        opacity: 0
    }, transitionTime, function () {

        if (counter == 5) {
            counter = 0;
        } else {
            counter++;
        }

        if (child = -1) {
            stepper = counter;
        }
        else {
            stepper = child;
        }

        $(".backgroundImage").css("background-image", 
                                  "url('" + arrayPic[stepper] + "')");

        changeDefaultIndicator();
        animatePhotoOut();
    })
} 
```

当我单击指示器时它工作得很好，但不适用于 setTimeout() 函数......可能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:20:34.717

`setTimeout`只会运行一次更改。改为使用`setInterval`。

# blackberry - 为什么列表的最后一行被剪掉了？

> ID：11080781
> 
> 赞同：0
> 
> 时间：2012-06-18T10:12:29.117
> 
> 标签：blackberry, datagrid, java-me

我正在开发一个具有预期目标 OS5+ 的黑莓应用程序。

我正在创建一个 GridFieldManager 来显示从 Web 服务获取的数据。第二列数据通常是多行的，所以我将行设置为比标准高。这是我的 GridFieldManager 的代码：

```
//Creation and property settings

GridFieldManager myGrid = new GridFieldManager(myScreenData.getSpese().size(), 3, GridFieldManager.USE_ALL_WIDTH|GridFieldManager.VERTICAL_SCROLL);
        myGrid.setColumnProperty(0,GridFieldManager.AUTO_SIZE, Display.getWidth()/3);
        myGrid.setColumnProperty(1,GridFieldManager.AUTO_SIZE, Display.getWidth()/3);  

        myGrid.setColumnProperty(2,GridFieldManager.AUTO_SIZE, Display.getWidth()/3);
        myGrid.setRowPadding(3);
        myGrid.setMargin(3,0,3,0);
        for(int i=1;i<myScreenData.getSpese().size()-1;i++){
            myGrid.setRowProperty(i, GridFieldManager.FIXED_SIZE, getFont().getHeight()*3);
        }

//title population
        myGrid.insert(new LabelField("DATA"), 0,FIELD_LEFT);
        myGrid.insert(new LabelField("CAUSALE"), 1,FIELD_LEFT);
        myGrid.insert(new LabelField("IMPORTO"), 2,FIELD_LEFT);
//Data population       
        for (int i=0;i<myScreenData.getSpese().size()-1;i++){
            System.out.println("aggiungo "+i+" di "+(myScreenData.getSpese().size()-1));
            SpesaDateAsString mySpesa = (SpesaDateAsString)myScreenData.getSpese().elementAt(i);
            myGrid.insert(new LabelField(mySpesa.getData(),LabelField.FIELD_LEFT|LabelField.FOCUSABLE),0+((i+1)*3),FIELD_LEFT);
            myGrid.insert(new LabelField(mySpesa.getCausale(),LabelField.FIELD_LEFT|LabelField.FIELD_VCENTER),1+((i+1)*3),FIELD_LEFT);
            myGrid.insert(new LabelField(mySpesa.getImporto(),LabelField.FIELD_LEFT),2+((i+1)*3),FIELD_LEFT);

        }
        System.out.println("aggiungo la tabella");
        result.add(myGrid); 
```

这里的问题是**list 的最后一行被 cut**。这是屏幕截图：

![黑莓风暴模拟器截图](../Images/93f32a4e821005015214cf31439f2e5a.png)

有谁知道该怎么做？为什么会这样？

我已经尝试了行属性（FIXED、AUTO、PREFERRED ... ETC）的所有可能的参数组合以及填充和边距的所有可能组合。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:26:26.537

我认为问题出在这一行：

```
for (int i=0;i<myScreenData.getSpese().size()-1;i++){ 
```

为什么你的限制`myScreenData.getSpese().size()-1`和测试是严格的`<`？您要么使用小于或等于运算符，要么您的限制应该是`myScreenData.getSpese().size()`

# r - 重用包括使用 knitr .Rmd 绘图的块

> ID：11080793
> 
> 赞同：7
> 
> 时间：2012-06-18T10:13:41.647
> 
> 标签：r, knitr

当重用包含绘图的块时，未正确引用绘图，即它们对于两个块来说是相同的，尽管它们应该是不同的。我能做些什么呢？

```
## Test

```{r}
col <- "black"
```

```{r chunk1}
plot(0, col=col)
```

```{r}
col <- "red"
```

```{r chunk1}
``` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T13:58:14.450

您应该使用不同的标签，例如

```
```{r chunk2, ref.label='chunk1'}
``` 
```

见[http://yihui.name/knitr/demo/reference/](http://yihui.name/knitr/demo/reference/)

# hbase - Cloudera 4 - Hdfs / Hbase - 通过专用网络中的第二个 NIC 进行内部通信

> ID：11080794
> 
> 赞同：2
> 
> 时间：2012-06-18T10:13:48.230
> 
> 标签：hbase, hdfs, cloudera, nic

我们使用 Cloudera Manager 在测试集群上设置了 CDH4（hdfs、hbase、hue、mapreduce、oozie 和 zookeeper）。一切正常，除了我们似乎无法弄清楚如何使节点在专用网络中通过 eth1 进行通信，同时仍从外部通过 eth0 访问管理器。关于在哪里配置的任何建议？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:59:04.963

通过经理，我假设您指的是 HBase 主控。您应该知道连接到 HBase 的客户端连接到区域服务器（它们连接到 ZooKeeper quorom，这反过来将它们指向区域服务器）。

您可以通过 hbase-default.xml 中的设置和设置让集群使用一个网卡而不是另一个网卡（`hbase.master.dns.interface`请`hbase.regionserver.dns.interface`参阅HBase [Book 中的配置文件](http://hbase.apache.org/book/config.files.html)）`hbase.zookeeper.dns.interface`

但是，如上所述，这不会解决您的问题。我想您可以使用 REST 或 ThriftServer 作为外部 API，然后通过内部网络访问 HBase

# java - DriverManager.registerDriver() 方法的实际参数类型是什么？

> ID：11080795
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:13:55.390
> 
> 标签：java, jdbc, driver

是驱动类JdbcOdbcDriver的驱动对象吗？如果是，那么它的参数签名是什么？如果它是驱动程序类的对象，那么为什么我们需要以这种方式编写参数：`(new sun.jdbc.odbc.JdbcOdbc Driver());`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:09:53.660

作为最终用户，您通常不需要对该`DriverManager.RegisterDriver()`方法执行任何操作。- 实现本身使用`Driver`它来在加载其类时注册自己。

这条规则有一些例外（不自行注册的驱动程序），但这些情况通常不会发生（如果有的话），如果发生的话，您会特别知道您需要自己使用此方法。

对于 Java 6 或更高版本中的 JDBC 4.0 兼容驱动程序，您无需执行任何操作：驱动程序将自动加载和注册。

对于 JDBC 3.0 或更早版本的驱动程序，或者在 Java 5 或更早版本中，您只需使用

```
Class.forName("<FQN of driver class>"); 
```

如果这样做，驱动程序将向 DriverManager 注册自己。

# phpunit - 在 simpletest 测试用例中调用两个断言函数

> ID：11080797
> 
> 赞同：3
> 
> 时间：2012-06-18T10:13:59.460
> 
> 标签：phpunit

我的模型（codeigniter 框架）中有一个函数，它在 cookie 中设置两个值。

我需要为此编写单元测试。所以在这种情况下，我需要调用两个 assertEqual() 函数以确保设置了两个 cookie。

有没有人知道在同一个测试用例中调用两个断言函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:44:07.963

```
// For example
public function testMyTest()
{
    $foo = 'test';
    $this->assertTrue(is_string($foo));
    $this->assertEquals('test', $foo);
    $this->assertEquals(4, strlen($foo));
} 
```

见文档:: [http://www.phpunit.de/manual/3.7/en/writing-tests-for-phpunit.html](http://www.phpunit.de/manual/3.7/en/writing-tests-for-phpunit.html)

# asp.net - 如何使用可包含大量数据的报表查看器生成报表

> ID：11080800
> 
> 赞同：0
> 
> 时间：2012-06-18T10:14:11.407
> 
> 标签：asp.net, sql-server, reportviewer

我想显示一个报告，该报告将生成为由网格视图选择的员工。如果我选择“全选”复选框，则所有员工数据都应在报告中通过，如果我随机选择人员，则报告中将仅生成该人员数据。请帮帮我。我为单身员工做了报告，但对此我没有任何想法。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:00:25.760

There is a property called [setParameters](http://msdn.microsoft.com/en-us/library/ms252663.aspx) in report viewer which is used to pass the data from .NET application to your report viewer .The below links may help you

[Pass Report Parameters](http://www.csharpcourses.com/2008/06/how-to-pass-parameters-to-reporting.html)

[Cascading Parameters](http://msdn.microsoft.com/en-us/library/aa337169%28SQL.105%29.aspx)

# javascript - 从本地存储中获取最后一个变量（按时间）

> ID：11080801
> 
> 赞同：2
> 
> 时间：2012-06-18T10:14:12.023
> 
> 标签：javascript, local-storage

我想从本地存储中获取 10 个最后的变量。“最后 10 个”是指当时最后添加的 10 个，但我找不到这样做的原因。

例如这段代码：

```
for(var i=0; i<=window.localStorage.length-1; i++){
    var itemKey = localStorage.key(i);
    console.log(itemKey)
} 
```

将返回本地存储中所有变量的名称，但绝对是随机顺序的。

还有另一种方法可以查看我们在本地存储中的内容：

```
console.log(window.localStorage); 
```

和..当我使用 Chrome 时，我会看到所有变量按变量名排序。很好尝试谷歌浏览器，但我需要按时间排序。

那么，有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:15:45.077

您需要以某种方式跟踪插入元素。例如，您可以使用某种链接列表来跟踪插入顺序。这就是 Java`LinkedHashMap`跟踪插入顺序的方式，这也应该在这里工作。据说，我不知道 JS 中有一个好的 Linked List 实现，但是找到一个（或自己编程）应该不会太难。

# xpages - 创建动态 Xpage

> ID：11080803
> 
> 赞同：0
> 
> 时间：2012-06-18T10:14:12.990
> 
> 标签：xpages

我已经看到一些自动生成 xpages 的工具，从现有的莲花设计（表单和视图）......使用 DXL 导出器和 XML 转换或任何东西。

由于我是 Xpage 的新手，我很想知道如何动态创建 Xpage？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:04:23.093

没有办法（至少在没有大量黑客攻击的情况下）无法动态创建 XPage。XML 只是设计人员创建的 java 源代码的“源代码”，然后在您构建应用程序时进行编译。

由于 XPage 最终是 JSF 的实现，因此您可以编写 Java 类来在运行时操纵组件树以注入控件等。但这不是一项简单的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:26:26.263

XPage 只是扩展名为 .xsp 的文件中的 XML，这里没有技巧，只需将正确的 XML 输出到文件。这些工具会将现有控件转换为 XPages 控件，或者在已经可以使用它们的地方，只需将它们包装在我想象的容器中。

然而，最好的方法是手动编写这些代码，因为依靠这些工具为您创建 XPages 会失去很多 XPages 的好处。这些工具通常用于需要很长时间才能重写或依赖于遗留代码等的大规模应用程序。

一个类似的问题被问到如何做到这一点，我在这里回答：

[如何以编程方式将表单转换为 xpages？](https://stackoverflow.com/questions/10278614/how-to-convert-forms-to-xpages-programatically/10278851)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:54:21.767

如果您是 XPages 的新手，我强烈建议您在尝试构建将动态获取表单/视图并即时转换为 XPages 的东西之前加快构建 XPages 的速度。那些做过这类事情的人已经积累了相当多的知识，比如构建 XPages 应用程序和实际执行所有代码的 Java 类，以及了解哪些客户端功能可以在 XPages 中完成和不能完成以及如何解决它。以 @Prompt 或 @DialogBox 或 LotusScript 等效项为例。这需要运行 SSJS，然后等待用户的响应，然后再继续执行代码。这可能超出了许多有经验的 XPages 开发人员的能力，更不用说 XPages 的新手了。如果你有相当多的 Java 经验，你可能会有头脑，

# excel - 如何在 Excel 中获取动态范围列参考 :)

> ID：11080807
> 
> 赞同：2
> 
> 时间：2012-06-18T10:14:43.853
> 
> 标签：excel, dynamic, range

我在 Excel 工作表中有一个动态范围。

> `DATA_TABLE =OFFSET(DATA!$B$3,0,0,COUNTA(DATA!$B:$B)-1,0)`

我想获取第三个整个列数组的引用以在其中查找一个值。:) 我怎样才能得到这个？

> `=VLOOKUP("Some_value_here",COLUMN(DATA_TABLE -s third column here ),1,) ??????`

我怎样才能做到这一点？:)

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:49:49.650

您可以使用 INDEX 获取多列范围的第 n 列

`=INDEX(range,0,n)`

[0 表示所有行]

所以在你的 VLOOKUP 中会是这样的

`=VLOOKUP("Some_value_here",INDEX(DATA_TABLE,0,3),1,)`

如果您使用 VLOOKUP 来简单地验证该值是否存在，那么 MATCH 可能会更好......

# php - 并非所有参数都像链接帖子一样发送到 fb

> ID：11080808
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:14:47.590
> 
> 标签：php, facebook, facebook-graph-api

嗨，我正在尝试将 facebook like 按钮添加到我的 html 电子邮件通讯中。我发现这只能在 2 单击过程中完成。使用这种方法：

```
<a href="http://www.facebook.com/plugins/like.php?href=<?=$config['SITE_URL']?>Home  /newsletter_view.php?id=<?=$NewsLetterID?>&itemId=<?=$ItemRow->ID?>;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=80 target=">
   <img title="Facebook Like Button" src="<?=$config['SITE_URL'].'Images/like.png'?>"  alt="" />
</a> 
```

在我为 href 选择的链接中，我有 id 和 item id 。但是当我点击这个like按钮并带我到like.php页面时，我再次点击like并在facebook上看到我的帖子。我发现我只喜欢带有参数 id 的链接。项目 ID 被省略。这是为什么 ？

还有一件事，我们可以改变like.php 页面的外观吗？有点烦人是空的，只有左上角的一个like按钮。我可以将它作为弹出窗口打开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:23:25.763

> 这是为什么 ？

因为您忘记正确地对您的 URL 进行**urlencode**（在这种情况下它只是另一个链接中的一个*参数）。*

除此之外，你的整个 a 元素看起来有点乱。为什么在 href 属性*内部*`Home /newsletter_view.php?`出现，为什么在它的末尾？*`target=`*

 *您确定您至少了解 HTML 语法的基础知识吗？因为对我来说，看起来你没有，根本没有。*

# wcf - WCF - 为什么“CustomAuthorizationPolicy”在每个操作上都创建一个“CustomPrincipal”？

> ID：11080811
> 
> 赞同：3
> 
> 时间：2012-06-18T10:14:55.130
> 
> 标签：wcf, authorization, wcf-authentication

我正在开发一个带有自定义 USERNAME-PASSWORD 验证器的 WCF 服务。

我有一个继承自*UserNamePasswordValidator的**CustomUserNameValidator*。

 *我还使用了继承自*IAuthorizationPolicy的**CustomAuthorizationPolicy*。

 *自定义授权策略的*Evaluate*方法如下所示：

```
 // this method gets called after the authentication stage
    public bool Evaluate(EvaluationContext evaluationContext, ref object state)
    {
        // get the authenticated client identity
        IIdentity client = GetClientIdentity(evaluationContext);

        // set the custom principal
        evaluationContext.Properties["Principal"] = new CustomPrincipal(client);

        return true;
    } 
```

正如您所看到的 - 我在每次调用*Evaluate时创建一个新的**CustomPrincipal*对象（这在服务上调用的每个操作中都完成）。

 *这是我的*CustomPrincipal*构造函数的样子：

```
 public CustomPrincipal(IIdentity identity)
    {
        IdentityObject = identity;
        GetUser(IdentityObject.Name);
        EnsureRoles();
    } 
```

GetUser和*EnsureRoles方法**转到*SQL 数据库，以检查用户的角色。

我的问题是 - 为什么每次操作都必须发生这种情况？

为什么*CustomPrincipal*的创建发生在每个操作上，而不仅仅是在客户端第一次连接到服务时？

对我来说，为什么对于服务上调用的每个操作都没有意义 - *“CustomPrincipal”*将进入数据库并重新获取用户，以及他的所有角色......

**[更新]** 这是我的查询服务界面的样子：

```
[ServiceContract(Namespace = "http://www.my1fj.com/QueryService/2012/", SessionMode = SessionMode.Required, ProtectionLevel = ProtectionLevel.EncryptAndSign)]
public interface IQueryService
{
     // Some operations
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:06:56.497

我希望您的服务是按呼叫服务，并且在按呼叫服务中，每次呼叫都会进行身份验证检查，但对于按会话服务，检查仅在会话开始时进行（如果打开了安全协商）。

..从[这里](https://stackoverflow.com/questions/9588265/understanding-wcf-windows-authentication)

而不是每次都可以在服务中缓存它们时访问数据库。

**更新：**

服务是每次调用/每次会话/单例，由应用于服务类的`InstanceContextMode`属性决定。`ServiceBehavior`

前任。

```
[ServiceContract]
interface IMyContract {...}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)] 
class MyService : IMyContract {...} 
```

要了解更多信息，请查看此[帖子](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)。要了解有关该`InstanceContextMode`物业的更多信息，请查看[此](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.instancecontextmode.aspx)。***

# javascript - 关于 jQuery 的滑动 Tab 跳转

> ID：11080814
> 
> 赞同：0
> 
> 时间：2012-06-18T10:15:09.650
> 
> 标签：javascript, jquery

我在我的网站上构建了一个小的 jquery 滑动 div，当您将鼠标悬停在选项卡上时，div 从右侧滑入，并且在鼠标离开事件时，div 滑回视图之外。但是，我遇到的问题是，如果您很快将鼠标移到选项卡上然后关闭，然后继续重复此操作，则 div 会反复滑入和滑出；无论如何我可以阻止这个吗？

谢谢

```
$('.pillars-wrapper').mouseenter(function() {
$('.handle').fadeOut();
    $('.tab-wrapper').animate({
    right: '+=175'
})
});

$('.pillars-wrapper').mouseleave(function() {
$('.tab-wrapper').animate({    
    right: '-=175'
});
$('.handle').fadeIn()
}); 
```

这是一个小提琴...

[http://jsfiddle.net/FXAcP/](http://jsfiddle.net/FXAcP/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:20:11.140

这是我如何解决此问题的示例：

```
$("#menu-balticpoint li").mouseover(function() {

                var id = $(this).attr('id');
                var width = $("#"+id+" a").width();
                $("#"+id+" ul li a").css("width", width+"px");
                $("#"+id+" ul").slideDown('fast').show();
        $(this).hover(function() {
        }, function(){
            $("#"+id+" ul").fadeOut('slow').hide().stop(true, true); //When the mouse hovers out of the subnav, move it back up
        });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:21:09.523

尝试添加 .clearQueue()。

例如，而不是

```
$('.tab-wrapper').animate({ 
```

做

```
 $('.tab-wrapper').clearQueue().animate({ 
```

[你可以在这里](http://api.jquery.com/clearQueue/)阅读更多关于它的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:22:32.500

您可以提供时间以进行适当的动画移动。

例如，要降低滑动速度，请在 animate 中使用 'slow' 参数。

```
$('.tab-wrapper').animate({
      right: '-=175'
  },'slow'); 
```

您可能需要在此处阅读jquery 上的[动画文档](http://api.jquery.com/animate/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:27:23.747

**演示** [http://jsfiddle.net/wVMu6/11/](http://jsfiddle.net/wVMu6/11/)

对不起，伙计，对于您的旧帖子-我在 2 分钟后回复了但意识到它已被删除，

另请注意，你有`.tab-wrapper`一个主容器，我想我会提到你是否会遇到一些随机的 CSS 问题。

希望这会有所帮助，干杯！B-)

**代码**

```
 $('.pillars-wrapper').mouseenter(function() {
     $('.handle').fadeOut().stop();
    $('.tab-wrapper').animate({
        right: '+=175px'
    }, "slow").stop(true,true);

}).mouseleave(function() {

    $('.tab-wrapper').animate({
        right: '-=175px'
    }, "slow").stop(true,true);
    $('.handle').fadeIn().stop();

});​ 
```

# java - jcreator中如何设置jdk路径

> ID：11080815
> 
> 赞同：1
> 
> 时间：2012-06-18T10:15:25.840
> 
> 标签：java, jcreator

我已经安装了jdk *1.7*`C:\jdk1.7.0 directory`和*JCreator*。`C:\Program Files directory`我在 JCreator 中设置了正确的 jdk 路径。但是，当我尝试在其中执行 java 程序时，我显示了以下消息：

```
 --------------------Configuration: <Default>--------------------
Error : Invalid path, "C:\Program Files\Java\jdk1.7.0_04\bin\javac.exe" -g -classpath C:\Users\USER\Documents -d C:\Users\USER\Documents C:\Users\USER\Documents\A.java 
```

这背后的原因是什么？请详细告诉我以及解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:56:00.117

我通过删除`Configure`-> `Options`->中以前的 Java 配置文件解决了这个问题`JDK Profiles`。

删除其中的所有内容并创建一个新的新配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:46:05.047

当以下可执行文件不存在时会显示错误。

```
C:\Program Files\Java\jdk1.7.0_04\bin\javac.exe 
```

确保您已`jdk`安装可执行文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-05T09:00:42.427

```
Error : Invalid path, "C:\Program Files\bin\javac.exe" -g -classpath   
"C:\Users\HP PAVILION\Desktop\java" -d "C:\Users\HP PAVILION\Desktop\java"   
"C:\Users\HP PAVILION\Desktop\java\das.java" 
```

过程完成。

**错误：**无法找到或加载主类 das

过程完成。

# graphics - 图形g调用

> ID：11080816
> 
> 赞同：-3
> 
> 时间：2012-06-18T10:15:41.070
> 
> 标签：graphics, java-me, midp, lcdui

在我的应用程序中，我在项目中导入了 1 个 jar 文件。现在我想访问包含参数 Graphics(g) 的类（jar 文件）的一种方法。我希望在我的应用程序的 startApp() 中访问此方法，但我不能直接调用此方法，因为不支持 Graphics(g)。请帮我。

代码流程：

```
// 1.class

    public void drawscreen(Graphics g)
    {
    }

// 2.class

    public void startApp()
    {
    1.class.drawscreen()--->here graphics is not supported.
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:35:33.903

您可以创建一个可变图像并将其图形传递给 drawScreen 方法：

```
    图片 img = Image.createImage(100/*width*/, 100/*height*/);
    class1Instance.drawScreen(img.getGraphics());

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:33:08.707

在`startApp`你必须设置某种类型`Canvas`的`Display`：

`Display.setCurrent(canvas)`.

您`drawscreen()`方法中的绘图代码属于该画布。`Graphics`在那里，您可以通过调用来访问上下文`getGraphics()`。

老实说，如果您现在不了解 Java ME 的一些基础知识，那么您应该学习一些基础知识。

# c# - SessionEndingEvent 没有被调用

> ID：11080824
> 
> 赞同：0
> 
> 时间：2012-06-18T10:16:46.720
> 
> 标签：c#, .net, events, logout, shutdown

这是我的 C# 代码：

```
 void main()
    {
        SystemEvents.SessionEnding += new SessionEndingEventHandler(SystemEvents_SessionEnding);
    }

    void SystemEvents_SessionEnding(object sender, SessionEndingEventArgs e)
    {
        Console.WriteLine(e.Reason);
    } 
```

不知何故，没有输出。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:23:51.033

[http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx)（示例 2）几乎解释了有关 Windows 服务中 SystemEvents 的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:22:56.727

根据 MSDN中的[备注部分](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx)：

> 如果您在 Windows 窗体中使用 SessionEnding 来检测系统注销或重新启动，则没有确定的方法来确定 Closing 事件是否会在此事件之前触发。

因此，您不应依赖此事件或以某种方式处理`Closing`事件来满足您的需求。

**更新**。更重要的是：

> 控制台应用程序不会引发 SessionEnding 事件。

# jquery - Jquery删除和更改html标签

> ID：11080827
> 
> 赞同：1
> 
> 时间：2012-06-18T10:17:06.010
> 
> 标签：jquery

我的网站上有几个超链接。我想要的是如果它们与给定条件匹配，则删除 a href html 标记。

例子

如果 href 是 example.com 那么，超链接应该被解散并且`<a></a>`标签应该消失

我一直在使用以下语句，

```
$("a[href='http://www.example.com']").removeAttr("href"); 
```

href 将被删除，但`<a>`仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:18:09.177

您可以使用[.remove](http://api.jquery.com/remove/)删除整个元素。

```
$("a[href='http://www.example.com']").remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:19:51.380

要保留链接的文本，但删除链接本身：

```
$("a[href='http://www.example.com']").replaceWith(function() {
    return $(this).text();
}); 
```

`.html()`如果您希望保留链接中的其他 HTML 标记，请改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:17:49.497

要删除锚元素，请尝试以下操作：

```
$("a[href='http://www.example.com']").remove(); 
```

有关更多信息，请参阅[`.remove()`doco](http://api.jquery.com/remove/)。

编辑：要将锚元素替换为其内容，请尝试以下操作：

```
$("a[href='http://www.example.com']").replaceWith(function() {
    return $(this).html();
}); 
```

该[`.replaceWith()`方法](http://api.jquery.com/replacewith/)可以满足您的期望。如果您向它传递一个函数，那么将为每个匹配元素调用该函数，`this`并将当前元素替换为函数的返回值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T10:17:57.910

```
$("a[href='http://www.example.com']").remove(); 
$("a[href='http://www.example.com']").unwrap(); -> also check this :D 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T10:24:53.253

最好的方法是使用[`contents`](http://api.jquery.com/contents)and [`unwrap`](http://api.jquery.com/unwrap)：

```
$("a[href='http://www.example.com']").contents().unwrap(); 
```

这说：

*   找到与选择器匹配的所有链接
*   获取他们所有的子节点
*   从父节点解开子节点，即`a`用其子节点替换元素

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T10:23:30.457

**演示** [http://jsfiddle.net/3utk7/](http://jsfiddle.net/3utk7/)

**代码**

```
$('a').each(function() {
    var foo = $(this).attr("href");
    if (foo == "http://www.example.com") {
        $(this).remove();

    }
});​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T07:41:31.433

您可以使用以下命令删除整个标签：

```
$("a[href='http://www.example.com']").find().remove(); 
```

# c# - 如何使用 HTTP 处理程序在网页上显示 System.Drawing.Image？

> ID：11080833
> 
> 赞同：0
> 
> 时间：2012-06-18T10:17:20.073
> 
> 标签：c#, asp.net, image-processing

我有一个控件，它返回字符串和 System.Drawing.Image 类型的字典。我想遍历字典并输出一个显示每个键值对中包含的图像的 ASP 图像控件。我知道这需要通过 HTTP 处理程序来完成，但不确定如何去做。假设图像需要转换为字节数组，然后作为处理程序的输出流返回，图像或字节数组如何作为处理程序上下文的一部分传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:51:59.557

网络上的大多数示例都将 id 传递给 ashx 处理程序；处理程序路径与 id 一起设置为图像控件的源。在大多数情况下，对处理程序的每个请求都将访问数据库并获取图像，进行处理并渲染图像。

但是，在您的情况下，您似乎已经有了图像字典（因此您需要一种方法将该信息传递给处理程序）。解决此问题的一种方法是将图像缓存为内存流，在 ashx 处理程序中，您可以访问 cahced 项目并稍后清除缓存。这已经[在这里讨论过](https://stackoverflow.com/questions/1346519/streaming-byte-to-image-in-asp-net-c-sharp)；但不是优雅的解决方案。

您可能还想查看[Scott Hanselman 的这篇博客文章](http://www.hanselman.com/blog/ASPNETFuturesGeneratingDynamicImagesWithHttpHandlersGetsEasier.aspx)，他在其中谈到了对`<asp:image/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:24:24.860

您可以调用[Image.Save](http://msdn.microsoft.com/en-us/library/ms142147.aspx)方法。

```
using(MemoryStream ms = new MemoryStream())
 {
   image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
   ms.WriteTo(context.Response.OutputStream);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:27:01.593

您需要正确返回 Content Type 和 Stream，请参阅此 [链接以供参考](http://www.c-sharpcorner.com/uploadfile/desaijm/httphandlersforimages11152005062705am/httphandlersforimages.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:28:40.487

在这里，我假设您将字典对象绑定到转发器，并且 HttpHandler 名称是 imageHandler。因此，一旦绑定了字典对象，您将获得类似

`<ItemTemplate> <asp:Image id="image1" runat="server" ImageUrl='<%# "~/imageHandler.ashx?k=" + Eval("key")%>' /> </ItemTemplate>`

在您的 httphandler 中读取将为您提供密钥的查询字符串，然后您可以从字典中获取 system.drawing.image 之后您可以将其转换为 bytearray 并继续进行。

您可以进一步重构您的代码，以便您可以将所有键值作为列表或枚举获取并绑定它，然后在 httphandler 中查询数据库。

`Response.Write(byte array) and response.contenttype= "give the correct content type"`

希望这可以帮助。

# action - 如何以编程方式从当前问题中获取过渡名称？

> ID：11080836
> 
> 赞同：0
> 
> 时间：2012-06-18T10:17:42.683
> 
> 标签：action, jira, transition

我想在使用 api 将一种状态更改为另一种状态时获取转换名称。

例如，我想在解决未解决的问题时获取“解决”操作名称，并将状态更改为“已解决”

我的 jira 版本是 jira 4.4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:13:19.087

如果您使用 API，则可以使用 getAvailableActions。

**RemoteNamedObject[] getAvailableActions(java.lang.String token, java.lang.String issueKey) throws RemoteException** 返回可应用于问题的可用操作。

**参数：** token - SOAP 身份验证令牌。issueKey - 获取操作的问题。

**返回：** 可应用于问题的可用操作

**抛出：** RemoteException - 如果在此操作期间发生了一些戏剧性的事情

[Jira Soap API 文档](http://docs.atlassian.com/rpc-jira-plugin/4.4/com/atlassian/jira/rpc/soap/JiraSoapService.html#getAvailableActions%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:40:48.807

根据您所处的环境，有不同的方法可以做到这一点，比如这篇文章建议 [http://jira.10933.n7.nabble.com/How-to-get-transition-name-from-current-issue-td18047.html](http://jira.10933.n7.nabble.com/How-to-get-transition-name-from-current-issue-td18047.html)

在 Behaviors 插件后面，您可以使用 getFieldById("action").getFormValue() 检索转换 ID

问候

# facebook-opengraph - 如何在 Facebook 页面上推送打开的图形对象？

> ID：11080842
> 
> 赞同：1
> 
> 时间：2012-06-18T10:18:09.773
> 
> 标签：facebook-opengraph, facebook-page

我有一个应用程序，其中包含经过验证的开放图形操作，可用于我的网站。我想在 facebook 页面上而不是在用户时间轴上发布这些操作。这是我使用的请求：

```
POST https://graph.facebook.com/{my page id}/my-app:post?access_token={page access token}&action=http://mywebsite/myaction 
```

Facebook API 向我返回此错误：

```
["message"]=>string(30) "An unknown error has occurred."
["type"]=>string(14) "OAuthException" 
```

这是正常的吗？是否可以在粉丝页面上发布开放图形操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:26:04.963

> 是否可以在粉丝页面上发布开放图形操作？

行动应该由真实的人来执行。

有一个*页面*“看电影”或“烹饪食谱”等根本没有多大意义。

# javascript - 在jquery中用常量声明变量

> ID：11080843
> 
> 赞同：0
> 
> 时间：2012-06-18T10:18:13.897
> 
> 标签：javascript, jquery, variables

对不起，伙计们，不知道如何用这个词。仍在学习 jquery 并搜索了答案，但没有找到任何东西。

在声明这个变量时，我想将这两个部分加在一起，但我不知道如何。

```
 var link = $'page.html' + (this).attr('rel'); 
```

这是我的尝试，但显然它不起作用。

我正在尝试使变量读取“page.html rel > *”所以它总是会引用页面但是我可以在 rel 中存储不同的 div id 并将它们传递给 .load()

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:20:51.613

如果我对您的理解正确，那么您已经很接近了：

```
var link = 'page.html ' + $(this).attr('rel') + ' > *'; 
```

这将包装一个 jQuery 实例`this`（我猜这是在事件处理函数中？），`rel`从该元素中检索属性，并将其放在`'page.html '`它的前面和`' > *'`后面。所以如果`rel`是`"#foo"`，你最终会得到`page.html #foo > *`.

如果`rel`没有`#`，请务必添加它，例如：

```
var link = 'page.html #' + $(this).attr('rel') + ' > *'; 
```

不过，我不确定你是否真的想要这个`' > *'`部件，如果你打算将它与`load`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:23:30.407

这是你想做的吗？

```
$('#your_link').click(function() {
  $this = $(this);
  $('#content').load($this.attr('url') + ' ' + $this.attr('rel') + ' > *');
  return false;
}); 
```

# asp.net-mvc - 使用 JQuery 在 ASP.NET MVC 中以不同的间隔重新加载两个部分视图

> ID：11080844
> 
> 赞同：0
> 
> 时间：2012-06-18T10:18:23.313
> 
> 标签：asp.net-mvc, jquery

我正在使用 ASP.NET MVC3 开发仪表板，需要有两个 div，每个 div 都包含一个局部视图，以不同的时间间隔刷新数据。

因此，包含“PartialOverview”的 div“results”在 1 分钟刷新，包含“PartialOverviewRainfall”的 div“rain”在 15 分钟刷新。

引用两个部分视图/div 的索引页是我放置 JQuery 代码的位置。当我只使用一个 div 时，它可以工作，“PartialOverview”是显示的大部分，但我似乎无法正确地包含另一个 div 的代码。

这是我的代码：

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#results").load("/EDM/Index");  
    setInterval(function() {
        $("#results").load("/EDM/Index");
    }, 60000); //Refreshes every 60 seconds  
    $.ajaxSetup({ cache: false });  
 }); 
</script> 

<div id="rain">
  @Html.Partial("PartialOverviewRainfallList")
</div>
<div id="results">
  @Html.Partial("PartialOverviewList")
</div> 
```

有没有办法调整 javascript 代码以包含两个 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:20:52.453

`setInterval`您可以为其他部分添加另一个：

```
<script type="text/javascript">
    $(document).ready(function() {
        window.setInterval(function() {
            $("#results").load("/EDM/Index");
        }, 60000); //Refreshes every 60 seconds  

        window.setInterval(function() {
            $("#rain").load("/EDM/Rain");
        }, 900000); //Refreshes every 15 minutes

        $.ajaxSetup({ cache: false });  
    }); 
</script> 
```

或尝试使用更通用的解决方案（例如使用 HTML5`data-*`属性）：

```
<div id="rain" class="refresh" data-interval="60000" data-url="@Url.Action("rainr", "edm")">
    @Html.Partial("PartialOverviewRainfallList")
</div>
<div id="results" class="refresh" data-interval="900000" data-url="@Url.Action("index", "edm")">
  @Html.Partial("PartialOverviewList")
</div> 
```

进而：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.refresh').each(function() {
            var element = $(this);
            var url = element.data('url');
            var interval = element.data('interval');
            (function(element, url, interval) {
                window.setInterval(function() {
                    element.load(url);
                }, interval);
            })(element, url, interval);
        });
        $.ajaxSetup({ cache: false });  
    }); 
</script> 
```

现在你甚至可以把它放到它所属的一个单独的 javascript 文件中。

# css - 添加了 jQuery 填充后，HTML 更新的行为很奇怪。（铬合金）

> ID：11080845
> 
> 赞同：1
> 
> 时间：2012-06-18T10:18:25.140
> 
> 标签：css, html, google-chrome, layout

我正在制作一个完全灵活的、基于百分比的布局。

它在左侧有一个导航栏，可以从完整模式切换到小模式 - 为了实现这一点（因为导航是绝对定位的），我在主要内容的包装 div 上添加填充，作为一种方式调整内部内容的大小。

我添加了一个快速的 jQuery 函数来执行此操作，但是当我在 Chrome 中单击它时，主要内容会脱离它的容器 - 容器不会调整回 100% 宽度。

这似乎只发生在 Chrome 中——有人知道为什么，或者我能做些什么来对付它吗？

该网站可以在这里找到：http: [//dev.barringtonmedia.co.uk/test/layout.html](http://dev.barringtonmedia.co.uk/test/layout.html)

可以在以下图像中看到问题： ![Chrome - 不正确的行为 - 白色边框框已脱离红色框](../Images/e2c4555f681e81c4ba46363d2a75fd10.png)

![Firefox - 正确的行为，没有发生突破。](../Images/43610f59a3761254e7b17f3b843dc3fe.png)

用它创建了一个 jsfiddle，如果你喜欢玩的话：http: [//jsfiddle.net/Dycd4/](http://jsfiddle.net/Dycd4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:22:55.597

我已经多次看到这个问题了。

我在这里的回答中的修复工作：[jQuery CSS rendering - works in Firefox, not in Chrome](https://stackoverflow.com/questions/8927478/jquery-css-rendering-works-in-firefox-not-in-chrome/8928389#8928389)

在这里它适用于您的代码：http: [//jsfiddle.net/thirtydot/Dycd4/1/](http://jsfiddle.net/thirtydot/Dycd4/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:06:11.947

不是关于渲染问题背后原因的真正答案，而是一个建议：您实际上可以使用 css 媒体查询而不是 jQuery 来控制不同宽度的 css。

纯粹主义者的 W3C 链接：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

MDN 上的实践指南：[https ://developer.mozilla.org/en/CSS/Media_queries](https://developer.mozilla.org/en/CSS/Media_queries)

# azure - Azure 容器

> ID：11080847
> 
> 赞同：5
> 
> 时间：2012-06-18T10:18:29.533
> 
> 标签：azure, azure-storage

谁能告诉我，为什么我们不能在 azure storage 的容器中创建一个容器？以及任何处理方法，我们需要在天蓝色存储中创建目录层次结构？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T10:45:15.027

您不能在容器中创建容器，因为 Windows Azure 根本不支持分层容器（您应该将容器视为像**C:\**磁盘一样的“磁盘驱动器”）。但是通过**CloudBlobDirectory**类支持使用目录。这是[Neil 博客](http://convective.wordpress.com/2009/11/23/blobs-%E2%80%93-azure-storage-client-v1-0/)中的一个示例：

```
protected void GetDirectoryList(String topLevelDirectoryName, String subDirectoryName)
{
    CloudStorageAccount cloudStorageAccount =
       CloudStorageAccount.FromConfigurationSetting(“DataConnectionString”);
    CloudBlobClient cloudBlobClient = cloudStorageAccount.CreateCloudBlobClient();

    CloudBlobDirectory topLevelDirectory = cloudBlobClient.GetBlobDirectoryReferencetopLevelDirectoryName);

    CloudBlobDirectory subDirectory = topLevelDirectory.GetSubdirectory(subDirectoryName);

    IEnumerable<IListBlobItem> blobItems = subDirectory.ListBlobs();
    foreach (IListBlobItem blobItem in blobItems)
    {
        Uri uri = blobItem.Uri;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-30T20:28:51.517

下面是我的班级（用于管理 blob）在工作项目中的 azure 容器的工作代码。
请注意，您对容器中文件夹和容器中 blob 文件的命名应该是小写字母，否则您可能会遇到错误

```
 using System;
 using System.Collections.Generic;
 using System.Configuration;
 using System.IO;
 using System.Linq;
 using System.Web;
 using Microsoft.WindowsAzure;
 using Microsoft.WindowsAzure.Storage;
 using Microsoft.WindowsAzure.Storage.Auth;
 using Microsoft.WindowsAzure.Storage.Blob;

  namespace XXXXXXXXXXX
{

public class Blob
{

    private CloudBlobContainer Prerequisite(string userId)
    {
        var con =   ConfigurationManager.AppSettings["StorageConnectionString"];
        // Retrieve storage account from connection string.
        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
            con);

        // Create the blob client.
        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

        // Retrieve reference to a previously created container.
        CloudBlobContainer container = blobClient.GetContainerReference(userId);

        return container;
    }

    public void CreateUserContainerIfNotExisting(string userId)
    {
        CloudBlobContainer container = Prerequisite(userId);

        // Create the container if it doesn't already exist.
        container.CreateIfNotExists();

        //Public access to all items in the container (meaning public can see it and download it but not modify and delete it)
        container.SetPermissions(
          new BlobContainerPermissions
          {
              PublicAccess =
                  BlobContainerPublicAccessType.Blob
          }); 
    }

    public void ReadFileInBlob(string userId)
    {
        CloudBlobContainer container = Prerequisite(userId);

        // Loop over items within the container and output the length and URI.
       // foreach (IListBlobItem item in container.ListBlobs(null, false))
        foreach (IListBlobItem item in container.ListBlobs(null, true))
        {
            if (item.GetType() == typeof(CloudBlockBlob))
            {
                CloudBlockBlob blob = (CloudBlockBlob)item;

                Console.WriteLine("Block blob of length {0}: {1}", blob.Properties.Length, blob.Uri);

            }
            else if (item.GetType() == typeof(CloudPageBlob))
            {
                CloudPageBlob pageBlob = (CloudPageBlob)item;

                Console.WriteLine("Page blob of length {0}: {1}", pageBlob.Properties.Length, pageBlob.Uri);

            }
            else if (item.GetType() == typeof(CloudBlobDirectory))
            {
                CloudBlobDirectory directory = (CloudBlobDirectory)item;

                Console.WriteLine("Directory: {0}", directory.Uri);
            }
        }
    }

    public CloudBlockBlob AddOrModifyItemToBlob(string userId, string itemKey)
    {
        CloudBlobContainer container = Prerequisite(userId);

        // Retrieve reference to a blob named "myblob".
        CloudBlockBlob blockBlob = container.GetBlockBlobReference(itemKey);

        return blockBlob;

    }

    public void DownloadToFolderLocation(string userId, string itemKey, string location)
    {
        CloudBlobContainer container = Prerequisite(userId);

        // Retrieve reference to a blob named "photo1.jpg".
        CloudBlockBlob blockBlob = container.GetBlockBlobReference(itemKey);

        // Save blob contents to a file.
        using (var fileStream = System.IO.File.OpenWrite(location))
        {
            blockBlob.DownloadToStream(fileStream);
        } 
    }

    public string DownloadAsStream(string userId, string itemKey)
    {
        CloudBlobContainer container = Prerequisite(userId);

        // Retrieve reference to a blob named "myblob.txt"
        CloudBlockBlob blockBlob2 = container.GetBlockBlobReference(itemKey);

        string text;
        using (var memoryStream = new MemoryStream())
        {
            blockBlob2.DownloadToStream(memoryStream);
            text = System.Text.Encoding.UTF8.GetString(memoryStream.ToArray());
        }
        return text;
    }

    public void DeleteBlobFile(string userId, string itemKey)
    {
        CloudBlobContainer container = Prerequisite(userId);

        // Retrieve reference to a blob named "myblob.txt".
        CloudBlockBlob blockBlob = container.GetBlockBlobReference(itemKey);

        // Delete the blob.
        blockBlob.Delete();
    }

  }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-04T01:18:13.683

在另一个容器中为 Azure blob 存储创建容器的最简单方法是使用来自 Cerebrata 的名为 Azure Explorer 的免费 Azure 存储管理工具。

它允许您通过创建新文件夹来创建容器。

[Azure 资源管理器](http://www.cerebrata.com/products/azure-explorer/introduction)

# ios - 我打开了一个 iPad 应用程序第二个视图，现在需要返回到第一个视图

> ID：11080853
> 
> 赞同：0
> 
> 时间：2012-06-18T10:19:03.740
> 
> 标签：ios, ipad

我正在开发一个有两个视图的 iPad 应用程序。第一个视图在 MainWindow.xib 中定义。sccond 视图在 View2.xib 中定义。MainWindow.xib 中的一个按钮启动下面的代码并激活 View2。它工作得很好。现在我需要返回 MainWindow.xib 视图。我尝试了相同的代码（但相反），但它不起作用。我在 main 中遇到了 SIGABT 错误。对于如何有效地从 View2 返回到 MainWindow，我将不胜感激。

以下是上面提到的代码。

```
if(!View2Controller)
{
View2Controller = [[UIViewController alloc] initWithNibName:@"View2" bundle:nill];
}
[self presentModalViewController:View2Controller animated:YES];

if(view2Controller.view.superview)
{
[view2Controller.view removeFromSuperView];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:23:13.313

这应该为你做：

```
 [self.parentViewController dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:23:33.283

尝试在你的`View2`：

```
[self dismissModalViewControllerAnimated:YES]; 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:23:53.970

在您的`View2Controller` `.m`文件中，如果您想返回主视图（例如单击按钮），请执行以下代码：

```
[self dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:24:33.453

你应该使用协议实现。

# debugging - 安装 WinDBG

> ID：11080854
> 
> 赞同：4
> 
> 时间：2012-06-18T10:19:04.547
> 
> 标签：debugging, windbg

现在安装 WinDBG 的最佳方式是什么？

它曾经非常容易下载，即有一个小的可执行文件。我已经尝试了此页面上的一些链接：http: [//msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)，其中一些非常大。我认为“独立”版本可以解决问题。Windows 调试工具（x86 或 x64）的所有程序中仍然没有条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:01:56.070

您的链接中提到的设置是“下载和可安装设置”。

导航到此选项

> 安装 Windows 调试工具作为 Windows SDK 的一部分

开始设置。它要求**本地下载**或**直接安装**选项。单击本地下载选项。

设置将下载到您的本地计算机

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:10:05.690

解决方案是运行“独立”可执行文件两次。第一次运行时安装了 Dot Net 版本 4。

# ruby-on-rails-3 - Rails3 活动记录关联

> ID：11080857
> 
> 赞同：0
> 
> 时间：2012-06-18T10:19:16.373
> 
> 标签：ruby-on-rails-3, activerecord, associations

我有带有相应表的消息和用户模型。
Messages 表具有 user_from 和 user_to 等字段。

如何关联模型以能够访问发件人和收件人用户对象：

```
message.user_from.name
message.user_to.id
... 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:32:16.087

您需要像这样更新您的消息模型：

```
belongs_to :user_from, :class_name => "User"
belongs_to :user_to, :class_name => "User" 
```

这将在消息表下创建相应的字段，这些字段通过其 ID 链接到用户表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:38:17.873

如果您 db 将用户 ID 作为外键存储在消息表中，则不能为关联使用相同的名称。但你可以说：

```
class Message
  belongs_to :from, class: 'User', foreign_key: :user_from
  belongs_to :to, class: 'User', foreign_key: :user_from
end 
```

在rails中，最好使用`<assiciation_name>_id`外键列名，然后你可以简单地使用

```
class Message
  belongs_to :user_from, class: 'User' # foreign_key: :user_from_id by default
  belongs_to :user_to, class: 'User' # foreign_key: :user_to_id by default
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:44:39.367

我的情况的完整解决方案是：

```
 belongs_to :sender, 
    :class_name => "User", 
    :foreign_key => "sender_id", 
    **:primary_key => "uid"**

  belongs_to :recipient, 
    :class_name => "User", 
    :foreign_key => "recipient_uid", 
    **:primary_key => "uid"** 
```

因为用户 id 不是用户表中的主键。

# android - 任何其他方式向 Galaxy Tab 发送通知？

> ID：11080858
> 
> 赞同：0
> 
> 时间：2012-06-18T10:19:31.553
> 
> 标签：android, dialog, push-notification, galaxy-tab

由于银河选项卡没有状态栏，所以我无法在其上应用正常的推送通知。有没有其他方法可以实现这一点，例如弹出对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:31:25.130

如果你真的想避免状态栏（afaik GalaxyTab 确实有一个！）你可以简单地使用一个 alertDialog，正如你已经提到的：

![在此处输入图像描述](../Images/a553b787a8acec84036dc0a0a7f1b945.png)

```
AlertDialog alertDialog = new AlertDialog.Builder(this).create();
alertDialog.setTitle("Reset...");
alertDialog.setMessage("Are you sure?");
alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
   public void onClick(DialogInterface dialog, int which) {
      // here you can add functions
   }
});
alertDialog.setIcon(R.drawable.icon);
alertDialog.show(); 
```

[http://www.wikihow.com/Show-Alert-Dialog-in-Android](http://www.wikihow.com/Show-Alert-Dialog-in-Android)

# asp.net - 如何在 asp.netweb 应用程序中显示第一个异步结果？

> ID：11080860
> 
> 赞同：8
> 
> 时间：2012-06-18T10:19:38.520
> 
> 标签：asp.net, asynchronous

我必须在三个类文件中发送三个异步请求，三个请求响应时间不同，第一个是 2 秒，第二个是 7 秒，第三个是 4 秒，**现在我必须在 2 秒内和 2 秒后显示浏览器中的第一个响应第三个回复，最后显示第二个回复，**但是现在我的结果在完成三个回复后一次显示所有回复，请给我任何建议，非常紧急，拜托.....

**我的代码是**

```
public delegate string AsyncMethodCaller(string name);
        public delegate string AsyncMethodCallertest(string name);
        public delegate string NatilusAsyn(string name); 
```

**按钮点击事件**

```
 AsyncMethodCaller caller = new AsyncMethodCaller(ps.PennStarService);
        IAsyncResult result = caller.BeginInvoke(txtFirst.Text, null, null);
    NatilusAsyn caller123 = new NatilusAsyn(cs.PennStarService);
        IAsyncResult result123 = caller123 .BeginInvoke(txtthird.Text, null, null);
        AsyncMethodCallertest cltest = new AsyncMethodCallertest(ps.testHi);
        IAsyncResult tetsresult = cltest.BeginInvoke(txtSecond.Text, null, null);
        lblFirst.Text = caller.EndInvoke(result);           
        lblSecond.Text = cltest.EndInvoke(tetsresult);
     lblthird.Text = caller123.EndInvoke(result123); 
```

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:14:42.437

我认为问题的根源在于了解 ASP.Net 请求会发生什么。

每个页面都有其生命周期，其中包括事件管道，[有关更多信息，请查看此答案](https://stackoverflow.com/a/11127064/1268570)。每个请求都由来自当前应用程序的 AppDomain 的工作线程处理。在页面管道完成之前，不会将响应发送给用户。

关于线程：

同时可用线程的数量可以在`machine.config`. 要理解的关键点是这些线程数是固定的，也就是说当达到最大并发线程数时，后续的请求会被放入一个队列中，队列中可以放入的请求数只有受服务器内存限制。

当一个工作线程调用一个耗时的操作时，您会阻塞该线程，直到操作完成，这再次意味着，如果有多个并发用户，则可能所有可用线程都可能被阻塞，从而迫使新的请求被放置在一个排队，在最坏的情况下，导致 503 错误 - 服务不可用。

防止这种情况的方法是在后台线程中调用这些方法。**与您的代码类似**，但在这种情况下行为不是您所期望的，您的代码正在等待线程结束以**完成页面请求**，这就是您同时收到结果的原因（最后的请求）。

有关异步执行 asp.net 页面的更多详细信息，[请参阅这篇优秀的文章](http://www.codeproject.com/Articles/38501/Multi-Threading-in-ASP-NET)

现在为了得到你需要的结果：

（这是一个完整的工作示例，在此示例中，我使用[Rx - Reactive Programming](http://msdn.microsoft.com/en-us/data/gg577609.aspx)在新线程中运行耗时的方法，如果您愿意，可以将其更改为使用另一个框架，我更喜欢使用 Rx，因为我觉得对 API 更满意）

## 使用 PageMethods

### 背后的代码

```
 [WebMethod]
    public static string Execute1()
    {
        JavaScriptSerializer j = new JavaScriptSerializer();
        string r = string.Empty;
        var o = Observable.Start(() =>
            {
                Thread.Sleep(2000);
                r = "My Name1: " + DateTime.Now.ToString() + " Background thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
            }, Scheduler.NewThread);
        o.First();
        r += " Main thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        r = j.Serialize(new { res = r });
        return r;
    }

    [WebMethod]
    public static string Execute2()
    {
        JavaScriptSerializer j = new JavaScriptSerializer();
        string r = string.Empty;
        var o = Observable.Start(() =>
        {
            Thread.Sleep(7000);
            r = "My Name2: " + DateTime.Now.ToString() + " Background thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        }, Scheduler.NewThread);
        o.First();
        r += " Main thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        r = j.Serialize(new { res = r });
        return r;
    }

    [WebMethod]
    public static string Execute3()
    {
        JavaScriptSerializer j = new JavaScriptSerializer();
        string r = string.Empty;
        var o = Observable.Start(() =>
        {
            Thread.Sleep(4000);
            r = "My Name3: " + DateTime.Now.ToString() + " Background thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        }, Scheduler.NewThread);
        o.First();
        r += " Main thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        r = j.Serialize(new { res = r });
        return r;
    } 
```

### ASPX

```
....
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
....
<asp:ScriptManager runat="server" />
<input type="button" id="callAsync" name="callAsync" value="Call Async" />
<div id="first"></div>
<script type="text/javascript">
    function onsuccess1(msg) {
        var result = Sys.Serialization.JavaScriptSerializer.deserialize(msg.d);
        var h = $("#first").html();
        $("#first").html( h + "<br/>&nbsp;&nbsp;&nbsp;&nbsp;Result: " + result.res);
    }
    function onerror1(xhr) {
        alert(xhr.responseText);
    }
    function callMyMethod(url, mydata, onsuccess, onerror) {
        var h = $("#first").html();
        $("#first").html(h + "<br/>&nbsp;&nbsp;Calling Method: " + new Date());
        return $.ajax({
            cache: false,
            type: "POST",
            async: true,
            url: url,
            data: mydata, 
            contentType: "application/json",
            dataType: "json",
            success: function (msg) {
                onsuccess(msg);
            },
            error: function (xhr) {
                onerror(xhr);
            }
        });
    }
    $(document).ready(function () {
        $("#callAsync").click(function () {
            var h = $("#first").html();
            $("#first").html(h + "<br/>New call: " + new Date());
            callMyMethod("DynamicControls.aspx/Execute1", "{}", function (data) { onsuccess1(data); }, function (data) { onerror1(data); });
            callMyMethod("DynamicControls.aspx/Execute2", "{}", function (data) { onsuccess1(data); }, function (data) { onerror1(data); });
            callMyMethod("DynamicControls.aspx/Execute3", "{}", function (data) { onsuccess1(data); }, function (data) { onerror1(data); });
        });
    });
</script> 
```

### 输出

此代码生成以下内容：

```
New call: Fri Jun 22 02:11:17 CDT 2012
  Calling Method: Fri Jun 22 02:11:17 CDT 2012
  Calling Method: Fri Jun 22 02:11:17 CDT 2012
  Calling Method: Fri Jun 22 02:11:17 CDT 2012
    Result: My Name1: 6/22/2012 2:11:19 AM Background thread: 38 Main thread: 48
    Result: My Name2: 6/22/2012 2:11:26 AM Background thread: 50 Main thread: 48
    Result: My Name3: 6/22/2012 2:11:30 AM Background thread: 52 Main thread: 48 
```

如您所见，代码未优化，主线程被锁定，我们设置的最大秒数为 7，但在这种情况下，从调用服务器代码 (02:11:17) 到最后收到响应 (2:11:30) 13 秒过去了。这是因为 ASP.Net 默认锁定当前`Session`对象锁定主线程。由于我们在此示例中没有使用会话，因此我们可以像这样配置页面：

```
<%@ Page EnableSessionState="False" 
```

新的输出是：

```
New call: Fri Jun 22 02:13:43 CDT 2012
  Calling Method: Fri Jun 22 02:13:43 CDT 2012
  Calling Method: Fri Jun 22 02:13:43 CDT 2012
  Calling Method: Fri Jun 22 02:13:43 CDT 2012
    Result: My Name1: 6/22/2012 2:13:45 AM Background thread: 52 Main thread: 26
    Result: My Name3: 6/22/2012 2:13:47 AM Background thread: 38 Main thread: 49
    Result: My Name2: 6/22/2012 2:13:50 AM Background thread: 50 Main thread: 51 
```

现在，从第一个服务器方法调用到最后一个没有锁定主线程的响应只用了 7 秒 =)

## 编辑 1

如果我的理解是正确的，您需要将一些参数传递给方法并返回数据集以填充标签和文本框。

**要将参数传递**给 PageMethods，这是一种方法：

安装这些 Nuget 包：

*   [https://nuget.org/packages/json2](https://nuget.org/packages/json2)
*   [https://nuget.org/packages/Newtonsoft.Json](https://nuget.org/packages/Newtonsoft.Json)
*   [https://nuget.org/packages/jQuery](https://nuget.org/packages/jQuery)
*   [https://nuget.org/packages/Rx-Main/1.0.11226](https://nuget.org/packages/Rx-Main/1.0.11226)

命令类。此类将表示您要在 post 操作中发送到服务器方法的参数

```
public class ProcessXmlFilesCommand
{
    public string XmlFilePath { get; set; }

    public ProcessXmlFilesCommand()
    {
    }
} 
```

而不是返回 a `DataSet`，我认为返回 a 会更容易和更易于管理`IEnumerable`，如下所示：

```
 [WebMethod]
    public static IEnumerable<MyResult> ProcessXmlFiles(ProcessXmlFilesCommand command)
    {
        List<MyResult> results = new List<MyResult>();
        var o = Observable.Start(() =>
        {
            // here do something useful, process your xml files for example
            // use the properties of the parameter command
            results.Add(new MyResult { SomethingInteresting = DateTime.Now.ToString(), FilePath = command.XmlFilePath + "Processed" });
            results.Add(new MyResult { SomethingInteresting = DateTime.Now.ToString(), FilePath = command.XmlFilePath + "Processed" });
            results.Add(new MyResult { SomethingInteresting = DateTime.Now.ToString(), FilePath = command.XmlFilePath + "Processed" });
            Thread.Sleep(2000);
        }, Scheduler.NewThread);
        o.First();
        return results.AsEnumerable();
    } 
```

该类`MyResult`表示您要发送回用户的数据

```
public class MyResult
{
    public string SomethingInteresting { get; set; }
    public string FilePath { get; set; }
} 
```

在您的 ASPX 页面中

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="Scripts/json2.min.js"></script>

    <script type="text/javascript">
        function processFiles() {
            var filePath = $("#filePath").val();
            var command = new processFilesCommand(filePath);
            var jsonCommand = JSON.stringify(command);

            $.ajax({
                cache: false,
                type: "POST",
                async: true,
                url: "CustomThreads.aspx/ProcessXmlFiles",
                data: "{'command':" + jsonCommand + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    onFileProcessedSuccess(msg);
                },
                error: function (exc) {
                    onFileProcessedError(exc);
                }
            });
        }
        function onFileProcessedSuccess(msg) {
            var response = msg.d;
            $.each(response, function (index, myResponse) {
                $("#<%:this.myLabel.ClientID %>").append(myResponse.SomethingInteresting + "<br/>");
            });
        }
        function onFileProcessedError(exc) {
            alert("Error: " + exc.responseText);
        }
        function processFilesCommand(filePath) {
            this.XmlFilePath = filePath;
        }
        $(document).ready(function () {
            $("#processFile").click(processFiles);
        });
    </script>

<input type="text" name="filePath" id="filePath" />
<input type="button" name="processFile" id="processFile" value="Process File" />

<br /><asp:Label ID="myLabel" runat="server" /> 
```

## 编辑 2

这是一种简化的方式

```
<%@ Page EnableSessionState="False" Language="C#" AutoEventWireup="true" CodeBehind="CustomThreadsSimple.aspx.cs" Inherits="WebApplication1.CustomThreadsSimple" %>
....
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
....
    <script type="text/javascript">
        function makeCall(url, data) {
            $("#<%:this.lblMessage.ClientID %>").append("<br/>Initializing call: " + new Date());
            $.ajax({
                url: url,
                type: "POST",
                dataType: "json",
                contentType: "application/json; charset=utf-8;",
                async: true,
                cache: false,
                data: "{name:'" + data + "'}",
                success: function (msg) {
                    $("#<%:this.lblMessage.ClientID %>").append("<br/>&nbsp;&nbsp;&nbsp;&nbsp;" + msg.d);
                },
                error: function (exc) {
                    alert(exc.responseText);
                }
            });
        }
        $(function () {
            $("#startProcess").click(function () {
                makeCall("CustomThreadsSimple.aspx/Execute1", $("#<%: this.txtData1.ClientID %>").val());
                makeCall("CustomThreadsSimple.aspx/Execute2", $("#<%: this.txtData2.ClientID %>").val());
                makeCall("CustomThreadsSimple.aspx/Execute3", $("#<%: this.txtData3.ClientID %>").val());
            });
        });
    </script>
    <asp:TextBox runat="server" ID="txtData1" />
    <asp:TextBox runat="server" ID="txtData2" />
    <asp:TextBox runat="server" ID="txtData3" />
    <input type="button" name="startProcess" id="startProcess" value="Start execution" />
    <asp:Label ID="lblMessage" runat="server" /> 
```

**背后的代码**

```
public partial class CustomThreadsSimple : System.Web.UI.Page
{
    [WebMethod]
    public static string Execute1(string name)
    {
        string res = string.Empty;
        Func<string, string> asyncMethod = x =>
        {
            Thread.Sleep(2000);
            return "Res1: " + x +" " + DateTime.Now.ToString() + " Background thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        };

        IAsyncResult asyncRes = asyncMethod.BeginInvoke(name, null, null);
        res = asyncMethod.EndInvoke(asyncRes);
        res += " Main thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        return res;
    }

    [WebMethod]
    public static string Execute2(string name)
    {
        string res = string.Empty;
        Func<string, string> asyncMethod = x =>
        {
            Thread.Sleep(7000);
            return "Res2: " + x + " " + DateTime.Now.ToString() + " Background thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        };

        IAsyncResult asyncRes = asyncMethod.BeginInvoke(name, null, null);
        res = asyncMethod.EndInvoke(asyncRes);
        res += " Main thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        return res;
    }

    [WebMethod]
    public static string Execute3(string name)
    {
        string res = string.Empty;
        Func<string, string> asyncMethod = x =>
        {
            Thread.Sleep(4000);
            return "Res3: " + x + " " + DateTime.Now.ToString() + " Background thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        };

        IAsyncResult asyncRes = asyncMethod.BeginInvoke(name, null, null);
        res = asyncMethod.EndInvoke(asyncRes);
        res += " Main thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        return res;
    }
} 
```

**输出**

![在此处输入图像描述](../Images/4778a1e42fdb8f634aeb657cd9134c97.png)

# class - Python 3，一个跨多个模块使用的类

> ID：11080862
> 
> 赞同：0
> 
> 时间：2012-06-18T10:19:45.417
> 
> 标签：class, function, python-3.x

我想在多个模块中使用以下类，而不需要`log = InitLog()`在每个模块中。我需要能够`log`跨多个模块使用一个定义的类变量（在本例中）。在不彻底改变我当前的代码的情况下，最好的方法是什么。谢谢

```
import os
import sys
import pdb
import fileinput
import Tools

class InitLog:
    def __init__(self):
        pass
    def setLaws(self):
        self.sound = 'off'
        self.engine = 'goo.txt'

    def Update(self):
        while Tools.Locked.State.LogAddress == True: pass
        Tools.Locked.State.LogAddress = True
        try: os.remove(path + '/' + self.dest + '/init.log')
        except: pass

        summery = 'sound: ' + self.sound + '\n'
        summery += 'engine: ' + self.engine + '\n'

        path = os.getcwd()
        if not os.path.exists(self.dest): os.makedirs(self.dest)
        if os.path.isfile(path + '/' + self.dest + '/init.log') == True: os.remove(path + '/' + self.dest + '/init.log')
        with open (path + '/' + self.dest + '/init.log', mode='a', encoding='utf-8') as a_file:
            a_file.write(summery)
        Tools.Locked.State.LogAddress = False

Tools.Locked.State.LogAddress = False
log = InitLog()
log.setLaws()
log.sound = 'on'
log.Update() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:22:03.250

创建一个名为的模块`logging`，其中包含`log`. 在其他模块中使用`from logging import log`.

# java - Java Regexp在字符串的一部分后向所有字符添加空格

> ID：11080863
> 
> 赞同：0
> 
> 时间：2012-06-18T10:19:45.680
> 
> 标签：java, regex, string, character, whitespace

我正在尝试将字符串操作为正则表达式格式

```
String months1 = "(?<month>(?i:January|February|March|April|May|June|July|August|September|October|November|December))";
String monthsResult = months1.replaceAll("([^\\(\\?\\<month\\>\\(\\?i])([a-zA-Z])", "$0 ?"); 
```

我希望结果的格式是`(?<month>(?i:`每个字符都有一个空格，但上面的代码显示：

```
(?<month>(?i:J ?an ?ua ?ry ?|F ?eb ?ru ?ar ?y|M ?ar ?ch ?|A ?pr ?il|M ?ay ?|J ?un ?e|J ?ul ?y|A ?ug ?us ?t|S ?ep ?tem ?be ?r|O ?ct ?obe ?r|N ?ove ?mbe ?r|D ?ec ?em ?be ?r)) 
```

是否与分组有关，或者我的 replaceAll 函数正则表达式不准确？

任何帮助，将不胜感激。

预期的结果是

```
"(?<month>(?i:J ?a ?n ?u ?a ?r ?y|F ?e ?b ?r ?u ?a ?r ?y|M ?a ?r ?c ?h|A ?p ?r ?i ?l|M ?a ?y|J ?u ?n ?e|J ?u ?l ?y|A ?u ?g ?u ?s ?t|S ?e ?p ?t ?e ?m ?b ?e ?r|O ?c ?t ?o ?b ?e ?r|N ?o ?v ?e ?m ?b ?e ?r|D ?e ?c ?e ?m ?b ?e ?r)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:45:27.603

```
.replaceAll("(?<=(?<=[A-Z])[a-z]*)([a-z])", " ?$1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:01:48.583

您可以使用如下表达式：

```
(?<=\(\?<month>\(\?i:.{0,16000})\w\B 
```

替换为`$0 ?`。

```
str.replaceAll("(?<=\\(\\?<month>\\(\\?i:.{0,16000})\\w\\B", "$0 ?"); 
```

# sql-server - 我应该如何将 Windows 用户 ID 存储在数据库中？

> ID：11080866
> 
> 赞同：8
> 
> 时间：2012-06-18T10:19:55.777
> 
> 标签：sql-server, sql-server-2008, sqldatatypes, userid

目前我将用户的 Windows 帐户存储为 sql server 中的 nvarchar(10)，这是存储用户 ID 的正确方法吗？数据类型应该是什么？或者我什至应该存储用户标识？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T10:35:00.280

Windows NT 用户身份被称为**SID**，一个[安全标识符](http://msdn.microsoft.com/en-us/library/cc230371%28v=prot.10%29.aspx)。它的字符串表示在[SID String Format Syntax](http://msdn.microsoft.com/en-us/library/ff632068%28v=prot.10%29.aspx)中指定，编组表示在[SID--Packet Representation](http://msdn.microsoft.com/en-us/library/gg465313%28v=prot.10%29)中指定。如果要在数据库中存储 SID，请使用与字段相同的表示形式`sys.databases.owner_sid`： **varbinary(85)**。要检索登录 SID，请使用[`SUSER_SID`](http://msdn.microsoft.com/en-us/library/ms179889.aspx)（也返回... `varbinary(85)`）。

特别是*不要*将身份存储为登录名（`domain\user`或`user@domain`），因为这些更改*方式*比您预期的更频繁，特别是在大公司中。我的在 10 年内改变了大约 5 次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:24:27.290

这是一个非常复杂的问题。

从技术上讲，不要存储名称。存储 ID，顺便说一句，无论如何它都是按类型划分的 GUID。

这意味着当您重命名帐户时您是安全的，这就是 WINDOWS 所做的。有没有见过当您打开文件的权限时需要一秒钟才能显示名称？并先显示一个数字？那是因为 Windows 需要一点时间才能从域控制器中获取名称。

SIMPLE 是存储帐户名称，但这意味着您在重命名时“死”了，这应该是相当的速度，otoh。我认为大多数解决方案都是这样做的；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:46:51.940

> 或者我什至应该存储用户标识

在中创建新帐户时`Stack overflow`。它接受`Google/Facebook or Yahoo`用户标识，这意味着它使用`Passport Authentication`. 但它仍然将用户信息保留在数据库中，用于查询/回复/评论/标志等之间的关系。

> 数据类型应该是什么？

好吧，这取决于您的要求。如果是非英语语言。肯定是`NVarchar(50)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T10:31:31.717

`userid`如果它是来自数据库中另一个表的 id，则取决于数据的类型，然后根据父表中的数据类型将其保存。如果它是 windows 用户 ID，则将其保存为 nvarchar，但确保容纳 logest 用户 ID。像 nvarchar(50)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T10:25:02.080

获取当前用户 id（检查[这里](http://msdn.microsoft.com/en-us/library/aa258248%28v=sql.80%29.aspx)）时，`char(30)`使用。

因此，至少，您应该将长度更改为 30！

# android - 创建具有不同点击状态的不规则形状的 ImageButton

> ID：11080868
> 
> 赞同：8
> 
> 时间：2012-06-18T10:20:07.027
> 
> 标签：android, touch, transparent, imagebutton, clickable

我创建了一个带有选择器的 ImageButton 用于按下和非按下状态，这很好用。

但是该按钮的形状不规则，我只希望它在底层矩形图像不透明的情况下可点击。

所以我实现了一个 OnTouchListener 来检查触摸事件的坐标与位图的像素值（如这里的第一个答案中所述：[链接](https://stackoverflow.com/questions/8224852/how-to-create-an-irregular-shaped-imagebutton-where-transparent-part-of-image-is)）。就决定是否按下按钮的逻辑而言，这是可行的，但现在按钮的图像不再变为按下的图像。

这是我所拥有的：

选择器 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true" android:drawable="@drawable/button_start_call_pressed" />
    <item android:drawable="@drawable/button_start_call_normal" />
</selector> 
```

布局中部分透明的 ImageButton：

```
<ImageButton
    android:id="@+id/dashboardStartCallButton"
    android:background="@null"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/start_call_button_selector"
     /> 
```

在活动中：

```
public void onCreate(Bundle savedInstance) {
   super.onCreate(savedInstance);
   ...
   ImageButton startCallButton = (ImageButton) this.findViewById(R.id.dashboardStartCallButton);
   startCallButton.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return OnStartCallButtonTouch(v,event);
        }           
    });
}

public boolean OnStartCallButtonTouch(View v, MotionEvent event)
{
    Bitmap TheBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.button_start_call_normal);
    int eventPadTouch = event.getAction();
    int iX = (int) event.getX();
    int iY = (int) event.getY();
    switch (eventPadTouch) {
        case MotionEvent.ACTION_DOWN:
            if (iX>=0 & iY>=0 & iX<TheBitmap.getWidth() & iY<TheBitmap.getHeight()) {                 
                if (TheBitmap.getPixel(iX,iY)!=0) {
                    onStartCallButtonClicked(v); 
                    return false; 
                } 
            }
    }           
    return true;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T12:19:19.057

我认为您实际上正在寻找这个：

[View.dispatchTouchEvent(...)](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/view/View.java#View.dispatchTouchEvent%28android.view.MotionEvent%29)

如果点不在所需区域，您需要在自定义按钮中覆盖此方法以返回*false 。*我建议你这样做：

```
public static class MyButton extends ImageButton {
    ...
    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        int iX = (int) event.getX();
        int iY = (int) event.getY();
        // TODO Or use a more sophisticated, pixel value-based condition
        if (!(iX>=0 & iY>=0 & iX<TheBitmap.getWidth() & iY<TheBitmap.getHeight())) {
            return false;
        }
        return super.dispatchTouchEvent(event)
    }
} 
```

**为什么不使用 OnTouchListener**：因为您需要调用 View.onTouchEvent() （在 super.dispatchTouchEvent(event) 中完成）让 View 处理可绘制状态（在 onTouchEvent() 中使用 View.refreshDrawableState() 方法完成，那里还有一些更复杂的逻辑）

**为什么不重写 onTouchEvent()**：因为在 View.dispatchTouchEvent() 中有一个条件，如果有一个 OnTouchListener，那么让监听器处理一切并返回 true。因此，如果稍后您出于某种原因将 OnTouchListener 设置为按钮，则不会检查 onTouchEvent() 中基于坐标的条件，因为永远不会调用 onTouchEvent()。通过覆盖 dispatchTouchEvent()，您可以在最顶部过滤触摸并保留所有其他逻辑 - 您可以将任何侦听器添加到按钮，它们将像普通按钮一样工作，但前提是您的条件为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:56:58.927

我认为您需要修改您的碰撞检测，以确定触摸是否在您的按钮内。使用以下方法。

```
public boolean OnStartCallButtonTouch(View v, MotionEvent event)
{
    Bitmap TheBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.button_start_call_normal);
    int eventPadTouch = event.getAction();
    int iX = (int) event.getX();
    int iY = (int) event.getY();

    int[] location = new int[2];
    v.getLocationOnScreen(location);

    int viewX = location[0];
    int viewY = location[1];

    switch (eventPadTouch) {
        case MotionEvent.ACTION_DOWN:
            if (iX>=viewX & iY>=viewY & iX<=(viewX+TheBitmap.getWidth()) & iY<=(viewY+TheBitmap.getHeight())) {                 
                if (TheBitmap.getPixel(iX,iY)!=0) {
                    onStartCallButtonClicked(v);
                    showPressedState();
                    return false; 
                } 
            }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_CANCEL:
            showNormalState();
            break;
    }           
    return true;
}

private void showNormalState() {
    // set your button background drawable to show normal state
}

private void showPressedState() {
    // set your button background drawable to show pressed state
} 
```

# rest - 使用 REST 服务在页面上使用图钉初始化多个 Bing 地图

> ID：11080875
> 
> 赞同：2
> 
> 时间：2012-06-18T10:20:47.410
> 
> 标签：rest, map, ashx, bing-maps

我正在尝试在同一页面上显示多个 bing 地图，每个地图都有一个基于地理编码显示的指定位置。

我遇到的问题是这个...

*   当我显示一张地图并用一个位置初始化它时 - 这很好。
*   当我对多个地图 div 连续多次运行相同的操作时，它无法正确显示 - 通常只显示最后一张初始化的地图（但有时它是非常随机的，显示两个，有时位置混淆）。
*   有趣的是，如果我在每次地图初始化之间暂停并显示警报，一切正常（在我下面的示例中，只需取消注释警报，您就可以看到）。由于我刚刚注意到的某种原因，这似乎发生在 FF 而不是 IE 中。

我基于提供的[msdn 示例](http://msdn.microsoft.com/en-us/library/gg427601.aspx)构建了一个单页 html 示例。整个标记在下面，复制并保存为 html 文件，它应该如上所述工作。我只是为了便于理解和更好地与我的问题沟通而将其搅动。

* * *

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

      <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>

      <script type="text/javascript">

         var map = null;
         var mapId = '';
         var geocode = ''

         function InistionaliseMaps()
         {
            //alert('1');
            InistialiseMap('mapDiv1', 'London');
            //alert('2');
            InistialiseMap('mapDiv2', 'Barcelona');
            //alert('3');
            InistialiseMap('mapDiv3', 'Auckland');
            //alert('4');
            InistialiseMap('mapDiv4', 'New York');
            //alert('5');
            InistialiseMap('mapDiv5', 'Amsterdam');
         }

         function InistialiseMap(mId, gc)
         {
            mapId = mId;
            geocode = gc;

            GetMap();
            ClickGeocode();
         }

         function GetMap()
         {
            // Initialize the map
            map = new Microsoft.Maps.Map(document.getElementById(mapId),{credentials:"Auy_rZ68nbxt5cE4EYg7o1pFD3IpEg6sgNNWC8RyP04f12t9GSf0YQzlnBmgyJV3", mapTypeId:Microsoft.Maps.MapTypeId.road}); 

         }

         function ClickGeocode(credentials)
         {
            map.getCredentials(MakeGeocodeRequest);
         }

         function MakeGeocodeRequest(credentials)
         {

            var geocodeRequest = "http://dev.virtualearth.net/REST/v1/Locations?query=" + encodeURI(geocode) + "&output=json&jsonp=GeocodeCallback&key=" + credentials;

            CallRestService(geocodeRequest);
         }

         function GeocodeCallback(result) 
         {
            alert("Found location: " + result.resourceSets[0].resources[0].name);

            if (result &&
                   result.resourceSets &&
                   result.resourceSets.length > 0 &&
                   result.resourceSets[0].resources &&
                   result.resourceSets[0].resources.length > 0) 
            {
               // Set the map view using the returned bounding box
               var bbox = result.resourceSets[0].resources[0].bbox;
               var viewBoundaries = Microsoft.Maps.LocationRect.fromLocations(new Microsoft.Maps.Location(bbox[0], bbox[1]), new Microsoft.Maps.Location(bbox[2], bbox[3]));
               map.setView({ bounds: viewBoundaries});

               // Add a pushpin at the found location
               var location = new Microsoft.Maps.Location(result.resourceSets[0].resources[0].point.coordinates[0], result.resourceSets[0].resources[0].point.coordinates[1]);
               var pushpin = new Microsoft.Maps.Pushpin(location);
               map.entities.push(pushpin);
            }
         }

         function CallRestService(request) 
         {
            var script = document.createElement("script");
            script.setAttribute("type", "text/javascript");
            script.setAttribute("src", request);
            document.body.appendChild(script);
         }

      </script>
   </head>
   <body onload="InistionaliseMaps();">
      <div id='mapDiv1' style="position:relative; width:400px; height:400px;"></div>
      <div id='mapDiv2' style="position:relative; width:400px; height:400px;"></div>
      <div id='mapDiv3' style="position:relative; width:400px; height:400px;"></div>
      <div id='mapDiv4' style="position:relative; width:400px; height:400px;"></div>
      <div id='mapDiv5' style="position:relative; width:400px; height:400px;"></div>    
   </body>
</html> 
```

* * *

我相信这可能是因为页面加载速度过快并且对 REST 服务的连续调用重叠，或者 REST 服务中使用的对象在下一次调用或类似情况之前没有被销毁。老实说，我真的有点困惑。

如果有人知道这里可能发生了什么，解决问题的方法或通过 Bing 地图解决问题的更好方法 - 将不胜感激，我将永远在你的堆栈债务中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:42:45.470

我没有尝试过你的代码，通过检查我想我发现了一些会导致你看到的行为的问题。问题与您使用全局变量在`GeocodeCallback()`. `GeocodeCallback()`是一个在地理编码完成后运行的回调函数，不保证如果你发出多个`CallRestService()s`， `GeocodeCallback()`每个请求都会以相同的顺序被调用。您在 中将`map`变量设置为当前映射`GetMap()`，然后继续调用`CallRestService()`，然后再次调用，这将使用新映射`InistialiseMap()`覆盖变量。`map`如果`GeocodeCallback()`之前被调用`InistialiseMap()`，您不会有任何问题。（如使用最有可能迫使这种情况发生的警报所示）。`InistialiseMap()`但是，在调用之前可能会运行多次`GeocodeCallback()s`，因此无法确定哪个地图会使用返回的地理编码结果进行更新`GeocodeCallback()`。

这是解决您问题的简单方法。不是很优雅，我还没有测试过代码，但想法是为每个地图设置一个单独的地理编码回调，并将每个地图存储在自己的变量中。

```
 <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>

  <script type="text/javascript">

     var mapOne = null;
     var mapTwo = null;
     var geocode = ''

     function InistionaliseMaps()
     {
        InistialiseMap('mapDiv1', mapOne, 'London');
        InistialiseMap('mapDiv2', mapTwo,'Barcelona');
     }

     function InistialiseMap(mId, mapVar, gc)
     {
        geocode = gc;

        GetMap(mId, mapVar);
        ClickGeocode(mapVar);
     }

     function GetMap(mapIdName, mapVar )
     {
        // Initialize the map
        mapVar = new Microsoft.Maps.Map(document.getElementById(mapId),{credentials:"Auy_rZ68nbxt5cE4EYg7o1pFD3IpEg6sgNNWC8RyP04f12t9GSf0YQzlnBmgyJV3", mapTypeId:Microsoft.Maps.MapTypeId.road}); 
    mapVar.MapIdName = mapIdName ;
     }

     function ClickGeocode(mapVar )
     {
        mapVar.getCredentials(MakeGeocodeRequest)
     }

     function MakeGeocodeRequest(credentials)
     {
        // Figure out how to get the map that called this...
        var mapThatCalledThis = ...
        var geocodeRequest = "http://dev.virtualearth.net/REST/v1/Locations?query=" + encodeURI(geocode) + "&output=json&jsonp=GeocodeCallback"+mapThatCalledThis .MapIdName+"&key=" + credentials;

        CallRestService(geocodeRequest);
     }

     function GeocodeCallbackmapDiv1(result) 
     {
           // common stuff
           mapOne.entities.push(pushpin);
        }
     }
     function GeocodeCallbackmapDiv2(result) 
     {
           // common stuff
           mapTwo.entities.push(pushpin);
        }
     }
     function CallRestService(request) 
     {
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        script.setAttribute("src", request);
        document.body.appendChild(script);
     }

  </script> 
```

祝你好运。

# java - Gitignore 用于与 Eclipse 的协作 Java 编程

> ID：11080885
> 
> 赞同：0
> 
> 时间：2012-06-18T10:21:29.197
> 
> 标签：java, eclipse, collaboration, gitignore

在团队中使用 Eclipse 进行 Java 编程时可以忽略哪些文件？我们在团队中争论`.classpath`and`.project`文件应该或不应该包含在存储库中。

我真的不想包括那些，但真的没有任何真正的论据，为什么我不想包括它们。我只是觉得它们不属于存储库。

如果每个人都在使用 Eclipse，那么`.classpath`和 .project` 文件是否需要在我们的项目中保持一致？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:29:04.057

我们不会将任何特定于 IDE 的文件置于版本控制之下，我反对这样做。它们中的许多可能（因此经常会）包含绝对路径、不一致的用户定义库等。这些反过来会定期破坏构建，使开箱即用的构建变得不可能，使 CI 变得困难并且通常多余的。

我们使用的`pom.xml`是 maven，这足以重建项目 acrioss IDE 和 OS 边界。我敢肯定，同样的结果也可以用 ant 来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:54:34.213

使用 eclipse 时，`.project`和`.classpath`预计将与源代码一起保存在源代码控制中。这就是它的设计方式。正如[@nitind 所](https://stackoverflow.com/users/27905/nitind)提到的，您不会在类路径中包含任何指向 jar 的绝对路径，而是利用可以安装在不同位置的 3rd 方库的变量和用户库。

但这不是必需的。另一种选择是让开发人员创建他们自己的工作区和他们自己的项目，然后在从 SCM 中提取后创建链接到文件系统上的源的资源。

# .net - 在 .NET 中删除 PKI 智能卡时出现加密异常

> ID：11080887
> 
> 赞同：2
> 
> 时间：2012-06-18T10:21:39.290
> 
> 标签：.net, exception-handling, garbage-collection, smartcard, x509

我正在使用 X509 证书进行身份验证。当智能卡被移除时，我们有时会遇到以下异常（不幸的是，我只能在德语中出现异常文本......）

“Ungültige Benutzerkennung”，意思是“无效的用户 ID”：

```
 bei System.Security.Cryptography.CryptographicException.ThrowCryptogaphicException(Int32 hr)
    bei System.Security.Cryptography.SafeKeyHandle._FreeHKey(IntPtr pKeyCtx)
    bei System.Security.Cryptography.SafeKeyHandle.ReleaseHandle()
    bei System.Runtime.InteropServices.SafeHandle.InternalFinalize()
    bei System.Runtime.InteropServices.SafeHandle.Dispose(Boolean disposing)
    bei System.Runtime.InteropServices.SafeHandle.Finalize() 
```

我已经窥视了 X509Certificate 的实现。垃圾收集器似乎调用了 X509Certificate 的终结器。X509Certificate 对象包含 Win32 句柄。现在，当智能卡被删除时，相应的证书也会从 Windows 证书存储中删除，因此底层的 Win32 句柄可能是指不再存在的 Win32 资源（证书存储中的证书）。

我的问题是我无法捕获和处理这个异常，因为它在垃圾收集器启动的某个时间点被抛出到终结器中。然后这个异常会破坏整个应用程序......

我试图显式调用 X509Certificate2.Reset() 但错误仍然发生在终结器中。

有关如何解决此问题的任何想法？

问候，塞巴斯蒂安

# xpages - 安装最后一个 Extlib 后看不到 JDBC 控件

> ID：11080888
> 
> 赞同：0
> 
> 时间：2012-06-18T10:21:39.537
> 
> 标签：xpages, xpages-extlib

我已经安装了 ExtLib 的最新版本 853.20120605-0921...在设计器中我没有在文件夹**Data Access**下看到JDBC 控件...有没有人建议？

在服务器上，命令后**告诉 http osgi ss com.ibm.xsp.extlib**似乎都正确：

07567:00002-3026265808] 06/18/2012 12:17:19 PM 框架已启动。[07567:00002-3026265808] 06/18/2012 12:17:19 PM id 状态包

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 10 活动
com.ibm.xsp.extlibx.sbt_8.5.3.20120605-0921

[07567:00002-3026265808] 2012 年 6 月 18 日下午 12:17:19 11 活动

com.ibm.xsp.extlib_8.5.3.20120605-0921

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 片段=13

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 12 活动
com.ibm.xsp.extlibx.relational_8.5.3.20120605-0921

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 13 解决
com.ibm.xsp.extlibx.oauth_8.5.3.20120605-0921

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 大师=11

[07567:00002-3026265808] 2012 年 6 月 18 日下午 12:17:19 14 活动
com.ibm.xsp.extlib.mobile_8.5.3.20120605-0921

[07567:00002-3026265808] 2012 年 6 月 18 日下午 12:17:19 16 活动
com.ibm.xsp.extlib.core_8.5.3.20120605-0921

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 19 解决
com.ibm.xsp.extlibx.relational.derby_8.5.3.20120605-0921

[07567:00002-3026265808] 2012 年 6 月 18 日下午 12:17:19 20 活动
com.ibm.xsp.extlib.oneui_8.5.3.20120605-0921

[07567:00002-3026265808] 2012 年 6 月 18 日下午 12:17:19 23 活动
com.ibm.xsp.extlibx_8.5.3.20120605-0921

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 28 <>
com.ibm.xsp.extlibx.core_8.5.3.20120605-0921

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 29 活动
com.ibm.xsp.extlib.controls_8.5.3.20120605-0921

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 30 已解决
com.ibm.xsp.extlibx.controls_8.5.3.20120605-0921

[07567:00002-3026265808] 06/18/2012 12:17:19 PM 31 活动
com.ibm.xsp.extlib.domino_8.5.3.20120605-0921

有人建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:36:21.277

您是否按照以下步骤在 Notes/Domino Designer 客户端中安装了扩展库？

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Installing_the_OpenNTF_update_site_in_Domino_Designer_ddxl853](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Installing_the_OpenNTF_update_site_in_Domino_Designer_ddxl853)

您需要在 Domino Designer 中安装扩展库才能查看扩展库控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:59:06.653

您是否在应用程序中启用了 XPage 的扩展组件库？在您这样做之前，组件不会出现。转至应用程序的 Application Properties，转至高级选项卡，然后在 XPages Library 框中，单击“com.ibm.xsp.extlibx.library”复选框。在设计器中打开 XPage，您现在应该可以看到组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T19:32:48.473

Tnx 对所有人来说，我已经找到了解决方案。我已经一对一地禁用了所有 extlib 并重新启动设计器......从 UpdateSite 重新安装后......并开始工作！

Tnx ..似乎该过程需要一次删除ExtLib的一个条目。

再见

# asp.net-mvc-3 - 通过 Twitter API 进行身份验证

> ID：11080895
> 
> 赞同：1
> 
> 时间：2012-06-18T10:22:16.850
> 
> 标签：asp.net-mvc-3, linq-to-twitter

我有一个向朋友发送消息的方法，如下：

```
 public virtual void SendMessage(Identity identity)
    {

        var authent = new MvcAuthorizer
        {
            Credentials = new SessionStateCredentials()
            {
                ConsumerKey = ConsumerKey,
                ConsumerSecret = ConsumerSecret,
                OAuthToken = identity.Token.Token,
                AccessToken = identity.Token.Secret
            }
        };

      ....
} 
```

当我调试此方法时，令牌和密钥取它们的值，但 Auth 值为 null

我很抱歉我的英语不好，谢谢，

# mysql - MySQL全文搜索结果相关性

> ID：11080900
> 
> 赞同：1
> 
> 时间：2012-06-18T10:22:34.793
> 
> 标签：mysql, full-text-search

我正在尝试在我的表中搜索一些手机，并尝试通过全文搜索获取结果。我的查询是：

```
SELECT id,itemid,title,MATCH(title) AGAINST 
    ("SAMSUNG GALAXY S3" IN NATURAL LANGUAGE MODE) as score 
    FROM `deals`WHERE MATCH(title) AGAINST 
    ("SAMSUNG GALAXY S3" IN NATURAL LANGUAGE MODE) ORDER BY score desc; 
```

我得到的结果如下图所示：

![搜索结果](../Images/24e1d6cd0043edddc0c390f182229cfd.png)

**我期望第二个结果排在首位，因为它是完全匹配的，但事实并非如此**。有人可以纠正我在这里可能做错的事情。

谢谢。

**在布尔模式下 **编辑结果**![布尔模式下的结果](../Images/c45aac6acbae27e24ec761c7fff0f3be.png)**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:47:50.467

恐怕“S3”太短了，不能被全文搜索认为是一个词。请参阅文档的相关部分（默认最小字长为 4 个字符）[http://dev.mysql.com/doc/refman//5.5/en/server-system-variables.html#sysvar_ft_min_word_len](http://dev.mysql.com/doc/refman//5.5/en/server-system-variables.html#sysvar_ft_min_word_len)

**编辑**您可以通过搜索来验证这一点，例如：

```
"SAMSUNG GALAXY S360" 
```**

# php - 带有上传图像的php编辑条目

> ID：11080901
> 
> 赞同：0
> 
> 时间：2012-06-18T10:22:40.770
> 
> 标签：php, mysql, file-upload, ezsql

只是我能想象的一个基本的，但对我来说我很挣扎:)

我已经创建了这个推荐脚本，除了我去更新条目时工作正常。所有的数据都在那里，除了为条目上传的图像之外，这些数据都已提交。

我正在使用 EzSql 和 Mysql。

无法正常工作的代码部分：

```
<? if($_GET['action'] != 'edit') { ?>
    Add a new testimonial:  
<? }else{ ?>
    Update testimonial: 
<?
        $sql = "SELECT * from testimonials where id=".$_GET['tid'];
        $testimonialsData = $dbEze->get_row($sql);

        $update_company = $testimonialsData->company;
        $update_company_url = $testimonialsData->company_url;
        $update_content = $testimonialsData->content;
        $update_contentby_name = $testimonialsData->contentby_name;
        $update_contentby_position = $testimonialsData->contentby_position;
        $update_contentby_rating = $testimonialsData->rating;
        $update_logo = $testimonialsData->logo;
        $update_image = $testimonialsData->image;
        $update_twitter = $testimonialsData->twitter;

    } ?>

<form  enctype="multipart/form-data" action="testadmin?action=insert" method="post">
    <p>Company:
<input type="text" name="company" size="20" value="<?=$update_company?>" />

      Website: 
      <input type="text" name="company_url" size="20" value="<?=$update_company_url?>" />
      <br />
      <br>
      Name: 
      <input type="text" name="contentby_name" size="20" value="<?=$update_contentby_name?>" />
       Job Title: 
       <input type="text" name="contentby_position" size="20" value="<?=$update_contentby_position?>" />
      <br />
      <br>
      Rating: <input type="text" name="rating" size="20" value="<?=$update_contentby_rating?>" />
      Twitter ID: <input type="text" name="twitter" size="20" value="<?=$update_twitter?>" />
      <br />
      <br />
       <br>
      Testimonial: 
      <textarea name="content" rows="4" cols="35"><?=$update_content?>
    </textarea>
  </p>
    <p>Company Logo:
<input name="logo" type="file" size="20" value="<?=$update_logo?>" /> 
      <br />
      Product Photo:
<input name="image" type="file" size="20" value="<?=$update_logo?>" />
  </p>
    <p>

      <? if($_GET['action'] == 'insert' || $_GET['action'] == 'delete') { ?>
      <input type="hidden" name="insert" value="1" />
      <a onclick="jQuery(this).closest('form').submit()" class="btn add">Add <span class="helper"></span></a>
      <? }
    if($_GET['action'] == 'edit') {  ?>
      <input type="hidden" name="update" value="<?=$_GET['tid']?>" />
      <input type="submit" value="Update"/> 
      <input type="button" value="Cancel" onclick="window.location='testadmin?action=insert'" />
  </p>  
    <?  } ?>
</form>

<br>
<br>
<br><?php $dbEze->debug(); ?>

<table width="927" border="0" cellpadding="5" style="table-layout:fixed; width: 900px; word-wrap:break-word; border-spacing: 5px">
    <tr>
      <td width="85" bgcolor="#CCCCCC">Company</td>
      <td width="73" bgcolor="#CCCCCC">Website</td>
      <td width="97" bgcolor="#CCCCCC">Testimonial</td>
      <td width="55" bgcolor="#CCCCCC">Name</td>
      <td width="76" bgcolor="#CCCCCC">Job Title</td>
      <td width="56" bgcolor="#CCCCCC">Rating</td>
      <td width="48" bgcolor="#CCCCCC">Logo</td>
      <td width="125" bgcolor="#CCCCCC">Product Photo</td>
      <td width="91" bgcolor="#CCCCCC">Twitter</td>
      <td width="99" bgcolor="#CCCCCC"></td>
    </tr>
    <?
    $sql = "SELECT * from testimonials";
    $testimonialsData = $dbEze->get_results($sql);
    foreach ($testimonialsData as $testimonial){

    $logo_cutup = explode('/', $testimonial->logo);
    $logo_lastword = $logo_cutup[(count($logo_cutup))-1];

    $image_cutup = explode('/', $testimonial->image);
    $image_lastword = $image_cutup[(count($image_cutup))-1];
    ?>
    <tr>
      <td><?=$testimonial->company?></td>
      <td><?=$testimonial->company_url?></td>
      <td><?=$testimonial->content?></td>
      <td><?=$testimonial->contentby_name?></td>
      <td><?=$testimonial->contentby_position?></td>
      <td><?=$testimonial->rating?></td>
      <td><a href="<?=$testimonial->logo?>"><?=$logo_lastword?></a></td>
      <td><a href="<?=$testimonial->image?>"><?=$image_lastword?></a></td>
      <td><?=$testimonial->twitter?></td>
      <td>
          <a href="testadmin?action=edit&tid=<?=$testimonial->id?>" class="btn edit">Update <span class="helper"></span></a>
          <br>
          <a href="testadmin?action=delete&tid=<?=$testimonial->id?>" class="btn delete" onClick="return confirm('Are you 100% totally certain that you want to DELETE this testimonial?')">Delete <span class="helper"></span></a> 
```

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:41:35.497

看起来您正在尝试从数据库中填充表单。这很酷。不幸的是，您似乎还试图为 input type="file" 元素分配一个值，这并不是很酷。

您试图传递的这些价值观是什么？如果您尝试分配相对 URL，它肯定行不通。如果您尝试分配绝对 URL，我也不确定它是否会起作用。

通常在这样的表格中，您会在表格中填写现有图像的预览，然后让用户单击按钮来替换图像或添加新图像。单击按钮后，您将显示一个新的文件输入。验证 php 端的所有内容。

# objective-c - 目标 C：imageNamed 加载不存在的图像

> ID：11080907
> 
> 赞同：1
> 
> 时间：2012-06-18T10:23:15.803
> 
> 标签：objective-c, ios, ios-simulator, imagenamed

我使用循环将图像加载到`NSMutableArray`. 每次迭代都使用:中的`imagedNamed`函数加载图像。`UIImage``[UIImage imageNamed:*name*];`

但是，我想更改一些图像。所以我从项目中删除了图像并添加了新图像。但是当我在 iOS 模拟器中运行应用程序时，会出现旧图像。即使我从项目中删除所有图像，它们仍然会出现。

有人可以解释为什么会发生这种情况，以及我该如何改变它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T10:25:14.027

问题是 XCode 没有识别新资源，通常修复它的唯一方法是从构建文件夹中删除旧资源。

`Cmd`+ `Opt`+ `Shift`+`K`清除所有目标和构建文件夹。这应该解决它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:28:57.723

清理您的项目 CMD + SHIFT + K（XCODE 4.3 及更高版本）。有时对已删除项目的引用仍保留在项目中，并确保您也重置了您的模拟器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:24:52.030

你在 XCode 中清理过你的项目吗？有时当您更改某些资源（例如图像）时，XCode 不会将新资源复制到模拟器/设备中。

为此，请转到“产品”->“清洁”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:26:12.403

从模拟器中删除应用程序，清理项目并确保该图像存在。图像名称区分大小写。它可能会在模拟器上看到，但在设备上图像不会显示

# gwt - 如何在 GWT 测试中模拟

> ID：11080908
> 
> 赞同：2
> 
> 时间：2012-06-18T10:23:18.303
> 
> 标签：gwt, mocking, gwtp

我正在使用 GWT 和框架[GWTP](http://code.google.com/p/gwt-platform/)开发一个应用程序来使用 MVP 模式。对于几乎每个视图，我都编写了一个继承 GWTTestCase 的测试。

几乎每次，我都会犯同样的错误：我调用 Mockito 来模拟一些东西（比如 ResourceBundle 接口）并让我的测试失败，因为 GWT 编译器无法转换 mockito。

在这种情况下我可以使用任何特定的模拟框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:33:10.997

使用 MVP 允许您在 JRE 中创建测试。MVP 的想法是最小化对 GWT 测试用例的依赖。您应该只测试演示者，因为演示者应该包含所有逻辑，并且视图必须仅用于装饰，即创建面板、按钮设计等。视图应该是 DUMP。如果您还没有看这两篇文章，我建议您这样做。[MVP1](https://developers.google.com/web-toolkit/articles/mvp-architecture)和[MVP2](https://developers.google.com/web-toolkit/articles/mvp-architecture-2)，这是我正在开发的一个简单应用程序的[链接，对于费用管理，您可以查看我在客户端的测试。](https://github.com/webmaster1803/ExReport)我正在使用 mockito 顺便说一句。祝你好运，我期待你的反馈。

# postgresql - postgresql slony-i 复制设置

> ID：11080915
> 
> 赞同：2
> 
> 时间：2012-06-18T10:23:37.710
> 
> 标签：postgresql, replication, slony

**PostgreSQL 版本：9.1.2**

**PgAdmin iii 版本：1.14.0**

**使用的操作系统：ubuntu 10.04**

我已经在网上搜索以安装和实施 slony-i 复制，但我找不到任何合适的指南...，我已经阅读了一些指南，但我无法理解...我是新手，所以请帮我简单的步骤...

所以，任何人都可以分享我的分步指南，安装 slony-i 并进行测试复制..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:44:17.203

这是[链接](http://www.pgadmin.org/docs/dev/slony-install.html)，您可以从中找到设置 slony-i 的简单步骤

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:17:34.470

Slony-I 官方文档在[这里](http://slony.info/documentation/2.1/index.html)

# iphone - 如何解码图像数据

> ID：11080917
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:23:47.663
> 
> 标签：iphone

我正在开发一个应用程序。在那里我从服务器获取图像信息。IU 得到了如下所示的每个图像数据。

```
iVBORw0KGgoAAAANSUhEUgAAAIYAAACGCAMAAAAvpwKjAA... 
```

所以我的问题是如何从这些数据中获取图像。请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:27:06.553

这是 NSData，您必须使用它来获取图像。

```
UIImage *image = [UIImage imageWithData:retrievedData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:27:39.453

试试这个代码

```
NSData *imageData = **//Image Data**;
UIImage *image= [UIImage imageWithData:data]; 
```

# java - 如何使用 Java 在 Oracle DB 中插入汉字

> ID：11080918
> 
> 赞同：1
> 
> 时间：2012-06-18T10:23:49.037
> 
> 标签：java, oracle, hibernate, jpa

我需要使用Java（hibernate 3.0 /jpa）在Oracle数据库中插入汉字，我尝试了很多方法都失败了。

当我坚持我在字段中看到 (??? ) 的实体时，当我检索该值时，我看到了相同的结果。

我的甲骨文`NLS_DATABASE_PARAMETERS`：

```
NLS_CHARACTERSET   WE8MSWIN1252
NLS_NCHAR_CHARACTERSET  AL16UTF16 
```

列类型为 Nvarchar。我在 persistence.xml 中设置了这个属性

```
<property name="hibernate.connection.useUnicode" value="true"  />
<property name="hibernate.connection.characterEncoding" value="UTF-8"/>
<property name="hibernate.connection.charSet" value="UTF-8"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:03:09.880

如果您有机会，请将您的数据库从字符集 WE8MSWIN1252 转换为 AL32UTF8（这是新安装的 Oracle 的默认设置）。然后您的所有问题都将消失，您不需要使用有问题的数据类型，如 NCHAR 或 NVARCHAR 或任何特殊的连接设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:25:56.760

我在 SQL Server 中遇到了同样的问题，我们通过将所有 varchar 字段转换为 nvarchar 来解决它。此外，所有相应的存储过程和返回类型都需要更改。确保所有程序也有 nvarchar 数据类型

# c# - 一个图像和一些文本到列表框中

> ID：11080919
> 
> 赞同：2
> 
> 时间：2012-06-18T10:23:50.130
> 
> 标签：c#, winforms

我花了很多时间来解决我的问题。我已经尝试了很长时间在图像下方绘制一张图像和一些文字。我的代码有什么问题。我看不到错误。我的自定义控制代码是：

```
using System;
using System.Drawing;
using System.IO;
using System.Windows.Forms;

namespace ImageListBox
{
    /// <summary>
    /// ImageListBox
    /// </summary>
    public partial class ImageListBox : ListBox
    {
        private Brush _brushText;
        private string _TextMessage;

        public ImageListBox():base()
        {
            DrawMode = DrawMode.OwnerDrawFixed;
        }

        protected override void OnDrawItem(DrawItemEventArgs e)
        {
            const int iWidth = 800;
            const int iHeight = 800;
            PointF ptfCenter = new PointF(iWidth / 2, iHeight / 2);

            base.OnDrawItem(e);
            if (e.Index > -1 && Items.Count > e.Index)
            {
                object itm = Items[e.Index];
                if (itm != null)
                {
                    string fileName = itm.ToString();
                    if (File.Exists(fileName))
                    {
                        Image img = null;
                        try
                        {
                            img = Image.FromFile(fileName);
                            {
                                _brushText = Brushes.Black;
                                Font font = new Font("Arial", 12);
                                Graphics g = e.Graphics;
                                Image img2 = GetThumbnail(img, e.Bounds);
                                //g.DrawString(_TextMessage,font,_brushText,0,img2.Height);
                                g.DrawImageUnscaled(img2, e.Bounds);

                            }
                        }
                        catch (Exception ex)
                        {
                            Graphics g = e.Graphics;
                            var sf = new StringFormat {Trimming = StringTrimming.EllipsisCharacter};
                            string message = string.Format("{0} konnte nicht geladen werden. Exception: {1}", fileName,
                                                           ex);
                            g.DrawString(message, Font, new SolidBrush(ForeColor), e.Bounds, sf);
                        }    
                    }

                }
            }
        }

        private Image GetThumbnail(Image pImage, Rectangle pBounds)
        {
            Font font = new Font("Arial", 12);
            Image ret = new Bitmap(pBounds.Width, pBounds.Height);
            Graphics g = Graphics.FromImage(ret);
            g.FillRectangle(new SolidBrush(Color.White), 0, 0, ret.Width, ret.Height * 10);

            float factor = Math.Max(pImage.Width/(float) pBounds.Width, pImage.Height/(float) pBounds.Height);
            g.DrawImage(pImage, 0, 0, pImage.Width/factor, pImage.Height/factor);
            g.Dispose();
            //g.DrawString("This is a Test a TEST!! ",font, _brushText, 0, pImage.Height);

            return ret;
        }

        public string GetText
        {
            get { return _TextMessage; }
            set { _TextMessage = value; }
        }
    }
} 
```

表格中的测试代码是：

```
namespace WindowsFormsApplication1
{
    public partial class RibbonForm1 : DevComponents.DotNetBar.Office2007RibbonForm
    {
        public RibbonForm1()
        {
            InitializeComponent();
            //Höhe der Items festlegen (die Breite floatet)
            this.imageListBox1.ItemHeight=200;
            //imageListBox1.GetText = "   Test auf verfügbarkeit   "; // Doesn't work

            //imageListBox1.Items.Add("----------------------------"); // Doesn't work
            //imageListBox1.Items.Add("   Test auf verfügbarkeit   "); // Doesn't work
            //imageListBox1.Items.Add("----------------------------"); // Doesn't work

            string windir = System.Environment.GetEnvironmentVariable("SystemRoot");
            if (windir != null)
            {
                string[] files = System.IO.Directory.GetFiles(windir, "*.bmp");
                foreach (string file in files)
                {
                    imageListBox1.Items.Add(file);

                    //imageListBox1.Items.Add("Text"); // Doesn't work
                }
            }
        }
    }
} 
```

我的收据需要`ListBox`with`Image`和 Text。

亲切的问候，

甜蜜的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:41:36.583

如果您想使用父类中的可绘制文本，请移至`base.OnDrawItem(e);`末尾，`OnDrawItem`因为您清除了此文本。而且，也许，您需要在绘制图像后将“DrawMode.OwnerDrawFixed”关闭为“DrawMode.Normal”或手动绘制字符串（如`g.DrawString(GetText(),...)`）

# database - 敏捷 - 数据库部署

> ID：11080931
> 
> 赞同：2
> 
> 时间：2012-06-18T10:24:22.560
> 
> 标签：database, agile, scrum, agile-processes

我们正在交付一个核心系统的彻底重写，交付团队在 Scrum 环境中工作。由于团队的规模，我们现在分成两个 Scrum 团队，他们的目标是每天集成代码。每当测试团队部署到我们的系统测试环境（每天作为标准）时，我们都会拆除数据库并重新填充所有参考数据——这是为了确保测试的基线。

这种方法的问题在于，当一个测试团队正在等待部署修复而另一个正在执行中期测试时，我们对速度的影响很大。为了尝试解决这个问题，我们提出了以下建议：

*   创建另一个测试环境（这非常昂贵），此外，我们仍然会遇到延迟，因为团队中的一个测试人员仍然无法部署他们的修复。
*   仅代码部署的选项（避免数据库崩溃）。

我们尝试并鼓励团队跨职能，并鼓励测试人员帮助测试人员找出阻碍部署的人，但这并不总是可行的。我们还希望任务大约需要 1-2 天的时间，所以我们不能很容易地分解项目的持续时间。

其他人在他们的环境中采用了哪些方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:10:03.090

与其拆除并重新开始，不如考虑一种“进化”数据库的方法，通过将每个更改制定为“增量脚本”，该脚本会进行结构更改（添加表、重命名列等）并迁移数据。

我已经使用过这种方法几次，当它成功时，它取得了巨大的成功——使团队和每个开发人员都能够更快地行动。

如果有兴趣，我有一篇博客文章，其中描述了我的一项工作：[http ://dearjunior.blogspot.se/2008/05/version-of-data-in-database.html](http://dearjunior.blogspot.se/2008/05/version-of-data-in-database.html)

如果你想深入，我推荐 [“重构数据库”](http://martinfowler.com/books/refactoringDatabases.html)

我们获得最多的团队开发了一大堆 bash 脚本来管理所有内容。但是，现在也有一些简洁的框架。我们已经开始使用[dbmaintain](http://www.dbmaintain.org/overview.html)，它实际上与我们自己开发的非常相似。

我彻底推荐这种方法。

[更新]几个月前，我刚刚看到软件工程电台播放了一个关于这个主题的[播客节目。](http://www.se-radio.net/2012/06/episode-186-martin-fowler-and-pramod-sadalage-on-agile-database-development/)

# html-parsing - 使用 Go lang 从网页中提取链接

> ID：11080936
> 
> 赞同：27
> 
> 时间：2012-06-18T10:24:34.820
> 
> 标签：html-parsing, go

我正在学习[谷歌的 Go 编程语言](http://golang.org/)。有谁知道从 html 网页中提取所有 URL 的最佳实践？

来自 Java 世界，有一些库可以完成这项工作，例如[jsoup](http://jsoup.org/)、[htmlparser](http://htmlparser.sourceforge.net/)等。但是对于 go lang，我想还没有可用的类似库吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-08-02T23:03:46.393

如果您了解 jQuery，您会爱上[GoQuery](https://github.com/PuerkitoBio/goquery)。

老实说，它是我在 Go 中找到的最简单、最强大的 HTML 实用程序，它基于 go.net 存储库中的 html 包。（好吧，所以它比解析器更高级，因为它不公开原始 HTML 令牌等，但如果你想用 HTML 文档实际完成任何事情，这个包会有所帮助。）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-18T13:23:45.973

Go 的 HTML 解析标准包仍在进行中，并且不是当前版本的一部分。您可能会尝试的第三方软件包是[go-html-transform](http://code.google.com/p/go-html-transform/)。它正在积极维护中。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-08T09:13:07.287

虽然用于 HTML 解析的 Go 包确实仍在开发中，但它可以在[go.net](http://godoc.org/code.google.com/p/go.net/html)存储库中找到。

它的来源在~~[`code.google.com/p/go.net/html`](https://code.google.com/p/go/source/browse?repo=net#hg%2Fhtml)~~ [`github.com/golang/net`](https://github.com/golang/net)并且正在积极开发中。

[在最近的疯狂讨论](https://groups.google.com/d/topic/golang-nuts/zf-N0Y1733o/discussion)中提到了这一点。

* * *

请注意，正如我在[这个答案](https://stackoverflow.com/a/26773479/6309)中提到的那样，使用 Go 1.4（2014 年 12 月），包现在是`golang.org/x/net`（请参阅[godoc](https://godoc.org/golang.org/x/net)）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-17T05:09:26.823

我四处搜索，发现有一个名为[Gokogiri](https://github.com/moovweb/gokogiri)的库，它听起来像 Ruby 的 Nogokiri。我认为这个项目也很[活跃](https://github.com/moovweb/gokogiri/graphs/commit-activity)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-13T04:21:05.913

我刚刚为 Go 发布了一个基于事件的开源 HTML 5.0 兼容解析包。你可以[在这里找到](https://github.com/calbucci/go-htmlparser)

这是从页面（来自 A 元素）获取所有链接的示例代码：

```
links := make([]string)

parser := NewParser(htmlContent)

parser.Parse(nil, func(e *HtmlElement, isEmpty bool) {
    if e.TagName == "link" {
        link,_ := e.GetAttributeValue("href")
        if(link != "") {
            links = appends(links, link)
        } 
    }
}, nil) 
```

要记住几件事：

*   这些是相对链接，而不是完整的 URL
*   不会收集动态生成的链接
*   还有其他未收集的链接（META 标签、图像、iframe 等）。修改此代码以收集这些代码非常容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-26T12:29:04.483

您也可以使用[“Colly”](https://github.com/gocolly/colly)（[文档](http://www.go-colly.org/docs/)），它通常用于网络报废

**特征**

1.  清洁 API
2.  快速（在单核上 > 1k 请求/秒）
3.  管理每个域的请求延迟和最大并发
4.  自动 cookie 和会话处理
5.  同步/异步/并行抓取
6.  分布式抓取
7.  缓存
8.  非 unicode 响应的自动编码
9.  Robots.txt 支持
10.  谷歌应用引擎支持

```
import (
   "fmt"
   "github.com/gocolly/colly"
)

func main() {
   c := colly.NewCollector()

   // Find and visit all links
   c.OnHTML("a", func(e *colly.HTMLElement) {
     e.Request.Visit(e.Attr("href"))
   })

   c.OnRequest(func(r *colly.Request) {
    fmt.Println("Visiting", r.URL)
   })

   c.Visit("http://go-colly.org/")
} 
```

# html - 如何在html中删除表格中的空格行和列

> ID：11080937
> 
> 赞同：0
> 
> 时间：2012-06-18T10:24:35.507
> 
> 标签：html, html-table

在我的 html 页面中，我有一个表格，每行有两个按钮，我想显示它们，行和列之间没有任何空格，即每行中的列之间没有空格，表格中的两行之间没有空格。我怎样才能得到这个？我试过：

```
<table>
     <tr>
          <td colspan = 2><a data-role="button" href = "getFun()" >check</a></td>
     </tr>
     <tr>                               
          <td><a data-role = "button"   href = "getFun()">check</a></td>                               
          <td><a data-role = "button"  href = "getFun()">check</a> </td>
     </tr>
     <tr>
          <td><a data-role = "button" href = "getFun()">check</a></td>
          <td><a data-role = "button" href = "getFun()">check</a></td>
     </tr>
 </table>

table{
    border-spacing:0;
    border-collapse:collapse;
} 
```

但它不适合我。请告诉我解决方案。我编辑了我的代码。请找到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:25:16.807

```
<table cellpadding="0" cellspacing="0"> 
```

[http://jsfiddle.net/Curt/5rkpy/](http://jsfiddle.net/Curt/5rkpy/)

# windows - 如何在 QTableView 中有标准的 Windows 虚线选择？

> ID：11080938
> 
> 赞同：0
> 
> 时间：2012-06-18T10:24:36.473
> 
> 标签：windows, qt, selection

QTableView 有很多选择模式，但所有这些都会导致一种选择，即单击行上的任意位置会选择整行，并且不会显示选择矩形。

当我选择项目时，我希望有带虚线边框的标准选择矩形。只有当我实际将鼠标悬停在项目的文本上时，才应该选择这些项目。

换句话说，我希望它表现得像桌面选择。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:28:51.487

这将允许您选择单个项目：

```
tableView->setSelectionBehavior(QAbstractItemView::SelectItems); 
```

这将帮助您获得虚线边框：

```
tableView->setSelectionMode(QAbstractItemView::NoSelection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:00:00.763

Are you saying that when you `setSelectionMode(QAbstractItemView::SingleSelection)` on your view, you still get the behavior of clicking selecting the entire row? That shouldn't be the case.

What is your model's class -- if derived, what Qt model do you derive from and what is your implementation of `flags()`?

# ruby-on-rails - 在 postgres 中创建两个具有相似结构的单独表是个好主意吗？

> ID：11080942
> 
> 赞同：0
> 
> 时间：2012-06-18T10:24:57.207
> 
> 标签：ruby-on-rails, postgresql, ruby-on-rails-3.1, schema

我正在使用 postgres db 开发 Rails 应用程序。我有一个名为 Mercer_review_votes 的表，其中架构是

```
--------------------------------------------------
 编号 | 整数
 用户 ID | 整数
 商家评论 ID | 整数
 价值 | 整数
 created_at | 没有时区的时间戳
 更新时间 | 没有时区的时间戳
--------------------------------------------------

```

我正在创建另一个涉及投票的部分（比如产品），创建另一个类似于此的模式或修改代码并仅使用一个表是个好主意。如果只有一张表，架构的外观如何？我可以面对什么样的问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:34:13.087

如果两个评论都包含完全相同的信息，那么我会选择一个包含“review_type”列的表。对于商店评论，该列将包含“商店”，而对于产品评论，该列将包含“产品”。

但是我缺少对在您的表定义中查看的存储的引用。如果您需要它（这很有可能，否则您将不知道评论属于哪个商店或产品），您可能最好有两个表。一个带有指向 store 表的外键，一个带有指向 product 表的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:56:18.150

这听起来像是一个[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)的好案例。

```
class Review < ActiveRecord::Base
  belongs_to :user
  belongs_to :reviewable, :polymorphic => true
end

class Merchant < ActiveRecord::Base
  has_many :reviews, :as => :reviewable
end

class Product < ActiveRecord::Base
  has_many :reviews, :as => :reviewable
end 
```

然后，您可以分别致电`@merchant.reviews`并`@product.reviews`获取商家和产品的评论。您可以调用`@review.reviewable`以获取已审核的对象。

多态关联基于如下表结构：

```
--------------------------------------------------
  id                  | integer 
  user_id             | integer 
  reviewable_id       | integer
  reviewable_type     | string
  value               | integer
  created_at          | timestamp without time zone
  updated_at          | timestamp without time zone
-------------------------------------------------- 
```

该`reviewable_type`列包含“可审查”对象的类名和`reviewable_id`它的 id。在迁移中，您可以使用以下方法创建这些列：

```
 t.references :reviewable, :polymorphic => true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:00:47.873

这对于 SO 来说可能过于开放，但我的看法是：这取决于！

有时它是有道理的。我不喜欢全局笔记表。

一般来说，我认为避免这种情况是值得的，但是当你不得不这样做时，让两个表都继承一个没有记录的共同基础可以极大地简化管理。

# php - 从 PHP 访问 JSON 数据到 javascript

> ID：11080946
> 
> 赞同：-2
> 
> 时间：2012-06-18T10:25:14.167
> 
> 标签：php, javascript, json

您好我有以下问题。我正在尝试访问我在 javascript 中从数据库中查询的数据，然后执行一个函数

```
<?php

    $sql_sp1 = "{call [IR_CMS].[dbo].[usp_GetPropertyPriceAndAvail](?,?)}";
    $params = array( array($ChaletID, SQLSRV_PARAM_IN),
    array($BoardBasisID, SQLSRV_PARAM_IN));
    $result_sp1 = sqlsrv_query( $conn, $sql_sp1, $params);
    if( $result_sp1 === false)
      {
        echo "2\. Get property price and avail - Error in query preparation/execution.\n";
        die( print_r( sqlsrv_errors(), true));
       }
    $data_sp1 = array(); 
    while($row_sp1 = sqlsrv_fetch_array($result_sp1, SQLSRV_FETCH_ASSOC)) {
    $data_sp1[] = $row_sp1;

   }
     //echo '<pre>';
     //print_r($data_sp1);
     //echo '</pre>';

?>
<script>

availdata = <?php echo json_encode($data_sp1); ?>;

</script> 
```

如果我回显数据，它会产生类似这样的内容

> [{"PropertyID":138,"PropertyName":"Yves","ShowAvail":"Y","PropertyStartDateID":509495,"StartDate":"2012-12-08","DurationDesc":"7 晚" ,"Saving":null,"Price":null,"Avail":"4","LiveSeason":1,"SeasonDesc":"2012-13","BoardBasisDesc":"Catered","PropTypeDesc":" Chalet Hotel","ResortName":"Les Arcs","CountryDesc":"France","FTA":"FTA","Sole_Use":0,"IsInShorlist":0}];

但我无法在 javascript 中访问它。如果我直接将数据复制并粘贴到我的 javascript 中，它将起作用，但如果我尝试动态访问它，则不会。是的，我已经完成了我的研究，我很确定这应该有效任何想法我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:24:24.370

似乎您的代码应该可以工作。调试它并解决问题的最简单方法是查看 HTML 源代码。

只需加载页面，右键单击并选择“查看页面源”。

我的猜测是，`encode_json`它不会重现您认为的效果 - 可能会创建无效的 JSON 或某些 JSON 结构，而不是您预期的结构。

如果您在此处复制/粘贴 HTML，它将更容易为您提供帮助。

我还建议在开发人员窗格打开（F12 或）的情况下使用“chrome” `ctrl+shift+j`——这将使每个 javascript 错误立即可见。

如果您更喜欢 firefox - firebug 是您的最佳选择。Explorer 也有一个可通过 F12 使用的开发人员窗格。

尝试调试代码访问`availdata`- 只需`debugger;`在尝试访问之前编写。确保开发人员窗格已打开，并确保删除`debugger;`之前的版本。

这些步骤将帮助您快速解决问题，或者至少为我们提供更多信息以提供帮助。请让我知道是否有任何进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:30:32.050

尝试这个：

`JSON.parse(your_data);`

# mysql - mySQL 联合没有按预期工作

> ID：11080950
> 
> 赞同：1
> 
> 时间：2012-06-18T10:25:18.193
> 
> 标签：mysql, sql

我有以下 SQL 语句L：

```
select DATE(bla), count(*) from tableA group by DATE(bla)
UNION ALL
select DATE(bla), count(*) from tableB group by DATE(bla)
order by "DATE(bla)" 
```

我从查询的第一部分得到什么：

```
(2012-05-07,  13) 
```

从第二部分开始：

```
(2012-05-07,  15) 
```

执行整个查询后我希望看到的内容：

```
[(2012-05-07,  13),
(2012-05-07,  15)] 
```

我真正得到的：

```
[(2012-05-07,  13)] 
```

问题是为什么以及我应该改变什么来得到我所期望的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:43:52.110

`UNION`删除重复的行，尝试`UNION ALL`：

```
select DATE(bla), count(*) from tableA group by DATE(bla)
UNION ALL
select DATE(bla), count(*) from tableB group by DATE(bla) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:56:13.580

好的，我解决了这个问题。你是对的，问题与数据有关。在实际情况下，我有很多行，但认为查询的“按日期排序（bla）”部分将按日期对它们进行排序。这不是真的，在我为日期字段添加别名之前，这将被忽略。这就是为什么我如此困惑。很抱歉，感谢您的帮助。

# java - JoinColumns 中使用的列的 EclipseLink 默认值

> ID：11080951
> 
> 赞同：0
> 
> 时间：2012-06-18T10:25:28.210
> 
> 标签：java, jpa, eclipselink

我有这段代码：

```
@Entity
@Table(name = "MOVERS")
public class MOVers implements Serializable {
    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumns({
    @JoinColumn(name = "X1077_69_EDECESSOR", referencedColumnName = "CLASSID"),
    @JoinColumn(name = "X1077_70_EDECESSOR", referencedColumnName = "ID")})
    private MOVers predecessor;
} 
```

数据库不应有空值。如果创建的版本是第一个，那么它不应该有前任，并且列 (X1077_69_EDECESSOR, X1077_70_EDECESSOR) 应该等于 0。出于这个原因，我考虑过创建 Dummy 对象，但这是不可能的，因为其他一些列必须是唯一的。

我怎样才能通过使用 EclipseLink 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:16:48.597

我假设您在数据库中没有设置外键，因为插入 0 会使这样的约束失败。奇怪的是你有一个非空约束，但没有外键约束。最好修复您的数据库，因为它设计不当。

如果您无法设置具有 0 id 的空根，那么您可以使连接列可插入/可更新 = false 并定义基本字段以写入列，那么您将可以控制它们在模型中的值。您需要在设置前任时设置基本字段，如果没有前任，则将它们默认为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:19:56.027

该数据库没有任何外键，并且该数据库用于其他具有不理解 NULL 字段的持久性 API 的应用程序。当我在新对象的创建阶段添加 UPDATE 语句时，我解决了这个问题：

```
SET X1077_69_EDECESSOR = 0, X1077_70_EDECESSOR = 0, WHERE ID = :moversid 
```

在这种情况下，新对象使用 NULL 字段创建，然后它们将更新为 0 值。

# java - 在android中读取嵌套的json字符串

> ID：11080952
> 
> 赞同：0
> 
> 时间：2012-06-18T10:25:31.437
> 
> 标签：java, android, json

我使用以下代码将字符串转换为 json 并解析它。

```
String sb= {"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, "objects": [{"api_key": "c87391754b522d0c83b2c8b5e4c8cfd614559632deee70fdf1b48d470307e40e", "homeAddress": "kathmandu", "resource_uri": "/api/ca/entry/1/", "username": "sumit"}]}
    try {

                    JSONObject jsonObject = new JSONObject(sb);
                    JSONObject object = jsonObject.getJSONObject("objects");  
                    String api_key= object.getString("api_key");  
                    Toast.makeText(HelloWorldActivity.this, api_key, Toast.LENGTH_SHORT).show();

        } catch (JSONException e) {
                             e.printStackTrace();
                            } 
```

按照一些教程，我尝试解析 json，但我无法解析它。例如：我想返回 api_key 作为 c87391754b522d0c83b2c8b5e4c8cfd614559632deee70fdf1b48d470307e40e

我在上面的代码中弄错的任何事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:32:34.973

始终使用 JSONLint 或类似网站来格式化您的 JSON。

你的 JSON 是这样的

```
{
    "meta": {
        "limit": 20,
        "next": null,
        "offset": 0,
        "previous": null,
        "total_count": 1
    },
    "objects": [
        {
            "api_key": "c87391754b522d0c83b2c8b5e4c8cfd614559632deee70fdf1b48d470307e40e",
            "homeAddress": "kathmandu",
            "resource_uri": "/api/ca/entry/1/",
            "username": "sumit"
        }
    ]
} 
```

这里的“对象”将返回数组而不是对象。

将您的代码更改为以下。

```
 try {

            JSONObject jsonObject = new JSONObject(sb);
            JSONArray array = jsonObject.getJSONArray("objects");

            String key = array.getJSONObject(0).getString("api_key");
            String uname = array.getJSONObject(0).getString("username");
            Toast.makeText(HelloWorldActivity.this, username + " " + key,
                    Toast.LENGTH_SHORT).show();

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# java - JAVA - MultiMaps 和 entryset()

> ID：11080953
> 
> 赞同：0
> 
> 时间：2012-06-18T10:25:33.047
> 
> 标签：java, data-structures, collections, map, synchronization

一个希望快速的问题：

我计划构建一个 MultiMap 样式结构，内部结构为 Map> 结构，并覆盖以适当方式重定向到内部地图和列表的方法（因此这对用户来说就像一个 multiMap）。当然，可能会有一些附加功能，特别是如果我要使用 Map> 或 Map> 结构的版本，我可能会在 List 版本正常工作后这样做。

我关心的是 entrySet() 和类似的方法：如何覆盖这些以使用相同的内部数据并通过 remove 方法传播？

我怀疑这些集合是通过将它们的 remove 函数重定向到 map 的 remove 函数构建的，因此只要我实现了 MultiMap 的 remove 函数，它就会运行。谁能证实这一点？

Collections for Maps 中的一些静态函数也让我担心。Collections 类如何生成不可修改或同步的表单，有没有办法确保我的 MultiMap 与此兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:14:25.943

您是否考虑过使用现有的 Multimap 而不是实施新的？

例如，查看[Google Guava Multimap ，并查看](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Multimap.html)[Multimaps](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Multimaps.html)了解静态实用程序方法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:34:08.750

我想这取决于你将如何创建你的多图。

我做了类似的事情，基本上创建了一个 MultiMap 作为 Map ，其中 Collection 是值。通过在内部使用地图，我的 MultiMap 是一个普通的地图，所有的实用程序基本上都在继续工作。

```
public class MultiMap<K, V, T extends Collection<V>> implements Map<K, T> 
```

# php - PHP & MYSQL 从数据库中拉行，将每个单元格设置为变量

> ID：11080955
> 
> 赞同：0
> 
> 时间：2012-06-18T10:25:47.793
> 
> 标签：php, mysql, variables

好的，不知道如何谷歌这个所以我很友好地问一个可能很愚蠢的问题，但为什么这段代码不起作用？大声笑变量在 $menu 变量之外正确显示，但是当我尝试输出 $menu 的内容时，它显示字面上的“$online”文本。

```
$menu = '
<div id="service_info">
    <span id="service_availability">Availability</span>
    <li class="availability_$Online">Online</li>
    <li class="availability_$InPerson">In Person</li>
    <li class="availabilit_no">Over the Phone</li>
</div>
'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:35:31.760

嗯，我经常用

```
$menu = <<<EOD
<div id="service_info">
    <span id="service_availability">Availability</span>
    <li class="availability_$Online">Online</li>
    <li class="availability_$InPerson">In Person</li>
    <li class="availabilit_no">Over the Phone</li>
</div>
EOD; 
```

这只是看起来更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:36:11.913

仅针对这些情况有一个特殊的字符串语法：[HEREDOC](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
$menu = <<<MENU
<div id="service_info">
    <span id="service_availability">Availability</span>
    <li class="availability_$Online">Online</li>
    <li class="availability_$InPerson">In Person</li>
    <li class="availabilit_no">Over the Phone</li>
</div>
MENU; 
```

顺便说一句，我真的建议研究所有链接的页面。)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T10:26:56.023

使用双引号。单引号中无法识别变量。

```
$menu = "
<div id=\"service_info\">
    <span id=\"service_availability\">Availability</span>
    <li class=\"availability_$Online\">Online</li>
    <li class=\"availability_$InPerson\">In Person</li>
    <li class=\"availabilit_no\">Over the Phone</li>
</div>
"; 
```

仅当您断开字符串时，才能使用单引号显示变量：

```
$menu = '
<div id="service_info">
    <span id="service_availability">Availability</span>
    <li class="availability_'.$Online.'">Online</li>
    <li class="availability_'.$InPerson.'">In Person</li>
    <li class="availabilit_no">Over the Phone</li>
</div>
'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:40:33.147

我只想提出一个建议，因为您似乎已经找到了解决方案。如果不需要在 php 变量中存储 html 标签，请在 html 中包含 php 变量。

`**<div id="service_info"> <span id="service_availability">Availability</span> <li class="availability_<?php echo $Online; ?>">Online</li> <li class="availability_<?php echo $InPerson;?>">In Person</li> <li class="availabilit_no">Over the Phone</li> </div>**`

# jsf - 在 JSF 中包含丰富的日历

> ID：11080963
> 
> 赞同：0
> 
> 时间：2012-06-18T10:26:26.617
> 
> 标签：jsf, calendar, richfaces

任何人都可以帮助我如何在 JSF 中创建丰富的日历。使用 maven 创建的示例项目

以下是我的代码

默认.xhtml

```
<rich:calendar id="dtDOB" 
  datePattern="yyyy-MM-dd" required="true" 
  label="startcalender"  >
</rich:calendar> 
```

我收到以下错误。

```
Warning: This page calls for XML namespace http://richfaces.org/rich declared
with prefix rich but no taglibrary exists for that namespace. 
```

我知道我必须错过 web.xml 文件中的某些内容。天气我必须`<dependency>`在 pom.xml 文件中添加一些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:33:14.623

您一定没有在项目中添加 Richfaces 库。去 [http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/GettingStarted.html](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/GettingStarted.html)

# android - 从 android 应用程序调用 web 服务时出现 XMLParseErrorException

> ID：11080969
> 
> 赞同：0
> 
> 时间：2012-06-18T10:26:45.103
> 
> 标签：android, web-services, jboss

我有一个简单的 java 项目，其中包含一个简单的 web 服务

**包**：pcp.webservices

**文件 WEB-INF/lib/web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
  <display-name>Pcp web services</display-name>
  <servlet>
    <servlet-name>pcpWS</servlet-name>
    <servlet-class>pcp.webservices.pcpWS</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>pcpWS</servlet-name>
    <url-pattern>/pcpWS</url-pattern>
  </servlet-mapping>
  <session-config>
    <session-timeout>30</session-timeout>
  </session-config>
</web-app> 
```

文件**src/pcpWS.java**：

```
@WebService(name = "pcpWS")
/** @SOAPBinding indica información vinculate para los mensajes SOAP.*/
@SOAPBinding(style = SOAPBinding.Style.DOCUMENT,  
use = SOAPBinding.Use.LITERAL,  
parameterStyle = SOAPBinding.ParameterStyle.WRAPPED)

public class pcpWS {

    @WebMethod
// Usuario is an external class containing filed likes Name,Surname,...
    public Usuario ValidarUsuario(@WebParam(name = "login") String login,@WebParam(name = "password") String password) {
        //comprobar si existe o no el usuario

        //codigo de prueba
        Usuario u=new Usuario();
        if (login.contentEquals("H"))
        {
            u.IdUsuario = "8888";
            u.Nombre = "Andrea";
            u.Apellidos = "Martín";
            u.Rol = "Administrador";
            u.Centro = "Keyland Valladolid";
        }
        else
        {
            u.IdUsuario = "9999";
            u.Nombre = "Pablo";
            u.Apellidos = "Díaz";
            u.Rol = "Trabajador";
            u.Centro = "Keyland Valladolid";
        }

        return u;
    }

} 
```

webservice 部署 JBoss 4.2 并生成以下**wsdl 文件**：

```
<definitions name='pcpWSService' targetNamespace='http://webservices.pcp/' xmlns='http://schemas.xmlsoap.org/wsdl/' xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/' xmlns:tns='http://webservices.pcp/' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>
 <types>
  <xs:schema targetNamespace='http://webservices.pcp/' version='1.0' xmlns:tns='http://webservices.pcp/' xmlns:xs='http://www.w3.org/2001/XMLSchema'>
   <xs:element name='ConsultarNotificaciones' type='tns:ConsultarNotificaciones'/>
   <xs:element name='ConsultarNotificacionesResponse' type='tns:ConsultarNotificacionesResponse'/>
   <xs:element name='Responsables' type='tns:Responsables'/>
   <xs:element name='ResponsablesResponse' type='tns:ResponsablesResponse'/>
   <xs:element name='ValidarUsuario' type='tns:ValidarUsuario'/>
   <xs:element name='ValidarUsuarioResponse' type='tns:ValidarUsuarioResponse'/>
   <xs:complexType name='ValidarUsuario'>
    <xs:sequence>
     <xs:element minOccurs='0' name='login' type='xs:string'/>
     <xs:element minOccurs='0' name='password' type='xs:string'/>
    </xs:sequence>
   </xs:complexType>
   <xs:complexType name='ValidarUsuarioResponse'>
    <xs:sequence>
     <xs:element minOccurs='0' name='return' type='tns:usuario'/>
    </xs:sequence>
   </xs:complexType>
   <xs:complexType name='usuario'>
    <xs:sequence>
     <xs:element minOccurs='0' name='IdUsuario' type='xs:string'/>
     <xs:element minOccurs='0' name='Nombre' type='xs:string'/>
     <xs:element minOccurs='0' name='Apellidos' type='xs:string'/>
     <xs:element minOccurs='0' name='Rol' type='xs:string'/>
     <xs:element minOccurs='0' name='Centro' type='xs:string'/>
     <xs:element minOccurs='0' name='apellidos' type='xs:string'/>
     <xs:element minOccurs='0' name='centro' type='xs:string'/>
     <xs:element minOccurs='0' name='idUsuario' type='xs:string'/>
     <xs:element minOccurs='0' name='nombre' type='xs:string'/>
     <xs:element minOccurs='0' name='rol' type='xs:string'/>
    </xs:sequence>
   </xs:complexType>
   <xs:complexType name='Responsables'>
    <xs:sequence/>
   </xs:complexType>
   <xs:complexType name='ResponsablesResponse'>
    <xs:sequence>
     <xs:element maxOccurs='unbounded' minOccurs='0' name='return' type='tns:responsable'/>
    </xs:sequence>
   </xs:complexType>
   <xs:complexType name='responsable'>
    <xs:sequence>
     <xs:element minOccurs='0' name='Id' type='xs:string'/>
     <xs:element minOccurs='0' name='Nombre' type='xs:string'/>
     <xs:element minOccurs='0' name='nombre' type='xs:string'/>
    </xs:sequence>
   </xs:complexType>
   <xs:complexType name='ConsultarNotificaciones'>
    <xs:sequence>
     <xs:element minOccurs='0' name='idUsu' type='xs:string'/>
    </xs:sequence>
   </xs:complexType>
   <xs:complexType name='ConsultarNotificacionesResponse'>
    <xs:sequence>
     <xs:element maxOccurs='unbounded' minOccurs='0' name='return' type='tns:notificacion'/>
    </xs:sequence>
   </xs:complexType>
   <xs:complexType name='notificacion'>
    <xs:sequence>
     <xs:element minOccurs='0' name='Descripcion' type='xs:string'/>
     <xs:element minOccurs='0' name='Fecha' type='xs:string'/>
     <xs:element minOccurs='0' name='Tipo' type='xs:string'/>
     <xs:element minOccurs='0' name='URL' type='xs:string'/>
    </xs:sequence>
   </xs:complexType>
  </xs:schema>
 </types>
 <message name='pcpWS_Responsables'>
  <part element='tns:Responsables' name='Responsables'></part>
 </message>
 <message name='pcpWS_ValidarUsuarioResponse'>
  <part element='tns:ValidarUsuarioResponse' name='ValidarUsuarioResponse'></part>
 </message>
 <message name='pcpWS_ResponsablesResponse'>
  <part element='tns:ResponsablesResponse' name='ResponsablesResponse'></part>
 </message>
 <message name='pcpWS_ConsultarNotificaciones'>
  <part element='tns:ConsultarNotificaciones' name='ConsultarNotificaciones'></part>
 </message>
 <message name='pcpWS_ConsultarNotificacionesResponse'>
  <part element='tns:ConsultarNotificacionesResponse' name='ConsultarNotificacionesResponse'></part>
 </message>
 <message name='pcpWS_ValidarUsuario'>
  <part element='tns:ValidarUsuario' name='ValidarUsuario'></part>
 </message>
 <portType name='pcpWS'>
  <operation name='ConsultarNotificaciones' parameterOrder='ConsultarNotificaciones'>
   <input message='tns:pcpWS_ConsultarNotificaciones'></input>
   <output message='tns:pcpWS_ConsultarNotificacionesResponse'></output>
  </operation>
  <operation name='Responsables' parameterOrder='Responsables'>
   <input message='tns:pcpWS_Responsables'></input>
   <output message='tns:pcpWS_ResponsablesResponse'></output>
  </operation>
  <operation name='ValidarUsuario' parameterOrder='ValidarUsuario'>
   <input message='tns:pcpWS_ValidarUsuario'></input>
   <output message='tns:pcpWS_ValidarUsuarioResponse'></output>
  </operation>
 </portType>
 <binding name='pcpWSBinding' type='tns:pcpWS'>
  <soap:binding style='document' transport='http://schemas.xmlsoap.org/soap/http'/>
  <operation name='ConsultarNotificaciones'>
   <soap:operation soapAction=''/>
   <input>
    <soap:body use='literal'/>
   </input>
   <output>
    <soap:body use='literal'/>
   </output>
  </operation>
  <operation name='Responsables'>
   <soap:operation soapAction=''/>
   <input>
    <soap:body use='literal'/>
   </input>
   <output>
    <soap:body use='literal'/>
   </output>
  </operation>
  <operation name='ValidarUsuario'>
   <soap:operation soapAction=''/>
   <input>
    <soap:body use='literal'/>
   </input>
   <output>
    <soap:body use='literal'/>
   </output>
  </operation>
 </binding>
 <service name='pcpWSService'>
  <port binding='tns:pcpWSBinding' name='pcpWSPort'>
   <soap:address location='http://127.0.0.1:8080/webServices/pcpWS'/>
  </port>
 </service>
</definitions> 
```

**调用代码（来自android应用程序）：**

```
private final String NAMESPACE = "http://webservices.pcp/";
private final String URL = "http://127.0.0.1";
private final String SOAPACTION = "";
private final String METHOD = "ValidarUsuario";

                 String user = pars[0];
                 String password = pars[1];
                SoapObject request = new SoapObject(NAMESPACE, METHOD); 
                SoapSerializationEnvelope sobre = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                sobre.dotNet = false;       
                request.addProperty("login", user);        
                request.addProperty("password", password); 
                sobre.setOutputSoapObject(request); 

                HttpTransportSE transporte = new HttpTransportSE(URL);        
                try {
                    transporte.call(SOAPACTION, sobre);
                } catch (IOException e) {
                //  JOptionPane.e.printStackTrace();
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                SoapObject resultado = null;
                try {
                    resultado = (SoapObject)sobre.getResponse();
                } catch (SoapFault e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                //comprobar si devuelve un usuario nulo o no

                Usuario usu = new Usuario();
                usu.IdUsuario= resultado.getProperty(0).toString();
                usu.Nombre = resultado.getProperty(1).toString();
                usu.Apellidos = resultado.getProperty(2).toString();
                usu.Rol = resultado.getProperty(3).toString();   
                usu.Centro=resultado.getProperty(4).toString(); 
```

启动的异常是**XmlPullParserException**，实际上捕获异常后的变量**resultado**仍然为空。

似乎正确调用了 Web 服务，但启动了异常。

难道我做错了什么？

这是完整的**logcat 堆栈跟踪**：

```
06-18 11:49:21.964: E/AndroidRuntime(335): FATAL EXCEPTION: main
06-18 11:49:21.964: E/AndroidRuntime(335): java.lang.RuntimeException: Unable to start activity ComponentInfo{es.es/es.es.MainActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{es.es/es.es.MiCuentaActivity}: java.lang.NullPointerException
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.os.Looper.loop(Looper.java:123)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-18 11:49:21.964: E/AndroidRuntime(335):  at java.lang.reflect.Method.invokeNative(Native Method)
06-18 11:49:21.964: E/AndroidRuntime(335):  at java.lang.reflect.Method.invoke(Method.java:507)
06-18 11:49:21.964: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-18 11:49:21.964: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-18 11:49:21.964: E/AndroidRuntime(335):  at dalvik.system.NativeStart.main(Native Method)
06-18 11:49:21.964: E/AndroidRuntime(335): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{es.es/es.es.MiCuentaActivity}: java.lang.NullPointerException
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1487)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.widget.TabHost.setCurrentTab(TabHost.java:326)
06-18 11:49:21.964: E/AndroidRuntime(335):  at es.es.MainActivity.onCreate(MainActivity.java:31)

06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-18 11:49:21.964: E/AndroidRuntime(335):  ... 11 more
06-18 11:49:21.964: E/AndroidRuntime(335): Caused by: java.lang.NullPointerException
06-18 11:49:21.964: E/AndroidRuntime(335):  at es.es.MiCuentaActivity.onCreate(MiCuentaActivity.java:25)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-18 11:49:21.964: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-18 11:49:21.964: E/AndroidRuntime(335):  ... 19 more 
```

（MainActivity 是应用程序中的“基础”活动，代码在 AsynkThread 中运行，因为如果在主线程中完成，AccesoCuentaActivity，它会启动`NetworkOnMainThreadException`）

# java - Android 4.0：使用 Tabs + ListView + details 时遇到问题

> ID：11080970
> 
> 赞同：0
> 
> 时间：2012-06-18T10:26:53.447
> 
> 标签：java, android, listview, detailsview

我有一个通过扩展此示例获得的简单应用程序（带有片段内容的选项卡）：http: [//developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)。

其中一个选项卡需要有一个 ListView 并且单击一个项目后，如果屏幕很小，则详细信息应显示在另一个屏幕上，如果屏幕很大（或在横向模式下），则应在同一屏幕上显示。

我试图在这里集成这个示例：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentLayout.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentLayout.html)，但这是一个活动，而不是一个片段，所以我不能使用：

```
setContentView(R.layout.fragment_list_layout); 
```

更多细节：

我有一个带有 TabHost 的 FragmentActivity，其内容是片段。其中一个片段必须是 ListFragment，它可以在与列表相同的屏幕上显示详细信息，例如来自 FragmentLayout.java 的示例：

![在此处输入图像描述](../Images/e5c72a81bcbfd8ce7487a38bec0ce515.png)

我想使用**推荐的做法（片段作为选项卡内容）**来获得这个功能。这可能吗？

如果没有，我已经尝试并设法在选择某个选项卡时启动**另一个 FragmentActivity 。**目标是使用 FragmentActivity 作为我的布局（ListView + 片段）的容器，就像在 FragmentLayout 示例中一样，除了我似乎无法将之前创建的选项卡菜单添加到它。那么如何让这个工作呢？

目前：

![在此处输入图像描述](../Images/1bfd3ca41d8f35af6d6123e231638ec8.png)

选择“随机选项卡”后：

![在此处输入图像描述](../Images/5ea824b4f097eabbaab11f8f82528996.png)

我最后的手段想要的外观（将 FragmentActivity 与原始 tabHost 分开）：

![在此处输入图像描述](../Images/d8b457602624e6e07f8b29760b7a2397.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:31:08.747

我通过在我的 tabContent 中有两个容器解决了这个问题，一个用于 ListView 片段，一个用于详细信息片段。这是我现在的布局：

```
<HorizontalScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true"
    android:scrollbars="vertical" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" />
</HorizontalScrollView>

<FrameLayout
    android:id="@android:id/tabcontent"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_weight="0" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:baselineAligned="false"
    android:fadingEdge="none" >

    <FrameLayout
        android:id="@+android:id/realtabcontent"
        android:layout_width="0px"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

    <FrameLayout
        android:id="@+android:id/details_container"
        android:layout_width="0px"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:visibility="gone" />
</LinearLayout> 
```

在此之后可以正常处理选项卡。

# php - 无法通过 PHP 连接到 mySQL DB（msqli 面向对象问题）

> ID：11080975
> 
> 赞同：0
> 
> 时间：2012-06-18T10:27:07.067
> 
> 标签：php, mysql, mysqli, database-connection

我正在尝试以面向对象的方式从我的 Heroku 应用程序连接到 mysql db (Xeround)：

```
$this->db = new mysqli(
    Credentials::databaseHost(), 
    Credentials::databaseUsername(), 
    Credentials::databasePassword(), 
    Credentials::databaseName()); 
```

（为了清楚起见——>这条线位于我使用的中央调度器的构造器中。如果需要，这个调度器会注入 sql 连接）

在我本地运行的生产环境中，一切正常，但是一旦我在 Heroku 上对其进行测试，应用程序就会在上述位置挂起。没有错误消息。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:10:19.057

不知道这对你们来说是否仍然是个问题，但不，heroku 不支持 mysqli。

# java - 如何在java中对hasmap进行排序？

> ID：11080979
> 
> 赞同：0
> 
> 时间：2012-06-18T10:27:28.803
> 
> 标签：java, map

这是我的哈希图：

`Map<String,String> unsortMap = new HashMap<String,String>()`此地图包含如下值

```
unsortMap.put("18/06/2012", "18/06/2012");
unsortMap.put("19/06/2012", "19/06/2012");
unsortMap.put("20/06/2012", "20/06/2012");
unsortMap.put("26/06/2012", "26/06/2012");
unsortMap.put("27/06/2012", "27/06/2012");
unsortMap.put("04/07/2012", "04/07/2012");
unsortMap.put("13/07/2012", "13/07/2012");
unsortMap.put("29/06/2012", "29/06/2012"); 
```

我用来对该地图进行排序的代码如下：

```
package samples;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

public class SortMapExample{

   public static void main(String[] args) {

    System.out.println("Unsort Map......");
    Map<String,String> unsortMap = new HashMap<String,String>();

    unsortMap.put("18/06/2012", "18/06/2012");
    unsortMap.put("19/06/2012", "19/06/2012");
    unsortMap.put("20/06/2012", "20/06/2012");
    unsortMap.put("26/06/2012", "26/06/2012");
    unsortMap.put("27/06/2012", "27/06/2012");
    unsortMap.put("04/07/2012", "04/07/2012");
    unsortMap.put("13/07/2012", "13/07/2012");
    unsortMap.put("29/06/2012", "29/06/2012");

    Iterator iterator=unsortMap.entrySet().iterator();

        for (Map.Entry entry : unsortMap.entrySet()) {
            System.out.println("Key : " + entry.getKey() 
                + " Value : " + entry.getValue());
        }

        System.out.println("Sorted Map......");
        Map<String,String> sortedMap =  sortByComparator(unsortMap);

        for (Map.Entry entry : sortedMap.entrySet()) {
            System.out.println("Key : " + entry.getKey() 
                + " Value : " + entry.getValue());
        }
   }

   private static Map sortByComparator(Map unsortMap) {

        List list = new LinkedList(unsortMap.entrySet());

        //sort list based on comparator
        Collections.sort(list, new Comparator() {
             public int compare(Object o1, Object o2) {
               return ((Comparable) ((Map.Entry) (o1)).getValue())
               .compareTo(((Map.Entry) (o2)).getValue());
             }
    });

        //put sorted list into map again
    Map sortedMap = new LinkedHashMap();
    for (Iterator it = list.iterator(); it.hasNext();) {
         Map.Entry entry = (Map.Entry)it.next();
         sortedMap.put(entry.getKey(), entry.getValue());
    }
    return sortedMap;
   }    
} 
```

我得到的结果是这样的：

```
Sorted Map......
Key : 04/07/2012 Value : 04/07/2012
Key : 13/07/2012 Value : 13/07/2012
Key : 18/06/2012 Value : 18/06/2012
Key : 19/06/2012 Value : 19/06/2012
Key : 20/06/2012 Value : 20/06/2012
Key : 26/06/2012 Value : 26/06/2012
Key : 27/06/2012 Value : 27/06/2012
Key : 29/06/2012 Value : 29/06/2012 
```

我希望结果如下所示：（地图也应按月份排序）

```
18/06/2012
19/06/2012
20/06/2012
26/06/2012
27/06/2012
29/06/2012
04/07/2012
13/07/2012 
```

请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:29:26.553

[`parse()`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)`String`to`Date`然后比较两个日期实例而不是`String`

请参阅[此示例](https://stackoverflow.com/questions/6668696/parsing-from-string-to-date)以转换`String`为`Date`，现在一旦您有了日期实例，它就已经实现了您可以简单使用的比较器

```
return dateInstance1.compare(dateInstance2) 
```

在你的比较器中

**注意**：如果您将这些日期作为字符串从数据库中读取，[请参阅此](https://stackoverflow.com/questions/11056119/sql-timestamp-to-java-date/11056134#11056134)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T10:30:16.920

因为`HashMap`是无序的。您应该使用`TreeMap`而不是`HashMap`. 而且您还需要解析`String`以`Date`进行比较。

详情：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T10:31:56.877

您正在对字符串进行排序，字符串的默认行为是按 ASCII 顺序排序。

如果您想以其他方式对键进行排序，则需要将它们转换为您真正想要的类型（在这种情况下为日期）

使用 SimpleDateFormat 将键转换为 Date 对象并进行比较。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T10:37:30.693

将您的数据转换为 SortedMap，特别是[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)实例。

使用带有 Comparator 的构造函数，并在其中执行比较逻辑。

# asp.net - 如何在 MVC 3 中为复选框列表创建事件

> ID：11080985
> 
> 赞同：1
> 
> 时间：2012-06-18T10:27:44.760
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

如何在 MVC 3 中为复选框列表创建事件我可以使用

```
 @using (Html.BeginForm("Search", "Home"))
            {
                <div>white: @Html.CheckBox("white") </div>
                <div>black: @Html.CheckBox("black") </div>

                <input type="submit" value="Search" />
            } 
```

但我需要在没有提交按钮的情况下执行此操作，我需要白色和黑色复选框的事件，该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T10:45:24.760

你可以通过 JQuery 来做到这一点：

```
$('#white, #black').change(function() {
  $('#form_id').submit();
}); 
```

# android - Scribe 库错误：NoClassDefFoundError

> ID：11080988
> 
> 赞同：1
> 
> 时间：2012-06-18T10:27:53.947
> 
> 标签：android, noclassdeffounderror

我正在尝试使用 Scribe 库来练习创建使用 OAuth 的应用程序。但是，当我尝试构建我的应用程序时，出现以下错误：

```
06-18 12:11:49.336: E/dalvikvm(4800): Could not find class'org.scribe.builder.ServiceBuilder', referenced from method lite.hattrick.main.LoginActivity.onCreate
06-18 12:11:49.336: W/dalvikvm(4800): VFY: unable to resolve new-instance 783 (Lorg/scribe/builder/ServiceBuilder;) in Llite/hattrick/main/LoginActivity;
06-18 12:11:49.336: D/dalvikvm(4800): VFY: replacing opcode 0x22 at 0x0018
06-18 12:11:49.336: E/dalvikvm(4800): Could not find class 'org.scribe.model.Verifier', referenced from method lite.hattrick.main.LoginActivity.onResume
06-18 12:11:49.336: W/dalvikvm(4800): VFY: unable to resolve new-instance 790 (Lorg/scribe/model/Verifier;) in Llite/hattrick/main/LoginActivity;
06-18 12:11:49.336: D/dalvikvm(4800): VFY: replacing opcode 0x22 at 0x0029
06-18 12:11:49.336: D/dalvikvm(4800): DexOpt: unable to opt direct call 0x18d4 at 0x1a in Llite/hattrick/main/LoginActivity;.onCreate
06-18 12:11:49.336: D/dalvikvm(4800): DexOpt: unable to opt direct call 0x18e2 at 0x31 in Llite/hattrick/main/LoginActivity;.onResume
06-18 12:11:49.336: I/dalvikvm(4800): DexOpt: unable to optimize static field ref 0x0ca6 at 0xcc in Llite/hattrick/main/LoginActivity;.onResume
06-18 12:11:49.346: D/dalvikvm(4800): DexOpt: unable to opt direct call 0x18dc at 0xd0 in Llite/hattrick/main/LoginActivity;.onResume
06-18 12:11:49.456: D/AndroidRuntime(4800): Shutting down VM
06-18 12:11:49.456: W/dalvikvm(4800): threadid=1: thread exiting with uncaught exception (group=0x40a75228)
06-18 12:11:49.456: E/AndroidRuntime(4800): FATAL EXCEPTION: main
06-18 12:11:49.456: E/AndroidRuntime(4800): java.lang.NoClassDefFoundError: org.scribe.builder.ServiceBuilder
06-18 12:11:49.456: E/AndroidRuntime(4800):     at lite.hattrick.main.LoginActivity.onCreate(LoginActivity.java:45)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.app.Activity.performCreate(Activity.java:4543)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2158)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2237)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.os.Looper.loop(Looper.java:156)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at android.app.ActivityThread.main(ActivityThread.java:5005)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at java.lang.reflect.Method.invokeNative(Native Method)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at java.lang.reflect.Method.invoke(Method.java:511)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-18 12:11:49.456: E/AndroidRuntime(4800):     at dalvik.system.NativeStart.main(Native Method) 
```

我真的不知道我做错了什么。我通过下载 commons-codec 和 scribe-1.3.0 jars按照[该](https://github.com/fernandezpablo85/scribe-java/wiki/getting-started)站点上的说明添加了库。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:18:43.100

所有库文件都必须放在与 and和`libs`处于同一级别的名为的目录中。`src``assets``res`

创建该目录，将 .jar 文件放入其中，然后 Eclipse 将处理其余部分。您无需担心将它们添加到构建路径或其他任何内容。

# php - 使 www.example.com 和 example.com 使用相同会话变量的最佳方法？

> ID：11080989
> 
> 赞同：4
> 
> 时间：2012-06-18T10:27:54.970
> 
> 标签：php, linux, apache, ubuntu, apache2

我正在开发一个网页（我们称之为 example.com）并在 CNAME（别名）下添加了 DNS 记录：

```
Host Record Points    to  TTL
www  example.com       14400 
```

但是，当我浏览 example.com 时，如果我转到 www.example.com，则不会保留设置的会话变量

使 www.example.com 和 example.com 使用相同的会话变量的最佳方法是什么？

我正在使用 ubuntu 12.04、php5、apache2。

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName www.example.com
    Redirect 301 / http://example.com/
    DocumentRoot /var/www/public_html
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/public_html>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory>

    ErrorLog /var/log/apache2/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T10:31:15.867

> 使 www.mysite.com 和 mysite.com 使用相同的会话变量的最佳方法是什么？

最好的方法是不要让两个主机名运行同一个站点。

选择其中一个是规范的，然后将所有内容从另一个重定向到规范的。

```
<VirtualHost *:80>
ServerName example.com
Redirect 301 / http://www.example.com
etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:32:19.717

您应该采用的最佳方法是重定向`mysite.com`到`www.mysite.com`或反之亦然 - 域别名只有一个站点（一个内容）......

# php - Socialengine - 如何将自定义模块添加到布局编辑器

> ID：11080991
> 
> 赞同：1
> 
> 时间：2012-06-18T10:28:22.823
> 
> 标签：php, layout, module, editor, socialengine

我已经在我的社交引擎应用程序中创建了一些模块，但是我想知道如何将这些模块添加到布局编辑器 ( `root/admin/content`)，以便可以将小部件添加到这些页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:21:15.580

您应该首先从布局编辑器创建一个页面。不要在编辑页面信息部分中提供任何页面 URL。离开没有 URL 的页面。最重要的是，将内容小部件添加到您的页面并保存它。

现在，您有一个没有设置 url 的新页面。创建一个模块并将其安装或粘贴到您的应用程序/模块目录中。现在，打开您的数据库并找到表“engine4_core_pages”并单击插入并使用您的模块名称控制器操作设置名称字段。

回到您的模块并打开索引控制器并将您想要的任何代码放入索引操作中，只需添加一个简单的代码即可在您的页面中查看它，”

```
$this->_helper->content
            //   ->setNoRender()
            ->setEnabled() 
```

大功告成。您可以从设置文件夹中的模块 manifest.php 设置路由。

希望这会有所帮助。

[http://bloffin.blogspot.in/](http://bloffin.blogspot.in/)了解更多...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:35:00.493

***您可以通过在content.php***文件中添加设置来在布局编辑器中添加小部件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:30:40.123

我们建议通过包管理器添加您的小部件，这应该有助于处理其余部分。有关更多信息，请参阅开发者 SDK 部分：http: [//support.socialengine.com/questions/180/Admin-Panel-Manage-Packages-Plugins](http://support.socialengine.com/questions/180/Admin-Panel-Manage-Packages-Plugins)

# android - 当我单击按钮时引发空指针异常

> ID：11080994
> 
> 赞同：-5
> 
> 时间：2012-06-18T10:28:37.943
> 
> 标签：android, nullpointerexception, android-button

当我在 android 上单击 CheckData`button`时，它会抛出一个`nullpointer exception`.

**保存数据.java**

```
public class SaveData extends Activity implements OnClickListener {     
    static final int DIALOG_ID = 0;

    private Uri mImageCaptureUri;
    private ImageView mImageView;   
    public static class Certificates {
    private Bitmap bmp;

        public Certificates(Bitmap b) {
        bmp = b;
        }
        public Bitmap getBitmap() { return bmp; }
    }

    private static final int PICK_FROM_CAMERA = 1;
    private static final int PICK_FROM_FILE = 2;

    @Override
        protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addname);

        View button1Click=findViewById(R.id.btn_choose);
        button1Click.setOnClickListener(this);
        View button2Click = findViewById(R.id.Button01add);
        button2Click.setOnClickListener(this);
        View button3Click = findViewById(R.id.Button01check);
        button3Click.setOnClickListener(this);  
    }

        public void onClick(View v){        
        switch(v.getId()){

        case R.id.Button01add:
            showDialog(DIALOG_ID);
            break;

        case R.id.Button01check:
            startActivity(new Intent (SaveData.this,CheckData.class));
            break;
        }

// picking an image from camera or gallery         
            final String [] items           = new String [] {"From Camera", "From SD Card"};                
            ArrayAdapter<String> adapter    = new ArrayAdapter<String> (this, android.R.layout.select_dialog_item,items);
            AlertDialog.Builder builder     = new AlertDialog.Builder(this);

            builder.setTitle("Select Image");
            builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
                public void onClick( DialogInterface dialog, int item ) {
                    if (item == 0) {
                        Intent intent    = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                        File file        = new File(Environment.getExternalStorageDirectory(), "tmp_avatar_" + String.valueOf(System.currentTimeMillis()) + ".jpg");
                        mImageCaptureUri = Uri.fromFile(file);

                        try {           
                            intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
                            intent.putExtra("return-data", true);                           
                            startActivityForResult(intent, PICK_FROM_CAMERA);
                    }   catch (Exception e) {
                            e.printStackTrace();
                        }           

                        dialog.cancel();
                    } else {
                        Intent intent = new Intent();

                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);

                        startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
                    }
                }
            } );

            final AlertDialog dialog = builder.create();

            mImageView = (ImageView) findViewById(R.id.image1);

            ((Button) findViewById(R.id.btn_choose)).setOnClickListener(new View.OnClickListener() {            
                @Override
                public void onClick(View v) {
                    dialog.show();
                }
            });
        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            if (resultCode != RESULT_OK) return;

            Bitmap bitmap   = null;
            String path     = "";

            if (requestCode == PICK_FROM_FILE) {
                mImageCaptureUri = data.getData(); 
                path = getRealPathFromURI(mImageCaptureUri); //from Gallery 

                if (path == null)
                    path = mImageCaptureUri.getPath(); //from File Manager

                if (path != null) 
                    bitmap  = BitmapFactory.decodeFile(path);
            } else {
                path    = mImageCaptureUri.getPath();
                bitmap  = BitmapFactory.decodeFile(path);
            }

            mImageView.setImageBitmap(bitmap);      
        }

        public String getRealPathFromURI(Uri contentUri) {
            String [] proj      = {MediaStore.Images.Media.DATA};
            Cursor cursor       = managedQuery( contentUri, proj, null, null,null);

            if (cursor == null) return null;

            int column_index    = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);

            cursor.moveToFirst();

            return cursor.getString(column_index);
        }

    protected final Dialog onCreateDialog(final int id) {
        Dialog dialog = null;
        switch(id) {
        case DIALOG_ID:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Information saved successfully ! Add Another Info?")
            .setCancelable(false)
            .setPositiveButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {

                    SaveData.this.finish();
              }
            })
        .setNegativeButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
            AlertDialog alert = builder.create(); 
            dialog = alert;
            break;
        default:
        }
        return dialog;
    }
// menu option  
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.layout.mymenu, menu);        
        return true;
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if(item.getItemId() == R.id.item1) {
            Log.d("Option", "Save option is clicked");           
        }
        if(item.getItemId() == R.id.item2) {
            Log.d("Option", "Delete option is clicked");
        }
        if(item.getItemId() == R.id.item3) {
            Log.d("Option", "Exit option is clicked");
        }       
        return super.onOptionsItemSelected(item);       
    }
} 
```

* * *

**数据操纵器.java：**

```
public class DataManipulator {
public static final String KEY_IMG = "image";

 private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private static final String DATABASE_NAME = "DBtest";
    private static final int DATABASE_VERSION = 1;

    private static final String CERTIFICATES_TABLE = "certificates";

    private static final String CREATE_CERTIFICATES_TABLE = "create table "+CERTIFICATES_TABLE+" (" +KEY_IMG+" blob not null) ";

    private final Context mCtx;
    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_CERTIFICATES_TABLE);
        }

        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS "+CERTIFICATES_TABLE);
            onCreate(db);
        }
    }
    public void Reset() { mDbHelper.onUpgrade(this.mDb, 1, 1); }

    public DataManipulator(Context ctx) {
        mCtx = ctx;
        mDbHelper = new DatabaseHelper(mCtx);
    }

    public DataManipulator open() throws SQLException {
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() { mDbHelper.close(); }

    public void createCertificatesEntry(Certificates certificates) {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        certificates.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
        ContentValues cv = new ContentValues();
        cv.put(KEY_IMG, out.toByteArray());
        mDb.insert(CERTIFICATES_TABLE,  null, cv);
    }
    public Certificates getFirstCertificatesFromDB() throws SQLException {
        Cursor cur = mDb.query(true, CERTIFICATES_TABLE,  new String[] {KEY_IMG}, null, null, null, null, null, null);
        if(cur.moveToFirst()) {
            byte[] blob = cur.getBlob(cur.getColumnIndex(KEY_IMG));
            ByteArrayInputStream inputStream = new ByteArrayInputStream(blob);
            Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
            cur.close();
            return new Certificates(bitmap);
        }
        cur.close();
        return null;
    }    
} 
```

*DataManipulator.java:60*是`certificates.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);`

* * *

**检查数据.java：**

```
 public class CheckData extends ListActivity  {     
    TextView selection;
    DataManipulator dm;
    private DataManipulator DataManipulator;

        protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.check);
        dm = new DataManipulator(this);

        LinearLayout layout = new LinearLayout(this);
        ImageView image = new ImageView(this);
        DataManipulator = new DataManipulator(this);

        Certificates testCertificates = new Certificates(BitmapFactory.decodeFile(Context.STORAGE_SERVICE));

        DataManipulator.open();
        DataManipulator.createCertificatesEntry( (Certificates) testCertificates);
        DataManipulator.close(); 

        testCertificates = null;

        DataManipulator.open();
        testCertificates = DataManipulator.getFirstCertificatesFromDB();
        DataManipulator.close();

        image.setImageBitmap(((Certificates) testCertificates).getBitmap());

        setContentView(layout);
    }
} 
```

*CheckData.java:29*是`DataManipulator.createCertificatesEntry( (Certificates) testCertificates);`

* * *

**日志错误：**

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{list.certificates/list.certificates.CheckData}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
at android.app.ActivityThread.access$600(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4340)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at list.certificates.DataManipulator.createCertificatesEntry(DataManipulator.java:60)
at list.certificates.CheckData.onCreate(CheckData.java:29)
at android.app.Activity.performCreate(Activity.java:4465)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T18:24:47.417

你得到一个空值，`certificates.getBitmap()`因为那里没有位图。在您的初始作业中，您尝试解码一个不存在的文件。using`Context.STORAGE_SERVICE`不是那样工作的，它只是一个字符串 equaling `storage`。

例如如何正确使用存储管理器的代码，试试[这个。](http://www.devdaily.com/java/jwarehouse/android/core/java/android/os/storage/StorageManager.java.shtml)

如果您只是想解码资源（可绘制、原始等），请使用另一种形式的解码：

```
InputStream is = context.getResources().openRawResource(resID);
Bitmap bitmap = BitmapFactory.decodeStream(is); 
```

**更新：** 假设我知道您要做什么，问题是您在`CheckData`没有以任何方式传递所选位图的情况下切换到活动。该活动无法知道要使用什么位图，并且`Context.STORAGE_SERVICE`无论如何都不是位图，因此您无法对其进行解码。

有关如何将位图传递给新活动的好答案，请看[这里。](https://stackoverflow.com/a/4352194/752320)

简而言之，您可以将`mBitmap`变量添加到`SaveData`，并将其传递给`CheckData`。

为此，将代码更改`SaveData.onClick()`为：

```
case R.id.Button01check:
    Intent intent = new Intent (SaveData.this,CheckData.class);
    intent.putExtra("bitmapData", mBitmap)
    startActivity(intent);
    break; 
```

并且，在`onActivityResult()`最后添加：

```
mBitmap = bitmap; 
```

在`CheckData.onCreate()`：

```
Bitmap bmp = getIntent().getExtras().get("bitmapData");
if(bmp != null) {
    Certificates testCertificates = new Certificates(bmp);
} else {
    // Back out gracefully //
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T05:38:40.983

## 问题根源：

你的问题在这一行

```
 Certificates testCertificates = 
             new Certificates(BitmapFactory.decodeFile(Context.STORAGE_SERVICE)); 
```

to 的参数`decodeFile`无效，因此它返回 null。该参数应该是图像文件的路径，而您传递的是用于检索存储服务的常量。

## 使固定：

您已经在`SaveData`活动中的位图。`CheckData`您需要通过意图将其传递给活动。将位图添加到意图：

```
 case R.id.Button01check:
        Intent intent = new Intent(this, CheckData.class);
        intent.putExtra("BitmapImage", bitmap);
        startActivity(intent); 
```

然后在`CheckData`活动中，从意图中检索位图并创建`Certificates`对象。

```
Bitmap bitmap = (Bitmap) getIntent().getParcelableExtra("BitmapImage");
Certificates testCertificates = new Certificates(bitmap ); 
```

参考：[如何将 Bitmap 对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2459524/how-can-i-pass-a-bitmap-object-from-one-activity-to-another)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:30:21.623

要么`certificates`是`null`，要么`certificates.getBitmap()`正在回归`null`。添加日志以找出哪个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:33:16.923

在插入数据之前检查证书是否为空：

```
public void createCertificatesEntry(Certificates certificates) {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
  if(certificates !=null)
{
        certificates.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
        ContentValues cv = new ContentValues();
        cv.put(KEY_IMG, out.toByteArray());
        mDb.insert(CERTIFICATES_TABLE,  null, cv);
}
else
{
}

    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-02T21:50:05.677

一般来说，为了处理异常，我会给你这个提示：

> 当您在 logcat 上获得异常时，双击（或按 ENTER）此块中日志的每条红线，直到文本光标转到您遇到异常的正确行。
> 
> 然后，一旦你知道你在哪个变量上得到了异常，在点击事件和 onCreate 事件上放一个断点，看看你为什么会得到这个异常。

但是，您的代码有很多奇怪的东西，例如：

1.  为什么你`setContentView`在同一个方法中调用两次？

2.  您为什么要尝试解码其名称的位图文件`Context.STORAGE_SERVICE`？

3.  为什么你有一个同名的类和实例（`DataManipulator`）？请使用更标准的方式来命名字段和变量。

# iphone - 如何使用核心数据存储多个用户的设置？

> ID：11080997
> 
> 赞同：0
> 
> 时间：2012-06-18T10:28:44.603
> 
> 标签：iphone, objective-c, core-data, ios5, multi-user

我有一个应用程序，多个用户可以登录（虽然不能同时登录！一次只有一个用户可以登录。）并使用该应用程序。我需要使用核心数据为每个用户保存用户特定设置。我希望知道执行相同操作的步骤。我浏览了很多教程，但没有一个有任何明确的信息。

我要做的是保存这些首选项并在用户登录后再次检索它们。

我是 ios 新手，因此任何关于此的教程/示例指南将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:38:35.210

在核心数据存储中？

当然，有很多方法可以做到这一点，具体取决于您的架构。但基础应该差不多是这样的：

```
Option
- name: NSString // unique, indexed
- data: transformable
- user: NSString, -> user // uniquely identifies a user, by email, name, relationship if a user entity exists, etc. 
```

您可能希望添加一个预加载标志以在用户登录时预加载某些选项，或者任何适合您需要的选项......

# jquery - jQuery 产品数组

> ID：11080998
> 
> 赞同：2
> 
> 时间：2012-06-18T10:28:51.500
> 
> 标签：jquery, json

我正在尝试创建一系列产品 SKU，然后我可以将其传递到 Web 服务。

在我输入的文本区域中，我说`"123 456 789"`我想从文本框中选择每个项目并使用 JSON 传递它，因此 JSON 显示：

```
"productcode" : "123", "productcode" : "456", "productcode" : "789" 
```

请问我该怎么做？

我试过了

```
var json_data = JSON.stringify({
  productcode: $('#txtAddMultiProducts').val()
}); 
```

哪个正在返回`"productcode" : "123,456,789"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:36:20.870

您可以使用 JavaScript`.split()`函数将输入按空格拆分，然后根据返回的数组构造 JSON。

```
var inputValue = $('#txtAddMultiProducts').val();
var values=inputValue.split(" "); 
// if the values are separated by commas, you can use `inputValue.split(",");` 
```

这将为您提供与此类似的数组 -

```
[123,456,789] 
```

现在，遍历该数组，您可以构造您的 JSON 对象 -

```
var finalObj = {}; // short-hand for "new Object()"
$.each(values,function(index,value){
  finalObj['productcode_'+index] = value;
}); 
```

您的最终 JSON 对象必须具有唯一索引，否则每个值都会覆盖最后一个值。

此代码应为您提供与此类似的结果 -

```
{'productcode_0':'123','productcode_1':'456','productcode_2':'789'} 
```