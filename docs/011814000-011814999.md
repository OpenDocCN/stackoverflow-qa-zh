# StackOverflow 问答 11814000-11814999

# php - 使用 bcrypt：我应该分配多少字节？

> ID：11814002
> 
> 赞同：2
> 
> 时间：2012-08-05T04:36:08.960
> 
> 标签：php, sql, hash, bcrypt

我正在使用 PHP 将密码存储在 SQL 数据库中，并计划使用 bcrypt。

我正在做一些研究，以找到我应该使用什么类型和大小来将哈希和盐存储在我的数据库中。

基于对[这个问题](https://stackoverflow.com/questions/247304/mysql-what-data-type-to-use-for-hashed-password-field-and-what-length)的出色回答，似乎 bcrypt 有时会输出不同大小的散列，可能与`CHAR(76)`or一样大`BINARY(60)`。但我不明白何时以及为什么。

该问题提供了一个[链接](https://stackoverflow.com/questions/5881169/storing-a-hashed-password-bcrypt-in-a-database-type-length-of-column)，该链接说使用该`$2$`方案产生 59 个字节，并`$2a$`产生 60 个字节。但是，由于某种原因，由于高位攻击或其他原因，今天的 php [crypt](http://php.net/manual/en/function.crypt.php)文档建议使用`$2y$`over 。`$2a$`无论如何，我想`$2y$`按照推荐的方式使用，但是没有迹象表明它会输出的大小。

我在数据库中的字段大小应该是多少？

`CHAR`此外，`BINARY`这种应用程序之间有什么实际区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:40:41.587

1.  哈希：`CHAR(60)`
2.  盐：`CHAR(22)`

这可以通过实验找到：

```
<?php
    $salt1 = "FotZoGZruCl8ugk0Tvl4g";
    $salt2 = "FotZoGZruCl8ugk0Tvl4g9";
    $salt3 = "FotZoGZruCl8ugk0Tvl4g9a";

    print 'Salt 1 (stlen = ' . strlen($salt1) . '): ' . $salt1 . '<br />';
    print 'Salt 2 (stlen = ' . strlen($salt2) . '): ' . $salt2 . '<br />';
    print 'Salt 3 (stlen = ' . strlen($salt3) . '): ' . $salt3 . '<br />';

    $hash1 = crypt('password1', '$2y$07$' . $salt1);
    $hash2 = crypt('password1', '$2y$07$' . $salt2);
    $hash3 = crypt('password1', '$2y$07$' . $salt3);

    print 'Hash 1 (strlen = ' . strlen($hash1) . '): ' . $hash1 . '<br />';
    print 'Hash 2 (strlen = ' . strlen($hash2) . '): ' . $hash2 . '<br />';
    print 'Hash 3 (strlen = ' . strlen($hash3) . '): ' . $hash3 . '<br />';
?> 
```

输出将是：

```
Salt 1 (stlen = 21): FotZoGZruCl8ugk0Tvl4g
Salt 2 (stlen = 22): FotZoGZruCl8ugk0Tvl4g9
Salt 3 (stlen = 23): FotZoGZruCl8ugk0Tvl4g9a
Hash 1 (strlen = 60): $2y$07$FotZoGZruCl8ugk0Tvl4g.pXg.UBUUwuj14Ur1d.z/tMLqGPxQLBW
Hash 2 (strlen = 60): $2y$07$FotZoGZruCl8ugk0Tvl4guNd47GUslNQPXiel70rI0yvffP7iPSHe
Hash 3 (strlen = 60): $2y$07$FotZoGZruCl8ugk0Tvl4guNd47GUslNQPXiel70rI0yvffP7iPSHe 
```

您会注意到，如果添加超过 22 个字符的盐，哈希将保持不变。也就是说，crypt 会在执行散列之前将 salt 截断为 22 个字符。

仅供参考，随机盐生成：

```
$salt = substr(strtr(base64_encode(mcrypt_create_iv(17, MCRYPT_DEV_URANDOM)), "=+", "./"), 0, 22); 
```

编辑：另外，盐/哈希的格式是 64 进制。即使用 az, AZ, 0-9, '.' 和 '/' 作为数字，每个数字代表一个从 0 到 63 的值......所以`CHAR`在数据库中使用就可以了，`BINARY`因为你可以用`CHAR`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:37:48.213

它将是相同的大小 - 60 个字符。`$2$`（和之间唯一的区别`$2a$`是前者少了一个字符。实际的散列部分大小相同。）

# razor - 在 razor webmarix 中更新

> ID：11814003
> 
> 赞同：1
> 
> 时间：2012-08-05T04:36:24.050
> 
> 标签：razor, webmatrix

```
Line 22:    var sql3 = "UPDATE productori SET Name3=@0, detail2=@1, harga2=@2 WHERE id=@3";  
Line 23:    var db2 = Database.Open("SmallBakery");<br>
Line 24:      **db2.Execute(sql3 ,Name3, detail2, harga2);** 
```

粗体区域显示错误所在。

我在更新数据库时遇到问题。我是 webmatrix 和剃须刀的新手。

```
`Exception Details: System.Data.SqlServerCe.SqlCeException: The column name is not valid. [ Node name (if any) = ,Column name = Name3 ]` 
```

那是我得到的错误。以下是我的数据库格式：

```
`ID = identity=big int  
Name nvarchar  
Description nvarchar  
price nvarchar` 
```

请帮助我理解我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:29:17.570

在您的数据库中没有名为 Name3 的列，但您的 SQL 尝试引用具有该名称的列。更改 SQL 以使列名与您在数据库中的名称相匹配。此外，您的 SQL 中有 4 个参数标记，但您只提供其中 3 个的值，因此您的 SQL 将永远不会更新任何记录。

您的 SQL 应如下所示：

```
"UPDATE productori SET Name=@0, Description=@1, Price=@2 WHERE ID=@3"; 
```

然后您需要为 ID 传递一个值：

```
db2.Execute(sql3, Name3, detail2, harga2, variable_containing_id_value); 
```

# jdbc - Oracle Database 11g JDBC 驱动程序 - 文件太多？？？他们的意思是什么？

> ID：11814005
> 
> 赞同：16
> 
> 时间：2012-08-05T04:37:12.263
> 
> 标签：jdbc, oracle11g

我想使用 Oracle 11g 作为我的 java 代码数据库。我试图从 oracle 网站获取驱动程序。我看到了很多文件，里面到处都是一些行话。我需要知道这些词的含义以及它们如何影响我作为用户。我如何决定使用哪一个？我选择 ojdbc6.jar 因为我使用的是 jdk 6。请帮助我理解文件的描述是什么意思，谁应该关注它们，为什么？

```
ojdbc6.jar - Classes for use with JDK 1.6\. It contains 
the JDBC driver classes except classes for NLS support in 
Oracle Object and Collection types.

ojdbc6_g.jar - Same as ojdbc6.jar except compiled 
with "javac -g" and contains tracing code.

ojdbc6dms.jar - Same as ojdbc6.jar, except 
that it contains instrumentation to support DMS 
and limited java.util.logging calls.

orai18n.jar - NLS classes for use with JDK 1.5, and 
1.6\. It contains classes for NLS support in Oracle 
Object and Collection types. This jar file replaces 
the old nls_charset jar/zip files.

xdb6.jar - To use the standard JDBC4.0 java.sql.SQLXML 
interface with JDBC 11.2.0.3, you need to use xdb6.jar
(instead of xdb.jar) from the 11.2.0.3 distribution. 
```

编辑 -

顺便说一句，SimpleFan.jar 是做什么用的？我也看到了。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-05T04:53:18.427

听起来你选对了。

如果您需要单步执行 Oracle JDBC 代码，则需要“_g”，这不太可能。

“dms”版本支持更高级的数据库监控。同样，这不是您通常会使用的东西。

如果您想在国际化支持下全力以赴，则需要“orai18n.jar”。

如果您想使用 SQLXML 在数据库中存储和处理 XML 文档，则需要 xdb6.jar。

好消息是……如果您在任何时候意识到您*确实*需要这些额外功能中的任何一个，您都可以换掉 jar 并继续前进！

# wolfram-mathematica - Mathematica -- 生成一个有限制的素数列表

> ID：11814011
> 
> 赞同：6
> 
> 时间：2012-08-05T04:38:08.090
> 
> 标签：wolfram-mathematica

生成直到参数的素数列表的最简单函数是什么？想出这样的功能并不难，例如：

```
foo[n_] := Block[{A = {}, p = 2},
           While[p < n, A = Append[A, p]; p = NextPrime[p]];
           A] 
```

但是，这似乎过于混乱。我想做类似的事情

```
foo[n_] := Table[Prime[i], {i,2,???}] 
```

在哪里 ？？？是 的索引`NextPrime[n,-1]`。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T05:34:06.967

例如

```
f[x_] := Prime[Range@PrimePi@x] 
```

用法

```
Grid[Table[{x, f[x]}, {x, 13, 20}], Frame -> All] 
```

![数学图形](../Images/4a67e300156d26a9faf95c96f16e609f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T07:01:09.603

我最喜欢的形式：

```
p = Prime ~Array~ PrimePi@# &;

p @ 20 
```

> {2、3、5、7、11、13、17、19}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:49:38.457

一种常见的算法是[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。这是一个简单的算法，并且在任何语言中都相当容易实现。

# css - CSS：创建带纹理的背景

> ID：11814013
> 
> 赞同：56
> 
> 时间：2012-08-05T04:39:09.550
> 
> 标签：css

我目前正在努力为我的网站设置一个加载速度足够快的图像背景。我使用了数据 url 图像甚至优化图像，但加载页面时需要很长时间，因为背景图像仍然非常大。是否可以使用 CSS 创建如下图所示的带纹理的背景颜色？这是一个[示例](http://webprolearner2346.zxq.net/css-test2/)

我尝试了一下，但无法匹配：

![在此处输入图像描述](../Images/551e8252871b2ea5b6f85f6bc75a45d8.png)

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-08-05T04:46:14.430

使用最新的 CSS3 技术，可以创建带纹理的背景。看看这个： http: [//lea.verou.me/css3patterns/#](http://lea.verou.me/css3patterns/#)

但它仍然局限在这么多方面。并且浏览器支持也没有准备好。

你最好的选择是使用小纹理图像并重复该背景。你可以在这里得到一些很好的准备使用纹理图像：

[http://subtlepatterns.com](http://subtlepatterns.com)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-05T05:03:07.703

如果可能，您应该尝试将图像切成可以重复的较小部分。我已将该图像切片为 101x101px 图像。

![BG瓷砖](../Images/7300bf4b3ee94ee441fc9ab1c9744954.png)

CSS：

```
body{
  background-image: url(SO_texture_bg.jpg);
  background-repeat:repeat;
} 
```

但在某些情况下，我们无法将图像分割成更小的图像。在这种情况下，我会使用整个图像。但是你也可以使用像 Mustafa Kamal 提到的 CSS3 方法。

祝您好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-02T05:08:18.150

如果您搜索图像 base-64 转换器，您可以将一些小的图像纹理文件作为代码嵌入到您`@import url('')`的代码段中。它看起来像很多代码；但至少您的所有数据现在都存储在本地 - 而不必调用单独的资源来加载图像。

**示例链接**：[http ://www.base64-image.de/](http://www.base64-image.de/)

当我从自己的 PNG 格式的简单图标清单中获取一个文件并将其转换为 base-64 时，它在我的 CSS 中看起来像这样：

```
url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAm0SURBVHjaRFdLrF1lFf72++xzzj33nMPt7QuhxNJCY4smGomKCQlWxMSJgQ4dyEATE3FCSDRxjnHiwMTUAdHowIGJOqBEg0RDCCESKIgCWtqCfd33eeyz39vvW/vcctvz2nv/61/rW9/61vqd7CIewMT5VlnChf059t40QBwB7io+vjx3kczb++D9Tof3x1xWNu39hP9nHhxH62t0u7zWb9rFtl73G1veXamrs98rf+5Pbjnnnv5p+IPNiQvXreF7AZ914bgOv/PBOIDH767HH/DgO4F9d7hLHPkYrIRw+d1x2/sufBRViboCgkCvBmmWcw2v5zWStABv4+iBOe49enXqb2x4a79+wYfidx2XRgP4vm8QBLTgBx4CLva4QRjyO+9FUUjndD1ATJjkgNaEoW/R6ZmyqgxFvU3nCTzaqLhzURSoGWJ82cN9d3r3+Z5TV6srni30fAdNXSP0a3ToiCHvVuh1mQsua+gl98Zqz0PNEIOAv4OidZToNU1OG8TAbUC7qGirdV6bV0SGa3gvISKrPUcoFj5xt/S4xDtktFVZMRrXItDiKAxRFiVh9HH2y+s05OHVizvod+mJ4yEnebSOROCzAfJ5ZgRxGHmXzwQ+U+aKFJ5oQ8fllGfp0XM+f0OsaaoaHnPq8U4YtFAqz0rL+riDR7+4guPrGaK4i8+dWMdotYdBf8CIPaatgzCKEHdi7hPRTg9uvIoLL76DC39+DcN+F4s8ZaAOCkYfEOmCQenPl3ftho4xmxcYfcmcCZGAMALjUYBvf2WM3//pDcwZoVKSzyNUowHGa2Pc0R9iOFjFcMSHhwxtQHNjDye+8Bht1Hj+wpsCy3i0N19gY3sPZ+5ty8uXVyFh8jyXm7EW+RkwZ47jmjNFJXKEGJ06g8ebDi5vptjYnWJvj68iR87vO2R3b0bHtmck4jYOjVYQuR8gHr2L73z3NN68eBm3NqbGo7gTMoAu6qatbV8wi70iiCL2/ZaQIfPZYf59eiBYcfdXMbj7NJ55+Cf4x1sfYkUiYSZ3jbie267LyKFPfXKI809/BjsfXMPpPMPjZ4/g2fNvg5mywEaDFa5JSNpGDihSMZU64Dlkr2uElCqVJFhJV4UEsMLXacTdIY4cSCwNYrdSKEOeZ1Q2Qv7n6iZ+99IlPHCwwot/3cDxU/dynWdk3v9ToJVs101lP1zWrgzJjGwpFULBzWs0t6WwINNd3HnwgPHGZbUIpZIIqFpqcqcbx2R4jJcv3sLdD6Z4+587JG6Fg+MAl6+1xAZajShLiR/Z4Wszwh9zw7gTWemYoFgZtvxgUsyJcOl5oOtcW0uwpHKMTrbmSYLVfoyk6OLUqZM4uNbF1asf4cBKTkHKuGll61MqYl0JXXrU68ao5RjRUNk5vpQtMkmuyQ1Yrb7H15qRJwj2hUvpkxPUfTpeSX+ZljTNMZmXOHLsJJ48t4KbWzso329w4ZUNOuuaGrpMiVBw95uPR0csWhrsdTv2aSXK+vYIPfK/86m/8VpDKe7cblAtOjClExpCQtfSJMVOcBL+I9/A0bMP4cFP32NaoHQrCD2vunddzwTbUqA8Rp2gLUEJDKOS5ktmceMScP1dNpQCi6Tk3gGBabBIMxmhdtS2eV21FRGFEa5f36Ht+4HRw7jnzEOMlmsXKbI8NxQkAf5w6FD3QyNU20Rqay5Mj5GwMS9ZDTf/S+MhTnyiD9w1RK/XwTvv7xqRxKG8rFoSEzUJmch2a3PXCtVY3+tzuwZ50d7LGYhs+8qnOlrJHRtGpM3F8IqkUDRMLzepceNGQjHZxFPfHGJ1MKMTx/DMDz1c/rCy3NdNc1u+hYQSu8gFc2R9Qn8qaVF5v71rhV+r+ZA46myN8iiPJcl+YAQTS8TByZ6Dm9cb7O7usgNu4+T2BJvbazQxREG9EHo5YVUqFWmWMx3FhPc3IG3O0tIqQMaLggZj64aQ5toEo1w7hDLJarBCrBv2SUb1gpSOTCYNtjYqE5QgcrC7UxtitfX/wHIqIs+ThTnuqP8vrvPu83wdxtbNErMkp050DLGcPNCw4jtUuR7FQ4YWWYlzjw5wZJSwZoXEzEpuPkvRFBk0FtQFiZext6eOkdV1GBFTFAStFoiA83RBljfoRZzR/vdvDhA7eOftGerSMfbnRMcjlWwCExOlhjVFZJIU+PqXYqyevAJc2cJ8K8KlzRDFSoXd6RCDO2GbiS83FyusdTJewxP7ha7LeJoVbU/gJr6zg/zyFYRHZnj9YorabTki5CRGxgFYvgoSMVBxYpYGWB0dZ+ncg9d/VeKRJ1/FGtuxmF4pHyp7Qd9McezoHTh8IG51QE6oFMtWB+KY82J3gX+9N8MJ9xZeeSNDh2gusgwpn8mLZXUIxsDGk8aYmU83We8sn/EYvf4Yp08cZvPpGbzyuVr2CxMvEyENpLCB0+Y93q8KDbcVIke8qXGpW+Kt9xc2U+oZIZCXRTsRzea+abgm2YybTKc587YH8LNOGoyHKrvISrGNHuaIUNPoXTF9FYlbL0tRk9WMLD60RpImFCmOYn95rcH2XoW1VXc5Z/LVOK0QZWllRhSWCDWdpsg/ShAOK+xMBtie5lailSlcKzgWad1+qnekWWojuSon10heB3jqCYpYlmD98AjPPbdLojsMsK0UNSH9k5KqB1tX23dCjeTGjRzhdoED4QTff2Idh8YhK8CxuVgGoDLT6KZzAk8navN1vocimZCYKdaHCe5f2+AGfTz7h5zzAW2NQrKfaRJqFZYtXkLEN83tIcdwTbJXthwMj64jM/hdPPZZ1rWXstY9SjbTxTyio5ZI/uocEPF3OCIAh0kEcifZQbO7wT4Q4Jd/3MbPfnuNLbnHlFXYP1KpAjTsiEu+8uiYmHh2FPvx+Q8NSqFScEaUUtoMQQLoWXmuKbu2SmjssKH7MqrkNstzXcnjWsXX0YN944/WFrJlnbO2IWY5lMIOEMkiMxk9cdchu6nGUi6xUr4ko4I9YxmpWozNS/0vjBeVafx+dNZofHdZ722FqOKKsp2GHBNspaCq/e0pdSByLRKeifhZW3cET0U6SIg03ZglqgEV7TGMMxQluzQnijLntdCMS2Z1DlyQS1nRmGhlWeu8KsRxWjscF3itcfz+ILv5tc9vYGui+a6FUP0ey8OymF812qD1WPOATkeSUxMgpklqaNMQS6soVSGu1Xpp3ZTNLsBSQ9oUSIPuO9aQsKj8H/2i+M14cIVV5UZZThrWikhQtOdEhxOqH1ZQI6PysyQdO93q/KdeHbC/hp2P+aG3PG1aiCVahDWIm49p77RHf/LHfeFlvPR/AQYAyMIq/fJRUogAAAAASUVORK5CYII=') 
```

对于纹理图像，您需要采用类似的过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-08T12:46:36.433

使用图像编辑器剪切一部分背景，然后应用 CSS 的 background-repeat 属性使小图像填充使用它的区域。

在某些情况下，背景重复会在图像重复的地方创建接缝。一个解决方案是使用图像编辑器，如下所示：从背景图像开始，复制图像，从左到右翻转（镜像，不旋转）副本，并将其粘贴到原件的右边缘，重叠 1 个像素. 裁剪以从组合图像的右边缘移除 1 个像素。现在重复垂直：复制组合图像，从上到下翻转副本，将其粘贴到组合的底部，重叠一个像素。裁剪以从底部移除 1 个像素。生成的图像应该是无缝的。

# sql - 是否可以仅使用一个选择语句来构建我的查询？

> ID：11814015
> 
> 赞同：0
> 
> 时间：2012-08-05T04:39:41.903
> 
> 标签：sql, tsql

以下是我的查询及其输出。是否可以仅使用一个 select 语句构建我的查询（我的查询中有两个）？这是出于性能目的。

```
WITH GradePassFail AS (
    SELECT 
        Subject, 
        Grade, 
        CASE WHEN Grade >= 50 THEN 1 ELSE 0 END AS Pass, 
        CASE WHEN Grade < 50 THEN 1 ELSE 0 END AS Fail 
    FROM Grade_report
)
SELECT Subject, MAX(Grade) AS Grade, SUM(Pass) AS Pass, SUM(Fail) AS Fail
FROM GradePassFail
GROUP BY Subject 
```

![在此处输入图像描述](../Images/8bf0c3c5f0e74d4afbfc0cf2df980c5d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:08:03.410

您可以`CASE`在函数中执行通过/失败的语句`SUM`...然后您不需要 CTE：

```
SELECT
    Subject,
    MAX(Grade) Grade,
    SUM(CASE WHEN Grade >= 50 THEN 1 ELSE 0 END) AS Pass,
    SUM(CASE WHEN Grade < 50 THEN 1 ELSE 0 END) AS Fail
FROM
    Grade_report
GROUP BY Subject 
```

你可以在这里验证：

[http://sqlfiddle.com/#!3/99cd4/7](http://sqlfiddle.com/#!3/99cd4/7)

# c - 遍历字符串时，分配临时字符是否比取消引用更好？

> ID：11814018
> 
> 赞同：1
> 
> 时间：2012-08-05T04:41:05.193
> 
> 标签：c, idioms

自从我几周前开始使用 C 以来，我一直在看到这两个平行的短语，需要了解 C 编译器的人告诉我哪个会导致更好的代码。

版本1：

```
char s[]="aString",*sp=&s,c;
while(c=*sp++){
operation(c);
} 
```

版本2：

```
char s[]="aString",*sp=&s;
for(;*sp;sp++){
 operation(*sp);
} 
```

好吧，我知道版本 2 涉及一些重复的差异，那么版本 1 总是比版本 2 更好吗？如果不是，有哪些典型的例外情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T04:44:02.940

我希望这些在任何合理的优化级别上都是完全相同的——你试过了吗？

编辑：

我想确认，所以*我*试了一下。这是我的示例程序（我也修复了您的指针不匹配错误）：

```
void operation(char);

void f1(void)
{
    char s[]="aString",*sp=s,c;
    while(c=*sp++) {
        operation(c);
    }
}

void f2(void)
{
    char s[]="aString",*sp=s;
    for(;*sp;sp++) {
         operation(*sp);
    }
} 
```

`-O3`在我的 Mac 上用 clang at 编译，这是目标文件：

```
example.o:
(__TEXT,__text) section
_f1:
0000000000000000    pushq   %rbp
0000000000000001    movq    %rsp,%rbp
0000000000000004    pushq   %rbx
0000000000000005    pushq   %rax
0000000000000006    movq    $0x00676e6972745361,%rax
0000000000000010    movq    %rax,0xf0(%rbp)
0000000000000014    movb    $0x61,%al
0000000000000016    leaq    0xf1(%rbp),%rbx
000000000000001a    nopw    _f1(%rax,%rax)
0000000000000020    movsbl  %al,%edi
0000000000000023    callq   _operation
0000000000000028    movb    (%rbx),%al
000000000000002a    incq    %rbx
000000000000002d    testb   %al,%al
000000000000002f    jne 0x00000020
0000000000000031    addq    $0x08,%rsp
0000000000000035    popq    %rbx
0000000000000036    popq    %rbp
0000000000000037    ret
0000000000000038    nopl    _f1(%rax,%rax)
_f2:
0000000000000040    pushq   %rbp
0000000000000041    movq    %rsp,%rbp
0000000000000044    pushq   %rbx
0000000000000045    pushq   %rax
0000000000000046    movq    $0x00676e6972745361,%rax
0000000000000050    movq    %rax,0xf0(%rbp)
0000000000000054    movb    $0x61,%al
0000000000000056    leaq    0xf1(%rbp),%rbx
000000000000005a    nopw    _f1(%rax,%rax)
0000000000000060    movsbl  %al,%edi
0000000000000063    callq   _operation
0000000000000068    movb    (%rbx),%al
000000000000006a    incq    %rbx
000000000000006d    testb   %al,%al
000000000000006f    jne 0x00000060
0000000000000071    addq    $0x08,%rsp
0000000000000075    popq    %rbx
0000000000000076    popq    %rbp
0000000000000077    ret 
```

如您所见，字面上相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T04:44:24.857

如今，任何优秀的编译器都会以几乎完全相同的方式编译这些循环。

`c`如果键入更短或使您的代码更易于阅读，您可能希望使用临时变量。但是不要为了某种想象中的性能优势而做这样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:44:13.883

任何称职的优化编译器都会将它们优化为相同的汇编代码。除非您使用分析器对此进行了测量并确定它是一个瓶颈，否则不要费心尝试过早地对其进行优化。

在某些情况下，如果多次访问该值，编译器将无法确定底层字符串没有发生变化，在这种情况下，它必须多次访问内存。在这些情况下，将字符缓存在变量中会有非常小的优势，但即便如此，优势也会非常小。像这样的东西：

```
for( ; *sp; sp++) {
    operation1(*sp);
    some_function(sp);
    operation2(*sp);
} 
```

在这种情况下，编译器可能不知道是否`some_function`修改了底层字符串，因此它必须`*sp`从内存中读取两次以确保在所有情况下都正确。

# button - Centering buttons horizontally

> ID：11814025
> 
> 赞同：0
> 
> 时间：2012-08-05T04:42:29.580
> 
> 标签：button, xhtml, centering

I have searched every where for an answer as to how to align my home, contact etc. buttons centered across the bottom of my xhtml page, I have tried everything I have found but I just can not do it :( I have tried setting up a CSS code, html code everything, nothing works.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:59:41.307

这是一个允许块元素居中的简单设置（[演示](http://codepen.io/jackrugile/pen/mdJgw)）：

### HTML

```
<div id="footer">
    <ul>
        <li><a href="#">Item One</a></li>
        <li><a href="#">Item Two</a></li>
        <li><a href="#">Item Three</a></li>
        <li><a href="#">Item Four</a></li>
        <li><a href="#">Item Five</a></li>
    </ul>
</div> 
```

### CSS

```
#footer {
    text-align: center;
}

ul {
    display: inline-block;
    margin: 0 auto;
    padding: 0;
}

ul li {
    background: #eee;
    display: block;
    float: left;
    list-style: none;
    margin: 0 3px;
    padding: 0 10px;
}

/* Add this conditionally for less than IE7 inline-block support
ul {
    display: inline;
    zoom: l;
}
/* 
```

# php - 为什么 PHP 的 cURL 在某些 URL 上似乎“超时”？

> ID：11814035
> 
> 赞同：0
> 
> 时间：2012-08-05T04:45:09.883
> 
> 标签：php, curl, simpledom

我正在使用 PHP 的 cURL 从各种 URL 中获取一些标签信息。我的请求有时会起作用，但有时它们根本不起作用。我的代码不起作用有什么原因吗？（请注意，我也在使用 simple_html_dom）：

```
$webpage = 'http://www.some_url.com';

$curl = curl_init(); 
curl_setopt($curl, CURLOPT_URL, $webpage);  
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($curl, CURLOPT_FAILONERROR, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_AUTOREFERER, true);
curl_setopt($curl, CURLOPT_FRESH_CONNECT, true);

$str = curl_exec($curl);  
curl_close($curl);  

$html = '';

if( !empty($str) )
{
    require_once( 'simple_html_dom.php');

    $html= str_get_html($str);
    $element = $html->find('h1', 0);
    $webpage_name = strip_tags($element);

    $item = $html->find('meta[name=description]', 0);
    $description =  $item->content;
}

// save $description to database
// save $webpage_name to database 
```

对于我尝试的大约一半的 URL，描述和网页名称存储在我的数据库中，但对于另一半，它们没有存储，并且脚本只是停滞不前。也就是说，当用户向我的网站提交 URL 时，会在 URL 上传到我的网站时显示进度条。然后，进度条消失，并且 URL 显示在我的网页上，供用户在 URL 提交完成后查看。对于麻烦的 URL，进度条会消失，但链接不会出现在页面上，并且没有任何内容存储到我的数据库中。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:59:47.677

尝试`curl_getinfo`在`curl_close`通话前使用。除了大量其他有用信息外，它还会为您提供 HTTP 状态代码，让您知道您的请求发生了什么。这应该会给你你需要的答案......只需确保删除该`CURLOPT_FAILONERROR`设置（或将其设置为`false`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:18:40.090

我的错误日志是“调用未定义的函数 mb_detect_encoding()”。该函数需要启用 mbstring 扩展（simple_html_dom.php 需要它）。默认情况下，MAMP 确实安装了它，这就是为什么它可以在我的开发服务器上运行，但不能在我的生产服务器上运行。我已经请求在我的 Linux 生产服务器上启用 mbstring，所以如果这实际上是问题所在，我会让大家知道。我在网上看到过很多人有同样问题的帖子，所以我希望这会对很多人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-15T12:03:47.193

您的问题是很久以前的问题，但这是我的解决方案。我有同样的问题，curl 在我的 Windows 机器上本地工作，但不在 Linux 上。只是一些网址，不是全部。我使用的 CURLOPT_SSL_VERIFYPEER 设置为 false，然后我也添加了 CURLOPT_SSL_VERIFYHOST。至少在我的情况下，url 不起作用是由于我试图访问的域没有很好地定义 SSL 证书。我不知道为什么即使没有这个参数它也能在 Windows 上工作，但它对我有用。

# javascript - shadowbox 内容链接到新的 shadowbox

> ID：11814042
> 
> 赞同：0
> 
> 时间：2012-08-05T04:47:29.753
> 
> 标签：javascript, jquery, hyperlink, shadowbox

我试图打开一个影子盒，影子盒的内容包含一个链接。单击时，我想关闭当前的阴影框（框一）并启动一个新的阴影框（框二），其中包含新内容。不清楚如何实现这一点。

现在我的第一个影子盒打开得很好，但到目前为止，我无法在影子盒一内获得链接以启动影子盒二。

提前感谢任何帮助。

我的影子盒代码示例

```
<a id="boxone" title="test box one" href="#idofdiv"
rel="shadowbox[linkone];width=300;height=200;">launch shadowbox one</a>
<div id="boxone" style="display:none;">
<a class="boxtwo" title="test box two" href="boxtwo.php"
rel="shadowbox[linktwo];width=300;height=200;">launch shadowbox two</a>
</div> 
```

我正在使用所有“类型”的 shadowbox 3.0.3

```
<script type="text/javascript">
Shadowbox.init({
language: 'en',
players: ['img', 'html', 'iframe', 'qt', 'wmp', 'swf', 'flv']
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-08T23:08:42.567

Colorbox 是我自己问题的答案。默认情况下它会做我想要的。归功于 Adit Saxena @ stackoverflow.com/questions/8050250/... 谁给了我答案

# php - 更改购物车中的默认货币

> ID：11814043
> 
> 赞同：2
> 
> 时间：2012-08-05T04:47:36.223
> 
> 标签：php, mysql, shopping-cart

如果这个问题看起来可能重复，我很抱歉。请把我链接到原文。

我正在用 php 和 mysql 开发一个购物车。

在管理面板中，可以设置多种货币类型，并且可以添加新的货币类型。它将具有默认货币和覆盖率。我的问题是更改默认货币类型时。

这就是我的桌子的样子

```
**Currency**
------------------------------------------------------------------------------
ID    CurrencyType        ConversionRate           IsDefault
------------------------------------------------------------------------------
1       type1                 -                      y
2       type2                 2.0                    n
3       type3                 3.0                    n
------------------------------------------------------------------------------

**Product**
------------------------------------------------------------------------------
ID     Rate        
------------------------------------------------------------------------------
1      100
2      200      
------------------------------------------------------------------------------ 
```

这里产品 1 的价格为

```
(100) for currency type1
(100 * 2.0) for currency type2
(100 * 3.0) for currency type3 
```

在管理面板中，将根据默认货币类型添加兑换率。

在这里，在更改默认类型的同时，我可以更新货币表中的兑换率。但我必须更新产品表中的费率。更改产品表中所有产品的费率，让我觉得我错了。

还有其他更好的方法吗？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:33:35.593

现在我理解了您的问题，我相对确定您必须更新这两个表。如果您只是想以不同的转换率向用户显示表格但保持基本成本相同，那么您始终可以将值存储在`CurrencyType` `type1`但在向用户显示时将其转换为php`type2`或`type3`php。但是，如果您希望在`Product`更新 default 时更新表中的实际值`CurrencyType`，而不仅仅是更新它们向用户显示的方式，那么您必须更新两个表。

幸运的是，SQL 使这变得非常容易，因为您实际上所做的只是将当前的 Rate 值乘以您要更改的 ConversionRate。因此，如果您在将其设为默认值之前有一个 php 变量存储`ConversionRate`新的变量：`CurrencyType`

```
UPDATE Product
SET Rate = Rate * oldConversionRate 
```

`Product`应使用新费率更新 Product 表中的所有行。让我知道这是否措辞令人困惑，或者您需要更多说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:01:55.123

我找到了一个不需要更新产品表的解决方案。我将有一个隐藏的货币类型，这将是计算的默认值。产品表中的汇率对于这种货币类型将始终是 *1

可以在管理面板中进行必要的计算，以便管理员仍然可以在他的默认货币类型中输入新产品的汇率。

# php - 如果重复在括号中，则可变长度的lookbehind 编译。为什么？

> ID：11814045
> 
> 赞同：3
> 
> 时间：2012-08-05T04:48:09.550
> 
> 标签：php, regex, pcre

## 问题

PHP 使用[PCRE](http://pcre.org)正则表达式库，它不支持后向重复。

如果重复出现在后面（例如，`(?<=\d+)`），PHP 通常会发出如下警告：

> 警告：preg_match_all()：编译失败：lookbehind 断言在第 10 行的lookbehind.php 中的偏移量7 处不是固定长度

但是，我发现了一种情况，当我认为应该编译时，编译并没有失败。

这些无法按预期编译：

*   `/(?<=X*)a/`
*   `/(?<=X+)a/`
*   `/(?<=(X)*)a/`

但是，`/(?<=(X)+)a/`确实编译。这应该在功能上等同于`/(?<=(X){1,})a/`，它也可以编译。另一方面，如果我实际上为该范围添加了一个上限
（例如，`/(?<=(X){1,2})a/`），则编译失败。我认为`/(?<=(X)+)a/`并且`/(?<=(X){1,})a/`应该也无法编译，但他们没有。为什么不？

## 实验

这是一些代码：

```
$str = 'aXaaXXaaaXXXaaaa';

$regex = '/(?<=((?:X)+))a+/';

preg_match_all($regex, $str, $matches, PREG_OFFSET_CAPTURE|PREG_SET_ORDER);
print_r($matches); 
```

我稍微复杂了模式，在多个`X`s 周围添加了一个捕获组。这是我的结果：

```
Array (
    [0] => Array (
            [0] => Array (
                    [0] => aa
                    [1] => 2
                )
            [1] => Array (
                    [0] => X
                    [1] => 1
                )
        )
    [1] => Array (
            [0] => Array (
                    [0] => aaa
                    [1] => 6
                )
            [1] => Array (
                    [0] => X
                    [1] => 5
                )
        )
    [2] => Array (
            [0] => Array (
                    [0] => aaaa
                    [1] => 12
                )
            [1] => Array (
                    [0] => X
                    [1] => 11
                )
        )
) 
```

它显然与`a`s后面的 s 匹配`X`，这是正确的。但是，子模式 1 似乎只匹配一个`X`，而不是全部。如果我`a`在lookbehind 的开头添加一个，以便它必须找到`X`其间的所有 s，这是我的结果：

```
$regex = '/(?<=(a(?:X)+))a+/'; 
```

```
Array (
    [0] => Array (
            [0] => Array (
                    [0] => aa
                    [1] => 2
                )
            [1] => Array (
                    [0] => aX
                    [1] => 0
                )
        )
) 
```

它只匹配一次（只有一个`X`）。有效地，`(X)+`并且`(X){1,}`正在减少到`(X){1}`（由于其固定长度是允许的）。

## 结论

我讨厌哭，“臭虫！” 一旦我发现一些不符合我期望的东西，但它确实看起来像一个。该模式没有像我预期的那样被拒绝，即使它是一个有效的模式，它的行为也不会像我预期的那样。

所以我问：

*   它有这样的行为方式吗？
*   为什么这适用于`+`但不适用`*`？
*   为什么括号很重要： `X+`失败；`(X)+`被允许 ？

任何见解都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:22:22.530

PCRE 版本 8.32-RC1 2012-08-08

re> /(?<=(X)+)a/ 失败：后向断言在偏移量 8 处不是固定长度 re>

可能是一个错误。请更新到最新的 PCRE。

顺便说一句，您可以使用 \K 创建无限的反向引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:41:51.343

这不是 PHP 错误。如果它是一个错误（并且看起来确实像一个错误），那么它就是一个 PCRE 错误，应该在那里报告。但是，请检查 PCRE 版本`phpinfo()`并将其与最新版本进行比较。如果它不是最新的，请在发布错误报告之前尝试直接在最新的 PCRE 中运行相同的正则表达式。

# javascript - 为什么 onload="function" 有效而 jquery.load 无效？

> ID：11814046
> 
> 赞同：3
> 
> 时间：2012-08-05T04:48:35.900
> 
> 标签：javascript, jquery, html

我正在将 SVG 文件加载到 a `<object>`，我现在的一个问题是弄清楚为什么里面的属性`<object onload="function" />`有效，但`obj.load(function(){});`没有

它们不同吗？加载只能在图像和正文中执行？

谢谢

编辑：这是代码的一部分：

```
var cont = $('<div class="file" >'+file.file_name+'</div>'); 

        var render = $('<object id="file_'+file.id+'" data="/while1/pcbsfiles/view/'+file.id+'" type="image/svg+xml"/></object>');
        cont.append(render);
        render.css('visibility', 'hidden');

        cont.load(function(){
            //
            render.removeClass('position');
            render.removeClass('left');
            alert("aaaaaa");
            render.fadeIn();
        }); 
```

我也试过`cont.load`了`render.load``$('#file_'+file.id).load`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:08:24.767

我相信 .load 声明需要在您创建对象之后直接声明，然后再将其附加到另一个对象。我无法具体说明原因，但我之前遇到过类似的问题。

尝试更多类似的东西：

```
var cont = $('<div class="file">'+file.file_name+'</div>');
$(cont).load(function(){
    var $render = $(render);
    $render.removeClass('position');
    $render.removeClass('left');
    alert("aaaaaa");
    $render.fadeIn();
});

var render = $('<object></object>');
$(render).attr('id', 'file_'+file.id)
    .attr('data', '/wihlte1/pcbsfiles/view/'+fild.id)
    .attr('type', 'image/svg+xml')
    .css('display', 'none');
$(cont).append(render); 
```

# c# - 基于 Mono 的应用程序是否消耗更多电池（Android）

> ID：11814048
> 
> 赞同：2
> 
> 时间：2012-08-05T04:49:20.313
> 
> 标签：c#, java, android, mono

与在 eclipse/adt 中开发的 java 应用程序相比，Mono 应用程序是否消耗更多电池（必须为同一任务执行更多指令）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T04:56:37.957

根据 Xamarin 的这篇文章，他们证明了单点触控应用程序比常规 Java 应用程序消耗更少的资源

[http://blog.xamarin.com/2012/05/01/android-in-c-sharp/](http://blog.xamarin.com/2012/05/01/android-in-c-sharp/)

# java - Android中的线程以处理长时间运行的进程

> ID：11814054
> 
> 赞同：3
> 
> 时间：2012-08-05T04:50:21.963
> 
> 标签：java, android, multithreading, android-asynctask, handler

好的，这是我的问题。我想学习 AsyncTask、Threading 和 Handler 来处理长时间运行的任务。我使用了 Android Cook Book 和 New Boston Android tutorial，但我无法让它工作。

我需要更改进度条消息。这不是为了项目，而是为了学习线程。线程对我来说真的很难。因此，如果您有任何了解线程的教程或指南，请告诉我。

同时我尝试了 Handler 类，但它没有用。所以我尝试了AsyncTask。但它也不起作用。

这是我的代码。

```
package com.example.androidpopup;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    Button click_btn;
    ProgressDialog dialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        click_btn = (Button) findViewById(R.id.button1);

        click_btn.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                dialog = ProgressDialog.show(MainActivity.this, "",
                        "Recording...", true);
                dialog.setCancelable(true);
                Thread thread = new Thread(){
                    public void run(){
                        try{
                            sleep(2000);
                            new UpdateUI().execute("testing");
                        }catch(InterruptedException e){
                            e.printStackTrace();
                        }
                    }
                };
            }
        });
    }

    public class UpdateUI extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            return "Searching";
        }

        protected void onPreExecute(String f){
            //example of setting up something
            f = "whatever";
        }

        protected void onProgressUpdate(Integer...progress){

        }

        protected void onPostExecute(String result){
            dialog.setMessage(result);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

如果有人可以解释我的方法有什么问题，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T06:49:18.717

为什么要创建一个新线程只是为了等待 2 秒来调用 AsyncTask？我建议您删除该线程，通常调用 AsyncTask 并在其中放置 Thread.sleep(....)。

就像是：

```
protected void onPreExecute(String f){
     Thread.sleep(2000);
     //example of setting up something
     f = "whatever";
} 
```

PS：为了运行一个Thread，你需要调用thread.start。;)

# c# - 在使用 itemssource - datagrid wpf 之前，项目集合必须为空

> ID：11814058
> 
> 赞同：2
> 
> 时间：2012-08-05T04:51:01.403
> 
> 标签：c#, wpf, datagrid

尝试明确定义数据网格列时，我不断收到此错误。如果我注释掉 3 个 datagridtext 列，它可以工作（但我显然想隐藏一些列）。在我的代码中，我所做的只是为 DataGridLookupsTab 设置数据上下文。不要弄乱 itemsource 或我的代码中的任何内容。知道我在这里可能做错了什么吗？

谢谢 ！

```
<TabItem Header="Lookups" Height="23" VerticalAlignment="Top">
            <Grid x:Name="DataGridLookupsTab" Background="#FFE5E5E5" Margin="0,0,-1,-2" DataContext="Apps.OMS.Models.Lookups">
                <ComboBox x:Name="ComboBoxDistinctLookups" HorizontalAlignment="Left" Margin="128,14,0,0" VerticalAlignment="Top" Width="228" ItemsSource="{Binding Path=LookupTypeList}" SelectionChanged="ComboBoxDistinctLookups_SelectionChanged"/>
                <Label Content="Select Lookup Type" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" RenderTransformOrigin="1.105,4.731"/>
                <DataGrid x:Name="DataGridLookups" HorizontalAlignment="Left" Margin="10,41,0,0" VerticalAlignment="Top" Width="768" Height="327" ItemsSource="{Binding LookupRecords}" > 
                    <DataGridTextColumn Binding="{Binding LookupType}" Header="Lookup Type" />
                    <DataGridTextColumn Binding="{Binding LookupValue}" Header="Lookup Value" />
                    <DataGridTextColumn Binding="{Binding LookupDescription}" Header="Lookup Description" />
                </DataGrid>
            </Grid>
        </TabItem> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:16:12.783

实际上问题最终是我缺少 Datagrid.Columns 标记。谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T04:59:23.743

如果您在代码中设置 DataContext（即后台代码文件），则不要在 XAML 中设置数据上下文。相反，请使用 ItemSource={Binding }。看看这是否解决了你的问题。

# python - 网站匹配查询不存在

> ID：11814059
> 
> 赞同：67
> 
> 时间：2012-08-05T04:51:41.400
> 
> 标签：python, django

Python noob，因为这是我的第一个项目，所以请原谅我的不熟悉。

该网站运行良好，直到我在我的应用程序上单击“注销”。之后，网站会给我这个错误：DoesNotExist at /login/ 网站匹配查询不存在。

我到处搜索，我得到的唯一解决方案与设置站点框架、SITE_ID 等有关。我认为我计算机上的这些项目很好，但我找不到帮助我检查它们的演练/指南。

谁能告诉我问题是什么以及如何解决？提前致谢：3

```
 DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '/home/dotcloud/nhs.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-08-05T05:45:18.260

如果您的数据库中没有定义站点并且 django 想要引用它，您将需要创建一个。

从一个`python manage.py shell`：

```
from django.contrib.sites.models import Site
new_site = Site.objects.create(domain='foo.com', name='foo.com')
print (new_site.id) 
```

现在将您的 settings.py 中的站点 ID 设置为 SITE_ID

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-17T21:49:05.317

表`django_site`必须包含具有相同值的行`id`（默认情况下等于`1`），`SITE_ID`设置为（在您的内部`settings.py`）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-01T11:22:00.580

添加`SITE_ID = 1`到 django 项目中的 settings.py 中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-06T11:31:44.843

`manage.py`我在不使用 python shell的情况下修复了它

起初我尝试使用`manage.py`shell 使用上面的命令：

```
from django.contrib.sites.models import Site
new_site = Site.objects.create(domain='foo.com', name='foo.com')
print(new_site.id) 
```

但它给出了一个完整性错误

简短的回答是添加`SITE_ID = 1`到您的`settings.py` 如果您想知道您的站点 id 是什么，然后进入实际数据库，我下载了 sqliteman 以查看我的表有什么。因此，您在表格中拥有的任何站点 ID 都是分配给的`SITE_ID`

这是因为有一个函数`get_current`正在寻找，`SITE_ID`但在你的`settings.py`

```
tables
-django_site
--Columns
---id 
```

它应该有 id 为 1，名称为`example.com`，域为`example.com`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-06T07:23:13.607

我看到了创建新站点和参考 ID 的答案。但是，如果您已经有一个站点，或者您以某种方式从 UI 中删除并再次创建了该站点，那么 id 会继续增加。要解决此问题，您可以按如下方式获取 id：

```
python manage.py shell
from django.contrib.sites.models import Site
print(Site.objects.get(name='example.com').id) 
```

获取您进入的 id `setting.py`。例如。

```
SITE_ID = 8 
```

基本上对应于旅游站点的表中的 ID 和 settings.py 中的 ID 应该匹配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-08T05:20:28.710

看来您必须在 settings.py 中添加 SITE_ID=1

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-01T08:55:12.330

[![在此处输入图像描述](../Images/314b6835da77ae9179229dbca9d25c3f.png)](https://i.stack.imgur.com/tkRuV.png)

查询数据库 django_site 表中的 ID 并在 Django settings.py 中设置正确的 ID，例如：`SITE_ID = 3`

# android - onPostExecute getResources().getString NullPointerException

> ID：11814060
> 
> 赞同：2
> 
> 时间：2012-08-05T04:51:45.213
> 
> 标签：android, nullpointerexception, getstring

当我在 onPostExecute 中运行以下代码时，它给了我一个异常：`java.lang.NullPointerException`

```
getApplicationContext().getResources().getString(R.string.lbl_sth);
getBaseContext().getResources().getString(R.string.lbl_sth); 
```

`R.string.lbl_sth`绝对正确。如果我在 中的两行以上运行`onCreate`，则这两行都按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:01:00.113

不要`getBaseContext()`在您的`AsyncTask`... 中使用，而是将您`Activity`的上下文作为上下文`AsyncTask`。然后`getResources().getString(...)`就`Activity`直接调用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T17:28:51.543

您应该在 AsyncTask 的构造函数中传递来自 Resources 的字符串：

```
public MyAsyncTask(String lblString) {
    this.lblString = lblString; 
} 
```

您可以从 Activity/Fragment 构造和执行这样的任务：

```
new MyAsyncTask(getString(R.string.lbl_sth)).execute(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-02T20:28:22.047

尝试使用 getActivity().getResources().getString(R.string.lbl_sth);

# android - 错误：res\menu\main.xml:15：错误：在包 'android' 中找不到属性 'actionProviderClass' 的资源标识符

> ID：11814061
> 
> 赞同：1
> 
> 时间：2012-08-05T04:51:54.770
> 
> 标签：android, eclipse, error-handling, compiler-errors

好的，我正在为平板电脑制作应用程序，但我的 actiobar/menu xml 出现此错误，我的目标和 minsdk 版本都是 11 api。不知道是什么问题！！！！继承人的错误：

res\menu\main.xml:15：错误：在包 'android' 中找不到属性 'actionProviderClass' 的资源标识符

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:43:29.870

ActionProvider类是在 API 14[中](http://developer.android.com/reference/android/view/ActionProvider.html)添加的。但是，在一定程度上，向后兼容库支持它。确保您已将这些添加到您的项目中。

**在 Eclipse 中，在Package Explorer**窗口中右键单击您的项目-> 导航到**Android Tools** -> 选择**Add Support Library**

# android - EditText 还是 TextView ？对于“复制”和“共享”选项

> ID：11814062
> 
> 赞同：1
> 
> 时间：2012-08-05T04:51:57.913
> 
> 标签：android, textview, android-edittext

我正在开发一个 android 应用程序，但我对在 EditText 和 TextView 之间做出决定有点困惑，因为我可以为两者执行以下操作： android:textIsSelectable="true" android:editable="false" android:inputType= “无” android:cursorVisible=“假”</p>

我的目标是让用户拥有“复制”和“共享”文本的选项。默认情况下，EditText 和 TextView 中都没有出现共享功能！！此外，使 TextView 可选择在早期版本的 android 中不起作用低于 4.0\. 所以，我需要用户在所有 android 版本中复制和共享文本，如何？感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:07:13.240

如果您希望用户能够更改文本，请使用 EditText，或者如果您只希望用户选择要复制和粘贴的文本，请使用 TextView。您不会找到任何用于共享的单一属性。然而：

*   本指南将引导您使用剪贴板：[复制和粘贴](https://developer.android.com/guide/topics/text/copy-paste.html)

*   并阅读有关[添加轻松共享操作的本指南](http://developer.android.com/training/sharing/shareaction.html)

两者都来自 Android 开发者并提供了丰富的信息。

* * *

至于能够在 TextView 中选择文本，您不需要任何特殊属性。只需长按文本中的任何单词。下面的 XML 就是您所需要的：

```
<TextView
    android:width="wrap_content"
    android:height="wrap_content"
    android:text="A short text blurb." /> 
```

但是，您可以随意添加更多属性以赋予其风格和个性。

# visual-studio-2010 - Qt Q_OBJECT 在 Visual Studio 2010 中创建链接器错误

> ID：11814064
> 
> 赞同：0
> 
> 时间：2012-08-05T04:52:35.153
> 
> 标签：visual-studio-2010, qt, linker, lnk2001

我正在尝试让 Qt 与 Visual Studio 2010 一起使用。我已经构建了一个可以在调试器中运行的工作程序。但是，当我尝试将 Q_OBJECT 宏添加到我的类时，它会生成一堆链接器错误。

```
1>------ Build started: Project: qt_poop, Configuration: Debug Win32 ------
1>Build started 2012/08/05 12:58:56.
1>InitializeBuildStatus:
1>  Creating "Debug\qt_poop.unsuccessfulbuild" because "AlwaysCreate" was specified.
1>ClCompile:
1>  GLViewer.cpp
1>  Window.cpp
1>  main.cpp
1>  Generating Code...
1>Link:
1>  LINK : c:\Users\abral\Documents\Visual Studio 2010\Projects\qt_poop\Win32\Debug\\qt_poop.exe not found or not built by the last incremental link; performing full link
1>GLViewer.obj : error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall GLViewer::metaObject(void)const " (?metaObject@GLViewer@@UBEPBUQMetaObject@@XZ)
1>GLViewer.obj : error LNK2001: unresolved external symbol "public: virtual void * __thiscall GLViewer::qt_metacast(char const *)" (?qt_metacast@GLViewer@@UAEPAXPBD@Z)
1>GLViewer.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall GLViewer::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@GLViewer@@UAEHW4Call@QMetaObject@@HPAPAX@Z)
1>c:\Users\abral\Documents\Visual Studio 2010\Projects\qt_poop\Win32\Debug\\qt_poop.exe : fatal error LNK1120: 3 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:07.50
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我已经看到其他人提出了一些类似的问题，这似乎与编译器和 moc 以及我的初学者大脑还不能完全理解的其他一些非常复杂的技术有关。此外，其中很多似乎面向使用命令行配置编译器的人，但我使用的是 VS，我真的很想保持这种方式（基本上我只想能够按下绿色箭头并查看我的程序 - 仅此而已）。所以......如果有人能以尽可能简单的方式向我解释如何配置 Visual Studio 来执行任何链接或编译或完成此操作所需的任何操作，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:30:25.003

这是使用 VS2010 编译 Qt 的链接。
[http://thomasstockx.blogspot.in/2011/03/qt-472-in-visual-studio-2010.html](http://thomasstockx.blogspot.in/2011/03/qt-472-in-visual-studio-2010.html)
按照他说的所有步骤，可能这可以帮助您解决问题。谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T21:55:11.247

如果您将 Q_OBJECT 添加到类中，请确保您运行`qmake`！我与 Creator 一起工作，但在尝试编译一些包含扩展 QObject 的类和 Q_OBJECT 宏的代码之前，我遇到了非常奇怪的错误，当我没有这样做时。

# c# - 如何使用monotouch将文件从应用程序包复制到ios中的文档目录

> ID：11814069
> 
> 赞同：2
> 
> 时间：2012-08-05T04:53:37.323
> 
> 标签：c#, objective-c, xamarin.ios

我在 monotouch 中执行 tesseract ocr。我想在 c# 中转换以下代码。

```
// Set up the tessdata path. This is included in the application bundle
// but is copied to the Documents directory on the first run.
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath = ([documentPaths count] > 0) ? [documentPaths objectAtIndex:0] : nil;

NSString *dataPath = [documentPath stringByAppendingPathComponent:@"tessdata"];
NSFileManager *fileManager = [NSFileManager defaultManager];
// If the expected store doesn't exist, copy the default store.
if (![fileManager fileExistsAtPath:dataPath]) {
    // get the path to the app bundle (with the tessdata dir)
    NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
    NSString *tessdataPath = [bundlePath stringByAppendingPathComponent:@"tessdata"];
    if (tessdataPath) {
        [fileManager copyItemAtPath:tessdataPath toPath:dataPath error:NULL];
    }
}

setenv("TESSDATA_PREFIX", [[documentPath stringByAppendingString:@"/"] UTF8String], 1); 
```

我不知道如何将上面的代码转换成 c#。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:29:20.873

要访问文档文件夹，您可以使用：

```
string docPath = Environment.GetFolderPath (Environment.SpecialFolder.Personal); 
```

要在那里管理文件，您可以使用普通的 System.IO 方法。比如创建文件夹/文件等。

# php - lightopenid中的requeststreams查询URL两次，第一次成功(is_valid:true)，第二次返回失败

> ID：11814072
> 
> 赞同：0
> 
> 时间：2012-08-05T04:54:41.340
> 
> 标签：php, openid, lightopenid

我已经在本地测试机器（Windows 和 IIS）和远程服务器上实现了登录代码。在 IIS 中，它“工作”，采用 request_curl 路线。在服务器上，它采用 request_streams 路由，但失败了。

通过在代码中插入大量的跟踪消息，我发现它实际上成功了，然后失败了。就是这样：

在 request_streams 中，语句

```
 $data = file_get_contents($url, false, $context); 
```

返回“is_valid:true...”。不幸的是，代码继续处理响应标头，然后执行与上述相同的语句，这次返回“is_valid:false ...”。

由于我不确定 request_streams 在这一点上真正想要做什么，我不愿意简单地删除问题陈述并返回 $data。

谁能解释一下代码应该在这里做什么？代码是否需要修复，或者我可能已经做了一些事情以某种方式把它搞砸了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:13:45.530

这是当前稳定版本的错误。使用[来自 gitorious 的版本](https://gitorious.org/lightopenid/lightopenid/blobs/raw/master/openid.php)，该版本已修复。

# php - 来自 SELECT 查询的 MySQLi 结果对象

> ID：11814080
> 
> 赞同：0
> 
> 时间：2012-08-05T04:57:10.000
> 
> 标签：php, mysqli, prepared-statement

由于执行 stmt（预期），我看到我在哪里获得一行数据。

但是，当使用该`get_result()`方法返回 a`mysqli::result`时，结果实例中没有字段，（不是预期的，应该有 5 个字段）。

我错过了什么令人尴尬的简单方面？

```
if ($stmt = $mysqli->prepare("SELECT * FROM teachers WHERE teacher_id = ? LIMIT 1")) {    

    $stmt->bind_param('i', $id);

    $stmt->execute();

    $stmt->store_result();

    // output = 1 (expected)
    echo $stmt->num_rows . "<br />";

    $result = $stmt->get_result();

    // no output, expecting '5'
    echo $result->field_count . "<br />";

    // Close statement object
    $stmt->close();

}
else {
    /* Error */
    die ("Prepared Statement Error: " . $mysqli->error);
} 
```

# modx - “lofslidernews”标题问题

> ID：11814086
> 
> 赞同：0
> 
> 时间：2012-08-05T04:58:27.393
> 
> 标签：modx, modx-evolution, modx-templates

早上好家伙！

我最近选择了 MODx Evolution 1.0.6（因为 Revolution 在 Chrome 中出现了显示问题）并开始在 Photoshop 中构建我的模板。我完成了设计，以及切片和导出，甚至内置了“新闻滑块”（*lofslidernews*）。我在测试站点（本地和远程）上按预期运行，但是当我将它作为模板集成到我的 MODx 安装中时（当我构建整个站点本身时，这也是一个测试站点），我不能不能让滑块正常工作。

首先，网站应该是这样的——[工作设计](http://innuendo-eu.co.uk/PublicResources/modx_preview/inverted/)。

但是，这就是我在移至 MODx -[失败的 MODx 设计 - Sadface](http://www.innuendo-eu.co.uk/modx/)时所得到的。

**注意：**虽然第一个链接的主要内容提到了 Joomla!，但它不是 Joomla! 相关的插件或模块，并在标准脚本中完美运行。滑块的实际内容（例如描述等）作为标准 HTML 位于页面中，但随着开发的继续，我可能会将其移动到它自己的块中。

如您所见，在第一个链接（纯 HTML 和脚本）中，一切正常，但在第二个链接（MODx）中，新闻滑块保持在加载器上并且永远不会前进。我已经验证了所有文件都已就位（通过在同一位置使用同一页面的 html 版本，它按预期加载到该位置）。显然，对于标准 HTML 版本，我在标题中使用了脚本链接，因为片段不可用。

我查看了片段并相信我已经正确了，但是由于我是 CMS 的新手，我想要一些验证和指示；

```
<?php
$modx->regClientCSS("http://www.innuendo-eu.co.uk/modx/jQuery/lofslidernews/css/style4.css");
$modx->regClientStartupScript("http://www.innuendo-eu.co.uk/modx/jQuery/lofslidernews/js/jquery.js");
$modx->regClientStartupScript("http://www.innuendo-eu.co.uk/modx/jQuery/lofslidernews/js/jquery.easing.js");
$modx->regClientStartupHTMLBlock("<script type='text/javascript'>
 $(document).ready(function(){  
        // buttons for next and previous item                        
        var buttons = { previous:$('#jslidernews1 .button-previous') ,
                        next:$('#jslidernews1 .button-next') };
         $obj = $('#jslidernews1').lofJSidernews( { interval : 7500,
                                                easing          : 'easeInOutCubic',
                                                duration        : 500,
                                                auto            : true,
                                                maxItemDisplay  : 3,
                                                startItem:0,
                                                navPosition     : 'horizontal', // horizontal
                                                navigatorHeight : null,
                                                navigatorWidth  : null,
                                                mainWidth:980,
                                                buttons:buttons} );     
    });
</script>");
?> 
```

**请注意：**为了排除故障，我直接链接到脚本的整个 URL，而不是本地引用（即带有 a 的前缀`./`）。

页面的其余部分按预期加载，但加载程序停留在那里。如果我删除 的第一行`regClientCSS`，页面会加载，但没有格式设置，当然，由于缺少格式设置，新闻滑块无法正常工作。

通过 Joomla 的 MODx，我可能拥有的创作自由！（我目前的 CMS）非常吸引人，我相信 SO 的好人可以帮助我。任何有关使这项工作的帮助（以及任何关于 MODx 的一般提示）将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:19:29.660

控制台中的“SyntaxError: Unexpected token = in line 17”

您的第 17 行：“= $('#jslidernews1').lofJSidernews({interval : 7500,”

原始第 17 行：“$obj = $('#jslidernews1').lofJSidernews({interval : 7500,”

这个 chrome 扩展对于检测此类错误很有用 - [https://chrome.google.com/webstore/detail/jafmfknfnkoekkdocjiaipcnmkklaajd](https://chrome.google.com/webstore/detail/jafmfknfnkoekkdocjiaipcnmkklaajd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:14:37.150

我不知道如何纠正 lofslidernews 显示的错误（其中 Vasis 的回答帮助我找到了它不工作的原因），所以我改用[Orbit jQuery Slider](http://www.zurb.com/playground/jquery_image_slider_plugin)。我确实必须对该页面上的示例代码进行一些编辑（即脚本和 CSS 的文件名中有版本号，而文档页面没有显示这一点）但我设法在没有问题。我已经接受了 Vasis 的回答，因为它回答了原始问题（特别是关于它为什么不起作用）。

# c - HLSL 函数没有被识别？未声明的错误

> ID：11814087
> 
> 赞同：0
> 
> 时间：2012-08-05T04:58:54.137
> 
> 标签：c, xna, hlsl

```
float4 PixelShaderFunction(float2 TexCoord: TEXCOORD0) : COLOR0
{
float4 color1 = tex2D(inputSampler, TexCoord);
float numb = TestFunc( 5 );
float4 color3 = color1 + numb;
return color3;
}

float TestFunc(float numb)
{

return numb + 1;
} 
```

我收到一条错误消息，提示错误 x3004: undeclared identifier 'TestFunc'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T05:16:24.697

要么`TestFunc()`在 PixelShaderFunction 中使用它之前声明，要么在此之前完全移动它。IE。：

```
float TestFunc(float);

float PixelShaderFunction()
{
    // ...
}

float TestFunc(float n)
{
    // ...
} 
```

或者

```
float TestFunc(float n)
{
     // ...
}

float PixelShaderFunction()
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T05:15:41.937

尝试`TestFunc`在之前声明`PixelShaderFunction`，或者如果在 HLSL 中允许，则前向声明：

```
float TestFunc(float numb); 
```

# ruby-on-rails - 在 Rails 中，如何在表单的隐藏字段中传递登录用户的密码？

> ID：11814092
> 
> 赞同：0
> 
> 时间：2012-08-05T05:00:18.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个`dwelling`建立在`user`.

**住宅控制器（创建动作）**

```
# dwellings_controller.rb
def create
  @dwelling = current_user.properties.build(params[:dwelling])

  if @dwelling.save
    current_user.dwelling = @dwelling
    if current_user.save!
      flash[:success] = "Woohoo! Your dwelling has been created. Welcome home!"
    else
      flash[:notice] = "You have successfully created a dwelling, but something prevented us from adding you as a roomie. Please email support so we can try to correct this for you."
    end
      redirect_to current_user
    else
      render 'new'
    end
  end 
```

未`dwelling_id`保存到`current_user`记录中。为了获得更多信息，我在命令中添加了 bang 方法（如上所示）`current_user.save!`。Rails 抱怨`user`更新记录需要密码，如下所示。

```
ActiveRecord::RecordInvalid in DwellingsController#create

Validation failed: Password can't be blank, Password is too short (minimum is 6 characters), Password confirmation can't be blank 
```

如果通过隐藏字段提供用户密码不是正确的解决方案——而且看起来确实不安全——我该如何解决这个问题？`user`和模型的相关部分`dwelling`如下所示。

```
#dwelling.rb
class Dwelling < ActiveRecord::Base
  attr_accessible :street_address, :city, :state, :zip, :nickname

  belongs_to :owner, :class_name => "User", :foreign_key => "owner_id"
  has_many :roomies, :class_name => "User"

#user.rb
class User < ActiveRecord::Base
  attr_accessible :email, :first_name, :last_name, :password, :password_confirmation, :zip, :dwelling_id
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  belongs_to :dwelling
  has_many :properties, :class_name => "Dwelling", :foreign_key => "owner_id" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:40:33.360

原来问题源于我在`User`模型中的验证。和验证`presence`和被强加于，这是失败的并且没有被提供。我的更新验证出现在下面。`length``password``password_confirmation``user.save``password``password_confirmation`

**用户模型**

```
#user.rb
class User < ActiveRecord::Base
  attr_accessible :email, :first_name, :last_name, :password, :password_confirmation, :zip, :dwelling_id
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_create :create_remember_token

  belongs_to :dwelling
  has_many :properties, :class_name => "Dwelling", :foreign_key => "owner_id"

  validates :first_name, presence: true, length: { maximum: 50 }
  validates :last_name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, 
                format: { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }
  validates :password, presence: { :on => :create }, length: { minimum: 6, :on => :create }
  validates :password_confirmation, presence: { :on => :create } 
```

通过这个更新的实现，`user`成功保存并更新了相应的属性。这是源于这个原始问题的次要问题：[在 Rails 中，如何自动更新用户以在新对象的 Create 方法中拥有另一个类的新创建对象？](https://stackoverflow.com/questions/11812834/in-rails-how-can-i-automatically-update-a-user-to-own-a-newly-created-object-of)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:20:08.937

您不能在表单中的任何位置分配密码，因为用户的密码以无法解密的加密密码摘要格式保存在数据库中（通过 has_secure_password）。（密码是通过单向加密保存的。）所以没有办法把密码放在表单的隐藏字段中的任何地方（无论如何这都是个坏主意）。

检查日志中的 current_user (logger.debug current_user) 以查看 current_user 是否分配了有效用户（带有密码）。

# java - 在跟踪该程序时，我可以使用哪种图表方法来保持一切井井有条？

> ID：11814096
> 
> 赞同：3
> 
> 时间：2012-08-05T05:01:18.110
> 
> 标签：java, trace, diagramming

这是我的自学作业问题之一。

我应该写下这个程序的输出而不实际运行它。我了解这里的所有语法和变量传递，（并且我有答案）但由于某种原因，在纸上追踪它是行不通的。

有什么秘密的图表技术可以让一切井井有条吗？

对于有经验的程序员来说，手工解决这个问题只是儿戏吗？

谢谢

```
public class Mystery extends ConsoleProgram {
public void run() {
    ghost(13);
}

private void ghost(int x) {
    int y = 0;
    for (int i = 1; i < x; i *= 2) {
        y = witch(y, skeleton(x, i));
    }
    println("ghost: x = " + x + ", y = " + y);
}

private int witch(int x, int y) {
    x = 10 * x + y;
    println("witch: x = " + x + ", y = " + y);
    return x;
}

private int skeleton(int x, int y) {
    return x / y % 2;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:12:09.823

尝试用传入的数字写下一堆方法调用，例如：

```
run()
ghost(13)
skeleton(13,1) 
```

等等

在每次方法调用时，找到一些暂存空间并写出变量并尝试计算代码的作用，直到获得返回值。然后获取该返回值并返回该方法堆栈中的最后一点并刮掉该方法。

例如，上面示例堆栈的顶部（底部）是`skeleton(13,1)`，因此您尝试计算`skeleton()`当 x 为 13 且 y 为 1 时返回的内容。很简单，它是`1`。然后回到堆栈，看看返回值应该是什么。在这种情况下它是`witch()`，所以堆栈是：

```
run()
ghost(13)
witch(0,1) 
```

并继续直到 run() 完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T05:13:46.390

通常我使用有 2 列（内存和监视器）的表，如下所示：

```
====================
| Memory | Monitor |
====================
|        |         |
|        |         |
|        |         |
|        |         |
==================== 
```

内存就像调试中的手表。监视器是将在监视器中输出的内容

例如：

```
int x; // Declare X (Memory)
x=10; // fill with 10 (Memory)
System.out.println(x); // print it (Monitor) 
```

如果我跟踪使用该表：

```
====================
| Memory | Monitor |
====================
| x=10   | 10      |
|        |         |
|        |         |
|        |         |
==================== 
```

我希望这能帮到您

更新：我想解释更多细节：

让我们看一下我之前创建的代码

```
1\. int x; // Declare X (Memory)
2\. x=10; // fill with 10 (Memory)
3\. System.out.println(x); // print it (Monitor) 
```

第 1 步：我声明 X。所以表格如下所示：

```
====================
| Memory | Monitor |
====================
| x      |         |
|        |         |
|        |         |
|        |         |
==================== 
```

第 2 步：我用 10 填充 x，然后看起来像这样：

```
====================
| Memory | Monitor |
====================
| x=10   |         |
|        |         |
|        |         |
|        |         |
==================== 
```

第 3 步：我打印 x

```
====================
| Memory | Monitor |
====================
| x=10   | 10      |
|        |         |
|        |         |
|        |         |
==================== 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T05:10:51.407

您可以做的是在一张纸上实际模拟每个范围（思考方法），并在其中写下所有变量。

如果你调用一个方法，你会拿一张新纸并将它放在现有的纸堆上。如果你从一个方法返回，你会把最上面的一块扔掉。如果您有课程，则需要单独的表格。

那是你能做的。但是没有真正的程序员会这样做。

你要做的是：

*   通过查看代码了解基本结构。例如：它会在打印“ghost”之前调用“witch”几次。

*   了解您指导的详细信息，并使用日志记录/系统输出语句和/或调试器仔细检查您的想法并实际执行代码。

那么运动没用吗？不要这么想。虽然你不是自己做的，但它是思考代码的一部分，你总是以一种或另一种方式这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T05:09:59.117

由于`run()`它是唯一可见的`main()`（因此能够被调用）的方法，因此您只需要执行变量到值的替换。将变量的值放在它们出现并生成时。

一旦掌握了替换变量值的窍门，这并不难，这是一种非常宝贵的调试策略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T05:11:11.820

您可以展开循环：

```
for (int i = 1; i < 13; i *= 2) {
    E[i]
} 
```

变成

```
E[1]; E[2]; E[4]; E[8]; 
```

这里没有递归，所以其余的应该很简单。

# c# - 将我的 python 程序公开给 .Net/C# 的最简单方法 - 不能使用 ironpython

> ID：11814106
> 
> 赞同：0
> 
> 时间：2012-08-05T05:04:41.180
> 
> 标签：c#, .net, python, web-services

我有一个用 python 编写的自定义业务逻辑 - 有多种原因我不能直接在 C#/.Net 中编写它（时间限制等）。

我尝试使用 IronPython 将 python 程序集成到 .Net 中，但不能（[lxml 是原因之一](https://stackoverflow.com/questions/5202368/missing-lxml-module-in-python)）。

> 我正在转向更简单的解决方案，将这个 python 逻辑公开为 .Net 可以调用的 Web 服务。

-

> 首先，我认为我必须将我的 python 代码托管在一个单独的域中。但我意识到，我可以在同一台服务器上安装 python 并运行这个 python 服务！

功能很简单 - .Net 传递一个 URL，python 程序将数据作为长字符串返回。

**1** .) 最简单的方法是什么？
**2** .) 我是否需要使用 web2py/werkzeug 之类的框架，或者是否有内置的东西我可以使用？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:22:34.007

您是否考虑过将您的 python 代码发布为 com 对象？我过去曾这样做过。

[请参阅http://oreilly.com/catalog/pythonwin32/chapter/ch12.html](http://oreilly.com/catalog/pythonwin32/chapter/ch12.html)中的“在 Python 中实现 COM 对象”部分

不确定它如何适合您的 .Net 环境，但它是可行的。

其他我会调查只是将它包装在一个简单的 XMLRPC 服务中，如果它只在你的本地环境中使用，那么你必须进入框架领域（如 Django 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:47:14.890

我想我会试试[Tornado 。](http://www.tornadoweb.org/)我过去一直在使用它，它非常容易学习。

无论如何，我想我会建议你准备一个在本地运行的小型 Web 服务（使用 Tornado）。然后，运行在同一台机器上的任何代码都可以轻松访问此 Web 服务，如果有需要，也可以从另一台机器上访问。

哦，Tornado 比 Django 轻得多……

（下面的示例代码是来自 Tornado 网站的 Hello-World 示例 - 我刚刚将它复制到这里以显示使用 Tornado 是多么容易）：

```
import tornado.ioloop
import tornado.web

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        # put your calculation logic in here (instead of "Hello World"
        self.write("Hello, world")

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

Tornado 的一大优点是它可以很容易地完成简单的任务，但以防万一您需要更复杂的东西 - 使用它们很容易。

哦，还有一件事要记住——我不知道你的代码实际上在做什么，但我认为考虑设计你的 web 服务的 API 时考虑到 REST 可能是个好主意。

# objective-c - GCD 和委托在哪个线程上？

> ID：11814108
> 
> 赞同：0
> 
> 时间：2012-08-05T05:05:03.657
> 
> 标签：objective-c, grand-central-dispatch, delegation

我试图弄清楚这段代码是否正在更新主线程上的 UI。这段代码在我专门为下载 JSON 提要而制作的一个类中。获取数据后，我解析它以返回一个数组，我将使用它来更新 UI，然后让代理知道数据已准备好。我的委托，一个视图控制器，将使用这个数组来更新 UI。我需要`-parser:didFinishParsingWithResults:`在一个`dispatch_get_main_queue`街区内完成吗？或者因为我在视图控制器类而不是这个类中更新 UI，所以这不是必需的？谢谢！

```
__block NSArray *results;
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSData *responseData = [NSData dataWithContentsOfURL:url];
    results = [self parseData:responseData];
    [self.delegate parser:self didFinishParsingWithResults:results];
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:27:38.977

```
dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) 
```

那不是主线。这是默认优先级全局队列，可能是任何线程。

如果`parser:didFinishParsingWithResults:`在没有调度到主队列/线程的情况下欺骗 UI 元素，那么你就有问题了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T05:28:26.803

绝对用于`dispatch_get_main_queue()`更新您的 UI，该代码不是线程安全的，因此您总是希望在主线程上更新您的 UI。我经过惨痛的教训才学到这个 ：-）

# javascript - 如何使用 json 对使用 MVC 发送到我的控制器的数据进行编码？

> ID：11814109
> 
> 赞同：1
> 
> 时间：2012-08-05T05:05:06.407
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我的表单上有一个文本字段，可以包含 html 代码和带有 < > 字符的代码。我想将其存储在数据库中，但首先我想对其进行编码，以便可以安全地接受它而无需执行 [allowHtml}。

这是我用来发送数据的代码。请注意，我一次只发送一个字段，可能包含或不包含 html 代码的数据位于 javascript **val**变量中：

```
 $.ajax({
        cache: false,
        url: "/Admin/" + obj.table + "s/JsonUpdate",
        dataType: 'json',
        type: 'POST',
        data: { pk: pk, rk: rk, fld: type, val: val }
    }) 
```

在服务器端控制器上，我有以下代码：

```
 [HttpPost]
   public JsonResult JsonUpdate(string pk, string rk, string fld, string val) {
   Content content = null;
            try {
                if (fld == "TempRowKey") { 
```

建议的一件事是让我使用 viewModel 和 [AllowHTML] 但如果数据是编码的，那么为什么我必须使用 [AllowHtml]

这是我尝试发送时发生的事情`<x>`。发送的数据是：

```
pk=0006000&rk=0100&fld=Notes&val=%3Cx%3E 
```

然后服务器回复：

```
 Server Error in '/' Application
 A potentially dangerous Request.Form value was detected from the client (val="<x>"). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:18:50.997

只要您不覆盖`contentType`或不`processData`覆盖[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)请求（在您的示例中您没有），发送的数据将默认为 urlencoded：

> 向服务器发送数据时，使用此[设置]内容类型。默认为“application/x-www-form-urlencoded; charset=UTF-8”，在大多数情况下都可以。

这可以通过使用 Firebug 或类似方法来检查提交的请求来确认。

## 更新：

看起来您正试图规避没有`[AllowHTML]`. 无论您最初不使用它的原因是什么，您都可以手动对提交的数据进行[编码URI](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)，然后在服务器上将其还原。

关于您的后续问题*...但是如果数据已编码，那么为什么我必须使用 [AllowHtml]*：

使用 提交数据时`jQuery.ajax`，其内容类型`application/x-www-form-urlencoded`默认设置为。此编码仅适用于传输期间 - 认为您的数据*表示*是 urlencoded，而不是实际数据。这有什么不同？当您的服务器收到请求时，它会识别内容类型并在进行进一步处理（和验证）之前对其进行解码。基本上，协议级别的数据传输的较低级别处理由您编写的代码之外的框架处理。

如果您在提交之前手动对客户端上的数据进行编码，那将是您的服务器应用程序接收它的方式，而不会检测到任何危险值。请注意，在传输过程中，字符串将出现有效的双重编码，但这不会影响最终结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:31:36.297

使用带有 的视图模型`[AllowHtml]`，然后在存储到数据库之前根据需要进行编码。但是为什么要打扰呢？按原样存储在数据库中，当需要在网页上输出存储在数据库中的值时，只需对其进行 HTML 编码。这就是`@`Razor 运算符默认执行的操作。

# php - php mysql：记住以前的 RAND()

> ID：11814111
> 
> 赞同：2
> 
> 时间：2012-08-05T05:05:20.353
> 
> 标签：php, mysql, session

我有这个查询，它从数据库中获取 2 个随机行：

```
 $query  = "SELECT * FROM foo ORDER BY RAND() LIMIT 2";
  $result = mysql_query($query); 
```

我想要的是记住 2 个选定的项目，以便它们可以在下一页上再次显示，我认为这可以通过使用 RAND() 信息更新另一个表来完成，但对于我的生活来说，我无法想象如何去做，我也找不到关于如何去做的信息。

***编辑：*** 总体思路是显示 2 个新项目以及最后 2 个项目。

***编辑2：***

好的，所以看起来它需要使用 SESSIONS 来完成，到目前为止我已经想出了这个但是结果是当前的项目信息而不是以前的

```
$item_array = array($item_id);
$_SESSION['lastitems'] = $item_array;

foreach($_SESSION['lastitems'] as $key=>$value) {
 echo $value . ' <br />';
} 
```

问题是我认为`$item_id`实际上`$row['itemid']`并且只能从while循环中调用，因此像我之前所说的SESSIONS是当前项目信息而不是以前的我如何“存储”以便显示以前的？

**编辑 3：**我将上面的 foreach 卡在循环之外，但它只返回 1 个项目

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T05:06:42.520

在随后的两个页面中您无法获得相同`order by rand()`的结果 - 这就是首先按 rand 排序的重点。

如果您想记住下一页上的数据，为什么不将输出粘贴到 a`$_SESSION`中并在此处简单地引用它呢？

话虽如此，您*可以*`rand()`使用一个值为函数播种，该值`order by rand(3)`会给您相同的结果-但这会打开蠕虫罐，您需要开始将相同的种子传递给其他页面-您将可能必须存储在一个`$_SESSION`所以你最终在一个广场。

编辑：如果您想添加 2 个新项目，请按原样使用您的查询，并继续将数据插入到`$_SESSION`变量中。你可以在那里存储数组，所以它应该很有魅力。拉回数据，将其添加到会话中，显示会话的所有结果。下一页，获取两个新结果，添加到会话，显示会话的所有结果。

编辑2：

首先，确保在每个页面上启动会话：

```
session_start(); 
```

您想像对待`$_SESSION`任何其他数组一样对待该数组：

```
$query  = "SELECT * FROM foo ORDER BY RAND() LIMIT 2";
$result = mysql_query($query); 
```

不确定在输出之前如何迭代结果，因此请按您认为合适的方式应用：

```
howeverYouLoopYouQueryResults
{
    $_SESSION['lastitems'][]=$rowFromYourResult;
    // This appends the row to the end of the array
} 
```

现在，当您开始显示数据时，您可以执行以下操作：

```
foreach($_SESSION['lastitems'] as $key=>$value) {
    echo $value . ' <br />';
    // Keep in mind that it will be storing ALL the 
    // items from the row because you used 'select *'
    // You can see what you selected with:
    print_r($_SESSION['lastitems'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T05:08:41.417

通常，如果您想随机化订单然后使用该订单，您只需将订购信息保存在表格中即可。只要确保很少执行第一个查询，因为它会改变顺序。第二个查询只是根据先前确定的顺序提取数据。

第一个查询可以将随机排序保存到其中一个列中：

```
UPDATE `foo` SET `ordering`=RAND(); 
```

然后在订购时使用它：

```
SELECT * FROM `foo` ORDER BY `ordering`; 
```

# jquery - 如果按钮尚不存在，则 Jquery 添加按钮

> ID：11814121
> 
> 赞同：1
> 
> 时间：2012-08-05T05:08:23.867
> 
> 标签：jquery, events, css-selectors, jquery-selectors

为了试验，我四处游荡并尝试了一些正则表达式，我在 bestbuy.com 的控制台上进行操作。突然间，我决定让事情变得更复杂一些，然后麻烦就开始了。我的代码应该添加一个按钮，如果该按钮在站点中不存在，则该按钮将突出显示找到的正则表达式匹配项，但它不起作用，您可以测试最好自己购买。这里是：

```
var rExpIni = /^\b(?:[A-Z][^aeiou\d\s][a-z]{2})\b\s\b(?:[A-Z][a-z]{2}|[a-z]{3})\b/gm;
var rExp = /\b(?:[A-Z][^aeiou\d\s][a-z]{2})\b\s\b(?:[A-Z][a-z]{2}|[a-z]{3})\b/gm;

function sim(){
    $("p, a, span, em, i, strong, b, h1, h2, h3, td, th, hr").each(function(){
        if( rExpIni.test($(this).text()) == true){
            $(this).css({
                "background-color":"#DDBB22",
                "border-style":"outset",
                "border-width":"3px",
                "border-color":"#DDBB22",
                "font-size":"12pt",
                "font-weight":"bold",
                "color":"red"
            });
        }
    });
    $("img").each(function(){
        if( rExp.test($(this).attr("title")) == true || rExp.test($(this).attr("alt")) == true ){
            $(this).css({
                "border-style":"inset",
                "border-width":"10px",
                "border-color":"#DDBB22",
                "font-size":"12pt",
                "font-weight":"bold",
                "color":"red"
            });
        }
    });
}

function nao() {
    $("p, a, span, em, i, strong, b, h1, h2, h3, td, th, hr, img").each(function(){
        $(this).css({
            "background-color":"",
            "border-style":"",
            "border-width":"",
            "border-color":"",
            "font-size":"",
            "font-weight":"",
            "color":""
        });
    });
}
$(document).ready(function(){
    if($("body:not(body:has(button#but))")){
        var nBotao = $("<button id=\"but\">Procurar</button>");
        $("body").prepend(nBotao);
    }
});
$("#but").toggle(sim(),nao()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:13:41.740

您可以使用 jQuery 对象的`length`属性：

```
if ($('#but').length == 0) {
    var nBotao = $("<button id='but'>Procurar</button>");
    $("body").prepend(nBotao);
} 
```

此外，当您动态生成元素时，您应该委托事件：

```
var which = true;
$(document).on('click', '#but', function() {
     if (which) {
         sim()
         which = false;
     } else {
         nao()
         which = true;
     }
}) 
```

请注意，`toggle()`方法是[`deprecated`](http://api.jquery.com/category/deprecated/)，您应该将所有代码放在`$(document).ready()`;

# database - 数据库如何存储和索引字符串？

> ID：11814125
> 
> 赞同：4
> 
> 时间：2012-08-05T05:08:55.750
> 
> 标签：database, indexing

请帮助我了解有关数据库的一些信息。

通常（=在默认配置中，没有特殊调整），考虑到行/块大小是恒定的，数据库（=oracle/mssql）如何存储可变长度字符串（=VARCHAR2）？我假设他们在表行之外存储指向其他数据块的指针 - 是否正确？

此外，字符串索引是如何工作的——使用字母顺序进行键比较的 B-Tree，或者像前缀树这样更智能的东西？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T15:00:04.237

数据库使用的索引机制完全依赖于数据库。如果您有关于数据库的具体问题，那么您应该查阅数据库的文档。我希望大多数索引都是 B 树，但这只是一个猜测。

关于存储可变长度字符串的问题也取决于数据库引擎。通常，这些是长度编码的，因此前两个字节具有字符串的长度，后跟字符。但是，SQL 中没有任何东西可以阻止其他机制，例如空字节编码（如在 C 中所做的那样）。可能有一些数据库以这种方式存储它们。

然而，这是一个近似值。MSSQL 中的长字符串存储在与记录中的固定长度字段不同的数据页上。当长字符串超过页面大小时，事情会复杂得多，因为字符串必须适合页面。

支持文本检索功能的数据库具有完全不同的字符串索引机制——通常是倒排索引。

如果您正在寻找解决问题的最佳方法，那么您应该在另一个问题中描述该问题。如果您正在寻找有关数据库的详细信息，那么 Google、数据库文档和 Wikipedia 是您最好的朋友。

# c# - 如何通过名称查找访问对象的属性？

> ID：11814129
> 
> 赞同：4
> 
> 时间：2012-08-05T05:10:45.947
> 
> 标签：c#, dynamic, properties

我在 ActionScript 中做了很多工作，很高兴看到它与 C# 非常相似，但我缺少一件事，那就是“动态引用”。

例如，动态引用可以使用数组 operator[] 来完成。因此，例如，您还可以通过`some_thing.something_else`以下两种方式访问​​该属性：

```
some_thing["something_else"]
// or

some_thing[some_var] // where some_var is a variable holding a string
// e.g.: some_var = "something_else"; 
```

换句话说，数组语法等同于指定属性本身。

动态引用对象的另一个选项是使用 eval() 全局函数。

**所以，我的问题是：是否可以以类似于 ActionScript 的方式引用 C# 中的属性？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T06:46:23.063

我能看到的唯一方法是使用动态，尤其是[`ExpandoObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx). 通过该`ExpandoObject`课程，您可以执行以下操作：

```
dynamic employee;

employee = new ExpandoObject();
employee.Name = "John Smith";
employee.Age = 33; 
```

尽管`employee`上面没有任何这些属性，但此代码将编译并工作。它不仅可以工作，而且动态属性甚至是强类型的。

按键访问属性也很容易。 `ExpandoObject`implements `IDictionary<string,object>`，所以它就像一个向下转换一样简单：

```
var dictEmployee = employee as IDictionary<string,object>;
Debug.WriteLine(dictEmployee["Age"].ToString); 
```

此代码将导致`33`打印到调试输出中。

我不建议普遍使用这种方法，但它有时会派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T06:35:00.073

C# 中没有`eval`。

关于你问题的第一部分。虽然在 C# 中完全可以遵循

```
var key = "ouch";
Console.WriteLine(something[key]); 
```

有两件事值得一提。

1.  这段代码没有什么动态的，至少在动态的 C# 含义中
2.  `something`不是数组，而是字典。

# sql - PostgreSQL - 在多列上创建索引时 Smallint 溢出。这是一个错误吗？

> ID：11814132
> 
> 赞同：5
> 
> 时间：2012-08-05T05:11:17.710
> 
> 标签：sql, postgresql, postgresql-9.0

我在将值 32767 插入`smallint`Postgres 的列中时遇到问题，这会产生错误*smallint out of range*。这很奇怪，因为我可以这样做：

```
SELECT 32767::int2; 
```

这会很好。在拉了一点头发之后，我终于找到了相关列的索引。首先，这是架构（嗯，不是真的，但我已将其简化为重现案例）：

```
CREATE TABLE Test
(
  id uuid NOT NULL,
  cooktime smallint,
  preptime smallint,
  CONSTRAINT test_pkey PRIMARY KEY (id )
)
WITH (
  OIDS=FALSE
); 
```

我现在创建以下索引：

```
CREATE INDEX idx_test_totaltime
  ON Test
  USING btree
  ((cooktime + preptime) ); 
```

接下来，我尝试创建以下行：

```
INSERT INTO Test (CookTime, PrepTime, Id)
VALUES (
  (32767)::int2,
  (10)::int2,
  (E'fd47dc1e-c3c6-42c1-b058-689e926a72a4')::uuid
); 
```

我得到错误：

> 错误：smallint 超出范围 SQL 状态：22003

似乎`idx_test_totaltime`期望最大值为`int2`，即使该索引应用于两个 smallint 的总和。

这是 Postgres 错误，还是我遗漏了一些简单的东西？有没有办法解决这个*限制*，或者我需要制作这些列`int4`并使用 CHECK 约束将每个值限制为 32767？我正在使用 Postgres 9.0.0（是的，我需要升级！）但是我创建了一个[SQL Fiddle](http://sqlfiddle.com/#!1/734d7/1)，它在 9.1.4 上演示了这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T05:37:29.093

您的问题是`int2 + int2`另一个问题，`int2`因此您的索引中的表达式`(cooktime + preptime)`, 溢出了`(32767, 10)`. 您可以通过在索引表达式中进行一些强制转换来解决这个问题：

```
CREATE INDEX idx_test_totaltime
  ON Test
  USING btree
  ((cooktime::int4 + preptime::int4)); 
```

你只需要其中一个演员，但同时使用两者都不会受到伤害。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T10:27:49.017

为什么不使用[INTERVAL](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)作为时间间隔？它是您问题的完美解决方案。

# iphone - 使用afnetworking将base64嵌入json有效负载的正确方法

> ID：11814133
> 
> 赞同：4
> 
> 时间：2012-08-05T05:11:56.497
> 
> 标签：iphone, ios, json, base64, afnetworking

提前感谢您的帮助。我正在使用一个只接受 json 有效负载的 Web 服务，并且该服务是为提交照片而设置的。

所以我试图找出将图像嵌入到 json 有效负载中的正确方法。这是我的方法。

```
//convert image to nsdata
NSData *originalPhoto = UIImageJPEGRepresentation(self.photo.image,.9);
//convert the data to a base64 string using NSData+Base64 category extension (Matt Gallagher version)

NSString *base64photoString = [originalPhoto base64EncodedString];

//set the string in a NSDictionary
[info setValue:base64photoString forKey:@"data"];

//then pass it to AFNetworking using the httpClient 
```

一切似乎都正常，我得到了 json 有效负载。注意： bas64 字符串最终出现在帖子正文中。

如果需要在数据前面嵌入 URI，是否有人知道使用这种方法 - 像这样：“file”：“data:image/jpg;base64,[base64 string]” - 我确实尝试过但没有得到来自网络服务的任何爱，但是我可能有语法错误。

但是网络服务不喜欢它。

为了验证编码，我将生成的字符串从 nslog 中剪下来，并将其粘贴到在线解码器网站上，然后它会重新创建原始图像 - 因此看起来数据已正确编码。

几天后我才能与网络服务器管理员交谈，所以我只是在寻找验证这是一种正确的方法，或者请指出任何缺陷。我无法将服务更改为多部分编码形式，我坚持使用这种方法。

再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T18:24:43.457

弄清楚了这一点，并认为我会提出答案，以防其他人遇到类似问题。

场景 - 发布一个 JSON 有效负载，照片嵌入为 base64string。

我在这里找到了 base64 的分叉版本 [https://github.com/l4u/NSData-Base64.git](https://github.com/l4u/NSData-Base64.git)。其中包括 Matt Gallagher 大约在 2009 年发布的原始作品中的一个附加方法：base64EncodedStringWithSeparateLines:YES - 成功了。

```
//use it like this:
NSData *originalPhoto = UIImageJPEGRepresentation(self.photo.image,1);
NSString *base64PhotoString = [originalPhoto base64EncodedStringWithSeparateLines:YES]; 

//stuff it in a dictionary like this:
NSMutableDictionary *info = [NSMutableDictionary dictionary];
[info setValue:base64PhotoString forKey:@"sFileData"];

//send it using AFNetworking like this:
[[ClientInterface sharedInstance] postPath:submitPhoto parameters:info success:^(AFHTTPRequestOperation *operation, id responseObject) {

   NSLog(@"success!");

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    NSLog(@"Error:%@",error);

}]; 
```

# django - 在Django中将代码添加到注销视图的正确方法

> ID：11814134
> 
> 赞同：3
> 
> 时间：2012-08-05T05:12:00.050
> 
> 标签：django, login

我`django.contrib.auth.views.logout`用另一个函数包装了它以添加其他行为。这是我的新 logout_page：

视图.py

```
from django.contrib.auth import logout
def logout_page(request, *args, **kwargs):
    from django.utils import timezone
    user = request.user
    profile = user.get_profile()
    profile.last_logout = timezone.now()
    profile.save()
    logout(request, *args, **kwargs) 
```

和

网址.py

```
(r'^logout/$', 'main.views.logout_page', {'next_page': '/'}) 
```

但我收到以下错误：

```
logout() got an unexpected keyword argument 'next_page' 
```

当注销包含 **kwargs 并且据我所知，从 django.contrib.auth 注销时，我不确定为什么 'next_page' 是一个意外参数。从来源：

[https://github.com/django/django/blob/master/django/contrib/auth/views.py](https://github.com/django/django/blob/master/django/contrib/auth/views.py)

```
def logout(request, next_page=None,
           template_name='registration/logged_out.html',
           redirect_field_name=REDIRECT_FIELD_NAME,
           current_app=None, extra_context=None):
... 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T05:19:37.000

你叫错了`logout`。

```
from django.contrib.auth import logout 
```

应该

```
from django.contrib.auth.views import logout 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:24:47.203

您应该从视图导入注销`from django.contrib.auth.views import logout`，而不是`from django.contrib.auth import logout`.

附带说明，对于这种行为，您可能需要使用注销信号。参考[登录注销信号](https://docs.djangoproject.com/en/dev/topics/auth/#login-and-logout-signals)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:28:22.847

我遇到了和你一样的问题，并使用了这个简单的解决方法：

视图.py：

```
def my_logout(request):
    # Staff you want to do before logout
    from django.http import HttpResponseRedirect
    return HttpResponseRedirect("/logout2/") 
```

网址.py：

```
(r'^logout/$', 'views.my_logout'),
url(r'^logout2/$',
    django.contrib.auth.views.logout,
    {'template_name': 'logged_out.html'},  # Next page
    name='auth_logout'), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-07T11:28:46.107

这已经成为 Django V2 的一个问题。您可以在视图中定义登录和注销功能并在 url 中调用它们。或者您可以按照 Django 文档中给出的示例进行操作

从 django.contrib.auth 导入视图作为 auth_views

path('accounts/login/', auth_views.LoginView.as_view()),

# macos - 如何通过命令浏览终端中的任何目录

> ID：11814139
> 
> 赞同：0
> 
> 时间：2012-08-05T05:12:53.543
> 
> 标签：macos, terminal

我只知道终端中的一些事情

cd .. : 上一级目录 cd foldername : 到当前目录下的文件夹名 cd foldername/subfolder: 到当前目录下foldername 的子文件夹

现在假设我想从桌面（这是我的当前目录）导航到 /usr/local。那是什么命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:19:37.860

也许使用

```
cd /usr/local 
```

为了这...

# bundle - 在没有 3rd 方应用程序的情况下捆绑 JRE

> ID：11814140
> 
> 赞同：0
> 
> 时间：2012-08-05T05:13:13.893
> 
> 标签：bundle, java

我知道 Launch4J 可用于从 jar 文件中生成可执行文件。但是，我想确认可执行 jar 文件是否可以在未安装 JRE 但 JRE 文件夹与 jar 文件一起复制的计算机上运行。是否可以将批处理文件中的 JAVA_HOME 设置为相对路径并使用 java 启动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:52:06.387

您可以使用复制的 JRE 的相对路径启动您的应用程序，如您所愿（通过调用`path/to/java className`）。

但不要将 JAVA_HOME 设置为该路径！这对于您的方案来说不是必需的，并且会使用户 PC 上先前存在的设置无效，从而破坏现有的 Java 安装。

# java - 由于类型安全版本 repo 中的校验和无效，无法使用 guava 依赖项进行部署

> ID：11814141
> 
> 赞同：0
> 
> 时间：2012-08-05T05:13:34.220
> 
> 标签：java, heroku, guava

由于 com.google.guava#guava-base;r03 和 com.google.guava#guava-annotaions;r03 出现“未解决的依赖关系”错误，我将应用程序部署到 Heroku 时出错。当我尝试使用 URL 手动获取其中一个 jar 时：

[http://repo.typesafe.com/typesafe/releases/com/google/guava/guava-base/r03/guava-base-r03.jar](http://repo.typesafe.com/typesafe/releases/com/google/guava/guava-base/r03/guava-base-r03.jar)

我收到以下错误。看起来类型安全版本存储库中此工件的校验和是错误的。有谁知道如何解决或解决此问题？谢谢！

> HTTP 状态 409 - 工件下载请求被拒绝：校验和策略“GEN_IF_ABSENT”拒绝工件“guava-base-r03.jar”。Checksums info: [ChecksumInfo{type=SHA-1, original='cb713fb4e84bd3c82cb71dece3c123563ed2643e', actual='251db72895ba5745e6810334075095832f12f437'}, ChecksumInfo{type=MD5, original='1384456aeec4d4c8cc2bff9227766a4e', actual='4bb26509e6e43a603b4e2f17161fbbc5'}]
> 
> 类型状态报告
> 
> 消息拒绝工件下载请求：校验和策略“GEN_IF_ABSENT”拒绝工件“guava-base-r03.jar”。Checksums info: [ChecksumInfo{type=SHA-1, original='cb713fb4e84bd3c82cb71dece3c123563ed2643e', actual='251db72895ba5745e6810334075095832f12f437'}, ChecksumInfo{type=MD5, original='1384456aeec4d4c8cc2bff9227766a4e', actual='4bb26509e6e43a603b4e2f17161fbbc5'}]
> 
> 描述 由于与资源的当前状态冲突，请求无法完成（被拒绝的工件下载请求：校验和策略“GEN_IF_ABSENT”拒绝工件“guava-base-r03.jar”。校验和信息：[ChecksumInfo{type= SHA-1, original='cb713fb4e84bd3c82cb71dece3c123563ed2643e', actual='251db72895ba5745e6810334075095832f12f437'}, ChecksumInfo{type=MD5, original='1384456aeec4d4c8cc2bff9227766a4e', actual='4bb26509e6e43a603b4e2f17161fbbc5'}]).
> 
> Apache Tomcat/7.0.26

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:13:41.520

根据上面的建议，我能够通过排除我从 bitcoinj -> guava-base r03 获得的瞬态依赖并向 guava 13.0 添加新的依赖来解决这个问题。我还回到使用默认解析器和校验和检查。我的新 Build.scala appDependencies 如下所示：

```
val appDependencies = Seq(
    "com.google.guava" % "guava" % "13.0",
    "com.google" % "bitcoinj" % "0.5.1" exclude("com.google.guava", "guava"),
    "org.squeryl" %% "squeryl" % "0.9.5-2",
    "postgresql" % "postgresql" % "9.1-901.jdbc4"
)

val main = PlayProject(appName, appVersion,
           appDependencies).settings(defaultScalaSettings:_*) 
```

我现在可以毫无问题地将我的应用程序部署到 Heroku。感谢本的有用提示！

# php - Php Soap 服务器检索 vb WinHttp.WinHttpRequest

> ID：11814142
> 
> 赞同：2
> 
> 时间：2012-08-05T05:13:35.923
> 
> 标签：php, xml, vb6, nusoap, winhttprequest

美好的一天，读者。

我的任务是构建一个 PHP SOAP 服务器来接收 VB 客户端通过 WinHttp.WinHttpRequest 对象发送的 xml。我正在将 nuSoap 用于 php 服务器，直到现在它还没有工作。

vb 客户端发送的 xml 包含定义的 web 服务，需要与其他必要的变量一起使用，这就是为什么在 vb 代码中没有植入肥皂动作的原因。'他们'想要这样:'(

肥皂服务器确实向 vb 发送了这样的响应：

```
<?xml version="1.0" encoding="ISO-8859-1"?><SOAP-ENV:Envelope SOAP-
ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
  xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
    <SOAP-ENV:Fault>
        <faultcode xsi:type="xsd:string">SOAP-ENV:Client</faultcode>
        <faultactor xsi:type="xsd:string"></faultactor>
        <faultstring xsi:type="xsd:string">Operation &apos;&apos; is not defined in the WSDL for this service</faultstring>
        <detail xsi:type="xsd:string"></detail>
    </SOAP-ENV:Fault>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

发送 xml 的 vb 客户端：

```
Private Sub Command2_Click()
 mydata = "<?xml version=""1.0"" encoding=""UTF-8""?>" & vbCrLf
  mydata = mydata & "<root>" & vbCrLf
mydata = mydata & "<SERVICE>SayHello</SERVICE>" & vbCrLf
mydata = mydata & "<NAME>Noobula</NAME>" & vbCrLf
mydata = mydata & "</root>" & vbCrLf
  Set w = CreateObject("WinHttp.WinHttpRequest.5.1")
      w.Open "POST", "http://127.0.0.1:80/soapvb/terimaxml.php"
      w.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
      w.Option(WinHttpRequestOption_SslErrorIgnoreFlags) = 13056
      w.Send mydata
      respo = w.ResponseText
      Text1 = respo
End Sub 
```

最后，服务器本身：

```
require_once "lib/nusoap.php";
$debug = 0;
$server = new soap_server();
$server->configureWSDL('terimaxml', 'urn:terimaxml');

function SayHello($xml){
    //messing with xml taking NAME and say Olaa
    echo "Olaaa :D";
}

$server->register('SayHello()',
                    array('xml' =>'xsd:array'),
                   'urn: terimaxml',
                   'urn: terimaxml#__construct()',
                   'rpc',
                   'encoded',
                   '-----'
                );

$HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA)
? $HTTP_RAW_POST_DATA : '';
$server->service($HTTP_RAW_POST_DATA); 
```

我已经在互联网上漫游了很长一段时间来解决这个问题。所以任何帮助将不胜感激，在此先感谢。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T14:31:07.653

我不确定这里的代码是否是为了可读性而刻意清理的，但我认为我看到了三个问题。

首先，函数名中`->register`不应包含`()`.

```
$server->register("SayHello",
  array("xml" =>"xsd:array"),
  "urn: terimaxml",
  "urn: terimaxml#__construct()",
  "rpc",
  "encoded",
  "-----"
); 
```

其次，我认为`$HTTP_RAW_POST_DATA`命名错误，因此您向函数发送了一个空变量。

```
$HTTP_RAW_POST_DATA = isset($GLOBALS["HTTP_RAW_POST_DATA"]) ? 
$GLOBALS["HTTP_RAW_POST_DATA"] : ""; 
```

可选的第三个，`HTTP_RAW_POST_DATA`不推荐使用超级全局数组`$_POST`。

```
$server->service( http_build_query($_POST) ); 
```

我不确定，我两个月前才开始使用 nusoap，但这些是我的代码和你的代码之间的区别。一次尝试一个，看看它们是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:00:43.247

操作 '' 未在此服务的 WSDL 中定义

这是因为

```
$HTTP_RAW_POST_DATA : ''; 
```

该操作*&apos*意味着您将数据解析为带有 xml 禁止的撇号值的 xml。

并尝试用双引号（“）更改所有撇号

```
$server->register("SayHello()",
                    array("xml" =>"xsd:array"),
                   "urn: terimaxml",
                   "urn: terimaxml#__construct()",
                   "rpc",
                   "encoded",
                   "-----"
                ); 
```

如果我错了，请纠正我。

^^

# blackberry - LabelField 中的多格式 - BlackBerry

> ID：11814145
> 
> 赞同：1
> 
> 时间：2012-08-05T05:14:05.570
> 
> 标签：blackberry, labelfield

我将文本作为多行放置在 LabelField 中。这是我正在调用的方法：

```
public void setFirstName(String fvalue,String lvalue,String date,String lastStatus) 
        {
            _fnameLabel.setText(fvalue+" "+lvalue+"\n"+date+"\n"+lastStatus);
            _fnameLabel.setFont((_fnameLabel.getFont().derive(Font.BOLD, 20, Ui.UNITS_px,
                    Font.ANTIALIAS_STANDARD, Font.COLORED_OUTLINE_EFFECT)));
            _fnameLabel.setMargin(10, 0, 20, 0); //To leave some space from top and bottom
        } 
```

我想要每行不同的字体（大小、样式等）。是否可以在一个标签字段中具有多种格式。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:38:08.613

你不能用 a 做到这一点`LabelField`，只能用 a [`RichTextField`](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/component/RichTextField.html)。您必须构建用于该字段的偏移量、字体和字体索引数组。这有点乏味，但不是特别难。您要使用的方法是

```
setText(String text, int[] offsets, byte[] attributes, Font[] fonts) 
```

在哪里：

*   `offsets`是格式更改位置的排序数组，包括`text.length()`文本的开始 (0) 和结束 ()；
*   `attributes`是数组中的索引`fonts`数组，每个文本区域都有一个索引 ( `offsets.length == attributes.length + 1`)；
*   并且`fonts`是您要使用的不同字体的数组。

`attributes`数组可以多次包含相同的值，因此可以`fonts.length`是任何值，只要 的每个元素`attributes`都是 的非`null`元素的有效索引`fonts`。

# c# - Visual Studio crashes every time I try to run Performance Analysis

> ID：11814146
> 
> 赞同：1
> 
> 时间：2012-08-05T05:15:20.260
> 
> 标签：c#, visual-studio-2010, profiling

I am new to profiling (never did it before) and I am trying to run a performance analysis on my project with Visual Studio.

When I start it, the program runs just fine but when I close the application and the performance starts showing the logs, the following error occurs and VS crashes:

![Visual studio crashing](../Images/1f3991af0242b80d5cecc8934a550178.png)

I tried opening the file with VS but the same error happens. Anyone know why it is not working?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T19:04:11.630

In case it helps anyone else

I had this problem and it went away after I installed VS 2010 service pack 1

# linux - 命令行全文索引？

> ID：11814152
> 
> 赞同：9
> 
> 时间：2012-08-05T05:15:54.463
> 
> 标签：linux, command-line, full-text-search, code-analysis

我们有一个庞大、陈旧、可怕的代码库，几乎不可能在您需要的时候找到它。我们正在努力改进它，当然……但我经常发现自己在做大量的递归 grep 来搜索文件的内容以找到使用的地方。

有没有一种工具可以用来在目录中构建文本文件的全文索引，然后从命令行进行查询？

更喜欢可以在用户空间中运行并且不需要守护进程的东西。我们的开发服务器上有很多用户，所以我想要一些可以通过我的代码库实例搜索的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T05:25:18.353

我是“gid”（又名“id-utils”）的忠实粉丝：

*   [http://www.gnu.org/software/idutils/manual/idutils.html](http://www.gnu.org/software/idutils/manual/idutils.html)

用法很简单：

1.  使用您最喜欢的包管理器安装 id-utils（例如“sudo apt-get install”或“yum”）

2.  “cd”到源目录的根目录并运行“mkid”

3.  您可以从命令行使用它

4.  您也可以从“vim”或任何数量的其他工具中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T05:27:50.937

Russ Cox 撰写[了一系列文章来描述 Google 代码搜索算法的工作原理](http://swtch.com/~rsc/regexp/regexp4.html)。[他在一组命令行工具中](https://code.google.com/p/codesearch/)重新实现了算法的简化版本，可以在本地代码库上进行快速的正则表达式搜索。

另一种方法是使用[ctags](http://ctags.sourceforge.net/)之类的东西来创建代码中使用的标识符的索引。许多编辑器（包括我使用的 Vim）可以使用这个标签文件快速跳转到标识符的定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T11:58:57.097

```
cd /path/to/project
ctags -R 
```

这将创建一个`tags`vim 将使用的文件，然后：

```
vim -t someFunctionName 
```

将在函数定义中打开vim！

还有一些键盘快捷键可以让生活更简单。

```
CRTL+] will jump to the definition of the method under the cursor 
CRTL+t will go back 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-04T16:11:43.117

我对大型 C++ 项目也有类似的需求。在调查了一些工具之后，我发现[id-utils](http://www.gnu.org/software/idutils/)是最好的选择，因为它在构建索引和搜索模式方面非常快。

基于 id-utils，我制作了一个命令行工具和 vim 插件来解决我的需求：

[https://github.com/fcamel/gj](https://github.com/fcamel/gj)

希望能帮助到你。

# android - 当我滚动gridview时图像发生变化

> ID：11814154
> 
> 赞同：3
> 
> 时间：2012-08-05T05:16:57.400
> 
> 标签：android, android-asynctask

GridView 从 URL 加载图像。当我滚动gridview时，更多的图像机会，如何修复它......我已经尝试了imageAdapter.notifyDataSetChanged（），gridView.invalidateViews（）..我还没有找到解决这个问题的方法。

```
public class ImageAdapter extends BaseAdapter{

    private Context mContext;
    private LayoutInflater mInflater;   
    private ArrayList<NodeFood> listImage = new ArrayList<NodeFood>();

    public ImageAdapter(Context c, ArrayList<NodeFood> listImage){
        this.mContext = c;
        this.listImage = listImage;
    }

    public class ViewHolder{
        ImageView imageView;
        ProgressBar progress;
    }

    public int getCount() {
        return listImage.size();
    }

    public Object getItem(int arg0) {
        return arg0;
    }

    public long getItemId(int arg0) {
        return arg0;
    }

    public View getView(int arg0, View arg1, ViewGroup arg2) {
        final ViewHolder holder;
        if(arg1 == null){
            holder  = new ViewHolder();
            mInflater = LayoutInflater.from(mContext);
            arg1    =   mInflater.inflate(R.layout.layout_item_grid, null);
            holder.imageView = (ImageView)arg1.findViewById(R.id.imageItemGrid);
            holder.progress = (ProgressBar)arg1.findViewById(R.id.progressBar);
            holder.progress.getIndeterminateDrawable().setColorFilter(0xFFFF0000,android.graphics.PorterDuff.Mode.MULTIPLY);
            arg1.setTag(holder);
        }else{
            holder = (ViewHolder)arg1.getTag();
        }
        holder.imageView.setTag(arg0);
        holder.progress.setTag(arg0);
        NodeFood a = this.listImage.get(arg0);
        String URL = a.getSRC();
        task_LoadIMG bb = new task_LoadIMG(URL,holder);
        bb.execute();
        return arg1;
    }   

    public class task_LoadIMG extends AsyncTask<Void,Void,Bitmap>{
        private String url;
        private ViewHolder holder;
        public task_LoadIMG(String url, ViewHolder holder){
            this.url = url;
            this.holder = holder;
        }
        @Override
        protected Bitmap doInBackground(Void... arg0) {
            try{
                URL aURL = new URL(this.url);
                URLConnection connect = aURL.openConnection();
                connect.connect();

                InputStream is = connect.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);
                Bitmap bm = BitmapFactory.decodeStream(bis);
                bis.close();
                is.close();
                return bm;
            }catch(IOException e){
                return null;
            }
        }

        @Override
        protected void onPostExecute(Bitmap result) {
            holder.progress.setVisibility(View.GONE);
            holder.imageView.setImageBitmap(result);
            holder.imageView.setScaleType(ScaleType.CENTER_CROP);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T06:31:05.413

问题是您`AsyncTask`加载图像所需的时间比显示该图像的时间长。下载完成后，该单元格来来去去，并已被回收用于下一张图像。

要解决此问题，请将单元格图像的 URL 存储在单元格的`tag`属性中。然后，检查以确保`AsyncTask`完成时单元格 URL 相同。如果不一样，则同时该单元格已被回收，您应该丢弃更新。这是一些代码：

```
public View getView(int arg0, View arg1, ViewGroup arg2) {
    final ViewHolder holder;
    if(arg1 == null){
        holder  = new ViewHolder();
        mInflater = LayoutInflater.from(mContext);
        arg1    =   mInflater.inflate(R.layout.layout_item_grid, null);
        holder.imageView = (ImageView)arg1.findViewById(R.id.imageItemGrid);
        holder.progress = (ProgressBar)arg1.findViewById(R.id.progressBar);
        holder.progress.getIndeterminateDrawable().setColorFilter(0xFFFF0000,android.graphics.PorterDuff.Mode.MULTIPLY);
        arg1.setTag(holder);
    }else{
        holder = (ViewHolder)arg1.getTag();
    }
    NodeFood a = this.listImage.get(arg0);
    String URL = a.getSRC();
    holder.imageView.setTag(URL);
    task_LoadIMG bb = new task_LoadIMG(URL,holder);
    bb.execute();
    return arg1;
}   

public class task_LoadIMG extends AsyncTask<Void,Void,Bitmap>{
    private String url;
    private ViewHolder holder;
    public task_LoadIMG(String url, ViewHolder holder){
        this.url = url;
        this.holder = holder;
    }
    @Override
    protected Bitmap doInBackground(Void... arg0) {
        try{
            URL aURL = new URL(this.url);
            URLConnection connect = aURL.openConnection();
            connect.connect();

            InputStream is = connect.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            Bitmap bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
            return bm;
        }catch(IOException e){
            return null;
        }
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        if (url.equals(holder.imageView.getTag()) {
            holder.progress.setVisibility(View.GONE);
            holder.imageView.setImageBitmap(result);
            holder.imageView.setScaleType(ScaleType.CENTER_CROP);
        } else {
            // View was updated in the meantime, ignore the image
        }
    }
} 
```

您也可以考虑`AsyncTask`在单元被回收后立即取消以节省带宽/CPU 周期。这留给读者作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T00:07:15.540

我的`GridView`. 虽然项目不多，只有 24 个，而且我从手机的 SD 卡而不是在线加载图像，但当我滚动时，我仍然得到图像四处跳动，这实际上只有一两行隐藏在视图之外时间。

我所做的只是简单地添加一个`ViewHolder`并且它是固定的。看起来本[教程](http://www.javacodegeeks.com/2013/09/android-viewholder-pattern-example.html)的实现方式与@scompt.com 类似。他在教程中的观点是，通过`ViewHolder`这样的方式，`findViewById()`当视图被回收时，不会重复调用 to。这可能是滚动时图像不再跳跃的原因。

不确定这是否会帮助其他处于同样困境的人。我在 SO 上搜索了这个问题，但很少有人解决它。希望它可以帮助某人。

**在我的适配器类中：** `PhotoGridItem`是我的模型类，它被输入到我的`ArrayAdapter`扩展中，如下所示：`ArrayAdapter<PhotoGridItem>`。只是为了解释一下我的代码。

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;
        final ViewHolder holder;

        if (row == null) {

            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(resourceId, parent, false);

            holder = new ViewHolder();
            holder.imageView = (ImageView) row.findViewById(R.id.photo_grid_view);
            // stores holder with view
            row.setTag(holder);

        } else {

            holder = (ViewHolder)convertView.getTag();
        }

        PhotoGridItem photoGridItem = getItem(position);

        if (photoGridItem != null) {
            bm = photoGridItem.getImage();
            holder.imageView.setImageBitmap(bm);

            // positioning the image in the GridView slot
            holder.imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            holder.imageView.setLayoutParams(new LinearLayout.LayoutParams
                    (270, 270));
        }

        return row;

    }

    public class ViewHolder{
        ImageView imageView;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T14:40:18.713

我使用凌空，你可以摆脱所有异步任务，标签......

使用 com.android.volley.toolbox.NetworkImageView 重复您的 ImageView

就像是：

```
<com.android.volley.toolbox.NetworkImageView
android:id="@+id/twitter_avatar"
android:layout_width="48dp"
android:layout_height="48dp"
android:layout_alignParentBottom="true"
android:layout_alignParentTop="true"
android:layout_marginRight="6dip"/>

private RequestQueue mRequestQueue;
private ImageLoader mImageLoader; 
```

`private LruCache<String, Bitmap> mMemoryCache;`

然后：

```
final int memClass = ((ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE)).getMemoryClass();

    // Use 1/8th of the available memory for this memory cache.
    final int cacheSize = 1024 * 1024 * memClass / 8;
    mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {

        protected int sizeOf(String key, Bitmap bitmap) {
            // The cache size will be measured in bytes rather than number of items.
            return bitmap.getByteCount();
        }

    };

    mRequestQueue = Volley.newRequestQueue(context);
    mImageLoader = new ImageLoader(mRequestQueue, new ImageLoader.ImageCache() {

        public void putBitmap(String url, Bitmap bitmap) {
            mMemoryCache.put(url, bitmap);
        }

        public Bitmap getBitmap(String url) {
            return mMemoryCache.get(url);
        }
    }); 
```

使用排球：

```
NetworkImageView image = (NetworkImageView) row.findViewById(R.id.ivGridViewImage);

image.setImageUrl(url, mImageLoader); 
```

# plcrashreporter - PLCrashReporter - 如何在进程中符号化崩溃数据？

> ID：11814155
> 
> 赞同：6
> 
> 时间：2012-08-05T05:17:28.033
> 
> 标签：plcrashreporter

在我们获得崩溃数据后，有没有办法对崩溃报告进行符号化？

目前，这就是我在 handleCrashReport 方法中所做的；

```
PLCrashReportTextFormat textFormat = PLCrashReportTextFormatiOS;

    /* Decode data */

    PLCrashReport *crashLog = [[PLCrashReport alloc] initWithData: data error: &error];
    if (crashLog == nil) {
        NSLog(@"Could not decode crash file :%@",  [[error localizedDescription] UTF8String]);
    } else {
        NSString* report = [PLCrashReportTextFormatter stringValueForCrashReport: crashLog withTextFormat: textFormat];
        NSLog(@"Crash log \n\n\n%@ \n\n\n", report);

        NSString *outputPath = [documentsDirectory stringByAppendingPathComponent: @"app.crash"];
        if (![report writeToFile:outputPath atomically:YES encoding:NSUTF8StringEncoding error:nil]) {
            NSLog(@"Failed to write crash report");
        } else {
            NSLog(@"Saved crash report to: %@", outputPath);
        }

    } 
```

当我在控制台上打印出来时；我明白了。

```
Application Specific Information:
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'This should crash the application.'

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x93a0d9c6 0x939f5000 + 100806
1   libsystem_c.dylib                   0x9c5aabdd 0x9c55b000 + 326621
2   shell                               0x00082a2c 0x1000 + 530988
3   CoreFoundation                      0x0263d0fc 0x253f000 + 1040636
4   libobjc.A.dylib                     0x00f8ef0f 0xf89000 + 24335
5   libc++abi.dylib                     0x02a028de 0x29fd000 + 22750
6   libc++abi.dylib                     0x02a02946 0x29fd000 + 22854
7   libc++abi.dylib                     0x02a03b3e 0x29fd000 + 27454
8   libobjc.A.dylib                     0x00f8ee15 0xf89000 + 24085
9   CoreFoundation                      0x02573de0 0x253f000 + 216544
10  CoreFoundation                      0x02573c9b 0x253f000 + 216219
11  UIKit                               0x0150ac65 0x1501000 + 40037
12  UIKit                               0x0150c626 0x1501000 + 46630
13  shell                               0x00002fed 0x1000 + 8173
14  shell                               0x00001f95 0x1000 + 3989

Thread 1:
0   libsystem_kernel.dylib              0x93a0e90a 0x939f5000 + 104714
1   libdispatch.dylib                   0x02ad2be1 0x2ad1000 + 7137

Thread 2:
0   libsystem_kernel.dylib              0x93a0bc22 0x939f5000 + 93218
1   libsystem_notify.dylib              0x97cb9cd2 0x97cb8000 + 7378
2   libsystem_notify.dylib              0x97cbdb4b 0x97cb8000 + 23371
3   libsystem_c.dylib                   0x9c5e859b 0x9c55b000 + 578971
4   CoreFoundation                      0x025e61c3 0x253f000 + 684483
5   CoreFoundation                      0x025e5d83 0x253f000 + 683395
6   Foundation                          0x00caab53 0xc34000 + 486227
7   Foundation                          0x00caaac5 0xc34000 + 486085
8   shell                               0x003ddbf8 0x1000 + 4049912
9   libdispatch.dylib                   0x02ad2330 0x2ad1000 + 4912
10  libdispatch.dylib                   0x02ad3f0c 0x2ad1000 + 12044
11  libdispatch.dylib                   0x02ad3cb4 0x2ad1000 + 11444
12  libdispatch.dylib                   0x02ad3402 0x2ad1000 + 9218
13  libsystem_c.dylib                   0x9c5b9b24 0x9c55b000 + 387876
14  libsystem_c.dylib                   0x9c5bb6fe 0x9c55b000 + 395006 
```

如果可能的话，我想在进程中表示。有任何想法吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:39:05.897

您可以符号化正在处理的崩溃报告，这需要三件事：

1.  您应该只在下一个应用程序启动时执行此操作。
2.  您需要应用符号成为二进制文件的一部分，这会将其大小增加 30-50%
3.  你不会得到行号。

最新版本的 PLCrashReporter 能够做到这一点，但我不推荐它，而是使用 dSYM 来表示它，因为它更有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-29T11:36:24.203

PLCrashReporter 提供了一个配置选项来在设备上进行符号化

```
 PLCrashReporterConfig *config = [[PLCrashReporterConfig alloc] initWithSignalHandlerType: PLCrashReporterSignalHandlerTypeBSD symbolicationStrategy: PLCrashReporterSymbolicationStrategyAll];
PLCrashReporter *crashReporter = [[PLCrashReporter alloc] initWithConfiguration:config]; 
```

但是，使用 DSYM 进行符号化更好的原因有两个：

*   [文档](https://www.plcrashreporter.org/documentation/api/v1.2-rc4/group__enums.html#ga2fccc0cc55180dce6846a39a40c57ca8)建议不要将此功能用于发布版本
*   符号化不如使用DSYM和系统框架的调试符号。你会得到很多''行。

要在您的开发机器上表示崩溃报告，您可以这样做（确保原始二进制文件和 dsym 文件位于同一目录中，并且您具有崩溃报告中提到的 iOS 版本的调试符号）：

```
/Applications/Xcode.app/Contents/SharedFrameworks/DTDeviceKitBase.framework/Versions/A/Resources/symbolicatecrash MyCrash.crash 
```

# matlab - 如何从 Matlab 的数据集中提取一些列

> ID：11814158
> 
> 赞同：0
> 
> 时间：2012-08-05T05:18:29.810
> 
> 标签：matlab, dataset, extract

```
a = dataset({'a' 'b' 'c' 'e' 'h'}',[1 2 3 11 17]', [2 3 4 5 6]',...
   'VarNames',{'Key1' 'Var1' 'test'})

a = 

    Key1       Var1    test
    'a'         1      2   
    'b'         2      3   
    'c'         3      4   
    'e'        11      5   
    'h'        17      6 
```

我想用 a 中的一些数据制作一个新数据集。

就像`b = a.VarNames=={'Key1', 'test'}`

因此

```
b = 

    Key1    test
    'a'       2   
    'b'       3   
    'c'       4   
    'e'       5   
    'h'       6 
```

我怎样才能做b？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:34:35.970

如果您无法对键名进行硬编码，我将使用以下内容：

```
%% Input:
a=dataset({'a' 'b' 'c' 'e' 'h'}',[1 2 3 11 17]',[2:6]','VarNames',{'Key1' 'Var1' 'test'});
extract_keys = {'Key1' 'Var1'};

%% subset extraction:
keys = get(a,'VarNames');
extract_idxs = cellfun(@(str) find(strcmpi(keys ,str),1),extract_keys,'uni',false);
if any(cellfun(@isempty,extract_idxs(:)))
    warning('Dataset:subset_extraction', 'Key mismatch');
end
extract_idxs = cell2mat(extract_idxs);

b = a(:,extract_idxs); 
```

如果在原始数据集中找不到键，则从结果数据集中忽略它们。如果您确定密钥始终匹配，则警告也可能会被删除。如果您不需要警告，您甚至可以将其放入单行中：

```
b=a(:,cell2mat(cellfun(@(str) find(strcmpi(get(a,'VarNames'),str),1),extract_keys,'uni',false))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:47:45.670

这是你要找的吗？

```
b = dataset(a.Key1, a.test, 'VarNames', {'Key1','test'}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T09:42:42.593

你可以使用

> > b= [a(:,1) a(:,3)]

# maven - pom中的Maven多个存储库，但带有JBoss存储库的“缺少工件”

> ID：11814162
> 
> 赞同：2
> 
> 时间：2012-08-05T05:20:06.207
> 
> 标签：maven, jboss, repository

我在我的 pom 中添加了两个存储库：

```
<repositories>
    <repository>
        <id>objectify-appengine</id>
        <url>http://objectify-appengine.googlecode.com/svn/maven</url>
    </repository>

    <repository>
        <id>jboss</id>
        <url>http://repository.jboss.org/maven2</url>
    </repository>
</repositories> 
```

但是对于除 jboss 之外的所有依赖项都得到“缺少工件 ...”。（无法从中央和对象化获取依赖项）

尝试将存储库添加到 settings.xml。但是没有效果。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:31:19.533

您的存储库已弃用，请以这种方式更新：

```
<project >
    <repositories>
    <repository>
        <id>JBoss Public repository</id>
        <url>http://repository.jboss.org/nexus/content/groups/public/</url>
    </repository>
    </repositories>
</project> 
```

# cuda - 如何获取推力foreach的索引

> ID：11814164
> 
> 赞同：1
> 
> 时间：2012-08-05T05:20:20.690
> 
> 标签：cuda, thrust

我正在尝试对每个使用推力来为设备矢量提供某些值这里是代码

```
const uint N = 222222; 
struct assign_functor
{
  template <typename Tuple>
  __device__ 
  void operator()(Tuple t)
  {  
    uint x = threadIdx.x + blockIdx.x * blockDim.x;
    uint y = threadIdx.y + blockIdx.y * blockDim.y;
    uint offset = x + y * blockDim.x * gridDim.x; 

    thrust::get<0>(t) = offset; 
  }
};
int main(int argc, char** argv)
{ 

  thrust::device_vector <float> d_float_vec(N);  

  thrust::for_each(
    thrust::make_zip_iterator( 
      thrust::make_tuple(d_float_vec.begin()) 
    ), 
    thrust::make_zip_iterator( 
      thrust::make_tuple(d_float_vec.end())
    ), 
    assign_functor()
  );

  std::cout<<d_float_vec[10]<<" "<<d_float_vec[N-2] 
} 
```

d_float_vec[N-2] 的输出应该是 222220；但结果是 1036。我的代码有什么问题？？

我知道我可以使用thrust::sequence 为向量提供序列值。我只想知道如何获得推力 foreach 函数的真实索引。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T20:16:43.093

正如评论中所指出的，您的方法永远不可能奏效，因为您已经假设了许多关于`thrust::for_each`内部工作方式的事情可能不正确，包括：

*   您隐含地假设`for_each`使用单个线程来处理每个输入元素。几乎可以肯定不是这样。在操作期间，推力更有可能在每个线程中处理多个元素。
*   您还假设执行按顺序发生，以便第 N 个线程处理第 N 个数组元素。情况可能并非如此，执行可能以无法*先验的顺序发生*
*   您假设`for_each`在单个内核 laumch 中处理整个输入数据集

推力算法应被视为内部操作未定义的黑匣子，实现用户定义的函子不需要了解它们。在您的示例中，如果您需要仿函数内的顺序索引，请传递一个计数迭代器。重写示例的一种方法是：

```
#include "thrust/device_vector.h"
#include "thrust/for_each.h"
#include "thrust/tuple.h"
#include "thrust/iterator/counting_iterator.h"

typedef unsigned int uint;
const uint N = 222222; 
struct assign_functor
{
  template <typename Tuple>
  __device__ 
  void operator()(Tuple t)
  {  
    thrust::get<1>(t) = (float)thrust::get<0>(t);
  }
};

int main(int argc, char** argv)
{ 
  thrust::device_vector <float> d_float_vec(N);  
  thrust::counting_iterator<uint> first(0);
  thrust::counting_iterator<uint> last = first + N;

  thrust::for_each(
    thrust::make_zip_iterator( 
      thrust::make_tuple(first, d_float_vec.begin()) 
    ), 
    thrust::make_zip_iterator( 
      thrust::make_tuple(last, d_float_vec.end())
    ), 
    assign_functor()
  );

  std::cout<<d_float_vec[10]<<" "<<d_float_vec[N-2]<<std::endl; 
} 
```

在这里，计数迭代器与数据数组一起传入一个元组，允许仿函数访问与它正在处理的数据数组条目相对应的顺序索引。

# c# - 将列表框设置为通用列表中的预定义值

> ID：11814168
> 
> 赞同：0
> 
> 时间：2012-08-05T05:21:06.783
> 
> 标签：c#, asp.net

我有一个列表框，我想设置列表框中的一些项目被选中。这些项目来自 System.collections.generic 列表，换句话说，我有一个列表

```
ABC  5
DEF  6
PQR  9 
```

和一个包含大约 100 个项目的列表框，包括`ABC, DEF`和`PQR`。我想遍历列表框并列出并将这些项目设置为我在后面的代码中选择的。

我怎样才能做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:41:30.907

你正在寻找`SelectionMode="Multiple"`

## 标记

```
<asp:ListBox ID="LBSample" runat="server" SelectionMode="Multiple">
    <asp:ListItem Text="1" Value="1"></asp:ListItem>
    <asp:ListItem Text="2" Value="2"></asp:ListItem>
    <asp:ListItem Text="3" Value="3"></asp:ListItem>
</asp:ListBox> 
```

## 代码背后

```
List<string> Str = new List<string> { "1", "3" };

foreach (ListItem obj in LBSample.Items)
{
    if (Str.Contains(obj.Text))
        obj.Selected = true;
} 
```

# c# - 除以 3 并向上取整（如果需要） C#

> ID：11814175
> 
> 赞同：5
> 
> 时间：2012-08-05T05:22:41.673
> 
> 标签：c#, divide

在我的游戏中，我必须实现一个功能，将一个数字除以 3 并使其成为一个整数。即不是3.5或2.6等......

它应该是一个整数，比如 3 或 5。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T05:25:14.380

```
Math.Round(num / 3); 
```

或者

```
Math.Ceiling(num / 3); 
```

或者

```
Math.Truncate(num / 3); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T05:28:34.003

除以三和四舍五入可以用数学函数完成：

```
int xyzzy = Math.Ceiling (plugh / 3); 
```

或者，如果输入是整数，则根本没有函数：

```
int xyzzy = (plugh + 2) / 3; 
```

这也可以以更通用的方式完成，“除以`n`，四舍五入”：

```
int xyzzy = (plugh + n - 1) / n; 
```

* * *

该`Ceiling`函数用于显式四舍五入（朝向正无穷大）。舍入还有许多其他变体（下限、截断、舍入到偶数、从零舍入等等），可以[在这个答案](https://stackoverflow.com/questions/14/difference-between-math-floor-and-math-truncate-in-net/580252#580252)中找到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-05T05:29:02.050

发现[这个](https://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division)说，如果你把数字除以二，然后除以三，你会得到正确的答案。例如，7/3 = 2.3，但 (7+2)/3 = 3。

# multithreading - 多线程访问（读/写）同一张表

> ID：11814176
> 
> 赞同：1
> 
> 时间：2012-08-05T05:23:17.943
> 
> 标签：multithreading, sql-server-2008, entity-framework

如果有多个线程访问（读/写）同一个表到数据库中，我应该考虑哪些线程安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:38:58.667

这里有一些很好的提示，例如如果使用 MySQL

*   使用行级锁定。
*   使用 TRANSACTION_READ_COMMITTED 隔离级别。
*   避免不能使用索引的查询；它们需要锁定表中的所有行（如果只是非常短暂的话）并且可能会阻止更新。
*   避免在线程之间共享语句

这是更多[信息和参考](http://docs.oracle.com/javadb/10.4.2.1/devguide/cdevconcepts23499.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:13:02.690

检查以不同隔离级别实现事务的机制。这些机制存在于数据库系统或您的 API 中。

# css - css html 实体

> ID：11814177
> 
> 赞同：12
> 
> 时间：2012-08-05T05:23:31.677
> 
> 标签：css, character-entities

`&rarr;`当链接悬停在以下css上时，我正在尝试使用css添加一个html实体（ →）：

```
#menu1 a:hover:after {
  content: "&#8594;";
} 
```

但输出只是`&#8594;`代替→。使用小数 (8594) 或实体 (rarr) 时也会出现同样的问题。

如何在 CSS 中包含 HTML 实体？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-05T05:27:43.993

```
#menu1 a:hover:after {
  content:"\2192 ";
}​ 
```

工作示例： http: [//jsfiddle.net/wCzUf/](http://jsfiddle.net/wCzUf/)
更多详细信息 -[您可以在 CSS“内容”属性中使用 HTML 实体吗？](https://stackoverflow.com/questions/7240520/can-you-use-html-entities-in-the-css-content-property)
HTML 实体列表 - [http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T05:26:49.253

这取决于您如何在 HTML 文件中包含 CSS。在内联样式表中，实体应该可以工作。

如果您有外部样式表，则不能使用 HTML 实体。只需输入字符本身 ( `"→"`)，并使用 .css 文件的字符集正确编码。或者，您可以在您的情况下使用 Unicode 转义序列`"\2192"`（十六进制值 8594）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T05:35:21.873

这[已经](https://stackoverflow.com/questions/190396/adding-html-entities-using-css-content)在另一个问题中得到了回答。根据解决方案，您需要在 CSS 内容属性中使用转义的 Unicode。

```
#menu1 a:hover:after {
  content: "\002192";  
} 
```

# python - Pyglet 将一组图像绘制为更大的图像

> ID：11814179
> 
> 赞同：4
> 
> 时间：2012-08-05T05:24:37.513
> 
> 标签：python, pyglet

有没有办法将一大堆小图像绘制成一个更大的图像，所以只需要移动大图像？具体来说，我正在制作一个自上而下的基于瓷砖的 rpg，并且我正在尝试使用地图滚动。移动每个图块比移动一个大图像要慢得多，所以我正在寻找一种将所有图块绘制到一个图像上的方法（我查看了纹理，但找不到任何示例或教程）这是最好的方法吗？有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T06:00:09.243

您应该检查[AbstractImage.blit_into()](http://pyglet.readthedocs.io/en/pyglet-1.2-maintenance/api/pyglet/image/pyglet.image.AbstractImage.html#pyglet.image.AbstractImage.blit_into)（以及此类的衍生物）。这是一个基本上可以满足您需求的示例，其中 img1.png 和 img2.png 只是 pyglet 源代码示例文件夹中的 pyglet.png 的副本：

```
import pyglet

window = pyglet.window.Window()
image = pyglet.image.Texture.create(256,128)
img1 = pyglet.image.load('img1.png')
img2 = pyglet.image.load('img2.png')
image.blit_into(img1,0,0,0)
image.blit_into(img2,128,0,0)
@window.event
def on_draw():
    window.clear()
    image.blit(0,0)

pyglet.app.run() 
```

# jquery - 我想在 jquery var 中存储一个值并传递它

> ID：11814183
> 
> 赞同：-5
> 
> 时间：2012-08-05T05:25:39.857
> 
> 标签：jquery, html, youtube

我有一个脚本，你可以从这里下载：[http ://www.4shared.com/rar/XoaJijx5/var_pass.html](http://www.4shared.com/rar/XoaJijx5/var_pass.html)

问题出在 index.html 和 scripts.js 中，请查看并给我更改

我在这两个文件中写了一条评论，让我知道我需要什么

我需要将隐藏的输入值传递给 scripts.js 并将其存储在 var 中并在 youtube 的 id url 中回显

index.html 中的问题：

```
<div id="player"><input type="hidden" name="youtube-id" value="uyeJXKfAcpc" /></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:35:10.077

您的所有代码都需要在 $(document).ready 函数中。像这样：

```
$(document).ready(function() {
    //You can alternatively pass an object:
    $('#player').youTubeEmbed({
        video: 'http://www.youtube.com/watch?v=uyeJXKfAcpc',
        width: 640,
        // Height is calculated automatically
        progressBar: true // Hide the progress bar
    });

    var yid = $("input[name='youtube-id']").val();
    $('#player').youTubeEmbed({
        video: 'http://www.youtube.com/watch?v=' + yid,
        width: 640,
        // Height is calculated automatically
        progressBar: true // Hide the progress bar
    });
}); // THE END OF YOUR $(document).ready function 
```

# sql - 滚动和 SQL

> ID：11814184
> 
> 赞同：0
> 
> 时间：2012-08-05T05:25:59.363
> 
> 标签：sql, performance, sum

我有一个非常简单的 SQL 要求，但在遇到性能问题时想知道以下场景的“最佳实践”是什么。

我有一份球队名单，这些球队每周/每轮都支付比赛费用。如果一个团队不付款，那么他们将有未结余额。所有团队付款都进入一个越来越大的付款表。返回包含当前余额的团队列表的最佳做法是什么？

**我目前拥有的：**

```
Select teams.*, (Select SUM(amount) from payments p where p.TeamID=teams.TeamID) as teambalance 
from (select TeamID, TeamName from Teams) teams 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:57:21.780

我对此进行了很多思考，并认为“不要两次存储相同的信息”的经典建议在这里是错误的，或者至少被误解了。

想想银行必须如何做。显然，当您想知道您当前的余额并且您已经是 20 年的客户时，他们不会将 20 年的帐户活动相加来找到您的当前余额。鉴于此，我看到了两种处理方法：

1.  选择要“关闭”的期间，并始终从上次关闭的期间开始计算。这使总和相对较短。月报表可能是一个很好的锚。您是否有类似的自然时间段或业务生命周期要跟踪？
2.  通过将您的帐户历史锚定在*当前*，向后工作。与其从 0 开始并添加，不如从当前余额开始并返回。在我看来，这同样有效，并且具有额外的好处，即当您想要修剪旧历史时，您不必做任何事情。存储当前余额，忘记所谓的非规范化。当前余额与起始余额一样是真实的经验事实，以这种方式锚定您的帐户没有任何害处。

喜欢的话可以继续添加，只要性能还可以。但它可能不是最优的。

您当前的查询很好，但不需要`teams`派生表。除非您使用 MySQL，否则 DBMS 不需要这种“帮助”——尽管 MySQL 实际上可能会受到伤害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:33:21.840

```
select teamId,teamName,sum(amount)
from teams t join payments p on t.teamId = p.teamId
group by t.teamId, t.teamName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T05:30:45.427

我使用了两种方法来完成这项任务——一种是您当前使用的方法。另一种是使用交叉应用。

我更喜欢你现在的方法-

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T08:04:24.007

这可能比在 SELECT 子句（或连接）中使用子查询更快：

```
select teams.TeamID, teams.teamName, team_balances.teambalance
  from teams
  join ( select TeamID, sum(amount) teambalance
           from payments
         group by TeamID
  ) team_balances
  on team_balances.TeamID = teams.TeamID; 
```

这将按顺序扫描支付表一次，而不是进行 N 次索引扫描（每个团队一次）。

**非规范化**

另一种选择是创建将“outstanding_balance”列添加到团队表。

在支付表上创建一个触发器。在触发器中，分别根据 TeamID 和发票/付款金额增加或减少团队中的未完成余额列。

根据您的 RDBMS，您还可以使用物化视图。这类似于触发方法，除了每个团队的余额将存储在不同的表中。

# php - Apache 或 PHP 重定向到奇怪的 URL

> ID：11814189
> 
> 赞同：2
> 
> 时间：2012-08-05T05:27:17.793
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在尝试为开发测试建立一个动态的应用程序服务框架。

我想要的结果是，当用户访问一个 URL 时，如果它的格式类似于`hostname.com/somecategory/someapplicationname/`或`hostname.com/somecategory/someapplicationname`（末尾没有斜杠），它应该为用户提供数据库中请求的应用程序，只要类别和应用程序名称存在关键。

我有一个特殊情况，其中一些应用程序不在数据库中，并且它们存在于具有相同 URL 的文件中，因此我们提供现有文件的优先级高于任何数据库记录。

来自数据库的动态内容的情况很好。仅当末尾有斜线时，现有文件的大小写 100% 有效。如果斜线不存在，它将提供正确的文件，但 URL 看起来很奇怪。它会显示：`hostname.com/somecategory/someapplicationname/?category=somecategory&appname=someapplicationname`
所以，它有效，但意外的输出让我觉得解决方案不完整。

我正在使用 apache mod_rewrite，我的 .htaccess 文件如下：

```
RewriteEngine on
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$ route.php?category=$1&appname=$2 [NC,L] 
```

特定于此案例的 PHP 代码如下。为了便于阅读，我从这个片段中删除了验证和数据库连接，但是保留了这个特殊情况的逻辑。

```
$file = $_SERVER['DOCUMENT_ROOT'] . $_GET['category'] . "/" . $_GET['appname'] . "/index.php";
$fileNoPHP = $_SERVER['DOCUMENT_ROOT'] . $_GET['category'] . "/" . $_GET['appname'] . "/index.html";
$_fileExists = file_exists($file);
$_fileNoPHPExists = file_exists($fileNoPHP);
include_once($_fileExists ? $file : $fileNoPHP); 
```

需要明确的是，我的问题是：为什么我现有的文件案例将 GET 参数附加到 URL 的末尾，仅当末尾的斜杠不存在时？

谢谢你的时间。如果您需要更多信息，请告诉我，我会提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:40:11.490

您拥有的规则不是导致奇怪 URL 的原因：

```
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$ route.php?category=$1&appname=$2 [NC,L] 
```

这应该没问题。您正在某个地方生成该链接或将浏览器重定向到该链接。如果你有一个看起来像这样的规则：

```
RewriteRule route.php /%1/%2/ [R=301,L] 
```

您需要通过`?`在末尾添加 a 来删除查询字符串：

```
RewriteRule route.php /%1/%2/? [R=301,L] 
```

或者，如果您使用的是 Apache 2.4，请`QSD`在括号中包含一个标志。

如果这不能解决问题，您需要添加一个规则以确保附加斜杠，尽管这可能是`DirectorySlash`您重定向的问题（您可以关闭它）。

# java - 关于地图中的碰撞

> ID：11814190
> 
> 赞同：-10
> 
> 时间：2012-08-05T05:27:23.267
> 
> 标签：java, collections, hashmap

我正在浏览 HashMap 并阅读以下分析..

> 1.  HashMap 的实例有两个影响其性能的参数：初始容量和负载因子。
>     
>     
> 2.  容量是哈希表中的桶数，初始容量只是哈希表创建时的容量。
>     
>     
> 3.  负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。
>     
>     
> 4.  当哈希表中的条目数超过负载因子和当前容量的乘积时，对哈希表进行重新哈希（即重建内部数据结构），使哈希表的桶数大约增加一倍。
>     
>     
> 5.  默认初始容量为 16，默认负载因子为 0.75。您可以在地图的构造函数中提供其他值。

现在假设我有一张地图..

```
HashMap map=new HashMap();//HashMap key random order.
         System.out.println("Amit".hashCode());
         map.put("Amit","Java");
         map.put("mAit","J2EE");
         map.put("Saral","J2rrrEE"); 
```

我想发生碰撞请告知碰撞将如何发生..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:30:05.533

我相信确切的哈希图行为取决于实现。只要看看你的类库正在做散列并构造一个冲突。这很简单。

如果你想在任意对象而不是字符串上发生冲突，那就容易多了。`hashCode()`只需使用always的自定义创建一个类`returns 0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:42:01.097

如果您希望发生真正的冲突，那么最好编写自己的自定义哈希码。比如说，如果你想要和冲突`Amit`，`mAit`你可以做一件事，只需使用字符的 ascii 值作为哈希码。你会因为不同的键而发生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T05:32:44.613

当 2 个 key 具有相同的 hash key 时会发生冲突。我没有计算你的键散列键，但我不认为它们具有相同的散列键，因此如果它们没有相同的散列键，则不会发生冲突。如果您将与键相同的字符串放在一起，则会发生冲突

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T22:18:28.040

这里的冲突绝对是可能的，并且与哈希表实现无关。 [HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)在内部使用[Object.hashCode](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)将对象映射到存储桶，然后使用[Object.equals](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)的冲突解决机制（OpenJDK 实现使用分离链） 。

为了回答您的问题，[String.hashCode](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode%28%29)为兼容性而明确定义...

> 返回此字符串的哈希码。对象的哈希码`String`计算为 `s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]`
> 
> 使用`int`算术运算，其中`s[i]`是字符串的第*i*个字符，是字符串`n`的长度，`^`表示取幂。（空字符串的哈希值为零。）

或者，在代码中（来自[OpenJDK](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/String.java#1494)）

```
public int hashCode() {
    int h = hash;
    if (h == 0 && count > 0) {
        int off = offset;
        char val[] = value;
        int len = count;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return h;
} 
```

与任何散列函数一样，冲突是可能的。根据[Wikipedia article](http://en.wikipedia.org/wiki/Java_hashCode%28%29#The_java.lang.String_hash_function)，它指出，例如，`"FB"`和`"Ea"`导致相同的值。

如果你想要更多，在这里找到具有相同哈希值的冲突应该是一个微不足道的暴力问题。

* * *

作为旁注，我想我会指出这与*The C Programming Language*第二版中的函数非常相似：

```
#define HASHSIZE 100

unsigned hash(char *s)
{
    unsigned hashval;

     for(hashval = 0; *s != '\0'; s++)
         hashval = *s + 31 * hashval;

     return hashval % HASHSIZE;
} 
```

# qt - Qt 多线程

> ID：11814195
> 
> 赞同：1
> 
> 时间：2012-08-05T05:27:58.227
> 
> 标签：qt, opencv

我正在 Qt 中构建一个简单的 GUI 来在 OpenCV 中执行一些图像处理。我想使用多线程，以便即使处理变得非常密集，GUI 也能做出响应。为此，我参考以下章节来构建我的框架：

[http://www.informit.com/articles/article.aspx?p=1405551&seqNum=3](http://www.informit.com/articles/article.aspx?p=1405551&seqNum=3)

首先，我有 2 个按钮，一个用于加载图像，另一个用于处理图像。

我有 2 个标签，一个用于显示输入图像，一个用于显示处理后的图像。

到目前为止，我正在使用主线程中的插槽和信号机制加载我的输入图像，并且我正在为图像翻转创建一个新线程。

但是，当我构建代码时，出现错误

> 架构 x86_64 的未定义符号：
> “FlipTransaction::FlipTransaction(int)”，引用自：mainwindow.o ld 中的 MainWindow::flipHorizo​​ntally()：未找到架构 x86_64 的符号

当我注释掉插槽 flipHorizo​​ntally() 时，我的代码构建良好并且能够加载图像。

因此我的处理没有被执行。

下面是我的代码。任何帮助表示赞赏

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QFileDialog>
#include <QStatusBar>

// OpenCV Headers
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>   // for cvtColor

// Multi-Threading Headers
#include <QThread>
#include <QMutex>
#include <QQueue>
#include <QWaitCondition>

namespace Ui {
class MainWindow;
}

class Transaction
{
public:
    virtual ~Transaction() {}

    virtual QImage apply(const cv::Mat source_image, cv::Mat dest_image) = 0;

    virtual QString message() = 0;
};

class TransactionThread : public QThread
{
    Q_OBJECT

public:
    TransactionThread();
    ~TransactionThread();

    void addTransaction(Transaction *transact);
    void setImage(const QImage &image);
    QImage image();

signals:
    void transactionStarted(const QString &message);
    void allTransactionsDone();

protected:
    void run();

private:
    QImage currentImage;
    Transaction *EndTransaction;
    QQueue<Transaction *> transactions;
    QWaitCondition transactionAdded;
    QMutex mutex;
    cv::Mat source_image;
    cv::Mat dest_image;
};

class FlipTransaction : public Transaction
{
public:
    FlipTransaction(int orientation);

    QImage apply(const cv::Mat source_image, cv::Mat dest_image);
    QString message();

private:
    int orientation;
};

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    void addTransaction(Transaction *transact);
    void drawOut(QImage qimg);

private slots:
    void on_pushButton_clicked();

public slots:
    void flipHorizontally();
    void allTransactionsDone();

private:
    Ui::MainWindow *ui;

public:
    TransactionThread thread;
    cv::Mat source_image;       // Input Image Variable
    cv::Mat dest_image;         // Output Image Variable
};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    statusBar()->showMessage(tr("Ready"), 2000);

    connect(&thread, SIGNAL(transactionStarted(const QString &)),
            statusBar(), SLOT(showMessage(const QString &)));

    connect(&thread, SIGNAL(allTransactionsDone()),
            this, SLOT(allTransactionsDone()));

}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::drawOut(QImage qimg)
{
    // Display on Label
    ui->outputLabel->setPixmap(QPixmap::fromImage(qimg));

    // Resize the label to fit the image
    ui->outputLabel->resize(ui->outputLabel->pixmap()->size());
}

void MainWindow::addTransaction(Transaction *transact)
{
      MainWindow::thread.addTransaction(transact);
}

void MainWindow::on_pushButton_clicked()
{
    QString filename = QFileDialog::getOpenFileName(this,
    tr("Open Image"), ".",tr("Image Files (*.png *.jpg *.jpeg *.bmp *.gif)"));

    // Read Image
    source_image = cv::imread(filename.toAscii().data());

    // Resize Image
    cv::resize(source_image, source_image, cv::Size(128,128) , 0, 0);

    // Change to RGB format
    cv::cvtColor(source_image,source_image,CV_BGR2RGB);

    // Convert to QImage
    QImage qimg = QImage((const unsigned char*) source_image.data, source_image.cols, source_image.rows, QImage::Format_RGB888); // convert to QImage

    // Display on Input Label
    ui->inputLabel->setPixmap(QPixmap::fromImage(qimg));

    // Resize the label to fit the image
    ui->inputLabel->resize(ui->inputLabel->pixmap()->size());
}

void MainWindow::flipHorizontally()
{
    MainWindow::thread.addTransaction(new FlipTransaction(int(1)));
}

void MainWindow::allTransactionsDone()
{
    statusBar()->showMessage(tr("Ready"), 2000);
}

TransactionThread::TransactionThread()
{
    start();
}

TransactionThread::~TransactionThread()
{
    {
        QMutexLocker locker(&mutex);
        while(!transactions.isEmpty())
            delete transactions.dequeue();
        transactions.enqueue(EndTransaction);
        transactionAdded.wakeOne();
    }
    wait();
}

void TransactionThread::addTransaction(Transaction *transact)
{
    QMutexLocker locker(&mutex);
    transactions.enqueue(transact);
    transactionAdded.wakeOne();
}

void TransactionThread::setImage(const QImage &image)
{
    QMutexLocker locker(&mutex);
    currentImage = image;
}

QImage TransactionThread::image()
{
    QMutexLocker locker(&mutex);
    return currentImage;
}

void TransactionThread::run()
{
    Transaction *transact = 0;
    QImage oldImage;

    forever {
        {
            QMutexLocker locker(&mutex);

            if (transactions.isEmpty())
                transactionAdded.wait(&mutex);
            transact = transactions.dequeue();
            if (transact == EndTransaction)
                break;

            oldImage = currentImage;
        }

        emit transactionStarted(transact->message());

        QImage newImage = transact->apply(source_image, dest_image);

     //   QImage newImage = transact->apply(oldImage);
        delete transact;

        {
            QMutexLocker locker(&mutex);
            currentImage = newImage;
            if (transactions.isEmpty())
                emit allTransactionsDone();
        }

    }
}

QImage FlipTransaction::apply(const cv::Mat source_image, cv::Mat dest_image)
{
    // Process Image
    cv::flip(source_image, dest_image, orientation);

    // Change to RGB format
    cv::cvtColor(dest_image,dest_image,CV_BGR2RGB);

    // Convert to QImage
    QImage qimg = QImage((const unsigned char*) dest_image.data, dest_image.cols, dest_image.rows, QImage::Format_RGB888);

    return qimg;
}

QString FlipTransaction::message()
{
    if (orientation == 1) {
        return QObject::tr("Flipping image horizontally...");
    } else {
        return QObject::tr("Flipping image vertically...");
    }
} 
```

# aptana - php标签的自动完成

> ID：11814204
> 
> 赞同：2
> 
> 时间：2012-08-05T05:29:28.100
> 
> 标签：aptana, aptana3

我刚刚下载了aptana 3 Standalone Version。

到目前为止，我使用 eclipse galileo pdt 进行 php 开发。在 Eclipse 中，我有 php 标签的自动完成功能（即当我输入 `<?` eclipse 时自动完成它`<?php ?>`）

如何为 aptana 3 启用此功能？

当我为此进行谷歌搜索时，我总是认为在 aptana 中是不可能的。这是对的吗？

# windows-7 - windows7 和 windows8 加载程序图像存储在哪里？

> ID：11814208
> 
> 赞同：1
> 
> 时间：2012-08-05T05:30:34.813
> 
> 标签：windows-7, loading

我试图找到windows7和windows8的加载器图像。找不到东西。我想在 preloaders.net 项目上重现那些。水平图像很容易，但圆形图像很难:)。

有谁知道windows7和windows8在哪里存储他们的加载器图像？

提前致谢

# ios - 带有prepareForSegue 的DetailViewController 搜索栏

> ID：11814209
> 
> 赞同：6
> 
> 时间：2012-08-05T05:30:36.010
> 
> 标签：ios, storyboard, uisearchbar, segue, uisearchresultscontroller

我正在为我的项目实施搜索栏。搜索部分没问题。我可以显示原始数据并使用搜索文本过滤数据。当我点击搜索结果 tableView 的单元格时，它没有转换到详细视图。但是对于原始数据，我可以转换到详细视图。我在使用情节提要时使用该`prepareForSegue`方法。这是到目前为止的代码，

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([segue.identifier isEqualToString: @"Book Detail Segue"]) {

    BookDetailsTVC *bookDetailsTVC = segue.destinationViewController; // for the detail view controller
    bookDetailsTVC.delegate = self;

    if (self.tableView == self.searchDisplayController.searchResultsTableView) { // The if block is not working
        NSLog(@"Search Display Controller");
        bookDetailsTVC.book = [self.searchResults objectAtIndex: self.searchDisplayController.searchResultsTableView.indexPathForSelectedRow.row];
    } else {
        NSLog(@"Default Display Controller");
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        bookDetailsTVC.book = [self.objects objectAtIndex: indexPath.row];
    }
}
} 
```

当我尝试使用`didSelectRowAtIndexPath`方法时，我可以转换到详细视图。但我收到这样的错误消息：

*   `Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.`

*   `Unbalanced calls to begin/end appearance transitions for <BookDetailsTVC: 0x69b5300>.`

这是 didSelectRowAtIndexPath 的代码：

```
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath
{
    BookDetailsTVC *bookDetailsTVC = [[BookDetailsTVC alloc] init];

    if (tableView == self.searchDisplayController.searchResultsTableView) {

    bookDetailsTVC.book = [self.searchResults objectAtIndex: self.searchDisplayController.searchResultsTableView.indexPathForSelectedRow.row];

    [self performSegueWithIdentifier: @"Book Detail Segue" sender:self];

    NSLog(@"Search Display Controller");
} else {

    bookDetailsTVC.book = [self.objects objectAtIndex: indexPath.row];

    [self performSegueWithIdentifier: @"Book Detail Segue" sender: self];

    NSLog(@"Default Display Controller");
}
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-05T23:46:36.007

问题解决了，在cellForRowAtIndexPath里改这个

`UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];`

至

`UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier: CellIdentifier];`

并且在 prepareForSegue 方法中，您可以使用 self.searchDisplayController.active 来检查当前的 tableview

```
if (self.searchDisplayController.active) {
    NSLog(@"Search Display Controller");
    bookDetailsTVC.book = [self.searchResults objectAtIndex: self.searchDisplayController.searchResultsTableView.indexPathForSelectedRow.row];
} else {
    NSLog(@"Default Display Controller");
    bookDetailsTVC.book = [self.objects objectAtIndex: self.tableView.indexPathForSelectedRow.row];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T09:54:57.367

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView == self.searchDisplayController.searchResultsTableView) {

        self.selectedPerson = [self.searchResults objectAtIndex:indexPath.row];

        PersonasDetalle *pd = [self.storyboard instantiateViewControllerWithIdentifier:@"PersonaDetalle"];
        pd.persona = self.selectedPerson;

        [self.navigationController pushViewController:pd animated:YES];

    }
} 
```

# sql - 按装载和年份的 SQL 查询组

> ID：11814210
> 
> 赞同：2
> 
> 时间：2012-08-05T05:30:41.700
> 
> 标签：sql, sql-server, sql-server-express

我有这张表，称为`history`（日期在 DD-MM-YYYY 中）：

```
====================
| Buy        | Qty |
====================
| 01-01-2012 |  1  |
| 01-01-2012 |  1  |
| 01-02-2012 |  1  |
| 01-03-2012 |  1  |
| 01-05-2012 |  1  |
| 01-07-2012 |  1  |
| 01-12-2012 |  1  |
==================== 
```

注意：第 4、6、8、9、10、11 个月没有购买。

如果我运行：

```
SELECT MONTH(buy) AS day, YEAR(buy) as year, SUM(qty)
FROM history
GROUP BY MONTH(buy),YEAR(buy) 
```

我得到这个结果：

```
======================
| Month | Year | Qty |
======================
| 01    | 2012 |  2  |
| 02    | 2012 |  1  |
| 03    | 2012 |  1  |
| 05    | 2012 |  1  |
| 07    | 2012 |  1  |
| 12    | 2012 |  1  |
====================== 
```

我也希望显示第 4、6、8、9、10、11 个月，但有`Qty`0（零），如下所示：

```
======================
| Month | Year | Qty |
======================
| 01    | 2012 |  2  |
| 02    | 2012 |  1  |
| 03    | 2012 |  1  |
| 04    | 2012 |  0  |
| 05    | 2012 |  1  |
| 06    | 2012 |  0  |
| 07    | 2012 |  1  |
| 08    | 2012 |  0  |
| 09    | 2012 |  0  |
| 10    | 2012 |  0  |
| 11    | 2012 |  0  |
| 12    | 2012 |  1  |
====================== 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:36:43.320

您可以使用整数查找表。

我在这种情况下使用的是通过[CTE](http://msdn.microsoft.com/en-us/library/ms175972.aspx)生成数字的函数/过程（下面的示例）

剩下的就是使用生成的数字作为月份来创建日期 - 然后从上面加入你的结果。

```
declare @min int 
declare @max int

set @min = 1
set @max = 12
;
with numbers(n) as
(
    select @min as n 
    union all 
    select n + 1
    from numbers
    where n + 1 <= @max 
)
select row_number() over (order by n) [row], n
from numbers option(maxrecursion 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:18:17.913

试试这个 ：

```
Declare @Sample table 
(Buy datetime ,Qty int)

Insert into @Sample values
( '01-01-2012' ,1),
('01-01-2012',1 ),
('01-02-2012',1 ),
('01-03-2012',1 ),
('01-05-2012',1 ),
('01-07-2012',1 ),
('01-12-2012',1 )

;with cte as 
(
  select top 12 row_number() over(order by t1.number) as N
  from   master..spt_values t1 
   cross join master..spt_values t2
 )
select t.N as month,
isnull(datepart(year,y.buy),'2012') as Year,
sum(isnull(y.qty,0)) as Quantity
from cte t
left join @Sample y
on month(convert(varchar(20),buy,103)) = t.N
group by y.buy,t.N 
```

创建一个 Month 表来存储从 1 到 12 的值。您也可以使用 master..spt_values 而不是`sys.all_objects`

```
 select row_number() over (order by object_id) as months
  from sys.all_objects 
```

或使用递归 cte 生成月份表

```
;with cte(N) as 
(
Select 1 
union all
Select 1+N from cte where N<12
)
Select * from cte 
```

然后使用左连接将月份表中的值与您的表进行比较，并使用`isnull`函数来处理空值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T05:20:30.563

下面的代码会帮助你，你也可以按年份过滤数据

```
SELECT MonthYearTable.Month , MonthYearTable.Year, ISNULL(SUM(qty),0)
FROM history
Right JOIN (SELECT Month, Year FROM (SELECT 1 AS Month 
                            Union SELECT 2 
                            Union SELECT 3 
                            Union SELECT 4 
                            Union SELECT 5 
                            Union SELECT 6 
                            Union SELECT 7 
                            Union SELECT 8 
                            Union SELECT 9 
                            Union SELECT 10 
                            Union SELECT 11 
                            Union SELECT 12) AS MonthTable 
            INNER JOIN (SELECT DISTINCT YEAR(buy) AS year FROM history) YearTable ON 1=1
            ) AS MonthYearTable ON Month(history.buy) = MonthYearTable.Month AND Year(history.buy) = MonthYearTable.Year
GROUP BY MonthYearTable.Month, MonthYearTable.Year
ORDER BY MonthYearTable.Year, MonthYearTable.Month 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T06:05:47.263

试试这个：

```
CREATE TABLE history(Buy datetime,Qty int) 

INSERT INTO history
VALUES('01-01-2012',1),
 ('01-01-2012',1),  
 ('01-02-2012',1),  
 ('01-03-2012',1),  
 ('01-05-2012',1),  
 ('01-07-2012',1),  
 ('01-12-2012',1)  

Declare @mindate datetime
Declare @maxdate datetime
select @mindate=MIN(convert(datetime,buy,103)),@maxdate=MAX(convert(datetime,buy,103)) from history 

select datepart(month,a.dt) as month,datepart(year,a.dt) as year,isnull(SUM(qty),0) as Quantity  
from 
(select DATEADD(mm,number,convert(varchar(10),@mindate,103)) as dt from master..spt_values 
where type='p' and DATEADD(mm,number,convert(varchar(10),@mindate,103)) <= convert(varchar(10),@maxdate,103)
) a left join history h
on DATEPART(month,a.dt) = DATEPART(month,convert(varchar(10),h.Buy ,103))
group by a.dt 
order by a.dt 
```

# javascript - 从 html 调用 javascript 函数不起作用

> ID：11814213
> 
> 赞同：1
> 
> 时间：2012-08-05T05:31:14.283
> 
> 标签：javascript, jquery, html

这是问题所在。我有一个名为*javascript.js*的 javascript 文件，如下所示

```
$(document).ready(function(){

 function init()
  { 

    //code goes here

  }
  } 
```

现在 index.html 文件有一个命令按钮，它应该调用 init() 函数。

```
 <html>
   <head><script src=javascript.js ....></script>
   <body><button type="button" onclick="init()">Call Init!</button></body>
   </html> 
```

但它没有调用它。没有任何事情发生如预期。请提出解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T05:32:53.320

您应该在`$(document).ready()`范围之外定义您的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T05:46:08.387

该`onclick`属性将在全局上下文中执行。您的`init`函数的范围是您传递给 jQuery 的匿名函数。三种解决方案：

*   将`init`函数移到就绪函数之外，进入全局范围
*   `init`通过使其成为全局对象的属性来导出函数：`window.init = function() {…};`
*   当您使用 jQuery 时，您不需要在属性中定义任何处理程序。而是使用（在 ready 函数中）：`$("button").click(function init() {…});`更好地使用 an`id`来引用按钮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T05:42:40.633

尝试在 chrome 中查看页面。按 F12 查看控制台。您将能够快速调试问题。但是，乍一看，我确实看到您的 $(document).ready 函数没有正确关闭。添加 '）;' 在您包含的代码的末尾。此外，在您的脚本标签中为 javascript.js 添加引号。看看是否有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T14:34:20.750

你为什么不使用

```
function init()
{ 
   $(document).ready(function() {
       //code goes here
   });
} 
```

您也可以使用标志来跟踪“//代码在此处”是否继续进行。因此，如果文档尚未准备好，您可以使用带有 setTimeOut 函数的 while 循环暂停一段时间“为了不挂起客户端浏览器”。

# c# - 有什么方法可以读取发送到扬声器的当前音量级别？

> ID：11814214
> 
> 赞同：3
> 
> 时间：2012-08-05T05:31:15.140
> 
> 标签：c#, .net

我想制作一个音量调节器，这样我就不必在吵闹的场景中不断降低音量，在对话期间提高音量。潘多拉上的广告炸我的耳鼓也很烦人。

有什么办法可以得到发送到扬声器的音量？如果我能得到那个数字，我可以通过编程方式调高和调低音量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:55:10.973

为此，您可以尝试使用 PInvoke 命令 waveOutSetVolume：

[http://pinvoke.net/default.aspx/winmm/waveOutSetVolume.html](http://pinvoke.net/default.aspx/winmm/waveOutSetVolume.html)

还有一个对应的waveOutGetVolume来读取当前音量。

# python - 如何存储解析的 html 的结果？

> ID：11814224
> 
> 赞同：1
> 
> 时间：2012-08-05T05:33:26.067
> 
> 标签：python, url, html-parsing, beautifulsoup, finance

我正在使用 Python 的 HTMLParser 和 BeautifulSoup 来解析 Yahoo 财务数据。已经有一个非常好的包可以做到这一点，但它没有得到“有形价格/账面价值”，也就是说它在计算账面价值时包括商誉和其他无形资产。因此，我被迫推出自己的解决方案。

它一直不漂亮。这是代码

```
from BeautifulSoup import BeautifulSoup
import urllib2
from HTMLParser import HTMLParse

class data(HTMLParser):
    def handle_data(self, data):
        print data
parser = data()

url='http://finance.yahoo.com/q/bs?s=BAC&annual'
response = urllib2.urlopen(url)
html = response.read()
soup=BeautifulSoup(html)
tangibles=[str(parser.feed(str(soup('strong')[24:26])))] 
```

这有两个问题：1）我依赖数据总是在雅虎页面上的同一个地方，这不是最大的问题，但并不让我高兴，2）真正的问题；

```
 tangibles=[str(parser.feed(str(soup('strong')[24:26])))] 
```

是一个空列表，因为“数据”类只是打印我想要的东西而不是存储它。

如果您为我回答第 2 部分），我会很高兴。我还不懂课。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:58:23.123

摆脱数据和解析器并支持导入然后执行此操作。

```
tangibles = [''.join(node(text=True)).strip() for node in soup('strong')[24:26]] 
```

我基本上将其更改为使用一些 python 列表理解。[如果您不知道 Python 中的列表理解是什么，请在此处阅读更多信息](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)

本质上它做了这些事情：

1.  告诉汤找到标记为强的元素并为每个实例命名`node` `for node in soup.findAll('strong')[24:26]`
2.  在`node`它中，它完全找到并删除强标签`node.findAll(text=True)` [Beautiful soup docs about text=True](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#arg-text)
3.  连接元素中的元素，`node`所以它的 1 个元素而不是长度为 1 个元素的列表`''.join()`（python 技巧）

    即`['Net Stuff', '152,113,000']`与`[['Net Stuff'], ['152,113,000']]`

4.  删除多余的空格（尾随和前导）`.strip()`

# batch-file - 如何使用批处理文件将所有带有 [Dot]something 的文件复制到闪存驱动器？

> ID：11814229
> 
> 赞同：0
> 
> 时间：2012-08-05T05:34:08.363
> 
> 标签：batch-file, cmd

如何使用批处理文件将所有具有 [dot]something 的文件复制到闪存驱动器？例如，c 计算机上所有文件扩展名为 .txt 的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:36:12.383

这个问题并不真正属于这个网站......但假设你的驱动器是 D:\

```
copy C:\Path\To\Copy\From\*.txt D:\ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:24:12.830

直接在命令行上执行时，它只是：

`for /r %x in (*.txt) do copy "%x" F:\`

假设这`F:\`是您的闪存驱动器，并且您从包含这些文本文件的目录树的根目录开始。换句话说，如果您在`C:\test`其中，将找到其中的每个文本文件或任何子文件夹并将其复制到`F:\` 因此您可能想要创建一个批处理文件，例如：

```
@echo off
c:
cd \wherever\the\text\files\are
for /r %%x in (*.txt) do copy "%%x" F:\ 
```

（编辑：哎呀。在批处理文件中必须将 %s 加倍。）

# php - 动态下拉菜单不起作用

> ID：11814230
> 
> 赞同：1
> 
> 时间：2012-08-05T05:34:47.240
> 
> 标签：php

我想实现一个动态下拉列表，它将从第一个下拉列表中选择一批学生，然后选择相应的科目作为第二个下拉列表的选项..

这是我的页面的代码：

```
<head>
<link rel="stylesheet" type="text/css" media="all" href="jsDatePick_ltr.min.css" />
<script type="text/javascript" src="jsDatePick.min.1.3.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
window.onload = function(){
    new JsDatePick({
        useMode:2,
        target:"inputField",
        dateFormat:"%d-%M-%Y"
    });
};
</script>
</head>
<?php
$dept =$_COOKIE[dept];
include_once("../Include/connectdb.php");
include_once("../Include/data_menu.php");
include_once '../Include/pagemaker.php';

?>
<script type="text/javascript">
$(document).ready(function()
{
$(".batch").change(function()
{
var id=$(this).val();
var dataString = 'year_join='+ id;

$.ajax
({
type: "POST",
url: "ajax_subject.php",
data: dataString,
cache: false,
success: function(html)
{
$(".subject").html(html);
} 
});

});
});
</script>

</head>

<body>

<br><br><br><br><br>
<fieldset class="cbox"><legend>Batch</legend>
<form name="frm" action=<?php print "edit_attendencePHP_NEW.php"; ?> method="GET"     

id="content">
<br><br>

<div style="margin:80px">
<label>Batch :</label> <select name="batch">
<option selected="selected">--Select Batch--</option>
<?php
    $result = mysql_query("select distinct year_joining from student_profile  

order by year_joining ")or die(mysql_error());

while($year = mysql_fetch_assoc($result)){
if($year[year_joining]!="" && $year[year_joining]>"2008"){
  print "<OPTION value='$year[year_joining]'>$dept $year[year_joining]</OPTION>";
}  }
 ?>

</select>
<label>Subject :</label> <select name="subject" class="subject">
<option selected="selected">--Choose Subject--</option>

</select>

    Date :<input type="text" size="12" id="inputField" name="date"/>
        <input class="bluebutton" type="submit" value="Go">    
 </form><br>

 <label class="comment">select a batch frm the list and press "Go"</label>
 </fieldset> 
```

第二个 ajax 页面工作正常......正如我用 ($_GET) 测试的那样

这是与 $_GET[year_join] （查看源代码）显示...

ajax_subject.php

```
<option value="ENGG.MATHS-I">ENGG.MATHS-I</option><option value="COMPUTER PROGRAMMING   
LAB">COMPUTER PROGRAMMING LAB</option><option value="WORKSHOPS">WORKSHOPS</option> 
<option value="ENGG.PHYSICS">ENGG.PHYSICS</option><option  
value="ENGG.CHEMISTRY">ENGG.CHEMISTRY</option><option ........... 
```

其他一切似乎都很好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:48:43.453

现在看起来没有导致 AJAX 请求的更改事件被触发，因为您的批处理选择元素没有批处理类，只有批处理名称。这就是你的意图`$(".batch").change(function(){}`对吗？一旦你改变了，我会在你的回调函数中放置一个警报或控制台日志，以确保它甚至可以触发。

# eclipse - Eclipse - 为什么不能将 lib 文件夹中的 jar 集成到项目中？

> ID：11814235
> 
> 赞同：1
> 
> 时间：2012-08-05T05:36:20.750
> 
> 标签：eclipse

我手动将所需的 jar 文件复制到我的项目 lib 文件夹中。然后，我尝试通过“配置构建路径选项”将它们添加到构建路径。如果我选择“添加 jar”，则 lib 文件夹不会显示在“可供选择”列表中。所以，我被迫改用“添加外部罐子”选项。但是，该选项不会使 jars 成为项目的一部分，即使它们位于 lib 文件夹中。在我重新启动 Eclipse 2-3 次后，这些 jar 神奇地集成到了我的项目中。

为什么日食会这样？为什么我不能轻易做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:43:57.683

默认情况下，Eclipse 不会检测来自外部的文件更改，例如手动复制 lib 文件夹中的 jar 文件。

因此，在复制 jar 文件后，您必须`F5`在选择 lib 文件夹的同时按下以刷新项目。我相信这就是为什么 eclipse 找不到你的 jar 文件的原因。

如果您想一劳永逸地解决这个问题，您可以通过以下方式激活“使用本机挂钩或轮询刷新”

```
Window -> Preference -> General -> Workspace 
```

但是，如果您有一个包含许多文件的大项目，这可能会减慢 Eclipse。

## 更新

正如 Bananeweizen 所提到的，您也可以将这些文件复制到 Eclipse 中，例如 Package Explorer View，而不是从 Eclipse 外部进行所有复制。这样 Eclipse 将自动检测并刷新文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:50:25.367

我被教导将外部 jars 添加到 eclipse 项目的方法是将 jar 文件从资源管理器拖到 eclipse 中的 lib 文件夹中，然后在对话框中 eclipse 的响应是选择复制到选项，eclipse 导入 jar 文件并复制它同时到lib位置。

# java - 如何在 C/C++ 或 Java 中生成真正的贝斯吉他声音？

> ID：11814238
> 
> 赞同：1
> 
> 时间：2012-08-05T05:37:02.287
> 
> 标签：java, c++, audio, midi, bass

我在互联网上进行了广泛的研究，因为我需要一种方法来从程序中生成真正的贝司声音（如电贝司吉他）。问题是我一直在寻找 MIDI 方法来产生这种声音，但我不确定这是否正确，实际上我对这个主题知之甚少，这是我第一次尝试与从原始编码产生声音相关的任何事情。我一直在寻找不同的 API 来帮助我，它们中的大多数都是开源的，以查看它们在做什么，但我发现它们非常复杂，学习曲线非常陡峭，文档很少。我也一直在寻找开源程序，如 tuxguitar，用 java 制作，类似于 GuitarPro，所以我可以看到如何产生低音，我还有一些代码要扫描，所以我可以找到我要找的东西，但是我担心不会是我需要或能够做的。所以总结这一切，我的问题是：有没有一种方法可以通过本机代码或任何 API 产生真正的音乐贝司声音，而不必使用 MIDI 或类似的东西，最好在 c/c++ 或 java 中使用？非常感谢 PS 请原谅任何 sintaxis 或语言错误，我不是说英语的母语。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T05:46:49.900

MIDI 只是一个控制协议，与声音本身无关。它通常用于合成器控制（注意开/关消息等等），仅此而已。

大多数设备中都有一个合成器，可以在通过 MIDI 控制的同时为您产生声音。这是迄今为止最简单的入门方法，但您会发现大多数库存的通用 MIDI 合成器听起来并不那么好。

现在，就产生您所追求的声音而言，您正在谈论编写自己的合成器。没有魔法。没有捷径可走。这是一项艰苦的工作！通常，合成器会使用一组样本，然后对其进行操作。例如，您将有一个用于弹拨的样本，然后是另一个用于吉他声音的样本。这一切都将在[ADSR 信封](http://en.wikipedia.org/wiki/Synthesizer#ADSR_envelope)上进行控制。即使这样，听起来也不会令人惊奇，因为您只是在近似乐器的一小部分特征。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T06:07:20.050

你可以尝试通过midi来控制声卡的内置合成器。但是如果你想要好的声音和乐器质量，我建议你了解[VST](http://en.wikipedia.org/wiki/Virtual_Studio_Technology)，它是 Steinbergh 的一项技术，其中包括虚拟乐器 (VSTi) 和效果插件。

因此，从本质上讲，您可以创建或使用与现有商业和免费 VSTi 和 VST 插件一起使用的 VST 主机应用程序。然后，您可以重复使用听起来很棒的可用软件合成器和乐器仿真。正如 Brad 在他的评论中建议的那样，您可以通过 midi 控制主机应用程序。

虽然我在这里只宣传 VST，但维基百科链接包含来自不同品牌的其他技术的列表，这些技术正在做同样的事情。但你明白了。

# python - 当用户按一次退格键时，python readline lib会删除整行

> ID：11814239
> 
> 赞同：2
> 
> 时间：2012-08-05T05:37:10.157
> 
> 标签：python, readline

如果使用`sys.stdout.write`or`print`代替编写提示，则会发生这种情况`raw_input`。以下脚本演示了它：

```
$ cat overwrite.py
import readline, sys

if 'libedit' in readline.__doc__:
    readline.parse_and_bind('bind ^I rl_complete')
else:
    readline.parse_and_bind('tab: complete')
def set_completer(choices):
    choices = sorted(map(str,choices))
    def completer(txt, state):
        if state == 0:
            completer.options = [c for c in choices if c.startswith(txt)]
        if state < len(completer.options):
            return completer.options[state]
        return None
    readline.set_completer(completer)

set_completer(['foo','flup'])
sys.stdout.write('input: ')
x = raw_input()
print x 
```

如果你运行`python overwrite.py`，你会得到预期的提示：“input:”。如果您按一次退格键，则不会删除任何内容（我猜 readline 认为它已经在行首）。但是，如果您按“f”*然后*退格，则包括提示在内的整行都会被擦除。

必须遍历并替换我写到 stdout 的所有地方并且期望通过调用 raw_input 从用户那里获得输入是非常不方便的*，*所以我希望没有必要使用`raw_input`. python 文档在 readline 方面一反常态地稀疏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:50:42.293

没有其他真正的方法可以解决这个问题；虽然 readline 有`rl_already_prompted`变量，但它仍然需要传入提示，以便 readline 的函数可以正确管理输入行。

# view - Backbone style：如何处理视图的el元素

> ID：11814240
> 
> 赞同：5
> 
> 时间：2012-08-05T05:37:12.543
> 
> 标签：view, backbone.js

我在几个主干示例中发现了做同一件事的不同方法

我只是想知道它们中是否有更好的，以防它们完全相同，这是更被接受的风格

```
$('#header').html(new HeaderView().render()); 
```

对比

```
new HeaderView({el:$('#header')).render(); 
```

和

```
this.$el.html( this.template() ); 
```

对比

```
$(this.el).html( this.template() ); 
```

最后

```
render: function() {
    [...]
    return this.el;
} 
```

对比

```
render: function() {
    [...]
    return this;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T11:01:55.117

### `el`在构造函数中发送或不发送

我认为最好`el`在构造函数中发送，这样 JS 逻辑将与 DOM 结构更加*分离*，并且没有任何 DOM 元素名称被硬编码到 JS 代码中。

这对于*测试*建议也更好，因此您无需在测试中重新创建生产 DOM 结构，您可以创建一个虚拟 DOM 结构并实例化您的视图，以引用虚拟 DOM 结构中的任何 DOM 元素。

视图也变得更加可重用。

### 使用`this.$el`

我认为从性能的角度来看最好使用：

```
this.$el 
```

VS

```
$(this.el) 
```

由于第一个选项已经*预编译*。jQuery 消耗资源，将简单的 DOM 元素转换为 jQuery DOM 元素，如果您使用`this.$el`，则只需执行一次。

### 返回什么`render()`

正如@muistooshort 所说，标准是 return `this`。通常当你`render()`从外面调用你只需要的东西时`el`，返回`el`有很多逻辑，但人们已经同意返回`this`。

在某种程度上它有它的逻辑，因为这个表达式看起来很尴尬：

```
$('#header').html(new HeaderView().render()) 
```

但是这个其他看起来非常直观和自我解释：

```
$('#header').html(new HeaderView().render().el) 
```

# java - Java：如何解析来自设备 FM4100 的 AVL 数据包？

> ID：11814241
> 
> 赞同：0
> 
> 时间：2012-08-05T05:37:16.083
> 
> 标签：java, parsing

我目前正在处理通过 AVL 数据协议 4100 与服务器通信的远程 GPS 设备进行通信的 java 分配。

我正在从设备获取数据包，但我不知道如何解析/解码它以从中获取实际数据。

有人可以指导我完成这项工作吗？谢谢你。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:27:31.760

我知道现在回答为时已晚:)

这些天我在做同样的事情，不幸的是我找不到开发人员的好参考。我猜每个制造商都有自己的方式/协议来发送数据。

无论如何，我在这件事上得到了一些很好的文件： [http ://www.scribd.com/search?query=fm4200](http://www.scribd.com/search?query=fm4200)

你们中有一个很好的链接。我将不胜感激。

# sql-server-2005 - SQL Server 2005 中的 SQL 建模（一对多）

> ID：11814245
> 
> 赞同：0
> 
> 时间：2012-08-05T05:37:55.380
> 
> 标签：sql-server-2005, database-design

我有一张`product`桌子：

```
ProdId(PK)
Prod1
Prod2
Prod3 
Prod4 
```

和`Certification`表：

```
Certification(PK):
Cert1
Cert2
Cert3 
```

我需要对`ProdwithCert`关系（伪表）建模如下：

```
ProdwithCertId(PK)              ProdwithCert
ProdwithCert1                   "Prod1 with Cert1"
ProdwithCert2                   "Prod1 with Cert1, Cert2"
ProdwithCert3                   "Prod1 with Cert1, Cert2, Cert3"
ProdwithCert4                   "Prod2 with Cert1, Cert2"
ProdwithCert5                   "Prod2 with Cert1, Cert2, Cert3" 
```

**以下是约束：**

1.  不能有重复项，例如上表，`ProdwithCert6 - "Prod2 with Cert1, Cert2, Cert3"`是不允许的
2.  `Product`至少有一个`Certification`

如何`ProdwithCert`在 SQL Server 2005 中正确建模关系？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:10:34.827

第一个要求可以通过在`ProdwithCert`上具有主键（或唯一索引）的表来满足`(ProductId, CertId)`。

第二个要求不能使用键或检查约束来强制执行。我唯一能想到的就是通过存储过程引导所有修改。该程序可以在一次交易中添加带有证书的产品。

# cuda - 非方阵的二维内核调用和启动参数

> ID：11814251
> 
> 赞同：1
> 
> 时间：2012-08-05T05:40:02.280
> 
> 标签：cuda, 2d, nested-loops, flatten

我正在尝试将以下（简化的）嵌套循环移植为 CUDA 2D 内核。数据集的大小将随着更大的数据集`NgS`而增加；`NgO`现在我只想让这个内核为所有值输出正确的结果：

```
// macro that translates 2D [i][j] array indices to 1D flattened array indices
#define idx(i,j,lda) ( (j) + ((i)*(lda)) )

int NgS  = 1859;
int NgO  = 900;

// 1D flattened matrices have been initialized as:
 Radio_cpu = new double [NgS*NgO];
Result_cpu = new double [NgS*NgO];
// ignoring the part where they are filled w/ data

for (m=0; m<NgO; m++) {        
    for (n=0; n<NgS; n++) {
            Result_cpu[idx(n,m,NgO)]] = k0*Radio_cpu[idx(n,m,NgO)]];
    }
} 
```

我遇到的示例通常处理方形循环，与 CPU 版本相比，我无法获得所有 GPU 数组索引的正确输出。这是调用内核的主机代码：

```
dim3 dimBlock(16, 16);
dim3 dimGrid;
dimGrid.x = (NgO + dimBlock.x - 1) / dimBlock.x;
dimGrid.y = (NgS + dimBlock.y - 1) / dimBlock.y;

// Result_gpu and Radio_gpu are allocated versions of the CPU variables on GPU
trans<<<dimGrid,dimBlock>>>(NgO, NgS, k0, Radio_gpu, Result_gpu); 
```

这是内核：

```
__global__ void trans(int NgO, int NgS,
                      double k0, double * Radio, double * Result) {

int n = blockIdx.x * blockDim.x + threadIdx.x;
int m = blockIdx.y * blockDim.y + threadIdx.y;

if(n > NgS || m > NgO) return;

// map the two 2D indices to a single linear, 1D index
int grid_width = gridDim.x * blockDim.x;
int idxxx = m + (n * grid_width);

Result[idxxx] = k0 * Radio[idxxx];
} 
```

使用当前代码，我继续将`Result_cpu`变量与`Result_gpu`复制回来的变量进行比较。当我循环浏览我得到的值时：

```
 // matches from NgS = 0...913
    Result_gpu[NgS = 913][NgO = 0]: -56887.2
    Result_cpu[Ngs = 913][NgO = 0]: -56887.2

    // mismatches from NgS = 914...1858
    Result_gpu[NgS = 914][NgO = 0]: -12.2352
    Result_cpu[NgS = 914][NgO = 0]: 79448.6 
```

无论 的值如何，这种模式都是相同的`NgO`。我一直试图通过查看各种示例并尝试更改来找出我犯了错误的地方，但到目前为止，这个方案已经有效地减去了手头的明显问题，而其他方案已经导致内核调用错误/离开GPU 数组未对所有值进行初始化。由于我显然看不到错误，如果有人能指出我正确的方向来解决问题，我将不胜感激。我很确定它就在我的鼻子下面，我看不到它。

万一这很重要，我正在 Kepler 卡上测试此代码，使用 MSVC 2010、CUDA 4.2 和 304.79 驱动程序进行编译，并使用两者`arch=compute_20,code=sm_20`和`arch=compute_30,code=compute_30`标志编译代码，没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T11:09:18.720

@vaca_loca：我测试了以下内核（它也适用于非方形块尺寸）：

```
__global__ void trans(int NgO, int NgS,
                  double k0, double * Radio, double * Result) {

int n = blockIdx.x * blockDim.x + threadIdx.x;
int m = blockIdx.y * blockDim.y + threadIdx.y;
if(n > NgO || m > NgS) return;
int ofs = m * NgO + n;
Result[ofs] = k0 * Radio[ofs];
}

void test() {

int NgS  = 1859, NgO  = 900;
int data_sz = NgS * NgO, bytes = data_sz * sizeof(double);
cudaSetDevice(0);
double *Radio_cpu = new double [data_sz*3],
    *Result_cpu = Radio_cpu + data_sz,
    *Result_gpu = Result_cpu + data_sz;
double k0 = -1.7961233;

srand48(time(NULL));
int i, j, n, m;
for(m=0; m<NgO; m++) {
  for (n=0; n<NgS; n++) {
        Radio_cpu[m + n*NgO] = lrand48() % 234234;
        Result_cpu[m + n*NgO] = k0*Radio_cpu[m + n*NgO];
    }
}

double *g_Radio, *g_Result;
cudaMalloc((void **)&g_Radio, bytes * 2);
g_Result = g_Radio + data_sz;
cudaMemcpy(g_Radio, Radio_cpu, bytes, cudaMemcpyHostToDevice);

dim3 dimBlock(16, 16);
dim3 dimGrid;
dimGrid.x = (NgO + dimBlock.x - 1) / dimBlock.x;
dimGrid.y = (NgS + dimBlock.y - 1) / dimBlock.y;

trans<<<dimGrid,dimBlock>>>(NgO, NgS, k0, g_Radio, g_Result);

cudaMemcpy(Result_gpu, g_Result, bytes, cudaMemcpyDeviceToHost);

for(m=0; m<NgO; m++) {
    for (n=0; n<NgS; n++) {
        double c1 = Result_cpu[m + n*NgO],
                c2 = Result_gpu[m + n*NgO];
        if(std::abs(c1-c2) > 1e-4)
            printf("(%d;%d): %.7f %.7f\n", n, m, c1, c2);
    }
}
cudaFree(g_Radio);
delete []Radio_cpu;
} 
```

但是，在我看来，使用四边形从全局内存中访问数据可能对缓存不太友好，因为访问步幅非常大。如果您的算法在 2D 局部性中访问数据至关重要，您可能会考虑使用 2D 纹理

# ruby-on-rails - ActiveRecord - 检查值是否为空、0 或 1

> ID：11814254
> 
> 赞同：0
> 
> 时间：2012-08-05T05:40:23.350
> 
> 标签：ruby-on-rails, ruby, activerecord

```
Rails 3.2.2, Ruby 1.9.2 
```

我正在使用 MySql，并且有 TINYINT 类型的列“MyColumn”。我需要在页面上显示它的状态。所以我创建了一个辅助方法。

```
module MyControllerHelper
 def result(a)
    case a
      when false then 'false 0'
      when true then 'true 1'
      when blank? then 'blank or nil'
    end     
  end
end 
```

底线是它也可以为空或 nil。所以它不能按我的需要工作。它会不断地返回或者返回，`false 0`但即使它应该返回也`true 1`永远不会返回。`blank or nil`我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T06:23:58.803

A`case`用于`===`比较，因此相当于：

```
if false === a
  'false 0'
elsif true === a
  'true 1'
elsif blank? === a
  'blank or nil'
else
  nil
end 
```

Rails`blank?`向 Object 添加了一个方法，[如下所示](https://github.com/rails/rails/blob/2a371368c91789a4d689d6a84eb20b238c37678a/activesupport/lib/active_support/core_ext/object/blank.rb#L14)：

```
def blank?
  respond_to?(:empty?) ? empty? : !self
end 
```

所以你可以`blank?`在任何地方调用，即使没有指定的接收者：总会有一个`self`，它总是一个对象。现在您应该看到`when blank?`，虽然在语法上有效，但根本没有任何意义：它不会调用`a.blank?`并查看是否返回了真实值，它只是检查发生`self.blank? === a`的任何`self`情况。

您最好`if/else`为此使用显式：

```
def result(a)
  # false.blank? is true so you don't want a.blank? here.
  if(a.nil?)
    'nil'
  elsif(a)
    'true 1'
  else
    'false 0'
  end
end 
```

# windows - 使用选项“/HEAP:1[,10]”指定的无效数字

> ID：11814258
> 
> 赞同：0
> 
> 时间：2012-08-05T05:41:51.563
> 
> 标签：windows, visual-c++, linker, heap-memory

我的 Malloc 在我的项目中失败了。Malloc 通过其中一个函数运行多次，但由于内存不足而失败。

我正在尝试增加我的 VC++ 中的堆大小，但它给了我上述主题中的错误。

有人可以告诉我这有什么问题吗？

Windows server 2003 R2 企业版 我使用的是 VC++ 98 版。

我尝试了一些搜索，但无法获得有关如何使用 /HEAP OPTION 的任何结论。数字应该以 MB 为单位吗？

 `````
message_t* Allocate_momory(MsgType_t msgType, UInt16 dataLength)
{
    // TO DO: Allocate memenory and return the pointer
    message_t* mes_t;
    mes_t = (message_t*) malloc(sizeof (message_t));
    mes_t->msgType = msgType;
    mes_t->dataLength = 0;
    mes_t->clientID = 0;
    mes_t->usageCount = 0;
    mes_t->dataBuf = malloc(sizeof (dataLength));
    return mes_t;
} 
````  `是的，它有效......但不幸的是它没有解决我的 malloc 问题 :( !!这是一个包含太多文件的巨大项目。我无法发布代码，但有人可以指导我如何尝试调试问题malloc 在哪里失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:50:52.700

[/HEAP以](http://msdn.microsoft.com/en-us/library/f90ybzkh.aspx)*字节*为单位设置堆大小。[此外，文档](http://msdn.microsoft.com/en-us/library/f90ybzkh.aspx)中的方括号表示一个可选参数 - 您实际上并没有输入这些参数。所以它会是例如

```
/HEAP:1073741824 
```

对于 1 GB 堆，或

```
/HEAP:1073741824,16777216 
```

如果你真的想指定除了堆大小之外的“提交”参数（你可能不想）。

不幸的是，我认为这不能解决您的*真正*问题，即您的内存不足。您可能有[内存泄漏，您可以使用](https://en.wikipedia.org/wiki/Memory_leak)[valgrind](http://valgrind.org)等工具进行跟踪。如果不是这种情况，那么您的设计就很糟糕，这将比内存泄漏更难修复。``

# android - 如何编辑或附加录音？

> ID：11814265
> 
> 赞同：3
> 
> 时间：2012-08-05T05:43:56.453
> 
> 标签：android, audio, append, edit, recording

我正在 Android 中创建一个应用程序。我的应用程序录制音频并将其存储在 SD 卡上
并以列表格式显示。我做了这一切，但我需要编辑这个音频，就像假设我打开录音
然后我需要从结束重新开始这个录音并能够在那个录音中附加音频。

喜欢：假设我的重新编码“MyRecord01”时间是 04.06 秒，我想在录音中添加更多音频，
那么它必须从 04.07 开始并添加一些音频。

我搜索了很多，但没有找到任何相关的东西。请引导我到任何链接或任何参考。
或者给我任何提示。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:01:15.757

[这](http://www.pastie.org/2165869)是您需要的代码。希望对你有效。

如果我发现您的问题有误，请随时发表评论并告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:04:20.823

这并不太难。关键是要了解您录制的音频是如何格式化的。如果您使用未压缩的格式，如 WAV 或 AIFF，则最简单。这是 WAV 文件格式的（众多）解释之一：[https ://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

如果数据块是最后一个，则大多数 WAV 文件都可以轻松附加（这可能是格式的要求，我无法确定）。如果它不是最后一个，您首先必须复制文件并对其进行修改，以便数据块是最后一个。如果文件很大，这可能是一个耗时的步骤。

完成后，您只需将新音频数据附加到数据块并更新文件中其他位置的一些数据，例如数据块大小（在数据块中）、块大小（在 RIFF 描述符中）和Subchunk1 大小（在 fmt 块中）。（一旦您阅读了解释，这一切对您来说都会更有意义。）您可能希望在追加时对这些数据做一些事情，以便在您的应用程序在追加期间崩溃的情况下很容易修复——您不需要想要破坏用户的数据。

AIFF 的流程类似，但细节上有所不同。

对于 MP3，我不能 100% 确定这将如何工作。如果内存为该过程提供服务，则在概念上更容易，因为 MP3 文件被构造为一系列独立的块，并且每个块都有自己的迷你标头。从理论上讲，您可以附加更多块。但实际上，由于压缩和 ID3 标签之类的原因，它会变得更加复杂。

# ruby-on-rails - 如何将 Evernote API 时间戳转换为 Postgresql 时间戳

> ID：11814269
> 
> 赞同：3
> 
> 时间：2012-08-05T05:45:08.630
> 
> 标签：ruby-on-rails, postgresql, datetime, timestamp, evernote

我正在通过用于 ruby​​ on rails 的 evernote gem 访问 Evernote API，并将对象（笔记本、标签、笔记等）存储在 Postgresql 数据库中。

Evernote 返回如下所示的时间戳：

*   1344141917000
*   1344141967000
*   1344138641000

[evernote api 文档](http://dev.evernote.com/documentation/reference/Types.html#Typedef_Timestamp)说这是自 1970 年 1 月 1 日 00:00:00 GMT 基准时间以来经过的毫秒数

我在 Rails 控制台中进行了以下练习，试图重建日期。

```
evernote_timestamp_base = Time.gm(1970,01,01,00,00,00)
=> 1970-01-01 00:00:00 UTC 
evernote_timestamp_base + 1344138641000
=> 44564-01-22 04:43:20 UTC 
```

绝对不对。但是去掉最后三个零会产生正确的日期：

```
evernote_timestamp_base + 1344138641
=> 2012-08-05 03:50:41 UTC 
```

我在这里错过了什么吗？最后三个零是怎么回事？我是否必须解析和切分evernote timstamp 值，然后将它们添加到 1970 基数中，还是有更简单的方法？

另外，存储这些值的最佳 Postgresql 数据类型是什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T06:04:52.177

在 postgresql 中，您可以使用时间戳 [with|without] 时区作为列的类型。

unix 时间戳定义为自 1970 年 1 月 1 日 00:00:00 GMT 以来的秒数，这是 Ruby 和许多其他系统使用和/或支持的。PostgreSQL 可以为您进行转换。只需以秒为单位将值传递给 to_timestamp 函数。

```
SELECT to_timestamp(1344138641000/1000.0) 
```

要将其转换回使用

```
SELECT EXTRACT(EPOCH FROM col) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T17:56:30.713

要在 Ruby 中执行此操作，请使用 Time.at。您需要除以 1000，因为 Evernote 时间戳以毫秒为单位，而 Ruby/Unix 时间戳以秒为单位。

```
createdNote = noteStore.createNote(authToken, note)
createTime = Time.at(createdNote.created / 1000);
puts "Note was created at #{createTime}" 
```

# google-chrome-extension - chrome 扩展 - 清单版本 2

> ID：11814270
> 
> 赞同：1
> 
> 时间：2012-08-05T05:45:11.220
> 
> 标签：google-chrome-extension

我有一个 chrome 扩展，它引用了 jquery 文件。
这是我的弹出 html（只有 head 标签）：

```
<head>
    <title>My Extention</title>
    <script type="text/javascript" src="http://www.MySite.com/Resources/JS/JQuery/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="MyExtensionScript.js"></script>
</head> 
```

所以在“MyExtensionScript.js”中，我认为我可以使用 jquery，但显然 $ 函数没有定义。
这是我的 manifest.json 文件：

```
{
  "name": "My Test Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Test version of My Extension",
  "browser_action": {
    "default_icon": "test.ico",
    "default_popup": "Test.html"
  },
  "permissions": [
    "cookies",
    "tabs",
    "<all_urls>"
  ]
} 
```

在清单的第 1 版中它可以工作，但现在不行。我尝试使用“web_accessible_resources”并向其中添加“http://www.MySite.com/Resources/JS/JQuery/jquery-1.7.2.min.js”，但这也不起作用。有任何想法吗？
另外，我有一个脚本注入到当前页面并向我返回一条消息（在我的情况下是当前页面的一些 html 源），这种行为是否会受到转换到清单版本 2 的影响？谢谢大家:)

**编辑：**我有一个启用跨域脚本（使用 JSONP）的 Web 应用程序。在我的扩展中，我有一个脚本在我的站点中使用 $.getJSON 调用 Web 服务。现在它不起作用。我很确定它与新的清单版本有关，但我怎样才能再次启用跨域脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:19:23.833

您需要使用本地存储在扩展中的 jQuery 文件，而不是从您的站点中引用。

这是因为 Chrome 严格的[内容安全政策](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)只允许执行本地脚本，没有内联代码。

[Web 可访问资源](http://code.google.com/chrome/extensions/manifest.html#web_accessible_resources)是**您的扩展程序**中可以从 Web 访问的文件，而不是您的扩展程序可以访问的 Web 上的资源。例如，如果您想使用存储在扩展程序中的图像更改页面的背景图像，则必须将该图像添加到清单中的列表中`web_accessible_resouces`。

清单版本的更改不应影响您的内容脚本，除非它们执行了不再允许的操作。[您可以从 Chrome manifestVersion](http://code.google.com/chrome/extensions/manifestVersion.html)文档中看到还有哪些变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:16:22.733

我只是在我的内容脚本中包含 jquery。只要确保在你的脚本之前加载它。

```
{
  "manifest_version": 2,
  "default_title": "Babble",
  "version": "1.2",
  "description": "Chat in your language with friends in their language",
  "default_locale": "en",
  "default_icons": {
    "16": "img/icon16.png",
    "48": "img/icon48.png",
    "128": "img/icon128.png"
  },

  "content_scripts":[
    {
        "matches": ["http://mail.google.com/*", "https://mail.google.com/*"],
        "css" : ["css/style.css"],
        "js" : ["js/jquery.js" , "js/translate.js" , "js/jquery.cookie.js"]
    }
  ]
} 
```

# java - 内部类以及如何访问它们

> ID：11814273
> 
> 赞同：0
> 
> 时间：2012-08-05T05:46:07.200
> 
> 标签：java, class, nested, inner-classes

我有一个名为 out1 的嵌套类的以下代码

```
 class sample{
    public int a=5;

    class out1{

        void main1(){
            System.out.println("this is out1");
        }

    }

    void call(){
        //access main1() method on class out1 
    }       

}

public class innerclass{
    public static void main(String args[]){
        sample ob=new sample();
        System.out.println(ob.a);// access field a on class sample 

        //access call() on class sample

}   
 } 
```

有谁知道如何访问内部类 out1，是否可以在不使用类示例的 call() 方法的情况下访问这个内部类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:02:52.470

您可以将内部类 out1 对象创建为

```
 ob.new out1(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:38:02.760

您可以通过内部的outer.new 的new 来访问内部类。要从外部类调用内部类方法，您需要创建内部类的对象。否则，您必须使内部类以及方法静态。

```
class Sample{
public int a=5;

class Out1{

    void main1(){
        System.out.println("this is out1");
    }

}

void call(){
    new Out1().main1();
}       

}

public class Innerclass{
public static void main(String args[]){
    Sample ob=new Sample();
    System.out.println(ob.a);// access field a on class sample
    Sample.Out1 out1=new Sample().new Out1();
    Out1.main1();
    ob.call();
    //access call() on class sample

}   
} 
```

按照惯例，类名应以大写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T06:08:55.727

这是我如何访问内部类的方式。我在类示例中创建了一个 get 方法，它返回类 out1 的对象：

```
public class innerclass {

public static void main(String args[]) {
    sample ob = new sample();
    ob.getOut1().call(); // calling the call() method in innerclass out1
}
}

class sample {

public int a = 5;

out1 getOut1() {
    return new out1();
}

class out1 {

    public void main1() {
        System.out.println("this is out1");
    }

    public void call() {
        main1();
    }
}
} 
```

并尝试使用大写字母创建类，并使用驼峰式，例如：Sample、InnerClass、Out1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T06:25:12.790

内部类可以是静态的。
如果你没有将你的内部类定义为静态的，那么你必须创建它的一个实例（一个对象）才能使用它。

这是静态和成员（非静态）类的示例用例：

```
public class Tester {

    public static void main() {
        Outer outerTest = new Outer();
        outerTest.test();
        outerTest.publicInnerInstance.sayHello();
        Outer.InnerStaticClass.sayHello();
    }

}

class Outer{

    class InnerMemberClass{
        public void sayHello(){
            System.out.println("Hello");
            System.out.println("I'm an instance of 'InnerMemberClass'.");
        }
    }

    static class InnerStaticClass{
        public static void sayHello(){
            System.out.println("Hello.");
            System.out.println("I'm a static class 'InnerStaticClass'.");
        }
    }

    public InnerMemberClass publicInnerInstance;

    //'Outer' constructor
    public void Outer(){
        publicInnerInstance = new InnerMemberClass();
    }

    public void test(){
        InnerStaticClass.sayHello();
        InnerMemberClass instance = new InnerMemberClass();
        instance.sayHello();
    }
} 
```

# jquery - twitter bootstrap wowslider jquery的问题

> ID：11814276
> 
> 赞同：-1
> 
> 时间：2012-08-05T05:46:45.323
> 
> 标签：jquery, twitter-bootstrap, slider

我使用 twitter bootstrap 设计了一个页面并在其中添加了一个图像滑块（wowslider），现在问题是 wowslider 没有正确转换。听说是链接...

[http://infotechsam.99k.org/quiz.php](http://infotechsam.99k.org/quiz.php)

当我从标题部分中删除它时

```
<link rel="stylesheet" href="css/bootstrap.css" type="text/css" media="screen" /> 
```

滑块工作正常..

在不删除 bootstrap.css 链接的情况下解决此问题的任何方法？我的完整源代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>test</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="css/bootstrap.css" type="text/css" media="screen" />
<link rel="stylesheet" href="css/bootstrap-responsive.css" type="text/css" media="screen" />
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="engine1/style.css" />
<script type="text/javascript" src="engine1/jquery.js"></script>
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">
    <div id="wowslider-container1">
    <div class="ws_images" id="slider"><ul>
<li><img src="data1/images/img1.jpg" alt="ads" title="ads" id="wows1_0"/></li>
<li><img src="data1/images/img2.jpg" alt="debug" title="debug" id="wows1_1"/></li>
<li><img src="data1/images/img3.jpg" alt="paper" title="paper" id="wows1_2"/></li>
<li><img src="data1/images/img4.jpg" alt="quiz" title="quiz" id="wows1_3"/></li>
<li><img src="data1/images/img5.jpg" alt="www" title="www" id="wows1_4"/></li>
</ul></div>
<div class="ws_bullets"><div>
<a href="#" title="ads"><img src="data1/tooltips/img1.jpg" alt="ads"/>1</a>
<a href="#" title="debug"><img src="data1/tooltips/img2.jpg" alt="debug"/>2</a>
<a href="#" title="paper"><img src="data1/tooltips/img3.jpg" alt="paper"/>3</a>
<a href="#" title="quiz"><img src="data1/tooltips/img4.jpg" alt="quiz"/>4</a>
<a href="#" title="www"><img src="data1/tooltips/img5.jpg" alt="www"/>5</a>
</div></div>
<a class="wsl" href="http://wowslider.com">Auto Slider jQuery by WOWSlider.com v2.4</a>
    <div class="ws_shadow"></div>
    </div>

    <script type="text/javascript" src="engine1/wowslider.js"></script>
    <script type="text/javascript" src="engine1/script.js"></script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T12:29:26.477

看来，引导规则`img { max-width: 100%; }`是负责任的。

将其添加到您的 css 中：

```
.ws_effect img { max-width: inherit!important; } 
```

# sql-server - XSL - GML 到 json

> ID：11814277
> 
> 赞同：2
> 
> 时间：2012-08-05T05:46:46.793
> 
> 标签：sql-server, xml, xslt

我正在开发一个需要将 SQL 地理类型转换为 json 数组的项目。此时我选择的方法是使用 AsGML 选择 SQL 地理（给我一个 GML 表示）。

我正在使用 xslt 将生成的 GML 转换为我需要的 json 格式。

我不是 xslt 的专家——这可能是一个简单的问题。

我现在遇到的问题是 posList 元素的返回有一个尾随逗号，我无法从最终结果中删除它。

在此先感谢您的帮助 - 示例代码如下：

XSL：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:template match="MultiSurface">
<MultiGeometry>
<xsl:apply-templates />
</MultiGeometry>
</xsl:template>
<xsl:template match="Polygon">
<Polygon>
<xsl:apply-templates />
</Polygon>
</xsl:template>
<xsl:template match="Point">
<Point>
<xsl:apply-templates />
</Point>
</xsl:template>
<xsl:template match="exterior">
{"ringtype":"exterior",
<xsl:apply-templates />
},
</xsl:template>
<xsl:template match="interior">
{"ringtype":"interior",
<xsl:apply-templates />
},
</xsl:template>
<xsl:template match="posList">
"coordinates":[
<xsl:call-template name="split">
<xsl:with-param name="str" select="normalize-space(.)" />
</xsl:call-template>
]
</xsl:template>
<xsl:template match="pos">
<coordinates>
<xsl:call-template name="split">
<xsl:with-param name="str" select="normalize-space(.)" />
</xsl:call-template>
</coordinates>
</xsl:template>
<xsl:template name="split">
<xsl:param name="str" />
<xsl:choose>
<xsl:when test="contains($str,'' '')">
<xsl:variable name="first">
<xsl:value-of select="format-number(number(substring-before($str,'' '')),''00.000000'')" />
</xsl:variable>
<xsl:variable name="second">
<xsl:value-of select="format-number(number(substring-before(substring-after(concat($str,'' ''),'' ''),'' '')),''00.000000'')" />
</xsl:variable>
<xsl:value-of select="concat(''['',$first,'','',$second,''],'')" />
<xsl:call-template name="split">
<xsl:with-param name="str">
<xsl:value-of select="substring-after(substring-after($str,'' ''),'' '')"/>
</xsl:with-param>
</xsl:call-template>
</xsl:when>
</xsl:choose>
</xsl:template>
</xsl:stylesheet> 
```

输入示例：

```
<Polygon xmlns="http://www.opengis.net/gml">
  <exterior>
    <LinearRing>
      <posList>32.230546755000034 -95.316506964999917 32.230542547000084 -95.316051441999946</posList>
    </LinearRing>
  </exterior>
</Polygon> 
```

输出示例（注意坐标元素中的尾随逗号）

```
<Polygon>
{"ringtype":"exterior",
"coordinates":[
[32.230547,-95.316507],[32.230543,-95.316051],[32.230536,-95.315358],
]
},
</Polygon> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T21:12:45.497

**我已将您的 xslt（并且有*很多*更正）从无法编译的 xslt 更正为不会产生多余逗号**的 xslt ：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:x="http://www.opengis.net/gml" exclude-result-prefixes="x">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

    <xsl:template match="x:MultiSurface">
        <MultiGeometry>
            <xsl:apply-templates />
        </MultiGeometry>
    </xsl:template>

    <xsl:template match="x:Polygon">
        <Polygon>
            <xsl:apply-templates />
        </Polygon>
    </xsl:template>

    <xsl:template match="x:Point">
        <Point>
            <xsl:apply-templates />
        </Point>
    </xsl:template>

    <xsl:template match="x:exterior">
    <xsl:if test="preceding-sibling::exterior">,</xsl:if>
    {"ringtype":"exterior",
        <xsl:apply-templates />
    }
    </xsl:template>

    <xsl:template match="x:interior">
    {"ringtype":"interior",
        <xsl:apply-templates />
    },
    </xsl:template>

    <xsl:template match="x:posList">
    "coordinates":[
        <xsl:call-template name="split">
            <xsl:with-param name="str" select="normalize-space(.)" />
        </xsl:call-template>
    ]
    </xsl:template>

    <xsl:template match="x:pos">
        <coordinates>
            <xsl:call-template name="split">
                <xsl:with-param name="str" select="normalize-space(.)" />
            </xsl:call-template>
        </coordinates>
    </xsl:template>

    <xsl:template name="split">
        <xsl:param name="str" />
        <xsl:choose>
            <xsl:when test="contains($str,' ')">
                <xsl:variable name="first">
                    <xsl:value-of select="format-number(number(substring-before($str,' ')),'00.000000')" />
                </xsl:variable>
                <xsl:variable name="second">
                    <xsl:value-of select="format-number(number(substring-before(substring-after(concat($str,' '),' '),' ')),'00.000000')" />
                </xsl:variable>
                <xsl:value-of select="concat('[',$first,',',$second,']')" />

                <xsl:if test="substring-after(substring-after($str,' '),' ')">
                 <xsl:text>, </xsl:text>
                    <xsl:call-template name="split">
                        <xsl:with-param name="str">
                            <xsl:value-of select="substring-after(substring-after($str,' '),' ')"/>
                        </xsl:with-param>
                    </xsl:call-template>
                </xsl:if>
            </xsl:when>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Polygon xmlns="http://www.opengis.net/gml">
    <exterior>
        <LinearRing>
            <posList>32.230546755000034 -95.316506964999917 32.230542547000084 -95.316051441999946</posList>
        </LinearRing>
    </exterior>
</Polygon> 
```

**产生了想要的正确结果：**

```
<Polygon>
    {"ringtype":"exterior",

    "coordinates":[
        [32.230547,-95.316507], [32.230543,-95.316051]
    ]

    }
    </Polygon> 
```

# c# - OpenGL 中的油门几何 (OpenTK)

> ID：11814285
> 
> 赞同：0
> 
> 时间：2012-08-05T05:48:21.047
> 
> 标签：c#, opengl, rendering, minecraft, opentk

我一直在使用 OpenTK 库（OpenGL）在 C# 中为 Minecraft Classic 开发客户端，但我遇到了问题。

当客户端收到 SetBlock 数据包时，它会以与放置块时相同的方式绘制块，但是当长方体发生时（每 150 毫秒 1 个块），客户端会滞后，因为它每秒接收的图块更新太多（有时甚至没有反应），有些脸根本没有画出来。

我到处寻找问题，但找不到。我想知道是否限制每个“滴答”的几何图形会解决这个问题？我怎样才能做到这一点？

另外，如果您对可能的原因有任何建议，请告诉我！

这是源代码，如果您需要全部。

[https://github.com/GlennMR/800Craft-Client](https://github.com/GlennMR/800Craft-Client)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:01:23.917

您可以尝试[剔除](http://www.opengl.org/archives/resources/faq/technical/clipping.htm)块的内表面以提高性能或使用[常见的体素渲染优化技术](http://www.java-gaming.org/topics/minecraft-voxel-performance/26097/view.html)。

# python - 为什么我不能将 urllib2.urlopen 用于维基百科站点？

> ID：11814287
> 
> 赞同：1
> 
> 时间：2012-08-05T05:48:41.610
> 
> 标签：python, networking, network-programming, wikipedia

> **可能重复：**
> [使用 Python 获取 Wikipedia 文章](https://stackoverflow.com/questions/120061/fetch-a-wikipedia-article-with-python)

```
>>> print urllib2.urlopen('http://zh.wikipedia.org/wiki/%E6%AF%9B%E6%B3%BD%E4%B8%9C').read()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 403: Forbidden 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T06:19:46.547

您需要提供一个用户代理[，否则您将获得 403](http://www.mediawiki.org/wiki/API#Identifying_your_client)，就像您所做的那样。

> 在 Wikimedia wiki 上，如果您不提供 User-Agent 标头，或者您提供空的或通用的标头，您的请求将失败并出现 HTTP 403 错误。[请参阅我们的用户代理政策](http://meta.wikimedia.org/wiki/User-Agent_policy)。其他 MediaWiki 安装可能有类似的政策。

因此，只需将用户代理添加到您的代码中，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T06:00:06.297

尝试下载带有`wget`of的页面`cURL`。
如果你不能，那么你可能有网络问题。
如果可以，那么维基百科可能会阻止某些用户代理。在这种情况下，使用 urllib2 的[add_header](http://docs.python.org/library/urllib2.html#urllib2.Request.add_header)来定义自定义用户代理（模仿浏览器请求）。

# c++ - 涉及 const 时无法专门化模板

> ID：11814289
> 
> 赞同：0
> 
> 时间：2012-08-05T05:48:50.863
> 
> 标签：c++, visual-c++

我正在处理一个模板，它非常简单。这是当前的结构：

```
//primary template
template<typename T> 
const T bit_cast(const BitExpr* p);    

//specialization
template<> 
inline const BitBinExpr* bit_cast<BitBinExpr*>(const BitExpr* p) {
    if (p->type == XOR || p->type == AND)
        return static_cast<const BitBinExpr*>(p);
    return nullptr;
}
// more specializations follow 
```

但 Visual Studio 坚持认为这是无效的。但是，当参数和返回类型*不是* `const`时，这工作得很好。如何说服 VS 接受此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:11:01.640

这似乎最近出现了很多。这两种类型不一样

```
const BitBinExpr* // BitBinExpr is constant 
```

和

```
typedef BitBinExpr* T;
const T           // pointer is constant 
```

也许这就是你要找的

```
template<typename T> const T bit_cast(const BitExpr* p);    
template<> inline const BitBinExpr *const bit_cast<const BitBinExpr *const>(const BitExpr* p) {
    if (p->type == XOR || p->type == AND)
        return static_cast<const BitBinExpr*>(p);
    return nullptr;
} 
```

# c# - C# 中的列表<> .Tag 值

> ID：11814294
> 
> 赞同：0
> 
> 时间：2012-08-05T05:50:25.280
> 
> 标签：c#, list

我有一个 List<> 集合，其中包含一堆图像。列表中的每个对象都有一个字符串类型的 .Tag 值。

这些对象只是草莓、香蕉或桌椅等物品的图像......

我想知道如何检查某个字符串是否等同于 List<> 集合中的任何 .Tag 字符串。

我知道我可能可以循环，但是......我不能用`listName.Contains(stringName)`某种方式来限定.Tag吗？

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T06:00:18.573

这个怎么样。

```
listname.Any(x=>x.TagName==stringName) 
```

# jquery - 每次单击触发器时，Jquery 函数都应该重复（但它不会）

> ID：11814295
> 
> 赞同：-1
> 
> 时间：2012-08-05T05:50:41.443
> 
> 标签：jquery, css, function, html

嗯，我有这个漂亮的小网站，它有一个 div，`overflows:hidden`其中的内容不适合包装器。我想`margin-top: $value-120px`每次点击一个 span `class'd .maisfilme`。这就是我得到的

```
 $(document).ready(function (){
$(".maisfilme").on("click", function() {
     var $mtop = $(this).css('margin-top');

        var $vai = (parseInt($mtop)+ 110 + "px");
    $("#filme").css ({
        'margin-top' : "-"+$vai
    });
});
}); 
```

它实际上完成了这项工作。它得到margin-top，增加它的int值+120px，在它之前放一个-，所以，向上滑动div。真正的问题是它只发生一次。`.maisfilme`如果我再次单击，则没有任何反应。
有人可以知道我应该怎么做，每次`.maisfilme`点击该功能都会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:02:32.207

您第二次执行此操作时，它将是 -(-110 + 110)，这不会像您想要的那样增加幅度。如果您希望它每次都变得更负面，则需要更改符号的逻辑。

此外，您正在从 中获取 css `$(this)`，但是将其设置为打开`$("#filme")`它不会每次都上升，除非它们碰巧是同一个对象。每次单击时，它们都必须相同才能累积。

为了让它每次都变得更消极，你可以这样做：

```
$(document).ready(function (){
    $(".maisfilme").on("click", function() {
        var $mtop = $(this).css('margin-top');

        var $vai = (parseInt($mtop) - 110) + "px";
        $(this).css ({
            'margin-top' : $vai
        });
    });
}); 
```

或稍有不同的版本，如果 margin-top 的初始值不为零（更像您的第一次迭代所做的那样），则会给出稍有不同的结果：

```
$(document).ready(function (){
    $(".maisfilme").on("click", function() {
        var $mtop = $(this).css('margin-top');

        var $vai = (-(Math.abs(parseInt($mtop)) + 110)) + "px";
        $(this).css ({
            'margin-top' : $vai
        });
    });
}); 
```

# java - 在java中执行switch语句时对象不更新

> ID：11814299
> 
> 赞同：2
> 
> 时间：2012-08-05T05:51:22.237
> 
> 标签：java, switch-statement

不知道我在这里做错了什么。但我想将卡更改为正确的格式。

例如，给定卡片 1c 将其更改为 AC。

这是我一直在玩的一些代码：

```
public static void main(String[] args) {

    String[] cards = {"1c", "13s"};

    for (String card : cards) {

        switch (card.toUpperCase()) {
            case "1C":
                card = card.toUpperCase().replace("1C", "AC");
                break;
            case "13S":
                card = card.toUpperCase().replace("13S", "KS");
                break;
            default:
                System.out.println(Arrays.toString(cards));
        }
    }
    System.out.println(Arrays.toString(cards));

} 
```

任何帮助都将是极大的欢呼。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T05:55:56.490

在循环中，`card`只是一个局部变量，重新分配它不会修改数组`cards`。一个直接的解决方法是对数组进行索引，以便您可以直接引用每个元素：

```
for (int i = 0; i < cards.length; i++) {
    switch (cards[i].toUpperCase()) {
        case "1C":
            cards[i] = cards[i].toUpperCase().replace("1C", "AC");
            break;
        case "13S":
            cards[i] = cards[i].toUpperCase().replace("13S", "KS");
            break;
        default:
            System.out.println(Arrays.toString(cards));
    }
} 
```

**编辑：**要回答 edhedges 的评论，需要在循环外保留一个计数器变量，以便继续使用增强的 for 语法：

```
int i = 0;
for (String card : cards) {
    switch (card.toUpperCase()) {
        case "1C":
            cards[i] = card.toUpperCase().replace("1C", "AC");
            break;
        case "13S":
            cards[i] = card.toUpperCase().replace("13S", "KS");
            break;
        default:
            System.out.println(Arrays.toString(cards));
    }
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:54:32.620

您使用的是 Java 7 吗？如果不是，则不能`String`在 s 中使用`case`s。

[请参阅此问题](https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java)和[此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)（向下滚动到在 switch 语句中使用字符串）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T05:59:55.070

您可以通过以下代码执行此操作

```
public static void main(String[] args) {

    String[] cards = {"1c", "13s"};

    for (int i = 0 ; i < cards.length ; i++) {

        switch (card[i].toUpperCase()) {
            case "1C":
                cards[i] = cards[i].toUpperCase().replace("1C", "AC");
                break;
            case "13S":
                cards[i] = cards[i].toUpperCase().replace("13S", "KS");
                break;
            default:
                System.out.println(Arrays.toString(cards));
        }
    }
    System.out.println(Arrays.toString(cards));

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T06:22:23.530

除了@Paul Borella 的回答，我想说这只有在 Java 7 中才有可能。因为 Switch 语句不允许 String 作为表达式。所以你应该在行得到编译错误

```
switch(card.toUpperCase()) 
```

如果您想获得相同的功能，那么您可以选择 Enum。

```
public enum Cards {
 1C, 13S;

   public String replacedString(){
     case 1C : return "AC";
               break;

     case 13S : return "KS";
                break;

     default : return "";
   }    
} 
```

# html - 为什么文字环绕浮动图像？

> ID：11814300
> 
> 赞同：0
> 
> 时间：2012-08-05T05:51:27.913
> 
> 标签：html, css

如您所知，当我们浮动 HTML 元素时，我们会将其从正常流程中移除，而其他元素则表现得好像根本没有元素一样，它们只是看不到它。但是为什么文本开始环绕浮动图像，不是应该在图像下方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:00:17.677

您似乎将*绝对定位*与*流布局*混淆了。浮动元素向左/向右移动，文本通过环绕来尊重它们*。*

# wordpress - Wordpress 隐藏插件菜单页面

> ID：11814301
> 
> 赞同：0
> 
> 时间：2012-08-05T05:51:47.207
> 
> 标签：wordpress

我有这个问题，我有一个插件，它有两个子菜单：Escape Submitter 和 Event Submitter。但问题是我创建了这样的插件页面：

```
add_action( 'admin_menu', 'my_plugin_menu' );

function my_plugin_menu() {

     add_menu_page('Submission Requests', "Submission Requests", 'add_users',"submission-requests/show.php",'',PRO_URL."/images/icon.png",27);
        add_submenu_page( 'submission-requests/show.php', "Escape Submitter", "Escape Submitter", 'manage_options', 'escape_submit','escapeSub'  ); 
        add_submenu_page( 'submission-requests/show.php', "Event Submitter", "Event Submitter", 'manage_options', 'event_submit','eventSub'  );      

} 
```

它在 Wordpress 插件页面中看起来像这样

![插件菜单外观](../Images/a222ccb021684fa5b4deeecb049efcd1.png)

但问题是我不想添加主菜单页面“提交请求”以显示在主菜单中，我只想看到这样的内容：

![真正的插件外观应该是这样的](../Images/023ac71998effb3c713760c1b69b5e58.png)

我该怎么做才能调用其他类型的`add_menu_page`函数？还是我必须给它一些参数。因为我想在用户单击我的插件时将 Escape Submitter 显示为第一页。

PS：对不起我的英语不好，我希望你理解这个问题，请忘记那些菜单名称后面的那些编号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:56:26.080

您 add_menu_page slug 和您的第一个 add_submenu_page slug 需要相同。

例如：

```
public function RWSDevBlip_add_admin_menu() {
    add_menu_page('Blip.tv Interface','Blip.tv API','manage_options','rwsdev-blip',array($this,'RWSDevBlip_admin_page'),$this->pluginurl.'images/RWSDevBlip.png',3);
    add_submenu_page('rwsdev-blip','Blip.tv Interface Options','Settings','manage_options','rwsdev-blip',array($this,'RWSDevBlip_admin_page'));
    add_submenu_page('rwsdev-blip','Blip.tv Interface Upload','Upload','manage_options','rwsdev-blip-upload',array($this,'RWSDevBlip_upload_page'));
    add_submenu_page('rwsdev-blip','Blip.tv Interface Videos','Videos','manage_options','rwsdev-blip-videos',array($this,'RWSDevBlip_videos_page'));
} 
```

希望这可以帮助。

# css - CSS3 过渡在移动设备上不正确触发

> ID：11814306
> 
> 赞同：1
> 
> 时间：2012-08-05T05:53:28.273
> 
> 标签：css, css-transitions

我正在处理一个非常简单的菜单，它在桌面上运行得非常好，但是，当我在移动设备上测试它时，从主屏幕到 2 似乎一直触发到 2.1（见下面的导航）。

```
<nav id="megamenu">
    <h2>asdasdasdasd 1</h2>
    <h2>asdasdasdasd 2</h2>
    <div>
        <h2>asdasdasdasd 2.1</h2>
        <div>
            <h2>asdasdasdasd 2.1.1</h2>
            <h2>asdasdasdasd 2.1.2</h2>
            <h2>asdasdasdasd 2.1.3</h2>
            <h2>asdasdasdasd 2.1.4</h2>
            <h2>asdasdasdasd 2.1.5</h2>
        </div>

        <h2>asdasdasdasd 2.2</h2>
        <h2>asdasdasdasd 2.3</h2>
        <h2>asdasdasdasd 2.4</h2>
        <h2>asdasdasdasd 2.5</h2>
    </div>

    <h2>asdasdasdasd 3</h2>
    <h2>asdasdasdasd 4</h2>    
    <h2>asdasdasdasd 5</h2>
</nav>​ 
```

我不知道是我没有完全理解 CSS 过渡，还是什么。对于所有有趣的细节，这里有一个小提琴：http: [//jsfiddle.net/kjjgQ/](http://jsfiddle.net/kjjgQ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:52:25.983

解决了。我最终为 div 设置了一个过渡位置，而不是左侧。

# events - 有什么方法可以在 Matlab 中的某个点上悬停时触发回调函数？

> ID：11814308
> 
> 赞同：2
> 
> 时间：2012-08-05T05:53:54.387
> 
> 标签：events, matlab, mouse

我正在使用一个 while 循环，在其中我在 MATLAB 中添加 ginput 来捕获鼠标的位置。我每次检查返回的位置是否在某个区域内，所以我会在当前图形上绘制一些曲线。但问题是，通过使用 ginput，我必须在返回位置之前按 enter。是否有任何方法可以捕获鼠标事件，以便当当前光标悬停在某些点上时，将触发回调函数？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T06:03:17.923

由于您已经有一个正在使用的图形，您可以为该图形设置监听属性：

```
set(gcf,'WindowButtonMotionFcn', @mouseMoveListener); 
```

但是现在您必须创建一个名为“mouseMoveListener”的函数（如果您想将其命名为其他名称，请将@ 符号后面的单词更改为您想要的任何名称，并确保实际的事件函数也被命名）。

在您的函数`mouseMoveListener`中，您现在可以获得鼠标坐标：

```
MousePos = get(mainAxis,'CurrentPoint'); 
```

它告诉鼠标相对于轴坐标的当前点。从那里，您可以使用任何 if 语句检查该位置是否在您想要的位置，并根据该信息执行您想要的任何任务。

# java - 带有图像的奇怪 FileNotFoundException

> ID：11814319
> 
> 赞同：1
> 
> 时间：2012-08-05T05:57:06.600
> 
> 标签：java, eclipse, eclipse-plugin, filenotfoundexception

所以我为我的 Eclipse 视图插件制作了几张图片。完美运行。第二天我醒来，程序现在告诉我它再也找不到这些文件了。这些文件肯定仍然在我离开它们的同一个地方，而且我在 24 小时内没有碰过代码。我已经搞砸了一个小时，我什至不知道从哪里开始调试这个，因为我的程序昨天很好。

Sample.gif 位于我插件的“图标”文件夹中。我已经尝试将它移动到 src 文件夹，但这也不起作用。

错误信息：

```
org.eclipse.swt.SWTException: i/o error (java.io.FileNotFoundException: sample.gif (No such file or directory)) 
```

代码（当我删除这一行和所有使用 testImage 的代码行时，插件会再次运行）：

```
Image testImage = new Image(null, "sample.gif"); 
```

任何人都知道可能导致这种情况的原因，或者我可以为某人提供哪些信息来指导我如何调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:38:05.340

问题很可能与当前目录的位置有关。当您使用“sample.gif”之类的路径名时，打开文件时的正常行为是查看当前目录。如果您使用不同的当前目录运行应用程序，应用程序将在不同的位置查找文件。

* * *

> 然而，我对当前的目录概念感到困惑

以下是一些描述该概念的页面：

*   [http://en.wikipedia.org/wiki/Working_directory](http://en.wikipedia.org/wiki/Working_directory)
*   [http://www.linfo.org/current_directory.html](http://www.linfo.org/current_directory.html)

> 图片应该去哪里？

如果您只打算在 Eclipse 中运行您的应用程序，那么您可以将它们放在任何地方……并确保您的应用程序的 Eclipse 启动器配置将当前目录设置为一致的位置。（您当前的问题很可能是由于应用程序启动器使用了父 Eclipse 的当前目录，这可能取决于您在启动 Eclipse 时所处的位置......请参阅上面的链接页面。）

如果您打算以某种形式导出构建的应用程序以便用户可以在 Eclipse 之外使用它，那么答案取决于应用程序的性质以及它将如何安装在用户的计算机上。（可能的解决方案是将图像放入应用程序的 JAR 文件中，并使用 ClassLoader.getResource 方法通过类路径定位它们。）

# php - OAuth 在一台主机上失败

> ID：11814320
> 
> 赞同：3
> 
> 时间：2012-08-05T05:57:36.003
> 
> 标签：php, linux, macos, zend-framework, oauth

这是我的代码：

```
$key = "xxx";
$secret = "xxx";
$url = "https://oauth.withings.com/account";

$config = array(
    "siteUrl" => $url,
    "consumerKey" => $key,
    "consumerSecret" => $secret,
    "requestMethod" => "GET"
);
$consumer = new Zend_Oauth_Consumer($config);

try {
    $token = $consumer->getRequestToken();
} catch (Zend_Oauth_Exception $e){
    print $e;
} 
```

当我在我的 Mac（OSX 10.8、PHP 5.3.13、Zend 1.11.12）上运行它时，它可以正常工作。

但是当我在我的 Linux 服务器（Debian 6.0.5、PHP 5.3.3、Zend 1.10.6）上运行它时，它失败了。Zend 文档很薄，但是在 1.10 和 1.11 之间是否发生了使相同代码失败的事情？错误信息如下：

“异常 'Zend_Oauth_Exception' 带有消息'无法从令牌 URL 检索有效的令牌响应：'”

该错误似乎表明没有发送任何 URL。现在，Zend 1.10 和 1.11 的“siteUrl”配置选项似乎相同，所以不可能是这样，对吧？

在我的 Linux 主机上手动构建 URL 并使用 CURL 时，我得到了正确的响应，因此它不会是网络或阻塞问题。

当将 URL 更改为“/accounts”时（即使其成为不正确的 URL），它使用此代码为 Mac 和 Linux 返回 HTML 404 代码。

我在这里不知所措。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:10:53.670

I found the exception in the code for `Zend_Oauth_Http` it seems as tho the response is failing a scheme check, you might want to explicitly set the scheme.

the code:

```
 /**
     * Manages the switch from OAuth request scheme to another lower preference
     * scheme during a request cycle.
     *
     * @param  Zend_Http_Response
     * @return void
     * @throws Zend_Oauth_Exception if unable to retrieve valid token response
     */
    protected function _assessRequestAttempt(Zend_Http_Response $response = null)
    {
        switch ($this->_preferredRequestScheme) {
            case Zend_Oauth::REQUEST_SCHEME_HEADER:
                $this->_preferredRequestScheme = Zend_Oauth::REQUEST_SCHEME_POSTBODY;
                break;
            case Zend_Oauth::REQUEST_SCHEME_POSTBODY:
                $this->_preferredRequestScheme = Zend_Oauth::REQUEST_SCHEME_QUERYSTRING;
                break;
            default:
                require_once 'Zend/Oauth/Exception.php';
                throw new Zend_Oauth_Exception(
                    'Could not retrieve a valid Token response from Token URL:'
                    . ($response !== null
                        ? PHP_EOL . $response->getBody()
                        : ' No body - check for headers')
                );
        }
    } 
```

Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:43:41.267

404 表示未找到，因此服务器无法为 URL 提供文档，不应该与 auth 有任何关系... Auth failures 应该是 403。如果您只在 auth on 的情况下获得 404，则 404 可能是在重定向...您应该尝试使用 Charles 代理或类似的代理来调试请求。

编辑我重读并看到 404 是故意的......我仍然会尝试调试请求

# javascript - Javascript 键码在 Firefox 中不起作用，但在 chrome 中运行良好

> ID：11814323
> 
> 赞同：1
> 
> 时间：2012-08-05T05:58:52.680
> 
> 标签：javascript

我只是在进行表单验证，其中电话号码必须是数字！该代码在 chrome 中运行良好，但在 Firefox 和 IE 中运行良好。请给我一些解决方案

我的代码如下

```
function noLet(event) {
    if (event.keyCode == 46 || event.keyCode==8 || event.keyCode > 47 && event.keyCode <      58) {
        event.returnValue = true;
    } 
    else {
        event.returnValue = false;
    }
} 
```

HTML：

```
 onkeypress="noLet(e)"><label id="mobph"></label><font 

size="1"><br>Max 10 numbers only allowed!</font> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-17T16:12:19.837

我可以建议以下代码来解决您的问题。这就是我正在做的事情。在 IE 和 chrome 和 firefox 中测试和工作就像一个魅力：

```
//return numbers and backspace(charCode == 8) only
function noLet(evt) {
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (charCode >= 48 && charCode <= 57 || charCode == 8)
        return true;
    return false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T06:08:02.250

您可以使用键/字符代码来检测按下的键是数字还是非数字。首先，您必须检测跨浏览器的键/字符代码**（请记住`event.keypress`用作您的事件以*进一步*确保兼容性）**。之后，将其从十进制值转换为字符。然后，您可以将其解析为整数，如果函数内的第一个值无法解析为 int，则使用`parseInt()`which 将返回。`NaN`如果是，则阻止默认操作`NaN`。

```
var numbersOnly = function(e){
    var charCode = (typeof e.which === "number") ? e.which : e.keyCode,
        chr = String.fromCharCode(charCode);
    if(isNaN(parseInt(chr, 10))) e.preventDefault();
}

<input type="text" name="phoneNumber" onkeypress="numbersOnly(event);"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T06:12:38.257

因为至少在 Firefox 上，它`charCode`不在`keyCode`按键处理程序中，并且“returnValue”被忽略（调用`preventDefault()`以停止插入）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-18T11:59:11.890

存在浏览器兼容性问题。这是我在一些`RND`. 希望它会以某种方式对您有所帮助；[点击这里](https://stackoverflow.com/a/43470694/6733426)

# python - 对 Tastypie API 的 POST 请求出错

> ID：11814333
> 
> 赞同：2
> 
> 时间：2012-08-05T06:00:34.633
> 
> 标签：python, django, django-south, tastypie

当我向 Tastypie API 发出 POST 请求时出现以下错误：

```
{"error_message": "", "traceback": "Traceback (most recent call last):\n\n File \"/home/kelp/lib/python2.7/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 195, in wrapper\n response = callback(request, *args, **kwargs)\n\n File \"/home/kelp/lib/python2.7/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 407, in dispatch_list\n return self.dispatch('list', request, **kwargs)\n\n File \"/home/kelp/lib/python2.7/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 436, in dispatch\n response = method(request, **kwargs)\n\n File \"/home/kelp/lib/python2.7/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 1194, in post_list\n updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))\n\n File \"/home/kelp/webapps/goals/goals/main/api.py\", line 191, in obj_create\n bundle = super(JoinedGoalResource, self).obj_create(bundle, request, user=request.user)\n\n File \"/home/kelp/lib/python2.7/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 1839, in obj_create\n bundle = self.full_hydrate(bundle)\n\n File \"/home/kelp/lib/python2.7/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 716, in full_hydrate\n value = field_object.hydrate(bundle)\n\n File \"/home/kelp/lib/python2.7/django_tastypie-0.9.11-py2.7.egg/tastypie/fields.py\", line 643, in hydrate\n value = super(ToOneField, self).hydrate(bundle)\n\n File \"/home/kelp/lib/python2.7/django_tastypie-0.9.11-py2.7.egg/tastypie/fields.py\", line 152, in hydrate\n elif self.attribute and getattr(bundle.obj, self.attribute, None):\n\n File \"/home/kelp/webapps/goals/lib/python2.7/django/db/models/fields/related.py\", line 301, in __get__\n raise self.field.rel.to.DoesNotExist\n\nDoesNotExist\n"} 
```

我如何理解这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T06:07:06.917

理解 django 回溯的最好方法是从底部开始向上移动，直到你得到一些属于你的代码。通常 django 非常可靠，通常问题出在您正在做的事情上：

> 文件 \"/home/kelp/webapps/goals/goals/main/api.py\"，第 191 行，在 obj_create\n bundle = super(JoinedGoalResource, self).obj_create(bundle, request, user=request.user)

很可能您正在传递对 create 的引用，并且它试图解决坏对象上的外键关系。

我无法从您发布的内容中看到它，但是您可以查看回溯中的最后一个条目，并查看它正在查看的对象以及它正在访问的不存在的关系。提示是它与您的捆绑对象和错误字段有关。

# .htaccess - 使用 htaccess 拒绝访问子目录

> ID：11814335
> 
> 赞同：2
> 
> 时间：2012-08-05T06:00:43.143
> 
> 标签：.htaccess, apache2

考虑 web 根目录上的这些文件结构：

```
files/1/1.jpg
files/1/2.jpg
files/2/1.jpg
files/2/3.jpg
files/3/6.jpg
files/3/8.jpg
files/4/1.jpg 
```

我想使用 Web 根目录中存在的 htaccess 文件拒绝访问文件夹 2 和 3 中的文件。我尝试但什么也没发生。这是我使用的代码：

```
<FilesMatch "(2|3)\/*$" >
   Order deny,allow
   Deny from all
</FilesMatch> 
```

你会纠正我的错误吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:11:54.763

如果您的 htaccess 文件位于您的 Web 根目录`files`中，并且该目录也在 Web 根目录中，您将无法匹配另一个（子）目录中的文件。您可以尝试将其放入目录`<FilesMatch>`中的 htaccess 文件中`files`，也可以在 Web 根目录的 htaccess 文件中使用 mod_rewrite：

```
RewriteEngine On
RewriteRule ^files/(2|3)/ - [F,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:06:16.817

为了使用 htaccess 获得最佳性能，您应该在要保护的每个目录中创建一个 .htaccess 文件：

```
Order deny,allow
Deny from all 
```

# forth - 如何从 gforth 中的标准输入读取内容并将其存储在变量中？

> ID：11814343
> 
> 赞同：2
> 
> 时间：2012-08-05T06:03:05.157
> 
> 标签：forth

阅读文档后，我尝试了以下代码：

```
 create buff 128 allot
   buff 128 stdin read-line throw 
```

我希望这会让我为 buff 的每个连续地址获得一个字符，但我在那里得到了这个奇怪的数字：

```
buff @  ok
. 3689349013085184353  ok 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:45:54.583

`buff`将`buff`变量的地址放在（数据）堆栈上。该地址的内存包含从 接收的输入`stdin`，如下所示：

```
Address  Value
-------  -----
N+0      0x61
N+1      0x61
N+2      0x61
N+3      0x61
N+4      0x61
N+5      0x33
N+6      0x33
N+7      0x33
...      ... 
```

该`@`字将左边的地址转换为该地址`buff`的整数值。但是，由于您（显然）获得了 64 位`gforth`版本，`@`因此返回了一个 64 位（即 8 字节）值，该值从给定地址开始，即`0x3333336161616161`，它是`3689349013085184353`十进制的。这个`.`词只是向你显示了那个数字。

如果要获取特定*字节*，请使用`c@`代替`@`：

```
buff c@ . 
```

`0x61`这将为您提供缓冲区（或`97`）中第一个字符的代码。如果要获取第二项，请在执行前增加地址`c@`，如下所示：

```
buff 1+ c@ . 
```

同样，这将为您提供第六个字符的代码：

```
buff 5 + c@ . 
```

# javascript - 检测对带有扩展 javascript 的动态下拉框的点击

> ID：11814347
> 
> 赞同：0
> 
> 时间：2012-08-05T06:03:46.450
> 
> 标签：javascript, jquery, html, css, google-chrome-extension

我正在尝试检测对 Javascript 中列表元素的点击 - 但有一个转折。列表元素位于 Quora 搜索栏中的下拉列表中。[www.quora.com](http://www.quora.com) - 具体来说，我想检测用户何时单击添加问题按钮并打开弹出框。

![在此处输入图像描述](../Images/5ab6cf44ac9b9ba343b105388c639d25.png)

弹出框由一些隐藏或动态生成的额外 div 组成。列表的 html 看起来像

```
<li class="addquestionitem" id="__w2_FWrLuSU_list_item_11"> 
```

当我将鼠标悬停在该特定列表元素上时，它变为

```
<li class="addquestionitem selected" id="__w2_FWrLuSU_list_item_11"> 
```

现在，我的代码如下所示：

```
$("li[class='addquestionitem selected']").click(function() {
    $(document).ready(function(){
        alert('this link has been clicked');
        $("div[id$=_publish_checkboxes]").append(element);
    } 
```

但即使是警报也没有出现。有什么建议么？

**更新** 下面发布的解决方案似乎都不起作用。我还使用 quora 主页上的创建板按钮进行了测试，单击该按钮会产生类似的嵌入 css 的弹出窗口。它在那里工作。具体来说，我使用的选择器是：

```
$("a[class='add_content_link action_button icon_action_button']") 
```

真的不明白为什么它不适用于带有添加问题按钮的可比较案例

**更新 2** 这是清单文件。：

```
{
    "name": "A browser action with a popup that changes the page color.",
    "version": "1.0",
    "manifest_version": 2,
    "browser_action": {
        "default_title": "Set this page's color.",
        "default_icon": "icon.png"
    },
    "permissions": [
        "tabs", "http://www.quora.com/*"
    ],
    "background": {
        "page": "popup.html"
    },
    "content_scripts":[
        {
            "matches": ["http://www.quora.com/*"],
            "js": ["jquery.js", "read_in_array.js", "add.js", "popup.js"]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:07:43.053

> 有什么建议么？

您需要将 $.ready 函数包装在其他所有内容上。另外，由于下拉菜单可能是动态构建的，我建议使用[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)。接下来，您的类选择器看起来很奇怪，我认为您也可以简单地省略`selected`该类。

```
$(document).ready(function(){
    $(document).on("click", "li.addquestionitem", function() {
        alert('this link has been clicked');
        $("div[id$=_publish_checkboxes]").append(element);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:05:04.280

试试这个；

```
$(document).ready(function(){
    $('.addquestionitem').live('click', function(){
        alert('this link has been clicked');
        $("div[id$=_publish_checkboxes]").append(element);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T04:26:28.417

如果您查看该元素的事件侦听器（选择该元素，然后在“事件侦听器”的“元素”面板中查看右侧，并查找针对该元素及其鼠标按下的事件），您会注意到它们没有使用单击，但是`mousedown`。所以我猜它发生在你之前，也许他们阻止它冒泡，不确定，但将你的事件更改为`mousedown`它会触发。此外，在 dom 准备好之后，此元素可能无法立即使用（不确定那个），因此您可能必须使用 setTimeout 来继续检查元素、突变观察者或站点特定的东西。

```
// wait for the element to exist then do your thing
var wait = function() {
    if ($("li.addquestionitem").length > 0) {
        console.debug('found it');
        $('.addquestionitem').live('mousedown', function() {
            alert('this link has been clicked');
            $("div[id$=_publish_checkboxes]").append(element);
        });
    } else {
        setTimeout (waiting, 500);
    }
}
wait(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T06:08:30.283

这可能是因为`.click()`事件监听器没有任何东西可以触发，因为它正在等待`$(document).ready()`，这在点击之前已经发生了。

尝试这个：

```
$(document).ready(function(){
    $("li[class='addquestionitem selected']").click(function() {
        alert('this link has been clicked');
        $("div[id$=_publish_checkboxes]").append(element);
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T06:14:30.967

这看起来像是一个需要委托给文档或父容器的事件。您的 click 函数立即被绑定，如果 li 没有 selected 类，它将不会被绑定。因此，要通过父级收听点击，请执行以下操作：

```
$(document).ready(function(){
    $("#__w2_FWrLuSU_results_list").on("click", "li.addquestionitem", function()
    {
        alert('this link has been clicked');
        $("div[id$=_publish_checkboxes]").append(element);
    });
} 
```

# c# - 尝试设置 Label.Text 导致 NullReferenceException

> ID：11814348
> 
> 赞同：-4
> 
> 时间：2012-08-05T06:04:30.430
> 
> 标签：c#, winforms, label, nullreferenceexception

我正在尝试更改 C#.NET 中标签的文本。

我在用`HjälpText.Text = "Hjälp mig.";`

在调试模式下运行时，代码抛出以下异常

> NullReferenceException 未处理。
> 
> 你调用的对象是空的。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:26:50.223

我已经解决了我的问题。

edhedges 引导我查看我的代码，我注意到我放错了代码行的位置。它不在“_Load”方法中，而是在初始化组件的方法之前。

# php - 如何在 PHP 中安全地存储包含敏感数据的 cookie？

> ID：11814350
> 
> 赞同：6
> 
> 时间：2012-08-05T06:05:12.220
> 
> 标签：php, security, cookies, login, hash

我希望我的用户在登录我的网站时能够“保持登录状态”。在这篇文章的最佳答案的建议下，[“让我登录” - 最好的方法](https://stackoverflow.com/questions/1354999/keep-me-logged-in-the-best-approach)，我决定在一个 cookie 中散列用户的盐和密码的组合，并将用户的 id（一个数字）存储在另一个 cookie 中。当然，哈希值也将存储在数据库服务器端，以供用户再次返回时进行验证。我使用的盐值与我在用户第一次注册时用来散列用户密码的值相同，因此它是静态的 - 它在会话之间不会改变。我看到这种方法存在一些问题。

1）如果它是静态的，或者我应该每次为cookie生成不同的盐，使用注册盐是一个好主意吗？

2）如果有人获得了cookies的访问权，他们将它们复制到另一台计算机上，然后尝试从该计算机访问该网站，理论上它会自动将其登录到该用户的帐户，这不是安全问题吗？

3) 在某些怀有恶意意图的用户要访问数据库的情况下，安全网站会使用加盐和散列密码，使黑客很难访问多个帐户（如果有的话）。但是，通过简单地使用散列值和盐值并创建一个与他们在数据库上更改的值相匹配的 cookie，他们可以有效地访问他们想要的任何帐户，从而使整个密码散列过程变得毫无用处。因此，我现在使用的这种 cookie 方法正在损害我的整个数据库和所有用户的帐户。

所以我的问题是，如何在 PHP 中存储包含敏感信息（例如用户密码哈希）的 cookie，而不必担心上述问题？当然，提供“保持登录”功能的 Gmail 和 Hotmail 等网站采用了比我现在所做的更安全的方法，那么他们会怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T06:15:55.217

不要将密码存储在 cookie 中，无论是否经过哈希处理。事实上，没有理由在 cookie 中存储任何敏感信息。您需要做的就是将一个 128 位（或更大）的随机 id 映射到数据库中的用户帐户，并将该 id 存储在 cookie 中。没有办法有人会通过远程蛮力猜测一个有效的 id，特别是如果你有锁定的地方。

> 如果有人要访问cookies并将它们复制到另一台计算机上，然后尝试从该计算机访问该网站，理论上它会自动将它们登录到该用户的帐户，这不是安全问题吗？

是的。这是该功能的缺点。但是，如果您的网站检测到新的 IP 地址（特别是来自不同国家/地区）并需要第二步（将代码发送到移动设备等），那么您将处理此问题以及密码被盗的一般问题。（这当然无助于防止本地网络攻击，例如不安全的公共 wifi。）

更方便的解决方案是要求“记住我”cookie 使用 SSL。这样一来，黑客就不会在纯文本传输中看到 cookie，并且可能需要进行本地攻击。（如果是这样，记住我的 cookie 可能是用户最不关心的问题。）

> 他们可以有效地访问他们想要的任何帐户，从而使整个密码散列过程变得毫无用处。

是的，没有。如果您使用我描述的技术（随机 id），那么他们只能访问具有“记住我”cookie 的帐户。但话虽如此，如果他们有权访问您的数据库，他们可以暴力破解他们想要的任何帐户。如果密码本身很弱，即使是加盐密码也很容易在本地破解。

此外，您可以将“记住我”登录视为半登录。访问购买东西、更改电子邮件地址等仍然需要输入密码。无需密码即可进行无害的操作，例如在留言板上发帖。

最后，请注意 PHP 会话 cookie 只不过是一个临时的“记住我”令牌！这在很大程度上适用于会话劫持的概念。“记住我”令牌只是增加了一个更大的机会之窗。

简而言之：不要在 cookie 中存储任何敏感信息，cookie 需要 SSL，如果可能，实施多因素身份验证……尤其是对于管理员帐户。

# asp.net - 如何在asp.net中显示xml数据

> ID：11814353
> 
> 赞同：1
> 
> 时间：2012-08-05T06:05:47.543
> 
> 标签：asp.net, xml, data-representation

这是我的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<entry>
 <comment Name="xxx" Location="India" Email="xxx@email.com" Gender="Male" />
 <comment Name="yyy" Location="usa" Email="yyy@email.com" Gender="Male" />
 <comment Name="zzz" Location="uae" Email="zzz@email.com" Gender="Male" />
 <comment Name="abc" Location="china" Email="abc@email.com" Gender="Male" />
</entry> 
```

如何在 ASP.NET 中仅显示评论标签的数据（例如姓名、位置、电子邮件、性别）？请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:21:05.443

## 输出

![在此处输入图像描述](../Images/6c4c3a93cc6068f615e8b653a655ad3f.png)

* * *

## 代码背后

```
using (DataSet ds = new DataSet())
{
    ds.ReadXml(MapPath("XMLFile1.xml"));
    grd.DataSource = ds;
    grd.DataBind();
} 
```

* * *

## 标记

```
<asp:GridView ID="grd" runat="server"></asp:GridView> 
```

* * *

在项目中添加 XML 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T06:57:37.887

您可以将 Xml 数据源与 Tree 视图、Repeater 控件一起使用

```
<asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/XMLFile.xml" XPath="entry" >
</asp:XmlDataSource>

//Repeater
<asp:Repeater ID="Repeater1"
    runat="server"
    DataSourceID="XmlDataSource1">
    <ItemTemplate>
        <h2>Entry</h2>
        <table>
          <tr>                
            <td><%#XPath("comment[1]/@Name")%></td>
            <td><%#XPath("comment[1]/@Location")%></td>
            <td><%#XPath("comment[1]/@Email")%></td>
               <td><%#XPath("comment[1]/@Gender")%></td>
          </tr>   
            <tr>               
            <td><%#XPath("comment[2]/@Name")%></td>
            <td><%#XPath("comment[2]/@Location")%></td>
            <td><%#XPath("comment[2]/@Email")%></td>
               <td><%#XPath("comment[2]/@Gender")%></td>
          </tr>                             
            <td><%#XPath("comment[3]/@Name")%></td>
            <td><%#XPath("comment[3]/@Location")%></td>
            <td><%#XPath("comment[3]/@Email")%></td>
               <td><%#XPath("comment[3]/@Gender")%></td>
          </tr>   
            <tr>                
            <td><%#XPath("comment[4]/@Name")%></td>
            <td><%#XPath("comment[4]/@Location")%></td>
            <td><%#XPath("comment[4]/@Email")%></td>
               <td><%#XPath("comment[4]/@Gender")%></td>
          </tr>                    
        </table>                     
    </ItemTemplate>
</asp:Repeater>

// Output 
Entry

xxx India   xxx@email.com   Male
yyy usa yyy@email.com   Male
zzz uae zzz@email.com   Male
abc china   abc@email.com   Male 
```

# android - 如何在Android中切换活动？

> ID：11814359
> 
> 赞同：0
> 
> 时间：2012-08-05T06:07:47.547
> 
> 标签：android, android-activity

现在我有 3 个活动，活动 1、活动 2 和活动 3。我按顺序打开活动，从不关闭任何活动。所以现在我在activity3中，但我想回到activity1，它必须是我打开的那个。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:55:33.700

根据[开发人员文档](http://developer.android.com/reference/android/content/Intent.html)，您应该使用`FLAG_ACTIVITY_CLEAR_TOP`您想要开始的意图。

> FLAG_ACTIVITY_CLEAR_TOP ：如果设置，并且正在启动的 Activity 已经在当前任务中运行，那么不会启动该 Activity 的新实例，而是关闭它上面的所有其他 Activity 并且此 Intent 将被传递到（现在在顶部）作为新意图的旧活动。

`addFlags`在开始回活动1之前使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:11:12.903

`start activity 1 from 3`带`FLAG_ACTIVITY_CLEAR_TOP`标志：

```
Intent intent = new Intent ( this, Activity1.class );
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

# php - 正则表达式匹配链接，但不匹配图像或 youtube 视频

> ID：11814361
> 
> 赞同：0
> 
> 时间：2012-08-05T06:08:00.183
> 
> 标签：php, regex

我需要将任何有效链接与图像和 youtube 视频的链接分开匹配。我想在常规链接周围放置锚标签，但在图像和 youtube 视频周围分别放置 img 和 iframe 标签。

这是我的代码

```
$str = "some stuff with links"

    $output = preg_replace('#(http://([^\s]*)\.(jpg|gif|png))#', 
                    '<img src="$1" alt="" width="" height="" />', $str);

    $output = preg_replace('#(http://([^\s]*)youtube\.com/watch\?v=([^\s]*))#', 
                  '<iframe width="420" height="315" src="http://www.youtube.com/embed/$3" frameborder="0" allowfullscreen></iframe>', $output);

    var_dump($output); 
```

这忽略了常规链接，如何修改它以检测链接而不是其他两个？有没有更简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:11:45.847

使用两个否定的lookbehind断言。

```
/^(http:\/\/([^\s]*)(?<!\.(?:jpg|gif|png))(?<!youtube\.com\/watch\?v=\w{11}))$/ 
```

或者，`#`用作分隔符，

```
#^(http://([^\s]*)(?<!\.(?:jpg|gif|png))(?<!youtube\.com/watch\?v=\w{11}))$# 
```

请注意，否定的lookbehind 断言不能有可变长度的通配符。因此，必须期待一条规则，*例如*“YouTube 视频由 11 个字符的字符串标识”。

这是一个[Rubular 演示](http://rubular.com/r/kZo3TqSJjp)。

# java - Java 的艺术与科学第 4 章，练习 8

> ID：11814365
> 
> 赞同：0
> 
> 时间：2012-08-05T06:08:29.117
> 
> 标签：java

我正在尝试编写一个对升空进行倒计时的程序，但使用的是 while 循环，而不是 for 循环。

到目前为止，我所做的只是创建了一个无限循环，尽管我使用的基本原理与 for 循环代码相同。

```
import acm.program.*;

public class CountDownWhile extends ConsoleProgram {

    public void run() {
        int t = START;
        while (t >= 0); {
            println(t);
            t = t--;
            }
        println("Liftoff!");
        }

    private static final int START = 10;

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T06:19:55.093

您的代码中有两个错误。这就是你得到一个无限循环的原因

1.

```
while (t >= 0); 
```

您不应该在此行之后添加分号，因为它实际上意味着一个没有任何内容的 while 循环。

2.

```
t = t--; 
```

您可以查看此问题以了解有关此语法的更多信息：[Java 中的 x++ 和 ++x 之间有区别吗？](https://stackoverflow.com/questions/1094872/is-there-a-difference-between-x-and-x-in-java)

总之， 的值`t--`仍然是 10，所以`t = t--`不要改变 t 的值。

循环应如下所示：

```
while (t >= 0) {
    println(t);
    t--;
}
println("Liftoff!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T06:14:12.460

第一个问题是`;`while循环之后。尝试删除`;`...

```
public void run() {
    int t = START;
    while (t >= 0); {  /// <------ Problem 1\. Correct: while(t>=0)
        println(t);
        t = t--;       /// <------ Problem 2\. Correct: t--;   
        }
    println("Liftoff!");
    } 
```

第二个问题是

```
t=t--; 
```

因为 t 的值保持不变。

# c - 执行动态malloc代码时出现“分段错误”

> ID：11814367
> 
> 赞同：1
> 
> 时间：2012-08-05T06:08:33.713
> 
> 标签：c, assembly, posix, x86-64

我在 x86_64 上写了一个示例代码，尝试动态执行 malloc 代码。有一个

> 程序收到信号 SIGSEGV，分段错误。0x0000000000601010 在?? ()

0x0000000000601010 是**bin**的位置，有人能说出为什么吗？谢谢！！

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include <sys/mman.h>
volatile int sum(int a,int b)
{
    return a+b;
}

int main(int argc, char **argv)
{
   char* bin = NULL;    
   unsigned int len = 0;
   int ret = 0;
   /*code_str is the compiled code for function sum.*/
   char code_str[] ={0x55,0x48,0x89,0xe5,0x89,0x7d,0xfc,0x89,
          0x75,0xf8,0x8b,0x45,0xf8,0x03,0x45,0xfc,0xc9,0xc3};
   len = sizeof(code_str)/sizeof(char);
   bin = (char*)malloc(len);
   memcpy(bin,code_str,len);
   mprotect(bin,len , PROT_EXEC | PROT_READ | PROT_WRITE);
   asm volatile ("mov $0x2,%%esi \n\t"
        "mov $0x8,%%edi \n\t"
        "mov %1,%%rbx \n\t"
        "call *%%rbx "
        :"=a"(ret)
        :"g"(bin)
        :"%rbx","%esi","%edi");

   printf("sum:%d\n",ret);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:51:15.020

千万不要在不检查系统函数返回的情况下做这样的伎俩。我的手册页`mprotect`特别说：

> ```
>  POSIX  says  that  the  behavior of mprotect() is unspecified if it
>    is applied to a region of memory that was not obtained via mmap(2). 
> ```

所以不要对`malloc`ed 缓冲区这样做。

还：

*   缓冲区大小只是`sizeof(code_str)`，没有理由除以`sizeof(char)`（保证为 1，但这并不能使其正确）。
*   没有必要强制返回`malloc`（或者`mmap`如果你改变它）。
*   `code_str`is`unsigned char`和 not的正确类型`char`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:48:05.223

问题是 bin 地址应该与多个 PAGESIZE 对齐，否则 mprotect 将返回 -1，参数无效。

```
 bin = (char *)(((int) bin + PAGESIZE-1) & ~(PAGESIZE-1));//added....
   memcpy(bin,code_str,len);
   if(mprotect(bin, len , PROT_EXEC |PROT_READ | PROT_WRITE) == -1)
   {
     printf("mprotect error:%d\n",errno);
     return 0;
   } 
```

# java - 获取 Java 集合二进制搜索以返回多个值

> ID：11814368
> 
> 赞同：0
> 
> 时间：2012-08-05T06:08:43.573
> 
> 标签：java, collections, binary-search

我想知道是否有任何方法可以让 Java 中的二进制搜索返回一个值的多个实例。例如，我有一个项的 ArrayList，其中一个字段是关键字的字符串数组。有没有比使用 contains() 方法通过关键字检索项目并将它们存储在单独的集合中的线性搜索更快的方法？或者通过诸如作者之类的字符串？

```
...Item...
private String[] keywords;
private String author;
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T06:12:54.500

您几乎肯定希望对同一个集合有不同的看法。例如，您可以：

*   `List<Book>`所有项目中的 A
*   A`Multimap<String, Book>`用于“按作者”查找
*   用于`Multimap<String, Book>`“按关键字”查找（同一本书可以出现在多个条目中）

如果我正在写这个，`Multimap`可能会是[Guava](http://guava-libraries.googlecode.com)中的一个实现，但其他的也可用。

当然，这是假设您真的*想*避免线性扫描。您的代码需要扩展多少？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T07:19:38.207

虽然我强烈鼓励 JonSkeet 的建议，但一旦您从二分搜索中获得结果，您就可以从结果索引中向后和向前探索，寻找不再支持您的标准的值，只是一个建议；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T06:19:10.213

我不完全理解您的问题，但您可以将复杂的自定义 Comparator 传递给 binarySearch 来处理其中一些棘手的情况。

# bash - Shell - 在命令行参数中读取反斜杠

> ID：11814374
> 
> 赞同：0
> 
> 时间：2012-08-05T06:10:20.237
> 
> 标签：bash, shell, command-line

我正在考虑为 cygwin 编写脚本以 cd 进入从 Windows 资源管理器复制的 Windows 目录。

例如

```
cdw D:\working\test 
```

等于

```
cd /cygdrive/d/working/test 
```

但似乎对于 shell 脚本，参数中的所有反斜杠都被忽略，除非使用单引号`'D:\working\test'`或双反斜杠`D:\\working\\test`。

但就我而言，这将非常不便，因为我不能简单地将目录名称粘贴到命令行中来执行脚本。

有什么办法可以`cdw D:\working\test`工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T08:47:07.620

好吧，你可以做到，但你想要一些奇怪的东西:)

```
cdw()
{
    set $(history | tail -1 )
    shift 2
    path="$*"
    cd $(cygpath "$path")
} 
```

使用示例：

```
$ cdw D:\working\test
$ pwd
/cygdrive/d/working/test 
```

这里的重点是`history`. 您不直接使用参数，而是以输入的形式从历史记录中获取它。

```
$ rawarg() { set $(history | tail -1 ); shift 2; echo "$@"; }
$ rawarg C:\a\b\c\d
C:\a\b\c\d 
```

当然，您只能在交互式 shell 中使用此技巧（原因很明显）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:16:36.470

您处理的问题与外壳有关。您在命令行上添加到 cdw 的任何参数都将在执行*之前* `cdw`由 shell 处理。

为了防止该处理发生，您需要至少*一级*引用，或者通过将整个字符串括在单引号中：

```
cd 'D:\working\test' 
```

或使用双反斜杠：

```
cd D:\\working\test 
```

单独的程序将无济于事，因为损坏在运行之前就已经完成。;-)

但是，我有一个可能`function`的 for `cdw`，它适用于我的 AST UWIN ksh：

```
function cdw { typeset dir
    read -r dir?"Paste Directory Path: "
    cd ${dir:?}
} 
```

这在 Bash 中有效（不支持读取 var?prompt）：

```
function cdw {
    typeset dir
    printf "Paste Directory Path: "
    read -r dir || return
    cd ${dir:?}
} 
```

`Paste`对我来说，我只需在d 值周围键入两个单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T07:55:32.063

添加单引号的解决方案允许复制粘贴

# java - itext 包中的错误

> ID：11814375
> 
> 赞同：3
> 
> 时间：2012-08-05T06:10:21.233
> 
> 标签：java, swing, itext

我下载`itext-1.3`并放入 .lib 文件夹中`jdk 1.6.0`。并将 lib 文件夹添加为系统变量中的 CLASSPATH。

但是当我运行程序时，我得到了错误：

> 包 com.itextpdf.text 不存在。

对于所有其他软件包也是如此。我犯了什么错误？

```
import java.io.FileOutputStream;
import java.io.IOException;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;

/**
 * First iText example: Hello World.
 */
public class HelloWorld {

    /** Path to the resulting PDF file. */
    public static final String RESULT
        = "E:/hello.pdf";

    /**
     * Creates a PDF file: hello.pdf
     * @param    args    no arguments needed
     */
    public static void main(String[] args)
        throws DocumentException, IOException {
        new HelloWorld().createPdf(RESULT);
    }

    /**
     * Creates a PDF document.
     * @param filename the path to the new PDF document
     * @throws    DocumentException 
     * @throws    IOException 
     */
    public void createPdf(String filename)
    throws DocumentException, IOException {
        // step 1
        Document document = new Document();
        // step 2
        PdfWriter.getInstance(document, new FileOutputStream(filename));
        // step 3
        document.open();
        // step 4
        document.add(new Paragraph("Hello World!"));
        // step 5
        document.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T06:51:09.513

除非您明确指示这样做，否则不应向 JVM/JDK lib 或 ext 文件夹添加任何内容

根据您的开发环境（以及您未来的意图），您应该将库放置在最适合它的位置，例如，在项目文件夹内的 lib 目录中（但在源代码之外）。

您应该在项目 Jar 清单中添加类路径依赖项（查看[将类添加到 JAR 文件的 Classpath](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)）或使用`-cp`命令行上的参数来执行程序。您应该使用 javac 的 -classpath 选项来编译程序

至于开发环境，这取决于您使用的是什么

**特别说明**

每个 Jar 文件都需要在 Classpath 上单独引用，您不能指定文件夹并期望 JVM 扫描其内容以查找 Jar 文件，仅适用于类

**更新了编译执行示例**

我下载 iText 5.3.1。从我提取的 zip 文件中：

*   itextpdf-5.3.1.jar
*   itext-pdfa-5.3.1.jar
*   itext-xtra-5.3.1.jar

并将它们放置在容易到达的位置。

我从 iText in Action 网站下载了[HelloWorld 示例。](http://itextpdf.com/examples/iia.php?id=12)我把它放在`src`与 Jar 相同位置的目录中

我修改了代码，以便在当前工作目录中创建生成的 PDF

```
public static final String RESULT = "hello.pdf"; 
```

我用`javac.exe -cp d:\hold\itextpdf-5.3.1.jar;d:\hold\itext-pdfa-5.3.1.jar;d:\hold\itext-xtra-5.3.1.jar -d . src\HelloWorld.java`(compiled in `d:\hold`)编译了这个例子

这在 part1\chapter01 中创建了 HelloWorld 类`D:\hold`

然后我执行了这个例子`java -cp d:\hold\itextpdf-5.3.1.jar;d:\hold\itext-pdfa-5.3.1.jar;d:\hold\itext-xtra-5.3.1.jar;d:\hold part1.chapter01.HelloWorld`

这导致在`hello.pdf`当前目录中创建 ( `D:\hold`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-24T21:01:41.783

不需要对 jdk 库做任何事情。只需使用类路径将 itext jar 文件的路径提供给 java。

我也遇到了同样的问题，但有 itext 5.5.3。就我而言，我创建了一个与我的工作文件夹并行的**lib**文件夹。在**lib**文件夹中，我放置了所有三个 jar 文件*（itextpdf-5.5.3.jar、itext-pdfa-5.5.3.jar、itext-xtra-5.5.3.jar）。* 不要浪费时间在编译运行代码的时候分别给出每个jar文件的路径。

我编译了代码 eg1.java(c:\ItextPractise\code\eg1.java) 与

`javac -classpath c:\ItextPractise\lib\*;. eg1.java`

并使用

`java -classpath c:\ItextPractise\lib\*;. eg1`（在我的例子中，eg1 是主类的名称）

您可能会从[OracleOfficialPage](https://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)了解更多关于类路径的信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-21T17:25:06.887

这可能是由于您的项目中缺少 itext 库。只需下载 itext jar 文件并将其添加到您的项目库中

# javascript - 如何使用谷歌应用脚 本将特定行从 3 个谷歌电子表格复制到另一个电子表格

> ID：11814381
> 
> 赞同：1
> 
> 时间：2012-08-05T06:11:41.700
> 
> 标签：javascript, google-apps-script, google-sheets

我有一个名为 Main-spreadsheet 的电子表格，其中有 4 个名为 sheet1、sheet2、sheet3 和 result 的电子表格。我想将工作表 1、工作表 2、工作表 3 中的条件数据复制到结果工作表。有人能帮帮我吗？？？？

这是我的代码：

```
 var ss = SpreadsheetApp.openById(DATA_SPREADSHEET_ID);
  var sheet = ss.getSheets()[3];

  var dataSs = SpreadsheetApp.openById(DATA_SPREADSHEET_ID);
  var dataSheet = dataSs.getSheets()[0];

  // Fetch all the data
  var data = getRowsData(dataSheet);

  // This is the data we want to display
  var columnNames = ["Name", "AC link", "Type"];

  // Index data by type
  var dataBytype = {};
  var types = [];
  for (var i = 0; i < data.length; ++i) {
    var rowData = data[i];
    if (!dataBytype[rowData.type]) {
      dataBytype[rowData.type] = [];
      types.push(rowData.type);
    }
    dataBytype[rowData.type].push(rowData);
  }

  types.sort();
  var headerBackgroundColor = dataSheet.getRange(1, 1).getBackgroundColor();
  for (var i = 0; i < types.length; ++i) {
    var sheet = ss.getSheetByName(types[i]) || 
        ss.insertSheet(types[i], ss.getSheets().length);
    sheet.clear();
    var headersRange = sheet.getRange(1, 1, 1, columnNames.length);
    headersRange.setValues([columnNames]);
    headersRange.setBackgroundColor(headerBackgroundColor);
    setRowsData(sheet, dataBytype[types[i]]);
  } 
```

}

它目前从 sheet1 复制数据并按类型列制作新工作表

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-05T08:36:51.007

在这个论坛和[旧](https://developers.google.com/apps-script/support)论坛上已经有几十个类似的问题***和答案***......快速搜索将帮助您找到您正在寻找的内容。

# php - 基于CSV行生成唯一的非随机ID？

> ID：11814382
> 
> 赞同：1
> 
> 时间：2012-08-05T06:11:49.153
> 
> 标签：php, csv, uniqueidentifier

我有一个格式为 CSV：

```
Bill,Smith,123 Main Street,Smalltown,NY,5551234567
Jane,Smith,123 Main Street,Smalltown,NY,5551234567
John,Doe,85 Main Street,Smalltown,NY,5558901234
John,Doe,100 Foo Street,Bigtown,CA,5556789012 
```

换句话说，没有一个领域是独一无二的。两个人可以有相同的名字，两个人可以有相同的电话，等等，但是当您考虑所有字段时，每行本身都是唯一的。

我需要为每一行生成一个唯一的 ID，但它不能是随机的。而且我需要能够在将来的某个时间获取一行 CSV，并找出那个人的唯一 ID 是什么，而无需查询数据库。

在 PHP 中执行此操作的最快方法是什么？我需要对数百万行执行此操作，因此`md5()`为每一行生成整个字符串并不实际。我应该使用更好的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:25:17.167

如果您以后需要能够仅从该行的文本重建 ID，您*将*需要一个[哈希算法](http://www.php.net/manual/en/function.hash.php)。不过，它不一定是 MD5。

“数百万个 ID”对于现代 CPU（或者，尤其是 GPU。请参阅 Jeff 最近关于[Speed Hashing](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)的博客）来说并不是真正的问题，因此您可能希望使用与 PHP 不同的语言进行散列。我能看到的唯一问题是碰撞。您需要确定您生成的散列确实是唯一的，其可能性取决于条目的数量、使用的算法和散列的长度。

根据 Jeff 的文章，MD5 已经是目前最快的哈希算法（每秒 10-200 亿次哈希），但[NTLM](http://en.wikipedia.org/wiki/NTLM)似乎快了一倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T06:17:33.707

将唯一 ID 添加为字段怎么样？

```
$csv=file($file);
$i=0;
$csv_new=array();
foreach ($file as $val){
    $csv_new[]=$i.",".$val;
    $i++;
} 
```

并将 $csv_new 输出为新的 csv 文件。

肮脏，但它可能对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T06:20:31.723

为什么不只是

```
CREATE TABLE data (
    first VARCHAR(50),
    last  VARCHAR(50),
    addr  VARCHAR(50),
    city  VARCHAR(50),
    state VARCHAR(50),
    phone VARCHAR(50),
    id    INT UNSIGNED NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (id)
);

LOAD DATA [LOCAL] INFILE 'file.csv'
INTO TABLE data
(first,last,addr,city,state,phone); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-28T21:53:52.903

我明白你在说什么，但我不明白这一点。在数据库中创建一个自动递增的唯一 id 将是最佳途径。第二条路线将在 csv 中创建类似于 cell=a1+1 的内容并将其拖到整行中。在 php 中，你可以。读取文件并添加诸如 date(ymd).$id 之类的内容，然后将其写回文件。同样，尽管这样做似乎很愚蠢，并且数据库路由是最好的。请记住 pci 合规性并始终加密数据。我稍后会发布代码。我现在不在电脑前。

已经很长时间了，但是我发现了一种类似这样的情况，我需要防止在数据库中创建行，我创建了另一个名为 de_dup 的列，它被设置为唯一的。然后，我为创建时使用的每一行 date('ymd').md5(implode($selected_csv_values)); 这将阻止客户在任何给定日期创建订单，除非特定信息不同，即：名字、姓氏、信用卡号码、帐单地址。

# android - 自定义布局类中的片段

> ID：11814386
> 
> 赞同：1
> 
> 时间：2012-08-05T06:12:27.977
> 
> 标签：android, custom-controls, fragment

我有一个扩展`FrameLayout`为分页“向导”视图中的适配器提供视图的类。通常，要将片段添加到 a `FrameLayout`，我只需使用

```
getSupportFragmentManager().beginTransaction().replace() 
```

将我的片段添加到布局中。但是，当我尝试像在这里一样添加片段时：

```
public class ReviewPreviousInspectionStep extends FrameLayout implements IWizardStep {
    private IWizardStepStatusChangedListener listener;
    private FragmentActivity activity;

    public ReviewPreviousInspectionStep(FragmentActivity activity) {
        super(activity);

        this.activity = activity;
        LayoutInflater.from(activity).inflate(R.layout.review_previous_inspection, this, true);

        InspectionHistoryFragment inspectionHistoryFragment = new InspectionHistoryFragment();
        inspectionHistoryFragment.setRetainInstance(true);

        activity.getSupportFragmentManager().beginTransaction()
                .replace(R.id.historyFragmentContainer, inspectionHistoryFragment, "historyFragment")
                .addToBackStack("historyFragment")
                .setTransition(FragmentTransaction.TRANSIT_ENTER_MASK)
                .commit();
    }

    //snip
} 
```

`FragmentActivity`同样，该视图从方法中的适配器添加到活动（我已设置为从 扩展） `getView`。

当我运行它时，我得到以下异常：

```
 Caused by: java.lang.IllegalArgumentException: No view found for id 0x7f0a002d for fragment InspectionHistoryFragment{41983b08 #0 id=0x7f0a002d historyFragment}
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:864)
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
        at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
        at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
        at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
        at roboguice.activity.RoboFragmentActivity.onStart(RoboFragmentActivity.java:60)
        at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
        at android.app.Activity.performStart(Activity.java:5018)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2032)
        ... 11 more 
```

那么有没有办法以这种方式将片段添加到自定义控件？

# vba - Excel - 根据列中的数据将指定列复制到新工作表

> ID：11814391
> 
> 赞同：-1
> 
> 时间：2012-08-05T06:13:20.230
> 
> 标签：vba, excel, copy, autofilter

我需要以下帮助：

我需要为 G 列中的任何数据过滤范围 A9 - A32。然后我需要复制数据，但只有 A - E & G 列到工作表 2。然后删除过滤的数据并返回到未过滤的视图。

我尝试了以下方法但没有成功：

```
Dim shSrc As Worksheet
Dim shDst As Worksheet
Dim rSrc As range
Dim rDst As range
Dim range
Dim numCol As Long ' number of columns to copy

On Error GoTo EH

range = ("A:E,G:G")

' select source and dest sheets
Set shSrc = ActiveWorkbook.Worksheets("Active Snag List")
Set shDst = ActiveWorkbook.Worksheets("Snag History")

' Select initial rows
Set rSrc = shSrc.Cells(9, 7)
Set rDst = shDst.Cells(2, 1)

' loop over source
Do While rSrc <> ""
    ' Test Source row, Qty = 0 and Name is not blank
    With rSrc
        If .Offset(0, 2) = 0 And .Value <> "" Then
            'Copy
            .Resize(1, range).Copy rDst.Resize(1, range)
            Set rDst = rDst.Offset(1, 0)
        End If
    End With
    Set rSrc = rSrc.Offset(1, 0)
Loop
Exit Sub
EH:
MsgBox "Error " & Err.Description 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:34:39.100

要使您的代码正常工作，请将此`IF`部分替换为

```
 If .Offset(0, 2) = 0 And .Value <> "" Then
            'Copy
            'Cells A:E
            rDst.Resize(1, 5).Value = .EntireRow.Cells(1, 1).Resize(1, 5).Value
            ' Cell G
            rDst.Offset(0, 6).Value = .Value

            Set rDst = rDst.Offset(1, 0)
        End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:01:23.500

为什么不使用自动过滤器而不是循环遍历单元格？它会让我快得多。请参阅此示例。

**代码（尝试和测试）**

```
Option Explicit

Sub Sample()
    Dim shSrc As Worksheet, shDst As Worksheet
    Dim rDst As range, rng As range, rngtocopy As range
    Dim lastrow As Long

    On Error GoTo EH

    '~~> Select source and dest sheets
    Set shSrc = ThisWorkbook.Worksheets("Active Snag List")
    Set shDst = ThisWorkbook.Worksheets("Snag History")

    '~~> Select initial rows
    Set rDst = shDst.Cells(2, 1)

    With shSrc
        '~~> Remove any filters
        .AutoFilterMode = False

        '~~> Get the last row of Col G
        lastrow = .range("G" & .Rows.Count).End(xlUp).Row

        With .range("A8:G" & lastrow)
            '~~> Filter G Col for non blanks
            .AutoFilter Field:=7, Criteria1:="<>"
            '~~> Get the offset(to exclude headers)
            Set rng = .Offset(1, 0).SpecialCells(xlCellTypeVisible)
            '~~> Remove Col F from the resulting range
            Set rngtocopy = Union(shSrc.range(Replace(rng.Address, "G", "E")), _
            shSrc.range(Replace(rng.Address, "A", "G")))
            '~~> Copy cells to relevant destination
            rngtocopy.Copy rDst
            '~~> Delete the filtered results
            rng.EntireRow.Delete
        End With

        '~~> Remove any filters
        .AutoFilterMode = False
    End With

    Exit Sub
EH:
    MsgBox "Error " & Err.Description
End Sub 
```

**快照**

宏运行前的工作表 1

![在此处输入图像描述](../Images/22e157071a2491776a111ae8bf201614.png)

宏运行后的工作表 2

![在此处输入图像描述](../Images/c644b81da1560429908349fa4f68561b.png)

宏运行后的工作表 1

![在此处输入图像描述](../Images/db42356edb188250b81b5e1a06bc8727.png)

# asp.net-mvc - asp.net mvc + knockout + ajax 部分加载 + 重用 viewodel 并在同一页面内加载不同的数据

> ID：11814392
> 
> 赞同：0
> 
> 时间：2012-08-05T06:13:59.897
> 
> 标签：asp.net-mvc, knockout.js

在单个 asp.net MVC 页面中，我必须显示 3 个相同布局/结构的报告。因此，我创建了一个使用 Knockout 数据绑定生成报告的页面，并通过传递一些附加参数生成了 10 个报告。

我尝试使用 Ajax 部分视图加载所有 3 个报告，通过这种方式，我将这 10 个报告填充到一个页面中。

现在我碰巧看到一个奇怪的问题，虽然每个报告的数据不同，但最后一个报告数据出现在所有 3 个报告中。任何人都知道如何处理这个问题？

**主页视图，我通过 Ajax 调用调用 3 个报告。**

```
 <div id="RecentlyAddedReport" ></div>
    <div id="RecentlyConsultedReport"></div>
    <div id="RecentlyPrescribedReport"></div>

    <!-- start here -->
    <script type="text/javascript">
        $(document).ready(function () {
            AjaxLoadReport('RecentlyAddedReport', 'Patient/Report?type=RecentlyAdded&name=Recently Added');
            AjaxLoadReport('RecentlyConsultedReport', 'Patient/Report?type=RecentlyConsulted&name=Recently Consulted');
            AjaxLoadReport('RecentlyPrescribedReport', 'Patient/Report?type=RecentlyPrescribed&name=Recently Prescribed');
        });

        function AjaxLoadReport(reportType, actionURL) {
            var resultDiv = $('#' + reportType);
            $.ajax({ type: "GET", url: actionURL, data: {},
                success: function (response) {
                    resultDiv.html('');
                    resultDiv.html(response);
                }
            });
        }
    </script> 
```

**报告视图 - 我对所有 3 个报告都使用相同的视图**

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<TryHomeo.Web.UI.Models.UserControlViewData>" %>

<script type="text/javascript" src="../../scripts/jquery-1.7.1.min.js"></script>
<script src="../../Scripts/jquery.timeago.js" type="text/javascript"> </script>
<script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"> </script>
<h1>
    <%:Model.ReportName%>
</h1>
<div class='loadingIndicator' title="Loading..."></div>
<ul id="<%=Model.ReportType %>" data-bind="template: { name: 'patient-template', foreach: patients}"></ul>
<script type="text/html" id="patient-template">   
    <span>
        <li>
            <div>
                <a data-bind="text: PatientName"></a>- (<abbr class='timeago' data-bind="timeago: DatedString"></abbr>)
            </div>
        </li>
    </span>
</script>
<script type="text/javascript">

    // ReportViewModel View Model //
    function ReportViewModel() {
        var self = this;
        self.patients = ko.observableArray([]);
    }

    var objVM = new ReportViewModel();
    ko.applyBindings(objVM);

    // Using jQuery for Ajax loading indicator 
    $(".loadingIndicator").ajaxStart(function () { $(this).fadeIn(); }).ajaxComplete(function () { $(this).fadeOut(); });

    $(document).ready(function () {
        $.ajax({
            dataType: 'json',
            url: '/Patient/GetPatientReport/?type=' + '<%=Model.ReportType %>' + '&' + '<%=DateTime.Now.ToString() %>',
            success: SetData,
            error: function (xhr, ajaxOptions, thrownError) { alert(xhr.status); alert(thrownError); }
        });
    });

    function SetData(data) {
        objVM.patients(data);
    }

    ko.bindingHandlers.timeago = {
        update: function (element, valueAccessor) {
            var value = ko.utils.unwrapObservable(valueAccessor());
            var $this = $(element);
            // Set the title attribute to the new value = timestamp        
            $this.attr('title', value);
            // If timeago has already been applied to this node, don't reapply it -    
            // since timeago isn't really flexible (it doesn't provide a public     
            // remove() or refresh() method) we need to do everything by ourselves. 
            if ($this.data('timeago')) {
                var datetime = $.timeago.datetime($this);
                var distance = (new Date().getTime() - datetime.getTime());
                var inWords = $.timeago.inWords(distance);
                // Update cache and displayed text..    
                $this.data('timeago', { 'datetime': datetime });
                $this.text(inWords);
            } else {
                // timeago hasn't been applied to this node -> we do that now!          
                $this.timeago();
            }
        }
    };
</script> 
```

# multithreading - SlimReaderWriter (SRW) 锁数组（使用 new 运算符）

> ID：11814395
> 
> 赞同：0
> 
> 时间：2012-08-05T06:15:17.063
> 
> 标签：multithreading, visual-c++, locking

也许这听起来很愚蠢，但我想在运行时动态创建一个向量/SRWLocks 数组。下面的代码编译两种方式，但数组的东西不起作用。可能问题应该是，我可以使用 new 运算符创建一个 SRWLock 对象吗？

如果这不是它的完成方式，那么创建 SRWLock 对象数组的正确方法是什么？

```
#include "stdafx.h"
#include <ppl.h>
#include <Windows.h>
#include <iostream>

using namespace std;

#define NOT_WORKING

int _tmain(int argc, _TCHAR* argv[])
{

#ifdef NOT_WORKING

// The following doesn't work
       SRWLOCK *lock = new SRWLOCK[2];

       int a = 10;

       AcquireSRWLockExclusive(&lock[0]);
       cout<<"Exclusive Lock Acquired";
       a++;
       ReleaseSRWLockExclusive(&lock[0]);

       // The following doesn't work either

       /*
       SRWLOCK *lock_n = new SRWLOCK;

       AcquireSRWLockExclusive(lock_n);
       cout<<"Exclusive Lock Acquired";
       a++;
       ReleaseSRWLockExclusive(lock_n);

       */

       #else
// This works
       SRWLOCK lock;

       int a = 10;
       AcquireSRWLockExclusive(&lock);
       cout<<"Exclusive Lock Acquired";
       a++;
       ReleaseSRWLockExclusive(&lock);

#endif
       cout<<"Value of a:"<<a;
       cin.get();

       return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:44:18.967

User1577008 自己的回答：知道了！动态创建锁对象时需要使用 InitializeSRWLock() 函数。有人粘贴这个答案，并帮助我结束这个问题。

# php - 严格的标准：只有变量应该通过引用传递

> ID：11814397
> 
> 赞同：0
> 
> 时间：2012-08-05T06:15:30.493
> 
> 标签：php, variables, reference

我正在尝试使用忘记密码的系统。我不知道为什么我会收到这个错误，我已经重新检查了近五次代码。任何帮助都会很棒。

顺便说一句，这是例外。

> 错误 - 严格标准：在第 8 行的 C:\xampp\htdocs\core\init.php 中只能通过引用传递变量

**恢复.php**

```
echo $current_file = end(explode('/', $_SERVER['SCRIPT_NAME'])); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T06:23:29.750

此错误似乎是因为您将值传递给`explode()`而不是变量，请尝试以下操作：

```
$var = $_SERVER['SCRIPT_NAME'];
$current_file = end(explode('/', $var)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T08:51:42.427

[正如这里](https://stackoverflow.com/questions/19829414/strict-standards-only-variables-should-be-passed-by-reference-in-functions-php "这里")很好解释的那样，PHP *end()*方法等待*变量引用*正常工作。你所要做的只是简单地给出一个变量引用而不是一个普通的值。

```
$var = $_SERVER['SCRIPT_NAME'];
$exploded = explode('/', $var);
$current_file = end($exploded); 
```

# php - 使用 Zend 框架从 PHP 服务器接收到 HttpResponse 400

> ID：11814398
> 
> 赞同：3
> 
> 时间：2012-08-05T06:15:38.837
> 
> 标签：php, android, zend-framework, google-cloud-messaging

我正在尝试使用带有 Zend 框架的 PHP 服务器向我的 android 应用程序发送推送通知，但我得到的 HttpResponse 为：请求无法解析为 JSON 或包含无效字段，错误代码为 400。我使用了服务器Zend框架demo中给出的代码，如下：

```
<?php
require_once 'Zend/Mobile/Push/Gcm.php';
require_once 'Zend/Mobile/Push/Message/Gcm.php';

$regId = $_POST["registrationid"];

$message = new Zend_Mobile_Push_Message_Gcm();
$message->setId(time());
$message->addToken($regId);
$message->setData(array(
    'foo' => 'bar',
    'bar' => 'foo',
));

$gcm = new Zend_Mobile_Push_Gcm();
$gcm->setApiKey('my api key');

try {
    $response = $gcm->send($message);
} catch (Zend_Mobile_Push_Exception $e) {
    // all other exceptions only require action to be sent or implementation of exponential backoff.
    die($e->getMessage());
}

// handle all errors and registration_id's
foreach ($response->getResults() as $k => $v) {
    if ($v['registration_id']) {
        printf("%s has a new registration id of: %s\r\n", $k, $v['registration_id']);
    }
    if ($v['error']) {
        printf("%s had an error of: %s\r\n", $k, $v['error']);
    }
    if ($v['message_id']) {
        printf("%s was successfully sent the message, message id is: %s", $k, $v['message_id']);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:03:11.650

我手边没有确切的 URL，我正在手机上尝试，但我最近在我的博客中谈到了这个。请参阅[http://www.rogerethomas.com](http://www.rogerethomas.com) 您需要的是使用浏览器 API 密钥，而不是服务器密钥。不要问为什么，但 Google 的文档似乎有错误。

编辑：这是我从另一个类似问题的答案的最新链接： [GCM with PHP (Google Cloud Messaging)](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging/11254071#11254071)

# javascript - 需要帮助在 D3.js 条形图中将 x 轴刻度与条形对齐

> ID：11814399
> 
> 赞同：4
> 
> 时间：2012-08-05T06:15:44.747
> 
> 标签：javascript, d3.js, bar-chart

[我有一个使用D3.js](http://d3js.org)的工作线性条形图，它也有基于时间的 x 轴。条形绑定到计数属性，而轴绑定到日期属性。轴上的刻度不与条对齐。知道如何将它们排成一行吗？

这是 jsFiddle：http: [//jsfiddle.net/MmEjF/](http://jsfiddle.net/MmEjF/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:22:22.783

这是因为图表有 14 个柱，但有 15 个刻度线。

第一个刻度线应该是数据集开始前的一个月。

您可以通过将 xTimeDomain 的开始时间提前一个月来解决此问题：

```
xTimeDomain[0] = new Date(new Date(xTimeDomain[0]).setMonth(xTimeDomain[0].getMonth()-1)); 
```

# c# - 当我们需要接口 c#

> ID：11814402
> 
> 赞同：-1
> 
> 时间：2012-08-05T06:16:09.400
> 
> 标签：c#

> **可能重复：**
> [我为什么要使用接口？](https://stackoverflow.com/questions/240152/why-would-i-want-to-use-interfaces) [为什么我需要接口？](https://stackoverflow.com/questions/9451868/why-i-need-interface)

我想知道何时何地使用它？

例如，

```
interface IDemo
{
 // Function prototype
 public void Show();
}

// First class using the interface
class MyClass1 : IDemo
{
 public void show()
 {
  // Function body comes here
  Response.Write("I'm in MyClass");
 } 
}

// Second class using the interface
class MyClass2 : IDemo
{
 public void show() 
 {
  // Function body comes here
  Response.Write("I'm in MyClass2");
  Response.Write("So, what?");
 } 
```

这两个类具有相同的函数名和不同的主体。这甚至可以在没有接口的情况下实现。那么为什么我们需要一个接口在哪里以及何时使用它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:25:05.293

`show()`在您的简单情况下，您可以通过使用实现（或可能将其定义为抽象）的公共基类来实现与接口所获得的类似的东西。让我将您的通用名称更改为更具体的名称，*Eagle*和*Hawk*而不是*MyClass1*和*MyClass2*。在这种情况下，您可以编写如下代码

```
Bird bird = GetMeAnInstanceOfABird(someCriteriaForSelectingASpecificKindOfBird);
bird.Fly(Direction.South, Speed.CruisingSpeed); 
```

这使您可以编写可以处理任何*Bird**的代码。*然后，您可以编写代码，使*Bird*执行其作用于它视为*Bird*的实例的事情（飞行、进食、产卵等） 。无论*Bird*是否真的是*Eagle*、*Hawk或其他任何从**Bird*派生的东西，该代码都可以使用。

但是，当您没有真正*的*关系时，这种范式开始变得混乱。假设您想编写在天空中飞行的代码。如果您编写该代码以接受*Bird*基类，则突然很难将该代码演变为在*JumboJet*实例上工作，因为虽然*Bird*和*JumboJet*肯定都可以飞行，但*JumboJet*肯定不是*Bird*。

进入界面。

Bird （和*Eagle*和*Hawk*）的*共同点*是它们都能飞*。*如果您编写上面的代码而不是作用于接口*IFly*，则该代码可以应用于任何提供该接口实现的东西。

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:27:21.187

当您有相互依赖的组件时，最需要接口。一个常见的示例是日志记录控制器和一些记录器类。

```
class LoggingController {

    private ILogger _logger

    // expecting an interface here removes the dependency 
    // to a specific implemenentation.
    // all it cares about is that the object has a Log() method
    public LoggingController(ILogger logger) {
        _logger = logger;
    }

    public void Log() { _logger.Log(); }
}

interface ILogger { 
    void Log(); 
}

class DbLogger : ILogger { 
    public void Log(){ //log into db }
}

class TxtLogger : ILogger {
    public void Log(){ //log into a txt file }
} 
```

在运行时，日志控制器可以注入 ILogger 的任何实现，并且它完全不知道记录器实际执行什么来实际记录内容。

对接口进行编程的另一个好处是它允许更轻松的单元测试。控制器可以通过注入一个同样实现接口的模拟记录器来轻松地进行单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T06:19:42.350

这里有几个很好的链接。

[http://www.daniweb.com/software-development/csharp/threads/114364/why-use-interfaces](http://www.daniweb.com/software-development/csharp/threads/114364/why-use-interfaces)

[http://fci-h.blogspot.com/2008/03/oop-design-concepts-interfaces_05.html](http://fci-h.blogspot.com/2008/03/oop-design-concepts-interfaces_05.html)

细化：基本上它们提供了更多的抽象。如果你有一个物体说`Alien`，在这种情况下，所有外星人都来自外太空。好吧，并非所有外星人都完全相同，但它们都消耗食物并消耗能量。他们消耗食物和使用能源的方式可能不同，但保留一个基`Alien`类并拥有从该类抽象出来的接口比为每种类型都有单独的类更有意义。

核心逻辑可以在基类中保持不变，接口可以在需要时更改部分。***

# android - 所有 Android 设备都有“选项”和“返回”按钮吗？

> ID：11814403
> 
> 赞同：17
> 
> 时间：2012-08-05T06:16:51.650
> 
> 标签：android, button

所有 Android 设备都有“选项”和“返回”按钮吗？或者我的设计是否应该有“返回”和“选项”按钮以使其更加通用？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-05T06:24:31.030

[Android 4.1 CDD](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/4.1/android-4.1-cdd.pdf)部分 7.2.3 包含以下信息：

> Home、Menu 和 Back 功能对于 Android 导航范例至关重要。设备实现必须在运行应用程序时始终使这些功能对用户可用。这些功能可以通过专用的物理按钮（如机械或电容式触摸按钮）实现，也可以使用专用的软件按键、手势、触摸面板等实现。Android 4.1 支持这两种实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T06:22:19.320

无论如何，后退按钮都会带回堆栈上的前一个屏幕，就像主页按钮几乎总是会将您带到主屏幕。至于选项按钮，如果有一些设置要更改或类似的东西，通常最好为它实现一些东西，但这真的取决于你的应用程序。许多应用程序不使用它并且做得很好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-28T05:36:57.960

不，不是每个设备都带有后退按钮。Amazon Fire 手机没有返回键。

在 Android 平台上，最好谨慎一点，因为设备制造商总是进行定制。

# flash - Swiffy vs Flash CS6 HTML5 导出自定义字体和标准位图动画

> ID：11814404
> 
> 赞同：0
> 
> 时间：2012-08-05T06:17:05.883
> 
> 标签：flash, html, google-swiffy, createjs, flash-cs6

对于涉及位图和自定义字体的简单动画，使用 Flash CS6 或 Swiffy 中的内置 CreateJS HTML5 导出器更好吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T09:48:15.233

我们已经在我们的网站上尝试了这两种选择。我们建议使用 createJS，因为生成的输出是可读的。但它不支持复杂的动作脚本和 swfs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T23:24:34.047

在比较 swiffy 和 createjs 的输出时，我们注意到 swiffy 画布在绘制矢量时以某种方式独立于分辨率。这意味着默认情况下输出与视网膜兼容。

我们制作了很多横幅，我们的大多数客户会在某个时候在视网膜笔记本电脑或 ipad 上查看工作。所以 createjs 对我们来说是不行的。您必须跳过一些障碍才能使 Flash Retina 的 createjs 输出准备就绪。

当我们开始测试它时，我们对 swiffy 的期望很低，但老实说，它与 swf 输出的匹配程度给我们留下了深刻的印象。复杂的遮罩、混合模式、字体转换、矢量等。用手工编码的 html 很难或不可能的事情都没有问题。我不确定 swiffy 如何像这样渲染画布，但它非常棒，我希望 createjs 也能做到。

# javascript - 如何将 iframe 正文的内容移动到页面正文？

> ID：11814406
> 
> 赞同：2
> 
> 时间：2012-08-05T06:17:50.590
> 
> 标签：javascript, jquery, iframe

更新：

我被误导了，我犯了一些错误，以为我不能同时拥有一个正在运行的脚本来更新屏幕和一个未完成的提交，它会在完成后重新加载页面。

你可以做到这一点，我做到了。我这样做的方式是将我的更新程序放在 startTimeout 上并让提交继续。

```
 $('#JQF').on('submit', function(){
      start();
      return true;
    });
...
start: 
  function (xhr, s) {
    $(".appMainMsg").hide();
    bar = document.getElementById("ProgressBar");
    if (bar)
    {
      eta = document.getElementById("ProgressBarEta");
      startTime = new Date();
      infoUpdated = 0;
      infoRequested = 0;

      $(bar).empty().progressbar();
      setTimeout(requestInfo, 2);
    }
  },
... 
```

原始问题：

我有一个页面发布带有文件上传的表单并将响应定位到隐藏的 iframe。当 iframe 完成加载时，它会调用（主）页面中的一个函数。如果一切看起来都不错，我想将加载到 iframe 中的正文内容移动到主页的正文中，否则我就不管了。我确实加载了 jquery，所以我想使用它。

```
<body>
  <iframe name='ifr' id='ifr' style='display: none;'></iframe>
  <form target='ifr' method='post' action='mypage.php'>
  </form>
  <script>
  function finished()
  { if (iLikeIt) 
    { 
      //replace body contents with ifr.body.contents
      // keeping all event handlers attached
      // something like...

      WHAT DO I PUT HERE?
    }
  }
  </script>
</body> 
```

加载到 iframe 中的页面以以下结尾：

```
<script>
  setTimeout(parent.finished, 1000); // some time for navel gazing
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:39:05.030

您不需要 iframe 来执行此操作。我建议通过 ajax 提交您的表单。
由于您已加载 jquery，因此最简单的选择是使用[jquery-form plugin](http://jquery.malsup.com/form/)。

这是您正在寻找的工作示例：

**索引.html：**

```
<!doctype html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://malsup.github.com/jquery.form.js"></script>
    <script>

    $(function(){

        // instead of redirecting to upload.php, your form "#form"
        // will now be submitted by ajax and you'll get response
        // content in html parameter of success callback
        $('#form').ajaxForm({
            // you can handle "json" or "xml" content types too
            // @see http://jquery.malsup.com/form/#json
            dataType:  'text',
            success: function(html) {

                // in case you want to replace your document
                // content with the response content
                $(document.body).html(html);
            }
        });

        // This is how you "keep all event handlers attached", with
        // live method instead of bind.
        // So if you have #btn2 element in ajax response, and you replace
        // document content with this ajax response, jquery will auto-bind
        // 'click' event on new #btn2 element
        // Note that you can also use bind, but you'll have to "re-bind"
        // the event manualy (inside "success" callback in this case).
        $("#btn2").live("click", function(){alert("button 2 clicked")});

    });

    </script>
</head>
<body>
    <h1>ajax form:</h1>
    <form id="form" action="upload.php" method="post"> 
        <input type="file" name="file" /> 
        <input type="submit" value="Submit File" /> 
    </form>

    <h1>keeping all event handlers attached exemple:</h1>
    <button id="btn2">click me</button>
</body>
</html> 
```

**上传.php：**

```
<?php

    // here you handle your $_FILES, $_POST, $_GET ...

    // html response example:
    header('Content-Type: text/html; charset=utf-8');
    echo '<h1>This is your ajax html response:</h1>';
    echo '<button id="btn1">click me</button>';
    var_dump($_FILES);
    echo '<h1>keeping all event handlers attached exemple:</h1>';
    echo '<button id="btn2">click me</button>';
    echo '<script>

            $(function(){

                // js event handler attached to #btn1
                $("#btn1").bind("click", function(){alert("button 1 clicked")});
            });

        </script>'; 
```

# c# - 为什么网络矩阵不适合我？

> ID：11814411
> 
> 赞同：2
> 
> 时间：2012-08-05T06:18:29.747
> 
> 标签：c#, asp.net, exception, webmatrix

错误

```
There was an error creating site 'Empty Site1'.

Invalid index. (Exception from HRESULT: 0x80070585)

System.Runtime.InteropServices.COMException (0x80070585): Invalid index. (Exception from HRESULT: 0x80070585)
   at Microsoft.Web.Administration.Interop.IAppHostElement.GetPropertyByName(String bstrSubName)
   at Microsoft.Web.Administration.ConfigurationElement.GetAttributeValue(String attributeName)
   at Microsoft.Web.Administration.Binding.get_SslFlags()
   at Microsoft.Web.Administration.Binding.get_CertificateHash()
   at Microsoft.Web.Administration.BindingCollection.Add(Binding binding)
   at Microsoft.Web.Administration.BindingCollection.Add(String bindingInformation, String bindingProtocol)
   at Microsoft.Web.Administration.SiteCollection.Add(String name, String bindingProtocol, String bindingInformation, String physicalPath, Byte[] certificateHash, String certificateStore, SslFlags sslFlags)
   at Microsoft.WebMatrix.Utility.CreateSiteHelper.CreateSite(String name, String path, FrameworkType frameworkType)
   at Microsoft.WebMatrix.Utility.CreateSiteHelper.CreateSiteFromName(String name, Boolean makeNameUnique)
   at Microsoft.WebMatrix.Gallery.Server.GalleryModuleService.<>c__DisplayClass10.<AddSiteFromName>b__f(ExecutionContext context)
   at Microsoft.WebMatrix.Core.Server.ModuleService.<>c__DisplayClass4`1.<InvokeOnMTA>b__0()
   at Microsoft.WebMatrix.Core.TaskServiceImplementation.<>c__DisplayClass8`1.<InvokeOnMTA>b__5() 
```

* * *

我正在尝试使用 webmatrix2 从模板创建一个空网站，但我总是报告上述错误。这是模板安装日志错误

```
DownloadManager Information: 0 : Adding product 'EmptySite' to the cart
DownloadManager Information: 0 : Starting install sequence
DownloadManager Information: 0 : Using cached file at C:\Users\Computer\AppData\Local\Microsoft\Web Platform Installer\installers\EmptySite\ce7d29f43ac4cb3be29181feba3458cb66fbf60f\EmptySite.zip instead of downloading from http://download.microsoft.com/download/3/3/8/33841B52-1126-4892-AEBA-DD67EFE5CBFA/EmptySite.zip
DownloadManager Information: 0 : Loading product xml from: https://go.microsoft.com/?linkid=9808264
DownloadManager Information: 0 : https://go.microsoft.com/?linkid=9808264 responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 175
Content-Type: text/html; charset=utf-8
Expires: Sun, 05 Aug 2012 06:12:11 GMT
Location: https://www.microsoft.com/web/webpi/4.0/webproductlist.xml
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
Set-Cookie: MC1=GUID=cf753bfbb7a34e4e85e1644c1f94456c&HASH=fb3b&LV=20128&V=3; domain=microsoft.com; expires=Sun, 03-Oct-2010 07:00:00 GMT; path=/
X-Powered-By: ASP.NET
Date: Sun, 05 Aug 2012 06:13:10 GMT

DownloadManager Warning: 0 : Could not resolve keyword ID Sharepoint
DownloadManager Warning: 0 : Could not resolve keyword ID Office
DownloadManager Warning: 0 : Could not resolve keyword ID SQL
DownloadManager Warning: 0 : Could not resolve keyword ID SQL
DownloadManager Warning: 0 : Could not resolve keyword ID WIF
DownloadManager Warning: 0 : Could not resolve keyword ID identity
DownloadManager Warning: 0 : Could not resolve keyword ID federation
DownloadManager Warning: 0 : Could not resolve keyword ID claims
DownloadManager Warning: 0 : Could not resolve keyword ID authentication
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/webapplicationlist.xml
DownloadManager Warning: 0 : Could not resolve keyword ID Katalready
DownloadManager Warning: 0 : Could not resolve keyword ID Katalready
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID Katalready
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID Katalready
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/mediaproductlist.xml
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/toolsproductlist.xml
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/enterpriseproductlist.xml
DownloadManager Information: 0 : Loading product xml from: http://go.microsoft.com/?LinkId=9806977
DownloadManager Information: 0 : http://go.microsoft.com/?LinkId=9806977 responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 176
Content-Type: text/html; charset=utf-8
Expires: Sun, 05 Aug 2012 06:12:12 GMT
Location: http://www.microsoft.com/web/webmatrix/2.0/templatefeed.xml
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
Set-Cookie: MC1=GUID=f116c112acb5d74b9ddfc72cac17bf37&HASH=12c1&LV=20128&V=3; domain=microsoft.com; expires=Sun, 03-Oct-2010 07:00:00 GMT; path=/
X-Powered-By: ASP.NET
Date: Sun, 05 Aug 2012 06:13:12 GMT

DownloadManager Warning: 0 : Could not resolve keyword ID HTML
DownloadManager Warning: 0 : Could not resolve keyword ID HTML 
```

有人可以解释一下原因是什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:07:41.947

我会卸载 WebMatrix 和 IIS7.5 并重新安装干净的版本。当我安装 WebMatrix 2 并且全新安装工作时，我遇到了类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:29:14.113

正如我在另一个线程中提到的 - 您是否尝试过卸载并重新安装 IIS Express？

# c# - 在 C# 中以另一种形式访问一个形式的控件数据时出错

> ID：11814421
> 
> 赞同：0
> 
> 时间：2012-08-05T06:20:23.967
> 
> 标签：c#, winforms, listview

我的申请中有两个表格。在我的**Form1**中，我有一个包含一些项目的列表视图。当我双击一行时，我应该得到一个弹出窗口，允许我编辑行值。为此，我使用了双击事件。现在对于弹出窗口，我创建了新表单**Form2**。我已将列表视图设置为 Form1 中的内部，以便访问我的 form2 中的选定行值。在 form2 加载中，我正在检索要在文本框中显示的选定行的值，但这给了我错误。这是我的代码：

```
 //this is in form1
   private void bufferedListView1_DoubleClick(object sender, EventArgs e)
    {
        form2 obj = new form2();
        obj.ShowDialog();
    }

   //in form2
   Form1 o = new Form1();
   private void form2_Load(object sender, EventArgs e)
    {
        txt_editname.Text = o.bufferedListView1.SelectedItems[0].SubItems[0].Text;
        txt_editno.Text = o.bufferedListView1.SelectedItems[0].SubItems[1].Text;
    } 
```

我得到的错误是：`InvalidArgument=Value of '0' is not valid for 'index'. Parameter name: index`

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:31:10.797

在form2的构造函数中传递所需的数据

```
public form2(string text1, string text2)
{
   //work with values
} 
```

并将调用代码更改为：

```
private void bufferedListView1_DoubleClick(object sender, EventArgs e)
{
    form2 obj = new form2(bufferedListView1.SelectedItems[0].SubItems[0].Text,
       bufferedListView1.SelectedItems[0].SubItems[1].Text);
    obj.ShowDialog();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:31:02.620

```
Form1 o = Application.OpenForms["Form1"] as Form1;
private void form2_Load(object sender, EventArgs e)
{
    txt_editname.Text = o.bufferedListView1.SelectedItems[0].SubItems[0].Text;
    txt_editno.Text = o.bufferedListView1.SelectedItems[0].SubItems[1].Text;
} 
```

您应该检索已经创建的 Form1 实例，而不是新实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T07:42:26.503

你的代码应该是这样的：

```
 //this is in form1
    private void bufferedListView1_DoubleClick(object sender, EventArgs e)
    {
        form2 obj = new form2
                        {
                            Name = o.bufferedListView1.SelectedItems[0].SubItems[0].Text,
                            No = o.bufferedListView1.SelectedItems[0].SubItems[1].Text,
                        };
        obj.ShowDialog();
    }

    //in form2
    public String Name;
    public String No;
    Form1 o = new Form1();
    private void form2_Load(object sender, EventArgs e)
    {
        txt_editname.Text = Name;
        txt_editno.Text = No;
    } 
```

# c++ - 如何在保持最大值和最小值的同时更新段树中的范围？

> ID：11814425
> 
> 赞同：4
> 
> 时间：2012-08-05T06:21:02.150
> 
> 标签：c++, algorithm, data-structures, segment-tree

我正在从一组数据中实现分段树，并且我还想在更新一系列数据时保持树的最大/最小值。[这是我遵循本教程http://p--np.blogspot.com/2011/07/segment-tree.html](http://p--np.blogspot.com/2011/07/segment-tree.html)的初步方法。不幸的是，它根本不起作用，逻辑对我来说很有意义，但我对`b`and有点困惑`e`，我想知道这是`data`数组的范围吗？还是树的实际范围？据我了解，`max_segment_tree[1]`应该保持`max`范围的`[1, MAX_RANGE]`，而`min_segment_tree[1]`应该保持`min`范围的`[1, MAX_RANGE]`。

```
int data[MAX_RANGE];
int max_segment_tree[3 * MAX_RANGE + 1];
int min_segment_tree[3 * MAX_RANGE + 1];
void build_tree(int position, int left, int right) {
    if (left > right) {
        return;
    }
    else if (left == right) {
        max_segment_tree[position] = data[left];
        min_segment_tree[position] = data[left];
        return;
    }

    int middle = (left + right) / 2;
    build_tree(position * 2, left, middle);
    build_tree(position * 2 + 1, middle + 1, right);
    max_segment_tree[position] = max(max_segment_tree[position * 2], max_segment_tree[position * 2 + 1]);
    min_segment_tree[position] = min(min_segment_tree[position * 2], min_segment_tree[position * 2 + 1]);
}

void update_tree(int position, int b, int e, int i, int j, int value) {
    if (b > e || b > j || e < i) {
        return;
    }

    if (i <= b && j >= e) {
        max_segment_tree[position] += value;
        min_segment_tree[position] += value;
        return;
    }

    update_tree(position * 2 , b , (b + e) / 2 , i, j, value);
    update_tree(position * 2 + 1 , (b + e) / 2 + 1 , e , i, j, value);

    max_segment_tree[position] = max(max_segment_tree[position * 2], max_segment_tree[position * 2 + 1]); 
    min_segment_tree[position] = min(min_segment_tree[position * 2], min_segment_tree[position * 2 + 1]);
} 
```

**编辑** 添加测试用例：

```
#include <iostream>
#include <iomanip>
#include <vector>
#include <string>
#include <algorithm>
#include <map>
#include <set>
#include <utility>
#include <stack>
#include <deque>
#include <queue>
#include <fstream>
#include <functional>
#include <numeric>

#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <cmath>
#include <cassert>

using namespace std;

const int MAX_RANGE = 20;
int data[MAX_RANGE];
int max_segment_tree[2 * MAX_RANGE];
int min_segment_tree[2 * MAX_RANGE];
int added_to_interval[2 * MAX_RANGE] = {0};

void update_bruteforce(int x, int y, int z, int &smallest, int &largest) {
    for (int i = x - 1; i < y; ++i) {
        data[i] += z;       
    }

    // update min/max
    smallest = data[0];
    largest = data[0];
    for (int i = 0; i < MAX_RANGE; ++i) {
        if (data[i] < smallest) {
            smallest = data[i];
        }

        if (data[i] > largest) {
            largest = data[i];
        }
    }
}

void build_tree(int position, int left, int right) {
    if (left > right) {
        return;
    }
    else if (left == right) {
        max_segment_tree[position] = data[left];
        min_segment_tree[position] = data[left];
        return;
    }

    int middle = (left + right) / 2;
    build_tree(position * 2, left, middle);
    build_tree(position * 2 + 1, middle + 1, right);
    max_segment_tree[position] = max(max_segment_tree[position * 2], max_segment_tree[position * 2 + 1]);
    min_segment_tree[position] = min(min_segment_tree[position * 2], min_segment_tree[position * 2 + 1]);
}

void update_tree(int position, int b, int e, int i, int j, int value) {
    if (b > e || b > j || e < i) {
        return;
    }

    if (i <= b && e <= j) {
        max_segment_tree[position] += value;
        min_segment_tree[position] += value;
        added_to_interval[position] += value;
        return;
    }

    update_tree(position * 2 , b , (b + e) / 2 , i, j, value);
    update_tree(position * 2 + 1 , (b + e) / 2 + 1 , e , i, j, value);

    max_segment_tree[position] = max(max_segment_tree[position * 2], max_segment_tree[position * 2 + 1]) + added_to_interval[position]; 
    min_segment_tree[position] = min(min_segment_tree[position * 2], min_segment_tree[position * 2 + 1]) + added_to_interval[position];
}

void update(int x, int y, int value) {
    // memset(added_to_interval, 0, sizeof(added_to_interval));
    update_tree(1, 0, MAX_RANGE - 1, x - 1, y - 1, value);
}

namespace unit_test {
    void test_show_data() {
        for (int i = 0; i < MAX_RANGE; ++i) {
            cout << data[i] << ", ";
        }

        cout << endl << endl;
    }

    void test_brute_force_and_segment_tree() {
        // arrange
        int number_of_operations = 100;
        for (int i = 0; i < MAX_RANGE; ++i) {
            data[i] = i + 1;
        }

        build_tree(1, 0, MAX_RANGE - 1);

        // act
        int operation;
        int x;
        int y;
        int z;
        int smallest = 1;
        int largest = MAX_RANGE;

        // assert
        while (number_of_operations--) {
            operation = rand() % 1; 
            x = 1 + rand() % MAX_RANGE;
            y = x + (rand() % (MAX_RANGE - x + 1));
            z = 1 + rand() % MAX_RANGE;

            if (operation == 0) {
                z *= 1;
            }
            else {
                z *= -1;    
            }

            cout << "left, right, value: " << x - 1 << ", " << y - 1 << ", " << z << endl;
            update_bruteforce(x, y, z, smallest, largest);
            update(x, y, z);
            test_show_data();

            cout << "correct:\n";
            cout << "\tsmallest = " << smallest << endl;
            cout << "\tlargest = " << largest << endl;

            cout << "possibly correct:\n";
            cout << "\tsmallest = " << min_segment_tree[1] << endl;
            cout << "\tlargest = " << max_segment_tree[1] << endl;
            cout << "\n--------------------------------------------------------------\n";
            cin.get();
        }
    }
}

int main() {
    unit_test::test_brute_force_and_segment_tree();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T09:11:37.443

您需要分别存储每个间隔的最大值/最小值，以及添加了哪些值（只是它们的总和）。以下是它可能出错的原因：

假设我们正在为数组 [5, 1, 3, 7] 构建一棵树（这里我只展示最小树）。树看起来像这样：

```
 1
 1   3
5 1 3 7 
```

然后我们在整个区间上加 1。树看起来像这样：

```
 2
 1   3
5 1 3 7 
```

因为更新的间隔完全覆盖了第一个节点，因此传播已在第一个节点上停止。

然后将 1 添加到范围 [0-1]。这个范围并没有覆盖第一个节点的整个区间，所以我们更新孩子，然后将整个区间的最小值（即第一个节点的值）设置为节点2和3的最小值。这里是结果树：

```
 2
 2   3
5 1 3 7 
```

这就是它出错的地方 - 数组中没有元素 2，但树声称整个数组的最小值是 2。发生这种情况是因为树的较低级别实际上从未获得其值所具有的信息增加了 - 第二个节点不知道它的值不是 [5, 1] 而是 [6, 2]。

为了使其正常工作，您可以添加第三个数组，以保留已添加到整个间隔的值 - 例如`int added_to_interval[3 * MAX_RANGE + 1];`. 然后，当您更新整个间隔时（其中 的情况`i <= b && j >= e`），您还必须`added_to_interval[position]`增加`value`. 此外，当上树以根据子节点的值更新节点时，您还必须添加已添加到整个区间的节点（例如`max_segment_tree[position] = max(max_segment_tree[position * 2], max_segment_tree[position * 2 + 1]) + added_to_interval[position];`）。

**编辑：**

以下是对代码进行的更改以使其正常工作：

```
if (i <= b && j >= e) {
    max_segment_tree[position] += value;
    min_segment_tree[position] += value;
    added_to_interval[position] += value;
    return;
} 
```

...

```
update_tree(position * 2 , b , (b + e) / 2 , i, j, value);
update_tree(position * 2 + 1 , (b + e) / 2 + 1 , e , i, j, value);

max_segment_tree[position] = max(max_segment_tree[position * 2], max_segment_tree[position * 2 + 1]) + added_to_interval[position];
min_segment_tree[position] = min(min_segment_tree[position * 2], min_segment_tree[position * 2 + 1]) + added_to_interval[position]; 
```

我没有对它进行广泛的测试——我把它留给你，但我尝试了一堆似乎可以正常工作的例子。

另外，我认为您不需要数组中的 3 * MAX_RANGE + 1 个元素 - 2 * MAX_RANGE 或类似的东西就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T07:24:30.320

**[b, e]**是范围，被***_segment_tree[ position ]**覆盖，**[i, j]**是当前查询的范围。
关于范围存储：
***_segment_tree[ 1 ]**保存整个数据数组的**最大值/最小值**- 它是树的根，因为基于数组的二叉树必须从**1**开始索引。这是因为树的第**n**个节点的子节点编号为**2*n**和**2*n + 1**，并且**0**不能用作**n**，因为在这种情况下**2*n = n**。因此，如果***_segment_tree[k]**持有**data[b, e]**的 min/max ，则***segment_tree[ 2*k ]**保存**数据[ b, ( b + e ) / 2 ]**的最小/最大值和***segment_tree[ 2*k + 1 ]** -**数据[ ( b + e ) / 2 + 1, e ]** - 您可以在代码中看到这些指标。

# redirect - Nginx 重定向到外部 URL

> ID：11814438
> 
> 赞同：6
> 
> 时间：2012-08-05T06:23:42.237
> 
> 标签：redirect, nginx, rewrite

我正在尝试做的是将所有请求路由到通过我的 Web 服务器`/rdr/extern_url`重定向到`extern_url`，而不是通过 PHP 进行。

```
location /rdr {
    rewrite ^/rdr/(.*)$ $1 permanent;
} 
```

`http://localhost/rdr/http://google.com`如果我访问我的浏览器告诉我，这里有什么问题：

```
Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects. 
```

如何正确重定向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T09:37:48.793

琐碎检查：

```
$ curl -si 'http://localhost/rdr/http://www.google.com' | head -8
HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.0
Date: Sun, 05 Aug 2012 09:33:14 GMT
Content-Type: text/html
Content-Length: 184
Connection: keep-alive
Location: http:/www.google.com 
```

如您所见，在.scheme 中只有一个斜杠`Location`。

将以下指令添加到后`server`：

```
merge_slashes off; 
```

我们会得到正确的答复：

```
$ curl -si 'http://localhost/rdr/http://www.google.com' | head -8
HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.0
Date: Sun, 05 Aug 2012 09:36:56 GMT
Content-Type: text/html
Content-Length: 184
Connection: keep-alive
Location: http://www.google.com 
```

* * *

从评论中可以清楚地看出，您可能希望将不带架构的主机名传递给重定向服务。要解决此问题，您需要定义两个位置来分别处理这两种情况：

```
server {
  listen 80;
  server_name localhost;
  merge_slashes off;

  location /rdr {
    location /rdr/http:// {
      rewrite ^/rdr/(.*)$ $1 permanent;
    }
    rewrite ^/rdr/(.*)$ http://$1 permanent;
  }
} 
```

在这里，我定义`/rdr/http://`了一个子位置，只是为了将重定向器服务保持在一个块中——在 -级别`/rdr`创建两个位置是完全有效的。`server`

# .net - 在空的 catch 块内抛出异常

> ID：11814440
> 
> 赞同：0
> 
> 时间：2012-08-05T06:24:04.230
> 
> 标签：.net, vb.net, exception

我有以下奇怪的错误；在空的 Catch 块上抛出异常！

任何想法如何实现以及如何解决？

谢谢！

[![废话](../Images/1ac0f5c54c79c3c72ee8a52adfbe66a4.png)](https://i.stack.imgur.com/xjGHI.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:36:06.310

它尝试并失败了，但是在 catch 中没有任何东西可以处理它，因此出现了 error `NullReferenceException was unhandled`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:42:49.967

好吧，我想我明白了……

```
For Each mediaPlayerID In _attachedDevices.Values.GroupBy(Function(t)t.MediaPlayerInfo.ID).Distinct()
    Try
        fileSystemPerMediaPlayerId.Add(mediaPlayerID.Key, New FileSystemOnDevice())
    Catch
    End Try
Next 
```

问题是由 GroupBy 方法内的 lambda 表达式中的空变量引起的...
编译器只是指向错误的行..

# php - 设置和使用 php-resque 的正确方法是什么？

> ID：11814445
> 
> 赞同：22
> 
> 时间：2012-08-05T06:25:16.430
> 
> 标签：php, resque

我正在尝试使用[php-resque](https://github.com/chrisboulton/php-resque)在我的服务器上排队和执行 ffmpeg 转换。我大致了解它应该如何工作，但是我在细节方面遇到了一些麻烦，并且找不到任何教程。具体来说，我不明白我应该把我的工作课程放在哪里，以及如何给我的工人上课并开始我的工人。读我只说“让你的应用程序进行中还包括告诉工人你的工作类别，通过自动加载器或包括它们。”

希望有人可以概述使用 php-resque 的整体结构。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-22T03:49:53.503

你可以把你的工作课程放在你想要的地方。这取决于您的应用程序结构。

# 如何创建工作类别

例如，假设`VideoConversion`用于 ffmpeg 转换的类。

```
class VideoConversion {

    public function perform() {
        // The code for video conversion here
    }

} 
```

在您的主应用程序中，在使用 php-resque 之前，假设您有类似的东西

```
public function uploadVideo() {
    // Upload and move the video to a temp folder
    // Convert the video
} 
```

并且您想将“转换视频”部分排入队列。让我们将它`convert`排入队列：

```
public function uploadVideo() {
    // Upload and move the video to a temp folder
    // Let's suppose you need to convert a 'source video' to a 'destination video'
    Resque::enqueue('convert', 'VideoConversion', array('origine-video.avi', 'destination-video.avi'));
} 
```

在排队作业时，我们将源视频和目标视频的路径传递给 VideoConversion 类。您可以传递其他参数，这取决于您的 VideoConversion 类的编写方式。

工作人员将轮询`convert`队列并执行`VideoConversion`作业。Worker 要做的是实例化 VideoConversion 类，并执行该`perform()`方法。

作业参数 ( `array('origine-video.avi', 'destination-video.avi')`)，使用 排队作业时的第三个参数`Resque::enqueue`，将在`perform()`方法中通过`$this->args`.

```
# VideoConversion.php
class VideoConversion
{
    public function perform() {
    // $this->args == array('origine-video.avi', 'destination-video.avi');
    // Convert the video
} 
```

## 查找您的工作类别

这个`VideoConversion`类可以放在任何地方，但你必须告诉你的员工在哪里可以找到它。有多种方法可以做到这一点

### 把你的工作类放在 include_path

在您的 .htaccess 或 apache 配置中，将包含所有作业类的目录添加到包含路径。您的工作人员会自动找到它们。

此方法的主要问题是您的所有作业类必须在同一个文件夹中，并且您的所有作业类在任何地方都可用。

### 告诉每个工人在哪里可以找到您的工作课程

启动工作程序时，使用`APP_INCLUDE`参数指向作业类“自动加载器”。

```
APP_INCLUDE=/path/to/autoloader.php QUEUE=convert php resque.php 
```

上面的命令将启动一个新的 worker，轮询名为`convert`. 我们还将文件*/path/to/autoloader.php*传递给worker。（[看这里学习开始工人](http://www.kamisama.me/2012/10/12/background-jobs-with-php-and-resque-part-4-managing-worker/)）

从技术上讲，工作人员会将该文件包含在`include '/path/to/autoloader.php';`.

然后，您可以告诉工人如何找到您的工作类别：

**使用基本包含**

在“/path/to/autoloader.php”中：

```
include /path/to/VideoConversion.php
include /path/to/anotherClass.php
... 
```

**使用自动装载机**

使用 php autoloader 加载您的作业类。

**采用`set_include_path()`**

```
set_include_path('path/to/job'); 
```

这样，你的工作`include_path`就适合这个工人。

## 结束思想

`APP_INCLUDE`绑定到您正在启动的工作人员。如果您正在启动另一个工人，请`APP_INCLUDE`再次使用。您可以为每个工作人员使用不同的文件。

您还可以设计您的作业类来执行多个作业。有一个[教程](http://www.kamisama.me/2012/10/13/background-jobs-with-php-and-resque-part-5-creating-jobs/)解释了如何做到这一点。它涵盖了从队列系统的基础到如何使用和实现它。

如果还不够，请查看 resque 文档。php-resque API 完全一样。唯一的区别是 Resque 作业类是用 Ruby 编写的，而 php-resque 的作业类是用 php 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T07:41:06.570

嗨，请查看以下关于如何将 resque 与 phalcon 一起使用的教程。 [http://www.mehuldoshi.in/background-jobs-phalcon-resque/](http://www.mehuldoshi.in/background-jobs-phalcon-resque/)

# c++ - 模板参数重新声明

> ID：11814447
> 
> 赞同：7
> 
> 时间：2012-08-05T06:25:22.390
> 
> 标签：c++, templates

这就是我想要实现的。叶组件将继承`Component<ParentT>`，其他组件将继承`Component<ParentT, ChildT>`

```
template <typename T>
class Component{
  protected:
    typedef Component<T> ParentComponentT;
  ...
};

template <typename ParentT, typename ChildT>
class Component: public Component<ParentT>{
  protected:
    typedef std::vector<ChildT*> CollectionT;
  ...
}; 
```

但问题是模板参数被重新声明。我不能将第二个移到第一个之上，因为第二个继承了第一个。

> 错误：使用 2 个模板参数重新声明
> 注意：先前的声明“模板类组件”使用了 1 个模板参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T07:43:58.400

这可以编译，据我所知，你喜欢什么：

```
#include <vector>

class NoneT {};

template <typename ParentT,typename ChildT=NoneT>
class Component: public Component<ParentT>{
  protected:
    typedef std::vector<ChildT*> CollectionT;
}; 
```

专业化`NoneT`：

```
template<>
template<typename T>
class Component<T,NoneT>{
protected:
   typedef Component<T> ParentComponentT;
};

int main(){
   typedef Component<double> someT;
   typedef Component<double,int> someT2;
   typedef Component<double,void> someT3;
} 
```

`someT`将拥有`ParentComponentT`并将`someT2`拥有`CollectionT`。

**编辑：**

回答以下评论/问题：`typename ChildT=noneT`表示默认`ChildT`为`noneT`. 因此，如果没有给出第二个模板参数，`noneT`则将使用该类型。

然后，专业化定义该单参数版本的类内容。

**编辑2：**

因为我从聊天中知道您使用 Component 作为基类，所以我建议不要使用类似的东西

```
class myclass: public Component<Section, Line> 
```

你可以使用多重继承

```
class myclass: public ParentComponent<Section>, CollectionComponent<Line> 
```

和

```
template <typename T>
class ParentComponent{
  protected:
    typedef Component<T> ParentComponentT;
};

template <typename ChildT>
class CollectionComponent {
  protected:
    typedef std::vector<ChildT*> CollectionT;
}; 
```

# c# - 获取 jquery ui 进度条以进行动画处理

> ID：11814448
> 
> 赞同：1
> 
> 时间：2012-08-05T06:26:15.880
> 
> 标签：c#, jquery, asp.net, progress-bar

`<div>`这些是用于表示进度条（jquery ui 进度条）的两个 s 的代码：

```
<div style="margin-left: 10px; margin-right: 10px; font-size: 10px;" id="progressbar2"> </div>
<div style="margin-left: 10px; margin-right: 10px; font-size: 10px;" id="progressbar"> </div> 
```

这是用于设置值并获取进度条值的 jquery

```
<script>   
$(document).ready(function() {
    var progValue1 = <%=ProgValue1%>;   
    var progValue2 = <%=ProgValue2%>;    
    $("#progressbar").progressbar({ value: progValue1});   
    $("#progressbar2").progressbar({ value: progValue2 });   
});   
</script> 
```

在后端代码上，这是我传输进度条值的方式：

```
private int _progValue1 = 100;
private int _progValue2 = 30;

public int ProgValue1 { get { return this._progValue1; } set { _progValue1 = value; } }
public int ProgValue2 { get { return this._progValue2; } set { _progValue2 = value; } } 
```

单击确认按钮时，这是 click 方法中用于更改进度条值的代码：

```
this.ProgValue1 = 0;
this.ProgValue2 = 100; 
```

这样我所做的就是将progressbar的值从100更改为0，将progressbar2的值从30更改为100。

**有没有办法以这种方式更改值，以便可以将其设置为动画，就好像第一个进度条逐渐减少到 0 并且 progressbar2 增加到 100？**

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:49:17.887

看看下面的...

```
<html>
<head>
<link type="text/css" href="jquery-ui-1.8.22.custom.css" rel="Stylesheet" />

<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.22.custom.min.js"></script>
<script type="text/javascript">
var increase = 0;
var decrease = 100;

$(document).ready(function() {
    var anim = setInterval(function(){
        $("#progressbar1").progressbar({
            value: increase ++          
        });
        $("#progressbar2").progressbar({
            value: decrease --          
        });
        if(increase == 100){
            // clearInterval(anim);
            increase = 0;
            decrease = 100;
        }
    }, 50);
});
  </script>
</head>
<body>
 <div id="progressbar1" style="width: 500px; height: 15px;"></div><br />
 <div id="progressbar2" style="width: 500px; height: 15px;"></div>
</body>
</html> 
```

当您删除此行的注释时动画停止`clearInterval(anim)`

希望这可以帮助！

# file-upload - 使用自定义属性加载器覆盖 struts 消息

> ID：11814463
> 
> 赞同：1
> 
> 时间：2012-08-05T06:32:02.377
> 
> 标签：file-upload, properties, struts2

我有一个带有 Spring 3 和 struts 2 的应用程序。我有自己的带有自定义消息的属性文件。这些文件在启动时使用 spring 动态加载。我在代码中的任何位置使用 PropertyCache.getMessage() 来获取这些自定义消息。这些消息资源完全由我的应用程序和 spring 控制。

现在我有一个文件上传的场景。上传限制在全局 struts 常量和“fileUpload”拦截器中配置。根据理论，当用户尝试上传大文件时，框架将显示其消息（我知道如何使用 struts 自定义它）。

由于我使用的是我自己的资源，我想使用我自己的“PropertyCache.getMessage()”方法显示我的自定义消息（不会使用“ **struts.messages.error.file.too.large ”）。**

如何覆盖 struts 错误消息，以便框架从我自己的资源而不是 struts 常量/struts 全局属性中获取消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:04:17.033

好吧，我没有看到任何直接解决您的问题的方法，因为上面的消息是在 fileUploader 拦截器下设置的，很可能有一些更灵活和最好的解决方案。

现在我可以建议您创建一个`FileUploaderInterceptor`，您可以使用您的 Spring 消息阅读器功能从您的自定义消息文件中读取消息并替换 Struts2`getTextMessage()`方法

1.  [文件上传拦截器](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.struts/struts2-core/2.1.6/org/apache/struts2/interceptor/FileUploadInterceptor.java)

# c# - 为什么我的用户控件会导致 Visual Studio 崩溃？

> ID：11814466
> 
> 赞同：2
> 
> 时间：2012-08-05T06:33:46.237
> 
> 标签：c#, windows-phone-7, xaml, user-controls

我花了一整天的时间试图弄清楚为什么这个用户控件会导致 VS2010（Windows Phone 7.1 开发）崩溃。应用程序运行此控件没有问题，但是当我在 MainPage.xaml 中进入设计模式时 - VS 崩溃。

```
<UserControl x:Class="blabla.Controls.Tile"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}">

    <UserControl.Resources>
        <Storyboard x:Name="SwitchSidesAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationX)" Storyboard.TargetName="FrontSide">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="90"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="90"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause1" KeyTime="0:0:6" Value="-90"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause2" KeyTime="0:0:6.2" Value="-90"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause3" KeyTime="0:0:6.4" Value="0"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause4" KeyTime="0:0:12" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationX)" Storyboard.TargetName="BackSide">
                <EasingDoubleKeyFrame KeyTime="0" Value="-90"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="-90"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause5" KeyTime="0:0:6" Value="0"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause6" KeyTime="0:0:6.2" Value="90"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause7" KeyTime="0:0:6.4" Value="90"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause8" KeyTime="0:0:12" Value="90"/>
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="FrontSide">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.2">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
                <DiscreteObjectKeyFrame KeyTime="0:0:0.4">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Collapsed</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
                <DiscreteObjectKeyFrame x:Name="MoveThisForPause9" KeyTime="0:0:6">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
                <DiscreteObjectKeyFrame x:Name="MoveThisForPause10" KeyTime="0:0:6.4">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
                <DiscreteObjectKeyFrame x:Name="MoveThisForPause11" KeyTime="0:0:12">
                    <DiscreteObjectKeyFrame.Value>
                        <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
            </ObjectAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="FrontSide">
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause12" KeyTime="0:0:6" Value="0"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause13" KeyTime="0:0:6.2" Value="0"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause14" KeyTime="0:0:6.4" Value="0"/>
                <EasingDoubleKeyFrame x:Name="MoveThisForPause15" KeyTime="0:0:12" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*" />
        </Grid.RowDefinitions>

        <!-- Front side -->
        <Grid x:Name="FrontSide" Grid.Column="0" Grid.Row="0"
              Background="{Binding FrontBackground}">
            <Image Source="{Binding FrontImage}" />
        </Grid>
        <!-- /Front side -->

        <!-- Back side -->
        <Grid x:Name="BackSide" Grid.Column="0" Grid.Row="0"
              Background="{Binding BackBackground}">
            <Grid.Projection>
                <PlaneProjection RotationX="-90" />
            </Grid.Projection>
            <Image Source="{Binding BackImage}" />
        </Grid>
        <!-- /Back side -->
    </Grid>
</UserControl> 
```

现在是代码。

```
namespace blabla.Controls
{
    public partial class Tile : UserControl
    {
        /// <summary>
        /// Defines if the tile has two sides.
        /// </summary>
        public bool IsTwoSided
        {
            get { return (bool)GetValue(IsTwoSidedProperty); }
            set
            {
                SetValue(IsTwoSidedProperty, value);

                this.startAnimations();
            }
        }

        /// <summary>
        /// Image that will be displayed on front side.
        /// </summary>
        public BitmapImage FrontImage
        {
            get { return (BitmapImage)GetValue(FrontImageProperty); }
            set { SetValue(FrontImageProperty, value); }
        }

        /// <summary>
        /// Image that ill be displayed on back side.
        /// </summary>
        public BitmapImage BackImage
        {
            get { return (BitmapImage)GetValue(BackImageProperty); }
            set { SetValue(BackImageProperty, value); }
        }

        /// <summary>
        /// Brush that will be used as background for front side.
        /// </summary>
        public Brush FrontBackground
        {
            get { return (Brush)GetValue(FrontBackgroundProperty); }
            set { SetValue(FrontBackgroundProperty, value); }
        }

        /// <summary>
        /// Brush that will be used as background for back side.
        /// </summary>
        public Brush BackBackground
        {
            get { return (Brush)GetValue(BackBackgroundProperty); }
            set { SetValue(BackBackgroundProperty, value); }
        }

        ///////////////////////////////////////////////////////////////////////////////////////////////////////

        public static readonly DependencyProperty IsTwoSidedProperty =
            DependencyProperty.Register("IsTwoSided", typeof(bool), typeof(Tile), new PropertyMetadata(false));

        public static readonly DependencyProperty FrontImageProperty =
            DependencyProperty.Register("FrontImage", typeof(BitmapImage), typeof(Tile), new PropertyMetadata(null));

        public static readonly DependencyProperty BackImageProperty =
            DependencyProperty.Register("BackImage", typeof(BitmapImage), typeof(Tile), new PropertyMetadata(null));

        public static readonly DependencyProperty FrontBackgroundProperty =
            DependencyProperty.Register("FrontBackground", typeof(Brush), typeof(Tile),
            new PropertyMetadata(new SolidColorBrush((Color)Application.Current.Resources["PhoneAccentColor"])));

        public static readonly DependencyProperty BackBackgroundProperty =
            DependencyProperty.Register("BackBackground", typeof(Brush), typeof(Tile),
            new PropertyMetadata(new SolidColorBrush((Color)Application.Current.Resources["PhoneAccentColor"])));

        ///////////////////////////////////////////////////////////////////////////////////////////////////////

        public Tile()
        {
            InitializeComponent();
            this.LayoutRoot.DataContext = this;
        }

        ///////////////////////////////////////////////////////////////////////////////////////////////////////

        /// <summary>
        /// Modifies animation frames' KeyTime to adjust time for new timing.
        /// <param name="pauseTime">Lenght of the pause.</param>
        /// </summary>
        private void setPauses(TimeSpan pauseTime)
        {
            // Sets pauses.
            EasingDoubleKeyFrame frameToModify;

            for(int i = 0; true; i++)
            {
                if(this.FindName("MoveThisForPause" + i) != null)
                {
                    frameToModify = (EasingDoubleKeyFrame)this.FindName("MoveThisForPause" + i);
                    frameToModify.KeyTime = KeyTime.FromTimeSpan(frameToModify.KeyTime.TimeSpan - TimeSpan.FromSeconds(5) + pauseTime);
                }
                else
                {
                    break;
                }
            }
        }

        /// <summary>
        /// Starts animations.
        /// </summary>
        /// <param name="beginTime">Usually delay before first-time animation.</param>
        private void startAnimations()
        {
            // We start animations only if the tile is two sided.
            if(this.IsTwoSided)
            {
                // Stopping previous animation.
                this.SwitchSidesAnimation.Stop();

                // Sets correct pauses.
                this.setPauses(TimeSpan.FromSeconds(new Random().Next(5, 10)));

                // Starts animation.
                this.SwitchSidesAnimation.BeginTime = TimeSpan.FromSeconds(new Random().Next(2, 15));
                this.SwitchSidesAnimation.RepeatBehavior = RepeatBehavior.Forever;
                this.SwitchSidesAnimation.Begin();
            }
            else
            {
                this.SwitchSidesAnimation.Stop();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:10:56.137

我已经能够重现这个崩溃，诚然使用非手机版本的 Silverlight，以及在 Visual Web Dev Express 中而不是完整版本的 VS。

问题最终归结为这两个依赖属性声明中指定的默认值：

```
 public static readonly DependencyProperty FrontBackgroundProperty =
        DependencyProperty.Register("FrontBackground", typeof(Brush), typeof(Tile),
        new PropertyMetadata(new SolidColorBrush((Color)Application.Current.Resources["PhoneAccentColor"])));

    public static readonly DependencyProperty BackBackgroundProperty =
        DependencyProperty.Register("BackBackground", typeof(Brush), typeof(Tile),
        new PropertyMetadata(new SolidColorBrush((Color)Application.Current.Resources["PhoneAccentColor"]))); 
```

在我将默认值替换为`null`（使用 Notepad++ 因为 Visual Web Dev Express 正在崩溃）、删除项目`bin`和`obj`文件夹并重新启动 Visual Web Dev Express 后，崩溃就消失了。当我重新启动 VWDX 时，它抱怨找不到 type `Tile`，但那是因为我删除了`bin`and`obj`文件夹。重建解决了这个问题。

我只能猜测到底是什么问题。在`Tile`类被静态初始化的时候，`Application.Current`可能是`null`，`Application.Current.Resources`可能是`null`，或者`Application.Current.Resources["PhoneAccentColor"]`可能是`null`（这会导致强制`Color`转换失败，就像`Color`a一样`struct`）。也许 VS 设计器不能很好地处理类型静态初始化期间抛出的异常？

顺便说一句，我还想指出另外几个潜在的问题。首先，这是您的`IsTwoSided`财产：

```
 /// <summary>
    /// Defines if the tile has two sides.
    /// </summary>
    public bool IsTwoSided
    {
        get { return (bool)GetValue(IsTwoSidedProperty); }
        set
        {
            SetValue(IsTwoSidedProperty, value);

            this.startAnimations();
        }
    } 
```

看起来您希望在依赖属性更改`startAnimations`时调用该方法。`IsTwoSided`您上面编写的代码将无法实现这一点。

当 Silverlight 更改依赖项属性的值时，它不会调用您的属性设置器来执行此操作。如果您希望在依赖属性的值更改时发生某些事情，请改用[属性更改回调](http://msdn.microsoft.com/en-us/library/cc903933(v=vs.95).aspx#metadata)。

其次，在 in 中`Tile.xaml`，您将`Storyboard`in声明`<UserControl.Resources>`如下：

```
 <Storyboard x:Name="SwitchSidesAnimation"> 
```

我建议使用`x:Key`而不是`x:Name`，原因有两个：

*   资源字典中的所有项目（隐式样式除外）都必须有一个`x:Key`或一个`x:Name`来标识它们。VS 支持使用`x:Name`代替`x:Key`，但这仅作为[遗留支持机制](http://msdn.microsoft.com/en-us/library/cc189012(v=vs.95).aspx)存在。

*   在用户控件 XAML 中的元素中使用`x:Name`会导致 VS`InitializeComponent()`在类的自动生成部分`Tile`（在`Tile.g.cs`obj\Debug 中的某处）中创建一个具有该名称的字段。然而，仅仅因为你可以坚持`x:Name`一个元素并不一定意味着你将能够访问生成字段中的相应对象。因为`SwitchSidesAnimation`在您的`Tile.xaml`（故事板不是 UIElements）中没有命名 UIElement，所以该`SwitchSidesAnimation`字段将始终为`null`.

    实际上，[x:Key 属性的 MSDN 文档](http://msdn.microsoft.com/en-us/library/cc189012(v=vs.95).aspx)（也链接到上面）提到

    > 使用键值的 FindName 调用不会检索键控资源

    （`FindName`是用于按名称查找控件的方法。如果您查看，`Tile.g.cs`您会看到它在那里使用。）

我建议始终`x:Key`在资源字典中使用，这样您就不会相信您可以直接在代码隐藏中访问此 Storyboard。

要在代码隐藏中访问情节提要，请使用

```
 this.Resources["SwitchSidesAnimation"] as Storyboard 
```

实际上，如果添加以下属性，则不必更改`startAnimations`方法：

```
 private Storyboard SwitchSidesAnimation
    {
        get { return this.Resources["SwitchSidesAnimation"] as Storyboard; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:57:12.873

我遇到了类似的问题（在开发 Silverlight 5 时），我花了将近 3 天的时间来挣扎，而且肯定会花费更多时间，但幸运的是我在这里找到了解决方案（作者 Luke Woodward）。

就我而言，我使用的是：

```
 public static readonly DependencyProperty MyStyleProperty = 
        DependencyProperty.Register(
            "MyStyle",
            typeof(Style), 
            typeof(MainButton), 
            new PropertyMetadata(
                    // using this construct as a default value 
                    // makes VS 2010 SP1 to crush!
                    Application.Current.Resources["SomeStyle"] as Style, 
                    OnPropertyChanged
            )
        ); 
```

所以这两个问题的共同点是使用一些资源值作为 DependencyProperty 的默认值。

但更悲剧的是，这个问题是在我申请了VS 2010的SP1之后才出现的（因为我想在Silverlight 5中开发，这需要VS 2010的SP1）。

这让我很头疼，也花了很多时间去搜索。

幸好现在已经解决了，谢谢！

# ruby-on-rails - 两个 :id 在 Rails 路线中用于 DELETE

> ID：11814468
> 
> 赞同：0
> 
> 时间：2012-08-05T06:34:11.977
> 
> 标签：ruby-on-rails, destroy

我有以下铁路路线

`model_name DELETE model_name/:id/comments/:id(.:format)`

我想知道当我调用`params[:id]`该`destroy`方法时，`:id`它需要什么？第一个还是第二个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:54:50.347

params[:id] 将采用第二个 id。第一个 id 值可以通过 params[:model_name_id] 访问

例如像 /posts/1/comments/4 这样的路线

参数[:id] = 4 参数[:post_id] = 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:48:01.813

你的路线应该是

`DELETE model_name/:model_id/comments/:id(.:format)`

所以 params[:model_id] 将采用第一个，而 params[:id] 将采用第二个（注释 id）

更多详情[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

# hadoop - 如何更新我的映射器仍然运行良好而不是生成超时的任务跟踪器？

> ID：11814469
> 
> 赞同：2
> 
> 时间：2012-08-05T06:34:20.697
> 
> 标签：hadoop, mapreduce

我忘记了要调用什么 API/方法，但我的问题是：

我的映射器将运行超过 10 分钟 - 我不想增加默认超时。

相反，我想让我的映射器将更新 ping 发送到任务跟踪器，当它位于消耗时间 > 10 分钟的特定代码路径中时。

请让我知道要调用什么 API/方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T10:49:50.103

您可以简单地增加一个计数器并调用`progress`。这将确保任务将心跳发送回 tasktracker 以了解其是否还活着。

在新 API 中，这是通过上下文管理的，请参见此处：[http ://hadoop.apache.org/common/docs/r1.0.0/api/index.html](http://hadoop.apache.org/common/docs/r1.0.0/api/index.html)

例如

```
@Override
protected void map(LongWritable key, Text value, Context context)
  throws IOException, InterruptedException {
    // increment counter
    context.getCounter(SOME_ENUM).increment(1);
    context.progress();
} 
```

在旧 API 中有记者类： [http ://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/Reporter.html](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/Reporter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:59:43.027

您通常使用[Reporter](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/Reporter.html)让框架知道您还活着。

从javadoc引用：

> Mapper 和 Reducer 可以使用提供的 Reporter 来报告进度或仅表明它们处于活动状态。**在应用程序花费少量时间来处理**单个键/值对的情况下，**这一点至关重要，因为框架可能会假设任务已超时**并终止该任务。

# python - NLTK CorpusReader 同时标记一个文件

> ID：11814474
> 
> 赞同：2
> 
> 时间：2012-08-05T06:35:26.900
> 
> 标签：python, nlp, token, nltk, corpus

我有数百个文档的语料库，我正在使用 NLTK PlaintextCorpusReader 来处理这些文件。唯一的问题是我需要`for`循环处理一个文件，这样我就可以计算这些文件的相似性。

如果我像这样初始化阅读器， `corpusReader = PlaintextCorpusReader(root, fileids = ".*")`它只会消耗所有文档，并且我找不到如何迭代文件而不是令牌的方法。

一种解决方案可能是为每个文件初始化 corpusReader，迭代其令牌，然后再次为另一个文件创建新的阅读器，但我认为这不是处理如此大数据的非常有效的方法。

感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T18:45:55.113

向语料库询问其文件列表，并一次请求一个文件，如下所示：

```
for fname in corpusReader.fileids():
    tagged = nltk.batch_pos_tag(corpusReader.sents(fname))
    out = open("tagged/"+fname, "w")
    <write tagged text to <out>> 
```

# javascript - jqtouch div页面加载旧数据

> ID：11814475
> 
> 赞同：1
> 
> 时间：2012-08-05T06:35:35.360
> 
> 标签：javascript, cordova, jqtouch

在我正在开发的 android 应用程序中，我使用的是 jqtouch。如您所知，对于 jqtouch，它将在 div 中定义的页面之间切换。

在这里，我有一个如下代码，因此当单击下一步按钮时，它将转到#start 页面。

```
<a id="continue" style="margin-bottom: 120px" href="#start" onclick="loadDb(this.id)" class="whiteButton slide">Continue</a>" 
```

但是有时，当单击继续按钮时，似乎没有调用 loadDb，并且 #start 页面没有更新为使用 loadDb 加载的新数据。它将在页面中显示以前的数据。看起来它是一个缓存页面。

有没有办法解决这个问题？

很多谢谢！

# java - JTable排序不显示图像

> ID：11814482
> 
> 赞同：1
> 
> 时间：2012-08-05T06:36:59.520
> 
> 标签：java, swing, sorting, jtable, tablerowsorter

所以我已经成功地在我的小程序中实现了一个搜索功能，但是当我单击按钮进行排序时，它工作正常但图像不显示。这是我为分拣机添加的代码，它工作正常，但每行的图像都没有显示出来。当我取出此代码时，图像会显示，但排序不起作用。我可以在排序时显示图像吗？

```
 // Sorter Code. Images show up when this code gets taken out.
    table = new JTable(model);
    final TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);
    table.setRowSorter(sorter);
    search_button.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
          String text = search.getText();
          if (text.length() == 0) {
            sorter.setRowFilter(null);
          } else {
            sorter.setRowFilter(RowFilter.regexFilter(text));
          }
        }
      });
   // sorter code ends here. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:46:40.250

*   必须将`JTable`s 视图与其模型同步，

*   看看方法`convertXxxIndexToXxx`

*   添加`int modelRow = convertRowIndexToModel(row);`到您的`Renderer`或`prepareRenderer`

*   [例子`convertRowIndexToModel`](https://stackoverflow.com/a/6901508/714968)

编辑

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.util.regex.PatternSyntaxException;
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.table.*;

public class TableIcon extends JFrame implements Runnable {

    private static final long serialVersionUID = 1L;
    private JTable table;
    private JLabel myLabel = new JLabel("waiting");
    private int pHeight = 40;
    private boolean runProcess = true;
    private int count = 0;
    private JTextField filterText = new JTextField(15);

    public TableIcon() {
        ImageIcon errorIcon = (ImageIcon) UIManager.getIcon("OptionPane.errorIcon");
        ImageIcon infoIcon = (ImageIcon) UIManager.getIcon("OptionPane.informationIcon");
        ImageIcon warnIcon = (ImageIcon) UIManager.getIcon("OptionPane.warningIcon");
        String[] columnNames = {"Picture", "Description"};
        Object[][] data = {{errorIcon, "About"}, {infoIcon, "Add"}, {warnIcon, "Copy"},};
        DefaultTableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;
            //  Returning the Class of each column will allow different
            //  renderers to be used based on Class

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model);
        table.setRowHeight(pHeight);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        final TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);
        table.setRowSorter(sorter);
        filterText.setMaximumSize(new Dimension(400, 30));
        filterText.setFont(new Font("Serif", Font.BOLD, 20));
        filterText.setForeground(Color.BLUE);
        filterText.getDocument().addDocumentListener(new DocumentListener() {

            private void searchFieldChangedUpdate(DocumentEvent evt) {
                String text = filterText.getText();
                if (text.length() == 0) {
                    sorter.setRowFilter(null);
                    table.clearSelection();
                } else {
                    try {
                        sorter.setRowFilter(RowFilter.regexFilter("(?i)" + text));
                    } catch (PatternSyntaxException pse) {
                        JOptionPane.showMessageDialog(null, "Bad regex pattern", "Bad regex pattern", JOptionPane.ERROR_MESSAGE);
                    }
                }
            }

            @Override
            public void insertUpdate(DocumentEvent evt) {
                searchFieldChangedUpdate(evt);
            }

            @Override
            public void removeUpdate(DocumentEvent evt) {
                searchFieldChangedUpdate(evt);
            }

            @Override
            public void changedUpdate(DocumentEvent evt) {
                searchFieldChangedUpdate(evt);
            }
        });
        add(filterText, BorderLayout.NORTH);
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane, BorderLayout.CENTER);
        myLabel.setPreferredSize(new Dimension(200, pHeight));
        myLabel.setHorizontalAlignment(SwingConstants.CENTER);
        add(myLabel, BorderLayout.SOUTH);
        new Thread(this).start();
    }

    public void run() {
        while (runProcess) {
            try {
                Thread.sleep(1250);
            } catch (Exception e) {
                e.printStackTrace();
            }
            SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                    ImageIcon myIcon = (ImageIcon) table.getModel().getValueAt(count, 0);
                    String lbl = "JTable Row at :  " + count;
                    myLabel.setIcon(myIcon);
                    myLabel.setText(lbl);
                    count++;
                    if (count > 2) {
                        count = 0;
                    }
                }
            });
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TableIcon frame = new TableIcon();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.setLocation(150, 150);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

# c# - 如何在 GridView 中使用 HyperLinkField 打开此文档？

> ID：11814485
> 
> 赞同：0
> 
> 时间：2012-08-05T06:38:13.427
> 
> 标签：c#, asp.net

我是一名新的 ASP.NET 开发人员，我正在尝试开发一个名为 Useful Library 的页面，该页面将包含许多内容，例如有用的演示文稿和 pdf 文档。我在服务器中有一个名为**(Useful Resources)**的文件夹，我将所有有用的演示文稿和文档都放入其中。我的数据库中有下表：

```
UsefulResources Table: ID, Category, Title, URL, Uploaded Date, Hits 
```

设计这张表的原因是为了组织资源。我现在希望能够浏览或下载这些文档。***例如，我有一个名为 (AP Presentation) 的演示文稿，它具有：***ID = 5 和 URL = AP Prsentation.pptx******

*我的 ASP.NET 代码：*

```
<asp:HyperLinkField DataNavigateUrlFields="ID,URL" 
                                DataNavigateUrlFormatString="Useful Resources/URL={0}" 
                                DataTextField="Title" HeaderText="Title" /> 
```

这部分有问题，我不知道如何修复它才能打开或下载此演示文稿，**那么该怎么做呢？**

供您参考，**该页面名为（Library.aspx）**，我没有任何代码隐藏

**更新：**

我现在拥有的链接如下：pmvt/msa/pssp/Useful%20Resources/ID=5

*顺便说一句，这是一个基于 Intranet Web 的应用程序，因此您将无法使用此链接访问它。*

我收到以下错误： ![在此处输入图像描述](../Images/c191ef1f0d30c36076cef1dd06540676.png)

**更新#2：** 这是我的 SqlDataSource 的 ASP.NET 代码：

```
<asp:SqlDataSource ID="Sql_Reports" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
                        SelectCommand="SELECT [ID], [Title], [URL], [UploadedDate] FROM [UsefulResources] WHERE ([Category] = @Category) ORDER BY [UploadedDate] DESC">
                        <SelectParameters>
                            <asp:ControlParameter ControlID="Label1" Name="Category" PropertyName="Text" 
                                Type="String" />
                        </SelectParameters>
                    </asp:SqlDataSource>
                    <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
                        CellPadding="4" DataSourceID="Sql_Reports" ForeColor="#333333" GridLines="None" 
                        Width="100%">
                        <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
                        <RowStyle BackColor="#E3EAEB" />
                        <Columns>
                            <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title">
                                <ItemStyle HorizontalAlign="Center" Wrap="False" Width="100px" />
                            </asp:BoundField>
                            <asp:HyperLinkField DataNavigateUrlFields="URL" 
                                DataNavigateUrlFormatString="Useful Resources?URL={0}" 
                                DataTextField="Title" HeaderText="Title" />
                            <asp:BoundField DataField="UploadedDate" DataFormatString="{0:MMM yyy}" HeaderText="UploadedDate" 
                                SortExpression="UploadedDate">
                                <ItemStyle HorizontalAlign="Center" Wrap="False" Width="100px" />
                            </asp:BoundField>
                        </Columns>
                        <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
                        <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
                        <HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
                        <EditRowStyle BackColor="#7C6F57" />
                        <AlternatingRowStyle BackColor="White" />
                    </asp:GridView> 
```

我仍然得到链接为***pmvt/msa/pssp/Useful%20Resources/?URL=Electrical%20safety.ppt***。我应该怎么做才能从该链接中删除***(?URL=)***以使链接正常工作。

**更新#2：**

以下是在数据库中使用其数据创建表的脚本：

```
/****** Object:  Table [dbo].[UsefulResources]    Script Date: 08/06/2012 07:08:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[UsefulResources](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Category] [varchar](max) NULL,
    [Title] [varchar](max) NULL,
    [URL] [nvarchar](max) NULL,
    [UploadedDate] [datetime] NULL,
    [Hits] [int] NULL,
 CONSTRAINT [PK_UsefulResources] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
SET IDENTITY_INSERT [dbo].[UsefulResources] ON
INSERT [dbo].[UsefulResources] ([ID], [Category], [Title], [URL], [UploadedDate], [Hits]) VALUES (1, N'PowerPoint Presentations', N'PMOD', N'Electrical safety.ppt', CAST(0x0000A0A000000000 AS DateTime), 1)
INSERT [dbo].[UsefulResources] ([ID], [Category], [Title], [URL], [UploadedDate], [Hits]) VALUES (2, N'Word Documents', N'Fire Drill Evaluation', N'Fire Drill Evaluation.docx', CAST(0x0000A0A300000000 AS DateTime), 1)
SET IDENTITY_INSERT [dbo].[UsefulResources] OFF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:18:38.087

404 错误（如您所见）意味着 Web 服务器找不到链接应该指向的页面。问题可能是 URL 的 Useful%20Resources/ID=5 部分。

通常，参数在 URL 末尾的问号后作为键=值对传递，例如 Useful%20Resources?ID=5。情况并非总是如此（尤其是在 MVC 应用程序中），因为您可以更改站点的路由数据以从给定 url 返回几乎任何页面，但我建议您先验证该位。摆脱 404 错误后，请查看您可能遇到的任何其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:36:52.090

我在一个 Web 项目中创建了一些目录，如下所示： **Documents/WhitePaper/Resources/PDF** 并将一些文档放在那里，**Word.doc、Excel.xls、PowerPoint.ppt**。现在在网格视图中：

```
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False"  
CellPadding="4" DataSourceID="SqlDataSource1" 
ForeColor="#333333" GridLines="None"  
Width="99%"> 
<FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" /> 
<RowStyle BackColor="#E3EAEB" /> 
<Columns> 
<asp:BoundField DataField="Category" HeaderText="Category" SortExpression="Title"> 
<ItemStyle HorizontalAlign="Center" Wrap="False" Width="100px" /> 
</asp:BoundField> 
<asp:HyperLinkField DataNavigateUrlFields="Url"  
DataNavigateUrlFormatString="{0}"  
DataTextField="Category" HeaderText="Category" /> 
</Columns> 
<PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" /> 
<SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" /> 
<HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" /> 
<EditRowStyle BackColor="#7C6F57" /> 
<AlternatingRowStyle BackColor="White" /> 
</asp:GridView> 

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT * FROM [UsefulResources]"></asp:SqlDataSource> 
```

此网格视图中的链接指向每个文件，单击时开始下载目标文件。数据库中的 Url 字段如下所示： ***~/Documents/WhitePaper/Resources/PDF/test.pdf***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T14:28:41.217

`Useful`我认为和之间的空白`Resources`会导致此错误。更正源文件的地址，然后重试：

```
<asp:HyperLinkField DataNavigateUrlFields="URL" 
                                DataNavigateUrlFormatString="{0}" 
                                DataTextField="Title" HeaderText="Title" /> 
```

# java - 保存图像时的JavaCV EXCEPTION_ACCESS_VIOLATION

> ID：11814486
> 
> 赞同：1
> 
> 时间：2012-08-05T06:39:18.323
> 
> 标签：java, opencv, video-processing, image-recognition, javacv

所以我正在使用 JavaCV 并尝试从 mp4 文件中将帧捕获为图像。当我尝试保存图像并且无法在任何地方找到解决方案时，我不断收到 EXCEPTION_ACCESS_VIOLATION。OpenCV、JavaCV 和 Java 都是相同的位数 (64)。我还安装了 64 位 Visual C++。这是我正在使用的代码，任何想法是什么导致了这种情况或替代解决方案是什么。提前感谢您的帮助。

```
 public class VideoTest {

        public static void main(final String args[]) {
            VideoTest vt = new VideoTest();
            IplImage[] images = vt.extractVideoFrames("video.mp4");
            int i = 1;
            //Save images
            for(IplImage image : images) {
                /* Exception_ACCESS_VIOLATION occurs here */
                cvSaveImage(Integer.toString(i) + ".jpg", image);
                i++;
            }
        }

        /* Extract at least 30 frames from the video at even intervals */
        private IplImage[] extractVideoFrames(String videoName) {
            FrameGrabber grabber = new FFmpegFrameGrabber(videoName);
            try {
                grabber.start();
            } catch (com.googlecode.javacv.FrameGrabber.Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            double frameLength = grabber.getLengthInFrames();
            int increment = (int) Math.ceil(frameLength / 30);
            if (frameLength < 30) {
                System.err.println("Not enough frames");
            }

            IplImage[] faceImgArr = new IplImage[30];

            /* Ensure we don't go past end of video and get at least 30 frames */
            for (int i = 0, j = 0; i < frameLength && j <= 30; i += increment, j++) {
                try {
                    if ((grabber.getFrameNumber() % increment) == 0) {
                        faceImgArr[j] = grabber.grab();
                    } else {
                        grabber.grabFrame();
                    }
                } catch (Exception e) {
                    System.err.println("Error grabbing frame");
                }
            }

            return faceImgArr;
        }

    }

Error Message:
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000066de1630, pid=1328, tid=7016
#
# JRE version: 6.0_32-b05
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.7-b02 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [opencv_ffmpeg242_64.dll+0x5a1630]
#
# An error report file with more information is saved as:
# C:\Users\name\workspace\Video\hs_err_pid1328.log
#

Snippet from log:
Stack: [0x0000000002900000,0x0000000002a00000],  sp=0x00000000029fec30,  free space=1019k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [opencv_ffmpeg242_64.dll+0x5a1630]  cvWriteFrame_FFMPEG+0x59e2b0

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.googlecode.javacv.cpp.opencv_highgui.cvCreateFileCapture(Ljava/lang/String;)Lcom/googlecode/javacv/cpp/opencv_highgui$CvCapture;+0
j  com.googlecode.javacv.OpenCVFrameGrabber.start()V+22
j  main.recognition.VideoTest.extractVideoFrames(Ljava/lang/String;)[Lcom/googlecode/javacv/cpp/opencv_core$IplImage;+10
j  main.recognition.VideoTest.main([Ljava/lang/String;)V+11
v  ~StubRoutines::call_stub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:46:40.547

通常访问冲突发生在 Javacv 代码中，因为变量超出范围（JNI 的行为与正常情况有点不同。请参阅这篇文章我如何解决我的访问冲突[http://tech.thecoolblogs.com/2012/10/exceptionaccessviolation -while-using.html](http://tech.thecoolblogs.com/2012/10/exceptionaccessviolation-while-using.html) )

要解决您的问题，请首先在一个范围内尝试整个代码。我的意思是在一种方法中和一次尝试中..catch 块。如果可行，我们可以假设此问题显然与某些变量超出范围有关。然后尝试移动 IplImage 创建并查看它是否消失。

如果它仍然不起作用（合并到相同的方法和范围后），请检查临时文件夹（C:\users\ur id\AppData\Local\Temp\javacpp** 文件夹以查看是否复制了 dll 文件

# android - 无法在清单中注册活动？

> ID：11814487
> 
> 赞同：2
> 
> 时间：2012-08-05T06:39:22.650
> 
> 标签：android, android-intent, android-activity, start-activity

在我问我的问题之前，我看到[`android intent filter?`](https://stackoverflow.com/questions/11701780/android-intent-filter)并[`Android: Activity not registered in the manifest`](https://stackoverflow.com/questions/9852864/android-activity-not-registered-in-the-manifest)搜索了[`this`](https://stackoverflow.com/search?page=2&tab=relevance&q=activity%20register)，但我找不到我的答案。
在我的应用程序中，我必须以 . 开始`Activty1`表单`IntentFilterActivity`（两者都是活动）。这`implicit Intent`是我的代码：

*   显现

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.your.namespace"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="2" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".IntentFilterActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:label="Activity1"
            android:name="com.your.namespace.Activity1" >
            <intent-filter >
                <action android:name="com.your.namespace.MY_MAIN"/>

                <category android:name="com.your.namespace.MY_LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>

    </manifest> 
    ```

*   IntentFilterActivity

    ```
    package com.your.namespace;

    public class IntentFilterActivity extends Activity {
    protected String action = "com.your.namespace.MY_MAIN";
    protected String category = "com.your.namespace.MY_LAUNCHER";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button b1 = (Button) findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent i = new Intent(IntentFilterActivity.this,Activity1.class);
                IntentFilterActivity.this.startActivity(i);
            }
        });

        Button b2 = (Button) findViewById(R.id.button2);
        b2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i = new Intent();
                i.setAction(action);
                i.addCategory(category);
                IntentFilterActivity.this.startActivity(i);
            }
        });
    }
    } 
    ```

*   活动1

    ```
    package com.your.namespace;

    public class Activity1 extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);
    }
    } 
    ```

首先，我有一个按钮（比如说`b2`），`R.layout.main`在它的 onClick 事件中，我尝试使用隐式 Intent 启动 Activity1。但是当我单击它时，我收到了这个错误：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.your.namespace.MY_MAIN cat=[com.your.namespace.MY_LAUNCHER] } 
```

因此，我在 onClick 事件中添加了另一个 Buuton（例如`b1`）`R.layout.main`，我尝试使用显式 Intent 启动 Activity1，并且 Activity1 启动良好。所以我的问题在于在清单中注册 Activity1。
我试图更改包名称，清理/构建项目，创建一个新项目并从那里开始，在另一台计算机上的 eclipse 中导入项目，重新启动 eclipse 和......但我得到错误。我的项目只有一个包（`com.your.namespace`） .
我做错了什么？请帮我解决这个问题。
**编辑**：
当我将 Activty1 的 Intent 过滤器更改为：

```
<intent-filter >
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

并运行应用程序，应用程序的图标出现两次`Launcher`！这很奇怪，一个意图过滤器似乎被忽略了，另一个过滤器没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:17:52.810

尝试这个：

```
<activity
    android:label="Activity1" android:name="com.your.namespace.Activity1" >
    <intent-filter >
        <action android:name="com.your.namespace.MY_MAIN"/>

        <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter>
</activity> 
```

注意变化：**android.intent.category.DEFAULT**

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:56:41.690

感谢 Zelter Ady 的回答，我搜索了一下`startActivity()`，`"android.intent.category.DEFAULT"`发现***文档***说：

> 因此，原则上，一个没有类别的 Intent 对象应该总是通过这个测试，不管过滤器中有什么。这大多是真的。但是，除了一个例外，Android 将所有传递给 startActivity() 的隐式意图视为至少包含一个类别：“android.intent.category.DEFAULT”（CATEGORY_DEFAULT 常量）。因此，愿意接收隐式意图的活动必须在其意图过滤器中包含“android.intent.category.DEFAULT”。（具有“android.intent.action.MAIN”和“android.intent.category.LAUNCHER”设置的过滤器是例外。它们标记开始新任务并在启动器屏幕上表示的活动。它们可以包括“android.intent .category.DEFAULT" 在类别列表中，但不要

我希望这可以帮助任何有同样问题的人。

# opengl-es - WebGL/OpenGL：根据设备方向旋转相机

> ID：11814488
> 
> 赞同：2
> 
> 时间：2012-08-05T06:39:27.507
> 
> 标签：opengl-es, webgl, three.js

我有一个 Web 应用程序，我试图在 3D 空间中显示地图图像图块的平面。

我希望飞机始终保持水平，但设备旋转，最终效果类似于[这个航海指南针演示](http://people.opera.com/richt/release/demos/orientation/marinecompass/)。

我现在可以通过用于移动设备的 W3C 设备方向 API 捕获设备方向，并且我成功地渲染了地图图像图块。

我的问题是我缺乏如何根据设备方向正确旋转相机的基本数学知识。

我正在使用 Three.js 库。我尝试直接通过 alpha/beta/gamma（转换为弧度）设置相机对象的旋转。但它不起作用，因为相机似乎总是根据 openGL/webGL 使用的世界轴而不是根据其本地轴旋转。

我遇到了在相机前面旋转一个点 100 单位并通过设备方向 API 提供的角度相对于相机位置旋转该点的想法。但我也不知道如何实现这一点。

任何人都可以帮助我实现我想要实现的目标吗？

编辑：

错误更正：

对于任何有兴趣实现类似事情的人，我发现 Three.js 对象默认使用本地空间轴，而不是世界空间轴，我错了。虽然官方文档声明通过设置“object.matrixAutoUpdate = false”然后修改“object.matrixWorld”并调用“object.updateWorldMatrix()”，您可以手动移动/旋转/缩放世界轴上的对象。但是当对象有父对象时它不起作用，当对象有父对象时将始终使用局部轴矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T16:12:43.280

根据 W3C 设备定向事件规范，角 `alpha`和 `beta` 形成 `gamma` 一组 ZX'-Y'' 类型的固有 Tait-Bryan 角。

Three.js 相机也根据内在角度旋转。但是，应用旋转的默认顺序是：

```
camera.rotation.order = 'XYZ'. 
```

那么，您需要做的是设置：

```
camera.rotation.order = 'ZXY'; // or whatever order is appropriate for your device 
```

然后像这样设置相机旋转：

```
camera.rotation.x = beta * Math.PI / 180;
camera.rotation.y = gamma * Math.PI / 180;
camera.rotation.z = alpha * Math.PI / 180; 
```

免责声明：我没有您的设备类型。这是基于我对 three.js 的了解的有根据的猜测。

编辑：更新为three.js r.65

# mysql - 选择语句中的子查询混淆

> ID：11814489
> 
> 赞同：0
> 
> 时间：2012-08-05T06:40:43.140
> 
> 标签：mysql, subquery, alias

这是我的语法：

```
select firstname from (select * from inquiry where id = 2 ) as inner   ; 
```

我对将表的别名放在哪里感到困惑。我使用了上面的语法，但它会导致错误：

> 你的 sta 有错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:43:09.113

`INNER`是 MySQL 的保留关键字，如果您尝试将其用作别名，则会引发错误。

要么在单词“inner”周围放置反引号（`），要么只使用不同的别名：

```
SELECT a.firstname 
FROM   (SELECT * FROM inquiry WHERE id = 2) a 
```

# java - 在循环中按名称访问变量

> ID：11814490
> 
> 赞同：8
> 
> 时间：2012-08-05T06:40:55.540
> 
> 标签：java, android

我正在开发一个 Android 项目，我有很多可绘制对象。这些drawables都被命名为`icon_0.png`，`icon_1.png`...。`icon_100.png`我想将这些可绘制对象的所有资源 ID 添加到整数的 ArrayList 中。（对于那些不了解android，只知道Java的人，我说的是静态变量，在一个类的静态内部类中，比如`R.drawable.icon_0`。所有这些静态变量都是整数。）

有没有比一个一个添加更有效的方法呢？喜欢

```
ArrayList<Integer> list = new ArrayList<Integer>();
list.add(R.drawable.icon_1);
list.add(R.drawable.icon_2);
...
list.add(R.drawable.icon_100); 
```

我可以以某种方式遍历它们吗？喜欢

```
for(int i=0; i<100; i++)
{
    list.add(R.drawable.icon_+i);  //<--- I know this doesn't work.
} 
```

我无法控制这些静态整数所在的文件，也无法在运行时创建可绘制对象。

任何帮助，将不胜感激！

**编辑**

好的，我阅读了答案，但我有一个主要问题：我无权访问任何`Context`需要创建此 ID 数组/列表的实例（我在静态初始化程序块中执行此操作），因此 getResources()方法，建议的两个答案都行不通。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:08:30.590

`values`在您的目录中的文件夹中创建一个 XML 文件`resource`。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<array name="myIcons">
    <item>@drawable/icon1</item>
    <item>@drawable/icon2</item>
    <item>@drawable/icon3</item>
    <item>@drawable/icon4</item>
    <item>@drawable/icon5</item>
    ...
    ...
</array>
</resources> 
```

通过下面的代码，你会明白的。

```
Resources res = getResources();
TypedArray myIcons= res.obtainTypedArray(R.array.myIcons);  //mentioned  in the XML
for(int i=0; i<100; i++)
{
    Drawable drawable = myIcons.getDrawable(i);
    list.add(drawable);  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T06:49:42.697

你可以试试这个。`YourClassName.class.getFields();`

`Field[] fields = R.drawable.class.getFields();`

您可以迭代所有字段，如果您的字段超出您的需要，您可能需要对其进行过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T06:52:20.300

一种方法是使用反射 API。

类似的东西...

```
Field[] fields =  R.drawable.class.getFields();
List<String> names = new ArrayList<String>(); 
for (Field field : fields) {
    if(field.getName().startsWith("icon")) 
       names.add(field.getName());    
}

int resid = getResources().getIdentifier(names.get(0), "drawable", "com.org.bla"); 
```

我没有测试过这个，但你明白了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T10:27:08.970

这是我最终做的事情：

```
icons = new ArrayList<Integer>(100);

//get all the fields of the R.drawable class.       
Field  [] fields = R.drawable.class.getDeclaredFields();

//create a temporary list for the names of the needed variables.
ArrayList <String> names = new ArrayList<String>(100);

//select only the desired names.
for(int i=0; i<fields.length; i++)
    if(fields[i].getName().contains("icon_"))
        names.add(fields[i].getName());

//sort these names, because later i want to access them like icons.get(0)
//what means i want icon_0.
Collections.sort(names);

try
{
    for(int i=0; i<names.size(); i++)
    {
        //get the actual value of these fields, 
        //and adding them to the icons list.
        int id = R.drawable.class.getField(names.get(i)).getInt(null);
        icons.add(id);
    }
}
catch(Exception ex)
{
    System.out.println(ex.getMessage());
} 
```

我敢肯定，这不是最快的方法，但它正在工作。我会接受 AljoshaBre 的解决方案，因为他的回答使我找到了这个解决方案。

感谢大家的帮助！

# java - 如何解析原始cookie

> ID：11814493
> 
> 赞同：1
> 
> 时间：2012-08-05T06:42:31.417
> 
> 标签：java, http, cookies

如何解析原始 cookie 字符串。

它必须返回 javax.servlet.http.Cookie 对象。

像这样的原始cookie：

```
Set-Cookie: BAIDUID=66AA214F9A534411A339CE5E60D36E28:FG=1; expires=Sun, 05-Aug-42 06:41:06 GMT; path=/; domain=.baidu.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:52:30.260

我不明白您面临的困难是什么-您尝试了什么？

*   `String[] pairs = String.split(";")`将为您提供一组名称-值对。
*   在每个名称-值对上，`pair.subString(0, pair.indexOf(':') + 1)`将为您提供名称
*   `pair.subString(pair.indexOf(':') + 1, pair.length - (pair.indexOf(':') + 1))`会给你价值
*   拉出`pair.indexOf(':')`变量并重用

# android - 从 Android 内存中读取 SQLITE 数据库

> ID：11814495
> 
> 赞同：4
> 
> 时间：2012-08-05T06:42:33.750
> 
> 标签：android, database, sqlite, sqliteopenhelper

我在 Java 应用程序上创建了一个 sqlite 数据库并将其推送到我的 android。我想读这个数据库（以后也可能写进去）。到目前为止，我发现的大多数教程都在 android...

我认为我不需要覆盖 SQLiteOpenHelper 类的 onCreate() 和 onUpdate() 方法，对吗？还有他在下面的教程中创建表的部分，因为我已经有了我的数据库

你们可能知道的任何教程、示例代码？

```
public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "contactsManager";

    // Contacts table name
    private static final String TABLE_CONTACTS = "contacts";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_PH_NO = "phone_number";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PH_NO + " TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

        // Create tables again
        onCreate(db);
    } 
```

我只需要打开我在内存中的数据库，对我的数据库执行一个 sql 查询并获得结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:04:57.717

您必须先将数据库从资产复制到设备上的应用程序存储区域（或其他可访问位置），然后才能使用它。您不能直接从 .apk 文件中使用它。

如何去做的一个例子：

```
public class DBAdapter { 

// DB info 
public static final String MAIN_DATABASE_NAME = "yourDB"; 
public static String MAIN_DB_PATH = "/data/data/your.package.name/databases/"; 
public static final int MAIN_DATABASE_VERSION = 1; 

// database control 
private DatabaseHelper mDbHelper; 
private static SQLiteDatabase mDb; 
private static Context mCtx; 

private static class DatabaseHelper extends SQLiteOpenHelper { 
    DatabaseHelper(Context context, String dbname, int dbversion) { 
        super(context, dbname, null, dbversion); 
        if (checkDataBase(dbname)) { 
            openDataBase(dbname); 
        } else { 
            try { 
                this.getReadableDatabase(); 
                copyDataBase(dbname); 
                this.close(); 
                openDataBase(dbname); 
            } catch (IOException e) { 
                throw new Error("Error copying database"); 
            } 
            Toast.makeText(context, 
                    "Initial " + dbname + " database has been created", 
                    Toast.LENGTH_LONG).show(); 
        } 
    } 

    @Override 
    public void onCreate(SQLiteDatabase db) { 
    } 

    @Override 
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
    } 
} 

public DBAdapter(Context ctx) { 
    DBAdapter.mCtx = ctx; 
} 

public DBAdapter open(String dbname, int dbversion) throws SQLException { 
    mDbHelper = new DatabaseHelper(mCtx, dbname, dbversion); 
    mDb = mDbHelper.getWritableDatabase(); 
    return this; 
} 

public void close() { 
    mDbHelper.close(); 
} 

private static void copyDataBase(String dbname) throws IOException { 
    InputStream myInput = mCtx.getAssets().open(dbname); 
    String outFileName = MAIN_DB_PATH + dbname; 
    OutputStream myOutput = new FileOutputStream(outFileName); 
    byte[] buffer = new byte[1024]; 
    int length; 
    while ((length = myInput.read(buffer)) > 0) { 
        myOutput.write(buffer, 0, length); 
    } 
    myOutput.flush(); 
    myOutput.close(); 
    myInput.close(); 
} 

private static boolean checkDataBase(String dbname) { 
    SQLiteDatabase checkDB = null; 
    boolean exist = false; 
    try { 
        String db = MAIN_DB_PATH + dbname; 
        checkDB = SQLiteDatabase.openDatabase(db, null, 
                SQLiteDatabase.OPEN_READONLY); 
    } catch (SQLiteException e) { 
        Log.v("db log", "database does't exist"); 
    } 
    if (checkDB != null) { 
        exist = true; 
        checkDB.close(); 
    } 
    return exist; 
} 

private static void openDataBase(String dbname) throws SQLException { 
    String dbPath = MAIN_DB_PATH + dbname; 
    mDb = SQLiteDatabase.openDatabase(dbPath, null, 
            SQLiteDatabase.OPEN_READWRITE); 
} 
} 
```

# git - 多个类似（但不相同）部署的版本控制工作流程

> ID：11814499
> 
> 赞同：7
> 
> 时间：2012-08-05T06:45:32.500
> 
> 标签：git, deployment, version-control, stylesheet, reversion

我目前受雇于一家小型非技术组织，并被赋予为该组织的网站编码的角色。虽然我很享受这项任务并且在网络开发方面学到了很多东西，但我遇到了一些问题，我希望有人能够帮助我，或者至少为我指明正确的方向。

### 一点背景：

我工作的网站有子域，每个子域都有自己单独的 WordPress 安装 - 因为对于负责更新内容（等）的用户类型，这是最简单的“后端”管理面板。

在组织内，我在营销经理 (MM) 手下工作，并根据他的风格指南和线框进行编码。

虽然自今年年初以来我们只使用一个子域，但该项目相对简单明了。然而，最近工作流程变得有点复杂，因为我们的原始子域已被复制到其他子域。每个新的子域都会对其样式表进行细微的修改（例如，不同的背景图片，这里和那里的颜色略有不同等）。

### 问题：

目前管理所有不同的子域是“可以忍受的”，但目前压住骆驼的最后一根稻草是 MM 需要的轻微恢复，因为 CEO 已经看到了最终产品。我在样式表中遇到的问题是 CEO 会在一周内声明他喜欢更改“X”，然后作为 MM 和我继续修改网站（现在是“Z”），另一周会声明他希望我们将“X”更改为“W”，但保留“Y”中所做的大部分更改。

我正在寻找的是允许：

*   跟踪文件更改
*   恢复所做的更改（或从“e”恢复到“a”，但包括更改“b”和“c”）
*   轻松将必要的文件上传到各自的 WP 主题安装

有什么东西可以解决这些问题吗？如果是这样，是什么？

谢谢你的帮助！

PS - 我现在正在学习 Git，它似乎很好地完成了“跟踪文件更改”。不过，还没有了解还原更改位。也许对于我的最后一点，我正在考虑创建一个 shell 脚本来自动将文件上传到他们的文件夹。Git也这样做吗？

* * *

附录（alexbbrown）

我有一个类似的问题：我运行了一个自定义版本的 mediawiki，我在版本化核心中安装了各种扩展（使用 svn）。每个扩展都需要 confit 文件中的一个部分，但 confit 文件还需要针对多个部署中的每一个进行本地配置。我本可以使用包含来实现它，但它们不会被版本化；每次重新设置分支都是一件苦差事。+50 经验值在 git 中的一个好的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T05:56:15.000

Git会让你做你需要的。

我将使用包含每个子域的单个存储库作为分支，因为根据我的经验，这将允许您以最简单的方式在子域之间移动更改。

我将假设您有一个`core`分支的结构，以及几个`subdomainX`分支，每个分支都有自己的本地更改要维护。我还将假设您有一个`develop`分支，您可以在其中进行核心更改。

您需要执行几个关键操作：

### 您已在开发中进行了更改，该更改应适用于所有子域

将更改从开发拉到核心

```
git checkout core
git merge develop 
```

将更改应用到子域分支。对于每个子域运行

```
git checkout subdomainX
git rebase core 
```

或者如果您更喜欢合并而不是变基（我发现这种情况变得过于混乱 - 但其他人可能不同意）

```
git checkout subdomainX
git merge core 
```

如果您有很多子域分支，那么我会编写此脚本。这会将所有名称中包含“子域”的本地分支重新定位到`core`.

```
for i in $( git branch | cut -b 3- | grep subdomain ) ; do
   git checkout $i
   git rebase core
end 
```

### 您对要拉入所有其他子域的子域进行了更改

首先，您需要您要应用的更改的 SHA（如果您还没有，请检查它）。

接下来，您将仅将该更改拉入开发分支，然后进入`core`

```
git checkout develop
git cherry-pick THE_SHA_OF_YOUR_CHANGE
git checkout core
git merge develop 
```

然后您只需运行上面的脚本即可将更改推送到所有子域分支。

### 你已经做了一些应该在任何地方撤消的更改

```
git checkout develop
git revert THE_BAD_SHA
git checkout core
git merge develop 
```

然后运行脚本。

### 您想比较两个子域。

如果两个分支被调用`subdomainA`，`subdomainB`你可以做

```
git diff subdomainA subdomainB 
```

### 您想查看 subdomainA 中有哪些更改，但不是`core`- 即本地更改。

可以通过以下方式获得对文件的更改：

```
git diff subdomainA core 
```

变更集的实际列表由

```
git log core..subdomainA 
```

### 处理分布

有两种方法可以处理这个问题：

*   制作一个小脚本来复制每个分支的文件（我会用它`rsync`来避免复制现有文件等）。这样做的好处是速度很快，并且在您部署到的服务器上不需要 git。
*   使每个子域文件成为 git 存储库的副本。然后，您的脚本将 ssh 到每个框并拉/合并文件。这样做的一个优点是您可以在实时服务器上进行更改并将它们轻松地拉回您的存储库。缺点包括您需要将存储库设置`bare`为所有存储库的来源，并且会占用更多空间。（但是，IMO 在这种情况下的优势大于劣势，我将使用这种方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:36:35.047

Michael 的回答很好，但我认为还有一个观点值得一提：[Branch by Abstraction](http://paulhammant.com/blog/branch_by_abstraction.html) (BBA) 而不是传统的“Branch by Source Control”。我认为你应该重新组织你的源代码，以便共享代码应该作为显式共享代码而不是通过魔法合并/变基共享。

也许值得引入某种构建脚本来重新排列代码并运行一些测试来检查正确性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:34:27.393

实施 git 的好主意！它绝对是开发过程中不可缺少的工具。正如您所提到的，git 肯定会解决您的“跟踪文件更改”问题，并且还可以解决其他问题，只是有更多的学习曲线。git 上有很多很棒的资源，但是如果您想更好地了解 git 是什么（以及它不是什么）以及它是如何工作的，我建议您[从下往上阅读 Git](http://ftp.newartisans.com/pub/git.from.bottom.up.pdf)。

使用 git 可以很容易地恢复更改。首先，您可能需要查看您的提交历史以找到您想要恢复的提交。这可以通过使用`git log`命令简单地完成（确保您在 git 跟踪的目录中）。[这里](http://git-scm.com/book/en/Git-Basics-Viewing-the-Commit-History)有更多关于这方面的信息。一旦您知道要恢复到的提交，您需要做的就是利用与该特定提交关联的哈希并`git reset --hard 6e3e02050a`在`6e3e02050a`您的提交的唯一哈希处运行。更多信息，包括你可以用它做的一些很酷的事情，[在这里](http://learn.github.com/p/undoing.html)。这将立即将您跟踪的所有文件恢复到该特定提交（您也可以恢复单个文件）。

信不信由你，git 还可以帮助您在需要时自动将代码推送到服务器。这有点高级，并利用了`post-receive hook`. 这有助于从开发到生产站点的部署。正如我所提到的，这是更高级的，所以我不会在这里详细介绍，但是有一个很棒的教程，其中包含您在[wp.tutsplus.com](http://wp.tutsplus.com/tutorials/hosting/wordpress-development-and-deployment-with-mamp-git-and-dropbox/)上想要的内容（特别是第 4 步）。

现在所有这些事情对于单个安装来说都很容易，但是当您有许多站点都连接到同一个开发过程时，它会变得有点复杂。同样，git 有一些选择。

我猜在这一点上你可能知道一点`branching`，如果没有的话，那里有[很多资源](http://learn.github.com/p/branching.html)。分支允许您从主要的“主”分支开始探索甚至完全独立的项目。对于所有基于相同主代码的不同安装，这听起来正是您想要的。分支的另一个好处是，您可以使您的分支与主分支的任何更改保持同步，并在需要时将它们合并回来。另一种选择是克隆。这是不同的，因为您实际上是在复制整个存储库，而不仅仅是从您当前拥有的内容中分支出来。更多信息在[这里](http://gitref.org/creating/)。

找出设置所有内容的最佳方法可能需要一段时间，但我可以保证，一旦你有了某种流程，你会对 git 可以给你的选项和安心感到非常满意。

# python - Python shell 中未显示 stderr（来自 GDAL）

> ID：11814503
> 
> 赞同：2
> 
> 时间：2012-08-05T06:46:37.740
> 
> 标签：python, stderr, gdal

我想在[GDAL](http://www.gdal.org/)的 Python shell 中看到更多错误消息，但我似乎无法弄清楚如何捕获它们（它们存在的地方）。例如，打开一个不存在的 GeoTIFF 文件：

```
from osgeo import gdal
ds = gdal.Open('noexist.tif') 
```

在交互式 Python shell（PythonWin 或 IDLE）上完全没有显示任何内容。但是，如果这些命令在系统 shell（Bash、cmd.exe 等）中运行或将其保存为`showit.py`文件，则会出现“隐藏”错误消息：

```
C:\>c:\Python32\python.exe showit.py
ERROR 4: `noexist.tif' does not exist in the file system,
and is not recognised as a supported dataset name. 
```

这是发送到`stderr`系统 shell 的有用错误消息。任何想法如何也可以在 Python 交互式 shell 中显示，或者一般被捕获？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:30:56.160

查看 python gdal 陷阱。我相信您可以通过在初始导入后简单地调用 gdal.UseExceptions() 来完成这项工作。像这样：

```
from osgeo import gdal
gdal.UseExceptions()
gdal.Open('myfile.tif") 
```

资料来源：[http ://trac.osgeo.org/gdal/wiki/PythonGotchas](http://trac.osgeo.org/gdal/wiki/PythonGotchas)

# html - Sublime Text 2 新文件的默认文件类型

> ID：11814506
> 
> 赞同：8
> 
> 时间：2012-08-05T06:47:00.383
> 
> 标签：html, css, sublimetext2

我环顾四周，问题和答案似乎与我要找的不符。每当我打开一个新文件时，它默认为一个计划文本文件。我主要使用 HTML 文件，所以我想知道是否有一个设置可以更改，以便当我打开一个新文件时它会默认为 HTML？希望这是可能的。

抢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-28T22:01:26.463

创建一个新插件`Tools > Developer > New Plugin...`

将其粘贴到：

```
import sublime, sublime_plugin

class EverythingIsPowerShell(sublime_plugin.EventListener):
   def on_new(self, view):
      view.set_syntax_file('Packages/PowerShell/Support/PowershellSyntax.tmLanguage') 
```

保存并调用它`NewTabSyntax.py`。新选项卡现在将默认为 Powershell。

您可以将语法更改为您喜欢的任何内容。要找出特定语法的“路径”，只需打开该语法的文件，打开控制台 ( `View > Show Console`) 并键入：

```
view.settings().get('syntax') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T02:59:30.423

请安装软件包 sublime-DefaultFileType [https://github.com/spadgos/sublime-DefaultFileType](https://github.com/spadgos/sublime-DefaultFileType)

这将自动设置新文件的语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-26T19:43:54.150

可以使用[ApplySyntax](http://facelessuser.github.io/ApplySyntax)插件。安装后（例如通过[PackageControl](https://packagecontrol.io)），您可以像这样设置 ApplySyntax 用户设置：

```
"new_file_syntax": "HTML", 
```

现在，如果您打开一个新文件，您的默认语法将是 HTML。当然，您可以设置已安装的每个语法。

# php - Google API OAuth2 JWT 声明集序列化为 UTF8 和 Base64url 安全编码

> ID：11814507
> 
> 赞同：0
> 
> 时间：2012-08-05T06:47:06.053
> 
> 标签：php, oauth-2.0

使用 .访问 Google API OAuth2`Service Account`时出现问题`google-api-php-client`。我惊讶地发现这部分代码来自Google Dev 中[设置的 JWT 声明示例，](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#formingclaimset)`JWT Claim set`当由于某种原因`JWT Header`通过 true 时返回错误，这让我感觉像 UTF-8 序列化并`json_encode()`在此处创建错误。

```
 $JWT_Header = array(
    "alg" => "RS256",
    "typ" => "JWT"
  );
  $JWT_Body = array(
    "iss" => "761326798069-r5mljlln1rd4lrbhg75efgigp36m78j5@developer.gserviceaccount.com",
    "scope" => "https://www.googleapis.com/auth/prediction",
    "aud" => "https://accounts.google.com/o/oauth2/token",
    "exp" => 1328554385,
    "iat" => 1328550785
  );

  $segments = array(
    rtrim(strtr(base64_encode(json_encode($JWT_Header)), '+/', '-_'), '='),
    rtrim(strtr(base64_encode(json_encode($JWT_Body)), '+/', '-_'), '=')
  );
  //echo '<pre>'; print_r($segments); echo '</pre>'; 
```

不同于[Google Dev: Encoding the JWT Claim Set example of output中描述的内容](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

```
/*
    Output: 

    JWT header:
    Google Dev    eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.
     My output    eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.

    JWT Claim set:
    Google Dev    eyJpc3MiOiI3NjEzMjY3OTgwNjktcjVtbGpsbG4xcmQ0bHJiaGc3NWVmZ2lncDM2bTc4ajVAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJzY29wZSI6Imh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvcHJlZGljdGlvbiIsImF1ZCI6Imh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlbiIsImV4cCI6MTMyODU1NDM4NSwiaWF0IjoxMzI4NTUwNzg1fQ.
     My output    eyJpc3MiOiI3NjEzMjY3OTgwNjktcjVtbGpsbG4xcmQ0bHJiaGc3NWVmZ2lncDM2bTc4ajVAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJzY29wZSI6Imh0dHBzOlwvXC93d3cuZ29vZ2xlYXBpcy5jb21cL2F1dGhcL3ByZWRpY3Rpb24iLCJhdWQiOiJodHRwczpcL1wvYWNjb3VudHMuZ29vZ2xlLmNvbVwvb1wvb2F1dGgyXC90b2tlbiIsImV4cCI6MTMyODU1NDM4NSwiaWF0IjoxMzI4NTUwNzg1fQ.
*/ 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:45:35.843

它似乎与 UTF-8 没有任何关系。要调试，只需向后应用相同的算法：

```
$output = array(
    'eyJpc3MiOiI3NjEzMjY3OTgwNjktcjVtbGpsbG4xcmQ0bHJiaGc3NWVmZ2lncDM2bTc4ajVAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJzY29wZSI6Imh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvcHJlZGljdGlvbiIsImF1ZCI6Imh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlbiIsImV4cCI6MTMyODU1NDM4NSwiaWF0IjoxMzI4NTUwNzg1fQ',
    'eyJpc3MiOiI3NjEzMjY3OTgwNjktcjVtbGpsbG4xcmQ0bHJiaGc3NWVmZ2lncDM2bTc4ajVAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJzY29wZSI6Imh0dHBzOlwvXC93d3cuZ29vZ2xlYXBpcy5jb21cL2F1dGhcL3ByZWRpY3Rpb24iLCJhdWQiOiJodHRwczpcL1wvYWNjb3VudHMuZ29vZ2xlLmNvbVwvb1wvb2F1dGgyXC90b2tlbiIsImV4cCI6MTMyODU1NDM4NSwiaWF0IjoxMzI4NTUwNzg1fQ',
);

foreach($output as $i){
    print_r(base64_decode(strtr($i, '-_', '+/'))) . PHP_EOL;
    print_r(json_decode(base64_decode(strtr($i, '-_', '+/')))) . PHP_EOL;
} 
```

您会看到 Google JSON 字符串包含相同的值，只是它们没有转义正斜杠：

```
Google: https://www.googleapis.com/auth/prediction
You:    https:\/\/www.googleapis.com\/auth\/prediction 
```

# javascript - 通过 Javascript 访问时如何授权使用 werkzeug？

> ID：11814513
> 
> 赞同：2
> 
> 时间：2012-08-05T06:48:56.283
> 
> 标签：javascript, python, flask, werkzeug

我在 Flask 中实现了基本授权。（[参考这个片段](http://flask.pocoo.org/snippets/8/)）它工作得非常好。

```
def check_auth(username):
    user_id = get_user_id(username)
    return user_id is not None

def authenticate():
    """Sends a 401 response that enables basic auth"""
     return Response(
        'Could not verify your access level for that URL.¥n'
        'You have to login with proper credentials',
        status=401,
        headers={'WWW-Authenticate': 'Basic realm="Test"'}
        )

def requires_auth(f):
    """Basic authorization decorator
    """
    @wraps(f)
    def decorated(*args, **kwargs):
        auth = request.authorization
        if not auth or not check_auth(auth.username):
            return authenticate()
        return f(*args, **kwargs)
    return decorated 
```

问题是，当通过 Javascript 访问应用程序时（例如，通过 JS 发送消息的用户名和密码），这种基本授权不起作用。
如果授权失败，应用程序应该向用户返回 401 响应并停止应用程序，但应用程序不向用户返回任何内容，应用程序在未经授权的情况下开始工作。
我怎样才能解决这个问题？

提前致谢。

# html - 键盘映射 Sublime Text 2 文件类型？

> ID：11814516
> 
> 赞同：2
> 
> 时间：2012-08-05T06:49:28.137
> 
> 标签：html, css, sublimetext2

我正在设置自己的键盘映射，想知道是否可以设置键来切换正在处理的文件类型。例如，如果我有一个普通的纯文本文件并希望它是一个 css 文件，我将有一个将文档类型更改为 css 的键映射。可能的？如果是这样，请向我解释你是如何做到的。

抢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T03:55:10.510

对此的键绑定将是：

```
{ 
  "keys": ["YOUR_SEQUENCE"], 
  "command": "set_file_type", 
  "args": {"syntax": "Packages/CSS/CSS.tmLanguage"}
} 
```

如何发现命令名称：

*   打开控制台
*   类型`sublime.log_commands(True)`
*   转到打开的选项卡
*   打开命令面板并输入`Set Syntax: CSS`

命令的名称及其所需的参数应记录到控制台。从那里你只需把它放在正确的 JSON 语法中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T12:39:58.590

虽然单独的快捷方式解决方案很棒，但它需要编辑配置文件，最重要的是记住您为每个语法创建的所有快捷方式。

在切换文件格式的情况下，通过命令面板快速访问所需的格式可能更有用：

*   按`CTRL`+ `SHIFT`+`P`调出`Command Palette`
*   键入`CSS`以突出显示`Set Syntax: CSS`命令
*   按`ENTER`

这很棒，因为它提供了对所有可用格式的快速访问。开始输入`set syntax...`，所有可用的格式都会显示出来。

# java-me - 如何在 j2me 中创建 LWUIT 列表屏幕？

> ID：11814518
> 
> 赞同：1
> 
> 时间：2012-08-05T06:49:44.873
> 
> 标签：java-me, lwuit

我想创建一个 lwuit 列表屏幕，列表项从 Rss Feed 连续循环进入我的方法，但我能够从 rss Feed 附加 1 个标题并能够在设备上显示，之后 2、3、4等...项目正在改变，但最后，我只能显示 1 个标题和最后一个标题，这是我的代码：

```
 //method called by the parsing thread
              public void addNews(News newsItem,Vector news) { 
                  String newsArray[]={newsItem.getTitle()};

                  myNewsList = new List(newsArray);

                  System.out.println(newsItem.getTitle());//Here i am able to display,second title after that,it is not appending adding to myNewsList
             //myNewsList.addItem(newsItem.getTitle());
              form1.addComponent(myNewsList);
              form1.show();

                  } 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:23:51.013

您需要阅读有关在 LWUIT 中使用列表和模型的信息。使用 addItem 时，您应该使用 LWUIT 的 callSerially 方法从 EDT 调用它。

无论如何，一个接一个地调用 addItem 非常慢。您应该使用模型来表示您的数据，请参阅改造演示。

# finance - sigfig、futureadvisor、wikinvest 如何连接到经纪商账户（例如，fidelity、etrade）？有api吗？

> ID：11814519
> 
> 赞同：2
> 
> 时间：2012-08-05T06:50:16.080
> 
> 标签：finance

Sigfig、futureadvisor、wikinvest 和其他较新的网站让您输入您的用户名/密码并连接到您的经纪账户以检索交易、持股、成本基础等。每个经纪商都有自己的 API 吗？有广泛的api吗？Quicken 似乎也这样做了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T18:34:51.920

我曾经为 SigFig / Wikinvest 工作。他们是同一家公司，但所有投资组合同步功能都在过渡到 SigFig。

大多数经纪商都有自己的 API 设置，使用 OFX（或 QFX）标准和各种授权协议为您的账户数据提供 XML。许多这种基础设施最初是由 Quicken 需要跨平台聚合帐户数据驱动的，但 API 仍然适用于所有人。

许多金融网站（例如 Mint.com，在被 Intuit 收购之前）利用 Yodlee 或 ByAllAccounts 等第三方平台来支持使用所有这些经纪 API，但是，我们在 SigFig/Wikinvest 构建了我们自己的平台来避免这种依赖。许多这些 API 的文档甚至宣传都不存在，因此需要数月和数年的研究才能使其正常工作。清理所有平台上的数据是另一个月/年的工作，而且不一定由第三方提供商提供。最后，能够利用任何这些 API 所需的安全性是一个完全不同的主题，我不会在此详细介绍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T19:59:00.270

我是 FutureAdvisor 的联合创始人。我们使用 Yodlee 连接和同步来自经纪商的客户投资信息。

如果您正在考虑这样做，除了 Yodlee 之外，还有其他几种解决方案：

1.  直接使用 OFX：开放金融交换 (OFX) 协议可用于直接从经纪商访问数据。根据您的需要，您必须在此处推出自己的 OFX​​ 客户端。对于频繁的连接场景，请记住，您的访问权限可能会受到限制，具体取决于经纪商。文件：[http ://www.ofx.net/](http://www.ofx.net/)
2.  Intuit 数据聚合：Intuit 拥有自己的数据聚合服务，将于秋季推出。Mint 在被 Intuit 收购后切换到此：http: [//developer.intuit.com/agg-cat/](http://developer.intuit.com/agg-cat/)
3.  CashEdge：是否像 Yodlee 和 Intuit 那样从经纪公司聚合和同步数据。
4.  ByAllAccounts：我们没有对此进行足够详细的研究，但我知道传统的投资顾问和财富管理机构倾向于将其用于他们的客户管理系统。因此，该服务很好地处理了这种情况。

这绝不是一个全面的列表，但可能是一个很好的短名单，这取决于您的核心场景或需求。

# c# - 浏览器导航时如何使进度条正常工作？

> ID：11814523
> 
> 赞同：2
> 
> 时间：2012-08-05T06:51:15.740
> 
> 标签：c#

我正在使用 C# 上的进度条和 Web 浏览器控件，但我不知道在导航时制作平滑的进度条，您是否有逐步创建它的步骤，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T07:37:02.343

使用[`WebBrowser.ProgressChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.progresschanged)事件：

```
private void WebBrowser1_ProgressChanged(Object sender, 
                                         WebBrowserProgressChangedEventArgs e)
{
    progressBar.Maximum = (int) e.MaximumProgress;
    progressBar.Value = (int) e.CurrentProgress;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-23T14:28:06.257

```
private void webBrowser1_ProgressChanged(object sender, WebBrowserProgressChangedEventArgs e)
{
    progressBar1.Maximum = 100;
    progressBar1.Minimum = 0;
    if ((e.CurrentProgress > 0) && (e.CurrentProgress < 100))
    {
        progressBar1.Value = (int)e.CurrentProgress;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T06:55:46.590

仅当您在操作*之前*知道要执行多少操作时，进度条才有用。对于加载网页，这意味着知道要加载的每个资源的大小。这真的不可行。还有其他部分无法真正预测：

1.  DNS 查询
2.  打开与服务器的连接
3.  从其他资源加载的资源，例如嵌入另一个 CSS 或 CSS 引用图像的 JavaScript
4.  ...

所有主流浏览器早已放弃尝试显示加载页面的*进度。*现在他们只显示加载活动。

WebBrowser 控件有一个[`ProgressChanged`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.progresschanged)，但我不知道它有多可靠。但这可能是你最好的尝试。不过，上面提到的所有要点仍然适用。您和浏览器都没有足够的知识来使进度条准确，因此它要么是一个粗略的近似值（在加载 HTML 后开始并仅表示加载的附加资源），要么在总资源的估计错误时突然跳动甚至倒退.

# c++ - 何时在安装模板的共享库中碰撞 SONAME？

> ID：11814524
> 
> 赞同：1
> 
> 时间：2012-08-05T06:51:46.940
> 
> 标签：c++, templates, shared-libraries

我正在编写一个共享库，它也将安装一个模板头。考虑到模板将由调用者而不是库本身实例化的具体事实，我应该何时触发 SONAME 以更改模板代码？

对于常规的 C/C++ 代码，每当二进制兼容性中断时，我都会触发 SONAME。但是对于模板，我开始考虑每次模板中的*任何内容*发生更改时都会碰到它，以便传播更改。

# haskell - Haskell，解析输入'if'中的错误

> ID：11814525
> 
> 赞同：0
> 
> 时间：2012-08-05T06:52:04.510
> 
> 标签：haskell

我一生都无法弄清楚为什么这个 if 语句有问题（haskell noobie。）有人能帮我吗？

```
fst3 (a,b,c) = a
snd3 (a,b,c) = b
trd3 (a,b,c) = c
fst4 (a,b,c,d) = a
snd4 (a,b,c,d) = b
trd4 (a,b,c,d) = c
qud4 (a,b,c,d) = d

fractionalKnapsack (x:xs) =
    fractionalKnapsack (x:xs) []

fractionalKnapsack (x:xs) fracList =
    ((fst3 x),(snd3 x),(trd3 x),(snd3 x) / (trd3 x)):fracList
    if length (x:xs) <= 1
    then computeKnapsack sort(fracList)
    else fractionalKnapsack xs fracList

computeKnapsack (x:xs) = (x:xs) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T14:56:12.627

`:`是“缺点”运算符。它通过在左侧提供“ *head* ”元素和在右侧提供“tail”列表来构造一个列表

```
ghci> 1 : [2,3,4]
[1,2,3,4] 
```

您可以*使用*`:`.

```
ghci> let (x:xs) = [1,2,3,4]
ghci> x
1
ghci> xs
[2,3,4] 
```

您在代码中使用的方式`(x:xs)`暗示您尚未牢牢掌握列表的定义或模式匹配的定义。而不是使用

```
if length (x:xs) <= 1 
```

简单的模式匹配更为常见。一个简单的例子：

```
howMany :: [a] -> String
howMany [] = "Zero"
howMany [x] = "One"
howMany (x:xs) = "Many" 
```

Haskell 函数可以用这样的“方程式”序列定义，您可以在其中对您感兴趣的可能情况进行模式匹配。这给我们带来了您的代码的其他问题，它们是：

*   的方程式`fractionalKnapsack`不匹配。一个有 1 个参数，另一个有 2 个。您可能打算命名第二个`fractionalKnapsack'`。
*   这两个`fractionalKnapsack`定义都不处理空列表的情况。我不确定这一点；如果您*知道*永远不会给它一个空列表，这可能是可以接受的。
*   您的任何函数都没有类型签名。类型推断可以推断它们，但通常最好先编写类型签名，以表达您对函数的意图并指导您实现它。
*   的第二个定义`fractionalKnapsack`没有意义。符号后只能有一个表达式`=`，但您提供了两个，用换行符分隔。这是无效的 Haskell 并解释了为什么在“if”上有一个解析错误：因为你使用的任何编译器/解释器都不期望另一个表达式的开头！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T07:27:53.767

这段代码有一些问题。您对 fractionalKnapsack 有两个不同的定义，每个都采用不同数量的参数，这显然会给编译器带来一些麻烦。此外，if 语句上的解析错误是因为实际上不应该有一个 if 语句，您试图在其中放置一个 if 语句，您在到达 if 语句之前已经完成了函数的定义。

如果你能更好地解释你正在尝试做什么，或者你期望你编写的代码会发生什么，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T14:12:59.867

> `computeKnapsack sort(fracList)`

这可能也是一个错误。它应该是`computeKnapsack (sort fracList)`（或者，等效地，`computeKnapsack $ sort fracList`）。

当你做时`computeKnapsack sort(fracList)`，它等于做`computeKnapsack sort (fracList)`，相当于做`computeKnapsack sort fracList`，意思是：“给 computeKnapsack 两个参数：`sort`和`fracList`”。

# android - 无法附加位图图像。安卓

> ID：11814531
> 
> 赞同：2
> 
> 时间：2012-08-05T06:52:53.763
> 
> 标签：android, android-intent, uri, share

我看到了有关此的其他问题，尝试了他们的答案，但没有用。我正在尝试使用[developer.android.com](http://developer.android.com/training/sharing/send.html#send-binary-content)的第二种方法。（第二个白色子弹）。我使用适当的权限将图像保存到应用程序内部存储器。图像（位图）已成功保存，但我无法将其附加到新意图以共享它。这是我的代码：

```
 Intent shareIntent = new Intent(Intent.ACTION_SEND);
        shareIntent.setType("*/*");//Attach all types (images/text)

        FileOutputStream fos;

        try{
        fos = openFileOutput(myfilename, Context.MODE_WORLD_READABLE);
        mybitmap.compress(Bitmap.CompressFormat.PNG, 90, fos);
        fos.flush();
//Image is stored successfully (checked data/data/mypackage/files/myfilename)

           Uri uri = Uri.fromFile(getFileStreamPath(myfilename));
           shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
    }
    catch (Exception e){
        // noth
        //Log.e(TAG, e.getStackTrace().toString());
    }

       shareIntent.putExtra(Intent.EXTRA_TEXT, "some text also");

        return shareIntent;
    } 
```

应用程序说不能附加媒体项目。Gmail 似乎附加了项目，但在发送邮件时它什么也没显示！

uri.getPath 也返回我：/data/data/mypackage/files/myfilename，这是正确的

有任何想法吗？谢谢！

编辑：修改代码以使用 sd 卡。仍然无法正常工作：

```
 File imgDir;
        if (android.os.Environment.getExternalStorageState().equals(
                android.os.Environment.MEDIA_MOUNTED))
imgDir = new File(
                android.os.Environment.getExternalStorageDirectory(),
                ".MyAppName/Images");
        else imgDir = MyActivity.this.getCacheDir();
        if (!imgDir.exists()) imgDir.mkdirs();

        File output = new File(imgDir, myFilename);

        OutputStream imageFileOS;
        try{
            Uri uriSavedImage = Uri.fromFile(output);
            imageFileOS = getContentResolver().openOutputStream(
                    uriSavedImage);
            bitmapBookCover.compress(Bitmap.CompressFormat.PNG, 90,
                    imageFileOS);

            imageFileOS.flush();
            imageFileOS.close();
//Again image successfully saved

            shareIntent.putExtra(Intent.EXTRA_STREAM, uriSavedImage);
        }
        catch (Exception e){
            // noth
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:38:06.023

请尝试使用**setData()**而不是**putExtra()**，这里[是 android 开发者网站 - 意图集数据](http://developer.android.com/reference/android/content/Intent.html#setData%28android.net.Uri%29)

# jira - 如何统计JIRA中的评论数

> ID：11814532
> 
> 赞同：8
> 
> 时间：2012-08-05T06:53:07.880
> 
> 标签：jira, jql

我想创建一个问题过滤器，向我显示每个问题的评论数，然后按此排序。

我试过类似的东西：

```
project = "myProject" AND created >= 2012-06-01 AND created < 2012-08-01 ORDER BY count(comment) 
```

我在 JIRA 4.2 上。我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T07:46:23.727

The easiest way I can think of is to use the [JIRA Toolkit Plugin (by Atlassian)](https://marketplace.atlassian.com/5142) which will add a custom field for counting comments:

![number_of_comments_field](../Images/8924efcb46a30fac727d1c46e7feef28.png)

Than you could use the JQL to sort by the number of comments. For example, if the custom field is called `Comments count`, use the following query:

> project = "myProject" AND created >= 2012-06-01 AND created < 2012-08-01 ORDER BY "Comments count"

# sockets - 在 Web 套接字 UI 客户端的情况下，http 不起作用

> ID：11814534
> 
> 赞同：-1
> 
> 时间：2012-08-05T06:53:45.717
> 
> 标签：sockets, websocket

我在我的应用程序中使用 Websocket 编程 这是我来自 UI 屏幕的 Websocket 客户端。

当我使用协议 ws 时，它正在联系服务器。

```
var wsUri = "ws://localhost:"+<%=request.getLocalPort()%>+"/Ravi/hello-html5";
websocket = new WebSocket(wsUri); 
```

但是如果将 ws 替换为 http ，它就不会连接到服务器。

就是这个网址

```
http://localhost:"+<%=request.getLocalPort()%>+"/Ravi/hello-html5"; 
```

这是我的 web.xml

```
 <servlet>
    <servlet-name>HelloHtml5</servlet-name>
    <servlet-class>org.Html5Servlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>HelloHtml5</servlet-name>
    <url-pattern>/hello-html5/*</url-pattern>
  </servlet-mapping>
  </web-app> 
```

请让我知道为什么http不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:09:22.177

当您使用 http uri 调用 new WebSocket 时会发生什么？是否抛出了 SyntaxError 或者您的 websocket 的 onerror 或 onclose 回调是否运行？

[JavaScript API](http://dev.w3.org/html5/websockets/#the-websocket-interface)和[websocket 规范](https://www.rfc-editor.org/rfc/rfc6455)不清楚哪些 url 方案是可接受的。如果抛出 SyntaxError，则您的浏览器将 http 作为无效方案拒绝。其他浏览器的行为可能不同。如果您的回调之一正在运行，则服务器拒绝连接。其他服务器（你没有说你正在使用哪一个）可能会有不同的行为。

# php - 匹配 PHP 中的字符串前缀

> ID：11814535
> 
> 赞同：0
> 
> 时间：2012-08-05T06:54:03.367
> 
> 标签：php, validation

我有一个格式的用户名，比如：“mySite”，并带有一个数字后缀。

我需要检查输入的用户名是否与该格式匹配。

我使用 preg_match 匹配字符串，如下所示：

```
if(!(preg_match("/^[mySite]([0-9])+$/", $loginName)))

    echo "Error"; 
```

但是，我没有得到想要的结果。

上面的表述正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:59:22.173

不。尝试

```
preg_match('/^mySite\d+$/', $loginName) 
```

`[mySite]`将匹配任何字母 m,y,S,i,t,e。而且只有其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T06:59:18.913

这应该有效：

```
if(!(preg_match("/^mySite([0-9])+$/", $loginName)))

    echo "Error"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T06:59:20.617

去掉周围的括号`mySite`。否则，您只是匹配单个字符，即`m`, `y`, `S`, `i`,`t`或`e`.

# c++ - Eclipse C++：无法解析符号“std”

> ID：11814536
> 
> 赞同：33
> 
> 时间：2012-08-05T06:54:07.623
> 
> 标签：c++, eclipse, eclipse-cdt

我在 TestExecute.cpp 中收到此错误-

> “无法解析符号‘std’”

代码

```
#include <iostream>
using namespace std; 
```

我刚刚在 Eclipse（在 Windows 7 中）中创建了一个可执行项目，如下所示。好像我正在选择一个不受支持的工具链。是这样吗？我已经安装了 Cygwin，它在首选项中可用。

**编辑**：基于@RobertoWilko 评论，删除“使用命名空间标准；”行删除了错误。但是没有创建二进制文件。“启动失败。找不到二进制文件”。如何纠正这个？

![在此处输入图像描述](../Images/c4afef13adbe25134490f6aeb0057733.png)

![在此处输入图像描述](../Images/9f8a220dd3aa663b0e976a42dee72f92.png)

![在此处输入图像描述](../Images/52340041b61ab93670418867ef22994f.png)

![在此处输入图像描述](../Images/63c9d67e813ad26442f9c35c33c40fe3.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-11-07T14:28:56.957

试试这个步骤：[https ://www.eclipse.org/forums/index.php/t/636348/](https://www.eclipse.org/forums/index.php/t/636348/)

去

项目 -> 属性 -> C/C++ 常规 -> 预处理器包括路径、宏等 -> 提供程序

*   激活 CDT GCC 内置编译器设置
*   停用使用项目之间共享的全局提供程序
*   添加命令行参数 -std=c++11。

[![例子](../Images/9fef1c3acf1bdb34f85a5142a60b76e2.png)](https://i.stack.imgur.com/Dird3.jpg)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-15T13:51:38.590

我不知道您是否已经解决了这个问题，但我想发布我的解决方案，以解决可能遇到相同问题的人。

1.  首先，确保您的项目资源管理器中有“包含”文件夹。如果没有，请转到第二步。如果有，请转到第三步。

2.  二、*Window -> Preferences-> C/C++-> Build >Environment*：创建两个环境变量：

    a) 名称：`C_INCLUDE_PATH`值：`/usr/include`

    b) 名称：`CPLUS_INCLUDE_PATH`值：`/usr/include/c++`

转到`Cygwin/usr/include/`，如果找不到文件夹“c++”，请从中复制它`\cygwin\lib\gcc\i686-pc-cygwin\X.X.X\include` ，然后重新启动 Eclipse。

3.  第三，在*项目资源管理器中右键单击您的项目 -> 属性 -> C/C++ 常规 -> 路径和符号 -> 包含 -> 语言：GNU C++* 如果可以在“包含目录”中找到一些 C++ 文件夹，然后单击应用并确定. 更改一下您的代码，然后保存。

你会发现不会有符号无法解决的问题。

我记录了我的解决方案，希望有人能从中受益。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-05T11:20:26.087

您可以像这样重写代码：

```
#include<iostream>
#include<stdio.h>

using namespace std; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-06-03T11:22:08.720

对于 MinGW，这对我有用：

*   右键项目，选择`Properties`
*   前往`C/C++ General`- `Paths and Symbols`- `Includes`- `GNU C++`-`Include directories`
*   选择`Add...`
*   选择`Variables...`
*   选择`MINGW_HOME`并单击`OK`
*   单击`Apply`并`OK`

您现在应该在项目浏览器的 Includes 中看到几个 MinGW 路径。
错误可能不会立即消失，您可能需要刷新/构建您的项目。

* * *

如果您使用的是 Cygwin，则可能存在等效变量。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-15T07:36:49.597

项目中的包含文件夹可能缺少 /usr/include/c++。在项目资源管理器中转到您的项目，右键单击 -> 属性 -> C\C++ 构建 -> 环境 -> 添加 -> value= /usr/include/c++。重启日食。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-25T15:21:49.117

让我解决问题的方法是：项目 -> 属性 -> C/C++ 常规 -> 预处理器包含路径、宏等 -> 提供程序 -> CDT GCC 内置编译器设置，启用并禁用 CDT Cross GCC 内置编译器设置

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-10T11:52:25.317

安装**C++ SDK**：

帮助 > 安装新软件 > 使用：`path for your eclipse version`> 搜索**C++**并安装 C++ sdk 开发工具。

路径示例：`Mars - http://download.eclipse.org/releases/mars`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-22T14:49:36.147

我在带有 16.04 内核的 Kubuntu 上使用 Eclipse Neon 时遇到了这个问题，我不得不将我的更改`#include <stdlib.h>`为`#include <cstdlib>`这使得 std 命名空间对 Eclipse “可见”并删除了错误。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-27T15:30:14.350

这对我来说适用于 C/C++ 开发人员版本的 Eclipse IDE 版本：2020-03 (4.15.0) 构建 ID：20200313-1211。另外，我的代码是交叉编译的。

1.  创建一个新项目，确保它被创建为一个交叉编译的解决方案。您必须添加与您的交叉编译器位置匹配的 /usr/bin 目录。
2.  在项目属性中为交叉编译器添加 C 和 C++ 头文件。
3.  对于 C：Project > Properties > C/C++ General > Paths and Symbols > Includes > GNU C. Add... -> 从交叉编译器到 /usr/include 目录的路径。
4.  对于 C++：项目 > 属性 > C/C++ 常规 > 路径和符号 > 包含 > GNU C++。添加... -> 从交叉编译器到 /usr/include/c++/ 目录的路径。
5.  如果您不知道您的 gcc 版本，请在控制台中输入（确保它是您的跨 gcc 二进制文件）：

    gcc -v

6.  修改交叉编译器的方言（这是诀窍）。

7.  对于 C：项目 > 属性 > C/C++ 构建 > 设置 > 工具设置 > 跨 GCC 编译器 > 方言。设置为 ISO C99 (-std=C99) 或任何适合您的 C 文件标准的内容。
8.  对于 C++：项目 > 属性 > C/C++ 构建 > 设置 > 工具设置 > Cross G++ 编译器 > 方言。设置为 ISO C++14 (-std=c++14) 或任何适合您的 C++ 文件标准的内容。
9.  如果需要，通过右键单击项目 > 索引 > 重建来重新索引所有项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-30T18:35:08.560

在我看来，您报告的问题是由以下原因引起的：

1.  您正在尝试编译 C 代码并且源文件具有 .cpp 扩展名
2.  您正在尝试编译 C++ 代码并且源文件具有 .c 扩展名

在这种情况下，Eclipse 无法识别要使用的正确编译器。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-28T14:19:25.107

首先尝试重新启动 Eclipse，在我的情况下，我更改了项目的不同编译器设置，然后它显示此消息，重新启动后它可以工作。

# sql-server-2008 - SQL server 2008中如何保留和增加变量的值？

> ID：11814538
> 
> 赞同：2
> 
> 时间：2012-08-05T06:55:42.190
> 
> 标签：sql-server-2008

最初，我有两个变量 x（组变量）和 y，现在我想创建第三个变量 z，它在每组 x 中从 1 开始，并在 y 变化时增加 1。请看下面的例子。有人可以帮助我如何在 sql server 2008 中实现它吗？

非常感谢！

```
x: a a a a a a a a b b b b b b b b
y: 0 0 0 1 0 0 2 3 0 1 0 0 2 3 0 0 
```

最后，我想像这样创建 z ：

```
x: a a a a a a a a b b b b b b b b
y: 0 0 0 1 0 0 2 3 0 1 0 0 2 3 0 0
z: 1 1 1 2 3 3 4 5 1 2 3 3 4 5 6 6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T07:57:32.153

您可以使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)和类似的`row_number`东西。

```
with C1 as
(
  select T1.id,
         T1.x,
         T1.y,
         row_number() over (partition by T1.x order by T1.id) as rn
  from table1 as T1
), C2 as
(
  select C1.id,
         C1.x,
         C1.y,
         C1.rn,
         1 as z
  from C1
  where C1.rn = 1
  union all
  select C1.id,
         C1.x,
         C1.y,
         C1.rn,
         C2.z + case when C1.y <> C2.y then 1 else 0 end
  from C1 
    inner join C2
      on C1.x = C2.x and
         C1.rn = C2.rn + 1
)
select x, y, z
from C2
order by id
option (maxrecursion 0); 
```

请注意，使用 CTE 作为递归查询的源可能会产生一些性能问题。如果是这种情况，我建议您将 CTE 的结果`C1`放在一个带有主键的临时表中`(x, rn)`。

[SQL小提琴](http://sqlfiddle.com/#!3/a7163/9/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:32:17.173

您不能完全做到这一点，`row_number() over (partition by ... order by ...)`而且`CTE`查询似乎也不起作用。我喜欢尽可能避免使用游标，但游标可能适合您的情况：

```
declare @tbl table (id int, x char(1), y int, z int null)

declare
  @id int, @x char(1), @y int,
  @x2 char(1) = null, @y2 int = null, @z int

insert into @tbl (id, x, y) values
(1, 'a', 0), (2, 'a', 0), (3, 'a', 0),
(4, 'a', 1),
(5, 'a', 0), (6, 'a', 0),
(7, 'a', 2),
(8, 'a', 3),
(9, 'b', 0),
(10, 'b', 1),
(11, 'b', 0), (12, 'b', 0),
(13, 'b', 2),
(14, 'b', 3),
(15, 'b', 0), (16, 'b', 0)

declare cr cursor for
  select id, x, y
  from   @tbl
  order by  id

open cr
fetch next from cr into @id, @x, @y

while @@fetch_status = 0
begin
  set @z =
    case when @x2 is null or @x <> @x2
      then 1
      else
        case when @y = @y2
          then @z
          else @z + 1
        end
    end

  update @tbl
  set    z = @z
  where  id = @id

  set @x2 = @x
  set @y2 = @y

  fetch next from cr into @id, @x, @y
end

close cr
deallocate cr

select x, y, z
from   @tbl
order by id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T08:02:22.453

以为我会把我的解决方案混在一起：

```
declare @temp table ([row] int identity,[x] char,[y] int)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',1)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',2)
insert into @temp([x],[y]) values ('a',3)
insert into @temp([x],[y]) values ('b',0)
insert into @temp([x],[y]) values ('b',1)
insert into @temp([x],[y]) values ('b',0)
insert into @temp([x],[y]) values ('b',0)
insert into @temp([x],[y]) values ('b',2)
insert into @temp([x],[y]) values ('b',3)
insert into @temp([x],[y]) values ('b',0)
insert into @temp([x],[y]) values ('b',0)

declare @temp1 table
(
 [row] int
,[x] char
,[y] int
,[change] int
)
insert into @temp1
(
 [row]
,[x]
,[y]
,[change]
)
select 
 [t1].[row]
,[t1].[x]
,[t1].[y] 
,iif([t1].[x] = [t2].[x] and [t1].[y] <> [t2].[y],1,0) [change]
from @temp [t1]
left join @temp [t2] on [t2].[row] = [t1].[row] - 1

select * from @temp1

select 
 [row]
,[x]
,[y]
,(select sum([change]) from @temp1 [t2] where [t2].[row] <= [t1].[row] and [t2].[x] = [t1].[x]) + 1 [z]
from @temp1 [t1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T12:35:34.147

这是简单的解决方案：

```
 declare @temp table ([row] int identity,[x] char,[y] int)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',1)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',0)
insert into @temp([x],[y]) values ('a',2)
insert into @temp([x],[y]) values ('a',3)
insert into @temp([x],[y]) values ('b',0)
insert into @temp([x],[y]) values ('b',1)
insert into @temp([x],[y]) values ('b',0)
insert into @temp([x],[y]) values ('b',0)
insert into @temp([x],[y]) values ('b',2)
insert into @temp([x],[y]) values ('b',3)
insert into @temp([x],[y]) values ('b',0)
insert into @temp([x],[y]) values ('b',0)

--select * from @temp 

DECLARE @int int=0
;WITH CTE as(
select *,1 as incr from @temp where row=1 
union all
select t.*,
CASE WHEN t.x=c.x then CASE WHEN t.y=c.y then incr else incr+1 end else CASE WHEN t.y=c.y then @int else @int+1 end end as incr
from @temp t inner join CTE c
on t.row=c.row+1
)

select * from CTE 
```

# c++ - OpenGL在绘制三角形之前我必须做什么？

> ID：11814547
> 
> 赞同：0
> 
> 时间：2012-08-05T06:58:45.327
> 
> 标签：c++, opengl

我发现的大多数教程、指南和书籍都与 OpenGL 相关，解释了如何绘制三角形和初始化 OpenGL。没关系。但是当他们试图解释它时，他们只是列出了一堆函数和参数，例如：

```
glClear()
glClearColor()
glBegin()
glEnd()
... 
```

由于我不太擅长通过记忆学习事物，所以我总是需要回答“我们为什么要这样做？” 所以我会写那一堆函数，因为我记得我必须在做其他事情之前设置某些事情等等，而不是因为教程告诉我。

`glBegin()`在开始用and绘制一些东西之前，请有人向我解释一下我必须向 OpenGL 定义什么（只有纯 OpenGL，我使用 SFML 作为背景库，但这并不重要）`glEnd()`？

示例答案：

> 您必须首先告诉 OpenGL 需要什么颜色来清除屏幕。因为在我们开始绘制当前帧之前，每一帧都需要被前一帧清除...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T09:24:55.073

首先你应该知道，OpenGL 是一个状态机。这意味着，除了创建 OpenGL 上下文（由 SFML 完成）之外，没有初始化之类的东西！

> 因为我不太擅长通过记忆来学习东西，

这个不错……</p>

> 我总是需要回答“我们为什么要这样做？”

这太棒了！

> 在开始用 glBegin() 和 glEnd() 绘制东西之前，请有人向我解释一下我必须对 OpenGL 定义什么（只有纯 OpenGL，我使用 SFML 作为背景库，但这并不重要）？

正如我已经说过的：OpenGL 是一个状态机。这基本上意味着，您可以执行两种调用：设置状态和执行操作。

例如`glClearColor`，设置一个状态变量，即清除颜色的状态变量，该值用于在`glClear`设置`GL_COLOR_BUFFER_BIT`标志的调用时清除活动帧缓冲区颜色。`glClearDepth`深度值（`GL_DEPTH_BUFFER_BIT`flag to `glClear`）存在类似的函数。

`glBegin``glEnd`属于OpenGL的即时模式，已被弃用。所以学习它们没有什么理由。您应该改用顶点数组，最好通过顶点缓冲区对象。

但这里是这样：`glBegin`将 OpenGL 设置为现在应该绘制几何图形的状态，该几何图形被选为`glBegin`. `GL_TRIANGLES`例如意味着，OpenGL 现在将每 3 次调用解释`glVertex`为形成一个三角形。`glEnd`告诉 OpenGL 你已经完成了*那*批三角形。在 glBegin...glEnd 块中，某些状态更改是不允许的。其中包括与转换几何和生成图片有关的所有内容，包括矩阵、着色器、纹理等。

一种常见的误解是，OpenGL 已初始化。这是由于具有`initGL`功能或类似功能的教程编写得不好。在开始渲染场景时从头开始设置所有状态是一个很好的做法。但是由于单个帧可能包含多个场景（想想 HUD 或分屏游戏），这种情况会在一个场景中发生多次。

* * *

### 更新：

那么如何画三角形呢？好吧，这很简单。首先，您需要几何数据。例如这个：

```
GLfloat triangle[] = {
    -1, 0, 0,
    +1, 0, 0,
     0, 1, 0
}; 
```

在渲染函数中，我们告诉 OpenGL 下一次调用 glDrawArrays 或 glDrawElements 应该从那里获取数据（为了简单起见，我将在这里使用 OpenGL-2 函数）：

```
glVertexPointer(3, /* there are three scalars per vertex element */
                GL_FLOAT, /* element scalars are float */
                0, /* elements are tightly packed (could as well be sizeof(GLfloat)*3 */
                trignale /* and there you find the data */ );
/* Note that glVertexPointer does not make a copy of the data! 
   If using a VBO the data is copied when calling glBufferData. */

/* this switches OpenGL into a state that it will
   actually access data at the place we pointed it
   to with glVertexPointer */
glEnableClientState(GL_VERTEX_ARRAY);

/* glDrawArrays takes data from the supplied arrays and draws them
   as if they were submitted sequentially in a for loop to immediate
   mode functions. Has some valid applications. Better use index
   based drawing for models with a lot of shared vertices. */
glDrawArrays(Gl_TRIANGLE, /* draw triangles */
             0, /* start at index 0 */
             3, /* process 3 elements (of 3 scalars each) */ ); 
```

我还没有包括设置转换和视口映射。

视口定义了易于投影和标准化的几何图形如何放置在窗口中。此状态使用 设置`glViewport(pos_left, pos_bottom, width, height)`。

今天的转换发生在顶点着色器中，本质上顶点着色器是一个用特殊语言（GLSL）编写的小程序，它获取顶点属性并计算结果顶点的剪辑空间位置。通常的方法是模拟固定函数管道，这是一个两阶段的过程：首先将几何体转换到视图空间（一些计算，如照明在这个空间中更容易），然后将其投影到剪辑空间，这是一种渲染器的镜头。在固定函数管道中，有两个转换矩阵：Modelview 和 Projection。您将它们设置为所需结果所需的任何值。在只有三角形的情况下，我们保留模型视图标识并在任一维度上使用从 -1 到 1 的正交投影。

```
glMatrixMode(GL_PROJECTION);
/* the following function multiplies onto what's already on the stack,
   so reset it to identity */
glLoadIdentity(); 

/* our clip volume is defined by 6 orthogonal planes with normals X,Y,Z
   and ditance 1 from origin into each direction */
glOrtho(-1, 1, -1, 1, -1, 1); 

glMatrixMode(GL_MODELVIEW);
/* now a identity matrix is loaded onto the modelview */
glLoadIdentity(); 
```

设置好转换后，我们现在可以绘制上述三角形：

```
draw_triangle(); 
```

最后我们需要告诉 OpenGL 我们已经完成了发送命令，它应该完成它的渲染。

```
if(singlebuffered)
    glFinish(); 
```

然而大多数时候你的窗口是双缓冲的，所以你需要交换它以使事情变得更生动。由于没有完成交换就没有意义，因此交换意味着完成

```
else
    SwapBuffers(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T00:58:35.163

您正在使用 API 设置和更改 OpenGL 状态机。

您实际上并没有直接对 GPU 进行编程，而是在您的应用程序和 GPU 之间使用一种媒介来完成您想要做的任何事情。

之所以像这样并且与 CPU 和内存的工作方式不同，是因为 openGL 旨在运行在与操作系统/系统无关的硬件上，因此您的代码可以在任何操作系统上运行并在任何硬件上运行不仅仅是您的编程对象。

因此，因此，您需要学习使用他们的预设代码，以确保无论您尝试做什么，它都能够在合理范围内的所有系统/操作系统/硬件上运行。

例如，如果您要在 Windows 8.1 上使用特定显卡（比如 AMD）创建应用程序，您仍然希望您的应用程序能够在 Andoird/iOS/Linux/其他 Windows 系统/其他硬件（gpus）上运行，例如 Nvidia .

因此，为什么 Khronos 在创建 API 时，尽可能使其独立于系统/硬件，以便它可以在任何东西上运行并成为每个人的标准。

这是我们必须为此付出的代价，我们必须学习他们的 API，而不是学习如何直接写入 gpu 内存并直接利用 GPU 处理信息/数据。

虽然随着 Vulkan 的引入，它在发布时可能会有所不同（也来自 khronos），我们将了解它是如何工作的。

# javascript - javascript如何动态更新变量

> ID：11814553
> 
> 赞同：1
> 
> 时间：2012-08-05T06:59:24.807
> 
> 标签：javascript, jquery

我有一个触发函数来更改值的html表单，参考：http: [//jsfiddle.net/ZvuMh/3/](http://jsfiddle.net/ZvuMh/3/) 如何`avalue`在另一个函数中动态使用？

HTML：

```
<select id="sort_post_date">
    <option value="a">a</option>
    <option value="b">b</option>
    <option value="c">c</option>
    <option value="d">d</option>
    <option value="e">e</option>
    <option value="f">f</option>    
</select>​ 
```

变值函数：

```
 var avalue='';
function getSelectData(id) {

    // set value to be the current selected value
    avalue = jQuery(id+" option:selected").val();

    // change value whenever the box changes
    jQuery(id).change(function () {
        avalue = jQuery(id+" option:selected").val();
        console.log("I see a change! -> "+avalue);
    });

    console.log(avalue);
    return avalue;
}

var d = getSelectData("#sort_post_date");
console.log(d);​ 
```

`avalue`当函数 getSelectData 将其更改为另一个字母时要继承的另一个函数：

```
function somefunction(){
    var test = "foo"+avalue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:04:06.320

为什么不直接这样调用呢，这样`somefunction`每次字母变化时都会调用：

```
// change value whenever the box changes
jQuery(id).change(function () {
    avalue = jQuery(id+" option:selected").val();
    console.log("I see a change! -> "+avalue);
    somefunction(avalue);
});

function somefunction(avalue){
    var test = "foo"+avalue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:02:11.530

使用该变量的全局范围，就像这样`window.avalue = 'value'`并使用`window.avalue`

# android - 在主 UI 上方“展开”的 UI 窗格？（按钮）

> ID：11814554
> 
> 赞同：0
> 
> 时间：2012-08-05T06:59:44.993
> 
> 标签：android

我想在我的应用程序的右下角添加一个按钮。此按钮将（几乎）在我的应用程序的每个活动上..

触摸该按钮将推出 4 个其他按钮以导航到我的应用程序的其他区域。

所以，有点像底部的操作按钮（不是操作栏）..

我的目标是 2.1 版的 android..

我应该看什么？AndroidSherlock 需要一个“太新”版本的 android.. 直到 3.0 才引入 Fragments ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:04:41.267

使用[SlidingDrawer](http://developer.android.com/reference/android/widget/SlidingDrawer.html)小部件。

> SlidingDrawer 将内容隐藏在屏幕之外，并允许用户拖动手柄以将内容带到屏幕上。

# scala - scala play框架文件上传错误

> ID：11814556
> 
> 赞同：6
> 
> 时间：2012-08-05T07:00:32.700
> 
> 标签：scala, file-upload, playframework, playframework-2.0

我正在使用[本](http://www.playframework.org/documentation/2.0/ScalaFileUpload)教程在我的播放框架应用程序中上传文件。我正在使用完全相同的代码，但出现以下错误。

```
[IOException: Path(/Users/hrishikeshparanjape/Desktop) exists but replace parameter is false] 
```

以下是我的代码：

```
def upload = Action(parse.multipartFormData) { request =>
        request.body.file("picture").map { picture =>
            import java.io.File
            val filename = picture.filename 
            val contentType = picture.contentType
            picture.ref.moveTo(new File("/Users/hrishikeshparanjape/Desktop/"))
            Ok("File uploaded")
        }.getOrElse {
            Redirect(routes.Application.index).flashing(
                    "error" -> "Missing file"
                    )
        }
    } 
```

我被困在这里请帮忙。

**编辑：** 这是我的完整堆栈跟踪：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[IOException: Path(/Users/hrishikeshparanjape/Desktop) exists but replace parameter is false]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.2]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.2]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.2]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.io.IOException: Path(/Users/hrishikeshparanjape/Desktop) exists but replace parameter is false
    at scalax.file.Path$.fail(Path.scala:168) ~[scala-io-file_2.9.1.jar:0.4.0]
    at scalax.file.Path.moveTo(Path.scala:1089) ~[scala-io-file_2.9.1.jar:0.4.0]
    at play.api.libs.Files$.moveFile(Files.scala:76) ~[play_2.9.1.jar:2.0.2]
    at play.api.libs.Files$TemporaryFile.moveTo(Files.scala:30) ~[play_2.9.1.jar:2.0.2]
    at controllers.Application$$anonfun$upload$1$$anonfun$apply$1.apply(Application.scala:17) ~[classes/:2.0.2]
    at controllers.Application$$anonfun$upload$1$$anonfun$apply$1.apply(Application.scala:13) ~[classes/:2.0.2]
[info] Compiling 1 Scala source to /Users/hrishikeshparanjape/git-public/printit/target/scala-2.9.1/classes... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T07:18:04.123

看起来您需要指定完整的文件名`moveTo`

```
picture.ref.moveTo(new File(
  "/Users/hrishikeshparanjape/Desktop/" + picture.filename)) 
```

# objective-c - 如何使用 nspredicate 对非英语字符串进行排序？

> ID：11814560
> 
> 赞同：5
> 
> 时间：2012-08-05T07:01:21.023
> 
> 标签：objective-c, ios, cocoa-touch, core-data, nssortdescriptor

我正在使用排序描述符对获取请求的结果进行排序。

```
NSFetchRequest* req = [[NSFetchRequest alloc] initWithEntityName:[MyEntity entityName]];
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"property" 
                                                           ascending:YES 
                                                            selector:@selector(localizedCompare:)];
req.sortDescriptors = [NSArray arrayWithObject:descriptor];
return [self.managedObjectContext executeFetchRequest:req error:nil]; 
```

问题在于以“İ”等非英语字符开头的单词列在列表末尾。这是一个土耳其字母，字母表如下所示：

> A、B、C、Ç、D、E、F、G、Ğ、H、I、İ、J、K、L、M、N、O、Ö、P、R、S、Ş、T、U、 Ü、V、Y、Z。

所以这封信在第 12 位。

我不知道为什么，但在获取对象后使用比较器是可行的。所以它适用于任何数组，但不适用于获取请求的排序描述符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:00:17.393

[在NSFetchedResultsController vs UILocalizedIndexedCollat​​ion](https://stackoverflow.com/questions/7199934/nssearchresultscontroller-v-s-uilocalizedindexedcollation)中查看我的问题的详细信息，我将展示如何使用 UILocalizedIndexedCollat​​ion 正确生成 Alphabet 并使用基于 UILocalizedIndexCollat​​ion 的正确排序方法进行排序。我的问题只是围绕着寻求更好的方法来做到这一点。

如果您不使用 UILocalizedIndexCollat​​ion，您应该只使用 WWDC 视频中提到的 localizedStandardCompare: notlocalizedCompare 进行本地化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:10:37.983

尝试

```
[NSSortDescriptor alloc] initWithKey:@"property" ascending:YES selector:@selector(localizedCompare:)] 
```

**编辑**

@Mert 更新了他的问题。现在似乎`localizedCompare:`正确地对土耳其字母进行了排序，但不适用于获取请求。

这是我为测试此问题所做的工作。也许您可以检查它是否适用于您的环境，然后从那里开始工作：

```
// Create some entities:
NSArray *a = @[@"İ", @"J", @"Ğ", @"G", @"H", @"I", @"Ç", @"C"];
for (NSString *s in a) {
    MyEntity *e = [NSEntityDescription insertNewObjectForEntityForName:@"MyEntity"
                                                inManagedObjectContext:self.managedObjectContext];
    e.name = s;
}

// Fetch all entities in sorted order:
NSFetchRequest* req = [[NSFetchRequest alloc] initWithEntityName:@"MyEntity"];
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"name"
                                                           ascending:YES
                                                            selector:@selector(localizedCompare:)];
req.sortDescriptors = [NSArray arrayWithObject:descriptor];
NSArray *result = [self.managedObjectContext executeFetchRequest:req error:nil]; 
```

“MyEntity”是一个核心数据实体，具有一个字符串类型的属性“名称”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T11:53:21.170

我遇到了类似的问题：

`[strArr sortedArrayUsingSelector:@selector(localizedCompare:)]`

看起来

`localizedCompare`

来电

`compare:other options:nil range:NSMakeRange(0, self.length) locale: [NSLocale currentLocale]];`

`[NSLocale currentLocale]`根据用户的喜好，可能处于混合状态。因此需要`NSLocale`根据用户的语言创建一个干净的

`NSString`尝试使用以下内容创建一个类别：

```
-(NSComparisonResult)currentLocalCompare:(id)other
{
    NSLocale * currLoc = [NSLocale currentLocale]; //get current locale
    NSLocale * loc = [[NSLocale alloc] initWithLocaleIdentifier:currLoc.localeIdentifier];//lets create a new clean NSLocale based on users prefared langauge
    return [self compare:other options:nil range:NSMakeRange(0, self.length) locale:loc];//compare using clean NSLocale
} 
```

并称之为：

`[strArr sortedArrayUsingSelector:@selector(currentLocalCompare:)]`

# c - 为什么相同的float值和使用atof函数转换成float的字符串不相等？

> ID：11814561
> 
> 赞同：2
> 
> 时间：2012-08-05T07:01:36.057
> 
> 标签：c

我用 C 语言编写了一个程序，当我比较 float 和使用函数 atof 转换为 float 的字符串的相同值时，结果 NOT EQUAL 。

```
 #include<stdio.h>

    main(){

            char str[10] = "54.23" ;
            float val = 54.23 ;

            if( atof(str) == val )
                 printf("\nconverted correctly");
            else
                 printf("\nThen What is the use of atof\n ");

       } 
```

这个程序正在显示输出：“那么 atof 有什么用” 请告诉我为什么这个程序会显示这种匿名行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T07:28:05.210

## 永远不要测试浮点数/双精度数是否相等`==`

这是您的代码的一个版本，它实际上显示了有问题的值：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char str[10] = "54.23";
    float val = 54.23;

    printf("atof(str) = %.15f\n", atof(str));
    printf("      val = %.15f\n", val);

    return 0;
} 
```

当你运行它时，你会看到：

```
$ gcc -Wall atof.c
$ ./a.out 
atof(str) = 54.229999999999997
      val = 54.229999542236328
$ 
```

这些值很接近，在单精度浮点数的预期精度范围内，但它们并不相同。此外，正如其他人所指出的那样，`atof`返回 a `double`，因此您将 a`float`提升的值与 a返回`double`的完整精度进行比较。`double``atof`

与此类问题一样，请先阅读[此](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)内容，然后再进一步处理代码中的浮点运算。“带回家的信息”是您永远不应该将浮点数或双精度数与`==`- 始终将绝对差异与适当的容差值进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T07:04:56.910

因为`val`是一个int；当您分配它时，`54.23`它将被截断为 54。并且 54 ！= 54.23。

即使它是一个浮点数，你也不能指望它们是平等的。[这就是为什么。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T03:49:52.767

```
double atof(char *str);\\it return double not a float 
```

这种比较是在浮点数和双精度数之间进行的。当您在两种不同类型之间进行比较时，您可能会得到一些意想不到的输出。因为每种数据类型具有不同的内存表示以及不同的访问机制。

与 double 相比， float 以不同的形式在内存中表示。

您也可以在维基百科中了解更多信息

[http://en.wikipedia.org/wiki/Floating_point#Internal_representation](http://en.wikipedia.org/wiki/Floating_point#Internal_representation)

您应该再次包含头文件

```
#include <stdlib.h> \\prototype of atof() present in this header. 
```

如果您在使用该功能之前没有提供正确的原型，那么

默认情况下返回函数的类型 int 。所以我认为返回结果肯定与您预期的不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T07:30:33.300

你几乎不想用浮点数检查相等性，因为微小的差异将被解读为不相等。还有其他问题。例如，即使使用双精度，十进制数“0.1”也表示为“0.10000000000000001”。

在这种情况下，您的“val”变量是一个双精度文字，它被转换为浮点数。结果可能不会完全准确。其次，您的字符串文字需要从以 10 为底的转换为以 2 为底的双精度。因此，要将 atof 值与您的文字进行比较，atof 将一个以十为底的字符串转换为以二为底的双精度，而“val”从以十为底的文字转换为以二为底的双精度为以二为底的浮点数，然后向上转换*回*一个基数二双做比较。

事实上，我不会*确切地*确定丢失的精确度去了哪里。按照 Paul 的代码可能建议的方式进行操作，并将这些值与*容差*范围内的值进行比较。

# objective-c - 如何获得对在 xib 文件中创建的 NSWindow 的引用？

> ID：11814562
> 
> 赞同：1
> 
> 时间：2012-08-05T07:01:43.780
> 
> 标签：objective-c, cocoa, interface-builder

我使用一个 xib 文件来显示一个`NSWindow`命名的 mainWindow - 现在我想通过代码（例如`NSWindow *mainWindow`）获取对 mainWindow 的引用。我在文档中找不到任何东西，任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:53:24.830

xib 文件中将包含应用程序委托和/或文件所有者的占位符对象。

假设它有应用程序委托，您可以通过以下方式获取对窗口或 xib 中任何对象的引用

1.  在正确类型的应用程序委托中声明一个属性，并将 IBOutlet 作为其类型的一部分：

    ```
    @property (weak) IBOutlet NSWindow* theWindow; 
    ```

2.  在 xib 中找到应用程序委托对象。在按下控制键的同时单击并拖动它。您应该在鼠标指针和对象之间找到一条线。

3.  拖动到窗口并释放鼠标按钮。
4.  您应该在应用程序委托中看到一个插座列表。选择`theWindow`并完成。

# c - SetBkMode(hdc, TRANSPARENT) 不起作用

> ID：11814563
> 
> 赞同：1
> 
> 时间：2012-08-05T07:01:57.897
> 
> 标签：c, winapi, text, gdi

当我`SetBkMode(hdc, TRANSPARENT);`在下面的代码中使用时，当我调整主窗口的大小时（因此当孩子收到 WM_PAINT 消息时），我得到了以下效果：

![在此处输入图像描述](../Images/982946840e764870005881c263baf486.png)

问题是：当我调整主窗口的大小时，“查找：”的旧区域应该被删除，我猜。但它仍然存在。

如果我不使用`SetBkMode(hdc, TRANSPARENT);`，我没有这个问题。看起来像：

![在此处输入图像描述](../Images/9bd40b3c68e2c0bef4936a67fd2a4cf7.png)

，即它有白色背景。此外，如果我使用`SetBkMode(hdc, TRANSPARENT);`，在我调整主窗口大小之前，它看起来与上面相同。所以我不认为`SetBkMode(hdc, TRANSPARENT);`在这里工作。

是`hwnd`一个有风格的静态孩子`SS_BITMAP`。

你知道为什么会出现这个问题吗？

```
switch (message) {
    case WM_PAINT:
        PAINTSTRUCT ps;
        HDC hdc = BeginPaint(hwnd, &ps);

        SelectObject(hdc, gDefaultGuiFont);
        SetBkMode(hdc, TRANSPARENT);

        RECT rc;
        GetClientRect(hwnd, &rc);
        DrawText(hdc, _TR("Find:"), -1, &rc, DT_SINGLELINE | DT_CENTER | DT_VCENTER);

        EndPaint(hwnd, &ps);

        return 0;

     .............
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:29:39.400

问题是windows没有更新静态控件后面的控件（及时），你现在负责它的内容。所以你想使用父母提供的背景。好吧，只需让父母在子窗口中为您绘制它：

```
RECT rc;
GetClientRectRelative(m_hWnd, GetParent(m_hWnd), &rc);
SetWindowOrgEx(m_mdc, rc.left, rc.top, NULL);
SendMessage(GetParent(m_hWnd), WM_PAINT, (WPARAM)(HDC)m_mdc);
SetWindowOrgEx(m_mdc, 0, 0, NULL); 
```

其中

```
bool GetClientRectRelative(HWND hWnd, HWND hWndRelativeTo, RECT *pRect)
{
    RECT rcWnd, rcRelativeTo;
    if (!GetClientRect(hWnd, &rcWnd) ||
            !ClientToScreen(hWnd, (POINT*)&rcWnd) ||
            !ClientToScreen(hWnd, (POINT*)&rcWnd + 1) ||
            !GetClientRect(hWndRelativeTo, &rcRelativeTo) || 
            !ClientToScreen(hWndRelativeTo, (POINT*)&rcRelativeTo) ||
            !ClientToScreen(hWndRelativeTo, (POINT*)&rcRelativeTo + 1))
        return false;

    pRect->top = rcWnd.top - rcRelativeTo.top;
    pRect->left = rcWnd.left - rcRelativeTo.left;
    pRect->right = rcWnd.right - rcRelativeTo.left;
    pRect->bottom = rcWnd.bottom - rcRelativeTo.top;

    return true;
} 
```

现在画你喜欢的任何东西，我建议你使用`TRANSPARENT`背景模式。

`WS_CLIPCHILDREN`请使用和样式创建您所有的子窗口`WS_CLIPSIBLINGS`，然后这些问题将立即变得明显并且您避免闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:24:41.893

尝试使用“固定”矩形。例如

```
 RECT rc;
    GetClientRect(hwnd, &rc);
    rc.left += ...; rc.top += ...; // shift up-left point
    DrawText(hdc, _TR("Find:"), -1, &rc, DT_SINGLELINE | DT_LEFT | DT_TOP); 
```

这个想法是你在错误的位置（一次）和正确的位置（两次）绘制文本，而背景只更新一次。关于部分代码不能说更多。

# python - python，从模块调用函数的麻烦

> ID：11814565
> 
> 赞同：-1
> 
> 时间：2012-08-05T07:02:26.470
> 
> 标签：python, import, module

我导入了一个模块，如下所示：

```
filename = "email"
mymodule = __import__('actions.'+filename) 
```

我遇到的问题是，文件正在立即执行，我更愿意从文件中执行特定的函数（这样我可以通过它发送变量）。

我基本上是在使用插件，所以它可以工作。

**编辑**：暂时，我不关心当我添加以下行时脚本是否执行：

```
mymodule = __import__('actions.'+filename) 
```

但我想要工作的是当我添加下面的行时，我希望执行该函数。但是相反，我收到一个错误，即模块没有该功能，即使它存在于脚本中。

```
mymodule.dosomething(n) 
```

**编辑**：我个人认为该函数与它没有任何关系，但这是我试图打开的一个 python 文件。

```
import webbrowser
def OpenEmail():
    handle = webbrowser.get()
    handle.open('http://gmail.google.com')
OpenEmail()
print "Your email has been opened" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:07:06.017

除非模块执行，否则这些功能不存在。你不能两全其美。也许您需要在模块中添加一个[主要节](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:22:03.223

问题是，你得到了`actions`返回的模块。尝试这个：

```
mymodule = __import__('actions.'+filename)
for submodule in filename.split('.'):
    mymodule = getattr(mymodule, submodule) 
```

当您尝试导入子模块时会发生这种情况，即`module.something.somethingelse`您被`module`退回。

# ios - 在 OS X Mountain Lion 上使用 FireMonkey 进行 iOS 开发？

> ID：11814567
> 
> 赞同：1
> 
> 时间：2012-08-05T07:02:28.717
> 
> 标签：ios, delphi, delphi-xe2, firemonkey, osx-mountain-lion

[是否可以在OS X Mountain Lion](http://en.wikipedia.org/wiki/OS_X_Mountain_Lion)上使用 FireMonkey 进行 iOS 开发？

如果是，安装/配置步骤是什么？

# c - 我无法理解这种类型转换

> ID：11814569
> 
> 赞同：2
> 
> 时间：2012-08-05T07:02:38.047
> 
> 标签：c, arrays, pointers, type-conversion

我已经使用指针进行了类型转换，`int`但`char`没有使用指针，所以我发布了这个问题。

```
#include <stdio.h>
int main() {
    int a[4] = { 1, 2, 6, 4 };
    char *p;
    p = (char *)a;   // what does this statement mean?
    printf("%d\n",*p);
    p = p + 1;        
    printf("%d",*p);  // after incrementing it gives 0 why?
} 
```

第一次调用`printf`给出数组的第一个元素。在`p=p+1`它给出之后`0`。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T07:27:32.717

让我们想象一个相当典型的平台，其中一个字节为 8 位，内存使用 little-endian 字节顺序排列，an`int`表示内存中的 4 个字节。在这个平台上，值的`1`布局如下：

```
00000001 00000000 00000000 00000000
^
the first element of 'a' 
```

`p`被声明为指向`char`(not `int`) 的指针，并被初始化为指向数组的第一个元素`a`。这个平台上的 A`char`代表一个字节。`int`上面解释为 a的值`char`如下所示：

```
00000001 -------- -------- --------
|      |
 ------
 char is only 8 bits wide 
```

因此，无论我们读取一个字节还是四个字节，即，无论我们读取`*p`还是`a[0]`，值都是`1`。但是，当您增加`p`指向 的指针时`char`，它现在指向内存中的下一个*字符*，即下一个字节：

```
00000001 00000000 00000000 00000000
00000001 00000000 -------- --------
^        ^        ^        ^
p       p+1      p+2      p+3       ... 
```

`a[1]`指向下一个`int`( `2`)，`p[1]`指向下一个`char`，即`0`.

* * *

在旁注中，您实际上偶然发现了一种方法来确定给定处理器是使用小端还是大端字节顺序。如果系统是大端（最高有效字节在前），那么您的第一个`printf`将打印 0。这是因为内存布局会发生变化：

```
0000000 00000000 00000000 00000001
^
the first element of 'a'

0000000 -------- -------- --------
^
p 
```

如果您有多个以 big-endian 顺序排列的代表值 1 的字节，并且您只读取第一个字节，则可以使用它的值（`1`或`0`）来测试机器的字节序：

```
int n = 1;
if(*(char*)&n == 1)
    // little endian
else
    // big endian 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T07:09:08.330

确切地说，first`printf`没有给出数组的第一个元素，它给出了第一个元素的前**8 位**，恰好等于第一个元素的数值。第二个 printf 给出了第一个元素的下 8 位，在这种情况下为 0。

**1 = 00000000 00000000 00000000 00000001（32 位）**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T07:10:43.070

你有一个由四个整数组成的数组。您尝试将它们作为字符的“数组”来访问。这就是铸造的意思。

至于第二个`printf`打印零，请记住整数是四个字节，而字符只有一个。因此增加指针`p`将`p`指向第一个整数的第二个字节，即零。如果你有一个更大的数字（即超过 255），那么第二个字节也会有一个值。但请注意，这仅适用于*小端*的 Intel 类型机器，在*大端*机器上都`printf`将打印零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T07:16:03.087

```
int a[4] = { 1, 2, 6, 4 }; 
```

将 a 声明为数组。`a`此时存储数组第一个元素的地址。

```
char *p; 
```

将p 声明`pointer`为`character`

```
p = (char *)a; 
```

现在因为`p`&`a`两家商店的地址。因此，存储在`a`(`address`数组的第一个元素的) 的地址被分配给`p`。类型转换是按照`p`声明的那样完成的`char *`

它的作用是，假设存储的地址`a`是 100*并假设它`int`占用 2 个字节并`char`在内存中占用 1 个字节*

```
a+1 would return a+size of int(2) = 102 
```

和

```
p+1 would return p+size of char(1) = 101 
```

这将把输出解释为

A. 存储的两个字节`a`包含数组的第一个元素。

B.一个字节存储在`p`是整数的第一个字节的字符表示`1`，即`0`。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T07:19:53.587

如果您使用类似英特尔的处理器，则堆栈上的字节将使用小端格式存储。此外，可能 int 类型（在您的计算机上）的大小为 4 个字节，而 char 的长度为 1 个字节（您可以使用 c 运算符“sizeof”验证这一点），因此整数数组的第一个元素是：

```
0x04 0x00 0x00 0x00 
```

出于这个原因，当您使用 char 指针查看整数数组的值时，您每次向前推进一个字节（而不是 4 个字节），您已经获得了明显的结果。

我希望这有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-05T07:23:02.167

a 是指向内存数组的指针。该内存可能以小端二进制补码格式排列为 16 字节的连续块。

当你转换它时，你基本上只是说“好吧，我知道这是一个指向整数数组的指针，但现在我们要将数据重新解释为一个字符数组”。char 通常是一个字节。因此，当您向指针添加 1 时，您增加了指针指向的*位置*。因为它是一个char数组，所以它在数组中向下移动了一个*字节*，它位于int的中间，包含0。

澄清一下，*根据我对您计算机架构的假设*：

> 小端号码（最低显著字节至上）：
> = 1以二进制小数00000010000000000000000000000000 = 2用二进制小数00000110000000000000000000000000 = 6十进制00000100000000000000000000000000 00000001000000000000000000000000二进制以十进制二进制= 4

您的整数数组如下所示：

> 00000001000000000000000000000000000000010000000000000000000000000000001100000000000000000000000000000001000000000000000000000000

变量“a”指向第一个整数，它是 32 位（即，“*a”是`00000001000000000000000000000000`）。如果将变量“a”加一，*则指针*递增，因此 *(a+1) 指向第二个 int `00000010000000000000000000000000`)。

现在，您将变量“a”转换为“char*”指针。所以，现在，变量“p”指向同一个地方，但是因为它是一个字符指针，指向第一个字符，它是 8 位（即，“*p”是`00000001`数组的第一个字节）。

最后，当你增加“p”时，你增加了*指针*。因为“p”是一个指向字符的指针，它前进了一个*字节*，所以“*(p+1)”是`00000000`。

# python - 在 Python 中使用 gdata Youtube API 时出现套接字错误

> ID：11814571
> 
> 赞同：1
> 
> 时间：2012-08-05T07:03:25.260
> 
> 标签：python, youtube, youtube-api, gdata

我正在使用`gdata`以下代码将 YouTube URL 映射到视频标题：

```
import gdata.youtube.service as youtube
import re
import queue
import urlparse

ytservice = youtube.YouTubeService()
ytservice.ssl = True
ytservice.developer_key = '' # snip

class youtube(mediaplugin):
  def __init__(self, parsed_url):
    self.url = parsed_url
    self.video_id = urlparse.parse_qs(parsed_url.query)['v'][0]
    self.ytdata = ytservice.GetYouTubeVideoEntry(self.video_id)
    print self.ytdata 
```

调用 service.GetYouTubeVideoEntry() 时出现以下套接字异常：

```
 File "/Users/haldean/Documents/qpi/qpi/media.py", line 21, in __init__
    self.ytdata = ytservice.GetYouTubeVideoEntry(self.video_id)
  File "/Users/haldean/Documents/qpi/lib/python2.7/site-packages/gdata/youtube/service.py", line 210, in GetYouTubeVideoEntry
    return self.Get(uri, converter=gdata.youtube.YouTubeVideoEntryFromString)
  File "/Users/haldean/Documents/qpi/lib/python2.7/site-packages/gdata/service.py", line 1069, in Get
    headers=extra_headers)
  File "/Users/haldean/Documents/qpi/lib/python2.7/site-packages/atom/__init__.py", line 93, in optional_warn_function
    return f(*args, **kwargs)
  File "/Users/haldean/Documents/qpi/lib/python2.7/site-packages/atom/service.py", line 186, in request
    data=data, headers=all_headers)
  File "/Users/haldean/Documents/qpi/lib/python2.7/site-packages/atom/http_interface.py", line 148, in perform_request
    return http_client.request(operation, url, data=data, headers=headers)
  File "/Users/haldean/Documents/qpi/lib/python2.7/site-packages/atom/http.py", line 163, in request
    connection.endheaders()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 937, in endheaders
    self._send_output(message_body)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 797, in _send_output
    self.send(msg)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 759, in send
    self.connect()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 1140, in connect
    self.timeout, self.source_address)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 553, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
gaierror: [Errno 8] nodename nor servname provided, or not known 
```

我什至不知道如何开始调试它。任何想法表示赞赏。谢谢！

*编辑：*
针对评论中提出的问题，`video_id`是`qh-mwjF-OMo`和`parsed_url`是：

```
ParseResult(scheme=u'http', netloc=u'www.youtube.com', path=u'/watch', params='', query=u'v=qh-mwjF-OMo&feature=g-user-u', fragment='') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:28:22.447

我的错误是`video_id`应该作为关键字参数传递，如下所示：

```
 self.ytdata = ytservice.GetYouTubeVideoEntry(video_id=self.video_id) 
```

似乎套接字异常是唯一`gdata`会抛出异常的层；它尝试根据参数盲目地获取 URL，并且仅在 URL 获取失败时才会失败。

# android - 在 Android 上下载 XML 文件，将其存储，然后在本地使用

> ID：11814577
> 
> 赞同：2
> 
> 时间：2012-08-05T07:05:06.143
> 
> 标签：android, xml

我是 Android 编程的初学者，正在开发一个显示产品列表的应用程序，单击时，一个新活动会显示有关该特定产品的详细信息。

此产品列表以 xml 文件的形式在线存储，明显的问题是每次使用设备时都需要连接到互联网。我希望设备也可以离线工作。

一种方法是在本地存储最新的 xml。但是我的产品会经常更新。如何保持 xml 文件的本地副本更新？此外，当设备可以使用互联网时，如何检查更新？我想要这两个过程，即检查互联网和更新本地文件以在后台运行，而最新的但一个（本地 xml 文件）仍显示在屏幕上。

抱歉，如果这个问题含糊不清。如果需要，我很乐意添加更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:30:12.387

我会将 XML 文件存储在本地，如果 Internet 可用，请检查本地 XML 文件的日期与服务器的 XML 修改日期。如果它较新，请将其拉​​下并再次在本地解析和存储结果。

# python - 这些在 Python 中处理 Unicode 字符串的方法有什么区别？

> ID：11814578
> 
> 赞同：0
> 
> 时间：2012-08-05T07:05:44.460
> 
> 标签：python, unicode, encoding

我试过了`print a_str.decode("utf-8")`，，，，..`print uni_str``print uni_str.decode("utf-8")``print uni_str.encode("utf-8")`

但只有第一个有效。

```
 >>> print '\xe8\xb7\xb3'.decode("utf-8")
 跳
 >>> print u'\xe8\xb7\xb3\xe8'
 è·³è
 >>> print u'\xe8\xb7\xb3\xe8'.decode("utf-8")
 Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py", line 16, in decode
     return codecs.utf_8_decode(input, errors, True)
 UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)
 >>> print u'\xe8\xb7\xb3\xe8'.encode("utf-8")
 è·³è 
```

我真的很困惑如何正常显示 Unicode 字符串。如果我有这样的字符串： `a=u'\xe8\xb7\xb3\xe8'`，我该如何打印`a`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T07:46:23.460

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:09:16.217

如果你有这样的字符串，那么它就坏了。您需要将其编码为 Latin-1 以将其转换为具有相同字节值的字节串，然后解码为 UTF-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:48:57.887

Unicode 字符串`u'\xe8\xb7\xb3\xe8'`等价于`u'\u00e8\u00b7\u00b3\u00e8'`. 您想要的是`u'\u8df3'`可以在 utf8 中编码为`'\xe8\xb7\xb3'`.

在 Python 中，unicode 是 UCS-2 字符串（构建选项）。所以，`u'\xe8\xb7\xb3\xe8'`是一个由 4 个 16 位 Unicode 字符组成的字符串。

如果您得到一个 utf-8 字符串（8 位字符串）错误地显示为 Unicode（16 位字符串），您必须先将其转换为 8 位字符串：

```
>>> ''.join([chr(ord(a)) for a in u'\xe8\xb7\xb3']).decode('utf8')
u'\u8df3' 
```

请注意，这`'\xe8\xb7\xb3\xe8'`不是有效的 utf8 字符串，因为最后一个字节`'\xe8'`是两字节序列的第一个字符，不能终止 utf8 字符串。

# mysql - 使用 LEFT JOIN 对相同的行进行分类而不重复一对多关系

> ID：11814581
> 
> 赞同：0
> 
> 时间：2012-08-05T07:07:22.590
> 
> 标签：mysql, join, one-to-many, group-concat

请原谅我的问题标题，我不确定我应该说什么，我有这两个表如下。

```
products                orders
+------+----------+     +--------+------+-------+
|  id  | name     |     |   id   |  qty |  pid  |
+------+----------+     +--------+------+-------+
|  1   | mouse    |     | 10001  |  20  |   1   |
|  2   | keyboard |     | 10002  |  15  |   3   |
|  3   | headset  |     | 10004  |  5   |   3   |
+------+----------+     | 10005  |  12  |   2   | 
                        | 10006  |  18  |   1   |
                        +--------+------+-------+ 
```

这是我正在使用的 LEFT JOIN 查询和输出

```
SELECT p.id AS No, p.name AS ProductName, o.qty AS Quantity
FROM products AS p
LEFT JOIN orders AS o ON p.id = o.pid

+------+-------------+----------+
|  No  | ProductName | Quantity |
+------+-------------+----------+
|  1   | mouse       |   20     |
|  1   | mouse       |   18     |
|  2   | keyboard    |   12     | 
|  3   | headset     |   15     |
|  3   | headset     |    5     |
+------+-------------+----------+ 
```

我想要实现的是如下输出：

```
+------+-------------+----------+
|  No  | ProductName | Quantity |
+------+-------------+----------+
|  1   | mouse       |   20     |
|      |             |   18     |
|  2   | keyboard    |   12     | 
|  3   | headset     |   15     |
|      |             |    5     |
+------+-------------+----------+ 
```

我的问题是可以这样做吗？任何回复和建议都非常感谢。谢谢。

P/S：我也尝试过使用 GROUP_CONCAT(qty SEPARATOR ",") 但它会在一行中返回结果，因为将来我可能会在 Orders 表中添加更多额外的列，并且很难阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:43:05.910

当然，这是可能的——而且不需要使用变量：

```
SELECT    IF(c.min_oid IS NOT NULL, a.id,   NULL) AS No,
          IF(c.min_oid IS NOT NULL, a.name, NULL) AS ProductName,
          b.qty AS Quantity
FROM      products a
JOIN      orders b ON a.id = b.pid
LEFT JOIN (
          SELECT   MIN(id) AS min_oid
          FROM     orders
          GROUP BY pid
          ) c ON b.id = c.min_oid
ORDER BY  a.id,
          b.id 
```

基本上它所做的是如果该行不是特定产品的最小订单ID，则显示空白（NULL），否则显示信息。

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/d5fd6/13)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:49:03.583

在这种情况下，您可以使用 MySQL 变量。我将之前的产品 id 存储在变量`@prev`中，只有当它发生变化时，我们才会输出产品名称。

[http://www.sqlfiddle.com/#!2/d5fd6/9](http://www.sqlfiddle.com/#!2/d5fd6/9)

```
SET @prev := NULL;

SELECT
  IF( @prev = p.id, NULL, p.id) AS No,
  IF( @prev = p.id, NULL, p.name) AS ProductName,
  o.qty AS Quantity
 ,@prev := p.id

FROM products AS p

LEFT JOIN orders AS o
       ON p.id = o.pid 
```

# python - 烧瓶中的多语言网址

> ID：11814582
> 
> 赞同：3
> 
> 时间：2012-08-05T07:08:20.220
> 
> 标签：python, web, flask, multilingual

我刚开始玩 Flask，所以很可能我只是错过了一些明显的东西，但对于其他人来说，这可能是个好问题，也寻找相同的答案:)

我想创建 Flask 应用程序，它将侦听多语言 URL。所以我想要的是一个端点将在 /news/111 上监听，就像 /naujiena/111 一样（例如立陶宛语）。

所以一个明显的解决方案是给视图函数提供一些路由，比如：

```
@app.route('/news/<id>')
@app.route('/naujiena/<id>')
def news_view(id): pass 
```

哪个应该有效，但显然稍后添加新语言或只是更新链接会在（一些私密的地方）痛苦。

我想到的另一个解决方案是，我可以有一个文件来定义真实视图函数，然后是一些“语言视图”文件，我只需在其中获取请求，然后从其他文件中查询真实视图函数。像

新闻.py

```
def news_view(id): pass 
```

news_en.py

```
from news import news_view
@app.route('/news/<id>')
def news_view_en(id):
    return news_view(id) 
```

新闻_lt.py

```
from news import news_view
@app.route('/naujiena/<id>')
def news_view_lt(id):
    return news_view(id) 
```

这还不错，至少可以以某种方式很好地组织起来。但我打赌应该有一些我想念的东西:) 那么伙计们，那是什么？:) 欢迎提出任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:41:19.240

您可以使用该[`add_url_rule()`](http://flask.pocoo.org/docs/api/?highlight=route#flask.Flask.add_url_rule)函数动态路由 URL：

```
view_functions = [news_view, foo_view, bar_view]

for view in ['news', 'foo', 'bar']:
  for translation in translations[view]:
     app.add_url_rule('/{}/'.format(translation), view, view_functions[view]) 
```

# jquery - 为什么要使用 jQuery 过滤器？

> ID：11814584
> 
> 赞同：0
> 
> 时间：2012-08-05T07:08:39.450
> 
> 标签：jquery, jquery-filter

当您可以按类获取和显示/隐藏元素时，为什么jQuery中有[过滤功能？](http://api.jquery.com/filter/)

```
$('.yourClass'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:23:28.937

仅仅因为您有一些想要使用的元素并不意味着它们就在 DOM 中。考虑这个人为的例子：

```
var $els = $('<div class="a"></div><div class="b"></div>');
console.log($('.a'));
console.log($els.find('.a'));
console.log($els.filter('.a'));​ 
```

演示：http: [//jsfiddle.net/ambiguous/h3GMB/](http://jsfiddle.net/ambiguous/h3GMB/)

第一个，`$('.a')`，什么都没有，因为`$els`还没有在 DOM 中。第二个也没有给你任何东西，因为[`find`](http://api.jquery.com/find/)搜索*后代*。只有第三个会为您提供所需的内容，因为[`filter`](http://api.jquery.com/filter/)减少了：

> 匹配元素的集合到匹配选择器的元素 [...]

在为 DOM 准备模板块时，这种对 DOM 之外的事物的操作相当普遍。*即使有问题的*元素在DOM 中，`filter`和之间的区别`find`也相当重要。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:14:17.637

从文件来看：

> 给定一个表示一组 DOM 元素的 jQuery 对象，.filter() 方法从匹配元素的子集构造一个新的 jQuery 对象。提供的选择器针对每个元素进行测试；与选择器匹配的所有元素都将包含在结果中。
> 
> 考虑一个带有简单列表的页面：
> 
> 我们可以将此方法应用于列表项集：

```
$('li').filter(':even').css('background-color', 'red'); 
```

> 此调用的结果是项目 1、3 和 5 的红色背景，因为它们与选择器匹配（回想一下 :even 和 :odd 使用基于 0 的索引）。

过滤器功能用于将原始查询的结果过滤到特定元素中。

但是，如果您指的是`.hide()`and `.show()`，这是您的选择，而不是将您的代码拆分为 css 和 javascript，您可以使用一些跨浏览器的方法来完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T07:16:58.237

`filter`允许您过滤您拥有的集合的一部分，假设我们有一个项目列表，并且我想为所有项目添加一个类，但对于其中的一部分我想添加另一个类：

```
$('#mylist li').addClass('someclass').filter('.someotherclass').addClass('filtered'); 
```

我可以把它分成两个查询。*

# java - 如何选择要在 Java for Android 中显示的图片目录（使用单选按钮）？

> ID：11814585
> 
> 赞同：2
> 
> 时间：2012-08-05T07:08:41.950
> 
> 标签：java, android

公然的 n00b 问题：我有几个图片目录，希望只显示一个随机图片，我通过一组单选按钮选择。使用时如何指定目录：

```
//"ha" is ha.png, which I would like to be at drawable/1/ha.png
image.setImageResource(R.drawable.ha); 
```

我可以用`setImageResource`这个吗？如果有怎么办？如果没有，我应该使用什么以及如何使用？

练习的对象是一个抽认卡程序，在第一个活动中可选择不同的课程（因此划分图像）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T07:25:04.713

如果您指的是 apk 中的 drawables 文件夹，则不能在 res/drawable 下有子文件夹。

如果您指的是 sdcard 上的随机文件夹，则可以使用子文件夹，但您不能使用 R.drawable.* 来引用图像。

在这种情况下，您需要使用加载图像

```
Bitmap bmp = BitmapFactory.decodeFile("/sdcard/drawable/1/ha.png"); 
```

它返回一个位图，您可以像这样使用它

```
image.setImageBitmap(bmp) 
```

见[http://developer.android.com/reference/android/widget/ImageView.html#setImageBitmap(android.graphics.Bitmap)](http://developer.android.com/reference/android/widget/ImageView.html#setImageBitmap(android.graphics.Bitmap))

为了对对单选按钮所做的更改做出反应，请参阅 [如何在 android 中的单选按钮上设置 On click listener](https://stackoverflow.com/questions/8323778/how-to-set-on-click-listener-on-the-radio-button-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:28:27.230

您可以使用 GridView 显示从单选按钮选择的目录中的图像（如您的要求所述）。创建 GridView 后，将适配器关联到它。请参阅下面的示例适配器：

```
public class ImageAdapter extends BaseAdapter {

    /** LayoutInflater. */
    private LayoutInflater mInflater;

    /** The i. */
    private ImageView i;

    /**
     * Instantiates a new image adapter.
     * 
     * @param c
     *            the c
     */
    public ImageAdapter(Context c) {
        mInflater = LayoutInflater.from(c);
    }

    public int getCount() {
                    // scaled pictures will have the list of
                    // which you have from the directory
        return scaledPictures.size();
    }

    public Bitmap getItem(int position) {
        return scaledPictures.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
        convertView = mInflater.inflate(R.layout.image, parent, false);
        } else {
            i = (ImageView) convertView;
        }

        Bitmap bitmap = getItem(position);
        i = (ImageView) convertView.findViewById(R.id.galleryimage);
        i.setImageBitmap(bitmap);
        bitmap = null;

        return i;
    }
} 
```

# php - jQuery FileManager 推荐

> ID：11814593
> 
> 赞同：8
> 
> 时间：2012-08-05T07:09:17.097
> 
> 标签：php, jquery, html, jquery-plugins, file-manager

我正在寻找一个文件管理器在我正在处理的 jQuery 项目中使用。最推荐的 jQuery FileManager 插件有哪些？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T08:57:15.470

看到这个；

用于 Web 的开源文件管理器，使用 jQuery UI 用 Ja​​vaScript 编写。

[http://www.webappers.com/2012/04/27/open-source-file-manager-for-web-using-jquery-ui/](http://www.webappers.com/2012/04/27/open-source-file-manager-for-web-using-jquery-ui/)

10 个基于 jQuery 的文件管理器插件

[http://www.jquery4u.com/plugins/10-jquery-file-manager-plugins/](http://www.jquery4u.com/plugins/10-jquery-file-manager-plugins/)

# jquery - 如何在链接上使用 jQuery 并使其在单击时在文本字段中显示链接？

> ID：11814594
> 
> 赞同：0
> 
> 时间：2012-08-05T07:09:27.597
> 
> 标签：jquery

我想要实现的目标很简单。我只是不知道实现它的 jQuery 术语。我希望能够单击一个链接，并且该链接将“链接”准确地输出到文本字段中。我想它会是这样的：

```
$(document).ready(function(){
  $('a.text-display').click(function(){
    "copy that link text and display it in a textbox"
   });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:13:02.277

差不多好了：

```
$(document).ready(function(){

    $('a.text-display').click(function(e){
        e.preventDefault(); //don't follow the link
        var linkText = $(this).text();
        $('#mytextfield').val(function(index, oldValue) {return oldValue + ' ' + linkText } ); //add the text to the current value of the textfield (input text)
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:18:47.790

你想要这样的东西吗？

```
$(document).ready(function(){

    $('a.text-display').click(function(e){
        e.preventDefault(); //don't follow the link
        $(this).replaceWith('<input value="'+ $(this).attr("href") +'">');
    });
});​ 
```

在这里查看它的实际效果：http: [//jsfiddle.net/EJcRB/](http://jsfiddle.net/EJcRB/)

# google-apps-script - 谷歌脚本拒绝电子表格提交

> ID：11814596
> 
> 赞同：0
> 
> 时间：2012-08-05T07:09:36.003
> 
> 标签：google-apps-script

我在基于电子表格的脚本中有一个函数，该函数在使用电子表格表单提交时触发：

```
function onEntry(e){
  Logger.log(e);
  MailApp.sendEmail("scriptadmin@uniben.edu", "New Mail Request", "Someone submited data");
} 
```

我如何拒绝该条目，比如它是否是重复条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:33:42.950

晚了 4 个月，但迟到总比没有好。我相信这个功能几乎可以满足最初的要求。即“如果我确定它是重复的，如何防止条目进入电子表格。” 这不是所要求的，但非常接近。

此代码针对另一张表中的同一列检查该表中的所有行的一列。假设您在工作表上有公司或客户的列表。该列表包括姓名、电话、地址等。假设您要检查电话号码 - 如果您当前输入的电话号码已经在您的客户表上，则不允许输入 - 或更准确地说是清除进入后立即退出。

我相信更有经验的成员能够指出缺陷，但这对我有用。我相信它也适用于工作表中间的电话号码被更改的情况 - 所以不仅仅是最后一行被检查，而是被编辑的行被检查 - 我没有测试过这个特殊的场景. 此外，我对变量名称进行了一些更改以保护无辜者......希望我在这样做时没有搞砸任何事情。

我从另一个由 onEdit 触发的函数中调用此函数。从理论上讲，它应该能够作为 onEdit 触发器本身安装。我希望有人觉得它有用。

```
function checkNewEntryForDuplicate(e) {
      var ss = SpreadsheetApp.getActiveSpreadsheet();
      var entrySheet = SpreadsheetApp.getActiveSheet();
      var clientSheet = ss.getSheetByName("Clients");  
      var r = entrySheet.getActiveCell();
      var lastCol = entrySheet.getLastColumn();

      // If this had any consistency, we'd be able to get the row from entrySheet the same
      // as we get column.  But there is no getRow() method at the sheet level.

      var rowNum = r.getRow(); 

      var clientData=clientSheet.getDataRange().getValues();
      var phoneColumnOffset=getPhoneColumnOffset(); // You'll need to get the offset elsewhere.  I have a function that does that.
      var columnNum=e.range.getColumn();  // column that is currently being edited

      if (columnNum != phoneColumnOffset+1)   // no point in doing anything else if it's not the column we're interested in.
        return 0;

      var entryRow=entrySheet.getRange(rowNum, 1, 1, lastCol);              
      var phoneNum = e.range.getValue();

      // iterate over each row in the clientData 2-dimensional array. 
      for(i in clientData){
        var row = clientData[i];
        var duplicate = false;

      // For each row this conditional statement will find duplicates

          if(row[phoneColumnOffset] == phoneNum){
            duplicate = true;
            var msg="Duplicate Detected.  Please do not enter.  Deleting it..."
            Browser.msgBox(msg);
            entryRow.clearContent();
            entryRow.clearComment();
            return duplicate;
          }
      }
    return duplicate;  

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:34:04.687

使用[有关事件的文档，](https://developers.google.com/apps-script/understanding_events)您必须选择要检查的数据（用户名、特定字段...）并将其与电子表格中已有的数据进行比较。

您应该在数组级别进行这些迭代，因为它会更加高效和快速，您可以使用类似的方法获取数组中的数据

`var data = SpreadsheetApp.openById(key).getDataRange().getValues();`

您还可以使用像 indexOf() 这样的 JavaScript 函数，如果找不到匹配项，则返回 -1；如果找到匹配项，则返回数组中的项目位置。

实际上有很多方法可以做到这一点，但你的问题太模糊了，不知道什么是最好的......

***编辑：***根据您的评论，我建议您让重复的表单数据进入工作表，然后使用脚本删除重复项。您可以在 a 或计时器上运行此脚本，`on form submit trigger`使其每天或每小时运行一次，并且仅当最后一个条目是新条目（未找到重复项）时才发送电子邮件......取决于您的用例。图库中有[一个脚本](https://developers.google.com/apps-script/articles/removing_duplicates)可以很好地完成这项工作，它是由贡献很多的 GAS TC **Romain Vialard编写的。**（上面的链接指向脚本描述，但您也可以在公共图库中获取它，只需搜索“删除重复项”，您会看到其他脚本这样做，图库中的所有脚本都已由 GAS 团队检查)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:54:15.110

我正在做同样的事情，但根本没有脚本，只是通过电子表格功能。这类事情对我来说就像 SQL 一样，非常有兴趣去做。

对于您的问题，此链接将有所帮助：[http ://www.labnol.org/software/find-remove-duplicate-records-google-docs/5169/](http://www.labnol.org/software/find-remove-duplicate-records-google-docs/5169/)

# php - 404错误页面的奇怪问题

> ID：11814599
> 
> 赞同：4
> 
> 时间：2012-08-05T07:10:51.777
> 
> 标签：php, .htaccess, http-status-code-404

我有一个使用自定义 404 错误页面的网站设置。这似乎适用于大多数页面。

事实上，我有两个不同的错误页面要显示，现在还有第三个是我刚刚发现的。

此页面不存在，它显示了在找不到页面时应显示的正确错误页面。这显示了我的 .htaccess 文件中配置的错误页面：http: [//www.canadiancommuter.com/wontfindthis.php](http://www.canadiancommuter.com/wontfindthis.php)

如果有人试图访问数据库中不再存在的旧文章，则会从我的 PHP 代码生成此错误页面：http: [//www.canadiancommuter.com/2334054466-some+old+article.html](http://www.canadiancommuter.com/2334054466-some+old+article.html)

但是，此链接也会生成 404 错误，但会显示不同的错误页面（通常包括广告）： http: [//www.canadiancommuter.com/2012062500-TTC+asks+Ministry+of+Labour+to+treat +CNE+like+Rolling+Stones+音乐会%2FCaribana.html](http://www.canadiancommuter.com/2012062500-TTC+asks+Ministry+of+Labour+to+treat+CNE+like+Rolling+Stones+concert%2FCaribana.html)

我知道这个 URL 不起作用的原因。我故意向它添加字符以使其返回 404 错误。我的问题是我无法弄清楚其他 404 错误页面来自何处。

它不在我的 .htaccess 文件中，我的 .htaccess 文件中的错误页面可以在上面的第一个链接中看到。

它不在我的代码中。代码本身生成的唯一错误页面可以在上面的第二个链接中看到。

它可能来自的唯一其他地方是我的域名注册商和我的网络主机。

该域是通过一个注册商注册的，但指向我在另一个提供商处的托管帐户。注册商说，因为我只是将我的域的 DNS 指向我们的网络主机，所以错误页面不会来自他们，而是来自我的网络主机。

我的网络主机说这个错误页面不是来自他们，但必须在我的代码中。

我已经大量修改了用于该站点的所有代码，因此我非常有信心错误页面不是来自那里。

有谁知道我应该在哪里寻找这个错误页面？

（请注意，我不确定注册商或网络主机是否完全确定他们在说什么，所以我没有排除他们中的任何一个是此页面的来源。但是，彻底查看两者的管理控制台都没有显示任何相关信息。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T08:32:37.710

您的页面正在通过运行**cloudflare-nginx**`/`的代理提供服务，该代理可能会捕获一些 404 错误，因为任何一种或一种形式的斜线都会`%2F`导致提供不同的 404 页面。

您是否有一个`.htaccess`规则可以捕获所有可能的 404 错误，而不仅仅是那些与您的文件名方案匹配的错误？如果没有，请尝试设置一个。您还可以尝试在本地服务器实例中运行该站点，并查看 404 页面是否按预期运行。

*编辑，因为我错误地将产生的字符`Transfer-encoding: chunked`视为配置错误引起的*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T07:26:12.027

如果（正如您已经确定的那样）您的代码没有生成错误页面，那么“神秘”404 页面来自默认的网络服务器配置（可能由您的托管服务提供商控制）或*间接*来自您的 DNS 服务（如果例如，您的网络服务器会将您的浏览器重定向到未注册的域，然后您可能会被重定向到邀请您购买它的页面）。

IMO 最直接的追踪方法是使用配备了跟踪重定向机制的浏览器（例如，安装了 Firebug 扩展的 Firefox）。如果错误页面确实来自您的域（而不是拼写错误），那么这暗示了默认的网络服务器配置（因此可能是您的托管服务提供商）。

**编辑：** 重新阅读以上内容，我意识到我应该澄清一下：您的 DNS 服务不能简单地将您“重定向”到某个地方。如果您发现在浏览器中键入一个不存在的域会将您重定向到带有广告的页面，那么您可以相当确定是您的**网络连接提供商**正在检查您的 HTTP 请求，并在幕后代表您执行 DNS，并重定向你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T00:54:14.687

**这绝对来自您的主机提供商！**

当 %2F 在 url 中给出时，nginx 无法将其作为错误处理（这可能是一个错误！）并且它会显示您主机的默认错误页面，您可以在与您的站点相同的服务器上托管的其他网站上看到相同的错误：

*   [http://aias-uic.org/not-found.html](http://aias-uic.org/not-found.html)
*   [http://halfdrawn.com/not-found.html](http://halfdrawn.com/not-found.html)
*   [http://flyingmantis.com/not%2Ffound.html](http://flyingmantis.com/not%2Ffound.html)
*   ...

并且在与您的网站相同的服务器上还有许多其他网站！（你可以检查他们的IP确定）

最后一个使用自定义错误页面，因此使用 %2F会显示*神秘*的错误页面！

您也可以暂时禁用您的自定义错误页面，您可能会得到神秘的错误页面！

# objective-c - 对资源文件感到困惑

> ID：11814600
> 
> 赞同：2
> 
> 时间：2012-08-05T07:11:01.437
> 
> 标签：objective-c, bundle

我是一个非常菜鸟/爱好者程序员，将一些简单的 Mac 应用程序放在一起。

我对资源文件感到困惑。

我的（XCode 4.4）项目的文件夹中有一些 .png 图像。我的 Supporting Files 文件夹中还有一个 .plist（包含字典）。

为了访问 .plist，我添加了几行代码来挖掘 Bundle 并获取我想要的文件（我相信这是非常标准的）。

要使用 .png 文件，我只需按名称引用它们，当我在 Xcode 中运行时，一切都符合我的预期。

但是当我作为应用程序导出时，图像仍然可用并且可以正常工作，而无需我为它们进入 Bundle。

所以我的问题是 - 是什么决定了我应该将哪些资源文件放入 Bundle 中，以及我可以假设哪些资源文件由于它们位于我的 Supporting Files 文件夹中而可用？

非常感谢您阅读本文，以及您可以给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:48:40.413

我猜这取决于您使用的类，当您仅通过名称引用它们时，它只是一个方便的东西，XCode 仍然可以完成工作。

例如，对于 UIImage，您可以键入
`UIImage *image = [UIImage imageNamed:@"something"];`
但 XCode 将在构建时执行该`NSSearchPathForDirectoriesInDomains`操作。`[NSBoundle mainBoundle]`

只能对少数几个常用的类做快速名称引用方法，只是为了方便。
无论如何，这是我的理论，它需要确认。

# facebook - 如何简单地获取 Facebook 代理电子邮件地址

> ID：11814604
> 
> 赞同：3
> 
> 时间：2012-08-05T07:12:53.600
> 
> 标签：facebook, email, facebook-graph-api, facebook-apps

我正在构建一个 facebook 网络应用程序。默认情况下，如何使用 facebook graph api 获取代理电子邮件地址（@proxyemail.facebook.com）？

1.  如果 facebook 应用程序在授权对话框中需要“电子邮件”权限，则 api 返回用户的电子邮件地址（不是代理电子邮件地址）。
2.  如果用户在他们的 facebook 设置中打开 facebook 应用通知设置，则 api 会返回代理电子邮件地址。

我认为这两种解决方案都不好，因为许多用户不想尽可能将他们的电子邮件地址提供给外部应用程序，并且无法轻松打开设置。我想知道如何默认获取代理电子邮件地址。

如果无法获取地址，我可以向facebook请求这样的功能吗？

# ruby - Ruby 应用程序的 HashWithIndifferentAccess 问题

> ID：11814606
> 
> 赞同：0
> 
> 时间：2012-08-05T07:12:58.760
> 
> 标签：ruby, ruby-on-rails-3

我有两个与同一个数据库通信的应用程序。一个是 Ruby on Rails 应用程序，另一个是用 Ruby 编写的控制台应用程序。

在 Rails 应用程序中，我保存了一组设置，这些设置保存到名为“notification_settings”的列中。我的模型中有以下内容；

```
serialize :notification_settings, Hash 
```

这会导致列中的值按原样存储

```
--- !map:ActiveSupport::HashWithIndifferentAccess 
test: !map:ActiveSupport::HashWithIndifferentAccess 
  email: "1" 
```

ETC

当我在我的 Ruby 应用程序中做同样的事情时，哈希只是简单地保存为普通哈希。即使我做类似的事情；（在我的 Ruby 应用程序 model.rb 中）

```
 hash = HashWithIndifferentAccess.new(self.notification_settings)
    hash[:test][:email] = 0
    self.update_attribute(:notification_settings, hash) 
```

如何让 Ruby 应用程序以与 Rails 应用程序保存记录完全相同的方式 (HashWithIndifferentAccess) 保存记录？

# c++ - fmod 返回不一致的值

> ID：11814610
> 
> 赞同：3
> 
> 时间：2012-08-05T07:14:15.580
> 
> 标签：c++, mingw, math.h

在尝试使用一些 perlin 噪声函数时遇到了一个奇怪的错误。突然间，我在所有通话中都得到了一个off value。将其追溯到 fmod() 中不一致的返回值。

```
i=512;
cout << i << ","  << fmod(i/102.4,1.f) << "," << fmod(i/102.4,1.f) << endl; 
```

我希望得到以下输出。

```
512,0,0 
```

但我没有。我明白了。

```
512,0,1 
```

更奇怪的是，如果我多次调用 cout 行，错误会在以后的运行中消失。

```
512,0,1
512,0,0
512,0,0 
```

将值硬编码到函数中（将所有 'y' 替换为 '512'）会产生正确的结果（总是返回 0）。

有没有人见过这样的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T08:20:07.097

* * *

**最终编辑**：这几乎可以肯定是 GCC 或 glibc 中的错误。只需在代码中的其他地方声明一个调用 fmod 的函数（即使该函数没有被调用），问题就会消失。

我建议传递`-fno-builtins`给编译器来解决这个问题。这似乎为我解决了这个问题。

* * *

我能够在 GCC 4.5.3 中为 cygwin 重现这一点。

仅当`i`变量是非常量时才会发生这种情况[**编辑**：可能是因为它鼓励编译器使用临时来存储初始除法的结果）。我要测试的更简单的 C 程序：

```
#include <stdio.h>

#include <math.h>

int main()
{
    int i = 512;
    printf("%f %f\n", fmod(i/102.4,1.f), fmod(i/102.4,1.f));
    printf("%f %f\n", fmod(i/102.4,1.f), fmod(i/102.4,1.f));

} 
```

哪个输出：

```
0.000000 1.000000
0.000000 0.000000 
```

我试过查看 asm 输出，但我的 x87-foo 很弱。 *其他人可以看到有什么问题吗？* 在此期间我会继续寻找：

```
 .file   "test.cpp"
    .section    .debug_abbrev,"dr"
Ldebug_abbrev0:
    .section    .debug_info,"dr"
Ldebug_info0:
    .section    .debug_line,"dr"
Ldebug_line0:
    .text
Ltext0:
    .def    ___main;    .scl    2;  .type   32; .endef
    .section .rdata,"dr"
LC3:
    .ascii "%f %f\12\0"
    .text
.globl _main
    .def    _main;  .scl    2;  .type   32; .endef
_main:
LFB7:
    .file 1 "test.cpp"
    .loc 1 6 0
    pushl   %ebp
LCFI0:
    movl    %esp, %ebp
LCFI1:
    andl    $-16, %esp
LCFI2:
    subl    $64, %esp
LCFI3:
    .loc 1 6 0
    call    ___main
LBB2:
    .loc 1 7 0
    movl    $512, 60(%esp)
    .loc 1 8 0
    fildl   60(%esp)
    fldl    LC0
    fdivrp  %st, %st(1)
    fld1
    fld %st(1)
L2:
    fprem
    fnstsw  %ax
    sahf
    jp  L2
    fstp    %st(1)
    fucomi  %st(0), %st
    jp  L5
    fucomi  %st(0), %st
    je  L6
    fstp    %st(0)
    jmp L4
L5:
    fstp    %st(0)
L4:
    fld1
    fstpl   8(%esp)
    fstpl   (%esp)
    call    _fmod
    jmp L3
L6:
    fstp    %st(1)
L3:
    fstpl   40(%esp)
    fildl   60(%esp)
    fldl    LC0
    fdivrp  %st, %st(1)
    fld1
    fstpl   8(%esp)
    fstpl   (%esp)
    call    _fmod
    fldl    40(%esp)
    fstpl   12(%esp)
    fstpl   4(%esp)
    movl    $LC3, (%esp)
    call    _printf
    .loc 1 9 0
    fildl   60(%esp)
    fldl    LC0
    fdivrp  %st, %st(1)
    fld1
    fstpl   8(%esp)
    fstpl   (%esp)
    call    _fmod
    fstpl   32(%esp)
    fildl   60(%esp)
    fldl    LC0
    fdivrp  %st, %st(1)
    fld1
    fstpl   8(%esp)
    fstpl   (%esp)
    call    _fmod
    fldl    32(%esp)
    fstpl   12(%esp)
    fstpl   4(%esp)
    movl    $LC3, (%esp)
    call    _printf
LBE2:
    movl    $0, %eax
    .loc 1 10 0
    leave
LCFI4:
    ret
LFE7:
    .section .rdata,"dr"
    .align 8
LC0:
    .long   -1717986918
    .long   1079613849
    .section    .debug_frame,"dr"
Lframe0:
    .long   LECIE0-LSCIE0
LSCIE0:
    .long   0xffffffff
    .byte   0x1
    .ascii "\0"
    .uleb128 0x1
    .sleb128 -4
    .byte   0x8
    .byte   0xc
    .uleb128 0x4
    .uleb128 0x4
    .byte   0x88
    .uleb128 0x1
    .align 4
LECIE0:
LSFDE0:
    .long   LEFDE0-LASFDE0
LASFDE0:
    .secrel32   Lframe0
    .long   LFB7
    .long   LFE7-LFB7
    .byte   0x4
    .long   LCFI0-LFB7
    .byte   0xe
    .uleb128 0x8
    .byte   0x85
    .uleb128 0x2
    .byte   0x4
    .long   LCFI1-LCFI0
    .byte   0xd
    .uleb128 0x5
    .byte   0x4
    .long   LCFI4-LCFI1
    .byte   0xc5
    .byte   0xc
    .uleb128 0x4
    .uleb128 0x4
    .align 4
LEFDE0:
    .section    .eh_frame,"w"
Lframe1:
    .long   LECIE1-LSCIE1
LSCIE1:
    .long   0x0
    .byte   0x1
    .ascii "\0"
    .uleb128 0x1
    .sleb128 -4
    .byte   0x8
    .byte   0xc
    .uleb128 0x4
    .uleb128 0x4
    .byte   0x88
    .uleb128 0x1
    .align 4
LECIE1:
LSFDE3:
    .long   LEFDE3-LASFDE3
LASFDE3:
    .long   LASFDE3-Lframe1
    .long   LFB7
    .long   LFE7-LFB7
    .byte   0x4
    .long   LCFI0-LFB7
    .byte   0xe
    .uleb128 0x8
    .byte   0x85
    .uleb128 0x2
    .byte   0x4
    .long   LCFI1-LCFI0
    .byte   0xd
    .uleb128 0x5
    .byte   0x4
    .long   LCFI4-LCFI1
    .byte   0xc5
    .byte   0xc
    .uleb128 0x4
    .uleb128 0x4
    .align 4
LEFDE3:
    .text
Letext0:
    .section    .debug_loc,"dr"
Ldebug_loc0:
LLST0:
    .long   LFB7-Ltext0
    .long   LCFI0-Ltext0
    .word   0x2
    .byte   0x74
    .sleb128 4
    .long   LCFI0-Ltext0
    .long   LCFI1-Ltext0
    .word   0x2
    .byte   0x74
    .sleb128 8
    .long   LCFI1-Ltext0
    .long   LCFI4-Ltext0
    .word   0x2
    .byte   0x75
    .sleb128 8
    .long   LCFI4-Ltext0
    .long   LFE7-Ltext0
    .word   0x2
    .byte   0x74
    .sleb128 4
    .long   0x0
    .long   0x0
    .section    .debug_info,"dr"
    .long   0x13a
    .word   0x2
    .secrel32   Ldebug_abbrev0
    .byte   0x4
    .uleb128 0x1
    .ascii "GNU C++ 4.5.3\0"
    .byte   0x4
    .ascii "test.cpp\0"
    .ascii "/home/martin\0"
    .long   Ltext0
    .long   Letext0
    .secrel32   Ldebug_line0
    .uleb128 0x2
    .byte   0x4
    .byte   0x7
    .ascii "unsigned int\0"
    .uleb128 0x2
    .byte   0x1
    .byte   0x6
    .ascii "char\0"
    .uleb128 0x2
    .byte   0x1
    .byte   0x6
    .ascii "signed char\0"
    .uleb128 0x2
    .byte   0x1
    .byte   0x8
    .ascii "unsigned char\0"
    .uleb128 0x2
    .byte   0x2
    .byte   0x5
    .ascii "short int\0"
    .uleb128 0x2
    .byte   0x2
    .byte   0x7
    .ascii "short unsigned int\0"
    .uleb128 0x2
    .byte   0x4
    .byte   0x5
    .ascii "int\0"
    .uleb128 0x2
    .byte   0x8
    .byte   0x5
    .ascii "long long int\0"
    .uleb128 0x2
    .byte   0x8
    .byte   0x7
    .ascii "long long unsigned int\0"
    .uleb128 0x2
    .byte   0x4
    .byte   0x5
    .ascii "long int\0"
    .uleb128 0x2
    .byte   0x4
    .byte   0x7
    .ascii "long unsigned int\0"
    .uleb128 0x2
    .byte   0x8
    .byte   0x4
    .ascii "double\0"
    .uleb128 0x2
    .byte   0x4
    .byte   0x4
    .ascii "float\0"
    .uleb128 0x2
    .byte   0xc
    .byte   0x4
    .ascii "long double\0"
    .uleb128 0x3
    .byte   0x1
    .ascii "main\0"
    .byte   0x1
    .byte   0x5
    .long   0x98
    .long   LFB7
    .long   LFE7
    .secrel32   LLST0
    .uleb128 0x4
    .long   LBB2
    .long   LBE2
    .uleb128 0x5
    .ascii "i\0"
    .byte   0x1
    .byte   0x7
    .long   0x98
    .byte   0x2
    .byte   0x74
    .sleb128 60
    .byte   0x0
    .byte   0x0
    .byte   0x0
    .section    .debug_abbrev,"dr"
    .uleb128 0x1
    .uleb128 0x11
    .byte   0x1
    .uleb128 0x25
    .uleb128 0x8
    .uleb128 0x13
    .uleb128 0xb
    .uleb128 0x3
    .uleb128 0x8
    .uleb128 0x1b
    .uleb128 0x8
    .uleb128 0x11
    .uleb128 0x1
    .uleb128 0x12
    .uleb128 0x1
    .uleb128 0x10
    .uleb128 0x6
    .byte   0x0
    .byte   0x0
    .uleb128 0x2
    .uleb128 0x24
    .byte   0x0
    .uleb128 0xb
    .uleb128 0xb
    .uleb128 0x3e
    .uleb128 0xb
    .uleb128 0x3
    .uleb128 0x8
    .byte   0x0
    .byte   0x0
    .uleb128 0x3
    .uleb128 0x2e
    .byte   0x1
    .uleb128 0x3f
    .uleb128 0xc
    .uleb128 0x3
    .uleb128 0x8
    .uleb128 0x3a
    .uleb128 0xb
    .uleb128 0x3b
    .uleb128 0xb
    .uleb128 0x49
    .uleb128 0x13
    .uleb128 0x11
    .uleb128 0x1
    .uleb128 0x12
    .uleb128 0x1
    .uleb128 0x40
    .uleb128 0x6
    .byte   0x0
    .byte   0x0
    .uleb128 0x4
    .uleb128 0xb
    .byte   0x1
    .uleb128 0x11
    .uleb128 0x1
    .uleb128 0x12
    .uleb128 0x1
    .byte   0x0
    .byte   0x0
    .uleb128 0x5
    .uleb128 0x34
    .byte   0x0
    .uleb128 0x3
    .uleb128 0x8
    .uleb128 0x3a
    .uleb128 0xb
    .uleb128 0x3b
    .uleb128 0xb
    .uleb128 0x49
    .uleb128 0x13
    .uleb128 0x2
    .uleb128 0xa
    .byte   0x0
    .byte   0x0
    .byte   0x0
    .section    .debug_pubnames,"dr"
    .long   0x17
    .word   0x2
    .secrel32   Ldebug_info0
    .long   0x13e
    .long   0x10d
    .ascii "main\0"
    .long   0x0
    .section    .debug_pubtypes,"dr"
    .long   0xe
    .word   0x2
    .secrel32   Ldebug_info0
    .long   0x13e
    .long   0x0
    .section    .debug_aranges,"dr"
    .long   0x1c
    .word   0x2
    .secrel32   Ldebug_info0
    .byte   0x4
    .byte   0x0
    .word   0x0
    .word   0x0
    .long   Ltext0
    .long   Letext0-Ltext0
    .long   0x0
    .long   0x0
    .def    _fmod;  .scl    2;  .type   32; .endef
    .def    _printf;    .scl    2;  .type   32; .endef 
```

[**编辑**：注意，总是第一次调用 fmod 会返回奇怪的结果（永远不会是以后的）。正在从右到左评估 fmod 调用。

[**编辑2**：定义一个函数，`double my_fmod(double a, double b) { return fmod(a, b); }`并通过调用使问题消失。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T09:00:19.263

这不是 gcc 或库错误。这只是不精确的浮点表示的结果。

```
i=512;
cout << i << ","  << fmod(i/102.4,1.f) << "," << fmod(i/102.4,1.f) << endl; 
```

的*数学*结果`512/102.4`正好是 5。但`102.4`不能用二进制浮点数精确表示，因此传递给的值`fmod`可能正好是`5.0`，也可能略高于或低于它。

如果除法的结果是 ，`4.99999999`那么`fmod(i/102.4,1.f)`将返回`0.99999999`，它可能会在输出时四舍五入到`1`。

尝试更精确地显示该值。

您需要修改您的代码，以便它允许的值比您预期的要小得多。由于`fmod()`是一个不连续的函数，它可以极大地放大这种差异。

这个程序：

```
#include <iostream>
#include <iomanip>
#include <cmath>
int main(void) {
    int i = 512;
    std::cout << i << "," 
              << std::setprecision(20) << fmod(i/102.4,1.f)
              << "," << fmod(i/102.4,1.f) << std::endl;
    return 0;
} 
```

在我的系统上产生这个输出：

```
512,0,0.99999999999999977796 
```

# ruby-on-rails - 计算大量数据库用户数据的统计信息：优化性能

> ID：11814614
> 
> 赞同：1
> 
> 时间：2012-08-05T07:14:31.380
> 
> 标签：ruby-on-rails, database, performance, postgresql

我有以下情况（在 Rails 3 中）：我的表包含每个用户的金融交易（用户可以买卖产品）。由于发生了大量此类交易，因此我在网站上提供与当前用户相关的统计数据，例如当前余额、总体利润、总体销售/购买的产品数量、平均值等（同样以每月/每年为基础）的整体）。此信息的一部分在许多表单/页面上显示给用户，以便用户始终可以看到他当前的帐户信息（虽然不同的统计信息显示在不同的页面上）。

我的问题是：我怎样才能优化数据库性能（这是否值得）？当然，如果用户只是浏览，那么每次加载新页面时都不需要重新计算所有值，除非对底层数据库进行了更改？

我的第一个解决方案是将这些统计信息存储在他们自己的表中，并在添加/编辑金融交易后更新它们（在 Rails 中可能使用 :after_update ？）。更进一步，例如，如果进行了新交易，那么我可以只修改平均值而不是重新计算整个事情。

我的第二个想法是使用某种缓存（如果可能的话？），或者将这些值存储在会话对象中。

哪种方式是首选/推荐方式，或者所有这些都是浪费时间，因为当前最大的金融交易数量在 7000-9000 的范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:21:08.117

您可能想要研究汇总表，也称为物化视图。

此链接可能会有所帮助：

[http://wiki.postgresql.org/wiki/Materialized_Views](http://wiki.postgresql.org/wiki/Materialized_Views)

# javascript - Jquery 类选择器无法选择使用 .append() 添加的新类实例

> ID：11814615
> 
> 赞同：0
> 
> 时间：2012-08-05T07:14:42.627
> 
> 标签：javascript, jquery, dom, jquery-selectors, jquery-events

我是 Javascript/jQuery 的半新手，所以如果我遗漏了一些基本的东西，请提前道歉。我有一个函数，只要用户输入具有特定类的元素，就会触发该函数。

```
 $('.relevantClass').keyup(function(){
     //code...
     }); 
```

现在这个函数最终可能会根据具体情况创建大量新的 HTML，包括`relevantClass`通过该`.append()`方法的新实例。

```
 var newHTML = <div class='relevantclass'>Content...</div>;
     $('#wrapper').append(newHtml); 
```

但是，当用户键入新创建的`relevantClasses`. 我检查了新创建的 Html，它具有正确的类标签和相关类的旧实例。

我猜这与`.append();`弄乱 DOM 有关，我需要以某种方式“刷新”选择器并让它做 jQuery 的事情来研究 DOM 以找到新的类。关于如何做到这一点的任何想法？有一些我找不到的 jQuery 方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:16:04.833

您必须使用`on()`附加对动态内容起作用的事件：

```
var $parent = $("selector"); //the element you're appending .relevantClass to
$parent.on("keyup",".relevantClass",function(){
    //code...
}); 
```

请记住，要使用动态内容，您必须将事件附加到`relevantClass`页面加载时存在的最近的父级。

有些人使用`body`，但您应该习惯使用尽可能接近动态内容的父元素。这使得事件委托发生在较小的范围内。

更多信息在`on()` [这里](http://api.jquery.com/on)。

另外，我希望该`newhtml`变量用引号引起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:18:54.713

```
$('.relevantClass').on('keyup', function(){
    //code...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T07:24:03.120

尝试类似的东西

```
$('body').on('keyup', '.relevantClass', function() { ... } 
```

这个想法是您使用现有的根元素并将您的类选择器用作过滤器。[请参阅此处](http://api.jquery.com/on/)的示例。

# vb.net - 无法在 VB.NET 中正确写入文件

> ID：11814616
> 
> 赞同：0
> 
> 时间：2012-08-05T07:15:05.427
> 
> 标签：vb.net, file

我正在尝试制作一个程序，将文件的二进制代码写入单独的文本文件中。

当我在文本文件上使用这个程序时，它不会在新文件中写入任何内容。然后我对 .jpg 和 .mp3 文件进行了测试，该程序似乎编写了大部分二进制代码，但忽略了最后几个字节。这是我的代码：

```
Sub Main()
    Console.Write("Filename:  ")
    Dim Filename As String = Console.ReadLine()
    Console.Write("Extension: ")
    Dim Extension As String = Console.ReadLine()
    Console.WriteLine()

    Dim Stream_1 As FileStream = New FileStream(Filename & "." & Extension, FileMode.Open)
    Dim Stream_2 As FileStream = New FileStream(Filename & "_b.txt", FileMode.Create)

    Dim Reader_1 As BinaryReader = New BinaryReader(Stream_1)
    Dim Writer_2 As StreamWriter = New StreamWriter(Stream_2)

    Dim File_Bytes() As Byte = Reader_1.ReadBytes(Convert.ToInt32(Stream_1.Length))

    Dim Binary_String As String = ""

    'These are used to a add line break after every 8 bytes
    Dim Binary_String_Collection As String = ""
    Dim Counter As Integer

    For Each File_Byte In File_Bytes
        Counter += 1

        Binary_String = Convert.ToString(File_Byte, 2)

        For I = 1 To 8 - Binary_String.Length
            Binary_String = "0" & Binary_String
        Next

        Binary_String_Collection = Binary_String_Collection & Binary_String & " "

        If Counter = 8 Then
            Writer_2.WriteLine(Binary_String_Collection)

            Counter = 0
            Binary_String_Collection = ""
        End If
    Next

    If Binary_String_Collection <> "" Then
        Writer_2.WriteLine(Binary_String_Collection)
    End If

    Console.ReadLine()
End Sub 
```

起初我认为我的程序没有正确读取二进制代码，所以我在它写入文件的位置添加了控制台输出。该程序显示正确的输出，所以我很困惑为什么它没有正确写入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:44:42.537

确保关闭文件并正确处理流。

# python - 如何让 django auth 获取用户名和名字相同的值？

> ID：11814619
> 
> 赞同：0
> 
> 时间：2012-08-05T07:15:12.177
> 
> 标签：python, django, authentication, django-authentication

Django auth 有 username 和 first_name 字段。但是用户名具有字段选项 unique=True。这可以防止用户在注册时提供与用户名相同的 first_name 并引发 IntegrityError。如何绕过这个并保持用户名唯一？IE。没有两个用户应该有相同的用户名。但用户名可以与 first_name 相同。并且两个用户可以有相同的名字，姓氏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:00:03.003

你无法做到这一点。如果您想在字段 first_name 和 username 中具有相同的值，并且其中一个不是唯一的，那么另一个也不能是唯一的。

据我了解你在这里做什么，你只想显示 first_name 而不是 username - 来实现这个只是 use`{{ user.first_name }}`而不是 just `{{ user }}`。如果您需要存储有关用户的一些附加信息，您还可以定义[配置文件](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)，您可以在其中实现自己的`__str__`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:39:58.123

您将必须实现用作用`first_name`户名的自定义身份验证后端。

在注册期间，您可以复制或生成您永远不会`username`使用`first_name`的随机用户名，因为您将始终使用它`first_name`。

你将不得不照顾

*   在创建/注册用户时进行创建。
*   用户名（在您的情况下是名字）应该是唯一的

身份验证后端的代码类似于（这只是一个示例代码）：

```
def authenticate(self, username=None, password=None):
    try:
        user = User.objects.get(first_name=username)
        if user.check_password(password):
            return user
    except User.DoesNotExist:
        return None 
```

请参阅[编写身份验证后端](https://docs.djangoproject.com/en/dev/topics/auth/#writing-an-authentication-backend)。

有很多关于如何对用户`email`进行身份验证的示例，您可以参考使用`first_name`.

# android - 在 JNI 中实现以下代码？

> ID：11814624
> 
> 赞同：0
> 
> 时间：2012-08-05T07:16:22.817
> 
> 标签：android, java-native-interface

我可以在 android 中获取与以下 Java 代码相关联的服务名称。

```
//packageToCheck - pass the package name
PackageInfo servicePackage = null;
servicePackage = pm.getPackageInfo(packageToCheck, PackageManager.GET_SERVICES);
ServiceInfo[] sinfo = servicePackage.services;

for(ServiceInfo Servinfo : sinfo){
  System.out.println("Service Name:" + Servinfo.name + "for Package:" + packageToCheck);
} 
```

现在，我正在尝试使用 C 代码在 JNI 中实现。关于如何实现这一点的任何见解或示例代码？谢谢！！！

我的第一次尝试是：jclass cls = (*env)->GetObjectClass(env, obj);

```
__android_log_print(ANDROID_LOG_VERBOSE, APPNAME, "1\n");
jmethodID mid = (*env)->GetMethodID(env, cls, "getPackageManager", "()Landroid/content/pm/PackageManager;");
__android_log_print(ANDROID_LOG_VERBOSE, APPNAME, "2\n");
jobject packageManager = (*env)->CallObjectMethod(env, obj, mid);
__android_log_print(ANDROID_LOG_VERBOSE, APPNAME, "3\n");
// this.getPackageName()
mid = (*env)->GetMethodID(env, cls, "getPackageName", "()Ljava/lang/String;");
__android_log_print(ANDROID_LOG_VERBOSE, APPNAME, "4\n");
jstring packageName = (jstring) (*env)->CallObjectMethod(env, obj, mid);
__android_log_print(ANDROID_LOG_VERBOSE, APPNAME, "5\n"); 
```

输出 "2" 后就挂在 LogCat 中。不知道怎么回事！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:03:59.183

这是一个非常小的示例，您可以查看并运行它。

[https://bitbucket.org/sentimental/jni_poc](https://bitbucket.org/sentimental/jni_poc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:18:29.583

[你可以在这里](http://patriot.net/~tvalesky/jninative.html)查看另一个简单的例子

# windows-phone-7 - 如何检测 Windows 手机上的点击

> ID：11814626
> 
> 赞同：2
> 
> 时间：2012-08-05T07:17:22.120
> 
> 标签：windows-phone-7, tap

我想检测手机（Windows 7 操作系统）上的点击，而不是触摸屏（可能在设备侧面）上的点击。我不确定它是否可以用加速度计数据来实现。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:30:11.797

这取决于应用程序，但也许我们可以将 Tap 视为 Shake。如果是这样看看

[摇动那个 Windows Phone 7 并检测它](http://mark.mymonster.nl/2010/10/24/shake-that-windows-phone-7-and-detect-it/)

[Windows Phone 摇动手势库](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2011/02/22/windows-phone-shake-gestures-library.aspx)

或类似的。有一个*ShakeGestureEventArgs* arg 包含一个 ShakeType 属性，该属性标识摇动手势的方向。

# c# - 如何将日期时间中英文文本中的月份名称转换为 C# 中的阿拉伯文本？

> ID：11814633
> 
> 赞同：4
> 
> 时间：2012-08-05T07:18:31.533
> 
> 标签：c#, datetime

我有一个显示为 2013 年 5 月 12 日的日期。我使用的是“dd MMMM yyyy”格式。我想以阿拉伯语文本显示月份文本，即 May。有什么办法吗？另外，有没有办法在日期时间将英文数字转换为阿拉伯数字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T08:42:33.207

您是否尝试过使用阿拉伯语[CultureInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)？

```
var dateTime = DateTime.Now;
var dateString = dateTime.ToString("dd MMMM yyyy", System.Globalization.CultureInfo.GetCultureInfo("ar")); 
```

*ar*是[ISO 639 的两字母语言代码](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)。您还可以指定亚文化，例如*ar-EG* for *Arabic (Egypt)*。

# c# - 使用传递给jquery ajax的arraylist

> ID：11814636
> 
> 赞同：0
> 
> 时间：2012-08-05T07:18:45.850
> 
> 标签：c#, jquery, asp.net, ajax, c#-4.0

嗨，我有一个 Web 方法，它可以将数据库的数据传递给 jquery ajax 函数，但我不知道它可以将 arraylist 传递给 jquery 并且 jquery 能够识别它或不能识别它，如果答案是好的 **，我如何使用数组列表在 jquery ajax**中。它是我的代码

```
 [WebMethod]
    public ArrayList bringdata()
    {
        SqlConnection con = new SqlConnection("data source=.;database=site;integrated security=true;");
        int cnt;
        string sSQL = "Select username ,average,weight,point , Rank() over(order by point desc) as 'ranking' from karbar order by point desc";
        SqlCommand cmd = new SqlCommand(sSQL, con);

        SqlDataAdapter adapt = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();
        adapt.Fill(ds);
        ArrayList arrlst = new ArrayList();
        foreach (DataRow row in ds.Tables[0].Rows)
        {
            arrlst.Add(row);
        }
        return arrlst;

    } 
```

请在 jquery 代码中帮助我使用arraylist。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:07:26.807

```
<script type = "text/javascript">
function Getdata() {
    PageMethods.bringdata(OnSuccess);
}
function OnSuccess(response) {       
    for (var i in response) {
        alert(response[i]);
    }
} 
</script> 
```

而不是警报，您将编写代码以根据需要在页面上附加数据。

# iphone - 如何放置带角度的文字

> ID：11814641
> 
> 赞同：0
> 
> 时间：2012-08-05T07:19:23.037
> 
> 标签：iphone, objective-c, cocoa-touch

> **可能重复：**
> [如何以一定角度绘制 NSString？](https://stackoverflow.com/questions/930313/how-do-i-draw-an-nsstring-at-an-angle)

我在用

```
[@"mytext" drawInrect : CGRrectIntegral (rect) withFont:font]; 
```

在图片上写文字，我怎样才能每次用不同的角度写文字？（它应该与文本一起旋转的滚动图片）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:24:32.460

下面的代码旋转`label`

```
- (IBAction)rotate:(id)sender {
    CGContextRef context = UIGraphicsGetCurrentContext();
    [UIView beginAnimations:nil context:context];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(endAnimation)];
    CGAffineTransform rotate = CGAffineTransformMakeRotation(90.0f * (M_PI / 180.0f));
    self.label.transform = rotate;

    [UIView commitAnimations];  
} 
```

# java - 重复字符串序列，直到它在java中达到一定长度

> ID：11814647
> 
> 赞同：2
> 
> 时间：2012-08-05T07:20:35.353
> 
> 标签：java, string

我有两个字符串`plainText`和`key`. 现在，如果`plainText.length > key.length`然后我必须重复密钥，直到它的长度与`plainText`. 这是一个例子：

```
plainText = "helloworld"
key="foobar" 
```

因此密钥应增加到“foobarfoob”。

一种解决方案是重复整个单词，然后删除最后一个字符，直到它达到与 plainText 相同的长度，例如 "foobarfoobar" ，然后删除字符 "ar" 。

在java中有没有更好（或者更确切地说是优雅）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T07:23:58.407

除了删除最后一个字符的方式之外，您的解决方案似乎是合理的 - 不要一次执行一个，只需使用 substring 或`StringBuilder.setLength()`：

```
// Make sure we never have to expand...
StringBuilder builder = new StringBuilder(plainText.length() + key.length() - 1);
while (builder.length() < plainText.length()) {
    builder.append(key);
}
builder.setLength(plainText.length());
String result = builder.toString(); 
```

或者只是将附加调用更改为仅获得正确的大小：

```
StringBuilder builder = new StringBuilder(plainText.length());
while (builder.length() < plainText.length()) {
    builder.append(key.substring(0, Math.min(key.length(),
                                        builder.length() - plainText.length()));
}
String result = builder.toString(); 
```

我个人更喜欢第一个 - 它更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:25:20.780

我的建议（诚然不是很容易解释，但紧凑而高效） - 它根据需要多次重复 key + 1 并使用 substring 删除多余的字符：

```
public static void main(String[] args) throws Exception {
    String plainText = "helloworld";
    String key = "foobar";
    int repeat = plainText.length() / key.length();
    int remainder = plainText.length() % key.length();

    String result = new String(new char[repeat + 1]).replaceAll(".", key).substring(0, key.length() * repeat + remainder);
    System.out.println(result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T07:24:53.120

您可以遍历键并在每一步中计算步骤（应该是等于纯文本 => 停止的时间）并将每个步骤的这些字符添加到键中。这是在一个循环中完成的

# c# - 如何将参数值发送到 .cs 文件到实体设计器.cs 文件

> ID：11814654
> 
> 赞同：0
> 
> 时间：2012-08-05T07:23:11.200
> 
> 标签：c#, asp.net, sql-server

在**TaskReportPage.aspx**页面中，我有开始日期、结束日期*、下拉菜单*和一个下载按钮。

代码如下所示：

```
 <fieldset>
    <legend>Enter The Details To Download Report</legend>
    <div class="label">
        Start Date :<asp:TextBox runat="server" ID="txtStartDate" />
    </div>
    <div class="label">
        End Date:
        <asp:TextBox runat="server" ID="txtEndDate"></asp:TextBox>
    </div>
    <div class="label">
        Employee Name:
        <asp:DropDownList ID="DropDownList1" runat="server" AppendDataBoundItems="true" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
            <asp:ListItem Value="AllRecords">All Records</asp:ListItem>
        </asp:DropDownList>
    </div>
    <div>
        <asp:Button ID="btndisplay" runat="server" Text="View Report" OnClick="btndisplay_Click">
        </asp:Button>
        <asp:Button runat="server" ID="Download" align="center" Text="Download" OnClick="Download_Click">
        </asp:Button>
    </div>
    <div class="value">
        <asp:Label ID="lblMessage" runat="server" Visible="false" Style="color: Red"></asp:Label>
    </div>
</fieldset> 
```

在**TaskReportPage.aspx.cs**文件中，我可以从**TaskReportPage.aspx**页面获取值。

在后端我有一个包含这些列的表：

```
Description varchar(500),
CreatedDate datetime,
StatusId int,
UserId int,
Hour int,
Day varchar(10) 
```

我编写了一个用于从数据库中检索值的存储过程，如下所示：

```
ALTER PROCEDURE [dbo].[RetriveDatatable]  
(  
    @StartDate datetime,
    @EndDate datetime,
    @Dropdown varchar(50),
    @ID INT
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here

    SELECT Day, t.CreatedDate, Description, Hour, Firstname
    FROM tbl_TaskType t, tbl_UserDetails u
    WHERE t.CreatedDate BETWEEN '@StartDate' AND '@EndDate'
    AND u.ID=(SELECT ID FROM tbl_UserDetails WHERE FirstName=@Dropdown);
END 
```

**我在Eye1.designer.cs**文件中导入这个存储过程 ：

该文件遵循实体框架程序。

它看起来像：

```
public int RetriveDatatable(Nullable<global::System.Int32> userID, Nullable<global::System.DateTime> startDate, Nullable<global::System.DateTime> endDate, global::System.String dropdown = dropdowntParameter1)
{
    ObjectParameter userIDParameter;
    if (userID.HasValue)
    {
        userIDParameter = new ObjectParameter("UserID", userID);
    }
    else
    {
        userIDParameter = new ObjectParameter("UserID", typeof(global::System.Int32));
    }

    ObjectParameter startDateParameter;
    if (startDate.HasValue)
    {
        startDateParameter = new ObjectParameter("StartDate", startDate);
    }
    else
    {
        startDateParameter = new ObjectParameter("StartDate", typeof(global::System.DateTime));
    }

    ObjectParameter endDateParameter;
    if (endDate.HasValue)
    {
        endDateParameter = new ObjectParameter("EndDate", endDate);
    }
    else
    {
        endDateParameter = new ObjectParameter("EndDate", typeof(global::System.DateTime));
    }

    ObjectParameter dropdowntParameter;
    if (dropdown != null)
    {
        dropdowntParameter = new ObjectParameter("Dropdown", dropdown);
    }
    else
    {
        dropdowntParameter = new ObjectParameter("Dropdown", typeof(global::System.String));
    }

    return base.ExecuteFunction("RetriveDatatable", userIDParameter,startDateParameter, endDateParameter, dropdowntParameter);
} 
```

最后我的问题是我想从 TaskReportPage.aspx.cs 页面发送**startdate** *、enddate 和下拉*参数值到**eye1.disigner.cs**文件页面。然后它将调用 SP，我将数据从数据库获取到**TaskReportPage.aspx.cs**。

 ******请帮帮我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:13:07.407

您不应该在设计器文件中编辑任何代码 - 它仅由 Visual Studio 生成和使用，最终将被覆盖，您将丢失手动更改。请将您添加到设计器文件的所有代码移动到您的 aspx.cs 文件中。******

# python - 基于调用参数从python函数返回多个字典

> ID：11814657
> 
> 赞同：1
> 
> 时间：2012-08-05T07:23:33.347
> 
> 标签：python

我希望我的函数根据调用参数返回多个字典。例如，如果我不带参数调用函数，它应该返回所有字典，否则如果我用参数列表调用它，它应该从函数返回相应的字典。显然，如果我在没有参数或一个参数的情况下调用，它工作正常，但我在使用多个值时遇到问题。以下示例显示了此问题。

```
def mydef(arg1=None):
    a = {'a1':1, 'a2':2}
    b = {'b1':1, 'b2':2}
    c = {'c1':1, 'c2':2}
    d = {'d1':1, 'd2':2}
    if arg1 is None:
        return a,b,c,d
    else:
        for x in arg1:
            if x == 'a':
                return a
            elif x == 'b':
                return b

 w,x,y,z = mydef()
 print type(w)
 print w

 s,t = mydef(['a', 'b'])
 print type(s)
 print s
 print type(t)
 print t 
```

怀疑：返回列表而不是字典：

```
def mydef(args=None):
     dicts = { 'a' :{'a1' : 1, 'a2' :2}, 'b' : {'b1' : 1, 'b2' :2}}
     if args is None:
         args = ['a', 'b']
     return [dicts[d] for d in args]

x,y = mydef()
type(x)
>> type 'dict'

type(y)
>> type 'dict'

x = mydef(['a'])
type(x)
>> type 'list' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T07:29:06.813

一个函数只能返回一次。您不能循环并尝试在循环的每次迭代中返回一些东西；第一个返回并结束函数。如果你想“返回多个值”，你真正要做的就是返回一个包含所有值的值，比如值的列表或值的元组。

此外，最好将您的字典放在字典中（sup dawg），而不是使用局部变量来命名它们。然后你可以用钥匙把它们挑出来。

这是一种返回所选字典列表的方法：

```
>>> def returnDicts(args=None):
...     dicts = {
...         'a': {'a1':1, 'a2':2},
...         'b': {'b1':1, 'b2':2},
...         'c': {'c1':1, 'c2':2},
...         'd': {'d1':1, 'd2':2}
...     }
...     if args is None:
...         args = ['a', 'b', 'c', 'd']
...     return [dicts[d] for d in args]
>>> returnDicts()
[{'a1': 1, 'a2': 2},
 {'b1': 1, 'b2': 2},
 {'c1': 1, 'c2': 2},
 {'d1': 1, 'd2': 2}]
>>> returnDicts(['a'])
[{'a1': 1, 'a2': 2}]
>>> returnDicts(['a', 'b'])
[{'a1': 1, 'a2': 2}, {'b1': 1, 'b2': 2}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:39:14.900

为什么不让他们像这样

```
def mydicts(arg1=None):
    dicter = {'a': {'a1':1, 'a2':2},
              'b': {'b1':1, 'b2':2},
              'c': {'c1':1, 'c2':2},
              'd': {'d1':1, 'd2':2},
              }

    #if arg1 is None return all the dictionaries.
    if arg1 is None:
        arg1 = ['a', 'b', 'c', 'd']

    # Check if arg1 is a list and if not make it one 
    # Example you pass it a str or int

    if not isinstance(arg1, list):
        arg1 = [arg1]

    return [dicter.get(x, {}) for x in arg1] 
```

请注意，这还将返回一个项目列表给您。

# mysql - Mysql查询两表join与引用表

> ID：11814669
> 
> 赞同：1
> 
> 时间：2012-08-05T07:24:45.983
> 
> 标签：mysql, sql, join, correlated-subquery

嗨，我有两张这样的桌子：

表格1：

```
name | distro1 | distro2 | distro3
----------------------------------
foo  | 001     | 002     | 003 
```

表 2：

```
id  | distro 
---------------
001 | slackware
002 | redhat
003 | debian 
```

我想得到这样的选择结果=

```
name | dis1      | dis2   | dis3
----------------------------------
foo  | slackware | redhat | debian 
```

创建这些源表所需的查询。

```
CREATE TABLE IF NOT EXISTS `table1` (
  `name` varchar(30) NOT NULL,
  `distro1` varchar(30) NOT NULL,
  `distro2` varchar(30) NOT NULL,
  `distro3` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `table1` (`name`, `distro1`, `distro2`, `distro3`) VALUES
('foo', '001', '002', '003');

CREATE TABLE IF NOT EXISTS `table2` (
  `id` varchar(30) NOT NULL,
  `distro` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `table2` (`id`, `distro`) VALUES
('001', 'slackware'),
('002', 'readhat'),
('003', 'debian'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:36:54.290

你可以有这样的东西：

通过使用`INNeR JOIN`，假设所有发行版都有值并且在`table 2`

```
SELECT  a.Name, 
        b.distro Distro1, 
        c.distro Distro2, 
        d.distro Distro3
FROM    myTableA a
            INNER JOIN myTableB b
                on a.distro1 = b.id
            INNER JOIN myTableB c
                on a.distro2 = c.id
            INNER JOIN myTableB d
                on a.distro3 = d.id 
```

**更新 1**

```
SELECT  a.Name, 
        b.distro Distro1, 
        c.distro Distro2, 
        d.distro Distro3
FROM    myTableA a
            LEFT JOIN myTableB b
                on a.distro1 = b.id
            LEFT JOIN myTableB c
                on a.distro2 = c.id
            LEFT JOIN myTableB d
                on a.distro3 = d.id 
```

# c# - C#项目更新MySQL从两个表中选择的行列表

> ID：11814670
> 
> 赞同：1
> 
> 时间：2012-08-05T07:24:48.723
> 
> 标签：c#, .net, mysql

我有一个更新 Magento 商店*priselist*的项目。我有我想要更新的项目列表，我想用一个 MySQL 查询来完成它（通过思考，它更有效）。priselist*包括*sku 和价格。

我有这两张桌子。从***表 1***中，我使用***sku***更新***表 2***中的***值***，即当***entity_id***在两个表中相等且attribute_id 为“64”时商品的价格。

表格1

```
product_entity

entity_id  |  sku
        1  |   p1   
        2  |   p2
        3  |   p3 
```

表 2

```
product_entity_decimal

entity_id  |  attribute_id  |  value   |
        1  |            64  |      5   |
        1  |            65  |   NULL   |
        1  |            66  |   NULL   |
        2  |            64  |      7   |
        2  |            65  |   NULL   |
        2  |            66  |   NULL   |
        3  |            64  |      1   |
        3  |            65  |   NULL   |
        3  |            66  |   NULL   | 
```

那么，如何通过一个查询将 p1 奖品更新为 6，将 p3 奖品更新为 2。

我尝试了这个查询，但它没有用......

```
UPDATE product_entity, product_entity_decimal SET product_entity_decimal.value =
CASE 
    WHEN product_entity.entity_id = product_entity_decimal.entity_id AND product_entity_decimal.attribute_id =  '64' AND product_entity.sku =  'p1' THEN '6'
    WHEN product_entity.entity_id = product_entity_decimal.entity_id AND product_entity_decimal.attribute_id =  '64' AND product_entity.sku =  'p1' THEN '2'
    ELSE value
END 
```

对于我的项目，我通过使用 MySql.Data.MySqlClient 将 C# 与 .Net 和 MySQL 5.x 一起使用。如果有请分享它，也许有更好的方法来更新 MySQL 数据库中 3000 项的列表。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:26:28.153

您可以使用`JOIN`inside `UPDATE`：

```
UPDATE product_entity_decimal a
JOIN   product_entity b ON a.entity_id = b.entity_id AND b.sku IN ('p1', 'p3')
SET    a.value = CASE b.sku WHEN 'p1' THEN 6 WHEN 'p2' THEN 2 END
WHERE  a.attribute_id = 64 
```

* * *

如果您有要更新的 3000 个项目的列表，也许最好的方法是遍历一个数组并在`UPDATE`每次迭代时执行一个。这些更新将包含在事务中，例如以下伪代码：

```
// START TRANSACTION

// For Each Value in array
    // Execute UPDATE statement

// COMMIT 
```

# z3 - 使用 z3 消除表达式中的“not”

> ID：11814672
> 
> 赞同：1
> 
> 时间：2012-08-05T07:24:56.130
> 
> 标签：z3

我尝试使用脚本[http://rise4fun.com/Z3/XwGt](http://rise4fun.com/Z3/XwGt)消除表达式中的“not”但是，它不起作用，结果仍然没有，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:32:29.090

您示例中的输出目标采用简化公式。任何目标都没有多余的断言。Z3 简化形式总是使用非严格不等式，例如`t1 <= t2`和`t1 >= t2`。严格的不等式，例如`t1 < 0`使用否定编码。也就是说，`t1 < 0`被编码为`not t1 >= 0`。这个想法是减少用于编码大公式的原子数量。

了解为什么需要消除`not`输出中的 s 会很有用。如果有一个有用的应用程序，我们将包括一个执行转换的新策略（在下一个版本中）。

# php - 第一次使用 pChart

> ID：11814674
> 
> 赞同：0
> 
> 时间：2012-08-05T07:25:15.940
> 
> 标签：php, header, include, pchart

我很尴尬，但我似乎无法创建一个由[http://phpmaster.com/charting-with-pchart](http://phpmaster.com/charting-with-pchart)创作的非常简单的 php 图表来工作。

我验证了以下几点：我的 Apache 服务器正在运行 PHP5，启用了 GD 和 Free Type 支持，并且我的目录路径良好（即 is_file 已确认，所有文件都已上传）。

这是简单的代码：

```
 <?php
 session_start();   
 require_once('library/class/pData_class.php');     
 require_once('library/class/pChart_class.php');

 $myDataset = array(0, 1, 2, 3, 4, 5, 7, 9);
 $myData = new pData();
 $myData->addPoints($myDataset);
 $myImage = new pImage(500, 300, $myData);

 $myImage->setFontProperties(array("FontName" => PCHART_PATH . "library/fonts/GeosansLight.ttf", "FontSize" => 15));
 $myImage->setGraphArea(25, 25, 475, 275);
 $myImage->drawScale();
 $myImage->drawBarChart();
 header("Content-Type: image/png");
 $myImage->Render(null);
 ?> 
```

我尝试了一些变体，但对我来说，上面的代码看起来很合理。我没主意了。我真的很感激任何帮助。

谢谢，

DM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:23:37.883

我终于弄清楚发生了什么。首先，我使用的是比简单示例中使用的更新的 pChart 库，因此某些语法不兼容。

其次，由于我从 Ajax 函数调用我的 php 页面，我必须将图表呈现为图像文件 .png，然后在 HTML 标记中回显它。此外，我必须在 .png 文件呈现后取消链接，因为我需要动态创建这些图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T15:44:18.963

```
 <?php
    session_start();
    require_once "/class/pDraw.class.php";
    require_once "/class/pImage.class.php";
    require_once "/class/pData.class.php";

    $myDataset = array($one, $two, $three, $four, $five);

    $myData = new pData(); 
    $myData->addPoints($myDataset);

    $myImage = new pImage(500, 300, $myData);

    $myImage->setFontProperties(array(
                "FontName" => "/fonts/GeosansLight.ttf",
                "FontSize" => 15));

    $myImage->setGraphArea(25,25, 475,275);
    $myImage->drawScale();
    $myImage->drawBarChart();

    //header("");
    $myImage->Render("image.png");

    echo '<p><img src="yourpath/image.png"></p>';
    ?> 
```

# list - `::` 和 `+:` 用于添加到列表中有什么区别）？

> ID：11814675
> 
> 赞同：48
> 
> 时间：2012-08-05T07:25:16.387
> 
> 标签：list, scala, operators, prepend, cons

`List`有 2 种方法指定将元素添加到（不可变）列表中：

*   `+:`（实施`Seq.+:`），和
*   `::`（仅在 中定义`List`）

`+:`技术上具有更通用的类型签名——</p>

```
def +:[B >: A, That](elem: B)(implicit bf: CanBuildFrom[List[A], B, That]): That
def ::[B >: A](x: B): List[B] 
```

——但忽略隐含的，根据文档消息只需要`That`be `List[B]`，签名是等价的。

**`List.+:`和 和有什么不一样`List.::`？**如果它们实际上是相同的，我认为`+:`最好避免取决于具体的实现`List`。但是为什么要定义另一个公共方法，客户端代码什么时候会调用它呢？

### 编辑

还有一个用于`::`模式匹配的提取器，但我想知道这些特定的方法。

另请参阅：[Scala 列表连接，::: vs ++](https://stackoverflow.com/questions/6559996/scala-list-concatenation-vs)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-05T07:40:57.463

确定两种方法之间差异的最佳方法是查看源代码。

[来源](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/List.scala#L97)`::`：_ _

```
def ::[B >: A] (x: B): List[B] =
  new scala.collection.immutable.::(x, this) 
```

[来源](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/List.scala#L175)`+:`：_ _

```
override def +:[B >: A, That](elem: B)(implicit bf: CanBuildFrom[List[A], B, That]): That = bf match {
  case _: List.GenericCanBuildFrom[_] => (elem :: this).asInstanceOf[That]
  case _ => super.+:(elem)(bf)
} 
```

如您所见，对于`List`，这两种方法都是一样的（编译器将选择[List.canBuildFrom](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/List.scala#L459)作为`CanBuildFrom`参数）。

那么，使用哪种方法呢？通常人们会选择接口（`+:`）而不是实现（`::`），但是因为`List`它是函数式语言中的一种通用数据结构，它有自己的被广泛使用的方法。许多算法都是按照工作方式构建的`List`。例如，您会发现很多方法将单个元素添加到`List`或调用方便的`head`or`tail`方法，因为所有这些操作都是`O(1)`. 因此，如果您在本地使用 a `List`（在单个方法或类内部），则选择`List`-specific 方法没有问题。但是如果你想类之间进行通信，即你想写一些接口，你应该选择更通用的`Seq`接口。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-05T07:43:57.983

`+:`更通用，因为它允许结果类型与调用它的对象的类型不同。例如：

```
scala> Range(1,4).+:(0)
res7: scala.collection.immutable.IndexedSeq[Int] = Vector(0, 1, 2, 3) 
```

# extjs4 - 向选项卡面板添加滚动条

> ID：11814678
> 
> 赞同：0
> 
> 时间：2012-08-05T07:25:46.273
> 
> 标签：extjs4, extjs4.1

如何将`Scroll Bar`（垂直和水平）添加到`Pabpanel`. 当`Browser`宽度/高度小于`tabpanel`我需要显示它时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T01:46:16.847

要将滚动条添加到 tabpanel，您需要为 tabpanel 指定 minWidth 和 minHeight，然后将 tabpanel 放置在 autoScroll 设置为 true 的容器中。根据您使用的 Ext JS 版本，可能需要设置其他布局设置（例如 4.1.1 中的 shrinkWrap）。

为了美观，您最好在 tabpanel 内滚动面板而不是 tabpanel 本身，但这取决于您。

# php - 未捕获的类型错误：对象 [对象对象] 没有方法 'facebookTrafficPop'

> ID：11814679
> 
> 赞同：0
> 
> 时间：2012-08-05T07:26:00.170
> 
> 标签：php, jquery, object

我有一个正在加载的 jQuery 脚本，但是当我通过 PHP 加载时，我收到了这个错误：

```
Uncaught TypeError: Object [object Object] has no method 'facebookTrafficPop' 
```

当我通过 Chrome Developer consule 查看时，我可以看到它抱怨的那一行：

```
jQuery().facebookTrafficPop({ 
```

这是我在 PHP 中的代码：

```
<script type="text/javascript">
jQuery(document).ready(function(){
 jQuery().facebookTrafficPop({
        title: '<?php echo $params->get('title', 'Facebook Like Us Popup'); ?>',
        message: '<?php echo $params->get('message', ''); ?>',
        url: '<?php echo $params->get('url', $url); ?>',
        showfaces: <?php echo $params->get('showfaces', '1'); ?>,
        timeout: '<?php echo $params->get('timeout', '60'); ?>',
        delay: '<?php echo $params->get('delay', '0'); ?>',
        closeable: <?php echo $params->get('closeable', '1'); ?>,
        advancedClose: <?php echo $params->get('advancedClose', '1'); ?>,
        wait: '<?php echo $params->get('wait', '0'); ?>',
        //lang: '<?php echo $params->get('lang', 'en'); ?>',
        lang: '<?php echo $lang->getTag(); ?>',
        opacity: '<?php echo $params->get('opacity', '25'); ?>'
    });
});
</script> 
```

这就是我在 chrome 中看到的：

```
<script type="text/javascript">
//<script type="text/javascript" language="javascript">
//  jQuery.noConflict();
jQuery(document).ready(function(){
    jQuery().facebookTrafficPop({
**Uncaught TypeError: Object [object Object] has no method 'facebookTrafficPop'**
        title: 'Facebook Like Us Popup',
        message: '',
        url: 'https://www.facebook.com/Arab.Dentist.Network',
        showfaces: 1,
        timeout: '60',
        delay: '0',
        closeable: 0,
        advancedClose: 0,
        wait: '0',
        //lang: 'en',
        lang: 'en-GB',
        opacity: '25'
    });
});
</script> 
```

如果您能帮助解决这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:30:51.493

尝试`()`从导致错误的行中删除：

```
jQuery.facebookTrafficPop({ 
```

编辑：您可能必须在括号内输入选择器

# objective-c - 为什么我的 UIButton 的 selected 属性设置不正确？

> ID：11814688
> 
> 赞同：1
> 
> 时间：2012-08-05T07:28:05.167
> 
> 标签：objective-c, ios

我真的无语了：

```
DDLogVerbose(@"%@", ([SO2Settings settings].drawMode & SO2DrawModeEraser) ? @"YES" : @"NO");
kMenu.eraserButton.selected = ([SO2Settings settings].drawMode & SO2DrawModeEraser);
DDLogVerbose(@"%@", kMenu.eraserButton);
DDLogVerbose(@"%@", kMenu.eraserButton.selected ? @"YES" : @"NO"); 
```

产生这个输出

> 详细 2012-08-05 16:21:05.391 | 是
> 详细 2012-08-05 16:21:05.391 | < UIButton: 0x6cfa380; 帧 = (187 10; 59 59); 不透明=否；标签 = 3; 层 = < CALayer: 0x6c37cc0>>
> 详细 2012-08-05 16:21:05.391 | 不

显然，`selected` *应该*是的值`YES`，但它是`NO`......这里发生了什么？

**奇怪的更新**：下面的代码产生了一个非常令人不安的结果：

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeContactAdd];
btn.selected = 8;
btn.enabled = 8;
NSLog(@"Button is selected : %@, Button is enabled : %@", btn.selected ? @"YES" : @"NO", btn.enabled ? @"YES" : @"NO"); 
```

> 选择按钮：否，启用按钮：是

**最后更新**：忘记 C 标准的东西，因为`BOOL`它实际上是一个`signed char`. 但是，我想我知道启用有效但选择无效的原因。在标头中，似乎`UIControl`使用了一个位域，该位域具有以下区域`selected`（这是一个 1 位域）。如果它是奇数，它可以正常工作，但偶数则不能。所以插入时数字*必须*为0或1。 `enabled`是一个实际`BOOL`属性，可能存储为 a`signed char`而不是 1 位字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:52:25.657

这不是为按钮分配布尔值 YES 或 NO：

```
kMenu.eraserButton.selected = ([SO2Settings settings].drawMode & SO2DrawModeEraser); 
```

您正在将按位运算的结果分配给按钮。因此， ([SO2Settings settings].drawMode & SO2DrawModeEraser) 是零值或非零值。对于零值，它将作为布尔值 NO 也为 0。但对于不等于 1 的非零值，它与布尔值 YES（等于 1）不同。测试会给出一个布尔结果，但赋值是不同的。

例如：

```
int x = 2;
BOOL y;
...
if(x == 2)
    y = YES; 
```

不一样

```
y = x;    /* x is 2 */ 
```

您应该使用以下行来检查非零结果（非布尔值）并将布尔值 YES 返回到按钮。

```
kMenu.eraserButton.selected = ([SO2Settings settings].drawMode & SO2DrawModeEraser)? YES : NO; 
```

或者你的意思是使用这个：

```
kMenu.eraserButton.selected = ([SO2Settings settings].drawMode && SO2DrawModeEraser); 
```

注意逻辑与而不是按位与的“&&”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:39:48.087

这可能是愚蠢的，但我会说它只是为了确定：在第一行中，您不只是检查对象是否已初始化吗？

```
NSString *st = [NSString stringWithFormat:@"something"];
NSLog(@"%@",st ? @"YES":@"NO"); 
```

...仍会打印`YES`，但这并不意味着它的值为 YES。
只是检查。

# java - 使用 Java 在控制台中显示动态输出

> ID：11814697
> 
> 赞同：1
> 
> 时间：2012-08-05T07:29:45.337
> 
> 标签：java, scripting, console-application

使用时`curl`，我注意到它会输出到终端文本，以后可以替换和更新。这个“动态”文本输出是我想做的。

具体来说：

类似的执行：*在终端中*`curl http://raw.github.com/someGZippedPackage | gunzip` 显示完成百分比和完成栏。

 *是否有提供此功能的库？

我可以使用任何面向对象的编程语言。

最好为 Java 或 Node.js 构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:16:36.083

您可能可以使用 javacurses 库一起破解一些东西，这里可用。[http://sourceforge.net/projects/javacurses/](http://sourceforge.net/projects/javacurses/)

如果您以前没有使用过 curses，它可以用来提供一个类似于您在 BIOS 菜单中看到的界面。它是编程菜单驱动文本界面的标准方法，也适用于其他应用程序。

尽管实际上是为 c 库编写的，但这是使用 curses 编程的可靠介绍。[http://invisible-island.net/ncurses/ncurses-intro.html](http://invisible-island.net/ncurses/ncurses-intro.html)

基本上用 移动“光标”`move`并用 添加字符`addch`，然后刷新屏幕。

神速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T18:59:52.937

这称为**进度条**，可以通过使用退格符和回车符生成，无需诅咒。

[这使您的问题与 Java 中的命令行进度条](https://stackoverflow.com/questions/852665/command-line-progress-bar-in-java)重复*

# android - 用手机间隙锁定 Iphone 屏幕

> ID：11814698
> 
> 赞同：0
> 
> 时间：2012-08-05T07:29:49.067
> 
> 标签：android, ios, html, cordova

我想知道当用户转动他的 iphone/android 设备时，手机间隙是否允许您将屏幕锁定到一个位置而不改变其分辨率？

我正在开发一个基于 HTML/JS 的应用程序，并且不想在用户将手机左右转动时再次构建我的 UI

只是为了弄清楚 - 我正在使用 HTML/JS/Jquery 在设备浏览器中工作

可能吗？

ps我的意图是在portarit位置展示应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:14:28.393

在具有活动列表的清单文件上，您应该在活动节点上添加：

```
<activity android:screenOrientation="portrait" ...../> 
```

或者

```
<activity android:screenOrientation="landscape" ...../> 
```

取决于你需要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:22:33.937

您可以在 iPhone 的 xcode 中设置应用程序的方向：

![在此处输入图像描述](../Images/f14b71d06b756495bc067cb8fabaf59b.png)

或在您的 android 清单文件中：

```
<activity android:screenOrientation="portrait" .../> 
```

或者

```
<activity android:screenOrientation="landscape" .../> 
```

# dependency-injection - 在依赖注入中什么是依赖？

> ID：11814700
> 
> 赞同：3
> 
> 时间：2012-08-05T07:30:28.460
> 
> 标签：dependency-injection

我读了很多关于此的内容，但我仍然不清楚这些事情。我们说 DI 就是在运行时将依赖注入依赖组件

**第一季度**

> 什么是依赖？如果这些是在运行时创建的对象？

如果是，这是否意味着我们通过创建对象将值注入变量（由框架创建，即通过 xml 文件使用 setter/constructor 注入实例化 bean）

**第二季度**

> 我们做 DI 是为了在没有对象干预的情况下做工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:57:53.953

## 第一季度

从[Wikipedia](http://en.wikipedia.org/wiki/Dependency_injection)中，DI 模式中的所有元素都是对象。*依赖*对象使用接口指定它需要什么。*注入器*对象决定哪些具体类（实例化对象）可以满足需求并将它们提供给依赖对象。

所以，这对第二部分来说*是肯定的。*

## 第二季度

再次来自[维基百科](http://en.wikipedia.org/wiki/Dependency_injection)：

> 依赖注入模式的主要目的是允许在运行时或通过配置文件而不是在编译时选择给定依赖接口的多个实现。

作为一个例子，考虑一个安全服务，它可以工作于不同的`Encoder`. 不同的编码算法可能包括 SHA、MD5 等。安全服务只指定它需要一个“编码算法”的实例。然后，运行时 DI 环境将寻找提供接口的对象，`Encoder`然后将其注入安全服务。与 DI 一致，安全服务也利用了[控制反转 (IoC)](http://en.wikipedia.org/wiki/Inversion_of_control)；即，它本身并不*决定*使用什么实现，而是由 DI 运行时做出决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T07:58:17.833

不是一个复杂的答案，让它变得更简单。

问题1：

```
class Dependent {
  propertyA = new PropertyA();
  propertyB = new PropertyB();
} 
```

这里`Dependent`依赖于`propertyA`和`propertyB`。上面的关系是依赖的一个例子。

如果这些是在运行时创建的对象？是的。

如是....？是的

问题2：是的。

* * *

**详情如下**

场景一：

```
class Dependent {
  DBConnection connection = new OracleConnection();
} 
```

`Dependent`类是高度耦合的。因为除非我们更改代码，否则无法更改连接。因此，如果客户需要 MySQLConnection()，我们将不得不更改代码并给他们另一个 exe/jar。

* * *

场景二：

```
class Dependent {
  DBConnection connection = ConnectionFactory.createConnection();
} 
```

这要好得多，因为`ConnectionFactory`将能够读取一些配置并创建必要`connection`的 .

但是，它仍然对模拟`Dependent`课程提出了一些困难。在这些情况下很难创建模拟。然后呢？

* * *

场景 3：

```
class Dependent {
  DBConnection connection;

  setConnection(DBConnection connection) {
    this.connecttion = connection;
  }
}

class DependencyInjector {
  inject() {
    // wire them together every dependent & their dependency!
    Dependent dependent = indentiyDepenentSomeSmartWay();
    DBConnection connection = indentiyConnectionSomeSmartWay();
    dependent.setConnection(connection);
  }
} 
```

我们`DependencyInjector`是一个聪明的班级，知道所有必要的信息！以上`Dependent`课程干净简单。很容易模拟它们进行单元测试，使用配置进行配置。

那些对象创建和耦合是分离的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:06:44.270

用简单的话回答你的问题，

**对于＃1：** 依赖注入是通过给它所需的对象来满足一个对象的需求。让我们看一个例子：

通常在企业应用程序中，我们使用的架构在服务中调用 DAO 层，DAO 完成所有与数据库相关的工作。所以服务需要和DAO的对象调用所有的DAO方法。

考虑到我们有一个实体对象 - **Person**。

假设我们有一个 DAO - PersonDAO。

```
public interface PersonDAO {
    void addPerson(Person person);
    void updatePerson(Person person);
    void deletePerson(int personId);
} 
```

和一个服务——PersonService。

```
public class PersonServiceImpl {
    private PersonDAO personDAO;

    public void addPerson() {
        //some code specific to service.
        //some code to create Person obj.
        personDAO.add(person);
    }
} 
```

如您所见，PersonService 正在使用 PersonDAO 对象来调用其方法。PersonService 依赖于 PersonDAO。所以 PersonDAO 是依赖，而 PersonService 是依赖对象。

通常在像 Spring 这样的框架中，这些依赖项是由框架本身注入的。加载应用程序上下文时，所有这些依赖对象都被创建并放入容器中，并在需要时使用它们。由于依赖对象的创建方式，控制反转（IoC）的概念与依赖注入密切相关。

例如，您可以在 PersonService 本身中将 PersonDAO 对象创建为 PersonDAO personDAO = new PersonDAOImpl();

但是在 spring 的情况下，您只是在 PersonService 中为 PersonDAO 定义一个属性，并为它提供一个 setter，spring 使用它来设置依赖项。这里依赖的创建由框架而不是使用它的类负责，因此它被称为控制反转。

**对于#2**：是的。你说的对。

# symbolicatecrash - symbolicatecrash 找不到 .dSYM

> ID：11814705
> 
> 赞同：7
> 
> 时间：2012-08-05T07:31:53.423
> 
> 标签：symbolicatecrash

嗨，当我使用 .dSYM 文件和崩溃文件运行 symbolicatecrash 脚本时，它无法符号化崩溃文件。这是我得到的；

```
S Version 5.1 Build 11E53
12 binary images remain after pruning:
Foundation, libsystem_notify.dylib, GraphicsServices, UIKit, shell, WebCore, libc++abi.dylib, libobjc.A.dylib, libdispatch.dylib, libsystem_c.dylib, CoreFoundation, libsystem_kernel.dylib, 
($osVersion, $osBuild) = (5.1, 11E53)
$versionPattern = {5.1 (11E53),5.1,11E53}
Symbol directory paths:  
Finding Symbols:
.fetching symbol file for Foundation--[undef] 
Searching []...-- NO MATCH
Searching in Spotlight for dsym with UUID of 9ac539ad20833d948fcfaaaa62325704
Running mdfind "com_apple_xcode_dsym_uuids == 9AC539AD-2083-3D94-8FCF-AAAA62325704"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Foundation

..fetching symbol file for libsystem_notify.dylib--[undef] 
Searching []...-- NO MATCH
Searching in Spotlight for dsym with UUID of 47db9e1ba7d13818a747382b2c5d9e1b
Running mdfind "com_apple_xcode_dsym_uuids == 47DB9E1B-A7D1-3818-A747-382B2C5D9E1B"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /usr/lib/system/libsystem_notify.dylib

...fetching symbol file for GraphicsServices--[undef] 
Searching []...-- NO MATCH
Searching in Spotlight for dsym with UUID of 9c4c679839b93a8485bcb4f73a54288b
Running mdfind "com_apple_xcode_dsym_uuids == 9C4C6798-39B9-3A84-85BC-B4F73A54288B"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices

....fetching symbol file for UIKit--[undef] 
Searching []...-- NO MATCH
Searching in Spotlight for dsym with UUID of 481f9a9d400d3436a84595c8744a8ecc
Running mdfind "com_apple_xcode_dsym_uuids == 481F9A9D-400D-3436-A845-95C8744A8ECC"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/UIKit.framework/UIKit

.....fetching symbol file for shell--[undef] 
Searching []...-- NO MATCH
Searching in Spotlight for dsym with UUID of a12962a4ed843d9c9ac53a035a497426
Running mdfind "com_apple_xcode_dsym_uuids == A12962A4-ED84-3D9C-9AC5-3A035A497426"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /Users/ilker/Library/Application Support/iPhone Simulator/5.1/Applications/2ABA6362-F4C4-4ED2-8B31-E17576D8124E/shell.app/shell 
```

.dSYM 和 .app 位于同一目录中。我错过了什么吗？

命令行命令：./symbolicatecrash -v app.crash shell.app.dSYM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-02T21:21:24.670

通常，.dSym 是一个包，这是不正确的使用。`dSym`而不是，我们应该在该包中使用真实文件：`shell.app.dSYM/Contents/Resources/DWARF`有另一个文件没有`.dSYM`（在你的情况下是`shell`）

# jquery - 如果单击太快，jQuery 滚动按钮将停止工作

> ID：11814712
> 
> 赞同：0
> 
> 时间：2012-08-05T07:33:07.493
> 
> 标签：jquery

[http://vc4hp.net/temp/4/test.htm](http://vc4hp.net/temp/4/test.htm)

如果您快速单击“向左滚动”，您应该能够连续单击它至少几次。

然后您需要多次单击“向右滚动”，但它最终会起作用。

然后下一次“向左滚动”似乎再也无法工作了......

（顺便说一句，我似乎无法让它在 jsfiddle 中工作：http: [//jsfiddle.net/3Dmya/](http://jsfiddle.net/3Dmya/)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:42:02.467

我的解决方案防止动画上的双重触发，它只绑定到应该能够触发的按钮，并在单击后立即取消绑定：

```
var scrolltime = 1000;

var scroll_left = function(e) {
  $('#scroll_left').unbind('click');
  $('#scroll_right').click(scroll_right);
  $('#left_content').animate({
    left: '-50%'
  }, scrolltime, function() {
    // Animation complete.
  });
  $('#right_content').animate({
    left: '50%'
  }, scrolltime, function() {
    // Animation complete.
  });
}

var scroll_right = function(e) { 
  $('#scroll_right').unbind('click');
  $('#scroll_left').click(scroll_left);
  $('#left_content').animate({
    left: '50%'
  }, scrolltime, function() {
    // Animation complete.
  });
  $('#right_content').animate({
    left: '150%'
  }, scrolltime, function() {
    // Animation complete.
  });
}

$(document).ready(function(){    
    $('#scroll_left').click(scroll_left);
    //$('#scroll_right').click(scroll_right);
});
​ 
```

小提琴：http: [//jsfiddle.net/3Dmya/3/](http://jsfiddle.net/3Dmya/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:42:06.160

[http://jsfiddle.net/3Dmya/4/](http://jsfiddle.net/3Dmya/4/)

调用`$.stop()`似乎对我有用，但我很难可靠地重现该错误。

`stop`将第一个参数设置为 true 会清除当前动画队列，因此当重复单击按钮时，只会执行一个绑定的动画事件。

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

```
var scrolltime = 3000;

$('#scroll_left').click(function(e) {
    $('#left_content').stop(true).animate({
        left: '-50%'
    }, scrolltime, function() {
        // Animation complete.
    });
    $('#right_content').stop(true).animate({
        left: '50%'
    }, scrolltime, function() {
        // Animation complete.
    });
});

$('#scroll_right').click(function(e) {
    $('#left_content').stop(true).animate({
        left: '50%'
    }, scrolltime, function() {
        // Animation complete.
    });
    $('#right_content').stop(true).animate({
        left: '150%'
    }, scrolltime, function() {
        // Animation complete.
    });
}); 
```

# javascript - 如何在 Ember.js 中使用 jQuery 通过 id 获取元素？

> ID：11814717
> 
> 赞同：1
> 
> 时间：2012-08-05T07:35:24.823
> 
> 标签：javascript, jquery, ember.js

如何以如下方式获取按钮的操作：

```
<script type="text/x-handlebars">
    {{#view Ember.Button target="Welcome.booksController" action="loadBooks" id="butt_logger"}}
        Load Books
    {{/view}}
</script> 
```

在 .js 文件中

```
$(document).ready( function () {
    $('button#butt_logger').click(function(){
        console.log("Button was Clicked");
    });
}); 
```

或者

```
Welcome.booksController = Ember.ArrayController.create({
content: [],
loadBooks: function(){
    console.log("Button was Clicked");
            //any script
    }
}); 
```

他们两个都不起作用（（我需要建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T12:26:30.657

正如您在[Ember.Button 源代码](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/button.js#L113)中看到的：

```
Ember.deprecate("Ember.Button is deprecated and will be removed from future releases.
Consider using the {{action}} helper."); 
```

使用 {{action}} 帮助器，您的模板将如下所示：

```
<script type="text/x-handlebars">
  <button {{action loadBooks target="Welcome.booksController" }} id="butt_logger">Load books</button>
</script> 
```

# php - 如何使用 php gd 对照片应用饱和度

> ID：11814725
> 
> 赞同：-1
> 
> 时间：2012-08-05T07:37:00.847
> 
> 标签：php, image-processing, hsl, php-gd, bgr

我想使用 php gd 对照片应用饱和度，但我只知道进行图像编辑。我需要：

1.  将 BGR 更改为 HSL
2.  做一些我不知道的事情。
3.  将结果从 HSL 更改回 BG​​R。

有人知道第 2 步的逻辑/算法是什么吗？还有其他更好的方法可以在 php 中对照片应用饱和度吗？

编辑：我所说的“应用饱和度”是指操纵/更改照片的饱和度，就像在大多数图像编辑工具（如 ipiccy.com）中所做的那样，以及在 Microsoft Office 2010 中编辑照片功能，您可以在其中更改滑块的值，然后照片的饱和度会改变。我想在 php 中编写代码来改变照片的饱和度，但我不知道如何开始。任何人都可以建议？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:28:06.917

如果您正在寻找任何转换，您可以简单地将一条简单的曲线应用于您的饱和度通道。而且由于您应用的转换并不重要，您可以使用简单的 x^0.5 曲线。

查看此[维基百科条目](http://en.wikipedia.org/wiki/Curve_%28tonality%29)以获取有关曲线的更多信息。

如果你想知道如何实现 ax^0.5 曲线，这里就是。将饱和度视为 0 到 255 之间的一个字节：

```
Satu[x, y] = (int)(sqrt(Satu[x, y] / 255.0) * 255.0); 
```

# opencv - 具有固定背景的 OpenCV / EmguCV 中的背景减法

> ID：11814726
> 
> 赞同：0
> 
> 时间：2012-08-05T07:37:09.340
> 
> 标签：opencv, emgucv

我需要一些用于固定背景的背景减法算法的示例/源代码。我使用的背景是固定颜色的背景，不幸的是，到目前为止我看到的所有示例都适用于动态背景。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:15:59.827

请记住，减法技术会给您带来很多噪音。为了避免这种情况，您可以随时使用您最好的朋友来对抗噪音：模糊或高斯模糊。

在 O'Reilly 的“Learning OpenCV”一书中，还有一个关于这种统计方法的有趣讨论，称为“代码预订”。

如果您的预期前景对象速度较慢和/或您的相机速度很快，则另一种改善结果的技术是使用许多图像及其差异，而不是仅使用两个。对此的编程应该很容易，但正如他们在大多数书中所说的那样：我把它作为练习留给读者；）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:03:02.727

那么简单的帧减法呢？一帧总是相同的 - 它是背景，另一帧是来自视频流的帧。将它们都转换为灰度并进行`absdiff`操作。这是[我的视频结果](http://www.youtube.com/watch?v=m4herKwkvPk)（看中心框架）。

# c# - 如何获取 CodeTypeRef 是否可以为空

> ID：11814731
> 
> 赞同：2
> 
> 时间：2012-08-05T07:38:08.843
> 
> 标签：c#, t4, envdte

在一个 T4 模板文件中，我编写了一些代码来根据传递的 CodeTypeRef 类型生成一个类。生成的类将具有传递类型的所有属性，但有细微差别：所有属性都应该可以为空。例如假设我通过了以下类型：

```
public class MyClass
{
     int x {get;set;}
     string y {get;set;}
     Guid z {get;set;}
     byte[] m{get;set;}
     float? n{get;set;}
} 
```

现在生成的类将是这样的：

```
public class MyClass
{
     int? x {get;set;}
     string y {get;set;}
     Guid? z {get;set;}
     byte[] m{get;set;}
     float? n{get;set;}
} 
```

如您所见，只有**int x**和**Guid z**属性更改为可空类型。我在 T4 中拥有的是：

```
 <# foreach(var prop in modelType.VisibleMembers().OfType<CodeProperty>()) { #>
  public  <#= prop.Type.AsString  #>  <#= prop.Name #>{ get; set; } 
  <# } #> 
```

我不知道如何获取**prop.Type**是否可以为空。注意：使用**prop.Type.TypeKind**很有帮助，但并非适用于所有类型。

# ruby-on-rails - Michael Hartl 的 sample_app 用户编辑 current_password 编辑

> ID：11814732
> 
> 赞同：1
> 
> 时间：2012-08-05T07:38:22.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, change-password

我是刚完成 Michael Hartl 的 Rails 学习教程的 Rails 新手。多棒的人啊！

我过去五个小时的生活目标是强制用户输入他们的旧密码，作为用户编辑页面中密码更新过程的一部分。

这是据我所知；

我已将此字段添加到 (sample_app) edit.html.erb 页面。

```
 <%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
  <%= f.password_field :current_password %> 
```

我还用'current_password'更新了user.rb，如下所示

```
class User < ActiveRecord::Base
attr_accessible :name, :email, :current_password, :password, :password_confirmation, 
```

这是我收到的当前服务器端错误消息（我已经“用谷歌搜索了错误消息！一百次”）

```
"ActiveRecord::UnknownAttributeError in UsersController#update

unknown attribute: current_password
Rails.root: /Users/nicolemcnight/rails_projects/sample_app

Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:55:in `update'" 
```

显然 users_controller 有问题，特别是“def update”，目前看起来像这样；

```
def update
  if @user.update_attributes(params[:user])
    flash[:success] = "Profile updated"
    sign_in @user
    redirect_to @user
  else
    render 'edit'
  end
end 
```

我的问题是我需要对“def update”进行哪些修改才能包含该`current_password`属性！？还有我需要做的任何其他更新吗？

基本上我想做的就是强制用户在用户编辑页面上输入（并确认）新密码之前确认他们的旧密码。

我在哪里错了？

任何帮助表示赞赏！

这是我的github

[https://github.com/mwcahn/sample_app](https://github.com/mwcahn/sample_app)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:50:11.080

您需要将 :current_password 添加到 attr_accessor，而不是 attr_accessible - 它们是两个非常不同的东西。就这样

```
attr_accessor :current_password
attr_accessible :name, :email, ... etc 
```

current_password 现在是 User 模型的有效属性。

也就是说，您仍然需要向模型添加代码，以使其在更新前进行密码检查。就像是

```
before_update :confirm_passwords

def confirm_passwords
    if current_password != password
        errors.add(:current_password, "Does not match password")
    end
end 
```

请注意，以上代码仅用于演示目的。数据库中的实际密码值是/应该加密的。所以你不能只做 current_password != password。您需要使用您在密码上使用的相同加密转换您的 current_password 并比较该值。如果您使用 Rails 的默认 has_secure_password 这应该可以工作（但未经测试） -

```
def confirm_passwords
    errors.add(:current_password, "Does not match password") unless self.authenticate(current_password)
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-05T08:05:57.437

再检查一项：确保您对数据库进行了迁移
rails generate migration add_current_password_to_user current_password:string
rake db:migrate
以防您忘记了这一点。

# c# - 如何检测是否有防火墙或其他原因阻止我连接到特定服务器？

> ID：11814733
> 
> 赞同：0
> 
> 时间：2012-08-05T07:38:32.670
> 
> 标签：c#, asp.net, performance, networking, request

如果我的 Web 应用程序有一个特定的组件（小部件），它与另一个服务器（失控）建立连接以从`xml file`.

有时我连接的服务器的管理员放置防火墙或更改某些配置。当我的应用程序尝试连接到该服务器时，小部件需要很长时间才能清空。

问题是尝试连接到该服务器的时间是加载页面时间的一部分。而且我觉得这段时间请求页面有问题！

* * *

我如何确定我是否可以连接到该服务器以读取数据，或者有一些问题阻止我这样做。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:14:37.253

我不太明白你的小部件是由什么组成的，因此它为什么会阻止页面的加载。但是有两种解耦页面加载小部件的方法是：

1.  将小部件放在*iframe*元素中。

2.  首先为小部件插入一个占位符（例如，一个*div*元素和一个*Loading...*文本）。然后，在页面加载后，使用 Javascript 将占位符替换为有效的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T11:19:10.080

您是否允许在您的网站上使用此 XML 提要？如果没有，他们可能会故意阻止您访问它。

但是，我会在本地缓存 XML 文件，并让 cron 作业定期从另一台服务器拉取最新版本。

# java - Eclipse 不显示 TODO 任务

> ID：11814737
> 
> 赞同：15
> 
> 时间：2012-08-05T07:39:23.113
> 
> 标签：java, eclipse

升级到 Eclipse Juno 并导入现有 Java EE 项目后，Tasks 视图不会显示来自我的 .java 文件中注释的 TODO。我可以通过专门右键单击装订线并`Add Task...`从弹出菜单中选择来手动添加新的 TODO 任务，但是 Eclipse 应该自己根据我的评论创建 TODO。

我浏览了与任务标签相关的所有首选项，它们都是默认的（因此可以），仍然没有标签出现。我尝试关闭/打开项目，重新构建它，我检查了 Git repo 以查看没有修改任何点文件（.project 等），因为一切都在旧的 Eclipse 中工作。

[这个](https://stackoverflow.com/questions/4388292/how-do-i-enable-todo-fixme-xxx-task-tags-in-eclipse)问题对我没有帮助……如何让 Eclipse 显示我的 Java TODO？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-25T14:04:19.073

问题是 Eclipse 应该重建设置（可能是一个错误）。解决此问题的方法是启动**Windows > Preferences > Java > Compiler > Task Tags**，然后更改任何标签，然后按应用；系统会询问您是否允许设置重建，接受。然后改回更改的标签并再次重建。您应该立即在 Tasks 视图中显示 TODO。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-05T07:39:23.113

我调查了我的`.project`文件，发现了以下性质：

```
<natures>
    <nature>org.eclipse.ajdt.ui.ajnature</nature>
    <nature>org.eclipse.jem.workbench.JavaEMFNature</nature>
    <nature>org.eclipse.wst.common.modulecore.ModuleCoreNature</nature>
    <nature>org.eclipse.wst.common.project.facet.core.nature</nature>
    <nature>org.eclipse.jdt.core.javanature</nature>
    <nature>org.eclipse.wst.jsdt.core.jsNature</nature>
</natures> 
```

第一个是指我用来处理一些注释的 AspectJ。我意识到新安装的 Eclipse 默认不包含 AspectJ 工具！安装 AJDT 后，我的 TODO 出现在 Tasks 视图中，从而解决了问题。

奇怪的是，为什么 Eclipse 不抱怨有一个性质未知的项目（=一个没有插件的项目）？为什么缺少 AJDT 会导致常规 JDT 无法找到 TODO？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-20T08:29:12.330

就我而言，我只是不知道项目必须正确构建才能显示 TODO。在我修复了构建错误之后，查看 TODO 就没有问题了。

# database - postgresql initdb 出了什么问题？为什么“UTF-8”编码没有得到强制执行？

> ID：11814740
> 
> 赞同：11
> 
> 时间：2012-08-05T07:39:53.060
> 
> 标签：database, postgresql, postgresql-9.1

我正在使用 PostgreSQL 9.1。尝试默认强制执行 UTF8 编码。

这就是我正在做的事情。

```
service postgresql initdb -E 'UTF-8' --lc-collate='en_US.UTF-8' --lc-ctype=locale='en_US.UTF-8'; 
```

虽然初始化过程没有任何问题，

a`\l`在`psql`提示符处提供了详细信息。

```
 List of databases
   Name    |  Owner   |Encoding  | Collate | Ctype |   Access privileges   
-----------+----------+----------+---------+-------+-----------------------
  postgres | postgres | LATIN1 | en_US&nbsp;| en_US| 
```

为什么`UTF-8`编码没有得到强制执行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T08:10:46.640

看起来您正在通过操作系统的运行级别脚本调用 initdb。此脚本可能不会传递参数。您最好尝试直接执行 initdb，您需要以 root 身份开始执行以下步骤，并假设数据库的操作系统用户帐户是 postgres。

```
mkdir <your data dir>
chown postgres <your data dir>
su postgres
initdb --pgdata=<your data dir> -E 'UTF-8' --lc-collate='en_US.UTF-8' --lc-ctype='en_US.UTF-8' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-31T04:38:41.750

Debian PostgreSQL 安装会自动调用 initdb，即它使用默认编码和语言环境初始化集群。编码可以稍后更改，但语言环境不能。要更改语言环境（可能是 initdb 中的其他选项），请删除现有的默认集群并创建一个新集群：

```
Take root privileges.
Run the following command:

 pg_dropcluster --stop <version> main

For example:

pg_dropcluster --stop 8.3 main

Run the initdb with your options. For example:

pg_createcluster --locale de_DE.UTF-8 --start 8.3 main 
```

警告！

前面的操作显然会删除集群数据库中的所有内容。安装基本包后立即执行此操作。如果您需要更改现有数据库的区域设置，请查看 PostgreSQL 手册（这不是一个简单的操作）。

# magento - Magento 面包屑的奇怪之处？

> ID：11814742
> 
> 赞同：0
> 
> 时间：2012-08-05T07:40:07.740
> 
> 标签：magento, breadcrumbs

```
<ul>
    <li class="home">
    <a title="Go to Home Page" href="#">Home</a>
    <span>/ </span>
    </li>
    <li class="category3">New Arrival<span>/ </span>
    </li>
    <li class="cms_page"><strong></strong>
    </li>
    </ul> 
```

以上是网站面包屑的html代码。为什么我的模板面包屑添加此代码`<li class="cms_page"><strong></strong></li>`？当我将主题更改为默认值时，基本模板的 breadcrumbs.phtml 中的所有代码都是相同的。没有

```
<li class="cms_page"><strong></strong>
        </li> 
```

我的模板有什么问题？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:50:59.813

你确定你正在编辑正确的模板吗？验证打开模板提示`system > configuration > developer`

# dynamic - 表单提交时颜色框动态调整大小

> ID：11814744
> 
> 赞同：0
> 
> 时间：2012-08-05T07:40:34.150
> 
> 标签：dynamic, resize, colorbox

我有一个很适合我的颜色框的表格。当以下验证函数触发时，它会创建动态标签，导致表单的高度弹出滚动条。

我试图在每次验证功能运行时调用 $.colorbox.resize() 但到目前为止它不起作用？

到目前为止我的代码

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#logForm").validate();
    $("#logForm").colorbox.resize();
  });
</script> 
```

表格代码

```
<div id="colorboxwrapper">
    <form action="login.php" method="post" name="logForm" id="logForm">
    <input name="doLogin" type="submit" id="doLogin3" class="button" value="Login">
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:20:34.637

这：

```
$("#logForm").colorbox.resize(); 
```

应该是这样的：

```
$.colorbox.resize(); 
```

# android - goBack()时Android Webview维护页面滚动Y位置

> ID：11814750
> 
> 赞同：3
> 
> 时间：2012-08-05T07:41:19.967
> 
> 标签：android, webview

`goBack()`我发现当我调用该函数时，webview 没有记住我之前访问过的网页滚动 y 位置。

我该如何实现这一点，或者 webview 对象中是否有设置？

# c# - LogParserDLL 的装配问题（我使用“tblimp”命令将其转换为 Interop.MSUtil）

> ID：11814752
> 
> 赞同：0
> 
> 时间：2012-08-05T07:41:46.017
> 
> 标签：c#, .net, dll, .net-assembly, logparser

我希望使用 LogParser.DLL 程序集，所以我在普通控制台应用程序上对其进行了测试，它可以工作，然后我将它放入服务器，发送到 win 2003 进行测试（我没有更多可用空间来安装数据库等服务），。 .. 它总是在 eventViewer 日志中返回 FileNotFoundException 错误...

我尝试使用堆栈跟踪来查看实际发生的情况，我发现 DLL 根本没有导入，在谷歌搜索后，我在这个网站上找到了答案，告诉使用 .Net 命令提示符，然后使用导入汇编命令，如果我写它是 tblimp "file name" /out "new file"

我制作了我的程序集，它是 .net 4，所以我去了我的旧 VS，并做了同样的事情来提供一个 .net 2.0.x 兼容的 DLL，我使用它并且它有效，但是......

出现新错误：

> 错误消息：检索具有 CLSID {8CFEBA94-3FC2-45CA-B9A5-9EDACF704F66} 的组件的 COM 类工厂失败，原因是以下错误：80040154。StackTrace：在 FileEventReaderService.EventReader.ReadEventsAndStoreInDatabase（字符串 startDate，字符串 endDate）

```
 ILogRecordset rs = null;
            try
            {
                ((DebugLogger) _logProviderDebugMode).Log("T1-2", "Debug-EventReaderClass",
                                                          EventLogEntryType.Information);
                LogQueryClass qry = new LogQueryClass();
                COMEventLogInputContextClass eventLogFormat = new COMEventLogInputContextClassClass();
                ((DebugLogger) _logProviderDebugMode).Log("T1-3", "Debug-EventReaderClass",
                                                          EventLogEntryType.Information);
                string query = "select * from security WHERE TimeGenerated >= '" + startDate +
                               "' and TimeGenerated <'" + endDate +
                               "' and (eventid=560 or eventid=540)";
                rs = qry.Execute(query, eventLogFormat);
                ((DebugLogger) _logProviderDebugMode).Log("T1-4", "Debug-EventReaderClass",
                                                          EventLogEntryType.Information);
                for (; !rs.atEnd(); rs.moveNext())
                {
                        //Processes
                }

            }
            catch(Exception ex)
            {
                ((DebugLogger)_logProviderDebugMode).Log(
                        "T1-5\nError Msg: " + ex.Message + "\nStackTrace: " + ex.StackTrace
                        , "Debug-EventReaderClass",
                        EventLogEntryType.Error);
            }
            finally
            {
                ((DebugLogger)_logProviderDebugMode).Log("T1-6", "Debug-EventReaderClass",
                                                          EventLogEntryType.Information);
                if (rs != null)
                    rs.close();
            } 
```

我试图捕捉异常并查看是否导入了任何数据，但似乎 rs 什么也不返回，也没有“finally”块中的 if(rs!=null) 再次它本身就是一个错误，这意味着 rs 为空

> 事件类型：信息事件源：EventLoggerService 事件类别：无事件 ID：0 日期：2012 年 8 月 5 日时间：上午 2:47:20 用户：不适用计算机：HF-SERVER-PC 描述：Debug-EventReaderClass：T1 -2
> 
> ## 类变量信息：
> 
> _logProvider：FileEventReaderService.Services.Logger.EventLogger _logProviderDebugMode：FileEventReaderService.Services.Logger.DebugLogger _licenceState：好的 _dataBase：deadManN _interval：5 _timeGap：1 _previousReadTime：8/5/2012 2:40:19 AM _lastReadTime：8/5/2012 2:46:20 AM _parserLock：System.Object _subtleTime：TimerLib.SubtleTime _parserService：FileEventReaderService.Services.Util.ParserService5 _connectionStringBuilder：FileEventReaderService.Services.Util.ConnectionStringBuilder _lastTime：18 _minutes：18
> 
> [有关详细信息，请参阅http://go.microsoft.com/fwlink/events.asp](http://go.microsoft.com/fwlink/events.asp)上的帮助和支持中心 。

上面的日志，是我在错误之前做的最后一个日志，然后它显示了记录在“catch”块中的日志，所以错误可能在这里：

```
 LogQueryClass qry = new LogQueryClass();
        COMEventLogInputContextClass eventLogFormat = new COMEventLogInputContextClassClass(); 
```

所以我再次开始搜索我的错误消息，并发现了一些我无法单独处理的事情，

例如，我看到有人对您说需要注册 DLL manulay 或使用 dllregisterservice 或有关将应用程序仅编译为 86X cpu 类型的事情，但我不想这样做......因为我不为单个用户编写这个使用已知的硬件和软件...

现在有人可以帮忙吗？在设置应用程序时注册 dll 或任何其他可能对此事有帮助的事情？“Interop.MSUtil.dll”库？

并且请帮助，这对我来说非常重要，但我仍然需要太多时间，大约几个月后，我只检查逻辑错误，而不是编译错误：|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:52:12.023

我正要写一个服务，应用程序，我做了一些，我爱上了我们讨论过的错误和评论......

时间过去了，所以我不能告诉你发生的每一件事，但我会给你答案，让我摆脱这个......

* * *

首先，我需要处理 dll 和我自己的应用程序而不是其他应用程序，并且不运行例如带有隐藏命令的日志解析器和通过 Diagnostig.Process 将查询作为参数...

所以我拿了dll，

单独的 dll 在我提供用于测试的 win 应用程序中工作，在 O/S 中与在其中，可能是出于证书原因..但它在我的其他服务器操作系统中没有工作，......也在**服务**应用程序中拿出一个日志告诉我我有一个 IO：**FileNotFoundException**所以我放了 try catch 块然后打印堆栈跟踪，异常告诉我一旦缺少程序集......所以我开始搜索并发现我应该导入dll以某种方式，**所以第1步**：

*   看看你需要什么样的 dll，我的意思是 .net 版本，例如，我需要基于 .net 2.x 以获得更多旧操作系统的支持，但 VS 2010 给了我一个基于 .net 4.x 的 DLL，所以我指的是 Visual Studio 2005在程序文件中
*   **从“开始**”菜单的所有程序菜单中打开 Visual Studio 文件夹，转到“Visual Studio 工具”文件夹，最后运行“Visual Studio 命令提示符”
*   接下来将您的 logparser.dll 文件放在可访问的位置，例如 c:\temp\
*   运行这个命令： `tlbimp "c:\temp\logparser.dll" /out:"c:\temp\Interop.MSUtil.dll"`
*   请注意“Interop.MSUtil.dll”是应用程序寻找的程序集名称，但您**不能**直接*将*logparser.dll 重命名为它
*   将其放入您的项目中，并将所有引用从 logparser.dll 切换到 Interop.MSUtil.dll （这是因为名称空间不同）

直到这里我修复了一些错误，但这并不像服务工作成功，运行日志解析器时出现新错误，并导致类实例返回 Nulls，.. 错误在这里：

> 错误消息：检索具有 CLSID {8CFEBA94-3FC2-45CA-B9A5-9EDACF704F66} 的组件的 COM 类工厂失败，原因是以下错误：80040154。StackTrace：在 FileEventReaderService.EventReader.ReadEventsAndStoreInDatabase（字符串 startDate，字符串 endDate）

**此步骤可能没有任何原因，但由于我遇到错误消息的变化，我把它放在这里**

因为我想为很多用户打包我的应用程序，并不是我告诉他们所有人都运行命令，所以我搜索了更多，有人说注册dll，但你不能将logparser.dll放在全局程序集catch文件夹中设置的，后来我发现我们做的注册与将程序集放入 GAC 不同......

我还发现我们是否要先将 dll 放入 GAC，我们不能放入 logparser 导致它导出，但 Introp.MSUtil.dll 也设置返回错误，将 Interop.MSUtil.dll 放入 GAC 文件夹该错误与程序集命名有关，经过一番搜索，我发现该错误是针对不同的东西，并且发生在程序集未使用对密钥签名的情况下...

您可以通过cmd创建配对密钥，您安装的每个操作系统都有一个它生成的随机密钥，您也可以导出和导入这些密钥以用于特殊证书问题，这些命令自然有他们的网络工程用户，但我们软件在这里也使用它... **所以第 2 步**：

> 如果您遇到 8007007E / 8007007F 错误，请阅读本节...它们自然是因为程序集注册的原因，我不知道，但也许还有一个 dll 签名的共享密钥，您在执行这些操作之前还可以执行另一件事是测试regsvr32 "[dll file address]" 注册一个 dll，如果应用程序不直接使用和搜索 dll，您可以在注册之前将其放在任何文件夹中，例如在我们的项目中，我们指向 Introp.MSUtil.dll 而不是 logparser.dll我们还需要它来注册，然后我们在 logparser.dll 上运行 regsvr32 命令（此命令仅用于测试，在设置和部署应用程序时没有用，您也可以使用 /u 开关取消注册 dll进一步测试）

*   使用 CMD 使用以下命令创建一对密钥文件： `sn -k [file name]`它在您所在的地址中创建文件
*   接下来再次转到第一步，但不要使用旧命令，而是使用这个新命令，它也混合密钥对来生成 dll`tlbimp "[logparser.dll address]" /out:"[address]\Interop.MSUtil.dll" /pr imary /keyfile:"[pair key file address]"`
*   现在使用新签名的 dll，而不是我们之前创建的那个……（Interop.MSUtil.dll）

也存在错误......所以我发现GAC（Global Assembly Catch）不会单独工作，在修复所有错误后，我注意到我可以，但我不需要将Interop.MSUtil.dll放入GAC我的设置文件夹...但是这个注册问题*regsvr32*是问题吗？啊，是的，虽然我听说这与将程序集放入 GAC 相同，但这是不对的，将 dll 注册为全局程序集与使用 regsvr32 注册它不同......如果你想知道你的 dll 是已经注册了，我想你现在需要命名空间或里面的主程序集，所以你可以通过以下步骤查看它是否已注册：

*   转到开始菜单并打开“运行”工具
*   输入*dcomcnfg*并按“enter”打开*组件服务*工具
*   进入这个目录：Console Root->Component Services->Computers->My Computer->DCOM Config
*   现在例如查看 log parser.dll 是否已注册，查找“Interop.Msutil”或“MSUtil”之类的名称
*   如果存在，则 dll 已注册，否则不存在

好的，让我们回到主题，我们需要注册 dll，它会导致一些我不记得的错误...如果您使用命令注册 logparser.dll 并且它有效，则导致类无法正常工作并返回空值，用于打包你的设置你需要做以下事情**所以第3步**：

*   将 logparser.dll 程序集（安装程序知道它是文件而不是程序集）放在可访问的文件夹中，例如安装项目的*应用程序文件夹...*
*   右键单击*解决方案资源管理器*中的文件并选择*属性*
*   单击注册部分，然后单击下拉按钮以查看所有可用选项...
*   从列表中选择*vsdrfCOMSelfReg*，注意像我们创建的（Introp.MSUtil.dll）这样的程序集没有提供像这个选项这样的选项，所以我们不能注册它，你也不**能用**regsvr32 注册那个 dll ......其他选项在我测试时不会注册 dll

* * *

我希望这对你有帮助:)

> PS：请注意 logparser.dll 和 Interop.MSUtil.dll 不会被项目自动检测到，您必须手动将它们添加到您的安装程序和 MSI 项目中......正如我解释的那样，您还需要两个 dll

我希望这对你有用...

非常感谢@Andrii Kalytiiuk
由 Hassan Faghihi 评价

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-06T15:38:20.093

这是一个老问题，但我遇到了这个错误，发现接受的答案有点难以解析。

最终，我必须确保在运行代码的机器上安装**并** `LogParser.dll`注册了 LogParser。否则我会收到原始问题中显示的错误。

根据我的经验，`Interop.MSUtil`它不是替代者，`LogParser.dll`而是促进者。

还值得一提的`Interop.MSUtil`是，现在可以通过[nuget 获得](https://www.nuget.org/packages/Interop.MSUtil.dll/)，但安装后，您必须在解决方案的`packages`文件夹中手动添加对 DLL 的引用，然后右键单击该引用并设置`Embed Interop Types`为`false`.

# grails - 将值注入内部标签

> ID：11814755
> 
> 赞同：1
> 
> 时间：2012-08-05T07:42:05.820
> 
> 标签：grails, groovy, taglib

有两个嵌套标签，如何将变量注入内部标签绑定？

```
class CriteriaTagLib {

    def criteria = { attrs, body ->
        out << "start"
        out << body.call()
        out << "end"
    }

    def eq = {
        out << "eq${group}"
    }
} 
```

并在 GSP 页面中：

```
<g:criteria>
    <g:eq></g:eq>
<g:criteria> 
```

问题是如何从内部设置`group`（在内部使用`eq`）的值`criteria`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:33:33.850

`<q:criteria>`可以将自己的上下文/数据作为请求范围属性（或页面范围），并在内部使用它`<q:eq>`（不要忘记在结束标记上删除它）。像：

```
static final CONTEXT = this.class.name

def criteria = { attrs, body ->
    def data = [
        group: 'test 1'
    ]
    request.setAttribute(CONTEXT, data)
    out << "start"
    out << body.call()
    out << "end"
    request.removeAttribute(CONTEXT)
}

def child = { attrs, body ->
   def data = request.getAttribute(CONTEXT)
   out << 'eq'
   out << data.group  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:19:49.857

内标签`eq`不知道它的外标签`criteria`。但是您可以实现以下目标，

```
def criteria = { attrs, body ->
    out << "start"
    out << body('hello there')
    out << "end"
}

def eq = {attrs->
    out << "eq${attrs.group}"
} 
```

在 gsp 页面中，

```
<g:criteria>
  <g:eq group="${it}"/>
</g:criteria> 
```

# entity-framework - 数据库“主”实体框架迁移中的 CREATE DATABASE 权限被拒绝

> ID：11814762
> 
> 赞同：5
> 
> 时间：2012-08-05T07:43:26.043
> 
> 标签：entity-framework, entity-framework-4

我正在尝试将具有 Entity Framework 4.4 的 ASP.NET MVC 4 应用程序部署到共享 Web 托管（GoDaddy-4GH 平台）。在 GoDaddy 中，我无法使用应用程序代码创建数据库，我必须通过他们的控制面板创建数据库，我做到了。

我想使用迁移功能来让我的数据库在不手动修改架构的情况下发展。

我使用了`IDatabaseInitializer`和的组合`DbMigrationsConfiguration`。db 初始化程序只是迁移到最新版本。

问题在于，在更新过程中，EF 使用该`EnsureDatabaseExists`方法检查数据库是否存在，如果由于某种原因它决定不存在，那么它会继续尝试创建一个新数据库，这当然会失败。

1.  如何调试为什么`EnsureDatabaseExists`返回错误？
2.  是否可以覆盖此行为？（从用反射看代码看来不是这样）

`DBMigration`执行

```
public class DBMigrationInitializaer : IDatabaseInitializer<AppDbContext> {

public void InitializeDatabase(AppDbContext context) {
  bool dbExists;
  var mig = new DbMigrator(new MigrationConfiguration());
  mig.Update();

  Seed(context);
  context.SaveChanges();
}

protected virtual void Seed(AppDbContext context) {
  // TODO: put here your seed creation
} 
```

异常堆栈跟踪

```
 [SqlException (0x80131904): CREATE DATABASE permission denied in database 'master'.]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2072894
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5061932
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2275
   System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async) +228
   System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) +326
   System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +137
   System.Data.SqlClient.<>c__DisplayClassa.<DbCreateDatabase>b__7(SqlConnection conn) +38
   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +98
   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +349
   System.Data.SqlClient.SqlProviderServices.DbCreateDatabase(DbConnection connection, Nullable`1 commandTimeout, StoreItemCollection storeItemCollection) +315
   System.Data.Objects.ObjectContext.CreateDatabase() +84
   System.Data.Entity.Migrations.Utilities.DatabaseCreator.Create(DbConnection connection) +73
   System.Data.Entity.Migrations.DbMigrator.EnsureDatabaseExists() +76
   System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration) +44
   System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update() +12
   MvcApplication1.Models.MyDBInitializaer.InitializeDatabase(AppContext context) in MyDBInitializaer.cs:31
   System.Data.Entity.<>c__DisplayClass2`1.<SetInitializerInternal>b__0(DbContext c) +75
   System.Data.Entity.Internal.<>c__DisplayClass8.<PerformDatabaseInitialization>b__6() +19
   System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) +72
   System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization() +186
   System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c) +7
   System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input) +118
   System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action) +190
   System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase() +73
   System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +28
   System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +56
   System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator() +15
   System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() +40
   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +315
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +58
   MvcApplication1.Controllers.EmployeeController.Index() in EmployeeController.cs:21 
```

谢谢你，伊多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:30:41.863

我的虚拟主机（**amen.fr**）也有同样的问题。在几天的时间里，我查看并意识到在主机上配置 DBMigrator 类和 sql server 的实现中有一些东西导致了这个功能障碍**。**“ **System.Data.Entity.Migrations.DbMigrator.EnsureDatabaseExists** ”无法检查正确的信息。这就是为什么与数据库的所有事务都是使用我的数据上下文进行的。这是允许我进行半自动迁移的代码：

```
public class Migrator
  {
    public static void RunMigrations()
    {
      //Configuration configuration = new Configuration();

      //configuration.ContextType = typeof(BOContext);//TODO Change to your DbContext
      //configuration.MigrationsAssembly = configuration.ContextType.Assembly;
      //configuration.MigrationsNamespace = "BO.Domain.Migrations";//TODO Namespace that contains your migrations classes
      //configuration.TargetDatabase = new DbConnectionInfo(context.Database.Connection.ConnectionString, "System.Data.SqlClient");

      //DbSeederMigrator<BOContext> migrator = new DbSeederMigrator<BOContext>(configuration);
      //migrator.MigrateToLatestVersion();

      using (BOContext context = new BOContext())
      {
        Configuration configuration = new Configuration();

        configuration.ContextType = typeof(BOContext);//TODO Change to your DbContext
        configuration.MigrationsAssembly = configuration.ContextType.Assembly;
        configuration.MigrationsNamespace = "CodeFirstMembershipSharp.Migrations";//TODO Namespace that contains your migrations classes
        configuration.TargetDatabase = new DbConnectionInfo(context.Database.Connection.ConnectionString, "System.Data.SqlClient");

        DbMigrator migrator = new DbMigrator(configuration);
        MigratorScriptingDecorator scriptor = new MigratorScriptingDecorator(migrator);

        var lm = migrator.GetLocalMigrations();// get local migration
        var dm = context.Database.SqlQuery<Migration>("select MigrationId from dbo.__MigrationHistory").Select(o => o.MigrationId); // get database migration
        List<string> pm = lm.Except(dm).ToList();// buil and set pending migration

        if (pm.Any())// Peding migration exists
        {
          string source = dm.Any() ? dm.OrderBy(o => o).Last() : DbMigrator.InitialDatabase;// get last to set source migration
          string target = pm.OrderBy(o => o).Last(); /// gest last to set target migration

          string sql = scriptor.ScriptUpdate(source, target); // buit sql script migration

          try { context.Database.ExecuteSqlCommand(sql); } // execute sql script migration
          catch (Exception e)
          {
            string spm = "Pending migrations : " + String.Join(";", pm.ToArray());
            string sdm = "Database migrations : " + String.Join(";", pm.ToArray());
            string[] tmp = { e.Message, spm, sdm, "Source : " + source, "Target : " + target, sql };

            throw new Exception(String.Join("\n-----------------\n", tmp));
          }
        }
      }

      //// TODO : code seed here
      //Migrator.Seed();
    }

    protected static void Seed()
    {
      //using (BOContext context = new BOContext())
      //{
      //  if (!context.Users.Any())
      //  {
      //    MembershipCreateStatus Status;
      //    Membership.CreateUser("Demo", "123456", "demo@demo.com", null, null, true, out Status);

      //    if (!context.Roles.Any(o => o.RoleName == "Admin"))
      //    {
      //      Roles.CreateRole("Admin");
      //      Roles.AddUserToRole("Demo", "Admin");
      //    }
      //  }
      //}
    }laguna-veneta
  } 
```

# c# - Sandcastle 帮助文件生成器找不到文档源

> ID：11814768
> 
> 赞同：8
> 
> 时间：2012-08-05T07:44:12.043
> 
> 标签：c#, xml, documentation, sandcastle, shfb

我正在使用 Sandcastle Help File Builder 构建 VS 2010 C# 项目的文档。我已将`.xml`编译器生成的文档和项目的 Visual Studio 解决方案`.sln`文件添加到**Documentation Sources**。我还将项目的可执行文件添加`.exe`到**References**。但是，它不是在构建。我收到这些警告和错误：

> **SHFB：警告 BE0006：**无法找到“C:\Users\user\Music\Documents\Visual Studio 2010\Projects\SFML_Platformer\SFML_Platformer.sln”的任何文档源（配置：调试平台：AnyCPU）
> 
> **SHFB：错误 BE0042：**您必须以程序集或 Visual Studio 解决方案/项目文件的形式指定至少一个文档源

有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T14:57:09.337

您应该只将 XML 文档文件添加为文档源。添加 XML 文件后会自动添加 DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:21:25.077

这里是 Sandcastle Help File Builder 的开发者 Eric aka EWoodruff 的回答。

> BE0006 表示找不到基于项目的文档源。BE0042 是次要结果，这意味着它根本没有发现任何可记录的内容。解决方案中有哪些类型的项目？如果它是一个网站项目，请记住，它们通常不会生成在项目中列为输出的任何程序集，也不会生成任何 XML 注释文件。在这种情况下，您需要将 Web 代码提供程序添加到您的项目中以获取 XML 注释并手动添加网站的 .\bin 文件夹作为 SHFB 项目中的文档源。如果是这种情况，在入门部分中有一个关于记录网站的主题。
> 
> 所有其他项目类型都应该工作。如果一切都失败了，请尝试直接添加程序集和 XML 注释文件。我想 Express 版本可能使用不同的项目类型 ID。如果您可以将解决方案文件和项目文件发送给我，我可以查看它们，看看为什么它没有找到目标。我的电子邮件地址位于独立 GUI 的“关于”框中和帮助文件页面的页脚中。
> 
> 另一件事是，确保在 SHFB 工具栏中选择的配置和平台设置与用于构建项目的配置和平台设置相匹配（即 Debug/AnyCPU、Release/AnyCPU、Debug/x86 等）。如果没有，那将导致它找不到正确的输出目标。
> 
> 埃里克

[来源](http://shfb.codeplex.com/discussions/403768)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T19:16:54.057

当我将主应用程序上 VS.NET 中的项目构建`Debug`从`Release`. 我认为它再也找不到我指定的用于创建文档的 .dll。我本可以修复映射，但回去`Debug`工作对我来说很好，可以消除这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-30T14:27:43.783

在 Sandcastle 中运行 Build 之前，不要忘记在清理后重建您的解决方案。

# c# - 图像的缩放中心

> ID：11814770
> 
> 赞同：0
> 
> 时间：2012-08-05T07:44:24.873
> 
> 标签：c#, winforms, zooming

我创建了一个放大/缩小图像的程序。

但它不会放大到中心。

我的图片框在面板中，代码是：

```
Image newImage = Image.FromFile("view.jpg");
pictureBox1.Width = (int)(newImage.Size.Width / ZoomLevel);
pictureBox1.Height = (int)(newImage.Size.Height / ZoomLevel);

Bitmap img = new Bitmap(newImage, 
                        (int)(newImage.Size.Width / ZoomLevel), 
                        (int)(newImage.Size.Height / ZoomLevel));
pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
pictureBox1.Image = img; 
```

[我在这里上传了一个示例项目。请下载这个](http://www.4shared.com/rar/OmbrhEcj/zoom.html)

我使用 Visual Studio 2008、C#、.Net 3.5

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T06:40:28.573

我找到了答案。

我在[这里](http://www.4shared.com/rar/tZv8lQkk/zoom_answer.html)上传（链接不再起作用）

它是一个在图像上拖动和缩放的示例项目。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T00:39:22.063

Reza 的解决方案运行良好，但由于需要注册，访问起来有点困难。我已将他的代码重写为独立控件，并将代码放在这里以供将来参考。

```
public class ImageViewer : Panel
{
    public Image Image
    {
        get { return this.image; }
        set
        {
            this.image = value;
            this.ZoomExtents();
            this.LimitBasePoint(basePoint.X, basePoint.Y);
            this.Invalidate();
        }
    }

    private bool drag;
    private float ScaleFactor = 1;
    private Point basePoint;
    private Image image;
    private int x, y;

    /// <summary>
    /// Class constructor
    /// </summary>
    public ImageViewer()
    {
        this.DoubleBuffered = true;
    }

    /// <summary>
    /// Mouse button down event
    /// </summary>
    protected override void OnMouseDown(MouseEventArgs e)
    {
        switch (e.Button)
        {
            case MouseButtons.Left:
                this.ZoomIn();
                break;

            case MouseButtons.Middle:
                this.drag = true;
                x = e.X;
                y = e.Y;
                break;

            case MouseButtons.Right:
                this.ZoomOut();
                break;
        }

        base.OnMouseDown(e);
    }

    /// <summary>
    /// Mouse button up event
    /// </summary>
    protected override void OnMouseUp(MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Middle)
            drag = false;

        base.OnMouseUp(e);
    }

    /// <summary>
    /// Mouse move event
    /// </summary>
    protected override void OnMouseMove(MouseEventArgs e)
    {
        if (drag)
        {
            LimitBasePoint(basePoint.X + e.X - x, basePoint.Y + e.Y - y);
            x = e.X;
            y = e.Y;
            this.Invalidate();
        }

        base.OnMouseMove(e);
    }

    /// <summary>
    /// Resize event
    /// </summary>
    protected override void OnResize(EventArgs e)
    {
        LimitBasePoint(basePoint.X, basePoint.Y);
        this.Invalidate();

        base.OnResize(e);
    }

    /// <summary>
    /// Paint event
    /// </summary>
    protected override void OnPaint(PaintEventArgs pe)
    {
        if (this.Image != null)
        {
            Rectangle src = new Rectangle(0, 0, Image.Width, Image.Height);
            Rectangle dst = new Rectangle(basePoint.X, basePoint.Y, (int)(Image.Width * ScaleFactor), (int)(Image.Height * ScaleFactor));
            pe.Graphics.DrawImage(Image, dst, src, GraphicsUnit.Pixel);
        }

        base.OnPaint(pe);
    }

    private void ZoomExtents()
    {
        if (this.Image != null)
            this.ScaleFactor = (float)Math.Min((double)this.Width / this.Image.Width, (double)this.Height / this.Image.Height);
    }

    private void ZoomIn()
    {
        if (ScaleFactor < 10)
        {
            int x = (int)((this.Width / 2 - basePoint.X) / ScaleFactor);
            int y = (int)((this.Height / 2 - basePoint.Y) / ScaleFactor);
            ScaleFactor *= 2;
            LimitBasePoint((int)(this.Width / 2 - x * ScaleFactor), (int)(this.Height / 2 - y * ScaleFactor));
            this.Invalidate();
        }
    }

    private void ZoomOut()
    {
        if (ScaleFactor > .1)
        {
            int x = (int)((this.Width / 2 - basePoint.X) / ScaleFactor);
            int y = (int)((this.Height / 2 - basePoint.Y) / ScaleFactor);
            ScaleFactor /= 2;
            LimitBasePoint((int)(this.Width / 2 - x * ScaleFactor), (int)(this.Height / 2 - y * ScaleFactor));
            this.Invalidate();
        }
    }

    private void LimitBasePoint(int x, int y)
    {
        if (this.Image == null)
            return;

        int width = this.Width - (int)(Image.Width * ScaleFactor);
        int height = this.Height - (int)(Image.Height * ScaleFactor);
        if (width < 0)
        {
            x = Math.Max(Math.Min(x, 0), width);
        }
        else
        {
            x = width / 2;
        }
        if (height < 0)
        {
            y = Math.Max(Math.Min(y, 0), height);
        }
        else
        {
            y = height / 2;
        }
        basePoint = new Point(x, y);
    }
} 
```

显然，所有功劳都归功于 Reza。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T09:43:43.567

我认为这是因为您更改了图片框的大小。它居中，但我看不到它，因为您总是看到所有图片。

尝试删除 2 行以更改图片框的宽度和高度或将它们设置为常数，如 1 或 2 或...如果您希望它根据图片：

第一个选项：

```
Image newImage = Image.FromFile("view.jpg");
Bitmap img = new Bitmap(newImage, 
                        (int)(newImage.Size.Width / ZoomLevel), 
                        (int)(newImage.Size.Height / ZoomLevel));
pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
pictureBox1.Image = img; 
```

第二种选择：

```
Image newImage = Image.FromFile("view.jpg");
pictureBox1.Width = (int)(newImage.Size.Width / 1);
pictureBox1.Height = (int)(newImage.Size.Height / 1);

Bitmap img = new Bitmap(newImage, 
                        (int)(newImage.Size.Width / ZoomLevel), 
                        (int)(newImage.Size.Height / ZoomLevel));
pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
pictureBox1.Image = img; 
```

# c# - 为什么 C# 没有头文件？命名空间会处理所有事情吗？

> ID：11814771
> 
> 赞同：30
> 
> 时间：2012-08-05T07:44:31.113
> 
> 标签：c#, namespaces, header-files, nxopen

任何人都可以清楚地说明 C# 中头文件和命名空间的用法吗？

因为在 C++ 中，我使用`******.h`文件来读取库函数。当我在 C# 中看到一些示例程序时，它们丢失了，谁能告诉我为什么？

我正在使用 C# 为 CAD 应用程序开发自定义工具。每当我使用适当的函数打开文件（CAD 文件）时，编译器都会给我一个错误，指出我提供的函数名称在上下文中不可用。这里的上下文是什么意思？

当我打开该 CAD 应用程序的帮助文件时，在名为`uf_part.h`. 但是有一个名为`NXPpen`.

我`using NXOpen`在 Visual Basic 中使用命名空间，这还不够吗？我还需要提供那个头文件吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-05T07:57:17.850

C# 更“对程序员友好”。在处理同一个项目的文件时，它不会每次都手动指定“头文件”，而是会根据命名空间在所有项目文件中查找匹配项。

要理解这一点，请执行以下步骤：

1.  在 Visual Studio 中启动新项目。（无论是什么类型，WinForms 或 Console）
2.  右键单击项目并添加新类。
3.  在您的主类笔记中，您可以看到刚刚添加的新类，而无需添加任何标题。

这是怎么做到的？只需对两个类使用相同的命名空间即可。.NET 引擎足够智能，可以将所有这些类链接在一起。

现在，当涉及到位于不同 DLL 文件中的*外部*代码意味着代码时，诀窍是添加对该 DLL 的引用（在 Studio --> 右键单击​​项目 --> 添加引用 --> 浏览）然后您需要指定您将通过在顶部添加*using 语句*来使用该 DLL ：

```
using ExternalDllName.ExternalNamespace; 
```

就是这样。与 C++ 不同，您不需要`.h`文件，因为 .NET 会自动搜索引用的 DLL 文件以查找匹配项。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-05T07:47:59.747

There's no such thing as header file in .net, because all needed metadata is contained in referenced assembly itself.

Have you referenced needed assembly in you project? Also please mind that there's no such thing as "function" in C#, only class methods (which means that you have to specify object or static class in you call).

Also: [General Structure of a C# Program](http://msdn.microsoft.com/en-us/library/w2a9a9s3%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-05T07:58:30.267

现代语言（如 C# 或 Java）的编译器在编译后的文件中存储有关它们所包含的类和方法的信息，这些信息可用于检查从一个源文件到另一个源文件或库类的调用的正确性。

当 C 被发明时，磁盘空间、内存和 CPU 能力是宝贵的资源，这种方法是不可能的。引入了头文件以允许编译器检查不同的源文件是否符合相同的接口。当 C++ 被发明时，上述方法可能是可能的，但我猜出于兼容性原因选择它坚持使用 C 方法。

# php - 使用 PHP 文件扩展名编写动态 CSS 样式表效率会降低吗？

> ID：11814773
> 
> 赞同：3
> 
> 时间：2012-08-05T07:44:50.467
> 
> 标签：php, html, css

我一直在想办法根据来自网站后端的输入（通过 PHP 之类的语言）动态更改样式。通常我的样式表是单独的 CSS 扩展文件，但这些文件本身不允许 PHP 标记。毕竟，与将所有样式放在单独的文件中相比，它是 HTML 文件中的额外标记。使用 HTML`<style>`标签是否可能比使用样式表更慢/效率更低？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T08:32:56.230

W3C 的 CSS 2.1 建议包含关于[一致性的部分：要求和建议](http://www.w3.org/TR/2011/REC-CSS2-20110607/conform.html#text-css)，它没有提及文件扩展名，但确实指出：

> ## 3.4 text/css 内容类型
> 
> 存在于单独文件中的 CSS 样式表作为字节序列通过 Internet 发送，并带有编码信息。传输的结构，称为**消息实体**，由 RFC 2045 和 RFC 2616 定义（参见[[RFC2045]](http://www.w3.org/TR/2011/REC-CSS2-20110607/refs.html#ref-RFC2045)和[[RFC2616]](http://www.w3.org/TR/2011/REC-CSS2-20110607/refs.html#ref-RFC2616)）。内容类型为“text/css”的消息实体表示一个独立的 CSS 文档。“text/css”内容类型已由 RFC 2318 ( [[RFC2318]](http://www.w3.org/TR/2011/REC-CSS2-20110607/refs.html#ref-2318) ) 注册。

因此，只要文件以`text/css`内容类型提供（并且任何缓存问题都已解决，如[@Fluffeh 的回答](https://stackoverflow.com/a/11814843/623041)中所述），您应该没有问题。[`header()`](http://php.net/manual/en/function.header.php)在 PHP 中，可以在发送任何输出之前调用 to 来设置内容类型：

```
<? header('Content-type: text/css'); ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T07:58:21.960

我不太确定你想在 CSS 中做太多事情。如果有的话，我建议可能添加一些额外的类，而不是动态地做太多。如果有的话，您最好使用 PHP 选择要包含的 CSS 表，但将它们保留为 CSS。如果你继续使用同一个文件，用户可以缓存它，它看起来要快得多。最好有一个 50k 的样式表用于 ocne 然后缓存，而不是一个 10k 的样式表随每个页面一起下载。

# sqlite - sqlite 无法识别的令牌

> ID：11814774
> 
> 赞同：2
> 
> 时间：2012-08-05T07:45:14.537
> 
> 标签：sqlite, windows-phone-7

我在 wp7 中使用 sqlite，当我尝试插入包含中文字符集的记录时，它会引发异常，例如下面的语句，中文字符串是随机生成的。

```
insert into tds_task(
        t_name,t_creator,t_sender,t_contents,t_importance,t_state,t_tag,
        t_assignto,t_createtime,t_starttime,t_donetime,t_deadlinetime,
        t_secrets,t_remindtime,t_category,t_attachments,t_rowguid)
        values('科斯特纳目录服务员工们kpkek0哭哭啼','example@example.com','',**'科斯特纳目录服务员工们kpkek0哭哭啼啼兔兔玉兔不图啊啊兔福田汽车业界碑林博物馆学院奖励工资条10拖拖拉拉她她她退下局势必，就算方法'**,'0','0','','','2012-08-05 15:36:50','0001-01-01 00:00:00','0001-01-01 00:00:00','2012-08-05 16:06:00','0','0001-01-01 00:00:00','default','','7200273c-94a6-4e0f-83c0-c4b345cfa01e'); 
```

它抛出了这个异常：

```
unrecognized token: "'科斯特纳目录服务员工们kpkek0哭哭啼啼兔兔玉兔不图啊啊兔福田汽车业界碑林博物馆学院奖励工资条10拖拖拉拉她她她退" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:36:08.503

你在那？我遇到了问题。我发现如果文本字符串包含全角特征
，那么你不能将它插入到 sqlite 数据库中。如果你是一个中国程序员，我可以为你提供更多关于如何解决这个问题的信息。一种简单的清除方法是将全角字符串转换为半角字符串。你可以谷歌代码来做到这一点！

# afnetworking - AFNetworking 返回一个 _NSCFData 对象而不是 JSON

> ID：11814776
> 
> 赞同：9
> 
> 时间：2012-08-05T07:45:26.840
> 
> 标签：afnetworking

我正在向 AFHTTPClient 的实例发送以下消息。我希望成功块被发送一个 Foundation 对象（字典），但调试器显示 JSON 是一个 _NSCFData 对象。 [这个关于 SO](https://stackoverflow.com/questions/9159004/issue-with-retrieving-json-with-afnetworking)的问题表明我需要将 Accept 标头设置为“application/json”。好吧，我正在这样做，但 AFNetworking 仍然没有解码响应正文中的 JSON。如果我自己使用 NSJSONSerialization 解码 json，我会得到一个 NSDictionary，如我所料。我究竟做错了什么？

```
[client setDefaultHeader:@"Accept" value:@"application/json"];
[client postPath:@"/app/open_connection/"
  parameters:params
     success:^(AFHTTPRequestOperation *operation, id JSON) {
         NSLog(@"successful login! %@", [JSON valueForKeyPath:@"status"]);
     }
     failure:^(AFHTTPRequestOperation *operation, NSError *error) {
         NSLog(@"error opening connection");
         NSAlert *alert = [NSAlert alertWithError:error];
         [alert runModal];
     }
]; 
```

注意：我正在使用 Django 在 Python 中对服务器进行编程。响应的内容类型是 'application/json'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T18:17:26.573

当您使用`AFHTTPClient`JSON API 时，通常需要设置所有这三个设置：

```
httpClient.parameterEncoding = AFJSONParameterEncoding;
[httpClient setDefaultHeader:@"Accept" value:@"application/json"];
[httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

现在，当您使用客户端发出请求时，它会知道将响应解析为 JSON。

```
[httpClient postPath:@"/app/open_connection/"
          parameters:params
             success:^(AFHTTPRequestOperation *operation, id response) {
                 NSLog(@"JSON! %@", response);
             }
             failure:^(AFHTTPRequestOperation *operation, NSError *error) {
             }]; 
```

这也是我发现的一个技巧。在`NSError`对象中，您可以解析它并检索错误消息（如果 HTTP 响应有 JSON 错误消息）：

```
failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSDictionary *JSON =
    [NSJSONSerialization JSONObjectWithData: [error.localizedRecoverySuggestion dataUsingEncoding:NSUTF8StringEncoding]
                                    options: NSJSONReadingMutableContainers
                                      error:nil];
           failureCallback(JSON[@"message"]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:18:33.953

试试这个......我认为您的客户端设置可能有问题。

```
NSMutableURLRequest *request = [client requestWithMethod:@"POST" path:@"/app/open_connection/" parameters:params];

AFJSONRequestOperation *operation =
[AFJSONRequestOperation JSONRequestOperationWithRequest:request 
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSLog(@"successful login! %@", [JSON valueForKeyPath:@"status"]);
    }
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"error opening connection");
        NSAlert *alert = [NSAlert alertWithError:error];
        [alert runModal];
}];
[operation start]; 
```

# mysql - 为什么我会收到 MySQL 错误“查询为空”？

> ID：11814778
> 
> 赞同：0
> 
> 时间：2012-08-05T07:45:59.273
> 
> 标签：mysql, exception

这是我的代码。

```
if(!isset($_SESSION['user'])) header("Location: ../");
$username = $_SESSION["user"];
$id = $_SESSION["id"];

$nume=$_POST["nume"];
$prenume=$_POST["prenume"];
$telefon=$_POST["telefon"];
$email=$_POST["email"];
$adresa=$_POST["adresa"];
$ziNastere=$_POST["ziNastere"];
$poza=$_POST["poza"];

include('../conn2.php');

mysql_query("UPDATE $username SET nume=$nume,prenume=$prenume,telefon=$telefon,email=$email,adresa=$adresa,ziNastere=$ziNastere,poza=$poza
WHERE id=$id");

mysql_select_db($username);
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not update data: ' . mysql_error());
}
echo "Updated data successfully\n";

if(isset($_SESSION['id']))  unset($_SESSION['id']);
//header("Location: ../home");
mysql_close($con);
?> 
```

我想用字符串更新数据库“$username”：$nume、$prenume、$telefon...但是当我单击保存时它返回`"Error: Query was empty"`- 为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:55:07.507

你还没有定义可验证的 $sql

```
 $sql = "UPDATE $username SET nume=$nume,prenume=$prenume,telefon=$telefon,email=$email,adresa=$adresa,ziNastere=$ziNastere,poza=$poza
    WHERE id=$id"
mysql_select_db($username);
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not update data: ' . mysql_error());
}
echo "Updated data successfully\n";

if(isset($_SESSION['id']))  unset($_SESSION['id']);
//header("Location: ../home");
mysql_close($con);
?> 
```

# c - 我无法理解错误

> ID：11814779
> 
> 赞同：-1
> 
> 时间：2012-08-05T07:46:04.907
> 
> 标签：c, pointers, function-pointers

> 我用函数指针编写了这个程序，但它给出了错误`Lvalue required in function main`，为什么？

```
#include<stdio.h>
fun();
main()
{
int fun();
int *ptr();
ptr=fun;   //this line gives error
*ptr();
}
int fun()
{
    printf("amol singh");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:53:48.027

这是工作代码：

```
#include<stdio.h>
int fun() {
    printf("amol singh");
    return 0;
}
main() {
    int (*ptr)();

    ptr=fun;
    (*ptr)();
} 
```

# ruby - 追踪 Ruby Gmail Gem 方法的起源

> ID：11814783
> 
> 赞同：1
> 
> 时间：2012-08-05T07:47:18.607
> 
> 标签：ruby, gem, gmail, mime

[我的目标是在这个gmail gem](https://github.com/nu7hatch/gmail "gmail宝石")自述文件示例中找到调用 save_attachments_to 的地方：

```
folder = "/where/ever"
gmail.mailbox("Faxes").emails do |email|
  if !email.message.attachments.empty?
    email.message.save_attachments_to(folder)
  end
end 
```

我在循环中运行“puts email.message.attachments.methods”和“email.message.attachments.class”：

```
Mail::AttachmentsList
guess_encoding
set_mime_type
inspect 
```

然后我运行了一个“puts email.message.methods”和一个“puts email.message.class”来衡量。示例方法调用不在列表中。

所以我潜入[https://github.com/nu7hatch/gmail/blob/master/lib/gmail/message.rb](https://github.com/nu7hatch/gmail/blob/master/lib/gmail/message.rb)。

那里也没有定义任何方法，但我注意到定义了 mime/message，所以我去那里查看它的方法：[http ://rubydoc.info/gems/mime/0.1/MIME/Message](http://rubydoc.info/gems/mime/0.1/MIME/Message)

这里也没有 save_attachments_to 方法。

这种方法到底好在哪里？gmail gem 没有定义附件方法，所以整个东西必须从某个地方继承。在哪里？继承它的调用在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:46:24.107

你找不到它的原因是因为它不存在。我不确定为什么。我下载了 gem 并在其中玩了一段时间`irb`：

```
1.9.3-p194 :066 > x.message.attachments
 => [#<Mail::Part:70234804200840, Multipart: false, Headers: <Content-Type: application/vnd.ms-excel; name="MVBINGO.xls">, <Content-Transfer-Encoding: base64>, <Content-Disposition: attachment; filename="MVBINGO.xls">, <Content-Description: MVBINGO.xls>>] 
1.9.3-p194 :063 > x.message.save_attachments_to(folder)
NoMethodError: undefined method `save_attachments_to' for #<Mail::Message:0x007fc1a3875818>
    from /Users/Qsario/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/message.rb:1289:in `method_missing'
    from (irb):63
    from /Users/Qsario/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

不是很有帮助。通常，您可以执行类似的操作

```
puts my_obj.method(:some_method_name).source_location 
```

但是当有问题的方法不存在时，那对你没有多大帮助。编辑：现在我看，这个确切的错误已经在他们的[问题跟踪器](https://github.com/nu7hatch/gmail/issues/31 "Gmail::Message 的未定义方法“save_attachments_to”")上。一些人发布了代码来实现不存在的功能，例如ab的这段代码：

```
folder = Dir.pwd # for example
email.message.attachments.each do |f|
  File.write(File.join(folder, f.filename), f.body.decoded)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T16:10:07.427

感谢 Qsario 的健全性检查。:-)

这是适用于 Ruby 1.9.3 (1.9.3-p194) 的代码：

```
gmail = Gmail.connect('username@gmail.com', 'pass') 
gmail.inbox.emails.each do |email|
  email.message.attachments.each do |f|
    File.write(File.join(local_path, f.filename), f.body.decoded)
  end
end 
```

这是适用于 1.9.2 (1.9.2-p320) 和 1.9.3 (1.9.3-p194) 的代码：

```
gmail = Gmail.connect('username@gmail.com', 'pass') 
gmail.inbox.emails.each do |email|
  email.message.attachments.each do |file|
    File.open(File.join(local_path, "name-of-file.doc or use file.filename"), "w+b", 0644 ) { |f| f.write file.body.decoded }
  end
end 
```

# java - 创建 JToolBar 时出错

> ID：11814785
> 
> 赞同：1
> 
> 时间：2012-08-05T07:47:53.550
> 
> 标签：java, swing, user-interface, action, jtoolbar

![除了颜色按钮之外，所有按钮都添加得很好](../Images/7e792ce03c7be98fc0e846977a7bba05.png)
向工具栏添加按钮时出现此错误
`Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: Sketcher.SketcherFrame$ColorAction cannot be cast to javax.swing.Icon`

ColorAction 是一个用于创建更改 JFrame 背景颜色的工具栏按钮的类。它延伸`javax.swing.AbstractAction`.
按钮类型`ColorAction`存储在一个`ColorActions[]`数组中，并将其`SMALL_ICON`属性设置为适当的值。

**堆栈跟踪**：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: Sketcher.SketcherFrame$ColorAction cannot be cast to javax.swing.Icon
    at javax.swing.AbstractButton.setIconFromAction(Unknown Source)
    at javax.swing.AbstractButton.configurePropertiesFromAction(Unknown Source)
    at javax.swing.AbstractButton.setAction(Unknown Source)
    at javax.swing.JButton.<init>(Unknown Source)
    at Sketcher.SketcherFrame.addToolBarButton(SketcherFrame.java:182)
    at Sketcher.SketcherFrame.createToolbar(SketcherFrame.java:174)
    at Sketcher.SketcherFrame.<init>(SketcherFrame.java:27)
    at Sketcher.Sketcher.createGUI(Sketcher.java:16)
    at Sketcher.Sketcher.access$1(Sketcher.java:15)
    at Sketcher.Sketcher$1.run(Sketcher.java:10)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

**突出显示的方法**

```
private void createColorMenu() {
    createElementColorActions();
    colorMenu = new JMenu("Color");
    colorMenu.setMnemonic('M');
    createRadioButtonDropDown(colorMenu,colorActions,blueAction);
    menuBar.add(colorMenu);
} 
```

和

```
private void createRadioButtonDropDown(JMenu menu, Action[] actions,Action selected){
        ButtonGroup group = new ButtonGroup();
        JRadioButtonMenuItem item = null;
        for(Action action : actions){
            group.add(menu.add(item = new JRadioButtonMenuItem(action)));
            if(action==selected){
                item.setSelected(true);
            }
        }
    } 
```

和

```
private void addToolBarButton(Action action){
        >>JButton button = new JButton(action);
        button.setBorder(BorderFactory.createCompoundBorder(new EmptyBorder(2,5,5,2),
                            BorderFactory.createRaisedBevelBorder()));
        button.setHideActionText(true);
        toolBar.add(button);
    } 
```

和

```
private void createToolbar(){
        for(FileAction action : fileActions){
            if(action!=exitAction && action!=closeAction){
                addToolBarButton(action);
            }
        }
        toolBar.addSeparator();
        for(ColorAction action : colorActions){
            >>addToolBarButton(action);
        }
        toolBar.addSeparator();
        for(TypeAction action : typeActions){
            addToolBarButton(action);
        }
    } 
```

**包含图像路径的常量文件**

```
import java.awt.Color;
import javax.swing.*;
public class SketcherConstants {
    public final static int LINE = 101;
    public final static int RECTANGLE = 102;
    public final static int CIRCLE = 103;
    public final static int CURVE = 104;

    public final static int DEFAULT_ELEMENT_TYPE = LINE;
    public final static Color DEFAULT_ELEMENT_COLOR = Color.blue;

    public final static String imagePath = "H:/Fasih/SketcherIcons/";
    public static final Icon NEW16 = new ImageIcon(imagePath+"new.GIF");
    public static final Icon OPEN16 = new ImageIcon(imagePath+"open.GIF");
    public static final Icon SAVE16 = new ImageIcon(imagePath+"save.GIF");
    public static final Icon PRINT16 = new ImageIcon(imagePath+"print.GIF");
    public static final Icon SAVEAS16 = new ImageIcon(imagePath+"saveas.GIF");

    public static final Icon LINE16 = new ImageIcon(imagePath+"line.PNG");
    public static final Icon CURVE16 = new ImageIcon(imagePath+"curve.PNG");
    public static final Icon RECTANGLE16 = new ImageIcon(imagePath+"square.PNG");
    public static final Icon CIRCLE16 = new ImageIcon(imagePath+"circle.PNG");

    public static final Icon RED16= new ImageIcon(imagePath+"red.GIF");
    public static final Icon GREEN16= new ImageIcon(imagePath+"green.GIF");
    public static final Icon YELLOW16= new ImageIcon(imagePath+"yellow.GIF");
    public static final Icon BLUE16= new ImageIcon(imagePath+"blue.GIF");
} 
```

和

```
class ColorAction extends AbstractAction {
        public ColorAction(String name,Color color){
            super(name);
            this.color = color;
        }
        public ColorAction(String name,Color color,char ch,int modifiers){
            this(name,color);
            putValue(ACCELERATOR_KEY,KeyStroke.getKeyStroke(ch,modifiers));
            int index = name.toUpperCase().indexOf(ch);
            if(index!=-1){
                putValue(DISPLAYED_MNEMONIC_INDEX_KEY,index);
            }
        }
        public void actionPerformed(ActionEvent e){
            elementColor = color;
            getContentPane().setBackground(color);
        }
        private Color color;
    } 
```

如果我删除颜色按钮，则添加打开、关闭、保存按钮就可以了。我不知道为什么不能添加这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:00:16.850

首先，请指出您的代码中触发此异常的确切行。查看堆栈跟踪，我假设这是 SketcherFrame.java 第 153 行。调试起来会更容易。

但即使没有这个，你的问题似乎是你`AbstractAction`对`Icon`. 抛出异常的任何东西都期望实现，`Icon`而您给了它一个实现`AbstractAction`.

我可以建议两件事：

1.  实施`Icon`为`SketcherFrame$ColorAction`好。无论如何，您都可以实现多个接口。但...
2.  ...在我看来，创建一个既是 an`AbstractAction`又是 an 的类`Icon`是一个糟糕的设计决策。既然您似乎正在使用内部类，只需创建一个内部类实现`Icon`并将其传递给触发该异常的任何东西。

# sql-server - Querying SQL Sever 2008 clustering datamining model

> ID：11814788
> 
> 赞同：0
> 
> 时间：2012-08-05T07:48:22.510
> 
> 标签：sql-server, ssas, data-mining

I know how to [get list of clusters](http://technet.microsoft.com/en-us/library/cc280440%28v=sql.100%29.aspx#bkmk_Query3) and their properties like population and characteristics.

```
SELECT NODE_NAME, NODE_CAPTION ,NODE_SUPPORT, NODE_DESCRIPTION
FROM TM_Clustering.CONTENT
WHERE NODE_TYPE = 5 AND NODE_SUPPORT > 1000 
```

but I need to get a list of links between these clusters. links are shown in image bellow.

![enter image description here](../Images/815553dd68d3ab4b2065e21e33453200.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:26:29.997

我找到了解决方案：

```
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetNodeGraph('ModelName',0) 
```

# java - static method redefining rules

> ID：11814789
> 
> 赞同：3
> 
> 时间：2012-08-05T07:48:34.833
> 
> 标签：java, overriding, static-methods, redefinition

I know it is a pretty beaten topic here but there is something i need to clarify, so bear with me for a minute.

Static methods are inherited just as any other method and follow the same inheritance rules about access modifiers (private methods are not inherited etc.)

Static methods are not over-ridden they are redefined. If a subclass defines a static method with the same signature as one in the superclass, it is said to be shadowing or hiding the superclass's version not over-riding it since they are not polymorphic as instance methods.

The redefined static methods still seem to be following some of (if not all) of the over-riding rules.

**Firstly**, the re-defined static method cannot be more access restricted than the superclass's static method. Why??

**Secondly**, the return types must also be compatible in both the superclass's and subclass's method. For example:

```
class Test2 {
    static void show() {
        System.out.println("Test2 static show");
    }
}

public class StaticTest extends Test2 {
    static StaticTest show() {
        System.out.println("StaticTest static show");
        return new StaticTest();
    }

    public static void main(String[] args) {
    }

} 
```

In eclipse it shows an error at line at: `The return type is incompatible with Test2.show()` Why??

And **Thirdly**, are there any other rules that are followed in re-defining static methods which are same as the rules for over-riding, and what is the reason for those rules?

Thanx in advance!!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T08:04:52.430

[Java 语言规范的第 8.4.8.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)详细说明了隐藏静态方法的要求。总的来说，它与实例方法相同：

1.  隐藏方法的返回类型（在子类中）必须与隐藏方法的返回类型（在超类中）赋值兼容。
2.  隐藏方法的访问修饰符不能比隐藏方法的访问修饰符更严格。
3.  `m`类中的方法在*擦除后*与另一个可访问的方法`T`具有相同的签名是错误的，除非擦除*前*的签名是 method的子签名。*`n``T``m` *`n`**
***   `throws`隐藏、覆盖或实现声明为抛出已检查异常的其他方法的方法的子句存在限制。（基本上，隐藏方法不能声明为抛出未在隐藏/覆盖/实现方法中声明的检查异常。）**

 **我想就是这样，但请参阅 JLS 了解更多详细信息。JLS 没有解释这些规则的基本原理，但它们中的大多数似乎旨在防止多态性问题。您希望在使用父类的任何地方都可以使用子类。**

# c - Return value types doesn't match in C

> ID：11814791
> 
> 赞同：0
> 
> 时间：2012-08-05T07:48:53.687
> 
> 标签：c, arrays, pointers, struct, typedef

I have these 2 structs:

```
#define M 100
#define N 100

typedef struct xml_Element {
pData_Element           data;
pAttr_Element           attr_arr[M];
struct xml_Element      *parent;
struct xml_Element      *children[N];
int                     depth;
int                     num_of_children;
int                     num_of_attr;
} Xml_Element,*pXml_Element;

  typedef struct attrElem {
      char *attrName;
      char *attrValue;
   }Attr_Element,*pAttr_Element; 
```

and I wrote this function:

```
pAttr_Element getXmlAttrArray(pXml_Element node) {
    return node->attr_arr;
} 
```

I have a couple of questions:

1.  Why is it illegal? If I change the function to: `{pAttr_Element* getXmlAttr....}` it works but I don't understand why.

Inside my struct I have a pointer to an array, where every cell is a pointer of type pAttr_Element right? Or it's not a pointer to an array? I'm lost :(

1.  Why is it not working if I change the function to: `Attr_Element getXmlAttrArray(..)`? When I return: `node->attr_arr` what is the return type?

2.  How can I change the struct in order to return a pointer to an array Of pAttr_elements?

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:56:16.117

该`attr_arr`字段是 的数组`pAttr_Element`，而不是`pAttr_Element`。所以你不能把它作为`pAttr_Element`.
在 C 中，数组不是指针，但在许多情况下它们会衰减为指针。当您写入`return node->attr_arr`时，数组衰减为一个指针，然后返回该指针。

该`xml_Element`结构不包含指向数组的指针`pAttr_Element`。它实际上包含 100 个这样的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:25:45.603

关于编码风格的一些想法：

这是一个常见的误解`typedef`。人们使用它就像使用宏定义一样。

理解**存储类分类器**`typedef`非常重要。对于宏定义可以实现的功能，它不是一个方便的名称。当您可以创建一个非常复杂的类型并使用一个简单的名称来引用它时，真正的力量就会得到回报。**`typedef`**

 **例子 ：

```
typedef void (*ptr_to_fun)(char *p) 
```

该语句表示， **可以从现在调用指向以 char 指针为参数且不返回任何内容的函数的指针 ptr_to_fun**

所以我可以有这样的陈述

```
ptr_to_fun ptr = my_fun 
```

但有点遗憾的是，大多数情况下，`typedef`都是用来隐藏`struct`关键字的。在我看来，这是一种不好的做法，因为它完成的很少，但会让新的 c 程序员感到困惑。（这可能是因为面向对象的人群压倒性地抱怨语法胜过语义。）C 可以很容易地面向对象。查看linux内核代码。它有多重继承和东西。他们不需要隐藏`struct`关键字。`typedef`不是为了隐藏`struct`关键字。它有一个更大更重要的应用。

你的代码是...

```
#define M 100
#define N 100

typedef struct xml_Element {
pData_Element           data;
pAttr_Element           attr_arr[M];
struct xml_Element      *parent;
struct xml_Element      *children[N];
int                     depth;
int                     num_of_children;
int                     num_of_attr;
} Xml_Element,*pXml_Element; 
```

所以它说那`xml_Element`实际上是一种新类型`struct xml_Element`。也是`pxml_Element`一种实际上是 type 的新类型`struct xml_Element *`。

现在让我们来解决您的问题。

你的功能是

```
pAttr_Element getXmlAttrArray(pXml_Element node) {
    return node->attr_arr;
} 
```

所以它会返回`pAttr_Element`类型。你已经`typedef`编辑了它。所以它实际上代表类型`struct attrElem *`。

现在你的初始结构有`pAttr_Element`数组。所以你要做的是返回一个数组。你不能退回这个。您可以返回指向该数组的指针。现在你的数组是 type `struct attr_Elem *pAttr_Elem[M]`。它是**指向 struct attr_elem 的指针数组**。因此，与指向该数组的指针兼容的返回类型将类似于 'struct attr_Elem **pAttr_Elem[M]`. after typedef it will be like 'pAttr_Element *`

并且不可能在 c 中返回一个数组。尽管数组可能包含指针（就像您的情况一样）。但这没关系。你不能返回一个数组。

想想为什么 c 不允许这样做。

函数可以通过两种方式返回内容。它可以使用指定用于保存返回值的寄存器。它还可以操作帧指针并将内容推送到堆栈中，这些内容在其帧被遗忘后可以访问（虽然不是标准做法）。

在 x86_64 体系结构中，您有 8 字节宽的寄存器，可以保存本机指针变量。就是这样了。如果要返回数组，则必须返回大块内存的副本。机器无法有效地完成。但是如果你只是返回一个指向它的指针，那么你可以很容易地从调用者那里读取返回的指针。

最后一句话，数组就是数组，指针就是指针。在某些情况下，它们是可以互换的，但是在不考虑上下文的​​情况下认为它们相同是错误的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-05T07:56:36.460

pAttr_Element 是指向 Attr_Element 的指针。

在 C 中，数组是一个指针。

attr_arr 是一个 pAttr_Element 的数组，这意味着它是一个指向一堆 pAttr_Element 的指针，或者换句话说，它是一个指向 Attr_Element 的指针的指针。**

# c++ - 以排序格式在二进制文件中插入数据

> ID：11814795
> 
> 赞同：-1
> 
> 时间：2012-08-05T07:49:16.687
> 
> 标签：c++, file-io, binary

我正在尝试使用文件处理通过二进制文件中的类输入数据。但是我无法做的是以排序的方式写入数据。就像我不知道如何才能唯一地识别我过去在该特定文件中插入的记录之一。为什么我要这样做？因为我希望能够执行删除、修改特定记录等操作。我尝试使用静态变量，但我想保持该值，直到我下次运行程序，这是静态不可能的。顺便说一句，这是课程。

```
class question
{
    private:
    char question[500];
    char option1[25],option2[25],option3[25],option4[25];
    int answernumber;
    public:
    int qno;
    void createquestion(); // Just to to accept data into
                           // question,options,answernumebr.
} 
```

现在唯一的问题是分配 qno 问题编号。我打算用它作为我的主键（这个词用错了）。但是我只是想不通如何在没有用户干预的情况下自动为其分配相应的值？有什么建议么？编辑：-我也尝试这样做--->我想阅读最后输入的记录，然后提取相应的问题编号。然后分配那个数字并给它加1......所以old_qno+1=new_qno......但不幸的是没有很好地解决。因为我所有的问题都被分配为问题 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:13:21.187

您可以使用您编写的文件的大小来计算到目前为止的问题数量。

```
ifstream file("filename");
file.seekg(0, ios_base::end);
streampos file_size = file.tellg();
file.close();
int next_question = file_size/sizeof(question) + 1; 
```

但是你必须小心删除，假设你的文件中有问题 1、2、3、4，然后你删除了问题 3。现在你的文件有 1、2、4，所以上面的方法会说下一个问题是4，但您已经有一个问题 4\. 处理此问题的一种方法是执行*逻辑删除*。不是从文件中实际删除问题，而是将其保留在那里，而是以某种方式标记它，以便您知道它已被删除。例如，您可以将问题编号设置为零。因此，在删除问题 3 后回到上面的示例，您将有 1、2、0、4。现在文件大小方法将正确地说下一个问题是 5。

# c++ - Push.back 可能是向量行为，或者我的 for 语句有问题？

> ID：11814798
> 
> 赞同：0
> 
> 时间：2012-08-05T07:49:45.780
> 
> 标签：c++, visual-c++

```
 bool Customer::checkout(Inventory* inv) {

  double total = 0;

  for( unsigned int i=0; i < _Cart.size(); i++ ) {
      total += (_Cart[i].price * _Cart[i].quant); //

  }

  if( balance < total ) {
      cout << "Checkout Failed. You do not have enough money to afford everything." 
          <<"Please go back and remove items as necessary.\n";
      return false;
  }

  else {

    unsigned int j = 0;                                          //Then, you need to add said food into the purchased vector
    for (j = 0; j < inv->_Purchases.size(); j++)    {                //When you add the food into the purchased vector, you need to look through
        if (inv->_Purchases[j].name == _Cart[j].name) {     //the entire purchased vector to see if the food is already there, 
             inv->_Purchases[j].quant += _Cart[j].quant;     //if so, increment quantity if not, just push the food into the vector
             break;

        }
    }

         if( j == inv->_Purchases.size()) {
             inv->_Purchases.push_back(_Cart[j]);
             cout << "Checkout is Complete.\n";
             return true;
        }

        _Cart.clear();

  }

    balance -= total;
    inv->interval += 1;
    inv->restock( "restock fruits.txt", 2 );
    inv->restock( "restock inventory.txt", 3);
    cout << "Checkout Complete.\n";
    return true;

}

    void Inventory::summary() {
    double total = 0;
    for( unsigned int j=0; j<_Purchases.size(); j++ ) {
      cout << "\nTotal purchases for the store are:";
      cout << "\nFood: " << _Purchases[j].name << " | Quantity: " << _Purchases[j].quant << " | Price: " << _Purchases[j].price << endl;
      total += (_Purchases[j].quant * _Purchases[j].price);
  }
  cout << "Total Purchase: " << total << endl;

    //cout the purchased vector's .name
    //cout the quant 
    //cout the price*quant
    //make a total, and cout it at the end
    } 
```

这是我的主要内容：

```
 #include "foodservice.h"
    #include <iostream>
    using namespace std;

    int main() {
      Inventory Master;
      bool flag;
      Customer Bob("Bob", 12345, 100.00 );
      Customer Joe("Joe", 56789, 50.00 );
      Customer Arjun("Arjun", 98765, 35.89 );
      Customer Randy("Randy", 54689, 30.28);
      Customer Mark("Mark", 76598, 15.18);

  Master.firststock( "inventory.txt" );
  vector<Food> temp = Master._Inv;
  cout <<"Hi, What would you like to buy today?" << endl;
  for(unsigned int i=0; i<temp.size(); i++ ) {
    cout << temp[i].name << " " << temp[i].quant << " " << temp[i].price << endl;
  }

  cout <<"\n";
  Food Apple("Apples", .99, 10);
  Food Oranges("Oranges", .99, 2);
  Food Chips("Chips", 3.00, 2);

  cout <<"\nHi Bob" << endl;
  flag = Bob.addCart(Apple, 7, &Master);
  cout <<"Bob's total purchases are Currently: \n";
  Bob.report();
  flag = Bob.addCart(Oranges, 2, &Master);
  flag = Bob.addCart(Chips, 2, &Master);
  flag = Bob.removeCart(Apple, 3, &Master);
  Bob.report();
  cout <<"Bob, ";
  flag = Bob.checkout(&Master);

  cout <<"\nHi Arjun" << endl;
  flag = Arjun.addCart(Apple, 3, &Master);
  cout <<"Arjun, ";
  Arjun.report();
  flag = Arjun.checkout(&Master);

  Master.summary(); 
```

当我调用摘要（）时；主要，由于某种原因，我似乎只让苹果显示输出，如下所示：

“商店的总购买量为：食物：苹果 | 数量：7 | 价格：0.99 总购买量：6.93”

但是正如你所看到的，我已经将苹果、橙子和薯条都添加到了 Bob 的购物车中，所以这三个都应该显示，但它们不是。我将不胜感激。这仍在进行中。我感觉好像有关系

```
if( j == inv->_Purchases.size()) {
             inv->_Purchases.push_back(_Cart[j]);
             cout << "Checkout is Complete.\n";
             return true;

But i am not sure. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:15:51.610

问题出在您添加已购买商品的循环中。逻辑是错误的。

你写了

```
for (j = 0; j < inv->_Purchases.size(); j++)
    if (inv->_Purchases[j].name == _Cart[j].name)
... 
```

但这`_Purchases[0]`与`_Cart[0]`与等`_Purchases[1]`进行比较`_Cart[1]`。您需要的是两个循环，因此您可以将每个`_Cart`项目与每个`_Purchases`项目进行比较。像这样的东西

```
for (i = 0; i < _Cart.size(); i++)
{
    for (j = 0; j < inv->_Purchases.size(); j++)
    {
        if (_Cart[i].name == inv->_Purchases[j].name)
... 
```

剩下的就交给你了。这将是一个很好的锻炼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:25:42.140

您比较不同数组上的相同索引，`inv->_Purchases[ j ].name == _Cart[ j ].name`并在添加一个元素后返回，如果`_Cart.size() < inv->_Purchases.size()`（缓冲区溢出）或`_Cart.size() == 0`（取消引用空指针）有问题。

所以改变这个：

```
{
    unsigned int j = 0;
    for (j = 0; j < inv->_Purchases.size(); j++)
    {
        if (inv->_Purchases[j].name == _Cart[j].name)
        {
            inv->_Purchases[j].quant += _Cart[j].quant;
            break;
        }
    }
    if( j == inv->_Purchases.size() )
    {
        inv->_Purchases.push_back( _Cart[j] );
        cout << "Checkout is Complete.\n";
        return true;
    }
    _Cart.clear();
} 
```

进入这个：

```
{
    unsigned i, PurchasesBefore = inv->_Purchases.size();
    while( !_Cart.empty() )
    {
        for( i = 0; i != inv->_Purchases.size(); ++i )
        {
            if( inv->_Purchases[i].name == _Cart.back().name )
            {
                inv->_Purchases[i].quant += _Cart.back().quant;
                break;
            }
        }
        if( i == inv->_Purchases.size() )
            inv->_Purchases.push_back( _Cart.back() );
        _Cart.pop_back();
    }
    if( PurchasesBefore != inv->_Purchases.size() )
    {
        cout << "Checkout is Complete.\n";
        return true;
    }
} 
```

注意：我不确定此代码：

```
balance -= total;
inv->interval += 1;
inv->restock( "restock fruits.txt", 2 );
inv->restock( "restock inventory.txt", 3);
cout << "Checkout Complete.\n";
return true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:15:49.703

您的搜索循环似乎不太正确：

*   您使用相同的索引来扫描 _Purchases 和 _Cart
*   当第一个产品与库存匹配时，您就打破了循环

也许匹配的计数器，在循环完成时检查 _Cart.size()，可以更好地工作。

# php - 如何使用 Javascript/PHP 在输入文件类型中获取准确的文件位置

> ID：11814799
> 
> 赞同：0
> 
> 时间：2012-08-05T07:49:55.987
> 
> 标签：php, javascript, jquery, path, filepath

如何从中获取完整路径文件`<input type="file />`？

我不断得到`C:\fakepath\[filename]`

这是我的脚本

```
$(function(){
$('button').click(function(){
alert($('input#path').val());
});
});

<input type="file" id="path" />
<button>Read</button> 
```

我想要做的是将文件路径从 Javascript 传递给 PHP，然后读取/重写它。

* * *

更新：我尝试了以下但我仍然得到了假路径。我正在使用 Chrome。

```
$(function(){
$('button').click(function(){
$.post(
'test2.php', {
path: $('input#path').val()
}, function(data){
alert(data);
}
);
});
}); 
```

test2.php

```
<?php
echo $_POST['path'];
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:54:44.450

您只需要使用 ajax 使用 javascript 发布数据。“假路径”是浏览器的一项安全功能。

[如何解决 C:\fakepath？](https://stackoverflow.com/questions/4851595/how-to-resolve-the-c-fakepath)

# matlab - 使用 GPUstart 在 MATLAB 中出现无效的 MEX 文件错误

> ID：11814802
> 
> 赞同：-4
> 
> 时间：2012-08-05T07:50:52.023
> 
> 标签：matlab, cuda

在 Matlab 中运行 GPUstart 时出现以下错误：

```
Error using ==> moduleinit at 14
Invalid MEX-file 'C:\GPUmat\modules\rand\RANDModuleManager.mexw64': The
specified module could not be found.

Error in ==> GPUmatLoadModules at 18
      moduleinit;

Error in ==> GPUstart at 168
GPUmatLoadModules(fullfile(GPUmatPath,'modules')); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:41:15.937

我在google上发现了一个类似的问题，也许对你有帮助：

[http://www.mathworks.de/support/solutions/en/data/1-X8A09/index.html](http://www.mathworks.de/support/solutions/en/data/1-X8A09/index.html)

> 主题：
> 
> 为什么我在运行从 MATLAB 7.0.1 (R14SP1) 创建的 MEX 文件时收到“找不到指定的模块”错误？问题描述：
> 
> 当我尝试运行我创建的 MEX 文件时，我收到以下错误：??? 无效的 MEX 文件“MEX 文件名”：找不到指定的模块。其中“MEX 文件名”是我的 MEX 文件的名称。但是，编译文件时我没有收到任何错误。
> 
> 解决方案：
> 
> 如果您没有 MEX 函数所依赖的所有必要 DLL 文件，或者您在与编译时不同的 MATLAB 版本上运行 MEX 文件，则可能会发生此错误。
> 
> 为了查看依赖的 DLL 文件并帮助定位此错误的根源，您可以使用第三方产品“Dependency Walker”。Dependency Walker 可以从以下网站下载：
> 
> [http://www.dependencywalker.com/](http://www.dependencywalker.com/)
> 
> 有关如何使用 Dependency Walker 分析您的 MEX 文件的更多信息，请参阅下面随附的解决方案。
> 
> 找到丢失的依赖模块后，将其添加到MEX文件所在的目录或添加到系统搜索路径中。

# java - JPQL 查询连接中列的最大 int 值

> ID：11814803
> 
> 赞同：0
> 
> 时间：2012-08-05T07:51:28.913
> 
> 标签：java, jpa, jpql, toplink

如何使用 JPQL 查询连接的最大值，如下 SQL： `SELECT MAX(MESSAGENUMBER) FROM ARTICLE left join NEWSGROUP on ARTICLE.NEWSGROUP_ID=NEWSGROUP.ID WHERE NEWSGROUP.newsgroup = "gwene.com.economist";`

```
package net.bounceme.dur.usenet.driver;

import java.util.logging.Logger;
import javax.mail.Folder;
import javax.mail.Message;
import javax.persistence.*;
import net.bounceme.dur.usenet.model.Article;
import net.bounceme.dur.usenet.model.Newsgroup;

class DatabaseUtils {

    private static final Logger LOG = Logger.getLogger(DatabaseUtils.class.getName());
    private EntityManagerFactory emf = Persistence.createEntityManagerFactory("USENETPU");
    private EntityManager em = emf.createEntityManager();

    /*
     * SELECT MAX(MESSAGENUMBER) FROM ARTICLE left join NEWSGROUP on
     * ARTICLE.NEWSGROUP_ID=NEWSGROUP.ID WHERE NEWSGROUP.newsgroup =
     * "gwene.com.economist";
     */
    public int getMax(Folder folder) {
        em.getTransaction().begin();
        int max = 5;
        em.getTransaction().commit();
        return max;
    }

    public void persistArticle(Message message, Folder folder) {
        //do all the persistence here?
        em.getTransaction().begin();
        String fullNewsgroupName = folder.getFullName();
        Newsgroup newsgroup = null;
        TypedQuery<Newsgroup> query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :newsGroupParam", Newsgroup.class);
        query.setParameter("newsGroupParam", fullNewsgroupName);
        try {
            newsgroup = query.getSingleResult();
            LOG.fine("found " + query.getSingleResult());
        } catch (javax.persistence.NoResultException e) {
            LOG.fine(e + "\ncould not find " + fullNewsgroupName); 
            newsgroup = new Newsgroup(folder);
            em.persist(newsgroup);  
        } catch (NonUniqueResultException e) {
            LOG.warning("\nshould never happen\t" + fullNewsgroupName);
        }

        Article article = new Article(message, newsgroup);
        em.persist(article); 
        em.getTransaction().commit();
    }

    public void close() {
        em.close();
        emf.close();//necessary?
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:16:35.273

您可以使用此类查询来获取最大消息数：

```
 String queryString = "select max(article.messagenumber) 
from Article article left join Newsgroup newsgroup on article.newsgroup.id=newsgroup.id 
where newsgroup.newsgroup = "gwene.com.economist" 
```

或者您甚至可以在 JPQL 中简化查询：

```
String queryString = "select max(article.messagenumber) 
    from Article article left join article.newsgroup newsgroup
    where newsgroup.newsgroup = "gwene.com.economist" 
```

并执行查询使用这个：

```
int maxNumber = (Integer) entityManager.createQuery(queryString).getSingleResult(); 
```

# synchronization - 彼得森的临界区解决方案是基于软件的解决方案——这是什么意思？

> ID：11814806
> 
> 赞同：3
> 
> 时间：2012-08-05T07:51:58.387
> 
> 标签：synchronization, operating-system

今天我正在阅读有关同步的内容。读到临界区问题的[彼得森解决方案是基于](http://en.wikipedia.org/wiki/Peterson%27s_algorithm)**软件的**解决方案后，我有点困惑。现在我的问题是：“基于软件的解决方案”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:20:12.000

要解决临界区问题并强制互斥，有几种方法：

首先是基于软件的解决方案。该解决方案基于[Peterson 算法](http://www.cs.ru.nl/F.Vaandrager/PV/OPGAVEN/Peterson.html)、[Dekker 算法](http://en.wikipedia.org/wiki/Dekker%27s_algorithm)和[Lamport 面包店算法](http://en.wikipedia.org/wiki/Lamport%27s_bakery_algorithm)（针对多个进程）等算法来保护临界区。这些解决方案仅假设内存访问级别的基本互斥。除此之外，假定不支持硬件、操作系统或编程语言。
软件方法的主要问题是它们的高进程开销和逻辑错误的风险（基于Stallings的操作系统内部）

除了软件解决方案，我们还有硬件解决方案，如[中断禁用](https://stackoverflow.com/questions/3427546/what-is-meant-by-disabling-interrupts)，[比较&交换指令](http://en.wikipedia.org/wiki/Compare-and-swap)和交换指令。这些解决方案采用忙等待，存在饥饿和死锁的可能性。

另一个强制互斥的范例是使用信号量和监视器，它们是由操作系统和编程语言实现的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-04T10:54:46.387

基于软件的解决方案：

1）基于软件的解决方案，从某种意义上说，它们所依赖的硬件的唯一特征是，如果两个进程试图将一个值存储在同一个内存单元中，那么硬件将保证最终值与由两者中的一个写的，尽管没有任何关于订单的保证。

2）在软件解决方案中，我们不能保证变量在给定进程查看它的时间和它本身尝试更改它的时间之间不会被更改。这是因为检查一个值和更改一个值通常需要两个或多个机器指令，并且可能会出现中断（在单处理器上）或来自另一个处理器的访问。这增加了解决方案的复杂性。

基于硬件的解决方案：

1）这里做了特殊的硬件规定，使得执行的操作是原子的（作为单个操作）。

2）许多处理器都有一条指令，该指令在单个原子操作中测试和修改内存中的位置，这样在检查位置和修改位置之间没有其他操作可以干预。例如，英特尔 IA32 具有交换寄存器和内存位置的 XCHG 操作。

# javascript - 通过 AJAX 加载新图像不会获得相同的 jQuery 属性

> ID：11814808
> 
> 赞同：1
> 
> 时间：2012-08-05T07:52:31.457
> 
> 标签：javascript, ajax, jquery, infinite-scroll

我有一个以无限滚动方式加载图片的网页。我还有一个 javascript 可以在图片上添加动画。我面临的问题是加载的新图像不会获得动画属性。

首先我有我的 Javascript 代码

```
<script type="text/javascript">

jQuery(document).ready(
    function() {
        jQuery('.scroll_container').scrollExtend(
            {   
                'target': 'div#scroll_items',           
                'url': '/popular_data.php',
                'newElementClass' : 'mosaic-block cover2',
                'onSuccess' : ''
            }
        );
    }
);

        jQuery(function($){

            $('.cover2').mosaic({
                animation   :   'slide',    //fade or slide
                anchor_y    :   'top',      //Vertical anchor position
                hover_y     :   '40px'      //Vertical position on hover
            });

        });

    </script> 
```

我想做的是变量 OnSuccess 应该调用cover2镶嵌函数。但是我的 Javascript 知识不是很好。但我认为这会解决问题。

我使用的插件是： [http](http://buildinternet.com/project/mosaic/) ://buildinternet.com/project/mosaic/和 [http://contextllc.com/tools/jQuery-infinite-scroll-live-scroll](http://contextllc.com/tools/jQuery-infinite-scroll-live-scroll)

我注意到，如果我将 javascript 附加到 Popular_data.php 文件，那么它将适用于倒数第二张图片，但不会适用于最后一张加载的图片。

# java - 这个关于地图和收藏的作业的答案是什么？

> ID：11814809
> 
> 赞同：0
> 
> 时间：2012-08-05T07:52:54.563
> 
> 标签：java, collections, map

1.  地图集合因其工作方式而被称为字典。
2.  地图集合中的每个条目都涉及一对对象。
3.  在地图集合中，对象与确定对象在地图中存储位置的键相关联。
4.  地图集合中的关键对象可以复制。
5.  具有后进先出存储机制的堆栈可以被视为地图集合。

我认为上面的#1、#2、#3 和#5 是正确的，但我对#5 有疑问。我对么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T08:06:37.877

正如您所说，堆栈是后进先出操作。

另一方面，Map 为您提供了一对可以由键唯一标识的元素（键，值）。

AFAIK，#5 不成立。直到您想使用推送和弹出元素的顺序作为键，这是没有意义的。

# javascript - 将 iframe 放入 div 容器中

> ID：11814810
> 
> 赞同：1
> 
> 时间：2012-08-05T07:53:08.007
> 
> 标签：javascript, jquery, css, iframe, scroll

我有高度为 100% 的 div（容器）；我在这个 div 里面有一个 iframe，还有 height:100%; 现在整个 iframe 页面在 div 中可见。

然而，问题是 iframe 是一个长页面，可以滚动。我根本不希望滚动可见，我只希望本机窗口滚动。

正如您在[示例中看到的](http://jsfiddle.net/8LrZq/)

为了使网站可见，我必须为 iframe 强制滚动 =“yes”。我能做些什么来避免这种情况并且只使用正文（页面）滚动？

有 javascripts 可以解决这个问题，但第二个问题是我正在动态加载 iframe，而不是在页面加载时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:11:21.050

我玩弄了你的代码，我认为这是由于一些边距或填充导致额外的滚动。如果您使用固定大小的 div 和 iframe，它可以按您的意愿工作（我认为）。

看看[这里](http://jsfiddle.net/8LrZq/1/)的 jsfiddle 。

唯一的变化是您的 CSS，将 div 和 iframe 的高度更改为 300px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:39:27.887

尝试关闭您的 DIV 标记并将此代码也放在页面上：

```
html, body {
 height:100%;
} 
```

希望有帮助。

# python - 为什么这个未绑定的变量可以在 Python (pyquery) 中工作？

> ID：11814813
> 
> 赞同：11
> 
> 时间：2012-08-05T07:53:45.323
> 
> 标签：python, variables, pyquery

代码来自pyquery的指南

```
from pyquery import PyQuery
d = PyQuery('<p class="hello">Hi</p><p>Bye</p>')
d('p').filter(lambda i: PyQuery(this).text() == 'Hi') 
```

我的问题是`this`在第 3 行是一个未绑定的变量，并且从未在当前环境中定义，但上面的代码仍然有效。

它如何工作？为什么它不抱怨`NameError: name 'this' is not defined`？

似乎在[https://bitbucket.org/olauzanne/pyquery/src/c148e4445f49/pyquery/pyquery.py#cl-478](https://bitbucket.org/olauzanne/pyquery/src/c148e4445f49/pyquery/pyquery.py#cl-478)发生了一些事情，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T08:15:32.700

这是通过 Python 的`func_globals`魔法完成的，即

> 对保存函数全局变量的字典的引用——定义函数的模块的全局命名空间。

如果您深入研究 PyQuery 代码：

```
def func_globals(f):
    return f.__globals__ if PY3k else f.func_globals

def filter(self, selector):
    if not hasattr(selector, '__call__'):
        return self._filter_only(selector, self)
    else:
        elements = []
        try:
            for i, this in enumerate(self):

                # The magic happens here
                func_globals(selector)['this'] = this

                if callback(selector, i):
                    elements.append(this)

        finally:
            f_globals = func_globals(selector)
            if 'this' in f_globals:
                del f_globals['this']
        return self.__class__(elements, **dict(parent=self)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:21:25.063

其他人已经正确指出了`this`您正在谈论的 lambda 内部的定义方式。

要详细说明，请尝试以下代码：

```
>>> def f():
...     print f_global
... 
>>> f()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in f
NameError: global name 'f_global' is not defined
>>> f.__globals__['f_global'] = "whoa!!" #Modify f()'s globals.
>>> f()
whoa!! 
```

这正是那里正在发生的事情。[在第 496 行，您将看到以下代码](https://bitbucket.org/olauzanne/pyquery/src/c148e4445f49/pyquery/pyquery.py#cl-496)：

```
for i, this in enumerate(self):             #this is the current object/node.
     func_globals(selector)['this'] = this  #func_globals returns selector.__globals__ 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-05T08:18:00.403

这不会引发 NameError ，因为该变量可能在调用实际函数时存在。

```
>>> f = lambda i: some_non_named_var
>>> f(1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 1, in <lambda>
NameError: global name 'some_non_named_var' is not defined 
```

在您调用已隐藏的函数之前，上述内容不会出错。在您展示的示例代码中，他们在调用 lambda函数之前手动设置了一个调用`this`的变量。`func_globals``selector`

# android - sdcard 未显示为文件夹且无法在 eclipse 中的 sdcard 中创建文件夹

> ID：11814823
> 
> 赞同：1
> 
> 时间：2012-08-05T07:56:04.823
> 
> 标签：android, eclipse, emulation, sd-card, android-sdcard

![运行模拟器时的 DDMS 视图](../Images/53c2228a58116b4fa87ce9e77e73b5d2.png)

我试图创建一个 sdcard 并将图像加载到上面。我不知道哪个命令出了问题，现在我的 sdcard 没有显示为文件夹，而是显示在图像中。现在我无法读取 sdcard 或在其中添加文件夹或图像，因为它显示“mkdir 失败，只读文件系统”。我尝试使用新的 eclipse new android sdk，但问题是一样的。也许在我系统的某个地方已经设置了属性。我是android的新手，我被严重卡住了。请帮忙！

![sdcard权限问题](../Images/a2cc58c6c3ccab45976bff20a02c8f2b.png)

我正在尝试直接推送图像..但它在控制台上给了我一个错误..

[2012-08-05 15:14:12] 推送项目失败。[2012-08-05 15:14:12] 空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:08:12.670

查看`mnt`目录中的 sdcard。

sdcard 的实际位置是`/mnt/sdcard`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:08:13.170

转到 mnt 文件夹。有你的sd卡文件夹。还有其他问题吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T01:44:38.033

也许缺少 AndroidManifest.xml 中的权限？我知道我做到了:)

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

[http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)

# mod-wsgi - 在已经使用 mod_wsgi 运行 PHP 的 Apache 下运行 Python

> ID：11814827
> 
> 赞同：0
> 
> 时间：2012-08-05T07:56:44.503
> 
> 标签：mod-wsgi

我正在使用 apache web-server 在服务器上运行 PHP。我的网站运行良好。

现在我需要在我的网络服务器上运行 python 而不会影响 PHP。

安装mode_wsgi后，我使用以下链接在apche下的httpd.conf中配置mod_wsgi。

[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)

我更新的配置如下：

```
<VirtualHost *:80>

    ServerName www.quipmate.com
    ServerAlias quipmate.com
    ServerAdmin webmaster@quipmate.com

    DocumentRoot /usr/local/www/documents

    Alias /robots.txt /usr/local/www/documents/robots.txt
    Alias /favicon.ico /usr/local/www/documents/favicon.ico

    Alias /media/ /usr/local/www/documents/media/

    <Directory /usr/local/www/documents>
    Order allow,deny
    Allow from all
    </Directory>

    WSGIDaemonProcess quipmate.com processes=2 threads=15 display-name=%{GROUP}
    WSGIProcessGroup quipmate.com

    WSGIScriptAlias / /usr/local/www/wsgi-scripts/myapp.wsgi

    <Directory /usr/local/www/wsgi-scripts>
    Order allow,deny
    Allow from all
    </Directory>

</VirtualHost> 
```

更新并重新启动 apache 后，我的 web 文档根目录中的 index.php 文件出现 404 错误。此外，它对直接在浏览器上输出的 python 脚本没有任何帮助。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:46:02.153

这正是您使用 WSGIScriptAlias 将 WSGI 应用程序挂载到网站根目录时所期望的，从而隐藏了网站上的所有其他内容。

您可能需要使用本节末尾描述的 AddHandler 和 mod_rewrite 解决方案：

[http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines#The_Apache_Alias_Directive](http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines#The_Apache_Alias_Directive)

这将允许 PHP 文件具有优先权，并且仅在请求未得到满足时才进入 WSGI 应用程序。

# sharepoint - 如何使用 SharePoint Client OM 读取 WebPart 内容？

> ID：11814829
> 
> 赞同：1
> 
> 时间：2012-08-05T07:56:59.630
> 
> 标签：sharepoint, com, web-parts

我是 SharePoint 开发的新手，并尝试使用 SharePoint 2010 客户端对象模型读取 WebPart 的内容。这是我查询 WebPart 内容的方法：

```
ClientContext ctx = new ClientContext("http://foo");
File home = ctx.Web.GetFileByServerRelativeUrl("/SitePages/Page.aspx");
var wpm = home.GetLimitedWebPartManager(PersonalizationScope.Shared);

var query = wpm.WebParts.Include(wp => wp.Id, wp => wp.WebPart));
var webPartDefenitions = ctx.LoadQuery(query);

ctx.ExecuteQuery(); 
```

问题是，我得到的结果是所有 WebPart 的列表，其中仅包含该 WebPart 的 ID 和一些基本信息（例如标题），但我需要阅读 WebPart 本身的 XML 内容而不是阅读基本定义该 WebPart 的。

**阅读WebPart 内容**的最佳方式是什么？

提前感谢您的帮助。

* * *

PS。

根据 Trikks 的评论，我检查了 webpart 内容。似乎内容未绑定到任何类型的列表或库。那里有一些自定义数据属性。这是示例：

```
<webPart xmlns="http://schemas.microsoft.com/WebPart/v3">
    <metaData>
      <type name="NS.SPS2010.Internet.WebParts.VenueDetails.VenueDetails, NS.SPS2010.Internet.WebParts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=89259c78cb06b3885" />
    </metaData>
    <data>
      <properties>
        <property name="WhenDetail" type="string">Monday 12:PM</property>
        <property name="WhereDetail" type="string">London</property>
      </properties>
    </data>
  </webPart> 
```

我真正在寻找的是访问**WhenDetail**和**WhereDetail**属性的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:25:18.397

根据维克托·维伦的说法，

在使用 Web 部件时，客户端对象模型相当有限。可以完成添加和删除 Web 部件等基本操作以及更改Web 部件的**某些**默认属性（如标题）。**无法访问自定义 Web 部件属性。**

无法访问自定义 Web 部件属性。无法访问 Web 部件上的自定义属性或方法。如果您需要对远程客户端进行此类自定义，则必须将自己的远程 API 添加到 SharePoint。

更多详情请点击[这里](http://www.manning.com/wilen/samplechapter11.pdf)。

为了获得所需的 webpart 详细信息，我使用了两种方法的组合。首先，我使用以下代码获取 Web 部件详细信息列表：

```
ClientContext ctx = new ClientContext("http://foo");
File home = ctx.Web.GetFileByServerRelativeUrl("/SitePages/Page.aspx");
var wpm = home.GetLimitedWebPartManager(PersonalizationScope.Shared);

var query = wpm.WebParts.Include(wp => wp.Id, wp => wp.WebPart));
var webPartDefenitions = ctx.LoadQuery(query);

ctx.ExecuteQuery(); 
```

然后调用Webpartpages Web服务的GetWebPart2方法下载内容：

```
var client = new WebPartPagesWebService();
client.Url = siteRootAddress+"/_vti_bin/Webpartpages.asmx";
client.Credentials = credential;
// webPartId is a property of WebPart Defenition from the above code
var webPartXmlString = client.GetWebPart2(pageAddress, 
                                               webPartId, 
                                               Storage.Shared,
                                               SPWebServiceBehavior.Version3);

var webPartNode = XElement.Parse(webPartXmlString); 
```

# java - 使用 sendredirect 时如何删除自动附加的查询字符串？

> ID：11814830
> 
> 赞同：-1
> 
> 时间：2012-08-05T07:57:13.700
> 
> 标签：java, jsp, jakarta-ee, servlets

当我使用 HttpServletResponse.sendRedirect() 时，我发现总是有一些查询字符串附加到转发页面。重定向时如何删除那些查询字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:37:05.157

当您看到您正在重定向时，您确实正在重定向到另一个资源，该资源可能在您的 web 应用程序中，也可能不在您的 web 应用程序中。这包括在标头中使用重定向 URL 向客户端发送响应。客户端必须能够获取重定向 URL 并点击它。

另一方面，转发是将相同的请求转发到同一个 webapp 中的另一个资源。这不涉及往返。因此，本质上，除非您在重定向时在 URL 中传递任何查询参数，否则它不会有任何查询参数。如果您没有传递任何查询参数，那么您可能必须探测客户端是否添加了任何查询参数本身。您可能还需要检查您没有使用`encodeRedirectURL`.

# javascript - 4 个切换按钮互相说 javascript，但没有一个是好的听众

> ID：11814832
> 
> 赞同：2
> 
> 时间：2012-08-05T07:57:18.373
> 
> 标签：javascript, jquery, return-value

***在底部更新***

有 4 个`divs`设置为`toggle buttons`. 当一个按钮被打开时：

> - 它是一个按下按钮的动画，
> 
> -它检索一些内容并将该内容放入一个盒子中，然后
> 
> - 它返回一个值 1 到一个数组。
> 
> （没问题。）

**问题：** 当已经按下一个按钮按钮时，我不明白如何关闭第一个按钮而不关闭另一个按钮或影响其他按钮。如何将一个按钮的输出传递给其他按钮，以便他们知道打开时必须关闭*谁？*

到目前为止，我的解决方案是创建 2 个数组：

```
var arrayValues [ a, b, c, d]; //the values of each button state: [0,0,0,0] <-all off | all on-> [1,1,1,1]
var addedValues = [a + b + c + d]; //the values of each array item added together: [0+0+0+0]= 0 <-all off | all on-> [1,1,1,1]=4 
```

接着

```
if (addedValues = 0) {
console.log("cool, nothing is pressed yet. I am going to return true, but where does that return value go? How can I access it?");
return true;

} else if (addedValues > 1) {
console.log("ok I now know that at least one button has already been pressed, but how can I tell the other buttons which one was already pressed?");
} 
```

例如，如果第一个按钮在 arrayValues = [1,0,0,0] 上切换

现在第二个按钮已打开，因此它显示 arrayValues = [1,1,0,0]

但是我怎样才能将这些信息传递到所有按钮中呢？下一部分显然有缺陷，但这是我唯一能想到的：

```
} else if(addedValues >= 2) {

        arrayValues[0] = arrayValues[0] - 1;
        arrayValues[1] = arrayValues[1] - 1;
        arrayValues[2] = arrayValues[2] - 1;
        arrayValues[3] = arrayValues[3] - 1;

} 
```

所以现在，唯一不为负的值是处于活动状态的两个按钮......但这无济于事，因为我们已经知道了。如何在不影响任何其他按钮的情况下告诉按钮从哪个按钮中减去 1？

**更新**：在上下文中查看疯狂[http://jsfiddle.net/Luhring/EjW7A/23/](http://jsfiddle.net/Luhring/EjW7A/23/)

***更新： *** 澄清一下：这些按钮不仅会切换它们的外观，它们还会改变页面上显示的其他内容：当您单击每个按钮时，内容会发生变化。每个按钮都有 1 组原始内容，可通过按钮打开/关闭。就像用遥控器改变电视屏幕上的频道一样。

因此，如果按下按钮 1，当按下按钮 2 时，按钮 1 必须关闭（删除其内容并将动画恢复到其原始位置）才能显示按钮 2 的内容。

向@nbrooks 大喊大叫，因为他编写了 4 行代码，这些代码或多或少与我在 +100 中所做的一样多。仍然没有解决，但他的效率比我的高得多（你可以在这里看到他的版本：http: [//jsfiddle.net/EjW7A/20/](http://jsfiddle.net/EjW7A/20/)））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:05:36.487

如果您使用 JavaScript 进行提交，那么这应该是一种更简单的方法：http: [//jsfiddle.net/EjW7A/15/](http://jsfiddle.net/EjW7A/15/)

**HTML**

```
<div id="a" class="a1 toggleButton">
    <p>A</p>
</div>

<div id="b" class="b1 toggleButton">
    <p>B</p>
</div>

<button id ="test">test</button>​ 
```

**JavaScript**

```
jQuery(function() {
    jQuery(".toggleButton").click(function() {
        jQuery(".toggleButtonToggled").removeClass("toggleButtonToggled");
        jQuery(this).addClass("toggleButtonToggled");
    });

    jQuery("#test").click(function() {
        var value = jQuery(".toggleButtonToggled:first").attr('id');
        alert("Toggled button is: "+ value);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:25:37.220

[**根据新要求更新了演示：http:**](http://jsfiddle.net/EjW7A/24/) [//jsfiddle.net/EjW7A/24/](http://jsfiddle.net/EjW7A/24/)

```
$(function() {
    $('.plain').click(function() {
        var newClassName = $(this).is('.selected') ? '' : this.id;
        if ($(this).is('#content')) return;
        $(this).toggleClass('selected', 1000);
        $('#content').attr('class', 'plain '+newClassName);
        $('.selected').not(this).removeClass('selected');       
    });
});​ 
```

* * *

[**更新您的小提琴演示**](http://jsfiddle.net/EjW7A/18/)

最好的方法是给元素一个公共类，你可以绑定一个点击处理程序和一个 css 规则。这将完成您一次只按下一个按钮的功能，以及在不影响其他按钮的情况下打开/关闭它的能力。

Javascript（jQuery）：

```
$(function() {
    $('.plain').click(function() {
        $(this).toggleClass('selected');
         $('.selected').not(this).removeClass('selected');       
    });
});​ 
```

HTML

```
<div id="a" class="plain">
    <p>A</p>
</div> 
```

CSS

```
.plain {
    width: 200px; height: 200px; margin: 20px; text-align:center; float: left;
    font-size: 100px; color:#fff; background-color:red;
}
p { margin-top: 25%; margin-bottom:25%; }
.selected { background-color: blue; } 
```

# android - 退出子活动时如何完成所有活动

> ID：11814851
> 
> 赞同：1
> 
> 时间：2012-08-05T08:00:52.290
> 
> 标签：android, android-activity, exit

示例：我有 3 个活动，A、B 和 C。从 Activity AI 打开 Activity B，然后从 B 打开 Activity C。然后我通过代码退出应用程序：

```
Intent intent = new Intent(Intent.ACTION_MAIN); 
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent);
finish();
System.exit(0); 
```

我将此代码用于退出应用程序。但是当重新启动应用程序时，再次回到最近的活动。我的问题，退出应用程序时如何完成所有活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:31:22.267

每当您从一个活动调用另一个活动时，请尝试使用以下标志清除活动堆栈：

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:39:24.843

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//***Change Here***
startActivity(intent);
finish();
System.exit(0); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-05T09:50:21.777

您必须首先通过以下代码回到您的主要活动：

```
Intent home = new Intent(this, mainActivity.class);
home.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(home); 
```

然后您将从 mainActivity 退出您的应用程序，如下所示：

```
finish();
System.exit(0); 
```

希望能帮助到你。

# c# - 如何在服务器端将 rtf 和 html 转换为纯文本

> ID：11814852
> 
> 赞同：0
> 
> 时间：2012-08-05T08:01:20.137
> 
> 标签：c#, html, parsing, rtf, text-processing

我需要处理传入电子邮件的正文。它们可以是纯文本、HTML 和 RichText 格式。我需要对正文执行文本匹配算法，但 HTML 和 RichText 标记会使它们混淆。有没有办法获取纯文本数据？

我正在寻找一种可以自动解析这两种格式的方法（比如当我在 Total Commander 中按 F3 时，它将在 HTML 和 RTF 文件中显示文本）。

商业解决方案也是一种选择。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:04:24.310

对于 html，我会使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。例如，

```
HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
document.LoadHtml(html);

foreach(var node in document.DocumentNode.Descendants("script").ToList())
{
    node.Remove();
}

var text = document.DocumentNode.InnerText; 
```

对于 rtf，我会将其加载到 RichTextBox 并另存为文本。

使用 IFilter 接口（如[这里](http://www.codeproject.com/Articles/13391/Using-IFilter-in-C)和[这里](http://www.codeproject.com/Articles/31944/Implementing-a-TextReader-to-extract-various-files)）可以是另一种选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:18:03.697

免责声明：我是这些库的开发者

是的，HTML 可能包含 Unicode 符号，例如“&#XXX;” 或“”。此外，例如，如果 HTML 有一个包含 3 列和 2 行的表格，最好将此结果视为表格文本：

1 2 3

4 5 6

而不是“1 2 3 4 5 6”。

这些[.Net 库可以帮助您将 HTML 和 RTF 转换为 Text](http://www.sautin.com/products/components/htmtortf/htmltortf_component_product_tour.php)。

示例 #1 - 将 HTML 转换为 Unicode 文本：

```
 SautinSoft.HtmlToRtf h = new SautinSoft.HtmlToRtf();
        h.OutputFormat=SautinSoft.HtmlToRtf.eOutputFormat.TextUnicode;
        string text = h.ConvertString(htmlString); 
```

示例 #2 - 将 RTF 转换为 Unicode 文本：

```
 SautinSoft.RtfToHtml r = new SautinSoft.RtfToHtml();
        r.OutputFormat = SautinSoft.RtfToHtml.eOutputFormat.Text;
        string text = r.ConvertString(rtfString); 
```

# database - 在 Access SQL 查询中比较日期

> ID：11814853
> 
> 赞同：16
> 
> 时间：2012-08-05T08:01:21.370
> 
> 标签：database, ms-access, ms-access-2007

我在使用 Access sql 查询时遇到问题。我是新手，所以新手很难弄清楚语法。以下是我的查询。

```
SELECT *
FROM BookingMaster WHERE JourneyDate = #01/08/2012#; 
```

以下是各自的表格数据：

```
BookingID   BookingDate    JourneyDate   CustomerName   TelephoneNo  Address
5            01-08-2012     01-08-2012         roshan         78889     hjgj 
```

即使存在 01/08/2012 旅程日期的数据，上面列出的查询也会返回 0 个结果。

谁能帮帮我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-05T08:04:34.857

除非您在美国地区工作，否则最好对日期使用年、月、日格式：

```
SELECT *
FROM BookingMaster where JourneyDate = #2012/08/01#; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:11:46.320

试试这个..

```
SELECT * FROM BookingMaster where (JourneyDate >= #01/08/2012#) and (JourneyDate < #01/09/2012#); 
```

# php - 验证码无法使用 php

> ID：11814858
> 
> 赞同：1
> 
> 时间：2012-08-05T08:03:03.460
> 
> 标签：php, image, captcha, imagettftext

我的验证码不起作用，我可以在后面调出线条，但数字在验证码中不可见。该代码在本地主机上运行完美，但在我的托管网站上却没有。

这是代码：

```
<?php
session_start();
header('Content-type: image/jpeg');

$text= $_SESSION['secure'];

$font_size =30;
$image_width= 110;
$image_height=40;

$image=imagecreate($image_width,$image_height);
imagecolorallocate($image, 255, 255, 255);
$text_color = imagecolorallocate($image, 0, 0, 0);

for($x=1; $x<=30; $x++){
$x1 = rand(1,100);
$x2 = rand(1,100);
$y1 = rand(1,100);
$y2 = rand(1,100);
imageline($image, $x1, $x2, $y1, $y2, $text_color);
}

imagettftext($image, $font_size, 0, 15, 30, $text_color, 'font.TTF', $text);
imagejpeg($image);  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:18:03.480

我评论了那行，我收到了这个警告和通知：

```
Notice: Undefined index: secure in F:\xampp\htdocs\captcha.php on line 4 
Warning: imagettftext() [function.imagettftext]: Invalid font filename in F:\xampp\htdocs\captcha.php on line 23 
```

所以首先检查字体位置。然后检查 $_SESSION['secure'] 值，如果它是空的，检查为什么该会话是空的。希望它可以帮助你。

编辑： 1\. 我将代码保存在本地主机的 php 文件中。2\. commneted line 包含 header('Content-type: image/jpeg'); 因为它将页面 mime-type 设置为 jpg 3\. 我阅读了通知和警告。无论如何，我认为您的问题是空会话值或检查 gd 在您的服务器中是否启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:19:16.000

我猜你缺少虚拟主机服务器上的字体。尝试一个免费的，它可能安装在服务器上，或者只是将字体上传到您的网络主机，然后设置字体文件的正确路径

# c# - 从不引用 UI 控件的单独线程调用 UI 方法

> ID：11814859
> 
> 赞同：2
> 
> 时间：2012-08-05T08:03:09.527
> 
> 标签：c#, user-interface, multithreading

我有一个公开公共事件的类。GUI 上有各种控件可以使用此事件注册其事件处理程序以更改控件，例如文本或背景颜色等。但是，公开事件的类不会保留对那些可能具有的 UI 控件的任何引用添加了他们的事件处理程序。

在执行期间，一个单独的前台线程执行一个方法，该方法将调用（触发）公共事件。这将调用已向事件注册的事件处理程序。

问题是事件处理程序是在前台线程而不是 UI 线程上调用的。如何在不引用 UI 控件的情况下编组对 UI 线程的调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:07:36.097

你需要决定什么是编组：事件引发者或事件处理程序。如果您不希望事件引发者了解有关线程的任何信息 - 例如通过[`ISynchronizeInvoke`](http://msdn.microsoft.com/en-us/library/system.componentmodel.isynchronizeinvoke.aspx)或[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)- 然后让事件处理程序改为执行编组。

基本上，事件引发者应该保证它会在特定上下文中引发所有事件（可以在构造时通过 给予它`SynchronizationContext`）或者它应该明确表示它*没有*这样做，并将责任放在处理程序上。后者是更灵活的方法 - 这意味着如果您有多个具有不同需求的处理程序，每个处理程序都可以根据自己的需要做适当的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T08:41:24.267

如果您关心的是将事件调用编组到您的（唯一）UI 线程，那么这[`ISynchronizeInvoke`](http://msdn.microsoft.com/en-us/library/system.componentmodel.isynchronizeinvoke.aspx)就是您所需要的。

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);

    Form mainForm = new MyForm();

    // Initialize the service.
    MyService service = new MyService(mainForm);

    Application.Run(mainForm);
}

public class MyService
{
    public event EventHandler MyEvent;

    private readonly ISynchronizeInvoke synchronizeInvoke;

    public MyService(ISynchronizeInvoke synchronizeInvoke)
    {
        this.synchronizeInvoke = synchronizeInvoke;
    }

    private void OnMyEvent()
    {
        if (MyEvent != null)
        {
            if (synchronizeInvoke.InvokeRequired)
            {
                synchronizeInvoke.BeginInvoke(new Action(() => MyEvent(this, EventArgs.Empty)), null);
            }
            else
            {
                MyEvent(this, EventArgs.Empty);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T08:11:58.373

您可以使用 Application.OpenForms() 获取打开的表单。

```
Form form = System.Windows.Forms.Application.OpenForms().FirstOrDefault();
if (form != null)
    form.Invoke((MethodInvoker)delegate(){ event(); }); 
```

# git - 关于 GIT 命令的使用

> ID：11814874
> 
> 赞同：0
> 
> 时间：2012-08-05T08:05:08.373
> 
> 标签：git

我的仓库中有一个目录树。我`git add -A`第一次做。

现在我错误地删除了一个包含文件的目录并执行以下操作：

```
git add -A 
```

我也丢失了我的仓库中的整个目录。或者有没有办法找回我丢失的目录？

还假设我这样做`git add .`我不会丢失我的目录，对吗？所以我认为没有办法使用git跟踪文件的删除？

例如，我昨天提交时删除了 3 个文件，如果我想回到昨天所有文件和目录的版本，我会看到删除的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:00:49.587

我对你的问题的理解是这样的：

1.  您有一个`git`包含一些文件和目录的存储库。
2.  您最初添加了所有内容 ( `git add -A`)。想必你也承诺了。
3.  您从存储库中删除一个目录 ( `rm -rf dir`)，然后添加更改 ( `git add -A`)。我假设你然后承诺。

如果是这种情况，那么是的，您已经从存储库中删除了该目录。从`git-add`手册页：

```
 -A, --all
   Like -u, but match  against files in the working tree in addition
   to the index. That means that it will find new files as well as staging modified
   content and removing files that are no longer in the working tree. 
```

`git add -A`将**所有**更改添加到存储库 - 添加，删除，很多。

> 所以我认为没有办法使用git跟踪文件的删除？

我不确定你的意思是什么。您可以从 git 跟踪文件的删除。阅读手册页`git-rm`。或者，删除一个文件，然后运行`git add -A`​​:`git`会将删除的文件添加到索引中，允许您提交删除。所以删除被跟踪。

> 还假设我做了一个 git add 。我不会丢失我的目录，对吗？

您不会将目录的删除暂存到`git`索引中，对。但是，该目录仍然从`git`工作目录中消失，因为您删除了它。

> 例如，我昨天提交时删除了 3 个文件，如果我想回到昨天所有文件和目录的版本，我会看到删除的文件吗？

您将文件添加到存储库。`git add file; git commit -m "added file"`. 我们称之为 commit `A`。
接下来删除该文件，并将更改提交到存储库：（`rm file; git add -A; git commit -m "Deleted file"`另一种方式是`git rm file`）。我们称之为 commit `B`。

如果您签出 commit `B`，则文件不存在。您删除了它们，提交反映了这一点。
如果你 checkout commit `A`，文件就在那里。该提交包含文件。

要回答您的问题：

> 例如，我昨天提交时删除了 3 个文件，如果我想回到昨天所有文件和目录的版本，我会看到删除的文件吗？

不。您不会看到昨天提交的文件，因为您已经提交了删除。但是，如果您在昨天提交*之前*签出提交，则文件就在那里。

# php - 获取/设置多维数组数据的函数，如 getData('my.multi.array')

> ID：11814876
> 
> 赞同：1
> 
> 时间：2012-08-05T08:05:13.273
> 
> 标签：php, arrays, class, function, multidimensional-array

我试图在这样的类中动态地获取数据：

```
Class foo
{
    private $config=array();

    public __construct(){    
        $this->config['site']['title'] = 'XXXXX';
        $this->config['site']['favicon'] = 'XXXXX.ico';
        $this->config['site']['keywords'] = array('page','cute','other');        
        $this->config['otherthing'] = 'value';
        /**etc**/
    }

    public function set($name,$value)
    {
        $tmp = explode('.',$name);
        /** i dont know what i can do here **/
    }

    public function get($name)
    {
        $tmp = explode('.',$name);
        /** i dont know what i can do here **/
    }
}

$thing = new foo;
$this->set('site.keywords',array('other','keywords'));//this change a data inside foo->config['site']['keywords']

echo $this->get('site.title'); // gets data inside foo->config['site']['title']
echo $this->get('otherthing'); // gets data inside foo->config['otherthing'] 
```

数组维度可以动态更改，我想在 foo->config 中设置/检索数据，顺便调用数组：函数（fist.second.third.four.etc）。

编辑：

我可以使用explode 创建一个函数，我探索了这种可能性，但是如果我使用这样的函数：

```
function get($name)
{
    $tmp = explode('.',$name);
    if(isset($this->config[$tmp[0]][$tmp[1]]))
        return $this->config[$tmp[0]][$tmp[1]];
    return '';
} 
```

当我需要在 3 维（$this->config[one][two][tree]）或一维（$this->config[one]）中获取数组值时，函数无法处理结果。我想获得 N 维数组。

我也尝试过这个解决方案： function nameToArray($name) { $tmp = explode('.',$name); $return = '';

```
 foreach($tmp as $v)
    {
        $return .= "['{$v}']";

    }

    return 'config'.$return;
}
function set($name,$value)
{
    $this->{$this->nameToArray} = $value;
}

$foo->set('site.favicon','something.ico'); 
```

但这不会在 $foo->config 中编辑数组，而是在 $this 中创建一个新值，字面意思是 config['site']['favicon']。

我不知道我该怎么做，我尝试了很多方法，但我无法得到预期的结果。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:58:30.693

使用[引用](http://php.net/language.references)来引用数组中最新的已知点，并在每一步更新它：

```
$ref = &$this->config;
$keys = explode('.', $name);
foreach ($keys as $idx => $key) {
    if (!is_array($ref)) {
        // reference does not refer to an array
        // this is a problem as we still have at least one key to go
    }
    if (!array_key_exists($key, $ref)) {
        // key does not exist
        // reaction depends on the operation
    }
    // update reference
    $ref = &$ref[$key];
} 
```

`if`分支取决于操作。下面是 getter 和 setter 的示例：

```
public function get($name) {
    $ref = &$this->config;
    $keys = explode('.', $name);
    foreach ($keys as $idx => $key) {
        if (!is_array($ref)) {
            throw new Exception('key "'.implode('.', array_slice($keys, 0, $idx-1)).'" is not an array');
        }
        if (!array_key_exists($key, $ref)) {
            throw new Exception('key "'.implode('.', array_slice($keys, 0, $idx)).'" does not exist');
        }
        $ref = &$ref[$key];
    }
    return $ref;
}
public function set($name, $value) {
    $ref = &$this->config;
    $keys = explode('.', $name);
    foreach ($keys as $idx => $key) {
        if (!is_array($ref)) {
            throw new Exception('key "'.implode('.', array_slice($keys, 0, $idx)).'" is not an array but '.gettype($ref));
        }
        if (!array_key_exists($key, $ref)) {
            $ref[$key] = array();
        }
        $ref = &$ref[$key];
    }
    $ref = $value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:27:52.653

我有另一个基于 eval 的解决方案我只是用括号连接字符串

```
<?php
Class foo {
    private $config=array();

    function __construct(){    
        $this->config['site']['title'] = 'testing';
        $this->config['site']['favicon'] = 'XXXXX.ico';
        $this->config['site']['keywords'] = array('page','cute','other');        
        $this->config['otherthing'] = 'value';
        /**etc**/
    }

    public function set($name,$value)
    {
        $tmp = explode('.',$name);
        $array_levels = "['";
        foreach($tmp as $key) {
            $array_levels .= $key."']['";
        }
        $array_levels = substr($array_levels, 0, -2);
        eval('$this->config'.$array_levels.' = $value;');
    }
    public function get($name)
    {
        $tmp = explode('.',$name);
        $array_levels = "['";
        foreach($tmp as $key) {
            $array_levels .= $key."']['";
        }
        $array_levels = substr($array_levels, 0, -2);
        eval('$value = $this->config'.$array_levels.';');
        return $value;
    }
}
$thing = new foo;
$thing->set('site.keywords',array('other','keywords'));
echo $thing->get('site.title'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:44:45.080

正如您[在此处](http://php.net/manual/en/function.explode.php)看到的，该函数`explode`接受字符串并返回一个数组。所以这是你需要做的：

```
public function set($name,$value)
    {
        $tmp = explode('.',$name); //$tmp will now contain an array, so if $name = 'site.keywords'
                                   //$tmp[0] will contain 'site' and $tmp[1] = 'keywords'
        //if you send 'otherthing' as $name, then $tmp[1] will have no value
        if(isset($tmp[1])){
                $this->config[$tmp[0]][$tmp[1]] = $value; // this is like saying  $this-config['site']['keywords'] = $value
        }
        else{
            $this->config[$tmp[0]] = $value; 
        }
    } 
```

为了得到：

```
public function get($name)
    {
        $tmp = explode('.',$name);
        if(isset($tmp[1])){
            return $this->config[$tmp[0]][$tmp[1]];
        }
        else{
           return $this->config[$tmp[0]];
        }

    } 
```

# ios - 向 SQLite 数据库插入行时出错 - iOS（我认为它与数据类型有关）

> ID：11814880
> 
> 赞同：0
> 
> 时间：2012-08-05T08:05:41.813
> 
> 标签：ios, objective-c, database, sqlite, sqldatatypes

在我的代码中，我试图在我创建的 SQLite 数据库中的表中插入一个新行。现在，当我创建打开数据库时，我检查它是否正确打开，但是当我尝试将一行插入其中一个表时，它不起作用。部分代码检查文档文件夹中是否已存在数据库文件，如果不存在则创建一个。现在我认为数据类型可能存在问题......这会产生错误吗？这是代码，请注意插入到表中的值是这样定义的对象的属性：

```
@property (nonatomic) int connectionRefNumber;
@property (nonatomic) int otherUserID;
@property (strong, nonatomic) NSString * otherUserName;
@property (strong, nonatomic) NSString * otherUserProfilePicturePath;
@property (strong, nonatomic) NSDate * connectionDate;
@property (nonatomic) BOOL * otherUserFB;
@property (nonatomic) BOOL * otherUserTW;
@property (nonatomic) BOOL * otherUserHP; 
```

打开数据库并填充表的数据库方法（数据库本身被创建，如果不存在，则在另一种方法中）。这是我为处理所有与数据库相关的任务而创建的特殊类的一部分：

```
-(void)initDatabase {
NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
/*NSString * documentsDirectory = [paths objectAtIndex:0];
NSString * databasePath = [documentsDirectory stringByAppendingPathComponent:@"sqlite.db"];*/
NSArray * pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString * databasePath = [[pathArray objectAtIndex:0] stringByAppendingPathComponent:@"sqlite.db"];

BOOL databaseAlreadyExists = /*[[NSFileManager defaultManager] fileExistsAtPath:databasePath];*/NO;

if (sqlite3_open([databasePath UTF8String],&databaseHandle) == SQLITE_OK){
    NSLog(@"DATABASE OPEN");
    if (!databaseAlreadyExists){
        const char * sqlStatement = "CREATE TABLE IF NOT EXISTS CONNECTIONS (CONNECTIONREFNUMBER INTEGER PRIMARY KEY  AUTOINCREMENT , OTHERUSERID INTEGER, OTHERUSERNAME VARCHAR, OTHERUSERPICTUREPATH VARCHAR, CONNECTIONDATE DATETIME, OTHERUSERFB BOOL, OTHERUSERTW BOOL, OTHERUSERHP BOOL)";
        char *error;
        if (sqlite3_exec(databaseHandle, sqlStatement, NULL, NULL, &error) == SQLITE_OK) {
            NSLog(@"DATABSE AND TABLES CREATED");
        } else {
            NSLog(@"ErrorL %s", error);
        }
    }
}else{
    NSLog(@"cant open database");
} 
```

}

最后，我用来调用此方法的代码，这**可能是我在数据类型方面做错了**：

```
ConectionsDataController * dataController = [[ConectionsDataController alloc] init];
//[dataController initDatabase];
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
int ID = 1;
int RefNumber = 1;
BOOL fb = YES;
BOOL tw = YES;
BOOL hp = YES;
NSDate *connectionDate = [dateFormatter dateFromString:@"1955-02-24"];
connectionData * connectionObject = [[connectionData alloc]initWithConnectionRefNumber:&RefNumber    otherUserID:&ID otherUserName:@"John Jones" otherUserProfilePicturePath:@"/1" connectionDate:connectionDate otherUserFB:&fb otherUserTW:&tw otherUserHP:&hp];
[dataController insertConnectionToDatabase:connectionObject]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:25:52.630

刚让别人看了我的代码，他发现了问题，所以我决定在这里分享：

在数据库中，我将其中一列定义为 PRIMARY KEY。这意味着每一行都必须是唯一的。现在出于测试目的，我只使用了一个，所以它工作了一次，但是当我再次尝试时（仍然是 1），它不是唯一的，因此它不能作为主键列的值。

只是在开发和调试时要看的东西，因为它可能会被忽略，尤其是在使用数据库方面没有太多经验的情况下。

# joomla - k2 限制用户可以创建的项目数

> ID：11814886
> 
> 赞同：2
> 
> 时间：2012-08-05T08:06:57.220
> 
> 标签：joomla, limit, joomla-k2

我正在建立一个 K2 网站，我想在其中限制每个用户的项目数量。在这种情况下，有“学校”与“新闻”、“图片”、“事件”。

*   学校（最多 1 个）
    *   新闻 (> 1)
    *   图片 (> 1)
    *   事件 (> 1)

每个学校应该只有一个 K2 学校项目，每个子类别项目应该有多个项目。

这有可能实现吗？

提前致谢。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T22:28:02.757

有2种方法可以解决这个问题：

1- 更改 K2 核心 2- 修改模板以仅显示特殊类别（例如学校）的第一个 K2 项目。

# linux - 如何使用任何 wpa_supplicant 接口从代码启动新的 WPA 设备

> ID：11814889
> 
> 赞同：-1
> 
> 时间：2012-08-05T08:08:01.227
> 
> 标签：linux, wpa

我需要从 linux c 代码打开新的 WPA/WPA2 设备。现在我使用 wpa_supplicant 手动创建它

```
wpa_supplicant -iwlan0 -c connfig.conf -B 
```

*   如何从我的代码中启动它（不使用 system() ）？
*   什么 wpa_supplicant 接口用于此目的？

也许，你有什么例子吗？提前汉克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:40:05.233

假设 wpa_supplicant 已经在运行，它的“add_interface”命令就是为此而设计的。

如果它尚未运行，则需要使用 system 或 exec 运行它。

沙查尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T05:28:18.537

您可能可以使用**wpa_cli**。wpa_cli 是用于与 wpa_supplicant 交互的基于文本的前端程序。看看[这里](http://www.unix.com/man-page/freebsd/8/wpa_cli/)和[这里](http://rtl8192cu.googlecode.com/hg-history/bdd3a2265bdd6a92f24cef3d52fa594b2844c9c1/document/wpa_cli_with_wpa_supplicant.pdf)。

# mysql - SQL结构设计

> ID：11814893
> 
> 赞同：0
> 
> 时间：2012-08-05T08:08:33.490
> 
> 标签：mysql, sql

我正在创建一个应用程序，我想在其中显示用户浏览的最新文章。我想到的是创建一个表，在其中创建带有 userID 和 articleID 的行。但这种方法过于简单明了，一旦用户群增加，可能会遇到问题。

有一个更好的方法吗？我真的很确定一定有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:12:59.777

如果要记录哪些用户查看了哪些文章，添加一个表格，`userID`效果`articleID`很好。否则，将`viewCount`和`lastViewDate`字段添加到文章表就足够了（使用 cookie 将增量限制为每个会话一次）。无论哪种方式，性能问题都可以忽略不计，直到事情变得异常庞大。

# regex - 头对头或相邻正则表达式

> ID：11814894
> 
> 赞同：0
> 
> 时间：2012-08-05T08:08:53.473
> 
> 标签：regex

*嘿，我想要一个正则表达式，其中单词不头对头重复，密码必须是字母数字*

例子

pp47klm 对此给出错误消息

p47kplm 这个是写的

*请帮助我制作这个正则表达式，其中单词不头对头或相邻重复*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:15:35.667

如果您要求输入不包含任何双字符的字母数字密码，那么

```
^(?!.*(.)\1)\w+$ 
```

会符合这些要求。但是，这并不是一个很好的密码验证正则表达式（因为它也允许`1`作为密码），因此您可能需要更彻底地考虑您的要求。

# php - 处理数组中的数组？

> ID：11814895
> 
> 赞同：0
> 
> 时间：2012-08-05T08:09:22.743
> 
> 标签：php

**更新 1：**

我的代码中还有以下`foreach`循环：

```
foreach ($_POST as $key => $value){ 
    $message .= $key . " = " .$value ."\n\n<br />"; 
} 
```

这是最后一个。

或者问题可能出在：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $req); 
```

不喜欢`%5B0%5D`生成的字符串中的 ，即

```
transaction%5B0%5D=USD+21.00 
```

使用代码`$req = http_build_query($_POST);`？

**原始问题：**

我收到以下错误消息：

```
[Sun Aug 04 10:00:00 2012] [error] [client 000.0.00.000] PHP Warning:  stripslashes() expects parameter 1 to be string, array given in /var/www/page.php on line 20
[Sun Aug 04 10:00:00 2012] [error] [client 000.0.00.000] PHP Stack trace:
[Sun Aug 04 10:00:00 20122] [error] [client 000.0.00.000] PHP   1\. {main}() /var/www/page.php:0
[Sun Aug 04 10:00:00 2012] [error] [client 000.0.00.000] PHP   2\. stripslashes() /var/www/page.php:20 
```

问题代码是这样的：

```
Line 19: foreach ($_POST as $key => $value) {
Line 20:     $value = urlencode(stripslashes($value));
Line 21:     $req .= "&$key=$value";
Line 22: } 
```

其中`$_POST`包含以下内容：

```
Array
(
    [transaction] => Array
        (
            [0] => USD 21.00
        )

    [payment_request_date] => Sat Aug 04 10:00:00 PDT 2012
    [return_url] => http://000.000.000.000/success.php
    [fees_payer] => EACHRECEIVER
    [ipn_notification_url] => http://000.000.000.000/ipn.php
    [sender_email] => buyer_0394820394_per@gmail.com
    [verify_sign] => slkdfj30r2489urj0947830ru0ty80ur0er037jfgoiru932e.as329e
    [test_ipn] => 1
    [cancel_url] => http://000.000.000.000/cancel.php
    [pay_key] => AP-SLKJ30F9J90J3RSD3
    [action_type] => PAY
    [transaction_type] => Adaptive Payment PAY
    [tracking_id] => E4902RJF2
    [status] => COMPLETED
    [log_default_shipping_address_in_transaction] => false
    [charset] => windows-1252
    [notify_version] => UNVERSIONED
    [reverse_all_parallel_payments_on_error] => false
) 
```

`stripslashes()`由于数组中的数组而给我带来了问题吗？如果是，我该如何处理循环`$_POST`中`foreeach`的问题，如果不是，问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:13:05.137

只需使用函数[http_build_query](http://php.net/manual/en/function.http-build-query.php)，它将为您生成一个 URL 编码的查询字符串。

```
$query_str = http_build_query($_POST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:14:47.680

```
function stripslashes_every_string($array){
  foreach($array as $key => $value){
    $array[$key] = is_array($value) ? stripslashes_every_string($value) : stripslashes($value);
  }
  return $array;
}
$postdata = stripslashes_every_string($_POST); 
```

# android - 如何在 android 中搜索 *.avi 文件？

> ID：11814897
> 
> 赞同：-3
> 
> 时间：2012-08-05T08:10:42.763
> 
> 标签：android

如何获取用户 SD 卡上以 .avi 结尾的文件列表？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:23:07.573

使用 FileFilter 从 sdcard 扫描 .avi 文件。像：

```
 //Check media mounted or not
 if(Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()))
 {
 File sdCardDir=new File("/sdcard");
 File sdCardDir=Environment.getExternalStorageDirectory();
 ArrayList<File>files=getFiles(file);

 private ArrayList<File> getFiles(Filefile){
 File files[]=sdCardDir.listFiles(filter);

 for(File f:files){
     if(f.isDirectory()&&f.canRead()){
     getFiles(f);
     }else if(f.isFile()){
     videlList.add(f);
 }
 } 
 //USE FileFilter 
 FileFilter filter=new FileFilter(){
 @Override
 public boolean accept(File f){
 return f.isDirectory()||f.getName().matches("^.*?//.(avi)$");
 }  
 } 
```

# php - 如何像 echo 一样使用 fwrite() 将 html 内容写入当前页面？

> ID：11814902
> 
> 赞同：0
> 
> 时间：2012-08-05T08:11:21.470
> 
> 标签：php, file, debugging, echo, fwrite

我正在调试我的网站，我想在当前 html 页面和文件之间切换 fwrite() 的目标。我试过 fopen("php://stdout", "w")，但没有用。

有没有办法启用这个？我不想将 fwrite 的每一行更改为 echo 并在完成调试时将其更改回来。我是 PHP 新手，在 google 之后没有找到合适的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:14:20.530

> **`php://output`**
> 
> `php://output``print()`是一个只写流，允许您以与和相同的方式写入输出缓冲区机制`echo()`。
> 
> [http://php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php)

# objective-c - 发送通知到山狮通知中心

> ID：11814903
> 
> 赞同：58
> 
> 时间：2012-08-05T08:11:25.187
> 
> 标签：objective-c, xcode, macos, cocoa, osx-mountain-lion

有人可以举一个从 Cocoa 应用程序向通知中心发送测试通知的例子吗？例如。当我点击一个`NSButton`

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-08-05T10:05:15.930

Mountain Lion 中的通知由两个类处理。`NSUserNotification`和`NSUserNotificationCenter`。`NSUserNotification`是您的实际通知，它具有可以通过属性设置的标题、消息等。要传递您创建的通知，您可以使用`deliverNotification:`NSUserNotificationCenter 中提供的方法。Apple 文档有关于[NSUserNotification](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotification_Class/Reference/Reference.html)和[NSUserNotificationCenter](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotificationCenter_Class/Reference/Reference.html)的详细信息，但发布通知的基本代码如下所示：

```
- (IBAction)showNotification:(id)sender{
    NSUserNotification *notification = [[NSUserNotification alloc] init];
    notification.title = @"Hello, World!";
    notification.informativeText = @"A notification";
    notification.soundName = NSUserNotificationDefaultSoundName;

    [[NSUserNotificationCenter defaultUserNotificationCenter] deliverNotification:notification];
    [notification release];
} 
```

这将产生一个带有标题、消息的通知，并在显示时播放默认声音。除了这个（例如安排通知），您还可以对通知做更多的事情，这在我链接到的文档中有详细说明。

一小点，只有当您的应用程序是关键应用程序时才会显示通知。如果您希望无论您的应用程序是否为关键应用程序都显示通知，您需要为它指定一个委托`NSUserNotificationCenter`并覆盖委托方法`userNotificationCenter:shouldPresentNotification:`，以便它返回 YES。的文档`NSUserNotificationCenterDelegate`可以在[这里找到](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotificationCenterDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSUserNotificationCenterDelegate)

这是一个向 NSUserNotificationCenter 提供委托然后强制显示通知的示例，无论您的应用程序是否是关键。在应用程序的 AppDelegate.m 文件中，像这样编辑它：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [[NSUserNotificationCenter defaultUserNotificationCenter] setDelegate:self];
}

- (BOOL)userNotificationCenter:(NSUserNotificationCenter *)center shouldPresentNotification:(NSUserNotification *)notification{
    return YES;
} 
```

并在 AppDelegate.h 中声明该类符合 NSUserNotificationCenterDelegate 协议：

```
@interface AppDelegate : NSObject <NSApplicationDelegate, NSUserNotificationCenterDelegate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-07T04:35:39.117

@alexjohnj 为 Swift 5.2 更新了答案

在 AppDelegate 中

```
func applicationDidFinishLaunching(_ aNotification: Notification) {

  // Set delegate
  NSUserNotificationCenter.default.delegate = self
} 
```

然后向 NSUserNotificationCenterDelegate 确认为

```
extension AppDelegate: NSUserNotificationCenterDelegate {
 func userNotificationCenter(_ center: NSUserNotificationCenter, shouldPresent notification: NSUserNotification) -> Bool {
    true
}} 
```

# php - 在 jQuery 发布后使用 PHP 重定向

> ID：11814909
> 
> 赞同：1
> 
> 时间：2012-08-05T08:12:00.747
> 
> 标签：php, jquery, redirect

所以我最近了解到，如果您使用 jquery`$.post`回发到 PHP 脚本，那么您不能在该脚本中执行 @header 重定向（即使您`exit();`在它之后立即使用）。

这是一个非常令人沮丧的消息，因为我有一个重要的重定向/闪存消息类，在成功执行表单提交后我经常使用它。

jQuery post 是“贪婪的”并且不会让 php 脚本中断它的事实是一个巨大的限制。

有谁知道一个解决方案可以让我将表单数据发送回 PHP，然后从 PHP 中重定向？在 javascript 中复制重定向/闪存消息类对我来说并不是一个真正的选择。

有谁知道克服这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:16:25.243

您可以使用成功函数来重定向浏览器。

```
$.post(url, data, function() {
     window.location = newUrl;
}); 
```

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:17:16.967

@bcmcfc 的解决方案是最好的，但是如果您在重定向之前需要更多的交互或计算，您可以查看**[xajax](http://www.xajaxproject.org/)**。他们的文档很厚，但它是 UX 设计师梦寐以求的应用程序，填补了您所描述的空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:21:52.667

您的脚本重定向，并且您的 JavaScript (jQuery) 从我认为的重定向中获取结果，或者您的返回包含 302: 重定向标头。

由于您的脚本使用自己的请求，因此您告诉它执行的重定向不会更新浏览器，并且该功能永远不会存在。您必须在客户端代码中响应来自服务器的请求标头，以响应您想做的任何事情。

# csproj - 是否可以向 csproj 文件添加注释？

> ID：11814910
> 
> 赞同：46
> 
> 时间：2012-08-05T08:12:22.160
> 
> 标签：csproj

您可以向 .csproj 文件添加注释吗？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-05T08:26:11.953

注释像往常一样写在 XML 文件中：

```
<!-- comment --> 
```

[如何：编写一个简单的 MSBuild 项目](http://msdn.microsoft.com/en-us/library/ms171479%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-16T16:54:36.363

以下适用于多行注释。

```
<!-- 
  comment 1
  comment 2
  ....
--> 
```

# c# - 如何引用与我的 Metro 风格应用程序一起打包的图像源文件？

> ID：11814917
> 
> 赞同：7
> 
> 时间：2012-08-05T08:13:48.800
> 
> 标签：c#, windows-8, microsoft-metro

我有一个 .png 文件作为我的应用程序的内容。当我像这样在 xaml 中绑定它时

```
<ImageBrush x:Key="BtnBackImageBrush" ImageSource="/Assets/Images/back.png" /> 
```

一切还好。

我阅读[了这篇文章](http://msdn.microsoft.com/en-us/library/windows.ui.xaml.controls.image.source.aspx)，当我尝试以编程方式访问此 .png 时出现错误。

我使用的代码：

```
Uri baseUri = new Uri("ms:appx");
Image img = new Image();
img.Source = new BitmapImage(new Uri(baseUri, "/Assets/Images/back.png"));
img.ImageFailed += (sender, args) => new MessageDialog("Error").ShowAsync(); 
```

我的问题是如何引用与我的 Metro 风格应用程序一起打包的图像源文件？

感谢您的建议。

**更新：** 我找到了答案！我们需要使用父 FrameworkElement 设置 baseUri 而不是手动设置。例如：

```
// Usage
myImage.Source = ImageFromRelativePath(this, "relative_path_to_file_make_sure_build_set_to_content");

public static BitmapImage ImageFromRelativePath(FrameworkElement parent, string path)
{
    var uri = new Uri(parent.BaseUri, path);
    BitmapImage result = new BitmapImage();
    result.UriSource = uri;
    return result;
} 
```

感谢这篇[文章](http://www.codingbeta.com/programatically-setting-image-source-in-metro-style-apps-with-wpf/)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T00:33:21.090

> 新的 Uri("ms:appx");

我认为这是原始问题的根源。该方案是 ms-appx 而不是 ms:appx

错误的 URI：`ms:appx://Assets/Images/back.png`
好的 URI：`ms-appx://Assets/Images/back.png`

但是使用 FrameworkElement 并不是一个坏主意，如果您真的想确定其父级的范围 - 即使两者都有效，后者可能对读者来说可能更清楚您的意图（假设这是您的意图）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T09:54:46.097

是的，你是对的，这就是你问题的答案。

```
img.Source = ImageFromRelativePath(this, "Assets/Images/back.png");

public static BitmapImage ImageFromRelativePath(FrameworkElement parent, string path)
{
    var uri = new Uri(parent.BaseUri, path);
    BitmapImage bmp = new BitmapImage();
    bmp.UriSource = uri;
    return bmp;
} 
```

# iphone - 将 JSON 格式的 YouTube 视频馈送到表格视图中

> ID：11814930
> 
> 赞同：0
> 
> 时间：2012-08-05T08:15:56.677
> 
> 标签：iphone, objective-c, json, url

如何以 JSON 格式获取 youtube 视频以在`UITableView`. 我需要一次列出 20 个提要并显示更多按钮，然后需要显示接下来的 20 个结果。

我期待在这两种情况下都能获得提要的确切网址。

现在我正在尝试以我为例的 Url。

```
http://gdata.youtube.com/feeds/api/videos?start-index=11&max-results=20&v=2&alt=jsonc
http://gdata.youtube.com/feeds/api/videos?start-index=2&max-results=20&v=2&alt=jsonc 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T08:38:34.463

下面的代码将 YouTube JSON 解析为表格视图。

![ss](../Images/27d5740651a597539304fc60d45374ad.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = nil;
    if (indexPath.row < [[_JSON valueForKeyPath:@"data.items.title"] count]) {
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        cell.textLabel.text = 
        [[_JSON valueForKeyPath:@"data.items.title"] objectAtIndex:indexPath.row];
        cell.detailTextLabel.text =
        [[_JSON valueForKeyPath:@"data.items.description"] objectAtIndex:indexPath.row];
    }
    return cell;
} 
```

获取 JSON 的代码如下：

```
- (IBAction)refresh:(id)sender {
    NSURL *url = [NSURL URLWithString:kStrJsonURL];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id getJSON) {
        _JSON = getJSON;
        NSLog(@"%@", _JSON);
        [self.tableView reloadData];
    } failure:nil];
    [operation start];        
} 
```

您应该阅读 AFNetworking 入门：

[https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)

您可以从 GitHub 下载示例项目并运行它：

[https://github.com/weed/p120805_YouTubeJsonParse](https://github.com/weed/p120805_YouTubeJsonParse)

# jquery - JQuery：用于计算输入字段总数的表单......但同一页面上有多个此表单的实例

> ID：11814934
> 
> 赞同：2
> 
> 时间：2012-08-05T08:16:35.650
> 
> 标签：jquery, sum, parent, closest

我在 Stackoverlfow 上花了 20 多个小时来寻找解决我的问题的方法（尝试组合不同的解决方案），但我仍然卡住了，绝对需要你的帮助！

基本上，我有一个简单的表单，其中包含 3 个“金额”输入字段和一个“总金额”字段（3 个金额的总和）。

这是HTML代码：

```
<table border="1">

    <tr>
        <td>Amount 1</td>
        <td><input class="amount" type="text"/></td>
    </tr>

     <tr>
        <td>Amount 2</td>
        <td><input class="amount" type="text"/></td>
    </tr>

    <tr>
        <td>Amount 3</td>
        <td><input class="amount" type="text"/></td>
    </tr>

    <tr>
        <td>Total Amount</td>
        <td><span class="total">0</span></td>
    </tr>

</table> 
```

然后工作的jQuery代码：

```
$(document).ready(function(){           
        $('input').each(function() {
            $(this).keyup(function(){   
                calculateTotal();
            });
        });
    });

    function calculateTotal() {
        var sum = 0;
        $('input').each(function() {
            if(!isNaN(this.value) && this.value.length!=0) {
                sum += parseFloat(this.value);
            }
        });

        $(".total").html(sum.toFixed(2));
    } 
```

但是，我想在同一页面中使用同一表单的多个实例，并且我试图只有一个“通用”JQuery 函数，就像我当前的函数一样，它可以适用于任何表单，即使在同一页面上，也不会混合表单之间的字段。

基本上，一个功能说“每次更新输入字段时，重新计算总金额并将其放入当前表单/表格的总字段中”

我尝试了不同的方法，特别是通过围绕表格`<div>`然后通过 " 找到它，`currentdiv = $(this).prev("div");"`然后使用 each 函数循环通过 "当前 div"。但每次代码都不起作用，或者来自其他表单的总字段加起来！我还尝试了类似以下的方法，但没有使用`<div>`：

```
$(this).closest('tr').next().find('span.total').html(sum.toFixed(2));
or
$(this).closest('span.total').html(sum.toFixed(2));
or even
$(this).closest('span').prevAll('.total:first').html(sum.toFixed(2)); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T08:39:29.197

一般来说，对您的代码进行一些大修。jQuery 不要求您遍历所有匹配的元素以将侦听器附加到它们。这已经足够了：

```
$(document).ready(function(){           
    $('input.amount').keyup(function(){   
        calculateTotal(this);
    });
});

function calculateTotal( src ) {
    var sum = 0,
        tbl = $(src).closest('table');
    tbl.find('input.amount').each(function( index, elem ) {
        var val = parseFloat($(elem).val());
        if( !isNaN( val ) ) {
            sum += val;
        }
    });
    tbl.find('input.total').html(sum.toFixed(2));
} 
```

请注意，`this`事件处理程序中的关键字不是 jQuery 包装的，AFAIK，就像[.each](http://api.jquery.com/each/)`elem`处理程序的参数一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:22:21.150

为什么不直接传递包含所有元素的表格元素：

```
calculateTotal(this.parent('table'));//I would set a class on table personally and you need to test this; 
```

然后你有一个参考，你可以用它来获得正确的输入和跨度，即：

```
function calculateTotal(el) {
    var sum = 0;
    $(el).find('input').each(function() {
        if(!isNaN(this.value) && this.value.length!=0) {
            sum += parseFloat(this.value);
        }
    });

    $(el).find(".total").html(sum.toFixed(2));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-08T06:47:52.350

这创造了奇迹来添加每一行

```
$(function() {
    $('.ssizeform').each(function() {
        $(this).keyup(function() {
            calculateTotal($(this));
        });
    });
});

function calculateTotal(src) {
    var sum = 0;
    var sumtable = src.closest('tr');

    sumtable.find('.ssizeform').each(function() {
        if(!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });

    sumtable.find(".qty").html(sum.toFixed(0));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T08:35:07.963

这将完成这项工作：

```
$(document).ready(function(){           
        $('input').each(function() {
            $(this).keyup(function(){   
                calculateTotal($(this).closest('table'));
            });
        });
    });

    function calculateTotal($tab) {
        var sum = 0;
        $tab.find('input').each(function() {
            if(!isNaN(this.value) && this.value.length!=0) {
                sum += parseFloat(this.value);
            }
        });
        $tab.find(".total").html(sum.toFixed(2));
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T08:36:15.740

我在那个[jsFiddle 页面](http://jsfiddle.net/marvinlabs/zcnxH/2/)上有一个纯 jQuery 解决方案。每次更新字段时，它将使用您的标记并查找每个表的总和。

```
$("input.amount")
  .keyup(function() {
    total = 0;
    $(this)
      .parents("table")
      .find("input.amount")
        .each(function() {
            total += parseInt($(this).val());
        })
      .end()
      .find("span.total")
      .html(total);
  });​ 
```

# php - CodeIgniter 中的 CKEditor

> ID：11814937
> 
> 赞同：8
> 
> 时间：2012-08-05T08:17:48.097
> 
> 标签：php, javascript, codeigniter, ckeditor

我想在 CodeIgniter 中加载 CKEditor，我搜索了很多，但无法理解他们的方式。

我将 ckeditor 放在**application/plugins**文件夹中，现在我想制作编辑器，所以我在 Controller Method 中执行以下操作。

```
include APPPATH.'plugins/ckeditor/ckeditor.php';
$CKEditor = new CKEditor();
$CKEditor->basePath = '/'.APPPATH.'plugins/ckeditor/';
$initialValue = '<p>This is some <strong>sample text</strong>.</p>';
echo $CKEditor->editor("editor1", $initialValue); 
```

但它只制作简单的茶树，与

``This is some **sample text**.``

`价值。问题出在哪里，我应该如何解决？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-05T08:38:38.417

我使用以下步骤将 ckeditor 添加到我的 codeigniter 应用程序中：

1) 下载这些文件：

*   这适用于 Ckeditor：[http ://pastebin.com/fkK9e0RR](http://pastebin.com/fkK9e0RR)
*   这适用于 Ckfinder：[http ://pastebin.com/SvyypmX4](http://pastebin.com/SvyypmX4)

2) 将刚刚下载的文件复制到**Application/libraries**文件夹中

3) 在此处下载 ckeditor 助手：http: [//pastebin.com/Cd3GqYbx](http://pastebin.com/Cd3GqYbx)

4) 将**application/helper**文件夹中的最后一个文件复制为**ckeditor_helper.php**

5）在这里下载CKeditor控制器：http: [//pastebin.com/UD0bB9ig](http://pastebin.com/UD0bB9ig)

6) 将您的**应用程序/控制器**文件夹中的控制器复制为**ckeditor.php**

7）从官网下载ckeditor主工程：http: [//ckeditor.com/download/](http://ckeditor.com/download/)

8) 将刚才下载的ckeditor文件夹复制到asset文件夹中（如果需要也可以下载ckfinder工程放在同一个文件夹下）

9）将这行js添加到您的视图文件中（调整路径）：

```
<script type="text/javascript" src="/asset/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/asset/ckfinder/ckfinder.js"></script> 
```

10) 在您的控制器中添加此 php 代码并调整路径：

```
$this->load->library('ckeditor');
$this->load->library('ckfinder');

$this->ckeditor->basePath = base_url().'asset/ckeditor/';
$this->ckeditor->config['toolbar'] = array(
                array( 'Source', '-', 'Bold', 'Italic', 'Underline', '-','Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo','-','NumberedList','BulletedList' )
                                                    );
$this->ckeditor->config['language'] = 'it';
$this->ckeditor->config['width'] = '730px';
$this->ckeditor->config['height'] = '300px';            

//Add Ckfinder to Ckeditor
$this->ckfinder->SetupCKEditor($this->ckeditor,'../../asset/ckfinder/'); 
```

11) 在您看来，使用以下命令打印编辑器：

```
echo $this->ckeditor->editor("textarea name","default textarea value"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T15:50:23.193

你可以这样做：

1.  将 CKEditor 文件复制到源根目录中的文件夹，例如 ckeditor
2.  在视图文件中包含 CKEditor 文件

    ```
     <script src="<?php echo base_url(); ?>ckeditor/ckeditor.js"></script>
            <link rel="stylesheet" href="<?php base_url(); ?>style/format.css"> 
    ```

3.  最后是你的 html 文档中的 textarea

    ```
     <textarea cols="80" id="edi" name="editor1" rows="10">
                    <?php echo $page_content->message1; ?>
                                </textarea>
                                <script>

                                    CKEDITOR.replace('edi');

                         </script>    </body> 
    ```

这对我很有用。享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-02T01:11:38.487

我在这里找到了一个非常简单的 2 代码行解释： [http ://www.iprogrammerindia.in/how-to-integrate-ckeditor-in-codeigniter/#comment-73](http://www.iprogrammerindia.in/how-to-integrate-ckeditor-in-codeigniter/#comment-73)

以防万一链接消失，我将在此处粘贴文本。这对我有用 2014 年 8 月 1 日：

将此行包含在您要使用 ckeditor 的视图中，并将您的 ckeditor 文件夹放在根文件夹中。这里我放在根文件夹中的 js/ckeditor/

```
<script type="text/javascript" src="<?php echo base_url();?>js/ckeditor/ckeditor.js"></script> 
```

接下来在同一视图中包含以下行，

```
<?php echo form_textarea(array('name' =>'desc','id'=>'desc','class'=>"ckeditor")); ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-04T11:43:58.163

1.  [从https://ckeditor.com/ckeditor-4/download/](https://ckeditor.com/ckeditor-4/download/)下载 CKEditor 包
2.  在您的首选位置解压缩 Codeigniter 项目文件夹中的文件夹。
3.  在页面中包含`<script>`加载 CKEditor 的元素。
4.  使用CKEditor`CKEDITOR.replace()`替换现有`<textarea>`元素的方法。

请参见以下示例：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>A Simple Page with CKEditor</title>
        <!-- Make sure the path to CKEditor is correct. -->
        <script src="../ckeditor.js"></script>
    </head>
    <body>
        <form>
            <textarea name="editor1" id="editor1" rows="10" cols="80">
                This is my textarea to be replaced with CKEditor.
            </textarea>
            <script>
                // Replace the <textarea id="editor1"> with a CKEditor
                // instance, using default configuration.
                CKEDITOR.replace( 'editor1' );
            </script>
        </form>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-05T17:27:46.343

好吧，我知道这个问题很老，但这就是我所做的，对我来说似乎是最简单的。

1.  在我的根目录下，我有一个名为“js”的目录，其中有一个名为“plugins”的目录。我在那里复制了ckeditor文件。
2.  然后在`application/views/common/headers`目录中我有一个标题为' `ckeditor.php`'的头文件。在这个文件中只有以下代码：

> ```
> <script type="text/javascript" src="php echo base_url();?>
> js/plugin/ckeditor/ckeditor.js"></script> 
> ```

3.  然后在控制器中，我将头文件添加到 $data 对象以传递给视图： `$data['header_files'] = array('header1','header2','header3', 'ckeditor'); // header file names were changed for the sake of my client`
4.  然后，当然将 $data 对象传递给视图： `$this->load->view('common/admin-template',$data);`
5.  然后我只打电话给 CKEDITOR.replace('textareaNameHere');

瞧。有用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-22T18:44:43.923

同样的问题是我正在承认，但只是你需要根文件夹中资产文件夹中的所有文件。我的控制器部分是

```
$this->load->library('ckeditor');
    $this->load->library('ckfinder');

    $this->ckeditor->basePath = base_url().'assets/admin/ckeditor/';
    $this->ckeditor->config['toolbar'] = array(
                                                array( 'Source', '-', 'Bold', 'Italic', 'Underline', '-','Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo','-','NumberedList','BulletedList' )
                                                );
    $this->ckeditor->config['language'] = 'en';
    $this->ckeditor->config['width'] = '730px';
    $this->ckeditor->config['height'] = '300px';            

//Add Ckfinder to Ckeditor
    $this->ckfinder->SetupCKEditor($this->ckeditor,base_url().'asset/admin/ckfinder/'); 
```

* * *

* * *

我的观点是

```
<div class="form-group">
    <label for="description">Description</label> <?php echo form_error('event_description'); ?>
    <?php echo $this->ckeditor->editor("event_description",((isset($event_description)) ? $event_description : ''));?>      
</div> 
```

我将 ck 编辑器文件夹放在资产文件夹中，并将资产文件夹放在根文件中，如
C:\wamp\www\site\assets\admin\ckeditor

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-27T05:31:09.093

我认为使用 Ckeditor 最简单的方法是通过 CDN，在您的视图文件中使用它并

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>CKEditor</title>
<script src="https://cdn.ckeditor.com/ckeditor5/18.0.0/classic/ckeditor.js"></script>
</head>
<body>
<textarea name="editor" id="editor" rows="10" cols="80" placeholder="Insert text here" class="form-control"></textarea>
<script>
ClassicEditor
.create( document.querySelector( '#editor' ) )
.then( editor => {
console.log( editor );
} )
.catch( error => {
console.error( error );
} );
</script>
</body>
</html> 
```

有关 ckeditor 的更多信息和样式以及不同样式的 ckeditor 的使用，您可以访问[https://cdn.ckeditor.com/#ckeditor5](https://cdn.ckeditor.com/#ckeditor5)

**如果您正在寻找 Ckeditor 的文档编辑器，请点击以下链接** [https://ckeditor.com/docs/ckeditor5/latest/builds/guides/quick-start.html#document-editor](https://ckeditor.com/docs/ckeditor5/latest/builds/guides/quick-start.html#document-editor)

使用示例，您将能够在视图文件中插入文档编辑器`

# wcf - 使用简单 WCF 服务的未经授权的 HTTP 请求

> ID：11814941
> 
> 赞同：1
> 
> 时间：2012-08-05T08:18:30.780
> 
> 标签：wcf

我们正在按照以下指南设置 Restful WCF 服务：http:
[//www.codeproject.com/Articles/255684/Create-and-Consume-RESTFul-Service-in-NET-Framewor](http://www.codeproject.com/Articles/255684/Create-and-Consume-RESTFul-Service-in-NET-Framewor)

说明很好，我们已成功运行测试版本并在浏览器中显示 XML 结果（在我们的案例`Person`记录中）。

我们遇到的一个问题是作者并没有让我们在浏览器中显示 XML。

您会认为，一旦结果以 XML 形式呈现给您，就很容易敲出一个可以将该数据反序列化到您的`Person`类中的客户端。

其实，没那么容易。很多关于绑定和端点的事情让我们摸不着头脑……不确定我们是否已经正确掌握。无论如何，过了一会儿，找到了一个代码示例，其中一半是有道理的，然后把它敲了起来：

```
Dim persons As Persons
Using host As New WebServiceHost(GetType(MyTestService), New Uri("http://MyServer:8443/TestService/"))
    host.AddServiceEndpoint(GetType(IMyTestService), New BasicHttpBinding(), "")
    host.Open()

    Using cf As New ChannelFactory(Of IMyTestService)(New BasicHttpBinding(), "http://MyServer:8443/TestService/")
        cf.Endpoint.Behaviors.Add(New WebHttpBehavior())
        Dim channel As IMyTestService = cf.CreateChannel()

        persons = channel.GetPersons
    End Using

    MsgBox(persons.Count)

End Using 
```

唯一的问题是它失败并`persons = channel.GetPersons`出现此错误：

> HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器收到的身份验证标头是“协商，NTLM”。

现在，当服务器很乐意通过 IE 或 Chrome 向我提供数据时，我发现出现身份验证错误很奇怪。

因此，我们尝试更改`WebHttpBinding`为`BasicHttpBinding`充满希望而不是期望，因为我们不确定这些方法在表面下真正做了什么，但这会产生错误：

> 'http://MyServer:8443/TestService/' 的端点没有与 None MessageVersion 的绑定。'System.ServiceModel.Description.WebHttpBehavior' 仅适用于 WebHttpBinding 或类似的绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:16:12.380

嗯...您展示的代码示例将是WCF 服务的**服务器**`basicHttpBinding`端，使用的是**SOAP**绑定，与 REST 无关...**绝对不是**WCF REST 服务的客户端代码！

假设您的 WCF REST 服务已启动并正在运行，您的客户端将相当简单，如下所示：

```
// create a new web request to query your service
WebRequest request = WebRequest.Create("http://MyServer:8443/TestService/");

// get the response
WebResponse response = request.GetResponse();

// examine some properties of the response
long length = response.ContentLength;
string contentType = response.ContentType;

// fetch the XML (or JSON) contents of the response
string content = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

# html - Adblock plus - 隐藏部分 CSS 样式或更改类名？

> ID：11814944
> 
> 赞同：5
> 
> 时间：2012-08-05T08:19:15.570
> 
> 标签：html, css, adblock

[Adblock 隐藏了http://www.outlook.com](http://www.outlook.com)上的广告，但留下了一个我想删除的空侧边栏 我发现有 2 种方法可以手动删除侧边栏，但我想用 adblock plus 来做

方法一：侧边栏div设置为：

```
<div id="contentRight" class="ContentRight WithSkyscraper"> 
```

通过从类中删除 WithSkyscraper，侧边栏被隐藏。

方法2：另一种方法是在css文件中有一个类：

```
.App.Unmanaged .ContentRight.WithSkyscraper #ManagedContentWrapper
{
padding-right:160px;
} 
```

通过删除 padding-right 或将 160px 更改为 0px 侧边栏也会隐藏

是否可以使用 adblock plus 执行这两种方法之一？或者有没有其他插件可以使用

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T09:13:48.050

我在 firefox 上安装了插件 Stylish 并创建了自己的样式以将宽度更改为 0px

```
.App.Unmanaged .ContentRight.WithSkyscraper #ManagedContentWrapper 
{
padding-right: 0px !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:56:08.087

您可以尝试安装其他插件，该插件允许您将自定义 CSS 代码应用到网站，或编辑他们获得的代码。例如，如果您使用 Chrome，[Stylebot](https://chrome.google.com/webstore/detail/oiaejidbmkiecgbjeifoejpgmdaleoha)对您来说似乎是一个可行的选择。据我所知，这样的插件应该可以与 Adblock 一起使用，因此您只需编辑 CSS 并以您想要的方式使用您的网站。

# javascript - 在这些示例中调用“this”有什么区别？

> ID：11814953
> 
> 赞同：3
> 
> 时间：2012-08-05T08:21:34.673
> 
> 标签：javascript, this

我正在阅读 Crockford 的 'JS: The Good Parts'。他有两个使用这个的例子，我不明白为什么在一个例子中他使用`this`，而在另一个例子中他使用`that`.

第一个例子：

```
String.method('deentify', function() {
    var entity = {
        quot:   '"',
        lt:     '<',
        gt:     '<'
    };

    return function() {
        return this.replace(/&([^&;]+);/g,
            function (a, b) {
                var r = entity[b];
                return typeof r === 'string' ? r : a;
            }
        );
    };
}());
document.writeln('&lt;&quot;&gt;'.deentify()); 
```

第二个例子：

```
Function.method('curry', function() {
    var args = arguments, that = this;
    return function () {
        return that.apply(null, args.concat(arguments));
    };
});
var add1 = add.curry(1);
document.writeln(add1(6)); 
```

为什么第一个例子可以`this`直接访问？这个例子和后面的例子有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:39:31.350

当你这样做的时候`obj.f()`，`this`里面的函数`f`会引用`obj`。

在第一个示例中，`deentify()`在字符串上调用。在那个函数中，他只需要调用该函数的对象，即字符串，这是函数`this`内部`deentify()`将要引用的内容。

**为什么我们需要`that`**

该`add1`函数需要以`add`某种方式存储对原始函数的引用。`add1`不能使用`this`，因为它*不*被称为`add.add1`。这可以通过创建一个闭包来克服`that`，其中他保存了对您执行的函数的引用`curry()`（`add()`在示例中）。

当您调用 时`add.curry()`，`this`将引用该`add`函数。（因为您调用`curry()`了`add`）。由于 curry 函数内部的闭包，`that`将保留其值并在调用时仍会引用该`add`函数`add1()`。

如果`this`在从返回的函数内部使用`curry()`，它将引用该`window`对象。

```
Function.method('curry', function() {
    var args = arguments, 
      that = this; //reference to add
    return function () {
        //`apply` calls add
        return that.apply(null, args.concat(arguments)); 
    };
});
var add1 = add.curry(1);
document.writeln(add1(6)); 
```

**注意**：重要的是要看到，第一个片段中*的*`return`第一个表示函数，而第二个片段中的第一个表示函数的返回值*。* *`deentify()``return`*`curry()`**

 **如果您也想了解使咖喱起作用的`arguments`/`apply()`魔术，请在评论中提问，我很乐意详细说明。**

# django - 从 clean_data 获取值而不是 unicode 表示

> ID：11814955
> 
> 赞同：1
> 
> 时间：2012-08-05T08:21:49.183
> 
> 标签：django, forms

我想做一些自定义验证：

```
class Products(models.Model):
    Description = models.CharField(max_length=100)
    Price = models.DecimalField(max_digits=5, decimal_places=2)
    def __unicode__(self):
            return "%s Eur %s" %(self.Description, self.Price)

class Orders(models.Model):
    Name = models.CharField(max_length=40)
    Product = models.ForeignKey(Products, default=None, null=True, blank=True)

class OrderForm(ModelForm):
    class Meta:
            model = Orders
    def clean(self):
            cleaned_data = super(OrderForm, self).clean()
            P = cleaned_data.get("Product") 
```

我遇到的问题是 P 返回产品的 unicode 表示形式（例如：Cableconnector Eur 6.75），但我需要从 clean_data 中获取产品 ID。知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:34:53.120

哎呀，这真的很容易....获取ID只需调用P.id

# sql - 基于比较日期的 Django 查询集

> ID：11814960
> 
> 赞同：0
> 
> 时间：2012-08-05T08:22:23.070
> 
> 标签：sql, django, django-orm

> **可能重复：**
> [如何使用 Django 在两个日期之间进行选择](https://stackoverflow.com/questions/3963201/how-do-you-select-between-two-dates-with-django)

我有包含 2 个字段的 django 模型 - **c_date**和**c_int**。因为我在创建查询方面真的很弱......有没有办法从数据库中只获取那些满足这个要求的记录：`c_date+timedelta(days=c_int)=date.today`？我想在数据库级别进行，因为它比获取所有记录并比较所有记录的日期要快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:23:54.597

您应该[`QuerySet.extra`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)用于构建复杂的`WHERE`子句。特别是对于您的要求，您应该检查[`DATEADD`](http://www.w3schools.com/sql/func_dateadd.asp)所选数据库的功能的可用性。

虽然，根据您的数据集有多大以及您需要多久运行一次此查询，另一种选择是进行迁移，并在创建实例时立即计算日期和偏移量的总和——您可以创建`ModelForm`继续允许用户以`c_int`天为单位指定偏移量的自定义。

# android - 在 Android 中将 XML 发送到 Web 服务

> ID：11814962
> 
> 赞同：4
> 
> 时间：2012-08-05T08:22:26.600
> 
> 标签：android, web-services, android-ksoap2

我想将此作为 XML 发送到我的 Web 服务。我该怎么做？

```
<dmi:ShipNoticeRequest xmlns:dmi="http://portal.suppliesnet.net">
<dmi:RequesterISA>xxxxxxxxxx</dmi:RequesterISA>
<dmi:ShipDateRange>
<dmi:ShipDateFrom>2009-09-09</dmi: ShipDateFrom>
<dmi:ShipDateTo>2009-09-10</dmi: ShipDateTo>
</dmi: ShipDateRange >
</dmi:ShipNoticeRequest> 
```

我的 Web 服务方法需要这种类型的请求消息：

```
POST /ShipNotice/WebServiceShipNotice.asmx HTTP/1.1
Host: portal.suppliesnet.net
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://portal.suppliesnet.net/RequestShipmentNoticeXML"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <RequestShipmentNoticeXML xmlns="http://portal.suppliesnet.net">
      <ShipNoticeRequestNode>xml</ShipNoticeRequestNode>
    </RequestShipmentNoticeXML>
  </soap:Body>
</soap:Envelope> 
```

* * *

我正在尝试这种方法，但遇到未知错误你能弄清楚这段代码有什么问题吗？

```
try {
            DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder documentBuilder = documentBuilderFactory
                    .newDocumentBuilder();
            Document document = documentBuilder.newDocument();
            Element rootElement = document.createElement("soap:Envelope");
            rootElement.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");
            rootElement.setAttribute("xmlns:xsd","http://www.w3.org/2001/XMLSchema");
            rootElement.setAttribute("xmlns:soap", "http://schemas.xmlsoap.org/soap/envelope/");

            document.appendChild(rootElement);

            Element SoapBody = document.createElement("soap:Body");
            rootElement.appendChild(SoapBody);

            Element RequestShipmentNoticeXML = document.createElement("RequestShipmentNoticeXML");
            RequestShipmentNoticeXML.setAttribute("xmlns","http://portal.suppliesnet.net");
            SoapBody.appendChild(RequestShipmentNoticeXML);

            Element ShipmentNoticeRequestNode = document.createElement("ShipNoticeRequestNode");
            RequestShipmentNoticeXML.appendChild(ShipmentNoticeRequestNode);

            Element shipNoticeRequest = document.createElement("dmi:ShipNoticeRequest");
            shipNoticeRequest.setAttribute("xmlns:dmi", "http://portal.suppliesnet.net");

            ShipmentNoticeRequestNode.appendChild(shipNoticeRequest);

            Element ContactElement = document.createElement("dmi:RequesterISA");
            shipNoticeRequest.appendChild(ContactElement);
            ContactElement.appendChild(document.createTextNode("XXXXXX"));
// 1969-12-31

            Element articleElement = document.createElement("dmi:ShipDateRange");

            Element ShipDateFrom = document.createElement("dmi:ShipDateFrom");
            articleElement.appendChild(ShipDateFrom);
            ShipDateFrom.appendChild(document.createTextNode("2012-07-06"));

            Element ShipDateTo  = document.createElement("dmi:ShipDateTo");
            articleElement.appendChild(ShipDateTo);
            ShipDateTo.appendChild(document.createTextNode("2012-07-06"));

            shipNoticeRequest.appendChild(articleElement);

            TransformerFactory factory = TransformerFactory.newInstance();
            Transformer transformer = factory.newTransformer();
            Properties outFormat = new Properties();

            outFormat.setProperty(OutputKeys.INDENT, "yes");
            outFormat.setProperty(OutputKeys.METHOD, "xml");
            outFormat.setProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
            outFormat.setProperty(OutputKeys.VERSION, "1.0");
            outFormat.setProperty(OutputKeys.ENCODING, "UTF-8");
            transformer.setOutputProperties(outFormat);
            DOMSource domSource = new DOMSource(document.getDocumentElement());
            OutputStream output = new ByteArrayOutputStream();
            StreamResult result = new StreamResult(output);
            transformer.transform(domSource, result);
            xmlString = output.toString();

        } catch (ParserConfigurationException e) {
        } catch (TransformerConfigurationException e) {
        } catch (TransformerException e) {
        }

        SoapObject request = new SoapObject(namespace, methodName);
        request.addProperty("RequestShipmentNoticeXMl",xmlString);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);

        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        // envelope.headerIn.
        final HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        androidHttpTransport.debug = true;
        try {
            androidHttpTransport.call(Soap_Action, envelope);
            //androidHttpTransport.
             SoapObject SoapResult = (SoapObject)envelope.bodyIn;
            tv.setText("Status" + SoapResult);
        } catch (Exception ex) {
            ex.printStackTrace();
            Log.e("static", "Exception in making call to server");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:08:48.240

您想发送 SOAP 消息，而 Android 不直接支持发送此类消息。您可以尝试使用 KSOAP2-android 等 3rd 方库。
服务器端的 WSDL 文件给出了每个 SOAP msg 的外观。尝试在服务器上找到它并查看每个 msg 的外观。您可以使用soapUI 为您解析WSDL 文件。
如果您不使用上述任何第 3 方库，则必须自己编写该消息。您将需要创建某种 HTTP 客户端，如下所示：

```
HttpURLConnection conn = null;
conn = (HttpURLConnection) new URL(url).openConnection();
conn.setRequestMethod("POST");
conn.setRequestProperty("Content-Type", "text/xml");
conn.setRequestProperty("Content-Length", "" + postMessageInBytes.length); 
```

请求正文将使用例如 XmlSerializer 创建，这将帮助您编写所需的标签等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:40:20.243

您可以使用 KSOAP2 访问 Web 服务，并且您的 XML 数据可以轻松地以字符串形式发送...

1.下载[ksoap2 jar](http://ksoap2-android.googlecode.com/svn/m2-repo/com/google/code/ksoap2-android/ksoap2-android-assembly/2.6.5/ksoap2-android-assembly-2.6.5-jar-with-dependencies.jar)文件

2.启动eclipse，新建android项目

3.右键单击您的项目

4.点击属性

5.单击左侧窗格中的java构建路径

6.选择库选项卡

7.点击添加外部jar

8.浏览下载的jar文件

您的活动应如下所示...

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.*;
import android.util.Log;
import android.widget.TextView;
import android.os.Bundle;

public class FinalWebServiceDemoActivity extends Activity {

// some parameters regarding your web-service to be invoked
private static final String SOAP_ACTION = "http://tempuri.org/WebServiceMethod";
private static final String METHOD_NAME = "WebServiceMethod";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://10.0.2.2:2256/WebService.asmx";

TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv=(TextView)findViewById(R.id.text1);
    call();
}

public void call()
{
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("message","Put your XML data here...");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);

        SoapPrimitive result = (SoapPrimitive)envelope.getResponse();
        String strRes = result.toString();

        tv.setText(strRes);
    } catch (Exception e) {
        tv.setText("Exception...");
        Log.i("exception", e.toString());
        StackTraceElement elements[] = e.getStackTrace();
        for (int i = 0, n = elements.length; i < n; i++) {      
            Log.i("File", elements[i].getFileName());
            Log.i("Line", String.valueOf(elements[i].getLineNumber()));
            Log.i("Method", elements[i].getMethodName());
        }
    }
}
} 
```

不要忘记`<uses-permission android:name="android.permission.INTERNET" />`在清单文件中添加权限。

注意：编写此代码是为了访问在本地计算机上运行的 .NET Web 服务，并且 IP 是从 Android 模拟器访问的。在必要时对其进行修改。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T22:00:05.770

试试这个（纯 Java 标准）：

```
 private WebServiceConnection(String xmlString) {

        InputStream responseInputStream = null;
        OutputStream requestOutputStream = null;

        HttpURLConnection httpURLConnection = null;

        try {

            // Form the URL
            URL url = new URL(URL_BASE + "?serviceId=3");

            // Set the HTTP URL connection
            httpURLConnection = (HttpURLConnection)url.openConnection();
            httpURLConnection.setDoOutput(true);
            httpURLConnection.setConnectTimeout(15000);
            httpURLConnection.setRequestProperty("Accept-Charset", "UTF-8");
            httpURLConnection.setRequestProperty("Content-Type", "text/html");

            // Send request
            requestOutputStream = httpURLConnection.getOutputStream();
            requestOutputStream.write(xmlString.getBytes("UTF-8"));

            // Receive response, then do anything with it
            responseInputStream = httpURLConnection.getInputStream();

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch(SocketTimeoutException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T11:02:35.677

```
 package com.example.xmlfilecreator;

    import java.io.File;
    import java.io.FileNotFoundException;
    import java.io.FileOutputStream;
    import java.io.IOException;

    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.entity.mime.MultipartEntity;
    import org.apache.http.entity.mime.content.FileBody;
    import org.apache.http.entity.mime.content.StringBody;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.util.EntityUtils;
    import org.xmlpull.v1.XmlSerializer;

    import android.app.Activity;
    import android.os.Bundle;
    import android.os.Environment;
    import android.util.Log;
    import android.util.Xml;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.TextView;

    public class XmlFileCreator extends Activity implements OnClickListener {
        public int i=0;
         Button b3;
         HttpEntity resEntity;
         public TextView tv;
         public String filename="";
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            b3 = (Button)findViewById(R.id.upload);
            tv = (TextView)findViewById(R.id.tv);
            b3.setOnClickListener(this);
            filename="addupload.xml";
            String[] no = new String[] {
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",

                };
            String[] questype = new String[] {
                    "type1",
                    "type2",
                    "type3",
                    "type4",
                    "type5",     
                };
            String[] ques = new String[] {
                    "2+2",
                    "3+3",
                    "4+4",
                    "5+5",
                    "6+6",     
                };
            String[] cans = new String[] {
                    "4",
                    "6",
                    "8",
                    "10",
                    "12",     
                };
            String[] uans = new String[] {
                    "4",
                    "5",
                    "8",
                    "9",
                    "10",     
                };
//create a new file called "addupload.xml" in the SD card
        File newxmlfile = new File(Environment.getExternalStorageDirectory()+"/"+filename);
        try{
            newxmlfile.createNewFile();
        }catch(IOException e){
            Log.e("IOException", "exception in createNewFile() method");
        }
        //we have to bind the new file with a FileOutputStream
        FileOutputStream fileos = null;         
        try{
            fileos = new FileOutputStream(newxmlfile);
        }catch(FileNotFoundException e){
            Log.e("FileNotFoundException", "can't create FileOutputStream");
        }
        //we create a XmlSerializer in order to write xml data
        XmlSerializer serializer = Xml.newSerializer();
        try {
            //we set the FileOutputStream as output for the serializer, using UTF-8 encoding
            serializer.setOutput(fileos, "UTF-8");
            //Write <?xml declaration with encoding (if encoding not null) and standalone flag (if standalone not null) 
            serializer.startDocument(null, Boolean.valueOf(true)); 
            //set indentation option
            serializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output", true); 
            //start a tag called "root"
                serializer.startTag(null, "Worksheet"); 
                while(i<no.length)
                {
            //i indent code just to have a view similar to xml-tree
                    serializer.startTag(null, "Question");
                    //set an attribute called "attribute" with a "value" for <child2>
                    serializer.attribute(null, "number", no[i]);
                    serializer.endTag(null, "Question");

                    serializer.startTag(null, "QuestionType");
                    //write some text inside <child3>
                    serializer.text(questype[i]);
                    serializer.endTag(null, "QuestionType");

                    serializer.startTag(null, "Question");
                    serializer.text(ques[i]);
                    serializer.endTag(null, "Question");

                    serializer.startTag(null, "CorrectAnswer");
                    serializer.text(cans[i]);
                    serializer.endTag(null, "CorrectAnswer");

                    serializer.startTag(null, "UserAnswer");
                    serializer.text(uans[i]);
                    serializer.endTag(null, "UserAnswer");

                i=i+1;
                }

            serializer.endTag(null, "Worksheet");
            serializer.endDocument();
            //write xml data into the FileOutputStream
            serializer.flush();
            //finally we close the file stream
            fileos.close();

            TextView tv = (TextView)this.findViewById(R.id.result);
            tv.setText("file has been created on SD card");
        } catch (Exception e) {
            Log.e("Exception","error occurred while creating xml file");
        }
    }
    public void onClick(View v)
    {
        if(v==b3)
        {
            // if(!(selectedPath1.trim().equalsIgnoreCase("NONE")) && !(selectedPath2.trim().equalsIgnoreCase("NONE"))){
                  Thread thread=new Thread(new Runnable(){
                         public void run(){
                             doFileUpload();
                             runOnUiThread(new Runnable(){
                                 public void run() {
                                     tv.setText("uploaded successfully");
                                 }
                             });
                         }
                 });
                 thread.start();
        }
         }
    private void doFileUpload(){

        File file1 = new File("/mnt/sdcard/"+filename);
        File file2 = new File("/mnt/sdcard/mfqsheet.xml");
        String urlString = "http://192.168.1.20:8080/NpTest/fileUpload";
        try
        {
             HttpClient client = new DefaultHttpClient();
             HttpPost post = new HttpPost(urlString);
             FileBody bin1 = new FileBody(file1);
             FileBody bin2 = new FileBody(file2);
             MultipartEntity reqEntity = new MultipartEntity();
             reqEntity.addPart("uploadedfile1", bin1);
             reqEntity.addPart("uploadedfile2", bin2);
             reqEntity.addPart("user", new StringBody("User"));
             post.setEntity(reqEntity);
             HttpResponse response = client.execute(post);
             resEntity = response.getEntity();
             final String response_str = EntityUtils.toString(resEntity);
             if (resEntity != null) {
                 Log.i("RESPONSE",response_str);
                 runOnUiThread(new Runnable(){
                        public void run() {
                             try {

                              //  Toast.makeText(getApplicationContext(),"Upload <span id="IL_AD4" class="IL_AD">Complete</span>. Check the server uploads directory.", Toast.LENGTH_LONG).show();
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                           }
                    });
             }
        }
        catch (Exception ex){
             Log.e("Debug", "error: " + ex.getMessage(), ex);
        }
      }
} 
```

# c# - 与对象包装类一起使用的灵活性

> ID：11814968
> 
> 赞同：4
> 
> 时间：2012-08-05T08:24:08.507
> 
> 标签：c#, java, oop, design-patterns

```
public interface iUserInfo
{
    string getUserName(int userId);
    string getUserAge(string username);
}

public class UserDb implements iUserInfo
{
    string getUserName(int userId)
    {
        //code to retrieve user info from the database
    }
}

public class UserTxtFile implements iUserInfo
{
    string getUserName(int userId)
    {
        //code to retrieve user info from the plain text file
    }
}

public class UserManager()
{
    private iUserInfo userInfo;

    public string retrieveUserData(string userName)
    {
        return userInfo.getUserAge(userName);
    }
} 
```

我的教授说

> “上面的用户管理器类有一个 iUserInfo 类型的引用变量，因此，如果这个引用是由工厂方法或任何其他方式提供的，那么无论提供什么实现，管理器类的代码都是相同的。
> 
> 如果在软件开发过程中需要更改某些实现，这种方法可以最大限度地提高灵活性，因为更高级别的层根本不会受到影响。”

我需要了解两件事；灵活性最大化和工厂方法。

后者我猜它可能是这样的

```
public class UserManager()
{
    private iUserInfo userInfo;
    private UserTxtFile  uTxtFile;
    private UserDb uDB;
    public iUserInfo GetUserInfoObjFactory(bool dbOrTxt)
    {
        return dbOrTxt? uTxtFile:uDB;
    }
    public string retrieveUserData(string userName)
    {
        return userInfo.getUserAge(userName);
    }
} 
```

在讲座期间，我有点做白日梦，现在不知道这到底是什么意思？我很想更深入地了解一下，以防一些面试官可能会用我不确定如何回答的更开放的问题来*攻击我。*

当高层受到影响时，您是否还可以添加一些代码来破坏上述源代码？十分感谢。

[**更新**]我还发现诸如“我们需要接口来分组常用方法”之类的答案并不令人信服。单独的抽象基类也有帮助。例如，来自 2 个对象 {Penguin vs Bird} 的 Fly 行为。我不能简单地告诉面试官根本需要 IFly。即使我有数百万个需要 Fly 的不同对象，我也总是可以为每个对象实现每个 Fly。因为即使我设计了 IFly，我仍然需要在实现类中这样做。请您提供更详细的案例或重新解释接口如何成为必须的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:57:15.677

关于接口的需要。

假设您必须实现机场调度程序。它与机场空间中的物体相互作用，向它们发出有关其位置和空中状况的命令。这组命令是明确定义的，它不（不应该）依赖于空间对象的类型。调度员需要知道位置，他必须能够允许着陆、拒绝着陆、延迟着陆和发出紧急航向修正。为了尽可能容易地实现和维护这一点，我们定义了一种我们在所有“飞机”中实现的接口。

然后我们可以创建一个`AirportDispatcher`，它将与以通用方式实现我们接口的一组对象一起工作，而不知道它是如何实现的（直升机可以在原地等待，但飞机需要在等待时四处走动）甚至飞机的类型。你应该知道的是它会飞，它可以服从你的命令。

请注意，它不是`interface`Java 术语，它只是一个合约，我们如何实现它仅取决于语言的可能性。动态或鸭子类型的语言可以在没有任何语法限制的情况下做到这一点，而静态类型的语言则需要一些额外的工作。

有接口和抽象类。接口和抽象类之间的主要区别在于，一个对象可能有多个接口，但只有一个抽象类（并非*所有*语言都这样，但这是共同点）。接口也*不能*包含实现，而抽象类*可以*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T09:39:50.787

我将稍微更改您的代码以进行解释

## 为什么是灵活性？

这是您系统中的一段代码，它将打印用户名。更重要的是，让我们想象一下，直接使用的不仅仅是一个，而是数百个代码`UserDb`，它们在你的系统中到处传播。

```
public void printUserName(String userId) {
  UserDb db = getUserDb();
  System.out.println(db.getUserName(userId));
} 
```

现在，如果我们想从文本文件中检索用户信息怎么办？做到这一点的唯一方法是将所有使用的代码更改`UserDb`为`UserTextFile`. 这将花费大量时间，并且很容易引入错误，因为我们可能会意外更改不应该更改的内容。

我们称这些代码`UserDb`为[耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)。

所以这里我们`UserManager`要解决这个问题

```
public class UserManager {

  private UserDb db;

  public UserManager(UserDb db) {
    this db = db;
  }

  public String getUserName(String userId) {
    // return user name using UserDb
  }
} 
```

如果我们系统中的所有代码都使用`UserManager`作为检索用户名的方式。当我们想切换到文本文件时，我们所能做的就是改变里面的代码`UserManager`。

但是，在现实世界的编码中，`UserManager`不可能那么简单，他们可能还有其他责任，例如在查询之前验证输入。我们可能仍然会引入错误。

这就是为什么我们需要另一层来彻底消除这种耦合。

这是一个界面

```
public interface iUserInfo {    
  public String getUserName(int userId);
  public String getUserAge(string username);
} 
```

...我们`UserManager`依赖于`iUserInfo`

```
public class UserManager {

  private iUserInfo info;

  public UserManager(iUserInfo info) {
    this info = info;
  }

  public String getUserName(String userId) {
    // return user name using info
  }
} 
```

现在，每当我们想要更改`UserDb`为`UserTextFile`时，我们所做的就是编写一个新的具体类`iUserInfo`。`UserManager`永远不会注意到，因为它不需要知道实现的细节。

我们修改的代码越少，我们引入错误的机会就越少。这就是我们想要这种灵活性的原因。

这种技术称为[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)。

* * *

## 工厂方法 ?

工厂方法是处理对象创建的设计模式之一。检查此问题以获取更多信息

[工厂、抽象工厂和工厂方法](https://stackoverflow.com/questions/2079902/factory-abstract-factory-and-factory-method)

您的专业之所以提到工厂方法，是因为这些模式用于隐藏对象的创建知识，`iUserInfo`在这种情况下，对于其他类，这意味着这些方法/类是唯一与具体类耦合的代码。

所以我们可以最小化改变实施的影响`iUserInfo`

## 接口与抽象类？

接口使您所有的具体类都可以在没有扩展它的情况下工作。这很好，因为在 Java 中，您只能从一个类继承。

另一方面，抽象类使您更容易处理在不同实现之间使用的公共代码。

您可以查看此问题以获取更多详细信息 [接口与基类](https://stackoverflow.com/questions/56867/interface-vs-base-class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:51:18.287

您的教授讲座是关于[松散耦合](http://en.wikipedia.org/wiki/Loose_coupling)的，示例指的是[Bridge PAttern](http://en.wikipedia.org/wiki/Bridge_pattern)。

更多详情：

该类`UserManager`必须处理应用业务逻辑和规则的数据，保存和检索它。这个类必须只知道它必须在某个地方保存和检索数据，但它不负责做脏活。相反，您将拥有一个对象，即`iUserInfo`实例，它将处理数据的保存和检索。这个对象将如何完成这项工作？它与`UserManager`班级无关。这是松耦合。

现在，为什么必须是一个接口/抽象类来处理这项工作？因为您可能有不同的数据源：文本文件、xml 文件、关系数据库、内存数据库、外部设备等等。你的`UserManager`类不能直接调用数据源处理程序，而是另一个类将提供这个确切的实现。对于这种情况，您必须使用由抽象类或接口处理的抽象。抽象类和接口是一个契约，它建立了客户端可以使用的方法，但不一定是方法的实现。这是如何工作的？让我们看一个例子：

```
public interface iUserInfo {
    //the client (any class that uses the interface) knows that can get the UserName
    //and the UserAge, it doesn't need to know how...
    string getUserName(int userId);
    string getUserAge(string username);
}

public class UserDb implements iUserInfo
{
    string getUserName(int userId)
    {
        //this implementation will connect to database to get the data
    }
}

public class UserTxtFile implements iUserInfo
{
    string getUserName(int userId)
    {
        //this implementation will read from a text file to get the data
    }
} 
```

到现在为止，`UserDb`and`UserTxtFile`类将处理这些脏活。现在，您`UserManager`可以喘口气了，因为它一定不知道数据将存储在哪里。但是还有另一个问题：应该`UserManager`使用哪个实现来获取数据？

工厂方法是[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)的一个实现，它声明客户端不能知道它应该使用哪个实现，相反，工厂将根据配置或其他业务规则做出决定。这意味着，`UserManager`该类可以安息，因为它不必定义访问或实现！听起来不错吧？现在，例如，只有一个简单的方法充当工厂方法

```
//it will return the iUserInfo implementation based in a boolean variable
//this could become more complex depending on the rules, like retrieving the boolean
//value from a configuration file
public iUserInfo GetUserInfoObjFactory(bool dbOrTxt)
{
    return dbOrTxt? uTxtFile:uDB;
} 
```

更多信息：

*   [C# 中的设计模式教程](http://www.dofactory.com/Patterns/Patterns.aspx)，但可以轻松移植到 Java。
*   [抽象类与接口](http://www.codeproject.com/Articles/11155/Abstract-Class-versus-Interface)只是有关此讨论的大量文章之一。

# c# - 覆盖 C# 的自定义控件 OnButtonClick 事件处理程序

> ID：11814971
> 
> 赞同：0
> 
> 时间：2012-08-05T08:25:23.737
> 
> 标签：c#, asp.net, button, onclick, custom-controls

我有一个发送电子邮件的复合自定义控件。邮件在按钮单击时发送。但是，邮件是在我单击按钮两次后发送的。有谁知道为什么会这样，我该如何解决？这是代码：

```
namespace EmailControl
{
    [DefaultProperty("Text")]
    [ToolboxData("<{0}:ServerControl1 runat=server></{0}:ServerControl1>")]
    public class ServerControl1 : WebControl,INamingContainer
    {
        public string Text
        {
            get { return ViewState["Text"] as string ?? "[" + this.ID + "]"; }
            set { ViewState["Text"] = value; }
        }

        public string Host
        {
            get { return ViewState["host"] as string ?? "[" + this.ID + "]"; }
            set { ViewState["host"] = value; }
        }

        public string From
        {
            get { return ViewState["from"] as string ?? "[" + this.ID + "]"; }
            set { ViewState["from"] = value; }
        }

        public int Port
        {
            get { return (int) ViewState["port"]; }
            set { ViewState["port"] = value; }
        }

        public string UserName
        {
            get { return ViewState["user"] as string ?? "[" + this.ID + "]"; }
            set { ViewState["user"] = value; }
        }

        public string Password
        {
            get { return ViewState["pass"] as string ?? "[" + this.ID + "]"; }
            set { ViewState["pass"] = value; }
        }

        TextBox txtEmail;
        TextBox txtBody;
        TextBox txtSubject;
        Button btnSend;

        protected override void CreateChildControls()
        {
            txtEmail = new TextBox();
            txtEmail.ID = "txtEmail";
            txtEmail.AutoPostBack = true;
            LiteralControl l1 = new LiteralControl("<br/>");
            txtSubject = new TextBox();
            txtSubject.ID = "txtSubject";
            txtEmail.AutoPostBack = true;
            this.Controls.Add(txtEmail);
            this.Controls.Add(txtSubject);
            LiteralControl l2= new LiteralControl("<br/>");
            txtBody = new TextBox();
            txtBody.ID = "txtBody";
            txtBody.AutoPostBack = true;
            txtBody.TextMode = TextBoxMode.MultiLine;
            txtBody.Width = 200;
            txtBody.Height = 200;
            this.Controls.Add(txtBody);
            btnSend = new Button();
            btnSend.ID = "btnSend";
            btnSend.Width = 100;
            btnSend.Text = "Send";
            btnSend.Click += new EventHandler(OnButtonClick);
            this.Controls.Add(btnSend);
        }

        protected void OnButtonClick(object sender,EventArgs e)
        {
            TextBox txtEmail = (TextBox)this.FindControl("txtEmail");
            MailMessage msg = new MailMessage(From,txtEmail.Text);
            TextBox txtSubject = (TextBox)this.FindControl("txtSubject");
            TextBox txtBody = (TextBox)this.FindControl("txtBody");
            msg.Subject = txtSubject.Text;
            msg.Body = txtBody.Text;

            SmtpClient smtp = new SmtpClient();
            smtp.Host = Host;
            smtp.Port = Convert.ToInt32(Port);
            smtp.EnableSsl = true;
            smtp.Credentials = new System.Net.NetworkCredential(UserName,
                Password);
            smtp.Send(msg);
        }
    }
} 
```

aspx页面中的代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
    ServerControl11.Host = "smtp.gmail.com";
    ServerControl11.Port =25;
    ServerControl11.UserName = "*******************@gmail.com";
    ServerControl11.Password = "************";
    ServerControl11.From = "******************@gmail.com";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T12:58:12.187

您是说每次单击按钮时都会发送电子邮件？如果是这样，您只需要防止第二次回发。看这里：

[如何防止重复回发混淆我的业务层](https://stackoverflow.com/questions/481564/how-to-prevent-repeated-postbacks-from-confusing-my-business-layer)

# oauth - oauth2 是否为支付应用程序提供足够的安全性？

> ID：11814972
> 
> 赞同：1
> 
> 时间：2012-08-05T08:25:28.823
> 
> 标签：oauth, oauth-2.0

据我了解，oauth2 不会对请求进行签名，而是依赖于传输层的安全性（通过 https）。这似乎容易受到重放攻击和证书未验证的 ssl 代理攻击（这在客户端应用程序中似乎很常见）。

从这个意义上说，它似乎不像 HMAC-sha256 或类似的东西那样安全。这对某些应用程序来说可能很好，但对于移动大量资金的应用程序来说，这似乎不够安全。我理解正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:37:15.180

我不得不同意你的看法。在大多数情况下，如果您的用户进行需要更高级别审查的活动（即付款），那么您希望有更多的安全性，甚至是一些额外的确认，即确实是正确的用户做活动。OAuth 并没有真正提供额外的安全层，我真的不推荐它用于支付活动。

# ios - 使用 iOS 中生成的文件在 MacOS X 上编码问题

> ID：11814981
> 
> 赞同：0
> 
> 时间：2012-08-05T08:26:57.460
> 
> 标签：ios, macos, utf-8, character-encoding

我有一个问题：在 iOS 中生成 .txt 文件，该文件可能包含 Unicode 字符，将其存储为 UTF-8 等等。当我把这个文件放到 MacOS XI 上时，这个特殊字符上会出现垃圾。有趣的是，我在 10.7.X (Lion) 上得到它，它打开得很好。问题是 10.6.8 和 TextEdit，另一个编辑器（例如 SublimeText 2）打开得很好。它不是一台特定的计算机，它发生在我迄今为止测试的任何雪豹上。

我这样写文件：

```
//correctString = [NSString stringWithCString:[correctString cStringUsingEncoding:NSUTF8StringEncoding] encoding:NSUTF16StringEncoding];
[correctString writeToFile:destFileText atomically:YES encoding:NSUnicodeStringEncoding error:nil]; 
```

（实际上尝试了所有可能的组合）

任何想法 ？

**编辑**：问题已通过一些 10.6.8 更新解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:20:20.987

尝试使用：

`NSUTF8StringEncoding`

而不是 NSUnicodeStringEncoding。

# xcode - 如何删除 UIBarButtonItem 旁边的填充

> ID：11814983
> 
> 赞同：7
> 
> 时间：2012-08-05T08:27:40.957
> 
> 标签：xcode, uinavigationbar, uibarbuttonitem

如图所示，我已向导航栏的自定义右栏按钮项添加了一个自定义按钮。

我希望能够删除按钮后的空格，以便它触摸屏幕的右边缘，但即使在搜索后也找不到解决方案。如果有人能提到如何，那就太好了。

这是我正在使用的代码

```
UIButton *aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];    
aButton.frame = CGRectMake(50.0, 0.0, 60, 44);
UIBarButtonItem *aBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:aButton];
[aButton addTarget:self action:@selector(testButtonControl:) forControlEvents:UIControlEventTouchUpInside];

self.navigationItem.rightBarButtonItem = aBarButtonItem; 
```

![在此处输入图像描述](../Images/06336e9e15f15ed07fa1c9214a8d830d.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-05T17:49:31.487

您可以添加一个具有负宽度的固定空间元素（我知道，这听起来像是一个 hack，但它有效）：

```
UIButton *aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];    
aButton.frame = CGRectMake(50.0, 0.0, 60, 44);
UIBarButtonItem *aBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:aButton];
[aButton addTarget:self action:@selector(testButtonControl:) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *spaceFix = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:NULL];
spaceFix.width = -5;

self.navigationItem.rightBarButtonItems = @[spaceFix, aBarButtonItem]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T11:23:43.407

您必须创建一个新视图，添加按钮和您想要的所有其他内容，并将其添加到 titleView，如图所示。

```
- (void)viewDidLoad {
    self.navigationItem.titleView = [self titleView];
}

- (UIView *)titleView {
    CGFloat navBarHeight = self.navigationController.navigationBar.frame.size.height;
    CGFloat width = 0.95 * self.view.frame.size.width;
    UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, width, navBarHeight)];
..
// please add what you need here
....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T09:00:04.607

你不能，除非你`UINavigationBar`通过类别继承或覆盖它的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-01T14:46:26.513

您可以通过添加 UIView 来做到这一点，然后在其中添加 x=spaceWidth y = 0 的按钮。

查看下面的代码以获取正确的项目（这是在 UINavigationItem 类别中）

1 -

`UIView *_rightView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 44, 44)]; [_rightView setBackgroundColor:[UIColor purpleColor]];//debug color`

2-

```
 UIButton *aLeftButton = [[UIButton alloc] init];

   //...//

    aLeftButton.frame = CGRectMake(-15, 0, 44, 44);//in your case +15
    [aLeftButton setBackgroundImage:[UIImage imageNamed:buttonName] forState:UIControlStateNormal];
    [aLeftButton setBackgroundImage:[UIImage imageNamed:[buttonName stringByAppendingString:@"Selected"]] forState:UIControlStateSelected];
    [aLeftButton setAdjustsImageWhenDisabled:NO];
    [aLeftButton setAdjustsImageWhenHighlighted:NO];

    [aLeftButton addTarget:theSender action:aSelector forControlEvents:UIControlEventTouchUpInside];
    [_rightView addSubview:aLeftButton];
    UIBarButtonItem *aBarButton = [[UIBarButtonItem alloc] initWithCustomView:_rightView];
    [leftBarButtonsItem addObject:aBarButton];` 
```

3

`self.leftBarButtonItem = leftBarButtonsItem;`

# c# - 如何使用 c# 在控制台应用程序中计算平均值

> ID：11814984
> 
> 赞同：-4
> 
> 时间：2012-08-05T08:27:50.867
> 
> 标签：c#, average

这是开发代码它是一个基本应用程序我需要代码帮助来计算平均值应该等于并显示 3.00

```
 // Define constrants and variables
    // Constrants
    int MAX_RESPONSE = 5;
    int MIN_RESPONSE = 1;
    int MAX_QUESTIONS = 50;
    string scale5 = "5 - STRONGLY AGREE";
    string scale4 = "4 - AGREE";
    string scale3 = "3 - NEITHER AGREE NOT DISAGREE";
    string scale2 = "2 - DISAGREE";
    string scale1 = "1 - STRONGLY DISAGREE";
    string scale0 = "0 - UNABLE TO ANSWER";
    string Question = "Question : C# is better than C++. Do you\n";

        // Variables
        int Response = 0;
        int ValidResponseCount = 5;
        int NonResponseCount = 2;
        int QuestionCount = 7;
        int MaximumResponse = MIN_RESPONSE;
        int MinimumResponse = MAX_RESPONSE;
        int TotalResponse = 1;
        var AverageResponse = 0;

        //calculate
        AverageResponse = TotalResponse / ValidResponseCount;

        // Output results
        Console.WriteLine("SURVEY RECORDING SYSTEM ");
        Console.WriteLine(Question + "\n" +
            "\t" + scale5 + "\n" +
            "\t" + scale4 + "\n" +
            "\t" + scale3 + "\n" +
            "\t" + scale2 + "\n" +
            "\t" + scale1 + "\n" +
            "\t" + scale0 + "\n\n");
        Console.WriteLine("response value");
        Console.WriteLine("RESULTS " +
            "\n Number of valid responses     : " + ValidResponseCount +
            "\n Number of non responses       : " + NonResponseCount +
            "\n Number of times question asked: " + QuestionCount +
            "\n Maximum response              : " + MaximumResponse +
            "\n Minimum response              : " + MinimumResponse +
            "\n Average response value        : " + AverageResponse); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:32:50.657

```
double AverageResponse = (double)TotalResponse / (double)ValidResponseCount; 
```

会做 - 因为您使用的是整数，所以`/`会返回一个整数并可能向上/向下舍入结果，转换为`double`会将此结果更改为有效结果

# php - PHP，MYSQL - 如何根据日期获取行？

> ID：11814986
> 
> 赞同：-1
> 
> 时间：2012-08-05T08:28:28.247
> 
> 标签：php, mysql, date

在名为`date`(tyupe **int(11)** ) 的数据库列中，我将日期存储为整数。然后，我有变量`$day`, `$month`，`$year`我需要获取相应日期的所有行（代表变量`$day`, `$month`, `$year`）。

怎么做？

我试过这样：

```
mysql_query("SELECT id FROM persons WHERE DATE_FORMAT( `date` , '%Y-%m-%d' ) =
            '".date("$year-$month-$day")."'") 
```

但不幸的是，这对我不起作用......谁能给我一个小费，拜托，如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:36:09.337

您将希望避免将日期列包装在函数中以便仍然能够利用索引。

如果您在列上设置了索引，这对于您的方案来说是最有效的方法`date`：

```
$input_date = mktime(0, 0, 0, $month, $day, $year);
mysql_query("SELECT id FROM persons WHERE date = $input_date"); 
```

* * *

`date`将列实际存储为实际`DATE`类型会是一个更好的主意。这样，您可以进行各种引人注目的日期比较和计算，否则您无法使用简单的基于整数的 unix 时间戳。

# html - chrome没有在父div标签中显示背景图片

> ID：11814987
> 
> 赞同：0
> 
> 时间：2012-08-05T08:28:35.387
> 
> 标签：html, css

我有一个包含两个子 div 标签的父 div 标签，我想使用图像作为背景。父div标签的css样式为：

```
#maindiv
{
    width:55%;
    background-image:url(F:/sem5/web tech/13sand.jpg);
    overflow:hidden;
} 
```

身体是：

```
<body background="National Geographic Wallpapers 022.jpg" >
<center >
<div id="maindiv"  >
        <h2 style="background-color:#191970;font-family:Verdena;color:white;height:91px;font-size:80px;">Gagandeep Kaur</h2>

        <div style="float:left;width:37%;">
                <table border="0">
                <tr><a style="cursor:pointer;text-decoration:none;font-size:28px" href="javascript:filldata('ginfo');" >General Information</a><br/><tr>
                <tr><div id="ginfo"></div></tr>
                <tr><a style="cursor:pointer;text-decoration:none;font-size:28px" href="javascript:filldata('ainfo');" >Academic Information</a><br/></tr>
                <tr><div id="ainfo"></div></tr>
                <tr><a style="cursor:pointer;text-decoration:none;font-size:28px" href="javascript:filldata('h');" >Hobbies</a><br/></tr>
                <tr><div id="h"></div></tr>
                <tr><a style="cursor:pointer;text-decoration:none;font-size:28px" href="javascript:filldata('aim');" >Aim</a></tr>
                <tr><div id="aim"></div></tr>
                </table>
                </div>
            <div style="float:right;width:63%;">
                <img src="2011-08-04 18.31.38_1.jpg" align="right" width="300px" height="500px">
                </div>
    </div>

</center>
</body> 
```

此代码在 IE 中显示背景，但在 chrome 中不显示。哪里有什么问题？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:32:01.173

您是否尝试过在图片的网址周围加上引号？

```
#maindiv
{
    width:55%;
    background-image:url('F:/sem5/web tech/13sand.jpg');
    overflow:hidden;
} 
```

# java - 在哪里设置空指针异常

> ID：11814988
> 
> 赞同：0
> 
> 时间：2012-08-05T08:28:47.227
> 
> 标签：java, eclipse

我在开发 android 应用程序方面非常新。当我在模拟器中运行我的程序时，它会强制关闭。我发现我需要设置一个 nullpointerexception，但我不知道在哪里设置这些东西。请帮助我。

公共类 SampleActivity 扩展 Activity {

```
TextView dp_octet1, dp_octet2, dp_octet3, dp_octet4, dp_slashes;
int i = 0;
int j = 0;
int octet[];

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sample);
    iniTextView();
    generatingRandomIpAddress();
}

private void generatingRandomIpAddress() {

   Random i = new Random();           //Random number between 0-2
   if(i.nextInt(3)==0){
       octet[0] = 8+(i.nextInt(22));
       octet[1] = 1+(i.nextInt(126));
   }
   if(i.nextInt(3)==1){
       octet[0] = 16+(i.nextInt(14));
       octet[1] = 128+(i.nextInt(63));
   }
   if(i.nextInt(3)==2){
       octet[0] = 24+(i.nextInt(6));
       octet[1] = 192+(i.nextInt(31));
   }
   octet[2] = (i.nextInt(255));
   octet[3] = (i.nextInt(255));
   octet[4] = (i.nextInt(255));

   //Display the problem
   dp_slashes.setText(octet[0]);
   dp_octet1.setText(octet[1]);
   dp_octet2.setText(octet[2]);
   dp_octet3.setText(octet[3]);
   dp_octet4.setText(octet[4]);

}

private void iniTextView() {
    // TODO Auto-generated method stub
    dp_octet1 = (TextView) findViewById(R.id.octet1);
    dp_octet2 = (TextView) findViewById(R.id.octet2);
    dp_octet3 = (TextView) findViewById(R.id.octet3);
    dp_octet4 = (TextView) findViewById(R.id.octet4);
    dp_slashes = (TextView) findViewById(R.id.slashes);
} 
```

原木猫

08-05 09:11:07.180: D/AndroidRuntime(1286): 关闭 VM 08-05 09:11:07.180: W/dalvikvm(1286): threadid=1: 线程退出未捕获异常 (group=0x4001d800) 08 -05 09:11:07.203: E/AndroidRuntime(1286): 致命异常: main 08-05 09:11:07.203: E/AndroidRuntime(1286): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example .myscratches/com.example.myscratches.SampleActivity}：java.lang.ArrayIndexOutOfBoundsException 08-05 09:11:07.203：E/AndroidRuntime(1286)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 08- 05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app。 ActivityThread.access$2300(ActivityThread.java:125) 08-05 09:11:07.203:E/AndroidRuntime(1286): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.os.Handler.dispatchMessage(Handler .java:99) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.os.Looper.loop(Looper.java:123) 08-05 09:11:07.203: E/AndroidRuntime(1286 ): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 java.lang.reflect.Method.invokeNative(Native Method) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 java.lang.reflect.Method.invoke(Method.java:521) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 08-05 09:11:07.203: E/AndroidRuntime(1286): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java: 626) 08-05 09:11：07.203：E/AndroidRuntime（1286）：在 dalvik.system.NativeStart.main（本机方法）08-05 09：11：07.203：E/AndroidRuntime（1286）：引起：java.lang.ArrayIndexOutOfBoundsException 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 com.example.myscratches.SampleActivity.generatingRandomIpAddress(SampleActivity.java:32) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 com.example .myscratches.SampleActivity.onCreate(SampleActivity.java:24) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08-05 09:11 :07.203: E/AndroidRuntime(1286): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 08-05 09:11:07.203: E/AndroidRuntime(1286): ... 还有 11 个07.203: E/AndroidRuntime(1286): 引起: java.lang.ArrayIndexOutOfBoundsException 08-05 09:11:07.203: E/AndroidRuntime(1286): at com.example.myscratches.SampleActivity.generatingRandomIpAddress(SampleActivity.java:32) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 com.example.myscratches.SampleActivity.onCreate(SampleActivity.java:24) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 08-05 09: 11:07.203: E/AndroidRuntime(1286): ... 11 更多07.203: E/AndroidRuntime(1286): 引起: java.lang.ArrayIndexOutOfBoundsException 08-05 09:11:07.203: E/AndroidRuntime(1286): at com.example.myscratches.SampleActivity.generatingRandomIpAddress(SampleActivity.java:32) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 com.example.myscratches.SampleActivity.onCreate(SampleActivity.java:24) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 08-05 09: 11:07.203: E/AndroidRuntime(1286): ... 11 更多generateRandomIpAddress(SampleActivity.java:32) 08-05 09:11:07.203: E/AndroidRuntime(1286): at com.example.myscratches.SampleActivity.onCreate(SampleActivity.java:24) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java :2627) 08-05 09:11:07.203: E/AndroidRuntime(1286): ... 11 更多generateRandomIpAddress(SampleActivity.java:32) 08-05 09:11:07.203: E/AndroidRuntime(1286): at com.example.myscratches.SampleActivity.onCreate(SampleActivity.java:24) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08-05 09:11:07.203: E/AndroidRuntime(1286): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java :2627) 08-05 09:11:07.203: E/AndroidRuntime(1286): ... 11 更多performLaunchActivity(ActivityThread.java:2627) 08-05 09:11:07.203: E/AndroidRuntime(1286): ... 11 更多performLaunchActivity(ActivityThread.java:2627) 08-05 09:11:07.203: E/AndroidRuntime(1286): ... 11 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:33:48.553

您需要先进行初始化`octet`，然后才能开始为其元素分配值。将您的声明更改为：

```
int octet[] = new int[4]; 
```

或者，添加这一行：

```
octet = new int[4]; 
```

在`generatingRandomIpAddress()`开始分配`octet`.

PS 以后，当您寻求异常帮助时，您应该发布显示异常堆栈跟踪的 logcat 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:17:51.320

我不确定这是否适用于 ADT，但如果我有一段 Java 代码抛出 NullPointerException 并且我必须找出它被抛出的位置，我会执行以下操作之一：

1.  遍历堆栈跟踪
2.  放置一个异常断点。

对于上面的#2，看看[**这个**](http://bit.ly/McPEbp)。如果您在设置此断点时选择“未捕获”，则在引发*任何*NullPointer 异常时执行应自动停止。

# mysql - 如何使内部连接有效的mysql

> ID：11814994
> 
> 赞同：2
> 
> 时间：2012-08-05T08:30:19.273
> 
> 标签：mysql, performance, inner-join

我有两个名为 1 的表。表 A - 具有多个列，主键为 user_id （900,000+ 条记录） 2\. 表 B - 具有称为 user_id 的单列（900+ 条记录）

表 A 包含表 B 的所有 user_id 等等。我需要通过 user_id 获取匹配 A、B 行的 * 列列表。我正在使用下面的查询，它已经在我的 p4 机器上运行了 1 个小时，CPU 为 100%，但看不到任何结果。

```
SELECT a.* FROM tableA AS a INNER JOIN tableB AS b ON a.user_id = b.user_id; 
```

有没有办法使查询执行快速？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:44:49.827

首先确保两者`tableA`和在其字段`tableB`上都有索引。`user_id`

* * *

如果标准技术没有帮助，您可以使用以下命令强制 MySQL 以不同的顺序连接这两个表`STRAIGHT_JOIN`：

```
SELECT a.*
FROM          tableB AS b /* first process the 900 rows */
STRAIGHT_JOIN tableA AS a /* and find matching rows for every tableB row */
           USING user_id; /* BTW, you could use USING here :) */ 
```

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

> STRAIGHT_JOIN 与 JOIN 类似，只是左表总是在右表之前读取。这可用于连接优化器以错误顺序放置表的那些（少数）情况。

其他信息：[http ://dev.mysql.com/doc/refman/5.0/en/left-join-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/left-join-optimization.html)

> ... LEFT JOIN 或 STRAIGHT_JOIN 强制的表读取顺序 ...
> 
> 对于 LEFT JOIN，如果生成的 NULL 行的 WHERE 条件始终为假，则将 LEFT JOIN 更改为普通连接。

# c# - 更新 EF 4.1 中的记录

> ID：11814996
> 
> 赞同：3
> 
> 时间：2012-08-05T08:30:50.680
> 
> 标签：c#, .net, sql, entity-framework, entity-framework-4.1

我有一个员工对象说：

```
public class Employee
{
    public int Id {get; set;}
    public int Name {get; set;}
    public int Address {get; set;}

 ...other few 10's of properties
} 
```

问题是我如何只更新名称？例如。如果我想更新名称，我会

```
Employee e = Db.Employees.Where(e => e.Id == someId).SingleOrDefault();
e.Name = "Jack";
Db.SaveChanges(); 
```

如您所见，为了更新，我必须先获取对象，然后更新，然后调用 SaveChanges()。对于可以在对数据库的单个查询中完成的任务，我必须触发 2 个查询：1）获取对象 2）更新所需的对象并保存更改。

对于传统的存储过程方法，我只需传递 Id、传递新名称并编写 Update 语句，我就完成了。实体框架真的那么低效还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T08:55:38.160

您可以有选择地更新列：

```
var employee = new Employee() { Id = someId, Name = "Jack" }
Db.Employees.Attach(employee);
Db.Employees.Entry(employee).Property(e => e.Name).IsModified = true;

Db.SaveChanges(); 
```

注意：只有 .NET 4.5 的 EF 5 支持设置`IsModified`回`false`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:41:44.550

你应该使用[Attach](http://msdn.microsoft.com/en-us/library/bb896271.aspx)方法

```
var e = new Employee() { Id = someId, Name = "Jack" }
Db.Employees.Attach(e);
Db.Employees.Entry(e).Property(p => p.Name).IsModified = true

Db.SaveChanges(); 
```

# java - 目标特定 JXTable 列值以在新框架中打开

> ID：11814998
> 
> 赞同：1
> 
> 时间：2012-08-05T08:30:59.460
> 
> 标签：java, swing, jtable, mouseevent, swingx

双击时，如何定位（在 JXTable 中）来自不同行的特定列值以打开新框架？

![在此处输入图像描述](../Images/958411c35a2197ac837a43b666eac3bc.png)

我现在有这个代码：

```
myTable.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
                if (e.getClickCount() == 2) {
                    JXTable target = (JXTable)e.getSource();
                    int row = target.getSelectedRow();
                    int column = target.getTableColumn(3);  //for example the third column
                    new Detail().setVisible(true);

                }
            }
        }); 
```

使用此代码解决：

```
 final JOptionPane pane = new JOptionPane((Frame) null, JOptionPane.PLAIN_MESSAGE, JOptionPane.DEFAULT_OPTION);

     final JDialog d = pane.createDialog((Frame) null, "Comments");
                   d.setModal(false);
                   d.setAlwaysOnTop(true);
                   d.pack();
     myTable.addMouseListener(new MouseAdapter() {
          public void mouseClicked(MouseEvent e) {
                   if (e.getClickCount() == 2) {
                          int row = myTable.rowAtPoint(e.getPoint());
                          Object value1 = myTable.getValueAt(row, 4);
                          pane.setMessage(value1);
                   if (!d.isVisible())
                   d.setLocationRelativeTo(myTable);
                   d.setVisible(true);
                   }
          }
      }); 
```

更新 1：

正如@mKorbel 所说，我想使用像[这个例子](https://stackoverflow.com/questions/7423533/jtable-with-jpopupmenu)一样的JPopupMenu （由@mKorbel 提供）。但是我怎样才能实现一个在单击 JMenuItem 时打开的 JDialog。

```
private void createPopupMenu() {
        JPopupMenu popup = new JPopupMenu();
        JMenuItem MenuItemComments = new JMenuItem("Show Comments");
        JMenuItem MenuItemReference = new JMenuItem("Show Reference");
        popup.add(MenuItemComments);
        popup.add(MenuItemReference);

        MouseListener popupListener = new PopupListener(popup);
        Table_Employee.addMouseListener(popupListener);
    }

private class PopupListener extends MouseAdapter {
        private JPopupMenu popup;
        PopupListener(JPopupMenu popupMenu) {
            popup = popupMenu;
        }
        @Override
        public void mousePressed(MouseEvent e) {
            maybeShowPopup(e);
        }
        @Override
        public void mouseReleased(MouseEvent e) {
            if (Table_Employee.getSelectedRow() != -1) {
                maybeShowPopup(e);
            }
        }
        private void maybeShowPopup(MouseEvent e) {
            if (e.isPopupTrigger()) {

        // get row that pointer is over
        int row = Table_Employee.rowAtPoint(e.getPoint());

        // if pointer is over a selected row, show popup
        if (Table_Employee.isRowSelected(row)) {
           popup.show(e.getComponent(), e.getX(), e.getY());

        }
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:40:57.007

1.  不要`J(X)Frame`在运行时创建新的，这个容器的内容将是相同的，没有理由，创建一次，重用这个容器，并在屏幕上可见（`hide / show)`使用`setVisible(false / true)`

2.  不要创建一个`J(X)Frame`，创建一个`J(X)Dialog`与父级的`JXTable`，然后对话框将居中于`JXTables`

3.  您也可以使用`ListSelectionListener`，但使用单选模型

4.  阅读有关`JList`, `JTable`and的 Oracle 教程`ListSelectionListener`, 逻辑将是相同的 and for `SwingX components`too,

5.  我将使用[JPopup 作为控件来显示 JDialog](https://stackoverflow.com/questions/7423533/jtable-with-jpopupmenu)，只是为了避免来自鼠标或键盘的烦人事件

编辑

必须添加

*   `d.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE)`, 那么`JDialog`never 将被关闭只更改为`setVisible(false);`

*   必须从选定`JTable`的行中编码值，

*   创建一个新的、单独的 void 将值从`JTable`s 行填充到`JComponent`放入的 s`JDialog`

*   确保`J(X)Table`已更改`selectionMode`为`single selection`

*   （非必需）现在您可以在屏幕上定位，但`JDialog`在屏幕上`JDialog`仍然不可见

*   然后调用`d.setVisble(true)`，我建议将此代码行包装到`invokeLater()`，然后`JDialog`在所有更改完成后将可见，将此事件移动到末尾`Event Dispatch Thread`