# StackOverflow 问答 12244000-12244999

# php - PHP：Facebook Open Graph 的 $_GET 图像位置

> ID：12244000
> 
> 赞同：-1
> 
> 时间：2012-09-03T07:59:01.533
> 
> 标签：php, facebook, image

是否可以获取网页上图像的位置？我想将它用于`og:image`.

例子：

```
<meta property="og:image" content="<?php 'get the image location' ?>" /> 
```

它适用于 Open Graph Facebook 共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:16:50.790

这是一个很长的答案，由于您没有为您尝试做的事情提供代码，这里是您应该做什么的高级描述：

（注意：OP 正在尝试从 HTML 文档中获取图像源，如果有的话）

您需要使用 PHP 下载页面，找到一个`<img>`标签，获取它的源代码并将其作为结果返回。根据您从哪里获取图像，您可能希望从某个位置获取唯一的图像（不仅仅是可能是徽标的第一张图像，甚至是无意义的 1sq px 图像）。

例如，如果您想获取 9gag 上的第一个用户共享图像，您将`<img>`在“.img-wrap” div 中查找标签。解析 HTML 文档的一种简单方法是使用：[http](http://simplehtmldom.sourceforge.net/) ://simplehtmldom.sourceforge.net/ - 该页面非常易于解释。

您需要将所有内容包装在一个函数中，例如并`getImageFromWebsite(URL)`让该函数返回`src``<img>`

这样做的缺点：

*   您指向的网站将对您的内容负责。即使您“知道”包含哪些图像，这些图像也可以并且可能会随着时间而改变。
*   您指向的网站的结构可能会发生变化。你的功能也必须改变。
*   如果您决定消耗太多带宽，该网站可能会决定阻止您的服务器。
*   您无法控制内容

我可以在列表中添加更多内容。练习这样做很有趣，但不是很实用。

# c# - Visual Studio 2010 Web 应用程序未在客户端计算机上反映用户名和用户域

> ID：12244001
> 
> 赞同：1
> 
> 时间：2012-09-03T07:59:10.020
> 
> 标签：c#, visual-studio-2010, web-applications

我在 Windows Server 2008 上使用 Visual Studio 2010 创建了一个 Web 应用程序，代码如下：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = Environment.UserDomainName.ToString() + " " + Environment.UserName.ToString();

    } 
```

我注意到当我在服务器上调试/运行 Web 应用程序时，用户和用户域通过`Label1`标签框正确显示在 Web 应用程序上。

但是，当我将 Web 应用程序发布到 IIS 并从客户端计算机访问它时。用户和用户域根本不显示。

客户端机器连接到另一个域，所以我想知道这是否会影响上面的代码在客户端机器上显示用户名和用户域？

感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:07:42.117

您可以使用

```
HttpContext.Current.User.Identity.Name; 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.httpcontext.user.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.httpcontext.user.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:09:14.247

检查下面的这篇文章：

[从 Web 应用程序获取用户域/用户名](http://forums.asp.net/t/1121780.aspx/1)

[如何获取域名和用户名？](http://www.justskins.com/forums/how-can-i-get-37645.html)

最好的祝福

# android - HttpUrlConnection.disconnect 会关闭 InputStream 吗？

> ID：12244002
> 
> 赞同：2
> 
> 时间：2012-09-03T07:59:12.253
> 
> 标签：android

调用 disconnect() 后 InputStream 是否仍然可用？

我想为将返回 InputStream 但关闭连接的 HTTP 请求创建一个帮助程序类。可能吗 ？

例如：

```
public InputStream Get(String url) {
    URL u = new URL(url);
    HttpUrlConnection con = (HttpUrlConnection) url.openConnection();
    InputStream in = null;
    try {
        in = con.getInputStream();
    } finally {
        con.disconnect();
    }

    return in;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:06:35.763

在断开连接之前，请确保您已阅读 InputStream！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:15:28.343

不可能。输入流只是到服务器的管道，它不包含任何数据。你可以这样做：

```
public byte[] Get(String url) {
URL u = new URL(url);
byte [] data = null
HttpUrlConnection con = (HttpUrlConnection) url.openConnection();
InputStream in = null;
try {
    in = con.getInputStream();
    data = readDataFromStream(in);
} finally {
    con.disconnect();
}

return data; 
```

}

# visual-studio-2010 - 将 MMC 管理单元从 VS2008 移至 2010

> ID：12244004
> 
> 赞同：0
> 
> 时间：2012-09-03T07:59:26.290
> 
> 标签：visual-studio-2010, visual-studio-2008, gac, mmc, mmc3

这不是一个问题，而是一个评论，因为我已经找到了答案。

问题：
我将一个 VS2008 项目移动到 VS2010，它使用 Microsoft.ManagementConsole 命名空间。该项目的引用针对在 GAC 中注册的 DLL，即文件`C:\WINDOWS\assembly\GAC_MSIL\Microsoft.ManagementConsole\3.0.0.0__31bf3856ad364e35\Microsoft.ManagementConsole.dll`. 但是 VS2010 不再接受该引用，即使我使用命令检查了 DLL 是否仍在 GAC 中`gacutil /l`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:59:26.290

解决方案：
在[MSDN：How-To Create a Hello World Snap-in 上，](http://msdn.microsoft.com/en-us/library/ms692759.aspx "MSDN：如何创建 Hello World 管理单元")我在评论中找到了提示。我宁愿链接文件夹中的原始DLL，而不是链接GAC中的DLL `C:\Program Files\Reference Assemblies\Microsoft\mmc\v3.0\microsoft.managementconsole.dll`。像魅力一样建造。

希望这可以帮助遇到同样问题的人！

# php - Symfony2 ACL 访问对象和类

> ID：12244009
> 
> 赞同：1
> 
> 时间：2012-09-03T07:59:43.337
> 
> 标签：php, symfony, acl

我刚开始使用 Symfony2 ACL，我无法使用分配的用户访问对象。让我解释：

我将权限分配给某些对象的特定用户。我在加载数据夹具上执行此操作：

```
 // creating the ACL
    $aclProvider = $this->container->get('security.acl.provider');
    $objectIdentity = ObjectIdentity::fromDomainObject($order); //entity

    try {
        $acl = $aclProvider->findAcl($objectIdentity);
    } catch (\Symfony\Component\Security\Acl\Exception\Exception $e) {
        $acl = $aclProvider->createAcl($objectIdentity);
    }

    // retrieving the security identity of the currently logged-in user
    $securityIdentity = UserSecurityIdentity::fromAccount($user);

    // grant owner access
    $acl->insertObjectAce($securityIdentity, MaskBuilder::MASK_OWNER);
    $aclProvider->updateAcl($acl); 
```

我还想将一个类的所有对象的权限分配给角色 ADMIN，我用一个命令来做到这一点：

```
 $output->writeln('<info>Adding Order OWNER ACE to role ROLE_ADMIN</info>');

    $aclProvider = $this->getContainer()->get('security.acl.provider');
    $objectIdentity = new ObjectIdentity('class', 'VendorName\XXXBundle\Entity\Order');

    try {
        $acl = $aclProvider->findAcl($objectIdentity);
    } catch (\Symfony\Component\Security\Acl\Exception\Exception $e) {
        $acl = $aclProvider->createAcl($objectIdentity);
    }

    $em = $entityManager = $this->getContainer()->get('doctrine')->getEntityManager();
    $role = $em->getRepository('VendorNameXXXBundle:Role')->findOneByRole('ROLE_ADMIN');

    $securityIdentity = new RoleSecurityIdentity($role->getRole());
    $acl->insertClassAce($securityIdentity, MaskBuilder::MASK_OWNER);
    $aclProvider->updateAcl($acl); 
```

我无法让 Symfony2 检测到这些权限。我与两个用户联系，当我从 Twig 联系时：

```
 {% if is_granted('VIEW', entity) %}
    <tr>
        <td colspan="12">Authorized!</td>
    </tr>
    {% else %}
    <tr>
        <td colspan="12">You are not authorized</td>
    </tr>
    {% endif %} 
```

我总是得到：“你没有被授权”。

也从控制器尝试但结果相同：

```
 $securityContext = $this->get('security.context');

    if (false === $securityContext->isGranted('EDIT', $entity))
    {
        throw new \Symfony\Component\Security\Core\Exception\AccessDeniedException;
    }

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Order entity.');
    } 
```

# java - 使用 OntProperty 和 DatatypeProperty - Jena Ontology

> ID：12244015
> 
> 赞同：1
> 
> 时间：2012-09-03T08:00:10.703
> 
> 标签：java, semantics, jena, ontology

```
 OntModel onto = ModelFactory.createOntologyModel(
            OntModelSpec.OWL_MEM_MICRO_RULE_INF, null );

    String inputFileName = "./src/test.xml";    

    InputStream in = FileManager.get().open(inputFileName);
    if (in == null) {
        throw new IllegalArgumentException( "File: " + inputFileName + " not found");
    }

    onto.read(new InputStreamReader(in), "");        

    //ns is the namespace...
    OntClass userClass = onto.getOntClass(ns+"User");

    Individual dada = onto.createIndividual(ns+"Daryl", userClass);

    Property prefBathtub = onto.getProperty(ns+"prefersBathtub");
    Property prefBathtubWt = onto.getProperty(ns+"prefersBathtubWeight");

    dada.addLiteral(prefBathtub, true);
    dada.addLiteral(prefBathtubWt, 0.30);

    OutputStream out = new FileOutputStream("./src/test2.xml");
    onto.write( out, "RDF/XML"); // readable rdf/xml
    out.close(); 
```

如何使用 OntProperty 和/或 DatatypeProperty 而不仅仅是 Property？

通过使用属性，我可以获得相同数量的表现力吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:53:50.877

`ObjectProperty`要从本体模型中获取对象，请使用[`OntModel.getObjectProperty`()](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntModel.html#getObjectProperty%28java.lang.String%29)。对于数据类型属性等`Ont`也是如此。从某种意义上说，这些类更具表现力，因为它们包含方便的 API，例如，通过一个方法调用来获取属性的超属性。但是，由于便捷 API 仅访问图中的底层三元组，严格来说`ObjectProperty`，您无法对 a 进行任何操作，而对`Property`. 这只是更难的工作！

顺便说一句，Jena 允许您使用该方法访问底层 RDF 资源的其他方面`.as()`。所以：

```
Property p = myModel.getProperty( "http://example.com/foo#p" );
OntProperty op = p.as( OntProperty.class ); 
```

# jquery - jquery导航栏：列表项链接不显示子菜单

> ID：12244021
> 
> 赞同：0
> 
> 时间：2012-09-03T08:00:29.610
> 
> 标签：jquery, hyperlink, navigationbar

当我在导航栏中将 li 项目更改为链接（使用 hef）时，仅主页、关于和联系人正在显示（这些是没有子菜单的链接）。未显示注册公司和购买公司（这些是带有子菜单的链接）。我在[jsfiddle.net/vaanipala/rVNQk/7](http://jsfiddle.net/vaanipala/rVNQk/7)上的代码。可能是什么问题呢？

仅供参考，如果 li 项目不是链接，则导航栏显示正常。

谢谢你。

html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 

Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Gama Corporate Services</title>
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#submenu1,#submenu2").children().hide();
    $("#subsubmenu1").children("ul").hide();

    $("#submenu1,#submenu2").hover( 
        function(){//onmouseover 
            $(this).children("ul").slideDown(); 
        }, 
        function(){//onmouseout 
            $(this).children("ul").slideUp(); 
    });

    $("#subsubmenu1").hover(
        function(){//onmouseover

            $(this).children("ul").animate({marginLeft:"130px"}).css({
                                "position":"absolute",
                                "z-index":"-1",
                                "width":"120px",
                                "display":"block"});
            $(this).children("ul").show();
        },
        function(){//onmouseout
            $(this).children("ul").animate({marginLeft:"0"}).css({"position":"absolute","z-index":"-1"});
            $(this).children("ul").hide();
        }); 
});
</script>
</head>

<body>
<div class="contentwrapper">
<div id="header">
<div id="logo">
    <img src="images/logo.png" />
</div>
<!--<div id="company_name">
    Gama Corporate Services Sdn Bhd
</div>-->
<div id="navbar">
    <ul id="menu">
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li id="submenu1"><a href="a.html">Register Company</a>
            <ul>
                <li id="subsubmenu1"><a href="b.html">New Sendirian Berhad Registration</a>
                    <ul>
                        <li><a href="#">Company Price</a></li>
                        <li><a href="#">Register New Company</a></li>
                        <li><a href="#">Steps to Incorporate</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li id="submenu2"><a href="c.html">Buy Company</a>
            <ul>
                <li><a href="#">Sendirian Berhad Ready Made Companies in Malaysia</a></li>
            </ul>
        </li>
        <li><a href="#">Contact</a></li>
    </ul>
</div>
</div>

<div id="leftcolumn">hello</div>
<div id="contentcolumn">Welcome to Gama Corporate Services.
This website is under construction</div>
<div id="rightcolumn">how ru</div>
<div id="footer">copyright gama corporate services</div>
</div><!--end contentwrapper-->

</body>
</html> 
```

样式.css

```
 /* CSS Document */
html body{
    padding:0;
    margin:0 auto;
}

.contentwrapper{
    width:900px;
    margin-left:auto;
    margin-right:auto;
    height: auto !important;
}
#header{
/*  height:20%;
*/  width:900px;
    height:280px;
    /*background-color:#009999;*/
    background-image:url('../images/bg_image.jpg');
    background-repeat:no-repeat;
    float:left;
    text-align:center;
}
#logo{
/*margin-top:15%;*/
float:left;
width:40%;
}
/*#company_name{
float:left;
font:"Times New Roman", Times, serif;
font-size:36px;
margin-top:20%;
}*/
#navbar{
/*  height:10%;
*/  width:900px;
    color:#ffffff;
    float:left;
    margin-top:2%;
    padding:0;
    z-index:0;
    position:relative;

}
#menu{
    list-style-type:none;
    margin:0;
    padding:0;
    position:absolute;
}

#menu li{
float:left;
    display:block;
    width:120px;
    text-align:center;
    background-color:#FF0000;
    padding:0;
    margin:0;
}
#menu li a{
display:block;
width:120px;
text-decoration:none;
line-height:25px;
padding:0;
}
#submenu1 ul, #submenu2 ul{
    float:left;
    display:block;
    width:120px;
    padding:0;
    margin:0;
}
/*#menu li ul ul li*/
#subsubmenu1 ul li
{position:relative;
left:0;
top:-30px;
background:#3399CC;
}

#leftcolumn{
    float:left;
    width:20%;
    background-color:#FF9900;
}
#contentcolumn{
    float:left;
    width:60%;
    background-color:#ffffff;
}
#rightcolumn{
    float:left;
    width:20%;
    background-color:#FF9900;
}
#footer{
/*  height:10%;
*/  width:inherit;
    padding-top:4px;
    background-color:#009999;
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:07:29.577

你应该使用

```
$("#submenu1,#submenu2").children("ul").hide(); 
```

代替

```
$("#submenu1,#submenu2").children().hide();
$("#subsubmenu1").children("ul").hide(); 
```

隐藏子菜单。这将显示带有子菜单的菜单。

您的链接`<a href="a.html">Register Company</a>`是子菜单“submenu1”的子菜单，因此您的代码`$("#submenu1,#submenu2").children().hide();`只是将其隐藏。这就是您看不到这些链接的原因。

# azure - 在 Azure 中配置 common.logging

> ID：12244022
> 
> 赞同：2
> 
> 时间：2012-09-03T08:00:44.773
> 
> 标签：azure, common.logging

我正在开发一个应用程序。使用 Common.Logging (http://netcommon.sourceforge.net/index.html)。一个简化的日志配置（在 web.config 中完成）如下：

```
<configuration>
   ...
   <arg key="configType" value="FILE" />
   <arg key="configFile" value="NLog.config" />
   ...
</configuration> 
```

正如您在此处看到的，配置指向后端日志记录框架的另一个配置文件（此处为 NLog.config）。

我的问题是：在 Azure 中部署时，我应该在此处指定什么路径（在 dev 上，NLog.config 在构建解决方案时被复制，并放在 bin 目录中）。换句话说，获取应用程序在 Azure 中部署的物理位置的最安全方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:38:41.170

在代码中，您可以使用`Server.MapPath("/")`. 现在，您只需确保将**NLog.config**文件部署到应用程序文件夹即可：

1.  将 NLog.config 添加到您的项目中（在您的 Web 应用程序的根目录中）
2.  将构建操作更改为**内容**

为了测试这一点，您可以右键单击您的 Azure 项目并选择**Package**。在 Azure 项目的**bin\Release|Debug\app.publish**文件夹中，您将找到一个***.cspkg**文件。为这个文件添加一个 .zip 扩展名并用 WinRAR/ZIP/7zip/... 打开文件然后你会看到一个类似这样的文件：**SomeWebRole_1a91f39a-49b7-4ece-873f-862172a2fa06.cssx**。再次在这里，将 .zip 扩展名添加到此文件并打开它。

如果您导航到**sitesroot\0**文件夹，您将在 IIS 中看到 Web 应用程序的文件，包括 NLog.config 文件。这样，您可以简单地在 Common.Logging 设置中引用 NLog.config 文件：

![在此处输入图像描述](../Images/a82b5340aeb3903213f17922b1e700f4.png)

# android - 复杂的 SimpleDateFormat

> ID：12244023
> 
> 赞同：0
> 
> 时间：2012-09-03T08:00:55.803
> 
> 标签：android, simpledateformat

我想要一个 SimpleDateFormat 允许我以这种方式显示日期：

```
Lunes, 03/09/2012 a las 9:59 
```

（Lunes 在西班牙语中是星期一的意思）

是否有一个字符串可以用来构建这样的 SimpleDateFormat 还是必须手动操作 Date？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:26:26.893

也许是这样的？

```
 Locale locale = new Locale("es", "ES");
    SimpleDateFormat sdf = new SimpleDateFormat("EEEE, dd/MM/yyyy 'a las' HH:mm", locale);
    System.out.println(sdf.format(new Date())); 
```

结果：

卢恩斯，2012 年 3 月 9 日上午 10:26

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:24:04.480

试试这个。

```
 Locale locale = new Locale("es", "ES");
 Log.i("Current Date :: ",getCurrentDate("EEEE, dd/MM/yyyy 'a las' hh:mm",locale));

public static String getCurrentDate(String dateFormat,Locale locale)
{
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat(dateFormat,locale);
    return sdf.format(cal.getTime());
}

Current Date :: lunes, 03/09/2012 a las 01:52 
```

# .htaccess - 重定向除一个查询字符串以外的所有 URL

> ID：12244025
> 
> 赞同：0
> 
> 时间：2012-09-03T08:01:04.540
> 
> 标签：.htaccess, redirect, url-rewriting, url-routing

我有 2 个域`mcleancenter.org`，并且`aldentheatre.org`都指向一个目录。我想重定向所有`URLs`不需要`"alden-theatre"`的`mcleancenter.org`。并且所有具有`"alden-theatre"`in 的URL`URLs`都应重定向到`aldentheatre.org`.

例如：

*   `/about`应该重定向到`mcleancenter.org/about`
*   `/contact`应该重定向到`mcleancenter.org/contact`
*   `/alden-theatre`应该重定向到`aldentheatre.org/alden-theatre`
*   `/alden-theatre/perfomance`应该重定向到`aldentheatre.org/alden-theatre/perfomance`

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:55:34.557

由于所有 url 重定向到`mcleancenter.org`只是重定向

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^alden-theatre(.*) http://www.aldentheatre.org/alden-theatre$1 [R] 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:15:10.210

您使用的是哪个服务器？

在任何情况下，您都可以通过在您使用的任何服务器“之前”放置一个 Apache 服务器作为代理来做到这一点。然后，您可以使用[mod_reqwirte](http://httpd.apache.org/docs/2.2/rewrite/)重定向请求。

# android - 当我在 BroadcastReceiver 中打开活动时，Android InCallScreen 被隐藏

> ID：12244026
> 
> 赞同：0
> 
> 时间：2012-09-03T08:01:10.983
> 
> 标签：android, android-intent

好的。我发现很难说清楚。让我试试。

我正在使用广播接收器来为每个呼叫调用。

```
<receiver
    android:name="com.example.receiveCall"
    android:enabled="true" >
    <intent-filter>
        <action android:name="android.intent.action.PHONE_STATE" />
    </intent-filter>
</receiver> 
```

在 onReceive 方法中，我在顶部开始了一个活动。

```
 @Override
    public void onReceive(final Context context, Intent intent) {

            Handler mHandler = new Handler();
            AttendActivity.ctx = context;
            Runnable mUpdateTimeTask = new Runnable() {
                public void run() {
                    // do what you need to do here after the delay
//                  context.startService(new Intent(context, AutoAnswerIntentService.class));
                    context.startActivity(new Intent(context,
                            AttendActivity.class)
                            .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));

                }
            };
            mHandler.postDelayed(mUpdateTimeTask, 500);
        }       
    } 
```

当应用程序不可见时，这可以正常工作。但是当应用程序可见时。我的活动在 InCallScreen 顶部打开。但是当我关闭参加活动时。而不是 InCallScreen 我的应用程序是可见的。Incallscreen 就在它上面。

你能帮我解决这个问题吗？期望的输出

MyApp -> InCallScreen -> AttendActivity

当前输出 InCallScreen -> MyApp -> AttendActivity

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:46:37.690

我推荐阅读这篇[文章](http://developer.android.com/guide/components/tasks-and-back-stack.html)。它有大量关于 Android 中的活动、任务、应用程序和进程的信息。

我的猜测是您的 AttendActivity 具有默认的任务关联性。这意味着如果显示此活动，那么您的整个任务（很可能是您应用程序的所有活动）将被带到前面。

您可以更改此行为。您需要在 Manifest 中对您的活动进行 android:taskAffinity。

例如，您可以将 AttendActivity 的 android:taskAffinity="" 放在清单中。这样，当它被带到前面时，它不会拖动整个应用程序。

# jquery - 外部 jquery 文件中的函数不起作用

> ID：12244035
> 
> 赞同：3
> 
> 时间：2012-09-03T08:02:05.870
> 
> 标签：jquery, html

我看到了我们在 html 页面中包含的许多 js 文件，它开始工作了。我制作了简单的函数来检查它是如何工作的，我制作了外部文件，然后将它包含在我的网页中，但它不起作用。我的代码是....

```
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript" src="face.js"></script>
</head>
<body>
<div class="cl">check code</div>
</body> 
```

//jQuery

```
function mtLoan(){

    $('.cl').css('background-color','#ff0000')

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:17:20.103

你可以试试这个

***HTML***

```
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript" src="face.js"></script>
</head>
<body>
<div class="cl">check code</div>
</body> 
```

***JS代码***

```
$(document).ready(function(){
    $('.cl').on('click', function(){
       mtLoan();
    });
    function mtLoan(){
       $('.cl').css('background-color','#ff0000')
    }
}); 
```

[http://jsfiddle.net/hhBFZ/11/](http://jsfiddle.net/hhBFZ/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:06:10.047

您没有在任何地方调用 mtLoan。将您的代码更改为：

```
$(document).ready(function(){
     $('.cl').css('background-color','#ff0000')
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:08:37.220

```
...
<script type="text/javascript" src="face.js"></script>

<script>
$(function(){
  mtLoan();
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:09:38.477

您没有在任何地方调用此函数，使用 [$(document).ready()](http://api.jquery.com/ready/)事件来初始化您的 javascript，因此您的 HTML 将知道 Javascript，反之亦然。

```
$(document).ready(function(){
     $('.cl').css('background-color','#ff0000')
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T08:19:47.773

在外部 js 文件或页面本身中调用 doccument.ready 函数中的函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T08:23:32.737

您需要使用文档就绪事件。这个视频教程网站很好地解释了一些通用示例。[http://blog.themeforest.net/tutorials/jquery-for-absolute-beginners-day-2/](http://blog.themeforest.net/tutorials/jquery-for-absolute-beginners-day-2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-30T08:01:08.407

首先，检查您添加的 js 文件是否显示在浏览器中。而且你写的jquery函数是错误的。您在哪里定义： mtLoan() ??

# sharepoint - 如果用户在 SharePoint 中没有枚举权限，请检查当前用户的权限

> ID：12244037
> 
> 赞同：1
> 
> 时间：2012-09-03T08:02:10.237
> 
> 标签：sharepoint

众所周知，我们可以通过以下方式检查用户的权限：

```
 using (SPWeb web = site.OpenWeb(path))
            {
                SPUser user = SPContext.Current.Web.CurrentUser;
                string loginName = user.LoginName;
                if (web.DoesUserHavePermissions(SPBasePermissions.EnumeratePermissions))
                {
                    if (web.DoesUserHavePermissions(user.LoginName, SPBasePermissions.Open))
                    {
                        //do something
                    }
                }
            } 
```

这是我的问题，如果当前用户没有枚举权限，如何获取 SharePoint 对象的权限？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:34:27.190

您可以通过打开一个“管理员”Web 实例（创建一个`SPSite`对象并将系统帐户的用户令牌传递给它）来做到这一点。这样您就不必担心当前用户是否拥有足够的权限。

```
SPUserToken adminToken = SPContext.Current.Web.AllUsers["SHAREPOINT\\System"].UserToken;
using (SPSite adminSite= new SPSite(SPContext.Current.Site.ID, adminToken) ) {
   using (SPWeb adminWeb = adminSite.OpenWeb(SPContext.Current.Web.ID)){
      if (adminWeb.DoesUserHavePermissions(SPContext.Current.Web.CurrentUser.LoginName, SPBasePermissions.Open)) {
            //do something 
      }
   }
} 
```

当然，最好不要在每次页面加载时都这样做，因为创建和处理 SPSite/SPWeb 对象的成本相对较高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:42:13.290

在这里，我定义了一个函数，它接受一个 SharePoint 列表对象、一个角色类型和一个用户。

*   门户：共享点列表或文档库对象。
*   角色：共享点提供的角色类型，如读取、设计等。
*   user ：您要在门户上授予角色的用户。

希望它会帮助你。

```
public static void AssignPermissionToPortal(string portal, SPRoleType role, SPUser user)
        {
            try
            {
                // Run with elevated privileges  
                SPSecurity.RunWithElevatedPrivileges(delegate()
                {
                    using (SPSite site = new SPSite(SPContext.Current.Web.Site.ID))
                    {
                        using (SPWeb web = site.OpenWeb(SPContext.Current.Web.ID))
                        {
                            web.AllowUnsafeUpdates = true;

                            SPList portalList = SPListHelper.GetSPList(portal, web);
                            portalList.BreakRoleInheritance(false);

                            //Add Readers on portal
                            SPRoleDefinition permission = web.RoleDefinitions["Read"];

                            if (role == SPRoleType.Administrator)
                                permission = web.RoleDefinitions["Full control"];
                            else if (role == SPRoleType.Contributor)
                                permission = web.RoleDefinitions["Contribute"];
                            else if (role == SPRoleType.WebDesigner)
                                permission = web.RoleDefinitions["Design"];
                            else
                                permission = web.RoleDefinitions["Read"];

                            // Check the user Role on site level.
                            SPUser roleUser = uHelper.GetUserById(user.ID);

                            if (roleUser != null)
                            {
                                SPRoleAssignment assignment = new SPRoleAssignment(roleUser);
                                assignment.RoleDefinitionBindings.Add(permission);

                                portalList.RoleAssignments.Add(assignment);
                                portalList.Update();
                            }

                            web.AllowUnsafeUpdates = false;
                        }
                    }
                });
            }
            catch (Exception ex)
            {
                Log.WriteException(ex);
            }
} 
```

# facebook - Facebook：应用访问令牌，发布给用户

> ID：12244044
> 
> 赞同：0
> 
> 时间：2012-09-03T08:02:43.220
> 
> 标签：facebook, facebook-access-token

我浏览了有关[使用应用程序访问令牌](https://developers.facebook.com/docs/opengraph/using-app-tokens/)的精彩教程。根据这篇文章，它说：

> 如果用户未提供代表用户发布的适当权限，您将收到一条错误消息。例如，如果用户没有提供 publish_stream 权限，则会返回以下错误： { "error": { "message": "(#200) 用户没有授予应用程序自动发布 feed stories 的权限" ，“类型”：“OAuthException”，“代码”：200 } }

现在有没有其他方法可以发布到尚未授权该应用程序的用户墙上？

我的查询是这样的：我的应用程序有两个登录名，一个使用电子邮件登录，另一个是 FB 连接。因此，用户可以使用电子邮件或 Facebook 登录到我的应用程序。如果他使用 facebook 登录，则完全没有问题，因为我有他的访问令牌。如果他使用电子邮件登录，那么我没有他的用户访问令牌，所以在这种情况下，我想使用应用访问令牌来获取用户的朋友，然后允许他发布到朋友墙 [非会员的朋友我们的应用程序/未授权我们的应用程序]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:25:41.093

没有办法发布到未授权该应用程序的用户墙。

一种可能的解决方案：

*   您必须通过电子邮件和 fbID 链接用户登录
*   当用户通过 fbID 访问您的应用程序时存储访问令牌
*   如果用户通过电子邮件登录，则从本地存储中获取访问令牌并将其用于发布。

# asp.net-mvc - 便携式区域与多项目区域？

> ID：12244047
> 
> 赞同：5
> 
> 时间：2012-09-03T08:02:50.640
> 
> 标签：asp.net-mvc, mvccontrib, asp.net-mvc-areas, portable-areas

你能告诉我这两种实现的优点/缺点吗？

我的背景：我们有一个包含许多不同领域的大型项目。每个域自然是一个区域。但是许多不同的团队将在每个团队上工作，我们希望将业务规则分开。在解决方案中管理这些领域的最佳方法是什么？

我在单独的项目中或带有便携式区域的区域中看到了许多示例。但我无法做出决定。

在我看来，我的观点是 ：

独立项目

*   简单的
*   难以管理内容（JS、CSS、...）。它必须在主站点中吗？
*   最佳表演

便携式区域

*   所有内容、视图必须在同一个项目中
*   区域之间可能的代码重复
*   约束：名称，嵌入式资源，...
*   MVC Contrib 的一部分：它会支持更长时间吗？
*   组件：重新分配功能的理想选择

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T03:50:21.347

I'm facing the same problem, and have been checking for it. The following link is something about portable areas. The first answer is given by the lead of MS MVC development team. Although it can not answer the question, wish it can help you a litle.

[Multiproject areas in ASP.Net MVC 3](https://stackoverflow.com/questions/3966124/multiproject-areas-in-asp-net-mvc-3)

# ruby-on-rails-3 - ActiveModel 中的观察者是否只有/除了过滤器可用

> ID：12244051
> 
> 赞同：1
> 
> 时间：2012-09-03T08:03:06.753
> 
> 标签：ruby-on-rails-3, mongoid, activemodel

我正在尝试为我的项目生成`Notification`并`Message`在`Task`我的项目中生成。我正在使用`Mongoid 2`.

我创建了一个`NotificationObserver`，在这个观察者中是否有可能`Message`只观察和`after_create`观察`Task`两者。就像这里描述的那样：http: [//jamesgolick.com/2009/8/5/observational-better-observers-for-activerecord.html](http://jamesgolick.com/2009/8/5/observational-better-observers-for-activerecord.html)`after_create``after_update`

已经很长时间了，所以我认为它现在可能是开箱即用的，但我在文档中找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:03:14.247

对易于处理的不同类使用两个不同的观察者，您可以相应地捕获回调

或试试这个

```
class NotificationObserver < ActiveRecord::Observer
   observe :task, :message

   def after_create(record)
      if record.class == Task
         do task stuff
      else
         do message stuff
      end
   end

   def after_update(record)
      if record.class == Task
         do task stuff
      end
   end
end 
```

# android - Socket客户端程序错误

> ID：12244054
> 
> 赞同：0
> 
> 时间：2012-09-03T08:03:33.100
> 
> 标签：android

程序运行后，点击发送按钮，弹出对话框提示程序已经退出。</p>

不知道是什么问题，怎么解决？有没有人遇到同样的问题，能帮帮我吗？</p>

```
package com.secion9.clienttest;

import android.os.Bundle;
import android.app.Activity;
import android.widget.*;
import java.net.Socket;
import java.io.IOException;
import java.io.OutputStream;
import android.view.View;
import android.view.View.OnClickListener;
public class ClientActivity extends Activity {

Button btSend;
EditText etMsg;
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_client);
  btSend=(Button)this.findViewById(R.id.button1);
  etMsg=(EditText)this.findViewById(R.id.EditText1);
  btSend.setOnClickListener(
  new OnClickListener(){
  public void onClick(View v)
  {
try
{

Socket socket=new Socket("127.0.0.1",5050);
OutputStream outputStream=socket.getOutputStream();
byte[] buffer=etMsg.getText().toString().getBytes();
outputStream.write(buffer);
outputStream.flush();

}
catch(IOException e)
{
e.printStackTrace();
}
  }
  });
  }
} 
```

日志猫

```
09-02 08:24:31.189: E/Trace(627): error opening trace file: No such file or directory (2)
09-02 08:24:32.259: D/gralloc_goldfish(627): Emulator without GPU emulation detected.
09-02 08:24:32.598: I/Choreographer(627): Skipped 40 frames! The application may be doing too much work on its main thread.
09-02 08:25:04.471: D/AndroidRuntime(627): Shutting down VM
09-02 08:25:04.471: W/dalvikvm(627): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-02 08:25:04.539: E/AndroidRuntime(627): FATAL EXCEPTION: main
09-02 08:25:04.539: E/AndroidRuntime(627): android.os.NetworkOnMainThreadException
09-02 08:25:04.539: E/AndroidRuntime(627): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
09-02 08:25:04.539: E/AndroidRuntime(627): at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
09-02 08:25:04.539: E/AndroidRuntime(627): at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
09-02 08:25:04.539: E/AndroidRuntime(627): at libcore.io.IoBridge.connect(IoBridge.java:112)
09-02 08:25:04.539: E/AndroidRuntime(627): at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
09-02 08:25:04.539: E/AndroidRuntime(627): at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
09-02 08:25:04.539: E/AndroidRuntime(627): at java.net.Socket.startupSocket(Socket.java:566)
09-02 08:25:04.539: E/AndroidRuntime(627): at java.net.Socket.tryAllAddresses(Socket.java:127)
09-02 08:25:04.539: E/AndroidRuntime(627): at java.net.Socket.<init>(Socket.java:177)
09-02 08:25:04.539: E/AndroidRuntime(627): at java.net.Socket.<init>(Socket.java:149)
09-02 08:25:04.539: E/AndroidRuntime(627): at com.secion9.clienttest.ClientActivity$1.onClick(ClientActivity.java:31)
09-02 08:25:04.539: E/AndroidRuntime(627): at android.view.View.performClick(View.java:4084)
09-02 08:25:04.539: E/AndroidRuntime(627): at android.view.View$PerformClick.run(View.java:16966)
09-02 08:25:04.539: E/AndroidRuntime(627): at android.os.Handler.handleCallback(Handler.java:615)
09-02 08:25:04.539: E/AndroidRuntime(627): at android.os.Handler.dispatchMessage(Handler.java:92)
09-02 08:25:04.539: E/AndroidRuntime(627): at android.os.Looper.loop(Looper.java:137)
09-02 08:25:04.539: E/AndroidRuntime(627): at android.app.ActivityThread.main(ActivityThread.java:4745)
09-02 08:25:04.539: E/AndroidRuntime(627): at java.lang.reflect.Method.invokeNative(Native Method)
09-02 08:25:04.539: E/AndroidRuntime(627): at java.lang.reflect.Method.invoke(Method.java:511)
09-02 08:25:04.539: E/AndroidRuntime(627): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-02 08:25:04.539: E/AndroidRuntime(627): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-02 08:25:04.539: E/AndroidRuntime(627): at dalvik.system.NativeStart.main(Native Method)
09-02 08:25:07.079: I/Process(627): Sending signal. PID: 627 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:06:32.747

是否已放入 AndroidManifest.xml 上网权限？

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:07:14.437

```
Skipped 40 frames! The application may be doing too much work on its main thread. 
```

和

```
NetworkOnMainThreadException 
```

有没有告诉你你阻塞了主线程，这会导致 ANR 和应用程序被杀死:)

尝试在后台线程或使用 AsyncTask 实现您的网络内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:09:48.267

听起来您正在主线程上进行网络连接。这是一个禁忌：

*   [http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

解决方案：

修改您的应用程序，使其生成线程或异步任务来执行网络 I/O。

这是一个很好的链接，讨论了如何：

*   [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:14:24.020

根据 [Android Developers][1] 上的文档：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

因此，您需要针对较低的 SDK 或创建一个新线程来处理网络连接。

# regex - 如何使用 pcregrep 排除多个目录？

> ID：12244055
> 
> 赞同：2
> 
> 时间：2012-09-03T08:03:39.143
> 
> 标签：regex, linux, bash, pcre

我正在尝试从以下搜索结果中排除多个目录`pcregrep`：

```
pcregrep --exclude_dir=^\./(foo/abc|bar/cde)$ --recursive --regex alpha . 
```

换句话说，我想找到所有包含 的文件`alpha`，并且我想在搜索过程中忽略`./foo/abc/*`和文件。`./bar/cde/*`不起作用，目录没有被排除在外。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:46:21.957

的模式`--exclude_dir`仅匹配目录名称，而不是整个路径。因此你不能`/`在模式里面。如果要排除的目录名称是唯一的，则可以使用：

```
pcregrep --exclude_dir='^abc|cde$' -r alpha . 
```

请注意，您经常需要使用`'`或使用任何其他引用/转义机制来包围模式。在大多数情况下，您可以省略`--regex=`.

如果您`zsh`用作 shell 并设置了 EXTENDED_GLOB，则可以使用以下解决方案排除整个路径：

```
pcregrep alpha **/*~(foo/abc/*|bar/cde/*)(.) 
```

* * *

但是，您请求的功能可以很容易地在 pcregrep 中实现：下载它的源代码（[pcre 库](http://www.pcre.org/)）并更改

```
pcre_exec(exclude_dir_compiled, NULL, nextfile, nflen, 0, 0, NULL, 0) 
```

在文件`pcregrep.c`中

```
pcre_exec(exclude_dir_compiled, NULL, buffer,  (int) strlen(buffer), 0, 0, NULL, 0) 
```

请注意，此更改不向后兼容。最好的方法是引入一个新`--exclude_path`标志。

# python - 有什么方法可以从烧瓶中带有“\ n”字符的字符串中添加新行吗？

> ID：12244057
> 
> 赞同：33
> 
> 时间：2012-09-03T08:03:46.443
> 
> 标签：python, flask

当我遇到 '\n' 字符的一个奇怪问题时，我正在玩烧瓶。它似乎在我的浏览器中没有效果，我尝试放在
那里但它不起作用，有什么想法吗？

```
from flask import Flask
from flask import render_template
test=Flask(__name__)
@test.route('/')
def root():
    str='yay\nsuper'
    return str
test.run(debug=True) 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2017-01-17T10:33:33.540

所以事实证明，flask 会自动转义 html 标签。因此，添加`<br>`标签只是将它们呈现在屏幕上，而不是实际创建换行符。

有两种解决方法：

1.  **将文本分解为数组**

    ```
    text = text.split('\n') 
    ```

    然后在模板中，使用 for 循环：

    ```
    {% for para in text %}
        <p>{{para}}</p>
    {% endfor %} 
    ```

2.  **禁用自动转义**

    首先我们使用replace`\n`替换`<br>`：

    ```
    text = text.replace('\n', '<br>') 
    ```

    然后我们通过包围我们需要的块来禁用自动转义

    ```
    {% autoescape false %}
        {{text}}
    {% endautoescape %} 
    ```

    [但是，我们不鼓励这样做：](https://flask.palletsprojects.com/en/1.1.x/templating/#controlling-autoescaping)

    > 每当您这样做时，请对您在此块中使用的变量非常谨慎。

我认为第一个版本避免了第二个版本中存在的漏洞，同时仍然很容易理解。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-03T08:06:52.740

换行符仅在特定情况下对 HTML 呈现有影响。您需要使用表示换行符的 HTML 标记，例如`<br/>`.

```
def root():
    str='yay<br/>super'
    return str 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-06-29T12:59:23.490

万一有人像我一样来到这里，并且出于安全原因不想使用 {% autoescape false %}，也不想在某些情况下不方便使用文本，我在[这里](https://stackoverflow.com/a/3266740)找到了一个不错的选择：

```
from flask import Markup
value = Markup('First line.<br>Second line.<br>') 
```

然后在 jinja 模板中：

```
{{ value }} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-10T10:15:05.663

1.  为我工作并保持安全

我建议`<br>`而不是`<p>`

```
{% for para in text %}
    {{para}}<br>
{% endfor %} 
```

然后结果不那么笨重

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-16T14:05:42.373

我来晚了，但这是我的解决方案。
HTML 有一个`<pre>`标签，在这种情况下可以证明是有用的。

```
<pre>{{ your_text }}</pre> 
```

这个标签告诉浏览器不要自动调整间距和换行符。
要了解有关此标签的更多信息，请查看[本](https://www.w3schools.com/tags/tag_pre.asp)指南。

# ios - 即使数据模型包含实体， mogenerator 也不会生成任何实体。报告“在模型中找不到实体。不会生成任何文件。”

> ID：12244063
> 
> 赞同：6
> 
> 时间：2012-09-03T08:04:31.550
> 
> 标签：ios, core-data, mogenerator

我正在尝试让 mogenerator（最新 1.26）从核心数据模型（xcdatamodel）生成一些样板类，它报告：

```
No entities found in model. No files will be generated.
(model description: (<NSManagedObjectModel: 0x10012e410>) isEditable 1, entities {
}, fetch request templates {
}) 
```

即使 xcdatamodel 的内容明确存在

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<model name="" userDefinedModelVersionIdentifier="" type="com.apple.IDECoreDataModeler.DataModel" documentVersion="1.0" lastSavedToolsVersion="1487" systemVersion="11E53" minimumToolsVersion="Xcode 4.3" macOSVersion="Automatic" iOSVersion="Automatic">
    <entity name="Chair" representedClassName="Chair" syncable="YES">
        <attribute name="name" attributeType="String" maxValueString="50" syncable="YES"/>
    </entity>
... 
```

我究竟做错了什么？

我正在使用 Xcode 4.4.1 和 mogenerator 1.26

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T16:00:27.847

这是来自[http://raptureinvenice.com/getting-started-with-mogenerator/的引述](http://raptureinvenice.com/getting-started-with-mogenerator/)

> 在数据模型中创建实体时，请务必使用与实体相同的名称填充“类”字段。

所以你要做的是：

*   打开您的数据模型
*   选择您的实体
*   在右侧面板中，选择 Data Model Inspector（第 3 个）
*   编辑与“名称”字段同名的“类”字段

# javascript - 将图表动态添加到组合 Highcharts 中？

> ID：12244064
> 
> 赞同：1
> 
> 时间：2012-09-03T08:04:33.090
> 
> 标签：javascript, jquery, highcharts

我已经实现了这个例子：[http](http://www.highcharts.com/demo/combo) ://www.highcharts.com/demo/combo没有饼图。我想在一段时间后动态添加它。如何在 HighCharts 中动态地将图表添加到组合图表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:38:57.873

如果您查看演示，您会发现`pie chart`不是图表，它只是一个`serie`.
因此，要添加一个系列，您必须使用`addSeries`传递参数 all `pie serie`，如下所示。

```
 chart.addSeries({
        type: 'pie',
        name: 'Total consumption',
        data: [{
            name: 'Jane',
            y: 13,
            color: '#4572A7' // Jane's color
            },
        {
            name: 'John',
            y: 23,
            color: '#AA4643' // John's color
            },
        {
            name: 'Joe',
            y: 19,
            color: '#89A54E' // Joe's color
            }],
        center: [100, 80],
        size: 100,
        showInLegend: false,
        dataLabels: {
            enabled: false
        }
    }); 
```

[**演示**](http://jsfiddle.net/hcGb9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:36:13.930

您可以使用`charts.push`此网址中所示的[http://calibrate.be/labs/exporting-highcharts-js-pdf-docx-tcpdf-and-phpword](http://calibrate.be/labs/exporting-highcharts-js-pdf-docx-tcpdf-and-phpword)

如果你不能让这个工作，请告诉我。

**编辑：**您需要将图表定义`var charts = [];`为全局变量。这还没有经过我的测试。

# c# - 工具条 - 溢出菜单大小

> ID：12244069
> 
> 赞同：0
> 
> 时间：2012-09-03T08:05:20.630
> 
> 标签：c#, winforms

我有一个启用了“CanOverflow”属性的 Windows 窗体工具条。工具条中不适合的项目将移至下拉溢出菜单中。有没有办法控制溢出菜单的大小？

我有一个垂直工具条，目前其中的项目太多。某些项目不适合屏幕并且无法访问。我想调整宽度，因为它可以在每行显示多个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:13:41.530

您可以通过设置 TableLayoutSettings 的 ColumnCount 在 DropDown 菜单中创建多列表布局，例如：

```
ToolStripDropDown drop_down = new ToolStripDropDown();
// ...add your huge number of ToolStripItems to drop_down.Items here
drop_down.LayoutStyle = ToolStripLayoutStyle.Table;
((TableLayoutSettings)drop_down.LayoutSettings).ColumnCount = 2; // Or whatever you need
menu_item.DropDown = drop_down; 
```

# html - 设置无序列表的样式

> ID：12244070
> 
> 赞同：2
> 
> 时间：2012-09-03T08:05:23.797
> 
> 标签：html, css

我试图让一个无序列表看起来像这样：

![在此处输入图像描述](../Images/7c3bd6773ba013a8548b0ef53818bd17.png)

如何实现这种对齐？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:11:29.857

对于这种类型的功能，您可以使用**column-count**属性。像这样写：

```
ul{
    -moz-column-count: 4;
    -webkit-column-count: 4;
    column-count: 4;
} 
```

有关更多检查，[我想将列表项显示为 2 列或更多列（动态对齐）](https://stackoverflow.com/questions/8092830/i-want-to-show-list-items-as-2-or-more-columns-dynamic-alignment/8092856#8092856)

*注意：它在 IE 中不起作用。*

对于 IE，你可以使用这个 JavaScript：[CSS3 - Multi Column Layout Demonstration](http://www.csscripting.com/css-multi-column/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:26:57.133

你可以试试这种风格（下）。列数将根据元素数量和可用宽度动态变化。

```
<style>
   ul > li
   {
      list-style-type: none;
      display: block;
      float: left;
      width: 120px;
   }
</style>
<ul>
    <li>Barn</li>
    <li>Data</li>
    <li>Design</li>
    <li>Lov og rett</li>
    <li>Matt</li>
    <li>Musikk</li>
    <li>Barn</li>
    <li>Data</li>
    <li>Design</li>
    <li>Lov og rett</li>
    <li>Matt</li>
    <li>Musikk</li>
    <li>Barn</li>
    <li>Data</li>
    <li>Design</li>
    <li>Lov og rett</li>
    <li>Matt</li>
    <li>Musikk</li>
</ul> 
```

如果您想在 ul 元素上设置固定数量的列宽度（将列数乘以列表元素的宽度，例如在这种情况下您希望 5 列设置宽度为 600px）：

```
ul {
    width: 600px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:15:21.117

我希望这对你有用：- [http://tinkerbin.com/BAzYZaPY](http://tinkerbin.com/BAzYZaPY)

你可以通过`column-width`属性获得想要的结果

该`column-width`属性仅在 Opera 中受支持。

Firefox 支持另一种选择，即`-moz-column-width property`.

Safari 和 Chrome 支持另一种选择，即`-webkit-column-width property`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:16:13.200

或者你可以试试

```
<ul>
<li>cont</li>
<li>cont</li>
<li>cont</li>
</ul>
<ul>
<li>cont</li>
<li>cont</li>
<li>cont</li>
</ul>
<ul>
<li>cont</li>
<li>cont</li>
<li>cont</li>
</ul>

ul
{
  float:left;
} 
```

# python - 内置“in”运算符的 Python 源代码

> ID：12244074
> 
> 赞同：14
> 
> 时间：2012-09-03T08:05:44.787
> 
> 标签：python, c, string, cpython, python-internals

`in`我试图在 (C) Python 源代码中找到内置运算符的实现。我搜索了内置函数源代码[bltinmodule.c](http://svn.python.org/projects/python/trunk/Python/bltinmodule.c)，但找不到该运算符的实现。我在哪里可以找到这个实现？

我的目标是通过扩展此搜索的不同 C 实现来改进 Python 中的子字符串搜索，尽管我不确定 Python 是否已经使用了我的想法。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-03T08:28:32.097

要查找*任何python 运算符的实现，首先要使用以下*[`dis.dis`函数](http://docs.python.org/library/dis.html#dis.dis)找出 Python 为其生成的字节码：

```
>>> dis.dis("'0' in ()")
  1           0 LOAD_CONST               0 ('0')
              2 LOAD_CONST               1 (())
              4 COMPARE_OP               6 (in)
              6 RETURN_VALUE 
```

`in`运算符变成一个`COMPARE_OP`字节码。现在，您可以在 Python 评估循环中跟踪此操作码是如何被处理的[`Python/ceval.c`](https://github.com/python/cpython/blob/07fbbfde1b300369b4f8d1cfb80045fbb23b7091/Python/ceval.c#L2673-L2684)：

```
TARGET(COMPARE_OP)
    PyObject *right = POP();
    PyObject *left = TOP();
    PyObject *res = cmp_outcome(oparg, left, right);
    Py_DECREF(left);
    Py_DECREF(right);
    SET_TOP(res);
    if (res == NULL)
        goto error;
    PREDICT(POP_JUMP_IF_FALSE);
    PREDICT(POP_JUMP_IF_TRUE);
    DISPATCH(); 
```

`cmp_outcome()`[在同一个文件](https://github.com/python/cpython/blob/07fbbfde1b300369b4f8d1cfb80045fbb23b7091/Python/ceval.c#L4726-L4776)中定义，`in`操作符是开关之一：

```
case PyCmp_IN:
    res = PySequence_Contains(w, v);
    if (res < 0)
         return NULL;
    break; 
```

快速 grep 向我们展示了在[Objects/abstract.c](https://github.com/python/cpython/blob/07fbbfde1b300369b4f8d1cfb80045fbb23b7091/Objects/abstract.c#L2057-L2069)`PySequence_Contains`中定义的位置：

```
int
PySequence_Contains(PyObject *seq, PyObject *ob)
{
    Py_ssize_t result;
    PySequenceMethods *sqm = seq->ob_type->tp_as_sequence;
    if (sqm != NULL && sqm->sq_contains != NULL)
        return (*sqm->sq_contains)(seq, ob);
    result = _PySequence_IterSearch(seq, ob, PY_ITERSEARCH_CONTAINS);
    return Py_SAFE_DOWNCAST(result, Py_ssize_t, int);
} 
```

`PySequence_Contains`因此，对于 Python C 对象，使用[`sq_contains`Sequence 对象结构上的插槽](http://docs.python.org/c-api/typeobj.html#PySequenceMethods.sq_contains)或迭代搜索。

对于 Python 3 Unicode 字符串对象，此插槽[`PyUnicode_Contains`在 Objects/unicodeobject.c](https://github.com/python/cpython/blob/07fbbfde1b300369b4f8d1cfb80045fbb23b7091/Objects/unicodeobject.c#L11135-L11193)中实现，在 Python 2 中，您还想[`string_contains`在 Objects/stringobject.c](https://github.com/python/cpython/blob/6a336f6484a13c01516b6bfc3b767075cc2cb4f7/Objects/stringobject.c#L1149-L1166)中签出。基本上只是在 Objects/ 子目录中 grep for`sq_contains`不同 Python 类型的各种实现。

对于泛型 python 对象，有趣的是[Objects/typeobject.c](https://github.com/python/cpython/blob/07fbbfde1b300369b4f8d1cfb80045fbb23b7091/Objects/typeobject.c#L6110-L6140)将此推迟到`__contains__`自定义类上的方法，如果这样定义的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-01T06:19:47.350

在 python 3.9 中，字节码`COMPARE_OP`被分成四个不同的指令，`CONTAINS_OP`用于 'in' 和 'not in' 测试。

这并没有改变`in`operator 的实现，它直接在[Python/ceval.c](https://github.com/python/cpython/blob/de2c91a89aa0e89d5d01d71697d0f27a9f60c11d/Python/ceval.c#L3033)中处理，调用`PySequence_Contains()`.

*   Doc: [https://github.com/python/cpython/blob/main/Doc/whatsnew/3.9.rst#cpython-bytecode-changes](https://github.com/python/cpython/blob/main/Doc/whatsnew/3.9.rst#cpython-bytecode-changes)
*   Related issue: [https://bugs.python.org/issue39156](https://bugs.python.org/issue39156)

# delphi - 设置firemonkey组件的默认整数值

> ID：12244076
> 
> 赞同：2
> 
> 时间：2012-09-03T08:05:50.747
> 
> 标签：delphi, custom-component, firemonkey

我们正在努力在 Delphi Xe2 平台上的 firemonkey 中创建自定义组件。我正在使用 firemonkey 自定义组件创建已发布的属性。我设置了默认值，例如布尔值、自定义类型，但我正在设置默认整数值。我正在使用类 TControl1 = 类（TControl）。Published Property Test : Integer read FTest write Set Test default 10; 在组件查看器上，我的自定义组件显示 0 默认值。抱歉我的英语不好。请任何人帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:12:11.860

如果我没记错的话，`default`指令不会设置您的私人成员，`FTest`. 您必须像这样在组件的构造函数中初始化它：

```
TControl1 = class(TControl)
private
  FTest: Integer;
  procedure SetTest(Value: Integer);
public
  constructor Create(AOwner: TComponent); override;
published
  property Test: Integer read FTest write SetTest default 10;
end;
.
.
.
constructor TControl1.Create;
begin
  inherited;
  FTest := 10;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T08:26:31.907

指定`default`属性值不会在运行时将该值分配给属性。它所做的只是控制属性的存储方式。如果在存储该属性时该属性的值等于*默认值*，则 VCL 流式传输框架将忽略该属性。

[文档](http://docwiki.embarcadero.com/RADStudio/en/Default_Property_Values)是这样说的：

> 声明属性时，可以为其指定默认值。VCL 使用默认值来确定是否将属性存储在表单文件中。如果您没有为属性指定默认值，VCL 将始终存储该属性。
> 
> ...
> 
> 声明默认值不会将该属性设置为该值。组件的构造方法应该在适当的时候初始化属性值。但是，由于对象总是将其字段初始化为 0，因此构造函数不必将整数属性设置为 0、字符串属性设置为 null 或布尔属性设置为 False。

换句话说，**除了**设置默认值之外，还必须在组件的构造函数中初始化属性。您有责任确保将其初始化为与指定为`default`.

我个人一直发现设计中固有的重复有点令人沮丧。设计者成功地在语言中构建了违反[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的内容。您提出这个问题的事实说明了设计的弱点。指定该`default`值后，您会惊讶于编译器似乎忽略了您并要求您再次设置它。

# c# - C# Word - Range.InsertFIle 不工作

> ID：12244077
> 
> 赞同：0
> 
> 时间：2012-09-03T08:05:59.137
> 
> 标签：c#, ms-word, office-interop

我尝试使用 Range.InsertFIle 方法将 html 文件插入到单词中。但它不起作用。请帮我。

```
object oFalse = false;
string strFileName = @"E:\Workbook\SampleOutput\SampleOutput\SupportFiles\Report_43321100_ER.html";
Word.Paragraph oPara1;
oPara1 = oDoc.Content.Paragraphs.Add(ref oMissing);
        object oTrue = true;
        object oRange = oPara1.Range;
       // oDoc.Bookmarks.Add("BookMark", oRange);
        try
        {
            oPara1.Range.InsertFile(strFileName, ref oRange, ref oFalse, ref oTrue, ref oFalse);
        }
        catch (Exception ex)
        {
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:44:27.370

传递一个空字符串作为 Range 参数（或者可能是 System.Reflection.Missing.Value）

此参数的名称“范围”具有误导性。它没有指定要插入文件的范围。它甚至不是“单词范围”。这是一个“子集名称”，可让您指定要插入文件的哪个部分。例如，如果您正在插入一个 Word 文档，它可能是您正在插入的文件中的书签名称。如果您要插入 Excel 工作表，它可能是 R1C1:RnCn 引用或范围名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T20:40:34.820

这对我有用

```
string strFileName = 
   @"E:\Workbook\SampleOutput\SampleOutput\SupportFiles\Report_43321100_ER.html";
Word.Paragraph oPara1;
oPara1 = oDoc.Content.Paragraphs.Add();
//object oTrue = true;
//object oRange = oPara1.Range;
// oDoc.Bookmarks.Add("BookMark", oRange);
try
{
    oPara1.Range.InsertFile(strFileName);
}
    catch (Exception ex)

<...> 
```

# python - Scrapy 仅在循环中返回第一个结果

> ID：12244078
> 
> 赞同：1
> 
> 时间：2012-09-03T08:06:04.687
> 
> 标签：python, xpath, scrapy

我有一个执行两次（索引 1->3）的循环（如下所示），但 Scrapy 只返回两个结果中的第一个轨道名称。但是该`print item`行显示了不同的值，`str_selector`所以我知道循环有效，但 Scrapy 没有看到`x`.

知道我犯了什么错误吗？

```
items = []
item = scrapyItem()

for x in range (1,3):
    str_selector = '//tr[@name="tracks-grid-browse_track_{0}"]/td[contains(@class,"secondColumn")]/a/text()'.format(x)
    item['trackname'] = hxs.select(str_selector).extract()
    print item
    items.append(item)
return items 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:20:37.067

只是您应该为每次迭代构建一个新项目，而不是保持不变：您添加`items`相同的对象，该对象是[可变](http://docs.python.org/library/stdtypes.html?highlight=mutable#typesseq-mutable)的（对于 python 中默认的所有用户定义的类），因此当您更新时`item['trackname']`，所有项目包含已更新！

这里有一些代码来说明：

```
>>> class C(object):
        # Basic user-defined class
    def __init__(self):
        self.test = None

>>> c = C()
>>> items = []
>>> for x in range (1,3):
    c.test = x
    print c, c.test
    items.append(c)

<__main__.C object at 0x01CEB130> 1
<__main__.C object at 0x01CEB130> 2
>>> items # All objects contained are the same !!!
[<__main__.C object at 0x01CEB130>, <__main__.C object at 0x01CEB130>]
>>> for c in items:
    print c.test

2
2 
```

现在每次创建一个新对象：

```
>>> items = []
>>> for x in range (1,3):
    c = C()
    c.test = x
    print c, c.test
    items.append(c)

<__main__.C object at 0x01CEB110> 1
<__main__.C object at 0x011F2270> 2 
```

对象现在不同了！

```
>>> for c in items:
    print c.test

1
2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:52:19.753

实际上您现在正在做的是创建一个项目对象并在循环中更改其值，您需要在循环中创建项目。

```
items = []
#item = scrapyItem()

for x in range (1,3):
    item = scrapyItem()
    str_selector = '//tr[@name="tracks-grid-browse_track_{0}"]/td[contains(@class,"secondColumn")]/a/text()'.format(x)
    item['trackname'] = hxs.select(str_selector).extract()
    print item
    items.append(item)
return items 
```

# facebook - 从 facebook 获得 signed_request 后，我 网站中的旧会话很清楚

> ID：12244079
> 
> 赞同：0
> 
> 时间：2012-09-03T08:06:04.577
> 
> 标签：facebook, session, facebook-graph-api, session-variables

我的网站中使用了会话，但是当我打开一个重定向到我的网站的 Facebook 应用程序时，我发现旧会话是清晰的。

我假设在收到签名请求后，facebook 会清除我的旧会话。我对这个假设是否正确？

问题是即使我请求了一个签名请求，我也想保留我的旧会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:01:37.113

This could be happening because the facebook app doesn’t send a csrf token.

You can fix this by adding removing the `protect_from_forgery` callback on the facebook app’s action.

Add `skip_before_filter :verify_authenticity_token` to the controller that facebook apps request or remove `protect_from_forgery` from application_controller.rb

I have also posted this on my blog here [http://wowcode.wordpress.com/](http://wowcode.wordpress.com/2012/09/06/facebook-signed-request-losing-session-in-rails/)

# winapi - 如何将资源添加到我的 D 可执行文件中？如何嵌入清单？

> ID：12244082
> 
> 赞同：3
> 
> 时间：2012-09-03T08:06:22.407
> 
> 标签：winapi, button, resources, manifest, d

我尝试使用 WinAPI 在 D 中进行一些 gui 编程。我的问题是按钮看起来很丑，就像[另一个用户提出的问题一样。](https://stackoverflow.com/questions/4486663/why-does-my-button-look-like-its-from-1990)为了解决这个问题，我想将清单嵌入到我的 D 应用程序中。一旦我可以将资源包含到我的可执行文件中，我也应该能够根据[此 Microsoft 文档手动添加清单。](http://msdn.microsoft.com/en-us/library/aa289524%28v=VS.71%29.aspx)

所以我的问题是：如何在 Visual Studio 上将资源包含到我的 D 应用程序中？甚至有可能做到这一点吗？如果没有，还有其他方法可以使按钮看起来不错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:40:52.093

我不熟悉将 dmd 集成到 Visual Studio 中，但实现所需的一种方法是将编译的 .res 文件添加到传递给 dmd.exe 的文件列表中。例如：

```
dmd.exe main.d manifest.res 
```

我希望您的 VS 集成中有一些方法可以将文件添加到 IDE 用来编译代码的 dmd 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:28:36.090

有点难看，但它完成了工作，没有清单：

```
auto enableVisualStyles()
{
    TCHAR dir[MAX_PATH];
    dir[GetSystemDirectory(dir.ptr, dir.length)] = '\0';
    auto actCtx = ACTCTX(
        ACTCTX.sizeof, 0x0C, "shell32.dll", PROCESSOR_ARCHITECTURE_INTEL,
        0, dir.ptr, MAKEINTRESOURCE(124), null, HMODULE.init);
    ULONG_PTR ulpActivationCookie;
    return ActivateActCtx(CreateActCtx(actCtx), ulpActivationCookie);
} 
```

只需确保在程序启动时调用它一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T14:38:09.487

如果您不关心它实际上是“资源”，而只需要嵌入到二进制文件中的文件中的数据块；看看“[导入表达式](http://dlang.org/expression.html#ImportExpression)”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T21:11:56.477

在此处查看“VisualStyles”示例：[https ://github.com/AndrejMitrovic/DWinProgramming/tree/master/Samples/Extra](https://github.com/AndrejMitrovic/DWinProgramming/tree/master/Samples/Extra)

此外，“ThemedSimpleWakeUp”示例使用资源文件，而“ThemedWakeUp”动态启用视觉样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T11:45:22.727

*查看使用dsss*的旧项目：

```
$cat dsss.conf

[*]
buildflags+=-Jresources

version(Windows) {
    version(gui) {
        buildflags+= -L/SUBSYSTEM:windows:5
    } else {
        buildflags+= -L/SUBSYSTEM:console:5
    }
    buildflags+= -L/rc:.\resources\dwt
    ...
}
... 
```

这应该转化为：

```
dmd -JRES_PATH -L/rc:.\RES_PATH\MANIFEST_WHITHOUT_RES_EXT ... 
```

# video - 观看文件夹和转码视频

> ID：12244085
> 
> 赞同：0
> 
> 时间：2012-09-03T08:06:34.430
> 
> 标签：video, directory-structure, video-conversion, transcode

我有一个包含多个子文件夹的文件夹，每个子文件夹都包含多种文件格式，如 FLV、F4V、WMV、MOV、AVI、M4A、VOB 和 MPG。我想将所有文件转换为 MP4 格式，并通过自动创建子文件夹（就像在源路径中一样）将转换后的视频保存在目标路径中。

当我使用媒体编码器进行转换时，我无法访问子文件夹。

有没有适合我要求的工具？我不介意购买付费工具。

# java - 使用 DynamicJasper API 在单个报告中生成横向和纵向

> ID：12244089
> 
> 赞同：1
> 
> 时间：2012-09-03T08:06:42.270
> 
> 标签：java, jasper-reports, dynamic-jasper

我的应用程序中有不同的模块。每个模块都可以导出为 excel、word 和 pdf 格式。报告格式为*横向*或*纵向*。现在我需要编译所有这些报告并作为一个单一的导出。但我面临一个问题，即在导出时，**DynamicJasper**仅以单一格式显示，即*横向*或*纵向*。

如何使用*DynamicJasper API*在单个报告中使用两种格式显示我的报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T15:10:13.100

您可以创建主报表并向其添加子报表，这是主报表的示例以及如何添加子报表：

```
public DynamicReport buildDynamicReport() throws ReportDocumentGenerationException {
  DynamicReportBuilder drb = new DynamicReportBuilder();
  drb.setDetailHeight(detailHeight)     
  .setMargins(properties.getReportMargins().getTopMargin(), properties.getReportMargins().getBottomMargin(), properties.getReportMargins().getLeftMargin(), properties.getReportMargins().getRightMargin())     
  .setDefaultStyles(null, null, null, getSpoolStyle(SpoolRow.PLAIN_ATTRIBUTE))    
  .setPageSizeAndOrientation(new Page(**/*Your document dimensions and orientation*/**)
  .setColumnsPerPage(1);
   for(ReportDocumentInformationPage page: reportInformation.getPaginas()){
            drb.addConcatenatedReport(getPageSubReport(page.getPageNumber()),new ClassicLayoutManager(),"DS"+page.getPageNumber().toString(),DJConstants.DATA_SOURCE_ORIGIN_PARAMETER, DJConstants.DATA_SOURCE_TYPE_JRDATASOURCE,!page.getPageNumber().equals(1));
            params.put("DS"+page.getPageNumber().toString(), getReportJRDataSource(page.getPageNumber())  );
        }
        drb.setUseFullPageWidth(true);
        DynamicReport dr = drb.build();
        return dr;
    } 
```

这是有关如何创建这些子报表的示例：

```
*private DynamicReport getPageSubReport(int i) throws ReportDocumentGenerationException {
        try{
            DynamicReportBuilder drb = new DynamicReportBuilder();
            drb.setDetailHeight(detailHeight)
            .setReportName("Reporte"+i)
            .setMargins(properties.getReportMargins().getTopMargin(), properties.getReportMargins().getBottomMargin(), properties.getReportMargins().getLeftMargin(), properties.getReportMargins().getRightMargin())
            .setDefaultStyles(null, null, null, getSpoolStyle(SpoolRow.PLAIN_ATTRIBUTE))    
            .setPageSizeAndOrientation(new Page(**/*Your specific Page dimensions and orientation***/)
            .setColumnsPerPage(1);

            AbstractColumn spoolColumn = ColumnBuilder.getNew()     
            .setColumnProperty("value", String.class.getName())     
            .setTitle(null)     
            .setWidth(150)
            .build();       
            spoolColumn.setConditionalStyles(getSpoolConditionalStyle());

            drb.addColumn(spoolColumn);
            drb.setUseFullPageWidth(true);
            drb.addField("attributes", String.class.getName());
            DynamicReport dr = drb.build();
            return dr;
        }catch(ColumnBuilderException cbe){
            cbe.printStackTrace();
            throw new ReportDocumentGenerationException("No se pudo definir correctamente la columna del reporte para la pagina "+i);
        }catch(Exception e){
            e.printStackTrace();
            throw new ReportDocumentGenerationException("No se pudo generar la pagina "+i+" del reporte");
        }
    }* 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:39:28.133

如果您拥有或可以获得 JasperPrint 对象的句柄，那么您可以设置方向：

```
final JasperDesign jasperDesign = JRXmlLoader.load(someInputStream);
final JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
final JasperPrint jasperPrint =   jasperPrint = JasperFillManager.fillReport( jasperReport, parameters, dataSourceOrConnection);    
...
jasperPrint.setOrientation(OrientationEnum.LANDSCAPE); // Pick
jasperPrint.setOrientation(OrientationEnum.PORTRAIT);  // One 
...
someJRExporter.exportReport(); 
```

您还可以使用 JasperPrint 对象设置页面宽度和高度。

# machine-learning - 训练中神经网络权重的溢出

> ID：12244090
> 
> 赞同：0
> 
> 时间：2012-09-03T08:06:49.780
> 
> 标签：machine-learning, overflow, neural-network

我正在训练我的神经网络对图像中的某些事物进行分类。我裁剪 40x40 像素的图像并将其分类为某个对象与否。所以它有 1600 个输入神经元、3 个隐藏层（500、200、30）和 1 个必须为 1 或 0 的输出神经元。我使用[Flood](http://www.cimne.com/flood/download.asp)库。

我不能用 训练它`QuasiNewtonMethod`，因为它在算法中使用了一个大矩阵，它不适合我的记忆。所以我使用`GradientDescent`and the `ObjectiveFunctional`is `NormalizedSquaredError`。

问题在于，通过训练它会溢出权重，并且神经网络的输出是`INF`或`NaN`对于每个输入。

此外，我的数据集太大（CSV 格式时大约 800mb），我无法完全加载它。所以我`InputTargetDataSets`用 1000 个实例制作了许多实例，并将其保存为 XML（*Flood*的默认格式），并在每个随机打乱的数据集上训练一个 epoch。但是当我只在一个大数据集（10000 个实例）上训练它时，它也会溢出。

为什么会发生这种情况，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:02:48.110

我建议对输入进行标准化。您还应该考虑，如果您有 1600 个神经元..输入层的输出将相加（如果是 sigmoid 神经元），可能会出现很多问题。

打印出一些步骤非常有用..例如它在哪一步溢出。

有一些关于神经元权重的提示。我会推荐非常小的<0.01。也许如果你能提供更多关于神经网络和输入间隔、权重等的信息。我可以给你一些其他的想法。

顺便说一句，我认为数学证明两层就足够了，所以如果你不使用一些模拟人眼的专门算法，就不需要三层隐藏层。

# javascript - 使用 onClick 事件扩展 Aviarc 容器小部件

> ID：12244098
> 
> 赞同：1
> 
> 时间：2012-09-03T08:07:18.357
> 
> 标签：javascript, aviarc

我在屏幕布局中使用了一些容器小部件。我需要将容器扩展为具有“onClick”事件，这样我就可以按照以下方式做一些事情：

```
<screen>
    <container name="customer-list" ..>
        <!-- some content over here -->
    </container>

    <action:behaviors>
        <action:when widget-event="customer-list.onClick">
            <!-- some actions here -->
        </action:when>
    </action:behaviors>
</screen> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:10:39.617

要添加对 onClick 事件的支持，您需要将以下内容添加到小部件：

在小部件的构造函数中声明事件：

```
WidgetName = function() {
    this.onClick = new Toronto.client.Event("WidgetName onClick");
}; 
```

然后在启动方法中添加以下行：

```
widgetContext.addManagedDOMEvent(this.getContainerElement(), "onclick", this._onClickHandler, this, "WidgetName onClick binding"); 
```

唯一要实现的是实际的处理程序：

```
, _onClickHandler: function() {
    this.onClick.fireEvent({
        widget: this
    });
} 
```

这个想法是您将一个事件添加到小部件，将事件绑定到 DOM 节点，然后在处理程序中扩展 fireEvent 的属性对象以包含屏幕所需的所有相关细节。

# asp.net - ASP.Net 中的级联下拉菜单无法正常工作

> ID：12244099
> 
> 赞同：1
> 
> 时间：2012-09-03T08:07:21.240
> 
> 标签：asp.net

![使用 ASP.Net 的级联下拉菜单](../Images/02070bc6733575d1d5f1c645f2fcde46.png)

嗨 - 我知道这听起来很简单，但我无法实现某些功能。请参阅所附情况的屏幕截图。这就是我正在做的事情：

1.  在页面加载时，我正在加载产品/服务的第一个下拉列表
2.  基于产品下拉列表的选择，我正在填充第二个下拉列表“类别”。我正在调用数据库来实现这一点。
3.  根据类别的选择，我正在填充价格的第三个下拉列表。我正在调用数据库以获取此下拉列表的信息。

4.  根据第三个（价格）下拉列表的选择，我隐藏/显示面板。

每个下拉列表都在回发以调用数据库以获取后续下拉列表的详细信息。

在第一次运行期间一切似乎都在工作，但是当我尝试组合下拉菜单时问题就来了。以下是我遇到的问题：

1.  如果我从 Dropdown1 和 2 中选择不同的选项，面板一旦渲染就不会消失。
2.  在随后的运行之后，这些值在每次回发后相加。例如，如果我在产品/服务下拉列表中有一个产品“玩具车”，它现在出现了两次，依此类推。

3.  如果用户选择默认选项“选择产品”、“选择类别”等，则应重置整个层次结构。例如，如果产品下拉列表中的先前选择是“玩具车”，现在我选择默认选项“选择产品”。它应该重置“类别”、价格和面板可见性。

请让我知道如何做到这一点。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:14:08.990

在三个 DropDownLists

1 你设置 AutoPostBack="true"

2 你定义 OnSelectIndexChanged

```
<asp:dropdownlist id="ddl1" runa="server" Autopostback="true" onselectindexChanged="ddl1_selectindexChanged"/>

<asp:dropdownlist id="ddl2" runa="server" Autopostback="true" onselectindexChanged="ddl2_selectindexChanged"/>

<asp:dropdownlist id="ddl3" runa="server" Autopostback="true" onselectindexChanged="ddl3_selectindexChanged"/> 
```

您必须使用此策略定义 page_load

```
If(! IsPostBack)
{
  //Bind dropdownlist
} 
```

在每个 selectindexChanged 上，获取值并在数据库中执行选择，并绑定您的下拉列表。

```
void ddl1_selectindexChanged(Object sender, EventArgs e) 
{

//Get Selected Values

  //For examlpe you can use SelectedValue property
  var value1 = ddl1.SelectedValue;

  //Request your database

  //And bind your dropdownlist of sub categories

  ...
}

void ddl2_selectindexChanged(Object sender, EventArgs e) 
{
   ...
}

void ddl3_selectindexChanged(Object sender, EventArgs e) 
{
   ..;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:12:39.423

做以下事情：

1）在用户选择第一个下拉菜单之前，应禁用第二个和第三个下拉菜单，然后在用户选择第二个下拉菜单时启用第二个下拉菜单，然后启用第三个下拉菜单。

2）在回发时，清除 DropDownList 中的项目，然后再次将它们与数据源绑定。只需为每个下拉列表创建一个函数，并在通过调用下拉列表的 Clear 方法清除 DropDownList 后在 PostBack 上调用它。

3) 要重置整个层次结构，请将所有下拉列表的 SelectedIndex 设置为零或 -1；

# java - 以我在 java 或 jquery 中输入文本区域的相同格式显示内容

> ID：12244101
> 
> 赞同：4
> 
> 时间：2012-09-03T08:07:24.087
> 
> 标签：java, jsp, textarea

我有一个文本区域并在此文本区域中输入一些内容我想以与在文本区域中输入内容相同的格式在 jsp 页面上显示内容。所以就像我在文本区域中输入文本然后将其保存在 mysql 数据库中然后从数据库中检索它并显示在 Jsp 页面上。我也用谷歌搜索，但找不到解决方案。

我正在使用带有 mysql 数据库的 Spring MVC。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:13:31.487

将文本包含在`pre`标签中：

```
<pre><c:out value="${theTextFromDatabase}"/></pre> 
```

`c:out`JSTL 标记是 HTML 转义所有 HTML 特殊字符所必需的：become `<`、`&lt;`become `>`、`&gt;`become`&`等`&amp;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:19:34.003

我得到了删除**Textarea**问题的答案，现在无需在 Textarea 中添加标签。只需附加来自 textarea.like this.i 的值，它运行良好。

`String ques=request.getParameter("ques"); StringBuffer sb=new StringBuffer(); sb.append("<pre>"+ques+"</pre>"); String ss=sb.toString();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:16:21.367

当您说相同格式时，您的意思是粗体、斜体、eol 等？文本以您介绍的格式保存在您的数据库中？. 我认为您需要某种所见即所得的插件（所见即所得），例如 TinyMce（[http://www.tinymce.com/](http://www.tinymce.com/)），或者将正确的格式保存在数据库中，然后处理文本以根据您从数据库中收到的文本。

# jquery - 移动设备上的全日历多个单元格选择？

> ID：12244105
> 
> 赞同：27
> 
> 时间：2012-09-03T08:07:38.237
> 
> 标签：jquery, jquery-plugins, jquery-mobile, jquery-selectors, fullcalendar

我使用 Phonegap 为 Android 和 iPhone 等移动设备创建了一个完整的日历应用程序。我正在使用[Jquery Touch Punch 插件](https://raw.github.com/furf/jquery-ui-touch-punch/master/jquery.ui.touch-punch.js)和 Jquery fullcalendar 插件。fullcalendar 的“选择”方法在网络上运行良好。我可以在网络浏览器上的完整日历的月份视图中选择多个单元格。但是，在本机 android/iPhone 应用程序上，我无法选择日历的多个单元格（日期范围）。所发生的一切是当我单击单元格以选择日期范围时，在允许我在设备上选择多个日期之前触发“选择”方法。有没有办法克服这个问题？先感谢您。这是[Jsfiddle](http://jsfiddle.net/veer712/KrZJr/17/)。

示例代码：

```
// FullCalendar v1.5
// Script modified from the "theme.html" demo file

$(document).ready(function() {    
var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();

$('#calendar').fullCalendar({
    theme: true,
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month'
    },
    editable: true,
    disableDragging: true,
    disableResizing: true,
    droppable: true,
    drop: function( date, allDay, jsEvent, ui ){
       console.log(jsEvent);
       console.log(ui);
    },
    // add event name to title attribute on mouseover
    eventMouseover: function(event, jsEvent, view) {            
        if (view.name == "month") {
            $(jsEvent.target).attr('title', event.title);
        }
        //alert(event.id);
    },
    // For DEMO only
    // *************
    events: [
        {   id: 1,
            title: 'User1',
            start: '2012-09-01',
            end: '2012-09-01',
            color:'#E9B33E',
            className: 'user-class1'},
        {   id: 2,
            title: 'User2',
            start: '2012-09-06',
            end: '2012-09-06',
            color:'#00813E',
            className: 'user-class2'},    
        {   id: 3,
            title: 'User3',
            start: '2012-09-06',
            end: '2012-09-06',
            color:'#E59238',
            className: 'user-class3'},     
        {   id: 4,
            title: 'User4',
            start: '2012-09-06',
            end: '2012-09-06',
            color:'#00813E',
            className: 'user-class4'},            
        {   id: 5,
            title: 'User5',
            start: '2012-09-08',
            end: '2012-09-08',
            color:'#00813E',
            className: 'user-class5'},
        ],
    eventRender: function(event,element,calEvent) {                   
        element.attr('id',this.id);
        if(this.id!=5){                    
            element.find(".fc-event-title").after($("<br/><span class=\"fc-event-icons\"></span>")
            .html("<img src=\"http://png-5.findicons.com/files//icons/2018/business_icons_for/16/passport.png\" onclick=\"javascript:iconsAlert("+this.id+",'passport')\" class=\"icon\"/>"+
                "<img src=\"http://findicons.com/files//icons/1571/chalkwork_payments/16/card_visa.png\" onclick=\"javascript:iconsAlert("+this.id+",'visa')\" class=\"icon\" />"+
                "<img src=\"http://findicons.com/files//icons/894/banking_stuff/16/postage_stamp.png\" onclick=\"javascript:iconsAlert("+this.id+",'traveldoc')\" class=\"icon\" />"+
                "<img src=\"http://findicons.com/files//icons/756/ginux/16/richtext.png\" onclick=\"javascript:iconsAlert("+this.id+",'entrystamp')\" class=\"icon\" />"));
        }
        element.droppable({
                accept: '*',
                tolerance: 'touch',
                //activeClass: 'ui-state-hover',
                //hoverClass: 'ui-state-active',
                drop: function(ev, ui) {                
                    //console.log(ev.id);
                    alert(this.id);
                    //for(param in ui){    console.log(ev.id);}
                }
              });
},
selectable: true,
selectHelper: true,
select: function(start, end, allDay) {
   alert("Cell selected from "+$.fullCalendar.formatDate(start, 'yyyy-MM-dd')+" to "+$.fullCalendar.formatDate(end, 'yyyy-MM-dd'));
},
eventClick: function(calEvent, jsEvent, view) {
    if (!$(jsEvent.target).hasClass("icon")) {
       alert("UserID:"+calEvent.id);
    }                
}

});

$('#external-events div.passport-event,.visa-event,.entrystamp-event,.traveldoc-event').each(function() {

        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
        // it doesn't need to have a start or end
        var eventObject = {
            title: $.trim($(this).text()), // use the element's text as the event title
            className: $(this).attr('class')
        };

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject);

        // make the event draggable using jQuery UI
        $(this).draggable({
            zIndex: 999,
            revert: true,      // will cause the event to go back to its
            revertDuration: 0  //  original position after the drag
        });

    });
}); 
```

[对版主的谦虚请求：除非问题得到解决，否则请不要关闭此问题。谢谢]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T17:33:35.107

如何将事件侦听器添加到已初始化日历的单元格并应用一些魔法，如下所示：

```
$('#calendar table.fc-border-separate td.ui-widget-content').on('touchstart', function (event) {
    /* touch start processing, probably cancelling like*/ 
    event.preventDefault();
    event.stopImmediatePropagation();

    function mouseMoveHandler (event) {
         /* processing actual drag */
         /* possible also cancelling default behavior and instead calling Calendar API */
    }

    function mouseUpHandler (event) {
        /* processing mouse up */

        /* some clean up */         
        $(document).off('touchmove', mouseMoveHandler)
        .off('touchend touchleave touchcancel', mouseUpHandler);
    }

    $(document).on('touchmove', mouseMoveHandler)
        .on('touchend touchleave touchcancel', mouseUpHandler);
}); 
```

我知道与您的其他代码相比，这有点低级，但这会有所帮助。这些事件仅适用于手机，并且您可能能够实现所需的行为。抱歉没有时间自己尝试这种方法，也许我稍后会在 jsFiddle 上尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T10:11:52.243

只是为了补充这个老问题......

无触摸打孔的解决方案：

我已经亲自实现了移动日历的完整日历，并且在多选的 touchmove 处理方面遇到了麻烦，所以我决定只基于 html 日对象本身来完成这一切。

我只是得到首先选择的高度/宽度，并计算相对于该高度/宽度移动的距离。它需要一个 SelectDates(date1, date2) 函数来处理您想要对选择的日期范围执行的任何操作。

这是我的代码：

```
 $(document).on('touchmove', '.fc-day', function (e) {
            var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];

            var $startElement = $(this);
            var moveStartDate = new Date($startElement.data('date'));
            var timezoneOffset = moveStartDate.getTimezoneOffset() * 60000;
            moveStartDate.setTime(moveStartDate.getTime() + timezoneOffset);

            var rect = $startElement[0].getBoundingClientRect();

            var DayHeight = $startElement[0].clientHeight;
            var DayWidth = $startElement[0].clientWidth;

            var xdif = 0;
            if (touch.pageX < rect.left) {
                xdif = touch.pageX - rect.left;
            }
            if (touch.pageX > rect.right) {
                xdif = touch.pageX - rect.right;
            }
            var xDaysAwayDecimal = xdif == 0 ? 0 : (xdif / DayWidth);
            var xDaysAway = xdif >= 0 ? Math.ceil(xDaysAwayDecimal) : Math.floor(xDaysAwayDecimal);

            var ydif = 0;
            if (touch.pageY < rect.top) {
                ydif = touch.pageY - rect.top;
            }
            if (touch.pageY > rect.bottom) {
                ydif = touch.pageY - rect.bottom;
            }
            var yDaysAwayDecimal = ydif == 0 ? 0 : (ydif / DayHeight);
            var yDaysAway = ydif >= 0 ? Math.ceil(yDaysAwayDecimal) : Math.floor(yDaysAwayDecimal);

            var dayModifier = (yDaysAway * 7) + xDaysAway;

            var moveEndDate = new Date(moveStartDate);
            moveEndDate.setDate(moveEndDate.getDate() + dayModifier);
            if (moveStartDate > moveEndDate) {
                SelectDates(moveEndDate, moveStartDate);
            }
            else {
                SelectDates(moveStartDate, moveEndDate);
            }
        }) 
```

另外..如果您的 SelectDates() 进行任何繁重的工作，您可能只想让它每移动 x 个像素或 x 个毫秒就触发一次……或者只是保存这些值，然后在您停止时进行处理. 我的 SelectDates() 将 css 添加到日历中，因此我希望它通过触摸移动动作连续触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T15:23:20.023

这个答案是在另一个 StackOverflow 帖子中找到的：[How can we specify custom date range with fullcalendar?](https://stackoverflow.com/questions/16397474/how-can-we-specify-custom-date-range-with-fullcalendar)

您可以调用此函数来获取某个日期范围内的事件。但是，这只会为您带来 30 天的活动。

```
function GetAgendaEvents(datefrom, dateTo) {
    var fromDate = new Date($("#from").val());
    var toDate = new Date($("#to").val());

    if (fromDate.getTime() <= toDate.getTime()) {
        $('#fullcal').fullCalendar('removeEvents').fullCalendar('addEventSource', events);
        $('#fullcal').fullCalendar('refetchEvents');

        var filteredEvent = $('#fullcal').fullCalendar('clientEvents', function (event) {
            return event.start >= fromDate && event.start <= toDate;
        });

        $('#fullcal').fullCalendar('gotoDate', fromDate.getFullYear(), fromDate.getMonth(), fromDate.getDate());
        $('#fullcal').fullCalendar('changeView', 'agenda'/* or 'basicDay' */);

        $('#fullcal').fullCalendar('removeEvents').fullCalendar('addEventSource', filteredEvent);
        $('#fullcal').fullCalendar('refetchEvents');
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-27T16:06:14.640

另一个解决方案是 Datebox。我已经在我的 jquery 移动应用程序中实现了它，它易于使用。非常适合电脑、手机、平板电脑 [http://dev.jtsage.com/jQM-DateBox2/](http://dev.jtsage.com/jQM-DateBox2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-08T10:56:29.143

经过大量搜索，我没有找到简单明了的答案，所以，我自己做了，这里是：

```
var calendar = $('#calendar').fullCalendar({
     .. 
    ....
     ..
    dayRender: function( date, cell) {
        $(cell).on("touchend",function(event){
            var startDate = date;
            var x= event.originalEvent.changedTouches[0].clientX;
            var y = event.originalEvent.changedTouches[0].clientY
            var endDate = moment($(document.elementFromPoint(x, y)).attr("data-date"),"YYYY-MM-DD");
            if(endDate>startDate){
                calendar.fullCalendar( 'select', startDate, endDate.add('days', 1));
            }else{
                calendar.fullCalendar( 'select', endDate, startDate.add('days', 1));
            }
        });
    },
    select: function(start, end, allDay, jsEvent, view) {
         .. 
        ....
         .. 
        calendar.fullCalendar('unselect');
    }
}); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-19T17:46:22.993

根据我的经验，我从来没有发现日历是完成此类任务的好选择。尝试改用 datepicker - [http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/](http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/)

# objective-c - Objective-c 中的动态链接/动态类型

> ID：12244109
> 
> 赞同：0
> 
> 时间：2012-09-03T08:07:57.550
> 
> 标签：objective-c

我在 BNR 第 3 版中看到了一个做静态单例类的例子。为此，他们解释了如何避免调用超类 alloc 的创建周期：

```
static MyClass *myclass = [[super alloc] init]; 
```

MyClass 有自己的 init 方法。

```
NSObject -> MyClass 
```

我的疑问是：发送了哪个初始化类？NSOject 初始化或 MyClass 初始化

嵌套的 alloc init 等于：

`myclass = [super alloc]`然后 `myclass = [myclass init]`？？？？？？？？？

或者

`myclass = [super alloc]`接着`myclass = [super init]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:21:53.140

不要使用`super`，但一定要使用`self`。否则你的单例的子类化将不起作用。正确的方法是这样的：

```
+ (MyClass *)sharedInstance {
  static MyClass *instance = nil;
  static dispatch_once_t onceToken;
  dispatch_once(&onceToken, ^{
    instance = [[self alloc] init];
  });
  return instance;
} 
```

`dispatch_once`保证您的代码（在这种情况下为块）仅被调用一次。并`self`保证子类化将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:22:31.093

for you question, the selector is always called on the subclass's implementation, which is your first guess

the way described in the book is a valid way to implement singleton, but i do not suggest it though. Robert Vojta's solution is good.

i cannot see how necessary to override `allocWithZone`, then you also need to make sure `init` does nothing (at least not leak)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:09:46.143

只是为了添加一些测试：

我创建了 2 个 MyClass 类： NSObject -> Myclass -> My2ndClass

所以：

```
@implementation Myclass
    +(id) sharedClass {
    static Myclass *miclase = nil;
    miclase = [[self alloc] init];    
    NSLog(@"%@", [super description]);
    return miclase;
}

-(id)init {    
    self = [super init];
    NSLog(@"init de Myclass");
    return self;
}
-(NSString *)description {
    return @"i am Myclass";
}
@end 
```

和：

```
@implementation My2ndClass
+(id) sharedClass {
    static My2ndClass *miclase = nil;
    miclase = [[super alloc] init];
    //miclase = [super init];  CRASH
    NSLog(@"%@", [super description]);
    return miclase;
}

-(id)init {    
    self = [super init];
    NSLog(@"init de My2ndClass");
    NSLog(@"%@", [super description]);
    return self;
}

-(NSString *)description {
    return @"i am My2ndClass";
}
@end 
```

然后在 AppDelegate 中：

```
Myclass *miclase = [Myclass sharedClass];
My2ndClass *mi2ndclase = [My2ndClass sharedClass]; 
```

这是控制台输出：

```
2012-09-03 17:18:55.742 Dynamic Typing[2891:207] init de Myclass
2012-09-03 17:18:55.744 Dynamic Typing[2891:207] Myclass
2012-09-03 17:18:55.746 Dynamic Typing[2891:207] init de Myclass
2012-09-03 17:18:55.747 Dynamic Typing[2891:207] init de My2ndClass
2012-09-03 17:18:55.748 Dynamic Typing[2891:207] i am Myclass
2012-09-03 17:18:55.751 Dynamic Typing[2891:207] My2ndClass 
```

就像 xlc0212 所说的那样，嵌套时的正确消息是：

```
miclase = [super alloc];
miclase = [miclase init]; 
```

此外，如果我这样做

```
miclase = [super alloc] 
```

接着

```
miclase = [super init] 
```

它崩溃了。

当发送一个类方法 (+) [super description] 时，它会记录类名（Myclass 和 My2ndClass）。它们本身就是一流的，没有超级对象，是吗？

# ios - 无法初始化 AVAudioRecorder: (null)

> ID：12244111
> 
> 赞同：5
> 
> 时间：2012-09-03T08:08:19.397
> 
> 标签：ios, cordova

我正在使用 cordova 框架在 iOS 上工作，并且我已经按照 cordova 文章中的描述实现了 AudioRecorder 功能。当我尝试录制音频文件时，会出现一条消息“无法初始化 AVAudioRecorder：（null）”。我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:47:43.273

PhoneGap Media api 允许以`.wav`格式（和其他类型）记录，但不允许以`mp3`. 选择`mp3`格式是一个常见的错误。

您应该将文件另存为`.wav`.

# android - Nexus S ISO14443 通讯

> ID：12244114
> 
> 赞同：2
> 
> 时间：2012-09-03T08:08:50.950
> 
> 标签：android, nfc, nfc-p2p

我正在寻找一种在**ISO14443**中与我的**nexus S进行****P2P**交换的方法，以便监视**LLC/NDEF**通信。

 ******我已经尝试过使用**NFC ACR122**阅读器和**Galaxy S NFC**手机，但通信始终在**FeliCa**而不是**14443**。

Galaxy S 在**4.0.3**中，我的 Nexus 在**4.1.1**中，现在在**4.0.1**中。

没办法，通信总是在**FeliCa**，但我知道 Nexus S 支持**14443 A/B**。

有没有办法强制**14443**通信？我也试过[了](http://www.grundid.de/nfc/)，但没有办法接收或发送任何东西。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:27:01.487

仍然不完全清楚您要做什么，但如果您不想 root 手机和/或更改固件，您需要控制阅读器。您的设备应该可以使用[libnfc](http://www.libnfc.org/)，您可以尝试使用[libnfc-llcp](http://code.google.com/p/nfc-tools/source/browse/#svn/trunk/libnfc-llcp)来启动/接收 P2P 通信。然后您可以随意记录/检查等消息。******

# jquery - 在 django 中优化 jquery

> ID：12244116
> 
> 赞同：0
> 
> 时间：2012-09-03T08:09:10.887
> 
> 标签：jquery, ajax, django

我已经完成了以下代码，它实际上使用 ajax 和 jquery 概念在第三个列表框中动态生成了值。虽然它有效，但我需要优化它。下面是我现在正在处理的代码。

```
<html>
<head>
    <title>Comparison based on ID Number</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>     
</head>
<body>   
    {% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
    {% endif %}
    <form action="/idnumber/" method="post" align= "center">{% csrf_token %}        
         <p>Select different id numbers and the name of the <b> Measurement Group </b>to start the comparison</p>         
         <table align = "center">
         <tr>
            <th><label for="id_criteria_1">Id Number 1:</label></th>
            <th>        {{ form.idnumber_1 }}           </th>
         </tr>
         <tr>
            <th><label for="id_criteria_2">Id Number 2:</label></th>
            <th>        {{ form.idnumber_2 }}               </th>
         </tr>
         <tr>
            <th><label for="group_name_list">Group Name:</label></th>
            <th><select name="group_name_list" id="id_group_name_list">
            <option>Select</option>         
            </select>
            </th>
         </tr>   
         <script>
         $('#id_idnumber_2').change(
        function get_group_names()
        {
            var value1 = $('#id_idnumber_1').attr('value');
            var value2 = $(this).attr('value');         
            alert(value1);
            alert(value2);
            var request = $.ajax({
                url: "/getGroupnamesforIDnumber/",
                type: "GET",
                data: {idnumber_1 : value1,idnumber_2 : value2},            
                dataType: "json",               
                success: function(data) {
                    alert(data);
                    var myselect = document.getElementById("group_name_list");  
                    document.getElementById("group_name_list").options.length = 1;
                    var length_of_data = data.length;
                    alert(length_of_data);
                    try{        
                        for(var i = 0;i < length_of_data; i++)                  
                        {
                            myselect.add(new Option(data[i].group_name, "i"), myselect.options[i]) //add new option to beginning of "sample"
                        }
                        }
                        catch(e){ //in IE, try the below version instead of add()
                            for(var i = 0;i < length_of_data; i++)
                            {
                                myselect.add(new Option(data[i].group_name, data[i].group_name)) //add new option to end of "sample"                        
                            }                   
                        }               
        }
        });
        });
         </script>

        <tr align = "center"><th><input type="submit" value="Submit"></th></tr> 
         </table>         
    </form>
</body>
</html> 
```

一切正常，但我的代码中有一个小问题。（即）我的 ajax 函数仅在选择列表 2 （即）“id_number_2”发生变化时调用。我想让它以这样一种方式调用，即无论哪个选择框，第三个列表框都应该自动更新。

任何人都可以通过可能的逻辑解决方案帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:30:56.880

如果两个列表框中的任何一个发生更改，则触发 ajax 更改功能。

改变：

```
$('#id_idnumber_2').change( 
```

至

```
$('select[id^="id_idnumber"]').change( 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:36:41.150

```
 $('#id_idnumber_2, #id_idnumber_1').live('change', function(){
 function get_group_names()
    {
     // Your code here
    }
 }); 
```

# android - 清洁片段

> ID：12244119
> 
> 赞同：0
> 
> 时间：2012-09-03T08:09:23.047
> 
> 标签：android, android-fragments

有什么办法可以清理碎片的状态吗？

我的意思是这样的情况：我创建了一个片段实例（让我们称之为 A）传递它一个 ID 以加载一些内容，而不是返回到前一个片段（例如 B）。当我再次去 A 时，传递 NO ID（它应该加载默认数据） - 它已经有一个以前使用的 ID，我的逻辑中断了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:21:07.707

不要将您的“A”添加到**backstack**。所以它不会被保存到**backstack**中。每当您返回并再次访问时，它都不会被添加。这是你想要的对吗。

```
 // Instantiate a new fragment.
    Fragment newFragment = CountingFragment.newInstance(mStackLevel);

    // Add the fragment to the activity, pushing this transaction
    // on to the back stack.
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.simple_fragment, newFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    //ft.addToBackStack(null);// Do not add to backstack here.(add every time new).
    ft.commit();
```

# javascript - 无法从 div 启动 Stellar.js

> ID：12244124
> 
> 赞同：0
> 
> 时间：2012-09-03T08:09:46.940
> 
> 标签：javascript, html, css

我正在尝试将 Stellar.js (http://markdalgleish.com/projects/stellar.js/) 实施到我正在开发的网站。我意识到我需要将视差滚动包含在容器内，而不是使用窗口/主体，以便它在 iPad 上工作（考虑到视口），这就是我遇到问题的地方；该脚本似乎没有正确启动。

这是我在网站上设置的结构 -

HTML

```
 <header></header>
        <!-- keeping this content outside of #content because of a prefixed alignment -->

        <div id="content">

        <section id="example" data-stellar-background-ratio="1">
            <img src="example-1.png" data-stellar-ratio="2" data-stellar-offset="-25">
            <img src="example-2.png" data-stellar-ratio="3" data-stellar-offset="-50">
            <img src="example-3.png" data-stellar-ratio="4" data-stellar-offset="0">
        </section>

    </div> 
```

CSS

```
 #content {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

section {

        background-attachment: fixed;
        width: 100%;
        height: 100%;
        position: relative;
    }
        img:first-child {
            position: absolute;
            top: 0;
            left: 300px;
        }
        img:nth-child(2) {
            position: absolute;
            z-index: 99;
            top: 0;
            right: 150px;
        }
        img:nth-child(3) {
            position: absolute;
            z-index: 99;
            top: 0;
            left: 100px;
        } 
```

JavaScript

```
 $('#content').stellar({
        horizontalScrolling: false
    }); 
```

我可以看到该部分内的视差图像显示：无，但除此之外，脚本似乎没有运行。我没有 JS 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:15:03.830

我认为这可能与您使用`position: absolute`而不给 div 任何东西有关。

你检查过你的`#content`div的大小吗？或者恒星也处理这个？

# php - 在 jQuery 中设置 $_file 变量

> ID：12244127
> 
> 赞同：0
> 
> 时间：2012-09-03T08:09:52.317
> 
> 标签：php, jquery, ajax

我想验证图像是否具有有效的 ajax 格式。但是我有一个问题，如何在 jQuery 中设置 $_file 变量？

所以我想“翻译”这个 php 代码：

```
 $Avatar = $_FILES['Avatar']['name'];
        $AvatarTmp = $_FILES['Avatar']['tmp_name']; 
```

到 jquery。

这里是（重要部分）将被调用的 Php 脚本（$.post）：

```
 if(!empty($AvatarTmp))
        {
            $AvatarSize = getimagesize($AvatarTmp);

            if($AvatarSize['mime'] =='image/jpeg')
            {
                $AvatarSrc = imagecreatefromjpeg($AvatarTmp);                       
            }else

            if($AvatarSize['mime'] =='image/png')
            {   
                $AvatarSrc = imagecreatefrompng($AvatarTmp);                        
            }else

            if($AvatarSize['mime'] =='image/gif')
            {                       
                $AvatarSrc = imagecreatefromgif($AvatarTmp);
            }else
            {
                $Errors[] = "Error006";
                $AvatarSrc = false;
            }
        } 
```

PS：如果需要更多代码或任何内容，请询问，我会立即添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:13:23.337

不，除非您在 mozilla firefox 中使用 html5 文件 api，否则您不能在 ajax 请求中发送文件。

或者你可以这样做，

将带有文件输入的表单提交到 iframe，并在 iframe 的负载上使用 jquery 获取 iframe 的 body 元素的内容。并检查服务器的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:15:18.840

不幸的是，jQuery (JavaScript) 与 PHP 完全不同，因此它没有任何类型的 File 对象。正如@VIPINJAIN 提到的，HTML5 文件 API 即将到来，但它还处于起步阶段。

您最好通过文件扩展名进行检查（请参阅[使用 jquery 检查输入文件的正确格式](https://stackoverflow.com/questions/6846335/check-input-file-for-correct-format-with-jquery)）或在服务器端进行检查，如果格式错误，则从服务器输出错误。

== 编辑 ==

这是一个如何使用 File API 的示例，包括如何使用它检查文件类型，但请记住，这仅适用于[有限数量的浏览器](http://caniuse.com/#search=file%20api)：

[http://robertnyman.com/2010/12/16/utilizing-the-html5-file-api-to-choose-upload-preview-and-see-progress-for-multiple-files/#highlighter_81142](http://robertnyman.com/2010/12/16/utilizing-the-html5-file-api-to-choose-upload-preview-and-see-progress-for-multiple-files/#highlighter_81142)

# c# - 在 MVC3 问题中键入安全 URL 操作

> ID：12244128
> 
> 赞同：2
> 
> 时间：2012-09-03T08:10:02.680
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我不喜欢 Url.Action("string", "string) ，因此在下面写了扩展方法

```
public static string Action<TController>(this UrlHelper urlHelper, Expression<Func<TController, object>> actionExpression)
{
    var controllerName = typeof(TController).GetControllerName();
    var actionName = actionExpression.GetActionName();

    return urlHelper.Action(actionName, controllerName);
} 
```

我在剃刀视图中使用它，如下所示：

```
@{Url.Action<ClientController>(action => action.ClientDetails());} 
```

它不渲染任何东西。我在任何地方都犯了错误还是错过了什么？是否可以这样做，因为我喜欢类型安全的性质，而不是硬编码动作名称和控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:07:02.237

使用括号表示代码块。使用括号（见下文）是一个显式表达式。表达式将作为 HTML 的一部分输出，但代码块不会。

```
@(Url.Action<ClientController>(action => action.ClientDetails())) 
```

[查看此 SO 帖子以获得更完整的答案。](https://stackoverflow.com/questions/9756139/difference-between-parenthesis-and-curly-brackets-in-razor)

# android - 和引擎扩展错误

> ID：12244131
> 
> 赞同：1
> 
> 时间：2012-09-03T08:10:32.617
> 
> 标签：android, eclipse, andengine

我只是使用 git 导入和引擎。幸运的是没有发现错误。然而andengine扩展有很多错误。

```
[2012-09-03 03:02:29 - AndEngineMODPlayerExtension]     (skipping file '.gitignore' due to ANDROID_AAPT_IGNORE pattern '.*')
[2012-09-03 03:02:29 - AndEngineMODPlayerExtension] ERROR: resource directory 'C:\Documents and Settings\admin\workspace_mobile2\AndEngineMODPlayerExtension\res' does not exist
[2012-09-03 03:05:53 - AndEngineLiveWallpaperExtension] ERROR: resource directory 'C:\Documents and Settings\admin\workspace_mobile2\AndEngineLiveWallpaperExtension\res' does not exist
[2012-09-03 03:05:54 - AndEngineLiveWallpaperExtension] ERROR: resource directory 'C:\Documents and Settings\admin\workspace_mobile2\AndEngineLiveWallpaperExtension\res' does not exist
[2012-09-03 03:06:06 - AndEngineLiveWallpaperExtension]     (skipping file '.gitignore' due to ANDROID_AAPT_IGNORE pattern '.*')
[2012-09-03 03:06:06 - AndEngineLiveWallpaperExtension] ERROR: resource directory 'C:\Documents and Settings\admin\workspace_mobile2\AndEngineLiveWallpaperExtension\res' does not exist
[2012-09-03 03:06:10 - AndEngineLiveWallpaperExtension]     (skipping file '.gitignore' due to ANDROID_AAPT_IGNORE pattern '.*')
[2012-09-03 03:06:10 - AndEngineLiveWallpaperExtension] ERROR: resource directory 'C:\Documents and Settings\admin\workspace_mobile2\AndEngineLiveWallpaperExtension\res' does not exist
[2012-09-03 03:06:20 - AndEngineLiveWallpaperExtension]     (skipping file '.gitignore' due to ANDROID_AAPT_IGNORE pattern '.*')
[2012-09-03 03:06:20 - AndEngineLiveWallpaperExtension] ERROR: resource directory 'C:\Documents and Settings\admin\workspace_mobile2\AndEngineLiveWallpaperExtension\res' does not exist
[2012-09-03 03:06:51 - AndEngineLiveWallpaperExtension]     (skipping file '.gitignore' due to ANDROID_AAPT_IGNORE pattern '.*')
[2012-09-03 03:06:51 - AndEngineLiveWallpaperExtension] ERROR: resource directory 'C:\Documents and Settings\admin\workspace_mobile2\AndEngineLiveWallpaperExtension\res' does not exist 
```

我尝试创建一个 res 文件夹，但它不起作用。那只有动态壁纸库。我没有导入模组和多人游戏扩展等。任何人如何解决这个问题？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:16:24.027

此错误不时出现，但在我的情况下，通常在重建工作区后消失。尝试禁用“自动构建”选项，然后清理工作区。

# javascript - 三.js EffectComposer的渲染目标

> ID：12244133
> 
> 赞同：0
> 
> 时间：2012-09-03T08:10:38.570
> 
> 标签：javascript, webgl, three.js

我知道当我们使用 EffectComposer 时，场景会渲染到 composer.renderTarget2 或 composer.renderTarget1。在这个[例子](http://alteredqualia.com/three/examples/webgl_postprocessing_ssao.html)中，我读到了这个：

```
renderer.render( scene, camera, composer.renderTarget2, true );

renderer.shadowMapEnabled = false;
depthPassPlugin.enabled = false;

// do postprocessing

composer.render( 0.1 ); 
```

那么第一行的效果是什么？场景被渲染到 composer.renderTarget2 但是如何使用 renderTarget2 呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:02:54.303

renderTarget2 是一个 WebGLRenderTarget，它指定了要使用的过滤器。然后渲染运行作曲家的通行证。

有用的例子：[http ://bkcore.com/blog/3d/webgl-three-js-animated-selective-glow.html](http://bkcore.com/blog/3d/webgl-three-js-animated-selective-glow.html)

# domain-driven-design - 领域驱动设计中的一组动态属性

> ID：12244138
> 
> 赞同：3
> 
> 时间：2012-09-03T08:10:52.743
> 
> 标签：domain-driven-design, modeling

在通过搜索后，我找不到任何可以回答这个问题的问题，在我看来，这是相当常见的设计问题。

给定域对象：

```
public class Item {
    private Long itemSN;
    private String name;

    methods, etc...
} 
```

我们需要存储描述项目的特定字符串属性集。它可以是重量、颜色、尺寸等。系统必须是灵活的并且能够保持可变的属性列表。它需要存储允许的属性名称，并最好强制执行其中一些。

我尝试了几种方法，但是所有 Item 对象共享的公共约束的概念不适合任何标准域模型。

所以我开始将约束视为一种配置形式。每个项目都有自己的属性（在简单的字符串映射中），另一方面，约束是所有项目的通用配置。于是下一个难题出现了……如何在不给领域模型造成大漏洞的情况下表达它？

很容易引入额外的应用层对象来存储约束，但是“允许/需要的属性”是商业事务，我们需要允许域用户（某种类型的经理）来改变它，所以把这个逻辑抽离出来感觉真的很可怕域层。

欢迎任何建议。

**编辑 1.** 经过大量头脑风暴后，我设法为给定情况创建了有效的对象模型。乍一看，用通用约束封装属性是不可能的，但最新的域外实现给了我一个想法：

```
public class Item {
    private Long itemSN;
    private String name;
    private List<Property> properties;
} 
```

问题的核心在这里解决了：

```
public class Property {
    private Long propertyId;
    private String propertyValue;
    private Constraint constraint;
}

public class Constraint {
    private String name;
    private Boolean required;
    private List<String> allowedValues;
} 
```

因此，每个属性都有其值和约束对象，它们指定名称、允许值和所需状态。这样约束对象可以被许多属性共享，并且这些属性中的任何一个都可以有自己的值。它给数据库映射增加了一些复杂性，并且会影响性​​能，但它也将所有域逻辑保留在域对象中。

欢迎任何改进、建议和意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T11:16:19.500

这个问题可以通过使用注解来非常合理地解决。注释允许您（编码人员）通过简单地使用约束注释属性来继续使用语言来使用属性，同时仍然可以在没有注释的情况下将相同的约束应用于用户定义的字段。

[JSR-349](http://beanvalidation.org/1.1/spec/)是应用此类约束的 Java 标准。[Hibernate 验证器](http://hibernate.org/subprojects/validator)是一个众所周知的实现。

# android - 手动更新联系人的 ContentObserver

> ID：12244140
> 
> 赞同：7
> 
> 时间：2012-09-03T08:11:07.537
> 
> 标签：android, contactscontract

我已经注册了一个来自服务的服务，并且当电话中有更新（例如呼叫或联系人更新）时`ContentObserver`，我可以获得该功能。`onchange()`但我希望`onchange()`仅在添加、更新或删除发生时调用该函数。但我不希望有来电或去电。那么谁能告诉我`URI`可以在哪个注册`contentObserver`？我的代码在这里

```
getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI, true,new Contact_change()); 
```

和 Contact_change.java 类就像

```
public class Contact_change extends ContentObserver{

  public Contact_service() {
    super(null);
  }

  @Override
  public void onChange(boolean selfChange){
    Log.i("contact_service","onchange");
    Super.onChange(selfChange);
   }

 @Override   
 public boolean deliverSelfNotifications() {
  return true;
  }

} 
```

**编辑：**
我还有一个问题是，在停止服务后，如果我改变了联系方式，那么也会`onchange()`调用函数。那么我该如何停止或取消注册`contentobserver`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T13:23:10.093

In order to stop receiving notifications from ContentObserver, you must unregister it.

Create an instance of ContentObserver which you can use later to register/unregister.

```
Contact_change changeObserver = new Contact_change(); 
```

Register observer:

```
getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI, true,changeObserver); 
```

Unregister observer:

```
getContentResolver().unregisterContentObserver(changeObserver); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:08:56.217

我使用了[此处](https://stackoverflow.com/questions/10718181/content-observer-is-bieng-called-even-if-the-contacts-are-not-changed?rq=1#comment13921666_10718181)提到的**ContactsContract.Contacts.CONTENT_VCARD_URI**。

你也可以像[这里提到的那样设置一个 threshold_time](https://stackoverflow.com/a/10752736/944070)

它的效率更高一些。

# ruby-on-rails - model.save 后缺少 id

> ID：12244141
> 
> 赞同：0
> 
> 时间：2012-09-03T08:11:06.900
> 
> 标签：ruby-on-rails, activerecord, save

创建新记录后，我无法获取记录的 ID。

```
# /var/www# rails g model Foo name:string
      invoke  active_record
      create    db/migrate/20120904030554_create_foos.rb
      create    app/models/foo.rb
      invoke    test_unit
      create      test/unit/foo_test.rb
      create      test/fixtures/foos.yml
# /var/www# rake db:migrate
==  CreateFoos: migrating =====================================================
-- create_table(:foos)
   -> 0.3451s
==  CreateFoos: migrated (0.3452s) ============================================

# /var/www# rails c
Loading development environment (Rails 3.2.8)
1.9.3p194 :001 > foo = Foo.new(:name => 'bar')
 => #<Foo id: nil, name: "bar", created_at: nil, updated_at: nil> 
1.9.3p194 :002 > foo.save
   (0.2ms)  BEGIN
  SQL (0.4ms)  INSERT INTO `foos` (`created_at`, `name`, `updated_at`) VALUES ('2012-09-04 03:06:26', 'bar', '2012-09-04 03:06:26')
   (103.2ms)  COMMIT
 => true 
1.9.3p194 :004 > Foo.last
  Foo Load (0.5ms)  SELECT `foos`.* FROM `foos` ORDER BY `foos`.`id` DESC LIMIT 1
 => #<Foo id: 1, name: "bar", created_at: "2012-09-04 03:06:26", updated_at: "2012-09-04 03:06:26"> 
1.9.3p194 :003 > foo.inspect
 => "#<Foo id: nil, name: \"bar\", created_at: \"2012-09-04 03:06:26\", updated_at: \"2012-09-04 03:06:26\">" 
```

这似乎只是我的应用程序中的一个问题。我在一个新的`rails new foo`应用程序上做了同样的事情，并且 id 出现了。

这怎么可能发生？

# php - php mysql 查询语法

> ID：12244148
> 
> 赞同：4
> 
> 时间：2012-09-03T08:11:27.733
> 
> 标签：php, mysql, sql

我的桌子上有这些字段

```
month
year 
```

我想根据这个进行查询

```
month BETWEEN 4 AND 12 AND year = 2008 
```

或者

```
month BETWEEN 1 AND 10 AND year is greater than 2008 but equal or less than 2009 
```

我试过了，但没有给出正确的查询结果。

```
"WHERE month BETWEEN 4 AND 12 AND year = 2008 OR month BETWEEN 1 AND 10 AND year 2008<=2009"; 
```

注意：这里的数字是可变的，我显示了实际数字以便您轻松理解:) 有帮助吗？

> year = (2008<=2009) 表示年份必须大于 2008 但等于或小于 2009

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T08:15:45.843

试试这个：

```
where (year*100)+month between  200804 and  200910 
```

这将处理所有情况..即使年份之间的差异不止一个

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T08:22:01.777

```
"WHERE ((month BETWEEN 4 AND 12) AND year = 2008) OR ((month BETWEEN 1 AND 10) AND (year 2008 OR 2009))"; 
```

希望它有帮助:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T08:14:03.353

你应该做这个，

```
WHERE (year = 2008 AND month BETWEEN 4 AND 12) 
       OR
      (year > ? AND year <= 2009 AND 
       month BETWEEN 1 AND 10) 
```

你这是什么意思？`greater than 2008 but equal or less than 2009`. 你的意思是等于`2009`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T08:13:27.653

你看过[MySQL 日期函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)吗？这样做就像试图用鞋钉钉子一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T08:13:43.977

它应该像这样工作：

```
WHERE ((month BETWEEN 4 AND 12) AND year = 2008) OR ((month BETWEEN 1 AND 10) AND year = 2009) 
```

# ruby-on-rails - 支付网关实现

> ID：12244152
> 
> 赞同：0
> 
> 时间：2012-09-03T08:11:41.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, payment-gateway, zuora

我们正在开发一个 Rails 应用程序，现在我必须将 ZUORA 集成为支付网关。我从来没有做过第三方集成，所以不知道这一点，但谷歌搜索后我得到了一些提示

1-我们可以在我们的网站上提供链接，并可以将用户重定向到支付网关

现在我只想知道是否有任何 gem 或插件可用于将 ZUORA 与我的应用程序集成

或者我该如何继续和整合 ZUORA。

有没有和zuora一起工作的人请分享他们的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:28:12.267

Zuora 提供了一个示例 RoR 应用程序：

[http://knowledgecenter.zuora.com/@api/deki/files/381/Zuor​​a_quickstart_ruby.zip](http://knowledgecenter.zuora.com/@api/deki/files/381/Zuora_quickstart_ruby.zip)

# c++ - CLOCKS_PER_SEC 在不同操作系统中的行为

> ID：12244153
> 
> 赞同：6
> 
> 时间：2012-09-03T08:11:56.730
> 
> 标签：c++, linux, windows-7, fedora16

我正在运行 cpp 代码，但有一件事我注意到在 Windows 7 上，C++ 代码中的 CLOCKS_PER_SEC 给出 1000，而在 linux fedora 16 上给出 1000000。任何人都可以证明这种行为是合理的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:59:14.047

有什么好辩解的？ `CLOCKS_PER_SEC`是实现定义的，可以是任何东西。所有它都表明它是函数返回的单位 `clock()`。它甚至没有指示分辨率`clock()`：Posix 要求它为 1000000，无论实际分辨率如何。如果 Windows 返回 1000，那也可能不是实际的分辨率。（我发现我的 Linux 机器的分辨率是 10 毫秒，而我的 Windows 机器是 15 毫秒。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:14:31.817

基本上该`clock()`功能的实现对于不同的操作系统都有一定的余地。在 Linux Fedora 上，时钟走得更快。它每秒滴答一百万次。

这个时钟滴答与 CPU 的时钟频率不同，在不同的抽象层上。Windows 试图使时钟滴答数等于**毫秒**数。

> 该宏扩展为一个表达式，表示一秒钟内的时钟滴答数，由函数时钟返回。
> 
> 将时钟滴答计数除以该表达式得出秒数。
> 
> CLK_TCK 是此宏的过时别名。

参考：[http ://www.cplusplus.com/reference/clibrary/ctime/CLOCKS_PER_SEC/](http://www.cplusplus.com/reference/clibrary/ctime/CLOCKS_PER_SEC/)

您还应该知道 Windows 实现不适用于真正**的实时**应用程序。1000 滴答时钟是通过将硬件时钟除以 2 的幂得出的。这意味着它们实际上得到了 1024 滴答时钟。要将其转换为 1000 滴答时钟，Windows 将跳过某些滴答，这意味着某些滴答比其他滴答慢！

一个单独的硬件时钟（不是 CPU 时钟）通常用于计时。参考：[http ://en.wikipedia.org/wiki/Real-time_clock](http://en.wikipedia.org/wiki/Real-time_clock)

# c# - 用不同的程序集处理相同的命名空间

> ID：12244165
> 
> 赞同：0
> 
> 时间：2012-09-03T08:13:07.260
> 
> 标签：c#, .net, app-config

我有两个不同的库，`Testlib1`并且`Testlib2`在同一个命名空间中，但我希望它们使用不同的`app.config`文件。

我可以用两个不同的`app.config`文件创建一个应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:17:54.010

只有一个 app.config 和运行时。如果您的程序集具有所需的不同 app.config 部分，则需要将它们传输到主 app.config 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:17:58.817

The app.config file is for the executing application (usually an EXE file or web under IIS), not an assembly. If you want to share settings across multiple applications, see the answer in [Is there any way for an App.config file to reference another full config file? (.NET)](https://stackoverflow.com/questions/487991/is-there-any-way-for-an-app-config-file-to-reference-another-full-config-file).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T19:39:28.647

.NET 配置系统的范围是`AppDomain`，每个 AppDomain 都有自己的配置文件。

因此，如果应用程序在它启动的应用程序之外创建额外的 AppDomains，则可能有一个应用程序使用多个配置文件（有关此类应用程序的示例，请参见[NUnit ）。](http://www.nunit.org/index.php?p=configFiles&r=2.6.1)

设计和实现多 AppDomain 应用程序并非易事，如果您的唯一目标是分离两个库的配置，则可以使用更简单的方法（但不使用多个完整的配置文件）。

# javascript - settimeout 调用的函数未结束

> ID：12244167
> 
> 赞同：1
> 
> 时间：2012-09-03T08:13:13.043
> 
> 标签：javascript, settimeout

问题：在幻灯片中，下面的淡入淡出函数不断调用淡入/淡出函数，请 JsFiddle 运行大约十秒钟来查看问题。在 IE 中不起作用，不要让 jsfiddle 运行太久，它可能会导致浏览器崩溃！

JsFiddle：http: [//jsfiddle.net/HdYmH/](http://jsfiddle.net/HdYmH/)

详细信息（对于那些有兴趣的人）：嗨，很抱歉发布一个包含这么大代码块的问题。我仍在学习 javascript，并试图弄清楚如何制作幻灯片。我知道那里有很多 js 幻灯片，但我想将其作为一种学习体验。因此请注意，此代码的某些部分非常糟糕。该问题可能与幻灯片的 changeSlide() 方法有关。

我用萤火虫找出在几秒钟后最明显地调用了哪个方法，fadeOut 将被调用 20k+ 次：|

```
// Generic fade function that fades in or out
function fade(pElem, pStartOpac, pEndOpac, fps, sec) {
    if ((typeof (pElem) !== "string") || (typeof (pStartOpac) !== "number")
            || (typeof (pEndOpac) !== "number") || (typeof (fps) !== "number")
            || (typeof (sec) !== "number")) {
        console.log("Parameters incorrect format has to be (string) Element Id, (double) Starting Opacity, (double) End Opacity, (integer) frames per second, (integer) seconds to run");
        return;
    }
    // The CSS opacity property only works from 1 to 0
    if (pStartOpac < 0) {
        pStartOpace = 0;
    }
    if (pStartOpac > 1) {
        pStartOpac = 1;
    }
    if (pEndOpac < 0) {
        pEndOpac = 0;
    }
    if (pEndOpac > 1) {
        pEndOpac = 1;
    }

    // Stop the fps from going over 60 or under 1 (The eye will barely notice
    // improvements above 60fps and fractional fps are not supported)
    if (fps > 60) {
        fps = 60;
    }
    if (fps < 1) {
        fps = 1;
    }

    var totalFrames = (fps * sec);
    var opacityChangePerSecond = (Math.abs(pStartOpac - pEndOpac) / sec);
    var opacityChangePerFrame = (opacityChangePerSecond / fps);
    var timeOutInterval = 1000 * (1 / fps);

    // console.log("totalFrames: "+totalFrames);
    // console.log("Opacity change per second: " + opacityChangePerSecond);
    // console.log("Opacity change per frame: " + opacityChangePerFrame);
    // console.log("Time out interval: " + timeOutInterval + " milliseconds");

    var opacity = pStartOpac;
    var timeoutVar;
    var elemId = document.getElementById(pElem);
    elemId.style.opacity = opacity;

    if (pStartOpac < pEndOpac) {
        fadeIn();
        return;
    } else {
        fadeOut();
        return;
    }

    function fadeIn() {
        opacity = opacity + opacityChangePerFrame;
        if (opacity > pEndOpac) {
            clearTimeout(timeoutVar);
            return;
        }
        elemId.style.opacity = opacity;
        timeoutVar = setTimeout(fadeIn, timeOutInterval);
        return;
    }

    function fadeOut() {
        if (opacity < pEndOpac) {
            clearTimeout(timeoutVar);
            return;
        }
        opacity = opacity - opacityChangePerFrame;
        if (opacity < 0) {
            opacity = 0;
        }
        elemId.style.opacity = opacity;
        timeoutVar = setTimeout(fadeOut, timeOutInterval);
        return;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:33:26.483

得到了问题：当不透明度得到 <0 你将它设置为 0，然后做：`if (opacity < pEndOpac)`。pEndOpac 为 0，因此 0<0 的计算结果为 false，并且永远不会清除超时。解决方案是`if (opacity <= pEndOpac)`：

```
function fadeIn() {
    opacity = opacity + opacityChangePerFrame;
    if (opacity >= pEndOpac) {
        clearTimeout(timeoutVar);
        return;
    }
    elemId.style.opacity = opacity;
    timeoutVar = setTimeout(fadeIn, timeOutInterval);
    return;
}

function fadeOut() {
    if (opacity <= pEndOpac) {
        clearTimeout(timeoutVar);
        return;
    }
    opacity = opacity - opacityChangePerFrame;
    if (opacity < 0) {
        opacity = 0;
    }
    elemId.style.opacity = opacity;
    timeoutVar = setTimeout(fadeOut, timeOutInterval);
    return;
} 
```

# jquery - 在 jquery 中何时使用绑定以及何时使用委托

> ID：12244173
> 
> 赞同：0
> 
> 时间：2012-09-03T08:13:31.033
> 
> 标签：jquery

我有兴趣知道何时应使用绑定函数以及何时应在 jquery 中使用委托函数。他们不执行相同的功能吗？有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:16:01.923

当您有一些想要将事件侦听器绑定到的*现有*元素时，您可以使用`bind`（或者更好的是`on`，已弃用；@Yoshi 指出）。当您要处理的元素尚不存在时使用（例如，它们是动态生成的，并且您不想将处理程序绑定到您创建的每个新元素，但它们有一个可以放置委托的共同父级），或者当您在具有共同父级的许多元素上处理事件时（在父级上使用委托比在每个元素上使用单独的处理程序更有效）。`bind`*`delegate`*

 *DOM 事件在 DOM 层次结构中向上*冒泡*，因此当您单击元素时`onclick`，触发该元素的处理程序，然后触发其父级的处理程序，然后是其父级，依此类推（除非处理程序调用`stopPropagation`事件，这会取消进一步冒泡. 当你使用`bind`/`on`时，你将你的处理程序附加到你想要处理的特定元素上，它会直接由你设置的目标触发；当你使用`delegate`, 一个 jQuery 内部处理程序附加到您指定的元素，它会在气泡链上捕获事件；jQuery 然后检查实际目标（它是处理程序附加到的元素的子元素）是否与您使用委托指定的选择器匹配，如果是，它是否被调用（它被调用就好像您的实际处理程序已附加到目标元素而不是父元素；@shannon 指出）。*

# c# - 退出门户后离开所有站点？

> ID：12244177
> 
> 赞同：0
> 
> 时间：2012-09-03T08:13:54.690
> 
> 标签：c#, asp.net, security, session, portal

我有以下问题：

我有一个 Web 应用程序，例如许多站点的门户。

当我单击门户上的网站链接然后单击`Exit`离开门户时，该站点的窗口仍然存在，这根本不安全，因为用户可能在退出门户后忘记关闭浏览器。

**笔记：**

*   门户位于特定服务器中。
*   网站位于不同的服务器中。

* * *

有什么方法可以让我在点击门户上的退出按钮后离开所有页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:32:22.567

> 如果您打开的页面定期与服务器通信以查看用户是否仍然登录，则可以实现这一点。 – Vikdor 1 分钟前编辑
> 
> 那么如何做这样的事情。你能给我更多的细节吗？– just_name 12 秒前

您可以在服务器端创建一个 API，该 API 接收用户名，如果用户的会话由于在打开所有这些窗口的父窗口中按下“注销”而未关闭，则返回 true。每个子窗口会定期 ( `window.setInterval()`) 使用已登录的用户名向此 API 发送请求，以检查用户是否仍处于登录状态。当 API 返回 false 时，您将在客户端调用 logout 方法，该方法将注销用户并显示登录表单或提供返回父页面重新开始的选项。

# java - 在运行时更改测试类的名称

> ID：12244180
> 
> 赞同：1
> 
> 时间：2012-09-03T08:14:04.090
> 
> 标签：java, junit4

无论如何我可以在运行时重命名测试类吗？

[背景故事：我有一堆文件被转换为测试，并且可能会被参数化，但是所有文件都使用相同的测试逻辑，我不会为每个文件创建新类只是为了获得该名称]

我正在使用最新的 Junit 4.11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:03:27.977

JUnit 引入了参数化测试的命名。此功能的原始错误请求在这里：[https](https://github.com/KentBeck/junit/issues/44) ://github.com/KentBeck/junit/issues/44 。从一些谷歌搜索来看，我相信这存在于 JUnit 4.11 中（但我不是 100% 确定）。

如果您的文件只是输入到许多参数化测试中的测试数据，我可以看到很容易将名称属性添加到组合中以提供您想要的功能。

# jquery - jQuery数组索引完成后重置为0，如何保留最后一个值？

> ID：12244183
> 
> 赞同：0
> 
> 时间：2012-09-03T08:14:19.730
> 
> 标签：jquery, arrays, function, each

我有几个 div 和一个数组。我使用函数将每个 div (id) 插入到 aray 中。如果我将该函数应用于新的 div，则数组将从索引值 0 开始，而不是保留最后一个索引值。

这是一个小提琴：http: [//jsfiddle.net/nQWfG/](http://jsfiddle.net/nQWfG/)

```
assign('.firstround'); 
```

分配索引值 0、1、2。

```
assign('.secondround'); 
```

再次分配 0、1、2 的索引值，我希望它们为 3、4、5。

**编辑**

我这样做两次的原因是因为 $('.secondround') div 稍后将通过 ajax 加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:17:54.830

最简单的方法：

```
assign('.firstround, .secondround'); 
```

**编辑**

您也可以添加使用[`Array.push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

```
myArray.push($('#' + index)); 
```

代替

```
myArray[index] = $('#' + index); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:20:33.543

只需定义一个全局索引：http: [//jsfiddle.net/nQWfG/2/](http://jsfiddle.net/nQWfG/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:17:28.370

我认为你需要在函数之外有一个 var 来跟踪它，并增加它而不是使用每个函数的索引。这是“每个”的工作方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:23:44.963

这条线是问题所在：

```
myArray[index] = $('#' + index); 
```

`index`是选择器匹配的元素集合中元素的索引。

通过函数运行第一个选择器后，`myArray`包含索引为 0、1 和 2 的 3 个元素。下一次，您只需将三个*新*元素重新分配给相同的索引，因为选择器仅更改匹配的元素，而不是它们的相对索引.

我不完全确定您要做什么，但我会使用`myArray.push()`with`.index()`来做我认为您正在尝试做的事情：

**演示：http: [//jsfiddle.net/nQWfG/4/](http://jsfiddle.net/nQWfG/4/)**

* * *

更好的方法是使用 jQuery 对象：

```
var $elements = $('.firstround, .secondround').each(function(index) {
    $(this).text(index);
});

$elements.eq(1).css('background', 'red');
$elements.eq(4).css('background', 'green');​ 
```

**演示：http: [//jsfiddle.net/nQWfG/6/](http://jsfiddle.net/nQWfG/6/)**

# c# - ASP.NET MVC3 控制器方法路由变量参数

> ID：12244187
> 
> 赞同：0
> 
> 时间：2012-09-03T08:14:34.653
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

有没有办法将一组可变参数路由到 MVC3 控制器。

我正在尝试获取一些与类似 url 匹配的内容

```
/myaction/foo
or 
/myaction/foo/bar/widget/.../foo1/foo2/ - i.e. of unknown length. 
```

目前我正在假装它

```
public ActionResult myaction(string f1, string f2, string f3, string f4) 
{ 
} 
```

和一条路线

```
 routes.MapRoute("brittleroute",
            "myaction/{f1}/{f2}/{f3}/{f4}",
            new { controller = "mycontroller", action = "myaction", f1 = UrlParameter.Optional, f2=UrlParameter.Optional, f3=UrlParameter.Optional, f4=UrlParameter.Optional }
            ); 
```

但这太脆弱了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:20:59.043

经过挖掘和一些离线帮助......

```
public ActionResult myaction(string allsegments)
{
    var urlsegments = allsegments.split('/');
    //...
}

routes.MapRoute("betterroute",
        "myaction/{*allsegments}",
        new { controller = "mycontroller", action = "myaction"}
        ); 
```

# c# - 如何在 Visual Studio 2008 中为 C#.net 窗口应用程序使用自定义字体？

> ID：12244190
> 
> 赞同：2
> 
> 时间：2012-09-03T08:15:00.050
> 
> 标签：c#, winforms, fonts

我想在 Windows 应用程序中使用印度字体（印地语）。当我将 Mangal 字体用于印地语文本时，文本可见但以块格式显示。

所以任何人都可以帮助我。

![在此处输入图像描述](../Images/db99de48c74ca238300c74c121d9a326.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:20:11.707

创建新的 windows 窗体项目并在 Form.OnLoad 处理程序中，添加以下行：

```
PrivateFontCollection pfc = new PrivateFontCollection();
string fontFilePath = "C:\\Fonts\\PALETX3.ttf"
pfc.AddFontFile(fontFilePath);
label1.Font = new Font(pfc.Families[0], 16, FontStyle.Regular); 
```

[您可以从http://msdn.microsoft.com/en-us/library/ms533820(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms533820(VS.85).aspx)找到更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:31:01.987

您可以使用以下代码：

```
YourMainForm.YourTextBox.Font = new Font("Your name of indian font", 
                                         YourMainForm.YourTextBox.Font.Size); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:20:55.813

确保您使用的字体支持控件中的 Unicode 字符。您可以使用 windows 实用程序*Character Map*找到它。

一些较旧的字体具有特定代码页的字符，但没有 Unicode 字符。例如 windows 字体*Marlett*只定义了几个 Unicode 字符，其余的将显示为屏幕截图中的框。如果是这种情况，最好的办法是找到更新的 Unicode 版本的字体。虽然理论上你可以使用字体编辑软件自己创建一个新版本（字形已经在那里），但这并不容易。祝你好运:)

# c# - 如何使用 linq 展平对象属性

> ID：12244191
> 
> 赞同：0
> 
> 时间：2012-09-03T08:15:04.077
> 
> 标签：c#, linq

在我们的本地化数据库中，我们有以下对象：

```
public class Text
{
  public string Key { get; set; }
  public string LanguageId { get; set; }
  public string Value { get; set; }
} 
```

我需要一个 Linq 语句将这些记录展平为一个结构，该结构具有 LanguageIds 作为属性，其值如下：

```
public class ...
{
  public string Key { get; set; }
  public string En { get; set; }
  public string Ge { get; set; }
  public string Fr { get; set; }
  ...
} 
```

当然，这可以通过一些精心设计的“for each”来实现，但必须有一个巧妙的 Linq 语句一次性完成。那里有链接大师吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:52:28.810

我偶然发现了这一点，只是想为这个问题添加我的解决方案。我冒昧地围绕表达式生成了一个可运行的小示例：

```
public class LocalizationManager
{
    public IDictionary<string, Localization> LostInTranslation()
    {
        var input = new[]
                        {
                            new Text {Key = "ORDINAL_1", LanguageId = "En", Value = "first"},
                            new Text {Key = "ORDINAL_1", LanguageId = "Fr", Value = "premier"},
                            new Text {Key = "ORDINAL_1", LanguageId = "De", Value = "erste"},
                            new Text {Key = "ORDINAL_2", LanguageId = "En", Value = "second"},
                            new Text {Key = "ORDINAL_2", LanguageId = "Fr", Value = "deuxième"},
                            new Text {Key = "ORDINAL_2", LanguageId = "De", Value = "zweite"},
                            new Text {Key = "ORDINAL_3", LanguageId = "En", Value = "third"},
                            new Text {Key = "ORDINAL_3", LanguageId = "Fr", Value = "troisième"},
                            new Text {Key = "ORDINAL_3", LanguageId = "De", Value = "dritte"},
                        };

        var output =
            input.GroupBy(text => text.Key).Select(
                group =>
                group.Aggregate(new Localization { Key = group.Key },
                                (translation, text) =>
                                    {
                                        translation.GetType().GetProperty(text.LanguageId).SetValue(translation, text.Value, null);
                                        return translation;
                                    }));

        return output.ToDictionary(key => key.Key);
    }
}

public class Text
{
    public string Key { get; set; }
    public string LanguageId { get; set; }
    public string Value { get; set; }
}

public class Localization
{
    public string Key { get; set; }
    public string En { get; set; }
    public string De { get; set; }
    public string Fr { get; set; }
} 
```

虽然这似乎是对 Aggregate() 的轻微歪曲，但我认为它的精神是真实的。请注意，所有语言都必须作为“本地化”对象的属性存在，否则您将收到 NullReferenceException，因为 GetProperty() 返回 null。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T08:28:59.367

尝试以下操作：

```
var flattenTexts = texts
    .GroupBy(x => x.Key)
    .Select(x => new { Key = x.Key, 
                       De = x.First(y => y.LanguageId == "De").Value, 
                       En = x.First(y => y.LanguageId == "En").Value 
                     }); 
```

你当然需要知道你有哪些语言......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:20:49.110

If I understood what you mean you can create the second Object out of the 1st one and integrate this in your Linq statement for example:

```
 var result = TextObjectList.Select(x => new LanguageObject(x)) 
```

And in the LanguageObject Constructor set the values up to the LanguageId.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:21:09.613

您可以执行以下操作：

```
typeof(MyClass).GetProperties().AsEnumerable().Select(x => new () {Key = x.Name, En = "English", Ge = "German (shouldn't it be De?)" ... } 
```

# jsp-tags - 当未指定默认命名空间时，函数 getContextPath 必须与前缀一起使用

> ID：12244194
> 
> 赞同：0
> 
> 时间：2012-09-03T08:15:12.907
> 
> 标签：jsp-tags

我在用

```
 "<c:out value="${request.getContextPath()}"/>" 
```

当我在 tomcat 服务器中运行这个 jsp 时，我得到的错误是

> 当未指定默认命名空间时，函数 getContextPath 必须与前缀一起使用

任何人都可以帮助解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:36:56.307

我找到了解决方案..

使用

```
 "<c:out value="${pageContext.request.contextPath}"/>" 
```

解决了错误。

# ruby-on-rails - 如何设置保存 CSV 文件的路径？

> ID：12244205
> 
> 赞同：0
> 
> 时间：2012-09-03T08:16:08.653
> 
> 标签：ruby-on-rails, csv, after-save

我正在使用 after_save_filer 将记录保存到 CSV 中。我没有收到任何错误，也找不到文件，生成了什么（如果存在）。

这是我正在使用的代码：

```
 after_save :to_csv

 def to_csv(options = {})
  require 'csv'
  CSV.open("C:/project/myfile.csv", "w") do |csv|
  csv << self.class.column_names
  csv << self.attributes.values_at(*column_names)
  end
 end 
```

运行保存过滤器后如何检查？我如何设置路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:43:22.180

要检查 after_save 是否已运行，您可以`debugger`在 to_csv 方法中放置一条语句，看看它是否在您保存模型时停止，或者您可以简单地将 a`puts "I am in to_csv method`放入方法中并在控制台中查找它。

# c# - 拆分长 linq 查询以提高可维护性

> ID：12244208
> 
> 赞同：1
> 
> 时间：2012-09-03T08:16:16.390
> 
> 标签：c#, linq, refactoring

我有一堆这些任务都基于 LINQ 查询。我正在寻找重构它们并使它们更易于阅读并允许我根据语言/地区等更改查询的好方法。

```
var mailTaskOne = CreateTask(() => myService.Mail.Where(p => p.ProjectName == "Delta"
    && (p.MailLang== (int)MailLanguage.EU || p.MailLang == (int)MailLanguage.RU)
    && (p.DateEntered >= startDate && p.DateEntered <= endDate)
    && p.MailPriority == (int)MailPriority.High).Count()); 
```

我认为方便的一种方法是将查询拆分为类似的内容。

```
var results = myService.Mail.Where(x => x.ProjectName == "Delta");
results = results.Where(p => p.MailLang== (int)MailLanguage.EU);
results = results.Where(p => p.DateModified >= startDate && p.DateModified <= endDate); 
```

这将允许我这样做，而不必为每个区域重复整个查询。

```
if (MailLanguage == "English")
    results = results.Where(p => p.MailLang== (int)MailLanguage.EU);
else
    results = results.Where(p => p.MailLang== (int)MailLanguage.RU); 
```

有没有人知道更好的解决方案？我最终拥有了巨大的功能，因为我需要根据要求执行大约 20 个这样的查询；例如地区、项目名称等。

* * *

**编辑：**

由于某些限制，我不知道后端（Web 服务/api）我不能使用这个问题中提到的一些很棒的答案。

例如，这没有得到正确翻译，但绝不是因为答案不正确，根本无法与我正在使用的 API 一起工作——可能是因为它实现得很差。

```
public bool IsValid(Type x)
{
    return (x.a == b) && (x.c ==d) && (x.d == e);
} 
```

无论如何，任何寻找类似解决方案的人都是有效的答案，但最后我最终选择了与提供的解决方案类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:19:43.810

我会按照您的建议将查询拆分到不同的行，这意味着您可以在每行添加注释来描述它在做什么。您仍然只访问数据库 1 次，因此您不会在性能方面损失任何东西，而是获得更好的可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:28:00.787

为什么不简单地有一个方法呢？

```
public static IQueryable<Mail> Count(this IQueryable<Mail> mails, 
                  string projectName, 
                  MailLanguage mailLanguage,
                  DateTime startDate,
                  DateTime endDate) {
    return mails.Count(p=>
           p.ProjectName == projectName
           && p.MailLang == mailLanguage
           && p.DateEntered >= startDate 
           && p.DateEntered <= endDate
           && p.MailPriority == (int)MailPriority.High);
} 
```

那么你可以像这样简单地使用它

```
CreateTask(() => myService.Mail.Count("Delta",MailLanguage.EU,startDate,endDate)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T08:37:36.290

您可以将项目名称、修改的数据、邮件语言和任何其他标准转换为变量，并根据任何条件赋予它们您想要的值。然后您的查询将使用变量而不是文字值。

```
var projectName="Delta";
var mailLanguage=(int)MailLanguage.RU;

var results=myService.Mail.Where(x => x.ProjectName == projectName)
            && (p.MailLang== mailLanguage); 
```

这样，您可以将大部分复杂性放在为变量提供值的过程中，并且 linq 查询将更易于阅读和维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T08:27:31.067

考虑将复杂的比较移动到一个函数中。例如，而不是

```
Results.Where(x => (x.a == b) && (x.c == d) && (x.d == e)) 
```

考虑

```
Results.Where(x => IsValid(x))

...

public bool IsValid(Type x)
{
    return (x.a == b) && (x.c ==d) && (x.d == e);
} 
```

代码变得更具可读性，并且 IsValid 易于使用自动化测试框架进行测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T09:08:37.333

您可以创建一个参数类，如：

```
public class MailParameters
{
    public DateTime EndTime { get; private set; }
    public IEnumerable<int> Languages { get; private set; }
    public int Priority { get; private set; }
    public string ProjectName { get; private set; }
    public DateTime StartTime { get; private set; }

    public MailParameters(string projectName, DateTime startTime, DateTime endTime, MailLang language, Priority priority)
        : this(projectName, startTime, endTime, new[] { language }, priority)

    public MailParameters(string projectName, DateTime startTime, DateTime endTime, IEnumerable<MailLang> languages, Priority priority)
    {
        ProjectName = projectName;
        StartTime = startTime;
        EndTime = endTime;
        Languages = languages.Cast<int>();
        Priority = (int)priority;
    }
} 
```

然后添加这些扩展方法：

```
public static int Count(this IQueryable<Mail> mails, MailCountParameter p)
{
    return mails.Count(m =>
        m.ProjectName == p.ProjectName &&
        p.Languages.Contains(m.MailLang) &&
        m.EnteredBetween(p.StartTime, p.EndTime) &&
        m.Priority == p.Priority);
}

public static bool EnteredBetween(this Mail mail, DateTime startTime, DateTime endTime)
{
    return mail.DateEntered >= startTime && mail.DateEntered <= endTime;
} 
```

用法将是：

```
var mailParametersOne = new MailParameters("Delta", startDate, endDate, new[] { MailLang.EU, MailLang.RU }, MailPriority.High);
var mailTaskOne = CreateTask(() => myService.Mail.Count(mailParametersOne)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T10:39:15.430

我的最终解决方案基于 ScottGu 的一篇文章。 [http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

我像这样构建 LINQ 查询。

```
 var linqStatements = new List<String>();

    linqStatements.Add(parser.StringToLinqQuery<Project>("ProjectId", report.Project));
    linqStatements.Add(parser.StringToLinqQuery<Region>("RegionId", report.Region));
    linqStatements.Add(parser.StringToLinqQuery<Status>("Status", report.Status));
    linqStatements.Add(parser.StringToLinqQuery<Priority>("Priority", report.Priority));
    linqStatements.Add(parser.StringToLinqQuery<Category>("CategoryId", report.Category));
    linqStatements.Add(AccountIdsToLinqQuery(report.PrimaryAssignment));

    string baseQuery = String.Join(" AND ", linqStatements.Where(s => !String.IsNullOrWhiteSpace(s)));
    var linqQuery = service.Mail.Where(baseQuery).Cast<Mail>(); 
```

看起来像这样`StringToLinqQuery`（简化版）。

```
public string StringToLinqQuery<TEnum>(string field, string value) where TEnum : struct
{
    if (String.IsNullOrWhiteSpace(value))
        return String.Empty;

    var valueArray = value.Split('|');
    var query = new StringBuilder();

    for (int i = 0; i < valueArray.Count(); i++)
    {
        TEnum result;
        if (Enum.TryParse<TEnum>(valueArray[i].ToLower(), true, out result))
        {
            if (i > 0)
                query.Append(" OR ");
            query.AppendFormat("{0} == {1}", field, Convert.ToInt32(result));
        }
        else
        {
            throw new DynoException("Item '" + valueArray[i] + "' not found. (" + type of (TEnum) + ")",
                                    query.ToString());
        }
    }

    // Wrap field == value with parentheses ()
    query.Insert(0, "(");
    query.Insert(query.Length, ")");

    return query.ToString();
} 
```

最终结果看起来像这样。

```
service.Mail.Where("(ProjectId == 5) AND (RegionId == 6 OR RegionId == 7) AND (Status == 5) and (Priority == 5)") 
```

在我的项目中，我将值存储在 XML 文件中，然后将它们输入到上述 LINQ 查询中。如果一个字段为空，它将被忽略。它还支持使用`|`符号的多个值，例如`EU|US`将转换为`(Region == 5 OR Region == 6)`.

# xpages - 如何更改从 XPages 导出文件的字符编码？

> ID：12244212
> 
> 赞同：2
> 
> 时间：2012-09-03T08:16:27.163
> 
> 标签：xpages, xpages-ssjs

我想从 XPages 导出 csv 文件，并且想设置字符编码“shift-jis”，而不是“utf-8”。（因为 MS Excel 将 csv 文件编码视为操作系统默认值。在日语操作系统的情况下，它是 Shift-日标。）

我的代码如下。

```
var exCon:com.ibm.xsp.domino.context.DominoExternalContext = facesContext.getExternalContext();
var writer:com.sun.faces.renderkit.html_basic.HtmlResponseWriter = facesContext.getResponseWriter();
var response:com.ibm.xsp.webapp.XspHttpServletResponse = exCon.getResponse();
response.setContentType("Content-type:application/octet-stream; charset=Shift_JIS");
response.setHeader("Cache-Control", "no-cache");
writer.write("あいうえお");
writer.write("かきくけこ"); 
```

HtmlResponseWriter 对象具有 getCharacterEncoding() 方法。但它没有“setCharacterEncoding()”方法。有没有办法改变字符编码？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:24:58.343

您需要在 servlet 响应上设置字符编码。

在你的情况下：

```
response.setCharacterEncoding("shift-jis"); 
```

# linux - 如何对 Linux 中的所有子目录强制 CURRENT 目录权限？

> ID：12244214
> 
> 赞同：5
> 
> 时间：2012-09-03T08:17:17.123
> 
> 标签：linux, shell, permissions

我经常发现自己以root身份登录shell（我已经被告知这是一种不好的做法）并将新文件复制到apache服务的某个目录中。

由于我以 root 身份登录，因此新文件将 root 设置为所有者，并且权限与已经存在的文件不同，我需要更改 Apache 的权限才能访问这些文件。我是手动做的。

我正在研究一种更好的方法。我想知道是否有一种方法可以通过单个命令以某种方式将当前文件夹的权限应用于它的所有子文件夹和文件。

Windows 有这样一个功能，您可以在其中“将所有文件和文件夹权限”重置为父文件夹的权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T08:47:34.020

要获取当前目录的权限，您可以使用

```
stat -c %a . 
```

要递归设置权限，请使用

```
chomd -R 
```

放在一起，它给

```
chmod -R `stat -c %a .` . 
```

或者，您可以使用是否支持的`--reference`选项。`chmod`

```
chmod -R --reference=. . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-05T06:39:56.087

+1'd @choroba's answer但是......你确定那是你想要做的吗？

*来自[http://en.wikipedia.org/wiki/File_system_permissions](http://en.wikipedia.org/wiki/File_system_permissions) ...*

> **权限**
> 类 Unix 系统实现了适用于每个类的三个特定权限：
> 
> *   读取权限授予读取文件的能力。***当为目录设置时，此权限授予读取目录中文件名的能力，但不能查找有关它们的任何进一步信息，例如内容、文件类型、大小、所有权、权限。***
> *   写权限授予修改文件的能力。***当为目录设置时，此权限授予修改目录中条目的能力。这包括创建文件、删除文件和重命名文件。***
> *   执行权限授予执行文件的能力。必须为可执行程序（包括 shell 脚本）设置此权限，以允许操作系统运行它们。***为目录设置时，如果名称已知，则此权限授予访问文件内容和元信息的能力，但不列出目录内的文件，除非还设置了 read。***
> 
> 对目录而不是文件设置权限的效果是“最常被误解的文件权限问题之一”。
> 
> 当没有设置权限时，相应的权限将被拒绝。与基于 ACL 的系统不同，类 Unix 系统上的权限不会被继承。在目录中创建的文件不一定具有与该目录相同的权限。
> 
> ***（重点补充）***

# windbg - Breakpoint not working for SOSEX using !mbp

> ID：12244220
> 
> 赞同：1
> 
> 时间：2012-09-03T08:17:29.790
> 
> 标签：windbg, sos, sosex

I'm trying to debug a C# application using [SOSEX](http://www.stevestechspot.com/SOSEXV40NowAvailable.aspx) in WinDbg for 32 bit environment in .NET Framework 4.0\. I use sosex.dll for 32 bit v4.0.

Here are the steps:

1.  `sxe ld:mscorlib`
2.  `sxe ld:clrjit`
3.  `load` *Path to sosex.dll*
4.  `!mbp application.cs 34` (this sets breakpoint at line 34)

It works fine here.

However, when I start WinDbg fresh and attach to the C# `application.exe` process and do the necessary steps, the breakpoint doesn't work.

One thing I have observed is that the first time I ran the `lm` command in WinDbg, the output showed only `application.exe`.

But the next time, the `lm` command showed all the modules already loaded (`clrjit`, `mscorlib`, etc.)

Is this why the breakpoint isn't working?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:37:12.263

对于 SOSEX，上述步骤 1 和 2 是不必要的。如果从调试器启动应用程序，则可以使用`!mbm`和`!mbp`从初始断点开始。

至于您的问题，位于`application.cs`第 34 行的是什么？这是入口点（主要）吗？听起来您在代码已经运行后试图中断。请附上您尝试中断时产生的所有调试器。这将有助于查明问题的原因。

# visual-c++ - 配置 Visual C++ 2010 项目以使用包含文件夹，就像在 Linux 中一样

> ID：12244221
> 
> 赞同：1
> 
> 时间：2012-09-03T08:17:29.963
> 
> 标签：visual-c++

我在 Visual Studio 2010 中移植了一个 Linux C 项目。我在 linux 下有以下文件夹项目结构：

ProjectName->Src->Source C files ProjectName->Header->Source H files与C相关

我应该如何配置 Visual Studio 2010 以重新创建相同的结构而不会出现编译错误？如何创建包含文件夹并告诉编译器这是一个包含文件夹。我什至不能在一个简单的文件夹中添加包含文件（现有元素）。当我添加它时，它们根本不会出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:21:25.130

在 C/C++ 配置选项卡上是 Additional Include Directories 选项。将其设置为以下内容：

$(ProjectDir)/标头

那应该这样做。不要忘记为您的所有配置（调试、发布等）执行此操作。

哦，关于添加新头文件，当您打开 Add.. 选项以添加新文件时，请密切注意对话框的底部。它会告诉你它将被放置在哪里，你可以在那里改变它。

# c# - how to check if Directory.EnumerateFiles does not produce any results

> ID：12244224
> 
> 赞同：0
> 
> 时间：2012-09-03T08:17:53.777
> 
> 标签：c#

I have a function that checks for presence of files in a particular folder and if the files have the data that is not present in the main database i write that data to main db and delete the file i am using Directory.EnumerateFiles to get the list of files and then i iterate through this list to check if they are present in the db, i want to return from the function if the list is empty how to check if list that i got is empty,if i debug and the folder has no files it shows Enumeration did not produce the results.

```
 private void GetListOfFiles()
    {
        string sourceDirectory = pathOfXmlFiles;
        if (!Directory.Exists(sourceDirectory))
        {
            return;
        }
        var xmlFiles = Directory.EnumerateFiles(sourceDirectory, "*.xml");
        foreach (var item in xmlFiles)
        {
            ReadXmlFile(item);
        }
        foreach (var item in xmlFiles)
        {
            if (_writtenToDb)
            {
                File.Delete(item);
            }
        }
    } 
```

i check for the presence of these files using a different thread that has a timer that fires every 25 seconds , i never do stop the timer can this lead to memory leaks?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:20:24.233

You don't need to do anything. If `xmlFiles` is empty both `foreach` loops won't do anything since there are no objects to iterate over.

However, if you really need to explicitly return if there are no files, use this:

```
if(!xmlFiles.Any())
    return; 
```

Dont forget to add `using System.Linq;` at the top of your source file.

* * *

As you are enumerating multiple times over the returned files, I suggest you use [`Directory.GetFiles`](http://msdn.microsoft.com/en-us/library/wz42302f.aspx) instead. This will return an array with all files. This will avoid multiple hits to the disk for querying the existing files.

# java - Tool or schema that describes Adobe Premiere Pro

> ID：12244229
> 
> 赞同：2
> 
> 时间：2012-09-03T08:18:11.257
> 
> 标签：java, adobe, adobe-premiere

I have some data outside that i would like to use to create certain edit effects in Adobe Premiere Pro. Rather than editing by hand adding keyframes over time with my data i would like to automate this and write or use a tool to create an XML fragment and update the project file.

I have looked at the XML and some properties are evident. However most data is hidden away as comma separated values, which of course means theres no self documenting tag name. I am therefore after a schema or documentation that describes the format of some or all effects.

```
<VideoComponentParam ObjectID="48" ClassID="fe47129e-6c94-4fc0-95d5-c056a517aaf3" Version="8">
        <Node Version="1">
            <Properties Version="1">
                <ECP.Angle.Expanded>false</ECP.Angle.Expanded>
                <ECW.Parameter.VelocityHeight>54</ECW.Parameter.VelocityHeight>
            </Properties>
        </Node>
        <RangeLocked>false</RangeLocked>
        <ParameterID>5</ParameterID>
        <CurrentValue>0.</CurrentValue>
        <UnitsString></UnitsString>
        <UpperBound>32767.</UpperBound>
        <LowerBound>-32768.</LowerBound>
        <Keyframes>913287043468800,270.,0,0,0,0.166667,-32.4615,0.166667;914685944772533,91.230003356934,0,0,-32.4615,0.166667,14.5418,0.166667;916236575654400,180.,0,0,14.5418,0.166667,-11.4292,0.166667;920237090572800,0.,0,0,-11.4292,0.166667,0,0.166667;</Keyframes>
        <StartKeyframe>-91445760000000000,0.,0,0,0,0,0,0</StartKeyframe>
        <ParameterControlType>3</ParameterControlType>
        <DiscontinuousInterpolate>false</DiscontinuousInterpolate>
        <IsLocked>false</IsLocked>
        <IsTimeVarying>true</IsTimeVarying>
        <Name>Rotation</Name>
    </VideoComponentParam> 
```

The interesting tag is of course the Keyframes, which appears to include the keyframe, rotation degrees and some other numbers. I havent yet decyphered the first value which is obviously the timestamp.

Any help in undetrstnding the XML is appreciated.

ADOBE FORUMS

> [http://forums.adobe.com/thread/962485](http://forums.adobe.com/thread/962485)
> 
> 1.  Todd_Kopriva, 14-Feb-2012 00:18 in reply to br4ime Report No, there is not any public documentation about the structure of the Premiere Pro project file format. Was this helpful? Yes No

FINAL CUT PRO XML I have exported a simple project to Final Cut Pro XML and it appears to be functional but in the above case about rotation over several keyframes, the FCP file has far fewer values.

```
<parameter authoringApp="PremierePro">
                                                <parameterid>rotation</parameterid>
                                                <name>Rotation</name>
                                                <valuemin>-8640</valuemin>
                                                <valuemax>8640</valuemax>
                                                <value>0</value>
                                                <keyframe>
                                                    <when>107634</when>
                                                    <value>123</value>
                                                </keyframe>
                                                <keyframe>
                                                    <when>107784</when>
                                                    <value>124</value>
                                                </keyframe>
                                                <keyframe>
                                                    <when>107934</when>
                                                    <value>126</value>
                                                </keyframe>
                                            </parameter> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-08T06:12:01.087

Here is full description of Final Cut XML format. it is same as Premiere XML. Go to developer.apple.com and find the document that describes FinalCutPro XML format, it's exact the same as Premiere pro XML. The structure is simple, for example this is sequence block format:

```
<?xml version="1.0" encoding="UTF-8"?>
<xmeml version="3"> 
  <sequence>
    <name>Sequence 1</name>
    <duration></duration>
    <rate>. . .</rate>
    <timecode>. . .</timecode>
    <media>
      <video>
        <format></format>
        <track></track>
      </video>
      <audio>
        <format></format>
        <outputs></outputs>
        <track></track>
        <track></track>
      </audio>
    </media>
  </sequence>
</xmeml> 
```

direct link is: [https://developer.apple.com/appleapplications/download/FinalCutPro_XML.pdf](https://developer.apple.com/appleapplications/download/FinalCutPro_XML.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:52:34.687

最好的解决方案是使用您最喜欢的差异工具进行更改并研究文件差异。理解小片段和手动编辑 XML 并不难。进行更改并重新加载项目文件并观察更改自然会很痛苦，但它是可行的。

# jquery - Calling Advanced Custom Fields with AJAX/jQuery

> ID：12244231
> 
> 赞同：2
> 
> 时间：2012-09-03T08:18:24.423
> 
> 标签：jquery, ajax, wordpress, custom-fields

I am having a issue with ACF and AJAX: the custom fields aren't getting called into the AJAX portfolio when it loads.

I am relatively new to AJAX & PHP and not sure how to fix this.

```
add_action( "wp_ajax_eq_get_ajax_project", "eq_get_ajax_project" );
add_action( "wp_ajax_nopriv_eq_get_ajax_project", "eq_get_ajax_project" );

function eq_get_ajax_project() {

if ( !wp_verify_nonce( $_REQUEST['nonce'], "portfolio_item_nonce" ) ) {
    exit("No naughty business please");
}     

$grid_classes = 'grid_9 alpha';
$quality = 90;
$desired_width = 700;
$desired_height = 500;
$current_post_id = $_REQUEST['post_id'];
$video_embed_code = get_post_meta( $_REQUEST['post_id'], 'portfolio-video-embed', true );
$portfolio_images = eq_get_the_portfolio_images( $_REQUEST['post_id'] );
$terms = get_the_terms( $_REQUEST['post_id'] , 'portfolio_categories', 'string' );
$content_post = get_post( $_REQUEST['post_id'] );
$content = $content_post->post_content;
$content = apply_filters('the_content', $content);
$content = str_replace(']]>', ']]>', $content);
$post = get_post( $current_post_id ); 
$client = get_post_meta( $current_post_id, 'oy-client', true );
$project_url = get_post_meta( $current_post_id, 'oy-item-url', true );

ob_start();
?> 
```

This is my jQuery file:

```
jQuery(document).ready(function( $ ) {

/*-----------------------------------------------------------------------------------*/
/*  Ajax Call
/*-----------------------------------------------------------------------------------*/

current_post_id = '';
var $projectWrapper = $("#project-wrapper"); 

eQgetProjectViaAjax = function(e) {

var post_id = $( this ).attr( "data-post_id" );
current_post_id = post_id;
var nonce = $( this ).attr( "data-nonce" );
var $prev = $( '.project-link[data-post_id="' + post_id + '"]' ).parent().parent().prev('.portfolio-item');
var $next = $( '.project-link[data-post_id="' + post_id + '"]' ).parent().parent().next('.portfolio-item');
var prev_item_id = '';
var next_item_id = '';

// Get the id's of previous and next projects
if ( $prev.length !== 0 && $next.length !== 0 ) {
    prev_item_id = $prev.find('.project-link').attr( "data-post_id" );
    next_item_id = $next.find('.project-link').attr( "data-post_id" );
} else if ( $prev.length !== 0 ) {
    prev_item_id = $prev.find('.project-link').attr( "data-post_id" );
} else if ( $next.length !== 0 ) {
    next_item_id = $next.find('.project-link').attr( "data-post_id" );
}

$(".single-img-loader").css( 'opacity', 1 );    
eQcloseProject();

$.ajax({
    type : "post",
    context: this,
    dataType : "json",
    url : headJS.ajaxurl,
    data : {action: "eq_get_ajax_project", post_id : post_id, nonce: nonce, prev_post_id : prev_item_id, next_post_id : next_item_id},
    beforeSend: function() {
        // Activate the overlay over the current project
        $( '.project-link[data-post_id="' + post_id + '"]' ).next('.blocked-project-overlay').addClass('overlay-active');

        if( !$.browser.opera ) {
            $.scrollTo(0, 500, { easing: 'easeOutCubic' });
        } else {
            $.scrollTo(0, 300, { easing: 'easeOutCubic' });
        }
    },
    success: function(response) {
    $projectWrapper.html( response['html'] );
    $projectWrapper.find('#portfolio-item-meta, #single-item').css( 'opacity', 0 );

    $("#single-item .single-img").load(function () { 
        $(this).stop().animate({ opacity: 1 }, 300); 
        $(".single-img-loader").stop().animate({ opacity: 0 }, 300); 
    });
},
complete: function() {
    eQopenProject();
    $( ".prev-portfolio-post, .next-portfolio-post" ).click( eQgetProjectViaAjax );
    $( '.prev-portfolio-post, .next-portfolio-post' ).click( showLoaderImg );
    $( ".close-current-post" ).click( eQcloseProject );             
    $( '#overlay' ).fadeOut(500);
    $projectWrapper.find('#portfolio-item-meta, #single-item').stop().animate({ opacity: 1 }, 400);
}
}); 
```

I think I have to somehow register the ACF in the AJAX/jQuery but I cannot find a way to accomplish that, and I have been searching for hours.

```
<?php get_field('project_name'); ?> 
```

This is the field I need to call.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:28:48.137

假设您正在使用`/wp-load.php`处理 AJAX 调用（`headJS.ajaxurl`jQuery 文件中的值），所有插件（包括 ACF）都将被加载，并且您的 functions.php 中的任何自定义字段附加组件也将被加载。您发布的`get_field()`方法假定当前`$post->ID`来自循环中的页面，但您可以传入不同的帖子 ID 作为第二个参数来覆盖它，如果您愿意。在您的示例中，在您的 PHP 文件中，它应为：

```
$project_name = get_field('project_name', $current_post_id); 
```

您可以在此处阅读更多文档：http: [//www.advancedcustomfields.com/docs/functions/get_field/](http://www.advancedcustomfields.com/docs/functions/get_field/)

# meteor - 元标记不在前 1024 个字节中

> ID：12244233
> 
> 赞同：7
> 
> 时间：2012-09-03T08:18:27.217
> 
> 标签：meteor

警告：在有人将其标记为 this 的副本之前[，](https://stackoverflow.com/questions/11762371/influencing-the-encoding-for-pages-served-by-meteor)请理解它不是。接受的答案正是我正在做的，但我面临以下问题。

客户端文件夹中的 HTML 文件如下所示：

```
<head>
    <meta charset="utf-8"/>
    <title>blah-blah</title>
    --- 
```

我在萤火虫控制台中收到的消息是：

```
The character encoding declaration of the HTML document
was not found when prescanning the first 1024 bytes of 
the file. When viewed in a differently-configured browser, 
this page will reload automatically. The encoding
declaration needs to be moved to be within the first 
1024 bytes of the file. 
```

当我在 head 和 meta charset 元素之间查看源代码时，我会看到一大堆链接样式表和脚本标签。

如果我删除元字符集，我会在萤火虫控制台中得到这个：

```
The character encoding of the HTML document was not 
declared. The document will render with garbled text 
in some browser configurations if the document 
contains characters from outside the US-ASCII range. 
The character encoding of the page must to be declared 
in the document or in the transfer protocol. 
```

如何让元字符集标签出现在头部之后？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T10:59:09.300

我所做的是编辑`/usr/lib/meteor/app/lib/app.html.in`，并添加元字符集行，使文件现在看起来像这样：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>    //**Added this line**
{{#each stylesheets}}  <link rel="stylesheet" href="{{this}}">
{{/each}}
... 
```

当然，我从我的 html 文件中删除了 meta charset 行。

我认为现在，这将是要走的路，这将在未来的修订中得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T08:28:25.903

我在 IE 中遇到了强制使用最新版本的问题。我不得不添加

```
<meta http-equiv="x-ua-compatible" content="IE=edge"> 
```

直接在标签后面。而且 app.html.in 似乎不再使用了。

所以我在 tools/latest/tools/bundler.js 上做了这个

783线

```
'<head><meta http-equiv="x-ua-compatible" content="IE=edge">\n'); 
```

这迫使它将其添加到 html 样板文件中。

# php - 无法使用 PHP 和 PDO 插入

> ID：12244234
> 
> 赞同：0
> 
> 时间：2012-09-03T08:18:27.857
> 
> 标签：php, mysql

从上一个问题迁移到 PDO 后，我遇到了一个小问题。我无法将信息插入 MySQL 表。

这是我所拥有的：

```
include_once(db.php);

$platform = $_POST['platform'];
$location = $_POST['location'];
$name = $_POST['name'];
$secret = sha1($_POST['password']);

$sql = $db->prepare("INSERT INTO `servers` (`id`, `secret`, `platform`, `location`, `name`) VALUES (:id, :secret, :platform, :location, :name)");
$sql->bindValue(':id', 'null');
$sql->bindValue(':secret', $secret);
$sql->bindValue(':platform', $platform);
$sql->bindValue(':location', $location);
$sql->bindValue(':name', $name);
$sql->execute(); 
```

我找不到它不会插入新记录的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:18:27.857

我很努力。

`include_once(db.php);`需要的报价：`include_once("db.php");`

我觉得自己像个大白痴，浪费了 2 个小时来解释为什么插入不起作用。

# php - PHP找不到变量

> ID：12244240
> 
> 赞同：0
> 
> 时间：2012-09-03T08:18:51.053
> 
> 标签：php

所以我从 ASP 对 PHP 比较陌生。在将大量 ASP 代码转换为 PHP 之后，我遇到了一个问题，我的 PHP 代码似乎无法找到我设置的隐藏变量。它在 ASP 中运行良好，只是想知道解决这个问题的最佳方法。

表格开始：

```
<form name="LogIn" action="login.php" method="post">
                    <td bgColor=#ffffff>
                        <table align="center" cellSpacing="2" cellPadding="2" border="0">
                            <tr>
                                <td>&nbsp;</td>
                                <td align="right"><font color="#4d71a1">User name:</font>&nbsp;</td>
                                <td><input name="UserName" size="25" type="Text" autocomplete="OFF"></td>
                                <td>&nbsp;</td>
                            </tr>
                            <tr>
                                <td>&nbsp;</td>
                                <td align="right"><font color="#4d71a1">Password:</font>&nbsp;</td>
                                <td><input name="Password" size="25" type="Password" autocomplete="OFF"></td>
                                <td>&nbsp;</td>
                            </tr> 
```

PHP 脚本：

```
<? 
if ($_POST["BtnPress"]=="Pressed")
{

if ($_POST["Username"]=="*****" && $_POST["password"]=="*********")
{

$_SESSION['AdminID']="1";
header("Location: "."index.php");
}
  else
{

print "<font color=#ff0000>Sorry you cannot access this part of the site.</font>";
} 

} 
?> 
```

然后是表格的其余部分：

```
<tr>
                                <td align="center" colspan="4">
                                    <input type="hidden" name="BtnPress" value="Pressed">
                                    <input type="Submit" value="Log In" class="mybutton" onclick="return CheckForm();">
                                </td>   
                            </tr>
                        </table>

                    </td>
                </form> 
```

PHP 似乎无法找到变量 BtnPress，在我翻译的 ASP 到 PHP 脚本中，它是一个类似的问题。抱歉，如果这是一个简单的解决方案，但谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:21:15.427

你有`name="Password"`并且`$_POST["password"]`

`Password`!=`password`

看你的案子。

* * *

```
<form name="LogIn" action="login.php" method="post">
                    <td bgColor=#ffffff> 
```

那是无效的 HTML。`<td>`元素不能是 a 的子元素`<form>`。浏览器可能会以破坏 HTML 的方式进行错误恢复（例如，通过将表单而不是其内容移动到表格之外）。一定要[使用验证器](http://validator.w3.org/)。

* * *

还有一些不太可能是问题的原因，但可能是其他问题的原因。

*   不要使用[布局表](http://www.hotdesign.com/seybold/everything.html)
*   一定要使用[标签元素](http://www.webbie.org.uk/usingthelabelelement.htm)
*   使用 CSS 进行演示（您可以设置标签元素的样式，而不是使用过时的`font`元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:24:17.613

不要使用隐藏输入来测试是否提交了表单。

采用：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
  // processing of $_POST
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:22:39.990

提交按钮的名称应该是“BtnPressed”而不是隐藏字段。我要做的是将表单操作设置为 ?id=submit 或类似的东西，然后检查 "if $_GET['id'] == "submit" 然后处理数据。

```
<form action="login.php?do=submit">

....  <input ..... 

</form>
<?php
if($_GET['do'] == "submit"){

//process data

} ?> 
```

# android - 在 Android 中与 Geocoder 的距离错误

> ID：12244241
> 
> 赞同：0
> 
> 时间：2012-09-03T08:18:52.310
> 
> 标签：android, google-maps, location, google-geocoder

我有 2 个文本框，我在其中提供源地址和目标地址。

**1) 来源 = SHAHIBAUG UNDER BRIDGE, Shahibagh, Ahmedab​​ad, Gujarat**

**2) 目的地 = CG Road, Shreyas Colony, Navrangpura, Ahmedab​​ad, Gujarat**

**距离 = 4.6（来自谷歌地图）** && **2.6656852（使用距离定位方法）**

```
final ProgressDialog dialog = ProgressDialog.show(AutoActivity.this, "Fare", "test");

            new Thread(new Runnable() {
                @Override
                public void run() {
                    try {
                        Location source_location = new Location("");
                        Location destination_location = new Location("");
                        Geocoder geoCode = new Geocoder(getApplicationContext());

                        source_location.setLatitude(geoCode.getFromLocationName(source_input.getText().toString(), 1).get(0).getLatitude());
                        source_location.setLatitude(geoCode.getFromLocationName(source_input.getText().toString(), 1).get(0).getLongitude());
                        source_location.set(source_location);

                        destination_location.setLatitude(geoCode.getFromLocationName(destination_input.getText().toString(), 1).get(0).getLatitude());
                        destination_location.setLatitude(geoCode.getFromLocationName(destination_input.getText().toString(), 1).get(0).getLongitude());
                        destination_location.set(destination_location);

                        float distance = source_location.distanceTo(destination_location)/1000;
                        System.out.println("Distance == " + distance);
                        kmVal = BigDecimal.valueOf(distance);
                        calculateFares();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } catch (Exception e) {
                        e.printStackTrace();
                    } finally {
                        if (dialog!=null) {
                            dialog.dismiss();   
                        }
                    }
                }
            }).start(); 
```

我不知道为什么我的距离不对。我对我的代码有一个疑问，那就是我使用了 getFromLocationName 方法，并且我传递了 1 个参数以获得一个结果。这有什么区别吗？任何人有任何想法请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:34:25.277

谷歌地图为您提供道路距离，地理编码器为您提供乌鸦飞行的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:52:53.927

通过使用 Google Maps API 解决了这个问题。希望它会帮助其他人。它为您提供准确的距离。

```
final ProgressDialog dialog = ProgressDialog.show(AutoActivity.this, "", "Calculating...");

            new Thread(new Runnable() {
                @Override
                public void run() {
                    try {
                        float distance = 0.0f;
                        StringBuffer url = new StringBuffer("http://maps.googleapis.com/maps/api/directions/json?origin=");
                        url.append(source_input.getText().toString().replace(" ", "").trim().toString());
                        url.append("&destination=");
                        url.append(destination_input.getText().toString().replace(" ", "").trim().toString());
                        url.append("&sensor=false");

                        DefaultHttpClient httpClient = new DefaultHttpClient();
                        HttpGet httpGet = new HttpGet(url.toString());
                        HttpResponse httpResponse = httpClient.execute(httpGet);
                        HttpEntity httpEntity = httpResponse.getEntity();
                        String line = EntityUtils.toString(httpEntity);

                        JSONObject jsonObject = new JSONObject(line);
                        JSONArray jsonarray = jsonObject.getJSONArray("routes").getJSONObject(0).getJSONArray("legs");

                        for (int i = 0; i < jsonarray.length(); i++) {
                            JSONObject obj = jsonarray.getJSONObject(i);
                            distance  = Float.valueOf(obj.getJSONObject("distance").getString("text").replace("km", ""));
                            System.out.println("Distance == " + obj.getJSONObject("distance").getString("text").replace("km", ""));
                        }

                        kmVal = BigDecimal.valueOf(distance);
                        calculateFares();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } catch (Exception e) {
                        e.printStackTrace();
                    } finally {
                        if (dialog!=null) {
                            dialog.dismiss();   
                        }
                    }
                }
            }).start(); 
```

# c# - Referencing Controls inside am ajax Tab

> ID：12244242
> 
> 赞同：0
> 
> 时间：2012-09-03T08:18:59.440
> 
> 标签：c#, asp.net, ajax, gridview

I have an ajax tab which inside has a grid, on this grid there is a check box where the user has the ability to check it and assign it to a technician, but for some reason im unable to reference the control, the grid has a total of 4 rows so there is data there, this is my code which is run of a button click

 `````
protected void btnAllocate_click(object sender, EventArgs e)
        {
            foreach (System.Web.UI.Control s in tbHappyCall.Controls)
            {
               foreach (GridViewRow Row in gvHappyCall.Rows)
                {
                    CheckBox chkAllocate = (CheckBox)Row.FindControl("chkAllocate");

                    if (chkAllocate.Checked)
                    {
                        HyperLink lblOrderID = (HyperLink)Row.FindControl("hyperOrderID");

                        HappyCallManager objHappyCallManager = new HappyCallManager();

                        objHappyCallManager.HappyCallAllocated(Convert.ToInt64(lblOrderID.Text), objWebuser.ShortAbbr, ddlAllocateTo.SelectedValue);

                        //Update database with person details thats are assigned to the Welcome Call

                    }
                }
            }
        } 
````  `when it goes on to the Foreach gridviewrow etc the count is 1 even though there is 4 rows displaying information ?

Can any one shed any light on this? or even better a solution?

Thank you for your time.

UPdate

```
<ajaxToolkit:TabPanel ID="tbHappyCall" runat="server" HeaderText="Welcome Calls" TabIndex="10">
                <ContentTemplate>
                    <%--OnRowDataBound="gvConfirmOrder_rowDataBound"--%>
                    <div id="divHappyCall">
                        <asp:GridView ID="gvHappyCall" runat="server" AutoGenerateColumns="false" class="tablesorter"
                            EmptyDataText="There is no Record to display." DataKeyNames="OrderID" EnableViewState="false"
                            OnRowDataBound="gvHappyCall_RowDataBound">
                            <AlternatingRowStyle CssClass="NormalTextVNC" BackColor="#E2E9E7"></AlternatingRowStyle>
                            <Columns>
                                <asp:TemplateField HeaderText="Account Manager">
                                    <ItemTemplate>
                                        <asp:Label ID="lblAccountManager" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.AccountManager") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="OrderID">
                                    <ItemTemplate>
                                        <asp:HyperLink ID="hyperOrderID" runat="server" ForeColor="White" NavigateUrl='<%#Eval("OrderGuid","/Documents/HappyCall.aspx?OrderID={0}") %>'
                                            Text='<%#Eval("OrderID") %>'></asp:HyperLink>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Customer Name">
                                    <ItemTemplate>
                                        <asp:Label ID="lblCustomerName" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.CustomerName") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Company Name">
                                    <ItemTemplate>
                                        <asp:Label ID="lblCompanyName" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.CompanyName") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Mobile Number">
                                    <ItemTemplate>
                                        <asp:Label ID="lblMobileNumber" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.MobileNumber") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Dispatch Date">
                                    <ItemTemplate>
                                        <asp:Label ID="lblConnectionDate" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.DespatchDate") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Status">
                                    <ItemTemplate>
                                        <asp:Label ID="lblStatus" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Status") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>  
                               <asp:BoundField headertext="Date Called" dataformatstring="{0:dd/MM/yyyy}"   datafield="EditedDate" HeaderStyle-Width="100px"  />
                                <asp:TemplateField HeaderText="Allocated To">
                                    <ItemTemplate>
                                        <asp:Label ID="lblAllocatedTo" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.AllocatedTo") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>
                            <%--<asp:TemplateField HeaderText="Last Action">
                                    <ItemTemplate>
                                        <asp:Label ID="lblLAstAction" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.LastAction") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>--%>
                                <asp:TemplateField HeaderText="Check">
                                    <ItemTemplate>
                                      <asp:CheckBox runat="server" ID="chkAssignWelcomeCall" />
                                    </ItemTemplate>
                                </asp:TemplateField>
                            </Columns>
                        </asp:GridView>
                        <asp:DropDownList runat="server" ID="ddlAllocateTo" CssClass="floatright">
                        <asp:ListItem>Name of Admin to Allocate</asp:ListItem>
                        </asp:DropDownList>
                        <div class="WhiteSpace"></div>
                        <asp:Button runat="server" ID="btnAllocate" class="floatright" Text="Allocate" OnClick="btnAllocate_click" />
                    </div>
                </ContentTemplate>
            </ajaxToolkit:TabPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:44:29.833

澄清一下：你不需要迭代你的控件集合`TabPanel`来找到你的`GridView`，它是直接可用的，不要混淆它的`Controls.Count`数量`GridView.Rows.Count`。

ViewState 是否在某处被禁用？

**编辑**：我看到 GridView 的 ViewState 被禁用。我假设它在您启用它时起作用。``

# javascript - 是否可以在尚未附加到 DOM 的元素中创建迷你图（使用 jquery.sparkline 插件）？

> ID：12244243
> 
> 赞同：1
> 
> 时间：2012-09-03T08:19:00.270
> 
> 标签：javascript, jquery

使用[http://omnipotent.net/jquery.sparkline](http://omnipotent.net/jquery.sparkline)，我正在尝试

```
var attachLater = $('<div class="container">')
   .append($('<span>').sparkline([0,1,2]));
.
.
.
$('body').append(attachLater); 
```

但它不起作用。它的行为就好像迷你图根本没有被调用。在附加的元素上它工作正常。我错过了什么，或者这只是迷你图不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:36:56.940

找到了。我错过了常见问题的这一部分：*“如何在尚未在 DOM 中的元素上绘制迷你图？”* 在[http://omnipotent.net/jquery.sparkline/#s-faq](http://omnipotent.net/jquery.sparkline/#s-faq)

livequery还有一个解决方法：

```
$('.sparkMePlease').livequery(function() { 
    $(this).sparkline(values, options).removeClass('sparkMePlease');
});
.
.
.
attachLater = $('<div>').addClass('sparkMePlease');
.
.
.
$('body').append(attachLater); 
```

# ios - Do I really need lower-resolution images for older iOS devices?

> ID：12244244
> 
> 赞同：3
> 
> 时间：2012-09-03T08:19:07.677
> 
> 标签：ios, image, screen-resolution

I am developing an iphone application and i am using a background picture for my app. I know that before iphone 4 , the resolution of the screen was 480x320 and after 960x640\. I read that i should use 2 images like : `MyImage.png` and `MyImage@2x.png` with the 2 different resolutions and the app will know which one to choose according to the phone. My question is very simple. If i just use the 960x480 , whats the difference? I am developing on an iphone 3gs and i am using this resolution and everything works perfect. So why have a small resolution for these phones?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:24:00.233

在我看来，不同之处在于：手机会将双倍分辨率的大小调整为一半，这将导致 (1) 最终图像不像从像 Illustrator 或 Photoshop 这样的图像应用程序 - 至少从我自己的经验来看，当我在非视网膜设备中导出两种分辨率时，如果我导出了正常分辨率，图像看起来不会那么好。另外（2）设备会浪费时间/性能来进行这种转换，尽管我不知道它有多大意义。(3) 最后，考虑到双倍大小的图像是较大的文件，您可能会在不需要的情况下使内存过载，您可以使用较小的文件来代替。

如果你不介意这个问题，你可以继续。自己试试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:24:14.420

如果不出意外，高分辨率图像将对内存造成更多负担。一张 320✕480 的全屏图像在内存中大约是 600K，而 640✕960 几乎是 2.5M，是内存的四倍。在旧设备上，内存比在新设备上要稀缺得多，并且您可能会在开发周期的后期遇到问题，此时有更多的资源在使用。

即使您能够在所有受支持的旧设备上测试该应用程序，并且您可以保证没有立即出现性能问题或视觉故障，该应用程序也会占用更多内存，从而迫使操作系统更频繁地杀死其他应用程序（= 整体用户更差经验）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:26:21.503

如果您使用一个版本的图像 (960x640) ，当应用程序在非视网膜上运行时会有内存开销。你不需要在非视网膜显示高分辨率，只在视网膜显示，制作两个版本的图像 .png 和 @2x.png 将告诉 ios 它应该加载哪个图像版本，这取决于当前使用的设备。

# sql-server - Redistributable local database for windows desktop app

> ID：12244246
> 
> 赞同：0
> 
> 时间：2012-09-03T08:19:16.170
> 
> 标签：sql-server

I am getting a little bit confused about the difference of the followings:

1.  SQL Server Express
2.  SQL Server Compact
3.  localDB

My requirement is to develop a desktop application that will use basic RDBMS features. I need to package the application and allow the user to install a single distributed package. I don't want the user to install even SQL server express.

In this case, which DB I should use? SQLite is not considered as too much re-coding has to be done.

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:30:12.600

SQL Server Express 是功能齐全的 DBMS，但在数据库大小和允许使用的资源方面存在一些限制。您可以在 microsoft 网站上查看它的限制（相对于 SQL Server）[（SQL Server 2012 版本支持的功能）](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx)

SQL Server CE 是嵌入式数据库，这意味着它在用户模式下运行，易于部署（只需复制少量程序集），轻量但速度快，可以由低权限用户运行。NHibernate 支持它。但是，有更多的限制。对我来说最值得注意的是，当您尝试与同一个数据库建立多个连接时会出现问题。虽然 MS 声称支持此功能，但如果您在 Windows 2008 服务器中尝试此功能，您将失败。更糟糕的是，这种使用场景可能会导致数据库损坏。这意味着您将无法在服务/网站运行时有效地使用某些管理工具来更新数据。此外，SQL Server Management Studio 不再支持 SQL CE，因此您必须使用第三方工具，例如 Database.NET。它也不支持子查询。

localDB，没有使用它，听起来像是一种妥协。它是一个以用户模式执行的独立数据库（可由低权限用户使用），但必须安装，因此您需要该部分的管理权限。提供 SQL Server Express 的一组功能。它比 SQL CE 大得多，并且还需要安装（不像 CE，它只是二进制文件）。[可以在此处找到](http://www.sqlcoffee.com/SQLServer2012_0004.htm)此 DBMS 的最短概述。

# xcode - Basic programming sample of OpenCL from Apple fails to run on GPU

> ID：12244247
> 
> 赞同：4
> 
> 时间：2012-09-03T08:19:20.047
> 
> 标签：xcode, macos, osx-lion, opencl

I started learning some basics about OpenCL a while ago and decided to give the ["Basic programming sample"](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/ExampleHelloWorld/Example_HelloWorld.html#//apple_ref/doc/uid/TP40008312-CH112-SW2) from Apple a go. I runs OK on CPU, but when I select GPU as the target device I get err = -45 from

`err = gclExecKernelAPPLE(k, ndrange, &kargs);`

This error code translates to `CL_INVALID_PROGRAM_EXECUTABLE`. Any idea how can I correct the sample code?

Automatically generated `kernel.cl.c` code looks like this (+ includes on top):

```
static void initBlocks(void);

// Initialize static data structures
static block_kernel_pair pair_map[1] = {
    { NULL, NULL }
};

static block_kernel_map bmap = { 0, 1, initBlocks, pair_map };

// Block function
void (^square_kernel)(const cl_ndrange *ndrange, cl_float* input, cl_float* output) =
^(const cl_ndrange *ndrange, cl_float* input, cl_float* output) {
    int err = 0;
    cl_kernel k = bmap.map[0].kernel;
    if (!k) {
        initBlocks();
        k = bmap.map[0].kernel;
    }
    if (!k)
        gcl_log_fatal("kernel square does not exist for device");
    kargs_struct kargs;
    gclCreateArgsAPPLE(k, &kargs);
    err |= gclSetKernelArgMemAPPLE(k, 0, input, &kargs);
    err |= gclSetKernelArgMemAPPLE(k, 1, output, &kargs);
    gcl_log_cl_fatal(err, "setting argument for square failed");

    err = gclExecKernelAPPLE(k, ndrange, &kargs);

    gcl_log_cl_fatal(err, "Executing square failed");
    gclDeleteArgsAPPLE(k, &kargs);
};

// Initialization functions
static void initBlocks(void) {
    const char* build_opts = " -cl-std=CL1.1";
    static dispatch_once_t once;
    dispatch_once(&once,
    ^{ int err = gclBuildProgramBinaryAPPLE("OpenCL/kernel.cl", "", &bmap, build_opts);
        if (!err) {
            assert(bmap.map[0].block_ptr == square_kernel && "mismatch block");
            bmap.map[0].kernel = clCreateKernel(bmap.program, "square", &err);
        }
    });
}

__attribute__((constructor))
static void RegisterMap(void) {
    gclRegisterBlockKernelMap(&bmap);
    bmap.map[0].block_ptr = square_kernel;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:42:59.617

我在 10.7.3 下运行时看到了同样的问题，而 10.7.5 上的机器运行良好。我注意到`CVMCompiler`每次调用我的应用程序后该进程都崩溃了。

检查堆栈跟踪，我注意到它在尝试解析位码以编译为本机代码时崩溃。由于位码解析失败，因此没有生成的编译程序可供`gclExecKernelAPPLE()`执行，因此出现错误。

尝试升级到 10.7.5，或者确实是 10.8，问题应该会消失。（我刚刚对此进行了测试，它确实解决了问题。）

# codeigniter - Assigning object data to a view in Codeigniter gives weird behaviour

> ID：12244249
> 
> 赞同：0
> 
> 时间：2012-09-03T08:19:36.280
> 
> 标签：codeigniter

I've got a problem when assigning data to an object variable. In all my time, i haven't seen such weird behaviour.

I have a class:

```
class Main extends CI_Controller {

    public $data = array();

    public function __construct(){
        parent::__construct();
        /**
         * Load Models
         */
        $this->load->model('rss');
        $this->load->model('model_product');

        /**
         * Default loaded Data
         */
                $this->data['newsfeed'] = $this->rss->load($this->config->item('newsfeed'));
        }
} 
```

You see that i want to add the newsfeed to the $this->data object. It will held in a key named newsfeed. But now, i want this newsfeed on different pages. It is useless and inefficient to load this on every page, so i extended my main controller.

```
class Shop extends Main {

    public function __construct(){
        parent::__construct();
    }

    public function index()
    {
        $this->data['content'] = 'shop/default';
        $this->load->view('template/index', $this->data);
    }

    public function product($id){
        $this->data['product'] = $this->model_product->getProducts(null, $id);

        if($this->data['product']->categoryid != $this->config->item('gamecategory')){
            redirect('');
        }

        var_dump($this->data['product']);

        $this->data['content'] = 'shop/product';
        $this->load->view('template/index', $this->data);
    }
} 
```

The expected behaviour would be that $this->data would hold an array of objects (in each key ) but when i var_dump in the shop controller it gives me the entire $data object as return data, instead of the provided key. This totally blows my mind and i cant seem to understand this weird behaviour.

```
Expected var_dump ($this->data['product']):

Array(x){
 key: value,
 key: value,
 .....
}

actual result:

Object{
     newsfeed:
         - data
     product:
         - data
     ....
     ....
} 
```

Model rss:

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class Rss extends CI_Model{
        public function __construct(){
            parent::__construct();
        }

        public function load($item){
            return ($xml = simplexml_load_string(file_get_contents($item))) ? $xml : false;
        }
    } 
```

# windows-phone-7 - How to add more than one tab space in the body of an email in WP7

> ID：12244253
> 
> 赞同：1
> 
> 时间：2012-09-03T08:20:09.290
> 
> 标签：windows-phone-7, email, formatting, launcher

I have an email feature in my app. So i have added the \t\t so that there is a tabbed space between the first date and the value. This appears fine in the device too. But when the email is received, there is just one space between the strings and it is not tabbed. Hence the data does not appear in columns but jagged. Is there any method by which i can achieve the same look in the email received? How can i format text in `EmailComposeTask`?

```
string test = "";
strheading = "heading";
for (int j = 0; j < pCycMan.GetWeightCount(); j++)
{
    test= test+ pCycMan.GetWeightDateByIndex(j).ToString("dd-MMM-yyyy") + "\t\t" + pCycMan.GetWeightByIndex(j) + "\n";
}
var emailComposeTask = new EmailComposeTask
{
    To = "emailid",
    Subject = "tezt",
};
emailComposeTask.Body = strheading + test;
emailComposeTask.Show(); 
```

**EDIT** :- I also tried the following code inside the for loop which did not work.

```
string temp2 =pCycMan.GetWeightByIndex(j);
StringBuilder sb = new StringBuilder(pCycMan.GetWeightDateByIndex(j).ToString("dd-MMM-yyyy"));
sb.Append("\t");
sb.Append(temp2);
sb.AppendLine();
weight = weight + sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:58:18.777

例如，如果您在浏览器中观看电子邮件，那么所有标准空格都可以被破坏，因为它会被浏览器忽略。因此，您需要查看原始电子邮件数据，以确认它确实缺少您发送的标签。例如，在 Mozilla Thunderbird 中，您按下`Ctrl+U`以查看原始消息数据。在 Gmail 中，您单击回复按钮附近的向下箭头，然后选择`Show original`选项。

如果您想直观地格式化文本，最好使用 HTML 表格来格式化类似表格的数据。指定“Content-Type: text/html”，然后用数据创建 html 文档（注意，应该正确指定编码）。

如果您想要或必须使用`text/plain`内容类型，那么使用空格来格式化表格数据会更安全，例如：

```
+------------+-------+-------+-------+-------+
| Date       | Load  | Quota | Warn  | Err   |
+------------+-------+-------+-------+-------+
| 2012-08-23 |   0.37|     5%|      0|      0|
| 2012-08-22 |   0.45|     5%|      0|      0|
| 2012-08-21 |   0.30|     5%|      0|      0|
+------------+-------+-------+-------+-------+ 
```

但是，电子邮件客户端仍然必须使用[等宽字体](http://en.wikipedia.org/wiki/Monospaced_font)才能正确读取此表格，否则表格边框和数据将“流动”。

# c# - createWindowEx failed exception

> ID：12244254
> 
> 赞同：1
> 
> 时间：2012-09-03T08:20:22.777
> 
> 标签：c#, winforms, dll

`createWindowEx` failed exception is thrown by my server which is using `overbyteICS` dll in .net C# windowsforms.

I have a server which handles large number of clients throughout the day. But when the total connections(i.e Connection and disconnections altogether) count reaches to 10000 the above error appears and the server stops accepting user connections and also hangs the machine.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:44:03.807

你诊断得很好。是的，一个 CreateWindowEx() 失败和 10,000 个属于一起。10,000 是进程的默认 user32 对象配额。也就是说，单个进程不能创建超过 10,000 个窗口。这是针对泄漏窗口句柄的应用程序的对策，这是一个非常常见的错误。可以在会话中创建的窗口总数是有限的资源，让一个进程全部使用它们会导致彻底失败，您无法再关闭 Windows。

显然，在您的情况下，这不是泄漏。您可以通过更改注册表设置 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Windows\USERProcessHandleQuota 来临时缓解。重新启动以使其生效。

如果机器不运行需要大量窗口的进程，从 10,000 增加到最大值 18,000 应该没问题。您可以使用 Taskmgr.exe，“进程”选项卡看到的内容。选择 View + Select Columns 并勾选 USER objects。在您使用 GDI 对象和句柄时，还要勾选其他具有配额的资源。

从长远来看，这种行为不能很好地扩展。您需要找到为每个 Web 请求创建窗口句柄的代码并修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:45:28.557

我同意 Roger 的观点，但让我们先确认一下 - 发生此错误时，`SPY++`从开始菜单中的 MicrosoftVisualStudio\Tools 运行并查看窗口树。展开分支并查找某些窗口的重复项。当然会有很多，但你对成百上千的副本感兴趣。如果你做到了，那么这就是罗杰所说的............除了定期重新启动连接服务器进程（或整个机器，以防万一）之外，几乎没有其他解决方案只是为了确保它不会挂起（当然，服务器重新启动几乎会激怒用户..），或修复/修补/重新实现连接服务器进程以更加资源友好..

请注意，虽然每个连接打开一个隐藏窗口是一种**非常**浪费的方法，但它仍然*不应该*挂机。它只是应该删除它无法处理的连接。在这里，它似乎根本没有实施任何限制，这是一个错误。

编辑：在 NT 之前（即 win9x）上，限制是硬编码的。在 NT 类系统上，您可以尝试调整池：

[http://weblogs.asp.net/israelio/archive/2007/02/07/max-num-of-open-windows-under-xp-2003-vista-resolved.aspx](http://weblogs.asp.net/israelio/archive/2007/02/07/max-num-of-open-windows-under-xp-2003-vista-resolved.aspx)

但是，我仍然认为这是最后一次恢复，因为当连接数再次增加时，问题会再次出现。首先，尝试 ping 服务器开发人员以永久修复该问题。

# javascript - jquery字符串变量上的每个函数

> ID：12244261
> 
> 赞同：2
> 
> 时间：2012-09-03T08:20:56.193
> 
> 标签：javascript, jquery

我在 javascript 中编写了一个函数，该函数获取`<tr>`调用 ajax 的标题属性，然后经过一些操作，它会从它们中检索一些标题属性。根据该标题属性，我想删除这些`<tr>`行

```
function currentTicketStatus() {
    var ids = '';
    $('tbody tr[title]').each(function() {
        ids += ((ids == '') ? '' : ',') + $(this).attr('title');
    });
    $.ajax({
        url: 'ajaxExecute.aspx?Fn=CTS',
        type: 'POST',
        context: document.body,
        cache: false,
        data: 'Tickets=' + ids,
        success: function(response) {
            if (response != '') {
                if (response.substr(0, 5) != 'ERROR') {
                    var sTickets = response.split('|');

                    sTickets.each(function() {
                        $(this).parent().parent().remove();
                    });
                }
            }
        }
    });
} 
```

示例：在ajax 调用`ids="100,101,102,103,104"`之后的ajax 调用时`sTickets="101|102"`。现在删除那些具有 sTickets 属性的行

HTML（不完全是）

```
<tbody>
<tr title="100"> some data part </tr>
<tr title="101"> some data part </tr>
<tr title="102"> some data part </tr>
<tr title="103"> some data part </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:27:43.543

在您的成功函数中尝试此代码：

```
 success: function(response) {
            if (response != '') {
                if (response.substr(0, 5) != 'ERROR') {
                    var sTickets = response.split('|');
                    $.each(function(i,v){ $('tr[title=' + v + ']')  }).remove();
                }
            } 
```

解释：

**1- 按属性选择 DOM 元素：**

```
 $('[ATTRIBUTE=VALUE]') // $('[title="myTitle"]') 
```

您可以在此链接中找到更多信息[http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

**2 - $.each 迭代**

它可用于无缝迭代对象和数组。

更多：[http ://api.jquery.com/jquery.each/](http://api.jquery.com/jquery.each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:29:31.253

`this`in是`each`一个“title”（一个字符串），你需要 DOM 元素（the `<tr>`）来代替

```
sTickets.each(function() {
  $('tbody tr[title="'+ this +'"]').remove();
}); 
```

[演示](http://jsfiddle.net/tAb8F/1/)

# linux - 添加 Linux 驱动程序属性文件失败

> ID：12244262
> 
> 赞同：1
> 
> 时间：2012-09-03T08:21:03.047
> 
> 标签：linux, linux-kernel, driver, linux-device-driver

我尝试从我学习的 Linux 驱动程序书中运行一个示例程序。

但是它崩溃了，我不知道为什么。

是否有可能控制 DEVICE_ATTR 宏？因为也许有问题。

这是我的代码：

```
#include <linux/fs.h>
#include <linux/module.h>
#include <linux/init.h>
#include <linux/pci.h>
#include <linux/interrupt.h>
#include <linux/device.h>
#include <linux/platform_device.h>
#define DRIVER_MAJOR 240
static struct file_operations fops;
static DECLARE_COMPLETION( dev_obj_is_free );
static int frequenz;
static void mydevice_release( struct device *dev )
struct platform_device mydevice = {
    .name  = "MyDevice",
    .id    = 0,
    .dev = {
        .release = mydevice_release,
    }
};
static struct device_driver mydriver = {
    .name = "MyDevice",
    .bus = &platform_bus_type,
};
static ssize_t read_freq( struct device *dev, struct device_attribute *attr,
    char *buf )
{
    snprintf(buf, 256, "frequenz: %d", frequenz );
    return strlen(buf)+1;
}
static ssize_t write_freq( struct device *dev, struct device_attribute *attr,
    const char *buf, size_t count )
{
    frequenz = simple_strtoul( buf, NULL, 0 );
    return strlen(buf)+1;
}
static DEVICE_ATTR( freq ,S_IRUGO|S_IWUGO, read_freq, write_freq );
static int __init drv_init(void)
{
    if(register_chrdev(DRIVER_MAJOR, "MyDevice", &fops) == 0) {
        driver_register(&mydriver);           // register the driver
        platform_device_register( &mydevice );// register the device
        mydevice.dev.driver = &mydriver;      // now tie them together
        device_bind_driver( &mydevice.dev );  // links the driver to the device
        device_create_file( &mydevice.dev, &dev_attr_freq );
        return 0;
    }
    return -EIO;
}
static void __exit drv_exit(void)
{
    device_remove_file( &mydevice.dev, &dev_attr_freq );
    device_release_driver( &mydevice.dev );
    platform_device_unregister( &mydevice );
    driver_unregister(&mydriver);
    unregister_chrdev(DRIVER_MAJOR,"MyDevice");
    wait_for_completion( &dev_obj_is_free );
}
module_init( drv_init );
module_exit( drv_exit );
MODULE_LICENSE("GPL"); 
```

这是糟糕的消息：

```
Unable to handle kernel paging request for data at address 0x00000001
Faulting instruction address: 0xc01661b0

Oops: Kernel access of bad area, sig: 11 [#1]
SBC8548
last sysfs file: 
Modules linked in: temp(+)
NIP: c01661b0 LR: c0166194 CTR: c0166170
REGS: cf8a3d50 TRAP: 0300   Not tainted  (2.6.36)
MSR: 00029000 <EE,ME,CE>  CR: 84000424  XER: 00000000
DEAR: 00000001, ESR: 00000000
TASK = cf9fd240[994] 'insmod' THREAD: cf8a2000
GPR00: c0166194 cf8a3e00 cf9fd240 00000001 c02ca2c8 00000000 c0164cdc 00000020 
GPR08: 000003c0 c02d3298 00001386 cf81f940 84000442 1004950c 00000240 00000000 
GPR16: 10103980 1009ea94 100f0000 100f7ac8 00000000 101039a8 101052b8 bfd6ecc8 
GPR24: c02e0000 c02d3140 00000000 cfafc540 c02ca2c0 d102b2f8 c02ca2c8 00000001 
NIP [c01661b0] platform_match+0x40/0xcc
LR [c0166194] platform_match+0x24/0xcc
Call Trace:
[cf8a3e00] [c0166194] platform_match+0x24/0xcc (unreliable)
[cf8a3e20] [c0164d0c] __driver_attach+0x30/0xa8
[cf8a3e40] [c0163bb0] bus_for_each_dev+0x60/0x9c
[cf8a3e70] [c01647b4] driver_attach+0x24/0x34
[cf8a3e80] [c0164444] bus_add_driver+0xb8/0x274
[cf8a3eb0] [c0164fe4] driver_register+0x70/0x168
[cf8a3ed0] [d102e058] drv_init+0x58/0xe0 [temp]
[cf8a3ef0] [c0001ef8] do_one_initcall+0x16c/0x1b8
[cf8a3f20] [c005ff8c] sys_init_module+0xd4/0x1e4
[cf8a3f40] [c000dae0] ret_from_syscall+0x0/0x3c
--- Exception: c01 at 0xff3b388
    LR = 0x10000dbc
Instruction dump:
90010024 7c9d2378 80640014 7fc4f378 48017051 2f830000 38600001 409e005c 
83fd0038 3b9efff8 2f9f0000 419e0078 <881f0000> 2f800000 419e0054 83defff8 
---[ end trace 2c20538ad6d3f6d6 ]---
Segmentation fault
-bash-3.2# 

Message from syslogd@ at Thu Jan  1 01:00:11 1970 ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:10:27.040

我能找到的所有关于 a 的例子`struct device_driver`都`.bus = &platform_bus_type`包含在 a 中`struct platform_driver`。我怀疑你需要其中之一。`

# javascript - 使用键盘分页 jQuery 下一个和上一个控件 - .trigger('click') 不起作用

> ID：12244266
> 
> 赞同：0
> 
> 时间：2012-09-03T08:21:12.527
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:54:13.867

[jsFiddle Live Example](http://jsfiddle.net/QHbRg/3/)

```
$('#next').click(function() {
    window.open('http://www.stackoverflow.com', '_blank');
});

$('#prev').click(function() {
    window.open('http://www.google.com', '_blank');
});

$(function() {
    $('#next').trigger('click')
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:52:40.310

I didn't find the exact answer for my question, I would like to post a slightly different and final, well working solution, based on information gathered and peoples' post. Thank you those that replied!

When you construct pagination, I believe, a user would be happy to just click ← Ctrl / Ctrl → to switch in between pages.

The following code has only one improvement - the error occurred on the first an the last page - when there are no next or previous buttons on the page, because you either on the last pagination or the first one, the initial code returned undefined (obviously), so I fixed it and would like to share the final result with those who could be possibly interested:

```
$(document).keydown(function (event) {
var keycode = event.keyCode ? event.keyCode : event.which;
  if (event.ctrlKey) {
    if (keycode === 39) {
        var nextExists = $('#pagination li.next a').attr('href');
        if (nextExists) window.location.href = $('#pagination li.next a').attr("href");
    }
    if (keycode === 37) {
        var previousExists = $('#pagination li.previous a').attr('href');
        if (previousExists) window.location.href = $('#pagination li.previous a').attr("href");
    }
  }
}); 
```

# java - 从时间戳中剥离时间

> ID：12244272
> 
> 赞同：1
> 
> 时间：2012-09-03T08:21:28.847
> 
> 标签：java, timestamp

为什么我不能以这种方式从时间戳中清除时间：

```
one day == 24 * 3600 * 1000 == 86400000 milliseconds.

long ms = new Date().getTime();  //Mon Sep 03 10:06:59 CEST 2012
Date date = new Date(ms - (ms % 86400000)); 
```

这怎么`Mon Sep 03 02:00:00 CEST 2012`不是`Mon Sep 03 00:00:00 CEST 2012`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:23:05.433

> 为什么我不能以这种方式从时间戳中清除时间

您正确清除了*UTC*中的时间部分。中的毫秒值始终相对于*UTC 的*`Date`1970 年 1 月 1 日午夜。但是，由于工作方式（它始终使用系统本地时区），您没有以 UTC*显示它。*请注意， a本身*没有*时区的概念。自 1970 年 1 月 1 日午夜 UTC 以来，这*只是*几毫秒。**`Date.toString()``Date`**

 ***如果不指定您正在谈论的时区，“从时间戳清除时间”的概念实际上没有意义，因为相同的时间戳在不同的时区将具有不同的时间（甚至日期）。

老实说，我建议将[Joda Time](http://joda-time.sf.net)用于任何重要的日期/时间工作。然后，您可以创建一个`LocalDate`显然表示“只是一个日期”的 a ——从 a `Date`（或`Instant`）到 a的翻译`LocalDate`将使您可以轻松地指定要使用的任何时区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:28:08.990

> 我实际上想将它与另一个日期进行比较，而不考虑一天中的时间

为了比较日期，我建议使用支持此功能的 JodaTime 和[LocalDate](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html)

```
LocalDate date1 = new LocalDate(); // just the date without a time or time zone
LocalDate date2 = ....
if (date1.compareTo(date2) <=> 0) 
```

注意：这将构建适用于默认时区的无时区 LocalDates。只要您只谈论已设置机器默认时区的时区，就可以了。例如，假设您有一个时区，`CEST`这对于欧洲大部分地区来说都很好。

* * *

使用内置的时间函数，您可以执行类似的操作

```
public static int compareDatesInTimeZone(Date d1, Date d2, TimeZone tz) {
    long t1 = d1.getTime();
    t1 += tz.getOffset(t1);
    long t2 = d2.getTime();
    t2 += tz.getOffset(t2);
    return Double.compare(t1 / 86400000, t2 / 86400000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:35:37.787

试试这个...

```
Calendar c = Calendar.getInstance();
DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT);
String strDate = df.format(c.getTime())); 
```

现在这样你可以有另一个日期，然后比较它......因为它们现在是字符串格式。***

# c# - DataGridView 上的 CAST 错误

> ID：12244273
> 
> 赞同：0
> 
> 时间：2012-09-03T08:21:34.497
> 
> 标签：c#, wpf, datagridview

我用 WPF 4.0 和一个数据网格在 c# 中创建了一个小应用程序。我的数据网格绑定到“TableCompte”对象的某些数据成员

我想在输入一行后进行一些测试，所以我使用 RowEditEnding 事件。

这是我的代码

```
private void dataGrid1_RowEditEnding(object sender, DataGridRowEditEndingEventArgs e)
{
    TableCompte Compte = e.Row.DataContext as TableCompte;

    if (Compte  != null)
    {
       // Verifs
    }
} 
```

我的问题是我的对象“ **Compte** ”为空。

尽管如此，我的“ **DataContext** ”值还是不错的！所以这是一个演员错误，但我的错误在哪里？

这是我的 XAML 声明：

```
<DataGrid AutoGenerateColumns="false" Name="dataGrid1" AreRowDetailsFrozen="false" Margin="31,227,28,82" RowEditEnding="dataGrid1_RowEditEnding">
    <DataGrid.Columns>
        <DataGridTextColumn Width="134" Header="Compte d'origine" Binding="{Binding Path=m_CompteOrigine, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        <DataGridTextColumn Width="134" Header="Compte Taux 1" Binding="{Binding Path=m_CompteTaux1, Mode=TwoWay ,UpdateSourceTrigger=PropertyChanged}"  />
        <DataGridTextColumn Width="134" Header="Taux 1" Binding="{Binding Path=m_Taux1, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged }"  />
        <DataGridTextColumn Width="134" Header="Compte Taux 2" Binding="{Binding Path=m_CompteTaux2, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
        <DataGridTextColumn Width="134" Header="Taux 2" Binding="{Binding Path=m_Taux2, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged }"  />
        <DataGridTextColumn Width="134" Header="Compte Taux 3" Binding="{Binding Path=m_CompteTaux3, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
        <DataGridTextColumn Width="134" Header="Taux 3" Binding="{Binding Path=m_Taux3, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged }"  />
    </DataGrid.Columns>
</DataGrid> 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:46:36.083

`e.Row.DataContext`包含行的项目源，而不是 DataGrid 的数据源。

所以它将是 , , 等所`m_CompteOrigine`包含`m_CompteTaux1`的`m_CompteTaux2`内容。
它们都具有相同的类型或接口吗？

您应该转换为项目源的通用类型/接口。

假设：

```
Compte m_CompteOrigine;
Compte m_CompteTaux1; 
```

然后做：

```
private void dataGrid1_RowEditEnding(object sender, DataGridRowEditEndingEventArgs e)
{
Compte Compte = e.Row.DataContext as Compte;

if (Compte  != null)
{
   // Verifs
}
} 
```

如果您仍然有问题。尝试调试并在赋值语句处设置断点。然后使用调试器检查`e.Row.DataContext`；它会告诉你它的类型。

祝你好运

# php - 在PHP中访问名称中带有空格的文件夹中的文件

> ID：12244274
> 
> 赞同：5
> 
> 时间：2012-09-03T08:21:34.797
> 
> 标签：php

我想在 PHP 的文件夹中打开一个文件。问题是包含该文件的文件夹的名称中可能包含空格。我用来打开文件（并且不起作用）的代码如下：

```
$myFile = "path/to the/file.txt";
$myFile = str_replace(' ', '\ ', $myFile);
$fh = fopen($myFile, 'r');
$theData = fread($fh, filesize($myFile));
fclose($fh);
echo $theData; 
```

如您所见，我试图通过`\`在空间前面放置 a 来解决问题，但这并不能解决问题。我仍然收到以下错误：

```
Warning: fopen(path/to\ the/file.txt) [function.fopen]: failed to open stream: No such file or directory in /path/to/my/website on line 49 
```

关于如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T08:24:17.820

反斜杠用于转义*命令行上的*空格，因为命令行上的空格是参数分隔符。PHP中没有这样的问题。如果你给 任何字符串`fopen`，它期望这个字符串是一个路径。它不会在空格处将路径分成单独的参数，因为这在这种情况下没有意义。

因此，不要添加任何反斜杠。路径`path/to\ the/file.txt`与路径不同`path/to the/file.txt`。

# sql-server - 更改列的数据类型并将列设置为 SQL 中的标识

> ID：12244279
> 
> 赞同：1
> 
> 时间：2012-09-03T08:22:07.900
> 
> 标签：sql-server, alter

```
----------------------------------------------
DepartmentCode  varchar(30) AllowNulls
---------------------------------------------- 
```

有谁知道如何更改 SQL 2008 中列的数据类型？这是我要更改的列，但是当我尝试此查询时，

```
ALTER TABLE SystemDepartment ALTER COLUMN DepartmentCode smallint NOT NULL 
```

我收到以下错误：

> 消息 5074，级别 16，状态 1，第 1 行对象“PK_SystemDepartment”依赖于列“DepartmentCode”。消息 4922，级别 16，状态 9，第 1 行 ALTER TABLE ALTER COLUMN DepartmentCode 失败，因为一个或多个对象访问此列。

我的问题是如何强制我的查询来处理它？我也想将此列设置为主键和身份

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:39:58.953

您首先需要删除主键约束。

```
ALTER TABLE SystemDepartment DROP CONSTRAINT PK_SYSTEMDEPARTMENT 
```

然后只有您可以更改该列。

您不能强制现有列标识。在这种情况下，您需要添加具有标识的新列，然后`sp_rename`对旧名称执行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:58:59.143

如果您的约束是针对用户类型的，那么不要忘记查看是否有`Default Constraint`，通常类似于`DF__TableName__ColumnName__6BAEFA67`，如果有，那么您将需要删除默认约束，如下所示：

```
ALTER TABLE TableName DROP CONSTRAINT [DF__TableName__ColumnName__6BAEFA67] 
```

有关更多信息，请参阅出色的 Aaron Bertrant[对此答案](https://stackoverflow.com/a/2253852/550975)的评论。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T09:08:44.107

试试这个 ，

正如您所说，您遇到主键约束错误，首先您必须删除主键并使用以下查询，

```
 ALTER TABLE SystemDepartment MODIFY DepartmentCode int(3) 
```

谢谢，

文卡特。

# ubuntu - 查询驱动器可用空间

> ID：12244281
> 
> 赞同：1
> 
> 时间：2012-09-03T08:22:11.720
> 
> 标签：ubuntu

我在 Ubuntu 服务器上分别安装了 2 个 1TB 驱动器到 /Drives/General1 和 /Drives/General2 （我的主要安装在 250GB 上）。使用终端（我通过 SSH 访问）如何查询每个驱动器上使用/空闲的空间量？

我用过`fdisk -l`，但这似乎只是告诉我驱动器的总大小而不是免费的多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:27:54.340

试试这个命令：

```
df -h 
```

除非我有 30 个字符，否则它不会让我发帖...

# android - 使用 OnClickListener 自定义列表视图

> ID：12244283
> 
> 赞同：1
> 
> 时间：2012-09-03T08:22:15.790
> 
> 标签：android, android-listview

我有带有 TextView 和 CheckBox 的自定义 ListView 布局。一切正常。我想要的是，当我单击 CheckBox 或 TextView（在 ListView 的单个视图上）时，两者的行为都应该像一个对象。（我可以点击 CheckBox，它不会影响 TextView 和 TextView 对 CheckBox 没有影响。）代码没有问题。

我已经实施了所有可能的解决方案，但问题仍然存在。（单击列表的每个对象应考虑单击完整的行。）我希望我解释得很好。

主要活动

```
package com.example.smsplanner;

public class SMSPlanner extends ListActivity      {

    ListView contactsListView;

    private String TAG = "SMSPlanner";    CheckBox check;
    int count;

    List<ContactInfo> list = new ArrayList<ContactInfo>();
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        ph = new String[3];
        phType = new String[3];
        LoadContactListFromPhone();
        ContactsAdapter contactadAdapter = new ContactsAdapter(this, list);
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        setListAdapter(contactadAdapter);
    }    
    @Override
    public void onListItemClick(ListView parent, View v, int position, long id)
    {
        TextView tx =(TextView)v.findViewById(R.id.firstname);
        TextView ph =(TextView)v.findViewById(R.id.phone);
        Toast.makeText(this, tx.getText().toString() + " " + ph.getText().toString() + " " + Integer.toString(count), Toast.LENGTH_SHORT).show();

    }
    final class ContactHolder{
        TextView txtviewfirstname;
        CheckBox chkselected;
        TextView txtviewphone;
    }
    void LoadContactListFromPhone()
    {
        loadlistandreturns();
    }

    void call()
    {
        Toast toast = Toast.makeText(this, "Called...",Toast.LENGTH_LONG);
        toast.show();
    }
} 
```

定制适配器

```
public class ContactsAdapter extends ArrayAdapter<ContactInfo> 
{

    private final Activity context;
    int resourceid;

    List<ContactInfo> list = null;
    public ContactsAdapter(Activity context, List<ContactInfo> list) {
        super(context, R.layout.contactrow, list);
        this.context = context;
        this.list = list;
    }

    @Override
    public View getView(int position, View convertview, ViewGroup viewgroup){
        View view = null;
        if(convertview == null){
            LayoutInflater inflater = context.getLayoutInflater();
            view = inflater.inflate(R.layout.contactrow, null);

            ContactHolder holder = new ContactHolder();

            holder.txtviewfirstname = (TextView)view.findViewById(R.id.firstname);
            holder.txtviewphone = (TextView)view.findViewById(R.id.phone);
            holder.chkselected = (CheckBox)view.findViewById(R.id.check);
            view.setTag(holder);
        }
        else{
            view = convertview;
        }
        ContactHolder holder2 = (ContactHolder) view.getTag();
        holder2.txtviewfirstname.setText(list.get(position).firstname);
        holder2.txtviewphone.setText(list.get(position).phonenumber);
        holder2.chkselected.setChecked(list.get(position).selected);
        return view;
    }

    final class ContactHolder{
        TextView txtviewfirstname;
        CheckBox chkselected;
        TextView txtviewphone;
    }
} 
```

布局

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" >

    <RadioGroup
        android:id="@+id/rgStyle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="15"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/firstname"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/phone"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </RadioGroup>

    <RadioGroup
        android:id="@+id/rgStyle2"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="85"
        android:orientation="vertical" >

        <CheckBox
            android:id="@+id/check"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:checked="false"
            android:focusable="false"
            android:focusableInTouchMode="false" >

        </CheckBox>
    </RadioGroup>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:26:16.887

**1.**默认情况下，ListView 的所有 Rows 都启用监听点击...。

您必须为 ListView**实现** `onItemClickListener()`....

**看这个例子：**

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:35:49.737

```
 i think you should make adapter as

 public class ContactsAdapter extends BaseAdapter {

    ArrayList<ContactInfo> mlist;
    Context mcontext;

public BluetoothChatadpter(Context context,ArrayList<ChatInfo> mchtlist) {      
        mlist =  mchtlist;
        mcontext = context;

    }

    @Override
    public int getCount() {
        return mlist.size();
    }

    @Override
    public Object getItem(int postion) {
        return mlist.get(postion);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
        public View getView(int position, View convertview, ViewGroup viewgroup){
            View view = null;
            if(convertview == null){
                LayoutInflater inflater = context.getLayoutInflater();
                view = inflater.inflate(R.layout.contactrow, null);

                ContactHolder holder = new ContactHolder();

                holder.txtviewfirstname = (TextView)view.findViewById(R.id.firstname);
                holder.txtviewphone = (TextView)view.findViewById(R.id.phone);
                holder.chkselected = (CheckBox)view.findViewById(R.id.check);

                setOnClickListener(new OnClickListener() {
        @Override
            public void onClick(View arg0) {
            // to open the selected file in resp

                  // do your work here
                 }});

    chkselected .setOnClickListener(new OnClickListener() {
        @Override
    public void onClick(View v) {
    // Toast.makeText(context,// "checked is clicke="+pos, 12).show();
            if (chkselected.isChecked())          
                       {            

                        // do your work here
            } else {

     // do your work here                               
            }
        }
});

            view.setTag(holder);

        }
            else{
                view = convertview;
            }
            ContactHolder holder2 = (ContactHolder) view.getTag();
            holder2.txtviewfirstname.setText(list.get(position).firstname);
            holder2.txtviewphone.setText(list.get(position).phonenumber);
            holder2.chkselected.setChecked(list.get(position).selected);
            return view;
        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:27:12.020

您可以使用 CheckedTextView，或者您可以创建一个 Checkable 布局，如下所示：

[http://tokudu.com/2010/android-checkable-linear-layout/](http://tokudu.com/2010/android-checkable-linear-layout/)

# database - 哪些数据库可以让您对数据进行操作？

> ID：12244286
> 
> 赞同：2
> 
> 时间：2012-09-03T08:22:40.160
> 
> 标签：database

我喜欢redis。它有字符串、列表、集合等等。我查了一下couchdb，认为它很相似，但事实并非如此。Redis 允许我对数据进行操作，例如 incr、推送/弹出列表、从 ? 获取列表项？到?等

还有哪些其他数据库允许我对数据进行类似的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:40:11.970

I can think of MongoDB, it supports atomic operations like inc,push,set,unset etc. on the data. A complete list is given at: [www.mongodb.org/display/DOCS/Atomic+Operations](http://www.mongodb.org/display/DOCS/Atomic+Operations) Next release (v2.2) of MongoDB has aggregation framework built into it, then you can do operations like: avg, more info at: [http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

# c++ - boost::program_options ：迭代并打印所有选项

> ID：12244289
> 
> 赞同：13
> 
> 时间：2012-09-03T08:22:56.743
> 
> 标签：c++, boost, command-line, boost-program-options

我最近开始使用`boost::program_options`，发现它非常方便。也就是说，缺少一件事我无法以一种好的方式编写自己的代码：

我想遍历 a 中收集的所有选项以`boost::program_options::variables_map`将它们输出到屏幕上。这应该成为一个方便的功能，我可以简单地调用它来列出所有设置的选项，而无需在添加新选项或为每个程序时更新函数。

我知道我可以检查和输出单个选项，但如上所述，这应该成为一个忽略实际选项的通用解决方案。我进一步知道我可以遍历 的内容，`variables_map`因为它只是一个扩展的`std::map`. 然后我可以检查存储`boost::any`变量中包含的类型`.as<>`并将其转换回适当的类型。但这意味着要编写一个长开关块，每种类型都有一个案例。这对我来说看起来不是很好的编码风格。

所以问题是，有没有更好的方法来迭代这些选项并输出它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T17:15:06.350

正如@Rost 之前提到的，访客模式在这里是一个不错的选择。要将它与 PO 一起使用，您需要为您的选项使用通知程序，这样如果通过了选项，通知程序将在您的`boost::variant`值集中填充一个条目。该套装应单独存放。之后，您可以迭代您的集合并使用`boost::apply_visitor`.

对于访客，继承自`boost::static_visitor<>`

实际上，我使访问者和通用方法的使用范围更广。

我创建了一个`class MyOption`包含描述、`boost::variant`值和其他选项（如隐式、默认等）的内容。`MyOption`我用与 PO 一样的方式填充该类型对象的向量（参见`boost::po::options_add()`参考资料）。在传递`std::string()`或`double()`为`boosts::varian`t 初始化的那一刻，您填充值的类型和其他内容，如默认、隐式。

之后我使用访问者模式来填充`boost::po::options_description`容器，因为`boost::po`需要它自己的结构来解析输入命令行。在填充过程中，我为每个选项设置了 notifyer - 如果它通过`boost::po`将自动填充我原来的`MyOption`.

接下来你需要执行`po::parse`and `po::notify`。之后，您将能够使用已`std::vector<MyOption*>`通过访问者模式填充的内容，因为它在内部包含 boost::variant。

所有这一切有什么好处——你必须在代码中只写一次你的选项类型——在填充你的`std::vector<MyOption*>`.

PS。如果使用这种方法，您将面临为没有值的选项设置通知器的问题，请参阅此主题以获取解决方案：[boost-program-options: notifier for options with no value](https://stackoverflow.com/questions/7174781/boost-program-options-notifier-for-options-with-no-value)

PS2。代码示例：

```
std::vector<MyOptionDef> options;
OptionsEasyAdd(options)
  ("opt1", double(), "description1")
  ("opt2", std::string(), "description2")
...
;
po::options_descripton boost_descriptions;
AddDescriptionAndNotifyerForBoostVisitor add_decr_visitor(boost_descriptions);
// here all notifiers will be set automatically for correct work with each options' value type
for_each(options.begin(), options.end(), boost::apply_visitor(add_descr_visitor)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T08:58:28.743

使用访问者模式是一个很好的例子。不幸的是`boost::any`，它不支持访客模式`boost::variant`。尽管如此，还是有一些第 3 方[方法](http://boost.2283326.n4.nabble.com/boost-any-visitor-of-known-types-td2632826.html)。

另一个可能的想法是使用 RTTI：创建`type_info`映射到类型处理函数函子的已知类型的映射。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T16:14:27.127

由于无论如何您都将它们打印出来，因此您可以在解析时获取原始字符串表示形式。（代码中可能存在编译器错误，我把它从我的代码库和未定义类型的一堆东西中撕下来）

```
std::vector<std::string> GetArgumentList(const std::vector<boost::program_options::option>& raw)
{
    std::vector<std::string> args;

    BOOST_FOREACH(const boost::program_options::option& option, raw)
    {
        if(option.unregistered) continue; // Skipping unknown options

        if(option.value.empty())
            args.push_back("--" + option.string_key));
        else
        {
            // this loses order of positional options
            BOOST_FOREACH(const std::string& value, option.value)
            {
                args.push_back("--" + option.string_key));
                args.push_back(value);
            }
        }
    }

    return args;
} 
```

用法：

```
boost::program_options::parsed_options parsed = boost::program_options::command_line_parser( ...

std::vector<std::string> arguments = GetArgumentList(parsed.options);
// print 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T15:33:56.707

我今天正在处理这类问题。这是一个古老的问题，但也许这会对正在寻找答案的人有所帮助。

我想出的方法是尝试一堆 as<...>() 然后忽略异常。它不是非常漂亮，但我让它工作了。

在下面的代码块中，vm 是来自 boost program_options 的 variables_map。vit 是 vm 上的迭代器，使其成为一对 std::string 和 boost::program_options::variable_value，后者是 boost::any。我可以用 vit->first 打印变量的名称，但是 vit->second 不是那么容易输出，因为它是一个 boost::any，即原始类型已经丢失。有些应该转换为 std::string，有些应该转换为 double，依此类推。

所以，要计算变量的值，我可以使用这个：

```
std::cout << vit->first << "=";
try { std::cout << vit->second.as<double>() << std::endl;
} catch(...) {/* do nothing */ }
try { std::cout << vit->second.as<int>() << std::endl;
} catch(...) {/* do nothing */ }
try { std::cout << vit->second.as<std::string>() << std::endl;
} catch(...) {/* do nothing */ }
try { std::cout << vit->second.as<bool>() << std::endl;
} catch(...) {/* do nothing */ } 
```

我只有 4 种类型用于从命令行/配置文件获取信息，如果我添加更多类型，我将不得不添加更多行。我承认这有点难看。

# android - Android SMS 未显示在列表视图中

> ID：12244291
> 
> 赞同：0
> 
> 时间：2012-09-03T08:23:03.403
> 
> 标签：android, android-listview, sms, message

在我的应用程序中，我将收到短信。我的代码正在运行，没有崩溃。但是这些消息没有显示在我的应用程序收件箱列表视图中。我不希望将消息存储在我的应用程序中。

**收件箱**

```
 public class InboxQuick extends Activity  implements OnClickListener,
  OnItemClickListener{

private ListView smsListView;
private BaseAdapter smsAdapter;
private ArrayList<String> msgList = new ArrayList<String>();
private boolean isAdHocQuestions;
// received msgs
public static Map<String, String> smsCache = new HashMap<String, String>();
public static int type;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.inboxquick);

    Button summary = (Button) findViewById(R.id.btnsummaryquick);
    summary.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent intent = new Intent("sg.edu.tp.iit.mns.SummaryQuick");
            intent.putExtra("showQuestion", true);
            startActivity(intent);
        }
    });

    isAdHocQuestions = getIntent().getBooleanExtra("type", false);

    smsListView = (ListView) findViewById(R.id.msgList);

    // buildSmsList();
    smsAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, msgList);
    smsListView.setAdapter(smsAdapter);
    smsListView.setOnItemClickListener(this);
}

private void unRegistSmsReceiver() {
    unregisterReceiver(inboxSmsReveiver);
}

private BroadcastReceiver inboxSmsReveiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        if ("android.provider.Telephony.SMS_RECEIVED".equals(intent
                .getAction())) {
            Object[] pdus = (Object[]) intent.getExtras().get("pdus");
            for (int i = 0; i < pdus.length; i++) {
                SmsMessage message = SmsMessage
                        .createFromPdu((byte[]) pdus[i]);
                String body = message.getDisplayMessageBody();
                if (body.length() != 0 && body.startsWith("##")) {
                    body = body.replaceAll("\n", "");
                    String[] answerBody = body.split("##");
                    if (answerBody.length == 3) {
                        String answer = answerBody[1];
                        String fromName = answerBody[2];
                        // if msg is send by same student (by name) then msg
                        // will not be counted
                        if (!smsCache.containsKey(fromName)) {

                            // save txt msg
                            type = "ABCD".indexOf(answer) == -1 ? 1 : 2;
                            String saveBody = answer;
                            saveNewSms(fromName, saveBody);

                            // msg display
                            String showBody = "name=" + fromName
                                    + ",answer=" + answer;
                            updateSmsList(showBody);

                        }
                    } else {
                        // TODO error msg
                    }
                } else {
                    continue;
                }
            }
        }
    }
};

private void saveNewSms(String key, String body) {
    smsCache.put(key, body);
}

private void updateSmsList(String body) {
    TextView title = (TextView) findViewById(R.id.tv);
    title.setText("Inbox(" + smsCache.size() + ")");
    msgList.add(body);
    smsAdapter.notifyDataSetChanged();
}

@Override
protected void onPause() {
    super.onPause();
    if (isAdHocQuestions)
        unRegistSmsReceiver();
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

**短信接收器**

```
 public void onReceive( Context context, Intent intent ) 
{
    // Get SMS map from Intent
    Bundle extras = intent.getExtras();

    String messages = "";

    if ( extras != null )
    {
        // Get received SMS array
        Object[] smsExtra = (Object[]) extras.get( SMS_EXTRA_NAME );

        for ( int i = 0; i < smsExtra.length; ++i )
        {
            SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

            String body = sms.getMessageBody().toString();
            String address = sms.getOriginatingAddress();           

            messages += "SMS from " + address + " :\n";     
            messages += body + "\n";

            // Here you can add any your code to work with incoming SMS         
            putSmsToDatabase( sms );
        }

        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
        SharedPreferences.Editor edit = prefs.edit();
        edit.putBoolean("need_update", true);
        edit.commit();

        // Display SMS message
        Toast.makeText(context, messages, Toast.LENGTH_SHORT).show();

    }

}

private void putSmsToDatabase( SmsMessage sms )
{
    // Create SMS row
    ContentValues values = new ContentValues();
    values.put( ADDRESS, sms.getOriginatingAddress() );
    values.put( READ, MESSAGE_IS_NOT_READ );
    values.put( SEEN, MESSAGE_IS_NOT_SEEN );
} 
```

# android - 如何在单个 AlertDialog 上添加多个按钮

> ID：12244297
> 
> 赞同：45
> 
> 时间：2012-09-03T08:23:31.500
> 
> 标签：android

我有一个按钮，单击此按钮时，我想在单个 AlertDialog 上打开多个按钮，如下所示：![在此处输入图像描述](../Images/2d5f5ee9de7547ed269ae74a8b5a622e.png)

帮帮我：

我正在使用这个....添加多个按钮

```
alertDialog.setButton(delete, "Delete", new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    }); 
```

但我发现......，将 setButton() 更改为 setButton2().. 类似...... wt xcan 为此......

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-10-29T12:47:36.467

**没有 xml**的简单解决方案：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setTitle("Title");
builder.setItems(new CharSequence[]
        {"button 1", "button 2", "button 3", "button 4"},
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                // The 'which' argument contains the index position
                // of the selected item
                switch (which) {
                    case 0:
                        Toast.makeText(context, "clicked 1", Toast.LENGTH_SHORT).show();
                        break;
                    case 1:
                        Toast.makeText(context, "clicked 2", Toast.LENGTH_SHORT).show();
                        break;
                    case 2:
                        Toast.makeText(context, "clicked 3", Toast.LENGTH_SHORT).show();
                        break;
                    case 3:
                        Toast.makeText(context, "clicked 4", Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        });
builder.create().show(); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-03T08:25:38.023

我会用我自己的自定义视图 (my_alert_dialog.xml) 来扩充 AlertDialog。

```
AlertDialog.Builder alert = new AlertDialog.Builder(this);
LayoutInflater inflater = getLayoutInflater();
//inflate view for alertdialog since we are using multiple views inside a viewgroup (root = Layout top-level) (linear, relative, framelayout etc..)
View view = inflater.inflate(R.layout.my_alert_dialog, (ViewGroup) findViewById(R.id.root)); 

Button button1 = (Button) view.findViewById(R.id.button1); // etc.. for button2,3,4.
alert.setView(view);
alert.show(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T08:27:51.047

如果您不自己创建视图，则只能创建一个带有 3 个按钮的 Alertdialog。

您可以在 xml 中创建自己的自定义视图。

但我建议你只做一个清单。

检查 [http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog) “添加列表”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:29:52.550

```
Dialog dialog = new Dialog(context);
RelativeLayout featureLayout = (RelativeLayout) View.inflate(this, R.layout.yourview, null);
dialog.setContentView(featureLayout);
dialog.show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-22T06:27:03.473

```
int item = 0;
ArrayList<String> list = new ArrayList<String>();
ArrayList<Integer> intList = new ArrayList<Integer>();
list.add("A");
list.add("B");
list.add("C");
list.add("D"); 
item = -1; 

 for (int i = 0; i < list.size(); i++) { 
    item++; 
    intList.add(i); 
  }

showRatingBarAlertDialog(intList);

private void showRatingBarAlertDialog(ArrayList<Integer> Id) {
    if (item != -1) {
        RatingFragment alertDialog = RatingFragment.instance(BaseActivity.this, Id.get(item), (ratingValue, comments) -> {
            CXLog.d(TAG, "select the rating::" + ratingValue);
            CXLog.d(TAG, "comment the feednback  " + comments);
            item--;
            showRatingBarAlertDialog(requestId);
        });
        alertDialog.show(CXBaseActivity.this.getFragmentManager(), "alertDialog");
    }
} 
```

# php - 使用一个 foreach 循环处理一组 FORM 错误？

> ID：12244307
> 
> 赞同：0
> 
> 时间：2012-09-03T08:24:08.860
> 
> 标签：php, forms, foreach

我的网站上的 PHP 表单上有一堆“选择”菜单/下拉菜单。

我想**在处理表单的其余部分之前检查每个菜单上的一个选项是否已被选中**，并想知道我是否可以使用 PHP 遍历所有字段？

从以下内容开始，但有点迷失：

```
 foreach($_POST as $key => $val){
        //$errormsg.= $key." - ".$val."\n";

             if ($_POST['FIELD_NAME_HERE']){            
                     $FIELD_NAME_HERE_field = $_POST['FIELD_NAME_HERE'];
             } else {
                     $errormsg.= "<li>Please select from the FIELD_NAME_HERE options</li>";
             }

        } 
```

这可能吗？如果是这样，我该如何实现？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:28:50.923

我认为这可能对你有用：

```
foreach($_POST as $key => $val)
{
//$errormsg.= $key." - ".$val."\n";

    if ($val)
    {            
        ${$key.'_field'} = $val;
    } 
    else 
    {
        $errormsg.= "<li>Please select from the $key options</li>";
    }
} 
```

不过，这可能不是我处理表单错误的方式。

# python - 限制模型的记录数

> ID：12244309
> 
> 赞同：3
> 
> 时间：2012-09-03T08:24:16.377
> 
> 标签：python, django

我正在编写一个 django 模型，我想限制它的记录数，而不是数据库中可以存在的记录数。例如，假设我有一台收音机，它可以有 6 个不同的可配置电台 - 限制数据库中电台数量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:39:20.263

You implement this by overriding the [`save` method](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods) and checking that for each radio there are only six stations. If the seventh station is being added, you can abort the save with an appropriate error message.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:03:32.520

在这种情况下，您可以使用单个实例（类似单音）创建一个无线电模型，并将 6 个电台创建为一对一字段。请查看可能的决定。

优点是您可以**随机访问**每个站点。不再有任何检查。

```
class RadioHasNotStationError( Exception ):
    pass

class _Station( models.Model ): # private model, so, you can't use the class anywhere else
    # fields of station

class Radio( models.Model ):
    station1 = models.OneToOneField( _Station )
    station2 = models.OneToOneField( _Station )
    station3 = models.OneToOneField( _Station )
    station4 = models.OneToOneField( _Station )
    station5 = models.OneToOneField( _Station )
    station6 = models.OneToOneField( _Station )

    def set_station( self, num, val ):
        try:
            setattr( self, 'station{0}'.format( num ), val )
        except AttributeError:
            raise RadioHasNotStationError( "The radio has not station {0}".format( num ) )

    def get_station( self, num ):
        try:
            result = getattr( self, 'station{0}'.format( num ) )
        except AttributeError:
            raise RadioHasNotStationError( "The radio has not station {0}".format( num ) )
    ...
    @staticmethod
    def get_inst():
        try:
            result = Radio.objects.select_related().get( id = 1 )
        except Radio.DoesNotExist:
            result = Radio.create()
        return result 

radio = Radio.get_inst()
radio.station1 = new_station
# ...
radio.set_station( 5, new_station2 )
# ...
station4 = radio.get_station( 4 )
# ...
radio.save() 
```

# javascript - 如何在 spry 选项卡式面板中禁用选项卡

> ID：12244315
> 
> 赞同：0
> 
> 时间：2012-09-03T08:24:26.793
> 
> 标签：javascript, jquery, dreamweaver, spry

我在 Dreamweaver 中使用 spry 选项卡式面板。我使用选项卡作为步骤，例如当用户完成选项卡 ​​1 中的过程并单击完成按钮时，选项卡 2 将打开。在这一步之前一切正常。

现在我想禁用选项卡，例如当用户出现在选项卡 1 中时，我希望禁用未来的选项卡（选项卡 2,3 和 4）。请告诉我如何做到这一点。

我做了很多研究，但我能找到的只是 jquery 选项卡，我找不到 spry 选项卡式面板的解决方案。

谢谢！

编辑.............

结果并不完全显示选项卡面板。但我希望它足以查看编码。

[http://jsfiddle.net/AU9D9/](http://jsfiddle.net/AU9D9/)

编辑............找到了答案：

在

```
<div id="TabbedPanels1" class="TabbedPanels">
    <ul class="TabbedPanelsTabGroup">
      <li class="TabbedPanelsTab" tabindex="-1" id="tab1"><b>BOOKING</b></li>
      <li class="TabbedPanelsTab" tabindex="-1" id="tab2" style="">QUOTE</li>
      <li class="TabbedPanelsTab" tabindex="-1" id="tab3">SIGNUP</li>
      <li class="TabbedPanelsTab" tabindex="-1" id="tab4">PAYMENT</li>
    </ul> 
```

在

```
<script type="text/javascript">
$(document).ready(function(){

    /*initially hide all tab except tab1*/
    $('.TabbedPanelsTabGroup').children().hide().eq(0).show();

    /*show tab2 when click the complete button by hiding all tabs*/
    $('.complete').on('click', function(){
         $('#tab2').siblings().slideUp();
        $('#tab2').slideDown();
    });
});
</script> 
```

在 JS 中：

```
TabbedPanels1.showPanel(1);

$('.TabbedPanelsTabGroup').children().hide().eq(1).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:18:23.213

只需修改我更改的区域

***HTML***

```
<div id="TabbedPanels1" class="TabbedPanels">
  <ul class="TabbedPanelsTabGroup">
    <li class="TabbedPanelsTab" id="tab1">Tab 1</li>
    <li class="TabbedPanelsTab" id="tab2">Tab 2</li>
    <li class="TabbedPanelsTab" id="tab3">Tab 3</li>
  </ul>
  <div class="TabbedPanelsContentGroup">
    <div class="TabbedPanelsContent">Content 1</div>
    <div class="TabbedPanelsContent">Content 2</div>
    <div class="TabbedPanelsContent">Content 2</div>
  </div>
  <input type="submit" value="complete" class="complete">  
</div> 
```

***JS代码***

```
$(document).ready(function(){

    /*initially hide all tab except tab1*/
    $('.TabbedPanelsTabGroup').children().hide().eq(0).show();

    /*show tab2 when click the complete button by hiding all tabs*/
    $('.complete').on('click', function(){
        $('#tab2').siblings().slideUp();
        $('#tab2').slideDown();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:53:34.687

找到答案：

在

```
<div id="TabbedPanels1" class="TabbedPanels">
    <ul class="TabbedPanelsTabGroup">
      <li class="TabbedPanelsTab" tabindex="-1" id="tab1"><b>BOOKING</b></li>
      <li class="TabbedPanelsTab" tabindex="-1" id="tab2" style="">QUOTE</li>
      <li class="TabbedPanelsTab" tabindex="-1" id="tab3">SIGNUP</li>
      <li class="TabbedPanelsTab" tabindex="-1" id="tab4">PAYMENT</li>
    </ul> 
```

在

```
<script type="text/javascript">
$(document).ready(function(){

    /*initially hide all tab except tab1*/
    $('.TabbedPanelsTabGroup').children().hide().eq(0).show();

    /*show tab2 when click the complete button by hiding all tabs*/
    $('.complete').on('click', function(){
         $('#tab2').siblings().slideUp();
        $('#tab2').slideDown();
    });
});
</script> 
```

在 JS 中：

```
TabbedPanels1.showPanel(1);

$('.TabbedPanelsTabGroup').children().hide().eq(1).show(); 
```

# javascript - 返回 JSON 中的下标

> ID：12244318
> 
> 赞同：1
> 
> 时间：2012-09-03T08:24:42.313
> 
> 标签：javascript, jquery, html, ajax, json

我正在尝试使用 jQuery 通过 AJAX 返回一个 JSON 对象，该对象可能包含需要 HTML 标签的元素。在 JSON 响应中包含 HTML 标记并不是很好的做法，即便如此，它也会在另一端进行编码，因此可能会导致更多问题。

考虑这个结果：

```
{
    "Country_Code":"EL",
    "Country_Name":"Greece",
    "Total_Value":5,
    "Formatted_Value":"5m3"
} 
```

'Formatted_Value' 需要如下所示： 5m ³。**我的问题很简单，使用返回的 JSON 对象实现此目的的最佳方法是什么？**

如果 HTML 是最好的方法，那么我将实现它，但仅作为最后的手段，因为在 JSON 请求中返回标记不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:28:15.220

您可以通过这种方式更改 Json：

```
"Formatted_Value":"5m&sup3;" 
```

使用`&sup3;`(³) 实体：[http ://code.google.com/p/doctype-mirror/wiki/Sup3CharacterEntity](http://code.google.com/p/doctype-mirror/wiki/Sup3CharacterEntity)

# extjs4 - 如何获取某种类型的所有xtypes

> ID：12244319
> 
> 赞同：2
> 
> 时间：2012-09-03T08:24:50.537
> 
> 标签：extjs4

我有一个面板，其中包含以下项目：

```
 {
                    xtype: "panel",
                    border: 0,
                    defaultType: "textfield",
                    bodyStyle: "background: transparent;",
                    defaults: {
                        anchor: "100%",
                        flex: 1
                    },
                    margin: "2 4px",
                    layout: "hbox",
                    flex: 2,
                    items: [
                        {xtype: "searchvaluefield"}, {xtype: "random" }, {xtype: "searchvaluefield"}
                    ],

                } 
```

然而，这些项目由动态数量的元素组成。特别是可以有任意数量的 xtype“searchvaluefield”。我希望得到这个面板中所有元素的数组，这些元素是 xtype“searchvaluefield”。注意我已经简化了问题，实际问题在面板中包含多个面板，这就是我希望避免循环遍历事物的原因。

如果它在这里有帮助是我正在寻找的定义的xtype：

```
 Ext.define("app.view.stock.SearchValueField", {
        extend: "Ext.form.field.Text",
        alias: "widget.searchvaluefield",
        name: "search_value_field",
        enableKeyEvents: true,
        allowBlank: false,
        initComponent: function() {
            this.callParent(arguments);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:28:55.807

您可以通过使用面板的[查询](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Panel-method-query)方法来做到这一点

`yourPanel.query('searchvaluefield');`- 返回与该 xtype 匹配的项目数组。

# php - 是否可以将图像存储在用户的浏览器上

> ID：12244320
> 
> 赞同：1
> 
> 时间：2012-09-03T08:24:51.967
> 
> 标签：php, html, caching, local-storage, browser-cache

在我的主页上有一个大尺寸的图像（~6 MB）。这是一种地图。
我想将该图像存储在用户的浏览器中，即使他们关闭浏览器或重新启动他们的电脑，有可能以某种方式吗？如果重要，该图像将在 CSS 文件中使用。
我的主机带宽很小，所以我想尽可能在​​用户的浏览器上存储该图像感谢任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:36:54.213

有几个选项，其中一些比其他选项更复杂。

最跨浏览器的方法是确保将[缓存标头设置为长缓存时间](http://www.askapache.com/htaccess/apache-speed-cache-control.html)，并保持 URL 一致（类似于@Petah 的建议）。

[一些浏览器](http://caniuse.com/#feat=fileapi)支持[HTML5 File API](http://www.w3.org/TR/FileAPI/)。如果支持，您可以使用 JavaScript 在此处存储图像。

您也可以使用[HTML5 AppCache](http://www.html5rocks.com/en/tutorials/appcache/beginner/)（同样[支持有限](http://caniuse.com/#feat=offline-apps)），但这意味着您必须小心构建应用程序的方式 - 因为 HTML 页面将被永久缓存，直到缓存清单更改。

您还可以将您的[图像序列化为数据 URL](http://en.wikipedia.org/wiki/Data_URI_scheme)（[得到很好的支持](http://caniuse.com/#feat=datauri)）并以某种方式在本地存储该字符串（localstorage、cookie），但由于 cookie 的大小限制很小，并且您不想在 HTML 中存储 6MB'cos该页面将永远加载，这可能不是一个很好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:30:34.653

您应该查找缓存最佳实践：

*   [https://developers.google.com/speed/docs/best-practices/caching](https://developers.google.com/speed/docs/best-practices/caching)
*   [http://msdn.microsoft.com/en-us/library/aa478965.aspx](http://msdn.microsoft.com/en-us/library/aa478965.aspx)
*   [http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:30:36.243

您必须为该图像设置正确的 HTTP 缓存标头。有了它们，您将告诉浏览器（以及介于两者之间的任何代理）尽可能长时间地保留该图像。但这并不能保证一旦用户拥有该图像，他将永远拥有它。它可能由于多种原因从缓存中删除（用户清除缓存，浏览器驱逐它，...）。

从这个[谷歌搜索](https://www.google.com/search?q=http%20cache%20headers)开始。如果您想要更具体的内容，您必须告诉我们您使用的是什么网络服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:40:16.533

如果您担心带宽，**为什么不将图像上传到某些图像服务**（互联网上有很多），并将其 url 包含在您的 css 中？

这些（免费）服务存在一些问题，您应该留意：

*   如果包含在其他网站（例如样式表、论坛帖子中）中，某些图像托管服务将阻止图像的呈现（通常使用带有“不允许...”文本的图像），因此您必须选择不这样做的图像那
*   如果是免费服务，图片的加载时间可能会有很大差异，这没什么大不了的，因为一旦加载到客户端浏览器中，它就会被缓存
*   服务可能暂时不可用，这可能会给您的客户带来不便

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-01-11T06:00:07.190

试试这个.. 请将 href= 更改为您的图像路径，并将 download= 更改为要保存的文件的名称，或者您可以将其留空

```
<a href="imagepath/image.jpg" download="myImage.jpg">Click here to
download image</a>
```

# php - PHP 生成 13 位时间戳，如 mktime

> ID：12244322
> 
> 赞同：4
> 
> 时间：2012-09-03T08:24:55.050
> 
> 标签：php, timestamp

> **可能重复：**
> [php 从日期字符串中获取微时间](https://stackoverflow.com/questions/10289160/php-get-microtime-from-date-string)

出于特定目的，我需要获取日期/时间的 13 位时间戳，但我找不到解决方案。

和PHP 中的**mktime**一样，我们可以得到一个 10 位的时间戳

```
echo mktime($hour, $minute, $second, $month, $day, $year); 
```

这会输出类似 1346689283 的内容。

那么 13 位时间戳呢？PHP 本身是否能够生成这样的时间戳？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T08:26:59.530

你正在寻找`microtime()`

[http://php.net/microtime](http://php.net/microtime)

如果您想从特定日期创建微时间，只需添加`000`. 因为最终，微时间只有1秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T08:27:25.537

以毫秒为单位：

```
$milliseconds = round(microtime(true) * 1000);
echo date("Y-m-d",($milliseconds/1000)); 
```

# c# - 监控企业库缓存

> ID：12244324
> 
> 赞同：1
> 
> 时间：2012-09-03T08:25:13.660
> 
> 标签：c#, enterprise-library

我想监控我的 Enterprise Libray Cache 的内存消耗、键和值。我搜索了stackoverflow并得到了一个[接近的答案](https://stackoverflow.com/questions/4209479/monitoring-enterprise-library-caching)。但我不明白我该怎么做：

> 您可以将下载的源代码作为项目引用，修改原始 CacheManager 以公开缓存实例，该实例具有名为 CurrentCacheState 的属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:30:45.870

试试这个

```
ICacheManager manager = EnterpriseLibraryContainer.Current.GetInstance<ICacheManager>("your cache name");
Cache cache = EnterpriseLibraryContainer.Current.GetInstance<Cache>("your cache name"); 
```

然后你可以用

```
cache.CurrentCacheState 
```

# mysql - 需要帮助来构建查询

> ID：12244325
> 
> 赞同：0
> 
> 时间：2012-09-03T08:25:22.843
> 
> 标签：mysql, join

我有以下两个表，并想构建一个将匹配表之间的字段的选择查询：

```
 tablename       columnname           size  order
    employee        name               25    1
    employee        sex                25    2
    employee        contactNumber      50    3
    employee        salary             25    4
    address         street             25    5
    address         country            25    6 
```

从这里我想构建查询

```
select 
        T1.name,
        T1.sex,
        T1.contactNumber,
        T1.salary,
        T2.street,
        T2.contry 
from tablename1[employee] T1,
     tablename2[address] T2 
```

如何构造上面的查询，这里的表名可以`N`也`columname`可以也可以`N`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:41:16.890

您应该在表 2 中有一个外键列，以便您可以将其连接到表 1 上的 id。此外，您正在使用的查询将获取 cartisian 产品。

```
select 
    T1.name,
    T1.sex,
    T1.contactNumber,
    T1.salary,
    T2.street,
    T2.contry 
from tablename1[employee] T1
left join tablename2[address] T2 on T2.employee_id = T1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:34:07.870

@Learner：在当前情况下，无法在表格之间进行交叉引用（谷歌：）`foreign-key`。

您想要做的是向两个将被调用的表添加一个新列`employee_id`，然后您将能够通过以下方式获取数据：

```
select T1.*, T2.*
from employee T1, address T2
where T1.employee_id = T2.employee_id 
```

# view - 主干.js 应用程序视图切换？

> ID：12244326
> 
> 赞同：0
> 
> 时间：2012-09-03T08:25:25.577
> 
> 标签：view, backbone.js, url-rewriting, switching

我正在使用 Backbone 为我的 RESTful API 编写前端......到目前为止我真的很喜欢它。学习这个框架仍然非常有趣。然而，我现在被一些事情难住了，至少对我来说，它应该是直截了当的。

我现在有一个（也是唯一的）html 页面，主应用程序所在的页面列出了一个或多个产品。而且，假设它位于此处：`http://localhost/index.html`

我希望能够从产品列表视图切换到新产品视图（通过顶部按钮上的点击事件）。而且，据我了解，我需要开始使用路由器进行切换，使用[如何使用 Backbone.js 切换视图中](http://blog.viison.com/post/11097185009/how-to-switch-views-using-backbonejs)描述的模式。

1.  我需要做什么来切换视图来实现这种行为？
2.  这看起来很古怪：

    ```
    http://localhost/index.html#product/new
    ```

    而且，由于我使用 [tornado](http://tornadoweb.org) 作为我的 API 和静态内容的 Web 服务器，我不能轻易地实现重写规则。我可能会在不久的将来改用 nginx 来处理静态内容，但我还没有。如果我要使用路由器来切换视图，例如从审查到**创建（** **CRUD**操作）时，我如何更改 URL/URI 以使其看起来更像这样 **```
    http://localhost/product/new
    ```** 

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:33:54.757

为了接收无哈希 url 更改，您的浏览器必须支持 pushstate。如果我没记错的话，如果您的浏览器不支持 pushstate，Backbone 将回退到使用散列。为了在应用程序中使用 pushstate，您将使用以下内容初始化您的路由器：

```
Backbone.history.start({pushState: true}) 
```

我喜欢@alexanderb 对视图切换的使用。只需确保在更改视图时正确处理它们。否则你会遇到一些难以调试的复杂问题。[在这里](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)阅读更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:32:09.097

是的，您需要两件事 - Router 和 ApplicationViewManager（一些类，负责更改视图）。

```
define(function () {

var ViewManager = function () {
    return {
        show: _showView
    };
};

function _showView(view) {
    if (this.currentView) {
        this.currentView.close();
    }

    this.currentView = view;
    this.currentView.render();

    $("#app").html(this.currentView.el);
}

return ViewManager; 
```

});

在路由器中，您可以执行以下操作：

```
// router
var ApplicationRouter = Backbone.Router.extend({

    initialize: function () {
        this.viewManager = new ViewManager();
    },

    routes: {
        '': 'dashboard',
        'configure/sites/:id': 'configure'
    },

    dashboard: function () {
        var app = require('./apps/DashboardApp');
        app.run(this.viewManager);
    },

    configure: function (id) {
        var app = require('./apps/ConfigureApp');
        app.run(id, this.viewManager);
    }

}); 
```

一些代码示例，您可以从此[存储库](https://github.com/alexanderbeletsky/candidate/tree/master/src/Candidate.Nancy.Selfhosted/Client/scripts)中获取。**

# java - java通过可信服务器交换公钥

> ID：12244327
> 
> 赞同：4
> 
> 时间：2012-09-03T08:25:28.083
> 
> 标签：java, encryption, cryptography, public-key-encryption

我想构建一个中继服务器，它可以安全地在 2 个对等点之间中继消息（用于 nat 遍历目的）以进行 P2P 通信。[特别是，我参考了本文档](http://www.teamviewer.com/images/pdf/TeamViewer_SecurityStatement.pdf)中图表中的步骤来交换密钥......

特别是，它说“A的公钥用B的公钥编码”，反之亦然。但是，我偶然发现了一个问题：当我将两个密钥都使用为 1024 位时，`illegalblocksizeexception`当我尝试使用公钥对另一个进行编码时，我实际上得到了一个。

阅读其他问题，一些人回答说公众可以使用 RSA 加密的数据大小是有限的。我可以知道是否有一些我可能遗漏的细节，这些细节在图表中被省略了，或者我做错了什么，试图交换密钥......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:36:57.690

RSA 公钥不能加密超过其模数位长度的数据。因此，一个 1024 位的 RSA 公钥最多只能加密 1024 位的数据。1024 位公钥文件将大于 1024 位，因为模数只是总数据的*一部分。*因此，一个 1024 位 RSA 公钥不能加密另一个 1024 位 RSA 公钥。

**更重要的是：你不应该用***任何东西*加密公钥。公钥就是这样——公开的；就其内容而言，无需保密。如果您希望“祝福”公钥适合特定用途，请使用具有某种意义的私钥对其进行签名。或者更好的是，从协议的所有参与者都信任的证书颁发机构颁发公钥证书。

# c - 使用任意源 MAC 发送 ARP 回复

> ID：12244328
> 
> 赞同：0
> 
> 时间：2012-09-03T08:25:29.380
> 
> 标签：c, networking, arp

这是我上一个问题的后续：[ARP 回复数据包不更新 Ubuntu 上的 ARP 缓存](https://stackoverflow.com/questions/11896236/arp-reply-packet-does-not-update-arp-cache-on-ubuntu)。事实证明，我的问题是我使用了任意 MAC 地址作为源 MAC（即我的网络上不存在的 MAC 地址，比如 aa:bb:cc:dd:ee:ff）。*只要我的源 MAC 与我的 NIC 的 MAC 匹配，我*就可以毫无问题地发送 ARP 回复来毒化我的缓存。我尝试手动将我的 NIC 设置为具有任意 MAC 地址，然后使用它作为我的 ARP 数据包的源 MAC 地址发送 ARP 回复 - 也有效。

我想知道是否有人知道这个的内部运作。是否有某种检查可以防止发送源 MAC 不匹配的数据包？是否检查了以太网帧的源 MAC 与 ARP 数据包的源 MAC？出于我正在运行的实验的目的，有没有办法绕过这个限制？

JY

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:01:56.783

> 可以进行各种优化以使 ARP 更有效地工作。首先，一旦机器运行了 ARP，它会缓存结果，以防它需要尽快联系同一台机器。下次它会在自己的缓存中找到映射，从而消除了第二次广播的需要。在许多情况下，主机 2（接收方）需要发回回复，迫使它也运行 ARP 来确定发送方的以太网地址。通过让发送方在 ARP 数据包中包含其 IP 到以太网的映射，可以避免这种 ARP 广播。

引自 Tanenbaum 的计算机网络，第五版 p486-487

因此，您的接收方似乎无法解析发送方的 MAC。Tanenbaum 为您提供了避免这种失败的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T20:09:38.747

> 是否有某种检查可以防止发送源 MAC 不匹配的数据包？是否检查了以太网帧的源 MAC 与 ARP 数据包的源 MAC？

你提到了 Ubuntu。在 Linux 中，您可以发送任何以太网帧（[参见](http://hacked10bits.blogspot.fi/2011/12/sending-raw-ethernet-frames-in-6-easy.html) [示例](https://gist.github.com/austinmarton/1922600)），因此在内部没有任何此类检查。但是您没有告诉您如何尝试发送欺骗性 ARP 消息；也许**您**这样做的方式是限制您对源 MAC 地址的选择。

# actionscript-3 - AS3 中每个 URLVariable 的 Content-Type

> ID：12244339
> 
> 赞同：1
> 
> 时间：2012-09-03T08:26:06.570
> 
> 标签：actionscript-3

我需要在 as3 的一个 URLRequest 中发送一些字符串变量以及二进制数据。这就是我正在做的

```
var request:URLRequest = new URLRequest(url);
var requestVars:URLVariables = new URLVariables();

requestVars.nm = p_name;
requestVars.pw = pw;
requestVars.em = email;
requestVars.md5 = MD5.hashBinary(sqlite);
requestVars.sqlite = sqlite;

request.contentType = "application/octet-stream";
request.method = URLRequestMethod.POST;
request.data = requestVars;

var urlLoader:URLLoader = new URLLoader();
urlLoader = new URLLoader();
urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
urlLoader.addEventListener(Event.COMPLETE, completionHandler);
urlLoader.load(request); 
```

它给了我服务器上的 I/O 错误。

> [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error. URL: `http://localhost:8086/reg/`" errorID=2032]

这是发送这个的正确方法吗？我们可以在 as3 中发送每个 URLVariable 的 Content-Type 吗？此外，由于它是二进制的，我的电子邮件和其他字符串参数也丢失了。

# iphone - 从 iphone 创建全景视图

> ID：12244340
> 
> 赞同：0
> 
> 时间：2012-09-03T08:26:11.477
> 
> 标签：iphone, ios, panoramas

我有一个 iPhone 应用程序要求来创建 3D 全景视图。用户可以用手机拍照并将其转换为全景视图。

这样做的好方法是什么？有任何可用的库吗？

帮助是非常可观的，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T11:47:20.320

使用 PanoramaGL 库。它非常好，而且很容易集成。你可以在上面找到，

[https://code.google.com/p/panoramagl/downloads/list](https://code.google.com/p/panoramagl/downloads/list)

# java - 在使用 Mockito 进行方法调用时拦截对象

> ID：12244341
> 
> 赞同：28
> 
> 时间：2012-09-03T08:26:12.267
> 
> 标签：java, mocking, mockito

我有一个带有 void 方法的模拟类，例如

```
public class Mock {
    public void method(String string) {
        // doSomething
    }
} 
```

我不在乎这个方法做了什么，但我想发送字符串。

这个字符串实际上是一个 JSON 格式的对象，我正在测试的方法是根据最初发送的字符串修改这个对象（假设是非常随机的）。

```
method(String json) {
    Object obj = unparse(json);
    obj.setRandomValue(random);
    String parsed = parse(obj);
    Mock.method(parsed);
} 
```

我只想看看之前为空的“randomValue”是否在方法调用之后实际上是用随机设置的。

最好的办法是拦截 json，解析它并检查对象。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-03T08:42:06.877

您正在寻找[`ArgumentCaptor`](https://static.javadoc.io/org.mockito/mockito-core/2.6.9/org/mockito/ArgumentCaptor.html)：

```
 Mock mock =  Mockito.mock(Mock.class);
  ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
  mock.method("input");
  Mockito.verify(mock).method(captor.capture());
  String actualValue = captor.getValue(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-16T09:41:32.523

还有另一种方法可以做到这一点，这里是示例：

```
Mock mock =  Mockito.mock(Mock.class);
when(mock.method(any(String.class))).thenAnswer(new Answer<Void>() {

        @Override
        public Void answer(InvocationOnMock invocation) throws Throwable {
            String actualValue = invocation.getArgumentAt(0, String.class);
            Assert.assertEquals("input", actualValue);
            return null;
        }
    });
// Test your method 
mock.method("input");
Mockito.verify(mock, Mockito.times(1)).method("input"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-17T20:29:48.070

只是完善@softarn 的答案以匹配 OP 的示例，参考[这里](http://site.mockito.org/mockito/docs/current/org/mockito/ArgumentCaptor.html)

```
Mock mock =  Mockito.mock(Mock.class);
ArgumentCaptor<String> argument = ArgumentCaptor.forClass(String.class);
verify(mock).method(argument.capture());
assertEquals("{some pretty json string}", argument.getValue()); 
```

# dynamics-crm-2011 - CRM 2011 在插件中使用前映像

> ID：12244346
> 
> 赞同：0
> 
> 时间：2012-09-03T08:26:35.403
> 
> 标签：dynamics-crm-2011

我正在考虑为我的一个插件使用前映像，这样我就可以在未更改的字段中获取值。我已经在插件注册工具中为实体注册了一个原图像，但是当我放入一些代码试图检查它时，它没有找到图像。所以我想知道我错过了什么阻止它工作。我搜索了谷歌，但真的找不到任何东西，有人能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T09:19:49.387

您是否确保代码中的字符串键与您为插件步骤注册的图像匹配？

例如。您的代码： `Entity entity = (Entity)context.PreEntityImages["Target"];` 那么您在注册图像时的实体别名和名称也应命名为 Target。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T04:39:22.827

Jimmy，假设您在创建操作期间没有触发插件，因为在创建期间预映像不可用。

这是上面彼得和罗本提到的另一种可能性。

# android - 为什么设置 layout_gravity="right" 后 button3 不移动？

> ID：12244347
> 
> 赞同：1
> 
> 时间：2012-09-03T08:26:37.940
> 
> 标签：android

以下是我的 Activity.xml 文件。我设置了按钮 layout_gravity="right"，但它不起作用，谁能告诉我为什么？谢谢提前。

```
<LinearLayout xmlns:android=" http://schemas.android.com/apk/res/android" 
 xmlns:tools=" http://schemas.android.com/tools" 
 android:layout_width="match_parent" 
 android:layout_height="match_parent" > 

<LinearLayout 
android:layout_width="match_parent" 
android:layout_height="match_parent" 
android:orientation="vertical" > 

<ImageView 
android:id="@+id/imageView1" 
android:layout_width="303dp" 
android:layout_height="wrap_content" 
android:layout_weight="0.99" 
android:src="@drawable/ic_launcher" /> 

<LinearLayout 
android:layout_width="match_parent" 
android:layout_height="wrap_content" 
android:layout_gravity="right" 
android:layout_weight="0.99" 
android:baselineAligned="_baseline" 
android:orientation="horizontal" > 

<Button 
android:id="@+id/button1" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:text="Button" /> 

<Button 
android:id="@+id/button2" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:text="Button" /> 

<Button 
android:id="@+id/button3" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:layout_gravity="right" 
android:text="Button" /> 

</LinearLayout> 

</LinearLayout> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:30:52.813

不应该，这就是原因。

仅当您的布局是垂直的时才考虑正确的 layout_gravity，在这种情况下它将具有预期的结果。

对于您要执行的操作，请在第二个和第三个按钮之间使用垫片，如下所示：

```
<View android:layout_width="0dp" 
    android:layout_height="match_parent" 
    android:layout_weight="1" /> 
```

它会填满空间并将您的按钮向右推。

# asp.net - Razor 缺少右大括号/标签

> ID：12244349
> 
> 赞同：4
> 
> 时间：2012-09-03T08:26:43.013
> 
> 标签：asp.net, asp.net-mvc-3, razor

在我看来，Razor 告诉我我的 Foreach 循环缺少一个结束大括号 ( `}`) 它还告诉我我`<div class="row">`的结束标记丢失了。

```
 @{int spanCounter = 0;}
 @foreach (var item in Model)
 {
     if(spanCounter == 0)
     {
        <div class="row">
     }
     spanCounter += item.Span;

     <div class="span@(item.Span)">
       @item.Html
     </div>

     @if(spanCounter == 12)
     {
       @spanCounter = 0

       </div>
     }    
 } 
```

我见过类似的问题，但他们似乎专注于 Razor 期望正确分层的事实。即，这是非法的：

```
if(condition)
{
    <foo>
}
else
{
    <foo>
}
</foo> 
```

**更新** 模型是 Html 内容“块”的列表

为了更清楚一点，我想在“行”中写出多个块（`<div></div>`）`<div></div>`

1.  如果 spanCounter 为 0 BEGIN 行。
2.  写入内容：`<div></div>`阻塞直到达到最大跨度宽度 (12)
3.  结束行，重置计数器，返回 1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-15T10:32:51.520

还有另一种避免重复代码的解决方法：

```
if(condition)
{
    @:<foo>
}
else
{
    @:<foo>
}
</foo> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:32:44.683

换成这样

```
@{int spanCounter = 0;}
@foreach (var item in Model)
{
  if (spanCounter == 0 || spanCounter == 12)
  {
  <div class="row">
  @spanCounter += @item.Span;
  <div class="span@(item.Span)">
      @item.Html
  </div>
  </div>
  }
  else
  {
    spanCounter += item.Span;
  <div class="span(@item.Span)">
  @item.Html
  </div>
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-09T01:51:38.003

这本身并不能解决您的代码，但它与 Razor 与右括号的混淆有关，所以我把它放在这里，以防有人真的像我一样难过。在 VS 2012 中，Razor 感到困惑，我终于在评论中缩小了一个撇号，就像这样。注意右大括号不是黄色的：

[![在此处输入图像描述](../Images/48e6cf180f757f61c7ea9cb76bc2e586.png)](https://i.stack.imgur.com/BazeU.png)

但是，如果您在评论中省略撇号，它可以正常工作：

[![在此处输入图像描述](../Images/92a8dd8d45265522a7244bd61ff5fde7.png)](https://i.stack.imgur.com/H94mR.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:41:23.163

The reason you were getting this error is that the closing tag was being conditionally rendered, therefore you could not guarantee that it would be added to the view:

The spanCounter variable is being incremented here:

```
 spanCounter += item.Span;

    <div class="span@(item.Span)">
       @item.Html
    </div> 
```

therefore, you cannot guarantee that it will meet the condition of this if statement i.e. it might be greater that 12 by this point:

```
 @if(spanCounter == 12)
    {
       </div>
    } 
```

You need to provide full mark up for elements that are being conditionally rendered. You need something like:

```
var spanCounter = 0;
<div class="row">

@foreach (var item in Model)
{
    spanCounter += item.Span;
    <div class="span@(item.Span)">
        @item.Html
    </div>
   if(spanCounter == 12)
   {
       spanCounter = 0;
   }
}

</div> 
```

# iphone - 帕克在 iPhone 3GS 上工作

> ID：12244356
> 
> 赞同：10
> 
> 时间：2012-09-03T08:27:23.957
> 
> 标签：iphone, objective-c, augmented-reality, core-motion

我一直在建立在[此处](https://developer.apple.com/library/ios/#samplecode/pARk/Introduction/Intro.html)找到的 iphone 增强现实框架之上， 但遗憾的是，在没有陀螺仪的手机（即 3GS）上它不起作用（正如它所说的那样。）

有谁知道使它与运动传感器和指南针航向一起工作的修复程序？或者会有人如此渴望为这样的框架提供代码吗？

我将需要一种方法来使矢量工作，如果不可能，我将需要推进并仅使用标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T12:20:33.467

CoreMotion 可以在 3GS 等设备中工作。但是，此 Framework pARk 适用于带有陀螺仪的设备（运行时要求：运行 iPad 2 或 iPhone 4`iOS 5.0`或更高版本）

陀螺仪是惯性导航系统 (INS) 的基本组成部分，因此如果没有它，您将严重损失精度。

查阅论文：《[苹果 iPhone 对惯性导航系统的可用性](http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=6139701)》，对比了 iPhone 3GS 和 iPhone 4 的性能。作者的结论是：

> 然而，测试表明，即使使用滤波器，使用来自普通设备的传感器构建精确的 INS 也是一项挑战，因为它们不准确且错误率高。结果表明，iPhone 4 可以在短时间内提供可容忍的结果，但随后由于错误率而导致偏差变得过高。目前我们正在实施一个多维卡尔曼滤波器来检查可能的增强。此外，我们尝试通过使用更多来自 iPhone 4 的传感器来改进系统，例如光传感器和摄像头。

我相信您应该认为您的应用程序仅支持 iPhone4 或更新版本。

# javascript - Javascript 在 IE7 和 IE8 中不起作用

> ID：12244360
> 
> 赞同：2
> 
> 时间：2012-09-03T08:27:30.267
> 
> 标签：javascript, internet-explorer-8, internet-explorer-7

我已经尝试了一切，更改并剥离了我的代码。一个简单的警报消息在 IE 7 和 IE 8 中不起作用。

这是我的代码

```
<html>
    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <title>Untitled Document</title>

        <script type="text/javascript">

            alert("hi");

        </script>

    </head>
    <body>

    <form action="#" onSubmit="test(); return false;">
        <input type="image" class="button" src="img/button-en-send-now.jpg" value="Submit"  />
    </form>

</body> 
```

我什至在提交时用按钮尝试过。当然，我为此使用了一个函数。我也做了功课，先在网上搜索。我知道 jssvr32 javascript.dll（或类似的东西）有这个 hack。它根本不起作用。

我将我的安全属性更改为可能的最低级别，它不起作用。我重新加载页面一千次，每次都清除缓存。重新安装了每个版本的浏览器，它不起作用:(

有没有人有任何线索和最近的问题？

编辑：这是完整的代码，但正如我所说，我已经尝试了几件事，这是应该只是提醒一个简单的“嗨”的代码。它不这样做-.-

您也可以使用此链接： http: [//medienportfolio.bplaced.net/ftpzugriff/pump-guide-english.html](http://medienportfolio.bplaced.net/ftpzugriff/pump-guide-english.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:34:04.203

您是否偶然地在其中包含下划线的域或主机上工作？如果是，请注意，IE 不会在带有下划线或任何 IE 发现的奇异字符的主机上执行 javascript。这也包括子域。

我们在机器名为 customer_cms.domain.com 的子域/主机名中遇到了这个问题。

# java - Drools 规则不会被解雇

> ID：12244363
> 
> 赞同：1
> 
> 时间：2012-09-03T08:27:46.090
> 
> 标签：java, drools

我对 Drools 很陌生，可能正在做一些非常愚蠢的事情。问题是由于某种原因我的 Drools 规则没有被解雇。使用的 drools 版本是 5.4

如果有帮助，当我切换回 a`StatelessKnowledgeSession`并使用 execute 方法触发规则时，规则就会触发。但是，我需要使用`AgendaFilter`来过滤规则，并且我知道尚不支持议程过滤器`StatelessKnowledgeSession`。作为第一步，我只是将会话翻转为 a `StatefulKnowledgeSession`，插入事实并触发所有规则。

不得不谦虚地说，在过去的几天里，我为此感到头疼。太糟糕了，文档对流口水不太友好（我参考了官方文档和用户指南。

下面引用了我从规则文件加载知识的规则验证器代码和 Spring 工厂 bean。我个人认为FactoryBean 没有任何问题。任何指针都会有很大帮助。

**RuleValidator.java**

```
StatefulKnowledgeSession ksession = knowledgeBase.newStatefulKnowledgeSession();
ksession.setGlobal("validationReport", validationReport);
ksession.setGlobal("simpleCache", simpleCache);
ksession.setGlobal("ruleValidator", this);

ksession.insert(allClientDetails); //this is a list of ClientDetails objects (facts)
ksession.fireAllRules();
ksession.dispose();

return validationReport; 
```

**知识库工厂.java**

```
import java.io.IOException;
import java.util.Map;

import org.apache.log4j.Logger;
import org.drools.KnowledgeBase;
import org.drools.builder.KnowledgeBuilder;
import org.drools.builder.KnowledgeBuilderFactory;
import org.drools.builder.ResourceType;
import org.drools.io.Resource;
import org.drools.io.ResourceFactory;
import org.springframework.beans.factory.FactoryBean;

public class KnowledgeBaseFactory implements FactoryBean<KnowledgeBase> {

    private static Logger logger=Logger.getLogger(KnowledgeBaseFactory.class);

    private KnowledgeBase knowledgeBase;

    public KnowledgeBaseFactory(Map<String,ResourceType> resourceMap) throws IOException {
        logger.debug("Resource Map : "+resourceMap);
        final KnowledgeBuilder knowledgeBuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
        for (Map.Entry<String, ResourceType> eachRuleResource:resourceMap.entrySet()){
            knowledgeBuilder.add(ResourceFactory.newClassPathResource(eachRuleResource.getKey()),eachRuleResource.getValue());

        }

        if (knowledgeBuilder.hasErrors()){
            logger.error(knowledgeBuilder.getErrors().toString());
            throw new RuntimeException(knowledgeBuilder.getErrors().toString());
        }
        knowledgeBase = knowledgeBuilder.newKnowledgeBase();
        knowledgeBase.addKnowledgePackages(knowledgeBuilder.getKnowledgePackages());
    }

    @Override
    public KnowledgeBase getObject() throws Exception {
        return knowledgeBase;
    }

    @Override
    public Class<?> getObjectType() {
        return knowledgeBase.getClass();
    }

    @Override
    public boolean isSingleton() {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:16:09.043

感谢@Nim 的提示

终于想通了。我应该正确阅读 API 文档。
显然，我在其中使用了`Iterable`重载`execute`方法，`StatelessKnowledgeSession`它遍历我的所有事实并将规则应用于每个事实。

但是，`StatefulKnowledgeSession`我应该事先迭代并一一插入事实。然后，我可以解雇规则。

`insert(Iterable)`中没有方法的任何原因`StatefulKnowledgeSession`。

# iphone - 在 facebook 上执行操作，例如 iphone 应用程序中的按钮

> ID：12244365
> 
> 赞同：0
> 
> 时间：2012-09-03T08:27:48.943
> 
> 标签：iphone, facebook-graph-api, facebook-like

```
NSString *likeButtonIframe = @"<iframe src=\"http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FyoghurtstoryNZ&amp;send=true&amp;width=450&amp;height=480&amp;action=like&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=true&amp;header=true\" scrolling=\"yes\" frameborder=\"0\" style=\"border:none; overflow:visible; width:292px; height:590px;\" allowTransparency=\"true\"></iframe>";
NSString *likeButtonHtml = [NSString stringWithFormat:@"<HTML><BODY>%@</BODY></HTML>", likeButtonIframe];  
[webView loadHTMLString:likeButtonHtml baseURL:[NSURL URLWithString:@""]]; 

-(void)like  {    
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Note" message:@"You are the member of Yoghurt Story." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

这是我用来显示警报以显示消息的代码。但是，不会出现警报窗口。可能是行动没有被调用。

提前致谢。

# installation - `pod install` 后，各个 Pod 目录保持为空

> ID：12244374
> 
> 赞同：4
> 
> 时间：2012-09-03T08:28:16.247
> 
> 标签：installation, maintenance, cocoapods

## 更新

我刚刚将 repo 克隆到我安装了 CocoaPods 0.14.0.rc2 的主机上，并且一切都安装得很顺利。

我会在以后添加更多依赖项时观察它是如何工作的，但现在看来，新版本的 CocoaPods 成功了……它仍然让我有点不安，不知道我可以依赖多少工具。

* * *

我开始研究 CocoaPods 来管理项目的依赖关系。

最初的开始很顺利——我正在评估它的项目是一个 iOS 静态库，它从一开始就使用 LibComponentLogging：

创建指定 LibComponentLogging-NSLog 的 Podfile 和 LibComponentLogging-pods（这还没有在 common specs 存储库中，但可以并且已经包含在本地）作为依赖项后，最初`pod install`的解决和安装依赖项并创建了工作区.

一切都很好，花花公子。

在对项目进行了一些修改之后，我在 Podfile 中添加了另外两个 pod（FMDB 和 sqlcipher——我必须为此创建一个 podspec）。

再次运行`pod install`，将指定的存储库获取到缓存中，然后离开并为 Pod 创建子目录，并且……**从来没有**用任何东西填充它们——没有发出错误。

为了排除故障，我从 Podfile 中删除了我的自定义 podspec 的 pod，然后`pod install`再次运行——结果相同。

在再次运行之前，我删除了空的`Pods/FMDB`- 和 -`Pods/sqlcipher`目录以及失败内容的所有其他残余`pod install --verbose`- 结果相同，也许这是第一次报告失败。

我在所有可能的组合中都这样做了——从字面上看……</p>

这时，我有点生气了。
我删除`Podfile.lock`了在某个时间点弹出的内容、工作区、Pods 目录批发、`~/Library/Caches/CocoaPods`、`~/.cocoapods`，以及我能想到的所有其他内容，然后重新开始。

我跑了`pod setup`，又加`LibComponentLogging-pods`回来了，（当然是在我的项目目录中）我又重新跑`pod install --verbose`了。

现在的结果不同了，即使是那些在最初尝试中完美运行的 pod 也失败了……</p>

任何对这里发生的事情的见解将不胜感激......</p>

* * *

为了更好地衡量，这是我的 Podfile、自定义规范以及最近一次“Tabula Rasa”尝试让这些东西再次工作的输出：

播客文件：

```
platform :ios, '5.1'

xcodeproj 'TestLibrary.xcodeproj'

pod 'sqlcipher', :podspec => 'sqlcipher.podspec'
pod 'FMDB', '1.5.1'
pod 'LibComponentLogging-pods'
pod 'LibComponentLogging-NSLog'

set_arc_compatibility_flag! 
```

我的自定义 sqlcipher.podspec：

```
Pod::Spec.new do |s|
  s.name         = "sqlcipher"
  s.version      = "2.0.6"
  s.summary      = "SQLCipher is an SQLite extension that provides 256 bit AES encryption of database files."
  s.description  = <<-DESC
    Pages are encrypted before being written to disk and are decrypted when read back.
    Due to the small footprint and great performance it’s ideal for protecting embedded application databases and is well suited for mobile development.
                   DESC
  s.homepage     = "http://sqlcipher.net"

  s.license      = { :type => 'MIT Style', :file => 'LICENSE' }

  s.author       = { "Steven Lombardo" => "sjlombardo@zetetic.net" }
  s.source       = { :git => "https://github.com/sqlcipher/sqlcipher.git", :tag => "v2.0.6" }

  s.ios.deployment_target = '5.0'
  s.osx.deployment_target = '10.7'

  s.source_files = 'src/**/*.{h,m}', 'ext/**/*.{h,m}'
  s.public_header_files = 'src/**/*.h'

  s.libraries = 'openssl', 'crypto'

  s.xcconfig = { 'HEADER_SEARCH_PATHS' => '$(SDKROOT)/usr/include/openssl', 'OTHER_CFLAGS' => '-DSQLITE_HAS_CODEC' }

end 
```

和输出：

```
quicksilver:TestLibrary me$ pod install --verbose

Updating Spec Repositories

Updating spec repo `lcl'
   $ /usr/bin/git pull
   Already up-to-date.

Updating spec repo `master'
   $ /usr/bin/git pull
   Already up-to-date.

Cocoapods 0.14.0.rc2 is available.

Resolving dependencies of: /Users/me/Documents/progging/TestLibrary/Podfile

Resolving dependencies for target `default' (iOS 5.1)
  - sqlcipher (from `sqlcipher.podspec')
  * Fetching podspec for `sqlcipher' from: sqlcipher.podspec
  - FMDB (= 1.5.1)
  - LibComponentLogging-pods
  - LibComponentLogging-NSLog
    - LibComponentLogging-Core (>= 1.1.6)

Installing dependencies

-> Installing FMDB (1.5.1)
-> Creating cache git repo (/Users/me/Library/Caches/CocoaPods/Git/d92b1cbf09a2c9dfcf7b19167b8f9c87d5e7b65f)
   $ /usr/bin/git clone "https://github.com/ccgus/fmdb.git" "/Users/me/Library/Caches/CocoaPods/Git/d92b1cbf09a2c9dfcf7b19167b8f9c87d5e7b65f"
   Cloning into '/Users/me/Library/Caches/CocoaPods/Git/d92b1cbf09a2c9dfcf7b19167b8f9c87d5e7b65f'...
-> Cloning git repo
   $ /usr/bin/git rev-list --max-count=1 v1.5.1
   be9cbd1bfa3bd16914cfef75cb05053b80f41b24
   $ /usr/bin/git init
   Initialized empty Git repository in /Users/me/Documents/progging/TestLibrary/Pods/FMDB/.git/
   $ /usr/bin/git remote add origin '/Users/me/Library/Caches/CocoaPods/Git/d92b1cbf09a2c9dfcf7b19167b8f9c87d5e7b65f'
   $ /usr/bin/git fetch origin tags/v1.5.1
   From /Users/me/Library/Caches/CocoaPods/Git/d92b1cbf09a2c9dfcf7b19167b8f9c87d5e7b65f
    * tag               v1.5.1     -> FETCH_HEAD
   $ /usr/bin/git reset --hard FETCH_HEAD
   HEAD is now at be9cbd1 Merge pull request #37 from ivira/master
   $ /usr/bin/git checkout -b activated-pod-commit
   Switched to a new branch 'activated-pod-commit'
-> Installing documentation
[!] Skipping documentation generation because appledoc can't be found.

-> Installing LibComponentLogging-Core (1.3.1)
-> Creating cache git repo (/Users/me/Library/Caches/CocoaPods/Git/a97552cd1e0755d054148dacafea69df60161862)
   $ /usr/bin/git clone "https://github.com/aharren/LibComponentLogging-Core.git" "/Users/me/Library/Caches/CocoaPods/Git/a97552cd1e0755d054148dacafea69df60161862"
   Cloning into '/Users/me/Library/Caches/CocoaPods/Git/a97552cd1e0755d054148dacafea69df60161862'...
-> Cloning git repo
   $ /usr/bin/git rev-list --max-count=1 1.3.1
   17e294028794f7e30a3857934c8534454427bdcd
   $ /usr/bin/git init
   Initialized empty Git repository in /Users/me/Documents/progging/TestLibrary/Pods/LibComponentLogging-Core/.git/
   $ /usr/bin/git remote add origin '/Users/me/Library/Caches/CocoaPods/Git/a97552cd1e0755d054148dacafea69df60161862'
   $ /usr/bin/git fetch origin tags/1.3.1
   From /Users/me/Library/Caches/CocoaPods/Git/a97552cd1e0755d054148dacafea69df60161862
    * tag               1.3.1      -> FETCH_HEAD
   $ /usr/bin/git reset --hard FETCH_HEAD
   HEAD is now at 17e2940 LibComponentLogging-Core-1.3.1
   $ /usr/bin/git checkout -b activated-pod-commit
   Switched to a new branch 'activated-pod-commit'
-> Installing documentation
[!] Skipping documentation generation because appledoc can't be found.

-> Installing LibComponentLogging-NSLog (1.0.4)
-> Creating cache git repo (/Users/me/Library/Caches/CocoaPods/Git/648148f5d0724fa902677dba515ff302e017f305)
   $ /usr/bin/git clone "https://github.com/aharren/LibComponentLogging-NSLog.git" "/Users/me/Library/Caches/CocoaPods/Git/648148f5d0724fa902677dba515ff302e017f305"
   Cloning into '/Users/me/Library/Caches/CocoaPods/Git/648148f5d0724fa902677dba515ff302e017f305'...
-> Cloning git repo
   $ /usr/bin/git rev-list --max-count=1 1.0.4
   9ea9494870c178972e4af27471a10337d176dd77
   $ /usr/bin/git init
   Initialized empty Git repository in /Users/me/Documents/progging/TestLibrary/Pods/LibComponentLogging-NSLog/.git/
   $ /usr/bin/git remote add origin '/Users/me/Library/Caches/CocoaPods/Git/648148f5d0724fa902677dba515ff302e017f305'
   $ /usr/bin/git fetch origin tags/1.0.4
   From /Users/me/Library/Caches/CocoaPods/Git/648148f5d0724fa902677dba515ff302e017f305
    * tag               1.0.4      -> FETCH_HEAD
   $ /usr/bin/git reset --hard FETCH_HEAD
   HEAD is now at 9ea9494 add support for non-clang compilers
   $ /usr/bin/git checkout -b activated-pod-commit
   Switched to a new branch 'activated-pod-commit'
-> Installing documentation
[!] Skipping documentation generation because appledoc can't be found.

-> Installing LibComponentLogging-pods (0.0.1)
-> Creating cache git repo (/Users/me/Library/Caches/CocoaPods/Git/5798a4173d672827fae705b4902b4c1fa2b4439b)
   $ /usr/bin/git clone "https://github.com/aharren/LibComponentLogging-pods.git" "/Users/me/Library/Caches/CocoaPods/Git/5798a4173d672827fae705b4902b4c1fa2b4439b"
   Cloning into '/Users/me/Library/Caches/CocoaPods/Git/5798a4173d672827fae705b4902b4c1fa2b4439b'...
-> Cloning git repo
   $ /usr/bin/git rev-list --max-count=1 0.0.1
   440e1f3df8e06b6197846f4825bd720539653541
   $ /usr/bin/git init
   Initialized empty Git repository in /Users/me/Documents/progging/TestLibrary/Pods/LibComponentLogging-pods/.git/
   $ /usr/bin/git remote add origin '/Users/me/Library/Caches/CocoaPods/Git/5798a4173d672827fae705b4902b4c1fa2b4439b'
   $ /usr/bin/git fetch origin tags/0.0.1
   From /Users/me/Library/Caches/CocoaPods/Git/5798a4173d672827fae705b4902b4c1fa2b4439b
    * tag               0.0.1      -> FETCH_HEAD
   $ /usr/bin/git reset --hard FETCH_HEAD
   HEAD is now at 440e1f3 add lcl_pods.h
   $ /usr/bin/git checkout -b activated-pod-commit
   Switched to a new branch 'activated-pod-commit'
-> Installing documentation
[!] Skipping documentation generation because appledoc can't be found.

-> Installing sqlcipher (2.0.6)
-> Creating cache git repo (/Users/me/Library/Caches/CocoaPods/Git/98d25df407a9bd30ae63045cf62ee311541f4fb0)
   $ /usr/bin/git clone "https://github.com/sqlcipher/sqlcipher.git" "/Users/me/Library/Caches/CocoaPods/Git/98d25df407a9bd30ae63045cf62ee311541f4fb0"
   Cloning into '/Users/me/Library/Caches/CocoaPods/Git/98d25df407a9bd30ae63045cf62ee311541f4fb0'...
-> Cloning git repo
   $ /usr/bin/git rev-list --max-count=1 v2.0.6
   6dbdd4663cfed9d54803d22b1bdce8b9884e1f6b
   $ /usr/bin/git init
   Initialized empty Git repository in /Users/me/Documents/progging/TestLibrary/Pods/sqlcipher/.git/
   $ /usr/bin/git remote add origin '/Users/me/Library/Caches/CocoaPods/Git/98d25df407a9bd30ae63045cf62ee311541f4fb0'
   $ /usr/bin/git fetch origin tags/v2.0.6
   From /Users/me/Library/Caches/CocoaPods/Git/98d25df407a9bd30ae63045cf62ee311541f4fb0
    * tag               v2.0.6     -> FETCH_HEAD
   $ /usr/bin/git reset --hard FETCH_HEAD
   HEAD is now at 6dbdd46 bump to 2.0.6
   $ /usr/bin/git checkout -b activated-pod-commit
   Switched to a new branch 'activated-pod-commit'
-> Installing documentation
[!] Skipping documentation generation because appledoc can't be found.

Generating support files

- Generating xcconfig file at `/Users/me/Documents/progging/TestLibrary/Pods/Pods.xcconfig'
- Generating prefix header at `/Users/me/Documents/progging/TestLibrary/Pods/Pods-prefix.pch'
- Generating copy resources script at `/Users/me/Documents/progging/TestLibrary/Pods/Pods-resources.sh'
- Running post install hooks

-> Creating LibComponentLogging configuration
   Creating folder '/Users/me/Documents/progging/TestLibrary/Pods/LibComponentLogging-pods'
   Creating folder '/Users/me/Documents/progging/TestLibrary/Pods/Headers/LibComponentLogging-pods'
   Creating folder '/Users/me/Documents/progging/TestLibrary/Pods/BuildHeaders/LibComponentLogging-pods'
   Adding suffix '.pods.main' to includes in file '/Users/me/Documents/progging/TestLibrary/Pods/LibComponentLogging-Core/lcl.h'

          ――― MARKDOWN TEMPLATE ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

### Report

* What did you do?

* What did you expect to happen?

* What happened instead?

### Stack

```
   CocoaPods : 0.13.0
        Ruby : ruby 1.8.7 (2011-12-28 patchlevel 357) [universal-darwin11.0]
    RubyGems : 1.8.24
        Host : Mac OS X 10.7.4 (11E53)
       Xcode : 4.4.1 (4F1003)
Ruby lib dir : /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib
Repositories : lcl - git://github.com/aharren/LibComponentLogging-CocoaPods-Specs.git @ d18c0de80368283253d5cf3b6faca73eadf4e58f
               master - https://github.com/CocoaPods/Specs.git @ 067e6c0ca9da516ef8807b363643150dc0124c16
```

### Podfile

```ruby
          platform :ios, '5.1'

xcodeproj 'TestLibrary.xcodeproj'

pod 'sqlcipher', :podspec => 'sqlcipher.podspec'
pod 'FMDB', '1.5.1'
pod 'LibComponentLogging-pods'
pod 'LibComponentLogging-NSLog'

set_arc_compatibility_flag!
```

### Error

```
No such file or directory - /Users/me/Documents/progging/TestLibrary/Pods/LibComponentLogging-Core/lcl.h
/Users/me/.cocoapods/lcl/LibComponentLogging-pods/0.0.1/LibComponentLogging-pods.podspec:195:in `read'
/Users/me/.cocoapods/lcl/LibComponentLogging-pods/0.0.1/LibComponentLogging-pods.podspec:195:in `add_suffix_to_includes'
/Users/me/.cocoapods/lcl/LibComponentLogging-pods/0.0.1/LibComponentLogging-pods.podspec:126:in `prepare_configure'
/Users/me/.cocoapods/lcl/LibComponentLogging-pods/0.0.1/LibComponentLogging-pods.podspec:62:in `configure_logger'
/Users/me/.cocoapods/lcl/LibComponentLogging-NSLog/1.0.4/LibComponentLogging-NSLog.podspec:30:in `post_install'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/lib/cocoapods/installer.rb:139:in `run_post_install_hooks'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/lib/cocoapods/installer.rb:138:in `each'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/lib/cocoapods/installer.rb:138:in `run_post_install_hooks'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/lib/cocoapods/installer.rb:137:in `each'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/lib/cocoapods/installer.rb:137:in `run_post_install_hooks'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/lib/cocoapods/installer.rb:126:in `install!'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/lib/cocoapods/command/install.rb:53:in `run'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/lib/cocoapods/command.rb:72:in `run'
/Library/Ruby/Gems/1.8/gems/cocoapods-0.13.0/bin/pod:12
/usr/bin/pod:23:in `load'
/usr/bin/pod:23
```

――― TEMPLATE END ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

[!] Oh no, an error occurred.

Search for existing github issues similar to yours:
https://github.com/CocoaPods/CocoaPods/issues/search?q=No+such+file+or+directory+-+%2FUsers%2Fme%2FDocuments%2Fprogging%2FTestLibrary%2FPods%2FLibComponentLogging-Core%2Flcl.h

If none exists, create a ticket, with the template displayed above, on:
https://github.com/CocoaPods/CocoaPods/issues/new

Don't forget to anonymize any private data!

quicksilver:TestLibrary me$ 
```

# android - 如何覆盖 Android WebView 以使用自定义 Accept-Language 标头？

> ID：12244375
> 
> 赞同：4
> 
> 时间：2012-09-03T08:28:15.847
> 
> 标签：android, android-webview

是否可以覆盖 Android WebView 以使用自定义 Accept-Language 标头？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T08:44:02.530

当前的实现`WebView`已经允许您使用以下语法添加标头：

```
Map<String, String> headers = new HashMap<String, String>();
headers.put("Accept-Language", "fr_fr");
mWebView.loadUrl("http://developer.android.com", headers); 
```

有关[`WebView.loadUrl()`](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String,%20java.util.Map%3Cjava.lang.String,%20java.lang.String%3E%29)更多信息，请参阅。

# php - 在 Symfony 2.0 中使用 optgroup 进行选择

> ID：12244376
> 
> 赞同：20
> 
> 时间：2012-09-03T08:28:25.467
> 
> 标签：php, forms, symfony, html-select, optgroup

在**Symfony2**中，`select`html 组件被渲染为一个`ChoiceType`对象，它确实也用于`checkboxes`和`radiobuttons`。

有人*真的*知道**如何使用 Symfony2 中的 optgroup 选项呈现选择**吗？

为了完整起见，我在这里报告一个带有**optgroup标签的***选择*示例（来自[w3cschools](http://www.w3schools.com/tags/tag_optgroup.asp)的示例）：

 **```
<select>
  <optgroup label="Swedish Cars">
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
  </optgroup>
  <optgroup label="German Cars">
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
  </optgroup>
</select> 
```

此外，请注意这里有一个类似的帖子[，](https://stackoverflow.com/questions/10351423/symfony-2-form-entity-type-how-to-format-the-generated-drop-down)但答案并不令人信服。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-03T09:03:19.023

做这个：

```
$car_choices = array(
    'Swedish Cars' => array(
        'volvo' => 'Volvo',
        'saab' => 'Saab',
    ),
    'German Cars' => array(
        'mercedes' => 'Mercedes',
        'audi' => 'Audi'
    )
);

$form = $this->createFormBuilder()
        ->add('car', 'choice', array(
            'label' => 'Choose your car',
            'choices' => $car_choices,
            ))
        ->getForm(); 
```

适用于 Symfony 2.0.x

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-24T09:03:50.960

这取决于您的实体是如何定义的以及您如何对实体进行分组。假设分组是在给定对象中的一个参数的情况下完成的，比如说“品牌”。你可以做：

```
$builder->add('cars', null, array(
  'group_by'=> 'brand'
)); 
```**

# tridion - ExecuteEntityQuery 和 CustomMeta

> ID：12244377
> 
> 赞同：0
> 
> 时间：2012-09-03T08:28:26.480
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在尝试使用 ExecuteEntityQuery 方法检索组件列表（包括元数据）。

不幸的是，CustomMeta 属性永远不会被填充，因此我要遍历列表中的所有项目并检索每个项目的 CustomMeta - 严重的性能问题。

有没有一种方法可以检索组件列表的 CustomMeta 而无需为列表中的每个项目点击数据库？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:32:41.067

正如[文档中的这个页面](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_0E815EA0BAF543DB99BAC0C7E98BE26A)所说`ExecuteEntityQuery`：

> 返回与查询匹配的对象数组。如果`executeQuery`您需要直接访问项目的属性，请使用。

要减少数据库命中次数，还可以考虑使用 Tridion 的对象缓存。您可以将数量惊人的元数据放入常规大小的缓存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:01:48.510

我的猜测是，为了提高效率，自定义元数据不会自动填充。另一种方法是使用内容交付 Web 服务 (OData)。这确实允许您在一个查询中获取一系列项目的所有 CustomMeta。

一个简单的示例，它为您提供所有组件，包括给定出版物中的自定义元数据：

```
http://mysite/odata.svc/Publications(30)/Components?$expand=CustomMeta 
```

# android - Android MapView 缩放时出现内存不足错误

> ID：12244383
> 
> 赞同：3
> 
> 时间：2012-09-03T08:28:50.350
> 
> 标签：android, android-mapview, out-of-memory

我有一个应用程序使用地图活动作为整个应用程序的一部分，当我放大和缩小时出现内存不足错误。我只有一个叠加项目。知道如何解决这个问题吗？这是我下面的xml，它非常嵌套。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:id="@+id/contact_layout" >

<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:apiKey="..."
    android:clickable="true" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="90dp"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal"
    android:paddingBottom="20dp"
    android:paddingLeft="15dp"
    android:paddingRight="15dp"
    android:paddingTop="20dp"
    android:weightSum="100" >

    <ImageView
        android:id="@+id/phone_icon"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:adjustViewBounds="true"
        android:src="@drawable/phone_icon" />

    <ImageView
        android:id="@+id/email_icon"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:adjustViewBounds="true"
        android:src="@drawable/mail_icon" />

    <ImageView
        android:id="@+id/bus_icon"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:adjustViewBounds="true"
        android:src="@drawable/bus_icon" />

    <ImageView
        android:id="@+id/twitter_icon"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:adjustViewBounds="true"
        android:src="@drawable/twitter_icon" />

    <ImageView
        android:id="@+id/facebook_icon"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:adjustViewBounds="true"
        android:src="@drawable/facebook_icon" />
</LinearLayout>

<RelativeLayout
    android:id="@+id/navigation_bar_without_back"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:layout_alignParentTop="true"
    android:background="@drawable/header_navigation"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/anatolia_logo"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginBottom="-10dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="-10dp"
        android:adjustViewBounds="true"
        android:src="@drawable/..." />

    <ImageView
        android:id="@+id/call_button_without_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dp"
        android:adjustViewBounds="true"
        android:src="@drawable/call_button" />
</RelativeLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:layout_below="@+id/navigation_bar_without_back"
    android:background="@drawable/contact_layout_background" >

    <WebView
        android:id="@+id/info_field"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout>

</RelativeLayout> 
```

**LogCat 跟踪**

```
09-03 11:43:20.752: E/AndroidRuntime(930): FATAL EXCEPTION: main
09-03 11:43:20.752: E/AndroidRuntime(930): java.lang.OutOfMemoryError: bitmap size   exceeds VM budget
09-03 11:43:20.752: E/AndroidRuntime(930):  at   android.graphics.Bitmap.nativeCreate(Native Method) 
09-03 11:43:20.752: E/AndroidRuntime(930):  at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
09-03 11:43:20.752: E/AndroidRuntime(930):  at     com.google.android.maps.ZoomHelper.createSnapshot(ZoomHelper.java:444)
09-03 11:43:20.752: E/AndroidRuntime(930):  at com.google.android.maps.ZoomHelper.doZoom(ZoomHelper.java:151)
09-03 11:43:20.752: E/AndroidRuntime(930):  at com.google.android.maps.ZoomHelper.doZoom(ZoomHelper.java:140)
09-03 11:43:20.752: E/AndroidRuntime(930):  at com.google.android.maps.MapView.doZoom(MapView.java:1517)
09-03 11:43:20.752: E/AndroidRuntime(930):  at com.google.android.maps.MapView.doZoom(MapView.java:1526)
09-03 11:43:20.752: E/AndroidRuntime(930):  at com.google.android.maps.MapView$6.onZoom(MapView.java:1481)
09-03 11:43:20.752: E/AndroidRuntime(930):  at android.widget.ZoomButtonsController$4.onClick(ZoomButtonsController.java:274)
09-03 11:43:20.752: E/AndroidRuntime(930):  at android.view.View.performClick(View.java:2485)
09-03 11:43:20.752: E/AndroidRuntime(930):  at andrd.view.View$PerformClick.run(View.java:9080)
09-03 11:43:20.752: E/AndroidRuntime(930):  at android.os.Handler.handleCallback(Handler.java:587)
09-03 11:43:20.752: E/AndroidRuntime(930):  at andrid.os.Handler.dispatchMessage(Handler.java:92)
09-03 11:43:20.752: E/AndroidRuntime(930):  at android.os.Looper.loop(Looper.java:130)
09-03 11:43:20.752: E/AndroidRuntime(930):  at android.app.ActivityThread.main(ActivityThread.java:3683)
     09-03 11:43:20.752: E/AndroidRuntime(930):     at java.lang.reflect.Method.invokeNative(Native Method)
    09-03 11:43:20.752: E/AndroidRuntime(930):  at java.lang.reflect.Method.invoke(Method.java:507)
    09-03 11:43:20.752: E/AndroidRuntime(930):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    09-03 11:43:20.752: E/AndroidRuntime(930):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    09-03 11:43:20.752: E/AndroidRuntime(930):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:37:17.913

有很多 ImageViews 嵌套在你的布局中。不幸的是，图像加载和位图可能是 PITA。已知 ImageViews 会导致 OutOfMemoryErrors。特别是当他们从代码中填充位图时。

要解决此问题，请移除 ImageViews 并检查错误是否仍然存在。

如果它解决了错误，请重新考虑在 MapView 上显示图像的策略。同样使用[密度相关的](https://developer.android.com/guide/practices/screens_support.html)资源可能有助于在一定程度上解决问题。

编辑：看到你的堆栈跟踪后，上面写着：“位图超出了 VM 预算”，我确信你的图像加载策略需要改进。

# ios - 带有标题的 UISplitViewController

> ID：12244384
> 
> 赞同：0
> 
> 时间：2012-09-03T08:28:55.073
> 
> 标签：ios, ipad, uisplitviewcontroller, uisplitview

我需要在 UISplitViewController 的视图顶部添加 UIScrollView （所以它对于这个控制器中的所有拆分视图都是通用的）。起初我想 [self.mySplitViewController.view addSubview:self.myScrollView]。但可能存在更好的解决方案。

**更新**

![在此处输入图像描述](../Images/3418d45d9cca62dcbe9406d106583131.png)

先感谢您。

# visual-studio - Visual Studio 设置文件部署路径

> ID：12244385
> 
> 赞同：1
> 
> 时间：2012-09-03T08:28:55.157
> 
> 标签：visual-studio, file, deployment, compact-framework

我有一个 .net 紧凑的框架项目，其中包含许多不同的文件（DLL、图像、...）

我需要将这些文件直接复制到设备上的部署文件夹中。由于在一个项目中包含所有这些文件非常令人困惑，我想将它们分成不同的子文件夹。

问题是，项目子文件夹中的文件也被复制到设备上的子文件夹中。

是否可以将这些文件放在项目内的子文件夹中，并指定部署路径，以便将它们复制到“deployment-root-folder”？

谢谢！

* * *

## 编辑

谢谢，但问题不在于使用安装程序时如何以正确的方式发布文件。调试时如何在正确的目录中获取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:45:41.317

这听起来至少类似于 Windows CE 上基于 Web 服务器的应用程序，其中我有大量需要部署的 aspx、图像、CSS、JS、CS 等文件，但我不一定想弄乱我的调试项目难以找到 CS 文件的结构。

我的解决方案是创建一个单独的项目（我称之为“静态内容”，但名称并不重要），其中包含所有这些部署项，并将其输出设置为与我正在调试的项目相同。手动设置代码应用程序的项目依赖项以依赖于静态文件应用程序，这将强制 Studio 在您调试时部署它。

![在此处输入图像描述](../Images/ceaa8a76d2727df86ded0dc0dcda5828.png)

这使您至少可以折叠“静态文件”项目以帮助保持树可浏览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:53:49.943

不幸的是，答案是否定的。好吧，至少不容易。

您可以在部署/调试时为每个项目指定目标根文件夹，但 Visual Studio 不提供对单个文件目标的内置支持。

如果您真的想获得您正在寻找的结果，您可能会编写一个实用程序来在部署后移动文件，然后作为构建后步骤的一部分启动该实用程序。这可能会产生副作用，因为您正在移动到 Visual Studio 提供的功能之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T22:16:54.727

将它们复制到您要在 exe 项目中使用的目录结构中。

在部署项目中，您只需模仿您在 exe 项目中建立的模式。

![在此处输入图像描述](../Images/df5213e613a3628eb8a4ade9d2347775.png)

# java - 获取 JTextPane 中选定文本的字体大小

> ID：12244389
> 
> 赞同：0
> 
> 时间：2012-09-03T08:29:03.933
> 
> 标签：java, swing, fonts, jcombobox, jtextpane

在我的文本编辑器中，我提供了通过 JComboBox 和 StyledEditorKit 更改文本的选项。唯一的问题是，一旦我在组合框中选择了一个大小（它会更改选定的文本），然后选择新的文本选择，组合框中的值与之前的选择保持一致，而不管实际尺寸。

我看到了[这篇](https://stackoverflow.com/questions/5021662/get-font-of-selected-text-in-jeditorpane)文章，但我真的不明白给定的答案。

这是我用来更改字体的代码

```
JComboBox<?> fontSizeCombo = new JComboBox<Object>(sizes.toArray());
fontSizeCombo.setFocusable(false);
fontSizeCombo.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
          new StyledEditorKit.FontSizeAction("myaction-", (int) ((JComboBox<?>) e.getSource()).getSelectedItem()).actionPerformed(e);
      }
}); 
```

"sizes" 只包含从 8 到 112 的整数，增量为 4。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:50:09.583

提到的帖子意味着您应该将 CaretListener 添加到您的编辑器中。当Sselection改变了插入符号时，更新并调用侦听器。然后更新套件的 InputAttributes。您可以访问属性并获取当前插入符号位置（选择）的字体大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:46:54.613

将插入符号侦听器添加到为组合框调用更新的文本窗格。

# c# - 如何正确获取 WinForms Button 控件以绘制自定义文本

> ID：12244392
> 
> 赞同：4
> 
> 时间：2012-09-03T08:29:22.773
> 
> 标签：c#, winforms, onpaint

我正在尝试创建一个自定义 winforms 按钮控件，该控件将允许通过旋转属性旋转按钮文本。我大部分时间都在工作，但它非常笨拙，我想知道正确的方法。

特别是现在文本重绘的行为很奇怪。如果控件被移出屏幕，然后缓慢地移回文本上，则文本要么变得非常混乱（例如只绘制了一半），要么完全消失，直到鼠标悬停。显然我做错了什么，但无法弄清楚是什么。

我从按钮控件继承并覆盖其 OnPaint 方法。

这是代码：

```
public class RotateButton : Button
{
    private string text;
    private bool painting = false;

    public enum RotationType { None, Right, Flip, Left}

    [DefaultValue(RotationType.None), Category("Appearance"), Description("Rotates Button Text")]
    public RotationType Rotation { get; set; }

    public override string Text
    {
        get
        {
            if (!painting)
                return text;
            else
                return "";
        }
        set
        {
            text = value;
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        painting = true;

        base.OnPaint(e);

        StringFormat format = new StringFormat();
        Int32 lNum = (Int32)Math.Log((Double)this.TextAlign, 2);
        format.LineAlignment = (StringAlignment)(lNum / 4);
        format.Alignment = (StringAlignment)(lNum % 4);

        int padding = 2;

        SizeF txt = e.Graphics.MeasureString(Text, this.Font);
        SizeF sz = e.Graphics.VisibleClipBounds.Size;

        if (Rotation == RotationType.Right)
        {
            //90 degrees
            e.Graphics.TranslateTransform(sz.Width, 0);
            e.Graphics.RotateTransform(90);
            e.Graphics.DrawString(text, this.Font, Brushes.Black, new RectangleF(padding, padding, sz.Height - padding, sz.Width - padding), format);
            e.Graphics.ResetTransform();
        }
        else if (Rotation == RotationType.Flip)
        {
            //180 degrees
            e.Graphics.TranslateTransform(sz.Width, sz.Height);
            e.Graphics.RotateTransform(180);
            e.Graphics.DrawString(text, this.Font, Brushes.Black, new RectangleF(padding, padding, sz.Width - padding, sz.Height - padding), format);
            e.Graphics.ResetTransform();
        }
        else if (Rotation == RotationType.Left)
        {
            //270 degrees
            e.Graphics.TranslateTransform(0, sz.Height);
            e.Graphics.RotateTransform(270);
            e.Graphics.DrawString(text, this.Font, Brushes.Black, new RectangleF(padding, padding, sz.Height - padding, sz.Width - padding), format);
            e.Graphics.ResetTransform();
        }
        else
        {
            //0 = 360 degrees
            e.Graphics.TranslateTransform(0, 0);
            e.Graphics.RotateTransform(0);
            e.Graphics.DrawString(text, this.Font, Brushes.Black, new RectangleF(padding, padding, sz.Width - padding, sz.Height - padding), format);
            e.Graphics.ResetTransform();
        }

        painting = false;
    }
} 
```

所以我的主要问题是如何解决文本重绘问题？

此外，我对上述代码还有一些其他问题/评论：

1.  起初，文本显示了两次，一次在默认位置，一次在旋转位置。我认为这是因为在`base.OnPaint`调用该方法时首先绘制文本。如果是这种情况，我该如何防止最初绘制文本？

    我的解决方案是在使用布尔值调用之前覆盖文本字符串并清除它`base.OnPaint`，这不是我特别满意的解决方案。

2.  我应该在最后处理 PaintEventArgs`e.dispose`吗？我想我不确定 PaintEventArgs 对象是如何处理的。

提前致谢！

附言。这是我的第一篇文章/问题，所以如果我无意中忽略了一些礼仪或规则，我提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:40:36.203

1.  VisibleClipBounds 返回需要重新绘制的区域，例如，如果需要重新绘制一半按钮（覆盖一半按钮的顶部窗体已关闭）VisibleClipBounds 仅返回该区域。所以你不能用它来绘制居中的文本。SizeF sz = new SizeF(宽度, 高度); 应该注意重绘问题。

2.  按钮不支持所有者绘图，您的方式似乎很好。

3.  作为一条规则，您不应该释放尚未创建的对象，并且可释放事件参数由创建它们的逻辑处理（并首先称为 On...），因此不必担心释放 PaintEventArgs。

欢迎来到堆栈溢出 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:22:08.027

`if... else...`首先，我通过用a替换了您的代码`switch... case...`，并将在每种情况下都相同的两行移出它，从而稍微重构了您的代码。但这只是为了使其更具可读性：

```
 protected override void OnPaint(PaintEventArgs e)
    {
        painting = true;

        base.OnPaint(e);

        StringFormat format = new StringFormat();
        Int32 lNum = (Int32)Math.Log((Double)this.TextAlign, 2);
        format.LineAlignment = (StringAlignment)(lNum / 4);
        format.Alignment = (StringAlignment)(lNum % 4);

        int padding = 2;

        SizeF txt = e.Graphics.MeasureString(Text, this.Font);
        SizeF sz = e.Graphics.VisibleClipBounds.Size;
        switch (Rotation)
        {
            case RotationType.Right:  //90 degrees
                {
                    e.Graphics.TranslateTransform(sz.Width, 0);
                    e.Graphics.RotateTransform(90);
                    break;
                }
            case RotationType.Flip: //180 degrees
                {
                    e.Graphics.TranslateTransform(sz.Width, sz.Height);
                    e.Graphics.RotateTransform(180);
                    break;
                }
            case RotationType.Left: //270 degrees
                {
                    e.Graphics.TranslateTransform(0, sz.Height);
                    e.Graphics.RotateTransform(270);
                    break;
                }
            default: //0 = 360 degrees
                {
                    e.Graphics.TranslateTransform(0, 0);
                    e.Graphics.RotateTransform(0);
                    break;
                }
        }

        e.Graphics.DrawString(text, this.Font, Brushes.Black, new RectangleF(padding, padding, sz.Height - padding, sz.Width - padding), format);
        e.Graphics.ResetTransform();

        painting = false;
    } 
```

关于您的主要问题：我通过创建 a`RotateButton`并将旋转类型设置为`Right`. 我可以确认您描述的行为。调试`OnPaint`很困难，因为每次中断后恢复程序时，表单都会重新获得焦点，从而触发新`Paint`事件。我终于通过在方法的末尾添加两行来追踪这种行为的原因：

```
System.Diagnostics.Debug.WriteLine(sz.Width.ToString());
System.Diagnostics.Debug.WriteLine(sz.Height.ToString()); 
```

这会将宽度和高度的值写入 Visual Studio 的输出窗口。在那里我可以看到，当控件移回屏幕上时，`sz.Width`它的值设置为 1。所以你的文本被绘制在控件上，但是在一个太小的矩形中，因此它不可见。这意味着您不能使用`e.Graphics.VisibleClipBounds.Size`，您必须自己计算尺寸（如果您使用，请小心作为参数`MeasureString`传递，而不是，如您的示例代码中那样）。`text``Text`

关于您的其他问题：

1.  我认为您的解决方案还可以。您可以考虑`text`在调用之前只设置一个空字符串`base.OnPaint()`，然后再恢复正确的值。
2.  不，绝对不是。`PaintEventArgs`对象是在方法之外的某个地方创建的，`OnPaint`处置（如有必要）应该在那里处理 - 只有对象的“创建者”知道如何以及**何时**正确处置它。（您不知道`Paint`之后引发事件的代码是否需要它）。

# sql - 如何在 SQL Server 中形成包含部分日期的字符串

> ID：12244398
> 
> 赞同：0
> 
> 时间：2012-09-03T08:29:51.937
> 
> 标签：sql, sql-server, datetime, sqldatetime

我在表格中有日期时间，以这种方式（表格中每行两个）：

```
Row 1: 2012-06-31 01:00:00
Row 2: 2012-06-31 02:00:00
Row 3: 2012-06-31 03:00:00
Row 4: 2012-06-31 04:00:00
... 
```

我想以每小时为间隔，从报告中获取它：

```
For the first row:  From 1 to 2
For the second row: From 2 to 3
...
For each row: 'From [hour(date)] to [hour(date)+1]' 
```

但我不会停止使用每个组合 con CONVERT、CAST、DATEPART 或 DATEADD 获得“转换错误”。

我是处理这种 SQL 问题的新手……你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:37:12.220

试试这个：

将 DateEPART 函数与 CAST 一起使用

```
declare @dte datetime='2012-01-01 05:02:00'
select  'From '+ cast (DATEPART(HH,@dte) as char(2))+
             'to ' +cast(  DATEPART(HH,@dte)+1 as char(2)) 
```

# [SQL 小提琴演示](http://sqlfiddle.com/#!3/d41d8/4099)

编辑：

如果您想从表中检索

```
declare @t table(dte datetime);
insert into @t values('2012-01-01 05:02:00');
insert into @t values('2012-01-01 06:02:00');

select  'From '+ cast (DATEPART(HH,dte) as char(2))+
             'to ' +cast(  DATEPART(HH,dte)+1 as char(2))
             from @t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:36:27.193

试试这个 ：-

```
 Select 'From ' + Convert(varchar(2),datepart(hour,dateColumn)) 
  + ' to ' + convert(varchar(2),datepart(hour,dateColumn)+1)
 from Sample 
```

[SQLFiddle](http://sqlfiddle.com/#!3/a1875/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:47:47.423

试试这个

```
select 'From '+RIGHT(dtColumn,len(dtColumn)-charindex(' ',dtColumn,1)) + ' To '+convert(varchar(8),dateadd(hh,1,convert(time,RIGHT(dtColumn,len(dtColumn)-charindex(' ',dtColumn,1))))) from yourtable 
```

# android-camera - Android中的图像压缩

> ID：12244402
> 
> 赞同：1
> 
> 时间：2012-09-03T08:30:19.820
> 
> 标签：android-camera

我正在使用`PNG`格式，但图像质量仍然很差..

这些是我的压缩代码：

```
 ByteArrayOutputStream blob = new ByteArrayOutputStream();
        photo.compress(CompressFormat.PNG, 0 /*ignored for PNG*/, blob);
        byteArray = blob.toByteArray(); 
```

在这些压缩之后，我写了我`byteArray`的，`SDCard`但图像质量太差了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-25T12:13:40.037

下面的代码在压缩后给出了更好的图像，它对我有用。

```
 BitmapFactory.Options options = null;
            options = new BitmapFactory.Options();
            options.inSampleSize = 3;
            Bitmap bitmap = BitmapFactory.decodeFile(imagePath,
                    options);
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.PNG, 50, stream); 
```

# java - 使用 Glassfish 时出现 NoClassDefFoundError

> ID：12244408
> 
> 赞同：0
> 
> 时间：2012-09-03T08:30:36.180
> 
> 标签：java, exception, glassfish, noclassdeffounderror

我正在构建一个 Web 应用程序。当我在 Tomcat 上运行它时，一切正常。但如果我使用 Glassfish，我会收到 NoClassDefFoundError 异常。这是为什么？它抛出异常的类是由 Maven 导入的，正如我所说，Tomcat 在运行应用程序和查找类时没有任何问题。为什么 Glassfish 有问题？

我得到的堆栈跟踪：

```
java.lang.NoClassDefFoundError: org/openrdf/rio/RDFHandlerException    

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)    

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)    

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)    

at java.lang.reflect.Method.invoke(Method.java:597)    

at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)    

at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)    

at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)    

at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)    

at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)    

at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)    

at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)    

at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)    

at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)    

at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)    

at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)    

at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)    

at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)    

at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)    

at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)    

at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)    

at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)    

at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)    

at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)    

at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)    

at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)    

at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)    

at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)    

at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)    

at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)    

at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)    

at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)    

at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)    

at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)    

at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)    

at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)    

at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)    

at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)    

at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)    

at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)    

at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)    

at com.sun.grizzly.ContextTask.run(ContextTask.java:71)    

at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)    

at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)    

at java.lang.Thread.run(Thread.java:662)    

Caused by: java.lang.ClassNotFoundException: org.openrdf.rio.RDFHandlerException    

at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)    

at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)    

... 45 more

java.lang.ClassNotFoundException: org.openrdf.rio.RDFHandlerException
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at pl.psnc.synat.web.Service.runMapping(Service.java:68)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:44:14.063

好像您正在使用openrdf。请确保您在运行时类路径中添加了[sesame](http://www.java2s.com/Code/Jar/s/Downloadsesamerioapi223jar.htm)和相关 jar。为了让事情更清楚，在您的服务器启动脚本中添加一个回显以在启动期间显示 CLASSPATH（用于调试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:47:41.890

```
java.lang.NoClassDefFoundError: org/openrdf/rio/RDFHandlerException 
```

在glassfish服务器中部署war后似乎缺少一些jar文件。部署war后请检查您的WEB-INF/LIB文件夹是否正确包含所有jar文件？

# java - Webstart 应用程序不会通过桌面快捷方式更新

> ID：12244410
> 
> 赞同：1
> 
> 时间：2012-09-03T08:30:41.290
> 
> 标签：java, jnlp, java-web-start, desktop-shortcut

`<shortcut online="[true|false]">`将选项“ ”设置为 false时，我们的 webstart-application 无法通过桌面快捷方式正确更新。将其设置为 true 时似乎工作正常，但我并没有真正理解该标志的含义。JNLP 规范 说：

**“可用于描述应用程序对创建在线或离线运行快捷方式的偏好。”**

这在混凝土中是什么意思？它与“offline_allowed”标志相同还是有什么区别？

# xml - 忽略字符串之前的空格

> ID：12244417
> 
> 赞同：1
> 
> 时间：2012-09-03T08:31:05.573
> 
> 标签：xml, string, matlab

我读取了一个 xml 文件并获取行以将其与另一个值进行比较：

```
xmlLine = fgets(fid); 
```

这使 ：

```
xmlLine =

      <a="true" value="toto"> 
```

我需要，当让 xmlLine 删除空格时（这里开始前有 6 个空格）

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:33:20.257

`strtrim`会成功的：

```
 strtrim('      <a="true" value="toto">') 
```

该函数从字符串的开头和结尾删除多余的空格。

# php - 从 php 变量设置 MySQL 字段

> ID：12244418
> 
> 赞同：0
> 
> 时间：2012-09-03T08:31:19.167
> 
> 标签：php, mysql

我有一个变量`$Altgeraet`，它包含**"OK"**或**"NOK"**。

`Status_Altgeraet`我在表中有一个 mysql 字段`zuordnung`。所以现在我想根据变量更新或设置字段。

这是我尝试过的：

```
$sql_Update = "UPDATE zuordnung SET Status_Altgeraet = ".$Altgeraet"";  
mysql_query($sql_Update); 
```

你能给我提示如何解决这个问题吗？我是一个php初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:33:01.390

您错过了字符串输入周围的引号和`.`行尾的连接：

```
$sql_Update = "UPDATE zuordnung SET Status_Altgeraet = '".$Altgeraet."'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:33:38.270

您在那里缺少一个点，并且在您尝试将列值设置为的字符串周围加上引号（正如 Fluffeh 提到的评论），试试这个：

```
$sql_Update = "UPDATE zuordnung SET Status_Altgeraet = '".$Altgeraet."'";  
mysql_query($sql_Update); 
```

这些天来，准备好的陈述可能是要走的路，你应该[研究一下](http://php.net/manual/en/pdo.prepared-statements.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:35:34.730

您当前的语句将引导您为表的所有行设置相同的值。

所以最好在查询中使用 where 子句，

还有一件事是字符串值应该在用单引号括起来的查询中发送。

看到这个

```
$sql_Update = "UPDATE zuordnung SET Status_Altgeraet = '{$Altgeraet}' WHERE id={$someid}"; 
```

这里的 $someid 是包含要更新的行的唯一标识符的变量。

或者您可以使用“AND”和“OR”的组合来获得更多条件来选择要更新的行。

**编辑**

并且 id 是整数类型，所以不需要用单引号括起来。但是您也可以始终将整数用单引号括起来。

# html - 如何在输入框中显示舍入值但使用实际未舍入值

> ID：12244419
> 
> 赞同：1
> 
> 时间：2012-09-03T08:31:36.603
> 
> 标签：html, jsp, jstl

```
<input type="text"
name="coefficient"
id="variable"
maxlength="10"
value="<fmt:formatNumber type="number" minFractionDigits="4" value="${coefficientValue}"
/>"/> 
```

在上面的输入框中，我得到了像“0.0098764”这样的系数值，为了将其显示到小数点后 4 位，我正在格式化该值。现在，当我想再次将此值保存在数据库中时，我希望保存实际值“coefficientValue”，而不是四舍五入的值。

我希望在屏幕上显示四舍五入的值，但输入的实际值应该保持不变。

我怎样才能有一个输入框的多个值，即不同的值和不同的显示。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:37:26.193

U 应该在这个表单中添加 1 更多的 input-type hidden，它将存储实际值。希望能帮助到你 ！

# php - 使用 php header 提供 pdf 文件会生成 pdf 源而不是文件

> ID：12244421
> 
> 赞同：-1
> 
> 时间：2012-09-03T08:31:42.147
> 
> 标签：php, file, pdf, header

我有一个名为 newdesign.pdf 的 pdf 文件，我使用下面的代码来提供它。在我自己的机器上很好，但是当我在服务器上时，问题是浏览器没有打开 PDF 文件，而是显示所有乱码的 PDF 源文本。

这是我的代码：

```
header('Content-Description: File Transfer');
header('Content-Type: application/pdf');
header('Content-Length: ' . filesize("newdesign.pdf"));
// to open in browser
header('Content-Disposition: inline; filename=' . basename("newdesign.pdf"));
readfile("newdesign.pdf"); 
```

这是输出的开始：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/zeejfl5/public_html/ui_test/savedesign.php:8) in /home/zeejfl5/public_html/ui_test/savedesign.php on line 71
%PDF-1.4 1 0 obj << /Title (��) /Creator (��) /Producer (��wkhtmltopdf) /CreationDate (D:20120903012618-07'00') >> endobj 3 0 obj << /Type /ExtGState /SA true /SM 0.02 /ca 1.0 /CA 1.0 /AIS false /SMask /None>> endobj 4 0 obj [/Pattern /DeviceRGB] endobj
 8 0 obj << /Type /Catalog /Pages 2 0 R >> endobj 5 0 obj << /Type /Page /Parent 2 0 R /Contents 9 0 R /Resources 11 0 R /Annots 12 0 R /MediaBox [0 0 454 227] >> 
endobj 11 0 obj << /ColorSpace << /PCSp 4 0 R /CSp /DeviceRGB /CSpg /DeviceGray >> /ExtGState << /GSa 3 0 R >> /Pattern << >> /Font << /F6 6 0 R /F7 7 0 R >> /XObject << >> >> endobj 12 0 obj [ ] endobj 9 0 obj << /Length 10 0 R /Filter /FlateDecode 
>> stream x��[M��0��W̹`E}YPzhh=B=�J�۲$K�=��wl'Y9�d74�F��$��4�����������t��v:J*���[5,Vb k13�m۵� 
```

如果您使用 Adob​​e Reader 打开，我的 PDF 文件本身很好。但是如何在浏览器中打开供用户查看呢？我认为代码没有任何问题，因为它在我的本地机器上运行良好。它仅在我将脚本上传到服务器时才起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:34:17.170

如果在发送标头之前没有回显，请检查您的 php 文件。如果在标头之前将任何数据发送到浏览器，则标头是无用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:56:16.570

PHP 呈现此错误消息是因为在 PDF 文件之前的页面中至少回显了 1 个字符。在您的情况下，您没有`echo`在页面上显式地编辑某些内容，但是 PHP 引擎有。

PHP 在本地和服务器上的设置方式有所不同。
看起来好像您的服务器`error_reporting`在其`php.ini`文件中定义了更严格的级别。

（关于这个主题的更多信息：[http](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors) ://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors ）

您可以通过完全禁用 PHP 警告来解决这个问题：
`<?php ini_set('display_errors', 0); ?>`
但这不是一个长期的解决方案。

要一劳永逸地解决此问题，请检查第**8**行和第**71**行`/home/zeejfl5/public_html/ui_test/savedesign.php`以确定 PHP 引擎在何处抛出该警告。

# opengl - 更新 VBO 中的顶点数据（glBufferSubData vs glMapBuffer）

> ID：12244422
> 
> 赞同：14
> 
> 时间：2012-09-03T08:31:46.047
> 
> 标签：opengl, vertex-buffer

我想在创建 VBO 后更新对象的顶点列表。我见过两者`glBufferSubData`，`glMapBuffer`而且它们似乎都在做类似的事情，这意味着我现在不确定该使用哪一个。

我的伪工作流程是：

> 创建对象
> 开始顶点更新（使用 data = nullptr 调用 glBufferData）
> 更新对象的顶点
> 结束顶点更新（获取更新的顶点并调用`glBufferSubData`或`glMapBuffer`）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-03T08:45:07.277

两者都有效。

如果您打算经常更新顶点（每帧左右），我建议避免使用 glBufferSubData，这需要在驱动程序中再添加一个 memcpy。glMapBuffer/glMapBufferRange 通常会让您获得更多性能。

如果您很少更新，glBufferSubData 就可以了。

另请参阅 OpenGL Insights 的第 28 章（免费： http: [//openglinsights.com/](http://openglinsights.com/)）

# c++ - 在 Boost 中执行深度优先搜索和广度优先搜索

> ID：12244428
> 
> 赞同：1
> 
> 时间：2012-09-03T08:32:31.330
> 
> 标签：c++, boost, depth-first-search, breadth-first-search, boost-graph

我对 Boost 库和 c++ 语言都很陌生。

我使用 Boost 创建了一个图，并添加了顶点和边，并在 graphviz 中输出了该图。

现在我想执行从一个顶点到图中所有其他顶点的广度优先和深度优先搜索。

结果应该是图中从起始顶点到其他顶点的最短路径。

如何在 Boost 中实现这一点？任何帮助，将不胜感激。

提前致谢。

我还添加了我的源代码供您参考。

```
#include "stdafx.h"
#include <iostream>

#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/breadth_first_search.hpp>
#include <boost/pending/indirect_cmp.hpp>
#include <boost/range/irange.hpp>
#include <boost/graph/graphviz.hpp>

int main()
{
            using namespace std;
            using namespace boost;

        // Property types
            typedef property<vertex_name_t, std::string,
            property<vertex_index2_t, int> > VertexProperties;

        // Graph type
            typedef adjacency_list<vecS, vecS, undirectedS,
            VertexProperties> Graph;

        // Graph instance
            Graph g;

        // Property accessors
            property_map<Graph, vertex_name_t>::type
            profinet_name = get(vertex_name, g);
            property_map<Graph, vertex_index2_t>::type
            profinet_index2 = get(vertex_index2, g);

        // Create the vertices
            typedef graph_traits<Graph>::vertex_descriptor Vertex;
            Vertex u1;
            u1 = add_vertex(g);
            profinet_name[u1] = "Profinet 1";
            profinet_index2[u1] = 1;

            Vertex u2;
            u2 = add_vertex(g);
            profinet_name[u2] = "Profinet 2";
            profinet_index2[u2] = 2;

            Vertex u3;
            u3 = add_vertex(g);
            profinet_name[u3] = "Profinet 3";
            profinet_index2[u3] = 3;

            Vertex u4;
            u4 = add_vertex(g);
            profinet_name[u4] = "Profinet 4";
            profinet_index2[u4] = 4;

            Vertex u5;
            u5 = add_vertex(g);
            profinet_name[u5] = "Profinet 5";
            profinet_index2[u5] = 5;

            Vertex u6;
            u6 = add_vertex(g);
            profinet_name[u6] = "Profinet 6";
            profinet_index2[u6] = 6;

        // Create the edges
            typedef graph_traits<Graph>::edge_descriptor Edge;
            Edge e1;
            e1 = (add_edge(u1, u2, g)).first;

            Edge e2;
            e2 = add_edge(u1, u4, g).first;

            Edge e3;
            e3 = (add_edge(u1, u6, g)).first;

            Edge e4;
            e4 = (add_edge(u2, u3, g)).first;

            Edge e5;
            e5 = (add_edge(u2, u4, g)).first;

            Edge e6;
            e6 = (add_edge(u2, u5, g)).first;

            Edge e7;
            e7 = (add_edge(u3, u6, g)).first;

            Edge e8;
            e8 = (add_edge(u6, u5, g)).first;

            Edge e9;
            e9 = (add_edge(u5, u4, g)).first;

            write_graphviz(cout, g);

            return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:59:25.520

如果要执行从 a 到 b 的最短路径，则应该使用 Dijkstra 算法。

如果所有边的成本均为 1，则 BFS 理论上会更好，但在 boost::graph 中它需要一些努力（它只是一个空壳，您需要实现自己的访问者以存储与原点的距离） .

但是，为了使用 dijkstra，您需要在边上添加带有权重的边属性并在算法中使用它。

在以下示例[http://www.boost.org/doc/libs/1_51_0/libs/graph/example/dijkstra-example.cpp](http://www.boost.org/doc/libs/1_51_0/libs/graph/example/dijkstra-example.cpp)中，您可以通过查看前辈地图来展开从 s 到 t 的最短路径：p[ t] 是最短路径中 t 之前的节点。

我希望这已经足够了:)

# c# - 多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有工作

> ID：12244431
> 
> 赞同：1
> 
> 时间：2012-09-03T08:32:50.083
> 
> 标签：c#, oledb

对于以下代码，我收到多步 OLE DB 操作错误。

适配器正在填充数据集时引发错误（在此行`sAdapter.Fill(sDs, "Tran");`：）

```
OleDbCommand sCommand;
OleDbDataAdapter sAdapter;
OleDbCommandBuilder sBuilder;
DataSet sDs;
DataTable sTable;

OleDbConnection connection = new OleDbConnection();
connection = PEConnectionManager.ConnectionManager.GetConnection();
connection.Open();

string sql = "Select * Frequency from Tran where frequency=?";
sCommand = new OleDbCommand(sql, connection);
//string sfrequency = "Quarterly";
OleDbParameter param = new OleDbParameter("Quarterly", OleDbType.VarChar);

sCommand.Parameters.AddWithValue("frequency",param);

sAdapter = new OleDbDataAdapter(sCommand);
sBuilder = new OleDbCommandBuilder(sAdapter);
sDs = new DataSet();
sAdapter.Fill(sDs, "Tran");      // Error is thrown here...
sTable = sDs.Tables["Tran"];
sCommand.Prepare();
connection.Close(); 
```

# websocket - 防止 Websocket 的 CSRF

> ID：12244436
> 
> 赞同：9
> 
> 时间：2012-09-03T08:33:17.560
> 
> 标签：websocket, socket.io, csrf, csrf-protection

我目前正在考虑 websockets 中的 CSRF 漏洞。

我已经阻止了所有跨域 websocket 请求，但是存在脚本（例如[这个 python bad boy](https://github.com/koto/socket_io_client)）来绕过这些安全措施。

是否值得在用户的 index.html 中包含一个令牌，它必须作为查询字符串包含在 socket.io.connect() 调用中？这样在服务器上我们可以检查令牌是否符合我们的预期，否则阻止连接请求。

感谢所有的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T19:09:41.993

你为什么不为你的 socket.io 连接设置一个授权处理程序？您可以根据握手期间收集的信息拒绝/接受那里的连接。

有关这方面的更多详细信息，请参阅[https://github.com/LearnBoost/socket.io/wiki/Authorizing](https://github.com/LearnBoost/socket.io/wiki/Authorizing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:40:25.340

我将 socket.io 与 django 一起使用。我处理授权的方式是首先要求用户使用包含 CSRF 令牌的常规 HTTP 表单登录。成功登录后，会设置会话 cookie，并将用户重定向到 socket.io 应用程序。

在我的连接授权代码中，我检查 cookie 并验证用户是否已登录，如果检查失败则返回“401 Not Authorized”。

如果您不想要求用户先登录，也可以设置一个 CSRF cookie 并检查它，或者您可以在授权期间将 CSRF 令牌作为 URL 参数传递，正如@3rdEden 指出的那样。

# google-custom-search - 这可能与 Google 自定义搜索 API 相关吗

> ID：12244439
> 
> 赞同：1
> 
> 时间：2012-09-03T08:33:28.943
> 
> 标签：google-custom-search

我打算使用 Google 自定义搜索，我想知道是否可以返回页面地图属性计数？我们在每个文章页面上都有“类别”属性，我们希望显示所有找到的文章类别和在每个类别中找到的结果数量。像这样：书籍（10），电子产品（32），食品（14）等。这可能是因为我没有找到任何文档吗？

# google-bigquery - bigquery excel 连接器 - 查询大于 256 个字符

> ID：12244446
> 
> 赞同：1
> 
> 时间：2012-09-03T08:33:59.073
> 
> 标签：google-bigquery

我无法使用 excel 连接器在 bq 中运行长查询（280 个字符）。

开发人员指南说：

> 注意：如果您的查询长度超过 256 个字符，Excel 将不允许您运行该查询。将您的查询拆分为多个部分并将每个部分粘贴到多个相邻单元格中。

我曾尝试拆分一个查询，但无法将其发布到旁边或下方的单元格中。

有没有办法使这项工作？我已经很好地运行了较短的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:52:39.010

### 更新：

我已经确认将查询的多个部分放在相邻的单元格中可以正常工作。我在 Excel for Mac 2011 上运行了一个长度为 757 个字符的查询。

将查询放在相邻单元格中后，您需要将查询参数值定义为范围，如下所示：

```
=Sheet1!$B$7:$B$11 
```

仅供参考 - `len()`Excel 中的功能在执行此操作时会派上用场。

### 旧回应：

我已向编写该功能/文档的工程师发送了一封便条。会让你知道。

同时（作为一种解决方法），您应该能够打开一个文本编辑器并修改您下载的 .iqy 文件以直接包含您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:47:09.690

这个所谓的连接器没有代码，因为它使用了一个不起眼的 Excel 功能。

[http://support.microsoft.com/kb/157482](http://support.microsoft.com/kb/157482)

# .net - Windows Server AppFabric 缓存和数据库同步

> ID：12244448
> 
> 赞同：0
> 
> 时间：2012-09-03T08:34:00.657
> 
> 标签：.net, appfabric, azure-appfabric, appfabric-beta-2, appfabric-cache

我们计划将 Windows Server AppFabric 缓存用于医疗保健应用程序。我们有一个患者主数据和其他我们想要使用 AppFabric 缓存缓存的主数据。但是，我们还使用 SQL Server 服务代理和复制设置了与其他应用程序的后端集成，这些应用程序可以更新此患者主数据和其他查找数据。当使用 Service Broker 更新此数据时，我们如何通知 AppFabric 缓存，以便缓存始终反映最新的患者主数据和其他主数据信息。我们可以使用 SQL CacheDependency 或 SQL Server 通知服务吗？

谢谢，高拉夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T07:26:06.430

您将无法使用 Appfabric 执行此操作，因为它在依赖功能方面受到限制，并且我相信它没有与数据库同步的机制，并且由客户端应用程序从数据库重新加载新数据。一个可能对您有益的缓存解决方案是 NCache，它具有一整套依赖特性和同步选项，而无需涉及客户端应用程序。请拜访

www.alachisoft.com/NCache

# php - Codeigniter 查询始终返回 TRUE

> ID：12244449
> 
> 赞同：1
> 
> 时间：2012-09-03T08:34:02.333
> 
> 标签：php, mysql, codeigniter

我得到了这个用 1 或 0 更新帐户的函数，
注意 account_status 的数据类型是布尔值。

我知道 $this->db->query(); 在写查询中返回 TRUE 或 FALSE，

但我遇到了麻烦，因为当我尝试在 account_status 上放置一个非布尔值时，响应仍然是成功的，但显然它不会更新，因为数据不是布尔值。

```
public function approve_account($id='0'){
        if($id == '0' OR $id== ''){
            return FALSE;
        }else{
            try{
                $id = (int)htmlentities($id,ENT_COMPAT,'UTF-8');
                $sql= "UPDATE elibrary.elib_user_account e 
                       SET account_status = 'hg' 
                       WHERE t_user_id = ?
                       LIMIT 1;";

                if($this->db->query($sql,$id) === TRUE){
                    echo 'sucess';
                }else{
                    echo 'FAIL';
                }
            }catch(Exception $e){
                echo $e;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:39:34.480

MySQL 没有原生`boolean`类型，布尔值表示为`tinyint(1)`. 将字符串值存储在数字列中会将它们强制转换为数值 - 在您的情况下，字符串`'hg'`不是有效的整数，并被强制转换为 value `0`，该 value 存储在`account_status`列中并进一步解释为`false`. 如果您的字符串包含一个有效数字，例如`'5'`，它将被存储为整数值`5`，这被认为`true`是布尔运算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T05:53:28.237

试试这个，受影响的行数

如果它给出 0 则没有行受到影响。

`$this->db->affected_rows()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:47:40.333

尝试使用`mysql_errno()`从 mysql 获取有关 SQL 错误的信息。
您应该在`query`命令之后执行此操作。

```
if (mysql_errno()) { 
```

这样，您将能够向用户提供有关错误原因的真实信息

# android - 如何为 android 构建 ch341.ko usb-serial 驱动程序？

> ID：12244455
> 
> 赞同：1
> 
> 时间：2012-09-03T08:34:22.997
> 
> 标签：android, linux, kernel

我们需要在我们的 android 设备上安装 ch341.ko 模块。

这是自 2.4.x（可能是 2.3.x）以来已包含在内核源代码中的可选模块。

```
The source is located under (kernel)/drivers/usb/serial/ch341.c

    I endevoured to learn how to build modules, then found it was already in the source so no need for makefiles and the like, then endevoured to find how to crosscompile the linux source with the ch341 option to add it to the device. 
```

1.  安装交叉编译器 我收集到的第一件事是找到正确的交叉编译器，所以`cat /proc/version`从 adb shell 继续运行 yeilded：

    root@android:/ # cat /proc/version
    Linux 版本 3.0.8+ (android2@Linux) (gcc 版本 4.5.1 (Sourcery G++ Lite 2010.09-50)) #47 PREEMPT Mon Jul 9 16:32:14 CST 2012

    在我的 Fedora 16 机器上下载并设置版本 50 的 Sourcery G++。然后将目录添加到 PATH 变量中：

    EXPORT PATH=$PATH:(安装CodeSourcery的路径)/CodeSourcery/Sourcery_G++_Lite/bin

    或手动将其添加到 ~/.bash_profile 中：

    须藤 gedit ~/.bash_profile

    然后更新 PATH 变量：

    源〜/ .bash_profile

2.  下载内核源代码 -

    尝试找到正确的来源可能很困难，但是知道该设备最有可能来自 Allwinner 的 A10，我找到了以下 git 存储库和方便的教程：

    [https://github.com/amery/linux-allwinner](https://github.com/amery/linux-allwinner)

    [http://rhombus-tech.net/allwinner_a10/kernel_compile/](http://rhombus-tech.net/allwinner_a10/kernel_compile/)

    安装 git 后，克隆树我尝试针对 2 个分支进行编译：

    “allwinner-v3.0-android-v2”（主要的）

    “lichee-3.0.8-sun4i”（更符合我的设备）

    我使用以下命令进行了交叉编译：

    make ARCH=arm sun4i_defconfig make ARCH=arm menuconfig make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- -j16 uImage 模块 make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- INSTALL_MOD_PATH=output modules_install

    每次编译后，我将 ch341.ko 文件推送到设备：

    adb push output/lib/modules/3.0.8+/kernel/drivers/usb/serial/ch341.ko /mnt/sdcard/LKMz/ch341.ko

    然后尝试了 insmod"

    adb shell root@android:/ # insmod /mnt/sdcard/LKMz/ch341.ko insmod: init_module '/mnt/sdcard/LKMz/ch341.ko' failed (Exec format error)

    dmesg 返回：

    dmesg ch341：不同意符号 module_layout 的版本

    并尝试使用 -f （强制）选项：

    ./system/xbin/busybox insmod -f /mnt/sdcard/LKMz/ch341.ko insmod：无法插入'/mnt/sdcard/LKMz/ch341.ko'：模块格式无效

    因此，我用来编译源代码的版本或编译选项似乎存在问题。

    有人对如何编译 ch341.ko 模块有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:10:24.243

关闭 CONFIG_MODVERSIONS 并检查它是否有效。如果没有，“dmesg”并检查新错误。

检查[此](http://www.ibm.com/developerworks/cn/linux/l-cn-kernelmodules/index.html)页面，它可能会有所帮助。

# javascript - Javascript函数this.title，this.value

> ID：12244463
> 
> 赞同：3
> 
> 时间：2012-09-03T08:35:13.203
> 
> 标签：javascript, forms

我有一个表单，它可以将值传递给 javascript 函数。我已经设法让 this.value 和 student.value 通过了，但是 this.title 没有返回任何东西。

我将如何获得选项的标题？

谢谢

```
<form>
<select id="student" style="width:100%">
<option value="">--</option>
<option value="">A</option>
</select>

<select id="course" onchange="showarchive(this.value, this.title, student.value)" style="width:100%"/>
<option value="">--</option>
<option value="" title="" class=""></option>
</select> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:39:35.347

```
this.options[this.selectedIndex].title 
```

这是所选选项的标题。

这是一个[JSFIDDLE](http://jsfiddle.net/Rqqme/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:52:09.793

为什么要这么麻烦地输入所有这些论点？您需要的一切都可以从事件对象中获取，只需更改：

```
<select id="course" onchange="showarchive(this.value, this.title, student.value)"> 
```

到：

```
<select id="course" onchange="showarchive(event)"> 
```

并稍微改变你的功能：

```
function showarchive (e)
{
    e = e || window.event;//just for safety
    var select = e.target || e.srcElement;//select.id === course now
    var selected = select.options[select.selectedIndex];//your freshly selected option element here
    var title = selected.title;//etc...
    //as an added bonus:
    if (e.preventDefault)
    {
        e.preventDefault();
        e.stopPropagation();
        return e;
    }
    e.returnValue = false;
    e.cancelBubble = true;//redundant: onchange doesn't bubble in IE
} 
```

这样，您就可以访问所需的一切以及更多内容：您可以取消事件本身，并操纵其行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:39:13.263

`this`在那个 onchange 方法对应于 SELECT 对象而不是选定的 OPTION 对象。您应该掌握选定的 OPTION，然后访问 title 属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T08:41:59.920

你可以得到它是这样的：

```
function getSelectedText(elementId) {
    var elt = document.getElementById(elementId);

    if (elt.selectedIndex == -1)
        return null;

    return elt.options[elt.selectedIndex].text;
} 
```

在onchange中：

```
showarchive(this.value, getSelectedText('course'), student.value); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T08:52:30.423

这是一个示例（不同的示例） [http://jsfiddle.net/gbsandeep/Dk3nh/](http://jsfiddle.net/gbsandeep/Dk3nh/)

你可以执行

```
mySelect.options[mySelect.selectedIndex].innerText 
```

获得价值。

# android - Android ActionBar 删除

> ID：12244464
> 
> 赞同：2
> 
> 时间：2012-09-03T08:35:17.510
> 
> 标签：android, android-actionbar, actionbarsherlock

有没有办法，如何删除操作栏（他的所有标签和设置）？

我正在尝试类似的东西：

```
 public void setUpActionBar(int selTab) {

    if (thereIsSomeActionBar){
          deleteThatActionBar();
       }

    ActionBar actionBar = getSupportActionBar();

    ....set up new actionbar

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:45:27.220

您可以调用`getActionBar().removeAllTabs()`以从`ActionBar`.

您也可以要求[`invalidateOptionsMenu()`](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29)您`Activity`在`ActionBar`.

# backbone.js - Backbone.js Uncaught TypeError：无法使用“in”运算符搜索“id”

> ID：12244466
> 
> 赞同：0
> 
> 时间：2012-09-03T08:35:28.490
> 
> 标签：backbone.js

以下简单代码会引发错误：

> “未捕获的 TypeError：无法使用 'in' 运算符在 Leo 中搜索 'id'”在主干-min.js:9

[http://jsfiddle.net/nW7KF/](http://jsfiddle.net/nW7KF/)

```
<!DOCTYPE html>
<html>
<head>
<title></title>
</head>
<body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>
<script>
var User = Backbone.Model.extend({
    initialize: function(n) {
        this.name = n;
    }
});

var user = new User("Leo");
</script>
</body>
</html>​ 
```

如何使此代码与 Backbone.js 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:31:42.683

您没有正确构建模型。来自backbone.js的[文档](http://documentcloud.github.com/backbone/#Model-constructor)：

> 创建模型实例时，您可以传入属性的初始值，这些属性将在模型上设置。如果你定义了一个初始化函数，它将在模型创建时被调用。
> 
> ```
> new Book({
>   title: "One Thousand and One Nights",
>   author: "Scheherazade"
> }); 
> ```

所以你会像这样构建你的模型：http: [//jsfiddle.net/nW7KF/2/](http://jsfiddle.net/nW7KF/2/)

```
<script>
    var User = Backbone.Model.extend({});
    var leo = new User({ name: "Leo" });
    console.log(leo.get("name"));
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-31T13:18:33.710

前几天我遇到了同样的错误，问题是我使用的是更新版本的 Backbone (1.2.1)，它显然实例化模型与以前略有不同。我一直在使用该库的 1.1.1 版本，但是当我更新到 1.2.1 时，我开始看到同样的错误。当我恢复到 1.1.1 时，错误不再存在。如果您看到相同的错误并进行相同的库更新，可能需要注意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T21:23:43.853

您链接的文件已过时。请更新它们。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.cdnjs.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>
<script type="text/javascript" src="https://ajax.cdnjs.com/ajax/libs/backbone.js/1.2.1/backbone-min.js"></script> 
```

# c# - 正确使用线程池

> ID：12244473
> 
> 赞同：0
> 
> 时间：2012-09-03T08:36:19.110
> 
> 标签：c#, .net, wpf, multithreading

我有以下最初从 UI（主）线程调用的函数：

```
 private void BreakToggle(int line, Boolean toggle)
    {
        string flag;
        if (toggle)
        {
            flag = "0"; //Add
        }
        else
        {
            flag = "1"; //Delete
        }
        string logicLine = line.ToString();

        SetLogicBreakLineResponse response = ddcdao.SetLogicBreakLine(logicName, logicLine, flag);
    } 
```

但是，底线会尝试与电子设备建立连接并发送信号，如果连接速度很慢，这可能需要长达 5 秒的时间。所以为了防止 UI 挂起，我决定创建一个单独的线程来处理这个问题。

这个函数也可以在短时间内被多次调用（比如 1 秒内 10 次），所以我认为我应该使用 Threadpool 而不是让后台工作人员来处理这个问题，所以我修改了我的代码，如下所示：

```
 ThreadPool.QueueUserWorkItem(state =>
 {
        SetLogicBreakLineResponse response = ddcdao.SetLogicBreakLine(logicName, logicLine, flag);
 }); 
```

这是使用线程池的正确方法吗？如果使用线程这么容易，我觉得我肯定做错了。此代码是否会对我的应用程序造成任何未知的巫术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:44:13.163

您的示例是使用线程池的合理开始。如果您唯一感兴趣的只是让代码在您的 UI 线程之外运行，那么它可以很简单。

但是，您应该注意原始代码和多线程版本之间的行为差​​异：

*   MT 版本不保证排队操作将以何种顺序运行
*   MT 版本允许同时运行多个操作，这意味着 SetLogicBreakLine 需要可重入
*   使用闭包来捕获引用类型的值允许它们的成员在您安排它们之后和它们开始运行之前被突变

您确实需要考虑这些差异，但如果 MT 行为没有任何问题，那么就这么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:41:53.170

> 如果使用线程这么容易，我觉得我肯定做错了。

您没有做错任何事情，ThreadPool 的全部意义在于使线程的使用更加高效和轻松。我唯一想说的是，如果您需要使用`response`线程外部，您可能需要重新考虑您的代码。

# sql-server-2008 - 我可以在 SQL SERVER 函数或存储过程中传递变量参数吗？

> ID：12244475
> 
> 赞同：1
> 
> 时间：2012-09-03T08:36:32.217
> 
> 标签：sql-server-2008, sql-server-2008-r2

我有一种情况，我必须从同一个查询中检索不同场景的记录集。我的意思是，如果我传递 2 个参数，则必须创建一个函数或存储过程可以运行多个参数，然后如果我传递 3 个参数，它就可以工作，然后也可以工作，依此类推。我们可以创建一个可以在 sql server 中传递变量参数的 Sp 或函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:42:08.140

您可以使用可选（默认）参数创建存储过程：

```
CREATE PROCEDURE TestProcedure
(
   @Param1 int = null,
   @Param2 int = null,
   ...
   @ParamN int = null)
{
   //do stuff
} 
```

然后你可以把它称为

```
EXEC TestProcedure 1
EXEC TestProcedure 1, 2 
```

等等等等，直到

```
EXEC TestProcedure 1, 2 ... N 
```

这显然意味着参数数量的上限，但是如果您可以接受，它将实现您所描述的

# python - 使用 lambda 调用函数 n 次（python）

> ID：12244478
> 
> 赞同：0
> 
> 时间：2012-09-03T08:36:50.100
> 
> 标签：python

如果可能的话，有人可以指导我如何使用 Python 中的 lambda 函数来调用函数 n 次吗？

就像我有一个功能

```
def repeat_lam(a, n):
    lambda x: f(x) 
```

我要跑步`a`，`n`时间继续`x`。我不确定如何编辑我当前的代码来做到这一点。

因此，如果我有一个定义为乘以 2 的函数，则称为`mul_2`.

```
repeat_lam(mul_2,3)(10)
80 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:35:47.310

所以我们的规范是：

```
>>> repeat_lam(mul_2,3)(10)
80 
```

此设置需要 that`mul_2`是一个函数，我们可以根据`lambda`需要使用 a 来定义它。我会证明这一点，但这并不是真正需要的。的实现`repeat_lam`将与 lambdas 无关。但是，它需要是一个函数......返回一个函数（这样我们就可以使用`(10)`.

```
def repeat_lam(func, times):
    def wrapper(arg):
        for i in range(times):
            arg = func(arg)
        return arg
    return wrapper 
```

我们定义了一个嵌套在内部的函数`repeat_lam`——在 Python 中，函数是对象，因此可以像对待任何其他对象一样对待它们。这意味着，除其他外，我们可以返回它 :) 所以这里发生的是`wrapper`指的是传递给的`func`和`times`值`repeat_lam`。为了支持这一点，Python 每次被调用时都会返回一个单独的对象——`repeat_lam`每个对象都是一个函数，每个对象都将被“命名” `wrapper`，但是它们通过一些内部 Python 魔法（在技术术语中, Python 创建一个*闭包*)。`func``times`

 *因此，当您调用返回的函数时，它将自动使用调用时传入的`func`和`times`值`repeat_lam`，以及调用时传入`arg`的值。该代码的其余部分很简单：我们`func`重复应用到`arg`，分配回以`arg`建立结果，然后我们返回它。

现在我们可以测试它（看看 lambda 是如何使用的）：

```
>>> mul_2 = lambda x: x * 2
>>> repeat_lam(mul_2,3)(10)
80 
```

lambda的效果与以下相同：

```
>>> def mul_2(x):
...     return x * 2 
```

但是 lambda 只能评估单个表达式，因此它们的范围比成熟的函数更受限制。它们的主要目的是当任务非常简单以至于您甚至不想为它命名时：

```
>>> repeat_lam(lambda x: x * 2, 3)(10)
80 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T09:04:40.813

简单直接的方法：

```
def exec_num_times(f,times,*args,**kwargs):
  for _ in range(times):
      f(*args,**kwargs) 
```

还有其他方法。例如，如果您有一个函数，然后是一个参数列表：

`results = [f(x) for x in list_of_args]`

但是，这不是必需的，因为您可以直接传递`list_of_args`给`f()`; 因为 Python 方法[采用参数的变量列表，](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)您通常不应该依赖传递特定*类型*变量的方法。它应该足够灵活，可以处理任何类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:47:22.353

您可以定义一个 lambda 函数，如下所示：

```
ntimes = lambda f, args, n: (f(*args), ntimes(f, args, n-1)) if n>1 else (f(*args),)

def foo(bar):
    print "foo", bar
ntimes(foo, ["bar"], 10) 
```

在这种情况下，返回值将是单个调用的返回值的元组。

如果您希望将第一次调用的返回值输入到第二次调用中，以此类推，您可以使用如下 lambda 函数：

```
ntimes2 = lambda f, arg, n: ntimes2(f, f(arg), n-1) if n>1 else f(arg) 
```

但是，应用函数 n 次的最简单方法是使用 for 循环，而不是使用 lambda 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:11:56.673

对于您的问题的性质，您可能正在尝试调整函数式编程中使用的一种技术，以完全避免“循环”，用函数调用替换那些。

因此，不要像我们在经验语言中那样依赖简单的语言结构来一遍又一遍地重复一个陈述，这将是：

```
repeats = 10
result = 0
for i in range(repeats):
    result = function(result) 
```

取而代之的是，您可以创建一个接收两个参数的函数，第二个是计数器，第一个是中间结果 - 如果计数器值为 0，它只返回中间结果。否则，它使用中间结果调用原始函数，然后再次调用*自身*，但计数器减 1：

```
def repeat_func(function, result, repeat):
    if repeat == 0:
        return result
    return repeat_func(function, function(result), repeat - 1) 
```

在早期学习编程时，有些人更喜欢这种方法 - 但它显然更复杂。如果你必须研究的任何材料都暗示了这样的事情，那么找到另一个研究来源很重要。*

# java - 如何通过 jaxb 从生成的 XML 中删除不需要的元素

> ID：12244479
> 
> 赞同：3
> 
> 时间：2012-09-03T08:36:49.847
> 
> 标签：java, xml, jaxb, marshalling, unmarshalling

我想知道是否有任何方法可以使用 jaxb 从生成的 xml 中删除不需要的元素。我的 xsd 元素定义如下。

```
 <xsd:element name="Title" maxOccurs="1" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        A name given to the digital record.
                    </xsd:documentation>
                </xsd:annotation>
                <xsd:simpleType>
                    <xsd:restriction base="xsd:string">
                        <xsd:minLength value="1"></xsd:minLength>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element> 
```

如您所见，它不是强制性元素，因为

> minOccurs="0"

但如果它不为空，则长度应为 1。

```
<xsd:minLength value="1"></xsd:minLength> 
```

在编组时，如果我将 Title 字段留空， 由于最小长度限制，它会抛出**SAXException 。**所以我想要做的是`<Title/>` 从生成的 XML 中删除整个出现。现在我已经删除了最小长度限制，所以它将`<Title>`元素添加为**EMPTY**

```
<Title></Title> 
```

但我不希望这样。感谢任何帮助。我正在使用 jaxb 2.0 进行编组。

**更新：**

以下是我的变量定义：

```
 private JAXBContext jaxbContext;
    private Unmarshaller unmarshaller;
    private SchemaFactory factory;
    private Schema schema;
    private Marshaller marshaller; 
```

编组代码。

```
 jaxbContext = JAXBContext.newInstance(ERecordType.class);
            marshaller = jaxbContext.createMarshaller();
            factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
            schema = factory.newSchema((new File(xsdLocation)));
            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
            ERecordType e = new ERecordType();
            e.setCataloging(rc);
            /**
             * Validate Against Schema.
             */
            marshaller.setSchema(schema);
            /**
             * Marshal will throw an exception if XML not validated against
             * schema.
             */
            marshaller.marshal(e, System.out); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:36:27.667

如果将标题值设置为`""`它将生成的空字符串`<Title/>`，如果将其设置为`null`它应该完全省略该元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-16T08:39:24.283

我正在利用 XmlAdapter，实现一个透明适配器，如果 Collection 或 String 为空，则它在编组 null 值时返回。

```
public class XMLStringAdapter extends XmlAdapter<String, String> {

    @Override
    public String unmarshal(String v) throws Exception {
        return v;
    }

    @Override
    public String marshal(String v) throws Exception {
        return v != null && v.isEmpty() ? null : v;
    }
} 
```

还要添加 package-info.java

```
@XmlJavaTypeAdapters({
@XmlJavaTypeAdapter(value=StringAdapter.class, type=String.class)
})
your.package 
```

[https://www.eclipse.org/eclipselink/documentation/2.6/moxy/advanced_concepts006.htm](https://www.eclipse.org/eclipselink/documentation/2.6/moxy/advanced_concepts006.htm)

[JAXB XmlAdapter 如何用于编组列表？](https://stackoverflow.com/questions/14569293/how-can-jaxb-xmladapter-be-used-to-marshall-lists)

# html - 边框半径选项卡看起来像 Thunderbird 选项卡

> ID：12244482
> 
> 赞同：3
> 
> 时间：2012-09-03T08:37:02.183
> 
> 标签：html, css

有人知道如何开发雷鸟邮件标签（版本 15）吗？看起来很棒，我真的不能在我的应用程序中做同样的事情。检查此屏幕截图：http: [//s7.postimage.org/ocvxg9ooq/thunder.jpg](http://s7.postimage.org/ocvxg9ooq/thunder.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T08:56:10.640

它可以用css`:before`和`:after`伪元素来完成。看一下[jsfiddle](http://jsfiddle.net/agriboz/F3UJF/)例子

**html**

```
<ul class="tabrow">
    <li><a href="#">Lorem</a></li>
    <li><a href="#">Ipsum</a></li>
    <li class="selected"><a href="#">Sit amet</a></li>
    <li><a href="#">Consectetur adipisicing</a></li>
</ul> 
```

**CSS** ​</p>

```
.tabrow {
        text-align: center;
        list-style: none;
        margin: 0 20px;
        padding: 0;
        line-height: 24px;
        height: 26px;
        overflow: hidden;
        font-size: 12px;
        font-family: verdana;
        position: relative;
    }
    .tabrow li {
        border: 1px solid #AAA;
        background: #D1D1D1;
        background: -o-linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        background: -ms-linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        background: -moz-linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        background: -webkit-linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        background: linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        display: inline-block;
        position: relative;
        z-index: 0;
        border-top-left-radius: 6px;
        border-top-right-radius: 6px;
        box-shadow: 0 3px 3px rgba(0, 0, 0, 0.4), inset 0 1px 0 #FFF;
        text-shadow: 0 1px #FFF;
        margin: 0 -5px;
        padding: 0 20px;
    }
    .tabrow a {
          color: #555;
          text-decoration: none;
    }
    .tabrow li.selected {
        background: #FFF;
        color: #333;
        z-index: 2;
        border-bottom-color: #FFF;
    }
    .tabrow:before {
        position: absolute;
        content: " ";
        width: 100%;
        bottom: 0;
        left: 0;
        border-bottom: 1px solid #AAA;
        z-index: 1;
    }
    .tabrow li:before,
    .tabrow li:after {
        border: 1px solid #AAA;
        position: absolute;
        bottom: -1px;
        width: 5px;
        height: 5px;
        content: " ";
    }
    .tabrow li:before {
        left: -6px;
        border-bottom-right-radius: 6px;
        border-width: 0 1px 1px 0;
        box-shadow: 2px 2px 0 #D1D1D1;
    }
    .tabrow li:after {
        right: -6px;
        border-bottom-left-radius: 6px;
        border-width: 0 0 1px 1px;
        box-shadow: -2px 2px 0 #D1D1D1;
    }
    .tabrow li.selected:before {
        box-shadow: 2px 2px 0 #FFF;
    }
    .tabrow li.selected:after {
        box-shadow: -2px 2px 0 #FFF;
    }​ 
```

**jQuery**

```
$("li").click(function(e) {
     e.preventDefault();
     $("li").removeClass("selected");
     $(this).addClass("selected");
});​ 
```

有关它的更多详细信息，您最好访问[这里](http://css-tricks.com/better-tabs-with-round-out-borders/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T09:58:43.933

是的，我以前做过这样的事情 - 看看[http://dabblet.com/gist/3166401](http://dabblet.com/gist/3166401)（在 IE9 中也很好看）

And I've done now a quick version with multiple tabs: [http://dabblet.com/gist/3608293/](http://dabblet.com/gist/3608293/) (CSS only)

HTML:

```
<div id='tabs' class='tabs'>
    <input type='radio' name='tab' id='tab1' checked>
    <label for='tab1'><h5>Inbox</h5></label>
    <section id='inbox'>
        <h6>You have <a href='#'>1 new message</a></h6>
        <a href='#'>See all messages</a>
    </section>
    <input type='radio' name='tab' id='tab2'>
    <label for='tab2'><h5>Add-ons Manager</h5></label>
    <section id='addons'>
        <h6>Add-ons list</h6>
        <ul>
            <li>bammm bammm
        </ul>
    </section>
    <input type='radio' name='tab' id='tab3'>
    <label for='tab3'><h5>Calendar</h5></label>
    <section id='addons'>
        <h6>Scheduled</h6>
        <ul>
            <li>Tuesday, September the 4th...
        </ul>
    </section>
    <input type='radio' name='tab' id='tab4'>
    <label for='tab4'><h5>Chat</h5></label>
    <section id='addons'>
        <h6>Something here as well</h6>
        <div>something more</div>
    </section>
</div> 
```

CSS:

```
html { font: 90% Helvetica, sans-serif; }
.tabs {
    overflow: hidden;
    position: relative;
    height: 26.5em;
    margin: 7em 0 0;
}
.tabs input[type=radio] { display: none; }
.tabs label, .tabs section { position: absolute; }
.tabs label {
    z-index: 2;
    top: 0; left: 1.5em;
    width: 9em;
    height: 2em;
    background: plum;
    background: linear-gradient(lightcyan, plum);
    text-align: center;
    cursor: pointer;
}
.tabs h5 {
    position: relative;
    margin: 0;
    height: 2em;
    font: 1em/2 Helvetica, sans-serif;
    text-shadow: 0 1px 0 lemonchiffon;
}
.tabs label:nth-of-type(2) { left: 12em; }
.tabs label:nth-of-type(3) { left: 22.5em; }
.tabs label:nth-of-type(4) { left: 33em; }
.tabs label:before, .tabs label:after {
    position: absolute;
    top: 0; bottom: 0;
    width: 1em;
    background: plum;
    background: linear-gradient(lightcyan, plum);
    content: '';
}
.tabs label:before {
    left: -.65em;
    border-radius: .4em 0 0 0;
    transform: skewX(-15deg);
}
.tabs label:after {
    right: -.65em;
    border-radius: 0 .4em 0 0;
    transform: skewX(15deg);
}
.tabs h5:before, .tabs h5:after {
    position: absolute;
    bottom: -1px;
    height: .65em;
    width: .65em;
    content: '';
}
.tabs h5:before {
    left: -1.4em;
    transform: skewX(-15deg);
    background: radial-gradient(top left, 
                transparent 70.71%, plum 70.71%);
}
.tabs h5:after {
    right: -1.4em;
    transform: skewX(15deg);
    background: radial-gradient(top right, 
                transparent 70.71%, plum 70.71%);
}
.tabs section {
    display: none;
    z-index: 6;
    padding: 1em;
    border-top: solid 1px whitesmoke;
    margin-top: -1px;
    top: 2em; right: 0; bottom: 0; left: 0;
    background: linear-gradient(whitesmoke, gainsboro)
}
.tabs input[type=radio]:checked + label,
.tabs input[type=radio]:checked + label:before, 
.tabs input[type=radio]:checked + label:after {
    z-index: 5;
    background: whitesmoke;
    background: linear-gradient(gainsboro, whitesmoke);
}

.tabs input[type=radio]:checked + label:before, 
.tabs input[type=radio]:checked + label:after {
    background-position: 0 -1px;
}
.tabs input[type=radio]:checked + label h5:before {
    background: radial-gradient(top left, 
                transparent 70.71%, whitesmoke 70.71%);
} 
.tabs input[type=radio]:checked + label h5:after {
    background: radial-gradient(top right, 
                transparent 70.71%, whitesmoke 70.71%);
}
.tabs input[type=radio]:checked + label + section { display: block; } 
```

# javascript - Javascript：变量作为数组键

> ID：12244483
> 
> 赞同：39
> 
> 时间：2012-09-03T08:37:06.913
> 
> 标签：javascript, arrays

我正在构建和数组，其中我的数组键来自这样的变量：

```
var art = $('#article_id').val();
var stk =  $('#stk').val();
elements ={ art : stk };
alert(elements[art]); 
```

但我最终得到这个输出`art=>50`而不是`5123=>50`

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-03T08:38:20.337

## ECMAScript 2015（又名 ES6 Harmony）

[ES 2015 通过称为计算属性名称](http://es6-features.org/#ComputedPropertyNames)的功能提供了对此的支持（尽管[规范的相关部分](http://www.ecma-international.org/ecma-262/6.0/#sec-12.2.6)称为“对象初始化器”）。

简单地说，用方括号将变量（通常是任何表达式）括起来以评估它并将结果用作属性名称。在你的例子中，那将是

```
elements = { [art]: stk }; 
```

## 原始答案（针对 ES5）

你不能像那样创建对象文字。你需要写

```
elements = {};
elements[art] = stk; 
```

之所以`elements = { art: stk }`不起作用是因为它相当于`elements = { "art": stk }`（带引号）。只要`art`是合法的标识符，这两个版本在 JavaScript 中是等价的，第二个版本清楚地说明了发生了什么。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-03T08:38:13.910

使用下面将动态键添加到对象。

```
elements = {};
elements[art] = stk; 
```

# ios - Facebook iPhone 应用程序中某些用户的 XMPPAuthentication 失败

> ID：12244486
> 
> 赞同：1
> 
> 时间：2012-09-03T08:37:16.260
> 
> 标签：ios, facebook-graph-api, xmpp, facebook-chat

我正在创建一个 iPhone 应用程序，并且我正在使用 Graph API 和 XMPP 实现 Facebook 聊天功能。它工作正常，我可以聊天。但问题是，XMPP 未对某些用户进行身份验证，他们的在线状态在浏览器中显示为移动设备图标。意味着在 Facebook 网络应用程序中，这些朋友的在线状态显示为移动设备，而不是正常的绿色图标。我检查了这些帐户，用户没有登录手机，只登录网络应用程序。这个问题有什么可能的原因吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:25:52.030

您可能需要确保在 Facebook 上使用正确的身份验证方法。如果您使用代理（或通过您自己的服务器获取流量），您将需要实现 X-FACEBOOK-PLATFORM 身份验证方法。您还需要确保您的流量已加密（SSL/TLS）

# android - 如何在使用 ViewPagerIndicator(JakeWharton Library) 的活动中获取当前片段

> ID：12244491
> 
> 赞同：2
> 
> 时间：2012-09-03T08:37:28.020
> 
> 标签：android, android-fragments

我有一个使用`ViewPagerIndicator`. 我已经实现了一个`PagerAdapter`扩展类`FragmentPagerAdapter`，以在页面上设置片段。

在我的活动中，这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mAdapter = new PagerAdapter(getSupportFragmentManager());
    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);
    mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);

    mIndicator.setViewPager(mPager);
} 
```

我的活动也有一个菜单选项，带有一个选项 "A" 。当用户单击选项菜单并选择“A”时，我的活动想要调用当前片段的方法。但是activity怎么知道的`currentFragment`？

我要这个：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case R.id.A:
            getCurrentFragment.Method(); //Method is the method that want to execute
        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T14:52:06.510

是的，您可以获得当前片段：

```
getSupportFragmentManager().findFragmentByTag("android:switcher:"+R.id.viewpager+":0"); 
```

查看这些问题和答案以了解详细信息：

[作为 ViewPager 的一部分更新 ListFragment 中的数据](https://stackoverflow.com/questions/7379165/update-data-in-listfragment-as-part-of-viewpager)

[是否可以访问 ViewPager 正在查看的当前片段？](https://stackoverflow.com/questions/8587175/is-it-possible-to-access-the-current-fragment-being-viewed-by-a-viewpager)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T17:28:59.220

你自己回答了你的问题。怎么了。我有同样的问题。我有一个按钮，我想在不同的片段中执行不同的任务。我使用了这段代码：

```
indicator.setOnPageChangeListener(new OnPageChangeListener() {
@Override
        public void onPageSelected(final int position) {
            // TODO Auto-generated method stub

            btn_calculate.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    switch (position) {
                        case 0:
                            Fragment0.calculator();
                            break;
                        case 1:
                            Fragment1.calculator();
                            break;
                        case 2:
                            Fragment2.calculator();
                            break;

                    }

                }
            }); 
```

并使用此代码访问您的片段：

```
YourownFragment fragment = 
      (YourownFragment) getSupportFragmentManager().findFragmentByTag(
                   "android:switcher:"+R.id.viewpager+":0"); 
```

您还可以使用此代码访问当前片段：

```
int current_item = mPager.getCurrentItem(); 
```

# objective-c - iOS的图片资源

> ID：12244494
> 
> 赞同：28
> 
> 时间：2012-09-03T08:37:55.150
> 
> 标签：objective-c, ios, xcode, png, tiff

我可能在这里遗漏了一些明显的东西，但我一直无法解决以下问题：

我有一个项目，其中包含普通屏幕和视网膜屏幕的图像资源，例如*someimage.png*和*someimage@2x.png*，它们存储在单独的包中。当我构建项目时，Xcode 会自动将它们打包到单个多页 tiff ( `imageName.tiff`) 中，我已经在 finder 中检查了它——它实际上是包含两个图像的多页 tiff。然而，这里出现了一个问题：我很难加载适当的资源。

我要做的是：

```
 NSString * imageName = ... ;

    NSLog(@"imageName: %@", imageName);

    UIImage * someImage = [UIImage imageNamed: imageName]; 
```

我也喜欢辅助方法，它返回捆绑资源：

```
 +(NSBundle *) resourcesBundle
   {
         NSBundle *bundle = [NSBundle bundleWithURL:[[NSBundle mainBundle] URLForResource:@"MyResourcesBundle" withExtension:@"bundle"]];
         return bundle;
   } 
```

我试过以下`imageName`：

```
imageName = [[AuxClass resourcesBundle] pathForResource:@"someimage" ofType:@"png"]; 
```

在这种情况下，我`null`有`imageName`。

```
imageName = [[AuxClass resourcesBundle] pathForResource:@"someimage" ofType:@"tiff"]; 
```

在这种情况下，实际图像路径被返回，但它仅在我使用`imageWithContentsOfFile`而不是时才有效`imageNamed`，并且它不占用适当的资源：尽管屏幕类型不同，但它会为视网膜加载资源。

如果我省略了文件类型（就像我在添加`@2x`资源之前所做的那样，它工作正常，并且是我尝试的第一件事并且确信它会工作）

```
imageName = [NSString stringWithFormat: @"%@/%@",
                                  @"MyResourcesBundle.bundle"",
                                  @"someimage" ]; 
```

什么都没有加载。

添加“.tiff”扩展名具有相同的效果`pathForResource:`- 加载视网膜资源，不考虑非视网膜屏幕的资源。

那么我错过了什么？加载图像的正确方法是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-03T08:49:02.523

您是否尝试过使用以下方法简单地加载图像：

```
UIImage * someImage = [UIImage imageNamed: @"someimage"]; 
```

（假设您的项目中有一个名为“someimage”的图像，例如 someimage.png）

该代码将根据平台自动选择视网膜/非视网膜版本。

如果问题是创建了 TIFF，请检查：

![XCode 结合高分辨率艺术品](../Images/cd57a91e23e5b1b8353b3af76a568152.png)

在最新版本的 XCode 中，转到编辑器菜单，然后选择“验证设置”，这应该会删除该艺术品组合。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-03T09:52:32.010

**多页 TIFF 仅适用于 OSX；它们*不适*用于 iOS。**

因此，您需要停止尝试访问本质上无法访问的资源，并以正确的方式做事！

您需要打开*生成外部资源包的项目*，选择目标，进入构建设置然后部署子标题，并将“组合高分辨率艺术品”设置为否。然后重新编译外部资源包。

在您的主项目中，您现在应该能够以正常方式读取 PNG。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-10T10:07:14.240

如果您正在使用捆绑包而不是转到

> -> 构建设置 -> COMBINE_HIDPI_IMAGES 为 NO，

你只需要清洁和建造！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-16T14:39:50.377

-> 构建设置 -> COMBINE_HIDPI_IMAGES 为 NO

这是唯一有效的解决方案，无需进行其他更改

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T08:53:55.437

当您为您的应用程序创建图像时，假设您正在创建一个名为`example`.

您应该保存以下内容：

*   example~iphone.png -> 这是针对非视网膜 iPhone
*   示例~iphone@2x.png -> 这是针对视网膜 iPhone
*   example~ipad.png -> 这是针对非视网膜 iPad
*   示例~ipad@2x.png -> 这是针对 Retina iPad 的

所以，从哪里调用它并不重要，只要这样调用它，假设 myImageView 是一个 UIImageView 对象：

```
[myImageView setImage:[UIImage imageNamed:@"example"]]; 
```

**Apple 强烈建议您使用 png 图像。**此外，操作系统负责为所需设备找到正确的图像。您无需担心找到路径和所有这些东西。`+(UIImage*)imageNamed:(NSString*)name`在您的资源包中查找正确的图像 - 顺便说一下，返回资源包只需调用`[NSBundle mainBundle];`

# unit-testing - 如何在 Visual Studio 2012 和 Entity Framework 5 中为单元测试设置 LocalDb

> ID：12244495
> 
> 赞同：62
> 
> 时间：2012-09-03T08:38:05.007
> 
> 标签：unit-testing, mstest, visual-studio-2012, entity-framework-5, localdb

我们有一个使用 Entity Framework 5 的 Visual Studio 2012 ASP.NET MVC 项目。

有一些单元测试依赖于数据库。在测试项目中设置 app.config 文件以使用中央 SQL Server 数据库可以正常工作。

但是，使用 LocalDb 会更好，这样每个开发人员在运行测试时都有自己的数据库。特别是因为我们希望`DropCreateDatabaseAlways`在运行时设置测试。

但是，我无法使设置正常工作。如果我在 app.config 中尝试这个：

```
<add name="TestDb" 
   connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=unittestdb;
     Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\unittestdb.mdf"
   providerName="System.Data.SqlClient" /> 
```

我得到：

> System.Data.SqlClient.SqlException：发生文件激活错误。物理文件名“\unittestdb.mdf”可能不正确。诊断并更正其他错误，然后重试该操作。创建数据库失败。无法创建列出的某些文件名。检查相关错误。

听起来它希望 mdf 文件已经存在，这似乎很奇怪，因为它正在尝试创建数据库。手动创建 mdf 文件不会更改错误消息。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-04T05:31:43.097

尝试：

```
AppDomain.CurrentDomain.SetData(
  "DataDirectory", Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "")); 
```

这将在 /bin/Debug/yourdbname.mdf 上创建 Db 文件

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-08T15:52:00.290

我会使用：

```
// Declare this property - this is set by MSTest
public TestContext TestContext { get; set; }

// In test initialization - note the signature should be exactly this
// A static void method with one argument of type TestContext 
[ClassInitialize]
public static void SetUp(TestContext context)
{
   AppDomain.CurrentDomain.SetData("DataDirectory", Path.Combine(context.TestDeploymentDir, string.Empty));
} 
```

使用 可能会出现问题`AppDomain.CurrentDomain.BaseDirectory`，而不是使用：`context.TestDeploymentDir`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-19T21:20:32.307

请记住，对于测试项目：

```
AttachDBFilename=|数据目录|

```

意味着它将在您的输出 /bin/debug 文件夹中查找单元测试，而不是您的 web/production/whatever 应用程序中的 App_Data 文件夹。

您需要做两件事 1\. 将数据库文件从 App_Data 文件夹中移出到您的测试应用程序的根目录。2\. 突出显示您的数据库，以便在 Visual Studio 中获得属性窗口。将构建操作设置为“内容”，以便在您运行项目时将其复制到您的输出文件夹。

瞧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-24T15:38:26.000

我建议使用此代码（基于[Jupaol](https://stackoverflow.com/a/15297953/209727)的回答）：

```
[ClassInitialize]
public static void SetUp(TestContext context)
{
    AppDomain.CurrentDomain.SetData(
        "DataDirectory", 
        context.TestDeploymentDir);
} 
```

通常这将在`TestResults\<test run>\Out\`您的解决方案的文件夹中创建您的数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-21T21:49:03.953

我在寻找问题的答案时发现了你的问题。在单独的项目中使用 EntityFramework 和 nUnit，我不得不更改 App.config

看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework>
</configuration>
```

# python - python：使用增加的变量来替换

> ID：12244497
> 
> 赞同：-2
> 
> 时间：2012-09-03T08:38:08.470
> 
> 标签：python

我写了一个小脚本如下

```
f1 = open('file.txt', 'r')     
f2 = open('newfile.txt', 'w')     
n=5000

for line in f1:         
      f2.write(line.replace('12345', n))    
      n=n+1

f1.close()     
f2.close() 
```

但`.replace('old','new')`不能应用于变量。任何人有想法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:41:44.120

我认为您需要提供两个字符串来替换：

```
f2.write(line.replace('12345', str(n))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:42:00.760

`n`用它替换时转换为字符串：

```
f2.write(line.replace('12345', str(n))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:44:04.553

您收到此错误是因为您试图用数字替换字符串。

将您的行更改为：

```
f2.write(line.replace('12345',str(n))) 
```

它会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:44:36.930

使用 str(n) 将 n 更改为字符串

```
f2.write(line.replace('12345', str(n))) 
```

# php - 如何检查 Facebook API 是否成功查询？

> ID：12244503
> 
> 赞同：-1
> 
> 时间：2012-09-03T08:38:27.643
> 
> 标签：php, facebook, facebook-graph-api

如何检查facebook API查询返回是否成功？

```
$qry = $this->facebook->api(array(
   'method'      =>  'fql.multiquery',
   'queries'     =>  $fql,
   'access_token'=>  $facebook['access_token']
)); 
```

在某些情况下，您会收到套接字 443 错误。您如何捕捉到这一点并在出现错误时简单地重新查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:54:02.120

当发生错误时， [FB PHP SDK](https://github.com/facebook/facebook-php-sdk)会抛出异常（您可以通过[阅读代码](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L966)或查看[示例](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php#L35)来了解这一点）。所以这个想法是

```
try {
    $qry = $this->facebook->api(...);
}
catch (FacebookApiException $e) {
    // handle the error
} 
```

# html - 使用 css background-attachment 属性实现视差效果

> ID：12244504
> 
> 赞同：0
> 
> 时间：2012-09-03T08:38:31.200
> 
> 标签：html, css, parallax

请检查此 JSBIN 链接。

[http://jsbin.com/axeway/14/edit](http://jsbin.com/axeway/14/edit)

当您滚动页面时，您可以在第一个 div 上看到类似视差的效果，但由于某种原因，它不适用于其他 div。唯一的区别是背景图像。

不知道发生了什么。剩下的 div 只是正常滚动，即使我给了它们一个`background-attachment`.`'fixed'`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:52:21.473

伙计们别介意。它的愚蠢背景。正在工作，`background-attachment`但由于线性渐变，效果并不明显。

对于遇到类似问题的任何人，背景图像应该是可区分的，而不仅仅是纯色或渐变。

# json - 数组数据中的构面计数

> ID：12244507
> 
> 赞同：0
> 
> 时间：2012-09-03T08:38:48.223
> 
> 标签：json, lucene, elasticsearch, facets

我在使用数组时遇到了一个方面计数问题。我有一个要点，你们可以查看以查看我的实际映射和我正在索引的文档：[https](https://gist.github.com/3607876) ://gist.github.com/3607876 。

简而言之，我通过搜索 API 提交此查询：

```
curl -XPOST 'localhost:9200/org/_search?pretty=true' -d '
{
    "query" : {
        "term" : { "participating-org.role" : "leading" }
    },
    "filter" : {
        "term" : { "participating-org.role" : "leading" }
    },
    "facets" : {
        "organization_facets" : {
            "terms" : { "field" : "participating-org.name" }
        }
    }
}' 
```

我又回到了以下方面：

```
facets: {
    participating-org.name: {
        _type: "terms"
        missing: 0
        total: 8
        other: 0
        terms: [
            {
                term: "def"
                count: 4
            }
            {
                term: "abc"
                count: 4
            }
        ]
    }
} 
```

我不希望这里有“def”条目，因为它的参与组织对象始终具有“领导”角色，我正试图过滤掉这些条目。我不知道为什么“abc”参与组织也没有“领导”角色。

你们有什么建议吗？是我的映射还是方面查询问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:57:48.983

您可以删除过滤器

```
"filter" : {
    "term" : { "participating-org.role" : "leading" }
} 
```

因为它没有任何区别。计算构面计数时不考虑过滤器，仅在过滤搜索结果时考虑过滤器。

查询

```
"query" : {
    "term" : { "participating-org.role" : "leading" }
} 
```

确实对您的文档和方面都产生了影响，但实际上您是在要求 elasticsearch 为您提供所有以参与 org.role 为前导的文档，并从这些搜索结果中计算方面。您尝试应用的过滤器将应用于返回的文档，并且返回的文档用于制作构面。您的文档有多个参与组织内部对象，其中始终具有角色引导，这就是您选择具有该查询的所有文档的原因。你正在过滤顶级文档如果您只想排除特定的方面条目，您可以这样做，但我认为您会对嵌套文档支持更感兴趣。你可以看看[嵌套类型](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)，[这个](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)[关于它以及如何在本页](http://www.elasticsearch.org/guide/reference/api/search/facets/)底部的嵌套文档上制作方面的精彩文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:37:58.633

这个问题的解决方案在这个要点中：
[https ://gist.github.com/3616612](https://gist.github.com/3616612)

结果将是现在：

```
 facets: {
        participating-org.role.leading: {
            _type: "terms"
            missing: 0
            total: 4
            other: 0
            terms: [
                {
                    term: "def"
                    count: 4
                }
            ]
        }
    } 
```

 `对我来说很好的解决方案，它有效，但如果你们有任何建议，请写下你的想法。`

# android - database inside onReceive

> ID：12244508
> 
> 赞同：1
> 
> 时间：2012-09-03T08:38:51.327
> 
> 标签：android, database, broadcastreceiver, android-service

I have a service which does some work, when done, it send a broadcast. In activity the receiver is registered and pick up the broadcast in its onReceive. Now I need to select data from database and show them inside listview. But I dont want to do the database select on ui thread because that can be expensive operation, I want to open async task, but thats agains the lifecycle of receiver. What other solution do I have ? To open service ? Yes I can do the database operation in new service but how can I then deliver the data to the views from service ? Updating views from service is for sure something I dont want to do. I am in a kind of deathlock right now.

Thanks for any ideas

edit 1: this is the explanation from android documentation why you cannot use AsyncTask in onReceive and why the answers are invalid

> Receiver Lifecycle A BroadcastReceiver object is only valid for the duration of the call to onReceive(Context, Intent). Once your code returns from this function, the system considers the object to be finished and no longer active. This has important repercussions to what you can do in an onReceive(Context, Intent) implementation: anything that requires asynchronous operation is not available, because you will need to return from the function to handle the asynchronous operation, but at that point the BroadcastReceiver is no longer active and thus the system is free to kill its process before the asynchronous operation completes. In particular, you may not show a dialog or bind to a service from within a BroadcastReceiver. For the former, you should instead use the NotificationManager API. For the latter, you can use Context.startService() to send a command to the service.

edit 2: The answers led me to a solution, to create a handler in the activity and pass it to the receiver, in its onReceive just post message to the handler and then inside the handler open the async task and do the database stuff. Not sure though if this is a good one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:46:12.190

我的建议是创建一个`Interface`将数据返回到`Activity`您可以填充`ListView`. 我刚刚创建了一个演示`AsyncTask`，我在其中执行数据库操作`AsyncTask`并将数据发送到`Activity`使用`Interface`并更新 UI。因此，您可以尝试替换`AsyncTask`并`Service`执行您自己的操作。[`Here is a sample demo source for Database Operation in AsyncTask and returning its content to Activity`](https://github.com/lalit3686/SqliteLoaderDemo).

# jquery - No text area should be selected in jQuery

> ID：12244511
> 
> 赞同：1
> 
> 时间：2012-09-03T08:39:00.030
> 
> 标签：jquery, select, onclick, textarea, onfocus

I have a form, and I want that the first text area would not be selected. No textarea should be selected first. I want the user to click on the textarea on their own in jQuery.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:44:00.870

您可以执行以下操作：

```
jQuery("textarea").blur(); 
```

它会使页面上的所有文本区域失去焦点。

更新：

您也在使用文本输入，所以添加：

```
jQuery("input[type=text]").blur(); 
```

因此，将其添加到页面头部的脚本文件/脚本标记中：

```
jQuery(document).ready(function(){
    jQuery("textarea").blur();
    jQuery("input[type=text]").blur();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:44:18.153

```
$('textarea').blur(); 
```

这将触发`blur`所有文本区域上的事件，使其失去焦点。您可以将此代码放置在您希望取消选择所有文本区域的位置。

```
$('textarea').bind('click', function() {
  $(this).select();
}); 
```

这将为所有文本区域添加一个单击事件，单击时选择所有文本。

# sql - Sybase 运行从先前查询生成的 SQL

> ID：12244519
> 
> 赞同：1
> 
> 时间：2012-09-03T08:39:35.630
> 
> 标签：sql, sybase

我正在使用 Sybase 生成 SQL 推荐，以根据先前的内容（使用旧的 ORM）将一些新行插入到表中，并且想知道是否有一种方法可以在不复制和粘贴的情况下执行生成的 SQL？

我正在使用类似的东西

```
SELECT 'INSERT INTO Mapper VALUES (''' + ClassName + ''', ''NewObject'', ''NewId'', '''+convert(varchar(10), max(Sequence)+1)+''')'
FROM Mapper WHERE ClassName IN ('James', 'Steve') GROUP BY ClassName 
```

对于像这样的表

```
ClassName | ObjectName | ID | Sequence 
```

这会输出如下结果：

```
 INSERT INTO Mapper VALUES ('James', 'NewObject', 'NewId', '38')           
 INSERT INTO Mapper VALUES ('Steve', 'NewObject', 'NewId', '24') 
```

现在是否可以运行这个生成的 SQL，而不必只使用 SQL（使用 Aqua Data Studio）在 Sybase 中复制和粘贴？

目前我只是将其复制并粘贴回同一个窗口

谢谢，

--

请注意，如果这有什么不同，它将适用于 2000 多行

Ps 我刚刚注意到我经常使用这个词，对不起^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:45:05.547

您可以`CURSOR`在您的语句上使用 a，并使用`EXEC`命令来执行每行中生成的 SQL。

我假设这是一个一次性的任务，而不是一个持续的过程，你不使用是有原因的`INSERT table SELECT....`

# java - BPM Development Environment

> ID：12244520
> 
> 赞同：0
> 
> 时间：2012-09-03T08:39:40.220
> 
> 标签：java, .net, linux, business-process-management

I am looking for a way to create my own BPM Studio. As far as I understand, I can use either Eclipse to do that or use the Windown Framework Objects to do that as well.

Does any one know how to do that ? Can anyone please recommend other alternatives ? Any other idea ?

Any answer will be appriciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:47:32.003

看看 SmartFlo。原始引擎来自 OBE。JBOSS 负担过重的良好开端。CHALEX 今年重新构建了引擎，现在它的扩展性非常好。考虑 Red Hat BPM 项目。看看 Enhydra.org。明确您将支持的标准。将 XPDL 视为不仅仅是 BPM 文件格式交换标准。

# css - css - 将文本向右移动

> ID：12244525
> 
> 赞同：8
> 
> 时间：2012-09-03T08:40:07.330
> 
> 标签：css, html

这是经常让我烦恼的事情。
如果您创建一个`<div>`并设置边框样式（例如，`border-radius: 3px;`），则文本几乎位于边框顶部，这看起来很糟糕。
我能想出的唯一解决方案是将该 div 的内容包装在另一个 div 中，并将包装 div ±3px 向右移动。这会产生很多额外的加价，而且感觉不太对劲，好像有更好的解决方案一样。

所以这是我的问题：
**是否可以如上所述仅使用 css 将 div 的内容向右移动三个像素？**

当然我想要一个跨浏览器的解决方案，但我不介意每个浏览器有 1 个 css 规则，我可以将它放在我的样式表底部的某个地方，并且不再查看它，这不会使标记复杂化。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T08:41:06.033

```
padding-left:3px; 
```

将其添加到其中包含文本的 div 中。

阅读有关填充的更多信息：http: [//www.w3schools.com/css/css_padding.asp](http://www.w3schools.com/css/css_padding.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T08:41:53.210

很简单，您可以使用`padding: 0 3px;`（仅限水平填充），`padding-left: 3px;`..

[http://jsfiddle.net/Kyle_Sevenoaks/D3BSL/4/](http://jsfiddle.net/Kyle_Sevenoaks/D3BSL/4/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T08:54:32.393

我希望你看起来像这样：- [http://tinkerbin.com/q4cVJ0FF](http://tinkerbin.com/q4cVJ0FF)

**HTML**

```
<div>stack</div> 
```

**CSS**

```
div {
background:red;
border-radius:3px;
    padding-left:3px;
} 
```

您可以轻松获得所需的通过`padding`，并且可以从所有四个侧面调整填充`left,right,top,bottom`...

# jquery - Struts 2 get parameter in Action class

> ID：12244529
> 
> 赞同：1
> 
> 时间：2012-09-03T08:40:19.063
> 
> 标签：jquery, ajax, struts2

I use Struts 2 and Ajax. I am not able to get parameter in Action class. I have a form like this:

```
<s:form id="form" onSubmit="sendAjaxRequest();">
    <s:textfield  name="libelle" label="Libelle" />
    <s:textfield name="id" label="id" />
    <s:submit value="Valider" />
    <s:reset value="Effacer" />
</s:form> 
```

When I examine the request which is sent in HTTP Reader :

```
Content-length contains libelle=Test&id=13 
```

My request is good !

In my action class :

```
public class MyAction extends ActionSupport {
    private String libelle;
    private Integer id;

    public String getLibelle() {
        return auteur;
    }

    public void setLibelle(String libelle) {
        this.libelle = libelle;
    }

    public String getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }
    public String execute() {
        System.out.println("Libelle " + libelle);
        System.out.println("Libelle " + this.libelle);
    }
} 
```

In my Action libelle and this. libelle are null. I don't know if I am making mistakes. If someone could give me help. Thanks.

I found my problem but not a solution. I inspect the html code generated and i see the following one :

```
<form id="form" name="form" action="/path/MyOtherAction.action" method="post" onSubmit="sendAjaxRequest();">
  <table class="wwFormTable">
      <tr>
          <td class="tdLabel"><label for="form_libelle" class="label">Libelle:</label></td>
          <td><input type="text" name="libelle" value="" id="form_libelle"/></td>
      </tr>
      <tr>
          <td class="tdLabel"><label for="form_id" class="label">id:</label></td>
          <td><input type="text" name="ide" value="" id="form_id"/></td>
      </tr>
...
          <td colspan="2"><div align="right"><input type="submit" id="form_0" value="Valider"/>
..
          <td colspan="2"><div align="right"><input type="reset" value="Effacer"/>
..
  </table>
</form> 
```

So MyOtherAction is executed first before my sendAjaxRequest. How to remove action MyOtherAction in my form ? Thanks for reading.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:17:23.347

您可以像这样在表单上绑定提交事件：

```
$(document).ready( function() {    
    $("#form").submit( function() {
        sendAjaxRequest();
        return false; // it will stop the submit process
    });
}); 
```

当事件被捕获时，`sendAjaxRequest()`函数被执行，由于函数返回 false，表单将不会被提交到`/path/MyOtherAction.action`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:10:54.733

如果您使用的是 jQuery，您可以尝试使用[preventDefault()](http://api.jquery.com/event.preventDefault/)。这种方式`MyOtherAction`不会在提交时执行。

# c# - 删除、添加、更新文件夹的应用程序重新启动

> ID：12244530
> 
> 赞同：0
> 
> 时间：2012-09-03T08:40:20.417
> 
> 标签：c#, asp.net, global-asax

在应用程序的已知文件夹中修改、添加或删除某些类型的文件会导致应用程序重新启动。但是当更新应用程序中的日志文件时，为什么应用程序没有重新启动。然后

```
PropertyInfo p = typeof(System.Web.HttpRuntime).GetProperty("FileChangesMonitor", BindingFlags.NonPublic | BindingFlags.Public |  BindingFlags.Static);
object o = p.GetValue(null, null);
FieldInfo f = o.GetType().GetField("_dirMonSubdirs", BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.IgnoreCase);
object monitor = f.GetValue(o);
MethodInfo m = monitor.GetType().GetMethod("StopMonitoring", BindingFlags.Instance | BindingFlags.NonPublic);
m.Invoke(monitor, new object[] { }); 
```

通过这些更改，我可以创建/修改/删除文件夹而不会导致应用程序重新启动。但是此代码适用于所有应用程序的已知文件夹。我想知道是针对一个文件夹而不会导致应用程序重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:16:13.160

您的问题是因为一旦您修改或删除应用程序目录中的任何文件，它就会导致 appDomain 重新启动以加载更改。据我所知，您有 4 个选项：

1.  禁用您已经尝试过的目录监控。
2.  在应用程序下创建一个虚拟目录并将其指向应用程序文件夹之外的文件夹。将需要更改的内容移到该文件夹​​中，可以进行更改。
3.  使用进程外会话。
4.  修改注册表以禁用给定的监视（不推荐）：

> 注册表信息
> 
> loadTOCNode(3, '分辨率'); HKLM\Software\Microsoft\ASP.NET\FCNMode
> 
> 下表列出了 FCNMode DWORD 值的可能值以及与每个值关联的行为。
> 
> 值行为 不存在 这是默认行为。对于每个子目录，应用程序将创建一个监视子目录的对象。0 或大于 2 这是默认行为。对于每个子目录，应用程序将创建一个监视子目录的对象。
> 
> 1 应用程序将禁用文件更改通知 (FCN)。[:)]。
> 
> 2 应用程序将创建一个对象来监控主目录。应用程序将使用此对象来监视每个子目录。

上述方法取自[这里](http://support.microsoft.com/kb/911272/en-us)

此外，您可以通过以下链接了解更多信息：

*   [http://forums.asp.net/t/966593.aspx/1](http://forums.asp.net/t/966593.aspx/1)
*   [http://blogs.msdn.com/b/toddca/archive/2005/12/01/499144.aspx](http://blogs.msdn.com/b/toddca/archive/2005/12/01/499144.aspx)
*   [http://weblogs.asp.net/owscott/archive/2006/02/21/438678.aspx](http://weblogs.asp.net/owscott/archive/2006/02/21/438678.aspx)
*   [http://aspadvice.com/blogs/joteke/archive/2006/02/22/15299.aspx](http://aspadvice.com/blogs/joteke/archive/2006/02/22/15299.aspx)

好吧，这可能有助于解决您的问题，我找不到任何关于停止特定文件夹的 appDomain 更改监控的信息。它要么监视更改，要么不监视。希望这可以帮助。干杯。

# svn - Configure SVN in Xcode 4.4.1 with Mountain Lion

> ID：12244532
> 
> 赞同：0
> 
> 时间：2012-09-03T08:40:21.870
> 
> 标签：svn, osx-mountain-lion, xcode4.4

When I try to set a repository in Xcode 4.4.1 I get this error:

![error screenshot](../Images/9b3b85816ce5967bba1daa2d07d96ee4.png)

On Snow Leopard with Xcode 4.2 all works fine, though.

How can I solve the issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:16:03.817

转到*Xcode 首选项*。单击选项卡*下载*并选择*组件*标志。

然后安装***命令行工具***并从*终端*使用*SVN*。

 *希望这有帮助！*

# c# - Missing DLLImport even though there is a "using InteropServices"

> ID：12244533
> 
> 赞同：29
> 
> 时间：2012-09-03T08:40:33.193
> 
> 标签：c#, dll

I have the following code:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using MapsApp.DB;

namespace MapsApp
{
    public partial class _Default : System.Web.UI.Page
    {
        [DLLImport("GeoUrbanApp.exe")]
        public static extern double CalcFigure(double east, double north, double size);
... 
```

I am trying to call the CalcFigure function from the .exe. I've added it in the references, and trying to import it. All I get is:

```
The type or namespace name 'DLLImport' could not be found (are you missing a using directive or an assembly reference?)

The type or namespace name 'DLLImportAttribute' could not be found (are you missing a using directive or an assembly reference?) 
```

The solution most people find online is the "using System.Runtime.InteropServices;" but I have it.

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-07-21T06:02:26.397

尝试添加

`using System.Runtime.InteropServices;`

对于您的班级，这就是`DllImportAttribute`所在的命名空间。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-03T08:41:26.173

这`DllImport`不是`DLLImport`

:)

# r - Why parameters passed by function can not be found when sapply subset to a list of dataframe in R

> ID：12244534
> 
> 赞同：3
> 
> 时间：2012-09-03T08:40:35.493
> 
> 标签：r, subset, sapply

I met a wired problem while ***sapply subset*** to a list of dataframe inside a function that R saying "**Error in eval(expr, envir, enclos) : object 'thresh' not found**". I wonder why this would happen.

```
test<-list()
test[[1]]<-as.data.frame(matrix(rnorm(50*5,10,100),50,5))
test[[2]]<-as.data.frame(matrix(rnorm(50*5,10,100),50,5))

findmax<-function(test,thresh){
  print(thresh)
  max(unlist(sapply(test,subset,V1>thresh,select=c("V1"))))
}

findmax(test,thresh=10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:03:06.000

请注意以下**警告**：`?subset`

```
Warning:

     This is a convenience function intended for use interactively.
     For programming it is better to use the standard subsetting
     functions like ‘[’, and in particular the non-standard evaluation
     of argument ‘subset’ can have unanticipated consequences. 
```

`subset`关于在其中查找对象和变量的位置有一些奇怪的评估规则，这取决于调用环境等。当用户在顶层以交互方式调用时，这些规则可以正常工作，但在您发现的函数中包装时通常会失败。

这是使用标准子集重写函数的一种方法：

```
findmax <- function(test, thresh, want) {
    foo <- function(x, thresh, want) {
       take <- x[, want] > thresh
       x[take, want]
    }
    max(unlist(sapply(test, foo, thresh = thresh, want = want)))
}
findmax(test, thresh = 10, want = "V1") 
```

这对于您的测试数据给出：

```
R> findmax(test, thresh = 10, want = "V1")
[1] 230.9756 
```

# php - PHP form not opening in the same page

> ID：12244535
> 
> 赞同：-2
> 
> 时间：2012-09-03T08:40:36.487
> 
> 标签：php, forms

I have a button which makes a form open on the same page.

The button is wrapped in a link as follow:

```
<a href="index.php?entry=true">
  <button type="submit">Enter now!</button>
</a> 
```

The form is just below this link, everything is on the same page. The issue I have is that it does not work in IE7 and 8 and ideas? Everywhere else is fine!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:44:08.183

`<button>`应该是`<form>`not的一部分，`<a>`因此您的有效标记将是

```
<form method="post" action="index.ph?entry=true">
<button type="submit">Enter now!</button>
</form> 
```

编辑：好的，所以你需要一些看起来像按钮的东西。使用 CSS 的样式`<A>`（未测试，但你得到了图片）：

```
a:link {
 border-style: solid;
 border-width : 1px 4px 4px 1px;
 text-decoration : none;
 padding : 4px;
 border-color : #69f #00f #00f #69f;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T08:44:49.030

您不应该将按钮包装在锚元素内，它不是有效的标记（根据 W3C）。

使用`a`或`button`；不是两个一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:51:51.553

根据 w3c，您“不能”将按钮嵌套在 a 标签中。

如果您想在按下按钮后进行一些重定向，请执行以下操作：

`<button type="button" onclick="document.location.href='example.com'">Leave this Place!</button>`

如果您不设置该类型，则`<button type="submit">`默认情况下您会得到一个

# full-text-search - SQL Fulltext search unexpected ranking -

> ID：12244538
> 
> 赞同：0
> 
> 时间：2012-09-03T08:40:49.733
> 
> 标签：full-text-search, sql-server-2008-r2

If I perform the following fulltext query:

```
 SELECT c.CategoryId As ID
      ,c.Title
      ,KEY_TBL.RANK AS [Rank]
  FROM dbo.Category AS c
  INNER JOIN FREETEXTTABLE(dbo.Category, Title, 'back lower pain') AS KEY_TBL ON c.CategoryId = KEY_TBL.[KEY]
  WHERE c.IsActive = 1
  ORDER BY KEY_TBL.RANK DESC 
```

And I have the following two entries in the Category Table

```
ID | Title      | Rank
-----------------------
12 | Lower Body | 34  
11 | Back Pain  | 34 
```

I would have thought that given "Back Pain" matches two of the three words it would rank higher than "Lower Body" but this isn't the case, the ranks are equal, how can I structure the query so that the ranking reflects this?

Not sure if this is relevant but my Fulltext Index is declared as:

```
 CREATE FULLTEXT INDEX 
    ON [dbo].[Category]
        (Title)
    KEY INDEX [PK_Category_CategoryId]
    ON [FullTextCatalog]
    WITH CHANGE_TRACKING AUTO 
```

# c# - incorrect syntax near 's'. unclosed quotation mark after the character string ')'

> ID：12244540
> 
> 赞同：3
> 
> 时间：2012-09-03T08:41:04.493
> 
> 标签：c#, visual-studio-2010, sql-server-2008

I am kinda noob in programming, and I was wondering what I have done wrong here - can some one help me out?

I am making a console app in which it syncs two databases, but when I try to insert the data into the table it throws this exception; The code is:

```
public static void AddInterationPath(SqlConnection conDS_ReleaseCri, DataRow dr)
{
    SqlCommand insertNewAreaPath = new SqlCommand("INSERT INTO InterationPath (ID,NodePath) VALUES(" + dr[0].ToString() + ",'" + dr[2].ToString() + "')", conDS_ReleaseCriterions);
    insertNewAreaPath.ExecuteNonQuery();
}

public static void AddAreaPath(SqlConnection conDS_ReleaseCri, DataRow dr)
{
    SqlCommand insertNewAreaPath = new SqlCommand("INSERT INTO AreaPath (ID,NodePath) VALUES(" + dr[0].ToString() + ",'" + dr[2].ToString() + "')", conDS_ReleaseCriterions);
    insertNewAreaPath.ExecuteNonQuery();
} 
```

And I get the following exception:

> incorrect syntax near 's'. unclosed quotation mark after the character string ')'

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T08:47:07.343

您插入的数据可能包含特殊字符，例如单引号。更改为参数化查询，以便正确转义值。一个很好的例子和解释是[http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。

[编辑：添加了一个例子。]

例如，将第一个函数的内容替换为：

```
SqlCommand insertNewAreaPath = new SqlCommand(
    "INSERT INTO InterationPath (ID, NodePath) VALUES(@ID, @NodePath)",     
    conDS_ReleaseCriterions);
insertNewAreaPath.Parameters.Add("@ID", dr[0]);
insertNewAreaPath.Parameters.Add("@NodePath", dr[2]);
insertNewAreaPath.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:47:59.403

如果字符串的值中有“'”，则该类型的错误即将到来，因此从字符串中删除“'”然后执行查询。

# python - Python+Git 开启远程仓库

> ID：12244545
> 
> 赞同：1
> 
> 时间：2012-09-03T08:41:15.003
> 
> 标签：python, git, pull

谁能告诉我如何使用 Python从远程存储库（**自定义分支）中****提取数据？**我目前正在使用**GitPython** ...

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:42:01.197

您可以使用 python [dulwich](http://www.samba.org/~jelmer/dulwich/)包。

看看这个问题的一些方向： [Programmatically `git checkout .` with dulwich](https://stackoverflow.com/questions/6640546/programmatically-git-checkout-with-dulwich)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:45:04.857

[*克隆*](https://stackoverflow.com/a/5143155/1240268)存储[库](https://stackoverflow.com/a/5143155/1240268)。

```
repo = Repo.clone_from("path/of/repo/to/pull", "path/of/clone") 
```

[这个函数在docs](http://packages.python.org/GitPython/0.3.2/reference.html#git.repo.base.Repo.clone_from)中有更准确的描述。

.

为了获取最新的，你应该使用**pull** [GitPython 命令](http://packages.python.org/GitPython/0.3.2/reference.html#git.remote.Remote.pull)：

```
repo.pull() 
```

*默认情况下，这应该使用在实例化时指定的路径为`<src>:<dst>`.*****

# c# - 当 TryGetValue 方法返回 true 时更新 Dictionary 中的值

> ID：12244553
> 
> 赞同：4
> 
> 时间：2012-09-03T08:41:38.110
> 
> 标签：c#, .net

如果`Dictionary<TKey, TValue>.TryGetValue`方法返回`true`，则参数`value`包含与指定键关联的值。

我已经阅读了一些更改与指定键关联的值的示例：在调用该`TryGetValue`方法后，与键关联的值的更新由索引器执行，从而导致进一步访问`Dictionary`（参见以下代码）。

```
var d = new Dictionary<string, MyClass>();
...
MyClass obj;
if (d.TryGetValue(key, out obj))
{
    d[key].Update(...); // update the value
} 
```

该`obj`对象是对与键关联的值的引用。为什么不直接使用对象来更新值，如下面的代码？

```
MyClass obj;
if (d.TryGetValue(key, out obj))
{
    obj.Update(...); // update the value
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:43:28.343

> 为什么不直接使用对象来更新值，如下面的代码？

假设它一开始是可变的，那么使用现有的查找结果绝对是有意义的。您展示的第一段代码毫无意义地低效。

寻找更好的例子:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:21:10.583

示例代码与实际代码不同。它展示了一个给定的观点，仅此而已。这可能意味着很多示例都不是最佳的（我们都可以保证永远不要`ToList()`在实际上不需要它的 linq 示例代码中使用它吗？我相信这就是为什么当唯一的效果是使代码变慢时经常使用它的原因) 还有很多毫无意义的。

这甚至都不是坏事。示例代码中的注释将描述正在解释的内容，在实际代码中我们应该期望人们能够理解。同时，它不会记录您为什么要做一些看起来很奇怪的事情，因为这要么在周围的文本中，要么答案只是“因为它展示了这个功能，仅此而已”。在实际代码中，任何令人惊讶或看起来怪异的东西都应该在注释中解释（以及显而易见的原因，如果你不能很好地解释怪异，那么你就不会像你一样有理由认为这种怪异以为你是）。虽然一些初级开发人员的评论可能暗示他们在实际代码中使用前者，但事实是我们**想要**示例中的注释以解释对了解相关功能的人来说显而易见的内容 - 因为我们不熟悉它们，这就是我们正在阅读示例的目的，

使用可变引用类型，第二个版本确实更明智，坦率地说是一个更好的例子，但作者可能只是想考虑另一个特性的另一个例子，它与我们所承受的心理压力不同在编写真正的代码时。在某些方面恰恰相反（我们希望有名的而不是外来的，而教程作者必须使用每一个特性来解释它们）。

# jquery - 如何制作href链接？

> ID：12244554
> 
> 赞同：0
> 
> 时间：2012-09-03T08:41:42.790
> 
> 标签：jquery, asp.net-mvc-3, hyperlink, html-helper

我使用广告库。但我的图像位于名称等于产品创建日期的文件夹中。每个模型的图像都在**@Model.Date.Value.ToShortDateString()**命名文件夹中。在此代码中 img src="" 有效，但 href="" 无效：

```
<div class="ad-thumbs">
  <ul class="ad-thumb-list">
     <li>
       <a href="http://localhost:20234/Products/Images + @Model.Date.Value.ToShortDateString() + @Model.ImagePath1">
          <img src="@Url.Content( Path.Combine( "~/Products/Images/", @Model.Date.Value.ToShortDateString(), @Model.ImagePath1 ) )" width="42" height="42" alt=""/>
        </a>
     </li>
  </ul>
</div> 
```

我也试过

```
<a href="Path.Combine("http://localhost:20234/Products/Images", @Model.Date.Value.ToShortDateString(), @Model.ImagePath1)">
...
</a> 
```

和

```
<a href="~/Products/Images" + @Model.Date.Value.ToShortDateString() + @Model.ImagePath1">
...
</a> 
```

在 AD 库中，似乎有小图像，但无法打开大图像。如何编写 href 链接以打开大图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:44:00.693

为什么不使用 Jquery ？

```
<a href="#" id="addQuick" date="@Model.Date.Value.ToShortDateString()" path="@Model.ImagePath1" class="callmyJquerymethod">name</a> 
```

jQuery：

```
 $(document).on("click", ".callmyJquerymethod", function () {
   var requrl = '@Url.Action("redirectoAction", "YourController", null, Request.Url.Scheme, null)';
        $.ajax({
            type: "POST",
            url: requrl,
            data: { date: $(this).attr("date"),path:$(this).attr("path") },
            success: function (data) {
               // q.e.d.
            }
        }); 
```

在控制器中：

```
 public ActionResult redirectoAction(string date, string path)
        {
           string link=string.Format("localhost:20234/Products/Images/{0}/{1},date,path); 
           return Redirect(link);
        } 
```

这应该做！使用调试器并让我知道它是否到达控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:44:19.200

采用`Url.Action`

```
<a href="@Url.Action(Path.Combine("http://localhost:20234/Products/Images", @Model.Date.Value.ToShortDateString(), @Model.ImagePath1))">
...
</a> 
```

另请阅读[双引号之间的 Razor 代码](https://stackoverflow.com/questions/4249770/razor-code-between-double-quotes)

**更新1：**

```
@Url.Action(string.Format("http://localhost:20234/Products/Images/{0}/{1}", @Model.Date.Value.ToShortDateString(), @Model.ImagePath1)) 
```

来自 MSDN：

```
public static string Combine(
    string path1,
    string path2
) 
```

您提供了 3 个参数。

或者

```
@Url.Action(Path.Combine("http://localhost:20234/Products/Images", Path.Combine(@Model.Date.Value.ToShortDateString(), @Model.ImagePath1))) 
```

使用`Path.Combine`

**更新 2：**

```
<a href="<%=Url.Action(string.Format("~/Products/Images/{0}/{1}" , @Model.Date.Value.ToShortDateString() , @Model.ImagePath1))%>">
...
</a> 
```

**更新 3：**

```
<a href="<%=Url.Content(string.Format("~/Products/Images/{0}/{1}" , @Model.Date.Value.ToShortDateString() , @Model.ImagePath1))%>">
...
</a> 
```

# c# - 如何使用 C# 在 linq 中选择特定日期的数据

> ID：12244562
> 
> 赞同：0
> 
> 时间：2012-09-03T08:42:02.140
> 
> 标签：c#

我有以下格式的数据列表，

```
TF000040070004-29/08/12
TF000040070004-29/08/12
TF000040070005-29/08/12
TF000020010004-29/08/12
TF000020010007-29/08/12
TF000020010002-29/08/12
TF000010010012-29/08/12
TF000010010014-29/08/12
TF000010010014-29/08/12
TF000010010005-29/08/12
TF000010010005-29/08/12
TF000010010006-29/08/12
TF000010010002-29/08/12
TF000010010008-29/08/12
TF000010010008-29/08/12
TF000010010008-29/08/12
TF000010010008-29/08/12 
```

我使用以下 linq 查询来获取计数、键值以及最小值和最大值。现在我想选择特定日期的数据。

```
var serialNumbers = from sn in code
                    group sn by sn.Substring(0, 10) into g
                    select new { Key = g.Key, 
                                 Cnt = g.Count(), 
                                 Min = g.Min(v => v.Substring(10)), 
                                 Max = g.Max(v => v.Substring(10)) }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:50:06.033

尝试以下操作：

```
from sn in rawData where sn.Substring(15, 8) == "29/08/12"
                   select sn; 
```

然后，您可以将您的 linq 查询（`group by`等）附加到...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:54:37.183

如果字符串末尾没有有效的 DateTime，这将失败...

```
var selectionDate = new DateTime(2012,8,29);

var serialNumbers = from sn in code 
            where DateTime.Parse(
                         sn.Trim().Substring(sn.Trim().Length-8,8), 
                         new DateTimeFormatInfo {ShortDatePattern="dd/MM/yy"}) == 
                              selectionDate;
             group sn by sn.Substring(0, 10) into g 
             select new { Key = g.Key,  
                          Cnt = g.Count(),  
                          Min = g.Min(v => v.Substring(10)),  
                          Max = g.Max(v => v.Substring(10)) }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:59:53.583

首先，您需要转换数据以便更好地操作。

```
var transformed = code.Select(item=>
{
    var parts = item.Split(new string[]{"-"}, StringSplitOptions.None);
    var keyPart = parts[0].Substring(2);
    var key = long.Parse(keyPart);
    var date = DateTime.Parse(parts[1]);
    return new KeyValuePair<long, DateTime>(key, date);
} 
```

转换后，对强类型数据执行所需的查询：

```
var date = DateTime.Today; // your date here
var result = transformed.Where(item => item.Value == date); 
```

# seo - 我可以为 Google 站点地图使用 .aspx 扩展名吗？

> ID：12244563
> 
> 赞同：1
> 
> 时间：2012-09-03T08:42:04.493
> 
> 标签：seo, sitemap

我正在 Umbraco 中创建一个谷歌站点地图，但输出是 .aspx。这可以与谷歌一起使用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T05:03:18.470

如果您使用正确的 mimetype，可能是的。

此外，用户密码关于使用“重写规则”的评论可能是另一种方式。

# ruby - Ubuntu 中用于调试 Rails 应用程序的 Sublime text 2

> ID：12244569
> 
> 赞同：3
> 
> 时间：2012-09-03T08:42:24.690
> 
> 标签：ruby, debugging, ruby-on-rails-3.2, sublimetext2

最近我开始在 Rails 应用程序中使用 Sublime Text 2，我发现它真的很棒。然后我需要调试一个方法。我只是`debugger`输入了一个方法，什么也没发生。顺便说一句，我正在使用乘客。

然后我安装`pry_debug`并输入了一个`binding.pry`关键字，也没有结果。不破。现在在`Gemfile`我有`pry_debug`和`debugger`宝石。

那么我可以在 Sublime text 2 中调试 Rails 应用程序吗？特别是使用`pry_debug`宝石。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T15:28:43.813

您不使用`ruby-debug`槽 IDE，至少不使用 Sublime Text 2。将以下代码放在适当的位置。假设你已经安装了`ruby-debug`gem。

```
require 'ruby-debug'
...
debugger
... 
```

当您启动服务器时，您将从该断点（*调试器*代码行）获得调试控制台。从那里您可以使用 n（下一个）、c（继续）来浏览代码或我最喜欢`irb`在运行时更改它。这是旧的[屏幕投射](http://railscasts.com/episodes/54-debugging-with-ruby-debug)，但调试器仍然以相同的方式工作。

如果您真的想要 IDE 调试，您可以查看 Rad on Rails（我认为是对 Ruby 1.8.x 的官方支持），但相信我，这比它的价值更麻烦。坚持使用 Sublime Text 2，因为它很棒！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T19:28:46.500

您还可以尝试 Ruby Debugger for sublime，它是 sublime 的插件，使 sublime 成为 ruby​​ 的交互式调试器。

# android - 我想使用android在单击按钮时制作滚动图像

> ID：12244571
> 
> 赞同：0
> 
> 时间：2012-09-03T08:43:01.157
> 
> 标签：android

我在 res >> drawable 文件夹中添加了多个图像我想制作该照片的画廊，并且我添加了左右箭头图像。单击右箭头后，下一个图像应该显示，左箭头前一个图像应该显示。这样我想使用android滚动图像。请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:32:27.557

试试这个 - [http://saigeethamn.blogspot.in/2010/05/gallery-view-android-developer-tutorial.html](http://saigeethamn.blogspot.in/2010/05/gallery-view-android-developer-tutorial.html)

# c# - TreeView 的对象绑定到另一个视图

> ID：12244576
> 
> 赞同：0
> 
> 时间：2012-09-03T08:43:42.633
> 
> 标签：c#, .net, wpf

我有一个要求在下面列出的我们的一个应用程序中实现。我有一个查询如何在 WPF 中实现这一点。

1.  我有主 WPF 窗口，它分为左侧的树视图和带有一些文本框和组合框的表单，右侧的复选框。

2.  我想用存储在树节点的标记值中的对象中的相应值填充右侧表单。

3.  每当我单击树视图上的特定节点时，右侧的表单字段将在其标记值中显示对象存储的内容，如果我在右侧表单字段中进行一些修改，最终将被更新。

任何人都可以提供示例应用程序的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:07:26.100

您的问题与 WPF 中一个非常基本的概念有关，即[(Data) Binding](http://msdn.microsoft.com/en-us/library/ms752347.aspx)。请从这篇文章开始。

请注意，将有趣/可编辑的对象放在 的`Tag`属性中`TreeViewItem`对于 UI 设计来说是一个非常糟糕的主意。该`Tag`属性很容易从代码中访问，但从 UI 中绑定到它会非常困难/复杂 - 所有这些都是因为它`TreeView`本身只公开一个`SelectedItem/SelectedIndex`通常返回**数据项**的属性，而不是`TreeViewItems`.

请玩这个例子：

```
<StackPanel Orientation="Horizontal">
    <TreeView x:Name="twi">
        <TreeViewItem Tag="one" Header="111">
            <TextBlock Text="First" />
        </TreeViewItem>
        <TreeViewItem Tag="two" Header="222">
            <TextBlock Text="Second" />
        </TreeViewItem>
        <TreeViewItem Tag="three" Header="333">
            <TextBlock Text="Third" />
        </TreeViewItem>
    </TreeView>
    <StackPanel Orientation="Vertical">
        <TextBlock Text="The text:" />
        <TextBlock Text="{Binding ElementName=twi, Path=SelectedItem}" />
        <TextBlock Text="{Binding ElementName=twi, Path=SelectedItem.Tag}" />
        <TextBlock Text="{Binding ElementName=twi, Path=SelectedItem.Tag.Name}" />
        <TextBlock Text="{Binding ElementName=twi, Path=SelectedItem.Tag.Surname}" />
    </StackPanel>
</StackPanel> 
```

这是整个样本，只需将它放在任何地方。左边是物品，右边是一些标签。当您单击 TreeView 时，标签将更新并显示选择的内容及其`Tag`属性。当然，标签被设置为简单的字符串，所以 .Name 和 .Surname 不会显示任何内容。但是，如果您将 TAG 设置为某些数据对象，它将正确显示。请注意，如果您单击 TWI，它将执行您所期望的操作，但如果您单击 TWI 的**子**项，则不会 - 总而言之，它是子文本被选中！

您需要非常小心在树视图中放置的内容，并且非常小心放置标签值的内容/位置。这不是一个好方法。更典型的是，你会：

```
public class Person
{
    // properties
    public string Name { .... }
    public string Surname { ... }

    public List<Person> Subordinates { .... }
}

<StackPanel Orientation="Horizontal">
    <TreeView x:Name="twi">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Subordinates}">
                <TextBlock>
                    <Run Text="{Binding Name}" />
                    <Run Text=" " />
                    <Run Text="{Binding Surname}" />
                </TextBlock>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView>

    <StackPanel Orientation="Vertical">
        <TextBlock Text="The selected person:" />
        <TextBox Text="{Binding ElementName=twi, Path=SelectedItem.Name, Mode=TwoWay}" />
        <TextBox Text="{Binding ElementName=twi, Path=SelectedItem.Surname, Mode=TwoWay}" />
    </StackPanel>
</StackPanel> 
```

当然，创建一些示例数据并将其作为其 ItemsSource 提供给 treeView。这样，TreeView 将自动创建项目，应用模板，并且每次单击时，SelectedItem 都不会为您提供`TreeViewItem`s，而是 - with `Person`，可以直接编辑。因此，在窗口的右侧，简单绑定到`SelectedItem.Name`将“正常工作”，如果您将其设为 2-way，它将直接更新 Person。

免责声明：我没有运行代码。可能有错误和错别字。代码只是为了展示总体思路。

# java - Arquillian JUnit 测试套件

> ID：12244577
> 
> 赞同：3
> 
> 时间：2012-09-03T08:43:58.543
> 
> 标签：java, junit, junit4, jboss-arquillian

我想知道 Arquillian 是否支持测试套件，因为它没有记录。我想为我的套件创建一个通用部署，并让该套件的测试与该单一部署一起运行。

我试图将部署方法放到测试套件中，并在一个带有空测试方法的测试用例中以某种方式让它工作，但似乎 arquillian 试图为每个测试用例部署一个工件。

有没有办法实现这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:36:03.497

遗憾的是，目前还不支持测试套件，但它们[在路线图上](https://issues.jboss.org/browse/ARQ-567)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-09T17:57:45.027

我进一步推动了由 it-crowd 制作的扩展，添加注释到点部署提供类并为项目制作“通用”构建器。

[https://github.com/ingwarsw/arquillian-suite-extension](https://github.com/ingwarsw/arquillian-suite-extension)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T14:14:04.343

我知道现在帮助克里斯蒂安有点晚了，但希望它可以帮助任何想要做同样事情的人。

有一个非官方的扩展可以实现 Christian 所追求的功能。见：[https ://github.com/it-crowd/arquillian-suite-extension](https://github.com/it-crowd/arquillian-suite-extension)

# iphone - 添加到 UIPasteboard 的图像未在 TWITTER 中显示粘贴选项

> ID：12244583
> 
> 赞同：3
> 
> 时间：2012-09-03T08:44:09.337
> 
> 标签：iphone, objective-c, ios5, uikit, uipasteboard

我已经搜索了几个发布在 StackOverflow 上的 UIPasteboard 上的帖子/问题，但我没有找到任何解决我的问题的方法，所以发布了这个问题。

我想将复制的图像粘贴到 Twitters NewTwitt 和 Facebook 的评论中，但即使粘贴板对象中有图像，我也没有获得粘贴选项。我在 EMAIL 中获得了粘贴选项，它也可以正常工作。

这是我正在使用的代码：

```
 //image is object of UIImage, which holds .png Image

 UIPasteboard *objPasteboard = [UIPasteboard generalPasteboard];
 NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(image)];
 [objPasteboard setData:imageData forPasteboardType:@"public.png"]; 
```

![即使我的 UIPasteboard 对象有图像，在 Twitter 中我也没有获得 PASTE 选项。](../Images/c10a7d1149ead94f9c59bd9d4f95f839.png)

我是否需要实现更多内容才能将其粘贴到 Twitter 和 facebook 中。我正在发布图像屏幕截图以供参考。

谁能帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:37:29.427

您不能粘贴`UIImage`到`UITextView`并且粘贴的位置是`UITextView`. 它`NSString`不支持`UIImage`。您可以将其粘贴到`SMS`. `UITextView`您在它们中看到的哪些图标或符号是`Unicode`字符而不是`UIImage`两者都不同。

# c# - 基于约定的构造函数字符串参数与 Ninject 的绑定

> ID：12244586
> 
> 赞同：8
> 
> 时间：2012-09-03T08:44:14.817
> 
> 标签：c#, .net, ninject, application-settings, ninject-conventions

我在我的项目中使用 Ninject 作为 IoC 容器。我有以下课程：

```
public class SomeRepository:ISomeRepository
{
    public SomeRepository(string someDatabaseConnectionString)
    {
        // some code here..
    }
} 
```

在我的应用程序设置文件中，我有一个名为“someDatabase”的连接字符串。默认情况下，应该添加以下配置，以便将此连接字符串注入构造函数：

```
kernel.Bind<ISomeRepository>()
    .To<SomeRepository>()
    .WithConstructorArgument("someDatabaseConnectionString", connString); 
```

但我想实现这些字符串的基于常规的绑定。名称以“ConnectionString”结尾的字符串类型的所有构造函数参数的值应取自应用程序的 connectionStrings 配置部分并自动注入。我也想为 appSettings 部分实现类似的约定。这种方法在 Mark Seeman 的[“Primitive Dependencies”](http://blog.ploeh.dk/2012/07/02/PrimitiveDependencies.aspx)文章（“原语约定”部分）中有更详细的描述。示例中使用了 Castle Windsor 容器。

是否可以使用 Ninject 实现这样的约定，最好的方法是什么？我已经尝试过 ninject.extensions.conventions 但似乎它没有这样的功能，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:57:32.377

Ninject 现在看起来不像这种基于约定的绑定。[我在这里有一个类似的问题](https://stackoverflow.com/questions/11907306/handling-application-settings-with-ninject-and-convention-based-binding)，建议是创建一个接口来返回连接字符串并将其作为参数。不过，对于许多不同的连接字符串来说，这可能很乏味。

这只是一个想法，但是您能否有一个`IConnectionStringProvider<T>` 可以使用反射来获取 T 的名称并以这种方式查找应用程序设置的方法？也许是这样的：

```
public class ConnectionStringProvider<T> : IConnectionStringProvider<T>
{
    public string Value
    {
        // use reflection to get name of T
        // look up connection string based on the name
        // return the connection string
    }
}
...
public class SomeRepository:ISomeRepository
{
    public SomeRepository(IConnectionStringProvider<SomeRepository> connectionStringProvider)
    {
        this.connectionString = connectionStringProvider.Value;
    }
} 
```

此外，如果这不起作用，您可能会有一个`IConnectionStringProvider`以类型作为参数的非泛型：

```
public class ConnectionStringProvider : IConnectionStringProvider
{
    public string GetValueFor(Type type)
    {
        // use reflection to get name of type
        // look up connection string based on the name
        // return the connection string
    }
}
...
public class SomeRepository:ISomeRepository
{
    public SomeRepository(IConnectionStringProvider connectionStringProvider)
    {
        this.connectionString = connectionStringProvider.GetValueFor(this.GetType());
    }
} 
```

如果其中之一有效，那么它们将具有可以与任何 DI 容器一起使用的优势。

# java - 如何修复此错误：不支持 SQL92？

> ID：12244591
> 
> 赞同：9
> 
> 时间：2012-09-03T08:44:38.093
> 
> 标签：java, oracle, netbeans, jdbc

我在java中编写代码并与oracle建立数据库连接。我运行一些脚本并收到此错误。我的脚本在 toad 中工作，但在我的项目中不起作用

网址包括 .

```
.
.
.
.
    DECODE
                 (REF.target_type_code,
                  '1', wf.workflow_name,
                  '20', reqtyp.request_type_name,
                  '6', prj1.project_name,
                  '59', trootinfo1.NAME,
                  '55', DECODE
                     (document.checked_out_by,
                      NULL, 
                      REPLACE
                         (REPLACE
                             (REPLACE
                                 (REPLACE
                                     (REPLACE
                                         (knta_i18n_resource.get
                                             ('DMS_REFERENCE_DETAIL_CHECKED_OUT.TXT'
                                             ),
                                          knta_i18n_format_utils.format_date
                                                        (document.checked_in_date,
                                                         3 
                                                        )
                                         )
                                     ),
                                  document.version_number
                                 ) 
                             ),
                          '{4}' 
                         )
                     )
                 ) reference_detail,

.
.
. 
```

.

```
try { 
    stmt = connection.createStatement(); 
    rset =   stmt.executeQuery(url) ;  
}  catch (Exception e) 

{  
    error= e.getLocalizedMessage() ;
    return 4; 
} 
```

由于 { } 括号而发生此错误。我测试它。当我删除括号时不会出错。但我需要它们，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T12:36:03.203

这都是关于`{`和 的`}`。你不使用它们。Ojdbc 不会解析它。使用不同的令牌代替它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T08:12:28.163

这可能是由于 JDBC Escape 语法（参见 JDBC 4.1 规范的第 13.4 节）。JDBC 驱动程序应处理和之间的转义，`{`并将`}`转义的标准函数、外连接等转换为数据库特定格式。

据我所知，驱动程序应该只解析出现在语句主体本身中的转义，而不是当它在语句中的文本内时（如您的示例中所示）。所以对我来说，这看起来像是驱动程序的 JDBC 转义处理中的一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-10T21:51:16.003

您可以通过遵循另一个 StackOverflow 帖子的答案来解决这个问题： [使用 JDBC 在 Oracle 数据库上创建 Java](https://stackoverflow.com/questions/16141737/create-java-on-oracle-database-with-jdbc)

总结如下：

```
CallableStatement stat = conn.prepareCall(sql);
stat.setEscapeProcessing(false);
stat.execute(); 
```

中间线是你似乎缺少的东西。在我找到那个帖子之前我无法弄清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:18:52.847

似乎有几个 REPLACE 调用没有足够的参数。从左边数起，第一个 REPLACE 有两个参数。第二个只有一个论点。第三个有两个论点。第四个只有一个论点。第五个（最后一个）有两个参数。在 Oracle 中，[REPLACE 函数](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions141.htm#i78608)至少需要两个参数。我无法确定这是否是错误的原因，因为您尚未发布完整的声明，但我当然希望 REPLACE 缺乏适当的论据是一个问题。

分享和享受。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-22T16:12:04.520

在您的脚本中替换`'{4}'`为。`CHR(123)||'4'||CHR(125)`

# javascript - 检测对背景大小的支持：封面

> ID：12244598
> 
> 赞同：8
> 
> 时间：2012-09-03T08:45:15.577
> 
> 标签：javascript, jquery, css

检测对 CSS3 *background-size:cover*支持的保存方法是什么，尤其是在 IE < 9 中？

以下测试在 IE < 9 中返回误报，因为它实际上将*background-size*设置为*cover*：

```
div.style.backgroundSize = 'cover'; 
```

我在测试时得到的唯一真实结果：

```
if ('backgroundSize' in div.style) 
```

但根据网站[http://www.standardista.com/css3/css3-background-properties/#bg11](http://www.standardista.com/css3/css3-background-properties/#bg11)，IE 6/7/8 应该返回*auto* ，不支持仅*覆盖*和*包含。*

**编辑：**

我想使用自己的解决方案，但我检查了[Modernizr 使用的代码](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css-backgroundsizecover.js)。似乎他们使用了相同的技术，在 IE < 9: Set *backgroundSize = 'cover'*然后检查*style.backgroundSize == 'cover'*。

请参阅我的[JSFiddle](http://jsfiddle.net/cx6DP/1/)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:50:16.137

如果您使用`Modernizr`，您只能下载执行此类任务所需的代码

[http://modernizr.com/download/#-backgroundsize-testprop-testallprops-domprefixes](http://modernizr.com/download/#-backgroundsize-testprop-testallprops-domprefixes)

然后你可以测试

```
if (Modernizr.backgroundsize) {
    /* backgroundSize supported */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T22:17:24.233

如果您试图检测功能低下的浏览器以避免将邮票图像卡在中间，那么一种快速而肮脏的解决方法是

```
var rules = document.styleSheets[0].cssRules; 
```

如果它未定义，那么您知道您的浏览器功能低下，可能应该采用您的后备方法。YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T18:12:06.063

您需要在设置之前检查 BackgroundSize 是否作为样式属性存在。

```
var supported = ('backgroundSize' in document.documentElement.style);
if(supported){
    var temp = document.createElement('div');
    temp.style.backgroundSize = 'cover';
    supported = temp.style.backgroundSize == 'cover';
};
return supported; 
```

来源：[http ://upshots.org/javascript/javascript-detect-support-for-background-size-cover](http://upshots.org/javascript/javascript-detect-support-for-background-size-cover)

在此之前，您可能还想尝试使用 CSS.supports() 进行检测。见 MDN：[https ://developer.mozilla.org/en-US/docs/Web/API/CSS/supports](https://developer.mozilla.org/en-US/docs/Web/API/CSS/supports)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-11-01T12:10:29.920

这仅使用 javascript，没有 jquery 只需检查您使用的浏览器版本

```
//check if Is bad IE. 
var noBGSizeSupport = window.attachEvent && !window.addEventListener 

if(noBGSizeSupport){
    //does not support BG size property
} else {
  // supports background size property
} 
```

# c# - 为什么在 Win Classic 主题中 TabControl 的背景不会改变颜色？

> ID：12244602
> 
> 赞同：1
> 
> 时间：2012-09-03T08:45:36.810
> 
> 标签：c#, .net, winforms, tabcontrol, tabpage

在 Win7 主题中效果很好，但在 win 经典主题中看起来很奇怪。

在 Win 7 主题中： ![在此处输入图像描述](../Images/2abd9cea4e13aed5f69f8ea25acf1e5f.png)

在 Win Classic 主题中：

![在此处输入图像描述](../Images/5a03cec6f9df474bb8e2e94d88a87e7f.png)

有没有机会解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:20:29.113

这是设计使然。它与“改变颜色”没有任何关系，它实际上是一种透明效果。窗口是矩形的，形状不适合标签。控件首先通过要求父窗口绘制自己，传递它自己的窗口句柄来绘制选项卡的空间。然后在其上绘制选项卡。您可以通过设置父级的 BackgroundImage 属性来查看这一点。还有一种方式，比如说，Label 和 PictureBox 控件模拟透明度。

这是由视觉样式渲染器实现的行为。Windows Classic 不使用任何透明效果。

如果这对您真的很重要，那么请考虑 WPF。它的控件不使用窗口，因此不受所选主题的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:32:30.040

如果您真的想要自己*的独立于样式的自*定义选项卡，[请](http://www.codeguru.com/cpp/controls/controls/tabcontrols/article.php/c2237/Implementing-an-owner-drawn-Tab-Control.htm)使用[`OwnerDrawFixed`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.drawmode.aspx). 请参阅*[codeproject 上的示例](http://www.codeproject.com/Articles/12538/Y-et-A-nother-TabControl-A-Custom-Tab-Control-With)*。

![Curtis Schlak 的自定义选项卡控件。](../Images/acc28fcd2bff12690b52ab0a159834cb.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:23:04.210

它与转到[如何更改 C# winforms 中未使用空间选项卡的背景颜色相同的问题？](https://stackoverflow.com/questions/11822748/how-to-change-the-background-color-of-unused-space-tab-in-c-sharp-winforms/11823739#11823739)

你必须重载`OnPaintBackground`方法

# navigation - ExpressionEngine 相关页面导航

> ID：12244605
> 
> 赞同：0
> 
> 时间：2012-09-03T08:45:49.950
> 
> 标签：navigation, expressionengine

我遇到了 ExpressionEngine（特别是 v2.5.2）的问题，EE 论坛今天因某种原因关闭，这就是我在这里发帖的原因。希望有人可以提供帮助。

我在 EE 中设置了一个名为“静态页面”的频道，其中包含我的静态页面的所有数据（显然）。该频道还有一个名为 {static_parent_page} 的关系字段。我使用此关系字段来构建我的导航，因此您可以使用此关系字段在您选择作为父页面的任何页面下拥有子页面。

例如。我创建了一个名为“父页面”的页面和另外两个名为“子页面 1”和“子页面 2”的页面，在子页面 1 和 2 条目上，我在 {static_parent_page} 字段中设置了“父页面”，它们出现在导航中，如这个：

-父页面
---子页面1
---子页面2

无论如何，我希望这是有道理的。

到我的问题上。我希望能够转到“父页面”，它有两列，一是侧边栏，一是主要内容。在侧边栏中，我想要一个指向顶部和下方的父页面的链接，该链接也指向相关的子页面。

我相信我已经解决了我使用 {related_entries} 标记的问题，但是当我转到其中一个子页面时，父页面链接仍然显示，但其他相关子页面消失了。

所以......（我认为我已经使这比它需要的更复杂，道歉）基本上我希望侧边栏显示：

-父页面
---子页面1
---子页面2

无论您是在“父页面”、“子页面 1”还是“子页面 2”。

有任何想法吗？

在此先感谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:53:06.183

如果无法看到您的模板代码，我会说尝试在模板中设置 dynamic="off" 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T00:23:25.127

购买和使用[结构模块](http://buildwithstructure.com/)。它是为您描述的确切目的而构建的，包括动态生成导航。

旁注：在 EE 2+ 中，动态参数需要设置为“no”而不是“off”。

# sbt - 在 SBT 中的所有子模块中共享配置

> ID：12244607
> 
> 赞同：2
> 
> 时间：2012-09-03T08:45:59.277
> 
> 标签：sbt

我有两个测试配置，我想将它们包含在我的所有子项目中。我希望会有一个简单的方法来做到这一点。目前，我将它们添加到每个单独的项目中，通过调用：

```
.configs(config1, config2) 
```

为了确保每个项目中都包含一些设置，您可以这样做：

```
scalaVersion in ThisBuild := "2.10.0" 
```

还有一个`ThisProject`对象。我想知道我是否能够使用这些对象中的任何一个来为所有项目添加配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T09:50:45.133

您可以定义一个`Project => Project`并传入项目。使用 sbt 0.13，您还可以在 build.sbt 中定义一个多项目构建。

在`project/common.scala`：

```
import sbt._
import Keys._

object Common {
  val Config1 = config("config1") extend(Test)
  val Config2 = config("config2") extend(Test)

  def addConfigs(proj: Project): Project = proj.configs(Config1, Config2)
} 
```

在`build.sbt`：

```
import Common._

lazy val app = addConfigs(project.in(file("app"))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:39:25.927

如果您使用具有聚合的父项目，配置不会应用于子项目吗？

```
object MyBuild extends Build {
  lazy val root = Project(id="myproject", base=file("."))
    .aggregate(sub1, sub2)
    .configs( config1, config2 )

  lazy val sub1 = Project(id = "sub1", base = file("sub1"))
  lazy val sub2 = Project(id = "sub2", base = file("sub1"))
} 
```

除了“ThisBuild”范围之外，还有一个“全局”范围可能起作用：[在此处输入链接描述](https://github.com/harrah/xsbt/wiki/Getting-Started-Scopes)，但您可以使用项目级插件来应用配置 -[具有插件](http://scala-programming-language.1934581.n4.nabble.com/scala-tools-sbt-Question-quot-Global-quot-sbt-configuration-td3232861.html)和[SBT 插件页面](https://github.com/harrah/xsbt/wiki/Plugins)的全局配置（请参阅示例插件部分）。

# digital-signature - 相同的消息摘要但不同的签名值

> ID：12244608
> 
> 赞同：2
> 
> 时间：2012-09-03T08:46:03.287
> 
> 标签：digital-signature, message-digest, xmlsec

我有 2 个签名文件，仅在命名空间中有所不同。这两个文件都提供相同的消息摘要。我使用相同的密钥使用相同的算法 RSA-SHA1 进行签名。但是有2个不同的签名。我认为只要消息摘要、密钥和算法相同，签名应该相同，无论原始文件如何。

我将 python-xmlsec1 库与 openssl1.0.1 一起使用。

第一个带有命名空间的文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<myns:MyElement xmlns:myns="urn:abc" ID="1">
    <myns:SubElement AssertionID="2" attr1="value1"/>
    <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
            <ds:CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments"/>
        <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
        <ds:Reference URI="">
            <ds:Transforms>
                <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <ds:DigestValue>zzIulx6UyIN9BrYp0gpW9cCx05k=</ds:DigestValue>
        </ds:Reference>
    </ds:SignedInfo>
    <ds:SignatureValue>Gpcf/Yy1U9M6jvQL024pfMNHqB0+3kpUvFK9XF8wglgKIo9kPi2eyZ0qDEBm93ecXD1CfHLyHZc3gKR4cMsfobOkWDCoT5VA6FYwjyASnGlEyJE7dpvqU1BE7wDuCxDznI1NQsRTw4Ix8jFx20Cd91bbDibYG8Fn9ACVZdHRo=</ds:SignatureValue>
    </ds:Signature>
</myns:MyElement> 
```

第二个没有命名空间的文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<myns:MyElement xmlns:myns="urn:abc" ID="1">
    <myns:SubElement AssertionID="2" attr1="value1"/>
    <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
        <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
        <Reference>
            <Transforms>
                <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>zzIulx6UyIN9BrYp0gpW9cCx05k=</DigestValue>
        </Reference>
    </SignedInfo>
    <SignatureValue>gs3U/ea2KmLbAy5Tle0196W+AcW7ftS2POgZHYaGLUX0QgPXRx5+a0ZhJ4d0NitzaTgXQtnPaMfqcsw8ZMBEQxYLdeulErtosX5bpiOt9SQpbRre7hB8VJPjb2ZT+Vu5V4SkAf1LI624JjeVUr0xrSjoCSP5ppxW87gQDPU=</SignatureValue>
    <KeyInfo>
        <KeyName/>
    </KeyInfo>
</Signature>
</myns:MyElement> 
```

这两个文件都可以通过 xmlsec 验证（给定公钥）。

谁能解释一下这是怎么发生的？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:27:39.193

我看到签名值不仅仅取决于摘要值。它是基于整个 SignedInfo 节点计算的。 [http://www.mismo.org/files/InformationSecurityGuidelines/XML_Signature_Section_for_General_I-Guide-1.pdf](http://www.mismo.org/files/InformationSecurityGuidelines/XML_Signature_Section_for_General_I-Guide-1.pdf)

# visual-studio-2010 - 停止 VS2010 在解决方案加载时询问重新映射 url

> ID：12244615
> 
> 赞同：5
> 
> 时间：2012-09-03T08:46:37.807
> 
> 标签：visual-studio-2010

我有一个包含多个 Web 应用程序的解决方案。切换到 VS2010 后，它不断询问我是否要将 Web 应用程序 url 重新映射到解决方案的物理位置（这与开发中的多个版本不同）。大多数时候我只想运行 gui，而不关心 web 端。这很烦人，因为它会阻止解决方案加载。

每次我加载不同版本的解决方案时，如何让它停止询问我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:15:19.817

您是否尝试过安装最新的 VS 2010 服务包？

这个[SO question](https://stackoverflow.com/questions/6594453/visual-studio-2010-automatically-update-iis-physical-path-when-opening-a-diffe)解决了一个类似的问题（至少听起来与我相似），并且选择的答案建议从[http://www.microsoft.com/en-us/download/details.aspx?id=23691](http://www.microsoft.com/en-us/download/details.aspx?id=23691)获取服务包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T04:28:16.720

只要将某些项目配置为通过 IIS 托管（项目属性-> web）进行调试，您就会遇到这种麻烦。执行以下步骤：

1.  更改该选项卡上的配置以不再使用 IIS；改为选择 VS Web 开发服务器 (Cassini)。
2.  在同一选项卡上，取消选中“将服务器设置应用于所有用户（存储在项目文件中）”
3.  随时随地保存、签入和同步。

事实上，即使选择按上述顺序使用 IIS Express 也可以完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:10:52.447

首先想到的是创建另一个（或修改一个）解决方案文件，如果您大部分时间不使用它，请右键单击卸载（而不是删除）Web 项目。

# asp.net - 如何解决我的 SQL Server CE 错误？

> ID：12244616
> 
> 赞同：0
> 
> 时间：2012-09-03T08:46:38.917
> 
> 标签：asp.net, sql-server-ce

我需要我的网站用户能够将他们的`.sdf`文件上传到我的网站。

它在本地为我工作，但在我部署到我的托管环境后，我收到以下错误：

> 无法加载与版本 8482 的 ADO.NET 提供程序对应的 SQL Server Compact 的本机组件。安装正确版本的 SQL Server Compact。有关详细信息，请参阅知识库文章 974247。

我的主机帐户不支持 SQL Server 4.0 Compact 数据库。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:32:48.527

我相信您可以对 SQL Server CE 4.0 进行 bin 部署。请参阅此 Stackoverflow 线程[托管站点 Asp.net MVC 和 SQL Server Compact 4](https://stackoverflow.com/questions/5398937/hosting-site-asp-net-mvc-and-sql-server-compact-4)

# javascript - 如何仅在横向模式下显示页面？

> ID：12244618
> 
> 赞同：0
> 
> 时间：2012-09-03T08:46:50.200
> 
> 标签：javascript, jquery, mobile, jquery-mobile, screen-rotation

这个主题在这里有很多关于 SO 的帖子，但我想知道是否有人真的找到了解决方案。

我想强制某些页面仅以横向模式显示。

我怎样才能做到这一点？

我正在使用[jQuery Mobile](http://jquerymobile.com/)脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:51:36.083

好吧，取决于您使用的平台/设备..

你不能像这样做一个api调用。

```
if(approiateAPICALL.orientation == "landscape")
{
//handle land scapre
}
else
{
// handle anything else
} 
```

你可以通过检查宽度 > 高度然后是横向，如果高度 > 宽度那么它的纵向来处理这个问题......

^不是最好的方法，但只是一个例子

更新：

> 方向改变时机
> 
> 与客户端高度和宽度变化相关的orientationchange 的时间在浏览器之间是不同的，尽管当前的实现将为您提供从window.orientation 派生的event.orientation 的正确值。这意味着如果您的绑定依赖于高度和宽度值，您可能希望将orientationChange 与 $.mobile.orientationChangeEnabled = false 一起禁用，以让后备调整大小代码触发您的绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:52:05.627

在调整大小时，检查屏幕纵横比是否大于 1.0（宽度/高度），如果是则显示您的页面，如果没有隐藏您的页面并显示一条消息，要求用户旋转他们的设备。

您可以使用不同的比例来获得与高度成比例的更宽页面。

# c# - WinForms 中的 WPF：尽管 UI 线程处于活动状态，但在 Dispatcher.Invoke 上被阻止

> ID：12244620
> 
> 赞同：4
> 
> 时间：2012-09-03T08:46:55.890
> 
> 标签：c#, .net, wpf, user-interface, freeze

我们有一个嵌入在 WinForms 控件中的 WPF 控件，该控件又作为 ActiveX 控件公开。这个 ActiveX 最终被用于第三方开发的 C++ 应用程序中。

在某些时候，ActiveX 控件的 UI 被冻结，而 C++ 应用程序的其余部分运行良好。经过一些调试，我注意到 WPF 控件在每次调用 Application.Current.Dispatcher.Invoke 时都会被阻止。但是，WinForms 控件可以很好地处理它的 Control.Invoke 调用。每当我暂停调试器时，我可以看到 UI 线程正在 C++ 应用程序中做一些工作，但似乎没有被阻塞或等待任何东西。就好像 UI 线程突然莫名其妙地拒绝执行 WPF 委托。

当 C++ 应用程序长时间（几分钟）独占 UI 线程时，WPF 控件有时会进入此状态。我要做的第一件事是为这样一个耗时的任务使用不同的线程，但正如我已经说过的，我不对 C++ 应用程序正在做什么负责。无论如何，这不是我的 WPF 控件以这种方式运行的理由。我不知道如何解决这个问题；任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:29:05.943

我建议运行 MS 调试诊断工具 - [http://support.microsoft.com/kb/2580960](http://support.microsoft.com/kb/2580960)。

我们使用它来识别 COM 互操作阻塞问题取得了很好的结果，在我们的案例中，这些问题归结为待处理的 COM 终结器阻塞垃圾收集。您可以在各种模式下运行它，但是当使用 .NET 分析运行时，它会突出显示终结器队列等的任何问题。运行起来有点笨拙，但它为您提供的信息是黄金。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:23:59.273

问题`Invoke`在于它的行为类似于多线程调用；但它真的不是，`Invoke`是阻塞 - 你仍然一次只让一个线程。 `Invoke`实际上只是确保在 UI 线程上执行操作。这是通过将消息强制进入消息泵并以这种方式执行来完成的。该操作可能会在线程调用`Invoke`需要执行的操作以让操作继续时被阻止。例如：

```
lock(someLock)
{
    dispatcher.Invoke(SomeMethod);
}

//...

public void SomeMethod()
{
  lock(someLock)
  {
  //... do some work here
  }
} 
```

在此示例中，在持有锁时`Invoke`被阻止调用。`SomeMethod`但是，`SomeMethod`想要相同`lock`，所以它被阻止等待`lock`. 你有一个僵局。

我建议`BeginInvoke`改用。

我不确定这是否是您的问题，因为您没有提供任何代码；但这是一个*非常*常见的问题`Invoke`。通常没有理由需要`Invoke`；如果您认为有需要，这通常表明存在问题。

# android - 面板内的 RadioGroup？

> ID：12244625
> 
> 赞同：0
> 
> 时间：2012-09-03T08:47:12.693
> 
> 标签：android, radio-button, radio-group

如何在面板内显示 RadioGroup？我需要显示这样的东西：

![在此处输入图像描述](../Images/fff1b9cf1d612ea9f432e05c83515f2b.png)

我创建了`RadioGroup`和`RadioButtons`by 代码，但我不知道如何在图像中显示面板。

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:50:25.923

您不需要任何“面板”，只需`background`为您的`RadioGroup`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:50:30.160

将此代码尝试到相对布局中

```
<RadioGroup
            android:id="@+id/ratingRadioGroup"
            android:layout_width="wrap_content"
           android:layout_height="40dp"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/btnDob"
            android:layout_marginLeft="50pt"
            android:orientation="horizontal"
             android:background="#F9E60E" >

            <RadioButton
                android:id="@+id/e"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/checkBox1"
                android:layout_alignTop="@+id/ratingRadioGroup"
                android:checked="true"
                android:paddingRight="10pt"
                android:text="M" />

            <RadioButton
                android:id="@+id/radioFemale"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="10"
                android:text="F" />
        </RadioGroup> 
```

# java - 在Java中将准备好的语句OBJECTS放在哪里？

> ID：12244627
> 
> 赞同：5
> 
> 时间：2012-09-03T08:47:14.613
> 
> 标签：java, jdbc, prepared-statement

我想使用准备好的语句。我已经读过准备好的语句的优点是它们不必每次都再次解析/编译，因此可以减少负载。现在我的问题是，在 Java 中还是在我的数据库系统中，已经准备好的语句的“识别”发生在哪里？我问，因为我想知道在我的代码中将我的 PreparedStatement 对象存储在哪里：作为类属性并为每个请求设置参数，或者在有请求时创建一个新的准备好的语句对象。

```
 public class Option1 {
       private PreparedStatement myStatement;
       public Option1() {
          // create the myStatement object
          myStatement = conn.prepareStatement("");
       }
       public List<Items> query() {
          // just use the myStatement object
          myStatement.setString(1, "foo");
       }
   }

    public class Option2 {
       public List<Items> query() {
          PreparedStatement myLocalStatement = conn.prepareStatement("");;
          // create and use the statement
          myLocalStatement.setString(1, "foo");
       }
   } 
```

现在我的问题是，选择 1 或 2 更好的方法是什么？但是，我必须在每次执行后做一个“清理”，做`myStatement.close()`对吗？

也许我应该换个方式问它：如何以最有效的方式重用它？

**更新**：如果有两个答案，一个更喜欢选项 1 和一个选项 2，我恳请社区投票支持他们的选择 ^^

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T09:01:17.307

`where`SQL 数据库正在缓存以完整查询（包括子句）为键的语句的执行计划。通过使用准备好的语句，查询是相同的，无论您使用什么值（它们总是'？'）。

因此，从数据库缓存的角度来看，您的两个选项之间没有区别。请参阅[这篇文章](http://www.theserverside.com/news/1365244/Why-Prepared-Statements-are-important-and-how-to-use-them-properly)，该文章还描述了一些 Java EE 特定问题。

但是，从代码的角度来看，当然还有其他一些因素，正如其他人所提到的，特别是当您经常重用它时（就像在[这个例子](https://stackoverflow.com/questions/2467125/reusing-a-preparedstatement-multiple-times)中一样）。重要的是，一些 JDBC 驱动程序支持[预编译](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String%29)。
请记住，准备好的语句最初会增加开销，同时赶上后续的每次使用 - 这是一个[很棒的章节](http://oreilly.com/catalog/jorajdbc/chapter/ch19.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:54:32.207

我会推荐选项2

```
public class Option2 {
   public List<Items> query() {
      PreparedStatement myLocalStatement = conn.prepareStatement("");;
      // create and use the statement
      myLocalStatement.setString(1, "foo");
   }
} 
```

好像**逻辑单元分布在许多方法和数据成员中一样，故障点增加并且容易出错。**

或者我会喜欢：

```
public class Option2 {
   public List<Items> query(String sql, String parameter) {
      PreparedStatement myLocalStatement = conn.prepareStatement(sql);
      // create and use the statement
      myLocalStatement.setString(1, parameter);
   }
} 
```

并像这样使用它：

```
Option2 myQuery = new Option2();
myQyery.query("SELECT * FROM PERSON WHERE NAME = :?","ANY_NAME"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:54:06.543

我会选择选项1：即。

```
public class Option1 {
       private PreparedStatement myStatement;
       public Option1() {
          // create the myStatement object
          myStatement.setString(1, "foo");
       }
       public List<Items> query() {
          // just use the myStatement object
       }
   } 
```

原因：我可以在需要时为其分配新对象。通过做这样的事情

`pst = con.prepareStatement(myQuery);`在函数中，在您的情况下，函数将是`Option1()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-16T12:21:44.407

就个人而言，我喜欢第二种选择，这就是我的想象

```
public void addAccount(String username, String password, String name) {
String query="INSERT INTO Accounts (username, password, name) VALUES (?,?,?)";
try(Connection connection = dataSource.getConnection()) {
  try(PreparedStatement statement = connection.preparedStatement(query)){
     statement.setString(1, username);
     statement.setString(2, password);
     statement.setString(3, name);
     statement.executeUpdate();
  }
 } catch(SQLException e) {
  e.printStacktrace();
 } 
```

之所以应该使用 try-with-resource 只是因为它可以处理常见的编码错误，例如发生错误时关闭。这也保证了执行后，您的语句/连接/结果集将被关闭（或任何其他问题）

# session - 注销时带有数据库会话 1.2.0 和 spring 安全核心的 grails 2.1 中的 InvalidatedSessionException

> ID：12244629
> 
> 赞同：0
> 
> 时间：2012-09-03T08:47:22.283
> 
> 标签：session, grails, spring-security, grails-plugin, grails-2.0

我需要将会话存储在数据库中。[我在 1.2.0 版本中使用了来自 Robert Fischer ( https://github.com/RobertFischer/grails-database-session](https://github.com/RobertFischer/grails-database-session) )的数据库会话插件，并将其更新为 grails 2.1。我在我的主项目中安装了插件，除了 spring security core 中的注销功能外，一切正常。当我通过 spring security logout-controller 注销时，出现以下异常：

```
URI: /myProject/j_spring_security_logout
Class: grails.plugin.databasesession.InvalidatedSessionException
Message: Session ABD84995E13B9D1AD4DBD228C0E5902C is invalid; cannot access/modify it. 
```

![截屏](../Images/4c93b5b7ee431287ce383b6b7eccaf59.png)

也许您知道解决此问题的解决方案？

我的环境：

```
Grails 2.1
Spring Security Core 1.2.7
grails-database-session 1.2.0 by Robert Fischer (see Github)
mySQL-Database is connected (JDBC) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:06:21.217

这是 Spring Security Core 中的一个错误：它试图访问一个无效的会话，这违反了 Servlet 规范。但是，在他们解决这个问题之前，您可以将`config.grails.plugin.databasesession.ignoreinvalid`属性设置为，`true`并且不会出现异常。

# objective-c - 将 Kal 与选项卡视图应用程序一起使用

> ID：12244632
> 
> 赞同：0
> 
> 时间：2012-09-03T08:47:34.920
> 
> 标签：objective-c, ios, xcode, calendar, uitabbarcontroller

我想将 Kal 用于我的选项卡视图应用程序。它已经有 3 个标签，新闻、日历和关于我们。我对 Objective-C 也很陌生。

我想我已经正确集成了 Kal，导入它时不会抛出任何错误。

不过，我实际上将如何将它添加到我的 SecondViewController 中？据我了解，文档中提供的示例只是在启动时立即显示日历，这不是我想要的。我还查看了 Holiday 示例应用程序，它也立即显示日历。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:18:45.707

您只需将其添加到您的 secondViewController 的 viewdidload 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    KalViewController *calendar = [[[KalViewController alloc] init] autorelease];
    [self.view addSubview:calendar.view];
    [self addChildViewController:calendar];
} 
```

您还需要确保将日历视图控制器包含为子视图控制器，以确保视图控制器层次结构有效。

# mysql - 使用 MySQL 语句连接两行

> ID：12244634
> 
> 赞同：1
> 
> 时间：2012-09-03T08:47:40.900
> 
> 标签：mysql, sql, select

我正在寻找可以将同一张表的 2 行连接在一起的 SQL 语句。

目前，我的表如下所示：

```
LocationName | StationName | 12:00 - 13:00 | 13:00 - 14:00 | 15:00 - 16:00
T2           | Entrance    | Michael       | Michael       | Michael
T2           | Entrance    | Joyce         | Joyce         | Joyce 
```

如您所见，有 2 行具有相同的 LocationName 和 StationName。唯一不同的是，在时间段之间，里面分配了2个人。我的目标是使用 mysql 语句将这 2 行合并为 1 行。

我希望它看起来像这样：

```
LocationName | StationName | 12:00 - 13:00 | 13:00 - 14:00 | 15:00 - 16:00
T2           | Entrance    | Michael Joyce | Michael Joyce | Michael Joyce 
```

如您所见，2 个不同的名称落在同一列中，只有 1 行。这就是我想要的。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:50:41.093

为此使用**[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)**

```
SELECT LocationName, 
       StationName , 
       GROUP_CONCAT(`12:00 - 13:00` SEPARATOR ' ') `12:00 - 13:00`, 
       GROUP_CONCAT(`13:00 - 14:00` SEPARATOR ' ') `13:00 - 14:00`, 
       GROUP_CONCAT(`15:00 - 16:00` SEPARATOR ' ') `15:00 - 16:00`
FROM tableName
GROUP BY  LocationName, 
          StationName 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/cc9cc/1)

# javascript - 神秘的ajax json请求问题jQuery

> ID：12244635
> 
> 赞同：0
> 
> 时间：2012-09-03T08:47:41.213
> 
> 标签：javascript, jquery, ajax, json, rss

我想用 google api 阅读转换为 json 格式的 rss 提要；我已经放了一些警报，但是当我运行我的页面时我看不到它们！为什么 ？

这是我的 jQuery 代码：

```
function getFeed(url){
        $('#screen #content').html("");
        $.ajax({
            url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q='+url,
            crossDomain: true,
            dataType: 'json',
            success: function(data) {
                alert(3);
                $.each(data.entries, function(i,results){
                    alert(1);

                });
            }
        });
    }
    getFeed('http://www.nytimes.com/services/xml/rss/nyt/Science.xml'); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:01:38.933

Ajax 请求受浏览器的同源策略限制。您不能通过与运行脚本的页面不在同一个域中的 ajax 直接与服务器对话。因此，您需要使用 jquery ajax 中的 jsonp 功能：

```
$(document).ready(function () {

        function getFeed(url) {
            $.ajax({
                url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=' + url,
                crossDomain: true,
                dataType: 'jsonp',
                success: function (data) {
                    console.log(data);

                },
                error: function (data) {
                    console.log(data);
                }
            });
        }
        getFeed('http://www.nytimes.com/services/xml/rss/nyt/Science.xml');

    }); 
```

dataType: 'jsonp' 是这里的关键字。

您可以在此处搜索“jsonp”阅读有关它的更多信息：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

或在这里： [http ://bob.ippoli.to/archives/2005/12/05/remote-json-jsonp/](http://bob.ippoli.to/archives/2005/12/05/remote-json-jsonp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:51:55.277

1.  您请求的主机也可能不允许第三方或跨浏览器 ajax 调用。
2.  如果您期望 JSON 作为请求的结果，请使用`$.getJSON()`.

谢谢拉胡尔

# distinct - Oracle PL/SQL 只选择唯一的和一个随机记录

> ID：12244636
> 
> 赞同：1
> 
> 时间：2012-09-03T08:47:45.837
> 
> 标签：distinct

我想在 Oracle PL/SQL 上进行以下选择：

我有两列 ServedIMSI，Servicekey。有许多 servicekey 重复项，因此我只想为 ServedIMSI 选择与 servicekey 的编号匹配的唯一记录和一个随机记录。有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:00:59.220

试试这个（`t1`用你的桌子的真实姓名替换）：

```
select 
distinct(ServedIMSI) ServedIMSI, 
(select Servicekey from t1 a 
  where a.ServedIMSI = t.ServedIMSI and rownum=1) Servicekey
from t1 t 
```

[**您可以在此处**](http://sqlfiddle.com/#!4/bcfae/4)找到一个运行示例[](http://sqlfiddle.com/#!4/bcfae/4)

# java - spring mvc 嵌套模型验证

> ID：12244639
> 
> 赞同：4
> 
> 时间：2012-09-03T08:47:48.500
> 
> 标签：java, spring, validation, spring-mvc

我有两个模型：`User,Project`

```
public class Project{
    private int id;
    @NotEmpty(message="Project Name can not be empty")
    private String name;
    private User manager;
    private User operator;
    //getter/setter omitted
}

public class User{
    private int id;
    private String name;
    //omit other properties and getter/setter
} 
```

现在，当我创建一个新项目时，我将向 ProjectController 提交以下参数：

`projects?name=jhon&manager.id=1&operator.id=2...`

然后我将创建一个新的 Project 对象并将其插入到 db。

但是我必须验证经理和操作员的 id 是否有效，也就是说我将验证用户表中是否有匹配的 id。

所以我想知道如何实现这种验证？

* * *

update1：​​使用验证器

这是创建新项目的表格：

```
<sf:form method="${project.id==0?'post':'put'}" commandName="project" action="${context}${action}">
    Manager:<sf:input path="manager.id" />  <sf:errors path="manager.id" /> <br />
    Operator:<sf:input path="operator.id" />    <sf:errors path="operator.id" />    <br />
    Name:<sf:input path="name" />   <sf:errors path="name" />   <br />
    <input type="submit" value="Submit" />
</sf:form>

@Override
public void validate(Object obj, Errors errors) {
    User user = (User) obj;
    int id=user.getId();
    User u=userDao.query(id);
    if(u==null){
        errors.rejectValue("id", "user does not exist!");
    }
} 
```

这个验证器似乎有效。

但是，错误消息无法在表单中显示。

然后虽然调试我检查了结果对象，我发现了这个：

```
org.springframework.validation.BeanPropertyBindingResult: 2 errors
Field error in object 'project' on field 'id': rejected value [0]; codes [user does not exist!.project.id,user does not exist!.id,user does not exist!.int,user does not exist!]; arguments []; default message [null]
Field error in object 'project' on field 'id': rejected value [0]; codes [user does not exist!.project.id,user does not exist!.id,user does not exist!.int,user does not exist!]; arguments []; default message [null] 
```

结果似乎确实有错误，但它的路径`project.id`在我的形式中是`project.manager.id`

怎么修？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:31:22.670

这是一种可能的解决方案。

创建下面的类：

```
...
import org.springframework.validation.Validator;
...

@Component
public class ProjectValidator implements Validator {

    @Override
    public boolean supports(Class<?> clazz) {
        return Project.class.equals(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {
        Project project = (Project) target;

        /* Do your checks here */
        ...

        if (managerIdDoesNotMatch) {
            errors.rejectValue("manager.id", "your_error_code");
        }

        ...

        if (operatorIdDoesNotMatch) {
            errors.rejectValue("operator.id", "your_error_code");
        }

        ...
    }
} 
```

在您的控制器中执行以下操作：

```
...
public class ProjectController {

    @Autowired
    ProjectValidator projectValidator;

    ...

    @RequestMapping(...)
    public String yourCreateMethod(..., @ModelAttribute @Valid Project project, BindingResult result) {
        projectValidator.validate(project, result);           

        if (result.hasErrors()){
          // do something
        }
        else {
          // do something else
        }
    }

} 
```

这应该让你开始。您可以以不同的方式实例化/设置验证器，拥有一个用户子验证器，但您得到了大致的想法。

参考 ：

*   [最新的 Spring 验证文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)
*   [这篇关于如何执行验证的 Stack Overflow 帖子](https://stackoverflow.com/questions/12146298/spring-mvc-how-to-perform-validation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-03T09:46:48.857

其实你需要做的是`@Valid`添加

```
private User manager;
private User operator; 
```

像这样

```
@Valid
private User manager;
@Valid
private User operator; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:30:07.210

在您的控制器中，您可以添加自定义验证器：

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
    binder.setValidator(new ProjectValidator());
} 
```

在这个验证器中，您可以检查`User`对象或委托给 a ，如第 6.3 节之前的最后一段`UserValidator`中所做[的那样](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validator)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-28T08:24:30.050

我按照 Jerome Dalbert 的建议做了，此外还添加了一个自定义 BeanValidator，用于将验证的实际工作委托给 JSR 303 实现。

前缀用于表示表单中属性的路径。

```
@Component
public class BeanValidator implements org.springframework.validation.Validator, InitializingBean {    

 private Validator validator;
 public void afterPropertiesSet() throws Exception {
  ValidatorFactory validatorFactory = Validation.buildDefaultValidatorFactory();
  validator = validatorFactory.usingContext().getValidator();
 }

 public boolean supports(Class clazz) {
  return true;
 }

 public void validate(Object target, Errors errors, String prefix) {
  Set<ConstraintViolation<Object>> constraintViolations = validator.validate(target);
  for (ConstraintViolation<Object> constraintViolation : constraintViolations) {
   String propertyPath = constraintViolation.getPropertyPath().toString();
   String message = constraintViolation.getMessage();
   errors.rejectValue(prefix + "." + propertyPath, "", message);
  }
 }

 public void validate(Object target, Errors errors) {
  validate(target, errors, "");
 }
} 
```

以及我如何在 UserValidator 中使用它：

```
@Component
public class UserValidator implements Validator {

 @Autowired
 BeanValidator beanValidator;

 @Override
 public boolean supports(Class<?> clazz) {
  return User.class.equals(clazz);
 }

 @Override
 public void validate(Object target, Errors errors) {
  User user = (User) target;
  beanValidator.validate(user.getAddress(), errors, "address");
 }
} 
```

参考：

*   [http://blog.trifork.com/2009/08/04/bean-validation-integrating-jsr-303-with-spring/](http://blog.trifork.com/2009/08/04/bean-validation-integrating-jsr-303-with-spring/)

# wix - 一个 MSI 用于 32 位和 64 位

> ID：12244648
> 
> 赞同：1
> 
> 时间：2012-09-03T08:48:39.180
> 
> 标签：wix, windows-installer, platform

任何人都可以给我一个很好的例子或为我设定正确的方向，以使我的安装程序适用于 32 位和 64 位。我正在使用 Wix 3.6。

我试过这个：

```
<?if $(var.Platform) = x64 ?>
<?define ProductName = "InsomniacGeek: Windows Setup Test (64 bit)" ?>
<?define Win64 = "yes" ?>
<?define PlatformProgramFilesFolder = "ProgramFiles64Folder" ?>
<?else ?>
<?define ProductName = "InsomniacGeek: Windows Setup Test" ?>
<?define Win64 = "no" ?>
<?define PlatformProgramFilesFolder = "ProgramFilesFolder" ?>
<?endif ?>

<Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" Platform="$(var.Platform)" /> 
```

但是它不喜欢这样，它说 Platform 属性无效，有没有人有这个功能并且可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:23:38.353

我就是这样做的，而且效果很好。

您会在 Votive 中看到一条波浪线和一条警告，因为文字文本`$(var.Platform)`不是在 XML Schema for WiX 源文件中定义的平台枚举值之一。预处理器处理完文件后，属性的值是有效的，并且`candle`会很高兴地接受它。

**编辑添加：** [这个问题及其答案是一个很棒的 WiX 资源](https://stackoverflow.com/questions/471424/wix-tricks-and-tips "WiX 技巧和窍门")。

# visual-studio-2010 - 针对 .NET 4.5 的 Visual Studio 2010 解决方法

> ID：12244649
> 
> 赞同：3
> 
> 时间：2012-09-03T08:48:40.080
> 
> 标签：visual-studio-2010, asp.net-4.5

是否有一些解决方法可以从 Visual Studio 2010 定位 .NET 4.5？

我知道对此没有官方支持，但我仍然希望有人发现一些巧妙的方法来解决这个问题。

我知道您可以安装 4.5 作为 4.0 的就地替代品，您的解决方案将有效，但我想专门针对 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:23:29.790

我也一直在寻找这个。除了升级到 Visual Studio 2012 之外，似乎没有可行的解决方法。我已经使用 Visual Studio 2012 开发环境创建了一个虚拟机，并且一直在开发该虚拟机和另一个使用 Visual Studio 2010。

# android - Phonegap 2.0 saveToPhotoAlbum:false 在某些 Android 设备上无法正常工作

> ID：12244650
> 
> 赞同：2
> 
> 时间：2012-09-03T08:48:46.597
> 
> 标签：android, cordova, android-gallery

我们实现的 phonegap 应用程序使用相机来捕获图像。一旦图像被捕获，它会使用 img 标签临时显示在应用程序中，并作为 base64 编码字符串上传到服务器。

我们的要求是防止任何形式的图像保存在手机图库中。

为了解决这个问题，我们使用了 phonegap 2.0 框架中提供的 SaveToPhotoAlbum : false 选项

代码摘录如下所示

```
 navigator.camera.getPicture(captureSurfaceSuccess(surface), captureSurfaceFail, {
        destinationType: Camera.DestinationType.DATA_URL,
        sourceType: Camera.PictureSourceType.CAMERA,
        quality: 30,
        targetWidth: 1600,
        targetHeight: 1200,
        saveToPhotoAlbum: false
    }); 
```

我们已经尝试过 DATA_URL 和 FILE_URI，但注意到不同手机中的以下行为。

1.  某些设备不保存到图库 - 要求
2.  某些设备会保存到图库和临时位置。(FILE_URI)
3.  某些设备仅保存到图库。

在此处发布：[在拍摄相机意图照片后删除图库图像](https://stackoverflow.com/questions/6390163/deleting-a-gallery-image-after-camera-intent-photo-taken) 说明这是一个原生 android 问题，但建议删除最后一个文件的解决方案不适用，因为应绝对禁止在图库中保存。

我们想知道解决此问题的任何替代方案，或用于防止此问题并向我们发送原始数据的 phonegap 自定义相机插件的可用性。

另请注意：目前 Android 是唯一的目标移动平台

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-22T05:14:55.367

我们设法通过使用我们自己的 SurfaceView 相机插件解决了这个问题，该插件将捕获图像并将其压缩并作为 base64 字符串传递给 Cordova WebView。这使我们能够在没有 Cordovas 隐式保存到图库的情况下管理内存中的图像。

# c# - 为什么我的“LINQ to SQL”ID 不同步？

> ID：12244651
> 
> 赞同：0
> 
> 时间：2012-09-03T08:48:51.580
> 
> 标签：c#, .net, linq-to-sql, associations

我从 .mdf 中的表中构建了我的 LINQ to SQL 文件，其中表“Measurement”与“Experiment_Info”表相关联（一对一）。在测试我的应用程序时，我输入了一些“测量”条目。所以自动增量计算了表的 ID。直到后来我才开始添加带有“Experiment_Info”表的条目。

两者都是正确创建的，但是“Measurement”表的 ID 永远不会等于“Experiment_Info”表的 ID，因为 Measurement-ID 已经被计算在内。

因此，当我调用 LINQ 连接语句时，例如：

```
bs.DataSource = 
    from m in measDAL.getMeasurements()
    join i in measDAL.getExperimentInfo() on m.Measurementid equals i.ExperimentInfoID
    select new { 
        m.Measurementid, 
        m.MeasurementName, 
        i.DateTime, 
        i.Project 
    }; 
```

在这种情况下，“等于”真的意味着“==”吗？这意味着我必须以某种方式重置数据库中的所有 ID，不是吗？

我的结论对吗？如果他们是如何进行此重置？

另外，我想展示如何将条目添加到数据库中，因为我想这也可能是问题所在。当我在“一对多”关系中添加条目时，它的工作方式如下：

```
newMeasurement.SpectrumSet.Add(newSet); 
```

如果我有“一对一”关系的“Experiment_Info”，我会这样做：

```
Measurement newMeasurement = new Measurement();
newMeasurement.MeasurementName = name;

ExperimentInfo exInfo = new ExperimentInfo();
newMeasurement.ExperimentInfo = exInfo;

newMeasurement.ExperimentInfo.Analyze = analysis;
newMeasurement.ExperimentInfo.DateTime = dateTime;
newMeasurement.ExperimentInfo.DonorAge = donorAge;
newMeasurement.ExperimentInfo.Project = project;
newMeasurement.ExperimentInfo.Treatment = treatment;
newMeasurement.ExperimentInfo.MediaType = mediatype;
newMeasurement.ExperimentInfo.DonorAge = donorAge;
newMeasurement.ExperimentInfo.Passage = Passage;
newMeasurement.ExperimentInfo.Objective = objective;
newMeasurement.ExperimentInfo.Substrate = substrate;
newMeasurement.ExperimentInfo.Power = power;

measurements.InsertOnSubmit(newMeasurement);

measDAL.context.SubmitChanges(); 
```

我希望我能提供有关我的问题的足够信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:07:50.993

根据你的描述，你没有一对一的关系，你根本没有关系。

让一个表使用自动递增的 id。

让另一个表使用该表中的 ID，设置其 id 来定义关系（它*也可能*有一个单独的自动 id 来标识自己的行）。

这样数据库反映了表之间的关系。

然后其他技术将使用该关系（在这种情况下为 linq2sql，但它也适用于从数据库获取数据的其他方式）。

# apache - 使用 htaccess 重定向，同时避免搜索引擎惩罚

> ID：12244657
> 
> 赞同：1
> 
> 时间：2012-09-03T08:49:59.997
> 
> 标签：apache, .htaccess, seo

我有一个网站已经运行了大约 2 年，随着时间的推移，它获得了一些搜索引擎的声誉，现在我有兴趣在其上使用 htaccess 来重命名诸如：

/index.php?act=登录到简单的 /Login

现在的问题是，搜索引擎会同时看到这两个 url，而登录页面远不是我要重命名的唯一 url。这几乎意味着我的整个网站的网址将是现在的两倍，我能做些什么来防止它对 SEO 造成损害？

是否有一些 htaccess 代码我可以用来将旧页面重定向到新页面？（我什至不确定这是否能解决 SEO 问题）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:54:42.043

底线是使用`R=301`（**永久移动**）通知搜索引擎您的新 URL。例如，您的 .htaccess 代码如下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# external redirect using R=301 to /login from /index.php?act=Login
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(index\.php/?|)\?act=login(&|\s) [NC]
RewriteRule ^ /login? [R=301,L]

# internal forward from /login to /index.php?act=Login
RewriteRule ^login/?$ index.php?act=login [L,QSA,NC] 
```

使用`R=301`指令搜索引擎最终将开始缓存您的新 URI 方案而不是旧的。

# c# - 无论如何要在 ASP.NET MVC3 应用程序的 Visual Studio 2012 中使用 PageInspector？

> ID：12244660
> 
> 赞同：0
> 
> 时间：2012-09-03T08:50:07.590
> 
> 标签：c#, asp.net-mvc, visual-studio-2012

我正在使用 VS2012 Ultimate 来开发 ASP.NET MVC3 应用程序，并且热衷于使用新的 Page Inspector 功能。服务器端源跟踪不起作用，诊断给出消息：

> ```
> Project must use Razor v2 or later 
> ```

错误[消息页面](http://msdn.microsoft.com/en-us/library/jj204395.aspx)说`Migrate your MVC 3 project to MVC 4 or a later release.`

在不升级到 MVC 4 的情况下有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:20:20.870

看起来我们可以更新 MVC 3 应用程序以使用 Razor 2：

[http://dotnet.dzone.com/articles/using-razor-v2-aspnet-mvc-3](http://dotnet.dzone.com/articles/using-razor-v2-aspnet-mvc-3)

您不必将应用程序更新到 MVC 4，但需要安装 MVC 4。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T09:02:48.513

您需要下载 MVC4 ，我猜这将是最好的选择。[你可以从这里](http://www.microsoft.com/web/gallery/install.aspx?appid=MVC4VS2010)下载 MVC4

# maven - 根据执行的项目配置 Maven 以使用不同的存储库管理器？

> ID：12244663
> 
> 赞同：1
> 
> 时间：2012-09-03T08:50:17.123
> 
> 标签：maven, nexus

我为两家不同的公司担任顾问，这两家公司都使用 maven 并且都有自己的 nexus 存储库管理器。我已经将 maven 与两个存储库管理器一起使用，它工作正常，但每次切换客户时，我都需要更改存储库管理器地址所在的 settings.xml 文件。

有没有办法解决这个问题？为了让 Maven 根据我正在构建的项目找出要使用的存储库管理器？我可以轻松地编辑两个项目中的 pom 文件，并在需要时激活不同的配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:41:00.123

最好的方法是将 .m2/ 置于 Git 等 VCS 的控制之下，并使用不同的分支更改设置（忽略存储库本身）。

```
git checkout CUSTOMER1

git checkout CUSTOMER2 
```

这是我目前的解决方案。非常简单有效，而且我对 settings.xml 所做的每一次更改都在版本控制之下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:50:58.343

在类似的情况下，我怀疑在为每个客户工作时我会使用不同的登录名。这对于您的个人资料（例如电子邮件帐户）来说不是很方便，但是知道所有内容都是分开的，我会感到更安全。

另一方面，如果您不担心，您可以考虑在您的机器上设置 Nexus 作为您客户存储库的代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T20:56:54.730

我建议设置 Nexus 的本地副本，在您的机器上作为代理运行。从那里您代理两个外部存储库。

然后就部署到不同的存储库而言，您不需要做任何事情，因为它们已经在项目分发管理中使用了不同的 url。

如果您绝对必须将它们分开，我建议使用两个不同的 settings.xml 文件将它们分开，并使用 -s 指定正确的设置文件调用 mvn。

为方便起见，您可以为这些调用创建一个 shell 别名。

如果您在其中使用相同的 settings.xml 和配置文件，则您没有相同的分隔，但它也可以工作。然后，您还可以创建别名以使事情更清洁..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:35:12.043

感谢您的所有回答，但是我终于有了不同的方法，那就是禁用中央存储库并在每个 pom.xml 中添加项目关系存储库。

这样做的缺点是，如果要充分发挥作用，它需要在**每个**pom 中，而不仅仅是父级。

但是，它是每个项目的一次性配置，每个开发人员唯一需要添加到他们的 settings.xml 的就是他们的 nexus 存储库的凭据，这使得新开发人员的启动变得更简单。

另一个缺点是，如果我在项目之外运行 maven，就像`archetype:generate`maven 不知道我的 nexus repo 一样，我需要在命令行上指定它。我相信我可以在我的 settings.xml 中配置一个默认存储库，但我还没有进一步探索。

我也不必考虑我正在从事哪个项目，当我运行 maven 时，该项目知道要使用哪个存储库，这对我来说**非常**重要。

我怀疑不是每个人都同意这是最好的解决方案，但它对我有用，而且开销是可以接受的。

这就是我在每个 pom 中的配置的样子

```
 <repositories>
      <repository>
        <id>my-nexus-repo</id>
        <url>http://nexus.mycompany.com/content/groups/private/</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
    <repository>
        <id>central</id>
        <url>http://repo1.maven.org/maven2</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories>
<pluginRepositories>
    <pluginRepository>
        <id>my-nexus-repo</id>
        <url>http://nexus.mycompany.com/content/groups/private/</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>
    <pluginRepository>
        <id>central</id>
        <url>http://repo1.maven.org/maven2</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </pluginRepository>
</pluginRepositories> 
```

# windows - 谁能解释一下 FindResource/LoadResource/LockResource？

> ID：12244665
> 
> 赞同：3
> 
> 时间：2012-09-03T08:50:25.757
> 
> 标签：windows, nested-resources

我通过 LoadLibrary 加载一个模块（exe/dll）并在其中获取一个二进制资源的指针。

微软注意应该使用三个步骤：

1.  使用 FindResource 返回 HRSRC
2.  将 LoadResource 与该 HRSRC 一起使用并返回 HGLOBAL
3.  使用 LockResource 锁定 HGLOBAL 以最终返回您想要的指针。

我不明白为什么MS设计这个过程如此奇怪？

如果要检测 resource 的长度，必须使用 SizeofResource 和第一步返回的指针，但不能输入 step2 和 step3 返回的指针。

如果检查这些步骤输出的指针地址，我得到了结果：

1.  LoadLibrary 加载的模块地址范围内的所有指针地址。
2.  step2 和 step3 的地址是一样的。

谁能解释一下这些函数到底是做什么的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:41:36.347

这些功能可以追溯到 Windows 3.x 时代，当时内存稀缺，资源一直保存在磁盘上，直到需要它们。FindResource 在磁盘文件的资源表中找到它们，LoadResource 将它们加载到内存中。内存被分配为“可移动”，这意味着内存管理器可以根据需要移动它以释放空间以形成更大的连续块。因此需要使用 LockResource 锁定内存，然后才能访问它。

由于 Windows 2000/XP 很多这些步骤是多余的，但这些功能仍然是为了向后兼容。

# javascript - 如何延迟“onsubmit”事件直到加载某些内容？

> ID：12244669
> 
> 赞同：4
> 
> 时间：2012-09-03T08:50:30.847
> 
> 标签：javascript, events, delay, onsubmit

我有问题，`onSubmit`如果发生`form`.

我正在使用 javascript`image`元素向另一个网页发送一些跟踪信息（参数在 中`GET`）。

但是当我尝试加载该`image`（通过`src`属性）时，页面刷新比请求`image`发生（或立即中止）更快。

这样，就不会向外部跟踪页面发送任何信息。我怎么能在这个`submit`处理程序中`load`等待`image`呢？

**编辑：** 还有一点我错过了，其他事件可以在同一个地方（例如验证等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:11:54.560

如果需要，另一种在不使用全局变量的情况下自动提交表单的方法：

```
document.getElementById('yourFrm').addEventListener('submit',(function()
{
    'use strict';
    var imgLoaded,img,tmpImgLoad;
    imgLoaded = false;
    img = document.getElementById('yourImg');
    tmpImgLoad = function ()
    {
        imgLoaded = true;
        img.removeEventListener('load',tmpImgLoad,false);//remove obsolete listener?
    };
    img.addEventListener('load',tmpImgLoad,false);
    return function(e)
    {
        if (!imgLoaded)
        {
            tmpImgLoad = function()
            {
                imgLoaded = true;
                img.removeEventListener('load',tmpImgLoad,false);
                document.getElementById('yourForm').submit();
            };
            e.preventDefault();
            e.stopPropagation();
        }
    };
})(),false); 
```

此代码将加载事件侦听器绑定到您的图像元素，将闭包变量设置为 true。如果在提交表单时该变量为 false，则 load 事件的回调也将更改为提交表单。

我承认这有点复杂，但你知道：全局变量并不是解决这个问题的唯一方法。

*也刚刚通过 JSLint 传递了很多东西。一些微小的调整和“容忍混乱的空白”和“假设浏览器”这个代码完全没有任何警告或错误通过*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:53:33.460

这应该可以正常工作：

```
var img = document.getElementById('image'),
    form = document.getElementById('form');

img.addEventListener('load', function (){
    window.imageIsLoaded = true;
    if(window.submitForm === true){
        form.submit();
    }
}, false);

form.addEventListener('submit', function (e){
    window.submitForm = true;
    if(window.imageIsLoaded !== true){
        e.preventDefault();
        return false;
    }
}, false);​ 
```

[演示](http://jsfiddle.net/amaan/nATYk/)

# java - Java继承中的隐藏字段

> ID：12244670
> 
> 赞同：14
> 
> 时间：2012-09-03T08:50:32.170
> 
> 标签：java, inheritance, polymorphism, field, member-hiding

在一个类中，与超类中的字段同名的字段会隐藏超类的字段。

```
public class Test {

    public static void main(String[] args) {

        Father father = new Son();
        System.out.println(father.i); //why 1?
        System.out.println(father.getI());  //2
        System.out.println(father.j);  //why 10?
        System.out.println(father.getJ()); //why 10?

        System.out.println();

        Son son = new Son();
        System.out.println(son.i);  //2 
        System.out.println(son.getI()); //2
        System.out.println(son.j); //20
        System.out.println(son.getJ()); //why 10?
    }  
}

class Son extends Father {

    int i = 2;
    int j = 20;

    @Override
    public int getI() {
        return i;
    }
}

class Father {

    int i = 1;
    int j = 10;

    public int getI() {
        return i;
    }

    public int getJ() {
        return j;
    }
} 
```

有人可以为我解释一下结果吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T09:07:12.330

在java中，字段不是多态的。

```
Father father = new Son();
System.out.println(father.i); //why 1? Ans : reference is of type father, so 1 (fields are not polymorphic)
System.out.println(father.getI());  //2 : overridden method called
System.out.println(father.j);  //why 10? Ans : reference is of type father, so 2
System.out.println(father.getJ()); //why 10? there is not overridden getJ() method in Son class, so father.getJ() is called

System.out.println();

// same explaination as above for following 
Son son = new Son();
System.out.println(son.i);  //2 
System.out.println(son.getI()); //2
System.out.println(son.j); //20
System.out.println(son.getJ()); //why 10? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T09:15:24.373

根据[覆盖和隐藏方法](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)

> 被调用的隐藏方法的版本取决于它是从超类调用还是从子类调用。

*即，当您通过超类引用调用在子类中被覆盖的方法时，将调用超类方法并访问超类成员。*

这解释了以下内容，因为使用的参考是超类：

```
System.out.println(father.i);  //why 1?
System.out.println(father.j);  //why 10?
System.out.println(father.getJ()); //why 10? 
```

以下类似：

```
System.out.println(son.getJ()); //why 10? 
```

因为`getJ()`未在版本中定义，`Son`所以`Father`调用看到`Father`类中定义的成员。

如果您阅读[隐藏字段](http://docs.oracle.com/javase/tutorial/java/IandI/hidevariables.html)；他们特别不推荐这样的编码方法

> 一般来说，我们不建议隐藏字段，因为它会使代码难以阅读。

# knockout.js - knockoutjs、自定义绑定和 knockoutjs 模板（从自定义绑定 init 方法调用 knockoutjs 模板）

> ID：12244673
> 
> 赞同：2
> 
> 时间：2012-09-03T08:50:53.030
> 
> 标签：knockout.js

我想将第三方控件挂钩到 knockoutjs 并使用自定义绑定将它们连接在一起。到目前为止，它工作正常。但是很少有控件我想选择模板来呈现控件。但是找不到任何方法通过 javascript 调用淘汰赛 js 模板。

有没有可能。

* * *

```
<div data-bind = "knockoutjs-text : data, label : labelText"></div>

// got following template in seperate file
<script type="text/html" id="person-template">
    <h3 data-bind="text: name"></h3>
    <p>Credits: <span data-bind="text: credits"></span></p>
</script>

// my custom binding handler in seperate file
ko.bindingHandlers.knockoutjs-text = {
init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
    // now it want to call person-template from here and attached it to element

} 
```

};

这是我的案例的简单示例，我的案例是创建用户控件，b 将这两者结合在一起。如果你觉得这个例子还不够，请告诉我。

谢谢，达尔吉特·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:05:37.757

是的，您可以使用动态模板：

HTML：

```
<script type="text/html" id="LoadingTemplate">Loading...</script> 
```

下载模板后更新脚本标签：

```
self.Content = ko.observable("<b>Hello World</b>");
self.TemplateID = ko.observable("LoadingTemplate");
self.UniquePageID = ko.observable(GenerateUUID());  // create a random id

ko.computed(function () {
    var html = self.Content(),
        uniqueID = ko.utils.unwrapObservable(self.UniquePageID),
        templateID = "template_" + uniqueID;

    // remove the current template
    $("#" + templateID).remove();

    // append the html template
    $("body").append('<script type="text/html" id="' + templateID + '">' + html + '</script>');

    // update the template ID (this will trigger the knockoutjs data-bindings)
    self.TemplateID(templateID);

}).extend({ throttle: 100 }); 
```

有关更多信息，请参阅knockmeout.net 上的[这篇文章。](http://www.knockmeout.net/2011/03/using-external-jquery-template-files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T13:44:20.190

自问题提出以来可能已经有一段时间了。我刚刚解决了这个问题，并且让 Handlebarsjs 工作得很好。

我必须为新的 Typeahead.js 编写一个自定义绑定，然后我被要求在下拉列表中显示更多数据。

我按照[Typeaheadjs 的自定义模板示例](http://twitter.github.io/typeahead.js/examples/)向下滚动了一下。这在 Knockoutjs 中运行良好。

这是有问题的代码，它不是专门用于 knockoutjs，但我将它用于我的模板：suggestion 条目成功。

```
$('.example-twitter-oss .typeahead').typeahead(null, {
  name: 'twitter-oss',
  displayKey: 'name',
  source: repos.ttAdapter(),
  templates: {
    suggestion: Handlebars.compile([
      '<p class="repo-language">{{language}}</p>',
      '<p class="repo-name">{{name}}</p>',
      '<p class="repo-description">{{description}}</p>'
    ].join(''))
  }
}); 
```

*请注意，Handlebars 的拼写不是大写的“B”，由于它使用编译功能，因此您必须使用更大的 Handlebars.js 库（当前为“handlebars-v1.3.0.js”），而不是运行时库。*

我对需要一个 88kb 的库来执行此操作有疑虑，但我确实喜欢 Handlebars 吊臂的剪裁。

# android - 如何在 OpenGL ES 中有效地加载纹理

> ID：12244675
> 
> 赞同：7
> 
> 时间：2012-09-03T08:50:54.183
> 
> 标签：android, opengl-es, bitmap, textures

我对使用 OpenGL 有非常基本的了解，尤其是在 Android 上。我正在开发一个使用 OpenGL 的应用程序，以便在全屏图像之间快速切换（因为使用普通的 Android 框架太慢了）。

我发现为了加载纹理，我需要执行以下操作：

```
ByteBuffer byteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
byteBuffer.order(ByteOrder.nativeOrder());
vertexBuffer = byteBuffer.asFloatBuffer();
vertexBuffer.put(vertices);
vertexBuffer.position(0);
byteBuffer = ByteBuffer.allocateDirect(texture.length * 4);
byteBuffer.order(ByteOrder.nativeOrder());
textureBuffer = byteBuffer.asFloatBuffer();
textureBuffer.put(texture);
textureBuffer.position(0);
_gl = gl;
final Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), _imageResourceId);
gl.glGenTextures(1, textures, 0);
gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
bitmap.recycle(); 
```

现在，由于图像是全屏的（而且它们非常大 - 1024x1024），这需要一些时间，特别是因为我需要同时加载其中的 5 个。

所以我需要问一些关于改进代码技巧的问题，特别是关于高效加载（但如果可能的话也使用更少的内存）：

1.  如果我将位图解码为没有透明像素，通过使用 RGB_565 格式，它会提高将图像加载到 OpenGL（或解码阶段）的速度吗？

2.  输入位图的宽度和高度是否必须是 2 的幂，或者我可以让 OpenGL 只取它想要的部分，这将有这个规则吗？我的意思是，也许我可以让`texImage2D`命令只占用位图的一部分？

3.  也许我什至可以从一开始就只解码这一部分（所以如果我有一个 10000x10000 的巨大图像，我只能解码其中的 1024x1024 部分并将其提供给 OpenGL）？

4.  是否可以仅加载和显示第一张图像，然后在后台加载其余图像？我听说您不能在不是处理它的线程中将位图发送到 OpenGL。`onDrawFrame`将它们加载到 的方法上是否有意义`GlRenderer`，例如，第二次调用它？

5.  我记得我听说过一个关于将多个图像合并为一个图像的技巧（一个接一个，从左到右），这样它可能会在解码阶段有一些速度提升。不知道这种技术的名称是什么。Android上的OpenGL ES仍然可行吗？

6.  是否可以避免创建 Bitmap 实例并让解码以更本地的方式完成（也许是 NDK）？根据我的测试，在模拟器上解码大小为 1024x1024 的 PNG 文件大约需要 400ms-700ms，而将其发送到 OpenGL 大约需要 50ms-70ms。

7.  使用 Procrank，我发现 OpenGL 会占用大量内存。有没有可能让它使用更少的内存？也许使用更好的纹理类型？

8.  由于Android可以在多种设备上运行，是否可以在清单中设置应用程序需要多少内存才能运行，这样内存太少的人就无法安装它？

* * *

@马吉德·麦克斯：

1.  所以以这种方式解码并将其发送到OpenGL就足够了，还是在发送到openGL时我也应该设置一些特殊的东西？

2.  没有这样的命令来获取位图的一部分吗？

3.  我的意思是，我可以只解码要存储在位图中的文件的一部分，而不是全部位图吗？

4.  所以我唯一能做的就是在开始时加载所有内容，然后全部使用？怎么会这样？游戏如何处理？我的意思是，它们确实显示了一个又一个阶段，即使看起来像 OpenGL 生成的进度条。这是非常有问题的。

5.  我所描述的也可以在网络上找到。例如，网页不是加载多个微小的图像，而是包含一个图像并映射它的哪些部分应该显示在哪里。它的另一个名字是[sprites](http://en.wikipedia.org/wiki/Sprite_%28computer_graphics%29)。[这里](http://en.wikipedia.org/wiki/File%3aSprite-example.gif)的例子。

6.  我懂了。我想当我看到不再使用 glDeleteTextures 时，我也应该调用它，对吧？

7.  我怎么做？我应该在代码中更改什么？

8.  当我使用大量内存时会发生什么？当没有可用 RAM 时，是否存在诸如虚拟 RAM（可能使用内部存储）之类的东西？我在 Google IO 视频上听说过它，但似乎他们也不确定答案。链接[在这里](http://www.youtube.com/watch?v=_CruQY55HOk&feature=player_embedded#t=3269s)。他们只是说，当这种事情发生时，预计会有更多的崩溃。

* * *

@马吉德·麦克斯：

1+2+3。?

1.  这可能有效。你的意思是我创建一个新线程来加载位图，然后将结果发送回 OpenGL 线程，它将纹理绑定到位图？也许我可以对 asyncTask 使用类似的方法，并使用 publishprogress。

2.  这也是一件好事。你有什么我应该读的链接吗？或者也许是要更改我的代码的片段？

3.  谢谢。

4.  所以我认为使用 ETC1 是最简单的事情。但是它根本不支持透明度，所以根据[这个链接](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0555a/CHDIEGGI.html)，我需要为此使用另一个纹理，但我找不到这个示例。

5.  我可以假设我可以使用的可用内存是什么？例如，我是否可以假设所有 Android 设备都可以为我提供 200MB 的视频内存，我可以将其用于 OpenGL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T17:33:35.557

1.  > 如果我将位图解码为没有透明像素，通过使用 RGB_565 格式，它会提高将图像加载到 OpenGL（或解码阶段）的速度吗？

    是的，如果您不需要透明度（alpha），请使用没有 alpha 的格式，而较小的格式（如（RGB565））意味着较小尺寸的纹理，这肯定会加快解码和加载到 opengl 的速度。

2.  > 输入位图的宽度和高度是否必须是 2 的幂，或者我可以让 OpenGL 只取它想要的部分，这将有这个规则吗？我的意思是，也许我可以让 texImage2D 命令只占用位图的一部分？

    绝对是的，如果你加载一个宽度/高度不是 2 次方的纹理，opengl 将分配一个下一个 2 次方的纹理（513/513 纹理将变为 1024/1024），这意味着你在浪费 vram 内存。并且您不能命令 opengl 获取图像的一部分，因为“teximage2d”采用加载图像的宽度/高度，并且指定任何其他值会给您一个损坏的图像（如果不破坏应用程序）。

3.  > 也许我什至可以从一开始就只解码这一部分（所以如果我有一个 10000x10000 的巨大图像，我只能解码其中的 1024x1024 部分并将其提供给 OpenGL）？

    没有意见。

4.  > 是否可以仅加载和显示第一张图像，然后在后台加载其余图像？我听说您不能在不是处理它的线程中将位图发送到 OpenGL。将它们加载到 GlRenderer 的 onDrawFrame 方法上是否有意义，比如第二次调用它？

    我不确定，已经有一个基于opengl的多线程渲染引擎。并且您可以在发出渲染命令时加载纹理（从其他线程）（至少在本机 C/C++ 中，不确定 java）。不，永远不要尝试在渲染循环中加载纹理，这是不好的做法。

5.  > 我记得我听说过一个关于将多个图像合并为一个图像的技巧（一个接一个，从左到右），这样它可能会在解码阶段有一些速度提升。不知道这种技术的名称是什么。Android上的OpenGL ES仍然可行吗？

    不知道你在这里是什么意思

6.  > 是否可以避免创建 Bitmap 实例并让解码以更本地的方式完成（也许是 NDK）？根据我的测试，在模拟器上解码大小为 1024x1024 的 PNG 文件大约需要 400ms-700ms，而将其发送到 OpenGL 大约需要 50ms-70ms。

    这是最好的方法，本机代码（C/C++）总是更好

7.  > 使用 Procrank，我发现 OpenGL 会占用大量内存。有没有可能让它使用更少的内存？也许使用更好的纹理类型？

    （如果你在这里指的是 vram）是的，使用像 ETC1、PVRTC、ATC 这样的纹理压缩格式总是一个好主意，它需要更少的 vram 内存并产生更好的性能。

8.  > 既然Android可以在多种设备上运行，是否可以在manifest中放入应用程序运行需要多少内存的要求，这样内存太少的人就无法安装它？

    考虑切换到备用解决方案（甚至更小的纹理），而不是砍掉低端设备。

编辑：

4..您开始在一个单独的线程中加载内容（图像），该线程向渲染线程指示加载过程的百分比，这可用于为加载过程绘制进度条。

5.. 这个技巧叫做“纹理图集”，它是为了加速渲染而不是加载。

6..将解码图像加载到opengl纹理后，您可以自由删除解码图​​像（从系统内存中），而不是加载下一个。使用完 opengl 纹理后，您可以将其删除（从视频内存中）。

7..纹理压缩是特定于硬件的opengl扩展，因此您必须检查纹理压缩扩展是否存在，然后将其与“glCompressedTexImage2D”功能而不是“texImage2D”一起使用。PowerVR GPU 的 PVRTC；AMD GPU 的 ATC；Mali GPU 的 ASTC；ETC1 一种标准纹理格式（在 android 2.2+ 中支持）。

8 ..当你完成将图像加载到opengl纹理时，不再需要图像。所以你必须从不需要的内容（图像）中释放内存。

编辑2：

5.. [http://http.download.nvidia.com/developer/NVTextureSuite/Atlas_Tools/Texture_Atlas_Whitepaper.pdf](http://http.download.nvidia.com/developer/NVTextureSuite/Atlas_Tools/Texture_Atlas_Whitepaper.pdf)

7.. 在 opengl 中使用“glCompressedTexImage2D”加载两个 ETC 纹理（例如：第一个纹理保存颜色，第二个存储 alpha 在红色通道中）（比如说 textureId1，textureId2），将两个纹理绑定成两个纹理单位：

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, textureId1);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, textureId2); 
```

然后使用以下片段着色器创建一个着色器程序：

```
uniform sampler2D     sTexture1;
uniform sampler2D     sTexture2;
varying mediump vec2  vTexCoord;

void main()
{
    gl_FragColor.rgb = texture2D(sTexture1, vTexCoord).rgb;
    gl_FragColor.a   = texture2D(sTexture2, vTexCoord).r;
} 
```

最后，将两个着色器纹理采样器绑定到两个纹理单元（指向两个 ETC 纹理）：

```
GLint texture1Sampler = glGetUniformLocation(programObject, "sTexture1");
GLint texture2Sampler = glGetUniformLocation(programObject, "sTexture2");

glUniform1i(texture1Sampler, GL_TEXTURE0);
glUniform1i(texture2Sampler, GL_TEXTURE1); 
```

8.. 你不能假设任何事情，你一直分配纹理和缓冲区（根据需要），直到你得到 GL_OUT_OF_MEMORY，而不是你必须释放其他未使用的资源（纹理，缓冲区，......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-17T01:05:03.613

如果您仍在寻找使用 OpenGL 将位图渲染到 InputSurface 的示例。

我能够让它工作。
看看我这里的答案。

> [https://stackoverflow.com/a/49331192/7602598](https://stackoverflow.com/a/49331192/7602598)
> 
> [https://stackoverflow.com/a/49331352/7602598](https://stackoverflow.com/a/49331352/7602598)
> 
> [https://stackoverflow.com/a/49331295/7602598](https://stackoverflow.com/a/49331295/7602598)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T09:54:57.647

我认为您应该查看[http://www.andengine.org/](http://www.andengine.org/)它会为您节省大量时间和工作...

# iphone - 没有弹出警报框？

> ID：12244680
> 
> 赞同：0
> 
> 时间：2012-09-03T08:51:27.357
> 
> 标签：iphone, ios, ios5, ios-simulator

在我的应用程序中，我正在使用警报功能。它工作正常，但是当我在**模拟器**中测试时，弹出框会通知警报。在**真实设备**中，它只是作为状态栏中的通知而不是弹出框。

我正在寻找真实设备中的弹出框。我不确定我在这里做错了什么？

我正在将此代码用于我的警报

```
[[UIApplication sharedApplication] cancelAllLocalNotifications];

UILocalNotification *localNotification = [[UILocalNotification alloc] init];

localNotification.fireDate = date;

localNotification.timeZone = [NSTimeZone defaultTimeZone];
localNotification.alertBody = alarmMessage;
localNotification.alertAction = NSLocalizedString(@"View", nil);
localNotification.repeatInterval = NSDayCalendarUnit;

/* Here we set notification sound and badge on the app's icon "-1"
 means that number indicator on the badge will be decreased by one
 - so there will be no badge on the icon */

NSString *ringtonename = [lblRingToneName text];
NSString *extension = @".caf";

NSString  *ringtone = [[NSString alloc]initWithFormat:@"%@%@", ringtonename, extension];

localNotification.soundName = ringtone;
localNotification.applicationIconBadgeNumber = -1;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:56:49.867

如果设备被锁定，通知将显示为弹出框，如果应用程序正在运行，通知将显示在状态栏中，您的代码没有任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:02:38.773

当触发 UILocalNotification 时，有 3 种可能性：

*   您的应用程序正在后台运行或已关闭：您的本地通知将根据用户定义的设置显示：它可能显示为横幅、UIAlertView 或根本不显示。

*   您的应用程序正在前台运行：您可以在 AppDelegate 类中使用以下方法接收任何本地通知：

    `- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification`

*   设备已锁定：设备将在锁定屏幕中显示警报（如果用户定义则不会）

# jar - Java - 蚂蚁找不到 rt.jar

> ID：12244681
> 
> 赞同：0
> 
> 时间：2012-09-03T08:51:30.847
> 
> 标签：jar, path, java

我正在按照[这些](http://pastebin.com/gZ8q8YHj)说明编译 DrJava。

但是当我运行时`ant jar`，我得到了错误：

`/Users/arthur/dj/drjava/build.xml:1270: Can't find rt.jar in the Java 7 home: ${env.JAVA7_HOME}`

我知道那`rt.jar`是在`/Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/jre/lib`.

我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:27:30.747

这个答案与其他人提供的答案相同 - 只是更详细一点。所以你只需要在你的 shell 上输入这个：

```
export JAVA7_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/jre/lib 
```

现在你提到**我知道 rt.jar 在 /Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/jre/lib 中。**

通常你不会有`Contents/Home`里面的JDK。一个标准的 Java 安装应该有`jdk1.7.0_07.jdk/jre/lib`. 检查您是否在上面提供了正确的路径，并且 rt.jar 确实在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:07:29.847

SET PATH TO JDK ..这将解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:53:33.170

您应该确保将 ant 指向 JDK 而不是 JRE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T22:35:57.467

我遇到了同样的问题。普拉克很接近，但并不完全正确：你不需要最后的`jre/lib`部分。最终对我有用的命令是：

```
export JAVA7_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home/ 
```

# sencha-touch-2 - 将 id 添加到 sencha 嵌套列表项

> ID：12244683
> 
> 赞同：0
> 
> 时间：2012-09-03T08:51:36.800
> 
> 标签：sencha-touch-2

我有一个 sencha 嵌套列表，其中包含来自商店的一些元素。我需要分别自定义每个元素，所以我需要为每个元素设置一个自定义 ID。我可以在 sencha touch 2 中实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:30:24.907

最简单的方法是在 store 中生成/填充唯一 id，然后使用 itemTpl 来渲染 id。

```
itemTpl: "<div id =\"{id}\" class=\"list-item-title\">{name}</div>" 
```

# php - 什么是整页缓存

> ID：12244684
> 
> 赞同：6
> 
> 时间：2012-09-03T08:51:37.190
> 
> 标签：php, zend-framework, magento

我正在研究 Magento（EE）。我找到了一个术语“整页缓存”。谁能告诉我什么是“Magento 或 Zend 中的全页缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:53:20.127

缓存整页？

就像从脚本生成的每一件事都写入 HTML 并在下次提供时一样，从而提高性能（通过减少负载并且不必为每次访问生成页面）。

然而，这是偶尔有过时页面的缺点。

如果您的网站没有获得大量点击，则启用整页缓存或缓存所有 HTML 几乎没有什么区别

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:28:05.593

Magento 是一个购物网站 CMS。

这很简单，意味着为了提高网站的性能，它将缓存（存储在缓冲区中）特定页面的 HTML 输出。比如你的主页，每次用户打开你的主页，它背后的 PHP 都要从数据库中获取信息，用相关视图解析它，然后显示最终的 HTML 输出，LOTSA 处理。

相反，缓存会将 HTML 输出存储在其缓冲区中，当用户进入时，它将显示 HTML 缓存的输出，而不是进入数据库*和东西*。但是，尽管现代缓存插件会检查输出数据中的任何更改并按原样更新缓存，但必须定义缓存的生命周期。

简单的？

# svn - SVN 从主干合并到分支导致树冲突

> ID：12244698
> 
> 赞同：5
> 
> 时间：2012-09-03T08:52:57.880
> 
> 标签：svn, merge, svn-merge

假设我们有一个`trunk`和一个分支 ( `COKE`)。（我在 SVN 上运行 Git 并与 svn 合并，`trunk`而`COKE`不是 Git）

1.  `FILE1 on trunk`我们希望在`COKE`分支中发生了变化。
2.  我们从合并`trunk`，我在`COKE branch`.
3.  然后`FILE1`从 中删除`trunk`，我要在 中更改`COKE`。
4.  `FILE1`我合并并在 on上发生树冲突`COKE branch`。

**是否由于 (2) 中的合并提交而发生此树冲突？**

**我能做些什么来解决这三个冲突？**

`svn resolve --accept theirs-full /path/FILE1`不起作用，说只有“工作”才会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:44:13.113

在这种情况下应该没有树冲突，除非缺少某些合并跟踪信息。

为了检查这一点，请运行以下命令：

```
$ svn switch ^/branches/COKE
$ svn mergeinfo --show-revs=merged ^/trunk 
```

这会打印从主干合并到 COKE 分支的修订列表。当您在主干修改 FILE1 时，您能找到修订版吗？很可能没有那个版本。

当 SVN 用户将修改从一个分支合并到另一个分支时，这是一种常见的情况，但随后提交的不是整个工作副本（即包括根目录），而只是那些被合并修改的文件。

**错误的：**

```
$ svn merge ^/trunk
--- Merging r5 through r6 into '.':
M    file.txt
--- Recording mergeinfo for merge of r5 through r6 into '.':
 U   .
$ svn commit FILE1 
```

问题是根目录存储 svn:mergeinfo 属性。Subversion 使用此属性来跟踪合并，因此您必须提交整个工作副本。

**正确的：**

```
$ svn merge ^/trunk
--- Merging r5 through r6 into '.':
M    file.txt
--- Recording mergeinfo for merge of r5 through r6 into '.':
 U   .
$ svn commit . 
```

当你第二次尝试将主干合并到 COKE 分支时，Subversion 检测到 FILE1 在主干被删除，同时它在 COKE 分支被修改（通过步骤 2）。结果，它将文件标记为树冲突（本地编辑，合并时传入的删除）。

**如何解决？**

现在您必须修复 COKE 分支的合并跟踪信息。为了做到这一点，使用 --record-only 选项重复步骤 2 并指定正确的修订：

```
$ svn merge --record-only -cN ^/trunk
--- Recording mergeinfo for merge of r5 through r6 into '.':
 U   .
$ svn commit . 
```

其中 N 是您尝试合并的主干中 FILE1 的修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T00:16:08.513

vadishev 的回答为我提供了创建此脚本的知识，该脚本应自动为您添加缺少的合并信息。

确保 pwd 是分支根目录，然后运行：

```
trun="path/to/trunk/root"
for i in `svn mergeinfo --show-revs=merged $trun | sed 's/^r//g'`
do 
  echo "working on $i"
  svn merge --record-only -c$i $trun
done 
```

或者，作为单行者：

```
trun="../../trunk/tetracosm"; for i in `svn mergeinfo --show-revs=merged $trun | sed 's/^r//g'`; do echo "working on $i"; svn merge --record-only -c$i $trun; done 
```

# z3 - 如何简化使用 z3 隐藏变量的结果？

> ID：12244701
> 
> 赞同：0
> 
> 时间：2012-09-03T08:53:11.687
> 
> 标签：z3, smt

我希望隐藏一些变量并获得简化的结果。

我想隐藏`c1`，`c2`如下`d`：

```
(declare-const v1 Real)
(declare-const v2 Real)
(elim-quantifiers (exists ((c1 Real) (c2 Real)(d Real)) 
                          (and (<= c1 10.0) (>= c2 5.0) (>= d 0.0) 
                               (= v1 (+ c1 d)) 
                               (= v2 (+ c2 d))))) 
```

不过结果看似复杂，其实结果应该是`v2>=5.0 & v1<= v2+5.0`，我以前用`(apply ctx-solver-simplify)`的代码是

```
(declare-const v1 Real)
(declare-const v2 Real)
(assert (elim-quantifiers (exists ((c1 Real) (c2 Real)(d Real)) 
                                  (and (<= c1 10.0) (>= c2 5.0) (>= d 0.0)
                                       (= v1 (+ c1 d)) 
                                       (= v2 (+ c2 d))))))
(apply ctx-solver-simplify) 
```

但是，当我添加 apply ....有错误时，脚本无法工作。有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:08:50.490

您可以使用[then](http://rise4fun.com/Z3/tutorialcontent/strategies#h21)策略将量词消除应用于公式并将上下文简化应用于生成的所有子目标：

```
(declare-const v1 Real)
(declare-const v2 Real)
(assert (exists ((c1 Real) (c2 Real)(d Real)) 
                                  (and (<= c1 10.0) (>= c2 5.0) (>= d 0.0)
                                       (= v1 (+ c1 d)) 
                                       (= v2 (+ c2 d)))))
(apply (then qe ctx-solver-simplify)) 
```

结果`v2 >= 5.0 and v1 - v2 <= 5.0`与您想要的非常接近。

# ruby-on-rails - Ruby 中有哪些工具或实践可用于服务器中的海量实时数据及其在浏览器上的可视化？

> ID：12244707
> 
> 赞同：2
> 
> 时间：2012-09-03T08:53:43.463
> 
> 标签：ruby-on-rails, ruby, multithreading, gps

**我有 50 个 GPS 设备，它们使用HTTP 请求**发送纬度和经度信息。

 **我想在浏览器上实时表示这些信息。

我的疑问是：

1.  Ruby 中有哪些工具可用于处理大量实时数据。它以 HTTP 请求的形式出现。
2.  浏览器中有哪些工具可用于显示实时数据？

我不确定浏览器端是否可以直接使用来自 GPS 设备的数据，而不将其保存在数据库中。或者也许我必须将它保存在数据库中。我想在这方面有一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:39:34.387

可能是推送通知会帮助你。faye gem 的实现之一可以在 [http://railscasts.com/episodes/260-messaging-with-faye找到](http://railscasts.com/episodes/260-messaging-with-faye)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:41:18.020

1、Faye Faye 很简单，用于将消息推送到 Web 客户端或其他方式。但它很浪费电力。

有一篇文章适合您：如何为您构建 faye 项目。 [http://blog.csdn.net/hexudong08/article/details/6957574](http://blog.csdn.net/hexudong08/article/details/6957574)

2、喧嚣 [https://github.com/fredwu/bustle](https://github.com/fredwu/bustle)

3、剑圣

4、xmpp**

# javascript - 超时注销（JavaScript、jQuery）

> ID：12244708
> 
> 赞同：1
> 
> 时间：2012-09-03T08:53:44.730
> 
> 标签：javascript, jquery, timeout, logout

我尝试使用此代码在 15 分钟后自动注销。但这不能正常工作。我离开我的比赛 15 分钟，但什么也没发生。它保持登录状态。

但另一方面，如果我尝试更短的时间，例如 5 秒，它工作得很好……在 5 秒后它让我退出了。

我不知道，问题/错误在哪里？

```
var int=self.setInterval(setLastAction,1000);

function setLastAction(){
    var lastAction = new Date();    
    var baz = new Date();
    baz.setTime(lastAction.getTime() - firstAction.getTime());
    baz = baz.getSeconds();

    if(baz >= (15*60)){
         logOut();      
    }
}

$(document).mousemove(function(){
    firstAction = new Date();
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T08:57:49.327

您正在从一个`Date`对象中获取秒数，使用[`getSeconds()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getSeconds)，它*总是*`0`会返回一个介于和之间的整数`59`。比较时间之间的差异而不是创建一个新`Date`对象：

```
var secondsBetween = (lastAction.getTime() - firstAction.getTime()) / 1000;
if (secondsBetween >= (15 * 60)) {
     logOut();      
} 
```

# ruby - 有没有办法避免 Ruby 中的重复块？

> ID：12244709
> 
> 赞同：3
> 
> 时间：2012-09-03T08:53:47.883
> 
> 标签：ruby, block

我有一个需要传递的块`File.open`和另一种方法`XXobject#read`。由于我将相同的块传递给这两种方法，我想找到一种方法来避免重复块的代码。

我试图定义一个`Proc`对象，但`File.open`似乎不接受一个`Proc`对象。我想知道为什么。据我所知，一个块被存储为一个`Proc`对象。

有没有办法避免 Ruby 中的重复块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:00:30.333

您需要将 Proc 转换为 Block：

```
blk = Proc.new{puts 1234567890}

def a; yield; end

a(&blk)

1.9.3-194 (main):0 > a(&blk)
1234567890
=> nil 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:01:06.633

正如评论中已经写的那样，您可以使用 proc 将 proc 转换为 block `&`。

定义`your_proc`后，您可以将其作为块参数传递，使用`&your_proc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:35:59.183

`proc = Proc.new &proc` 它是块，块可以用作方法的参数

# java - 开源 IPv6 Java 验证

> ID：12244710
> 
> 赞同：3
> 
> 时间：2012-09-03T08:53:48.403
> 
> 标签：java, validation, ipv6

既然将来可能会删除所有 sun.* 专有 API，那么有人知道 IPv6 验证的任何开源 Java 实现吗？

关于[这个问题](https://stackoverflow.com/questions/5963199/ipv6-validation)，拥有原生 ipv6-address/prefix-length 格式支持也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T13:57:08.577

查看[Guava](http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/net/InetAddresses.html)库（有 isInetAddress() 方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-07T06:59:13.760

[开源 IPAddress Java 库](https://seancfoley.github.io/IPAddress/)将验证 IPv6 和 IPv4，并且还支持前缀长度（以及此类验证）。我是那个图书馆的项目经理。

利用

```
try {
    IPAddressString str = new IPAddressString("::1");
    IPAddress addr = str.toAddress();
} catch(IPAddressStringException e) {
    //e.getMessage has validation error
} 
```

# ios - iOS 选项卡栏控制器在所有选项卡内包含相同的表格视图，但过滤后的数据不同

> ID：12244711
> 
> 赞同：0
> 
> 时间：2012-09-03T08:53:49.923
> 
> 标签：ios, uitabbarcontroller, storyboard, uistoryboard, uistoryboardsegue

已解决：我想我想出了如何去做。

我为每个选项卡的每个视图控制器添加了标签。然后在视图控制器的 viewDidLoad 方法中，我可以根据选择的选项卡标签添加一个开关： `self.tabBarController.tabBar.selectedItem.tag`

问题：

我对 iOS 开发很陌生，需要一些反馈 - 这是场景：

我为此使用故事板。我们在标签栏控制器中有一个导航控制器。选项卡栏控制器在所有选项卡中包含相同类型的表格视图，但数据过滤方式不同。

例如，选项卡 1 将显示所有类型的红色水果，选项卡 2 将显示所有类型的黄色水果等等。

现在，由于我使用的是故事板，我是否需要为每个选项卡从选项卡栏控制器分支创建 2 个不同的主视图控制器？或者我可以对两个选项卡使用相同的主视图控制器吗？

我可以使用segue上的标识符来指定选择了哪个选项卡吗？我在从 tabbarcontroller 到导航控制器的 segue 上找不到它。

当一个选项卡被选中时，有没有像“prepareforsegue”这样的方法可以在destinationviewcontroller上预设过滤器？类似于我们在基于导航的应用程序中拥有的东西？这样我就不必为每个选项卡创建不同的视图控制器。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:30:25.723

[从这里](http://mobiledevelopertips.com/user-interface/detect-taps-on-uitabbarcontroller-and-determining-class-type.html)

在您的 UITabBarControllerDelegate 委托中：

```
- (void)tabBarController:(UITabBarController *)tabBarController     didSelectViewController:(UIViewController *)viewController
{
  ...
} 
```

我想在那里你可以在适当的 viewController 上设置一个属性。

ps 也尝试在 viewControllers 之间共享您的模型 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T18:02:47.933

我为每个选项卡的每个视图控制器添加了标签。然后在视图控制器的 viewDidLoad 方法中，我可以根据选择的选项卡标签添加一个开关：`self.tabBarController.tabBar.selectedItem.tag`

# android - Android SQLite 列 _id 错误，

> ID：12244719
> 
> 赞同：1
> 
> 时间：2012-09-03T08:54:14.877
> 
> 标签：android, sqlite

我正在尝试在数据库中查询。数据库不是在应用程序中创建的，我是在外部创建的，我正在使用[本教程](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)的解释。但我有一个与列_id 相关的错误。在类 DatabaseHelper 中，我有以下代码：

```
public Cursor Search(Context context,String search){
        SQLiteDatabase db= getReadableDatabase();
        String cursorFactory = "SELECT * FROM words WHERE eng || ' ' || rus LIKE ?";
        Cursor cursor = db.rawQuery(cursorFactory, new String[]{"%" + search + "%"});
        return cursor;
                } 
```

在Activity中，我写的代码是：

```
 public void search(View v){
            text2search= searchText.getText().toString();   
            cursor= myDbHelper.Search(mContext, text2search);
            adapter =new SimpleCursorAdapter(getBaseContext(),R.layout.list_item, 
                        cursor,
                        new String[]{"rusword","engword","kind"},
                        new int[]{R.id.rusWord,R.id.engWord,R.id.knd});
            wordsList.setAdapter(adapter);              
        } 
```

我得到与_id相关的错误：（在LogCat中）

> 09-03 14:12:38.018：E/AndroidRuntime(16581)：原因：java.lang.IllegalArgumentException：列“_id”不存在

但是我创建的数据库有“_id”列：（我无法上传图片，所以这里是链接[https://www.dropbox.com/s/9a2ol1acrnxmzob/sql-db-rusWjpg.png](https://www.dropbox.com/s/9a2ol1acrnxmzob/sql-db-rusWjpg.png)）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:09:46.603

所以问题不是太棘手。一些适配器，在你的情况下，`SimpleCursorAdapter`这个适配器需要什么时候尝试选择你需要选择列的东西**_id**。所以试试这个：

```
new String[] {"_id", "rusword", "engword", "kind"}
String cursorFactory = "SELECT _id, [next columns] FROM ...; 
```

现在它应该可以工作了。

类似的问题在这里：

*   [`App Crashes On Startup Due To java.lang.IllegalArgumentException: column '_id' does not exist`](https://stackoverflow.com/questions/4974816/app-crashes-on-startup-due-to-java-lang-illegalargumentexception-column-id-d)

**注意：**如果您不想拥有**_id**列，您可以使用这个简单的技巧：

```
SELECT keyID AS _id FROM TableName 
```

# wcf - WCF 服务未处理 MSMQ 消息

> ID：12244721
> 
> 赞同：1
> 
> 时间：2012-09-03T08:54:21.147
> 
> 标签：wcf, msmq

我有一个检查 MSMQ 消息的 WCF Windows 服务。它可以正常接收消息，但似乎没有调用 ProcessMSMQMessage 事件。

任何想法为什么会这样？我是否正确设置了 ProcessMSMQMessage 事件？还是我错过了什么？

我的代码如下。谢谢。

WCF 服务类...

```
public partial class MyService : ServiceBase
{

  private ServiceHost host;

  public MyService()
  {
    InitializeComponent();
  }

  protected override void OnStart(string[] args)
  {
    string queueName = ConfigurationManager.AppSettings["ProcessMsgQueueName"];
    if (!MessageQueue.Exists(queueName))
    {
      MessageQueue thisQueue = MessageQueue.Create(queueName, true);
      thisQueue.SetPermissions("Everyone", MessageQueueAccessRights.ReceiveMessage);
    }

    try
    {
      Uri serviceUri = new Uri("msmq.formatname:DIRECT=OS:" + queueName);

      // communicate to MSMQ how to transfer and deliver the messages
      MsmqIntegrationBinding serviceBinding = new MsmqIntegrationBinding();
      serviceBinding.Security.Transport.MsmqAuthenticationMode = MsmqAuthenticationMode.None;
      serviceBinding.Security.Transport.MsmqProtectionLevel = System.Net.Security.ProtectionLevel.None;

      serviceBinding.SerializationFormat = MsmqMessageSerializationFormat.Binary;

      host = new ServiceHost(typeof(MyService.Service1)); // add watcher class name
      host.AddServiceEndpoint(typeof(MyService.IService1), serviceBinding, serviceUri);
      host.Open();
    }
    catch (Exception ex)
    {
      EventLog.WriteEntry("SERVICE" + ex.Message, EventLogEntryType.Error);
    }
  }

  protected override void OnStop()
  {
    if (host != null)
     host.Close();
  }
} 
```

IService1 合同...

```
[ServiceContract(Namespace = "MyService")]
[ServiceKnownType(typeof(Events.Dashboard_Message))]
public interface IService1
{
  [OperationContract(IsOneWay = true)]
  void ProcessMSMQMessage(MsmqMessage<Events.Dashboard_Message> msg);
} 
```

服务1类...

```
public class Service1 : IService1
{
  [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
  public void ProcessMSMQMessage(MsmqMessage<Events.Dashboard_Message> msg)
  {
    string msgName = msg.GetType().Name;

    // send to eventlog
    EventLog.WriteEntry("MyService", msgName);  
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:24:28.810

终于搞定了

问题出在 IService1 合同中。需要添加`Action = "*"`。

```
[OperationContract(IsOneWay = true, Action = "*")] 
```

# java - Java 程序本身是否支持版本的概念？

> ID：12244722
> 
> 赞同：3
> 
> 时间：2012-09-03T08:54:24.853
> 
> 标签：java, eclipse

我想知道是否有任何标准程序来设置 Java 项目的版本（有点像 Windows 可执行文件版本）。

我希望我的应用程序代码能够具有自省功能，以便它可以知道自己的版本。

是否有可能使用 Java 来执行此操作，而无需在目录中使用 .txt 文件以版本作为内容？

如果是，理想的做法是让 Eclipse 在每次编译时更新版本。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:56:14.103

存储版本信息的 Java 原生方式是在[清单文件](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)中（[本教程的这一部分是关于版本信息的](http://docs.oracle.com/javase/tutorial/deployment/jar/packageman.html)）。

您可以使用[该类`Package`及其](http://docs.oracle.com/javase/7/docs/api/java/lang/Package.html)方法，例如[`getImplementationVersion`](http://docs.oracle.com/javase/7/docs/api/java/lang/Package.html#getImplementationVersion%28%29)在运行时获取这些详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:33:55.303

> 我不确定如何告诉 Eclipse 我希望它在每次自动构建 .java 文件时在给定位置创建一个 .txt 文件，不过..

我可以建议您看一下 Maven，以及它支持的发布过程。

# asp.net - 部署 asp.net，IIS 没有导入应用程序选项

> ID：12244725
> 
> 赞同：4
> 
> 时间：2012-09-03T08:54:32.337
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

[我正在尝试根据本网站http://www.shubho.net/2011/01/quick-deployment-of-aspnet-applications.html](http://www.shubho.net/2011/01/quick-deployment-of-aspnet-applications.html)的步骤使用 IIS 在本地部署我的 ASP.net 网页

但是，当我尝试执行导入应用程序时，该选项不可用。我尝试重新安装 MSDeploy，但仍然无法正常工作。

有人知道如何设置我的应用程序导入吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:28:46.950

发布到本地所需要做的就是单击发布并创建“新建”。然后当在向导中询问而不是 Web 部署时，选择“文件系统”，然后在目标位置浏览到 C:\inetpub\wwwroot\YourFileName。确保 VS 处于发布模式以进行发布。在 IIS 7 中，您将设置一个新站点并确保将目录设置为相同的文件位置。然后你的完成。如果您需要更多帮助，您可以通过 roman.appsllc@gmail.com 给我发电子邮件，我会向您发送图片。

# ehcache - 为什么ehcache2.6包中没有“net.sf.ehcache.constructs.web.filter.SimplePageCachingFilter”类？

> ID：12244736
> 
> 赞同：2
> 
> 时间：2012-09-03T08:55:22.387
> 
> 标签：ehcache

我想尝试页面缓存。但我找不到`net.sf.ehcache.constructs.web.filter.SimplePageCachingFilter`课程，所以我收到一个错误`class not found`

我该怎么办？

```
<filter>
  <filter-name>SimplePageCachingFilter</filter-name>
  <filter-class>net.sf.ehcache.constructs.web.filter.SimplePageCachingFilter
  </filter-class>
</filter> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T21:59:58.197

[`SimplePageCachingFilter`](http://grepcode.com/file/repo1.maven.org/maven2/net.sf.ehcache/ehcache-web/2.0.4/net/sf/ehcache/constructs/web/filter/SimplePageCachingFilter.java)已经在一段时间前（IIRC）从核心 Ehcache jars 中移出，现在它是 的一部分`ehcache-web`，添加一个依赖项，例如通过 maven：

```
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-web</artifactId>
    <version>2.0.4</version>
</dependency> 
```

# objective-c - 数组在范围内的索引处崩溃？

> ID：12244738
> 
> 赞同：0
> 
> 时间：2012-09-03T08:55:29.997
> 
> 标签：objective-c, nsarray

谁能帮我解释为什么我的阵列崩溃了。

基本上我有两个按钮可以更改 imageView 中的图像。

H：

```
@interface CaseStudySecondPageViewController : UIViewController
{
    //scroller and back and forward buttons for custom control.
    __weak IBOutlet UIScrollView *scroller;
    __weak IBOutlet UIButton *back;
    __weak IBOutlet UIButton *forward;

    //app delegate to return the selected case study from the other controller.
    AppDelegate *del;

    //variables for displaying the case studies
    NSArray *myImageArray;
    NSInteger localSelctorInt;
}

//setup a IBOutlet to allow the image to be changed.
@property (weak, nonatomic) IBOutlet UIImageView *logoImage;

@end 
```

米：

更新方法：

```
-(void)Updater
{

[logoImage setImage:[myImageArray objectAtIndex:localSelctorInt]];

} 
```

上一个和下一个按钮：

```
 //returns to previous image if back button is clicked.
-(void) back:(id)sender
{
    if (localSelctorInt > 0)
    {
        localSelctorInt--;
    }
    else
    {
        localSelctorInt = 0;
    }
    [self Updater];
}

//returns to next image if forward button is clicked. increase 7 if array size changes.
//1 removed from int as in starts at 1 and array starts at 0.
-(void) forward:(id)sender
{
    if (localSelctorInt < 7)
    {
        localSelctorInt++;
    }
    else
    {
        localSelctorInt = 7;
    }
    [self Updater];
} 
```

最后我的图像数组声明在：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    //setup the delegate to allow access to the int which was modified on the page before.
    del = [[UIApplication sharedApplication] delegate];

    //assign a local variable to the int from the previous page.
    localSelctorInt = *(del.selectorInt);

    //create back and forward buttons as UIButtons first.
    [back addTarget:self action:@selector(back: ) forControlEvents:UIControlEventTouchUpInside];
    [forward addTarget:self action:@selector(forward:) forControlEvents:UIControlEventTouchUpInside];

    //pass the ui buttons into ui bar items.
    UIBarButtonItem *UIBack = [[UIBarButtonItem alloc] initWithCustomView:back];
    UIBarButtonItem *UIForward = [[UIBarButtonItem alloc] initWithCustomView:forward];

    //add these to an array (notice item"s").
    self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:UIForward, UIBack, nil];

    //initialize the array with all of the images for the case studies logos.
    myImageArray = [NSArray arrayWithObjects:
            [UIImage imageNamed:@"Logo_Arm.png"],
            [UIImage imageNamed:@"Logo_Fife"],
            [UIImage imageNamed:@"Logo_Findel.png"],
            [UIImage imageNamed:@"Logo_BirkBeck.png"],
            [UIImage imageNamed:@"Logo_NHS_Dudley.png"],
            [UIImage imageNamed:@"Logo_NHS_Kensignton.png"],
            [UIImage imageNamed:@"Logo_Yorkshire_Water.png"],
            [UIImage imageNamed:@"Logo_Uni_Hertfordshire.png"],
            nil];

    //call update method once to load the first image selected from the previous page.
    [self Updater];
} 
```

现在我的应用程序在尝试索引第 4 个图像（数组中的第 3 个）时崩溃：

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayI objectAtIndex:]: index 3 beyond bounds [0 .. 2]”

这可能是非常简单的事情，但我感谢您的帮助，干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T09:00:27.537

如果您查看您的异常，它表示您的数组仅包含 3 个对象 ( `... bounds [0..2] ...`)。所以，我的猜测是你的第四张图片不存在......检查 . 的拼写`[UIImage imageNamed:@"Logo_BirkBeck.png"]`。这张图真的存在吗？它返回`nil`，对象列表被`nil`终止，因此，您的数组确实只包含 3 个图像而不是 8 个图像。

*旁注：*不要使用像`localSelctorInt < 7`. 始终依赖数组 ( `_myImageArray.count`) 中的实数元素。这是一条通往地狱的路……

*第二边注：*不要声明没有下划线前缀的 ivars。`_myImageArray`对 ivar 名称使用类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:01:39.720

我猜是因为没有分配数组

```
myImageArray = [[NSArray alloc] initWithObjects:
        [UIImage imageNamed:@"Logo_Arm.png"],
        [UIImage imageNamed:@"Logo_Fife.png"],
        [UIImage imageNamed:@"Logo_Findel.png"],
        [UIImage imageNamed:@"Logo_BirkBeck.png"],
        [UIImage imageNamed:@"Logo_NHS_Dudley.png"],
        [UIImage imageNamed:@"Logo_NHS_Kensignton.png"],
        [UIImage imageNamed:@"Logo_Yorkshire_Water.png"],
        [UIImage imageNamed:@"Logo_Uni_Hertfordshire.png"],
        nil]; 
```

# csv - 带有 FlexiContent 的 Joomla 1.5：可在代码中使用 API 从 Joomla 中的 CSV 导入内容？

> ID：12244739
> 
> 赞同：0
> 
> 时间：2012-09-03T08:55:30.110
> 
> 标签：csv, import, components, joomla1.5

我是 Joomla 1.5 的新手，必须创建一个组件来负责从 CSV 文件导入数据。这些数据是自定义内容类型，经过几次搜索后，我选择了 FlexiContent，它似乎非常适合创建我的类型。

现在我想在良好的自定义类型中导入我在 CMS 中的 CSV 上获得的所有自定义字段的数据。到目前为止，没有关于如何“正确”执行此操作的文档。

我找到了有关人们在数据库数据中手动插入的链接，但我确信有一种使用 Flexicontent 框架的安全方法。Flexicontent 论坛在注册时似乎被破坏了，我不能在这里问...

有什么建议么？非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:39:35.953

您尝试过最新版本的 FLEXIcontent 吗？它改进了内容项的 CSV 导入——具有更多选项/功能和——对导入过程进行更用户友好的调试

# php - 如何在不重新加载整个网页的情况下动态更改经度和纬度的值

> ID：12244741
> 
> 赞同：1
> 
> 时间：2012-09-03T08:55:32.597
> 
> 标签：php, javascript, ajax, google-maps, latitude-longitude

我正在用 PHP 开发跟踪应用程序，我想在不重新加载地图的情况下动态更改车辆的经度和纬度值，但是这些 latlong 值来自 android 跟踪设备，那我该怎么办？是否可以通过 AJAX 或 Javascript 或是否有任何选项可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:46:03.820

在不了解系统中其他组件的情况下，我建议您将 Android 设备中的坐标保存在数据库中。然后您的地图可以使用 Ajax 检查数据库中的更新，并在需要时更新位置。

这样做的好处是简单，您不必在网页和 Android 设备之间创建连接。而且您还可以跟踪旧位置，因为它们始终保存在数据库中。

# c++ - 这个 C++ 模板类代码是如何工作的？

> ID：12244744
> 
> 赞同：4
> 
> 时间：2012-09-03T08:55:38.267
> 
> 标签：c++, templates, googletest

我正在尝试将 Google 测试 ( [gtest](http://code.google.com/p/googletest/) ) 代码移植到 VxWorks 5.5。严重的缺点是开发环境 Tornado 2.2 使用古老的 GCC 编译器版本 2.96。

在分析代码时，我发现部分代码`gtest.h`我不明白！这个 C++ 模板类是如何运作的？

```
// ImplicitlyConvertible<From, To>::value is a compile-time bool
// constant that's true iff type From can be implicitly converted to
// type To.
template <typename From, typename To>
class ImplicitlyConvertible {
 private:
  // We need the following helper functions only for their types.
  // They have no implementations.

  // MakeFrom() is an expression whose type is From.  We cannot simply
  // use From(), as the type From may not have a public default
  // constructor.
  static From MakeFrom();

  // These two functions are overloaded.  Given an expression
  // Helper(x), the compiler will pick the first version if x can be
  // implicitly converted to type To; otherwise it will pick the
  // second version.
  //
  // The first version returns a value of size 1, and the second
  // version returns a value of size 2\.  Therefore, by checking the
  // size of Helper(x), which can be done at compile time, we can tell
  // which version of Helper() is used, and hence whether x can be
  // implicitly converted to type To.
  static char Helper(To);
  static char (&Helper(...))[2];  // NOLINT

  // We have to put the 'public' section after the 'private' section,
  // or MSVC refuses to compile the code.
 public:
  // MSVC warns about implicitly converting from double to int for
  // possible loss of data, so we need to temporarily disable the
  // warning.
#ifdef _MSC_VER
# pragma warning(push)          // Saves the current warning state.
# pragma warning(disable:4244)  // Temporarily disables warning 4244.

  static const bool value =
      sizeof(Helper(ImplicitlyConvertible::MakeFrom())) == 1;
# pragma warning(pop)           // Restores the warning state.
#elif defined(__BORLANDC__)
  // C++Builder cannot use member overload resolution during template
  // instantiation.  The simplest workaround is to use its C++0x type traits
  // functions (C++Builder 2009 and above only).
  static const bool value = __is_convertible(From, To);
#else
  static const bool value =
      sizeof(Helper(ImplicitlyConvertible::MakeFrom())) == 1;
#endif  // _MSV_VER
}; 
```

创建此类的对象时，如果模板类型可隐式转换为模板类型，则名称为布尔变量`value`应包含答案。为了得到答案，使用了两个私有函数，并且. 但是这两个函数只在这里声明，我找不到它们的定义。如果不出意外，此实现不应链接。`From``To``MakeFrom()``Helper()`

我也不明白以下的语法

```
static char (&Helper(...))[2]; 
```

当然，这段代码编译得很好（在 Microsoft Visual C++ 7.1 或更高版本或 GCC 3.4 或更高版本下），Google 的人确切地知道他们在做什么。

请赐教！不理解这段代码会让我发疯！:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T08:59:53.963

这是模板编程的标准技巧。

请注意，评论说*“通过检查 Helper(x) 的大小”*：这强调了代码所做的*唯一*`Helper`事情就是评估`sizeof(Helper(x))`some `x`。[`sizeof`](http://en.cppreference.com/w/cpp/language/sizeof)运算符*实际上并不评估它的参数*（它不需要；它只需要找出它有多大，这可能只使用编译时可用的信息），这就是为什么没有链接器错误（`Helper`永远真的叫）。

给您带来麻烦的语法意味着该`Helper`函数接受任意数量和类型的参数并返回对 a 的引用`char[2]`。[*要为这种类型的函数（可变参数函数*](http://en.cppreference.com/w/cpp/utility/variadic)）编写签名，需要使用省略号 ( `...`) 作为最后一个参数的规范。

可变参数函数是从 C 继承的一个特性，通常应该避免使用，并且在与类类型一起使用时会造成严重破坏，但在这种情况下，它并不重要，因为 - 如前所述 -`Helper`实际上不会被调用。

该类通过允许您使用语法将这一切联系在一起

```
ImplicitlyConvertible<From, To>::value 
```

要生成`value`，代码“伪造”调用并将其作为参数`Helper`传递给它的实例¹。`From`它依赖于编译器的重载决议来确定`To`在这种情况下是否会调用采用 a 的重载；如果是这样，则该重载的返回值`char`具有保证大小`1`并`value`最终为`true`. 否则选择可变参数重载（可以采用任何类型的参数），它返回 a `char[2]`。这有一个大于`1`，所以`value`结束了`false`。

* * *

¹ 请注意，这里`sizeof`再次使用了“实际上并不计算表达式”技巧：你如何告诉编译器参数`Helper`是`From`? 您可以使用`From()`，但`From`需要有一个默认的公共构造函数来编译代码。因此，您只需告诉编译器“我有一个`MakeFrom`返回 a`From`的函数”——该函数实际上不会被调用。

# jsf-2 - 在 JBOSS AS 7 中重定向 URL

> ID：12244749
> 
> 赞同：0
> 
> 时间：2012-09-03T08:55:51.787
> 
> 标签：jsf-2, jboss, url-rewriting, query-string, jboss7.x

大家好，目前我正在我的网址中传递查询字符串，例如

```
ip:port/contextroot/page.jsf?id=22&tsid=1234 
```

查询字符串是用户 ID 和 tsid。不需要特别输入查询字符串值。我的要求是在 url 中隐藏查询字符串，并且仍然能够在我的应用程序中使用查询字符串值。我在想是否有办法使用 jboss 重定向剥离查询字符串。

总结：

我想访问我的 page.jsf 喜欢

```
 ip:port/contextroot/page.jsf 
```

并且仍然从查询字符串中获取 id 和 tsid 。任何帮助都非常感谢。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:41:15.737

在您的 .NET 应用程序上，使用对称密码（例如 AES）加密所有敏感数据，然后将其发布到 JBOSS servlet。在该 servlet 中，解密传输的数据并将其存储在会话范围的 bean 中。这样，您随后可以从 bean 访问数据，而无需在 GET 参数中携带它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:26:13.390

我认为您正在寻找漂亮的面孔（[http://ocpsoft.org/prettyfaces/](http://ocpsoft.org/prettyfaces/)）

# html - 在元素上使用浮点数

> ID：12244752
> 
> 赞同：0
> 
> 时间：2012-09-03T08:56:03.013
> 
> 标签：html, css

我希望数字和单词成员对齐。

我究竟做错了什么？

***[链接在这里](http://jsfiddle.net/EC63P/)***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:58:33.000

添加`float:left`到身份证`stat-left`

检查这个更新[**的演示**](http://jsfiddle.net/EC63P/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:04:18.773

你可以很容易地压缩你的代码。与其使用段落标签，不如使用跨度？段落标签自动成为块级元素，但默认情况下跨度是内联的。

[jsfiddle](http://jsfiddle.net/nckxL/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:28:53.593

我试图只用一个 div 为你制作一个代码并最小化代码

**HTML**

```
<div id="connections">
<p class="number"> 2,476 </p>
<p class="stat-right">Followers </p>
</div> 
```

**CSS**

```
#connections {
    margin: 0px;
    width: 150px;
    font-family: calibri;
    font-size: 22;
    color: #444;
    border:1px solid red;
    overflow:hidden;
}
.number {
    margin: 0px;
    padding: 0px;
    float:left;
}
.stat-right {
    float:right;
    margin-top:7px;
} 
```

**检查演示**：- [http://jsfiddle.net/EC63P/35/](http://jsfiddle.net/EC63P/35/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T08:57:48.820

`#stat-left`给`

`display:inline-block`

像这样

```
#stat-left {
    display:inline-block;
    vertical-align:top;
} 
```

**[*演示*](http://jsfiddle.net/EC63P/3/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T09:00:57.687

添加`style="float:left"`到带有数字的 div :)

它将允许下一个 Divs 从左侧浮动对象:)

```
<div id="connections">
                <div id="stat">
                    <div style="float:left"id="stat-left">
                    <p span class="number"> 2,476 </p>
                    </div>
                    <div id="stat-right">
                    <p> Followers </p>
                    </div>
                </div>
            </div> 
```

# python - python高效的子字符串搜索

> ID：12244754
> 
> 赞同：11
> 
> 时间：2012-09-03T08:56:09.860
> 
> 标签：python, c, performance, algorithm, substring

> **可能重复：**
> [string.find 是如何在 CPython 中实现的？](https://stackoverflow.com/questions/681649/how-is-string-find-implemented-in-cpython)

我在堆栈溢出中阅读了很多比较子字符串搜索性能的帖子（例如[Python 字符串搜索效率](https://stackoverflow.com/questions/6963236/python-string-search-efficiency)， [这是搜索子字符串的最有效方法吗？](https://stackoverflow.com/questions/7164711/is-this-the-most-efficient-way-to-search-for-a-substring)， [python 中的子字符串](https://stackoverflow.com/questions/5154247/substring-in-python)等...）

我还查看了 contains [abstract.c](http://hg.python.org/cpython/file/3d4d52e47431/Objects/abstract.c#l2377)的源代码实现。

据我所知，内置实现是一个迭代的：[python docs](http://docs.python.org/c-api/typeobj.html#PySequenceMethods.sq_contains)

python 是否有更充分的技术来查找子字符串：[Boyer–Moore 算法](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)、 [Rabin–Karp 算法](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)等...？？？

**编辑**

该问题已扩展： [Python：通过嵌入复杂算法改进子字符串搜索](https://stackoverflow.com/questions/12258847/python-2-7-improving-sub-string-search-by-using-sophisticated-algorithms)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T09:05:29.690

实际的 cpython 字符串搜索实现在这里：

[http://hg.python.org/cpython/file/tip/Objects/stringlib/fastsearch.h](http://hg.python.org/cpython/file/tip/Objects/stringlib/fastsearch.h)

它似乎使用了 Boyer-Moore。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:03:02.520

核心实现不提供此级别的功能。

您将使用 Google 找到适用于 Python 的 Boyer-Moore 或 Rabin-Karp 的实现。

# python - 如何在 OpenERP 中按多个列表进行筛选？

> ID：12244756
> 
> 赞同：-1
> 
> 时间：2012-09-03T08:56:11.530
> 
> 标签：python, list, openerp

您将如何根据同一页面上不同列表的选择来过滤一个列表？

我正在尝试实现类似于 Warehouse Dashboard 的界面，其中多个列表位于同一页面上，但我需要根据上述列表中的选择过滤每个列表。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:42:04.343

AFAIK，这是不可能的。您应该尝试自定义现有视图和/或开发自己的小部件。看看[这个问题](https://stackoverflow.com/questions/11949936/how-to-start-developing-in-web-addons/11950556#11950556)如何开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:03:13.683

`listview`当它显示时，你可以适应它。但显示后，您无法根据其他`listview`人的选择过滤数据。

# jquery - 如何禁用选择中的某些选项？

> ID：12244763
> 
> 赞同：1
> 
> 时间：2012-09-03T08:56:59.387
> 
> 标签：jquery, html, ruby-on-rails, select

我有一个`<select>`清单。其中，用户无权访问某些选项（用户可以看到这些选项但不能选择它们）。

Ruby on Rails 中是否有任何帮助程序可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:03:12.970

通常，您可能会使用`select`助手。

参考：[api.rubyonrails.org](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)

在这种情况下，这个：

```
select("post", "category", Post::CATEGORIES, {:disabled => 'restricted'}) 
```

可能变成：

```
<select name="post[category]">
  <option></option>
  <option>joke</option>
  <option>poem</option>
  <option disabled="disabled">restricted</option>
</select> 
```

除了提供一组禁用的选项，使用该`collection_select`方法，您还可以提供一个 Proc：

```
collection_select(:post, :category_id, Category.all, :id, :name, \
                  {:disabled => lambda{|category| category.archived? }}) 
```

如果方法归档时“2008 年的东西”和“圣诞节”类别返回 true？被调用，这将返回：

```
<select name="post[category_id]">
  <option value="1" disabled="disabled">2008 stuff</option>
  <option value="2" disabled="disabled">Christmas</option>
  <option value="3">Jokes</option>
  <option value="4">Poems</option>
</select> 
```

* * *

您还可以在方法的选项哈希中提供一组禁用的选项`options_for_select`。参考：[apidock.com](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select)

**带有一组禁用选项的示例**

```
options_for_select(["Free", "Basic", "Advanced", "Super Platinum"], \
                   :disabled => ["Advanced", "Super Platinum"]) 
```

给出：

```
<option value="Free">Free</option>
<option value="Basic">Basic</option>
<option value="Advanced" disabled="disabled">Advanced</option>
<option value="Super Platinum" disabled="disabled">Super Platinum</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:02:14.887

尝试这个

```
<%= f.select :action_item_status, action_item_status, {}, {:disabled => true} %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:02:31.163

手动构造选项并设置禁用属性 `<option disabled="disabled"></option>`并尝试禁用选项

# windows - 将特定端口分配给 RPC 服务器\客户端

> ID：12244767
> 
> 赞同：0
> 
> 时间：2012-09-03T08:57:16.667
> 
> 标签：windows, port, rpc

我正在 Windows 上编写 RPC 客户端服务器应用程序。我已经浏览了 MS 给出的 RPC 示例程序。但他们都没有特别提到端口。这可能是因为 RPC 使用 1024 以上的动态端口。但是如果我想将特定的端口/端口范围分配给*特定*的服务（例如我的服务器和客户端应用程序）怎么办。我怎样才能做到这一点？我可以使用 RPCCFG 来分配范围，但该范围将适用于所有 RPC 程序 (http://support.microsoft.com/kb/908472) 对吗？如何控制单个程序？我知道这是可能的，因为交换似乎能够为客户端访问服务做到这一点？

在此先感谢，-尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:37:07.413

您可以在代码中定义端口或使用您在代码中读取的配置文件。

```
 status = RpcServerUseProtseqEp(
  (char *)"ncacn_ip_tcp",            // Use TCP/IP
  RPC_C_PROTSEQ_MAX_REQS_DEFAULT,    // Backlog queue length for TCP/IP.
  (char *)"4747",                    // TCP/IP port to use.
  NULL); // No security. 
```

成功。碧玉

# python - 从奥斯卡 Twisted 中的外部事件处理程序发送 ICQ 消息

> ID：12244768
> 
> 赞同：2
> 
> 时间：2012-09-03T08:57:40.373
> 
> 标签：python, twisted, oscar-protocol

我正在为一项服务制作一个 ICQ（以及潜在的 XMPP）机器人，该机器人应该发送和接收来自用户的消息。

我正在使用 Python 和 Twisted。我从官方文档的例子开始（这个：[http](http://twistedmatrix.com/documents/current/words/examples/oscardemo.py) ://twistedmatrix.com/documents/current/words/examples/oscardemo.py ）

到目前为止，我成功地接收和处理了来自 ICQ 联系人的消息。现在我需要发送消息，但不需要回复他们的消息或某些事件。我需要使用事件处理程序从类外部发送带有 Oscar（Twisted 用于 ICQ 消息传递的东西）的消息。我怎么做？

我会很感激任何帮助，因为我没有用谷歌搜索任何有用的东西，在那里使用 Oscar 并没有那么多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:17:19.123

没有“内”或“外”。编程中的包含隐喻是一个极具破坏性的隐喻。你最好忘记它。

考虑这个类：

```
class Foo(object):
    def bar(self):
        return "Foo.bar says hello"

    def baz(self):
        print self.bar() 
```

给定一个`Foo`named实例`aFoo`，考虑以下两种使用方式：

```
aFoo.baz()
print aFoo.bar() 
```

这两种用途的行为有什么区别？没有一个，但有一个来自“内部”的呼叫栏和一个来自“外部”的呼叫栏。包含隐喻在这里是无用且不相关的，不会根据调用函数的“位置”而改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:21:29.547

当你连接

```
protocol.ClientCreator(reactor, OA, SN, PASS, icq=icqMode).connectTCP(*hostport) 
```

添加 a `Deferred`，将在连接完成时调用：

```
oscar_prot = None

def get_B_instance(b_instance):
    global oscar_prot
    oscar_prot = b_instance

d = Deferred()
d.addCallback(get_B_instance)

protocol.ClientCreator(reactor, OA, SN, PASS, deferred=d, icq=icqMode).connectTCP(*hostport) 
```

在`get_B_instance`函数中，您可以保留对协议类实例的引用。

然后你可以调用`sendMessage`那个实例。

```
oscar_prot.sendMessage(username, message) 
```

# jenkins - 通过 API 安装 Jenkins 插件？

> ID：12244769
> 
> 赞同：2
> 
> 时间：2012-09-03T08:57:41.463
> 
> 标签：jenkins, hudson, hudson-plugins, jenkins-plugins

> **可能重复：**
> [如何在 jenkins 远程访问 API 的帮助下安装插件？](https://stackoverflow.com/questions/9765728/how-to-install-plugins-in-jenkins-with-the-help-of-jenkins-remote-access-api)

是否有启用远程插件安装的 Jenkins API 调用？

该文档暗示了这种可能性，但我似乎无法在任何地方找到它。我正在尝试在新启动的 Jenkins 实例上自动安装几个插件。

# version-control - 在 JCR 中对节点层次结构进行版本控制？

> ID：12244770
> 
> 赞同：1
> 
> 时间：2012-09-03T08:57:45.753
> 
> 标签：version-control, hierarchy, jcr

我知道可以在 JCR 存储库中对各个节点进行版本控制。但是，如果我的文档由小片段的层次结构、较大片段池中节点的别名组成，该怎么办。我想拍摄文档中所有节点的快照，并在所有正在编辑文档的客户端之间共享层次结构当前状态的信息。JCR 有可能吗？你能给我一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:39:54.710

是的，可以（并且非常容易）对子图进行完整的版本控制。子图顶部的节点应该具有`jcr:versionable`mixin，通过节点的主要类型或 mixin 类型的超类型显式或隐式。子图中没有其他节点需要标记为可版本化；事实上，如果他们都没有它，那就容易多了。

默认情况下，属性定义和子节点定义的所有“父版本控制”行为都是`COPY`，这将完美地工作。

然后，只需获取`VersionManager`JCR `Session`（通过会话的工作区），并签入节点：

```
javax.jcr.Node subgraphRoot = ...
javax.jcr.VersionManager vmgr = session.getWorkspace().getVersionManager();
vmgr.checkin(subgraphRoot.getPath()); 
```

检查它以修改它同样简单：

```
vmgr.checkout(subgraphRoot.getPath()); 
```

# cocos2d-iphone - 在游戏中同时应用 ApplyForce 和 LinearImpuls 时的速度增加

> ID：12244771
> 
> 赞同：0
> 
> 时间：2012-09-03T08:57:46.793
> 
> 标签：cocos2d-iphone, box2d-iphone

![演示示例](../Images/9fd78aa3f8a5e3344c284fb7e71bebe9.png)

在我的游戏中，我使用 LinearImpuls 跳跃玩家身体，ApplyForce 左右运动。但问题是，当玩家跳跃时，如果发生运动，那么玩家速度就会增加，看起来就像在空中奔跑。

那么如何解决这个问题呢？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:19:10.880

我认为在代码中通过布尔变量进行检查，一次只能执行一个动作，无论是跳转还是左右移动都可以解决问题，直到并且除非它不影响您所需的移动。

# javascript - 动态添加属性 角Js

> ID：12244774
> 
> 赞同：1
> 
> 时间：2012-09-03T08:57:58.617
> 
> 标签：javascript, html, ruby-on-rails-3, angularjs

我正在尝试在使用 angularJs 指令中添加动态添加属性我想在表单中动态添加 html 标记

我的观点 ：

```
<div ng-show="edit_tasks">   
   <edittask-form><edittask-form> 
</div> 
```

我的表单 HTML

```
{
<div>
  <form ng-submit="submitFrom()" csrf-tokenized>
    Task Name<input type="text" placeholder="Name" ng-model="newtask.name" required />
    Task Description<input type="text" placeholder="Description" ng-model="newtask.description" required />
    Start Date <input type="text" placeholder="Start date" ng-model="newtask.start_date" required />
    Start Date <input type="text" placeholder="End date" ng-model="newtask.end_date" required />
    <input type="submit" value="submit" />
  </form>
</div>
} 
```

我的指令

```
module.directive("edittaskForm", function() {
  return {
    restrict: "E",
    templateUrl: "<%=asset_path 'tasks/task_form.html' %>",
    controller: tasksCtrl,
    replace: false,
    link: function(scope, elt, attrs, controller) {
          scope.form = elt.find("form");
          console.log(scope.form);

          scope.taskEdit = function(task) {
            scope.task =  task;
            scope.show_tasks = false;
            scope.edit_tasks = true;
            scope.newtask = task;
          };
        }
  }
}); 
```

如何`<input type="text" name="xyz" />` 在表单中添加

提前考虑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:37:39.993

您可以通过使用 ngShow 在模板中执行此操作，但是如果您想在指令中执行此操作，我想您无法在链接函数中执行此操作，因为我知道它不支持 html 转换，我想您应该尝试在compile 函数，你可以[在这里](http://docs.angularjs.org/guide/directive)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-29T09:26:01.400

如果您想在 angularjs 中为表单元素添加动态属性，您可以执行以下操作。

**第 1 步：** 创建读取表单元素的自定义指令，如下所示：

> 注意：这里我使用**querySelectorAll('selector')**来获取所有输入元素，如果你想要单人，你可以使用**querySelector('selector')**。

```
app.directive('dynamicAttribute', function ($compile) {
    return {
             link: function (scope, element, attrs, ctrl) {
                  var allElements=element[0].querySelectorAll('input');
                  for(var i=0;i<allElemts.length;i++){
                      allElements[i].setAttribute('ng-keypress','resetValues($event)');
                 }
                     $compile(allElements)(scope);
              }
         };
       }); 
```

**第 2 步：**将此指令添加到您的元素

```
 <form name="userForm" dynamic-attrubute>
    <input type="text"   name='name' ng-model-options="{ updateOn: 'blur' }" ng-model="name">
    <input type="text"  name='password' ng-model-options="{ updateOn: 'blur' }" ng-model="password">
</form> 
```

*动态按键属性添加值函数* [![在此处输入图像描述](../Images/188c7554508bd7f7f6fbac7461ed3b8b.png)](https://i.stack.imgur.com/ZLt02.png)

# php - 删除令牌变量

> ID：12244777
> 
> 赞同：0
> 
> 时间：2012-09-03T08:58:00.610
> 
> 标签：php, replace

我正在编写基于主题的脚本，需要一种方法来替换未被脚本替换的“变量”或标记。

格式为：

```
^_variablename_^ 
```

也就是说，在处理以下内容后，使用变量：name=Adam, Occupation=programmer

```
Hello, my name is ^_title_^^_name_^, and I work as a ^_occupation_^. 
```

我们会留`^_title_^`在原地。

我需要一种方法来摆脱这些，而不知道“变量”的名称。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:59:53.937

再次处理：

```
$str = 'Hello, my name is ^_title_^Adam, and I work as a programmer.';
$str = preg_replace('/\^_(\w+)_\^/', '', $str);

echo $str; 
```

[键盘](http://codepad.org/95NkGedh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:01:44.493

```
$str = 'Hello, my name is ^_title_^Adam, and I work as a programmer.';
echo preg_replace('/^_[\w_-]+_^/i', '', $str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:06:30.017

尝试使用[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)，当替换变量时，您可以简单地忽略无法替换的变量：

```
$input = 'Hello, my name is ^_title_^^_name_^, and I work as a ^_occupation_^.  ';
$variables = array('name' => 'adam');
$re = preg_replace_callback('/\^_(?<var>.+?)_\^/', function($params) use ($variables) {
        if (isset($variables[$params['var']])) {
            return $variables[$params['var']]; 
        } else {
            return '';
        }   
    },  
$input);

print $re; 
```

这使用了从 php 5.3.0 开始工作的匿名函数语法，如果你想在早期版本上使用它，你可能需要为此声明一个单独的回调。

# ruby-on-rails - Gregg Pollack 在 Rails for Zombies 中使用了什么样的演示程序？

> ID：12244779
> 
> 赞同：1
> 
> 时间：2012-09-03T08:58:09.490
> 
> 标签：ruby-on-rails, presentation

Gregg Pollack 在 Rails for Zombies 视频中使用了什么样的演示程序？它们非常棒且方便。[http://images2.mytube.uz//images143/104764.jpg](http://images2.mytube.uz//images143/104764.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:19:24.703

他们使用 Keynote（有时是 Powerpoint），然后在此基础上构建一些内容。他们在[这里](https://www.codeschool.com/screencasting)有一个非常全面的截屏指南。

# php - PHP：使用正则表达式在语句中查找语句

> ID：12244784
> 
> 赞同：4
> 
> 时间：2012-09-03T08:58:23.937
> 
> 标签：php, regex, preg-match-all

目前我有以下情况：我正在尝试“解析”文本，寻找占位符（它们的符号是“{...}”），稍后，我将用实际文本替换它们。

我想到了正则表达式

```
$foo = "Hello World {foo{bar}} World Hello!";
$bar = array();
preg_match_all('@\{.+\}@U', $foo, $bar);
var_dump($bar); 
```

但这会返回

```
array(1) { [0]=> array(1) { [0]=> string(9) "{foo{bar}" } } 
```

让它变得贪婪将导致：

```
array(1) { [0]=> array(1) { [0]=> string(10) "{foo{bar}}" } } 
```

但我希望结果是这样的：

```
array(1) { [0]=> array(2) { [0]=> string(5) "{bar}" [1]=> string(10) "{foo{bar}}" } } 
```

有没有办法在 preg_match(_all) 和正则表达式的帮助下达到这个目的？

还是我必须一次又一次地循环我的 $bar，直到结果集中没有子语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:03:12.670

你很幸运你有这个 PCRE。这必须使用递归来解决：[http ://regex101.com/r/pO3hA0](http://regex101.com/r/pO3hA0)

`/(?=({(?>[^{}]|(?1))+}))/g`（你不需要 php 中的 g 标志）

# ajax - 使用 Ajax 表单和分页 - 在下一页选择时丢失搜索参数

> ID：12244790
> 
> 赞同：3
> 
> 时间：2012-09-03T08:58:49.577
> 
> 标签：ajax, asp.net-mvc-3

好的——一定有人在我之前做过这件事。

我有一个 Ajax 表单（Ajax 表单助手），它有一个搜索框和一些用于过滤内容的复选框。搜索结果通过局部视图呈现在下方。见下文：

![在此处输入图像描述](../Images/085dfc7c463e99966a1830423eed0591.png)

这是代码：

**搜索.cshtml**

```
@using (Ajax.BeginForm("SearchStuff", "FooController", new AjaxOptions
{
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "GET",
    OnFailure = "searchFailed",
    LoadingElementId = "progress",
    UpdateTargetId = "search-results",
}))
{
    <div>
        <div class="search-filter">
            <span class="searchFilter">          
                <input type="checkbox" name="chkAll" checked />
                All
                <input type="checkbox" name="chkJournal" />
                Journal
                <input type="checkbox" name="chkBook" />
                Book
                <input type="checkbox" name="chkBookChapter" />
                Book Chapter
                <input type="checkbox" name="chkReport" />
                Report
                <input type="checkbox" name="chkWebsite" />
                Website
                <input type="checkbox" name="chkPersComm" />
                Personal Comm
                <input type="checkbox" name="chkConference" />
                Conference
                <input type="checkbox" name="chkMap" />
                Map
                <input type="checkbox" name="chkThesis" />
                Thesis 
            </span>
        </div>

        <div class="searchbox">
            <input type="search" name="q" autocomplete="off"/>
            <input class="submit-button" type="submit" value="Search" /> 
        </div> 
    </div>
}

<div id="search-results" class="search-results">

</div> 
```

**分页问题**

我现在开始尝试变得有点聪明，并且我已经包含了一个 Ajax Pager，以便在第一组搜索结果中返回分页。

![在此处输入图像描述](../Images/1ad0a99c424de2a77b4e21921352bdc8.png)

问题是，当用户选择要呈现的下一页时，我必须保留 ajax 搜索表单中的所有值，但是当我在 FooController 中的 SearchStuff 方法中进行调试时 - 它对搜索参数一无所知。谁能建议我应该做些什么来发送搜索参数？

```
<div class="pager">
    @Html.Raw(
        Ajax.Pager(new AjaxOptions
        {
            UpdateTargetId = "search-results",
            OnBegin = "beginPaging",
            OnSuccess = "successPaging",
            OnFailure = "failurePaging"
        },
                      Model.PageSize,
                      Model.PageNumber,
                      Model.TotalItemCount,

                      new { controller = "FooController", action = "SearchStuff"})
    )
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:33:41.457

在新的 AjaxOptions 中使用 HttpMethod="Get"。并使用 Request[] 更改您的控制器以获取搜索参数。

参考

[过滤器在 .NET 4.0 中迷失在 WebGrid + 分页 + 排序 + 过滤中](https://stackoverflow.com/questions/10051794/filter-is-getting-lost-in-webgrid-paging-sorting-filtering-in-net-4-0)

# css - 我们是否应该初始化样式表？

> ID：12244791
> 
> 赞同：1
> 
> 时间：2012-09-03T08:58:51.807
> 
> 标签：css

我发现设置一个非常基本的样式重置或样式表初始化，因为我更喜欢认为它会导致意外结果，因为某些浏览器默认值受到影响。这（我很愚蠢）让我跳起了欢乐的舞蹈，直到我意识到我已经通过使用重置关闭了默认设置。

我现在正在仔细挑选所有页面，以确定任何其他不利影响。

我想这在很大程度上取决于个人喜好是否使用重置，我当然可能会过度思考这是我的诅咒。不过，我想就这是否是好的做法或使一切复杂化的好方法提出意见。

如果这是一种好的做法，是否有适合应用重置的特定时间。

Eric Meyer 的文章 [重置推理](http://meyerweb.com/eric/thoughts/2007/04/18/reset-reasoning)对我来说非常有意义，因此采用了非常基本的重置。我没有使用完整的 Eric Meyer[重置](http://meyerweb.com/eric/tools/css/reset/)，这当然很可能是我的失败。我不打算在现阶段重新讨论。

但是，我想知道考虑的意见是什么，以及我是否应该在将来尝试应用它。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:22:25.577

这绝对取决于您编写网页的方式和项目的大小。大多数页面在没有重置的情况下都是“嗯，好吧”，但在所有浏览器上并不完美或一致。

为什么可以使用 CSS 重置是微不足道的——更有趣的问题**是为什么不**使用它？

如果您依赖浏览器定义的默认样式（例如，`h1, h2, h3, h4, h5, h6`渲染方式或`ul`项目符号列表默认的行为方式，或默认`margins`/`paddings`等），那么重置 CSS 可能会让您做一些额外的工作. 换句话说，重置将使所有 HTML 元素恢复到几乎“无”——只是一堆语义分组标签......

哪个**好**。

这是 HTML 应该的样子，而不是样式；但用于逻辑和语义分组。从头开始为您的元素设计样式将为您提供更多控制权，并将为您节省一些特定于浏览器的调整和痛苦。

另外，[jsFiddle](http://jsfiddle.net)做到了，所以它一定很不错！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:24:58.087

> 由于某些浏览器默认设置受到影响。

任何其他未受影响的默认设置都是错误，因为这是重置 css 的重点。

关于重置样式表的一个坏点（假设它本身没有错误）是您必须考虑使用的每个元素的样式。

重置样式表的好处在于，您只需考虑使用的每个元素。不使用一个有点像与一个你沟通不畅的同事一起工作——当他们碰巧做一些与你的工作相得益彰的事情时，它会节省时间，但无论你是在重复工作还是让一些案例落在间隙之间并被忽略不会很明显。

在实践中，这取决于两种哲学中的哪一种最适合项目：

1.  您很高兴许多样式取决于浏览器默认设置和（这种方法的优点）用户设置。您只添加必要的 CSS，并让默认大小和字体等内容取决于浏览器。

2.  您努力对每个元素都有非常精确的发言权。

这两种方法各有利弊，而第二种方法的优点最近有所增加，因为浏览器用于调整文本大小以提高可读性的机制发生了变化，这意味着更多的浏览器会调整整个页面的大小而不仅仅是文本（这是之前采用第二种方法的一个大问题——你要么让一些设置破坏你的设计，要么让你的设计破坏一些用户依赖的设置才能阅读它）。

使用第一种方法，使用重置表会破坏您所采用的哲学，为您毁掉一切。

对于第二种方法，使用重置表是开始的良好第一步。每当您发现重置表引起问题时，您真正发现的是您应该做的事情，您没有做的事情，它为您突出了这个问题。如果您在没有重置表的情况下完成第二种方法，那么您实际上已经达到了与它相同的结果，至少就使用的那些元素而言。

# c - 指针和演员表

> ID：12244794
> 
> 赞同：7
> 
> 时间：2012-09-03T08:59:00.287
> 
> 标签：c, pointers

让我们看这个示例代码：

```
#include <stdio.h>

int main(void){
    int x = 1;
    if(*(char *)&x == 1) printf("little-endian\n");
    else printf("big-endian\n");
    return 0;
} 
```

我已经多次看到这个（或类似的）指令`*(char *)&x`，现在我想完全理解它的含义！
我认为这意味着：
*1）获取 int 变量的地址
2）然后将其转换为 char 指针
3）然后将“新 char 指针”的第一个元素与数字 1 进行比较。*
对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T09:01:16.570

你是对的，但更好的列表是：

1.  取地址`x`
2.  将地址转换为指向字符的指针
3.  `char`取消引用该指针，即读取第一个`&x`
4.  将字符值与整数进行比较`1`

请注意，这是相当前卫的代码，读取值将取决于机器的字节字节序。

# c# - Asp.net MVC C# - DropDownList SelectedIndexChanged 未触发

> ID：12244796
> 
> 赞同：0
> 
> 时间：2012-09-03T08:59:05.013
> 
> 标签：c#, asp.net-mvc, events, drop-down-menu

我有一个下拉列表，该列表使用 Visual Studio 2010 中的数据源填充来自数据库的数据。所有值都是唯一的，并且我设置了一个事件以在选择新值时执行操作。当我在下拉列表中选择一个新值时，新值被选中，但事件不会触发。我在代码中放置了一个断点，以查看它是否正在执行而没有被击中。

我阅读了有关将下拉列表 AutoPostBack 设置为 true 的信息，但这似乎只是刷新页面并将列表设置回其原始选定状态（可能为什么事件没有触发？）。

我还阅读了有关启用 ViewState 的内容，因为这可能导致它无法触发，我尝试将 EnableViewState = "true" 放在 View 的顶部，但无济于事。EnableViewState 属性在下拉列表中也设置为 true。

如果有人对解决方案有任何见解，我将不胜感激？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:02:34.003

使用 Asp.Net MVC，您不需要像 Asp.Net 这样的事件和回发。

您应该使用`form`标签来处理下拉列表的值，因为它是一个经典的 HTML 页面。如果您想以异步方式处理，请使用连接到`onchange`下拉列表的 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:06:17.553

我通常发现这是由数据绑定引起的。如果 Page_Load 中的代码绑定下拉列表而不检查 Page.IsPostBack（或在处理控制事件之前管道中的其他位置），这将抑制 SelectedIndexChanged 事件。

另一种可能性是您没有在控件的 decalrative 标记中获得 OnSelectedIndexChanged="DropDownListId_SelectedIndexChanged"，或者在您没有 AutoEventWireup=true 的 @Page 指令中。

你可以发布你的代码吗？

刚刚看到标签和@iridio 的帖子。这真的是 MVC 吗？我不希望看到在 MVC 应用程序中使用 System.Web.UI.WebControls，但我不是 MVC 专家。

# php - PHP中的类继承 - 如何处理这种情况？

> ID：12244797
> 
> 赞同：-4
> 
> 时间：2012-09-03T08:59:05.780
> 
> 标签：php, inheritance

我有 2 个类，一个在*\myProject\app\code\core\Zend\Mime.php*中，另一个在*\myProject\app\code\local\Zend\Mime.php*中。

两个课程都是这样开始的：

```
class Zend_Mime {
    ... 
```

位于 \myProject\app\code\local\Zend\Mime.php 中的一个如何扩展另一个？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:06:06.597

您不能直接进行扩展，因为两个类使用相同的名称，因此存在名称冲突。但是你可以这样做来解决这个问题。像这样制作第三类`My_Zend_Mime`（或您喜欢的任何其他名称，但要确保它更独特）：

```
include 'myProject\app\code\local\Zend\Mime.php';
class My_Zend_Mime extends Zend_Mime {} 
```

然后你的`\myProject\app\code\core\Zend\Mime.php`类应该扩展`My_Zend_Mime`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:24:38.777

如果您使用命名空间：

```
namespace myProject\app\code\local\Zend\Mime
use myProject\app\code\core\Zend\Mime  
class Zend_Mime extends Mime { 
```

或`require_once`声明：

```
require_once(/myProject/app/code/core/Zend/Mime.php);
class Zend_Mime extends Mime { 
```

# r - 使用 RInside 析构函数

> ID：12244798
> 
> 赞同：2
> 
> 时间：2012-09-03T08:59:07.323
> 
> 标签：r, rcpp, rinside

一个简单的实验表明，每个线程一次只允许一个 RInside 实例。

```
#include <RInside.h>

int main() {
  RInside R1;
  R1.parseEval("cat('Hello, R1\n')");
  RInside R2;
  R2.parseEval("cat('Hello, R2\n')");
  return 0;
} 
```

程序崩溃，输出如下：

```
Hello, R1
terminate called after throwing an instance of 'std::runtime_error'
what():  can only have one RInside instance

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

然而，另一个连续创建 RInside 实例的实验的结果还不是很清楚。

```
#include <RInside.h>

int main() {
  RInside *R1 = new RInside();
  R1->parseEval("cat('Hello, R1\n')");
  delete R1;
  RInside *R2 = new RInside();
  R2->parseEval("cat('Hello, R2\n')");
  delete R2;
  return 0;
} 
```

该程序在创建 R2 的那一刻嗡嗡作响。之前的输出如下所示：

```
Hello, R1
Lost warning messages 
```

**R1 析构函数调用是否不足以进行正确的 RInside 清理？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:26:02.547

**拜托**——这一切刚刚在 rcpp-devel 邮件列表中讨论过[，这里是整个（短）线程的链接](http://thread.gmane.org/gmane.comp.lang.r.rcpp/3812)。简而言之，它*不是*RInside 析构函数，*而是 RAPI 本身*，RInside 仅通过更易于使用的 C++ 包装提供。

[A follow-up post has been sent to r-devel as well](http://thread.gmane.org/gmane.comp.lang.r.devel/31663) and in that thread Simon clearly states that because of a number of static globals in R itself, a fix is unlikely.

# hibernate - 正确使用 JPA 标准 API、谓词和 CriteriaQuery 的 where 方法

> ID：12244799
> 
> 赞同：9
> 
> 时间：2012-09-03T08:59:07.767
> 
> 标签：hibernate, jpa, jpa-2.0, criteria-api

我正在尝试测试 JPA 存储库。这是我的客户/测试代码：

```
@Test
    public void testFindBoitesByMultiFieldWithIdentifiantSet() {
        BoiteDataOnDemand dod = new BoiteDataOnDemand();
        Boite boite = dod.getSpecificBoite(0);
        boite.setIdentifiant("theIdentifiant");
        boiteRepository.save(boite);
        assertEquals(10, Boite.countBoites());
        BoiteQueryInfo boiteQueryInfo = new BoiteQueryInfo();
        boiteQueryInfo.setIdentifiant("theIdentifiant");
        List<Boite> boites = boiteRepository.findBoitesByMultiField(boiteQueryInfo, 1, 5, "identifiant", "desc");
        assertEquals(1, boites.size());
    } 
```

这是存储库方法：

```
@Override
    public List<Boite> findBoitesByMultiField(BoiteQueryInfo boiteQueryInfo, Integer firstResult_, Integer maxResults_, String sort_, String order_) {
        log.debug("findBoitesByMultiField");

        final String identifiant = boiteQueryInfo.getIdentifiant();
        final Date dateOuvertureFrom = boiteQueryInfo.getDateOuvertureFrom();

        CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
        CriteriaQuery<Boite> c = criteriaBuilder.createQuery(Boite.class);
        Root<Boite> boite = c.from(Boite.class);
        List<Predicate> criteria = new ArrayList<Predicate>();
            ...
        if (identifiant != null && !identifiant.trim().equals("")) {
            ParameterExpression<String> parameter = criteriaBuilder.parameter(String.class, "identifiant");
            Predicate condition = criteriaBuilder.like(boite.<String> get("identifiant"), parameter);
            criteria.add(condition);
        }

        if (dateOuvertureFrom != null && dateOuvertureTo != null) {
            ParameterExpression<Date> parameterDateOuvertureFrom = criteriaBuilder.parameter(Date.class, "dateOuvertureFrom");
            ParameterExpression<Date> parameterDateOuvertureTo = criteriaBuilder.parameter(Date.class, "dateOuvertureTo");
            Predicate condition = criteriaBuilder.between(boite.<Date> get("dateOuverture"), parameterDateOuvertureFrom, parameterDateOuvertureTo);
            criteria.add(condition);
        } else if (dateOuvertureFrom != null) {
            ParameterExpression<Date> parameter = criteriaBuilder.parameter(Date.class, "dateOuvertureFrom");
            Predicate condition = criteriaBuilder.greaterThanOrEqualTo(boite.<Date> get("dateOuverture"), parameter);
            criteria.add(condition);
        } else if (dateOuvertureTo != null) {
            ParameterExpression<Date> parameter = criteriaBuilder.parameter(Date.class, "dateOuvertureTo");
            Predicate condition = criteriaBuilder.lessThanOrEqualTo(boite.<Date> get("dateOuverture"), parameter);
            criteria.add(condition);
        }

            ...    
        if (order.equalsIgnoreCase("desc")) {
            c.orderBy(criteriaBuilder.desc(boite.get(sort)));
        } else {
            c.orderBy(criteriaBuilder.asc(boite.get(sort)));
        }

        for (Predicate predicate : criteria) {
            c.where(criteriaBuilder.and(predicate));
        }

        TypedQuery<Boite> q = em.createQuery(c);

        if (identifiant != null && !identifiant.trim().equals("")) {
            q.setParameter("identifiant", "%" + identifiant + "%");
        }

        if (dateOuvertureFrom != null && dateOuvertureTo != null) {
            q.setParameter("dateOuvertureFrom", dateOuvertureFrom);
            q.setParameter("dateOuvertureTo", dateOuvertureTo);
        } else if (dateOuvertureFrom != null) {
            q.setParameter("dateOuvertureFrom", dateOuvertureFrom);
        } else if (dateOuvertureTo != null) {
            q.setParameter("dateOuvertureTo", dateOuvertureTo);
        }

            ...    
        return q.setFirstResult(firstResult).setMaxResults(maxResults).getResultList();
    } 
```

但是，测试总是在**`assertEquals(1, boites.size());`**指示没有返回结果时失败，即 ( `java.lang.AssertionError: expected:<1> but was:<0>`)。

我强烈怀疑这里有问题：

```
for (Predicate predicate : criteria) {
            c.where(criteriaBuilder.and(predicate));
        } 
```

但我不确定如何“和”标准。

任何人都可以提供建议吗？

PS仅供参考，`BoiteDataOnDemand`将随机10行插入`boite`表中。

编辑：对代码进行了编辑以使其更短。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-03T09:33:51.493

从您在帖子最后部分的提示开始，我同意您为该`where`子句添加谓词的方式不正确。

我看到两种处理方式：

**第一种方式**

使用谓词数组

```
List<Predicate> predicates = new ArrayList<Predicate>();
for (Key key : keys) {
    predicates.add(criteriaBuilder.equal(root.get(key), value));
}
c.where(criteriaBuilder.and(predicates.toArray(new Predicate[] {}))); 
```

**第二种方式**

在循环中修改相同的谓词

```
Predicate predicate = criteriaBuilder.conjunction();
for (Key key : keys) {
    Predicate newPredicate = criteriaBuilder.equal(root.get(key), value);
    predicate = criteriaBuilder.and(predicate, newPredicate);
}
c.where(predicate); 
```

* * *

已编辑

再次查看您的代码示例后，我发现您已经以正确的方式创建了一个`Predicate`S 列表：您已调用它`criteria`。您只是以错误的方式使用它们。请参阅我的第一个示例的最后一行。

* * *

编辑 2

为了查看问题是否是由使用 产生的`PredicateExpressionS`，在您的情况下不是特别需要的，请尝试暂时删除它们。修改您的第一个条件

```
if (identifiant != null && !identifiant.trim().equals("")) {
    ParameterExpression<String> parameter = criteriaBuilder.parameter(String.class, "identifiant");
    Predicate condition = criteriaBuilder.like(boite.<String> get("identifiant"), parameter);
    criteria.add(condition);
} 
```

至

```
if (identifiant != null && !identifiant.trim().equals("")) {
    Predicate condition = criteriaBuilder.like(boite.get("identifiant"), "%" + identifiant + "%");
    criteria.add(condition);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-20T19:46:08.463

对我有用的完整解决方案如下：

```
 CriteriaBuilder builder = session.getCriteriaBuilder();
        CriteriaQuery<Object[]> criteriaQuery = builder.createQuery(Object[].class);
        Root<Eje> ejeRoot = criteriaQuery.from(Eje.class);
        Root<FactorCritico> factorRoot = criteriaQuery.from(FactorCritico.class);

        int factorParam = 2;

        criteriaQuery.multiselect(ejeRoot,factorRoot);

        List<Predicate> predicates = new ArrayList<>();

        Predicate ejeJoinFactorCritico = builder.equal(ejeRoot.get("id"), factorRoot.get("eje"));
        predicates.add(ejeJoinFactorCritico);   

        if (factorParam> 0){
            Predicate factorFilter = builder.equal(factorRoot.get("id"), factorParam);
            predicates.add(factorFilter);   
        }

        criteriaQuery.where(builder.and(predicates.toArray(new Predicate[] {})));

        Query<Object[]> query = session.createQuery(criteriaQuery);
        List<Object[]> resultList = query.getResultList();

        for(Object[] objects: resultList){
            Eje eje = (Eje) objects[0];
            System.out.println("eje: "+eje.getName());

            FactorCritico factor= (FactorCritico) objects[1];
            System.out.println("--> factor: "+factor.getName()+ ", eje: "+ factor.getEje().getName());

            //System.out.println("eje, factor size = "+eje.getFactorCriticos());
        } 
```

# asp.net - 如何使用共享托管服务器在电子邮件中附加文件？

> ID：12244805
> 
> 赞同：0
> 
> 时间：2012-09-03T08:59:31.637
> 
> 标签：asp.net, email-attachments

我想动态附加文件并通过邮件发送。所以有人可以让我知道如何发送附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:06:38.587

您可以尝试使用此代码

```
 MailMessage mail = new MailMessage();
                SmtpClient SmtpServer = new SmtpClient("...");/:Adjust your adress
                mail.From = new MailAddress("your_email_address@gmail.com");
                mail.To.Add("to_address");
                mail.Subject = "Test Mail";
                mail.Body = "mail with attachment";

                System.Net.Mail.Attachment attachment;
                attachment = new System.Net.Mail.Attachment("your attachment file");
                mail.Attachments.Add(attachment);

                SmtpServer.Port = ..; //Replace with your port number
                SmtpServer.Credentials = new System.Net.NetworkCredential("username", "password");
                SmtpServer.EnableSsl = true;

                SmtpServer.Send(mail); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:07:19.290

您可以使用此代码。

```
using System.Net.Mail;

private void SendEmail()
{
    MailMessage message = new MailMessage();
    message.From = new MailAddress("YourEmailAddress@domain.com");
    message.To.Add(new MailAddress("Recipient@domain.com"));
    message.Subject = "Subject";
    message.Body = "Email Message Body";

    // Add attachment
    string attachmentPath = Server.MapPath("~/AttachmentPath.jpg");
    message.Attachments.Add(new Attachment(attachmentPath));

    // Connect to GoDaddy SMTP
    SmtpClient smtp = new SmtpClient("relay-hosting.secureserver.net");
    smtp.Credentials = new System.Net.NetworkCredential("Username","Password");
    smtp.Port = 25;
    smtp.EnableSsl = false;

    // Send the message
    smtp.Send(message);
} 
```

# performance - 调度最优记录列表的算法

> ID：12244807
> 
> 赞同：0
> 
> 时间：2012-09-03T08:59:36.397
> 
> 标签：performance, algorithm, language-agnostic, scheduling

我正在寻找一种算法来为给定以下项目列表的记录设备生成最佳记录列表：

[图片链接在这里 http://img692.imageshack.us/img692/7952/recordlist.png](http://img692.imageshack.us/img692/7952/recordlist.png)

目前的限制是：

*   不得存在重叠。
*   在计算速度和解决的冲突之间妥协。

将来可能会添加更多选项：

*   用户可以拥有多个录音设备。
*   用户可以为他/她喜欢的节目建立录制优先级（1 最高 - 3 最低）。

上下文如下：

*   项目列表最长为 1 周。（当前时间 - 当前时间 + 1 周）
*   平均项目列表大小为 100 个项目，最大为 300 个。

另外我想知道是否有一种方法可以生成最优化的记录列表（发送到记录的程序的最高百分比），以防我们无法解决 100% 的冲突，而不管处理时间如何。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:11:30.053

```
class Recording
{
    public int ProgrammeId { get; set; }
    public string ProgrammeTitle { get; set; }
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }
    public int ChannelId { get; set; }
    public string ChannelName { get; set; }
    public int Weight { get { return 1; } } // Constant weight
} 
```

一种贪婪的方法是按递增的顺序考虑程序`start_time`。如果某个程序与之前选择的程序兼容，请选择它：

```
public static IEnumerable<Recording> GreedySelection(IList<Recording> data)
{
    data = data
        .OrderBy(r => r.StartTime)
        .ThenBy(r => r.EndTime)
        .ToList();

    DateTime? lastEnd = null;
    foreach (var rec in data)
    {
        if (lastEnd == null || rec.StartTime >= lastEnd.Value)
        {
            yield return rec;
            lastEnd = rec.EndTime;
        }
    }
} 
```

要获得最佳加权解决方案，您可以使用动态规划：

```
public static IEnumerable<Recording> WeightedSelection(IList<Recording> data)
{
    data = data
        .OrderBy(r => r.EndTime)
        .ThenBy(r => r.StartTime)
        .ToList();

    int count = data.Count;
    var lastCompatible = new int?[count];

    // Compute the closest program before in time, that is compatible.
    // This nested loop might be optimizable in some way.
    for (int i = 0; i < count; i++)
    {
        for (int j = i - 1; j >= 0; j--)
        {
            if (data[j].EndTime <= data[i].StartTime)
            {
                lastCompatible[i] = j;
                break; // inner loop
            }
        }
    }

    // Dynamic programming to calculate the best path
    var optimalWeight = new int[count];
    var cameFrom = new int?[count];
    for (int i = 0; i < count; i++)
    {
        int weightWithItem = data[i].Weight;
        if (lastCompatible[i] != null)
        {
            weightWithItem += optimalWeight[lastCompatible[i].Value];
        }

        int weightWithoutItem = 0;
        if (i > 0) weightWithoutItem = optimalWeight[i-1];

        if (weightWithItem < weightWithoutItem)
        {
            optimalWeight[i] = weightWithoutItem;
            cameFrom[i] = i - 1;
        }
        else
        {
            optimalWeight[i] = weightWithItem;
            cameFrom[i] = lastCompatible[i];
        }
    }

    // This will give the programs in reverse order.
    for (int? i = count - 1; i != null; i = cameFrom[i.Value])
    {
        yield return data[i.Value];
    }
} 
```

并不是说这个版本包含权重，并试图最大化权重总和。如果所有权重都设置为一 (1)，则两种算法的结果大小将相同，因为大小等于权重。

贪心的结果：

```
ProgrammeTitle           StartTime         EndTime
Star Trek                2012-09-03 02:05  2012-09-03 03:05
Everybody Loves Raymond  2012-09-03 06:00  2012-09-03 07:00
CSI                      2012-09-03 07:00  2012-09-03 08:00
Mythbusters              2012-09-03 08:00  2012-09-03 09:00
CSI                      2012-09-03 10:00  2012-09-03 11:00
Mythbusters              2012-09-03 11:00  2012-09-03 12:00
Star Trek                2012-09-04 02:05  2012-09-04 03:05
Everybody Loves Raymond  2012-09-04 06:00  2012-09-04 07:00
CSI                      2012-09-04 07:00  2012-09-04 08:00
Mythbusters              2012-09-04 08:00  2012-09-04 09:00
CSI                      2012-09-04 10:00  2012-09-04 11:00
Mythbusters              2012-09-04 11:00  2012-09-04 12:00 
```

动态结果（排序）：

```
ProgrammeTitle           StartTime         EndTime
Everybody Loves Raymond  2012-09-03 03:00  2012-09-03 04:00
Everybody Loves Raymond  2012-09-03 06:00  2012-09-03 07:00
CSI                      2012-09-03 07:00  2012-09-03 08:00
CSI                      2012-09-03 08:30  2012-09-03 09:30
CSI                      2012-09-03 10:00  2012-09-03 11:00
Star Trek                2012-09-03 11:05  2012-09-03 12:05
Everybody Loves Raymond  2012-09-04 03:00  2012-09-04 04:00
Everybody Loves Raymond  2012-09-04 06:00  2012-09-04 07:00
CSI                      2012-09-04 07:00  2012-09-04 08:00
CSI                      2012-09-04 08:30  2012-09-04 09:30
CSI                      2012-09-04 10:00  2012-09-04 11:00
Star Trek                2012-09-04 11:05  2012-09-04 12:05 
```

算法基于此文档：

*   [cs.princeton.edu/courses/.../06dynamic-programming.pdf](http://www.cs.princeton.edu/courses/archive/spr05/cos423/lectures/06dynamic-programming.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:47:47.820

使用[首次拟合递减](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html#d0e4620)和[禁忌搜索](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html#d0e5078)。

此用例与护士排班非常相似（[请参阅此视频](http://www.youtube.com/watch?v=7nPagqJK3bs)）：您不是将轮班分配给护士，而是将项目分配给记录器，其中记录器是 [recorder1, notRecorded] 的列表。

# cocos2d-iphone - 在更新循环中翻转 Sprite

> ID：12244809
> 
> 赞同：0
> 
> 时间：2012-09-03T08:59:45.943
> 
> 标签：cocos2d-iphone

我有一个想要在屏幕上弹跳的小鸟精灵。所以当它到达屏幕的边界时，这只鸟会来回移动。这是有效的，但我不能每次都翻转精灵。它第一次向右移动并撞到屏幕的右边缘时起作用，当它返回并撞到左侧时，精灵不会翻转。这就是我想要做的

```
- (void)update:(ccTime)dt
{

    if (bird_x > 1550 || bird_x < 0)
    {
        flip *= -1;
        self.bird.flipX = YES;
    }

    bird_x = bird_x + 10 * flip;
    _bird.position = ccp(bird_x, 1000);
} 
```

我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:20:11.460

这是因为翻转只是一个开/关状态。将您的`self.bird.flipX = YES;`线路替换为并重`self.bird.flipX = !self.bird.flipX;`试。

# java - 字符串逼近（从字典中获取最近的匹配字符串）

> ID：12244810
> 
> 赞同：4
> 
> 时间：2012-09-03T08:59:48.580
> 
> 标签：java, string, string-matching, approximation

是否有任何字符串匹配代码或算法可以为我们提供字典中近似匹配的字符串（包含预定义的字符串集）？

例如：如果字典中有 10 个字符串（字符串集），如果用户输入了一些字符串，那么算法应该告诉您字典中的匹配字符串。如果我得到具有匹配值（或百分比）的匹配字符串，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:55:53.437

我认为最好使用 lucene 库，它有一个名为`org.apache.lucene.search.spell`你可以轻松使用的包。它提供了 3 种算法 **NGramDistance、LevensteinDistance、JaroWinklerDistance**。[尝试这个](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/spell/SpellChecker.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:05:10.890

您可以计算您的字符串和字典中的字符串之间的[Levenshtein 距离，以找到最接近的匹配项。](http://en.wikipedia.org/wiki/Levenshtein_distance)这可能不是拼写检查的最佳选择，因为它不利于交换字母或语音相似的单词。例如，问题比 kwizchum 更接近于休息。

有关更多示例，您可以阅读[http://en.wikipedia.org/wiki/Approximate_string_matching](http://en.wikipedia.org/wiki/Approximate_string_matching)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-09T09:28:53.230

我只是想补充一点，从 3.0 版开始，StringUtils 也有[一个方便的 Levenshtein Distance 方法](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#getLevenshteinDistance%28java.lang.CharSequence,%20java.lang.CharSequence%29)

```
public static int getLevenshteinDistance(CharSequence s,
                     CharSequence t) 
```

之后，它就像遍历集合并记住最接近的匹配一样简单：

```
public static Object findClosestMatch(Collection<?> collection, Object target) {
    int distance = Integer.MAX_VALUE;
    Object closest = null;
    for (Object compareObject : collection) {
        int currentDistance = StringUtils.getLevenshteinDistance(compareObject.toString(), target.toString());
        if(currentDistance < distance) {
            distance = currentDistance;
            closest = compareObject;
        }
    }
    return closest;
} 
```

请注意，上面的方法确实需要集合是空安全的，并且 toString() 需要被合理地实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T09:10:34.780

你可以试试[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance) techinque。

简单的想法你有四个基本操作：

*   插入（地狱 -> 地狱**o**）
*   替换（nice -> **r** ice）
*   删除（保龄球**-** > 保龄球）
*   交换（兄弟 ->**兄弟**）

你的算法应该计算你的单词和字典中每个单词之间的距离。最小的距离意味着这个词与给定的输入匹配得更准确。

# uinavigationcontroller - 防止UITabBar在推送时隐藏

> ID：12244816
> 
> 赞同：0
> 
> 时间：2012-09-03T08:59:56.647
> 
> 标签：uinavigationcontroller, uitabbarcontroller, storyboard, uitabbar, pushviewcontroller

首先让我介绍一下我的应用场景。**UINavigationController** {relationship} **UIViewControllerMain** {push} **UITabController** {push} **UIViewControllerOne**。这里的问题是标签栏隐藏在**UIViewControllerOne**中。我怎样才能让它可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:08:40.457

```
self.tabBarController.tabBar.hidden = NO; 
```

# iframe - 将网页嵌入到另一个网站（自定义滚动条）

> ID：12244818
> 
> 赞同：0
> 
> 时间：2012-09-03T08:59:57.250
> 
> 标签：iframe, scrollbar, embed, tinyscrollbar

这可能有点奇怪，但这里有：

我正在尝试将 tumblr 博客嵌入网站，以便他们可以更新自己的日程安排，并且他们希望使用实际页面本身。最初我们使用了一个很好的 iframe，但问题是我们使用的是自定义滚动条 (http://baijs.nl/tinyscrollbar/)。

iframe 会弹出它自己的常规滚动条来滚动嵌入的网站。自定义滚动条只是将 iframe 本身向上和向下移动一点，而不是里面的内容。（对象/嵌入标签似乎也是如此）

有没有更好的方法可以满足我们想要做的事情，或者是否有一些我不知道的脚本来完成所有这些工作？有问题的网页在这里 - [http://www.brettloudermilk.com/temp/schedule.html](http://www.brettloudermilk.com/temp/schedule.html)

我会发布一些代码，但不确定这里到底有什么帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:37:23.710

iframe 页面和网站是否在同一个域中？如果是这样，您可以让 iframe 文档获取其当前高度并相应地设置 iframe 的高度。之后，您将需要更新滚动条。

```
var $scroller = $( "#youscrollbarid" ).tinyscrollbar();

$('#youriframesid').load(function() {
    this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
    $scroller.tinyscrollbar_update();
}); 
```

# scala - 流程组成和异常

> ID：12244822
> 
> 赞同：6
> 
> 时间：2012-09-03T09:00:17.667
> 
> 标签：scala

如何从与 #&& 等结合的外部进程中捕获异常？

```
scala> import scala.sys.process._     
scala> try{ "throw " ! }catch{ case e: Exception => }
res1: AnyVal = ()
scala> try{ "throw " #&& "ls" ! }catch{ case e: Exception => }
Exception in thread "Thread-10" java.io.IOException: Cannot run program "throw": error=2, No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:29:14.233

你已经这样做了。尝试

```
try {
 val x = "throw" #&& "ls" !
} catch {
 case x => println("caught")
} 
```

只是将`!`异常记录到控制台，当你在 REPL 中看到它时有点混乱，但它不会崩溃。

# android - 在片段中托管小部件

> ID：12244825
> 
> 赞同：0
> 
> 时间：2012-09-03T09:00:27.880
> 
> 标签：android

可能吗？支持的？我想制作一个在片段中托管小部件的应用程序，我知道如何在活动中执行此操作，但不知道它是否适用于片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T09:49:58.290

我确定你的意思是 AppWidgets，所以看看这个 [https://github.com/DagW/FragmentHomescreen](https://github.com/DagW/FragmentHomescreen)

它包含一个完整的示例项目，用于将小部件添加到 viewpager 中的片段。

它还包含以编程方式添加 appwidgets 的代码。

# git - /* 和 / 与 .gitignore 上路径的最末端有什么区别？

> ID：12244827
> 
> 赞同：1
> 
> 时间：2012-09-03T09:00:33.600
> 
> 标签：git, gitignore

在一些 .gitignore 文件中，我们可能会看到：

```
somedirectory/* 
```

或者

```
somedirectory/ 
```

这是否意味着第一个将递归匹配，而第二个将仅匹配该目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:19:17.623

后者匹配目录，但忽略目录意味着忽略它的所有内容。所以它是递归的。

对于前者，* 将只匹配直接条目。但是由于它也会匹配目录并且忽略目录意味着忽略它的所有内容，它也是递归的。

Git 不跟踪目录，所有内容都被忽略的目录和被忽略一样好。

因此没有实际的区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T09:55:01.337

它们都将递归匹配。但是您不应该使用`somedirectory/*`模式，因为它与`somedirectory/`自身不匹配。因此，如果您有一个缓存文件夹`cache/`并忽略模式`cache/*`，那么`git clean -fd`将删除`cache/`其中包含所有文件的目录。

注意 IDE 的模式 :) 忽略模式`.idea/*`会导致清除项目的所有设置。

# asynchronous - Goliath 或 EventMachine 如何切换上下文？

> ID：12244829
> 
> 赞同：4
> 
> 时间：2012-09-03T09:00:42.827
> 
> 标签：asynchronous, eventmachine, goliath

假设我有一个 I/O 受限的操作。我确实有回调（或 em 同步）

1.  EM 如何切换到处理下一个请求保持前一个等待回调？

2.  它如何使 Thread.current 变量保持隔离？

3.  如何模拟长时间运行的作业？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T02:43:19.333

**1\. EM如何切换到处理下一个请求保持前一个等待回调？**

在任何反应器模式中，都有一个执行线程。意思是，一次只能执行一件事。如果反应器正在处理该主线程上的请求，则没有其他请求可以干预（协作调度）。现在，请求可以自愿“放弃”控制权（在 EM 中，我们有`EM.next_tick { # block }`），或者通过调度将来的操作：计时器（`EM.add_timer { #block }`），或者通过进行另一个 IO 操作！

例如，如果您使用的是 EM-Synchrony，那么当您发出 HTTP 请求（通过 em-http）时，当请求被分派时，光纤将暂停，并在后台为您创建回调。请求完成后，EventMachine 通过内部回调调用回调......并且控制权返回给您的请求。如需更深入的了解： [http ://www.igvita.com/2010/03/22/untangling-evented-code-with-ruby-fibers/](http://www.igvita.com/2010/03/22/untangling-evented-code-with-ruby-fibers/)

**2\. 它是如何保持 Thread.current 变量隔离的？**

没有魔法。在 Ruby 中，我们有线程局部变量：`Thread.current[:foo] = bar`. 同样，Fiber 具有相同的语义，尽管有时让人们措手不及的是使用了相同的机制.. aka `Thread.current[:foo] = bar`。

见这里：[http ://devblog.avdi.org/2012/02/02/ruby-thread-locals-are-also-fiber-local/](http://devblog.avdi.org/2012/02/02/ruby-thread-locals-are-also-fiber-local/)

**3\. 如何模拟长时间运行的作业？**

最佳方法：将它们移出反应堆。*任何*反应器系统都是如此。

a) 创建一个作业队列并将其推送到另一个进程 b) EM 确实提供`EM.defer`了，它产生了另一个线程。

尽可能选择（a）而不是（b）..你以后会感谢自己的。

# php - 如何显示总评论数

> ID：12244840
> 
> 赞同：0
> 
> 时间：2012-09-03T09:01:26.840
> 
> 标签：php, database, codeigniter

Whatsup 代码点火器！我想显示我正在使用 codeigniter 构建的博客的总评论。在我的控制器中，我有：

```
 function index() {

          $data['query'] = $this->blog_model->get_all_entries();
          $this->load->view('blog/index',$data);
   } 
```

函数 index() 获取所有帖子。我有

```
 public function post($id) {
          $data['query'] = $this->blog_model->get_post($id);
          $data['comments'] = $this->blog_model->get_post_comment($id);
          $data['post_id'] = $id;
          $data['total_comments'] = $this->blog_model->total_comments($id);
          $this->load->view('blog/index',$data,TRUE);

          $this->load->helper('form');
          $this->load->library(array('form_validation','session'));
          //validation rules for post function

          $this->form_validation->set_rules('commentor','Name','required');
          $this->form_validation->set_rules('email','Your email','required|valid_email');
          $this->form_validation->set_rules('comment','Comment','required');

          if($this->blog_model->get_post($id))
          {
                 foreach($this->blog_model->get_post($id) as $row) 
                 {
                        //set page title
                        $data['title'] = $row->entry_name;
                 }
                 if($this->form_validation->run() == FALSE)
                 {
                        //if validation runs FALSE
                        $this->load->view('blog/post',$data);
                 }
                 else
                 {
                        //if valid
                        $name = $this->input->post('commentor');
                        $email = strtolower($this->input->post('email'));
                        $comment = $this->input->post('comment');
                        $post_id = $id;

                        $this->blog_model->add_new_comment($post_id,$name,$email,$comment);
                        $this->session->set_flashdata('message', '1 new comment added!');
                        redirect('blog/post/'.$id);
                  }
           }
           else
                  show_404();
   } 
```

基本上， post($id) 获取带有 id 的帖子（单个帖子）并显示评论。我可以在单个帖子中打印总评论数。但是我如何在列出所有帖子的 index() 函数中打印总评论数。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:16:05.270

尝试在模型中做这样的事情

```
public function fetch_all_comment()
{
      $query = $this->db->get('comments');
      return $query->result();
} 
```

在控制器中

```
$data['all_comments'] = $this->model_name->fetch_all_comment();
 $this->load->view('viewname',$data); 
```

在视图中

为此，您必须在视图中调用模型。例如，如果您想显示帖子名称。

在视图中加载模型

```
 foreach ($all_comments as $row)
        {
            echo $row->post;
          echo $total_no_post = $this->model_name->fetch_total_no_of_comment_in_post($row->postid);
        } 
```

统计此函数中的评论数量**fetch_total_no_of_comment_in_post**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:52:40.377

使用此活动记录

```
$this->db->select("post_id , count(comment) as total_comments");    
$this->db->group_by('post_id');
$query = $this->db->get('comments'); 
```

这会生成这个 sql 查询

```
SELECT 
     post_id,
     count(comment) as total_comments
FROM comments
GROUP BY post_id 
```

意味着这会选择帖子，每个评论的帖子计数并按帖子分开。为了理解这里是表结构

```
Comments
id    count(comment)    post_id 
```

现在查询将首先获取所有评论，然后它将使用 group by 来分隔帖子，为您提供每个帖子的总评论。

# .htaccess - 301 重定向所有不存在的链接

> ID：12244842
> 
> 赞同：0
> 
> 时间：2012-09-03T09:01:30.547
> 
> 标签：.htaccess, redirect, redirecttoaction

我浏览了其他帖子，但由于我不是 .htaccess 向导，所以我不太清楚如何更改代码以满足我的需要。

基本上我有一个控股页面。我正在构建的网站的页面，只是希望将任何不存在的链接重定向回保留页面。

我想它是这样的？

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.example\.co\.uk$ [NC]
#if not root
RewriteCond %{REQUEST_URI} !^/?$ [NC]
#redirect
RewriteRule ^(.*)$ http://www.example.co.uk/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:15:08.867

您的代码将创建一个无限循环（您正在重写相同的 url），而是尝试这个（并确保`holdingpage.php`确实存在，或者您得到一个无限循环）：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.example\.co\.uk$ [NC]
#If the requested file does not exists
RewriteCond %{REQUEST_FILENAME} !-f
#Redirect to the holding page
RewriteRule . http://www.example.co.uk/holdingpage.php [L,R=301] 
```

# memory-management - kmem_cache_create 分配了多少内存？

> ID：12244843
> 
> 赞同：3
> 
> 时间：2012-09-03T09:01:37.553
> 
> 标签：memory-management, linux-kernel, linux-device-driver

我是驱动程序的新手，并且卡在内存管理中。我浏览了 kmem_cache_create 文档，但没有找到以下答案来解决我的疑问。

1.  kmem_cache_create 分配了多少
2.  例如，如果它分配了 x 个字节，那么如果分配了 x 个字节并且驱动程序调用 kmem_alloc，将会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:08:51.283

最初，它分配您传入参数（大小）的内存。而后来 kmem_cache_alloc() 出去它会自动分配更多的内存。

# java - 不同电脑上的jbutton文本颜色问题

> ID：12244846
> 
> 赞同：1
> 
> 时间：2012-09-03T09:01:40.883
> 
> 标签：java, jbutton

我用可以禁用的按钮制作了一个 GUI。如果按钮被禁用，则文本颜色将变为灰色。在我的电脑上一切正常，但我在不同的电脑上尝试过（两者都有 win 7。另一台电脑（发生错误的地方）有触摸屏，不知道这是否会导致问题，在我的电脑上我有 java 6在问题计算机 java 7) 上，文本颜色保持白色..！我不知道该怎么做。这里有一些代码，也许它有帮助（覆盖 setEnabled-method）：

```
@Override
public void setEnabled(boolean b)
{
    super.setEnabled(b);
    if(!this.isEnabled()){
        String text = "";
        if(!this.getText().contains("<html>")){
            text = "<html><font color=\"#797C88\">" + this.getText() + "</font></html>";
        }
        else{
            text = this.getText().replaceAll("#[a-fA-F0-9]{6}", "#797C88");
        }

        this.setText(text);
    }
    else{
        String text = "";
        if(!this.getText().contains("<html>")){
            text = "<html><font color=\"#FFFFFF\">" + this.getText() + "</font></html>";
        }
        else{
            text = this.getText().replaceAll("#[a-fA-F0-9]{6}", "#FFFFFF");
        }

        this.setText(text);
    }
} 
```

这是自定义的外观和感觉（所有图像在另一台电脑上运行良好，所以我认为外观和感觉应该没有错误......）：

```
<style id="button">
    <!-- Shift the text one pixel when pressed -->
    <property key="Button.textShiftOffset" type="integer" value="2" />
    <state>
        <imagePainter method="buttonBackground" path="images/button_normal.png" sourceInsets="10 10 10 10" />
        <font name="Dialog" size="12" />
    </state>
    <state value="PRESSED">
        <imagePainter method="buttonBackground" path="images/button_normal_pressed.png" sourceInsets="10 10 10 10" />
    </state>
</style>
<bind style="button" type="region" key="Button" /> 
```

正如我所说，在我的电脑上这段代码工作正常。另一方面不是。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:46:45.623

根据[这个 Bugreport](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4783068)，因为带有 HTML 文本的 Java 7 组件在禁用时会使文本变灰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:26:51.770

而不是使用代码更改字体颜色：

```
text = "<html><font color=\"#797C88\">" + this.getText() + "</font></html>"; 
```

和

```
text = this.getText().replaceAll("#[a-fA-F0-9]{6}", "#797C88"); 
```

你可能应该使用：

```
this.setForeground(Color.GRAY); 
```

并将文本更改为白色：

```
this.setForeground(Color.WHITE); 
```

# string - excel使用vba为每个类别设置id

> ID：12244850
> 
> 赞同：0
> 
> 时间：2012-09-03T09:02:01.973
> 
> 标签：string, excel, vba

我有这么多行的excel文件。它的文件包含产品 ID 列和产品名称列，如下所示

![在此处输入图像描述](../Images/0ac5dd8cdaa4d367b34e3a676466f05b.png)

我想使用 vba（类似于集群）按名称将产品 ID 添加到这些产品中。结果应该是这样的：

![在此处输入图像描述](../Images/e747ae63ddef9c1b34140ef9970dffcd.png)

注意我原来的excel文件是第一张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:02:43.327

您想使用 VBA 有什么特别的原因吗？这可以使用参考表和 vlookup 相对简单地完成。

在工作簿中创建一个表，其中将列出产品名称和相应的产品 ID。

```
 Product Name    Product ID
        x              1
        y              2
        j              3 
```

接下来，在单元格 A2 中输入 VLOOKUP 公式

```
 =VLOOKUP(B2, $G$1:$H$5, 2, 0) 
```

将 $G$1:$H$ 替换为您刚刚创建的引用表的位置。这将在表中找到产品名称并返回相应的 ID。然后，您可以将公式复制到 38000 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:51:21.690

如果您可以假设产品名称已排序，则在 A2 中输入值`1`，在 A3 中`=IF(B2=B3, A2, A2 + 1)`并向下拖动。

# javascript - 使用 window.print() 打印输出到不同的打印机

> ID：12244859
> 
> 赞同：1
> 
> 时间：2012-09-03T09:02:55.657
> 
> 标签：javascript, html, css, printing

我有两个打印按钮。

1) 打印到“厨房” 2) 打印到“酒吧”

有数据的网页是单页。

我怎样才能告诉打印命令采取

1) 当用户选择打印到“厨房”和

2）当用户选择“打印到栏”时，将打印机放在栏中。

需要打印的数据会有所不同。例如

对于厨房，我想包括第一个 html 表。对于酒吧，我想包括第二个 html 表。

希望这是有道理的。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:06:30.453

网页无法选择要使用的打印机。但是，您可以在单击任一按钮以获得特定样式时发生事件。

就像，当您单击“厨房”按钮时，您`<body>`会在 CSS 中添加一个厨房类，这意味着它`<table>`是可见的。但是，如果您单击“酒吧”按钮，它会删除厨房类并添加一个酒吧类，`<body>`而`<table>`不是可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:05:04.727

根据规范，你不能。允许您打印的对话框完全由浏览器控制。您可以根据单击的按钮自定义需要打印的内容，但选择打印机必须由用户完成。

# perl - Perl 执行命令，捕获并显示输出

> ID：12244863
> 
> 赞同：4
> 
> 时间：2012-09-03T09:03:06.390
> 
> 标签：perl, background-process

我需要从我的 Perl 脚本中执行一个命令，这需要一段时间（1-2 小时）。我希望能够看到命令的输出，以便我的脚本可以检查一切是否正常，但由于需要很长时间，我希望用户在运行时也能看到命令输出。

我试过的：

*   `backticks`- 只能在命令完成时获得输出
*   `system`- 只能在命令完成时获得输出
*   `open`- 几乎完美 - 但命令输出是缓冲的，这意味着用户很长时间看不到更新。互联网上充满了设置建议，`$| = 1`但显然这只影响输入缓冲并且不起作用
*   管道到`tee`- 与 - 'tee' 类似的结果`open`似乎稍后打印
*   重定向输出并使用`Proc::Background`和`File::Tail`- 几乎再次完美，但想不出一种优雅的方式来停止打印循环

很想有一个建议！

* * *

编辑：我接受了 Barmars 的回答。我相信它有效，因为 Expect.pm 使用伪终端。只是对于其他在未来查看这个问题的人来说，这就是我实现它的方式：

```
my $process = Expect->spawn($command, @params) or die "Cannot spawn $command: $!\n";

while ($process->expect(undef))
{
  print $process->before();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:14:42.877

使用`Expect.pm`应该禁用命令中的输出缓冲。

# java - 需要修复android标签

> ID：12244869
> 
> 赞同：0
> 
> 时间：2012-09-03T09:03:29.723
> 
> 标签：java, android

我正在android中制作标签。目前这就是我的标签的工作方式。当我单击任何选项卡时，它会将我带到适当的选项卡视图，这很好。但是可以说，当我单击`Profile`选项卡时，在此`profile`视图中会有一个按钮`Add New`。当我单击`Add New`按钮时，它会将我带到它的视图，但**它也会从视图中删除我不想要的选项卡。**那么，即使用户单击任何视图内的任何链接或按钮，我如何才能使选项卡始终可用？

这是我当前的代码

选项卡.xml

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<RelativeLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />
</RelativeLayout>
</TabHost> 
```

标签.java

```
public class Tabs extends TabActivity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabs);

    Resources resources = getResources(); 
    TabHost tabHost = getTabHost();

    Intent startUseSaldo = new Intent().setClass(this, Usesaldo.class);
    TabSpec useSaldo = tabHost
      .newTabSpec("UseSaldo")
      .setIndicator("Use Saldo")
      .setContent(startUseSaldo);

    Intent startHistory = new Intent().setClass(this, History.class);
    TabSpec history = tabHost
      .newTabSpec("History")
      .setIndicator("History")
      .setContent(startHistory);

    Intent startProfile = new Intent().setClass(this, Profile.class);
    TabSpec profile = tabHost
      .newTabSpec("Profile")
      .setIndicator("Profile")
      .setContent(startProfile);

    // add all tabs 
    tabHost.addTab(useSaldo);
    tabHost.addTab(history);
    tabHost.addTab(profile);

    tabHost.setCurrentTab(1);
}
} 
```

配置文件.java

```
public class Profile extends Activity {
Button bAddNew;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile);
    bAddNew = (Button)findViewById(R.id.bAddNew);

    bAddNew.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent AddFacility = new Intent(getApplicationContext(), AddFacility.class);
            startActivity(AddFacility);
        }
    });
}
} 
```

AddFacility.java

```
public class AddFacility extends Activity {

@Override
public void setContentView(int layoutResID) {
    // TODO Auto-generated method stub
    super.setContentView(R.layout.add_facility);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:26:50.133

试试这个例子 - [http://gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity](http://gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T09:34:48.333

您必须将 ActivityGroup 与 Tabhost 一起使用

[http://richipal.com/post/2624844577](http://richipal.com/post/2624844577)

但是由于 ActivityGroups 已被废弃，您应该将 Fragments 与 Tabhost 一起使用

# time - redis：EVAL 和 TIME

> ID：12244873
> 
> 赞同：8
> 
> 时间：2012-09-03T09:03:52.437
> 
> 标签：time, lua, redis, eval

我喜欢 redis 的 Lua 脚本，但我对 TIME 有很大的问题。

我将**事件存储在 SortedSet**中。

**分数是时间**，因此在我的应用程序中，我可以查看给定时间窗口中的所有事件。

```
redis.call('zadd', myEventsSet, TIME, EventID); 
```

好的，但这不起作用 - 我无法访问 TIME（服务器时间）。

有没有办法从服务器获取时间而不将其作为参数传递给我的 lua 脚本？还是将时间作为争论的最佳方式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T09:07:49.460

这是明确禁止的（据我所知）。这背后的原因是你的 lua 函数必须是确定性的，并且只依赖于它们的参数。如果这个 Lua 调用被复制到具有不同系统时间的从站怎么办？

**编辑（Linus G Thiel）：**这是正确的。从[redis EVAL 文档](http://redis.io/commands/eval)：

> ## 脚本作为纯函数
> 
> 脚本的一个非常重要的部分是编写纯函数脚本。在 Redis 实例中执行的脚本通过发送脚本复制到从属服务器上——而不是生成的命令。
> 
> [...]
> 
> 为了在脚本中强制执行此行为，Redis 执行以下操作：
> 
> *   Lua 不会导出命令来访问系统时间或其他外部状态。
> *   如果脚本调用 Redis 命令能够在 RANDOMKEY、SRANDMEMBER、TIME 等 Redis 随机命令之后更改数据集，Redis 将阻止脚本并显示错误。这意味着如果脚本是只读的并且不修改数据集，则可以自由调用这些命令。请注意，随机命令并不一定意味着使用随机数的命令：任何非确定性命令都被视为随机命令（这方面最好的例子是 TIME 命令）。

关于为什么会这样，如何在不同场景中处理这个问题，以及脚本可以使用哪些 Lua 库，有很多信息。我建议您阅读整个文档！

# wcf - 连接时出现 WCF 客户端 TCP 错误 10013 - 仅当存在与 Windows DC 的连接时；net.tcp 绑定

> ID：12244875
> 
> 赞同：0
> 
> 时间：2012-09-03T09:04:14.423
> 
> 标签：wcf, nettcpbinding

我在双工模式下设置了一个小型 WCF 服务。该服务在 Windows 8 应用程序中使用。客户端计算机是 Windows 域的成员。如果存在与域控制器的连接，则会出现错误：

```
TCP error code 10013: An attempt was made to access a socket in a way forbidden by its access permissions 
```

如果与 DC 的连接已建立但服务器和客户端在同一台计算机上运行，​​则不会发生这种情况。通过网络连接但是它失败了。

奇怪的是，如果我通过不同的网络连接服务器和客户端而不连接到 DC，一切正常。我尝试设置 accesspolicy.xml 但这没有帮助。

这是服务器配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- Bei der Bereitstellung des Dienstbibliothekprojekts muss der Inhalt der Konfigurationsdatei der app.config-Datei 
  des Hosts hinzugefügt werden. System.Configuration unterstützt keine Konfigurationsdateien für Bibliotheken. -->
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="netTcpBindConfig">
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings>
    <services>
      <service name="PizzaService.PizzaGame">
        <endpoint address="" binding="netTcpBinding" contract="PizzaService.IPizzaGame" bindingConfiguration="netTcpBindConfig">
        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange"  />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://host:8733/Design_Time_Addresses/PizzaService/Service1/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- Legen Sie die Werte unten vor der Bereitstellung 
          auf "false" fest, um die Veröffentlichung von Metadateninformationen zu vermeiden. -->
          <serviceMetadata />
          <!-- Damit in Fehlern Ausnahmedetails zum Debuggen angezeigt werden, 
          legen Sie den Wert unten auf "true" fest. Legen Sie ihn vor der Bereitstellung auf "false" fest, 
          um die Veröffentlichung von Ausnahmeinformationen zu vermeiden. -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:44:59.213

好的，这可以认为解决了。Windows 8 应用需要在 Visual Studio 的应用设置中请求的“专用网络（客户端和服务器）”权限。

# iphone - 无法与 UIScrollView 交互

> ID：12244877
> 
> 赞同：1
> 
> 时间：2012-09-03T09:04:18.970
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

在你抨击我重复之前，请知道我已经看过几乎所有其他方法，但它们都没有帮助。我有一个长视图，其中有一个滚动视图。

![在此处输入图像描述](../Images/2a366c8fd8c884101204631973387718.png)

视图为 320 x 671。滚动视图已正确链接到插座“scrollView”。

属性“scrollView”已正确声明和合成。

我的代码：

```
 [scrollView setScrollEnabled: YES]; 

    scrollView.contentSize = CGSizeMake(320,  671);

scrollView.clipsToBounds = YES;
scrollView.delegate = self; // I have adopted the delegate protocol in .h 
```

所以，我的问题是视图不滚动，滚动条甚至不显示。

编辑：

我将 uiview 的大小调整为正常的 320 x 460。我删除了 xib 中的滚动视图并决定添加如下：

```
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame: CGRectMake(self.view.center.x, self.view.center.y, 320, 460)]; 

[scrollView setScrollEnabled: YES];

 scrollView.contentSize = CGSizeMake(320, 671); 

scrollView.clipsToBounds = YES; scrollView.delegate = self; 

[self.view addSubview: scrollView]; 
```

好的，现在发生的情况是当我滚动屏幕时，栏会出现，我可以滚动来更改栏的位置，但实际视图不会滚动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:13:48.047

您需要将`ContentSize`UIScrollView设置**为您的 CONTENT 的大小**。

不要将“ContentSize”设置为视图的大小。“内容大小”应该告诉滚动视图中内容的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:30:35.633

你的滚动视图应该是 320x460，你的 scrollview.contentsize 应该是 320x671。您必须将您的子视图布局在 IB 视图的“外部”。

编辑：

您的布局应如下所示：

[http://ge.tt/api/1/files/4qGbz2N/2/blob/x675](http://ge.tt/api/1/files/4qGbz2N/2/blob/x675)

文本视图放置在视图框架之外，但在滚动视图内部。应相应地设置滚动视图内容大小以适合所有子视图。在这种情况下，yValue 应该是 550 + 128

# ravendb - RavenDB String.Contains 在多地图索引上

> ID：12244885
> 
> 赞同：1
> 
> 时间：2012-09-03T09:04:50.200
> 
> 标签：ravendb

到目前为止，我有一个这样的索引：

```
public class Animals_Search : AbstractMultiMapIndexCreationTask<Animals_Search.Result> {
    public class Result {
        public object[] Content { get; set; }
    }

    public Animals_Search() {
        AddMap<Dog>(a => from b in a select new Result { Content = new object[] { b.Name, b.Breed} });
        AddMap<Cat>(a=> from bin docs select new Result { Content = new object[] { b.Name, b.Breed} });

        Index(x => x.Content, FieldIndexing.Analyzed);
    }
} 
```

和这样的查询：

```
session.Query<Animals_Search.Result, Animals_Search>()
    .Search(a => a.Content, match)                
    .As<Animal>()
    .ToList(); 
```

如果我提供诸如“Collie”或“Terrier”之类的搜索词，但不提供“Colle”或“Terr”，则此方法有效

如何重写查询以使用 String.Contains("Terr") 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:45:16.867

RavenDB 使包含查询变得困难，因为在大多数情况下，它们是不需要的。你可能想要的是做一个 StartsWith，而不是。

```
session.Query<Animals_Search.Result, Animals_Search>()
    .Where(a => a.Content.StartsWith(match))                
    .As<Animal>()
    .ToList(); 
```

# magento - magento setdata 自定义模块

> ID：12244889
> 
> 赞同：0
> 
> 时间：2012-09-03T09:05:23.923
> 
> 标签：magento, model, module, magento-1.7

当我想在自定义模块中设置数据时遇到问题，我在我的数据库中添加了一个名为“test”的字段。

模块没问题，我所有的其他属性都可以正常工作。

当我做 ：

```
 Mage::getModel('point/point')->load(1)->setUrl('test')->save(); 
```

没关系，值保存在数据库中，但使用我的新字段

```
 Mage::getModel('point/point')->load(1)->setTest('test')->save(); 
```

什么都没有......该值没有保存，我不知道为什么，我尝试在我的表中创建其他字段，它是一样的。这不是我第一次这样做，通常没关系。

我使用magento 1.7。

如果有人有想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:09:30.350

尝试这个

```
cache clear
Mage::getModel('point/point')->load(1)->setData('test','testvalue')->save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:46:37.620

好的，我发现了问题，我更新了我的 magento，现在它很好。可能这是一个固定的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T17:47:23.690

伙计们，我在自定义模块中遇到了同样的问题。我检查了这个步骤并解决了问题

第 1 步：- 检查您的表引擎类型，如果它是 InnoDB，然后将其更改为 MyISAM，然后检查。

更多信息请[点击这里](http://magentoo.blogspot.com/2014/01/error-in-setdata-in-magento.html)

# maven - Maven 中用于 Picasa 的 Google GData

> ID：12244890
> 
> 赞同：1
> 
> 时间：2012-09-03T09:05:28.863
> 
> 标签：maven, gdata, picasa

这个问题之前已经被问过很多次了，但是所有的答案似乎都已经过时了。

Google 的 GData 工件（最著名的是 Picasa 的）是否在 Maven 中？

他们过去不是，所以有像[http://code.google.com/p/mandubian-mvn/](http://code.google.com/p/mandubian-mvn/) 和[https://github.com/eburtsev/Google-Data-APIs-Mavenized这样的替代品](https://github.com/eburtsev/Google-Data-APIs-Mavenized)

但他们似乎都停止在 2010 年的 GDate 版本 1.41 附近进行更新。当时谷歌表示他们将他们的 jar 发布到 maven，这里是 Maven 的官方设置说明。 [http://code.google.com/p/google-api-java-client/wiki/Setup#Maven](http://code.google.com/p/google-api-java-client/wiki/Setup#Maven)

但是这个工件似乎不包含文档中的 PicasewebService 类。 [https://developers.google.com/picasa-web/docs/2.0/developers_guide_java#ClientLogin](https://developers.google.com/picasa-web/docs/2.0/developers_guide_java#ClientLogin)

但是，示例项目包含一个包含所有必需 jar 的 lib 文件夹，并且照片 jar 具有 PicasawebService 类。 [http://code.google.com/p/gdata-java-client/downloads/list](http://code.google.com/p/gdata-java-client/downloads/list)

因此，示例的 lib 文件夹中的内容和 Maven 中的内容似乎有所不同。

因此问题；样品中的罐子在 Maven 的某个地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:11:51.007

我也偶然发现了一个类似的问题。我看到这是一个陈旧的线程，但我将其发布在这里以供参考。

似乎 gdata 不在 maven 中央存储库中，但 api-client 在。有 2 种不同的东西，gdata 有点被弃用（在撰写本文时尚未正式弃用，但除严重错误修复外已停止使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T06:27:20.857

我建议你这个 maven repo [http://maven.burtsev.net](http://maven.burtsev.net)。[在此处](http://burtsev.net/en/2012/01/29/149/)查看详细说明

# sql - 从另一个表更新表，为每个供应商选择最近的“日期”

> ID：12244893
> 
> 赞同：0
> 
> 时间：2012-09-03T09:05:33.797
> 
> 标签：sql, sql-server

我正在`SupplierA`使用来自 的详细信息进行更新`SupplierB`。

`SupplierB`包含供应商提供的每个订单，但是，当我插入时`SupplierA`，我只需要每个供应商的一个实例，因此需要**`most recent`**与订单关联的日期。

目前我正在做这样的事情；

```
UPDATE SupplierA
SET LastSupplyDate = (SELECT [DATE] FROM SupplierB AS SB WHERE SB.Supplier COLLATE DATABASE_DEFAULT = SupplierA.SupNumber COLLATE DATABASE_DEFAULT)
WHERE [Site] = 2 
```

显然这会返回多个值，我如何获得最新的值，是`MAX()`一种选择吗？我会很感激任何想法/想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:07:49.830

```
SET LastSupplyDate = (SELECT MAX([DATE])... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:08:08.150

```
UPDATE SupplierA SET LastSupplyDate =   
(  
  SELECT TOP 1 [DATE] FROM SupplierB AS SB  
  WHERE SB.Supplier
  COLLATE DATABASE_DEFAULT = SupplierA.SupNumber COLLATE DATABASE_DEFAULT 
  ORDER BY [DATE] DESC

) 
WHERE [Site] = 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T09:08:50.147

```
UPDATE SupplierA
SET LastSupplyDate = (SELECT MAX([DATE]) FROM SupplierB AS SB WHERE SB.Supplier COLLATE DATABASE_DEFAULT = SupplierA.SupNumber COLLATE DATABASE_DEFAULT)
WHERE [Site] = 2 
```

# java - ViewPart 出现空白

> ID：12244896
> 
> 赞同：0
> 
> 时间：2012-09-03T09:06:06.680
> 
> 标签：java, eclipse, eclipse-plugin, swt, eclipse-rcp

我有一个视图，该视图已初始化，但是当它可能完全空白时。

由于我使用 ViewParts 的次数不多，所以有什么明显的东西需要寻找吗？

我正在考虑相当于 Java Swings 。setVisible(true) 之类的。这是一个非常模糊的描述，但谷歌搜索它并没有给我太多信息，而且我正在使用的课程不是从头开始编写的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:51:04.807

这只是代码尝试这个的开始。

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.ui.part.ViewPart;
import org.eclipse.swt.widgets.Button;

public class test extends ViewPart {

    public test() {
        // TODO Auto-generated constructor stub
    }
    @Override
    public void createPartControl(Composite parent) {
        // TODO Auto-generated method stub
        Composite comParent = new Composite(parent, SWT.NONE);      
        Button button = new Button(comParent, SWT.NONE);
        button.setBounds(97, 97, 75, 25);
        button.setText("New Button");   
    }
    @Override
    public void setFocus() {
        // TODO Auto-generated method stub

    }
} 
```

# android - 如何调整通过 URL 检索到的图像大小并保存？

> ID：12244903
> 
> 赞同：0
> 
> 时间：2012-09-03T09:06:41.680
> 
> 标签：android

我通过 URL 从 Internet 获取图像，并在保存之前尝试调整大小（到更小的尺寸）。我设法保存它，但我无法调整它的大小。我怎么能那样做？这是代码：

```
URL url = new URL(LogoURL);

InputStream input = url.openStream();
try {
    OutputStream output = new FileOutputStream("data/data/com.android.mylogo/logo.jpg");
    try {
        //byte[] buffer = new byte[aReasonableSize];     
        int bytesRead = 0;
        System.out.println("Buffer Length is \t:-" + buffer.length);
        while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
            System.out.println("inside while");
            output.write(buffer, 0, bytesRead);
        }
    } finally {
        output.close();
        System.out.println("saved image");
    }
} finally {
    input.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:11:14.513

JPG 无论如何都会被压缩，因此无需尝试进一步压缩它们。一般来说，要压缩某些东西，请查看[java.util.zip](http://developer.android.com/reference/java/util/zip/package-summary.html)包的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:29:08.277

如果要将图像缩小到特定尺寸，可以使用以下代码：

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet(LogoURL);

try {
    HttpResponse response = client.execute(request);
    final int statusCode = response.getStatusLine().getStatusCode();
    if (statusCode != HttpStatus.SC_OK) {
        Log.w(LOG_TAG, "Error " + statusCode + " while retrieving bitmap from " + url);
        return null;
    }

    HttpEntity entity = response.getEntity();
    if (entity != null) {

        InputStream is = null;
        BufferedInputStream bis = null;
        try {
            is = url.openStream();
            bis = new BufferedInputStream(is);

            int sampleSize = 1;

            bis.mark(Integer.MAX_VALUE);

            Options bounds = new Options();
            bounds.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(bis, null, bounds);
            if (bounds.outWidth != -1) {
                int width = bounds.outWidth;
                int height = bounds.outHeight;
                boolean withinBounds = width <= YOUR_DESIRED_WIDTH && height <= YOUR_DESIRED_HEIGHT;

                int newWidth = width;
                int newHeight = height;
                while (!withinBounds) {
                    newWidth /= 2;
                    newHeight /= 2;
                    sampleSize *= 2;
                    withinBounds = newWidth <= YOUR_DESIRED_WIDTH && newHeight <= YOUR_DESIRED_HEIGHT;
                }
            } else {
                Log.w(LOG_TAG, "Can't open bitmap at " + url);
                return null;
            }

            try {
                bis.reset();
            } catch (IOException e) {
                if(is != null){
                    is.close();
                }

                if(bis != null){
                    bis.close();
                }

                if(!entity.isRepeatable()){
                    entity.consumeContent();
                    response = client.execute(request);
                    entity = response.getEntity();
                }

                is = entity.getContent();
                bis = new BufferedInputStream(is);
            }

            Options opts = new Options();
            opts.inSampleSize = sampleSize;
            Bitmap bm = BitmapFactory.decodeStream(bis, null, opts);

            return bm;
        } finally {
            if (is != null) {
                is.close();
            }               

            if (bis != null) {
                bis.close();
            }

            entity.consumeContent();
        }
    }
} catch (IOException e) {
    request.abort();
    Log.w(LOG_TAG, "I/O error while retrieving bitmap from " + url, e);
} catch (IllegalStateException e) {
    request.abort();
    Log.w(LOG_TAG, "Incorrect URL: " + url);
} catch (Exception e) {
    request.abort();
    Log.w(LOG_TAG, "Error while retrieving bitmap from " + url, e);
} 
```

用 打开图片时`Options bounds = new Options(); bounds.inJustDecodeBounds = true;`，不会下载图片数据，只下载图片的大小。我使用这个大小来计算新的比例以获得所需的宽度和高度。

使用该选项`Options opts = new Options(); opts.inSampleSize = sampleSize;`，BitmapFactory 将下载已调整大小的图像。这样可以节省内存和带宽。

请注意，sampleSize 值应该是 2 的幂。它也适用于不同的数字，但这更有效。

# php - PHP 有没有像 ruby gem bundler 一样的东西？

> ID：12244913
> 
> 赞同：10
> 
> 时间：2012-09-03T09:07:35.277
> 
> 标签：php, ruby-on-rails, bundler, gem-bundler

我是知道 Rails 的 PHP 程序员。

Ruby [gem bundler](http://gembundler.com/)非常好的安装依赖项的工具，php 有类似的东西吗？（也许某些 php 框架有这样的工具）。

关于 gem bundler 的说明：

> Bundler 在其整个生命周期中系统地和可重复地管理应用程序在许多机器上的依赖关系。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T09:10:30.500

有[作曲家](http://getcomposer.org/)。

> Composer 是一个包管理器，用于跟踪项目和库的本地依赖关系。

然后你有[Packagist](http://packagist.org/)（它是主要的 Composer 存储库）。

> Packagist 是 Composer 的主要存储库。它聚合了可使用 Composer 安装的各种 PHP 包。

您还可以使用[Satis](https://github.com/composer/satis)管理您的私有/自己的存储库。

> 简单的静态 Composer 存储库生成器。

顺便说一句，作者发表了一篇关于[*What & Why Composer*](http://nelm.io/blog/2011/12/composer-part-1-what-why/)的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:09:12.107

有[pecl](http://pecl.php.net/)用于 php，用于 php 扩展。

# php - 寻找一个插件来创建平面图

> ID：12244915
> 
> 赞同：3
> 
> 时间：2012-09-03T09:07:44.357
> 
> 标签：php, javascript, flash, plugins, architecture

我正在寻找创建一个网站，我想在其中为用户提供创建房屋平面图的选项。我希望复制类似[http://floorplanner.com/demo#assets](http://floorplanner.com/demo#assets)的内容。

我尝试使用 jqueryui 对其进行编码，但发现它非常困难，因为我不是专业的程序员。

有谁知道我可以在我的网站中使用的开源插件来创建类似的工具。我在网上搜索了相同的内容（javascript 和 flash 插件），但没有得到我想要的东西。我不是在寻找一个理想的解决方案，而是任何能让我更容易制作最终产品的东西。

谢谢，西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T09:27:09.540

关于 Javascript/HTML5 方法，当今解决此问题的最佳方法可能是使用一些 HTML5 画布库，例如： - [http://www.kineticjs.com/](http://www.kineticjs.com/) - [http://fabricjs.com/](http://fabricjs.com/)

或像 Raphael.js 这样的 SVG 库：- [http://raphaeljs.com/](http://raphaeljs.com/)

但是，这是一个复杂的问题，如果不深入了解 Javascript 编程，您将很难做出好的且可扩展的解决方案。

看看一个类似的帖子，可能对你有帮助。 [FloorPlanner 应用程序的 SVG/Canvas 与 Flash](https://stackoverflow.com/questions/6118546/svg-canvas-vs-flash-for-floorplanner-app)

# iphone - 如何创建自定义相机快门动画（如在 SocialCam 应用中）

> ID：12244919
> 
> 赞同：0
> 
> 时间：2012-09-03T09:07:59.393
> 
> 标签：iphone, objective-c, ios

我想知道如何自定义 iPhone 相机的“光圈”或“快门”动画。在 SocialCam 应用程序中可以找到我正在努力实现的一个很棒的例子。

当您启动相机时，会出现如下所示的自定义光圈效果：

![](../Images/277db3609060ac60947f558ae2a30e1a.png)

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:14:34.333

我认为您不自定义快门，而只是创建一个新动画。你可以使用核心动画来做到这一点。

使用核心动画可以很容易地使用最少的编程来移动视图。

请阅读： http: [//developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:02:00.417

试试这些链接，它也包含项目文件。[iPhone 相机快门动画](http://www.juicybitssoftware.com/2009/08/31/iphone-camera-shutter-animation/)

# sql - 如何在 MySQL 中表示有限深度/宽度的分层数据集

> ID：12244925
> 
> 赞同：1
> 
> 时间：2012-09-03T09:08:07.980
> 
> 标签：sql, database-design, spring-data

我正在尝试重构和规范 MySQL 中的产品表，如下所示：

```
CREATE TABLE `products` (
`id` varchar(45) NOT NULL, # alphanumeric product codes
`productCategory` varchar(45) NOT NULL, 
`productSubCategory` varchar(45) DEFAULT NULL, 
`productRange` varchar(45) NOT NULL,
`productClass` varchar(45) DEFAULT NULL,
`name` text NOT NULL,
`size` int(11) NOT NULL,
`sizeMeasure` varchar(5) NOT NULL,
`boxQuantity` int(11) NOT NULL,
`sellingPrice` double NOT NULL,
`rrp` double DEFAULT NULL,
`ordinalValue` int(11) NOT NULL,
PRIMARY KEY (`id`)
) 
```

我认为需要重构的是`productCategory`,`productSubCategory`和`productRange`字段。这样做的原因是我需要能够获得类别的层次结构。还计划将元数据添加到类别中。

表字段当前包含以下数据：

```
productCategory     productSubCategory      productRange
---------------------------------------------------------
retail              retail_solution1        retail_solution1_range1
retail              retail_solution2        retail_solution2_range2
retail              retail_solution3        retail_solution3_range3
professional        prof_solution1          prof_solution1_range1
professional        prof_solution1          prof_solution1_range2
professional        prof_solution1          prof_solution1_range3
professional        prof_solution2          prof_solution2_range1
professional        prof_solution2          prof_solution2_range2
professional        prof_solution2          prof_solution2_range3
...                 ...                     ... 
```

本质上，在`productCategory`RETAIL 集中，`productSubCategory`和`productRange`字段具有相同的`VARCHAR(45)`值。

这棵树的深度在未来极不可能发生变化。最常见的更改可能是类别名称。

我查看了邻接表和嵌套集模型，不知何故感觉更倾向于使用嵌套集模型。

* * *

到目前为止，我对嵌套集模型方法的了解是：

![该模型](../Images/cc20963529c7cfa906582f0fcc4e60b6.png)

添加类别：

```
CREATE PROCEDURE `addCategory`(IN parent VARCHAR(45), IN child VARCHAR(45))
BEGIN
    SELECT @myLeft := lft FROM product_category

    WHERE name = parent LIMIT 1;

    UPDATE product_category SET rgt = rgt + 2 WHERE rgt > @myLeft;
    UPDATE product_category SET lft = lft + 2 WHERE lft > @myLeft;

    INSERT INTO product_category(name, lft, rgt) VALUES(child, @myLeft + 1, @myLeft + 2);
END 
```

删除类别：

```
CREATE PROCEDURE `deleteCategory`(IN name VARCHAR(45))
BEGIN
    SELECT @myLeft := lft, @myRight := rgt, @myWidth := rgt - lft + 1
    FROM product_category
    WHERE name = name;

    DELETE FROM product_category WHERE lft BETWEEN @myLeft AND @myRight;

    UPDATE product_category SET rgt = rgt - @myWidth WHERE rgt > @myRight;
    UPDATE product_category SET lft = lft - @myWidth WHERE lft > @myRight;
END 
```

* * *

我想在 java web 应用程序中使用 sql，而不是存储过程。我正在使用 Spring 的`JDBCTemplate`所有数据访问。目前我不确定如何处理这个问题，因为我之前没有使用过多语句查询`JDBCTemplate`。

理想情况下，我还想使用 DBUnit 测试数据访问层。

让我对这个项目感到失望的是，不知何故，我觉得需要更加重视顶级类别。也许 RETAIL 和 PROFESSIONAL 的顶级类别应该是产品类型而不是类别？

任何指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:17:49.217

oh well, this looks ugly.

Firstly you should use category-ids to store them into your product (and not varchars), next I would use a simple hirarchical setup of the categories itself.

If you can only have two levels ( the product is either in the root category itself, or in one of its subcategories ) Simply do something like:

```
categoryID, name, parentId:
1, sports, NULL
2, Crossbows, 1
3, Golf, 1
4, Healthcare, NULL 
```

Here sports and Healthcare are "master" level, as your Retail and Professional would be.

if you can have a deeper structure, I would consider using a different approach, since multi-level hirarchy is a pain in the arse in most databases, espec. in mysql (oracle has CONNECT BY PRIOR command against/for this)

If this is the case, I would store the fullpath in a string like an OS would (root/subcat1/subcat2...), this can get somehow sticky, when something is updated, but is very fast on retrival instead of the full recursive retrival of hirarchies.

Another topic that discussed this retrival problem [How to do MySQL Looped Join which tests if results are complete?](https://stackoverflow.com/questions/12141637/how-to-do-mysql-looped-join-which-tests-if-results-are-complete/12218353#12218353) (with codes required)

After you resolved your category to a ID, simply store the specific (and only) id in the product itself as a foreign key.

# java - 如何在玩家之间创建时间表

> ID：12244928
> 
> 赞同：0
> 
> 时间：2012-09-03T09:08:24.497
> 
> 标签：java, algorithm

我有团体地图。每个组都有球员名单：

```
Map<String, List<Player>> playerByGroup = new LinkedHashMap<String, List<Player>>(); 
```

例如：

地图包含：

```
 group A: players 1 2 3 4 5 6 
 group B: players 7 8 9 10 11 12 
 group C: players 13 14 15 16 17 18 
 group D: players 19 20 21 22 23 24 
```

现在我需要创建时间表。每个组的每个玩家都应该与另一个组的玩家一起玩

例如：

玩家 1 应该是玩家 7 - 24 的玩家，而不是玩家 2 - 6 的玩家

这不是要创建的问题

但现在我有问题：

我需要创建包含 numberOfPlayer/2 游戏的回合。在一轮中，每个玩家只能玩一次

例如

```
1.round should be looks like:

1.game 1 vs 7
2.game 13 vs 19
3.game 3 vs 9
4.game 14 vs 20
5.game 2 vs 8
6.game 15 vs 21
7.game 4 vs 10
8.game 16 vs 22
9.game 5 vs 11
10.game 17 vs 23
11.game 6 vs 12
12.game 18 vs 24

2.round ... 
```

应该只有 18 轮，因为一名球员应该与 18 名球员一起比赛。

问题：

问题是只创建 18 轮，每轮只有一名玩家玩一次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:02:14.913

给你的提示：

把它想象成一个组合问题`6`，每个组都有人。组数`4`。您需要每个玩家一起玩但不是在组中，那么组合的总数将是 `24C4 - 4*(6*(6-1)/2)`（`C`是[组合](http://en.wikipedia.org/wiki/Combination)）或 `(24*23*22*21)(4*3*2*1) - 4*(6*(6-1)/2)`。相应地编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:17:35.660

我会为你解释答案的例子。~~在一般情况下很容易扩展它。~~

将您的回合分为三个主要组，因此我们每组有 6 个回合。

在第一盘六轮比赛中：

A组的所有球员都将与B组的所有球员比赛，C组的所有球员将与D组的所有球员比赛。

in the second set all players of group A will play to all players of group C and all players of group B will play to all players of group D. in the third set all players of group A will play to all players of group D and all players of group B will play to all players of group C.

# jquery - jQuery 自定义选择器，“未定义”

> ID：12244929
> 
> 赞同：5
> 
> 时间：2012-09-03T09:08:25.353
> 
> 标签：jquery, custom-selectors

我正在尝试在单击日期时制作 jQuery ui 日历进行 ajax 调用，但几天前我遇到了问题。我发现了一段应该可以做到这一点的代码，但我发现它使用了 jQuery 自定义选择器。该代码给了我一个错误，所以我开始深入研究自定义选择器以了解有关它们的更多信息。到目前为止，我还无法找出为什么我会出现这种奇怪的行为。

这是一张希望能把事情弄清楚的图片，我会在它之后解释更多 ![在此处输入图像描述](../Images/7507b6e5d0577afa0344e641f2a84f38.png)

我在控制台输入

```
$('.ui-datepicker-calendar td a:test(3)') 
```

正如你所看到的，我 meta2 和 stack2 是未定义的，还有一件更奇怪的事情，为什么 index2 返回一个 #document ，它应该包含元素数组的索引。

此外，元素 (el2) 甚至不是正确的元素。看看，我打电话

`$('.ui-datepicker-calendar td a:test(3)')`

这应该从日历中选择所有日期，并且在第一个循环中，console.log 应该打印出这个

```
<td class=" ui-datepicker-week-end " data-handler="selectDay" data-event="click" data-month="8" data-year="2012"><a class="ui-state-default" href="#">1</a></td> 
```

但相反，我得到了整个文档中的第一个“a”标签，在这种情况下，它是上个月的标签（如图所示）。

如果有人可以对这种情况有所了解，请这样做。哦，还有一件事我忘记了

meta2 ，它应该包含这个

```
[
    ':test(argument)', // full selector
    'test',            // only selector
    '',                // quotes used
    'argument'         // parameters
] 
```

在我的情况下，它又是未定义的......

我将分享我的 javascript 代码，希望对您有所帮助

```
<script>
    $(function()
    {
        $.expr[":"].test = function(el2,index2,meta2,stack2)
        {
            debugger;
            console.log(el2);
            console.log(index2);
            console.log(meta2);
            console.log(stack2);
        }
    })

    $(function()
    {
        function getJsonDate(year, month)
        {
            $.getJSON('dates.php?year='+year+'&month='+month, function(data)
            {
                var i = 0;
                for (i = 0; i < data.data.length; i++)
                {
                    debugger;
                    var myDay = data.data[i]['d'];
                    $('.ui-datepicker-calendar td a:exactly('+data.data[i]['d']+')')
                    .css({color: '#f00'})
                    .attr('href',data.data[i]['link'])
                    .parent().attr('onclick','');
                }
            });
        }
        $.expr[":"].exactly = function(el, index, meta, stack) 
        {
            debugger;
            console.log(el);
            console.log(index);
            console.log(meta);
            console.log(stack);
            var s = meta[3];
            if (!s) return false;
            return eval("/^" + s + "$/i").test($(el).text());
        };
        $('#datepicker').datepicker(
        {
            inline: true,
            onSelect: function(dateText, inst) 
            {
                Date.prototype.toString = function () {return isNaN (this) ? 'NaN' : [this.getDate(), this.getMonth(), this.getFullYear()].join('/')}
                d = new Date(dateText);
                getJsonDate(d.getFullYear(), d.getMonth()+1);
            },
            onChangeMonthYear: function(year, month, inst) 
            {
                //alert(year);
                //alert(month);
                getJsonDate(year, month);
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T20:13:57.360

最短的解释是“jQuery 1.8.0 中有一个错误，升级到 1.8.1 进行修复”，但这并不能完全回答所有问题。

jQuery 1.8.x 有一个显着升级的“Sizzle”引擎，它用于选择器。作为此更改的一部分，调用自定义选择器的方式已更改，但此外，处理许多选择器的方式已更改。关于规则处理顺序的各种假设不再成立，等等。在各种用例中它也明显更快。

即使升级到 1.8.1，在处理您提供的示例时，您仍然会看到与在 1.7.2（1.8.x 之前的系列中的最新版本）中所做的方式有很大不同。这解释了您在选择“页面上的第一个 <a> 元素”时看到的内容。也就是说：您对自定义选择器如何工作的期望不是它们实际如何工作，如果您允许循环继续（而不是在第一次迭代时调用“调试器”），您会看到它实际上正在通过*所有*<a> 元素）。简而言之：Sizzle 不保证将调用各种规则的顺序，只保证结果将匹配所有规则。

如果您确定您的自定义规则将比其他规则效率低（可能是因为您确定其他规则会严重减少匹配元素的数量），您可以通过选择它们来强制它们首先运行，然后调用 .find () 仅在该元素子集上，例如：

```
$(".ui-datepicker-calendar").find("td a:test(3)"); 
```

至于未定义的“堆栈”，正如 Kevin B 指出的那样，尽管 1.8.1 更新恢复了向后兼容性，但 API 已经发生了变化，看起来“堆栈”只是不再传递给伪。实际上，这是有道理的，因为调用测试的顺序发生了变化。也就是说：当你到达堆栈时，堆栈是空的，因为“查看是否有任何 <a> 元素与这个伪选择器匹配”是第一个被处理的规则。测试应该始终是独立的，因此堆栈无论如何都不会非常有用（可能只会导致混乱）。

那么如果 1.8.1 恢复了向后兼容，那么创建伪选择器的前向兼容方法是什么？正如您在[Sizzle 的伪选择器的文档](https://github.com/jquery/sizzle/wiki/Sizzle-Documentation#wiki-pseudo-selectors)中看到的那样，从 jQuery 1.8 开始，创建伪选择器的首选方法是“createPseudo”方法（$.expr.createPseudo），它更喜欢使用闭包而不是“元“ 争论。因此，对于您的特定示例，执行它们的“新”方法将是：

```
$.expr[":"].test = $.expr.createPseudo(function( tomatch )
{
        return function( el2 )
        {
            debugger;
            console.log(el2); // not much else to see here
        };
}) 
```

其中“tomatch”是 :test(...) 选择器的参数。如您所见，您正在寻找的额外参数在这种新语法中不再需要。至于更有用的东西：

```
$.expr[":"].exactly = $.expr.createPseudo(function( s )
{
    return function(el)
    {
        if(!s) return false;
        return eval("/^" + s + "$/i").test($(el).text());
    };
}); 
```

这个版本的“exactly”应该兼容1.8+，是首选*的做事方式。

我认为即使 jQuery 版本/api 出现了问题，您提供的代码仍然不会完全符合您的要求，因为 datepicker 可能会根据插件的一时兴起而重建。仍然有一小段时间您可以判断所需元素确实按预期突出显示，因此选择器本身似乎正在工作。

下面是一个完整的示例，基于您提供的示例。您可以通过更改 1.7.2、1.8.0 和 1.8.1 之间使用的 jQuery 版本来查看行为差异。为了跨版本的兼容性，对 $.expr.createPseudo 的测试已添加到伪选择器函数分配中。注意所有的“调试器；” 语句已被注释掉，因为在 datepicker 中的所有日期链接的每次迭代中都有一个断点变得相当乏味，并且 getJSON 调用已被模拟以允许测试是独立的。

```
<html>
<head>
    <title>jQuery custom selector, "undefined"</title>
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script> -->
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.js"></script> -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.js"></script>
    <link rel="stylesheet"
        href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/base/jquery-ui.css" />
    <script>
    $(function()
    {
        $.expr[":"].test = $.expr.createPseudo ?
            $.expr.createPseudo(function( tomatch )
            {
                return function( el2 )
                {
//                  debugger;
                    console.log(el2);
                };
            }) :
            function(el2,index2,meta2,stack2)
            {
    //          debugger;
                console.log(el2);
                console.log(index2);
                console.log(meta2);
                console.log(stack2);
            };
    })

    $(function()
    {
        function getJsonDate(year, month)
        {
            //$.getJSON('dates.php?year='+year+'&month='+month, function(data)
            //{
                var data = {data:[
                    {d:1,link:"a"},
                    {d:15,link:"b"},
                    {d:25,link:"c"}
                ]};
                var i = 0;
                for (i = 0; i < data.data.length; i++)
                {
//                  debugger;
                    var myDay = data.data[i]['d'];
                    $('.ui-datepicker-calendar td a:exactly('+data.data[i]['d']+')').
                        css({color: '#f00'}).
                        attr('href',data.data[i]['link']).
                        parent().attr('onclick','');
                }
            //});
        }

        $.expr[":"].exactly = $.expr.createPseudo ?
            $.expr.createPseudo(function( s )
            {
                return function(el)
                {
                    if(!s) return false;
                    return eval("/^" + s + "$/i").test($(el).text());
                };
            }) :
            function(el, index, meta, stack) 
            {
//              debugger;
                console.log(el);
                console.log(index);
                console.log(meta);
                console.log(stack);
                var s = meta[3];
                if (!s) return false;
                return eval("/^" + s + "$/i").test($(el).text());
            };

        $('#datepicker').datepicker(
        {
            inline: true,
            onSelect: function(dateText, inst) 
            {
                Date.prototype.toString = function () {
                    return isNaN (this) ?
                        'NaN' :
                        [this.getDate(), this.getMonth(), this.getFullYear()].join('/')
                }
                d = new Date(dateText);
                getJsonDate(d.getFullYear(), d.getMonth()+1);
            },
            onChangeMonthYear: function(year, month, inst) 
            {
                //alert(year);
                //alert(month);
                getJsonDate(year, month);
                return false;
            }
        });
    });
    </script>
    <script>
    (function($){$(function(){
        $("<input />").
            attr({type:"button", value: "run test selector"}).
            click(function(){
                $(".ui-datepicker-calendar td:test(3) a");

                // Or, if you are certain that your test will be less-efficient than an exclusion based
                // on parents, you could do:
                //  $(".ui-datepicker-calendar").find("td a:test(3)");
            }).
            appendTo("body");
    })}(window.jQuery));
    </script>
</head>
<body>
    <a href="#ignoreThisLink">.</a>
    <a href="#ignoreThisToo">.</a>
    <p>
        (first, click the input box to cause the datepicker to initialise)
    </p>
    <input type="text" id="datepicker" />
</body>
</html> 
```

我希望这有助于阐明一些事情。

*我说这是“首选”方法，但您仍在使用“eval”。这是非常不鼓励的，因为它很慢并且可能导致意外/令人惊讶/危险的结果。基于字符串构建正则表达式的更好方法是

```
return (new RegExp("^" + s + "$", "i")).test($(el).text()); 
```

尽管这也有问题，因为“s”可能包含 RegExp 特殊字符。但是，在这种特殊情况下，甚至不需要正则表达式，并且可以通过以下方式更有效地测试事物：

```
return String(s).toUpperCase() === $(el).text().toUpperCase(); 
```

您甚至可以通过将转换滚动到闭包中来节省更多，为您提供以下全部功能：

```
$.expr[":"].exactly = $.expr.createPseudo(function( s )
{
        if(!s) return function(){ return false; };
        s = String(s).toUpperCase();

        return function(el)
        {
            return (s === $(el).text().toUpperCase());
        };
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T21:00:58.663

jquery ui datepicker 具有这种功能的钩子。与其尝试定位构成日期的 DOM 元素，不如绑定到选择一个的行为。[jsFiddle](http://jsfiddle.net/sinetheta/B8y6u/4/)

```
$('#datepicker').datepicker({
    onSelect: function(dateText, inst){
        //awesome ajax stuff based on dateText
    }
});​ 
```

**编辑评论：**如果您需要设置特定日期的样式，那么您应该通过在绘制之前应用自定义类来定位它。[jsFiddle](http://jsfiddle.net/sinetheta/zQXHr/2/)

```
$('#datepicker').datepicker({
    beforeShowDay: function(date){
        return [true, 'date-' + date.getDate() ];
    }
}); 
```

# javascript - 响应第 3 方 ajax 响应

> ID：12244939
> 
> 赞同：0
> 
> 时间：2012-09-03T09:09:23.593
> 
> 标签：javascript, ajax, javascript-events

我需要在表单的输入字段旁边添加一个按钮。表单（无论如何都是它的这一部分）是由 ajax 动态创建的（响应是表格 html）。

该页面和现有的 javascript 位于第 3 方网站上。我遇到的困难是：

1.  我无法控制网站用于添加表格的方法
2.  替换表格**后**，必须将按钮的标记添加到页面

有关如何对新表格标记做出反应的任何建议？

# visual-studio-2010 - “EmployeeDetails”没有实现接口成员“System.ComponentModel.INotifyPropertyChanged.PropertyChanged”

> ID：12244940
> 
> 赞同：0
> 
> 时间：2012-09-03T09:09:23.947
> 
> 标签：visual-studio-2010, class, data-binding, inotifypropertychanged

我正在尝试实现`Inotifypropertychange`接口，例如

```
public class EmployeeDetails:INotifyPropertyChanged
{
 private int employeeID;
    public int EmployeeID
    {
        get { return employeeID; }
        set { employeeID = value; this.NotifyPropertyChanged("EmployeeId"); }
    }

    private string employeeName;
    public string EmployeeName
    {
        get { return employeeName; }
        set { employeeName = value; this.NotifyPropertyChanged("EmployeeName"); }
    }

    private decimal salary;
    public decimal Salary
    {
        get { return salary; }
        set { salary = value; this.NotifyPropertyChanged("Salary"); }
    }
    public event PropertyChangedEventHandler propertychange;

    public void NotifyPropertyChanged(string name)
    {
        if (propertychange != null)
            propertychange(this, new PropertyChangedEventArgs(name));
    }
    public EmployeeDetails(int employeeId, string employeeName, decimal salary)
    {
        EmployeeID = employeeID;
        EmployeeName = employeeName;
        Salary = salary;
    }

    public EmployeeDetails()
    {
        // TODO: Complete member initialization
    } 
```

}

在调试时，它显示以下错误：

“EmployeeDetails”没有实现接口成员“System.ComponentModel.INotifyPropertyChange”

我缺少什么特定代码，请帮助我包含了`system.component`程序集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:12:43.213

您可以使用此代码

```
public class EmployeeDetails : INotifyPropertyChanged
{
  ...
} 
```

然后右键单击 INotifyPropertyChanged，首先执行解析引用并选择实现接口

# html - Html表单Chrome浏览器设置奇怪值（WYŚLIJ）作为输入类型（提交）值

> ID：12244948
> 
> 赞同：1
> 
> 时间：2012-09-03T09:09:48.287
> 
> 标签：html, forms, google-chrome, browser

我的表格：

```
 <input name="submit_active" id="submit_active" class="submit_active cancel_submit" type="submit" value="SUBMIT"> 
```

发布数据：

```
POST:<QueryDict: { u'submit_active': [u'WY\u015aLIJ'], u'agreeToTerms': [u'yes'], u'County': [u'West Midlands'],u'debitCardType': [u'VISA Delta']}>, 
```

浏览器：

```
Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5 
```

我不知道提交按钮的值如何更改为 u'WY\u015aLIJ'。对于大约 50 个不同的用户 u'submit_active'，相同的值 [u'WY\u015aLIJ'] 将进入发布数据。这与任何特定的浏览器问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:32:12.917

您是否支持可能已翻译该页面的用户？“WYŚLIJ”在波兰语中的意思是“发送”（根据谷歌翻译）。

*   页面呈现翻译
*   表单由用户提交
*   浏览器从表单中收集值
*   隐藏值（如“agreeToTerms”）不受影响
*   可见文本已翻译
*   表单以翻译文本作为提交按钮的名称/值对中的值发布

请注意，只有当它是被点击的按钮时，按钮的名称才会出现在请求集合中。在分析请求时，按钮的值通常并不重要。

# git - master 分支上缺少 gitignore - 如何“修复”它？

> ID：12244949
> 
> 赞同：1
> 
> 时间：2012-09-03T09:09:47.490
> 
> 标签：git

在结帐到主分支时，我得到了：

> 错误：以下未跟踪的工作树文件将被结帐覆盖：
> nbproject/private/config.properties
> nbproject/private/private.properties
> nbproject/private/private.xml
> nbproject/project.properties
> nbproject/project.xml
> 
> ```
> Please move or remove them before you can switch branches.  
> 
> Aborting 
> ```

所以我已经删除了它们（我已经在 repo 之外的其他地方备份了这些文件），并且我能够再次切换。

我得到这个的原因是：

dev 忽略了这些文件。master 不是，因为那里没有 .gitignore 文件。

他们都应该忽略这些文件。

另外，当我将其推送到远程存储库时，这些更改也应该传播到那些远程存储库。

**我们如何将该 .gitignore 文件添加到 master 中，以免再次发生这种情况？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T10:19:24.073

添加`.gitignore`文件与添加任何其他文件相同。创建它，以及您要忽略的内容，然后添加并提交它。您可以使用以下命令专门忽略这些文件：

```
echo /nbproject/private/config.properties >> .gitignore
echo /nbproject/private/private.properties >> .gitignore
echo /nbproject/private/private.xml >> .gitignore
echo /nbproject/project.properties >> .gitignore
echo /nbproject/project.xml >> .gitignore

git add .gitignore
git commit -m "Add some ignores." 
```

您可能需要在所有受影响的分支上执行相同的操作。

但是，你确实有其他事情发生。git 告诉您这些文件妨碍了这一事实，并不是因为它们在您的主分支上被忽略了……而是因为它们已被提交到您的主分支。IOW，它们现在处于版本控制之下。我认为您不仅需要忽略它们，还可能将它们从版本控制中删除。这将是您可能希望与您的团队协调的事情，以便 master 上的任何人都知道文件将会消失，并且他们可以事先备份它们。

更新：MEM和我聊过这个。我们最终通过制作另一个克隆、签出 master、从他的 dev 分支添加 .gitignore（通过`git show dev:.gitignore > .gitignore`）来修复他的存储库，然后将该修订版取回他的原始项目（通过`git fetch /path/to/fix master:master`）。一旦他有了新的修订版，我们就把它推送到遥控器上，这样其他人也可以拥有它。

# c++ - 使用 OpenCV 进行 ASL 手势识别

> ID：12244951
> 
> 赞同：0
> 
> 时间：2012-09-03T09:09:55.820
> 
> 标签：c++, opencv, gesture, gesture-recognition

我们正在使用 OpenCV 在 C++ 中制作 ASL 手势识别程序。[http://en.wikipedia.org/wiki/American_Sign_Language](http://en.wikipedia.org/wiki/American_Sign_Language) (ASL)。这是不同手势的列表：http://en.wikipedia.org/wiki/File: [ABC_pict.png](http://en.wikipedia.org/wiki/File:ABC_pict.png)

我读过关于 cvConvexityDefects() 的文章，我认为它可以处理手指张开的手。

我如何处理手指闭合的手势，如 A、E、M、N、S 和 T？像 J 和 Z 这样的移动手势怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:10:45.420

这是一个非常困难的研究问题，许多人目前正在研究它。你不能仅仅通过使用 OpenCv 来解决它，这将需要更多的工作。

如果要对手指咬合进行建模，则需要引入手和手指关节的先验模型。谷歌搜索相关作品。

# php - 在 javascript 函数中传递多个参数

> ID：12244958
> 
> 赞同：0
> 
> 时间：2012-09-03T09:10:31.393
> 
> 标签：php, javascript

我在 PHP 中有一个预先编写的代码，其中调用了 JavaScript 函数

```
echo "<a href='javascript:submittemplate(".$temprow['templateid'].");'>".$temprow["templatename"]."</a></td>"; 
```

脚本是：

```
 <script>
        function submittemplate(templateid)
        {

            window.document.location.href = 'index.php?module=Users&action=UsersAjax&file=TemplateMerge&templateid='+templateid;

        }
 </script> 
```

现在我想在这个函数中再传递一个参数。
我所做的是：

```
echo "<a href='javascript:submittemplate(".$temprow['templateid'].",".$mode.");'>".$temprow["templatename"]."</a></td>"; 
```

```
<script>
function submittemplate(templateid,mode)
{
alert("anything");
    window.document.location.href = 'index.php?module=Users&action=UsersAjax&file=TemplateMerge&templateid='+templateid;

}
</script> 
```

后来的代码不起作用。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:16:31.130

如果`mode`变量是 a`string`这将引发错误。

例如`alert(myString Is Here) // throw error`

它应该是`alert("myString Is Here");`

所以你必须添加报价是这样的：

```
echo "<a href='javascript:submittemplate(".$temprow['templateid'].",\"".$mode."\");'>" 
```

注意`\"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:26:54.467

我猜您正在生成无效的 Javascript 语法，因为您正在输出的值。打开浏览器的 Javascript 控制台以调试 Javascript 并查看任何错误。

将 PHP 值输出到 Javascript 时，应确保它们不会破坏语法。最好的方法是对它们进行 JSON 编码，因为 JSON 是有效的文字 Javascript。就像您还应该在 HTML 中对值进行 HTML 编码一样：

```
<a href="javascript:submittemplate(<?php echo htmlspecialchars(json_encode($temprow['templateid']), ENT_COMPAT); ?>, <?php echo htmlspecialchars(json_encode($mode), ENT_COMPAT); ?>);"><?php echo htmlspecialchars($temprow["templatename"]); ?></a></td> 
```

由于这是一个非常不可读的单行代码，您应该考虑`onclick`使用 Javascript 将事件绑定到链接，而不是使用`href="javascript:"`目标。请参阅[http://en.wikipedia.org/wiki/Unobtrusive_Javascript#Separation_of_behavior_from_markup](http://en.wikipedia.org/wiki/Unobtrusive_Javascript#Separation_of_behavior_from_markup)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T09:30:02.907

1.  不要使用 javascript: 协议，使用 onclick 并返回 false
2.  为什么要使用 JavaScript ？？？

```
 <a href="'index.php?module=Users&action=UsersAjax&file=TemplateMerge&templateid=<?PHP echo $temprow['templateid']; ?>">..... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T09:11:54.883

您需要在参数周围使用转义的双引号

```
...submittemplate(\"".$temprow['templateid']."\");'>". 
```

因为你正在传递字符串

# java - 有效地发出多个http请求

> ID：12244959
> 
> 赞同：3
> 
> 时间：2012-09-03T09:10:32.580
> 
> 标签：java, http

我想向表单的 Web 服务发出几百万个 http 请求 - htp://(some ip)//{id}

我有身份证清单。简单计算表明，我的 java 代码大约需要 4-5 个小时才能从 api 获取数据代码是

```
URL getUrl = new URL("http url");
URLConnection conn = getUrl.openConnection();
BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
StringBuffer sbGet = new StringBuffer();
String getline;
while ((getline = rd.readLine()) != null)
{
    sbGet.append(getline);
}
rd.close();
String getResponse = sbGet.toString(); 
```

有没有办法更有效地提出这样的请求，这将花费更少的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:16:24.090

一种方法是使用具有固定线程池的执行器服务（大小取决于目标 HTTP 服务可以处理多少）并并行轰炸对服务的请求。Runnable 基本上会执行您在示例代码中概述的步骤，顺便说一句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:20:17.093

在开始优化代码之前，您需要对代码进行概要分析。否则，您最终可能会优化错误的部分。根据从分析中获得的结果，考虑以下选项。

*   更改协议以允许您对请求进行批处理
*   并行发出多个请求（使用多个线程或并行执行多个进程；请参阅[本文](http://www.spinellis.gr/blog/20110911/)）
*   缓存以前的结果以减少请求的数量
*   压缩请求或响应
*   保持 HTTP 连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:22:58.260

> 有没有办法更有效地提出这样的请求而花费更少的时间？

好吧，您可能可以并行运行少量请求，但您可能会使服务器饱和。每秒超过一定数量的请求，吞吐量可能会降低......

要超过该限制，您将需要重新设计服务器和/或服务器的 Web API。例如：

*   将您的 Web API 更改为允许客户端在每个请求中获取多个对象将减少请求开销。

*   压缩可能会有所帮助，但您正在以网络带宽换取 CPU 时间和/或延迟。如果您有一个快速的端到端网络，那么压缩实际上可能会减慢速度。

*   缓存通常会有所帮助，但可能不适用于您的用例。（您只请求每个对象一次......）

*   使用持久 HTTP 连接可以避免为每个请求创建新的 TCP/IP 连接的开销，但我认为您不能为 HTTPS 执行此操作。（这很遗憾，因为建立 HTTPS 连接的成本要高得多。）

# fonts - Windows 手机文本应用程序

> ID：12244962
> 
> 赞同：0
> 
> 时间：2012-09-03T09:10:50.833
> 
> 标签：fonts, windows-phone

我正在开发一个基本的文本 Windows 手机应用程序。它由一个主页面和几个从它分支的其他页面组成。我主要需要两件事

1.  从应用程序的设置页面更改所有文本页面中的字体。
2.  xaml 是否具有像 html 这样的标签，可以在其中导航到同一页面中的不同部分/元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:22:39.023

C#代码背后：

```
this.textBlock.FontSize = 30;
this.textBlock.FontFamily = new FontFamily("Arial"); //to be pulled from isolated storage
this.textBlock.FontWeight = FontWeights.Bold; 
```

XAML：

```
<TextBlock Text="TextBlock" FontWeight="Bold" FontSize="30" FontFamily="Arial" x:Name="textBlock"/> 
```

至于在应用程序中进行字体级联，您可以使用单个隔离存储值并从应用程序的设置页面更改文本值（即“Arial”、“Tahoma”等）。

如果这还不够清楚，我可以为您编写一个工作示例。

更多样品：[这里](http://www.windowsphonegeek.com/tips/Windows-Phone-Beginners-How-to-Programmatically-set-common-Control-properties)

# python - 改进此功能的提示？

> ID：12244963
> 
> 赞同：0
> 
> 时间：2012-09-03T09:11:02.580
> 
> 标签：python, math, polygon

这可能是一个非常绿色的问题，但我希望你能理解——刚刚开始使用 python 并试图改进。无论如何，写了一个小函数来执行在笛卡尔平面中找到多边形区域的“鞋带方法”（请参阅[​​this](http://en.wikipedia.org/wiki/Shoelace_formula) for a refresh）。

我想知道如何改进我的方法，这样我就可以尝试花哨的新方法来做同样的旧事情。

```
 def shoelace(list):
        r_p     = 0         # Positive Values
        r_n     = 0         # Negative Values

        x, y    = [i[0] for i in list], [i[1] for i in list]
        x.append(x[0]), y.append(y[0])

        print(x, y)

        for i in range(len(x)):
            if (i+1) < len(x):
                r_p += (x[i] * y[i+1])
                r_n += (x[i+1] * y[i])
            else:
                break

        return ((abs(r_p - r_n))/2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:20:11.337

*   不要使用需要注释的短变量名；使用指示功能的名称。

*   `list`是内置列表类型的名称，因此虽然 Python 允许您替换该名称，但从风格上来说这是个坏主意。

*   `,`不应用于分隔应该是语句的内容。您可以使用`;`，但通常最好将内容放在单独的行上。在您的情况下，它恰好起作用，因为您正在使用`.append`副作用，但基本上您所做的是构造 2 元组`(None, None)`（来自 的返回值`.append`）并将其丢弃。

*   尽可能使用内置函数进行标准列表转换。例如，请参阅文档`zip`。除非您真的不需要执行此转换；你想考虑成对的相邻点，所以这样做 - 并在循环内拆开它们的坐标。

*   但是，您*可以*使用`zip`将点列表转换为相邻点对的列表:)，这样您就可以编写更清晰的循环。这个想法很简单：首先，我们制作一个相对于原始点的所有“下一个”点的列表，然后我们`zip`将两个点列表放在一起。

*   `return`不是一个函数，所以你正在使用的东西`return`不需要括号。

*   不是计算单独的正负值，而是对单个值执行带符号的算术运算。

* * *

```
def shoelace(points):
    signed_double_area = 0

    next_points = points[1:] + points[:1]

    for begin, end in zip(points, next_points):
        begin_x, begin_y = begin
        end_x, end_y = end
        signed_double_area += begin_x * end_y
        signed_double_area -= end_x * begin_y

    return abs(signed_double_area) / 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:13:54.433

从功能上讲，您的程序非常好。一个小注释是替换`range(len(x))`为`xrange(len(x))`。它使程序稍微更有效率。通常，您应该`range`仅在您确实需要它创建的完整值列表的情况下使用。如果您只需要遍历这些值，请使用`xrange`.

`return`此外，语句中不需要括号，`r_p +=`and`r_n +=`语句中也不需要括号。

关于样式，在 Python 中变量赋值不应该像你那样做，而是在`=`符号的每一侧都有一个空格：

```
r_p = 0
r_n = 0 
```

# sql-server - 在 MyBatis 中使用更新和 ResultSet 调用过程

> ID：12244964
> 
> 赞同：3
> 
> 时间：2012-09-03T09:11:13.750
> 
> 标签：sql-server, stored-procedures, annotations, mybatis, procedures

我想使用注释将 SQL Server 存储过程与 MyBatis 映射。

```
@Select(value = "{call sp_cen_obliczcene(" +
    "#{wytworId, mode=IN, jdbcType=NUMERIC}, " +
    "#{rodzajCenyId, mode=IN, jdbcType=NUMERIC}, " +
    "#{walutaId, mode=IN, jdbcType=NUMERIC}, " +
    "#{jmId, mode=IN, jdbcType=NUMERIC}, " +
    "#{ilosc, mode=IN, jdbcType=DECIMAL}, " +
    "#{data, mode=IN, jdbcType=DATE})}")
@Result(property = "kwota", column = "kwota", javaType = BigDecimal.class, jdbcType = JdbcType.DECIMAL)
@Options(statementType = StatementType.CALLABLE)
public DtoCena dajCene(CriteriaCena parametry); 
```

该过程选择一行 - 我对一列感兴趣。现在，我之前已经映射了一个过程，只有我有多行并从中选择了多于一列。一切正常。当我映射新程序时，以类似的方式出现错误：

```
### The error occurred while setting parameters
### SQL: {call sp_cen_obliczcene(?, ?, ?, ?, ?, ?)}
### Cause: java.lang.NullPointerException 
```

我启动了 SQL Profiler 并看到使用给定参数正确调用了该过程。我注意到我正在映射的过程正在执行其他过程。他们正在执行一些更新。当我将注释更改为 @Update 时，我遇到了另一个错误：无法将 Integer 强制转换为 DtoCena 类型。我将方法的返回值更改为 Integer 并且没有出现错误，但您可以猜到它没有返回我正在寻找的内容。

问题是，我可以映射一个更新表并返回 ResultSet 的存储过程吗？我可以使用 JDBC 来做到这一点，但 MyBatis 可以做到这一点吗？使用 @Select 注释时我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-14T16:24:32.310

看起来@Update 返回受影响的行数......无论如何，我认为问题与调用存储过程无关，这只是简单选择会发生的映射问题。

您必须在@Results 注释中使用@Result*注释**，*否则将被忽略。这是一个简化但功能强大的代码：

 *```
@Select("select 'hello' as h, 1 as n from dual")
@Results({
    @Result(column="n")
})
Integer test(); 
```

只需添加一个*属性*属性并更改返回类型即可将结果检索到对象中。*

# php - 试图获取一个页面来填充数据库中的数据

> ID：12244967
> 
> 赞同：0
> 
> 时间：2012-09-03T09:11:44.997
> 
> 标签：php, mysql

我正在尝试编写一个脚本，该脚本根据我数据库中条目的 id 从 sql 服务器获取数据。当我尝试使用带有`id`条目的链接访问该页面时，它返回就好像它无法识别该 ID。下面是php代码：

```
<?php
    require('includes/config.inc.php');
    require_once(MYSQL);
    $aid = FALSE;
    if (isset($_GET['aid']) && filter_var($_GET['aid'], FILTER_VALIDATE_INT, array('min_range' => 1)) ) {
          $aid = $_GET['aid'];
          $q = "SELECT aircraft_id, aircraft_name AS name, aircraft_type AS type, tail_number AS tn FROM aircraft USING(aircraft_id) WHERE aircraft_id = $aid";
          $r = mysqli_query($dbc, $q);
          if (!(mysqli_num_rows($r) > 0)) {
            $aid = FALSE;
          }
    }// end isset tid

    if ($aid) {
        while ($acdata = mysqli_fetch_array($r, MYSQLI_ASSOC)){
            echo'<h2>'. $acdata['tail_number'] .'</h2>';
        }
    } else {
      echo '<p>This pages was accessed in error.</p>';
    }
?> 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:16:26.637

尝试`var_dump($q);`之前`$r = mysqli_query($dbc, $q);`检查您的查询，然后通过 phphmyadmin 或直接在 MySQL 服务器终端中执行它，看看它返回什么。

**更新：**

用于`var_dump($q);die();`在转储后停止执行脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:18:12.400

您在查询中使用了字段别名，因此您必须在 echo 中使用它来：

```
echo'<h2>'. $acdata['tn'] .'</h2>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:18:56.813

摆脱`USING(aircraft_id)`，它会导致错误并且您的查询不会执行。

```
"SELECT aircraft_id, aircraft_name AS name, aircraft_type AS type, tail_number AS tn FROM aircraft WHERE aircraft_id = $aid" 
```

我猜这是查询的先前版本的剩余部分？`Using (id)`是一个捷径

```
FROM
foo
INNER JOIN bar ON foo.id = bar.id 
```

当要连接的表在具有相同名称的列上连接时，可以使用它。只是写的更短。

由于您没有加入，因此您必须将其删除。

# c++ - 如何在第 32 周的 Guru 中实现DERR_ENTRY 宏？

> ID：12244968
> 
> 赞同：3
> 
> 时间：2012-09-03T09:11:53.140
> 
> 标签：c++

[在第 32 周的](http://www.gotw.ca/gotw/032.htm)C++ Guru 中（谈到“合法”使用预处理器宏），最后一个示例显示了一个在`DERR_ENTRY`没有任何实际实现的情况下调用的宏：

> DERR_ENTRY 和相关宏的实现留给读者。

这个宏应该替换这个：

```
 // For outsiders:
enum Errors {
  ERR_OK = 0,           // No error
  ERR_INVALID_PARAM = 1 // <description>
  ...
}

// For the module's internal use:
map<Error,const char*> lookup;
lookup.insert( make_pair( Error(0), "No error" ) );
lookup.insert( make_pair( Error(1), "<description>" ) ); 
```

有了这个：（更简单）

```
DERR_ENTRY( ERR_OK,            0, "No error" ),
DERR_ENTRY( ERR_INVALID_PARAM, 1, "<description>" ),
//... 
```

根据 GotW 的作者：

> 我们希望在不定义实际信息（代码/消息对）两次的情况下同时拥有这两种表示形式。使用宏魔法，我们可以简单地编写如下错误列表，在编译时创建适当的结构

但是我看不到同时定义枚举条目和映射条目的简单方法。或者也许有未知的语法我不知道可以解决这个问题？

那么，您将如何实现 DERR_ENTRY 宏？

注意：请记住 GotW #32 应该说明预处理器宏的强大功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:22:57.657

作者可能指的是能够使宏在不同的地方具有不同的含义。在这种情况下，您可以执行以下操作：

**InternalErrorDefinitions.h** （此文件不应包含保护）。

```
DERR_ENTRY( ERR_OK,            0, "No error" )
DERR_ENTRY( ERR_INVALID_PARAM, 1, "<description>" )
... 
```

**Errors.h** （这是模块的外部用户将包含的文件）

```
#define DERR_ENTRY(err, val, desc) err=val,
enum Errors {
#include "InternalErrorDefinitions.h"
};
#undef DERR_ENTRY 
```

**ModuleFile.cpp**（模块的实现文件之一）

```
#define DERR_ENTRY(err, val, desc)  lookup.insert( make_pair( Error(val), desc ) );
map<Error,const char*> lookup;
#include "InternalErrorDefinitions.h"
#undef DERR_ENTRY 
```

这允许您将错误定义仅放在一个位置，同时在使用它们的不同位置赋予它们不同的角色。

这种做法称为[X-Macros](http://en.wikibooks.org/wiki/C_Programming/Preprocessor#X-Macros)。另请参阅[Dobb 博士](http://www.drdobbs.com/the-new-c-x-macros/184401387)解释它们的这篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:18:00.997

```
#define DERR_ENTRY(name, value, desc) \
    Error::DefineValue name(desc, value); 
```

的实现`Error::DefineValue`留给读者。

# android - 在模拟器中找不到安卓应用

> ID：12244971
> 
> 赞同：0
> 
> 时间：2012-09-03T09:12:10.143
> 
> 标签：android, gridview, xml-parsing

现在我正在尝试在 android 中显示 xml 文件中的数据。在项目开发之后，我只是运行项目，我的模拟器正在运行，但我创建的应用程序没有启动。

如何克服这个问题？

**日志猫**

```
[2012-09-03 14:37:28 - GridView_test] Android Launch!
[2012-09-03 14:37:28 - GridView_test] adb is running normally.
[2012-09-03 14:37:28 - GridView_test] No Launcher activity found!
[2012-09-03 14:37:28 - GridView_test] The launch will only sync the application package on the  device!
[2012-09-03 14:37:28 - GridView_test] Performing sync
[2012-09-03 14:37:29 - GridView_test] Automatic Target Mode: using existing emulator 'emulator-5556' running compatible AVD 'Android22-API-8'
[2012-09-03 14:37:29 - GridView_test] Uploading GridView_test.apk onto device 'emulator-5556'
[2012-09-03 14:37:30 - GridView_test] Installing GridView_test.apk...
[2012-09-03 14:37:34 - GridView_test] Success!
[2012-09-03 14:37:34 - GridView_test] \GridView_test\bin\GridView_test.apk installed on device
[2012-09-03 14:37:34 - GridView_test] Done! 
```

提前致谢！..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:18:50.803

您必须更改文件`<intent-filter>`中的主要活动标签`AndroidManifest.xml`。

```
<application android:name="......"
android:icon="@drawable/app_icon"
android:label="@string/app_name" >
    <activity android:name=".yourActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

意味着，你必须改变你的活动`<action>`和`<category>`

看看[这里](https://stackoverflow.com/a/12215555/940096)了解更多。

# asp.net-mvc - .Net Charting 访问在另一个会话中生成的图像

> ID：12244976
> 
> 赞同：0
> 
> 时间：2012-09-03T09:12:41.610
> 
> 标签：asp.net-mvc, charts, mschart

我有一个要求，我需要在另一个会话中访问在一个会话中生成的图表。

为了解释，进程 A 生成一些 HTML，其中包含一个带有图像 url /ChartImg.axd?i=chart_0_0.png&g=a40f233f40fb4995b737d284f83ab1b7 的图表

我有 deleteAfterServicing=false 和 dir=c:\，如果我查看 c:\chart_0_0.png 就在那里。

现在进程 B（因此在其自己的会话中运行）出现打开 HTML 文件，图表 404，因为（似乎）图像处理程序将只允许从创建它的会话访问该图表。

有没有办法禁用这种行为？

我期待着您的回复

卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:40:17.410

好的，所以我通过执行以下操作解决了它：

```
 Public Overrides Sub RenderControl(writer As System.Web.UI.HtmlTextWriter)

        If Me.RenderToFile Then
            'Save it to a file first
            Me.SaveImage(HttpContext.Current.Server.MapPath(RenderToFileLocation),
                         ChartImageFormat.Png)
            'Return the image urn
            writer.Write("<img src=""" & Url.Content(ConfigurationManager.AppSettings("ChartFilePath")) & "?c=" & Url.Content(RenderToFileLocation) & """ />")
        Else
            MyBase.RenderControl(writer)
        End If
    End Sub 
```

然后从那里创建了一个简单的 .net MVC 处理程序，它返回文件并将其删除 Function Index(ByVal c As String) As ActionResult

```
 Dim dir = Server.MapPath(ConfigurationManager.AppSettings("ChartFilePath"))
        Dim filepath = System.IO.Path.Combine(dir, c)
        Index = MyBase.File(filepath, "image/png")

        'Delete the file
        Try
            IO.File.Delete(filepath)
        Catch ex As Exception

        End Try
    End Function 
```

# module - 将内核模块构建到特定目录中

> ID：12244979
> 
> 赞同：3
> 
> 时间：2012-09-03T09:12:45.103
> 
> 标签：module, makefile, kernel

有没有办法在我的makefile中设置一个输出目录来制作内核模块？

我想从构建文件中保持我的源目录干净。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-31T00:12:08.073

`KBUILD_OUTPUT`并`O=`没有为我工作，并且在外部构建时未能找到内核头文件。我的解决方案是将源文件符号链接到 bin 目录中，并在 bin 目录中动态生成一个新的 MakeFile。这允许轻松清理所有构建文件，因为动态 Makefile 总是可以重新创建。

```
INCLUDE=include
SOURCE=src
TARGET=mymodule
OUTPUT=bin
EXPORT=package

SOURCES=$(wildcard $(SOURCE)/*.c)

# Depends on bin/include bin/*.c and bin/Makefile
all: $(OUTPUT)/$(INCLUDE) $(subst $(SOURCE),$(OUTPUT),$(SOURCES)) $(OUTPUT)/Makefile
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD)/$(OUTPUT) modules

# Create a symlink from src to bin
$(OUTPUT)/%: $(SOURCE)/%
    ln -s ../$< $@

# Generate a Makefile with the needed obj-m and mymodule-objs set
$(OUTPUT)/Makefile:
    echo "obj-m += $(TARGET).o\n$(TARGET)-objs := $(subst $(TARGET).o,, $(subst .c,.o,$(subst $(SOURCE)/,,$(SOURCES))))" > $@

clean:
    rm -rf $(OUTPUT)
    mkdir $(OUTPUT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:06:56.070

如果您在内核树中构建，则可以使用该`O`变量：

```
make O=/path/to/mydir 
```

如果您在内核树（模块或任何其他类型的程序）之外进行编译，则需要将您`Makefile`的输出更改为不同的目录。这是一个在`MY_DIR`目录中输出的 Makefile 规则的小例子：

```
$(MY_DIR)/test: test.c
    gcc -o $@ $< 
```

然后写：

```
$ make MY_DIR=/path/to/build/directory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-23T15:38:03.320

这里也一样，但我使用了一个对我有用的解决方法：

1.  为每个架构名称创建一个子目录（例如“debug_64”）。
2.  在“debug_64”下：创建所有 .c 和 .h 文件的符号链接。保持相同的结构。
3.  将 makefile 复制到“debug_64”并为 64 Debug 构建设置正确的标志，例如

```
ccflags-y := -DCRONO_DEBUG_ENABLED 
ccflags-y += -I$(src)/../../../lib/include 
KBUILD_AFLAGS += -march=x86_64 
```

4.  请记住将相对目录路径设置为下一级，例如`../inc`will be `../../inc`。
5.  对每个拱门/轮廓重复相同的操作。现在我们有了一个源代码、不同的文件夹和不同的 make 文件。顺便说一句，在内核模块构建的 make 文件中创建配置文件并不是一件容易的工作，所以，我更喜欢为每个 arch 创建一个 makefile 的副本。

# javascript - 页面加载后如何禁用下拉列表框项目的选择？

> ID：12244980
> 
> 赞同：1
> 
> 时间：2012-09-03T09:12:53.093
> 
> 标签：javascript, asp.net, drop-down-menu

基于下拉列表框的第一个输入，第二个下拉列表框应该启用选择

已使用以下 javascript 来禁用项目的选择。

```
function close_other_box(box){
    if(box.id="dropdown1" && box.selectedIndex<2){
        document.getElementById('dropdown2').value="Select"
        document.getElementById('dropdown2').disabled=true
    } else {
        document.getElementById('dropdown2').disabled=false
    }
} 
```

当我运行页面“dropdown2”时没有被禁用，在我在第一个“dropdown1”上做出选择后，只有 dropdown2 被禁用.....

我需要的是，

加载页面时，我需要禁用 dropdown2 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:19:42.257

采用`window.onload`

```
window.onload = function () {
    document.getElementById('dropdown2').disabled=true;
} 
```

这是[JSFiddle](http://jsfiddle.net/Hy5Dz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:21:14.347

您可以在 Body 的 Onload 事件上调用 Disable 函数，如下所示...

```
 <script>
    function disablesecondDropDown(){
    document.getElementById('dropdown2').value="Select";
    document.getElementById('dropdown2').disabled=true;
    }
    </script> 
```

**在 HTML 中：-**

```
<body onload="disablesecondDropDown()"> 
```

# html5-video - 我们可以在 Dolphin 浏览器上制作 HTML5 视频全屏吗

> ID：12244981
> 
> 赞同：0
> 
> 时间：2012-09-03T09:12:55.473
> 
> 标签：html5-video, dolphin-browser

我测试了[**HTML5 视频播放器**](http://videojs.com/)，它可以在 Android Chrome 浏览器上全屏播放 HTML5 视频，但在 Dolphin 浏览器上不行。

有人知道在**Dolphin 浏览器**上制作 HTML5 视频全屏的方法是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:54:30.093

测试[**jplayer**](http://jplayer.org/)可以全屏制作 HTML5 视频，曾经在 Android 4.x 默认浏览器和 Dolphin 浏览器中，配置参考以下代码：

```
$("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                m4v: "demo.m4v"
            });
        },
        swfPath: "js",
        supplied: "webmv, ogv, m4v",
        fullScreen: true
    }); 
```

# php - 在 PHP 提交时从 URL 发送 XML

> ID：12244989
> 
> 赞同：3
> 
> 时间：2012-09-03T09:13:23.827
> 
> 标签：php, xml, curl, xml-parsing

让我们想象一下以下情况：

您有一个带有 html 表单的简单 php 页面，允许用户输入以下数据：

*   电话号码
*   短信

如：

```
<form action="xml-file.xml" method="get">
   <input type="text" id="to" name="to" value="" />
   <input type="text" id="text" name="text" value="" />
   <input type="submit" />
</form> 
```

[现在，您使用我已经测试过并且可以正常工作的这种](https://stackoverflow.com/questions/11667568/sending-xml-file-through-php-remote-url)方法创建了一个 XML ，然后您想使用[这种其他](https://stackoverflow.com/a/3843608/1004619)方法 (CURL) 通过 URL 发送它。

不幸的是，我无法使用 CURL 方法，因为我无法链接提交操作来创建 XML 并将其发送到 URL，因此它会转到本地服务器 (www.example.xxx:1234) 并随后处理用于发送 SMS 的 XML。

如果 XML 的格式正确，则该服务器会发送响应。因此，我的问题在于提交创建的 XML。

帮助？

*更新 1*：添加更新的代码。这允许我（在 sms.xml 文件上使用 chmod 777）随意编辑 xml 文件。

**索引.php**

```
<html>
...
<form action="send.php" method="get">
   <input type="text" id="to" name="to" value="" />
   <input type="text" id="text" name="text" value="" />
   <input type="submit">
</form>
...
</html> 
```

**发送.php**

```
<?php
  $xml = simplexml_load_file("sms.xml");          // Load XML file
  $xml->Title3 = $_GET['to'];                         // Updating <Title3> from GET method
  $xml->Title5[0]->Title51Content = $_GET['text'];      // Updating <Title51> from GET method
  $xml->asXML('sms.xml');                         // Saving the XML file
?> 
```

**短信.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<Title1>
   <Title2>Some Text</Title2>
   <Title3>Variable 1</Title3>
   <Title4>Some Text</Title4>
   <Title5>
      <Title51>Variable 2</Title51>
   </Title5>
</Title1> 
```

旁注：发送时，XML 应该具有`"Content-Type","application/x-www-form-urlencoded"`用于​​返回如下内容的标头：

```
XML=%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E%0A%3... 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:59:17.697

将 XML 作为字符串返回并发布？

```
...
$xml_post_string = 'XML='.urlencode($xml->asXML());  

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, 'http://theurl.com');
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_post_string);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($ch);
curl_close($ch);
... 
```

# teamcity - 来自数据库的参数选择值

> ID：12244993
> 
> 赞同：1
> 
> 时间：2012-09-03T09:13:48.063
> 
> 标签：teamcity, parameter-passing

在 TC 中，可以创建参数化构建，这些构建参数可以使用选择框。

我正在寻找一种方法来动态填充可以选择的值。最好的情况是我可以定义一个查询（与 TC 服务器相同的数据库）并获取值，但我也很高兴通过使用环境变量或包含这些值的文件来看到某种解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:46:41.477

As of TeamCity 7.1 this is not possible. You can define parameters and use have them in a select (or multi-select) list but the values must be defined in advance at configuration time not at build time.

You can access and change build parameters from the [TeamCity REST API](http://confluence.jetbrains.net/display/TW/REST+API+Plugin#RESTAPIPlugin-BuildConfigurationAndTemplateSettings) but it only allows you to change the default value, not the available options in the select list. Maybe a future version of the REST API will enable this.

# android - 如何将颜色设置为进度条中的辅助可绘制对象

> ID：12244994
> 
> 赞同：1
> 
> 时间：2012-09-03T09:13:50.067
> 
> 标签：android, colors, progress-bar, drawable

我有这个代码

```
 pb = (ProgressBar) findViewById(R.id.progressBar1);
    final float[] roundedCorners = new float[] { 5, 5, 5, 5, 5, 5, 5, 5 };
    ShapeDrawable pgDrawable = new ShapeDrawable(new RoundRectShape(roundedCorners, null, null));
    String MyColor = "#00FF00";
    pgDrawable.getPaint().setColor(Color.parseColor(MyColor));
    ClipDrawable progress = new ClipDrawable(pgDrawable, Gravity.LEFT, ClipDrawable.HORIZONTAL);
    pb.setProgressDrawable(progress);
    pb.setBackgroundDrawable(getResources().getDrawable(android.R.drawable.progress_horizontal)); 
```

此代码中的问题是，对于可绘制的进度和可绘制的次要进度，我具有相同的颜色。

如何设置次要进度颜色？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T09:19:08.040

在下面的示例中指定一个`progressDrawable`like：

这是一个布局：

```
<ProgressBar
    android:id="@+id/gauge"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="wrap_content"
    android:layout_height="4dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/section"
    android:progress="50" 
    android:progressDrawable="@drawable/progressbar"/> 
```

这转到`drawable/progressbar.xml`，在这里您可以为两个进度条指定背景和颜色。

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@android:id/background">
    <shape>
        <gradient
                android:startColor="@color/basecolor"
                android:endColor="@color/basecolor"
                android:angle="270"
        />
    </shape>
</item>

<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <gradient
                    android:startColor="#808080"
                    android:endColor="#808080"
                    android:angle="270"
            />
        </shape>
    </clip>
</item>
<item android:id="@android:id/progress">
    <clip>
        <shape>
            <gradient
                android:startColor="#ffcc33"
                android:endColor="#ffcc33"
                android:angle="270" />
        </shape>
    </clip>
</item> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-26T08:41:17.703

我也面临同样的问题。我在上面的答案中添加了一些额外的点。搜索栏或进度条分三层绘制。第一层是背景层，在该次要进度层之上，在该主要进度之上。

您可以像这样将自定义颜色设置为进度条

```
<item android:id="@android:id/background"
    android:drawable="@drawable/progress_bar_nor">       
</item>    
<item android:id="@android:id/secondaryProgress"
    android:drawable="@drawable/progress_bar_nor">       
</item>
<item
    android:id="@android:id/progress"
    android:drawable="@drawable/progress_bar_sel"/> 
```

或像 Ridcully 在上面的答案中所说的那样

碰巧有些android os版本不使用二次进度的背景色。我已经检查了 android 4.1.2 三星 8 英寸平板电脑。这没用。在这种情况下，使用背景通过设置背景、次要进度颜色来为次要进度设置自定义颜色

# php - Magento 重写发票 PDF 模型

> ID：12244997
> 
> 赞同：0
> 
> 时间：2012-09-03T09:13:55.167
> 
> 标签：php, magento, pdf-generation

我正在覆盖 pdf 发票模型以在 pdf 的页脚中添加一些文本。当我从后端打印发票时，会显示奇怪的字符。![在此处输入图像描述](../Images/d4c0384a24523c467cb5ae9b131eae58.png)

应用程序/代码/本地/公司/发票/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Company_Invoice>
            <version>0.1.0</version>
        </Company_Invoice>
    </modules>
    <global>
        <models>
            <sales>
                <rewrite>
                    <order_pdf_invoice>Company_Invoice_Model_Order_Pdf_Invoice</order_pdf_invoice>
                </rewrite>
            </sales>
        </models>
    </global>
</config> 
```

app/code/local/Company/Invoice/Model/Order/Pdf/Invoice.php [http://pastebin.com/VQaWr0Xg](http://pastebin.com/VQaWr0Xg)

如果此模块被禁用，默认 Magento 会正确打印发票。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:26:09.893

看起来您在某处包含了 var_dump() 语句。尝试在您的代码库中搜索是否出现 var_dump() 并将其删除。

# html - 将 UIIMage 传递给 html？

> ID：12244998
> 
> 赞同：0
> 
> 时间：2012-09-03T09:13:56.477
> 
> 标签：html, objective-c, ios, xcode, image

我正在使用 imagepickercontroller 从 iphone 相机拍摄图像。拿到它后，我需要将此图像传递给 html 模板。如何将 UIImage 直接传递给 html 而不保存在文档目录中。是否需要进行任何转换才能在 html 中显示 UIImage。