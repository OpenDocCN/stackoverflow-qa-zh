# StackOverflow 问答 10758000-10758999

# python - Variable changes for unknown reason

> ID：10758000
> 
> 赞同：0
> 
> 时间：2012-05-25T16:19:19.467
> 
> 标签：python, python-3.x

```
#it's python 3.2.3
class point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __eq__(self, point):
        return self.x == point.x and self.y == point.y

    def __str__(self):
        return 'point(%s, %s)' % (self.x, self.y)

def someFunc(point):
    if point.x > 14: point.x = 14
    elif point.x < 0: point.x = 0

    if point.y > 14: point.y = 14
    elif point.y < 0: point.y = 0

    return point

somePoint = point(-1, -1)
print('ONE: %s' % somePoint)
if somePoint == someFunc(somePoint):
    print('TWO: %s' % somePoint) 
```

I see that there is no **somePoint** variable assignment after first **print()** but variable **somePoint** magically changes after **if** statement

Output of this program should be

```
ONE: point(-1, -1) 
```

But it is

```
ONE: point(-1, -1)
TWO: point(0, 0) 
```

Could anybody explain me why somePoint changes after

```
if somePoint == someFunc(somePoint): 
```

condition?

p.s. sorry if my english is bad

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T16:22:17.473

`point`当您在 if 语句中调用内部函数时，您会更改内部函数的值`someFunc`，所以我希望最后的值是 (0,0)。原因是您将引用（或“传递对象共享”）传递给函数，并且稍后会反映对它的任何更改。这与按值传递的方法不同，它会自动生成本地副本。

为避免更改`point`传入的原始变量，您可以在`someFunc`.

像这样的东西：

```
def someFunc(a_point): # note new parameter name

    loc_point = point(a_point.x, a_point.y)  # new local point

    if loc_point.x > 14: loc_point.x = 14
    elif loc_point.x < 0: loc_point.x = 0

    if loc_point.y > 14: loc_point.y = 14
    elif loc_point.y < 0: loc_point.y = 0

    return loc_point 
```

此外，*最好不要*`point`同时*引用*您的类和参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:32:12.270

调用`someFunc()`使用按引用语义，因此它修改的对象正是您调用它的对象。您似乎期待按值语义，其中函数获取它传递的对象的副本。

# c# - How to call Bing Translate function in C#?

> ID：10758004
> 
> 赞同：0
> 
> 时间：2012-05-25T16:19:34.197
> 
> 标签：c#, translation, windows-runtime, bing

I wrote a metro style application to call bing translator, but it didnt work. I tried to debug this program, but the UI does not respond. I can't figure if it is the URI I am using, or some other problem.

Here my code :

```
public string GetTranslatedText(string textToTranslate, string fromLang, string toLang)
{
    string translation;

    if (fromLang != toLang)
    {
        string uri = "http://api.microsofttranslator.com/v2/Http.svc/Translate?appId=" +
                    appID + "&text=" + textToTranslate + "&from=" + fromLang + "&to=" + toLang;

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);

        try
        {
            WebResponse response = request.GetResponse();
            Stream strm = response.GetResponseStream();
            StreamReader sr = new StreamReader(strm);
            translation = sr.ReadToEnd();

            response.Close();
            sr.Close();
        }
        catch (WebException)
        {
            MessageBox.Show("Ensure that you are connected to the internet.",
                        "Translator", MessageBoxButton.OK, MessageBoxImage.Stop);
            return (string.Empty);
        }
    }
    else
    {
        MessageBox.Show("Will not translate to the same language.", "Translator",
                    MessageBoxButton.OK, MessageBoxImage.Exclamation);
        return (string.Empty);
    }

    // Parse string into an XElement and get the XElement Value
    // which is returned as the translated text.
    return (XElement.Parse(translation).Value);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:11:01.317

自四月起，您还需要一个访问令牌

[http://msdn.microsoft.com/en-us/library/hh454950.aspx](http://msdn.microsoft.com/en-us/library/hh454950.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T07:56:14.217

您需要发送请求到
**[https://api.microsofttranslator.com/v2/ajax.svc/TranslateArray2](https://api.microsofttranslator.com/v2/ajax.svc/TranslateArray2)**
而不是
**[http://api.microsofttranslator.com/v2/Http.svc/Translate](http://api.microsofttranslator.com/v2/Http.svc/Translate)**

# c++ - 默认 TreeView 项目高度

> ID：10758008
> 
> 赞同：1
> 
> 时间：2012-05-25T16:19:57.313
> 
> 标签：c++, winapi, visual-c++, mfc, treeview

在我的程序中，有两个控件 - 本机 TreeView 和托管 DataGridView。我想`RowsHeight`用 TreeView 项目高度设置 DataGridView 的属性，但不幸的是，TreeView 没有检索高度的选项。然后我尝试使用`GetTextMetric`函数并将值设置`RowsHeight`为`tmHeight`。不幸的是，它仍然不起作用 - DataGridView 项的高度大于 TreeView 项的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:29:12.403

向控件发送[`TVM_GETITEMHEIGHT`消息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773599.aspx)以获取项目高度。

# variables - 以路径为变量的 Export-CSV

> ID：10758013
> 
> 赞同：2
> 
> 时间：2012-05-25T16:20:12.807
> 
> 标签：variables, powershell, export-to-csv

我有一个脚本，它基本上写下远程共享上的每个文件和文件夹并将其转储到 csv。除了最后一部分，一切都运行得很好（脚本本身还有很多工作要做）。

```
Import-Csv -Path ($savelocation + '\' + $filename) -Delimiter ',' | ForEach-Object {
    if ($audioarray -contains $_.Extension) {
        $_.MediaType = 'Audio'
        $_
    } elseif ($videoarray -contains $_.Extension) {
        $_.MediaType = 'Video'
        $_
    } elseif ($otherarray -contains $_.Extension) {
        $_.MediaType = 'Other'
        $_
    } else {
        $_
    }
} | Export-Csv -Path ($savelocation + '\' + $filename) -Force -Delimiter ',' -NoTypeInformation 
```

如果我将路径更改为静态位置，`\\servername\share\testfolder`则可以正常工作。但是，如果我使用上面的方法，或者即使我加入了`($savelocation + '\' + $filename)`类似的东西，`$filename`它仍然只是写一个空文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:31:09.337

抱歉，它不适用于任何路径。原因很简单——你读/写同一个文件。*如果您读入变量并处理内存中的数据，它将*起作用。

IMO 具有存储在变量中的路径（元素）与它无关。顺便说一句：您可以使用 Join-Path cmdlet 加入路径... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-08T15:22:28.700

如果您将路径放在可验证的位置，它将起作用

```
$path = $savelocation + '\' + $filename
Export-Csv -Path $path -Force -Delimiter ',' -NoTypeInformation 
```

# silverlight - 序列化 Silverlight XML UIElement

> ID：10758016
> 
> 赞同：0
> 
> 时间：2012-05-25T16:20:30.530
> 
> 标签：silverlight, serialization, uielement

我正在努力实现这个目标：将 Silverlight 应用程序的状态保存到`isolateduserstorage`，以便在下次启动时重新加载它。我需要存储 a `List ObservableCollection<UIElement>`，`UIElements`它们是由工厂创建的（实际上我正在`Shapes`那里创建）。

问题是，这`Serialization`会引发异常（您将在下面找到）。我知道问题可能是什么（`Serialization`不知道如何存储`UIElements`（？）），但是，我不知道如何解决这个问题。

例外：

```
System.InvalidOperationException was unhandled by user code
  Message=There was an error generating the XML document.
  StackTrace:
       bei System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
       bei System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle)
       bei System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces)
       bei System.Xml.Serialization.XmlSerializer.Serialize(Stream stream, Object o, XmlSerializerNamespaces namespaces)
       bei System.Xml.Serialization.XmlSerializer.Serialize(Stream stream, Object o)
       bei Dojo_2_wi10b012.ViewModel.ViewModel.StoreContent()
       bei Dojo_2_wi10b012.ViewModel.RelayCommand.Execute(Object parameter)
       bei System.Windows.Controls.Primitives.ButtonBase.ExecuteCommand()
       bei System.Windows.Controls.Primitives.ButtonBase.OnClick()
       bei System.Windows.Controls.Button.OnClick()
       bei System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
       bei System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)
       bei MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags)
  InnerException: System.InvalidOperationException
       Message=The type System.Windows.Shapes.Ellipse was not expected. Use the XmlInclude attribute to specify types that are not known statically.
       StackTrace:
            bei Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterObservableCollection1.Write12_UIElement(String n, String ns, UIElement o, Boolean isNullable, Boolean needType)
            bei Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterObservableCollection1.Write13_ArrayOfUIElement(Object o)
       InnerException: 
```

ViewModel：（重要部分是方法“StoreContent()”）

```
using System;
using System.Net;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Dojo_2_wi10b012.Model;
using System.ComponentModel;
using System.Reflection;
using System.IO.IsolatedStorage;
using System.IO;
using System.Xml.Serialization;

namespace Dojo_2_wi10b012.ViewModel
{
    public class ViewModel : INotifyPropertyChanged
    {
        private List<UIElement> _shapeList = new List<UIElement>();
        private ShapeFactory theFactory = new ShapeFactory();
        private ObservableCollection<UIElement> _elements = new ObservableCollection<UIElement>();
        private UIElement _selectedItem ;
        private UIElement _alteredSelectedItem;
        private ObservableCollection<KeyValuePair<string, Color>> _theColors = new ObservableCollection<KeyValuePair<string, Color>>();
        private KeyValuePair<string, Color> _selectedBrush = new KeyValuePair<string, Color>();
        private KeyValuePair<string, Color> _selectedStroke = new KeyValuePair<string, Color>();
        private SolidColorBrush _selectedBrushBrush = new SolidColorBrush();
        private SolidColorBrush _selectedStrokeBrush = new SolidColorBrush();
        private int _heightText;
        private int _widthText;
        private string filename = "uielements"; //for isolatedstorage         

        #region EventHandler
        public event PropertyChangedEventHandler PropertyChanged;

        protected void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        #endregion

        public ViewModel()
        {
            GetShapesCommand = new RelayCommand(GetShapes);
            GetShapesCommand.IsEnabled = true;
            LoadColors();
            ChangeShapeCommand = new RelayCommand(ChangeShape);
            ChangeShapeCommand.IsEnabled = true;
            StoreContentCommand = new RelayCommand(StoreContent);
            StoreContentCommand.IsEnabled = true;
        }

        #region properties

        public int HeightText
        {
            get { return _heightText; }
            set
            {
                _heightText = value;
                NotifyPropertyChanged("HeightText");
            }
        }

        public int WidthText
        {
            get { return _widthText; }
            set
            {
                _widthText = value;
                NotifyPropertyChanged("WidthText");
            }
        }

        public SolidColorBrush SelectedBrushBrush
        {
            get { return _selectedBrushBrush; }
            set
            {
                _selectedBrushBrush = value;
                NotifyPropertyChanged("SelectedBrushBrush");
            }
        }

        public SolidColorBrush SelectedStrokeBrush
        {
            get { return _selectedStrokeBrush; }
            set
            {
                _selectedStrokeBrush = value;
                NotifyPropertyChanged("SelectedStrokeBrush");
            }
        }

        public KeyValuePair<string, Color> SelectedBrush
        {
            get { return _selectedBrush; }
            set
            {
                _selectedBrush = value;
                NotifyPropertyChanged("SelectedBrush");
                SelectedBrushBrush = new SolidColorBrush(value.Value);
            }
        }

        public KeyValuePair<string, Color> SelectedStroke
        {
            get { return _selectedStroke; }
            set
            {
                _selectedStroke = value;
                NotifyPropertyChanged("SelectedStroke");
                SelectedStrokeBrush = new SolidColorBrush(value.Value);
            }
        }

        public ObservableCollection<KeyValuePair<string, Color>> TheColors
        {
            get { return _theColors; }
            set 
            { 
                _theColors = value;
                NotifyPropertyChanged("TheColors");
            }
        }

        public List<UIElement> ShapeList
        {
            get { return _shapeList; }
            set
            {
                _shapeList = value;
                NotifyPropertyChanged("ShapeList");
            }
        }

        public ObservableCollection<UIElement> Elements
        {
            get { return _elements; }
            set 
            { 
                _elements = value;
                NotifyPropertyChanged("Elements");
            }
        }

        public UIElement SelectedItem
        {
            get { return _selectedItem; }
            set
            {
                _selectedItem = value;
                NotifyPropertyChanged("SelectedItem");
            }
        }

        public UIElement AlteredSelectedItem
        {
            get { return _alteredSelectedItem; }
            set
            {
                _alteredSelectedItem = value;
                NotifyPropertyChanged("AlteredSelectedItem");
            }
        }

        public RelayCommand GetShapesCommand { get; private set; }
        public RelayCommand ChangeShapeCommand { get; private set; }
        public RelayCommand StoreContentCommand { get; private set; }

        #endregion

        #region PrivateMethods
        private void GetShapes()
        {
            UIElement temp = theFactory.ProduceShape();
            temp.MouseLeftButtonDown += Handle_MouseDown;
            temp.MouseMove += Handle_MouseMove;
            temp.MouseLeftButtonUp += Handle_MouseUp;
            temp.MouseRightButtonDown += Handle_RightMouseDown;
            ShapeList.Add(temp); //add the new shape to the list where we store the shapes
            Elements.Add(temp);
        }

        private void ChangeShape()
        {
            AlteredSelectedItem = SelectedItem;
            Shape temp = FigureOutShape(AlteredSelectedItem);
            double debugheight = temp.Height;
            double debugwidth = temp.Width;
            temp.Height = HeightText;
            temp.Width = WidthText;
            temp.Fill = SelectedBrushBrush;
            temp.Stroke = SelectedStrokeBrush;
            SelectedItem = (UIElement)temp;
        }

        private Shape FigureOutShape(UIElement input)
        {
            if (input != null)
            {
                if (input is Ellipse)
                {
                    return (Ellipse)input;
                }
                else { return (Rectangle)input; }
            }
            else //default if the user hasn't selected a shape
                return new Ellipse()
                {
                    Width = 25,
                    Height = 25,
                    Stroke = new SolidColorBrush(Colors.Green),
                    Fill = new SolidColorBrush(Colors.DarkGray),
                    StrokeThickness = 2,
                    Visibility = Visibility.Visible,
                    Cursor= Cursors.Hand,
                    Margin = new Thickness(25, 30, 0, 0) //define initial position on canvas randomly
                };
        }

        private void StoreContent()
        {
            //Hint from Mr. Eckkrammer (wiki):
            using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
            {
                IsolatedStorageFileStream isoRegisterFileStream;

                isoRegisterFileStream = new IsolatedStorageFileStream(filename, FileMode.Create, isf);

                XmlSerializer serializer = new XmlSerializer(Elements.GetType());

                serializer.Serialize(isoRegisterFileStream, Elements);

                //close file stream
                isoRegisterFileStream.Close();
            }

        }

        private void LoadContent()
        {
            /*
            try
            {
            Elements as ObservableCollection<UIElement> = IsolatedStorageSettings.ApplicationSettings(filename);
            }
            catch
            {
            //no idea what to do here...
            }
            */
            using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream isfs = new IsolatedStorageFileStream(filename, FileMode.Open, isf))
                {
                    using (StreamReader sr = new StreamReader(isfs))
                    {

                        // string lineOfData = String.Empty;
                        // while ((lineOfData = sr.ReadLine()) != null)
                        // data += lineOfData;

                        //no idea what to do here...

                    }
                }
            }

        }

        //when the user right clicks a shape, the "selectedItem" will  be updated
        private void Handle_RightMouseDown(object sender, MouseEventArgs args)
        {
            UIElement item = sender as UIElement;
            SelectedItem = item;
        }

        private void LoadColors()
        {
            //unfortunately I have no idea how to do the following automatically, so I need to do it by hand :-(
            TheColors.Add(new KeyValuePair<string,Color>("Black",Colors.Black));
            TheColors.Add(new KeyValuePair<string,Color>("Blue",Colors.Blue));
            TheColors.Add(new KeyValuePair<string,Color>("Brown",Colors.Brown));
            TheColors.Add(new KeyValuePair<string,Color>("Cyan",Colors.Cyan));
            TheColors.Add(new KeyValuePair<string,Color>("DarkGray",Colors.DarkGray));
            TheColors.Add(new KeyValuePair<string,Color>("Gray",Colors.Gray));
            TheColors.Add(new KeyValuePair<string,Color>("Green",Colors.Green));
            TheColors.Add(new KeyValuePair<string, Color>("LightGray", Colors.LightGray));
            TheColors.Add(new KeyValuePair<string,Color>("Magenta",Colors.Magenta));
            TheColors.Add(new KeyValuePair<string,Color>("Orange",Colors.Orange));
            TheColors.Add(new KeyValuePair<string,Color>("Purple",Colors.Purple));
            TheColors.Add(new KeyValuePair<string,Color>("Red",Colors.Red));
            TheColors.Add(new KeyValuePair<string,Color>("White",Colors.White));
            TheColors.Add(new KeyValuePair<string,Color>("Yellow",Colors.Yellow));
        }
        #endregion

        #region DragAndDropImplementation

        private bool isMouseCaptured;
        private double mouseVerticalPosition;
        private double mouseHorizontalPosition;

        private void Handle_MouseDown(object sender, MouseEventArgs args)
        {
            UIElement item = sender as UIElement;
            mouseVerticalPosition = args.GetPosition(null).Y;
            mouseHorizontalPosition = args.GetPosition(null).X;
            isMouseCaptured = true;
            item.CaptureMouse();
        }

        private void Handle_MouseMove(object sender, MouseEventArgs args)
        {
            UIElement item = sender as UIElement;
            if (isMouseCaptured)
            {

                // Calculate the current position of the object.
                double deltaV = args.GetPosition(null).Y - mouseVerticalPosition;
                double deltaH = args.GetPosition(null).X - mouseHorizontalPosition;
                double newTop = deltaV + (double)item.GetValue(Canvas.TopProperty);
                double newLeft = deltaH + (double)item.GetValue(Canvas.LeftProperty);

                // Set new position of object.
                item.SetValue(Canvas.TopProperty, newTop);
                item.SetValue(Canvas.LeftProperty, newLeft);

                // Update position global variables.
                mouseVerticalPosition = args.GetPosition(null).Y;
                mouseHorizontalPosition = args.GetPosition(null).X;
            }
        }

        private void Handle_MouseUp(object sender, MouseEventArgs args)
        {
            UIElement item = sender as UIElement;
            isMouseCaptured = false;
            item.ReleaseMouseCapture();
            mouseVerticalPosition = -1;
            mouseHorizontalPosition = -1;
        }
        #endregion
    }
} 
```

形状工厂.cs：

```
namespace Dojo_2_wi10b012.Model
{
    public class ShapeFactory
    {
        Random ran;
        Random xy;
        int thick = 5;
        public ShapeFactory()
        {
            ran = new Random();
            xy = new Random();
        }

        public Shape ProduceShape()
        {
            int guess = ran.Next(0, 4);
            int height = ran.Next(20, 80);
            int width = ran.Next(20, 80);
            int x = xy.Next(0,300);
            int y = xy.Next(25,300);

            if (guess == 0)//Ellipse
                return new Ellipse()
                {
                    Width = height,
                    Height = width,
                    Stroke = new SolidColorBrush(Colors.Green),
                    Fill = new SolidColorBrush(Colors.DarkGray),
                    StrokeThickness = thick,
                    Visibility = Visibility.Visible,
                    Cursor= Cursors.Hand,
                    Margin = new Thickness(x, y, 0, 0) //define initial position on canvas randomly
                };
            else if (guess == 1) //Rectangle
                return new Rectangle()
                {
                    Width = height,
                    Height = width,
                    Stroke = new SolidColorBrush(Colors.Brown),
                    Fill = new SolidColorBrush(Colors.LightGray),
                    StrokeThickness = thick,
                    Visibility = Visibility.Visible,
                    Cursor = Cursors.Hand,
                    Margin = new Thickness(x, y, 0, 0) //define initial position on canvas randomly
                };
            else if (guess == 2) //Square
                return new Ellipse()
                {
                    Width = height,
                    Height = height,
                    Stroke = new SolidColorBrush(Colors.Red),
                    StrokeThickness = thick,
                    Fill = new SolidColorBrush(Colors.Orange),
                    Visibility = Visibility.Visible,
                    Cursor = Cursors.Hand,
                    Margin = new Thickness(x, y, 0, 0) //define initial position on canvas randomly
                };
            else //Circle
                return new Rectangle()
                {
                    Width = height,
                    Height = height,
                    Stroke = new SolidColorBrush(Colors.Blue),
                    StrokeThickness = thick,
                    Fill = new SolidColorBrush(Colors.Cyan),
                    Visibility = Visibility.Visible,
                    Cursor = Cursors.Hand,                    
                    Margin = new Thickness(x, y, 0, 0) //define initial position on canvas randomly
                };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:22:02.670

`UIElement`不支持序列化，您必须将其序列化为 XML 作为字符串，将其保存到隔离存储或 DB，将其从 XML 反序列化回视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T22:58:06.490

您是否尝试过使用 Xaml 序列化服务？如果您要对 xaml 内容进行反序列化/序列化，最好使用这些内容而不是常规的 xml 序列化。[这篇](http://www.davidpoll.com/2010/07/25/to-xaml-with-love-an-experiment-with-xaml-serialization-in-silverlight/)博文描述了这一切。

# python - 如何在一组字符串中找到所有常见字母？

> ID：10758017
> 
> 赞同：-1
> 
> 时间：2012-05-25T16:20:34.333
> 
> 标签：python

我编写了代码来查找 3 个给定字符串的所有常见字母。不幸的是，有一些错误，我找不到。如果你们中的某个人能告诉我这样的代码是什么样的，我将不胜感激。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T16:25:02.770

```
def commonLetters(*strings):
    return set.intersection(*map(set,strings)) 
```

演示：

```
>>> commonLetters('abcdef', 'defg', 'def', 'ef')
{'e', 'f'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:53:34.737

Python 旨在使事情变得简单易读，并为大多数功能提供标准库——这就是它“包含电池”的原因。做你想做的事情的 Pythonic 方法是设置交叉点。

```
>>> a = 'foobar'
>>> b = 'bar'
>>> c = 'barbaz'
>>> common_letters = set(a) & set(b) & set(c)
>>> print( list(common_letters) )
['a', 'r', 'b'] 
```

当然还有其他方法可以构建集合，但 KISS 原则绝对适用于此。

# .net - 使用 C# 将图像上传到 Facebook

> ID：10758018
> 
> 赞同：0
> 
> 时间：2012-05-25T16:20:42.960
> 
> 标签：.net, facebook, c#-4.0, facebook-c#-sdk

我正在使用 C# 开发应用程序。我的要求是将照片上传到 Facebook 用户的个人资料中。

我使用了*[Facebook Album](http://facebooksdk.blogspot.in/2011/04/facebook-album.html)*文章中的库，但该方法要求访问令牌。如何从 Facebook 获取访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:46:44.120

阅读此[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)。

还要阅读你的图书馆的文档，他们必须有一些方法来做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:48:24.480

In the blog post you mentioned, there is a link how to get the access token, *[FacebookLoginHelper](http://facebooksdk.blogspot.com/2011/03/facebookloginhelper.html)*.

# hibernate - 如何应用 @InitBinder 来保护 Spring MVC、Hibernate 应用程序中的 @Version 字段？

> ID：10758024
> 
> 赞同：0
> 
> 时间：2012-05-25T16:21:23.930
> 
> 标签：hibernate, spring-mvc, optimistic-locking

在带有 Hibernate 4.1 的 Spring 3.1 MVC 应用程序中，我正在使用：

*   声明式事务管理
*   每个请求的会话
*   通过在域对象中添加“版本”属性进行乐观锁定
*   使用 saveOrUpdate() 重新附加分离的域对象

域对象在 GET 请求期间作为命令对象发送，以便用户更新。

为了不出现错误“乐观锁定失败；嵌套异常是 org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）”，我在每个 jsp 页面中都包含“ `<form:hidden path="version"/>`”并且更新工作正常。

为了进一步保护应用程序，我正在尝试向控制器添加以下内容：

```
@InitBinder
public void initBinder(WebDataBinder dataBinder, HttpServletRequest request) {
  if (request.getMethod().equals("POST")) {
   dataBinder.setDisallowedFields( new String[] {"version"});
  }
} 
```

但是当我这样做时，我得到错误乐观锁定失败；嵌套异常是 org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）”。

有人可以解释一下我正在尝试做的事情作为一种方法是否有效以及我做错了什么？

我相信理想情况下，我应该尝试保护域对象的主键以及可能未被特定 jsp 页面修改的某些字段。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:08:19.417

这看起来不正确，您不应该禁止绑定版本字段 - 如果您不允许绑定版本字段，那么您的命令对象将没有您最初从数据库中为对象检索的版本字段，并且在点持久化命令对象休眠将假定该行已被其他事务修改（因为数据库中的版本和命令对象不匹配）。

您可以尝试保护字段（id，版本）等，仅在第一次保存实体时（当 id 和 version 预计不存在时），但对于更新，必须存在原始 id 和版本.

# java - Kindle Fire 和 GlSurfaceView.getHeight()

> ID：10758028
> 
> 赞同：1
> 
> 时间：2012-05-25T16:21:36.097
> 
> 标签：java, android, kindle

我正在为 kindle fire 开发一个游戏，游戏总是在隐藏栏的情况下运行。

只有当用户进入暂停菜单时，该栏才会出现，我只希望该栏出现在游戏中。

但似乎当栏出现时 GlSurfaceView.getHeight() 从 600 变为 580，并且我的游戏调整大小，但我不希望这种行为，

我只希望游戏栏出现在游戏中并且我的游戏不动，我已经尝试过 GlSurfaceView.setMinimumHeight(600);

但是kindle根本忽略了这一点。

这就是我的游戏始终运行的方式：![在此处输入图像描述](../Images/153d5cf9fd0b43ab3b641600f0913837.png)

当我激活栏时，会发生这种情况：

![在此处输入图像描述](../Images/1e0d47c6a9fdadd6051060df93b08af1.png)

而不是这个：

![在此处输入图像描述](../Images/019ef55ca616600d755ea40003153507.png)

你知道避免这种情况的方法吗？

谢谢！

要创建 GlSurfaceView，我执行以下操作：

```
OnCreate() {

s_activity.m_view = new GameGLSurfaceView(s_activity.getApplication(), true, pixelSize,depthSize, stencilSize);

}

public GameGLSurfaceView(Context context, boolean translucent,int pixelSize, int depth, int stencil) 
{
super(context);
mRenderer = new GameRenderer(context, this);
setRenderer(mRenderer);

} 
```

隐藏和显示栏我使用此功能

```
private static final int AMAZON_FLAG_NOSOFTKEYS = 0x80000000;
private static final int FLAG_SUPER_FULLSCREEN = AMAZON_FLAG_NOSOFTKEYS | WindowManager.LayoutParams.FLAG_FULLSCREEN;

public static void toggleKindleBar(final int toDo)
{   
    if( s_activity != null)
        s_activity.runOnUiThread(new Runnable()
        {
            public void run()
            {
                s_activity.getWindow().clearFlags( toDo!=1? WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN : FLAG_SUPER_FULLSCREEN);
                s_activity.getWindow().addFlags( toDo!=1? FLAG_SUPER_FULLSCREEN:WindowManager.LayoutParams.FLAG_FULLSCREEN);

            }
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:19:09.403

可能的解决方案：

1.  在活动的 onCreate() 方法上试试这个：

    getWindow().setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);

    请注意，根据我的经验，在运行此代码时使用 kindle fire 时某些视图会出现一些奇怪的问题，因此即使它有效，请进行一些广泛的测试。

2.  尝试将清单设置为 configChanges 的一些标志，但我没有测试它，我不再有 kindle fire。

# python - 如何在 Python 中使用 Gtk3 GtkTreeRowReference

> ID：10758030
> 
> 赞同：3
> 
> 时间：2012-05-25T16:21:39.857
> 
> 标签：python, gtk, pygtk, gtk3, pygobject

我试图调用 Gtk3 的`GtkTreeRowReference()`函数但没有成功。我正在尝试`ListStore`使用关联的 TreeView 选择设置为 MULTIPLE 模式从 a 中删除多条记录。我想为选择中指向`TreeRowReference`的每个项目保存一个并使用它们来删除项目，因为这些路径应该随着选择中较早到达的 ListStore 项目被删除而更新。我在 PyGtk 2 中找到了很多关于 using 的参考，PyGObject 的教程提到了它们的使用，但没有给出实际示例。我尝试了很多方法来调用但没有成功。例如：`ListStore``ListStore``TreeRowReferences``GtkTreeRowReference()`

```
hit_rows = []
for row in range(len(self.selection.get_selected_rows()):
    hit = self.selection.get_selected_rows()[row]
    hit_row = Gtk.TreeRowReference(liststore, hit)
    hit_rows.append(hit_row) 
```

产生此致命错误消息：`"TypeError: function takes at most 0 arguments (2 given)"`当我的程序运行时`Gtk.TreeRowReference`。选择中的行已经包含对 的引用`ListStore`，因此仅使用选择行作为参数再次尝试，但这只是抱怨该函数仍然坚持使用 0 个参数，而我曾尝试向其传递 1 个参数。

我也尝试过这样的事情：

```
hit_rows = []
for row in range(len(self.selection.get_selected_rows())):
    hit = self.selection.get_selected_rows()[row]
    hit_row = hit.GtkTreeRowReference()
    hit_rows.append(hit_row) 
```

这些努力激怒了 Python 抱怨对`"AttributeError: 'ListStore' object has no attribute 'GtkTreeRowReference'."`的调用变体`TreeRowReference`， `Gtk_TreeRowReference`并且其他几个变体产生了相同的错误消息。

谁能给我一个关于如何`Gtk.TreeRowReference`在 PyGObject/Gtk3 中使用的线索？作为一个相对较新且经验不足的 Python 程序员，也是 Gtk 的新手，毫无疑问，我忽略了一些非常明显的东西，但即使经过大量互联网搜索，我也感到难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:32:46.507

而不是现在调用`Gtk.TreeRowReference`(PyGObject + GTK+ 3) 你必须使用`Gtk.TreeRowReference.new`. 例如，您可以使用：

```
selection = treeview.get_selection()
model, paths = selection.get_selected_rows()
refs = []
for path in paths:
    refs.append(Gtk.TreeRowReference.new(model, path)) 
```

也就是`treeview`之前已经定义好了。然后，您可以稍后通过以下方式仔细检查：

```
for ref in refs:
    path = ref.get_path()
    iter = model.get_iter(path)
    value = model.get(iter, 0)[0]
    print '(%s, %s)' % (path, value) 
```

在最后一部分中，我假设您想要获取模型中第一列的值。

# liferay - liferay 找到 util NoSuchBeanDefinitionException

> ID：10758032
> 
> 赞同：1
> 
> 时间：2012-05-25T16:21:47.973
> 
> 标签：liferay, velocity

我无法加载这个 liferay utils：

`#set($formUtil= $utilLocator.findUtil("com.liferay.portal.kernel.util.TextFormatter"))`

我收到此错误：

`org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'com.liferay.portal.kernel.util.TextFormatter' is defined`

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:47:24.370

com.liferay.portal.kernel.util.TextFormatter 类不是 liferay 的 spring 上下文中定义的 bean（这是异常所说的）。它是一个提供静态方法的类。您将使用您的解决方案来访问例如 UserLocalServiceUtil。

我从未尝试过这个解决方案，但它应该可以工作：

[http://velocity.apache.org/engine/devel/developer-guide.html#supportforstaticclasses](http://velocity.apache.org/engine/devel/developer-guide.html#supportforstaticclasses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T22:20:33.807

更好的方法是使用默认的 Liferay 速度变量。在此处查看完整描述：[http ://www.liferay.com/es/community/wiki/-/wiki/Main/Access+Objects+from+Velocity](http://www.liferay.com/es/community/wiki/-/wiki/Main/Access+Objects+from+Velocity)

我可以认为你需要类似`dateFormats`or的东西`stringUtil`。

# tableview - javafx 2.1 更新表格视图

> ID：10758035
> 
> 赞同：2
> 
> 时间：2012-05-25T16:22:05.850
> 
> 标签：tableview, javafx

我刚刚创建了一个 TablView 并成功地将数据放入其中。问题是当我双击一个单元格（更新）时，它会显示更新的数据，但是当我点击更新的单元格时会显示旧数据！

这里的代码：

```
 table = new TableView<InvoiceLine>();
                        table.setEditable(true);

                        Callback<TableColumn, TableCell> cellFactory =
                                new Callback<TableColumn, TableCell>() {

                                    public TableCell call(TableColumn p) {
                                        return new EditingCell();
                                    }
                                };

                        ObservableList<InvoiceLine> data = FXCollections.observableArrayList(invoice_Lines);
                        table.setItems(data);

                        designationCol = new TableColumn("Designation");
                        designationCol.onEditCommitProperty();
                        designationCol.setCellValueFactory(new PropertyValueFactory<InvoiceLine, String>("invoicelineDesignation"));
                        designationCol.setCellFactory(cellFactory);
                        designationCol.setOnEditCommit(new EventHandler<CellEditEvent<InvoiceLine, String>>() {

                            @Override
                            public void handle(CellEditEvent<InvoiceLine, String> t) {
                                ((InvoiceLine) t.getTableView().getItems().get(
                                        t.getTablePosition().getRow())).setInvoicelineDesignation(t.getNewValue());
                                System.out.println(t.getNewValue());
                            }
                        });

                        TableColumn quantiteCol = new TableColumn("Quantite");

                        quantiteCol.setCellValueFactory(
                                new PropertyValueFactory<InvoiceLine, String>("invoicelineQuantity"));
                        quantiteCol.setCellFactory(cellFactory);

                        quantiteCol.setOnEditCommit(
                                new EventHandler<CellEditEvent<InvoiceLine, String>>() {

                                    @Override
                                    public void handle(CellEditEvent<InvoiceLine, String> t) {
                                        ((InvoiceLine) t.getTableView().getItems().get(
                                                t.getTablePosition().getRow())).setInvoicelineQuantity(t.getNewValue());
                                        System.out.println(t.getNewValue());
                                    }
                                });

                        TableColumn puCol = new TableColumn("Prix Unitaire");

                        puCol.setCellValueFactory(
                                new PropertyValueFactory<InvoiceLine, String>("invoicelineUnitPrice"));
                        puCol.setCellFactory(cellFactory);

                        puCol.setOnEditCommit(
                                new EventHandler<CellEditEvent<InvoiceLine, String>>() {

                                    @Override
                                    public void handle(CellEditEvent<InvoiceLine, String> t) {
                                        ((InvoiceLine) t.getTableView().getItems().get(
                                                t.getTablePosition().getRow())).setInvoicelineUnitPrice(t.getNewValue());
                                        System.out.println(t.getNewValue());
                                    }
                                });

                        TableColumn totalCol = new TableColumn("Total");

                        totalCol.setCellValueFactory(
                                new PropertyValueFactory<InvoiceLine, String>("invoicelineAmount"));
                        totalCol.setCellFactory(cellFactory);

                        totalCol.setOnEditCommit(
                                new EventHandler<CellEditEvent<InvoiceLine, String>>() {

                                    @Override
                                    public void handle(CellEditEvent<InvoiceLine, String> t) {
                                        ((InvoiceLine) t.getTableView().getItems().get(
                                                t.getTablePosition().getRow())).setInvoicelineAmount(t.getNewValue());
                                        System.out.println(t.getNewValue());
                                    }
                                });

                        table.getColumns().addAll(designationCol, quantiteCol, puCol, totalCol);
                        centerSplitPane.setBottom(table);
                    }
                }); 
```

请问有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:54:28.030

如果您遵循 TableView 的官方教程，则在单元格的编辑模式下按 ENTER 键提交更改。或者通过添加来编辑您的`EditingCell`源代码：

```
textField.focusedProperty().addListener(new ChangeListener<Boolean>() {

    @Override
    public void changed(ObservableValue<? extends Boolean> arg0, Boolean arg1, Boolean arg2) {
        if (!arg2) {
            commitEdit(textField.getText());
        }
    }
}); 
```

进入`createTextField()`方法。`textField`当失去焦点时，这将提交更改。

# javascript - Javascript提示消息框不起作用

> ID：10758036
> 
> 赞同：-1
> 
> 时间：2012-05-25T16:22:10.153
> 
> 标签：javascript, html

我已经完成了所有的编码，一切正常。只停留在javascript中。我可以更改图像背景的颜色。但是，单击图像时无法提示弹出消息，我尝试使用“onclick”。但它仍然不起作用。

任何人都可以给我建议或工作示例。请在下面查看我的编码-

```
<html> 
<head> 
<style> 
            th{ 
                width:60px; 
                height:60px; 
            } 
            table{ 
                border: 5px solid #FFBB78; 
                border-collapse:collapse; 
            } 
            td{ 
                width:60px; 
                height:60px; 
            } 
            tr{ 
                width:60px; 
                height:60px;  
            } 
            h1{ 
                color:#6633FF; 
            } 
</style> 

<script type="text/javascript"> 
function changeColor(){
    document.getElementById("king").style.backgroundColor="black";
 }
 function click(){
     /*var pawn = document.write.getElementById('pawn');
     var knight = document.write.getElementById('knight');
     var queen = document.write.getElementById('queen');
     var bishop = document.write.getElementById('bishop');
     var king = document.write.getElementById('king_1');
     var square = document.write.getElementById('sqaure');*/
     alert("This is a knight");
 }

 /*function promt_chess_piece(){
    //var knight = document.write.getElementById('knight');
    if (knight.value.lenght)
    {
        alert("This is the knight");
        knight.focus();
        return true;
    }
 }*/
</script> 
</head> 
<body> 
<?php 

    $pictures = array( 
        //row 1
        "1,1" => '<img src="chess/br.gif" />',  
        "1,3" => '<img src="chess/bb.gif"/>', 
        "1,4" => '<img src="chess/bq.gif"/>',
        "1,5" => '<img src="chess/bk.gif"/>',
        "1,8" => '<img src="chess/br.gif"/>',
        //row 2
        "2,1" => '<img src="chess/bp.gif"/>', 
        "2,2" => '<img src="chess/bp.gif"/>', 
        "2,3" => '<img src="chess/bp.gif"/>', 
        "2,4" => '<img src="chess/bp.gif"/>', 
        "2,5" => '<img src="chess/bb.gif"/>', 
        "2,6" => '<img src="chess/bp.gif"/>', 
        "2,7" => '<img src="chess/bp.gif"/>', 
        "2,8" => '<img src="chess/bp.gif"/>',

        //row 3
        "3,3" => '<img src="chess/bn.gif"  onclick="click()"/>',
        "3,6" => '<img src="chess/bn.gif"/>',

        //row 4
        "4,5" => '<img src="chess/bp.gif"/>',

        //row 5
        "5,3" => '<img src="chess/wb.gif"/>',
        "5,5" => '<img src="chess/wp.gif"/>',

        //row 6 
        "6,4" => '<img src="chess/wp.gif"/>',
        "6,6" => '<img src="chess/wn.gif"/>',

        //row 7
        "7,1" => '<img src="chess/wp.gif"/>',
        "7,2" => '<img src="chess/wp.gif"/>',
        "7,3" => '<img src="chess/wp.gif"/>',
        "7,6" => '<img src="chess/wp.gif"/>',
        "7,7" => '<img src="chess/wp.gif"/>',
        "7,8" => '<img src="chess/wp.gif"/>',

        //row 8
        "8,1" => '<img src="chess/wr.gif"/>',
        "8,2" => '<img src="chess/wn.gif"/>',
        "8,3" => '<img src="chess/wb.gif"/>',
        "8,4" => '<img src="chess/wq.gif"/>',
        "8,6" => '<img src="chess/wr.gif"/>',
        "8,7" => '<img src="chess/wk.gif" onmouseover="changeColor()" id="king" />',);//array ends here

    echo"<h1 align='center'>SAJID Chess Board</h1>"; 
    echo"<table border='1' align='center'>"; 

     for($i = 1; $i <= 8; $i++){      
          echo "<tr>"; 
          for($j = 1; $j <=8; $j++){ 
              if( ($i+$j)%2==0 ) { 
                echo"<td bgcolor='#99FF99'>"; 
              } 
              else { 
                echo"<td bgcolor='#9999CC'>"; 
                   } 

                if(isset($pictures["{$i},{$j}"]))//compares the pictures i and p 
                    echo $pictures["{$i},{$j}"]; 

                echo "</td>"; 
                } 
                echo "</tr>"; 
            } 

            echo "</table>"; 

        ?> 
    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:44:48.970

你确定点击带有 onclick 属性的图片吗？只有一张图片有这个。这是我唯一能看到的可能是问题所在。

# ios - 在后台运行 iOS 应用程序

> ID：10758038
> 
> 赞同：0
> 
> 时间：2012-05-25T16:22:10.513
> 
> 标签：ios, background, multitasking

关于在后台运行 iOS 应用的话题有很多问题，但我想用这个问题来澄清几点。

首先，如果您要将您的应用程序提交到应用商店，您只能作为音频/voip/location/airplay 应用程序在后台运行。您还可以接收推送通知。

但是，如果您正在开发企业应用程序，或者不必担心获得应用程序商店的批准，是否有任何其他选项可用？我想探讨两种情况：

1.  不断在后台运行应用程序（处理或传输数据）
2.  安排应用程序在给定时间启动进程

奖励：如果 #2 并且应用程序已关闭，是否可以启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:34:40.537

> 不断在后台运行应用程序（处理或传输数据）

iOS 内置了对后台处理的限制，而不仅仅是应用商店审核团队强加的。您可以尝试通过将您的应用程序标记为音频应用程序来欺骗 iOS，然后调用适当的音频 API 并执行您希望应用程序执行的任何其他操作。从长远来看，在受限制的情况下寻找实现真正目标的方法似乎要简单得多。例如，如果您需要让用户定期执行某项操作，请使用本地通知来吸引他们的注意力，然后给他们一个*想要*执行该任务的充分理由。

> 安排应用程序在给定时间启动进程

据我所知，在当前 API 下是不可能的。iOS*将*重新启动以前请求通知重大更改的应用程序，但如果您想在给定时间重新启动，这将无济于事。同样，您最好的选择是使用本地通知并给用户一个启动应用程序的理由。

# ruby - 当我尝试访问 Nokogiri 对象的 [:href] 属性时，它返回 nil - 如果不是

> ID：10758040
> 
> 赞同：1
> 
> 时间：2012-05-25T16:22:12.727
> 
> 标签：ruby, nokogiri

这是我正在处理的 Nokogiri 对象：

```
#<Nokogiri::XML::Element:0x81020c70 name="p" children=[#<Nokogiri::XML::Text:0x8101f3fc " May 12 - ">, #<Nokogiri::XML::Element:0x8101f3ac name="a" attributes=[#<Nokogiri::XML::Attr:0x8101f258 name="href" value="http://auburn.craigslist.org/cpg/3011653835.html">] children=[#<Nokogiri::XML::Text:0x8101ee20 "Wordpress Designer">]>, #<Nokogiri::XML::Text:0x8101ecb8 " - ">]> 
```

那存储在一个数组中，所以当我这样做时：

```
my_array.first[:href] 
```

它返回零。

当我做

```
my_array.first.text 
```

它返回：

> 5 月 12 日 - WordPress 设计师 -

哪个是正确的...我如何从这个特定记录中获取 href？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T16:36:54.673

如果您发布的对象确实是第一个元素，`my_array`那么`my_array.first`将返回一个`p`元素，而不是`a`. 看起来`a`你想要的元素是这个对象的第二个孩子，所以要访问它你真正想要的：

```
my_array.first.children[1][:href] 
```

您也可以直接使用 CSS 或 Xpath 表达式访问它。

当然，我真的只是在猜测，因为您没有发布任何实际代码。

# javascript - Phonegap 加速度计 y 值以度为单位

> ID：10758043
> 
> 赞同：2
> 
> 时间：2012-05-25T16:22:29.717
> 
> 标签：javascript, cordova, accelerometer

Phonegap 加速度计似乎返回 y 值，如下所示：

```
// +10 y axis = straight up = 0/360 deg
// -10 y axis = straight down = 180 deg
// flat y axis = 90/270 deg 
```

我的问题是，如何将此 y 轴转换为给定的度数？

此外，由于它是phonegap，我假设这些值对于所有设备都是相同的。如果有人知道，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:29:25.507

尝试这个：

```
deg = acceleration.y / 10 * 90; 
```

当我做类似的事情时，我认为这对我有用。

# backbone.js - Backbone.Js 使用 destroy() 发送数据

> ID：10758044
> 
> 赞同：5
> 
> 时间：2012-05-25T16:22:31.573
> 
> 标签：backbone.js

我有一个基本的社交网络概念：好友请求。

每个好友请求都可以被接受或拒绝，任一操作都应导致好友请求从集合中删除并从服务器中删除。

我可以用来`model.destroy()`向服务器发出`DELETE`请求，也可以从 FriendRequests 集合中删除该项目。但是我需要向服务器发送一些关于请求是被接受还是被拒绝的额外数据。`?accepted=true|false`

我如何发送额外的数据以及`Destroy()`- 或者我是否以错误的方式进行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:33:44.377

我同意@kinakuta 这不是标准的删除。考虑对`/friend-request/42/accept`或执行 PUT `/friend-request/42/decline`。`accepted`另一种选择是执行标准更新/PUT，但在更新期间提供标志时在服务器上采取适当的操作。您可能还想为您的服务器端数据库记录实施“软删除”，其中好友请求实际上并未被删除，但其“状态”属性已更改为适当的生命周期值。可能是“待处理”、“拒绝”、“已接受”等之一。您可能希望存储其他元数据，如接受请求时的时间戳，这对于报告/分析可能很有趣。如果您删除记录，则没有方便的地方来存储该元数据。

# snmp - 从哪里开始实施 SNMP 代理？

> ID：10758054
> 
> 赞同：2
> 
> 时间：2012-05-25T16:23:23.463
> 
> 标签：snmp, mib, network-monitoring

在我开始之前，我意识到这里已经有一些与 SNMP 相关的问题，但似乎没有多少问题得到解答——这可能意味着我问错了地方，但我现在不知道还能去哪里。

几天来，我一直在尽我所能阅读 SNMP，但我发现很难理解即将发生的事情。我们的想法是最终我们会将 SNMP 集成到我们的 Java 应用程序服务器中，这将允许最终用户将其合并到他们预先存在的网络管理系统 (NMS) 中。

不幸的是，我对即将发生的事情感到完全困惑。根据我从与最终用户的交谈中了解到的情况（不幸的是，在进行任何研究之前），监控允许他们现有的 NMS 以树型显示的形式向他们的管理员提供生命统计数据的视图，向他们提供有关不同部分的反馈系统处于高水平，并允许他们深入研究特定的子系统。

通过阅读，我们将实现一个“代理”，它有几个定义的接口，允许处理和响应 GET 请求等。这是有道理的，但我不知道通信的格式是什么——似乎没有任何具体的例子来说明任何消息的外观、信息的编码方式。

不过，我更多的困惑是关于管理信息库（MIB）。我错误地假设代理的接口将允许请求受监视的属性，然后依次请求这些属性的值。允许在 NMS 端无需任何配置即可启动和检测任何新的 Agent（v3 中的身份验证除外）。如果我理解正确，情况并非如此，代理必须改为定义 MIB，NMS 可以使用这些 MIB 来确定这些属性。当人们开始提到数千个现有的 MIB 并且它们可以被重用时，我的困惑增加了，我不明白。是否可以使用单个 MIB 定义来描述网络设备的特定属性（例如在路由器上连接互联网的简单事物：是/否）对于许多不同的设备？如果是这样，我不相信我们的软件可以监控任何其他设备/系统共有的任何东西，但我们是否应该寻找已经存在的 MIB？目前我真的没有看到这样一个系统有什么好的理由，代理导出这些信息肯定会更容易——所以如果有人能启发我，我将不胜感激！

我认为如果我能够设置一个简单的 SNMP 代理和某种客户端会有所帮助，我可以开始查看该过程并最终检查两者之间的通信，但我发现很难找到任何提供任何信息的地方这样的事情。Nagios 已被推荐给我们作为测试“客户端”/NMS，但他们的“快速入门”部分建议下载 600Mb 虚拟机 - 肯定有更快的入门方法吗？

任何帮助或建议将不胜感激，我已经浏览了 Wiki 页面，但它似乎没有详细介绍 MIB 并且之前不必处理类似引用的 RFC 之类的任何事情，虽然它们可能包含所有他们目前对我来说似乎完全无法理解的信息。或者是否有任何书籍可以推荐用于 v3 的概述和实施？

感谢您的阅读，如果您认为可以提供帮助，则更加感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:10:08.590

在我看来，您以杂乱无章的方式逐段阅读所有 SNMP 信息。强烈不建议这样做，这当然会导致您感到困惑。

忘记目前所学的内容并深入阅读 Essential SNMP 之类的好书怎么样？

[http://shop.oreilly.com/product/9780596008406.do](http://shop.oreilly.com/product/9780596008406.do)

请单击 Google Preview 图标进行预览。

您不能依赖网络论坛来告诉您 ABC，因为我发现这是不切实际的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-26T11:20:17.800

通信接口是 SNMP。这是用于传输的协议（通常在 UDP 之上）。服务信息请求的东西是 SNMP 代理。发送信息请求的东西是 SNMP 管理器。

代理应提供哪些信息并由管理器请求的定义在 MIB 中。MIB 是“粘合剂”，是任何特定系统可以/应该提供的内容的目录。它将数字代码映射到允许我们理解数据的名称和类型，就像电话簿如何将电话号码映射到人们的姓名和地址一样。

通常，您将创建、发布和使用您自己的 MIB，这些 MIB 可以描述您自己产品的特定方面，但您也应该为现有 MIB 中定义的一些标准信息请求提供服务。是的，还有数以千计的其他预先存在的 MIB，您需要其中一两个以上的可能性很小。它们通常是现有产品的 MIB 的发布版本。

“玩弄”的传统方法是安装 Net-SNMP（一个包含代理实现的软件套件，允许您相当轻松地“固定”自己的逻辑和自己的 MIB），然后使用数据包捕获器检查结果，例如线鲨。

为了在生产中更全面地实施，您可以坚持使用 Net-SNMP，或者编写自己的代理软件，或者按照我的做法创建两者的混合体，更加灵活和高性能，但使用 Net-SNMP 的后端来处理所有低级 SNMP 的东西。

不过，您的第一步是阅读一本书或其他可以消除您所有误解的教材，因为猜测不会解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T18:30:24.877

我成功使用了[此](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sect-System_Monitoring_Tools-Net-SNMP-Extending.html)页面中的示例。shell 和 Perl NetSNMP 代码都非常易于实现和查询。

# bash - 如何将日期范围作为变量传递给 awk

> ID：10758055
> 
> 赞同：3
> 
> 时间：2012-05-25T16:23:35.380
> 
> 标签：bash, variables, awk, colon, date-range

这是我的情况。

```
bash ~]# TIME="2012-05-25 06:42:57"
bash ~]# echo "2012-05-25 00:16:51,610" | awk -v var=$TIME '{if ($0 < var) print $0}' 
```

然后，这是错误消息

```
awk: 06:42:57
awk:   ^ syntax error 
```

我只想将日期范围传递给我的 awk 命令。这个怎么存档？请帮忙。谢谢。

修改案例

```
START_TIME="2012-05-24 00:00:00"
END_TIME="2012-05-24 01:00:00"
echo "2012-05-24 00:10:10" | awk -v "START=$START_TIME" -v "END=$END_TIME" '{ if ( $0 > START && $0 < END) print $0 }' 
```

它似乎在 IF 条件下不起作用。

```
awk: { if ( $0 < START && $0 > END) print $0 }
awk:                           ^ syntax error 
```

* * *

## 经过多次尝试，似乎找到了另一种方法的解决方案。

```
echo "2012-05-24 00:10:10" | awk '{ if ( $0 > "'"$START_TIME"'" && $0 < "'"$END_TIME"'" ) print $0 }' 
```

不知道如何使用 awk 变量“-v”来做到这一点。有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T16:32:27.023

将变量传递给 AWK 时引用它：

```
echo "2012-05-25 00:16:51,610" | awk -v "var=$TIME" '{if ($0 < var) print $0}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T04:51:30.077

至少在我的系统上，“END”似乎是一个保留字，即使对于变量也是如此。awk 使用 END 就像使用 BEGIN 一样，但我之前没有看到有人尝试将它用作变量。笔记：

```
[ghoti@pc ~]$ START_TIME="2012-05-24 00:00:00"
[ghoti@pc ~]$ END_TIME="2012-05-24 01:00:00"
[ghoti@pc ~]$ echo "2012-05-24 00:10:10" | awk -v "START=$START_TIME" -v "END=$END_TIME" '{ if ( $0 < START && $0 > END) print $0 }'
awk: syntax error at source line 1
 context is
        { if ( $0 < START && $0 > >>>  END <<< ) print $0 }
awk: illegal statement at source line 1
[ghoti@pc ~]$ echo "2012-05-24 00:10:10" | awk -v s_time="$START_TIME" -v e_time="$END_TIME" '{ if ( $0 < s_time && $0 > e_time) print $0 }'
[ghoti@pc ~]$ 
```

显然这仍然不起作用，但现在它不起作用是因为对比较如何工作的误解，而不是因为我们试图使用保留字作为变量。

查看您的`if`陈述，您似乎仅在比较字符串在开始日期之前和结束日期之后才尝试评估 TRUE 。除非时间是循环的理论，我认为我们可以假设这种逻辑是有缺陷的。

所以这就是我想出的。请注意，这使用`gawk`'`mktime()`功能，因此它不会在任何地方都有效。

```
[ghoti@pc ~]$ START_TIME="2012-05-24 00:00:00"
[ghoti@pc ~]$ END_TIME="2012-05-24 01:00:00"
[ghoti@pc ~]$ printf '2012-05-23 22:10:10\n2012-05-24 00:10:10\n2012-05-24 01:10:10\n' | gawk -v s_time="$START_TIME" -v e_time="$END_TIME" 'BEGIN { s=mktime(gensub(/[^0-9]/," ","G",s_time)); e=mktime(gensub(/[^0-9]/," ","G",e_time)); } { now=mktime(gensub(/[^0-9]/," ","G")); if ( now > s && now < e) print $0 }'
2012-05-24 00:10:10
[ghoti@pc ~]$ 
```

为了便于阅读，gawk 脚本如下所示：

```
BEGIN {
    s=mktime(gensub(/[^0-9]/," ","G",s_time));
    e=mktime(gensub(/[^0-9]/," ","G",e_time));
}
{
    now=mktime(gensub(/[^0-9]/," ","G"));
    if ( now > s && now < e) print $0;
} 
```

显然，这完全依赖于您的日期/时间规范与`mktime()`' 的输入格式非常匹配的事实。但它适用于您问题中的示例数据。

# git - 您的带指纹 (..) 的密钥未经授权（协作）

> ID：10758056
> 
> 赞同：4
> 
> 时间：2012-05-25T16:23:43.180
> 
> 标签：git, heroku, github, key, fingerprint

虽然有很多关于这个错误的问题，但所有这些都与收到错误的人创建的应用程序有关，并没有帮助解决我的问题。我已被添加为 heroku 应用程序的合作者。当我尝试通过

> git clone git@heroku.com:myapp.git -o heroku

或者如果我从 github 克隆它基于的代码并运行

> git push heroku master（在做了 git add 和 git commit 之后）

它给了我错误“您的带有指纹（...）的密钥无权访问 myapp。” 我尝试过各种heroku 键组合：add、heroku 键：clear 和ssh-keygen。

这个应用程序上的其他合作者在推送到 heroku 时没有任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:40:39.897

我收到此错误是因为我使用了多个 heroku 帐户：

我想这样做，这样我就可以使用自己的 Heroku 帐户独立“玩”，同时与团队/项目帐户上的其他人合作。

这与 Heroku 中多人协作团队帐户的概念是分开的：我希望团队帐户成为协作的应用程序所有者，这样我的个人帐户就可以像团队的其他成员一样充当特权较低的协作者. 只有所有者才能：添加/删除付费插件、删除/重命名应用程序以及查看发票。

对于多帐户支持（例如，您自己的个人 heroku 帐户），您需要添加这个文档不太完整的插件：

$ heroku 插件：安装 git://github.com/ddollar/heroku-accounts.git

见：[https ://github.com/ddollar/heroku-accounts](https://github.com/ddollar/heroku-accounts)

这就是你的 git SSH 设置最终的样子：

```
(venv)MacPro:your_project username$ more .git/config
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
        ignorecase = true
[remote "origin"]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = ssh://your_username@git.your_org.com/your_project.git
[branch "master"]
        remote = origin
        merge = refs/heads/master
[remote "heroku_kb"]
        url = git@heroku.individual:your_individual_app.git
        fetch = +refs/heads/*:refs/remotes/heroku/*
[remote "heroku_ocp"]
        url = git@heroku.your_project:your_team_app.git
        fetch = +refs/heads/*:refs/remotes/heroku/*
[heroku]
        account = individual 
```

上面的最后三个部分定义了两个单独的 heroku 遥控器并指定哪个是活动的。

heroku-accounts 插件通过添加 ~/.ssh/config 条目使所有这些工作：

```
Host heroku.individual
  HostName heroku.com
  IdentityFile "/Users/username/.ssh/identity.heroku.individual"
  IdentitiesOnly yes

Host heroku.your_project
  HostName heroku.com
  IdentityFile "/Users/username/.ssh/identity.heroku.your_project"
  IdentitiesOnly yes 
```

如果您不这样将帐户分开，一个 SSH 密钥会干扰另一个，您最终会像我一样陷入 SSH 困境，在 google/forum-chasing 一个看起来像这样的错误时玩得开心：

```
MacPro:your_project username$ git push heroku master

 !  Your key with fingerprint cf:5b:6b:91:d5:71:e8:8b:73:dc:cf:86:56:fd:7a:49 is not authorized to access [insert appname here].

fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:37:56.827

这听起来像是某种配置问题。您确实应该仔细检查您对应用程序是否具有适当的权限，并且您的 SSH 密钥已在 heroku 中注册。

确保您使用的是您认为正在使用的密钥。本质上，`cat ~/.ssh/id_rsa.pub`（或您使用的任何键）应该显示在`heroku keys --long`.

阅读[https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T21:17:30.540

您可能拥有多个 ssh 密钥，并且默认使用了错误的密钥。要解决此问题，您需要配置 SSH 以将正确的密钥发送到 heroku.com。有关更多详细信息，请参阅[超级用户的此答案。](https://superuser.com/questions/272465/using-multiple-ssh-public-keys)

# ruby - 我的 gem 加载错误

> ID：10758064
> 
> 赞同：0
> 
> 时间：2012-05-25T16:24:12.977
> 
> 标签：ruby, rubygems

我用

```
$ gem build <gemspec> 
```

它构建成功，我成功安装了它。

但是当我执行以下操作时：

```
$ irb -rubygems
irb(main):003:0 require 'xxxx' 
```

我收到以下错误：

```
LoadError: no such file to load -- xxxx
 from C:/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in 'gem_original_require'
 from C:/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in 'require' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:21:19.083

你也可以发布你的`.gemspec`文件吗？

您很可能没有将文件包含在`.files`数组中。例如，

```
Gem::Specification.new do |s|
  # Other specifications
  s.files       = ["bin/google", "lib/google.rb", "lib/google/utils.rb"]
  s.files      += ["LICENSE.md", "README.md", "google.gemspec"]
end 
```

# c++ - boost::bind 无法编译

> ID：10758078
> 
> 赞同：3
> 
> 时间：2012-05-25T16:25:25.503
> 
> 标签：c++, boost, boost-spirit, boost-bind

我是提振精神的新手，我有以下问题：

```
#include <string>
#include <vector>
#include <boost/spirit/include/qi.hpp>

#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_function.hpp>
#include <boost/spirit/include/phoenix_statement.hpp>

#include <boost/bind.hpp>

using namespace boost::spirit;
using namespace std;

struct MyGrammar
    : qi::grammar<string::const_iterator, string(), ascii::space_type> {
    MyGrammar();

    void myFun(const string& s);

    private:
    qi::rule<string::const_iterator, string(), ascii::space_type> myRule;
};

using namespace boost::spirit;
using namespace std;

MyGrammar::MyGrammar() : MyGrammar::base_type(myRule) {
    using qi::_1;

    myRule = int_ [boost::bind(&MyGrammar::myFun, this, _1)]; // fails
    myRule = int_ [_val = _1];  // fine
}

void MyGrammar::myFun(const string& s){
    cout << "read: " << s << endl;
}

int
main(){
} 
```

第一次分配`myRule`我得到编译错误，而第二次分配编译正常。

在第一种情况下，编译器会输出我不理解的巨大错误消息。最后它说：

```
boost_1_49_0/include/boost/bind/bind.hpp:318:9: error: no match for call to '(const boost::_mfi::mf1<void, MyGrammar, const std::basic_string<char>&>) (MyGrammar* const&, const boost::phoenix::actor<boost::spirit::argument<0> >&)'
boost_1_49_0/include/boost/bind/mem_fn_template.hpp:163:7: note: candidates are: R boost::_mfi::mf1<R, T, A1>::operator()(T*, A1) const [with R = void, T = MyGrammar, A1 = const std::basic_string<char>&]
boost_1_49_0/include/boost/bind/mem_fn_template.hpp:184:7: note:                 R boost::_mfi::mf1<R, T, A1>::operator()(T&, A1) const [with R = void, T = MyGrammar, A1 = const std::basic_string<char>&] 
```

有任何想法吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T16:47:45.103

您不能使用来自不同`bind`实现的占位符。目前`bind`Boost中有三个功能：

*   `boost::bind`, 被取代
*   `boost::lambda::bind`, 被取代
*   `boost::phoenix::bind`, 这是你应该使用的 Boost.Spirit

`boost::spirit::qi`( 和)下的占位符与`boost::spirit::karma`使用的占位符相同`boost::phoenix::bind`，因此只需使用它即可。

哦，还有专业提示：`using namespace std;`在全局命名空间中停止你的，最好是任何其他 using 指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T16:59:53.283

第一个问题是您将其指定`std::string`为合成属性，然后根据 定义您的规则`qi::int_`，它的合成属性为`int`。

第二个问题是，正如[Spirit 文档](http://www.boost.org/libs/spirit/doc/html/spirit/qi/quick_reference/semantic_actions.html)直接指出的那样，非 Phoenix 仿函数采用三个参数，而不是一个：

> 您可以使用 Boost.Bind 来绑定成员函数。对于函数对象，允许的签名是：
> 
> ```
> void operator()(Attrib const&, unused_type, unused_type) const;
> void operator()(Attrib const&, Context&, unused_type) const;
> void operator()(Attrib const&, Context&, bool&) const; 
> ```

第三个问题是您使用的是 Spirit 的 Phoenix`_1`占位符而不是`boost::bind`' 占位符（它实际上位于全局命名空间中）。

总之，这应该有效：

```
#include <string>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_function.hpp>
#include <boost/spirit/include/phoenix_statement.hpp>

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

struct MyGrammar :
    qi::grammar<std::string::const_iterator, int(), ascii::space_type>
{
    MyGrammar();
    void myFun(int i, qi::unused_type, qi::unused_type);

private:
    qi::rule<std::string::const_iterator, int(), ascii::space_type> myRule;
};

MyGrammar::MyGrammar() : MyGrammar::base_type(myRule)
{
    myRule = qi::int_[boost::bind(&MyGrammar::myFun, this, _1, _2, _3)];
}

void MyGrammar::myFun(int const i, qi::unused_type, qi::unused_type)
{
    std::cout << "read: " << i << '\n';
}

int main()
{
    std::string const input = "42";
    std::string::const_iterator first = input.begin(), last = input.end();
    qi::phrase_parse(first, last, MyGrammar(), ascii::space);
} 
```

话虽如此，除非您有非常具体的理由在`boost::bind`此处使用，否则您应该`boost::phoenix::bind`改用：

```
#include <string>
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_function.hpp>
#include <boost/spirit/include/phoenix_statement.hpp>
#include <boost/spirit/include/phoenix_bind.hpp>

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

struct MyGrammar :
    qi::grammar<std::string::const_iterator, int(), ascii::space_type>
{
    MyGrammar();
    void myFun(int i);

private:
    qi::rule<std::string::const_iterator, int(), ascii::space_type> myRule;
};

MyGrammar::MyGrammar() : MyGrammar::base_type(myRule)
{
    myRule = qi::int_[boost::phoenix::bind(&MyGrammar::myFun, this, qi::_1)];
}

void MyGrammar::myFun(int const i)
{
    std::cout << "read: " << i << '\n';
}

int main()
{
    std::string const input = "42";
    std::string::const_iterator first = input.begin(), last = input.end();
    qi::phrase_parse(first, last, MyGrammar(), ascii::space);
} 
```

这允许您的绑定成员函数只接受一个参数 - 综合属性 - 正如您最初想要的那样。

# android - 如何设置新管理员

> ID：10758079
> 
> 赞同：4
> 
> 时间：2012-05-25T16:25:29.890
> 
> 标签：android, admin

我正在使用设备策略管理器立即锁定安卓手机，这是我的活动代码：

```
package com.husam.admin;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.app.admin.DeviceAdminReceiver;
import android.app.admin.DevicePolicyManager;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;

public class AdminActivity extends Activity {

    /** Called when the activity is first created. */
    protected static final int REQUEST_CODE_ENABLE_ADMIN=1;
    DevicePolicyManager dpm;
    ComponentName mAdminName;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        dpm=(DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);   
        mAdminName=new ComponentName(this,MyAdmin.class);
        Button button=(Button)findViewById(R.id.admin);
        button.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {

                // TODO Auto-generated method stub
                if(dpm.isAdminActive(mAdminName))
                {
                    Log.w("Yes admin","Locking Now");
                    dpm.lockNow();  
                }
                else
                {Intent intent1 =new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
                intent1.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mAdminName);
                intent1.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "Need new Admin");
                Log.w("no Admin","Set admin");
                startActivityForResult(intent1,REQUEST_CODE_ENABLE_ADMIN);
                }

            }
        });

    }

     class MyAdmin extends DeviceAdminReceiver{

        void OnEnabled(){

        }
        void onDisable(){

        }
    }
} 
```

我的 Mainfest.xml 填充如下：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.husam.admin"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AdminActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver 
            android:name=".MyAdmin"
            android:label="@string/device_admin"
            android:permission="android.permission.BIND_DEVICE_ADMIN">
            <meta-data android:name="android.app.device_admin"
                android:resource="@xml/my_admin"/>
            <intent-filter>
                <action android:name="android.app.action.DEVICE_ADMIN_ENABLED"/>
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

和在 res 文件夹下的 xml 文件夹内的 my_admin.xml 如下：

```
<device-admin xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-policies>
        <force-lock />
    </uses-policies>
</device-admin> 
```

当我运行我的应用程序时，我的日志文件状态出现错误：

```
W/DeviceAdminAdd(433): Unable to retrieve device policy ComponentInfo{com.husam.admin/com.husam.admin.AdminActivity$MyAdmin} 
```

我在这个网站上搜索了类似的问题，但我发现的所有错误都是在关闭接收器之前的 mainfest 文件中，然后在其中包含肉类和意图过滤器，这不是我的情况。

因此，任何解决此问题的帮助或重定向将不胜感激

问候

胡萨姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:20:41.753

我想我找到了我上面发布的问题的答案。我需要做的是，在我的 mainfest 文件中注册我的接收器时，我必须执行以下操作：

```
 <receiver 
            android:name=".AdminActivity$MyAdmin"
            android:permission="android.permission.BIND_DEVICE_ADMIN">
            <meta-data android:name="android.app.device_admin"
                android:resource="@xml/my_admin"/>
            <intent-filter>
                <action android:name="android.app.action.DEVICE_ADMIN_ENABLED"/>
            </intent-filter>
        </receiver> 
```

笔记：

在`android:name`我必须写`.AdminActivity$Myadmin`而不是`.Myadmin`，因为我的管理广播接收器类是我活动中的一个**内部**类，而不是一个单独的类。

# tfs - 编程 TFS：如何找出服务器上是否存在特定文件？

> ID：10758081
> 
> 赞同：2
> 
> 时间：2012-05-25T16:25:39.977
> 
> 标签：tfs

如何以编程方式找出 TFS 服务器上是否存在特定文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T16:30:57.950

您可以通过`ServerItemExists()`在`VersionControlServer`.

```
using (var tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(
    new Uri("http://tfs:8080/tfs/DefaultCollection")))
{
    var server = tfs.GetService<VersionControlServer>();

    Boolean doesFileExist = server.ServerItemExists("$/Project/Main/MySoltuion.sln", ItemType.File);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:30:26.373

自己找到了答案：
ServerItemExists 方法
[http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.serveritemexists(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.serveritemexists(v=vs.100).aspx)
[http://social.msdn .microsoft.com/Forums/pl-PL/vsx/thread/306753e5-8dc4-4f56-9748-9082db3f0c24](http://social.msdn.microsoft.com/Forums/pl-PL/vsx/thread/306753e5-8dc4-4f56-9748-9082db3f0c24)

# cassandra - 用于将日志文件加载到 cassandra 的堆栈

> ID：10758082
> 
> 赞同：3
> 
> 时间：2012-05-25T16:25:40.903
> 
> 标签：cassandra, apache-pig

我想定期（每小时）将我的应用程序日志加载到 Cassandra 中，以便使用 pig 进行分析。

这通常是如何完成的？有没有专注于此的项目？

我看到[mumakil](https://github.com/Ganglion/mumakil)通常用于批量加载数据。我可以编写一个围绕它构建的 cron 作业，但希望能写出比我准备的作业更强大的东西。

如果可以的话，我也愿意修改应用程序以另一种格式存储数据（如系统日志或直接存储到 Cassandra）。虽然在那种情况下，如果 Cassandra 不可用，我会担心数据丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:38:51.713

如果您打算使用 Flume，则需要编写一个自定义的 Flume 接收器（不难）。您可以在[https://github.com/geminitech/logprocessing](https://github.com/geminitech/logprocessing)上对其进行建模。

如果您想使用 Pig，我同意您应该使用 HDFS（或 S3）的另一张海报。Hadoop 旨在与块巨大的块存储一起工作。这可以防止您因执行大量磁盘查找和网络 IO 而获得糟糕的 IO 性能。虽然您可以将 Pig 与 Cassandra 一起使用，但您会遇到 Cassandra 数据模型的问题，并且性能会差很多。

但是，如果您真的想使用 Cassandra 并且您对 Flume 没有死心，我建议您使用 Kafka 和 Storm。

我使用 Storm 将日志文件加载到 Cassandra 的工作流程是：

1.  Kafka 收集日志（例如使用 log4j appender）
2.  日志使用storm-kafka进入storm集群
3.  使用自定义 Storm bolts 解析日志行并将其插入 Cassandra（编写 Storm bolts 非常容易）。还有一个 Storm-cassandra 螺栓已经可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T13:40:28.750

[您应该考虑使用Flume](https://cwiki.apache.org/FLUME/)将它们加载到 HDFS 中，因为这些项目就是为此目的而设计的。然后，您可以直接对您的非结构化/半结构化日志数据使用 Pig。

# jsf - 当 JSF 2 的视图中存在元数据转换器时，为什么 JSTL-JSF2 不能正常工作

> ID：10758085
> 
> 赞同：3
> 
> 时间：2012-05-25T16:25:52.463
> 
> 标签：jsf, jsf-2, jstl, java-ee-6

仅当在 JSF 视图中删除 JSTL 代码时，按钮才调用操作方法，我知道它是生命周期，但我不明白原因/问题。我喜欢妥协，因为它会出现这种行为。

**查看代码工作正常**

```
 <f:metadata>            
<f:viewParam name="idAsociacion" value="#{msgUsuario.asociacion}" converter="#
               {asociacionConverter}"
        converterMessage="#msg['aplicacion.asociacion.error.converter']}" required="true" 
        requiredMessage="#{msg['aplicacion.asociacion.error.required']}" />
<f:viewParam name="idMsg" value="#{msgUsuario.mensajeRespondido}" converter="#
     {mensajeConverter}" converterMessage="#{msg['aplicacion.mensaje.error.converter']}" 
     required="true" requiredMessage="#{msg['aplicacion.mensaje.error.required']}" />
    </f:metadata>

    <ui:decorate template="/WEB-INF/templates/mainUsuario-template.xhtml">
    <ui:define name="title">        
    <h:outputFormat value="#{msg['usuario.escribirMsj.title']}">
        <f:param value="#{msgUsuario.asociacion.nombre}" />
    </h:outputFormat>
    </ui:define>

    <ui:param name="descripcionView" value="#{msg['usuario.escribirMsj.descripcion']}" />

     <ui:define name="content">
<h:panelGroup layout="block"
          id="escribirMensajeContainer"styleClass="escribirMensajeContainer">
    <h:form>
        <p:panelGrid>
        <p:row>
        <p:column>
        <h:outputLabel for="texto" value="#{msg['usuario.escribirMsj.mensaje']}" 
                 styleClass="labelInput" />
        </p:column>
        </p:row>

        <p:row>
        <p:column>
        <p:inputTextarea  autoResize="true" cols="80" rows="15" id="texto" 
             maxlength="500" value="#{msgUsuario.texto}">

        </p:inputTextarea>
            </p:column>
        </p:row>

        <p:row>
    <p:column>
    <h:message for="texto" id="messageMensajeError" styleClass="messageError" />
    </p:column>                         
        </p:row>

        <p:row>         
             <p:column>
    <p:commandButton action="#{msgUsuario.enviar}" 
               alt="#{msg['usuario.escribirMsj.alt.enviar']}" tabindex="2" title="#
      {fn:replace(msg['usuario.escribirMsj.title.enviar'],0,msgUsuario.asociacion.nombre)}" 
       value="#{msg['usuario.escribirMsj.enviar']}" />
</p:column>                         
    </p:row>                            
    </p:panelGrid>
    </h:form>
    </h:panelGroup>         
    </ui:define>
    </ui:decorate>
    </html> 
```

但是，如果我添加 JSTL，我将在下面显示。视图渲染得很好，因为消息没有得到响应，但按钮从不调用操作方法并且视图重新加载。

```
 <c:choose>
      <c:when test="#{msgUsuario.mensajeRespondido.respondido==false}">
        <h:form>
        <p:panelGrid>
        <p:row>
        <p:column>
        <h:outputLabel for="texto" value="#{msg['usuario.escribirMsj.mensaje']}" 
                 styleClass="labelInput" />
        </p:column>
        </p:row>

        <p:row>
        <p:column>
        <p:inputTextarea  autoResize="true" cols="80" rows="15" id="texto" 
             maxlength="500" value="#{msgUsuario.texto}">

        </p:inputTextarea>
            </p:column>
        </p:row>

        <p:row>
    <p:column>
    <h:message for="texto" id="messageMensajeError" styleClass="messageError" />
    </p:column>                         
        </p:row>

        <p:row>         
             <p:column>
    <p:commandButton action="#{msgUsuario.enviar}" 
               alt="#{msg['usuario.escribirMsj.alt.enviar']}" tabindex="2" title="#
      {fn:replace(msg['usuario.escribirMsj.title.enviar'],0,msgUsuario.asociacion.nombre)}" 
       value="#{msg['usuario.escribirMsj.enviar']}" />
</p:column>                         
    </p:row>                            
    </p:panelGrid>
    </h:form>
    </c:when>
    <c:otherwise>
         <h:outputText value="MESSAGE RESPONSED" />
    </c:otherwise>
    </c:choose> 
```

**注意：转换在两种情况下都可以正常工作。**

**ManagedBean 代码**

```
 @ManagedBean(name="msgUsuario")
  @ViewScoped
  public class EscribirMensajeUsuarioView implements Serializable {

private static final long serialVersionUID = 1L;
private static final Logger logger=Logger.getLogger(EscribirMensajeUsuarioView.class);

private Asociacion asociacion;

private Mensaje mensajeRespondido;

private Usuario usuario;

private String texto;

private boolean usuarioBloqueado;

@ManagedProperty(value="#{mensajeBO}")
private MensajeBO mensajeBo;

@ManagedProperty(value="#{usuarioBO}")
private UsuarioBO usuarioBo;

/* Never invoked with JSTL code in the view */

public String enviar(){
    logger.info("EscribirMensajesUsuarioView.enviar");

    TipoMensaje tipoMensaje=null;
    Mensaje mensaje=this.mensajeRespondido;

    .................
            .................
            .................
      }

/* Getters and Setters */
   } 
```

我读了这个 Balusc 的评论

“JSF 和 JSTL 不会像您对编码所期望的那样同步运行。JSTL 在视图的构建期间运行（当要填充 JSF 组件树时），而 JSF 在视图组件树的渲染期间运行（当要生成 HTML 输出时）。您可以将其可视化为：JSTL 先从上到下运行，然后将结果交给 JSF，JSF 又从上到下运行。

例如，我在 dinamyc 数据表中理解这一点，但在这种情况下不是。因为 JSTL 可以很好地呈现**mensajeRepetido**在 JSF 树中退出的视图，但按钮不会调用该方法。但是视图重新加载和**mensajeRepetido**再次由转换器退出。

亲切的问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T16:33:23.393

您的问题是由于您将 JSTL 属性绑定到**视图范围**的托管 bean 属性而引起的。这仅在关闭部分状态保存时才有效。打开部分状态保存（默认情况下）后，JSTL 属性将获得它自己的视图范围 bean 的**第二个**实例（所有属性都设置为默认值！），而不是存储在 JSF 视图状态中并由 JSF 使用的实例成分。

只需使用 JSF 组件的`rendered`属性而不是通常的方式，并且使用 JSTL 仅控制视图的构建，而不是控制视图的呈现。

```
<h:form rendered="#{not msgUsuario.mensajeRespondido.respondido}">
    ...
<h:form>
<h:panelGroup rendered="#{msgUsuario.mensajeRespondido.respondido}">
     <h:outputText value="MESSAGE RESPONSED" />
</h:panelGroup> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)
*   [JSF 2.0 中的通信 -`@ViewScoped`在标记处理程序中失败](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)

# vbscript - 如何修复文件扩展名并在修复后移动文件？

> ID：10758087
> 
> 赞同：0
> 
> 时间：2012-05-25T16:25:57.047
> 
> 标签：vbscript

我有一堆我每周收到一次的 PDF 文件。

其中一些文件要么有错误的扩展名，要么根本没有。

有时，它就像 file1.pdd、file.ptf 等

下面的脚本应该遍历所有文件以查找没有 .pdf 扩展名的文件。

如果找到，请使用正确的扩展名进行修复。

例如，代码应该将filed.pdd 更改为file1.pdf。

修复扩展后，将文件移动到另一个位置。

它没有修复扩展名，也没有移动文件。

任何帮助是极大的赞赏。

```
Set FSO = CreateObject("Scripting.FileSystemObject") 
Set pdfFolder = FSO.GetFolder( "C:\Folder1\Subfolder\") 

For Each fil In pdfFolder.Files 
     ' check each file to be sure it fits the pattern 
     fname = fil.Name 
     suffix = LCase( Right( fname, 4 ) ) 
     prefix = Left( fname, 8 ) 
     ' so suffix has to be right, prefix has to have two slashes, and prefix has to be a date: 
     If UBound( Split(prefix,"/") ) = 2 AND IsDate(prefix) AND suffix = ".pdf" Then 
         newName = Mid( fname, 9 ) 
        ' Response.Write "Renaming '" & fname & "' to '" & newName & "'<br/>" & vbNewLine 
         fil.Move "E:\Folder2\Fixed\" & newName 
     End If 
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:02:02.960

您应该使用 FileSystemObject 的专用方法，而不是将文件规范视为另一个字符串：

```
Option Explicit
Dim goFS : Set goFS = CreateObject("Scripting.FileSystemObject")
Dim aTests : aTests = Array(_
    "good.pdf" _
  , "pddext.pdd" _
  , "ucase.PDf" _
  , "noext" _
  , "more tests please.pdf" _
)
Dim sTest
For Each sTest In aTests
    WScript.Echo "  ", qq(sTest)
    WScript.Echo "=>", qq(goFS.GetBaseName(sTest) & ".pdf")
Next

Function qq(sText)
  qq = """" & sText & """"
End Function 
```

输出：

```
cscript 02.vbs
   "good.pdf"
=> "good.pdf"
   "pddext.pdd"
=> "pddext.pdf"
   "ucase.PDf"
=> "ucase.pdf"
   "noext"
=> "noext.pdf"
   "more tests please.pdf"
=> "more tests please.pdf" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:51:00.973

此代码应该可以解决您的问题：

```
Set Fso = CreateObject("Scripting.FileSystemObject") 
Set PdfFolder = Fso.GetFolder("C:\Folder1\Subfolder\") 
For Each x In PdfFolder.Files 
    Fname = x.Name 
    If LCase(Right(Fname, 4)) <> ".pdf" Then
        Fso.MoveFile Fname, "E:\Folder2\Fixed\" & Fso.GetBaseName(Fname) & ".pdf"
    End If 
Next 
```

我希望我有所帮助。

# regex - 在 Yahoo Pipes 中使用正则表达式获取标签之间的值

> ID：10758088
> 
> 赞同：0
> 
> 时间：2012-05-25T16:26:07.640
> 
> 标签：regex, yahoo-pipes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T00:04:15.193

I posted this question to Twitter and got a response back that worked for me.

```
(?s)^.*<b>(.*?)</b>.* 
```

Replace with $1 and have G flag checked.

This solution did everything I needed. I had additional data that I had already excluded in my example that became unnecessary with this regex.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:29:53.597

假设 html 不包含引号等，这应该符合您的需求。请注意，`+`将意味着空`<b>`标签被忽略。此外，html 并不是真正可以通过正则表达式传递的，因此这仅适用于基本标签。即使标签具有 ID 或类属性，它也应该可以工作，但绝对有办法打破这个正则表达式。

```
/<b[^>]*>([^<]+)<\/b>/ 
```

# javascript - 地理定位在 iPhone 上不起作用

> ID：10758093
> 
> 赞同：-1
> 
> 时间：2012-05-25T16:26:41.650
> 
> 标签：javascript, geolocation

我曾尝试使用 javascript GEOlocation aAPI 在 iphoen 上获取我的坐标，但它不起作用。这是我测试过的一个简单示例[http://mapscripting.com/how-to-use-geolocation-in-mobile-safari](http://mapscripting.com/how-to-use-geolocation-in-mobile-safari)，然后弹出一个警报并说“找不到位置”

我已经尝试了网络上的其他各种示例，但没有任何效果。请帮忙，这让我发疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:15:37.717

排序。Safari 位置设置已关闭。我从来没有碰过这个设置，所以担心其他人默认关闭这个设置，据我所知，没有办法用javascript检查这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:57:37.050

iOS 上的“找不到位置”表示您的设备当前无法连接到 GPS 卫星。

试着去外面也许......？;)

# oracle - 是否可以在使用 BOM 编码为 UTF-8 的文件上运行 SQLPLUS 脚本

> ID：10758094
> 
> 赞同：7
> 
> 时间：2012-05-25T16:26:46.940
> 
> 标签：oracle, utf-8, plsql, byte-order-mark

我正在尝试运行从大量来源自动生成的脚本集合。不幸的是，其中一些已生成为带有 BOM 的 UTF-8。我有一个自动删除 BOM 的系统，但它的过程有点混乱。

未能删除 BOM 会生成错误：

```
SP2-0042: unknown command "ï»¿" - rest of line ignored. 
```

是否可以在具有 BOM 的脚本文件上运行 SQLPLUS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:41:29.017

[可以使用这样的脚本运行 SQLPLUS，但由于BOM](http://en.wikipedia.org/wiki/Byte_order_mark)，SQLPLUS 会在第一行指示错误。
可能你想问你是否可以避免这个错误 -**这是不可能的**，AFAIK。[埃尔文](http://toadfororacle.com/thread.jspa?threadID=28951)也是这么想的。

您可以通过生成具有空第一行的文件来解决丢失任何信息的问题。然后你可以忽略这个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-27T23:42:26.973

这已经是 Oracle 6 年多以来一直存在的一个错误，但看起来他们对修复它并不感兴趣。

他们的“推荐解决方法”（[文档 ID 788156.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=788156.1#aref_section341)第 C.6 节）是剥离 BOM 或使您的第一个脚本行成为注释，然后忽略此错误。

> SP2-0042：未知命令“∩╗┐” - 忽略行的其余部分。

或者

> SP2-0734：未知命令开头“-- Commen ...” - 忽略行的其余部分。

[错误 13515585 详细信息](https://support.oracle.com/epmos/faces/BugDisplay?id=13515585)（需要 OTN 登录）：

```
Bug 13515585: ADD SUPPORT FOR THE UTF-8 BOM IN SQLPLUS
Bug Status: Internal (Oracle) Review 
Created: 19-Dec-2011 
Updated: 29-Sep-2015 
```

# python - 带有被访问键记忆的Python字典？

> ID：10758095
> 
> 赞同：9
> 
> 时间：2012-05-25T16:26:49.187
> 
> 标签：python, dictionary

我想创建一个数据结构，其行为类似于字典，并具有一个附加功能，即跟踪哪些键已被“使用”。请注意，我不能在重复使用时弹出这些值。

该结构应支持这三种情况，即在访问时将密钥标记为已使用：

```
if key in d:
    ...
d[key]
d.get(key) 
```

这是我写的：

```
class DictWithMemory(dict):

    def __init__(self, *args, **kwargs):
        self.memory = set()
        return super(DictWithMemory, self).__init__(*args, **kwargs)

    def __getitem__(self, key):
        self.memory.add(key)
        return super(DictWithMemory, self).__getitem__(key)

    def __contains__(self, key):
        self.memory.add(key)
        return super(DictWithMemory, self).__contains__(key)

    def get(self, key, d=None):
        self.memory.add(key)
        return super(DictWithMemory, self).get(key, d)

    def unused_keys(self):
        """
        Returns the list of unused keys.
        """
        return set(self.keys()).difference(self.memory) 
```

由于我对dict的内部不是很熟悉，有没有更好的方法来实现这个结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:48:38.303

这是一个将元类中的所有内容抽象出来的解决方案。我不确定这是否真的更优雅，但如果您改变主意如何存储使用过的密钥，它确实提供了一些封装：

```
class KeyRememberer(type):

    def __new__(meta, classname, bases, classDict):
        cls = type.__new__(meta, classname, bases, classDict)

        # Define init that creates the set of remembered keys
        def __init__(self, *args, **kwargs):
            self.memory = set()
            return super(cls, self).__init__(*args, **kwargs)
        cls.__init__ = __init__

        # Decorator that stores a requested key in the cache
        def remember(f):
            def _(self, key, *args, **kwargs):
                self.memory.add(key)
                return f(self, key, *args, **kwargs)
            return _

        # Apply the decorator to each of the default implementations
        for method_name in [  '__getitem__', '__contains__', 'get' ]:
            m = getattr(cls, method_name)
            setattr(cls, method_name, remember(m))

        return cls

class DictWithMemory(dict):

    # A metaclass that ensures the object
    # has a set called 'memory' as an attribute,
    # which is updated on each call to __getitem__,
    # __contains__, or get.
    __metaclass__ = KeyRememberer

    def unused_keys(self):
        """
        Returns the list of unused keys.
        """
        print "Used", self.memory
        return list(set(super(DictWithMemory,
                              self).keys()).difference(self.memory)) 
```

# c# - 尝试使用 ENTER 键在 gridview 的最后一行结束编辑单元格

> ID：10758097
> 
> 赞同：0
> 
> 时间：2012-05-25T16:26:50.873
> 
> 标签：c#, winforms, gridview, keypress, keydown

我在 WinForm 中有一个 Gridview。我有一列我编辑的gridview。我可以单击单元格编辑并按 Enter 键以完成对除最后一行中的单元格之外的每个单元格的编辑。当下面没有要更改的行时，“enter”键什么也不做。我尝试使用 _keyPress 和 _keyDown 事件将“enter”键更改为一个选项卡，该选项卡允许用户正常进行编辑并按 Enter 提交更改。

如果有人有任何意见，我将不胜感激。

目前，当我选择一个单元格时，它会进入编辑模式，当不再选择单元格时，我会调用我的 endedit 事件并提交任何更改。

我尝试添加一个 EditingControlShowingEvent，下面的代码是尝试将一个事件分配给正在编辑的控件，希望它会调用 keydown 事件。但它仍然没有。

```
private void dg_EditingControlSHowing(object sender,DataGridViewEditingControlShowingEventArgs e)
{
e.Control.KeyDown += new KeyEventHandler(Control_KeyDown);
}                                                              
private void Control_KeyDown(object sender, KeyEventArgs e)
{
if(e.KeyData == Keys.Enter)
{
 this.ProcessTabKey(true);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T14:05:45.667

```
if(e.KeyData == Keys.Enter)
{
this.ProcessTabKey(true);
  if(datagrid1.Rows[grid.Rows.Count - 1].Selected == true){
    //run your event here
  }
} 
```

这是我唯一能想到的。它会检查您的最后一行是否被选中，以便它可以进行另一个过程，例如，您可以让它在遇到该位时添加一个新行。

我不是 100% 确定这就是你需要的，但我希望它对一种方法有所帮助或给你一个想法

# iphone - MPMoviePlayerController 不播放视频

> ID：10758098
> 
> 赞同：2
> 
> 时间：2012-05-25T16:27:01.260
> 
> 标签：iphone, ios5, video, mpmovieplayercontroller

我想在 iphone 应用程序中播放视频，我正在使用 MPMoviePlayerController。它曾经工作正常，但突然当我尝试集成播放视频的 viewcontroller 类时，它停止播放。我尝试导入 MediaPlayer 框架并做了很多研发工作，但仍然无法正常工作。我正在使用此代码..

```
NSURL    *fileURL    =   [NSURL URLWithString:xmlParser.videoUrlLink];
self.moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:self.moviePlayerController];
//[moviePlayerController setControlStyle:MPMovieControlStyleEmbedded];
[self.moviePlayerController.view setFrame:CGRectMake(5,65,307,200)];    
[self.view addSubview:self.moviePlayerController.view];
[self.moviePlayerController play]; 
```

我收到一条警告，并且即使在播放视频之前，moviePlayBackDidFinish: 方法也会被反复调用。警告是

```
An instance 0x168da0 of class AVPlayerItem was deallocated while key value observers 
were still registered with it. Observation info was leaked, and may even become 
mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to stop 
here in the debugger. Here's the current observation info: ( Context: 0x0, Property: 
0x10b570> Context: 0x0, Property: 0x117ab0> 
```

有人可以帮助我如何摆脱这种情况....这将有很大帮助....

# php - 如何创建以 API 为中心的应用程序（更具体地说：用于 CodeIgniter 中的 HMVC）

> ID：10758100
> 
> 赞同：6
> 
> 时间：2012-05-25T16:27:06.513
> 
> 标签：php, codeigniter, rest

### 背景：

我正在开发一个 Web 应用程序，我计划在不久的将来推出 iPhone 和 Android 版本，我对开发供不同前端使用的 API 有一些疑问。

### 我从这个开始：

我正在阅读[这个 TutsPlus 教程](http://net.tutsplus.com/tutorials/php/creating-an-api-centric-web-application/comment-page-1)，其中讨论了创建以 API 为中心的 Web 应用程序，这意味着您的所有浏览器调用和智能手机应用程序调用都通过 API 进行路由。

让我特别兴奋的是 Twitter 教程中的这句话：

> 最重要的架构变化之一是 Twitter.com 现在是我们自己的 API 的客户端。它从移动网站、我们的 iPhone、iPad、Android 应用程序以及每个第三方应用程序使用的相同端点获取数据。

上面的陈述反映了我理想中想要创造的东西。

### 然后我看到了这个：

我找到[了这个 TutsPlus 教程](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2)，其中讨论了如何为 CodeIgniter 构建 REST API。这很好，因为我正在 CodeIgniter 中使用[Modular Extensions 插件 - HMVC](http://codeigniter.com/wiki/Modular_Extensions_-_HMVC/)开发我的应用程序，我认为它非常适合我的目的。

唯一让我有些不知所措的是[Phil Sturgeon](https://stackoverflow.com/users/124378/phil-sturgeon)似乎[建议](http://philsturgeon.co.uk/blog/2009/06/REST-implementation-for-CodeIgniter)创建 API 的方式。他建议完成所有前端代码模块，然后为各自目录中的每个模块创建一个 API（不一定按此顺序）。如果我不希望它以 API 为中心，这会很好。

## 我想知道如何做到这一点：

我应该如何继续获得两个教程的融合：

*   可以由浏览器应用程序以及单独的移动应用程序使用的以 API 为中心的应用程序
*   CodeIgniter 的 REST API（带有 HMVC 模块）

我是不是该：

*   只需按照以 API 为中心的教程并尝试根据我的需要对其进行调整？
*   遵循 CodeIgniter 特定的教程并使用 Phil Sturgeon 的建议来了解如何使用 HVMC 实现它？
*   两者的结合？
*   两者都不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T15:17:02.370

看看尼克杰克逊的《[吃你自己的狗粮》。](http://www.slideshare.net/jacksonj04/api-driven-development)这些是来自 CICONF 2012 的幻灯片，他详细介绍了这一切是如何工作的。

首先构建您的 API 是一个好主意，然后您的应用程序可以使用 API 来获取数据本身。当您在数据上添加 HTTP 请求时，这当然会慢一些，但在本地它还不错，如果您使用 HMVC 发出请求，它会更快。

在本教程中，我没有进入 HMVC，因为它是一个额外的主题，但是添加模块化 API 会很棒。在一些简单的应用程序中，我只是像教程建议的那样创建一个 /api 文件夹，但是 PyroCMS Professional 有一个 API 模块和一个允许模块化 API 东西的性感路线：

```
$route['api/([a-zA-Z0-9_-]+)/(:any)']       = '$1/api/$2';
$route['api/([a-zA-Z0-9_-]+)']              = '$1/api/index'; 
```

这意味着我可以在每个模块中都有一个“api.php”控制器，并且仍然使用 /api/controller/method 语法，甚至 /api/controller 如果你有`function index_get()`.

我强烈建议您使用 PyroCMS Professional 来使用此功能。是的，您必须付费，但它可以立即处理用户密钥生成、授权、日志记录等，还可以处理您的网站。

# bash - 传递给 pkgbuild 时，Shell 脚本不会替换字符串变量

> ID：10758102
> 
> 赞同：1
> 
> 时间：2012-05-25T16:27:21.770
> 
> 标签：bash, shell, installation

我在 OSX 上调用 pkgbuild 命令，如下所示：

```
NAME="Product"
IDENTIFIER="com.${NAME}Package"
pkgbuild --identifier "${IDENTIFIER}" --root "${CONTENTROOT}" "Installer.pkg" 
```

当我回应时，`Identifier`我得到`com.ProductPackage`了你所期望的。当我像这样运行 pkgbuild 时，提取生成的 .pkg 文件并查看文件`PackageInfo`，它显示如下内容：

`<pkg-info overwrite-permissions="true" relocatable="false" identifier="com.${NAME}Package" ...`

由于某些原因，除标识符之外的所有其他参数都被正确替换。

这里出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:37:03.123

我能想到的唯一方法是，如果您在作业中使用单引号，如下所示：

```
IDENTIFIER='com.${NAME}Package' 
```

我注意到您提到了回显“标识符”（注意大小写的区别）。这让你感到困惑吗？

# c# - 当我打印位图时，它会吃掉一些

> ID：10758103
> 
> 赞同：3
> 
> 时间：2012-05-25T16:27:24.103
> 
> 标签：c#, bitmap, printdocument, printdialog

在我的应用程序中，我有一个图表，它被包围在一个面板内。我从工具箱中添加了一个 printdocument 组件，当我想打印图表时，我正在创建一个位图，并且我在位图内获得了面板（结果是面板内的图表）。我的问题是，当我创建位图时，当我将它发送到打印机进行打印时，它会从底部和右侧吃掉一些图表。下面是我执行这个的代码

```
private void button1_Click(object sender, EventArgs e)
    {
        PrintDialog printDialog = new PrintDialog();
        printDialog.Document = printDocument1;
        printDialog.UseEXDialog = true;
        //Get the document

        if (DialogResult.OK == printDialog.ShowDialog())
        {
            printDocument1.DocumentName = "Test Page Print";
            printPreviewDialog1.Document = printDocument1;

            if (DialogResult.OK == printPreviewDialog1.ShowDialog())
            printDocument1.Print();
        }
    } 
```

这是初始化 print_document 的按钮。（我添加了一个打印预览，这样我就不必每次都打印它并花费纸张和墨水）

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        Bitmap bm = new Bitmap(this.panel1.Width, this.panel1.Height);
        this.panel1.DrawToBitmap(bm, new Rectangle(50, 50, this.panel1.Width + 50, this.panel1.Height + 50));
        e.Graphics.DrawImage(bm, 0, 0);
    } 
```

我在想也许图表太大了，它不适合页面，但如果我保存位图。它适合页面内部实际上底部和右侧有太多可用空间。（绘制到位图功能后添加

```
bm.Save(@"c:\LOAN_GRAPH.png"); 
```

而不是绘制图像，图像保存在 c 中:)

任何可以帮助我的人都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:34:01.493

它的工作。我删除了面板，而是根据我的图表创建了矩形。

```
Bitmap bm = new Bitmap(this.chart1.Width, this.chart1.Height);
    this.chart1.DrawToBitmap(bm, new Rectangle(50, 50, this.chart1.Width + 50, this.chart1.Height + 50));
    e.Graphics.DrawImage(bm, 0, 0); 
```

# php - cURL 和网络浏览器的区别？

> ID：10758105
> 
> 赞同：2
> 
> 时间：2012-05-25T16:27:31.803
> 
> 标签：php, curl, get

我正在尝试从以下网址检索网页：

[http://www.medicare.gov/find-a-doctor/provider-results.aspx?searchtype=OHP&specgrpids=922&loc=43615&pref=No&gender=Unknown&dist=25&lat=41.65603&lng=-83.66676](http://www.medicare.gov/find-a-doctor/provider-results.aspx?searchtype=OHP&specgrpids=922&loc=43615&pref=No&gender=Unknown&dist=25&lat=41.65603&lng=-83.66676)

当我将它粘贴到浏览器中时它可以工作，但是当我通过 cURL 运行它时，我收到一个带有以下错误的页面：**“请求的 url 的一个或多个查询字符串参数无效或具有意外值，请更正并重试。”**

如果我提供不同的 userAgent 或推荐人，这似乎没有什么区别。有一个重定向，所以我使用 CURLOPT_FOLLOWLOCATION。

这是我的代码：

```
$ch = curl_init($page);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$html = curl_exec($ch);
curl_close($ch);
echo $html; 
```

关于为什么这样的请求可以在浏览器中工作而不是 cURL 的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:33:37.370

您的浏览器正在发送 cURL 没有发送的 cookie。使用浏览器工具或 Fidler 检查您发送到站点的 cookie - 您需要传递相同的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:33:39.993

问题出在 cookie 上。该特定站点需要设置 ASP.NET_SessionId cookie 才能响应。我在我的 cURL 请求中添加了以下内容：

```
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt');
curl_setopt($ch, CURLOPT_COOKIE, 'ASP.NET_SessionId=ho1pqwa0nb3ys3441alenm45; path=/; domain=www.medicare.gov'); 
```

我不知道是否有任何会话 id 会起作用，但它尝试了几个随机的，它们都起作用了。

# vb.net - 用于图像打印的 VB.NET 工具 - 质量调整

> ID：10758106
> 
> 赞同：0
> 
> 时间：2012-05-25T16:27:34.477
> 
> 标签：vb.net, printing, image

我正在开发一种使用佳能 selpy cp800 轻松进行图片打印的工具。使用以下方法打印图像：

```
Private Sub BtnPrintClick(sender As Object, e As System.EventArgs) Handles ptnPrint.Click
    If PrintDialog1.ShowDialog() = DialogResult.OK Then
        pdPrintImage.Print()
    End If
End Sub

Private Sub PdPrintImagePrintPage(sender As Object, e As System.Drawing.Printing.PrintPageEventArgs) Handles pdPrintImage.PrintPage
    e.Graphics.DrawImage(_dPictures(_sPictures(_iActiveImage)).Picture, e.Graphics.VisibleClipBounds)
End Sub 
```

_dPictures(_sPictures(_iActiveImage)).Picture --> image 类型的对象

我没有对这张图片做任何事情。它仅使用 Image.FromFile() 方法加载。

在下图中，您可以看到我的问题。这是使用此方法打印的图像的扫描（顶部）和使用 windows 图片查看器打印的相同图像的扫描。你看，你看到的第一张图像背景和阴影中的色调错误。

![在此处输入图像描述](../Images/f161170feb5546deeb70236227225ef5.png)

有没有人想办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:08:47.897

如果这不是 Boo 提到的有点深度的问题，那么设置其中一个或两个可能会有所帮助

```
e.Graphics.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic
e.Graphics.SmoothingMode = Drawing2D.SmoothingMode.HighQuality 
```

在执行 .DrawImage 之前。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-04T09:57:35.630

我取得的最佳质量如下： 1）我使用组件 iTextsharp 将图片放入 pdf。2）打印pdf

# javascript - 使用正则表达式键匹配Javascript循环遍历对象获取值

> ID：10758112
> 
> 赞同：12
> 
> 时间：2012-05-25T16:27:56.553
> 
> 标签：javascript, jquery, json, object

```
var obj = {
 Fname1: "John",
 Lname1: "Smith",
 Age1: "23",
 Fname2: "Jerry",
 Lname2: "Smith",
 Age2: "24"
} 
```

使用像这样的对象。我可以在 Fname*,Lname* 之类的键上使用正则表达式获取值并获取值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T16:35:55.653

是的，当然可以。就是这样：

```
for(var key in obj) {
    if(/^Fname/.test(key))
        ... do something with obj[key]
} 
```

这是正则表达式的方式，但对于简单的东西，您可能想要使用`indexOf()`. 如何？就是这样：

```
for(var key in obj) {
    if(key.indexOf('Fname') == 0) // or any other index.
        ... do something with obj[key]
} 
```

如果你想对属性列表做一些事情，我的意思是你想要所有属性的值，你可以使用一个数组来存储这些属性，使用 regex/indexOf 匹配它们 - 无论方便 - 并用这些值做一些事情...我会把这个任务留给你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T16:31:13.490

您可以通过使用更完整的对象来回避整个问题：

```
var objarr =  [
            {fname: "John",  lname: "Smith", age: "23"},
            {fname: "jerry", lname: "smith", age: "24"}
          ] ;

objarr[0].fname; // = "John"
objarr[1].age;   // = "24" 
```

或者，如果你真的需要一个对象：

```
var obj =  { people: [
            {fname: "John",  lname: "Smith", age: "23"},
            {fname: "jerry", lname: "smith", age: "24"}
          ]} ;

obj.people[0].fname; // = "John"
obj.people[1].age;   // = "24" 
```

现在，您可以通过改变数组索引轻松地循环遍历数组，而不是使用正则表达式：

```
for (var i=0; i<obj.people.length; i++) {
    var fname = obj.people[i].fname;
    // do something with fname
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T16:31:05.577

```
values = []
for(name in obj) {
   if (obj.hasOwnProperty(name) && name.test(/Fname|Lname/i) values[name] = obj[name];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T16:32:27.553

使用 jquery：

```
$.each(obj, function (index,value) {
    //DO SOMETHING HERE WITH VARIABLES INDEX AND VALUE
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-11T09:59:26.943

## 使用包含（）的快速键匹配器

我喜欢新的[包含](https://github.com/tc39/Array.prototype.includes)功能。您可以使用它来检查键是否存在或返回其值。

```
var obj = {
   Fname1: "John",
   Lname1: "Smith",
   Age1: "23",
   Fname2: "Jerry",
   Lname2: "Smith",
   Age2: "24"
};
var keyMatch = function (object, str) {
for (var key in object) {
    if (key.includes(str)) {
        return key;
    }
}
return false;
};
var valMatch = function (object, str) {
for (var key in object) {
    if (key.includes(str)) {
        return object[key];
    }
}
return false;
};

// usage

console.log(keyMatch(obj, 'Fn')) // test exists returns key => "Fname1"
console.log(valMatch(obj, 'Fn')) // return value => "John" 
```

如果你还没有进行 ES2015 编译，你可以使用

`~key.indexOf(str)`

# java - 能够运行 shell 脚本，但不能运行来自 java 的 Runtime.getRuntime().exec() 的 curl 命令

> ID：10758115
> 
> 赞同：1
> 
> 时间：2012-05-25T16:28:16.847
> 
> 标签：java, linux, shell, curl, libcurl

我正在尝试通过 java 的运行时从 java 进行 curl POST。当我在其中运行带有命令“curl -vF etc”的shell脚本时，代码按预期运行，但是如果我尝试将命令作为正确转义的字符串拉入java，它会给出以下异常/错误“Protocol”http not在 libcurlcurl 中支持或禁用""

```
String cmd = "./go.sh";
Process process = Runtime.getRuntime().exec(cmd);
//etc... 
```

对比

```
String cmd = "curl -vF etc";//found in go.sh
Process process = Runtime.getRuntime().exec(cmd);
//etc... 
```

输出

```
"Curl Executed Correctly"
//proprietary 
```

对比

```
* Protocol "http not supported or disabled in libcurlcurl: (1) Protocol "http not supported or disabled in libcurl 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:48:54.550

一小段谷歌搜索显示的[这个页面](http://17thdegree.com/archives/2008/02/26/protocol-https-not-supported-or-disabled-in-libcurl/)。这表明您的字符串不正确。

# css - 如何强制嵌入链接使用我的 CSS 样式

> ID：10758116
> 
> 赞同：1
> 
> 时间：2012-05-25T16:28:20.807
> 
> 标签：css

我必须在我的网站中使用嵌入式搜索引擎，它有自己的风格。现在我想改变我网站中显示的表格的背景颜色。你能告诉我这是否可能吗？我已经尝试在我的页面标题中添加一些样式，但链接仍然遵循原始样式表中的样式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:36:27.277

如果嵌入页面不是由同一个域（包括端口）提供服务，这是不可能的。

那是安全限制。

如果您想要这种交互，您需要对嵌入页面的服务器进行一些控制才能设置权限：[https ://developer.mozilla.org/en/http_access_control](https://developer.mozilla.org/en/http_access_control)

另一个（流氓）解决方案是获取页面服务器端并将其直接嵌入到您的页面中。

# excel - excel的vba函数中的“需要对象”？

> ID：10758120
> 
> 赞同：0
> 
> 时间：2012-05-25T16:28:36.610
> 
> 标签：excel, vba

```
Function RRel(colmn, Optional offst, Optional rng)
    If offst Is Nothing Then Set offst = -1
    If rng Is Nothing Then Set rng = Application.Caller
    RRel = Intersect(colmn, rng.offset(offst, 0).EntireRow)
End Function 
```

当我尝试将其用作 excel 公式时，例如，`=RRel(P:P)`我得到一个错误：

```
Compile error:

object required 
```

调试点在函数头上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:08:02.487

我不明白您为什么需要 UDF 来执行此操作：为什么不直接使用 Excel 公式呢？无论如何，如果你坚持你可以试试这个：

```
Function RRel(colmn As Range, Optional offst As Variant, Optional rng As Variant) As Variant
    If IsMissing(offst) Then offst = -1
    If IsMissing(rng) Then Set rng = Application.Caller.Offset(offst, 0)
    RRel = Intersect(colmn.EntireColumn, rng.EntireRow).Value
End Function 
```

# umbraco - 从 Umbraco 5.1 开始

> ID：10758122
> 
> 赞同：1
> 
> 时间：2012-05-25T16:28:38.357
> 
> 标签：umbraco, orchardcms, umbraco5

以前从未使用过 CMS 系统，我刚刚开始评估 .net CMS 系统，其中两个最有吸引力的选项似乎是 Umbraco 或 Orchard。

关于 Umbraco，我更喜欢使用 MVC 风格的 v5，而不是花大量时间学习 XSLT 的 4.7 版，因为它的开发周期已经结束。但是，现在（2012 年 5 月，在 5.1 发布后不久）实际上是开始 Umbraco 学习曲线的好时机，因为与 v5 相比，v5 的支持和文档似乎没有深度v4? 我确信它会一直在改进，但由于它将是我的第一个 CMS 系统，因此跳入一个全新的、快速发展的系统似乎有点吓人。

很抱歉这个问题的主观性/模糊性，但是任何比较 Orchard 和 Umbraco 5.1 的可能学习曲线的有用评论都将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:13:12.140

4.7.x 支持 Razor - 因此您不必学习 XSLT。

话虽这么说，v5 是未来，而且它已经过时了，所以我不会把钱押在 v4 上用于新项目。检查 v5，阅读可用的文档，并在 umbraco 论坛中询问您是否遇到问题。Umbracians 很友好，并且在论坛上互相帮助。

**编辑**

[**Umbraco v5 已停产**](http://umbraco.com/follow-us/blog-archive/2012/6/13/v5-rip.aspx)- 您不应将其用于任何生产站点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T20:55:47.973

您可能已经意识到这一点，但截至今天（2012 年 6 月 13 日），Umbraco 5 正式成为一个废弃的项目，因为它在架构层面存在根本缺陷并且被认为无法修复。

它是在开发者大会上宣布的……您可以在下面的博客文章中看到原因。可以说，建议您不要使用它。

[http://umbraco.com/follow-us/blog-archive/2012/6/13/v5-rip.aspx](http://umbraco.com/follow-us/blog-archive/2012/6/13/v5-rip.aspx)

或在这里观看相当令人毛骨悚然的主题演讲视频：

[http://umbraco.com/follow-us/blog-archive/2012/6/13/cg12-keynote-video.aspx](http://umbraco.com/follow-us/blog-archive/2012/6/13/cg12-keynote-video.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T17:30:21.040

我同意上面的海报：你根本不需要用 umbraco xslt，v4.7 支持 Razor。

现在是开始学习 v5 的好时机，但我不会很快向客户承诺任何最后期限。有很多与性能相关的问题使得它现在不适用于除了最小的网站之外的所有网站 - 如果您的截止日期是 6 个月，那么您可能会寄希望于 V5 到那时稳定，比这更少，而且您会更好坚持使用 4.7，它真的很快，功能齐全，使用起来很愉快。

根据站点的不同，如果您坚持使用剃须刀，升级可能不会那么难，如果您需要的话。我刚刚花了大约 3 个月的时间开发一个 v5 站点，并且由于问题不得不转换回 4.7。转换并没有那么难，现在回到 4.7 真的很欣赏它的稳定性。

# sql - SQL 命令不会插入数据库

> ID：10758123
> 
> 赞同：0
> 
> 时间：2012-05-25T16:28:40.500
> 
> 标签：sql, vb.net

我正在尝试使用 VB 按钮将数据插入数据库，但它不断显示我为异常准备的错误消息。

谁能帮我解释为什么这不更新数据库？

```
 Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click

    Dim connetionString As String
    Dim sqlCnn As SqlConnection
    Dim sql As String
    Dim adapter As New SqlDataAdapter
    Dim Customer As String = TextBox1.Text
    Dim Product As String = TextBox2.Text
    Dim Location As String = TextBox3.Text
    Dim Details As String = TextBox4.Text
    Dim Owners As String = DropDownList1.Text
    Dim Urgency As String = DropDownList2.Text

    connetionString = "Data Source=ZUK55APP02;Initial Catalog=BugFixPortal;User ID=SLC***;Password=rep***"
    sql = "INSERT INTO Requests (Owner, Customer, Product, Location, Urgency, Details) VALUES ('" & Owners & ", " & Customer & ", " & Product & ", " & Location & ", " & Urgency & ", " & Details & "')"
    sqlCnn = New SqlConnection(connetionString)

    Try
        sqlCnn.Open()
        adapter.UpdateCommand = sqlCnn.CreateCommand
        adapter.UpdateCommand.CommandText = sql
        adapter.UpdateCommand.ExecuteNonQuery()
        sqlCnn.Close()

    Catch ex As Exception
        MsgBox("Unable to update Database with Request - Please speak to Supervisor!")

    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:35:59.540

我不会走这条路，因为你的代码对 SQL 注入很弱

您应该改用参数。如下所示

```
c.Open();
string insertString = @"insert into YourTable(name, street, city,....) values(@par1,  @par2, @parN,....)"
SqlCommand cmd = new SqlCeCommand(insertString, c);
cmd.Parameters.Add("@par1", SqlDbType.VarChar).Value = "MyName";
//etc
cmd.ExecuteNonQuery();
c.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:32:21.273

您错误地引用了您的价值观。

此字符串在所有值周围都有一个开始和结束单引号，这是不正确的。

```
VALUES ('" & Owners & ", " & Customer & ", " & Product & ", " & Location & ", " & Urgency & ", " & Details & "')" 
```

相反，在字符数据周围加上单引号，例如，如果`Product`是 varchar，它看起来像这样：

```
VALUES (" & Owners & ", " & Customer & ", '" & Product & "', " & Location & ", " & Urgency & ", " & Details & ")" 
```

**但是，*真正的*问题是您应该改用参数化查询。此代码容易受到 SQL 注入攻击。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T16:34:46.123

改变这个；

```
MsgBox("Unable to update Database with Request - Please speak to Supervisor!") 
```

像这样的东西；

```
MsgBox("Unable to update Database with Request - Please speak to Supervisor!" & ex.Message) 
```

它将为您提供有关异常的更多详细信息，但是快速浏览一下我可以看到一个问题，您尝试插入的值是字符串，您已将所有值包含在一组 ' 字符中，而不是包含每个一对 ' 值中的字符串参数，即

```
sql = "INSERT INTO Requests (Owner, Customer, Product, Location, Urgency, Details) VALUES ('" & Owners & "', '" & Customer & "', '" & Product & "',' " & Location & "', '" & Urgency & "', '" & Details & "')" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T16:34:46.450

**你真的应该考虑参数化你的查询，因为你很容易受到 SQL 注入攻击。看[这里](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)**

就您的代码本身而言，您的 SQL 语法是错误的，因为您需要在每个值周围加上撇号。尝试这个：

```
sql = "INSERT INTO Requests (Owner, Customer, Product, Location, Urgency, Details)
VALUES ('" & Owners & "', '" & Customer & "', '" & Product &
     "', '" & Location & "', '" & Urgency & "', '" & Details & "')" 
```

这是一个使用参数的示例

```
sql = "INSERT INTO Requests (Owner, Customer, Product, Location, Urgency, Details)
VALUES ('@Owners', '@Customer', '@Product', '@Location', '@Urgency', '@Details')" 
```

然后像这样添加参数：

```
command.Parameters.AddWithValue("@Owners", Owners)
command.Parameters.AddWithValue("@Customer", Customer)
command.Parameters.AddWithValue("@Product", Product)
command.Parameters.AddWithValue("@Location", Location)
command.Parameters.AddWithValue("@Urgency", Urgency)
command.Parameters.AddWithValue("@Details", Details) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T16:46:44.957

我想你想用`adapter.InsertCommand`而不是`adapter.UpdateCommand`

在

```
Try
    sqlCnn.Open()
    adapter.UpdateCommand = sqlCnn.CreateCommand //(adapter.InsertCommand)
    adapter.UpdateCommand.CommandText = sql //(adapter.InsertCommand)
    adapter.UpdateCommand.ExecuteNonQuery() //(adapter.InsertCommand)
    sqlCnn.Close()

Catch ex As Exception
    MsgBox("Unable to update Database with Request - Please speak to Supervisor!")

End Try 
```

并同意参数化的 sql 查询

有关更多信息，请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)

# c# - 关于如何在 Lokad.Cloud 中切换默认序列化程序的指南

> ID：10758125
> 
> 赞同：1
> 
> 时间：2012-05-25T16:28:45.500
> 
> 标签：c#, autofac

[http://code.google.com/p/lokad-cloud/wiki/Serialization](http://code.google.com/p/lokad-cloud/wiki/Serialization)

我一直在尝试交换 Lokad.Cloud 中的默认序列化。我尝试了以下方法：

```
public class ServiceWebModule : Module
{
    public string AzureConnectionString { get; set; }

    protected override void Load(ContainerBuilder builder)
    {
        builder.Register(CloudStorageProviders).InstancePerLifetimeScope();
    }

    CloudStorageProviders CloudStorageProviders(IComponentContext c)
    {
        return CloudStorage
            .ForAzureConnectionString(AzureConnectionString)
            .WithDataSerializer(new SuperDuperJsonSerializer())
            .BuildStorageProviders();
    }
} 
```

此模块在加载 lokad 云存储模块后加载，我尝试用我自己的方式覆盖 Azure 的 CloudStorageProviders 实现中的运行时。任何指导都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:12:36.323

查看 lokad 来源`StorageModule`：

```
builder.Register(BlobStorageProvider);
builder.Register(QueueStorageProvider).OnRelease(queues => queues.AbandonAll());
builder.Register(TableStorageProvider);
builder.Register(CloudStorageProviders).OnRelease(storage => storage.QueueStorage.AbandonAll()); 
```

除了注册的`CloudStorageProviders`类型之外，还注册了每个特定的提供程序（`ITableStorageProvider`和`IBlobStorageProvider`）`IQueueStorageProvider`。您必须明确注册所有这些才能完全覆盖现有注册。

# tsql - 子查询的 T-SQL MIN

> ID：10758126
> 
> 赞同：1
> 
> 时间：2012-05-25T16:28:46.973
> 
> 标签：tsql

我有一个查询，试图返回客户编号和他们成为客户的*连续年数。*它通过建立一个活动年份和客户列表，然后将其与可能年份列表进行比较并返回没有活动的最低年份来做到这一点。问题是可能的年份列表是一个很大的交叉连接。我认为如果我可以在 MIN 中烘焙 EXCEPT 逻辑并重用我的 10 年可能列表，这将运行得更快。

查询：

```
SELECT SUBSTRING(D,3,9) AS Cust, MIN(SUBSTRING(D,1,1)) AS Years FROM 
(SELECT DISTINCT
  CAST (y.years AS VARCHAR) + '-' + CAST(pm.BillToCustomerId AS VARCHAR ) AS D
   FROM [DW_Mart].[dbo].[vProMaster] pm
   cross join 
   (VALUES ('0'),('1'),('2'),('3'),('4'),('5'),('6'),('7'),('8'),('9')) AS y(years)
        EXCEPT
    SELECT DISTINCT CAST (DATEDIFF(YEAR,[ShipmentDate],CURRENT_TIMESTAMP) AS VARCHAR)
 + '-' + CAST ([BillToCustomerId] AS VARCHAR ) AS D
   FROM [DW_Mart].[dbo].[vProMaster] pm ) AS X GROUP BY SUBSTRING(D,3,9) 
```

我的伪代码修改查询：

```
SELECT SUBSTRING(D,3,9) AS Cust, MIN((VALUES ('0'),('1'),('2'),('3'),('4'),('5'),('6'),('7'),('8'),('9')) EXCEPT SUBSTRING(D,1,1)) AS Years FROM 
(SELECT DISTINCT CAST (DATEDIFF(YEAR,[ShipmentDate],CURRENT_TIMESTAMP) AS VARCHAR)
 + '-' + CAST ([BillToCustomerId] AS VARCHAR ) AS D
   FROM [DW_Mart].[dbo].[vProMaster] pm ) AS X GROUP BY SUBSTRING(D,3,9) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:13:57.183

事实证明，交叉连接破坏了服务器。
我不确定我对这只小狗有多自豪，但它很有效而且很快：

```
SELECT SUBSTRING(D,10,9) AS Cust,
CHARINDEX('1',RIGHT('00000000'+(CAST (11111111-SUM(CAST(SUBSTRING(D,1,8) AS INT)) AS VARCHAR)),8)) AS Years
  FROM 
(SELECT DISTINCT RIGHT('00000000'+(CAST (POWER(10,(FLOOR(8-DATEDIFF(MONTH,[ShipmentDate],CURRENT_TIMESTAMP)/12))) AS VARCHAR)),8)
+ '-' + CAST ([BillToCustomerId] AS VARCHAR ) AS D
FROM [DW_Mart].[dbo].[vProMaster] pm
where ShipmentDate < CURRENT_TIMESTAMP and ShipmentDate > DATEADD(YEAR,-8,CURRENT_TIMESTAMP)) AS X GROUP BY SUBSTRING(D,10,9) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:45:33.667

怎么样...

```
select billtocustomerid, max( DATEDIFF(YEAR,[ShipmentDate],CURRENT_TIMESTAMP))
from dw_mart.dbo.vpromaster
group by billtocustomerid 
```

# .htaccess - htaccess 重写查询字符串并删除空值

> ID：10758138
> 
> 赞同：0
> 
> 时间：2012-05-25T16:29:39.917
> 
> 标签：.htaccess, query-string

首先，对不起我的英语不好。

我尝试重写从 Form Get 生成的 url 并重定向它。

我的网址是这样的：

```
http://www.mysite.com/properties?action=search&agreement=for-rent&category=my-category&type=&zone=my-zone&city=my-city 
```

我已经配置了这个 .htaccess ：

```
11\. RewriteCond %{QUERY_STRING} ^action=(?:[a-zA-Z\-]*)&(?:.*)=([a-zA-Z\-]*)&(?:.*)=([a-zA-Z\-]*)&(?:.*)=([a-zA-Z\-]*)&(?:.*)=([a-zA-Z\-]*)&(?:.*)=([a-zA-Z\-]*)$
12\. RewriteRule (.*) %{REQUEST_URI}/%1/%2/%3/%4/%5/? [R=301,L] 
```

所以基本上我所有的请求都是直接到 index.php 的。

```
21\. RewriteCond %{REQUEST_URI} !index\.php|resources|hidden
22\. RewriteRule ^(.*)$ index.php/$1 [L] 
```

一切正常，但问题是当我在查询字符串中有一个空值时，规则添加双斜杠并且上面的 url（例如 whit &type=&zone=my-zone... 类型有空值）将像这样翻译：

```
http://www.mysite.com/for-rent/my-category//my-zone/my-city/ 
```

问题是：如果我在查询字符串中有一个或多个空值，如何在 .htaccess 中删除生成的双斜杠？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:02:20.233

最简单的是做另一个重定向（不是很漂亮，因为它需要两个 301）。

```
RewriteCond %{THE_REQUEST} //
RewriteRule .* $0 [R=301,L] 
```

有趣的是，当 url 加载了双斜杠时，mod_rewrite 会自动删除它。因此，正如您在上面看到的那样，您只需将 url 重写为自身。

# cocoa-touch - 使用 CoreGraphics 向 UIImage 添加文本

> ID：10758146
> 
> 赞同：1
> 
> 时间：2012-05-25T16:30:38.987
> 
> 标签：cocoa-touch, core-graphics

我只需要在从数据库中获取的 UIImage 中添加一个绿色文本，它是如何完成的？这是我到目前为止所拥有的，肯定缺少一些东西：

```
UIImage *img=[UIImage imageWithData:data];
    UIGraphicsBeginImageContext(CGSizeMake(360, 270));
   CGImageRef imageCon=[img CGImage];
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSelectFont(context, "Helvetica", 12, NSMacOSRomanStringEncoding);
    CGContextSetTextDrawingMode(context, kCGTextFill);
    CGContextSetFillColor(context, CGColorGetComponents([[UIColor whiteColor] CGColor]));
    CGAffineTransform xform = CGAffineTransformMake( 1.0, 0.0, 0.0, -1.0, 0.0, 0.0);
    CGContextSetTextMatrix(context, xform);
    CGContextShowTextAtPoint(context, 100.0f, 180.0f, "test", strlen("test"));
    UIImage *imgToAdd=[UIImage imageWithCGImage:CGBitmapContextCreateImage(context)];

    [arr addObject:imgToAdd]; 
```

# java - 使用 JSF 的两个用户井字游戏

> ID：10758147
> 
> 赞同：1
> 
> 时间：2012-05-25T16:30:45.557
> 
> 标签：java, jsp, jsf

我正在尝试使用 JSF 技术编写一个两个用户的井字游戏。从我读过的书籍和教程中，我了解了 JSF 的工作原理以及如何编写一个供一个用户使用的网络应用程序，比如摄氏到华氏转换器或类似的东西。

我在任何地方都找不到的是如何以这样一种方式实现应用程序，即两个用户（在不同的计算机上）实际上可以相互连接并相互玩井字游戏。所以我想我必须以某种方式为这两个用户授予对特定 Bean 的访问权限，通过登录进行身份验证，但是，Bean 本身必须知道哪个用户正在采取行动，所以游戏可以轮流。

有没有已知的方法来实现这样的东西？任何人都可以给我一个关于这个主题的教程或其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:41:34.857

您正在寻找 ajax 推送。标准的 JSF 组件库不支持它，因为它的实现现在依赖于 servletcontainer，而 JSF 被设计为独立于 servletcontainer。未来的 Servlet 3.1 规范（Java EE 7 的一部分）将引入 websockets 支持，从而允许标准化推送的可能性。未来的 JSF 3.0 可能会支持它。

截至目前，[PrimeFaces](http://primefaces.org) JSF 组件库有[一个`<p:push>`组件](http://www.primefaces.org/showcase/push/index.jsf)（单击链接查看实时示例），它在后台使用了[Jetty](http://www.eclipse.org/jetty/) servletcontainer。[PrimeFaces用户指南](http://www.primefaces.org/documentation.html)`<p:push>`的第 6 章概述了 的安装细节。

只需使用 PrimeFaces 网站上提供的示例，您就会了解如何为您的 tic tac toe 创意实现它。

# postgresql - Cast产生'返回的类型字符变化不匹配预期的类型字符变化（8）'

> ID：10758149
> 
> 赞同：6
> 
> 时间：2012-05-25T16:30:59.837
> 
> 标签：postgresql, types, plpgsql, varchar, postgresql-9.1

昨天我们有一个 PostgreSQL 数据库升级到版本 9.1.3。我们以为我们已经测试并准备好了所有东西，但是我们错过了一个功能。它返回一个像这样的表类型：

```
CREATE OR REPLACE FUNCTION myfunc( patient_number varchar
    , tumor_number_param varchar, facility_number varchar)
  RETURNS SETOF patient_for_registrar
  LANGUAGE plpgsql
AS
$body$
BEGIN
    RETURN QUERY            

    SELECT cast(nfa.patient_id_number as varchar),
    ... 
```

我只给出选择的第一列，因为那是发生错误的地方。在今天之前，这个函数运行良好，但现在它给出了这个错误：

> 错误：查询结构与函数结果类型不匹配
> 详细信息：返回的类型字符变化与第 1 列中的预期类型字符变化（8）不匹配。其中：PL/pgSQL 函数“getwebregistrarpatient_withdeletes”第 3 行，位于 RETURN QUERY [SQL 状态 = 42804 ]

该列`nfa.patient_id_number`是文本，并且正在为该列转换`patient_id_number`为. 在阅读了一些内容后，我认为问题在于从文本转换时未指定列长度。但问题是我尝试了各种子字符串组合来解决这个问题，但没有一个能解决问题：`patient_for_registrar``varchar(8)`

```
substring(cast(nfa.patient_id_number as varchar) from 1 for 8),

cast(substring(nfa.patient_id_number from 1 for 8) as varchar),

cast(substring(nfa.patient_id_number from 1 for 8) as varchar(8)), 
```

有没有人有任何指示？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T17:23:23.137

你的功能..

```
RETURNS SETOF patient_for_registrar 
```

返回的行类型必须与声明的类型完全匹配。您没有透露 的定义`patient_for_registrar`，可能是表的关联复合类型。我引用了关于[复合类型声明](http://www.postgresql.org/docs/current/interactive/rowtypes.html#AEN7213)的手册：

> 每当您创建表时，也会自动创建一个复合类型，与表同名，以表示表的行类型。

如果定义了该类型（表）的第一列`varchar(8)`（带有长度修饰符） - 如错误消息所示，您必须`varchar(8)`使用相同的长度修饰符返回；`varchar`不会的。字符串长度是否只有8个字符无关紧要，**数据类型**必须匹配。

[`varchar`,`varchar(n)`并且`varchar(m)`](http://www.postgresql.org/docs/current/interactive/datatype-character.html)是PostgreSQL 的*不同*数据类型。

旧版本不强制使用类型修饰符，但[在 PostgreSQL **9.0**中，这已针对 plpgsql 进行了更改](http://www.postgresql.org/docs/current/interactive/release-9-0.html#AEN109477)：

> PL/pgSQL 现在需要复合结果列来匹配预期的类型修饰符以及基本类型（Pavel Stehule，Tom Lane）
> 
> 例如，如果将结果类型的列声明为 NUMERIC(30,2)，则不再可以在该列中返回其他精度的 NUMERIC。以前的版本忽略了检查类型修饰符，因此允许结果行实际上不符合声明的限制。

### 解决问题的两种基本方法：

*   您可以转换返回的值以匹配以下定义`patient_for_registrar`：

    ```
    nfa.patient_id_number::varchar(8) 
    ```

*   或者您可以更改`RETURNS`条款。我会使用[**`RETURNS TABLE`**](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)并声明一个匹配的复合类型。这是一个[例子](https://stackoverflow.com/a/8726103/939860)。

    ```
    RETURNS TABLE (patient_for_registrar varchar, col2 some_type, ...) 
    ```

顺便说一句：如果可以避免，我*从不*使用它——尤其是不使用长度修饰符。`varchar`它几乎没有提供该类型`text`无法做到的任何事情。如果我*需要*长度限制，我会使用一个列约束，它可以在不重写整个表的情况下进行更改。

# sql - 如何使用存储过程在 select 语句中填充值？

> ID：10758154
> 
> 赞同：-1
> 
> 时间：2012-05-25T16:31:29.580
> 
> 标签：sql, reporting-services, sql-server-2000, ssrs-2008

前兆：**我必须使用存储过程**，并且我使用的是 SQL Server 2000。我还需要吐出一个表，以便 Reporting Services 可以正确使用它。但是，我可以创建任何数据库对象来帮助获取数据。

所以，这是我的选择语句的一个例子（我希望我让它看起来和我实际使用的一样）

```
SELECT     
    Store.Store_ID, 
    Store.Store_Description, 
    Salaries.Income, 
    Salaries.Tax_Rate, 
    Managers.Manager_Name, 
    Employees.Employee_ID

FROM         
    Store INNER JOIN
    Managers ON Managers.Store_ID = Store.Store_ID INNER JOIN
    Employees ON Managers.Manager_ID = Employees.Manager_ID INNER JOIN
    Salaries ON Employees.Salary_Type_ID = Salaries.Salary_Type_ID 
WHERE (Store.Store_ID = 20561) 
ORDER BY Employee_ID 
```

**编辑：由于该过程返回一个值，我想要做的就是：**

```
SELECT     
    Store.Store_ID, 
    Store.Store_Description, 
    Salaries.Income, 
    Salaries.Tax_Rate, 
    Managers.Manager_Name, 
    Employees.Employee_ID,
    Exec proc_Get_Emplyee_estimation_Costs Employee_ID    
FROM         
    Store INNER JOIN
    Managers ON Managers.Store_ID = Store.Store_ID INNER JOIN
    Employees ON Managers.Manager_ID = Employees.Manager_ID INNER JOIN
    Salaries ON Employees.Salary_Type_ID = Salaries.Salary_Type_ID 
WHERE (Store.Store_ID = 20561) 
ORDER BY Employee_ID 
```

我知道我显然不能这样做，但我需要能够使用员工编号在每一行上使用该程序。我不知道该怎么做。

~~我是否可以创建一个函数，以便在过程中使用 select 语句的结果，然后将其附加到表中并将表返回给 Reporting Services？~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:42:45.087

我建议使用[用户定义函数](http://msdn.microsoft.com/en-us/magazine/cc164062.aspx%20instead)而不是存储过程。您可以在 select 语句中使用 UDF 来计算并返回所需的值，如下所示：

```
SELECT     
    Store.Store_ID, 
    Store.Store_Description, 
    Salaries.Income, 
    Salaries.Tax_Rate, 
    Managers.Manager_Name, 
    Employees.Employee_ID,
    udf_Get_Emplyee_estimation_Costs(Employee_ID) AS EstimationCost
FROM         
    Store INNER JOIN
    Managers ON Managers.Store_ID = Store.Store_ID INNER JOIN
    Employees ON Managers.Manager_ID = Employees.Manager_ID INNER JOIN
    Salaries ON Employees.Salary_Type_ID = Salaries.Salary_Type_ID 
WHERE (Store.Store_ID = 20561) 
ORDER BY Employee_ID 
```

用户定义函数：

```
CREATE FUNCTION udf_Get_Emplyee_estimation_Costs
(
    Employee_ID INT
)
RETURNS DOUBLE 
AS
RETURN 
(
    SELECT EstimationVal FROM SomeTable
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:42:10.967

为什么不使用函数返回值可以在select语句中使用返回值

试试 [http://msdn.microsoft.com/en-us/library/aa258261(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258261(v=sql.80).aspx)

# c# - 无法删除程序集 (.exe)

> ID：10758157
> 
> 赞同：4
> 
> 时间：2012-05-25T16:31:42.910
> 
> 标签：c#, assemblies

我编写了一个小应用程序来获取 .cab 文件中包含的文件的版本号。

我将 cab 中的所有文件提取到一个临时目录并遍历所有文件并检索版本号，如下所示：

```
//Attempt to load .net assembly to retrieve information
Assembly assembly = Assembly.LoadFile(tempDir + @"\" + renameTo);
Version version = assembly.GetName().Version;
DataRow dr = dt.NewRow();
dr["Product"] = renameTo;
dr["Version"] = version.ToString();
dt.Rows.Add(dr); 
```

然后完成后我想删除所有已提取的文件，如下所示：

```
 foreach (string filePath in filePaths)
        {
            //Remove read-only attribute if set
            FileAttributes attributes = File.GetAttributes(filePath);

            if ((attributes & FileAttributes.ReadOnly) == FileAttributes.ReadOnly)
            {
                File.SetAttributes(filePath, attributes ^ FileAttributes.ReadOnly);
            }

            File.Delete(filePath);
        } 
```

这适用于所有文件，除了有时会在 .net .exe 上失败。我可以手动删除文件，这样它就不会被锁定。

我应该寻找什么来完成这项工作？Assembly.LoadFile 是否可能锁定文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T16:37:29.193

Assembly.LoadFile 确实锁定了文件。如果您需要从文件加载程序集然后删除文件，您需要做的是：

1.  [启动一个新的 AppDomain](http://msdn.microsoft.com/en-us/library/47e8e141)
2.  在该应用程序域中加载程序集
3.  仅在此处使用它-不要使用主应用程序域中程序集的任何类型。
4.  调用[AppDomain.Unload](http://msdn.microsoft.com/en-us/library/system.appdomain.unload)拆除 AppDomain
5.  然后删除文件

当程序集加载到正在执行的 AppDomain 中时，您不能删除包含程序集的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:51:10.203

`AssemblyName.GetAssemblyName`将在`AssemblyName`不锁定文件的情况下获取对象。见[msdn](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.getassemblyname)。您可以从那里获取版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T16:47:01.717

另一种方法（除了在单独的 AppDomain 中使用从文件加载）是使用[Assembly.Load 从文件的 MemoryStream 副本将程序集从字节](http://msdn.microsoft.com/en-us/library/h538bck7)加载到主 AppDomain。

请注意，如果在一个文件中存在具有相同标识的程序集（即 2 个具有相同文件名的非强签名程序集），则要使代码完全正确，您可能仍需要为每个程序集使用单独的 AppDomain。

**即使使用单独的 AppDomain，对于您的**方案，使用 LoadReflectionOnlyFrom 从字节加载也会更安全，因为在这种情况下，卸载 AppDomain 失败不会保持文件锁定，并且您自己可以完全控制文件的锁定。对于使用从字节加载的程序集的常规加载，需要大量阅读以了解相关问题并更好地避免。

# extjs4 - Extjs4，如何获得选定的行存储？

> ID：10758162
> 
> 赞同：0
> 
> 时间：2012-05-25T16:31:59.840
> 
> 标签：extjs4

我想根据另一个网格中的选定行绘制一个网格。

我想重用原始网格的商店。所以我需要过滤商店以只选择一个。

是否可以？还是我必须再次为新网格定义存储？

前任）

```
var myGrid = this.oriGrid().getSelectionModel().getSelection();

var myWindow = Ext.create('Ext.window.Window', {
    title: 'Test',
    autoHeight: true,
    width: 700,
    layout: 'fit',
    modal: true,
    items: {
    xtype: 'grid',
    columns: [
        { header: 'PK', dataIndex: 'PK', flex: 1 },
        { header: 'FK', dataIndex: 'FK', width: 200 },
    ],
    store: myGrid[0].store // it will show all of list, I want to show only I selected row.
    }
}).show(); 
```

有知道的请指教~谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:43:14.583

如果同时呈现两个 UI 元素，则它们**不能**使用具有不同过滤器的相同商店对象。

您需要克隆存储并将您需要的记录复制到另一个实例中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:00:55.367

我认为这里有更好的解决方案。正在使用您的选择继承商店、新商店和用户过滤器功能，如下所示：

```
 secGridStore = new Ext.Data.Store('YourStore');
 secGridStore.filter({
   filterFn: function(item) { return (item in YourStore) } 
 }); 
```

抱歉，此代码不正确，但您可以看到我的想法。

# django - 将 django-pipeline 升级到 1.2.7 但找不到静态文件

> ID：10758164
> 
> 赞同：2
> 
> 时间：2012-05-25T16:32:11.037
> 
> 标签：django, sass, django-staticfiles

我曾经使用 django-pipeline 1.2.6，它在查找静态文件时从来没有遇到过问题。升级后，它现在无法找到静态文件的位置。不知道出了什么问题，但我可能只是错过了一些东西。

我收到此错误：

```
ValueError: The file 'stylesheets/application.css.sass' could not be found with <pipeline.storage.PipelineFinderStorage object at 0x106e8b290>. 
```

我正在使用 django 1.4。这是我的设置：

```
path = lambda *a: os.path.join(ROOT_PATH, *a)
MEDIA_ROOT = ''
MEDIA_URL = ''
STATIC_ROOT = path('assets/')
STATIC_URL = 'assets/'
STATICFILES_DIRS = ()
STATICFILES_FINDERS = (
  'django.contrib.staticfiles.finders.FileSystemFinder',
  'django.contrib.staticfiles.finders.AppDirectoriesFinder',
  # 'django.contrib.staticfiles.finders.DefaultStorageFinder',
)
INSTALLED_APPS = (
  # ...
  'django.contrib.staticfiles',
  'pipeline',
  'app',
)
STATICFILES_STORAGE = 'pipeline.storage.PipelineCachedStorage'
PIPELINE_COMPILERS = (
  'pipeline.compilers.sass.SASSCompiler',
  'pipeline.compilers.coffee.CoffeeScriptCompiler',
)
PIPELINE_CSS = {
    'application': {
        'source_filenames': (
          'stylesheets/application.css.sass',
        ),
        'output_filename': 'stylesheets/application.css',
    },
}

PIPELINE_JS = {
  'application': {
    'source_filenames': (
      'javascripts/application.js.coffee',
    ),
    'output_filename': 'javascripts/application.js',
  }
} 
```

请帮忙。

有趣的花絮：如果我完全删除 PIPELINE_CSS，它也找不到 javascripts/application.js.coffee。

另一个有趣的事情是，无论我使用哪个版本的 django-pipeline，我都会得到以下信息：

```
$ python manage.py findstatic stylesheets/application.css.sass
No matching file found for 'stylesheets/application.css.sass'. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:22:13.130

如果你有这个，无论你使用什么版本的管道：

```
$ python manage.py findstatic stylesheets/application.css.sass
No matching file found for 'stylesheets/application.css.sass'. 
```

这只是意味着 django-staticfiles 配置错误，一旦你弄清楚，管道应该可以正常工作。

你的静态文件存储在哪里？在`static`每个应用程序的目录中，还是整个项目的目录中？

# java - 如何使用 PowerMock 部分模拟公共方法？

> ID：10758166
> 
> 赞同：5
> 
> 时间：2012-05-25T16:32:18.997
> 
> 标签：java, junit, powermock, partial-mocks

以下是我的课

```
public class SomeClass {
    public ReturnType1 testThisMethod(Type1 param1, Type2 param2) {
        //some code
        helperMethodPublic(param1,param2);
        //more code follows  
    }   

    public ReturnType2 helperMethodPublic(Type1 param1, Type2 param2) {
        //some code            
    }
} 
```

所以在上面的类中测试testThisMethod()时，我想部分模拟helperMethodPublic()。

截至目前，我正在执行以下操作：

```
SomeClass someClassMock = 
    PowerMock.createPartialMock(SomeClass.class,"helperMethodPublic");
PowerMock.expectPrivate(someClassMock, "helperMethodPublic, param1, param2).
    andReturn(returnObject); 
```

编译器不会抱怨。所以我尝试运行我的测试，当代码到达 helperMethodPublic() 方法时，控件进入该方法并开始执行其中的每一行代码。我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T16:46:08.337

另一个不依赖于模拟框架的解决方案是在测试中定义的匿名子类中覆盖“helperMethodPublic”：

```
SomeClass sc = new SomeClass() {
   @Override
   public ReturnType2 helperMethodPublic(Type1 p1, Type2 p2) {
      return returnObject;
   }
}; 
```

然后，当您在测试中使用此实例时，它将运行“testThisMethod”的原始版本和“helperMethodPublic”的覆盖版本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T18:41:06.807

我认为这是因为杰夫所说的。

试试这个 - 像任何其他模拟方法一样设置期望：

```
SomeClass someClassMock = PowerMock.createPartialMock(SomeClass.class,
                                                      "helperMethodPublic");

EasyMock.expect(someClassMock.helperMethodPublic(param1, param2)).
    andReturn(returnObject);

PowerMock.replayAll(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T16:50:07.403

我猜这是因为您的“helperMethodPublic”不是私有方法（如在 PowerMock.expectPrivate 中）。PowerMock 是一个框架，它扩展了其他模拟框架以添加诸如模拟私有和静态方法（JMock、Mockito 等不处理）之类的东西。对公共方法进行部分模拟应该是您的底层模拟框架处理的事情。

# asp.net - 如何设置单代码多数据库 ASP.NET SaaS 应用程序

> ID：10758167
> 
> 赞同：1
> 
> 时间：2012-05-25T16:32:19.867
> 
> 标签：asp.net, sql-server, saas

我正在构建一个 SaaS 应用程序，我想保留我拥有的单一代码库。我想在单独的子域 cust1.saascompany.com、cust2.saascompany.com 等中。但是，我没有任何 TenantID，并且出于多种原因更愿意为每个客户保留单独的数据库（主要的一个是它已经以这种方式编码并且在使用保证之前更改它是没有意义的）。数据库中包含用户登录成员资格。

我猜我需要单独的 web.configs 来连接字符串？或者我应该创建一个单独的数据库来存储所有连接字符串和任何应用程序级变量/常量？最终，我希望能够自动执行此配置（同样，当使用需要时）。

是否有任何人可以向我指出有关如何通过步骤进行设置的文章或帖子？我一直无法找到我要找的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:51:17.847

从技术上讲，这很简单。我们多年来一直这样做。尽管我们使用不同的约定（`my.domain.com/cust1`加上`my.domain.com/cust2`url 重写），但这并没有改变任何东西。

所以，这就是你要做的。您创建连接字符串提供程序的抽象规范：

```
public interface ICustomerInformationProvider
{
    string GetConnectionString( string CustomerId );  
    ... // perhaps other information
} 
```

然后你提供你想要的任何实现，比如：

```
public class WebConfigCustomerInformationProvider : ICustomerInformationProvider { ... }
public class DatabaseConfigCustomerInformationProvider : ICustomerInformationProvider { ... }
public class XmlConfigCustomerInformationProvider : ICustomerInformationProvider { ... } 
```

并且您以某种方式将您的接口映射到实现上（例如，使用您选择的 IoC 容器）。

这使您有机会在部署期间配置提供程序，例如，开发人员可以使用一个提供程序（从文件中读取连接字符串），而生产环境中可以使用另一个提供程序（从数据库中读取连接字符串，这很容易规定）。

如果您还有其他问题，请随时提出。

# hibernate - 在休眠中加入两个不相关的表

> ID：10758169
> 
> 赞同：1
> 
> 时间：2012-05-25T16:32:21.740
> 
> 标签：hibernate, join

有什么方法可以连接两个没有直接关系但在休眠中有两个公共字段的表？

我有两个名为boiler_plates 和profile 的表，它们之间没有直接关系，但有一个名为contract_id 的公共字段。

我写了查询“来自Boiler_Plates bp inner join Profiles p on bp.bt_contracts = p.contract_id”，但它继续抛出错误。“ 意外令牌：在第 1 行附近，第 75 列 [来自 com.catapult.bid.model.Boiler_Plates 作为 bp 内部连接 ​​Profiles as p on bp.bt_contracts=p.contract_id where bp.bt_contracts=1]”。

下面是boiler_plates 和profiles 的休眠映射文件。

Boiler_plates 的映射文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping SYSTEM "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.catapult.bid.model"  default-access="field" >
    <class name="Boiler_Plates" table="bt_boiler_plates" schema="bidtool">

        <id name="boiler_plate_id" type="int" column="boiler_plate_id">           
            <generator class="sequence">
                 <param name="sequence">bidtool.boiler_plates_boiler_plate_id_seq</param>
            </generator>
        </id>  

        <property name="boilerPlateName" type="string">
            <column name="boiler_plate_name" length="20" not-null="true" />
        </property>
        <property name="editable" type="int">
            <column name="editable"/>
        </property>
        <property name="boilerPlateContent" type="string">
            <column name="boiler_plate_content" length="20" />
        </property>
        <property name="insertTime" type="date" insert="false">
            <column name="insert_time_stamp"/>
        </property>
         <many-to-one class="Contracts" fetch="select" name="bt_contracts">
             <column name="contract_id"/>
        </many-to-one>
    </class> 
</hibernate-mapping> 
```

配置文件的映射文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-access="field" package="com.catapult.bid.model">
  <class name="Profiles" schema="bidtool" table="bid_tool_profiles">
    <id column="profile_id" name="profileId" type="string">
      <generator class="com.catapult.bid.commons.ProfileIDGenerator"/>
    </id>
    <many-to-one class="User" fetch="select" name="appUsers">
      <column name="user_id"/>
    </many-to-one>
    <property name="profileContent" type="string">
      <column name="profile_content"/>
    </property>
    <property name="scac" type="string">
      <column length="20" name="scac"/>
    </property>
    <property name="created" type="timestamp" update="false">
      <column name="insert_timestamp"/>
    </property>
    <property name="status" type="string">
      <column length="9" name="status" not-null="true"/>
    </property>
    <property name="editable" type="string">
      <column length="1" name="editable" not-null="true"/>
    </property>
  </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:46:21.730

在这种情况下，您唯一能做的就是通过 where 子句进行内部连接：

```
select a from A a, B b where a.someColumn = b.someOtherColumn and ... 
```

只有使用 HQL 中实体之间的关联才能进行正确的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:53:08.170

您需要从 Contracts 中延迟获取 Boiler_Plates（您的类的名称中不应包含下划线）和 Profiles。然后使用类似的东西：

```
select bp.contracts.profiles from Boiler_Plates bp where bp.boiler_plate_id=? 
```

您的代码使用了太多下划线，您也应该查看 java 编码约定：[http](http://www.oracle.com/technetwork/java/codeconv-138413.html) ://www.oracle.com/technetwork/java/codeconv-138413.html 。

# java - 加速度计应用

> ID：10758171
> 
> 赞同：0
> 
> 时间：2012-05-25T16:32:24.063
> 
> 标签：java, android, accelerometer

我必须做一个通过摇晃手机返回随机数的应用程序。我用一个按钮做了它，它工作正常。问题出在加速度计上。它不起作用，即使我没有错误。

```
import java.util.Random;

import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.os.Bundle;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class RandomButtonActivity extends Activity implements SensorEventListener
{
    Button tasto1;

    TextView testo;
    TextView message;

    EditText limiteMin;
    EditText limiteMax;

    Random generator = new Random();

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        testo = (TextView) findViewById(R.id.textView1);

        limiteMin = (EditText) findViewById(R.id.editText2);
        limiteMax = (EditText) findViewById(R.id.EditText01);
    }

    public void onSensorChanged(SensorEvent event)
    {
        Sensor sensor = event.sensor;
        if (sensor.getType()==Sensor.TYPE_ACCELEROMETER)
        { 
        int j = Integer.parseInt(limiteMin.getText().toString());
        int i = Integer.parseInt(limiteMax.getText().toString())-j;
        int x = 0;

        if(i==0 && j==0)
        {
            x = generator.nextInt();

            while(x<0)
            {
                x = generator.nextInt();
            }
        }

        else 
        {
            if(j>=i)
            {               
                i = 0;
                j = 0;
            }
            else
            {
                x = generator.nextInt(i+1)+j;
                testo.setText(""+x);

            }
        }
        testo.setText(""+x);
        }

        else
        {

        }
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) 
    {
    }
} 
```

环顾互联网，这段代码应该可以正常工作。我没有对 XML 文件做任何事情。

编辑：

我补充说：

```
<uses-feature android:name="android.hardware.sensor.accelerometer" android:required="true" 
```

到 Android:manifest 但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:24:40.490

似乎您从未将您的类添加为事件侦听器。这段代码对我有用：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //This is what you are missing:
    sm = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    sm.registerListener(this, sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_UI);
}
public void onSensorChanged(SensorEvent event)
{
    Sensor sensor = event.sensor;
    if (sensor.getType() == Sensor.TYPE_ACCELEROMETER)
    {
        /// Do something
    }
}
public void onAccuracyChanged(Sensor sensor, int accuracy)
{
} 
```

像这样覆盖 onResume/onStop/onPause 也是一个好主意

```
@Override protected void onResume() 
  {
    super.onResume();
    sm.registerListener(this, sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
  }

  @Override protected void onStop() 
  {
    sm.unregisterListener(this);
    super.onStop();
  } 
```

正如 ernell 提到的，请始终记住在清单中拥有所需的权限。

# php - 从 php 中的文件夹中读取文件并列出 json 文件中的条目

> ID：10758176
> 
> 赞同：2
> 
> 时间：2012-05-25T16:32:31.223
> 
> 标签：php, json

我正在尝试使用 php 加载文件夹中的所有图像，然后构建一个表格并从 json 文件中提取文本并将其放在每个图像旁边。目标是让 json 看起来像这样。

```
{
    "Car1": {
        "year":"2012"
    },
    "Car2": {
        "year":"2011"
    },
    "Car3": {
        "year":"2009",
        "milage":"10,204"
    }
} 
```

Car1、Car2 名称最终也将与文件夹中实际图像的名称相匹配。所以我想在 json 文件中获取图像和正确的部分，并建立一个表格，将它们全部列出。到目前为止，我有下面的 php，但我不确定如何将它们放在一起，如下所示，它现在只是分开的。关于如何结合下面的 php 以达到我描述的结果的任何建议？

* * *

6/1 编辑（新代码使用下面的答案）。这是在我想要输出所有这些的地方的一个页面上，&letter 变量是从另一个页面上的表单传递的。但是当那个表单提交并且这个页面被触发时，什么也没有发生。我做错了什么吗？

```
$letter = $_POST['letter'];

//Call the path of the cars for the chosen letter
$path = "/images/PartsCars/".$letter."/";
$temp_files = scandir($path);

//Call the path for the json file in the chosen letter subfolder
$data = json_decode($string, true);

//Sort the pictures in this folder alphabetically
natsort($temp_files);

echo '<table cellspacing="5" cellpadding="5">';

//Loop through all pictures and json elements to build out the page
foreach($temp_files as $file) 
{
    if($file != "." && $file != ".." && $file != "Thumbs.db" && $file != basename(__FILE__)) 
    {
        echo '<tr>';
        echo '<td><a href="'.$url.$file.'" title="'.$file.'"><img src="'.$url.$file.'" alt="'.$file.'" style="width:300px;height:200px;"/></a></td>';
        $info = pathinfo($file);
        $file_name =  basename($file,'.'.$info['extension']);
        echo '<td>'.print_r($data['$file_name']).'</td>';
        echo '</tr>';
    }
}

echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T17:22:53.697

我正在使用 php json_decode 以方便使用并使用 print_r 进行演示，您可以使用 foreach 循环将其正确打印出来

```
$path = "./images/PartsCars/A/";
$temp_files = scandir($path);
$string = file_get_contents("/images/PartsCars/A/sample.json");
data = json_decode($string, true);

natsort($temp_files);

echo "<table>";

foreach($temp_files as $file) 
{
    if($file != "." && $file != ".." && $file != "Thumbs.db" && $file != basename(__FILE__)) 
    {
        echo '<tr>';
        echo '<td><a href="'.$url.$file.'" title="'.$file.'"><img src="'.$url.$file.'" alt="" /></a></td>';
        $info = pathinfo($file);
        $file_name =  basename($file,'.'.$info['extension']);
        echo '<td>'.print_r(data['$file_name']).'</td>';
        echo '</tr>'
    }
}
echo '</table>'; 
```

# ruby - Ruby gem：为 api 包装器编写测试

> ID：10758180
> 
> 赞同：2
> 
> 时间：2012-05-25T16:32:54.610
> 
> 标签：ruby, testing, gem

我正在为将用于多个应用程序的 API Wrapper 编写一个 gem。我无法控制这个 API，但我确实有一个开发环境，我可以在不影响生产的情况下搞砸。

您将如何为这个 gem 编写测试？

示例：考虑方法 add_customer，它采用多个参数（名称、电子邮件等），其中电子邮件是唯一的。

如果我编写了一个测试，该测试通过电子邮件 a@gmail.com 插入客户。第二次，尽管我的 gem 工作正常，但这个测试会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:58:13.243

通常，您希望为正在运行的每个测试清理数据库。我们正在使用 DatabaseCleaner gem 在 ruby​​ 中执行此操作。基本上在我们运行整个套件之前，我们完全清理数据库

```
DatabaseCleaner.clean_with :truncation 
```

这需要一些时间，具体取决于您的数据库。之后我们使用事务策略来保持它更快

```
DatabaseCleaner.strategy = :transaction 
```

这意味着在每个规范之前，在 db 中启动一个事务（创建一个保存点），并且测试在这个事务中运行。测试完成后，发出回滚，下一个规范再次拥有一个干净的数据库。查看[https://github.com/bmabey/database_cleaner](https://github.com/bmabey/database_cleaner)

如果您确实需要在同一规范中创建两个这样的记录，那么您将需要创建某种计数器。就像是：

```
class Counter
  def initialize
    @count = 0
  end

  def email
    @count += 1
    "something_cool#{@count}@whatever.com"
  end
end 
```

然后使用这个计数器每次都给你一个独特的电子邮件。[查看 FactoryGirl gem https://github.com/thoughtbot/factory_girl/wiki/Usage](https://github.com/thoughtbot/factory_girl/wiki/Usage)并查找序列可能是值得的。如果您正在构建一个小型 gem，那么您可能不想添加很多依赖项。祝你好运。一路TDD！

无法控制系统的所有部分会导致更大的问题。在单元测试中，您可以愉快地去除所有外部 API，只返回预期的结果。但当然，如果 API 发生变化，这仍然会通过。分布式系统的集成测试是一个复杂的问题，基本上你需要像系统范围的事务这样的东西，它将系统的所有部分都置于原始状态。既然你没有那个控制权，我就放弃了。

# java - 我可以在 Java 中自定义矩阵的索引吗？

> ID：10758181
> 
> 赞同：0
> 
> 时间：2012-05-25T16:33:00.647
> 
> 标签：java, arrays, data-structures, matrix, arraylist

我想在 Java 中实现一个带有自定义索引的矩阵，如下例所示：

```
 country1 city1 name1 region1 population1
country2    23      5    55    ...
city2       5       9    .
name2                    .
region2                  .
population2 
```

那`mat[country1][country2]`应该返回 23。我不知道我会怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T16:35:51.517

您可能必须使用 Hashmap 或 HashTable 和一个类似对的键来包含两个索引：`Map<Pair<K1,K2>, V>`

您可以查看更多信息： [Map with two-dimensional key in java](https://stackoverflow.com/questions/6373443/map-with-two-dimensional-key-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:36:25.467

如果您有二维表，其行和列始终遵循此顺序，那么您可以使用行/列的枚举。

例如：

```
 public static final int COUNTRY = 0;
   public static final int CITY  = 1;
   public static final int NAME = 2;
   public static final int REGION = 3;
   public static final int POPULATION = 4; 
```

另一方面，如果数据结构中可以有多个国家，在两个维度上，那么您可以使用地图。

# django - django 在哪里存储临时上传文件？

> ID：10758183
> 
> 赞同：7
> 
> 时间：2012-05-25T16:33:02.537
> 
> 标签：django, django-uploads

我有一个在 CentOS 上运行的 Django/uwsgi/nginx 堆栈。将大文件上传到 django (1GB+) 时，我希望它会在其中创建一个临时文件，`/tmp`并且我应该能够看到它随着上传的进行而增长。但是，我没有。`ls -lah /tmp`不显示任何正在创建或更改大小的新文件。我什至在我的`settings.py`明确指出，`FILE_UPLOAD_TEMP_DIR = '/tmp'`但仍然没有。

在追踪临时文件的存储位置方面，我将不胜感激。我需要这个来确定是否有任何大型上传正在进行中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T16:46:34.430

它们存储在系统的临时目录中。来自[https://docs.djangoproject.com/en/dev/topics/http/file-uploads/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/?from=olddocs)：

> **上传数据的存储位置**
> 
> 在保存上传的文件之前，需要将数据存储在某个地方。
> 
> 默认情况下，如果上传的文件小于 2.5 兆字节，Django 会将上传的全部内容保存在内存中。这意味着保存文件只涉及从内存读取和写入磁盘，因此非常快。
> 
> 但是，如果上传的文件太大，Django 会将上传的文件写入存储在系统临时目录中的临时文件中。在类 Unix 平台上，这意味着您可以期望 Django 生成一个名为 /tmp/tmpzfp6I6.upload 之类的文件。如果上传足够大，您可以看到这个文件随着 Django 将数据流式传输到磁盘而增大。
> 
> 这些细节——2.5兆字节；/tmp; 等等——只是“合理的默认值”。继续阅读有关如何自定义或完全替换上传行为的详细信息。

此外，这只发生在给定大小之后，默认为 2.5MB

> FILE_UPLOAD_MAX_MEMORY_SIZE 将上传到内存的文件的最大大小（以字节为单位）。大于 FILE_UPLOAD_MAX_MEMORY_SIZE 的文件将被流式传输到磁盘。
> 
> 默认为 2.5 兆字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T18:35:47.660

我刚刚使用 Django 1.4.1 在我的 OS X 系统上追踪到了这一点。

在 django/core/files/uploadedfile.py 中，使用 django.core.files.temp 创建了一个临时文件，作为 tempfile 导入

```
from django.core.files import temp as tempfile 
```

这只会返回 Python 的标准 tempfile.NamedTemporaryFile，除非它在 ​​Windows 上运行。

要查看 tempdir 的位置，可以在 shell 中运行以下命令：

```
python -c "import tempfile; print tempfile.gettempdir()" 
```

现在在我的系统上，它输出 /var/folders/9v/npjlh_kn7s9fv5p4dwh1spdr0000gn/T，这是我找到临时上传文件的地方。

# ios - Cocos2D 中的全屏 GIF 动画

> ID：10758191
> 
> 赞同：1
> 
> 时间：2012-05-25T16:33:23.893
> 
> 标签：ios, animation, cocos2d-iphone, gif

我有一个动画（图像系列）要在 iPhone 的整个屏幕（视网膜和无视网膜）上做通常我用 zwoptex 使用与此[http://gamedev.sugartin.info/2012/05/09类似的技术来做到这一点/69/](http://gamedev.sugartin.info/2012/05/09/69/)

但是这次图像的大小不允许这样做。

我还有一个 5 秒长的系列视频。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:27:33.787

任何类型的图像，你想显示的，都必须首先放在内存中。因此，如果要加载到内存的帧太多，则无法播放动画。如果你想播放这么大的动画，你可以尝试创建视频文件并在你的openGL视图上播放

# mediaelement.js - h.264 mp4 视频无法在 iPad 上播放

> ID：10758192
> 
> 赞同：0
> 
> 时间：2012-05-25T16:33:25.123
> 
> 标签：mediaelement.js

我们在 YooTheme 的 Zoo Media 元素中使用 mediaelement.js 时遇到问题。我们已将所有视频编码为 h.264 mp4（320x240、768 比特率、25fps）、AAC 音频（128 比特率、44100 采样率、2 音频通道、基本 A/V 同步）。这些视频可以在所有桌面浏览器甚至 iPhone 上播放，但不会在 iPad 上播放——我们只看到旋转的圆圈。我们用来测试的 iPad 已经应用了最新的更新。您可以使用此网址作为示例：

[http://smoothchords.com/index.php/free-items/item/another-blessing-2?category_id=35](http://smoothchords.com/index.php/free-items/item/another-blessing-2?category_id=35)

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:14:20.203

我有同样的问题。一开始我以为是编码问题。但后来我在 github 上找到了重要的提示：

[在 github 上的 iOS 上使用 mediaelement.js 的提示](https://github.com/johndyer/mediaelement/#3-run-startup-script)

启动脚本不能放在 head 标签中。将其放入主体标签后，它工作得很好。

PS：我检查了你的网站，发现它在那里运行良好，所以我猜你自己想通了。但我认为这个答案可能会帮助其他人解决这个问题。

# visual-studio - 使用静态库编译时出现 wxWidgets 和 Visual Studio 链接器错误

> ID：10758194
> 
> 赞同：1
> 
> 时间：2012-05-25T16:33:52.067
> 
> 标签：visual-studio, winapi, linker, wxwidgets

在 Visual Studio 2010 中编译 wxWidgets 时出现此链接器错误。

```
msvcrt.lib(wcrtexew.obj) : error LNK2001: unresolved external symbol _wWinMain@16 
```

现在问题来了。wxWidgets 的入口点是这个宏：

```
IMPLEMENT_APP(MyApp) 
```

这意味着我不使用 wWinMain() 作为条目。

我尝试在编译 (/NOENTRY) 时禁用入口点，但没有骰子。似乎没有任何效果，因为如果我定义 wWinMain()，那么 wxWidgets 将不会启动，因为条目是 IMPLEMENT_APP。

当我编译为静态时，我只收到此错误。如果我不作为静态编译，我将不得不在 Windows Server 2008 上提供 DLL：msvcp100d.dll 和 msvcr100d.dll（在没有安装库的旧版本的 Windows 上可能还有更多 DLL）。

现在我明白我正在再次链接调试库，但如果我再次链接发布版本并不重要，因为我应该收到相同的错误（未解析的外部符号 _wWinMain@16）。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:08:50.680

当您链接到静态库时，您必须确保使用与构建应用程序代码时完全相同的参数构建库。

所以：检查库构建和应用程序构建的所有编译器选项，并确保它们匹配。此外，请确保应用程序构建链接到使用您匹配的配置构建的静态库。

这是一种痛苦！您必须决定是要处理这个问题，还是要在目标机器上安装正确的 DLL。无论哪种方式，您都必须解决配置管理问题。

在您的特定问题中，我看到链接器正在寻找 _wWinMain@16 这表明您已经在打开 unicode 的情况下构建了应用程序代码，但正在链接到非 unicode 静态库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:37:15.730

你有

`IMPLEMENT_APP(MyApp)`

在 .cpp 文件中？它通常在随附文件中`IMPLEMENT_APP(MyApp)`的位置。

我将 wxWidgets 用作静态库，这就是我要编译的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T02:45:32.547

首先编译 wxWidgets 的库 (wxWidgets\build\msw)，所有设置都与您在项目中的设置相同。所以我启用“/MT”，“在静态库中使用 MFC”，并将项目输出为“发布”。我编写的 wxWidgets 应用程序上的设置完全相同。

现在注释掉：

```
IMPLEMENT_APP(MyApp) 
```

并将其用作您的入口点：

```
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE prevInstance, LPWSTR lpCmdLine, int nShowCmd)
{
    char *buf;

    buf = new char[wcslen(lpCmdLine) + 1];

    wcstombs(buf, lpCmdLine, wcslen(lpCmdLine) +1);

    wxApp::SetInstance( new MyApp());

    wxEntry(hInstance, prevInstance, buf, nShowCmd);

    wxEntryCleanup();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-13T10:26:18.570

将项目的字符集更改为 unicode 后，我遇到了同样的问题。我的项目使用多线程调试 DLL ( `/MDd`)。上述解决方法也对我有用，但我想找出真正导致问题的原因并使用`IMPLEMENT_APP`.

在我将“使用 MFC”更改为“使用标准 Windows 库”后，我能够成功构建项目。

# svn - 解决 SVN 存储库以实现可移植性的最佳方法

> ID：10758200
> 
> 赞同：0
> 
> 时间：2012-05-25T16:34:32.910
> 
> 标签：svn

我们在Windows环境

有多种寻址存储库的方法：

1) 通过服务器计算机名称/FQDN（如 svnerver.ourdomain.com）

2) 通过 IP 地址

3）通过 C:\Windows\System3​2\drivers\etc\hos​ts 文件中的虚拟主机名（或者我猜虚拟主机名可以在路由器中设置，但我们有人通过 VPN 从另一个连接到此存储库办公室和我们的路由器不为他们做名称解析）

我们一直在对主机文件使用方法 3），事实证明它便于移植 - 当我们的 SVN 服务器崩溃时，我刚刚进行了最后一次备份，将其托管在另一台服务器上，更改了我的主机文件中的 IP，然后我又重新开始工作了不得不做“svn relocate”。这特别方便，因为我们有人通过 VPN 远程连接到我们的存储库，他们所要做的只是更改其 hosts 文件中的条目。

现在我们正在将多个存储库合并为一个，我正在重新考虑这种方法。它有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T16:43:38.270

选项 1 是最好的。您现在所做的事情需要每个人都为新的 IP 地址更新主机文件。当您尝试移动主机时，DNS 始终是一个更无缝的选择。

# c++ - 在 Windows 上获取鼠标光标位置和按钮状态

> ID：10758202
> 
> 赞同：3
> 
> 时间：2012-05-25T16:34:45.187
> 
> 标签：c++, windows, winapi, mouse, mouseevent

在 Windows（Windows 7 及更高版本）上获取鼠标光标位置或按钮状态的最合适方法是什么？我以前使用过 DirectInput，但我不再使用它并且不想使用它。我看到有 GetCursorPos，但是，我没有看到任何获取鼠标按钮状态的东西。我以前读过，对于实时应用程序来说，仅读取窗口消息（例如 WM_LBUTTONUP）被认为是“慢”的，所以我不知道任何其他选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T16:53:43.440

如果要轮询/查询当前光标位置，可以使用[GetCursorPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648390%28v=vs.85%29.aspx)。要查看按钮状态，请使用[GetAsyncKeyState](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx)。

如果您在窗口中实现消息循环，您将收到的关于鼠标移动的通知是[WM_MOUSEMOVE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645616%28v=vs.85%29.aspx)。您将通过[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468877%28v=vs.85%29.aspx)列出的通知收到有关鼠标输入的通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T16:48:26.407

`WM_LBUTTONUP`与任何窗口消息一样好，对于窗口游戏来说非常棒，因为它仅在鼠标单击客户区时生成，因此您可以自由调整窗口大小和移动窗口。

作为直接输入的替代方法，您可以使用需要更多代码来初始化的原始输入，但它是鼠标移动的最佳方式，因为`WM_INPUT`它是在物理鼠标移动时生成的，而不是光标，因此您可以剪辑将光标放在客户区域，而不必担心用户可能会点击剪辑矩形的一侧并且不会再生成鼠标移动消息。 [关联](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645546%28v=vs.85%29.aspx)

# xml - XSD 验证 XML 有一个属性 true

> ID：10758210
> 
> 赞同：1
> 
> 时间：2012-05-25T16:35:22.923
> 
> 标签：xml, validation, xsd, xml-validation, xsd-validation

我的问题是，如果我必须使用 xml 验证是否只有一个属性为真，并且其中一个必须为真：

```
<addresses>
    <address>
        <primary>true</primary>
        <street>One str.</street>
        <number>111</number>
    </address>
    <address>
        <primary>false</primary>
        <street>Two str.</street>
        <number>222</number>
    </address>
</addresses> 
```

怎么做？？

ps：对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:19:22.633

执行此操作的最简单方法（或者在我看来是这样！其他人可能不同意）是使用稍微不同的 XML 结构。您需要一个主地址和零个或多个非主地址。如果您对具有不同要求的事物使用不同的名称，那么任何 XML 验证方法（DTD、XSD 等）都可以很容易地说出来。如果 XML 结构变成

```
<addresses>
  <primary-address>
    <street>One str.</street>
    <number>111</number>
  </primary-address>
  <address>
    <street>Two str.</street>
    <number>222</number>
  </address>
</addresses> 
```

那么很容易编写一个 XSD 模式，该模式限制`addresses`为只包含一个主地址，并明确捕获主地址和其他地址具有相同结构的事实：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified"> 

  <xsd:complexType name="address">
    <xsd:sequence>
      <xsd:element ref="street"/>
      <xsd:element ref="number"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:element name="primary-address" type="address"/>  
  <xsd:element name="address" type="address"/>  
  <xsd:element name="addresses">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="primary-address"/>
        <xsd:element ref="address" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>

  <xsd:complexType name="mixed" mixed="true">
    <xsd:sequence/>
  </xsd:complexType>

  <xsd:element name="street" type="mixed"/>
  <xsd:element name="number" type="mixed"/>
</xsd:schema> 
```

如果您无法更改 XML 结构，或者不想更改，您可以切换到 XSD 1.1 并使用断言来强制执行约束，或者您可以使用 Schematron 来执行此操作。

或者（这是一个有点脏的技巧），你可以说（1）属性的唯一合法值`primary`是`true`，（2）属性在元素上是可选的`address`，以及（3）属性的每次出现都`primary`必须有一个独特的价值。

但我真的建议更改 XML 结构。

# ms-access - DoCmd.RunSavedImportExport 不起作用

> ID：10758211
> 
> 赞同：2
> 
> 时间：2012-05-25T16:35:31.943
> 
> 标签：ms-access, vba

我不明白我是否手动运行保存的导入它可以工作，但是当它在 vba 代码中时它只是没有。当我穿过它时，它会停下来，好像要运行它，但它从不做任何事情，它只是继续前进。

`DoCmd.RunSavedImportExport "Import-DES_INV_TSR_ACIPS_FINAL"`

请提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:48:59.103

问题是它不允许我使用删除并重新创建表的已保存导入。我必须创建一个导入现有表的新表。

# php - 旅游网站如何锁房？

> ID：10758214
> 
> 赞同：-6
> 
> 时间：2012-05-25T16:35:45.497
> 
> 标签：php, mysql

我正在研究酒店预订系统（PHP，MySQL），但我无法找出锁定房间的最有效方法（防止同一房间在同一日期被预订超过其分配的数量）仅 20 分钟和如果访客在该时间内没有付款，请释放它。该系统可能会变大，所以我想确保它尽可能高效。

任何建议，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:40:26.320

我会在数据库中使用一个简单的时间戳字段来指示“锁定”。每当有人尝试预订房间时，软件都会将当前时间与时间戳进行比较，如果超过 20 分钟且尚未付款，则锁定无效。

这种方法可能足够有效。时间戳通常是 32 位，数据库调用的性能影响可以忽略不计。

# c# - WCF CustomBinding - 无法使用自定义授权策略获取元数据

> ID：10758219
> 
> 赞同：4
> 
> 时间：2012-05-25T16:36:01.067
> 
> 标签：c#, wcf, iis, binding, metadata

在解决了我之前的问题后，我想将 netTcpBinding 转换为 customBinding，我成功地管理了它。但是，当我放置自定义授权策略时，WcfTestClient（和普通客户端）在尝试提取元数据时会出错（没有它也可以正常工作！）。

我的配置：

```
<serviceAuthorization principalPermissionMode="Custom">
        <authorizationPolicies>
          <add policyType="Sample.Tools.CustomAuthorizationPolicy, Sample" />
        </authorizationPolicies> 
```

我在 MSDN（这里：[http](http://social.msdn.microsoft.com/Forums/en-IE/wcf/thread/80a33bc6-0765-45f6-8af5-0a414a5cc40d) ://social.msdn.microsoft.com/Forums/en-IE/wcf/thread/80a33bc6-0765-45f6-8af5-0a414a5cc40d ）上读到这可能是由于自定义授权引起的经理也是必需的。我试过这个并添加了 CustomAuthorizationManager（CheckAccessCore 总是返回 true），但它没有用。

这在配置中添加为：

```
 <serviceAuthorization principalPermissionMode="Custom" serviceAuthorizationManagerType="Sample.Tools.CustomAuthorizationManager, Sample">
        <authorizationPolicies>
          <add policyType="Sample.Tools.CustomAuthorizationPolicy, Sample" />
        </authorizationPolicies> 
```

其余配置：

捆绑：

```
<customBinding>
      <binding name="SampleBinding" receiveTimeout="00:05:00">
        <transactionFlow/>
        <security authenticationMode="SecureConversation" messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10">
            <secureConversationBootstrap authenticationMode="UserNameForSslNegotiated" messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10">
                <localClientSettings maxClockSkew="23:59:59" />
                <localServiceSettings maxClockSkew="23:59:59" />
           </secureConversationBootstrap>                   
            <localClientSettings maxClockSkew="23:59:59" />
            <localServiceSettings maxClockSkew="23:59:59" />
        </security>
        <binaryMessageEncoding/>
        <tcpTransport transferMode="Buffered" portSharingEnabled="true" maxReceivedMessageSize="65536" hostNameComparisonMode="StrongWildcard"/>
      </binding>
    </customBinding> 
```

行为：

```
<behavior name="SampleBehavior">
      <serviceMetadata httpGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" httpHelpPageEnabled="true" httpsHelpPageEnabled="true" />
        <serviceAuthorization principalPermissionMode="Custom" serviceAuthorizationManagerType="Sample.Tools.CustomAuthorizationManager, Sample">
        <authorizationPolicies>
          <add policyType="Sample.Tools.CustomAuthorizationPolicy, Sample" />
        </authorizationPolicies>
      </serviceAuthorization>
      <serviceCredentials>
        <serviceCertificate findValue="MySample" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="Sample.Tools.CustomUserNameValidator, Sample" />
      </serviceCredentials>
      <serviceThrottling maxConcurrentCalls="2147483647" maxConcurrentSessions="2147483647" maxConcurrentInstances="2147483647" />
    </behavior> 
```

服务：

```
<services>
    <service behaviorConfiguration="SampleBehavior"
    name="Sample.SampleService">
    <endpoint address="" 
              binding="customBinding" 
              bindingConfiguration="SampleBinding"
              name="MyServiceEndpoint" 
              contract="Sample.ISampleService">
        <identity>
            <dns value="localhost" />
        </identity>
    </endpoint>

    <endpoint address="mex" 
              binding="mexTcpBinding" 
              bindingConfiguration=""
              name="MyServiceMexTcpBidingEndpoint" 
              contract="IMetadataExchange" />
        <host>
            <baseAddresses>
                <add baseAddress="net.tcp://localhost:809/SampleService.svc" />
            </baseAddresses>
        </host>
    </service>
</services> 
```

我几乎被困在这里，关于这个问题几乎没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:32:46.910

我在这里看到了这个不错的帖子：http: [//social.msdn.microsoft.com/forums/en-US/wcf/thread/86ed7974-97d4-4cc8-a965-542a3063aced](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/86ed7974-97d4-4cc8-a965-542a3063aced)

这解决了我的问题，现在我需要考虑实施适当的 ServiceAuthorizationManager :)

# pseudocode - <--- 和 <-> 在伪代码中

> ID：10758222
> 
> 赞同：6
> 
> 时间：2012-05-25T16:36:13.780
> 
> 标签：pseudocode

我不是cs背景，我试图理解什么用于什么。在伪代码中，我看到很多这样的：

```
for i <---  1 to n-1 do
j <--- find-Min(A,i,n)
A[j] <-> A[i]
end for 
```

`<---`和`<->`用来指什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T16:43:13.353

`<---`表示“将右侧分配给左侧”（在这种`for`情况下使用它有点奇怪，因为它可能很容易被省略）。

`<->`意思是“交换”。A[j] 值与 A[i] 交换。

**编辑**：

我突然想到第一行可能丢失了`i`，应该改为：

```
for i <---  1 to n-1 do 
```

这成为上述的合法用例`<---`：从到顺序`i`分配值，并为每个值执行循环体（向下到，表示循环结束） 。`1``n-1``end for``i`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T16:43:40.237

关于伪代码中使用的符号，远未达成普遍共识。

在这种情况下，我猜这`<---`意味着“将右侧分配给左侧”，并且`<->`意味着“交换右侧和左侧”。

但是，在第一种情况下，我认为您缺少一个字符。应该是这样的：

```
for i <--- 1 to n-1 do 
```

所以这是一个正常的`for`循环，可以写成：

```
for i = 1 to n-1 
```

在 BASIC 中，或：

```
for (i=1; i<n; i++) 
```

在类 C 语言中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T16:51:06.960

### 分配的左箭头

用于使变量接收到一个新值很明显，例如

```
for i <- 1 to n-1 do 
```

我在以下方面看到了这一点：

*   主要是伪代码；
*   R、S、Scala 和 OCaml；
*   在 APL 中带有自己的左箭头符号。

### 用于交换元素的左右箭头

也用于以象征性的方式使操作明显。

我现在想不出除了伪代码之外的任何东西。

# c# - wp7的全屏浏览器控制

> ID：10758225
> 
> 赞同：0
> 
> 时间：2012-05-25T16:36:32.670
> 
> 标签：c#, windows-phone-7

在我的 Windows Phone 7 网络浏览器应用程序中，我编写了一个代码来隐藏文本框和应用程序栏。隐藏这些东西后，我需要将 Web 浏览器控件拉伸并使其成为全屏 Web 浏览器。发生了一些奇怪的事情。如果我没有在 UrlTextBox 中输入任何内容并且如果我触摸了 Web 浏览器控件（目前它是空白的），Web 浏览器控件会拉伸到全屏（见图 1）但是如果我在 UrlTextBox 中输入了一些 URL（即导航到那个 URL），如果我触摸了 Web 浏览器控件（见图 2），它不会被扩展。下面的图片可以给你一些想法。

图片 1-

![在此处输入图像描述](../Images/0136b5bcba7b9d244c096771701e99e0.png)

图片 2-

![在此处输入图像描述](../Images/52dc2feb267c46abce03d3a40fc4ece3.png)

以下代码用于隐藏上述内容-

```
 private void browsers_Focus(object sender, RoutedEventArgs e) 
  { 
  UrlTextBox.Visibility = Visibility.Collapsed; 
  Back.Visibility = Visibility.Collapsed; 
  Forward.Visibility = Visibility.Collapsed; 
  } 
```

我的 .xaml 页面-

```
<Grid x:Name="LayoutRoot"> 
<Grid.RowDefinitions> 
    <RowDefinition Height="Auto" /> 
    <RowDefinition Height="*" /> 
</Grid.RowDefinitions> 
<TextBox x:Name="UrlTextBox" Background="White" InputScope="URL" 
     KeyDown="UrlTextBox_KeyDown" Margin="0,0,98,0" GotFocus="UrlTextBox_GotFocus" LostFocus="UrlTextBox_LostFocus" KeyUp="UrlTextBox_KeyUp"/> 
<Grid x:Name="BrowserHost"  
  Grid.Row="1" GotFocus="BrowserHost_GotFocus"> 
</Grid> 
```

我需要的是**“如果用户触摸浏览器控件，那么浏览器控件应该伸展到全屏”**。有人可以帮我吗？在此先感谢您的难辞其咎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:04:40.053

您是否尝试过作为 Silverlight Toolkit 一部分的 GestureListener ？

# algorithm - 如何使用轴作为铰链在 3d 空间中旋转矩形？

> ID：10758226
> 
> 赞同：1
> 
> 时间：2012-05-25T16:36:33.597
> 
> 标签：algorithm, 3d, geometry, graphics2d, rotation

我期待将具有固定轴的矩形旋转为铰链的数学或算法计算。如下图所示。

> 我有 4 个矩形顶点的位置 (x,y)，原点是矩形的中心，因此所需的算法会将我的原始形状的顶点投影到所需的形状顶点中。（请看下图）

我知道用 3d 库很容易做到这一点，但我需要用 .Net 或 JAVA 等高级编程语言或没有任何 3d 或补充库的东西用 2d 图形来做。

**请帮助我提供任何想法或参考，或者比所有源代码或算法更好。**

![在此处输入图像描述](../Images/4e05dd2ad79cfa0ea8d837751691109a.png)

提前感谢您的优质时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T00:23:50.760

总结一下我上面的评论：

*   [http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)
*   [http://en.wikipedia.org/wiki/3D_projection](http://en.wikipedia.org/wiki/3D_projection)
*   [http://en.wikipedia.org/wiki/Viewing_frustum](http://en.wikipedia.org/wiki/Viewing_frustum)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:15:42.727

根据我的经验，在处理二维时，我发现使用一种称为[处理的出色工具取得了巨大的成功](http://processing.org/). 处理是 Java 编程语言的扩展，专门针对任何事物的可视化，从数据结构到令人生畏的物理模拟。从您提供的有用图形中，我假设您想在任何给定时间围绕一个点或轴旋转一个结构。看看功能丰富的 API 参考，处理报价（我是新用户，很遗憾我不能链接两个以上的项目，将在下面放 API 参考的链接）。它们具有围绕点旋转和变换的独特功能。但是，它不会围绕所述点旋转结构，而是围绕该点旋转整个屏幕及其包含的所有内容。例如，如果你想将所有东西都围绕原点 (0,0) 旋转 45 度，它很简单：

```
void setup()
{
  size(200, 200); // Set the size of the screen to 200 x 200 pixels
  background(255); // Set the background to white
  smooth(); // Smooth the edges of the rectangles
  fill(192); // Fill the rectangle with a light gray
  noStroke(); // No black border on rectangle
  rect(40, 40, 40, 40); // Create an equilateral rectangle (square) that is 40 x 40 pixels at the point (40,40)

  pushMatrix(); //Let the compiler know that you will be modifying the Matrix
  rotate(radians(45)); // Rotate the screen about the origin (by default) 45 degrees clockwise
  fill(0); // Color the following rectangle black
  rect(40, 40, 40, 40); // Draw an equivalent rectangle as the last one, only at the new modified screen coordinates
  popMatrix(); // Let the compiler know you are done modifying the matrix
} 
```

上面的代码将创建两个相同的正方形，一个在点 (40,40)，一个在原点顺时针 45 度处。

有一个非常详细的教程可以在[这里](http://processing.org/learning/transform2d/)找到，它更详细地解释了所有内容。我真的希望这会有所帮助。祝一切顺利！API 参考：processing.org/reference/

# windows - Windows 驱动程序编程，线程函数数据参数被损坏？

> ID：10758228
> 
> 赞同：1
> 
> 时间：2012-05-25T16:36:41.860
> 
> 标签：windows, multithreading, timer, driver, wdm

我正在测试这段代码：

```
int handler(void* data)
{
    KTIMER *Timer = (KTIMER *)data;
    DbgPrint("*** timer1.sys: Inside handler ...\n");
    DbgPrint("handler: Address of data: %p\n", data);
    if (STATUS_SUCCESS == KeWaitForSingleObject(Timer,
                                        Executive, KernelMode , 
                                        TRUE, NULL)){
            DbgPrint("Status_Succes for KeWaitForSingleObject");
    } 
    DbgPrint("Done waiting!!! ...\n");
    KeCancelTimer(Timer);
    return 1;
}

void start_timer()
{
    KTIMER Timer;
    LARGE_INTEGER lTimeOut;
    PKTHREAD *delayedWorkerThread;
    void* data;

    DbgPrint("*** timer1.SYS: ==>start_timer\n");

    KeInitializeTimer(&Timer);
    lTimeOut.QuadPart = 3000;           //Delay
    lTimeOut.QuadPart *= 10000;         // 100ns * 10000 = 1ms
    lTimeOut.QuadPart *= -1;            // exactly waiting time
    KeSetTimer(&Timer, lTimeOut, NULL);

    /*
    if (STATUS_SUCCESS == KeWaitForSingleObject(&Timer,
                                        Executive, KernelMode , 
                                        TRUE, NULL)){
            DbgPrint("Status_Succes for KeWaitForSingleObject");
    } 
    DbgPrint("Call Handler ...\n");
    KeCancelTimer(&Timer);
    */

    data = &Timer;
    DbgPrint("start_timer: Address of Timer: &Timer: %p\n", &Timer);
    DbgPrint("Start_timer: Address of Timer: data: %p\n", data);
    delayedWorkerThread = thread_create(handler, data, "Delayed Worker Thread"); // This function will create a thread using PsCreateSystemThread and will return PTHREAD object
    DbgPrint("timer1.sys: start_timer<==\n");
} 
```

现在，当我加载此驱动程序时，我的 m/c 因 (IRQL_NOT_LESS_OR_EQUAL_TO) 而崩溃，`KeWaitForSingleObject`这意味着我正在尝试访问无效地址。但是在 handler 和 start_timer 中的 Timer 地址是相同的。没有 KeWaitForSingleObject 很好。不知道怎么回事，求大神帮忙！

***////////////////////////// 编辑 1 //////////////// ////////////***

没有`KeWaitForSingleObject`即

```
int handler(void* data)
{
    KTIMER *Timer = (KTIMER *)data;
    DbgPrint("*** timer1.sys: Inside handler ...\n");
    DbgPrint("handler: Address of data: %p\n", data);    // Same address
    DbgPrint("handler: Address of Timer: %p\n", TImer);  // Same address

    DbgPrint("Done waiting!!! ...\n");
    KeCancelTimer(Timer);
    return 1;
} 
```

它后来崩溃了..成功安装驱动程序并成功卸载...然后突然蓝屏！Windows 驱动程序编程不是儿戏！:(

两个函数中的地址仍然相同..顺便说一句，当我在没有线程的情况下编写时它工作正常......（在 start_timer() 中取消注释代码）但我必须用线程来做......我想要做的是，调用 start_timer( ) 具有多次不同的延迟，并且应该相应地调用处理程序，它不应该阻塞其他执行从而创建线程。

# variables - Apex - 范围 - 变量

> ID：10758229
> 
> 赞同：-1
> 
> 时间：2012-05-25T16:36:43.000
> 
> 标签：variables, scope, global-variables, salesforce, apex-code

我已经尝试了很多来完成这项工作，但我不知道如何让它工作。这是一个普通的编程问题，不是 Apex/Salesforce 之谜。

**场景**：例如，我有一个带有 2 个父对象的联结对象假设有 3 个对象父 1、父 2 和联结。当只有一个联结对象链接到 Parent1 时，我试图获取父级的 id（这对我来说是通过 SOQL 工作的），但是当只有一个联结对象被删除时；当有 1 个 Junction 对象时，我试图保存对 Parent1 的 ID 的访问。注意：这一切都发生在一个 for 循环中，每次添加或删除一个 junction 对象时都会进行迭代！

**我尝试过的**：伪代码！

```
Public static String parent1Id;

for (everytime a junction object is added / deleted)
{

    if (listOfJunctionObjects.size() == 1)
    {
        parent1Id = [Do a SOQL to get the Id from the junction object];
    }

    if (listOfJunctionObjects.size() == 0)
    {
        //CANNOT ACCESS THE parent1Id here
        //The if statements get executed at different times everytime
        the for loop runs
    }
} 
```

**我认为是正确的：**我认为 parent1Id 应该保存在某种常量或其他东西中，以便每次执行第一个 if 语句后 parent1Id 的值都是相同的！

请帮忙，我真的需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:07:47.397

我向 Parent1 添加了一个字段，我在其中存储了 Parent 1 的 Id，然后通过多次迭代访问它。

# iphone - 添加超过 5 个标签.. 更多未显示 iPHONE

> ID：10758232
> 
> 赞同：0
> 
> 时间：2012-05-25T16:36:51.333
> 
> 标签：iphone, ios, tabbar

好的，我正在使用自定义标签栏（不是基于标签的应用程序），但我希望显示更多按钮的行为，并且如果我超过 5 个项目，则其行为与基于标签的应用程序相同。

由于这只是一个 TABBAR，在普通视图的 XIB 中将 TAB BAR 项目添加到它，它只是在显示时继续将它们添加到 TABBAR。我如何模拟/复制，最好继承基于选项卡的应用程序的行为，以便我的选项卡栏会限制其显示并显示更多并表现得适当？

请不要告诉我，将您的应用程序重写为基于选项卡的应用程序，因为这不是我想要做的，也不能解决其他问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:46:43.980

添加到 TabBar 的更多按钮是[UITabBarController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)的功能，而不是选项卡栏本身。UITabBarController 有一个标签栏，并添加了更多行为，例如更多按钮、编辑以及您在大多数基于 Tab 的应用程序中看到的所有花哨的东西。

通常它被用作你的应用程序的 rootViewController，但你应该能够将一个添加到你的非基于选项卡的应用程序中。但是，您将需要重写一些代码。

例如，UITabBarController 需要一个包含所有需要显示的 ViewController 的数组，而不是一个 Tab Items 数组。每个控制器都会成为一个选项卡项，每个选项卡项中显示的标题和图像均取自与其关联的 UIViewController。它将管理与所选选项卡项关联的 ViewController 的显示和隐藏。

如果您不希望使用 UITabBarController 并且仍然更喜欢 UITabBar，我猜您除了自己实现行为之外别无选择，也许通过继承 UITabBar。您还需要“更多”文本的本地化版本。

# javascript - 重新加载后 onclick 事件失败

> ID：10758234
> 
> 赞同：0
> 
> 时间：2012-05-25T16:36:56.683
> 
> 标签：javascript, jquery, ajax, events, onclick

我要完成的工作：

我有一个 div 来跟踪用户的统计信息。当点击用户时，div 的内容会被一个 ajax 请求回显页面替换为用户的详细信息。每 10 秒，div 将使用 ajax 刷新，因此旧内容，所有用户的统计信息再次显示。

我的问题：加载页面后，点击用户时，onclick 事件效果很好；详细信息将加载。大约 10 秒后，旧的 ALL 用户统计信息会刷新 div 内容。

到目前为止一切顺利，除了 onclick 事件对新内容不起作用......

这是我的代码：

Javascript：

```
var x;
var namen;
window.onload = function(){
    x = true;
    $("submitnieuw").observe('click', addturf);
    $("submitdelete").observe('click', verwijderturf);
    setInterval(function (){
        if(x === true){
            alert("a");
            x = $('stats').getElementsByTagName('tr');
            jQuery("#stats").load("stats.php");
            jQuery("#recent").load("vandaag.php");
            namen = $('stats').getElementsByTagName('tr');
            for(var i = 1; i < namen.length; i++){  
                namen[i].observe('click', select);
            }   
        }
    }, 10000);
    namen = $('stats').getElementsByTagName('tr');
    for(var i = 1; i < namen.length; i++){  
        namen[i].observe('click', select);
    }   
};

function select(naam){
    //highlight the selected list element
    var name = naam.findElement('tr').id;
    jQuery.ajax('details.php',{
        data: {
            'Naam': name,
            'door': $("door2").value
        },
        type: 'post', 
        success: function(data){
            $("stats").innerHTML = data;
        },
        error: ajaxFailure
    });
}

function detail(ajax){
    var text = ajax.responseText;
    alert(text);
    L = text;
}

function verwijderturf() {
    var naam = $("naam").value;
    $("naamnieuw").value = "";
    $("naam").value = "";
    $("redennieuw").value = "";
    jQuery.ajax('server.php',{
        data: {
            'mode': 'verwijderturf',
            'naam': naam,
            'door': $("door2").value
        },
        type: 'post', 
        success: update,
        error: ajaxFailure
    });
}

function addturf() {
    var naam = $("naamnieuw").value;
    var reden = $("redennieuw").value;
    $("naamnieuw").value = "";
    $("naam").value = "";
    $("redennieuw").value = "";
    jQuery.ajax('server.php',{
        data: {
            'mode': 'addturf',
            'naam': naam,
            'door': $("door2").value,
            'reden': reden
        },
        type: 'post', 
        success: update,
        error: ajaxFailure
    });
}

function update(ajax){
    jQuery("#stats").load("stats.php");
    jQuery("#recent").load("vandaag.php");
}

function ajaxFailure(ajax, exception) {
    alert("Error making Ajax request:" + 
        "\n\nServer status:\n" + ajax.status + " " + ajax.statusText + 
        "\n\nServer response text:\n" + ajax.responseText);
    if (exception) {
        throw exception;
    }
} 
```

stats.php（再次加载的内容）：

```
<?php
    include_once("db.php"); 
?>

<?php
    $names = mysql_query("SELECT Naam From users");
    $feedData = '';
    $feedData .= "<fieldset>";
    $feedData .= "<legend>Turfjesteller</legend>";
    $feedData .= "<table border=0>";
    $feedData .= "<tr>";
    $feedData .= "<td>Naam</td>";
    $feedData .= "<td>Aantal</td>";
    $feedData .= "<td>Gedaan</td>";
    $feedData .= "<td>Resterend</td>";
    $feedData .= "</tr>";
    while($r = mysql_fetch_array($names)){
        $feedData .= "<tr id=".$r['Naam'].">";
        $feedData .="<td>" . $r['Naam'] . "</td>";

        $sql="SELECT * FROM turfjes WHERE Naam='".$r['Naam']."' AND Type='Adtje'";
        $result=mysql_query($sql);
        $count=mysql_num_rows($result); //count = adtjes
        $sql2="SELECT * FROM turfjes WHERE Naam='".$r['Naam']."' AND Type='Turfje'";
        $result2=mysql_query($sql2);
        $count2=mysql_num_rows($result2); //count2 = turfje     

        $feedData .="<td>" . $count2 . "</td>";
        $feedData .="<td>" . $count . "</td>";
        $feedData .="<td>" . ($count2-$count) ."</td>";     
        $feedData .="</tr>";
    } 
    $feedData .="</table>";
    $feedData .="</fieldset>";
    echo($feedData);
?> 
```

如前所述，页面看起来完全一样，但 onclick 事件不再起作用。

div 内容完全相同，所以我不知道出了什么问题。

```
namen = $('stats').getElementsByTagName('tr');
for(var i = 1; i < namen.length; i++){  
     namen[i].observe('click', select);
} 
```

应该获取所有表行并再次向它们添加 onclick 事件...

在 10 秒后用 stats.php 替换 stats div 后，onclick 事件不再起作用..

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:45:50.860

您可以使用 jQuery 的 on() 方法设置初始点击处理程序：

```
$(document).on('click', '<div selector>', select); 
```

这将确保仍然在新元素上捕获点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:40:56.683

尝试在每次 ajax 响应后将 onclick 重新绑定到所需的 div

# objective-c - 核心数据中查找或创建模式的正确 NSPredicate

> ID：10758235
> 
> 赞同：0
> 
> 时间：2012-05-25T16:36:56.967
> 
> 标签：objective-c, ios, core-data, nspredicate, replace

下面是我的**查找或创建**代码：

```
+ (id)checkIfEntity:(NSString *)entityName 
        withIDValue:(NSString *)entityIDValue 
           forIDKey:(NSString *)entityIDKey 
    existsInContext:(NSManagedObjectContext *)context
{

    // Create fetch request
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setReturnsObjectsAsFaults:NO];

    // Fetch messages data
    NSEntityDescription *description = [NSEntityDescription entityForName:entityName inManagedObjectContext:context];
    [request setEntity:description];

    // Only include objects that exist (i.e. entityIDKey and entityIDValue's must exist)
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%@=%@", entityIDKey, entityIDValue];
    [request setPredicate:predicate];    

    // Execute request that returns array of dashboardEntrys
    NSArray *array = [context executeFetchRequest:request error:nil];

    if ( [array count] ) {

        NSLog(@"%@ = %@ DOES EXIST", entityIDKey, entityIDValue);
        return [array objectAtIndex:0];
    }

    NSLog(@"%@ = %@ DOES NOT EXIST", entityIDKey, entityIDValue);
    return [NSEntityDescription insertNewObjectForEntityForName:entityName inManagedObjectContext:context];
} 
```

**请忽略这样一个事实，即我没有通过两个 return 语句来采用最佳实践——我会在将我的代码推送到生产之前这样做**。

它通过传递一个 NSManagedObject 实体来工作`entityName`，并且有一个 NSPredicate 来检查是否有一个`entityIDKey`with 值`entityIDValue`；`entityIDKey = entityIDValue`. 我也尝试过使用`==`.

无论我使用哪种比较方法，该`if ( [array count] )`方法都不会被命中，因此第二`NSLog`条语句总是得到输出，说明我知道存在于我的 Core Data 存储中的对象实际上并不存在。因此，当我去显示我的商店的内容时，我最终会得到许多重复的条目。

我的 NSPredicate 语句是否正确？

```
 `NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%@=%@", entityIDKey, entityIDValue];` 
```

在哪里`entityIDKey = @"userID"`和`entityIDvalue = @"1234567890"`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:14:04.157

是的，问题肯定是谓词。

谓词参数应该是：

`%K == %@`

不是

`%@ = %@`

# python - 如何分析python中的列？

> ID：10758237
> 
> 赞同：2
> 
> 时间：2012-05-25T16:37:05.170
> 
> 标签：python

我有一个制表符分隔的表，它有多列（1500）和几行（10）。

基本上如何让我的程序查看列而不是行？我需要根据其中的内容来计算和组织列。

一个示例是计算非“-”列中有多少条目。

我认为 itertools.groupby 可能是我正在寻找的，但我不知道语法，或者它是否是正确的。

我已经学习编程/python 两个星期了，所以我不知道该怎么做。谢谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:40:21.547

你可能想看看[csvreader doc](http://docs.python.org/library/csv.html)

拥有 csv 关键字，您会在 Google 上找到大量您想做的事情。

[比如这个](http://ask.metafilter.com/142871/Columnoriented-CSV-in-Python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:59:38.250

如果您熟悉 R（即使您不熟悉），我推荐[pandas](http://pandas.pydata.org/)库。它为 python 带来了 R 中的 DataFrame 结构，它允许您轻松地按行或列操作表（以及许多其他内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T16:40:28.930

```
filename = 'data.txt'
col = 2 # note, this uses a zero-based index.

with open(filename) as f:
    for line in f:
        target = line.split()[col]
        print target 
```

`col`这会在文件中找到列`filename`并将找到的字符串放入变量`target`中。您可以相应地调整您的行动以达到目标。

假设每行将包含您要查找的列数，并且每行都包含数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T16:41:46.977

如果文件不是太大（听起来好像不是），那么最简单的方法可能是将整个文件读入一个表格，然后从那里开始。例如：

```
text = open('some_file.txt').read()
table = [line.split('\t') for line in text.split('\n') if line.strip()] 
```

然后，您使用例如将给定列提取为列表：

```
col5 = [row[5] for row in table] 
```

您可以使用以下方法将表格从行列表转换为列列表：

```
columns = [[row[c] for row in table] for c in range(NUM_COLUMNS) 
```

（这假设您有固定数量的列，并且所有行都具有完全相同的列数。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T16:45:24.203

您肯定想用上下文管理器 ( `with`) 打开一个文件。然后，您想遍历文件的行（即“行”）。你去掉一些空白字符，看看有没有剩下的东西。然后在出现特定分隔符的位置拆分行，从而为您提供此行中的“字段”：

```
with open(filename) as f:
    for line in f:
        line = line.strip()
        if line:
            tokens = line.split(delimiter) 
```

这是一个强大的概念。只需将其与您的分析/评估代码合并即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T15:21:29.577

谢谢你们每一个人的帮助！我尝试了它们中的每一个，它们都按照描述进行，并且可能会被合并到我的代码中（如果我更擅长 python）。我发现最适合我对列所做的工作是：

```
table = []
for each_line in homefile:
##doesn't include first line
        arr1 = each_line.strip("\n").split('\t')
        table.append(arr1)
##created a list of lists(matrix); each row as one entry in table(list)
cols = zip(*table)
##this switches rows and columns 
```

然后，我能够对每一列进行处理，同时将每一列视为一个列表，其中包含来自原始制表符分隔表的每一列的条目。

# jquery-widgets - rcarousel 可以动态退出自动前进模式吗？

> ID：10758238
> 
> 赞同：0
> 
> 时间：2012-05-25T16:37:12.580
> 
> 标签：jquery-widgets

我正在编写的页面中使用[rcarousel](http://ryrych.github.com/rcarousel/)，不幸的是我还不能作为示例分享。但这与我的问题无关，因为我的问题不是错误，而是功能存在查询。

我在创建时启用了“自动”，但如果用户单击其中一个导航按钮，我希望能够动态禁用它。这是轮播的创建：

```
$("#landing-features-carousel").rcarousel({
    visible: 2,
    step: 2,
    speed: 700,
    width: 474,
    height: 267,
    auto: { enabled: true, interval: 8000 },
    start: window.landing.generateCarouselPages,
    pageLoaded: window.landing.carouselLoaded
}); 
```

我希望能够做这样的事情：

```
$("#ui-carousel-next").bind("click", function(e) {
    $("#landing-features-carousel").rcarousel("options", "auto", { enabled: false });
}); 
```

但这当然行不通。

有谁知道 rcarousel 是否可以动态退出自动前进模式？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:59:43.953

IIRC 有一个错误。现在我正在测试分支中开发下一个版本，除此之外，我还实现了一个很好的 API 方法来控制轮播——你可以随时暂停和播放。我也添加了一个新示例。

由于它是测试分支，我不能说它是否稳定。虽然提交的次数并不多，但如果您有足够的勇气，您可以浏览新的提交并使用该版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T16:18:56.060

在最新版本的[rcarousel](http://ryrych.github.io/rcarousel/)中，我能够得到以下内容来处理一个警告*****

```
$("#ui-carousel-next").bind("click", function(e) {
    $("#landing-features-carousel").rcarousel("option", { auto: { enabled: false} });
}); 
```

*****需要注意的是，在单击时，轮播在单击后仍会再滚动一次，然后停止。

这很烦人，所以我最终决定在轮播 div 和 prev/next 按钮悬停时停止自动，这似乎立即停止了轮播：

```
$("#ui-carousel-next").hover(function () {
    $("#landing-features-carousel").rcarousel("option", { auto: { enabled: false} });
});

$("#ui-carousel-prev").hover(function () {
    $("#landing-features-carousel").rcarousel("option", { auto: { enabled: false} });
});

$("#landing-features-carousell").hover(function () {
    $("#landing-features-carousel").rcarousel("option", { auto: { enabled: false} });
}); 
```

# r - 根据一个或多个其他列中的值对因子进行排序

> ID：10758243
> 
> 赞同：43
> 
> 时间：2012-05-25T16:37:41.113
> 
> 标签：r, r-factor

我浏览了许多关于排序因素的帖子，但还没有找到适合我的问题的匹配项。不幸的是，我对 R 的了解还很初级。

我有一个正在使用的考古文物目录的子集。我正在尝试对诊断历史工件类型和站点测试位置进行交叉制表。使用 ddply 或 tapply 很容易。

我的问题是我想按平均诊断日期（数字/年份）对工件类型（一个因素）进行排序，并且我一直按字母顺序获取它们。我知道我需要将其设为有序因子，但无法弄清楚如何按另一列中的年份值对其进行排序。

```
IDENTIFY                                      MIDDATE
engine-turned fine red stoneware              1769
white salt-glazed stoneware, scratch blue     1760
wrought nail, 'L' head                        1760
yellow lead-glazed buff earthenware           1732
... 
```

需要订购的：

```
IDENTIFY                                      MIDDATE
yellow lead-glazed buff earthenware           1732
white salt-glazed stoneware, scratch blue     1760
wrought nail, 'L' head                        1760
engine-turned fine red stoneware              1769
... 
```

因子 (IDENTIFY) 需要按日期 (MIDDATE) 排序。我以为我有

```
Catalog$IDENTIFY<-factor(Catalog$IDENTIFY,levels=Catalog$MIDDATE,ordered=TRUE) 
```

但得到警告：

```
In `levels<-`(`*tmp*`, value = if (nl == nL) as.character(labels) 
else paste0(labels,: duplicated levels will not be allowed 
in factors anymore 
```

IDENTIFY 有大约 130 个因子水平，许多具有相同的 MIDDATE 值，所以我需要按 MIDDATE 和另一列 TYPENAME 订购 IDENTIFY。

更详细一点：

我有一个 dataframe `Catalog`，它分解（即`str(Catalog)`）为：

```
> str(Catalog)
'data.frame':   2211 obs. of  15 variables:
 $ TRENCH  : Factor w/ 7 levels "DRT 1","DRT 2",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ U_TYPE  : Factor w/ 3 levels "EU","INC","STP": 1 1 1 1 1 1 1 1 1 1 ...
 $ U_LBL   : Factor w/ 165 levels "001","005","007",..: 72 72 72 72 72 72 ...
 $ L_STRAT : Factor w/ 217 levels "#2-7/25","[3]",..: 4 4 4 4 4 4 89 89 89 89 ...
 $ START   : num  0 0 0 0 0 0 39.4 39.4 39.4 39.4 ...
 $ END     : num  39.4 39.4 39.4 39.4 39.4 39.4 43.2 43.2 43.2 43.2 ...
 $ Qty     : int  1 1 3 5 1 1 6 8 1 1 ...
 $ MATNAME : Factor w/ 6 levels "Ceramics","Chipped Stone",..: 1 1 1 5 5 6 ...
 $ TYPENAME: Factor w/ 9 levels "Architectural Hardware",..: 9 9 9 1 1 3 9 ...
 $ CATNAME : Factor w/ 32 levels "Biface","Bottle Glass",..: 24 29 29 6 24 ...
 $ IDENTIFY: Factor w/ 112 levels "amethyst bottle glass",..: 17 91 96 71 103 ...
 $ BEGDATE : int  1820 1820 1830 1835 1700 NA 1670 1762 1800 1720 ...
 $ ENDDATE : int  1900 1970 1860 1875 1820 NA 1795 1820 1820 1780 ...
 $ OCC_LBL : Ord.factor w/ 5 levels "Late 19th Century"<..: 2 1 2 2 4 5 4 3 ...
 $ MIDDATE : num  1860 1895 1845 1855 1760 ... 
```

我需要制作`IDENTIFY`一个有序因子，并按`MIDDATE`-> `TYPENAME`-> alpha by重新排序`IDENTIFY`。

我没有真正得到的是如何通过来自多个列的组合订单重新排序。

我只会在数据库中执行此操作，但是我正在运行的很多内容都是各种交叉表中的加权平均值（例如，按位置划分的工件类的地表以下加权平均深度）...

...在 Access 中可行，但混乱且不可预测。在 R 中管理起来更容易、更干净，但我宁愿不必手动重新排序结果表。

我试图产生的是沿着这些方向的一些东西：

```
>xtab.Catalog<-tapply(Catalog$Qty,list(Catalog$IDENTIFY,Catalog$TRENCH),sum)

IDENTIFY                        DRT1    DRT2    DRT3    DRT4    DRT5    DRT6
Staffordshire stoneware         4       NA      NA      NA      NA      NA  
undecorated delftware           6       4       NA      NA      NA      NA  
unidentified wrought nail       15      9       3       1       3       NA  
white salt-glazed stoneware     6       1       1       NA      2       1   
white salt-glazed scratch blue  1       NA      NA      NA      NA      NA  
white stoneware, slip-dipped    NA      NA      NA      NA      NA      NA  
wrought nail, 'L' head          2       NA      NA      NA      NA      NA  
wrought nail, 'rose' head       62      21      4       NA      1       1   
wrought nail, 'T' head          2       NA      1       NA      NA      1   
yellow lead-glazed              12      NA      NA      NA      1       3   
... 
```

...但我需要他们按逻辑（即时间/类型）顺序而不是字母顺序排序。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-28T01:01:58.790

这是一个可重现的样本，带有解决方案：

```
set.seed(0)
a = sample(1:20,replace=F)
b = sample(1:20,replace=F)
f = as.factor(letters[1:20])

> a
 [1] 18  6  7 10 15  4 13 14  8 20  1  2  9  5  3 16 12 19 11 17
> b
 [1] 16 18  4 12  3  5  6  1 15 10 19 17  9 11  2  8 20  7 13 14
> f
 [1] a b c d e f g h i j k l m n o p q r s t
Levels: a b c d e f g h i j k l m n o p q r s t 
```

现在对于新因素：

```
fn = factor(f, levels=unique(f[order(a,b,f)]), ordered=TRUE)

> fn
 [1] a b c d e f g h i j k l m n o p q r s t
20 Levels: k < l < o < f < n < b < c < i < m < d < s < q < g < h < e < ... < j 
```

排序在“a”，下一个“b”，最后是“f”本身（尽管在这个例子中，“a”没有重复值）。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-07-29T15:59:41.303

我推荐以下基于 dplyr 的方法 (h/t [daattali](https://github.com/STAT545-UBC/Discussion/issues/52) )，它可以扩展到任意数量的列：

```
library(dplyr)
Catalog <- Catalog %>%
  arrange(MIDDATE, TYPENAME) %>%               # sort your dataframe
  mutate(IDENTIFY = factor(IDENTIFY, unique(IDENTIFY))) # reset your factor-column based on that order 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-10T15:57:02.493

该功能`fct_reorder2`就是这样做的。

请注意`fct_reorder`按升序排序而`fct_reordering2`按降序排序的微妙之处。

文档中的代码：

```
df0 <- tibble::tribble(
  ~color,     ~a, ~b,
  "blue",      1,  2,
  "green",     6,  2,
  "purple",    3,  3,
  "red",       2,  3,
  "yellow",    5,  1 
```

)

```
df0$color <- factor(df0$color)
fct_reorder(df0$color, df0$a, min)
 #> [1] blue   green  purple red    yellow
 #> Levels: blue red purple yellow green
fct_reorder2(df0$color, df0$a, df0$b) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-05T15:15:35.773

`data.table`版本。像往常一样单线

```
library(data.table)
Catalog = data.table(Catalog)
Data[, IDENTIFY := reorder(IDENTIFY, MIDDATE)] 
```

注意：`IDENTIFY`需要已经是一个因素。该解决方案的主要动力来自于`stats::reorder`功能。

# oracle - 来自 weblogic 事务的死锁 oracle rac

> ID：10758246
> 
> 赞同：1
> 
> 时间：2012-05-25T16:38:04.857
> 
> 标签：oracle, weblogic, database-deadlocks

最近我的数据库中的一个表被锁定。我正在使用 Oracle RAC，发送到数据库的事务由 weblogic 10.3.0 管理。我已经配置了多个数据源，并且我的事务启用了“支持全局事务”和“单阶段提交”选项。在该表被锁定后，我不知道为什么 weblogic 不终止此事务，我的问题是：

1 - ORACLE RAC 根据我的连接池配置锁定表的可能原因是什么？

2 - 为什么 weblogic 在超时后没有终止事务（对于这种情况，我将超时设置为 30 秒）？

更多信息：我正在使用瘦驱动程序将 weblogic 与 ORACLE RAC 连接起来

对于这种情况，我没有在日志中看到与死锁相关的错误或类似的错误:(

# php - 尝试运行 Symfony 2.0.14 时出现问题：“哎呀，好像出了点问题”

> ID：10758252
> 
> 赞同：2
> 
> 时间：2012-05-25T16:38:08.303
> 
> 标签：php, symfony

我试图让 Symfony 2.0.14 在我的本地 PC 上运行，但出现此错误：

> 哎呦，看起来像出事了。
> 
> 1/1 InvalidArgumentException：没有扩展能够加载“框架”的配置（在 /var/www/html/symfony/app/config/config_dev.yml 中）。寻找命名空间“框架”，在 /var/www/html/symfony/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/YamlFileLoader.php 第 272 行中的 YamlFileLoader->validate() 中没有找到 /var/www /html/symfony/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/YamlFileLoader.php 第 242 行 YamlFileLoader->loadFile() in /var/www/html/symfony/vendor/symfony/src/Symfony/Component /DependencyInjection/Loader/YamlFileLoader.php 第 42 行 YamlFileLoader->load() 在 /var/www/html/symfony/vendor/symfony/src/Symfony/Component/Config/Loader/DelegatingLoader.php 第 52 行在 DelegatingLoader->

对此有何建议？我在 Fedora 16 中运行 PHP 5.4.3 这是我第一次遇到这个问题:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:31:50.257

我在运行 PHP 5.4.2（后来升级到 5.4.4）的 Windows 7 上使用 Symfony 2.0.15，遇到了同样的错误信息。

如[https://github.com/symfony/symfony/issues/4416](https://github.com/symfony/symfony/issues/4416)（由 ReynierPM 打开）所示，问题是由 APC 和 PHP 5.4.x 引起的，因此禁用 APC“修复”了问题。它通过在 Windows 上为我注释掉 php.ini 中的 extension=php_apc.dll 来工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:11:48.180

尝试运行`php bin/vendors install`并访问*/config.php*。
此外，请确保[您的某些文件不以*.ph*、*.tw*或*.ym 结尾*](http://www.siteduzero.com/forum-83-688459-p1-pb-installation-symfony.html#r6657033)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:39:34.943

你读过symfony2 中的**安装和配置 Symfony吗？**清楚地描述了如何配置全新的 symfony2 安装。

[Symfony2 Book-安装和配置 Symfony](http://symfony.com/doc/current/book/installation.html)

主要步骤：

*   确保您具有正确的目录结构

*   如果您下载时没有更新供应商

*   设置权限！非常重要

# css - 这个阴影可以在 CSS 中创建吗？

> ID：10758253
> 
> 赞同：4
> 
> 时间：2012-05-25T16:38:09.317
> 
> 标签：css

如何在 CSS 中创建以下双角度阴影？甚至可能吗？

![在此处输入图像描述](../Images/6f238b36450e1d596184aea95c60b002.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T16:42:24.823

使用以下 HTML：

```
<div class="box"></div>​ 
```

和以下CSS：

```
.box {
    width:70%;
    height:200px;
    margin:40px auto;
    position: relative;
    background-color: red;
}
.box:before, .box:after {
  z-index: -1;
  position: absolute;
  content: "";
  bottom: 15px;
  left: 10px;
  width: 50%;
  top: 80%;
  max-width:300px;
  background: #777;
  -webkit-box-shadow: 0 15px 10px #777;
  -moz-box-shadow: 0 15px 10px #777;
  box-shadow: 0 15px 10px #777;
  -webkit-transform: rotate(-3deg);
  -moz-transform: rotate(-3deg);
  -o-transform: rotate(-3deg);
  -ms-transform: rotate(-3deg);
  transform: rotate(-3deg);
}
.box:after {
  -webkit-transform: rotate(3deg);
  -moz-transform: rotate(3deg);
  -o-transform: rotate(3deg);
  -ms-transform: rotate(3deg);
  transform: rotate(3deg);
  right: 10px;
  left: auto;
}​ 
```

看这个活生生的[例子](http://jsfiddle.net/jackdent/7pgFf/3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T16:41:50.597

是： http: [//matthamm.com/box-shadow-curl.html](http://matthamm.com/box-shadow-curl.html)

另外： http: [//nicolasgallagher.com/css-drop-shadows-without-images/demo/](http://nicolasgallagher.com/css-drop-shadows-without-images/demo/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T16:41:42.233

您可以在盒子后面放置两个 div，并带有一个填充和一个盒子阴影。然后每个旋转一点。不过，我可能会用图像来做，看起来更干净。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T16:41:27.900

是的，它是可能的，带有`before`和`after`伪元素。

你绝对定位这两个，你旋转它们，比如说 5deg（实际上，一个用 5，另一个用 -5），你给它们每个 a `box-shadow`，你调整散布值，使阴影看起来比盒子本身小. 并且您将它们设置为`z-index`它们出现在您的 div 后面。

链接到演示[http://dabblet.com/gist/2789364](http://dabblet.com/gist/2789364)

代码的相关部分

```
.box:before, .box:after {
    bottom: 0;
    min-height: 45%;
    width: 65%;
    border-radius: 3px;
    box-shadow: 0 0 10px rgba(204,204,204,.4);
    position: absolute;
    z-index: -1;
    background: rgba(204,204,204,.4);
    content: '';
}
.box:before {
    left: 5px;
    transform: rotate(-5deg);
}
.box:after {
    right: 5px;
    transform: rotate(5deg);
} 
```

# android - AccountManagerFuture.getResults 在连接处于活动状态时抛出 IOException

> ID：10758255
> 
> 赞同：9
> 
> 时间：2012-05-25T16:38:19.740
> 
> 标签：android, oauth-2.0, access-token, google-account

以下方法在我的 Android 设备上调用时系统地抛出 IOException 而互联网连接是活动的（我可以使用我的 Android 设备检索电子邮件或连接到 gmail）。

有人可以帮忙吗？

```
private void performAuthentication() {
    Log.d("GAWidget", "performAuthentication");
    GoogleCredential credential = new GoogleCredential();
    GoogleAccountManager accountManager = new GoogleAccountManager(this);
    Log.d("GAWidget", "after getting accountManager");
    Account account = accountManager.getAccountByName("balteo@gmail.com");
    Log.d("GAWidget", "after getting account"+"account.name: "+account.name);
    accountManager.getAccountManager().getAuthToken(account, "oauth2:https://www.googleapis.com/auth/‌​analytics.readonly",
            true, new AccountManagerCallback<Bundle>() {

                public void run(AccountManagerFuture<Bundle> future) {
                    try {
                        String token = future.getResult(15, TimeUnit.SECONDS).getString(AccountManager.KEY_AUTHTOKEN);
                        Log.d("GAWidget", "token: "+token);
                        useToken(token);
                    } catch (OperationCanceledException e) {
                        Log.e("GAWidget", "OperationCanceledException", e);
                    } catch (AuthenticatorException e) {
                        Log.e("GAWidget", "AuthenticatorException", e);
                    } catch (IOException e) {
                        Log.e("GAWidget", "IOException", e);
                    }
                }

            }, null);
} 
```

编辑：这是堆栈跟踪：

```
05-27 19:09:04.319: E/GAWidget(12487): IOException
05-27 19:09:04.319: E/GAWidget(12487): java.io.IOException
05-27 19:09:04.319: E/GAWidget(12487):  at android.accounts.AccountManager.convertErrorToException(AccountManager.java:1440)
05-27 19:09:04.319: E/GAWidget(12487):  at android.accounts.AccountManager.access$400(AccountManager.java:138)
05-27 19:09:04.319: E/GAWidget(12487):  at android.accounts.AccountManager$AmsTask$Response.onError(AccountManager.java:1301)
05-27 19:09:04.319: E/GAWidget(12487):  at android.accounts.IAccountManagerResponse$Stub.onTransact(IAccountManagerResponse.java:69)
05-27 19:09:04.319: E/GAWidget(12487):  at android.os.Binder.execTransact(Binder.java:320)
05-27 19:09:04.319: E/GAWidget(12487):  at dalvik.system.NativeStart.run(Native Method) 
```

装运的罐子：

```
google-http-client-1.9.0-beta.jar
google-http-client-android2-1.9.0-beta.jar (only for SDK >= 2.1)
google-http-client-android3-1.9.0-beta.jar (only for SDK >= 3.0)
gson-2.1.jar
guava-11.0.1.jar
jackson-core-asl-1.9.4.jar
jsr305-1.3.9.jar
protobuf-java-2.2.0.jar 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T02:21:09.347

正在将`AccountManager`任何网络错误转换为`IOException`'s. 网络错误可能是某种意外的 HTTP 状态，因此它可能与网络连接没有直接关系。请注意，`AccountManager`支持一些但不是所有的 'oauth2:' 类型令牌，因此这可能是相关的。尝试使用已知受支持的令牌。另请查看 logcat 以获取提示，那里可能有一些警告。这是完整的堆栈跟踪吗？

这适用于 GN 4.0.4（注意它使用的是 system `AccountManager`，而不是`GoogleAccountManager`）：

```
 AccountManager am = AccountManager.get(this);
    Account[] accounts = accountManager.getAccountsByType("com.google");
    String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/analytics.readonly";
    am.getAuthToken(accounts[0], AUTH_TOKEN_TYPE, null,
                   this, new AccountManagerCallback<Bundle>() {
                        public void run(AccountManagerFuture<Bundle> future) {
                           try {
                             String token = 
future.getResult().getString(AccountManager.KEY_AUTHTOKEN);
                            System.out.println("token " + token);
                            } catch (...) {}

                            }
                        }, null); 
```

编辑：这是我从您的帖子中复制令牌类型时得到的：

```
0000000: 226f 6175 7468 323a 6874 7470 733a 2f2f  "oauth2:https://
0000010: 7777 772e 676f 6f67 6c65 6170 6973 2e63  www.googleapis.c
0000020: 6f6d 2f61 7574 682f 3f3f 616e 616c 7974  om/auth/??analyt
0000030: 6963 732e 7265 6164 6f6e 6c79 220a       ics.readonly". 
```

同样，这可能是我的浏览器或 smth，通过检查您的字符串（尤其是最后一部分）

# ios - iOS5 通讯簿文本字段

> ID：10758258
> 
> 赞同：0
> 
> 时间：2012-05-25T16:38:33.670
> 
> 标签：ios, ios5, components

我需要做一个像地址簿这样的组件文本字段。我怎么做？

左边是一个按钮，右边是一个tex字段。

例子：

![显示带有标签的字段的示例图像](../Images/f25f59503ecad060de07d37ee3b9fc55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:41:44.697

创建一个用圆角绘制自身并绘制分隔两半的垂直线的视图。添加一个不带边框的按钮作为左侧的子视图；添加一个没有边框的文本字段作为右侧部分的子视图。

绘制圆角很简单：只需设置`cornerRadius`视图层的属性：

```
myView.layer.cornerRadius = 10.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:10:37.657

如果要将其用作表格单元格，则可以使用单元格样式

```
UITableViewCellStyleValue2 
```

> 单元格左侧带有标签的单元格样式，其文本为右对齐和蓝色；单元格右侧是另一个带有较小文本的标签，左对齐和黑色。电话/联系人应用程序使用这种样式的单元格。

来自[UITableViewCell 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)

否则，您可以只创建一个文本字段并将标签设置为 leftView。就像 Caleb 已经说过的那样，使用cornerRadius 属性来获得圆角。

# css - 仅在 Drupal Doctype 的联系表单页面上仅在 IE 中左对齐？

> ID：10758264
> 
> 赞同：0
> 
> 时间：2012-05-25T16:39:06.587
> 
> 标签：css, internet-explorer, drupal

我正在为一个朋友建立这个网站，每个页面看起来都是正确的，但在 IE 中它是向左浮动的，导致横幅重复并且文本看起来偏离中心。问题出在 IE 7、8 和 9 中。 [http://www.tripodi.devserver2012.com/content/contact-us](http://www.tripodi.devserver2012.com/content/contact-us)

其他页面之间的 css 和这个没有区别，唯一的区别是 html 中有一个额外的类，但这个类没有 css。整个都关闭了，这里是css。

我认为这与 doctype 声明有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:18:02.717

IE 正在触发怪癖模式。尝试在您的 DOCTYPE 声明之前删除任何内容，特别是：`<!-- Contact Us template-->`.

来自[维基百科](http://en.wikipedia.org/wiki/Quirks_mode#Triggering_different_rendering_modes)：

> 如果在 DOCTYPE 之前有任何内容，也会触发任何版本的 IE 中的 Quirks 模式。例如，如果超文本文档在 DOCTYPE 之前包含注释或任何标记，IE 将使用 quirks 模式

# php - 读写数据（不完整的条目来了）

> ID：10758265
> 
> 赞同：0
> 
> 时间：2012-05-25T16:39:06.760
> 
> 标签：php, mysql

```
 $result = mysql_query("SELECT post,replier FROM book1");

  while($row = mysql_fetch_array($result))
  { 
   $replier = $row['replier'];
   $some = $row['post'];

   $wors = strip_tags($some);

   $query = "INSERT INTO words VALUES('$wors','$replier')";
   $up= mysql_query($query);
   } 
```

我必须从数据库条 html 中获取数据并将其放入另一个数据库中，但是使用上面的代码，只有一半的数据存储在第二个数据库中，尽管当我显示所有记录时都从第一个 db 显示。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:45:41.843

您有自动 SQL 注入。如果存储在第一个 DB 中的某些 HTML 包含引号，它将中断下一个查询。所以，逃避价值观！

```
$result = mysql_query("SELECT post,replier FROM book1");

  while($row = mysql_fetch_array($result))
  { 
   $replier = mysql_real_escape_string($row['replier']);
   $wors = mysql_real_escape_string(strip_tags($row['post']));

   $query = "INSERT INTO words VALUES('$wors','$replier')";
   $up= mysql_query($query);
   } 
```

# qt - 如何在子管理调整大小时强制布局更新/调整大小？

> ID：10758267
> 
> 赞同：16
> 
> 时间：2012-05-25T16:39:17.213
> 
> 标签：qt

我有一个自定义`QTextEdit`小部件，它在角落有自己的调整大小。我可以很好地调整文本小部件的大小，但是它内部的布局不会随着文本编辑的大小而改变。

有没有办法告诉管理布局根据其一个小部件中大小的独立变化重新计算自己？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-25T16:46:51.703

布局尊重其子级的`sizeHint()`and `minimalSizeHint()`（而不是他们的`size()`）。所以你应该重新实现这两个虚拟方法并返回你想要强制的大小。每当您的尺寸提示发生变化时，**您应该调用[`updateGeometry()`](https://doc.qt.io/archives/qt-4.8/qwidget.html#updateGeometry)**您自己的小部件来触发放置小部件的布局的更新。

请参阅文档：

> *   [`virtual QSize QWidget::sizeHint() const`](http://qt-project.org/doc/qt-4.8/qwidget.html#sizeHint-prop)
>     
>     
>     
>     此属性保存小部件的推荐大小。
>     [...]
>     
>     
> *   [`virtual QSize QWidget::minimumSizeHint() const`](http://qt-project.org/doc/qt-4.8/qwidget.html#minimumSizeHint-prop)
>     
>     
>     
>     此属性保存小部件的建议最小尺寸。
>     [...]
>     除非设置了 minimumSize() 或将大小策略设置为 QSizePolicy::Ignore，否则 QLayout 永远不会将小部件的大小调整为小于最小大小提示的大小。如果设置了 minimumSize()，最小尺寸提示将被忽略。

所以，要**强制**你的小部件的最小尺寸，`minimumSizeHint()`通过返回你的最小尺寸来实现；要**强制固定大小**，请通过返回相同的大小来实现两者。

我还建议阅读文档页面[“布局管理”](http://qt-project.org/doc/qt-4.8/layout.html#custom-widgets-in-layouts)中的以下部分：

> **布局中的自定义小部件**
> 
> 当您创建自己的小部件类时，您还应该传达其布局属性。如果小部件具有 Qt 的布局之一，这已经被处理了。如果小部件没有任何子小部件，或使用手动布局，您可以使用以下任何或所有机制更改小部件的行为：
> 
> *   重新实现 QWidget::sizeHint() 以返回小部件的首选大小。
> *   重新实现 QWidget::minimumSizeHint() 以返回小部件可以具有的最小尺寸。
> *   调用 QWidget::setSizePolicy() 来指定小部件的空间要求。
> 
> 每当尺寸提示、最小尺寸提示或尺寸政策发生变化时，调用 QWidget::updateGeometry()。这将导致重新计算布局。多次连续调用 QWidget::updateGeometry() 只会导致一次布局重新计算。

* * *

**更新（见评论）：**

您还可以通过调用强制大小（或仅高度/宽度）：

```
QWidget::setFixedSize(QSize);
QWidget::setFixedHeight(int);
QWidget::setFixedWidth(int); 
```

这些方法只是将大小提示设置为给定值并调用`updateGeometry()`AFAIK。但也许他们做得更多，因为（如评论中所见）这是我能找到解决问题的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-14T14:24:18.980

leemes 的回答给了我一些洞察力，我设法在使用自定义 SizeGrip 控件的其他控件中调整布局内的 QTextWidget 的大小。请注意，至少一个滚动条应该是可见的，以便有可见的尺寸夹点。

有必要重新实现小部件的`sizeHint()`方法：

```
QSize MultilineTextEdit::sizeHint() const
{
    return size();
} 
```

然后在`mouseMoveEvent()`我的 SizeGrip 小部件的末尾，我添加了

```
void SizeGrip::mouseMoveEvent(QMouseEvent * e)
{
    // note that this is not the full code of the method
    ...
    // save the old minimum and maximum size of the widget (w) resized by the grip
    QSize oldMin = w->minimumSize();
    QSize oldMax = w->maximumSize();

    w->setFixedSize(nr.size()); // nr is the new rect of the widget

    w->setMinimumSize(oldMin);
    w->setMaximumSize(oldMax);
} 
```

SizeGrip 小部件的灵感来自直接在顶级父窗口上运行的 QSizeGrip 类。SizeGrip 改为在其直接父小部件上运行。

# javascript - 使用字符串值作为要调用的函数的名称

> ID：10758279
> 
> 赞同：0
> 
> 时间：2012-05-25T16:40:31.780
> 
> 标签：javascript, oop, object

我希望能够做这样的事情：

```
var MyObject = function(prop) {
  this.property = prop;
};

var stringVar = 'MyObject';

var myObject = new stringVar(1);  // This doesn't work.

assertTrue(myObject.property === 1); 
```

我知道这会起作用：

```
var myObject = new window[stringVar](1); 
```

但我想知道是否有更中立的方式来完成它。

作为旁注：我显然试图避免使用`eval()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T16:45:00.423

这是 Javascript 中的一个已知限制。无法以上下文中立的方式通过字符串引用函数。你所拥有的就是你能做的。

所以，如果你把所有这些都放在一个闭包中，那是行不通的。您唯一的选择是将构造函数作为另一个对象的方法：

```
var constructors = {
    MyObject: function(prop) {
        this.property = prop;
    }
}

var stringVar = 'MyObject';

var myObject = new constructors[stringVar](1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:50:22.590

使用命名空间，以便您始终了解层次结构，例如，以下内容适用于使用 windows 脚本主机运行的桌面 .js 文件（没有`window`）

```
var MyNameSpace = {};

MyNameSpace.MyObject = function(prop) {
  this.property = prop;
};

var stringVar = 'MyObject';
var myObject = new MyNameSpace[stringVar](123); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T16:45:56.900

不确定这是否是您想要的：

```
var obj = {"myObject": function(prop) {this.property = prop; return this;},
           "MySecondObject": "probably second function"
          },
    str = "myObject";
var myChildObj = obj[str]("test");
alert(myChildObj.property); 
```

[jsfiddle](http://jsfiddle.net/deathApril/KU8Cf/1/)

# java - 是否可以在模态面板中提交表单并在同一个模态面板中获得结果？

> ID：10758280
> 
> 赞同：1
> 
> 时间：2012-05-25T16:40:42.860
> 
> 标签：java, jsf-2, richfaces

我有这个模态面板，我希望用户能够从其中提交搜索，然后在模态面板中从下面的搜索中获取结果。如果可能的话，有人可以指出我如何做到这一点的正确方向吗？我搜索了谷歌，但找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:48:38.457

是的，这绝对是可能的。只需通过 ajax 提交并呈现一部分，同时保持对话框打开（即不要通过同步请求或 JavaScript 显式关闭它）。

例如

```
<h:form>
    <h:inputText id="query" value="#{bean.query}" />
    <a4j:commandButton value="Search" action="#{bean.search}" execute="query" render="results" />

    <h:panelGroup id="results">
        <h:dataTable value="#{bean.results}" var="result" rendered="#{not empty bean.results}">
            ...
        </h:dataTable>
    </h:panelGroup>
</h:form> 
```

和

```
public void search() {
    results = service.search(query);
} 
```

# matlab - 从结构体数组初始化 MATLAB 映射

> ID：10758285
> 
> 赞同：0
> 
> 时间：2012-05-25T16:41:17.197
> 
> 标签：matlab, data-structures, map, initialization

我的目标是初始化一个 Map 对象，其中键为双精度，值为结构。

我有一个类似于这样的结构数组：

```
s(1) = [1,2,3];
s(1) = 'str';
s(2) = [4,5,6];
s(2) = 'str2';
s(3) = [7,8,9];
s(3) = 'str3'; 
```

然后我想创建一个地图对象，如：

```
awesome = container.Map(1:3, s); 
```

但我收到以下错误：

```
Error using containers.Map
Specified value type does not match the type expected for
this container. 
```

但如果我这样做，它会起作用：

```
awesome = container.Map(1:3, {s1, s2, s3}); 
```

为什么会发生这种情况，如何在保持结构作为值类型的同时使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T03:37:05.313

假设您的结构设置代码旨在：

```
s(1).Numbers = [1,2,3];
s(1).String = 'str';
s(2).Numbers = [4,5,6];
s(2).String = 'str2';
s(3).Numbers = [7,8,9];
s(3).String = 'str3'; 
```

您可以使用以下结构数组制作地图：

```
theMap = containers.Map( 1:3, arrayfun(@(x) ({x}), s)) 
```

# ruby - $addToSet 用于哈希？

> ID：10758289
> 
> 赞同：1
> 
> 时间：2012-05-25T16:41:35.010
> 
> 标签：ruby, mongodb

`$addToSet`似乎只添加到数组中，是否可以将哈希添加到哈希中？

```
{
    "a"=>"1",
    "b"=>"2",
    "c"=>{"d"=>"3"}
} 
```

至

```
{
    "a"=>"1",
    "b"=>"2",
    "c"=>{"d"=>"3","e"=>"4"}
} 
```

在红宝石中将是首选。但我可以接受任何可以帮助我解决这个问题的自动取款机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T16:43:28.303

是的，`$addToSet`本来是要在阵列上使用的。你需要`$set`和点符号

```
db.collection.update(query, {$set: {'c.e': '4'}}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:21:56.490

您不需要`$addToSet`，因为散列（即 BSON 对象）只能具有任何给定键之一——它们已经设置了关于键的语义（但不是值）。

要更新 BSON 对象中的子对象，您应该`$set`按照 Sergio 的建议使用。

# erlang - ejabberd 离开房间的手册 XMPP 规则

> ID：10758295
> 
> 赞同：3
> 
> 时间：2012-05-25T16:41:56.993
> 
> 标签：erlang, xmpp, ejabberd

在我们的 XMPP 实现中，我们希望用户在离线后继续留在房间中，以便我们可以继续监控房间对话并向用户发送推送通知。

有没有办法控制用户离开房间的原因？我们希望在用户离线后让他们留在房间里。

或者，是否有更好的方法来监控房间内的用户，以便我们向他们发送推送通知？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T22:10:36.743

在这里从臀部拍摄，但这与我不久前想到的类似......持久的MUC房间。

涉及修改 mod_muc_room 的可能方法：

*   在创建房间时，创建一个名为 {room name}_Participants 的共享名册组 ()
*   每当有人加入房间时，将他们添加到名册中
*   每当有人发送 /me 离开时，将其从名册中删除
*   每当收到房间的消息时，将其包裹在“当你外出时...”样式消息中发送给共享名册中不在线的任何用户
*   当房间被杀死时，删除共享名册

查看以下模块的代码，但主要查看 mod_muc_room.erl，大约在第 176 行（[https://git.process-one.net/~badlop/ejabberd/badlop-ejabberd/blobs/HEAD/src/mod_muc/ mod_muc_room.erl#line176](https://git.process-one.net/~badlop/ejabberd/badlop-ejabberd/blobs/HEAD/src/mod_muc/mod_muc_room.erl#line176) )

*   [https://git.process-one.net/~badlop/ejabberd/badlop-ejabberd/blobs/HEAD/src/mod_shared_roster.erl](https://git.process-one.net/~badlop/ejabberd/badlop-ejabberd/blobs/HEAD/src/mod_shared_roster.erl)
*   [https://git.process-one.net/~badlop/ejabberd/badlop-ejabberd/blobs/HEAD/src/mod_multicast.erl](https://git.process-one.net/~badlop/ejabberd/badlop-ejabberd/blobs/HEAD/src/mod_multicast.erl)
*   [https://git.process-one.net/~badlop/ejabberd/badlop-ejabberd/blobs/HEAD/src/mod_muc/mod_muc_room.erl](https://git.process-one.net/~badlop/ejabberd/badlop-ejabberd/blobs/HEAD/src/mod_muc/mod_muc_room.erl)

# java - Weka vs Mahout 推荐引擎

> ID：10758299
> 
> 赞同：4
> 
> 时间：2012-05-25T16:42:11.627
> 
> 标签：java, weka, mahout, recommendation-engine

我正在寻找一个协同过滤解决方案。我对 Java 很满意，发现推荐引擎可以同时使用 Weka 或 Mahout 构建。我以前没有建过，所以从哪一个开始比较好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:50:43.883

两者都应该工作得很好。

使用哪个决定可能主要取决于您计划使用的其他基础设施/工具：例如，如果您使用的是 Hadoop，那么 Mahout 可能更适合。如果你在做内存分析，那么 Weka 可能会更全面和成熟一些。

# html - 使用 X-UA 兼容元标记时的额外填充

> ID：10758300
> 
> 赞同：0
> 
> 时间：2012-05-25T16:42:12.687
> 
> 标签：html, internet-explorer, meta-tags, x-ua-compatible, blank-line

我曾尝试使用：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

在`<head>`我的静态 html 页面的部分。

我使用它来确保访问更新的 CSS 元素。
这很好用，我可以`table:last-of-type`在 IE9 浏览器中使用。

但是，当我使用该元标记时，我页面上的第一行文本被向下移动，就像它被填充一样。

我尝试过其他元标记，例如：

```
 <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv=\"date\" content="Wed, 16 Feb 2011 22:34:13 GMT" />;
        <meta name="description\" content="How to use Meta Tags"> 
```

我可以保留所有这些，并且不会出现神秘的填充物。
只有当我使用上述内容时才会发生这种情况。

我可以使用： `<meta http-equiv="X-UA-Compatible" content="IE=7" />`并且第一行的位置是正确的，但是这违背了首先使用它来确保最新的 CSS 功能的目的。

此外，

这些也创造了神秘的第一行填充：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

我的静态 html 页面的第一行只是文本。

我能给出的最简单的例子是：

```
<html>

<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>

<body>
Here is the first line of text.
</body>
</html> 
```

如果您取出该元标记，则页面将高出约 1 行。

有谁知道解决这个问题或我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:43:44.190

要在使用 content="IE=edge" 时摆脱奇怪的间距问题，请将其用作您的 html 声明：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

并在 body 标签中添加：

```
style="margin:0;padding:0;" 
```

它在 IE、Firefox 和 Chrome 中对我有用。

# c# - 如何为我的应用显示“Windows 防火墙已阻止此程序的某些功能”对话框？

> ID：10758301
> 
> 赞同：21
> 
> 时间：2012-05-25T16:42:23.203
> 
> 标签：c#, wcf, windows-firewall

我正在开发 .Net 4.0 C# Windows Forms 应用程序，该应用程序在某个预定义端口（例如 12345）上托管 WCF 服务。我们有另一个与此 WCF 服务对话的 iPad 应用程序 - 此连接被 Windows 防火墙阻止。我的用户总是遇到麻烦，因为他们必须记住将此应用程序添加到例外列表等 - 这会导致挫败感。

**要使 Windows 像下面的屏幕截图一样为我的应用程序显示弹出窗口，以使其更加用户友好，需要什么？**

**更新**- 我知道我可以以编程方式更新 Windows 防火墙中的规则。但是，这需要管理员权限，这并不总是可行的。例如，我正在考虑将来某个时候 ClickOnce 部署 - 不确定它将如何与此一起使用。所以我仍然想知道我应该怎么做才能得到那个对话框。

* * *

**解决方案：** 感谢@alexw 下面的回答，我能够使用这个简单的代码获得对话框：

```
IPAddress ipAddress = Dns.GetHostEntry(Dns.GetHostName()).AddressList[0];
IPEndPoint ipLocalEndPoint = new IPEndPoint(ipAddress, 12345);

TcpListener t = new TcpListener(ipLocalEndPoint);
t.Start();
t.Stop(); 
```

[以及更多 - 作为文档状态](http://msdn.microsoft.com/en-us/library/ms733768.aspx)，不可能为 WCF 服务获取此弹出窗口（见底部）：

> WCF 的自承载 HTTP 寻址未集成到 Windows 防火墙中。必须将例外添加到防火墙配置以允许使用特定 URL 的入站连接。

![在此处输入图像描述](../Images/c5ef09dd2158f07508cdf077f539b138.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:23:04.050

我不确定需要满足哪些条件才能公开此对话框，我假设尝试在普通 Windows 实例上打开侦听端口的应用程序应始终显示此对话框。为什么不尝试将您的应用程序添加到“授权应用程序”列表中，或者使用 Windows 防火墙 COM 互操作 (NetFwTypeLib) 手动打开端口？

[http://blogs.msdn.com/b/securitytools/archive/2009/08/21/automating-windows-firewall-settings-with-c.aspx](http://blogs.msdn.com/b/securitytools/archive/2009/08/21/automating-windows-firewall-settings-with-c.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:59:07.437

只是猜测，但也许您需要为您的应用启用 UAC 管理员权限才能弹出？

查看这些博客文章，了解如何做到这一点：http: [//victorhurdugaci.com/using-uac-with-c-part-2/](http://victorhurdugaci.com/using-uac-with-c-part-2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:41:52.257

我认为您必须向您的应用程序添加一个[嵌入式应用程序清单文件](http://msdn.microsoft.com/en-us/library/bb756929.aspx)并设置要求管理员，以便您可以在其中执行一个更改防火墙规则的 bach 文件。这是一个[如何使用 bach 文件打开端口的示例](http://support.microsoft.com/kb/968872)
希望它有帮助

# php - 编辑wordpress wp_postmeta？

> ID：10758303
> 
> 赞同：0
> 
> 时间：2012-05-25T16:42:29.893
> 
> 标签：php, mysql, wordpress

我正在为我的客户设计一个自定义主题，并且我几乎已经接受了一个非常烦人的问题，即缩略图尺寸阻碍了我。

长话短说，新主题使用不同大小的帖子缩略图（我在 functions.php 中发送）所以我运行了缩略图再生插件（http://wordpress.org/extend/plugins/regenerate-thumbnails/ ) 并且它在除少数缩略图之外的所有缩略图上都运行良好。

现在，我选择自己调整剩下的几个拇指的大小，但是我需要更新 wp_postmeta 中的 meta_value 以指向调整大小的缩略图，就像所有其他人已经通过再生插件一样，例如 s:19:"resize2-188x188 .jpg"; 而不仅仅是“resize2.jpg”。

我会通过服务器的 cpanel 自己更改它，但我的客户已经离开了两周，我只有对他的 wordpress 仪表板的完全管理员访问权限。

我的问题是，编辑帖子元的最简单方法是什么？或者你们还有其他建议吗？

我的截止日期很紧，因此非常感谢任何帮助。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:51:24.343

这个插件：[http](http://wordpress.org/extend/plugins/wp-options-manager/) ://wordpress.org/extend/plugins/wp-options-manager/看起来像你需要的。

请在手动更改条目之前使用某种备份插件并备份您的数据库。

# image - 如何用我自己的图像替换 jquery 滑块句柄

> ID：10758306
> 
> 赞同：1
> 
> 时间：2012-05-25T16:42:58.897
> 
> 标签：image, jquery-ui, jquery-selectors, jquery-ui-slider

我知道有人问过这个问题，但我无法让解决方案发挥作用。我没有看到我的图像。图片路径正确。我究竟做错了什么？

我已经阅读了这个问题的解决方案： [Changing slider handle image](https://stackoverflow.com/questions/1170596/changing-slider-handle-image) , [Jquery slider with two arrows](https://stackoverflow.com/questions/6261820/jquery-slider-with-two-arrows) , and [changed jquery slider images](https://stackoverflow.com/questions/5551203/changing-jquery-range-slider-images)。第三种解决方案似乎是最好的，但我不确定如何让它发挥作用。我已经复制并粘贴了，但我无法让它工作。这是完整的代码：

```
<!DOCTYPE html>
<html>
 <head>
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-
 ui.css" rel="stylesheet" type="text/css"/>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
 <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">
 </script>
 <script>
$(window).load(function(){
//Used for slider with two arrows - start
var firstHandleClass = 'first-handle';
var secondHandleClass = 'second-handle';

handle = $('#slider-range A.ui-slider-handle');
handle.removeClass('ui-corner-all');
handle.removeClass('ui-slider-handle');
handle.addClass('handle_');
handle.eq(0).addClass(firstHandleClass);
handle.eq(1).addClass(secondHandleClass);    

});
</script>
    <script>
   $(document).ready(function() {
    $("#slider").slider({
range: true,
values: [5,17]
});
    });
   </script>

  <style type="text/css">

     #slider { margin: 10px; }
.handle_ {
     cursor: default;
     position: absolute;
     top: -0.3em;
     z-index: 2;
  }
.first-handle {
    background: url("images/lefthandle.gif") no-repeat scroll 0 0 transparent;
    border-style: none;
    height: 36px;
    margin-left: -9px;
    position: absolute;
    width: 21px;
}
.second-handle {
    background: url("images/righthandle.gif") no-repeat scroll 0 0 transparent;
    border-style: none;
    height: 36px;
    margin-right: -5px;
    position: absolute;
    width: 21px;
}
   </style>

  </head>
  <body style="font-size:62.5%;">

  <div id="slider"></div>

</body> 
</html> 
```

![在此处输入图像描述](../Images/b044c8f64bea93416a327d5a64e971e3.png)

这是一个屏幕截图。图像不显示。任何人？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:02:28.973

看起来选择器`'#slider-range a.ui-slider-handle'`不匹配任何元素。尝试替换它，`'#slider a.ui-slider-handle'`看看是否可以修复它，如下所示：

```
handle = $('#slider A.ui-slider-handle');
handle.removeClass('ui-corner-all');
handle.removeClass('ui-slider-handle');
handle.addClass('handle_');
handle.eq(0).addClass(firstHandleClass);
handle.eq(1).addClass(secondHandleClass); 
```

# magento - Magento 1.7：在非对象上调用成员函数 getBackend()

> ID：10758309
> 
> 赞同：0
> 
> 时间：2012-05-25T16:43:16.430
> 
> 标签：magento

```
<?php Mage::getModel('catalog/category')->getCollection()->addFieldToFilter('children_count','0'); ?> 
```

产生：

```
Fatal error: Call to a member function getBackend() on a non-object in app\code\core\Mage\Eav\Model\Entity\Abstract.php on line 816 
```

我错过了什么？

我在未修改的 1.7 安装示例数据上部署代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:37:00.520

在安装了示例数据 Magento 和基本 Magento 之后，如果未启用平面类别，则此代码似乎仅在示例数据版本上产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T07:39:25.573

我会用另一种方式来回答你的问题。

问题是因为没有产品属性`children_count`，它可能是您的示例 magento 站点中不存在的特定属性。

要开发该部分，最好在添加过滤器之前先检查属性是否存在，以防止代码在大多数 magento 站点中工作。

检查属性是否存在：

```
 /**
	 * Check if attribute exists before add it to product filter
	 */
	private function _checkIfAttributeExists ($attribCode) {
		$entity = 'catalog_product';
		$attr = Mage::getResourceModel('catalog/eav_attribute')
					->loadByCode($entity, $attribCode);

		if ($attr->getId()) {
		    return true;
		}

		return false;
	}
```

这样就可以消除胎儿错误：

```
if ($this->_checkIfAttributeExists('children_count')) {
   Mage::getModel('catalog/category')->getCollection()->addFieldToFilter('children_count','0');
} 
```

这可能对其他人有帮助。

# android - android - 在表格中设置文本视图的背景

> ID：10758310
> 
> 赞同：0
> 
> 时间：2012-05-25T16:43:17.023
> 
> 标签：android, layout, textview, tablelayout

抱歉，如果问题信息不足。我正在为 ICS 编写应用程序。我决定使用 TableLayout 来创建一个网格，供用户单击其中的内容。对于每一行，我放入几个 TextView 和一个 ImageView，它们之间的每两个之间都有一个 1dp 垂直边框，所有这些都以编程方式在一个循环中完成。现在我让每个 TextView 都可以点击。当它被点击时，它的背景会变成一个蓝色的drawable。但是，我观察到可绘制对象并没有水平填充整个“网格”。我认为 ImageView 占用的空间可能比它应该占用的空间多（1dp）。我想出了或找到了许多方法来拉伸 TextViews，但都没有为我工作。有任何想法吗？提前致谢！
编辑：这是我正在使用的循环 - 我知道它有点复杂，所以我没有发布它：

```
for(int i=0; i<5; i++){
        tr = new TableRow(ctxt);
        tr.setGravity(Gravity.CENTER);
        for(int j=0; j<6; j++){ //add the text from an array
            tv = new TextView(ctxt);
            tv.setText(a[6*i+j]:null);
            tv.setTextSize(16);
            tv.setPadding(0, 4, 0, 4);
            tv.setGravity(Gravity.CENTER);
            tv.setClickable(true);
            tv.setBackgroundResource(R.drawable.list_selector_background);
            tv.setTag(39+6*i+j);
            tv.setOnClickListener(this);
            tr.addView(tv, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, 2.0f));
            if(j<5){ //set the border
                border = new ImageView(ctxt);
                border.setImageResource(R.drawable.vert_border);
                tr.addView(border, new LayoutParams(0, LayoutParams.MATCH_PARENT, 0.0f));
            }
        }
        tl2.addView(tr, new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, 48));
        if(i<4){ //horizontal border
            tr = new TableRow(ctxt);
            tr.setMinimumHeight(1);
            tr.setBackgroundColor(color.bg_gray);
            tl2.addView(tr);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T04:22:09.220

```
Use android:layout_weight attribute to allocate the space occupied by a view. You have to assign android:weigh_sum to the container[In your case it is Table Row]

<TableRow
    <----------
    <----------
    android:weigh_sum="1">
    <ImageView
    <----------
    <----------
    android:Layout_weight=".2" // occupies 20%of the TableRow container   

I hope this helps. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:00:02.370

嗯......这个解决方案的灵感来自 Alfi，但主要是我自己发现的。
我使用 LayoutInflater 创建 TableRow 而不是构建它。

```
tr = (TableRow) li.inflate(R.layout.tbrow, null, false); 
```

tbrow.xml 在哪里

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:weightSum="293" >
</TableRow> 
```

因为不能在程序中设置重量总和。这里的 293 等于我的 TextViews 和我的 ImageView 边框的总宽度。(48*6+1*5) 然后在程序中我可以准确地设置我想要的宽度。按照 Alfi 的指示，我将宽度设置为零，然后将重量设置为我想要的宽度。

```
tr.addView(tv, new LayoutParams(0, LayoutParams.MATCH_PARENT, 48)); 
```

至于边界：

```
tr.addView(border, new LayoutParams(0, LayoutParams.MATCH_PARENT, 1)); 
```

希望这对偶然发现此页面的其他人有所帮助。

# matlab - 了解 Matlab FFT 示例

> ID：10758315
> 
> 赞同：50
> 
> 时间：2012-05-25T16:43:38.757
> 
> 标签：matlab, fft

我是 matlab 和 FFT 新手，想了解[Matlab FFT 示例](http://www.mathworks.de/help/techdoc/ref/fft.html)。现在我有两个主要问题：

1）为什么x轴（频率）以500结束？我怎么知道没有更多的频率或者它们只是被忽略了？

2) 我怎么知道频率在 0 到 500 之间？FFT不应该告诉我，频率在哪些范围内？FFT 是否只返回幅度值而不返回频率？

感谢您的任何提示！

* * *

### 有问题的例子：

考虑以 1000 Hz 采样的数据。形成一个包含幅度为 0.7 的 50 Hz 正弦波和幅度为 1 的 120 Hz 正弦波的信号，并用一些零均值随机噪声破坏它：

```
Fs = 1000;                    % Sampling frequency
T = 1/Fs;                     % Sample time
L = 1000;                     % Length of signal
t = (0:L-1)*T;                % Time vector
% Sum of a 50 Hz sinusoid and a 120 Hz sinusoid
x = 0.7*sin(2*pi*50*t) + sin(2*pi*120*t); 
y = x + 2*randn(size(t));     % Sinusoids plus noise
plot(Fs*t(1:50),y(1:50))
title('Signal Corrupted with Zero-Mean Random Noise')
xlabel('time (milliseconds)') 
```

![时域](../Images/48a7e06aeec80b29918d35b861035dea.png)

转换到频域，通过快速傅里叶变换 (FFT) 得到噪声信号 y 的离散傅里叶变换：

```
NFFT = 2^nextpow2(L); % Next power of 2 from length of y
Y = fft(y,NFFT)/L;
f = Fs/2*linspace(0,1,NFFT/2+1);

% Plot single-sided amplitude spectrum.
plot(f,2*abs(Y(1:NFFT/2+1))) 
title('Single-Sided Amplitude Spectrum of y(t)')
xlabel('Frequency (Hz)')
ylabel('|Y(f)|') 
```

![频域](../Images/a701f3ea48bf79dfb3727f03011cb093.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-25T16:55:07.230

> 1）为什么x轴（频率）以500结束？我怎么知道没有更多的频率或者它们只是被忽略了？

它以 500Hz 结束，因为这是在 1000Hz 采样时[信号的奈奎斯特频率。](http://en.wikipedia.org/wiki/Nyquist_frequency)查看 Mathworks 示例中的这一行：

```
f = Fs/2*linspace(0,1,NFFT/2+1); 
```

第二个图的频率轴从 0 到**Fs/2，或采样频率的一半。** 奈奎斯特频率始终是采样频率的一半，因为在此之上会发生[混叠](http://en.wikipedia.org/wiki/Aliasing#Sampling_sinusoidal_functions)：![别名插图](../Images/7036fe1b393a88ef54b0439e0db81daa.png)

信号会“折叠”回自身，并且*似乎*是某个频率等于或低于 500Hz。

> 2) 我怎么知道频率在 0 到 500 之间？FFT不应该告诉我，频率在哪些范围内？

由于上述的“折叠”（奈奎斯特频率也俗称“折叠频率”），500Hz以上的频率在物理上是不可能出现在FFT中的；较高的频率将“折返”并显示为较低的频率。

> FFT 是否只返回幅度值而不返回频率？

是的，MATLAB FFT 函数只返回一个幅度向量。但是，它们映射到您传递给它的频率点。

让我知道需要澄清的内容，以便我可以进一步帮助您。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-25T18:46:41.110

这里有一些误解。

超过 500 的频率**可以**表示为长度为 1000 的 FFT 结果。不幸的是，这些频率都折叠在一起并混合到前 500 个 FFT 结果箱中。因此，通常您不希望向 FFT 提供包含采样率一半或以上的任何频率的信号，因为 FFT 不会在意，只会将高频与低频（混叠）混合在一起，从而使结果非常漂亮多没用。这就是为什么数据在被采样并馈送到 FFT 之前应该进行低通滤波的原因。

FFT 返回没有频率的幅度，因为频率不仅取决于 FFT 的长度，还取决于数据的采样率，这不是 FFT 本身的一部分，也不是它的输入。您可以以任何采样率提供相同长度的 FFT 数据，从而从中获得任何频率范围。

结果图以 500 结束的原因是，对于任何实际数据输入，FFT 长度一半以上的频率只是前半部分数据的镜像重复（复共轭）。由于它们是重复的，大多数人只是忽略它们。为什么要绘制重复？FFT 为提供 FFT 复数数据（具有实部和虚部）的人计算结果的另一半，这确实创建了两个不同的一半。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T16:49:37.257

听起来您需要了解 FFT 是什么的背景知识（例如[http://en.wikipedia.org/wiki/FFT](http://en.wikipedia.org/wiki/FFT)）。但要回答你的问题：

> 为什么 x 轴（频率）在 500 处结束？

~~因为输入向量的长度为 1000。通常，长度`N`输入波形的 FFT 将产生长度`N`输出向量。如果输入波形是真实的，那么输出将是对称的，所以前 501 个点就足够了。~~

**编辑：（** *我没有注意到该示例填充了时域向量。）*

频率达到 500 Hz，因为时域波形被声明为具有 1 kHz 的采样率。奈奎斯特采样定理规定，具有采样率的信号`fs`可以支持最大带宽为 的（真实）信号`fs/2`。

> 我怎么知道频率在 0 到 500 之间？

往上看。

> FFT不应该告诉我，频率在哪些范围内？

不。

> FFT 是否只返回幅度值而不返回频率？

FFT 只是为每个频率仓分配一个幅度（和相位）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-03T05:36:36.527

您的 X 轴仅在 500 Hz 之前绘制频率的原因是您的命令语句**'f = Fs/2*linspace(0,1,NFFT/2+1);'** . 您的 Fs 为 1000。因此，当您将其除以 2 并乘以 0 到 1 的值时，它会返回一个长度为 NFFT/2+1 的向量。该向量由等间隔的频率值组成，范围从 0 到 Fs/2（即 500 Hz）。由于您使用 ' **plot(f,2*abs(Y(1:NFFT/2+1)))** ' 命令进行绘图，因此您的 X 轴限制为 500 Hz。

# java - 从java中的文本文件中读取对象数据

> ID：10758319
> 
> 赞同：2
> 
> 时间：2012-05-25T16:43:45.230
> 
> 标签：java, bufferedreader

我正在做关于 java I/O 数据的作业，问题是我不允许使用对象序列化从二进制文件加载数据。

以下是作业要求：

> 持久性，将对象写入文件和从文件中读取对象（文本格式）
> 
> ```
> • All objects should be written to a single file in a text format
> • All objects should be read form the same file
> • You should use JFileChooser 
> ```

我有 3 个课程：`Unit`、`Assessment`和`Task`。

该类`Assessment`是抽象的，而`IndividualAssessment`&`GroupAssessment` 是具体的子类。

`Unit`有一个集合`Assessment`并且`Assessment`有一个集合`Task`s.

我可以将所有数据保存到一个文本文件中，`FileWriter`但我不知道如何将文本文件的每一行读入正确的`Assessment`类。

我的意思是你如何识别哪条线是用于`IndividualAssessment`或`GroupAssessment`类的。

这是我尝试过的代码，但它不起作用：

```
BufferedReader bf = new BufferedReader(file);
While (bf.readLine != null){
    Unit u = new Unit(bf);
    diary.add(u);
    try{
        Assessment a = new IndividualAssessment(bf);
    } catch (IOException ex){
        Assessment a = new GroupAssessment(bf);
            }
    u.add(a);
    Task t = new Task(bf);
    a.add(t); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:53:36.067

您可能应该从将读取的行的内容存储在 String 对象中开始。所以它看起来像这样：

```
String line = bf.readLine();
while(line != null) {
    // Add code to look at your line to figure out what kind of object it 
    // represents.   For example you could add a one character prefix to each 
    // line when you write it to specify which object it is ('U', 'A' or 'T').
    // Based on that, you can call a constructor of the appropriate object that
    // takes a String as input. Then let the constructor deal with parsing the
    // line for the object it represents. This way you don't end up with some
    // massive parsing routine.

    char code = line.charAt(0);
    if(code == 'T') {
        Task task = new Task();
        task.initFromString(line.sustring(1));
        ... Do something with your task
    }
    else if(code == ...) {
    }

    line = bf.readLine();    // Read the next line
} 
```

定义所有对象都应该实现的一些接口：

```
public interface TextExportable {
    public char getClassIdentifier();
    public void initFromString(String s);
} 
```

我不确定您的对象是什么样的，但例如：

```
public class Task implements TextExportable {
    private String name;

    public Task() {} // For the pseudo-serialization

    public Task(String name) { // For creating the object by hand
        this.name = name;
    }

    public char getClassIdentifier() {
        return 'T';
    }

    public String toString() {
        return getClassIdentifier()+name;
    }

    public void initFromString(String line) {
        this.name = line;
        // Here, you would need extra parsing if you have more than one attribute
        // and dissect the line
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:10:33.243

将 a`BufferedReader`作为构造函数的参数是一种非常规的方法。`BufferedReader`在您的实例中是交付模型数据的工具。而且您的模型数据应该与您的用例有关，而不是关于您如何将其存储在磁盘上，因此它应该足够抽象。因此，相反，我将在您的每个模型类上都有一个默认构造函数，然后可能是一个可用于初始化模型类的所有/某些字段的构造函数。

处理文件接口的一种方法是创建文件读取器/写入器实用程序，可以将数据从文件加载/保存到文件。如果你的类层次结构的顶部是`Unit`那么我会这样：

```
Unit loadFromFile(String filename) {
   // read unit, assessments etc in a format you choose, build the model and return it
   ...
}

void saveToFile(String filename) {
   // write you model to a file
   ...
} 
```

如果我是你，我会使用[JSON](http://json.org)作为我的数据格式。它是可读的并且易于调试。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T08:46:46.103

除了接受的答案之外，我想补充一点，一种干净的解析方法是遵循[解释器模式](http://en.wikipedia.org/wiki/Interpreter_pattern)

因此，假设使用 bnf 的语法如下：

```
<Unit>        ::= <Name>[<Assessments>]
<Assessments> ::= <Assessment> | <Assessment> <Assessments>
<Assessment>  ::= <Name>:<Type>[<Tasks>]
<Tasks>       ::= <Task> | <Task>,<Tasks>
<Name>        ::= <String>
<Type>        ::= Group | Ind 
```

你可能会写这样的东西来解析它——我把它作为一个练习来编写所`Expression`使用的类。

```
try {
    BufferedReader br = new BufferedReader(new FileReader("File.txt"));
    try {
        String unit;
        while ((unit = br.readLine()) != null) {
            String unitName = unit.substring(0, unit.indexOf('['));
            String assessments = unit.substring(unit.indexOf('[') + 1,
                            unit.lastIndexOf(']'));
            List<AssessmentExpression> aes = new ArrayList<AssessmentExpression>();
            while (!assessments.equals("")) {
                String assessmentName = assessments.substring(0,
                                assessments.indexOf(':'));
                String assessmentType = assessments.substring(
                                assessments.indexOf(':') + 1,
                                assessments.indexOf('['));
                String tasks = assessments.substring(
                                assessments.indexOf('[') + 1,
                                assessments.indexOf(']'));
                List<String> taskList = Arrays.asList(tasks.split(","));
                aes.add(new AssessmentExpression(assessmentName,
                                assessmentType, taskList));
                assessments = assessments.substring(assessments.indexOf(']')+1);
            }

            Unit u = new UnitExpression(unitName, aes).interpret();
        }
    } finally {
        br.close();
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

# magento - Magento 从评论页面禁用我的购物车块

> ID：10758323
> 
> 赞同：0
> 
> 时间：2012-05-25T16:44:17.790
> 
> 标签：magento, cart, review

我正在尝试从评论页面禁用“我的购物车”块，在我单击评论之前它不会显示在我的产品页面上。我还需要更改购买框以包含产品页面上的尺寸下拉列表。

我在 CSS 中尝试了 display:none，但它仍然占用空间，使我的整个页面不合适。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:32:42.350

根据我的理解，我以这个解决方案结束

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
<default>
</default>
<review_product_list>
    <remove name="cart_sidebar" />
</review_product_list>
</layout> 
```

上面的代码**将从仅评论页面中删除 mycart 块（右侧）**。如果您想从每个页面中删除它，请在标签`<remove name="cart_sidebar" />`之间写入： 在 local.xml 中编写以下代码。路径：magento_folder/app/design/frontend/mytheme(your_package_folder)/neo(your_theme_folder)/layout/local.xml`<default>`

# perl - Perl Mason 获取复选框的值

> ID：10758324
> 
> 赞同：-2
> 
> 时间：2012-05-25T16:44:42.940
> 
> 标签：perl, mason

如何获取复选框的值并将其放入变量中以插入 DB？

`$request->param(cb)`没有获得
复选框在 mason2 组件（.mc）中的值，复选框的值将传递给另一个组件。所以我必须找到一种方法来获取提交时的值
这里是[代码](http://pastebin.com/9kcR1ydX)

```
<input type="checkbox" name="cb" value="" onclick="$(this).attr('value', this.checked ? 1 : 0)"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:35:15.837

简化代码：

```
<input type="checkbox" name="cb" value="1"> 
```

根据定义，当复选框被选中时，浏览器将发送值，如果未选中复选框，则不会发送任何内容。您想*将*“ **nothing** ”转换为“ **0** ”，因此只需在 Mason2 组件中执行以下操作：

```
has 'cb';

#... and where you need the 0/1 checkbox value simply use the $.cb
my $cb01 = $.cb ? 1 : 0; 
```

因此，当单击复选框时，将得到 1，否则为 0。

### 添加一个完整的例子：

Mason2 组件：`cbf.mc` #checkbox 表单

```
<form action="cbs">
    <input type="checkbox" name="cb" value="1">
    <input type="submit">
</form> 
```

Mason2 组件：`cbs.mc` #checkbox 显示

```
 <%class>
 has 'cb';
 </%class>

 The checkbox value is: <% $.cb ? 1 : 0 %> 
```

制作上述两个组件，并将浏览器指向：

```
 http://url/path/to/cbf 
```

你会得到一个简单的表格。现在不要选中或选中复选框（如您所愿）并按提交。该组件`cbs.mc`将显示该值。选中后，如果不是“0”，您将得到“1”。

真的很简单。

或者，您尝试以下操作`cbs.mc`

```
<%class>
has 'cb' => (default => 0);
</%class>

The chebox value is: <% $.cb %> 
```

更清晰并采用默认值。这两个例子都是可行的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T19:49:25.660

我有一个类似的问题，并在尝试解决它时偶然发现了这个线程。在我的场景中，我有几个具有相同值的复选框（想想数据库中的每行“是/否”）。我想出了一个简单易懂的解决方案。

假设我们的值将是“Y”（选中）或“N”（未选中）。

为每个订单项添加一个“N”隐藏字段。这可确保您收到每一行的值。然后，同名的复选框字段将告诉我们事物是否为“Y”。假设第二个和最后一个检查的 4 个元素是一个 qw(NNYNNY) 数组，你最终会得到什么。只需转换为字符串，将 'NY' 值交换为 'Y' 并转换回来。你会得到正确的 qw(NYNY)。

```
#HTML
%foreach ... {
<input type=hidden name=shouldwe value='N'><input type=checkbox name=shouldwe value='Y'>
%}

#Processing
$list = join('', @shouldwe);
$list =~ s/NY/Y/g;
@shouldwe = split(//, $list); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T18:53:08.083

对于这样的任务，WWW::Mechanize 和 HTML::TokeParser 的组合是您的朋友。前者通过单击按钮、链接等帮助您导航，而后者对 HTML 进行切片和切块。

在这种情况下，您只需导航到页面，扫描数据中的“输入”标签（即“复选框”是“输入”的一种），然后测试每个输入以查看“名称”属性是否与您的匹配'在之后。找到正确的“输入”标签后，您只需获取“已检查”属性的值，然后您就可以使用您喜欢的。

例如：

```
use WWW::Mechanize;
use HTML::TokeParser;

my $checkbox_name = "cb";
my $url = 'http://some_url/';

my $page = WWW::Mechanize->new(autocheck =>1);
$page->get($url);
my $pagedata = HTML::TokeParser->new(\$page->{content});

while (my $token = $pagedata->get_tag("input")) {
    my @tokenarray = @$token;
    my $attr_ref = $tokenarray[1];
    my %attr = %$attr_ref;

    # dump the contents of the hash
    foreach my $k (keys %attr) {
        print "$k: $attr{$k}\n";
    }
    print "\n";

    if ($attr{name} eq $checkbox_name) {
        print "found it!\n";
        print "status = ", $attr{checked}, "\n";
        last;
    }
} 
```

在这个例子中，“导航”部分是微不足道的，你可能没有 WWW::Mechanize。但是，在某些情况下，您需要提交输入、单击按钮、使用链接等，因此它通常会派上用场。

# php - 一个switch case语句的PHP多个case

> ID：10758330
> 
> 赞同：0
> 
> 时间：2012-05-25T16:45:17.350
> 
> 标签：php

我不热衷于 PHP，因此没有花太多时间学习语法，我只是想知道这个`&&`运算符在 switch case 中是否在语法上是正确的，这样我就可以让多个 case 匹配一个 case 代码块。

```
case "msg" && "username": 
/* enter the functions here */ 

break; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T16:46:29.423

不，这将无法正常运行。但是，您可以这样做：

```
case "msg":
case "username":
/* enter the functions here */

break; 
```

*更新了 Pekka 和 Marc 的评论。*

# ruby - 使用 Ruby Toolkit for Rally REST API 检索投资组合项目对象

> ID：10758332
> 
> 赞同：0
> 
> 时间：2012-05-25T16:45:24.943
> 
> 标签：ruby, rest, rally

我在使用 Ruby 工具包访问投资组合项目时遇到了一些麻烦。这些示例展示了如何检索除了投资组合项目之外的几乎所有对象。按照总体趋势，我的假设是，鉴于项目对象不提供对它们的引用，人们将使用以下内容来检索它们：

```
rally = RallyRestAPI.new(:base_url => @base_url, :username => @user_name, :password => @password)

rally.find_all(:portfolio_item).each{
   |pi| print pi.formatted_i_d + "\n"
} 
```

但是，情况似乎并非如此，因为我收到以下错误：

```
<OperationResultError>Not able to parse artifact type: portfolioitem</OperationResultError> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:08:52.100

确保您使用的 Web 服务 API 版本是 1.26 或更高版本 - 投资组合项首先从 1.26 开始引入到对象模型中。如果没有明确指定，我相信 Ruby REST API 默认为 Webservices API 1.17。您可以如下显式定义它：

```
 rally = RallyRestAPI.new(:base_url => @base_url, :username => @user_name, :password => @password, :version => 1.33) 
```

# c# - 如何在 C# 的 DataAdapter 中使用更新方法

> ID：10758335
> 
> 赞同：1
> 
> 时间：2012-05-25T16:45:37.473
> 
> 标签：c#

我只是想将编辑后的结果更新到数据库中，即在 datagridView 中编辑，因此用户不必看到任何弹出窗口或其他任何东西来编辑值，

我有这个代码，但它不工作：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using DevExpress.Skins;
using DevExpress.LookAndFeel;
using DevExpress.UserSkins;
using DevExpress.XtraBars;
using DevExpress.XtraBars.Ribbon;
using DevExpress.XtraBars.Helpers;
using System.Data.OleDb;

namespace e_Examiner {
    public partial class Form1 : RibbonForm {
        Library lib = new Library();
        OleDbDataAdapter adapter;
        DataSet table;

        public Form1() {
            InitializeComponent();
            InitSkinGallery();
            InitGrid();
        }

        void InitSkinGallery() {
            SkinHelper.InitSkinGallery(rgbiSkins, true);
        }

        void InitGrid() {
            lib.connectionOpen();
            OleDbCommand commnad = new OleDbCommand("SELECT * FROM teachers",         
               lib.dbConnection);
            table = new DataSet();
            adapter = new OleDbDataAdapter(commnad);
            OleDbCommandBuilder bulder = new OleDbCommandBuilder(adapter);
            adapter.Fill(table, "teachers");
            gridControl.DataSource = table.Tables["teachers"];
            lib.connectionClose();
        }

        private void layoutView1_CellValueChanged_1(object sender,          
            DevExpress.XtraGrid.Views.Base.
            CellValueChangedEventArgs e) {

            lib.connectionOpen();
            OleDbCommandBuilder bulder = new OleDbCommandBuilder(adapter);
            DataTable dt = table.Tables["teachers"];
            adapter.Update(dt);
            lib.connectionClose();
        }
    }
} 
```

# ruby-on-rails - 以编程方式生成 yaml 节点锚点和引用

> ID：10758337
> 
> 赞同：3
> 
> 时间：2012-05-25T16:45:45.710
> 
> 标签：ruby-on-rails, ruby, yaml

我需要在 Rails 中以编程方式生成这个 yaml：

```
foo: &foo
  x: 1
  y: 2

bar:
  <<: *foo
  z: 3 
```

当它被解析时应该给出这个哈希：

```
output = {
    :foo => {
        :x => 1,
        :y => 2
    },
    :bar => {
        :x => 1,
        :y => 2,
        :z => 3
    }
} 
```

显然`output.to_yaml`给出了扩展的语法。有没有办法以编程方式输出带有[锚点和节点的 yml 语法。](http://en.wikipedia.org/wiki/YAML#References)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T04:03:23.497

我有一个类似的功能，我从初始化程序中读取许多 YAML 文件并附加到全局变量。它是这样的：

```
APP = Hash.new
Dir.glob("#{Rails.root}/config/data/*.yml").each do |file|
  fdata = File.open(file).read
  APP.merge!(YAML::load(ERB.new(fdata).result(binding)).symbolize_keys!)
end 
```

我应该更多地了解您的问题以编写更具体的解决方案。

重点是 YAML::load 方法，它读取 de yaml 格式的文本并输出哈希。ERB 是因为 Yaml 文件可能包含应解释的 erb 标签。它可能需要也可能不需要。符号化键！用于使用 [:symbols] 而不是 ["strings"] 访问键。

# html - 如何使该段落元素向上移动？

> ID：10758347
> 
> 赞同：1
> 
> 时间：2012-05-25T16:46:28.380
> 
> 标签：html, css, margin, move

我把这一切都写出来了，一切都很完美，除了最后的

元素。我想将它向上移动到由具有“defaultButtonStyle”类的 div 创建的蓝色矩形的中心。我尝试在 CSS 中使用 margin-top 无济于事。你还有其他建议吗？

```
<style>
body {background-color: #ebf0f3;}
.mainPicture img {height: 400px;
    width:600px; }
#gallery {position: relative; }
#gallery ul {list-style-type: none;
    width: 236px; 
    margin-left: -33px;
    margin-top: -15px; }
#gallery li { display: inline; 
     float: left;
     padding: 0px; }
#gallery img {border-style: solid: 10px; border-color: #ebf0f3; }
#gallery a { text-decoration: none;
             font-style: none;  
             color: #333; }
.popOut {cursor: default;
    list-style: none; }
.popOut a {cursor: default; }
.popOut a .preview {display: none; }
.popOut a:hover .preview {display: block;
    position: absolute;
    top: -20px;
    left: -45px;
    z-index: 1; }
.popOut img {background: #ebf0f3;
    border-color: #ebf0f3;
    border-style: solid;
    border-width: 2px;
    color: inherit;
    vertical-align: center;
    width: 100px;
    height: 67px; }
.popOut li {background-color: none;
    border-color: #ebf0f3;
    border-style: solid;
    border-width: 0px;
    color: inherit;
    display: inline;
    float: left;
    margin: 3px;
    padding: 0px;
    position: relative; }
.popOut .preview {border-color: #000;
    width: 200px;
    height: 134px; }
.popOut p {text-align: center; }
.defaultButtonStyle {background: #ebf0f3;
    border-color: #ebf0f3;
    border-style: solid;
    border-width: 1px;
    color: inherit;
    vertical-align: top;
    width: 212px;
    height: 38px;
    margin-top: -43px;
    text-align: center; }
.defaultButtonStyle p .defaultImageText {top-margin: 100px; }
.popOut .center {align: center; }
#rightcol {margin-left: 237px;}
#rightcol .fixThisHeight {
    margin-top: 18px; }
</style>
<div id="container">
    <div class="mainPicture">
        <img alt="" id="JudgeBench" name="JudgeBench" src="http://PATH/files/pictures/JudgeBench.jpg" />
    </div>
    <div id="gallery">
        <ul class="popOut">
            <li>
                <a href="http://PATH/files/pictures/PodiumPlain3.html" target="AdditionalInfo" onClick="document.JudgeBench.src='http://PATH/files/pictures/PodiumPlain.jpg'">
                    <img alt="PodiumPlain" src="http://PATH/files/pictures/PodiumPlain.jpg" /><img alt="PodiumPlain" class="preview" src="http://PATH/files/pictures/PodiumPlain.jpg" />
                </a>
            </li>
            <li>
                <a href="http://PATH/files/pictures/PodiumRack4.html" onClick="document.JudgeBench.src='http://PATH/files/pictures/PodiumRack.jpg'" target="AdditionalInfo">
                    <img alt="PodiumRack" src="http://PATH/files/pictures/PodiumRack.jpg" /><img alt="PodiumRack" class="preview" src="http://PATH/files/pictures/PodiumRack.jpg" />
                </a>
            </li>
            <li>
                <a href="http://PATH/files/pictures/CounselTable3.html" onClick="document.JudgeBench.src='http://PATH/files/pictures/CounselTable.jpg'" target="AdditionalInfo">
                    <img alt="CounselTable" src="http://PATH/files/pictures/CounselTable.jpg" /><img alt="CounselTable" class="preview" src="http://PATH/files/pictures/CounselTable.jpg" />
                </a>
            </li>
            <li>
                <a href="http://PATH/files/pictures/PlasmaScreens3.html" onClick="document.JudgeBench.src='http://PATH/files/pictures/PlasmaScreens.jpg'" target="AdditionalInfo">
                    <img alt="PlasmaScreens" src="http://PATH/files/pictures/PlasmaScreens.jpg" /><img alt="PlasmaScreens" class="preview" src="http://PATH/files/pictures/PlasmaScreens.jpg" />
                </a>
            </li>
            <li>
                <a href="http://PATH/files/pictures/Stream_Projector3.html" onClick="document.JudgeBench.src='http://PATH/files/pictures/Stream_Projector.jpg'" target="AdditionalInfo">
                    <img alt="Stream_Projector" src="http://PATH/files/pictures/Stream_Projector.jpg" /><img alt="Stream_Projector" class="preview" src="http://PATH/files/pictures/Stream_Projector.jpg" />
                </a>
            </li>
            <li>
                <a href="http://PATH/files/pictures/AudioAids3.html" onClick="document.JudgeBench.src='http://PATH/files/pictures/AudioAids.jpg'" target="AdditionalInfo">
                    <img alt="AudioAids" src="http://PATH/files/pictures/AudioAids.jpg" /><img alt="AudioAids" class="preview" src="http://PATH/files/pictures/AudioAids.jpg" />
                </a>
            </li>
        </ul>
        <div id="rightcol">
            <iframe width="360px" height="319px" class="fixThisHeight" id="AdditionalInfo" name="AdditionalInfo" src="http://PATH/files/pictures/JudgeBench2.html" title="Information About Courtroom Technology"></iframe>
        </div>
        <div id="defaultButtonDiv" class="defaultButtonStyle">
            <a href="http://PATH/files/pictures/JudgeBench2.html" onClick="document.JudgeBench.src='http://PATH/files/pictures/JudgeBench.jpg'" target="AdditionalInfo">
                <img alt="Default Image" class="DefaultImage" "http://PATH/files/pictures/DefaultImageFinal.jpg" />
                    <div id="MoveTheTextAround" class="MoveTheTextAround">
                        <p class="defaultImageText">Default Image</p>
                    </div>
            </a>
        </div>
    </div>
</div>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<p>Just some text</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:34:20.797

老实说，我还没有找到解决方案，因为我不知道你想要什么元素在哪里......并且图像无法显示，因为它们链接到未知来源。

但是，您的保证金失败的一个原因可能是因为它不应该

```
.defaultButtonStyle p .defaultImageText *{top-margin: 100px; }* 
```

它应该是

```
.defaultButtonStyle p .defaultImageText {margin-top: 100px; } 
```

试一试。

# ruby-on-rails - 如何优雅地处理 Rails 缓存失败？（redis缓存）

> ID：10758349
> 
> 赞同：1
> 
> 时间：2012-05-25T16:46:29.780
> 
> 标签：ruby-on-rails, caching, redis, redis-cache

我在我的应用程序中使用 redis-cache 进行片段缓存。当 redis 关闭或无法访问时，我会收到引发 500 错误的超时异常。

这种情况很少发生，但是对于缓存，我希望 rails 将超时视为：

*   写入无操作
*   读取时缓存未命中。

有什么建议么？这是可以在 rails 缓存中配置的东西，还是我需要做一些猴子补丁来优雅地处理这种情况？

我的堆栈跟踪的相关部分如下，以防它有任何帮助。. .

```
 execution expired
 /opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/timeout.rb:60:in `new'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/connection/ruby.rb:26:in `connect'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/connection/ruby.rb:128:in `with_timeout'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/connection/ruby.rb:25:in `connect'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/client.rb:227:in `establish_connection'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/client.rb:23:in `connect'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/client.rb:247:in `ensure_connected'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/client.rb:137:in `process'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/client.rb:206:in `logging'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/client.rb:136:in `process'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis/client.rb:46:in `call'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis.rb:157:in `get'
 /opt/ruby-enterprise-1.8.7-2010.02/lib/ruby/1.8/monitor.rb:242:in `synchronize'
 bundle/gems/ruby/1.8/gems/redis-2.2.2/lib/redis.rb:156:in `get'
 bundle/gems/ruby/1.8/gems/redis-store-1.0.0.1/lib/redis/store/interface.rb:5:in `get'
 bundle/gems/ruby/1.8/gems/redis-store-1.0.0.1/lib/redis/store/marshalling.rb:13:in `get'
 bundle/gems/ruby/1.8/gems/redis-store-1.0.0.1/lib/active_support/cache/redis_store.rb:119:in `read_entry' 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:22:34.373

凯文，

好奇，你用的是什么 Rails 版本？

redis-store 项目上的这个问题似乎与您遇到的问题有关：[https](https://github.com/jodosha/redis-store/issues/56) ://github.com/jodosha/redis-store/issues/56 。不过，该修复仅针对 Rails 3。

Rails 2 的修复在这里：[https](https://github.com/jodosha/redis-store/pull/83) ://github.com/jodosha/redis-store/pull/83 。查看 redis-store 1.0.0.1 的来源，我没有看到包含该修复程序。

# r - 如何减少矩阵而不丢失R中的属性名称

> ID：10758358
> 
> 赞同：1
> 
> 时间：2012-05-25T16:46:48.410
> 
> 标签：r, matrix, label, bind, reduce

我的问题如下：

我需要减少一个矩阵，删除一些列，但保留列向量的名称。DTM 是我的原始矩阵，如下所示：

```
>DTM
   word1    word2    word3    word4
[1] 1         1        0        0
[2] 2         0        1        1
[3] 0         1        0        2 
```

我想获得一个具有“标签”的新矩阵（以下代码块中的 DTMr）并消除其成员总和小于阈值的所有列（例如 2）：

```
 word1    word4
[1] 1         0
[2] 2         1
[3] 0         2

>DTMr <- matrix(,nrow=nrow(DTM),ncol=d) # This should be the reduced matrix 
```

其中 d 是大于阈值的 DTM 的列数

```
>c = 1 # new counter
>for (col in 1:ncol(DTM))
>{
>  if (sum(DTM[,col]) > 2) 
>  { 
>    DTMr[,c] = DTM[,col]
>    
>    c=c+1
>  }
>} 
```

不幸的是，DTMr 是完美的，但它丢失了所有标签（单词 1，...单词 n）。

有任何想法吗？

克劳迪奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T16:56:17.143

使用子集和的简单解决方案`colSums`：

创建一些示例数据：

```
set.seed(1)
x <- matrix(sample(0:2, 12, replace=TRUE), ncol=4)
colnames(x) <- LETTERS[1:4]
x
     A B C D
[1,] 0 2 2 0
[2,] 1 0 1 0
[3,] 1 2 1 0 
```

子集：

```
x[, colSums(x)<4]
     A D
[1,] 0 0
[2,] 1 0
[3,] 1 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:51:58.160

只需使用`apply`和一些简单的索引：

```
DTM[,apply(DTM,2,sum) > 2]
     word1 word4
[1,]     1     0
[2,]     2     1
[3,]     0     2 
```

稍微拆开包装，`apply(DTM,2,sum)`返回一个列和的向量。随后的布尔比较会产生一个布尔向量，当相应的列总和大于 2 时，该向量为 TRUE。最后，将这些全部放在`[`select 的第二个参数中。

正如 Ben 在评论中提到的那样，这`colSums`是一种更快（对于更大的矩阵）和更紧凑的方法：

```
DTM[,colSums(DTM) > 2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:09:25.980

如果您删除列而不是复制到没有属性的新矩阵，则会保留属性

（我只是使用我周围的另一个矩阵）

```
> m <- structure(c(26, 5, 21, 2, 2, 1, 0, 1, 1), 
                 .Dim = c(3L, 3L), 
                 .Dimnames = list(c("setosa", "versicolor", "virginica"), 
                                  c("PC1", "PC2", "PC3")))
> m
           PC1 PC2 PC3
setosa      26   2   0
versicolor   5   2   1
virginica   21   1   1

> colSums (m)
PC1 PC2 PC3 
52   5   2 

> m [, colSums (m) <= 2, drop = FALSE]
           PC3
setosa       0
versicolor   1
virginica    1 
```

# android - Oauth error (twitter integration)

> ID：10758364
> 
> 赞同：-3
> 
> 时间：2012-05-25T16:47:07.067
> 
> 标签：android, twitter, twitter-oauth

Sorry if it could easy for you, but have 2 days that I trying to find a working twitter sample, every sample stop when try to request token, reading twitter forum, people says that could be internal system clock, I´ve set to my local date and time.

Using:

public static final String REQUEST_URL = "http://api.twitter.com/oauth/request_token";

public static final String ACCESS_URL = "http://api.twitter.com/oauth/access_token";

public static final String AUTHORIZE_URL = "http://api.twitter.com/oauth/authorize";

Callback URL [http://www.google.com](http://www.google.com) (inside twitter Oauth Settings, people says to not leave it blank)

I already checked both tokens, and set to read and write.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:32:32.150

twitter4j => AndroidRuntime(446): java.lang.NoClassDefFoundError: twitter4j.http.AccessToken

Following error messages:

```
E/dalvikvm(374): Could not find class 'twitter4j.http.AccessToken', referenced from method com.ecs.android.sample.twitter.TwitterUtils.isAuthenticated
W/dalvikvm(374): VFY: unable to resolve new-instance 67 (Ltwitter4j/http/AccessToken;) in Lcom/ecs/android/sample/twitter/TwitterUtils;
D/dalvikvm(374): VFY: replacing opcode 0x22 at 0x0010
D/dalvikvm(374): VFY: dead code 0x0012-002f in Lcom/ecs/android/sample/twitter/TwitterUtils;.isAuthenticated (Landroid/content/SharedPreferences;)Z
E/dalvikvm(374): Could not find class 'twitter4j.http.AccessToken', referenced from method com.ecs.android.sample.twitter.TwitterUtils.sendTweet
W/dalvikvm(374): VFY: unable to resolve new-instance 67 (Ltwitter4j/http/AccessToken;) in Lcom/ecs/android/sample/twitter/TwitterUtils;
D/dalvikvm(374): VFY: replacing opcode 0x22 at 0x0010
D/dalvikvm(374): VFY: dead code 0x0012-002b in Lcom/ecs/android/sample/twitter/TwitterUtils;.sendTweet (Landroid/content/SharedPreferences;Ljava/lang/String;)V
D/AndroidRuntime(374): Shutting down VM
W/dalvikvm(374): threadid=1: thread exiting with uncaught exception (group=0x40015560)
E/AndroidRuntime(374): FATAL EXCEPTION: main
E/AndroidRuntime(374): java.lang.NoClassDefFoundError: twitter4j.http.AccessToken
E/AndroidRuntime(374): at com.ecs.android.sample.twitter.TwitterUtils.isAuthenticated(TwitterUtils.java:18)
E/AndroidRuntime(374): at com.ecs.android.sample.twitter.AndroidTwitterSample.updateLoginStatus(AndroidTwitterSample.java:72)
E/AndroidRuntime(374): at com.ecs.android.sample.twitter.AndroidTwitterSample.onResume(AndroidTwitterSample.java:68)
E/AndroidRuntime(374): at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
E/AndroidRuntime(374): at android.app.Activity.performResume(Activity.java:3832)
E/AndroidRuntime(374): at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2110)
E/AndroidRuntime(374): at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2135)
E/AndroidRuntime(374): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1668)
E/AndroidRuntime(374): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime(374): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
E/AndroidRuntime(374): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(374): at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(374): at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(374): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(374): at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(374): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(374): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(374): at dalvik.system.NativeStart.main(Native Method) 
```

**To fix:** just have to change folder name from "lib" to "libs".

See: [Issue #2](https://github.com/ddewaele/AndroidTwitterSample/issues/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:26:18.450

add this permission in your manifest file

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

and follow this link

[http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)

# html - 在 IE9 中忽略基本 href

> ID：10758366
> 
> 赞同：0
> 
> 时间：2012-05-25T16:47:18.457
> 
> 标签：html, .htaccess, internet-explorer-9

我使用重写方法：

```
RewriteEngine on
RewriteRule ^page/([^/\.]+)$ search.php?q=$1 
```

为了防止影响css和图片的url，我`<base href="http://localhost/project/" />`在页眉处使用了。

在 FF 和 Chrome 中一切正常，但在 IE9 中，它仍然将“页面”（重写的 url）添加到所有页面 url 并使得：`http://localhost/project/page`

什么是问题？

# java - 如何从 BSF 后处理器的脚本代码中做出断言？

> ID：10758369
> 
> 赞同：1
> 
> 时间：2012-05-25T16:47:32.930
> 
> 标签：java, javascript, jmeter, functional-testing, stress-testing

我正在尝试使用 JMetter 构建一个测试套件。我要测试的网络服务使用一些定制的协议，使用正则表达式表达我的需求非常困难。

然后我找到了 BSF Post 处理器，它允许我执行一些 Java Script 代码——这很棒。

但是——真正可怕的是——如果我可以从我提供给 BSF 后处理器的脚本主体中做出我想做的断言。

任何人都可以指出我正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:25:17.583

您可以尝试使用[BSF 断言](http://jmeter.apache.org/usermanual/component_reference.html#BSF_Assertion)控件 - 允许使用 BSF 脚本代码进行断言。它真的很像后处理器，但它也设置了具有 setFailure 方法的 AssertionResult 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:28:26.253

您也可以尝试新的[JSR 223](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Assertion)系列，因为它会从 JMeter 2.8 或当前的夜间版本开始获得更好的性能。

# android - android:largeHeap 属性不起作用？

> ID：10758372
> 
> 赞同：0
> 
> 时间：2012-05-25T16:47:45.257
> 
> 标签：android

我将 android:largeHeap="true" 属性添加到我的 android 清单中，但它似乎对我的应用程序允许的内存没有影响。当我在我的 Acer A100（运行 android 3.2.1）上运行以下活动时，我得到以下结果：

```
largeAmount = 256
normalamount = 48
allowedMax = 48
outofmemoryexception allocating the 60mb byte array.

public class TempActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        int largeAmount = manager.getLargeMemoryClass();
        int normalAmount = manager.getMemoryClass();

        long allowedMax = Runtime.getRuntime().maxMemory()/1024/1024;

        byte[] bigarray = new byte[62914560];
    }
}

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.temp"
    android:largeHeap="true"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="11" android:targetSdkVersion="11"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TempActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:42:05.160

糟糕，largeHeap 属性属于“应用程序”标签。

# java - 如何等待 Java 应用程序中的 Elastic MapReduce 作业流程完成？

> ID：10758374
> 
> 赞同：12
> 
> 时间：2012-05-25T16:47:46.710
> 
> 标签：java, amazon-web-services, elastic-map-reduce, amazon-emr

最近我一直在使用 Amazon Web Services (AWS)，我注意到关于这个主题的文档并不多，所以我添加了我的解决方案。

我正在使用 Amazon Elastic MapReduce (Amazon EMR) 编写应用程序。计算结束后，我需要对他们创建的文件执行一些工作，因此我需要知道工作流程何时完成工作。

您可以通过以下方式检查您的工作流程是否已完成：

```
AmazonElasticMapReduce mapReduce = new AmazonElasticMapReduceClient(credentials);

DescribeJobFlowsRequest jobAttributes = new DescribeJobFlowsRequest()
    .withJobFlowStates("COMPLETED");

List<JobFlowDetail> jobs = mapReduce.describeJobFlows(jobAttributes).getJobFlows();
JobFlowDetail detail = jobs.get(0);

detail.getJobFlowId(); //the id of one of the completed jobs 
```

您还可以在其中查找特定的作业 ID，`DescribeJobFlowsRequest`然后检查该作业是否已完成或失败。

我希望它会帮助别人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-20T00:46:40.023

我也遇到了这个问题，这是我现在想出的解决方案。它并不完美，但希望它会有所帮助。作为参考，我使用的是 Java 1.7 和 AWS Java SDK 版本 1.9.13。

请注意，此代码假定您正在等待*集群*终止，而不是严格意义上的*步骤；*如果您的集群在所有步骤完成后终止，这没关系，但如果您使用的集群在步骤完成后仍保持活动状态，这对您没有太大帮助。

另外，请注意，此代码监视和记录集群状态更改，此外还诊断集群是否因错误而终止，如果发生则抛出异常。

```
private void yourMainMethod() {
    RunJobFlowRequest request = ...;

    try {
        RunJobFlowResult submission = emr.runJobFlow(request);
        String jobFlowId = submission.getJobFlowId();
        log.info("Submitted EMR job as job flow id {}", jobFlowId);

        DescribeClusterResult result = 
            waitForCompletion(emr, jobFlowId, 90, TimeUnit.SECONDS);
        diagnoseClusterResult(result, jobFlowId);
    } finally {
        emr.shutdown();
    }
}

private DescribeClusterResult waitForCompletion(
             AmazonElasticMapReduceClient emr, String jobFlowId,
             long sleepTime, TimeUnit timeUnit)
        throws InterruptedException {
    String state = "STARTING";
    while (true) {
        DescribeClusterResult result = emr.describeCluster(
                new DescribeClusterRequest().withClusterId(jobFlowId)
        );
        ClusterStatus status = result.getCluster().getStatus();
        String newState = status.getState();
        if (!state.equals(newState)) {
            log.info("Cluster id {} switched from {} to {}.  Reason: {}.",
                     jobFlowId, state, newState, status.getStateChangeReason());
            state = newState;
        }

        switch (state) {
            case "TERMINATED":
            case "TERMINATED_WITH_ERRORS":
            case "WAITING":
                return result;
        }

        timeUnit.sleep(sleepTime);
    }
}

private void diagnoseClusterResult(DescribeClusterResult result, String jobFlowId) {
    ClusterStatus status = result.getCluster().getStatus();
    ClusterStateChangeReason reason = status.getStateChangeReason();
    ClusterStateChangeReasonCode code = 
        ClusterStateChangeReasonCode.fromValue(reason.getCode());
    switch (code) {
    case ALL_STEPS_COMPLETED:
        log.info("Completed EMR job {}", jobFlowId);
        break;
    default:
        failEMR(jobFlowId, status);
    }
}

private static void failEMR(String jobFlowId, ClusterStatus status) {
    String msg = "EMR cluster run %s terminated with errors.  ClusterStatus = %s";
    throw new RuntimeException(String.format(msg, jobFlowId, status));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T07:37:47.423

作业流程完成后，集群停止，HDFS 分区丢失。为了防止数据丢失，请配置作业流的最后一步以将结果存储在 Amazon S3 中。

如果`JobFlowInstancesDetail`:`KeepJobFlowAliveWhenNoSteps`参数设置为 TRUE，则作业流程将转换到 WAITING 状态，而不是在步骤完成后关闭。

每个作业流程最多允许 256 个步骤。

如果您的工作很耗时，我建议您定期存储结果。

长话短说：没有办法知道什么时候完成。相反，您需要将数据保存为工作的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T07:04:50.287

`--wait-for-steps`创建作业流程时使用选项。

```
./elastic-mapreduce --create \
...
 --wait-for-steps \
... 
```

# jquery - 添加和删 除输入框

> ID：10758375
> 
> 赞同：0
> 
> 时间：2012-05-25T16:47:49.377
> 
> 标签：jquery, css

我试图根据勾选框的时间添加和删除输入框。但是，我似乎遇到了一些问题。我不确定的一点是如何将 $this (div) 与其他属性联系起来。

*HTML：*

```
<form>
    Lifetime Secs <input id="sec" type="checkbox" name="sec" value="sec" /> <br />
    Lifetime KBytes <input id="kb" type="checkbox" name="kb" value="kb" />
</form> 
```

*JavaScript：*

```
$("#input1, #input2").click(function() {
    if ($("this:checked").length) {
        $(this).after('<input type="text" name="input" id="inputbox" />');
    } else {
        $('this input').remove();
    }
}); 
```

*JSFiddle：http:* [//jsfiddle.net/felix001/eA32C/22/](http://jsfiddle.net/felix001/eA32C/22/)

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:51:38.470

修复了几个问题..见下文，

```
$(function() {
    $('input:checkbox').change(function() {        
        if ($(this).is(':checked')) {
            $(this).after('<input type="text" name="input" id="inputbox"  />');
        } else {
            $(this).next('input').remove();
        }
    });
}); 
```

[**演示**](http://jsfiddle.net/eA32C/26/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:11:55.870

可以在此处找到完成此操作的一种方法：http: [//jsfiddle.net/eA32C/40/](http://jsfiddle.net/eA32C/40/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T16:49:50.110

```
$(function() {
  $('input:checkbox').on('change', function() {
    if ( this.checked ) {
        $(this).after('<input type="text" name="input" id="inputbox"  />');
    } else {
        $(this).next('input').remove();
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T16:58:46.780

```
$("#sec,#kb").click(function() {
    $this = $(this);

if ( $this.attr('checked')) {

    $this.after('<input type="text" name="input" id="inputbox"  />');

} else {

    $('#inputbox').remove();

}
}); 
```

[http://jsfiddle.net/eA32C/39/](http://jsfiddle.net/eA32C/39/) ​</p>

# javascript - created by function called from $(document).ready not rendered In the sample I've put together, I need to: Use a jquery POST inside $(document).ready to grab a "ticket" I use later On success of the post, 问问题 问问题 2012-05-25T16:48:00.367 1178 次 This question shows research effort; it is useful and clear 10 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. In the sample I've put together, I need to: Use a jquery POST inside $(document).ready to grab a "ticket" I use later On success of the post, call another function ("AddTicketAndRender()") and pass in that ticket In AddTicketAndRender(), replace a placeholder value in an HTML template with the ticket that was passed in. The HTML template defines an object I need to render. Add the HTML template to body and render: function addTicketAndRender(incomingTicket){ //For now, just touch the spinner, don't worry about the ticket. var template = $('#tableauTemplate').html(), filledTemplate = template.replace('{placeholder}','yes'); $('body').append( filledTemplate );} I have this working in jsfiddle: http://jsfiddle.net/vm4bG/4/ However, when I combine the HTML and JavaScript together into a single htm file, the visualization I want isn't getting rendered in Chrome, IE, or Firefox. Here is complete source from the HTM that isn't working. Can anyone see something that is obviously wrong? My markup & script is below and/or here: http://tableau.russellchristopher.org:81/rfc1.htm   Calls to console.log in the success function are logging correct information - so I know I'm getting where I need to - but the object doesn't seem to be doing what it needs to. I have been researching this topic as well and first of all I don't agree with the votes down moderators for a perfectly valid question with research done by the asker. Second the answer is no you cannot put IIS commands in a executable the whole point of IIS is that you set it up once and you are done so just set it up correctly the first time and you should be good also that tutorial you are looking at is rubbish. Just my 2 cents! javascriptjqueryhtml 4 2 回答 2 This answer is useful 5 仅供参考，您的 tableau.russellchristopher.org 链接不起作用。我也不知道你会如何在 jsfiddle 中使用它——当我尝试它时会出现跨源错误。 一个明显的问题是包含模板的脚本元素位于和之间的下方区域。把它放在里面body。 以下是我认为可能发生的情况：看起来 Tableau JavaScript API 已设置为在触发或触发object.tableauViz时处理元素。您正在将标记插入到异步请求回调中的文档中。因此，我认为加载事件正在触发，并且 Tableau API 正在将您的标记插入文档之前进行初始化。DOMContentLoadedload 也许为这些事件注册您自己的侦听器并调用以查看它们是否在您的回调console.log()之前执行。$.post 不幸的是，createVizesAndStartLoading()执行初始化的方法（例如object.tableauViz从文档中检索元素）似乎不可访问。看起来您可以通过调用添加元素window.tableau.createViz()，但不幸的是，您需要复制或放弃createVizesAndStartLoading()一些预处理（例如设置width/值）。height 同步检索模板 试试这个，而不是你的$.post()： $.ajax( { url : trustedURL, data : { username : userName, server : serverURL, client_ip : "", target_site : "" }, async : false } ).done( addTicketAndRender ); 于 2012-05-31T13:13:42.970 回答 This answer is useful 4 很难从大量代码中准确判断您遇到了什么，因此一般原则： 为了查找和操作 DOM 元素，该元素必须存在。因此，例如，此代码将失败： 

Not updated

实例| 资源 目标不会更新。此代码将起作用：

Not updated

 实例| 资源 唯一的区别是script标签在目标之后，因此当您尝试对其进行操作时，您就知道目标存在于 DOM 中。（这是可靠的；请参阅Google 的开发团队对此有何评论，以及YUI 指南。） 库传统上包括“DOM 就绪”事件，因为内置load事件，即对象事件，直到过程的非常非常晚window才会触发（一旦所有外部引用都已加载，包括所有图像）。但人们想早点做事，即使图像仍在加载。“就绪”样式事件允许脚本代码可以放置在标记中的任何位置（人们喜欢将其放入，出于某种原因），但如果它使用“就绪”事件，它知道它实际上不会被调用，直到所有标记已被处理。head 所以结果是：要么使用ready事件，要么（更好地）将依赖元素的代码移动到标记中的那些元素之后（通常最好在结束标记之前）。 于 2012-05-25T16:57:52.183 回答 Related 0 javascript - JQuery模板中条件的语法错误 0 c++ - 从行为类似于矩阵的类中的数组中获取正确的值 1 php - mcrypt 字符 2 php - CodeIgniter 数据库插入未插入 1 java - 未定义类型 LinkedList 的方法 addElement 1 java - sip 查看器日志导入到新项目 1 mvvm - Dynamic VIew? where to put logic? 1 xml - what's the difference between hibernate-mapping PUBLIC and hibernate-configuration PUBLIC in hibernate configuration file？ 1 javascript - Retrieve attributes of raphael pie chart 1 spring-mvc - SpringContextLoaderListener 的目的是什么 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10758376
> 
> 赞同：10
> 
> 时间：
> 
> 标签：javascript, jquery, html

In the sample I've put together, I need to:

1.  Use a jquery POST inside $(document).ready to grab a "ticket" I use later
2.  On success of the post, call another function ("AddTicketAndRender()") and pass in that ticket
3.  In AddTicketAndRender(), replace a placeholder value in an HTML template with the ticket that was passed in. The HTML template defines an object I need to render.
4.  Add the HTML template to body and render:

    ```
    function addTicketAndRender(incomingTicket){

        //For now, just touch the spinner, don't worry about the ticket.
        var template = $('#tableauTemplate').html(),
            filledTemplate = template.replace('{placeholder}','yes');

        $('body').append( filledTemplate );} 
    ```

I have this working in jsfiddle:

[http://jsfiddle.net/vm4bG/4/](http://jsfiddle.net/vm4bG/4/)

However, when I combine the HTML and JavaScript together into a single htm file, the visualization I want isn't getting rendered in Chrome, IE, or Firefox.

Here is complete source from the HTM that isn't working. Can anyone see something that is obviously wrong? My markup & script is below and/or here: [http://tableau.russellchristopher.org:81/rfc1.htm](http://tableau.russellchristopher.org:81/rfc1.htm)

```
<html>
<head>
<script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
</head>

<!-- template code follows -->
<script type="text/template" id="tableauTemplate">

<div class="tableauPlaceholder" id="tableauPlaceholder" style="width:654px; height:1469px;background-image: url('http://tableau.russellchristopher.org:81/Background.gif'); top: 0px; left: 0px; width: 100%; margin-left: 76px;">
    <object class="tableauViz" width="654" height="1469">
        <param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F"/>
        <param name="site_root" value="" />
        <param name="name" value="AnalyticsIncJavaScript&#47;AnalyticsInc" />
        <param name="tabs" value="no" />
        <param name="toolbar" value="yes" />
        <param name="static_image" value="tableau.russellchristopher.org:81/Background.gif"/>
        <param name="animate_transition" value="yes" />
        <param name="display_static_image" value="yes" />
        <param name="display_spinner" value="{placeholder}" id="display_spinner" />
        <param name="display_overlay" value="yes" />
        <param name="display_count" value="yes" />
    </object>
</div>
</script>
<!-- end of template -->

<body>
<script>
function addTicketAndRender(incomingTicket){

// grab tableau template code and replace ticket placeholder with incomingTicket from $.post
console.log("Add and Render");

    //For now, just touch the spinner, don't worry about the ticket.
    var template = $('#tableauTemplate').html(),
        filledTemplate = template.replace('{placeholder}','no');

    $('body').append( filledTemplate );
    console.log(incomingTicket);
    console.log("Appended.");

}

$(document).ready(function() {
    console.log("ready");
    var trustedURL = "http://tableau.russellchristopher.org/trusted",
        userName = "foo",
        serverURL = "http://tableau.russellchristopher.org/";

    $.post(trustedURL, {
       username: userName,
        server: serverURL,
        client_ip: "",
        target_site: ""
    }, function(response) {
        addTicketAndRender(response);
    });

});

</script>

</body>

</html> 
```

Calls to console.log in the success function are logging correct information - so I know I'm getting where I need to - but the object doesn't seem to be doing what it needs to.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:13:42.970

仅供参考，您的 tableau.russellchristopher.org 链接不起作用。我也不知道你会如何在 jsfiddle 中使用它——当我尝试它时会出现跨源错误。

1.  一个明显的问题是包含模板的脚本元素位于`</head>`和之间的下方区域`<body>`。把它放在里面`body`。

2.  以下是我认为可能发生的情况：看起来 Tableau JavaScript API 已设置为在触发或触发`object.tableauViz`时处理元素。您正在将标记插入到异步请求回调中的文档中。因此，我认为加载事件正在触发，并且 Tableau API 正在将您的标记插入文档之前进行初始化。`DOMContentLoaded``load``<object>``<object>`

    也许为这些事件注册您自己的侦听器并调用以查看它们是否在您的回调`console.log()`之前执行。`$.post`

    不幸的是，`createVizesAndStartLoading()`执行初始化的方法（例如`object.tableauViz`从文档中检索元素）似乎不可访问。看起来您可以通过调用添加元素`window.tableau.createViz()`，但不幸的是，您需要复制或放弃`createVizesAndStartLoading()`一些预处理（例如设置`width`/值）。`height`

# 同步检索模板

试试这个，而不是你的`$.post()`：

```
$.ajax( {

  url : trustedURL,

  data : {

    username : userName,

    server : serverURL,

    client_ip : "",

    target_site : ""

  },

  async : false

} ).done( addTicketAndRender ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T16:57:52.183

很难从大量代码中准确判断您遇到了什么，因此一般原则：

为了查找和操作 DOM 元素，该元素必须存在。因此，例如，此代码将失败：

```
<script>$("#target").html("Updated");</script>
<p id="target">Not updated</p> 
```

[实例](http://jsbin.com/equdih)| [资源](http://jsbin.com/equdih/edit#html)

目标不会更新。此代码将起作用：

```
<p id="target">Not updated</p>
<script>$("#target").html("Updated");</script> 
```

[实例](http://jsbin.com/equdih/2)| [资源](http://jsbin.com/equdih/2/edit)

唯一的区别是`script`标签在目标之后，因此当您尝试对其进行操作时，您就知道目标存在于 DOM 中。（这是可靠的；请参阅[Google 的开发团队对此有何评论](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)，以及[YUI 指南](http://developer.yahoo.com/performance/rules.html)。）

库传统上包括“DOM 就绪”事件，因为内置`load`事件，即对象事件，直到过程的*非常非常晚*`window`才会触发（一旦**所有**外部引用都已加载，包括所有图像）。但人们想早点做事，即使图像仍在加载。“就绪”样式事件允许脚本代码可以放置在标记中的任何位置（人们喜欢将其放入，出于某种原因），但如果它使用“就绪”事件，它知道它实际上不会被调用，直到所有标记已被处理。***`head`***

 ***所以结果是：要么使用`ready`事件，要么（更好地）将依赖元素的代码移动到标记中的那些元素*之后*（通常最好在结束`</body>`标记之前）。***

# authentication - 如何在外部脚本中包含 Joomla 2.5 的 JAuthentication 类

> ID：10758387
> 
> 赞同：0
> 
> 时间：2012-05-25T16:48:54.743
> 
> 标签：authentication, joomla, include, external

我想制作一个脚本，它将用户登录到 Joomla，并且在[http://api.joomla.org/Joomla-Platform/User/JAuthentication.html上没有任何官方文档说明如何做到这一点](http://api.joomla.org/Joomla-Platform/User/JAuthentication.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:26:36.643

我遇到了一个类似的问题，有人要求我从外部自定义 HTML 表单登录 Joomla 2.5 网站。我是这方面的初学者，但我发现了一个非常有用的脚本，因为它按我需要的方式工作（[这个](http://www.jonijnm.es/web/foro/717-otros/19756-crear-una-sesion-de-joomla-desde-un-php-externo.html)网站的所有学分）。

我不使用 JAuthentication 类，而是使用 JFactory::getApplication 对象及其登录方法对 Joomla 进行身份验证：

```
<?
if(isset($_POST['Submit'])){
    define('_JEXEC', 1 );
    define('DS', DIRECTORY_SEPARATOR);
    define('JPATH_BASE', dirname(__FILE__));

    require_once (JPATH_BASE .DS.'includes'.DS.'defines.php' );
    require_once (JPATH_BASE .DS.'includes'.DS.'framework.php' );
    $app =& JFactory::getApplication('site');
    $app->initialise();

    //echo "<br>";print_r($app);

    $credentials = array();
    $credentials['username'] = $_POST['username'];
    $credentials['password'] = $_POST['password'];

    //echo "<br>Login res: ".$app->login($credentials);

    if($app->login($credentials) == 1)
        header('location: http://www.johnabril.com/seguro_desmp');      
}
?> 
```

如您所见，您只需从 HTML 表单中发送用户名和密码字符串，即可完成。

希望能帮助到你。

# macos - 在 OSX Lion 上使用 swipl-ld 编译时缺少符号“_main”

> ID：10758389
> 
> 赞同：0
> 
> 时间：2012-05-25T16:48:58.293
> 
> 标签：macos, prolog, osx-lion, swi-prolog, ffi

我正在尝试编译要从 Prolog 外部函数接口调用的 C 程序。我正在做一些动态编程，这在 Prolog 中并不完全有效。但是，当我尝试编译文件时，出现以下错误：

```
Undefined symbols for architecture x86_64:
  "_main", referenced from:
      start in crt1.10.6.o
     (maybe you meant: __main)
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
/Developer/usr/bin/clang returned code 256
*** swipl-ld exit status 1 
```

C 文件就是[此处](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%279.2.3%27,swi%28%27/doc/Manual/foreignlink.html%27%29%29)找到的示例。

有谁知道是否有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:42:05.497

听起来您正在尝试链接为可执行文件而不是库 (.dylib)。

使用 XCode，您应该将项目创建为动态 C/C++ 库。

# c# - c# 调整图像大小并将其放入正方形，同时保持纵横比

> ID：10758390
> 
> 赞同：0
> 
> 时间：2012-05-25T16:49:01.677
> 
> 标签：c#, winforms, image, image-processing, image-resizing

我为我的网站做的工作很少，我想自动调整我的图像大小。但不仅自动调整大小，而且保持它们成比例，即使我调整了它们的宽度或高度。我想添加额外的白色边框来补偿新空间。

我过去从未做过任何图像工作，我应该如何处理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T16:59:28.763

计算高度，就好像宽度适合，然后检查容器的高度。如果它更高，则计算宽度以使高度适合：

```
newHeight = oldHeight * containerWidth / oldWidth;
if (newHeight <= containerHeight) {
  newWidth = containerWidth;
} else {
  newWidth = oldWidth * containerHeight / oldHeight;
  newHeight = containerHeight;
} 
```

现在您可以计算放置图像以使其居中的位置：

```
x = (containerWidth - newWidth) / 2;
y = (containerHeight - newHeight) / 2; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T21:45:31.543

如果您正在谈论单源成像，您可以在其中上传主图像并通过查询字符串请求它的版本，那么我可以提供帮助。

我是[http://imageresizing.net/](http://imageresizing.net/)的作者。这是一个由附加插件资助的开源库。

您想要的功能包含在免费核心中 - 只需安装并将 ?width=100&height=100 添加到任何图像 URL。

从 ASP.NET 进行图像处理非常棘手。除非你有很强的 Win/C++ 背景，否则你真的不应该这样做。.NET 不会垃圾收集 System.Drawing 实例。

# windows - 进程何时可以在 Windows 上更改其 PID？

> ID：10758393
> 
> 赞同：2
> 
> 时间：2012-05-25T16:49:11.873
> 
> 标签：windows, process

有没有办法让进程在 Windows 上更改其 PID？我发现了这个问题[[1]](https://stackoverflow.com/questions/6692667/changing-the-process-id-in-linux)，但它仅针对 Linux 说明了答案（即“否”）。窗户呢？

[ [1](https://stackoverflow.com/questions/6692667/changing-the-process-id-in-linux) ][更改Linux中的进程ID](https://stackoverflow.com/questions/6692667/changing-the-process-id-in-linux)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:04:23.660

不，您不能更改 Windows 进程的 PID。

# rhapsody - DO-178 航空电子环境的狂想曲？

> ID：10758396
> 
> 赞同：2
> 
> 时间：2012-05-25T16:49:16.053
> 
> 标签：rhapsody, do178-b

有没有人在 DO-178 航空电子设备环境中成功使用过 Rhapsody？也就是说，与 FAA/DER 流程合作，向他们提供工件并让他们获得批准。由于我的理解是 Rhapsody 不是可认证的 MDD 工具，我很好奇是否还有其他缓解因素。

如果你成功了，你采取了哪些步骤来实现这一目标？

感谢您的任何反馈和见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:23:40.590

我在一个按照 DO-178B 级别 D 开发的项目中使用了 Rhapsody（但未经认证）。这些要求在 DOORS 中进行管理，并使用 Rhapsody Gateway 工具链接到 Rhapsody，该工具运行良好。这很重要，因为可追溯性是 178B 的关键部分。

该软件在 Rhapsody 中建模，然后手动生成代码。选择手动代码生成是因为代码的自动生成需要 Rhapsody 成为符合 178B 的开发工具。我不知道IBM 是否为Rhapsody 提供任何178B 认证。

使用定制的测试工具对软件的要求进行验证，为此，我们必须对该工具进行一些重要的测试，以使其成为验证工具。

您的问题很难回答，因为您没有提供有关您正在使用的 178B 级别、您正在使用/计划使用哪些工具（Rhapsody 除外）或您是否打算自动生成代码的任何信息，等等

希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T04:48:40.417

我有使用 Rhapsody C++ 进行 DO-178B A/B 级兼容项目的经验。

自动生成的代码根据覆盖要求（包括 MC/DC 覆盖）进行验证，以获得适当的级别。由于生成的代码通过严格的静态/动态测试和人工审查进行了全面验证，就好像它们是手工编码的一样，Rhapsody 工具的资格不是强制性的。

我们在自定义 Rhapsody 代码生成属性方面付出了很多努力，以仅生成所需的代码，例如 ctor/dtors 和 get/setter，并避免使用不确定的库函数或具有动态内存分配的库函数。

我们能够充分利用往返工程，以便 Rhapsody 模型文件而不是代码受版本控制，因为模型包含所有代码。

Rhapsody UML 应该被考虑用于开发可重用和可移植的软件架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-05T10:22:24.463

Rhapsody 正在我们的 A/C/D 级项目中使用**Arinc 653**。由于**Rhapsody**的输出（自动代码生成器）正在验证中。

因此，资格**狂想曲**是没有必要的。**Rhapsody**通过仅更新“标签”字段在可追溯性和生成或修改测试脚本方面提供优势。

因此不需要修改整个测试脚本或测试脚本中的跟踪。

# window - 重新加载父窗口 ie9 访问被拒绝

> ID：10758398
> 
> 赞同：0
> 
> 时间：2012-05-25T16:49:46.050
> 
> 标签：window, internet-explorer-9, parent, reload

IE9 不会让我从 iframe 中重新加载父窗口。这是我的代码

```
 if(result != 0)
  {
     window.location.reload();
  }
  else
  {
     alert(alert_arr.fail_document_save);
  }
  return true; 
```

IE9 输出：SCRIPT70：权限被拒绝

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:02:37.640

```
if(result != 0)
  {
    var selfUrl = unescape(parent.window.location.pathname);

    parent.window.location.replace(selfUrl);

    parent.window.location.href = selfUrl;
  }
  else
  {
     alert(alert_arr.fail_document_save);
  }
  return true; 
```

按照[这个答案。](https://stackoverflow.com/a/7546013/169334)

# python - 如何在python中调用suds的方法？

> ID：10758404
> 
> 赞同：1
> 
> 时间：2012-05-25T16:50:08.577
> 
> 标签：python, api, vmware, suds, vsphere

特别是，我正在使用 python 和 vmware vsphere 来使虚拟机的创建/开机和类似的东西自动化。我知道如何打印虚拟机的属性，但是我仍然无法调用任何方法，因为我不知道如何。

这是我遇到问题的代码片段：

```
for vm in virtual_machines:
print "VM: "+vm['name']+"  ("+vm['runtime.powerState']+") ",
if hasattr(vm['guest'],'ipAddress'):
    print vm['guest'].ipAddress,
if vm['runtime.powerState'] == 'poweredOn':
    print 'RAM: '+str(vm['summary.quickStats'].distributedMemoryEntitlement)+'MB, CPU: '+str(vm['summary.quickStats'].distributedCpuEntitlement)+'MHz',
if vm['name'] == 'VIRT_VZ_114':
    # This is the trouble maker, it says types mismatch "suds.TypeNotFound: Type not found: 'guest'"
    client.service.PowerOnVM_Task(mo_VirtualMachine,vm)
print 
```

如何正确调用方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:04:20.917

你看过[psphere](https://github.com/jkinred/psphere)吗？

这是一个为 vSphere Web 服务 SDK 提供本机绑定的 python 项目。

您可以使用专用库更快地解决您的问题，而不是为泡沫、SOAP 和 WDSL 问题而苦苦挣扎。它实际上在底层使用了 suds，但为您提供了一个 Python 的 API。

# c# - 即使在 Excel 中“删除”后仍返回 Excel/VSTO 中的命名范围

> ID：10758408
> 
> 赞同：0
> 
> 时间：2012-05-25T16:50:40.233
> 
> 标签：c#, excel, vsto, named-ranges

我正在使用 VSTO（由于客户端请求在 Visual Studio 2008 上）在单个单元格上创建命名范围，然后将其保存到工作簿并随后在应用程序重新启动时读取。

如果我在 excel 中删除包含一个或多个命名范围的行，保存我的工作簿并重新启动 excel，仍然返回所述行中的命名范围，这导致了我的问题。

为了命名单元格，我做了一个简单的 Application.Selection.Name = "whatever"。为了让它们在启动时恢复，我正在使用 Application.ActiveWorkbook.Names。

有人可以告诉我这是否是正确的行为，如果是这样，是否有任何方法可以过滤范围 - 通过 C# excel 互操作代码 - 仅限于当前可见的范围。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:56:19.203

是的，这是正确的行为，与 VSTO 无关。

删除具有名称的范围时，不会删除该名称。相反，它被一个无效的引用替换：

```
Sheet1!#REF! 
```

`RefersToRange`检测此类名称的最简单方法是在读取属性时捕获异常。

# google-maps-api-3 - 圆形地图角隐藏街景关闭按钮

> ID：10758410
> 
> 赞同：0
> 
> 时间：2012-05-25T16:50:44.080
> 
> 标签：google-maps-api-3

我使用 css 和角图像在地图上获得圆角，但是当显示街景时，关闭按钮位于图像下方，无法单击。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T02:02:23.183

我最近遇到了这个问题......我创建了一个“框架”（即：一个类似于“图片框架”的 div，它完美地位于地图 div 的顶部；如果需要，绝对定位它）并应用圆角效果和角图像到框架而不是地图 div。

或者，您可以尝试将地图包装在隐藏溢出的父 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:09:50.447

我最终将一个事件绑定到右上角的 div 以在点击时关闭街景。

# sql-server-2008 - MSSQL Server 2008 BDS 多维数据集中的计算量度

> ID：10758412
> 
> 赞同：0
> 
> 时间：2012-05-25T16:50:57.347
> 
> 标签：sql-server-2008, mdx, data-warehouse, olap, cube

我想定义 3 个计算成员。我有一个基于 2 个表 TrackInfo 和 Chart Positions 的多维数据集。Chart Positions 表由 36 周列组成，其中包含给定曲目在给定周内在前 100 名列表中的位置（如果歌曲没有进入列表，则为 0）：

```
[Entry ID] FOREIGN KEY,
[1st Week] FLOAT,
[2nd Week] FLOAT, 
```

以此类推，直到第 36 周。

我想计算以下措施：

1) 这首歌进入前 10 名的周数

2) 这首歌进入前 20 名的周数

3）“人气表”，这将通过公式完成：

1 / ((所有非零位置的平均值) * (37 - (列表中的周数)))

谁能帮我解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:52:36.363

如果没有多维数据集定义来编写一些 MDX 有点困难，但对于 1）我将举一个类似的问题为例 - [东京] 进入前 3 名销售城市的年份：

```
 select
  [Measures].[Sales] on 0,

  Filter( 

    Generate( [Time].[Year].[Year].members as s1, 
             TopCount( s1.currentMember * [Customers].[City].members, 3, [Measures].[Sales] ) 
    ) as s2,

    IIF( s2.current(1) IS [Customers].[Geography].[City].[Tokyo] , true, false )

  )

  on 1 

  from [Sales] 
```

这适用于[icCube](http://www.icCube.com)中可用的演示立方体；应该与 AS 相同，因为这是非常标准的 MDX。我想你会通过[Generate](http://www.iccube.com/support/documentation/mdx/Generate.html)函数明白这一点。然后，您可以创建一个计算度量，它将 Count() 过滤集而不是将这个集放在轴上（出于演示目的）。

# ios5 - 希望在 mapkit 中的两个动态选择的点之间画线

> ID：10758414
> 
> 赞同：0
> 
> 时间：2012-05-25T16:51:02.357
> 
> 标签：ios5, mapkit, cllocationmanager, cllocation, cllocationdistance

我正在开发一个应用程序，该应用程序将在湖上的两点之间绘制一条“路线”，该路线将从地图上的注释中动态选择。我已经查看是否有人尝试过这样做，但我还没有找到这个问题的答案。如果您能提供帮助，那就太好了。

# actionscript-3 - 弹性图表时间线

> ID：10758415
> 
> 赞同：1
> 
> 时间：2012-05-25T16:51:03.003
> 
> 标签：actionscript-3, apache-flex, taskmanager

（对不起我的英语不好）

你好，flex中存在一个类似于windows任务管理器的组件，可以显示cpu的性能吗？

我需要每隔 X 秒从 wsdl 读取数据并更新图表。

谢谢

# html - HTML5 视频打开文件错误回退

> ID：10758422
> 
> 赞同：0
> 
> 时间：2012-05-25T16:51:25.880
> 
> 标签：html, html5-video, fallback

我有一个与[HTML5 视频类似的问题，如果没有 .ogv 文件，则回退到 flash](https://stackoverflow.com/questions/4763042/html5-video-fallback-to-flash-if-no-ogv-file)

但我的问题是，如果浏览器无法打开 .ogv 文件（不支持 ogv），我想退回到 flash。假设我的 html 已经在源元素下面有预设的后备代码，如果所有源都无法打开（即没有源网络状态），我可以指示浏览器继续执行这些预设的后备代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:04:37.083

您可以在播放前预先嗅探浏览器是否支持 OGV：

[http://diveintohtml5.info/detect.html#video-formats](http://diveintohtml5.info/detect.html#video-formats)

# dojo - dojo 增强网格的自由文本搜索框

> ID：10758427
> 
> 赞同：0
> 
> 时间：2012-05-25T16:51:44.033
> 
> 标签：dojo, dojox.grid, dojox.grid.datagrid

是否可以在 dojo 增强网格顶部有一个自由文本搜索框，我可以输入文本并立即过滤掉不包含文本的行？

我知道过滤器插件，这不是我喜欢的。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:42:33.877

如果取决于您的网格视图是如何绑定的。如果它绑定到 ItemFileReadStore 您可以轻松过滤它：

```
 store.fetch({ query: { filterCol: filterValue }, onComplete: function completed(items,findResult) {
                    store = new dojo.data.ItemFileReadStore({ data: { items: items, identifier: 'YourStoreIdentifier'} });}                          
             }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T21:24:29.580

grid.setQuery({name: 'a%'}) 将使用查询字符串 name=... 调用 JsonRest 存储上的服务器

# android - 如何禁用 ListView 滚动？

> ID：10758429
> 
> 赞同：0
> 
> 时间：2012-05-25T16:51:49.843
> 
> 标签：android, android-listview

我有一个列表视图，当我添加新项目时，它总是滚动到开始。我尝试使用：`lv.setSelection(position)`，，`lv.ScrollTo(x,y)`更改ListView的onScrollListner，但我没有成功。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:28:45.297

将滚动视图添加到您的列表视图将绑定的 xml 文件中，

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android
android:layout_width="fill_parent"
android:layout_height="wrap_content"> 
<TextView
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:text:"test"
    android:textColor="#000" />
</ScrollView> 
```

# facebook - 使用 Facebook API 创建新的 Wordpress 用户

> ID：10758430
> 
> 赞同：1
> 
> 时间：2012-05-25T16:51:50.553
> 
> 标签：facebook, wordpress, facebook-graph-api

我正在尝试允许新用户使用他们的 Facebook 帐户注册我的 Wordpress 网站。我知道如何手动创建一个新用户，但我不确定如何处理用户已经**使用与他们的 facebook 帐户不同的电子邮件地址**注册网站的情况。

我需要创建一个正式的 WP 用户，但我不希望预先存在的用户最终拥有两个不同的帐户（如果他们的 Facebook 电子邮件与他们预先存在的电子邮件不匹配）。我不确定是否有办法将多封电子邮件分配给一个帐户。即使有，我怀疑这将是有问题的。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:22:41.523

万一有人关心，我在创建用户时向新用户添加了一个元字段。[使用update_user_meta()](http://codex.wordpress.org/Function_Reference/update_user_meta)很容易做到这一点。这个元字段保存了用户的 facebook id，所以我可以在每次创建新用户时检查它是否已经存在。[也可以使用get_users()](http://codex.wordpress.org/Function_Reference/get_users)轻松完成。

# ios - 在 iOS 设备中获取默认用户电子邮件

> ID：10758431
> 
> 赞同：9
> 
> 时间：2012-05-25T16:51:53.377
> 
> 标签：ios, email, default, account

是否可以直接从应用程序检索与默认电子邮件帐户关联的用户电子邮件？

截屏：

![在此处输入图像描述](../Images/1e022c00e14d48bfaae69d8925a2d36a.png)

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T17:17:35.027

我无法证明是否定的，但我相当肯定这是不可能的。您可以使用[MFMailComposeViewController](https://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)允许用户从默认帐户发送电子邮件，但您不能直接访问有关默认帐户的信息。如果您需要用户的电子邮件地址，您要么要求他们输入，要么让他们从联系人中选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-19T15:34:28.307

除了@woz answer之外，这是一个可以帮助您的要点。

在我的应用程序中，我有一个反馈表，让用户可以与我取得联系。不幸的是，许多用户在他们的电子邮件地址中有轻微的拼写错误，我无法联系到他们。

由于我无法找到确保电子邮件正确无误的完美方法，因此我制定了以下要点：

1.  断言邮件是正确的 foo@bar.tld
2.  验证电子邮件是否包含在用户的通讯录中
3.  如果不是，建议最接近的匹配

同样，这远非完美，我只是选择性地包含了这种行为（UITextField 旁边的一个小“检查邮件”按钮）

[https://gist.github.com/dirtyhenry/7547064](https://gist.github.com/dirtyhenry/7547064)

# c# - NHibernate：更新与合并方法

> ID：10758439
> 
> 赞同：4
> 
> 时间：2012-05-25T16:52:30.490
> 
> 标签：c#, nhibernate, repository-pattern, unit-of-work

我有一个 NHibernate 存储库。我想`Update`在 NHibernate 中调用加载和卸载对象的方法`ISession`。

但是我得到了这个异常，这意味着我应该调用`Merge`method 而不是`Update`.

> 具有相同标识符值的不同对象已与会话关联：0adc76b1-7c61-4179-bb39-a05c0152f1a1，实体：Eshop.Entities.Currency

如何概括我的存储库以避免此异常？

这是我的通用存储库：

```
public class NHibernateProvider : IDataProvider
{
    #region Variables

    private readonly object locker = new object();
    private ISessionFactory sessionFactory;
    private Configuration configuration;
    private ITransaction transaction;

    #endregion

    #region Properties

    private ISessionFactory SessionFactory
    {
        get
        {
            lock (locker)
            {
                if (Null.IsObjectNull(HttpContext.Current.Items["DataProvider"]))
                {
                    configuration = new Configuration();

                    configuration.Configure();

                    HttpContext.Current.Items["DataProvider"] = sessionFactory = configuration.BuildSessionFactory();

                    HttpContext.Current.Items["DataProviderSession"] = sessionFactory.OpenSession();
                }

                return (HttpContext.Current.Items["DataProvider"] as ISessionFactory);
            }
        }
    }

    private ISession session;
    private ISession Session
    {
        get
        {
            if (Null.IsObjectNull(HttpContext.Current.Items["DataProviderSession"]))
            {
                session = SessionFactory.OpenSession();

                session.FlushMode = FlushMode.Auto;

                HttpContext.Current.Items["DataProviderSession"] = session;
            }
            else
            {
                session = HttpContext.Current.Items["DataProviderSession"] as ISession;
            }
            return session;

        }
    }

    #endregion

    #region Methods

    public T Get<T>(Guid ID)
    {
        return Session.Get<T>(ID);
    }

    public T Get<T>(Expression<Func<T, bool>> predicate)
    {
        return Session.Query<T>().Where(predicate).FirstOrDefault();
    }

    public IQueryable<T> GetAll<T>()
    {
        return Session.Query<T>();
    }

    public IQueryable<T> GetAll<T>(Expression<Func<T, bool>> predicate)
    {
        return Session.Query<T>().Where(predicate);
    }

    public IQueryable<T> GetAll<T>(Expression<Func<T, bool>> predicate, int currentPage, int pageSize
                                  )
    {
        if (Session.Query<T>().Any(predicate))
        {
            return Session.Query<T>().Where(predicate).Skip<T>(currentPage*pageSize).Take(pageSize);
        }
        return new List<T>().AsQueryable();
    }

    public IQueryable<T> GetAll<T, TKey>(Expression<Func<T, bool>> predicate, int currentPage, int pageSize,
                                         Expression<Func<T, TKey>> sortExpression)
    {
        if (Session.Query<T>().Any(predicate))
        {
            return
                Session.Query<T>().Where(predicate).Skip<T>(currentPage*pageSize).Take(pageSize).OrderBy<T, TKey>(
                    sortExpression);
        }
        return new List<T>().AsQueryable();
    }

    public bool Exists<T>(Guid ID)
    {
        if (Null.IsNotObjectNull(Session.Get<T>(ID)))
        {
            return true;
        }
        return false;

    }

    public bool Exists<T>(Expression<Func<T, bool>> predicate)
    {
        return Session.Query<T>().Where(predicate).Any();
    }

    public void Update<T>(T targetObject, bool commit = true) where T:class
    {
        try
        {
            BeginTransaction();

            Session.Update(targetObject);

            CommitTransaction(commit);

        }
        catch (Exception)
        {
            RollBackTransaction();
            throw;
        }
    }

    public void Update<T>(IEnumerable<T> targetObjects, bool commit = true) where T : class
    {
        try
        {
            BeginTransaction();

            foreach (var target in targetObjects)
            {
                Session.Update(target);
            }

            CommitTransaction(commit);

        }
        catch (Exception)
        {
            RollBackTransaction();
            throw;
        }
    }

    public void Insert<T>(T targetObject, bool commit = true)
    {
        try
        {
            BeginTransaction();

            Session.Save(targetObject);
            CommitTransaction(commit);

        }
        catch (Exception)
        {
            RollBackTransaction();
            throw;
        }
    }

    public void Insert<T>(IEnumerable<T> targetObject, bool commit = true)
    {
        foreach (T target in targetObject)
        {
            Insert<T>(target, false);
        }
        CommitTransaction(commit);
    }

    public void Delete<T>(T targetObject, bool commit = true)
    {
        try
        {
            BeginTransaction();

            Session.Delete(targetObject);
            CommitTransaction(commit);
        }
        catch (Exception)
        {
            RollBackTransaction();
            throw;
        }
    }

    public void Delete<T>(Guid targetID, bool commit = true)
    {
        try
        {
            BeginTransaction();

            Session.Delete(Get<T>(targetID));

            CommitTransaction(commit);
        }
        catch (Exception)
        {
            RollBackTransaction();
            throw;
        }
    }

    public void Delete<T>(Expression<Func<T, bool>> predicate, bool commit = true)
    {
        try
        {
            BeginTransaction();
            if (Session.Query<T>().Any(predicate))
            {
                foreach (T element in Session.Query<T>().Where(predicate))
                {
                    Session.Delete(element);
                }
            }
            CommitTransaction(commit);
        }
        catch (Exception)
        {
            RollBackTransaction();
            throw;
        }
    }

    private void RollBackTransaction()
    {
        transaction.Rollback();
    }

    private void CommitTransaction(bool commit)
    {
        if (commit && transaction.IsActive )
        {
            transaction.Commit();
        }
    }

    private void BeginTransaction()
    {
        if (Session.Transaction.IsActive == false)
        {
             transaction =Session.BeginTransaction();
        }
    }

    #endregion

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:57:09.783

发现，我应该使用 Merge ，因为 merge 将在 NHibernate 会话中考虑其状态（分离的、持久的）来决定合并或更新实体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-14T09:57:38.610

`Merge`和`Update`是`SaveOrUpdate`不同的。

> 通常 update() 或 saveOrUpdate() 用于以下场景：
> 
> *   应用程序在第一个会话中加载一个对象
> *   对象被向上传递到 UI 层
> *   对对象进行了一些修改
> *   对象被传递回业务逻辑层
> *   应用程序通过在第二个会话中调用 update() 来保留这些修改
> 
> saveOrUpdate() 执行以下操作：
> 
> *   如果对象已在此会话中持久存在，则不执行任何操作
> *   如果与会话关联的另一个对象具有相同的标识符，则抛出异常
> *   如果对象没有标识符属性，则保存（）它
> *   如果对象的标识符具有分配给新实例化对象的值，则保存（）它
> *   如果对象由 or 版本化，并且版本属性值与分配给新实例化对象的值相同，则 save() 它
> *   否则更新（）对象
> 
> 和 merge() 非常不同：
> 
> *   如果存在与当前会话关联的具有相同标识符的持久实例，则将给定对象的状态复制到持久实例上
> *   如果当前没有与会话关联的持久化实例，尝试从数据库中加载它，或者创建一个新的持久化实例
> *   返回持久实例
> *   给定的实例没有与会话关联，它保持分离
> 
> [[来源](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html)]

`Merge`如果要将实体的分离实例附加到当前会话**，并且当前会话中可能已经存在相同（具有相同标识符）的持久实例，则**应该调用。如果你直接调用`Update`或`SaveOrUpdate`在这个实体上，你可能会得到`NonUniqueObjectException`异常。

查看您得到的异常，很明显会话中已经存在具有相同标识符的持久实例；如果您愿意松开已经在会话中的实体，则`Merge`必须调用**此特定案例。**

在上面的引用中，请注意返回的实例（按`Merge`方法）是持久实例；不是作为参数传递的那个。

> 如何概括我的存储库以避免此异常？

太宽泛，无法回答，也基于意见。我将避免以这种方式概括存储库。事实上，如果可能的话，我会[避免使用 NHibernate 的通用存储库。](https://stackoverflow.com/a/51781877/5779732)相反，我将同时公开`Merge`和`Update`方法，并将其留给用户使用正确的方法；但正如您所看到的，这最大限度地减少了通用存储库的使用。这就是为什么，我宁愿避免它。

另一种选择是处理如下异常（注意：不安全；我不推荐这样做）：

```
try
{
    nhSession.Update(instance);
}
catch(NonUniqueObjectException)
{
    instance = nhSession.Merge(instance);
} 
```

我不推荐这样做，因为这实际上可能会隐藏代码中的实际问题。在某些情况下，这可能会产生意外行为。您的更改可能会意外丢失，因为会话中的原始实体将被覆盖。

正如您在[回答](https://stackoverflow.com/a/10764927/5779732)中所说：

> 发现，我应该使用 Merge

同样，正如我上面所说，我不建议在任何地方使用`Merge`代替`Update`。

> 因为合并将在 NHibernate 会话中考虑其状态（分离的、持久的）来决定合并或更新实体。

在某些情况下，这可能是有益的；但在其他情况下，这可能会产生问题。我在上面已经解释过了。

# php - 将 CSV 导入 MySQL - 已建立字段

> ID：10758440
> 
> 赞同：1
> 
> 时间：2012-05-25T16:52:34.320
> 
> 标签：php, mysql, csv, import

这可能是一个愚蠢的问题，但我似乎无法在谷歌上找到答案或以编程方式创建答案。我有一个巨大的 CSV 文件，名为 contacts2.csv（逗号分隔），我想将它导入我的 MySQL 数据库。现在棘手的部分是我已经在数据库中有一堆字段，我想将数据放入其中，但它们与 CSV 不匹配。

例如，CSV 上的第一列可能是“公司”，但它实际上是 MySQL 上的第 5 列。我还有一个自动增量“id”列，当前为 129483653，我希望在导入这些列时保持自动增量。

我在网上找到了一些脚本来显示数据并导入到新表中，但是我需要将所有这些记录添加到现有表中而不覆盖任何内容。

谢谢

我使用了一个 CSV 到 MySQL 的转换器，并得到了这个作为我的输出：

```
CREATE TABLE `tempcontacts` ( 
`company` varchar(255) NOT NULL DEFAULT '', 
`contact` varchar(255) NOT NULL DEFAULT '', 
`address_1` varchar(255) NOT NULL DEFAULT '', 
`city` varchar(255) NOT NULL DEFAULT '', 
`state` varchar(255) NOT NULL DEFAULT '', 
`zip` varchar(255) NOT NULL DEFAULT '', 
`phone` varchar(255) NOT NULL DEFAULT '', 
`fax` varchar(255) NOT NULL DEFAULT '', 
`title` varchar(255) NOT NULL DEFAULT '', 
`phone_ext_` varchar(255) NOT NULL DEFAULT '', 
`web_site` varchar(255) NOT NULL DEFAULT '', 
`e_mail` varchar(255) NOT NULL DEFAULT ''
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `tempcontacts` VALUES 
('Construction', 'Bill Billy', '4201 State Route 1', 'Orlando', 'FL', '11111', '312-922-2125', '', '', '235', 'www.construction.com', ''), 
```

这不能只是以某种方式切换到我的名为“联系人”的实际表的“插入”命令吗？

更新：我想我可能需要有人帮我写一些自定义的东西才能完成所有这些。我试过了：

[http://www.codewalkers.com/c/a/Database-Code/PHP-CSV-Importer-20/](http://www.codewalkers.com/c/a/Database-Code/PHP-CSV-Importer-20/)

[http://www.geeklog.net/forum/viewtopic.php?showtopic=71161](http://www.geeklog.net/forum/viewtopic.php?showtopic=71161)

在其他来源中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:17:56.037

我认为您最好的选择是将您的 mysql 表重新排序为您的 csv 文件顺序。然后只需按照您想要的顺序重新排序 mysql 表。这是一个时髦的工作。即使你搞乱了顺序，一切都是 var(255) 所以你可以重命名该列

编辑：

只要您的行以正确的顺序排列，以便 1 在第 1 行，2 在第 2 行等，并且您的列的顺序正确：您的 csv 中的公司、联系人、地址_1 等以匹配您的表然后您可以只使用 Data Infile 脚本

[http://dev.mysql.com/doc/refman/5.0/en/load-data.html](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

我必须导入 csv 文件的示例：

```
LOAD DATA INFILE '/usr/name/file.csv' INTO TABLE `mytable`
COLUMNS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'; 
```

然后只需使用 auto_increment 添加您的列主键

我之所以使用它，是因为有人有一个 Excel 表，其中包含我需要一次导入数据库的一堆东西。我仍在学习数据库的所有内容，所以我不知道如果你把它作为一个例程脚本是否存在安全风险。

编辑：

[使用来自http://dev.mysql.com/doc/refman/5.0/en/load-data.html](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)的示例之一

```
LOAD DATA INFILE '#{DATA_FILE_NAME}' IGNORE
INTO TABLE zipcodes
FIELDS TERMINATED BY ','
ENCLOSED BY '\"'
LINES TERMINATED BY '\\n'
(city, state_code, @zip, area_code, county_fips, county_name, @preferred, timezone, 
dst, lat, lon, msa, pmsa, @city_abbreviation, ma, zip_type) 
```

不过，要做到这一点，CSV 文件中的所有行（行）都应该遵循相同的模式。所以说：公司的顺序，ownerid，name，title，address，然后是硬输入（\n）

所以它应该看起来像

```
PharmacyPlace, 2222, Bob Pills, Pharmacists Awesome Man, 51 Main st
Walmart, 12331, Anna Smith, Manager, 99 main st 
```

保持相同的模式

如果您有任何其他方式的线路，那么您将不得不修复它，但如果您有：

```
Taco Bell,,,Manager, 59 Main st 
```

然后每个逗号都会告诉它转到下一列。

所以这个例子上传到你的数据库的脚本是

```
LOAD DATA INFILE 'DATA_FILE_NAME' INTO TABLE `your table`
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
(company, ownerid, name, title, address); 
```

我会先备份你的表，然后将其复制到另一个表作为临时表来测试这一切。您将不得不进行一些试验和错误。就像我说的一个时髦的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:56:33.040

来自每周十几次走这条路的人的话。导入临时表并使用 SQL 引擎或 PHP 脚本从那里找出它的优点远远超过了尝试匹配/映射和希望的痛苦。[在这里](https://stackoverflow.com/questions/10645988/best-way-to-error-catch-load-data-local-infile/10646070#10646070)早些时候回答了这个问题。只是我的看法，我*可能*是错的。

从您编辑的问题开始工作：该转换器生成了一个 INSERT 语句，您可以修改这样的内容。将您的表格更改为最终表格，并将显示的列名调整为最终表格中的实际列，而不更改它们的顺序（列名必须与下面的数据顺序相同，但不必与它们在表结构中的顺序相同）

```
INSERT INTO `contacts` 
(`company`, `contact`, `address_1`, `city`, `state`, `zip`, `phone`, `fax`, `title`,     `phone_ext_`, `web_site`, `e_mail`) 
VALUES
('Construction1','Bill Billy','4201 State Route 1','Orlando','FL','11111','312-922-2125','','','235','www.construction.com',''),
('Construction2','Bill Billy','4201 State Route 1','Orlando','FL','11111','312-922-2125','','','235','www.construction.com',''); 
```

;

# ruby-on-rails - 通过字符串引用对象属性

> ID：10758441
> 
> 赞同：1
> 
> 时间：2012-05-25T16:52:34.880
> 
> 标签：ruby-on-rails, ruby

我正在尝试干燥一种方法，在该方法中我需要对三个不同的属性执行相同的任务。像这样：

```
if !@item.picture.blank?
  picture_copy = Picture.new
  picture_copy.save!
  item_copy.picture = picture_copy
end

if !@item.picture_for_x.blank?
  picture_for_x_copy = PictureForX.new
  picture_for_x_copy.save!
  item_copy.picture_for_x = picture_for_x_copy
end

if !@item.picture_for_y.blank?
  picture_for_y_copy = PictureForY.new
  picture_for_y_copy.save!
  item_copy.picture_for_y = picture_for_y_copy
end 
```

所以基本上我正在运行相同的代码，但实例化不同的对象，然后将它们分配给不同的属性。感觉应该有一种方法可以使用反射来干燥这个视图。有没有一种方法可以将这些属性和对象作为传递给辅助方法的字符串来引用？

由于各种原因，我不能只使用 .clone 或 .dup：主要是因为涉及到二进制文件指针，而且我还需要深拷贝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:05:15.630

```
{
  picture:       Picture,
  picture_for_x: PictureForX,
  picture_for_y: PictureForY
}.each do |name,klass|
  if !@item.send(name).blank?
    copy = klass.new
    copy.save!
    item_copy.send("#{name}=",copy)
  end
end 
```

请记住，在 Ruby 中，*外部*没有可用的属性或属性，只有方法（您可以选择不带括号调用，这样*看起来*您正在访问属性，有时可能只是返回实例变量的值） .

[`Object#send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)是一种神奇的方法，可让您根据存储在变量中的名称调用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:13:41.037

```
def picture_for_x_blank?(s = "")
  s = "_for_#{s}" unless s.empty?
  m = "picture#{s}"

  unless @item.send(m).blank?
    copy = Kernel::const_get(m.camelize).new
    copy.save!
    item_copy.send("#{m}=", copy)
  end
end

picture_for_x_blank?
picture_for_x_blank?("x")
picture_for_x_blank?("y") 
```

# javascript - 要在按钮的单击事件上显示的嵌入代码

> ID：10758442
> 
> 赞同：-3
> 
> 时间：2012-05-25T16:52:36.387
> 
> 标签：javascript, html, onclick, embed, buttonclick

我有一个显示雅虎图表的嵌入式代码

嵌入式代码是 -

```
<embed bgcolor="#dbdbd3" flashvars="lcId=1169793726234&amp;state=symbol%3D%5Ensebank;range=1d;indicator=ema(13,34,55)+macd+rsi+stochasticfast;charttype=candlestick;crosshair=on;ohlcvalues=0;logscale=on;source=undefined" loop="false" menu="false" name="BANKNIFTY" pluginspage="http://www.macromedia.com/go/getflashplayer" src="http://us.js2.yimg.com/us.yimg.com/i/us/fi/yfc/swf/flashchart_1.18.swf" style="height: 775px; width: 550px" type="application/x-shockwave-flash" wmode="opaque"></embed> 
```

我希望在单击显示按钮时显示此嵌入代码。

请建议相关的javascript。

我尝试过这样的事情

```
<script type="text/javascript">
function ln(){
document.getElementById('looknorth').innerHTML='<embed bgcolor="#dbdbd3" flashvars="lcId=1169793726234&amp;state=symbol%3D%5Ensebank;range=1d;indicator=ema(13,34,55)+macd+rsi+stochasticfast;charttype=candlestick;crosshair=on;ohlcvalues=0;logscale=on;source=undefined" loop="false" menu="false" name="BANKNIFTY" pluginspage="http://www.macromedia.com/go/getflashplayer" src="http://us.js2.yimg.com/us.yimg.com/i/us/fi/yfc/swf/flashchart_1.18.swf" style="height: 775px; width: 550px" type="application/x-shockwave-flash" wmode="opaque"></embed>'();
  }
</script>
<input type=button style="background-color:#123742; color:#FFFFFF ; font-weight:bold; font-size:15" name=Button2 value=Calculate onClick=ln();></td></tr> 
```

通过参考在互联网上找到但不起作用的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:56:22.837

此行需要编辑：

```
document.getElementById('looknorth').innerHTML='<embed ....</embed>'(); 
```

至：

```
document.getElementById('looknorth').innerHTML='<embed ....</embed>'; 
```

括号不应该在那里，因为字符串不是函数。

首先创建一个具有上述 id 的 div，然后将内容添加到其中：

```
<div id="looknorth"></div>

<script type="text/javascript">
function ln(){
document.getElementById('looknorth').innerHTML='<embed....></embed>';
  }
</script>
<input type="button" value="Show Chart" onClick="ln();" /> 
```

# android - alwaysRetainTaskState 无法按预期工作。单例类正在失去它的状态

> ID：10758444
> 
> 赞同：3
> 
> 时间：2012-05-25T16:52:37.517
> 
> 标签：android, android-activity, android-lifecycle

在我的应用程序第一次运行时，在根活动上，用户需要选择某些选项来确定将从数据库中为他下载哪些数据。

一旦他选择了该选项，数据就会被下载并保存在一个单例类中，只要应用程序正在运行，该类就应该保存该数据。（即使在后台）

我的问题是，有时在用户退出我的应用程序一段时间后（使用主页按钮），Android 显然会杀死我应用程序中的一些活动，并且不知何故，它会重置重要的单例类。一旦我尝试访问应该保留在单例中的数据，导致我的应用程序接收各种空引用异常。

我了解 Android 操作系统有时可以选择终止应用程序，但允许用户从上次访问的活动返回到该应用程序。有时它只会杀死整个应用程序并迫使用户从头开始。

我一直在寻找解决方案，并且发现了可以应用于我的根活动的“android:alwaysRetainTaskState”属性。显然，每当android决定杀死我的应用程序时，它至少会迫使用户从我可以重新下载数据的第一个活动开始，而不是允许用户从更高级的活动开始，导致他得到空异常。

但是，当我将它应用于我的应用程序时，它不起作用，当我返回我的应用程序时，我是从一个高级活动开始，使用一个空的单例实例。

我还尝试了“android:clearTaskOnLaunch”并且它有效，但这是一个矫枉过正，因为我不希望每次用户返回应用程序时，他都必须重新开始。我希望它只有在 android 决定终止应用程序时才会发生。

有什么我做错了吗？有没有可能有更好的解决方案来保持单身人士的生命？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T19:01:18.387

没有。没有更好的解决方案。这就是它的工作原理。Android 可以随时终止应用程序的进程（只要它在后台）。您可以将数据保存在单例中，但无论如何，Android 总是有可能杀死您的进程。当用户返回您的应用程序时，Android 将创建一个新进程，然后创建一个用户正在恢复的活动的新实例。您需要将代码放入`onCreate()`所有识别您的单例已消失的活动中，然后执行适当的操作（重定向到应用程序的根活动或重新初始化您的单例。

很容易判断您的进程是否已被杀死并重新创建。只需将一个`static boolean`变量添加到您`true`在初始化时设置的单例中。在`onCreate()`您的所有活动中，检查该变量的状态，如果变量为 ，请执行一些智能操作`false`。

# mysql - 从两个表中选择数据而不连接

> ID：10758445
> 
> 赞同：-5
> 
> 时间：2012-05-25T16:52:39.483
> 
> 标签：mysql, sql

这是交易：

表 A 有 A1 和 A2 列

表 B 有 B1、B2、B3 列

现在我想从 A1 和 B1 列中选择数据（没有连接），条件是：-

B3='someword' 和 A2=B2

如果不需要打印 B1，我会将查询（无连接）编写为：

```
select A1 from A where A2 in (select B2 from B where B3='someword'); 
```

但我需要同时打印 A1 和 B1，那么是否可以在不使用连接和使用“IN”的情况下做到这一点？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T17:00:02.273

当您说您需要将输出限制在 A2=B2 的位置时

您正在指定一个联接。

称它为别的东西并不会改变它的本来面目……套用威利的话，

“任何其他名称的连接仍然是连接”

严肃地说，“连接”*不是*名称，也不是单词，甚至不是用于应用它的查询中的语法，它是基于来自两个不同表的值的逻辑谓词或限制或过滤器。如果您需要将输出限制在 Table1.A2 等于 Table2,B2 的位置，那么您有一个 Join

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T16:59:28.793

如果没有有效的方法，您无法做到这一点，`JOIN`或者换句话说，您可以使用`inserted select`可能，但此操作要慢得多，例如`JOIN`，`JOIN`是最好的选择，并且是以编程方式和数据库编写的。当您向他推销缓慢的 IS 时，您潜在的未来客户不会那么高兴。

# c# - vb.net 表单和 jquery 验证

> ID：10758447
> 
> 赞同：0
> 
> 时间：2012-05-25T16:52:46.200
> 
> 标签：c#, javascript, jquery, asp.net, vb.net

我有一个 vb.net 表单按钮，它通过 jquery 验证，然后在后面的代码中排除一个函数，实际上，如果验证是 true 或 false，函数会停止并且永远不会调用 vb.net 函数我怎样才能使它继续后面的代码吗？

vb.net 表单（文本框和按钮）

```
 <asp:TextBox ID="ToCc" runat="server"></asp:TextBox>
    <asp:Button ID="emailSend" runat="server" Text="send" /> 
```

jQuery：

```
 $("#<%=emailSend.ClientID %>").click(function(){
          if($("#<%=ToCc.ClientID %>").val() == ""){
            alert("this fienld can't be empty") ; 
            return false ; 
          } else{
    return true ; 
}

         }); 
```

电子邮件点击VB功能是

```
 Protected Sub emailSend_Click(ByVal sender As Object, ByVal e As EventArgs) Handles 

    emailSend.Click

   MsgBox("do any thing ") 

   End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:57:10.727

您尚未将 emailSend_Click 方法指定为按钮的事件处理程序。其次，您可以使用[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)来完成您的验证目标。

尝试`<asp:Button ID="emailSend" runat="server" Text="send" onclick="emailSend_Click" />`

`emailSend.Click`此外，从后面的代码中删除该语句。您已经在 click 事件处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:23:05.850

这是jquery版本

```
$('input[id$=emailSend]').click(function(){
if($('input[id$=ToCc]').val() == ''){
            alert("this fienld can't be empty") ; 
            return false ; 
          } 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:55:12.307

更简洁和更多“jQuery”：

```
$("#<%=emailSend.ClientID %>").click(function(event) { 
      if($("#<%=ToCc.ClientID %>").val() == "") { 
        alert("this field can't be empty") ;  
        event.preventDefault(); 
      }  
}); 
```

默认情况下，如果一切正常，它将返回 true。

# mysql - 我的 MySQL 转储的导入距离有多远？

> ID：10758463
> 
> 赞同：10
> 
> 时间：2012-05-25T16:54:58.433
> 
> 标签：mysql, mysqldump, mysql-management

在我的公司，我们偶尔会导入大型客户 MySQL 数据库 (40GB+)，这些数据库可能需要一天多的时间才能加载到我们的开发人员机器上。虽然我们接受这个加载时间，因为它是在后台完成的，但我们缺乏任何可靠的能力来估计导入何时完成。这阻止了我们安排适当的时间来采取行动。这就像在等待有线电视人出现一样。

现在我最好的策略是快速`show tables`命令查看已加载的表格百分比。然而，由于桌子大小在彼此之间以及与每个客户之间都存在很大差异，因此这甚至不是很可靠。

**有没有人有一个好的技术或工具可以用来获得 MySQL 导入的可靠百分比？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T16:59:30.463

您可以`pv`通过将转储管道传输到`mysql`.

```
pv -i 1 -p -t -e /path/to/sql/dump | mysql -u USERNAME -p DATABASE_NAME 
```

它会在导入过程中根据 IO 吞吐量显示一个进度条。（如此处所示[。](http://www.commandlinefu.com/commands/view/10185/progress-bar-for-mysql-import)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:56:58.387

HeidiSql 会告诉你到目前为止已经加载了多少 GB，这在试图确定还需要加载多少 GB 时非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T17:03:58.030

您还可以`show processlist`对源数据库执行操作，以查看导出到特定表的距离（通过自动递增 ID）。Eric 提出了一个很好的观点，即您可以监控数据库数据目录的大小与源的大小相比。

我发现在加速转储/导入方面很有用，是通过表来完成，然后同时运行多个 mysqldump，本质上是多线程处理您的进程。我通常一次进行大约 4 次单独的转储/恢复。最佳数量取决于您的硬件和磁盘容量。

一个非常简单的例子给你一个想法：

```
mysqldump dbname table1 table2 table3 | mysql -h host &
mysqldump dbname table4 table5 table6 | mysql -h host &
mysqldump dbname table7 table8 table9 | mysql -h host & 
```

# mysql - 复制所有 SQL 行并同时更改数据

> ID：10758464
> 
> 赞同：0
> 
> 时间：2012-05-25T16:55:01.020
> 
> 标签：mysql, sql

我想复制表中的每一行，但在重复行中，一列的值需要覆盖另一列中的现有值（规范化表的中间步骤）。

所以我需要的是

```
INSERT INTO `performers` SELECT * FROM `performers` 
SET `performers`.`piano` = `performers`.`singing` 
```

由于我不擅长 SQL，正如预期的那样，上面没有工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:00:57.657

如果仅重复行需要更改此值，则可以修改`INSERT`：

```
INSERT INTO `performers`(col1, col2, col3, piano, singing)
SELECT col1, col2, col3, singing, singing
FROM `performers` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:02:55.237

根据您的问题，我认为您想复制该行然后将列的内容复制`singing`到`piano`列中？

```
INSERT INTO performers (row1, row2, row3, piano)
SELECT row1, row2, row3, singing
FROM performers 
```

# javascript - 传递参数时事件侦听器过早触发

> ID：10758466
> 
> 赞同：1
> 
> 时间：2012-05-25T16:55:08.110
> 
> 标签：javascript, jquery, parameter-passing, event-listener

我将一些参数传递给一个 javascript 函数，该函数构建一个供用户填写的表单。在这些参数中，还有两个函数包含在一个单独的类中，它们处理表单的保存或取消。cancel 函数需要两个参数，用于确定要构建的实体列表。问题在于参数。在表单构建功能中，如果我将取消功能附加到新创建的取消按钮而不给它任何参数，则功能按钮可以正常工作，但由于缺少参数而构建一个空列表。但是，如果我使用参数附加该函数，则该函数会在创建页面而不是单击按钮时立即触发。我尝试以几种不同的方式附加监听器，包括 javascript、jquery 甚至 yahoo.util。当在其他实例中使用参数调用取消函数时，一切都在取消函数中正常工作。关于为什么在传递参数时函数会提前触发的任何想法？

这是我附加了偶数侦听器的不同方式的一些 sudo 代码。

```
function buildform(formData, saveFunction, CancelFunction, p1, p2){
      $("#cancelButton").live("click", cancelFunction(p1, p2);
      YAHOO.util.Event.on("cancelButton", "click", cancelFuntion(p1, p2));
      cancelButton.setAttribute("onClick",cancelFunction(p1, p2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:01:42.117

您必须将方法调用包装在功能块中，否则会立即对其进行评估：

```
$("#cancelButton").live("click", function () { cancelFunction(p1, p2); }); 
```

# c# - 自动生成 xaml 资源字典

> ID：10758468
> 
> 赞同：3
> 
> 时间：2012-05-25T16:55:11.090
> 
> 标签：c#, .net, wpf, xaml, resourcedictionary

我有一个应用程序，其中我为我的字符串使用特定的 ResourceDictionary，我需要在一个类中复制该 ResourceDictionary 的键作为字符串常量。虽然复制和粘贴很容易，但我预计大约有 350 个资源字符串，并且必须管理具有所有内容的两个文件不是一种选择。

我想编写一个具有键/值网格的应用程序，用户将为其输入值，并且该应用程序将写入 Xaml 文件和 .cs 常量类。我对 .cs 文件没有任何问题，但是有没有办法在写入新文件的内容之前无需清除文件即可写入 xaml 文件？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:10:17.373

您可以编写一个 T4 模板，该模板使用简单的设计器（WPF 用户控件）或 xml 文件来生成 xaml 和 C# 文件。

[Oleg Sych 的优秀 T4 教程](http://www.olegsych.com/2007/12/text-template-transformation-toolkit/)

[下面是如何使用 T4 生成多个文件](http://www.olegsych.com/2008/03/how-to-generate-multiple-outputs-from-single-t4-template/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:11:56.117

我在 VS11 中使用 ReSharper 7 beta（尽管旧版本具有相同的功能）来创建一个模板，它至少可以让您减少所需的击键。

# php - 将php数组传递给jquery函数

> ID：10758471
> 
> 赞同：6
> 
> 时间：2012-05-25T16:55:35.220
> 
> 标签：php, jquery, arrays

我有一个页面，上面有一个表格，里面有客户信息。我将以前的客户数据存储在一个 php 数组中。使用下拉列表，用户可以用我存储的数据填写表格。

我所拥有的是一个 jquery 函数，它在值更改时触发，并且在该函数内部我想用我存储的数据（在我的 php 数组中）更新表单值。

问题是我不知道如何将我的 php 数组传递给 jquery 函数，知道吗？

这就是我填充数组的方式：

```
$contador_acompanantes = 0;

foreach ($acompanantes->Persona as $acomp) 
{
  $numero = $acomp->Numero;
  $apellidos = $acomp->Apellidos;
  $nombre = $acomp->Nombre;

  $ACOMPANANTES[$contador_acompanantes] = $ficha_acomp;
  $contador_acompanantes++; 
} 
```

得到了我的选择对象：

```
<select name="acompanante_anterior" id="acompanante_anterior">
<option value="1" selected>Acompañante</option>
<option value="2">acompanante1</option>
<option value="2">acompanante2</option>
</select> 
```

这是我的 jquery 函数代码（它在同一个 .php 页面中）

```
<script type="text/javascript">
$(document).ready(function() 
{ 
$('#acompanante_anterior').on('change', function() 
    {

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-25T17:01:37.483

```
var arrayFromPHP = <?php echo json_encode($phpArray); ?>;
$.each(arrayFromPHP, function (i, elem) {
    // do your stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:17:37.960

您可能希望使用`json_encode`，将 JSON 嵌入页面中，并使用[JSON-js](https://github.com/douglascrockford/JSON-js)对其进行解析。使用此方法，您应该注意转义`</script>`、引号和其他实体。此外，标准的安全问题也适用。在这里演示：http: [//jsfiddle.net/imsky/fjEgj/](http://jsfiddle.net/imsky/fjEgj/)

HTML：

```
<select><option>---</option><option>Hello</option><option>World</option></select>

<script type="text/javascript">
    var encoded_json_from_php = '{"Hello":[1,2,3], "World":[4,5,6]}';
    var json = JSON.parse(encoded_json_from_php);
</script> 
```

jQuery：

```
$(function() {
    $("select").change(function() {
        $(this).unbind("change");
        var val = json[$(this).val()];
        var select = $(this);
        $(this).empty();
        $.each(val, function(i, v) {
            select.append("<option>" + v + "</option>");
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:03:32.477

试试这个。。

```
<script type="text/javascript">
    $(document).ready(function() 
    { 
    $('#acompanante_anterior').on('change', function() 
        {
            my_array = new Array();

            <?php foreach($array as $key->val)?>
                my_array['<?php echo $key?>'] = '<?php echo $val;?>';
            <?php endif; ?>

        });
    });
    </script> 
```

# linux - 使用 xinput 在 X11/Linux 中禁用键盘后释放所有键？

> ID：10758473
> 
> 赞同：1
> 
> 时间：2012-05-25T16:55:41.457
> 
> 标签：linux, keyboard, x11, xinput

在 Linux 上使用 X11/Xorg 时，当您使用`xinput`禁用键盘（例如`xinput set-prop $ID "Device Enabled" 0`）时，不会发送“key-up”事件（因为您已禁用键盘）。如果您在命令行上输入该命令，这一点很明显，它就像您按住“输入”键一样。这是因为该命令（禁用键盘）在您将手指从 Enter 键上移开之前运行。

这在这个错误（[https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-input-evdev/+bug/724280](https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-input-evdev/+bug/724280)）和这篇博文（[http://blog.yjl.im/ 2010/12/using-xinput-to-disable-keyboard-mouse.html](http://blog.yjl.im/2010/12/using-xinput-to-disable-keyboard-mouse.html)）。

我正在编写一个需要禁用键盘的程序，并希望避免这个问题。有什么方法/命令可以“释放当前按下的所有键”（可以在“禁用键盘”命令之后运行）？或者是否有一种命令/方法来“获取所有当前按下的键的列表”以及手动/以编程方式发送“键释放”事件的方法？（这样我可以禁用键盘，查看按下了哪些键，然后“释放”这些键）。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:20:22.497

“我正在编写一个需要禁用键盘的程序，并希望避免这个问题”

抓住键盘焦点并丢弃所有输入有什么问题？

`xinput`是一个非常生硬的工具*，*你遇到了一个两年多的错误，这意味着它不太可能得到修复。事实上，这个错误可能比这更古老，并且可能被使用它的人视为“预期行为”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:49:58.170

您所体验的是终端仿真器如何处理键盘事件以及外壳如何反应的特殊性。当你按下 enter 时，shell 将执行给它的命令，并且你的命令`xinput ...`将在 enter 被按下之前完成。由于键盘被禁用，没有按键释放事件甚至会进入事件处理。

这不是一个错误，这是一个功能。

如何解决它：在实际执行分离之前等待所有键被按下，或者只是在 xinput 命令之前添加一个睡眠（这些都是竞争条件，所以它不是 100% 可靠的）。

即把它放在shell命令行上

```
sleep 1 ; xinput set-prop $ID "Device Enabled" 0 
```

在实际执行 xinput 禁用之前将首先休眠一秒钟。如果您不按住回车键，您应该会处于所需的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T23:04:14.543

只需在 xinput set-prop $ID "Device Enabled" 0 之后模拟任何键单击，在需要命令之前没有睡眠时间

```
xinput set-prop $ID "Device Enabled" 0 ; xdotool key z 
```

# java - 新的数组列表 (T[] arr)

> ID：10758474
> 
> 赞同：4
> 
> 时间：2012-05-25T16:55:43.327
> 
> 标签：java

好的，所以这对我来说没有意义....也许有人可以阐明一下。我想出的将原始数组转换为 ArrayLists 的技术如下。

```
arr = new ArrayList<String>(Arrays.asList(primitveArray)); 
```

这很好用。但是今天，我开始想知道这是多么有效，因为我碰巧正在编写一些性能比以前更重要的代码。过去我曾在其他应用程序中工作过，并决定查看源代码`Arrays.asList()`

我找到了这个：

```
public static <T> List<T> asList(T... array) {
    return new ArrayList<T>(array);
} 
```

我对自己说：“我真是个白痴，它只是将数组传递给 ArrayList 构造函数`ArrayList<T>(T[] arr)`，我为什么不跳过一步而不使用愚蠢的 Arrays.asList 呢？

所以我试试这个

```
arr = new ArrayList<T>(primitveArray) 
```

在我的代码中。但是突然之间`ArrayList<T>(T[] arr)`是不确定的。我很困惑为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:01:24.317

> 但是突然之间`ArrayList<T>(T[] arr)`是不确定的。我很困惑为什么会这样？

有两个类名为`ArrayList`：

*   一个是 的`private` `static`内部类`java.util.Arrays`；
*   另一个是`java.util.ArrayList`。

`asList()`使用前者。您正在尝试使用后者。这两个类是不相关的，它们只是碰巧同名。

需要注意的是`java.util.Arrays.ArrayList`不复制数组。它提供了一个视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:58:38.733

> 所以我试试这个`arr = new ArrayList<T>(primitveArray)`

`T`是一个泛型类型的参数，您不能在实例化 ArrayList 时使用它，只有在声明它在类或方法中使用时才能使用它。相反，将您的代码更改为：

`arr = Arrays.asList(primitveArray);`

Arrays 类中使用的 ArrayList 类与您在代码中使用的 ArrayList 类不同，它是 Arrays 类本身定义的内部类，并定义了一个以 Array 作为参数的构造函数。由于此类是私有的，具有非公共构造函数，因此只能在`Arrays`类本身内实例化和使用。

```
private static class ArrayList<E> extends AbstractList<E>
    implements RandomAccess, java.io.Serializable
    {
        private static final long serialVersionUID = -2764017481108945198L;
    private final E[] a;

    ArrayList(E[] array) {
            if (array==null)
                throw new NullPointerException();
        a = array;
    }

... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T17:03:21.073

好吧，在问了这个问题大约十秒钟后，我想通了。Apprently`java.util.Arrays`实现了一个名为 ArrayList 的静态本地类，它与`java.util.ArrayList`. 令人困惑的是，它们都被命名为 ArrayList，但其中 as`java.util.Arrays.ArrayList`被声明为

```
private static class ArrayList<E> extends AbstractList<E> implements
        List<E>, Serializable, RandomAccess 
```

`java.util.ArrayList`被声明为

```
public class ArrayList<E> extends AbstractList<E> implements List<E>,
    Cloneable, Serializable, RandomAccess 
```

我想现在的问题是，为什么要这样做。我想可能是优化。由于 Array 将 ArrayList 转换为 List 它只需要支持足以执行 List 操作而无需其他`ArrayList`正常功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T17:08:32.767

> 我想现在问题又来了，为什么会这样做

返回的列表是数组的视图，不会发生复制，并且对列表的任何更改在源数组中都是可见的。由于它始终由源数组支持，因此不支持任何影响列表大小的修改并引发异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T17:09:35.833

你要意识到的最重要的事情是它`Arrays.asList`是**完全高性能**的，它是 O(1)，固定开销**非常小。**这是因为没有数据被复制。它只是为您的数组提供了一个`List`与之交互的接口。其次，这`private static class ArrayList`确实非常重要，因为它`public class ArrayList` **确实会复制**数据并导致性能下降。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T17:22:23.260

> 我想现在的问题是，为什么要这样做。

(an )`List`返回的。是原始数组的视图。如果你改变它，数组就会改变，如果你改变数组，它就会改变。如果您尝试执行任何调整大小的操作，则会引发异常，因为您无法调整原始数组的大小。`Arrays.asList``Arrays.ArrayList`

它只是一个适配器，可以有效地将原始数组视为 a`List`而无需将元素复制到`List`.

当你这样做

```
new java.util.ArrayList( Arrays.asList( primitiveArray ) ); 
```

是当您复制元素时。结果不是视图，而是独立于原始数组。而且，您还获得了调整大小的能力。如果您查看源代码（您必须同时查看`java.util.ArrayList`and `Arrays.ArrayList`，您会发现它以最有效的方式将这些元素从原始原始数组复制到支持 的数组中`java.util.ArrayList`，因此不会丢失效率要担心。

# objective-c - 如何在这个 SQLite 插入语句中获得 NULL？

> ID：10758477
> 
> 赞同：0
> 
> 时间：2012-05-25T16:56:16.237
> 
> 标签：objective-c, sqlite, fmdb

我有 3 个 SQLite 表。每个都有一个 ID 作为主键；如果我在向 ID 插入记录时提供 NULL，它将自动增加密钥（至少 SQLite 文档是这么说的）。我试图将 NULL 放入此插入语句，但它崩溃（'NSInvalidArgumentException'，原因：' *** -[NSPlaceholderString initWithFormat:locale:arguments:]: nil argument'）。这是语句的片段（dbCmd 定义为 NSString）：

```
 dbCmd = @"INSERT INTO CustData (ID, BUS_NAME, EMAIL, PHONE, SHOP_NAME, SHOP_ADDR1, SHOP_ADDR2, SHOP_CITY_STATE, SHOP_ZIP, "
    "SHIP_NAME, SHIP_ADDR1, SHIP_ADDR2, SHIP_CITY_STATE, SHIP_ZIP, SALES_NAME, NOTES) VALUES('";
    dbCmd = [dbCmd stringByAppendingFormat:NULL];  //  <--------------------
    dbCmd = [dbCmd stringByAppendingString: [methodParameters objectForKey: @"businessName"]];
    dbCmd = [dbCmd stringByAppendingString: @"', '"];
    dbCmd = [dbCmd stringByAppendingString: [methodParameters objectForKey: @"email"]]; 
```

**我该如何解决？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:19:00.283

从 sqlite 文档：

> 如果插入时没有指定 ROWID，或者指定的 ROWID 的值为 NULL，则会自动创建适当的 ROWID。

[http://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)

如果您没有具体的理由指定 ID，您可以简单地将其省略！

# android - 是否有创建/保存/编辑不同 android 密度可绘制对象的无痛工作流程？

> ID：10758479
> 
> 赞同：3
> 
> 时间：2012-05-25T16:56:18.357
> 
> 标签：android, drawable

我在我的游戏中保存了每个图像的 4 个副本，每个副本具有不同的密度。它们保存在相关的 res/drawable-* 文件夹中，它似乎在各种设备上运行良好。

所以，目前，我打开 Photoshop，每张图片都有一个 psd。我适当地编辑矢量，更改密度，并将图像保存在适当的文件夹中。对于每张图像，我必须这样做 4 次。这需要很长时间，我试图避免马虎并弄乱一张图像的一个密度而没有注意到它。

有更好的方法吗？当您必须在开发过程中创建和编辑您的可绘制对象时，您如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:08:20.897

查看 Photoshop 中的批处理。这和你做的一样，只是自动化 [http://howto.wired.com/wiki/Batch_Process_Images_in_Photoshop](http://howto.wired.com/wiki/Batch_Process_Images_in_Photoshop)

# java - 为什么 JSplitPane 混搭我的 GridBagLayout？

> ID：10758489
> 
> 赞同：1
> 
> 时间：2012-05-25T16:56:54.130
> 
> 标签：java, swing, layout-manager, gridbaglayout, jsplitpane

我真的没有为此的示例代码（所以我会尝试解释它），但我想知道是否有办法停止`JSplitPane`捣碎我的布局？

我有两个面板，我添加到`JSplitpane`其中两个面板`GridBagLayout`上。在左侧窗格中，我有一张桌子。在右窗格中`JPanel`，当用户与表格交互时，我有一个显示信息。但是，当信息显示在右窗格中时，表格会被混合。（除非分隔线一直向右拖动，否则无法显示）。

我认为无论如何`GridBagLayout`我的桌子应该仍然可见。即使它压扁了列和行。

我只是想知道这是否是一个普遍的问题，如果是这样，有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:36:04.003

我的问题是，当单击表时，我将约束重置为 JSplitPane。这导致约束消失，让 GUI 做自己喜欢的事情。

伪：

```
//set constraints for panel that contains table and random components
//if table clicked add data (with GridBagLayout) in other side of splitpane <-- this is where I accidentally reset the layout 
```

因此，一旦删除了那行代码，它就会按预期运行。

# c# - 在 C# 中调用类

> ID：10758497
> 
> 赞同：0
> 
> 时间：2012-05-25T16:57:56.477
> 
> 标签：c#, sql, class

我正在用 C# 开发一系列重用相同 SQL 代码的进程。下面是我为与我的测试数据库的 SQL 连接创建的类的示例。问题：如何在我的过程中调用类？我尝试了几件事，但是出现以下错误

错误：

```
SQLHelperCode.FirstConnect is a 'type'  which is not valid in the given context.
Only Assignment, call, increment, decrement and new object expressions can be used as a statement 
```

FirstConnect 类

```
public class FirstConnect
{
    public FirstConnect()
    {
        SqlConnection conn;
        string path = @"C:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Data";
        const string dbName = "datadetail";
        {
            conn = new SqlConnection("user id=TestUser;" +
                                     "server=TestData\\SQLEXPRESS;" +
                                     "Trusted_Connection=yes;" +
                                     "connection timeout=30");

            try
            {
                conn.Open();
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        }
    }
} 
```

想在这段代码中调用 FirstConnect：

```
protected override void OnBarUpdate()
{
    accountName = Account.Name.ToString();

    if (accountName == 'Test1234')
    {
        //Call FirstConnect here.
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:01:56.247

这一行定义了类

```
public class FirstConnect
 { 
```

这一行定义了构造函数

```
 public FirstConnect()
      { 
```

下面将定义一个FirstConnect类型的变量，然后调用构造函数来创建它（我做了两行显式）

```
FirstConnect fc;
fc  = new FirstConnect(); 
```

通常你会想要有一个方法可以对对象做一些实际的事情

例如

```
SomeOtherObject varaibleName = fc.GetSomeData(accountName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:07:37.607

不是答案，只是一个很大的评论......

当使用实现`IDisposable`类似的类时`SqlConnection`，它们应该像这样使用：

```
using (var conn = new SqlConnection("user id=TestUser;server=TestData\\SQLEXPRESS;Trusted_Connection=yes;connection timeout=30"))
{
   //... do work ... 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T17:00:50.340

`FirstConnect fc = new FirstConnect();`

# wpf - Caliburn Micro -- 更改 BindableCollection 中的单个项目

> ID：10758499
> 
> 赞同：2
> 
> 时间：2012-05-25T16:58:01.587
> 
> 标签：wpf, caliburn.micro

我在列表视图中显示一个集合，每个列表视图项目都有自己的按钮用于下载相关的 pdf。

我想单击该按钮并在其位置显示一个不确定的进度条。

在我的示例项目中，我只是试图在单击其按钮时反转项目的下载状态。

我的视图模型代码：

```
private BindableCollection<IDownloadable> _downloadables;
public BindableCollection<IDownloadable> Downloadables
{
    get { return _downloadables; }
    set
    {
        _downloadables = value;
        NotifyOfPropertyChange(() => Downloadables);
    }
}

public void Download(IDownloadable item)
{
    item.Downloading = !item.Downloading;
    NotifyOfPropertyChange(() => Downloadables);
}

public ShellViewModel()
{
    Downloadables = new BindableCollection<IDownloadable>();

    Downloadables.Add(new DownloadString("String"));
    Downloadables.Add(new DownloadString("String"));
    Downloadables.Add(new DownloadString("String"));
} 
```

我的观点：

```
<ListView Name="Downloadables"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">
    <ListView.View>
        <GridView>
            <GridViewColumn>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Grid Background="White">
                            <ToggleButton Content="{Binding MyString}"
                                          Width="50"
                                          Height="50"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center" 
                                          cal:Message.Attach="Download($dataContext)"/>
                            <spark:SprocketControl Width="30"
                                                   Height="30"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   AlphaTicksPercentage="50"
                                                   Interval="60"
                                                   IsIndeterminate="True"
                                                   LowestAlpha="50"
                                                   StartAngle="-90"
                                                   TickColor="LawnGreen"
                                                   TickCount="12"
                                                   TickWidth="3" 
                                                   Visibility="{Binding Downloading, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        </Grid>

                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

我曾想象 NotifyOfPropertyChanged 会告诉集合项目更新，但事实并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:07:12.503

这与收藏无关。模板绑定到项目本身。它对收藏一无所知。这意味着，您需要在项目本身中实现通知 ( [INotifyPropertyChanged )。](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

# android - 如何在 Android 下的 SQLite 中正确插入日期时间值？

> ID：10758505
> 
> 赞同：2
> 
> 时间：2012-05-25T16:58:46.110
> 
> 标签：android, sqlite

我正在开发一个虚拟的 android 项目来掌握一些东西。以下代码行破坏了我的 android 应用程序，没有任何错误。我正在使用 Idea 作为 IDE。

```
database.execSQL("Insert Into todos(uid, name, created_on, changed_on) values('6a7047ed-c2f9-407f-a774-1c02b0fe9caf', 'todo', DATETIME('NOW'), DATETIME('NOW'))"); 
```

我确定数据库具有给定的列，如果我只是使用：

```
database.execSQL("Insert Into todos(uid, name) values('6a7047ed-c2f9-407f-a774-1c02b0fe9caf', 'todo')"); 
```

应用程序按应有的方式工作。

我试图插入这样的日期（[基于与此事相关的已回答问题](https://stackoverflow.com/questions/1933720/how-do-i-insert-datetime-value-into-a-sqlite-database)）：

```
 '2012-05-25 16:52:00' 
```

或者

```
 date('now') 
```

我得到同样的崩溃，没有错误或调试日志。

我在这里想念什么？

**更新**

根据要求，用于创建数据库表的代码。

```
 public static final String TABLE_TODOS = "todos";
    public static final String COLUMN_ID = "id";
    public static final String COLUMN_UID = "uid";
    public static final String COLUMN_NAME = "name";
    public static final String COLUMN_CHECKED = "checked";
    public static final String COLUMN_TO_DELETE = "must_delete";
    public static final String COLUMN_CHANGED_ON = "changed_on";

    public static final String COLUMN_CREATED = "created_on";

    private static final String DATABASE_CREATE = "create table "
            + TABLE_TODOS + "( "
            + COLUMN_ID + " integer primary key autoincrement, "
            + COLUMN_UID + " varchar(50), "
            + COLUMN_NAME + " text not null, "
            + COLUMN_CHECKED + " integer default 0, "
            + COLUMN_TO_DELETE + " integer default 0, "
            + COLUMN_CHANGED_ON + " datetime "
            + COLUMN_CREATED + " datetime "
            +");"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:11:54.203

您的问题是您正在声明 SQlite 中不存在的数据类型。从文档：

" 1.2 日期和时间数据类型

SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：

TEXT 作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。INTEGER 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。

应用程序可以选择以任何这些格式存储日期和时间，并使用内置的日期和时间函数在格式之间自由转换。”

因此，更改数据库中的数据类型，重新创建它，并更改方法以从这些列中插入/更新/检索数据以匹配正确的数据类型，这样对您来说应该会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T18:22:14.517

您在表创建语句中的 created_on 列之前缺少逗号。

```
+ COLUMN_CHANGED_ON + " datetime " 
```

应该

```
+ COLUMN_CHANGED_ON + " datetime, " 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-30T12:51:20.980

根据 SQLite 自己的文档，会使用正确的数据类型`NUMERIC`来记录`DATETIME` [http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)遵循的亲和数据类型规则。请参阅亲和力表。

```
COLUMN_CHANGED_ON + " datetime " 
```

应该

```
COLUMN_CHANGED_ON + " NUMERIC, " 
```

使用正确的亲和力数据类型，您可以比较值，例如

```
SELECT b < '40', b < '60', b < '600' FROM t1; 
```

# jquery - jpost 最后执行？

> ID：10758507
> 
> 赞同：0
> 
> 时间：2012-05-25T16:58:52.553
> 
> 标签：jquery, google-maps, post

我有一个创建谷歌地图标记的函数。我从数据库查询中传入数据。然后我让函数使用一个值作为外键执行另一个数据库查询。然后我试图将所有结果（来自第一个查询的数据和来自第二个查询的数据）放入一个字符串中，标记将显示在 infoWindow 中。

但不知何故，程序将字符串视为“未定义”，除非我在 $.post 函数之外为第二个查询构建它。这是怎么回事？程序不应该能够读取该字符串吗？

这是我的代码：

```
function createMarker(marker_id, point,street, neighborhood, date,map) {
            // Create the HTML text based on the values passed in from XML
            $.post('get_victimdata.php', {marker_id:marker_id},
                 function(victimdata){

                     objVictimdata = jQuery.parseJSON(victimdata);
                     markerhtml = "";
                      markerhtml += "<strong>Street: </strong>" + street + "<br>";
                      markerhtml += "<strong>Neighborhood: </strong>" + neighborhood + "<br>";
                      markerhtml += "<strong>Date: </strong>" + date + "<br><br>";
                     for (var i=0; i < objVictimdata.length; i++) {
                         var image_path = objVictimdata[i].image_path;
                         var image_height = objVictimdata[i].image_height;
                         markerhtml += "<strong>Victim Name: </strong>" + objVictimdata[i].name + "<br>";
                         markerhtml += "<strong>Age:</strong> " + objVictimdata[i].age + "<br>";
                         markerhtml += "<strong>Race:</strong> " + objVictimdata[i].race + "<br>";
                         markerhtml += "<strong>Gender:</strong> " + objVictimdata[i].gender + "<br>";
                         markerhtml += "<strong>Cause:</strong> " + objVictimdata[i].cause + "<br><br>";
                         console.log(markerhtml);

                     }//end for

            })//end post
            console.log(markerhtml);

            var image = new google.maps.MarkerImage('http://labs.google.com/ridefinder/images/mm_20_green.png',
            new google.maps.Size(12, 20),
            new google.maps.Point(0,0),
            new google.maps.Point(6, 20));

            var marker = new google.maps.Marker({
              position: point,
              map: map,
              icon: image
            });

            var infoWindow = new google.maps.InfoWindow(); //initialize infoWindow
              // Add a click event to each marker which will open the HTML window
            marker.infowindow = new google.maps.InfoWindow({
              content: markerhtml
            });

            google.maps.event.addListener(marker, "click", function() {
                marker.infowindow.open(map, marker);
            });

};//end create marker 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:56:57.550

试试下面的代码。不同之处在于，我将调用 $.post 之后的所有 statemetns 放置在匿名函数内，该函数在发布成功后才被触发。当你调用 $.Post 时，内部的函数在 post 完成之前不会运行，但在 post 发生在后台时仍会继续执行以下语句！

**释义**内部匿名函数已扩展为包含大部分代码。如果您不确定差异，请尝试使用 WinMerge 之类的程序，它会显示差异：![winmerge 显示差异](../Images/a12cd56e3a0286d6734b5063aff7a3c0.png)

```
function createMarker(marker_id, point,street, neighborhood, date,map) {
            // Create the HTML text based on the values passed in from XML
            $.post('get_victimdata.php', {marker_id:marker_id},
                 function(victimdata){

                     objVictimdata = jQuery.parseJSON(victimdata);
                     markerhtml = "";
                      markerhtml += "<strong>Street: </strong>" + street + "<br>";
                      markerhtml += "<strong>Neighborhood: </strong>" + neighborhood + "<br>";
                      markerhtml += "<strong>Date: </strong>" + date + "<br><br>";
                     for (var i=0; i < objVictimdata.length; i++) {
                         var image_path = objVictimdata[i].image_path;
                         var image_height = objVictimdata[i].image_height;
                         markerhtml += "<strong>Victim Name: </strong>" + objVictimdata[i].name + "<br>";
                         markerhtml += "<strong>Age:</strong> " + objVictimdata[i].age + "<br>";
                         markerhtml += "<strong>Race:</strong> " + objVictimdata[i].race + "<br>";
                         markerhtml += "<strong>Gender:</strong> " + objVictimdata[i].gender + "<br>";
                         markerhtml += "<strong>Cause:</strong> " + objVictimdata[i].cause + "<br><br>";
                         console.log(markerhtml);

                     }//end for
                    console.log(markerhtml);

                    var image = new google.maps.MarkerImage('http://labs.google.com/ridefinder/images/mm_20_green.png',
                    new google.maps.Size(12, 20),
                    new google.maps.Point(0,0),
                    new google.maps.Point(6, 20));

                    var marker = new google.maps.Marker({
                      position: point,
                      map: map,
                      icon: image
                    });

                    var infoWindow = new google.maps.InfoWindow(); //initialize infoWindow
                      // Add a click event to each marker which will open the HTML window
                    marker.infowindow = new google.maps.InfoWindow({
                      content: markerhtml
                    });

                    google.maps.event.addListener(marker, "click", function() {
                        marker.infowindow.open(map, marker);
                    });

            })//end post

};//end create marker 
```

# java - Struts2 - 使用另一个会话对象作为键检索会话对象

> ID：10758518
> 
> 赞同：3
> 
> 时间：2012-05-25T17:00:15.940
> 
> 标签：java, javascript, jsp, struts2

我是 struts2 的新手，我正在尝试使用动态会话密钥检索会话对象。

我的应用流程是这样的：用户将从他们的浏览器中点击操作

```
http://localhost:8080/prjcr/pad.action?userid=p02585@test.org 
```

在操作类中，我使用 p02585@test.org 请求参数从 Web 服务中检索值列表，并将它们存储在会话中，如下所示：

```
//get the request parameter
userid=ServletActionContext.getRequest().getParameter("userid);    
QDefn[] qDefn = proxy.getQDefns(userid); //webservice call   
List<QDefn> qdList = new ArrayList<QDefn>();   
qdList.add(Arrays.asList(qDefn)); 
```

提取请求参数的用户标识部分以用作会话密钥

```
userid = userid.substring("UserId", userid.substring(0, userid.indexof('@'));   
//The key itself is what we receive in the request parameter  
ActionContext.getContext().getSession().put("UserId", userid); 
```

然后将相关的值列表推送到会话中

```
ActionContext.getContext().getSession().put(userid, qdList); 
```

并转发到一个 JSP，该 JSP 在选择下拉列表中显示此列表，如下所示：

```
<s:select name="qdefn" 
id="qdefn" 

list="#session.%{#session.UserId}"  ---What is the notation here??

listKey="defnName"
listValue="defnName"
headerKey="ALLQD"
headerValue="All" > </s:select> 
```

我尝试使用动态会话密钥（即用户 ID）从 jsp 中的会话中提取 qdList。在 java 中，我们将其作为 session.get(userid) 进行。我还不能理解 OGNL 符号。所以，我不知道如何在 Struts2/OGNL 中做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:42:37.420

如果你做一个

```
System.out.println(ActionContext.getContext().getSession().getClass()); 
```

在您的操作中，您将获得“class org.apache.struts2.dispatcher.SessionMap”，但如果您执行

```
out.println(session.getClass()); 
```

在你的jsp中你会得到'class org.apache.catalina.session.StandardSessionFacade'或类似的东西（我使用tomcat）

所以试试

```
session.getAttribute(userid); 
```

代替

```
session.get(userid); 
```

# sql - 在 Oracle 中使用 IN 运算符进行外部联接的解决方法

> ID：10758526
> 
> 赞同：4
> 
> 时间：2012-05-25T17:00:51.260
> 
> 标签：sql, oracle, outer-join

我使用的是 Oracle SQL，所以外连接有很好的 (+) 语法。我应该警告你，我不允许重新设计数据库；我为一个大型组织工作。

以下是一些示例表：

```
People
PersonID   Name
1          Elmo
2          Oscar
3          Chris

Attribute
PersonID   Attribute
1          Happy
1          Muppet
1          Popular
2          Grouchy
2          Muppet
2          Popular
3          Programmer 
```

我想要一个人的名单，我想知道我们是否知道他们是快乐的还是不高兴的。以下是我想要的输出：

```
Name       Mood
Elmo       Happy
Oscar      Grouchy
Chris 
```

所以这是我认为我会使用的查询：

```
SELECT p.Name, a.Attribute
FROM People p, Attributes a
WHERE p.PersonID = a.PersonID (+)
AND ( a.Attribute (+) = 'Happy'
   OR a.Attribute (+) = 'Grouchy' ) 
```

（也许我必须输入“OR a.Attribute IS NULL”之类的东西。）

但实际上我根本不允许在外连接中使用 OR！我应该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T17:17:51.643

首先，为什么你不能使用正确`OUTER JOIN`的 s?，你可以在 Oracle 中使用它们，而不必使用`(+)`语法进行隐式连接。至于您的问题，您可以使用`IN`：

```
SELECT p.Name, a.Attribute
FROM People p
LEFT OUTER JOIN Attributes a
ON p.PersonID = a.PersonID AND a.Attribute IN ('Happy','Grouchy') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-23T16:57:33.023

如果您真的了解“正确”Oracle 数据库的 Oracle SQL 语法，您也可以这样做...

```
SELECT p.Name,
       a.Attribute
  FROM people p,
       (SELECT PersonID,
               Attribute
          FROM attributes
              WHERE Attribute = 'Happy'
              OR Attribute = 'Grouchy') a
  WHERE p.personid = a.personid(+) 
```

关键是 ANSI 与 Oracle 语法是一个荒谬的评论。Oracle 支持这两种方式，无论哪种方式对您来说更容易/更好/易于管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:27:45.163

很抱歉回答我自己的问题。为了避免 ORA-01719 错误，我根据@Lamak 的建议将所有内容更改为“正确”连接，然后采用此解决方案：

```
SELECT p.Name, a.Attribute
FROM People p
LEFT OUTER JOIN  (SELECT PersonID, Attribute
                  FROM Attributes
                  WHERE Attribute = 'Happy' OR Attribute = 'Grouchy') a
ON (p.PersonID = a.PersonID) 
```

# c++ - 如何从 C++ 中的二进制文件中获取 utf-8 字符数？

> ID：10758529
> 
> 赞同：2
> 
> 时间：2012-05-25T17:01:05.843
> 
> 标签：c++, utf-8, binary

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:09:43.970

The byte sequence you're showing is the UTF-8 encoded version of the character.

You need to *decode* the UTF-8 to get to the Unicode code point.

For this exact sequence of bytes, the following bits make up the code point:

```
11100011 10000010 10100010
    ****   ******   ****** 
```

So, concatenating the asterisked bits we get the number `0011000010100010`, which equals 0x30a2 or 12450 in decimal.

See the [Wikipedia description](http://en.wikipedia.org/wiki/UTF-8#Description) for details on how to interpret the encoding.

In a nutshell: if bit 7 is set in the first byte, the number of adjacent bits (call it *m*) that are also set (2) gives the number of bytes that follow for this code point. The number of bits to extract from each byte is (8 - 1 - 1 - *m*) for the first byte, and 6 bits from each subsequent byte. So here we got (8 - 1 - 1 - 2) = 4 + 2 * 6 = 16 bits.

As pointed out in comments, there are plenty of libraries for this, so you might not need to implement it yourself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:15:08.550

working from the [wikipedia page](http://en.wikipedia.org/wiki/UTF-8), I came up with this:

```
unsigned utf8_to_codepoint(const char* ptr) {
    if( *ptr < 0x80) return *ptr;
    if( *ptr < 0xC0) throw unicode_error("invalid utf8 lead byte");
    unsigned result=0;
    int shift=0;
    if( *ptr < 0xE0) {result=*ptr&0x1F; shift=1;}
    if( *ptr < 0xF0) {result=*ptr&0x0F; shift=2;}
    if( *ptr < 0xF8) {result=*ptr&0x07; shift=3;}
    for(; shift>0; --shift) {
        ++ptr;
        if (*ptr<0x7F || *ptr>=0xC0) 
            throw unicode_error("invalid utf8 continuation byte");
        result <<= 6;
        result |= *ptr&0x6F;
    }
    return result;
} 
```

Note that this is a very poor implementation (I highly doubt it even compiles), and parses a lot of invalid values that it probably shouldn't. I put this up merely to show that it's a lot harder than you'd think, and that you should use a good unicode library.

# regex - 使用用户变量和正则表达式的 Jmeter 断言

> ID：10758531
> 
> 赞同：0
> 
> 时间：2012-05-25T17:01:17.107
> 
> 标签：regex, jmeter

我正在使用 jmeter 运行一系列 Web 服务测试，并且遇到了一些关于断言的问题。基本上在我的一个请求中，需要指定错误分类（变量 ${CLASS} ），并且该请求应该返回有关具有该指定错误的订阅者和设备的信息。我想断言与其他信息一起返回的分类永远不是输入的内容。即分类=“${CLASS}”。我很确定我想在断言中使用 RegEx 和 jmeter 的“不包含”选项来实现这一点，但我不太确定如何让它工作。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T00:27:57.003

根据您的评论，我建议使用多个断言。如果您有多个断言，则父请求只有在所有断言都通过时才会通过，只要任何一个断言返回失败状态，它就会失败。

例如。如果找到“次要”，您可以有一个返回通过状态，然后如果没有找到“主要”，则返回通过状态。您可以通过选择模式匹配规则包含且未选中复选框来指定断言如果找到文本，则断言将失败，然后简单地将您不希望出现的文本作为要测试的模式包含在内。

您还可以在同一个断言中包含多个文本字符串，但是像这样它们都将使用相同的范围和模式匹配规则。

# events - 在验收测试中，我如何知道我的异步事件何时发生？

> ID：10758533
> 
> 赞同：0
> 
> 时间：2012-05-25T17:01:26.033
> 
> 标签：events, node.js, cucumber, acceptance-testing

所以这就是问题所在 - 我有一个系统，当事件发生时，它会触发一系列不同的异步代码（某些代码甚至会触发更多事件）。

现在在验收测试期间，我触发了相同的事件 - 但是应该使用什么策略来通知测试运行者所有后续事件都已完成并准备好进入下一步？

我开始只是等待固定的时间 - 但我一直只是一个软糖。现在，我正在关注尾部事件，并在它们全部完成后继续前进。但我可以看到随着系统的增长，这变得越来越复杂。

只是想知道是否有我错过的替代策略。有什么建议么？

FWIW 我正在使用[cucumber.js](http://cucumber.no.de/)和[僵尸](https://github.com/assaf/zombie)来测试[node.js上的](http://nodejs.org/)[快速](http://expressjs.com)应用程序。

干杯并感谢您的时间，

戈登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:40:36.263

显然，解决方案会因应用程序而异，但我发现以这样一种方式构建我的应用程序很有帮助，即顶层异步函数的回调一直被跟踪到最后。完成所有顶级回调后，您可以触发一些事件或调用一些回调来指示一切都结束了。使用类似[async 的`parallel`](https://github.com/caolan/async#parallel)东西，你可能会做这样的事情：

```
eventEmitter.on('someEvent', function(some, data, callback) {
  async.parallel([
    function(cb) { firstAsyncThing(some, cb); },
    function(cb) { secondAsyncThing(data, cb); }
  ], function(err, results) {
    // called when all functions passed in the array have their `cb` called
    callback(err, results);
  });
}); 
```

因此，您可以将回调传递给您的事件：

```
eventEmitter.emit('someEvent', 'some', 'data', function(error, results) {
  // the event has been fully handled
}); 
```

# c# - 通过代码配置 NServiceBus

> ID：10758536
> 
> 赞同：0
> 
> 时间：2012-05-25T17:01:37.763
> 
> 标签：c#, nservicebus

我正在尝试创建一个发布订阅外观，它在内部使用 NServiceBus 来实现 PubSub 功能。我在使用 NServiceBus 时遇到的问题之一是很多配置都是通过接口完成的。例如，发布者将实现 IWantToRunAtStartup。该发布者的端点将实现 IConfigureThisEndpoint 和 AsA_Publisher。

这是一个非常酷的特性，“流利”并且使代码易于阅读和理解。

但这使得创建立面变得困难。例如，实现 IWantToRunAtStartup 的基类将要求所有超类引用 NServiceBus.Host。

当然，需要引用 NServiceBus 完全打破了拥有外观的想法。在那一点上，立面的意义何在？

NServiceBus 是否可以将类型配置为不使用接口技术的端点、发布者、订阅者和消息？如果是这样，有人可以向我指出该文档（或者，甚至更好的示例？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:49:33.687

设置发布/订阅不需要接口 IConfigureThisEndpoint、AsA_Publisher 和 IWantToRunAtStartup。

如果您没有在 NServiceBus.Host.exe 中托管您的端点，您需要做的就是告诉 NServiceBus 它应该如何存储订阅 - 在内存中、使用 msmq、关系数据库或在 RavenDB 中。只需选择适当的方法作为 Configure.With()... 初始化代码的一部分。

从 3.0 版开始，NServiceBus 支持定义对 NServiceBus 没有任何依赖关系的消息类型 -​​ 请参阅[http://docs.particular.net/nservicebus/messaging/unobtrusive-mode](http://docs.particular.net/nservicebus/messaging/unobtrusive-mode)

在任何情况下，订阅者中将处理发布的事件的代码都需要实现 NServiceBus 接口 IHandleMessages。

一般来说，我会说 NServiceBus 在理念上与其他服务总线有足够的不同，无论有没有门面，从一个服务总线移动到另一个服务总线都不会容易得多。

# php - 用于函数输出的 PHP 插值字符串

> ID：10758537
> 
> 赞同：24
> 
> 时间：2012-05-25T17:01:39.807
> 
> 标签：php, string, string-interpolation

PHP 支持在双引号字符串中进行[变量插值](https://en.wikipedia.org/wiki/String_interpolation)，例如，

```
$s = "foo $bar"; 
```

但是是否可以在双引号字符串中插入函数调用结果？

例如，

```
$s = "foo {bar()}"; 
```

类似的东西？这似乎不可能，对吧？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-14T13:21:33.167

正如[Overv 的回答](https://stackoverflow.com/questions/10758537/php-interpolating-string-for-function-output/10758569#10758569)所表明的那样，使用字符串到函数名调用技术是绝对可能的。在许多琐碎的替换情况下，它的阅读效果远好于替代语法，例如

```
"<input value='<?php echo 1 + 1 + foo() / bar(); ?>' />" 
```

您需要一个变量，因为解析器希望 $ 存在。

这就是身份转换作为句法技巧发挥作用的地方。只需声明一个标识函数，并将名称分配给范围内的变量：

```
function identity($arg){return $arg;}
$interpolate = "identity"; 
```

然后您可以将任何有效的 PHP 表达式作为函数参数传递：

```
"<input value='{$interpolate(1 + 1 + foo() / bar() )}' />" 
```

好处是可以消除*很多*琐碎的局部变量和[回显](https://www.php.net/manual/en/function.echo.php)语句。

缺点是 $interpolate 变量超出了范围，因此您必须在函数和方法内部反复声明它是全局的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T17:05:01.817

PHP 中的双引号功能不会评估 PHP 代码，它只是将变量替换为它们的值。如果您想实际动态评估 PHP 代码（非常危险），您应该使用`eval`：

```
eval( "function foo() { bar() }" ); 
```

或者，如果您只想创建一个函数：

```
$foo = create_function( "", "bar()" );
$foo(); 
```

只有在没有其他选择的情况下才使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-02T21:51:38.927

除非绝对需要插值（请评论并告诉我原因），否则将函数输出与字符串连接起来。

```
$s =  "foo " . bar(); 
```

资料来源：*[1.8。在字符串中插入函数和表达式](http://docstore.mik.ua/orelly/webprog/pcook/ch01_08.htm)*

# php - PHP 未定义的数组索引。为什么？

> ID：10758544
> 
> 赞同：9
> 
> 时间：2012-05-25T17:02:24.753
> 
> 标签：php, arrays

这是……我什至不知道这是怎么回事。

```
// var_dump of items before
object(stdClass)[84]
   public '75' => object(stdClass)[87]

$items = (array) $items; // Casting unserialized stdClass to array
var_dump($items);

//Result of var dump:
array
  '75' => 
    object(stdClass)[87]

//Now lets get this item:
var_dump($items[75]); // Error
var_dump($items['75']); // Error 
```

什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:15:37.617

我认为，您使用的是调试扩展，因此`var_dump()`输出与标准库不同，属性不能是数字但`$obj->{'75'}`没关系。如果您可以通过“是”到达子对象，则`$items->{'75'}`您有一个数字属性。否则您可以尝试`print_r($items);`查看原始输出，或者在之后检查数组`get_object_vars()`

```
 <?php

$items = new stdClass();
$items->{'75'} = new stdClass();
$items->{'75'}->{'85'} = new stdClass();

$items = (array) $items; // Casting unserialized stdClass to array
$items_array = get_object_vars($items); // getting object vars as an array.

var_dump($items["75"]); // Error
var_dump($items['75']); // Error
var_dump($items_array['75']); // Works 
```

PHP 问题： [#45959](https://bugs.php.net/bug.php?id=45959)

阅读铸造块引用：[http ://www.php.net/manual/en/language.types.array.php#language.types.array.casting](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:24:37.707

投射到数组不是那样工作的。

请参见此处：[get_object_vars() 与强制转换为数组](https://stackoverflow.com/questions/2512212/get-object-vars-vs-cast-to-array)

在这里：[http ://www.php.net/manual/en/language.types.array.php#language.types.array.casting](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting)

> Blockquote “如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名称，但有一些值得注意的例外：整数属性不可访问；私有变量的类名前缀为变量名；受保护的变量在变量名前有一个“*”。这些前置值的两边都有空字节。

# c++ - 部分接收来自套接字 C++ 的数据包

> ID：10758547
> 
> 赞同：1
> 
> 时间：2012-05-25T17:02:59.967
> 
> 标签：c++, sockets, network-programming, packet

我遇到了麻烦，我的服务器应用程序发送了 8 字节长度的数据包 -`AABBCC1122334455`但我的应用程序分两部分接收此数据包，`AABBCC1122`并且`334455`通过“recv”功能，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T17:55:39.073

总结一点：

1.  TCP 连接不适用于应用程序级别的数据包或消息，您正在处理*字节流*。从这个角度来看，它类似于从文件中写入和读取。
2.  两者`send`和`recv`都可以发送和接收比参数中提供的更少的数据。您必须正确处理它（通常通过在调用周围应用适当的循环）。
3.  在处理流时，您必须找到将其转换为应用程序中有意义的数据的方法。换句话说，你必须设计*序列化协议*。

从您已经提到的内容来看，您很可能想要发送某种消息（嗯，这通常是人们所做的）。关键是要正确发现消息的边界。如果您的消息是固定大小的，您只需从流中获取相同数量的数据并将其转换为您的消息；否则，您需要一种不同的方法：

*   如果你能想出一个在你的消息中不存在的字符，它可能是你的分隔符。然后，您可以阅读流，直到您到达角色，这将是您的消息。如果您传输 ASCII 字符（字符串），您可以使用零作为分隔符。

*   如果您传输二进制数据（原始整数等），所有字符都可以出现在您的消息中，因此没有任何内容可以充当分隔符。在这种情况下，最常见的方法可能是使用包含消息大小的固定大小前缀。这个额外字段的大小取决于消息的最大大小（使用 4 个字节可能是安全的，但如果您知道最大大小是多少，则可以使用较小的值）。然后您的数据包看起来像`SSSS|PPPPPPPPP...`（字节流），其中`S`是附加大小字段，并且`P`是您的有效负载（应用程序中的真实消息，`P`字节数由 的值确定`S`）。您知道每个数据包都以 4 个特殊字节开头（`S`字节），因此您可以将它们读取为 32 位整数。一旦知道封装消息的大小，就可以读取所有`P`字节。处理完一个数据包后，您就可以从套接字读取另一个数据包了。

不过好消息是，你可以想出一些完全不同的东西。您只需要知道如何从字节流中反序列化您的消息以及如何`send`/`recv`行为。祝你好运！

**编辑：**

将任意数量的字节接收到数组中的函数示例：

```
bool recv_full(int sock, char *buffer, size_t size)
{
  size_t received = 0;
  while (received < size)
  {
    ssize_t r = recv(sock, buffer + received, size - received, 0);
    if (r <= 0) break;
    received += r;
  }

  return received == size;
} 
```

以及接收具有 2 字节前缀定义有效负载大小的数据包的示例（有效负载大小限制为 65kB）：

```
uint16_t msgSize = 0;
char msg[0xffff];

if (recv_full(sock, reinterpret_cast<char *>(&msgSize), sizeof(msgSize)) &&
    recv_full(sock, msg, msgSize))
{
  // Got the message in msg array
}
else
{
  // Something bad happened to the connection
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:06:17.340

这就是`recv()`在大多数平台上的工作方式。您必须检查收到的字节数并继续循环调用它，直到获得所需的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T17:09:28.703

***您可以通过在循环中***从 TCP 套接字读取来“修复”该问题，直到您获得足够的字节以对您的应用程序有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:10:05.360

> 我的服务器应用程序发送 8 字节长度的数据包

并不真地。您的服务器发送 8 个单独的字节，而不是 8 个字节长的数据包。TCP 数据通过字节流而不是数据包流发送。TCP 既不尊重也不维护您可能想到的任何“数据包”边界。

如果您知道您的数据是以 N 字节的数量提供的，则`recv`在循环中调用：

```
std::vector<char> read_packet(int N) {
  std::vector buffer(N); 
  int total = 0, count;
  while ( total < N && (count = recv(sock_fd, &buffer[N], N-total, 0)) > 0 )
    total  += count;
  return buffer;
}

    std::vector<char> packet = read_packet(8); 
```

如果您的数据包是可变长度的，请尝试在数据本身之前发送它：

```
int read_int() {
  std::vector<char> buffer = read_packet(sizeof (int));
  int result;
  memcpy((void*)&result, (void*)&buffer[0], sizeof(int));
  return result;
}

  int length = read_int();
  std::vector<char> data = read_buffer(length); 
```

# xml - 如何加载 xml 数据并在 AS3 中跨多个帧呈现

> ID：10758550
> 
> 赞同：0
> 
> 时间：2012-05-25T17:03:25.720
> 
> 标签：xml, actionscript-3, flash

我正在尝试从 xml 文件加载数据，将它们加载到数组中，并在动态文本字段的不同框架中显示这些数组中的单词。例如，WordArray[0] 将在 DynText 文本字段中显示两个帧。在此演示之后，WordArray[1] 将在同一文本字段中显示四帧，然后 KeyWordArray[0] 将在同一文本字段中显示一帧，依此类推。

这是我到目前为止的代码：

```
var xmlLoader:URLLoader = new URLLoader();
var xmlData:XML = new XML();
xmlLoader.addEventListener(Event.COMPLETE, LoadXML);
xmlLoader.load(new URLRequest("file2.xml"));

function LoadXML(e:Event):void {
xmlData = new XML(e.target.data);
ParsePass(xmlData);
}

var WordArray:Array = new Array();
var KeyWordArray:Array = new Array();

function ParsePass(passInput:XML):void {
var WordAll:XMLList = passInput.Pass.Word.text();
var PrimeAll:XMLList = passInput.Pass.Keyword.text();

for (var i in WordAll) {
    WordArray.push(WordAll[i]);
}
for (var p in PrimeAll) {
    KeyWordArray.push(PrimeAll[p]);
}

} 
```

我能够加载 xml 数据，将其放入数组中，并使用以下方法在动态文本字段的第一帧中显示 WordArray[0]：

```
DynText.text = WordArray[0]; 
```

但不在其他框架中。我试图在 ParsePass 函数中调用函数，但它似乎不起作用。如果这是一个基本问题，我很抱歉。我是 AS3 的新手。但我在网上搜索并没有找到任何与我的问题相关的答案。因此，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:36:01.383

在此处阅读有关解析 XML 的信息：[XML 基础知识](http://www.republicofcode.com/tutorials/flash/as3xml/)

要在帧上添加各种数据，请尝试使用[addFrameScript();](http://troyworks.com/blog/2007/09/22/as3-movieclipaddframescript/)

您可以将代码添加到特定框架以将数据加载到位于该框架上的容器中。或者另一种解决方案是在所有帧上使用相同的容器，但根据帧号动态加载数据。

编辑：

```
MyMC.addEventListener(Event.ENTER_FRAME, OnEnterFrameHandler);
function OnEnterFrameHandler(e:Event):void
{
   switch(e.target.currentFrame)
   {
       case 1: TextBox.text = WordArray[0];
               break;
       case 3: TextBox.text = WordArray[1];
               break;
       case 5: TextBox.text = WordArray[2];
               break;
   }
} 
```

另请注意，在 Flash 中，帧枚举从 1 开始，并确保使用 stop() 方法在所需帧上停止 MovieClip。

# sql - SQL Insert Into Exists - 向现有表添加外键

> ID：10758553
> 
> 赞同：1
> 
> 时间：2012-05-25T17:03:40.527
> 
> 标签：sql, insert, exists

我正在尝试将一个表中的键添加到另一个表中，以便创建一对多关系。我要添加外键的表当前包含员工的名字和姓氏，但没有 ID。我想根据他们的名字和姓氏查询员工表以找到ID，然后将其添加到伤害表中。

我不断收到以下错误：

```
The multi-part identifier "InjuryOLD.FirstName" could not be bound.
The multi-part identifier "dbo.InjuryOLD.LastName" could not be bound. 
```

下面是 SQL 语句：

```
Insert into dbo.InjuryOLD(dbo.InjuryOLD.EmpID)
Select dbo.EmployeeInformation.EmpID
From EmployeeInformation
Where exists(select dbo.EmployeeInformation.EmpID from dbo.EmployeeInformation
             where dbo.EmployeeInformation.FirstName = dbo.InjuryOLD.FirstName 
             and dbo.EmployeeInformation.LastName = dbo.InjuryOLD.LastName) 
```

我确保我引用的表和列没有错字，而且我知道两个员工可能有相同的名字。但是，在这种情况下并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:19:02.653

语句应始终独立工作的`SELECT`部分`INSERT`

所以...

```
Select dbo.EmployeeInformation.EmpID
From EmployeeInformation
Where exists(select dbo.EmployeeInformation.EmpID from dbo.EmployeeInformation
             where dbo.EmployeeInformation.FirstName = dbo.InjuryOLD.FirstName 
             and dbo.EmployeeInformation.LastName = dbo.InjuryOLD.LastName) 
```

...不起作用，因为`dbo.InjuryOLD`在任何 FROM 子句中都没有引用。您可能打算将`dbo.InjuryOLD`Exists 子查询的 from 子句放入，而不是重复`EmployeeInformation`

```
Select dbo.EmployeeInformation.EmpID
From EmployeeInformation
Where exists(select 1 from dbo.InjuryOLD  
             where
                 dbo.EmployeeInformation.FirstName = dbo.InjuryOLD.FirstName 
                 and dbo.EmployeeInformation.LastName = dbo.InjuryOLD.LastName) 
```

# windows-services - 卸载时自动停止 Windows 服务

> ID：10758554
> 
> 赞同：2
> 
> 时间：2012-05-25T17:03:42.973
> 
> 标签：windows-services, servicecontroller

安装我的服务后，我有一个处理程序，它在安装后启动服务。

```
private void InitializeComponent()
{
    ...
    this.VDMServiceInstaller.AfterInstall += ServiceInstaller_AfterInstall;
}

private void ServiceInstaller_AfterInstall(object sender, InstallEventArgs e)
{
    ServiceController sc = new ServiceController("MyService");
    sc.Start();
} 
```

我想在卸载之前停止服务，所以我向 InitializeComponent() 添加了一个额外的处理程序。

```
this.ServiceInstaller.BeforeUninstall += ServiceInstaller_BeforeUninstall; 
```

并添加了功能：

```
private void ServiceInstaller_BeforeUninstall(object sender, InstallEventArgs e)
{
    try
    {
        ServiceController sc = new ServiceController("MyService");
        if (sc.CanStop)
        {
            sc.Stop();
            sc.WaitForStatus(System.ServiceProcess.ServiceControllerStatus.Stopped);
        }
    }
    catch (Exception exception)
    {}
} 
```

但是该服务在卸载之前不会停止。我是否不正确地使用了 ServiceController.Stop() 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:28:30.780

下面的内容对您有帮助吗：

```
 protected override void OnBeforeUninstall(IDictionary savedState)
    {
       ServiceController controller = new ServiceController("ServiceName");

       try
       {

          if(controller.Status == ServiceControllerStatus.Running | controller.Status == ServiceControllerStatus.Paused)
          {
             controller.stop();
          }
          controller.WaitForStatus(ServiceControllerStatus.Stopped, new TimeSpan(0,0,0,15));

          controller.Close();
       }
       catch(Exception ex)
       { 
          EventLog log = new EventLog();
          log.WriteEntry("Service failed to stop");
       }

       finally
       {
          base.OnBeforeUninstall(savedState);
       }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T15:44:57.707

这是我试图阻止的窗口：

![锁定文件对话框](../Images/9abf33926973639c844e33347688a221.png)

我已经测试了所有可用的覆盖，在提示关闭应用程序的对话框出现之前，它们都没有被执行。

甚至类构造函数还不够早。

我的结论是，就像安装程序项目一样，您不能在对话框之前通过代码停止服务。

由于没有其他方法可以在项目中执行代码，因此我看不到任何方法可以实现这一点。

我真的很希望它有所不同，因为我自己非常需要这个，但是安装程序项目中没有任何可用的“钩子”，可以尽早进入以解决问题。

* * *

我最好的建议是制作两个安装程序。

一个充当第二个安装程序的包装器，并且在安装时只是正常启动第二个安装程序。

但是在卸载时，它首先停止服务，然后卸载第二个。

但这对我来说太过分了，所以我没有进一步探索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-04T14:50:27.347

我想做类似的事情，并最终在我的安装程序项目中使用此代码来处理触发 BeforeUninstall 事件时：

```
private void SessionLoginMonitorInstaller_BeforeUninstall(object sender, InstallEventArgs e)
{
    try
    {
        using (ServiceController sv = new ServiceController(SessionLoginMonitorInstaller.ServiceName))
        {
            if(sv.Status != ServiceControllerStatus.Stopped)
            {
                sv.Stop();
                sv.WaitForStatus(ServiceControllerStatus.Stopped);
            }
        }
    }
    catch(Exception ex)
    {
        EventLog.WriteEntry("Logon Monitor Service", ex.Message, EventLogEntryType.Warning);
    }
} 
```

该项目的自定义操作部分还具有卸载我的 Windows 服务项目的主要输出的操作。这对我有用，并且每次我测试它时都给了我一个干净的卸载。

# java - java.lang.NoSuchMethodError：javax.servlet.http.HttpServletRequest.startAsync

> ID：10758555
> 
> 赞同：6
> 
> 时间：2012-05-25T17:03:50.850
> 
> 标签：java, jetty, servlet-3.0

知道为什么我在运行时会收到此错误吗？我正在尝试在 Jetty 上部署 AsyncServlet。

```
java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.startAsync(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)Ljavax/servlet/AsyncContext;
        at my.server.SlowServlet.doGet(SlowServlet.java:16)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:705)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:814)
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:547)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:480)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:520)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:941)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:409)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:875)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
        at org.eclipse.jetty.server.Server.handle(Server.java:345)
        at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
        at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:919)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:582)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:218)
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:51)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
        at java.lang.Thread.run(Thread.java:680) 
```

我的 pom.xml 中有以下 Maven 依赖项

```
 <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-server</artifactId>
        <version>${jettyVersion}</version>
    </dependency>

    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-servlet</artifactId>
        <version>${jettyVersion}</version>
    </dependency>

    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-servlets</artifactId>
        <version>${jettyVersion}</version>
    </dependency>

    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-webapp</artifactId>
        <version>${jettyVersion}</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T17:10:04.997

我猜您的服务器使用了错误版本的 Servlet 规范。AsyncContext 仅从 Servlet 规范 v 3.0 开始可用。您的开发环境中可能有正确的版本，但是您的服务器使用了过时的 api 版本，因此在运行时出现错误。

# c# - Microsoft 插件框架与 OSGi？

> ID：10758561
> 
> 赞同：5
> 
> 时间：2012-05-25T17:04:31.573
> 
> 标签：c#, java, osgi, mef, maf

MAF 与 OSGi 相比如何？

MAF 不是我能轻易找到的东西，我想知道为什么人们不像 MEF 那样推荐它？它似乎类似于 OSGi，至少从我的第一眼看是这样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T10:43:20.330

除了明显的区别：

**MAF**

*   由微软驱动，因此是专有的
*   语言是 C#

**操作系统**

*   由财团驱动，开放
*   语言是Java

还有很多功能上的差异。例如，MAF 更多的是关于主机<->插件架构，其中您有一个主主机，并且插件为其提供了附加功能；而 OSGi 提供了一个框架，其中模块不仅与一个中央单元对话，而且还与彼此对话。

为 MAF 编写插件非常繁重 - 您必须提供 7 个部分 - 主机、主机视图、主机适配器、合同、插件适配器、插件视图、插件 - 才能完成整个工作。使用 OSGi，您只需一个普通的 Java JAR 文件和一个清单文件，您可以在其中声明依赖关系，并且还可以选择提供用于处理 IoC 的标头（如果您更喜欢使用控制反转模式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:11:46.260

它类似于 OSGi。当然，存在一些差异，因为 MAF 利用 AppDomains，AFAIK 没有 Java 等效项（IIRC OSGi 使用子 JVM）。它存在一些问题——微软没有大力推广它，这可能解释了社区缺乏兴趣的原因。

我唯一真正的抱怨是，它要求您以相当严格的方式构建项目，使宿主程序集和托管程序集都有些“MAF-aware”。它确实有效，尽管我不确定那里有很多东西不能由一个好的开发人员在相对较短的时间内自行开发。

# awk - 是否可以在不指定索引的情况下将项目附加到 awk 中的数组？

> ID：10758564
> 
> 赞同：24
> 
> 时间：2012-05-25T17:04:43.380
> 
> 标签：awk, gawk

我意识到 awk 具有关联数组，但我想知道是否有与此等效的 awk：

[http://php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)

显而易见的解决方法就是说：

```
array[$new_element] = $new_element 
```

然而，这似乎比它需要的可读性更差，更骇人听闻。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-25T18:08:57.617

我认为 awk 中不会立即提供数组长度（至少在我摆弄的版本中不会）。但是您可以简单地保持长度，然后执行以下操作：

```
array[arraylen++] = $0; 
```

然后通过相同的整数值访问它的元素：

```
for ( i = 0; i < arraylen; i++ )
   print array[i]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-25T18:11:15.530

您可以在`gawk`其中找到数组的长度，`length(var)`因此编写自己的函数并不难。

```
function push(A,B) { A[length(A)+1] = B } 
```

不过请注意这个讨论：http: [//objectmix.com/awk/361598-gawk-length-array-question.html——](http://objectmix.com/awk/361598-gawk-length-array-question.html)我现在可以访问的所有地方都有 gawk 3.1.5，所以我无法正确测试我的功能，呃。但这里是一个近似值。

```
vnix$ gawk '# BEGIN: make sure arr is an array
>   BEGIN { delete arr[0] }
>   { print "=" length(arr); arr[length(arr)+1] = $1;
>     print length(arr), arr[length(arr)] }
>   END { print "---";
>     for (i=1; i<=length(arr); ++i) print i, arr[i] }' <<HERE
> fnord foo
> ick bar
> baz quux
> HERE
=0
1 fnord
=1
2 ick
=2
3 baz
---
1 fnord
2 ick
3 baz 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-29T06:32:25.953

正如其他人所说，awk 没有提供这样的开箱即用功能。您的“hackish”解决方法可能适用于某些数据集，但不适用于其他数据集。考虑您可能会添加两次相同的数组值，并希望它在数组中表示两次。

```
$ echo 3 | awk 'BEGIN{ a[1]=5; a[2]=12; a[3]=2 }
>   { a[$1] = $1 }
>   END {print length(a) " - " a[3]}'
3 - 3 
```

最好的解决方案可能是数组中的数据，但这里有一些想法。

首先，如果您确定您的索引将始终为数字，始终从 1 开始，并且您永远不会删除数组元素，那么 Triplee 的建议`A[length(A)+1]="value"`可能对您有用。但是，如果您确实删除了一个元素，那么您的下一次写入可能会覆盖您的最后一个元素。

**如果您的索引无关紧要**，并且您不担心长键会浪费空间，则可以使用足够长的随机数来减少冲突的可能性。一个快速而肮脏的选择可能是：

```
srand()
a[rand() rand() rand()]="value" 
```

记住使用`srand()`更好的随机化，不要相信`rand()`产生实际的随机数。从很多方面来看，这并不是一个完美的解决方案，但它的优点是只需一行代码。

**如果您的键是数字但可能是 sparse**，例如会破坏三元组解决方案的示例，您可以在 push 函数中添加一个小搜索：

```
function push (a, v,     n) {
  n=length(a)+1
  while (n in a) n++
  a[n]=v
} 
```

while 循环确保您将分配一个未使用的索引。此函数还与使用非数字索引的数组兼容——它*分配*数字键，但它不关心已经存在的内容。

请注意，awk 不保证数组中元素的顺序，因此您将“将项目推到数组末尾”的想法是错误的。您将*将此*元素添加到数组中，但不能保证当您使用`for`循环单步执行时它会出现在最后。

```
$ cat a
#!/usr/bin/awk -f

function push (a, v,     n) {
  n=length(a)+1
  while (n in a) n++
  a[n]=v
}

{
  push(a, $0)
}

END {
  print "length=" length(a)
  for(i in a) print i " - " a[i]
}

$ printf '3\nfour\ncinq\n' | ./a
length=3
2 - four
3 - cinq
1 - 3 
```

# java - 我们可以使用 DOM 解析器在现有 xml 文件的特定位置添加元素吗？

> ID：10758565
> 
> 赞同：1
> 
> 时间：2012-05-25T17:04:44.347
> 
> 标签：java, xml-parsing

我是 DOM 解析的新手，他们需要使用 DOM 解析器在现有 xml 文件中的特定位置添加元素。我们将从属性文件中获取要添加的位置和元素名称，如图所示

```
abc.properties

3 = X
4 = Y
6 = Z 
```

添加X，Xchild，Y和Z元素后的输出xml文件，如图

```
 demo.xml  

 <root>
   <A>text</A>
   <B>text</B>
   <X>
      <Xchild>text</Xchild>
   </X>
   <Y>text</Y>
   <C>text</C>
   <Z>text</Z>
 </root> 
```

请建议我我们该怎么做。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T18:09:34.917

这是您可以执行的操作的示例：

```
import java.io.IOException;
import org.w3c.dom.*;
import org.xml.sax.SAXException;
import javax.xml.parsers.*;
import javax.xml.xpath.*;

import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.dom.DOMSource; 
import javax.xml.transform.stream.StreamResult;

public class AddElementFromProp {

  public static void main(String[] args) 
   throws ParserConfigurationException, SAXException, IOException,
      XPathExpressionException, TransformerException, TransformerConfigurationException {

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true); 
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.parse("demo.xml");
    //The XPath part.
    XPathFactory xfactory = XPathFactory.newInstance();
    XPath xpath = xfactory.newXPath();

    Node result = (Node)xpath.evaluate("/root/*[position()='3']", doc, XPathConstants.NODE);
    Element toInsert = doc.createElement("X");
    result.getParentNode().insertBefore(toInsert, result);
    //////////////////////////////////////////////////////
    result = (Node)xpath.evaluate("/root/*[position()='4']", doc, XPathConstants.NODE);
    toInsert = doc.createElement("Y");
    Text txt = doc.createTextNode("text");
    toInsert.appendChild(txt);
    result.getParentNode().insertBefore(toInsert, result);
    //////////////////////////////////////////////////////
    result = (Node)xpath.evaluate("/root/*[position()='5']", doc, XPathConstants.NODE);
    toInsert = doc.createElement("Z");
    txt = doc.createTextNode("text");
    toInsert.appendChild(txt);
    result.getParentNode().appendChild(toInsert);
    ////////////////////////////////////////////////////////
    result = (Node)xpath.evaluate("/root/X", doc, XPathConstants.NODE); //If you know the name of the node
    //result = (Node)xpath.evaluate("/root/*[position()='3']", doc, XPathConstants.NODE);//If you know the position of the node
    toInsert = doc.createElement("xchild");
    txt = doc.createTextNode("text");
    toInsert.appendChild(txt);
    result.appendChild(toInsert);
    ////////////////////////////////////////////////////////
    // Write out the final xml file
    // Use a Transformer for output
    TransformerFactory tFactory = TransformerFactory.newInstance();
    Transformer transformer = tFactory.newTransformer();

    DOMSource source = new DOMSource(doc);
    StreamResult _result = new StreamResult("demo1.xml");
    transformer.transform(source, _result);
  }
} 
```

**注意**：这远非一个强大的解决方案（仅供您参考）。这里有一堆假设。没有进行任何程度的检查 - 例如特定位置是否已经存在元素？它是最后一个元素的位置吗？等等

输入：

```
<?xml version="1.0"?>
<root><A>text</A><B>text</B><C>text</C></root> 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<root><A>text</A><B>text</B><X><xchild>text</xchild></X><Y>text</Y><C>text</C><Z>text</Z>root> 
```

**更新：**添加了插入孙子的代码。

# combobox - ExtJS ComboBox - 防止默认选择操作

> ID：10758568
> 
> 赞同：0
> 
> 时间：2012-05-25T17:05:00.823
> 
> 标签：combobox, extjs4

我想阻止组合框的默认操作将其值设置为选择器中的选定项目。我只想查看选择器中的值，当我单击它们时，什么也没有发生。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T20:41:47.520

你可能想要这个：

```
Ext.create('Ext.form.ComboBox', {
    ...
    listeners: {
        beforeselect: function() {return false;}
    }
}); 
```

ExtJS 仍然在内部处理 DOM 单击并计算出您单击的记录（并且您在 beforeselect 处理程序中有对它的引用，请参阅[文档](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox-event-beforeselect)），但是在*beforeselect*事件处理程序中返回**false**将阻止选择记录和任何进一步的操作.

# android - Android 位置服务：我可以为 GPS 和网络位置使用单个位置侦听器吗？

> ID：10758572
> 
> 赞同：1
> 
> 时间：2012-05-25T17:05:15.937
> 
> 标签：android, geolocation, location, android-location

我是为网络位置和 gps 位置注册一个 locationlistener 对象，还是为每个位置创建一个单独的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:31:14.847

您可以为两者使用相同的侦听器。

当您获得`onLocationChanged()`or`onStatusChanged()`回调时，您可以检查传入参数（位置或提供者）以确定回调的来源（即：网络或 GPS）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:47:10.333

使用以下类检索位置。它将选择最佳提供者并返回纬度和经度：

```
 package com.test.location;

import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.Toast;

public class LocationPicker implements LocationListener, OnCancelListener{

private Context ctx;
private LocationManager locationMgr;
private boolean stopFlag;
private ProgressDialog dialog;

public LocationPicker(Context ctx) {
    this.ctx = ctx;
}

public void retrieveLocation() {

    String locCtx = Context.LOCATION_SERVICE; 

    locationMgr = (LocationManager) ctx.getSystemService(locCtx);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);

    String provider = locationMgr.getBestProvider(criteria, true);

    locationMgr.requestLocationUpdates(provider, 0, 0, this);

    Runnable showWaitDialog = new Runnable() {

        @Override
        public void run() {
            while (!stopFlag) {
                // Wait for first GPS Fix (do nothing until loc != null)
            }
            // After receiving first GPS Fix dismiss the Progress Dialog
            dialog.dismiss();
        }
    };

    dialog = ProgressDialog.show(ctx, "Please wait...", "Retrieving GPS data...", true);
    dialog.setCancelable(true);
    dialog.setOnCancelListener(this);
    Thread t = new Thread(showWaitDialog);
    t.start();
}

@Override
public void onLocationChanged(Location location) {
    if (location != null) {
        double latitude = location.getLatitude();
        double longitude = location.getLongitude();
        stopFlag = true;
        Toast.makeText(ctx, "Latitude : " + latitude + " Longitude : " + longitude , Toast.LENGTH_LONG).show();
    }
    locationMgr.removeUpdates(this);
}

@Override
public void onProviderDisabled(String provider) {
//  Toast.makeText(ctx, "GPS Disabled", Toast.LENGTH_LONG).show();
//
//  Intent intent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
//  ctx.startActivity(intent);
}

@Override
public void onProviderEnabled(String provider) {
//  Toast.makeText(ctx, "GPS Enabled", Toast.LENGTH_SHORT).show();
//
//  ctx.startActivity(new Intent(ctx, LocationPickerActivity.class));
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {

}

@Override
public void onCancel(DialogInterface dialog) {
    stopFlag = true;
    locationMgr.removeUpdates(this);
}
  } 
```

创建上述类后，只需调用下面的方法，它就会返回纬度和经度:::

```
 LocationPicker lp = new LocationPicker(this);
    lp.retrieveLocation(); 
```

注意：自定义位置侦听器还包含进度对话框。

# python - 用列的第一个值减去列的每个条目

> ID：10758574
> 
> 赞同：0
> 
> 时间：2012-05-25T17:05:17.810
> 
> 标签：python

我有一个包含 2 列的文件，例如：

```
13.245 cat
14.323 dog
16.246 pig 
```

我想用第一行的第一列值（这里是 13.245）减去第一列的每个条目，并将结果写入另一个具有修改值的文件，以便输出文件看起来：

```
0.000 cat
1.078 dog
3.001 pig 
```

我有一个非常粗略的解决方案。我将值 13.245 存储在一个变量中，然后拆分每一行，从 split()[0] 条目中减去 13.245 值，然后将该值和 split()[1] 值写入另一个由空格分隔的文件。我一行一行地做这件事。有没有像这样粗略的解决方案。我的意思是，没有将第一行条目的第一列存储到外部变量中，然后手动将整体写入另一个文件，有什么快速的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:21:37.660

```
data = """13.245 cat
14.323 dog
16.246 pig"""
parsed_data = [(float(x[0]), x[1]) for x in [x.split() for x in  data.splitlines()]]
subtract = parsed_data[0][0]
for (num, animal) in parsed_data:
    print "%.3f %s" % (num - subtract, animal) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:21:52.480

这可能是一种解决方案：

```
def process_line(line, first_value, outf):
    parts = line.strip().split(' ')
    parts[0] = '%.3f' % (float(parts[0]) - first_value)
    print >>outf, ' '.join(parts)

with open('in.txt') as inf, open('out.txt', 'w') as outf:
    first_line = inf.readline().strip()
    first_value = float(first_line.split(' ', 1)[0])
    process_line(first_line, first_value, outf)
    for line in inf:
        process_line(line, first_value, outf) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:19:43.010

```
with open(input_file, 'r') as infile, open(output_file, 'w') as outfile:
    first_line = infile.readline().split()
    first_val = float(first_line[0])
    outfile.write("%.3f %s\n" % (0, first_line[1]))

    for line in infile:
        first_col, second_col = line.split()
        outfile.write("%.3f %s\n" % (float(first_col) - first_val, second_col)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:25:27.470

你要求的东西不能更容易地完成。但这可能是你能做到的最短的。顺便问一下，哪个版本的 Python？这是给 3 的。

```
with open('<file_name>') as input_file, open('<output_file>', 'w') as output_file:
    lines = list(map(lambda line: (float(line[0]), line[1]), map(lambda line: line.split(), input_file)))
    for line in lines:
        print(line[0] - lines[0][0], line[1], file=output_file) 
```

# javascript - 用浏览器调整div大小

> ID：10758576
> 
> 赞同：0
> 
> 时间：2012-05-25T17:05:27.483
> 
> 标签：javascript, resize

我正在尝试构建一个简单的图像查看器，它可以根据浏览器的宽度/高度调整大小。我相信我快到了。但是，我需要一个关于如何完成这个的提示。这是代码。我不想使用 jquery，因为我试图让它尽可能简单和轻便。

谢谢你，MK

```
<style type="text/css">
body {
    background-color: #999;
}
#fullscreenPhoto {
    border: thin solid #F00;
}
</style>

<body onresize="resizeImage()">
<div onload="resizeImage()" margin="0" border="0" id="fullscreenPhoto">
    <img  src="resizeImage.jpg" width="100%" >
</div>
<script type="text/javascript">
var divResize = document.getElementById('fullscreenPhoto');

function resizeImage()
{
    var window_height = document.body.clientHeight
    var window_width  = document.body.clientWidth

    var image_height  = divResize.offsetHeight
    var image_width   = divResize.offsetWidth

    var height_ratio  = image_height / window_height
    var width_ratio   = image_width / window_width

    if (height_ratio > width_ratio)
    {
        divResize.style.width  = "auto"
        divResize.style.height = "100%"
    }
    else
    {
        divResize.style.width  = "100%"
        divResize.style.height = "auto"
    }
}
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:18:29.067

`div`永远不会加载。它是一种原始的 HTML 类型。您必须将`onload`声明放在图像标签中。由于图像位于 Div 中，因此您不必调整它的大小。它被图像拉伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:01:30.637

好的，这完全是另一个答案（基于您对想要根据“高度”设置“拉伸”的评论......这个事件不使用 JavaScript！只需确保将 html 和 body CSS 属性高度设置为 100%然后将图像 CSS 高度属性设置为 100%

HTML：

```
<div  margin="0" border="0" id="fullscreenPhoto">
    <img src="http://www.walmik.com/wp-content/themes/spring/images/motif.png" >
</div> 
```

CSS：

```
html, body {height: 100%; margin: 0; padding: 0;}
#fullscreenPhoto img {position:fixed; top:0; left:0; width:auto; height:100%;} 
```

最后，这里有一个工作示例：http: [//jsfiddle.net/XwBxh/](http://jsfiddle.net/XwBxh/)

如果您想支持 IE6，这里还有一个小补充：

```
html { overflow-y: hidden; }
body { overflow-y: auto; }
#fullscreenPhoto img { position:absolute; z-index:-1; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:14:29.797

如何在需要为 100% 的地方设置 maxHeight 和 maxWidth 而不是宽度和高度。这样您甚至可能不需要指定“自动”

所以在你的例子中

```
if (height_ratio > width_ratio)
{
    divResize.style.maxHeight = "100%"
}
else
{
    divResize.style.maxWidth  = "100%"
} 
```

# c# - Windows 服务 VS Web 进程

> ID：10758580
> 
> 赞同：1
> 
> 时间：2012-05-25T17:05:52.960
> 
> 标签：c#, iis, windows-services

我在这里创建了一个消息队列，它基本上在一个线程上，并从数据库中一个接一个地发送电子邮件。首先我认为，因为它是一个连续的过程，它必须在 Windows 服务上，这听起来像是一个理想的解决方案，但我没有和我的经理谈过，他说如果它与整个项目，如果我放入一个 while(true) 语句。这样在部署到生产环境时，我们不需要担心安装任何 Windows 服务或任何东西。但我认为，如果我们那样做，那么 Web 服务器上会有很多不必要的压力。

我不确定该走哪条路。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:20:26.040

我会选择一个单独的 Windows 服务。
由于此服务是您的应用程序的一部分，它的生命周期取决于应用程序池进程的生命周期（当然取决于您使用的 IIS 版本），并且无论何时您选择更改应用程序池设置，您必须记住您的消息作业也依赖于它，如果您为应用程序池设置任何回收设置，您可能很难理解为什么您的作业突然停止工作或类似的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T17:22:02.590

我肯定会建议在后台处理电子邮件队列的 Windows 服务。您可以向您的经理提出以下几点建议：

1.  该服务可以与另一个项目保存在同一个存储库中。
2.  安装和升级服务非常容易。使用`installutil`批处理文件并将其添加到您的项目中以进行安装/卸载。升级就是停止服务，更新服务`.exe`，然后重新启动服务。
3.  所有这些在技术上都可以自动化，也可以作为部署过程的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:34:30.103

你也可以简单地编写一个命令行应用程序，然后用 Service+ 之类的东西包装它，使其表现得像一个服务。您还可以获得其他功能，例如如果您愿意（只要您想运行它）就可以像命令行应用程序一样运行它，或者根据需要从其他应用程序启动/执行它。您也可以构建各种行为...连续模式，可能一次处理 1 个（或 100 个或其他）然后退出（并让 Service+ 重新启动它），或者您可能需要的任何其他行为。

# c# - WP7 中的可滚动文本框（ala Skype 和 Facebook）

> ID：10758581
> 
> 赞同：2
> 
> 时间：2012-05-25T17:05:56.483
> 
> 标签：c#, silverlight, windows-phone-7, textbox, scroll

基本上，我正在开发一个笔记应用程序，用户可以随心所欲地输入（有点像[WP7 中的 Scrollable TextBox](https://stackoverflow.com/questions/5576691/scrollable-textbox-in-wp7)）。我把TextBox放在一个ScrollViewer中，一切都很好；当 TextBox 获得焦点时，我禁用了 ScrollViewer，因此它会在用户键入时自动滚动。

我的问题是，我希望用户能够在编辑笔记时滚动，就像他在阅读笔记时能够滚动一样。我认为做到这一点的唯一方法是按住直到出现过大的插入符号，然后移动它，但我发现，事实上，第三方应用程序支持这种类型的滚动。

我想要实现的是手机上的 Word/OneNote 之类的东西，用户可以在编辑文档时轻松滚动（[这里有一个](http://www.youtube.com/watch?feature=player_detailpage&v=dj4fbce3_zI#t=337s)演示视频）。在 Skype 和 Facebook 应用程序中也可以看到相同的效果，在这些应用程序中，您可以在编写消息时滚动它以查看更多信息。

我想知道这是否是自定义控件，或者布局是否以特定方式设计，因为 ScrollViewer 中的 TextBox 根本不起作用。

我会很感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T18:52:40.740

根据 Ku6opr 给出的答案，我调整了代码，使其适用于我的情况。现在，TextBox 具有常规行为，但可以滚动，并且 RootFrame 不会自动上升。

XAML：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <ScrollViewer x:Name="InputScrollViewer">
        <TextBox x:Name="MessageText" TextWrapping="Wrap" Text="" AcceptsReturn="True" TextChanged="inputText_TextChanged" GotFocus="MessageText_GotFocus" Padding="0,0,0,400" Tap="MessageText_Tap" />
    </ScrollViewer>
</Grid> 
```

C＃：

```
public partial class MainPage : PhoneApplicationPage
{
    double InputHeight = 0.0;

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void MessageText_GotFocus(object sender, System.Windows.RoutedEventArgs e)
    {
        (App.Current as App).RootFrame.RenderTransform = new CompositeTransform();
    }

    private void inputText_TextChanged(object sender, System.Windows.Controls.TextChangedEventArgs e)
    {
        Dispatcher.BeginInvoke(() =>
        {
            double CurrentInputHeight = MessageText.ActualHeight;

            if (CurrentInputHeight > InputHeight)
            {
                InputScrollViewer.ScrollToVerticalOffset(InputScrollViewer.VerticalOffset + CurrentInputHeight - InputHeight);
            }

            InputHeight = CurrentInputHeight;
        });
    }

    public void MessageText_Tap(object sender, GestureEventArgs e)
    {
        InputScrollViewer.ScrollToVerticalOffset(e.GetPosition(MessageText).Y - 80);
    }
} 
```

Tap 事件处理程序检测点击的垂直位置，并滚动 ScrollViewer，以便在 TextBox 获得焦点时显示插入符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:23:32.660

也许这不是一个最好的解决方案，但它的工作：

xml:

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <ScrollViewer x:Name="InputScrollViewer" Margin="12,0" Height="800" VerticalAlignment="Top">
        <StackPanel Orientation="Vertical" Margin="0,12">
            <TextBlock TextWrapping="Wrap" Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed in ligula augue. Morbi facilisis varius enim in congue. Nam vehicula imperdiet ipsum in ullamcorper. Integer quis augue in dui tincidunt elementum. Nulla in mi mauris, eu laoreet leo. Sed vehicula quam nec leo imperdiet a rutrum felis viverra." Style="{StaticResource PhoneTextNormalStyle}" Margin="12,12,12,0"/>
            <TextBlock TextWrapping="Wrap" Text="Morbi molestie facilisis eleifend. Cras volutpat, lectus nec tincidunt accumsan, mi purus faucibus purus, vitae semper mauris lacus id mauris. Fusce eget massa ut magna lacinia gravida. Ut id velit purus. Nullam eu mi ac justo imperdiet pretium. Curabitur vehicula congue purus vitae sollicitudin." Style="{StaticResource PhoneTextNormalStyle}" Margin="12,12,12,0"/>
            <TextBlock TextWrapping="Wrap" Text="Aenean eget dui a urna commodo faucibus sit amet nec eros. Nam tempus facilisis urna, ut varius justo euismod sit amet. Vivamus ultrices volutpat tortor in viverra. Vestibulum laoreet odio at tellus consectetur ut convallis quam semper. Duis in iaculis lectus. Aliquam erat volutpat. Nulla facilisi. Quisque vitae metus lorem. Fusce et erat nisl, sit amet gravida libero. Cras elementum eros vitae tellus sollicitudin accumsan. Pellentesque egestas luctus bibendum. Duis eros ipsum, mollis ut laoreet eu, consectetur id lectus. Maecenas viverra risus urna." Style="{StaticResource PhoneTextNormalStyle}" Margin="12,12,12,0"/>
            <TextBox x:Name="MessageText" TextWrapping="Wrap" Text="" AcceptsReturn="True" TextChanged="inputText_TextChanged" GotFocus="MessageText_GotFocus" LostFocus="MessageText_LostFocus"/>
        </StackPanel>
    </ScrollViewer>
</Grid> 
```

代码隐藏：

```
public partial class MainPage : PhoneApplicationPage
{
    bool IsInputFocused = false;
    double InputHeight = 0.0;
    double KeyboardHeight = 338;
    double KeyboardClipboardHeight = 72;
    double RootHeight = 800;

    public MainPage()
    {
        InitializeComponent();

        DeviceStatus.KeyboardDeployedChanged += new EventHandler(DeviceStatus_KeyboardDeployedChanged);
    }

    void DeviceStatus_KeyboardDeployedChanged(object sender, EventArgs e)
    {
        if (IsInputFocused)
        {
            UpdateKeyboard();
        }
    }

    private void inputText_TextChanged(object sender, System.Windows.Controls.TextChangedEventArgs e)
    {
        Dispatcher.BeginInvoke(() =>
        {
            double CurrentInputHeight = MessageText.ActualHeight;

            if (CurrentInputHeight > InputHeight)
            {
                InputScrollViewer.ScrollToVerticalOffset(InputScrollViewer.VerticalOffset + CurrentInputHeight - InputHeight);
            }

            InputHeight = CurrentInputHeight;
        });
    }

    private void UpdateKeyboard()
    {
        (App.Current as App).RootFrame.RenderTransform = new CompositeTransform();

        if (!DeviceStatus.IsKeyboardDeployed)
        {
            InputScrollViewer.Height = RootHeight - (KeyboardHeight + GetClipboardHeight());
        }
        else
        {
            InputScrollViewer.Height = RootHeight;
        }
    }

    private double GetClipboardHeight()
    {
        return (Clipboard.ContainsText()) ? KeyboardClipboardHeight : 0;
    }

    private void MessageText_GotFocus(object sender, System.Windows.RoutedEventArgs e)
    {
        IsInputFocused = true;

        (App.Current as App).RootFrame.RenderTransform = new CompositeTransform();

        UpdateKeyboard();

        Dispatcher.BeginInvoke(() =>
        {
            InputScrollViewer.ScrollToVerticalOffset(InputScrollViewer.VerticalOffset + 338 + GetClipboardHeight());
        });
    }

    private void MessageText_LostFocus(object sender, System.Windows.RoutedEventArgs e)
    {
        IsInputFocused = false;

        InputScrollViewer.Height = RootHeight;
    }
} 
```

首先，此代码在获得焦点`Frame`时禁用（向上移动）的转换。`TextBox`此外，当键盘在屏幕上时，此代码执行新的空闲屏幕高度管理。

# python - 在python中删除文本文件的第一行

> ID：10758584
> 
> 赞同：1
> 
> 时间：2012-05-25T17:06:26.830
> 
> 标签：python

> **可能重复：**
> [在 python 中编辑文本文件中的特定行](https://stackoverflow.com/questions/4719438/editing-specific-line-in-text-file-in-python)

我正在编写一个允许用户将数据写入文本文件的软件。但是，我不确定如何删除文本文件的第一行并重写该行。我希望用户能够通过单击按钮并输入内容来更新文本文件的第一行，但这需要删除并写入新行作为第一行，我不确定如何实现。任何帮助，将不胜感激。

编辑：

所以我找到了文件的第一行并尝试写另一行，但这并没有删除前一行。

```
file.seek(0)
file.write("This is the new first line \n") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:28:59.447

你没有描述你是如何打开文件的。如果您使用`file = open(somename, "a")`该文件，则不会截断该文件，但会在最后写入新数据（即使在大多数现代系统（如果不是所有现代系统）上搜索之后）。您必须使用“r+”打开文件）

但是您的示例假定您编写的行的长度与用户键入的长度完全相同。文件中没有行组织，只有字节，其中一些表示行结束。您需要做的是在内存中为所有行使用临时文件或临时缓冲区，然后用第一个替换的行写出。

如果事情适合记忆（我假设因为很少有用户会输入这么多它不适合），你应该能够做到：

```
lines = open(somename, 'r').readlines()
lines[0] = "This is the new first line \n"
file = open(somename, 'w')
for line in lines:
    file.write(line)
file.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:10:38.240

您可以使用 readlines 获取行数组，然后在数组的第一个索引上使用 del。这可能会有所帮助。[http://www.daniweb.com/software-development/python/threads/68765/how-to-remove-a-number-of-lines-from-a-text-file-](http://www.daniweb.com/software-development/python/threads/68765/how-to-remove-a-number-of-lines-from-a-text-file-)

# ruby-on-rails - ActiveRecord，按嵌套属性的值查找

> ID：10758585
> 
> 赞同：10
> 
> 时间：2012-05-25T17:06:36.060
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`Phone`模型嵌套`Message`模型。`number`考虑到该属性在`Phone`模型内部而不是在模型中，如何按给定数字查找所有消息`Message`？

这是我目前得到的

```
class Message < ActiveRecord::Base
   attr_accessible  :phone_id
   belong_to :phone
end

class Phone < ActiveRecord::Base
   attr_accessible  :phone
   has_many :messages
end 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-25T17:18:48.567

```
Message.joins(:phone).where(phones: { phone: '555-555-5555' }) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T17:14:42.840

```
Message.joins(:phone).where("phones.phone = ?","123-456-7890").all 
```

# java - 从 Spring3 迁移到 JBoss 数据源？

> ID：10758588
> 
> 赞同：0
> 
> 时间：2012-05-25T17:06:52.617
> 
> 标签：java, spring, jboss5.x

我一直在从事一个在 tomcat 中运行良好的 Spring 项目，我们正在迁移到 JBoss，并希望在 JBoss 中使用数据源设置。该项目曾经使用以下xml ..

```
<beans:bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" 
    > <beans:property name="driverClassName" value="${database.driver}" /> <beans:property 
    name="url" value="${database.url}" /> <beans:property name="username" value="${database.user}" 
    /> <beans:property name="password" value="${database.password}" /> <beans:property 
    name="initialSize" value="5" /> <beans:property name="maxActive" value="10" 
    /> </beans:bean> 
```

但是现在我们正在迁移到 JBoss 并且管理员希望我们使用 JBoss 中的数据源设置，我正在尝试使用以下内容。

```
<jee:jndi-lookup id="dataSourcejndi" jndi-name="dataSourcejndi"
        lookup-on-startup="false" proxy-interface="javax.sql.DataSource"
        cache="true" resource-ref="true" />

    <beans:bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean"
        lazy-init="true">
        <beans:property name="dataSource" ref="dataSourcejndi" />
    </beans:bean> 
```

我们没有收到任何错误，但该项目将不再启动..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:11:53.353

你应该只需要第二个。我的设置是这样的：

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName" value="java:My_Data_Source" /> 
</bean> 
```

# java - 一种从最大元素到最小元素打印二叉搜索树 (BST) 的方法

> ID：10758593
> 
> 赞同：4
> 
> 时间：2012-05-25T17:07:13.377
> 
> 标签：java, binary-search-tree

我想我必须修改其中一个遍历。我尝试修改一个从最小到最大的打印，这就是这个

```
private void printTree(BinaryTreeNode t) {
    if (t != null) {
        printTree(t.llink);
        System.out.print(" " + t.info);
        printTree(t.rlink);
    }
} 
```

但它没有用。我仍然坚持下一步我应该尝试什么。这是我正在使用的二叉搜索树：

```
public class BinarySearchTree extends BinaryTree {
    //Default constructor.
    //Postcondition: root = null;

    public BinarySearchTree() {
        super();
    }

    //Copy constructor.
    public BinarySearchTree(BinarySearchTree otherTree) {
        super(otherTree);
    }

public class BinaryTree {

    //Definition of the node
    protected class BinaryTreeNode {

        DataElement info;
        BinaryTreeNode llink;

        public DataElement getInfo() {
            return info;
        }

        public BinaryTreeNode getLlink() {
            return llink;
        }

        public BinaryTreeNode getRlink() {
            return rlink;
        }
        BinaryTreeNode rlink;
    }

    protected BinaryTreeNode root;

    //Default constructor
    //Postcondition: root = null;
    public BinaryTree() {
        root = null;
    }

    //Copy constructor
    public BinaryTree(BinaryTree otherTree) {
        if (otherTree.root == null) //otherTree is empty.
        {
            root = null;
        }
        else {
            root = copy(otherTree.root);
        }
    }

    public BinaryTreeNode getRoot() {
        return root;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:11:02.097

您发布的代码看起来可以从最小到最大排序。

如果你想反过来排序，那么下面的代码应该可以工作：

```
private void printTree(BinaryTreeNode t) {
        if (t != null) {
            printTree(t.rlink);
            System.out.print(" " + t.info);
            printTree(t.llink);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T05:59:20.287

您所要做的就是交换 llink 和 rlink。要从最大到最小打印树，您可以使用其中一种树遍历方法。例如，适合这种情况的是 Inorder 遍历，因为它根据值从最小到最大打印树。您所要做的就是：

```
if(t!=null){        
    printTree(t.rlink);
    System.out.print(" " + t.info);
    printTree(t.llink);
} 
```

那应该从最大到最小打印它。

# javascript - 将事件侦听器附加到类以侦听来自其成员的事件

> ID：10758596
> 
> 赞同：2
> 
> 时间：2012-05-25T17:07:16.417
> 
> 标签：javascript, node.js, events, eventemitter

我有两个班级：`EventEmitter`和`EventCatcher`。有`EventCatcher`2 个成员`EventEmitter`。`EventEmitter` 发出一个测试事件。在捕手中，我想捕获所有测试事件并做一些事情：

事件发射器

```
var events = require('events');
var sys = require('util');

module.exports = eventEmit;

function eventEmit(name) {
    this.name = name;
    events.EventEmitter.call(this);
}

sys.inherits(eventEmit, events.EventEmitter);

eventEmit.prototype.emitTest = function() {
    var self = this;
    self.emit('test');
} 
```

事件捕捉器

```
var eventEmit = require('./eventEmit');

module.exports = eventCatch;

function eventCatch() {
    this.eventEmitA = new eventEmit("a");
    this.eventEmitB = new eventEmit("b");
    this.attachHandler();
}

eventCatch.prototype.attachHandler = function()  {
    //I want to do something like:
    // this.on('test', function() };

    this.eventEmitA.on('test', function() {
        console.log("Event thrown from:\n" + this.name);
    });
    this.eventEmitB.on('test', function() {
        console.log("Event thrown from:\n" + this.name);
    });
};

eventCatch.prototype.throwEvents = function() {
    var self = this;
    self.eventEmitA.emitTest();
    self.eventEmitB.emitTest();
}; 
```

有没有办法将 X 事件附加到 中的`EventCatcher`类`attachHandler`，而不必为每个`EventEmitter` 类手动附加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T10:02:10.363

像这样的东西？

```
var eventEmit = require('./eventEmit');

module.exports = eventCatch;

function eventCatch() {
    this.emitters = [];
    this.emitters.push(new eventEmit("a"));
    this.emitters.push(new eventEmit("b"));
    this.on('test', function() {
        console.log("Event thrown from:\n" + this.name);
    });
}

eventCatch.prototype.on = function(eventName, cb) {
    this.emitters.forEach(function(emitter) {
        emitter.on(eventName, cb);
    });
};

eventCatch.prototype.throwEvents = function() {
    this.emitters.forEach(function(emitter) {
        emitter.emitTest();
    });
}; 
```

这篇写的是头脑，所以我真的不知道回调内的范围是否正确。

# android - 如何从Android中的句子中获取特定字符串？

> ID：10758597
> 
> 赞同：0
> 
> 时间：2012-05-25T17:07:25.840
> 
> 标签：android

我将数据存储在[SQLite](http://en.wikipedia.org/wiki/SQLite)数据库中。我存储的数据在 HTML 标签中，例如，“谁是好领导？”

![在此处输入图像描述](../Images/8d4399b8cef942e02c8dcc423067cc8b.png)

实际上，我的任务是显示一个问题及其相关图像。我将图像保存在一个可绘制的文件夹中。现在，当问题与图像一起显示时，它也应该显示。我如何完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:05:07.433

如果您确实受限于解析 html，则假设您在解析的内容中有唯一的非重复标记，则一系列 substring 和 indexOf 调用将起作用。

例如，您可以这样做：

```
 //Set markers that will act as unique identifiers for when the image name begins/ends
    final String beginningMarker = "src=\"";
    final String endingMarker = "\"";

    //Define what html we are parsing
    String html = "<img alt=\"\" width=\"248\" height=\"170\" src=\"/test/image1.png\" />";

    //Use our markers to find out the locations in the html where the image name begins/ends
    int imgStringStartIndex = html.indexOf(beginningMarker) + beginningMarker.length();
    int imgStringEndIndex = html.indexOf(endingMarker, imgStringStartIndex);

    //Use the locations we just found to extract the image name
    String imageName = html.substring(imgStringStartIndex, imgStringEndIndex);
    System.out.println(imageName); 
```

# ruby - 上帝不会阻止独角兽

> ID：10758598
> 
> 赞同：8
> 
> 时间：2012-05-25T17:07:28.167
> 
> 标签：ruby, ruby-on-rails-3, unicorn, god

我有这个文件

```
rails_env = ENV['RAILS_ENV'] || 'development'
rails_root = ENV['RAILS_ROOT'] || "/home/luiz/rails_dev/api"

God.watch do |w|
  w.name = "unicorn"
  w.interval = 30.seconds # default

  # unicorn needs to be run from the rails root
  w.start = "cd #{rails_root} && unicorn_rails -c config/unicorn.rb -E #{rails_env}"

  # QUIT gracefully shuts down workers
  w.stop = "kill -QUIT `cat #{rails_root}/tmp/pids/unicorn.pid`"

  # USR2 causes the master to re-create itself and spawn a new worker pool
  w.restart = "kill -USR2 `cat #{rails_root}/tmp/pids/unicorn.pid`"

  w.start_grace = 10.seconds
  w.restart_grace = 10.seconds
  w.pid_file = "#{rails_root}/tmp/pids/unicorn.pid"

  w.behavior(:clean_pid_file)

  w.start_if do |start|
    start.condition(:process_running) do |c|
      c.interval = 5.seconds
      c.running = false
    end
  end

  w.restart_if do |restart|
    restart.condition(:memory_usage) do |c|
      c.above = 300.megabytes
      c.times = [3, 5] # 3 out of 5 intervals
    end

    restart.condition(:cpu_usage) do |c|
      c.above = 50.percent
      c.times = 5
    end
  end

  # lifecycle
  w.lifecycle do |on|
    on.condition(:flapping) do |c|
      c.to_state = [:start, :restart]
      c.times = 5
      c.within = 5.minute
      c.transition = :unmonitored
      c.retry_in = 10.minutes
      c.retry_times = 5
      c.retry_within = 2.hours
    end
  end
end 
```

我从独角兽开始`god -c unicorn.god -D -p 8081`，我的工人设置得很好。但是，有时我需要停止独角兽（`god stop unicorn -p 8081`在另一个控制台中），但服务器保持正常运行。
我错过了什么？

## 编辑

我们正在从独角兽转向彪马（不是因为这个问题，这是一个性能问题），并且不再使用上帝......感谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T12:36:21.690

现在我们正在使用 foreman 和 puma ......这是我们的初始化程序：
`web: bundle exec puma -q -d -e production -b 'unix:///home/api/shared/web.socket' -S /home/api/shared/web.state --control 'unix:///home/api/shared/web.ctl'`

并使用 capistrano 进行部署，这样我们就可以像这样停止和重新启动服务器

***配置/部署.rb***

```
# Puma commands
_cset(:puma_cmd) { "#{fetch(:bundle_cmd, 'bundle')} exec puma" }
_cset(:pumactl_cmd) { "#{fetch(:bundle_cmd, 'bundle')} exec pumactl" }
_cset(:puma_state) { "#{shared_path}/puma.state" }
_cset(:puma_role) { :app }

# Puma
namespace :puma do

  desc 'Start puma'
  task :start do
    run "cd #{current_path} ; bundle exec foreman start web"
  end

  desc 'Stop puma'
  task :stop, :roles => lambda { fetch(:puma_role) }, :on_no_matching_servers => :continue do
    run "cd #{current_path} && #{fetch(:pumactl_cmd)} -S #{fetch(:puma_state)} stop"
  end

  desc 'Restart puma'
  task :restart, :roles => lambda { fetch(:puma_role) }, :on_no_matching_servers => :continue do
    run "cd #{current_path} && #{fetch(:pumactl_cmd)} -S #{fetch(:puma_state)} restart"
  end
end 
```

# html - css让img在鼠标悬停时显示

> ID：10758609
> 
> 赞同：-1
> 
> 时间：2012-05-25T17:08:16.307
> 
> 标签：html, css

我有一个带有许多`LI`标签的页面，并且对于任何`LI`有图像，该图像始终是隐藏的，除非悬停时`LI` 必须显示该图像，我知道我必须使用 `display:none`，但我不知道如何使用它在 css 上悬停`LI`，而不是在 img上悬停

# html

```
<?php
$pageNumber = $this->allQuestionsPageNumber;
$numberOfPages = $this->allQuestionsNumberOfPages;
$questions = $this->allQuestionsQuestionsForPage;
?>
<div id="allQuestions" class="container">
    <ul>
        <?php while ($row = $questions->fetch()) { ?>
            <li>
                <p>
                    <label>Question</label>
                    <?php echo $row['text']; ?>
                </p>
                <p>
                    <label>Answer</label>
                    <?php echo $row['answer']; ?>
                </p>
                <p>
                    <img class="allqEdit"src="<?php echo URL; ?>public/images/Edit.png"/>
                </p>
            </li>
        <?php } ?>
        <li id="allQuestionsPages">
            <label>Page</label>
            <?php for ($i = 1; $i <= $numberOfPages; $i++) { ?>
                <a href="<?php echo URL; ?>Question/all/<?php echo $i; ?>"><?php echo $i; ?></a>
            <?php } ?>
        </li>
    </ul>
</div> 
```

# css

```
.container ul li:hover{
    background-color: khaki;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:09:52.487

您必须将`:hover`伪类放在`li`选择器上：

```
li img { display: none; }
li:hover img { display: inline; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:13:00.377

这可以使用以下 CSS 来完成

```
li {
    width: 50px;
    height: 100px;
    background-color: red;
}
li img {
    display: none;  
}
li:hover img {
    display: block;
} 
```

[你可以在这里](http://jsfiddle.net/jackdent/GMnN4/)看到一个现场的 jsFiddle

# javascript - SCRIPT438：对象不支持此属性或方法 script2.js，第 92 行字符 5

> ID：10758620
> 
> 赞同：0
> 
> 时间：2012-05-25T17:09:04.147
> 
> 标签：javascript

弹出窗口在 Firefox 和 Safari 中有效，但在 Internet Explorer 9 中无效。使用 Internet Explorer 9 中的开发工具，我收到以下错误（发生在函数 openPopUp 中）。

> SCRIPT438：对象不支持此属性或方法 script2.js，第 92 行字符 5

## 这是 <script2.js>

```
var popup_content_cache = '';
var popup_content_src_id = '';
jQuery.fn.center = function () {
    console.log("*****NEW******");
    this.css("position", "absolute");
    this.css("top", (($(window).height() - this.outerHeight()) / 2) +
                                                $(window).scrollTop() + "px");
    this.css("left", (($(window).width() - this.outerWidth()) / 2) +
                                                $(window).scrollLeft() + "px");

    console.log(this.css('top'));
    console.log(parseInt(this.css('top')));
    if (parseInt(this.css('top')) < 0) this.css('top', '20px');

    console.log(parseInt(this.css('top')));
    return this;/*
    this.css("position","absolute");
    var top=($(window).height() - this.outerHeight())/2;

    console.log("top:  " + top)
    console.log($(window).height());
    console.log(this.outerHeight());
    if(top<0){
        console.log("** IF");
        this.css("top", "20px");
        this.css("left", (($(window).width() - this.outerWidth()) / 2) +   $(window).scrollLeft() + "px");
    }
    else {
        this.css("top", (($(window).height() - this.outerHeight()) / 2) +
                                                    $(window).scrollTop() + "px");
        this.css("left", (($(window).width() - this.outerWidth()) / 2) +
                                                    $(window).scrollLeft() + "px");
    }
    console.log();
    return this;*/
}

function openLayerBC() {
    tWidth = $(document).width();
    tHeight = $(document).height();
    //$("select").fadeOut('fast');
    $('#filter').css("width", tWidth + "px");
    $('#filter').css("height", tHeight + "px");
    // $('#filter').css('z-index',9990);
    $("#filter").css("opacity", 0.8);
    $('#filter').fadeIn('fast');

    //$('#filter').bind("click",closePopup1);
    $('#filter,#close').click(function () {
        $('#filter').fadeOut('fast');
        $('#case_light_box').hide();
        o = document.getElementById('divid');
        o.style.display = o.style.display === 'block' ? 'none' : 'block';
    });
}

function closePopup() {
    $('#filter').fadeOut('fast');
    o = document.getElementById('popup');
    o.style.display = 'none';

    // o.style.display = o.style.display=='block'?'none':'block';
    $(o).css("position","absolute");
    $(popup_content_src_id).html(popup_content_cache);
    var popup_content_cache = '';
    var popup_content_src_id = '';
}

function openPopUp(div) {
    openLayerBC();

    div = div.replace('#', '');
    file = div;
    page = '/v/vspfiles/templates/OSS/ajax/products/' + div + '.html';
    $.get(page, {}, function(data)
    {
        msgbox = document.getElementById('popup');
        $(msgbox).html(data);
        $(msgbox).css('width',$('#'+div).css('width'));
        $('#'+div).show();

        $(msgbox).center();
        $(msgbox).show();
    });
} 
```

* * *

以下是消息所指的 <script2.js> 的第 92 行。

```
 page = '/v/vspfiles/templates/OSS/ajax/products/'+div+'.html'; 
```

免责声明：我继承了这段 JavaScript 代码，并且对 JavaScript 及其语法几乎没有经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:00:53.657

尝试在“page”之前添加“var”：

```
var page = '/v/vspfiles/templates/OSS/ajax/products/'+div+'.html'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:19:57.757

`page`看起来它可能是未定义的。此外， div 或 page 可能不是字符串。您可以打开一个开发者控制台，`debugger;`在错误之前放置一条语句，并在抛出错误之前检查`div`和`page`变量以缩小范围。

# php - 检查输入的密码是否正确，与 PHP 中的 sha256 pw 匹配

> ID：10758624
> 
> 赞同：0
> 
> 时间：2012-05-25T17:09:20.440
> 
> 标签：php

我有密码；

```
828b8f98ec52c750bf018c92951c6e40ae3976e74c888e42ff55ff22403932af 
```

我通常使用 Kohana 3 进行身份验证登录。

现在我需要制作一个单独的脚本，客户端只能输入他的密码，然后它应该检查密码是否正确。

所以我要处理的是：

```
$real_pwd = '828b8f98ec52c750bf018c92951c6e40ae3976e74c888e42ff55ff22403932af';
$entered_pwd = $_GET['pwd']; // test purposes i know its vuln for sql injection ...

if ( $real_pwd == crypt($entered_pwd) ) { echo "OK"; } 
```

这当然行不通，crypt() 是我尝试过的，但我不知道该使用什么？

如果它是一个 sha1 pw，我可以使用 sha1 作为输入密码，但是 sha256 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:12:22.703

你可以使用 hash() [http://php.net/manual/en/function.hash.php](http://php.net/manual/en/function.hash.php)

但是，我建议您查看 bcrypt 并将其用于哈希密码。看看这里[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

*以下是您可能会*发现有用 的其他一些资源： [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

[哈希算法和加密算法之间的根本区别](https://stackoverflow.com/questions/4948322/fundamental-difference-between-hashing-and-encryption-algorithms/4948393#4948393)

# android - Android ListView 主题

> ID：10758629
> 
> 赞同：9
> 
> 时间：2012-05-25T17:09:33.190
> 
> 标签：android, listview, styles, themes, rounded-corners

有很多方法可以设置 ListView 的样式以赋予它们优雅的外观，但所有这些都涉及修改适配器或编写额外的代码。

随着 Android 4.0 的发布，不幸的是，事情必须改变。谷歌完善了他们的 Holo 主题并赋予了它新的面貌。现在鼓励所有开发人员使用它，以使所有应用程序看起来都一样。

这就是问题所在。谷歌推出了 4.0，但仍有人使用旧版 Android。我们不能只保留我们以前的自定义应用程序主题并使用 Holo，因为它会破坏旧设备用户的视觉体验。而且我们不能强迫 4.0 用户只使用 Holo，因为老实说 - 它仍然不完美。

目标是使用内置主题系统并为 Holo 准备一些替代品，在所有设备上看起来都很棒。然后我们可以只用 setTheme() 在 Holo 和我们的主题之间切换，没有其他问题。不幸的是，事情并没有那么简单。我们受限于现有主题系统的能力，有些事情很难做到。我的问题来了。

考虑到我提到的所有内容，我们如何控制 ListView 的外观？我不知道如何：

*   创建带有圆角的列表，并确保选择器背景在选择第一个/最后一个元素时不会破坏它
*   不是为列表创建圆角，而是为由标题分隔的部分创建圆角，如下所示：![在此处输入图像描述](../Images/17b3a33457e1e2cbc970b88509fa14dd.png)

该解决方案应该影响由 PreferenceActivity 创建的 ListViews，而无需任何额外的代码行。一切都应该包含在主题中：

```
<theme name="SampleTheme" parent="android:Theme">
  ...
</theme> 
```

我恳请不要发布不使用样式和主题的解决方案。它们可以在 Stack Overflow 上的另一个问题中轻松找到。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T23:02:17.810

我可以看到两种方法来解决这个问题。

一种是简单地为您的列表视图使用一个主题，指定背景，这又是一个带有圆角的 9 补丁或您指定的 xml 形状（也带有圆角）。这将产生列表视图行选择器出现在您指定的背景“上方”的副作用，因此有点破坏效果。不过实现起来非常简单。

第二种选择是简单地总是将页眉和页脚添加到列表视图中，它们的背景是顶部（和底部）带有圆角的选择器。如果你真的想要，你也可以为这些指定样式。对不起，最后的评论，但我不得不说。请不要试图让您的应用看起来像 iPhone 应用 :)

# c - 如何在 C 中创建一个 UDP 服务器？

> ID：10758632
> 
> 赞同：11
> 
> 时间：2012-05-25T17:09:38.670
> 
> 标签：c, sockets, udp, bind, listen

我正在尝试用 C（在 Linux 下）编写一个 UDP 服务器。我知道在`socket()`函数中我必须使用`SOCK_DGRAM`而不是`SOCK_STREAM`.

```
if ( (list_s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0 ) 
{
    fprintf(stderr, "ERROR");
} 
```

但是现在，当我尝试运行程序时（编译时没有错误），它说`listen()`. 这是对它的调用：

```
if (listen(list_s, 5) < 0)
{
    fprintf(stderr, "ERROR IN LISTEN");
    exit(EXIT_FAILURE);
} 
```

你能弄清楚问题是什么吗？这是代码：

```
int       list_s;                /*  listening socket          */
int       conn_s;                /*  connection socket         */
short int port;                  /*  port number               */
struct    sockaddr_in servaddr;  /*  socket address structure  */

if ( (list_s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0 ) 
{
    fprintf(stderr, "ERROR\n");
}

memset(&servaddr, 0, sizeof(servaddr));
servaddr.sin_family      = AF_INET;
servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
servaddr.sin_port        = htons(port);

if ( bind(list_s, (struct sockaddr *) &servaddr, sizeof(servaddr)) < 0 )
{
    fprintf(stderr, "ERROR IN BIND \n");
}

if ( listen(list_s, 5) < 0 )      // AL POSTO DI 5 LISTENQ
{
    fprintf(stderr, "ERROR IN LISTEN\n");
    exit(EXIT_FAILURE);
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-25T17:10:35.730

您不能`listen`在数据报套接字上，它根本没有为它定义。您只需要`bind`并开始循环阅读。

作为一个简短的解释，`listen`通知操作系统它应该期望该套接字上的*连接*，并且您将在以后接受它们。显然，这对数据报套接字没有意义，因此会出现错误。

* * *

旁注：您应该尝试使用`perror`来打印此类错误。在这种情况下，它（可能）会说*Operation not supported*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T17:14:27.877

正如@cnicutar 所提到的，不需要[`listen(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/listen.2.html)在UDP 套接字上，即用于TCP。只是[`recv(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/recvmsg.2.html)或`recvfrom(2)`。

# linux - pty 文件描述符读取超时失败

> ID：10758641
> 
> 赞同：1
> 
> 时间：2012-05-25T17:10:32.493
> 
> 标签：linux, pty, termios

我正在尝试在代表 PTY 的文件描述符上设置读取超时。我在 termios 中设置了 VMIN = 0 和 VTIME = 10，我希望在字符可用时返回，或者如果没有字符可用则在一秒钟后返回。但是，我的程序永远处于读取调用中。

PTY 有什么特别之处使它不起作用吗？是否有其他 TERMIOS 设置导致此设置起作用？我在标准输入文件描述符上尝试了相同的配置，它按预期工作。

```
#define _XOPEN_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <termios.h>
#include <fcntl.h>

#define debug(...) fprintf (stderr, __VA_ARGS__)

static void set_term (int fd)
{
    struct termios termios;
    int res;

    res = tcgetattr (fd, &termios);
    if (res) {
        debug ("TERM get error\n");
        return;
    }

    cfmakeraw (&termios);
    termios.c_lflag &= ~(ICANON);
    termios.c_cc[VMIN] = 0;
    termios.c_cc[VTIME] = 10;        /* One second */

    res = tcsetattr (fd, TCSANOW, &termios);
    if (res) {
        debug ("TERM set error\n");
        return;
    }

}

int get_term (void)
{
    int fd;
    int res;
    char *name;

    fd = posix_openpt (O_RDWR);
    if (fd < 0) {
        debug ("Error opening PTY\n");
        exit (1);
    }

    res = grantpt (fd);
    if (res) {
        debug ("Error granting PTY\n");
        exit (1);
    }

    res = unlockpt (fd);
    if (res) {
        debug ("Error unlocking PTY\n");
        exit (1);
    }

    name = ptsname (fd);
    debug ("Attach terminal on %s\n", name);

    return fd;
}

int main (int argc, char **argv)
{
    int read_fd;
    int bytes;
    char c;

    read_fd = get_term ();

    set_term (read_fd);
    bytes = read (read_fd, &c, 1);
    debug ("Read returned\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:56:10.047

从 linux `pty`(7) 联机帮助页（斜体是我的）：

> 伪终端（有时缩写为“pty”）是一对提供双向通信通道的虚拟字符设备。通道的一端称为主机；另一端称为奴隶。 *伪终端的从端*提供了一个行为与经典终端完全相同的接口

但是，您的程序正在从*master*读取，不能期望它的行为与终端设备完全相同

如果您更改/扩展最后几行，那么`get_term`...

```
int slave_fd =  open (name, O_RDWR); /* now open the slave end..*/
if (slave_fd < 0) {
   debug ("Error opening slave PTY\n");
   exit (1);
}

return slave_fd; /* ... and use it instead of the master..*/ 
```

...您的示例程序将按预期工作。

# php - Jquery Onclick 更改隐藏参数并提交

> ID：10758652
> 
> 赞同：2
> 
> 时间：2012-05-25T17:11:17.743
> 
> 标签：php, javascript, jquery

嗨，我正在使用 php 和 jquery。我已经创建了一个这样的 div 列表

```
<div class="divclass" id="<?php echo $i-1;?>">  
    <a href=" <?php echo $this->url(array('controller'=>'controller name','action'=>'action name'));?>">
    <span>Date: </span>
    </a>
</div> 
```

我的 javasctipt 脚本是，我选择点击的 id 的名称，我将隐藏参数设置为 id 的名称，我想提交表单

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.divclass').click(function(){
            var idarray = $(this).attr("id");   
            document.getElementById('testo').value=idarray;
            document.forms["prova"].submit();
        });
    }); 
```

表格是：

```
<form id="prova"  method="post"  action="<?php echo Zend_Controller_Front::getInstance()->getBaseUrl().'/controller-name/action-name';?>">
<input type="hidden" value="" id="testo">
</form>
</script> 
```

但是在下一页我没有 post 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:12:35.760

你需要给`name`属性`#testo`，然后试试这个：

例如

```
<input type="hidden" value="" id="testo" name="testo"> 
```

您的表单在`<script>`标签内，将其放在`<script>`标签外。

并在 DOM 中编写以下代码，如下所示：

```
 <script type="text/javascript">

    $(function() {
        // after DOM ready
         $('.divclass').click(function(){
              var idarray = $(this).attr("id"); // or this.id do the same thing  
              $('#testo').val(idarray); // set value to testo
              $("form#prova").submit(); // submit the form
          });
    });
 </script> 
```

# java - 如何在java中发送具有不同内容类型的mime multipart restful请求

> ID：10758653
> 
> 赞同：0
> 
> 时间：2012-05-25T17:11:19.913
> 
> 标签：java, rest, mime, multipart

我有一堆 xml 和/或 base64 编码图像类型的请求，我想将其发送到客户端的服务器，它们有自己的 REST API。还需要将多个请求合并为一个以有效利用带宽。所以我在考虑使用 mime-multipart 请求。我可以在java中使用什么库来完成这个。我知道如何在 java 中发送常规 httpRequest 但我不知道如何发送多部分 mime 请求？即我将如何为每个正文指定不同的内容类型？将不胜感激任何指针。

我想发送这样的东西

```
Content-type: multipart/form-data;boundary=main_boundary

--main_boundary
Content-type: text/xml
<?xml version='1.0'?>
<content>
Some content goes here
</content>

--main_boundary
Content-type: multipart/mixed;boundary=sub_boundary

--main_boundary
Content-type: text/plain; charset=utf-8

 {base64 encoded string that represents image}

--main_boundary-- 
```

如果我的理解有误，请随时纠正我。这是我第一次使用 mime。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:20:09.937

Apache HttpClient 库可以帮助您构建文件上传的多部分请求。

看看[这里](http://hc.apache.org/httpclient-3.x/methods/multipartpost.html)。这是一个[示例应用程序](http://svn.apache.org/viewvc/httpcomponents/oac.hc3x/trunk/src/examples/MultipartFileUploadApp.java?view=markup)。

# python - 读取 MAC 帧并将其提供给 Wireshark

> ID：10758655
> 
> 赞同：1
> 
> 时间：2012-05-25T17:11:44.137
> 
> 标签：python, pcap

我们有一个设备从空中接收 802.11p MAC 帧并将它们完全不变地馈送到串行端口（没有网络层标头），我们希望看到它们在 Wireshark 中排列，所以我们可以有一种自制的嗅探器这个 802.11p 协议。

我的方法（在带有 python 的 linux 中）是，打开串行端口，读取帧并将它们写入 Wireshark 将监听的命名管道。经过大量搜索后，我发现我必须写入该管道的格式必须类似于 pcap 文件格式。我查看了一些执行 pcap 格式化的 python 模块（scapy、pcapy、dpkt），但我找不到任何获得纯 MAC 帧并以wireshark 可以的方式简单地将其写入 pcap 格式的文件的模块阅读，无需我进行所有解析。你的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:32:09.063

仅仅创建一个[水龙头设备](http://www.kernel.org/doc/Documentation/networking/tuntap.txt)并将帧写入其中怎么样？然后，您可以像使用任何其他设备一样嗅探该`tap`设备。这里有一个使用Python`wireshark`中的设备的示例，[这里](https://gist.github.com/585369)有一个更长的 C 语言教程（实际上是关于[设备](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)）。`tap``tun`

注意：我没有对此进行测试，但这个想法似乎很合理......

**更新**：这似乎有效。它基于上述要点，但只是从文件中读取帧数据并将其写入设备：

```
import sys
import fcntl
import os
import struct
import subprocess

TUNSETIFF = 0x400454ca
TUNSETOWNER = TUNSETIFF + 2
IFF_TUN = 0x0001
IFF_TAP = 0x0002
IFF_NO_PI = 0x1000

# Open TUN device file.
tun = open('/dev/net/tun', 'r+b')
# Tell it we want a TUN device named lars0.
ifr = struct.pack('16sH', 'lars0', IFF_TAP | IFF_NO_PI)
fcntl.ioctl(tun, TUNSETIFF, ifr)
# Optionally, we want it be accessed by the normal user.
fcntl.ioctl(tun, TUNSETOWNER, 1000)

# Bring it up and assign addresses.
subprocess.check_call(['ifconfig', 'lars0', 'up'])

print 'waiting'
sys.stdin.readline()

# Read an IP packet been sent to this TUN device.
packet = list(open('/tmp/packet.raw').read())

# Write the reply packet into TUN device.
os.write(tun.fileno(), ''.join(packet))

print 'waiting'
sys.stdin.readline() 
```

# android - 完成活动 - 谷歌地图 Android

> ID：10758660
> 
> 赞同：1
> 
> 时间：2012-05-25T17:11:54.810
> 
> 标签：android, google-maps, mapactivity, activity-finish

我正在使用 Google Maps for Android 做一个项目。我创建了一个 MapActivity 来加载我保存在服务器上的一些地方。所以我有这门课

```
public class PlaceItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    Context mContext = null;
    MapActivity mapAct = null;

    public PlaceItemizedOverlay(Drawable defaultMarker, MapActivity map) {
          super(boundCenterBottom(defaultMarker));
              this.macAct = map;
    }

    public PlaceItemizedOverlay(Drawable defaultMarker, Context context) {
          super(boundCenterBottom(defaultMarker));
          mContext = context;
        }

    @Override
    protected OverlayItem createItem(int i) {
      return mOverlays.get(i);
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    public int size() {
      return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
      OverlayItem item = mOverlays.get(index);
      AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();

     this.mapAct.finish();

      return true;
    } 
```

好吧，当我单击保存的位置时，程序会中断。

我在 mapActivity 上创建对象：

```
PlaceItemzedOverlay itemizedoverlay = new PlaceItemizedOverlay(drawable, this); 
```

你能帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:44:00.393

问题出在这里 //你的代码的一部分

```
 @Override
  protected boolean onTap(int index) {
   OverlayItem item = mOverlays.get(index);
   AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
   dialog.setTitle(item.getTitle());
   dialog.setMessage(item.getSnippet());
   dialog.show();//here you show a alert dialog on current activity 

  //this.mapAct.finish();//and here you finish current activity

  return true;
} 
```

在这种情况下应用程序崩溃..并使用

```
finish(); 
```

为您

```
 this.mapAct.finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:45:01.867

如您所说，如果您正在`itemizedoverlay`使用...创建对象

```
PlaceItemzedOverlay itemizedoverlay = new PlaceItemizedOverlay(drawable, this); 
```

...那么以下行无效...

```
AlertDialog.Builder dialog = new AlertDialog.Builder(mContext); 
```

基本上你有两个`PlaceItemzedOverlay`. 一个的第二个参数是 a `Context`，另一个是 a `MapActivity`。这是仅有的两个地方，其中一个`mContext`或`mapAct`设置为一个有效的引用，并且两者都是互斥的。换句话说，无论使用哪个构造函数，都将保留`mContext`or中的一个或另一个。`mapAct``null`

在你的方法中混合你的使用`mContext`和`mapAct`你的`onTap`方法永远不会奏效......

```
AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);

...

this.mapAct.finish(); 
```

# c++ - 转换运算符的移动语义

> ID：10758664
> 
> 赞同：7
> 
> 时间：2012-05-25T17:12:15.090
> 
> 标签：c++, c++11, move-semantics

可移动转换运算符的语法是什么？

我有一个包装器`obj`，它有一个`obj`转换运算符：

```
class wrap {
public:
   operator obj() { ... }
private:
   obj data_;
}; 
```

如何确定是否`data_`应该复制或移动？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T17:17:42.637

它的语法是这样的：

```
class wrap {
public:
   operator obj() const & { ... }   //Copy from me.
   operator obj() && { ... }  //Move from me.
private:
   obj data_;
}; 
```

当无法调用第二个版本时，将调用第一个版本（即：`wrap`正在转换的实例不是临时的或没有显式使用`std::move`）。

请注意，Visual Studio 没有在 VS11 中实现 r 值引用的这一方面。

# java - 如何在 Java 中提交具有隐藏 csrf_token_login 字段和生成值的 html 登录表单

> ID：10758665
> 
> 赞同：1
> 
> 时间：2012-05-25T17:12:22.597
> 
> 标签：java, url, login, csrf

我需要自动从网站下载文件。文件下载按钮仅在登录后出现，我提供了用户名和密码。在登录表单中还有两个隐藏字段，其中一个是带有生成值的 csrf_token_login：

```
<input type="hidden" name="csrf_token_login" value="nl9YERDFpecfITb8QwFWneoaefykxp2b" /> 
```

如果我只有登录名和密码（在[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)中有很好的解释），那么很清楚如何在 Java 中编码（使用 java.net.HttpUrlConnection ）：提交 POST 请求, 获取 cookie 并将它们设置为任何后续请求。但是如何在登录表单上获取生成的 csrf_token_login 值并与其他值一起提交？

在登录页面的 HttpURLConnection 上使用 getInputStream() 读取它会给我 csrf 值。但同时这会建立连接并防止设置连接属性以发布数据：

```
private HttpURLConnection logUrlCon;
... 
BufferedReader logInput = new BufferedReader(new InputStreamReader(logUrlCon.getInputStream())); 
... // read and get csrf value OK

logUrlCon.setDoOutput(true); // throws java.lang.IllegalStateException: Already connected 
```

有没有办法让这个 csrf_tiken_login 值在登录表单中生成并用用户名和密码发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:22:09.580

读取登录页面内容并使用正则表达式提取数据。您的隐藏字段具有非常独特的形式（具有唯一的名称等），因此非常适合基于正则表达式的数据提取。

# python - numpy.loadtxt 给出“不可迭代”错误

> ID：10758668
> 
> 赞同：5
> 
> 时间：2012-05-25T17:12:32.063
> 
> 标签：python, input, numpy

我正在尝试使用`numpy.loadtxt`读取文件中的数据，如下所示：

```
## 14 line of header
3 0 36373.7641026
3 1 36373.7641026
3 2 36373.7641026
... 
```

当我给它时：

```
>>> chunk, power = numpy.loadtxt(bf,skiprows=14,usecols=(1,2),unpack=True) 
```

甚至这样：

```
>>> power = numpy.loadtxt(bf,skiprows=14,usecols=(2)) 
```

它说，`TypeError: 'int' object is not iterable`

我认为这是因为前两列显然是整数而不是浮点数，但现在我什至不确定它指的是哪个 int 对象，因为它甚至不会只读取浮点数。我怎么做`loadtxt`？

相关：如何使用`dtype = ?`我无法通过谷歌弄清楚它来指定多列的格式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T17:26:30.543

在您的第二个示例中，问题很可能是`usecols=(2)`. `usecols`必须是一个序列。`(2)`是整数 2，而不是包含 2 的单元素元组，并且很可能是错误消息所抱怨的：`loadtxt()`正在尝试遍历`int`. 使用`(2,)`（或`[2]`如果您愿意）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:25:54.417

在这种情况下，很难知道是什么导致了问题，因为您没有向我们提供足够的信息。鉴于您在此处发布的内容，您的代码应该可以工作：

```
>>> with open('beamtest.out', 'r') as f:
...     f.readlines()
... 
['header 0\n', 'header 1\n', 'header 2\n', 'header 3\n', 'header 4\n', 
 'header 5\n', 'header 6\n', 'header 7\n', 'header 8\n', 'header 9\n', 
 'header 10\n', 'header 11\n', 'header 12\n', 'header 13\n', 
 '3 0 36373.7641026\n', '3 1 36373.7641026\n', '3 2 36373.7641026']
>>> chunk, power = numpy.loadtxt('beamtest.out', skiprows=14,
                                 usecols=(1,2), unpack=True)
>>> chunk
array([ 0.,  1.,  2.])
>>> power
array([ 36373.7641026,  36373.7641026,  36373.7641026]) 
```

当然，正如[kindall](https://stackoverflow.com/a/10758854/577088)的回答所表明的那样，您的第二个示例将失败，因为`usecols`不接受单个整数；它[需要一个序列](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)。(`(1)`只是`1`在括号中；要创建一个元组，您需要一个逗号 -- `(1,)`。)

下面是一个如何使用`dtype`指定多列格式的示例：

```
>>> record = numpy.loadtxt('beamtest.out', skiprows=14, usecols=(1, 2), 
                           dtype={'names':('chunk', 'power'), 
                                  'formats':('i8', 'f8')}) 
>>> record
array([(0, 36373.7641026), (1, 36373.7641026), (2, 36373.7641026)], 
      dtype=[('chunk', '<i8'), ('power', '<f8')])
>>> record['chunk']
array([0, 1, 2])
>>> record['power']
array([ 36373.7641026,  36373.7641026,  36373.7641026]) 
```

# spring - 在一个新课程中，我的目标无法到达，标识符“”解析为 null

> ID：10758669
> 
> 赞同：0
> 
> 时间：2012-05-25T17:12:35.590
> 
> 标签：spring, hibernate, jsf

我有一个使用 Spring、JSF 和 Hibernate 的项目。这个项目已经开发了2个月。有很多模块可以工作。我在一个新包中创建了 ManagedBean，并从 xhtml 中对其进行了引用，但我得到了“非常常见的错误：”

```
Target Unreachable, identifier 'someName'  resolved to null 
```

于是找了找这个错误，才发现我的配置是正确的。我将我的课程复制到另一个包中，现在......它可以工作了。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:32:17.680

我知道是什么问题！

在我的 applicationContext.xml 中，我定义了

```
<context:component-scan base-package="com.framework.comun" /> 
```

所以我在课堂上的注释

```
com.sistema.comun.presentacion.controller 
```

不会被认出来！

谢谢

# oracle - 使用瘦 JDBC 客户端通过 LDAP/OID 查找解决 Oracle SID 的问题

> ID：10758674
> 
> 赞同：3
> 
> 时间：2012-05-25T17:13:00.550
> 
> 标签：oracle, jdbc, ldap, oid, tns

我们正在为我们的连接配置使用 OID/LDAP 查找。`TNS_ADMIN`环境变量和Java 属性都`oracle.net.tns_admin`设置正确，并指向包含 sqlnet.ora 和 ldap.ora 的目录。但是，JDBC 连接 URL：`jdbc:oracle:thin:@ourtnsalias`在尝试连接时抛出异常：

```
java.sql.SQLRecoverableException: IO Error: could not resolve the connect identifier  "ourtnsalias"
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:458)
        at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:546)
        at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:236)
        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
        at java.sql.DriverManager.getConnection(DriverManager.java:582)
        at java.sql.DriverManager.getConnection(DriverManager.java:185)
        at TnsTest.main(TnsTest.java:29)
Caused by: oracle.net.ns.NetException: could not resolve the connect identifier  "tnsalias"
        at oracle.net.resolver.NameResolver.resolveName(NameResolver.java:181)
        at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:416)
        at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:687)
        at oracle.net.ns.NSProtocol.connect(NSProtocol.java:247)
        at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1102)
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:320)
        ... 7 more
Exception in thread "main" java.lang.NullPointerException
        at TnsTest.main(TnsTest.java:46) 
```

以下类型的连接字符串连接成功：

*   完整的 TNS 字符串：
    `jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=host.company.com)(PORT=####))(CONNECT_DATA=(SERVICE_NAME=service_name)))`
*   完整的 LDAP 网址：
    `jdbc:oracle:thin:@ldap://oid.company.net:####/ourtnsname,CN=OracleContext,dc=company,dc=net`

这似乎暗示问题出在 LDAP/OID 查找上。但是，运行`tnsping ourtnsname`也连接成功。

在进行 OID/LDAP 查找时，有没有办法在连接字符串中只使用 TNS 别名？

为了完整起见，这里是相关的 Java：

```
String connectionURL = "jdbc:oracle:thin:@ourtnsalias";
System.setProperty("oracle.net.tns_admin", "c:/oracle/network/admin");
Class.forName("oracle.jdbc.OracleDriver");
Connection c = DriverManager.getConnection(connectionURL, userid, password); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:37:51.247

在把我的头撞到墙上之后，我们发现问题是 TNS 名称条目在多行中有无效的制表符/间距，导致它无法正确解析。

在我们的案例中，令人惊讶的是 TNSPING 能够正确解析 TNSNAMES.Ora 文件，但 jdbc Oracle 驱动程序却不能。

删除 TNSNAmes 条目中的所有间距，然后小心地重新添加，注意此处描述的规则：

[http://docs.oracle.com/cd/A57673_01/DOC/net/doc/NWUS233/apb.htm](http://docs.oracle.com/cd/A57673_01/DOC/net/doc/NWUS233/apb.htm)

帮助我们解决了问题。

导致我们得到答案的是，在更改连接标识符时我们会得到一个不同的错误，即从这里切换：

```
jdbc:oracle:thin:@ourtnsalias 
```

至：

```
jdbc:oracle:thin:@unknown 
```

给出了一个不同的错误（以及检查 sysinternals 进程监视器以​​确保 TNSNAmes.ora 文件实际上正在被读取）表明它正在解析 TNS 文件，但是该条目有问题导致事情出错。

我不禁认为，如果 JDBC Oracle 客户端返回一个更有意义的错误，即“无法解析 TNS 条目以获取连接标识符”，这一切都可以轻松解决！

希望这对其他人有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:35:34.737

我不是程序员，而是 dba，并且曾经帮助过我的一位同事解决同样的问题。所以让我知道这是否有帮助

```
System.setProperty("oracle.net.tns_admin", "c:/oracle/network/admin"); 
```

应该

```
System.setProperty("oracle.net.tns_admin", "c://oracle//network//admin"); 
```

或者

```
System.setProperty("oracle.net.tns_admin", "c:\\oracle\\network\\admin"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T11:34:09.663

在 tnsnames.ora 中查找无效字符。

我有

```
test, test.WORLD=... 
```

在我的档案中。将其更改为

```
test.WORLD= 
```

解决了这个问题。

# c# - 如何强制在 maskedtextbox 中只允许数值？

> ID：10758683
> 
> 赞同：5
> 
> 时间：2012-05-25T17:13:58.990
> 
> 标签：c#, .net, winforms

我对 Winforms 相当陌生，我想知道如何使用 MaskedTextBox 来确保用户只输入数值（包括小数）。

我已经尝试使用 "/^[-+]?[0-9]+(.[0-9]+)?$/" 进行屏蔽功能，但没有成功。我想要的，即使使用普通的文本框，也只允许数字/十进制值

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T17:39:22.800

为什么不直接使用 NumericUpDown？设置您的最大值和最小值、小数位数，然后离开。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T17:55:10.327

MaskedTextBox 的掩码不是正则表达式模式；他们使用自己的语法。

您想要的模式可能类似于“999,990.9999”。这要求用户至少输入一位数字，但他们可以输入从 0 到 999,999.9999 的任何数字，精度最高为 4 位小数，并在需要时自动插入千位分隔符。

您可以做的另一件事，类似于 MaskedTextBox 本身所做的，是覆盖 OnKeyPress 以拒绝输入的任何会导致 Regex 不匹配的字符：

```
public class RegexTextBox:TextBox
{
   [Category("Behavior")]
   public string RegexPattern {get;set;}

   protected override OnKeyPress(KeyPressEventArgs e)
   { 
      if (!Regex.IsMatch(this.Text + e.KeyChar, RegexPattern)) e.Handled = true;
      else base.OnKeyPress(e);
   }
} 
```

定义模式时必须小心，因为只有当到目前为止输入的内容与模式匹配时它才会起作用。但是，如果您使用类似`"[0-9]{1,3}((,[0-9]{1,3})*(\.[0-9]*)?"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T17:53:24.090

我改编了这个 NumericTextBox 控件：[http ://sanity-free.org/forum/viewtopic.php?pid=1205#p1205](http://sanity-free.org/forum/viewtopic.php?pid=1205#p1205)

如果您希望它脱离您的工具箱，您可能会基于 TextBox 创建一个新控件，并将该链接中的代码粘贴到代码部分。

这是我的版本。我不知道我已经修改了多少，因为我已经有很长时间了。

**NumericTextBox.Designer.cs：**

```
using System.Windows.Forms;

namespace SeaRisenLib2.Controls
{
    partial class NumericTextBox : TextBox
    {
        /// <summary> 
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary> 
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Component Designer generated code

        /// <summary> 
        /// Required method for Designer support - do not modify 
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            components = new System.ComponentModel.Container();
            //this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        }

        #endregion
    }
} 
```

**数字文本框.cs**

```
// From: http://sanity-free.org/forum/viewtopic.php?pid=1205#p1205
// modified it slightly
//
/******************************************************/
/*          NULLFX FREE SOFTWARE LICENSE              */
/******************************************************/
/*  NumericTextBox Library                            */
/*  by: Steve Whitley                                 */
/*  © 2005 NullFX Software                            */
/*                                                    */
/* NULLFX SOFTWARE DISCLAIMS ALL WARRANTIES,          */
/* RESPONSIBILITIES, AND LIABILITIES ASSOCIATED WITH  */
/* USE OF THIS CODE IN ANY WAY, SHAPE, OR FORM        */
/* REGARDLESS HOW IMPLICIT, EXPLICIT, OR OBSCURE IT   */
/* IS. IF THERE IS ANYTHING QUESTIONABLE WITH REGARDS */
/* TO THIS SOFTWARE BREAKING AND YOU GAIN A LOSS OF   */
/* ANY NATURE, WE ARE NOT THE RESPONSIBLE PARTY. USE  */
/* OF THIS SOFTWARE CREATES ACCEPTANCE OF THESE TERMS */
/*                                                    */
/* USE OF THIS CODE MUST RETAIN ALL COPYRIGHT NOTICES */
/* AND LICENSES (MEANING THIS TEXT).                  */
/*                                                    */
/******************************************************/
/* Changed by Carlos Montiers                         */
/* Decimal separator "." or "," depending on locale   */
/* Constructor for numericTextBox whith or without    */
/* negative range and number of decimals.             */
/* Does not allow the entry of non-numeric character  */
/* through alt + ascii code                           */
/* Permit use of tab key                              */
/* Version: 24-10-2008                                */
/******************************************************/

using System;
using System.Drawing;
using System.Windows.Forms;
using System.Text.RegularExpressions;

namespace SeaRisenLib2.Controls
{
    public partial class NumericTextBox : TextBox
    {
        private const int WM_KEYDOWN = 0x0100;
        private const int WM_PASTE = 0x0302;
        private int decimalNumbers;
        private bool hasNegatives;
        private string format;

        public delegate void D(NumericTextBox sender);
        /// <summary>
        /// Fired when Text changes
        /// </summary>
        public event D Changed = delegate { };

        /// <summary>
        /// Constructor of a NumericTextBox, with negative number and 2 decimals.
        /// </summary>
        public NumericTextBox()
            : this(2, true)
        {
        }

        /// <summary>
        /// Constructor with parameters
        /// </summary>
        /// <param name="decimalNumbers">number of decimals</param>
        /// <param name="hasNegatives">has negatives</param>
        public NumericTextBox(int decimalNumbers, bool hasNegatives)
            : base()
        {
            InitializeComponent();
            DecimalNumbers = decimalNumbers;
            HasNegatives = hasNegatives;
            Format = Format;
        }

        /// <summary>
        /// Property of decimalNumbers
        /// </summary>
        public int DecimalNumbers
        {
            get
            {
                return decimalNumbers;
            }
            set
            {
                decimalNumbers = value > 0 ? value : 0;
            }
        }

        /// <summary>
        /// Bindable Decimal Text
        /// </summary>
        public decimal DecimalText
        {
            get {
                if(string.IsNullOrEmpty(Text))
                    return 0;

                return Convert.ToDecimal(Text);
            }
            set { Text = value.ToString(); }
        }

        /// <summary>
        /// The string text value of the numeric text, use DecimalText to get the numeric value.
        /// </summary>
        public override string Text
        {
            get { return base.Text; }
            set
            {
                base.Text = value;
                Changed(this);
            }
        }

        /// <summary>
        /// Property of hasNegatives
        /// </summary>
        public bool HasNegatives
        {
            get
            {
                return hasNegatives;
            }
            set
            {
                hasNegatives = value;
            }
        }

        /// <summary>
        /// Property of format
        /// </summary>
        public string Format
        {
            get
            {
                return format;
            }
            set
            {
                format = "^";
                format += HasNegatives ? "(\\" + getNegativeSign() + "?)" : "";
                format += "(\\d*)";
                if (DecimalNumbers > 0)
                {
                    format += "(\\" + getDecimalSeparator() + "?)";
                    for (int i = 1; i <= DecimalNumbers; i++)
                    {
                        format += "(\\d?)";
                    }
                }
                format += "$";
            }
        }

        /// <summary>
        /// Method PreProcessMessage
        /// </summary>
        /// <param name="msg">ref Message</param>
        /// <returns>bool</returns>
        public override bool PreProcessMessage(ref Message msg)
        {
            if (msg.Msg == WM_KEYDOWN)
            {
                Keys keys = (Keys)msg.WParam.ToInt32();

                bool numbers = ModifierKeys != Keys.Shift
                                && (keys >= Keys.D0 && keys <= Keys.D9
                                    || (keys >= Keys.NumPad0 && keys <= Keys.NumPad9));

                bool dec = ModifierKeys != Keys.Shift
                            && (keys == Keys.Decimal
                                || keys == Keys.Oemcomma
                                || keys == Keys.OemPeriod);

                bool negativeSign = (keys == Keys.OemMinus && ModifierKeys != Keys.Shift)
                                    || keys == Keys.Subtract;

                bool home = keys == Keys.Home;
                bool end = keys == Keys.End;

                bool ctrlZ = keys == Keys.Z && ModifierKeys == Keys.Control;
                bool ctrlX = keys == Keys.X && ModifierKeys == Keys.Control;
                bool ctrlC = keys == Keys.C && ModifierKeys == Keys.Control;
                bool ctrlV = keys == Keys.V && ModifierKeys == Keys.Control;

                bool del = keys == Keys.Delete;
                bool bksp = keys == Keys.Back;

                bool tab = keys == Keys.Tab;

                bool arrows = keys == Keys.Up
                              || keys == Keys.Down
                              || keys == Keys.Left
                              || keys == Keys.Right;

                if (numbers || del || bksp || arrows || home || end
                    || ctrlC || ctrlX || ctrlV || ctrlZ)
                {
                    return false;
                }
                else
                {
                    if (dec)
                    {
                        return DecimalNumbers <= 0;
                    }
                    else
                    {
                        if (negativeSign)
                        {
                            return !HasNegatives;
                        }
                        else
                        {
                            if (tab)
                            {
                                return base.PreProcessMessage(ref msg);
                            }
                            else
                            {
                                return true;
                            }
                        }
                    }
                }
            }
            else
            {
                return base.PreProcessMessage(ref msg);
            }
        }

        /// <summary>
        /// Method WndProc
        /// </summary>
        /// <param name="m">ref Message</param>
        protected override void WndProc(ref Message m)
        {
            if (m.Msg == WM_PASTE)
            {
                IDataObject obj = Clipboard.GetDataObject();
                string input = (string)obj.GetData(typeof(string));
                string pasteText = getPosibleText(input);

                if (!isValidadFormat(pasteText))
                {
                    m.Result = (IntPtr)0;
                    return;
                }
            }
            base.WndProc(ref m);
        }

        /// <summary>
        /// Method OnKeyPress
        /// </summary>
        /// <param name="e">KeyPressEventArgs</param>
        protected override void OnKeyPress(KeyPressEventArgs e)
        {
            base.OnKeyPress(e);
            string keyInput = e.KeyChar.ToString();
            string inputText = getPosibleText(keyInput);

            if (Char.IsDigit(e.KeyChar)
                || keyInput.Equals(getDecimalSeparator())
                || keyInput.Equals(getNegativeSign()))
            {
                e.Handled = !isValidadFormat(inputText);
            }
            else if (e.KeyChar == '\b'
                    || e.KeyChar == '\t'
                    || keyInput.Equals(Keys.Delete.ToString())
                    || keyInput.Equals(Keys.Home.ToString())
                    || keyInput.Equals(Keys.End.ToString()))
            {
                //Allow backspace, tab, delete, home, end
            }
            else if (e.KeyChar == 26
                     || e.KeyChar == 24
                     || e.KeyChar == 3
                     || e.KeyChar == 22)
            {
                // 26 : Allow Ctrl+Z | 24 : Allow Ctrl+X
                //  3 : Allow Ctrl+C | 22 : Allow Ctrl+V
            }
            else
            {
                //Disallow
                e.Handled = true;
            }
        }

        /// <summary>
        /// Method OnTextChanged
        /// </summary>
        /// <param name="e">System.EventArgs</param>
        protected override void OnTextChanged(System.EventArgs e)
        {
            if (getFloatValue() < 0)
            {
                this.ForeColor = Color.Red;
            }
            else
            {
                this.ForeColor = Color.Black;
            }

            //If the decimal point is preceded by a no number is added zero
            if (this.Text.StartsWith(getNegativeSign() + getDecimalSeparator()))
            {
                this.Text = getNegativeSign() + "0" + this.Text.Substring(1);
                this.Select(3, 0);
            }
            else
            {
                if (this.Text.StartsWith(getDecimalSeparator()))
                {
                    this.Text = "0" + this.Text;
                    this.Select(2, 0);
                }
            }
            base.OnTextChanged(e);
        }

        /// <summary>
        /// Method for validate text with format
        /// </summary>
        /// <param name="text">text</param>
        /// <returns>is valid format</returns>
        private bool isValidadFormat(string text)
        {
            return Regex.IsMatch(text, Format);
        }

        /// <summary>
        /// Method for get deciamal separator
        /// </summary>
        /// <returns>Decimal Separator of current culture</returns>
        private string getDecimalSeparator()
        {
            return System.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator;
        }

        /// <summary>
        /// Method for get negative sign
        /// </summary>
        /// <returns>Negative Sign of current culture</returns>
        private string getNegativeSign()
        {
            return System.Globalization.CultureInfo.CurrentCulture.NumberFormat.NegativeSign;
        }

        /// <summary>
        /// Method for get posible resulting text for input text
        /// </summary>
        /// <param name="text">string with input text</param>
        /// <returns>posible text</returns>
        private string getPosibleText(string text)
        {
            string rText;
            rText = this.Text.Substring(0, SelectionStart);
            rText += text;
            rText += this.Text.Substring(SelectionStart + SelectionLength);
            return rText;
        }

        /// <summary>
        /// Method for get int value of text
        /// </summary>
        /// <returns>int value</returns>
        public int getIntValue()
        {
            try
            {
                return (int)getFloatValue();
            }
            catch
            {
                return 0;
            }
        }

        /// <summary>
        /// Method for get round int value of text
        /// </summary>
        /// <returns>round int value</returns>
        public int getIntRoundValue()
        {
            try
            {
                return (int)Math.Round(getFloatValue());
            }
            catch
            {
                return 0;
            }
        }

        /// <summary>
        /// Method for get float value of text
        /// </summary>
        /// <returns>float value</returns>
        public float getFloatValue()
        {
            try
            {
                return float.Parse(this.Text);
            }
            catch
            {
                return 0;
            }
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-30T09:16:21.463

谢谢，下面的工作代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Windows.Forms;

namespace System.Windows.Forms {
    public class RegexTextBox : TextBox {
        [Category("Behavior")]
        public string RegexPattern { get; set; }
        private bool DelOrBack = false;
        protected override void OnKeyDown(KeyEventArgs e) {
            base.OnKeyDown(e);
            if (e.KeyCode == Keys.Back || e.KeyCode == Keys.Delete) {
                DelOrBack = true;
            }
        }

        protected override void OnKeyPress(KeyPressEventArgs e) {
            if (!Regex.IsMatch(this.Text + e.KeyChar, RegexPattern) && !DelOrBack) {
                e.Handled = true;               
            }
            else {
                base.OnKeyPress(e);
            }

            DelOrBack = false;
        }
    }

    public class NumericTextBox : RegexTextBox {
        public NumericTextBox() {
            RegexPattern = "^[0-9]+$";
        }
    }
} 
```

# forms - 如何强制集合成为表单中的单个下拉菜单

> ID：10758685
> 
> 赞同：0
> 
> 时间：2012-05-25T17:14:03.407
> 
> 标签：forms, symfony

我想为我的用户角色集合创建一个下拉 dwon 菜单，如下所示：

```
 class UserType extends AbstractType
    {
        public function buildForm(FormBuilder $builder, array $options)
        {
            $builder
                ->add('userRoles',null, array('multiple'=>false))
            ;
        } 
```

但我收到此错误消息：

```
Expected an object, but got a collection. Did you forget to pass
"multiple=true" to an entity field? 
```

任何想法如何使收藏不能多选！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:12:49.847

如果您将“multiple”设置为 false，您正在使用的字段类型（“entity”）需要一个简单的对象作为输入。出于您的目的，您可能希望使用 CallbackTransformer 在集合和对象之间进行转换：

```
$builder->add(
    $builder->create('userRoles', null, array('multiple' => false))
        ->addModelTransformer(new CallbackTransformer(
            // transform the collection to its first element
            function (Collection $coll) { return $coll[0]; },
            // transform the element to a collection
            function (MyEntity $entity) { return new ArrayCollection(array($entity)); }
        ))
); 
```

如果你不使用最新的 Symfony2 master，你应该使用不推荐使用的方法`prependNormTransformer()`而不是`addModelTransformer()`.

# c++ - 模板类继承

> ID：10758686
> 
> 赞同：4
> 
> 时间：2012-05-25T17:14:15.697
> 
> 标签：c++, templates, inheritance

我对以下代码有疑问（这是一个非常简化的示例，可以在我的程序中重现错误）：

```
#include <iostream>

using namespace std;

template<class T> class CBase
{
    public:
        template <class T2> CBase(const T2 &x) : _var(x) {;}
        template <class T2> CBase (const CBase<T2> &x) {_var = x.var();}
        ~CBase() {;}
        T var() const {return _var;}
    protected:
        T _var;
};

template<class T> class CDerived : public CBase<T>
{
    public:
        template <class T2> CDerived(const T2 &x) : CBase<T>(x) {;}
        template <class T2> CDerived (const CBase<T2> &x) : CBase<T>(x) {;}
        ~CDerived() {;}
};

int main()
{
    CBase<double> bd(3);
    CBase<int> bi(bd); // <- No problem
    CDerived<double> dd1(3);
    CDerived<double> dd2(dd1);
    CDerived<int> di(dd1); // <- The problem is here
    return 0;
} 
```

错误如下：

```
error: cannot convert 'const CDerived<double>' to 'int' in initialization 
```

如何解决？（优先在基类中而不是在派生类中进行修改，并且尽可能不使用虚拟性）

非常感谢你

编辑：如果我将相关行替换为：`CDerived<int> di(CBase<int>(CBase<double>(dd1)));`它可以工作，但它不是很实用......

编辑：似乎可以解决：

```
template <class T2> CDerived(const CDerived<T2> &x) : CBase<T>(static_cast<const CBase<T2>&>(x)) {;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:21:31.403

```
CDerived<int> di(dd1); // <- The problem is here 
```

这会调用 的第一个构造函数`CDerived`，因此`T2`推断出`CDerived<double>`哪个是 的类型`dd1`。然后，`dd1`成为`x`构造函数；`x`也就是说`CDerived<double>`，被传递给接受的基类构造函数（这是类模板`int`的类型参数的值`T`） 。`CDerived`因此错误， as`CDerived<double>`不能转换为`int`. 请注意`T`是`CBase`。`int`

将其视为：

```
CDerived<int> di(dd1); // <- The problem is here
          ^       ^
          |       |
          |       this helps compiler to deduce T2 as double
          |
          this is T of the CDerived as well as of CBase 
```

如果您想让您的代码正常工作，请执行以下操作：

1.  *首先是公开*而不是*私下*派生。
2.  添加另一个构造函数`CDerived<T2>`作为参数。

所以你需要这样做：

```
template<class T> class CDerived : public CBase<T>  //derived publicly
{
    public:
        template <class T2> CDerived(const T2 &x) : CBase<T>(x) {;}

        //add this constructor
        template <class T2> CDerived(const CDerived<T2> &x) : CBase<T>(x.var()) {;}

        template <class T2> CDerived (const CBase<T2> &x) : CBase<T>(x) {;}
        ~CDerived() {;}
}; 
```

它现在应该可以工作了：[在线演示](http://ideone.com/CAQ8q)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:33:33.047

尝试创建另一个构造函数，该构造函数在基类中采用通用对象并使用动态转换分配值。

```
template <class T2> CBase (const Object &x) : _var() {
    try {
        const CBase<T2> &x_casted = dynamic_cast<const CBase<T2> &> (x);
        _var = x_casted.var();
    }
    catch {
        std::cerr << "Object not of type CBase" << std::endl; 
    }
} 
```

注意：这可能被认为是糟糕的风格。动态转换在运行时比使用`virtual`和重载更昂贵，因此请考虑重构代码。

# php - 当我使用 text/html 时，php mail() 函数不发送邮件

> ID：10758687
> 
> 赞同：1
> 
> 时间：2012-05-25T17:14:20.550
> 
> 标签：php, email

因此，当我在不修改标题信息的情况下执行此操作以发送它发送的 html 类型的电子邮件时，但是当我将它作为 html 电子邮件发送时，它永远不会被发送。

这是代码：

```
<?php
    $to = "someone@gmail.com";
    $subject = "Order Confimation - mywebsite.com";
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $headers .= "From: <contact@mywebsite.com>";
    $message = "
        <!DOCTYPE html>
        <html lang='en-us'>
            <head>
                <meta charset='utf-8'>
                <title>Order Confirmation</title>
                <style type='text/css'>
                    //style information
                </style>
            </head>
            <body>
                <div class='box'>
                    <h1 class='right'>Thanks!</h1>
                    //Blah blah blah
                </div>
            </body>
        </html>
    ";

    mail($to, $subject, $message, $headers);

    if (mail($to, $subject, $message, $headers)) {
        echo "<p class='hide'>E-mail Sent</p>";
    } else {
        echo "<p class='hide'>Problem</p>";
    }           
?> 
```

它会返回已发送的电子邮件，但电子邮件永远不会进入收件箱

有什么建议么？

还启用了梨包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:53:18.973

上面写的代码没有问题（除了你调用`mail()`了两次——一次在错误检查循环之外，一次在“if”内——所以你发送了 2 封电子邮件）

快速测试可以很好地发送到 Google Apps 电子邮件地址，因此没有任何关于特别应该引起问题的代码。

垃圾邮件过滤是一个累积游戏。可能有多个小错误，没有一个将您标记为垃圾邮件，但累积地提示您的分数超过了限制。

在这种情况下，您发送的是一封没有 text/plain 组件的纯 HTML 电子邮件。这对你的分数来说是一个负分，这似乎是压垮骆驼的稻草。如果您从声誉不佳的共享主机发送邮件，您可能会得到更多的分数，并且您的 PHP 邮件设置可能会推送无效的返回路径或其他基于来源的错误，这也算在内。

[您可以尝试根据http://krijnhoetmer.nl/stuff/php/html-plain-text-mail/](http://krijnhoetmer.nl/stuff/php/html-plain-text-mail/)发送包含 text/plain 和 text/html 的多部分

如果这不起作用，那么如果您发布成功的纯文本电子邮件的完整标题，那么我可能会看到您是否有其他指标。

Gmail 将接受大多数邮件，但在接受后只是将其黑化，因此如果您使用它进行测试，您将不会得到太多反馈。

电子邮件是一个棘手的游戏，如果您需要为您的应用程序的成功交付，您可能需要考虑使用第三方服务：

*   [http://SendGrid.com](http://SendGrid.com)
*   [http://PostageApp.com](http://PostageApp.com)
*   [http://PostmarkApp.com](http://PostmarkApp.com)

这些服务旨在从应用程序发送事件驱动的电子邮件并处理 ISP 交付端的所有混乱。

**全面披露：**我是 PostageApp 的交付能力专家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:23:57.360

我注意到你没有

```
$headers .= 'To: '; 
```

这可能与它有关吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:27:58.067

如果您在 php 中使用邮件功能，我认为您需要包含外发邮件的 SMTP 设置。因此，从技术上讲，您的邮件将被报告为已发送，但不会通过邮件提供商。（我知道在使用邮件功能时您需要在 java 中执行此操作。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:43:00.583

mail 函数返回 true，所以你应该说：

```
// mail() function return 0 if all right, so compare this with 0
if (mail($to, $subject, $message, $headers)) {
    echo "E-mail Sent";
} else {
    echo "Problem";
} 
```

不是 ：

```
if (mail($to, $subject, $message, $headers)==0) 
```

# java - 为什么在构造函数上创建新线程是不好的做法？

> ID：10758690
> 
> 赞同：2
> 
> 时间：2012-05-25T17:14:22.173
> 
> 标签：java, multithreading

> **可能重复：**
> [Java：为什么不在构造函数中启动线程？如何终止？](https://stackoverflow.com/questions/5623285/java-why-not-to-start-a-thread-in-the-constructor-how-to-terminate)

我习惯于在我的代码上运行[FindBugs](http://findbugs.sourceforge.net/)以查找错误或不良做法。今天它抱怨我在类构造函数中启动一个线程。

真的是一件坏事吗？你能解释一下为什么吗？

如果我的课程是最终的，至少是安全的吗？

**编辑**：

该线程被实现为一个内部类，它只使用在它启动时已经初始化的主类的字段：

```
public final class SingletonOuter {
    private static SingletonOuter ourInstance = new SingletonOuter();

    public static SingletonOuter getInstance() {
        return ourInstance;
    }

    private final SomeOtherClass aField;

    private SingletonOuter() {
        aField=new SomeOtherClass(); 
        thread=new InnerThread();
        thread.start();
    }

    private boolean pleaseStop;

    private synchronized boolean askedStop(){return pleaseStop;}
    public synchronized void stop(){
        pleaseStop=true;  
    }

    private final InnerThread thread ;
    private class InnerThread extends Thread{
        @Override public void run() {
            //do stuff with aField until askedStop()
        }
    }

} 
```

**编辑**：

我最后将线程的开始移动到 getInstance 方法，以避免引入未来错误的可能性：

```
public final class SingletonOuter {
        private static SingletonOuter ourInstance

        public static SingletonOuter getInstance() {
            if (ourInstance==null){
                ourInstance= = new SingletonOuter();
                ourInstance.thread.start();
            }

            return ourInstance;
        }

        private final SomeOtherClass aField;

        private SingletonOuter() {
            aField=new SomeOtherClass(); 
            thread=new InnerThread();

        }
        ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:18:39.470

> 为什么在构造函数上创建新线程是不好的做法？

Findbugs 提醒您注意围绕对象构造的指令重新排序可能性的问题。尽管为新对象分配了内存空间，但不能保证在您启动时任何字段都已初始化`InnerThread`。尽管`final`字段*会*在构造函数完成之前被初始化，但不能保证如果`InnerThread`开始使用（例如）`aField`在它启动时会被初始化。Java 编译器出于性能原因这样做。它还可以选择将非最终字段的初始化移动到构造函数返回新实例 *之后。*

如果您在构造函数中启动一个新线程，则该线程可能会处理部分初始化的对象。即使`thread.start()`是构造函数中的最后一条语句，新线程也可能由于重新排序而访问部分构造的对象。这是 Java 语言规范的一部分。

这是关于该主题的一个很好的链接：[在其自己的构造函数中调用 thread.start()](https://stackoverflow.com/questions/84285/calling-thread-start-within-its-own-constructor)

它提到以下内容：

> 通过从构造函数中启动它，您肯定会违反 Java 内存模型准则。有关更多信息，请参阅[Brian Goetz 的安全施工技术](http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html)。

**编辑：**

由于您的代码正在启动一个正在访问的新线程，`afield`因此根据[Java 内存模型](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#finalRight)，无法保证`afield`在线程开始运行时会正确初始化。

我建议改为`start()`在您的类上添加一个调用`thread.start()`. 这是一种更好的做法，并且使使用此类的其他类更容易看到在构造函数中创建线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:18:53.700

一般来说，最好对你在构造函数中所做的事情保持温和。

您的对象仍处于无效状态，因此您不希望任何人访问它。当您从构造函数启动线程时，它可能会引用正在构造的对象（否则为什么构造函数会启动它？）。当线程启动时，该引用将指向一个无效对象，不久之后它将变为有效。那里有可能立即出现可怕的比赛条件。

这是一篇关于它的好文章的链接[http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html](http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:18:22.577

每次实例化该类时，都会创建一个线程。线程很昂贵并且很难测试。如果您实例化许多对象，您将遇到性能问题，您应该考虑使用 ThreadPool 来修复线程数的限制。此外，如果您在尝试对线程中发生的任何行为进行单元测试时遇到问题。

# ruby - 如何在 ruby 中批量重命名文件

> ID：10758694
> 
> 赞同：12
> 
> 时间：2012-05-25T17:14:29.740
> 
> 标签：ruby

我一直在尝试编写一个基于 ruby​​ 的文件重命名程序，作为自己的编程练习（我知道在 linux 下重命名，但我想学习 Ruby，而重命名在 Mac 中不可用）。

从下面的代码中，问题是该`.include?`方法总是返回 false，即使我看到文件名包含这样的搜索模式。如果我注释掉`include?`检查，`gsub()`似乎根本不会生成新的文件名（即文件名保持不变）。那么有人可以看看我做错了什么吗？提前致谢！

这是预期的行为： 假设在当前文件夹中有三个文件：a1.jpg、a2.jpg 和 a3.jpg Ruby 脚本应该能够将其重命名为 b1.jpg、b2.jpg、b3.jpg

```
#!/Users/Antony/.rvm/rubies/ruby-1.9.3-p194/bin/ruby

puts "Enter the file search query"
searchPattern = gets
puts "Enter the target to replace"
target = gets
puts "Enter the new target name"
newTarget = gets
Dir.glob("./*").sort.each do |entry|
  origin = File.basename(entry, File.extname(entry))
  if origin.include?(searchPattern)
    newEntry = origin.gsub(target, newTarget)
    File.rename( origin, newEntry )
    puts "Rename from " + origin + " to " + newEntry
  end
end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T17:40:26.440

稍作修改的版本：

```
puts "Enter the file search query"
searchPattern = gets.strip
puts "Enter the target to replace"
target = gets.strip
puts "Enter the new target name"
newTarget = gets.strip
Dir.glob(searchPattern).sort.each do |entry|
  if File.basename(entry, File.extname(entry)).include?(target)
    newEntry = entry.gsub(target, newTarget)
    File.rename( entry, newEntry )
    puts "Rename from " + entry + " to " + newEntry
  end
end 
```

主要区别：

*   用于`.strip`删除您从中获得的尾随换行符`gets`。否则，这个换行符会打乱你所有的匹配尝试。
*   在调用中使用用户提供的搜索模式，`glob`而不是使用通配符查找所有内容，然后稍后手动过滤。
*   在调用中使用`entry`（即完整的文件名）`gsub`而`rename`不是`origin`. `origin`真的只对`.include?`测试有用。由于它是文件名的片段，因此不能与`rename`. 我完全删除了`origin`变量以避免滥用它的诱惑。

对于您的示例文件夹结构，输入`*.jpg`、`a`和`b`对于三个输入提示（分别）应该按照您的预期重命名文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-18T16:08:39.003

我使用公认的答案来修复一堆复制的文件名。

```
Dir.glob('./*').sort.each do |entry|
  if File.basename(entry).include?(' copy')
    newEntry = entry.gsub(' copy', '')
    File.rename( entry, newEntry )
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T17:27:20.600

您的问题是`gets`在字符串末尾返回换行符。因此，如果您键入“foo”，则`searchPattern`变为`"foo\n"`. 最简单的解决方法是：

```
searchPattern = gets.chomp 
```

* * *

我可能会稍微重写你的代码：

```
$stdout.sync
print "Enter the file search query: "; search  = gets.chomp
print "Enter the target to replace: "; target  = gets.chomp
print "  Enter the new target name: "; replace = gets.chomp
Dir['*'].each do |file|
  # Skip directories
  next unless File.file?(file)
  old_name = File.basename(file,'.*')
  if old_name.include?(search)
    # Are you sure you want gsub here, and not sub?
    # Don't use `old_name` here, it doesn't have the extension
    new_name = File.basename(file).gsub(target,replace)
    File.rename( file, new_path )
    puts "Renamed #{file} to #{new_name}" if $DEBUG
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-04T13:37:14.307

这是我今天使用的一个简短版本（没有模式匹配）

将此保存为 rename.rb 文件并使用**ruby​​ rename.rb在命令提示符下运行它**

```
count = 1
newname = "car"
Dir["/path/to/folder/*"].each do |old|
  File.rename(old, newname + count.to_s)
  count += 1
end 
```

我将 _MG_2435.JPG 的 /Copy 转换为 car1、car2、...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-30T03:06:35.783

我制作了一个小脚本来按季节重命名整个 DBZ 系列并实现它：

```
count = 1
new_name = "Dragon Ball Z S05E"
format_file = ".mkv"
Dir.glob("dragon ball Z*").each do |old_name|
  File.rename(old_name, new_name + count.to_s + format_file)
  count += 1
end 
```

结果将是： *龙珠 Z S05E1 龙珠 Z S05E2 龙珠 Z S05E3*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-29T12:53:18.477

在文件夹中，我想删除`_`任何音频文件名的尾随下划线，同时保留其他所有内容。在这里分享我的代码，因为它可能对某人有所帮助。该程序的作用：

1.  提示用户：
    *   目录路径：（`c:/your/path/here`确保使用斜杠`/`，而不是反斜杠，`\`并且没有最后一个）。
    *   文件扩展名：（`mp3`不带点`.`）
    *   要删除的尾随字符：`_`
2.  查找任何以 结尾的文件`c:/your/path/here/filename_.mp3`并重命名它`c:/your/path/here/filename.mp3`，同时保留文件的原始扩展名。

```
 puts 'Enter directory path'

path = gets.strip

directory_path = Dir.glob("#{path}/*")

# Get file extension

puts 'Enter file extension'

file_extension = gets.strip

# Get trailing characters to remove

puts 'Enter trailing characters to remove'

trailing_characters = gets.strip

suffix = "#{trailing_characters}.#{file_extension}"

# Rename file if condition is met

directory_path.each do |file_path|
  next unless file_path.end_with?(suffix)

  File.rename(file_path, "#{file_path.delete_suffix(suffix)}.#{file_extension}")
end 
```

# wpf - Intellisense 在哪里寻找 XAML 编辑中 Brush 属性的选项？

> ID：10758699
> 
> 赞同：3
> 
> 时间：2012-05-25T17:14:41.420
> 
> 标签：wpf, visual-studio, xaml, intellisense

在 WPF 应用程序中，如果我想创建一个矩形，我开始在 XAML 中编写：

```
<Rectangle Fill= 
```

在我输入最后一个`=`字符后，Visual Studio 的 Intellisense 会给我这个`Fill`属性的一堆选项，比如 AliceBlue、AntiqueWhite 等等。我发现这些常量来自 class `Brushes`，但在我自己的类中定义的常量不会包含在该属性的选项列表中。所以我有两个问题。

1.  属性`Fill`是类型`Brush`。类型`Brush`是普通类型，不是枚举类型。Intellisense 如何为此类属性寻找选项？
2.  Intellisense 是否可以将在 WPF 核心程序集之外定义的对象视为某个属性的选项？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:01:36.660

智能感知从中提取`System.Windows.Media.Brushes`的只是几个默认`SolidColorBrush`值。不过，您可以使用任何画笔类型，例如`LinearGradientBrush`、`RadialGradientBrush`或`ImageBrush`。如果您想定义自己的颜色，您可以使用颜色的十六进制值（例如，#FFFF0000，对于 aRGB 值 255 不透明度、255 红色、0 绿色、0 蓝色），或者您可以在 XAML 中定义资源并使用`StaticResource`或`DynamicResource`(如果您打算在运行时更改此值）。

Intellisense 使用反射来查找变量、方法和函数。该颜色列表来自此类，如下所示：

```
public sealed class Brushes {
    public static SolidColorBrush AliceBlue {
        get {
            return KnownColors.SolidColorBrushFromUint(-984833);
        }
    }

    public static SolidColorBrush AntiqueWhite {
        get {
            return KnownColors.SolidColorBrushFromUint(-332841);
        }
    }
} 
```

不确定您在第二个问题中到底要问什么，但它只会提供与给定程序集直接相关的内容。如果你能澄清这个问题，请做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T20:55:52.380

Intelisense 正在向您显示列表，因为这里有这些定义 `xs:attribute` `name="Fill" type="StringToBrushConverter"/`

看一下 StringToBrushConverter 的定义

```
name="StringToBrushConverter">
    pattern value="AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenrod|DarkGray|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGray|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGray|DodgerBlue|Firebrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|Goldenrod|Gray|Green|GreenYellow|Honeydew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenrodYellow|LightGray|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGray|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquamarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenrod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGray|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen"/>
    </xs:restriction>
  </xs:simpleType> 
```

一切都取自本地化的 WPFe 模式：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Xml\Schemas

# php - PHP中的mysql_num_rows警告

> ID：10758709
> 
> 赞同：0
> 
> 时间：2012-05-25T17:15:51.143
> 
> 标签：php, mysql

这段代码有什么问题

```
$con=Connect();
mysql_select_db('fyp-ms_zxq_final',$con);
$result=mysql_query($query);
$row=mysql_num_rows($result); 
```

警告警告：mysql_num_rows() 期望参数 1 是资源，在第 26 行的 C:\xampp\htdocs\PHP\Faculty.php 中给出的布尔值=>$row 行

请告诉我有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:17:21.793

这意味着您的查询失败，因此`$result`包含 false 而不是有效的资源 ID。您需要`mysql_error()`在运行查询后使用以查看失败的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:18:08.020

您的查询未成功运行。许多事情可能是造成这种情况的原因。遵循`mysql_query()`这样的调用是明智的：

```
$result = mysql_query( $query, $con ) or die ( mysql_error() ); 
```

这将通知我们在尝试运行查询时遇到的任何问题。此外，我不完全确定是什么`Connect()`- 它是否返回链接标识符？您可能打算写：

```
$con = mysql_connect() or die( mysql_error() ); 
```

请注意，除非您已预先配置`mysql.default_host`、`mysql.default_user`和，否则您`mysql.default_password`需要提供给`mysql_connect()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T17:19:36.240

很多时候，当您收到此错误时，您是在尝试使用不正确的查询来使用或检索数据。如果您的查询有错误，那么 mysql_error() 将返回 FALSE，它是一个布尔值，并解释您的错误。您应该回显**$query**以查看查询的确切内容。

# r - 如何使用最合适的方法在 R 中绘制简单的术语树

> ID：10758710
> 
> 赞同：1
> 
> 时间：2012-05-25T17:16:04.357
> 
> 标签：r, tree, plot

我需要在 R 中绘制这个结构：

```
(1000) Diseases of the genitourinary system 
    (1580) Nephritis, nephrotic syndrome, and nephrosis 
        (580) Acute glomerulonephritis
            (580.9) Glomerulonephritis, acute, unspec.
        (581) Nephrotic syndrome
            (581.9) Nephrotic syndrome, unspec.
        (582) Chronic glomerulonephritis
            (582.9) Glomerulonephritis, chronic, unspec.
        (583) Nephritis and nephropathy, not specified as acute or chronic
        (584) Acute renal failure
            (584.5) Renal failure, acute w/ tubular necrosis 
```

作为一个不错的 jpg/pdf/（或其他），它将使用上述结构的 R 具有节点、连接和标签。我查看了需要安装 GrafViz 并且没有运气的库，因此本地解决方案（例如，使用 ggplot2）是最好的。我无法使用 igraph 将代码放在一起。我也是 R 图形的新手，没有基于教科书的基础。任何提示或建议将不胜感激。

上面的结构只是示例。其他结构可能有 50 多个概念要绘制并打印为非常大的 PDF/海报。该图将是静态的（不使用鼠标与其交互）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:15:03.553

这是一个答案。这是您需要的近似值，最终结果如下所示：

![术语树](../Images/49034b4b7795b39c82b102e1b8d908b6.png)

我做了这个，`igraph`代码使用了你描述的数据类型的模拟。

```
library("igraph")

vertex.df <- read.table(text = "id    code  name
0   1000    'Diseases of the genitourinary system '
1   1580    'Nephritis, nephrotic syndrome, and nephrosis '
2   580 'Acute glomerulonephritis'
3   580.9   'Glomerulonephritis, acute, unspec.'
4   581 'Nephrotic syndrome'
5   581.9   'Nephrotic syndrome, unspec.'
6   582 'Chronic glomerulonephritis'
7   582.9   'Glomerulonephritis, chronic, unspec.'
8   583 'Nephritis and nephropathy, not specified as acute or chronic'
9   584 'Acute renal failure'
10  584.5   'Renal failure, acute w/ tubular necrosis'",
                        header = TRUE,
                        stringsAsFactor = FALSE)

vertex.df$code <- as.character( vertex.df$code )

edge.df <- read.table(text = "from    to
0    1
1   2
1   4
1   6
1   8
1   9
2   3
4   5
6   7
9   10",
                      header = TRUE)

edges <- matrix(c(edge.df$from, edge.df$to), nc=2)

g <- graph.empty()
g <- add.vertices(g, nrow(vertex.df),
                  id=vertex.df$id, 
                  code=vertex.df$code, 
                  name=vertex.df$name)
g <- add.edges(g, t(edges))

plot(g, 
     layout = layout.kamada.kawai,
     vertex.label = V(g)$code,
     vertex.size = 35,
     vertex.color = "white",
     vertex.label.family = "sans") 
```

我使用 ICD 代码作为顶点标签。这是因为以这种比例绘制时，疾病名称的长文本看起来不整齐。

绘图时，您可以将`vertex.label`参数更改为`V(g)$name`是否需要疾病名称而不是 ICD 代码。我怀疑如果你打印到一个大的 pdf 并删除顶点轮廓，你可能会得到一棵漂亮的树。查看`?igraph.plotting`可以更改的参数的详细信息。

我希望它能让你在实验中更上一层楼。

# asp.net - 允许 web.config 中带有查询字符串的位置路径

> ID：10758711
> 
> 赞同：1
> 
> 时间：2012-05-25T17:16:12.590
> 
> 标签：asp.net, path, web-config

我的 web.config 中有这个

```
 <location path="ChangePassword.aspx">
     <system.web>
       <authorization>
         <allow users="*"/>
       </authorization>
     </system.web>   </location> 
```

问题是，在访问页面有效时，我还需要允许使用查询字符串访问此页面，这不起作用：

*   ChangePassword.aspx?mode=
*   ChangePassword.aspx?userid=xx&mode=

我怎样才能做到这一点？当然，参数将始终具有动态值，我不能在 web.config 中硬编码 ID。

编辑以更好地理解问题

purpose= 未登录用户必须有权访问 ChangePassword.aspx 页面及其收到的任何查询字符串。

未登录用户的问题：

*   他们可以访问`ChangePassword.aspx`
*   他们无法访问`ChangePassword.aspx?parameter=value`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:21:15.760

如果用户可以访问该页面，他们可以将查询字符串添加到路径中。

授权机制仅对文件位置进行操作 - 您不能使其对查询字符串参数进行操作。

如果您想根据参数更改页面行为，您应该在页面代码中执行此操作。

您可以在页面上轻松访问查询字符串参数：

```
Request.QueryString["UserId"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T13:07:44.363

问题不在 web.config 中：您关于标签的设置是正确的。问题是链接

```
ChangePassword.aspx?Userid=xx&mode= 
```

不允许正确路由到您的页面的字符是“ **&** ”。

确保它是使用正确的 Xml 编码编写的（除此之外，它会将所有 '&' 字符替换为 '&'）。

这应该很好用：

```
ChangePassword.aspx?Userid=xx&amp;mode= 
```

或者你可以使用

> System.Web.HttpUtility.HtmlEncode(yourUrl);

我希望它有用；）

# objective-c - 计算数组属性的内存语义？

> ID：10758715
> 
> 赞同：5
> 
> 时间：2012-05-25T17:16:45.103
> 
> 标签：objective-c, cocoa, memory-management, properties

这是一个允许用户标记事物的应用程序。标签只是字符串。

对象数组`TagHolder`包含应用程序中正在使用的所有标签的列表，并带有一个布尔值来告知是否选择了标签，但这是一个实现细节。

外部接口调用两个方法，`selectedTags`，`setSelectedTags:`它们返回和接受一个字符串数组。

我希望这两种方法可以作为声明属性的访问器`selectedTags`。

现在，我的问题是：

为该属性声明的正确内存管理语义是什么？

我想到的代码模式是这样的（代码未经测试，所以请注意拼写错误）：

```
@interface TagInfo : NSObject
@property (strong, nonatomic) NSString *tag;
@property (nonatomic) BOOL selected;
@end

@interface SomeClass : NSObject
@property (memorytype, nonatomic) NSArray *selectedTags;
@end

@implementation TagHolder

- (NSArray *)selectedTags
{
    // tagInfoArray is an array of all TagInfo objects
    NSPredicate *selPred = [NSPredicate predicateWithFormat: @"selected == YES"];
    NSArray *selectedTagInfoObjects = [[self tagInfoArray] filteredArrayUsingPredicate: selPred];

    NSArray *selectedTags = [selectedTagInfoObjects valueForKey: @"tag"];
    return selectedTags;
}

- (void)setSelectedTags: (NSArray *)selectedTags
{
    for (TagInfo *tagInfo in [self tagInfoArray]) {
        tagInfo.selected = [selectedTags containsObject: tagInfo.tag];
    }
}

@end 
```

应该`memorytype`是什么？显然不是强或弱，但我认为它可以是`assign`，`copy`甚至中的任何一个`unsafe_unretained`，但是对于具有对象值的计算属性，哪一个最正确？

我通常使用 ARC，但我想这个问题在手动保留计数的环境中是相同的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T17:25:14.117

`memorytype`仅当您`@synthesize`的财产访问者时才有意义。由于您为 getter 和 setter 都提供了自己的实现，因此您放在括号中的内容将`@property`被忽略；我通常把`readonly`或放在`readwrite`那里，只是为了提醒自己在这些属性上可以使用什么样的访问权限。

您的代码是正确的，无论有没有 ARC，它都可以正常工作而不会产生内存问题。

# bash - 来自文件的数组

> ID：10758719
> 
> 赞同：-2
> 
> 时间：2012-05-25T17:17:13.573
> 
> 标签：bash

如果我有这样的文件：

```
A:a
B:b
C:c 
```

我需要创建 2 个数组，例如

```
one=('A' 'B' 'C')
two=('a' 'b' 'c') 
```

我怎样才能在 bash 中做到这一点？

我试过这个：

```
declare -a one
declare -a two

while read line
do
    IFS=':' read -ra ADDR <<< $line
    echo ${ADDR[0]}
    echo ${ADDR[1]}
done < file.txt 
```

对不起，我下班写了，然后我回家了。再次抱歉。问题在于它正在打印

```
littlelion:Documents dierre$ sh prova.sh 
A a

B b 
```

所以它缺少 C c 并且我不知道如何将元素添加到数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:15:44.867

行情解决一切：

```
while read line
do
    IFS=':' read -ra ADDR <<< "$line"
    echo ${ADDR[0]}
    echo ${ADDR[1]}
done < file.txt 
```

引用变量`"$line"`是造成差异的原因。如果您没有得到带有“C:c”的行，可能是因为您的文件缺少最后一个换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:22:27.067

使用[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)：

```
declare -a one
declare -a two

one=( $(cut -d: -f1 file) )
two=( $(cut -d: -f2 file) ) 
```

`var=$(command)`捕获命令的输出并将其分配给`var`. 外部括号使其成为数组分配。 `cut -d: -f1`表示将您的文件视为冒号分隔的文件并打印第一个字段。 `cut -d: -f2`做同样的事情，但它打印第二个字段。

* * *

^(编辑以响应 OP 的编辑)

`ADDR`您可以像这样直接读入：

```
declare -a ADDR
while IFS=':' read -a ADDR; do
  echo ${ADDR[0]}
  echo ${ADDR[1]}
done < file.txt 
```

虽然这不会填充数组`one`和`two`......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T00:29:41.183

如果我了解您要正确执行的操作，则应该可以：

```
one=()
two=()
while IFS=: read new_one new_two || [ -n "$new_one" ]; do
    one+=("$new_one")
    two+=("$new_two")
done
echo "one:" "${one[@]}"
echo "two:" "${two[@]}" 
```

注意：我同意@Dennis Williamson 的观点，即最后一行没有被处理，因为它没有以换行符结尾；我添加了`|| [ -n "$new_one" ]`一点以防止这成为问题。

# windows - 为什么在 Internet Explorer 中缓冲对 html 页面的写入？有办法解决吗？

> ID：10758726
> 
> 赞同：2
> 
> 时间：2012-05-25T17:17:44.243
> 
> 标签：windows, perl, internet-explorer, perlscript

我为使用客户端 PerlScript 的 IE 编写了一个非常小的 html 页面。在脚本中，我启动了一个创建 TCP 套接字的单独进程。启动该过程后，我启动了一个侦听器，它在读取行时将 HTML 附加到 div 的末尾，另外为了调试，我在读取每一行时添加了警报。

问题是警报会在读取行时出现，但 HTML 不会更新，直到该过程完成。这是为什么？有没有办法强制页面呈现，以便我可以获得相同的行为？

这是页面：

```
<html>
    <head>
        <title>Message Test</title>
        <script language=perlscript>
            use util;
            use Win32::Process;

            my $alreadyrunflag = 0;

            sub _write {
                $window->document->body->insertAdjacentHTML("beforeEnd", $_[0]);
            }

            sub go {
                _write("starting!<br/>");

                my $port = 12345;
                #//system("start /b /NORMAL perl C:/development/plslog/clitest2.pl $port");
                Win32::Process::Create(my $Proc, "C:/perl/bin/perl.exe", "perl clitest2.pl 12345", 1, CREATE_NO_WINDOW | NORMAL_PRIORITY_CLASS | DETACHED_PROCESS, "C:/development/plslog");
                $window->alert("Hi! started!");

                if (defined (my $INPUT = util::CreateClient($port))) {
                    while(defined (my $line = <$INPUT>)) {
                       _write($line);
                        sleep(3);
                    }
               }

               _write("ending!");
            }

            $window->setTimeout("go()",0);
        </script>
    </head>
    <body>
        <div id="content"></div>
    </body>
</html> 
```

我查看了 PerlScript 的在线文档，该文档非常稀疏。我正在寻找有关如何命令 IE 触发页面呈现、响应这些 html 插入...等的提示。

在研究这一点时，我发现如果我在 div 上使用 onclick 而不是 onload，我可以在读取行时渲染它。也许我没有使用正确的事件并且在触发子例程之前页面没有完全呈现？我对这里的 IE 感到非常沮丧（第 9 节）。

是的，当我在命令行情况下使用它时，一切都会按预期触发。CreateServer/CreateClient 只是客户端和服务器的 IO::Socket::INET 的包装器。

*更新*（基于@Oleg V. Volkov 的回答）：

我修改了 go 并添加了一个读取一行的 _read() 函数，然后将控制权传递回浏览器进行渲染。似乎做得不错。

```
sub _read() {
  my $port = shift;
  $INPUT = util::CreateClient($port) if ! $INPUT;
  if (defined (my $line = <$INPUT>)) {
    _write($line);
    $window->setTimeout("_read($port)", 0);
  }
  else {
    _write("Fin!");
  }
}
sub go() {
  _write("starting!<br/>");
  my $port = 12345;
  Win32::Process::Create(my $Proc, "C:/perl/bin/perl.exe", "perl clitest2.pl $port", 1, CREATE_NO_WINDOW | NORMAL_PRIORITY_CLASS | DETACHED_PROCESS, "C:/development/plslog");
  $window->alert("Hi! started!");
  $window->setTimeout("_read($port)", 0);
} 
```

这似乎*接近*实时更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:22:17.567

大多数（如果不是全部）浏览器在您从托管脚本进程返回之前不会重绘页面。他们可以在某些操作上重排数据的内部表示，但在您返回控制权之前仍然不会花时间重绘它。`setTimeout`为了允许浏览器重绘，你应该将你的任务分成几个步骤，并`return`通过在脚本中安排下一步并偶尔让步。

在您的特定情况下，替换`sleep(3)`，无论如何您什么都不做，安排下一次循环迭代在 3 秒后发生，似乎是最好的方法。

# c - 使用 XOR 属性找出数组中的修改元素

> ID：10758728
> 
> 赞同：2
> 
> 时间：2012-05-25T17:17:46.257
> 
> 标签：c, bit-manipulation, xor

正在从[这里尝试这个问题](http://www.careercup.com/question?id=13718667)

> 如何找出数组中的修改元素？
> 
> 例如：数组 A= {1,2,3,4,5,6} 修改前 修改后 A={1,2,3,7,5,6}。这里元素 4 被元素 7 替换。

有人使用 XOR 属性来解决这个问题

```
 int getModifiedElement(int arr1[ ],int arr2[ ])
       {
                   int xor1 = arr1[0];
                   int xor2 = arr2[0];
                              for(int i=1;<i<arr1.length;i++)
                              {
                                     xor1 = xor1 ^ arr1[i];
                                     xor2 = xor2 ^ arr2[i];
                              }
             return xor1^xor2;
            } 
```

我不清楚使用什么 XOR 属性来解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:22:12.870

`xor`是关联和可交换的，所以当`xor1`对数组 1 和`xor2`数组 2 中的所有元素进行异或运算时，未修改的元素都存在于两者中，因此使用`xor1 ^ xor2`，它们被消除，因为`x ^ x == 0`，所以剩下的是`old ^ new`in `xor1 ^ xor2`，即从old 到数组的更改元素。

然而，它既没有说旧元素是什么，也没有说新元素是什么，因此它并**没有**解决上述问题。

# javascript - 使用 jQuery 验证插件和用 struts 编写的表单

> ID：10758729
> 
> 赞同：0
> 
> 时间：2012-05-25T17:17:47.367
> 
> 标签：javascript, jsp, jquery-plugins, jquery-validate, struts

我想实现 jQuery 验证插件，以便在用 java 和 struts 编写的 Web 应用程序中使用。我只是想用它来验证表单输入，看看它们在提交到数据库之前是否符合某些规则。我试图在其中实现的项目是由其他人编写的，我无权访问他们，也无法重写它。

这是我要验证的表单输入之一：

```
<html:text property="groomFirstName" maxlength="30" tabindex="1" styleId="groomFirstName"  size="15" onchange="properCase(this.id); needToConfirm=true;"   /> 
```

我已经为插件编写了一些自定义方法。我已经在一个简单的 HTML 表单上对它们进行了测试，但是我不知道如何使它们与上面的代码行一样使用 struts 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:26:00.040

Struts 用于生成表单这一事实是无关紧要的。JavaScript 在浏览器中执行，而 HTML 是 HTML。

上面的代码行不是 HTML。它是一个 Struts JSP 标记，在服务器端进行评估并生成发送到浏览器的 HTML 代码。jQuery 只关心 HTML。上面的代码将生成以下 HTML：

```
<input type="text" name="groomFirstName" maxlength="30" tabindex="1" 
       id="groomFirstName" size="15" 
       onchange="properCase(this.id); needToConfirm=true;" /> 
```

# ms-access - 复合主键级联

> ID：10758736
> 
> 赞同：2
> 
> 时间：2012-05-25T17:18:16.210
> 
> 标签：ms-access, composite-key, referential-integrity

Building 和 Room 这两个字段构成了我的房间表中的唯一主复合键。密钥验证和保存等。

我有一个 BLANK Objects 表，其中包含三个字段，这将使其唯一（再次是复合主键）。表格如下：

```
ROOM TABLE
[Building]     [Room]
01             101A
01             102
02             101A

OBJECT TABLE
[Building]     [Room]     [Number]
01             101A       1
01             101A       2
01             102        1
02             101A       1 
```

如何强制执行参照完整性？在 MS Access 的关系工具中编辑关系时，我收到以下错误：`No unique index found for the referenced field of the primary table`. 我知道（通过尝试非唯一值）主（对象）表的复合键是正确的。我究竟做错了什么？我如何建立适当的关系并保持完整性（因为没有它们，更新将是一项艰巨的挑战）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:09:21.963

您需要像这样设置密钥：

![复合键](../Images/7a2d241551e0079e68157637de3f1471.png)

请注意，房间的主键设置为 Building + Room，而 Objects 的主键为 Building + Room + Numb（数字是保留字 AFAIR）

# python - 使用 Python 进行批量重命名

> ID：10758738
> 
> 赞同：2
> 
> 时间：2012-05-25T17:18:28.893
> 
> 标签：python, file, file-rename

假设我在一个目录中有一堆文件，具有不同的扩展名：

```
dsgxy7wusshg2.jpg
ds65321333321.png
ds2716113shg2.jpg
d3171763462g2.jpg
5432125321hg2.png
db37fv73v7av1.png
d0zhzb38b22g2.jpg
d3171763462nb.jpg 
```

我想创建一个小脚本，将每个文件重命名为 format `mystring_x.ext`，其中`mystring`是我在脚本中设置的字符串，是要重命名`x`的文件的编号，并且是文件`ext`的**原始**扩展名。不可能有两个文件使用相同的编号，但扩展名不同。每个号码只有一个文件。

我知道我应该使用`os`模块来重命名文件，但是我应该尝试使用什么程序来完成这项任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:26:08.267

```
directory = '/path/to/dir'
base = 'mystring'

for i, f in enumerate(os.listdir(directory), 1):
    ext = f.rsplit('.', 1)[-1]
    absolutify = lambda s: os.path.join(directory, s)
    os.rename(absolutify(f), absolutify('%s_%d.%s' % (base, i, ext))) 
```

# c# - javascript 和 c# 模型之间的日期格式不一致

> ID：10758740
> 
> 赞同：0
> 
> 时间：2012-05-25T17:18:33.123
> 
> 标签：c#, asp.net-mvc-3, datepicker, datetime-format

* ***更新**

我刚刚意识到日期在发布期间根本没有数据绑定，除非我使用 Firefox。

为什么浏览器会影响服务器端的数据绑定？

我觉得我正在服用疯狂的药丸

* * *

我的问题是我有一个 JQuery 日期选择器，它的格式似乎正确（mm/dd/yyyy），但是当值被发布到服务器时，月份和日期会被切换。

date 属性像这样添加到页面中（它被隐藏了，以便在发布期间可以绑定。如果它是一个简单的文本框，问题也是一样的）：

```
<input type="hidden" name="SearchByDate" id="SearchByDate" value="<%: ((DateTime)Model.SearchByDate).ToString(Web.Common.Config.GetDateFormatBase) %>" /> 
```

在我的视图模型中，我指定了这样的日期格式：

```
 [DisplayFormat(DataFormatString = Common.Config.GetDateFormat, 
        ApplyFormatInEditMode = true)]
    public DateTime? SearchByDate { get; set; } 
```

我的 javascript datepicker 的格式如下：

```
 $("#appointmentDateDiv").datepicker({
------>     dateFormat: "<%= Web.Common.Config.GetDateFormatJavascript %>",
            changeMonth: true,
            onSelect: function (dateText, inst) {
                $("#SearchByDate").val(dateText);
                $("form").submit();
            }
        }); 
```

我实际上在这样的公共类中对格式进行了规范：

```
public const string GetDateFormatBase = @"MM/dd/yyyy";
public const string GetDateFormat = @"{0:" + GetDateFormatBase + "}"; //This is for annotations
public const string GetDateFormatJavascript = "mm/dd/yy"; 
```

如您所见，格式都是 sam:month day year。当我第一次加载这样的页面时，一切看起来都很好，所以日期选择器让我可以选择正确格式的日期。然后我发布，如果我单步执行我的代码，一切看起来仍然很好。我什至重新格式化日期以确保在返回视图之前。但是月份和日期总是会切换。

最奇怪的是，在 Firefox 中一切正常。它在 IE、Chrome 和 Opera 中失败。但我不明白为什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:10:36.050

谢谢大家的帮助。

@JohnKoerner，你是对的，这是一个 l18n 问题。我的 Firefox 设置为 en-US，而我的其他浏览器设置为 en-CA。我不认为他们会是不同的日期格式，但他们是。这在模型绑定期间引起了问题。我的解决方案是使用不变文化来解析自定义模型活页夹中的所有日期。我从[这里](http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx)得到了这个想法。

但是，我已经在[这里](http://www.hanselman.com/blog/SplittingDateTimeUnitTestingASPNETMVCCustomModelBinders.aspx)使用了不同的模型绑定器。我像这样修改了相关的代码

```
retVal = (Nullable<T>)value.ConvertTo(typeof(T), CultureInfo.InvariantCulture); 
```

我们将在哪里 T 正在解析的日期时间。

另一件事是确保为 DateTime 和 DateTime 注册自定义模型绑定器？像这样：

```
ModelBinders.Binders.Add(typeof(DateTime), new DateTimeModelBinder());
ModelBinders.Binders.Add(typeof(DateTime?), new DateTimeModelBinder()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:26:02.543

您可以在隐藏字段中使用 String.Format ：

```
<input type="hidden" name="SearchByDate" id="SearchByDate" value="<%:
String.Format("{0:MM/dd/yyyy}",Model.SearchByDate) %>" /> 
```

# php - 如何配置 emacs 以在 php 模式下正确注释代码？

> ID：10758743
> 
> 赞同：1
> 
> 时间：2012-05-25T17:18:51.857
> 
> 标签：php, emacs, php-mode

我有 emacs 23.3.1，在 Windows 上运行。

php-mode 1.5 来自 [http://php-mode.sourceforge.net/](http://php-mode.sourceforge.net/)，修改：2008-11-04

我*认为*这曾经可以工作，但是现在，当我尝试使用注释区域注释掉一段代码时，注释区域是“newcomment.el”中的一个交互式编译的 Lisp 函数，我得到的结果很差。

例子：

前：

![在此处输入图像描述](../Images/fa683e365c3451efe93323ad91aa4655.png)

后：

![在此处输入图像描述](../Images/5f7bfea5753890792a932f4c70504fe1.png)

可以看到注释块中的每一行都有单行注释开始顺序`//`和多行注释结束顺序`*/`。

这不是一个大问题，尽管它很丑陋。当我尝试取消注释该块时，问题就出现了。我收到错误消息“找不到评论结束”。换句话说，`comment-region`是不可逆的`C-u comment-region`。

我会看看我是否能解决这个问题，但是在 php-mode 中是否有我缺少的设置？

有人知道吗？

* * *

**更多的**

我没有在我的 php-mode-hook 函数中添加任何东西来更改`comment-start`and`comment-end`变量。当我调试时，`comment-region`我可以看到它们以某种方式设置为不匹配`//`的一对。`*/`这就解释了注释区域的奇怪结果。我不相信是我的代码确实设置了这些变量。

我尝试在我的钩子中明确地将它们设置为`//`and （空字符串）。在这种情况下，`comment-region`看起来更漂亮，但它仍然没有取消注释。我也尝试了匹配的`/*`and `*/`，但结果相同。取消注释不成功；错误是`can't find comment end.`。

**更多2**

我认为我的语法表是正确的。它显示了这一点：

![在此处输入图像描述](../Images/e5c9f4ad5bb03ebb1cbff41ad4727b61.png)

...这对我来说似乎是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:02:51.803

这为我解决了它：

```
(setq comment-use-syntax t) 
```

我把它放在我的 php-mode 挂钩中。

不确定这是否有必要，但我还包含了修改语法表的语句。整个钩子看起来像这样：

```
(defun cheeso-php-mode-fn ()
  "Function to run when php-mode is initialized for a buffer."
  (require 'flymake)
  (flymake-mode 1)

  (setq c-default-style "bsd"
      c-basic-offset 2)

  ;; not sure if necessary or not.
  (modify-syntax-entry ?/ ". 124b" php-mode-syntax-table)
  (modify-syntax-entry ?* ". 23" php-mode-syntax-table)
  (modify-syntax-entry ?\n "> b"  php-mode-syntax-table)
  (modify-syntax-entry ?\^m "> b" php-mode-syntax-table)

  (setq comment-multi-line nil ;; maybe
        comment-start "// "
        comment-end ""
        comment-style 'indent
        comment-use-syntax t)) 
```

* * *

的帮助声明`comment-use-syntax`说主要模式应该设置它。在我正在编辑的 php 缓冲区中，变量设置为 nil。我猜它是由 php-mode 设置的；无论如何，它不是我设置的。将其设置为`t`并确保语法表具有适当的值就可以了。

应该说我只在php中使用C风格的注释；我不使用`#`.

# java - 在 swig 中，如何在类中使用自己的 jni 函数？

> ID：10758747
> 
> 赞同：0
> 
> 时间：2012-05-25T17:19:01.843
> 
> 标签：java, java-native-interface, swig

我有一个 c++ 类，我使用 swig 将它包装到 java 中。我想为这个类扩展或添加一个新的成员函数，但我也想使用我自己的jni函数作为这个新的成员函数或者让我自己的jni函数在这个新的成员函数中被调用。我怎么能在 swig 中做到这一点？我知道 %native，但它似乎只生成静态方法，但我希望它生成对象方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:02:54.467

如果您只想`native`在其中一个代理类中添加一个额外的方法，您可以使用以下方法：

```
%module test;

%typemap(javacode) foo %{
  public void native HandRolled();
%}

struct foo {
  void bar();
};

void test(foo& f); 
```

就个人而言，如果您有很多不想`%native`直接使用的本机代码，我倾向于将它们放入单独的类中，即您将 SWIG 生成的部分和手册、JNI 部分作为不同的项目。然后，您可以根据需要使用类型映射将纯 JNI 部分“按摩”到 SWIG 生成的部分中。

# algorithm - SWI Prolog (Enchance) 中的刽子手游戏

> ID：10758749
> 
> 赞同：1
> 
> 时间：2012-05-25T17:19:19.283
> 
> 标签：algorithm, prolog

> **可能重复：**
> [SWI Prolog 中的刽子手游戏](https://stackoverflow.com/questions/10743564/hangman-game-in-swi-prolog)

我正在尝试使用以下内容在 SWI Prolog 中增强一个简单的刽子手游戏：

***1）***通过跟上到目前为止已经猜到的错误字母**。**如果用户猜出一个已经猜错的字母，程序应该说“你猜对了！” 并继续游戏而不增加计数器。

***2）***最后，添加一个计数器，计算错误猜测的次数，并在达到一定数量时退出游戏。程序应该告诉用户他们输了，显示这句话的真正含义，然后终止。重复的猜测不应被视为错误。

我怎样才能将这些谓词放在一起，以便我的程序运行上述增强功能？
***1)***

```
alreadyGuessed(Guess, AnsCodes) :-
   memberchk(Guess, AnsCodes). 
```

***2)***

```
processGuess(AnsList, BlankList, _, CountFailed) :-
  (   CountFailed == 5
  ->  format('Sorry, game over. You didn\'t guess (~s)~n', [AnsList])
  ;   write('Nope!'),
      CountFailed1 is CountFailed + 1,
      getGuess(AnsList, BlankList, CountFailed1)
  ). 
```

我试图做的是：
扩展谓词 getGuess(AnsList, BlankList, CountFailed)

***在我进行更改之前，我会为您提供运行版本的代码和注释。***

**编辑：**程序现在运行，直到你犯了 5 个错误。像现在这样运行它，`?- hangman(0).`
我只需要不计算到目前为止已使用的字母作为错误答案并显示上面列出的适当消息。我会通过再写一个谓词来做到这一点`processGuess`吗？

```
% This top-level predicate runs the game.  It prints a 
% welcome message, picks a phrase, and calls getGuess.

% Ans = Answer
% AnsList = AnswerList

hangman(CountFailed):- 
    getPhrase(Ans), 
    !, 
    write('Welcome to hangman.'),
    nl,
    name(Ans,AnsList), 
    makeBlanks(AnsList, BlankList), 
    getGuess(AnsList,BlankList, CountFailed).

% Randomly returns a phrase from the list of possibilities.

getPhrase(Ans):-
    phrases(L), 
    length(L, X), 
    R is random(X), 
    N is R+1, 
    getNth(L, N, Ans).

% Possible phrases to guess.

phrases(['a_picture_is_worth_a_thousand_words','one_for_the_money','dead_or_alive','computer_science']).

% Asks the user for a letter guess.  Starts by writing the 
% current "display phrase" with blanks, then asks for a guess and
% calls process on the guess.

getGuess(AnsList, BlankList, CountFailed):- 
    name(BlankName, BlankList), 
    write(BlankName), 
    nl,  
    write('Enter your guess, followed by a period and return.'), 
    nl, 
    read(Guess),
    !, 
    name(Guess, [GuessName]), 
    processGuess(AnsList,BlankList,GuessName, CountFailed).

% Process guess takes a list of codes representing the answer, a list of codes representing the current
% "display phrase" with blanks in it, and the code of the letter that was just guessed.  If the guess
% was right, call substitute to put the letter in the display phrase and check for a win.  Otherwise, just
% get another guess from the user.

processGuess(AnsList,BlankList,GuessName, CountFailed):- 
    member(GuessName,AnsList), 
    !,
    write('Correct!'),
    nl, 
    substitute(AnsList, BlankList, GuessName, NewBlanks), 
    checkWin(AnsList,NewBlanks, CountFailed).

processGuess(AnsList, BlankList, _, CountFailed) :-
  (   CountFailed == 5
  ->  format('Sorry, game over. You didn\'t guess (~s)~n', [AnsList])
  ;   write('Nope!'),
      nl,
      CountFailed1 is CountFailed + 1,
      getGuess(AnsList, BlankList, CountFailed1)
  ).

% Check to see if the phrase is guessed.  If so, write 'You win' and if not, go back and get another guess.

checkWin(AnsList, BlankList, CountFailed):- 
    name(Ans, AnsList), 
    name(BlankName, BlankList), 
    BlankName = Ans, 
    !, 
    write('You win!').

checkWin(AnsList, BlankList, CountFailed):- 
    getGuess(AnsList, BlankList, CountFailed).

% getNth(L,N,E) should be true when E is the Nth element of the list L. N will always
% be at least 1.

getNth([H|T],1,H).

getNth([H|T],N,E):-
    N1 is N-1,
    getNth(T,N1,E1),
    E=E1.

% makeBlanks(AnsList, BlankList) should take an answer phrase, which is a list
% of character codes that represent the answer phrase, and return a list
% where all codes but the '_' turn into the code for '*'.  The underscores
% need to remain to show where the words start and end.  Please note that 
% both input and output lists for this predicate are lists of character codes.
% You can test your code with a query like this:
% testMakeBlanks:- name('csc_is_awesome', List), makeBlanks(List, BlankList), name(Towrite, BlankList), write(Towrite). 

makeBlanks(AnsCodes, BlankCodes) :-
  maplist(answer_blank, AnsCodes, BlankCodes).

answer_blank(Ans, Blank) :-
  Ans == 0'_ -> Blank = Ans ; Blank = 0'* .

% substitute(AnsList, BlankList, GuessName, NewBlanks) Takes character code lists AnsList and BlankList, 
% and GuessName, which is the character code for the guessed letter.  The NewBlanks should again be a 
% character code list, which puts all the guesses into the display word and keeps the *'s and _'s otherwise.
% For example, if the answer is 'csc_is_awesome' and the display is 'c*c_**_*******' and the guess is 's', the 
% new display should be 'csc_*s_***s***'.
% You can test your predicate with a query like this:
% testSubstitute:- name('csc_is_awesome', AnsList), name('c*c_**_*******', BlankList), name('s',[GuessName]), substitute(AnsList, BlankList, GuessName, NewBlanks),
%    name(Towrite, NewBlanks), write(Towrite). 

% Also, since the predicate doesn't deal directly with character codes, this should also work:
% substitute(['c','s','c'],['c','*','c'],'s',L).  L should be ['c','s','c'].

substitute(AnsCodes, BlankCodes, GuessName, NewBlanks) :-
     maplist(place_guess(GuessName), AnsCodes, BlankCodes, NewBlanks).

place_guess(Guess, Ans, Blank, Display) :-
    Guess == Ans -> Display = Ans ; Display = Blank. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T19:36:11.530

在此之前插入此规则`processGuess(AnsList, BlankList, _, CountFailed) :-`

```
processGuess(AnsList, BlankList, Guess, CountFailed):-
    memberchk(Guess, BlankList),
    write('You guessed that!'), nl,
    !, getGuess(AnsList, BlankList, CountFailed). 
```

我把唯一的电话放在了内联`alreadyGuessed`

**编辑**以将 CountFailed 更改为 FailedList：

```
processGuess(AnsList, BlankList, Guess, FailedList):-
    (  length(FailedList, 5)
    ->  ... signal game failure and stop ...
    ;   getGuess(AnsList, BlankList, [Guess|FailedList])
    ) 
```

# java - 无法使用 webdriver 找到 javascript 框架

> ID：10758750
> 
> 赞同：0
> 
> 时间：2012-05-25T17:19:19.457
> 
> 标签：java, javascript, html, selenium, webdriver

所以我以前从来没有遇到过这样的问题，所以这让我有点不知所措。我正在尝试编写一个 java 程序来检查诸如订书钉之类的站点中的商店可用性。[http://www.staples.com/Kodak-EasyShare-Z5010-Digital-Camera/product_369838](http://www.staples.com/Kodak-EasyShare-Z5010-Digital-Camera/product_369838) 在我访问这样的网站并单击“检查商店可用性”后，会弹出一个 JavaScript 窗口。使用 firebug 和 firepath，我发现 zipcode 输入框的 xpath 为“.//*[@id='zipCode']”。当我尝试在程序中的该框中输入信息时，webdriver 找不到该文本框。另外要注意的是，除非我先单击它，否则我实际上也找不到带有 firebug 的框。

我的问题是：如何使用 webdriver 导航到该框？我为此使用硒 2.21。如果有人想尝试运行我的代码，我将关键部分分解为一个可运行的程序

```
import java.util.ArrayList;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;

public class Test{

public static void main(String[] args) throws InterruptedException{
    ArrayList<String> pIDs = new ArrayList<String>();
    FirefoxProfile profile = new FirefoxProfile();
    profile.setPreference("general.useragent.override", "some UA string");
    WebDriver driver = new FirefoxDriver(profile);
    String link, availStr;
    String output = null;

    //Gets me through their initial zipcode prompt before I can see any products on site
    //---------------------------------------
    String url = "http://www.staples.com/Tablets-Tablets/cat_CL165566";
    driver.get(url);
    driver.findElement(By.xpath(".//*[@id='zip']")).sendKeys("55555");
    driver.findElement(By.xpath(".//*[@id='submitLink']")).click();
    try {
        Thread.sleep(1000);
    } catch (InterruptedException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    //--------------------------------------------

    driver.get("http://www.staples.com/Kodak-EasyShare-Z5010-Digital-Camera/product_369838");
    System.out.println("Now on item: " + driver.getTitle() + " " + driver.findElement(By.xpath(".//*[@class='note none']")).getText() + "\n");
    driver.findElement(By.xpath("//li[@class='storeavail']/a")).click();
    Thread.sleep(400);

    driver.findElement(By.xpath(".//*[@id='zipCode']")).sendKeys("90210");
    driver.findElement(By.xpath(".//*[@id='searchdistance']/div/a")).click();

    driver.quit();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:31:50.407

在处理框架中的任何元素之前，您应该切换到框架。

```
driver.switchTo().frame(weblement/nameofframe) 
```

# iis-7 - IIS ASP.NET css/js 文件在强制页面刷新之前不会更新

> ID：10758751
> 
> 赞同：0
> 
> 时间：2012-05-25T17:19:22.073
> 
> 标签：iis-7, release, browser-cache

当我们在 IIS 7 中发布时，我们将新代码部署到服务器上的发布目录，然后将 IIS 中的网站重新指向新代码目录。例如：

将网站目录从 C:\company\releases\code-5-17-12 更改为 C:\company\releases\code-5-26-12。

这种策略让我们在最坏的情况下恢复到以前的版本。但是，我遇到的问题是，当访问过该网站的用户转到某个页面时，有时他们可能需要显式刷新页面才能获得新的更新代码。

这是缓存问题吗？有没有办法以某种方式使这个过期，这样网站的用户就不会从以前的版本中加载旧代码？

这是 javascript 文件和 css 文件的特定问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:45:08.617

该解决方案的问题在于您的用户将始终下载新的 css 和 js，因为`<%=DateTime.Now.Ticks%>`每次刷新都会有所不同。更好的解决方案是连接应用程序的版本，甚至是文件本身的最后修改日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:15:13.937

我得到了这个工作：

我`?v=<%=DateTime.Now.Ticks%>`在每个 css 和 js 文件名的末尾添加了一个，这解决了它。

# extjs4 - 从视口 Ext JS 4 中删除滚动条

> ID：10758756
> 
> 赞同：0
> 
> 时间：2012-05-25T17:19:45.040
> 
> 标签：extjs4, scrollbar, viewport

我在视口中得到一个滚动条，我该如何删除它。

我知道这是一个奇怪的情况，因为在文档中我们有这个：

```
The Viewport does not provide scrolling, so child Panels within the Viewport 
should provide for scrolling if needed using the autoScroll config. 
```

从[视口 sencha doc](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.container.Viewport)

**我的视口：**

```
Ext.define('MyViewport', {
   extend : 'Ext.container.Viewport',

   layout : 'border',
   padding : '5 5 5 5',
   defaults: {
       split: true,
       autoScroll : false
   },
   initComponent : function() {
       this.items = [{
         region: 'north',
         height: 70,
         width : '100%',
         split : false,
         padding : '0 0 5 0',
         items:[{
               //here some items
         }]
    },{
        region:'west',
        collapsible: true,
        width: 210,
        maxWidth : 210,
        autoScroll : false,
        items:[{
               //here some items
         }]
    },{
        region:'center',
        id : 'workspace',
        //here I add panels dynamically
    }];
    this.callParent(arguments);
      }
 }); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:05:22.233

就像文档说的那样，视口永远不会自动将滚动条直接应用到它上面。

但是默认情况下，您的每个区域都是`Ext.panel.Panel`组件，它们会在溢出时自动获得滚动条。

尝试将`layout: fit`配置添加到您的视口。

如果这不能处理它，请将相同的配置添加到具有滚动条的面板组件中。

# javascript - 为什么 jquery 不能准确地为数字设置动画？

> ID：10758759
> 
> 赞同：8
> 
> 时间：2012-05-25T17:19:52.793
> 
> 标签：javascript, jquery, html

我正在尝试使用以下代码来增加文本框中的数字

```
 // Animate the element's value from 0 to 1100000:
$({someValue: 0}).animate({someValue: 1100000}, {
    duration: 1000,
    step: function() { // called on every step
        // Update the element's text with value:
        $('#counterx').text(Math.floor(this.someValue+1));
    }
}); 
```

它适用于从 0 到 100 之类的小数字，但是当涉及到上述代码中的大数字时，它没有给出目标数字，而是为 1099933 或 1099610 或.....等数字设置动画，并且每次它改变。

那么我怎样才能让它动画到我指定的数字呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T17:26:59.153

我有同样的问题。推理是因为`animate`函数使用基于时间的数学公式。在为基于 css 的动画制作动画时，您不会真正注意到这一点，因为像素足够接近就足够了。它将接近最终值，但可能并不总是完全是最终值。解决方案是使用`complete`事件来设置最后一个值。

这是您需要做的：

```
function animateNumber(ele,no,stepTime){
$({someValue: 0}).animate({someValue: no}, {
        duration: stepTime,
        step: function() { // called on every step. Update the element's text with value:
            ele.text(Math.floor(this.someValue+1));
        },
        complete : function(){
            ele.text(no);
        }
});
}

animateNumber($('#counterx'),100,10000);
animateNumber($('#countery'),100,1000)
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
counterx(slow): <span id=counterx>--</span>
<br/>
countery(fast): <span id=countery>--</span>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T17:28:46.847

Animate 并非**旨在**将计数器作为文本递增（尽管它可能会意外工作，这可能会随任何新版本的 jQuery 发生变化），它**旨在**为一个或多个 CSS 属性设置动画。您应该改用 setInterval 。

[http://jsfiddle.net/jbabey/mKa5r/](http://jsfiddle.net/jbabey/mKa5r/)

```
var num = 0;

var interval = setInterval(function () {
    document.getElementById('result').innerHTML = num;
    num++;

    if (num === 100) {
        clearInterval(interval);            
    }
}, 100);​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T17:48:01.270

1) Javascript 是单线程应用程序。超时和动画仅根据理想的堆叠顺序将事件推送到堆栈的末尾。长时间运行的脚本部分可能会导致该事件的实际触发时间远远超过您正在寻找的准确性。

2）动画近似于增加多少，并且在较大的数字上，分辨率非常不准确。

3) jQuery 只有一个动画缓冲区。如果您使用动画调用多个“计数器”，您可能会遇到一些严重的渲染问题。确保在进行任何影响它的调整之前停止上一个动画。

4) 即使超时时间为 0，您也可以预期现实世界的延迟约为 15。即使那是您正在运行的唯一“线程”。

**解决方案：**

```
take a snapshot of the DTG
set your interval to something within the human experience, say ~200
on each interval, check how much time has passed from the original DTG
set your text field to that delta number.
stop the interval with the original DTG + "your target number" > the new DTG 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T18:07:25.267

这是一个不使用的解决方案`.animate()`。

***演示：http:*** [//jsfiddle.net/czbAy/4/](http://jsfiddle.net/czbAy/4/)

这只是一个线性修改；如果那是你所追求的，你就不会得到缓和选项。

```
var counterx = $('#counterx'), // cache the DOM selection! :)
    i = 0,
    n = 1100000,
    dur = 1000, // 1 second
    int = 13,
    s = Math.round(n / (dur / int));

var id = setInterval(function() {
    counterx.text(i += s);
    if (i >= n) {
        clearInterval(id);
        counterx.text(n);
    }
}, int); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T08:59:59.747

这是一个可靠地为数字设置动画的 jquery 插件，一旦动画完成，ut 使用完整的回调来设置正确的最终数字：

[https://github.com/kajic/jquery-animateNumber](https://github.com/kajic/jquery-animateNumber)

# c++ - 从 Magick++ 图像从内存 (libharu) 加载图像

> ID：10758761
> 
> 赞同：6
> 
> 时间：2012-05-25T17:19:54.040
> 
> 标签：c++, image, imagemagick, libharu, magick++

我正在开发一些基于[libharu](http://libharu.org/)的 c++ pdf 生成软件，我希望能够首先使用[Magick++](http://www.imagemagick.org/Magick++/)操作图像，然后使用 libharu 函数从内存中加载它们：

```
HPDF_LoadRawImageFromMem() 
```

根据[文档](http://libharu.sourceforge.net/document_handling.html)`void *`，它本质上是从某个缓冲区加载图像。

我的目标是能够`void*`从实例中获取这些数据，[`Magick::Image`](http://www.imagemagick.org/Magick++/Image.html)并根据这些数据将此图像加载到我的 haru pdf 中。

我曾尝试写入 a`void*`或 a[`Magick::Blob`](http://www.imagemagick.org/Magick++/Blob.html)但到目前为止我唯一的成就是一些黑色矩形而不是我期望的图像。

有没有人有将*原始*图像数据从一个库转换为另一个库的经验？

我试图从内存中执行此操作的原因是因为到目前为止我正在将 Magick::Image 实例写入文件，然后从该文件中读取以加载然后在 haru 中，这在我的应用程序上下文中是一个巨大的性能损失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T02:48:29.213

我想我回答得有点晚了，但这是一个真实的答案。

我使用 LibHaru 成功地将 itk::Image 添加到我的 pdf 中，因此它对您的工作应该是一样的。首先，您需要知道您使用的库是行专业还是列专业。LibHaru（以及我知道的所有库）以行专业工作，因此您的库也应该如此，否则您将需要“转置”您的数据。

```
// Black and white image (8 bits per pixel)
itk::Image<unsigned char, 2>::Pointer image = ...;
const unsigned char *imageData = image->GetBufferPointer();
const HPDF_Image image = HPDF_LoadRawImageFromMem(m_Document,
    imageData, width, height, HPDF_CS_DEVICE_GRAY, 8);

// Or color image (24 bits per pixel, 8 bits per color component)
itk::Image<RGBPixel, 2>::Pointer image = ...;
const RGBPixel *imageData = image->GetBufferPointer();
const HPDF_Image image = HPDF_LoadRawImageFromMem(m_Document,
    reinterpret_cast<const unsigned char *>(imageData),
    width, height, HPDF_CS_DEVICE_RGB, 8);

// Usual LibHaru code. EndText, Position, Draw, StartText, etc.
// This code should not be dependant on the type
InsertImage(image); 
```

我认为唯一复杂的部分是 reinterpret_cast。黑白图像不需要一个，因为它已经定义为字节。例如，如果您有此图像

```
102 255 255
 99 200   0
255   0 100
imageData == {102, 255, 255, 99, 200, 0, 255, 0, 100}; 
```

但是，如果您有此彩色图像

```
(  0,   0, 255) (0, 255, 255) ( 42, 255, 242)
(200, 200, 255) (0, 199, 199) (190, 190, 190)
imageData == {0, 0, 255, 0, 255, 255, 42, 255, 242, 200, 200, 255, ... } 
```

LibHaru 会明白，因为你告诉他使用 HPDF_CS_DEVICE_RGB，这意味着它将数据分组在（R，G，B）中。

当然，使用 ImageMagick，您需要找到如何访问第一个像素。它可能是 data()、begin()、pointer() 等方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:15:57.150

不幸的是，我既没有使用 ImageMagic 也没有使用 libharu，但是我在图像处理方面有一些经验，而且由于还没有人回答，也许我可以提供一些帮助。问题可能是存在过多的原始图像格式，我很确定这两个库对这些格式的理解不同。更糟糕的是，libharu 的原始图像解释几乎没有记录。然而，libharu 处理原始数据的结论非常简单，可以从以下参数得出：“HPDF_LoadRawImageFromMem”。宽度和高度几乎是不言自明的，唯一的问题是使用（可能是像素）。更有趣的是：“bits_per_component”。这个参数大概描述了用多少位来定义一个像素（常用值为8：从 256 个值的调色板中索引，16：从 65535 个值的调色板中索引，24：红色、绿色和蓝色分别为一个字节 [RGB]，32：为 24，但具有 alpha 通道或 8 位用于青色、洋红色，黄色和黑色 [CMYK]，36：与 32 相同，但每个值有 9 位以便于换位...）。一个问题是该类型的糟糕文档：HPDF_ColorSpace，因为它可能描述了如何解释 with: "bits_per_component" 的颜色值。ImageMagic 似乎实现了一种完全不同的方法。图像对象似乎总是具有图像格式（JPEG、PNG、GIF），因此图像对象可能永远不会有“直截了当”的内存表示，而是经过编码的。我的建议是将 ImagaMagic 图像切换为 TIFF 格式，因为它允许压缩，因此与 libharu 假设的原始解释具有类似的方法。希望这至少有一点帮助……干杯马克。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T19:09:09.710

回答永远不会晚。

我使用 PNG blob 作为中间步骤：

```
Image image;
image.read("file.jpg");

Blob blob;
image.write(blob, "PNG");

HPDF_Image pdfImg = HPDF_LoadPngImageFromMem(doc, (const HPDF_BYTE*)blob.data(), blob.length());
HPDF_Page_DrawImage(doc, pdfImg, 0, 0, image.columns(), image.rows()); 
```

为简洁起见，省略了 PDF 文档和页面创建。

# java - Play Framework 2.0 如何在 Java 中使用 OpenID？

> ID：10758769
> 
> 赞同：4
> 
> 时间：2012-05-25T17:20:44.713
> 
> 标签：java, playframework, openid, playframework-2.0

如何在 Java 中使用 Play!2.0 OpenID？

我找到了一个[例子](https://gist.github.com/dcd9140eceb8f406f05a)，但我得到了这个错误：

```
! @6af3een21 - Internal server error, for request [GET /login/verify] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[Errors$BAD_RESPONSE$: null]]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:82) [play_2.9.1.jar:2.0]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:63) [play_2.9.1.jar:2.0]
at akka.actor.Actor$class.apply(Actor.scala:290) [akka-actor.jar:2.0]
at play.core.ActionInvoker.apply(Invoker.scala:61) [play_2.9.1.jar:2.0]
at akka.actor.ActorCell.invoke(ActorCell.scala:617) [akka-actor.jar:2.0]
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:179) [akka-actor.jar:2.0]
Caused by: play.api.libs.openid.Errors$BAD_RESPONSE$: null
at play.api.libs.openid.Errors$BAD_RESPONSE$.<clinit>(OpenIDError.scala) ~[play_2.9.1.jar:2.0]
at play.api.libs.openid.OpenID$$anonfun$verifiedId$7.apply(OpenID.scala:88) ~[play_2.9.1.jar:2.0]
at play.api.libs.openid.OpenID$$anonfun$verifiedId$7.apply(OpenID.scala:88) ~[play_2.9.1.jar:2.0]
at scala.util.control.Exception$Catch$$anonfun$either$1.apply(Exception.scala:110) ~[scala-library.jar:na]
at scala.util.control.Exception$Catch$$anonfun$either$1.apply(Exception.scala:110) ~[scala-library.jar:na]
at scala.util.control.Exception$Catch.apply(Exception.scala:88) ~[scala-library.jar:na] 
```

[Java 中有关 OpenID](http://www.playframework.org/documentation/2.0.1/JavaOpenID)的文档是不够的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T16:39:27.270

试试我的示例[https://gist.github.com/2889927](https://gist.github.com/2889927)

# php - 将 CSS 类动态分配给另一个类

> ID：10758770
> 
> 赞同：0
> 
> 时间：2012-05-25T17:20:46.847
> 
> 标签：php, css

是否可以将一个 CSS 类的属性分配给另一个类？如果不能用 CSS 完成，我可以使用服务器端脚本来传递变量。

例如，如果我有一个从 .myclass1 到 .myclass20 的类列表，并且我知道对于 user7，我需要将 .myDefault 替换为 myClass7，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:23:47.567

在 jQuery 中，您可以使用以下代码：

```
$('.myDefault').addClass('myClass7');
$('.myClass7').removeClass('myDefault'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:32:48.117

您希望一个类中的所有属性都被 CSS 中的另一个类继承。

不是两个类都由 JS 动态地应用于对象。

这不能直接用 CSS 来完成，而 JS 方法会花费相当多的时间来实现。

最好的选择是让您少看[一些 css](http://lesscss.org/)。

它可以满足您的需求，无论是服务器端还是客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:29:15.177

这不是一个直接的答案，但如果您想要混合设置，您可以使用多个类：

```
bigFont{
  font-size:150%;
}
errorBox{
  border:4px dashed red;
}
typMessage{
  padding:2px;
  margin:1px;
  overflow-y:auto;
}

<div class="typMessage">Hello World</div> 
```

通过向元素添加“errorBox”和/或“bigFont”类，它将“合并”CSS 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:32:54.037

这是在没有 jQuery 的情况下交换类的简单方法：http: [//jsfiddle.net/imsky/mrKHB/](http://jsfiddle.net/imsky/mrKHB/)

HTML：

```
<div id="test" class="big one sans phone">Hello world and </div> 
```

CSS：

```
.one {background:blue;color:#fff}
.two {background:yellow;color:#000}
.sans {font-family:sans-serif}
.big {font-size:24px}
.phone:after {content:"phone!"} 
```

JavaScript：

```
document.getElementById("test").onclick = (function(){
this.className = this.className.replace(/\bone\b/,"two");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T17:36:47.067

您可以使用 PHP 为您处理此问题。只需更换例如

```
<div class='myDefault'></div> 
```

和

```
// you should have that info stored somewhere anyway :)
$userClass = 'myClass7';

// now just echo out the right class for the user
<div class="<?php echo $userClass ?>"></div> 
```

# windows-phone-7 - WinRT 的图表控件

> ID：10758773
> 
> 赞同：-3
> 
> 时间：2012-05-25T17:21:02.370
> 
> 标签：windows-phone-7, charts, telerik, controls, windows-runtime

在 Telerik 博客上，我找到了关于从 WP7 Telerik 控件创建图表控件的文章。

[http://blogs.telerik.com/blogs/posts/11-10-07/radchart-for-windows-8-winrt-the-compilation.aspx](http://blogs.telerik.com/blogs/posts/11-10-07/radchart-for-windows-8-winrt-the-compilation.aspx)

我正在尝试重新创建场景，但我仍然有问题。我不确定我是否在正确的项目（WP7）中这样做。

有人这样做并且可以逐步解释如何重新编译这个库吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:01:45.417

那不适用于 Windows Phone。它解释了关于 Windows 8....

您可以使用适用于 Windows Phone 的 RadControls 尝试适用于 WP7 的图表。

以下是一些帮助您入门的链接

[WP7 的图表控件 - Telerik RadControls](http://cdn.static.viddler.com/flash/as3/full-publisher.swf?ref=www.telerik.com&key=ae0adc74&iframe=true&width=800&height=520)

[RadControl for WP7 - 文档 - 图表](http://www.telerik.com/help/windows-phone/radchart-overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:38:26.053

不，这不适用于 Windows Phone；您需要 Visual Studio 2011 和 Windows 8 Consumer Preview 才能使用这些控件！

有适用于 Windows Phone 的 RadChart，但该文章适用于 Windows 8 中的 Metro 应用程序！

# python - 用 Python 匹配一个对象和一个特定的正则表达式

> ID：10758774
> 
> 赞同：1
> 
> 时间：2012-05-25T17:21:04.823
> 
> 标签：python, regex, match

给定一个文本，我需要检查每个字符是否在两边都**精确（编辑）了3 个大写字母，如果有，则将其添加到返回的此类字符的字符串中。**

我写了以下内容：（`m = re.match("[A-Z]{3}.[A-Z]{3}", text)` 假设 text="AAAbAAAcAAA"）

我希望在匹配对象中得到两组：“AAAbAAA”和“AAAcAAA”

现在，当我调用时，`m.group(0)`我得到“AAAbAAA”，这是正确的。然而，在调用时`m.group(1)`，我发现没有这样的组，这意味着“AAAcAAA”不匹配。为什么？

此外，在调用时`m.groups()`，我得到一个空元组，尽管我应该得到一个匹配的元组，这意味着在我的情况下我应该得到一个带有“AAAbAAA”的元组。为什么那行不通？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:25:14.143

您的模式中没有任何组。要捕获组中的某些内容，您必须用括号括起来：

```
([A-Z]{3}).[A-Z]{3} 
```

例外是`m.group(0)`，它将始终包含整个匹配项。

查看您的问题，听起来您实际上并不是在寻找捕获组，而是在寻找重叠匹配。在正则表达式中，组是指匹配的一小部分，留作以后使用。例如，如果您尝试将电话号码与类似

```
([0-9]{3})-([0-9]{3}-[0-9]{4}) 
```

然后区号将在`group(1)`，本地部分在`group(2)`，整个事物将在`group(0)`。

你想要的是找到重叠的匹配。**这是一个 Stack Overflow 答案，它解释了[如何在 Python regex 中进行重叠匹配](https://stackoverflow.com/a/5616910/399649)，**这是我最喜欢[的捕获组和一般正则表达式的参考。](http://www.regular-expressions.info/brackets.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:25:03.027

一，`match`当它看起来像你想要的时候你正在使用`findall`。它不会抓住封闭的大写三元组，但`re.findall('[A-Z]{3}([a-z])(?=[A-Z]{3})', search_string)`会让你所有的单个小写字符两边都被 3 个大写字母包围。

# .net - Silverlight MessageBox.Show() 不显示中文字符

> ID：10758775
> 
> 赞同：0
> 
> 时间：2012-05-25T17:21:08.687
> 
> 标签：.net, silverlight-4.0, localization, character

我正在本地化我的应用程序，并通过它有消息框来提醒用户某些事情。当我在文本区域中包含中文字符时，它们在 VS2010 中调试时看起来像一堆正方形，但是当通过绑定到属性的对象在 UI 中显示时，它们会转换为正确的字符。但是当代码直接调用 messagebox.show("chinese characters") 时，它最终只会显示一堆空方块。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:09:58.407

Silverlight 中没有“双字节”之类的东西。所有字符串都以 utf-16 编码。双字节是 8 位代码页时代的一种破解方法，用于寻找一种对 CJK 文本进行编码的方法。您必须使用 Encoding 类将此类编码文本转换为 utf-16。

看到显示为正方形的文本可能是因为字符是由于编码错误而导致的控制代码。或者缺少对机器上安装的字体中的字形的支持。这也是一个迅速消失的问题，您通常只能在没有安装东亚字体支持的 XP 上安装它。

# visual-studio-2010 - Visual Studio 2010 是否允许您编辑图标？

> ID：10758776
> 
> 赞同：35
> 
> 时间：2012-05-25T17:21:10.687
> 
> 标签：visual-studio-2010, icons

当我在 Visual Studio 2010（专业版）中双击 .ico 文件时，它会打开一个看起来像图标编辑器的东西。看起来应该很容易从左侧选择颜色并编辑像素。

但我的鼠标是放大镜图标。左键单击，右键单击，他们所做的只是在图标上切换缩放。我不知道如何做任何有用的事情。

我错过了一些明显的东西吗？这个图标视图是否像看起来那样无用？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-17T15:15:54.530

您不能直接编辑 32 位彩色图标，但可以手动将它们转换为 24 位：

```
Right click > Add new icon 
```

打开你的`Icon1.ico`文件。

`Right click > New Image Type`或按`Ins`打开`New Icon Image Type`对话框。

选择您想要的格式，说`96x96, 24 bit`或添加任何自定义大小和颜色深度。

然后从 32 位图标文件中复制/粘贴并保存。

等等瞧！您现在可以编辑您的 24 位彩色图标。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-25T17:34:13.863

嗬！我需要启用视图-> 工具栏-> 图像编辑器。

感谢@detale。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-25T17:26:53.833

该图标由外部应用程序构建。

对于 Visual Studio 2008 和 2010 图像编辑器，
“使用图像编辑器，您可以查看 32 位图像，但无法编辑它们。”

[http://msdn.microsoft.com/en-us/library/s1dadd79.aspx](http://msdn.microsoft.com/en-us/library/s1dadd79.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-21T13:43:06.143

对于用作 Visual Studio 无法编辑的按钮图标的 PNG 图像，您可以使用外部编辑器作为 MS Paint。

*   在 Visual Studio 2010 中打开 PNG
*   右键单击白色画布 -> 打开外部编辑器

![在此处输入图像描述](../Images/40ded2448be2d6babe1a8e943f037370.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T17:22:57.143

Visual Studio 可以编辑图标，但不能编辑 24 位颜色图标。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-15T20:15:47.467

如果您身边有 Mac OS X 机器，您可以使用免费开发者工具中包含的 Icon Composer 应用程序编辑 Windows 图标。

我只是在处理一些跨平台的 Mac/Windows 代码时偶然发现了这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-04T06:01:21.443

我终于找到了一种无需视觉工作室的简单方法，GIMP [https://www.gimp.org/downloads/](https://www.gimp.org/downloads/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-10T13:37:08.067

Visual Studio 2022（免费提供）内置了一个图标编辑器。以防万一您最终因为尝试将彩色图像插入到 256x256 24 位图标中而导致颜色混乱：在右上角的编辑器工具栏中有一个用于不透明/透明背景的选择器，但**仅**当您激活了**矩形**或**不规则区域选择工具时。**默认背景设置为透明，您需要将其设置为**不透明**以保留图像。（透明度有一种特殊的颜色；虽然我的图像不包含颜色错误）

# c++ - C++ 将文本文件的单个字符打印到屏幕上

> ID：10758780
> 
> 赞同：1
> 
> 时间：2012-05-25T17:21:21.390
> 
> 标签：c++, vector

所以我有一个名为“maze.txt”的文本文件，如下所示：

```
###############
Sacbifnsdfweovw
############### 
```

我想检查左下角的字母是否是“S”，然后检查右边的字母是否是字母字符。然后，我会继续检查前一个字母后面的字符是否是字母字符。这些字母将存储在我的矢量“路径”中。最后，我将打印以筛选我们经历过的每个字母。但是出于某种原因，对于上面的那一大块字母，屏幕只打印出“S”和“a”，而没有其他任何内容。怎么了？这是我的代码：

```
int main()
{
    ifstream file("maze.txt");
    if (file) {
        vector<char> vec(istreambuf_iterator<char>(file), (istreambuf_iterator<char>())); // Imports characters from file
        vector<char> path;                      // Declares path as the vector storing the characters from the file
        int x = 17;                             // Declaring x as 17 so I can use it with recursion below
        char entrance = vec.at(16);             // 'S', the entrance to the maze
        char firstsquare = vec.at(x);           // For the first walkable square next to the entrance

        // Check that the entrance really has 'S'
        if (entrance == 'S')                    
        { 
            path.push_back(entrance);           // Store 'S' into vector 'path'
        }

        // Check if the first path is an alphabetical character and thus walkable
        if (isalpha(firstsquare))               
        {
            path.push_back(firstsquare);        // Store that character into vector 'path'
            isalpha(vec.at(x++));               // Recurse 'isalpha' to the next adajcent square of the maze;
        }                                       // checking next character

        cout << "Path is: ";                    // Printing to screen the first part of our statement

        // This loop to print to the screen all the contents of the vector 'path'.
        for(vector<char>::const_iterator i = path.begin(); i != path.end(); ++i)  // 
        {
        std::cout << *i << ' ';
        }

        cout << endl;
        system ("pause");                       // Keeps the black box that pops up, open, so we can see results.
        return 0;
        }
} 
```

提前致谢！顺便说一句，我是 C++ 新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:34:50.603

由于这看起来像是一个学习项目（家庭作业、自学等），我只会给出提示。

我认为这一行（尤其是评论）表明了问题：

```
isalpha(vec.at(x++)); // Recurse 'isalpha' to the next adajcent square of the maze; 
```

你没有“递归”任何东西，你忽略了 isalpha 的结果。您只是在确定下一个字符是否按字母顺序排列，然后什么也不做，只有那个字符。

# r - 基于R中的函数附加数据帧

> ID：10758793
> 
> 赞同：0
> 
> 时间：2012-05-25T17:22:15.197
> 
> 标签：r, selection, plyr

如何一个接一个地附加数据帧以形成另一个数据帧？是否包含数据框将由标准决定。

这是一个示例数据：

```
d1 <- data.frame(MyGroups =sample(LETTERS,100,replace=TRUE),
                 MyInt = sample(c(1:20),100,replace=TRUE)) 
```

现在，我应该如何从 MyGroups 中选择变量 MyInt 的平均值大于 10 的组（A、B、C...）？

我尝试了以下但没有成功。在这里，我根据给定的标准将数据框附加到文件中。

```
require("plyr")

keepGrp <- function(df0) { 
  if(max(df0$MyInt < 10)) {df0 <- NULL}
  write.csv(df0,'mytable.txt',append=TRUE,sep=',')
}

ddply(d1,.(MyInt),function(x) keepGrp(x)) 
```

所需的数据框应该在文件 mytable.txt 我完全确定有更好的方法来做我想做的事情。如果需要，我很乐意澄清我的问题。我会很感激有人可以（1）向我展示关于改进我的编程思想的反馈（2）给我一个解决我的问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:59:35.910

如果我正确理解您的问题，您想按组计算平均值，并且只将满足特定阈值的那些写入预先存在的文件。如果是这样，为什么不立即计算所有均值，将其子集化，然后将其写出来？这是一个可能应该分成多个班轮的班轮，但我想你会明白的：

```
write.table(
  subset(
    ddply(d1, "MyGroups", transform, meanval = mean(MyInt)
          ), 
    meanval > 10), 
  "yourcsv.csv", append = TRUE, sep = ",", col.names = FALSE
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:34:07.190

它比你做的简单。如果满足条件，则调用的函数`ddply`可以返回数据子集，否则返回空的 data.frame。

```
keepGrp <- function(df0) {
  if(mean(df0$MyInt) > 10) {
    df0
  } else {
    data.frame()
  }
}

res <- ddply(d1, .(MyGroups), keepGrp) 
```

请注意，您的内部测试`keepGrp`是错误的（没有测试值的平均值`MyInt`）并且分组`ddply`是错误的（应该是`MyGroups`，不是`MyInt`）。

检查这是否正确：

```
> ddply(d1, .(MyGroups), summarise, ave = mean(MyInt))
   MyGroups       ave
1         A 14.200000
2         B  9.600000
3         C  5.600000
4         D  5.600000
5         E  8.000000
6         F 10.500000
7         G  7.333333
8         H 12.000000
9         I  7.333333
10        J  9.500000
11        K 11.000000
12        L 12.375000
13        M 13.250000
14        N 12.000000
15        O 11.666667
16        P  8.625000
17        Q 13.000000
18        R  6.000000
19        S 16.000000
20        T 12.000000
21        U 12.000000
22        V 13.250000
23        W 17.666667
24        X  9.000000
25        Y 12.400000
26        Z 13.750000
> unique(res$MyGroup)
 [1] A F H K L M N O Q S T U V W Y Z
Levels: A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
```

所以出现的`res`那些是那些具有适当平均值的`MyInt`。

# javascript - 在嵌入对象中添加变量以在单击时显示

> ID：10758794
> 
> 赞同：0
> 
> 时间：2012-05-25T17:22:17.453
> 
> 标签：javascript, variables, embed

我有一个嵌入代码，当我单击计算按钮时会显示该代码

```
<script type="text/javascript">
function ln(){
document.getElementById('looknorth').innerHTML='<embed bgcolor="#dbdbd3" flashvars="lcId=1169793726234&amp;state=symbol%3D%5Ensebank;range=1d;indicator=ema(13,34,55)+macd+rsi+stochasticfast;charttype=candlestick;crosshair=on;ohlcvalues=0;logscale=on;source=undefined" loop="false" menu="false" name="BANKNIFTY" pluginspage="http://www.macromedia.com/go/getflashplayer" src="http://us.js2.yimg.com/us.yimg.com/i/us/fi/yfc/swf/flashchart_1.18.swf" style="height: 775px; width: 550px" type="application/x-shockwave-flash" wmode="opaque"></embed>';
  }     
</script>
<input type=button style="background-color:#123742; color:#FFFFFF ; font-weight:bold; font-size:15" name=Button2 value=Calculate onClick=ln();></td></tr> 
```

我想要一个下拉菜单，它采用符号“symbol%3D%5Ensebank;”的值 从下拉菜单的值。

我添加了代码

```
<select size="1" name="D1">
<option value="nsei" selected>Nifty</option>
<option value="bsen">Sensex</option>
</select><input type="submit" value="Submit" name="B1" onClick=ln();></p> 
```

但是要在嵌入代码中进行哪些更改以从 D1 获取符号值

请帮忙

```
<div id="looknorth"></div>
<script type="text/javascript">
function ln(vidvar){

tempcell = document.createElement("embed");
tempcell.setAttribute("bgcolor","#dbdbd3");
tempcell.setAttribute("flashvars",
("lcId=1169793726234&amp;state=symbol="
+vidvar+
";range=1d;indicator=ema(13,34,55)+macd+rsi+stochasticfast;charttype=candlestick;crosshair=on;ohlcvalues=0;logscale=on;source=undefined")
);
tempcell.setAttribute("loop","false");
tempcell.setAttribute("menu","false");
tempcell.setAttribute("name","Bank Nifty");
tempcell.setAttribute("pluginspage","http://www.macromedia.com/go/getflashplayer");
tempcell.setAttribute("src","http://us.js2.yimg.com/us.yimg.com/i/us/fi/yfc/swf/flashchart_1.18.swf");
tempcell.setAttribute("style","height: 775px; width: 550px");
tempcell.setAttribute("type","application/x-shockwave-flash");
tempcell.setAttribute("wmode","opaque");

document.getElementById('looknorth').innerHTML=""
document.getElementById('looknorth').appendChild(tempcell); 
```

}

```
<form name="Video" id="search" onsubmit="ln(search.D1.value)">

<select size="1" name="D1">
<option value="^nsei" selected>Nifty</option>
<option value="^bsesn" >Sensex</option>
</select>

<input type="submit" value="Submit" name="B1" onClick=ln();> 
```

我试图调试代码，但仍然无法正常工作。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:58:28.577

您需要将它们包含在表单标签中。

```
<form name="Video" id="search" onsubmit="ln(search.D1.value)">

<select size="1" name="D1">
<option value="nsei" selected>Nifty</option>
<option value="bsen" >Sensex</option>
</select>

<input type="submit" value="Submit" name="B1" />

</Form> 
```

然后，改变 ln() 让它接受一个变量，所以也许试试：

```
<script type="text/javascript">
function ln(vidvar){

tempcell = document.createElement("embed");
tempcell.setAttribute("bgcolor","#dbdbd3");
tempcell.setAttribute("flashvars",
    ("lcId=1169793726234&amp;state="
    +vidvar+
    ";range=1d;indicator=ema(13,34,55)+macd+rsi+stochasticfast;charttype=candlestick;crosshair=on;ohlcvalues=0;logscale=on;source=undefined")
    );
<!-- And  so on for the rest of the attributes of the <embed> tag -->   
document.getElementById('looknorth').innerHTML=""
document.getElementById('looknorth').appendChild(tempcell);
  }     
</script> 
```

这可能有一些错误，但这是一般的想法。

# java - Java可视化库叫“C-BOMB”什么的？我想我听错了

> ID：10758796
> 
> 赞同：0
> 
> 时间：2012-05-25T17:22:22.217
> 
> 标签：java, visualization

昨天我和一位 Java 编码员交谈，他们提到他们使用可视化库制作了一些有趣的图形（饼图、gui 或条形图）。

它被称为“c-bomb”或“see bon”。他们有浓重的法国口音，电话线很糟糕。

有什么想法可以参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:03:22.837

可能是她/他只是在说“这很好”（*c'est bien*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:33:13.317

这听起来不像你提到的我知道的，但是当谈到 Java 和图表生成/可视化时，我想到的是[JFreeChart 。](http://www.jfree.org/jfreechart/)

# php - 用于下载网页源代码并搜索特定字符串的 PHP 脚本

> ID：10758800
> 
> 赞同：-4
> 
> 时间：2012-05-25T17:22:41.263
> 
> 标签：php

我需要帮助编写完成以下任务的 PHP 代码：

1.  访问网站 (www.example.com)
2.  将其源代码下载到字符串变量中
3.  在此特定字符串中搜索特定内容，例如

    `<div class="news" title="news alert">Click to get news alert</div>`

基本上我需要搜索源代码`title="news alert"`

谢谢你们，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:28:27.383

你可以使用[PHP DOM](http://php.net/manual/en/class.domdocument.php)：

```
$text = file_get_contents('http://example.com/path/to/file.html');
$doc = new DOMDocument('1.0');
$doc->loadHTML($text);
foreach($doc->getElementsByTagName('div') AS $div) {
    $class = $div->getAttribute('class');
    if(strpos($class, 'news') !== FALSE) {
        if($div->getAttribute('title') == 'news alert') {
            echo 'title found';
        }
        else {
            echo 'title not found';
        }
    }
} 
```

或者可能是尝试模拟 jQuery 服务器端的[查询路径：](http://api.querypath.org/docs/)

```
$text = file_get_contents('http://example.com/path/to/file.html');
if(qp($text)->find('div.news[title="news alert"]')->is('*')) {
    echo('title found');
}
else {
    echo('title found');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:56:15.350

您可以使用[DOMXPath](http://www.php.net/manual/en/class.domxpath.php)找到它：

```
$dcmnt = new DOMDocument(); $dcmnt->loadHTML( $cntnt );
$xpath = new DOMXPath( $dcmnt );
$match = $xpath->query("//div[@title='news alert']");

echo $match->length ? "Found" : "Not Found" ; 
```

演示：[http ://codepad.org/CLdE8XCQ](http://codepad.org/CLdE8XCQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:27:38.483

这很简单：

```
$html = file_get_contents('http://site.com/page.html');
if (strpos($html,'title="news alert"')!==false)
 echo 'title found'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:29:06.337

```
$page = file_get_contents('http://www.example.com/');
if(strpos($page, "title=\"news alert\"")!==false){
    echo 'title found';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T17:36:42.583

```
$url = 'http://www.example.com/';
$page = file_get_contents($url);

if(strpos($page, 'title="news alert"') !==false || strpos($page, 'title=\'news alert\'') !==false)
{
    echo 'website with news alert found';
}
else
{
    echo 'website not found';
} 
```

# php - 无法在 redhat 上将 PEAR 1.8.0 升级到更高版本

> ID：10758801
> 
> 赞同：0
> 
> 时间：2012-05-25T17:22:49.050
> 
> 标签：php, phpunit, pear, redhat

我在 redhat 上使用 php 5.2.10。默认安装的 pear 包是 PEAR 1.8.0。现在我想通过 pear 安装 PHPunit。因此，每当我运行命令安装 phpunit 时，都会出现错误：

```
pear install --alldeps phpunit/PHPUnit

phpunit/PHPUnit requires PEAR Installer (version >= 1.9.2), installed version is 1.8.0
phpunit/PHPUnit can optionally use PHP extension "dbus"
phpunit/DbUnit requires PEAR Installer (version >= 1.9.2), installed version is 1.8.0
phpunit/File_Iterator requires PEAR Installer (version >= 1.9.2), installed version is         1.8.0
phpunit/PHP_CodeCoverage requires PEAR Installer (version >= 1.9.1), installed version   is 1.8.0
phpunit/PHP_CodeCoverage requires package "phpunit/File_Iterator" (version >= 1.2.2)
phpunit/PHP_CodeCoverage can optionally use PHP extension "xdebug" (version >= 2.0.5)
phpunit/PHPUnit_MockObject requires PEAR Installer (version >= 1.9.2), installed version is 1.8.0  
phpunit/PHPUnit_Selenium requires PEAR Installer (version >= 1.9.2), installed version is 1.8.0
phpunit/PHP_TokenStream requires PEAR Installer (version >= 1.9.1), installed version is 1.8.0
No valid packages found
install failed 
```

我试过命令升级梨：

```
pear upgrade pear
pear upgrade --force pear 
```

但它返回：

```
Nothing to upgrade 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:38:01.187

试试这个命令：

```
pear upgrade --force http://pear.php.net/get/PEAR-1.9.4.tar 
```

它将下载 pear 1.9.4 的 tar 并升级版本。
如果它不起作用，请检查您的 php 是否支持 .zlib。如果不支持，则通过以下命令配置您的 php with.zlib：

```
./configure --with zlib 
```

通过浏览器上的 phpinfo 命令检查这一点，它将在您的 php 信息页面中支持 zlib。
运行上述命令升级您的 pear 版本并通过以下方式检查：

```
pear version 
```

它会将您的 pear 版本显示为 1.9.4

然后运行命令：

```
pear install --alldeps phpunit/PHPUnit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:46:06.953

如果你使用 RHEL 6，你有 php-pear >= 1.9.4 你只需要通过 yum 更新，比如 yum install php-pear

但如果你这样做，它可能也会更新你的 php 安装。您将获得所有要更新的软件包的列表，并且您可以选择接受或取消。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T19:34:54.627

如果 pear 告诉您“无需升级”，您应该清除缓存：

```
$ pear clear-cache
$ pear upgrade pear 
```

# java - 带有 maven 和子项目的 Playframework 2.0

> ID：10758806
> 
> 赞同：3
> 
> 时间：2012-05-25T17:23:02.617
> 
> 标签：java, maven, playframework, sbt, subproject

我有一个 mavenized 的项目“核心”。我还有一个使用“核心”的游戏项目。游戏项目也被mavenized。所以有一个管理两个子模块的maven父项目。它适用于 maven (mvn install, mvn compile...) 但是当我启动播放并重新加载浏览器页面时，编译器会失败，因为它没有找到“核心”项目。这很正常，因为我必须添加一些东西来指示在哪里可以找到“核心”项目。我试图添加一个项目依赖项，但“核心”必须在 play 项目的模块文件夹中，我不希望这样。

我如何指示播放也编译“核心”项目的来源，或者至少指示播放在哪里可以找到“核心”项目类？

谢谢

* * *

感谢您的答复。但是我已经尝试了很多我在网上找到的关于配置 sbt 的东西（例如重新定义 unmanagedClasses），但我没有成功让它工作......

你有一个完整的例子，如何配置 sbt 来编译外部源代码？

（我不知道 sbt 是如何工作的，也不知道 sbt 或 scala 的语法，所以一个完整的示例将非常有帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:57:01.117

使用[play 2.0](http://www.playframework.org/documentation/2.0/Home)，使用 sbt，您可以配置事物的编译方式以及它们的位置。

使用 play 1.X，如果您不想将核心源作为依赖库，则必须将它们移动到 /app 中。您还可以使用符号链接将您的核心资源放在 /app 下

# c - 返回函数指针的函数的 C 语法

> ID：10758811
> 
> 赞同：37
> 
> 时间：2012-05-25T17:23:19.450
> 
> 标签：c, function-pointers

考虑以下 typedef：

```
typedef int (*f1)(float);
typedef f1 (*f2)(double);
typedef f2 (*f3)(int); 
```

`f2`是一个返回函数指针的函数。与 相同`f3`，但函数的类型，即`f3`返回的指针，是`f2`。如何在`f3`没有 typedef 的情况下定义？我知道 typedefs 是更简洁、更容易理解的定义方式`f3`。但是，我的目的是更好地理解 C 语法。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-05-25T18:07:35.793

从您的声明开始`f1`：

```
int (*f1)(float); 
```

你想`f2`成为一个返回函数的指针`f1`，所以`f1`在上面的声明中替换为`f2`：

```
int (*      f1     )(float);
            |
      +-----+-----+
      |           |
      v           v
int (*(*f2)(double))(float); 
```

声明内容如下

```
 f2                   -- f2
       *f2                   -- is a pointer
      (*f2)(      )          -- to a function
      (*f2)(double)          --   taking a double parameter
     *(*f2)(double)          --   returning a pointer
    (*(*f2)(double))(     )  --   to a function
    (*(*f2)(double))(float)  --     taking a float parameter
int (*(*f2)(double))(float)  --     returning int 
```

您重复该过程`f3`：

```
int (*(*    f2    )(double))(float);
            |
        +---+----+
        |        |
        v        v
int (*(*(*f3)(int))(double))(float); 
```

读作

```
 f3                           -- f3
         *f3                           -- is a pointer
        (*f3)(   )                     -- to a function
        (*f3)(int)                     --   taking an int parameter
       *(*f3)(int)                     --   returning a pointer
      (*(*f3)(int))(      )            --   to a function
      (*(*f3)(int))(double)            --     taking a double parameter
     *(*(*f3)(int))(double)            --     returning a pointer
    (*(*(*f3)(int))(double))(     )    --     to a function
    (*(*(*f3)(int))(double))(float)    --       taking a float parameter
int (*(*(*f3)(int))(double))(float);   --       returning int 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-25T17:30:56.977

在 C++ 中，模板的奇迹可以使这变得更容易一些。

```
#include <type_traits>

std::add_pointer<
    std::add_pointer<
        std::add_pointer<
            int(float)
        >::type(double)
    >::type(int)
>::type wow; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-25T17:26:19.110

与 typedef 相同，只是您将函数定义放在其名称的位置。

如下`f2`所示：

```
typedef int (*(*f2)(double))(float); 
```

你可以做`f3`一个练习，因为我假设这是家庭作业；）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-25T17:32:50.463

只是不要。可以做到，但是会很混乱。Typedef 可以方便地编写和阅读这段简短的代码。

`f`不带参数并返回函数指针的函数可能`int (*)(float)`类似于（未经测试）：

```
int (*f())(float); 
```

然后剩下的你只需要继续添加括号，直到它看起来像 lisp。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-16T09:05:52.173

学习[左右规则](http://ieng9.ucsd.edu/~cs30x/rt_lt.rule.html)：

> “左右”规则是解读 C 声明的完全常规规则。它在创建它们时也很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T17:38:46.057

使用`std::function`：

```
typedef std::function<int(float)> f1;
typedef std::function<f1(double)> f2;
typedef std::function<f2(int)>    f3; 
```

或者

```
typedef std::function<std::function<std::function<int(float)>(double)>(int)> f3; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-24T21:23:53.570

受 John Bode 回答的启发，我想以图形方式呈现它。它应该可以帮助您了解编译器如何将其转换为 AST：

[![函数返回值中的函数，递归](../Images/67edaf32984b6a170ed631e955de022a.png)](https://i.stack.imgur.com/3ejLK.png)

我们首先 (1) 从压缩类型 f3 开始，如“typedef f2 (*f3)(int);”所示。它本身就是一个函数类型。然后在 (2) 中将其进一步解包，其中放置了封闭的花括号，实质上执行 C 语言的“is-function”CFG 生成（我假设读者对编程语言词法分析有一个基本概念）。通过查看 (3)，您会看到我们已经递归执行了三次“is-function”词法分析步骤，图中的“函数”节点可以看到这三次。

在自定义符号中尝试所需（但简化）的 CFG 产品，它们看起来像......

```
declaration -> underlying_type:specifier sp ( func-ptr-decl | specifier )
func-ptr-decl -> '(' sp '*' sp ( func-ptr-decl | specifier ) sp ')' sp '(' sp param-list sp ')' 
```

说明符是一个字符串，在 C 编程语言中最好解释为变量名，sp 是可选的空格字符串，param-list 被简化为（可能为空）逗号分隔的声明列表。

在 C 中，每条引入变量或参数的语句都称为声明。声明由位置/名称、数据类型和初始化程序组成。在给定的问题中，我们有类型是指向函数的声明。函数指针类型递归嵌套最多 3 次。该图以箭头指向类型的方式显示了它，这意味着它们嵌套在其他类型中。

# java - 运行 .class 文件时出错

> ID：10758812
> 
> 赞同：0
> 
> 时间：2012-05-25T17:23:20.733
> 
> 标签：java, class, url, io

我想知道为什么 Game.class 不会启动。这是我遇到的问题：

```
java.lang.NoClassDefFoundError: Game (wrong name: game/Game)`

  at java.lang.ClassLoader.defineClass1(Native Method)
  at java.lang.ClassLoader.defineClass(Unknown Source)
  at java.security.SecureClassLoader.defineClass(Unknown Source)
  at java.net.URLClassLoader.defineClass(Unknown Source)
  at java.net.URLClassLoader.access$100(Unknown Source)
  at java.net.URLClassLoader$1.run(Unknown Source)
  at java.net.URLClassLoader$1.run(Unknown Source)
  at java.security.AccessController.doPrivileged(Native Method)
  at java.net.URLClassLoader.findClass(Unknown Source)
  at java.lang.ClassLoader.loadClass(Unknown Source)
  at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
  at java.lang.ClassLoader.loadClass(Unknown Source)
  at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)

 Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:47:56.290

如果你这样做，你会得到类似的错误：

```
package game;

class Game 
{
    public static void main(String[] args) 
    {
        System.out.println("Hello World!");
    }
} 
```

无需将编译后的类文件放在名为 game 的子文件夹中并像 java Game 一样运行它。因此，您的 Game 类位于名为 game 的包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T08:57:15.210

请检查您的包装结构并确保您的类文件在包文件夹中。编译并快乐执行....

# ruby-on-rails - 将属性分配给rails中的资源时出错

> ID：10758814
> 
> 赞同：0
> 
> 时间：2012-05-25T17:23:38.123
> 
> 标签：ruby-on-rails, devise, has-and-belongs-to-many

我正在尝试允许当前用户邀请另一个用户并将该新受邀者分配给列表，但是当受邀用户去注册时出现错误。

有两个模型，用户和列表，它们与每个模型上的 has_and_belongs_to_many 相关。还有一个邀请模型，其中包含一个令牌和受邀者需要分配到的列表。

我正在覆盖设计注册控制器：

```
 def new
    resource = build_resource({:invitation_token => params[:invitation_token]})
    resource.email = resource.invitation.recipient_email if resource.invitation
    respond_with resource
  end

  # POST /resource
  def create
    resource = build_resource
    resource.listings << resource.invitation.listing if resource.invitation
. . . 
```

当我邀请新用户并转到注册（注册/新）页面时，填写表格，然后单击提交，它工作正常。但是，如果我错过了导致验证错误的表单的一部分，当我正确填写表单并单击提交时，我会收到以下错误：

```
Couldn't find Listing with id=0 
```

该错误似乎发生在该行上：

```
resource.listings << resource.invitation.listing if resource.invitation 
```

没有那条线，错误就不会发生。

这是来自服务器日志的错误：

```
 Listing Load (0.3ms)  SELECT "listings".* FROM "listings" WHERE "listings"."id" = $1 LIMIT 1  [["id", 0]] 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:59:52.817

这里的问题实际上是在我的视图文件中，我有以下内容：

```
-if resource.listing_ids != []
  = f.hidden_field :listing_ids#, :value => resource.invitation.listing.id 
```

它是上次尝试在参数中传递listing_ids 时遗留下来的。

# cocoa - 基于视图的 NSTableView 的工具提示

> ID：10758815
> 
> 赞同：4
> 
> 时间：2012-05-25T17:23:38.020
> 
> 标签：cocoa, tooltip, nstableview

我有一个工具提示：

```
cellView.textField.toolTip = cellView.textField.stringValue; 
```

它总是显示，但我只需要在文本被剪辑时显示工具提示......我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-25T04:47:44.490

将`allowsExpansionToolTips`xib 中 Table View Cell 的属性设置为 YES。

[![在此处输入图像描述](../Images/726c873d5c61bbe7b082624135e2a3b6.png)](https://i.stack.imgur.com/fgn3R.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T01:39:41.697

我认为您可以通过实现文本字段委托方法 controlTextDidEndEditing 并检查文本大小来做到这一点。我发现 sizeWithAttributes: 返回的大小与填充文本字段时预期的大小不匹配，因此我只是凭经验确定了 if 语句所需的值（在此示例中，我绑定了文本字段的值到一个属性，theText）。

```
-(void)controlTextDidEndEditing:(NSNotification *)obj {
    NSLog(@"%@",NSStringFromRect([obj.object frame]));
    NSDictionary *dict = [NSDictionary dictionaryWithObject:[NSFont systemFontOfSize:13] forKey:@"NSFontAttributeName"];
    NSSize size = [theText sizeWithAttributes:dict];
    NSLog(@"%@",NSStringFromSize(size));
    if (size.width >69) {
        [obj.object setToolTip:theText];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-09T12:02:27.440

尝试：allowExpansionToolTips（在[Swift](https://developer.apple.com/documentation/appkit/nscontrol/1428962-allowsexpansiontooltips)，[Obj-C](https://developer.apple.com/documentation/appkit/nscontrol/1428962-allowsexpansiontooltips?language=objc)中）

> 当单元格无法显示完整内容并且用户将指针悬停在控件上时，会显示扩展工具提示。

# ms-access - 从访问表中查找并显示日期值

> ID：10758817
> 
> 赞同：1
> 
> 时间：2012-05-25T17:23:55.597
> 
> 标签：ms-access, vba, ms-access-2003

在 Access 2003 中单击表单中的命令按钮时，我试图弹出一个 msgbox
。与数据库中表中引用的日期相比，msgbox 应该由当前日期触发。它看起来像这样：

```
If Date() is < [Date in table?], THEN "Msgbox" = "It is now Quarter 2" 
```

一旦超过第 3 季度的日期，消息框将显示“现在是第 3 季度”

谢谢如果你能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:34:14.803

Access 有一组称为域函数的函数，用于查找存储在表中的单个信息。一些最常见的是 DCount()、DLookup()、DSum()、DAvg()、DMax() 和 DMin()。

为此，您需要使用 DLookup 函数。基本上，它需要一个字段名和一个表名来查找一个值。在许多情况下，您希望包含一个条件语句（或 WHERE 子句）作为第三个参数，以确保 DLookup 函数实际上是从正确的行中检索值。如果您不传递条件语句，域函数将简单地返回第一个匹配项。

```
If Date() <= DLookup("SomeDateField", "tblYourTableName") Then
    MsgBox "The date in stored in the table is today or else is in the future."
Else
    MsgBox "The date stored in the table is in the past."
End If 
```

这是另一种写法：

```
If Date() < DLookup("SomeDateField", "tblYourTableName") Then
    MsgBox "The date in stored in the table is in the future."
Else
    MsgBox "The date stored in the table is today or is in the past."
End If 
```

如果表中有多个记录/行，这就是您的操作方法。然后，您需要某种条件语句来缩小范围，以便从您想要的行中检索您想要的值。

```
If Date() < DLookup("SomeDateField", "tblYourTableName", "UserID = 1") Then
    MsgBox "The date in stored in the table is in the future."
Else
    MsgBox "The date stored in the table is today or is in the past."
End If 
```

虽然这并不是您真正要问的，但我认为了解此功能（和其他域功能）幕后真正发生的事情很重要。基本上，您选择从一个表中检索一个值，并可以选择使用条件语句（在 SQL 中称为 WHERE 子句）指定要从哪个记录/行中检索值。因此，让我们看看您将如何编写这样的函数，以及 Microsoft 可能如何编写他们的 DLookup 函数。

```
Public Function MyLookup(ByVal strField As String, _
                         ByVal strTable As String, _
                         Optional ByVal strCriteria As String) As Variant
    'Error handling intentionally omitted
    'Proper error handling is very critical in
    'production code in a function such as this 
    If strField <> "" And strTable <> "" Then
        Dim sSQL as string
        sSQL = "SELECT TOP 1 " & strField & " FROM " & strTable
        If strCriteria <> "" Then
            sSQL = sSQL & " WHERE " & strCriteria
        End If
        Dim rst As DAO.Recordset
        Set rst = CurrentDb.OpenRecordset(sSQL, dbOpenSnapshot)
        If Not (rst.EOF and rst.BOF) Then
            MyLookup = rst(strField).Value
        End If
        rst.Close
        Set rst = Nothing
    End If
End Function 
```

现在假设您想在联系人表中查找某人的生日：

```
Dim dteBirthDate as Date
dteBirthDate = MyLookup("BirthDate", "tblContacts", "ContactID = " & 12345) 
```

如果您没有 DLookup 函数（或者如果您没有编写自己的函数），那么每次您需要在一张桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:42:03.817

我认为您正在寻找的是以下内容：

```
'Dates to be retrieved from the db (quarter start dates)
Dim q1 As Date
Dim q2 As Date
Dim q3 As Date
Dim q4 As Date
'Today's date
Dim today As Date
Dim quarter As Integer

Set today = Date()
Set q1 = DLookup("FieldContainingDate", "tableContainingDates", "quarter=1")
Set q2 = DLookup("FieldContainingDate", "tableContainingDates", "quarter=2")
Set q3 = DLookup("FieldContainingDate", "tableContainingDates", "quarter=3")
Set q4 = DLookup("FieldContainingDate", "tableContainingDates", "quarter=4")

Set quarter = 1 'Base case.
If (today > q1) Then quarter = 2
If (today > q2) Then quarter = 3
If (today > q3) Then quarter = 4

MsgBox "It is quarter " & quarter 'Display which quarter it is in a msgbox 
```

您可能不得不根据您将日期格式存储在数据库中的方式等来摆弄日期格式。以另一种方式编写它也会更有效（例如删除中间 q# 变量）但我把它写出来了用很长的方式使它更清楚。

# gwt - GWT 元素事件处理

> ID：10758821
> 
> 赞同：0
> 
> 时间：2012-05-25T17:24:26.617
> 
> 标签：gwt

如何将简单的单击处理程序附加到 GWT 中的 DOM 元素？

```
@UIField com.google.gwt.dom.client.AnchorElement anchor; 
```

如何为 'anchor' 创建 onclick 处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:37:32.410

如果你想使用这个[`ClickHandler`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/ClickHandler.html)接口，你可以通过[`AnchorElement`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/dom/client/AnchorElement.html)用一个包装 来做到这一点[`Anchor`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Anchor.html)，它有一个[`addClickHandler`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FocusWidget.html#addClickHandler%28com.google.gwt.event.dom.client.ClickHandler%29)方法和一个[`wrap`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Anchor.html#wrap%28com.google.gwt.dom.client.Element%29)方法。

因此，例如：

```
AnchorElement myAnchor;
Anchor anchorWrapper = Anchor.wrap(myAnchor);
anchorWrapper.addClickHandler(myClickHandler); 
```

会成功的。

这通常适用于许多 UI 元素：

*   [按钮](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Button.html#wrap%28com.google.gwt.dom.client.Element%29)
*   [图片](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Image.html#wrap%28com.google.gwt.dom.client.Element%29)
*   [文本框](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TextBox.html#wrap%28com.google.gwt.dom.client.Element%29)
*   [文本区域](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TextArea.html#wrap%28com.google.gwt.dom.client.Element%29)
*   [密码文本框](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PasswordTextBox.html#wrap%28com.google.gwt.dom.client.Element%29)

但是 wrap 方法不是继承自[`Widget`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Widget.html)，所以有一些例外：

*   [CheckBox](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/CheckBox.html)没有`wrap`方法，但是[`SimpleCheckBox`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/SimpleCheckBox.html#wrap%28com.google.gwt.dom.client.Element%29)有。
*   [日期框](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/datepicker/client/DateBox.html)

# java - 如何在 Eclipse 的 Android 项目中删除 localRefs 和/或为 phonegap 创建 globalRefs

> ID：10758823
> 
> 赞同：1
> 
> 时间：2012-05-25T17:24:33.930
> 
> 标签：java, android, c++, cordova

我一直在为我的android phonegap 应用程序中的一个问题而烦恼，由于该应用程序需要大量图像，该应用程序在加载时崩溃。

在所有其他 API 中，它运行良好。

通过研究，我发现我需要删除 localRefs 和/或创建 globalRef

我需要帮助来度过这个大日子。

我发现了这个和许多其他人喜欢它。

[https://groups.google.com/group/android-ndk/browse_thread/thread/fe30e44a42e03efb?pli=1](https://groups.google.com/group/android-ndk/browse_thread/thread/fe30e44a42e03efb?pli=1)

我不知道从哪里开始删除 localRefs 或在我的项目中添加 globalRefs。有人可以给我详细的说明，说明从哪里开始以及在哪里添加代码以进行这些更改。

谢谢你。

# .net - 从 Citrix 打印标签

> ID：10758826
> 
> 赞同：0
> 
> 时间：2012-05-25T17:24:42.637
> 
> 标签：.net, printing, citrix

我正在使用默认标签尺寸设置为 4 x 6 英寸的标签打印机进行打印。我在标签中加载了 4 x 2，然后使用此代码打印到它：

```
Private Sub SetPaperSize(ByVal width As Double, ByVal height As Double)
    Dim size As New Drawing.Printing.PaperSize
    size.PaperName = "Custom Size"
    size.Width = width * 100
    size.Height = height * 100

    printDoc.DefaultPageSettings.PaperSize = size
    printDoc.PrinterSettings.DefaultPageSettings.PaperSize = size
End Sub 
```

我从本地机器上运行这段代码，打印出来了。然后我从 citrix 服务器上运行的应用程序打印它，打印机仍然认为它正在打印 4 x 6 的标签。所以我得到了我的打印标签，然后是 2 个空白标签。

有没有办法强制本地打印机使用我在服务器上设置的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:14:33.877

[我在这个答案](https://stackoverflow.com/questions/1707544/printing-on-citrix-server)中读到了一条评论，这让我走上了正确的道路。我在我们的 citrix 服务器上安装了我的标签打印机驱动程序，创建了一个打印机来测试它是否工作，然后将该打印机从最终用户那里隐藏起来，这样他们就不会意外地打印到它。

现在一切都在正确打印。

# android - AlertDialog setCustomTitle 样式以匹配标准 AlertDialog 标题

> ID：10758827
> 
> 赞同：21
> 
> 时间：2012-05-25T17:24:49.157
> 
> 标签：android, android-alertdialog, custom-titlebar

我正在开发一个 Android 应用程序，并且我有一个 AlertDialog 子类。我想在对话框标题区域的右侧放置 2 个 ImageButtons（类似于 Activity 中的 ActionBar）。我正在使用 setCustomTitle() 来执行此操作，它将标题区域替换为我自己创建的自定义视图。这很好用，但我的自定义标题区域的样式与标准标题样式（高度、颜色、分隔符等）不同。

我的问题是：**了解样式因操作系统版本和制造商而异**，如何在对话框中设置自定义标题的样式，以便与其他 AlertDialogs 的标准标题样式匹配？

这是具有标准样式的 anAlertDialog 的图像（来自 ICS，但我希望能够匹配任何变体——不是这种特殊样式） ![在此处输入图像描述](../Images/f7b3a8bccd186f4315693cfe10fa3d13.png)

这是带有自定义标题和按钮的 AlertDialog 的图像（请注意标题高度和颜色如何与标准对话框不匹配） ![在此处输入图像描述](../Images/02ceb5ac164e34384c1e3c28f494b85c.png)

编辑：我不能只将 ImageButtons 添加到标准标题视图中，因为我无权访问它。 **如果您知道我向标准标题区域添加按钮的（可靠，非黑客）方法，我也会接受。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T21:51:06.907

鉴于对这个问题有新的兴趣，让我详细说明我是如何“解决”这个问题的。

首先，我在我的应用程序中使用[ActionBarSherlock](http://actionbarsherlock.com/)。我想这不是必需的，尽管它很有帮助，因为 ABS 项目中定义的样式和主题允许我在 ICS 之前的设备上模仿 Holo 主题，这在应用程序中提供了一致的体验。

其次，我的“对话”不再是对话——它是以对话为主题的活动。这使得视图层次结构的操作更简单，因为我拥有完全的控制权。所以现在向标题区域添加按钮是微不足道的。

这是屏幕截图（2.2 设备和 4.1 模拟器）。请注意，唯一显着的样式差异是 EditText，我选择不解决这个问题。

![2.2 设备](../Images/95b892563b055f1c2da27b0ff852a6c0.png) ![4.1 模拟器](../Images/a82b956c018f2d20921268da5367ef0f.png)

这是我的对话活动中的 onCreate：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.activity_tag);
    setTitle(R.string.tag_dialog_title);

    View sherlockTitle = findViewById(android.R.id.title);
    if (sherlockTitle != null) {
        sherlockTitle.setVisibility(View.GONE);
    }
    View sherlockDivider = findViewById(R.id.abs__titleDivider);
    if (sherlockDivider != null) {
        sherlockDivider.setVisibility(View.GONE);
    }

    // setup custom title area
    final View titleArea = findViewById(R.id.dialog_custom_title_area);
    if (titleArea != null) {
        titleArea.setVisibility(View.VISIBLE);

        TextView titleView = (TextView) titleArea.findViewById(R.id.custom_title);
        if (titleView != null) {
            titleView.setText(R.string.tag_dialog_title);
        }

        ImageButton cancelBtn = (ImageButton) titleArea.findViewById(R.id.cancel_btn);
        cancelBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });
        cancelBtn.setVisibility(View.VISIBLE);

        ImageButton okBtn = (ImageButton) titleArea.findViewById(R.id.ok_btn);
        okBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // do stuff here
                finish();
            }
        });
        okBtn.setVisibility(View.VISIBLE);
    }
} 
```

这是活动的相关布局：

```
<LinearLayout
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">
    <LinearLayout
        android:id="@+id/dialog_custom_title_area"
        android:orientation="vertical"
        android:fitsSystemWindows="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:paddingRight="10dp">
            <TextView
                android:id="@+id/custom_title" style="?android:attr/windowTitleStyle"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:minHeight="@dimen/abs__alert_dialog_title_height"
                android:paddingLeft="16dip"
                android:paddingRight="16dip"
                android:textColor="#ffffff"
                android:gravity="center_vertical|left" />

            <ImageButton
                android:id="@+id/ok_btn"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:minWidth="@dimen/abs__action_button_min_width"
                android:minHeight="@dimen/abs__alert_dialog_title_height"
                android:scaleType="center"
                android:src="@drawable/ic_action_accept"
                android:background="@drawable/abs__item_background_holo_dark"
                android:visibility="visible"
                android:layout_gravity="center_vertical"
                android:contentDescription="@string/acc_done"/>

            <ImageButton
                android:id="@+id/cancel_btn"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:minWidth="@dimen/abs__action_button_min_width"
                android:minHeight="@dimen/abs__alert_dialog_title_height"
                android:scaleType="center"
                android:src="@drawable/ic_action_cancel"
                android:background="@drawable/abs__item_background_holo_dark"
                android:visibility="visible"
                android:layout_gravity="center_vertical"
                android:contentDescription="@string/acc_cancel"
                />
        </LinearLayout>
        <View
            android:id="@+id/dialog_title_divider"
            android:layout_width="fill_parent"
            android:layout_height="2dip"
            android:background="@color/abs__holo_blue_light" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/list_suggestions_layout"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent">

        <!-- this is where the main dialog area is laid out -->

    </RelativeLayout>

</LinearLayout> 
```

最后，在我的 AndroidManifext.xml 中，这是我定义 TagActivity 的方式：

```
<activity 
    android:icon="@drawable/ic_home" 
    android:name=".activity.TagActivity" 
    android:theme="@style/Theme.Sherlock.Dialog"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:43:10.847

好吧，也许它不是超级完美的解决方案，也许它是一个糟糕的解决方案，但我在 android 2.3.7 和 android 4.1.2 上试过这个：

***`2.3.7 (real device)`***

![2.3.7（真机）](../Images/60afa456bc0bd2f6bb9e8a90cae263d5.png)

***`4.1.2 (emulator)`***

![4.1.2（模拟器）](../Images/60051604d0996f1f0928837b3556d4c8.png)

* * *

我们首先创建一个对话框标题样式，以确保我们有一些空间用于我们的图标：

***`res/values/dialogstyles.xml`***

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="Dialog" parent="@android:style/Theme.Dialog">
        <item name="android:windowTitleStyle">@style/MyOwnDialogTitle</item>
    </style>

    <style name="MyOwnDialogTitle">
        <!--  we need to make sure our images fit -->
        <item name="android:layout_marginRight">100dp</item>
    </style>

</resources> 
```

***`res/values-v11/dialogstyles.xml`***

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="Dialog" parent="@android:style/Theme.Holo.Dialog">
        <item name="android:windowTitleStyle">@style/MyOwnDialogTitle</item>
    </style>

</resources> 
```

然后我们用两个技巧创建我们的 DialogFragment：

*   在中设置样式`onCreate`：

    ```
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setStyle(DialogFragment.STYLE_NORMAL, R.style.Dialog);
    } 
    ```

*   覆盖`onCreateView`并将我们的布局（按钮）添加到对话框（见评论）

    ```
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        //we need the view to remove the tree observer (that's why it is final)
        final View view = inflater.inflate(R.layout.dialog_custom, container);
        getDialog().setTitle("Shush Dialog");
        //register a layout listener to add our buttons
        view.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

            @SuppressWarnings("deprecation")
            @SuppressLint("NewApi")
            @Override
            public void onGlobalLayout() {
                //inflate our buttons
                View menu = LayoutInflater.from(getActivity()).inflate(R.layout.layout_mymenu, null);
                //get the root view of the Dialog (I am pretty sure this is the weakest link)
                FrameLayout fl = ((FrameLayout) getDialog().getWindow().getDecorView());
                //get the height of the root view (to estimate the height of the title) 
                int height = fl.getHeight() - fl.getPaddingTop() - fl.getPaddingBottom();
                //to estimate the height of the title, we subtract our view's height
                //we are sure we have the heights btw because layout is done
                height = height - view.getHeight();
                //prepare the layout params for our view (this includes setting its width)
                //setting the height is not necessary if we ensure it is small
                //we could even add some padding but anyway!
                FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, height);
                params.gravity = Gravity.RIGHT | Gravity.TOP;
                //add the view and we are done
                fl.addView(menu, params);
                if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN)
                    view.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                else
                    view.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            }
        });
        return view;
    } 
    ```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-25T17:46:48.630

好吧，如果它只是图像，那么您只需确保您在 xml 中创建的所有内容都按密度像素或简称为 DP 进行缩放。大多数设置绘画的简单编码通常也由像素设置，并且可能需要手动编码版本来密度像素。

# ios - 当我尝试存档时找不到 GDataCalendar.h

> ID：10758829
> 
> 赞同：0
> 
> 时间：2012-05-25T17:25:04.713
> 
> 标签：ios, google-calendar-api, gdata, gdata-api

我的项目使用 GData API 与 Google Calendar 连接。我在模拟器和设备的调试模式下测试一切正常。但是当我归档以便创建一个 adHoc 时。它给我一个错误，说没有找到 GDataCalendar.h。请帮忙。

我检查了，在我的项目目标 - >构建设置 - >标题搜索路径

*   在调试模式下，我有 ${BUILT_PRODUCTS_DIR}/Headers
*   在发布模式下，我有 ${BUILT_PRODUCTS_DIR}/Headers
*   在分发模式下，我有 ${BUILT_PRODUCTS_DIR}/Headers

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:36:43.013

经过5个小时的搜索，我终于找到了解决这个问题的方法。我刚刚创建了新组并复制了所有标题（不要设置任何目标）。而已。希望这可以节省某人的 5 小时。

# asp.net - Building querystring in routing webforms .net 4.0

> ID：10758830
> 
> 赞同：0
> 
> 时间：2012-05-25T17:25:09.203
> 
> 标签：asp.net, .net, .net-4.0, routing, asp.net-4.0

I'm trying out .net 4.0 routing with **Webforms** for the first time and I'm running into a problem. The page I'm routing to is looking for a querystring based on the route url.

For Example:

```
routes.MapPageRoute(
"Rule2",                               // Route name
"news/{day}/{month}/{year}/{.*}.aspx", // Route URL
"~/mynews.aspx"                        // Web page to handle route
); 
```

I want the final route to send *mynews.aspx?story={day}{month}{year}*. But I can't figure it out. I found this to be some help [http://msdn.microsoft.com/en-us/library/cc668177.aspx](http://msdn.microsoft.com/en-us/library/cc668177.aspx) but request.querystring("story") gives me nothing.

Any words of wisdom?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:30:59.517

Normally you wouldn't have 'aspx' in the route URL because you'd want a user friendly one. So, the route URL would be "news/{day}/{month}/{year}/{.*}" and a valid URL 'news/25/5/2012', for example.

Then to access the data you use

```
string day = (string) RouteData.Values["day"]. 
```

# android - 计算当前日期和 sqlite 数据库 Android 上的日期之间的周数

> ID：10758834
> 
> 赞同：0
> 
> 时间：2012-05-25T17:25:16.177
> 
> 标签：android, date, datediff, week-number

我有一个关于计算当前日期和 SQLite 日期之间的周数的问题。

我正在尝试将 DBAdapter 类上的日期数据放入 SharedMemory ：

```
SharedPreferences user = getSharedPreferences(USER, 0);
SharedPreferences.Editor editor = user.edit();
editor.clear();
editor.putString("full_date", fullDate); 
```

现在，在我的活动中：

```
SharedPreferences sharedPreferences = getSharedPreferences(USER, 0);
fullDateM = sharedPreferences.getString("full_date","");

DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
Date today = null;
try {
    today = df.parse(fullDateM);
} catch (ParseException e1) {
    e1.printStackTrace();
}

Calendar now = Calendar.getInstance();
Calendar now2 = Calendar.getInstance();
now.getTime();
now2.setTime(today);

long milis1 = now2.getTimeInMillis();
long milis2 = now.getTimeInMillis();

long diff = milis2 - milis1;

long diffDays = diff / (24 * 60 * 60 * 1000); 
```

但是，我得到一个错误来获取`diffDays`. 而且我检查过它`fullDateM`不为空，有 value = "2012-04-27"。还有另一个问题：如何`diffDays`在该代码中设置周差？

# javascript - 仅将画布复合应用于两个操作

> ID：10758835
> 
> 赞同：4
> 
> 时间：2012-05-25T17:25:16.720
> 
> 标签：javascript, canvas, composite

我需要绘制一个不透明的比萨饼，使其看起来“空”，并使用画布以顺时针方式逐渐用全彩色图像填充比萨饼。

我从绘制“空”披萨开始，使用相同的图像，但`globalAlpha`低于 1。

然后我在它上面画了一个“完整的”披萨。

最后，我逐渐绘制了一个弧作为披萨的蒙版，并对其应用了复合操作，`"destination-atop"`. 这有效地掩盖了我想要的披萨，但也掩盖了第一个披萨，即“空”披萨的不利后果。我只想让它隐藏我正在画的第二个披萨。

所以基本上，我只需要在两个操作之间进行合成，而不是在*之前*绘制的所有内容和*之后*绘制的所有内容之间进行合成。这是我的代码：

```
var ratio = 0;
var image = new Image();
image.src = "http://www.pizza.la-recette.net/img/pizza-001.jpg";
image.onload = function() {
    var canvas = document.querySelector("canvas");
    var ctx = canvas.getContext("2d");

    setInterval(function() {
        ratio += 0.01;
        ratio = ratio % 1;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        //Draw "empty" pizza image
        ctx.globalAlpha = 0.6;
        ctx.drawImage(image, 0, 0);

        //Draw actual pizza image
        ctx.globalAlpha = 1;
        ctx.drawImage(image, 0, 0);

        //Draw mask
        ctx.globalCompositeOperation = "destination-atop";
        ctx.beginPath();
        ctx.moveTo(image.width / 2, image.height / 2);
        ctx.arc(image.width / 2, image.height / 2, image.width / 2, -Math.PI / 2, (-Math.PI / 2) + ((Math.PI * 2) * ratio), false);
        ctx.fill();
    }, 100);
};​ 
```

[jsFiddle](http://jsfiddle.net/JwqBb/1/)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:32:26.050

您可以在绘制实际的比萨图像之前创建一个剪辑区域，而不是绘制蒙版。代码几乎相同，您基本上将调用替换为`ctx.fill()`并将`ctx.clip()`第二个`drawImage`向下移动。您还需要`save`/`restore`上下文状态以每次重置剪辑区域。

```
var ratio = 0;
var image = new Image();
image.src = "http://www.pizza.la-recette.net/img/pizza-001.jpg";
image.onload = function() {
    var canvas = document.querySelector("canvas");
    var ctx = canvas.getContext("2d");

    setInterval(function() {
        ratio += 0.01;
        ratio = ratio % 1;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        //Draw "empty" pizza image
        ctx.globalAlpha = 0.6;
        ctx.drawImage(image, 0, 0);

        ctx.save();

        //Set the clipping region
        ctx.beginPath();
        ctx.moveTo(image.width / 2, image.height / 2);
        ctx.arc(image.width / 2, image.height / 2, image.width / 2, -Math.PI / 2, (-Math.PI / 2) + ((Math.PI * 2) * ratio), false);
        ctx.clip();

        //Draw actual pizza image
        ctx.globalAlpha = 1;
        ctx.drawImage(image, 0, 0);     

        ctx.restore();
    }, 100);
}; 
```

# google-maps - 默认使用什么 Google Maps API 版本？

> ID：10758840
> 
> 赞同：5
> 
> 时间：2012-05-25T17:25:33.930
> 
> 标签：google-maps, google-maps-api-3

如果您不指定版本号，则使用哪个版本的 Google Maps API？也许是最新的发布版本？[关于版本控制](https://developers.google.com/maps/documentation/javascript/basics#Versioning)的文档没有说。

该文档确实建议生产应用程序指定一个次要版本号。但它也说“所有 API 更改都将向后兼容”，所以如果我不使用任何实验性功能，我有什么理由指定版本号吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T17:59:45.257

英语不是我的第一语言，所以我可能读错了这部分（来自您链接的版本控制文档）

> 您可以通过使用 v 参数指定要在应用程序中加载的 API 版本...夜间（开发）版本，使用 v=3 指定或省略 v 参数。

再往下，有提到 3.9 每晚。

> **版本文档**
> 
> 3.9 版参考（每晚）

所以，听起来像省略了 v （我这样做）将加载每晚的版本 3.9。

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

关于您问题的第二部分：我可以想到一个很好的理由来指定一个版本：

**一致性、可预测性、可靠性**

在为最新版本的 Maps API 进行更新时，您可能希望保持相同的外观。例如，标签或地图控件可能会四处移动。

另一方面，跟踪最新版本也很好。如果您的应用程序落后太远，它可能会在不受支持时停止工作。

我确信有更好的理由。我不是专业的地图开发人员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-28T11:26:36.960

我一直在构建广泛的基于谷歌地图的应用程序，根据我的经验，最好为长期项目指定 API 版本。例如我最近遇到的一个问题：该系统是与[v3.6](https://developers.google.com/maps/documentation/javascript/reference)一起构建和测试的，但谷歌发布了一个[实验版本](https://developers.google.com/maps/documentation/javascript/3.exp/reference)

默认情况下加载，但另一方面不推荐用于商业或专业开发。

因此，为了避免突然出现的一些故障，我不得不指定 API 版本：

```
<script src="http://maps.google.com/maps/api/js?sensor=false&v=3.16" type="text/javascript"></script> 
```

然后在那之后一切都恢复了正常。您可以通过在浏览器控制台中输入来快速查询 API 版本`google.maps.version`。

我希望有人会发现它有用。

# matlab - 我可以将 nargout 指定为 MATLAB 函数调用的一部分吗？

> ID：10758842
> 
> 赞同：2
> 
> 时间：2012-05-25T17:25:48.970
> 
> 标签：matlab, indexing

问题：

我想索引一个函数调用的结果，该函数调用返回可变数量的输出参数，而不将结果存储在临时文件中。

```
getel = @(x,i) x(i); #% simple anonymous function to index into a vector
x = zeros(2,2,2);
row = getel(ind2sub(size(x), 8), 1) #% desired: 2 (row 2)
#% actual: 8 (linear index)-because ind2sub is returning 1 value only
[row col dep]=ind2sub(size(x),8) #% row=2, ind2sub returning 3 values 
```

示例用法：

```
x(1).val1 = [1 2 3];
x(1).val2 = [2 1 2];
x(2).val1 = [2 1 2];
x(2).val2 = [1 0 0];

#% The normal way I would do this, with a temporary variable
[~,ind] = min(x(1).val2); #% ind=2
v(1) = x(1).val1(ind);
[~,ind] = min(x(2).val2); #% ind=2
v(2) = x(2).val1(ind);

#% I'd like to be able to do this with arrayfun:
v = arrayfun(@(s) s.val1(min(s.val2), x);
                  -------^ returns value of minimum, not index 
```

上面的 arrayfun 不起作用 - 称为 min 的形式返回一个输出：最小值。为了使其正常工作，一种选择是以下假设的函数调用：

```
v = arrayfun(@(s) s.val1(getoutputnum(2, 2, @min, s.val2)), x);
   hypothetical function -----------^ ^  ^  ^-func  ^--func args
      which form (nargout) of func ---|  |- which arg to return 
```

我意识到对于上述情况，我可以使用

```
s.val1(find(s.val2==min(s.val2),1,'first')) 
```

或其他技巧，但这并非在所有情况下都是可能的。

在 的情况下`ind2sub`，我可能想知道特定维度（例如列）的索引 - 但函数的 1 输出形式仅返回线性索引值 - 需要调用 n 维形式，即使维度1的值是我关心的。

注意：我意识到编写一个函数文件会使这个变得微不足道：使用`~`和`[out] = func(in)`表单。但是，当编写脚本或仅在命令行上时，如果能够在匿名函数中完成所有这些工作，那就太好了。我也意识到毫无疑问还有其他方法可以解决这个问题。我只想知道是否可以在不使用`out=func(in)`语法的情况下指定要调用哪种形式的函数，也许还可以指定要返回的输出编号，从而可以更好地嵌套函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:58:58.093

你能做这样的事情吗？

在它自己的文件中：

```
function idx=mymin(x)
  [~,idx] = min(x); 
```

在您的代码中：

```
v = arrayfun(@(s) s.val1(mymin(s.val2), x); 
```

可能有语法错误；我写这篇文章的电脑上没有 MATLAB。这个想法是存在的：只需包装 MATLAB`min`并捕获第二个参数，它是`x`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:04:44.287

我可以让 ind2sub() 返回可变数量的参数，如下所示：

```
x = zeros(2,2,2);
c = cell(ndims(x),1);
[c{:}] = ind2sub(size(x), 8); 
```

c 元胞数组现在将具有 3D 索引 c = {2;2;2}。

```
[c{:}] = ind2sub(size(x), 2); 
```

将产生 c = {2;1;1}。

这是你要找的吗？

# android - TableRow中的EditText如何修复100％

> ID：10758843
> 
> 赞同：3
> 
> 时间：2012-05-25T17:25:49.827
> 
> 标签：android, android-layout

我有一个带有表格和按钮的线性布局，表格有EditText和TextView，我的问题是EditText，它太小了

```
 <LinearLayout
        android:orientation="vertical"
        android:layout_width="300dip"
        android:layout_height="350dip"
        android:background="@drawable/background_resto"
    >

        <LinearLayout               
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            >

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            >
            <TableRow
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity ="center"
            >
                <TextView
                    android:id="@+id/nameRegister"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:textColor="#000000"
                    android:text="Nombre"
                    android:layout_marginLeft="10dip" 
                    />
            </TableRow>

            <TableRow
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity ="center"   
            >

                <EditText
                    android:id="@+id/registerName"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:layout_marginLeft="10dip"
                    android:layout_marginRight="10dip" 
                    />
            </TableRow>

        </TableLayout>
             <Button
                android:id="@+id/butRegister"
                android:layout_height="35dip"
                android:layout_width="wrap_content"
                android:text="Enviar"
                />
        </LinearLayout>
        </LinearLayout> 
```

我想EditText修复第一个linearLayout的300dip，但我不明白，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T17:29:04.427

试试这个，添加到`TableLayout` `stretchColumns`参数

```
<TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:stretchColumns="1"
            > 
```

# c# - 覆盖gridview类asp.net

> ID：10758851
> 
> 赞同：1
> 
> 时间：2012-05-25T17:26:12.273
> 
> 标签：c#, asp.net, gridview

asp.net 菜鸟在这里。我正在尝试覆盖/扩展 Gridview 进行分页，如本主题中指定的那样： [Probleience with Efficient Gridview paging without datasource control](https://stackoverflow.com/questions/2518968/problem-with-efficient-gridview-paging-without-datasource-control)

代码隐藏：

```
namespace MyCode
{
    public partial class _Default : System.Web.UI.Page
    {
    ....
    }
}
namespace cly.Web.CustomControls
    {
         public class clyGridView : GridView
         {
          ...code
         }
    } 
```

我将如何在我的 .aspx 文件中声明这个新的 gridview？我尝试使用该类作为

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="MyCode._Default" %>
<%@ Import Namespace="cly.Web.CustomControls" %>    
...
<asp:clyGridView ID="MyResults" runat="server"> </asp:clyGridView> 
```

但这不起作用，我收到此错误

```
The type or namespace name 'clyGridView' does not exist in the namespace 'System.Web.UI.WebControls' (are you missing an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:40:04.233

您需要为您的自定义控件注册一个标签前缀。

添加

```
<%@ Register tagprefix="cly" namespace="cly.Web.CustomControls" %> 
```

到您的页面并将标签前缀与您的自定义控件一起使用

```
<cly:clyGridView ID="MyResults" runat="server"> </cly:clyGridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:06:46.700

如果您的目标只是提高分页效率，您应该只创建一个自定义数据源。

这是一个[教程](http://www.codeproject.com/Articles/16988/Creating-a-custom-DataSourceControl-with-full-desi)，教你如何做到这一点。

不需要创建自定义网格视图。

如果您正确实现数据源，gridview 将完美地绑定到它，您将获得所需的高效分页。

# php - PHP - 使用表单输入中的 id 创建一个 switch 语句

> ID：10758853
> 
> 赞同：3
> 
> 时间：2012-05-25T17:26:25.613
> 
> 标签：php, forms, switch-statement

我正在用 PHP 做一个简短的测验，根据 4 个是/否问题告诉你你的想法是什么生物。我已经做到了，根据您对每个问题的回答，您会被带到不同的问题，我主要使用 switch 语句来做到这一点。

我的问题是有什么方法可以让我使用条件作为表单提交按钮中的 id 的 switch 语句？

```
 echo "<form method ='post' action='Creatures.php'>
     <input type='submit' name='answer' id='1' value='Yes' />
     <input type='submit' name='answer' id='2' value='No' />
     </form>"; 
```

这是我用来显示按钮的表单，我已经做到了，以便每个按钮都有不同的 id，所以在测验结束时，根据最后按下的按钮的 id 是什么，我可以显示正确的回答。以下是我尝试做的，但没有奏效。

```
switch($_POST['id'])
{
 case 1: echo "It's a goldfish";
 case 2: echo "It's a eel";
} 
```

此外，这些字段是唯一在整个网页中使用 id 的字段，关于如何使其正常工作的任何建议，不一定使用 switch 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:32:39.973

```
switch($_POST['answer']) {

case 'Yes':
   // do soemthing
   break;
case 'No':
   // do something
   break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:34:53.047

这有很多错误。请研究以下内容：

```
echo '<form method ="post" action="Creatures.php">
<button name="answer" type="submit" value="Yes">Yes</button>
<button name="answer" type="submit" value="No">No</button>
</form>';

switch($_POST['answer'])
{
   case 'Yes':
        echo "It's a goldfish";
        break;
   case 'No':
        echo "It's a eel";
        break;
} 
```

还看到[这个](http://www.w3schools.com/tags/att_button_value.asp)和[这个](http://www.php.net/manual/en/reserved.variables.post.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:29:10.323

你需要

```
break; 
```

在每个语句之后并且您的表单输入错误（`answer`而不是`id`）。NAME 属性决定了 POST 数组中的键（ID 仅用于客户端 css 和 javascript）。

正如 tigrang 所指出的，值是发布的内容，而不是 ID，所以数组看起来像：

$_POST['answer']='是'

所以你的陈述是

```
switch($_POST['answer'])
{
 case 'Yes': echo "It's a goldfish";break;
 case 'No': echo "It's a eel";break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:32:12.767

这行不通。当浏览器以键值对的形式将数据从您的表单发送到服务器时。键是您的表单名称，值是输入的值。

因此，要获得输入名称答案的值，请使用`$_GET['answer'];`

这会给你“是”或“否”，因为这些是价值观。您还应该进行一些错误检查，因为人们可以向您的服务器发送任意数据，例如有人可以访问`yoursite.com/creatures.php?answer=somerandomstuffthatidontexpect`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T17:35:00.193

除非你用 jQuery/js 来做，否则你会很吃力。不同的浏览器会以不同的方式解释这一点（自己的经验），所以只需使用 jQuery 方式 :)

[http://www.vancelucas.com/blog/ie6-and-multiple-button-submit-elements/](http://www.vancelucas.com/blog/ie6-and-multiple-button-submit-elements/) - 这应该会有所帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T17:43:53.173

```
<form method ='post' name="formAnswer1" action=''>
    <input type='submit' name='answer' value='Yes' />
</form>

<form method ='post' name="formAnswer2" action=''>
    <input type='submit' name='answer' value='No' />
</form>

<?php
switch($_POST['answer'])
{
   case 'Yes': echo "Yes";
   break;

   case 'No': echo "No";
   break;
}
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-25T18:02:27.203

这个怎么样？

```
switch(key($_POST['answer']))
{
case 1: 
    echo "answer 1"; break;
case 2: 
    echo "answer 2"; break;
}
echo "<form method ='post' action='/tmp/test.php'>
<input type='submit' name='answer[1]' value='Yes' />
<input type='submit' name='answer[2]' value='No' />
</form>"; 
```

我认为它按你想要的方式工作。但是你的方法有点违反程序员 POV 的直觉；考虑使用单选按钮 + 提交按钮。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-16T22:57:47.603

我试图将 $_GET 与 switch 语句一起用于我自己的类修订。这对我有用。这个想法是根据表格上输入的成绩显示一些东西。

```
 <form action="processGrade.php" method "get">
 Enter your grade: <input type = "text" name ="grade">
 <input type = "submit">
 </form> 
```

//在我的 processGrade.php 表单上：

```
<?php
echo "You have entered: ".$mygrade = $_GET['grade'].". ";

switch($mygrade){

case 100:
    echo " Your grade is A";
    break;

case 70:
    echo " Your grade is B+";
    break;

default: echo "Ungraded";
}
?> 
```

# c# - 还有其他方法可以检查用户所在的 .net 角色吗？

> ID：10758857
> 
> 赞同：2
> 
> 时间：2012-05-25T17:26:55.053
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有很多检查来确定用户的角色，然后分配角色编号。有什么方法可以简化检查吗？

```
 if (User.IsInRole("Super"))
        {
            ViewBag.Role = 30;
        }
        else if (User.IsInRole("Admin"))
        {
            ViewBag.Role = 20;
        }
        ...
        ...
        else if (User.IsInRole("Guest"))
        {
            ViewBag.Role = 10;
        }
        else
        {
            ViewBag.Role = 5;
        } 
```

我需要做的是找到用户所在的最高角色，然后将该值分配给 ViewBag.Role 这是一个动态变量。上面的代码确实有效，但所有 if 和 else 语句对我来说都不是好的编码习惯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:41:11.553

您可以向您的 User 类添加一个属性：

```
 public virtual int RoleNumber
    {
        get
        {
            if (this.IsInRole("Super")) return 30;
            if (this.IsInRole("Admin")) return 20;
            if (this.IsInRole("Guest")) return 10;
            return 5;
        }
    } 
```

然后在视图中：

```
ViewBag.Role = User.RoleNumber 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:35:07.140

如果一个用户只有一个角色，你可以使用 GetRoles 方法，它返回一个角色数组，来检查它是否有任何值。
如果是这样 - 您可以将用户拥有的第一个也是唯一一个角色解析为枚举，其中包含您要提供视图包的值。如果数组没有值 - 您可以提供默认最小值。

如果有多个角色，则可以以更“复杂的方式”解决，但最终开发、理解和执行可能比简单的 if..else 代码花费更多

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T17:54:20.737

我会使用枚举而不是字符串。这允许您在编译时检查名称。

以下代码使您可以灵活地更改（广告或删除）角色，而无需更改下划线角色检查逻辑。

```
 public int IsInRole()
    {
        int defaultValue = (int)UserRole.Default;
        var names = Enum.GetNames(typeof (UserRole));

        foreach (var name in names)
        {
            if(User.IsInRole(name))
            {
                defaultValue = (int)((UserRole)Enum.Parse(typeof(UserRole), name));
                break;
            }
        }

        return defaultValue;
    }

public enum UserRole
{
    Super = 30,
    Admin = 20,
    Guest = 10,
    Default = 5
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T17:36:35.597

你可以尝试这样的事情：

```
Dictionary<string, int> weight = new Dictionary<string, int>();
weight.Add("Super", 30);
weight.Add("Admin", 20);
weight.Add("Guest", 10);

string[] roles = Roles.GetRolesForUser(User.Identity.Name);
if (roles.Any())
{
  ViewBag.Role = weight.Where(w => roles.Contains(w.Key))
    .OrderBy(w => w.Value)
    .FirstOrDefault();
}
else
{
  ViewBag.Role = 5;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T19:00:56.333

假设你有你的角色类

```
public class Role
{
    public string Name { get; set; }
    public int Number { get; set; }
    ......
} 
```

您可以使用

```
var roles = GetYourRoles(); // IEnumerable<Role>    
var result = roles.First(r => User.IsInRole(r.Name)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T17:32:07.210

扩展 ASP.NET 的 Role 表怎么样？如果每个角色都有固定的权重，则创建一个表（称为`RoleWeight`或其他）并为该角色设置所需的权重。这样，您不必设置任何东西（并消除“看起来不像好的编码实践”的代码），而是已经存在价值。

# php - magento 站点复制到子目录致命错误

> ID：10758860
> 
> 赞同：0
> 
> 时间：2012-05-25T17:27:20.653
> 
> 标签：php, magento

我将我原来的magento站点复制到子目录并更改了一些配置（添加了新的b，路径）但我遇到了一个致命错误，我尝试了3个小时但没有运气，这是我的错误日志，任何人都可以帮我解决这个问题

原始网站工作 -

[http://www.gingerlily.fr](http://www.gingerlily.fr)

出错

[http://www.gingerlily.fr/test/](http://www.gingerlily.fr/test/)

[http://www.gingerlily.fr/test/admin](http://www.gingerlily.fr/test/admin)

```
 a:5:{i:0;s:92:"/var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/etc/modules/AdjustWare_Cartalert.xml";i:1;s:3081:"#0 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/local/Aitoc/Aitsys/Model/Aitfilesystem.php(290): Aitoc_Aitsys_Model_Aitfilesystem->_exception('/var/www/vhosts...')
    #1 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/local/Aitoc/Aitsys/Model/Module/License/Light/Performer/Reader.php(36) : eval()'d code(18) : eval()'d code(1300) : eval()'d code(1301): Aitoc_Aitsys_Model_Aitfilesystem->checkWriteable('/var/www/vhosts...', true)
    #2 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/local/Aitoc/Aitsys/Model/Module/License/Light/Performer/Reader.php(36) : eval()'d code(18) : eval()'d code(1300) : eval()'d code(1255): umgarcndqdwoztaoszakijpdewaqitesztefxqwp_Aitoc_Aitsys_Source_Abstract_Performer_Abstract->checkModuleConfigs()
    #3 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/local/Aitoc/Aitsys/Model/Module/License/Light/Performer/Reader.php(36) : eval()'d code(18) : eval()'d code(2046): umgarcndqdwoztaoszakijpdewaqitesztefxqwp_Aitoc_Aitsys_Source_Abstract_Performer_Abstract->checkStatus()
    #4 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/local/Aitoc/Aitsys/Model/Module/License.php(152): jyihtmxrtyyonagzwwzzfrkrexjifybrqdfdlcsx_Aitoc_Aitsys_Source_Light_Performer_Abstract->checkStatus()
    #5 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/local/Aitoc/Aitsys/Model/Module/License/Light.php(168): Aitoc_Aitsys_Model_Module_License->_checkStatus()
    #6 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/local/Aitoc/Aitsys/Model/Platform.php(416): Aitoc_Aitsys_Model_Module_License_Light->checkStatus()
    #7 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/local/Aitoc/Aitsys/Model/Observer.php(28): Aitoc_Aitsys_Model_Platform->reload()
    #8 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/core/Mage/Core/Model/App.php(1272): Aitoc_Aitsys_Model_Observer->debugerInit(Object(Varien_Event_Observer))
    #9 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/core/Mage/Core/Model/App.php(1253): Mage_Core_Model_App->_callObserverMethod(Object(Aitoc_Aitsys_Model_Observer), 'debugerInit', Object(Varien_Event_Observer))
    #10 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/Mage.php(416): Mage_Core_Model_App->dispatchEvent('controller_fron...', Array)
    #11 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/core/Mage/Core/Controller/Varien/Front.php(147): Mage::dispatchEvent('controller_fron...', Array)
    #12 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/core/Mage/Core/Model/App.php(712): Mage_Core_Controller_Varien_Front->init()
    #13 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/core/Mage/Core/Model/App.php(1055): Mage_Core_Model_App->_initFrontController()
    #14 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/code/core/Mage/Core/Model/App.php(340): Mage_Core_Model_App->getFrontController()
    #15 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/app/Mage.php(627): Mage_Core_Model_App->run(Array)
    #16 /var/www/vhosts/sd-14721.dedibox.fr/gingerlily/test/index.php(80): Mage::run('', 'store')
    #17 {main}";s:3:"url";s:11:"/test/admin";s:11:"script_name";s:15:"/test/index.php";s:4:"skin";s:7:"default";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:48:41.127

Aitoc_Aitsys 表示目录不可写。检查[http://www.magentocommerce.com/wiki/groups/227/resetting_file_permissions](http://www.magentocommerce.com/wiki/groups/227/resetting_file_permissions)以查看如何重置文件权限，并检查您的 Aitoc 插件是否需要另一个具有可写权限的目录。[http://www.aitoc.com/en/aitdownloadablefiles/download/aitfile/aitfile_id/503/](http://www.aitoc.com/en/aitdownloadablefiles/download/aitfile/aitfile_id/503/)告诉您哪些目录需要可写。

# spring - 如何显示服务器启动时加载的属性

> ID：10758862
> 
> 赞同：0
> 
> 时间：2012-05-25T17:27:42.553
> 
> 标签：spring

有人知道如何显示服务器启动时加载的**属性**（通过一些监听器或类似的东西）？

这就是我所拥有的：

1- 一个名为**project.properties**的文件，其中包含配置参数。

2- ...由 Spring 加载：

```
<context:property-placeholder location="WEB-INF/project.properties" /> 
```

3- 我认为一个监听器可能是读取声明的属性并记录它们的合适位置。

```
public class StartListener implements ServletContextListener {

    Logger logger = LoggerFactory.getLogger(this.getClass().getName()); 

    public void contextInitialized(ServletContextEvent sce) {
        //Here read the properties and do the logging of it
    }
//...   
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:53:49.070

根据我的说法，您需要做的是在服务器启动时您想要记录一些属性。

要实现这一点，首先需要在 dispatcher-servlet.xml 文件中添加以下行。

```
<context:annotation-config /> 
```

然后在您想要加载属性并记录它们的任何方法之上使用**@PostConstruct注释。**您可以在应用程序的任何控制器或服务类中执行此操作。

当您执行此操作时，spring 将自动检测此注释，并且每当它完成加载应用程序时，它将调用此函数并执行您在此处描述的任何操作。

希望这对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:58:37.950

谢谢，但最后，我将在听众中做到这一点：

```
public class StartListener implements ServletContextListener {

    Logger logger = LoggerFactory.getLogger(this.getClass().getName()); 

    public void contextInitialized(ServletContextEvent sce) {
        ServletContext sc = sce.getServletContext();

        Properties props = new Properties();
        try {
            props.load(sc.getResourceAsStream("/WEB-INF/project.properties"));
            logger.info(props.entrySet().toString());
        } catch (Exception e) {
            logger.error("......");
        }
    }

    //...

} 
```

# .htaccess - 通过 301 重定向更改查询字符串中的单词

> ID：10758865
> 
> 赞同：0
> 
> 时间：2012-05-25T17:27:54.517
> 
> 标签：.htaccess, mod-rewrite, redirect

我想将以下网址中的“流行”一词更改为“最受欢迎”

```
http://www.site.com/projects?page=12&sort=popular 
```

我认为这会起作用：

```
RewriteRule ^projects?page=([0-9]+)&sort=popular$ http://www.site.com/projects?page=$1&sort=most-popular [L,R=301] 
```

但它似乎没有重定向。有人能发现我做错了什么吗？我应该逃避什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:40:50.880

您无法访问 RewriteRule 中的查询字符串。您需要在 RewriteCond 中捕获它：

```
RewriteCond %{QUERY_STRING} ^page=([0-9]+)&sort=popular$
RewriteRule ^projects$ http://www.site.com/projects?page=%1&sort=most-popular [L,R=301] 
```

# javascript - 如何从 API 响应中提取部分 JSON？

> ID：10758869
> 
> 赞同：0
> 
> 时间：2012-05-25T17:28:13.303
> 
> 标签：javascript, jquery, api

[浏览器打开时加载](https://stackoverflow.com/questions/10220190/load-when-the-browser-is-open)

那是我之前与该主题相关的问题。

我的问题是我使用的服务器 api 已经在列表中添加了一个新项目，正如我在上一个问题中所说，我对 API 或 jQuery 不太熟练，因此我想知道你能推荐我阅读这个和也是实用的解决方案。我需要使它的 js 使用的字段只有 {"name":"Arthas","slug":"arthas","build":"12340","status":1} 而不是其余的。

提前谢谢了。

这是 api -> [http://api.neverendless-wow.com/server-status](http://api.neverendless-wow.com/server-status)

```
{"servers":[{"name":"Arthas","slug":"arthas","build":"12340","status":1},{"name":"Deathwing","slug":"deathwing","build":"13623","status":1}],"alerts":[]} 
```

这是我目前的 js

```
function checkStatus()
{
    jQuery.getJSON("http://api.neverendless-wow.com/server-status",function(data){ 
    if (data.status == '1')     {jQuery('#ServStat').addClass('online').removeClass('offline').attr('label','Online');}
    else     {jQuery('#ServStat').addClass('offline').removeClass('online').attr('label','Offline');}});
}
checkStatus();
{
    setInterval(changeState, 300000)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:37:33.390

我可能会选择这样的东西：

```
// check server status
function checkStatus()
{
    $.getJSON(server_url, function(data) { 

      // reset
      var mode = "Offline";
      $('.status').removeClass('online').addClass('offline');

      // is available?
      if (data !== null && data.servers !== null && data.servers[0].status === 1) {
        mode = "Online";        
        $('.status').removeClass('offline').addClass('online');
      }

      // Extract data from received JSON string is exists
      extractData(data);

      // set needed attributes
      $('.status')
        .attr('label', mode)
        .text('Servers are ' + mode);
    });
} 
```

[JsBin 上提供](http://jsbin.com/uqevac/2/edit)现场演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:44:38.603

您需要将数据用作数组 (data[0])，因此您的代码如下：

```
function checkStatus()
{
    jQuery.getJSON("http://api.neverendless-wow.com/server-status",function(data){ 
        if (data.servers[0].status == '1') { 
            jQuery('#ServStat').addClass('online').removeClass('offline').attr('label','Online');
        }
        else {
            jQuery('#ServStat').addClass('offline').removeClass('online').attr('label','Offline');
        }
    });
}

checkStatus();
{
    setInterval(changeState, 300000)
} 
```

# perl - Perl 中的哈希解引用

> ID：10758879
> 
> 赞同：2
> 
> 时间：2012-05-25T17:29:01.033
> 
> 标签：perl, hash, dereference

我有一个 HASH 参考`$job`，其中包含以下数据：

```
{
    "opstat"  : "ok",
    "response": {
                "group_id":23015,
                "order_id":"139370",
                "job_count":"10",
                "credits_used":"100.45",
                "currency":"USD"
                }
} 
```

我想打印“响应”键的哈希值。我试过这样做但没有奏效

`print %{$job->{'response'}}`

编辑

我不想要任何格式。我想知道如何访问“响应”键值中的每个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:05:19.167

> 我想知道如何访问“响应”键值中的每个元素。

根据定义，您需要某种循环。foreach 循环是典型的，尽管您也可以使用`map`.

```
for my $key (keys %{$job->{response}}) {
   my  $val = $job->{response}{$key};
   print("$key: $val\n");  # Or whatever
} 
```

或者

```
my $response = $job->{response};
for my $key (keys %$response) {
   my  $val = $response->{$key};
   print("$key: $val\n");  # Or whatever
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T18:14:55.700

试试下面的代码，这是一个真实而完整的脚本：

```
#!/usr/bin/env perl

use strict;
use warnings;

my $job = {
    'opstat' => 'ok',
    'response' => {
        'currency' => 'USD',
        'group_id' => ':23015',
        'job_count' => '10',
        'order_id' => '139370',
        'credits_used' => '100.45'
    }
};

foreach my $key (keys %{$job}) {
    print "key=$key|value=$job->{$key}\n";

    # Testing if "$job->{$key}" is a HASH ref
    # ...if yes, we iterate inside the HASH
    #  through the next level.
    if (ref($job->{$key}) eq "HASH") {
        foreach my $key2 (keys %{$job->{$key}}) {
            print "\tkey=$key2|value=$job->{$key}->{$key2}\n"; 
        }
    }
} 
```

这是输出：

```
key=opstat|value=ok
key=response|value=HASH(0x1638998)
        key=currency|value=USD
        key=group_id|value=:23015
        key=order_id|value=139370
        key=job_count|value=10
        key=credits_used|value=100.45 
```

如果您想访问“group_id”键：

```
print $job->{response}->{group_id}; 
```

如果您只想访问“响应”哈希而不测试任何内容：

```
foreach my $key (keys %{$job->{response}}) {
    print "key=$key|value=$job->{response}->{$key}\n";
} 
```

或使用此`while`循环和`each`：

```
while (my ($key,$value) = each %{$job->{response}}){
    print "key=$key|value=$value\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T17:32:51.837

```
use Data::Dumper;

print Dumper( $job->{response} ); 
```

或单独...

```
print $job->{response}{group_id}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:42:43.563

我不太确定您要实现什么目标；您的代码将打印内部哈希的内容而无需任何格式。如果要格式化输出，则必须使用[Data::Dumper](http://perldoc.perl.org/Data/Dumper.html)模块：

```
use Data::Dumper;
my $job = {
  "opstat" => "ok",
  "response" => {
    "group_id":23015,
    "order_id":"139370",
    "job_count":"10",
    "credits_used":"100.45",
    "currency":"USD"
  }
};
print Dumper($job->{'response'}); 
```

# c# - C# 中的线程问题

> ID：10758889
> 
> 赞同：0
> 
> 时间：2012-05-25T17:29:24.210
> 
> 标签：c#, multithreading, client

我已经用 C# 编写了服务器/客户端程序的代码。不使用`Thread`，它工作正常。如果我使用`Thread`，我会收到以下`error`消息。

```
The thread '' (0x9a8) has exited with code 0 (0x0).
```

### 示例代码

```
 public class MyServer{
    public MyServer (){
    ...
    ...
    System.Threading.Thread socThread = new System.Threading.Thread(new System.Threading.ThreadStart(receiveSockets));
    socThread.Start();
}

        private void receiveSockets()
        {
            try
            {
                while(true){
                IPAddress ipadd = IPAddress.Parse(systemIPAddress);
                TcpListener tcp = new TcpListener(ipadd, 8001);
                tcp.Start();
                Console.WriteLine("Waiting for client in 8001 port no");
                Socket socket = tcp.AcceptSocket();
                Console.WriteLine("Client address : " + socket.RemoteEndPoint);
                System.Threading.Thread socThread = new System.Threading.Thread(new System.Threading.ParameterizedThreadStart(receiveData));
                socThread.Start(socket);
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("Error in receive Sockets : " + e.Message);
            }
        }

        private void receiveData(object obj)
        {
            try
            {
                while(true){
                Socket socket = (Socket)obj;
                byte[] data = new byte[1000];
                int status = socket.Receive(data);
                Console.WriteLine("Received 1.");
                string content = Encoding.UTF8.GetString(data, 0, 1000);
                Console.WriteLine("Received data 1 : " + content);
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("Error in receive Data : " + e.Message);
            }
        }
        static void Main(string[] args){
            MyServer server = new MyServer();
        } 
```

### 客户计划

```
静态无效主要（字符串 [] 参数）
{
            TcpClient tcp = new TcpClient();
            tcp.Connect("192.168.1.11", 8001);
            流流 = tcp.GetStream();
            String msg = "正在测试...";
            字节[] 内容 = 新字节[msg.Length * sizeof(char)];
            System.Buffer.BlockCopy(msg.ToCharArray(), 0, content, 0, content.Length);
            stream.Write(内容, 0, content.Length);
}

```

我得到以下输出。

```
 IP Addrress : 192.168.1.11
Waiting for client in 8001 port no
Client address : 192.168.1.11:50140
The thread '' (0x9a8) has exited with code 0 (0x0).
A first chance exception of type 'System.Net.Sockets.SocketException' occurred in System.dll
The thread '' (0x1760) has exited with code 0 (0x0).
Error in receive Data : An existing connection was forcibly closed by the remote host
The program '[1396] Window_Server.vshost.exe: Managed (v4.0.30319)' has exited with code 0 (0x0). 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:43:25.500

“线程 '' (0x9a8) 已退出，代码为 0 (0x0)。” 不是错误。它只是告诉您后台线程已退出。零表示线程成功运行并退出。

异常出现在 receiveData(object obj) 中，因为您应该能够知道，给出异常“接收数据错误：现有连接被远程主机强行关闭”。

如果您发布您正在使用的客户端程序，我可能会提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T17:45:43.280

您需要弄清楚为什么要抛出套接字异常。如果您阅读[Socket.Receive](http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx)的文档，您会看到以下部分：

> **笔记**
> 
> 如果您收到 SocketException，请使用[SocketException.ErrorCode](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketexception.errorcode.aspx)属性来获取特定的错误代码。获取此代码后，请参阅 MSDN 库中的 Windows Sockets version 2 API 错误代码文档，了解错误的详细说明。

跟随该[链接](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketexception.errorcode.aspx)向您展示如何阅读错误代码：

> ErrorCode 属性包含与导致异常的错误相关联的错误代码。
> 
> SocketException 的默认构造函数将 ErrorCode 属性设置为最后发生的操作系统错误。有关套接字错误代码的详细信息，请参阅 MSDN 中的 Windows 套接字版本 2 API 错误代码文档。

哪个应该带您进入[错误代码页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)。

现在，根据您未提供的错误代码，您可以诊断网络问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T17:58:39.063

问题是 Main() 不会等待套接字完成其工作。一旦它创建了线程，它就存在了......并且线程被销毁了。

只要程序仅在整个工作完成时才存在，您就需要通过使用某种事件或睡眠，从 Main() 或 MyServer() 等待套接字处理线程。

# c# - WPF DataGrid 水平填充或滚动

> ID：10758891
> 
> 赞同：1
> 
> 时间：2012-05-25T17:29:27.033
> 
> 标签：c#, wpf, xaml, datagrid

我正在处理 WPF 中包含 DataGrid 的应用程序。我允许用户选择他们想要查看或隐藏的列，并且我还允许用户调整列的大小。当用户隐藏太多列，或者将列的大小调整到比 DataGrid 的宽度更窄的程度时，我希望这些列的操作就像其中一个具有`*`宽度一样。当用户扩展列宽于 DataGrid 的宽度时，我希望允许水平滚动。我可能遗漏了一些简单的东西，因为我已经好几个月没有使用 WPF 了，但是我尝试的一切似乎都会导致不需要的行为。

```
<DataGrid Margin="12,29,12,41" Name="sanitized" ItemsSource="{Binding sanitized}" AutoGenerateColumns="False" MouseDoubleClick="sanitized_MouseDoubleClick" >
    <DataGrid.Columns>
        <DataGridCheckBoxColumn Header="" Binding="{Binding Path=sanitized}" IsReadOnly="False" CellStyle="{StaticResource GenericCellStyle}"/>
        <DataGridTextColumn Header="sanitized" Binding="{Binding Path=sanitized}" IsReadOnly="True" CellStyle="{StaticResource GenericCellStyle}" />
        <DataGridTextColumn Header="sanitized" Binding="{Binding Path=sanitized}" IsReadOnly="True" CellStyle="{StaticResource GenericCellStyle}" />
        <DataGridTextColumn Header="sanitized" Binding="{Binding Path=sanitized}" IsReadOnly="True" CellStyle="{StaticResource GenericCellStyle}" />
        <DataGridTextColumn Header="sanitized" Binding="{Binding Path=sanitized}" IsReadOnly="True" CellStyle="{StaticResource GenericCellStyle}" />
        <DataGridTextColumn Header="sanitized" Binding="{Binding Path=sanitized}" IsReadOnly="True" CellStyle="{StaticResource GenericCellStyle}" />
    </DataGrid.Columns>
</DataGrid> 
```

我的 GenericCellStyle 只是为了使 DataGridCheckBoxColumn 在第一次单击一行时被检查，并在 Cell 和 FullRow 之间切换 SelectionUnit：

```
<Style TargetType="{x:Type DataGridCell}" x:Key="GenericCellStyle">
    <EventSetter Event="PreviewMouseLeftButtonDown" Handler="sanitized_Click" />
</Style> 
```

后面的代码：

```
private void sanitized_Click(object sender, MouseButtonEventArgs e)
{
    var cell = sender as DataGridCell;
    if (cell != null && cell.Column is DataGridCheckBoxColumn)
    {
        sanitized.SelectionUnit = DataGridSelectionUnit.Cell;
        if (!cell.IsEditing)
        {
            if (!cell.IsFocused)
            {
                cell.Focus();
            }
            DependencyObject dep = cell;
            while (dep != null && !(dep is DataGridRow))
            {
                dep = VisualTreeHelper.GetParent(dep);
            }
            if (dep != null)
            {
                int itemIndex = sanitized.ItemContainerGenerator.IndexFromContainer(dep);
                var selected = (sanitized)sanitizes.Items[itemIndex];
                selected.sanitized= !selected.sanitized;
                // TODO: Move the call to NotifyChange into the sanitized propery.
                selected.NotifyChange("sanitized");
            }
        }
    }
    else
    {
        sanitized.SelectionUnit = DataGridSelectionUnit.FullRow;
    }
} 
```

这使得您可以单独选择 CheckBoxColumn，或者在单击其他任何位置时选择整行。

我在包含 DataGrid 的网格上没有 RowDefinitions 或 ColumnDefinitions。我尝试添加宽度为 Auto 和 * 的 ColumnDefinition，但行为没有变化。

如果我将其中一列的宽度设置为`*`，我似乎无法启用滚动。列的组合宽度固定为 DataGrid 的宽度。

当我没有将其中一列的宽度设置为 时`*`，如果用户选择隐藏所有可选列，我会在数据右侧看到讨厌的空单元格。

我需要一些选项来允许我使用 DataGrid 宽度的最小总列宽度，但如果我愿意并启用水平滚动，我仍然可以将列拉伸得比这更宽。

[* 随意嘲笑我的代码和标记，建设性的批评总是受欢迎的！]

# python - Python pydoc.render_doc() 可以带哪些参数？

> ID：10758893
> 
> 赞同：0
> 
> 时间：2012-05-25T17:29:45.573
> 
> 标签：python, pydoc

我正在使用 pydoc.render_doc() 来打印模块的帮助，但是它会输出一个标记为“DATA”的字段，我不想打印它。有什么办法可以省略吗？

这是它打印的示例：

```
DATA
absolute_import = _Feature((2, 5, 0, 'alpha', 1), (2, 7, 0, 'alpha', 0... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:23:03.950

根据我对 PyDoc 模块源代码的阅读，无法禁用大节标题的打印。

您最好的选择是在将数据发送出去之前从输出中去除数据。

```
data = "D\x08DA\x08AT\x08TA\x08A\n" #  DATA bigsection header from pydoc
pydoc.render_doc(module).replace(data, '') 
```

bigsection 标头中有退格（\x08）。这在[这里解释。](https://stackoverflow.com/questions/6827011/decoding-a-string-in-python-with-x08-x08-d-x08de-x08el-x08li-x08it-x08te)

# php - 使用 PHP foreach 解析 JSON 数组

> ID：10758897
> 
> 赞同：23
> 
> 时间：2012-05-25T17:30:26.190
> 
> 标签：php, foreach, json

想知道为什么我的 PHP 代码不会在 JSON 数据中显示“值”的所有“值”：

```
$user = json_decode(file_get_contents($analytics));
foreach($user->data as $mydata)
{
     echo $mydata->name . "\n";

}        
foreach($user->data->values as $values)
{
     echo $values->value . "\n";
} 
```

第一个 foreach 工作正常，但第二个会引发错误。

```
{
   "data": [
      {
         "id": "MY_ID/insights/page_views_login_unique/day",
         "name": "page_views_login_unique",
         "period": "day",
         "values": [
            {
               "value": 1,
               "end_time": "2012-05-01T07:00:00+0000"
            },
            {
               "value": 6,
               "end_time": "2012-05-02T07:00:00+0000"
            },
            {
               "value": 5,
               "end_time": "2012-05-03T07:00:00+0000"
            }, ... 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-25T17:36:37.537

您可能想要执行以下操作：

```
foreach($user->data as $mydata)

    {
         echo $mydata->name . "\n";
         foreach($mydata->values as $values)
         {
              echo $values->value . "\n";
         }
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T17:34:30.447

您需要告诉它`data`要使用哪个索引，或者对所有索引进行双重循环。

例如，要获取外部数组中第 4 个索引中的值。：

```
foreach($user->data[3]->values as $values)
{
     echo $values->value . "\n";
} 
```

要遍历所有：

```
foreach($user->data as $mydata)
{
    foreach($mydata->values as $values) {
        echo $values->value . "\n";
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T17:37:53.047

`$user->data`是一个对象数组。数组中的每个元素都有一个`name`and`value`属性（以及其他属性）。

试着把第二个`foreach`放在第一个里面。

```
foreach($user->data as $mydata)
{
    echo $mydata->name . "\n";
    foreach($mydata->values as $values)
    {
        echo $values->value . "\n";
    }
} 
```

# ruby-on-rails - Rails 3 - 通过几个模型验证

> ID：10758899
> 
> 赞同：0
> 
> 时间：2012-05-25T17:30:27.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

我有 4 个模型：`SchoolClass`, `Timetable`, `Lesson`, `Reporting`:

```
#  class_code :string(255)
class SchoolClass < ActiveRecord::Base
  has_many :timetables
end

class Timetable < ActiveRecord::Base
  belongs_to :school_class
  has_many :lessons
end

class Lesson < ActiveRecord::Base
  belongs_to :timetable
  has_one :reporting
end

# report_type  :string(255)
class Reporting < ActiveRecord::Base
  belongs_to :lesson

  validates :report_type,
              :presence  => true,
              :inclusion => { :in => %w(homework checkpoint)}
end 
```

我如何验证每个“**检查点**”类型`SchoolClass`只能有 1 个？`Reporting`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:55:23.747

由于嵌套关联，这变得非常复杂。我将从使用自定义验证方法开始。

在 SchoolClass 模型中：

```
validate :only_one_reporting_checkpoint 
```

然后方法：

```
def only_one_reporting_checkpoint
  timetables = self.timetables
  reporting_checkpoint = nil
  timetables.each do |t|
    t.lessons.each do |l|
      reporting_checkpoint = true if l.reporting.report_type == "checkpoint"
    end
  end
  if reporting_checkpoint == true         
    errors.add(:reporting, "exception raised!")
  end
end 
```

在那里，我认为可以。如果我正确理解您的问题。**

# visual-studio-2010 - visual studio 2010 控件库参考

> ID：10758903
> 
> 赞同：0
> 
> 时间：2012-05-25T17:31:02.617
> 
> 标签：visual-studio-2010, dll

我使用 Visual Studio 2010 编写了一个控件库，我将其命名为 MyLibrary。MyLibrary 引用了我拥有的另一个控件库，我们将其称为 AnotherLibrary。我还有一个干净的虚拟机 (CVM)，并且我已将 AnotherLibrary 添加到 CVM 上的 GAC。使用 CVM，我创建了一个新的 WinForms 项目，将 MyLibrary.dll 添加到工具箱中，并将其中一个控件拖放到窗体上。Visual Studio 会将 MyLibrary.dll AND AnotherLibrary.dll 添加到引用中，即使 AnotherLibrary.dll 在 GAC 中（并且不需要）。我可以从引用中删除 AnotherLibrary.dll，一切都很好。

有没有办法阻止 Visual Studio 在这种情况下添加 AnotherLibrary.dll？

编辑：我已经考虑过了，我有一个例子。在设计器中将 TabControl 添加到父控件时，Visual Studio 不会将 System.Design 添加到引用中，即使 TabControl 依赖于它。那么，肯定有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:42:57.010

你仍然需要参考。就像您需要引用同样位于 GAC 中的 System.dll 一样。您只是不需要bin\Debug 目录中的程序集*副本*。您碰巧没有通过删除引用来破坏编译器是可能的，特别是因为这是一个间接使用的程序集。但是有些几率你最终会倒霉。

一般来说，您*确实*希望避免在您的开发机器上使用 GAC。因为您在创建错误修复时关心程序集的*特定版本。*您从源代码控制而不是 GAC 获得这些特定版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:39:38.433

它会自动包含所有依赖项是否有意义？它不能假设您可能希望在其上部署代码的每台机器上的 GAC 中都有 AnotherLibrary。当然，正如您提到的，您可以手动删除它....

# git - Git - 自动跟踪目录中的所有文件

> ID：10758904
> 
> 赞同：12
> 
> 时间：2012-05-25T17:31:03.577
> 
> 标签：git

> **可能重复：**
> [git add -A，一个命令中的 git commit？](https://stackoverflow.com/questions/4298960/git-add-a-git-commit-in-one-command)

如果我理解正确，当使用 git 将新文件添加到目录时，我必须调用多个命令以确保文件已提交：

```
git add <directory name>
git commit -m 'commit comment' 
```

这听起来不对，因为我知道我（和许多其他人）会忘记打电话`git add <directory name>`，然后最终得到一个缺少所有已创建新文件的项目。似乎我应该能够在一个命令中提交整个目录，包括任何和所有新文件，而无需在上一个命令中指定将所有新文件添加到提交中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T17:40:45.310

`git commit -a`将提交 git 已知的所有文件：

> ```
>  -a, --all
>        Tell the command to automatically stage files that have been modified and
>        deleted, but new files you have not told git about are not affected. 
> ```

如果您想确保您提交了您想要的所有内容，您可以在 ,`git-status`之前使用`git-commit`来查看暂存的提交文件。

`git`使用两阶段过程将更改`working directory`从`repository`. 像这样的包罗万象的方法`git commit -a` *会*起作用，但它会导致混乱的非原子提交。我会提倡更小、更集中的提交，而不是使用你正在寻找的包罗万象的方法。

> 这听起来不对，因为我知道我（和许多其他人）会忘记调用 git add...

`git-status`是你的朋友 ：）

注意：`git-add`不会**将**文件添加到*存储库*。从the`git commit`提交东西，**而不是**从. 起初这可能看起来很奇怪，但提供了更大的灵活性。有关更多信息，请参阅[另一个答案](https://stackoverflow.com/a/10659298/1084945)。 `staging area``repository`**`working area`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:39:33.097

在[https://github.com/orefalo/g2](https://github.com/orefalo/g2)获取**G2**

G2 将通过提供易于使用的宏来帮助您学习 git 命令行。

命令是`g freeze -m "commit msg"`。

它适用于添加、删除和更改。你正在冻结一个状态..这应该是从第一天开始的方式。**

# java - JFreeChart xAxis 以毫秒为单位

> ID：10758908
> 
> 赞同：0
> 
> 时间：2012-05-25T17:31:23.363
> 
> 标签：java, charts, jfreechart, epoch

在 JFreeChart 中，我的日期值以长时间（以毫秒为单位）的形式进入我的程序。因此，我`RegularTimePeriod`使用类将其转换为`FixedMillisecond`类。不幸的是，我显示的图表仍然使用毫秒作为 xAxis 值，而不是打印好的日期/天等。`FixedMillisecond`类上的 toString 方法返回非常好的格式化字符串，表示天、小时、秒等，但事实并非如此用于轴渲染。有没有办法覆盖这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:36:38.107

是的 - 假设您使用的是`DateAxis`，您可以设置`DateFormat`

```
DateAxis axis = (DateAxis) plot.getDomainAxis();
axis.setDateFormatOverride(new SimpleDateFormat("HH:mm:ss")); 
```

# c# - Nhibernate 标准未来转换为 linq

> ID：10758909
> 
> 赞同：-2
> 
> 时间：2012-05-25T17:31:24.390
> 
> 标签：c#, linq, nhibernate, nhibernate-criteria

我需要将以下查询翻译成 linq。

```
IEnumerable<User> data = myquery.Future<User>();
IFutureValue<long> count = totalcountQuery.FutureValue<long>(); 
```

谢谢

**更新：** **

```
myQuery = session.Query<User>()
               .Skip(pageIndex * pageSize)
               .Take(pageSize);

 totalCount = session.Query<User>().LongCount(); 
 dbUsers = myQuery.ToFuture();
 var count = myQuery.LongCount();
 totalRecords = (int)count.Value; **//Here is the error** 
```

**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:16:42.350

```
IEnumerable<User> data = myquery.ToFuture<User>();
IFutureValue<long> count = totalcountQuery.ToFutureValue<long>(); 
```

# telnet - 传出 Telnet 失败，但 ping 有效

> ID：10758910
> 
> 赞同：0
> 
> 时间：2012-05-25T17:31:32.523
> 
> 标签：telnet, opc

我们有一个运行在 Windows Server 2003 上的 OPC 服务器。我正在使用运行在 Windows Server 2008 上的远程计算机上的 OPC 客户端。

从 OPC Server 节点，我可以 ping 客户端节点。但是我无法远程登录（我只尝试了用于 DCOM 通信的端口 135）。

任何其他机器都可以远程登录客户端机器，即 Windows Server 2008。

我在 OPC Server 上看到，添加了端口 135。

还有一件事，tracert 没有完全显示从 OPC Server 到 OPC Client 的所有跃点。

我可以通过 135 端口从 OPC 客户端远程登录到 OPC 服务器。

当 telnet 数据包从 OPC Server 路由到 OPC Client 时，您是否认为端口 135 通信被阻塞？

请回复 。这让我疯狂。DCOM头疼！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:39:37.223

存在防火墙问题。您始终必须确保端口 135 在两侧都打开。在处理 DCOM 问题之前使用 telnet 验证端口。

# javascript - 带有变音符号的 Unicode 字符串，按字符分割

> ID：10758913
> 
> 赞同：14
> 
> 时间：2012-05-25T17:31:40.090
> 
> 标签：javascript, string, unicode, split, char

我有这个 Unicode 字符串： `Ааа́Ббб́Ввв́ГгҐґДд`

我想用字符分割它。现在，如果我尝试循环所有字符，我会得到如下信息：
`A a a ' Б ...`

有没有办法将此字符串正确拆分为字符： `А а а́`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T11:46:51.380

要正确执行此操作，您需要的是用于计算字素簇边界的算法，如[UAX 29](http://unicode.org/reports/tr29/#Default_Grapheme_Cluster_Table)中所定义。不幸的是，这需要从 Unicode 字符数据库中了解哪些字符是哪些类的成员，而 JavaScript 不提供该信息（*）。因此，您必须在脚本中包含 UCD 的副本，这会使其变得非常庞大。

如果您只需要担心拉丁语或西里尔语使用的基本重音，另一种选择是仅使用组合变音符号块 (U+0300-U+036F)。对于其他语言和符号，这将失败，但对于您想要做的事情可能就足够了。

```
function findGraphemesNotVeryWell(s) {
    var re= /.[\u0300-\u036F]*/g;
    var match, matches= [];
    while (match= re.exec(s))
        matches.push(match[0]);
    return matches;
}

findGraphemesNotVeryWell('Ааа́Ббб́Ввв́ГгҐґДд');
["А", "а", "а́", "Б", "б", "б́", "В", "в", "в́", "Г", "г", "Ґ", "ґ", "Д", "д"] 
```

（*：*可能*有一种方法可以通过让浏览器呈现字符串并测量其中选择的位置来提取信息......但它肯定会非常混乱且难以跨浏览器工作。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-04T07:17:38.227

对此有一点更新。

随着 ES6 的到来，出现了新的字符串方法和处理字符串的方法。对于其中存在的两个问题有解决方案。

# 1) 表情符号和代理对

表情符号和其他超出基本多语言平面 (BMP) 的 Unicode 字符（范围内的 Unicode“码点” `0x0000 - 0xFFFF`）可以计算出来，因为 ES6 中的字符串[遵循迭代器协议](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/@@iterator)，所以你可以这样做：

```
let textWithEmoji = '\ud83d\udc0e\ud83d\udc71\u2764'; //horse, happy face and heart
[...textWithEmoji].length //3
for (char of textWithEmoji) { console.log(char) } //will log 3 chars 
```

# 2) 变音符号

当您开始使用“字素簇”（一个字符和它的变音符号）时，这是一个更难解决的问题。在 ES6 中，有一种方法可以简化它的工作，但它仍然很难工作。该[`String.prototype.normalize`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)方法简化了工作，但正如[Mathias Bynens](https://mathiasbynens.be/notes/javascript-unicode#accounting-for-other-combining-marks)所说：

> (A) 应用了多个组合标记的代码点总是会产生单个视觉字形，但可能没有规范化的形式，在这种情况下规范化没有帮助。

可以在这里找到更多见解：

[https://ponyfoo.com/articles/es6-strings-and-unicode-in-depth](https://ponyfoo.com/articles/es6-strings-and-unicode-in-depth) [https://mathiasbynens.be/notes/javascript-unicode](https://mathiasbynens.be/notes/javascript-unicode)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-19T18:53:26.307

这个包可能会帮助你： [https ://www.npmjs.com/package/runes](https://www.npmjs.com/package/runes)

```
const runes = require('runes')

const example = 'Emoji '
example.split('') // ["E", "m", "o", "j", "i", " ", "�", "�"] 
runes(example)    // ["E", "m", "o", "j", "i", " ", ""] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-13T20:18:30.890

如果您正在编写一个需要使用来自 Node.js 的数据块的应用程序`stream`，那么您可能只需通过管道`utf8-stream`来防止这种情况发生：

[https://github.com/substack/utf8-stream](https://github.com/substack/utf8-stream)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-24T13:47:20.013

使用 Unicode 属性[Grapheme_Base](https://www.unicode.org/reports/tr44/#Grapheme_Base)

```
"Ааа́Ббб́Ввв́ГгҐґДд".match(/\p{Grapheme_Base}/gu)
> ['А', 'а', 'а', 'Б', 'б', 'б', 'В', 'в', 'в', 'Г', 'г', 'Ґ', 'ґ', 'Д', 'д'] 
```

和[Grapheme_Extend](https://www.unicode.org/reports/tr44/#Grapheme_Extend)

```
"Ааа́Ббб́Ввв́ГгҐґДд".match(/\p{Grapheme_Extend}/gu)
> ['́', '́', '́'] 
```

将这些组合成

```
"Ааа́Ббб́Ввв́ГгҐґДд".match(/\p{Grapheme_Base}\p{Grapheme_Extend}|\p{Grapheme_Base}/gu)
> ['А', 'а', 'а́', 'Б', 'б', 'б́', 'В', 'в', 'в́', 'Г', 'г', 'Ґ', 'ґ', 'Д', 'д'] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-25T17:36:27.327

您的字符串的问题是代理对（“a”“́）仅在浏览器显示时才组合为符号字符。对于您的情况，如果将 \u0301 附加到前一个字符就足够了，但这绝不是一般解决方案。

```
var a="Ааа́Ббб́Ввв́ГгҐґДд",
    i =0,
    chars=[];

while(a.charAt(i)) {
  if (a.charAt(i+1) == "\u0301") {
    chars.push(a.charAt(i++)+a.charAt(i++));
  } else {
    chars.push(a.charAt(i++));}} 
```

要澄清这个问题，请阅读[Mathias Bynens 的博文](http://mathiasbynens.be/notes/javascript-encoding)。

# haskell - 使用类似 cabal 的库安装程序的一部分

> ID：10758914
> 
> 赞同：0
> 
> 时间：2012-05-25T17:31:40.883
> 
> 标签：haskell, cabal

我有用 haskell 编写的简单程序，我用 cabal 构建它。例如我的程序有下一个目录结构：

```
my-prog
  * Main.hs
  * my-prog.cabal
  * SomeDirWithHsFiles
    - File1.hs
    - File2.hs 
```

我希望当我 `SomeDirWithHsFiles`使用 *.hs 文件进行 cabal 构建和 cabal 安装（可能是其他东西）时，像普通的 haskell 库一样安装，然后我将在其他程序中使用`File1.hs`和`File2.hs`模块。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:37:59.380

您需要在一个`library`部分中声明您的附加文件，如下所示：

```
library
    exposed-modules:     File1
                         File2

executable foo
    main-is:            Main.hs 
```

例如，参见[xmonad 的 .cabal 文件。](http://hackage.haskell.org/packages/archive/xmonad/0.10/xmonad.cabal)

# jquery - 默认二级排序

> ID：10758915
> 
> 赞同：3
> 
> 时间：2012-05-25T17:31:44.520
> 
> 标签：jquery, sorting, datatables, multiple-columns

我需要在帐户交易表上设置多列排序。我决定使用 jQuery DataTables。每当我单击列标题对该列（例如列 x）进行排序时，我希望它按列 3 对列 x 中的任何匹配项进行排序。如果我单击第 3 列，那么当第 3 列中有匹配项时，它应该按第 0 列排序。

我见过[fnSortListener](http://datatables.net/ref#fnSortListener)和[fnSort](http://datatables.net/ref#fnSort)，看起来我可以通过将它们附加到每一列来实现我的目标......但这似乎真的是多余的，因为除了第 3 列之外，每一列都需要在第 3 列上进行二次排序。

那么，有没有办法告诉 DataTables 总是对第 3 列进行二次排序，然后为第 3 列指定异常？

任何帮助表示赞赏。我对这个插件很陌生。谢谢！

**编辑**

这就是我最终要解决的问题。第一个二维数组表示如何在第一次点击时排序，第二个二维数组表示如何在第二次点击时排序。

```
var Sorter = function($dataTable) {
  return {
    bindMultiSort: function(headerSelector, firstOrderTuples, secondOrderTuples) {
      var order = 0;
      this.removeSorting(headerSelector).click(function() {
        if (order === 0) {
          $dataTable.fnSort(firstOrderTuples);
          order = 1;
        } else {
          $dataTable.fnSort(secondOrderTuples);
          order = 0;
        }   
      }); 
    },  

    removeSorting: function(headerSelector) {
      var $header = $(headerSelector);
      $header.unbind('click');

      return $header;
    }   
  };  
};

  function attachSecondarySorting($transactionsTable) {
      var sorter = new Sorter($transactionsTable);
      sorter.bindMultiSort('#posted', [[POSTED_DATE_COL, "asc"], [DESCRIPTION_COL, "asc"]], [[POSTED_DATE_COL, "desc"], [DESCRIPTION_COL, "asc"]]);
      sorter.bindMultiSort('#received', [[RECEIVED_DATE_COL, 'asc'], [DESCRIPTION_COL, 'asc']], [[RECEIVED_DATE_COL, 'desc'], [DESCRIPTION_COL, 'asc']]);
      sorter.bindMultiSort('#category', [[TRANSACTION_TYPE_COL, 'asc'], [POSTED_DATE_COL, 'desc'], [DESCRIPTION_COL, 'asc']], [[TRANSACTION_TYPE_COL, 'desc'],
      sorter.bindMultiSort('#description', [[DESCRIPTION_COL, 'asc'], [POSTED_DATE_COL, 'desc']], [[DESCRIPTION_COL, 'desc'], [POSTED_DATE_COL, 'desc']]);    
      sorter.bindMultiSort('#moneyIn', [[MONEY_IN_COL, 'asc'], [DESCRIPTION_COL, 'asc']], [[MONEY_IN_COL, 'desc'], [DESCRIPTION_COL, 'asc']]);
      sorter.bindMultiSort('#moneyOut', [[MONEY_OUT_COL, 'asc'], [DESCRIPTION_COL, 'asc']], [[MONEY_OUT_COL, 'desc'], [DESCRIPTION_COL, 'asc']]);      
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:39:24.297

[`aDataSort`](http://datatables.net/usage/columns#aDataSort)虽然我认为您可以通过组合 the和column 属性来完成您想要做的事情[`asSorting`](http://datatables.net/usage/columns#asSorting)，但它们确实有它们的冗余，并且可能无法提供您需要的完全控制。

最少冗余的解决方案将是类似于以下代码的解决方案：

```
var theDataTable = $('#tableId').dataTable();  // with whatever options needed, of course

// unbind the default click event that is in place for sorting
// and replace it with your own calls to fnSort
$('#tableId thead th').unbind('click').click(function(){
    var aaSorting = oTable.fnSettings().aaSorting;
    var currentSortColumnIndex = aaSorting[0][0];
    var currentSortDirection = aaSorting[0][1];
    var clickedSortColumnIndex = $(this).index();

    var newSortDirection = 'asc';
    if(currentSortColumnIndex == clickedSortColumnIndex) {
        newSortDirection = (currentSortDirection == 'asc') ? 'desc' : 'asc';
    }

    if(clickedSortColumnIndex == 3) {
        oTable.fnSort( [ [3, newSortDirection], [0, newSortDirection] ] );
    }
    else {
        oTable.fnSort( [ [clickedSortColumnIndex, newSortDirection], [3, newSortDirection] ] );
    }
}); 
```

如果我正确地解释了您的排序意图，那么这应该可以解决问题，但如果不是，我认为这将为您提供所需的解决方案。

*注意：另请参阅[datatables.net](http://datatables.net)上标题为[“多列排序”的论坛讨论](http://datatables.net/forums/discussion/4866/sorting-on-multiple-columns/p1)*

# .net - 使用 VB.NET 从受 .htaccess 保护的服务器下载文件？

> ID：10758919
> 
> 赞同：0
> 
> 时间：2012-05-25T17:31:56.527
> 
> 标签：.net, vb.net, download

在我的网站上，我有受密码保护的目录，其中包含一个包含一些信息的文件。

现在我在 vb2010 .net 中有应用程序，它将从 tha 文件下载该字符串。

但这给了我一个错误，我没有权限。

它仅受 .httaccess 文件的保护。

即使它位于受密码保护的目录中，如何下载该字符串。

我使用 system.net webclient 下载字符串。

# ruby-on-rails - 如何在 bootstrap-sass 中转换视图？

> ID：10758923
> 
> 赞同：0
> 
> 时间：2012-05-25T17:32:38.460
> 
> 标签：ruby-on-rails, twitter-bootstrap

我看过 Railscast 视频[Twitter Bootstrap Basics](http://railscasts.com/episodes/328-twitter-bootstrap-basics)。它描述了如何使用名为[twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)的 Twitter Bootstrap for Rails 的 LESS 版本。

由于 SASS 是 Rails 的一部分，并且我在安装 LESS 版本时遇到了一些问题，因此我尝试使用名为[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)的 SASS 版本。

在视频中，他描述了`rails g bootstrap:themed products -f`转换标准布局以利用 Twitter Bootstrap 功能的命令。我怎样才能在*bootstrap-sass* gem 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T22:41:34.257

这不是直接的答案，而是我对类似问题的解决方案。

[我喜欢下载完整的引导程序下载，通过http://css2sass.heroku.com/](http://css2sass.heroku.com/)获取 bootstrap.css 并把它作为 bootstrap.sass 放入 app/assets/stylesheets

这通常会在带有一些时髦嵌套的 sass 中生成一个或两个错误，但它不是必需的东西，我只是在 localhost 上加载页面后快速清理它

# ios - 以编程方式遵循 Google 指示？

> ID：10758925
> 
> 赞同：1
> 
> 时间：2012-05-25T17:32:42.960
> 
> 标签：ios, google-maps, gps, core-location, driving-directions

我正在构建一个 iPad 应用程序，它将逐屏显示来自 Google 的 Directions API 的方向。我想使用 CoreLocation 跟踪用户在物理空间中的进度并更新屏幕以跟随用户，类似于大多数方向应用程序。

我最初的想法是这样的：

1.  对于方向上的每一步，抓住相应的折线
2.  当 CoreLocation 更新时，检查纬度/经度对是否在折线上某个点的某个增量内（即，遍历折线上的所有点）。
3.  如果位置在折线内，则留在同一屏幕上
4.  如果不在折线上，则检查用户是否在下一步的折线某个子集的同一增量内（例如 10 个点），如果是，则前进到下一个屏幕。
5.  如果不在下一条折线上，请提醒用户他们已经离开了路线。

这似乎效率低下而且不是特别准确......有没有更好的方法来做到这一点？

# iphone - 将选择器添加到 UIButton

> ID：10758926
> 
> 赞同：4
> 
> 时间：2012-05-25T17:32:44.457
> 
> 标签：iphone, objective-c, ipad, uiview, uibutton

我有 `ViewController`两个不同`ViewControllers`的扩展那个 main `ViewController`，一个用于 iPhone，另一个用于 iPad。

iPad`ViewController`实例化一个单独的扩展`UIView`并将其设置为自己的视图。该视图有一些按钮，我想将其选择器方法添加为 main 中的一些方法`ViewController`。如何做到这一点？

所以这是一种可视化的方法：

```
Main ViewController
| iPhone ViewController
| iPad ViewController
  | Some UIView Class    --> Button must invoke method in Main View Controller 
```

**编辑：** 我根本不使用界面生成器。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T17:44:35.030

你的问题有点令人困惑，但如果我理解，你可以使用这样的代码来设置按钮：

```
[button addTarget:yourObject action:@selector(yourMethod:) forControlEvents:UIControlEventTouchUpInside]; 
```

因此，您将**addTarget**设置为 的实例`MainViewController`，并将**操作**设置为您要在其中调用的任何方法`MainViewController`。只要您的方法接受，您应该也可以在 Interface Builder 中执行此操作`IBAction`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:42:34.577

除非我误解了这个问题，否则没有任何技巧。

如果`(IBAction)buttonPressed:(id)sender`在主视图控制器中定义，它会被 iPad 视图控制器子类继承。因此，将其指定为`self`iPad 视图控制器设置其按钮时的选择器应该可以正常工作。

# android - Android 版本控制和 Git

> ID：10758931
> 
> 赞同：1
> 
> 时间：2012-05-25T17:32:56.510
> 
> 标签：android, eclipse, git, version-control, git-submodules

我有一个大型 Android 库项目，其中包含多个应用程序使用的可重用组件。该库受 git 控制。使用此 Android 库的多个应用程序需要指向 Android 库项目（Git 子模块）的不同提交。但是 Eclipse 不允许子模块成为当前项目的子目录，而是当前工作空间中的兄弟。我怎样才能使这项工作？

例如，如果我为其中一个应用程序更新 Android 库，我仍然希望另一个应用程序指向 Android 库的原始提交。

任何帮助将非常感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:55:13.697

对于我的项目，我将子模块作为子目录保留在原始项目中，然后将子模块作为单独的项目与父项目一起导入。

# gfortran - FORTRAN 编译器警告：过时的算术 IF 语句

> ID：10758935
> 
> 赞同：0
> 
> 时间：2012-05-25T17:33:31.313
> 
> 标签：gfortran

我有一个 gfortran 错误：

```
Warning: Obsolete: arithmetic IF statement at (1) 
```

这是什么意思？在源（旧源）中：

```
66 s12 = max(epsilon, s1 + s2)
c Then execution will go to label 13\. Will this stop any further problems?
if (s12 - 1.0) 13, 13, 12
13 z = s1 / s12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:39:28.243

在这里检查：

[http://www.ibiblio.org/pub/languages/fortran/ch1-5.html](http://www.ibiblio.org/pub/languages/fortran/ch1-5.html)

“算术 IF 被认为是有害的。”

你的声明，

`if (s12 - 1.0) 13, 13, 12`是算术 IF，被认为是糟糕的编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:41:10.263

算术 if 是 FORTRAN 的一个独特功能

它的工作原理如下。

```
 IF (expr) label1, label2, label3 
```

如果表达式的值为

```
less than 0, jump to label1 
equal to 0, jump to label2
greater than 0, jump to label3 
```

在较新的 FORTRAN 标准中，此功能已过时

在您的代码中，您可以将其替换为

```
 IF (s12 - 1.0 .gt. 0 ) GOTO 12
13    z = s1 / s12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:41:21.973

维基[百科](http://en.wikipedia.org/wiki/Arithmetic_IF)：

“..Fortran 语句定义了三个不同的分支，具体取决于表达式的结果是负数、零还是正数，按所述顺序……”

“..最终在 Fortran 90 中被标记为过时。”

# django - 选择起始页 django-cms

> ID：10758948
> 
> 赞同：7
> 
> 时间：2012-05-25T17:34:43.613
> 
> 标签：django, django-urls, django-cms

django-cms 总是使用最顶层的页面作为开始/登陆页面。我现在想要一个看起来像*foo-home-bar*和*home*的导航作为登录页面。

一种方法是在 / 添加一个重定向到 /home 的虚拟页面，但这对我来说似乎有点粗糙。有没有更好的解决方案？我不介意更改 cms 本身的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T23:57:25.647

最简单的方法是使用 django 的重定向通用视图，而不是创建重定向页面。

将其设置在您的顶级 urls.py

```
url(r'^$', RedirectView.as_view(url='/home/')), 
```

当然`from django.views.generic.base import RedirectView`，在开头添加导入，你应该已经准备好了。

（`'^$'`只在任何你想要的地方捕获根 url 和 RedirectView 重定向。我有点不确定自己是否使用它，但是当你访问他们的网站时，我看到很多主要网站都在做重定向......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:28:37.910

您创建的第一个页面似乎是主页，只需根据需要添加其他根页面并在其上启用导航。这就是我所做的。

我们的第一页是测试页面，然后是一些子页面。在管理页面中，您可以单击并拖动页面以更改子/父顺序。我们将 test 重命名为 home 并将子页面转移到另一个根页面。

您还可以通过在 menu/menu.html 中创建模板来覆盖默认菜单，在那里您可以通过添加一些 if 语句来覆盖顺序。您还可以在 base.html 中对其进行硬编码，其菜单如下： `<ul id=menu> <li><a href="/foo/>foo></a></li> <li><a href="/">Home</a></li> {% show_menu %} <ul>`

并且只在导航中有 bar 和您想要的其他页面，而不是 foo 或 home。

主页上有一个其他页面没有的图标，表示我猜的根页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T20:08:46.090

cms_page 表中tree_id 编号最小的页面是主页。这通常是您创建的第一个页面。如果您想将不同的页面设为您的主页，您可以手动更改数据库中的 tree_id 值（但不幸的是，不能使用管理员。）

# java - 如何同时执行“if”和“else”？

> ID：10758952
> 
> 赞同：4
> 
> 时间：2012-05-25T17:34:53.903
> 
> 标签：java

有趣的问题：

更改 if 语句并打印出“Hello World”

```
 public static void main(String[] args) {
        if(){
            System.out.println("Hello");
        }else{
            System.out.println("World");
        }
    } 
```

我的解决方案是在if语句中添加“！System.out.println("Hello")”，但是不起作用，有什么想法吗？

```
 public static void main(String[] args) {
        if(!System.out.println("Hello")){
            System.out.println("Hello");
        }else{
            System.out.println("World");
        }
    } 
```

更新：我认为这有效：

```
 public static void main(String args[]) {    
        if(System.out.append("Hello ")==null){
            System.out.print("Hello ");
        }else{
            System.out.println("World");
        } 
    } 
```

在 C 中：

```
main()
{   if(printf("Hello"),0)
         printf("Hello");
    else
       printf(" world!\n");
   getch();
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T17:39:44.747

太棒了：

```
public static void main(String args[]) {    
    if(!new Object() {
        public boolean foo() {
            System.out.print("Hello ");
            return true;
        }
    }.foo()){
        System.out.println("Hello");
    }else{
        System.out.println("World");
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T17:41:12.113

我可以提供

```
if (System.out.printf("%s","Hello ") == null) {
    System.out.println("Hello");
} else {
    System.out.println("World");
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T17:36:56.447

它不起作用，因为在 Java 中`if`需要一个 type 的表达式`boolean`。`System.out.println`没有返回类型，它是`void`. 这就是为什么它不起作用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-25T19:18:51.427

我的 2 美分：包括原始 C 解决方案在内的所有解决方案都没有实际执行“ `if`”和“ `else`”。*此处介绍的所有解决方案都作为条件*`printf("Hello")`中的布尔表达式的一部分执行和显式执行 。在所有解决方案中，该条件为假，然后执行分支。但实际并非*如此*。*`else``if`*

 *** * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T17:42:05.190

```
public class HelloWorld{
    public static void main(String[]args){
        if (new Object(){{ System.out.print("Hello "); }} == null){
            System.out.println("Hello");
        }else{
            System.out.println("World");
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T17:41:17.563

打开内容`args`并使用两个不同的参数运行程序两次。

您的程序将打印出“Hello”或“World”，除非您修改输入`println`以修复您的`if()`构造。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-22T09:05:37.547

考虑以下代码以在 C 中执行两个 if-else 块语句。

```
#include <stdio.h>
#include <stdbool.h>
int main()
{

  bool flag = false;
  if(flag)
  {
    printf("if block returns true-> now redirecting to else");
    goto el;
    i:
    printf(" redirected to if");
  }
  else
  {
    printf("if block returns false-> now redirecting to if");
    goto i;
    el:
    printf(" redirected to else");
  }
} 
```

只需更改上述代码中的标志值即可。例如，如果标志值更改为 true，则首先执行 if 块，然后执行 else。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-25T17:41:48.727

您可以使用`append`而不是`println`确定写入是否成功：

```
if (System.out.append("Hello World" + System.getProperty("line.separator")) != null)
{
    // some code here
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-24T11:10:38.307

这也可以在不指定格式的情况下使用“printf”来实现。代码如下：

```
if (System.out.printf("Hello") == null) {
    System.out.print("Hello");
} else {
    System.out.println("World");
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-18T06:39:52.717

检查这个...

```
class Test {

    static boolean x = true;

    public static void main(String[] args) {
        ifAndElse();

    }

    public static void ifAndElse(){
        if (x) {
            System.out.println("hi");
            x = false;
            ifAndElse();
        } else {
            System.out.println("hello");
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-09T09:11:04.157

```
** Try this one **
class Test
{
    public static void main(String args[])
    {
        boolean one=true;
        for(int i=0;i<2;i++)
        {
        if(one)
        {
            System.out.print("Hello");
            one=false;  
        }   
        else

            System.out.println("World!");

        }       
    }
}` 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-27T14:45:04.663

```
public class Test {  

       public static void main(String args[]) {  

            if (args==null || new Test() {{Test.main(null);}}.equals(null)) {  
                     System.out.print("Hello ");
            } else {  
                     System.out.print("World！");  
            }  
       }  
} 
```

这可以工作，但理解起来有点复杂**

# web-services - 带有注释的休眠返回对象

> ID：10758954
> 
> 赞同：0
> 
> 时间：2012-05-25T17:34:57.147
> 
> 标签：web-services, hibernate

我正在尝试创建一个网络服务。

我有一个带有 Hibernate 注释的 UserVO 类，其属性为登录名、密码和 ID。

我需要返回对象，但是使用这些注释我有这个错误：

```
Service invocation threw an exception with message : null; Refer to the server log for more details

Exceptions details : java.lang.reflect.InvocationTargetException 
```

但是，如果我接受注释，事情就会奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:01:20.237

当您将对象公开为 Web 服务时，协议无法为注释创建定义......

我强烈建议您创建一组可以转换为您的休眠模型并返回的数据传输对象......这将简化您的设计。

# java - 使用带有 android 8 hex digit 颜色资源的 Html.fromHtml

> ID：10758956
> 
> 赞同：0
> 
> 时间：2012-05-25T17:35:06.280
> 
> 标签：java, android, html, colors, textview

所以，假设我在我的 R.java 文件中定义了一些颜色，例如“public static int red=0x7f06000c;”

如何在 html 代码中应用颜色？

我试过

```
Html.fromHtml("<font color= '" + R.color.red + "'> some text  </font>) 
```

但返回的颜色是黑色...

谢谢回答我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:38:05.437

试试这个：

```
Html.fromHtml("<font color=" + getResources().getColor(R.color.red) + "> some text  </font>"); 
```

# ruby - Ruby fork 是否对 COW 友好，如果是，如何测试它

> ID：10758959
> 
> 赞同：3
> 
> 时间：2012-05-25T17:35:10.067
> 
> 标签：ruby, copy-on-write

我读过一些红宝石**叉子**对**牛**友好的地方，好的[链接](http://izumi.plan99.net/blog/index.php/2007/04/05/saving-memory-in-ruby-on-rails//)

但是当我碰巧在谷歌上搜索更多信息时，我发现 Ruby 不支持**COW**（写入时复制）

现在我实际上有点困惑 ruby​​ 是否真的支持**COW**功能

我也知道**REE**和**Rubinius**有一个**COW 友好的 GC**，所以我 REE 和 Rubinius 支持**COW**功能

我是的，我很想测试它，任何人都可以建议我，如果 ruby​​ 支持**COW**功能，那么如何**编写示例**代码来测试**Ruby 中的 COW 概念**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:56:45.630

`fork`写入时复制是操作系统内核的属性，而不是 Ruby。在大多数类 UNIX 系统上，它是。

例如，在 Linux 上，您可以查看`/proc/pid/smaps`有多少堆映射是共享的。这是一个`bash`做叉子的例子：

```
02020000-023cd000 rw-p 00000000 00:00 0                                  [heap]
Size:               3764 kB
Rss:                3716 kB
Pss:                1282 kB
Shared_Clean:          0 kB
Shared_Dirty:       3652 kB
Private_Clean:         0 kB
Private_Dirty:        64 kB
Referenced:          144 kB
Anonymous:          3716 kB
AnonHugePages:         0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB
Locked:                0 kB 
```

因此，在其 3764k 堆中，3652k 是共享的。有关. [_](http://www.mjmwired.net/kernel/Documentation/filesystems/proc.txt) _`/proc`

当然，Ruby 可能有一些东西会导致 COW 页面被复制（例如，它的垃圾收集器可能会写入每个页面），但是您可以通过共享计数变为 0 看到这一点。

# jquery - jquery 悬停类似于 youtube 按钮

> ID：10758960
> 
> 赞同：0
> 
> 时间：2012-05-25T17:35:11.383
> 
> 标签：jquery

```
 $(".post").hover(function(){
            $(".buttons input", this).show();

        }); 
```

一旦鼠标关闭.post，使相同元素再次隐藏的最简单方法是什么？我正在尝试制作类似于 youtube 帖子的内容（按钮在鼠标上显示/隐藏）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:37:36.213

显示标记

基于假设，

```
$(".post").hover(function(){
      $(".buttons input", this).fadeIn('slow');
},
function(){
 $(".buttons input", this).fadeOut('slow');
}); 
```

# r - 如何将表格转换为数据框

> ID：10758961
> 
> 赞同：194
> 
> 时间：2012-05-25T17:35:18.957
> 
> 标签：r, dataframe

我在 R 中有一个表，其中包含`str()`：

```
 table [1:3, 1:4] 0.166 0.319 0.457 0.261 0.248 ...
 - attr(*, "dimnames")=List of 2
  ..$ x: chr [1:3] "Metro >=1 million" "Metro <1 million" "Non-Metro Counties"
  ..$ y: chr [1:4] "q1" "q2" "q3" "q4" 
```

当我打印它时看起来像这样：

```
 y
x                           q1        q2        q3        q4
  Metro >=1 million  0.1663567 0.2612212 0.2670441 0.3053781
  Metro <1 million   0.3192857 0.2480012 0.2341030 0.1986102
  Non-Metro Counties 0.4570341 0.2044960 0.2121102 0.1263597 
```

我想摆脱`x`and`y`并将其转换为看起来与上面完全相同的数据框（三行四列），但没有`x`or `y`。如果我使用`as.data.frame(mytable)`，我会得到这个：

```
 x  y      Freq
1   Metro >=1 million q1 0.1663567
2    Metro <1 million q1 0.3192857
3  Non-Metro Counties q1 0.4570341
4   Metro >=1 million q2 0.2612212
5    Metro <1 million q2 0.2480012
6  Non-Metro Counties q2 0.2044960
7   Metro >=1 million q3 0.2670441
8    Metro <1 million q3 0.2341030
9  Non-Metro Counties q3 0.2121102
10  Metro >=1 million q4 0.3053781
11   Metro <1 million q4 0.1986102
12 Non-Metro Counties q4 0.1263597 
```

我可能从根本上不理解表格与数据框的关系。

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2012-05-25T17:40:01.557

我已经想通了：

```
as.data.frame.matrix(mytable) 
```

做我需要的——显然，表格需要以某种方式转换为矩阵，以便适当地转换为数据框。我[在 Computational Ecology blog 找到了有关列联表的 as.data.frame.matrix() 函数的](http://toddjobe.blogspot.com/2010/08/converting-r-contingency-tables-to-data.html)更多详细信息。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-10-24T17:16:45.510

虽然在这种情况下结果会有所不同，因为列名是数字，但我使用的另一种方式是`data.frame(rbind(mytable))`. 使用来自@XX 的示例：

```
> freq_t = table(cyl = mtcars$cyl, gear = mtcars$gear)

> freq_t
   gear
cyl  3  4  5
  4  1  8  2
  6  2  4  1
  8 12  0  2

> data.frame(rbind(freq_t))
  X3 X4 X5
4  1  8  2
6  2  4  1
8 12  0  2 
```

如果列名不以数字开头，`X`则不会添加到它们的前面。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-07-14T02:15:06.227

简短的回答：使用`as.data.frame.matrix(mytable)`，正如@Victor Van Hee 建议的那样。

长答案：即使返回，也`as.data.frame(mytable)`可能不适用于函数生成的列联表。它仍然会将您的表格融入格式。`table()``is.matrix(your_table)``TRUE``factor1 factor2 factori counts`

例子：

```
> freq_t = table(cyl = mtcars$cyl, gear = mtcars$gear)

> freq_t
   gear
cyl  3  4  5
  4  1  8  2
  6  2  4  1
  8 12  0  2

> is.matrix(freq_t)
[1] TRUE

> as.data.frame(freq_t)
  cyl gear Freq
1   4    3    1
2   6    3    2
3   8    3   12
4   4    4    8
5   6    4    4
6   8    4    0
7   4    5    2
8   6    5    1
9   8    5    2
> as.data.frame.matrix(freq_t)
   3 4 5
4  1 8 2
6  2 4 1
8 12 0 2 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-09-27T07:55:24.310

如果您使用的是[tidyverse](https://blog.rstudio.org/2016/09/15/tidyverse-1-0-0/)，则可以使用

```
as_data_frame(table(myvector)) 
```

得到一个[小标题](https://blog.rstudio.org/2016/03/24/tibble-1-0-0/)（即一个与基类有一些细微变化的数据框）

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2019-11-05T21:01:36.200

这已被弃用：

```
as.data.frame(my_table) 
```

而是使用这个包：

```
library("quanteda")
convert(my_table, to="data.frame") 
```

# oracle - Oracle 数据建模器 - 图表表示法

> ID：10758962
> 
> 赞同：6
> 
> 时间：2012-05-25T17:35:29.807
> 
> 标签：oracle, database-design, datamodel, data-modeling

*Oracle Data Modeler*生成的关系模型图是否有**详细的符号指南**？

 ** * *

我正在使用 Oracle Data Modeler**为现有数据库生成关系模型**。它生成了一个图表，但我无法解码图表中的所有符号。

> 一些**符号**是：
> 
> 1.  箭头
> 2.  星号（红色）
> 3.  Aphabetical 符号（如 P、F）
> 4.  符号（如钻石、钥匙）
> 5.  缩写（如 IX）
> 
> 仅凭推断，以上**对应于**：
> 
> 1.  外键引用
> 2.  ??
> 3.  P - 私钥；F - 外键
> 4.  key - 私钥
> 5.  ??

但是，我想知道*Oracle Data Modeler*是否有详细的符号指南？

我在网上搜索，但没有找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-03-30T12:12:07.567

[![在此处输入图像描述](../Images/151f07e3253fe35263f93b244df02648.png)](https://i.stack.imgur.com/L2GJ8.png)

*   **列名前的P 符号**：该列是 EntityType 的“**主键**”（“P”代表 Primary）；请注意，您可以有两列或多列以 P 符号作为主键可以由几列组成

*   **列名前的F 符号**：该列是“**外键**”（“F”表示外键），这意味着该列正在引用另一个实体的主键；并不是说你可以有几个外键

*   **PF 符号**一起：该列既是**主键又是外键**

*   **“*”**符号（**红色星号**）：该**列**具有**NOT NULL 约束**；换句话说，如果没有此列的值，则不能在此表中插入行（也称为实体类型的“实例”）

*   **菱形符号**（在表的底部）：显示该**表**上的索引（通常主键自动成为索引

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T06:37:25.123

红色星号通常是强制性的，大多数 ERD 中的菱形表示与。如果我没记错的话，pk 和 fk 是私钥和外键。我不确定你所说的箭头是什么意思，你的意思是乌鸦脚符号吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-03T17:38:55.310

我认为数据建模器在设置中有一个部分来显示它正在使用的 ER 符号。可以更改或查看那里的符号。对于我的 Mac；

```
Preferences -> Data Modeler -> Diagram -> Logical Model 
```

在那里你可以看到使用的符号。以便您可以在线查看箭头等的更多信息。*

# nlp - 用于检索单词形式（或其他免费服务）的维基词典 API

> ID：10758964
> 
> 赞同：1
> 
> 时间：2012-05-25T17:35:35.370
> 
> 标签：nlp, dictionary, wiktionary

这是一个特别适用于俄语/乌克兰语的问题，但也可能对其他语言有用。

是否有可能将单词形式检索为原始数据？例如在移动应用程序中使用。这些表格出现在通用 wiki 页面上。例如[动词 'to be' 的形式](http://ru.wiktionary.org/wiki/be#.D0.9C.D0.BE.D1.80.D1.84.D0.BE.D0.BB.D0.BE.D0.B3.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D0.B8_.D1.81.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D1.81.D0.B2.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0_2)。[俄语中“苹果”的名词形式与名词形式](http://ru.wiktionary.org/wiki/%D1%8F%D0%B1%D0%BB%D0%BE%D0%BA%D0%BE#.D0.9C.D0.BE.D1.80.D1.84.D0.BE.D0.BB.D0.BE.D0.B3.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D0.B8_.D1.81.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D1.81.D0.B2.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0)相同。

我需要这些带有表格描述的表格。我的意思是例如：to be - 不定式；am - 第一人称单数，现在时间；are - 第一人称复数，现在时间；等等

到目前为止，我发现只有 wiktionary.org 提供俄语的此类信息。如果有人能指点我一些其他俄语、乌克兰语和英语的服务/词典，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:42:02.997

如果您有兴趣使用维基词典，您可以考虑使用维基词典，[它](http://code.google.com/p/wikokit/)是已解析的维基词典数据库的接口。英语和俄语数据库转储可在其下载部分获得，但它们也提供代码/库 (Java) 供您创建您的自己的数据库转储。他们还（我认为）为您提供了与数据库交互的代码/库，因此您不再需要处理 Web 服务，因为您可以在本地运行它。

# r - 如何使用 R 重命名文件？

> ID：10758965
> 
> 赞同：67
> 
> 时间：2012-05-25T17:35:39.667
> 
> 标签：r, file-rename

我在一个文件夹中有 700 多个文件，命名为：从 1 号到 9 号的文件以第一个月命名：

```
water_200101_01.img  
water_200101_09.img 
```

从编号 10 到编号 30 的文件被命名为：

```
water_200101_10.img
water_200101_30.img 
```

第二个月以此类推：从 1 号到 9 号的文件被命名为：

```
water_200102_01.img  
water_200102_09.img 
```

从编号 10 到编号 30 的文件被命名为：

```
water_200102_10.img
water_200102_30.img 
```

如何在不更改文件的情况下重命名它们。只需更改名称，例如

```
water_1
water_2
...till...
water_700 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-25T17:45:19.897

`file.rename`将重命名文件，它可以同时包含`from`和`to`名称的向量。

所以像：

```
file.rename(list.files(pattern="water_*.img"), paste0("water_", 1:700)) 
```

可能会奏效。

如果特别关心顺序，您可以对当前存在的文件列表进行排序，或者如果它们遵循特定模式，则直接创建文件名向量（尽管我注意到 700 不是 30 的倍数）。

我将抛开这个问题，“你为什么想要？” 因为您似乎在丢弃文件名中的信息，但大概该信息也包含在其他地方。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-17T16:58:51.150

这是我为自己写的。它速度很快，允许在查找和替换中使用正则表达式，可以忽略文件后缀，并且可以显示在“试运行”中会发生什么以及防止覆盖现有文件。

如果你在 Mac 上，它可以使用 applescript 在 Finder 中挑选出当前文件夹作为目标文件夹。

```
umx_rename_file <- function(findStr = "Finder", replaceStr = NA, baseFolder = "Finder", test = TRUE, ignoreSuffix = TRUE, listPattern = NULL, overwrite = FALSE) {
    umx_check(!is.na(replaceStr), "stop", "Please set a replaceStr to the replacement string you desire.")

    # ==============================
    # = 1\. Set folder to search in =
    # ==============================
    if(baseFolder == "Finder"){
        baseFolder = system(intern = TRUE, "osascript -e 'tell application \"Finder\" to get the POSIX path of (target of front window as alias)'")
        message("Using front-most Finder window:", baseFolder)
    } else if(baseFolder == "") {
        baseFolder = paste(dirname(file.choose(new = FALSE)), "/", sep = "") ## choose a directory
        message("Using selected folder:", baseFolder)
    }

    # =================================================
    # = 2\. Find files matching listPattern or findStr =
    # =================================================
    a = list.files(baseFolder, pattern = listPattern)
    message("found ", length(a), " possible files")

    changed = 0
    for (fn in a) {
        if(grepl(pattern = findStr, fn, perl= TRUE)){
            if(ignoreSuffix){
                # pull suffix and baseName (without suffix)
                baseName = sub(pattern = "(.*)(\\..*)$", x = fn, replacement = "\\1")
                suffix   = sub(pattern = "(.*)(\\..*)$", x = fn, replacement = "\\2")
                fnew = gsub(findStr, replacement = replaceStr, x = baseName, perl= TRUE) # replace all instances
                fnew = paste0(fnew, suffix)
            } else {
                fnew = gsub(findStr, replacement = replaceStr, x = fn, perl= TRUE) # replace all instances
            }
            if(test){
                message(fn, " would be changed to:  ", omxQuotes(fnew))
            } else {
                if((!overwrite) & file.exists(paste(baseFolder, fnew, sep = ""))){
                    message("renaming ", fn, "to", fnew, "failed as already exists. To overwrite set T")
                } else {
                    file.rename(paste0(baseFolder, fn), paste0(baseFolder, fnew))
                    changed = changed + 1;
                }
            }
        }else{
            if(test){
                # message(paste("bad file",fn))
            }
        }
    }
    if(test & changed==0){
        message("set test = FALSE to actually change files.")
    } else {
        umx_msg(changed)
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-07-16T15:40:35.627

如果要将与给定模式匹配的文件名的某个部分替换为另一个模式。这对于一次重命名多个文件很有用。例如，此代码将获取所有包含 foo 的文件，并将文件名中的 foo 替换为 bob。

```
file.rename(list.files(pattern = "foo"), str_replace(list.files(pattern = "foo"),pattern = "foo", "bob")) 
```

# performance - 如果 IN 子句没有值，如何返回所有行？

> ID：10758966
> 
> 赞同：3
> 
> 时间：2012-05-25T17:35:43.207
> 
> 标签：performance, tsql, sql-server-2005, sql-like, in-clause

以下是示例查询。

```
CREATE PROCEDURE GetModel
(
    @brandids varchar(100), -- brandid="1,2,3"
    @bodystyleid varchar(100) -- bodystyleid="1,2,3"

)
AS
   select * from model
   where brandid in (@brandids) -- use a UDF to return table for comma delimited string
   and bodystyleid in (@bodystyleid) 
```

我的要求是，如果`@brandids`or`@bodystyleid`为空，查询应返回该条件的所有行。

请指导我如何做到这一点？还建议如何编写此查询以优化性能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:42:01.347

无论如何，您都需要动态 SQL 或拆分函数，因为`IN ('1,2,3')`与`IN (1,2,3)`.

拆分功能：

```
CREATE FUNCTION dbo.SplitInts
(
   @List       VARCHAR(MAX),
   @Delimiter  CHAR(1)
)
RETURNS TABLE
AS
   RETURN ( SELECT Item = CONVERT(INT, Item) FROM ( 
     SELECT Item = x.i.value('(./text())[1]', 'int') FROM ( 
       SELECT [XML] = CONVERT(XML, '<i>' + REPLACE(@List, @Delimiter, '</i><i>') 
       + '</i>').query('.') ) AS a CROSS APPLY [XML].nodes('i') AS x(i)) AS y
     WHERE Item IS NOT NULL
   ); 
```

代码变成这样：

```
SELECT m.col1, m.col2 FROM dbo.model AS m
LEFT OUTER JOIN dbo.SplitInts(NULLIF(@brandids, ''), ',') AS br
ON m.brandid = COALESCE(br.Item, m.brandid)
LEFT OUTER JOIN dbo.SplitInts(NULLIF(@bodystyleid, ''), ',') AS bs
ON m.bodystyleid = COALESCE(bs.Item, m.bodystyleid)
WHERE (NULLIF(@brandids, '') IS NULL OR br.Item IS NOT NULL)
AND (NULLIF(@bodystyleid, '') IS NULL OR bs.Item IS NOT NULL); 
```

（请注意，我在这里添加了很多 NULLIF 处理......如果这些参数没有值，您应该传递 NULL，而不是“空白”。）

动态 SQL，由于参数嗅探而导致错误计划的可能性要小得多，它将是：

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N'SELECT columns FROM dbo.model
WHERE 1 = 1 '
+ COALESCE(' AND brandid IN (' + @brandids + ')', '')
+ COALESCE(' AND bodystyleid IN (' + @bodystyleid + ')', '');

EXEC sp_executesql @sql; 
```

当然，正如@JamieCee 指出的那样，动态 SQL*可能*容易受到注入的影响，如果您在任何地方搜索动态 SQL，您就会发现。因此，如果您不信任您的输入，您需要防范潜在的注入攻击。就像您在应用程序代码中组装即席 SQL 一样。

当您迁移到 SQL Server 2008 或更高版本时，您应该查看[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)（[此处的示例](https://stackoverflow.com/a/9407089/61305)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:30:27.147

```
if(@brandids = '' or @brandids is null)
Begin
     Set @brandids = 'brandid'
End

if(@bodystyleid = '' or @bodystyleid is null)
Begin
     Set @bodystyleid = 'bodystyleid'
End

Exec('select * from model where brandid in (' + @brandids + ')
and bodystyleid in (' + @bodystyleid + ')') 
```

# .htaccess - 如何使用 htaccess 将下划线“_”替换为“/”？

> ID：10758967
> 
> 赞同：2
> 
> 时间：2012-05-25T17:35:49.167
> 
> 标签：.htaccess, mod-rewrite, rewrite

可以使用 htaccess 将下划线“_”替换为“/”吗？例如，我想要这个 [http://example.com/empresa_historia-da-empresa.php](http://example.com/empresa_historia-da-empresa.php) 保持良好 [状态 http://example.com/empresa/historia-da-empresa](http://example.com/empresa/historia-da-empresa)

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:49:27.273

你可以使用这个：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteRule !\.(html|php)$ - [S=4]
RewriteRule ^([^_]*)_([^_]*)_([^_]*)_([^_]*)_(.*)$ $1/$2/$3/$4/$5 [E=uscor:Yes]
RewriteRule ^([^_]*)_([^_]*)_([^_]*)_(.*)$ $1/$2/$3/$4 [E=uscor:Yes]
RewriteRule ^([^_]*)_([^_]*)_(.*)$ $1/$2/$3 [E=uscor:Yes]
RewriteRule ^([^_]*)_(.*)$ $1/$2 [E=uscor:Yes]

RewriteCond %{ENV:uscor} ^Yes$
RewriteRule (.*) http://example.com/$1 [R=301,L] 
```

在这里找到（并做了一点改动）：[http](http://www.askapache.com/htaccess/modrewrite-tips-tricks.html#Rewrite_underscores_hyphens_SEO_URL) ://www.askapache.com/htaccess/modrewrite-tips-tricks.html#Rewrite_underscores_hyphens_SEO_URL 它适用于 1 到 4 个下划线

# matlab - MATLAB 和矢量化循环中的双重求和

> ID：10758972
> 
> 赞同：3
> 
> 时间：2012-05-25T17:36:19.477
> 
> 标签：matlab, optimization, for-loop, sum, vectorization

这是我实现这个可爱公式的尝试。

[http://dl.dropbox.com/u/7348856/Picture1.png](http://dl.dropbox.com/u/7348856/Picture1.png)

```
%WIGNER Computes Wigner-Distribution on an image (difference of two images).
function[wd] = wigner(difference)
%Image size
[M, N, ~] = size(difference);
%Window size (5 x 5)
Md = 5;
Nd = 5;
%Fourier Transform
F = fft2(difference);
%Initializing the wigner picture
wd = zeros(M, N, 'uint8');
lambda =0.02;
value = (4/(Md*Nd));
for x = 1+floor(Md/2):M - floor(Md/2)
    for y = 1+floor(Nd/2):N - floor(Nd/2)
        for l = -floor(Nd/2) : floor(Nd/2)
            for k = -floor(Md/2) : floor(Md/2)
                kernel = exp(-lambda * norm(k,l));
                kernel = kernel * value;
                theta = 4 * pi * ((real(F(x, y)) * (k/M) )+ (imag(F(x, y)) * (l/N)));
                wd(x, y) = (wd(x, y)) + (cos(theta) * difference(x + k, y + l) * difference(x - k, y - l) * (kernel));
            end
        end
    end
end
end 
```

如您所见，外部的两个循环用于滑动窗口，而其余的内部循环用于求和的变量。

现在，我对亲爱的 stackoverflow 用户的请求是：你能帮我改进这些非常讨厌的 for 循环，这些循环花费的时间超过了它的份额，并将其变成矢量化循环吗？这种改进会带来重大变化吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:42:30.147

这可能不是您要问的，但似乎（乍一看）求和的顺序是独立的，您可以使用 {l,k,x,y} 而不是 {x,y,l,k} . 这样做将允许您通过将内核保持在最外层循环中来更少地评估内核。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T00:59:07.710

这四个嵌套循环基本上是以滑动邻域样式处理图像中的每个像素。我立刻想到了[NLFILTER](http://www.mathworks.com/help/toolbox/images/ref/nlfilter.html)和[IM2COL](http://www.mathworks.com/help/toolbox/images/ref/im2col.html)函数。

这是我对代码进行矢量化的尝试。请注意，我尚未对其进行彻底测试，或将性能与基于循环的解决方案进行比较：

```
function WD = wigner(D, Md, Nd, lambda)
    %# window size and lambda
    if nargin<2, Md = 5; end
    if nargin<3, Nd = 5; end
    if nargin<4, lambda = 5; end

    %# image size
    [M,N,~] = size(D);

    %# kernel = exp(-lambda*norm([k,l])
    [K,L] = meshgrid(-floor(Md/2):floor(Md/2), -floor(Nd/2):floor(Nd/2));
    K = K(:); L = L(:);
    kernel = exp(-lambda .* sqrt(K.^2+L.^2));

    %# frequency-domain part
    F = fft2(D);

    %# f(x+k,y+l) * f(x-k,y-l) * kernel
    C = im2col(D, [Md Nd], 'sliding');
    X1 = bsxfun(@times, C .* flipud(C), kernel);

    %# cos(theta)
    C = im2col(F, [Md Nd], 'sliding');
    C = C(round(Md*Nd/2),:);    %# take center pixels
    theta = bsxfun(@times, real(C), K/M) + bsxfun(@times, imag(C), L/N);
    X2 = cos(4*pi*theta);

    %# combine both parts for each sliding-neighborhood
    WD = col2im(sum(X1.*X2,1), [Md Nd], size(F), 'sliding') .* (4/(M*N));

    %# pad array with zeros to be of same size as input image
    WD = padarray(WD, ([Md Nd]-1)./2, 0, 'both');
end 
```

对于它的价值，这是基于循环的版本，具有[@Laurbert515](https://stackoverflow.com/a/10759055/97160)建议的改进：

```
function WD = wigner_loop(D, Md, Nd, lambda)
    %# window size and lambda
    if nargin<2, Md = 5; end
    if nargin<3, Nd = 5; end
    if nargin<4, lambda = 5; end

    %# image size
    [M,N,~] = size(D);

    %# frequency-domain part
    F = fft2(D);

    WD = zeros([M,N]);
    for l = -floor(Nd/2):floor(Nd/2)
        for k = -floor(Md/2):floor(Md/2)
            %# kernel = exp(-lambda*norm([k,l])
            kernel = exp(-lambda * norm([k,l]));

            for x = (1+floor(Md/2)):(M-floor(Md/2))
                for y = (1+floor(Nd/2)):(N-floor(Nd/2))
                    %# cos(theta)
                    theta = 4 * pi * ( real(F(x,y))*k/M + imag(F(x,y))*l/N );

                    %# f(x+k,y+l) * f(x-k,y-l)* kernel
                    WD(x,y) = WD(x,y) + ( cos(theta) * D(x+k,y+l) * D(x-k,y-l) * kernel );
                end
            end
        end
    end
    WD = WD * ( 4/(M*N) );
end 
```

以及我如何测试它（基于我从您[之前](https://stackoverflow.com/questions/10676582/double-summation-implementing-wigners-distribution-on-thermal-images)链接到的[论文中理解的内容）：](http://www.di.ubi.pt/~lfbaa/biorecPubs/otcbvs2010.pdf)

```
%# difference between two consecutive frames
A = imread('AT3_1m4_02.tif');
B = imread('AT3_1m4_03.tif');
D = imsubtract(A,B);
%#D = rgb2gray(D);
D = im2double(D);

%# apply Wigner-Distribution
tic, WD1 = wigner(D); toc
tic, WD2 = wigner_loop(D); toc
figure(1), imshow(WD1,[])
figure(2), imshow(WD2,[]) 
```

然后您可能需要缩放/归一化矩阵，并应用阈值...

# android - 在 Java SurfaceView 中创建 NativeWindowType 时，如何从本机函数创建 EGL 上下文？

> ID：10758975
> 
> 赞同：1
> 
> 时间：2012-05-25T17:36:37.020
> 
> 标签：android, opengl-es, android-ndk

我正在尝试创建 EGL 上下文以在本机函数调用中使用 OpenglES 绘制所有内容。问题是我需要访问 NativeWindowType 实例，但我只能找到一个函数来创建一个（无论如何我不知道如何链接）。但是，即使我创建了一个，我也怀疑这是错误的，因为我真正需要的是由我调用此本机函数的 SurfaceView 实例创建的那个。

这是代码：

```
static int egl_init() {

const EGLint attribs[] = {
        EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
        EGL_BLUE_SIZE, 8,
        EGL_GREEN_SIZE, 8,
        EGL_RED_SIZE, 8,
        EGL_NONE
};
EGLint w, h, dummy, format;
EGLint egl_major_version, egl_minor_version;
EGLint numConfigs;
EGLConfig egl_config;
EGLSurface egl_surface;
EGLContext egl_context;

EGLDisplay egl_display = eglGetDisplay(EGL_DEFAULT_DISPLAY);

// v--------- This is where I should get the display window
NativeWindowType display_window;
display_window = android_createDisplaySurface();

eglInitialize(egl_display, &egl_major_version, &egl_minor_version);
printf("GL Version: %d.%d\n", egl_major_version, egl_minor_version);

if (!eglChooseConfig(egl_display, attribs, &egl_config, 1, &numConfigs))
{
  printf("eglChooseConfig failed\n");
  if (egl_context == 0) printf("Error code: %x\n", eglGetError());
}

eglGetConfigAttrib(egl_display, egl_config, EGL_NATIVE_VISUAL_ID, &format);

// v---------- This requires that I link libandroid, it is found in android/native_window.h
ANativeWindow_setBuffersGeometry(display_window, 0, 0, format);

egl_context = eglCreateContext(egl_display, egl_config, EGL_NO_CONTEXT, NULL);
if (egl_context == 0) LOGE("Error code: %x\n", eglGetError());

egl_surface = eglCreateWindowSurface(egl_display, egl_config, display_window, NULL);
if (egl_surface == 0) LOGE("Error code: %x\n", eglGetError());

if (eglMakeCurrent(egl_display, egl_surface, egl_surface, egl_context) == EGL_FALSE) {
    LOGE("Unable to eglMakeCurrent");
    return -1;
}
return 0;
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:54:14.930

表面不能支持请求的 egl 配置（红色、绿色和蓝色至少为 8 位）。

```
const EGLint attribs[] = { 
                EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
                EGL_BLUE_SIZE, 8,
                EGL_GREEN_SIZE, 8,
                EGL_RED_SIZE, 8,
                EGL_NONE
}; 
```

某些手机​​默认将所有表面缓冲区设为 RGB_565。

在 Java 中要获得更详细的颜色或 alpha，您可以使用 getWindow 和 setFormat()。像这样：getWindow().setFormat(PixelFormat.TRANSLUCENT); 要在本机活动中执行等效操作，您必须执行以下操作。

```
ANativeWindow_setBuffersGeometry(display_window, 0, 0, 1); 
```

定义在 android/native_window.h

```
/*
 * Pixel formats that a window can use.
 */
enum {
        WINDOW_FORMAT_RGBA_8888           = 1,
        WINDOW_FORMAT_RGBX_8888           = 2,
        WINDOW_FORMAT_RGB_565                   = 4,
}; 
```

希望这可以帮助。我已经看到了这个问题，我只是想通了。

# python - Python 代码的 Web 界面

> ID：10758984
> 
> 赞同：0
> 
> 时间：2012-05-25T17:37:05.330
> 
> 标签：python, html

首先，英语不是我的母语，所以，请原谅我的任何错误。

我不想提出一个回避的问题，所以我将详细说明我的情况并在下面说明我的观点：

我需要制作一个 Web 界面来从 html 的表单字段中获取信息。特别是一个文本文件。然后，我需要将此文件作为参数提供给将在我的 Linux 服务器上运行的 Python 脚本（与 Web 界面相同）。我的脚本运行良好，Web 界面准备就绪，但我没有明白让 Web 工作正常的意义。

我被困在“使 wweb 表单与 python 脚本对话”的部分。我尝试了一些 linux 命令和一些在我的研究中发现的提示，但没有奏效。

这件事的目标是不将 Python 代码发送给最终用户。因此，客户端将“使用”来自 Web 界面的代码，并且不会看到负责使漏洞工作的 Python 代码。

有没有人见过这种实现？任何帮助或信息都会很好！非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:59:57.267

您可能应该从 Python 文档中的这个页面开始 - [http://docs.python.org/howto/webservers.html](http://docs.python.org/howto/webservers.html)。这可能会给你一些关于它是如何工作的想法，然后根据你的需要，你可以继续阅读更详细的主题。解决方案将取决于您的进一步开发计划（您是否会扩展此应用程序的逻辑？您是否会连接到数据库等）、安全问题等。

仅对于您定义的情况，听起来一些简单的解决方案对您有用，例如拥有一个简单的 CGI 脚本 ( [http://docs.python.org/library/cgi.html )，而您可能](http://docs.python.org/library/cgi.html)**还**没有 ( ) 需要任何强大的东西，比如 Django 或 TurboGears。

要使 CGI 工作，您需要配置 Apache Web 服务器，为其启用 CGI，然后利用您已经实现的程序实现 CGI 脚本。

您可以在网上查看如何执行每个步骤。例如，就在这里，在 stackoverflow 上：[如何设置 Python 脚本以在 Apache 2.0 中工作？](https://stackoverflow.com/questions/5102/how-do-you-set-up-python-scripts-to-work-in-apache-2-0)

在您的 CGI 脚本中，您将需要实现一些允许用户将文件上传到您的服务器的逻辑。您可以查看此页面：[http ://code.activestate.com/recipes/273844-minimal-http-upload-cgi/](http://code.activestate.com/recipes/273844-minimal-http-upload-cgi/)

最后，**如果**您计划进一步开发您的应用程序，您可能希望使用 Django 或 TurboGears 之类的东西。您的应用程序越复杂 - 使用一些 Web 框架就越好。你可能会花更多的时间研究这些，但最终你会得到更多的力量，并且你得到的代码比 CGI 脚本**更**容易维护。但是，正如我所说 - 这取决于您的需求。（尽管无论如何研究它们是个好主意；））

# javascript - setTimout 搞砸了变量 javascript

> ID：10758987
> 
> 赞同：0
> 
> 时间：2012-05-25T17:37:20.727
> 
> 标签：javascript, jquery, variables, settimeout

我在一段脚本中遇到问题，该脚本在对象“隐藏”后删除了 X 时间

```
selector = getselector($(this).parent().parent());
console.log("Clicked Cancel");
$(this).parent().parent().addClass('hidden');
setTimeout(function() {
    $(selector).remove();
}, 400); 
```

[我从这里](https://stackoverflow.com/a/2421383/1417953)编辑了一些脚本来制作函数*getselector*，因为 $(this) 在 setTimeout 内不起作用。现在这段代码可以工作了，只要你不要再次运行太快。问题似乎是当另一个节点在时间跨度（当前为 400 毫秒）内被删除时，变量*选择器会变得混乱*

我想不出一个简单的方法来解决它。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:45:32.733

您还可以通过以下方式将删除排队，这会使您的代码更辣一点：

```
$(this).parent().parent().addClass('hidden').delay(400).queue(function() {
   $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:40:32.457

答案很简单：不要`selector`全局化，即使用`var`. 哦，只需存储元素而不是尝试构建选择器：

```
var elem = $(this).parent().parent();
elem.addClass('hidden');
setTimeout(function() {
    elem.remove();
}, 400); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T17:41:23.313

在流程开始时设置一个值为 true 的变量。在操作时，检查它是否不为假，然后将其设置为假，然后在完成后返回真。如果你点击它太快，它会检查你的变量，再次看到它是真的，并会再次执行该操作。

# android - RenamingMockContext 需要提供getResources

> ID：10758991
> 
> 赞同：3
> 
> 时间：2012-05-25T17:37:51.160
> 
> 标签：android, testing, resources, android-context

我正在尝试构建一个 RenamingMockContext 来控制 MyAppliction。

它看起来如下：

```
public class RenamingMockContext extends RenamingDelegatingContext {
    private static final String PREFIX = "test.";

    public RenamingMockContext(Context context) {
        super(new DelegatedMockContext(context), PREFIX);
    }

    private static class DelegatedMockContext extends MockContext {
        private Context mDelegatedContext;

        public DelegatedMockContext(Context context) {
            mDelegatedContext = context;
        }

        @Override
        public String getPackageName() {
            return mDelegatedContext.getPackageName();
        }
    }
} 
```

MyApplication 如下所示：

```
public class MyApplication extends Application {
    @Override
    public void onCreate() {
        super.onCreate();

        AirshipConfigOptions options = AirshipConfigOptions.loadDefaultOptions(this);
        UAirship.takeOff(this, options);
        PushManager.enablePush();
        PushManager.shared().setIntentReceiver(UrbanAirshipReceiver.class);
    }
} 
```

当我运行测试时，它会引发 UnsupportedOperationException。使用以下堆栈跟踪。

```
java.lang.UnsupportedOperationException
at com.carplink.aCarpLink.test.RenamingMockContext$DelegatedMockContext.getResources(RenamingMockContext.java:29)
at android.content.ContextWrapper.getResources(ContextWrapper.java:80)
at android.content.ContextWrapper.getResources(ContextWrapper.java:80)
at com.urbanairship.Options.loadFromProperties(Unknown Source)
at com.urbanairship.Options.loadFromProperties(Unknown Source)
at com.urbanairship.AirshipConfigOptions.loadDefaultOptions(Unknown Source)
at com.carplink.aCarpLink.CarpLinkApplication.onCreate(CarpLinkApplication.java:15)
at android.test.ApplicationTestCase.createApplication(ApplicationTestCase.java:122)
at com.carplink.aCarpLink.test.CarpLinkApplicationTest.setUp(CarpLinkApplicationTest.java:24)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1606) 
```

显然，城市飞艇的配置需要一些资源。我可以在如何在 RenamingMockContext 中实现 getResources 方面使用一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:07:45.737

对于大多数方法，包括 getResources 方法，MockContext 实现都会引发 UnsupportedOperationException。我不喜欢这个解决方案，所以希望其他人提供更好的解决方案。但是我能够通过在 MockContext 和 MockResources 中实现某些方法来克服异常：

```
private class MyMockContext extends MockContext {
    @Override
    public Resources getResources() {
        return new MockResources() {
            @Override
            public DisplayMetrics getDisplayMetrics() {
                return new DisplayMetrics();
            }
            @Override
            public Configuration getConfiguration() {
                return new Configuration();
            }
            @Override
            public void getValue (int id, TypedValue outValue, boolean resolveRefs) {
                return;
            }
            @Override
            public boolean getBoolean(int id) {
                return true;
            }
            @Override
            public int getDimensionPixelSize(int id) {
                return 0;
            }
        };
    }
} 
```

你的旅费可能会改变; 一些被覆盖的方法可能只适用于我的特定应用程序。