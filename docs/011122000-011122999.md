# StackOverflow 问答 11122000-11122999

# r - 如何在使用 ggplot2 绘制的直方图上绘制箭头？

> ID：11122002
> 
> 赞同：26
> 
> 时间：2012-06-20T14:39:56.753
> 
> 标签：r, ggplot2, histogram

这是数据集：

```
 set.seed(123)
    myd <- data.frame (class = rep(1:4, each = 100), yvar = rnorm(400, 50,30))
    require(ggplot2)
    m <- ggplot(myd, aes(x = yvar))
    p <- m + geom_histogram(colour = "grey40", fill = "grey40", binwidth = 10)  +
       facet_wrap(~class) + theme_bw( ) 
    p + opts(panel.margin=unit(0 ,"lines")) 
```

我想将标签添加到每个主题类所属的条形图上，并生成类似幻灯片后处理图的东西。有没有办法在 R 中做到这一点？……

编辑：如果箭头不是不可能的，我们可以考虑不同的指针，例如点或错误栏

![在此处输入图像描述](../Images/9610e20b4e4747f419a9ce48f0957762.png)

假设以下是要标记的主题：

```
class   name       yvar
2       subject4    104.0
3       subject3    8.5
3       subject1    80.0
4       subject2    40.0
4       subject1    115.0

classd <- data.frame (class = c(2,3,3,4,4), 
 name = c  ("subject4", "subject3", "subject1", "subject2", "subject1"), 
 yvar = c(104.0, 8.5,80.0,40.0, 115.0)) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T22:12:00.993

`geom_text()`这是使用添加标签和`geom_segment()`添加`arrow`箭头选项的部分解决方案。

缺点是我必须为每个箭头和标签手动选择 y 位置。也许其他人可以帮助弄清楚如何以编程方式找到直方图条的高度。

```
set.seed(123)
myd <- data.frame (class = rep(1:4, each = 100), yvar = rnorm(400, 50,30))

library(ggplot2)
library(grid) # unit() is in the grid package.

arrow_pos = read.table(header=TRUE, stringsAsFactors=FALSE,
                       text="class   name       yvar
                             2       subject4    104.0
                             3       subject3    8.5
                             3       subject1    80.0
                             4       subject2    40.0
                             4       subject1    115.0")

arrow_pos$y = c(3, 5, 9, 13, 1) # Manually enter y position.
arrow_pos$class = factor(as.character(arrow_pos$class),
    levels=c("1", "2", "3", "4")) # Gets rid of warnings.

p1 = ggplot(myd, aes(x=yvar)) +
     theme_bw() +
     geom_histogram(colour="grey40", fill="grey40", binwidth=10) +
     facet_wrap(~ class) +
     opts(panel.margin=unit(0 ,"lines")) +
     geom_text(data=arrow_pos, aes(label=name, x=yvar, y=y + 2), size=3) +
     geom_segment(data=arrow_pos, 
                  aes(x=yvar, xend=yvar, y=y + 1.5, yend=y + 0.25),
                  arrow=arrow(length=unit(2, "mm")))

png("p1.png", height=600, width=600)
print(p1)
dev.off() 
```

![在此处输入图像描述](../Images/835c08e045125ce514c35c2a1db013e9.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-21T03:07:06.790

**不推荐使用更新** `opts`；改为使用`theme`。

稍微扩展 bdemarest 的响应，我认为这会以编程方式计算条形高度。的最后两列`arrow_pos`包含相关信息：`Freq`是条的高度；`xval`在条形中点的 x 位置。但是，一些标签仍然与条形重叠。

**编辑**默认情况下`cut`，将其间隔限制为（b1，b2），而将`ggplot2`其在 geom_histogram 中的间隔限制为 [b1，b2）。我已经修改了代码，以便将它们的间隔绑定为 [b1, b2)，即 ggplot 方式。

```
library(ggplot2)
library(grid) # unit() is in the grid package.
library(plyr)  # Data restructuring

set.seed(123)
myd <- data.frame (class = rep(1:4, each = 100), yvar = rnorm(400, 50, 30))

arrow_pos = read.table(header=TRUE, stringsAsFactors=FALSE,
                       text="class   name       yvar
                             2       subject4    104.0
                             3       subject3    8.5
                             3       subject1    80.0
                             4       subject2    40.0
                             4       subject1    115.0")

# Calculate the y positions for the labels and arrows
# For the myd data frame, obtain counts within each bin, but separately for each class
bwidth <- 10   # Set binwidth
Min <- floor(min(myd$yvar)/bwidth) * bwidth
Max <- ceiling(max(myd$yvar)/bwidth) * bwidth

# Function to do the counting
func <- function(df) {
   tab = as.data.frame(table(cut(df$yvar, breaks = seq(Min, Max, bwidth), right = FALSE)))
   tab$upper = Min + bwidth * (as.numeric(rownames(tab)))
   return(tab)
   }

# Apply the function to each class in myd data frame
TableOfCounts <- ddply(myd, .(class), function(df) func(df))

# Transfer counts of arrow_pos
arrow_pos$upper <- (floor(arrow_pos$yvar/bwidth) * bwidth) + bwidth
arrow_pos <- merge(arrow_pos, TableOfCounts, by = c("class", "upper"))
arrow_pos$xvar <- (arrow_pos$upper - .5 * bwidth)      # x position of the arrow is at the midpoint of the bin
arrow_pos$class=factor(as.character(arrow_pos$class),
    levels=c("1", "2", "3", "4")) # Gets rid of warnings.

ggplot(myd, aes(x=yvar)) +
     theme_bw() +
     geom_histogram(colour="grey70", fill="grey70", binwidth=bwidth) +
     facet_wrap(~ class) +
     theme(panel.margin=unit(0, "lines")) +
     geom_text(data=arrow_pos, aes(label=name, x=xvar, y=Freq + 2), size=4) +
     geom_segment(data=arrow_pos, 
                  aes(x=xvar, xend=xvar, y=Freq + 1.5, yend=Freq + 0.25),
                  arrow=arrow(length=unit(2, "mm"))) 
```

![在此处输入图像描述](../Images/11aa94767e3cab25cbab2a833f32d0f1.png)

# java - java swing中的堆栈GUI

> ID：11122003
> 
> 赞同：0
> 
> 时间：2012-06-20T14:40:08.373
> 
> 标签：java, swing, user-interface, stack

我正在创建堆栈的 GUI。这是我的代码

```
 private void StackActionPerformed(java.awt.event.ActionEvent evt) {                                      

    b1=new JButton("Push");
    b2=new JButton("Pop");
    b3=new JButton("Peek");
    b4=new JButton("Clear");
    b1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            pushButtonActionPerformed(evt);
        }
    });
    tb.add(b1);
    tb.add(b2);
    tb.add(b3);
    tb.add(b4);
    frame_st.add(tb);
    revalidate();
    repaint();
    frame_st.setSize(1022, 534);
    drawstack();

}                                     
public void drawstack()
{
    m1.setBorder(BorderFactory.createRaisedSoftBevelBorder());
    m1.setBackground(Color.white);
    m1.setLayout(null);
    JLabel l1=new JLabel("STACK");
    l1.setBounds(500, 5, 100, 70);
    m1.add(l1); 
} 
```

我的代码正在完美地编译 drawstack() 正在绘制所需的东西，但由于 drawstack() 被称为我的按钮，这些按钮存在于 StackActionPerformed(java.awt.event.ActionEvent evt) 即 b1、b2 等变得不可见。我不希望这种情况发生。我希望我的按钮一直可见。请帮忙 。m1 是一个面板，它覆盖了我的整个框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:18:00.013

我猜你正在把`m1`按钮放在上面（和`frame_st`）。我会直接把按钮放在上面`m1`。像这样的窗口是容器对象。它们上面放置了（子）容器，上面放置了（子）（子）容器，等等。您需要保持特定级别的所有容器在其父级上的布局方式。如果它们重叠而不是邻接，那么您就有问题了。

我发现[javax.swing.Box](http://docs.oracle.com/javase/6/docs/api/javax/swing/Box.html)是用于布置窗口的最有用、最简单的类，我会向您推荐它。在整个窗口上放置一个垂直框。然后制作`frame_st`一个水平框，将其添加到垂直框，并按照您的操作添加按钮。然后添加`m1`，不管它是什么，也到垂直框，你应该很高兴。

javax.swing.Box 不是解决世界上所有问题的方法，但它应该可以帮助您入门。一旦你的按钮显示出来，你就可以尝试其他的东西。

# ios5 - 带有 API 密钥的 Google Maps Api v3

> ID：11122006
> 
> 赞同：0
> 
> 时间：2012-06-20T14:40:18.233
> 
> 标签：ios5, google-maps-api-3

全部，

当我尝试访问 Google 地图地理编码网络服务时收到“请求被拒绝”。不知道为什么。该 URL 对我来说是正确的，并且 Simple Access API 浏览器密钥有效，并且 Maps v2 和 Maps v3 均已打开。

我意识到在 v3 中不再需要 API 密钥，所以我不知道如何通过查询字符串参数使用 Web 服务绕过 API 限制。

[http://maps.googleapis.com/maps/api/geocode/json?key=MYAPIKEY&latlng=39.76144296429947,-104.8011589050293&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?key=MYAPIKEY&latlng=39.76144296429947,-104.8011589050293&sensor=true)

当我删除“key”参数时，它可以工作，但我需要统计信息并且不想达到 API 访问限制，所以我需要那里的密钥（我认为）

任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:13:57.323

决定与 geonames.org 一起为这个项目。比谷歌更容易处理。

# javascript - 不能重新绑定滚动事件？

> ID：11122010
> 
> 赞同：2
> 
> 时间：2012-06-20T14:40:27.533
> 
> 标签：javascript, jquery, events, bind, dynamic-rebinding

我想在 ajax 调用中重新绑定窗口滚动事件

```
$(window).scroll(function(){
   column_height = $("#first_column").height();
   screenTop = $(window).scrollTop();
   window_height = $(window).height();

if((screenTop+window_height)>=column_height){

    $(window).unbind('scroll');

      $.ajax({
            url: "/service/article_json.php",
            type: 'GET',
            async: false,
            cache: false,
            timeout: 30000,
            error: function(){
                return true;
            },
            success: function(data){ 
                $.each($.parseJSON(data), function(key,item) {

                  //Add content to #first_column

                  $(window).bind('scroll');

                });
            }
        });
  }
}); 
```

`$(window).bind('scroll');`似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:47:26.627

当您`.unbind`对绑定事件的引用未存储在任何地方或任何东西时。 `$(window).bind('scroll')`实际上什么都不做。

首先，如果你正在使用，`1.7`你应该使用`.on`and`.off`来代替。没有大碍。

有几种方法可以做到这一点，但最简单的方法是单独定义函数并使用它的名称来绑定/取消绑定。您甚至可以将其附加到窗口（尽管我认为仅使用`function`关键字就可以做到这一点。无论如何..）

```
$(window).data('scrollEvent', function() { /* your func here */ });
$(window).on('scroll', $(window).data('scrollEvent')); 
```

您可以使用第二行替换`$(window).bind('scroll')`上面的内容。小心递归。

# hibernate - 休眠条件查询在单个查询中获得多个计数。

> ID：11122011
> 
> 赞同：0
> 
> 时间：2012-06-20T14:40:33.803
> 
> 标签：hibernate, jpa

我想知道是否有人知道如何使用休眠条件查询从单个查询中获取多个计数？

我有以下查询。

```
List<PurchaseRequest> prs = this.session.createCriteria(PurchaseRequest.class).list(); 
```

在 PurchaseRequest 中，我有一个名为 current_state 的列。我想查询所有 PurchaseRequest 行并将 current_states 分组在一起，以便我可以获得每个 current_state 的总数。

状态看起来像这样，创建者、授权者、转让者。等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:56:22.653

试试这个：

```
Criteria criteriaPurchaseRequest=this.session.createCriteria(PurchaseRequest.class);

ProjectionList projectionList = Projections.projectionList();
projectionList.add(Projections.groupProperty("current_state"));
projectionList.add(Projections.rowCount());

criteriaPurchaseRequest.setProjection(projectionList);

List results = criteriaPurchaseRequest.list(); 
```

要获得结果：

```
List results = criteriaPurchaseRequest.list();
Map currentStateMap = new HashMap();
Iterator it=results.iterator();
while (it.hasNext()){
Object obj[]=(Object[])it.next();           
     CurrentState currentState = (CurrentState )obj[0];
    currentStateMap .put(currentState.getDescription().toLowerCase(), (Integer)obj[1]);
} 
```

其中 CurrentState 是表示 current_state 列的对象（请记住，Hibernate 正在处理对象）。

# ruby-on-rails - 如果照片：标题包含在表单中，CarrierWave 和嵌套表单会保存空图像对象

> ID：11122013
> 
> 赞同：5
> 
> 时间：2012-06-20T14:40:38.660
> 
> 标签：ruby-on-rails, ruby, carrierwave

我正在寻求有关处理嵌套表单数据的一些建议，我将非常感谢任何见解。

问题是我不是 100% 确定为什么在我的模型中需要以下代码

```
 accepts_nested_attributes_for :holiday_image, allow_destroy: true, :reject_if => lambda { |a| a[:title].blank? } 
```

我不明白为什么我需要处理我的accepts_nested_attributes_for 关联：

```
:reject_if => lambda { |a| a[:title].blank? } 
```

如果我删除这个 :reject_if lambda，它将在数据库中保存一个空白的假日照片对象。我想是因为它将表单中的 :title 字段作为空字符串？

我想我的问题是，如果我想扩展我的 HolidayImage 模型以包含更多字符串，如描述、注释，我这样做是对的还是在嵌套表单中有更好的方法？

对不起，如果我不能更简洁的话。

我的简单假期应用程序。

```
# holiday.rb 
class Holiday < ActiveRecord::Base
  has_many :holiday_image
  accepts_nested_attributes_for :holiday_image, allow_destroy: true, :reject_if => lambda { |a| a[:title].blank? }

  attr_accessible :name, :content, :holiday_image_attributes

end 
```

我正在使用 CarrierWave 进行图像上传。

```
# holiday_image.rb 
class HolidayImage < ActiveRecord::Base
  belongs_to :holiday
  attr_accessible :holiday_id, :image, :title

  mount_uploader :image, ImageUploader
end 
```

在我的 _form 部分里面有一个 field_for 块

```
<h3>Photo gallery</h3>
<%= f.fields_for :holiday_image do |holiday_image| %>
<% if holiday_image.object.new_record? %>

  <%= holiday_image.label :title, "Image Title" %>
  <%= holiday_image.text_field :title %>
  <%= holiday_image.file_field :image %>

<% else %>

  Title: <%= holiday_image.object.title %>
  <%= image_tag(holiday_image.object.image.url(:thumb)) %>
  Tick to delete: <%= holiday_image.check_box :_destroy %>

<% end %> 
```

再次感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:49:47.040

`accepts_nested_attributes_for`通常用于在批量分配期间构建子代（创建新记录时，构建任何关联模型时）。例如，如果您有一个类似`User`which的模型`has_many` `UserPhotos`，您可以`UserPhotos`在创建 a 期间获取多个模型`User`，并将它们全部建立在`User`创建之上。

我认为您不需要处理嵌套属性，因为您只是`ImageUploader`在单个模型 ( ) 上安装单个图像 ( `HolidayImage`)。这为模型提供`HolidayImage`了单个字段 ，`:image`CarrierWave 将使用该字段来挂载`ImageUploader`.

有几种方法可以处理这个问题，但这里有一些你应该知道的基本信息：

1.  您可以使用`validates_presence_of :image`来确保`:image`存在。这是有效的，因为挂载的上传器实现了`present?`验证 API 使用的方法（请参阅 Carrier Wave Wiki on [Validating uploads with ActiveRecord](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-Validate-uploads-with-Active-Record)）。这样您就不必测试是否设置了标题，而是可以在允许创建模型之前测试图像是否已上传。当然，您应该根据需要处理失败的验证。

2.  你可以添加一个`before_save`你想做的任何事情，它可以询问 CarrierWave 图像是否存在或刚刚上传。在您的情况下，您可以调用`image.present?`和分别在您的模型`image_changed?`中对此进行测试。`HolidayImage`有关示例，请参阅[此 CarrierWave 操作方法](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-Store-the-uploaded-file-size-and-content-type)。

3.  如果您想以嵌套形式接受多个图像，请参阅[此 CarrierWave](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-Making-uploads-work-across-form-redisplays-with-accept_nested_attributes_for)使用方法`accept_nested_attributes_for`。

# c - Xcode 的 dispatch_after 导致双重到 int64_t 转换警告

> ID：11122016
> 
> 赞同：1
> 
> 时间：2012-06-20T14:40:55.040
> 
> 标签：c, grand-central-dispatch

Xcode 的`dispatch_after`模板

```
double delayInSeconds = 2.0;
double delayInNanoSeconds = delayInSeconds * NSEC_PER_SEC;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInNanoSeconds);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
}); 
```

导致以下警告

> 隐式转换将浮点数转换为整数：“double”到“int64_t”（又名“long long”）

因为

`delayInNanoSeconds`从 a隐式转换`double`为 an`int64_t`

这有多糟糕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:06:52.463

一旦您将时间从秒（以 表示`delayInSeconds`）转换为纳秒（以 表示`delayInNanoSeconds`），您就不需要 a 的额外精度，`double`并且转换为 a 是安全的`long long`。您可以在调用中将其转换为`dispatch_time()`：

```
double delayInSeconds = 2.0;
double delayInNanoSeconds = delayInSeconds * NSEC_PER_SEC;

dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW,
                                        (int64_t)delayInNanoSeconds);

dispatch_after(popTime, dispatch_get_main_queue(), ^(void){}); 
```

这应该会导致警告消失。或者，您可以更改`delayInNanoSeconds`.

# asp.net - 使用 facebook API 在我的网站中邀请 facebook 朋友

> ID：11122017
> 
> 赞同：1
> 
> 时间：2012-06-20T14:40:58.787
> 
> 标签：asp.net, c#-4.0, facebook-graph-api

我正在用 C# 开发一个网站，使用 Facebook API 并登录用户的朋友列表。我将此列表与复选框、朋友图片、姓名和用户 ID 绑定在 Datalist 中。

当我选中一些复选框并单击一个按钮时，我想向选中的朋友发送某种邀请。我想通过私人消息、通知或任何其他解决方案（但*不在*用户的墙上）发送邀请。这可能吗？

我检查了所有已经在 Stackoverflow 中的帖子。并且还检查了这个[http://www.fbrell.com/xfbml/fb:server-fbml-multi-friend-selector](http://www.fbrell.com/xfbml/fb:server-fbml-multi-friend-selector)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:05:23.530

您要查找的内容称为`"App-generated Requests"`. 这些是从您的应用程序内部发送的请求，无需您的用户查看[请求对话框或对其进行操作。](https://developers.facebook.com/docs/reference/dialogs/requests/)

以下代码取自 Facebook 文档 - [https://developers.facebook.com/docs/channels/#requests](https://developers.facebook.com/docs/channels/#requests)

```
<?php 

  $app_id = YOUR_APP_ID;
  $app_secret = YOUR_APP_SECRET;

  $token_url = "https://graph.facebook.com/oauth/access_token?" .
    "client_id=" . $app_id .
    "&client_secret=" . $app_secret .
    "&grant_type=client_credentials";

  $app_access_token = file_get_contents($token_url);

  $user_id = THE_CURRENT_USER_ID;

  $apprequest_url ="https://graph.facebook.com/" .
    $user_id .
    "/apprequests?message='INSERT_UT8_STRING_MSG'" . 
    "&data='INSERT_STRING_DATA'&"  .   
    $app_access_token . "&method=post";

  $result = file_get_contents($apprequest_url);
  echo("App Request sent?", $result);
?> 
```

> 发送后，用户收到的新请求将作为计数器显示在应用程序的书签上，并且还会在相应仪表板旁边增加计数器。

代码在 PHP 中，但它使用的是非常通用的`file_get_contents()`方法。您可以将此逻辑与任何能够发出 HTTP 请求的语言一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:18:32.373

此代码将发布在您朋友的墙上，无论您想发布什么：

```
 for (Int32 i = 1; i < DLFbFriend.Items.Count; i++){

                CheckBox Chkbox =(CheckBox)DLFbFriend.Items[i].FindControl("chkUserID");
                if (Chkbox.Checked)
                {
                    HiddenField hdfUserId = (HiddenField)DLFbFriend.Items[i].FindControl("hdfUserID");
                    string d = hdfUserId.Value;//friend's facebook generated id,whom you want to invite
                    String link = "what ever you want to post";
                    string url1 = "https://graph.facebook.com/" + d + "/feed?access_token=" + Request.QueryString["access_token"] + "&link=" + link + "&from=" + Session["Pinny_USER"].ToString().Split('~')[0] + "&name=Register with Pinny&message=Your friend invites you&picture=http://168.144.124.15/images/logoPinny.jpeg";
                    HttpWebRequest request1 = (HttpWebRequest)WebRequest.Create(url1);
                    request1.Method = "POST";
                    // execute the request
                    HttpWebResponse response1 = (HttpWebResponse)request1.GetResponse();

                    // we will read data via the response stream
                    System.IO.Stream ReceiveStream1 = response1.GetResponseStream();
                    StreamReader readStream1 = new StreamReader(ReceiveStream1);
                    string json1 = readStream1.ReadToEnd();
                    countinvited += 1;
                }
            } 
```

# javascript - iPad上的jQuery点击事件无法正常工作

> ID：11122018
> 
> 赞同：2
> 
> 时间：2012-06-20T14:41:06.317
> 
> 标签：javascript, jquery, ios, safari, coffeescript

点击事件应该可以正常工作：

```
 subMenu = $(".sub-menu")
  //....
  subMenu.show()
  $("a.mobile").click (e) ->
      menuContainer.toggle()
      e.preventDefault() 
```

这应该在单击/点击时切换菜单。奇怪的是，它在第​​一次打开和关闭时做得很好。从第二次开始，要打开，我必须点击“a.mobile”两次。我试过绑定，还有很多其他的选择。CSS 实际上显示链接，因为它在未双击时悬停。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:48:40.600

我不是 100% 确定 .click() 函数，但是我使用 .on('click') 处理我的应用程序上的事件，它在任何地方都可以工作（包括`IPads`）。尽管如此，正如评论所建议的那样，也许其他地方有一些东西阻止点击按您的预期工作。

# c# - 按值传递对象，然后按引用传递

> ID：11122030
> 
> 赞同：0
> 
> 时间：2012-06-20T14:41:40.883
> 
> 标签：c#, .net, pass-by-reference, pass-by-value

我有以下代码：

```
 static void Main(string[] args)
    {
        myclass c = new myclass();

        c.test1 = 1;

        myclass c2 = TestPassByValByRef(c);

        Console.WriteLine("c.Test1: {0}", c.test1);
        Console.WriteLine("c2.Test1: {0}", c2.test1);
        Console.ReadLine();
    }

    private static myclass TestPassByValByRef(myclass c)
    {
        Console.WriteLine("Before NowPassByRef c.Test1: {0}", c.test1);
        NowPassByRef(ref c);
        Console.WriteLine("After NowPassByRef c.Test1: {0}", c.test1);

        return c;
    }

    private static void NowPassByRef(ref myclass c)
    {
        c = new myclass();
        c.test1 = 10;
        c.test2 = 25;
    } 
```

输出是 c2 保留更改的值，而 c 没有。我的问题是：`c`in会发生什么`TestPassByValByRef`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:45:37.903

当您调用时`TestPassByValByRef`，您的对象有两个引用 - 引用 in`Main`和参数引用 to `TestPassByValByRef`。`struct`这是因为在 C# 'by value' 中传递引用类型（不是 a 的任何内容）实际上是按值传递*引用*，而不是对象本身。因此，引用被复制，现在有两个对原始对象的引用。

在调用 之后`NowPassByRef`，`TestPassByValByRef`引用的副本已被对 的新实例的引用覆盖`myclass`，但由于`Main`对象中的引用仍然不符合垃圾回收条件。

所以，“发生了什么”的简短回答是“什么都没有”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:49:36.150

```
static void Main(string[] args)
{
    myclass c = new myclass();

    c.test1 = 1;

    myclass c2 = TestPassByValByRef(c);

    Console.WriteLine("c.Test1: {0}", c.test1);
    Console.WriteLine("c2.Test1: {0}", c2.test1);
    Console.ReadLine();
} 
```

`main`包含两个引用，这两个引用都可以引用 type 的对象`myclass`。`c`在 之前初始化`TestPassByValByRef`，`c2`由该方法的返回值初始化。

```
private static myclass TestPassByValByRef(myclass c)
{
    Console.WriteLine("Before NowPassByRef c.Test1: {0}", c.test1);
    NowPassByRef(ref c);
    Console.WriteLine("After NowPassByRef c.Test1: {0}", c.test1);

    return c;
} 
```

`TestPassByValByRef`包含一个名为`c`. 它最初包含作为参数传递给它的引用的**副本**（因为该参数是按值传递的）。然后通过引用传递*此*`NowPassByRef`引用并返回。

```
private static void NowPassByRef(ref myclass c)
{
    c = new myclass();
    c.test1 = 10;
    c.test2 = 25;
} 
```

`NowPassByRef``c`与其调用方法共享一个引用。它在返回之前立即将其重新分配给一个新值。

* * *

你期望会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:43:51.663

在第一种情况下，您将 a 值传递给**您**`reference`的对象。

因此，当您*在第一种情况下*make`new`时，您会重新初始化 的**副本**，`reference`因此它会失去与原始对象的关系。

在第二种情况下，您传递 a`reference` **本身**，因此重新初始化它`new`也会更改它指向的内存位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T14:48:00.520

在您的以下代码中，您`c = new myclass();`创建一个`object c`不指向传递的新内存引用。因此，您不会将更改反映到您创建的第一个对象。

```
private static void NowPassByRef(ref myclass c)
    {
        c = new myclass();  // it will create new memory reference
        c.test1 = 10;
        c.test2 = 25;
    } 
```

所以它会显示 c 没有改变并输出为：

```
Before NowPassByRef c.Test1: 1
After NowPassByRef c.Test1: 10
c.Test1: 1
c2.Test1: 10 
```

有一段时间，只需`c = new myclass();`在方法中注释 ，它就会反映对`object c`. 它将消除您对引用指针等的疑问。

```
private static void NowPassByRef(ref myclass c)
        {
            //c = new myclass();  // it will create new memory reference
            c.test1 = 10;
            c.test2 = 25;
        } 
```

现在输出将是：

```
Before NowPassByRef c.Test1: 1
After NowPassByRef c.Test1: 10
c.Test1: 10
c2.Test1: 10 
```

> 我认为这 - [C# 通过值/引用传递？](https://stackoverflow.com/questions/436986/c-sharp-pass-by-value-ref) 必须是您对问题的解释信息，并查看 John Skeet 关于[C# 中的参数传递](http://www.yoda.arachsys.com/csharp/parameters.html)的文章。

# java - Spring Transactional DAO，吞下异常

> ID：11122031
> 
> 赞同：0
> 
> 时间：2012-06-20T14:41:41.340
> 
> 标签：java, spring, aop, dao

我使用 Hibernate 作为 ORM，并且我的 DAO 用`@Repository`.

我已经以这种方式配置了 AOP 建议。

```
<tx:advice id="txAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="save*" propagation="REQUIRED" />
        <tx:method name="edit*" propagation="REQUIRED" />
        <tx:method name="*" read-only="true" />
    </tx:attributes>
</tx:advice> 
```

它们工作正常，只是如果在这些方法中发生任何 sql 异常，它们不会被捕获，因此不会被打印！我猜是因为事务在执行该方法后提交，但我不确定。

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:06:12.123

看看[这个类似的帖子](https://stackoverflow.com/questions/4626728/spring-3-simplemappingexceptionresolver-warnlogcategory-log4j)。它建议扩展 SimpleMappingExceptionResolver

```
public class LoggingExceptionResolver extends SimpleMappingExceptionResolver {
private Logger logger = LoggerFactory.getLogger(LoggingExceptionResolver.class);

@Override
protected void logException(Exception ex, HttpServletRequest request) {
    this.logger.warn(buildLogMessage(ex, request), ex);
} 
```

# c# - 如何将 ObservableCollection 中的数据存储到 SQL 数据库中？

> ID：11122034
> 
> 赞同：0
> 
> 时间：2012-06-20T14:41:55.923
> 
> 标签：c#, wpf, wcf, windows-phone-7

我在 ObservableCollection 中有一些记录。

```
void proxy_AddPayNowOrderCompleted(object sender, AddPayNowOrderCompletedEventArgs e)
{
    listBox1.ItemsSource = e.Result;
    ObservableCollection<Product> Products = this.listBox1.ItemsSource as ObservableCollection<Product>;
} 
```

我的产品实体将有 prodid、prodname、prodrice。ObservableCollection 中会有很多这样的实体。我想将 ObservableCollection 中的所有记录保存到我的 SQL 数据库中。我正在使用此代码将一条记录保存到数据库中。

```
private void btn1_Click(object sender, RoutedEventArgs e)
{
    proxy.AddPayNowOrderCompleted += new EventHandler<AddPayNowOrderCompletedEventArgs>(proxy_AddPayNowOrderCompleted);
    proxy.AddPayNowOrderAsync(orderdate, prodid, orderprodname, orderprice, orderstatus, custemail, paymentdate);
} 
```

如何将所有记录存储在 ObservableCollection 中并将它们插入数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:04:59.450

像这样的东西应该工作：

```
ObservableCollection<Product> Products = this.listBox1.ItemsSource as ObservableCollection<Product>;
proxy.AddPayNowOrderCompleted += new EventHandler<AddPayNowOrderCompletedEventArgs>(proxy_AddPayNowOrderCompleted);
foreach (Product p in Products)
{
    proxy.AddPayNowOrderAsync(p.orderdate, p.prodid, p.orderprodname, p.orderprice, p.orderstatus, p.custemail, p.paymentdate);
} 
```

您的服务可能有一种方法允许您一次传递多个产品，这比进行所有这些单独的往返旅行要高效得多，但是如果没有有关代理类中成员的更多信息，则无法确定。

# javascript - 加载时未定义功能窗口

> ID：11122045
> 
> 赞同：0
> 
> 时间：2012-06-20T14:42:38.233
> 
> 标签：javascript, function

这段代码有什么问题

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>test</title>
        <script type="text/javascript" charset="utf-8">

            window.onload = function()
            {
                function addText() 
                {
                        var el = document.createElement('p');
                        el.innerHTML = 'This is test';
                        document.getElementById('b').appendChild(el);
                }

            }
        </script>
    </head>
    <body id="b">
        <a href="#" onclick="addText();">c</a>
    </body>
</html> 
```

当我单击锚点时，我得到 addText 未定义。当我将 addText 函数放在 windowl.onload 匿名函数之外时，它可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:44:21.710

我认为您正在创建的函数是 window.onload 上匿名函数的闭包，因此主范围看不到它。

我不直接了解 JS，但是在像 Clojure 这样的函数式语言中，您可以为函数命名以供其自我引用，但如果您不将其绑定到名称，它仍然是一个匿名函数。当您将其放在函数之外时，自引用名称也是该函数的绑定名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:45:55.283

您正在另一个函数中定义一个函数，然后尝试调用该内部函数。

从 window.onload 函数中删除 addText() 的声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:46:02.927

如果您在另一个函数 (Y) 中定义了一个函数 (X)（使用函数声明），那么 X 的作用域将限定为 Y，并且无法在其外部访问（除非您将其复制到全局变量中）。

我看不出定义该函数的任何理由`onload`，所以只需摆脱它的 onload 包装器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T14:46:48.777

`addText`仅在创建它的范围内可见。将其设置为您分配给的匿名函数，`window.addText`它将按预期工作：

```
window.addText = function() { ... 
```

# ios - 配置文件与默认钥匙串中的任何有效证书/私钥对不匹配

> ID：11122046
> 
> 赞同：14
> 
> 时间：2012-06-20T14:42:50.797
> 
> 标签：ios, ios-provisioning

我正在为一家公司开发应用程序，他们给了我管理员角色，因此我可以编辑配置文件。我在 XCode 上收到“找不到分发文件的有效签名身份”和“配置文件与默认钥匙串中的任何有效证书/私钥对不匹配”错误，通常我会通过从我的 mac，但公司有其他应用程序，我不能冒险撤销它，因为单击撤销会给出以下警告。

“撤销此证书可能会使程序门户中的一个或多个配置文件失效。已安装在设备上的配置文件将继续运行，直到配置文件过期。”

有没有办法在不撤销分发证书的情况下添加新的密钥对，撤销当前证书会影响其他应用程序还是有任何其他解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-20T19:26:07.220

您需要与分发证书关联的私钥。

向为公司创建分发证书的人请求与分发证书关联的私钥。让他从他的钥匙串中导出私钥！要求他记得在右键单击并将其导出为.p12之前将分发证书和私钥一起[选择并在右键单击并将其导出为.p12之前将分发证书和私钥一起选择](https://i.stack.imgur.com/Dl74h.png)

打开 .p12 后，它应该与分发证书配对（您的钥匙串中应该已经有 .cer 文件）。您的配置文件应该可以正常工作！

让我知道它是否有效！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T12:29:30.977

我遇到了同样的问题，出于某种奇怪的原因，clearwater82 建议的方法不起作用。

但我在苹果开发者网站上找到了这个文档。可能对其他人有帮助。这只是两个简单的步骤。

[第一步：将代码签名资产导出到文件系统](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/export_signing_assets.html#//apple_ref/doc/uid/TP40010392-CH8)

[第二步：从文件系统导入代码签名资产](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/import_signing_assets.html#//apple_ref/doc/uid/TP40010392-CH9)

希望这对某人有帮助！

# php - Phpbb论坛以相同的主题加入

> ID：11122049
> 
> 赞同：0
> 
> 时间：2012-06-20T14:43:03.553
> 
> 标签：php, mysql, database-connection, forum, phpbb

我正在处理特殊任务。作为 PHPBB 3.0.10 论坛的用户、版主和管理员，我正在尝试解决线索：

如何从另一个论坛添加到我的论坛主题和用户。问题是第二个论坛数据库和文件来自不同的服务器。当然我有服务器和数据库的钥匙。

我正在阅读如何在 php 中创建双重连接的指南，但我不知道如何为 phpbb 论坛转换它。有可能以某种方式做吗？这种情况没有特殊的模组

谁能告诉我应该采取哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:59:37.930

我曾经用 phpBB 2 做过类似的事情——当时他们有一篇很棒的知识库文章描述了如何做到这一点。[我为你挖了链接](http://www.phpbb.com/kb/article/share-members%2Bsessions%2Bbans%2Bacross-multiple-phpbb-boards/)。不过，这篇文章写于 2007 年 - 不确定与 phpBB 3 的相关性如何。无论如何，可能值得一看。

但是，我想总体思路是一样的。在一个板上，为另一块板定义 MySQL 连接信息，并编辑`constants.php`以指向它。这应该有效地使板#2 从#1 中提取数据。

# javascript - 动态创建的下拉列表和 onChange jquery

> ID：11122051
> 
> 赞同：0
> 
> 时间：2012-06-20T14:43:06.240
> 
> 标签：javascript, jquery, asp.net-mvc-3

我的应用程序在 ASP.net MVC3 中。

我有一个元素表。一个元素可以有子元素，但子元素不能。在表中，如果元素有子元素，它们会列在 ul 中。用户可以选择列表中的项目以将其从该父项中删除。发生这种情况时，该元素将从列表中删除，并呈现一个局部视图，该视图在表中为该元素创建一个新行，因为它不再是子元素。不是子元素且没有自己的子元素的元素可以通过从下拉列表中选择要与其组合的元素来与其他元素组合。我的问题是，当您从父级中删除元素时，为部分视图中的表行创建的下拉列表没有所需的功能。

我认为这可能是因为我的用于组合元素的 javascript 函数在 中，`$(document).ready(function () {...});`并且在页面创建时没有下拉菜单。

有没有办法将 my 添加`$('.combineDropdown').change(function () {...});`到动态创建的元素中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:45:30.823

您需要使用[bind](http://api.jquery.com/bind/)、[on](http://api.jquery.com/on/)、[delegate](http://api.jquery.com/delegate/)或[其中之一](http://api.jquery.com/one/)（取决于您的需要）。每次添加新元素时都需要这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:46:19.577

为什么要为此使用 jQuery？`onChange`您可以通过输出带有指向要执行的 javascript 函数的 html 属性的下拉列表来获得相同的结果。

例子：

```
<select onChange="myFunction(this)"><option>...</option></select> 
```

# c# - DisallowApplicationBaseProbing = true 时需要连接 AssemblyResolve 事件

> ID：11122052
> 
> 赞同：4
> 
> 时间：2012-06-20T14:43:07.280
> 
> 标签：c#, assembly-resolution

当我设置 DisallowApplicationBaseProbing = true 时，我需要在我创建的 AppDomain 上连接一个 AssemblyResolve 事件。我这样做的原因是强制运行时调用它需要解析程序集的 AssemblyResolve 事件，而不是先探测。这样，另一个开发人员不能只将 MyDllName.dll 粘贴在 ApplicationBase 目录中并覆盖我想在 AssemblyResolve 事件中加载的程序集。

这样做的问题如下......

```
 class Program
  {
 static void Main()
 {
    AppDomainSetup ads = new AppDomainSetup();
    ads.DisallowApplicationBaseProbing = true;
    AppDomain appDomain = AppDomain.CreateDomain("SomeDomain", null, ads);
    appDomain.AssemblyResolve += OnAssemblyResolve;
    appDomain.DoCallBack(target);
 }

 static System.Reflection.Assembly OnAssemblyResolve(object sender, ResolveEventArgs args)
 {
    Console.WriteLine("Hello");
    return null;

 }

 private static void target()
 {
    Console.WriteLine(AppDomain.CurrentDomain);
 }
  } 
```

代码永远不会超过 += OnAssemblyResolve 行。

当代码尝试执行时，新的应用程序域会尝试解析我正在执行的程序集。因为 DisallowApplicationBaseProbing = true，它不知道在哪里可以找到该程序集。我似乎有鸡和蛋的问题。它需要解析我的程序集以连接程序集解析器，但需要程序集解析器来解析我的程序集。

感谢您的任何帮助。

-麦克风

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-31T09:22:25.003

通过大量实验，我得到了以下工作：

```
internal class AssemblyResolver : MarshalByRefObject
{
  static internal void Register(AppDomain domain)
  {
    AssemblyResolver resolver =
        domain.CreateInstanceFromAndUnwrap(
          Assembly.GetExecutingAssembly().Location,
          typeof(AssemblyResolver).FullName) as AssemblyResolver;

    resolver.RegisterDomain(domain);
  }

  private void RegisterDomain(AppDomain domain)
  {
    domain.AssemblyResolve += ResolveAssembly;
    domain.AssemblyLoad += LoadAssembly;
  }

  private Assembly ResolveAssembly(object sender, ResolveEventArgs args)
  {
    // implement assembly resolving here
    return null;
  }

  private void LoadAssembly(object sender, AssemblyLoadEventArgs args)
  {
    // implement assembly loading here
  }
} 
```

域是这样创建的：

```
 AppDomainSetup setupInfo = AppDomain.CurrentDomain.SetupInformation;
    setupInfo.DisallowApplicationBaseProbing = true;

    domain = AppDomain.CreateDomain("Domain name. ", null, setupInfo);
    AssemblyResolver.Register(domain); 
```

抱歉，我无法共享用于解析和加载程序集的代码。首先，它还不起作用。其次，在这种情况下与公众分享会太多太具体。

我将引导一个对象结构，该结构与从单个文件反序列化所需的程序集一起序列化。为此，我真的应该直接进入 .dll 地狱。

# sql - Oracle 新手，键入以从两组中检索数据，比较并有条件地插入

> ID：11122053
> 
> 赞同：0
> 
> 时间：2012-06-20T14:43:12.167
> 
> 标签：sql, database, oracle

我正在尝试构建一个查询以获取表 1 中的所有行，然后检查表 2 中是否存在相应的行，如果存在，则提取一些数据，加入并插入表 3。这在伪代码中更有意义 -所以这就是我想要做的，在程序上，我只是不确定如何在 PL/SQL 中实现它。

```
For all rows in T1:
    For all rows in T2:
        if (T1.mycolumn - T2.othercolumn) > 0:
            INSERT INTO T3 (foo, bar) VALUES T1.foo, T2.bar 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:49:44.400

听起来你在描述类似的东西

```
INSERT INTO t3( foo, bar )
  SELECT t1.foo,
         t2.bar
    FROM t1
         LEFT OUTER JOIN t2 ON (t1.mycolumn > t2.othercolumn) 
```

不过，我不确定这实际上是您想要的。一些样本数据和预期的输出会有所帮助。在您所描述的内容中，`t1.foo`值可能会被多次插入`t3`，因为它们匹配`t2`. 通常，会有某种常见的键`t1`，`t2`您将使用它来确定是否存在适当的`t2`行并且`t1.mycolumn > t2.otherColumn`条件只是另一个谓词

```
INSERT INTO t3( foo, bar )
  SELECT t1.foo,
         t2.bar
    FROM t1
         LEFT OUTER JOIN t2 ON (    t1.someKey = t2.someKey 
                                AND t1.mycolumn > t2.othercolumn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:48:27.530

```
insert into T3 (foo, bar)
select T1.foo, T2.bar
from T1, T2
where T1.mycolumn - T2.othercolumn > 0 
```

# sql - 使用带参数的 Database.ExecuteSqlCommand 的正确语法是什么？

> ID：11122054
> 
> 赞同：10
> 
> 时间：2012-06-20T14:43:13.603
> 
> 标签：sql, sql-server, entity-framework

我使用 Entity Framework 4.2 并想调用具有输入参数的存储过程。我`Database.ExecuteSqlCommand`用来调用存储过程。

但是，文档缺少正确的调用语法，以便正确映射参数。我的 google-foo 让我失望了，任何帮助都将不胜感激。

即我有一个程序

```
procedure SetElementFrequency
  @ElementTypeID integer,
  @Frequency float
as ... 
```

我试过用

```
Database.ExecuteSqlCommand("exec SetElementFrequency @p0 @p1", 
                            elementType, frequency); 
```

和

```
Database.ExecuteSqlCommand("exec SetElementFrequency {0} {1}", 
                            elementType, frequency); 
```

但它们都失败，出现错误*Incorrect syntax near '@p1'。*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T17:06:29.743

根据您的底层数据库提供程序，您可以使用以下任一方法。

```
Database.ExecuteSqlCommand(
    "exec SetElementFrequency {0}, {1}",
    elementType, frequency); 
```

或者

```
Database.ExecuteSqlCommand("exec SetElementFrequency ?, ?", elementType, frequency); 
```

您还可以指定`elementType`和`frequency`as [`DbParameter`](http://msdn.microsoft.com/en-us/library/system.data.common.dbparameter.aspx)-based 对象以通过该[`ParameterName`](http://msdn.microsoft.com/en-us/library/system.data.common.dbparameter.parametername.aspx)属性提供您自己的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T14:48:04.147

尝试这样的事情：

```
context.Database.ExecuteSqlCommand("delete MasterSmsCampaignCertificateInfo where      MasterSmsCampaignGuid = @p0 and CertificateId = @p1",
TheCampaignGuid,
certInfo.CertificateId); 
```

看看这个类似的问题： [ExecuteSqlCommand with output parameter](https://stackoverflow.com/questions/6861737/executesqlcommand-with-output-parameter) 最好的问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T14:49:12.987

```
var sql = @"Update [User] SET FirstName = {0} WHERE Id = {1}";
ctx.Database.ExecuteSqlCommand(sql, firstName, id); 
```

# javascript - 模拟点击还是手动设置模型属性？

> ID：11122056
> 
> 赞同：1
> 
> 时间：2012-06-20T14:43:23.957
> 
> 标签：javascript, model-view-controller, backbone.js, backbone-events

我有一个 Backbone.js 应用程序，它允许用户基于大型数据集创建图形。有几个选项提供给用户以允许图形定制。用户可以单击的一些选项在模型上设置多个属性。

有时，我们必须通过从其他应用程序加载或导入图形来以编程方式创建其中一些图形。我不确定是触发点击事件来设置这些属性还是直接设置模型属性。一方面，触发点击事件是干的，但我不确定这是否有效/可读或违反 MVC。

**模拟点击以设置模型属性是不好的做法吗？或者我应该手动设置模型的属性？**

代码：查看

```
...
events: {
  "click .defaultGraph": "setDefaultGraph"
}

, setDefaultGraph: function () {
      this.model.set({
        "type": "bar"
        , "otherAttribute": "foo"
        , "anotherAttribute": "baz"
      });
    }
... 
```

我以编程方式重新创建默认图表

```
this.$(".defaultGraph").click(); 
```

或者

```
this.model.set({
  "type": "bar"
  , "otherAttribute": "foo"
  , "anotherAttribute": "baz"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:10:36.613

没关系。`click`路短而甜。所以，如果视图不会改变（我知道你不能肯定地说），那么`click`方法很好。否则，您可能想采用后一种方式。

# java - awt.properties 在哪里，以及如何在 Java 插件中提供它的本地化版本

> ID：11122062
> 
> 赞同：2
> 
> 时间：2012-06-20T14:43:53.900
> 
> 标签：java, swing, localization, awt

在 Java 插件中，我以 . 显示`KeyEvent.getKeyText(VK_CTRL)`，`Action`但我希望它以不同的语言显示，具体取决于用户的语言环境。例如，在英语中是`CTRL`，但在德语中是`Strg`。在阅读[getKeyText](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/KeyEvent.html#getKeyText%28int%29)的文档时，它说

> 返回描述修饰键的字符串，例如“Shift”或“Ctrl+Shift”。这些字符串可以通过更改 **awt.properties**文件进行本地化。

我的问题是..

1.  jre 插件是否包含不同语言的翻译
2.  如果我需要提供翻译，如何将它们包含在我的插件中。我是否只是`awt_de.properties`在 jar 的根目录中添加一个？是否需要放在其他地方。

在搜索过程中，`awt.properties`除了书籍和 javadoc 中对它的引用以及一些关于在您的主目录中更新它的参考之外，我几乎找不到什么，因为这是一个插件，所以我不能这样做。

**回答**

1.  JRE 实际上确实提供了其他语言的翻译。
2.  我仍然不知道在哪里找到“awt.properties”，但这没关系，因为插件有翻译。

对我来说问题是2倍...

1.  您不能从 applet 使用 Locale.setDefault()，虽然 JComponent.setDefaultLocale() 确实为大多数事情设置了 Locale，但仍有一些事情，如使用 Locale.getDefault 的 KeyEvent.getKeyText。
2.  小程序忽略浏览器区域设置并使用操作系统区域设置。

因此，解决方法是最终用户必须将他们的操作系统区域设置设置为德语（在这种情况下），您会认为德国用户已经是这种情况。

# asp.net-mvc-3 - 选择菜单在 jquery mobile 的 ipad 中的单击事件上不起作用/打开

> ID：11122065
> 
> 赞同：0
> 
> 时间：2012-06-20T14:43:59.663
> 
> 标签：asp.net-mvc-3, jquery-mobile, jquery-selectors, drop-down-menu

我在 jquery.mobile-1.1.0.min.js 版本中创建了一个 jquery 移动应用程序，其中一个页面上有三个选择菜单，每个菜单使用`data-native-menu="false"`和在新窗口中打开

```
$(document).bind('mobileinit',function(){
    $.mobile.selectmenu.prototype.options.nativeMenu = false;
}); 
```

这是我用来创建选择菜单的代码：

```
<div data-role="fieldcontain" style="white-space: normal;">
   @Html.DropDownList("a", (IEnumerable<SelectListItem>)ViewData["b"], "c",new  Dictionary<string, object>{{"id", "a"},{"data-shadow","false"},{"data-iconshadow","false"},{"data-native-menu","false"},{"data-theme","a"}})
</div> 
```

此下拉菜单在 ipad 上轻按两三下后响应。

请为此提出可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:21:51.993

我必须将元素的 CSS 设置为

```
style="cursor:pointer" 
```

为了完全捕捉 iPad 上的点击/点击事件。

# javascript - 可以在生产中使用的 JavaScript 库，例如 Upshot

> ID：11122072
> 
> 赞同：1
> 
> 时间：2012-06-20T14:44:09.933
> 
> 标签：javascript, breeze

Steven Sanderson 对 Upshot 的介绍给我留下了深刻的印象，但遗憾的是我认为它还没有准备好用于生产目的。

还有哪些其他类似用途的图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T23:31:57.163

我是 BreezeJS 的产品经理，可以肯定地说，我们 Breeze 已经准备好投入生产。如今，人们正在使用 Breeze 构建生产应用程序。主要 API 稳定，缺陷数量少，文档和支持到位。与每种技术中的每个库一样，边界上的功能要么不完整，要么不断变化。我们清楚地将这些标记为测试版。否则......你很高兴。

当然，每个人都有权就生产准备情况或是否适合某个目的发表意见，我尊重这些意见。只是想明确我们在这个问题上的立场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:26:00.723

通常`Breeze js`与结果一起提到 - 我们已经广泛使用了结果，但它还没有准备好用于生产。

# java - Java中的静态函数内联

> ID：11122073
> 
> 赞同：5
> 
> 时间：2012-06-20T14:44:17.437
> 
> 标签：java, optimization, inlining

**第一个代码**：

```
public static int pitagoras(int a, int b)
{
    return (int) Math.sqrt(a*a + b*b);
}

public static int distance(int x, int y, int x2, int y2)
{
    return pitagoras(x - x2, y - y2);
} 
```

`distance`经常被调用。当我用它编译它`javac`然后用它反编译时，`javap -c`我得到了这个字节码：

```
public static int pitagoras(int, int);
  Code:
   0:   iload_0
   1:   iload_0
   2:   imul
   3:   iload_1
   4:   iload_1
   5:   imul
   6:   iadd
   7:   i2d
   8:   invokestatic    #24; //Method java/lang/Math.sqrt:(D)D
   11:  d2i
   12:  ireturn

public static int distance(int, int, int, int);
  Code:
   0:   iload_0
   1:   iload_2
   2:   isub
   3:   iload_1
   4:   iload_3
   5:   isub
   6:   invokestatic    #34; //Method pitagoras:(II)I
   9:   ireturn 
```

似乎`javac`没有优化第二个功能，`distance`.

**我认为第二个代码**更快：

```
public static int distance(int x, int y, int x2, int y2)
{
    return (int) Math.sqrt((x - x2) * (x - x2) + (y - y2) * (y - y2));
} 
```

及其字节码：

```
public static int distance(int, int, int, int);
  Code:
   0:   iload_0
   1:   iload_2
   2:   isub
   3:   iload_0
   4:   iload_2
   5:   isub
   6:   imul
   7:   iload_1
   8:   iload_3
   9:   isub
   10:  iload_1
   11:  iload_3
   12:  isub
   13:  imul
   14:  iadd
   15:  i2d
   16:  invokestatic    #24; //Method java/lang/Math.sqrt:(D)D
   19:  d2i
   20:  ireturn 
```

是不是`invokestatic`快到和内联静态函数一样？为什么`javac`没有优化这个？或者它实际上是经过优化的，这两个代码会给出相同的结果，但我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T14:47:48.713

`javac`不优化。这就是 JVM 实现（通常是 HotSpot）的工作。

过去有一些优化，`javac`但它们使代码复杂化，据称倾向于安排代码以抑制 HotSpot 优化。

HotSpot 优化通常在数千次迭代后动态完成（可配置，默认取决于使用“客户端”、“服务器”还是分层版本）。

语言规范需要做一些事情`javac`，例如内联常量和组合文字字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T14:48:33.087

Java 语言没有定义内联函数。许多（也许是大多数）即时 (JIT) 编译器将动态地（在运行时）将此类静态函数调用替换为内联代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:49:12.567

我相信两个版本的性能会相似，因为 JVM 使用 JIT 来提高性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T14:49:32.633

您正在寻找的优化类型（内联）不一定发生在编译时，但准时 (JIT) 编译器很可能会在运行时执行它。

因此，您不太可能看到内联发生在字节码级别，更有可能的是，它会在程序执行期间发生在本机代码级别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T15:42:53.283

给出的答案是正确的：javac 没有内联方法，因为它可能不是最好的做法。

假设该`distance()`方法偶尔被调用一次，但不是很频繁。通过内联和其他东西来优化它`pitagoras()`会减慢几乎不使用的东西的编译速度。

另一方面，Hotspot 知道一个方法何时被调用以及被调用了多少次。如果该方法经常执行，那么 Hotspot 可能会内联它并将其编译为本机代码，但前提是它可以提高性能。请记住，Hotspot 是唯一**知道**优化是否是好事的组件。

另外，请注意 javac 可能会进行一项优化：它消除了死代码。考虑这个类：

```
public class Test {
public final static boolean ENABLED=false;

public static void main(String... args) { 
  if(ENABLED)
    System.out.println("Hello World");
  }
} 
```

main 方法的编译字节码是这样的：

```
public static void main(java.lang.String[]);
  Code:
   0:   return 
```

=> javac 检测到`println`无法到达该行并将其删除。

# performance - 遍历 Scripting.Dictionary/Collection 对象

> ID：11122074
> 
> 赞同：2
> 
> 时间：2012-06-20T14:44:18.730
> 
> 标签：performance, vba, collections, dictionary, iteration

在过去的几年里，我有一个项目进行了点点滴滴的更改和修改，并且从一个代码模块到下一个代码模块的大部分内容都是非标准化的。在某些情况下，我使用了一个`Scripting.Dictionary`对象，而在其他情况下，我有一个`Collection`对象。对于其中的每一个，有时会按 count （即`For i = 1 to Obj.Count`）进行迭代，有时会按`For...Each`.

我想尽可能多地对这些案例应用相同的逻辑，以使未来的变化希望更加无缝，但我不确定哪种方法最好。（我相信为一种或另一种方法制作了一些特定的案例，但我也很确定某些代码可以使用任何可用的方法。）

我尝试创建一个测试子来帮助我确定哪种方法效果最好，但结果有些不一致。`Item`总体而言，循环通过a中的每个似乎`Dictionary`更快，但在某些情况下，我的测试结果显示通过`Item`a 中的每个循环`Collection`更快。差异可能取决于任何给定时间系统中发生的所有其他事情。

我想知道是否有人对哪种方法始终最快有明确的答案，假设循环中的所有其他方法都是相同的。或者，有什么方法可以改进我的测试子，使其在返回结果时更加一致，以便我自己回答这个问题？

我想出的测试代码：

```
Option Explicit

Sub Test_Dictionary_Iteration_Speed()

Dim Coll1 As New Collection, Coll2 As New Collection
Dim Dict1 As New Scripting.Dictionary, Dict2 As New Scripting.Dictionary, Dict3 As New Scripting.Dictionary
Dim i As Integer, j As Integer, l As Integer
Dim StartTime As Single, StopTime As Single
Dim v As Variant
Dim Obj As TestObject 'A custom Class that has only one member variable, MainVal, and no functions/subs

    For i = 0 To 32766
        Set Obj = New TestObject
        Obj.MainVal = i
        Dict1.Add CStr(i), Obj
        Dict2.Add CStr(i), Obj
        Dict3.Add CStr(i), Obj
        Coll1.Add Obj, CStr(i)
        Coll2.Add Obj, CStr(i)
    Next i

    StartTime = Timer()

    For j = 0 To Dict1.Count - 1
        l = CInt(Dict1(CStr(j)).MainVal)
        Set Obj = Dict1(CStr(l)) 'Do something useful within the loop
        Set Obj = Nothing
        Dict1.Remove CStr(l)
    Next j

    StopTime = Timer()

    Debug.Print "Dict1 for x to y: " & StopTime - StartTime

    StartTime = Timer()

    For Each v In Dict2.Items
        l = CInt(v.MainVal)
        Set Obj = Dict2(CStr(l))
        Set Obj = Nothing
        Dict2.Remove CStr(l)
    Next v

    StopTime = Timer()

    Debug.Print "Dict2 for each item: " & StopTime - StartTime

    StartTime = Timer()

    For Each v In Dict3.Keys
        l = CInt(Dict3(v).MainVal)
        Set Obj = Dict3(CStr(l))
        Set Obj = Nothing
        Dict3.Remove CStr(l)
    Next v

    StopTime = Timer()

    Debug.Print "Dict3 for each key: " & StopTime - StartTime

    '---------- Division between Dictionary and Collection

    StartTime = Timer()

    For j = 0 To Coll1.Count - 1
        l = CInt(Coll1(CStr(j)).MainVal)
        Set Obj = Coll1(CStr(l))
        Set Obj = Nothing
        Coll1.Remove CStr(l)
    Next j

    StopTime = Timer()

    Debug.Print "Coll1 for x to y: " & StopTime - StartTime

    StartTime = Timer()

    For Each v In Coll2
        l = CInt(v.MainVal)
        Set Obj = Coll2(CStr(l))
        Set Obj = Nothing
        Coll2.Remove CStr(l)
    Next v

    StopTime = Timer()

    Debug.Print "Coll2 for each item: " & StopTime - StartTime

    Debug.Print vbNewLine & "-----" & vbNewLine   

End Sub 
```

输出的真实示例，表明“最佳”选项并不总是相同：

> x 到 y 的 Dict1：0.2011719
> 每个项目的 Dict2：0.1738281
> 每个键的 Dict3：0.2167969
> x 到 y 的 Coll1：0.2050781
> 每个项目的 Coll2：**0.1386719**
> 
> * * *
> 
> Dict1 for x to y: 0.1875
> Dict2 for each item: 0.171875
> Dict3 for each key: 0.234375
> Coll1 for x to y: 0.2050781
> Coll2 for each item: **0.1542969**
> 
> * * *
> 
> Dict1 for x to y: 0.25
> Dict2 for each item: 0.21875
> Dict3 for each key: 0.265625
> Coll1 for x to y: 0.234375
> Coll2 for each item: **0.171875**
> 
> * * *
> 
> x 到 y 的 Dict1：0.265625
> 每个项目的 Dict2：**0.203125**
> 每个键的 Dict3：0.296875
> x 到 y 的 Coll1：0.234375
> 每个项目的 Coll2：0.21875
> 
> * * *
> 
> Dict1 for x to y: 0.265625
> Dict2 for each item: 0.1875
> Dict3 for each key: 0.234375
> Coll1 for x to y: 0.203125
> Coll2 for each item: **0.15625**
> 
> * * *
> 
> Dict1 for x to y: 0.28125
> Dict2 for each item: **0.1875**
> Dict3 for each key: 0.25
> Coll1 for x to y: 0.234375
> Coll2 for each item: **0.1875**
> 
> * * *
> 
> x 到 y 的 Dict1 ：0.28125
> 每个项目的 Dict2：**0.21875**
> 每个键的 Dict3：0.328125
> x 到 y 的 Coll1：0.234375
> 每个项目的 Coll2：0.234375

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:57:02.990

除非您知道给定语句或*过程*的执行时间是一个问题，否则您不应该将人力时间浪费在优化上。首先设计和调试，然后如果您认为事情太慢（可能不会），配置文件，然后才进行优化（执行时间通常会浪费在与您想象的完全不同的地方）。

`For Each`结构很好，简洁整洁。不使用它的唯一原因是，如果您要从正在循环的集合中删除项目。然后，您可能会跳过某些项目。如果您打算删除项目，请向后循环索引。

# c# - 如何修复“在 mscorlib.dll 中发生‘System.AggregateException’”

> ID：11122092
> 
> 赞同：54
> 
> 时间：2012-06-20T14:45:09.843
> 
> 标签：c#, .net, exception, aggregateexception

我在调试时收到未处理的异常，程序停止执行。调试器没有向我显示这条线，所以我不知道要修复什么。

> `System.AggregateException`发生了“ ”类型的未处理异常`mscorlib.dll`
> 
> 附加信息：通过等待任务或访问其异常属性未观察到任务的异常。结果，未观察到的异常被终结器线程重新抛出。
> 
> 无法获取本地或参数“ `<this>`”的值，因为它在此指令指针处不可用，可能是因为它已被优化掉。 `System.Threading.Tasks.TaskExceptionHolder`

如何解决此问题？

我还发现[这个问题](https://stackoverflow.com/questions/8311303/cannot-obtain-value-of-local-or-argument-as-it-is-not-available-at-this-instruct)非常相似。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-20T14:46:52.393

正如消息所说，您有一个引发未处理异常的任务。

打开 Break on All Exceptions (Debug, Exceptions) 并重新运行程序。
这将向您显示最初抛出的原始异常。

* * *

（附加注释）：在 VS2015（或更高版本）中。选择“**调试”>“选项”>“调试”>“常规**”，然后取消选择“仅启用我的代码”选项。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-20T14:50:24.617

您可以直接处理异常，这样它就不会使您的程序崩溃（捕获`AggregateException`）。您还可以查看内部异常，这将为您提供更详细的错误解释：

```
try {
    // your code 
} catch (AggregateException e) {

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-21T12:23:47.690

如果您可以轻松重现该问题，则接受的答案将起作用。但是，作为最佳实践，您应该捕获在任务中执行的任何异常（和日志记录）。否则，如果任务中发生任何意外情况，您的应用程序将崩溃。

```
Task.Factory.StartNew(x=>
   throw new Exception("I didn't account for this");
) 
```

但是，如果我们这样做，至少应用程序不会崩溃。

```
Task.Factory.StartNew(x=>
   try {
      throw new Exception("I didn't account for this");
   }
   catch(Exception ex) {
      //Log ex
   }
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-17T15:24:01.293

就我而言，我在使用 Edge.js 时遇到了这个问题——所有问题都是 C# Edge.js 函数定义中的 JavaScript 语法错误。

# google-chrome-extension - 我可以使用 chrome 扩展程序将小部件添加到我的网站吗？

> ID：11122094
> 
> 赞同：0
> 
> 时间：2012-06-20T14:45:21.120
> 
> 标签：google-chrome-extension

我正在玩 chrome 扩展，试图学习如何使用它们。

我是否可以编写一个扩展程序，每当有扩展程序的人访问它时，将一个小部件注入我的网站？您能否推荐一个我可以查看的示例应用程序或教程，其中展示了类似的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:38:52.107

您只能通过 Chrome 扩展程序注入 JavaScript 和 CSS。要注入脚本或 css，您的 manifest.json 应如下所示：

```
 {
        "name": "Website addon",
        "version": "1.0",
        "manifest_version": 1,
        "description": "Addon for your website",
        "content_scripts": [
          {
            "matches": ["*://yourWebsite.com/*", "*://*.yourWebsite.com/*"],
            "js": ["yourJS.js"]
            "css": ["yourCSS.css"]
          }
        ]
    } 
```

这会将 yourJS.js 和 yourCSS.css 添加到 yourWebsite.com 上的所有网站

以下是 google 教程的链接：[http ://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

# html - 网站位置屏蔽 - 如何隐藏加载媒体的位置？

> ID：11122098
> 
> 赞同：1
> 
> 时间：2012-06-20T14:45:39.253
> 
> 标签：html, magento, ip

我真的不知道如何问这个问题，更不用说找到答案了。让我解释：

我有一个网站 (http://www.foo.com)。我拥有一个配置为 URL 框架的域，因此当我打开[http://xyz.bar.com时，我会在](http://xyz.bar.com)[http://foo.com/xyz](http://foo.com/xyz)看到我的 Magento 网站。问题是我想完全隐藏对 foo.com 的所有引用。这样，我将它隐藏在地址栏中，但在将鼠标悬停在链接上并在左下角打开媒体时仍然可以看到它。一个简单的鼠标右键点击也会放弃它。

我知道我可以配置我的 Magento 网站以显示特定的基本 URL。我已经尝试寻找解决方案，但我只是没有找到任何有用的词汇。我感谢任何帮助。

*编辑：我知道要在这里发布问题，必须知道一个人在说什么，但是我被困住了，没有人可以帮助我；所以请不要有负面声誉。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T14:47:26.077

你不能。

如果浏览器应该向 example.com 询问资源，那么您必须告诉浏览器有关 example.com 的信息。你告诉浏览器的任何事情你也告诉用户。

使数据看起来来自 example.org 的唯一方法是将其从 example.com 复制到 example.org，因此它确实来自 example.org。

HTTP 重定向可以隐藏真实的 URL……但只有在它被跟踪之前，浏览器会在哪个浏览器上被告知数据真正存在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:55:49.980

您可以通过单独的请求获取图像并将它们存储在临时位置。这将有很多开销，因此缓存是强制性的。

另一种选择是获取您需要的所有图像，并通过批处理请求将它们永久存储在您自己的服务器上。

目前尚不清楚您的实际问题是什么，因此我们无法提供进一步的帮助。（您为什么需要这样做？）您的问题可能有更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:04:55.980

在同一台服务器中已经配置了一个不同的域，该域被“映射”到另一个文件夹。我只是将图像文件从 /home/site1/pics 复制到 /home/website2/pics。从网站 2 加载内容时，我不再看到“从网站 1 加载”。

# osgi - 在osgi中使用corba时获取ClassNotFound异常

> ID：11122099
> 
> 赞同：0
> 
> 时间：2012-06-20T14:45:40.220
> 
> 标签：osgi, classnotfoundexception, corba, openorb

我想将 corba 服务封装到 osgi 包中。我使用 karaf 作为 osgi 容器，使用 openorb 作为 orb 实现和蓝图来注册 osgi 服务。但是当我将我的 corba 功能安装到 karaf 时，总是得到 ClassNotFound 异常。像这样的异常堆栈：

```
org.omg.CORBA.INITIALIZE: can't instantiate ORB implementation org.openorb.CORBA.ORB
at org.omg.CORBA.ORB.init_orb(Unknown Source)[:1.6.0_32]
at org.omg.CORBA.ORB.init(Unknown Source)[:1.6.0_32]
....
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.6.0_32]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)[:1.6.0_32]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_32]
at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_32]
at org.apache.aries.blueprint.utils.ReflectionUtils.invoke(ReflectionUtils.java:226)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.container.BeanRecipe.invoke(BeanRecipe.java:824)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.container.BeanRecipe.runBeanProcInit(BeanRecipe.java:636)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.container.BeanRecipe.internalCreate(BeanRecipe.java:724)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.di.AbstractRecipe.create(AbstractRecipe.java:64)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.container.BlueprintRepository.createInstances(BlueprintRepository.java:219)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.container.BlueprintRepository.createAll(BlueprintRepository.java:147)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.container.BlueprintContainerImpl.instantiateEagerComponents(BlueprintContainerImpl.java:640)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:331)[10:org.apache.aries.blueprint:0.3.1]
at org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:227)[10:org.apache.aries.blueprint:0.3.1]
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)[:1.6.0_32]
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)[:1.6.0_32]
at java.util.concurrent.FutureTask.run(FutureTask.java:138)[:1.6.0_32]
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)[:1.6.0_32]
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)[:1.6.0_32]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_32]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_32]
at java.lang.Thread.run(Thread.java:662)[:1.6.0_32]
Caused by: java.lang.ClassNotFoundException: org.openorb.CORBA.ORB
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)[:1.6.0_32]
at java.security.AccessController.doPrivileged(Native Method)[:1.6.0_32]
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)[:1.6.0_32]
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)[:1.6.0_32]
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)[:1.6.0_32]
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)[:1.6.0_32] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:46:00.563

自己修复了这个问题，使用如下方式：

```
ClassLoader tccl = Thread.currentThread().getContextClassLoader();
try {
Thread.currentThread().setContextClassLoader(getClass().getClassLoader());
/*
 * Start threads, or establish connections, here, now
 */
} finally {
Thread.currentThread().setContextClassLoader(tccl);
} 
```

[在 OSGi 中更好地处理线程上下文类加载器](https://stackoverflow.com/questions/2198928/better-handling-of-thread-context-classloader-in-osgi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:54:43.170

我认为它只是错过了 openorb 依赖。你导入 org.openorb 包吗？

如果你忘记了，通常你会得到编译时错误，但这似乎是一个 Class.forname，所以它只在运行时失败。

# c++ - 在 Qt 中混合两个不同的图像

> ID：11122107
> 
> 赞同：6
> 
> 时间：2012-06-20T14:46:04.920
> 
> 标签：c++, qt, opacity, qimage, qpixmap

我的程序生成 3 个不同的图像，我想使用一些不透明度设置将它们组合起来。

首先我有原始图像，我已经将其转换为 QPixmap 以在 QGraphicsView 中显示它。

![第一张图片](../Images/f2eb8b103867ab3bf326dc22ee109f0f.png).

然后用这个图像进行一些计算并生成一个 QImage，因为我需要基本的像素访问，我还添加了一个图例。

![第二张图片](../Images/a65ab026947ba248c4bf6dda0a48c016.png).

我想做的是能够混合两个图像，同时能够修改不透明度。我没有展示示例的工具，它应该如下所示：

![第三张图片](../Images/1734aaa95b60e8372e2be79075a8e3ce.png)

但是与第一个图像和数据图像混合不透明度。我也希望这个传说保持 100% 可见。如果需要，我可以为图例创建不同的 QImage。

我也确切地知道哪个像素应该被认为是透明的而不是白色的。

将来我想只用一个滑块来调整不透明度，所以我认为如果有一个不涉及每次都计算一个全新图像的解决方案会更好......

任何线索将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:28:30.177

您可以使用 QGraphicsPixmapItem::setOpacity 为覆盖图像设置 0.0...1.0 范围内的 alpha 混合值，并为背景和前景设置单独的图形项。

如果您确实需要使用混合图像生成像素图，您可以在 QPainter 上使用 setOpacity，然后再在其上绘制像素图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:20:24.580

有一个支持 alpha 通道 QImage::Format_ARGB32_Premultiplied 的 QImage 类型，它将显示具有由 alpha 控制的不透明度的两个图像 - 只需将两个 QImage 绘制在彼此的顶部

但它是预乘的，所以如果你改变 A，你需要调整所有像素

# javascript - Javascript 表单（带有单选按钮）验证不起作用

> ID：11122113
> 
> 赞同：0
> 
> 时间：2012-06-20T14:46:37.813
> 
> 标签：javascript, forms, validation

这段代码今天早些时候工作，然后随机停止，必须改变一些东西，但我不知道是什么 - 请参见下文：

**更新 - 下面的代码更新。现在它可以正确识别单选按钮是否被选中，但是如果用户在显示警报后尝试重新提交表单，则识别状态将无法更新。是否需要某种循环？

```
 function checkForm()
{
var x=document.forms["sdcomp"]["name"].value;
if (x==null || x=="")
{
alert("Name must be filled out");
return false;
}
var x=document.forms["sdcomp"]["email"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
{
alert("Please enter a valid e-mail address");
return false;
}
if (document.getElementById("questionone").checked==false)
{
alert("Question one must be completed");
return false;
}
if (document.getElementById("questiontwo").checked==false)
{
alert("Question two must be completed");
return false;
}
if (document.getElementById("questionthree").checked==false)
{
alert("Question three must be completed");
return false;
}
if (document.getElementById("questionfour").checked==false)
{
alert("Question four must be completed");
return false;
}
} 
```

表格第一个问题的示例：

```
<tr>
<td class="question" colspan="4"><p class="question">Usain Bolt is the current world     record holder for the men's 100 meters, but what is his best time?</p></td>
</tr>

<tr>
<td class="answer">8.45 seconds<input type="radio" value="Aone" name="Qone"    id="questionone"></td>
<td class="answer">9.58 seconds<input type="radio" value="Atwo" name="Qone" id="questionone"></td>
<td class="answer">10.12 seconds<input type="radio" value="Athree" name="Qone" id="questionone"></td>
<td class="answer">9.32<input type="radio" value="Afour" name="Qone" id="question one">
   </td>
</tr> 
```

****** *** *****更新以下新代码：******* *** ** *** ** *** ** *********

 ****```
<link rel="stylesheet" href="style.css" type="text/css">
<!-- inclusion of fb config -->

<?php require_once('config.php'); ?>

<!-- client side validation for text fields -->

<script language="JavaScript" type="text/javascript">

function checkForm()
{
var x=document.forms["sdcomp"]["name"].value;
if (x==null || x=="")
{
alert("Name must be filled out");
return false;
}
var x=document.forms["sdcomp"]["email"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
{
alert("Please enter a valid e-mail address");
return false;
}
/* HERE */
function isAnswered(name) {
var inputs = document.getElementsByTagName("input");
for (var i = 0; i < inputs.length; i++) {
    var input = inputs[i];
    if ((input.name === name) && (input.checked)) {
        return true;
    }
}
return false;
}
if (!isAnswered("Qone")) {
alert("Question one must be completed");
return false;
}
if (!isAnswered("Qtwo")) {
alert("Question two must be completed");
return false;
}
if (!isAnswered("Qthree")) {
alert("Question three must be completed");
return false;
}
if (!isAnswered("Qfour")) {
alert("Question four must be completed");
return false;
}
}
</script>

<?php
$con = mysql_connect("localhost","root","root");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("sdfbcomp", $con);

// some code
?>

<?php 
$name = $_POST["name"];
$email = $_POST["email"];
$Qone = $_POST["Qone"];
$Qtwo = $_POST["Qtwo"];
$Qthree = $_POST["Qthree"];
$Qfour = $_POST["Qfour"];
?>
</head>
<body>
<div id="tablediv">
<table id="comptable">

<form name="sdcomp" method="post" action="insert.php" onSubmit="return checkForm();">

<tr class="userdetailfields">
<p>Name:</p><input type="text" size="12" maxlength="12" name="name"></br>
</tr>

<tr class="userdetailfields">
<p>Email:</p><input type="text" size="12" maxlength="30" name="email"></br>
</tr>

<tr>
<td class="question" colspan="4"><p class="question">Usain Bolt is the current world record holder for the men's 100 meters, but what is his best time?</p></td>
</tr>

<tr>
<td class="answer">8.45 seconds<input type="radio" value="Aone" name="Qone" id="questionone"></td>
<td class="answer">9.58 seconds<input type="radio" value="Atwo" name="Qone" id="questionone"></td>
<td class="answer">10.12 seconds<input type="radio" value="Athree" name="Qone" id="questionone"></td>
<td class="answer">9.32<input type="radio" value="Afour" name="Qone" id="question one">    </td>
</tr>

<tr>
<td class="question" colspan="4"><p class="question">Question two:</p></td>
</tr>

<tr>
<td class="answer">Answer one<input type="radio" value="Bone" name="Qtwo" id="questiontwo"></td>
<td class="answer">Answer two<input type="radio" value="Btwo" name="Qtwo" id="questiontwo"></td>
<td class="answer">Answer three<input type="radio" value="Bthree" name="Qtwo" id="questiontwo"></td>
<td class="answer">Answer four<input type="radio" value="Bfour" name="Qtwo" id="questiontwo"></td>
</tr>

<tr>
<td class="question" colspan="4"><p class="question">Question three:</td></p>
</tr>

<tr>
<td class="answer">Answer one<input type="radio" value="Cone" name="Qthree" id="questionthree"></td>
<td class="answer">Answer two<input type="radio" value="Ctwo" name="Qthree" id="questionthree"></td>
<td class="answer">Answer three<input type="radio" value="Cthree" name="Qthree" id="questionthree"></td>
<td class="answer">Answer four<input type="radio" value="Cfour" name="Qthree" id="questionthree"></td>
</tr>

<tr>
<td class="question" colspan="4"><p class="question">Question four:</td></p>
</tr>

<tr>
<td class="answer">Answer one<input type="radio" value="Done" name="Qfour" id="questionfour"></td>
<td class="answer">Answer two<input type="radio" value="Dtwo" name="Qfour" id="questionfour"></td>
<td class="answer">Answer three<input type="radio" value="Dthree" name="Qfour" id="questionfour"></td>
<td class="answer">Answer four<input type="radio" value="Dfour" name="Qfour" id="questionfour"></td>
</tr>

<tr><td><input type="submit" value="submit" name="submit" id="submit"><br /></td></tr>
</form><br />

</table>
</div>
</body> 
```

仍然有这个问题，你能帮我吗？再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:33:35.413

首先，在您的问题中，所有答案都具有相同的 id='questionone'。您需要删除这些 ID。

要检查是否检查了特定名称组，您可以使用：

```
function isAnswered(name) {
    var inputs = document.getElementsByTagName("input");
    for (var i = 0; i < inputs.length; i++) {
        var input = inputs[i];
        if ((input.name === name) && (input.checked)) {
            return true;
        }
    }
    return false;
} 
```

然后，您可以使用以下代码测试每个问题组：

```
if (!isAnswered("Qone")) {
    alert("Question one must be completed");
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:24:13.490

你能展示整个表格吗？与此同时，试试这个：

```
function checkForm() {
    var x=document.forms["sdcomp"]["name"].value;

    if (x==null || x=="") {
        alert("Name must be filled out");
        return false;
    }

    var x=document.forms["sdcomp"]["email"].value;
    var atpos=x.indexOf("@");
    var dotpos=x.lastIndexOf(".");

    if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length) {
        alert("Please enter a valid e-mail address");
        return false;
    }

    if (document.getElementById("questionone").checked) {

        alert("Option one is selected");

    } else if (document.getElementById("questiontwo").checked) {

        alert("Option two is selected");

    } else if (document.getElementById("questionthree").checked) {

        alert("Option three is selected");

    } else if (document.getElementById("questionfour").checked) {

        alert("Option four is selected");

    } else {

        alert("No option is selected");

    }
} 
```

这就是我想告诉你的，在你的输入上加上唯一的 id 以在函数中获取它们的值：

```
<tr>
    <td class="answer">
        <label>8.45 seconds</label>
        <input type="radio" value="Aone" name="Qone" id="questionone" />
    </td>
    <td class="answer">
        <label>9.58 seconds</label>
        <input type="radio" value="Atwo" name="Qtwo" id="questiontwo" />
    </td>
    <td class="answer">
        <label>10.12 seconds</label>
        <input type="radio" value="Athree" name="Qthree" id="questionthree" />
    </td>
    <td class="answer">
        <label>9.32 seconds</label>
        <input type="radio" value="Afour" name="Qfour" id="questionfour" />
    </td>
</tr> 
```****

# sql-server - 如何从 SQL Server 中的 locks_lock_timeouts_greater_than_0 事件中获取所有者和锁定对象？

> ID：11122114
> 
> 赞同：8
> 
> 时间：2012-06-20T14:46:43.633
> 
> 标签：sql-server, sql-server-2008, tsql, locking, extended-events

我正在`locks_lock_timeouts_greater_than_0`使用 SQL Server 中的扩展事件捕获事件。活动环节如下：

```
CREATE EVENT SESSION MyQuery ON SERVER
    ADD EVENT sqlserver.locks_lock_timeouts_greater_than_0
    (
        ACTION (sqlserver.sql_text, sqlserver.tsql_stack)
    )
    ADD TARGET package0.ring_buffer (SET max_memory = 4096)
    WITH (max_dispatch_latency = 1 seconds) 
```

如何确定锁定了哪个对象以及当前锁定了谁？

**更新**：我需要这个用于 SQL Server 2008。如何调试 2012 之前版本的锁定超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:34:23.697

此事件似乎未捕获您想要的信息。

您可以通过以下方式查看可用于事件的字段：

```
select p.name package_name, o.name event_name, c.name event_field, c.type_name field_type, c.column_type column_type
from sys.dm_xe_objects o
join sys.dm_xe_packages p
      on o.package_guid = p.guid
join sys.dm_xe_object_columns c
      on o.name = c.object_name
where o.object_type = 'event'
  AND o.name = 'locks_lock_timeouts_greater_than_0'
order by package_name, event_name 
```

结果是：

```
sqlserver   locks_lock_timeouts_greater_than_0  ID  uint16  readonly
sqlserver   locks_lock_timeouts_greater_than_0  UUID    guid_ptr    readonly
sqlserver   locks_lock_timeouts_greater_than_0  VERSION uint8   readonly
sqlserver   locks_lock_timeouts_greater_than_0  CHANNEL etw_channel readonly
sqlserver   locks_lock_timeouts_greater_than_0  KEYWORD keyword_map readonly
sqlserver   locks_lock_timeouts_greater_than_0  count   uint64  data
sqlserver   locks_lock_timeouts_greater_than_0  lock_type   uint64  data 
```

但是，在 SQL 2012 中，此事件已被 lock_timeout_greater_than_0 替换 ( [http://msdn.microsoft.com/en-us/library/ms144262.aspx](http://msdn.microsoft.com/en-us/library/ms144262.aspx) )，它具有以下字段集

```
sqlserver   lock_timeout_greater_than_0 UUID    guid_ptr    readonly
sqlserver   lock_timeout_greater_than_0 VERSION uint8   readonly
sqlserver   lock_timeout_greater_than_0 CHANNEL etw_channel readonly
sqlserver   lock_timeout_greater_than_0 KEYWORD keyword_map readonly
sqlserver   lock_timeout_greater_than_0 collect_resource_description    boolean customizable
sqlserver   lock_timeout_greater_than_0 collect_database_name   boolean customizable
sqlserver   lock_timeout_greater_than_0 resource_type   lock_resource_type  data
sqlserver   lock_timeout_greater_than_0 mode    lock_mode   data
sqlserver   lock_timeout_greater_than_0 owner_type  lock_owner_type data
sqlserver   lock_timeout_greater_than_0 transaction_id  int64   data
sqlserver   lock_timeout_greater_than_0 database_id uint32  data
sqlserver   lock_timeout_greater_than_0 lockspace_workspace_id  ptr data
sqlserver   lock_timeout_greater_than_0 lockspace_sub_id    uint32  data
sqlserver   lock_timeout_greater_than_0 lockspace_nest_id   uint32  data
sqlserver   lock_timeout_greater_than_0 resource_0  uint32  data
sqlserver   lock_timeout_greater_than_0 resource_1  uint32  data
sqlserver   lock_timeout_greater_than_0 resource_2  uint32  data
sqlserver   lock_timeout_greater_than_0 object_id   int32   data
sqlserver   lock_timeout_greater_than_0 associated_object_id    uint64  data
sqlserver   lock_timeout_greater_than_0 duration    uint64  data
sqlserver   lock_timeout_greater_than_0 resource_description    unicode_string  data
sqlserver   lock_timeout_greater_than_0 database_name   unicode_string  data 
```

由此，我能够从它们的 Id 派生数据库 (database_id) 和在我的案例中的表（在 object_id、related_object_id、resource_0 中不同）。

我没有看到一种明显的方法来从该事件捕获的数据中找到谁在锁定对象。

**编辑**-有关使用 sp_lock 和 sp_who2 调试锁定超时事件原因的示例，请参阅[SQL Server Lock Timeout Exceeding Deleting Records in a Loop 。](https://stackoverflow.com/questions/5572585/sql-server-lock-timeout-exceeded-deleting-records-in-a-loop)

# iphone - 设置 UINavigationController 框架不会改变外观

> ID：11122115
> 
> 赞同：0
> 
> 时间：2012-06-20T14:46:45.393
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, uinavigationbar

好的，所以我有一个 UINavigationController，我在 viewDidLoad 中设置了它的框架。

```
[self.navigationController.navigationBar setFrame:CGRectMake(0, 0, 586, 44)]; 
```

加载视图后，NavigationController 仍处于其全宽`1024`.

**当视图出现时：**![在此处输入图像描述](../Images/04cd8de57d43064acb893758852e90a9.png)

直到我`push`在导航控制器上添加了一些东西，它才会将其框架更新为`586`.

**在推送或弹出之后：**![在此处输入图像描述](../Images/660ea4341be519c99f63208506563da7.png)

注意：调用`[... setNeedsDisplay];`不能解决问题，也不能`[... setAutoresizingMask:UIViewAutoresizingNone];`

关于为什么它最初不是这样或如何重绘它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:06:06.117

我认为您不能直接更改框架，您应该自定义导航栏

# crystal-reports - 将 Crystal Reports 与 Microsoft Visual Studio Lightswitch 集成

> ID：11122116
> 
> 赞同：0
> 
> 时间：2012-06-20T14:46:46.080
> 
> 标签：crystal-reports, report, visual-studio-lightswitch, integrate

几个星期以来，我一直在网上浏览这个问题的答案，然后又回到工作中的其他任务，因为我想不通。我搜索了 google、youtube、stackoverflow 和其他几个网站。我得到的典型解决方案是右键单击项目并添加一个新项目；水晶报告。问题是灯开关中不包含水晶报告。所以我的问题是，我将如何在 Microsoft Visual Studio Lightswitch 中使用水晶报表？

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:48:29.340

我已经研究了三天，我终于找到了解决这个问题的方法：从包含水晶报表查看器控件的灯光开关应用程序打开一个 aspx 页面，因此将加载您的水晶报表。只需按照以下步骤操作，如果您需要进一步说明，请告诉我；

1.  发布您的 lightswitch 应用程序（使用自定义按钮控件，将在执行时打开 aspx 页面）。我在这里查找了 _Execute() 方法的代码：http: [//lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/11/Printing-Sql-Server-Reports-rdlc-With-LightSwitch.aspx](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/11/Printing-Sql-Server-Reports-rdlc-With-LightSwitch.aspx)

2.  在 vs Ultimate 中打开已发布的电灯开关应用程序作为网站。

3.  创建水晶报表（添加项目、水晶报表）。

4.  创建 aspx 页面以保存水晶报表查看器控件（将加载水晶报表）。

注意：在 C:\Windows\Temp 上向 iis 用户授予读/写权限

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T01:51:05.500

我还没有看到任何有关使用带有 LightSwitch 的 Crystal Reports 的人的信息。是否有某些原因导致您不能使用 SQL Server Reporting Services 创建/显示您的报告？也许你不知道SSRS？它附带 SQL Server，因此如果您拥有 SQL Server 许可证，您还可以免费获得 SSRS。

您仍然无法只右键单击 LightSwitch 项目中的任何内容来定义报告，您仍然需要在 SSRS 中创建报告，然后使用 LS 显示它们（甚至传递参数）。

习惯 SSRS 有一点学习曲线，但是一旦你这样做了，你会发现它非常有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:34:27.177

我还没有尝试在 LightSwitch 应用程序中使用 Crystal Reports（还），但是我怀疑您可以利用现有的 Silverlight 控件来为您处理工作。让查看器连接到 LightSwitch 可能需要进行一些调整，但我相信它可以完成。

更新...我的立场是正确的；直到其他人证明并非如此 - 我在 Silverlight 中找不到任何支持 Crystal Reports 查看器的东西。

# visual-studio-2010 - 我无法将 dll 添加到 Visual Studio 2010 中的引用

> ID：11122119
> 
> 赞同：0
> 
> 时间：2012-06-20T14:46:48.997
> 
> 标签：visual-studio-2010, add-references-dialog

我在 Visual Studio 2010 中开发 WinApp（使用 C# 语言）

我想在 Reference 中添加一个 dll（不是系统 dll）。

但是当我打开 Add Reference Window And Browse dll 时，请参阅错误消息：

> 无法加载文件或程序集“W2D_D2.dll”或其依赖项之一。该模块应包含程序集清单。
> 
> 此文件可能不是托管程序集。

我什至将目标平台从“.net framework 4 客户端配置文件”更改为“.net framework 4”，但没有区别。

如何将此 dll 添加到我的项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:51:49.007

看起来这个 DLL 不是托管程序集。您可以通过尝试使用 ILSpy 或 Reflector 打开它来快速检查它。

如果是这种情况，您将不得不 pinvoke 或使用 com 来使用此 dll。

# animation - css动画持久结束状态

> ID：11122120
> 
> 赞同：4
> 
> 时间：2012-06-20T14:46:50.227
> 
> 标签：animation, css, persistence

我有一个 div 元素，它充当我的网页的全局 contianer，我在其中还有一个 div 元素，我将其用作窗帘，即当它被激活时，它会在一个黑暗的半透明层中覆盖整个页面（就像一个灯箱) 所以页面基本上被停用，并且可以在顶部显示警告对话框或图片框等。

我可以用 javascript 轻松实现这种效果和功能，但我想知道它是否可以纯粹用 css 动画来实现？

```
<div id='globalCon'>
    <div id='curtain' class='enabled'></div>
    <div id='contentA'></div>
    <div id='contentB'></div>
    ... 
</div> 
```

因此，当窗帘不活动时，它的不透明度应该为 0，最好不要挡住`display:none;`它。然后当它被激活时，它应该具有`display:block`并且不透明度设置为 0.8。然后当它被停用时，不透明度应该动画回0，然后它应该设置回`display:none;`

就像我说的，我可以用 javascript 轻松做到这一点，我只想知道它是否以及如何只用 css 完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T17:06:03.133

您可以使用：animation-fill-mode: none/backwards/forwards/both；

> 'animation-fill-mode' 属性定义了动画在执行时间之外应用的值

从[规范。](http://dev.w3.org/csswg/css3-animations/#animation-fill-mode-property)

# java - Java EE 6、5、7 | 托管 bean 或类的列表：EJB、JSF bean 和 ..？

> ID：11122127
> 
> 赞同：1
> 
> 时间：2012-06-20T14:47:01.680
> 
> 标签：java, jsf, jakarta-ee, ejb, managed-bean

有人可以查看Java EE 5、6、7中*托管 Bean或类的当前列表吗？*除了 EJB 和 JSF 托管 bean，它们是其他类吗？

在“EJB 3 in Action”一书的第 5 章（*学习高级 EJB 概念*）中提到：

> “DI 仅在托管类中受支持，您不能在帮助程序或实用程序类中使用注入。”

这就是为什么我想知道通常可以支持依赖注入的托管 bean 是什么。

- 请不要忘记提及在线参考和文档（如果有） - 提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:20:13.267

从 EE 6 开始：

*   EJB（EJB 3.1，第 2.8 节 - “与托管 Bean 规范的关系”）
*   CDI（JSR-299，第 1.2.3 节 - “与托管 bean 的关系”）
*   JSF（托管 Beans 1.0，MB.1.2 部分）

由于规范预计将建立在托管 bean 规范之上，因此平台规范没有提供完整的列表，因此您必须查看 EE 6 中包含的每个规范。我对 JSF 的证据是最弱的，因为最新的 JSF 规范没有明确声明它建立在托管 bean 规范之上。但是，托管 bean 规范本身声明它旨在作为 JSF 的泛化。

也就是说，EE 6 平台规范中的表 EE.5-1 包含支持注入、PostConstruct 和 PreDestroy 的组件类列表。这个列表可以说比知道哪些组件技术列表是明确的“托管 bean”更有用。

*   Servlet（servlet、servlet 过滤器、事件监听器）
*   JSP（标签处理程序、标签库事件监听器）
*   JSF（作用域托管 bean）
*   JAX-WS（服务端点、处理程序）
*   EJB（bean，拦截器）
*   托管 Beans [来自托管 bean 规范]
*   CDI（CDI 风格的托管 bean [几乎所有带有 beans.xml 的档案中的类]，装饰器）
*   Java EE 平台（主类（静态）[应用程序客户端]，登录回调处理程序）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:19:29.590

您是否知道任何 Java 类都可以通过编写符合[MBean 规范](http://docs.oracle.com/javase/tutorial/jmx/mbeans/standard.html)来成为托管 bean 。

您的问题要求 Java EE 中的*“当前托管 bean 列表”*。所以简短的回答是*“这取决于您正在运行的应用程序是否正在注册 MBean”*。您可以针对您的 JVM 运行 JMX 客户端（例如[MX4J](http://mx4j.sourceforge.net/)）以找出注册了哪些 bean。

我为[平台 MBean](http://docs.oracle.com/javase/1.5.0/docs/guide/management/overview.html#mxbeans)提供的链接描述了一些默认情况下在您的 JVM 中可用的内容。

# coding-style - 首选 Python（或任何语言，真的）风格：如果返回，是否应该使用 else ？

> ID：11122129
> 
> 赞同：7
> 
> 时间：2012-06-20T14:47:13.250
> 
> 标签：coding-style, python

很简单的问题：

特别是在 Python 中（因为 Python 实际上在[PEP 8](http://www.python.org/dev/peps/pep-0008/)中指定了“强烈推荐”的样式指南，但这实际上适用于任何语言），具有`if`始终返回的子句的函数是否应该在子句中具有替代代码`else`？换句话说，`func_style_one()`在`func_style_two()`下面的一段代码中（显然）是完全等价的：

```
def func_style_one():
    if some_conditional_function():
        do_something()
        return something()
    else:
        do_something_else()
        return something_else()

def func_style_two():
    if some_conditional_function():
        do_something()
        return something()
    do_something_else()
    return something_else() 
```

显然，最好和最易读的风格取决于具体情况，对于哪个更好，*意见*会有很大差异，但我问的是核心 Python 社区特别喜欢哪种风格。（例如，在标准库中哪个更常用，所有其他条件都相同？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:02:46.053

根据经验，无论使用哪种语言，您都应始终避免为代码添加不必要的复杂性。尝试将代码拆分为语义上有意义的小节通常也是一个好主意。

鉴于这些启发式方法，没有明确的答案。这真的归结为你想要达到的目标。

我将通过示例来证明这一点。

如果我们有一个在继续之前检查各种错误条件的函数，那么在没有 的情况下编写它可能是有意义的`else`：

```
def do_stuff():
    if error1():
        return cleanup_and_fail()
    return ok() 
```

这会更好，因为您经常会以类似的方式依次检查多个错误：

```
def do_stuff():
    if error1():
        return cleanup_and_fail()
    if error2():
        return do_different_cleanup_and_fail()
    return ok() 
```

但是，如果您的函数改为分支到两个相等的分支，那么它在语义上对您来说可能更有意义：

```
def do_stuff():
    if option1():
        return do_option1()
    else:
        return do_option2() 
```

这是因为您通常最终会添加几个其他选项`elif`：

```
def do_stuff():
    if option1():
        return do_option1()
    elif:
        return do_option2()
    else:
        return do_option3() 
```

总结一下：考虑代码的语义并相应地选择语法。

# jar - warbler 生成的 JAR 无法访问包含的内部 JAR 库

> ID：11122130
> 
> 赞同：1
> 
> 时间：2012-06-20T14:47:19.557
> 
> 标签：jar, jruby, warbler

我有一个 JRuby 项目，它通过 Oracle 的 ojdbc6.jar 库使用 JDBC 连接到 Oracle 数据库。当在 Windows 7 上使用 JRuby 1.6.6 和在 OS X Lion 上使用 JRuby 1.6.5.1 运行时，该代码运行良好。我正在尝试使用 warbler 创建一个独立的 JAR 文件。运行 warble jar 后，它包含 ojdbc6.jar 但由于某种原因它不会加载/访问它。内部类路径似乎不正确，或者我配置不正确。

存在以下目录结构。

```
C:\my_jruby_project\bin\my_jruby_file.rb
C:\my_jruby_project\lib\java\ojdbc6.jar
C:\my_jruby_project\Gemfile 
```

C:\my_jruby_project\Gemfile:

```
source :rubygems
gem 'activerecord', '>= 3.2.3'
gem 'activerecord-jdbc-adapter', '>= 1.2.2'
gem 'ruport', '>= 1.6.3' 
```

C:\my_jruby_project\bin\my_jruby_file.rb

```
require 'ruport'
require 'java'

java_import 'oracle.jdbc.OracleDriver'
java_import 'java.sql.DriverManager'
.... 
```

生成 JAR 文件后：

```
jruby -S warble jar 
```

我执行 jar 并收到以下错误：

```
C:\my_jruby_project>java -jar my_jruby_project.jar
NameError: cannot load Java class oracle.jdbc.OracleDriver
         for_name at org/jruby/javasupport/JavaClass.java:1205
  get_proxy_class at org/jruby/javasupport/JavaUtilities.java:34
      java_import at file:/C:/Users/DAVIDH~1.OPE/AppData/Local/Temp/jruby8647327738550400677extract/
jruby-core-1.6.7.jar!/builtin/javasupport/core_ext/object.rb:46
           (root) at file:/C:/my_jruby_project/my_jruby_project.jar!/my_jruby_project/bin/my_jruby_file.rb:4
             load at org/jruby/RubyKernel.java:1058
           (root) at file:/C:/my_jruby_project/my_jruby_project.jar!/my_jruby_project/bin/my_jruby_file.rb:1
          require at org/jruby/RubyKernel.java:1033
          require at file:/C:/my_jruby_project/my_jruby_project.jar!/META-INF/main.rb:36
           (root) at <script>:3

C:\my_jruby_project> 
```

生成的 JAR 包含 lib/java/ojdbc6.jar，但内部文件或路径指针似乎配置不正确。

感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:57:37.517

您可能想`$CLASSPATH`在您的 ruby​​ 代码中进行设置。与此类似的东西：

```
require 'java'
$CLASSPATH << "lib/java/ojdbc6.jar" 
```

我在我的 jruby on rails 项目中使用了一些额外的 jar，并在我的代码中有以下代码，`environment.rb`以便在我的部署`.jars`中可以访问：`.war`

```
require 'java'
Dir.glob("lib/*.jar").each do |jar|
  $CLASSPATH << "#{Rails.root.to_s}/#{jar}"
end 
```

# systemc - 在 SystemC 中获取 VCD 跟踪信号的名称

> ID：11122134
> 
> 赞同：0
> 
> 时间：2012-06-20T14:47:33.070
> 
> 标签：systemc

SystemC 允许通过 sc_trace 函数跟踪信号（或成员等），结果是可以在其他程序中使用的 VCD 文件。但是，这些信号的命名相当随意，函数接受任何字符串（不必与变量本身相关）作为要转储的信号的名称。

问题是：我可以通过 SystemC API 以某种方式获取从 sc_interface 对象到用作其名称的字符串的映射吗？我正在以其他方式记录大量数据，能够以某种方式将我检索到的值连接到 VCD 数据会很好，如果我只有转储值和随机字符串标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:30:46.113

不确定我是否准确理解了您的问题，但是... SystemC 有所作为，例如。信号模拟名称和 C++ 实例名称。模拟名称在对象的构造函数参数列表中指定。除非您在构建过程中省略命名对象，否则出现在 vcd 文件中的名称应该是任意的。另一方面，您省略了名称，替代构造函数将为您生成一个名称。也许您可以提供一些示例代码来排除任何混淆。

```
 sc_signal()
: sc_prim_channel( sc_gen_unique_name( "signal" ) ),
  m_change_event_p( 0 ), m_cur_val( T() ), 
  m_delta( ~sc_dt::UINT64_ONE ), m_new_val( T() ), m_output( 0 ), 
  m_writer( 0 ) 
{}

explicit sc_signal( const char* name_ )
: sc_prim_channel( name_ ),
  m_change_event_p( 0 ), m_cur_val( T() ), 
  m_delta( ~sc_dt::UINT64_ONE ), m_new_val( T() ), m_output( 0 ), 
  m_writer( 0 ) 
{} 
```

您想使用后一个构造函数

# r - 如何从具有最大值的数据框中选择列？

> ID：11122135
> 
> 赞同：2
> 
> 时间：2012-06-20T14:47:40.987
> 
> 标签：r, dataframe

我真的是 R 的初学者，所以如果我的代码让你们震惊，我很抱歉。我的数据类似于这样：

```
 a b c d e f g h i j
t1 0 0 0 0 3 0 0 0 0 0
t2 0 0 0 0 0 6 0 0 0 0
t3 0 0 0 0 0 0 0 0 0 8
t4 0 0 0 0 0 0 0 0 9 0 
```

我想，为每一行找到具有最大值的列，然后将列减去 3 到加上 3。我编写了以下脚本来执行此操作：

```
M<-c(1)
for (row in 1: length(D[,1])) {
  max<-which.max(D[row,])
  D<-D[,c(max-3,max-2,max-1,max,max+1,max+2,max+3)]
  M<- cbind(M,D)
}
M<-M[,-1] 
```

它会起作用，除非最大值位于行开头或结尾附近的列中（如上例中的行 t3 和 t4）。在这种情况下，我希望 7 列更接近具有最大值的列，如下所示：

```
t1 0 0 0 3 0 0 0
t2 0 0 0 6 0 0 0
t3 0 0 0 0 0 0 8
t4 0 0 0 0 0 9 0 
```

帮助将不胜感激！

`dput()`示例数据的版本：

```
structure(list(a = c(0L, 0L, 0L, 0L), b = c(0L, 0L, 0L, 0L), 
    c = c(0L, 0L, 0L, 0L), d = c(0L, 0L, 0L, 0L), e = c(3L, 0L, 
    0L, 0L), f = c(0L, 6L, 0L, 0L), g = c(0L, 0L, 0L, 0L), h = c(0L, 
    0L, 0L, 0L), i = c(0L, 0L, 0L, 9L), j = c(0L, 0L, 8L, 0L)), .Names = c("a", 
"b", "c", "d", "e", "f", "g", "h", "i", "j"), class = "data.frame",
row.names = c("t1", "t2", "t3", "t4")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:17:01.430

这应该很好地工作：

```
t(apply(D, 
        MARGIN = 1, 
        FUN = function(X) {
            n <- which.max(X)
            i <- seq(min(max(1, n-3), ncol(D)-6), len=7)
            X[i]
        }))
#    [,1] [,2] [,3] [,4] [,5] [,6] [,7]
# t1    0    0    0    3    0    0    0
# t2    0    0    0    6    0    0    0
# t3    0    0    0    0    0    0    8
# t4    0    0    0    0    0    9    0 
```

要测试关键列选择位是否按您的意愿工作，您可以尝试以下操作：

```
n <- 2
seq(min(max(1, n-3), ncol(D)-6), len=7)
n <- 10
seq(min(max(1, n-3), ncol(D)-6), len=7)
n <- 6
seq(min(max(1, n-3), ncol(D)-6), len=7) 
```

# asp.net - 如何覆盖 WebResource.axd 提供的内置 asp.net javascripts

> ID：11122137
> 
> 赞同：4
> 
> 时间：2012-06-20T14:47:44.553
> 
> 标签：asp.net

我需要更改`WebForm_AutoFocus()`ASP.Net 生成的函数。可能吗？如何？

# javascript - Javascript & 和 | 符号

> ID：11122140
> 
> 赞同：2
> 
> 时间：2012-06-20T14:47:50.930
> 
> 标签：javascript, operator-keyword

我知道`&&`和`||`分别用于比较`AND`和`OR`。

但是`&`and`|`运算符呢？它们是用来做什么的？

这是我正在测试的代码：

```
var a = 2;
var b = 3;
var c = a & b;//2
var d = a | b;//3 
```

&& , || 之间的区别 和 &, | ……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T14:51:24.423

它们是对数字的位进行操作的位运算符。您必须考虑数字的位数才能使结果有意义：

```
a = 2 //0010
b = 3 //0011
a & b; //0010 & 0011 === 0010 === 2 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)

它们主要用于读取和操作二进制数据，例如 .mp3 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T14:51:26.640

JavaScript 具有与 Java 相同的按位运算符集：

```
& and
| or
^ xor
~ not
>> signed right shift
>>> unsigned right shift
<< left shift 
```

在 Java 中，按位运算符处理整数。JavaScript 没有整数。它只有双精度浮点数。**因此，按位运算符将其数字操作数转换为整数，执行其业务，然后将它们转换回来。**

例如：

```
a = 2 //0010
b = 3 //0011
a & b; //0010 & 0011 === 0010 === 2
a | b; //0010 | 0011 === 0011 === 3 
```

在大多数语言中，这些运算符非常接近硬件并且速度非常快。在 JavaScript 中，它们离硬件很远，而且速度很慢。JavaScript 很少用于位操作。因此，在 JavaScript 程序中，更有可能`&`是输入错误的`&&`运算符。位运算符的存在减少了语言的一些冗余，使错误更容易隐藏

*Javascript: The Good Parts by Douglas Crockford* + Esailija 答案

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T15:01:02.170

它们分别是按位与和或。该用法主要用于低级（现在不要为什么要在这里，可能有很多应用程序）操作。

例如：

```
Decimal Number    Binary Form
    20               10100
    30               11110

  20       ==>   10100
& 30       ==>   11110
-----           ----------
  20             10100  (when both bits are 1)

  20       ==>   10100
| 30       ==>   11110
-----           ----------
  30             11110  (when either of the bits is 1) 
```

同样，还有其他运算符：

```
operator    meaning             example
xor (^)   only one bit is 1     1101
                               ^1001
                               ------
                                0100 
```

我可以提供整个清单，但那是没有用的。已经有很多答案包含指向优秀资源的链接。你可能想看看那些。我的回答只是给出了一些想法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T14:52:00.630

&& 和 || 是[逻辑运算符](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，而 & 和 | 是[位运算符](http://www.c-point.com/javascript_tutorial/jsoprbitwiseand.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T14:49:16.597

&& 和 || 是逻辑运算符，而 & 和 | 是位运算符

[位运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)-**位运算符将其操作数视为 32 位（零和一）的序列，而不是十进制、十六进制或八进制数。例如，十进制数字 9 的二进制表示为 1001。按位运算符在这种二进制表示上执行操作，但它们返回标准的 JavaScript 数值。**

假设变量“a”为 13（二进制 1101）和“b”为 9（二进制 1001）

[位与运算符 (&) (JavaScript)](http://msdn.microsoft.com/en-us/library/dazfy1f3%28v=vs.94%29.aspx) - 这是位与运算符，它为每个位位置返回 1，其中两个操作数的对应位均为 1。以下代码将返回 9 (1001)：

代码：

```
result = a & b; 
```

[按位或运算符 (|) (JavaScript)](http://msdn.microsoft.com/en-us/library/066h456z%28v=vs.94%29) - 这是按位或运算符，对于其操作数的一个或两个相应位为 1 的每个位位置返回一个。此示例将返回 13 (1101)：

代码：

```
result = a | b; 
```

阅读更多

[运营商： & | ^ ~ << >> >>>](http://www.devguru.com/technologies/ecmascript/quickref/bitwise_operators.html)

# java - Glassfish 中使用 https 的 Java Web 服务

> ID：11122143
> 
> 赞同：0
> 
> 时间：2012-06-20T14:47:53.207
> 
> 标签：java, web-services, netbeans, https

我正在尝试在 Glassfish 3.1 中部署与 http 和 https 一起使用的 Web 服务。它在http中运行良好，但在https中尝试时它说

> 为以下 WSDL https:// ***生成工件时出错*。***:8181/UserWebService/UserWebService?WSDL
> 
> 当应用程序未配置安全性时，可能的原因可能是调用 https

服务器日志说：

> 端点 UserWebService 的请求方案无效。预期 http 。收到 https
> 
> 无法解析从服务器返回的元数据......
> 
> [ERROR] failed.noservice=Could not find wsdl:service in the provided WSDL(s): 至少需要提供一个具有至少一个服务定义的 WSDL。
> 
> 无法解析 WSDL。

正如我所说，它可以通过 http 完美运行，但使用 https 失败。

怎么了？我应该更改我的 NetBeans 项目中的任何内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:38:48.563

我的问题是代理/防病毒问题我终于下载了 wsdl 文件并将其复制到项目文件夹中并键入以下命令

`wsimport -p com.yourdomain.package -s src -d bin downloaded_wsdl_file.xml`

然后它在您的 src 文件夹中生成所有 java 文件，并在 bin 目录中生成所有 .class 文件

# c# - 与空对象无关的空引用异常

> ID：11122145
> 
> 赞同：3
> 
> 时间：2012-06-20T14:47:56.170
> 
> 标签：c#, nullreferenceexception

我很困惑（这很容易！）。我有一小段代码，我截取了屏幕截图。

NRE 在文件路径测试失败后出现。没有什么是空的。SceneryAreas 对象在此测试之前初始化。但是（而且我的屏幕截图没有捡起）似乎在 SceneryAreas.Clear(); 该 SceneryAreas 为空。是否有可能错误显示在错误的行上，更重要的是，实例化的对象此时如何变为空？

![VS 2010 IDE 截图](../Images/387fa7f21d45eb01c42428270cbb5a40.png)

非常感谢您的任何建议-我以前从未见过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T14:50:23.793

您的源代码或符号文件与您编译的代码不同步，因此调试器突出显示了错误的行。

如果您重新编译并重新运行，它应该会在您的源代码中导致问题的行中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:53:59.263

正如其他人所说，该文件与用于构建程序集的文件不对应。检查这一点的最简单方法是尝试在文件上设置断点，您将看到一个红色圆圈，表示该文件与构建的文件不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:51:50.363

错误可能显示在错误的行上。尝试重建您的项目以确保源文件与正在调试的代码同步。此外，检查 View Detail... 下的堆栈跟踪，以确切了解引发异常的位置。

# c# - 将 ComboBox 绑定到属于另一个类的数据源

> ID：11122146
> 
> 赞同：0
> 
> 时间：2012-06-20T14:47:56.753
> 
> 标签：c#, .net, data-binding, combobox

我目前正在构建一个应用程序，该应用程序利用 ComboBox 允许用户从 BindingList 对象中包含的 String 对象的动态列表中进行选择。但是，BindingList 是属于主类的子类的成员，这似乎会导致一些问题。

当 ComboBox 的数据源最初通过以下方式在主类中设置时：

```
this.comboBox.DataSource = this.childClass.dataList; 
```

ComboBox 的内容按预期显示。但是，当列表的内容发生变化时，ComboBox 的内容不会更新。

如果 BindingList 对象属于主类，则 ComboBox 会更新而不会出现任何问题。父类似乎没有收到表明列表已更新的事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:05:57.953

在查看了我去年提出（并回答）的一个类似问题后：

[从 C# 中的 ComboBox 添加/删除 COM 端口](https://stackoverflow.com/questions/6645069/adding-removing-com-ports-from-a-combobox-in-c-sharp/6670441#6670441)

，看来我已经（重新）发现了解决方案。问题在于如何将字符串添加到数据源中。因为该列表在另一个线程中被扩充，所以更新 ComboBox 控件时出现了问题。通过使用委托和 Invoke() 方法，组合框的内容现在按预期更新。

# jquery - 如何翻转包含多个 div 的模式？

> ID：11122147
> 
> 赞同：0
> 
> 时间：2012-06-20T14:47:57.230
> 
> 标签：jquery, modal-dialog, flip

如何翻转下面有多个 div 的模态？

```
<div id="modal">

 <div id="box1front" class="window">

  <div class="header">
   <div class="headerinner">
    <div class="modalclose"><a href="#" class="close">X</a></div>
    <div class="modalheading">Title</div>
   </div>
  </div>

  <div class="contents">
   <div class="other">
    <div class="otherinner">
     <button>View Back</button>
    </div>
   </div>
   <div class="copy">
    <div class="copyinner">
     <p>[FRONT]</p>
    </div>
   </div>
  </div>

 </div>

 <div id="box1back" class="window">

  <div class="header">
   <div class="headerinner">
    <div class="modalclose"><a href="#" class="close">X</a></div>
    <div class="modalheading">Title</div>
   </div>
  </div>

  <div class="contents">
   <div class="other">
    <div class="otherinner">
     <button>View Front</button>
    </div>
   </div>
   <div class="copy">
    <div class="copyinner">
     <p>[BACK]</p>
    </div>
   </div>
  </div>

 </div>

</div> 
```

当我单击按钮时，我希望它从**box1front**翻转到**box1back 。**

此页面上将有多个模式（显然不是一次全部打开）。按照上述格式，他们每个人都有自己的 ID。

如果有人能够帮助我，我将不胜感激。

干杯，

灰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:26:51.963

检查[http://blog.guilhemmarty.com/flippy/](http://blog.guilhemmarty.com/flippy/)

我不知道如何进行翻转（如果我用谷歌搜索了一下可能可以），但是上面的链接有翻转效果，如果你用谷歌搜索 jquery 翻转效果会有很多结果。更改内容很容易。

更新：

```
var contentVar = $('#box1back').html();

$("#flipbox").flip({
    direction:'tb',
    content: contentVar
}); 
```

类似的东西

更新：我做了一些挖掘，这是一个工作示例

[http://jsfiddle.net/tvdCk/19/](http://jsfiddle.net/tvdCk/19/)

# asp.net - 单击加载到 iFrame 中的链接后，如何让页面返回顶部？

> ID：11122149
> 
> 赞同：0
> 
> 时间：2012-06-20T14:48:00.767
> 
> 标签：asp.net, html, vb.net, iframe, hyperlink

我的页面左侧有一个链接列表，这些链接比页面右侧的 iframe 向下延伸得更远。我怎样才能拥有它，以便当我单击链接并且 iframe 重新加载时，窗口也会重置到页面顶部？

编辑：我尝试做一个锚，但这不起作用，因为内容在 iframe 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T15:32:30.240

```
<a target="_blank|_self|_parent|_top|framename"> 
```

*   **_blank** 在新窗口或选项卡中打开链接的文档
*   **_self** 在单击的同一框架中打开链接的文档（这是默认设置）
*   **_parent** 在父框架中打开链接的文档
*   **_top**在整个窗口中打开链接的文档
*   **framename** 在命名框架中打开链接的文档

_top 将为您完成工作

[http://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)

# awk - awk if - if 之后的语句

> ID：11122151
> 
> 赞同：2
> 
> 时间：2012-06-20T14:48:12.000
> 
> 标签：awk

您能帮我解决以下语法错误吗？当我在“if”之后有一个语句时，程序就可以工作了。但是当我想要在“if”之后的两个语句时，我得到了错误。谢谢，卡尔。

```
BEGIN { FS = “,” }
{ if ( $2 == “” && ( $6 == “Install” || $6 == “Add” || $6 == “New”) )
{
print $1″,”$2″,”$3″,”$4″,”$5″,”$6″,”$7″,”$8″,”$9 > “Email_Asset_Add” ;
print “$8″,”$9 > “Email_Asset_Add_Mitul” ;
}
else if ( $2 == “” && ( $6 == “Change” || $6 == “Update” || $6 == “Existing”) )
{
print $1″,”$2″,”$3″,”$4″,”$5″,”$6″,”$7″,”$8″,”$9 > “Email_Asset_Update” ;
print “$8″,”$9 > “Email_Asset_Update_Mitul” ;
}
} 
```

awk -f awk_program test_email awk：第 23 行附近的字符串中的换行符 awk：第 28 行附近的字符串中的换行符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:05:17.343

我建议使用`printf()`.

例如，这个：

```
print $1”,”$2”,”$3”,”$4”,”$5”,”$6”,”$7”,”$8”,”$9 > “Email_Asset_Add” ; 
```

可以变成这样：

```
printf("%s,%s,%s,%s,%s,%s,%s,%s,%s\n", $1,$2,$3,$4,$5,$6,$7,$8,$9) > “Email_Asset_Add”; 
```

更容易看到事情在哪里。

事实上，整个事情都可以通过一些重构来完成：

```
BEGIN {
  FS = “,”;
}

{
  if ( $2 == “” && ( $6 == “Install” || $6 == “Add” || $6 == “New”) ) {
    output="Email_Asset_Add";
  } else
  if ( $2 == “” && ( $6 == “Change” || $6 == “Update” || $6 == “Existing”) ) {
    output="Email_Asset_Update";
  } else {
    next;
  }
  printf("%s,%s,%s,%s,%s,%s,%s,%s,%s\n", $1,$2,$3,$4,$5,$6,$7,$8,$9) > output;
  printf("%s,%s\n", $8,$9); > “Email_Asset_Update_Mitul” ;
} 
```

# javascript - scrollTop 每次都在顶部重置

> ID：11122152
> 
> 赞同：-1
> 
> 时间：2012-06-20T14:48:13.037
> 
> 标签：javascript, jquery

我得到以下代码：

```
<script type="text/javascript">
    jQuery(document).ready(function(){
    var Opened = false;
    jQuery('.expend-schedule').click(function(e){
        // On empêche l'action
        e.preventDefault();

        // Variable
        var DataType = jQuery(this).attr('data-type');

        // On va fermer toutes les tables
        jQuery('.schedule').each(function(){
            // On va fermer uniquement si ouverte
            if( jQuery(this).css('display') != 'none' && jQuery(this).attr('data-type') != DataType ){
                // On ferme
                jQuery(this).fadeOut( 500, function(){
                    // Est-ce que l'animation et l'ouverture s'est produite déjà ?
                    if(Opened === false){
                        var TableElement = jQuery('.schedule[data-type="'+DataType+'"]');
                        // On ouvre et on s'y déplace de façon automatique
                        TableElement.fadeIn(TableElement.height() * 0.47, function(){
                            jQuery('html, body').animate({  
                                scrollTop: TableElement.offset().top - 50
                            }, 'slow');
                        });

                        // On dit que c'est ouvert, afin d'empêcher l'ouverture à de multiples reprises
                        // si'il y a eu un bug
                        Opened = true;
                    }
                });
            }
        });

        // On reset
        Opened = false;
    });
</script> 
```

这是我的页面的示例：

```
<h4 class="sep_bg"><a class="expend-schedule" data-type="week" href="#">Monday to Friday</a></h4>
<table class="schedule table table-condensed" data-type="week">
    <thead>
        <tr>
            <th style="width: 60px;">Hour</th>
            <th style="width: 710px;">Transit</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>04h</td>
            <td>04h15, 04h27, 04h39, 04h59</td>
        </tr>
    </tbody>
</table>

<h4 class="sep_bg"><a class="expend-schedule" data-type="saturday" href="#">Saturday</a></h4>
<table class="schedule table table-condensed" data-type="saturday">
    <thead>
        <tr>
            <th style="width: 60px;">Hour</th>
            <th style="width: 710px;">Transit</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>04h</td>
            <td>04h15, 04h27, 04h39, 04h59</td>
        </tr>
    </tbody>
</table> 
```

所以我的问题是：

每次我单击类所在的某个位置时`expend-schedule`，它应该从当前滚动位置移动到元素位置。这是可行的，只是当我单击时，它会直接转到页面顶部，然后移动到元素位置。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:05:00.620

浏览器似乎首先尊重`<a href="#">`链接，将其带到页面顶部，然后执行您的动画。

我会将其更改`<a href="javascript:void(0);">Text</a>`为解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:23:07.503

我认为它不会达到顶峰，我尝试使用您提供的代码对其进行测试（缺少一些括号）。无论如何，我认为淡出会导致事物移动到顶部然后下降的感觉，因为您的 scrollTop 在动画完成功能中。如果你去掉淡入淡出，那么它就可以正常工作，尽管对我来说它只有在下一次点击没有做任何事情时才起作用。

所以在没有褪色的情况下测试它，看看它是否仍然在做你认为它正在做的事情。

# java - 如何使用 ASM 将操作码从一个方法复制到 Java 类文件中的另一个方法？

> ID：11122155
> 
> 赞同：0
> 
> 时间：2012-06-20T14:48:21.897
> 
> 标签：java, java-bytecode-asm, bytecode-manipulation

这是一些代码。

```
static synchronized void q(ua paramua, int paramInt) {
try {
 if (d) { if (paramInt > -16711936);
   return; }
 if (q * 514194583 > 0) { if (paramInt > -16711936);
   abf localabf = new abf(paramua);
   n.d(localabf, -984409319);
 }
 else {
   paramua.ma(false);
 }
 return; } catch (RuntimeException localRuntimeException) { throw aht.d(localRuntimeException, "ck.q(" + 41);
}
}

static synchronized void b(ua paramua)
{
  if (d) return;
  if (q * 514194583 > 0) {
    abf localabf = new abf(paramua);
    n.d(localabf, -836239689);
  }
  else {
    paramua.ma(false);
  }
} 
```

这两种方法执行相同的操作。第一种方法的第二个参数是psudo-argument，所以我想把原代码清空，把这个方法做成这样……

```
static synchronized void q(ua paramua, int paramInt)
{
  if (d) return;
  if (q * 514194583 > 0) {
    abf localabf = new abf(paramua);
    n.d(localabf, -836239689);
  }
  else {
    paramua.ma(false);
  }
} 
```

我该怎么做这个动作？我试过这样。

```
destMethodNode.instructions.clear();
destMethodNode.instructions.add(srcMethodNode.instructions); 
```

但抛出空指针异常。是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:13:04.640

[请参阅 ASM项目页面](http://asm.ow2.org/)链接的 AOSD'07 论文的“将两个类合并为一个”部分。它提供了如何正确使用 MethodNode 将方法的字节码复制到另一个方法的示例。

# api - 如何从 Klout (V2) API 中检索超过 5 个影响者？

> ID：11122156
> 
> 赞同：1
> 
> 时间：2012-06-20T14:48:25.957
> 
> 标签：api, limit, cap, klout

我正在尝试从 Klout API 中获取某个用户的所有影响者和影响力。我正在使用这个电话：

```
user.json/{kloutId}/influence

Influence returns two arrays:

* myInfluencers - Who influences the user
* myInfluencees - Whom the user influences 
```

[[文档]](http://klout.com/s/developers/v2)

我的 GET 请求如下所示：

```
http://api.klout.com/v2/user.json/[kloutID of user]/influence?key=[API key] 
```

这就是返回的内容：

```
Object
* myInfluencees: (Array[5])
* myInfluenceesCount: 25
* myInfluencers: (Array[5])
* myInfluencersCount: 15 
```

`myInfluencees`and是数组（已`myInfluencers`注释掉）始终限制为 5 个用户。尽管它告诉我总共有 25 个和 15 个。如果我多次拨打同一个电话，我总是会得到相同的 5 个用户。

有没有办法检索所有影响者/影响者的完整列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:06:07.910

这不是 Klout 在其标准 API 产品中提供的东西。这可能是他们将来提供的东西，或者是不同的服务水平。如果您需要更高的访问权限，您应该向partners@klout.com 发送电子邮件，提供有关您的应用程序、使用情况等的一些详细信息。

# survey - 这个关于进行随机在线调查的短语是什么意思？

> ID：11122157
> 
> 赞同：0
> 
> 时间：2012-06-20T14:48:27.420
> 
> 标签：survey

关于在线调查，有 3 种基本类型的问题 - 单打、多打和网格资格。网格类型基本上是一系列单打问题 - 可能对餐厅的食物、装饰、空气等进行评分。

所以我被要求：

> 允许随机化单拳、多拳和网格资格类型的响应（包括锚定某些资格的能力）。

我想我得到了随机部分 - 只是随机回答。我对“锚定某些人”的含义感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:59:58.660

所以 j08691 是对的——这意味着某些选择总是出现在某些地方。通常选择“以上都不是”。

# java - 在 Android 中建立 FTP 连接

> ID：11122165
> 
> 赞同：3
> 
> 时间：2012-06-20T14:48:41.193
> 
> 标签：java, android, networking, android-source

我正在制作一个 Android 应用程序，可以使用此[链接](http://www.lysesoft.com/products/andftp/intent.html#download "单击此处转到 taht 链接")将数据从 android 手机上传和下载到服务器。

因为我是连接 Android 与服务器的新手。是我的本地主机作为服务器下载和上传。我在用

```
 Uri ftpUri = Uri.parse("ftp://10.0.2.2"); 
```

但它不起作用帮助我摆脱这个问题。

我需要您的帮助才能成功连接到服务器，正如我已经说过的那样，我是一个将 Android 应用程序连接到服务器的新手。我正在学习自己编程，互联网是我的老师。

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:51:17.963

您应该能够通过 Apache commons ftp 包使用基本的 JAVA 实用程序。这不是特定于 Android 的。

5 分钟在 google 上，或者 10 分钟使用你的 JAVA 参考书会告诉你怎么做。这是文档：

[http://commons.apache.org/net/](http://commons.apache.org/net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:13:07.677

不要忘记下载 apache 网络库： [http ://commons.apache.org/net/download_net.cgi](http://commons.apache.org/net/download_net.cgi)

并将其包含在您的“libs”目录中，以使其在您的 android 项目的构建/运行时可用。

# javascript - 删除用户点击的图片

> ID：11122166
> 
> 赞同：2
> 
> 时间：2012-06-20T14:48:45.177
> 
> 标签：javascript, jquery

我正在做一个记忆配对游戏。我有一些代码可以检查用户单击的两个图像是否具有相同的来源，如果它们具有相同的来源，则将其删除。

```
(function compareClicked() {
    var lastclicked = "";
    $("img").click(function() {
        var path = $(this).attr("src");
        if( lastclicked == path) {
            $('img').hide(1000, function () {
            $(this).remove();
             });
        }
        else {
            if( lastclicked != "") alert("Not a match");
        }
        lastclicked = path;
    });
})(); 
```

但是，如您所见，当它们具有相同的来源时，它会删除页面上的所有图像 - 即使用户没有单击任何图像。如何更改它，使其仅删除用户单击的两个图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T14:49:56.507

```
var lastclicked = "";
$("img").click(function() {
    var path = $(this).attr("src"); // or this.src
    if (lastclicked == path) {
        $(this).hide(1000, function() {
            // remove image with same src as lastClicked
            $('img[src="' + lastclicked + '"]').remove();
        });
    } else {
        if (lastclicked != "") alert("Not a match");
    }
    lastclicked = path;
}); 
```

**[演示](http://jsfiddle.net/QStkd/353/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T14:58:21.500

如果您多次（超过两次）获得相同的 Src，我真的建议`tag`您单击单击的图像以知道应该隐藏哪一个。如前所述，您可以为此目的使用`attr`或特殊。`class`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T15:18:56.927

像这样的东西怎么样

```
var lastEl = null;

$(document).ready(function(){

$('img').each(function(index){
  $(this).attr('id','img-' + index);
});    

$('img').click(function(){
  if( lastEl ) {
    if( ($(this).attr('src') == lastEl.attr('src')) && ($(this).attr('id') != lastEl.attr('id')) ) {
      $(this).remove();
      lastEl.remove();
    }
    lastEl = null;
  } else {
    lastEl = $(this);
  }
});

}); 
```

还没有测试过，但它必须非常接近

编辑：根据下面的对话更新了代码。JS小提琴在这里[http://jsfiddle.net/joevallender/pc3Qa/3/](http://jsfiddle.net/joevallender/pc3Qa/3/)

再次编辑：JS小提琴链接现在应该是正确的

# c# - gridview 行 onclick 事件阻止每行中的模板按钮 onclick 在 google chrome 和 safari 中触发，但它适用于 IE 和 firefox

> ID：11122170
> 
> 赞同：1
> 
> 时间：2012-06-20T14:48:50.500
> 
> 标签：c#, gridview, onclick, c#-2.0, buttonclick

我有一个gridview，在每一行内我都有一个带有commandName“Activate”的按钮。我还将 onclick 行为添加到 gridview 行以选择行并显示带有一些信息的表单。问题是：当我单击按钮而不是激活命令时，选择命令将触发。

我是这样做的：

```
 <asp:TemplateField>
                        <ItemTemplate>
                            <asp:Button CommandName="Activate" ID="btnActivate" runat="server" Text="Activate" CausesValidation="false"></asp:Button>
                        </ItemTemplate>
                        <ItemStyle Wrap="false" />
                        </asp:TemplateField> 
```

然后我在这里管理命令：

```
 protected void gridview_RowCommand(object sender, GridViewCommandEventArgs e)
    {
            switch (e.CommandName.ToUpper())
            {
                case "SELECT":
                    GridViewRow row1=(GridViewRow)grvCustomerCredit.Rows[Convert.ToInt32(e.CommandArgument)];
                    selectedRowIndex = row1.RowIndex;
                    txbCC_CITY.Text = row1.Cells[4].Text;
                    txbCC_PROVINCE.Text = row1.Cells[5].Text;
                    row1.ForeColor = System.Drawing.Color.White;
                    break;
                case "ACTIVATE":
                    GridViewRow row2 = (GridViewRow)((Control)e.CommandSource).Parent.Parent;
                    creditID = Convert.ToInt32(gridview.DataKeys[row2.RowIndex].Value);
                    {do the Activate Action}
                    break;
            }
     } 
```

这就是我在每一行上添加 onclick 的方式：

```
 protected override void Render(System.Web.UI.HtmlTextWriter writer)
    {
        foreach (GridViewRow row in gridview.Rows)
        {
            row.Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(gv, "Select$" + row.RowIndex.ToString(), true));
        }
        base.Render(writer);
    } 
```

在 gridview 行上添加 onclick 激活按钮之前工作正常。如何将第一优先级设置为按钮单击而不是行单击？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:23:50.887

```
protected override void Render(System.Web.UI.HtmlTextWriter writer)
{
    foreach (GridViewRow row in gridview.Rows)
    {
        row.Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(gv, "Select$" + row.RowIndex.ToString(), true));
    }
    base.Render(writer);
} 
```

在此功能中，您提到了“选择”，因此仅使用选择功能。替换成

```
 row.Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(gv, "ACTIVATE$" + row.RowIndex.ToString(), true)); 
```

# asp.net-mvc-3 - ASP.Net MVC Razor 从 DateTime 属性中删除时间

> ID：11122171
> 
> 赞同：15
> 
> 时间：2012-06-20T14:48:50.870
> 
> 标签：asp.net-mvc-3, datetime, razor

我正在使用 Razor Views 开发一个 ASP.Net MVC 3 Web 应用程序。我有以下 ViewModel 传递给我的 Razor 视图并迭代以显示记录列表。

**视图模型**

```
public class ViewModelLocumEmpList
{
    public IList<FormEmployment> LocumEmploymentList {get; set;}
} 
```

**看法**

```
<table>
  <tr>
   <th>Employer</th>
   <th>Date</th>
   </tr>
    @foreach (var item in Model.LocumEmploymentList) {
      <tr>
        <td>@item.employerName</td>
        <td>@item.startDate</td>
      </tr>
      }
      </table> 
```

我的问题是这条线

```
@Html.DisplayFor(modelItem => item.startDate) 
```

返回这样的日期**20/06/2012 00:00:00**，我希望它删除时间并仅显示日期，即**20/06/2012**。

我试过添加

```
@Html.DisplayFor(modelItem => item.startDate.Value.ToShortDateString()) 
```

和

```
DisplayFor(modelItem => item.startDate.HasValue ? item.startDate.Value.ToShortDateString(): "") 
```

但是，它们都在运行时返回以下错误消息

```
Templates can be used only with field access, property access, single-dimension array index, or single-parameter custom indexer expressions. 
```

我在这里查看了 Darin Dimitrov 的回答[Converting DateTime format using razor](https://stackoverflow.com/questions/4679352/converting-datetime-format-using-razor)

但是，我无权访问 ViewModel 中的 startDate 属性，我的 ViewModel 返回您可以在上面看到的 FormEmployment 对象的 IList。

如果有人对如何从日期时间属性中删除时间有任何想法，那么我将不胜感激。

谢谢。

另外，我的 startDate 属性是 Nullable。

**更新**

根据 PinnyM 的回答，我添加了一个部分类（见下文）以将 [DisplayFormat] 属性放在 startDate 属性上。

```
public partial class FormEmployment
{
    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")]
    public Nullable<System.DateTime> startDate { get; set; }
} 
```

但是，我的 Razor View 仍然使用以下代码显示**20/06/2012 00:00:00**

```
@Html.DisplayFor(modelItem => item.startDate) 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-20T14:51:13.010

您可以使用 `@item.startDate.Value.ToShortDateString()`（为空值添加适当的验证）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-20T14:53:02.440

您可以在模型属性上使用 DisplayFormat 属性`startDate`：

```
[DisplayFormat(DataFormatString="{0:dd/MM/yyyy}")]
public DateTime? startDate { get; set; } 
```

刚刚使用`DisplayFor(modelItem => item.startDate)`

另一种选择是为格式创建一个只读属性：

```
public String startDateFormatted { get { return String.Format("{0:dd/MM/yyyy}", startDate); } } 
```

并使用`DisplayFor(modelItem => item.startDateFormatted)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-06T21:47:09.630

对我来说，我能够做与上述答案类似的事情，但使用“值”属性不断给出错误。

```
<td>
@item.DOB.ToShortDateString()
</td> 
```

其他需要注意的事项：我将 ASP.Net Core MVC 与 .NET 5 框架一起使用，因此不确定这些天是如何分类或调用的。

希望这可以帮助其他人在以后遇到这个问题。

# java - Android 充气机异常 FileNotFound

> ID：11122173
> 
> 赞同：1
> 
> 时间：2012-06-20T14:48:55.727
> 
> 标签：java, android

安装 ACRA 后，我开始收到各种崩溃报告。大多数都是有道理的，我边走边修。但这对我来说没有多大意义。

1.  这是在数百台设备上运行的版本 - 此错误在一段时间内多次在此设备上发生，现在似乎没问题。
2.  我无法重现它。
3.  res/drawable-mdpi/tire.png 确实存在。
4.  这是“故障”类型的异常，但我想知道是否有任何方法可以处理这个异常，也许其他人会看到这个堆栈跟踪不同。

编辑：

我有 2 个构造函数（不知道如何调试它们）

```
public TireView(Context context)
    {
        super(context);
        this.mContext = context;

        inflateLayout();
    }

    public TireView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        this.mContext = context;

        inflateLayout();

        final TypedArray a = getContext().obtainStyledAttributes(attrs,R.styleable.TireView);

        int i = a.getInteger(R.styleable.TireView_Number, -1);
        if (i != -1)
        {
            setNumber(i);
        }

        i = a.getInteger(R.styleable.TireView_Depth, -1);
        if (i != -1)
        {
            setDepth(i);
        }

        i = a.getInteger(R.styleable.TireView_Pressure, -1);
        if (i != -1)
        {
            setPressure(i);
        }

    } 
```

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.idatt/com.idatt.activities.TrailerInspectionActivity}：android.view.InflateException：二进制 XML 文件第 86 行：在 android 上膨胀类 com.idatt.views.TireView 时出错.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 在 android.app.ActivityThread.access$1500(ActivityThread.java:117)
> 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:130) 在 android。 app.ActivityThread.main(ActivityThread.java:3687) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
> at dalvik.system.NativeStart.main(Native Method)引起：android。 view.InflateException：二进制 XML 文件第 86 行：在 android.view.LayoutInflater.createView(LayoutInflater.java:518) 处膨胀类 com.idatt.views.TireView 时出错
> 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view。 LayoutInflater.rInflate(LayoutInflater.java:626)
> at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> at android.view.LayoutInflater.rInflate(LayoutInflater .java:626)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:408)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:320)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:276)
> 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:226) 在 android.app.Activity.setContentView(Activity.java:1657) 在 com.idatt.activities.TrailerInspectionActivity.onCreate(SourceFile:279 ) at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) ... 11 moreCaused by: java.lang.reflect.InvocationTargetException
> at java.lang. reflect.Constructor.constructNative(Native Method)
> at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
> at android.view.LayoutInflater.createView(LayoutInflater.java:505)
> ... 26 moreCaused by: android.content.res.Resources$NotFoundException: File res/drawable-mdpi/tire.png from drawable resource ID #0x7f02002a at android.content.res.Resources.loadDrawable(Resources.java:1714)
> 在 com.idatt.views.TireView.a(SourceFile:65) 在 com.idatt.views.TireView.a(SourceFile:65) 在 android.content.res.Resources.getDrawable(Resources.java:581)
> 在 android.view.View.setBackgroundResource(View.java:7533) 在 com。 idatt.views.TireView.(SourceFile:38) ... 29 moreCaused by: java.io.FileNotFoundException: res/drawable-mdpi/tire.png at android.content.res.AssetManager.openNonAssetNative(Native Method)
> at android。 content.res.AssetManager.openNonAsset(AssetManager.java:406)
> 在 android.content.res.Resources.loadDrawable(Resources.java:1706)
> ... 33 moreandroid.view.InflateException: Binary XML file line #86: Error inflating class com.idatt.views.TireView at android.view.LayoutInflater.createView(LayoutInflater.java:518)
> at android.view.LayoutInflater.createViewFromTag (LayoutInflater.java:570) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java: 626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android。 view.LayoutInflater.inflate(LayoutInflater.java:408)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:320)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:276)
> 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:226 ) at android.app.Activity.setContentView(Activity.java:1657) at com.idatt.activities.TrailerInspectionActivity.onCreate(SourceFile:279) at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) at android.app .ActivityThread.performLaunchActivity(ActivityThread.java:1615) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 在 android.app.ActivityThread.access$1500(ActivityThread.java:117)
> 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:130) 在 android。 app.ActivityThread.main(ActivityThread.java:3687) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
> at dalvik.system.NativeStart.main(Native Method)引起：java。 lang.reflect.InvocationTargetException 在 java.lang.reflect.Constructor.constructNative(Native Method) 在 java.lang.reflect.Constructor.newInstance(Constructor.java:415)
> 在 android.view.LayoutInflater.createView(LayoutInflater.java:505)
> ... 26 moreCaused by: android.content.res.Resources$NotFoundException: File res/drawable-mdpi/tire.png from drawable resource ID #0x7f02002a at android .content.res.Resources.loadDrawable(Resources.java:1714)
> 在 android.content.res.Resources.getDrawable(Resources.java:581)
> 在 android.view.View.setBackgroundResource(View.java:7533) 在 com。 idatt.views.TireView.a(SourceFile:65) at com.idatt.views.TireView.(SourceFile:38) ... 29 moreCaused by: java.io.FileNotFoundException: res/drawable-mdpi/tire.png at android .content.res.AssetManager.openNonAssetNative(Native Method)
> at android.content.res.AssetManager.openNonAsset(AssetManager.java:406)
> 在 android.content.res.Resources.loadDrawable(Resources.java:1706)
> ... 33 更多 java.lang.reflect.InvocationTargetException 在 java.lang.reflect.Constructor.constructNative(Native Method) 在 java.lang.reflect.Constructor .newInstance(Constructor.java:415)
> 在 android.view.LayoutInflater.createView(LayoutInflater.java:505)
> 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 在 android.view.LayoutInflater.rInflate(LayoutInflater. java:623)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:408)
> 在 android.view。 LayoutInflater.inflate(LayoutInflater.java:320)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:276)
> 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:226) 在 android.app.Activity.setContentView(Activity.java:1657) 在 com.idatt.activities.TrailerInspectionActivity.onCreate(SourceFile:279 ) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 在 android.app .ActivityThread.access$1500(ActivityThread.java:117)
> 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:130) 在 android。 app.ActivityThread.main(ActivityThread.java:3687) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
> at dalvik.system.NativeStart.main(Native Method)引起：android。 content.res.Resources$NotFoundException：来自可绘制资源 ID #0x7f02002a 的文件 res/drawable-mdpi/tire.png
> 在 android.content.res.Resources.loadDrawable(Resources.java:1714)
> 在 com.idatt.views.TireView.a(SourceFile:65) 在 com.idatt.views.TireView.a(SourceFile:65) 在 android.content.res.Resources.getDrawable(Resources.java:581)
> 在 android.view.View.setBackgroundResource(View.java:7533) 在 com。 idatt.views.TireView.(SourceFile:38) ... 29 moreCaused by: java.io.FileNotFoundException: res/drawable-mdpi/tire.png at android.content.res.AssetManager.openNonAssetNative(Native Method)
> at android。 content.res.AssetManager.openNonAsset(AssetManager.java:406)
> 在 android.content.res.Resources.loadDrawable(Resources.java:1706)
> ... 33 更多android.content.res.Resources$NotFoundException: 文件 res/drawable- mdpi/tire.png 来自可绘制资源 ID #0x7f02002a
> 在 android.content.res.Resources.loadDrawable(Resources.java:1714)
> 在 com.idatt.views.TireView.a(SourceFile:65) 在 com.idatt.views.TireView.a(SourceFile:65) 在 android.content.res.Resources.getDrawable(Resources.java:581)
> 在 android.view.View.setBackgroundResource(View.java:7533) 在 com。 idatt.views.TireView.(SourceFile:38) at java.lang.reflect.Constructor.constructNative(Native Method) at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
> at android.view.LayoutInflater.createView (LayoutInflater.java:505)
> 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:第626
> 章）
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view。 LayoutInflater.inflate(LayoutInflater.java:408)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:320)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:276)
> 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:226) 在 android.app.Activity.setContentView(Activity.java:1657) 在 com.idatt.activities.TrailerInspectionActivity.onCreate(SourceFile:279 ) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 在 android.app .ActivityThread.access$1500(ActivityThread.java:117)
> 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:130) 在 android。 app.ActivityThread.main(ActivityThread.java:3687) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
> at dalvik.system.NativeStart.main(Native Method)引起：java。 io.FileNotFoundException：
> 在 android.content.res.AssetManager.openNonAsset(AssetManager.java:406)的 android.content.res.AssetManager.openNonAssetNative(Native Method) 的 res/drawable-mdpi/tire.png
> 在 android.content.res.Resources.loadDrawable(Resources.java:1706)
> ... 33 更多java.io.FileNotFoundException: res/drawable-mdpi/tire.png
> 在 android.content.res.AssetManager.openNonAssetNative(Native Method)在 android.content.res.AssetManager.openNonAsset(AssetManager.java:406)
> 在 android.content.res.Resources.loadDrawable(Resources.java:1706)
> 在 android.content.res.Resources.getDrawable(Resources.java:581 )
> 在android.view.View.setBackgroundResource(View.java:7533) 在com.idatt.views.TireView.a(SourceFile:65) 在com.idatt.views.TireView.(SourceFile:38) 在java.lang。 java.lang.reflect.Constructor.newInstance(Constructor.java:415) 处的 reflect.Constructor.constructNative(Native Method)
> 在 android.view.LayoutInflater.createView(LayoutInflater.java:505)
> 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
> 在 android.view。 LayoutInflater.rInflate(LayoutInflater.java:626)
> at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> at android.view.LayoutInflater.rInflate(LayoutInflater .java:626)
> 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:408)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:320)
> 在 android.view.LayoutInflater.inflate(LayoutInflater.java:276)
> 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:226) 在 android.app.Activity.setContentView(Activity.java:1657 ) 在 com.idatt.activities.TrailerInspectionActivity.onCreate(SourceFile:279) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 在 android.app .ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 在 android.app.ActivityThread.access$1500(ActivityThread.java:117)
> 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:130) 在 android。 app.ActivityThread.main(ActivityThread.java:3687) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
> at dalvik.system.NativeStart.main(Native Method)

# java - 在java中的内存文件zip中

> ID：11122179
> 
> 赞同：2
> 
> 时间：2012-06-20T14:49:13.523
> 
> 标签：java, perl, http

我正在尝试从 URL 读取多个文件（可以是任何格式，即 pdf、txt、tiff 等）并使用 .zip 压缩它们`ZipOutputStream`。我的代码如下所示：

```
 // using in-memory file read
    // then zipping all these files in-memory
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ZipOutputStream zos = new ZipOutputStream(baos);
    .....

    URL url = new URL(downloadUrl); // can be multiple URLs

    ByteArrayOutputStream bais = new ByteArrayOutputStream();
    InputStream is = url.openStream();
    byte[] byteChunk = new byte[4096];
    int n;

    while ( (n = is.read(byteChunk)) > 0 )
    {
        bais.write(byteChunk, 0, n);
    }

    byte[] fileBytes = bais.toByteArray();

    ZipEntry entry = new ZipEntry(fileName);
    entry.setSize(fileBytes.length);

    zos.putNextEntry(entry);
    zos.write(fileBytes);
    zos.closeEntry();

    // close the url input stream 
    is.close();

    // close the zip output stream
zos.close();

    // read the byte array from ByteArrayOutputStream
    byte[] zipFileBytes = baos.toByteArray();

    String fileContent = new String(zipFileBytes); 
```

然后我将此内容“fileContent”传递给我的 perl 前端应用程序。

我正在使用 perl 代码下载这个压缩文件：

```
WPHTTPResponse::setHeader( 'Content-disposition', 'attachment; filename="test.zip"' );
WPHTTPResponse::setHeader( 'Content-type', 'application/zip');
print $result; // string coming from java application 
```

但它提供的 zip 文件已损坏。我认为数据翻译出了点问题。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T14:59:37.907

您的问题是认为您可以将 zip 字节输出到字符串中。此字符串不能用于再次复制 zip 内容。您需要使用原始字节或将字节编码为可以表示为字符串的内容，例如 base64 编码。

# ruby-on-rails - 如何从 ActionMailer 视图的“收件人”字段中获取电子邮件地址？

> ID：11122190
> 
> 赞同：5
> 
> 时间：2012-06-20T14:49:33.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, views, actionmailer, helper

我想让一个方法可以从邮件程序视图中访问，该方法返回一个布尔值，具体取决于电子邮件被发送到的用户。

例如，假设用户有一个`is_subscriber`可以为真或假的属性。该方法将包含如下内容：

```
def show_banner?
  FeatureManager.is_feature_available?(:subscription_banners) && !user.is_subscriber
end 
```

我想从邮件程序视图中访问此方法。

问题是，我的应用程序中有很多邮件程序（UserMailer、SubscriptionMailer、FollowUpMailer），并且每个邮件程序都依赖一个实例变量@user 似乎有点危险。

**有什么方法可以像本例一样从“收件人”字段访问电子邮件地址，**以便我可以通过他的电子邮件地址找到用户：

```
mail :to => @user.email, :subject => I18n.t('welcome_mail.subject') 
```

**这样做是个好主意还是有更通用的方法来制作这种辅助方法？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T11:17:38.507

您可以在 actionview 中使用*@_message*，它使您可以访问消息对象，您可以从中访问“to”、“from”等字段。

我有一个案例，我需要在所有邮件上都有一个取消订阅按钮，所以将它放在我的布局中，该布局在邮件程序中使用。我使用上述解决方案来查找邮件接收者并为相应的邮件实施退订。

# delphi - 为什么 memo.Lines 使用 TStrings 而不是 TStringList？

> ID：11122197
> 
> 赞同：20
> 
> 时间：2012-06-20T14:50:01.647
> 
> 标签：delphi, tstringlist, memo

为什么要`Memo.Lines`使用抽象类`TStrings`？为什么不使用它`TStringList`呢？

我应该`TStringList`在使用它之前将其转换为吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-20T15:06:36.257

`TMemo.Lines`, `TListBox.Items`,`TComboBox.Items`等; 所有都被声明为`TStrings`. 当心，谈论的是财产！内部创建的类型分别是`TMemoStrings`和`TListBoxStrings`，`TComboBoxStrings`它们都是存储的后代，`TStrings`并且在存储方式上有所不同。

为什么？为了互换性和互操作性。所以每个`TStrings`-descendant 都有相同的属性，所以你可以这样做：

```
Memo1.Lines := ListBox1.Items; 
```

如何使用？好吧，`TStrings`像这样的属性`TMemo.Lines`就可以了。您可以添加、删除、更改、更新和清除属性上的字符串（和对象），因为它在内部`TMemoStrings`实现了所有这些交互。声明<>实现。

但是当您需要任何特殊处理时，例如`TStringList`提供的排序，那么您需要帮助。您不能进行类型转换或将 a 转换`TMemo.Lines`为 a `TStringList`，因为它不是一个，但是您需要为此特殊处理创建一个中间对象：

```
var
  Temp: TStringList;
begin
  Temp := TStringList.Create;
  try
    Temp.Assign(Memo1.Lines);
    Temp.Sort;
    Memo1.Lines.Assign(Temp);
  finally
    Temp.Free;
  end;
end; 
```

# c# - 委托是如何执行的

> ID：11122200
> 
> 赞同：0
> 
> 时间：2012-06-20T14:50:16.800
> 
> 标签：c#, delegates

我正在使用一些我在网上找到的代码，但我还不太了解代表。我读了一些关于它的文章，但我看到的例子更加简单，而且不是很相似。这是我遇到问题的代码：

```
var cb = new Action<OAuthAccessToken, TwitterResponse>(CallBackVerifiedResponse);
service.GetAccessToken(_requestToken, pinText.Text, CallBackVerifiedResponse); 
```

`new Action`对象实际上是在执行该`CallBackVerifiedResponse`方法还是仅在第二行中发生？`OAuthAccessToken`并且`TwitterResponse`是该`CallBackVerifiedResponse`方法要求的参数的类型，但在我看来，它们在任何时候都没有被初始化。

有人可以给我一个解释或替代/更简单的方式来写这两行吗？这是以防万一的完整方法：

```
 void CallBackVerifiedResponse(OAuthAccessToken at, TwitterResponse response)
    {
        if (at != null)
        {
            SerializeHelper.SaveSetting<TwitterAccess>("TwitterAccess", new TwitterAccess
            {
                AccessToken = at.Token,
                AccessTokenSecret = at.TokenSecret,
                ScreenName = at.ScreenName,
                UserId = at.UserId.ToString()
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:54:26.870

两者都不。里面的代码会在某个时候`GetAccessToken`调用该方法。`CallBackVerifiedResponse`或不。取决于`GetAccessToken`. 我假设它会在验证响应后调用它。

基本上，委托是一种将函数交给某人并说“稍后在需要时调用此函数”的方法。

`OAuthAccessToken`并`TwitterResponse`在 内初始化`GetAccessToken`。这就是`GetAccessToken`- 异步获取`OAuthAccessToken`并在完成后告诉您的目标。委托的目的是为 API 提供一种机制来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:52:47.827

第一行和第二行都不执行该`CallBackVerifiedResponse`方法。在这两种情况下，该方法的方法指针都会传递给一个方法（在第一行中，传递给`Action`构造函数，在第二行中，传递给`GetAccessToken`.

该方法稍后可能会被`CallBackVerifierResponse`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:58:02.873

一个简单的例子

```
DoWork(CallThisWhenFinished);

public void DoWork(Action action) //<--GetAccessToken
{
    MessageBox.Show("DoWork");
    action();
}

public void CallThisWhenFinished() //<--CallBackVerifiedResponse
{
    MessageBox.Show("CallMeWhenFinished");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T14:58:41.047

您可以将委托视为对方法的引用。

在代码中：

```
service.GetAccessToken(_requestToken, pinText.Text, CallBackVerifiedResponse); 
```

该`CallBackVerifiedResponse`方法实际上并未执行。如果后面有括号：

`CallBackVerifiedResponse()`然后该方法将被执行，但没有括号，它将传递对该方法的引用，`service.GetAccessToken()`以便该方法可以执行该方法本身。

# java - 通过 HtmlUnit Web Client 进行登录认证

> ID：11122204
> 
> 赞同：2
> 
> 时间：2012-06-20T14:50:33.700
> 
> 标签：java, httpclient, webclient, htmlunit, urlconnection

我想使用 webclient 发布数据，但提交按钮有问题，因为我没有在页面源中获取提交按钮对象。所以我如何在 webclient 中使用此按钮。这是在 web 中创建按钮的源代码。

```
<a class="btn-cta btn-type1 _submit" onclick="hs.throbberMgrObj.add('._submit'); $('#member').submit();" href="#"> 
```

这是我正在使用的 HtmlUnit WebClient 代码-

```
HtmlHiddenInput submitButton = null;
            try {
                submitButton = forms.get(0).getInputByName("form_submit");
            } catch (Exception e) {
                e.printStackTrace();
            }
            HtmlTextInput usernameInput = form.getInputByName("");
            HtmlPasswordInput passInput = form.getInputByName("");
            usernameInput.setValueAttribute();
            passInput.setValueAttribute();
            HtmlPage pageAfterLogin = (HtmlPage) submitButton.click(); 
```

注意：我已经尝试过 HttpClient 和 urlConnection 但它没有提供正确的解决方案。

先谢谢了。

# sql - 用 id 替换存储过程中 xml 数据中存储的值

> ID：11122205
> 
> 赞同：0
> 
> 时间：2012-06-20T14:50:35.207
> 
> 标签：sql, xml, tsql, xpath

我有以下形式的 XML：

```
<Books>
    <Book>
        <Name>Lord of the Rings</Name>
    </Book>
    <Book>
        <Name>Harry Potter</Name>
    </Book>
    <Book>
        <Name>Girl with the Dragon Tattoo</Name>
    </Book> 
</Books> 
```

然后我有一个包含两列（Id 和 Name）的表：

*   1：指环王
*   2：哈利波特
*   3：龙纹身的女孩

使用 TSQL，我想将 XML 更新为：

```
<Books>
    <Book>
        <Name>1</Name>
    </Book>
    <Book>
        <Name>2</Name>
    </Book>
    <Book>
        <Name>3</Name>
    </Book> 
</Books> 
```

如，我需要查找“查找”表并将节点的值更新为 ID 而不是名称。

我能想到的唯一方法是创建一个循环并使用 XPath 提取名称，查询查找表，然后使用“替换值”对 XML 调用修改。有没有更好的方法，因为我想我提出的解决方案会很慢？该解决方案需要在 TSQL 中，并且不能在调用 SP 之前在业务逻辑中执行。我想有一种方法可以在基于集合的操作中做到这一点，但我很难找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:02:35.607

我认为你正走在正确的道路上。而且我个人认为不会很慢。或者你有其他发现吗？

[考虑来自 MSDN @ http://msdn.microsoft.com/en-us/library/ms190675.aspx](http://msdn.microsoft.com/en-us/library/ms190675.aspx)的这个例子

```
DECLARE @myDoc xml
SET @myDoc = '<Root>
<Location LocationID="10" 
            LaborHours=".1"
            MachineHours=".2" >Manu steps are described here.
<step>Manufacturing step 1 at this work center</step>
<step>Manufacturing step 2 at this work center</step>
</Location>
</Root>'
--SELECT @myDoc 
```

我认为这是一个非常快速的操作：

```
SET @myDoc.modify('
  replace value of (/Root/Location[1]/@LaborHours)[1]
  with (
       if (count(/Root/Location[1]/step) > 3) then
         "3.0"
       else
          "1.0"
      )
')
SELECT @myDoc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:27:18.427

我不认为这是一个优雅的解决方案，但为了确保有一个答案可以帮助其他人查看这个问题，这是我的解决方案：

```
DECLARE @BookId NVARCHAR(10)
DECLARE @BookName NVARCHAR(100)
DECLARE @Counter INT
DECLARE @MaxCounter INT
SET @Counter = 1

SET @MaxCounter = @BooksXml.value('count(/Books/Book)', 'int')

WHILE @Counter <= @MaxCounter
BEGIN
    SET @BookName = @BooksXml.value('(/Books/Book[sql:variable("@Counter")]/Name/text())[1]', 'nvarchar(100)')
    SELECT @BookId=CAST(ProductID AS NVARCHAR(10)) FROM Book WHERE Name = @BookName

    SET @BooksXml.modify('replace value of (/Books/Book[sql:variable("@Counter")]/Name/text())[1] with sql:variable("@BookId")')

    SET @Counter = @Counter + 1
END 
```

# actionscript-3 - 异步和同步连接同时打开

> ID：11122210
> 
> 赞同：1
> 
> 时间：2012-06-20T14:50:47.057
> 
> 标签：actionscript-3, sqlite, air

是否可以在 adobe air 应用程序中为同一个 sqlite 数据库打开同步和异步连接？异步连接仅用于读取操作。

# c# - Windows Azure 找不到 C++/CLI 项目的 DLL

> ID：11122213
> 
> 赞同：2
> 
> 时间：2012-06-20T14:51:10.770
> 
> 标签：c#, azure, c++-cli, cloud, unmanaged

我有一个包含非托管 C 压缩库的 C++/CLI 项目，该项目由调用 C++ 压缩函数的 MVC3 项目引用。

在本地一切正常，但是当我将解决方案发布到 Azure 云时，我收到一条错误消息，说它找不到模块/dll：

***无法加载文件或程序集“LZGEncoder.DLL”或其依赖项之一。指定的模块无法找到。***

为什么找不到DLL文件？它是去错了地方还是被编译了？有什么办法可以查吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T11:36:01.217

问题是云端缺少 Visual C++ 2010 运行时库。

我所做的是将 Visual C++ 2010 Redistributable 包添加到项目中，以及在启动时静默安装它的脚本，现在本地 dll 的工作。如果您使用本机 C dll，您也需要这个。

脚步：

1)[下载 Visual C++ 2010 Redistributable Package](http://www.microsoft.com/en-us/download/details.aspx?id=14632)，并将其添加到您的项目中。

2）创建一个新的批处理文件并将其添加到其中：
`vcredist_x64.exe /q /norestart
exit /b 0`

3) 打开***ServiceDefinition.csdef***文件并将其添加到相关的 WebRole 元素下：

```
<Startup>
  <Task commandLine="InstallVCRedist.bat" executionContext="elevated" taskType="simple" />  
</Startup> 
```

**更新：**
[Visual C++ 2012](http://www.microsoft.com/en-us/download/details.aspx?id=30679)已经发布并且相同的脚本可以工作，尽管每个人都应该确保 Azure 至少运行 Windows Server 2008 **R2**，否则启动任务将挂起并且角色永远不会启动（直到你在通过 RDP 的任务管理器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T16:22:41.350

如果您想验证 Azure VM 上的内容，只需尝试解压缩您的 CSPKG 文件，然后再次解压缩 .CSSX 文件（只需将 CSSX 重命名为 zip）并匹配每个引用都在那里。这样您就可以匹配 VM 上的内容。验证 VS 中缺少什么 DLL 后，选择 Reference DLL 并将其属性“Copy Local”设置为“True”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-11T06:32:45.923

您需要将所有 dll 放在实时服务器上存在的文件夹中。如果您从本地添加引用并且该位置不存在于现场，那么您将无法在现场构建代码。因此，在现场部署代码之前，请确保所有的 dll 都存在于现场。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T15:05:06.973

确保 C++ dll 和非托管 C 库（如果它是 .dll 而不仅仅是源代码）都包含在您的服务包中，并确保编译器将 C++ 库转储到正确的位置。[这篇文章](http://blogs.msdn.com/b/jnak/archive/2009/03/18/calling-into-native-dlls-on-windows-azure.aspx)有一个不错的演练。

# javascript - 如何使用 javascript 移动 div？

> ID：11122220
> 
> 赞同：-1
> 
> 时间：2012-06-20T14:51:24.790
> 
> 标签：javascript

我在页面中心有一个带有文本的 div。当我单击 div 时，它应该移动到页面上的任何位置（例如：100px 以上）。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T14:56:28.367

通过 id 检索元素，然后设置`onclick` `handler`. 然后你可以`position`为元素设置如下：

[jsFiddle](http://jsfiddle.net/j7q8U/)

```
var element = document.getElementById('myDivId');
element.onclick = function(){
   element.style.position = "absolute";
   element.style.left = '100px';
   element.style.top = '100px';
}​ 
```

# javascript - 用phonegap解压文件？

> ID：11122227
> 
> 赞同：3
> 
> 时间：2012-06-20T14:51:41.883
> 
> 标签：javascript, cordova, zip

我有一个 phonegap 应用程序，它需要获取网页的 zip 存档，解压缩并显示输出。

我一直在寻找使用phonegap 进行压缩/解压缩的方法，但一直未能成功。由于都是 Js，因此[JsZip](http://stuartk.com/jszip/)似乎可以提供答案，但他们的[测试套件](http://stuartk.com/jszip/test/)没有任何解压缩功能。

有人对如何实现这一目标有任何建议吗？

为后代编辑：我最终得到了使用[zip.js](http://gildas-lormeau.github.com/zip.js/)和一堆包装代码的 javascript 解压缩。它工作得很好，但处理器密集度很高。在桌面上用 chrome 解压缩一个 15mb 的 zip 文件大约需要 40 秒。对于任何关心性能的事情（大多数事情），我建议降级并直接从 ios/android 使用组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-03T00:49:40.713

cordova-plugin-zip 为我工作。它支持 iOS 和 Android 的原生解压缩。 [https://github.com/MobileChromeApps/cordova-plugin-zip](https://github.com/MobileChromeApps/cordova-plugin-zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:13:14.517

看到这个：[http ://cheeso.members.winisp.net/Unzip-Example.htm](http://cheeso.members.winisp.net/Unzip-Example.htm)

更多信息：[解压缩文件](https://stackoverflow.com/questions/2095697/unzip-files-using-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:48:45.170

如果 JavaScript 方法不起作用，您总是可以只编写一个插件。

# c - 插座压力测试

> ID：11122230
> 
> 赞同：1
> 
> 时间：2012-06-20T14:51:50.823
> 
> 标签：c, linux, sockets, libpcap

什么会更好地淹没网络？

1- 打开一个套接字到 http web 服务器并写入数据直到崩溃

2-打开多个套接字并写入数据直到崩溃

3- 打开一个套接字并发送 tcp 数据包直到崩溃

4-打开多个套接字并发送 tcp 数据包直到崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:40:57.647

It sounds like what you are looking to do is to test how the web server reacts to various flavors of Denial of Service attacks.

Something to consider is what is the Denial of Service logic in the web server and how is Denial of Service protection typically implemented in web servers. For instance is there logic to cap the number of concurrent connections or the number of concurrent connections from the same IP or to monitor the amount of traffic so as to throttle it or to disconnect if the amount of traffic exceeds some threshold.

One thing to consider is to not just push lots of bytes through the TCP/IP socket. The web server is interpreting the bytes and is expecting the HTTP protocol to be used. So what happens if you do strange and unusual things with the HTTP protocol as well as other protocols that are built onto HTTP.

For options 3 and 4 it sounds like you are considering bypassing the TCP/IP stack with its windowing logic and to just send a stream of TCP protocol packets ignoring reply packets until something smokes. This would be more of a test of the TCP stack robustness on the server rather than the robustness of the web server itself.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:26:13.807

达到网络饱和的能力取决于网络条件。有可能以这样一种方式编写你的“洪水”，它会减慢你的速度，因为你正在导致中间设备丢弃数据包，并且服务器本身最终没有看到它的最大负载。

您的应用程序应该从一个连接开始，并监控数据速率。如果所有连接的总数据速率继续上升，则继续添加连接。一旦它不再上升，您就达到了吞吐量限制。如果它开始下降，则说明您超出了系统的容量，并且导致拥塞控制启动，或者服务器无法有效处理那么多连接。如果吞吐量限制远低于您的预期，那么您可能需要调试您的网络，或调整您的 TCP/socket 参数。如果是服务器变慢了，您需要对其进行分析以了解它为什么无法处理连接负载。

此外，检查每个连接的数据速率，看看某些连接是否比其他连接快得多。如果发生这种情况，则服务器存在公平问题，也应予以解决。不过，这与服务器和网络性能的关系不大，因为它与良好的用户体验有关。这种问题的存在可能会在拒绝服务攻击中被利用。

# ruby - 在 Ruby 中获取当前堆栈跟踪而不引发异常

> ID：11122233
> 
> 赞同：152
> 
> 时间：2012-06-20T14:51:59.623
> 
> 标签：ruby, stack-trace

我想在 Rails 3 应用程序中记录当前的回溯（堆栈跟踪），*而不会*发生异常。知道怎么做吗？

我为什么要这个？我正在尝试跟踪 Rails 查找模板时进行的调用，以便我可以选择要覆盖的过程的一部分（因为我想更改我的特定子类控制器的视图路径）。

我想从文件中调用它：`gems\actionpack-3.2.3\lib\action_dispatch\middleware\templates\rescues\missing_template.erb`. 我知道这不是最佳实践，但我知道它位于堆栈的下游，从那里开始搜索模板。

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-07-02T10:31:54.673

您可以使用[`Kernel#caller`](https://ruby-doc.org/core/Kernel.html#method-i-caller)：

```
# /tmp/caller.rb

def foo 
  puts caller # Kernel#caller returns an array of strings
end

def bar 
  foo 
end

def baz 
  bar 
end

baz 
```

输出：

```
caller.rb:8:in `bar'
caller.rb:12:in `baz'
caller.rb:15:in `<main>' 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-11-07T12:54:39.793

尝试使用

```
Thread.current.backtrace 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-02T10:42:53.750

当引发异常时，我使用它来显示自定义错误页面。

```
rescue_from Exception do |exception|
  logger.error exception.class
  logger.error exception.message
  logger.error exception.backtrace.join "\n"
  @exception = exception

  # ExceptionNotifier::Notifier.exception_notification env, @exception

  respond_to do |format|
    if [AbstractController::ActionNotFound, ActiveRecord::RecordNotFound, ActionController::RoutingError, ActionController::UnknownAction].include?(exception.class)
      format.html { render :template => "errors/404", :status => 404 }
      format.js   { render :nothing => true, :status => 404 }
      format.xml  { render :nothing => true, :status => 404 }
    elsif exception.class == CanCan::AccessDenied
      format.html {
        render :template => "errors/401", :status => 401 #, :layout => 'application'
      }
      # format.js   { render :json => { :errors => [exception.message] }, :status => 401 }
      # format.js   { render :js => 'alert("Hello 401")' }
      format.js   { render :template => 'errors/401.js.erb' }

    else
      ExceptionNotifier::Notifier.exception_notification(env, exception).deliver        
      format.html { render :template => "errors/500", :status => 500 } #, :layout => 'im2/application' }
      # format.js   { render :nothing => true, :status => 500 }
      format.js   { render :template => 'errors/500.js.erb' }

    end
  end
end 
```

# asp.net-mvc - 如何调用具有不同控制器的局部视图？

> ID：11122239
> 
> 赞同：0
> 
> 时间：2012-06-20T14:52:12.160
> 
> 标签：asp.net-mvc, partial-views

在我的应用程序中，我想要一个包含 2 个部分视图的视图。部分视图有不同的控制器。我该怎么做？

```
@Html.Partial("../MyFolder/Index", Model.MyModel) 
```

不工作。我想调用 MyFolder 的控制器，而不是保存部分视图的控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:19:41.883

您的问题有点令人困惑，因为 Partial 未绑定到控制器。当然，您可以将部分视图放在与控制器关联的视图所在的同一文件夹中，但这并不意味着您必须使用该控制器来呈现它们。无论如何，您只需要 tilda 进入根目录：

> @Html.Partial("~/MyFolder/Index.cshtml", Model.MyModel)

# visual-studio-2010 - 为什么在使用 IIS Express 时出现错误 500.0（包括重要的调试信息）

> ID：11122240
> 
> 赞同：18
> 
> 时间：2012-06-20T14:52:13.453
> 
> 标签：visual-studio-2010, iis-express

我在 VS2010 SP1 上创建了一个空白的 MVC 3 应用程序，并将该应用程序设置为使用 IIS Express。调试时出现错误 500.0 (0x80070585)

我能够使用 VS 开发服务器成功运行该应用程序

我已将应用程序目录设置为每个人的完全权限，只是为了消除所有安全问题的可能性。我进一步验证了 IIS express 能够通过使用 SysInternals ProcMon 确认它来访问 web.config。ProcMon**没有**显示 IISExpress 进程试图从我的应用程序目录中的任何其他文件中读取。

我遵循了以下问题中的建议，但它没有给我任何更好的信息。[HTTP 500 内部错误 - IIS 网站](https://stackoverflow.com/questions/4416068/http-500-internal-error-iis-websites)

在 IISExpress 目录中的 Logs 或 TraceLogs 目录中都不会生成日志，但会在 Temp 中创建日志，但它不是很有用。

```
Successfully registered URL "http://localhost:62017/" for site "MvcApplication1" application "/"
Registration completed for site "MvcApplication1"
Request ended: http://localhost:62017/ with HTTP status 500.0
Request ended: http://localhost:62017/ with HTTP status 500.0
Request ended: http://localhost:62017/ with HTTP status 500.0 
```

我无法在事件查看器中找到任何消息

**更新：**禁用防火墙，没有变化 通过命令行运行 IISExpress，没有变化

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T16:16:20.893

上周我遇到了同样的问题，该应用程序在 VS Studio 的开发 Web 服务器中运行完美。但是在 IISExpress 中随时出现 HTTP 错误 500。我这次的解决方案是：

*   关闭 VS Studio - 使用 IISExpress 设置的解决方案
*   在您的个人资料中到达：/Document/IISExpress/config/
*   重命名或删除 applicationhost.config
*   在 VS Studio 中打开您的解决方案
*   一个对话框将从 IISExpress 启动 - 这将设置一个新的配置。
*   尝试运行您的网络应用程序

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-06-25T09:05:24.363

您可能在 Web.Config 文件中有一些 mime 代码，如下所示：

```
<mimeMap fileExtension=".svg" mimeType="image/svg+xml" /> 
```

如果是这样，您应该在添加之前删除 mimeMap：

```
.
..
...
....
  </system.web>
  <system.webServer>
    <staticContent>
      <remove fileExtension=".svg" />
      <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
    </staticContent>
  </system.webServer>

....
...
..
. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-14T18:02:00.763

这可能与 IIS Express applicationhost.config 和您的 web.config 之间的冲突有关。

一个 mimeType 添加到我的本地 web.config 中，它已经存在于 applicationhost.config 中，并且 IIS Express 开始处理许多 500 错误。

您可能还会在 Windows 事件日志中注意到此错误，“指定用于缓存压缩内容的目录无效。静态压缩正在被禁用。”

更多信息：[http ://blog.degree.no/2013/04/the-directory-specified-for-caching-compressed-content-is-invalid-static-compression-is-being-disabled/](http://blog.degree.no/2013/04/the-directory-specified-for-caching-compressed-content-is-invalid-static-compression-is-being-disabled/)

我从 web.config 中删除了 mimeTypes，问题得到了解决。

applicationhost.config 位置：`C:\Users\[User]\Documents\IISExpress\config`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-29T15:11:00.947

重新安装 iis express 似乎已经解决了这个问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T20:43:19.113

您是否使用任何 PLINQ( `.AsParallel`)`Parallel.For`或类似方法？我发现`AggregateException`MVC 不能很好地处理他们抛出的 s （在我的例子中，我得到了一个空白的 500 页，并且在日志/事件日志中没有任何内容）。

我通过注意`Debug`在 VS 的输出窗口中记录的“第一次机会”异常来确定问题。尝试运行该站点，等待它出错，清除“调试”窗口并重新加载页面。你看到什么有用的东西了吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-17T11:52:39.810

您的配置文件可能有问题，特别`web.config`是`applicationhost.config`.

我知道如何诊断此问题的唯一方法是将构建发布到常规 IIS，并在 IIS 管理器中检查站点的“错误页面”模块。如果这些配置文件确实存在问题，您将在此处弹出一个类似以下内容的弹出窗口：“无法添加类型的重复条目......”。相应地谷歌。
如果“重复条目”的类型为“错误”，您可以尝试在下面添加以下元素`httpErrors`：

```
<remove statusCode="404"/> 
```

也就是说，假设您`Error`在 HttpErrors 下方有一个带有 statusCode 404 的元素。（我曾经有过。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-20T08:29:12.993

在我的情况下，问题是由于使用 Windows 身份验证 + firefox + 错误的域登录而导致的权限不足。

详细信息：我的开发机器正在使用 Windows 域“domA”，应用程序将在接受来自域“domA”和“domB”的登录的环境中运行。虽然在网络服务器上两者都可以工作，但在我的开发机器上，只有我在“domA”中的帐户有足够的权限来访问应用程序的所有文件。在 IE 中默认使用“domA”，而在 FF 中，我得到一个登录对话框，在该对话框中我使用“domB”中的帐户登录。

我知道令人困惑的问题，但也许其他人也有同样的情况。至少下次我遇到它时它会帮助我。:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-11T11:23:03.203

以防万一抓到别人，我有类似的错误，但问题是我已经更新了我的 web.config 并且应该有一个额外的“>”字符。所以格式错误的 web.config 文件可能会导致相同的行为。

# c# - 使用包含变量名称的字符串访问变量

> ID：11122241
> 
> 赞同：9
> 
> 时间：2012-06-20T14:52:25.810
> 
> 标签：c#, string, variables, reflection

我正在从数据库中读取字符串变量的名称（例如“_datafile”）。我想知道如何使用这个字符串在我的程序中访问一个命名变量。

我已经尝试过使用字典、哈希表和 switch-case 语句，但我想让变量动态解析。这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T15:08:03.770

您的意思是要使用字段名称作为字符串来获取字段的值吗？

```
public class MyClass
{
    public string _datafile;

    public MyClass()
    {
        _datafile = "Hello";
    }

    public void PrintField()
    {
        var result = this.GetType().GetField("_datafile").GetValue(this); 
        Console.WriteLine(result); // will print Hello
    }
} 
```

**编辑：** @Rick，回复您的评论：

```
public class MyClass
{
    public IEnumerable<string> _parameters = new[] { "Val1", "Val2", "Val3" };

    public void PrintField()
    {
        var parameters = this.GetType().GetField("_parameters").GetValue(this) as IEnumerable;

        // Prints:
        // Val1
        // Val2
        // Val3
        foreach(var item in parameters)
        {
            Console.WriteLine(item);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:09:00.887

如果要根据字符串名称获取字段的值，则必须使用反射。

```
class MyClass
{
    public int DataFile { get; set; }

    public int _datafile;
}

var ob = new MyClass();
var typ = typeof(MyClass);
var f = typ.GetField("_datafile");
var prop = typ.GetProperty("DataFile");
var val = f.GetValue(ob);
var propVal = prop.GetValue(ob); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T15:04:28.910

通常你会创建一个类来表示一个表记录的值。如果你的表有一个`ID`a`FirstName`和一个`LastName`列，你会创建一个这样的类

```
public class Person
{
    public int ID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

然后你创建一个人员列表

```
var people = new List<Person>(); 
```

现在您可以将人员添加到列表中。

```
var p = new Person();
p.ID = 5;
p.FirstName = "John";
p.LastName = "Doe";
people.Add(p); 
```

* * *

您可以使用 DataReader 从表中读取

```
string sql = "SELECT * FROM tblPerson WHERE LastName LIKE @pattern";
cmd = new SqlCommand(sql);
cmd.Connection = "server=test;uid=sa;pwd=manager;database=northwind";
cmd.Parameters.AddWithValue("@pattern", "A%"); // Names beginning with "A"
using (SqlDataReader reader = cmd.ExecuteReader()) {
    // Get column indexes
    int idOrdinal = reader.GetOrdinal("ID");
    int firstNameOrdinal = reader.GetOrdinal("FirstName");
    int lastNameOrdinal = reader.GetOrdinal("LastName");

    while(reader.Read()) {
        var p = new Person();
        p.ID = reader.GetInt32(idOrdinal);
        p.FirstName = reader.GetString(firstNameOrdinal);
        p.LastName = reader.GetString(lastNameOrdinal);
        people.Add(p);
    }
} 
```

# javascript - JSON PUT 请求错误

> ID：11122243
> 
> 赞同：0
> 
> 时间：2012-06-20T14:52:33.607
> 
> 标签：javascript, jquery, json

我正在尝试使用 JSON 对 API 进行 PUT 调用。我正在使用 jQuery，据我所知，我的代码看起来是正确的：

```
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            url: 'https://app.clickdimensions.com/Service.svc/v1/account/accountIdHere/capture',
            type: 'PUT',
            data: { 'reg_FirstName': 'First',
                    'reg_LastName': 'Last',
                    'reg_Phone': '123-342-1211',
                    'reg_Email': 'email@email.com',
                    'reg_Company': 'My Company',
                    'reg_Address1': '123 Traffic Lane',
                    'reg_Address2': '',
                    'reg_City': 'Atlanta',
                    'reg_State': 'GA',
                    'reg_Zip': '12232',
                    'reg_Country': 'United States'  
            },
            success: function() { alert('PUT completed'); }
        });
    });
</script> 
```

但是当我运行它时，我收到以下错误：

```
XMLHttpRequest cannot load https://app.clickdimensions.com/Service.svc/v1/account/accountIdHere/capture. Origin http://localhost:65116 is not allowed by Access-Control-Allow-Origin. 
```

我到处寻找并尝试了所有我能找到的东西都无济于事。所以我认为我的代码可能是错误的 JSON PUT 调用。我的代码看起来不对吗？如果是这样，我该如何解决。如果没有，对那个错误有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:55:49.007

[您的代码是正确的，但是除非您从中请求数据的域返回正确的CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)标头，否则无法跨域执行 PUT 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:03:17.080

你的 jQuery 看起来不错。问题在于`Origin http://localhost:65116 is not allowed by Access-Control-Allow-Origin.`

这表明[跨域](https://developer.mozilla.org/En/HTTP_Access_Control)资源加载，在大多数情况下都是禁止的。如果您有控制权，`https://app.clickdimensions.com/Service.svc/v1/account/accountIdHere/capture`您可以修改它以允许来自特定域的此类请求，或者您可以使用[JSONP](http://api.jquery.com/jQuery.ajax/)而不是 JSON 来执行跨域请求，尽管我不确定您在这种情况下使用 HTTP PUT 是否成功。据我所知，JSONP 必须是 HTTP GET。

# javascript - 如何使用 Javascript 从网页中获取图像数据

> ID：11122244
> 
> 赞同：0
> 
> 时间：2012-06-20T14:52:36.300
> 
> 标签：javascript, dom, twitter

我正在使用[jsOauth-twitter](https://github.com/bytespider/jsOAuth-Twitter)将图像上传到调用[update_with_media api 方法](https://dev.twitter.com/docs/api/1/post/statuses/update_with_media)的 twitter 。看起来它需要实际的图像数据。这已经在我的网页上的普通`<img src="localfile">`标签内。

使用 Javascript，我可以获取实际的图像数据 (JPEG) 以将其传递给函数吗？它在 DOM 中可用吗？我需要原始图像数据，所以我可以将它作为应用程序/八位字节流传递给 twitter，所以 base64 对我没有好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:07:07.943

看起来 API 需要将表单作为 multipart/form-data 发送，这意味着 media[] 参数需要一个文件，而不是二进制或 base64 编码数据。如果您在表单中使用 HTML 文件输入，这应该是相当简单的。

如果你必须使用 <img> 标签，那就很难了。我能想到的只是将图像绘制到 <canvas>，获取 base64 编码的 URI ，使用[window.atob()](https://developer.mozilla.org/en/DOM/window.atob)`toDataURI()`对其进行解码以获取原始图像数据，然后手动构建 multipart/form-data POST 正文。[这个答案](https://stackoverflow.com/questions/934012/get-image-data-in-javascript/934925#934925)有一些关于前几件事的示例代码。

API 可能有助于创建您的 OAuth 库可以接受的`Blob`类似文件的对象（而不是手动构建请求正文），但它还没有得到很好的支持。

# c++ - 用于运行时优化的矩阵求幂方法

> ID：11122247
> 
> 赞同：0
> 
> 时间：2012-06-20T14:52:48.743
> 
> 标签：c++, algorithm, math, optimization, matrix

任何人都可以请解释或建议一些关于矩阵求幂方法的好教程，以优化问题的解决方案： [byteland 的长城](http://www.codechef.com/problems/BWALL)

我上传的解决方案是基于动态规划的，具有以下基本方程：[ f(n) = f(n-1) + 4*f(n-2) + 2*f(n-3) ] 但解决方案是me 超出时间限制错误。

这是我构建的代码：

```
 #include<iostream>
    #define num 1000000007
    using namespace std;
    int main(){
        int t;
        cin>>t;
        while(t--){
            int n;
            cin>>n;
            if(n<=3){
                switch(n){
                    case 1:
                        cout<<1<<endl;
                        break;
                    case 2:
                        cout<<5<<endl;
                        break;
                    case 3:
                        cout<<11<<endl;
                        break;
                }
            }
            else{
                int a=1 , b=5 , c=11 ;
                int next;
                for(int i=4;i<=n;i++){
                    next = (c + 4*b + 2*a)%num ;
                    a = b;
                    b = c;
                    c = next;
                }
                cout<<next<<endl;
            }
        }
        return 0;
    } 
```

请建议用于优化解决方案运行时间的矩阵求幂方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:24:22.973

如果您有一个由以下定义的序列：

```
u(0) to u(d-1) are given
for n > d u(n)=a(1)*u(n-1)+…+a(d)*u(n-d) 
```

然后让 A 是由以下定义的伴随矩阵：

```
A(i,j) = a(d+1-j) if i = d
         1 if i+1 = j
         0 otherwise 
```

然后让`uinit = transpose(u(0) … u(d-1))`

你有`A^n*uinit = transpose(u(n) … u(n+d-1))`（你可以自己验证`A*transpose(u(n) … u(n+d-1)) = transpose(u(n+1) … u(n+d))`）。

然后你可以计算`A^n`O(Log(n)) 并用它来计算`u(n)`.

# java - 如何提交正确的值？

> ID：11122248
> 
> 赞同：0
> 
> 时间：2012-06-20T14:52:54.900
> 
> 标签：java, html, jsp, spring-mvc

```
 <c:forEach items="${movieList}" var="movie" varStatus="status">            
                    <tr class="<c:if test="${status.count % 2 == 0}">even</c:if>"> 
                        <td>${movie.title}</td> 
                        <td>${movie.genre}</td> 
                        <td>${movie.year}</td> 
                        <td>${movie.boxoffice}</td>
                        <td>
                            <form:form action=edit.htm>
                                <input type="hidden" name="edit" value="movie name">
                                <input type="submit" value="Edit">
                            </form:form>
                            <form:form action=delete.htm>
                                <input type="hidden" name="delete" value="movie name">
                                <input type="submit" value="Edit">
                            </form:form>
                    </tr>       
                </c:forEach> 
```

这是我目前拥有的代码部分。这个想法是显示电影数据，但也提供按钮将用户发送到填充的表单页面以编辑数据或简单地删除相应的数据并重定向到同一页面。我只是不确定如何传递电影对象。我知道这很简单，但我找不到以前使用的参考资料……谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:23:53.420

你可以试试这个：

将此对象放在隐藏的输入中

```
<input type="hidden" id="hidden_object" value="" name="hidden_object"></input> 
```

比您可以使用 getParameter() 方法访问该值

或者

将此对象放入您的会话中

在你的jsp中

```
<% session.setAttribute("movie", ${movie}); %> 
```

祝你好运

# css - 像图像一样缩放 iFrame css 宽度 100%

> ID：11122249
> 
> 赞同：60
> 
> 时间：2012-06-20T14:52:55.930
> 
> 标签：css, iframe, responsive-design

我想通过 CSS 将 iFrame 缩放到`width: 100%`，并且高度应该与宽度成比例地缩放。

使用`<img>`标签可以正常工作。

图像和 iFrame 都在 html 中定义了宽度和高度。

这里有一些例子：

```
<html>
    <style>
        #a{ width: 500px; }
        img{ width: 100%; height: auto }
    </style>
    <body>
        <div id="a">
            <img src="http://lorempixel.com/200/150/" width="200" height="150" />
        </div>
    </body> 
```

这适用于图像，但我希望 iFrame 具有相同的行为：

```
<html>
    <style>
        #a{ width: 900px; background: grey;}
        iframe{ width: 100%; height: auto }
    </style>
    <body>
        <div id="a">
            <iframe width="560" height="315" src="http://www.youtube.com/embed/RksyMaJiD8Y" frameborder="0" allowfullscreen></iframe>
        </div>
    </body> 
```

iFrame 呈现 100% 宽，但不会像图像那样按比例缩放其高度。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-08-25T12:24:11.753

图像和 iframe 之间的最大区别在于图像保持其纵横比。您可以将图像和 iframe 组合在一起，从而生成响应式 iframe。希望这能回答你的问题。

检查此链接，例如：http: [//jsfiddle.net/Masau/7WRHM/](http://jsfiddle.net/Masau/7WRHM/)

HTML：

```
<div class="wrapper">
    <div class="h_iframe">
        <!-- a transparent image is preferable -->
        <img class="ratio" src="http://placehold.it/16x9"/>
        <iframe src="http://www.youtube.com/embed/WsFWhL4Y84Y" frameborder="0" allowfullscreen></iframe>
    </div>
    <p>Please scale the "result" window to notice the effect.</p>
</div> 
```

CSS：

```
html,body        {height:100%;}
.wrapper         {width:80%;height:100%;margin:0 auto;background:#CCC}
.h_iframe        {position:relative;}
.h_iframe .ratio {display:block;width:100%;height:auto;}
.h_iframe iframe {position:absolute;top:0;left:0;width:100%; height:100%;} 
```

注意：这只适用于固定的纵横比。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-11-21T19:20:20.983

我想这是一种更清洁的方法。它适用于内联`height`和`width`属性（我在小提琴中设置了随机值来证明这一点）和 CSS`max-width`属性。

HTML：

```
<div class="wrapper">
    <div class="h_iframe">
        <iframe height="2" width="2" src="http://www.youtube.com/embed/WsFWhL4Y84Y" frameborder="0" allowfullscreen></iframe>
    </div>
    <p>Please scale the "result" window to notice the effect.</p>
</div> 
```

CSS：

```
html,body        {height: 100%;}
.wrapper         {width: 80%; max-width: 600px; height: 100%; margin: 0 auto; background: #CCC}
.h_iframe        {position: relative; padding-top: 56%;}
.h_iframe iframe {position: absolute; top: 0; left: 0; width: 100%; height: 100%;} 
```

[http://jsfiddle.net/7WRHM/1001/](http://jsfiddle.net/7WRHM/1001/)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-09-16T21:47:33.853

我最喜欢这个解决方案。简单、可扩展、响应迅速。这里的想法是创建一个高度为零的外部 div，底部填充设置为视频的纵横比。iframe 的宽度和高度都缩放到 100%，完全填满了外部容器。外部容器根据其宽度自动调整高度，内部的 iframe 也相应调整自身。

```
<div style="position:relative; width:100%; height:0px; padding-bottom:56.25%;">
    <iframe style="position:absolute; left:0; top:0; width:100%; height:100%"
        src="http://www.youtube.com/embed/RksyMaJiD8Y">
    </iframe>
</div> 
```

这里唯一的变量是外部 div 中的 padding-bottom 值。4:3 宽高比视频为 75%，宽屏 16:9 宽高比视频为 56.25%。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-02-08T10:43:49.227

您可以在此处使用视口单位而不是 %。像这样：

```
iframe {
    max-width: 100vw;
    max-height: 56.25vw; /* height/width ratio = 315/560 = .5625 */
} 
```

## [DEMO](http://jsfiddle.net/danield770/xs8Lnug1/3/)（调整大小看效果）

```
body {
  margin: 0;
}
.a {
  max-width: 560px;
  background: grey;
}
img {
  width: 100%;
  height: auto
}
iframe {
  max-width: 100vw;
  max-height: 56.25vw;
  /* 315/560 = .5625 */
}
```

```
<div class="a">
  <img src="http://lorempixel.com/560/315/" width="560" height="315" />
</div>

<div class="a">
  <iframe width="560" height="315" src="http://www.youtube.com/embed/RksyMaJiD8Y" frameborder="0" allowfullscreen></iframe>
</div>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-18T05:23:57.547

@Anachronist 离这里最近，@Simone 不远。元素上百分比填充的警告是它基于*其父级的*宽度，因此如果与您的容器不同，则比例将关闭。

最可靠、最简单的答案是：

```
body {
  /* for demo */
  background: lightgray;
}
.fixed-aspect-wrapper {
  /* anything or nothing, it doesn't matter */
  width: 60%;
  /* only need if other rulesets give this padding */
  padding: 0;
}
.fixed-aspect-padder {
  height: 0;
  /* last padding dimension is (100 * height / width) of item to be scaled */
  padding: 0 0 56.25%;
  position: relative;
  /* only need next 2 rules if other rulesets change these */
  margin: 0;
  width: auto;
}
.whatever-needs-the-fixed-aspect {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /* for demo */
  border: 0;
  background: white;
}
```

```
<div class="fixed-aspect-wrapper">
  <div class="fixed-aspect-padder">
    <iframe class="whatever-needs-the-fixed-aspect" src="/"></iframe>
  </div>
</div>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-16T15:11:41.567

在 Weebly “添加您自己的 html” 框中，这些解决方案都不适合我。不知道他们在用他们的代码做什么。但我在[https://benmarshall.me/responsive-iframes/](https://benmarshall.me/responsive-iframes/)找到了这个解决方案， 它运行良好。

CSS

```
.iframe-container {
  overflow: hidden;
  padding-top: 56.25%;
  position: relative;
}

.iframe-container iframe {
   border: 0;
   height: 100%;
   left: 0;
   position: absolute;
   top: 0;
   width: 100%;
}

/* 4x3 Aspect Ratio */
.iframe-container-4x3 {
  padding-top: 75%;
} 
```

HTML

```
<div class="iframe-container">
  <iframe src="https://player.vimeo.com/video/106466360" allowfullscreen></iframe>
</div> 
```

# git - 在不更改索引或工作树的情况下进行存储

> ID：11122251
> 
> 赞同：6
> 
> 时间：2012-06-20T14:53:05.960
> 
> 标签：git, git-stash

在*Git from the Bottom Up* John Wiegley 建议全天运行一个 cronjob，调用 git stash，然后调用 git stash apply。我很欣赏每小时（甚至更频繁地）对我的工作进行快照的想法，但我担心如果文件暂时消失或恢复到 HEAD，构建可能会中断。有没有另一种方法来实现目标，而不会冒这个风险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:29:08.153

您可以执行以下操作：

```
git branch -f autosave $(git stash create) 
```

这将强制分支`autosave`更新为新更新的存储对象。`git stash create`保存但不会触及您的索引和工作树。您可以依靠 reflog`autosave`来查找以前的版本，就像 stash 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:45:02.447

```
git update-ref refs/stash $(git stash create) 
```

这将创建一个存储（它可以像所有其他存储一样被引用和保存），而无需修改工作目录或索引。

（[来源](https://github.com/git/git/blob/master/git-stash.sh)）

# ruby-on-rails-3 - Rails 3.2：错误空文件上传结果

> ID：11122252
> 
> 赞同：0
> 
> 时间：2012-06-20T14:53:11.107
> 
> 标签：ruby-on-rails-3, jquery-plugins, file-upload, file-type

我正在尝试在我的 rails 应用程序中使用 jquery 文件上传插件来上传图像、文档和 pdf。我将接受的文件类型更改为接受 pdf 等。但是，当我单击“开始上传”时，出现以下错误（仅适用于 .pdf、.docx 和 .doc）：

```
Error emptly file upload result 
```

如果我尝试上传 .txt、.png、.jpg 或 .gif，它可以正常工作。我尝试增加最大文件大小并创建一个包含 1 个单词的 .pdf 文件，但仍然出现相同的错误。我一直在网上搜索，我经常看到人们建议使用 php 的 gd-extension，但我有一个 rails 应用程序，那么 gd-extension 有 rails 替代品吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:13:17.253

固定的！对于任何有同样问题的人，这就是我所做的：此修复适用于 Paperclip，仅供参考。

所以在你有'has_attached_file'的模型中，你需要在这里传递一个附加属性：:whiny => false，所以它应该看起来像：

```
has_attached_file :asset, 
    :styles => { :thumb => "100x100>" },
    :whiny => false,
    :storage => :s3,
    :s3_credentials => "config/s3.yml",
    :path => ":id/:style/:filename" 
```

":whiny" 默认设置为 true，如果 Paperclip 无法处理上传文件的缩略图，它本质上会引发错误，并且由于 pdf、doc 等没有缩略图，因此会引发 emptyResult 错误。

资料来源：

[Paperclip::NotIdentifiedByImageMagickError 当文件不是有效的附件内容类型时](https://stackoverflow.com/questions/2111716/paperclipnotidentifiedbyimagemagickerror-when-file-is-not-a-valid-attachment-c)

[https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip.rb](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip.rb)

# string - Powershell Import-Csv 结果数

> ID：11122254
> 
> 赞同：1
> 
> 时间：2012-06-20T14:53:12.153
> 
> 标签：string, powershell, csv

我想检查 .csv 数据库的“代码”属性的值。如果“代码”字段的前三个字符等于 (-eq) 到“产品”的前三个字符，则显示结果数（计数）并将输入添加到 .csv 数据库。

但是，计数并没有显示，就好像结果为空一样。

```
foreach ($row in $InventoryContents) 
{
    #Lets build a String first
    $exportString = $row.User +','+$row.Product+','+$row.Company+','+$row.Model+',';
    #Everything right so far

    #first three characters of Product
    $firstKey = $row.Product.SubString(0,3).ToUpper()
    echo $firstKey;

    #problem here
    $nonSortedContents = Import-Csv $nonSortedCsv | where-Object { ($_.Code.split('-')[0]) -eq $firstKey }
    #but arrapently this works : Import-Csv $nonSortedCsv| where-Object { ($_.Code.split('-')[0]) -eq "MON"}

    $lines = $nonSortedContents.count
    echo $lines
    #null

    #if not enetered
    if ($lines -eq $null)
    {
            $wholeKey = $firstKey +'-'+  ("{0:D5}" -f 0).ToString()
            $exportString = $exportString + $wholeKey
            $exportString -join  "," >> $nonSortedCsv
    }
    else
    {
            $wholeKey = $firstKey +'-'+  ("{0:D5}" -f $lines).ToString()
            $exportString = $exportString + $wholeKey
            $exportString -join  "," >> $nonSortedCsv
    }
} 
```

我得到了它的工作

> $nonSortedContents = @(Import-Csv $nonSortedCsv | where-Object { ($_.Code.split('-')[0]) -eq $firstKey })

显然，当 CSV 文件中只有一行时，Import-Csv 返回一个 PSCustomObject。当多于一行时，返回的对象是一个Object[]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:55:21.153

我对有条件填充的数组有类似的问题：

```
$csv = if ($someCondition) {
  @(Import-CSV someFile.csv)
} else {
  @(Import-CSV someFile.csv | Where-Object { $_.someColumn -eq "someValue" })
} 
```

然而，仅仅`Import-CSV`用数组符号包围线`@(...)`是不够的。就我而言，我还必须将变量显式声明为数组 ( `[array] $csv`)。例如：

```
[array] $csv = if ($someCondition) {
  @(Import-CSV someFile.csv)
} else {
  @(Import-CSV someFile.csv | Where-Object { $_.someColumn -eq "someValue" })
} 
```

我从这里得到提示：http: [//poshoholic.com/2009/07/03/powershell-quick-tip-when-you-store-an-array-make-sure-it-is-an-array/](http://poshoholic.com/2009/07/03/powershell-quick-tip-when-you-store-an-array-make-sure-it-is-an-array/)和这里：[https ://groups.google.com/forum/#!msg/microsoft.public.windows.powershell/L5J3WffAu9A/vK1mKj2nVncJ](https://groups.google.com/forum/#!msg/microsoft.public.windows.powershell/L5J3WffAu9A/vK1mKj2nVncJ)

# java - 将屏幕截图附加到 TestNG 失败的方法结果

> ID：11122261
> 
> 赞同：7
> 
> 时间：2012-06-20T14:53:45.403
> 
> 标签：java, selenium, screenshot, testng

我正在寻找一种将屏幕截图附加到 TestNG 报告的结果部分以获取失败方法的方法。

到目前为止，我可以通过执行以下操作将我的屏幕截图附加到 Reporter Output：

`Reporter.log("<br> <img src=.\\screenshots\\" + fileName + " /> <br>");`

但仍在努力将它们添加到失败方法的测试结果部分。

我能够实现侦听器并拦截最初在此处建议的 onTestFailure 操作： [如何在 testNG 报告中包含失败屏幕截图](https://stackoverflow.com/questions/8939337/how-can-i-include-a-failure-screenshot-to-the-testng-report)

这是一个例子：

```
 @Override
public void onTestFailure(ITestResult result) { 
    Reporter.setCurrentTestResult(result); 
    Reporter.log("<br> <img src=.\\screenshots\\Untitled.png /> <br>");
    Reporter.setCurrentTestResult(null); 
} 
```

但是 Reporter.log 功能仍然将我的信息推送到 Reporter 输出日志中，而不是在 Results->Failed methods->Failed method log 中。

更新（2014 年 3 月 14 日）：我附上了屏幕截图以澄清我的问题。问题不在于捕获屏幕截图并将其附加到报告中。那部分工作正常。问题是屏幕截图附加到报告的测试输出部分，但我想在结果 - > 失败方法中看到它。

![在此处输入图像描述](../Images/5d410ec0ade4e7cac6d268442ea5e3f5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:52:05.527

除了上面不要忘记将以下行添加到您的 testng 套件 xml

```
<listeners>
    <listener class-name="com.tests.DotTestListener" />
</listeners> 
```

**或者**

如果您从命令行执行它，则作为 listner 参数传递

```
java -classpath testng.jar;%CLASSPATH% org.testng.TestNG -listener com.tests.DotTestListener test\testng.xml 
```

参考：[http ://testng.org/doc/documentation-main.html#logging-listeners](http://testng.org/doc/documentation-main.html#logging-listeners)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:18:36.500

我还实现了相同的扩展 Testng TestListenerAdapter。通过捕获屏幕截图，然后使用 onTestFailure 将其附加到尺寸为 height=100 和 width=100 的图像的 Testng 报告中。如果这有助于解决您的问题，请参阅下文

```
 File scrFile = ((TakesScreenshot) WebdriverManager.globalDriverInstance).getScreenshotAs(OutputType.FILE);
      //Needs Commons IO library
      try {
        FileUtils.copyFile(scrFile, new File(file.getAbsolutePath()+ "/selenium-reports/html/" + result.getName() + ".jpg"));
        Reporter.log("<a href='"+ file.getAbsolutePath()+"/selenium-reports/html/" + result.getName() + ".jpg'> <img src='"+ file.getAbsolutePath()+"/selenium-reports/html/"+ result.getName() + ".jpg' height='100' width='100'/> </a>");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Reporter.setCurrentTestResult(null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T01:46:49.553

我有同样的问题，但它解决了。通过实施 SuitePanel，您将能够根据需要添加屏幕截图 [https://github.com/cbeust/testng/blob/master/src/main/java/org/testng/reporters/jq/SuitePanel.java](https://github.com/cbeust/testng/blob/master/src/main/java/org/testng/reporters/jq/SuitePanel.java)

我几乎不更改原始代码，除了

```
... 
// Description?
String description = tr.getMethod().getDescription();
if (! Strings.isNullOrEmpty(description)) {
    xsb.push("em");
    xsb.addString("(" + description + ")");
    xsb.pop("em");
}
// Add screen shot here
xsb.push(“img”,”src”,imagePath);
xsb.pop(“img”);

xsb.pop(D);
xsb.pop(D); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-12T13:35:58.310

如果问题仅与获取屏幕截图有关，您可以尝试像这样获取它：

```
private static byte[] GetCropImg(IWebDriver targetChrome, IWebElement targetElement)
        {
            var screenshot = ((ITakesScreenshot)targetChrome).GetScreenshot();
            var location = targetElement.Location;
            using (MemoryStream stream = new MemoryStream(screenshot.AsByteArray))
            {
                var rect = new Rectangle(location.X, location.Y, targetElement.Size.Width, targetElement.Size.Height);
                using (Bitmap bmpImage = new Bitmap(stream))
                {
                    using (Bitmap cropedImag = bmpImage.Clone(rect, bmpImage.PixelFormat))
                    {
                        using (MemoryStream ms = new MemoryStream())
                        {
                            cropedImag.Save(ms, ImageFormat.Jpeg);

                            byte[] byteImage = ms.ToArray();
                            return byteImage;
                        }
                    }
                }
            }
        } 
```

然后你可以保存文件或保存 sting64

```
var imgString64 = Convert.ToBase64String(byteImage); //Get Base64 
```

PS：在JAVA上应该差不多）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T06:04:15.737

如果要显示失败方法的屏幕截图，则必须捕获异常并修改其消息内容并将 img html 添加到该异常中，然后它将出现。如果您需要示例，请告诉我

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-18T12:13:58.417

[![在此处输入图像描述](../Images/df7ffffdcd733ba0c211809fbe08f242.png)](https://i.stack.imgur.com/n0OJy.png)您可以使用 @After 方法获取失败的测试用例屏幕截图，其中包含失败的测试类的名称。使用下面的代码段 [![在此处输入图像描述](../Images/978970166d4da3cf4a165a5a96292e5d.png)](https://i.stack.imgur.com/HlRTq.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-08T07:26:17.943

我有同样的问题，但现在已修复。我在基类中制作了一种捕捉屏幕截图的方法。此方法返回屏幕截图的完整路径。

```
public String getScreenshot (String screenshotName, WebDriver driver) throws IOException{
    DateFormat dateformate = new SimpleDateFormat("dd-mm-yy-hh-mm-ss");
    Date date = new Date();
    String currentdate = dateformate.format(date);
    String imageName =screenshotName+currentdate;
    TakesScreenshot ts=(TakesScreenshot)driver;
    File source=ts.getScreenshotAs(OutputType.FILE);
    String location =System.getProperty("user.dir")+"\\testOutput\\screenshot\\"+imageName+".png";
    File screenshotLocation =new File (location);
    FileUtils.copyFile(source, screenshotLocation);
    return location;

} 
```

添加使用此路径在 testng 报告中添加屏幕截图以及通过更新 testng TestNgListener-

```
public void onTestFailure(ITestResult arg0) {
    Object currentClass = arg0.getInstance();
    WebDriver driver = ((BrowserSetup) currentClass).getDriver();
    String name = arg0.getName();
    System.out.println(name);
    try {
        String screenshotPath =getScreenshot(name, driver);
        System.out.println("Screenshot taken");
        String path = "<img src=\"file://" + screenshotPath + "\" alt=\"\"/>";
        System.out.println(screenshotPath+" and path - "+path);
        Reporter.log("Capcher screenshot path is "+path);
    } catch (Exception e) {
        System.out.println("Exception while takescreenshot "+e.getMessage());
    }
    printTestResults(arg0);

} 
```

[![在此处输入图像描述](../Images/99ebc9ba14866d032848f06ff665d38a.png)](https://i.stack.imgur.com/DWTjG.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-12T06:24:18.370

我建议您使用 ReportNG 而不是原始的 TestNG 报告。

# sql - SQL Server 选择排名数据的第一个实例

> ID：11122262
> 
> 赞同：3
> 
> 时间：2012-06-20T14:53:49.470
> 
> 标签：sql, sql-server

我有一个创建这样的结果集的查询：

```
Rank   Name
1      Fred
1      John
2      Mary
2      Fred
2      Betty
3      John
4      Betty
4      Frank 
```

然后我需要为每个名称选择最低等级，例如：

```
Rank   Name
1      Fred
1      John
2      Mary
2      Betty
4      Frank 
```

这可以在 TSQL 中完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T14:56:15.677

```
SELECT MIN(Rank) AS Rank, Name
FROM TableName
GROUP BY Name 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T14:56:19.920

是的

```
select name, min(rank)
from nameTable
group by name 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T15:25:08.513

正如 Paul + Kevin 所指出的，可以使用`MIN / MAX`etc 提取从聚合返回值的简单情况（请注意，这`RANK`是一个保留字）

在更一般/更复杂的情况下，例如您需要找到第二个/第 N 个最高排名，您可以使用`PARTITION`s with`ROW_NUMBER()`进行排名，然后按排名进行过滤。

```
SELECT [Rank], [Name]
FROM
(
    SELECT [RANK], [Name], 
           ROW_NUMBER() OVER (PARTITION BY [Name] ORDER BY [Rank]) as [RowRank]
    FROM [MyTable]
) AS [MyTableReRanked]
WHERE [RowRank] = @N
ORDER BY [Rank]; 
```

# php - 通过外部列更新 MySQL 查询

> ID：11122265
> 
> 赞同：0
> 
> 时间：2012-06-20T14:53:55.437
> 
> 标签：php, mysql, sql

我有两个名为成员和订单的表。

成员表 ![会员栏目](../Images/2397ceb011d34e7bc1ce5f528d15b081.png)

Orders 表 ![订单栏](../Images/8c0d168bdde385da48417ebb71f03f78.png) 在我的 php 代码中，我想根据 members_id 更新 Orders 表中的列，members_id 是成员 id 表的外键。

我是这样说的：

```
$query = "UPDATE orders 
          SET package='$package', comments='$comments', refno='$refno', status='no'
          WHERE members_id.username='$username'"; 
```

我被困在 WHERE 查询部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T14:58:01.157

如果您需要根据*用户名*更新订单，则需要`JOIN`成员表：

```
UPDATE orders o
  INNER JOIN members m ON m.id = o.member_id
  SET o.package='$package', o.comments='$comments', o.refno='$refno', o.status='no'
  WHERE m.username='$username' 
```

或者，首先获取适当的成员 ID -`SELECT id FROM members WHERE username=...`然后在更新查询中使用它。

PS：不要忘记转义您在查询中放置的所有值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:59:32.710

尝试这个：

```
UPDATE orders o
INNER JOIN members m
ON o.member_id = m.id
SET package='$package', 
    comments='$comments', 
    refno='$refno', status='no' 
WHERE members_id.username='$username' 
```

[您应该使用PDO](http://php.net/manual/en/book.pdo.php)或任何其他方式来清理您的参数来保护您的查询免受 sql 注入，有关 sql 注入以及如何防止它的更多详细信息，请参阅 SO 中的这篇出色的帖子：[**Best way to prevent SQL Injection in PHP**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:03:00.600

正确的查询将是：

```
$query = "";

$query .= "UPDATE orders";
$query .= "SET  package='$package'";
$query .= ",comments='$comments'";
$query .= ",refno='$refno'";
$query .= ",status='no'";
$query .= "WHERE members_id=(";
$query .= "    SELECT id FROM members WHERE username='$username'";
$query .= ")"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T15:01:34.807

```
$query = "UPDATE orders SET package='$package', comments='$comments', refno='$refno', status='no' WHERE members_id=(select member_id from members where username='$username')"; 
```

通常你应该在你的 php/sql 代码中使用主键（member_id）而不是用户名来识别记录。这将降低 SQL 注入的风险，有助于避免用户名不唯一时出现的问题等。

# c# - 在 ASP.NET MVC C# 中使用 Jquery 更新部分视图

> ID：11122268
> 
> 赞同：14
> 
> 时间：2012-06-20T14:54:12.247
> 
> 标签：c#, jquery, asp.net-mvc, partial-views

我正在使用 MVC C# 和 Jquery。

我在一个相当大的页面中有一个部分视图，该页面有许多选项卡。

单击复选框，我喜欢更新表单内的部分视图。我得到的只是部分视图

这是我在 Jquery 中的代码：

```
 $('#activelist,#inactivelist').change(function () {

        var status = 'inactive';
        window.location.href = '@Url.Action("Skits","KitSection")' + '?id=' + id+ '&status=' + status;

    }); 
```

关于如何在如何调用表单中更新部分视图的任何想法？

这是 PartialView 的代码

```
 return PartialView(Kits); 
```

如前所述，我看到的只是显示的部分视图，而不是整个表单。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-20T14:58:54.667

`window.location.href`将重新加载整个页面。您需要重新加载页面的某些部分而无需完全重新加载。我们可以使用 jQuery ajax 来做到这一点。让我们找出可以用来获取 Partialview 的 jQuery 选择器。

例如，假设您的 HTML 标记在主窗体（视图）中是这样的

```
<div>
  <p>Some content</p>
  <div id="myPartialViewContainer">
      @Html.Partial("_FeaturedProduct")
  </div>
  <div>Some other content</div>
</div> 
```

这里的`DIV`with`ID` `myPartialViewContainer`是 Container div，它包含 .so 的内容。所以我们将使用 jQuery[加载](http://api.jquery.com/load/)方法`partial view`简单地重新加载该 div 的内容

```
$(function(){

   $('#activelist,#inactivelist').change(function () {
      var id="someval"; 
      var status = 'inactive';
      $("#myPartialViewContainer").load('@Url.Action("Skits","KitSection")' + '?id=' + id+ '&status=' + status)
  });

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T14:58:02.550

您正在通过 window.location.href 属性将用户重定向到您的部分的 URL，因此只显示该部分。

您应该改为对部分进行 AJAX 调用以检索它的 HTML，然后使用类似 .append 方法将其添加到您希望将其添加到的任何容器元素中。

编辑： .load() jQuery ajax 方法实际上更适合这种特定情况。

# c# - 使用基于 ASP.Net 的 REST API 的 Gzip 压缩

> ID：11122270
> 
> 赞同：0
> 
> 时间：2012-06-20T14:54:13.367
> 
> 标签：c#, asp.net, rest, compression, gzip

我有一个启用了 Gzip 压缩的 REST api，它是使用 ASP.net WebAPI 库开发的。当我使用 WebAPI 测试工具时，我可以看到以下标题：

```
Date: Wed, 20 Jun 2012 14:50:14 GMT
      Content-Encoding: gzip
      X-AspNet-Version: 4.0.30319
      X-Powered-By: ASP.NET
      Content-Length: 1028 
```

在我的客户端应用程序中，我调用 WS ：

```
HttpWebRequest req = (HttpWebRequest)System.Net.WebRequest.Create(URI);
            req.ContentType = "application/json";
            req.Method = "POST";                
            req.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate");
            req.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;

            // Add parameters to post
            byte[] data = System.Text.Encoding.Default.GetBytes(Parameters);
            req.ContentLength = data.Length;
            System.IO.Stream os = req.GetRequestStream();
            os.Write(data, 0, data.Length);
            os.Close();

            try
                {
                    string result = null;
                    using (HttpWebResponse resp1 = req.GetResponse()
                                                  as HttpWebResponse)
                    {
                        StreamReader reader =
                            new StreamReader(resp1.GetResponseStream());
                        result = reader.ReadToEnd();                        

                        return result;
                    }
                }
            catch (WebException ex)
            {
                System.IO.StreamReader sr = new System.IO.StreamReader(ex.Response.GetResponseStream());
                string outputData = sr.ReadToEnd().Trim();

                throw new Exception(string.Format("Error {0} From WebService call", outputData));
            } 
```

我遇到的问题是 resp1.ContentEncoding 总是空的。如果我在 IIS 服务器上打开或关闭 gzip 压缩，result.length 总是相同的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:27:36.900

使用 System.Net.WebClient 而不是 System.Net.WebRequest 解决了这个问题。

# drupal - 使用不同于节点 ID (n.nid) 的排序/排序的上一个/下一个导航

> ID：11122272
> 
> 赞同：0
> 
> 时间：2012-06-20T14:54:22.940
> 
> 标签：drupal, drupal-7, drupal-theming

我正在尝试在我的节点上创建“上一个/下一个节点”导航，以便在当前正在查看的术语中显示 2 个上一个和 2 个下一个节点。这是显示 2 个 prev 和 2 个 next 节点的代码，但它不支持分类，即它根据节点的 ID 对节点进行排序：

[上一个/下一个节点导航，带有完整节点中的缩略图](https://stackoverflow.com/questions/8901214/prev-next-node-navigation-with-a-thumbnail-in-a-full-node)

如果我在一段时间后在术语中添加一个节点，它会将此节点显示为最后一个节点，而不是显示为例如 3 个月前上传的节点的“邻居”。

我已经尝试过使用“ ***n.title*** ”，但它并没有改变任何东西。理想情况下，它应该按标题或 URL 别名对它们进行排序。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:56:24.767

它不是在数据库查询中查询分类表。您可能希望将变量添加到函数中，例如 dad_prev_next($current_node = NULL, $op = 'p', $tid) 以将术语 ID 传递给它，然后通过内部连接将其添加到查询中

```
SELECT n.nid, n.title
FROM {node} n
INNER JOIN {taxonomy_index} t
ON n.nid = t.nid
WHERE n.nid $sql_op :nid
AND t.tid = :tid
AND type IN ('photos')
AND status = 1
ORDER BY n.nid $order
LIMIT 1 
```

我认为这应该非常接近，然后在 db_query 的末尾传递它`db_query($sql, array(':nid' => $current_node -> nid, ':tid' => $tid));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:50:24.197

较新版本的上一个/下一个模块具有多个用于排序上一个/下一个节点的选项。您也可以使用解决方法来获取缩略图：

[http://drupal.org/project/prev_next](http://drupal.org/project/prev_next) http://drupal.org/node/1790290

# php - 大写字符串的第一个字母（前面有特殊字符） - PHP

> ID：11122274
> 
> 赞同：4
> 
> 时间：2012-06-20T14:54:30.190
> 
> 标签：php, regex, preg-match

我想大写一个字符串，如：

```
¿"hello"? 
```

我希望我的功能返回

```
¿"Hello"? 
```

我已经尝试使用正则表达式和 preg_match，但没有运气......这是我之前的问题，与这个问题相关： [“preg_match 匹配两个字符，而它应该只匹配一个字符”](https://stackoverflow.com/questions/10302582/preg-match-is-matching-two-characters-when-it-should-only-match-one)

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:27:12.350

使用 preg_replace_callback 如上所述 ascii-time，但 unicode 兼容：

```
echo preg_replace_callback('/^(\PL*)(\pL)/u', function($matches){
    return $matches[1] . mb_strtoupper($matches[2],'UTF-8');
}, '¿"éllo"?'),"\n"; 
```

**输出：**

```
¿"Éllo"? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:59:27.790

您可以使用[preg_replace_callback](http://php.net/preg-replace-callback)来做到这一点：

```
preg_replace_callback('/^([^a-z]*)([a-z])/i', function($matches){
    return $matches[1] . strtoupper($matches[2]);
}, '¿"hello"?');

// ¿"Hello"? 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T14:56:03.747

尝试`ucfirst`功能[http://php.net/manual/en/function.ucfirst.php](http://php.net/manual/en/function.ucfirst.php)

此类任务不需要正则表达式

样本

```
$foo = 'hello world!';
$foo = ucfirst($foo);             // Hello world! 
```

# java - 如何加快对 HashTable 的多次搜索

> ID：11122277
> 
> 赞同：0
> 
> 时间：2012-06-20T14:54:53.650
> 
> 标签：java

我有两个带有日志的文件（每个文件将近 5000 行）。每行中的文件都有一组与电子邮件相关联的规则，如下所示：

```
Y#12#EMAIL_1#RULE_1,RULE_2,RULE_3,RULE_4#time=993470174
Y#12#EMAIL_2#RULE_1,RULE_2,RULE_3,RULE_4#time=993470175
Y#12#EMAIL_3#RULE_1,RULE_2,RULE_3#time=9934701778 
```

我使用以下函数读取文件，并获取每封电子邮件的规则：

```
private void processFile()
    {
           ArrayList<String[]> lSplitRules = new ArrayList<>();

        try {
            FileInputStream fileStream = new FileInputStream("log.log");
            DataInputStream fileIn = new DataInputStream(fileStream);
            BufferedReader fileBr = new BufferedReader(new InputStreamReader(fileIn));

            String strLine;

            while ((strLine = fileBr.readLine()) != null)
            {
                    String[] lTokens = strLineSpam.split("#");
                    String lRawRules =  lTokens[3];
                    lSplitRules.add(lRawRules.split(","));
            }

        } catch (FileNotFoundException e) {
            System.out.println("File: log.log, not found. Error: " + e.getMessage());
        } catch (IOException e) {
            System.out.println("Couldn't open log.log. Error: " + e.getMessage());
        } 
```

到目前为止，一切都很好。在 ArrayList 的每个“空间”中，我将有一个 String[] 包含每封电子邮件的规则。另一方面，我还有一个包含一个唯一规则列表的 HashMap，它的值如下：

```
RULE_NAME - VALUE
RULE_1 - 0.1
RULE_2 - 0.5
RULE_3 - 0.6
... 
```

我需要比较每封电子邮件的每条规则，看看它是否存在于 HashMap 中。如果存在返回一些计算的规则值，我使用这个函数：

```
private Double eval (String rule, Map<String, Double> scores)
{

    for (Entry<String, Double> entry : scores.entrySet()) {
        if (entry.getKey().equalsIgnoreCase(rule))
        {
            return entry.getValue();
        }
    }

    return 0.0;
} 
```

问题是我需要多次比较每封电子邮件及其规则（超过 10.000 条），因为我正在使用遗传算法来尝试优化每个规则的价值。有没有办法通过HASHMAP优化每封邮件的规则对比？由于我需要速度，我现在在 8 分钟内完成 100 次验证。

对不起我的英语不好。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:57:52.077

拥有哈希表的全部意义在于您可以进行一次哈希查找。如果您只是要遍历键，您也可以使用列表。

我不知道你在哪里构建你的`scores`，但你可以规范化这个案例。

```
scores.put(key.toLowerCase(), value); 
```

对于不区分大小写的查找

```
Double d= scores.get(key.toLowerCase()); 
```

# django - Django 后端的 API 密钥实现

> ID：11122279
> 
> 赞同：1
> 
> 时间：2012-06-20T14:54:57.857
> 
> 标签：django, api, http, authentication, get

我正在使用 Django 后端实现一个简单的 API，并希望使用 API 密钥支持访问控制。

按照标准，该协议将使用私钥和公共标识符的组合来验证请求。公共标识符、数据和哈希（数据+私钥）将被发送到服务器。然后，服务器将使用存储在数据库中的私钥复制散列函数，如果散列匹配，则请求通过身份验证。

我的问题是关于“数据”部分。当然，客户端和服务器需要就“数据”是什么达成一致，否则哈希将不匹配。该协议可以简单地规定“数据”是浏览器发送的原始查询字符串。在这种情况下，如何从 Django 视图中检索原始查询字符串（它在 QueryDict 中对其进行解析，从而丢失序列信息）？

还是我缺少任何其他最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:58:12.303

您始终可以通过`request.body`（或`request.raw_post_data`1.4 之前的版本）获取原始查询数据。

# java - 域对象的集合 - 组合与继承

> ID：11122280
> 
> 赞同：0
> 
> 时间：2012-06-20T14:54:59.167
> 
> 标签：java, oop

我最近一直在尝试扩展集合对象，而不是对我的域对象使用组合。因此，例如，我将使用这个：

```
public class Path extends ArrayList<PathElement> {
}

public static void main(String args[]) {
  Path path = new Path();
  path.add(new PathElement());
} 
```

代替：

```
public class Path {
  private List<PathElement> pathElements = new ArrayList<PathElement>();

  /* getter/setter*/

}

public static void main(String args[]) {
  Path path = new Path();
  path.getPathElements().add(new PathElement());
} 
```

这是一种常见/可接受的做法吗？有什么缺点或更好的选择吗？我可以看到的一个缺点是实现不能轻易更改，因此您不能使用 LinkedList 代替 ArrayList。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:26:14.207

你的第二种方法是正确的。除非您修改它们的行为或添加新行为，否则不应扩展内置数据结构类。

即使您修改或添加新行为，您的域对象也不应该扩展它们。相反，创建一个扩展 Map 或 List 的单独类，并在域对象中使用新类，如第二个代码块所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:50:16.897

你的方法绝对是错误的方法。
您应该使用组合而不是继承。如果没有正确完成，继承会“破坏”封装并与实现细节相结合。这意味着您应该只在您的控制下扩展类并为扩展而设计。否则你会陷入一团糟

# android - 确定某人触摸图像的位置

> ID：11122281
> 
> 赞同：0
> 
> 时间：2012-06-20T14:55:01.517
> 
> 标签：android

这是一个基本的问题，会引向其他人。

我正在考虑扩展我的应用程序以获得目标图像（3 个圆圈），并且我希望用户能够触摸他们击中的目标图像。然后应用程序确定用户点击的位置。

还没有沿着这条发展路线前进，也不知道从哪里开始/学习的最佳地点。有没有人有任何提示/网站/示例可以指点我让球滚动

谢谢

更新了我正在尝试做的事情，但我不知道从哪里开始

*   在画布上绘制一个目标，3 个圆圈
*   根据用户点击目标的位置画一个十字
*   根据用户点击的圆圈记录分数

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:15:46.440

您可以在视图上使用[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)。这将为您提供触摸事件并向您传递手指在 MotionEvent 内部的坐标

像这样的东西应该可以工作：

```
img.setOnTouchListener(new OnTouchListener() {
    public void onTouch(View v, MotionEvent me){
        Log.i("TAG", "x: " + me.getX() + " y: " + me.getY());
    }
}); 
```

# java - Java - 在构造函数中设置变量后，有什么方法可以使变量不可修改？

> ID：11122282
> 
> 赞同：3
> 
> 时间：2012-06-20T14:55:06.723
> 
> 标签：java, final

我在一个类中有一个成员变量，我想确保在构造函数中设置它之后没有任何改变。所以，它看起来像这样：

```
public class MyClass
{
    private String myVar = null;

    public MyClass(DataObj dataObj)
    {
        myVar = dataObj.getFinalVarValue();
        //at this point I don't want anything to be able change the value of myVar
    }

    ....
} 
```

我的第一个想法是看到我可以将`final`修饰符添加到变量中，但是编译器抱怨为最终字段赋值。有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T14:58:54.090

编译器抱怨（在构造函数中），因为您已经通过编写提供了初始化

```
private String myVar = null; 
```

删除“ `= null`”部分。在构造函数中添加`final`并赋值。

```
public class MyClass
{
    private final String myVar;

    public MyClass(DataObj dataObj)
    {
        myVar = dataObj.getFinalVarValue(); // the only assignment/init happens here.
    }

    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:56:18.237

制作它`private`，然后不包括二传手。只要您从不在类方法中更改它，它就是不可变的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T15:00:27.400

String objects are already immutable. So adding the **private final** modificator is enough.

# layout - TextView Gravity="top" 但动态更改字体大小不会使文本与顶部对齐

> ID：11122283
> 
> 赞同：3
> 
> 时间：2012-06-20T14:55:09.843
> 
> 标签：layout, text, textview, alignment, font-size

我有一个应用程序需要动态对齐图像上某些位置的文本视图。图像被缩放以适合视图。文本条目由用户添加。我正在使用 RelativeLayout 和边距来正确定位文本。一切都很好。

当用户旋转屏幕时，我使用 onRetainNonConfigurationInstance() 保存文本位置和位图。重新创建视图后，我将视图重新添加到 RelativeLayout。现在，由于视图的大小不同，图像的比例也不同。要将文本框保持在同一位置，我必须考虑到这一点。除了一个问题外，我所有的代码都在工作......

如果我创建一个 TextView 并将 fontSize 设置为小尺寸（例如 <11px），则文本框的顶部位于我想要的位置，但文本与基线对齐，就好像它是 11px 字体一样。我不知道 onCreate 方法中的比例因子，所以在调用 onMeasure 和 onLayout 之前我无法更改字体大小。我试过 forceLayout() 和 requestLayout() 但似乎没有什么能解决对齐问题。

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="0dp"
>
    <com.xyx.ScalableLayout
        android:id="@+id/layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="0dp"
        android:clickable="true"
        android:gravity="top"
    >
        <com.xyx.ScaledImageView
            android:id="@+id/formView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="0dp"
        />
    <com.xyx.ScalableLayout>
</ScrollView> 
```

使用以下代码添加了一个 textView：

```
textView = new TextView(getContext());
textView.setPadding(0, 0, 0, 0);
textView.setSingleLine();
textView.setFocusableInTouchMode(false);
textView.setClickable(false);
textView.setGravity(Gravity.TOP);
textView.setText(entry.mText);
float fontSize = mImageView.mapSizeToView(entry.mPointSize);
textView.setTextSize(TypedValue.COMPLEX_UNIT_PT, fontSize);
params = new RelativeLayout.LayoutParams(
        ViewGroup.MarginLayoutParams.WRAP_CONTENT, 
        ViewGroup.MarginLayoutParams.WRAP_CONTENT);
params.leftMargin = Math.round(viewLoc.x);
params.topMargin = Math.round(viewLoc.y);
addView(textView, params); 
```

当 ScaledImageView 获得 onSizeChanged() 回调时，它会设置缩放值并使用以下代码更新 TextView 的字体大小和位置：

```
float fontSize = mImageView.mapSizeToView(entry.mPointSize);
textView.setTextSize(TypedValue.COMPLEX_UNIT_PT, fontSize);
PointF viewLoc = computeTopLeft(entry, entry.mTextView.getPaint());
params = (RelativeLayout.LayoutParams) textView.getLayoutParams();
params.leftMargin = Math.round(viewLoc.x);
params.topMargin = Math.round(viewLoc.y);
textView.setLayoutParams(params);
textView.forceLayout(); 
```

最后，我在 ScalableLayout 上做了一个 requestLayout()

我知道这是很多代码，但我的问题是这个。如果我在创建 TextView 并将其添加到屏幕时知道正确的比例因子（在 mapSizeToView() 中使用），那么一切正常。如果该值不正确，那么我找不到任何东西会进行完整的重新计算，这将使 TextView 与使用该字体大小创建的相同。我相信它与我通常理解的 Android 布局结构有关。但是，我不明白为什么我不能从头开始重新计算（没有拆除所有视图并重新创建它们）。

# python - 如何在字符串中查找char并获取所有索引？

> ID：11122291
> 
> 赞同：63
> 
> 时间：2012-06-20T14:55:40.287
> 
> 标签：python, string

我得到了一些简单的代码：

```
def find(str, ch):
    for ltr in str:
        if ltr == ch:
            return str.index(ltr)
find("ooottat", "o") 
```

该函数仅返回第一个索引。如果我将返回更改为打印，它将打印 0 0 0。这是为什么，有什么办法可以得到`0 1 2`？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-20T14:58:50.777

这是因为`str.index(ch)`将返回`ch`第一次出现的索引。尝试：

```
def find(s, ch):
    return [i for i, ltr in enumerate(s) if ltr == ch] 
```

这将返回您需要的所有索引的列表。

PS Hugh 的回答显示了一个生成器函数（如果索引列表变大，它会有所不同）。此功能也可以通过更改`[]`为来调整`()`。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-20T15:19:33.130

我会选择 Lev，但值得指出的是，如果您最终进行更复杂的搜索，那么使用 re.finditer 可能值得牢记（但 re 往往带来的麻烦多于价值 - 但有时很容易知道）

```
test = "ooottat"
[ (i.start(), i.end()) for i in re.finditer('o', test)]
# [(0, 1), (1, 2), (2, 3)]

[ (i.start(), i.end()) for i in re.finditer('o+', test)]
# [(0, 3)] 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-20T15:04:06.813

[Lev 的答案](https://stackoverflow.com/a/11122355/5987)是我会使用的答案，但是这里有一些基于您的原始代码的内容：

```
def find(str, ch):
    for i, ltr in enumerate(str):
        if ltr == ch:
            yield i

>>> list(find("ooottat", "o"))
[0, 1, 2] 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-20T15:01:07.460

```
def find_offsets(haystack, needle):
    """
    Find the start of all (possibly-overlapping) instances of needle in haystack
    """
    offs = -1
    while True:
        offs = haystack.find(needle, offs+1)
        if offs == -1:
            break
        else:
            yield offs

for offs in find_offsets("ooottat", "o"):
    print offs 
```

结果是

```
0
1
2 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-06-03T15:05:14.040

在一行中获取所有位置

```
word = 'Hello'
to_find = 'l'

# in one line
print([i for i, x in enumerate(word) if x == to_find]) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-09-19T15:44:05.427

```
def find_idx(str, ch):
    yield [i for i, c in enumerate(str) if c == ch]

for idx in find_idx('babak karchini is a beginner in python ', 'i'):
    print(idx) 
```

输出：

```
[11, 13, 15, 23, 29] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-21T11:22:51.603

根据经验，在使用 POD（Plain Old Data）时，NumPy 数组的性能通常优于其他解决方案。字符串是 POD 的一个例子，也是一个字符。要查找字符串中只有一个字符的所有索引，NumPy ndarrays 可能是最快的方法：

```
def find1(str, ch):
  # 0.100 seconds for 1MB str 
  npbuf = np.frombuffer(str, dtype=np.uint8) # Reinterpret str as a char buffer
  return np.where(npbuf == ord(ch))          # Find indices with numpy

def find2(str, ch):
  # 0.920 seconds for 1MB str 
  return [i for i, c in enumerate(str) if c == ch] # Find indices with python 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-08T00:09:41.927

这是[Mark Ransom](https://stackoverflow.com/a/11122432/311567)答案的略微修改版本，如果`ch`长度可能超过一个字符，则可以使用。

```
def find(term, ch):
    """Find all places with ch in str
    """
    for i in range(len(term)):
        if term[i:i + len(ch)] == ch:
            yield i 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-19T22:15:57.663

美化@Lev 和@Darkstar 发布的五星级单线：

`word = 'Hello'`
`to_find = 'l'`
`print(", ".join([str(i) for i, x in enumerate(word) if x == to_find]))`

这只是使索引号的分离更加明显。
结果将是： `2, 3`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-23T09:37:13.730

```
x = "abcdabcdabcd"
print(x)
l = -1
while True:
    l = x.find("a", l+1)
    if l == -1:
        break
    print(l) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-09T18:00:35.817

所有其他答案都有两个主要缺陷：

1.  他们通过字符串执行 Python 循环，这非常慢，或者
2.  他们使用 numpy，这是一个非常大的附加依赖项。

```
def findall(haystack, needle):
    idx = -1
    while True:
        idx = haystack.find(needle, idx+1)
        if idx == -1:
            break
        yield idx 
```

这通过`haystack`查找进行迭代`needle`，总是从上一次迭代结束的地方开始。它使用比逐个字符`str.find`迭代快得多的内置函数。`haystack`它不需要任何新的进口。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-05-03T07:13:41.063

你可以试试这个

```
def find(ch,string1):
    for i in range(len(string1)):
        if ch == string1[i]:
            pos.append(i) 
```

# algorithm - 是否有“比赛”算法来找到第 k 个最大元素？

> ID：11122292
> 
> 赞同：5
> 
> 时间：2012-06-20T14:55:43.733
> 
> 标签：algorithm, language-agnostic, selection

我知道我们可以使用“比赛”[算法](https://stackoverflow.com/questions/3628718/find-the-2nd-largest-element-in-an-array-with-minimum-of-comparisom)在大小数组中找到*第二*大元素。现在我想知道我们是否可以使用类似的“比赛”找到第*k 个最大的元素。*`N``N+log(N)-2`

 *我知道有一个`O(N)`“选择”算法可以找到第*k 个*最大的元素。它`Quick Select`与“好”枢轴一起使用，可以在`O(N)`. `heap`我们还可以从数组中构建 a`O(N)`并从 中检索*k*元素`heap`。

我想知道是否有另一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:54:10.300

我相信您可以将其设为 O( *N* log *k* ) 算法：迭代数组，并维护迄今为止遇到的最大*k个元素的最小堆。*所以前*k*个元素直接进入堆。每个后续元素都将与堆的尖端进行比较，如果它更大，则将从堆中删除尖端并插入新元素，对于大小为*k的堆，这是一个 O(log* *k* ) 操作。当算法完成并且序列的长度至少为*k*时，堆的尖端将具有第*k*个最大的元素，而堆的其余部分将具有较大的元素。

 ***与中位数 O( *n ) 解决方案相比，这种方法的最坏情况行为较差，但对于较小的**k*将更容易实现并产生相当好的行为。所以它可能非常适合许多实际应用。****

# django - 重定向到管理员登录

> ID：11122293
> 
> 赞同：2
> 
> 时间：2012-06-20T14:55:48.970
> 
> 标签：django

我为 url 'site/main/' 定义了一个视图。我希望能够让（未经身份验证的）用户重定向到默认的“/admin/”页面进行登录，然后在成功登录后重定向到“/main/”页面。我遵循了 django 文档，但我必须遗漏一些东西，因为我无法让它工作。我的观点如下：

```
def main(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('admin/?next=%s' % request.path)
    else: 
```

我收到一个错误：

**找不到页面**(404)
**请求方法**：GET
**请求 URL**：http://sitename:8080/main/admin/?next=/main/

任何帮助是极大的赞赏 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T15:03:04.640

您`/`在 URL 中缺少首字母：`/admin/?next=...`

但是这仍然行不通，因为URL 对参数`admin`一无所知。`next`这仅适用于实际的登录视图。使用您的代码，用户将登录到管理员，但不会被重定向回您的页面。

您应该构建一个登录模板并将其连接到内置登录视图。`is_authenticated`然后，您应该只使用`login_required`装饰器，而不是检查视图。

```
@login_required
def main(request):
   ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T15:01:27.147

你`request.path`不应该`/main/`。不用第一个试试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-11T15:21:49.883

1.  网址.py：

    ```
     url('^', include('django.contrib.auth.urls')), 
    ```

2.  注册/[登录](https://docs.djangoproject.com/en/1.8/topics/auth/default/#all-authentication-views).html：

```
 <h3>Login foo</h3>
    <form method="post" action="">
    {% csrf_token %}
    {{form.as_p}}
    <input type="submit" value="Login">
    </form>
```

3.  视图.py

    ```
    def only_for_users(request):
       if not request.user.is_authenticated():
           return HttpResponseRedirect('/login/?next=%s' % request.path)

       // fetch some really interesting data

       env=(django.get_version(),settings.BASE_DIR,sys.version)
       envMod=collections.OrderedDict(sorted(sys.modules.items()))
       return render(request,'env.html',{'env':env, 'envMod':envMod}) 
    ```

它适用于 Django 1.6 并使用内置登录（查看 urls.py）和模板。所以你不需要构建视图函数。

[网址](https://docs.djangoproject.com/en/1.8/topics/auth/default/#using-the-views)信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-27T12:24:32.957

如果你想 `redirect to admin for login` 查看特定的视图，然后 `redirect back to the view url`登录成功后你只需要做两件事：

> 1.  添加`LOGIN_URL`到`settings.py`您的内部 `django project module`：

```
...
LOGIN_URL = '/admin/login/' 
```

> 2.  将`@login_required`作为装饰器添加到您的视图函数中`views.py`：

```
from django.contrib.auth.decorators import login_required
...
@login_required
def main(request): 
```

> 设置后`LOGIN_URL = '/admin/login/'`，您可以在整个 django 项目`@login_required`中的任何内容上使用它 以及 查看 url。`view` `will redirect to admin for login` `after successful login will redirect back`
> 
> **此外，正如Daniel Roseman**所说，现在您不再需要`is_authenticated`在视图内部使用任何内容。
> 
>  **好消息是现在您**也不需要**构建登录模板并将其连接到内置登录视图。**

 **这种方法的另一个好处是您可以**灵活**地轻松地将这种**身份验证**添加或删除到您想要的任何视图。**

# javascript - 识别鼠标单击 Flash 元素

> ID：11122300
> 
> 赞同：1
> 
> 时间：2012-06-20T14:56:13.320
> 
> 标签：javascript, jquery, flash, mouseclick-event

这确实是一个。

我已经编写了这个 javascript 来连接我[网站](http://s-maof.com/Forum)中的 javascripts 中的操作和 flash 应用程序中的操作。Flash 应用程序是一个显示相对时间索引的栏。但它有**4 行**。用户可以通过按向上或向下箭头来选择要显示的行。我试图通过识别 x 和 y 来识别用户是否单击了这些按钮之一

```
e.pageX and e.pageY 
```

这应该有效（而且确实有效！）因为闪光灯始终位于底部（固定位置） 问题是它在 FF 中有效，但在 chrome 或 IE 中无效。

代码是

```
$('body').click(function(e){

    var arrowWidth  = 15;
    var arrowHeight = 12;

    x_left      = $("body").width() * 0.88 - 30;
    x_right     = $("body").width() * 0.88;

    y_down_bottom       = $(window).height() -2//screen.height; //$
    y_down_top      = y_down_bottom - arrowHeight;
    y_up_bottom     = y_down_bottom - arrowHeight-2;
    y_up_top        = y_up_bottom   - arrowHeight-4;

    if (e.pageX > x_left && e.pageX < x_right ){
        if (e.pageY>=y_down_top && e.pageY<=y_down_bottom ){
                    //pressed down
                      .............
                   }
        } 
```

编辑：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:47:33.177

感谢 carnio，我通过 Flash 外部接口发送它来改变我的方法。我用了

```
import flash.external.*; // for sending up and down arrows events to javascript 
```

这在新闻上下事件中

```
//update javascript
// The name of a JavaScript function to call 
var callJasFunction:String = "GetBtnTicker";
//parameter 
var msg:int = page;
//  The return value after calling JavaScript 
ExternalInterface.call(callJasFunction, msg); 
```

它有效。

# unit-testing - 针对私有变量值进行测试

> ID：11122310
> 
> 赞同：0
> 
> 时间：2012-06-20T14:56:31.230
> 
> 标签：unit-testing, testing, automated-tests

好吧，现在不要生气，我知道关于这个话题有几个问题，但我仍然有一些疑问。

我认为我完全同意不测试私有函数，我觉得这很合理，但是我怎样才能测试设置私有变量的公共方法呢？

假设构造函数设置了一些私有变量，我想在调用构造函数后测试这些变量是否正确设置。这是一个有效的测试吗？我应该如何在不添加公共 getter 的情况下检查私有变量的值？

我添加了一个不真实的场景示例以尝试更清楚：

```
public class ClassToTest
{
   private bool _isOn;

   public void SwitchOn() { _isOn = true; }
   public void SwitchOff(){ _isOn = false; }

   public void update()
   {
      if (_isOn)
        DoSomething();
   }

   private void DoSomething()
   {
     //this could also execute a function of an external dependency. But still the dependency could not have a public function to test if the behavior actually ran.
   }
} 
```

如果无法针对 _isOn 值进行测试，如何测试 SwitchOn 和 SwitchOff 是否正常工作？（这是一个示例，这意味着我不会编写公共 getter 并且函数不会返回值，因为它们不需要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:41:19.390

测试应该使用 Assemble/Activate/Assert 模式：

```
test switch on {
  x = new ClassToTest();
  x.SwitchOn();   //  <--  Assemble an on switch
  EmptyMailQueue();   // <-- Assemble nothing in the Q

  PossiblySendUserEmail();  // <-- Activate the feature

  assert(mailQueue.count() == 1);
  }

test switch on {
  x = new ClassToTest();
  x.SwitchOff();
  EmptyMailQueue();

  PossiblySendUserEmail();

  assert(mailQueue.count() == 0); // <-- Assert switch is off so no mails sent
  } 
```

你断言你有一个开关的实际原因。测试开关本身违反了“不要 TDD getters and setters”的规则。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T15:13:28.187

您需要测试私人成员，因为他们可能有错误。

“私人”不是魔法障碍，它只是一种建议生产代码客户不要直接调用该成员的约定。

为所有此类成员添加 _underbar 与 C++ 使用硬件保护此类方法一样有用。

你的汽车引擎里面有插头，开车时不应该使用，只有在机械师测试东西时才可以使用。软件应该是一样的。测试您的私人成员，并在需要时禁用私人成员。

然而...

* * *

对象的意义在于暴露行为。如果您的私有变量设置正确，那么您的对象应该表现正确。您的测试应该要求这种行为。

查找“Test-Driven Development”（*昨天*开始使用它），然后查找“Intentional Programming”。您的测试用例应该从请求该行为开始，并且不应该担心实现细节。如果你升级一个对象以使用不同的内部结构，你不需要太多的测试无缘无故地中断。

（不要向精灵或软件方法学家寻求建议，因为他们会说是和否！；）

# c# - 在 Windows 8 上的 C# 中为不同线程编组的接口

> ID：11122312
> 
> 赞同：1
> 
> 时间：2012-06-20T14:56:36.783
> 
> 标签：c#, windows-8

我正在开发一个 Windows 8 应用程序。当应用程序运行时，我试图确定用户的互联网连接何时恢复。为了尝试做到这一点，我正在听这个`NetworkChange_NetworkAddressChanged`事件。当该事件被触发时，我尝试更新我的 UI 并通过一个名为`GetLatestData`. 当我尝试从`NetworkChange_NetworkAddressChanged`事件中调用此方法时，我目前收到一条错误消息：

*应用程序调用了为不同线程编组的接口。*

如何克服此错误以更新我的 UI 并从`NetworkChange_NetworkAddressChanged`事件中访问 Web 服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:41:34.147

```
 NetworkInformation.NetworkStatusChanged += (sender) =>
    {
        Window.Current.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, Update);
    }; 
```

上面的示例使用 UI 线程调用（编组）更新函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:58:40.330

与您在 WINdows 7 中执行此操作的方式相同 - 您使用 UI 线程调度程序将其编回 UI 线程。

# entity-framework - 实体框架的两级深度主细节

> ID：11122316
> 
> 赞同：1
> 
> 时间：2012-06-20T14:57:06.470
> 
> 标签：entity-framework, devexpress, master-detail, xtragrid

我正在使用实体框架和 DevExpress 10.5 XtraGrid。想象一下我们有实体 ![实体](../Images/6cc542d371b80903c1ecf42e6a57ac9f.png)

所以我的意思是使用 XtraGrids 和主详细信息在表单中显示它们。gridControl 的 Level 树应该是这样的： ![在此处输入图像描述](../Images/767e4a343f216ea59a5418f5aa685b6e.png)

所以我已经为 MainGrid 实现了这样的事件

```
#region gridView1_enents
    private void gridView1_MasterRowEmpty(object sender, DevExpress.XtraGrid.Views.Grid.MasterRowEmptyEventArgs e)
    {
        districts c = (districts)gridView1.GetRow(e.RowHandle);
        e.IsEmpty = c.districtparts.Count == 0;
    }

    private void gridView1_MasterRowGetRelationCount(object sender, DevExpress.XtraGrid.Views.Grid.MasterRowGetRelationCountEventArgs e)
    {
        e.RelationCount = 1;
    }

    private void gridView1_MasterRowGetRelationName(object sender, DevExpress.XtraGrid.Views.Grid.MasterRowGetRelationNameEventArgs e)
    {
        e.RelationName = "districtparts";
    }

    private void gridView1_MasterRowGetChildList(object sender, DevExpress.XtraGrid.Views.Grid.MasterRowGetChildListEventArgs e)
    {
        districts c = (districts)gridView1.GetRow(e.RowHandle);
        e.ChildList = new BindingSource(c, "districtparts");
    }
    #endregion 
```

这很好用：有一个网格，显示我的地区，我可以展开每一行，并显示另一个带有 Districtparts 的网格问题是：我应该怎么做才能显示投票者。目标是拥有两个级别的主从层次结构。这意味着地区应该有地区部分，地区部分应该有投票者。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:20:43.843

[在这里](http://www.devexpress.com/Support/Center/p/Q232865.aspx)找到了解决方案

以及一些不相关的词来满足30个字符的要求=）

# powershell - 尝试将具有特定文件名的文件从根目录移动到子文件夹

> ID：11122321
> 
> 赞同：0
> 
> 时间：2012-06-20T14:57:27.490
> 
> 标签：powershell, powershell-2.0

嗨，我对 powershell 还是很陌生，所以如果我问一些非常基本的问题，我深表歉意。我在 tftp 服务器上有一个根目录，它每晚从路由器和其他设备中提取配置文件。这些文件就像这个 IPaddress_YYYYMMDD_TA5000。设备存在限制，不能将文件设置为自行移入根目录。

我想做的是制作一个powershell脚本，它只会将文件名中带有TA5000部分的文件移动到子目录中，并且只保留5个最近的文件。

我看了看，但似乎找不到为该特定字符串解析文件所需要做的事情。我已经有了脚本的一部分，可以根据年龄删除文件，这很简单。

任何有关入门的帮助将不胜感激。

编辑：我忘了发布我正在尝试的代码。

```
Move-Item c:\tftptransferfiles c:\tftptransferfiles\sca | Where-Object {_.name -like "*TA5000*"} 
```

我不断收到一条错误消息，指出 C:\tftptransferfiles 中的项目正在使用中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:08:21.167

```
Get-ChildItem $path -filter "*TA5000" 
```

或许：

```
Get-ChildItem $path | Where-Object {$_.name -like "*TA5000*"} 
```

# session - ASP MVC3通过页面刷新保持变量值

> ID：11122323
> 
> 赞同：0
> 
> 时间：2012-06-20T14:57:28.420
> 
> 标签：session, variables, refresh, asp.net-mvc

哟！正如主题所说，我需要通过刷新来保持 var 的值。事情是它的SessionKey。另一件事是它是自动生成的。

我需要做的是 html `<select>`，它不会在刷新时丢失数据。实际上有 2 `<select>`s 以编程方式填充，您可以在它们之间实时传递数据。然后，如果我按保存并且页面无法验证这些`<select>`s 返回到其原始状态。我已经通过将数据保存在会话中来修复它，如果它具有某些密钥，则将`<select>`填充正确的数据。

为什么我需要自动生成的密钥？很好的多标签工作。如果用户尝试同时向数据库添加 2 条以上的新记录（这是极端的，但可能），他需要将该数据保存在不同的键下，以便应用程序可以找到所需的内容。

我也可以进行客户端验证，但是……不，只是不，工作量太大。

至于代码，任何有用的东西：

```
public ActionResult MethodUsedAfterPageLoad
{
   ...
   Guid stronyGuid = Guid.NewGuid();
   ViewData["strony"] = stronyGuid.ToString();
   ...
} 
```

这样每次刷新都会创建新的 Guid，但 Guid 被用作 SessionKey！

如果我按照以下方式进行操作：

```
public Class ControllerClass
{
    private Guid stronyGuid;
    ...
} 
```

这将重置变量，这很糟糕。使用`static`关键字是个坏主意。

# c# - 我的 ViewModel 知道 View，我该如何解决这个问题？

> ID：11122324
> 
> 赞同：1
> 
> 时间：2012-06-20T14:57:29.403
> 
> 标签：c#, events, mvvm, command, viewmodel

我认为代码是不言自明的。

```
<Interactivity:Interaction.Triggers>
    <Interactivity:EventTrigger EventName="Deleting">
        <MVVMLight:EventToCommand Command="{Binding Deleting, Mode=OneWay}" 
                                  PassEventArgsToCommand="True" />
    </Interactivity:EventTrigger>
</Interactivity:Interaction.Triggers> 
```

我有自己的带有删除事件的自定义控件，并希望将其绑定到 ViewModel 中的命令。

但是在视图模型中，我现在要么

```
public void OnDeleting(EventArgs args)
{
    var e = args as MapDeletingEventArgs;

    if (e == null) 
        throw new ArgumentNullException("args");

    Database.Delete(e.Maps);
    Database.Commit();
} 
```

或更糟

```
public void OnDeleting(MapDeletingEventArgs args)
{
    if (args == null) 
        throw new ArgumentNullException("args");

    Database.Delete(args.Maps);
    Database.Commit();
} 
```

而且我知道在 ViewModel 中有视图逻辑有多糟糕。我想不出更好的方法，有没有人建议？正如你所看到的，我使用框架 MVVMLight。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:15:12.397

这可以通过`ICommand`将`Map`实例作为命令参数的实现来实现：

```
//WARNING: all code typed in SO window
public class DeleteMapsCommand : ICommand
{
    private Database _db;

    public DeleteMapsCommand(Database db)
    {
        _db = db;
    }

    public void CanExecute(object parameter)
    {
        //only allow delete if the parameter passed in is a valid Map
        return (parameter is Map);
    }

    public void Execute(object parameter)
    {
        var map = parameter as Map;
        if (map == null) return;

        _db.Delete(map);
        _db.Commit();
    }

    public event EventHandler CanExecuteChanged; //ignore this for now
} 
```

然后，您在视图模型中创建一个公共属性以公开该命令的实例

```
public class ViewModel
{
    public ViewModel() {
        //get the Database reference from somewhere?
        this.DeleteMapCommand = new DeleteMapsCommand(this.Database); 
    }

    public ICommand DeleteMapCommand { get; private set; }
} 
```

最后，您需要将您的操作绑定到命令属性**，并将**命令属性绑定到要删除的地图。您还没有真正给我足够的 XAML 来说明在您的情况下应该如何完成此操作，但您可以使用以下内容执行以下操作`ListBox`：

```
<ListBox x:Name="ListOfMaps" ItemsSource="{Binding AllTheMaps}" />
<Button Command="{Binding DeleteMapCommand}" CommandParameter="{Binding SelectedItem, ElementName=ListOfMaps}">Delete Selected Map</Button> 
```

**更新**

要将命令附加到事件，您可以使用附加属性：

```
public static class Helper
{
    public static IComparable GetDeleteMapCommand(DependencyObject obj)
    {
        return (IComparable)obj.GetValue(DeleteMapCommandProperty);
    }

    public static void SetDeleteMapCommand(DependencyObject obj, IComparable value)
    {
        obj.SetValue(DeleteMapCommandProperty, value);
    }

    public static readonly DependencyProperty DeleteMapCommandProperty =
        DependencyProperty.RegisterAttached("DeleteMapCommand", typeof(IComparable), typeof(Helper), new UIPropertyMetadata(null, OnDeleteMapCommandChanged));

    private static void OnDeleteMapCommandChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        //when we attach the command, grab a reference to the control
        var mapControl = sender as MapControl;
        if (mapControl == null) return;

        //and the command
        var command = GetDeleteMapCommand(sender);
        if (command == null) return;

        //then hook up the event handler
        mapControl.Deleting += (o,e) =>
        {
            if (command.CanExecute(e.Maps))
                command.Execute(e.Maps);
        };
    }
} 
```

然后，您需要像这样绑定命令：

```
<MapControl local:Helper.DeleteMapCommand="{Binding DeleteMapCommand}" /> 
```

现在，您的视图模型不再引用特定于视图的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:23:57.033

如果您不想将 EventArgs 交给您的视图模型，您可以尝试使用 Behavior（这类似于 Steve Greatrex 的解决方案，但改用 Blend SDK'a 行为）：

这是我在我的一个应用程序中使用的示例。

首先，这是我的自定义行为基类：

```
/// <summary>
/// "Better" Behavior base class which allows for safe unsubscribing. The default Behavior class does not always call <see cref="Behavior.OnDetaching"/>
/// </summary>
/// <typeparam name="T">The dependency object this behavior should be attached to</typeparam> 
public abstract class ZBehaviorBase<T> : Behavior<T> where T : FrameworkElement
{
    private bool _isClean = true;

    /// <summary>
    /// Called after the behavior is attached to an AssociatedObject.
    /// </summary>
    /// <remarks>Override this to hook up functionality to the AssociatedObject.</remarks>
    protected sealed override void OnAttached()
    {
        base.OnAttached();

        AssociatedObject.Unloaded += OnAssociatedObjectUnloaded;
        _isClean = false;     
        ValidateRequiredProperties();     
        Initialize();
    }

    /// <summary>
    /// Called when the behavior is being detached from its AssociatedObject, but before it has actually occurred.
    /// </summary>
    /// <remarks>Override this to unhook functionality from the AssociatedObject.</remarks>
    protected sealed override void OnDetaching()
    {
        CleanUp();     
        base.OnDetaching();
    }

    /// <summary>
    /// Validates the required properties. This method is called when the object is attached, but before
    /// the <see cref="Initialize"/> is invoked.
    /// </summary>
    protected virtual void ValidateRequiredProperties()
    {
    }

    /// <summary>
    /// Initializes the behavior. This method is called instead of the <see cref="OnAttached"/> which is sealed
    /// to protect the additional behavior.
    /// </summary>
    protected abstract void Initialize();        

    /// <summary>
    /// Uninitializes the behavior. This method is called when <see cref="OnDetaching"/> is called, or when the
    /// <see cref="AttachedControl"/> is unloaded.
    /// <para />
    /// If dependency properties are used, it is very important to use <see cref="ClearValue"/> to clear the value
    /// of the dependency properties in this method.
    /// </summary>
    protected abstract void Uninitialize();

    /// <summary>
    /// Called when the <see cref="AssociatedObject"/> is unloaded.
    /// </summary>
    /// <param name="sender">The sender.</param>
    /// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
    private void OnAssociatedObjectUnloaded(object sender, EventArgs e)
    {
        CleanUp();
    }

    /// <summary>
    /// Actually cleans up the behavior because <see cref="OnDetaching"/> is not always called.
    /// </summary>
    /// <remarks>
    /// This is based on the blog post: http://dotnetbyexample.blogspot.com/2011/04/safe-event-detachment-pattern-for.html.
    /// </remarks>
    private void CleanUp()
    {
        if (_isClean)
        {
            return;
        }

        _isClean = true;

        if (AssociatedObject != null)
        {
            AssociatedObject.Unloaded -= OnAssociatedObjectUnloaded;
        }

        Uninitialize();
    }
} 
```

现在，我的具体实现用于将命令附加到 TextBlock 的“单击”事件

```
public class TextBlockClickCommandBehavior : ZBehaviorBase<TextBlock>
{
    public ICommand ClickCommand
    {
        get { return (ICommand)GetValue(ClickCommandProperty); }
        set { SetValue(ClickCommandProperty, value); }
    }

    public static readonly DependencyProperty ClickCommandProperty =
        DependencyProperty.Register("ClickCommand", typeof(ICommand), typeof(TextBlockClickCommandBehavior));

    protected override void Initialize()
    {
        this.AssociatedObject.MouseLeftButtonUp += new MouseButtonEventHandler(AssociatedObject_MouseLeftButtonUp);
    }

    protected override void Uninitialize()
    {
        if (this.AssociatedObject != null)
        {
            this.AssociatedObject.MouseLeftButtonUp -= new MouseButtonEventHandler(AssociatedObject_MouseLeftButtonUp);
        }
    }

    void AssociatedObject_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        // if you want to pass a command param to CanExecute, need to add another dependency property to bind to
        if (ClickCommand != null && ClickCommand.CanExecute(null))
        {
            ClickCommand.Execute(null);
        }
    }
} 
```

我像这样使用它：

```
<!--Make the TextBlock for "Item" clickable to display the item search window-->
<TextBlock x:Name="itemTextBlock" Text="Item:" HorizontalAlignment="Right" VerticalAlignment="Center" Grid.Column="2" FontWeight="Bold">
    <e:Interaction.Behaviors>
        <ZViewModels:TextBlockClickCommandBehavior ClickCommand="{Binding Path=ItemSearchCommand}"/>
    </e:Interaction.Behaviors>
</TextBlock> 
```

现在，在您的情况下，您不想将 NULL 传递给命令的执行方法，而是希望传递参数的 Maps 集合

# delphi - Delphi 7中的模态形式

> ID：11122325
> 
> 赞同：-1
> 
> 时间：2012-06-20T14:57:34.153
> 
> 标签：delphi, delphi-7

在 Delphi 7 中，我有一个模型对话框，我想在主窗体中显示。现在它显示在主窗口之外。我是德尔福的新手，我无法找到答案。

我想将模态表单嵌入到主表单中。当我对 Parent := Application.MainForm 进行编码时，应用程序运行并加载表单，之后应用程序以我无法做任何事情的方式被击中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:18:11.643

将`Position`模态窗体的属性设置为`poMainFormCenter`。或指定模式形式的`Left`and`Top`以将其放置在您想要的位置。用户仍然可以移动模态表单。

AFAIK 如果控件是禁用窗口的子级，则无法启用该控件。所以`Parent := Application.MainForm`不会这样做：`ShowModal`在显示模态表单之前显式禁用所有顶级窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:28:23.517

您也可以为此使用“框架”。

# c# - 将 Datagrid 绑定到 WinForms 中的 Linq 查询

> ID：11122326
> 
> 赞同：0
> 
> 时间：2012-06-20T14:57:35.633
> 
> 标签：c#, winforms, linq

我一生都在从事客户端服务应用程序，所以现在我可以做一些“疯狂的事情”，比如在客户端中拥有 DAO，我认为事情可以做得更好 8-)

当我在客户端-服务器应用程序中加载 GridView 时，我曾经有一个分页......

如果我从客户端调用数据库......我可以直接将 GridView 绑定到 linq 查询还是应该调用“ToList”或类似的东西？我认为 GridView 可以对查询进行异步调用并利用延迟加载，所以我没有 100.000 行 Grid ...

这存在吗？？？是否可以？？？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:02:29.797

你仍然可以使用 Linq 进行分页，你只需要正确使用`Skip`and `Take`。就像是：

```
var bindResults = query.Skip(pageNumber).Take(pageSize); 
```

这将执行并且只为您提供要显示的记录的一小部分。

# php - 处理 PHP 中 mySQL 的“字段列表中的未知列”错误？

> ID：11122329
> 
> 赞同：0
> 
> 时间：2012-06-20T14:57:44.927
> 
> 标签：php, mysql, html

我正在为我的公司创建一个 PHP 应用程序，并且我使用了大约 50 多个复选框来允许用户选择他们想要提取的表格的哪些部分。但是，现在，如果用户选择了一个复选框，该复选框的对应 SQL 列名不在表中，则没有句柄（它只返回 0 列）。有没有办法轻松处理此类问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:02:35.493

首先，我不会给用户不可用的选项。

但是，如果您想检查 SQL 中的表结构，请`DESCRIBE tablename`用作查询，然后遍历查看 column 的结果`Field`。您应该在构建将获取实际数据的 SQL 查询之前执行此操作，这样您就不会引用任何不存在的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:06:51.810

不要为复选框名称指定该列在表中的名称。绝不。如果需要，请给他们编号或不同的名称或其他名称，但在接收数据的 PHP 脚本中，您必须解析所有结果。

例子 ：

```
<input type="checkbox" name="fakeusername" value="true" />

$Username = (isset($_POST['fakeusername']) ? ($_POST['fakeusername'] == 'true' ? true : false) : false);

$Column = array();
if($Username === true){
    $Column[] = '`username`';
} 
```

# git - 从 Assembla 迁移到 GitHub

> ID：11122331
> 
> 赞同：0
> 
> 时间：2012-06-20T14:57:53.600
> 
> 标签：git, version-control, github

我的公司最近决定从 Assembla 切换到 GitHub（使用 git）。如何在 GitHub 中复制 Assembla 上的存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:47:30.573

[在这里](https://stackoverflow.com/a/5181968/620197)找到了答案。将源重命名为上游然后添加指向 GitHub 的源很简单。

# c# - basedOn 是否也继承视觉状态？

> ID：11122333
> 
> 赞同：0
> 
> 时间：2012-06-20T14:57:56.663
> 
> 标签：c#, wpf, button

我正在使用自定义模板创建多个按钮。每个按钮都绑定到不同的缩略图，但我希望它们都具有相同的视觉状态。我创建了 **customButtonStyle**样式，每个其他按钮都将继承此样式。然而，视觉状态似乎不是从**customButtonStyle**继承的。

关于为什么它不会继承视觉状态的任何想法？以及如何将每个按钮设置为自己的缩略图？

提前致谢。

下面是我的代码：

```
<Style x:Key="customButtonStyle" TargetType="Button">
    <Setter Property="Background" Value="{StaticResource ApplicationButtonBackgroundBrush}"/>
    <Setter Property="Foreground" Value="White"/>
    <Setter Property="BorderBrush">
        <Setter.Value>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFA3AEB9" Offset="0"/>
                <GradientStop Color="#FF8399A9" Offset="0.375"/>
                <GradientStop Color="#FF718597" Offset="0.375"/>
                <GradientStop Color="#FF617584" Offset="1"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>

    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    <Setter Property="VerticalContentAlignment" Value="Stretch"/>
    <Setter Property="Padding" Value="0"/>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid x:Name="ControlRoot" RenderTransformOrigin="0.5,0.5">

                    <Grid.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Grid.RenderTransform>

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualStateGroup.Transitions>
                                <!--Take one half second to transition to the MouseOver state.-->
                                <VisualTransition To="MouseOver" GeneratedDuration="0:0:0.3"/>

                                <!-- From Button Press to Normal -->
                                <VisualTransition From="Pressed" To="Normal">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="ControlRoot">
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="0.85"/>
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.367" Value="1">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseOut" Exponent="3"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="ControlRoot">
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="0.85"/>
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.367" Value="1">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseOut" Exponent="3"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualTransition>
                            </VisualStateGroup.Transitions>

                            <!-- Dpad focus on button-->
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="ControlRoot">
                                        <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="0.85"/>
                                        <EasingDoubleKeyFrame KeyTime="0:0:0.367" Value="1">
                                            <EasingDoubleKeyFrame.EasingFunction>
                                                <ExponentialEase EasingMode="EaseOut" Exponent="3"/>
                                            </EasingDoubleKeyFrame.EasingFunction>
                                        </EasingDoubleKeyFrame>
                                    </DoubleAnimationUsingKeyFrames>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="ControlRoot">
                                        <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="0.85"/>
                                        <EasingDoubleKeyFrame KeyTime="0:0:0.367" Value="1">
                                            <EasingDoubleKeyFrame.EasingFunction>
                                                <ExponentialEase EasingMode="EaseOut" Exponent="3"/>
                                            </EasingDoubleKeyFrame.EasingFunction>
                                        </EasingDoubleKeyFrame>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>                      
                            <!-- Button Press-->            
                            <VisualState x:Name="Pressed"/>
                            <!-- Disabled -->
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ControlRoot"/>
                                </Storyboard>
                            </VisualState>            
                            <!-- End of stateGrouop -->
                        </VisualStateGroup>

                        <!-- Focus states -->
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="FocusVisualElement">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="FocusFill">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>

                            </VisualState>
                            <VisualState x:Name="Unfocused"/>

                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>

                    <!-- Draw border around button that is in focus -->
                    <Border x:Name="Background" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                        <Grid>
                            <!--<Image x:Name="ButtonImage" Width="208" Height="156" Source="{Binding tile1}"/>-->
                            <Rectangle x:Name="FocusFill" Fill="{StaticResource ApplicationButtonHoverBackgroundBrush}" Visibility="Collapsed"/>
                            <Rectangle x:Name="MouseOverFill" Fill="{StaticResource ApplicationButtonHoverBackgroundBrush}" Visibility="Collapsed"/>
                        </Grid>
                    </Border>
                    <Border x:Name="FocusVisualElement" IsHitTestVisible="false" Visibility="Collapsed" BorderBrush="{StaticResource ApplicationButtonFocusBackgroundBrush}" BorderThickness="5" Margin="-2.5"/>
                    <Border x:Name="MouseOverVisualElement" IsHitTestVisible="false" Visibility="Collapsed"  BorderBrush="{StaticResource ApplicationButtonFocusBackgroundBrush}" BorderThickness="5" Margin="-2.5"/>

                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

////////////////////////

```
<Style x:Key="tile6" TargetType="Button" BasedOn="{StaticResource customButtonStyle}">
    <Setter Property="BorderThickness" Value="3"/>
    <Setter Property="HorizontalContentAlignment" Value="Center"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Padding" Value="0,0,1,1"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">

                    <Image x:Name="ButtonImage" Width="208" Height="156" Source="{Binding tile1}"/>            

            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:01:36.980

不。正如您自己看到的那样，视觉状态驻留在控件模板中，并且您提供了一个全新的状态。

您可以尝试将状态放置为资源并从每个模板中引用它们，但我建议不要这样做。由于您有两个单独的模板，因此它们可能会在某个阶段分叉，在这种情况下，重用将不是一种选择。恕我直言，最好只是复制它们。也会让 Blend 的生活更轻松。

# spring - Spring Security - 使用 OAUTH 验证 RESTful 资源，维护真正的无状态访问

> ID：11122338
> 
> 赞同：1
> 
> 时间：2012-06-20T14:58:04.413
> 
> 标签：spring, security, rest, oauth

我对这个主题做了很多研究——“使用 OAUTH 验证 RESTful 资源，在客户端-服务器之间保持真正的无状态特性”。从它的样子来看——这是不可能的。

我想知道我认为是正确的还是有办法以某种方式实现这一目标。

由于 OAUTH 涉及第 3 方服务提供商，我确信用户不会喜欢在每次向服务器发送请求时输入用户名/密码。也许有一种方法可以通过在客户端存储一些 cookie 或其他东西来检测用户是否登录。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:08:57.437

这（实际上）不可能。我发现的唯一替代方法是对来自给定客户端的每个请求都进行身份验证过程，正如您所指出的那样，这是完全不切实际的。我认为 REST 架构的无状态“要求”包括“业务数据”：会话属性和其他与您所服务的资源相关的上下文数据/标志/缓存，而不是身份验证/授权细节。

# java - 关于 Web 应用程序中的打印选项

> ID：11122340
> 
> 赞同：0
> 
> 时间：2012-06-20T14:58:10.140
> 
> 标签：java, spring

我想在我们的 Web 应用程序中提供打印选项..我们正在使用 spring 3.0、hibernate3.0 和 mysql 数据库等技术..我想要的是单个文件、多个文件打印选项..当我在单击后选择复选框特定文件时打印按钮它应该转到打印机...请使用 Spring、hibernate 和 mysql 数据库等技术提供一些与此打印选项相关的示例。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:58:37.877

有很多方法可以解决这个问题，所以我会给你一些选择来考虑：

*   如果您不太关心像素完美的格式，最简单的方法是显示一个新的 html 文档，其中包含所有文件的组合并`@media print`在您的 CSS 中为该文档指定。使用 启动该文档的打印机对话框`window.print()`。
*   如果格式非常重要，您可以考虑渲染 PDF 文档。[iText](http://itextpdf.com/)是一个不错的选择，因为您使用的是 Java 堆栈。
*   如果您在企业环境中并且知道用户可以访问哪些打印机，那么您可以将 Postscript 或 PDF 命令直接发送到打印机。这可能是最多的工作，但对用户来说也是最透明的，因为它可以完全自动化。

# notifications - 在 Android 上使用 Appcelerator (ACS) 推送通知

> ID：11122346
> 
> 赞同：1
> 
> 时间：2012-06-20T14:58:15.343
> 
> 标签：notifications, titanium, push, appcelerator

我正在尝试在 Android 上使用 Appcelerator 云服务实现推送通知但我有一些问题......这里的 tiapp.xml ：

```
<sdk-version>2.0.2.GA</sdk-version>
<modules>
<module platform="commonjs" version="2.0.5">ti.cloud</module>
<module platform="android" version="2.0.5">ti.cloudpush</module>
</modules> 
```

包括 Android 运行时 v8 和 ti.cloudpush，这是我的 app.js 文件

```
var win = Ti.UI.createWindow({
backgroundColor:'#ccc',
title:'Android Cloud Push Notification'
})

var CloudPush = require('ti.cloudpush');
CloudPush.debug = true;
CloudPush.enabled = true;
CloudPush.showTrayNotificationsWhenFocused = true;
CloudPush.focusAppOnPush = false;

var deviceToken;

var Cloud = require('ti.cloud');
Cloud.debug = true;

var submit = Ti.UI.createButton({
title : 'Register For Push Notification',
color:'#000',
height : 53,
width : 200,
top : 100,
});
win.add(submit);

submit.addEventListener('click', function(e) {
CloudPush.retrieveDeviceToken({
success: function deviceTokenSuccess(e) {
alert('Device Token: ' + e.deviceToken);
deviceToken = e.deviceToken
loginDefault();
},
error: function deviceTokenError(e) {
alert('Failed to register for push! ' + e.error);
}
});
});

function defaultSubscribe(){
Cloud.PushNotifications.subscribe({
channel: 'chanel',
device_token: deviceToken,
type: 'android'
}, function (e){
if (e.success) {
alert('Subscribed for Push Notification!');
}else{
alert('Error:' +((e.error && e.message) || JSON.stringify(e)));
}
});
}

function loginDefault(e){
//Create a Default User in Cloud Console, and login
Cloud.Users.login({
login: 'android',
password: 'android'
}, function (e) {
if (e.success) {
alert("login success");
defaultSubscribe();
} else {
alert('Error: ' +((e.error && e.message) || JSON.stringify(e)));
}
});
}

CloudPush.addEventListener('callback', function (evt) {
//alert(evt);
alert(evt.payload);
});

CloudPush.addEventListener('trayClickLaunchedApp', function (evt) {
//Ti.API.info('Tray Click Launched App (app was not running)');
alert('Tray Click Launched App (app was not running');
});

CloudPush.addEventListener('trayClickFocusedApp', function (evt) {
//Ti.API.info('Tray Click Focused App (app was already running)');
alert('Tray Click Focused App (app was already running)');
});

win.open(); 
```

我在 Appcelerator 云控制台中有用户 android / android 用于开发模式。以调试模式将我的应用程序启动到我的设备上 在应用程序上：只需单击按钮“注册推送通知”并查看 3 个警报 1）设备令牌：“所有数字”2）登录成功 3）订阅推送通知！

在 Appcelerator Cloud 控制台上：日志 -> 查看登录和订阅，打开它，一切正常 推送通知 -> 1 个 Android 客户端订阅了推送通知。并通过警报和标题发送一条推送通知，什么都没有出现...尝试重新启动，尝试关闭应用程序并发送另一个，什么都没有。我正在使用带有 android 2.2.1 的设备（LG OPTIMUS ONE），上面有互联网（wifi）。所以，我尝试使用另一部带有互联网的手机（SAMSUNG GALAXY S2）3.3.2（wifi），唯一的变化是在云控制台中：推送通知-> 2 个 Android 客户端订阅了推送通知。但它是一样的，没有通知出现。拜托，我真的需要帮助，我在 2 天内成功使用 iOS，但我不明白这里有什么大不了的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:36:25.023

我在 Marketplace 中使用 upush 模块，花了我 10 分钟来启动并运行它，为我节省了大量时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:15:10.013

我认为我不需要向 Google C2DM 注册即可使用 ACS。ACS 使用 MQTT 协议发送推送。（我一步一步地跟着这一步：[http](http://www.titaniumtutorial.com/2012/06/appcelerator-cloud-push-notification-in.html) ://www.titaniumtutorial.com/2012/06/appcelerator-cloud-push-notification-in.html ）你已经在Android和Ti上完成了一个带有推送通知的项目吗？我检查了我的设置，一切都很好。但是，因为我很绝望，我也注册了 C2DM，没有什么比这更好的了，我想在测试之前我还得再等一会儿。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:19:55.563

您是否已注册 Google C2DM？[您需要在https://developers.google.com/android/c2dm/signup](https://developers.google.com/android/c2dm/signup)填写表格以向设备发送通知。确保您在 Appcelerator 云设置中拥有正确的 App ID。

# ruby-on-rails - 无法使用部分保存记录

> ID：11122347
> 
> 赞同：1
> 
> 时间：2012-06-20T14:58:20.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml, datamapper

在我的 rails 3 项目中，我使用 DataMapper 作为 ORM 和 Haml 作为模板语言。并定义了两个模型 Car 和 Image 之间的一对多关联。一辆车可以有很多张图片，一张图片属于一辆车。

在我的图像模型中，我有以下内容

```
belongs to: car 
```

在我的汽车模型中，我有

```
has n, :images 
```

在 Car 模型的视图中，我有以下内容：

```
= f.fields_for :images, @car.images do |img|
  = render :partial => "cars/images", :locals => {:f => img} 
```

现在，在图像模型的视图中，我有

```
 = time_select("image", "upload_time") 
```

其中upload_time 是图像表中的一个字段。

但是数据没有记录在图像表中。访问部分字段的正确方法是什么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:45:59.450

试试这个。

将此添加到您的汽车模型

```
accepts_nested_attributes_for :images 
```

你的选择应该是

```
= time_select("image[]", "upload_time") 
```

# java - 如何为 openimaj 创建 pom.xml？

> ID：11122356
> 
> 赞同：0
> 
> 时间：2012-06-20T14:58:53.943
> 
> 标签：java, maven, pom.xml, openimaj

我正在尝试按照此处所述运行“mvn install”：

[http://sourceforge.net/p/openimaj/wiki/OpenIMAJ%20From%20Source/](http://sourceforge.net/p/openimaj/wiki/OpenIMAJ%20From%20Source/)

我已经下载了 openimaj 的 svn，pom.xml 文件位于：

```
C:\Users\[user]\openimaj 
```

当我尝试运行“mvn install”时，它说：

```
[ERROR] The goal you specified requires a project to execute but there is no POM
 in this directory (C:\Users\net). Please verify you invoked Maven from the corr
ect directory. -> [Help 1] 
```

我相信我需要将我的 pom.xml 放入`C:\Users\net`，但是我应该如何为 openimaj 创建这个 pom.xml？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:37:11.673

OpenIMAJ 开发人员在这里。

如果您正在尝试开发项目本身，那么您正在遵循正确的指南[OpenIMAJ from source](http://sourceforge.net/p/openimaj/wiki/OpenIMAJ%20From%20Source/)

但是，如果您想简单地将 OpenIMAJ 包含在一个新的 java 项目中，您可以按照[教程](http://www.openimaj.org/tutorial.pdf)进行操作。请注意，本教程中使用的代码虽然可以运行，但它是 OpenIMAJ 的最新稳定版本，但快照版本要好得多，并且更新得更多。我们的目标是在接下来的几周内发布一个新版本。

通过查看教程中生成的 pom，您可以轻松地将依赖项复制到您的项目中，删除您不关心的依赖项，或者使用最新的快照版本 (1.0.6-SNAPSHOT)。

我们意识到我们项目的文档目前有点稀疏，我们也在努力解决这个问题。如果你不介意我问，你的目的是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:04:56.147

您需要`mvn install`在包含 pom 文件的目录中运行该命令。（C:\Users\[user]\openimaj 而不是 C:\Users\net）。

# jquery - 获取时间戳 / 1000 - Jquery datepicker

> ID：11122363
> 
> 赞同：1
> 
> 时间：2012-06-20T14:59:20.850
> 
> 标签：jquery, jquery-ui, datepicker

我有一个日期范围选择器，每个日期选择器有 2 个字段：dat_start 和 date_end；一切都很好，除了我将传递给服务器进行搜索的字段的时间戳；我知道 JS Timestamp 以毫秒为单位，但我应该拥有它/1000 ......我找不到办法。这是我的代码：

```
<script>
$(function () {
    $("#data_inizio").datepicker({
        altField: '#mod_available_date_id_start',
        altFormat: '@',
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function (selectedDate) {
            $("#data_fine").datepicker("option", "minDate", selectedDate);
        }
    });
    $("#data_fine").datepicker({
        altField: '#mod_available_date_id_finish',
        altFormat: '@',
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function (selectedDate) {
            $("#data_inizio").datepicker("option", "maxDate", selectedDate);
        }
    });
});
</script> 
```

谢谢大家，对不起我的英语不好！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T15:41:56.357

获取选择器选择的字符串/日期并将其转换为日期：

```
var stringyDate = $("#data_inizio").val(); // mm/dd/yyyy
var dateyDate = new Date(stringyDate); 
```

现在获取`valueOf()`（返回自 1970 年 1 月 1 日以来的毫秒数）并除以 1000 以获得自 [same] 以来的秒数。

```
var ms = dateyDate.valueOf();
var s = ms / 1000; 
```

小提琴示例：http: [//jsfiddle.net/QpQ7U/](http://jsfiddle.net/QpQ7U/)

要在选择日期时发生这种情况，请修改日期选择`onSelect`器选项中的回调函数。

```
onSelect: function(selectedDate) {
    var v = $(this).val(),
        d = new Date(v);
    if (v.length > 0) {
        $('p#out').text(d.valueOf() + ' divided by 1000 is ' + (d.valueOf() / 1000));
    } else {
        $('p#out').text('No date selected');
    }
} 
```

使用 onSelect 的示例小提琴：http: [//jsfiddle.net/QpQ7U/1/](http://jsfiddle.net/QpQ7U/1/)

要将值存储在隐藏字段中，只需在 中指定该字段`onSelect`：

```
onSelect: function(selectedDate) {
    var d = new Date(selectedDate),
        s = parseSeconds(selectedDate);
    if (s > 0) {
        //display to user
        $('p#out_inizio').text(d.valueOf() + ' divided by 1000 is ' + s);
        //store in hidden field.
        $('input#out_inizio').val(s);
    } else {
        $('p#out_inizio').text('No date selected');
    }
    //set min date on other picker
    $("#data_fine").datepicker("option", "minDate", selectedDate);
} 
```

隐藏字段的示例小提琴：http: [//jsfiddle.net/QpQ7U/2/](http://jsfiddle.net/QpQ7U/2/)

要格式化为日/月/年，请使用以下`dateFormat`选项：

```
$("#data_inizio").datepicker({
    altField: '#mod_available_date_id_start',
    altFormat: '@',
    dateFormat: 'dd/mm/yy',
    ...
}); 
```

小提琴示例：http: [//jsfiddle.net/QpQ7U/5/](http://jsfiddle.net/QpQ7U/5/)

# android - 是否可以通过选择列表项来更改屏幕并发送文本（putExtra），以及如何？

> ID：11122366
> 
> 赞同：-2
> 
> 时间：2012-06-20T14:59:33.740
> 
> 标签：android, string, list, listview, android-intent

我正在开发一个食谱应用程序，我想知道您是否可以使用列表项来更改屏幕，将文本发送到下一个活动，就像您使用按钮一样，

如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:01:18.817

```
 lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
      // When clicked, show a toast with the TextView text
      Toast.makeText(getApplicationContext(), ((TextView) view).getText(),
          Toast.LENGTH_SHORT).show();

          Intent intent = new Intent(CURRENT_ACTIVITY.this*, NEW_ACTIVITY.class);
          intent.putExtra("keyName", "somevalue");
          startActivity(intent);
    }
  }); 
```

在活动 B

```
Bundle extras = getIntent().getExtras(); 
if(extras !=null)
{
String value = extras.getString("keyName");
} 
```

# android - LVL 库 Google Play 许可响应代码始终未针对测试帐户获得许可

> ID：11122371
> 
> 赞同：2
> 
> 时间：2012-06-20T15:00:09.900
> 
> 标签：android, google-play, android-lvl

我已经使用 LVL 库向我的 android 应用程序添加了许可。许可适用于在 Google Play 中购买的普通用户（我认为是这样 - 我没有关于问题的任何反馈）。当我主要使用一些测试帐户在第二台设备上对其进行测试时，它也有效。

目前我有一个问题，即无论我在开发人员控制台的“许可证测试答案”中设置什么，服务器总是在具有测试帐户的设备上返回 NOT_LICENSED 响应代码 (1)。当我在发布者帐户答案正确的设备上进行测试时（服务器返回我在“许可证测试答案”中设置的内容）。

我已经在签名发布版本和调试版本上进行了测试，并且始终相同。我已将相同的发布版本上传到 Google Play（并使用与上传的版本相同的 versionCode 作为调试版本）。我已经使用在测试设备上配置的单个（主要？？）测试帐户进行了测试。

有趣的事情 - 对于具有主要测试帐户的设备，我添加了发布者帐户（设置/帐户和同步/添加帐户），即使上面有发布者帐户，答案仍然始终是 NOT_LICENSED。不幸的是，我无法从该设备中删除测试帐户，因为我有一些我不想删除的数据。

我将 apk 提供给其他测试人员并为他们添加了测试帐户 - 他们有同样的问题 - 总是 NOT_LICENSED 响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:44:38.287

对于已经发布的应用程序，我遇到了同样的问题：如果您`android:versionCode`在清单中计数，高于当前发布的版本，则 Play 商店将始终返回 not_licensed。所以解决方案是在测试时不要计算版本代码。行为很奇怪，但这个解决方案对我有用。

# php - CakePHP 2.0+：从 Js 中检索 POST 数据->在控制器中提交表单

> ID：11122372
> 
> 赞同：1
> 
> 时间：2012-06-20T15:00:11.763
> 
> 标签：php, cakephp, post, xmlhttprequest

我正在使用 $this->Js->submit 将值异步传递给我的控制器，而不是更新 div (id = #upcoming)。不知何故，我无法保存/检索传递给我的控制器的字段“测试”的值。Firebug 告诉我传递了正确的值。我究竟做错了什么？

查看文件（播放列表.ctp）：

```
echo $this->Form->create('Add', array('url' => array('controller' => 'Gods', 'action' => 'add')));
echo $this->Form->input('test');       
echo $this->Js->submit('Addddd', array(
'url' => array(
    'controller' => 'Gods',
    'action' => 'add'
),
'update' => '#upcoming'
));
echo $this->Form->end();

echo $this->Js->writeBuffer(array('inline' => 'true')); 
```

控制器动作：

```
public function add()
{
$this->autoLayout = false;
   $this->layout = 'ajax';
$link = $this->request->data['Add']['test'];
$this->set('test',$link);
} 
```

及其视图文件（add.ctp）：

```
<?php
echo $test;
?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:01:56.110

您是否在控制器方法中尝试过 pr($link) ？或者，如果您愿意，只需将其发送到日志文件。这样您就可以查看是否收到了数据。

如果是这样，我认为没有任何返回，因为

```
 $this->autoLayout = false; 
```

试试没有这个。它仍然会调用 ajax 布局而不是默认的。否则你必须手动调用渲染函数

```
$this->render('add'); 
```

**编辑** 如以下评论中所述，请确保您的观点在正确的位置。（这将是与控制器关联的视图文件夹）

# javascript - 为什么创建侦听器会因在 Google Closure 中产生内存泄漏而臭名昭著？

> ID：11122376
> 
> 赞同：1
> 
> 时间：2012-06-20T15:00:17.537
> 
> 标签：javascript, google-closure-library

这篇关于内存泄漏的文章强调，拥有多余的事件侦听器会导致 Google Closure javascript 库中的内存泄漏。

[http://www.googleclosure.com/avoid-memory-leaks-with-goog-disposable/](http://www.googleclosure.com/avoid-memory-leaks-with-goog-disposable/)

为什么要特别注意事件监听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:04:10.470

由于库在内部存储您的处理程序，除非您明确删除它们，否则处理程序将保留在那里。当您不再使用某个类的某个实例时，库无法知道。

# android - ViewPager：从配置更改中恢复

> ID：11122379
> 
> 赞同：2
> 
> 时间：2012-06-20T15:00:31.917
> 
> 标签：android, android-viewpager

我很难从配置更改中恢复`ViewPager`。

我想要的是保存当前的寻呼机位置，以便在配置更改后可以看到相同的页面。为此，我`pager.getCurrentItem()`使用`pager.setCurrentItem`. 只是这不起作用：`setCurrentItem`实际上尝试重新创建该页面而不是选择它！即使页面已经创建。

现在我不确定在实现支持它的适配器时是否遗漏了一些东西，但是是否存在陷阱`setCurrentItem`以及何时`ViewPager`认为它已完全构建？但是，查看该函数的代码，这对我来说毫无意义；它似乎总是尝试重新创建一个页面，除非根本没有项目：

```
void setCurrentItemInternal(int item, boolean smoothScroll, boolean always, int velocity) {
    // these are the only checked that make this method return
    if (mAdapter == null || mAdapter.getCount() <= 0) {
        setScrollingCacheEnabled(false);
        return;
    }
    if (!always && mCurItem == item && mItems.size() != 0) {
        setScrollingCacheEnabled(false);
        return;
    }

    // ... removed some init code

    mCurItem = item;
    populate();

    // ...
} 
```

如您所见，`populate()`始终调用，除非根本没有项目，或者您尝试选择的项目已被选中。是什么赋予了？这对我来说没有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:06:17.280

> setCurrentItem 实际上尝试重新创建该页面而不是选择它！即使页面已经创建。

不完全是，至少就我阅读代码的方式而言。

> 如您所见，始终调用 populate() ，除非根本没有项目，或者您尝试选择的项目已被选中。

`populate()`会调用`addNewItem()`，哪个调用`instantiateItem()`就对了`PagerAdapter`。的`FragmentPagerAdapter`实现`PagerAdapter`将使用现有的片段（如果可用），否则它会调用`getItem()`以便您自己创建页面。所以，如果你使用`setRetainInstance(true)`你的页面片段，并且你正在使用`FragmentPagerAdapter`，它们应该被重用。

`FragmentStatePagerAdapter`似乎更复杂，如果您正在滚动自己的`PagerAdapter`sans 片段，则由您来实现缓存机制。

# java - Java 内联 int 交换。为什么这只适用于Java

> ID：11122381
> 
> 赞同：4
> 
> 时间：2012-06-20T15:00:35.433
> 
> 标签：java, c++, inline, puzzle, swap

我被要求在不使用临时变量或使用 xor 的情况下编写交换，我想出了这个。
在 Java 中，这是可行的，但在 C/C++ 中，这是行不通的。

我的印象是这将始终有效，因为“|”左侧的“a”的值 将被存储在一个寄存器中，然后对“a”的赋值将否定对“b”赋值的影响。

```
int a = 5;
int b = -13;
b = a | (0 & (a = b)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T15:12:01.497

您正在修改一个变量并在没有中间序列点的情况下读取它的值。

```
b =         a          + 0 *   (a = b);
//  reading a's value        modifying a 
```

这是未定义的行为。您无权对代码的作用抱有任何期望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:05:10.110

C/C++ 编译器将表达式优化`0 * (a = b)`为简单地`0`将您的代码片段转换为：

```
int a = 5;
int b = -13;
b = a; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:14:40.977

在 C/C++ 中，赋值是按照表达式的顺序执行的。在 Java 中，无论其他表达式如何，赋值都是最后发生的。

例如，这在 C 中递增，但在 Java 中不执行任何操作。

```
a = a++; 
```

# silverlight - Silverlight中的画布和矩形之间的关系

> ID：11122382
> 
> 赞同：0
> 
> 时间：2012-06-20T15:00:48.783
> 
> 标签：silverlight, c#-4.0, asp.net-4.0

我是银光的新手，想从专业人士那里了解更多。让我告诉你我想要做什么。我喜欢摄影，我的目标是创建一个网站，允许用户查看他们的图像并能够旋转、缩放、裁剪、特殊效果等。我开发了一个允许用户订购图片的网站，但现在我想要开始进行实际的图片/图像处理。所以为了测试我放了一个画布和一个矩形（带有图像）。放置了一个滑块，并能够将滑块链接到矩形。当我增加滑块时，图像会变大。但我有点希望随着图像变大它不会超出画布的边界。我认为这就是成为画布的孩子的意思。我弄错了吗？如果是这样，您如何建议我这样做？请记住，我对此很陌生，并且可能会对此非常错误。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:19:33.937

你是对的。在 Silverlight（如 WPF、WinForms 等）中，gui 元素形成了元素的层次结构，其中控件可以充当父级或子级。

矩形超出其容器边界的原因在于控件对齐的方式。这取决于您要将孩子放入哪种容器中。

例如，在画布中，您可以使用绝对测量值（左、上、高、宽）定位子级。在像 StackPanel 这样的自组织容器中，您可以选择水平对齐方式（Left、HCenter、HStretch、Right）或垂直对齐方式（Top、VCenter、VStretch、Bottom），当您将其放置在父级中时，这将确定子级的行为。此外，您可以指定孩子的尺寸（宽度、高度）和一个可选的边距，该边距确定孩子的上、右、下和左边界与其封闭父级之间的间隙。

但是，无论您选择什么容器，它都是固有的，您可以让其子代超出其边界，例如，边距为负数或大于容器边界，或者只是由一个尺寸大于其容器的子代，如您所描述的情况用你的矩形。

在您的情况下，我会考虑使用剪辑的想法。剪辑只是意味着

(1) 定义一个几何区域（在 Silverlight 和 WPF 中它是一个 Path 对象），它位于某些图形上下文（您的 ui 或控件的某些部分等）之上。

(2) 位于该剪切区域边界内的内容仍然可见，而其他所有内容均不可见。

因此，您可以将剪辑区域视为屏幕上用于查看的窗口。

当您使用 Microsoft Blend 时，这很容易实现：

(1) 只需使用几何形状，如矩形、圆形或自定义路径。

(2) 把它放在你的 UI 上的某个地方

(3) 右键单击​​形状，选择“路径”，然后选择“制作剪切路径”

(4) 和voulà，您刚刚定义了一个可以修改的剪切区域，因为您习惯于修改控件。

希望这能让您了解如何处理您的问题。干杯。

# exception - 教义注释例外

> ID：11122384
> 
> 赞同：0
> 
> 时间：2012-06-20T15:00:49.810
> 
> 标签：exception, doctrine, annotations, mapping

我有 5 台服务器运行相同的应用程序（Zend + Doctrine），在最后一台服务器（最近安装）上我遇到了这个异常：

```
Application error Exception information:

Message: Class Entity\User is not a valid entity or mapped super class. Stack trace:

#0 /home/library/vendor/doctrine/2.0/Doctrine/ORM/Mapping/Driver/AnnotationDriver.php(138): Doctrine\ORM\Mapping\MappingException::classIsNotAValidEntityOrMappedSuperClass('Entity\User')
#1 /home/library/vendor/doctrine/2.0/Doctrine/ORM/Mapping/ClassMetadataFactory.php(282): Doctrine\ORM\Mapping\Driver\AnnotationDriver->loadMetadataForClass('Entity\User', Object(Doctrine\ORM\Mapping\ClassMetadata))
#2 /home/library/vendor/doctrine/2.0/Doctrine/ORM/Mapping/ClassMetadataFactory.php(176): Doctrine\ORM\Mapping\ClassMetadataFactory->loadMetadata('Entity\User')
#3 /home/library/vendor/doctrine/2.0/Doctrine/ORM/EntityManager.php(247): Doctrine\ORM\Mapping\ClassMetadataFactory->getMetadataFor('Entity\User')
#4 /home/library/vendor/doctrine/2.0/Doctrine/ORM/EntityManager.php(564): Doctrine\ORM\EntityManager->getClassMetadata('Entity\User')
#5 /home/imobfusion/public_html/application/modules/a1/controllers/IndexController.php(68): Doctrine\ORM\EntityManager->getRepository('Entity\User')
#6 /home/library/vendor/zend/1.11.3/Zend/Controller/Action.php(513): A1_IndexController->testDoctrineAction()
#7 /home/library/vendor/zend/1.11.3/Zend/Controller/Dispatcher/Standard.php(295): Zend_Controller_Action->dispatch('testDoctrineAct...')
#8 /home/library/vendor/zend/1.11.3/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#9 /home/library/vendor/zend/1.11.3/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#10 /home/library/vendor/zend/1.11.3/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#11 /home/imobfusion/public_html/public/index.php(21): Zend_Application->run()
#12 {main}  

Request Parameters:

array(3) {   ["controller"]=>   string(5) "index"   ["action"]=>   string(13) "test-doctrine"   ["module"]=>   string(2) "a1" } 
```

在 AnnotationDriver.php(138) 上查看：

```
// Evaluate Entity annotation
if (isset($classAnnotations['Doctrine\ORM\Mapping\Entity'])) {
   $entityAnnot = $classAnnotations['Doctrine\ORM\Mapping\Entity'];
   $metadata->setCustomRepositoryClass($entityAnnot->repositoryClass);
} else if (isset($classAnnotations['Doctrine\ORM\Mapping\MappedSuperclass'])) {
   $metadata->isMappedSuperclass = true;
} else {
   throw MappingException::classIsNotAValidEntityOrMappedSuperClass($className);
} 
```

**否则抛出异常**

但我真的不知道会发生什么！

任何帮助或提示？

观察：

*   /home/library/ <----- 此文件夹在所有服务器上都是相同的（相同的）；
*   Entity\User 是正确指向的，并且在两台服务器上都是相同的；
*   我在实体管理器上调用存储库之前禁用缓存并清除缓存并发生错误！
*   最后一台服务器上的 PHP 版本是 5.3.8，服务器 4（运行正常）是 5.3.10。
*   错误发生在应用程序上的所有（18）个实体上，而不仅仅是实体\用户。

**跟踪我在引导程序上执行此操作的问题（var_dump()，die()）：**

```
// AnnotationDriver
$driver = $config->newDefaultAnnotationDriver($options["entities_dir"]);
$config->setMetadataDriverImpl($driver);

var_dump($driver->getAllClassNames());
die(); 
```

并且 getAllClassNames() 仅在服务器 5 上返回一个空数组，这是错误，类未在服务器 05 上加载，但是为什么..??? 测试继续！！

**追踪更多我发现更多**

```
public function isTransient($className)
{
    $classAnnotations = $this->_reader->getClassAnnotations(new \ReflectionClass($className));
        if($className=="Entity\User")         // Debug
        {                                     // Debug  
            var_dump($classAnnotations);  // Debug
        }                                 // Debug  

    return ! isset($classAnnotations['Doctrine\ORM\Mapping\Entity']) &&
           ! isset($classAnnotations['Doctrine\ORM\Mapping\MappedSuperclass']);
} 
```

*   注释驱动程序上的此方法返回 true $classAnnotations 是一个空数组。
*   在服务器 05 上恢复加载注释失败，但是为什么！继续！

发现问题但未解决：

我找到了起源，并创建了这个测试脚本来确认：

```
require_once "../application/doctrine/Entity/User.php";
$class = new ReflectionClass("Entity\User"); 
echo $class->getName();
echo $class->getDocComment(); 
```

其他服务器上的输出：

实体\用户/** @Entity * @HasLifecycleCallbacks * @Table(name="user") */

服务器 05 上的输出：

实体\用户

->getDocComment 不仅仅适用于这个特定的类和服务器：

用户类/实体：

```
<?php
/** @Entity
 *  @HasLifecycleCallbacks
 *  @Table(name="user")
 */

namespace Entity;
use Validation;
use \DateTime;
use \LogHelper;

class User
{

    /////////////////////////////////////////////////////////////////////////
    // Properties                                                          //
    /////////////////////////////////////////////////////////////////////////

    /**
    * @Id
    * @Column(type="integer")
    * @generatedValue(strategy="AUTO")
    */
    protected $id;
    /**
     * @Column(type="integer")
     */
    protected $type = 0;    
    /**
     * @Column(length=50)
     */
    protected $name;
    /**
     * @Column(length=50)
     */
    protected $user_name;
    /**
     * @Column(length=100)
     */
    protected $email;
    /**
     * @Column(length=14)
     */
    protected $phone;
    /**
     * @Column(length=14)
     */
    protected $cell_phone;
    /**
     * @Column(length=36)
     */
    protected $password;
    /**
     * @Column(type="text",length=1000)
     */
    protected $permissions;
    /**
     * @Column(type="text",length=1000)
     */
    protected $time_table;
    /**
     * @Column(type="text",length=1000,nullable=true)
     */
    protected $desktop;
    /**
     * @Column(type="boolean",nullable=true)
     */
    protected $chat_on = 0;    
    // Behaviors

    /**
     * @Column(type="datetime")
     */
    protected $created_at;
    /**
     * @Column(type="datetime")
     */
    protected $updated_at;
    /**
     * @Column(type="integer")
     * @version
     */
    protected $version;

    /////////////////////////////////////////////////////////////////////////
    // Relations                                                           //
    /////////////////////////////////////////////////////////////////////////

    /**
    * @ManyToOne(targetEntity="Branch", inversedBy="users")
    * @JoinColumn(name="branch_id", referencedColumnName="id")
    */
    private $branch;
    /**
    * @OneToMany(targetEntity="Property", mappedBy="captivator");
    */
    private $properties;

    /**
    * @OneToMany(targetEntity="KeyHistory", mappedBy="user");
    */
    private $key_histories;
    /**
    * @OneToMany(targetEntity="Presentation", mappedBy="user");
    */
    private $presentations;       
    /**
    * @OneToMany(targetEntity="Log", mappedBy="user");
    */
    private $logs;
    /**
    * @OneToMany(targetEntity="Chat", mappedBy="user");
    */
    private $chats;    

    /////////////////////////////////////////////////////////////////////////
    // ForeingKey                                                          //
    /////////////////////////////////////////////////////////////////////////

    /**
     * @Column(type="integer")
     */
    protected $branch_id;

    /////////////////////////////////////////////////////////////////////////
    // Getters/Setters                                                     //
    /////////////////////////////////////////////////////////////////////////

    public function setId($value) {$this->id = $value;}
    public function getId() {return $this->id;}
    public function setType($value) {$this->type = $value;}
    public function getType() {return $this->type;}    
    public function setName($value) {$this->name = $value;}
    public function getName() {return $this->name;}
    public function setUserName($value) {$this->user_name = $value;}
    public function getUserName() {return $this->user_name;}
    public function setEmail($value) {$this->email = $value;}
    public function getEmail() {return $this->email;}
    public function setPhone($value) {$this->phone = $value;}
    public function getPhone() {return $this->phone;}
    public function setCellPhone($value) {$this->cell_phone = $value;}
    public function getCellPhone() {return $this->cell_phone;}
    public function setPassword($value) {$this->password = $value;}
    public function getPassword() {return $this->password;}
    public function setPermissions($value) {$this->permissions = $value;}
    public function getPermissions() {return $this->permissions;}
    public function setTimeTable($value) {$this->time_table = $value;}
    public function getTimeTable() {return $this->time_table;}
    public function setDesktop($value) {$this->desktop = $value;}
    public function getDesktop() {return $this->desktop;}
    public function setChatOn($value) {$this->chat_on = $value;}
    public function getChatOn() {return $this->chat_on;}

    public function setBranch($value) {$this->branch = $value;}
    public function getBranch() {return $this->branch;}
    public function setBranchId($value) {$this->branch_id = $value;}
    public function getBranchId() {return $this->branch_id;}

    public function getCreatedAt() {return $this->created_at->format("d/m/Y H:i:s");}
    public function getUpdatedAt() {return $this->updated_at->format("d/m/Y H:i:s");}
    public function getVersion() {return $this->version;}

    /////////////////////////////////////////////////////////////////////////
    // Constructor                                                         //
    /////////////////////////////////////////////////////////////////////////

    public function __construct()
    {
        $this->created_at = $this->updated_at = new DateTime("now");
    }

    /////////////////////////////////////////////////////////////////////////
    // Hooks                                                               //
    /////////////////////////////////////////////////////////////////////////

    /**
     * @PrePersist
     * @PreUpdate
     */
    public function Validate()
    {
        $this->ApplyBehaviors();

        $e = new ValidationException();

        if(empty($this->name))
        {
            $e->AppendError("O Campo nome não pode ser vazio.","name");
        }

        if(empty($this->user_name))
        {
            $e->AppendError("O Campo nome de usuário não pode ser vazio.","user_name");
        }

        if(empty($this->email))
        {
            $e->AppendError("O Campo email não pode ser vazio.","email");
        }

        if($e->hasError())
            throw $e;

    }

    /**
     * @PostPersist
     */
    public function onPostPersist()
    {
        LogHelper::SaveAction(LogHelper::ACTION_ADD,LogHelper::ENTITY_USER,$this->getId());
    }

    /**
     * @PostUpdate
     */
    public function onPostUpdate()
    {
        LogHelper::SaveAction(LogHelper::ACTION_UPDATE,LogHelper::ENTITY_USER,$this->getId());
    }

    /**
     * @PreRemove
     */
    public function onPreRemove()
    {
        LogHelper::HoldId($this->id);
    }

    /**
     * @PostRemove 
     */
    public function onPostRemove()
    {
        LogHelper::SaveAction(LogHelper::ACTION_DELETE,LogHelper::ENTITY_USER,$this->id);
    }

    private function ApplyBehaviors()
    {
        $this->updated_at = new DateTime("now");
    }

    /////////////////////////////////////////////////////////////////////////
    // Helpers                                                             //
    /////////////////////////////////////////////////////////////////////////

    public function syncronize($data)
    {
        $this->setType($data["type"]);
        $this->setName($data["name"]);
        $this->setUserName($data["user_name"]);
        $this->setEmail($data["email"]);
        $this->setPhone($data["phone"]);
        $this->setCellPhone($data["cell_phone"]);
        $this->setPermissions($data["permissions"]);
        $this->setTimeTable($data["time_table"]);
        $this->setDesktop($data["desktop"]);
        $this->setBranchId($data["branch_id"]);
        $this->setChatOn($data["chat_on"]);
    }

    public function toArray()
    {
        $data["id"] = $this->getId();
        $data["type"] = $this->getType();
        $data["name"] = $this->getName();
        $data["user_name"] = $this->getUserName();
        $data["phone"] = $this->getPhone();
        $data["cell_phone"] = $this->getCellPhone();
        $data["email"] = $this->getEmail();
        $data["password"] = $this->getPassword();
        $data["permissions"] = $this->getPermissions();
        $data["time_table"] = $this->getTimeTable();
        $data["desktop"] = $this->getDesktop();
        $data["branch_id"] = $this->getBranchId();
        $data["chat_on"] = $this->getChatOn();

        $data["created_at"] = $this->getCreatedAt();
        $data["updated_at"] = $this->getUpdatedAt();
        return $data;
    }

} 
```

为什么 getDocComment 仅在服务器 05 上不适用于上述类/实体？继续....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:32:09.027

解决了：

**错误的：**

```
<?php
/** @Entity
 *  @HasLifecycleCallbacks
 *  @Table(name="user")
 */

namespace Entity;
use Validation;
use \DateTime;
use \LogHelper; 
```

**正确的：**

```
<?php
namespace Entity;
use Validation;
use \DateTime;
use \LogHelper;

/** @Entity
 *  @HasLifecycleCallbacks
 *  @Table(name="user")
 */ 
```

但是在 php 5.3.8 上，错就是对，只发生在 php 5.3.10 上！！

# django-templates - 我如何通过 django 模板中的表达式 json 属性动态/评估

> ID：11122387
> 
> 赞同：0
> 
> 时间：2012-06-20T15:01:06.507
> 
> 标签：django-templates

阅读 JSON 以进行运动。使用部分匹配标记。客队和主队在大多数情况下共享相同的标记，但我无法控制的 JSON 属性如下：

```
<div class="away {{game.awayTeam_last_name|slugify}}">
  <a href="#" title="{{game.awayTeam_first_name}} {{game.awayTeam_last_name}}">
    <span class="{{league}}-logo"></span>
<span class="city">{{game.awayTeam_first_name}}</span>
    {% if game.event_status != "pre-event" %}
      <span title="score">{{game.awayTeam_score}}</span>
    {% else %}
      <span title="record entering game">(0-0)</span>
    {% endif %}
  </a>
</div>
<span>@</span>
<div class="home {{game.homeTeam_last_name|slugify}}">
  <a href="#" title="{{game.homeTeam_first_name}} {{game.homeTeam_last_name}}">
    <span class="{{league}}-logo"></span>
    <span class="city">{{game.homeTeam_first_name}}</span>
    {% if game.event_status != "pre-event" %}
      <span title="score">{{game.homeTeam_score}}</span>
    {% else %}
      <span title="record entering game">(0-0)</span>
    {% endif %}  
  </a>
</div> 
```

有没有办法像某些表达式评估器一样缩小/重构上面的内容，以使 home 和 away 通过变量传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:43:17.957

没有回答自己的问题，但我确实让数据人员更好地格式化数据，所以变成了.. awayteam: { first_name:'', last_name:'', score:'' } hometeam: { first_name:'', last_name: ''， 分数：'' }

允许我将模板缩小一半 =)

# javascript - 新打开的选项卡会杀死函数调用

> ID：11122389
> 
> 赞同：0
> 
> 时间：2012-06-20T15:01:15.667
> 
> 标签：javascript, jquery

我有这样一个for循环：

```
for (var i = 0; i < documentsCount; i++) {
    var e = checkBoxes[i];
    if (e.checked) {
        var documentType = documents[i].value;
        if ("ConcreteType_1" == documentType) {
            makeAction();
        } else {
            if (attachmentCount > 0) {
                downloadDoc();
            }
        }
    }
} 
```

downloadDoc() 函数为每个文件（具有附件且不是“ConcreteType_1”类型）打开一个 iframe，而 makeAction() 函数打开一个新选项卡以预览文件源。如果我检查几个带有附件的文件，一切都很好 - 出现了几个下载框，但如果在带有附件的文件中至少有一个“ConcreteType_1”类型的文件，则会打开一个新选项卡并且没有下载框出现......

如果有人知道如何处理它，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:08:57.963

对不起，打扰您。问题是本地的。打开新标签后，有一个脚本可以清除所有选中的框。

# javascript - 匹配 jQuery 中任何类的所有组合

> ID：11122393
> 
> 赞同：10
> 
> 时间：2012-06-20T15:01:21.537
> 
> 标签：javascript, jquery, jquery-selectors

我有两个逗号分隔的选择器；

```
.class, .foo, .bar

.lorem, .ipsum, .potato 
```

我希望能够在这两组之间选择任何可能的组合。所以它会选择匹配的元素

```
.class.lorem
.class.ipsum
.class.potato
.foo.lorem
.foo.ipsum
.foo.potato
.bar.lorem
.bar.ipsum
.bar.potato 
```

我怎样才能有效地实现这一目标？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T15:03:10.457

从第一个集合中选择所有具有任何类的元素，然后从另一个集合中[过滤](http://api.jquery.com/filter/)掉没有类的元素：

```
$('.class, .foo, .bar').filter('.lorem, .ipsum, .potato') 
```

# python - 如何获取 Python 中两个 xml 标签之间的全部内容？

> ID：11122397
> 
> 赞同：15
> 
> 时间：2012-06-20T15:01:36.913
> 
> 标签：python, xml, xml-parsing, lxml

我尝试在打开的 xml 标记和关闭的对应项之间获取全部内容。

在像下面这样的直接情况下获取内容很容易，但是如果使用*混合内容*并且我想**保留内部标签**`title`，我怎样才能获得标签之间的**全部内容**？

 ***```
<?xml version="1.0" encoding="UTF-8"?>
<review>
  <title>Some testing stuff</title>
  <text sometimes="attribute">Some text with <extradata>data</extradata> in it.
  It spans <sometag>multiple lines: <tag>one</tag>, <tag>two</tag> 
  or more</sometag>.</text>
</review> 
```

我想要的是两个**`text`**标签之间的内容，包括任何标签：`Some text with <extradata>data</extradata> in it. It spans <sometag>multiple lines: <tag>one</tag>, <tag>two</tag> or more</sometag>.`

现在我使用正则表达式，但它有点乱，我不喜欢这种方法。我倾向于基于 XML 解析器的解决方案。我查看了`minidom`, `etree`，`lxml`但`BeautifulSoup`找不到这种情况的解决方案（整个内容，包括内部标签）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T15:39:57.763

这是对我和您的样本有用的东西：

```
from lxml import etree
doc = etree.XML(
"""<?xml version="1.0" encoding="UTF-8"?>
<review>
  <title>Some testing stuff</title>
  <text>Some text with <extradata>data</extradata> in it.</text>
</review>"""
)

def flatten(seq):
  r = []
  for item in seq:
    if isinstance(item,(str,unicode)):
      r.append(unicode(item))
    elif isinstance(item,(etree._Element,)):
      r.append(etree.tostring(item,with_tail=False))
  return u"".join(r)

print flatten(doc.xpath('/review/text/node()')) 
```

产量：

```
Some text with <extradata>data</extradata> in it. 
```

xpath 选择元素的所有子节点，`<text>`如果它们是字符串/unicode 子类 ()，则直接将它们呈现为 unicode，`<class 'lxml.etree._ElementStringResult'>`或者如果它是，则调用`etree.tostring`它`Element`，`with_tail=False`避免尾部重复。

如果存在其他节点类型，您可能需要处理它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T15:44:54.280

[使用lxml](http://docs.python.org/library/xml.etree.elementtree.html) *非常容易，使用`parse()`and`tostring()`函数：

```
from  lxml.etree import parse, tostring 
```

首先你解析文档并获取你的元素（我使用的是 XPath，但你可以使用任何你想要的东西）：

```
doc = parse('test.xml')
element = doc.xpath('//text')[0] 
```

该`tostring()`函数返回元素的文本表示：

```
>>> tostring(element)
'<text>Some <text>text</text> with <extradata>data</extradata> in it.</text>\n' 
```

但是，您不需要外部元素，因此我们可以通过简单的`str.replace()`调用将它们删除：

```
>>> tostring(element).replace('<%s>'%element.tag, '', 1)
'Some <text>text</text> with <extradata>data</extradata> in it.</text>\n' 
```

请注意，`str.replace()`接收 1 作为第三个参数，因此它将仅删除第一次出现的开始标记。也可以使用结束标签来做到这一点。现在，我们通过 -1 而不是 1 来替换：

```
>>> tostring(element).replace('</%s>'%element.tag, '', -1)
'<text>Some <text>text with <extradata>data</extradata> in it.\n' 
```

当然，解决方案是一次做所有事情：

```
>>> tostring(element).replace('<%s>'%element.tag, '', 1).replace('</%s>'%element.tag, '', -1)
'Some <text>text with <extradata>data</extradata> in it.\n' 
```

**编辑**：@Charles 提出了一个很好的观点：这段代码很脆弱，因为标签可以有属性。一个可能但仍然有限的解决方案是在第一个拆分字符串`>`：

```
>>> tostring(element).split('>', 1)
['<text',
 'Some <text>text</text> with <extradata>data</extradata> in it.</text>\n'] 
```

得到第二个结果字符串：

```
>>> tostring(element).split('>', 1)[1]
'Some <text>text</text> with <extradata>data</extradata> in it.</text>\n' 
```

然后将其拆分：

```
>>> tostring(element).split('>', 1)[1].rsplit('</', 1)
['Some <text>text</text> with <extradata>data</extradata> in it.', 'text>\n'] 
```

最后得到第一个结果：

```
>>> tostring(element).split('>', 1)[1].rsplit('</', 1)[0]
'Some <text>text</text> with <extradata>data</extradata> in it.' 
```

尽管如此，这段代码仍然很脆弱，因为`>`它是 XML 中完全有效的字符，即使在属性内部也是如此。

无论如何，我必须承认[MattH 解决方案](https://stackoverflow.com/a/11123135/287976)是真正的通用解决方案。

* 实际上，此解决方案也适用于[ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)，如果您不想依赖 lxml，这很好。唯一的区别是您将无法使用 XPath。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T15:48:42.620

```
from lxml import etree
t = etree.XML(
"""<?xml version="1.0" encoding="UTF-8"?>
<review>
  <title>Some testing stuff</title>
  <text>Some text with <extradata>data</extradata> in it.</text>
</review>"""
)
(t.text + ''.join(map(etree.tostring, t))).strip() 
```

这里的诀窍是它`t`是可迭代的，并且在迭代时会产生所有子节点。由于 etree 避免了文本节点，因此您还需要恢复第一个子标记之前的文本，使用`t.text`.

```
In [50]: (t.text + ''.join(map(etree.tostring, t))).strip()
Out[50]: '<title>Some testing stuff</title>\n  <text>Some text with <extradata>data</extradata> in it.</text>' 
```

或者：

```
In [6]: e = t.xpath('//text')[0]

In [7]: (e.text + ''.join(map(etree.tostring, e))).strip()
Out[7]: 'Some text with <extradata>data</extradata> in it.' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-16T20:12:37.160

我喜欢上面@Marcin 的解决方案，但是我发现当使用他的第二个选项（转换子节点，而不是树的根）时，它不处理实体。

他上面的代码（修改为添加实体）：

```
from lxml import etree
t = etree.XML("""<?xml version="1.0" encoding="UTF-8"?>
<review>
  <title>Some testing stuff</title>
    <text>this &amp; that.</text>
</review>""")
e = t.xpath('//text')[0]
print (e.text + ''.join(map(etree.tostring, e))).strip() 
```

返回：

```
this & that. 
```

使用裸/未转义的“&”字符而不是正确的实体（“&”）。

我的解决方案是使用在节点级别（而不是所有子节点）调用 etree.tostring，然后使用正则表达式去除开始和结束标记：

```
import re
from lxml import etree
t = etree.XML("""<?xml version="1.0" encoding="UTF-8"?>
<review>
  <title>Some testing stuff</title>
    <text>this &amp; that.</text>
</review>""")

e = t.xpath('//text')[0]
xml = etree.tostring(e)
inner = re.match('<[^>]*?>(.*)</[^>]*>\s*$', xml, flags=re.DOTALL).group(1)
print inner 
```

产生：

```
this &amp; that. 
```

我使用 re.DOTALL 来确保这适用于包含换行符的 XML。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-20T15:21:02.083

刚刚找到解决方案，非常简单：

```
In [31]: t = x.find('text')

In [32]: t
Out[32]: <Element text at 0xa87ed74>

In [33]: list(t.itertext())
Out[33]: ['Some text with ', 'data', ' in it.']

In [34]: ''.join(_)
Out[34]: 'Some text with data in it.' 
```

`itertext`绝对是去这里的方式！

编辑：//对不起，我以为你只想要孩子之间的文字，我的错***

# recursion - CTE 创建对象树

> ID：11122398
> 
> 赞同：1
> 
> 时间：2012-06-20T15:01:37.403
> 
> 标签：recursion, common-table-expression

我有两个表：文件夹，文件。每个表有 4 个字段：ParentID、ID、Name、Type

我需要创建一个 CTE 以便使用 T-SQL 一次性检索整个树。到目前为止，这就是我所做的，但递归尚未激活。

我忘了提到一个文件夹内可能有一个或多个文件夹/文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:18:03.957

假设您正在使用根目录中`NULL`的项目，则以下内容应该可以工作：`ParentID`

```
WITH FilesAndFolders AS (
    SELECT ID AS FileID, 
           CAST(NULL AS int) AS FolderID, 
           ParentID, 
           Name, 
           [Type]
    FROM File
    UNION ALL
    SELECT CAST(NULL AS int),
           ID, 
           ParentID, 
           Name, 
           [Type]
    FROM Folder
),
Tree AS (
    SELECT FileID, 
           FolderID, 
           Name, 
           [Type], 
           CAST('' AS nvarchar(MAX)) AS [Path]
    FROM FilesAndFolders
    WHERE ParentID IS NULL
    UNION ALL 
    SELECT FF.FileID, 
           FF.FolderID, 
           FF.Name, 
           FF.[Type], 
           T.[Path]+T.[Name]+'/'
    FROM FilesAndFolders FF
    JOIN Tree T ON T.FolderID = FF.ParentID
)
SELECT FileID, FolderID, [Path]+[Name] FullName, [Type]
FROM Tree 
```

# mobile - Tabris 移动浏览器客户端是如何创建的？

> ID：11122400
> 
> 赞同：0
> 
> 时间：2012-06-20T15:01:39.720
> 
> 标签：mobile

Tabris 拥有本地移动和浏览器客户端。我看到有关创建本机移动客户端的信息。如何创建移动浏览器客户端？我想将浏览器用于不需要访问本机设备的东西，比如相机。我知道如何使用 Eclipse RAP 创建标准桌面客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:42:17.547

Tabris 的原生移动客户端在移动设备上速度更快、外观更好（原生小部件）。使用移动设备上的浏览器访问 RAP 服务器通常很慢，或者移动浏览器有问题。这就是为什么我建议始终在移动设备而不是浏览器上使用本机客户端。

如果您想尝试使用移动浏览器访问 RAP 服务器，只需在浏览器的 URL 字段中输入 IP 和入口点。然后通过 http 获取 RAP 客户端，因为它嵌入在您从 RAP 服务器接收的第一页中。

# vb.net - 尝试访问我的共享方法（JSON 和 VB.NET）中的类变量时遇到问题

> ID：11122402
> 
> 赞同：0
> 
> 时间：2012-06-20T15:01:49.417
> 
> 标签：vb.net, json, variables, shared

在我的 .aspx 中，我有一些如下所示的 JSON 代码：

```
function someFunctionName() {
        var dataStuff = $.toJSON({
            someData: $("#someData").text(),
            someMoreData: $("#someMoreData").text()
        });
        $.ajax({
            type: "POST",
            url: "PageName.aspx/doIt",
            data: dataStuff,
            contentType: "application/json",
            dataType: "json"
        });
        document.location.href = 'PageName.aspx';
} 
```

基本上我正在做的是从一个页面上的两个标签中提取文本，并通过调用如下所示的“doIt”函数将它们发送到另一个页面：

```
<WebMethod()> _
Public Shared Sub doIt(ByVal someData As String, ByVal someMoreData As String)
    MessageBox.Show("Successful execution!")
End Sub 
```

我很清楚，“doIt”函数和 JSON 调用位于两个单独的 Web 表单上。我的问题是共享“doIt”函数后，我无法访问该类的任何全局变量。如果我删除共享，我的 JSON 不会执行。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:08:11.773

如果合适，您也可以将类中的字段（“全局变量”，正如您所说的那样）更改为共享。然后可以从共享方法访问它们。但是，这意味着它们的值将在类的所有实例之间共享。但是，如果这就是您想要的，那就是您的答案。

# dojo - dojox.storage AMD 示例在哪里工作？

> ID：11122403
> 
> 赞同：2
> 
> 时间：2012-06-20T15:01:54.553
> 
> 标签：dojo

我似乎无法找到 dojox.storage 最近某处记录。**在1.7 (AMD)**`dojox.storage`中坏了？似乎单元测试甚至不起作用。在 FF 或 IE 上的示例似乎根本不起作用。**`/dojo-release-1.7.2-src/dojox/storage/tests/test_storage.html`**

 **使用本地存储的推荐方法是什么？在我们的例子中，我们希望使用 HTML5 存储，当 cookie 存储不可用时，它会依赖于 cookie 存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:07:09.480

以下示例来自[http://dojotoolkit.org/reference-guide/1.8/dojox/storage.html](http://dojotoolkit.org/reference-guide/1.8/dojox/storage.html)它适用于 Dojo 1.7 及更高版本。

```
dojo.require("dojox.storage");
var storageProvider=null;
dojo.addOnLoad(function(){
dojox.storage.manager.initialize();
storageProvider=dojox.storage.manager.getProvider();
storageProvider.initialize();
var myObject={key1:true};
storageProvider.put("myValue", myObject, function(status, keyName){
        alert("value put in "+keyName);
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:05:22.860

根据[http://dojotoolkit.org/reference-guide/1.8/dojox/storage.html](http://dojotoolkit.org/reference-guide/1.8/dojox/storage.html)和[http://bugs.dojotoolkit.org/ticket/14465](http://bugs.dojotoolkit.org/ticket/14465)，dojox.storage 预计不会与 AMD 一起使用，并且不会暂时不会。

也就是说，这在 dojo 1.8.3 中对我有用：

```
require(["dojox/storage", "dojo/ready"], function (storage, ready) {
    ready(function() {
       var storageProvider = dojox.storage.manager.getProvider();
       storageProvider.initialize();
       var vals = storageProvider.get("InventoryMainSelectionHistory");
       var i = 1;
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T14:15:41.757

至于**DoJo 1.9.2**，`dojox.storage`test ( `/dojox/storage/tests/test_storage.html`) 不起作用。经过仔细检查，它恰好是该特定代码中的初始化问题：

```
// wait until the storage system is finished loading
dojo.addOnLoad(function(){
    // is the storage already loaded?
    if(dojox.storage.manager.isInitialized() == false){
        dojo.connect(dojox.storage.manager, "loaded", TestStorage, TestStorage.initialize);
    }else{
        dojo.connect(dojo, "loaded", TestStorage, TestStorage.initialize);
    }
}); 
```

侦听器已注册等待在 dojo 上“加载”的事件，在较新的 DoJo 版本中未调用该事件。更改代码后：

```
dojo.addOnLoad(function(){
    TestStorage.initialize();
}); 
```

FireFox 和 IE 10 中的示例函数（用于 LocalStorageProvider）。**

# ruby - 用于 selenium-webdriver 的 launcher.rb

> ID：11122405
> 
> 赞同：3
> 
> 时间：2012-06-20T15:02:15.587
> 
> 标签：ruby, firefox, selenium, webdriver, watir

我们正在使用 watir webdriver 来测试我们的应用程序。目前，我在 linux 服务器上每 1 或 3 分钟启动 20 个 watir 测试。由于 Firefox 的工作方式，我们经常会遇到测试无法运行，因为它在启动期间锁定了端口 7055。如果端口没有及时发布，同时开始的测试最终会超时。

经过大量的实验，我似乎已经能够通过修改这个文件来解决这个问题：

gems/selenium-webdriver-2.21.1/lib/selenium/webdriver/firefox/launcher.rb

我在顶部附近添加了这段代码来分配一个随机锁定端口，而不仅仅是默认的 7055。这似乎有很大帮助，现在只看到罕见的失败。

询问是否有更好的方法来做到这一点，或者这是否会带来任何问题？

```
 ### added to attempt to reduce unable to open firefox issues
      if @port == 7055 then
            @port += rand(2000)
            puts "PORT: #{@port}"
      end 
```

其他人搞砸了这个？我对 ruby​​ 很陌生，所以猜测有一种更好的方法来编写脚本。

感谢您提供的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:06:02.083

我认为您最好在每个脚本中加入一些逻辑，而不是修改 firefox launcher.rb。这样的事情可能会有所帮助！

看看下面的链接： [Ruby - 检查端口是否打开](https://stackoverflow.com/questions/517219/ruby-see-if-a-port-is-open)

# git - 在 bash 中获取 git 状态的最快方法

> ID：11122410
> 
> 赞同：12
> 
> 时间：2012-06-20T15:02:38.083
> 
> 标签：git, bash

一段时间以来，我一直`__git_ps1`在 bash 的 PS1 提示符（带有`PS1='\w$(__git_ps1)'`）中使用该函数。现在我想根据分支状态为它着色。

我编写了一个 bash 函数来检查当前分支是否被修改，并根据状态将颜色设置为红色或白色。问题是它用于`git status`检查状态（这是我知道的唯一方法），并且比 慢几倍`__git_ps1`，这足以在我使用提示时引起烦人的延迟（我处于非常虚弱的状态）上网本）。

所以我问：有没有更快的方法来检查当前 git 文件夹的状态？ `__git_ps1`比手动解析要快得多`git branch`，所以我想可能还有其他隐藏的 git 功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T15:37:56.833

不完全是你的答案，但 bash-completion 有这个内置的。

如果将 bash ENV GIT_PS1_SHOWDIRTYSTATE 设置为非空值，则未暂存 (*) 和暂存 (+) 更改将显示在分支名称旁边。您可以使用 bash.showDirtyState 变量配置每个存储库，一旦启用 GIT_PS1_SHOWDIRTYSTATE，该变量默认为 true。

您还可以通过将 GIT_PS1_SHOWSTASHSTATE 设置为非空值来查看当前是否隐藏了某些内容。如果隐藏了某些内容，则分支名称旁边将显示一个“$”。

如果您想查看是否有未跟踪的文件，则可以将 GIT_PS1_SHOWUNTRACKEDFILES 设置为非空值。如果有未跟踪的文件，则分支名称旁边将显示一个“%”。

不确定启用此功能时速度会降低。如果你想做着色：

分阶段文件：

```
if git rev-parse --quiet --verify HEAD >/dev/null; then
 git diff-index --cached --quiet HEAD -- || color for staged changes
else
  color unstaged changes
fi 
```

隐藏的文件

```
git rev-parse --verify refs/stash >/dev/null 2>&1 && color for stashed files 
```

未跟踪的文件

```
if [ -n "$(git ls-files --others --exclude-standard)" ]; then
  Color untrack files
fi 
```

上面的代码片段来自 bash-completion 脚本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-16T21:08:30.137

注意：Git 2.6+（2015 年第三季度）应该会加速这种`__git_ps1`状态：

请参阅[SZEDER Gábor (](https://github.com/szeder) [)的](https://github.com/szeder)[commit dd160d7](https://github.com/git/git/commit/dd160d794f0bf02c30d2e5032e216b1e8ac14222)和[commit 6bfab99](https://github.com/git/git/commit/6bfab998b5046e8f4f7b0ae4833ba4babf92de83)（2015 年 7 月 19 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 461c119](https://github.com/git/git/commit/461c119739389430e9f978426f25a12690a1831c))^(中，2015 年 8 月 3 日）)[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

> # bash 提示：更快的未跟踪状态指示器与未跟踪的目录
> 
> 如果启用了未跟踪状态指示器，则`__git_ps1()`通过运行“ `git ls-files`”来查找未跟踪文件。
> 如果未跟踪目录包含大量文件，这可能会明显变慢，因为它列出了在未跟踪目录中找到的所有文件，只是立即重定向到`/dev/null`。
> 这是运行的实际命令`__git_ps1()`：

```
$ ls untracked-dir/ |wc -l
100000
$ time git ls-files --others --exclude-standard --error-unmatch \
  -- ':/*' >/dev/null 2>/dev/null

real    0m0.955s
user    0m0.936s
sys 0m0.016s 
```

> **通过另外将“ `--directory --no-empty-directory`”选项传递给“ `git ls-files`”以仅显示非空未跟踪目录的名称而不是其所有内容来**消除此延迟：

```
$ time git ls-files --others --exclude-standard --directory \
  --no-empty-directory --error-unmatch -- ':/*' >/dev/null 2>/dev/null

real    0m0.010s
user    0m0.008s
sys 0m0.000s 
```

> 这遵循[ea95c7b](https://github.com/git/git/commit/ea95c7b8f52471f7ce30379c2b2d7032f2b8c2c9)（完成：改进文件名完成的未跟踪目录过滤，2013-09-18，git 1.8.5）。

* * *

确保使用 Git 2.29（2020 年第四季度），因为在影响`git ls-files`.

请参阅[Elijah Newren ( ) 的](https://github.com/newren)[commit eceba53](https://github.com/git/git/commit/eceba5321410bbcc9e0b11e6aa479832f574eca8)和[commit dad4f23](https://github.com/git/git/commit/dad4f23ce59339bb32ad9e1cc1682c696f7a724f)（2020 年 8 月 18 日[）](https://github.com/newren)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 ad00f44](https://github.com/git/git/commit/ad00f44f5479441da59bd55261ae717fcb357938))^(中，2020 年 8 月 24 日）)[`newren`](https://github.com/newren)
^([`gitster`](https://github.com/gitster))

> ## [`dir`](https://github.com/git/git/commit/eceba5321410bbcc9e0b11e6aa479832f574eca8): 修复有问题的 API 以避免内存泄漏
> 
> ^(签字人：以利亚·纽伦)

> 该`dir`结构似乎有许多泄漏和问题。
> 
> 首先我注意到了这一点`parent_hashmap`并且`recursive_hashmap`被泄露了（尽管 Peff 在我之前注意到并提交了修复）。
> 
> 然后我注意到在之前的提交中`clear_directory()`只负责其中的一个字段子集，`dir_struct,`尽管我们在内部分配了 entry[] 和 ignored[] 到[`dir.c`](https://github.com/git/git/blob/eceba5321410bbcc9e0b11e6aa479832f574eca8/dir.c).
> 当然，这导致许多调用者泄漏或随意尝试释放这些数组及其内容。
> 
> 进一步挖掘，我发现尽管顶部附近有非常清晰的文档，当用户不再需要时[`dir.h`](https://github.com/git/git/blob/eceba5321410bbcc9e0b11e6aa479832f574eca8/dir.h)，人们应该调用，但有四个调用者根本不打扰这样做。 然而，他们中的两个人清楚地考虑了泄漏，因为他们有一个指令，这对我来说表明释放数据的方法太不清楚了。 我怀疑 API 的不明显性及其漏洞导致人们避免使用它，然后滚雪球般地引发更多问题，包括、和问题。`clear_directory()``dir_struct,`
> `UNLEAK(dir)`
> `entries[]``ignored[]``parent_hashmap,``recursive_hashmap`
> 
> 重命名`clear_directory()`为`dir_clear()`更符合 git 中的其他数据结构，并引入 a`dir_init()`来处理建议的 memsetting`dir_struct`到全零。
> 我希望像`"dir_clear()`" 这样的名称更清楚，并且 的存在`dir_init()`将为那些查看代码的人提供提示，他们需要查找 a`dir_clear()`或 a`dir_free()`并引导他们找到`dir_clear()`.

这会影响：

*   `git add`
*   `git check-ignore`
*   `git clean`
*   `git grep`
*   `git ls-files`
*   `git stash`
*   `git merge`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-20T18:36:22.147

`git diff --quiet`如果工作目录发生更改，则返回 1，并且`git diff --quiet --cached`对索引执行相同操作。

你可以用它来做：

```
git diff --quiet
    || echo "There be changes!" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-04T17:45:07.970

```
! git diff-index --cached --quiet HEAD      # fastest staged-changes test
! git diff-files --quiet                    # fastest unstaged-changes test
! git diff-index --quiet          HEAD      # fastest any-changes test
stdbuf -oL git ls-files -o | grep -qs .     # fastest untracked-files test
git rev-parse -q --verify refs/stash >&-    # fastest any-stash test 
```

如果忽略状态对未跟踪文件很重要，请使用`--exclude-standard -oi`未跟踪-忽略和`--exclude-standard -o`未跟踪和未忽略。

我知道获得 HEAD 绰号（分支名称或 sha）的最快方法是

```
{ git symbolic-ref -q --short HEAD || git rev-parse -q --short --verify HEAD; } 2>&- 
```

如果你不在回购中，它会留下一个返回码，所以你可以例如

```
if HEAD=`{ git symbolic-ref -q --short HEAD || git rev-parse -q --verify HEAD;  } 2>&-`
then
        : in a git repo, $HEAD is the branch name or sha
fi 
```

请注意，未跟踪文件测试取决于使用`shopt -s lastpipe`for运行`bash`。 `zsh`并`ksh`默认以这种方式操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-23T15:16:55.437

我正在使用 ksh 并且遇到了同样的问题。最重要的是，我的 Git 存储库位于 NFS 挂载上，这使得响应时间更慢。

要直接回答有关速度的问题，请尝试使用：

```
git ls-files -m 
```

在首次进入不同的存储库后，似乎比“git status -s”快得多。一旦进入存储库，操作系统和 NFS 缓存似乎会大大加快此命令的速度。当深入到 git 工作目录树的底部时，这个命令也显得非常快速。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-14T03:48:52.597

所有解决方案`git`最终都会限制`git`运行速度。您可以`git`通过将一些 fs-monitoring hooks 输入 git 来让自己运行得比这更快：

*   [https://github.com/jgavris/rs-git-fsmonitor](https://github.com/jgavris/rs-git-fsmonitor)使用 Facebook 的 Watchman 来查找文件更改。

或者你可以做更少的工作，比如`--directory --no-empty-directory`但更进一步：

*   [https://github.com/romkatv/gitstatus](https://github.com/romkatv/gitstatus)还使用较少的系统调用并提前终止扫描

# java - 无法在 Spring Roo 中进行逆向工程 (DBRE)

> ID：11122411
> 
> 赞同：2
> 
> 时间：2012-06-20T15:02:38.460
> 
> 标签：java, sql-server, jdbc, spring-roo

我正在尝试对 MSSQL 数据库进行反向工程，但我什至无法显示任何插件。当我尝试对数据库执行逆向工程或自省时，我收到以下错误。

**Spring Roo 自动附加发现服务当前不可用 JDBC 驱动程序不适用于“net.sourceforge.jtds.jdbc.Driver”**

当我尝试进行插件搜索时，我收到以下消息

**Spring Roo 自动插件发现服务目前不可用**

我在 STS roo shell 和命令提示符 roo shell 中都收到了这些消息。我有一段时间遇到麻烦并尝试使用代理但没有运气，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:02:14.383

这解决了 JDBC 驱动程序不适用于“net.sourceforge.jtds.jdbc.Driver”问题。正如这里提到的[http://forum.springsource.org/showthread.php?127946-Unable-to-find-the-JTDS-driver](http://forum.springsource.org/showthread.php?127946-Unable-to-find-the-JTDS-driver)

1.  检查 pom.xml 中 jtds 的版本。
2.  在存储库中找到 jar 或从[http://sourceforge.net/projects/jtds/files/jtds/](http://sourceforge.net/projects/jtds/files/jtds/)下载新 jar 。
3.  在 Roo 控制台中输入 osgi start --url file:///[path-to-jar-file]/jtds-1.2.4.jar

# javascript - Fancybox - 在一个画廊中组合图像和 iframe

> ID：11122414
> 
> 赞同：4
> 
> 时间：2012-06-20T15:02:48.167
> 
> 标签：javascript, jquery, fancybox

我正在处理的项目中有一个“附加文件”容器，该容器显示已附加到特定事件的文件的缩略图。当用户单击缩略图时，会打开一个花式框窗口，向他们显示附加图像或文本文件的更大预览。

现在，我的解决方案包括将 fancybox 类型设置为 iframe，如下所示：

```
$(".fancybox_group").fancybox({
    type : 'iframe'
}); 
```

这将很好地显示文本文件和图像，但图像周围有这个巨大的白色边框。我在谷歌上做了一些搜索，找到[了这个解决方案](http://groups.google.com/group/fancybox/browse_thread/thread/2ff36b598a095628)，但它对我不起作用。这只是创建了两个独立的 fancybox 实例；一个用于图像，一个用于 iframe。我希望能够滚动浏览一个画廊中的所有附件。这可能吗？

[这是 jsfiddle 上的一个示例，](http://jsfiddle.net/T4XLs/1/)显示了我想要实现的目标。我从一个 fancybox 示例中借用了代码/图像，并在文本文档中添加了另一个缩略图链接。这就是我在我的项目中设置它的方式。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T19:04:01.887

您使用的是 fancybox v2.0.6，因此其他解决方案可能已过时。

要实现您想要的很简单，只需执行以下操作：

1）。按此顺序加载所有 javascript 文件：

*   jQuery
*   花式盒子 js 文件
*   Fancybox 媒体 js 文件（您可以在 helpers 目录中找到它）

2）。加载fancybox css文件

3）。`html`为您要在 fancybox 中打开的每种类型的对象设置 ，例如：

图片 ：

```
<a class="fancybox" data-fancybox-group="gallery" href="image01.jpg"><img src="image01thumb.jpg" alt="" /></a>
<a class="fancybox" data-fancybox-group="gallery" href="image02.jpg"><img src="image02thumb.jpg" alt="" /></a> 
```

如果`href`您的图像类似于`href='/attachments/76'`fancybox，则不会知道这是`image`因为缺少扩展名（jpg，png，gif）。将类添加`fancybox.image`到您的 html 中，例如：

```
<a class="fancybox fancybox.image" data-fancybox-group="gallery" href="/attachments/76"><img src="thumb76.jpg" alt="" /></a> 
```

Ajax 内容（html 或 txt 文件）：

```
<a class="fancybox fancybox.ajax" data-fancybox-group="gallery" href="sample.html">open ajax 1</a>
<a class="fancybox fancybox.ajax" data-fancybox-group="gallery" href="sample.txt">open ajax 2</a> 
```

（注意第二类`fancybox.ajax`......另外，您可以在我的示例中使用缩略图而不是文本）

通过 iframe 的外部页面：

```
<a class="fancybox fancybox.iframe" data-fancybox-group="gallery" href="http://domain.com/page.html">open page in iframe mode</a>
<a class="fancybox fancybox.iframe" data-fancybox-group="gallery" href="http://other.com/page2.html">open other page in iframe mode</a> 
```

（注意第二课`fancybox.iframe`）

YouTube视频 ：

```
<a class="fancybox" data-fancybox-group="gallery" href="http://www.youtube.com/watch?v=2matH4B9bTo">open youtube video</a> 
```

（请注意，我们不需要添加任何额外的类，因为我们使用的是 fancybox 媒体助手）

**注意**：我们使用该属性来设置同一个画廊中的所有元素（尽管`data-fancybox-group="gallery"`您应该设置一个 HTML5 ）`DOCTYPE`

最后，只需使用此脚本：

```
$(".fancybox").fancybox(); 
```

您可能需要添加其他 API 选项，例如：

```
$(".fancybox").fancybox({
  // other API options
  padding: 0 // optional etc.
}); 
```

如果您还想使用`buttons`或`thumbnails`helpers，请不要忘记加载正确的 js 和 css 文件。还将选项添加`helpers`到您的脚本中，例如：

```
$(".fancybox").fancybox(
 helpers : {
  buttons : {},
  thumbs : {
   width : 50,
   height : 50
  }
 }
}); 
```

**最后说明**：这是fancybox v2.0.6+

# java - 使用java比较视频中图像的最快方法

> ID：11122417
> 
> 赞同：1
> 
> 时间：2012-06-20T15:03:08.237
> 
> 标签：java, search, optimization, quicktime

好的，所以在询问之前，我将提供一些背景知识：您可以使用 QuickTime java 从视频中抓取帧。我的目标是使用搜索方法抓取某些帧并比较这些帧以查看它们是否相似。我知道二分搜索非常有效，但是如果您有 1000 帧并且每次比较两帧时抓取一帧的时间成本非常高。

我的问题是：有没有比二进制搜索更快的方法来解决这个问题？有什么办法可以降低时间成本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:22:34.350

如果我理解正确，那么您基本上要做的是找到一个转换时间的向量（通过转换，我的意思是改变幻灯片）。

而且您似乎已经有了某种机制来确定两个框架是否包含同一张幻灯片。

我肯定会进行某种二进制搜索。您从第一帧和最后一帧开始，并始终将它们与它们之间的中间帧进行比较（关于时间）。如果两个帧相同，则不必在它们之间查看（假设演示文稿是线性的并且没有重复的幻灯片）。您还可以引入显示幻灯片的最短持续时间（假设幻灯片至少显示 3 秒），这将为递归提供更早的断点。

您还可以通过仅向他们提供框架的相关部分（检测投影仪区域）来协助比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:06:37.710

二进制搜索仅适用于排序集。因此，不要指望使用该方法在“常规”视频中找到丢失的帧。

# python - 目录名+文件名转文本文件

> ID：11122418
> 
> 赞同：3
> 
> 时间：2012-06-20T15:03:08.363
> 
> 标签：python, file, directory, text-files

我有许多目录，其中包含文件。我想创建一个以逗号分隔的 txt 文件，显示目录名称以及该特定目录中的文件，请参见下面的示例：

**我在找什么：**

```
DirName,Filename 
999,123.tif 
999,1234.tif 
999,abc.tif 
900,1236.tif 
900,xyz.tif 
...etc 
```

下面的 python 代码将这些文件路径的列表推送到文本文件中，但是我不确定如何如上所述格式化列表。

**我当前的代码如下所示：**

**更新**

我现在已经能够格式化文本文件，但是我注意到所有目录名/文件名都没有被写入文本文件。它只写入 ~8000 个目录/文件中的 ~4000 个。文本文件的行数、列表（mylist）大小或某些阻止它的错误文件目录/文件字符是否存在某种排序限制（请参阅下面的更新代码）？

```
from os import listdir
from os.path import isfile, join
root = r'C:\temp'
mylist = ['2']
for path, subdirs, files in os.walk(root):
     for name in files:
          mylist.append(os.path.join(path, name))

txt = open(r'C:\temp\output.txt', 'w')
txt.write('dir' + ',' + 'file' + '\n')
for item in mylist:
     list = mylist.pop(0)
     dir, filename = os.path.basename(os.path.dirname(list)), os.path.basename(list)
     txt.write(dir + ',' + filename + '\n')

with open(r'C:\temp\output.txt', 'r') as f:
     read_data = f.read() 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:07:45.333

也许这有帮助：

您可以获取绝对文件路径，然后执行以下操作

```
import os.path
p = "/tmp/999/123.tif"
dir, filename = os.path.basename(os.path.dirname(p)), os.path.basename(p) 
```

结果：

```
In [21]: dir
Out[21]: '999'

In [22]: filename
Out[22]: '123.tif' 
```

还可以考虑使用[csv](http://docs.python.org/library/csv.html)模块来编写这种文件。

```
import csv
import os.path

# You already have a list of absolute paths
files = ["/tmp/999/123.tif"]

# csv writer
with open('/tmp/out.csv', 'wb') as out_file:
    csv_writer = csv.writer(out_file, delimiter=',')
    csv_writer.writerow(('DirName','Filename'))
    for f in files:
        csv_writer.writerow((os.path.basename(os.path.dirname(f)), 
                             os.path.basename(f))) 
```

# php - MySQL中的查询优化

> ID：11122423
> 
> 赞同：0
> 
> 时间：2012-06-20T15:03:22.607
> 
> 标签：php, mysql, sql, phpmyadmin, mysql-management

首先，我不得不说这个话题是非常普遍的话题。我研究了所有相关主题，但找不到答案。我有三张桌子。Messages 表有 300.000 行，tags 表有 100 万行，message_tag 表有大约 1000 万行。message_tag.message_id 和 message_tag.tag_id 列有索引。我的目的是选择链接指定标签的消息。但是查询时间太长了。没有任何查询时间短于 20 秒。另一方面，由于查询时间长，有时查询甚至没有给出结果。表结构和我的查询如下。我该如何处理这个问题？我开放所有建议。即使我可以使用新架构重新创建表。数据库是 MySql，存储电机是 MyIsam。.

```
table name: messages
columns :
id (int)
message (vharchar)
message_poster (vharchar)

table name: tags
id (int)
tag (vharchar)

table name : message_tag
columns :
message_id (int)
tag_id (int) 
```

我的查询：

```
SELECT                    messages.message_poster,
                          messages.message
                     FROM tags, messages, message_tag 
                     WHERE message_tag.tag_id=191
                     AND messages.id= message_tag.message_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:09:06.597

这是我为什么不喜欢使用`,`符号的一个例子。

你不`message_tag`涉及`tags`。相反，您将*每个*消息标签连接到每隔一行。

这就是你所拥有的...

```
SELECT
  messages.message_poster,
  messages.message
FROM
  messages
INNER JOIN
  message_tag
    ON messages.id= message_tag.message_id
CROSS JOIN
  tags
WHERE
  message_tag.tag_id=191 
```

这是你***应该***拥有的...

```
SELECT
  messages.message_poster,
  messages.message
FROM
  messages
INNER JOIN
  message_tag
    ON messages.id = message_tag.message_id
INNER JOIN
  tags
    ON tags.id     = message_tag.tag_id
WHERE
  message_tag.tag_id = 191 
```

*（或者，根本不加入，`tags`在这种情况下你没有使用它。虽然我很欣赏这可能是实际查询的简化版本。）*

`ANSI-92`用符号来混淆它要困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:08:20.907

我认为您缺少 2 个表之间的连接条件，也许`tags`和`message_tag`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:06:20.933

在 message_tag 上创建一个二维索引（在两个字段上），并将 WHERE 重写为

```
WHERE 
    message_tag.tag_id=191 AND 
    message_tag.message_id = messages.id 
```

# c++ - 为 VS2010 ( C/C++ ) 永久关闭大纲

> ID：11122424
> 
> 赞同：7
> 
> 时间：2012-06-20T15:03:22.870
> 
> 标签：c++, c, visual-studio-2010

由于某种原因，我无法永久关闭它。当我手动停止它时它可以，`Edit->Outlining->Stop Outlining`但是一旦我关闭文件并再次打开它，它就会再次打开。禁用它，`option->text editor->c/c++->formatting`什么都没有。尝试编辑`.vssettings`文件（或者我正在编辑错误的文件？`C:\Users\%current user%\Documents\Visual Studio 2010\Settings`）但有东西再次修改它。我没有想法:(。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-13T14:43:46.847

在 VS2013 中，它不在 Formatting 下。它在这里：

去：

`Tools/Options/Text Editor/C#/Advanced`

然后只是`uncheck "Enter outlining mode when files open" checkbox`。

就是这样。;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T16:01:45.103

选择`Tools`菜单 >`Options`菜单项。

`Text Editor`然后展开`C/C++`并单击`Formatting`，设置`Enable Outlining`为`false`

注意：您可能需要重新打开文件。该选项在技术上用于启用文件打开时的大纲。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-26T13:33:09.797

在 C/C++ 文件的 VS2015 中，它在这里：
`Options->Text Editor->C/C++->View->Enable Outlining`

# asp.net - 为应用程序池“X”提供服务的进程与 Windows 进程激活服务发生了致命的通信错误

> ID：11122426
> 
> 赞同：19
> 
> 时间：2012-06-20T15:03:33.313
> 
> 标签：asp.net, debugging, http, iis-7, windbg

我在 IIS 7.5 下运行 ASP.NET 4.0 应用程序。一天几次，我们的应用程序池意外回收。发生这种情况时，我们的系统日志会显示以下事件：

**为应用程序池“X”提供服务的进程与 Windows 进程激活服务发生了致命的通信错误。进程 ID 为“5768”。数据字段包含错误号。**

或者

**为应用程序池“X”提供服务的进程未能响应 ping。进程 ID 为“1032”。**

几乎总是，应用程序日志中同时存在相应的事件，如下所示：

```
Faulting application name: w3wp.exe, version: 7.5.7600.16385, time stamp: 0x4a5bcd2b
Faulting module name: clr.dll, version: 4.0.30319.269, time stamp: 0x4ee9ae83
Exception code: 0xc00000fd
Fault offset: 0x00001916
Faulting process id: 0x508
Faulting application start time: 0x01cd4d8958ecf9ad
Faulting application path: C:\Windows\SysWOW64\inetsrv\w3wp.exe
Faulting module path: C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Report Id: 8dcc413b-b98a-11e1-8075-001c23d6d910 
```

因此，我安装了[IIS 调试工具](http://www.microsoft.com/en-us/download/details.aspx?id=26798)并设置了崩溃规则，指定了“特定的 IIS Web 应用程序池”，不记录首次机会异常，并且在“高级设置”（异常、断点、事件）下没有任何内容。

我还（同时）使用以下命令行从 Windows 调试工具运行 ADPlus：

```
adplus -crash -pn w3wp.exe -NoDumpOnFirst -o c:\logs 
```

但是，由于我附加了调试器，我在系统日志中收到了几条“警告”级别的消息（关于“进程服务应用程序池'X'遇到致命的通信错误......”的消息），但我我不再在应用程序日志中获得相应的错误级别事件。

我唯一能得到的是以下内容（其中大约有 50 个）：

```
[6/18/2012 7:50:25 PM] Thread exited. Exiting thread system id - System ID: 3300\. Exit code - 0x800703e9
[6/18/2012 7:50:25 PM] Thread exited. Exiting thread system id - System ID: 4992\. Exit code - 0x800703e9
[6/18/2012 7:50:25 PM] Thread exited. Exiting thread system id - System ID: 5456\. Exit code - 0x800703e9
[6/18/2012 7:50:25 PM] Thread exited. Exiting thread system id - System ID: 4924\. Exit code - 0x800703e9 
```

退出代码**0x800703e9**表示某个地方的堆栈溢出，这是幸运的，因为一旦我找到它应该很容易修复。

但是，为了做到这一点，我需要从我的故障转储中获取更多信息，以便我可以使用 WinDbg 打开它们并使用“！clrstack”命令来查明我的问题。

**我的问题是：**我的调试工具配置不正确还是我误解了事件日志？每当我在系统日志中看到有关“Windows 进程激活服务的致命通信错误”的事件时，我们的应用程序池似乎正在回收，但是当这些事件发生时，我没有从 IIS 调试工具或 ADPlus 获得任何故障转储信息。由于某种原因，由于我已附加调试器，因此在应用程序日志中不再收到与我的系统日志警告事件相对应的任何“错误”事件。不知道为什么。我需要以某种方式获取包含 CLR 信息的完整故障转储，以便找出问题所在。

我能想到的唯一另一件事是 Windows 错误报告服务没有运行。不确定是否需要。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:29:10.167

您在应用程序日志中获得的异常代码和线程退出代码都表明您有堆栈溢出。令人费解的是，为什么当线程退出并出现堆栈溢出错误时进程没有崩溃。无论如何，要启用堆栈溢出异常中断，命令是：

```
sxe sov 
```

请注意，您需要使用 x86 版本的调试器，因为您的应用程序池配置为 32 位进程。

# javascript - 在处理请求工作时显示“处理”

> ID：11122428
> 
> 赞同：0
> 
> 时间：2012-06-20T15:03:48.627
> 
> 标签：javascript, ihttphandler

我刚刚在 ashx 页面中写了一个 IhttpHandler 并且我正在从这样的 javascript 函数中进行调用：

```
function obtenerFichero(id) {
    document.getElementById('<%= proces.ClientID %>').style.visibility = "visible";
    window.location.href = '../HELPDESK/DescargaFichero.ashx?ID=' + id;
} 
```

一切都很好，但请求需要很长时间才能完成，我想显示一个带有“处理中”消息的 div，并在请求完成后隐藏它

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:13:50.247

你想要的是不可能的。可以做的是将页面加载到不可见的 iframe 中。加载完成后，我们可以将“主”页面的 html 设置为 iframe 的 html。到那时，我们可以显示一个“加载”动画。

# javascript - 使用 Chrome 打开 Internet Explorer/Firefox 等窗口

> ID：11122429
> 
> 赞同：0
> 
> 时间：2012-06-20T15:03:49.507
> 
> 标签：javascript, google-chrome

我正在使用 Javascript 构建一个较小的 Web Builder，我希望用户可以在所有主要浏览器中预览他们的页面。因为该工具仅适用于 Chrome 我需要他们有机会打开具有相同信息的 Internet Explorer 窗口，对于 Firefox、Opera 和 Safari 也是如此......有没有办法在 Javascript 中这样做？

PS 应该出现在窗口中的信息存储在一个变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:07:44.037

如果 JS 可以调用`firefox.exe`，它也可以调用`nasty_trojan.exe`. 您可以做的最好的事情是在服务器端生成一个自定义链接，然后说“将此链接粘贴到您的其他浏览器中。

除非你真的很喜欢，在这种情况下你需要在服务器端渲染页面，比如[http://browsershots.org/](http://browsershots.org/)。

如果您将其编写为 chrome 扩展，则有可能做到这一点，因为它们具有一定的信任度，但页面上的 JS 非常位于其沙箱内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:22:09.930

这不属于答案，但我没有看到如何评论（我是新人，对不起！）。[这可能会有所帮助。](https://stackoverflow.com/questions/2393427/how-open-a-local-file-with-the-associated-program-from-a-web-page)看来您可能需要使用 java 小程序，至少，我在一些地方看到了这一点。希望我有帮助！

# silverlight - 我可以清除可用的手势吗？

> ID：11122430
> 
> 赞同：0
> 
> 时间：2012-06-20T15:03:55.793
> 
> 标签：silverlight, windows-phone-7, xna

我制作了一个使用关卡的小游戏，而关卡只是一个递增的整数，所以我使用同一个类。

现在我只是在做一些调试。将我的游戏设置为接受点击并按住并在更新中检查`TouchPanel.IsGestureAvailable`但无论输赢，下次我进入游戏时`TouchPanel.IsGestureAvailable`都是真的:(

这是一款 silverlight/xna 游戏，所以我将两者混合使用，我唯一一次使用 xna 是在游戏中。其余的菜单和东西是 xaml。

有什么方法可以将其设置为假，每次进入此类时清除列表或其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:01:29.837

清除 TouchPanel 上的手势缓冲区的唯一方法是调用[ReadGesture](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.input.touch.touchpanel.readgesture)直到[IsGestureAvailable](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.input.touch.touchpanel.isgestureavailable)返回 false。您可以在页面上的 OnNavigatedTo 方法中执行此操作。

# c# - 从 Visual c# 连接到 MYSQL

> ID：11122431
> 
> 赞同：3
> 
> 时间：2012-06-20T15:04:00.780
> 
> 标签：c#, mysql

我不确定这是否是这个问题的正确位置，但这里是......我有一个使用 MYSQL 用 PHP 开发的网站。现在，我想用 Visual C# 编写一个访问 MYSQL 数据库的应用程序，并将该数据库中的数据返回给应用程序。我尝试了这个，并收到错误“（xx.xxx.xxx.xx）不允许连接到这个MYSQL服务器”。经过一番研究，我发现有一种方法可以通过 IP 地址在服务器上关闭它。但是，这个应用程序最终会分发给其他人和 PC，所以我认为这不是一个永久的解决方案。我想我可以向全世界开放 MYSQL 数据库，但我希望有某种方式可以连接到 MYSQL 并告诉服务器我仅来自 hello world 应用程序。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:35:35.367

Ramhound 是正确的，如果你想做这样的事情，你需要重新配置你的服务器，但是如果你想直接从客户端应用程序连接到服务器，你的客户端需要有你的 Mysql 的密码，这并不理想..

相反，您应该在数据库服务器上设置一个 Web 服务，并使用它来向客户端发送/接收数据。

# r - data.table := 添加新列时不支持逻辑数据类型？

> ID：11122436
> 
> 赞同：3
> 
> 时间：2012-06-20T15:04:27.633
> 
> 标签：r, data.table

升级到 data.table 的最新版本 1.8.1（在 R-forge 上可用）后，我遇到了以下问题。直到那个版本，我可以这样做：

```
DT = data.table(a=LETTERS[c(1,1:3)],b=4:7,key="a")
DT
   a b
1: A 4 
2: A 5
3: B 6
4: C 7

DT[ ,newcol := NA] 
```

即，我能够添加一个充满 NA 的新列。现在我收到一个错误，说不支持 NA 的逻辑类型（实际上`DT[ ,newcol := TRUE]`也不起作用）。

所以现在我通过首先添加一个双列，然后将其设置为 NA 或任何我需要的逻辑来解决这个问题：

```
DT[ ,newcol:=1]
a b newcol
1: A 4      1
2: A 5      1
3: B 6      1
4: C 7      1 
```

和

```
DT[ ,newcol:=NA]
a b newcol
1: A 4      NA
2: A 5      NA
3: B 6      NA
4: C 7      NA 
```

我想问这是否是正确的方法。我想这没什么大不了的。它工作得很好，只是想避免不必要的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:36:51.257

在修复此错误之前（请参阅上面 Matthew Dowle 的评论），您可以通过直接在新列中指定所需的 NA 类型来解决它（当然“逻辑”除外，这是不起作用的类型眼下）：

```
DT <- data.table(a=LETTERS[c(1,1:3)],b=4:7,key="a")
DT[ ,newcol := NA_real_]  ## Other options are NA_integer_ and NA_character_ 
#    a b newcol
# 1: A 4     NA
# 2: A 5     NA
# 3: B 6     NA
# 4: C 7     NA

## Plain old NA has type and class "logical", partly explaining the 
## error message returned by DT[,newcol:=NA]
c(typeof(NA), class(NA))
# [1] "logical" "logical" 
```

# c++ - 字符串中字符之间的空格

> ID：11122437
> 
> 赞同：0
> 
> 时间：2012-06-20T15:04:28.050
> 
> 标签：c++, unicode-string, c++builder-xe

我正在使用 Embarcadero C++Builder XE，我正在尝试将 123456 写入这样的文本文件：

```
String teststring = "123456";
int iFileHandle = FileCreate("example.txt");
int iLength = teststring.Length()*sizeof(wchar_t);
int output = FileWrite(iFileHandle, teststring.w_str(), iLength); 
```

但输出是这样的：

```
1 2 3 4 5 6 
```

每个字符后都添加了空格。我可以看到 iLength 是 12，所以在创建字符串时添加了空格，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:31:54.903

`System::String`在 XE 中编码为 UTF-16，它使用 16 位值。您看到的那些“空格”是这些字符值的高位字节，它们是 ASCII 字符值的空值。如果您不希望文件中包含这些字节，则必须将其转换为`String`不使用它们的不同编码，例如：

```
String teststring = "123456"; 
AnsiString s = teststring; // or UTF8String, or any other MBCS encoding you want
int iFileHandle = FileCreate("example.txt"); 
int iLength = s.Length() * sizeof(AnsiChar); 
int output = FileWrite(iFileHandle, s.c_str(), iLength); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:20:10.930

iLength 应该是 12，因为在这种情况下，字符串长度是 6，而 wchar_t 的大小是 2。因此，确实，在创建字符串时不会添加空格。这些是 2.、4.、6.、8\. 和 10\. 字节，当您从此处的字符串创建宽字符串时分配并初始化为空格字符：

```
teststring.w_str() 
```

尝试使用 c_str() 代替：

```
String teststring = "123456";
int iFileHandle = FileCreate("example.txt");
int iLength = teststring.Length();
int output = FileWrite(iFileHandle, teststring.c_str(), iLength); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:38:27.227

您可以只使用字符串列表并添加您想要的字符串，然后将字符串列表保存到文件中。

```
TStringList *Temp = new TStringList( );
Temp->Add("123456");
Temp->SaveToFile(("example.txt");

delete Temp; 
```

# javascript - 使用javascript setInterval函数实现动画效果：比我预期的要慢

> ID：11122438
> 
> 赞同：0
> 
> 时间：2012-06-20T15:04:28.607
> 
> 标签：javascript, animation, setinterval

我想使用javascript`setInterval`函数来实现一个盒子旋转动画效果，我希望动画保持1.5秒，在1.5秒内盒子会旋转360度，所以我以一毫秒计算增量，并每毫秒使用setInterval函数。这是我的代码：

```
var duration= 1500;//The animation duration time
var rotate = 360;//The rotate need to be rotate
var degPerSec = rotate / parseFloat(duration); //the increment per millisecond
var degree = 0;//the begin degree
console.time('rotate');
var timer = setInterval(function () {
    degree = degree + degPerSec;
    $('#test')[0].style.MozTransform = 'rotate(' + degree + 'deg)';
     $('#test')[0].style.WebkitTransform = 'rotate(' + degree + 'deg)';

    if (degree >= rotate) { //if reach 360 degree , clear the interval
        clearInterval(timer);
        console.timeEnd('rotate');// caculate the duration 
    }
    }, 1)
}) 
```

动画可以成功执行，但似乎它不仅持续了1.5s，当我`console.time`用来计算整个持续时间时，它持续了大约6s！不是1.5s。为什么会发生这种情况？我该如何解决这个问题？

这是[演示](http://jsfiddle.net/hh54188/XDUrQ/)

**更新：：**为什么我不使用css3：因为旋转度是作为参数，需要在外面传递表格，尚未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:09:15.040

这是因为您更改了 dom，然后会发生重新流动，并且重新流动会更新整个视图（需要一段时间）。要解决这个问题，要么减少更新频率，要么使用 css3 动画/过渡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:09:23.200

在某些操作系统（例如 Windows）上，1 毫秒的间隔没有意义，因为那里的调度程序时间片约为 10 毫秒。此外，您的函数总共可能需要超过 1 毫秒。这两个同意你的放缓。

为了安全起见，您可以测量函数调用之间的实际延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:11:02.043

你这样做有理由吗？为什么不直接使用`transition`来定义转换的持续时间？

```
...
-webkit-transform: rotate(360deg);  
-webkit-transition:-webkit-transform 1s ease-in-out;  
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T15:15:51.650

当您可以使用简单的样式表时，您到底为什么要使用 Jquery 呢？您已经在使用 Mozilla 和 Webkit 特定的分支代码。还不如只用 CSS3 来完成它。更快（使用本机 C 代码而不是 JS）并且更简单。

```
#test{
    width:30px;
    height:30px;
    background:red;
    position:absolute;
    left:20px;
    top:20px;
    -webkit-transition: all 1.5s ease;
    -moz-transition: all 1.5s ease;
    -o-transition: all 1.5s ease;
    transition: all 1.5s ease;
} 
```

编辑：如果您需要对旋转度数使用可变参数，使用 JS 仍然非常可行：

```
var degrees = 360;
var incrementer = 1;
setInterval(function() {
  var deg = "rotate(" + (degrees * incrementer) + "deg)";
  var obj = document.getElementById("test");
  if (typeof(obj.style.transform) !== "undefined") {
    obj.style.transform = deg;
  } else if (typeof(obj.style.MozTransform) !== "undefined") {
    obj.style.MozTransform= deg;
  } else if (typeof(obj.style.WebkitTransform) !== "undefined") {
   obj.style.WebkitTransform = deg;
  }
  incrementer = incrementer + 1;
}, 1500); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T15:23:00.260

以上所有关于 CSS 使用的评论当然都是正确的。还值得注意的是，每毫秒运行这么多代码是太过分了——你只需要大约 30 帧/秒就可以让动画在人眼中流畅地显示，而这里你运行的是 1000 帧/秒。如果将帧间隔更多一点并每隔约 33 毫秒运行一次动画，则动画会更快并且看起来更流畅。

最后，有一个用于确定最佳帧速率并为我们执行内置于浏览器的运行循环的工具，称为[requestAnimationFrame](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)。您可以将此回调传递给它，它将确定最有效的帧速率（如果可能，通常为 60）并以最有效的方式运行动画，最大限度地减少与重绘相关的开销。

对于这个例子，它就像替换并稍微调整你的旋转值一样`setInterval`简单`requestAnimationFrame`。

# .net - 拔网线时SQL连接没有快速超时

> ID：11122440
> 
> 赞同：2
> 
> 时间：2012-06-20T15:04:32.657
> 
> 标签：.net, sql-server, sqlclient, connection-timeout

首先我拔掉我的网线。

然后我尝试使用 SqlClient.SqlConnection 对象和未指定连接超时（因此默认为 15 秒）的连接字符串从 C# 中连接到 SQL Server：`Integrated Security=SSPI;Persist Security Info=False;Data Source=MYSERVER;Database=MYDB"`

或指定超时的连接字符串，甚至更短为 5 秒：`"Integrated Security=SSPI;Persist Security Info=False;Data Source=MYSERVER;Database=MYDB;Connect Timeout=5"`

无论哪种方式，调用`connection.Open`都会在 42 秒后返回，并出现我的超时错误。如果我早点插回我的网络电缆，我可以更快地引发错误。为什么连接超时没有效果？这是在某处记录的吗？有办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:22:52.090

`Connect Timeout`仅当它能够解析服务器并等待连接时才适用。

同样根据 MSDN，`Connect Timeout`是在终止尝试并生成错误之前等待与服务器的连接的时间长度（以秒为单位 - 默认为 15）。

注意：
网络硬件检测网络可用与否的时间太短了 5 秒。它不应少于 10 秒。

# mfc - 如何为 CTreeCtrl 节点加载默认图标

> ID：11122441
> 
> 赞同：0
> 
> 时间：2012-06-20T15:04:34.057
> 
> 标签：mfc, load, icons, paint, treecontrol

由于布局定制的需要，我扩展了 CTreeCtrl 类。

我*绝对*需要使用**CDC::DrawText()**函数来动态地（重新）编写单个节点的文本，***而不***需要多次调用 SetItemText() 函数（强制性要求）。

然后，我编写了自己的**OnPaint()**方法实现。我还实现了在 CTreeCtrl 中绘制节点的**DrawItems()**方法。

由于除了单个节点旁边的单个标签之外我不想修改*任何其他内容*，因此我需要重新实现大部分原始**CTreeCtrl::OnPaint()**代码。

我只有两个疑惑：

1.  如何显示 DEFAULT CTreeCtrl 图标？我不需要/不想要自定义图标。
2.  如何恢复单个节点选择模式的默认布局？

简单地说，当前选定的节点应该会*突出显示*。

下面是一些简化的、自动解释的代码：

```
void MyDlg::OnPaint()
{
    CPaintDC dc(this);
    CDC dc_ff;  
    CBitmap bm_ff;
    CBitmap *bm_old;
    CFont *font;
    CFont *old_font;
    CFont fontDC;
    int old_mode;
    GetClientRect(&m_Rect);

    dc_ff.CreateCompatibleDC( &dc );
    bm_ff.CreateCompatibleBitmap( &dc, m_Rect.Width(), m_Rect.Height() ); 
    dc_ff.SelectObject( &bm_ff ); 
    font = GetFont();
    old_font = dc_ff.SelectObject( font );

    // Could / Should be called here?
    CWnd::DefWindowProc(WM_PAINT, (WPARAM)dc.m_hDC, 0);

    old_mode = dc_ff.SetBkMode(TRANSPARENT);

    dc_ff.FillSolidRect(m_Rect, dc_ff.GetBkColor());

    DrawItems( &dc_ff ); // DrawItems() member function draws single nodes of CTreeCtrl

    dc.BitBlt( m_Rect.left, m_Rect.top, m_Rect.Width(), m_Rect.Height(), &dc_ff, 0, 0, SRCCOPY);

    dc_ff.SelectObject( old_font );
    dc_ff.SetBkMode( old_mode );
    dc_ff.SelectObject( bm_old ); 
}

void MyDlg::DrawItems( CDC *pDC )
{
    // draw items
    HTREEITEM show_item, parent;
    CRect rc_item;
    CString name;
    DWORD tree_style;
    int count = 0;
    int state;
    bool selected;
    bool has_children;

    show_item = GetFirstVisibleItem();
    if ( show_item == NULL )
        return;
    color = pDC->GetTextColor();
    tree_style = ::GetWindowLong( m_hWnd, GWL_STYLE ); 

    do
    {
        state = GetItemState( show_item, TVIF_STATE );
        parent = GetParentItem( show_item );
        has_children = ItemHasChildren( show_item ) || parent == NULL;
        selected = (state & TVIS_SELECTED) && ((this == GetFocus()) || 
                (tree_style & TVS_SHOWSELALWAYS));

        if ( GetItemRect( show_item, rc_item, TRUE ) )
        {
            if ( has_children  || selected )
            {
                if ( selected )
                {
                    // HERE i need to 
                }
                else

                // do some stuff...

                if ( has_children )
                {
                    HICON icon;
                    // HERE I need to load CTreeCtrl nodes _DEFAULT_icon
                    icon = LoadIcon(NULL, IDI_ASTERISK);
                    if ( icon != NULL )
                        DrawIconEx( pDC->m_hDC, rc_item.left - 18, rc_item.top, icon, 16, 16,0,0, DI_NORMAL ); 
                }
            }
            if ( !has_children )
            {
                HICON icon;
                *// HERE I need to load CTreeCtrl nodes _DEFAULT_icon*
                icon = LoadIcon(NULL, IDI_ASTERISK);
                if ( icon != NULL )
                    DrawIconEx( pDC->m_hDC, rc_item.left - 18, rc_item.top, icon, 16, 16,0,0, DI_NORMAL ); 
            }
            name = GetItemText( show_item );
            // ...
            if ( selected )
            {
                pDC->DrawText( "Temp", rc_item, DT_LEFT );
            }
            else
            {
                pDC->DrawText( "Temp", rc_item, DT_LEFT );
            }
            //if ( state & TVIS_BOLD )
            //  pDC->SelectObject( font );
        }
    } while ( (show_item = GetNextVisibleItem( show_item )) != NULL );
} 
```

我只需要一个*几乎标准的*CTreeCtrl::OnPaint() 实现的源代码。任何建议/帮助表示赞赏。:-)

谢谢

它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:37:32.513

您不需要重载 onPaint。如果将树项目文本设置为 LPSTR_TEXTCALLBACK，则 CtreeCtrl 将触发消息 TVN_GETDISPINFO 以在每次显示该项目时检索新文本。如果消息处理程序位于父窗口中，则使用 ON_NOTIFY 注册消息处理程序；如果您是 CTreeCtrl 的子类，则使用 ON_NOTIFY_REFLECT 注册消息处理程序。此消息处理程序可以分配您想要的文本，但允许 treeCtrl 继续正常绘制。

[TVN_GETDISPINFO 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773518%28v=vs.85%29.aspx)

如果你去了父 Cwnd 路线，你需要

1.  因此，您需要在 cpp 文件中分配消息处理程序：

    BEGIN_MESSAGE_MAP(MyCWnd, CWnd)

    ON_NOTIFY(TVN_GETDISPINFO, tree_ctl_id, CustomTreeControl::OnGetdispinfo) END_MESSAGE_MAP()

2.  头文件中的函数原型

    afx_msg void OnGetdispinfo(NMHDR* pNMHDR, LRESULT* pResult);

3.  这在你的类定义的末尾

    DECLARE_MESSAGE_MAP()

4.  以及处理请求的实际功能

    无效 ColumnTreeControl::OnGetdispinfo(NMHDR* pNMHDR, LRESULT* pResult) { NMTVDISPINFO * pDispInfo = (NMTVDISPINFO *)pNMHDR; TVITEM* item = &pDispInfo->item;

    ```
    if(item->mask & TVIF_TEXT )
    {
             item->pszText " YOUR CODE HERE";
    }
    *pResult = 0; 
    ```

    }

# sql - 拆分 SQL 结果

> ID：11122445
> 
> 赞同：2
> 
> 时间：2012-06-20T15:04:42.403
> 
> 标签：sql, sql-server, sql-server-2008

我有一个 SQL 语句，它返回许多行，这些行被插入到 VBA 中的一个数组中。然后我遍历数组并粘贴到电子表格行中。

我的内存不足，因此我想分批粘贴。

我不介意每次都运行相同的 SQL 查询来收集数据，只要我能避免内存问题。我怎样才能做到这一点？在My SQL中我曾经使用LIMIT，但是这里我想说选择第一个... 1000？然后是下一个 1000 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:09:42.310

要“选择第一个... 1000？然后选择下一个 1000”，请执行以下操作：

```
SELECT * FROM table
LIMIT <limit>
OFFSET <batch * limit> 
```

其中 limit 等于 1000 并且您的批次将从 0 开始，每次调用递增 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:24:46.773

我发现通过传入 2 个参数来创建一个使用基本分页函数调用的存储过程是最简单的方法：每页的行数和请求的页面。

看看这个问题：[如何在 SQL Server 2008 中进行分页](https://stackoverflow.com/questions/2244322/how-to-do-pagination-in-sql-server-2008)

如果您以编程方式调用存储过程，则可以使用 while 循环，直到没有返回任何结果。

# tfs - 有没有地方可以找到 TFS 2012 RC Build Controllers/Agents Status Errors

> ID：11122446
> 
> 赞同：4
> 
> 时间：2012-06-20T15:04:42.767
> 
> 标签：tfs, build

我们最近将 TFS 2010 升级到了 TFS 2012 RC 版本。除了我们的 Builds 之外，一切都可以轻松升级。有谁知道在哪里可以找到显示构建控制器/代理运行原因的任何日志？

我们有一个单服务器配置，其中 TFS、SharePoint、SQL2008 R2、构建控制器和构建代理都在同一个盒子上。

除了构建之外，所有新功能似乎都可以正常工作。启动构建组件时，它最初将 Controller 和 Agent 显示为“绿色箭头”状态，但 30 秒后进入“红框”状态。

![构建配置状态](../Images/f3f1a7dcdb2730d8f3c7c2b9f48ec7ac.png)

然后，如果您单击“详细信息”链接查看错误是什么，我会收到一个 500 错误的弹出窗口： ![构建配置详细信息错误](../Images/f22356e79ca243910677e82d214f711f.png)

任何有关如何诊断或查找错误日志等的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:45:17.363

刚刚解决了问题。

我们为网站添加了一个额外的端口绑定，以使我们的 Bug Tracker 通过另一个端口可用。这创建了一个场景，其中同一协议的多个绑定会阻止服务正常工作。

我们将以下内容添加到 TFS 站点的 web.config 文件中，一切都重新开始工作。

```
 <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:38:11.237

尝试使用典型的 TFSService 帐户更改运行控制器/代理的帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T22:08:21.267

如果有人遇到同样的问题，这是 web.config 文件的路径：

Microsoft Team Foundation Server 11.0\版本控制代理\Web 服务

# mysql - 是否可以优化我的查询？

> ID：11122450
> 
> 赞同：1
> 
> 时间：2012-06-20T15:04:47.870
> 
> 标签：mysql, sql, query-optimization

[（您可以在这里](https://stackoverflow.com/questions/11107982/getting-many-rows-with-many-ids/11108280)阅读更好地理解）

我想知道是否可以优化此查询：

```
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p1 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p2 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p3 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p4 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p5 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p6 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p7 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p8 AND id_action_set = 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T15:06:23.650

尝试：

```
SELECT id_type, value 
FROM Action, Action_set 
WHERE id_action IN (id_action_p1,id_action_p2,id_action_p3,id_action_p4,id_action_p5,id_action_p6,id_action_p7,id_action_p8) 
AND id_action_set = 1 
```

如果有不止一行，请尝试：

```
SELECT id_type, value 
FROM Action, Action_set 
WHERE (id_action = id_action_p1
     OR id_action = id_action_p2
     OR id_action = id_action_p3
     OR id_action = id_action_p4
     OR id_action = id_action_p5
     OR id_action = id_action_p6
     OR id_action = id_action_p7
     OR id_action = id_action_p8) 
AND id_action_set = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:49:54.270

好的; 首先，您的查询不符合预期。假设您的一个动作有 3 个动作集；`id_action_p1`, `id_action_p2`, 和`id_action_p3`. 这意味着它将显示在`Union All`查询中的 3 个不同项目中，但具有相同的值 - 因为 id_type 和 value 都不依赖于 id_action。

如果这是有意的，你不能只使用 or - 它只会匹配一次 - 但是你不止一次返回项目而无法区分它们，这看起来很奇怪。如果这是有意的，我们可以通过在表本身中包含项目列表并将其连接起来来使其更简单。

首先，我们设置表：

```
Select into Table_name id_action_p1 as action
Insert into Table_name (Select id_action_p2)
Insert into Table_name (Select id_action_p3)
Insert into Table_name (Select id_action_p4)
Insert into Table_name (Select id_action_p5)
... 
```

接下来，我们编写新的查询：

```
SELECT id_type, value 
FROM Action, Action_set, Table_name 
WHERE id_action=Table_name.action
AND id_action_set = 1 
```

这应该与您之前的查询完全一样。

# database - 为数据库生成创建自定义 Windows 工作流程？

> ID：11122458
> 
> 赞同：1
> 
> 时间：2012-06-20T15:04:59.200
> 
> 标签：database, visual-studio-2010, oracle, entity-framework

我应该从哪里开始创建用于从模型生成实体框架数据库的 Windows 工作流？我在哪里可以找到它的模板？当我尝试添加新项目时，Windows 工作流不显示。MSDN 没有任何关于工作流如何生成到 Oracle 数据库的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:22:22.563

通过 T4 生成 Oracle (TPT) 工作流仅执行一组引用的 T4 转换。只需检查存储此工作流的文件夹，就会有一些 Oracle 特定的转换，例如 CSDLtoMSL.tt 和 CSDLtoSSDL.tt - 您需要更改这两个以使用新的数据库命名约定。

# android - Android 4 条大小（Galaxy Nexus）

> ID：11122464
> 
> 赞同：1
> 
> 时间：2012-06-20T15:05:07.363
> 
> 标签：android, size, screen, android-4.0-ice-cream-sandwich, galaxy-nexus

Galaxy Nexus 中状态栏、导航栏和标题栏的大小（以像素为单位）是多少？

我认为正是因为它们，我的背景图像（720x1280 像素）的高度被拉伸了。

我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/splash" > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:01:44.437

这是你想要的？[http://developer.android.com/design/style/metrics-grids.html](http://developer.android.com/design/style/metrics-grids.html)

导航栏和操作栏的高度（或宽度）为 48dp。

如果要删除所有内容（按钮除外），可以将其添加到清单中的活动声明中

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:10:50.547

如果您指的是运行 Android 4.1 的 Nexus 7 平板电脑，底部的导航栏在视觉上看起来比上面消息中链接的开发指南中描述的 48 像素要深得多。分析屏幕截图表明，新的导航栏纵向为 75 像素。我仍在寻找最终的测量结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:27:49.310

48 dp 与 48 px 不同。像 Nexus 这样的 xhdpi / 普通屏幕设备的 48 dps 与 96px 相同。

# php - Facebook 离线分享

> ID：11122470
> 
> 赞同：1
> 
> 时间：2012-06-20T15:05:18.320
> 
> 标签：php, facebook, offline

我用 PHP 制作了一个 Web 应用程序，可以将图像发布到我的 Facebook 页面。如果我在线并按下 POST 按钮，一切正常。

现在我想做的是：

*   上传图片到我的服务器
*   选择我的 Facebook 页面之一
*   输入消息（文本）
*   选择时间 我希望应用程序将此图像发布到所选的 Facebook 页面（使用 RCON）。

我知道如何对这些东西进行编程，但是当通过 RCON 调用脚本时我失败了。该脚本没有访问令牌，因此我无法发布任何内容。

当我和朋友离开时，脚本有什么方法可以获取访问令牌以将图像发布到我的 Facebook 页面？

谢谢你。

# machine-learning - 通过机器翻译系统生成英语查询

> ID：11122473
> 
> 赞同：0
> 
> 时间：2012-06-20T15:05:30.780
> 
> 标签：machine-learning, nlp, translation

我正在做一个从句子中生成问题的项目。现在，我可以提出这样的问题：“安吉拉·默克尔是德国总理。” -> “安吉拉·默克尔是谁？”

现在，当然，我希望问题看起来像“谁是……？” 反而。有什么简单的方法可以做到这一点，我还没有想到吗？

我目前的想法是训练一个英语（不是很问题）-> 英语（问题）翻译，可能使用现有的机器翻译引擎，如 moses。这是矫枉过正吗？我需要多少数据？有没有解决这个或类似问题的语料库？使用通用翻译引擎是否适合这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:10:19.323

在我的脑海中，如果您将自己限制在相对简单的问题上，您可以进行解析，然后翻转元素以获取问题。你如何决定疑问词呢？Who, What, Where, Why... 为此，您需要一个查看句子元素的分类器。安吉拉·默克尔（Angela Merkel）应该很容易归类为人/名，所以她得到了“谁”，柏林应该在地理词典中，所以得到了“哪里”。

我不确定具体的软件，但我可能会使用 NLTK，使用依赖解析，然后使用您喜欢的任何分类方案。

最终你的成功取决于你的输入和输出空间有多大。我会先解决最简单的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:13:46.010

查看 Michael Heilman 的论文[Automatic Factual Question Generation from Text](http://www.ark.cs.cmu.edu/mheilman/questions/papers/heilman-question-generation-dissertation.pdf)以了解问题生成的背景，并了解他解决此问题的方法是什么样的。您可以通过搜索“问题生成”的研究来找到更多信息。他提到了微软的一个语料库：[Microsoft Research Question-Answering Corpus](http://research.microsoft.com/en-us/downloads/88c0021c-328a-4148-a158-a42d7331c6cf/)。

我不认为仅基于（当前）统计机器翻译方法的方法会运作良好，因为您通常需要对源句子进行更深入的句法分析才能很好地生成适当的问题。对于像您的示例这样的简单问题，设计句法树转换来生成问题非常容易，但是一旦句子变得更加复杂，它就会变得更加棘手。

# eclipse - 在 Eclipse 中的 Pydev 上配置 Google App Engine 时出错

> ID：11122476
> 
> 赞同：0
> 
> 时间：2012-06-20T15:05:39.190
> 
> 标签：eclipse, google-app-engine, pydev

我正在尝试在 Eclipse 上配置 Google App Engine 并使用它在本地（在本地主机上）运行 python 应用程序：

为此，我使用以下教程作为指南：

[http://www.mkyong.com/google-app-engine/google-app-engine-python-hello-world-example-using-eclipse/](http://www.mkyong.com/google-app-engine/google-app-engine-python-hello-world-example-using-eclipse/)

我正确地遵循了这些步骤，但是当我尝试使用配置时出现错误，控制台输出是：

# 控制台输出：

C:\Program Files (x86)\Google\google_appengine\google\appengine\api\search\search.py​​:232: UserWarning: DocumentOperationResult._code 已弃用。请改用 OperationResult._code。'改用 OperationResult.%s。' %（姓名、姓名））

C:\Program Files (x86)\Google\google_appengine\google\appengine\api\search\search.py​​:232: UserWarning: DocumentOperationResult._CODES 已弃用。请改用 OperationResult._CODES。'改用 OperationResult.%s。' %（姓名、姓名））

警告 2012-06-20 14:53:01,451 rdbms_mysqldb.py:74] rdbms API 不可用，因为无法加载 MySQLdb 库。

Traceback（最近一次调用最后一次）：文件“C:\Program Files (x86)\Google\google_appengine\dev_appserver.py”，第 126 行，在 run_file( **file** , globals())

文件“C:\Program Files (x86)\Google\google_appengine\dev_appserver.py”，第 122 行，在 run_file execfile(script_path, globals_)

文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_main.py”，第 694 行，在 sys.exit(main(sys.argv))

文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_main.py”，第 582 行，在主根路径，{}，default_partition=default_partition)

LoadAppConfig 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py”，第 3142 行

引发 AppConfigNotFoundError google.appengine.tools.dev_appserver.AppConfigNotFoundError

* * *

我正在使用的配置是：

视窗 7 64 位

蟒蛇2.7

日食太阳神

配置 GAE 时可能出现的错误是什么？

附加信息：当我尝试手动使用 GAE 项目时（即使用启动器）它可以工作

* * *

# 更新：

我进行了实验，发现由于工作站和 python 安装文件夹不在同一个目录中，我得到了这些错误

从这里得到提示：文件“C:\Program Files(x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py”

第 582 行，在主根路径中，{}，default_partition=default_partition)

但是当我在同一个分区中创建另一个工作区时，我将其作为控制台输出，并且本地主机仍然无法工作

* * *

# 输出

C:\Program Files (x86)\Google\google_appengine\google\appengine\api\search\search.py​​:232: UserWarning: DocumentOperationResult._code 已弃用。请改用 OperationResult._code。

'改用 OperationResult.%s。' %（姓名、姓名））

C:\Program Files (x86)\Google\google_appengine\google\appengine\api\search\search.py​​:232: UserWarning: DocumentOperationResult._CODES 已弃用。请改用 OperationResult._CODES。

'改用 OperationResult.%s。' %（姓名、姓名））

警告 2012-06-20 17:20:56,719 rdbms_mysqldb.py:74] rdbms API 不可用，因为无法加载 MySQLdb 库。为应用程序运行开发应用程序服务器。

dev_appserver.py [选项]

应用程序根目录必须是要在此服务器中运行的应用程序的路径。必须包含有效的 app.yaml 或 app.yml 文件。

选项：

--address=ADDRESS, -a ADDRESS 此服务器应绑定的地址（默认本地主机）。

--clear_datastore, -c 在启动时清除数据存储。（默认为假）

--debug, -d 使用调试日志。（默认为假）

--help, -h 查看这条有用的信息。

--port=PORT, -p PORT 服务器运行的端口。（默认 8080）

--allow_skipped_files 允许访问 app.yaml 的 skipped_files 匹配的文件（默认为 False）

--auth_domain 运行此应用程序的授权域。（默认 gmail.com）

--backends 运行带有后端支持的 dev_appserver（多进程模式）。

--blobstore_path=DIR 用于存储 Blobstore 文件存根数据的目录路径。

--clear_prospective_search 清除预期搜索订阅索引（默认为 false）。

--datastore_path=DS_FILE 用于存储 Datastore 文件存根数据的文件路径。（默认 c:\users\anukoo~1\appdata\local\temp\dev_appserver.datastore）

--debug_imports 启用模块导入的调试日志记录，显示用于查找模块的搜索路径以及导入过程中遇到的任何错误。

--default_partition 在 APPLICATION_ID 中使用的默认分区。（默认开发）

--disable_static_caching 不允许浏览器缓存静态文件。（如果 app.yaml 中设置了过期，则默认启用）

--disable_task_running 提供后，任务在提交后不会自动运行，必须在本地管理控制台中手动运行。

--enable_sendmail 未配置 SMTP 时启用 sendmail。（默认为假）

--high_replication 使用高复制数据存储一致性模型。（默认为假）。

--history_path=PATH 用于存储数据存储历史记录的路径。（默认 c:\users\anukoo~1\appdata\local\temp\dev_appserver.datastore.history）

--multiprocess_min_port 在多进程模式下运行时，指定选择端口时要使用的最低端口值。如果设置为 0，则选择随机端口。（默认 9000）

--mysql_host=HOSTNAME MySQL 数据库主机。由 Cloud SQL (rdbms) 存根使用。（默认“本地主机”）

--mysql_port=PORT 要连接的 MySQL 端口。由 Cloud SQL (rdbms) 存根使用。（默认 3306）

--mysql_user=USER 要连接的 MySQL 用户。由 Cloud SQL (rdbms) 存根使用。（默认 ）

--mysql_password=PASSWORD 要使用的 MySQL 密码。由 Cloud SQL (rdbms) 存根使用。（默认 ''）

--mysql_socket=PATH MySQL Unix 套接字文件路径。由 Cloud SQL (rdbms) 存根使用。（默认 ''）

--persist_logs 启用所有请求和应用程序日志的存储以启用以后的访问。（默认为假）。

--require_indexes 不允许查询需要未在 index.yaml 中定义的复合索引。

--show_mail_body 在邮件存根中记录电子邮件正文。（默认为假）

--skip_sdk_update_check 跳过检查 SDK 更新。如果为 false，则回退到 .appcfg_nag 中指定的 opt_in 设置（默认为 false）

--smtp_host=HOSTNAME 发送测试邮件的 SMTP 主机。未设置此选项将禁用 SMTP 邮件发送。（默认 ''）

--smtp_port=PORT 发送测试邮件的 SMTP 端口。（默认 25）

--smtp_user=USER 要连接的 SMTP 用户。仅当此字段非空时，存根才会尝试登录。（默认 ''）。

--smtp_password=PASSWORD SMTP 服务器的密码。（默认 ''）

--task_retry_seconds 在执行过程中失败后重试任务之前等待多长时间（以秒为单位）。（默认“30”）

--use_sqlite 使用新的、基于 SQLite 的数据存储存根。（默认为假）

无效参数

* * *

似乎 dev_appserver.py 的论点是不正确的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:38:45.673

如果你犯了和我一样的错误，那么很有可能你的目录名中有空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:50:03.970

可以忽略有关搜索中已弃用事物的警告。如果您不打算使用它，关于 rdbms API 的消息也可以。

当传递给 dev_appserver.py 的目录中没有 app.yaml 时，会发生 AppConfigNotFoundError。如果您按照这些说明进行操作，那么您的 app.yaml 将位于“src”目录中，而构建命令中的“程序参数”将是 ${project_loc}/src - 是这种情况吗？当您从命令行运行并看到它工作时，您正在运行什么命令，从什么位置运行？

# php - PDO 不会选择 HTML

> ID：11122477
> 
> 赞同：1
> 
> 时间：2012-06-20T15:05:46.657
> 
> 标签：php, sql, pdo

```
$username_decoded = '<i>marco</i>';
$stmt = $this->db->prepare("SELECT * FROM foo WHERE username=:username");
$stmt->bindParam(':username',$username_decoded,PDO::PARAM_STR);
$stmt->execute();

$all_fetched = $stmt->fetchAll(PDO::FETCH_NUM);

print_r($all_fetched); 
```

上面的代码给了我空数组。该用户名存在于数据库中。它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:25:26.633

我打赌`username`列的类型是`CHAR(n)`而不是`VARCHAR(n)`。`CHAR(n)`在字符串的末尾添加空格以填充它以适应列的宽度。将您的列更改为`VARCHAR(n)`并确保在之后修剪所有多余的空格。

否则，如果您无法更改列，则可以在将其与数据库进行比较之前使用，也可以在查询中使用。`str_pad($username_decoded, *length of column*)``TRIM(username)`

# c# - 是否有有助于比较大量数据的设计模式？

> ID：11122480
> 
> 赞同：2
> 
> 时间：2012-06-20T15:05:49.847
> 
> 标签：c#, sql-server, tsql, design-patterns, ado.net

我需要比较位于不同服务器的 2 个 SQL 表的特定内容：Table1 和 Table2。

我想将 Table1 中的每一行与 Table2 的全部内容进行比较。

比较逻辑有点复杂，所以我想应用一个用 C# 编写的逻辑运算符。所以我不想对 SQL 查询本身进行比较。

我担心的是我将处理的数据大小将在 200 MB 左右。

我正在考虑使用 ADO.Net 将数据加载到 DataTable 中并在内存上进行比较。

你会推荐什么？是否已经有类似模式的方法来比较海量数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:10:45.270

200 MB 应该不是问题。.NET 应用程序一次可以处理的远不止这些。

但即便如此，我可能会为表 1 使用只进数据读取器，只是因为没有充分的理由不这样做，而这应该会减少所需的内存量。您可以使用您习惯的任何结构将表 2 保存在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:08:06.927

您可以使用两个 SqlDataReader。它们一次只有一行内存，只向前，而且效率极高。从读者那里取回该行后，您可以比较这些值。这是一个例子。

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:16:13.990

最具可扩展性的解决方案是创建 SQLCLR 函数来执行您想要的比较。

您应该不惜一切代价避免逐行比较。往返造成的网络延迟和延迟将导致执行速度极慢。

一个快速而简单的解决方案是将数据提取到本地文件然后进行比较，因为您只需支付一次网络税。不幸的是，您失去了数据库索引和查询优化提供的加速。

一个类似的解决方案是将所有数据加载到内存中，然后使用像字典这样的索引结构来提供额外的加速。这可能是可行的，因为您的数据可以放入内存中。您仍然只需支付一次网络税，但可以从更快的执行中获益。

最具可扩展性的解决方案是创建[SQLCLR](http://msdn.microsoft.com/en-us/library/k2e1fb36)代码来创建一个或多个函数来执行您想要的比较。这样您就可以完全避免网络税，避免在内存中创建和优化您自己的结构，并且可以利用索引和优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T15:20:20.383

这些解决方案可能不适用，具体取决于您正在进行的比较的实际逻辑。两种解决方案都依赖于正确排序数据

1）二分查找。- 使用二分查找无需扫描所有表2即可找到表2中的匹配行，这将显着减少比较次数

2）如果您正在寻找两个表之间的重叠/匹配/缺失行，您可以按相同的顺序对两个表进行排序。然后您可以同时循环遍历两个表，并保留指向每个表的当前行的指针。如果表 1 比表 2“领先”，那么您只需递增表 2 指针，直到它们相等或表 2 领先。然后一旦表 2 领先，您就开始增加表 1 直到它领先。等等。这样，您只需遍历每个表中的每条记录一次，就可以保证没有错过任何匹配项。

如果表 1 和表 2 匹配，则匹配。当表 1 领先时，表 2 中的每一行都从表 1 中“丢失”，反之亦然。

如果您只需要在行彼此处于一定范围内或某事时采取一些行动，此解决方案也将起作用。

3) 如果您必须为表 2 中的每一行对表 1 中的每一行实际执行一些操作，那么它只是两个嵌套循环，除了进行比较/工作之外，您无能为力来优化它尽可能高效。你可以多线程它虽然取决于工作是什么以及你的瓶颈在哪里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T15:17:18.387

您可以使用快速 ETL/SSIS 作业将数据暂存到同一个数据库吗？这将允许您执行可能更容易处理的设置操作。如果不是，我会同意在内存中有一张表的只进数据阅读器的建议

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T15:20:43.033

几年前，我写了一个 db table 比较工具，现在是一个名为[Data Comparisons](http://www.bucketsoft.com/data_comparisons/)的开源项目。

如果需要，您可以查看[源代码](http://datacomparisons.codeplex.com/SourceControl/list/changesets)。当您要比较的两个表位于同一物理服务器上时，您可以进行大量优化，因为您可以编写 SQL 查询来处理这个问题。我在数据比较中将此称为“快速比较”方法，只要您为比较的双方共享相同的连接字符串，就可以使用它。

但是，当它们位于两个不同的服务器上时，您别无选择，只能将数据拉入内存并比较那里的行。使用 SqlDataReaders 会起作用。但是，当您必须确切知道有什么不同（表 A 或表 B 中缺少哪些行，哪些行不同等）时，情况会很复杂。出于这个原因，我的方法是使用数据表，它速度较慢，但​​至少它们为您提供了必要的功能。

构建这个工具对我来说是一个学习过程。内存比较可能有优化的机会。例如，将数据加载到字典中并使用 Linq 对主键进行比较可能会更快。您甚至可以尝试 Parallel Linq 看看是否有帮助。正如 Jeffrey L Whitledge 所提到的，您不妨将 SqlDataReader 用于其中一个表，而另一个则存储在内存中。

# jquery - 带有包含父级的jQuery Draggable不会滚动

> ID：11122490
> 
> 赞同：1
> 
> 时间：2012-06-20T15:06:28.063
> 
> 标签：jquery, jquery-ui

我有一个 div 是 position: absolute ，它包含被拖动的项目。我想将他们的拖动限制设置为父级，但是当我滚动时似乎不起作用。

这是一个 jsfiddle 示例[http://jsfiddle.net/pJXVH/1/](http://jsfiddle.net/pJXVH/1/)

谁能告诉我是否有办法解决这个问题？在保持具有“填充剩余”div 的布局的同时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:04:56.177

所以这是我目前对这个问题的解决方案，我改变了收容措施的设置方式。我不使用父母。我只是设置了左侧和顶部，但我使用

```
containment :[10, $('.desktop').offset().top] 
```

然后在我隐藏横幅的函数内部：

```
$('.ui-draggable').draggable('option', 'containment',  [10, $('.desktop').offset().top]); 
```

这会根据需要更改收容...

我更喜欢更面向 css 或 $.draggable 的答案，但这将符合我的目的。

如果您找到更好的方法，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:15:11.933

用那个

$('.item').draggable({containment: $('.selector').parent() , scroll:true});

看到这个 [http://jsfiddle.net/bilalahmed07/pJXVH/5/](http://jsfiddle.net/bilalahmed07/pJXVH/5/)

# c - 使用 (void *) 作为通用数据容器时的 L 值问题

> ID：11122491
> 
> 赞同：0
> 
> 时间：2012-06-20T15:06:36.053
> 
> 标签：c, casting, macros, void-pointers, lvalue

这是程序中使用的结构：

```
struct basic_block
{
  void * aux;

  /* Many other fields,
  which are irrelevant.  */
}; 
```

现在：

1.  `basic_block`在程序执行期间存在几个实例。
2.  该程序分阶段/通过，一个接一个地执行。
3.  该`aux`字段用于在阶段`basic_block`执行期间存储阶段和特定数据，并由阶段本身释放（以便下一阶段可以重用它）。这就是为什么它是一个`void *`.

我的舞台用来`aux`存储 a `struct`，所以每次我想访问某些东西时，我都必须做一个演员表：

```
( (struct a_long_struct_name *) (bb->aux))->foo_field = foo; 
```

现在，我的问题是：每次都像这样投射它是一种痛苦，当它是更复杂表达式的一部分时，很难阅读。我提出的解决方案是：使用宏为我做演员：

```
#define MY_DATA(bb) \
  ( (struct a_long_struct_name *) (bb)->aux) 
```

然后我可以通过以下方式访问我的数据：

```
MY_DATA(bb)->foo_field = foo; 
```

但是：我不能将`MY_DATA(bb)` *自身*用作 L 值（对于 a `malloc`），所以我使用该宏毕竟不是一个好主意：

```
/* WRONG! I cannot assign to the result of a cast:  */
MY_DATA(bb) = malloc (sizeof (struct a_long_struct_name)); 
```

**我的问题：**

*我该怎么做才能以`aux`干净的方式引用并且仍然能够将其用作 L 值。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:51:44.577

尝试：

```
#define MY_DATA(bb) \
  ( *(struct a_long_struct_name **) &(bb)->aux) 
```

请注意，这会引入别名，因此您必须在使用宏时保持一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:51:54.907

您可以将该字段的*地址*`struct a_long_struct_name **`转换为然后取消引用它：

```
#define MY_DATA(bb) \
   (* ((struct a_long_struct_name **) &(bb)->aux) ) 
```

这将适用于您展示的两种构造。

`aux`但是，如果在声明时可以知道具体类型的可能性集合`struct basic_block`，那么使用联合会更清晰：

```
struct basic_block
{
  union {
      struct a_long_struct_name *alsn;
      /* etc */
  } aux;

  /* Many other fields,
     which are irrelevant.  */
}; 
```

进而

```
#define MY_DATA(bb) ((bb)->aux.alsn) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T16:41:15.977

没有必要用宏调用乱扔代码：

```
struct a_long_struct_name* strp = malloc(sizeof *strp);
if (!strp)
    <handle OOM>
bb->aux = strp;
strp->foo_field = foo;
etc. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T14:25:31.357

你不能。`void *`C 禁止通过不同类型 ( ) 的左值表达式访问一种类型 ( ) 的对象`struct a_long_struct_name *`，违反此规则是违反别名的行为。从实际的角度来看，这意味着编译器可以假设这两个左值不能引用相同的内存，因此可能会以**严重**破坏代码的方式重新排序读取和写入。形式上，它只是未定义的行为，这意味着任何事情都可能发生。

您应该做的是在问题中使用您的代码的原始版本，而忘记`MY_DATA(bb)`用作左值。而是直接分配给`bb->aux`. 这是`void *`为了什么。

# c - 如何确定一个数字的有用位数？

> ID：11122495
> 
> 赞同：0
> 
> 时间：2012-06-20T15:06:48.530
> 
> 标签：c, bitwise-operators

我正在编写一个函数，它确定 16 位整数的有用位数。

```
int16_t
f(int16_t x)
{
    /* ... */
} 
```

例如，数字“00000010 00100101”有 10 个有用位。我想我应该使用一些按位运算符，但我不知道如何。我正在寻找一些方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:15:16.193

如果您使用的是 gcc（或与 gcc 兼容的编译器，例如 ICC），那么您可以使用内置的内在函数，例如

```
#include <limits.h>

int f(int16_t x)
{
    return x != 0 ? sizeof(x) * CHAR_BIT - __builtin_clz(x) : 0;
} 
```

这假设您只需要最后一个前导零位右侧的位数。

对于 MSVC，您可以`_BitScanReverse`进行一些调整。

否则，如果您需要它是可移植的，那么您可以实现自己的通用`clz`功能，请参见例如[http://en.wikipedia.org/wiki/Find_first_set](http://en.wikipedia.org/wiki/Find_first_set)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:18:38.997

这些称为位扫描操作，在英特尔架构上有汇编指令（您可以直接从 C 调用），[请参见此处](http://chessprogramming.wikispaces.com/BitScan#bsfbsr)。如果您使用的是 MS 编译器，请[从这里开始](http://msdn.microsoft.com/en-us/library/wfd9z0bb%28VS.80%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:31:12.080

对数计算将某个数字表示为某个基数所需的位数：

让`[x]`be `x`，四舍五入到下一个整数。

然后是表示base`[log_b(x)]`所需的位数。`x``b`

因此，如果您想知道`x`C 中某些有效位的数量，那么`ceil(log2(x))`会告诉您。

由于没有算法可以在恒定时间内告诉您二进制表示的前导零的数量，因此计算对数实际上可能比天真的迭代更快。

# java - 如何使用 ISO-8859-1 中的字符集将字符串转换为文档 (DOM)

> ID：11122496
> 
> 赞同：0
> 
> 时间：2012-06-20T15:06:50.370
> 
> 标签：java, string, dom, character-encoding, iso-8859-1

我正在将 Web 服务中收到的字符串转换为文档 (DOM) xml，如下所示：

```
Document file= null;
String xmlFile= "blablabla"; //latin1 encodeing

DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
this.file = builder.parse(new InputSource(new StringReader(xmlFile))); 
```

但是该字符串是用 ISO-8859-1 (latin1) 编码的，当我阅读本文档的一个节点时，我遇到了一些错误。如何使用 ISO-8859-1 编码正确创建 DOM 对象？或者如何读取字符串中编码为 Latin 1 的节点？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:13:57.500

尝试这个：

```
this.file = builder.parse(new ByteArrayInputStream(xmlFile.getBytes("ISO-8859-1"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:01:39.673

**前言**

字符串没有编码，因为它们代表一个字符序列（它们是在 unicode 标准中定义的抽象实体）。

字节序列有一个编码，可以被解释为一个字符序列（前提是你告诉java如何解释它）。

**你的问题**

在您的问题中，您的数据存储在一个字符串中。因此它已经被解释为一个字符序列。显然解释是不正确的。

根据您的问题和您了解数据编码的方式，有 2 个选项：

**解决方案1（可能是最好的）：**

不要解释您收到的数据并将其保存为字节序列（Stream 或 byte[] 或 ByteArray）。然后将此字节序列直接传递给您的 DOM 解析器（只要标记正确，它将正确解码 xml 文件，无论其编码如何。

**解决方案 2（可能是唯一可能的，具体取决于您获取数据的方式）：**

如@ThOrndike 的回答中所述，将字符串重新编码为 ByteArray：

```
this.file = builder.parse(new ByteArrayInputStream(xmlFile.getBytes("ISO-8859-1"))); 
```

这只有在您确定字符串一开始就被正确解释的情况下才有效。

显然，这里不是这种情况，似乎给你字符串的库已经将它解释为 UTF-8 字节序列（用'？'替换所有错误字节，这是 UTF-8 读者的行为）。在这种情况下，您无法做任何事情，因为原始字节已丢失。

您唯一的希望是解决方案 1，或者找到一种方法来强制为您提供 String 的库正确解释它。

# php - preg_match 在字符串中查找单词的多个部分出现

> ID：11122501
> 
> 赞同：1
> 
> 时间：2012-06-20T15:06:58.100
> 
> 标签：php, count, preg-match, preg-match-all

这里有正则表达式大师吗？这让我疯狂。

假设我有这个字符串：“书店书籍预订”

我想计算其中出现的“书籍”数量并返回数字。

目前我有这个不起作用：

```
$string = "bookstore books Booking";            
if (preg_match_all('/\b[A-Z]+books\b/', $string, $matches)) {
  echo count($matches[0]) . " matches found";
} else {
  echo "match NOT found";
} 
```

最重要的是 preg_match_all 中的“书”应该变成 $var

有人知道如何正确计数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:12:08.407

它实际上要简单得多，您可以像这样使用[preg_match_all()](http://php.net/manual/en/function.preg-match-all.php)：

```
$string = "bookstore books Booking";   
$var = "books";      
if (preg_match_all('/' . $var . '/', $string, $matches)) {
    echo count($matches[0]) . " matches found";
} else {
    echo "match NOT found";
} 
```

或者使用为此目的制作的函数[substr_count()](http://php.net/manual/en/function.substr-count.php)：

```
$string = "bookstore books Booking";   
$var = "books";      
if ($count = substr_count($string, $var)) {
    echo $count . " matches found";
} else {
    echo "match NOT found";
} 
```

# php - 正则表达式：替换谷歌分析代码

> ID：11122503
> 
> 赞同：0
> 
> 时间：2012-06-20T15:07:01.720
> 
> 标签：php, regex

```
<script type="text/javascript"> 

var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");

document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));

</script>

<script type="text/javascript">
try

{

    var pageTracker = _gat._getTracker("xx-xxxxxxxx-x");

    pageTracker._setDomainName(".com");

    pageTracker._trackPageview();

} catch (err) { }

</script>

<script src='bla.com/gaAddons.js' type='text/javascript'></script> 
```

我在多个文件中有这个旧的谷歌分析代码。我需要将上面的整个代码替换为`<script src='external_file.js' type='text/javascript'></script>`.

我正在使用 php，这是我的正则表达式：`/<script.*>.*<script src='.+gaAddons.js' type='.+'><\/script>/`它不起作用并且存在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:42:01.550

您可以尝试将`s`标志添加到您的正则表达式中，[DOTALL](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)修饰符`.`还可以捕获换行符：

```
/<script.*>.*<script src='.+gaAddons.js' type='.+'><\/script>/s 
```

不过，在这种情况下，您最好使用 HTML 解析器而不是正则表达式。

# ruby - 多条可见空间在一条线上

> ID：11122504
> 
> 赞同：0
> 
> 时间：2012-06-20T15:07:03.743
> 
> 标签：ruby, string, line, space, gets

我正在使用 Ruby，试图制作一个交互式程序。（对此非常陌生，我现在正在学习。）

现在我有

```
puts 'Can I have your name please?
first = gets.chomp
puts 'Ok, so your first name is ' + first + '? How about your middle name?'
middle = gets.chomp
puts 'ok, so your middle name is ' + middle + '. And your last name?'
last = gets.chomp
puts 'ok, so your last name is ' + last + '?'
puts 'So your full name is ' + first + middle + last + '? That's a very nice name! 
```

'

到目前为止一切正常，但最后一行。当最后一行弹出时，它将所有 3 个名称放在一起，中间没有空格。我尝试了添加或删除 + 或添加或删除空格甚至 ' 但是，我所做的一切似乎都不起作用，它只是保持不变。那么如何在最后一行的第一个中间名和姓氏之间留一些空格？

提前感谢您的帮助.... -约翰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:08:57.893

像这样的东西

```
puts "So your full name is #{first} #{middle} #{last}? That's a very nice name!" 
```

这称为[字符串插值](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Interpolation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:08:53.213

使用`join`：

```
[first, middle, last].join " " 
```

# bash - FileZilla FTPing 解压问题

> ID：11122505
> 
> 赞同：1
> 
> 时间：2012-06-20T15:07:06.177
> 
> 标签：bash, ftp, inotify, filezilla

我有一个 bash 脚本，它利用 inotify-tools 等待将 .zip 文件放入根目录下的子结构中。从那里将它们解压缩到另一个目录中。

当我使用 WinSCP 复制 .​​zip 文件时，脚本会正确执行。但是，使用 Filezilla 复制 .​​zip 文件会导致此错误：

```
End-of-central-directory signature not found.  Either this file is not
a zipfile, or it constitutes one disk of a multi-part archive.  In the
latter case the central directory and zipfile comment will be found on
the last disk(s) of this archive. 
```

我用谷歌搜索了这个错误，两个主要问题似乎是旧版本的 Linux 解压缩功能，我有一个较新版本，并试图复制大于 2gb 的文件（这个文件不是）

任何人都知道这里的问题，在我看来，Linux 试图在脚本完全复制到磁盘之前解压缩它？就像我说的，只有 filezilla 有这个错误，我没有用 winSCP 得到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T12:54:04.383

我相信您的主要问题是您尝试在 ZIP 仍在传输时对其进行处理。可能发生的情况是，一旦启动传输，WinSCP 就会创建一个临时文件来存储传输的数据。该事件将在 zip 文件完全传输之前触发您的脚本。

这可以解释为什么您会收到此错误：

> 未找到中央目录结束签名。该文件不是 zipfile，

所以解决方案是有两个文件夹，一个用于传输，一个用于完成。它们应该在同一个文件系统中。传输完成后，只需从一个文件夹移动到另一个文件夹即可。

# c# - 通用 NHibernate 存储库 Contains(TId id) 方法

> ID：11122507
> 
> 赞同：1
> 
> 时间：2012-06-20T15:07:13.510
> 
> 标签：c#, nhibernate

我有一个使用 NHibernate 的通用存储库，其中 ID 的类型也是通用参数：

```
/// <summary>
/// Represents a common base class for repositories.
/// </summary>
/// <typeparam name="TEntity"> The type of the entity. </typeparam>
/// <typeparam name="TId"> The type of the ID of the entity. </typeparam>
public abstract class RepositoryBase<TEntity, TId> : IRepository<TEntity, TId> where TEntity : EntityBase<TEntity, TId> 
```

在这种情况下，如何实现一个`Contains`对 NHibernate 快速且可读的通用方法？

```
public bool Contains(TId id)
{
    using (var session = NHibernateHelper.OpenSession())
    {
        // throws an excpetion that Equals is not supported
        return session.QueryOver<TEntity>().Where(e => e.Id.Equals(id)).RowCount() > 0;
    }
} 
```

**更新：**

在我的情况下，NHibernate 已经关闭了延迟加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:18:01.413

正如评论中所指出的......使用标准，使用“id”特殊属性

```
public bool Contains(TId id)
{
    using (var session = NHibernateHelper.OpenSession())
    { 
        return session.CreateCriteria(typeof(TEntity))
            .Add(Expression.Eq("id", id))
            .SetProjection( Projections.Count("id"))
            .UniqueResult() > 0
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:41:13.957

我认为您必须`Eqauls`在实体基类中覆盖 和其他比较运算符，例如：

```
public abstract class TEntity
{
    public override bool Equals(object entity)
    {
        return entity != null
            && entity is EntityBase
            && this == (EntityBase)entity;
    }

    public static bool operator ==(EntityBase base1, 
        EntityBase base2)
    {
        if ((object)base1 == null && (object)base2 == null)
        {
            return true;
        }

        if ((object)base1 == null || (object)base2 == null)
        {
            return false;
        }
        if (base1.Key != base2.Key)
        {
            return false;
        }

        return true;
    }
    public static bool operator !=(EntityBase base1, 
        EntityBase base2)
    {
        return (!(base1 == base2));
    }
} 
```

# mysql - MySQL - 根据许多表选择信息

> ID：11122520
> 
> 赞同：0
> 
> 时间：2012-06-20T15:07:49.143
> 
> 标签：mysql, select, inner-join

我需要执行以下操作：

**从表**交付中****选择用户**名，其中**日期>“2012-06-01 00:00:00”**，然后从**客户**订单中获取**IP ，并****删除重复的用户名**（全部基于选择的第一个用户名）。**

 ******```
select Username from delivery where date>"2012-06-01 00:00:00"
                        INNER JOIN Customers d
                        ON c.Username = d.Username order by IP asc; 
```

它不工作，任何想法？

**编辑：**

```
select Username from delivery c
    INNER JOIN Customers d
    ON c.Username = d.Username 
where date>"2012-06-01 00:00:00"
order by IP asc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:10:30.933

1)`WHERE`子句必须在`JOIN ... ON ...`子句之后。

2）你引用一个表`c`：

```
ON c.Username = d.Username 
```

但你还没有定义什么`c`是。

3) 您想删除重复的用户名，但您没有这样做。您需要`SELECT DISTINCT Username`或`GROUP BY Username`。

4) 要解决列名不明确的问题，您可以使用以下两种方法之一：

*   在列名之前指定表别名（用点分隔）。
*   用作`USING`连接条件，以避免`Username`两次获取列。

这是第二种方法的示例：

```
...
FROM delivery AS d
INNER JOIN Customers AS c USING (Username)
... 
```

如您所见，它更加简洁，这意味着您可以`Username`在查询中的其他地方引用，而无需指定表别名来消除歧义。

* * *

解决问题的一种完全不同的方法是使用`EXISTS`而不是`JOIN`：

```
SELECT DISTINCT
    Username, IP 
FROM customers
WHERE EXISTS
(
    SELECT *
    FROM delivery
    WHERE delivery.Username = customers.Username 
    AND delivery.date >= '2012-06-01'
)
ORDER BY IP 
```

假设您的表`DISTINCT`中没有重复项，您也可以在使用此方法时删除。`customers`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:11:14.540

您缺少第一个表上的别名：

```
select Username from delivery c 
INNER JOIN Customers d ON c.Username = d.Username
where c.date='2012-06-01 00:00:00'
order by IP asc; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:11:22.637

试试这个：

```
SELECT DISTINCT d.Username, c.IP 
FROM delivery d INNER JOIN Customers c
    ON d.Username = c.Username 
   AND DATE(d.date) >= "2012-06-01"
ORDER BY c.IP 
```******

# grails - 使用 Grails Portlet 插件切换视图

> ID：11122521
> 
> 赞同：0
> 
> 时间：2012-06-20T15:07:51.290
> 
> 标签：grails, liferay, portlet

我一直在尝试将 Grails Portlet 插件与 Liferay 一起使用，但无论教程怎么说，我似乎都无法呈现不同的页面：

> ### 查看映射
> 
> 对于那些支持它的请求类型（'resource'、'render'），可以通过让 portlet 操作闭包返回一个映射来返回一个模型。模型将使用以下规则（按先例顺序）传递给视图：
> 
> 1.  'XXX/xyz.gsp' 其中'XXX' 是portlet 的名称（例如XXXPortlet.groovy），'xyz' 是请求中'action' 参数的值。
>     
>     
> 2.  'XXX/MODE.gsp' 其中'XXX' 是portlet 的名称（例如XXXPortlet.groovy），'MODE' 是当前的portlet 模式（例如'view'）
>     
>     
> 3.  'XXX/render.gsp'

到目前为止，我已经能够通过此代码触发特定操作：

```
<form method="post" action="${portletResponse.createActionURL()}">
    <input type="hidden" name="action" value="testPage"/>
    <input type="submit" value="action">
</form> 
```

这将触发一个代码块：

```
 def testPage = {
    println "TESTPAGE METHOD"
 } 
```

然而，之后它总是会渲染 View.gsp，不像它所说的 XXX/testPage.gsp 会起作用。

此外，我尝试使用 createRenderURL() 而不是 createActionURL() 但 portlet 将呈现一个空白页面，我似乎无法在日志中找到它试图查找的页面。

对此的任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:49:32.483

最后通过深入研究插件 groovy 并想为其他遇到问题的人记录答案。您必须使用 portletResponse.createRenderURL() 作为操作，此外，您**必须**从调用的方法返回一个映射。

这是一个例子：

```
<form method="post" action="${portletResponse.createRenderURL()}">
    <input type="hidden" name="action" value="testPage"/>
    <input type="submit" value="submit">
</form> 
```

将调用以下代码并将其呈现给 XXX/testPage.gsp 视图

```
def testPage = {
    println "TESTPAGE METHOD"
    ['PageProperty1':'foo', 'PageProperty2':'bar']
} 
```

这里要注意的重要一点是 createRenderURL() 将简单地调用由 action 参数的值指定的闭包，如果存在则重定向到该页面，因为 createActionURL() 将简单地调用闭包并重定向到视图。普洱茶

# php - Foreach 或 While - 最适合处理数组？

> ID：11122527
> 
> 赞同：0
> 
> 时间：2012-06-20T15:08:13.477
> 
> 标签：php, foreach, while-loop

所以我想做的是处理一个数组。该数组包含一件事：照片网址。

当我使用 foreach() 时，我得到一个限制错误（500 内部错误）。似乎它在我重写脚本后开始发生。但这没有任何意义，因为脚本中没有错误，并且之前运行良好。该脚本仍然有效，在弹出错误之前它只能处理大约 30 张照片。是否可以使用 while() 来处理数组？它会因为某种原因摆脱我的 500 错误吗？

感谢您的输入！布兰登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:11:54.507

对于性能更好的 foreach 循环。使用一些 php 基准访问此站点，看看哪个周期更适合您： [http ://www.phpbench.com/](http://www.phpbench.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:15:12.010

如果您遇到超时（无限循环）错误，while 或 foreach 都不会。你最好看看限制你的数组的处理量，并逐步进行（分页..？）。

```
for ($i = 0; $i < 100; $i++)
{
    //Do your thing. Don't use for each, use $array[$i]
} 
```

如果它不是数字，请使用带有两个语句的 while：

```
while ($test = current($array) && $i < 50)
{
     //xxxx
     next($array);
     $i++;
} 
```

# android - 切换标签/活动时如何隐藏android键盘？

> ID：11122529
> 
> 赞同：1
> 
> 时间：2012-06-20T15:08:16.583
> 
> 标签：android, keyboard, hide

我一直在 stackoverflow 上寻找一个好的解决方案，因为这是一个常见问题。有些人声称，只要把

`android:windowSoftInputMode="stateHidden"` 或 `android:windowSoftInputMode="stateAlwaysHidden"` 在您的 androidmanifest 活动中，它会隐藏键盘。但它不适合我。在我的应用程序中，我使用 5 个选项卡（活动），其中一个是搜索选项卡。

在我的搜索功能中，我实现了：

```
InputMethodManager imm = (InputMethodManager)getSystemService(
Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(searchField.getWindowToken(), 0); 
```

如果您单击搜索选项卡（活动）中的搜索按钮，效果会很好。但是，如果您单击编辑文本然后切换到另一个选项卡，则键盘会跟随并且不会消失。切换标签时如何移除键盘？

# asp.net - VB.Net ListView 用按钮选择项目

> ID：11122530
> 
> 赞同：0
> 
> 时间：2012-06-20T15:08:16.523
> 
> 标签：asp.net, vb.net

注意：这里或任何地方都没有此类问题的任何问题......

好的，所以我创建了我的列表视图，它的删除和编辑事件工作正常，现在我想实现用户将元素标记为“默认”的可能性。

`D`,`E`并且`Def`是按钮

```
Reference
----------------------------------------------------------------
- ref1  - somevalue - somevalue - somevalue - [D] - [E] - [Def]
---------------------------------------------------------------- 
```

所以这将是表格中的一行，我通过处理来自列表视图的事件进行删除和编辑工作，

```
Private Sub lvMain_ItemDelete(ByVal sender As Object, ByVal e As ListViewDeleteEventArgs) Handles lvMain.ItemDeleting
   Dim refFac As new ReferenceFactory
   refFac.Delete(e.Keys(0))
EndSub 
```

类似的编辑。但是现在当我尝试从默认按钮获取值时，该按钮甚至不会做任何事情......这是代码：

```
<asp:ImageButton ID="ibtDefault" runat="server" ImageUrl="~/Images/Default16.png" CommandName="Default" /> 
```

对于我的逻辑：

```
Public Sub ibtDefault_Click(ByVal sender As Object, ByVal e As ImageClickEventArgs )
   SelectedRef.Name = "Test"
End Sub 
```

我只是想通过更改将显示默认引用的全局字符串的值来测试它是否会运行。但它甚至不会这样做......然后我尝试使用命令。

```
Private Sub lvMain_ItemCommand(ByVal sender As Object, ByVal e As ListViewCommandEventArgs) Handles lvMain.ItemCommand
   If e.CommandName = "Default" Then
      'Dim refID As New Integer
      'Dim refer As ListViewItem
      'refer = e.Item

      SelectedRef.Name = "Test"
   End If
End Sub 
```

但这也不会运行......我在这里做错了什么：S

基本上我想要的是点击我保存`Reference` `Name`并`ID`在我准备的两个全局变量中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:33:19.983

默认是保留字，可能会弄乱您的代码。当您运行 ItemCommand 事件时，您可以在其末尾重新绑定数据，它应该会刷新您的页面。

# bash - 使用 Bash AGI 设置通话文件在一段时间后挂断

> ID：11122542
> 
> 赞同：0
> 
> 时间：2012-06-20T15:09:01.967
> 
> 标签：bash, asterisk, agi

我正在尝试使用星号上的呼叫文件拨打电话，无论声音文件是否完成，它都会在给定时间后播放文件并挂断。

我将它作为 AGI 脚本使用这个 bash 脚本：

```
#!/bin/bash

Duration="30"
file="sound.mp3"

while read VAR && [ -n ${VAR} ] ; do : ; done
echo "ANSWER"
read RESPONSE

echo 'SET AUTOHANGUP $Duration'

echo 'EXEC PLAYBACK "'$file'" ""'
read RESPONSE

exit 0 
```

问题是星号 cdr 日志显示通话持续 30 秒，无论对方是否挂断了电话......

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:07:50.910

您可以使用信号设备。例如：

```
#!/bin/bash
times_up(){ echo "time is up, pens down."; exit 0; }
trap 'times_up' ALRM
(sleep 10;kill -0 $$ && kill -ALRM $$)&

s=0
while (true) do
    sleep 1
    echo "$s: do my stuff"
    let s=$s+1
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:49:50.330

好吧，这很尴尬……

我清理了我的代码，以便可以将其粘贴到此处，当我再次尝试时，它似乎可以按我的意愿工作。仍然不知道当时的问题是什么，但这段代码似乎有效

```
#!/bin/bash

 Duration="20"
 file="soundfile"

while read VAR && [ -n ${VAR} ] ; do : ; done
echo "ANSWER"
read RESPONSE

echo 'SET AUTOHANGUP '$Duration''

echo 'EXEC PLAYBACK "'$file'" ""'
read RESPONSE

exit 0 
```

# facebook - Facebook - 是否可以在不创建应用程序的情况下检索用户公开个人资料图片？

> ID：11122544
> 
> 赞同：1
> 
> 时间：2012-06-20T15:09:09.177
> 
> 标签：facebook, actionscript-3, flash, web, facebook-opengraph

澄清一下：我正在使用开放图形元标记（`og:video`等）来创建一个链接，当共享时将显示替代内容，在我的情况下是一个小的 Flash 小部件。像[这样](http://developers.facebook.com/tools/debug/og/object?q=http://soundcloud.com/likasumbudee/drums-drums)的东西（soundcloud.com）

我使用 facebook 工具来调试我的链接，并且共享部分工作正常。

我的问题是：我可以在共享小部件的页面上获取用户个人资料图片的 src 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:19:45.207

个人资料图片是公共对象，您可以像这样检索它：http:
[//graph.facebook.com/USERID/picture](http://graph.facebook.com/USERID/picture)
例如： http:
[//graph.facebook.com/shlomi.schwartz/picture](http://graph.facebook.com/shlomi.schwartz/picture)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:26:21.630

来自[Facebook 文档](https://developers.facebook.com/docs/reference/api/)：

您可以通过将后缀 /picture 添加到对象 URL 来呈现任何对象的当前个人资料照片。例如，这将呈现您的公开个人资料照片：

```
<img src="https://graph.facebook.com/username_or_uid/picture"/> 
```

您可以使用 type 参数指定您想要的图片大小，它应该是正方形（50x50）、小（50 像素宽，可变高度）、普通（100 像素宽，可变高度）和大（大约 200 像素宽）之一，可变高度）：[https](https://graph.facebook.com/username_or_uid/picture?type=large) ://graph.facebook.com/username_or_uid/picture?type=large 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:17:29.610

它可能无法回答您的问题，但要获取 facebook 用户的个人资料图片，请使用以下 url 格式[http://graph.facebook.com/_facebook_user_id_or_facebook_user_name_/picture](http://graph.facebook.com/_facebook_user_id_or_facebook_user_name_/picture)

因此，只要您有 facebook 用户 ID 或用户名（通过抓取或其他方式），您就可以生成图像 src。

# python - 使用 Python 下载的 PDF 文件无法在 acrobat 中打开

> ID：11122549
> 
> 赞同：1
> 
> 时间：2012-06-20T15:09:16.550
> 
> 标签：python, pdf, urllib2

我有一个小 Python 脚本，我用它来下载一大堆 PDF 文件进行归档。我遇到的问题是，当我下载文件时，它们在正确的标题下正确显示，但它们的大小错误，Acrobat 无法打开它们，失败并显示错误消息`Out of memory`或`Insufficient data for an image`其他任意 Acrobat 错误. 在文本编辑器中查看页面的内容看起来有点像 PDF 文档，我的意思是它通常是难以理解的，但有一些文本和标记片段，包括 PDF 标识符。

下载文件的代码是这样的：

```
def download_file( file_id):
    folder_path = ".\\pdf_files\\"
    file_download="http://myserver/documentimages.asp?SERVICE_ID=RETRIEVE_IMAGE&documentKey="    
    file_content = urllib.urlopen(file_download+file_id, proxies={})
    file_local = open( folder_path + file_id + '.pdf', 'w' )
    file_local.write(file_content.read())
    file_content.close()
    file_local.close() 
```

如果通过浏览器下载相同的文件，它看起来很好，但在磁盘上也更大。我猜这个问题可能与保存文件时的编码有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:16:23.573

您需要将其编写为二进制文件，以便：

`file_local = open( folder_path + file_id + '.pdf', 'wb' )`

# iphone - 'AppDelegate' 没有可见的@interface 声明选择器

> ID：11122554
> 
> 赞同：2
> 
> 时间：2012-06-20T15:09:26.007
> 
> 标签：iphone, objective-c, ios, xcode, delegates

在我的 tabBar 出现之前，我现在正在编写一个注册屏幕。我的想法是通过这种方法显示我的注册屏幕（暂时没有关闭功能）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.

Register *registerView =  [[Register alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:registerView animated:YES];

return YES;
} 
```

这在 AppDelegate.m 中
不幸的是它不起作用。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:12:22.913

`presentModalViewController:animated:`是`UIViewController`类的方法。由于应用程序委托不是视图控制器，因此您不能向它发送此方法。要在屏幕上显示您的第一个视图控制器，请将其分配给您的应用程序主窗口的`rootViewController`属性：

```
self.window.rootViewController = registerView; 
```

# jquery-ui - 如何将数据从外部文件加载到数组中 - js

> ID：11122555
> 
> 赞同：0
> 
> 时间：2012-06-20T15:09:27.440
> 
> 标签：jquery-ui

我有一个类似的功能

```
 $(function() {
    var data = [
        { label: "anders", category: "" },
        { label: "annhhx10", category: "Products" },
        { label: "annk K12", category: "Products" },
        { label: "andreas johnson", category: "People" }
    ];

    $( "#search" ).catcomplete({
        delay: 0,
        source: data
    });
}); 
```

我想从具有大约 1000 个条目的外部文件中传递“data []”数组中的所有标签，而不是将它们放在源文件中。请指导我实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:33:10.773

好吧，一种选择是执行以下操作：

1.  将数据放在服务器上一些易于解析的文件中。
2.  将 AJAX 调用添加到您的 javascript 中以请求 mydata.txt，或者您想要调用数据文件的任何内容。
3.  解析响应中返回的数据，构建您的标签/类别对象，并将它们添加到您的数组中。

# awk - 使用 awk 按行向后搜索，并将结果附加到下一行

> ID：11122556
> 
> 赞同：2
> 
> 时间：2012-06-20T15:09:28.750
> 
> 标签：awk, hosts-file, dnsmasq

我正在尝试生成一个临时主机文件，该文件基于 dnsmasq 提供的 DNS 日志。我已经让它大部分工作了，但是我在使用 CNAME 时遇到了问题。我将展示我迄今为止所取得的成就。

我需要获取日志中有 3 种类型的响应。最简单的很容易从日志中提取，例如

```
Jun 20 14:27:59 dnsmasq[2551]: reply stackoverflow.com is 64.34.119.12 
```

这可以输出到“64.34.119.12 stackoverflow.com”使用

```
grep reply /tmp/dnslog | grep -v 'NXDOMAIN\|NODATA' | awk '{print $8 " " $6}' 
```

另一种类型的日志涉及 CNAME，这里是一个示例；

```
Jun 20 14:42:11 dnsmasq[2551]: reply www.videolan.org is <CNAME>
Jun 20 14:42:11 dnsmasq[2551]: reply ganesh.videolan.org is 88.191.250.2 
```

这可以输出到“88.191.250.2 ganesh.videolan.org www.videolan.org”使用

```
grep reply /tmp/dnslog | grep -v 'NXDOMAIN\|NODATA' | awk '{print $8 "\t" $6}' | awk '/CNAME/ {name=$2; getline ; print $0 " " 'name'}' 
```

但是此方法不适用于以下类型的日志，其中有多个 CNAME

```
Jun 20 15:00:42 dnsmasq[2551]: reply en.wikipedia.org is <CNAME>                        
Jun 20 15:00:42 dnsmasq[2551]: reply wikipedia-lb.wikimedia.org is <CNAME>              
Jun 20 15:00:42 dnsmasq[2551]: reply wikipedia-lb.esams.wikimedia.org is 91.198.174.225 
```

前面的命令给出以下结果

```
<CNAME> wikipedia-lb.wikimedia.org      en.wikipedia.org 
```

通过使用提到的第一个命令和第二个命令，wikipedia-lb.esams.wikimedia.org 与 91.198.174.225 关联，但是 wikipedia-lb.wikimedia.org 与 wikipedia-lb.esams.wikimedia.org 不关联。理想的结果应该如下

```
91.198.174.225 wikipedia-lb.esams.wikimedia.org wikipedia-lb.wikimedia.org      en.wikipedia.org 
```

为了解决这个问题，我认为需要向后读取文件，但是这样做不会弄乱 awk 的 getline 部分，以追加到下一行吗？

理想情况下，我想将两种类型的日志组合成一个命令，然后输出所有内容，而不必分别运行这两个脚本。任何人都可以协助修改 awk 命令来执行此操作吗？

这是“grep reply /var/dnslog”的示例，以及要输出的所需主机文件。目前还有其他次要问题。这些在所需的主机输出中突出显示。

```
Jun 20 15:28:21 dnsmasq[2551]: reply photos-a.ak.fbcdn.net is <CNAME>
Jun 20 15:28:21 dnsmasq[2551]: reply photos-a.ak.facebook.com.edgesuite.net is <CNAME>
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.25
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.48
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.64
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.9
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.26
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.51
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.8
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.50
Jun 20 15:28:21 dnsmasq[2551]: reply a995.dspmm1.akamai.net is 213.200.108.65
Jun 20 15:28:22 dnsmasq[2551]: reply stackoverflow.com is 64.34.119.12
Jun 20 15:29:41 dnsmasq[2551]: reply www.wikipedia.org is <CNAME>
Jun 20 15:29:41 dnsmasq[2551]: reply wikipedia-lb.wikimedia.org is <CNAME>
Jun 20 15:29:41 dnsmasq[2551]: reply wikipedia-lb.esams.wikimedia.org is 91.198.174.225
Jun 20 15:29:42 dnsmasq[2551]: reply en.wikipedia.org is <CNAME>
Jun 20 15:29:42 dnsmasq[2551]: reply wikipedia-lb.wikimedia.org is <CNAME>
Jun 20 15:29:42 dnsmasq[2551]: reply wikipedia-lb.esams.wikimedia.org is 91.198.174.225
Jun 20 15:29:42 dnsmasq[2551]: reply ja.wikipedia.org is <CNAME>
Jun 20 15:29:42 dnsmasq[2551]: reply wikipedia-lb.wikimedia.org is <CNAME>
Jun 20 15:29:42 dnsmasq[2551]: reply wikipedia-lb.esams.wikimedia.org is 91.198.174.225 
```

主机文件

```
213.200.108.26  a995.dspmm1.akamai.net photos-a.ak.facebook.com.edgesuite.net photos-a.ak.fbcdn.net 
##ideally select 1 host at random from multiple of a995.dspmm1.akamai.net, although list may be randomised already so 1st will suffice##
64.34.119.12    stackoverflow.com
91.198.174.225  wikipedia-lb.esams.wikimedia.org wikipedia-lb.wikimedia.org www.wikipedia.org
91.198.174.225  wikipedia-lb.esams.wikimedia.org wikipedia-lb.wikimedia.org en.wikipedia.org
91.198.174.225  wikipedia-lb.esams.wikimedia.org wikipedia-lb.wikimedia.org ja.wikipedia.org 
##Ideally, detect these similarities for wikipedia and convert the 3 lines into this;##
91.198.174.225  wikipedia-lb.esams.wikimedia.org wikipedia-lb.wikimedia.org www.wikipedia.org en.wikipedia.org ja.wikipedia.org 
```

目的是文件将可分布在低带宽、高延迟的链路上，因此文件应尽可能小。我知道长时间使用此文件会导致很多问题，我已将文件配置为仅在短时间内有效。如果有人可以帮助解决指出的问题，将不胜感激。此外，我的可用 UNIX 应用程序范围有限。如果上述可以在awk中实现，那将是可取的。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:08:01.387

使用 调用`awk -f parse.awk dnsmasq.log`。

```
/reply/ { 
    host = $6;
    ip = $8;

    names[length(names)+1] = host;

    if (ip !~ /CNAME/) {
    # assign all names up to now the same IP
    # This will overwrite any previous IP assignment as well
    for (i in names) IPs[names[i]] = ip;
    delete names;
    }
}

END {
    # collate hostnames for a particular IP
    for (host in IPs) hosts[IPs[host]] = hosts[IPs[host]]" "host;
    for (IP in hosts) print IP hosts[IP];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:27:55.210

`awk`与 一起使用`sort`：

```
..|awk '{if($8 ~ /<CNAME>/){load=load" "$6}else{print $8" "load" "$6;load=""}}'
  | sort -u -k2 
```

# qt - 不同电脑上的 QT QGL 黑色小部件

> ID：11122560
> 
> 赞同：0
> 
> 时间：2012-06-20T15:09:35.473
> 
> 标签：qt, opengl, widget

我写了一个改变失明的小程序（这次只有windows）。它通过 qgl 小部件中的 open gl 显示 4 个图像（2 个真实，2 个灰色）。它使用画家来做到这一点。

它在我的电脑上运行良好。我试图把它放到另一个没有 qt 的地方，并将这个 gl 文件放到目录中（找到了 with dependency walker）：

libgcc_s_dw2-1.dll mingwm10.dll QtCore4.dll QtGui4.dll QtOpenGL4.dll

它在我的电脑上运行良好，在 QTCreator 之外并且没有设置任何路径。在另一台电脑上，QGL 小部件只是黑色的。该程序正常工作（单击按钮等），但所有图像都是黑色的。我寻找路径，但它们都很好。不知道发生了什么。我使用的电脑硬件较旧，但没有什么特别之处（较旧的 Ati 卡带有较旧的驱动程序，但我可以在中等设置下玩半条命 2，所以我假设驱动程序已安装）。

我没有收到任何错误消息或任何东西。任何想法可以做些什么来解决它？如果没有任何效果，我将尝试在其中创建一个带有该程序的 ubuntu USB 记忆棒。

路径（路径正确）：

C:\tina_and_mona\pics\1\1.jpg C:\tina_and_mona\pics\1\2.jpg C:\tina_and_mona\pics\1\3.jpg C:\tina_and_mona\pics\1\4.jpg

```
void FlickerImage::updateGL()
{
    //qDebug() << "In UpdateGl Event";
    painter.begin(this);
    painter.setRenderHint(QPainter::Antialiasing);
    painter.drawImage ( QRectF(0,0,800,600), images[image_counter], QRectF(0,0, images[image_counter].width(), images[image_counter].height()));
    //painter.fillRect(QRect(0,0,800,600), QColor(0,0,0,255));
    painter.end();
}

void FlickerImage::loadImages()
{
    busy = true;
    images.clear();

    /*images.append(QImage(QDir::toNativeSeparators(QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"1.jpg")));
    images.append(QImage(QDir::toNativeSeparators(QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"2.jpg")));
    images.append(QImage(QDir::toNativeSeparators(QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"3.jpg")));
    images.append(QImage(QDir::toNativeSeparators(QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"4.jpg")));*/

    images.append(QImage(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"1.jpg")));
    images.append(QImage(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"2.jpg")));
    images.append(QImage(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"3.jpg")));
    images.append(QImage(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"4.jpg")));

    qDebug() << "Before output file";
    QFile output("image.log");

    if(!output.open(QIODevice::WriteOnly | QIODevice::Text | QIODevice::Append))
    {
        qDebug() << "Could not open output";
    }

    else
    {
        qDebug() << "image.log could be opened";
        output.write(QString("hi").toAscii());
        output.write(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"1.jpg\n").toAscii());
        output.write((QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"2.jpg\n")).toAscii());
        output.write((QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"3.jpg\n")).toAscii());
        output.write((QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"4.jpg\n")).toAscii());
        output.close();
    }

    busy = false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:59:42.257

这可能无法解决问题，但是将图像添加到列表中的方式确实伤害了我的眼睛 ;) 而不是这个：

```
images.append(QImage(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"1.jpg")));
images.append(QImage(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"2.jpg")));
images.append(QImage(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"3.jpg")));
images.append(QImage(QDir::toNativeSeparators(QDir::currentPath() + QDir::separator () + QString("pics") + QDir::separator () + QString::number(counter) + QDir::separator()+"4.jpg"))); 
```

尝试这样的事情：

```
for (int i = 0; i < 4; ++i)
{
    QString imagePath = QString("%1/pics/%2/%3.jpg")
        .arg(qApp->applicationDirPath()).arg(counter).arg(i);
    if (QFileInfo::exists(imagePath))
    {
        QImage image(imagePath);
        if (image.isNull())
            qDebug() << "ERROR, image load failed: " << imagePath;
        else
            images.append(image);
    }
    else
    {
        qDebug() << "ERROR, cannot find file: " << imagePath;
    }
} 
```

请注意，您确实不需要将文件路径转换为使用本机分隔符。只有在向用户显示路径*时才*需要这样做。我知道的所有操作系统（包括 Windows）都可以正常使用斜杠 /。

您也在使用`QDir::currentPath()`. 我的猜测是您真正想要的是应用程序的目录，它不需要与当前目录相同。改为使用`qApp->applicationDirPath()`。

做一些错误检查通常不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T02:26:57.940

jpeg图像有同样的问题，你需要使用`QCoreApplication::setLibraryPaths(QStringList &)`并放置所有位于`QtSDK\Desktop\Qt\4.7.4\mingw\plugins` 其他计算机的插件（他会在指定的位置寻找它们），你可以看到你设置了什么`QCoreApplication::libraryPaths()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:47:34.553

好了朋友们，

问题所在的缺失插件。但进入同一目录或在 ./plugins/ 目录中不起作用。我刚刚将文件与 FULL QT SDK 捆绑在一起（是的 1.65 GB Monster 用于 512 KB 应用程序），其中版本匹配（4.82），因为它应该是相同的（或者本地 sdk 应该相同或低于构建 sdk，但在这种情况下使用相同的主编号 4)。

# azure - Azure：工人角色通过“回收”循环

> ID：11122564
> 
> 赞同：9
> 
> 时间：2012-06-20T15:09:42.150
> 
> 标签：azure, azure-storage, azure-table-storage, azure-blob-storage, azure-worker-roles

我目前正在开发一个使用模拟器资源在本地 100% 工作的 Azure 项目。我现在正在尝试部署一个辅助角色，但我遇到了一个我不确定如何排除故障的问题。

在我的 Azure 门户中部署辅助角色后，这两个实例会不断循环通过“回收”。

我可以尝试 RDP 进入角色，但在连接关闭之前我只有大约一分钟的时间环顾四周，我假设是由于回收。

经过一番搜索，这似乎不是一个超级常见的问题。我忽略了一些可能导致此问题的微不足道的事情吗？您将如何解决此问题？感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T23:41:11.467

如果缺少参考，您可以通过以下方式解决此问题：

解压缩您的 CSPKG 文件，然后再次解压缩 .CSSX 文件（只需将 CSSX 重命名为 zip）并匹配所有引用和静态内容都在那里。这样您就可以匹配 VM 上的内容。同样在 RDP 的 2 分钟窗口中，尝试查找应用程序事件日志中的异常并获取它，因为这将是找到根本原因的关键。

如果您可以在事件日志中看到异常并查找异常，您肯定可以找到它的生成位置。您还可以使用 Intellitrace，这可能需要您重新部署应用程序。

还有一些方法是复制 WinDBG 并锁定到您可以调试它的特定进程。我不确定您想尝试多少，但只需将 WinDBG 复制到 VM 并使用它就足够了（不确定您对 WinDBG 有多少经验以及您想花多少时间。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-25T05:47:19.130

也被这个角色回收问题困扰了无数次。[以下是调试持久角色回收的步骤顺序](http://blogs.msdn.com/b/kwill/archive/2013/10/03/troubleshooting-scenario-7-role-recycling.aspx)：

# 调试 Azure 角色回收

1.  启用对您的角色的远程访问 - **RDP 登录**
2.  检查**eventvwr.msc**（Windows 日志 -> 应用程序、应用程序和服务日志 -> Windows Azure）
3.  查看Azure**文本文件**日志`C:\logs``c:\resources`
4.  查看卷中的**自定义日志**`E:`或`F:`任何自定义角色启动日志记录
5.  运行[**AzureTools**](http://blogs.msdn.com/b/kwill/archive/2013/08/26/azuretools-the-diagnostic-utility-used-by-the-windows-azure-developer-support-team.aspx)并附加到启动进程（下载**WinDBG**，使用 Utils->Attach Debugger，选择进程 - WaWorkerHost/WaIISHost 等），用于`G`继续并观察无法加载的程序集的调试器输出。

    ### 通过 Powershell 安装 Azure 调试工具

    > PS> md c:\工具；导入模块位传输；Start-BitsTransfer [http://dsazure.blob.core.windows.net/azuretools/AzureTools.exe](http://dsazure.blob.core.windows.net/azuretools/AzureTools.exe) c:\tools\AzureTools.exe; c:\工具\AzureTools.exe

如果以上所有项目都失败 - 尝试使用**AzureTools**宝库中的其他工具 - 例如**fusion logging**等，上面的这种方法将起作用！

## WinDBG 示例输出 - 找不到程序集 (WaIISHost)

[![在此处输入图像描述](../Images/bb9c4d0bbdbc2a12cc156725ef486a5a.png)](https://i.stack.imgur.com/NLjUK.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T06:12:23.167

只是一个建议：还要检查可安装（如果有）和您使用的任何其他参考是 64 位的。Azure VM 具有 64 位操作系统。由于 32/64 位问题，一旦我遇到这种问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T17:07:08.250

从上面的Avkash：

是的。这意味着您的 Worker Role 代码中的某些问题导致您的 Worker Role Host Process 崩溃。如果您查看故障堆栈，您必须看到生成此故障的代码中的函数或链接。如果您需要帮助，请向 Windows Azure 支持团队打开免费的 Azure 支持事件，他们会为您提供帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T15:43:45.407

最可能的原因是缺少程序集。捕获此问题的一种策略是将任何启动处理包装在主 try/catch 中，手动将错误记录到 Azure 存储。

如果您添加了任何引用，请检查以确保它们设置为 copylocal=true 并且您的服务包中包含的任何外部资产也设置为包含。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-25T19:19:30.110

如果问题是由启动批处理文件引起的，我已通过编辑实例上的批处理文件以在开头包含“exit /b 0”来停止循环。这将告诉 Azure 启动成功，然后您就有了诊断问题所需的所有时间，而不会杀死 VM。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T15:46:33.473

您的工人角色是否退出了他们的工作循环？本地回收非常快，您可能不会注意到它，但云中的启动时间可能很长。

# php - 在扩展类中“重建”父对象 - 这是可怕的代码吗？

> ID：11122566
> 
> 赞同：2
> 
> 时间：2012-06-20T15:09:44.693
> 
> 标签：php, oop

我有一个 PlaylistTrack 类，我想扩展 Song 类。

当我构建 Song 时，我会传入一系列数据，如艺术家、标题等。

当我构建 PlaylistTrack 时，我希望它具有所有歌曲的方法以及它引入的新方法。

但我*也*想在其构造函数中传递特定的歌曲。

所以我这样做：

```
class Song {

    function __construct( $song_data ) {

        $this->_data = $song_data;
        // etc
    }
} 
```

然后这个。不要射我！

```
class PlaylistTrack extends Song {

    function __construct( $song ) {

        // call the song's constructor again in the context of this class
        // to give access to its methods.
        parent::__construct( $song->_data );

         // other PlaylistTrack-specific material to go here
     }
} 
```

至少可以说，这感觉很奇怪。可以吗？有替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:13:23.990

扩展类时会自动继承构造函数。如果您不打算向现有构造函数添加功能，则不需要对其进行多态化。

如果您确实想为其添加功能，那么您所做的一切都很好。

# c++ - C++，自午夜以来获得毫秒的最快方法

> ID：11122569
> 
> 赞同：5
> 
> 时间：2012-06-20T15:10:12.247
> 
> 标签：c++, time

这是经常运行并且必须快速运行的代码，所以我想就最快的实现得到一些意见。请注意，我实际上需要具有一定精度的完整毫秒分辨率（因此 seconds * 1000 是不够的）。对于这个项目，使用 Boost 是可以的。

编辑：目标平台是 x64_86 CentOS5，也希望能够依赖操作系统时钟，这样我也可以在不连续运行的程序中使用它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T15:53:47.533

C++ 有用于处理时间的 chrono 库：

```
#include <chrono>
#include <iostream>
#include <ctime>

std::chrono::system_clock::duration duration_since_midnight() {
    auto now = std::chrono::system_clock::now();

    time_t tnow = std::chrono::system_clock::to_time_t(now);
    tm *date = std::localtime(&tnow);
    date->tm_hour = 0;
    date->tm_min = 0;
    date->tm_sec = 0;
    auto midnight = std::chrono::system_clock::from_time_t(std::mktime(date));

    return now-midnight;
}

int main()
{
    auto since_midnight = duration_since_midnight();

    auto hours = std::chrono::duration_cast<std::chrono::hours>(since_midnight);
    auto minutes = std::chrono::duration_cast<std::chrono::minutes>(since_midnight - hours);
    auto seconds = std::chrono::duration_cast<std::chrono::seconds>(since_midnight - hours - minutes);
    auto milliseconds = std::chrono::duration_cast<std::chrono::milliseconds>(since_midnight - hours - minutes - seconds);
    auto microseconds = std::chrono::duration_cast<std::chrono::microseconds>(since_midnight - hours - minutes - seconds - milliseconds);
    auto nanoseconds = std::chrono::duration_cast<std::chrono::nanoseconds>(since_midnight - hours - minutes - seconds - milliseconds - microseconds);

    std::cout << hours.count() << "h ";
    std::cout << minutes.count() << "m ";
    std::cout << seconds.count() << "s ";
    std::cout << milliseconds.count() << "ms ";
    std::cout << microseconds.count() << "us ";
    std::cout << nanoseconds.count() << "ns\n";
} 
```

这取决于您的实现，您获得的分辨率究竟是什么。VS 11 beta 声称分辨率为 100ns，虽然我不能说它有多准确。

```
11h 51m 57s 285ms 699us 600ns 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:17:24.270

Microsoft 有一篇文章[“Implement a Continuously Updating, High-Resolution Time Provider for Windows”](http://msdn.microsoft.com/en-us/magazine/cc163996.aspx)详细介绍了如何使用`QueryPerformanceCounter`来获得高分辨率时间。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-06-20T15:15:16.753

例如，我会尝试创建一个计时器来检查每秒的时间。如果到午夜的时间小于 K 秒：

```
while(True)
{
    if (checkTime() >= MIDNIGHT))
    {
        break; 
    }
} 
```

# php - PDO 调试 - 绑定后查看查询？

> ID：11122573
> 
> 赞同：12
> 
> 时间：2012-06-20T15:10:35.147
> 
> 标签：php, mysql, debugging, pdo

> **可能重复：**
> [从 PDO 准备语句中检索（或模拟）完整查询](https://stackoverflow.com/questions/3754530/retrieve-or-simulate-full-query-from-pdo-prepared-statement)

我不知道为什么我的查询返回 0 行。它实现了一些非常动态的搜索功能，以及许多 if/loop 语句等。因此要调试它，我想确切地看到正在发送的字符串到服务器。有没有办法通过 PHP 做到这一点？

有没有办法询问服务器“最后一个查询是什么”，或者告诉 PDO“告诉我你发送了什么”？

我看到一个响应`str_replace`用于手动输入值来代替`:fieldValue`，但这可能是语法问题（或者它可能正在经历不正确的循环等），这种方法没有帮助。

使用`bindValue(":fieldValue", $value);`if 会有所作为。

**编辑**

原来这是一个`if ($var="true") { ...`应该是简单的`if ($var=="true") { ...`。从这个意义上说，我猜 PHP 与 Java 不一样？无论哪种方式，问题仍然存在（因为我经常遇到这种情况）。我不得不使用一系列`echo "You are Here";`来找到这个错误，因为它在技术上是有效的，但不正确。如果我有最后的 SQL 语句，我可能会看到“哦，我的代码添加了`where column = true`，一定是通过了错误的 IF...”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:22:38.747

这是关于 SQL 调试的最常见的神话。“我需要在准备好后查看查询，才能判断是否发生了错误”。事实是，**你没有**，我会告诉你为什么。

准备好查询后，可以将占位符视为**有效的字符串/整数**。你不在乎里面有什么。

此外，如果您正确设置 PDO，您将获得`PDOException`详细的错误详细信息以及错误发生位置的完整回溯，以及从 MySQL 获取错误字符串，这使得语法错误很容易找到.

要启用 PDO 异常并禁用模拟准备：

```
$pdo = new PDO("mysql:host=localhost;dbname=database_name", "user", "password");
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

# php - 使用 QuickBooks PHP DevKit 编辑快速手册上的数据

> ID：11122576
> 
> 赞同：1
> 
> 时间：2012-06-20T15:10:40.933
> 
> 标签：php, quickbooks

我使用 QuickBooks PHP DevKit 通过 Quickbooks Web 连接器工具将我的 Web 应用程序连接到 quickbooks。它在插入数据时效果很好，但是在尝试更新时它给了我这个错误：

0x80040400：QuickBooks 在解析提供的 XML 文本流时发现错误。

此链接显示了可用的 xml 选项：

[http://dev.developer.intuit.com/qbSDK-current/OSR/OnscreenRef/index-QBD.html](http://dev.developer.intuit.com/qbSDK-current/OSR/OnscreenRef/index-QBD.html)

```
$xml = '<?xml version="1.0" encoding="utf-8"?>
    <?qbxml version="2.0"?>
    <QBXML>
        <QBXMLMsgsRq onError="stopOnError">
            <EstimateModRq requestID="' . $requestID . '">
                <EstimateMod>
                    <TxnID>B9-1340134119</TxnID>
                    <EditSequence>1340134119</EditSequence>
                    <CustomerRef>
                        <FullName>cliente prueba</FullName>
                    </CustomerRef>
                    <TxnDate>2009-01-09</TxnDate>
                    <RefNumber>16466</RefNumber>
                    <EstimateLineMod>
                        <TxnLineID>-1</TxnLineID>
                        <ItemRef>
                            <FullName>Sales</FullName>
                        </ItemRef>
                        <Desc>gift certificate</Desc>
                        <Quantity>4</Quantity>
                        <Rate>11.00</Rate>
                    </EstimateLineMod>
                </EstimateMod>
            </EstimateModRq>
        </QBXMLMsgsRq>
    </QBXML>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:30:46.650

如果您参考 QuickBooks OSR（最好是此处的最新版本：http: [//developer.intuit.com/qbsdk-current/common/newosr/index.html](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)），您会注意到 EstimateMod 请求标记如下：

```
EstimateMod (3.0) 
```

这意味着在 qbXML 版本**3.0**之前不支持 EstimateMod （如果您需要更多详细信息，请参阅 QuickBooks SDK .PDF 文档中有关 qbXML 版本的更多信息）。

您正在使用 qbXML **2.0 版**：

```
<?qbxml version="2.0"?> 
```

将其更改为更高版本（6.0 或更高版本是支持的最佳版本 - 6.0 提供与大多数 QuickBooks 版本的最广泛兼容性），您应该一切就绪。

# scala - 从 Seq of tuples 中提取的 Scala

> ID：11122579
> 
> 赞同：2
> 
> 时间：2012-06-20T15:10:50.153
> 
> 标签：scala

这是`seq`Scala`tuples`中的一个

```
val t = Seq((1,2,3),(4,5,6)) 
```

我喜欢将每个元组的第一个元素提取到自己的序列中，即

```
Seq(1,4) 
```

我如何在 Scala 中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T15:13:12.730

只需使用`map`每个元组并将其转换为其第一个元素：

```
t.map(x => x._1) 
```

或更短：

```
t.map(_._1) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-01T10:11:58.433

提取多列的一般形式：

```
def extractColumns3[T1, T2, T3](t: Seq[(T1, T2, T3)]): (Seq[T1],   Seq[T2], Seq[T3]) =
t.foldLeft((Seq.empty[T1], Seq.empty[T2], Seq.empty[T3])) { (columns, row) ⇒
  (columns._1 :+ row._1, columns._2 :+ row._2, columns._3 :+ row._3)
} 
```

# python - 如何测试打印语句？

> ID：11122582
> 
> 赞同：25
> 
> 时间：2012-06-20T15:10:56.847
> 
> 标签：python, unit-testing, stdout

您想`unittest`为这样的函数编写-cases：

```
def test_me(a):
    for b in c:
        print do_something(a,b) 
```

起初我想只收集`do_something`一个字符串中的输出然后返回它，一起打印和测试整个输出。但这并不总是很方便，因为这样的循环可能会导致您的缓冲区字符串变得非常大，具体取决于具体情况。那么，当输出被打印但没有返回时，你能做些什么来测试输出呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T15:18:29.150

[`print`](http://docs.python.org/reference/simple_stmts.html#print)打印到[`sys.stdout`](http://docs.python.org/library/sys.html#sys.stdout)，您可以根据需要将其重新分配给您自己的对象。您的对象唯一需要的是一个`write`接受单个字符串参数的函数。

从 Python 2.6 开始，您还可以通过添加到脚本顶部来更改`print`为函数而不是语言构造。`from __future__ import print_function`这样你就可以`print`用你自己的函数覆盖。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-07T11:57:25.320

`unittest.mock`在 Python 3中，内置`print`函数很容易使用：

```
from unittest.mock import patch, call

@patch('builtins.print')
def test_print(mocked_print):
    print('foo')
    print()

    assert mocked_print.mock_calls == [call('foo'), call()] 
```

# javascript - 对 Backbone.js 分页器感到困惑

> ID：11122583
> 
> 赞同：0
> 
> 时间：2012-06-20T15:10:59.500
> 
> 标签：javascript, jquery, backbone.js, pagination, underscore.js

我正在尝试使用[主干.js 分页器插件](https://github.com/addyosmani/backbone.paginator)来引入分页`requestPager`。

**问题：**设置`collection`which extends后`Backbone.Paginator.requestPager`，我刷新了网页，javascript控制台抛出了错误：

`Uncaught TypeError: Object function (a){return new m(a)} has no method 'result' backbone.paginator.js:678`

我对骨干很陌生，不确定出了什么问题。是因为我使用`fetch()`了，出现在下面的错误截图中吗？我还注意到没有`GET`请求发送到后端。发生了什么，我应该如何解决这个问题？谢谢！

**JS代码**

```
// Collection

window.ListingCollection = Backbone.Paginator.requestPager.extend({
    model: Listing,

    paginator_core: {
        type: 'GET',
        dataType: 'jsonp',
        url: 'api/listings'
    },

    paginator_ui: {
        firstPage: 0,
        currentPage: 0,
        perPage: 10,
        totalPages: 10
    },

    server_api: {
        '$filter': '',
        '$per_page': function() { return this.perPage; },
        '$current_row': function() { return this.currentPage * this.perPage; },
        '$order_by': 'listing_id'
    },

    parse: function(response){
        this.totalPages = Math.floor(response.total_rows / this.perPage);
    }

}); 
```

**JS代码**

```
// Router
var AppRouter = Backbone.Router.extend({
    routes: {
        '': 'listings',
        'listings': 'listings'
    },

    listings: function() {
        var self = this;

        // Load initial search results
        this.listingList = new ListingCollection();
        this.listingList.fetch({
            success: function() {
                self.listingListView = new ListingListView({ model: self.listingList });
                $('#listing_list table').append(self.listingListView.render().el);
            }
        });
        this.listingFilterView = new ListingFilterView();
    }
}); 
```

**Javascript 控制台中的错误截图** ![在此处输入图像描述](../Images/8ed8250f9ee608427bdb28e842e3f82a.png)

![在此处输入图像描述](../Images/d2e0a43a373585425a56fec6bbdfb698.png)

**JS 包括**

```
<!-- JavaScript -->
<script src="assets/js/lib/jquery-1.7.1.min.js"></script>
<script src="assets/js/lib/underscore-min.js"></script>
<script src="assets/js/lib/backbone-min.js"></script>
<script src="assets/js/lib/backbone.paginator.js"></script>
<script src="assets/js/lib/bootstrap.js"></script>
<script src="assets/js/lib/bootstrap-datepicker.js"></script>
<script src="assets/js/app.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:42:48.110

您可能正在使用旧版本的下划线。我使用 1.3.1，它没有`result()`方法。下载他们的新生产[版本 1.3.3](http://underscorejs.org/#) - 它有`result()`.

# sharepoint - Powershell 错误“术语 'Get-SPWeb' 未被识别为 cmdlet、函数的名称...”

> ID：11122585
> 
> 赞同：40
> 
> 时间：2012-06-20T15:11:04.460
> 
> 标签：sharepoint, powershell, powershell-2.0

我只是键入以下内容来尝试获取我的 SharePoint 网站：

```
$spWeb = Get-SPWeb -Identity "http://nycs00058260/sites/usitp" 
```

它给了我以下错误

> 术语“Get-SPWeb”未被识别为 cmdlet、函数、脚本的名称...

网址是正确的，为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-20T15:16:04.877

我认为这需要从 Management Shell 而不是控制台运行，听起来模块没有被导入 Powershell 控制台。您可以通过运行添加模块：

```
Add-PSSnapin Microsoft.Sharepoint.Powershell 
```

在 Powershell 控制台中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-12T20:58:39.010

以管理员身份从 SharePoint 2010 命令行管理程序运行此脚本。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-22T06:56:27.633

而不是`Windows PowerShell`，在开始菜单中找到名为 的项目`SharePoint 2013 Management Shell`：

[![在此处输入图像描述](../Images/4efd85ab47ff1fcd968ae1f86d94ddd0.png)](https://i.stack.imgur.com/BvZUB.png)

# c# - C# 从第二个线程绘制位图

> ID：11122588
> 
> 赞同：3
> 
> 时间：2012-06-20T15:11:18.317
> 
> 标签：c#, multithreading, picturebox

我正在尝试绘制 a `public static Bitmap`，这是我的图像`PictureBox`- `Control`。绘图在同一线程中工作正常，但是当我启动第二个线程时没有任何反应，没有绘制任何内容。有谁知道解决方案？

绘制代码：

```
Graphics g = Graphics.FromImage(screen);  
g.Clear(Color.Black);Brushes.White);  
g.Dispose(); 
```

//编辑：
请原谅。Bitmap 存储在另一个名为 Form1 的类中。线程类是 DrawHelper。为了访问位图，我给 DrawHelper 提供了 Form1 的引用（从 Form1 调用）。
我希望这有帮助。我可以发布所有代码，但是会有很多不必要的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:31:02.093

您的位图绑定到窗体窗口消息循环。如果您尝试访问类似的内容，则必须使用 Invoke 或 BeginInvoke。

这里：http: [//msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

**编辑。**阅读评论后，我可以告诉你你有一个错误，而位图只是没有得到你认为它得到的信息。使用线程本身没有任何关系......

如果你真的需要解决它，你应该创建带有 2 个线程、一个按钮和一个位图的简单原型，然后尝试从线程 #2 中绘制任何东西，看看什么不起作用。如果即使这样也行不通 - 在此处发布代码。（请不要复制/粘贴整个应用程序 - 保持重点）

**你也**应该把 try/catch 放在里面 using。位图的行为方式可能只是因为使用中存在不可见的异常。

# c# - 插入了数据库内容的 Web 应用程序用户定义内容

> ID：11122592
> 
> 赞同：0
> 
> 时间：2012-06-20T15:11:30.917
> 
> 标签：c#, asp.net, webforms

我一直在尝试研究执行以下操作的最佳方法：

将用户定义的基于文本的表达式保存到数据库中，该数据库概述了要在页面上显示的内容。

例如：“此人的就业状况是 [employment] 雇员，每周 [hours] 小时。”

其中 [employment]、[hours] 对应于数据库中的键/值

例子：

```
TABLE
ID    KEY             VALUE
1     employment      casual
1     hours           10
2     employment      parttime
2     hours           25 
```

在运行时，此用户定义表达式将用于显示的页面可以访问人员 ID，并且需要从数据库中收集相关详细信息，解析并用检索到的数据替换 [employment]、[hours] 占位符。

例如：“此人的就业状况是临时雇员，每周工作 10 小时。

我正在寻找的解决方案需要足够动态，以处理用户在任意数量的占位符中和周围输入任何静态文本。

* * *

**编辑**以澄清我的意思：

将有一个设置区域，用户可以在其中输入他们希望在屏幕上显示的表达式，该表达式可以是包含数据库中任何“键”值的任何文本。不同的用户将看到他们自己定义的表达式。

另一个例子：“员工工作 [hours] hrs, [employment]”

将显示为：“员工工作 10 小时，休闲”

* * *

我的搜索要么不是很好，要么就是不太了解结果。我找到了很多关于 CustomExpressionBuilder、Lambda 表达式、表达式树等的信息，但我很困惑这些信息是否适合我需要做的事情。也许我只是还没有到我的理解是新的！

如果我能得到这个工作，我也希望能够添加一些简单的三元类型功能和/或数学功能。似乎有一个名为[NCalc](http://ncalc.codeplex.com/)的库可以使这变得非常简单，但是我看不到我最初需要的文本替换要求的示例，或者立即看到一种对其进行调整以使其工作的方法。

感谢您的任何建议，我非常乐意进一步研究，但需要朝着正确的方向努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:26:20.057

从你的问题来看，你在这个问题上的进展有点模糊，即你是否已经能够从数据库中检索所有值。

如果您只是想像上面提到的那样构建一个字符串表达式，一旦您有了上面的值，我可能会使用 String.Format 或字符串生成器。

例如，如果我们假设您有数据库中的值并且它们包含在 Person 类的属性中（仅作为示例），您可以编写以下内容：

```
var message = String.Format("The employment status of this person is a {0} employee, {1} hrs a week.", person.Employment, person.Hours); 
```

就像我说的那样，您的问题到底在哪里有点模糊，但是如果您只是想在获得值后构建一个特定的表达式，那么上面的方法就可以了。一旦您从数据库中获取了 person.Employment 和 person.Hours 参数，就可以将它们替换为适当的值。

# linux - 如何在 Linux 中创建回显设备？

> ID：11122594
> 
> 赞同：1
> 
> 时间：2012-06-20T15:11:38.233
> 
> 标签：linux, bash, sh, hp-ux

我正在将这个 bash 脚本从 HP-UX 移植到 Linux。似乎有一个命令

```
remsh opcfdp01 "find  ${TOOLS_DIR} -user ${ADMIN_USER} -exec chmod a+rwx {} \;"  < /dev/echo > /dev/null 2>&1 
```

设备文件`/dev/echo`似乎在 HP-UX 上打印输出；但是，Linux 中似乎不存在这样的文件。

我想知道如何`/dev/echo`在 Linux 中创建一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:50:24.983

该**[`remsh`](http://www.freebsd.org/cgi/man.cgi?query=remsh&manpath=HP-UX+11.22)**命令类似于“rsh”。`find`它正在远程主机“opcfdp01”上执行命令。您发布的命令行`remsh`已从 获取其标准输入`/dev/echo`，我相信您不应该要求它。

据我所知，该`/dev/echo`设备仅**[`strvf`](http://nixdoc.net/man-pages/hp-ux/man1/strvf.1m.html)**在 HP/UX 中使用。

在[openss7.org上也对此进行了一些讨论](http://www.openss7.org/man2html?4+echo)

您可能能够`< /dev/echo`完全删除命令行的一部分，特别是如果您不知道您是否正在使用`strvf`并且您正在将脚本更改为使用`ssh`而不是`remsh`.

# svn - SVN：忽略但不删除文件夹

> ID：11122596
> 
> 赞同：13
> 
> 时间：2012-06-20T15:11:40.683
> 
> 标签：svn, tortoisesvn

我有一个垃圾文件夹，我的应用程序在其中放置临时文件。我不想提交它们（当然），但该文件夹必须存在，否则应用程序将崩溃。

如果我使用标准 TortoiseSVN 忽略功能，它会将“svn:ignore junk_folder”属性添加到父文件夹，但它也会删除无法发生的“junk_folder”。

如果我只恢复删除操作（由 TortoiseSVN 执行）但保留添加“svn：ignore”属性，则此解决方案将失败。TortoiseSVN 会将“junk_folder”中的文件报告为非版本，我想避免这种情况。

是否有任何解决方案可以让我完全忽略 SVN 中的特定文件夹（所以无论如何，将在其中放入什么，不会被报告为未版本化，也不会被自动提交）而不删除它？

**编辑**：*我忘了补充说我说的是已经版本化的文件夹。看来，如果您忽略（svn:ignore 或 TortoiseSVN 中的正确选项）一个尚未版本化的文件夹（在第一次提交之前），那么一切正常。但是，如果您在存储库中已经存在的文件夹上执行此操作，TortoiseSVN 会将其标记为已删除，并在下一次提交时将其从两个存储库（而不是本地工作副本）中删除。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T15:20:58.750

我相信您可以在该文件夹中为“*”添加一个 svn:ignore，而不是在“junk_folder”本身（换句话说，忽略“junk_folder/*”）。

我不知道 TortoiseSVN 是否有一个按钮，但从命令行你可以使用以下命令：

> svn propset svn:ignore "*" junk_folder

（至少我认为这是正确的语法，在我的脑海中。如果有人认为这是错误的，请纠正我）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T19:07:13.800

我正在使用 Eclipse Subversive 和 Tortoise SVN。

我解决这个问题的方法是使用 Tortoise 的属性对话框（但我认为 Eclipse 具有相同的功能）

如果您在工作副本中右键单击文件夹，例如“tmp”或“缓存”等，您可以简单地添加“svn:ignore”属性并在其中放置一个通配符。您需要使用高级按钮来添加它，因为它不是要添加的属性的快速列表。

我主要在 Joomla 上开发网站，并且经常安装程序或其他组件将文件留在我不想在 repo 中的地方。如前所述，使用“右键单击忽略”方法“忽略”这些文件夹意味着这些文件夹完全从 repo 中排除，这不是您想要的 - 您希望排除这些文件夹的内容，或者有时只是带有一定的延伸。

在从 stackoverflow 获得很多建议后，我今天注册只是为了回答这个问题，所以希望它对某人有所帮助 - 我试图附上屏幕截图但没有足够的代表:(

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T15:19:26.747

我将它用于编译器中间输出文件夹之类的东西，它从未删除任何东西。

为了重新测试这一点，我在我的一个工作副本中发现了一个*未版本控制的目录。*我右键单击该目录，然后导航到“添加到忽略列表”选项。它扩展到目录名称。我选择了目录名称并收到一条弹出消息，指出它已被添加到忽略列表中。检查工作副本状态，父文件夹只有属性修改。没有文件被标记为删除。

[忽略文件和目录](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-ignore.html)

![在此处输入图像描述](../Images/c4e600d1aa8d144c9b9acba0900413aa.png)

**作为旁注**，您还可以在使用“检查修改”和“提交”对话框时隐藏未版本化的文件，并在对话框底部附近有一个复选框。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T19:08:24.233

你是什​​么意思“*如果我使用标准的 TortoiseSVN 忽略功能，它会将`svn:ignore junk_folder`属性添加到父文件夹，但它也会删除`junk_folder`......* ”？

Subversion 不会删除您要求它忽略的文件夹。事实上，这就是整个目的`svn:ignore`：让您拥有一个不在存储库中的文件夹，而没有 Subversion 抱怨它。

这是如何`junk_folder`创建的？是通过您使用的脚本，还是您手动执行？具体什么时候删除？您的意思是当您进行新的结帐时，`junk_folder`不存在，或者 TortoiseSVN 在您将`svn:ignore`属性添加到其父目录后立即将其删除？

如果您需要将该文件夹永久保存在您的存储库中，但它必须保持为空，您可以添加`junk_folder`到存储库，然后创建一个`svn:ignore`设置为`*`. 这将忽略文件夹中的任何内容。

我的建议是确保任何脚本需要`junk_folder`创建它，如果它不存在，而不是将它添加到您的存储库。您可以使用[此预提交挂钩](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)将其保留在您的存储库之外。这将是处理这个问题的最佳方式。没有理由为什么一个名为的空目录`junk_folder`应该在您的存储库中。

# django - 具有两个可能模型之一的外键的 django 模型

> ID：11122597
> 
> 赞同：3
> 
> 时间：2012-06-20T15:11:51.543
> 
> 标签：django, django-models

我有两个相似的模型，但不完全相同。这是我能想到的问题的最佳抽象。

```
class Cat(models.Model):
    name = models.TextField()
    breed = models.TextField()

class Dog(models.Model):
    name = models.TextField()
    color = models.TextField() 
```

现在我需要制作另一个这样的模型。

```
class Pet(models.Model):
    favoriteFood = models.TextField()
    isCat = models.BooleanField()
    animal = models.ForeignKey(?????????) 
```

我的问题是 Pet 模型的 animal 字段将成为 Cat 或 Dog 模型的外键，具体取决于 isCat 的值。我怎样才能做到这一点？

现在，我首先知道这是一个不寻常/尴尬的模式，但我没有参与它的创建，也无法更改它。我只需要支持它。我正在为现有数据库编写这些模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:24:00.120

您应该看到[通用关系](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:24:04.653

[通用关系](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)是一个直接的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-04T20:55:14.363

这个用例的另一个选择是：[django-polymorphic](https://github.com/django-polymorphic/django-polymorphic) :)

# android - LocationListener 没有被杀死

> ID：11122599
> 
> 赞同：0
> 
> 时间：2012-06-20T15:11:54.787
> 
> 标签：android, android-service, android-location

我有一个实现 LocationListener 的前台服务。当服务被杀死时，它会继续得到修复。然而，这就是我在`onDestroy()`

```
@Override
public void onDestroy() {
    Log.e(getPackageName(), "Destroying GPSservice");
    super.onDestroy();
    running = false;
    stopForeground(true);
    locationManager.removeUpdates(EventService.this);
    locationManager = null;
} 
```

有什么我想念的吗？

***编辑***

更多代码。这是在`onCreate()`：

```
 locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    Criteria criteria = new Criteria();
    String bestProvider = locationManager.getBestProvider(criteria, true);

    Location location = locationManager.getLastKnownLocation(bestProvider);
    if (location != null) {
        onLocationChanged(location);
    }
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            3000L, 15.0f, this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:16:06.233

利用

```
locationManager.removeUpdates(Your_Location_Listener_instance); 
```

代替

```
locationManager.removeUpdates(EventService.this); 
```

有关更多信息，请参阅 doc [public void removeUpdates (LocationListener listener)](http://developer.android.com/reference/android/location/LocationManager.html#removeUpdates%28android.location.LocationListener%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:37:59.667

我已经解决了这个问题。事实证明，`MyLocationOverlay`也绑定到 LocationSensorThread，而我从未将其关闭。所以这让 GPS 保持清醒。

# javascript - 使用不同的值和不同的数据大小更新 D3 柱形图

> ID：11122604
> 
> 赞同：1
> 
> 时间：2012-06-20T15:12:06.423
> 
> 标签：javascript, charts, svg, d3.js

### 背景

我正在尝试使用[D3.js](http://d3js.org/)创建一个可重用的图表对象。我已经设置了一个`chart()`可以生成柱形图的函数。在任何列上的`click`事件中，图表将使用新的随机数据数组进行更新，该数组将包含随机数量的数据点（即原始图表可能有 8 列，但更新后可能有 20 列或 4 列） .

### 问题

假设我的原始数据集中有 8 个数据点（因此有 8 列）。当我使用随机数据更新图表时，列会适当地将其高度调整为新值 - 但不会添加新条形。此外，虽然列的宽度会适当调整以适应容器的宽度和新的数据点数量，但如果该数据点数量小于原始集，则原始数据集中的一些列将持续到数据点的数量大于或等于原始数据点的数量。

***我的最终目标是动态添加新数据或动态删除新数据计数范围之外的旧数据。***

我已经创建了一个行为的[jsfiddle](http://jsfiddle.net/mbeasley183/LPtTm/)。您可能需要多次单击这些列才能看到我所描述的行为。此外，我在下面粘贴了我的代码。

提前致谢！

```
function chart(config) {

    // set default options
    var defaultOptions = {
        selector: '#chartZone',
        class: 'chart',
        id: null,
        data: [1,2,6,4, 2, 6, 7, 2],
        type: 'column', 
        width: 200,
        height: 200,
        callback: null,
        interpolate: 'monotone'
    };

    // fill in unspecified settings in the config with the defaults
    var settings = $.extend(defaultOptions, config);

    function my() { // generate chart with this function        

        var w = settings.width,
            h = settings.height,
            barPadding = 3,
            scale = 10,
            max = d3.max(settings.data);        

        var svg = d3.select(settings.selector) // create the main svg container
            .append("svg")
            .attr("width",w)
            .attr("height",h);

        var y = d3.scale.linear().range([h, 0]),
            yAxis = d3.svg.axis().scale(y).ticks(5).orient("left"),
            x = d3.scale.linear().range([w, 0]);

        y.domain([0, max]).nice();
        x.domain([0, settings.data.length - 1]).nice();        

        var rect = svg.selectAll("rect")
          .data(settings.data)
          .enter()
          .append("rect")
          .attr("x", function(d,i) {
            return i * (w / settings.data.length);
          })
          .attr("y", function(d) {
            return h - h * (d / max);
          })
          .attr("width", w / settings.data.length - barPadding)
          .attr("height", function(d) {
            return h * (d / max);
          })
          .attr("fill", "rgb(90,90,90)");

        svg.append("svg:g")
           .attr("class", "y axis")
           .attr("transform", "translate(-4,0)")
           .call(yAxis);        

        svg.on("click", function() {
            var newData = [], maxCap = Math.round(Math.random() * 100);

            for (var i = 0; i < Math.round(Math.random()*100); i++) {
                var newNumber = Math.random() * maxCap;
                newData.push(Math.round(newNumber));                
            }    

            newMax = d3.max(newData);

            y.domain([0, newMax]).nice();

            var t = svg.transition().duration(750);

            t.select(".y.axis").call(yAxis);

            rect.data(newData)
                 .transition().duration(750)
                 .attr("height", function(d) {
                    return h * (d / newMax);
                 })
                 .attr("x", function(d,i) {
                    return i * (w / newData.length);
                 })
                 .attr("width", w / newData.length - barPadding)
                 .attr("y", function(d) {
                    return h - h * (d / newMax);
                 });
            });
        }

    my();

    return my;

}

var myChart = chart(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:28:19.977

这里实际上发生了几件事 - 正如您所指出的，新数据范围之外的数据不会被删除，而且现有数据范围之外的新数据也不会被添加。这一切都与您在代码中修改的选择有关 - 您的更新函数应该使用`enter()`和`exit()`选择来处理这些 - 请参阅[Thinking with Joins](http://bost.ocks.org/mike/join/)。

这是一个更新的小提琴：http: [//jsfiddle.net/LPtTm/11/](http://jsfiddle.net/LPtTm/11/)

# ios - 在动画期间显示 uiImageView 的 y 值

> ID：11122605
> 
> 赞同：0
> 
> 时间：2012-06-20T15:12:07.677
> 
> 标签：ios, animation, uiimageview

我有以下代码：

```
 NSString *yValue; 

yValue=[[NSString alloc] initWithFormat:@"%1.2f" , imageView.center.y];

CGRect labelFrame = CGRectMake( 10, 100, 200, 50 );
UILabel* label5 = [[UILabel alloc] initWithFrame: labelFrame];
[label5 setBackgroundColor:[UIColor blackColor]];
[label5 setText: yValue];
[label5 setTextColor: [UIColor orangeColor]];
  [self.view addSubview: label5]; 
```

这正确显示了 UIimageView 的 y 值，但问题是它只显示了结束 y 值。

当一个人轻弹 UIImageView 我使用动画它：

```
 [UIView animateWithDuration:2 delay:0 options:UIViewAnimationOptionCurveEaseOut        animations:^{ recognizer.view.center = finalPoint; } 
```

我想要的是 label5 在动画期间而不是之后显示 imageView 的 y 值。是否有可能做到这一点？

# javascript - 为什么除了 `goog.inherits()` 之外还需要`goog.base(this)`？

> ID：11122608
> 
> 赞同：5
> 
> 时间：2012-06-20T15:12:13.977
> 
> 标签：javascript, inheritance, prototypal-inheritance, google-closure-library

在这个涉及构造函数的 Google Closure javascript 代码片段中，为什么`goog.base(this);`需要？还没有`Foo`从 Disposable with 继承`goog.inherits(foo, goog.Disposable);`？

```
goog.provide('Foo');

/**
 * @constructor
 * @extends {goog.Disposable}
 */
Foo = function() {
  goog.base(this);
}     
goog.inherits(foo, goog.Disposable);

foo.prototype.doSomething = function(){
  ...
}

foo.prototype.disposeInternal = function(){
  ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T20:13:26.363

## [goog.inherits(childConstructor, parentConstructor)](https://github.com/google/closure-library/blob/master/closure/goog/base.js#L2181)

`goog.inherits()`建立从子构造函数到父构造函数的*原型链。*

```
/**
 * Inherit the prototype methods from one constructor into another.
 * @param {Function} childCtor Child class.
 * @param {Function} parentCtor Parent class.
 */
goog.inherits = function(childCtor, parentCtor) {
  /** @constructor */
  function tempCtor() {};
  tempCtor.prototype = parentCtor.prototype;
  childCtor.superClass_ = parentCtor.prototype;
  childCtor.prototype = new tempCtor();
  /** @override */
  childCtor.prototype.constructor = childCtor;
}; 
```

除了原型属性之外，构造函数可能有“自己的”属性（即添加到的特定于实例的属性`this`）。由于`goog.inherits()` 不调用父构造函数，因此不会将自己的属性复制到子构造函数，并且不会执行父构造函数中的任何初始化代码。由于这些原因，标准模式是[链接构造函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call#Using_call_to_chain_constructors_for_an_object)，如下例所示。

```
/**
 * @param {string} name The parent's name.
 * @constructor
 */
var Parent = function(name) {
  /**
   * @type {string}
   * @private
   */
  this.name_ = name;
}

/**
 * @param {string} name The child's name.
 * @constructor
 * @extends {Parent}
 */
var Child = function(name) {
  Parent.call(this, name);
}
goog.inherits(Child, Parent); 
```

## [goog.base(self, opt_methodName, var_args)](https://github.com/google/closure-library/blob/master/closure/goog/base.js#L2239)

`goog.base()`是用于调用父方法的辅助函数，因此您无需显式使用[call()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)或[apply()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Apply)。

> 如果 [goog.base()] 从构造函数中调用，那么它会使用参数 1-N 调用超类构造函数。
> 
> 如果这是从原型方法调用的，那么您必须将方法的名称作为第二个参数传递给该函数。如果不这样做，您将收到运行时错误。这使用参数 2-N 调用超类的方法。
> 
> 此函数仅在您用于`goog.inherits`表示类之间的继承关系时才有效。

在闭包代码中，通常使用链接构造函数`goog.base()`而不是显式调用父构造函数。

```
/**
 * @param {string} name The child's name.
 * @constructor
 * @extends {Parent}
 */
var Child = function(name) {
  goog.base(this, name);
}
goog.inherits(Child, Parent); 
```

# 延伸阅读

*   [*Michael Bolin*的 JavaScript 中的继承模式**](http://bolinfest.com/javascript/inheritance.php)
**   [*Michael Bolin*对 goog.base() 的检查**](http://bolinfest.com/essays/googbase.html)**   [*关闭：*迈克尔·博林的权威指南](https://rads.stackoverflow.com/amzn/click/com/1449381871)*   [*Stoyan Stefanov 的*JavaScript 模式**](https://rads.stackoverflow.com/amzn/click/com/0596806752)*（参见第 6 章：“代码重用模式”，详细分析用于实现的模式`goog.inherits()`-*经典模式 #5--A Temporary Constructor*）***

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T01:21:00.003

你可以看到

```
Foo = function() {
  goog.base(this); //call parent constructor
}     
goog.inherits(foo, goog.Disposable); 
```

作为：

```
public class Foo extends Disposable(){
  public Foo(){
    super(); // call parent constructor
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:15:55.630

在 JavaScript 中，`this`完全取决于函数的*调用*方式，而不是定义的位置（就像在 Java、C# 和 C++ 中一样）。因此，要`this` *在*调用中`goog.Disposable`成为`this`你调用它的地方，你必须使用`.call`or `.apply`。否则，如果您刚刚调用`goog.Disposable()`，则调用范围内`this`将是`goog`。

基本上，有两种方法可以`this`为您调用的函数进行设置：

1.  使用`obj.func()`或`obj["func"]()`表示法——例如，将调用作为您从对象中检索属性的同一整体表达式的一部分。这告诉引擎在调用中，您要`this`引用`obj`.

2.  通过提供要用作第一个参数的对象来使用`call`或`apply`更明确地说明它。和`this`之间的唯一区别是您如何提供其他参数：使用，您将它们作为离散参数提供，例如使用set to和参数、和的调用。使用，您将参数作为类似数组的第二个参数提供：（注意and ；例如`call``apply``call``foo.call(obj, 1, 2, 3)``foo``this``obj``1``2``3``apply``foo.apply(obj, [1, 2, 3]);``[``]``var a = [1, 2, 3]; foo.call(obj, a);`

更多探索：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)**

# playframework - Linode 512 和玩！框架

> ID：11122610
> 
> 赞同：1
> 
> 时间：2012-06-20T15:12:24.817
> 
> 标签：playframework, playframework-1.x, linode

我是一个菜鸟，我正在寻找有关如何在 Linode 512 上运行我的游戏框架的帮助。我使用的是 debian 映像。我的问题是我是否可以安装 java 然后玩！框架并像那样运行它，还是我需要任何前端服务器来充当代理。

对不起这个noobish问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:56:07.710

Play 框架是一个完整的堆栈。您可以在没有任何前端服务器充当代理的情况下运行它。但是，如果你也想拥有 SSL（虽然 Play 有 SSL 支持，但建议使用完整的 HTTP 服务器来处理），或者你想运行多个出现在同一个端口上的 Play 应用程序，那么你需要一个 HTTP服务器在前面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:36:53.553

在 Linode 中部署播放框架的简单步骤。

1.  购买自己的 Linode（我有 512）
2.  通过 ssh 连接到您的 linode
3.  做一些基本的事情（比如设置用户、ssh、主机名、iptables 等）
4.  使用 (wget) 下载您喜欢的播放框架版本
5.  下载您喜欢的数据库并进行设置
6.  运行游戏！框架：

> 播放开始我的应用程序

或者

> 玩运行 MyApplication

通过这一步你有一个正在运行的应用程序。享受吧！

如果您需要更高级的东西（如 SSL、负载平衡和多实例），请尝试使用 nginx 等前端服务器并进行适当的配置

我希望这会对某人有所帮助；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T01:52:06.900

如果您需要支持从应用程序到其他端口或域的 AJAX 调用 (XHR)，并且您不想使用 CORS 来处理浏览器的 SOP（不要使用 CORS - 它会给您带来问题接受会话 cookie），那么您将希望在 Linode 上的播放应用程序前面使用 apache 作为反向代理。这也可能是以后廉价负载平衡的一种形式——但这种配置比简单的反向代理更复杂。

我有一个播放应用程序和一个 GWT GUI，并且正在使用 apache 反向代理来允许我对 Play RESTful Web 服务的 GWT 请求通过 PLAY_SESSION cookie 进行正确身份验证。这一切都很好。

# matlab - xml2struct 无法访问元素

> ID：11122613
> 
> 赞同：1
> 
> 时间：2012-06-20T15:12:47.127
> 
> 标签：matlab

我尝试使用这个：

[xml2结构](http://www.mathworks.com/matlabcentral/fileexchange/28518-xml2struct)

当我使用这个 xml 时：

```
<XMLname attrib1="Some value">
    <Element>Some text</Element>
    <DifferentElement attrib2="2">Some more text</DifferentElement>
    <DifferentElement attrib3="2" attrib4="1">Even more text</DifferentElement>
</XMLname> 
```

我可以创建一个结构：

```
test = xml2struct('C:\bla\bla.xml'); 
```

（用类（测试）测试它）

它看起来像这样：

测试 =

```
 Name: 'XMLname'
Attributes: [1x1 struct]
      Data: ''
  Children: [1x7 struct] 
```

但我无法访问：

```
test.XMLname.Element.Text 
```

我得到：

？？？引用不存在的字段“XMLname”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:47:51.223

当我查看您的问题时，我看到了这样的结构

```
test =

      Name: 'XMLname'
Attributes: [1x1 struct]
      Data: ''
  Children: [1x7 struct] 
```

并尝试读取结构中不存在的组件

```
test.XMLname.Element.Text 
```

也就是说结构`test`没有名为的组件`XMLname`。

我错过了一些明显的东西还是你？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:41:07.547

刚刚在 R2010b 上试了一下，效果很好

```
>> data=xml2struct('bla.xml')
data = 
    XMLname: [1x1 struct]

>> data.XMLname
ans = 
             Element: [1x1 struct]
    DifferentElement: {[1x1 struct]  [1x1 struct]}
          Attributes: [1x1 struct] 
```

您的 matlab 路径上是否有可能有旧版本的 xml2struct？确保`which xml2struct`为您提供您期望的路径

# call - 使用 Lync 呼叫特定联系人终结点

> ID：11122614
> 
> 赞同：0
> 
> 时间：2012-06-20T15:12:50.110
> 
> 标签：call, contact, lync, endpoints

我正在尝试开发一个 Lync 应用程序，该应用程序允许用户选择他们想要呼叫的联系人端点。例如，如果用户 A 列出了两部电话，那么用户 B 可以在这两个选项之间进行选择，然后拨打他喜欢的电话尝试与他们联系。我知道使用常规 Lync 客户端（未抑制）这似乎是可能的，但我不确定如何在 UISuppression 模式下以编程方式完成它。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:26:04.603

我可能会将您的问题误认为是不同的东西……但这不仅仅是调用 sip uri 和调用一个或多个 tel uris 之间的区别。

所以......在 Lync 客户端中，人们可以“呼叫 Lync”我，这将开始呼叫我的 sip uri，或者他们可以查看我的工作和移动号码，然后拨打其中任何一个电话，然后他们会拨打tel uri 电话。

如果我在我的移动设备上登录 Lync（创建两个端点），那么其他人仍然只能看到一个“呼叫 Lync”我的选项，这取决于我自己的设置是否同时响铃或转发响铃，或其他。

您可以从他们的`contact`对象中获取联系人 tel URI 详细信息，并像拨打 sip uri 呼叫一样拨打电话，但是不要拨打电话给`sip:user@domain.com`您使用`tel:+4412345654321`等。

# apache - 全局定义部分虚拟主机定义以减少冗余

> ID：11122616
> 
> 赞同：0
> 
> 时间：2012-06-20T15:12:55.160
> 
> 标签：apache, virtualhost

我已经设置了一个 apache 服务器，这个 apache 服务器指向一堆虚拟主机。

虚拟主机的定义如下，

```
<VirtualHost *:80>
        ServerName <url>

        RewriteEngine on
        ReWriteCond %{SERVER_PORT} !^443$
        RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L]

        # Enable client-side caching of resources
        ExpiresActive On
        ExpiresByType image/png "now plus 48 hours"
        ExpiresByType image/jpeg "now plus 48 hours"
        ExpiresByType image/gif "now plus 48 hours"
        ExpiresByType application/javascript "now plus 48 hours"
        ExpiresByType application/x-javascript "now plus 48 hours"
        ExpiresByType text/javascript "now plus 48 hours"
        ExpiresByType text/css "now plus 48 hours"

</VirtualHost>

.
.
.

<VirtualHost *:80>
        ServerName <url>

        RewriteEngine on
        ReWriteCond %{SERVER_PORT} !^443$
        RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L]

        # Enable client-side caching of resources
        ExpiresActive On
        ExpiresByType image/png "now plus 48 hours"
        ExpiresByType image/jpeg "now plus 48 hours"
        ExpiresByType image/gif "now plus 48 hours"
        ExpiresByType application/javascript "now plus 48 hours"
        ExpiresByType application/x-javascript "now plus 48 hours"
        ExpiresByType text/javascript "now plus 48 hours"
        ExpiresByType text/css "now plus 48 hours"

</VirtualHost> 
```

我有大量类似于上面显示的示例的虚拟主机定义。

由于除 之外的大多数定义`ServerName`都是相同的，我想知道是否有办法在全球范围内定义这些通用定义。

我是 apache 配置的新手，我觉得随着虚拟主机定义数量的增加，我的配置文件变得更长和多余。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:41:01.927

你有几个选择。首先，根据您要使用的指令，它可能是您可以在服务器级别添加的内容。

其次，有一个专门用于此用例的名为[mod_macro的模块。](http://people.apache.org/~fabien/mod_macro/)您可以为虚拟主机定义一个宏：

```
<Macro VHost $host $port $dir>
  Listen $port
  <VirtualHost *:$port>
    ServerName $host
    DocumentRoot $dir

    <Directory $dir>
      # do something here...
    </Directory>

    # etc etc etc

  </VirtualHost>
</Macro> 
```

然后这样称呼它：

```
Use VHost www.apache.org 80 /projects/apache/web 
```

您还可以为您的`Exipres`指令声明一个宏，并通过调用包含它

```
Use ExpireMacro 
```

在您的虚拟主机内。

我使用`mod_macro`它并且效果很好，这是简化 apache 配置的好方法。

编辑：我应该提一下，除非模块已经在您的服务器上，否则您需要编译并安装它，这意味着您需要 root 访问权限。

# vbscript - VBScript 写入服务器文本文件

> ID：11122619
> 
> 赞同：1
> 
> 时间：2012-06-20T15:13:03.180
> 
> 标签：vbscript

我创建了一个 VBScript，它从计算机中提取服务标签、用户名和计算机名称。我现在需要做的是在文本文档中编译这些信息。

它的设置方式如下：

我们有一个 Active Directory 服务器，其中有一个用于登录脚本的文件夹。我创建了一个批处理文件来运行这个 .vbs 脚本，该脚本到目前为止运行良好。我现在需要的是在 AD 服务器上的一个名为“logging.txt”的文件中填充使用 .vbs 脚本创建的信息。

这是我到目前为止的脚本：

```
'Get Dell Service Tag Info
set ProSet = GetObject("winmgmts:").InstancesOf("Win32_BIOS")
Set ProSet1 = GetObject("winmgmts:").InstancesOf("Win32_SystemEnclosure")
For each Pro in ProSet
  For each Pro1 in ProSet1
   ServiceTag=Pro.SerialNumber
    wscript.echo ServiceTag
    exit for
  Next
  exit for
Next

'get username and computername, could also be asked in a batch
Set oShell     = WScript.CreateObject("WScript.Shell")
Set oShellEnv  = oShell.Environment("Process")
sComputerName  = oShellEnv("ComputerName")
sUsername      = oShellEnv("username")
wscript.echo sComputerName & " " & sUsername 
```

非常感谢您！

这是我迄今为止尝试过的：

```
sub log (user, computer)
  dim fs,f
  set fs=Server.CreateObject("Scripting.FileSystemObject")
  set f=fs.OpenTextFile(Server.MapPath(".\logging.csv"),8,true)
  f.WriteLine now & "," & user & "," & computer
  f.Close:set f=Nothing
  set fs=Nothing
end sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:34:54.233

我觉得你好像遗漏了一些东西。这就是在 VBS 中编写文本文件的方法。

```
dim filesys, filetxt, getname, path
Set filesys = CreateObject("Scripting.FileSystemObject")
Set filetxt = filesys.CreateTextFile("c:\somefile.txt", True)
path = filesys.GetAbsolutePathName("c:\somefile.txt")
getname = filesys.GetFileName(path)
filetxt.WriteLine("Your text goes here.")
filetxt.Close
If filesys.FileExists(path) Then
   Response.Write ("Your file, '" & getname & "', has been created.")
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:27:49.543

将信息保存到本地文本文件并使用命令行 ftp 实用程序从调用您的脚本的批处理脚本上传它可能是最简单的，而不是尝试发明另一个轮子并在 vbscript 中执行。

您可以列出 ftp 的命令行选项：

```
ftp /? 
```

我建议设置这样的东西：

```
ftp -s:control.txt 
```

control.txt 将包含以下内容：

```
open [hostname or address]
[username]
[password]
cd [remote directory name]
put logging.txt
disconnect
bye 
```

# c# - 未应用 CSS 样式

> ID：11122630
> 
> 赞同：2
> 
> 时间：2012-06-20T15:14:05.300
> 
> 标签：c#, asp.net, css, web-applications

我正在编写一个 ASP.NET Web 应用程序，但在应用 CSS 样式时遇到了麻烦。目前我有一个母版页和一个内容页。我的母版页正在应用 CSS 样式，但内容页没有。有趣的是在设计视图中，样式被应用于内容页面，但是一旦运行，浏览器就不会应用它。我尝试过内部和外部样式表。内联确实有效，但我想避免内联。这是我已经尝试过的一些示例代码

**母版页**：

```
<head runat="server">
    <title></title>
    <link rel="stylesheet" type="text/css" href="~/Styles/MasterStyleSheet.css" />
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

**内容页面**：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <link rel="stylesheet" type="text/css" href="~/Styles/LoginStyleSheet.css" />
    <!-- <link href='<%= ResolveUrl("~/Styles/LoginStyleSheet.css") %>' rel="stylesheet" type="text/css" /> I tried this as well-->
</asp:Content> 
```

我添加了简单的 css 文件，以便人们可以看到语法是正确的： `LoginStyleSheet.css`

```
#usrLabel {
    color:Blue;
    background-color:Aqua;
}

#Label4 {
    background-color:Black;
} 
```

任何帮助将不胜感激

### 更新#1

标题的 HTML 输出：

```
<head>
    <title></title>

    <link rel="stylesheet" type="text/css" href="../Styles/MasterStyleSheet.css" />

    <!-- <link href="&lt;%= ResolveUrl(&quot;~/Styles/MasterStyleSheet.css&quot;) %>" rel="stylesheet" type="text/css" /> -->
    <!-- <link rel="stylesheet" type="text/css" href="../Styles/LoginStyleSheet.css" /> -->
    <!-- <link href='/Styles/LoginStyleSheet.css' rel="stylesheet" type="text/css" /> -->
    <!-- <link rel="stylesheet" type="text/css" href="~/Styles/LoginStyleSheet.css" /> -->
    <!-- <link rel="stylesheet" type="text/css" href="../Styles/LoginStyleSheet.css" /> -->
    <!-- <link rel="stylesheet" type="text/css" href="/Styles/LoginStyleSheet.css" /> -->
</head> 
```

目前很多`<link>`元素都被注释掉了，但这些都是我尝试过的不同方式。

### 更新#2

首先，我感谢许多回应。他们都致力于弄清楚为什么我的外部 css 文件不起作用。但是，如果我尝试内部 css 样式表，它仍然不起作用。只有内联 CSS 有效。也许如果我们能弄清楚为什么内部 css 样式不起作用，那将解决与外部 css 样式表相同的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:22:21.880

正如您已经意识到的那样，以下内容不会转换为绝对路径，因为它不是 asp.net 对象...

```
<link rel="stylesheet" type="text/css" href="~/Styles/LoginStyleSheet.css" /> 
```

相反，尝试使用这个......

```
<link rel="stylesheet" type="text/css" href="<%=VirtualPathUtility.ToAbsolute("~/Styles/LoginStyleSheet.css")%>" /> 
```

**更新**（更新后的问题）...

如果发送给浏览器的 HTML 如下所示，那么我相信 LoginStyleSheet.css 要么在不同的位置，要么有一些文件权限阻止它被正确提供......

（我删除了注释掉的行，并添加了以`**`...开头的行，`**`不应该包括在内）

```
<head>
  <title></title>
  <link rel="stylesheet" type="text/css" href="../Styles/MasterStyleSheet.css" />
  **<link rel="stylesheet" type="text/css" href="../Styles/LoginStyleSheet.css" />
</head> 
```

**还@ aRsen49**在他的回答中强调了一种可能性......那就是 CSS 文件加载正确，但 CSS 不正确。您是否仔细检查了 CSS 是否匹配（记住`#`表示 id 而 as`.`表示类）？

**进一步更新**

如果@Trisped 在他的假设中是正确的，我想我可能知道出了什么问题......

如果`usrLabel`and`Label4`是 asp 对象（例如`<asp:Label>`），那么您使用 Masterpages 的事实意味着发送到浏览器的 HTML 中控件的实际 id 不会是`usrLabel`and `Label4`，但实际上它们会类似于`ct100_Content1_usrLabel`and `ct100_Content1_Label4`...因此，您当前拥有的 CSS 将无法正确链接。

因此，我建议您更新您的 CSS 以使用发送到浏览器的 id，或者（这将是我的偏好）您应该`CssClss="usrLabel"`为每个对象添加属性，然后将您的 CSS 更新为`.usrLabel`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:39:07.437

好的，这就是修复。所以在我的 html 中，id 是 label4。但是，因为一旦实际生成了 html，它就位于内容占位符 id 为 ContentPlaceHolder1 的内容页面中，因此标签的 id 将从 label4 更改为 ContentPlaceHolder1_Label4。因此我不得不改变我的css代码。BTW f12 on ie 可以创造奇迹。再次感谢所有帮助。抱歉，这只是一个简单的 id 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:30:08.747

在您的母版页中，定义一个 HEAD 元素，然后提及 CSS 类的链接。然后它将适用于您的所有内容页面。我在[这里为您找到了一个很好的参考](https://stackoverflow.com/questions/568717/asp-net-masterpages-how-to-insert-markup-in-the-head-section-inside-the-aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T16:23:40.620

如果您在代码中使用 Visual Studios“拖放”CSS 表。

如果它仍然不起作用，请仔细检查您的 CSS。例如：您是否为 ASPX 元素创建了 CSS 类 (CssClass = )？类名正确吗？等等

* * *

**更新**

我知道这可能听起来很奇怪.. 但是关闭 VS 并重新启动它。然后再次显示页面。此外.. 当您显示页面时按 F5！我相信你的缓存或类似的东西可能是问题所在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:10:32.590

尝试：

1.  在 Chrome 中打开页面
2.  右键单击正在应用样式的元素（母版页中的内容）并选择“检查元素”。
3.  在弹出的窗口中复制“样式”面板中的所有内容（此面板通常位于右侧，就在计算样式下方）。
4.  右键单击未应用样式的元素，然后选择“检查元素”。
5.  将样式中的内容与您之前复制的内容进行比较。

如果这不能让您走上正轨，那么我们将需要以下一项或两项：

*   无法正常工作的页面的渲染 html。这应该是完整的文件。页面不应引用 CSS 或 JS 文件等外部资源。
*   展示问题的母版页和内容页。

请注意，这些应该是显示问题的基本页面（而不是带有多个控件的生产页面）。

# iphone - 防止情节提要中的对象释放

> ID：11122631
> 
> 赞同：0
> 
> 时间：2012-06-20T15:14:09.560
> 
> 标签：iphone, objective-c, xcode, storyboard, uistoryboard

我正在寻找一种解决方案，以防止在情节提要视图中释放对象。这是交易，我有一个故事板视图，其中包含从 JSON 中获取的数据。此视图与另一个视图有关系（第一个视图：项目列表 -- 第二个视图：项目详细信息）。现在，当我在第一个视图中点击一个项目时，它会转到另一个视图并显示详细信息（使用 segue）。但是当我回到第一个视图时，它需要再次从 JSON 中获取数据。（让用户生气）

我知道使用 Tab 模板，但由于应用程序用户的要求，我不能。

如果有人可以帮助我，我将不胜感激。

感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:50:10.363

您错误地实现了[Model-View-Controller 模式](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html)。视图不应该获取或保存数据。他们只是显示它。视图控制器也不保存数据。视图和视图控制器可以在它们不在屏幕上的任何时候被丢弃。这是设计使然。

创建一个模型类，负责与服务器通信并保存结果数据。控制器应该将模型交给视图，视图应该只显示它​​在模型中找到的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:19:51.277

我认为您需要从第一个视图到第二个视图进行模态 Segue。然后当你完成第二个视图时执行 [self dismissModalViewControllerAnimated:YES]; 在第二视图中关闭第二视图并返回到第一视图。这应该会再次显示带有数据的第一个视图。

# javascript - 如何根据 javascript 变量动态更改 facebook 评论插件 url？

> ID：11122633
> 
> 赞同：6
> 
> 时间：2012-06-20T15:14:20.743
> 
> 标签：javascript, flash, facebook-javascript-sdk, facebook-social-plugins

我想根据 javascript 变量动态更改下面的 fb 评论插件的 data-href。我正在运行一个 flash swf 文件，并通过一个 javascript 函数将 data-href 的新链接传递到 html 包装器中。当我这样做时，我希望 fb 评论插件刷新到新的 data-href 链接。

```
<div style="float: left; padding-left:5px; min-height:500px" class="fb-comments" data-href="www.example.com" data-num-posts="20" data-width="380"></div> 
```

调用 javascript 函数传入评论插件的新链接：

```
function changeCommentsUrl(newUrl){
// should refresh fb comments plugin for the "newUrl" variable
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T15:26:32.600

这将加载初始评论框，脚本将在执行时清除评论 div 包装器并用新的 url 替换 html5 评论框。然后 JS SDK 将解析新框。

这项工作需要 JS SDK。参考[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

修复来自 dom 操作的 xfbml 渲染

* * *

```
<div id="comments">
<div style="float: left; padding-left:5px; min-height:500px" class="fb-comments" data-href="www.example.com" data-num-posts="20" data-width="380"></div>
</div>
<script>
function changeCommentsUrl(newUrl){
// should refresh fb comments plugin for the "newUrl" variable
document.getElementById('comments').innerHTML='';
parser=document.getElementById('comments');
parser.innerHTML='<div style="float: left; padding-left:5px; min-height:500px" class="fb-comments" data-href="'+newUrl+'" data-num-posts="20" data-width="380"></div>';
FB.XFBML.parse(parser);
}
</script> 
```

* * *

用户解决：

```
document.getElementById('comments').innerHTML='<div style="float: left; padding-left:5px; min-height:500px" class="fb-comments" data-href="'+link+'" data-num-posts="20" data-width="380"></div>'; 
FB.XFBML.parse(document.getElementById('comments')); 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-07T09:30:36.030

我找到了让你的 Facebook 评论框识别每个页面的单个 URL 的最简单有效的方法（特别适用于电子商务网站）。

将此脚本添加到网站模板的顶部标题部分（它会为您的评论框 div 生成 de data-href 值：

```
<script type="text/javascript" language="javascript">
  jQuery("#FC").attr("data-href", window.location.href.split("?")[0]); 
</script> 
```

然后在您的评论框 div 上，为 javascript 上生成的值添加 id：

```
<div id="FC" class="fb-comments" data-href="" data-width="700" data-numposts="5" data-colorscheme="light"> 
```

瞧。我花了这么多时间来破解这个坚果，我只需要分享给你，以节省一些休息时间！干杯!

# iphone - 将 Json 加载到 uitableview

> ID：11122636
> 
> 赞同：0
> 
> 时间：2012-06-20T15:14:28.200
> 
> 标签：iphone, ios, xcode

我正在尝试将 json 加载到 uitableview 中。我以前使用过 json，但从未将它与 tableview 一起使用。我不断收到此错误：-[__NSCFNumber count]: unrecognized selector sent to instance。我很确定这是因为在 numberOfRowsInSection 方法中我返回了数组的计数。请让我知道如何解决这个问题，或者我是否遗漏了某些东西而没有看到它。

这是他的代码：.h 文件

```
 @interface HistoryViewController : UITableViewController <UITableViewDataSource,                  UITableViewDelegate>
{
    NSArray *jsonData;
    NSMutableData *responseData;
} 
```

.m 文件

```
- (void)viewDidLoad 
{       
responseData = [[NSMutableData data] retain];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"Json url"]];
[[NSURLConnection alloc] initWithRequest:request delegate:self ];

[super viewDidLoad];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
[responseData setLength:0];
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
NSLog(@"Connection failed: %@", [error description]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
[connection release];

NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
[responseData release];

NSDictionary *dictionary = [responseString JSONValue];
NSArray *response = [dictionary objectForKey:@"name"];

jsonData = [[NSArray alloc] initWithArray:response];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
return  jsonData.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView 
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [[UITableViewCell alloc]
                         initWithStyle:UITableViewCellStyleDefault
                         reuseIdentifier:@"cell"];

cell.textLabel.text = [jsonData objectAtIndex:indexPath.row];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:47:13.527

好吧，我注意到你的数组在`connectionDidFinishLoading`方法运行之前永远不会初始化。您的数据表的委托方法可能之前运行过`connectionDidFinishLoading`，因此您应该初始化您的`jsonData`数组`viewDidLoad`而不是`connectionDidFinishLoading`.

You can keep your `connectionDidFinishLoading` calls the same, but make sure you call `reloadData` on your data table at the end of the `connectionDidFinishLoading` method to fill out your data table with the downloaded data.

# linux - 在 linux 上挂载块设备驱动模块停止工作

> ID：11122637
> 
> 赞同：0
> 
> 时间：2012-06-20T15:14:31.700
> 
> 标签：linux, filesystems, mount, block-device

我在 Ubuntu 上制作块设备驱动模块和插入模块。然后我想使用“mkfs”命令将该模块挂载为文件系统。但是，`mkfs`命令对以下消息不起作用：

> 编写超级块和文件系统记帐信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:38:45.603

`mkfs`不挂载块设备。它在它们上创建 filsystems。（我希望你的设备上没有什么有趣的东西；`mkfs`已经删除了块设备上的数据）。要挂载块设备（或者更好地说是挂载块设备上的文件系统），您必须使用`mount`：

```
# mount /dev/sda1 /mnt 
```

（假设`/dev/sda1`是您尝试安装的设备）。

不要忘记在不再需要时卸载设备：

```
# umount /mnt 
```

# javascript - 生成多级 JSON

> ID：11122638
> 
> 赞同：3
> 
> 时间：2012-06-20T15:14:36.690
> 
> 标签：javascript, json

我有一个对象数组，每个对象都包含一个位置和一个不确定长度的链接数组。如何创建带有循环的多级 JSON 对象？

最终的 JSON 应该是这样的

```
item1: [
  { "location": [
      {"latitude": value, "longitude": value, "stopNum": value, "fileName": value }
    ],
   "links": [
      {"latitude": value, "longitude": value, "stopNum": value, "fileName": value },
      {"latitude": value, "longitude": value, "stopNum": value, "fileName": value },
      {"latitude": value, "longitude": value, "stopNum": value, "fileName": value }
    ]
  }   
],
item2: [ //repeat of above ] 
```

我遇到的问题是如何正确形成对象。数组包含的对象定义为

```
function Links(){
  this.location = null;
  this.links= [];

  function getLocation(){
    return location;
  }
  function setLocation(marker){
    this.location = marker;
  } 

  function getLinks(){
    return links;
  }
} 
```

我目前的解决方案是

```
var json=[];
var linkData;
for (var i=0; i < tourList.length; i++){
  var data = tourList[i];
  //create new child array for insertion
  var child=[];

  //push location marker data
  child.push({
    latitude: data.location.position.$a, 
    longitude: data.location.position.ab,
    stopNum: i,
    filename: data.location.title
  });

  //add associated link data
  for (var j=0; j<data.links.length; j++){
    linkData = data.links[i];
    child.push({
      latitude: linkData.position.$a, 
      longitude: linkData.position.ab,
      stopNum: i+j,
      fileName: linkData.title
    });
  }
  //push to json array
  json.push(child);
}

//stringify the JSON and post results
var results= JSON.stringify(json); 
```

但是，这并不完全有效，因为

```
$post= json_decode($_POST['json']) 
```

PHP 语句返回一个格式错误的数组，该数组`$post.length`被视为未定义的常量。我假设这是由于格式不正确。

使用上面定义的对象，如何创建格式良好的 JSON 以发送到服务器？

目前的结果`stringify()`是

```
[
  {"latitude":43.682211,"longitude":-70.45070499999997,"stopNum":0,"filename":"../panos/photos/1-prefix_blended_fused.jpg"},
  [
    {"latitude":43.6822,"longitude":-70.45076899999998,"stopNum":0,"fileName":"../panos/photos/2-prefix_blended_fused.jpg"}
  ],
  {"latitude":43.6822,"longitude":-70.45076899999998,"stopNum":1,"filename":"../panos/photos/2-prefix_blended_fused.jpg"},
  [
    {"latitude":43.68218,"longitude":-70.45088699999997,"stopNum":1,"fileName":"../panos/photos/4-prefix_blended_fused.jpg"},
    {"latitude":43.68218,"longitude":-70.45088699999997,"stopNum":2,"fileName":"../panos/photos/4-prefix_blended_fused.jpg"}
  ]
] 
```

另外，我正在`$post.length`使用

```
$post = json_decode($POST['json']);
for ($i=0; $i<$post.length; $i++) { } 
```

遍历处理过的数组。

POST 请求是通过`jQuery.ajax()`定义为的函数

```
$.ajax({
  type: "POST",
  url: "../includes/phpscripts.php?action=postTour",
  data: {"json":results},
  beforeSend: function(x){
    if (x && x.overrideMimeType){
      x.overrideMimeType("application/json;charset=UTF-8");
    }
  },
  success: function(data){
    if (data == "success")
      console.log("Tour update successful");
    else 
      console.log("Tour update failed");

  }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:32:05.463

这应该有效。

```
var json = [];
var linkData;
for (var i = 0; i < tourList.length; i++) {
    var data = tourList[i];
    //create new child array for insertion
    var child = [{ }];

    //push location marker data
    child[0]['location'] = [{
        latitude: data.location.position.$a,
        longitude: data.location.position.ab,
        stopNum: i,
        filename: data.location.title
    }];

    child[0]['links'] = [];

    //add associated link data
    for (var j = 0; j < data.links.length; j++) {
        linkData = data.links[i];
        child.links.push({
            latitude: linkData.position.$a,
            longitude: linkData.position.ab,
            stopNum: i + j,
            fileName: linkData.title
        });
    }
    //push to json array
    json.push(child);
}

//stringify the JSON and post results
var results = JSON.stringify(json); 
```

但是为什么要让输出 JSON 如此复杂呢？一个更简单的方法是使用这样的东西：

```
item1: {
    "location": {
        "latitude": value, "longitude": value, "stopNum": value, "fileName": value
    },
   "links": [
      {"latitude": value, "longitude": value, "stopNum": value, "fileName": value },
      {"latitude": value, "longitude": value, "stopNum": value, "fileName": value },
      {"latitude": value, "longitude": value, "stopNum": value, "fileName": value }
    ]
},
item2: [ //repeat of above ] 
```

您正在做的是为单个对象创建“数组”。为什么要这样做？如果您使用这种格式，代码（巧妙地）简化了：

```
var json = [];
var linkData;
for (var i = 0; i < tourList.length; i++) {
    var data = tourList[i];
    //create new child array for insertion
    var child = { };

    //push location marker data
    child.location = {
        latitude: data.location.position.$a,
        longitude: data.location.position.ab,
        stopNum: i,
        filename: data.location.title
    };

    child.links = [];

    //add associated link data
    for (var j = 0; j < data.links.length; j++) {
        linkData = data.links[i];
        child.links.push({
            latitude: linkData.position.$a,
            longitude: linkData.position.ab,
            stopNum: i + j,
            fileName: linkData.title
        });
    }
    //push to json array
    json.push(child);
}

//stringify the JSON and post results
var results = JSON.stringify(json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:17:08.877

我的朋友，答案是`JSON.stringfy()`：

> [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)

# tomcat - 在同一个 ios 上运行 2 个 tomcat 实例

> ID：11122640
> 
> 赞同：0
> 
> 时间：2012-06-20T15:14:40.403
> 
> 标签：tomcat, windows-7, tomcat7

我想在同一个 Windows 上运行 2 个 tomcat 实例。

所以我采取了以下步骤：

1.  将tomcat下载到文件夹tomcat1
2.  创建了一个新文件夹：tomcat2
3.  将 conf 文件夹从 tomcat1 复制到 tomcat2
4.  创建空文件夹：日志、临时、工作
5.  创建了一个文件夹 bin 并在里面放了 2 个命令：

启动.bat

```
set CATALINA_BASE=C:\Programs\apache2
set CATALINA_HOME=C:\Programs\apache1
C:\Programs\apache1\bin\startup.bat 
```

关机.bat

```
set CATALINA_BASE=C:\Programs\apache2
set CATALINA_HOME=C:\Programs\apache1
C:\Programs\apache1\bin\shutdown.bat 
```

我还将**apache2 的 server.xml 中**的以下内容更改为：

```
<Server port="8006" shutdown="SHUTDOWN">
<Connector port="8081" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8444" />
<Connector port="8010" protocol="AJP/1.3" redirectPort="8444" /> 
```

在**apache1**中是：

```
<Server port="8005" shutdown="SHUTDOWN">
 <Connector port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />
 <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /> 
```

当我从 apache1 运行 startup.bat 时，虽然在其 server.xml 中配置为端口 8080，但它占用了 8081 端口。这样，当我想从 apache2 运行 startup.bat 时 - 端口正忙！无论哪种方式，如果我先尝试 apache2 然后再尝试 apache1 我都不能同时运行。

怎么了？

我正在使用 Windows 7 和 tomcat 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:46:01.870

默认`CATALINA_HOME`设置为 in `catalina.bat`，它与`bin`子目录的位置有关。

所以你可以解压缩一个 tomcat 二进制文件`c:\tomcat1`和另一个文件`c:\tomcat2`，每个文件都会自动拥有自己的`CATALINA_HOME`.

至于您用 shared 描述的场景`CATALINA_HOME`，我看不出任何会阻止它运行正常的情况。我会仔细检查您`startup.bat`是否调用了正确的实例，并且每个实例都`server.xml`配置了正确的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:05:30.437

推荐的解决方案：为您的第二个 tomcat 实例选择另一个端口，而不是 8081。
替代解决方案：更改 McAfee FrameworkService.exe 使用的端口。[这](https://community.mcafee.com/message/17346)是一个讨论选项的线程

我在尝试在端口 8080 和 8081 上运行 2 个 tomcat 实例时遇到了类似的问题。按照[此处](https://stackoverflow.com/questions/5310945/deployment-errorstarting-of-tomcat-failed-the-server-port-8080-is-already-in-u)`netstat -aon`的建议使用以查看打开的连接和相关进程 ID 的列表。跟踪这个 id，在我的例子中是 1988，回到进程显示 McAfee FrameworkService.exe 进程正在使用 8081。`tasklist /FI "PID eq 1988"`

# ruby-on-rails - Glyth 图标未显示

> ID：11122643
> 
> 赞同：-1
> 
> 时间：2012-06-20T15:14:43.460
> 
> 标签：ruby-on-rails, twitter-bootstrap

使用 rails-admin 0.0.3 和 bootstrap-sass 2.0.3 的 Firefox 12 和 13（Windows）中根本不显示 Glyth 图标，这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:51:47.400

Glyth 图标包含在 bootstrap-sass [https://github.com/thomas-mcdonald/bootstrap-sass/tree/master/vendor/assets/images](https://github.com/thomas-mcdonald/bootstrap-sass/tree/master/vendor/assets/images)

如果它在任何其他 Web 浏览器中工作，请清除 firefox 缓存。

如果它在任何网络浏览器中都不起作用，请使用 firebug 来查看预期的路径

![twitter boostrap glyth 图标 firebug](../Images/7a504f5f2119d43c6e9d5568a0ffccad.png)

# c++ - 如何从 ULONGLONG 毫秒创建 SYSTEMTIME 结构？

> ID：11122647
> 
> 赞同：1
> 
> 时间：2012-06-20T15:15:01.507
> 
> 标签：c++, windows, visual-c++, datetime

我不想使用 WMI 来获取上次启动时间，而是想使用`::GetSystemTime()`and来计算它`::GetTickCount64`。但是一旦我达到毫秒，我不知道如何回到 FILETIME 对象。

我试过这个：

```
static ULONGLONG FileTimeToMillis(const FILETIME &ft)
{
    ULARGE_INTEGER uli;
    uli.LowPart = ft.dwLowDateTime; // could use memcpy here!
    uli.HighPart = ft.dwHighDateTime;

    return uli.QuadPart/10000;
}

static void MillisToSystemTime(ULONGLONG millis, SYSTEMTIME *st)
{
   UINT64 t = static_cast<UINT64>(-10000) * static_cast<UINT64>(millis);

   FILETIME ft;
   ft.dwLowDateTime = static_cast<DWORD(t & 0xFFFFFFFF);
   ft.dwHighDateTime = static_cast<DWORD>(t >> 32);

   ::FileTimeToSystemTime(&ft, st);
}

void main()
{
    SYSTEMTIME st, lt, st2, lt2;

    ::GetSystemTime(&st);
    ::GetLocalTime(&lt);

    cout << "The system time is: " << st.wHour << ":" << st.wMinute << ":" << st.wSecond << endl;
    cout << "The local time is: "  << lt.wHour << ":" << lt.wMinute << ":" << lt.wSecond << endl;

    FILETIME sft, lft;
    ::SystemTimeToFileTime(&st, &sft);
    ::SystemTimeToFileTime(&lt, &lft);  

    cout << "The system time in millis is: " << FileTimeToMillis(sft) << endl;
    cout << "The local time in millis is: "  << FileTimeToMillis(lft) << endl;

    MillisToSystemTime(FileTimeToMillis(sft), &st2);
    MillisToSystemTime(FileTimeToMillis(sft), &lt2);

    cout << "The system time (post conversion) is: " << st2.wHour << ":" << st2.wMinute << ":" << st2.wSecond << endl;
    cout << "The local time (post conversion) is: "  << lt2.wHour << ":" << lt2.wMinute << ":" << lt2.wSecond << endl;
} 
```

但我当然没有得到预期的结果。相反，我得到：

```
The system time is: 15:5:2
The local time is: 10:5:2
The system time in millis is: 12984678302935
The local time in millis is: 12984660302935
The system time (post conversion) is: 52428:52428:52428
The local time (post conversion) is: 52428:52428:52428 
```

有任何想法吗？请不要告诉我使用 Boost 或因为它对我不可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:40:40.010

> 系统时间（转换后）为：52428:52428:52428

当你得到奇怪的值时，总是先转换为十六进制。52428 == 0xcccc。这是调试构建生成的代码用于初始化变量的值。因此，您正在查看未初始化的内存。

下一个防御策略是*永远不要*忽略 Windows api 函数的返回值。使用 VERIFY() 宏，如 MFC 中可用的宏。然后您会很容易看到 FileTimeToSystemTime() 失败。

错误是-10000。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T15:38:22.103

原来我做的算术不正确。一旦我阅读`ULARGE_INTEGER`and `FILETIME`，我发现我可以直接使用 the `QuadPart`，`ULARGE_INTEGER`然后正确地拉出高低部分，同时避免位移和铸造混乱。

```
static UINT64 FileTimeToMillis(const FILETIME &ft)
{
    ULARGE_INTEGER uli;
    uli.LowPart = ft.dwLowDateTime; // could use memcpy here!
    uli.HighPart = ft.dwHighDateTime;

    return static_cast<UINT64>(uli.QuadPart/10000);
}

static void MillisToSystemTime(UINT64 millis, SYSTEMTIME *st)
{
    UINT64 multiplier = 10000;
    UINT64 t = multiplier * millis;

    ULARGE_INTEGER li;
    li.QuadPart = t;
    // NOTE, DON'T have to do this any longer because we're putting
    // in the 64bit UINT directly
    //li.LowPart = static_cast<DWORD>(t & 0xFFFFFFFF);
    //li.HighPart = static_cast<DWORD>(t >> 32);

    FILETIME ft;
    ft.dwLowDateTime = li.LowPart;
    ft.dwHighDateTime = li.HighPart;

    ::FileTimeToSystemTime(&ft, st);
} 
```

[关键是从MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)阅读以下内容：

> 不建议您从 FILETIME 结构中添加和减去值以获得相对时间。相反，您应该将文件时间的低位和高位部分复制到 ULARGE_INTEGER 结构，对 QuadPart 成员执行 64 位运算，并将 LowPart 和 HighPart 成员复制到 FILETIME 结构中。

# c# - “指定元素已经是逻辑子元素”修复

> ID：11122649
> 
> 赞同：1
> 
> 时间：2012-06-20T15:15:10.603
> 
> 标签：c#, wpf, xaml

我有我自己的自定义组合框，最后一项作为带有命令的按钮：

代码：

```
public class CustomComboBox : ComboBox
  {
    public static readonly DependencyProperty ButtonCommandProperty =
      DependencyProperty.Register("ButtonCommand", typeof (ICommand), typeof (CustomComboBox), null);

    public ICommand ButtonCommand
    {
      get { return (ICommand) GetValue(ButtonCommandProperty); }
      set { SetValue(ButtonCommandProperty, value); }
    }
  } 
```

款式：

```
<Style TargetType="{x:Type controls:CustomComboBox}">
        <Style.Resources>
            <Style TargetType="{x:Type Button}">
                <Setter Property="OverridesDefaultStyle" Value="true"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="SnapsToDevicePixels" Value="true"/>
                <Setter Property="Height" Value="16" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <TextBlock Text="{TemplateBinding Content}" Background="Transparent" Foreground="#CCCCCD" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Style.Resources>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:CustomComboBox}">
                    <StackPanel>
                        <ComboBox
                            SelectedItem="{Binding Path=SelectedItem, Mode=TwoWay,
                                    RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type controls:CustomComboBox}},
                                        UpdateSourceTrigger=PropertyChanged}"
                            ItemsSource="{Binding ItemsSource, Mode=OneWay,
                                    RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type controls:CustomComboBox}},
                                        UpdateSourceTrigger=PropertyChanged}">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <TextBlock Style="{StaticResource TextBlockDimmed}" Text="{Binding Mode=OneWay}" />
                                                </StackPanel>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <DataTrigger
                                            Binding="{Binding Converter={converters:ComboBoxItemIndexToStringConverter},
                                                RelativeSource={RelativeSource Self}}" Value="IsLastItem">
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <StackPanel>
                                                            <Button Content="{Binding}"
                                                                  Command="{Binding ButtonCommand,
                                                                RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type controls:CustomComboBox}}}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                        </ComboBox>
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

使用：

```
<controls:CustomComboBox Grid.Column="1"
                                     SelectedItem="{Binding Path=SelectedAreaName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                     ButtonCommand="{Binding CreateNewAreaCommand}"
                                     ItemsSource="{Binding AreasNamesList, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

当我尝试在程序中多次调用按钮命令（单击按钮）时，我收到一条错误消息：

```
'Specified element is already the logical child of another element. Disconnect it first.' 
```

我猜是 XAML 样式中的问题，但我不确定问题是什么。

# maps - 谷歌地图 v3 地面覆盖？

> ID：11122652
> 
> 赞同：0
> 
> 时间：2012-06-20T15:15:13.163
> 
> 标签：maps, png, overlay

我花了两天时间对此感到困惑并且失败了。任何帮助将不胜感激。

我需要在 1500px x 900px 的画布上以 -18.975750、32.669184 为中心的地图。然后我需要使用设置的代码透明度覆盖覆盖率 PNG（从 www.heywhatsthat.com 获得）。

我最终到达了以下代码，但它失败了。我想添加多个受其 co-ords 约束的 PNG，但连一个都无法使用。

```
 <script src="http://maps.google.com/maps?file=api&amp;v=3&amp;key=AIzaSyAGbZjXr2wr7dT2P3O5pNo5wvVF3JiaopU&sensor=false"
        type="text/javascript"></script>
<script type="text/javascript">

function initialize() {
  if (GBrowserIsCompatible()) {
    var map = new google.maps.MAP(document.getElementById("map_canvas"));
    map.setCenter(new GLatLng(-18.975750, 32.669184), 13);
    map.setUIToDefault();

  var imageBounds = new google.maps.LatLngBounds(
  new google.maps.LatLng(-19.000417,30.999583),
  new google.maps.LatLng(-17.999583,32.000417));

   var oldmap = new google.maps.GroundOverlay(
  "http://www.earthstation.mobi/cloakpS19E031.png",imageBounds);
   oldmap.setMap(map);
}

</script>
</head>
 <body onload="initialize()" onunload="GUnload()">
<div id="map_canvas" style="width: 1500px; height: 900px"></div>
 </body>
 </html> 
```

我在说什么，请指出正确的方向在选项中添加多个具有透明度的 png 叠加层。

谢谢布赖恩津巴布韦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:44:08.743

You have a lot of issues with your code. It looks like you're trying to migrate from V2 to V3, and you still have V2 methods and objects in your code. You're also not loading the JS APi correctly when you call in the of your HTML.

Here is functional code that displays the overlay using the V3 API, but it looks like the original center coordinates that you used do not place the map at the center of the overlay (you'll need to figure that out yourself). I've added comments where relevant so that you can see where you went astray. Note the call to the API library in the first script tag.

```
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAGbZjXr2wr7dT2P3O5pNo5wvVF3JiaopU&sensor=false"
          type="text/javascript"></script>
  <script type="text/javascript">

  function initialize() {
    //You don't need to use GBrowserIsCompatible, it's only for V2 of the API
    //if (GBrowserIsCompatible()) {
      //You need to set up options for the map that you reference when you
      //instantiate the map object
      var myOptions = {
                center: new google.maps.LatLng(-18.975750, 32.669184),
                zoom: 13,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              };
      //Your code references google.maps.MAP; it's google.maps.Map
      var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

      var imageBounds = new google.maps.LatLngBounds(
        new google.maps.LatLng(-19.000417,30.999583),
        new google.maps.LatLng(-17.999583,32.000417));

      var oldmap = new google.maps.GroundOverlay(
        "http://www.earthstation.mobi/cloakpS19E031.png",imageBounds);
        oldmap.setMap(map);
   //} <--Your code was missing this closing bracket for the conditional
       //But the conditional is not even needed, since GBrowserCompatible is a V2 thing
  }

  </script>
  </head>
   <body onload="initialize()">
  <div id="map_canvas" style="width: 1500px; height: 900px"></div>
   </body>
   </html> 
```

# mysql - MySQL FK 到非唯一字段不起作用

> ID：11122656
> 
> 赞同：1
> 
> 时间：2012-06-20T15:15:26.517
> 
> 标签：mysql, foreign-keys, mysql-error-1005

在 MySQL 手册中，我读到“但是，系统不强制要求引用的列必须是唯一的或声明为 NOT NULL。”。所以，我尝试创建两个表：

```
CREATE TABLE album(
    id INT, 
    title VARCHAR(20)) DEFAULT CHARSET=utf8;
CREATE TABLE track2(   
    album int,   
    dsk INTEGER,   
    posn INTEGER,   
    song VARCHAR(255),   
    FOREIGN KEY (album) REFERENCES album(id) ) default charset=utf8; 
```

并有错误：ERROR 1005 (HY000): Can't create table 'b.track2' (errno: 150)

为什么我不能使用偏离 SQL 标准但由 MySQL 提供并在其手册中描述的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:32:35.240

我明白该怎么做：

```
create table album2 (id int, title varchar(20), key (id));
create table track2 (
     track_id int primary key, 
     album_id int not null, 
     title varchar(100), 
     foreign key (album_id) references album2 (id)
);

mysql> show create table album2;
+--------+-----------------------------
| Table  | Create Table
+--------+-----------------------------
| album2 | CREATE TABLE `album2` (
  `id` int(11) DEFAULT NULL,
  `title` varchar(20) DEFAULT NULL,
  KEY `id` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+-----------------------------

mysql> show create table track2;
+--------+-----------------------------------------------------------------------
| Table  | Create Table
+--------+-----------------------------------------------------------------------
| track2 | CREATE TABLE `track2` (
  `track_id` int(11) NOT NULL,
  `album_id` int(11) NOT NULL,
  `title` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`track_id`),
  KEY `album_id` (`album_id`),
  CONSTRAINT `track2_ibfk_1` FOREIGN KEY (`album_id`) REFERENCES `album2` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+----------------------------------------------------------------------- 
```

我只需要在专辑 2 中创建**非唯一**键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:33:04.567

`id`发生这种情况是因为您没有`PRIMARY KEY`在`album`表格中设置。

利用

```
CREATE TABLE album(
    id INT PRIMARY KEY, 
    title VARCHAR(20)) DEFAULT CHARSET=utf8;

CREATE TABLE track2(   
    album int,   
    dsk INTEGER,   
    posn INTEGER,   
    song VARCHAR(255),   
    FOREIGN KEY (album) REFERENCES album(id) ) default charset=utf8; 
```

## [演示](http://sqlfiddle.com/#!2/4b55f/1)

* * *

## 更新 1

请阅读

***[外键可以引用非唯一索引吗？](https://stackoverflow.com/questions/588741/can-a-foreign-key-reference-a-non-unique-index)***

***[非唯一键的Mysql外键——这怎么可能？](https://stackoverflow.com/questions/2362163/mysql-foreign-key-by-non-unique-key-how-is-that-possible)***

* * *

## 更新 2

**我相信**，您的引擎是 MyISAM。根据[MYSQL 手册](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/innodb-foreign-key-constraints.html)，您的语句适用于 InnoDB 而不是 MyISAM。

***此外，MySQL 和 InnoDB 要求对引用的列进行索引以提高性能。但是，系统不强制要求引用的列必须是 UNIQUE 或声明为 NOT NULL。对于 UPDATE 或 DELETE CASCADE 等操作，对非唯一键或包含 NULL 值的键的外键引用的处理没有明确定义。建议您使用仅引用 UNIQUE 和 NOT NULL 键的外键。***

# php - 使 PHP 字符串显示在 textarea 中的多行上，使用指定的字符将其拆分

> ID：11122657
> 
> 赞同：0
> 
> 时间：2012-06-20T15:15:28.170
> 
> 标签：php, string, textarea, newline

我有以下格式存储在数据库中的选项 -

`option1:Option 1;option2:Option 2;option3:Option 3;option4:Option 4`

用户可以编辑这些选项，因此当它们在其中时，`<textarea>`我希望它们显示在单独的行上。

```
option1:Option 1
option2:Option 2
option3:Option 3
option4:Option 4 
```

我试图通过用`';'`新行替换分隔选项的字符来做到这一点（`str_replace(';', PHP_EOL, $poll['poll_options'])`- 也尝试过`"\r\n"`）

即使这似乎有效（`echo '<pre>'; print_r($poll['poll_options']); echo '</pre>';`在新行上显示正确的选项），当我将文本放在 a`<textarea>`中时，选项仅分隔为一个空格。

**编辑**- 我已将我使用的代码（现在反映在这篇文章中）更改为@John Conde 建议的代码，现在它可以在 FF 中使用。

有关如何解决的任何提示？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:17:12.073

尝试：

```
$new_text = str_replace(';', PHP_EOL, $poll['poll_options']); 
```

[`str_replace()`](http://us3.php.net/manual/en/function.str-replace.php)使用正则表达式更容易。

# ruby - 在 Ruby 数组中添加尾随索引的目的是什么？

> ID：11122658
> 
> 赞同：0
> 
> 时间：2012-06-20T15:15:29.607
> 
> 标签：ruby

我一直试图理解以下内容：

```
%w[a b c d][4,20] => []
%w[a b c d][4] => nil
%w[a b c d][5,20] => nil 
```

1.  为什么在Array的尾部有添加的索引？
2.  为什么切片返回不同的结果？4不是超出范围吗？似乎不一致，但我认为#1 将阐明这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:34:31.027

正如 KL-7 所说，将索引（或切片的起始索引）作为数组末尾的一个传递被视为一种特殊情况。从最后一个元素开始的切片将始终返回`[]`。

我不认为这样做是有目的的，似乎只是`rb_ary_subseq`Ruby 中的函数编码方式的副作用（它进行`start > len`检查而不是 a `start >= len`）。

# sql-server - 经典 ASP 将远程 XML 文件导入 SQL Server

> ID：11122660
> 
> 赞同：2
> 
> 时间：2012-06-20T15:15:36.053
> 
> 标签：sql-server, xml, asp-classic, xml-parsing

首先，我想说的是，我认为我的问题对于人们来说可能很耗时，因此我理解完整的答案完全有可能要求太多，所以有什么可以帮助的我更好地理解，例如：阅读材料、示例、链接和/或建议会很棒，我非常感谢我收到的任何评论，无论好坏，它只会让我和这个地方变得更好，最后，我会非常感谢你们在这里所做的一切，这确实是一个由聪明人和关心的人建造的地方。

我的问题

（使用经典 ASP 和 SQL Server）

我知道可以读取远程 XML 文件，然后将其插入到 SQL Server 数据库表中。我发现了一个使用经典 ASP 和 MS Access 的示例，但可以使用最少的编码更改为 SQL Server，URL 是：[http ://forums.aspfree.com/code-bank-54/classic-asp-import -remote-xml-file-into-database-152966.html](http://forums.aspfree.com/code-bank-54/classic-asp-import-remote-xml-file-into-database-152966.html)

但问题是我无法让它在我的远程 XML 文件上工作，我试图编辑经典的 asp 代码（在上面的链接中找到）几天和几天，但我无法让它以我想要的方式工作。

所以我想从头开始，

有问题的 XML 文件位于：[http ://www.iftach.org/taxmatrix/charts/2Q2012.xml](http://www.iftach.org/taxmatrix/charts/2Q2012.xml)

我看到了一些关于如何将整个 xml 文件导出到 SQL Server 数据库中的示例（例如进行 BULK 插入，请参见 URL： http: [//support.microsoft.com/kb/316005](http://support.microsoft.com/kb/316005)）以及如何提取一些信息。来自 XML，但我的请求有点奇怪，因为我想检查第`Country`一个，然后`Counties Rate`只得到那个而不是另一个，我想对整个 xml 文件执行此操作。

例如 xml 文件是这样的：（
或者您可以通过单击上面的 URL 查看完整的 xml 文件）

```
<FILE>
<QUARTER>2Q2012</QUARTER>
<RECORD>
<JURISDICTION ID="#15">AB</JURISDICTION>
<COUNTRY>CAN</COUNTRY>
......
......
<RATE RATECHANGE="0" COUNTRY="US">0.3366</RATE>
<RATE RATECHANGE="0" COUNTRY="CAN">0.0900</RATE>
......
......
......
</RECORD>

<RECORD>
<JURISDICTION ID="#15">FL</JURISDICTION>
<COUNTRY>U.S.</COUNTRY>
......
......
<RATE RATECHANGE="0" COUNTRY="US">1.5700</RATE>
<RATE RATECHANGE="0" COUNTRY="CAN">1.3210</RATE>
......
......
......
</RECORD>
</FILE> 
```

等等....

现在我想将该信息插入到名为的 SQL Server 表中`FFTR`，并为每个特定的列命名`JURISDICTION`

例如，上面将是：

```
Field Name 1 --> "JURISDICTION_AB_CAN"
Field Name 2 --> "JURISDICTION_FL_US"
and so on... 
```

注意：
前缀`JURISDICTION_`将始终相同，只有两个字母会更改并且`CAN`可以变为`US`.

另一件事是，如果 COUNTRY 是“CAN”，那么我想使用 CAN Rate，如果是 US，我想使用 US Rate 并插入该信息。使用名为“RATE”的字段进入数据库。（费率始终为小数点后 4 位）我想要的费率仅低于：`<FUEL_TYPE>Special Diesel</FUEL_TYPE>`我不需要其他费率。

我想做的最后一件事是将`<QUARTER>2Q2012</QUARTER>`插入到名为“Quarter”的字段中

所以最终的 SQL Server 数据库将如下所示（以上面的 2 条记录为例）

```
Field Name: JURISDICTION_AB_CAN
Rate: 0.0900
Quarter: 2Q2012

Field Name: JURISDICTION_FL_US
Rate: 1.5700
Quarter: 2Q2012 
```

所以我试图做的是这个（见下面的代码），我让它显示每一行，但它甚至没有接近解决方案：

```
<% 
   Option Explicit 
   Response.Buffer = True 
   Dim xml 
   Set xml = Server.CreateObject("Microsoft.XMLDOM") 
   xml.async = False 
   xml.setProperty "ServerHTTPRequest", True 
   xml.Load ("http://www.iftach.org/TaxMatrix/charts/2Q2012.xml") 
   Dim paragraph1,paragraph2,paragraph3,paragraph4,paragraph5,paragraph6

   paragraph1 = xml.documentElement.childNodes(1).text
   paragraph2 = xml.documentElement.childNodes(2).text
   paragraph3 = xml.documentElement.childNodes(3).text
   paragraph4 = xml.documentElement.childNodes(4).text
   paragraph5 = xml.documentElement.childNodes(5).text
   paragraph6 = xml.documentElement.childNodes(6).text

   Set xml = Nothing 
%> 
<html> 
   <head> 
   <title></title> 
   </head> 
   <body> 
   <p align="center"><% = paragraph1 %></p>
   <p align="center"><% = paragraph2 %></p>
   <p align="center"><% = paragraph3 %></p>
   <p align="center"><% = paragraph4 %></p>
   <p align="center"><% = paragraph5 %></p>
   <p align="center"><% = paragraph6 %></p>
</body>
</html> 
```

我什至认为将它添加到 ADODB 记录集会很棒，然后我会将它一个一个地插入 SQL Server，或者只是将它全部循环在那里，但它只显示我需要在那里的行的列。请参见下面的代码：

```
<%
 Dim objRS
 Set objRS =  Server.CreateObject("ADODB.Recordset")
  objRS.ActiveConnection = "Provider=MSDAOSP; Data Source=MSXML2.DSOControl.3.0;"
  objRS.Open(Server.MapPath("2Q2012.xml"))

Response.Write(objRS.Fields(2) & "<br>") ' <-- Returns the Quarter only, that I need for the Quarter Field in the DB

'Response.Write(objRS.Fields(6) & "<br>") ' <-- Returns the entire xml page

Do While Not objRS.EOF

 objRS.MoveNext
 Loop

%>

<table border="1" width="100%">
 <%
 dim fld
 Response.Write("<tr>")
 For Each fld in objRS.Fields
 If fld.Name <> "$Text" Then
 Response.Write("<td>" & fld.Name & "</td>")
 End If
 Next
 Response.Write("</tr>")
 Do While Not objRS.EOF
 Response.Write("<tr>")
 For Each fld in objRS.Fields
 If fld.Name <> "$Text" Then
 Response.Write("<td>" & fld.Value & "</td>")
 End If
 Next
 Response.Write("</tr>")
 objRS.MoveNext
 Loop
 %>
 </table> 
```

再次，非常感谢您提供的任何建议、链接或任何帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:10:10.543

最后！！！我让它工作，如果有人需要解决方案，它如下：使用我在问题中发布的代码，我添加了以下代码：

注意：我知道这不是最好的方法，因为我不会关注 TAGS/ID/Names 但 xml 文件将始终保持相同的格式，所以我只是循环，剪下我需要的内容，然后插入/更新到数据库中。

```
 <%
    ' LOOP ALL OF THE FIELDS ONE BY ONE
     For x = 0 to xml.documentelement.childnodes.length - 1
     set XMLobjchildnodes = xml.documentelement.childnodes
     strXMLtxt=xml.documentElement.childNodes(x).text & "<br>"

    ' SETUP THE UPDATE FIELDS FOR SQL
     dim strTest
     strTest="objSQL(""IMP_STATE_" & Mid(strXMLtxt,1,2) & """)=" & Mid(strXMLtxt,46,7)

    ' SKIP THE Fi and 2Q because they are not States/Prov.
    if strTest="objSQL(""IMP_STATE_Fi"")=" OR strTest="objSQL(""IMP_STATE_2Q"")=" then
    else

    ' ALSO SKIP hi and U and CN because they also are not States/Prov.
    if InStr(strTest,"STATE_ht")>0 OR InStr(strTest,"STATE_U.")>0 OR InStr(strTest,"STATE_CN")>0 then
    else

    ' ADD YOUR SQL CONNECTION INFO. HERE AND THEN INSERT/UPDATE THE SQL DB

    end if
Next
    %> 
```

注意：通过进行小的更改，您可以将其设置为将数据插入 SQL 和/或更新，如果这对任何人来说都是一个问题，请让我知道我会更乐意提供帮助。

对于所有试图解决我的问题/问题的人，非常感谢你们的辛勤工作和努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:36:59.633

看看这里：[msxml DOM](http://msdn.microsoft.com/en-us/library/ms754523%28v=vs.85%29)

您应该使用 msxml 对象来读取 xml。然后你可以使用api查询xml的元素。

加载xml的示例代码：

```
<%
dim xml : set xml = server.createobject("Msxml2.DOMDocument.6.0")
dim xmlString : xmlString = getXMLHTTPResponse("http://www.iftach.org/TaxMatrix/charts/2Q2012.xml")
xml.loadxml(xmlString)

function getXMLHTTPResponse(url)
    dim tout, xmlhttp

    set xmlhttp = server.createObject("Msxml2.ServerXMLHTTP.6.0")
    with xmlhttp
        .setTimeouts 2000, 2000, 2000, 2000
        .open "GET", url, false
        .send()
        if .responseXML.xml = "" then
            getXMLHTTPResponse = .responseText
        else
            getXMLHTTPResponse = .responseXML.xml
        end if
    end with
end function
%> 
```

# ios - Instruments Energy Diagnostics -> 电池百分比

> ID：11122662
> 
> 赞同：1
> 
> 时间：2012-06-20T15:15:44.240
> 
> 标签：ios, instruments

我使用 Developer >> Logging for Energy Diagnostics 运行了几次长期电池测试。我已将它们全部发送到能够确定“能量使用水平”的仪器中。但是，是否也可以获取当时的电池百分比而不是“能源使用水平”。

我希望能够在应用程序运行期间绘制电池寿命百分比随时间的变化，以及确定我的应用程序何时从睡眠中唤醒或打开 GPS。

测试是在 iPhone 4、iOS 5.0.1 上完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:17:46.100

[Powergremlin](http://blog.palominolabs.com/2012/11/14/introducing-powergremlin/)并不完全符合您的要求，但它是[开源](https://github.com/palominolabs/powergremlin)的，因此可能会让您开始自己实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:23:36.103

可悲的是，这是不可能的。我最终编写了一个应用程序，该应用程序将在等待一段时间后将电池的百分比写入数据库。很遗憾，苹果自己的工具不能那样工作：\

# asp.net-mvc - 为什么我的视图模型属性最终为空或为零？

> ID：11122665
> 
> 赞同：0
> 
> 时间：2012-06-20T15:15:47.060
> 
> 标签：asp.net-mvc

我正在开发我的第一个 MVC 应用程序，但仍在搞清楚。

我有一个视图模型，此时它与我的域对象相同。我的控制器构建视图模型并将其传递给视图。该视图仅显示一些属性，因为我不希望为用户显示主键和/或外键，在主键的情况下，我需要拥有数据才能更新/删除数据库。

看来，除非我在视图中使用 viewmodel 属性，否则当我将 viewmodel 传回时，它会设置为默认值（数值类型为 0，引用类型为 null）。这是正确的行为吗？

我确认传递给编辑视图的视图模型确实包含所有属性（如我所料）。

问题 - 一旦视图被渲染，视图模型会发生什么？如果我的视图模型包含视图中未使用的属性，它们的值会消失吗？例如，当我单击编辑操作链接以在控制器上触发编辑操作时，传递给操作的视图模型不包含任何属性，除非它们在屏幕上可见。为什么？

顺便说一句，这是 ASP.NET MVC 4 RC。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T15:18:54.567

> 看来，除非我在视图中使用 viewmodel 属性，否则当我将 viewmodel 传回时，它会设置为默认值（数值类型为 0，引用类型为 null）。这是正确的行为吗？

是的，当您调用控制器操作时，您需要传递要在请求中绑定的所有属性。因此，例如，如果您使用 html`<form>`来调用您需要使用输入字段的操作。您可以使用隐藏字段，但它们必须存在，否则不会向控制器操作发送任何内容

> 问题 - 一旦视图被渲染，视图模型会发生什么？

它超出了范围，有资格进行垃圾收集。

> 如果我的视图模型包含视图中未使用的属性，它们的值会消失吗？

绝对地。但即使您在视图中使用这些属性，它们也会消失。例如，如果您只在视图内显示值，但在提交表单时不使用输入字段将它们发送回服务器，它们也会消失。

> 例如，当我单击编辑操作链接以在控制器上触发编辑操作时，传递给操作的视图模型不包含任何属性，除非它们在屏幕上可见。为什么？

因为视图模型不再存在。它不见了，垃圾收集了。这就是 HTTP 协议的工作原理。它是无国籍的。请求之间没有保留任何内容。如果您使用操作链接或其他任何内容，则必须将要在请求中填充的任何属性作为 POST 表单值或查询字符串参数包含在内。

如果用户不应该在视图中修改这些值，那么您可以简单地将 id 传递给控制器​​操作，这将允许此控制器操作使用此 id 从存储模型的任何位置（数据库或其他东西）检索模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:20:23.223

如果您的属性位于生成表单内部的任何辅助方法中，那么当您提交表单时`input HTML element`，它将在您的操作方法中可用。`HTTPost`如果您只是在 div/span 中显示它，它不会为您提供属性值。这就是 MVC 模型绑定的工作原理。

`HttpPOST`如果您使用这些 HTML 帮助程序，请期待您的操作中的值

```
@Html.TextBoxFor

@Html.DropDownFor

@Html.EditorFor

@Html.HiddenFor 
```

如果您使用这些值，请不要指望这些值

```
@Html.DisplayFor 
```

# javascript - 转义字符串中的“+”加号，以便在咖啡脚本/javascript中的正则表达式中使用

> ID：11122666
> 
> 赞同：3
> 
> 时间：2012-06-20T15:15:48.747
> 
> 标签：javascript, jquery, coffeescript, datatables

我正在运行一个正则表达式来过滤表中的行。过滤是在 Javascript 中完成的。

我正在编写coffeescript，但是一个Javascript 解决方案会很好——我可以自己将它翻译成coffeescript。

我有一个值`role`，其中包含我想使用正则表达式过滤的字符串。问题是字符串`role` *中可能嵌入了“+”号，也可能没有。* 加号是正则表达式搜索的特殊字符，需要在搜索字符串中进行转义。

我创建这样的正则表达式搜索字符串（coffeescript）：

```
"^"+role+"$" 
```

如何预处理`role`以转义任何“+”符号以便正则表达式起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:18:46.500

`+`远非唯一具有特殊含义的字符。这是一个将转义所有必要字符的函数：

```
function regex_escape(str) {
    return str.replace(new RegExp('[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]', 'g'), '\\$&');
} 
```

# css - 跨度元素的垂直对齐

> ID：11122668
> 
> 赞同：0
> 
> 时间：2012-06-20T15:15:52.507
> 
> 标签：css

我在垂直对齐方面遇到了一些问题。我想把我的`<span>›&lt;/span>`元素垂直集中。 [http://jsfiddle.net/vpVEf/](http://jsfiddle.net/vpVEf/)

在这个例子中，有没有办法将它自动​​集中为“li a”？请注意， a 元素是集中的，而不使用 line-height。 [http://jsfiddle.net/vpVEf/9/](http://jsfiddle.net/vpVEf/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:20:32.740

尝试使用 line-height 调整跨度的垂直对齐方式：

```
#MenuEventos li span{
    position: relative;
    float: right;
    font-size: 3.5em;
    color: white;
    font-family: serif;
    font-weight: bold;
    margin: auto 0px auto 0px;
    line-height: 44px; /* Adjust this as needed */
} 
```

示例：http: [//jsfiddle.net/vpVEf/1/](http://jsfiddle.net/vpVEf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:22:27.447

发生这种情况的原因是`a`标签有一个填充，将其中的所有内容下推 12 像素。

移除顶部/底部填充物并使用`line-height`使其变`68px`高。

```
padding: 0 12px;
line-height: 68px; 
```

它可能看起来不像，但这*确实*解决了问题。删除所有格式`span`以查看！但现在的问题是文本未在跨度内居中对齐。您也可以使用`line-height`来`span`调整它。

```
line-height: 55px; 
```

似乎运作良好。

[**演示**](http://jsfiddle.net/vpVEf/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:27:09.760

拿走`line-height: 2.8em;`你的`#MenuEventos li a`风格并将其移动到 `#MenuEventos li`风格中。

看到这个 jfiddle：http: [//jsfiddle.net/zFnJb/](http://jsfiddle.net/zFnJb/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T15:17:50.837

您需要使`<a>`元素向左浮动和`<span>`元素向右浮动。

# django - Django如何保存GET数据？

> ID：11122671
> 
> 赞同：0
> 
> 时间：2012-06-20T15:16:04.223
> 
> 标签：django

这是我的问题：

我有一个消息列表，可以使用同一页面上的表单进行过滤。此外，我可以通过单击在列表下方显示其中一条消息。

我的问题是，如果我过滤列表然后选择一条消息来显示它，过滤列表的 GET 数据将“丢失”。因此，所有消息都会再次显示在列表中。

当我单击消息时，如何显示消息并保持列表不变？

我的网址：

```
url(r'^inbox/$', view='inbox', name="kernel-networking-messages-inbox"),
url(r'^inbox/(?P<message_pk>\d+)/$', view='inbox_message', name="kernel-networking-messages-inbox-read"), 
```

我的看法：

```
class InboxView(SearchViewMixin):
    template_name = "kernel/networking/messages/inbox.html"
    form_class = InboxForm

inbox = InboxView.as_view()

class InboxMessageView(InboxView):
    def dispatch(self, request, *args, **kwargs):
        self.message = get_object_or_404(Message, pk=kwargs['message_pk'])
        return super(InboxMessageView, self).dispatch(request, *args, **kwargs)

    def get_context_data(self, **kwargs):
        context = super(InboxMessageView, self).get_context_data(**kwargs)
        context['message'] = self.message
        return context

inbox_message = InboxMessageView.as_view() 
```

收件箱.html：

```
<form action="" method="get">
...
<input type="submit" value="Search"/>
<table>
...
</table>
{% if message %}
// display message
{% endif %} 
```

我试图尽可能清楚：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:36:47.377

我看到两个选项。

1：使用Django的[会话框架](https://docs.djangoproject.com/en/dev/topics/http/sessions/)。

当您收到过滤请求时，将过滤器选项存储在会话中：`request.session['filter_options'] = filter_option_dict`

然后，当您加载页面并且在 request.GET 中看不到任何过滤选项时，请检查会话中是否有任何选项：

```
if(len(request.GET) > 0):
    #get filter options from request.GET
    #save filter options to session
elif('filter_options' in request.session):
    #get filter options from session
else:
    #no filter options, display without filtering 
```

请注意，会话是为临时数据设计的，并且特定于一台计算机上的一个浏览器。对于这个用例来说，这不是问题，但要记住这一点。

2：使用ajax加载消息而不改变页面的其余部分。在服务器上，您创建一个视图，该视图返回没有页面标题或任何其他格式的消息，并在前端创建 javascript 以发送请求并将检索到的消息插入页面。使用 JQuery 很容易做到这一点，尽管没有它也可以做到。

这将是我的首选解决方案，因为从用户的角度来看，以交互方式更新自己的网站比每次点击链接时都必须刷​​新的网站感觉要好得多。

# facebook - Facebook登录问题

> ID：11122681
> 
> 赞同：1
> 
> 时间：2012-06-20T15:16:35.033
> 
> 标签：facebook, authentication, facebook-social-plugins, fbconnect, facebook-javascript-sdk

这是我们的 fb 或旧方式登录链接：http: [//www.greeceinsiders.com/login](http://www.greeceinsiders.com/login)

fb-login 对你有用吗？当我单击它时，它会将我重定向到同一页面。

有时它有效有时无效。当用户使用 fb 登录时，我们会在我们的 mysql 数据库中收集他的 vredentials，例如电子邮件、城市、姓名。有没有人有同样的问题？那里有什么好的教程，一步一步地解释它并且适用于当前的fb api吗？

欢迎任何建议或反馈，谢谢！一些代码

找到了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:26:48.687

我喜欢使用 FB.login 方法。这允许我设置我想要的权限（例如电子邮件）并通过 Facebook 库（如[https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk) ）访问我服务器上的信息。[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)上也有很好的教程：

```
 FB.login(
        function(response) {
            if (response.authResponse) {
                $.ajax({
                    url: Global.base_url + 'user/facebook_log_in/',
                    dataType: 'json',
                    success: function(data) {}
                });
            }
            else {
                // Display facebook error
            }
        }, 
    {
        scope: 'email'
    }); 
```

# styling - 更改 JavaFX MenuButton 上的下拉指示器图像？

> ID：11122682
> 
> 赞同：4
> 
> 时间：2012-06-20T15:16:37.543
> 
> 标签：styling, javafx-2

在我的应用程序中，我使用 a`MenuButton`来提供操作的下拉列表。a 上的默认下拉指示器`MenuButton`是一个向下的黑色三角形。我想将其更改为指向下方的白色三角形以匹配我的文本颜色。

以防我不清楚，这是一个应该清除它的屏幕截图。

![黑色三角形](../Images/7b6f1a18ec227fab6a4f791a913e5575.png)

我尝试在 fxml 文件中放置一个图形，如下所示：

```
<MenuButton contentDisplay="RIGHT" graphicTextGap="10.0" layoutX="92.0" layoutY="73.0" mnemonicParsing="false" styleClass="toolbar-button" text="MenuButton">
  <graphic>
    <ImageView fitHeight="4.0" fitWidth="7.0" mouseTransparent="true" preserveRatio="true">
      <image>
        <Image url="@Arrow_Down.png" preserveRatio="true" smooth="false" />
      </image>
    </ImageView>
  </graphic>
  <items>
    <MenuItem mnemonicParsing="false" text="Action 1" />
    <MenuItem mnemonicParsing="false" text="Action 2" />
  </items>
</MenuButton> 
```

但这给了我一个黑白三角形：

![白色和黑色三角形](../Images/d68de4a172c9a2ae204150b81fa2ceac.png)

如果我能以某种方式隐藏可以工作的黑色三角形，但似乎应该有一种方法可以将菜单按钮设置为白色而不是白色。

这里是 Sample.fxml 给那些想要帮助的人：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<AnchorPane id="AnchorPane" prefHeight="200.0" prefWidth="320.0" xmlns:fx="http://javafx.com/fxml">
  <children>
    <MenuButton contentDisplay="RIGHT" graphicTextGap="10.0" layoutX="92.0" layoutY="73.0" mnemonicParsing="false" styleClass="toolbar-button" text="MenuButton">
      <graphic>
        <ImageView fitHeight="4.0" fitWidth="7.0" mouseTransparent="true" preserveRatio="true">
          <image>
            <Image url="@Arrow_Down.png" preserveRatio="true" smooth="false" />
          </image>
        </ImageView>
      </graphic>
      <items>
        <MenuItem mnemonicParsing="false" text="Action 1" />
        <MenuItem mnemonicParsing="false" text="Action 2" />
      </items>
    </MenuButton>
  </children>
  <stylesheets>
    <URL value="@test.css" />
  </stylesheets>
</AnchorPane> 
```

test.css：

```
root { 
    display: block;
}

.toolbar-button {
    -fx-background-color: #006699;
    -fx-padding: 2 4 4 4;
    -fx-text-base-color: #FFFFFF;
    -fx-font-weight: bold;
    -fx-font-size: 12px;
}

.toolbar-button:hover {
    -fx-background-color: #B2E1FF;
    -fx-padding: 2 4 4 4;
    -fx-text-base-color: #000000;
    -fx-font-weight: bold;
    -fx-font-size: 12px;
} 
```

以及运行它的 Test.java：

```
package test;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class Test extends Application {

    public static void main(String[] args) {
        Application.launch(Test.class, args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));

        stage.setScene(new Scene(root));
        stage.show();
    }
} 
```

**那么如何让黑色三角形变成白色三角形呢？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T16:58:02.350

经过一番挖掘，我找到了答案。原来 MenuButton 不使用按钮的图像，而是使用`-fx-shape`css 属性来执行此操作。在 caspian.css 文件中，它应用于`.menu-button .arrow`和`.menu-button:openvertically .arrow`部分。由于我已经将 应用`toolbar-button`到我的 MenuButton，我只是将以下内容添加到我的 css 文件中：

```
.toolbar-button .arrow {
    -fx-background-insets: 1 0 -1 0, 0;
    -fx-background-color: -fx-mark-color, #FFFFFF;
    -fx-padding: 0.25em; /* 3 */
    -fx-shape: "M 0 -3.5 v 7 l 4 -3.5 z";
}

.toolbar-button:hover .arrow {
    -fx-background-insets: 1 0 -1 0, 0;
    -fx-background-color: -fx-mark-highlight-color, -fx-mark-color;
    -fx-padding: 0.25em; /* 3 */
    -fx-shape: "M 0 -3.5 v 7 l 4 -3.5 z";
}

.toolbar-button:openvertically .arrow {
    -fx-padding: 0.166667em 0.333333em 0.166667em 0.333333em; /* 2 4 2 4 */
    -fx-shape: "M 0 0 h 7 l -3.5 4 z";
} 
```

这甚至允许我在悬停时将箭头的颜色改回黑色。

# regex - 有人可以解释一下这个正则表达式的贪婪吗

> ID：11122693
> 
> 赞同：2
> 
> 时间：2012-06-20T15:17:16.437
> 
> 标签：regex, regex-greedy

我有一些文本，其中每一行文本都有一些好词和一些坏（不需要的）词。所以模式可能看起来像这样

```
good1-good2 good3 bad1-good4-bad2 some more good words
good1-good2 good3 bad1 bad2 
good1-good2 good3 bad1 bad2 bad3 
```

现在我需要在一行中拒绝所有内容，包括第一个坏词所以

`good1-good2 good3 bad1-good4-bad2 some more good words`应该成为`good1-good2 good3`

`good1-good2 good3 bad1 bad2`应该成为`good1-good2 good3`

`good1-good2 good3 bad1 bad2 bad3`应该成为`good1-good2 good3`

我正在使用python所以这就是我所做的

```
p=re.compile('([\w \d-]+) (bad1|bad2|bad3).+',re.I)
m=p.search('good1-good2 good3 bad1-good4-bad2 ')
m.group(1) 
```

这给出`good1-good2 good3` 了我想要的但是

```
m=p.search('good1-good2 good3 bad1 bad2 ')
m.group(1) 
```

返回`good1-good2 good3 bad1` 我认为因为`+`是贪婪的所以`+`in`([\w \d-]+)`继续匹配字符直到行尾然后它回溯以找到最后一个坏词，在这种情况下是`bad2`但是当我这样做时

```
p=re.compile('([\w \d-]+) (bad1|bad2|bad3).+',re.I)
m=p.search('good1-good2 good3 bad1 bad2 bad3')
m.group(1) 
```

它再次返回`good1-good2 good3 bad1`。你能解释一下吗？因为我对正则表达式的理解可能有问题`greediness`？虽然我已经想出通过使用这样的正则表达式来解决这个问题，`([\w \d-]+?) (bad1|bad2|bad3).+`但我仍然不明白为什么使用`([\w \d-]+) (bad1|bad2|bad3).+`总是返回第一个坏词（在这种情况下是 bad1）？

谢谢你的时间。

**编辑：** 但是假设我有一个只有好词没有坏词的模式， `good1-good2 good3--only good words`那么正则表达式应该是什么？我试过这个正则表达式`([\w \d-]+?) ?(bad1|bad2|bad3)?.*`，但这会返回模式的第一个字母。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:30:57.767

关于本案：

```
m=p.search('good1-good2 good3 bad1 bad2 ') 
```

你是对的。 `([\w \d-]+)`是贪婪的，所以它尽可能地“吃”并回溯。

然而，关于这种情况：

```
m=p.search('good1-good2 good3 bad1 bad2 bad3') 
```

您可能没有看到的是，您必须*在 bad word 之后至少*`.+`匹配一个字符。这就是为什么正则表达式不能匹配为坏词的原因：如果匹配，它将用完字符来匹配任何内容。因此，它再次回到原点。更改您的以查看差异。这只是因为您在第一种情况下碰巧有一个额外的空间，*即*那里的事情“按预期工作”。*`bad3``.+``bad2``.+``.*` *`bad2`**

 **换句话说，一些不幸的巧合让你感到困惑；但你对贪婪的理解是正确的。

**编辑**

对于问题的已编辑部分，由@lovesh 从以下评论中撰写：

```
([\w \d-]+?) ?(bad1|bad2|bad3|$) 
```**

# vb.net - ASP.Net MVC3 VB.Net Custom LabelFor HtmlHelper 不工作

> ID：11122695
> 
> 赞同：1
> 
> 时间：2012-06-20T15:17:19.463
> 
> 标签：vb.net, asp.net-mvc-3, razor, extension-methods, html-helper

我正在尝试创建一个自定义 LabelFor 帮助程序以默认应用，而不是 System.Web.Mvc.Html 中包含的标准 LabelFor 帮助程序。我希望我的 LabelFor 采用 PascalCase 模型属性并制作一个显示为多个单词的标签。例如，该属性`FirstName`将显示为“名字”。

我发现[这篇文章](http://weblogs.asp.net/imranbaloch/archive/2010/07/03/asp-net-mvc-labelfor-helper-with-htmlattributes.aspx)展示了如何制作一个允许添加 html 属性的自定义 LabelFor 助手。

我在 VB.Net 中重新创建了这个助手并修改它来做我想做的事，但我无法让它工作。

```
Imports System.Linq.Expressions
Imports System.Runtime.CompilerServices

Public Module LabelExtensions

    <Extension()> _
    Public Function LabelFor(Of Tmodel, TValue)(html As HtmlHelper(Of Tmodel), expression As Expression(Of Func(Of Tmodel, TValue))) As MvcHtmlString
        Dim metadata As ModelMetadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData)
        Dim htmlFieldName As String = ExpressionHelper.GetExpressionText(expression)
        Dim labelText As String = If(metadata.DisplayName, If(metadata.PropertyName, htmlFieldName.Split(".").Last()))

        If String.IsNullOrEmpty(labelText) Then Return MvcHtmlString.Empty

        labelText = Regex.Replace(labelText, ".[A-Z]", Function(m) m.ToString()(0) & " " & Char.ToLower(m.ToString()(1)))

        Dim tag As TagBuilder = New TagBuilder("label")
        tag.Attributes.Add("for", html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(htmlFieldName))
        tag.SetInnerText(labelText)

        Return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal))
    End Function 
```

该示例包含此模块，`Namespace System.Web.Mvc.Html`但是当我将名称空间声明添加到此模块时，项目其余部分中的所有内容都变得混乱。例如，我的每个模型都有一个作为`Guid`数据类型的主键属性，一旦我将上面的命名空间添加到模块中，我就会收到几个错误，说明这些错误`System.Guid is not defined`以及其他类似错误。

我试图将我的项目命名空间导入到视图中以使用自定义帮助程序，但随后我收到一条错误消息`Overload resolution failed because no 'LabelFor' is most specific for these arguments`。

我被困住了。有人可以帮忙吗？

我试图避免`DisplayName`为我在许多模型中拥有的每个 PascalCase 属性指定一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:53:25.550

如果我将扩展方法命名为 LabelFor 以外的名称，我就能成功地做到这一点。当我将它命名为 LabelForPascalCase 时，我能够在我的视图中使用该函数。我认为扩展方法没有重载现有方法，因为它们具有相同的签名。

# php - 将 PHP 变量传递到 Java 脚本 window.location

> ID：11122696
> 
> 赞同：4
> 
> 时间：2012-06-20T15:17:21.773
> 
> 标签：php, javascript, window.location

我正在尝试将 php 变量传递到 java 脚本 window.location 中，该脚本在从数据库中删除项目后将用户返回到当前列表视图。我似乎无法使语法正确。

代码：

```
function confirmation(a) {
var currString = "<? echo $currString ?>";
var answer = confirm("Are you sure you want to delete this item?")
if (answer){
    alert("The item has been deleted")
    window.location = "list.php?s='. $currString .'&=delete=true&id=" + a;
}
else{
    alert("The item has not been deleted")
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T15:19:03.720

试试这个：

```
function confirmation(a) {
    var currString = "<?php echo $currString ?>";
    var answer = confirm("Are you sure you want to delete this item?");
    if (answer){
        alert("The item has been deleted")
        window.location = "list.php?s=" + currString + "&=delete=true&id=" + a;
    }
    else{
        alert("The item has not been deleted");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:26:37.133

您正在将 php 变量传递给 JS 变量 var currString = "";

并且在`window.location`您再次传递错误的 php 变量时，

所以这样做

```
window.location = "list.php?s=" + currString + "&=delete=true&id=" + a; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T07:36:52.100

语法问题已由其他答案解决，但您需要注意一个额外的问题：在 URL 中使用变量时，[URI 对变量进行编码：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

```
window.location = "list.php?s="
                + encodeURIComponent(currString)
                + "&=delete=true&id=" + a; 
```

否则你会遇到你的变量包含像`&`.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-29T07:21:53.290

```
echo "<script>alert('System info has been Save')</script>";
echo "<script>window.location='customer_detail.php?
customer_id=".$customer_id."'</script>"; 
```

# java - 如何根据主动视角阻止某些视图？

> ID：11122703
> 
> 赞同：0
> 
> 时间：2012-06-20T15:17:51.320
> 
> 标签：java, eclipse, eclipse-rcp

我希望能够最小化、调整大小甚至关闭视图，然后当我觉得它可以从菜单中恢复它们时。

一个具体的例子：
我有视图 V1、V2、V3、V4、V5、V6、V7 和观点 P1、P2、P3。如果我切换到透视 P1，视图 V1 和 V2 会显示，但如果我想要我也可以打开 V4，其余视图不可用。
如果我切换到透视 P2，视图 V3 和 V5 会显示，但如果我想要我也可以打开 V4 和 V6，其余视图不可用。
如果我切换到透视 P3，会显示视图 V1 和 V3，但如果我想要我也可以打开 V4、V6 和 V7，其余视图不可用。
因此，根据哪个视角处于活动状态，我只能访问特定的一组视图

关于我如何可以并且应该这样做的任何建议？

感谢你们

LE：顺便说一句，我想以编程方式执行此操作，以便我可以在应用程序中实现这些规则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:51:56.060

只需创建自定义透视图：http: [//www.newyyz.com/ntgsite/tag/custom-perspective/](http://www.newyyz.com/ntgsite/tag/custom-perspective/)

然后，您可以拥有任意数量的视角，并根据您想要的视图进行定制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:19:17.433

您*不应该*试图禁止在这些视角中创建其他视图。这正是使 Eclipse 成为每个用户的良好可定制工具的原因。*您*肯定不知道*我*作为用户真正需要什么视图，您只能猜测并创建一些好的默认视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:13:21.780

除了[@Bananeweizen](https://stackoverflow.com/users/44089/bananeweizen)提到的，您还可以创建固定视角。它们阻止用户在该透视图中打开其他视图。这只是默认情况下，您必须在允许用户打开任何视图**或**为他们提供一组固定视图之间进行选择。

没有您可以否决的 preViewOpen 事件。您可以添加一个部件侦听器，当您不想要的部件打开时，安排一个`UIJob`隐藏该部件......但在这种情况下用户会看到闪烁。

# java - 如何使用 JSOUP 直接忽略此标签以仅使用文本信息？

> ID：11122708
> 
> 赞同：2
> 
> 时间：2012-06-20T15:18:03.073
> 
> 标签：java, jsoup

我正在制作一个刮取产品价格的刮刀，我需要像这个网站 div 类一样忽略它，但它对于所有网站都是可变的，所以这对我来说真的是个问题。你可以在这里看到我刮第一个元素，它是这样的

```
1 - <div class="ProductPrice"> 
     <span id="ctl00_ContentPlaceHolder1_Category1_ctrl_0_ctrl_7_mainGrid_ctl00_PUnit_lblPriceWithTax">47,00 TL</span> 
    </div> 
```

然后我刮第二个这个再次刮标签（标签名称可以更改，所以请在回答之前考虑这个）

```
 2 - <span id="ctl00_ContentPlaceHolder1_Category1_ctrl_0_ctrl_7_mainGrid_ctl00_PUnit_lblPriceWithTax">47,00 TL</span> 
```

我的代码是：

```
Elements allElements = newDocument.getAllElements();
        for (int j = 0; j < allElements.size(); j++) {
            Element element = allElements.get(j);
            if (element.text().matches(regex){
             // Writing to console.
            }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:56:30.533

我会尝试（未经测试的代码）：

```
Elements elements = newDocument.select("div[class*=ProductPrice]");
for (Element element : elements) {
    Element inner = element.html();
    //do whatever you want with "inner", containing your span
} 
```

编辑：在您发表评论后，我认为您应该使用`Elements elements = newDocument.select("*:matches(regex)");`, 和“正则表达式”来提取价格所需的正则表达式。这应该为您提供所需的元素列表，而无需使用`element.html();`：

```
Elements elements = newDocument.select("*:matches("+regex+")");
for (Element element : elements) {
    //do whatever you want with "inner", containing your span
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:45:49.527

```
 while (loopBool)
    {
        if (element.children() != null)
        {
            if (element.children().size() >= k)
            {
                if (!element.child(k).text().matches(regex))
                {

                    k++;
                }
                else
                {
                    element.empty();
                    loopBool = false;
                }

            }
            else
            {
                k = 0;
                element = element.child(k);
            }
        }

    } 
```

我用控制元素解决了这个问题有一个孩子？然后如果它有孩子然后检查他们匹配正则表达式，如果他们不匹配只是循环孩子找到可接受的元素。

# ios - 提交应用后，应用内购买不起作用

> ID：11122714
> 
> 赞同：1
> 
> 时间：2012-06-20T15:18:26.657
> 
> 标签：ios

我创建了我的应用程序并添加了应用程序内购买项目。在我提交应用程序之前，我在 iPhone 设备上使用测试用户多次测试了购买功能，效果很好。但是在我提交应用程序后，所有购买项目都不起作用，这导致我的应用程序被拒绝。（我确定我在提交之前选择了所有 iap 生产）现在请求的产品信息和购买交易都不起作用。但在提交应用程序之前，两者都运行良好。我调查了几天，无法解决问题。如果您能提供帮助，我将不胜感激。非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:18:15.303

只需确保：您确实看到您用于测试应用购买的唯一应用 ID 也用于配置文件？

干杯，约尔格

# spring - 为什么尝试重建 MySQL 数据库时 CloudFoundry 上的连接被拒绝

> ID：11122715
> 
> 赞同：0
> 
> 时间：2012-06-20T15:18:29.010
> 
> 标签：spring, spring-mvc, cloud-foundry

我能够通过 Spring 的 jdbc:initialize-database 进程创建一些 MySQL 表。现在，每次我尝试运行 SQL 脚本来删除/创建表时，都会收到拒绝连接的响应。此外，在 STS 中，我在 Application Services 框中没有 MySQL 条目，但我在 Instances 框中看到一个条目，其中 id、主机、cpu、内存、磁盘、正常运行时间全为 0。当我尝试添加 MySQL 服务时，我收到“服务名称已被使用”的错误......所以，我想我已经扭曲了一些东西，只是想重置我的 MySQL 数据库。数据无关紧要，我可以轻松地重新开始。

```
 ERROR: org.springframework.web.servlet.DispatcherServlet - Context initialization failed
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0': Invocation of init method failed; nested exception is org.springframework.dao.DataAccessResourceFailureException: Failed to execute database script; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Communications link failure

    Last packet sent to the server was 0 ms ago.)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
        at javax.servlet.GenericServlet.init(GenericServlet.java:212)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
    Caused by: org.springframework.dao.DataAccessResourceFailureException: Failed to execute database script; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Communications link failure 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:25:35.793

目前，cloudfoundry.com 存在一个影响服务的错误。如果用户创建了一个名为“sample”的服务并且用户 b 尝试创建一个同名的服务（可以是任何服务）“sample”，用户 b 将看到“错误 506 服务名称已存在”错误。@Cloud Foundry 团队知道这一点，他们正在努力。

因此，暂时尝试创建一个具有不同名称的服务，您应该很可能会创建该服务。

# c# - 行动 与虚拟方法

> ID：11122717
> 
> 赞同：1
> 
> 时间：2012-06-20T15:18:34.253
> 
> 标签：c#, .net, lambda, virtual

考虑我有一个游戏创建框架，有一个名为 Game 的基本类。

```
// Action version
public class Game 
{
    public Action<float> OnUpdate;
    public void Update(float mFrameTime) { OnUpdate.Invoke(mFrameTime); }
}

// Virtual version
public class Game 
{
    public virtual void Update(float mFrameTime) {}
} 
```

* * *

哪一个是最好的方法？（设计方面和性能方面）

订阅 OnUpdate 动作（而不是继承 Game 类），还是继承 Game 类并覆盖虚拟方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:21:14.540

这取决于`Update`通知的目标受众是谁。如果它仅用于派生类，那么`virtual`方法是一种很好的方法。如果它用于派生类和/或任意消费者，那么事件样式模式是正确的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:19:50.343

我宁愿引发事件也不愿拥有`Action<T>`. 这是 .NET 中的常见模式：

```
public class Game 
{
    public event EventHandler<SomeEventArgs> Update;
    protected virtual void OnUpdate(float mFrameTime) { // invoke event here }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:22:59.213

这取决于你的框架的其余部分是什么样的，以及你打算用这个类做什么。如果这个类只是提醒其他类该更新了，那么您将需要一个基于事件的系统。如果这是所有游戏派生的基类，那么您可能需要一个覆盖。没有答案是 100% 正确的——这完全取决于你想要用你的设计来完成什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T15:26:45.963

不幸的是，我缺乏知识来回答从性能角度来看哪些选项会更有效，但从设计角度来看，我建议重写 Update 方法，原因如下：

1.  它将所有更新逻辑保存在一个位置。
2.  它允许您轻松监控更新操作的顺序。

正如其他人所说，这取决于课程的目的，我基于这是一个“游戏”课程这一事实做出假设。没有理由不能使用触发事件的虚拟方法来实现两者。这将允许集中定位大部分更新代码，并且可以选择元素根据需要订阅更新事件。

当我自己处理相同的问题时，我通常采用虚拟方法方法，尽管为了方便和控制目的，我将更新分解为多个部分。

# arrays - 计算存储在哈希中的数组元素

> ID：11122724
> 
> 赞同：1
> 
> 时间：2012-06-20T15:18:50.027
> 
> 标签：arrays, perl, hash, count

如何计算存储在哈希中的数组元素？当我想改变元素时，我会这样做：

```
$myObject->{document}->[$i]->{myValue}; 
```

不知何故，我不知道如何获得文件的数量。

我是 Perl 新手，我尝试过的所有方法都适用于常规数组，但不适用于存储在哈希中的数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:21:17.137

只需取消引用arrayref：

```
my $count = @{ $myObject->{document} }; 
```

# tridion - 环境数据框架从 Java 中的 taf:server:variables 获取 REMOTE_USER

> ID：11122729
> 
> 赞同：1
> 
> 时间：2012-06-20T15:19:04.190
> 
> 标签：tridion, tridion2009, tridion-content-delivery

我的网站在 .Net 上运行，我使用的是 SDL Tridion 2009。当用户登录时，我可以看到 REMOTE_USER 变量正确存储在声明存储的 taf:server:variables 组中（使用 .net 脚本）。

在我的墨盒（java）中，我试图提取这个值，但是当打印声明存储中的所有内容时，我可以看到这个值是空白的。

我的 Java 代码如下所示：

```
Map serverParameters = (Map)claimStore.get(WebClaims.SERVER_VARIABLES);

for (Object key: serverParameters.keySet()) {
  log.debug("Key : " + key.toString() + " Value : " + serverParameters.get(key));
} 
```

**更新：**

我的墨盒配置包含以下输入声明：

```
<InputClaims>
   <ClaimDefinition Uri="taf:server:variables" />
</InputClaims> 
```

不幸的是，这没有帮助，我也试过 taf:server:variables:remoteuser / remote_user / * 没有成功。

当我检查日志时，我看到键 REMOTE_USER 但值为空白。

我想知道是否有其他人见过这种情况并知道解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:37:42.863

如果请求是在没有身份验证的情况下完成的（即允许匿名访问），REMOTE_USER 为空是完全有效的。

所以这似乎是最明显的问题。您不应该期望它总是被设置，但是您当然可以为您的服务器上的相关 URL 强制执行身份验证方案，以便在您希望您的墨盒处理的情况下正确填充它。

PS 在这种情况下，输入声明部分不相关，因为服务器变量不是由墨盒设置，而是由 HTTP 模块设置。输入和输出声明仅用于确定墨盒之间的依赖关系（以及顺序）。

# antixsslibrary - 在 Microsoft.Security.Application.Sanitizer.GetSafeHtmlFragment 中允许本地 URL

> ID：11122730
> 
> 赞同：0
> 
> 时间：2012-06-20T15:19:06.950
> 
> 标签：antixsslibrary

Microsoft.Security.Application.Sanitizer.GetSafeHtmlFragment 似乎全部`<a href="">link</a>`剥离`<a>link</a>`

无论如何要保留本地 URL，例如`<a href="/Product/1">`将其传递到 Sanitizer.GetSafeHtmlFragment 时？

注意：我使用的是 AntiXSS 4.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:58:41.160

AntiXSS 库已经[损坏](http://eksith.wordpress.com/2012/02/13/antixss-4-2-breaks-everything/)了几个月。不幸的是，没有办法解决这个问题。要么回滚到以前的版本，要么搜索其他要使用的东西。

# dart - 如何在 Dart 中读取控制台输入/标准输入？

> ID：11122732
> 
> 赞同：41
> 
> 时间：2012-06-20T15:19:12.490
> 
> 标签：dart, dart-io

如何从`stdin`Dart 中读取控制台输入？

`scanf`Dart 中有一个吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-08-12T11:57:17.223

*stdin*的*readLineSync()*方法允许从控制台捕获字符串：

 *```
import 'dart:convert';
import 'dart:io';

void main() {
  print('1 + 1 = ...');
  var line = stdin.readLineSync(encoding: utf8);
  print(line?.trim() == '2' ? 'Yup!' : 'Nope :(');
} 
```

旧版：

```
import 'dart:io';

main() {
    print('1 + 1 = ...');
    var line = stdin.readLineSync(encoding: Encoding.getByName('utf-8'));
    print(line.trim() == '2' ? 'Yup!' : 'Nope :(');
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-15T20:33:22.990

以下应该是从标准输入读取输入的最新 dart 代码。

```
import 'dart:async';
import 'dart:io';
import 'dart:convert';

void main() {
  readLine().listen(processLine);
}

Stream<String> readLine() => stdin
    .transform(utf8.decoder)
    .transform(const LineSplitter());

void processLine(String line) {
  print(line);
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-01-18T12:36:05.917

```
import 'dart:io';

void main(){
  stdout.write("Enter your name : ");
  var name = stdin.readLineSync();
  stdout.write(name);
} 
```

输出

```
Enter your name : Jay
Jay 
```

默认情况下 readLineSync() 将输入作为字符串。但是如果你想要整数输入，那么你必须使用 parse() 或 tryparse()。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-15T18:55:26.253

使用像 StringInputStream 这样的 M3 dart 类被替换为[Stream](http://api.dartlang.org/docs/releases/latest/dart_async/Stream.html)，试试这个：

```
import 'dart:io';
import 'dart:async';

void main() {
  print("Please, enter a line \n");
  Stream cmdLine = stdin
      .transform(new StringDecoder())
      .transform(new LineTransformer());

  StreamSubscription cmdSubscription = cmdLine.listen(
    (line) => print('Entered line: $line '),
    onDone: () => print(' finished'),
    onError: (e) => /* Error on input. */);

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-06T09:03:31.860

从 Dart 2.12 开始，启用了 null-safety，`stdin.readLineSync()`现在返回 a`String?`而不是 a `String`。

这显然让很多人感到困惑。我强烈建议阅读[https://dart.dev/null-safety/understanding-null-safety](https://dart.dev/null-safety/understanding-null-safety)以了解 null-safety 的含义。

具体来说`stdin.readLineSync()`，您可以通过检查`null`first 来解决此问题，对于*局部*变量，它会自动将 a 提升`String?`为 a `String`。这里有些例子：

```
// Read a line and try to parse it as an integer.
String? line = stdin.readLineSync();
if (line != null) {
  int? num = int.tryParse(line); // No more error about `String?`.
  if (num != null) {
    // Do something with `num`...
  }
} 
```

```
// Read lines from `stdin` until EOF is reached, storing them in a `List<String>`.
var lines = <String>[];
while (true) {
  var line = stdin.readLineSync();
  if (line == null) {
    break;
  }
  lines.add(line); // No more error about `String?`.
} 
```

```
// Read a line.  If EOF is reached, treat it as an empty string.
String line = stdin.readLineSync() ?? ''; 
```

请注意，您不应该**盲目**地这样做`stdin.readLineSync()!`。`readLineSync`返回 a`String?`是有原因的：它`null`在没有更多输入时返回。使用[空断言运算符](https://dart.dev/null-safety/understanding-null-safety#null-assertion-operator)( `!`) 要求运行时异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-04T00:21:59.703

请注意，虽然调用`stdin.readLineSync()`您的`isolate/thread`将被阻止，但不会`Future`完成其他任何操作。

如果你想`stdin` `String`异步读取一行，避免`isolate/thread`阻塞，这是这样的：

```
import 'dart:async';
import 'dart:convert';
import 'dart:io';

/// [stdin] as a broadcast [Stream] of lines.
Stream<String> _stdinLineStreamBroadcaster = stdin
    .transform(utf8.decoder)
    .transform(const LineSplitter()).asBroadcastStream() ;

/// Reads a single line from [stdin] asynchronously.
Future<String> _readStdinLine() async {
  var lineCompleter = Completer<String>();

  var listener = _stdinLineStreamBroadcaster.listen((line) {
    if (!lineCompleter.isCompleted) {
      lineCompleter.complete(line);
    }
  });

  return lineCompleter.future.then((line) {
    listener.cancel();
    return line ;
  });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-06T21:16:48.773

所有这些基于异步 API readLine*() 的解决方案都缺少语法糖，它使您能够在没有同步阻塞的情况下做所有事情，但编写得像同步代码。这在您编写代码以同步执行的其他语言中更加直观：

```
import 'dart:convert';
import 'dart:io';

Future<void> main() async {
  var lines = stdin.transform(utf8.decoder).transform(const LineSplitter());

  await for (final l in lines) {
    print(l);
  }
  print("done");
} 
```

这里的关键点是使用`async`and `await`：

*   `async`在您的方法上是必需的，因为您`await`用于与异步 API 调用交互
*   `await for`是在 a 上执行“类同步”代码`Stream`的语法（a 的相应语法`Future`是 just `await`）。

一旦有东西可以处理，就可以通过让下面的代码执行来为你`await`“解包”一个`Stream`/ 。`Future`现在您不再阻塞您的主线程 ( `Isolate`) 来完成这项工作。

有关更多信息，请参阅关于 async/await的[Dart 代码实验室。](https://dart.dev/codelabs/async-await)

（旁注：为函数声明任何返回值的正确方法`async`是将其包装在 a 中`Future`，因此`Future<void>`在这里。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-24T15:02:13.357

您可以使用以下行从用户那里读取**字符串**：

```
String str = stdin.readLineSync(); 
```

或以下行读取**数字**

```
int n = int.parse(stdin.readLineSync()); 
```

考虑以下示例：

```
import 'dart:io'; // we need this to use stdin
void main()
{
    // reading the user name
    print("Enter your name, please: ");
    String name = stdin.readLineSync();

    // reading the user age
    print("Enter your age, please: ");
    int age = int.parse(stdin.readLineSync());

    // Printing the data
    print("Hello, $name!, Your age is: $age");

  /* OR print in this way
   * stdout.write("Hello, $name!, Your age is: $age");
   * */
} 
```*

# jquery - 条件验证 newform.aspx

> ID：11122734
> 
> 赞同：0
> 
> 时间：2012-06-20T15:19:13.707
> 
> 标签：jquery, sharepoint

使用 Share Point Designer 2010。

我想进行客户端验证（jquery），但我不知道如何在提交表单之前运行我的代码。这样做的原因是我的表单有隐藏/显示某些字段的 jquery。因此，根据客户端的选择，不同的字段是强制性的。

最初我尝试使用内置的服务器端验证来做到这一点，但他们无法处理条件验证，我不认为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:34:07.287

我相信这段 JavaScript 可能会有所帮助，假设您也加载了 jQuery：

```
$("#btnSubmit").click(function(){
  return formIsValid(); //formIsValid returns false then the form is not submitted, if true then the submission continues
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T14:18:05.070

你可以使用 JavaScript

```
function PreSaveAction() {
    if(....)
    {
        alert("write something");
        return false;
    }

    return true; 
} 
```

我不知道这是否有帮助。

# z3 - 以前版本的 Z3 for linux

> ID：11122735
> 
> 赞同：2
> 
> 时间：2012-06-20T15:19:19.447
> 
> 标签：z3

有谁知道我们如何获得适用于 linux 64 的 z3 的早期版本？我使用的是 Ubuntu 10.04，它不包括 z3 3.2（我目前拥有的版本）所需的 GLIBGXX 3.4.14。所以我想知道我是否可以访问以前的版本。

另外，如果有人知道如何在 Ubuntu 10.04 上克服这个问题（也许是获得 GLIBCXX 3.4.14 的一种方法），我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:30:23.847

旧版本仍可在 Z3 网站上找到。但是，我们不提供指向它们的链接。您可以从

[http://research.microsoft.com/en-us/um/redmond/projects/z3/](http://research.microsoft.com/en-us/um/redmond/projects/z3/)

以下是完整列表：

```
z3-2.0.1.tar.gz
z3-2.10.tar.gz
z3-2.11.tar.gz
z3-2.12.tar.gz
z3-2.13.tar.gz
z3-2.15.tar.gz
z3-2.17.tar.gz
z3-2.18-x64.tar.gz
z3-2.18.1.tar.gz
z3-2.18.tar.gz
z3-2.19.1.tar.gz
z3-2.19.tar.gz
z3-2.2.tar.gz
z3-2.3.1.tar.gz
z3-2.3.tar.gz
z3-2.4.1.tar.gz
z3-2.4.tar.gz
z3-2.5.tar.gz
z3-2.6.tar.gz
z3-2.7.tar.gz
z3-2.8.tar.gz
z3-3.0-x64.tar.gz
z3-3.0.tar.gz
z3-3.1.tar.gz
z3-3.2.beta.tar.gz
z3-3.2.tar.gz
z3-4.0.tar.gz
z3-osx-3.2.1.tar.gz
z3-osx-3.2.tar.gz
z3-osx-4.0-preview.tar.gz
z3-osx-4.0.tar.gz
z3-osx32-4.0.tar.gz
z3-x64-2.15.tar.gz
z3-x64-2.18.tar.gz
z3-x64-2.19.tar.gz
z3-x64-3.0.tar.gz
z3-x64-3.1.tar.gz
z3-x64-3.2.beta.tar.gz
z3-x64-3.2.tar.gz
z3-x64-4.0.tar.gz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:21:18.750

莱昂纳多是对的，但是您在该页面中找不到下载链接。您必须使用程序列表并使用以下内容：

[http://research.microsoft.com/en-us/um/redmond/projects/z3/**z3-3.2.tar.gz**](http://research.microsoft.com/en-us/um/redmond/projects/z3/z3-3.2.tar.gz) . You can change the filename in bold by one in the list provided by Leonardo.

# python - 使用 minidom 从 XML 节点中提取文本

> ID：11122736
> 
> 赞同：3
> 
> 时间：2012-06-20T15:19:20.600
> 
> 标签：python, xml, parsing, minidom

我浏览了几篇帖子，但还没有找到任何可以解决我问题的答案。

示例 XML =

```
<TextWithNodes>
<Node id="0"/>TEXT1<Node id="19"/>TEXT2 <Node id="20"/>TEXT3<Node id="212"/>
</TextWithNodes> 
```

所以我明白，通常如果我提取`TextWithNodes`为 a`NodeList`我会做类似的事情

```
nodeList = TextWithNodes[0].getElementsByTagName('Node')
for a in nodeList:
    node = a.nodeValue
    print node 
```

我得到的只是`None`。我读过你必须写`a.childNodes.nodeValue`，但节点列表中没有子节点，因为看起来所有的`Node`Id 都是结束标签？如果我使用`a.childNodes`我得到`[]`.

当我得到它的节点类型时，`a`它是类型 1 和`TEXT_NODE`= 3。我不确定这是否有帮助。

我想提取`TEXT1`,`TEXT2`等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:26:45.107

`lxml`来自文档的解决方案：

```
from lxml import etree
from StringIO import StringIO

xml = etree.parse(StringIO('''<TextWithNodes>
<Node id="0"/>TEXT1<Node id="19"/>TEXT2 <Node id="20"/>TEXT3<Node id="212"/></TextWithNodes>'''))

xml.xpath("//text()")
Out[43]: ['\n', 'TEXT1', 'TEXT2 ', 'TEXT3'] 
```

您还可以提取特定节点的文本：

```
xml.find(".//Node[@id='19']").text 
```

这里的问题是 XML 中的文本不属于任何节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:54:26.950

您应该为您的任务使用 ElementTree api 而不是 minidom（如此处其他答案中所述），但如果您需要使用 minidom，这里有一个解决方案。

您要查找的内容已作为[`textContent`属性](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Node3-textContent)添加到 DOM 级别 3 。Minidom 仅支持 1 级。

但是，您可以使用此函数非常接近地模拟 textContent：

```
def textContent(node):
    if node.nodeType in (node.TEXT_NODE, node.CDATA_SECTION_NODE):
        return node.nodeValue
    else:
        return ''.join(textContent(n) for n in node.childNodes) 
```

然后您可以像这样使用它：

```
x = minidom.parseString("""<TextWithNodes>
<Node id="0"/>TEXT1<Node id="19"/>TEXT2 <Node id="20"/>TEXT3<Node id="212"/></TextWithNodes>""")

twn = x.getElementsByTagName('TextWithNodes')[0]

assert textContent(twn) == u'\nTEXT1TEXT2 TEXT3' 
```

注意我是如何得到父节点的文本内容的`TextWithNodes`。这是因为您的`Node`元素是这些文本节点的*兄弟姐妹*，而不是它们的父节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:43:40.880

使用[`xml.etree.ElemetTree`](http://docs.python.org/library/xml.etree.elementtree.html)（类似于@DiegoNavrro 在他的回答中使用的 lxml，除了标准库中的 etree 并且没有 XPATH 等），您可以尝试以下操作：

```
import xml.etree.ElementTree as etree

xml_string = """<TextWithNodes>
<Node id="0"/>TEXT1<Node id="19"/>TEXT2 <Node id="20"/>TEXT3<Node id="212"/>
</TextWithNodes>
"""

xml_etree = etree.fromstring(xml_string)

text = [element.tail for element in xml_etree]
# `text` will be ['TEXT1', 'TEXT2 ', 'TEXT3', '\n'] 
```

请注意，这假定 XML `<Node id="0"/>TEXT1`... 是正确的。因为文本跟在结束标签之后，所以它成为标签的尾部文本。它不是元素nodeValue，这就是为什么在你的问题代码中你得到`None`s。

如果您想解析一些 XML `<Node id="0">TEXT1</Node>`，则必须将行替换`[element.tail for element in xml_etree]`为`[element.text for element in xml_etree]`.

# c# - DataTrigger 内的情节提要不会在 RaisePropertyChanged 事件上多次触发

> ID：11122737
> 
> 赞同：1
> 
> 时间：2012-06-20T15:19:21.497
> 
> 标签：c#, wpf, xaml, mvvm, properties

我正在使用 MVVM 模型。

我有一个依赖属性，一个布尔值，称为“ `ResultOfUpdate`”。每当用户尝试运行命令时，它都会更改。

在此依赖属性的设置器中，我`RaisePropertyChanged()`在属性名称上调用“”方法。

它必然是`DataTrigger`这样的：

```
<DataTrigger Binding="{Binding ResultOfUpdate}"  Value="True">
    <DataTrigger.EnterActions>
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(TextBlock.Opacity)" 
                                               AutoReverse="True">
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"  Value="0"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.1"  Value="0.1"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.2" Value="0.2"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.3" Value="0.3"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.4" Value="0.4"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.5" Value="0.5"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.6"  Value="0.6"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.7" Value="0.7"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.8" Value="0.8"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.9" Value="0.9"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.1" Value="1"/>
                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
        </BeginStoryboard>
    </DataTrigger.EnterActions>
</DataTrigger> 
```

...

```
 <TextBlock Style="{StaticResource statusStyle}"  
            Opacity="0" Text="Results updated!"      
            FontSize="10" FontFamily="Segoe UI"/> 
```

我希望每次将`bool`其设置为 true 时，都会播放故事板。

令人困惑的是，这个情节提要在用户第一次运行命令时被正确触发，将依赖属性更新为 true。

后续尝试发现输入了依赖属性setter代码，调用了RaisePropertyChanged()方法——但是故事板没有再播放。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:54:36.507

您可能会使用这样的事件触发器：

```
<StackPanel>
    <TextBlock Text="I'm a text block" Name="theTextBlock"/>
    <Button Name="BeginButton">Begin</Button>
    <StackPanel.Triggers>
        <EventTrigger RoutedEvent="Button.Click" SourceName="BeginButton">
            <BeginStoryboard Name="MyBeginStoryboard">
                <Storyboard>
                    <DoubleAnimation
                        Storyboard.TargetName="theTextBlock"
                        Storyboard.TargetProperty="(TextBlock.Opacity)"
                        From="0.0" To="1.0" AutoReverse="True" Duration="0:0:1"/>
                    </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </StackPanel.Triggers>
</StackPanel> 
```

# java - 需要帮助让这个 Spring 3/AJAX/JSON 下拉人口工作

> ID：11122740
> 
> 赞同：0
> 
> 时间：2012-06-20T15:19:25.723
> 
> 标签：java, ajax, json, spring

我正在尝试执行 Spring MVC 3 ajax 调用来填充 json 序列化数据的下拉列表。

我看到的问题是我不确定 JSON Spring 为我的列表返回什么格式，以及为什么。

返回 Ajax 数据的方法如下所示：

```
@RequestMapping(value="/getMyObjects", method=RequestMethod.POST)
@ResponseBody
public List<MyObject> getMyObjects () {

 List<MyObject> myobjects = // populate list

 return myobjects; 
```

}

据我了解，这应该是我需要做的，对吧？

在我的应用程序日志中，我看到它确实将响应转换为 JSON，如下所示：

2012-06-20 11:08:21,125 DEBUG (AbstractMessageConverterMethodProcessor.java:139) - 写为 [[MyObject [id=1376, name=Something test], MyObject [id=1234 name=More test]]] 作为“应用程序/ json;charset=UTF-8" 使用 [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@d1b7e5]

但是那个 JSON 字符串对我来说看起来很奇怪，这有效吗？

我期待像 [{ id : 1376, name="Something test"}, { id : 1234, name="More test"}]

在客户端，当我收到响应并发出警报时，我看到它说它是一个像这样的对象数组：[Object object] [Object object]，我不知道如何处理这些数据。

我尝试：警报（数据）；-- 给出我刚才描述的输出 $(data).each(function() { alert(this.id); // undefined! });

如何使用这种 JSON 数据，或者如何将其转换为更易于管理的数据？

[编辑] 将我的客户端代码附加到我正在尝试的当前警报响应中： $.ajax({ type : "POST", url : "getMyObjects", success : function(data) { alert(data); // [Object object ] [Object object] alert(data.value); // 未定义 $(data).each(function() { alert(this.id); // 每次迭代未定义 }); }, error : function (XMLHttpRequest, textStatus, errorThrown) { alert(textStatus); } });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:08:20.957

Spring 3 提供了与[DWR](http://directwebremoting.org/dwr/documentation/server/integration/spring.html)（直接 Web 远程处理）的集成，这对于 AJAX 调用来说是非常酷的框架。在 DWR 中，您可以像在核心 java 中一样轻松处理列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:25:52.720

就是这个！你应该得到你所期望的 json 格式。无需更多代码（解析器、格式化）。

您没有看到的是返回的实际 json。好吧，您可以立即在浏览器中尝试您的 url，而无需像`http://yourdomain/yourservlet/getMyObjects`您一样通过 ajax 调用它，然后将看到您的 json 原样。

否则，将 firfox 与 firebug 一起使用，您可以看到您的 ajac 调用（请求和响应）

**更新**

```
$.ajax({
url: "path/to/your/url",
cache: false,
async: false,
success: function(data){                    
    for (var i = 0; i < data.length; i++) {
        alert(data[i].id);
        alert(data[i].name);
    }
} 
```

});

# css - Haml - 将 display:none 添加到 ap 标签不起作用

> ID：11122748
> 
> 赞同：3
> 
> 时间：2012-06-20T15:19:41.240
> 
> 标签：css, haml

我正在尝试这样做：

```
 %p{:style=>"display:none;"}
    %h4= t("labels.shortened_urls.fqdn_url")
    =f.url_field :fqdn_url, {:readonly => true}
    %small=link_to((t "links.shortened_urls.view"), :target => :_blank) 
```

但我无法让它停止显示。那里的第一行有什么我做的不对吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:52:16.283

您的 Haml 是正确的，因为它正确生成了样式属性，但您的 HTML 是错误的。`h4`不允许元素作为元素的直接子元素，因此浏览器会`p`隐式关闭. 实际上你有一个空的，它已经设置了。`p``h4``p``display:none`

尝试将 更改`p`为 a `div`，这是允许`h4`作为孩子的。（您可能也想更改其他内容）。

# sql-server - sql查询只删除一个重复行

> ID：11122749
> 
> 赞同：7
> 
> 时间：2012-06-20T15:19:43.193
> 
> 标签：sql-server

我有一张表，里面有一些重复的行。我只想删除一个重复的行。

例如，我有 9 个重复的行，所以应该只删除一行并且应该显示剩余的 8 行。

例子

日期调用称为持续时间 timestampp

```
2012-06-19 10:22:45.000 165 218 155 1.9 121
2012-06-19 10:22:45.000 165 218 155 1.9 121
2012-06-19 10:22:45.000 165 218 155 1.9 121
2012-06-19 10:22:45.000 165 218 155 1.9 121 
```

从上述日期应仅删除一行并应显示 3 行

```
2012-06-19 10:22:45.000 165 218 155 1.9 100
2012-06-19 10:22:45.000 165 218 155 1.9 100
2012-06-19 10:22:45.000 165 218 155 1.9 100 
```

从上述日期应仅删除一行并应显示 2 行

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T15:46:28.970

此解决方案允许您从每组重复项中删除一行（而不是一次只处理一个重复项）：

```
;WITH x AS 
(
  SELECT [date], rn = ROW_NUMBER() OVER (PARTITION BY 
    [date], calling, called, duration, [timestamp]
    ORDER BY [date])
  FROM dbo.UnspecifiedTableName
)
DELETE x WHERE rn = 2; 
```

顺便说一句，两者`[date]`和`[timestamp]`都是列名的糟糕选择......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:46:02.113

对于 SQL Server 2005+，您可以执行以下操作：

```
;WITH CTE AS
(
    SELECT  *, 
            ROW_NUMBER() OVER(PARTITION BY [date], calling, called, duration, [timestamp] ORDER BY 1) RN
    FROM YourTable
)
DELETE FROM CTE
WHERE RN = 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:24:02.770

你的桌子上有主键吗？

是什么让一行重复？同时？同一天？所有列都一样吗？

如果您有一个主键，您可以使用 TOP 函数仅选择一条记录并删除该行：

```
Delete from [tablename] where id in (select top 1 id from [tablename] where [clause]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T15:25:09.887

如果您不介意这些行的顺序，MySQL 中有一个命令：

```
DELETE TOP (numberOfRowsToDelete) FROM db.tablename WHERE {condition for ex id = 5}; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T15:47:13.070

由于我没有架构，因此我可能会分步解决：

1.  将行号应用于所有列的选择
2.  使用这些列进行分组并删除每个组中的 min(rownumber)

    * * *

编辑：

行号在内部查询中，并且行号在所有行中都会递增。在外部查询中，我对内部查询进行分组，并为每个组选择 min(rownumber)。由于每个组都由重复的行组成，因此我删除了每个组的 min(rownumber)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-31T01:25:53.947

using`LIMIT 1`将帮助您仅删除`1 ROW`与您的`DELETE`查询匹配的内容：

```
DELETE FROM `table_name` WHERE `column_name`='value' LIMIT 1; 
```

**之前**：

```
+----------------------+
| id  |  column_name   |
+-----+----------------+
| 1   |  value         |
+-----+----------------+
| 2   |  value         |
+-----+----------------+
| 3   |  value         |
+-----+----------------+
| 4   |  value         |
+-----+----------------+ 
```

**之后**：

```
+----------------------+
| id  |  column_name   |
+-----+----------------+
| 1   |  value         |
+-----+----------------+
| 2   |  value         |
+-----+----------------+
| 3   |  value         |
+-----+----------------+ 
```

# c# - 它是反模式吗？

> ID：11122751
> 
> 赞同：1
> 
> 时间：2012-06-20T15:19:45.280
> 
> 标签：c#, design-patterns, inheritance, anti-patterns

我经常看到这样的代码：

```
public abstract class AbstractDataReader
{
    public void Read()
    {
        var reader = new StreamReader(FileName);
        ........
    }

    protected abstract string FileName
    {
        get;
    }
}

public class DataReader : AbstractDataReader
{
    protected override string FileName
    {
        get { return "data.txt"; }
    }
} 
```

至于我，它接缝为反模式，因为 DataReader 类没有逻辑，如果不`AbstractDataReader`从它继承我就无法使用，我必须继承该类只是为了指定参数，而且我的工作速度比放那个慢通过构造函数传递参数。

但是我找不到这个反模式的名字。

有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T15:37:02.073

是的，这是一种反模式。抽象类已经规定了派生类的工作方式，这里的类层次结构比单个类没有优势。

如果抽象类改为调用纯虚函数来获取`StreamReader`，那将是有意义的。然后不同的派生类可以附加到文件、网络流或动态生成的数据。

这里的反模式是“违反开闭原则”（SOLID 的第二部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:45:48.360

是/否。

对我来说，这看起来像是一种抽象 setter 注入的尝试，我不确定这是一个好主意。它使事情变得不清楚并导致发布代码，但 setter 注入本身并不是反模式。

# ruby-on-rails-3.2 - 由于 Excon 错误，Carrierwave 上传到 Rackspace 失败

> ID：11122755
> 
> 赞同：0
> 
> 时间：2012-06-20T15:19:53.097
> 
> 标签：ruby-on-rails-3.2, carrierwave, rackspace-cloud

我有一个应用程序，它使用 Carrierwave 将图片上传到 Rackspace。我在生产服务器上每 20 小时收到一次错误，这绝对是奇怪的。它与授权有关。这是日志：

```
Completed 500 Internal Server Error in 6531ms

Excon::Errors::Unauthorized (Expected(201) <=> Actual(401 Unauthorized)
request => {:connect_timeout=>60, :headers=>{"Content-Type"=>"image/jpeg",
"X-Auth-Token"=>"my-auth-token", "Content-Length"=>439253,
"Host"=>"clouddrive.com:443"}, :instrumentor_name=>"excon", :mock=>false, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>.....response => #<Excon::Response:0xblah7420 
@body="401 Unauthorized\n\nThis server could not 
verify that you are authorized to        access the document you requested.
 Either you supplied the wrong credentials (e.g., bad password), 
or your browser does not understand how to supply the credentials required.\n\n 
```

我的凭据是好的，因为在生产机器上重启 Unicorn 后，一切都很好。

我搜索了日志消息，但我发现的所有内容都与 Excon 模块有关，该模块似乎正在开发中。

我建议如果重启解决了问题，我可能应该对 TTL 或我的 Rackspace ClouFiles 的某些设置进行更正。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:10:06.790

此错误已在 Fog v1.4 中修复。你最近更新了你的宝石吗？

# node.js - MongoDB：如何存储文件（Word、Excel 等）？

> ID：11122759
> 
> 赞同：8
> 
> 时间：2012-06-20T15:20:05.470
> 
> 标签：node.js, mongodb, mongoose

我还没有认真考虑将 Word、Excel 等文件存储到 MongoDB 中，我想知道 - 我是否能够在 MongoDB 中存储整个 docx 或 excel 文件，然后通过查询检索它们？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T15:23:19.247

使用 gridfs 是的。

Gridfs 是一种存储规范。它不是内置在数据库中，而是内置在驱动程序中。

您可以在这里找到更多信息：[http](http://www.mongodb.org/display/DOCS/GridFS) ://www.mongodb.org/display/DOCS/GridFS 。

正常的实现是将您的大文档分解为较小的文档，并将这些 aprts 存储在一个由您查询文件的 fs.files 集合掌握的块集合中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T15:21:51.177

MongoDB 是一个文档数据库，用于存储类似 JSON 的文档（称为[BSON](http://www.mongodb.org/display/DOCS/BSON)）。BSON 对象的最大大小为[16 兆字节](http://www.mongodb.org/display/DOCS/Documents#Documents-MaximumDocumentSize)，这对于某些用例来说可能太小了。

如果要存储任意大小的二进制数据，可以使用 GridFS ( [http://www.mongodb.org/display/DOCS/GridFS+Specification](http://www.mongodb.org/display/DOCS/GridFS+Specification) )。GridFS 自动将您的文档（或任何二进制数据）拆分为多个 BSON 对象（[通常大小为 256k](http://www.mongodb.org/display/DOCS/GridFS+Specification)），因此您只需要担心存储和检索完整的文档（无论它们的大小是多少）。

据我所知，Mongoose 不支持 GridFS。但是，您可以通过[其本机驱动程序的 GridStore 使用 GridFS](http://mongodb.github.com/node-mongodb-native/markdown-docs/gridfs.html)。只需运行`npm install mongodb`并开始黑客攻击！

# javascript - jScrollPane 高度刷新基于我的内容（不工作）

> ID：11122760
> 
> 赞同：0
> 
> 时间：2012-06-20T15:20:06.873
> 
> 标签：javascript, jquery, autocomplete, jscrollpane

我将[jScrollPane](http://jscrollpane.kelvinluck.com)插件与我的 SmartAutocomplete (https://github.com/laktek/jQuery-Smart-Auto-Complete) 一起使用，并且我将自动完成结果附加到我的主要包含 jScrollPane 的 div 中，以便用户可以滚动浏览它们。

这可行，但我的问题是当一组新数据附加到我的 jScrollPane 时，高度（滚动区域）不会更新，它始终保持相同的高度..所以项目要么被切断，要么有大量的白色底部的空间。

我已经查看了他们的动态内容示例的演示，但无法让它工作：[Demo here](http://jscrollpane.kelvinluck.com/dynamic_content.html)

有人有想法么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:39:17.187

您要查找的属性是 autoreinitialize 属性。你需要调用类似的东西：

```
$('#idofyourcontainer').jScrollPane({ autoReinitialise: true }); 
```

当您的容器发生更改时。

# sql - 这个 SQL 我在做什么错？

> ID：11122770
> 
> 赞同：1
> 
> 时间：2012-06-20T15:20:34.117
> 
> 标签：sql, tsql

当我运行它时，它不会引发错误，但它也不会插入/删除条目。我不知道为什么它不起作用。

```
DECLARE @trAction VARCHAR(5)
  SET @trAction = 'addTR'

  IF EXISTS (SELECT TransgeneID
            FROM tbl_MT
            WHERE MouseID = '3' AND TransgeneID = '3')
    IF (@trAction = 'rmvTR')    
      DELETE
      FROM tbl_MT
      WHERE MouseID = '3' AND TransgeneID = '3'
  ELSE
    IF (@trAction = 'addTR')  
      INSERT INTO tbl_MT 
      VALUES ('3', '3') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:26:17.523

首先，将`BEGIN`和`END`放在`IF's`：

```
 DECLARE @trAction VARCHAR(5)
  SET @trAction = 'addTR'

  IF EXISTS (SELECT TransgeneID
            FROM tbl_MT
            WHERE MouseID = '3' AND TransgeneID = '3')
  BEGIN
    IF (@trAction = 'rmvTR')    
    BEGIN
      DELETE
      FROM tbl_MT
      WHERE MouseID = '3' AND TransgeneID = '3'
    END
  END
  ELSE
  BEGIN
    IF (@trAction = 'addTR')  
    BEGIN
      INSERT INTO tbl_MT 
      VALUES ('3', '3')
    END
  END 
```

**第二个也是最后一个，如果第一个`IF`是真的，内在`IF (@trAction = 'rmvTR')`就会失败，什么也做不了。**

# ruby - 可以在 ruby 中消除简单运算符和复合赋值运算符之间的歧义吗？

> ID：11122772
> 
> 赞同：1
> 
> 时间：2012-06-20T15:20:40.443
> 
> 标签：ruby, operators

任何人都可以向我指出如何判断，例如，+ 运算符何时在 ruby​​ 中使用，而不是 + 运算符定义内部的 += 运算符？为了显示：

```
class A
    def +(b)
        if is_theCallActuallyACompoundAssignment?
            compoundAssignment = true
        else
            compoundAssignment = false
        end
        doOtherStuff
    end
end 
```

可能有内核方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:23:46.967

这段代码：

```
a += 5 
```

被翻译成这样：

```
a = a + 5 
```

您的`+`方法不会知道您收到了复合作业。

# delphi - 编程屏幕录像机 - 输出问题

> ID：11122773
> 
> 赞同：8
> 
> 时间：2012-06-20T15:20:42.037
> 
> 标签：delphi, video-processing, freepascal, lazarus

我想要录制屏幕（每秒捕获 15 个屏幕截图）。这部分我知道该怎么做。但我不知道如何将其写入一些流行的视频格式。我发现的最佳选择是将帧写入分离的 PNG 文件并使用命令行 Mencoder 可以将它们转换为多种输出格式。但也许有人有其他想法？

要求：

*   必须是多平台解决方案（我使用的是 Free Pascal / Lazarus）。视窗、Linux、MacOS
*   存在一些图书馆吗？
*   可能是复杂的命令行应用程序，它也为我记录屏幕，但我必须有可能在将整个原始数据转换为流行的视频格式之前编辑帧
*   感谢所有可以给我一些想法的材料。API，库，甚至是除 FPC 之外的其他语言的任何东西（我会尝试重写它或找到一些等价物）
*   我还考虑将帧写入视频 RAW 格式，然后使用 Mencoder（他可以处理）或其他解决方案，但找不到任何用于视频 RAW 数据的 API/doc

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T22:27:42.710

Argalatyr 已经提到了 ffmpeg。

有两种方法可以让它工作：

1.  通过产生一个新进程。您所要做的就是准备正确的输入（例如，可以是一系列 jpeg 图像）和正确的命令行参数。之后，您只需调用 ffmpeg.exe 并等待它完成。

2.  ffmpeg 使用了一些执行实际工作的 dll。您可以直接在 Delphi 应用程序中使用这些 dll。这需要更多的工作，因为它更底层，但最终它会让您更好地控制发生的事情，以及在处理时向用户显示的内容。

以下是一些检查解决方案：

*   [FFVCL](http://www.delphiffmpeg.com/downloads/)商业。其实看起来还不错，但是我太贪心了，没敢在这上面花钱。

*   [FFMpeg 的开源 Delphi 标头](http://www.iversenit.dk/dev/ffmpeg-headers/)。我试过了，但我从来没有设法让它工作。

*   我最终从一个开源卡拉 OK 程序（[UltraStar Deluxe](http://sourceforge.net/projects/ultrastardx/)）中提取了 DLL 包装器。我不得不删除一些依赖项，但最终它就像一个魅力。

    相关（pascal）代码可以在这里找到：http: [//ultrastardx.svn.sourceforge.net/viewvc/ultrastardx/trunk/src/lib/ffmpeg-0.10/](http://ultrastardx.svn.sourceforge.net/viewvc/ultrastardx/trunk/src/lib/ffmpeg-0.10/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T19:51:39.447

[这里](https://stackoverflow.com/questions/9623430/how-to-convert-bitmaps-to-video/9651346#9651346)有一些关于 Delphi 组件的较早讨论。这是一个非常简单的组件，有时会生成一些奇怪的电影。也许是一个开始。

# mongodb - 迁移 MongoDB 仲裁器

> ID：11122776
> 
> 赞同：0
> 
> 时间：2012-06-20T15:20:54.000
> 
> 标签：mongodb, replication

我有一个 mongodb 副本集（它是分片的一部分），我想将仲裁器迁移到新主机。我没有找到任何关于这种情况的说明，所以我不知道该怎么做。

我目前的方法是在新主机上启动一个仲裁器，将他添加到副本集中，然后删除旧的。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:29:43.813

实际上它要简单得多：

1.  启动新的仲裁器
2.  连接到主要成员
3.  执行

    ```
    cfg = rs.conf()
    cfg.members[0].host = newhost
    rs.reconfig(cfg) 
    ```

4.  现在你可以关闭旧的仲裁器

如果已设置，请不要忘记更改您的选项 (--replSet) `/etc/sysconfig/mongod`。

参考：[http ://www.mongodb.org/display/DOCS/Adding+an+Arbiter](http://www.mongodb.org/display/DOCS/Adding+an+Arbiter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:45:14.493

有一个更容易的命令：

```
rs.addArb("[hostname]:[port]") 
```

[http://docs.mongodb.org/manual/administration/replication-architectures/#replica-set-arbiter-nodes](http://docs.mongodb.org/manual/administration/replication-architectures/#replica-set-arbiter-nodes)

# android - 如何在我的应用程序的右下角创建一个运行 android 相机的框

> ID：11122778
> 
> 赞同：0
> 
> 时间：2012-06-20T15:21:02.163
> 
> 标签：android, camera, surfaceview, android-canvas, image

所以，我有一个使用画布并为移动块设置动画的应用程序。我最终想要做的是让相机运行捕捉用户的面部，而不在应用程序上显示相机屏幕，或者在屏幕右下角有一个框显示相机看到的内容。

是否可以在我的应用程序的右下角有一个显示相机的小屏幕，或者相机是否必须全屏显示？

或者，如果可以快速拍摄图片并显示位图而不会丢失我的应用程序，那也可以。

任何帮助都会很棒！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:37:10.837

> 是否可以在我的应用程序的右下角有一个显示相机的小屏幕，或者相机是否必须全屏显示？

有可能，[请参阅此处的第一个屏幕截图](https://play.google.com/store/apps/details?id=com.qiktmobile.android)。他们的在左上角而不是右下角，但它应该是一样的。在此 Qik 应用程序中，全屏显示您正在与之交谈的其他人，小框显示您相机的实时视图。

我不知道他们是怎么做到的，但我想如果您按照文档中的“[构建相机应用程序](http://developer.android.com/guide/topics/media/camera.html#custom-camera)”进行操作，它会让您获得最大的成功。您只需要调整预览画布的大小，并弄清楚如何使用前置摄像头而不是后置摄像头。

# joomla - 从远程站点读取 joomla 插件的内容

> ID：11122782
> 
> 赞同：0
> 
> 时间：2012-06-20T15:21:17.827
> 
> 标签：joomla, remote-access, virtuemart

我有 Joomla CMS 并使用 Virtuemart 插件来销售一些产品。我想销售与其他网站销售相同的产品。

请帮助我从远程读取或复制到本地。

***我从不想让你做我的项目，我只是你的指导。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:27:08.397

不确定您使用的是哪个版本的 VM，但 VM 中的产品数据库非常广泛，因此如果可能的话，我会感到*非常*惊讶。我已经为 VM 完成了许多导入项目，并且一直需要数据库的不可见值来让产品在我们的网站上拥有活跃的产品。

# javascript - 页面刷新后的Javascript存储变量

> ID：11122783
> 
> 赞同：0
> 
> 时间：2012-06-20T15:21:22.083
> 
> 标签：javascript, variables

我遇到了与在 Javascript 中存储变量有关的问题。我有一个网络监控页面（我已经编写了有效的代码），它每 5 分钟自动刷新一次。

如果我正在监视的某个站点出现故障，JS 会向管理员发送一封电子邮件，但我只想发送一次。

我的逻辑是：

> 如果变量 emailPreviousSent == 'no' 则检查站点是否已关闭，然后向管理员发送电子邮件写入变量 emailPreviousSent = 'yes'
> 
> *页面会刷新*
> 
> 检查网站是否已关闭 emailPreviousSent == 'yes'
> 
> 不会再次发送电子邮件

但是我发现每次页面刷新时变量都会被清空。

即使页面正在刷新，是否有办法携带变量，或者可能是另一种方式？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:22:59.770

> 但是我发现每次页面刷新时变量都会被清空。

您在**无状态 HTTP**请求中。将变量存储在 cookie 中以在页面刷新后仍保留其值，但请注意，用户也可以删除 cookie。

或者正如@Matt Ball 正确建议的那样，更好的方法是使用 HTML5 的[`localStorage`](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/)功能。

# c# - 如何使 args 进入无限循环？

> ID：11122785
> 
> 赞同：0
> 
> 时间：2012-06-20T15:21:27.387
> 
> 标签：c#

我有一个控制台应用程序，它使用许多命令行开关来控制各种方法。每个命令行开关都由一个 for 循环中的 switch 语句处理，该循环遍历每个 args。

```
 for (int x = 0; x < args.Length; x++)
        {
            switch (args[x])
            {
             ...
            }
         } 
```

这非常适合我的需要，但是我需要添加一个 --loop 开关，它会根据 --set-timeout 开关指定的超时时间来无限期地循环前面的参数。

我到目前为止的代码是：

```
switch (args[x])
{
   case "--set-timeout-5m":
       timeout = 300000;
       System.Threading.Thread.Sleep(timeout);
       break;

       ....

    case "--loop":
        x = 0;
        break;
 } 
```

问题是设置 x 不会导致 for 循环从 args 开始继续。它只是坐在那里。

我期望 x 具有范围，因为代码在 for 循环中并且在 Visual Studio 中不会生成错误。我也期待 break 语句打破案例并将 x 传递给 for 循环。

谁能解释为什么它不起作用或发布解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:27:56.563

```
for (int x = 0; x < 10; x++)
{
    Console.Write(x);
    x = 0;
} 
```

印刷

```
0 1 1 1 1 1 1 1 1 ...
```

因为`x++`在每次迭代后执行。

如果你想打印

```
0 0 0 0 0 0 0 0 0 ...
```

你需要把它改成

```
for (int x = 0; x < 10; x++)
{
    Console.Write(x);
    x = -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:28:07.443

您`Thread.Sleep`只会阻止当前线程。要设置超时，请在循环之前获取当前日期：

```
DateTime start = DateTime.Now; 
```

然后，在每次迭代中，检查当前时间是否超过了超时时间，如果超过了，则跳出循环：

```
if(DateTime.Now.Subtract(start).TotalMilliseconds >= timeout) {
    // Stop your processin'!
} 
```

# c++ - 平行迪杰斯特拉

> ID：11122786
> 
> 赞同：4
> 
> 时间：2012-06-20T15:21:28.090
> 
> 标签：c++, parallel-processing, openmp, dijkstra

我正在使用 OpenMP 来制作 Dijkstra 算法的并行版本。我的代码由两部分组成。第一部分仅由一个线程（主线程）执行。该线程从列表中选择新节点。第二部分由其他线程执行。这些线程改变从源到其他节点的距离。不幸的是，在我的代码中是错误，因为执行第二部分的许多线程之一突然“消失”。可能数据同步有问题，但我不知道在哪里。如果有人能告诉我我的错误在哪里，我将不胜感激。这是代码：

```
map<int, int> C;
map<int, int> S;
map<int, int> D;
int init;
int nu;
int u;
int p = 3;//omp_get_num_threads();
int d;
int n = graph->getNodesNum();

#pragma omp parallel shared(n, C, d, S, init, nu, u, D, graph, p) num_threads(p)
{
    int myId = omp_get_thread_num();
    if (myId == 0)
    {
        init = 0;
        nu = 0;

        u = to;
        while (init < p - 1)
        {
        }

        while (u != 0)
        {
            S[u] = 1;
            while (nu < p - 1)
            {
            }
            u = 0;
            d = INFINITY;
            for (int i = 1; i <= p - 1; ++i)
            {
                int j = C[i];
                if ((j != 0) && (D[j] < d))
                {
                    d = D[j];
                    u = j;
                }
            }
            nu = 0; 
        }
    }
    else
    {
        for (int i=myId; i<=n; i += p-1)
        {
            D[i] = INFINITY;
            S[i] = 0;
        }

        D[u] = 0;

        ++init; 
        while (init < p-1)
        {
        }
        while (u != 0)
        {
            C[myId] = 0;
            int d = INFINITY;

            for (int i = myId; i<=n; i+=p-1)
            {
                if (S[i] == 0)
                {
                    if (i != u)
                    {
                        int cost = graph->getCostBetween(u, i);
                        if (cost != INFINITY)
                        {
                            D[i] = min(D[i], D[u] + cost);
                        }
                    }
                    if ((d > D[i])) 
                    {                           
                        d = D[i];
                        C[myId] = i;
                    }
                }
            }
            ++nu;
            while (nu != 0)
            {
            }   
        }
    }       
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T18:04:43.740

我不知道您有什么信息，但是将不规则的、高度同步的算法与小任务并行化是人们可能遇到的最棘手的并行问题之一。研究团队可以专注于此类任务并获得有限的加速，或者无处可去。通常，此类算法仅适用于为并行化量身定制的特定架构，并且通过适当设计数据结构消除了诸如错误共享之类的古怪开销。

像这样的算法需要大量的时间和精力来分析、测量和考虑。例如见这篇论文。

ww2.cs.fsu.edu/~flin/ppq_report.pdf

现在，关于您的直接问题，由于您的算法是高度同步的并且任务很小，您正在经历数据竞争的副作用。从你的并行算法中删除这些将是非常棘手的，这里没有人可以为你做。

因此，您的首要任务是查看可以帮助您检测数据竞争的工具，例如 Valgrind 和英特尔线程检查器。

# sql-server - SQL Server 2008 中交叉表查询中的总计字段

> ID：11122790
> 
> 赞同：0
> 
> 时间：2012-06-20T15:21:55.797
> 
> 标签：sql-server, pivot, crosstab

我得到了这个结果，给出的答案是`bluefeet`

```
Equipt  BSL    AQ
TFP     3      2
TM      1      0
VCB     18     6
VCD     5      8 
```

查询脚本是

```
 SELECT  Equipt, [BSL] AS BSL, [AQ] AS AQ 
 FROM 
 ( 
 SELECT Equipt, Shed 
 FROM PunctualityMain WHERE Date >= '4/1/2012' AND Date <= '4/30/2012' AND classification    = 'Loco' 
) x
PIVOT 
( 
COUNT(Shed) 
FOR Shed IN ([BSL], [AQ])
)  p 
```

是否可以在上述脚本中添加一个总字段，例如访问交叉表

```
Equipt  BSL    AQ     TTL
TFP     3      2     5
TM      1      0     1
VCB     18     6     24
VCD     5      8     13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:47:07.013

您应该能够通过包含一个新列来添加总计字段：

```
SELECT  Equipt, [BSL] AS BSL, [AQ] AS AQ, ([BSL] + [AQ]) as TTL
FROM 
( 
     SELECT Equipt, Shed 
     FROM PunctualityMain 
     WHERE Date >= '4/1/2012' AND Date <= '4/30/2012' 
          AND classification    = 'Loco' 
) x
PIVOT 
( 
    COUNT(Shed) 
    FOR Shed IN ([BSL], [AQ])
)  p 
```

# c# - MVC Beginform action = 转到页面上的锚点/id

> ID：11122791
> 
> 赞同：0
> 
> 时间：2012-06-20T15:21:57.653
> 
> 标签：c#, asp.net-mvc, jquery-ui, jquery

我有一个 MVC beginform（带有 JQUERY UI MOBILE 和 AJAX。）当用户单击提交时，我想`**<div data-role="page" id="two">**`在页面上显示。

```
@using (Html.BeginForm())
{

<div data-role="page" id="one">
<div data-role="header">Header stuff</div><!-- /header -->
<div data-role="content" >  
<div class="ui-body ui-body-b">
.....DATA......
<input type="submit" value="Submit" />
</div></div><div>

<div data-role="page" id="two">
<div data-role="header">Header stuff2</div><!-- /header -->
<div data-role="content" >  
<div class="ui-body ui-body-b">
FINISH
</div></div><div>

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:27:02.310

我刚遇到这个，发现我无法从 MVC 的控制器返回锚标记。因此，我从控制器传回的参数重定向用户：

```
if( getParameterByName("anchorID") != null) { 
    location.href = '#' + getParameterByName("anchorID");
} 

function getParameterByName(name) { 
    var match = RegExp('[?&]' + name + '=([^&]*)') 
                    .exec(window.location.search); 
    return match && decodeURIComponent(match[1].replace(/\+/g, ' ')); 
```

然后您应该能够在单击提交后查看您的 div。

# android - 适用于 1.6 及更高版本的 Android 浏览器无法滚动

> ID：11122794
> 
> 赞同：0
> 
> 时间：2012-06-20T15:22:01.490
> 
> 标签：android, html, css

我的网站上有一个具有“溢出”属性的小框架。除了 Android 之外的所有浏览器都允许我在我的网站内滚动那个小框架。

我是否遗漏了应该在 Android 浏览器的 CSS 中声明的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:50:16.073

**我假设这是在 WebView 活动中：**您需要在 HTML 中添加一个滚动条。我使用类似[iScroll](http://cubiq.org/iscroll)的东西。这是迄今为止最好的，并提供最好的性能。

# string - python3字符串到变量

> ID：11122795
> 
> 赞同：0
> 
> 时间：2012-06-20T15:22:03.550
> 
> 标签：string, list, variables, dictionary, python-3.x

我目前正在尝试在代码中实现康威的生命游戏，因此构建了一个根据窗口大小生成坐标的函数。

```
def coords_maker(num_x, num_y):

    num_x += 1  
    num_y += 1  
    coords = []
    for i in range (0,num_y, 1):    
        for n in range (0,num_x,1):
            coords.append ('x'+str(n)+'y'+str(i))   
    return coords 
```

但是，我想为结果字符串随机分配值，以将它们标记为活动 (1) 或死 (0)。然而，他们将字符串转换为我知道的变量名的唯一方法是通过 dict 和 var()，但是，对于进一步的代码来说，坐标保持排序是必不可少的，因为我希望能够遍历订购项目并将光标相应地放在坐标名称上。就像是：

```
print ('\033['+X_COORD+';'+Y_COORD+'f'+ x1y5) 
```

如果例如 x1y5 是变量的对应值（0 或 1）

是否有一种方便的方法可以通过 dict 执行此操作，或者如何将字符串的名称转换为变量名称？或者可能。如果我保留一个字典和一个列表并将坐标名称存储在列表中并将值存储在字典中？

先感谢您！基里尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:28:08.983

您使用字典：

```
def coords_maker(num_x, num_y):

    num_x += 1  
    num_y += 1  
    coords = {}
    for i in range (0,num_y, 1):    
        for n in range (0,num_x,1):
            coords['x'+str(n)+'y'+str(i)] = 0
    return coords 
```

然后，您可以使用

```
 coords[x][y] 
```

并像这样改变它：

```
 coords[x][y] = 1 
```

现在，当然，将坐标转换为字符串是完全没有意义的。只需使用列表列表：

```
def coords_maker(num_x, num_y):

    num_x += 1  
    num_y += 1  
    coords = [[0]*num_x for x in range(num_y)]
    return coords 
```

而且我也不知道为什么要在坐标上加 1：

```
def coords_maker(num_x, num_y):
    return [[0]*num_x for x in range(num_y)] 
```

# javascript - Javascript数组读取

> ID：11122799
> 
> 赞同：2
> 
> 时间：2012-06-20T15:22:23.790
> 
> 标签：javascript, arrays

我是一个 javscript 初学者，并且浏览过诸如此类的书籍和在线论坛，但无法弄清楚这一点。

我有一个数组

```
var n=[1,1,1,1,5,5,5,5]; 
```

元素/数字是球反弹的次数。所以在 n[0] 到 n[3] 球会反弹一次，而从 n[4] 到 n[7] 球会反弹 5 次。

我想写这个逻辑，但不知道如何......

我从

```
var x = n[];
n = 0;
while (x < 3, x++) {
    n = n[0];
    n[]++;
}
for (x = 3) {
    x++;
    n = 1;
    n[]++;
}
while (x > 3) {
    n = 5;
} 
```

但我知道这是不正确的。我不确定如何进行此操作，有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:26:48.090

应该是这样的：

```
var x = [];
for(var i = 0; i < 8; i++)
   x[i] = i <= 3 ? 1 : 5; 
```

或者，您可以按照您写信的方式将其分解：

```
var x = [];
var i = 0;
while (i < 3) {
    x[i++] = 1;
}
for (i = 4; i < 8; i++)
    x[i] = 5; 
```

您应该阅读有关javascript 中[循环语句](https://developer.mozilla.org/en/JavaScript/Guide/Statements#Loop_Statements)的更多信息，第一种方式称为三元运算符或[条件运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)。

# spring - Spring + Hibernate + Annotation + XmlWebApplicationContext

> ID：11122801
> 
> 赞同：0
> 
> 时间：2012-06-20T15:22:25.437
> 
> 标签：spring, hibernate, annotations

When Tomcat starts I get this messages:

```
 INFO: Initializing Spring FrameworkServlet 'spring'
2012-06-20 17:02:55,209 INFO [org.springframework.web.servlet.DispatcherServlet] - <FrameworkServlet 'spring': initialization started>
2012-06-20 17:02:55,243 INFO [org.springframework.web.context.support.XmlWebApplicationContext] - <Refreshing WebApplicationContext for namespace 'spring-servlet': startup date [Wed Jun 20 17:02:55 CEST 2012]; root of context hierarchy>
2012-06-20 17:02:55,305 INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - <Loading XML bean definitions from ServletContext resource [/WEB-INF/spring-servlet.xml]>

2012-06-20 17:02:56,094 INFO [org.springframework.web.context.support.XmlWebApplicationContext] - <Bean 'hibernateConfiguration' of type [class com.xxxxxxxxxx.android.market.config.HibernateConfiguration$$EnhancerByCGLIB$$53f79727] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)>
2012-06-20 17:02:56,690 INFO [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] - <Building new Hibernate SessionFactory>
2012-06-20 17:02:57,285 INFO [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] - <Updating database schema for Hibernate SessionFactory>
2012-06-20 17:02:57,621 INFO [org.springframework.web.context.support.XmlWebApplicationContext] - <Bean 'sessionFactoryBean' of type [class org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)>

2012-06-20 17:02:57,694 INFO [org.springframework.beans.factory.support.DefaultListableBeanFactory] - <Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@46ed5d9d: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,beanConfiguration,hibernateConfiguration,AppService,appController,homeController,jspViewResolver,messageSource,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,appCategory,appDAO,appReleaseDAO,appService,sessionFactoryBean,transactionManager,persistenceExceptionTranslationPostProcessor]; root of factory hierarchy>
2012-06-20 17:02:58,011 INFO [org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping] - <Mapped URL path [/{id}] onto handler 'appController'>
2012-06-20 17:02:58,012 INFO [org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping] - <Mapped URL path [/{id}.*] onto handler 'appController'>
2012-06-20 17:02:58,012 INFO [org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping] - <Mapped URL path [/{id}/] onto handler 'appController'>
2012-06-20 17:02:58,012 INFO [org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping] - <Root mapping to handler 'homeController'>
2012-06-20 17:02:58,482 INFO [org.springframework.web.servlet.DispatcherServlet] - <FrameworkServlet 'spring': initialization completed in 3273 ms>
Jun 20, 2012 5:02:58 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Jun 20, 2012 5:02:58 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Jun 20, 2012 5:02:58 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/122  config=null
Jun 20, 2012 5:02:58 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 4237 ms 
```

Here is my Hibernate config class. It's annotated based and when I use inside of the Junit tets @ContextConfiguration all works.

```
 package com.xxxxxxxxxxxxx.android.market.config;

import java.util.Properties;

import org.hibernate.dialect.MySQL5InnoDBDialect;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor;
import org.springframework.orm.hibernate3.HibernateTransactionManager;
import org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean;

import com.xxxxxxxxxxxxx.android.market.dao.xxx;
import com.xxxxxxxxxxxxx.android.market.dao.xxx;
import com.xxxxxxxxxxxxx.android.market.dao.xxx;

@Configuration
public class HibernateConfiguration {

    @Bean
    public AnnotationSessionFactoryBean sessionFactoryBean() {
        Properties props = new Properties();
        props.put("hibernate.dialect", MySQL5InnoDBDialect.class.getName());
        props.put("hibernate.format_sql", "true");
        props.put("hibernate.connection.driver_class", "com.mysql.jdbc.Driver");
        props.put("hibernate.connection.password", "philipp");
        props.put("hibernate.connection.url", "jdbc:mysql://localhost/Market");
        props.put("hibernate.connection.username", "philipp");

        AnnotationSessionFactoryBean bean = new AnnotationSessionFactoryBean();
        bean.setAnnotatedClasses(new Class[] { xxx.class, xxx.class, xxx.class });
        bean.setHibernateProperties(props);
        bean.setSchemaUpdate(true);
        return bean;
    }

    @Bean
    public HibernateTransactionManager transactionManager() {
        return new HibernateTransactionManager(sessionFactoryBean().getObject());
    }

    @Bean
    public PersistenceExceptionTranslationPostProcessor persistenceExceptionTranslationPostProcessor() {
        return new PersistenceExceptionTranslationPostProcessor();
    }

} 
```

My spring-servlet.xml

```
 <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <context:annotation-config />

    <!-- eingefügt aus app-context -->
    <context:component-scan base-package="com.xxxxxxxxxxxxx.android.market.config" />
    <context:component-scan base-package="com.xxxxxxxxxxxxx.android.market.market.dao" />
    <context:component-scan base-package="com.xxxxxxxxxxxxx.android.market.service.app" />
    <context:component-scan base-package="com.xxxxxxxxxxxxx.android.market.controller" />
    <!-- eingefügt aus app-context -->

    <bean id="jspViewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

</beans> 
```

Now, when will get some items by rest-api from the database I get this:

```
 org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    org.springframework.orm.hibernate3.SpringSessionContext.currentSession(SpringSessionContext.java:63)
    org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:685)
    com.xxxxxxxxxxxxx.android.market.dao.AppDAOImpl.currentSession(AppDAOImpl.java:22)
    com.xxxxxxxxxxxxx.android.market.dao.AppDAOImpl.getAppById(AppDAOImpl.java:46)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy21.getAppById(Unknown Source)
    com.xxxxxxxxxxxxx.android.market.service.app.AppServiceImpl.getAppById(AppServiceImpl.java:29)
    com.xxxxxxxxxxxxx.android.market.controller.AppController.getApp(AppController.java:22)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

    package com.xxxxxxxxxxxxx.android.market.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.xxxxxxxxxxxxx.android.market.dao.App;
import com.xxxxxxxxxxxxx.android.market.service.app.AppService;

@Controller
public class AppController {

    @Autowired
    private AppService appService;

    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public ModelAndView getApp(@PathVariable int id) {
        App app = appService.getAppById(id);
        return new ModelAndView("appXmlView", BindingResult.MODEL_KEY_PREFIX
                + "app", app);
    }
}

    package com.xxxxxxxxxxxxx.android.market.service.app;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.xxxxxxxxxxxxx.android.market.dao.App;
import com.xxxxxxxxxxxxx.android.market.dao.AppDAO;

@Service("AppService")
public class AppServiceImpl implements AppService {

    @Autowired
    private AppDAO appDAO;

    public boolean saveApp(App app) {
        return appDAO.insert(app);
    }

    public void deleteApp(App app) {
        appDAO.delete(app);

    }

    public void updateApp(App app) {
        appDAO.update(app);
    }

    @Transactional
    public App getAppById(int id) {
        return appDAO.getAppById(id);
    }

    public App getAppByName(String name) {
        return appDAO.getAppByName(name);
    }

}

import java.util.Properties;

import org.hibernate.dialect.MySQL5InnoDBDialect;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor;
import org.springframework.orm.hibernate3.HibernateTransactionManager;
import org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean;
import org.springframework.transaction.annotation.EnableTransactionManagement;

import com.xxxxxxxxxxxxxxxx.android.market.dao.App;
import com.xxxxxxxxxxxxxxxx.android.market.dao.AppCategory;
import com.xxxxxxxxxxxxxxxx.android.market.dao.AppRelease; 
```

New HibernateConfiguration file:

```
@Configuration
@EnableTransactionManagement
public class HibernateConfiguration {

    @Bean
    public AnnotationSessionFactoryBean sessionFactoryBean() {
        Properties props = new Properties();
        props.put("hibernate.dialect", MySQL5InnoDBDialect.class.getName());
        props.put("hibernate.format_sql", "true");
        props.put("hibernate.connection.driver_class", "com.mysql.jdbc.Driver");
        props.put("hibernate.connection.password", "philipp");
        props.put("hibernate.connection.url", "jdbc:mysql://localhost/BusinessMarket");
        props.put("hibernate.connection.username", "philipp");

        AnnotationSessionFactoryBean bean = new AnnotationSessionFactoryBean();
        bean.setAnnotatedClasses(new Class[] { AppCategory.class, App.class, AppRelease.class });
        bean.setHibernateProperties(props);
        bean.setExposeTransactionAwareSessionFactory(false);
        bean.setSchemaUpdate(true);
        return bean;
    }

    @Bean
    public HibernateTransactionManager transactionManager() {
        return new HibernateTransactionManager(sessionFactoryBean().getObject());
    }

    @Bean
    public PersistenceExceptionTranslationPostProcessor persistenceExceptionTranslationPostProcessor() {
        return new PersistenceExceptionTranslationPostProcessor();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:02:00.103

Since you're using Spring 3.1 Configuration in Java try removing

`<tx:annotation-driven transaction-manager="transactionManager" />`

and specifying @EnableTransactionManagement on `HibernateConfiguration` as follows

```
@Configuration
@EnableTransactionManagement
public class HibernateConfiguration 
```

# c++ - 将项目存储在多个键下的地图中

> ID：11122804
> 
> 赞同：0
> 
> 时间：2012-06-20T15:22:31.600
> 
> 标签：c++, data-structures

我有一个带有 key_type 和 mapped_type 的 std::map。mapped_type 的每个实例都作为 3 个副本插入到映射中 - 在 3 个不同的键值下。这使我可以根据 3 个键中的任何一个检索值。

但缺点是当我想删除项目时，我需要寻找 3 个键而不是一个，以便摆脱所有 3 个副本。

是否可以将 3 个键组合成一个类并能够将此类对象与 1 个键进行比较，同时保持严格的弱排序？在这种情况下，对于 key_type，operator< 会是什么样子？

编辑：这 3 个键属于同一类型，例如可以使用 3 个不同的整数值访问单个记录（并且这些键值不被任何其他记录使用）。因此，据我了解，Boost.MultiIndex 不是解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:39:26.207

使用 Boost.MultiIndex。请参阅[http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/tutorial/basics.html#multiple_sort](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/tutorial/basics.html#multiple_sort)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:31:56.037

我建议使用封装到单个对象中的两个数据结构：

*   `std::list<Node> list;`
*   `std::map<Key, std::list<Node>::iterator> map;`

其中`Node`包含：

*   `Value value;`
*   和 3 个实例`std::map<Key, std::list<Node>::iterator>::iterator i1, i2, i3;`

然后，您可以使用适当的簿记插入和删除值，以确保结构保持一致。

# haskell - 在 l 处的 haskell 传递错误

> ID：11122807
> 
> 赞同：-3
> 
> 时间：2012-06-20T15:22:45.187
> 
> 标签：haskell

我编译代码 agin 和 agin 第一次在 mmult 上说解析错误，然后在 l 上到底是什么问题我不知道

```
 mmult :: (Ix i, Num a) => Array (i, i) a -> Array (i, i) a -> Array (i, i) a 
    mmult x y 
        | x1 /= y0 || x1' /= y0'  = error "range mismatch"
        | otherwise               = array ((x0, y1), (x0', y1')) l where
            ((x0, x1), (x0', x1')) = bounds x
            ((y0, y1), (y0', y1')) = bounds y
            ir = range (x0, x0')
            jr = range (y1, y1')
            kr = range (x1, x1')
            l  = [((i, j), sum [x ! (i, k) * y ! (k, j)  | k <- kr] ) | i <- ir, j <- jr] 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:59:01.927

*   实际错误可能与此函数之前的内容有关。
    *   如果您在此函数之前向我们展示代码，将会对我们有所帮助。
*   它可能`mmult`与之前的缩进不同。
*   也许您正在混合制表符和空格。
    *   在这种情况下，最简单的方法是去掉制表符，只使用空格来缩进。

* * *

```
l  = [((i, j), sum [x ! (i, k) * y ! (k, j) )| k <- kr] 
```

这应该是

```
l  = [((i, j), sum [x ! (i, k) * y ! (k, j)  | k <- kr] ) | i <- ir, j <- jr] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:26:42.073

您在最后一行的末尾缺少几个右括号。

# javascript - javascript/jQuery：验证来自 .val() 的数字

> ID：11122808
> 
> 赞同：0
> 
> 时间：2012-06-20T15:22:46.230
> 
> 标签：javascript, jquery, validation, int

我正在验证我的表单，只是检查用户是否在应该是数字的字段中输入了一个字符串。但是当我得到这样的所有字段值时：

```
var number=  $("#number").val(); 
```

我所有的变量都是字符串。

```
alert(typeof number); 
```

显示带有所有数字字段值的“字符串”。

关于如何验证整数的任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:23:54.430

您可以使用

```
jQuery.isNumeric( value ) 
```

为此目的的方法。因此，您不需要任何额外的解析工作。

**[演示](http://jsfiddle.net/QStkd/354/)**

阅读更多关于**[`$.isNumeric()`](http://api.jquery.com/jQuery.isNumeric/)**

### 用于手动解析（如果您不使用上述）

```
var number = parseInt($("#number").val(), 10); 
```

并检查

```
if(isNaN(number)) {
   // do something
} else {
   // do something else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:24:19.340

`isNaN(parseInt($("#number").val()));`应该做的伎俩！如果您想使用该号码，这可能是一种更简单的方法：

```
var value = parseInt($("#number").val());

if (isNaN(value)) {
  console.log("invalid input");
} else {
  console.log("user entered: " + value);
} 
```

# prolog - 使用 clpfd Prolog 库解决斑马谜题（又名爱因斯坦谜题）

> ID：11122814
> 
> 赞同：6
> 
> 时间：2012-06-20T15:23:04.467
> 
> 标签：prolog, constraints, constraint-programming, clpfd, zebra-puzzle

我得到了一个练习来使用我选择的约束求解器来解决斑马难题，我使用[Prolog clpfd library](http://www.swi-prolog.org/man/clpfd.html)进行了尝试。

**我知道在 Prolog 中还有其他更惯用的方法来解决这个问题，但这个问题是专门关于`clpfd`包的！**

因此，我试图解决的难题的具体变体（鉴于其中有很多）是这个：

**有五间房子**

1.  英国人住在红房子里
2.  瑞典人养狗
3.  丹麦人喜欢喝茶
4.  绿房子留给白房子
5.  温室的主人喝咖啡
6.  抽 Pall Mall 的人拥有一只鸟
7.  中间屋喝牛奶
8.  黄房子的主人抽登喜路
9.  挪威人住在第一所房子里
10.  万宝路吸烟者住在猫主人旁边
11.  马主住在抽登喜路的人旁边
12.  温菲尔德吸烟者喜欢喝啤酒
13.  挪威人住在蓝屋旁边
14.  德国人抽罗斯曼烟
15.  万宝路吸烟者有一个喝水的邻居

我试图用以下方法解决它：

> 房子可以拥有的每个属性都被建模为一个变量，例如“British”、“Dog”、“Green”等。属性可以取 1 到 5 的值，具体取决于它们所在的房子，例如，如果变量“狗”取值3，狗住在第三宫。

这种方法可以很容易地模拟这样的邻居约束：

```
def neighbor(X, Y) :-
    (X #= Y-1) #\/ (X #= Y+1). 
```

但不知何故，`clpfd`即使（IMO）问题被正确建模（我使用与[Choco 约束求解器](http://www.emn.fr/z-info/choco-solver/)完全相同的模型，结果是正确的），该包也没有产生解决方案。

这是完整的代码：

```
:- use_module(library(clpfd)).

neighbor(X, Y) :-
    (X #= (Y - 1)) #\/ (X #= (Y + 1)).

solve([British, Swedish, Danish, Norwegian, German], Fish) :-

    Nationalities = [British, Swedish, Danish, Norwegian, German],
    Colors = [Red, Green, Blue, White, Yellow],
    Beverages = [Tea, Coffee, Milk, Beer, Water],
    Cigarettes = [PallMall, Marlboro, Dunhill, Winfield, Rothmanns],
    Pets = [Dog, Bird, Cat, Horse, Fish],

    all_different(Nationalities),
    all_different(Colors),
    all_different(Beverages),
    all_different(Cigarettes),
    all_different(Pets),

    Nationalities ins 1..5,
    Colors ins 1..5,
    Beverages ins 1..5,
    Cigarettes ins 1..5,
    Pets ins 1..5,

    British #= Red, % Hint 1
    Swedish #= Dog, % Hint 2
    Danish #= Tea, % Hint 3

    Green #= White - 1 , % Hint 4
    Green #= Coffee, % Hint 5,
    PallMall #= Bird, % Hint 6

    Milk #= 3, % Hint 7
    Yellow #= Dunhill, % Hint 8,
    Norwegian #= 1, % Hint 9

    neighbor(Marlboro, Cat), % Hint 10
    neighbor(Horse, Dunhill), % Hint 11
    Winfield #= Beer, % Hint 12

    neighbor(Norwegian, Blue), % Hint 13
    German #= Rothmanns, % Hint 14,
    neighbor(Marlboro, Water). % Hint 15 
```

我是否误解了 中的概念`clpfd`，或者我只是在这里遗漏了一些明显的东西？如果有帮助，您可以[在这里](https://github.com/githubnemo/ISP/blob/master/P4/scala/main.scala)找到使用 Choco 和 Scala 实现的相同方法。

* * *

**编辑：**我认为求解器无法解决问题的原因在于它从来没有为变量提供明确的值，而只是提供范围，例如“Fish 1..3\/5”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T16:31:58.530

这里有几个误解：您说“clpfd 包没有产生解决方案”，但实际上它确实产生了一个：

```
?- solve(Ls, Fish), label(Ls).
Ls = [3, 5, 2, 1, 4],
Fish in 1\/4,
all_different([5, 3, _G3699, 2, Fish]),
_G3699 in 1\/4,
_G3699+1#=_G3727,
_G3741+1#=_G3699,
_G3727 in 2\/4..5,
2#=_G3727#<==>_G3766,
_G3766 in 0..1,
_G3792#\/_G3766#<==>1,
_G3792 in 0..1,
2#=_G3741#<==>_G3792,
_G3741 in 0\/2..3. 
```

所以我们知道，如果有解，那么 Fish 不是 1 就是 4。让我们试试 1：

```
?- solve(Ls, Fish), label(Ls), Fish = 1.
false. 
```

不，让我们试试 4：

```
?- solve(Ls, Fish), label(Ls), Fish = 4.
Ls = [3, 5, 2, 1, 4],
Fish = 4. 
```

这是可行的，并且是该问题的基本解决方案。您可以通过不同的方式获得它，例如通过将 Fish 包含在要标记的变量中：

```
?- solve(Ls, Fish), label([Fish|Ls]).
Ls = [3, 5, 2, 1, 4],
Fish = 4 ;
false. 
```

标记的目的正是为受约束的变量尝试具体值，而与是否确实存在解决方案无关。巧合的是，在这种情况下， all_distinct/1 足够强大，可以自己产生一个基本解决方案，但一般情况下当然不是这样，您最终必须使用标签来获得无条件（即没有更多未决约束）的答案。当然，您通常还必须标记*所有*您感兴趣的变量，而不仅仅是您最初所做的其中一部分。要标记单个变量，您可以使用 indomain/1，因此将 indomain(Fish) 附加到上面的第一个查询也可以。我无法重现您在进一步评论中提到的实例化错误，事实上，正如您在上面看到的，最通用的查询 solve(X, Y) 适用于您发布的代码。最后，检查一下：

```
neighbor(X, Y) :- abs(X-Y) #= 1. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T15:46:16.643

在 SWI-Prolog 中运行你的代码，我得到

```
?- solve(X),label(X).
X = [3, 5, 2, 1, 4]. 
```

没有`label`：

```
?- solve(X).
X = [3, _G3351, _G3354, 1, _G3360],
_G3351 in 4..5,
all_different([_G3351, _G3386, _G3389, 2, _G3395]),
all_different([3, _G3351, _G3354, 1, _G3360]),
_G3386 in 3..5,
all_different([_G3386, _G3444, 1, _G3450, _G3360]),
_G3389 in 1\/3..5,
_G3389+1#=_G3478,
_G3492+1#=_G3389,
_G3395 in 1\/3..5,
_G3478 in 2..6,
_G3444#=_G3478#<==>_G3529,
_G3444 in 2..5,
_G3444#=_G3556#<==>_G3553,
_G3444#=_G3568#<==>_G3565,
_G3444#=_G3492#<==>_G3577,
_G3450 in 2\/5,
all_different([_G3354, 4, 3, _G3450, _G3614]),
_G3360 in 2\/4..5,
_G3354 in 2\/5,
_G3614 in 1..2\/5,
_G3614+1#=_G3556,
_G3568+1#=_G3614,
_G3556 in 2..3\/6,
_G3553 in 0..1,
_G3565#\/_G3553#<==>1,
_G3565 in 0..1,
_G3568 in 0..1\/4,
_G3492 in 0..4,
_G3577 in 0..1,
_G3577#\/_G3529#<==>1,
_G3529 in 0..1. 
```

如果我更改`all_different`为[`all_distinct`](http://www.swi-prolog.org/pldoc/doc_for?object=all_distinct/1)没有标签的解决方案：

```
....
all_distinct(Nationalities),
all_distinct(Colors),
all_distinct(Beverages),
all_distinct(Cigarettes),
all_distinct(Pets),
....

?- solve(X).
X = [3, 5, 2, 1, 4]. 
```

`all_distinct`如您所见，文档说明vs的传播更强`all_different`。运行建议的示例有助于了解它们之间的区别：

```
?- maplist(in, Vs, [1\/3..4, 1..2\/4, 1..2\/4, 1..3, 1..3, 1..6]), all_distinct(Vs).
false.

?- maplist(in, Vs, [1\/3..4, 1..2\/4, 1..2\/4, 1..3, 1..3, 1..6]), all_different(Vs).
Vs = [_G419, _G422, _G425, _G428, _G431, _G434],
_G419 in 1\/3..4,
all_different([_G419, _G422, _G425, _G428, _G431, _G434]),
_G422 in 1..2\/4,
_G425 in 1..2\/4,
_G428 in 1..3,
_G431 in 1..3,
_G434 in 1..6. 
```

# c++ - OpenGL 着色器不与着色器程序链接

> ID：11122815
> 
> 赞同：3
> 
> 时间：2012-06-20T15:23:04.720
> 
> 标签：c++, opengl, glew

我正在尝试使用 GLFW/GLEW 添加着色器。

我收到一个错误，即着色器已加载，但它们没有有效的目标代码。

这是我用于加载着色器的代码：

```
class SHADER {
public:

void LoadShaders(const char *vertexFile, const char *fragmentFile);

char *vertexShader;
char *fragmentShader;

private:

int Load(const char *filename, char*&shaderSource);
fstream file;
};

int SHADER::Load(const char *filename, char *&shaderSource) {
file.open(filename, ios::in);
if(file.is_open()) {
    file.tellg();
    file.seekg(0,ios::end);
    unsigned long len = file.tellg();
    file.seekg(ios::beg);

    if(len == 0 ) {
        return -2;
    } else {
        shaderSource = new char[len + 1];
        file.read(shaderSource,len);
        file.close();
        printf("%s\n",shaderSource);
    }
} else {
    return -1;
}
return 0;
}

void SHADER::LoadShaders(const char *vertexFile, const char *fragmentFile) {
int resultVertex = this->Load(vertexFile, vertexShader);
int resultFragment = this->Load(fragmentFile, fragmentShader);
if(resultVertex ==0 && resultFragment ==0) {
    printf("Shaders loaded succesfully.\n");
}
if(resultVertex == -2) {
    printf("VertexShader is empty!\n");
}
if(resultFragment == -2) {
    printf("FragmentShader is empty!\n");
}
if(resultVertex == -1) {
    printf("Unable to load VertexShader!\n");
}
if(resultFragment == -1) {
    printf("Unable to load FragmentShader!\n");
}
} 
```

这是初始化着色器的代码：

```
SHADER Shaders;
GLhandleARB vertexShader, fragmentShader, shaderProgram;

Shaders.LoadShaders("vertexShader.vert","fragmentShader.frag");

const char* vertTemp = Shaders.vertexShader;
vertexShader = glCreateShaderObjectARB(GL_VERTEX_SHADER_ARB);
glShaderSourceARB(vertexShader, 1, &vertTemp, NULL);
glCompileShaderARB(vertexShader);
traceShaderInfoLog(vertexShader);

const char* fragTemp = Shaders.fragmentShader;
fragmentShader = glCreateShaderObjectARB(GL_FRAGMENT_SHADER_ARB);
glShaderSourceARB(fragmentShader, 1, &fragTemp, NULL);
glCompileShaderARB(fragmentShader);
traceShaderInfoLog(fragmentShader);

delete[] Shaders.vertexShader;
delete[] Shaders.fragmentShader;

shaderProgram = glCreateProgramObjectARB();
glAttachObjectARB(shaderProgram,vertexShader);
glAttachObjectARB(shaderProgram,fragmentShader);
glLinkProgramARB(shaderProgram);
traceProgramInfoLog(shaderProgram);

glUseProgramObjectARB(shaderProgram); 
```

这是vertexShader.vert和fragmentShader.frag：

```
void main(){
gl_Position = ftransform();
}
void main(){
gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
} 
```

这是我打印日志时遇到的错误，我在脚本末尾得到这个非常奇怪的符号，每次我再次编译另一个符号时：

```
void main(){
    //gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
    gl_Position = ftransform();
}┘
void main(){
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
}♣
Shaders loaded succesfully.
Vertex shader was successfully compiled to run on hardware.

Fragment shader failed to compile with the following errors:
ERROR: 0:3: error(#132) Syntax error: '<' parse error
ERROR: error(#273) 1 compilation errors.  No code generated

Fragment shader(s) were not successfully compiled before glLinkProgram() was called.
Link failed. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:53:50.113

您的 Load 函数很可能是问题所在：签名应为

```
int SHADER::Load(const char *filename, char *&shaderSource) // Note the & 
```

快速修复。您在该函数中分配内存并重新分配给指针-您仅将源加载到该地址-但这永远不会离开该函数。

由于内存初始化为零，编译器很可能会得到一个空字符串（您是否在调试中运行它？）并且不会失败，因为有时这没关系。但是链接器注意到实际上没有任何代码可以链接！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:24:39.763

当链接失败时，检索链接错误日志，这可能有额外的线索。

见[`glGetProgramInfoLog`](http://www.opengl.org/sdk/docs/man/xhtml/glGetProgramInfoLog.xml)。

# php - 分页时明显更好的是：将结果存储在 $_SESSION 或分别查询每个页面

> ID：11122819
> 
> 赞同：3
> 
> 时间：2012-06-20T15:23:09.850
> 
> 标签：php, sql, pagination

想象一下，我有一个包含大量数据的数据库，用户可以从中进行搜索。
典型搜索的结果一般在 20-100 行左右，然后进行分页（每页 20 行）。

我已经想到了两种方法来处理这些页面的导航，并且想知道这些方法是否有任何优点和/或缺点，以及是否有更好的选择。

1.  查询一次，将结果存储在`$_SESSION`变量中并根据当前页面过滤行。我想出这个的原因是为了使数据检索一次，而不必为用户导航的每个页面连接到数据库。我不知道它是否比我想出的其他选择更好或更差。

    ```
    session_start();

    $search = rawurldecode($_GET['search']);   //search word
    $interval = rawurldecode($_GET['interval']); //rows per page
    $page = rawurldecode($_GET['page']);    //page

    $min_row = $interval * ($page-1)+1;
    $max_row = $interval * $page;

    //query if (no results stored or first page) && the current search is not the previous search                               
    if((empty($_SESSION['SEARCH_RESULTS']) || $page == 1) && $_SESSION['SEARCH_RESULTS']['TERM'] != $search){
        $_SESSION['SEARCH_RESULTS'] = array();
        $_SESSION['SEARCH_RESULTS']['TERM'] = $search;

        $query = "exec usp_Search '$search'";

        $dbh = new DBH;
        $dbh->Connect()->Query($query);

        while($row = $dbh->Fetch_Array()){  
            $_SESSION['SEARCH_RESULTS']['ROWS'][] = $row;                           
        }
    }

    for($j = 0; $j < count($_SESSION['SEARCH_RESULTS']['ROWS']); $j++){
        $row = $_SESSION['SEARCH_RESULTS']['ROWS'][$j];

        //ignore all other rows not on the page
        if($j < ($min_row-1) || $j > $max_row) continue; 

        //print stuff
    } 
    ```

2.  逐页查询。查询和分页非常简单。

    ```
    //Query
    $search = rawurldecode($_GET['search']);
    $interval = rawurldecode($_GET['interval']);
    $page = rawurldecode($_GET['page']);

    $min_row = $interval * ($page-1)+1;
    $max_row = $interval * $page;

    $query = "exec usp_Search '$search', $min_row, $max_row";

    $dbh = new DBH;
    $dbh->Connect()->Query($query);

    while($row = $dbh->Fetch_Array()){ 
        //print stuff                       
    } 
    ```

* * *

备选方案中的 SQL 过程

1.  只是一个带有 SELECT 查询的过程

    ```
    SELECT 
        COL1,
        COL2,
        COL...
    FROM TABLE1
    WHERE (
        COL1 LIKE '%'+@search+'%' OR 
        COL2 LIKE '%'+@search+'%' OR 
        COL... LIKE '%'+@search+'%'
    ) 
    ```

2.  是一个创建临时表然后从变量开始到结束选择行的过程。

    ```
    SELECT 
        COL1,
        COL2,
        COL...,
        ROW_NUMBER() OVER (ORDER BY COL1) AS [ROW_NUMBER]
    INTO #result
    FROM TABLE1
    WHERE (
        COL1 LIKE '%'+@search+'%' OR 
        COL2 LIKE '%'+@search+'%' OR 
        COL... LIKE '%'+@search+'%'
    )   

    SELECT 
        COL1,
        COL2,
        COL...
    FROM #result
    WHERE ROW_NUMBER BETWEEN @row_start AND @row_end 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:40:04.243

考虑这种情况：

*   用户搜索存储在数据库中的 100 个结果的术语。
*   一旦获得所有 100 个结果，您就查询数据库并将它们存储在会话中。
*   用户在前 5 个结果中找到他正在寻找的内容并离开搜索页面。

最后，您“过热”数据库以获取 95 行而一无所获。如果这 100 个结果是 1000 或 10.000 怎么办？

在我看来，在单个查询中获取所有结果并将结果存储在会话中是降低性能的“可靠方法”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:46:20.210

您真的不能将所有结果存储在 中`_SESSION`，至少有几个原因：

*   用户可以同时进行多个搜索
*   搜索结果可能会在用户的页面加载之间发生变化。

第二点取决于您更新数据库的频率，但需要考虑。`_SESSION`第一个是主要的，但如果您以一种巧妙的方式存储会话（但您也不希望变得太大），您也可以绕过它。这与性能无关。

关于一次获取所有结果并将其存储到其中的另一个考虑因素`_SESSION`是，您的大多数用户每次访问可能只会发出一个搜索请求。我知道你会认为他们总是会查看所有 100 个结果，但如果这些结果中有很大一部分甚至没有被使用，那么你只是为了保存一两个查询而浪费了很多。由您决定用户如何导航。

* * *

在读到这只会被 20 到 30 人使用并且每天只有 70 行之后，我很高兴地说你现在正在浪费时间试图提高性能。如果发生重大更改，请选择以后更容易更新的代码。

# magento - Magento 管理仪表板订单时间不正确

> ID：11122820
> 
> 赞同：0
> 
> 时间：2012-06-20T15:23:11.710
> 
> 标签：magento, graph, dashboard

Magento 时代已经结束，似乎没有人同意对方。

例如

```
Order and email placed at 6:06AM EST
Magento dashboard shows order placed at around 1:06AM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:13:16.960

转到系统→配置→销售→销售→仪表板并标记

> 使用聚合数据（测试版）=“否”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T07:45:24.367

如果您导航到 Magento 管理区域中的“系统->配置->常规->区域设置选项->时区”，您会看到您可以更改您拥有的每个网站的时区。这样，您就可以为世界各地的商店设置正确的时区。我假设您没有正确设置它。

*我希望这可以帮助更多的人。*

# php - MySQL连接表的一对多关系

> ID：11122821
> 
> 赞同：0
> 
> 时间：2012-06-20T15:23:13.630
> 
> 标签：php, mysql, sql

我正在尝试在 MySQL 中实现某些目标，但即使在这里或其他站点上有所有答案，我仍然无法实现目标。

我有两张表，一对多的关系。

```
TABLE Files
COLUMNS id, title, description, uploaded, size, extension, etc.

TABLE Files_Meta
COLUMNS id, parent_id, key, value 
```

显然，每个文件都有多个元数据，表示为**Files_Meta**表中的多行。例如**File1**有 meta Author、Place、Time、Tags、Camera——如果它是一张照片。

我正在尝试从**Files**表中选择所有行，包括元数据。

### 标准结果

```
stdClass Object
(
[id] => 10
[title] => Hello world
[size] => 745198
[extension] => jpg
[user_id] => 0
[category_id] => 0
[date_uploaded] => 2012-06-08 13:37:55
[description] => 
[downloaded] => 0
[viewed] => 8
)

stdClass Object
(
[id] => 90
[parent_id] => 10
[key] => place
[value] => New York
) 
```

### 我想要的是

```
stdClass Object
(
[id] => 10
[title] => Hello world
[size] => 745198
[extension] => jpg
[user_id] => 0
[category_id] => 0
[date_uploaded] => 2012-06-08 13:37:55
[description] => 
[downloaded] => 0
[viewed] => 8
[meta] => Array (
    place => New York
    author => John Doe
    time => March 2001
    camera => Canon EOS
    etc.
    )
) 
```

是否有可能在 MySQL 中实现这一点？不必看起来像这样，没有那个数组。

```
stdClass Object
(
[id] => 10
.
.
[place] => New York
[author] => John Doe
[time] => March 2001
[camera] => Canon EOS
) 
```

提前感谢您的回复或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:39:58.167

在单个查询中执行此操作可能如下：

```
SELECT * FROM Files INNER JOIN Files_Meta ON Files.id = Files_Meta.parent_id 
```

根据评论，您将需要 PHP 来创建所需的结构，因为 MySQL 仅以*平面*方式返回结果。

我强烈建议您编写代码以在单个查询或 2 个查询中执行此操作 - 一个用于所有人`Files`，另一个用于所有人`Files_Meta`。然后用 PHP 将数据拼接在一起*。*否则，您可能会创建[N+1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)。

顺便说一句，我建议更改`parent_id`为`file_id`. `parent_id`典型的表示自引用键。而`file_id`表示表的外键`File`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:38:57.043

听起来你正在寻找加盟。如果每个文件只有一个元数据，那就太好了。每个文件不止一个元数据会导致大量结果行，只有元数据不同。但是，我假设由于您正在显示照片数据，因此这是不正确的，并且每个文件只会获得一个元数据，因此我建议使用以下 SQL：

```
SELECT 
    Files.*,
    Files_Meta.place, Files_Meta.author, Files_Meta.time, Files_Meta.camera, ..etc 
FROM 
    Files
JOIN Files_Meta ON Files_Meta.parent_id = Files.id 
```

这将为您提供一个平面表示，其中包含您在两个单独的查询中获取的数据，然后通过 PHP 组合。依靠你的数据库总是比在可能的情况下手动拼接东西要好，只要文件中的 parent_id 和 id 被索引，查询应该很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:35:42.363

正如您还标记了 PHP - 我建议您使用像 Doctrine 或 Propel 这样的 PHP ORM 框架，它会为您提供这样的结构（非常抽象）：

```
class File {

/* members */

var id // int
var title // string
var description // string
var uploaded // boolean
var size // int
var extension // string
var metadata // array (Collection of FileMeta)

/* getters setters for each member */
...

}

class FileMeta {

var id // int
var fileId // the id to the File object
var file // the fileobject itself
var key // string
var value // string

} 
```

您唯一需要做的就是定义您的结构（可能从您的数据库中导出），仅此而已。

我希望这与您搜索的内容相距不远。

# jquery - IE 上奇怪的 jquery .cycle 插件下一个/上一个按钮行为

> ID：11122827
> 
> 赞同：2
> 
> 时间：2012-06-20T15:23:35.123
> 
> 标签：jquery, internet-explorer, button, slideshow, behavior

我正在使用下面的 jquery .cycle 插件代码来制作带有下一个/上一个按钮的照片幻灯片。一切都在 Firefox 和 Chrome 中完美运行，但在 IE8 中却不行。在我单击其中一个按钮并且幻灯片切换到下一张照片后，两个按钮都向上移动了大约 10-15 像素。然后他们一直呆在那里，直到我再次将鼠标悬停在他们身上。当我再次单击时，它们再次向上移动。我一直在谷歌和论坛上寻找答案，但没有运气。我尝试了不同的方法，甚至用不同版本的 JQuery 对其进行了测试，但我无法解决它。有谁知道如何解决这个问题？谢谢！

```
<head>

$(function(){
    $("#imgslide").cycle({next:"#next",
              prev:"#prev",
              pause:true, 
              timeout:0,
              cleartypeNoBg: true,
              after: onAfter,

              });
});

function onAfter(curr,next,opts) {
            var index=opts.currSlide;
        $('#comment p:visible').hide();
            $('#comment p').eq(index).show();
        var caption = '' + (opts.currSlide + 1) + ' / ' + opts.slideCount;
        $('#caption').html(caption);
}

</head>

<body>

<div id="Container">
        <ul id="imgslide" style="height: 500px; list-style-type: none; margin:0; padding:0;">
            <li><img src="/images/portrait/image1.jpg" width="500px" height="500px"></li>
            <li><img src="/images/portrait/image2.jpg" width="500px" height="500px"></li>
            <li><img src="/images/portrait/image3.jpg" width="500px" height="500px"></li>
            <li><img src="/images/portrait/image4.jpg" width="500px" height="500px"></li>
            <li><img src="/images/portrait/image5.jpg" width="500px" height="500px"></li>
            <li><img src="/images/portrait/image6.jpg" width="500px" height="500px"></li>
            <li><img src="/images/portrait/image7.jpg" width="500px" height="500px"></li>
            <li><img src="/images/portrait/image8.jpg" width="500px" height="500px"></li>
        </ul>
        <div id="comment">
               <p>Title 1</p>
               <p>Title 2</p>
               <p>Title 3</p>
               <p>Title 4</p>
               <p>Title 5</p>
               <p>Title 6</p>
               <p>Title 7</p>
               <p>Title 8</p>
               </div>
        <a id="prev" style="cursor: pointer;" >Prev</a> |
        <a id="next" style="cursor: pointer; margin-left:2px">Next</a>
        <div style="display:inline; margin-left:10px" align="left" id="caption"></div>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T23:29:11.860

我解决了这个问题；

1.  我使用的是最新的 JQuery 版本 1.7.2。相反，我使用以下路径将其更改为 1.5 版；

    ```
    http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js 
    ```

2.  至于 Jquery Cycle 插件，我使用的是 jquery.cycle.lite.js，它是较小的版本，但我将其更改为包含更多功能的完整版本；

    ```
    http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js 
    ```

这些更改似乎修复了与 Internet Explorer IE8 发生的按钮相关的错误。现在该页面在所有浏览器中都可以正常工作。

# hadoop - Hadoop MapReduce：可以在一个 hadoop 作业类中定义两个映射器和化简器吗？

> ID：11122832
> 
> 赞同：9
> 
> 时间：2012-06-20T15:23:46.807
> 
> 标签：hadoop, mapreduce

我有两个单独的 java 类来执行两个不同的 mapreduce 作业。我可以独立运行它们。他们操作的输入文件对于这两个作业是相同的。所以我的问题是是否可以在一个java类中定义两个映射器和两个reducer，比如

```
mapper1.class
mapper2.class
reducer1.class
reducer2.class 
```

然后喜欢

```
job.setMapperClass(mapper1.class);
job.setmapperClass(mapper2.class);
job.setCombinerClass(reducer1);
job.setCombinerClass(reducer2);
job.setReducerClass(reducer1);
job.setReducerClass(reducer2); 
```

这些设置方法实际上是覆盖以前的方法还是添加新的方法？我尝试了代码，但它执行了唯一最新的给定类，这让我认为它会覆盖。但是必须有一种方法可以做到这一点吗？

我问这个的原因是我只能读取一次输入文件（一个 I/O），然后处理两个 map reduce 作业。我也想知道如何将输出文件写入两个不同的文件夹。目前，这两个作业是分开的，需要一个输入和一个输出目录。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T22:23:09.370

你可以有多个映射器，但在一项工作中，你只能有一个减速器。您需要的功能`MultipleInput`是`MultipleOutput`和`GenericWritable`。

使用`MultipleInput`，您可以设置映射器和相应的输入格式。这是我关于如何使用它[的帖子。](http://www.lichun.cc/blog/2012/05/hadoop-multipleinputs-usage/)

使用`GenericWritable`，您可以在 reducer 中分离不同的输入类。这是我关于如何使用它[的帖子。](http://www.lichun.cc/blog/2012/05/hadoop-genericwritable-sample-usage/)

使用`MultipleOutput`，您可以在同一个 reducer 中输出不同的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:54:01.567

您可以为此使用 MultipleInputs 和 MultipleOutputs 类，但两个映射器的输出都将发送到两个减速器。如果两个映射器/缩减器对的数据流确实彼此独立，则将它们作为两个独立的作业。顺便说一句，MultipleInputs 将运行您的映射器而无需更改，但必须修改减速器才能使用 MultipleOutputs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:54:18.123

根据我的理解，这来自将 map-reduce 与 Hadoop 流结合使用，您可以链接多个映射器和化简器，其中一个消耗另一个的输出

但是你不应该同时运行不同的映射器和减速器。映射器本身取决于要处理的块数。映射器应基于该决定进行实例化，而不是可用于该作业的映射器种类。

[编辑：根据您的评论]

我不认为这是可能的。您可以链接（reducers 将接收来自映射器的所有输入。您可以对它们进行排序，但您不能专门运行独立的映射器和化简器集。

我认为您可以做的是，即使您将映射器的输入都接收到两个减速器中，您也可以使映射器输出 (K,V) 是这样一种方式，您可以在减速器中区分哪个映射器是(K,V) 的起源。这样，两个减速器都可以处理选择性的 (K,V) 对。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-17T22:44:51.143

The [ChainMapper](https://hadoop.apache.org/docs/r2.7.0/api/org/apache/hadoop/mapred/lib/ChainMapper.html) class allows to use multiple Mapper classes within a single Map task. For example please look at [here](https://stackoverflow.com/questions/12926474/hadoop-chainmapper-chainreducer).

# cuda - 使用 cuBlas 函数 cublasSrotg 和 cublasSrot 进行 QR 分解的 Givens 旋转

> ID：11122834
> 
> 赞同：0
> 
> 时间：2012-06-20T15:23:51.067
> 
> 标签：cuda, gpgpu, nvidia, cublas

我是 CUDA 的新手，我尝试使用 cuBlas 库为 QR 分解实现 Givens 旋转。

我用了

`cublasStatus_t cublasSrotg(cublasHandle_t handle, float *a, float *b, float *c, float *s)`

用于计算 c 和 s 和

`cublasStatus_t cublasSrot (cublasHandle_t handle, int n, float *x, int incx, float *y, int incy, const float *c, const float *s)`

用于旋转 1000 x 1000 矩阵。由于 cublaSrotg() 用 r 和 z 覆盖参数 a 和 b，我无法在设备内存中使用矩阵。但是将矩阵的元素复制到主机大约需要循环任何循环的 90%。C 语言的实现速度快三倍。

我用错了吗？对于 CUDA 设备上的 Givens 轮换，什么是更好的选择？

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-31T06:14:18.047

我找不到在同一个矩阵上多次执行的技巧`cublasSrotg`，`cublasSrot`所以我实现了自己的内核。

同时`rhypot`有一种更简单的方法，性能更高

```
double t = rhypot(x, y);
double c = x * t;
double s = y * t; 
```

请参阅[CUDA 开发博客](http://devblogs.nvidia.com/parallelforall/cuda-pro-tip-fast-robust-computation-givens-rotations/)

# c# - 是否可以在某个元素之后按列表排序？

> ID：11122836
> 
> 赞同：2
> 
> 时间：2012-06-20T15:23:59.120
> 
> 标签：c#, linq, list, sql-order-by

正如标题所说。我想在列表中执行和排序 - 但在列表的一个小节上。准确地说，我想对除第一个元素之外的每个元素进行排序。

编辑：为了澄清，我需要在所有排序完成后保留所有（甚至是未排序的）元素。（即第一个项目（未排序）保持在它所在的位置（在列表的开头）并且所有后续项目都已排序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:25:04.123

我认为如果你想在结尾处开始未排序的项目，这应该可以工作：

```
list.Take(1).Concat(list.Skip(1).OrderBy(xyz)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T15:26:19.740

你可以使用：

```
list.Take(1).Concat(list.Skip(1).OrderBy(predicate)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T15:27:30.260

像这样的东西应该工作：

```
var results = list.Take(1)
                  .Concat(list.Skip(1).OrderBy(x => x.Something))
                  .ToList(); 
```

**编辑：**

由于发布问题已被编辑以澄清未排序的项目应位于集合的“末尾”，因此可以通过对上述内容进行微小更改来实现（只需切换方法调用）：

```
var results = list.Skip(1)
                  .OrderBy(x => x.Something)
                  .Concat(list.Take(1))
                  .ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T15:29:39.333

您可以获取索引，并将其用作排序的一部分，而不是删除第一项然后将其添加回（其他出色答案显示的方法）：

```
list.Select((value, index) => new { value, index })
    .OrderBy(x => x.index != 0)
    .ThenBy(x => x.value)
    .Select(x => x.value)
    .ToList() 
```

# ef-code-first - 我在人际关系上做错了什么？两个依赖实体引用的公共实体

> ID：11122840
> 
> 赞同：4
> 
> 时间：2012-06-20T15:24:05.807
> 
> 标签：ef-code-first, foreign-keys, entity-framework-4.3

我在实体框架中定义外键关系时遇到问题。我已将代码精简到最低限度来演示问题。

模型定义为 ;

```
 public class AccessControlList
{
    [Key] public int Id { get; set; }
    public string Name { get; set; }
}

public class ManagedFile
{
    [Key] public int Id { get; set; }
    public string Name { get; set; }
    public virtual AccessControlList AccessControl { get; set; }
}

public class ManagedFolder
{
    [Key] public int Id { get; set; }
    public string Name { get; set; }
    public virtual AccessControlList AccessControl { get; set; }
    public virtual ISet<ManagedFile> Files { get; private set; }

    public ManagedFolder()
    {
        Files = new HashSet<ManagedFile>();
    }
} 
```

所以本质上，我有一个 AccessControl 实体，可以由 ManagedFile 或 ManagedFolder 实体引用。

为了确保将外键添加到 ManagedFile 和 ManagedFolder，我添加了以下流畅映射

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        modelBuilder.Entity<ManagedFile>()
                    .HasRequired(mf => mf.AccessControl)
                    .WithRequiredDependent()
                    .Map(m => m.MapKey("AccessControlListId"));

        modelBuilder.Entity<ManagedFolder>()
                    .HasRequired(mf => mf.AccessControl)
                    .WithRequiredDependent()
                    .Map(m => m.MapKey("AccessControlListId"));

        base.OnModelCreating(modelBuilder);
    } 
```

这构建了一个看起来与我预期完全一样的数据库，在 ManagedFile 和 ManagedFolder 上都有一个外键 AccessControlListId。

![实体框架创建的架构](../Images/afdf2b25a9c95a6e121eff110c65c6cc.png)

对我来说一切都很好，但是当我尝试插入一些数据时，使用这段代码

```
using(var ctx = new MyContext())
{
    var mf = ctx.Folders.Add(new ManagedFolder {Name = "$/"});
    mf.AccessControl = new AccessControlList();

    var file = new ManagedFile {Name = "myfile.txt"};
    mf.Files.Add(file);
    file.AccessControl = new AccessControlList();

    ctx.SaveChanges();
} 
```

它抛出一个错误......

![错误](../Images/bca72d38734a8e13c529f76b4e480df7.png)

我无法弄清楚我所做的不正确？

据我了解我的映射，EF 可以保存一个新的 AccessControlList 实体，然后使用 Id 来编写 ManagedFolder 或 ManagedFile 表。

与往常一样，我感谢提供的任何帮助。

谢谢安迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:55:37.150

为什么数据库看起来“完全符合您的预期”？显然您正在尝试定义两个一对一的关系 ( `.HasRequired(...).WithRequiredDependent(...)`)，但您在数据库中的关系是一对多的。

你想要一对一到一对多的关系吗？在后一种情况下（更容易）只需将这两种`WithRequiredDependent()`方法替换为`WithMany()`.

如果您想要一对一，则无法定义单独的外键`AccessControlListId`。您必须使用共享主键，即依赖的PK同时是FK。映射必须是：

```
modelBuilder.Entity<ManagedFile>()
            .HasRequired(mf => mf.AccessControl)
            .WithRequiredDependent();
// the same for ManagedFolder 
```

...没有`MapKey`.

# javascript - 使用 jQuery 将标签插入 div

> ID：11122842
> 
> 赞同：1
> 
> 时间：2012-06-20T15:24:09.730
> 
> 标签：javascript, jquery

我有一长串带有特定标签的复选框，如下所示：

```
<input type='checkbox' name='check[]' id='159' value='159' />
<label for='159'>Person 1</label>

<input type='checkbox' name='check[]' id='160' value='160' />
<label for='160'>Person 2</label> 
```

在这个表格下面我有六个像这样的div：

```
<div id="member1"></div>
<div id="member2"></div>
<div id="member3"></div>
<div id="member4"></div>
<div id="member5"></div>
<div id="member6"></div> 
```

我有这个 JS 函数，所以当我点击一个复选框时，它的标签被插入到第一个 div 中。这是它的样子：

```
$(function(){
    $('input:checkbox').click(function(){
        var id = $(this).attr('id');
        if($(this).is(':checked')){
            $('#member1').text($('label[for="'+ id +'"]').text());
        }
        else{
            $('#member1').text('');   
        }
    });
}); 
```

所以一个问题是该函数当前必须指定将其放入哪个 div (#member1)。当第一个 div 为“已满”时，下一个复选框将其标签插入到第二个 div 中，当该复选框已满时，第三个复选框将其标签插入第三个 div 等。

另一个问题是，如果复选框未选中，则应将其标签从其 div 中删除，并且其下方 div 中的标签应向上移动。有谁知道这是否可能？我会接受任何一个问题的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:37:28.640

警告：我会以完全不同的方式做这件事。

但使用您当前的结构：[Live copy](http://jsbin.com/axohar) | [来源](http://jsbin.com/axohar/edit)（使用有效`id`的 s）

```
$(function(){
    $('input:checkbox').click(function(){
        var $cb = $(this),
            id  = this.id, // No need for `attr`
            member,
            prev;
        if(this.checked){  // No need for `attr`
            $("div[id^=member]").each(function() {
                if (!this.firstChild) {
                    // It's empty, use it
                    $(this).text($('label[for="'+ id +'"]').text()).attr("data-contents", id);
                    return false; // Done
                }
            });
        }
        else {
            member = $('div[data-contents="' + id + '"]');
            if (member[0]) {
                member.empty().removeAttr('data-contents');
                prev = member[0];
                member.nextAll().each(function() {
                   if (!this.firstChild) {
                       return false; // Done
                   }
                   prev.appendChild(this.firstChild);
                   prev = this;
                });
            }
        }
    });
}); 
```

我会做的最小改变：

*   将`#memberX`div 放入容器中，这样我们就不必进行`id^=`搜索了。
*   根本不要在div 上使用`id`值。`#memberX`
*   如果你不是*绝对，肯定需要它们*，就不要有空`#member`的 div。这将显着简化代码。
*   如果您*确实*需要它们，请在清除时删除 div 并在末尾附加一个新的空的。

示例：[Live Copy](http://jsbin.com/axohar/2) | [来源](http://jsbin.com/axohar/2/edit)

HTML：

只需将`#membersX`div替换为`<div id="members"></div>"`.

JavaScript：

```
$(function(){
    $('input:checkbox').click(function(){
        var $cb = $(this),
            id  = this.id; // No need for `attr`

        if(this.checked){  // No need for `attr`
            $("<div>")
                .text($('label[for="'+ id +'"]').text())
                .attr("data-contents", id)
                .appendTo("#members");
        }
        else {
            $('div[data-contents="' + id + '"]').remove();
        }
    });
}); 
```

您可以通过移动复选框*输入*s来进一步简化`label`（这也意味着您可以取消该`for`属性）：[Live copy](http://jsbin.com/axohar/3) | [来源](http://jsbin.com/axohar/3/edit)

HTML：

```
<label><input type='checkbox' name='check[]' id="x159" value='159' />
  Person 1</label>
<label><input type='checkbox' name='check[]' id="x160" value='160' />
  Person 2</label>
<div id="members"></div> 
```

JavaScript：

```
$(function(){
    $('input:checkbox').click(function(){
        var id  = this.id; // No need for `attr`

        if(this.checked){  // No need for `attr`
            $("<div>")
                .text($(this.parentNode).text())
                .attr("data-contents", id)
                .appendTo("#members");
        }
        else {
            $('div[data-contents="' + id + '"]').remove();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:48:44.407

如果我正确理解了您的问题，那么您有 X 数量的可用名额，而您只能填补那么多。如果是这种情况，我认为这就是您要寻找的：[jsFiddle](http://jsfiddle.net/Nt5xw/3/)。如果没有，其他一些解决方案可能会更好......

```
var $selections = $('ul.selections');
$('input:checkbox').click(function() {
    var id = $(this).val();
    if($(this).is(':checked')) {
        var $label = $(this).next('label');
        var $spot = $selections.find('li:not(.full)');
        if($spot.length == 0) {
            alert('no more spots open!');
            return false;
        }
        $spot.eq(0).addClass('full').html($label.clone());
    } else {
        var $label = $selections.find('label[for=' + id + ']');
        $label.closest('li').remove();
        $selections.append($('<li/>').html('&nbsp;'));        
    }
}); 
```

使用此 HTML：

```
<p>Options</p>

<ul>
    <li><input type='checkbox' name='check[]' id='159' value='159' /> <label for='159'>Person 1</label></li>
    <li><input type='checkbox' name='check[]' id='160' value='160' /> <label for='160'>Person 2</label></li>
    ....
</ul>

<p>Selections</p>

<!-- spots available = as many list items initially in HTML -->

<ul class='selections'>
    <li>&nbsp;</li>
    <li>&nbsp;</li>
    <li>&nbsp;</li>
    <li>&nbsp;</li>
    <li>&nbsp;</li>
    <li>&nbsp;</li>
</ul> 
```

我列出了它们，因为它们实际上是这样的，但是如果这是您想要的，那么代码将与 DIV 相同。由于标签被克隆，单击选择列表上的标签将删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:49:06.700

试试这个：**[jsFiddle 示例](http://jsfiddle.net/j08691/MtgPX/)**。

**jQuery**

```
$('input:checkbox').click(function() {
    if ($(this).is(':checked')) {
        $('div:empty:first').html($(this).next('label').html());
    }
    else {
        var foo = $(this);
        $('div').each(function() {
            if ($(this).html() == foo.next('label').html()) {
                $(this).html($(this).next('div').html());
                $(this).nextAll('div').each(function() {
                    $(this).html($(this).next('div').html());
                });
            }
        });
    }
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T16:08:13.113

基于您的代码的简单方法在这里[http://jsfiddle.net/joevallender/rTQMe/](http://jsfiddle.net/joevallender/rTQMe/)

```
$(document).ready(function(){

  $('input:checkbox').click(function(){

      var $checked = $('#checked');
      $checked.html('');

      $('input:checkbox').each(function(index){
          if($(this).is(':checked')) {
            $checked.append('<div>' + $('label[for="'+ $(this).attr('id') +'"]').text() + '</div>');   
          }
      });      

  });

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T15:36:02.140

有一些方法可以提高效率，但这应该适合您的目的：

```
 $(function(){

    var numberOfDivs = 6;

    $('input:checkbox').click(function(){

        var id = $(this).attr('id');

        if($(this).is(':checked')){

             for(i = 1; i < numberOfDivs - 1; i++)
             {
                 var div = $('#member' + i);

                 if(div.text() !== ''){
                     div.text( ($('label[for="'+ id +'"]').text() );                         
                 }
             }
        }
        else{

             var searchText = $('label[for="'+ id +'"]').text();

             for(i = 1; i < numberOfDivs - 1; i++)
             {
                 var div = $('#member' + i);

                 if(div.text() === searchText){
                     div.text('');                         
                 }
             }

        }
    });

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T15:56:25.747

这是我的做法：

```
$(function(){
    $('input:checkbox').click(function(){
        var id = this.id;
        if(this.checked){
            var member = $('#member1');
            var i = 1;
            while(member.data('num') == 1)
            {
                member = $('#member'+(++i));
            }
            member.text($('label[for="'+ id +'"]').text()).data('num',1);
        }
        else{
            var removed = false;
            $('div').each(function(){
                $(this).children('label').each(function(){
                    if(!removed && id == $(this).attr('for'))
                    {
                        removed = true;
                        $(this).parent().remove('label[for="'+$(this).attr('for')+'"]');
                    }
                }
                if(removed) //bubble the labels up into the next highest div.
                {
                    if($(this).data('num') == 1)
                    var lastObject = $(this).children('label');
                   $(this).prev().append(lastObject);
                }
            }
        }
    });
}); 
```

# asp.net - 将文本字段值从源页面传输到多个目标页面：对象类型转换错误

> ID：11122844
> 
> 赞同：-1
> 
> 时间：2012-06-20T15:24:21.217
> 
> 标签：asp.net, object, webforms, transfer

```
// SourcePage.aspx 
public partial class SourcePage: System.Web.UI.Page 
{ 
    protected void btnSearch_Click(object sender, EventArgs e) 
    { 
        //...... 
        //...... 

            while (rdr.Read()) 
            { 
                txtName.Text = rdr["Name"].ToString(); 
            } 
            rdr.Close(); 
    } 

    public string GetName 
    { 
        get { return txtName.Text; } 
    } 

    protected void btnServer.Transfer_Click1(object sender, EventArgs e) 
    { 
       Server.Transfer("TargetPage1.aspx"); 
       Server.Transfer("TargetPage2.aspx"); 
    } 
} 

//TargetPage1.aspx   
protected void Page_Load(object sender, EventArgs e) 
{ 
            SourcePage SP; 
            SP = (SourcePage)Context.Handler; // I get runtime error here: unable to cast object of type 'ASP.TargetPage_aspx' to type 'SourcePage' 
            txtTPName.Text = p.GetName; 
} 
```

我哪里错了？实在想不通。我需要将值从源页面传输到其他目标页面，并且我不想使用多个查询。任何形式的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:52:51.827

嘿伙计们，我使用会话变量解决了这个问题，这里是如何..

源页面：代码隐藏：连接后跟随..

```
SqlDataAdapter sda = new SqlDataAdapter();          
sda.SelectCommand = cmd;         
sda.Fill(dt);          
foreach (DataRow Row in dt.Rows)         
{             
txtSource.Text = Row["Name"].ToString();      
    }  
        Session.Add("sp", dt); 
```

然后在目标页面：

```
 DataTable dt = Session["sp"] as DataTable;    
 foreach (DataRow Row in dt.Rows)    
 {      
   txtTarget.Text = Row["Name"].ToString();  
   } 
```

现在我可以在任何其他页面中初始化这个数据表，并且可以从那里获得所需的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:35:47.877

尝试`[Page.PreviousPage](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)`

使用此属性，您将能够访问所有原始页面控件。

```
TextBox txtName = (TextBox)Page.PreviousPage.FindControl("txtName");
txtTPName.Text = txtName.Text; 
```

# google-app-engine - NDB 中反向引用属性的替代方法是什么？

> ID：11122846
> 
> 赞同：6
> 
> 时间：2012-06-20T15:24:26.200
> 
> 标签：google-app-engine, app-engine-ndb

我已经阅读[了这个问题](https://stackoverflow.com/questions/9917569/google-app-engine-ndb-equivalent-for-modelname-set-backreference-property)和简单明了的答案，但在我的情况下它没有用，因为答案不考虑嵌套的`for`. 请看代码：

```
class SuperCat(ndb.Model):

class Category(ndb.Model):
  supercat = ndb.KeyProperty(kind=SuperCat)

class SubCat(ndb.Model):
  category = ndb.KeyProperty(kind=Category) 
```

处理程序：

```
Categories = ndb.gql("SELECT * FROM Category WHERE supercat = :1", supercat_key)
self.generate('supercat.html', {'Categories': Categories}) 
```

在模板中，使用旧的 db.Model 和反向引用属性就足够了：

```
{{ for Category in Categories }}
  {{ for SubCat in Category.subcat_set }} # this is the back-reference in action 
```

为这种数据结构提供服务的同样简单的替代方案是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T04:33:20.917

让我们系统地看一下。首先，[db->ndb 翻译指南](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/edit)告诉我们，返回给定 Category 实例的 SubCategory 实例的查询如下：

```
 subcats_query = SubCategory.query(SubCategory.category == cat.key) 
```

（请注意，我对实例/实体使用小写名称，对类/模型使用 CapWords。所以 cat 是一个类别实体。）

所以在 Python 中，我们将编写你的双循环如下：

```
 for cat in categories:
    for subcat in SubCat.query(SubCat.category == cat.key):
      ...blah... 
```

为了把它变成可以从模板中轻松访问的东西，让我们在 Category 类上定义一个新方法：

```
 class Category(ndb.Model):

    supercat = ndb.KeyProperty(kind=SuperCat)

    def subcat_set(self):
      return SubCat.query(SubCat.category == self.key) 
```

请注意，这是一种方法；在 Python 中，你必须调用它：

```
 for cat in categories:
    for subcat in cat.subcat_set():
      ...blah... 
```

但是在模板中，您可以（必须）省略 () 调用语法，这样您就可以得到您想要的：

```
 {{ for cat in categories }}
    {{ for subcat in cat.subcat_set }}
      ...blah... 
```

试试看！

# objective-c - iOS imageWithData 调整为 640 x 480

> ID：11122848
> 
> 赞同：2
> 
> 时间：2012-06-20T15:24:32.830
> 
> 标签：objective-c, ios, uiimage

我编写了一个 iOS 方法来将所选图像上传到 Web 服务器，因此：

```
NSData *imageData = UIImagePNGRepresentation(imageView.image);
NSString *urlString = @"http://awebserversomewher.com/upload.php";

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"; filename=\".png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog(@"%@",returnString); 
```

但是，在提交此图像之前，我想调整它的大小以使其更容易和更快地上传，可以告诉我如何吗？

谢谢

贾斯汀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:37:35.517

这是一种方法，您可以这样做以得到您想要的任何尺寸（不一定保持比例，这是一个优点和一个缺点）：

```
UIImage *UIImageResize(UIImage *image, CGSize targetSize)
{
    UIGraphicsBeginImageContext(targetSize);
    CGContextRef bitmapContext = UIGraphicsGetCurrentContext();

    CGContextScaleCTM(bitmapContext, 1, -1);
    CGContextDrawImage(bitmapContext, (CGRect) { .origin.y = -targetSize.height, .size = targetSize }, image.CGImage);

    UIImage *results = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return results;
} 
```

示例用法：

```
UIImage *resizedImage = UIImageResize([UIImage imageNamed:@"NukeBusters.png"], CGSizeMake(125, 130));
imageView.image = resizedImage; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:27:51.290

```
UIImage *small = [UIImage imageWithCGImage:original.CGImage scale:scale orientation:original.imageOrientation]; 
```

如果您想要图像的预定义尺寸，只需自己计算比例即可。

例如，如果你想限制宽度然后做

```
scale = desiredWidth / imageWidth 
```

如果你想同时限制两者

```
scale1 = desiredWidth / imageWidth
scale2 = desiredHeight / imageHeight
scale = min (scale1 , scale2 ) 
```

# c# - C# 在父窗口中包含子窗体

> ID：11122853
> 
> 赞同：0
> 
> 时间：2012-06-20T15:24:53.723
> 
> 标签：c#, parent, mdi

我有一个父 mdi 窗口，它有两个可以打开和关闭的子窗口。父母以最大化开始，我想让孩子们不要越过父母的界限，这样孩子们就一直在屏幕上 100%。

父（mdi）最大化，我希望子（窗体）窗口留在屏幕上，不能被拖到监视器外。基本上如何阻止孩子被拖出屏幕。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:20:32.520

[这](http://social.msdn.microsoft.com/Forums/en/winforms/thread/46e35e80-7bfa-447a-9655-965134124f70)可能是您问题的答案：

```
protected override void OnMove(EventArgs e)
{
    //
    // Get the MDI Client window reference
    //
    MdiClient mdiClient = null;
    foreach(Control ctl in MdiParent.Controls)
    {
        mdiClient = ctl as MdiClient;
        if(mdiClient != null)
            break;
    }
    //
    // Don't allow moving form outside of MDI client bounds
    //
    if(Left < mdiClient.ClientRectangle.Left)
        Left = mdiClient.ClientRectangle.Left;
    if(Top < mdiClient.ClientRectangle.Top)
        Top = mdiClient.ClientRectangle.Top;
    if(Top + Height > mdiClient.ClientRectangle.Height)
        Top = mdiClient.ClientRectangle.Height - Height;
    if(Left + Width > mdiClient.ClientRectangle.Width)
        Left = mdiClient.ClientRectangle.Width - Width;
    base.OnMove(e);
} 
```

将其添加到您的 MDI 子窗体中。即使打开双缓冲它也会闪烁一点，但这是我找到的最佳解决方案。

# macos - MacBook 上的 Vim 默认领导键

> ID：11122866
> 
> 赞同：10
> 
> 时间：2012-06-20T15:25:45.393
> 
> 标签：macos, vim, macvim

我在 MacBook Pro 上使用 Vim，为了输入`\`，我必须输入`Maj + Alt + /`. Vim 的前导键默认绑定打开，`\`但键入整个“快捷方式”似乎不能用作前导键。

有没有办法让它工作，或者我应该使用另一个领导键，比如`,`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T15:47:22.453

我使用这个命令：

```
let mapleader = ',' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T14:14:54.680

将以下行放入您的 .vimrc 以便使用 , 作为您的领导者

```
let mapleader = ',' 
```

保存您的 .vimrc 并重新打开 vim。你的领导现在是

# c# - 不允许在 Obout 网格中多选 CheckBoxSelectColumn？

> ID：11122867
> 
> 赞同：0
> 
> 时间：2012-06-20T15:25:47.727
> 
> 标签：c#, asp.net, obout

我正在使用 OBOUT 网格并添加了`CheckBoxSelectColumn`列。我不想让用户选择多个复选框。即在网格中只允许单选复选框。

**如何迭代网格并取消选择允许并仅选择发件人？**

我写了客户端脚本方法

```
<script type="text/javascript">
   function Grid1_Select(sender, args) {
        alert('Its coming here')
           ///need to write code here
    }
</script>

  <obout:Grid ID="mGrid" runat="server" >
     <ClientSideEvents OnClientSelect="Grid1_Select" 
         ExposeSender="true" />                

     <Columns>
         <obout:CheckBoxSelectColumn ShowHeaderCheckBox="false" ControlType="Standard" HeaderText="Select"  runat="server"   >

         </obout:CheckBoxSelectColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T08:08:20.877

你需要设置

```
ShowHeaderCheckBox="true" 
```

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:34:30.567

要解决此问题，您必须在 rowcommand 事件上编写代码，在此，首先您将选中您选中的复选框并禁用其他复选框。或者你检查，如果任何复选框已经被选中，那么不要检查新的。

简单来说，您必须使用 rowcommand。

# c# - 在 XmlSerializer 上使用反序列化时始终为空

> ID：11122870
> 
> 赞同：1
> 
> 时间：2012-06-20T15:25:51.867
> 
> 标签：c#, asp.net, .net, deserialization

我想反序列化一些看起来像这样的 XML：

**XML:**

```
 <bookings>
        <booking>
           <timeStart>2012/7/2 11:00:00</timeStart>
           <timeEnd>2012/7/2 12:00:00</timeEnd>
        </booking>
        <booking>
            <timeStart>2012/7/10 08:30:00</timeStart>
            <timeEnd>2012/7/10 10:30:00</timeEnd>
        </booking>         
     </bookings> 
```

**我的代码：**

```
 var calUrlStr = "http://xxx.com?action=xxxxxx?x=1&y=2";

       HttpWebRequest webRequest = GetWebRequest(calUrlStr);
       HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse();

       XmlRootAttribute xRoot = new XmlRootAttribute();
       xRoot.ElementName = "bookings";
       xRoot.IsNullable = true;

       XmlSerializer xmlSerializer = new XmlSerializer(typeof(MyDomain.GCalBooking.GCalBookings), xRoot);

       Stream theStream = response.GetResponseStream();
       StreamReader reader = new StreamReader(theStream);

       MyDomain.GCalBooking.GCalBookings rateResponse = (MyDomain.GCalBooking.GCalBookings)xmlSerializer.Deserialize(reader); 
```

**我的课：**

```
namespace MyDomain.GCalBooking
{
    public class GCalBookings
    {

        public virtual List<Booking> Bookings { get; set; }

    }

    public class Booking
    {

        public string timeStart { get; set; }
        public string timeEnd { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:31:46.210

添加一个`XmlElementAttribtue`到你的类：

```
public class GCalBookings
{
    [XmlElement("booking")]
    public virtual List<Booking> Bookings { get; set; }
} 
```

旁注：为了帮助调试这样的东西，请尝试填充您的类，对其进行序列化，然后查看 XML 的结构是什么样的。然后，您可以调整您的类，直到生成的 XML 看起来像您想要反序列化的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T20:37:21.880

问题是，反序列化器不使用 list<> 属性的 SET 方法，但它通过 GET 方法，然后为每个项目调用 ADD。这意味着，必须通过 ctor 初始化属性 Bookings。

请参阅 [c# System.Xml.Serialization 不通过 Public List<T> 的 set 方法](https://stackoverflow.com/questions/10238104/c-sharp-system-xml-serialization-does-not-goes-throught-set-method-of-public-lis)

# jquery - 如何获取 redactorjs 中文本的长度？

> ID：11122872
> 
> 赞同：0
> 
> 时间：2012-06-20T15:25:58.680
> 
> 标签：jquery

我正在使用[redactorjs](http://redactorjs.com/)，它是 jQuery 上的所见即所得编辑器。我有一个文本框，我想验证它的长度不超过 10,000。

问题是当我的文本框转换为 redactorjs 所见即所得编辑器时，当我验证文本框的长度时，它还包括由 redactorjs 创建的 HTML 标记。

我想知道如何在没有 html 标签的情况下获取文本框的原始文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:36:11.420

在您链接的页面上，我尝试过：

```
$(".redactor_frame").contents().find("#page").html().length
//980
$(".redactor_frame").contents().find("#page").text().length
//781 
```

iframe`"#page"`内的 WYSIWYG 容器在哪里`".redactor_frame"`

# tfs - TFS 连续交付直接到 Azure 生产环境

> ID：11122873
> 
> 赞同：2
> 
> 时间：2012-06-20T15:26:03.437
> 
> 标签：tfs, azure

如此处所述：

[https://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/](https://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)

TFS 代码将部署到暂存环境。

我想知道我们是否可以在 TFS 中做一些事情，以便我们可以选择部署到暂存和/或生产环境。

非常感谢 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T21:51:59.277

您可以在构建定义中设置备用云服务环境属性，以便将“暂存”或“生产”自定义为默认值。未设置此属性时的默认值为“Staging”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:19:42.430

从 TFS 的角度来看，暂存或生产之间没有区别，因为 TFS 将部署在您将其配置为发布的任何位置。

当您使用 Windows Azure 云服务时，您可以在配置 Azure TFS 时选择暂存或生产槽，这样您的 TFS 项目将始终部署到配置的槽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T12:12:17.653

正如 Habibi 所说，您可以交换 Staging 和 Production。此页面上的第 6 步：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)

从第 6 步描述：

仅适用于云服务，不适用于 Web 应用程序。准备就绪后，可以通过选择 Azure 经典门户中的“交换”按钮将暂存环境提升到生产环境。新部署的 Staging 环境升级为 Production，之前的 Production 环境（如果有）成为 Staging 环境。生产环境和暂存环境的活动部署可能不同，但无论环境如何，最近构建的部署历史都是相同的。

# android - 片段回调到另一个带有片段的活动，导致片段视图中的空指针

> ID：11122875
> 
> 赞同：2
> 
> 时间：2012-06-20T15:26:09.147
> 
> 标签：android, callback, android-fragments

所以我有一个带有视图寻呼机和 3 个片段的 Activity（我们称之为 A），其中一个片段（我们称之为片段 A）加载一个列表。此列表的 onclickitem 列表将触发对活动（A）的回调，因此它会启动一个带有新片段（B 也是）的新活动（我们称之为 B）：

带有列表的 Fragment(A)，包含接口和 onclickItemListener()：

```
// Container Activity must implement this interface
public interface onProcessSelectedListener{

    public void onMyProcessSelected(MyProcessDTO process);
}

actualListView.setOnItemClickListener(
                new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {

                        IpdmsMobileMenuItemListDTO dto=(IpdmsMobileMenuItemListDTO) parent.getItemAtPosition(position);

                        if(getView().findViewById(R.id.myprocessdetail)!=null)
                            updateProcess((MyProcessDTO) dto.getDto());
                        else{

                            mListener.onMyProcessSelected((MyProcessDTO) dto.getDto());
                        }
                    }
                }); 
```

如果布局未显示特定视图，它将在包含此片段的视图寻呼机的 Activity(A) 上启动回调方法：

```
@Override
public void onMyProcessSelected(MyProcessDTO process) {

    Intent showContent = new Intent(getApplicationContext(),MyProcessDetail.class);
    showContent.putExtra("Process", process);
    startActivity(showContent);
} 
```

这将调用新活动（B）：

```
@Override
public void onCreate() {

    this.setTheme(getThemeId());
    super.onCreate(bundle);

    //get extras from bundle
    extras = getIntent().getExtras();
    //requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(getLayoutId());

    MyProcessDTO process= (MyProcessDTO) extras.get("Process");

    //get fragment
    MyProcessDetailsFragment contentProcess= (MyProcessDetailsFragment) getSupportFragmentManager()
    .findFragmentById(R.id.view_fragment);

    contentProcess.updateProcess(process);
} 
```

Activity(B)中加载的布局，包含指向Fragment(B)类的fragment标签Activity(B)调用fragment(B)方法updateProcess()：

公共无效更新进程（MyProcessDTO 进程）{

```
 nrProcTV.setText(process.getNrprocesso());
    tipoTV.setText(process.getVariante());
} 
```

但是由于某种原因，这些文本视图为空。它们在片段（B）的 onActivityCreated 方法上初始化。：

```
@Override
public void initializeFragment(Bundle savedInstanceState) {

    super.initializeFragment(savedInstanceState);

    nrProcTV=   (TextView) getView().findViewById(R.id.nrprocesso_value);
    tipoTV= (TextView) getView().findViewById(R.id.tipoprocesso_value);

} 
```

为什么在调用 updateProcess 方法之前没有执行 onActivityCreated 方法？？

问候，

.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:05:24.993

textViews 为空，因为您在片段通过 onViewCreated() 之前访问它们。您可以通过让 Activity 在 Fragment 中设置一个字段来解决您的问题，并让 Fragment 在其 onViewCreated 方法中使用该字段来查看.setText。

# regex - 如何使用正则表达式用 Powershell 替换文本文件中的日期

> ID：11122883
> 
> 赞同：10
> 
> 时间：2012-06-20T15:26:32.650
> 
> 标签：regex, date, powershell, replace

我对此进行了很多搜索，但还没有找到答案，但我觉得我很接近了！

我在文本文件中有以下格式的日期：`18/06/2012 23:00:43 (dd/mm/yyyy HH:MM:SS)`我想转换为：`2012-18-06 23:00:43 (yyyy-dd-mm HH:MM:SS)`使用 Powershell。

要使用正则表达式在文本编辑器中执行转换，我会这样做：

```
Find: ([0-9]+)/+([0-9]+)/+([0-9]+)

Replace with: \3-\2-\1 
```

因此，我尝试在以下 Powershell 脚本中使用相同的逻辑：

```
(Get-Content C:\script\test.txt) | 
Foreach-Object {$_ -replace "([0-9]+)/+([0-9]+)/+([0-9]+)", "(\3-\2-\1)"} | 
Set-Content C:\script\test.txt 
```

但这会导致以下不良变化：

> \3-\2-\1 23:00:43

任何人都可以帮我解决这个问题吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-20T15:35:55.143

这就是你想要的：

```
(Get-Content C:\script\test.txt) | 
Foreach-Object {$_ -replace "([0-9]+)/+([0-9]+)/+([0-9]+)", '$3-$2-$1'} | 
Set-Content C:\script\test.txt 
```

捕获组引用是使用`$`符号完成的，而不是反斜杠。此外，要按编号引用捕获的组，[您必须在替换字符串周围使用单引号](http://www.regular-expressions.info/powershell.html)；否则，PowerShell 会将任何`$`符号解释为对先前定义的变量的引用，在这种情况下，这将导致字符串`"--"`，因为不存在此类变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T15:36:46.800

-replace 运算符支持与 .NET 中的 Regex.Replace() 函数相同的替换文本占位符。[例如 $& 是整体正则表达式匹配，$1 是第一个捕获组匹配的文本，${name} 是命名组 "name" 匹配的文本](http://www.regular-expressions.info/powershell.html)。

而不是`"(\3-\2-\1)"`使用`'($3-$2-$1)'`

`'06/18/2012 23:00:43' -replace "(\d+)/(\d+)/(\d+)", '($3-$2-$1)'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T15:36:45.863

尝试

```
Foreach-Object {$_-replace "([0-9]+)/+([0-9]+)/+([0-9]+)", '$3-$2-$1'} 
```

# c# - 包含 ASP.NET MVC 和 Web 窗体的项目解决方案的良好结构？

> ID：11122894
> 
> 赞同：2
> 
> 时间：2012-06-20T15:26:47.603
> 
> 标签：c#, asp.net, asp.net-mvc, architecture

我的情况是，我必须创建一个混合了 ASP.Net MVC 和 Web 表单的项目。在 MVC 的整洁结构中安装 Web 表单文件让我心碎。现在，我将表单放在 Content 下的子文件夹中。这是解决此问题的唯一/合乎逻辑的方法吗？将它们放在 Views 文件夹中会更有意义，但在那里无法访问它们。需要您的专家建议如何解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:32:15.763

我曾多次遇到必须使现有 WebForms 应用程序与 ASP.NET MVC 应用程序互操作的情况。事实上，目标始终是将此应用程序重写为 MVC，但由于它太大，必须分多个步骤完成，并且在一定时间内两者必须互操作。在所有这些情况下，我从未在同一个项目中混合使用 2。我一直创建一个单独的干净的 ASP.NET MVC 应用程序，并使用标准的 HTTP/HTML 方法进行 2 次谈话：锚点、表单、cookies。

但是如果在你的情况下你真的需要在同一个应用程序中混合 2，我猜你现有的 WebForms 应用程序已经有一个既定的文件夹结构，在引入 MVC 结构时你不想修改。我会保持这个文件夹结构不变。他的*Views*文件夹确实应该*只*为 MVC 视图保留。您可以将旧版 WebForms 放在根目录的某个子文件夹中。

# ember.js - Ember.js：在通知观察者的同时批量分配属性

> ID：11122896
> 
> 赞同：3
> 
> 时间：2012-06-20T15:26:48.133
> 
> 标签：ember.js

在 Ember.js 中，我正在创建一个像这样的用户对象，从 JSON API 填充它：

```
user = App.User.create({screenName: screenName});
$.ajax({
  ...
  success: function(data) {
    user.reopen(data);
  }
});
return user; 
```

在这里，`user.reopen(data)`将 JSON 响应批量分配给用户对象。

但是现在观察者没有被触发。

有没有一种简单的方法来大规模更新属性，同时触发观察者，而不使用递归循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:41:55.880

你试过`setProperties()`吗？

# django - 确定 ManyRelatedManager 是否是 django 中的空 QuerySet 的最佳方法是什么

> ID：11122902
> 
> 赞同：0
> 
> 时间：2012-06-20T15:26:54.577
> 
> 标签：django, django-queryset

我有 2 个模型， `Bacon`并且`Eggs`都必须`ForeignKey`建模`Spam`。

我需要找出与 无关的培根`Eggs`，目前我正在按以下方式进行操作：

```
objs = Bacon.objects.select_related.filter(somefilter=value)

for obj in objs:
    if obj.spam.eggsspam.count():
        continue

    do_something() 
```

我确定必须有更优化的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:40:04.693

尝试：

```
Bacon.objects.filter([m2m_field_name]__isnull=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:52:29.867

你想要[注释](https://docs.djangoproject.com/en/1.4/topics/db/aggregation/#generating-aggregates-for-each-item-in-a-queryset)。代码将与此类似：

```
Bacon.objects.annotate(num_eggs=Count('spam__egg_set')).filter(num_eggs__eq=0) 
```

# mysql - mySQL 查询中的两个变量中的较大者

> ID：11122903
> 
> 赞同：1
> 
> 时间：2012-06-20T15:27:01.613
> 
> 标签：mysql, sql

我想编写一个返回单个日期值的查询，该值是两列中最新的。

因此，如果我有一个值 a、b、date1、date2 的表，我想要类似的东西：

```
SELECT a, b, (Greater of date1 and date2) as date FROM... 
```

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T15:30:05.043

您可以使用[GREATEST](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_greatest)功能。

```
SELECT a, b, GREATEST(date1,date2) as date FROM... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T15:29:07.440

您可以使用[IF 语句](http://dev.mysql.com/doc/refman/5.5/en/if-statement.html)

```
SELECT a, b, IF(date1>date2, date1, date2) as date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:31:11.803

只是我们的[`IF`](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)功能...

```
SELECT a, b, 
    IF (date1 > date2, date1, date2) AS 'date'
FROM yourtable 
```

...或将其与[`GREATEST`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_greatest)：

```
SELECT a, b, 
    GREATEST(date1, date2) AS 'date'
FROM yourtable 
```

# objective-c - Cocoa中文字阴影的首选方法

> ID：11122907
> 
> 赞同：0
> 
> 时间：2012-06-20T15:27:10.383
> 
> 标签：objective-c, cocoa, interface-builder, nstextfield

我创建了一个 Mac 应用程序，需要在白色字母后面放置一个阴影，以更好地将文本与背景区分开来。我注意到我可以使用 Interface Builder 中的“View Effects Inspector”为静态文本添加阴影。这是这样做的首选方法吗？我已经看到了通过代码实现的示例，但是使用 Interface Builder 方法可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T23:55:50.770

我不确定是否有“首选”方法。界面构建器方法运行良好，我个人对此没有任何问题。您可以采用代码路线并使用`NSShadowAttributeName`（有关更多信息，请参阅[此](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/20000167)文档）将阴影添加到`NSAttributedString`. 最后，您选择的任何一种方式都无关紧要。

# c# - 从同一个类中的另一个构造函数调用构造函数

> ID：11122908
> 
> 赞同：8
> 
> 时间：2012-06-20T15:27:12.287
> 
> 标签：c#, .net, oop, c#-4.0, constructor

我有一个有两个构造函数（C#）的类。这是代码片段：

```
public class FooBar()
{
    public FooBar(string s)
    {
        // constructor 1, some functionality
    }

    public FooBar(int i) : this("My String")
    {
        // constructor 2, some other functionality
    }

} 
```

是的，我知道我可以使用上述方法从另一个构造函数调用一个构造函数。但是在这种情况下，如果我调用构造函数 2，构造函数 1 中的所有语句都将在构造函数 2 中的语句执行之前运行。

我想要的是，在构造函数 2 中的所有语句都运行之后，它会调用构造函数 1。

在我的确切情况下，我正在进行用户身份验证。构造函数 1 仅使用用户 ID 检索用户信息，但构造函数 2 使用电子邮件和密码进行用户身份验证。如果用户在数据库中，它会获取用户 ID，现在我希望构造函数 1 填充类的所有属性。

如果您需要更多信息，请告诉我。如果您认为还有另一种更好的方法，我很乐意听取建议。

更新1：我想知道为什么没有实现这样的事情：

```
public FooBar(bool b)
{
    // constructor 3, some more functionality
    this.FooBar("My String"); // calling constructor 1
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T15:31:38.610

在这种情况下，不要使用构造函数调用，而是使用类似：

```
public class FooBar()
{
    public FooBar(string s)
    {
        Init1();
    }

    public FooBar(int i)
    {
        Init2(); 
        Init1();
    }

} 
```

我认为这是`Init1(..)`与`Init2(..)`相应构造函数的某些特定初始化逻辑相关的方法。

实际上，您可以以更适合您需要的方式安排此函数调用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-20T15:33:53.763

您可以使用另一个私有方法进行初始化：

```
public class FooBar()
{
    public FooBar(string s)
    {
        this.Initialize(s);
    }

    public FooBar(int i)
    {
        this.Initialize("My String");
    }

    private void Initialize(string s) {
        // Do what constructor 1 did
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T15:30:38.130

为什么不将该功能包装成一些`method`并在构造函数（或任何你想要的地方）中调用它？

```
public class FooBar()
{
    public FooBar(string s)
    {
        LoadUser(s);
    }

    public FooBar(int i) : this("My String")
    {
        var s=CheckUser();
        LoadUser(s);
    }

    private string CheckUser()
    {
       return "the id/name from db";
    }
    private void LoadUser(string s)
    {
          //load the user
    }

} 
```

这是一个通用的解决方案。您可以根据您的具体情况更改返回类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T15:30:44.500

一般来说，你可以使用这个：

```
public class FooBar()
{
    private Test(string s)
    {
        // Some functionality
    }

    public FooBar(string s)
    {
        Test(s);
    }

    public FooBar(int i)
    {
        // Do what you need here
        Test("MyString");
    }    
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T15:31:40.910

最佳方法 - 不要将该逻辑放在构造函数中。将其分解为您可以随意调用的其他方法，而无需担心构造函数链接。

# wpf - wpf radcombobox 滚动条向下箭头关闭下拉菜单

> ID：11122912
> 
> 赞同：1
> 
> 时间：2012-06-20T15:27:20.580
> 
> 标签：wpf, radcombobox

我正在使用 radcombobox 自动完成功能。这些值正在填充并且工作正常，但是当我尝试使用滚动条箭头向上或向下滚动时，组合框下拉菜单已关闭。我在网上查了一下，但没有找到解决办法。

# git - Jenkins + git：“告诉我你是谁”错误，为什么需要标记？

> ID：11122913
> 
> 赞同：38
> 
> 时间：2012-06-20T15:27:21.323
> 
> 标签：git, jenkins, jenkins-plugins

刚刚在 Ubuntu 12.04 中安装了 Jenkins，我想创建一个简单的构建，它只是克隆一个项目并构建它。

它失败了，因为它无法标记。它无法标记，因为它错误地说“**告诉我你是谁**”显然是因为我没有设置 git 设置用户名和用户电子邮件。

但是，我不需要设置这些，Jenkins 将只是克隆存储库，如果它不推送更改，为什么它需要凭据，为什么它根本需要做一个标签？

完整的错误日志是：

```
Started by user anonymous
Checkout:workspace / /var/lib/jenkins/jobs/Foo.Bar.Baz/workspace - hudson.remoting.LocalChannel@38e609c9
Using strategy: Default
Cloning the remote Git repository
Cloning repository origin
Fetching upstream changes from git@mygithost.mydomain.local:foo-bar-baz/foo-bar-baz.git
Seen branch in repository origin/1.0
Seen branch in repository origin/1.5.4
Seen branch in repository origin/HEAD
Seen branch in repository origin/master
Commencing build of Revision 479d37776b46283a946dd395c1ea78f18c0b97c7 (origin/1.0)
Checking out Revision 479d37776b46283a946dd395c1ea78f18c0b97c7 (origin/1.0)
FATAL: Could not apply tag jenkins-Foo.Bar.Baz-2
hudson.plugins.git.GitException: Could not apply tag jenkins-Foo.Bar.Baz-2
at hudson.plugins.git.GitAPI.tag(GitAPI.java:737)
at hudson.plugins.git.GitSCM$4.invoke(GitSCM.java:1320)
at hudson.plugins.git.GitSCM$4.invoke(GitSCM.java:1268)
at hudson.FilePath.act(FilePath.java:758)
at hudson.FilePath.act(FilePath.java:740)
at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1268)
at hudson.model.AbstractProject.checkout(AbstractProject.java:1193)
at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:565)
at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:453)
at hudson.model.Run.run(Run.java:1376)
at hudson.matrix.MatrixBuild.run(MatrixBuild.java:220)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:175)
at hudson.model.OneOffExecutor.run(OneOffExecutor.java:66)
Caused by: hudson.plugins.git.GitException: Command "git tag -a -f -m Jenkins Build #2 jenkins-Foo.Bar.Baz-2" returned status code 128:
stdout: 
stderr: 
*** Please tell me who you are.

    Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository.

fatal: empty ident  <jenkins@somehostname.(none)> not allowed

    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:786)
    at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:748)
    at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:758)
    at hudson.plugins.git.GitAPI.tag(GitAPI.java:735)
    ... 13 more 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-20T23:46:32.973

在提取/克隆 repo 时标记的想法对于大多数 Build Scheduler 都很常见：
Hudson-Jenkins，还有[CruiseControl](http://cruisecontrol.sourceforge.net/main/)（由 确定的构建标签`labelincrementer`）或[RTC Jazz Build Engine（它们被称为“快照”）](http://pic.dhe.ibm.com/infocenter/rtc/v1r0m0/topic/com.ibm.team.scm.doc/topics/c_snapshots.html)。

这个想法是为构建设置*输入的持久记录。*
这样，即使没有标记，构建调度程序也会为您自动标记您正在提取的代码，以便稍后能够返回到该特定构建。

如果设置了该策略（始终在构建之前进行标记），那么 Jenkins 将需要知道您是谁才能制作一个 git 标签（它是一个带有作者的 git 对象：`user.name`和`user.email`）。

然而，正如“[为什么 hudson/jenkins 试图提交？](https://stackoverflow.com/questions/6980570/why-hudson-jenkins-tries-to-make-commit) ”中所述：

> 检查“ ”部分中“ ”`Skip internal tag`下的“ ”配置。 `Advanced...``Source code management`

这应该避免您似乎不需要的额外标记步骤。

![在此处输入图像描述](../Images/28e328fba91acc40356d5eb60ef8b7c7.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-07-31T03:20:56.037

至于如何设置 user.email 和 user.name，在 jenkins 中，转到“管理 Jenkins”>“配置系统”并向下滚动到“Git 插件”，你会发现 ![Git 插件截图](../Images/9b0e6da2e4beb0ee438bc0c884c38b7b.png)

输入您的电子邮件和姓名，您就可以开始了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-23T10:43:29.747

我使用了 iecanfly 上面的解决方案。使用我的 git 用户名和密码无效，我输入了

用户名：詹金斯

电子邮件：jenkins@localhost

这解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-07T13:52:04.700

您还可以通过 SSH 进入 Jenkins 并导航到工作区目录，然后您可以正常运行 git config user.name 和 user.email 命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-07T19:58:19.637

如果您在 Docker 容器中运行 Jenkins，则需要执行到容器中，`docker exec -it <CONTAINER_ID> sh`然后使用您的电子邮件和名称运行建议的 git 命令。

# asp.net-mvc - 铸造匿名型已知模型

> ID：11122927
> 
> 赞同：0
> 
> 时间：2012-06-20T15:28:03.910
> 
> 标签：asp.net-mvc, casting, controller, ienumerable

我的模型类是这样的：

```
Public class abc {

         public string p1 get; set;
         public string p2 get; set;
} 
```

我正在尝试像这样投射

```
IEnumerable<abc> data= ( IEnumerable<abc>) (from d in d.GetAll()
                       select new {
                        p1= d.p1,
                        p2= d.p2
                     }).Distinct(); 
```

它给了我错误：

```
Unable to cast object of type <DistinctIterator> 
```

请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:34:28.757

您不能直接将匿名类型强制转换为已知类型。改为这样做：

```
IEnumerable<abc> data = from d in d.GetAll()
                    select new abc() {
                     p1 = d.p1,
                     p2 = d.p2
                  }).Distinct(); 
```

并在必要时创建一个 IEqualityComparer 以与您的 Distinct 调用一起使用。有关使用 Distinct 实现 IEqualityComparer 的示例，请参见[Enumerable.Distinct Method (IEnumerable, IEqualityComparer) 。](http://msdn.microsoft.com/en-us/library/bb338049#Y0)

# python - 从递归生成器函数引发异常

> ID：11122930
> 
> 赞同：2
> 
> 时间：2012-06-20T15:28:07.417
> 
> 标签：python, generator

我是 Python 的初学者，并试图了解生成器，特别是使用 yield 语句。通过编写一些存储键和数据的经典树类来玩耍。

```
#!/usr/bin/env python3

class Tree:
    def __init__(self, key, data):
        "Create a new Tree object with empty L & R subtrees."
        self.key = key
        # store passed data
        self.data = data
        self.left = self.right = None

    def insert(self, key, data):
        "Insert a new element and data into the tree in the correct position."
        if key < self.key:
            if self.left:
                self.left.insert(key,data)
            else:
                self.left = Tree(key, data)
        elif key > self.key:
            if self.right:
                self.right.insert(key, data)
            else:
                self.right = Tree(key, data)
        else:
            raise ValueError("Attempt to insert duplicate value")

    def walk(self):
        "Generate the keys and data from the tree in sorted order."
        if self.left:
            for n in self.left.walk():
                yield n
        # change output to include data
        yield self.key,self.data
        if self.right:
            for n in self.right.walk():
                yield n 
```

到目前为止，这工作得很好。现在我正在尝试实现一个 find() 函数，该函数遍历树并返回找到的键的数据。

```
def find(self, key):
    if self.left:
        for n in self.left.find(key):
            yield n

    if self.right:
        for n in self.right.find(key):
            yield n

    if self.key == key:
        yield self.data 
```

`KeyError`该功能有效 - 但如果在树中找不到密钥，我想提出 a 。我试图绕开它，但在使用 yield 语句时我没有看到一个（简单的）方法来做到这一点。具体来说，我似乎无法想出一种方法来真正知道树什么时候已经完全行走并且仍然没有找到钥匙。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:04:18.013

我注意到这`find`并没有使用树已排序的事实。这个实现怎么样：

```
def find(self, key):
    if key == self.key:
        return self.data
    if key < self.key and self.left:
        return self.left.find(key)
    if key > self.key and self.right:
        return self.right.find(key)
    raise KeyError("No such thing") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:55:59.473

将当前的 find() 重命名为 _find()，然后：

```
def find(self, key):
    gen = self._find(key)
    try:
        yield gen.next()
    except StopIteration:
        raise KeyError(key)
    for item in gen:
        yield item 
```

# c++ - 如何解决VS2010的MSB6001错误？

> ID：11122932
> 
> 赞同：1
> 
> 时间：2012-06-20T15:28:09.673
> 
> 标签：c++, visual-studio-2010

我们的项目最近已从 VS2005 迁移到 VS2010。在我的桌面上编译它会导致随机错误，主要是一个：

```
12>C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets(268,5): error MSB6001: Invalid command line switch for "link.exe". Not a valid Win32 FileTime.
12>C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets(268,5): error MSB6001: Parameter name: fileTime 
```

我查看了项目属性，在“链接器”部分，然后是“命令行”。与文件时间无关..

完整的 VS2010 重新安装并没有解决问题。您是否已经看到该问题并且您设法解决了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T10:58:13.900

获取以下文件的最新更新：

C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets

这是最新版本的链接： [https ://docs.google.com/file/d/0B5D-rSG1AVXNVXBCUzNtU0RaRzg/edit](https://docs.google.com/file/d/0B5D-rSG1AVXNVXBCUzNtU0RaRzg/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:49:35.307

从我的桌面上删除 Citrix 确实解决了这个问题。（难以置信但真实..）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T10:17:19.623

检查 %LOCALAPPDATA%\Microsoft\MSBuild\v4.0\Microsoft.Cpp.Win32.user.props 文件中的包含/排除路径

就我而言，我从 ExcludePath 标记中删除了 $(path)，这修复了我的 MSB6001 错误。

# symfony - symfony 2 捆绑安装

> ID：11122941
> 
> 赞同：1
> 
> 时间：2012-06-20T15:28:31.197
> 
> 标签：symfony, bundles

> **可能重复：**
> [“git”未被识别为内部或外部命令](https://stackoverflow.com/questions/4492979/git-is-not-recognized-as-an-internal-or-external-command)

我想安装这个包：[http](http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html) ://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html 我在windows上工作，我安装了[github](http://code.google.com/p/msysgit/downloads/detail?name=Git-1.7.10-preview20120409.exe&can=2&q=full%20installer%20official%20git)

我按照第一个链接上的步骤进行操作。但使用后： php bin/vendors install 我得到以下错误：[错误](http://img205.imageshack.us/img205/3673/errorsfm.png)

我已经在这里阅读了几个这样的问题，我什至添加了 PATH。(C:\Program Files (x86)\Git\bin)，但仍然出现错误。有任何想法吗？

# javascript - 将事件个人资料图片发布到页面 javascript sdk 时出现问题

> ID：11122942
> 
> 赞同：0
> 
> 时间：2012-06-20T15:28:40.403
> 
> 标签：javascript, facebook, facebook-graph-api

好的，我正在使用 javascript API 处理 Facebook Graph API。我一直在努力在用户页面上创建事件，而不是在他们的个人资料上，我工作得很好。但是，当我尝试使用活动上传个人资料图片时，活动成功创建，但没有图片。

我尝试了许多解决方案，但还没有找到一个有效的解决方案。

这是我目前拥有的：

```
 function SubmitEvent(descrip, name, start,end, line1, city, state, zip, lat, lon,path)

    {
           var eventMsg = document.getElementById('event-msg');

            var myJsonEvent = {
                "name": name,
                "description": descrip,
                "start_time": start,
                "end_time": end,
                "location": city + ", " + state,
                "venue": {
                    "street": line1,
                    "city": city,
                    "state": state,
                    "country": "United States",
                    "latitude": lat,
                    "longitude": lon
                },
                "privacy": "OPEN",
                "picture": 
            "http://stage.localruckus.com/Content/Uploads/Thumbnails/Eddie%20Delahunt_card_
                          84dc116b-f7e5-477b-b0bb-60ecdbe41955.jpg"

            };

            var select = document.getElementById("facebook-page-select");
            var pageId = select.options[select.selectedIndex].value;
            var res;
            FB.api(pageId, 'post', myJsonEvent, function (result) {
                console.log(result);
                if (result.id == undefined) {
                    eventMsg.innerHTML = 'There was a problem creating the event, please 
                          try  again. Error: '+result.message;
                }
                res = result.id;
                eventMsg.innerHTML = 'Event posted id: ' + result.id;
                eventId = result.id;
                postPicture(path);

            });

    }

    function postPicture(path) {
        var cookie = eventId;
        var token = getCookie('access');
        if (cookie != null && cookie != undefined && token != null && token != undefined) {
           $.ajax({
                type: "POST",
                url: "https://graph.facebook.com/" + cookie,
                data: {
                    message: "Event picture",
                    url:
            "http://stage.localruckus.com/Content/Uploads/Thumbnails/Eddie%20Delahunt_card_
                         84dc116b-f7e5-477b-b0bb-60ecdbe41955.jpg",
                    access_token: token,
                    format: "json"
                },
                success: function (data) {
                    alert("Picture posted successfully");
                } 
        });

     }
    } 
```

postPicture 方法或使用事件创建 api 调用提供图像路径似乎都不起作用，尽管我没有收到任何错误或类似的东西。

我在 google、SO 和 facebook 文档上花了很多时间，但还没有找到答案。我在 facebook 文档中找到了这个小片段：

* * *

图片

读

向 /EVENT_ID/picture 发出 HTTP GET 请求会返回 HTTP 302 重定向到事件的个人资料图片的 URL。

创建/更新

您可以通过向 /EVENT_ID/picture 发出 HTTP POST 请求来向事件添加个人资料图片，该请求具有事件管理员的 create_event 权限和以下参数：

参数 描述 类型 必填

source 图片内容 multipart/form-data 是

如果请求成功，则返回 true。

删除

您可以通过向具有活动管理员的 create_event 权限的 ?EVENT_ID/picture 发出 HTTP DELETE 请求来删除活动的个人资料图片。

如果请求成功，则返回 true。

* * *

但是我还没有找到神秘的“源”参数，或者当数据不是来自表单时如何创建/发布多部分表单数据。

有人可以帮帮我吗？我真的很感激你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:37:55.827

BUG：目前有 2 个与此问题相关的错误。

[https://developers.facebook.com/bugs/459815400713534](https://developers.facebook.com/bugs/459815400713534)

[https://developers.facebook.com/bugs/339792622758072](https://developers.facebook.com/bugs/339792622758072)

* * *

您是否尝试过对图片链接进行 url 编码？我相信当它从表单发布时，表单会对 url 进行编码。由于您没有使用表单发布，因此您必须自己编码。

```
picurl = encodeURIComponent('http://stage.localruckus.com/Content/Uploads/Thumbnails/Eddie%20Delahunt_card_
                         84dc116b-f7e5-477b-b0bb-60ecdbe41955.jpg'); 
```

在这里测试[http://jsfiddle.net/ShawnsSpace/e7E4c/](http://jsfiddle.net/ShawnsSpace/e7E4c/)

# sql - 合并同类信息

> ID：11122943
> 
> 赞同：0
> 
> 时间：2012-06-20T15:28:40.177
> 
> 标签：sql

此查询从两个表返回以下结果。计数是与 ID 关联的产品数量：

```
select pog.DBKey
      ,Count(pos.DBParentProductKey)
as Total
from ix_spc_planogram as pog with (nolock)
   , ix_spc_position as pos with (nolock)
where pog.dbkey = pos.dbparentplanogramkey
and pog.Value4 = 358
group by pog.dbkey 
```

```
DBKEY  Total
2134   20
2132   22
2133   20 
```

现在我需要使用此信息来确定 2134 是否具有与 2133 相同的 DBParentProductKeys。我需要将所有类似 DbKEys 的对象组合在一起，如下所示

```
DBKEY    Assortment
2134     1                1+1 because it has the same ParentProductKeys
2133     1
2132     2 
```

关于如何解决这个问题的任何想法都会非常有帮助。

# netbeans - 忽略项目结构中的某些文件（自定义项目类型）

> ID：11122944
> 
> 赞同：2
> 
> 时间：2012-06-20T15:28:57.367
> 
> 标签：netbeans, netbeans-platform

我目前正在 Netbeans 中创建一个项目类型。我遵循了基本教程，但添加了一些东西。

这是逻辑视图

```
 public org.openide.nodes.Node createLogicalView() {
        FileObject root = project.getProjectDirectory();
        DataFolder findFolder = DataFolder.findFolder( root );
        Node node = findFolder.getNodeDelegate();

        return new TextNode( node, project );
} 
```

基本上根是项目文件夹。

这是我的过滤器节点。

```
private static final class TextNode extends FilterNode {

    final NodeJSProject project;

    public TextNode( Node node, NodeJSProject project ) {

        super( node, new NodeJSProjectNode( node ),
                new ProxyLookup( new Lookup[]{
                    Lookups.singleton( project ),
                    node.getLookup()
                } ) );

        this.project = project;
    } 
```

还有我对过滤器节点的自定义覆盖。

```
public static class NodeJSProjectNode extends FilterNode.Children {

        public NodeJSProjectNode( Node node ) {
            super( node );
        }

        @Override
        protected Node[] createNodes( Node key ) {
//key.getName() only returning root objects.  No children
            if ( key.getName().startsWith( "." ) ) {
                return new Node[]{};
            }
            return new Node[]{ copyNode( key ) };
        }
    } 
```

基本上我试图忽略隐藏文件。我以为这是由 IDE 完成的，但我猜不是。我目前拥有的代码适用于根目录。它不会添加 .DS_Store、.git 等。我试图忽略子目录中的所有文件夹/文件。我不确定这是如何使用 createNodes 方法完成的。似乎进入的唯一键是根节点/文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:45:15.233

我一直在遵循相同的教程，并且能够实现适合我的特殊情况的结果；在我的项目类型中，我只想查看“xlsx”或“xls”或“txt”文件类型。

但我可以看到你采取了与教程所指示的不同的转变。这是 TextNode 的构造函数

```
super( node, new NodeJSProjectNode( node ),
            new ProxyLookup( new Lookup[]{
                Lookups.singleton( project ),
                node.getLookup()
            } ) ); 
```

这是教程的模板：

```
super(node,
        NodeFactorySupport.createCompositeChildren(
                project, 
                "Projects/org-customer-project/Nodes"),
        // new FilterNode.Children(node),
        new ProxyLookup(
        new Lookup[]{
            Lookups.singleton(project),
            node.getLookup()
        })); 
```

如果您要按照教程进行操作，我相信我可以提供帮助。

# c# - 如何获取 OpenLDAP 服务器的区分名称

> ID：11122947
> 
> 赞同：0
> 
> 时间：2012-06-20T15:29:03.413
> 
> 标签：c#, .net, windows, active-directory, openldap

我知道要获取 Active Directory 服务器的专有名称：

```
 DirectoryEntry nRoot = new DirectoryEntry("LDAP://localhost:389");//this for OpenLDAP
 string dnPath = nRoot.Properties["distinguishedName"].Value.ToString(); 
```

我收到“指定了无效的 dn 语法”的错误

尽管如果使用 AD 服务器 IP 而不是 localhost:389 尝试相同的代码，它会完美运行。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:24:04.597

我不确定我是否遵循“Active Directory 服务器的可分辨名称”的意思……您实际上要完成什么？

您当前的代码本质上将绑定到本地域控制器上所谓的 RootDSE。

# javascript - 在背景选项卡上运行画布

> ID：11122949
> 
> 赞同：6
> 
> 时间：2012-06-20T15:29:12.287
> 
> 标签：javascript, canvas, processing.js

我最近创建了一个 HTML5 画布动画（也使用 Processing.js）。

问题是当我将浏览器切换到不同的选项卡时，动画会停止播放。

当用户在与包含动画的选项卡不同的选项卡上时，如何允许动画继续播放？

示例：http: [//jsfiddle.net/EyFTr/3/](http://jsfiddle.net/EyFTr/3/)

如果您切换标签，时钟会停止，但如果您打开一个新窗口链接并模糊窗口，时钟仍然会移动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:37:35.380

简短的回答是你不能。

[https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)

> 在（Firefox 5.0 / Thunderbird 5.0 / SeaMonkey 2.2）和 Chrome 11 中，超时被限制为在非活动选项卡中每秒触发一次（1000 毫秒）；请参阅错误 633421 了解 Mozilla 中的更多信息，或 crbug.com/66078 了解 Chrome 中的详细信息。

有问题的浏览器在该引用中有点旧，但仍然相关。这是设计使然。当标签未激活时，它会减少处理器负载。（Processing.js`setTimeout`用于动画）

有几种方法可以“解决”这个问题。它们涉及检查时间，并在选项卡激活后根据时间计算对象“应该”在哪里。然而，在您的示例中，尽管您的代码看起来会这样做，因为它是一个无论如何都基于时间的时钟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:21:35.540

正如 Loktar 所建议的，这种症状可以通过检查时间并弄清楚你应该在哪里来缓解。这是一个可以做到这一点的函数：

```
function smartInterval(func, interval){
    var last = new Date() - interval,
        now,
        numMissed;

    (function iterate(){
        func();

        // compute the number of iterations you might have missed
        // if you tabbed away and the interval was restricted to 1000ms
        now = +new Date();
        numMissed = Math.round((now - last) / interval) - 1;

        // make up for those iterations that were lost
        while (numMissed--) { func(); }

        last = +new Date();
        setTimeout(iterate, interval);
    })();
} 
```

用法：

```
smartInterval(function(){console.log('hi');}, 100); 
```

[这是一个带有示例的 jsFiddle。](http://jsfiddle.net/lbstr/64pSZ/)尝试注释掉`while`循环 ( `while (numMissed--)`) 以查看通过切换到选项卡，您会得到更少的数字。然而，有了`while`循环，间隔似乎从未改变过。

不幸的是，这可能对您没有任何用处，因为您使用的是 Processing.js 并且超时是在内部设置的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:38:46.943

请参阅[setInterval 在 Chrome 上无法正常工作](https://stackoverflow.com/questions/6951727/setinterval-not-working-properly-on-chrome)。本质上，浏览器会在后台处理 setInterval 以提高性能，因此您无法准确控制发生的情况。

# java - 从 httpclient 3 转换为 httpclient 4（Cookie 策略）

> ID：11122950
> 
> 赞同：4
> 
> 时间：2012-06-20T15:29:18.463
> 
> 标签：java, android, apache-httpclient-4.x, apache-commons-httpclient

以前，我在httpclient3中有以下代码

```
// To prevent cookie warnings.
httpClient.getParams().setParameter("http.protocol.single-cookie-header", true);
httpClient.getParams().setCookiePolicy(org.apache.commons.httpclient.cookie.CookiePolicy.BROWSER_COMPATIBILITY); 
```

我想知道，httpclient4 中的等效代码是什么，因为我在第二行遇到错误。

```
// To prevent cookie warnings.
httpClient.getParams().setParameter("http.protocol.single-cookie-header", true);
// ??? compilation error in this line.
// org.apache.commons.httpclient cannot be resolved to a variable
httpClient.getParams().setCookiePolicy(org.apache.commons.httpclient.cookie.CookiePolicy.BROWSER_COMPATIBILITY); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:49:09.737

此链接可以帮助您解决问题。

[http://www.wirelust.com/2009/03/29/howto-set-the-cookie-policy-with-apache-http-client-40/](http://www.wirelust.com/2009/03/29/howto-set-the-cookie-policy-with-apache-http-client-40/)

所以试试这条线：

```
httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.BROWSER_COMPATIBILITY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-22T19:53:48.533

从 4.3 版开始，`getParams()`全部弃用。为了获得相同的结果，您必须这样做：`ClientPNames``CookiePolicy`

```
final RequestConfig params = RequestConfig
        .custom()
        .setCookieSpec(CookieSpecs.IGNORE_COOKIES)
        .build();

httpPost.setConfig(params); 
```

# intellij-idea - 如何在 IDEA 中忘记记住的选项

> ID：11122954
> 
> 赞同：0
> 
> 时间：2012-06-20T15:29:43.097
> 
> 标签：intellij-idea

我选择了在同一个窗口中打开另一个项目的选项，并让 IDEA 记住这一点，但我知道我想在不同的窗口中打开多个项目。但 IDEA 记得我的第一个选择，我找不到如何撤消它。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:51:36.183

`Settings -> General -> Confirm window to open project in`.

# java - 用于传递参数的 Java 与 C++

> ID：11122955
> 
> 赞同：5
> 
> 时间：2012-06-20T15:29:45.027
> 
> 标签：java, c++, argument-passing

关于 Java 和 C++ 如何传递参数，我已经开始有点困惑了。

它是否正确：

Java 使用按值调用传递，*但*值实际上是引用（不是实际的数据/对象）。所以复制地址？

默认情况下，C++ 按值传递，但值不是引用，而是实际数据。如果您想通过引用使用`&`或指针来模拟真实调用？

总之，Java 会复制参数，但它是引用的副本。`&`C++ 通常会复制实际的底层数据，但不会复制引用（除非您使用或指针）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:31:04.557

C++(03)**总是**复制一份，除非你通过引用传递。*（理论上......在实践中，可能*会发生复制省略，但这与问题无关）

如果您通过指针传递，您仍然会制作副本（当然，它是指针的副本，但仍然是副本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:53:38.217

你的总结是正确的。

我个人发现，在将 Java 与 C++ 进行比较时，当非原始类型作为**指针按值**传递时，将 Java 视为 C++ 的等价物更简单。在 Java 中，您只是看不到，也无法操作指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:42:16.357

Java 的总结是正确的。事实上，它也适用于非引用类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T15:53:13.783

那是对的。另请注意，Java 实际上确实为原始类型（int、char、double、float、short、long、boolean 和 byte）制作了副本，但不是原始类型的数组（int[]、char[] 等）仍然通过引用传递）或包装类（例如 Integer 和 Double，它们是包含原始类型的对象）。如果它是原始类型并且调用函数的参数副本将保持不变，您可以对函数内部参数的本地副本执行任何您想要的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-13T08:40:43.840

好吧，在 Java 和 C++ 中，传递参数时都有两个选项：按值传递（PbV）和按引用传递（PbR）。 **Java 通过值传递所有初步对象，并通过引用传递所有其他对象。** **而 C++ 通过值传递所有内容，除非您需要通过引用传递。**

1.  ***按值传递***

在Java和C++中，按值传递就是对传递的对象进行复制，你在函数中对对象所做的事情不会对函数外的原始对象产生任何影响。例如，

```
void foo(aTemp)
{
aTemp = 2;
}
....
int a = 1;
foo(a)
std::cout << a; 
```

输出为 1；

2.  ***通过引用传递***

通过引用传递不会复制对象，**它会复制对象的引用**。例如

```
void foo(&aTemp)
{
aTemp = 2;
}
....
int a = 1;
foo(a)
std::cout << a; 
```

输出将是 2。

3.  ***更复杂的情况***

到目前为止，java和c++之间没有太大的区别。但是，如果将传入的对象分配给一个新对象，情况就会有所不同。例如在 C++ 中，

```
 void foo(&aTemp)
 {
 myClass b(2);
 aTemp = b;
 }
 ...    
 myClass a(1);
 foo(a)
 std::cout << a; 
```

输出将是 2。

然而，在 Java

```
void foo(aTemp)
{
myClass b = new myClass(2);
aTemp = b;
}
...
myClass a = new myClass(1);
foo(a)
std::cout << a; 
```

输出将为 1。

这里的输出不同**是由 java 和 c++ 中的 "=" 不同造成的**。

**在 c++ 中，如果你不以不规则的方式覆盖“=”，myClass b 的值将被复制到指向 a 的 aTemp 中。**

而在Java中，当你做aTemp = b时，**你将对象b的地址分配给了aTemp，所以aTemp不再指向原来的a**，无论你对aTemp做什么，它都不会对a产生长期影响。

所以总而言之，Java 和 C++ 中的所有参数都是按值传递的——对象的值或引用的值——区别只在于你如何操作值。

这是我从我的正常工作中学到的，希望对你有帮助。

# objective-c - 可以在后台线程上创建 UIView 吗？

> ID：11122957
> 
> 赞同：19
> 
> 时间：2012-06-20T15:30:00.490
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, nsthread

我知道 UIView 不是线程安全的，所以我不能在后台线程上添加视图，要解决这个问题，可以在后台线程上创建 UIView 然后将其添加到主线程上吗？

注意：我不在主线程上这样做的原因是因为我的实际代码要复杂得多，因此需要一段时间来创建所有视图并填充值。当我这样做时，我不希望 UI 变得无响应，所以我试图解决这个问题。

例如..

```
-(void)addLabel//called on background thread
{
    UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0,0,40,100)];
    [label setText:@"example"]
    [self.view performSelector:@selector(addSubview:) onThread:[NSThread mainThread] withObject:example waitUntilDone:YES];
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T15:42:13.063

从[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html)：

> 线程注意事项
> 
> 对应用程序用户界面的操作必须在主线程上进行。因此，您应该始终从应用程序主线程中运行的代码调用 UIView 类的方法。唯一可能不是绝对必要的情况是在创建视图对象本身时，但所有其他操作都应在主线程上进行。

调用`initWithFrame:`明确地不是线程安全的。调用`setText:`可能不是线程安全的，属于“操作”条款。这些当然不承诺是线程安全的。

做你的工作来找出后台线程上的数据。然后在主线程上创建您的视图。如果有大量视图，您可以尝试使用`dispatch_async()`对主队列的多个调用来拆分工作。这可能会让 UI 保持响应；我没有对它进行过广泛的实验。

您可能还需要考虑尽可能切换`UIView`到`CALayer`。大多数`CALayer`工作可以在后台线程上完成。如果您有大量的视图，那可能无论如何都是低效的。如果只是计算视图数据需要很长时间，则表明您没有正确分离模型和视图信息。模型类应该独立于创建视图计算所需的一切。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-02T11:35:09.353

我使用 Xcode 9.0 beta 3 (9M174d)，收到警告。

> [UView init] 只能从主线程调用

所以我认为你应该更好地在主线程中创建 UI

显示下图：

[![在此处输入图像描述](../Images/549e0993c2da933565c1262356be9405.png)](https://i.stack.imgur.com/Hk8xV.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T15:37:36.933

[绘图和印刷指南](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/graphicsdrawingoverview/graphicsdrawingoverview.html)指出：

> 重要 UIKit 类通常不是线程安全的。所有与绘图相关的操作都应在应用程序的主线程上执行。

因此，据我了解，似乎唯一的问题与“绘图相关操作”有关。如果我们假设正确的类仅在其`drawRect:`方法中执行此类操作，那么您建议的方法应该没问题。

# c++ - C++ extern 关键字和全局变量

> ID：11122958
> 
> 赞同：3
> 
> 时间：2012-06-20T15:30:03.227
> 
> 标签：c++, namespaces, global-variables, extern

我有两个名为 file_utils.h 和 file_utils.cpp 的文件，其中包含一些由不同类使用的方法和变量。这是它的外观示例：

file_utils.h：

```
namespace my_namespace
{
extern Foo* foo;
extern Bar* bar;

void my_function(Blah* blah);
} 
```

文件实用程序.cpp

```
#include "file_utils.h"

void my_namespace::my_function(Blah* blah)
{
    foo = 0;    // undefined reference to my_namespace::foo
    bar = 0;    // undefined reference to my_namespace::bar
    //...
} 
```

some_class.cpp

```
#include "file_utils.h"

some_function()
{
    my_namespace::my_function(blah);
    this->foo = *my_namespace::foo; // will that work ok?
} 
```

所以错误在评论中。如果我删除 extern 关键字，我会得到`multiple definition of my_namespace::foo`错误。问题是什么？从设计的角度来看，这甚至是一个好主意，还是我应该尝试使用具有静态成员和方法的类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T15:32:25.417

问题是您仅*声明*但*未定义*变量。

您需要在单个实现文件中提供定义：

**文件实用程序.cpp**

```
#include "file_utils.h"

//definition:
namespace my_namespace
{
   Foo* foo;
   Bar* bar;
}

//alternatively, to keep the same formatting you have
//Foo* my_namespace::foo;
//Bar* my_namespace::bar;

void my_namespace::my_function(Blah* blah)
{
    foo = 0;
    bar = 0;
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:50:51.627

首先，我**真的**建议您澄清两个区别：

*   声明与定义
*   编译器与链接器

在您的情况下，您会收到链接器错误。未定义的引用意味着您的代码指向某个地方，但链接器无法确定在哪里。

当您使用在代码中某处找到的对象时，extern 关键字用于抑制编译器错误。在您的示例中，链接器尝试查找您的类的实例但失败了。这不常与指针一起使用（如果我错了，请纠正我）。所以：

**实用程序.h**：

```
namespace mySpace{
    extern Foo foo; // notes that foo of type Foo will be used.

    void myFn();
} 
```

**实用程序.cpp**：

```
#include "utils.h"

void mySpace::myFn(){
    foo.bar = 5; // changes a member of foo from globals.cpp
} 
```

**全局变量.cpp**

```
Foo mySpace::foo; // this is the actual foo used. 
```

如果您希望回答有关 some_class.cpp 的问题，请向社区提供有关`conversions`您想要实现的目标和目标的知识。

从语义上看，我相信它是对一个类成员的引用`conversions`。

# actionscript-3 - AS3 1009 错误在哪里？

> ID：11122975
> 
> 赞同：-2
> 
> 时间：2012-06-20T15:31:07.100
> 
> 标签：actionscript-3

所以我有以下代码：

```
package  {

import flash.display.MovieClip;
import flash.events.*;
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.display.Stage;
import flash.events.Event;

public class Meteorek extends MovieClip {
            private var scena:Stage;
    public function Meteorek(scena:Stage,x:Number, y:Number ,z:Number): void {
        this.x = scena.stageWidth/2;
        this.y = scena.stageHeight/2;
        this.z = 1100;
        addEventListener(Event.ENTER_FRAME, lasMeto ,false, 0, true);
    }
    public function lasMeto(e:Event):void{
        z -= 10;
        if(z<-100)
        {
        UsunZeScen();
        }
    }
    private function UsunZeScen() : void
    {
        removeEventListener(Event.ENTER_FRAME, lasMeto);

        if (scena.contains(this))
                scena.removeChild(this);
    }
}
} 
```

最后我收到一条错误消息。我不知道为什么。我在另一个类中有相同的代码，一切正常，那么这个有什么问题？T 错误发生在：

```
scena.removeChild(this) 
```

因为它太大了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:57:47.160

将此添加到侦听器之前的构造函数：

```
this.scena = scena; 
```

# tomcat - Apache Tomcat 7.0.26 - 无法访问 Aliased 文件夹中的符号链接文件夹

> ID：11122976
> 
> 赞同：1
> 
> 时间：2012-06-20T15:31:09.457
> 
> 标签：tomcat

我在我的 Tomcat 根目录中部署了一个 Web 应用程序。我在 META-INF 的 context.xml 中为别名创建了一个条目

```
Context aliases="/h1=/opt/apache2/test/sample/h1" 
```

我有三个目录，即`h11`，`h12`和`h13`。`h1`在这些目录中，`h12`目录有一个符号链接说`/var/text/hello/scripts`

当我访问`/h1/h11/xxx.html`或`/h1/h13/yyy.html`我正在获取内容时，而当我访问时我`/h1/h12/test.js`无法访问它

关于如何解决在别名文件夹中有符号链接并访问符号链接文件夹中的内容的问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:44:36.057

我有同样的问题。找到了一些引用 context.xml 的“allowLinking”参数的东西（例如：[http](http://www.isocra.com/2008/01/following-symbolic-links-in-tomcat/) ://www.isocra.com/2008/01/following-symbolic-links-in-tomcat/ ），但我一直没能让 Tomcat 跟随运行 Tomcat 7.0.21 和 7.0.28 的 Mac OSX 10.6.8 上的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:34:48.103

尝试在 Tomcat 文档中查找上下文的 allowLinking 属性。

# arrays - 如何从数组中删除所有 undef？

> ID：11122977
> 
> 赞同：19
> 
> 时间：2012-06-20T15:31:09.723
> 
> 标签：arrays, perl, undef

从 Perl 中的配置文件中读取时，可能会出现行无效并且不需要将其添加到我的有效行数组中的情况。因为我在这里使用了一个 for 循环，所以即使是无效的行也会创建一个 undef 条目。之后如何删除所有它们？

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-20T15:40:00.870

```
@array = grep defined, @array; 
```

# c# - C# 中简单的跨应用程序数据和事件传递

> ID：11122981
> 
> 赞同：0
> 
> 时间：2012-06-20T15:31:17.193
> 
> 标签：c#, wcf, events, asynchronous, ipc

**背景** 我正在创建一个 ASP.net 应用程序，它使用自定义库（尚未公开发布，但很快）为 jQuery 中的 javascript 客户端提供长轮询处理程序。客户端将调用处理程序，等到处理程序返回一些数据，显示它，然后再次点击处理程序......清洗，冲洗，重复。

处理程序的工作是接受请求，将其放入一个集合（通常是 a `List<>`）并等待一个事件，其中包含要返回到等待请求的数据。我已经对此进行了测试，在我的服务器上的静态类中使用了一个简单的事件，这一切都很好。

**问题** 为了让所有客户端都能接收到消息，在我服务器上的所有 AppDomains 中，我创建了一个简单的 C# 控制台应用程序 - 它在后台运行并通过 WCF (NamedPipe) 提供 DataContract。然后我在 ASP.net 中创建了一个客户端对象，它可以通过 WCF 接口与控制台应用程序对话。

我可以同步地将消息拉入/推送到我的缓存中 - 这工作正常。但是，当我尝试在 WCF 合同上使用异步模式时，`EndMethod`会在我要求它之前触发它，直接在将 IAsyncResult 返回到 BeginMethod 之后。

我看不出有什么问题 - 谷歌有大量资源显示弱示例，但它们无济于事。

**我想要的** 是他们无论如何都要通过数据合同绑定到 WCF 上的事件吗？这样我就可以附加到事件并完成它。进入缓存的新消息会触发我的事件，这会触发异步处理程序返回所有等待的请求。

这可能吗，如果可以，是否有人有任何示例/教程/示例？

**要遵循的代码...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:39:54.150

我知道这是可能的，因为我已经这样做了，并且知道那里的信息有限（我计划很快创建一篇博客文章）。基本上，您需要创建`Subscribe/Unsubscribe`WCF 方法，这将使您的端口保持打开状态。

您的服务器代码应如下所示：

```
[ServiceContract(SessionMode = SessionMode.Required,
    CallbackContract = typeof(IProcessorCallBack))]
public interface IProcessor
{
    [OperationContract]
    Boolean SubscribeToEvents();

    [OperationContract]
    Boolean UnsubscribeToEvents();
}

public interface IProcessorCallBack
{
    [OperationContract(IsOneWay = true)]
    void OnEvent(EventArgs args);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]
public class DDSpeechMikeProcessor:IProcessor
{
    private readonly List<IProcessorCallBack> _eventListeners = 
        new List<IProcessorCallBack>();

    public bool SubscribeToEvents()
    {
        var listenerToCallBacks =    
            OperationContext.Current.GetCallbackChannel<IProcessorCallBack>();
        if(!_eventListeners.Contains(listenerToCallBacks))
            _eventListeners.Add(listenerToCallBacks);
    }

    public bool UnsubscribeToEvents()
    {
        var listenerToCallBacks = 
            OperationContext.Current.GetCallbackChannel<IProcessorCallBack>();
        if (_eventListeners.Contains(listenerToCallBacks))
            _eventListeners.Remove(listenerToCallBacks);
    }

    //This is your server listening for the main event
    //which it will pass on to all listeners
    void OnEvent(EventArgs args)
    {
        foreach(var listener in _eventListeners)
        {
            try
            {
                listener.OnEvent(args);
            }
            catch (Exception exception)
            {
                RemoveListenerIfBadCommunication(listener, exception);
            }
        }
    }

    //If a listener did not unsubscribe before shutting down you will get exceptions
    private void RemoveListenerIfBadCommunication(IProcessorCallBack listener, 
        Exception exception)
    {
        if (exception.GetType() == typeof(CommunicationException)
            || exception.GetType() == typeof(CommunicationObjectAbortedException)
            || exception.GetType() == typeof(CommunicationObjectFaultedException)
        )
           _eventListeners.Remove(listener);
    }
} 
```

在您的客户端代码中：

```
public class Client : IProcessorCallBack
{
    DuplexChannelFactory<IProcessor> _processorFactory;
    IProcessor _processor
    void OpenProcessor()
    {
        _speechMikeProcessorFactory = new DuplexChannelFactory<IProcessor>(
              this,
              new NetNamedPipeBinding(),
              new EndpointAddress(baseUri + @"/" + HostName));
        _processor = _speechMikeProcessorFactory.CreateChannel();
        _processor.SubscribeToEvents();
    }

    void OnEvent(EventArgs args)
    {
         //Do Stuff
    }
} 
```

如果我需要更详细地解释任何事情，请告诉我

# silverlight - 在 Silverlight MVVM 中显示树结构

> ID：11122983
> 
> 赞同：1
> 
> 时间：2012-06-20T15:31:31.430
> 
> 标签：silverlight, mvvm, hierarchy

我有一个从数据库获得的树结构中的对象列表。加载页面时，有一个组合框表示层次结构中的顶层。当用户在组合框中选择一个项目时，应该有另一个组合框（动态）显示第二级中的所有元素。当用户在第二个组合框中选择一个项目时，其子项应显示在另一个组合框中。这应该一直持续到层次结构中的最后一个元素。谁能告诉我如何实现这一点。提前致谢。

# spring-mvc - 不能使用 POST 在 Spring MVC 中显示 JSP

> ID：11122985
> 
> 赞同：0
> 
> 时间：2012-06-20T15:31:33.633
> 
> 标签：spring-mvc

使用 Spring 3 MVC，如果我使用 GET 方法来解析 JSP，它可以正常工作。

```
@RequestMapping(value="/my_profile", method = RequestMethod.GET)
public String saveMethod(@ModelAttribute("myBasicInfoForm") MyBasicInfoForm myBasicInfoForm,  HttpServletRequest request) throws ServiceException{
    return  "/testmyprofile";
} 
```

我通过控制器中的另一种方法调用 saveMethod()，如下所示：

```
@RequestMapping(value="/updateProfile", method = RequestMethod.POST)
public String updateProfile(@ModelAttribute("myForm") MyForm myForm, HttpServletRequest request){ logger.debug("<-- log message"); return "redirect:/my_profile"; } 
```

该方法由 HTML 表单调用：

```
<form:form id="ss_fp_basic_info" action="updateProfile" modelAttribute="myBasicInfoForm" method="post"> 
```

但是如果我更改为 POST 方法，我会收到以下错误，如果您能提供帮助，不胜感激：

```
 [6/20/12 11:23:36:118 EDT] 0000001f SystemOut     O 
[ERROR,BaseController] BaseController - handleException
    org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' not supported
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodResolver.resolveHandlerMethod(AnnotationMethodHandlerAdapter.java:623)
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:831) 
```

# wpf - 从另一个线程将 StackPanel 添加到 Grid.Children 集合

> ID：11122986
> 
> 赞同：0
> 
> 时间：2012-06-20T15:31:34.993
> 
> 标签：wpf, dispatcher

我有一个面板，我在代码中构建并使用用户控件填充它。当它完成填充时，我向主 GUI 提出一个事件，告诉它填充完成并传递堆栈面板。

然后我想将此面板添加到容器网格中。

我努力了

```
 grdPbContent.Dispatcher.Invoke(
       DispatcherPriority.Normal, 
       new Action<StackPanel>(
           delegate(StackPanel _sp)
           {
                grdPbContent.Children.Add(_sp);
           }
       ),
       sp);` 
```

还有空委托选项，但总是从`TargetOfInvocation`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:47:48.283

我不确定你做错了什么，但它应该通过简单地使用调度程序来工作。尝试使用包含面板的 Window 调度程序：

```
MyWindow.Dispatcher.Invoke((Action)delegate 
    {
        MyWindow.grdPbContent.Children.Add(_sp);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:27:35.677

WPF 对象不能由创​​建它们的线程以外的线程修改，因此您不能`StackPanel`在一个线程上创建 a 并将其添加到`Grid`在另一个线程上创建的 a

要在后台进行处理，请使用`Dispatcher`以不同的[DispatcherPriority](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)运行代码，例如`Background`

您可以使用`Application.Current.Dispatcher`从代码中的任何位置获取当前应用程序的 UI 线程。

如果这是一个非常长的过程，无论运行的优先级如何都会锁定 UI，那么只从另一个线程获取数据，并在返回数据后在主 UI 线程上构建你的 UI 对象。

# php - magento 资源中的 version 和 data_version 有什么区别？

> ID：11122987
> 
> 赞同：2
> 
> 时间：2012-06-20T15:31:35.200
> 
> 标签：php, magento

```
mysql> select * from core_resource;
+-------------------------+------------+--------------+
| code                    | version    | data_version |
+-------------------------+------------+--------------+
| adminnotification_setup | 1.0.0      | 1.0.0        | 
```

我从来没有看到这两列之间的值有差异，而且我不确定 data_version 的确切用途。

这是有用的东西吗？我可以从中受益吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:58:43.120

`data_version`而相应的所谓“数据升级脚本”出现在CE1.4中。

数据安装/升级脚本在形式和功能上与“常规”安装和升级脚本相同。它们只是在初始化期间稍后执行，主要的环境差异是有一个存储对象和一个初始化的请求对象，尽管我无法想象后者在升级工作流程中的适当使用。

来自`Mage_Core_Model_App`：

```
public function run($params)
{
    //snip...
    if ($this->_cache->processRequest()) { //cache hook
        $this->getResponse()->sendResponse();
    } else {
        $this->_initModules(); //triggers "normal" install & upgrade workflow
        //snip...
        if ($this->_config->isLocalConfigLoaded()) {
            //snip...
            $this->_initCurrentStore($scopeCode, $scopeType);
            $this->_initRequest();
            Mage_Core_Model_Resource_Setup::applyAllDataUpdates(); //data upgrade scripts
        }

        $this->getFrontController()->dispatch();
    }
    return $this;
} 
```

# arrays - “Perl：将一个数组元素从一个数组添加到另一个数组”

> ID：11122988
> 
> 赞同：2
> 
> 时间：2012-06-20T15:31:37.573
> 
> 标签：arrays, perl, bioinformatics

我是 Perl 和一般编程的绝对新手（不到一个月的经验）。

如果我要解决更大的问题，我会遇到一个需要解决的问题。

基本上，我有 2 个数组，如下所示：

```
@array1 = ('NM_1234' , '1452' , 'NM_345' , '5008' , 'NR_6145' , '256');
@array2 = ('NM_5673' , '2' , 'NM_345' , '5' , 'NR_6145' , '10'); 
```

`@array1`包含 id 编号，后跟长度。id 号是核苷酸序列，长度是序列的长度。

`@array2`包含 id 编号，后跟 G-Quadruplex 结构的数量，因此一些序列仅包含 2 个此类结构，而其他序列包含 10 个或更多。

基本问题是，我需要为每个匹配的 ID 号添加（例如 5008、256）`@array2`中的“长度数字” 。`@array1`

因此，例如**NM_345**在两个数组中都匹配，我需要向它添加**5008**，以便最终结果变为**NM_345,5,5008**。

与**NR_6145**和其他此类匹配类似（有超过 20,000 个 ID 号码`@array2`）

到目前为止，我已经能够编写可以在两个数组中搜索相同 id 号的代码。这是代码：

```
#Enter file name
print "Enter file name: ";
$in =<>;
chomp $in;

open(FASTA,"$in") or die;

@data = <FASTA>; #Read in data        
$data = join ('',@data); #Convert to string
@data2 = split('\n',$data); #Explode along newlines

#Enter 2nd file name
print "\n\nEnter 2nd file name: ";
$in2=<>;
chomp $in2;

open(FASTA,"$in2") or die;
@entry =<FASTA>; #Read in data

$entry = join('',@entry); #Convert to string
@entry2 = split('\n',$entry); #Explode along newlines

my %seen;
for  $item (@data2) {
    if($item =~ /([0-9]+)/){
        push @{$seen{$key}}, $item;#WHAT IS THIS DOING? HOW?
    }
}

for my $item (@entry2) {
    if ($item =~ /([0-9]+)/){
        if (exists $seen{$key}) {
            print $item,"\n";
        };        
    }
}
exit; 
```

我从这里的解决方案中派生了从 2 个数组中找到相同元素的代码，因此完全归功于 Chas.Owens：[https](https://stackoverflow.com/a/1064929/1468737) ://stackoverflow.com/a/1064929/1468737 。当然，我还不太了解这部分：

```
push @{$seen{$key}}, $item;#WHAT IS THIS DOING? HOW? 
```

它似乎是一个哈希值的数组或什么的？

那么，现在如何将 @array1 中的长度元素添加到 @array2 中？我需要使用我认为的拼接命令，但是如何？

我想要的输出应该是这样的：

```
NM_345,5,5008 <br>
NM_6145,10,256<br>
etc 
```

我还需要将此输出保存到一个文件中，然后再对其进行分析，以查看长度和 G-quadruplex 数之间是否存在任何相关性。

任何帮助或输入将不胜感激。

感谢您花时间解决我的问题！

* * *

编辑：这个编辑是为了显示数据文件的样子。它们基本上是来自我编写的其他程序的 putput 文件。

我的第一个文件名为 Transcriptlength.fa，其中包含超过 40,000 个 ID 号码，`@array1`如下所示：

```
NR_037701
3353

NM_198399
2414

NR_026816
601

NR_027917
658

NR_002777
1278 
```

我的第二个文件名为 Quadcount.AllGtranscripts.fa，其中包含超过 20,000 个 id 数字`@array2`，如下所示：

```
NM_000014   
1

NM_000016   
3

NM_000017   
19

NM_000018   
2

NM_000019   
3

NM_000020   
30

NM_000021   
1

NM_000022   
2

NM_000023   
5

NM_000024   
1

NM_000025   
15

NM_000029   
5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:55:30.693

一个问题的问题太多了......但无论如何我们都要走了：

```
push @{$seen{$key}}, $item; 
```

`%seen`是一个散列（或关联数组），因此从与该 key 关联的值中`$seen{$key}`恢复。然后将此值视为数组引用并通过使用运算符转换为数组。finally被添加到这个数组的末尾。`%seen``$key``@{}``$item`

我不明白你所说的长度是什么意思......你的意思是前面的数组长度？

要将其保存在文件中，您只需要`print()`在脚本中执行脚本时重定向到文件，例如：

```
./my_perl_script.pl > my_output_file 
```

文件输入也是如此，你真的不需要`open()`，`close()`等等。这更灵活，编码更快：

```
./my_perl_script.pl < my_input_file 
```

这允许您以更简单的方式进行管道传输，并将数据从/传递到其他脚本/进程。当然，两种重定向可以同时使用：

```
./my_perl_script.pl < my_input_file > my_output_file 
```

此外，您甚至不需要保存到文件中（无论如何，拥有已处理数据的副本总是明智的）并且您可以将结果直接通过管道传输到其他进程，例如

```
./my_perl_script.pl | my_other_script 
```

这适用于我使用过的所有操作系统（Windows、Linux、OS X、BSD）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T23:57:06.377

看起来您在读取数据文件以及生成所需的输出时遇到了麻烦。除非您向我们展示文件数据的示例，否则我们无法帮助解决这部分问题，但这里有一个正确生成输出的解决方案。

最好将数据存储在散列中，因为这样可以直接访问给定序列 ID 的长度和结构计数。幸运的是，您所描述的数组可以通过简单的赋值轻松转换为哈希，因此这个简短的程序可以从您显示的数组中完成您想要的操作。

`grep /\D/, @array2`循环中的列表仅`@array2`通过仅选择那些包含非十进制字符的元素来从中选择所有序列 ID。我已经这样做了，以防序列显示的顺序很重要。在您的最终程序中，您可能应该直接从文件中处理数据，而不是将其读入数组，因此这不会成为问题。

```
use strict;
use warnings;

my @array1 = ( NM_1234 1452   NM_345 5008   NR_6145 256 );
my @array2 = ( NM_5673    2   NM_345    5   NR_6145  10 );

my %lengths = @array1;
my %counts = @array2;

for my $id (grep /\D/, @array2) {
  my $length = $lengths{$id};
  printf "%s,%s,%s\n", $id, $length, $counts{$id} if $length;
} 
```

**输出**

```
NM_345,5008,5
NR_6145,256,10 
```

* * *

**更新**

您的文件数据非常适合设置*段落模式*，其中记录在数据文件中由空行分隔。为此，您将*输入记录分隔符*变量`$/`设置为空字符串`""`。

这个修改后的程序从第一个文件中读取记录，将它们拆分为空白（空白包括空格、制表符和换行符等），并构建一个`%lengths`将每个序列 ID 与其长度相关联的哈希。

对第二个文件执行相同的操作，这次检查序列 ID 是否出现在哈希中。如果是这样，则输出完整的记录。

```
use strict;
use warnings;

my $fh;
my %lengths;

$/ = "";

open $fh, '<', 'Transcriptlength.fa'
    or die qq(Unable to open "Transcriptlength.fa": $!);

while (<$fh>) {

  my ($id, $length) = split;
  next unless $id;

  $lengths{$id} = $length;
}

open $fh, '<', 'Quadcount.AllGtranscripts.fa'
    or die qq(Unable to open "Quadcount.AllGtranscripts.fa": $!);

while (<$fh>) {

  my ($id, $count) = split;
  next unless $id;

  my $length = $lengths{$id};
  next unless $length;

  print join(',', $id, $count, $length), "\n";
} 
```

不幸的是，您选择的样本数据不包含匹配的序列 ID，因此在针对该数据运行时，该程序没有输出。您的实际文件将更有效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:30:15.343

**更新：**我留下原始答案代码[的链接](http://codepad.org/a9QXEmdU)来说明抽象不同子任务（尤其是处理子任务）的概念。但是，如果您确定输入文件中的内容，您的问题可以更容易地解决：

```
use warnings;
use strict;

my $lengths_filename = 'Transcriptlength.fa';
my $counts_filename  = 'Quadcount.AllGtranscripts.fa';

my %sequence;   # it will be the basic data repository

local $/ = ''; 
# ...by this we ensure that files will be read by logical blocks instead of lines. 
# Might need some tweaking, if 'empty line' in your sample is not really empty.

# we start processing from 'counts' file, as only those records present in it
# should actually be in our output:
open my $cfh, '<', $counts_filename 
  or die $!, "\n";
while (<$cfh>) {
  # each logical block consists of two parts, divided by whitespace
  my ($name, $count) = split; 

  # here goes magic: we simultaneously create a new record in our repository...
  # ... and set its 'count' property to the value, extracted from the scanned fileblock
  $sequence{$name}{count} = $count;
}
close $cfh;

# now we go for lengths, approach is almost the same
open my $lfh, '<', $lengths_filename or die $!, "\n";
while (<$lfh>) {
  my ($name, $length) = split;

  # here we check that the sequence was in 'counts' file
  if (exists $sequence{$name}) { 
    $sequence{$name}{length} = $length;
  } 
}
close $lfh;

# and now the output block: it's mostly the same as in the original answer:
for my $name (sort keys %sequence) {
  print "$name, $sequence{$name}{count}, $sequence{$name}{length}", "\n";
} 
```

这是另一个[键盘](http://codepad.org/xmAJDdvo)来说明它是如何工作的。不要介意奇怪`__DATA__`的东西，它只是针对这个特定版本的程序（使用`__DATA__`部分允许我模拟从文件中读取，因为我不能在键盘上使用外部源）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T16:53:20.423

这个

```
$data = join ('',@data); #转换成字符串
@data2 = split('\n',$data); #沿换行符爆炸
```

不会像您想象的那样创建您的数组。它只是重新创建了您开始使用的线条结构。我认为你的意思是用“，”逗号分开。使用调试工具。至少插入一个这样的打印块

```
打印连接（“：”，@data2）；
```

看看你的数组中实际有什么。

在继续下一条之前，让每条线都正常工作。然后，如果您无法弄清楚为什么某条线路无法正常工作，您可以在此处发布问题。

事实上，很难用代码说出你想在代码中说什么，因为这些想法是不完整的。

# mysql - 两部分mysql查询，排序显示第一部分的结果，首先

> ID：11122990
> 
> 赞同：0
> 
> 时间：2012-06-20T15:31:38.523
> 
> 标签：mysql, sql

我有这个 mysql 查询。

任何想法如何对结果进行排序以便首先从查询的第一部分获取结果，然后是从查询的第二部分获取的结果。

这是我的做法，但它无法正常工作，将结果混合在一起。

```
SELECT name, pic0, bio,site
FROM ".$table."
WHERE ( (name LIKE '%john%' OR name LIKE '%smith%') AND site LIKE ('%site1%') )
   OR ( name IS NOT NULL AND category IN ('drivers', 'construction') AND site LIKE ('%site1%') )
ORDER BY ( (name LIKE '%john%' OR name LIKE '%smith%') AND site LIKE ('%site1%') ) DESC
LIMIT ".$offset.", ".$rowsperpage.""); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:36:34.200

如果*查询的第一部分是*指第一个- 条件，则在现有的 - 子句之后`WHERE`添加 a 就足够了。`DESC``ORDER BY`

由于它使用与第一个条件相同的逻辑，因此它将`1`用于第一个条件为真的那些行，以及`0`其余的行。

按降序排序应该把第一个条件的结果放在第一位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:34:03.630

将查询拆分为两个查询和`UNION`它们

MySQL 中的联合：http: [//dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

你的查询应该是这样的，虽然我没有测试过：

```
(SELECT name, pic0, bio,site
FROM ".$table."
WHERE ( (name LIKE '%john%' OR name LIKE '%smith%') AND site LIKE ('%site1%') )
ORDER BY ( (name LIKE '%john%' OR name LIKE '%smith%') AND site LIKE ('%site1%') ) DESC)
UNION
(SELECT name, pic0, bio,site
FROM ".$table."
WHERE ( name IS NOT NULL AND category IN ('drivers', 'construction') AND site LIKE ('%site1%') )
ORDER BY ( (name LIKE '%john%' OR name LIKE '%smith%') AND site LIKE ('%site1%') ) DESC) 
```

# iphone - 在没有 Airplay 设备的情况下显示 AirPlay 图标？

> ID：11122993
> 
> 赞同：0
> 
> 时间：2012-06-20T15:31:46.520
> 
> 标签：iphone, objective-c, ios

我正在尝试将 AirPlay 按钮添加到我的应用程序并使用以下代码：

```
MPVolumeView *volumeView = [ [MPVolumeView alloc] init] ;
[volumeView setShowsVolumeSlider:NO];
[volumeView sizeToFit];          
aCell.accessoryView = volumeView; 
```

我无法显示它，我假设这是因为我没有启用 AirPlay 的设备。无论如何我可以让图标显示用于测试目的吗？我需要看看它是否会正确定位。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:53:05.393

在你的 Mac 上运行 Airfoil Speakers，这样当你的手机和电脑在同一个无线网络上时，你的应用就会显示 airplay 按钮。[翼型扬声器](http://rogueamoeba.com/airfoil/speakers.php)

# asp.net-mvc - 如何将当前模型从布局传递到控制器？

> ID：11122996
> 
> 赞同：1
> 
> 时间：2012-06-20T15:32:00.703
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我有一个位于布局中的菜单栏，每个页面都可以访问

当用户单击其中一个菜单项时，我正在尝试保存页面模型的任何信息（可以是编辑客户、汽车或狗的信息），以便当他们返回页面时 - 我可以在他们来自的任何页面上重新填写信息。

做这样的事情的最好方法是什么？

现在，这很丑 - 每个控制器都有自己的菜单链接操作（“编辑”），视图本身位于 /Shared 文件夹中，布局有一个像这样的 ActionLink

_Layout.vbhtml

```
<div id="footer">                
    <div class="footerContent" style="top:20px;">@Html.ActionLink("Edit This", Edit"</div>
</div> 
```

任何可以使用此布局的控制器看起来像这样（例如 ApplyController）：

```
 Public Function Edit(ByVal apply As ApplyModel) As ActionResult
        //would like to save the apply model so i can use it later 
        Return View("Edit"))
    End Function 
```

无论如何 - 希望这是有道理的..第一次将 MVC 与 VB.NET 一起使用，所以希望一切看起来都不错

# html - 垂直中心不起作用

> ID：11122997
> 
> 赞同：0
> 
> 时间：2012-06-20T15:32:02.167
> 
> 标签：html, css, vertical-alignment

我正在写一个联系页面，但我有一个奇怪的问题。就在输入和文本区域我有一个十字架。当我指向十字架时，会有文字，但效果很好。我已将十字垂直居中，因此它将出现在输入/文本区域旁边的中间。我已经在一个 div 中设置了输入/文本区域和十字，并且使用输入 div 可以正常工作，但是使用高于输入 div 的 textarea div，我的问题是十字在底部而不是在中间。请看看有什么问题：[http ://demo.wietsedev.nl/](http://demo.wietsedev.nl/)

```
<div>
    <input type="text" placeholder="Volledige naam" id="name" />
    <img src="cross.png" class="cross" />
</div>
<div>
    <input type="text" placeholder="Uw E-mail adres" id="email" />
    <img src="cross.png" class="cross" title="Dit E-mail adres bestaat niet" />
</div>
<div height="100px">
    <textarea placeholder="Uw bericht" id="message"></textarea>
    <img src="cross.png" class="cross" />
</div> 
```

这是十字架的样式：

```
.cross {
    height: 20px;
    width: 20px;
    vertical-align: middle;
    margin: 2px;
} 
```

如果您需要更多信息，可以查看页面源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:37:59.490

您实际上可以在这里做很多事情，但也许最简单的事情之一就是简单地将您的跨类浮动到右侧并添加一些上边距

```
.cross {
    height: 20px;
    width: 20px;
    margin: 2px;
    float: right;
    margin-top:0.6em;
} 
```

**编辑：**请注意，这不会将十字放在文本区域的中间，但考虑到垂直对齐方式可能与浏览器不一致，将十字放在顶部也可能不是一个坏电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:33:52.280

您很可能错误地使用了垂直对齐，因为它经常被误用的 css 样式

[http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:47:20.067

我会从 html 中删除 img 并通过 CSS 放置它（实际上是展示性的）。把一个类放到第三个 div 然后这个样式：

```
.theDivClass {
padding-right: 40px; /*the img width + a little more */
background: url(pathtotheimg) no-repeat center right; /*Center right does the trick here*/
} 
```

我认为这是最简单的方法。